# StackOverflow 问答 15987000-15987999

# joomla - 那是哪个joomla模板？

> ID：15987006
> 
> 赞同：-3
> 
> 时间：2013-04-13T10:50:07.683
> 
> 标签：joomla, joomla-template

我很想知道如何找到网站正在使用的 Joomla 模板。

我可以找到[maxhealthcare.in](http://www.maxhealthcare.in/)使用的 Joomla 模板吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:54:41.937

我认为您要查找的模板名称是 Beez5

您可以在 URL 上以 root 后的方式查看它`http://www.maxhealthcare.in/templates/beez5/css/beez5.css`，`templates`它来自文件夹`beez5`，因此这就是您要查找的名称。

按照[此链接](http://demo16.joomler.net/using-joomla/extensions/templates/beez5.html)转到[Joomler.Net上的模板页面](http://joomler.net)

**请注意，您需要将模板版本与您的[Joomla](http://joomla.com)版本相匹配。**

# node.js - _id 中的 MongoDB 转换错误

> ID：15987012
> 
> 赞同：1
> 
> 时间：2013-04-13T10:50:29.690
> 
> 标签：node.js, mongodb, mongoose

我正在使用猫鼬。我的架构就像

```
var tblTypes = new Schema({
_id: { type: String, required: true }
, desc: String
, priority: Number  
}, { collection: 'tblTypes' }); 
```

在查询中获取记录时，我在 findone 中给出了类似 dis 的查询

**JSON**

```
{ _id: "SFK" } 
```

它的给予

```
{ message: 'Cast to ObjectId failed for value "CONFIRM" at path "_id"',
name: 'CastError',
type: 'ObjectId',
value: 'CONFIRM',
path: '_id' } 
```

作为错误。早些时候它在不同的系统中工作。我不确定这两个版本。我哪里错了？

# c# - 我该怎么做 = 列表 ?

> ID：15987013
> 
> 赞同：2
> 
> 时间：2013-04-13T10:50:33.703
> 
> 标签：c#, entity-framework, list

我有两个具有用户定义类型的列表，例如`List<User_Master>`和`List<User_Master_Temp`> 两者`User_Master`和都`User_Master_Temp`包含具有相同名称的相同类型的变量。我如何分配这些类型的列表？
传统的做法是

```
userMaster.UserName = userMasterTemp.UserName;
userMaster.UserEmail = userMasterTemp.UserEmail;
userMaster.UserSalary = userMasterTemp.UserSalary; 
```

为什么我需要这个？

我正在使用 EF 5（DataBase First Approach）和 MVC 4，我在模型中应用我的数据注释验证，如果我更新我的 edmx 文件然后运行自定义工具，我的所有验证都会消失。

所以我编写了自己的视图模型类，它与原始模型类相同，我在该视图模型类中应用了我的数据注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:49:57.287

考虑使用[Automapper](http://automapper.codeplex.com/)使用定义的配置或某种约定将一个自定义实例转换为另一个。如果它们具有相同的名称和类型兼容，则它具有映射属性的约定，默认情况下可以使用。接下来的代码演示了它的用法

```
void Main()
{
    List<UserMaster> users = new List<UserMaster>{
        new UserMaster{Name = "Bob",  Email = "bob@mail.ru",  Salary = 10},
        new UserMaster{Name = "Jack", Email = "jack@mail.ru", Salary = 20},
        new UserMaster{Name = "John", Email = "john@mail.ru", Salary = 40},
    };

    Mapper.CreateMap<UserMaster, UserMasterTemp>();

    List<UserMasterTemp> usersTemp = Mapper.Map<IEnumerable<UserMaster>,
                                                List<UserMasterTemp>>(users);

    usersTemp.ForEach(Console.WriteLine);
}

class UserMaster
{
    public string Name { get; set; }
    public string Email { get; set; }
    public decimal Salary { get; set; }
}
class UserMasterTemp
{
    public string Name { get; set; }
    public string Email { get; set; }
    public decimal Salary { get; set; }

    //formating for demo purposes
    public override string ToString()
    {
        return string.Format("Name: {0}, Email: {1}, Salary: {2}", 
                              Name, Email, Salary);
    }
} 
```

印刷：

```
Name: Bob,  Email: bob@mail.ru,  Salary: 10
Name: Jack, Email: jack@mail.ru, Salary: 20
Name: John, Email: john@mail.ru, Salary: 40 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:31:48.487

您可以使用自动映射器来映射对象。

这是文档：

[点击这里](https://github.com/AutoMapper/AutoMapper/wiki)

您可以使用 Visual Studio 中的 NUGET PACKAGE 获取 AUTOMAPPER。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T10:53:19.340

```
User_Master.Select(m=>new User_Master_Temp(){/*assign the Properties*/}); 
```

如果你正在使用一些对象到对象的映射器，你可以使用 i Use [Glue](http://glue.codeplex.com/)来执行此操作。

```
var Mapping = new Mapping<User_Master, User_Master_Temp>();
Mapping.AutoRelateEqualNames();
User_Master.Select(m=>Mapping.Map(m)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T22:22:33.060

或者如果你不想使用工具，你可以使用这个方法：

```
public static void CopyIdenticalObjects(object source, object destination)
        {
            FieldInfo[] destinationFields = destination.GetType().GetFields(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Public);

            foreach (FieldInfo sourceField in source.GetType().GetFields(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Public))
                for (int counter = 0; counter < destinationFields.Length; ++counter)
                    try
                    {
                        if (destinationFields[counter].Name.Equals(sourceField.Name))
                        {
                            destinationFields[counter].SetValue(destination, sourceField.GetValue(source));
                            break;
                        }
                    }
                    catch { }
        } 
```

# javascript - 如何删除 jQuery Mobile 样式？

> ID：15987014
> 
> 赞同：31
> 
> 时间：2013-04-13T10:50:37.643
> 
> 标签：javascript, html, css, jquery-mobile

我选择了 jQuery Mobile 而不是其他框架，因为它的动画功能和动态页面支持。

但是，我在造型方面遇到了麻烦。我想保留基本页面样式以执行页面转换。但我还需要完全自定义标题、列表视图、按钮、搜索框的外观......仅处理颜色是不够的。我需要处理尺寸、位置、边距、填充等。

因此，我努力使用 jQuery Mobile 添加的额外 div 和类，以便用 CSS 覆盖它们。但是太费时间了，从头重写css会快得多……

有没有办法加载一个最小的 jQuery Mobile css 文件？

还是我应该寻找其他移动框架？我需要处理页面转换、ajax 调用、Cordova 兼容性，当然还有完全可定制的 html/css...

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-14T08:30:56.680

## 标记增强预防的方法：

这可以通过几种方式完成，有时您需要将它们结合起来才能达到预期的结果。

*   方法一：

    它可以通过添加这个属性来做到这一点：

    ```
    data-enhance="false" 
    ```

    到页眉、内容、页脚容器。

    这也需要在应用加载阶段开启：

    ```
    $(document).on("mobileinit", function () {
        $.mobile.ignoreContentEnabled=true;
    }); 
    ```

    ***在初始化 jquery-mobile.js 之前初始化它（看下面的例子）。***

    更多相关信息可以在这里找到：

    [http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

    示例：http: [//jsfiddle.net/Gajotres/UZwpj/](http://jsfiddle.net/Gajotres/UZwpj/)

    要再次重新创建页面，请使用以下命令：

    ```
    $('#index').live('pagebeforeshow', function (event) {
        $.mobile.ignoreContentEnabled = false;
        $(this).attr('data-enhance','true');
        $(this).trigger("pagecreate")
    }); 
    ```

*   方法二：

    第二种选择是使用此行手动执行此操作：

    ```
    data-role="none" 
    ```

    示例：http: [//jsfiddle.net/Gajotres/LqDke/](http://jsfiddle.net/Gajotres/LqDke/)

*   方法三：

    可以防止某些 HTML 元素进行标记增强：

    ```
     $(document).bind('mobileinit',function(){
          $.mobile.keepNative = "select,input"; /* jQuery Mobile 1.4 and higher */
          //$.mobile.page.prototype.options.keepNative = "select, input"; /* jQuery Mobile 1.4 and lower */
     }); 
    ```

    示例：http: [//jsfiddle.net/Gajotres/gAGtS/](http://jsfiddle.net/Gajotres/gAGtS/)

    ***在 jquery-mobile.js 初始化之前再次初始化它（看下面的例子）。***

在我的其他教程中了解更多信息：**[jQuery Mobile：动态添加内容的标记增强](http://www.gajotres.net/how-to-remove-jquery-mobile-styling/)**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-27T14:37:21.080

...或者只是使用专门构建的官方、[无主题版本的 CSS](http://jquerymobile.com/download/)，以允许设计自定义主题，同时保留所有 jQuery Mobile 功能。

您不必一直与 hacks 和覆盖作斗争，并且您会获得更轻的 CSS。

双赢。

[编辑：也在这里](https://stackoverflow.com/questions/10014609/how-to-stop-jqm-from-styling-a-page)回答

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-21T21:51:02.793

老实说，我很失望 jQuery mobile 没有为我们提供一个相对无样式的启动工具包，仅使用您所说的：Ajax、transitions、cordova...

覆盖生成的 css 类是绝对的疯狂，但我做了一些臭鼬工作，我设法将未压缩的 css 文件大小从惊人的 233kb 减少到仅 27kb，同时保留 css 的重要方面，如过渡、一页查看等。这样你几乎就像从一个空的 css 文件开始一样。

如果有任何需求，也许我会将文件上传到 Github。我希望做更多的测试，看看我没有留下任何重要的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T17:17:56.637

从 jQuery Mobile 1.4.0 开始，`data-enhanced`大多数组件都添加了 data 属性。将此属性设置为 true 将导致 jQuery mobile 忽略组件的样式增强，因此您必须自己设置元素的样式。

此处的 jQuery Mobile 1.4.0 发行说明中有关此的其他信息 [http://jquerymobile.com/upgrade-guide/1.4/](http://jquerymobile.com/upgrade-guide/1.4/)

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2014-04-21T01:11:11.077

我不是专家，但我很想和你分享一个奇怪的方法。实际上，这是一项非常繁重的任务：您需要通过删除属性值来逐行编辑 jqm css，只需将它们留空即可；您只需查看 CSS 文件的所需部分即可调整或删除值

不要忘记在您的 HTML 页面的头部附加您自己的 CSS 的链接 rel

我希望它对你有用

# xml - XSLT 文件 (XML2CSV)

> ID：15987016
> 
> 赞同：0
> 
> 时间：2013-04-13T10:51:14.377
> 
> 标签：xml, xslt, csv

我需要一些帮助将 XML 文件转换为 CSV。

这是我的 XML 文件的摘录：

```
<?xml version='1.0' encoding='UTF-8'?>
<nvd xmlns:cvss="http://scap.nist.gov/schema/cvss-v2/0.2" xmlns:cpe-lang="http://cpe.mitre.org/language/2.0" xmlns:vuln="http://scap.nist.gov/schema/vulnerability/0.4" xmlns="http://scap.nist.gov/schema/feed/vulnerability/2.0" xmlns:patch="http://scap.nist.gov/schema/patch/0.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:scap-core="http://scap.nist.gov/schema/scap-core/0.1" nvd_xml_version="2.0" pub_date="2013-04-12T12:00:30" xsi:schemaLocation="http://scap.nist.gov/schema/patch/0.1 http://nvd.nist.gov/schema/patch_0.1.xsd http://scap.nist.gov/schema/scap-core/0.1 http://nvd.nist.gov/schema/scap-core_0.1.xsd http://scap.nist.gov/schema/feed/vulnerability/2.0 http://nvd.nist.gov/schema/nvd-cve-feed_2.0.xsd">
  <entry id="CVE-2012-5048">
    <vuln:vulnerable-configuration id="http://nvd.nist.gov/">
      <cpe-lang:logical-test negate="false" operator="OR">
        <cpe-lang:fact-ref name="cpe:/a:optimalog:optima_plc:1.5.2"/>
        <cpe-lang:fact-ref name="cpe:/a:optimalog:optima_plc:1.5.1"/>
      </cpe-lang:logical-test>
    </vuln:vulnerable-configuration>
    <vuln:vulnerable-software-list>
      <vuln:product>cpe:/a:optimalog:optima_plc:1.4.10</vuln:product>
      <vuln:product>cpe:/a:optimalog:optima_plc:1.5.0</vuln:product>
    </vuln:vulnerable-software-list>
    <vuln:cve-id>CVE-2012-5048</vuln:cve-id>
    <vuln:published-datetime>2012-09-28T06:40:22.507-04:00</vuln:published-datetime>
    <vuln:last-modified-datetime>2013-04-10T23:31:27.227-04:00</vuln:last-modified-datetime>
    <vuln:cvss>
      <cvss:base_metrics>
        <cvss:score>7.8</cvss:score>
        <cvss:access-vector>NETWORK</cvss:access-vector>
      </cvss:base_metrics>
    </vuln:cvss>
    <vuln:cwe id="CWE-399"/>
    <vuln:references xml:lang="en" reference_type="UNKNOWN">
      <vuln:source>MISC</vuln:source>
      <vuln:reference href="http://www.us-cert.gov" xml:lang="en">http://www.us-cert.gov</vuln:reference>
    </vuln:references>
    <vuln:references xml:lang="en" reference_type="UNKNOWN">
      <vuln:source>BID</vuln:source>
      <vuln:reference href="http://www.securityfocus.com/bid/55712" xml:lang="en">55712</vuln:reference>
    </vuln:references>
    <vuln:summary>APIFTP Server</vuln:summary>
  </entry>
 </nvd> 
```

您将在下面找到我尝试过的 XSLT 文件，但它无法正常工作，因为它不会（例如）将 cvss:score 和 cvss:access-vector 写入不同的列。谁能帮我将 XML 文件的所有条目写入不同的列？

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" encoding="iso-8859-1"/>

<xsl:strip-space elements="*" />

<xsl:template match="/*/child::*">
<xsl:for-each select="child::*">
    <xsl:if test="position() != last()"><xsl:value-of select="normalize-space(.)"/>,</xsl:if>
    <xsl:if test="position()  = last()"><xsl:value-of select="normalize-space(.)"/><xsl:text>&#xD;</xsl:text>
    </xsl:if>
</xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:48:25.607

你正在做的是：

```
<xsl:template match="/*/child::*"> 
```

选择任何二级节点，什么是 nvd/entry。在你的例子中。比跑到这个的任何孩子：

```
<xsl:for-each select="child::*"> 
```

在您的示例中，这都是第三级节点。并选择任何较低级别节点中的任何文本。

```
"select="normalize-space(.)" 
```

正如@ Martin Honnen 已经提到的那样，您不清楚您要做什么。但是一些注释要仅从当前节点中选择文本，请使用：

```
"select="text()"; 
```

此外，我认为根据 xml 文件中元素的位置生成 CVS 文件的字段不是一个好主意。xml 中的 order off 元素可以更改并且仍然正确，但这会破坏您的 CVS。

更新：根据更详细的要求可能的解决方案：

```
<xsl:template match="*[name()='entry']">

    <xsl:value-of select="@id"/>
    <xsl:text>;</xsl:text>
    <xsl:value-of select="*/vuln:product[1]"/>
    <xsl:text>;</xsl:text>
    <xsl:value-of select="vuln:cvss/cvss:base_metrics/cvss:score"/>
    <xsl:text>;</xsl:text>
    <xsl:value-of select="vuln:references[vuln:source='MISC']/vuln:reference"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="vuln:references[vuln:source='BID']/vuln:reference"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="vuln:published-datetime" />
    <xsl:text>&#xD;</xsl:text>
</xsl:template> 
```

样式表声明应该类似于：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:cvss="http://scap.nist.gov/schema/cvss-v2/0.2"
 xmlns:vuln="http://scap.nist.gov/schema/vulnerability/0.4"> 
```

# visual-studio-2012 - Parallels 中的 Visual Studio 2012 慢 UI

> ID：15987017
> 
> 赞同：4
> 
> 时间：2013-04-13T10:51:35.550
> 
> 标签：visual-studio-2012, parallels

**我在具有 16 Gig RAM 的 MAC Pro 2.4Gz Quad 上运行 Windows 8 作为 Parallels 8 中的虚拟机**

我刚刚升级到 VS 2012，除了加载资源文件或项目设置文件外，我发现一切正常。

UI 将每一行渲染到屏幕上的速度非常慢；一个 1000 行的资源文件大约需要 20 秒才能显示出来！

最糟糕的是，当你翻到源代码然后再回到**打开**的资源文件时，它必须重新渲染每一行！！

我在资源文件和源代码之间来回切换，开发任何东西都非常缓慢且不可能！

我试过关闭 VS 视觉效果/硬件加速等无济于事。

其他人有这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:09:30.790

我设法通过将 VM 切换为使用 directX 9 而不是版本 10 来加速渲染。

如果您遇到同样的问题，请在您的虚拟机**配置**中选择**视频**并更改：

3D 加速：**版本 9**

# c# - c#属性高于main

> ID：15987026
> 
> 赞同：9
> 
> 时间：2013-04-13T10:53:46.343
> 
> 标签：c#, attributes, console.writeline

有人问我如何打印

```
line no 1
line no 2
line no 3 
```

在不更改读取的主要方法的情况下

```
static void Main(string[] args)
{
    Console.WriteLine("line no 2");
} 
```

现在一种方法是为控制台应用程序设置多个入口点。但是我尝试了另一种方法，如下所示：

```
class Program
{
    [Some]
    static void Main(string[] args)
    {
        Console.WriteLine("line no 2");
    }
}
class SomeAttribute : Attribute
{
    public SomeAttribute()
    {
        Console.WriteLine("line no 1");
    }
    ~SomeAttribute()
    {
        Console.WriteLine("line no 3");
    }
} 
```

*当我在每个WriteLine*上应用断点时，我可以看到该方法有效，但是，控制台上没有反映出来。

只是好奇。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-13T11:08:23.470

您的问题可以分解为钩子的搜索，这些钩子`Main`在控制台应用程序的方法执行之前和之后触发。

*   第一个钩子是一个`Program`静态构造函数，它[保证](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)在类中的方法*之前* 执行。`Main``Program`

*   其次是 a 的 ProcessExit 事件 ，[它](http://msdn.microsoft.com/en-us/library/system.appdomain.processexit.aspx)`AppDomain`“*在默认应用程序域的父进程退出时发生”*。您可以使用静态构造函数来订阅此事件。

* * *

```
class Program
{
    static Program()
    {
        Console.WriteLine("line no 1");

        AppDomain.CurrentDomain.ProcessExit += 
                                          (s, a) => Console.WriteLine("line no 3");
    }

    static void Main(string[] args)
    {
        Console.WriteLine("line no 2");
    }
} 
```

印刷：

```
line no 1
line no 2
line no 3 
```

* * *

下一部分会很长。我将尝试解释`SomeAttribute`您的问题有什么问题。

首先，考虑这个 StackOverflow 问题，以准确了解[自定义属性构造函数何时执行](https://stackoverflow.com/questions/1168535/when-is-a-custom-attributes-constructor-run)。这并不像乍一看那么简单。

正如我们已经知道的，自定义属性的 ctor 只有在您通过反射访问它时才会被执行。因此，在您的示例中，简单的程序执行不会触发属性构造函数。`SomeAttribute`但是，当您应用于方法时，为什么您的断点会命中`Main`？事实证明，Visual Studio 使用反射来找出主要方法并将调试器附加到您的应用程序。但此时没有控制台窗口。所以声明`Console.WriteLine`是无用的，产生效果。此外，它似乎阻止了控制台输出的所有下一条语句。

所以接下来的代码会产生不同的结果，这取决于你是否使用 VS 调试器运行它：

```
class Program
{
    [MyAttribute]
    static void Main()
    {

    }
}

class MyAttribute : Attribute
{
    public MyAttribute()
    {
        MessageBox.Show("MyAttribute ctor");
    } 
} 
```

如果您在没有调试器的情况下运行它（在 VS 默认配置中为**Ctrl** + **F5**），您会看到，该程序终止并且没有出现任何窗口。当您使用调试器（**F5**）执行它时，您会看到

![在此处输入图像描述](https://i.stack.imgur.com/nl0fh.png)

VS 旁边没有控制台窗口，只有 win 表单图标： ![在此处输入图像描述](https://i.stack.imgur.com/c2mSa.png)

正如我之前所描述的，当您在没有人的情况下尝试写入控制台时，所有其他调用`Console.WriteLine`都不会影响您的控制台应用程序。这就是为什么您可以看到任何控制台消息，即使您在构造函数中执行断点也是如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T11:17:57.857

我认为[Ilya Ivanov 的答案](https://stackoverflow.com/a/15987116/836432)可能是最好的答案。但是，我的答案也很有趣：

```
public class Program
{
    static Program()
    {
        Console.WriteLine("line no 1");
        Console.WriteLine("line no 2");
        Console.WriteLine("line no 3");
        Environment.Exit(0);
    }

    static void Main(string[] args)
    {
        Console.WriteLine("line no 2");
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-13T11:06:36.620

让我们使用 AOP，并利用 PostSharp。您需要先[下载并安装它](http://www.postsharp.net/download)，然后您需要使用 NuGet 添加对它的引用。您必须安装它，因为它是编译器的挂钩。看，当你编译你的代码时，PostSharp 实际上会根据你使用的钩子将 IL 注入到输出中。

完成这两件事后，为 AOP 属性添加一个新类：

```
using PostSharp.Aspects;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    [Serializable]
    public class ConsoleAspect : OnMethodBoundaryAspect
    {
        public override void OnEntry(MethodExecutionArgs args)
        {
            base.OnEntry(args);

            Console.WriteLine("line no 1");
        }

        public override void OnExit(MethodExecutionArgs args)
        {
            base.OnExit(args);

            Console.WriteLine("line no 3");
        }
    }
} 
```

然后`Main`像这样修改你的方法：

```
[ConsoleAspect]
static void Main(string[] args)
{
    Console.WriteLine("line no 2");
} 
```

# google-app-engine - gsutil 证书失败

> ID：15987030
> 
> 赞同：0
> 
> 时间：2013-04-13T10:54:02.370
> 
> 标签：google-app-engine, gsutil

我最近更新到最新的 GAE SDK。Gsutil 开始无法正常工作，因此我删除了 cacerts.txt，正如此处另一篇文章中所建议的那样，但它不起作用。

`Failure: CA certificates file does not have expected SHA1 sum; expected:ed0... actual: da39a3ee5e6...`

# android - android中行为不端的自定义复选框

> ID：15987038
> 
> 赞同：0
> 
> 时间：2013-04-13T10:55:27.753
> 
> 标签：android, android-layout

我想在我的 android 应用程序中自定义复选框。为此，我创建了 2 个图像 check_on 和 check_off。但是我的复选框将在空格前移到左角而不是文本中心。为什么它会这样？下面是我的代码。

谢谢

```
<RelativeLayout
            android:onClick="vmPlayer"
            style="@style/contentRow"
            android:layout_width="fill_parent"
            android:layout_height="54dp"
            android:clickable="true"
            android:gravity="center_vertical" >
            <CheckBox
                android:id="@+id/voicemailCheckbox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">               
            </CheckBox>

            <TextView
                android:id="@+id/voicemailname"
                style="@style/TextViewStyle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignWithParentIfMissing="true"
                android:layout_toRightOf="@+id/voicemailCheckbox"
                android:singleLine="true"
                android:text="james-panterranetworks-com"/>

            <TextView
                style="@style/TextViewStyle.medium"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/voicemailname"
                android:layout_below="@+id/voicemailname"
                android:layout_toLeftOf="@+id/length"
                android:singleLine="true"
                android:text="Dec 19, 2012 / 14:25:07" />

            <TextView
                android:id="@+id/length"
                style="@style/TextViewStyle.medium"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/voicemailname"
                android:layout_below="@+id/voicemailname"
                android:text="00:32"
                android:paddingRight="10dp"/>
        </RelativeLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/fpg1G.png)

复选框可绘制

```
<style name="myCustomCheckbox" parent="android:style/Widget.CompoundButton.CheckBox">
        <item name="android:button">@drawable/custom_checkbox</item>
    </style> 
```

# c# - 类中的类实例不起作用

> ID：15987041
> 
> 赞同：0
> 
> 时间：2013-04-13T10:55:51.820
> 
> 标签：c#, class

我得到了这个类，我需要在其中发送 POST 请求`System.Net.Webclient`。只要我使用以下语法，它就可以正常工作：

```
using (WebClient wb = new WebClient())
{

} 
```

但是当我尝试在类中定义 Webclient 的实例时，它无法像这样被识别。

```
namespace ConsoleApplication
{
    class connection
    {
        WebClient client = new WebClient();
        client.??
    }
} 
```

为什么我不能这样做？这似乎很奇怪。此方法在静态无效主要原因中运行良好。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:00:01.783

```
namespace ConsoleApplication
{
    class connection
    {
        WebClient client = new WebClient();
        private void SomeMethod(){ Client.[Apply it here]}
    }
} 
```

你需要一些功能或一些地方来访问它。直接做你在课堂上尝试的事情是无效的

# php - 如何在android中解析json数据

> ID：15987045
> 
> 赞同：0
> 
> 时间：2013-04-13T10:56:46.323
> 
> 标签：php, android, json

如何在android中读取php文件发送的Json数据

这是php代码

```
$data = array("name" => "Hagrid", "age" => "36");                                                                    
$data_string = json_encode($data);  
echo $data_string; 
```

这是读取数据android json的代码

```
InputStream instream = entity.getContent();

// String result = "";
Log.i("--------etat---------r","-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-");

String result = this.convertStreamToString(instream);
Log.i("--------etat---------r","-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-"); 
```

这里是分析InputStream对象的方法

```
public  String convertStreamToString(InputStream is) {

        convertStreamToString " );

        BufferedReader reader = new BufferedReader(new InputStreamReader(is));

        StringBuilder sb = new StringBuilder();

        String line = null;
        try {

            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");

            }
        } catch (IOException e) {
            e.printStackTrace();

        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();

            }
        }

        return sb.toString();

    } 
```

但这是显示的代码

11-15 10:46:58.744：I/Read from server(526): 11-15 10:46:58.744: I/Read from server(526): (!) SCREAM：11-15 忽略错误抑制 10： 46:58.744：I/Read 从服务器（526）：（！）注意：未定义的索引：C:\wamp\www\younes_project\younesservices.php 中的 json 在第*4*行 11-15 10:46:58.744：I/Read从服务器（526）：调用堆栈 11-15 10：46：58.744：从服务器（526）I/读取：#TimeMemoryFunctionLocation 11-15 10：46：58.744：从服务器（526）I/读取：10.0006142200{main} ( )..\younesservices.php **:** 0 11-15 10:46:58.744: I/Read from server(526): 11-15 10:46:58.744: I/Read from server(526): **{"name" :"海格","年龄":"36"}**

但我只读变量

这：**{“姓名”：“海格”，“年龄”：“36”}**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:14:33.240

使用此代码。

公共字符串getResult（字符串网址）{

```
 Log.v(TAG, "Final Requsting URL is : :"+url);

    String line = "";
    String responseData = null;

    try {
        StringBuilder sb = new StringBuilder();
        String x = "";
        URL httpurl = new URL(url);
        URLConnection  tc= httpurl.openConnection();

        /*URLConnection tc = twitter.openConnection();
        HttpURLConnection httpConnection = (HttpURLConnection) tc;
        httpConnection.setRequestMethod("POST");*/
        //tc.setRe
        //tc.setDoOutput(false);

        BufferedReader in = new BufferedReader(new InputStreamReader(tc.getInputStream()));

        while ((line = in.readLine()) != null) {
            sb.append(line + "\n");
            x = sb.toString();
        }
        responseData = new String(x);
    }

   catch (FileNotFoundException e) {
       Log.v("NewWebHelper", "FileNotFoundException :");
        e.printStackTrace();
     }
    catch (IOException e) {
        Log.v("NewWebHelper", "IOException :");
        e.printStackTrace();
    }
  catch (Exception e) {
      Log.v("NewWebHelper", "Exception :");
        e.printStackTrace();
    }
    return responseData;
} 
```

# javascript - WebGL 帧缓冲区为空白

> ID：15987049
> 
> 赞同：1
> 
> 时间：2013-04-13T10:57:08.353
> 
> 标签：javascript, webgl, typescript

我使用以下代码在 WebGL 中创建了一个帧缓冲区：

```
this.buffer = ctx.createFramebuffer();
ctx.bindFramebuffer(ctx.FRAMEBUFFER, this.buffer);

this.depthTexture = this.createTexture(ctx, ctx.DEPTH_COMPONENT, 
    ctx.DEPTH_COMPONENT, ctx.UNSIGNED_SHORT);       
ctx.framebufferTexture2D(ctx.FRAMEBUFFER, ctx.DEPTH_ATTACHMENT, 
    ctx.TEXTURE_2D, this.depthTexture, 0);

this.colourTexture = this.createTexture(ctx, ctx.RGBA, ctx.RGBA, ctx.FLOAT);        
ctx.framebufferTexture2D(ctx.FRAMEBUFFER, ctx.COLOR_ATTACHMENT0, 
    ctx.TEXTURE_2D, this.colourTexture, 0); 
```

使用

```
this.ctx.useProgram(this.forwardShader.program);
this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER, this.framebuffer.buffer);
this.ctx.viewport(0, 0, this.framebuffer.size, this.framebuffer.size);
this.ctx.clear(this.ctx.COLOR_BUFFER_BIT | this.ctx.DEPTH_BUFFER_BIT);

mat4.identity(this.viewMatrix);
mat4.identity(this.modelMatrix);

this.camera.transform(this.viewMatrix);

mat4.translate(this.modelMatrix, this.modelMatrix, [0, 0, -2]);

this.mStack.pushMatrix(this.modelMatrix);

mat4.translate(this.modelMatrix, this.modelMatrix, [0, -1, 0]);
mat4.rotateX(this.modelMatrix, this.modelMatrix, -Math.PI / 2.0);

this.setShaderUniforms();
this.plane.draw(this.forwardShader);

this.mStack.popMatrix(this.modelMatrix);

this.setShaderUniforms();
this.cube.draw(this.forwardShader);

this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER, null); 
```

然后使用渲染结果

```
this.ctx.useProgram(this.renderTextureShader.program);
this.ctx.viewport(0, 0, this.viewportWidth, this.viewportHeight);    
this.ctx.clear(this.ctx.COLOR_BUFFER_BIT | this.ctx.DEPTH_BUFFER_BIT);

this.renderTexture.draw(this.framebuffer.colourTexture, this.renderTextureShader); 
```

效果很好，但是当我将其更改为渲染深度纹理时，我得到一个白屏。我已经检查了相关的扩展是否已启用并将它们存储在一个数组中（显然，如果它们被 gc'ed 它可能会导致错误。任何关于我做错了什么的反馈都会很棒

完整代码可以在我的[bitbucket上找到](https://bitbucket.org/timmutton/webgl-typescript)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:37:49.147

您的深度数据范围可能有问题，请尝试：

`this.depthTexture = this.createTexture(ctx, ctx.DEPTH_COMPONENT, ctx.DEPTH_COMPONENT, ctx.FLOAT);`

# c++ - 使用 PostMessage 与 SendNotifyMessage 广播到拥有的窗口

> ID：15987051
> 
> 赞同：3
> 
> 时间：2013-04-13T10:57:14.747
> 
> 标签：c++, windows, winapi, window-messages

最近我发现了两个 Win32 API 调用“PostMessage”和“SendNotifyMessage”之间的奇怪区别（至少在 Win7 64 位 SP1 上注意到）：另一个进程的拥有的顶级窗口似乎没有接收广播的消息（HWND_BROADCAST）与“ PostMessage”，而它在其 WndProc 中接收使用“SendNotifyMessage”广播的消息。

已在调用“RegisterWindowMessage”的帮助下注册了发送的消息。

即使使用 Spy++，使用“PostMessage”时我也看不到消息到达。另外，我想提一下，如果我使用“PostMessage”将消息直接发送到特定的 HWND，它会按预期到达。所以看起来“PostMessage”的windows内部实现只是在迭代执行广播时跳过了我的窗口。

阅读各自的 MSDN 文档，我看不到任何关于这种差异的声明，我想知道这是否是 PostMessage 或 SendNotifyMessage 中的错误，以及我是否可以依靠 SendNotifyMessage 继续在未来版本的 Windows 中显示此行为。

那么有人有一个合理的解释，为什么这两个函数在这种情况下对广播的处理方式不同？

另外，我想问一下是否有任何方法仍然可以使用 PostMessage 广播到拥有的顶级窗口，因为我更愿意发布消息，因为我不想跳过消息队列（这就是 SendNotifyMessage做）。

如果您好奇我为什么要访问顶级拥有的窗口：在 WPF 中，通过使它们拥有具有隐藏所有者窗口的顶级窗口，窗口从任务栏（Window.ShowInTaskbar 属性）中隐藏。

非常感谢您对此主题的任何想法或评论。

附件：这里是一个显示行为的示例......只需构建它，然后启动它两次......第二个过程应该在第一个过程中显示一条消息。这里也是完整解决方案的链接，包括构建 EXE：[链接到完整的 VS 解决方案](https://drive.google.com/folderview?id=0B1Kx9b8Nx-AUV0JhQnJ2SXduV3c&usp=sharing "链接到 VS 解决方案")

```
#include <windows.h>
#include <stdio.h>

#include <string>
#include <vector>

HWND hwndMain = NULL;
HWND ownerHwnd = NULL;

std::vector<std::string> theOutput;
UINT MyRegisteredMessage1 = 0;

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
  PAINTSTRUCT ps;
  HDC hdc = NULL;

  if (message == MyRegisteredMessage1 && wParam != (WPARAM) hwndMain)
  {
    if (lParam == (LPARAM) 1)
      theOutput.push_back("Got a 'MyRegisteredMessage1' via PostMessage");
    if (lParam == (LPARAM) 2)
      theOutput.push_back("Got a 'MyRegisteredMessage1' via SendNotifyMessage");

    InvalidateRect(hwndMain, NULL, TRUE);
  }

  switch (message) 
  {
  case WM_PAINT:
    hdc = BeginPaint(hWnd, &ps);
    for(size_t i = 0, pos = 0; i < theOutput.size(); ++i, pos += 20)
      TextOutA(hdc, 0, pos, theOutput[i].c_str(), theOutput[i].size());
    EndPaint (hWnd, &ps);
    break;

  case WM_DESTROY:
    PostQuitMessage(0);
    break;

  default:
    return DefWindowProc(hWnd, message, wParam, lParam);
  }

  return 0;
}

LRESULT CALLBACK WndProcHidden(HWND hWnd, UINT message,
  WPARAM wParam, LPARAM lParam)
{
    return DefWindowProc(hWnd, message, wParam, lParam);
}

int CALLBACK WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
  LPSTR lpszCmdLine, int nCmdShow) 
{
  MSG msg;
  BOOL bRet; 
  WNDCLASSA wc; 
  UNREFERENCED_PARAMETER(lpszCmdLine); 

  if (!hPrevInstance) 
  { 
    wc.style = 0; 
    wc.lpfnWndProc = (WNDPROC) WndProcHidden; 
    wc.cbClsExtra = 0; 
    wc.cbWndExtra = 0; 
    wc.hInstance = hInstance; 
    wc.hIcon = LoadIcon((HINSTANCE) NULL, IDI_APPLICATION); 
    wc.hCursor = LoadCursor((HINSTANCE) NULL, IDC_ARROW); 
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);;
    wc.lpszMenuName =  "MainMenu"; 
    wc.lpszClassName = "MyOwnerWindowClass"; 

    if (!RegisterClassA(&wc)) 
      return FALSE;

    wc.lpfnWndProc = (WNDPROC) WndProc; 
    wc.lpszClassName = "MyOwnedWindowClass"; 

    if (!RegisterClassA(&wc)) 
      return FALSE; 
  } 

  ownerHwnd = CreateWindowA("MyOwnerWindowClass", "OwnerWindow", 
    WS_OVERLAPPEDWINDOW, 0, 0, 800, 400, (HWND) NULL, 
    (HMENU) NULL, hInstance, (LPVOID) NULL); 

  hwndMain = CreateWindowA("MyOwnedWindowClass", "OwnedWindow", 
    WS_OVERLAPPEDWINDOW, 0, 0, 800, 400, ownerHwnd, 
    (HMENU) NULL, hInstance, (LPVOID) NULL); 

  // only show the "real" window
  ShowWindow(hwndMain, nCmdShow); 
  UpdateWindow(hwndMain); 

  MyRegisteredMessage1 = RegisterWindowMessageA("MyRegisteredMessage1");

  char infoText[256];
  _snprintf_s(infoText, 256,
    "HWND = %X, registered message code for 'MyRegisteredMessage1' = %d",
    hwndMain, MyRegisteredMessage1);
  theOutput.push_back(infoText);
  InvalidateRect(hwndMain, NULL, TRUE);

  PostMessage(HWND_BROADCAST, MyRegisteredMessage1, (WPARAM) hwndMain, (LPARAM) 1);
  Sleep(1000);
  SendNotifyMessageA(HWND_BROADCAST, MyRegisteredMessage1, (WPARAM) hwndMain, (LPARAM) 2);

  while( (bRet = ::GetMessage( &msg, NULL, 0, 0 )) != 0)
  {
      TranslateMessage(&msg); 
      DispatchMessage(&msg); 
  } 

  return msg.wParam; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:11:47.047

您可能需要使用以下方式注册您的消息- 请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)`RegisterWindowMessage()`的备注部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T17:09:58.823

只需在此处添加此信息以获取信息..

通过在应用程序级别注册 IMessageFilter 对象，我能够在 c# 中解决此问题。此对象上的 PreFilterMessage 将接收消息，我可以从那里处理它。

```
public class FooMessageFilter : IMessageFilter
{
    uint UM_FOO = 0;
    public event EventHandler OnFoo;

    public FooMessageFilter()
    {
        UM_FOO = Win32.RegisterWindowMessage("UM_FOO");
    }

    public bool PreFilterMessage(ref Message m)
    {
        if(m.Msg == UM_FOO)
        {
            if(OnFoo != null)
                OnFoo(this, new EventArgs());

            return true;
        }

        return false;
    }
} 
```

然后，我将此消息过滤器添加到我拥有的顶级表单的构造函数中的应用程序上下文中。

```
public partial class Form1 : Form
{
    private FooMessageFilter fooFilter = new FooMessageFilter();
    public Form1()
    {
        InitializeComponent();

        // Register message filter
        Application.AddMessageFilter(fooFilter);

        // Subscribe to event
        fooFilter.OnFoo += HandleFoo;
    }

    private void HandleFoo(object o, EventArgs e)
    {
        MessageBox.Show("Foo!");
    }
} 
```

从那里开始，只需将我的顶级窗口中的事件连接到消息过滤器即可。这是必要的，因为需要遵守当前架构，并且消息来自第三方进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T05:30:15.510

PostMessage() 的文档页面提到适用完整性级别限制：

> 从 Windows Vista 开始，消息发布受 UIPI 约束。进程的线程只能将消息发布到完整性级别较低或相等的进程中的线程的消息队列中。

没有提到对 SendNotifyMessage() 的此类限制。由于您不检查其中任何一个的返回值，因此您可能会遇到这种情况，并且您不会知道。

# objective-c - 再次：通过发布数据请求 JSON 的简单方法

> ID：15987052
> 
> 赞同：2
> 
> 时间：2013-04-13T10:57:17.510
> 
> 标签：objective-c, json, nsurlconnection, nsurlrequest

我对 Xcode 和 Objective-C 真的很陌生……我收到一个 JSON 数组来显示我的 TableView 中的内容：

在我的`-viewDidLoad`：

```
[super viewDidLoad];
self.navigationItem.title = @"Kategorien";
NSURL *url = [NSURL URLWithString:@"http://www.visualstudio-teschl.at/apptest/kats.php"];
NSData *jsonData = [NSData dataWithContentsOfURL:url];   
if(jsonData != nil)
{
    NSError *error = nil;
    _kategorien = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
} 
```

在我的`cellForRowAtIndexPath:`方法中：

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier];
}
NSDictionary *data = [self.kategorien objectAtIndex:indexPath.row];
cell.textLabel.text = [data objectForKey:@"KAT_NAME"];

return cell; 
```

它工作得很好，并在我的表中显示了我的字符串（键 -> KAT_NAME）。

但是：我怎样才能在我的请求中发送一个字符串？例如，我想在请求中发送“searchnumber = 2”，例如使用 javascript/jquery 的 ajax 请求？

我进行了搜索，但只能找到难以满足我的需要的示例（并且可能是过大的？）...是否没有像我的请求这样简单的方法和像“sendWithData”这样的广告，或者这种方法与我的简单请求完全不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:36:37.133

如果你想发布数据，你需要创建一个 NSMutableURLRequest 对象。无论如何，您都不应该使用 [NSData dataWithContentsOfURL:]，因为这会创建一个同步请求并阻止 UI。尽管它的代码多一点，但这是正确的方法：

```
NSURL *url = [NSURL URLWithString:@"http://www.visualstudio-teschl.at/apptest/kats.php"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: url];
request.HTTPMethod = @"POST";
request.HTTPBody = [@"searchnumber=2" dataUsingEncoding: NSASCIIStringEncoding];
[NSURLConnection sendAsynchronousRequest: request
                                   queue: [NSOperationQueue mainQueue]
                       completionHandler:
  ^(NSURLResponse *r, NSData *data, NSError *error) {
    // do something with data
}]; 
```

# opencv - 相机位姿估计

> ID：15987053
> 
> 赞同：1
> 
> 时间：2013-04-13T10:57:30.603
> 
> 标签：opencv, computer-vision, pose-estimation

我目前正在开展一个项目，该项目以多视图立体方法处理基于一组图像的重建。因此，我需要知道空间中的几个图像。我使用 surf 找到匹配的特征，并从对应关系中找到基本矩阵。

现在问题来了：可以用 SVD 分解基本矩阵，但这会导致 4 种不同的结果，正如我在一本书中读到的那样。假设这是可能的，我怎样才能获得正确的？

我可以为此使用哪些其他算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:15:36.563

[维基百科](http://en.wikipedia.org/wiki/Essential_matrix)说：

> 然而，事实证明，在实践中只能实现四类解决方案中的一类。给定一对对应的图像坐标，其中三个解决方案将始终生成一个 3D 点，该点位于两个摄像头中的至少一个后面，因此无法看到。四个类中只有一个会始终生成位于两个摄像机前面的 3D 点。那么这必须是正确的解决方案。

如果您在第一帧中有相机的外部校准参数，或者假设它处于默认校准状态，例如平移 (0,0,0) 和旋转 (0,0,0)，那么您可以确定哪个分解是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:56:45.573

感谢赞福德的回答，我能够解决我的问题。这是我所做的：

首先，我从两张图像中的一组点对应关系中计算了基本矩阵 (E)。

使用 SVD，将其分解为 2 个解决方案。使用否定的基本矩阵 -E（它也满足相同的约束），我得到了另外 2 个解决方案，总共有 4 个可能的相机位置和方向。

然后，对于所有解决方案，我对点对应关系进行三角剖分，并通过取点坐标和每个摄像机观察方向的点积来确定在两个摄像机前面相交的点。我都是正面的，然后那个路口就在两个摄像机的前面。

最后，在摄像机前提供最多交叉点的解决方案是被选中的解决方案。

# android - libgdx 中的 scene2D - 动画不起作用

> ID：15987059
> 
> 赞同：3
> 
> 时间：2013-04-13T10:58:56.830
> 
> 标签：android, libgdx

我想要一个像淡入淡出这样的动画启动画面，我正在调整大小方法中，如下所示

```
public class SplashScreen extends GamePlayScreen {

@Override
public void resize(int width, int height) {
    super.resize(width, height);
    stage.clear();
    Drawable splashDrawable = new TextureRegionDrawable(region);
    splashImage = new Image(splashDrawable, Scaling.stretch);
    splashImage.setFillParent(true);
    splashImage.getColor().a = 0f;
    splashImage.addAction(Actions.sequence(Actions.fadeIn(0.75f),
            Actions.delay(1.75f), Actions.fadeOut(0.75f), 
            new Action() {
                @Override
                public boolean act(float delta) {
                    // the last action will move to the next screen
                    System.out.println("moving to next screen");
                    splashGameObj.setScreen(new GamePlayScreen(
                            splashGameObj));
                    return true;
                }
            }));
    stage.addActor(splashImage);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:33:16.180

尝试将您的更改`new Action()`为`new RunnableAction(){ public void run(){....`.

这里有更多的动作，还有一些其他的解释它们是如何工作的。转至另一个问题。
[->Actions](https://stackoverflow.com/questions/9131554/actions-of-actors-in-libgdx)
也看看：
[screen2D, libgdx wiki about actions](https://code.google.com/p/libgdx/wiki/scene2d)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T12:33:47.450

声明这个变量

```
private Stage stage;    

@Override
public void render(float delta) {
    // TODO Auto-generated method stub
    update();
    draw(delta);
}

private void draw(float delta) {
    // TODO Auto-generated method stub
    Gdx.gl.glClearColor(1, 1, 1, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    stage.act(delta);
    stage.draw()
}

@Override
public void resize(int width, int height) {
    stage.setViewport( width, height, true );

}

@Override
public void show() {
    // TODO Auto-generated method stub
    stage = new Stage();
    Gdx.input.setInputProcessor(stage);

    Image splashImage = new Image(region);
    splashImage.addAction( Actions.sequence( Actions.fadeOut( 0.0001f ), Actions.fadeIn( 5f ),
            Actions.run(onSplashFinishedRunnable) ) );

    stage.addActor(splashImage);
}

Runnable onSplashFinishedRunnable = new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub
        splashGameObj.setScreen(new GamePlayScreen(splashGameObj));
    }
}; 
```

# grails - 使用 UrlMappings 重定向

> ID：15987063
> 
> 赞同：1
> 
> 时间：2013-04-13T10:59:58.617
> 
> 标签：grails

如何根据访问我的应用程序的国家/地区重定向到某些控制器？例如，如果我的应用程序在中国被访问，某个控制器将被重定向。出于某些潜在原因，我想尽可能在​​ UrlMappings.groovy 上执行此操作。一个简单的代码剪断将有很大帮助。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:32:31.247

它可以通过过滤器或拦截器轻松完成。参考[这篇](https://stackoverflow.com/questions/15977417/grails-redirecting-actions)文章，这是我在这里看到的满足需求的最佳示例。一般来说，UrlMapping 是用于 RESTful 服务的。在您的情况下，如果您需要 2 个不同的控制器用于不同的区域设置，您最终会得到 2 个可能不合适的 URI。

# assembly - 使用 PIC18F452（组件）在双 7 段 LED 显示屏上显示 2 位数字

> ID：15987065
> 
> 赞同：-1
> 
> 时间：2013-04-13T11:00:10.783
> 
> 标签：assembly, pic, pic18

[PIC18Fxx2](https://www.google.com.my/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://ww1.microchip.com/downloads/en/devicedoc/39564c.pdf&ei=WFNpUc7YMInrrAfxnoH4CQ&usg=AFQjCNH6W_Cc9Nu-r0_kBa7fi595GagNuQ&sig2=QNY3RGnXP-_6FmUhSPwoKg&bvm=bv.45175338,d.bmk)数据表

[可以在此处](http://imageshack.us/photo/my-images/59/schematics.png/)获得与我正在使用的 7segs 相关的数据表

编辑（15/4/2013）：下面的代码是 PORTD 的指令字

```
ldig    SET b'00001000' ;for rght digit
rdig    SET b'00000100' ;for left digit 
```

首次执行代码时 TRISB、TRISD、PORTB 和 PORTD 的指令字

```
CLRF    TRISB   ;port B as output
CLRF    TRISD   ;port D as output
CLRF    PORTD   ;clear port D not to select any digit
SETF    PORTB   ;set port B to off all segments 
```

我想使用组装在 2 个七段 LED 显示器上显示两个不同的数字。我正在尝试使用下面列出的代码，但它不起作用。注：rdig = 右面板，ldig = 左面板，disp1 代表 1，依此类推。

```
loop    MOVFF   disp1, PORTB
        MOVLW   rdig    ;select only the left display
        MOVWF   PORTD   ;unit to be on

        MOVFF   disp8, PORTB
        MOVLW   ldig    ;select only the left display
        MOVWF   PORTD   ;unit to be on

        bra     loop 
```

输出应该是 81（在七段显示器上）没有出现任何数字。每个面板上只出现某种昏暗的灯光。但是，如果我试图在七段显示器的任一侧仅显示一个数字，则该代码有效。

```
loop        MOVFF   disp8, PORTB
            MOVLW   ldig    ;select only the left display
            MOVWF   PORTD   ;unit to be on

            bra     loop 
```

编辑：我尝试使用TMR0N（b'00000000'指令字，tmrL = FF，tmrH = FB）为每个数字显示请求添加一个小延迟（2微秒），如下所示，右侧面板上仅显示数字1。

```
loop    MOVFF   disp1, PORTB
    MOVLW   rdig    ;select only the left display
    MOVWF   PORTD   ;unit to be on
    call    delay

    MOVFF   disp8, PORTB
    MOVLW   ldig    ;select only the left display
    MOVWF   PORTD   ;unit to be on
    call    delay

    bra     loop 
```

TMR0N 的指令设置

```
initwrd SET 0x00
tmrH    SET 0xFF
tmrL    SET 0xFB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:44:02.533

假设 PORTD 的每个数字的启用设置正确且硬件连接相同，那么您的代码是正确的。您唯一的错误是延迟量。从 1 ms 开始并增加，直到显示没有明显闪烁的两位数字。此延迟量取决于您使用的 7 段显示器的数量（同样是为了避免闪烁）。2 微秒根本不够。我一直在使用图片多年，这应该可以。

# spring - 所有网站都重定向到登录页面

> ID：15987067
> 
> 赞同：0
> 
> 时间：2013-04-13T11:00:26.370
> 
> 标签：spring, spring-mvc, spring-security

亲爱的斯宾格勒同胞们，

我在春季偶然发现了拦截网址登录的问题。

如果未登录，我只想将所有页面重定向到我的登录页面。

这是我使用的安全上下文。但是，此代码不允许我访问任何页面：

```
<security:http auto-config="true">
    <security:form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <security:logout logout-success-url="/logout" />
    <security:intercept-url pattern="/login" access="permitAll" />
    <security:intercept-url pattern="/**" access="hasRole(ROLE_USER)" />
</security:http> 
```

谢谢你的帮助。

洛木

* * *

根据[jonnieM 的帖子](https://stackoverflow.com/questions/15157250/intercept-url-pattern-causing-404-error)更改了我的配置：

下雪了

```
<security:http auto-config="true">
    <security:intercept-url pattern="/login" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <security:intercept-url pattern="/**" access="ROLE_USER" />
    <security:form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <security:logout logout-success-url="/logout" />
</security:http> 
```

所以我认为“IS_AUTHENTICATED_ANONYMOUSLY”成功了:)

干杯洛姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:12:56.423

您应该应用该`<http use-expressions="true">`设置，否则`<intercept-url>`'`access`属性中的值将不会被解释为 Spring EL 表达式。

# c++ - 使用 boost::shared_ptr 时出错

> ID：15987070
> 
> 赞同：0
> 
> 时间：2013-04-13T11:00:48.680
> 
> 标签：c++, boost, smart-pointers

我正在学习提升和智能指针。在编译过程中出现错误，我无法弄清楚它是关于什么的。我不明白我做错了什么。问题出在构造函数中：

```
DefaultCreature(const Creature& def) : def_(def) {} 
```

这是我的代码：

```
#include <iostream>
#include <boost/smart_ptr.hpp>

using namespace std;
using namespace boost;

class Creature;
typedef shared_ptr<Creature> PCreature;

class Creature {
public:
    Creature(const string& name) : name_(name) {}
    const string& getName() const { return name_; }
private:
    string name_;
};

class DefaultCreature {
public:
    DefaultCreature(const Creature& def) : def_(def) {}
private:
    PCreature def_;
};

int main() {
    DefaultCreature factory(Creature("lion"));
    return 0;
} 
```

还有一个错误：

```
exercise1.cpp: In constructor ‘DefaultCreature::DefaultCreature(const Creature&)’:
exercise1.cpp:20:52: error: no matching function for call to ‘boost::shared_ptr<Creature>::shared_ptr(const Creature&)’
exercise1.cpp:20:52: note: candidates are:
In file included from /usr/local/include/boost/shared_ptr.hpp:17:0,
                 from /usr/local/include/boost/smart_ptr.hpp:21,
                 from exercise1.cpp:2:
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:472:14: note: template<class Ap> boost::shared_ptr::shared_ptr(Ap, typename boost::detail::sp_enable_if_auto_ptr<Ap, int>::type)
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:472:14: note:   template argument deduction/substitution failed:
/usr/local/include/boost/smart_ptr/shared_ptr.hpp: In substitution of ‘template<class Ap> boost::shared_ptr::shared_ptr(Ap, typename boost::detail::sp_enable_if_auto_ptr<Ap, int>::type) [with Ap = Creature]’:
exercise1.cpp:20:52:   required from here
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:472:14: error: no type named ‘type’ in ‘struct boost::detail::sp_enable_if_auto_ptr<Creature, int>’
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:446:14: note: template<class Y> boost::shared_ptr::shared_ptr(std::auto_ptr<_Tp1>&)
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:446:14: note:   template argument deduction/substitution failed:
exercise1.cpp:20:52: note:   types ‘std::auto_ptr<T>’ and ‘const Creature’ have incompatible cv-qualifiers

(...)

/usr/local/include/boost/smart_ptr/shared_ptr.hpp:339:5: note: boost::shared_ptr<T>::shared_ptr() [with T = Creature]
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:339:5: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:328:25: note: boost::shared_ptr<Creature>::shared_ptr(const boost::shared_ptr<Creature>&)
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:328:25: note:   no known conversion for argument 1 from ‘const Creature’ to ‘const boost::shared_ptr<Creature>&’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:04:50.307

to 的参数`shared_ptr`必须是动态分配对象的地址，但代码传递的是引用。更改为，例如：

```
class DefaultCreature {
public:
    DefaultCreature(const Creature& def) : def_(new Creature(def)) {}
private:
    PCreature def_;
}; 
```

或使用[`boost::make_shared`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/make_shared.html)：

```
class DefaultCreature {
public:
    DefaultCreature(const Creature& def) :
        def_(boost::make_shared<Creature>(def)) {}
private:
    PCreature def_;
}; 
```

如果实例 of`DefaultCreature`是唯一可以访问所指向的对象的对象，`def_`则没有理由将其改为`boost::shared_ptr`: 使用[`boost::scoped_ptr`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/scoped_ptr.htm)。请参阅[有哪些可用的 C++ 智能指针实现？](https://stackoverflow.com/questions/5026197/what-c-smart-pointer-implementations-are-available)有关智能指针的非常有用的概述。

* * *

但是，从发布的代码来看，似乎没有理由使用任何性质的指针。只需将一个`Creature`实例存储在`DefaultCreature`（`Creature`根据发布的代码是可复制的并且没有多态要求）。

# android - 如何在android中将文本设置为交叉而不是水平？

> ID：15987071
> 
> 赞同：0
> 
> 时间：2013-04-13T11:01:30.750
> 
> 标签：android, textview

在布局中有textview。我想以某个角度（交叉）而不是水平显示文本。可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:04:18.090

使用 XML：

```
<TextView 
        ...
        android:rotation="45" /> 
```

使用代码：

```
myTextView.setRotation(45f); 
```

对于 API 10 及以下，必须通过代码完成：

```
RotateAnimation animation = new RotateAnimation(45f, 45f, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
animation.setInterpolator(new LinearInterpolator());
animation.setDuration(1);
animation.setFillAfter(true);
myTextView.startAnimation(animation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:05:05.360

这是一个与之前的帖子非常相似的问题。在此处查看接受的答案： [android text view text in vertical direction](https://stackoverflow.com/questions/8604932/android-text-view-text-in-vertical-direction)

如果不对 textview 类进行一些自定义，我不相信有一种“简单”的方法可以做到这一点。

# mysql - CakePHP：在日期时间之间搜索并验证表单

> ID：15987072
> 
> 赞同：1
> 
> 时间：2013-04-13T11:01:34.937
> 
> 标签：mysql, cakephp, validation, between

我被这个困住了。我自己的技能不足以自己解决这个问题。

我有一个包含这些字段的表单：

*   `PLACE_ID`
*   `START_DATE`( `DATETIME`)
*   `END_DATE`( `DATETIME`)

我试图达到的目标：

*   **如果同一时间范围内同一地点**的数据库中已有预订，则提交失败。

因此，查询看起来像这样：

```
SELECT *
FROM bookings
WHERE place_id=".$_POST['placeId']."
AND('".$_POST['startDate']."'
BETWEEN  start_date 
AND end_date
OR '".$_POST['endDate']."'
BETWEEN start_date
AND end_date)" 
```

如果返回`NULL`，则提交成功。如何让它与 CakePHP 一起工作？请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:08:11.053

警告您有关 SQL 注入的注释是正确的。

用于数据类型搜索是有问题的`BETWEEN`。`DATETIME`我不确定这是你的问题，但它可能是。

考虑一个`DATETIME`值，比如说，`'2013-04-13 11:00:00'` 你会认为这会是`BETWEEN '2013-04-13' AND '2013-04-13'`，但事实并非如此，因为它在 之后`'2013-04-13 00:00:00'`。

这种使用的一个令人不快的问题`BETWEEN`是单日范围不起作用。

日期范围匹配所需的是

```
 date_to_test >= start_date
  AND date_to_test < end_date + INTERVAL 1 DAY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:41:45.907

从逻辑分离的角度来看，我认为这应该在您的控制器中处理。根据 Ollie Jones 的建议构建，在从用户浏览器回发后，您应该执行以下操作：

```
$this->Booking->find('all', array('conditions' => array('Booking.start_date BETWEEN' => array($new_start_date, $new_end_date), 'Booking.end_date BETWEEN' => array($new_start_date, $new_end_date)) 
```

`$new_start_date`应该设置为`$this->data['Booking']['start_date']`，同样适用`$new_end_date`。否则，答案就会开始变得混乱！

如果查询没有返回任何内容，那么您可以继续保存您的新预订。如果有预订，您应该相应地通知您的用户。

# arabic - LiveCode 中的阿拉伯语支持

> ID：15987073
> 
> 赞同：1
> 
> 时间：2013-04-13T11:01:38.210
> 
> 标签：arabic, right-to-left, livecode

我使用 LiveCode 6.0 社区版，当我尝试使用阿拉伯文本在 GUI 中制作标签时，它会显示它，但从左到右而不是从右到左 [RTL]。

是否可以使用 RTL 在 LiveCode 中显示文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:20:50.637

Economy-x-Talk 有一个商业定制软件解决方案。它相当有限，我不知道它是否适合您，但您可以通过[http://economy-x-talk.com](http://economy-x-talk.com)与我们联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T07:14:15.100

LiveCode 7.0.0 developer preview is now available for download: [http://downloads.livecode.com/livecode/](http://downloads.livecode.com/livecode/)

It is the first version to natively support LTR languages and unicode.

To achieve this, several new chunk expressions have been introduced. Most importantly, the `trueWord` chunk expression can process text based the ICU library with its many rules taking into account many language and charset.

Please be careful, it is still a DP

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T10:06:07.020

LiveCode 7.0 将包含对 RTL 语言的支持。这正在开发中，预计在 2014 年 3 月推出测试版。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T22:14:43.230

不幸的是还没有。上次我研究这个时，我认为你可以将文本设置为一些 RTL 文本，但你不能输入它 RTL。可能是错误的，因为一旦发现文本输入仅是 LTR，该项目就被搁置了。

# c# - 使用正弦创建跳跃算法

> ID：15987074
> 
> 赞同：1
> 
> 时间：2013-04-13T11:01:40.073
> 
> 标签：c#, winforms, algorithm, game-physics

我正在用 C# windows 窗体应用程序编写一个 2D 游戏。

我想创建泡泡麻烦游戏，但我对跳跃算法感到不安。我发现我必须使用正弦函数才能使其真实。

有球类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Windows.Forms;

namespace BubbleTrouble
{

    class Ball
    {
        int level,gapX=2,gapY=2,x,y;
        bool up;
        public static int[] levelsPX={0,1,2,3,6,8,9,11};
        Panel panel;
        Graphics gr;

        public Ball(int lvl,int x,int y,bool isUp,Graphics gr)
        {
            this.gr = gr;

            up = isUp;
            this.x = x;
            this.y = y;
            if (up)
                gapY = -gapY;

            level = lvl;
        }

        public Ball[] pop()
        {
            if (level == 0)
                return null;
            else
            {
                bool up1 = true; 
                if(y>=20)
                    up1=false;
                Ball first = new Ball(level - 1, x, y,up1,gr);
                Ball second = new Ball(level - 1, first.x + 10 * levelsPX[level-1], y, up1,gr);
                Ball[] a = { first, second };
                level = 0;
                return a;
            }
        }

        public void paint()
        {
            gr.DrawImage(BubbleTrouble.Properties.Resources.ball, x, y, 10 * levelsPX[level], 10 * levelsPX[level]);
        }
        public void getNextPos()
        {
            if ((y <= 0) || (y + 10 * levelsPX[level] >= 364))
            {
                gapY = -gapY;
                up = !up;
            }
            if ((x + 10 * levelsPX[level] >= 681) || (x <= 0))
                gapX = -gapX;
            if (y < 70)
                gapY = -gapY;
            //Math.sin
            x=x+gapX;
            y=y+gapY;

        }

    }
} 
```

球有 X 和 Y 整数，它也有 2 个整数 gapX 和 gapY。gapX 和 gapY 用于改变球的方向，例如现在球在位置 (30,30) 所以在这种情况下，下一个位置将是 (30+gapX,30+gapY)，之后(30+2gapX,30+2gapY) 并且当球出界时，间隙改变标志。例如，如果 X 刻度上的位置大于窗体边界，则将 gapX 更改为 -gapX，这样球就会向另一个方向移动。

但是，我希望球在波浪中跳跃，我不知道如何使用球的 XY 以及 gapX 和 gapY 来做到这一点。我发现正弦函数会帮助我，但我仍然不知道在哪里以及如何使用这个函数。

请帮助我，我正在尝试解决，但我没有找到任何解决方案。

谢谢你，阿萨夫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:47:06.680

一个小方法作为提示。您必须调整游乐场的高度和宽度：

```
/// <summary>
/// Calculates ball bouncing.
/// </summary>
/// <param name="x">X position (0 .. 360)</param>
/// <returns>Returns y position (0 .. 1)</returns>
private double Position(double x)
{
    x *= Math.PI / 180;
    return Math.Abs(Math.Cos(x)); // Always positive
} 
```

# php - Doctrine ORM - 同一实体，不同所有权的不同表

> ID：15987078
> 
> 赞同：0
> 
> 时间：2013-04-13T11:02:01.437
> 
> 标签：php, orm, doctrine-orm

我有一个实体，在它的一生中移动到不同的表。像这样：

一个村庄有很多单位地图上的军队运动包含很多单位攻击后，日志文件包含很多单位（带有额外的`amount_killed`列）

所以无论如何，这`Unit`就是我认为我的实体，可以通过表和外键附加到村庄、运动或日志。

我认为在 Doctrine 中有一种说法，这是一个实体，它可以作为多个表的外键。问题是，我想从我的村庄中取出单位并将它们放入一个运动中，但它们没有被定义为同一个项目，所以它会损坏。

我当前使用的代码看起来像这样，用于将实体转移到另一个表：

```
$villageUnits = $village->getVillageUnits();
$movementUnits = new ArrayCollection();
foreach ($villageUnits as $villageUnit) {
    $movementUnit = new MovementUnit();
    $movementUnit
        ->setLevel($villageUnit->getLevel());
        ->setAmount($villageUnit->getAmount());
        ->setUnitType($villageUnit->getUnitType());
    $movementUnits->add($movementUnit);
} 
```

目前，它们都是用 Doctrine 定义的独立实体，如下所示：

```
TABLES

village_units
---------
id, village_id, unit_type_id, amount, level

movement_units
---------
id, movement_id, unit_type_id, amount, level

log_units
---------
id, log_id, unit_type_id, amount, amount_killed, level

ENTITIES

/**
 * MovementUnit
 *
 * @ORM\Table(name="movement_units")
 * @ORM\Entity
 */
class MovementUnit
{

/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\GeneratedValue(strategy="IDENTITY")
 * @ORM\Id
 */
private $id;

/**
 * @var integer
 *
 * @ORM\Column(name="amount", type="integer", nullable=false)
 */
private $amount;

/**
 * @var integer
 *
 * @ORM\Column(name="level", type="integer", nullable=false)
 */
private $level;

/**
 * @var Movement
 *
 * @ORM\ManyToOne(targetEntity="Movement")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="movement_id", referencedColumnName="id")
 * })
 */
private $movement;

/**
 * @var UnitType
 *
 * @ORM\OneToOne(targetEntity="UnitType")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="unit_type_id", referencedColumnName="id")
 * })
 */
private $unitType;

}

/**
 * VillageUnit
 *
 * @ORM\Table(name="village_units")
 * @ORM\Entity
 */
class VillageUnit
{

/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\GeneratedValue(strategy="IDENTITY")
 * @ORM\Id
 */
private $id;

/**
 * @var integer
 *
 * @ORM\Column(name="amount", type="integer", nullable=false)
 */
private $amount;

/**
 * @var integer
 *
 * @ORM\Column(name="level", type="integer", nullable=false)
 */
private $level;

/**
 * @var Village
 *
 * @ORM\ManyToOne(targetEntity="Village")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="village_id", referencedColumnName="id")
 * })
 */
private $village;

/**
 * @var UnitType
 *
 * @ORM\OneToOne(targetEntity="UnitType")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="unit_type_id", referencedColumnName="id")
 * })
 */
private $unitType;

}

/**
 * LogUnit
 *
 * @ORM\Table(name="log_units")
 * @ORM\Entity
 */
class LogUnit
{

/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\GeneratedValue(strategy="IDENTITY")
 * @ORM\Id
 */
private $id;

/**
 * @var integer
 *
 * @ORM\Column(name="amount", type="integer", nullable=false)
 */
private $amount;

/**
 * @var integer
 *
 * @ORM\Column(name="dead", type="integer", nullable=false)
 */
private $dead;

/**
 * @var integer
 *
 * @ORM\Column(name="level", type="integer", nullable=false)
 */
private $level;

/**
 * @var LogArmy
 *
 * @ORM\ManyToOne(targetEntity="LogArmy")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="log_army_id", referencedColumnName="id")
 * })
 */
private $logArmy;

/**
 * @var UnitType
 *
 * @ORM\OneToOne(targetEntity="UnitType")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="unit_type_id", referencedColumnName="id")
 * })
 */
private $unitType;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:31:47.363

我遇到了完全相同的问题，并用 Robin 在这个问题中的回答解决了这个问题：[Doctrine 2 Inheritance Mapping with Association](https://stackoverflow.com/questions/5715777/doctrine-2-inheritance-mapping-with-association)

只需将继承类型从“SINGLE_TABLE”更改为“JOINED”，您的设置就可以工作了。如果没有，请尝试使用教义模块 orm:schema-tool:create 它将为您创建表。

# ios - UITableView 编辑时的奇怪行为

> ID：15987079
> 
> 赞同：0
> 
> 时间：2013-04-13T11:02:15.247
> 
> 标签：ios, objective-c, uitableview

我的应用程序中有一个可编辑的`UITableView`（*添加和删除元素*）。它的工作很奇怪。
虽然我只有一两行，但一切都很完美。但如果我添加更多项目，我有一个例外`'*** -[__NSArrayI objectAtIndex:]: index 3 beyond bounds [0 .. 2]'`

我无法设置断点并处理它。也许，有人可以帮助我吗？

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int plusRow = 0;
    if ([[self tableView] isEditing]) plusRow = 1;

    return [typeList count] + plusRow;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if ([indexPath row] > ([typeList count]-1)) {
        NSString * appendCellDescription = @"";

        if ([[self tableView] isEditing]) appendCellDescription = @"Add";

        [[cell textLabel] setText:appendCellDescription];
    } else {
        NSLog(@"Accessing array: %d", [indexPath row]);
        [[cell textLabel] setText:[[typeList getObject:[indexPath row]] description]];
    }

    return cell;
}

#pragma mark - Editing table view

- (UITableViewCellEditingStyle) tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath{

    NSLog(@"Row: %d, count: %d", [indexPath row], [typeList count]);

    if (indexPath.row > [typeList count]-1) {
        return UITableViewCellEditingStyleInsert;
    } else {
        return UITableViewCellEditingStyleDelete;
    }
}

- (IBAction)btnModifyClick:(id)sender{
    if ([[self tableView] isEditing]) {
        [[self tableView] setEditing:FALSE animated:YES];
        [[self tableView] reloadData];
    } else {
        [[self tableView] setEditing:TRUE animated:YES];
        [[self tableView] reloadData];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:29:05.690

我找到了解决问题的方法。我刚刚在情节提要 TableView 的 XCode 属性中将“Sections”更改为 0。现在工作正常。

感谢大家的回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:13:07.413

`numberOfRowsInSection`返回的项目数比`cellForRowAtIndexPath`数据源方法中获取的项目数多，请尝试调试返回值：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int plusRow = 0;
    if ([[self tableView] isEditing]) plusRow = 1;
    NSLog(@"%i",[typeList count] + plusRow);
    return [typeList count] + plusRow;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:10:27.297

通常，此错误描述，当数组索引中的错误（例如您的数组有 3 项）并且您试图从数组中获取/抽象第 4 项时，此时会生成这种类型的错误。

查找错误的最佳方法是使用 BreakPint。并逐行调试您的项目。并找到您的应用程序。压碎 ？？我确信它可以绕过任何阵列。

**编辑：**

我认为数组名称中的错误使用 BreakPoint`typeList`的方法检查它。`cellForRowAtIndexPath`

# codeigniter - 我的 codeigniter 上传图片但不上传 Json

> ID：15987080
> 
> 赞同：0
> 
> 时间：2013-04-13T11:02:21.980
> 
> 标签：codeigniter, file-upload

我可以成功地将图像上传到我的 codeigniter 控制器：

```
class Upload extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->helper(array('form', 'url'));
        $this->load->database();
    }

    function do_upload($folder)
    {
        $config['upload_path'] = './userdata/'. $folder . '/';
        $config['allowed_types'] = 'gif|jpg|png|txt';
        $config['max_size'] = '1000';
        $config['max_width']  = '5024';
        $config['max_height']  = '5768';

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors()); 
            echo $this->upload->display_errors();
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());
        }
    }
} 
```

图片是从我的 JS 上传的，如下所示：

```
var formData = new FormData();
formData.append('userfile', this.image);
$.ajax({
    url: 'upload/do_upload/atlas',
    data: formData,
    processData: false,
    contentType: false,
    type: 'POST',
    success: function(data){

    }
}); 
```

`this.image`图片文件在哪里。现在这工作正常，所以我知道我的控制器和代码工作正常。

但是当我尝试使用 JSON 字符串进行相同操作时，文件不会上传：

```
this.json = JSON.stringify(parsedJSON, null, 4);

var formData = new FormData();
formData.append('userfile', this.json);
$.ajax({
    url: 'upload/do_upload/json',
    data: formData,
    processData: false,
    contentType: false,
    type: 'POST',
    success: function(data){

    }
}); 
```

有谁知道为什么这适用于图像而不是 Json 字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:06:16.217

您可以使用标准流程将 json 数据发送到服务器

```
var json = JSON.stringify(parsedJSON, null, 4);

$.ajax({
    url: 'upload/do_upload/json',
    data: json,
    type: 'POST',
    success: function(data){

    }
}); 
```

# c++ - 从自定义对象的向量中消除重复项 - std:unique 导致免费崩溃

> ID：15987082
> 
> 赞同：2
> 
> 时间：2013-04-13T11:02:34.160
> 
> 标签：c++, algorithm, vector, stl

我有一个自定义对象的向量。

```
vector<MyObject*> newOnes; 
```

经过一些填充操作后，*newOnes*可能有重复的对象，所以我使用 std:unique()。

```
std::unique(newOnes.begin(), newOnes.end(), isEquivalent); //isEquivalent return true if equal 
```

现在，在我使用完向量之后，我继续使用以下函数释放内存

```
void MyCalss::releaseSource(vector<MyObject*> v) {
    for (unsigned int i = 0; i < v.size(); i++ )
        delete v[i];
} 
```

执行时`releaseSource(newOnes);` 这会导致崩溃。我知道 std:unique 正在创建悬空指针因此崩溃，但我不能在这里使用智能指针。

我可以在这里做些什么来避免这种情况？

像下面这样使用 std:unique 会解决问题吗？

```
std::sort(new_combs.begin(), new_combs.end());
newOnes.erase(std::unique(newOnes.begin(), newOnes.end()), newOnes.end());
//// so operations
releaseSource(newOnes); //still need to free the other members 
```

**我现在不能移动到智能指针（唯一/共享）。这将涉及对我无法修改的代码的更改。**

我可以在这里使用 std::set 删除重复项吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T11:04:28.163

首先最重要的建议是：**不要使用原始指针来执行手动内存管理**。考虑改用智能指针（`std::unique_ptr`或者`std::shared_ptr`，基于适合您需要的特定所有权策略）。仅此一项就可以消除您遇到的问题。

现在考虑你的程序：

> 像下面这样使用 std:unique 会解决问题吗？

`std::unique()`不会从容器*中*删除重复元素，它只是移动元素并将迭代器返回到容器的新逻辑端。

然后，您有责任实际从容器中删除元素，您可以按照您建议的方式执行此操作。

但是请注意，如果以返回*不同*对象的对象`isEquivalent`的方式定义（这听起来很可能，否则您可能会直接省略谓词），您可能会泄漏内存，因为可能会覆盖指向某个特定对象的最后一个指针目的。`true`*`std::unique`*

 *所以再一次：**考虑使用智能指针而不是原始指针和手动内存管理**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T11:25:26.053

unique 不要删除向量中的对象。但是 std::unique 可能会复制向量中的一些元素 例如，如果 int 的向量具有以下元素：[1 2 2 3 4]。那么 unique 的结果是：[1 2 3 4 4]。因此，您可以看到，元素“4”是唯一复制的。让我们把这种情况转移到指针上。如果vector中的'4'是一个指针，那么如果你使用`releaseSource`删除指针，'4'将被删除两次。这就是崩溃发生的原因。*

# jquery - 根据 jquery 中删除的元素调用函数？

> ID：15987083
> 
> 赞同：0
> 
> 时间：2013-04-13T11:02:47.220
> 
> 标签：jquery, drag-and-drop

大家好，我有一个拖放功能，在拖放时我调用了一个用于数据绑定的函数

```
 function droppable(selector)
   {
      $("#dock").droppable({
         drop: function(event, ui) {
              var container=this; 
          GetAppender(ui.draggable,container);
           AppendData();
         }
        });
    }

    GetAppender(obj,container)
    {
       var Appender=""; 
       var ID= $(obj).attr('id');   
            switch(ID){
            case '1':
            $(container).append('<div id="images"></div>');
            break;
           case '2':
            $(container).append('<div id="tabs"></div>');
            } 
          //there may be several cases not only these two    

    }

    function AppendData()
    {
      if($('#images').length){ loadimages();}
      if($('#tabs').length){ loadimages();}
      //there are several funcitons to be loaded
    } 
```

以上是我在这里使用的拖放功能，我担心的是，当我拖放和图像时，它会在 switch case 中转到案例 1 并将该 div 附加到拖放区域.. 然后在我的拖放功能中，我有 AppendData( ) 函数，我在其中检查元素长度是否存在具有图像 id 的 div 我正在执行 loadimages 函数

在此之后，如果首先我删除图像并在我的附加数据中，因为图像 div 的长度存在，则执行此方法 if($('#images').length){ loadimages();}

当我现在放下另一个选项卡时，问题开始了，已经有一个带有图像长度的 div，所以当我放下另一个时，两个条件的长度都满足并且我的函数 AppendData() 中的两个方法都被执行......任何人都可以帮我解决请问这个问题。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:09:02.997

我不确定你的问题，因为我的提议是如此基本......

也许只是使用 else 语句：

```
function AppendData()
{
  if($('#images').length){ loadimages();}
  else if($('#tabs').length){ loadimages();}
  //there are several funcitons to be loaded
} 
```

或更好：

```
function AppendData()
    {
      if($('#images').length || $('#tabs').length){ loadimages();}
    } 
```

# image - Imagemagick - 将图像大小调整为 25px 高度和纵横比

> ID：15987091
> 
> 赞同：46
> 
> 时间：2013-04-13T11:04:11.183
> 
> 标签：image, imagemagick, image-manipulation

好的，所以我有一个包含 16 张图片的文件夹，所有图片的尺寸都在 205x150 到 103x148 之间。我想将它们缩小到 25px 的像素高度和宽度，并将它们水平堆叠在透明背景上......这可能吗？

我可能应该为此使用 ImageMagick ...

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-13T11:27:41.073

您可以使用 ImageMagick 完成所有这些工作。

你的问题不是很具体，所以这里有一个命令示例的快速备忘单，可以帮助你：

```
# resize image to width 25, keeping aspect ratio
convert -geometry 25x src/image1.png out/image1.png

# resize image to height 25, keeping aspect ratio
convert -geometry x25 src/image1.png out/image1.png

# concatenate images horizontally
convert +append src/image1.png src/image2.png out/image12horiz.png

# concatenate images vertically
convert -append src/image1.png src/image2.png out/image12vert.png 
```

此外，该`montage`命令可能非常适合创建您正在寻找的最终图像（在带有一些填充等的透明背景上），但我不记得语法。

另一个有用的命令是`identify`，查找图像的尺寸（以及其他详细信息）。

安装 ImageMagick 后，您可以在 中查看命令列表`man ImageMagick`，并在手册页中获取有关每个命令的更多详细信息。有很多功能，但在谷歌上找出其余的应该不难。（我一直这样做。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-23T10:44:28.260

只是为@janos 答案添加一些内容。[根据文档http://www.imagemagick.org/Usage/resize/#geometry](http://www.imagemagick.org/Usage/resize/#geometry)，我没有使用以前版本的 ImageMagick，但在 v6 或更高版本上

> 几何是一个非常特殊的选项。操作员在每个 IM 命令中的行为都略有不同，并且通常以特殊和神奇的方式。造成这种情况的原因主要是由于遗留使用，应尽可能避免。

因此，除了`-geometry`参数之外，您仍然可以使用`-resize`并省略您想要的值以保持纵横比。您还可以使用该`-quality`参数来避免在调整大小时降低图像质量。质量值介于 1（最低图像质量和最高压缩）和 100（最佳质量但最不有效的压缩）之间。你可以在这里阅读更多：[https ://imagemagick.org/script/command-line-options.php#quality](https://imagemagick.org/script/command-line-options.php#quality)

例如：

```
# resize image to height 25, keeping aspect ratio with quality 90
convert -resize x25 original_image.jpeg -quality 90 resized_image.jpeg 
```

# c# - 带有提取的 C# 更新语句

> ID：15987098
> 
> 赞同：-1
> 
> 时间：2013-04-13T11:05:05.057
> 
> 标签：c#, sql, oledb

我收到错误消息：

> IErrorInfo.GetDescription 失败，出现 E_FAIL(0x80004005)

我想在代码中是不是需要什么变量`[]`？

我正在寻找，每个人都与`[]`.

```
string queryString = "SELECT sum(skupaj) FROM cas where sifra = " + textBox1.Text + " and EXTRACT(MONTH FROM Datum) = "+textBox2.Text+"";

try                                                             
{
            OleDbConnection conn = GetConnection();
            OleDbCommand command = new OleDbCommand(queryString, conn);
            conn.Open();
            OleDbDataReader reader = command.ExecuteReader();

            while (reader.Read())
            {
                ure = reader.GetValue(0).ToString(); ;

            }
            reader.Close();

}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:20:18.557

如果你只想要一些东西的总和，你不需要数据阅读器。只需这样做：

```
 try                                                             
        {
            OleDbConnection conn = GetConnection();
            OleDbCommand command = new OleDbCommand(queryString, conn);
            conn.Open();
            int count = (Int32) command.ExecuteScalar();
            conn.Close();    
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:21:55.267

尝试将表名放在方括号内，如 [CAS]。如果您在 ODBC sql 中使用保留字，或者您使用的字段之间有空格，则会发生这种问题，那么您必须将该字段放在一对刻度内，例如“字段名称”。

# c# - 正则表达式在这个 1/1/0001 12:00:00 AM 得到 1/1/0001

> ID：15987100
> 
> 赞同：-2
> 
> 时间：2013-04-13T11:05:13.930
> 
> 标签：c#, regex

输入是 1/1/0001 12:00:00 AM。在正则表达式之后，我希望输出为 1/1/0001

无法使正则表达式正常工作。任何想法>

忘记发布我失败的正则表达式

```
([^\s]+) 
```

顺便说一句，我正在寻找日期转换。字符串到字符串的转换。上面的结果是 3 个单词，由 ; 分隔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:12:20.137

```
string Date = "1/1/0001 12:00:00 AM";
string NewDate = Convert.ToDateTime(Date).ToShortDateString(); //note the output will be relate to local datetime format
string NewDate2 = Date.Substring(0, Date.IndexOf(' ')); 
```

首先将其转换`DateTime`为字符串，然后通过使用`ToShortDateString()`或删除空格字符之后的所有内容来转换回字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:12:49.943

这将是从您的输入中获取日期的正则表达式

```
"\\d{1}-\\d{1}-\\d{4}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:10:48.783

在您的特定情况下，RegEx 将是：

```
^\d{1,2}/\d{1,2}/\d{2,4} 
```

** 这是一般的正则表达式字符串。您必须在 C#/JavaScript 等中转义反斜杠。

这将匹配 1/1/0001 或 01/01/0001 等。但也将匹配 56/56/9999！因此，在获得日期部分后，您应该进行完整性检查。

但我更愿意创建 DateTime 对象并使用 DateTime 的成员获取日期部分。

**更新**

如果你使用 ([^\s]+) 那么你会得到三个捕获组：

*   0001 年 1 月 1 日
*   12:00:00
*   是

所以你必须提取第一个捕获组，通常索引为 1：

```
var datePart = matchObj.Groups[1].Value // Should be "1/1/0001" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T11:08:32.030

您可以在此字符串之后创建 DateTime 对象 - 以使用内置函数，例如 ToShortDate()

# azure - Azure 角色 - 应用程序启动任务失败，退出代码为 1

> ID：15987104
> 
> 赞同：1
> 
> 时间：2013-04-13T11:05:55.283
> 
> 标签：azure

我试图根据下面的 MSDN 文章包含一个任务：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj154098.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj154098.aspx)

但是，我在其中一个实例上收到以下错误；

*回收（等待角色启动...应用程序启动任务失败，退出代码为 1。[2013-04-13T11:03:22Z]）*

有人可以建议真正发生的事情以及解决方法（如果有的话）吗？

下面是我的cmd：

```
@echo off

@echo Installing "IPv4 Address and Domain Restrictions" feature 
%windir%\System32\ServerManagerCmd.exe -install Web-IP-Security

@echo Unlocking configuration for "IPv4 Address and Domain Restrictions" feature 
%windir%\system32\inetsrv\AppCmd.exe unlock config -section:system.webServer/security 
```

和中国自卫队：

```
<Startup>
  <Task commandLine="Startup.cmd" executionContext="elevated"/>      
  <Task commandLine="startup\startup.cmd" executionContext="elevated"/>
</Startup> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T12:18:32.627

我曾经遇到过类似的问题。我通过在我的启动脚本中添加以下内容来修复它：

```
exit /b 0 
```

如果没有这个，Azure Fabric 不会将脚本注册为已完成，它会继续回收实例。

我看到你使用*ServerManagerCmd.exe*。此命令已从 Windows Server 2012 中删除。因此，请确保您的角色未使用最新的 OS 系列版本进行部署。

```
<ServiceConfiguration ... osFamily="1" ...> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T11:48:54.750

What you can do here is RDP into the instance and run the .CMD file manually to see if it's throwing any errors.

I received a similar error when deploying to Azure and it was caused by the startup command raising a dialogue box that required a user input. Essentially the alert box was confirming that a .dll had been registered, that's all, but it was enough to stop the deployment routine in it's tracks.

Here is the contents of my .cmd file:

```
chcp 1252>NUL
regsvr32 /s .\library\asppdf64.dll
regsvr32 /s .\library\aspjpeg64.dll
exit /b 0 
```

The `/s` tells the service to run silently (i.e. with dialogues purged). The `chcp 1252>NUL` sets the code-page.

# jquery - jquery滑块实时输出

> ID：15987108
> 
> 赞同：1
> 
> 时间：2013-04-13T11:06:45.717
> 
> 标签：jquery, input, slider, output

我有这个代码：[MyFiddle](http://jsfiddle.net/jevniky/m6qJC/1/)

HMTL

```
<p>Money: <span id="amountDisp">500</span><div id="amount_slider"></div></p><p>Time: <span id="timeDisp">7</span><div id="time_slider"></div></p><p>Calculated <span id="result" >545</span></p> 
```

查询：

```
$(document).ready(function () {
    $("#amount_slider").slider({
        orientation: "horizontal",
        range: false,
        min: 500,
        max: 4999,
        value: 500,
        step: 1,
                animate: true,
        change: function (event, ui) {
            $("#amount_field").val(ui.value);
            $("#amount").text(ui.value);
            calculate();
        },
                slide: function (event, ui) {
            $("#amount_field").val(ui.value);
            $("#amountDisp").text(ui.value);
        }
    });
    $("#time_slider").slider({
        orientation: "horizontal",
        range: false,
        min: 7,
        max: 28,
                step: 7,
        value: 7,
                animate: true,
        change: function (event, ui) {
            $("#time_field").val(ui.value);
            $("#time").text(ui.value);
            calculate();
        },
                slide: function (event, ui) {
            $("#time_field").val(ui.value);
            $("#timeDisp").text(ui.value);
        }
    });
    function calculate() {
        var amount = parseInt($("#amount_slider").slider("value"));
        var time = parseInt($("#time_slider").slider("value"));
                var coeficient = 0;
                switch(time){
                       case 7: coeficient = 0.09;break;
                       case 14: coeficient = 0.15;break;
                       case 21: coeficient = 0.19;break;
                       case 28: coeficient = 0.25;break;
                       }
        var rate = amount + (amount * coeficient);
        $("#result").text(rate.toFixed(2));
        $("#result_field").val(rate.toFixed(2));
    }
}); 
```

1）它基本上做我想要的。但是，我想让“计算”字段（或输出）更平滑。所以它会在我滑动时改变它的价值。就像滑块上方的其他两个输出一样。

2）另一个问题是，如何为 . 我的意思是输入将由用户在典型的表单输入中输入。它也会计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:23:13.517

```
slide: function (event, ui) {
        $("#amount_field").val(ui.value);
        $("#amountDisp").text(ui.value);
                calculate();
    } 
```

您需要在幻灯片事件中计算。

[**小提琴**](http://jsfiddle.net/mohammadAdil/m6qJC/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:24:31.927

你有这个：

```
 change: function (event, ui) {
            $("#time_field").val(ui.value);
            $("#time").text(ui.value);
            calculate();
        },
 slide: function (event, ui) {
            $("#time_field").val(ui.value);
            $("#timeDisp").text(ui.value);
        } 
```

你需要这个：

```
 change: function (event, ui) {
            $("#time_field").val(ui.value);
            $("#time").text(ui.value);
        },
 slide: function (event, ui) {
            $("#time_field").val(ui.value);
            $("#timeDisp").text(ui.value);
            calculate(); //move calculate on SLIDE event, which is triggered on every mousemove
        } 
```

对两个滑块都这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:21:49.727

您需要在`slide`回调函数中编写逻辑以进行实时更新，而不是在`change`.

关于你的第二个问题，用这个新语句设置一个更好的 jsfiddle。我知道，这会花你几分钟的时间，但最好还是花点自己的时间而不是花点其他成员的时间……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T09:14:35.470

嗨，如果您希望滑块值实时更新，请使用输入功能而不是更改以下功能示例：

```
$("#time_slider").slider({
    orientation: "horizontal",
    range: false,
    min: 7,
    max: 28,
            step: 7,
    value: 7,
            animate: true,
    input: function (event, ui) {
        $("#time_field").val(ui.value);
        $("#time").text(ui.value);
        calculate();
    },
            slide: function (event, ui) {
        $("#time_field").val(ui.value);
        $("#timeDisp").text(ui.value);
    }
}); 
```

# php - mysqli查询错误类外

> ID：15987113
> 
> 赞同：1
> 
> 时间：2013-04-13T11:07:54.383
> 
> 标签：php, mysqli

我做了一个这样的数据库连接类：

```
class db_connector{

const host = "localhost"; 
const user = "root"; 
const password = ""; 
const dbname = "test"; 

public $db;

public function __construct()
{
    $database = $this::dbname;
    $db = new mysqli($this::host, $this::user, $this::password, $this::dbname);
    if($db->connect_errno)
    {
        die (mysql_connect_error());
    }
    return $db;
}
} 
```

当我为类创建一个对象时，它工作得很好，但是我想在类中进行查询，但出现以下错误：

> 致命错误：调用未定义的方法 db_connector::query()

对象如下（类外）：

```
$con = new db_connector;
$con->query("SELECT * FROM test"); 
```

连接建立，只是查询给出了错误。我认为该对象将继承 mysqli 方法，因为我返回了它。任何人都可以帮我解决这个问题吗？我在 OOP 中相当新，所以也许我的逻辑不是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:26:13.907

来个小魔法怎么样：

```
class db_connector{

protected $connectionData = array(
    'host' => 'localhost',
    'user' => 'root',
    'password' => '',
    'dbname' => 'test',
);

protected $db;

public function __construct($connectionData=array())
{
    $cd = array_merge($this->connectionData, $connectionData);
    $this->db = new mysqli($cd['host'], $cd['user'], $cd['password'], $cd['dbname']);

    if($this->db->connect_errno)
    {
        die (mysql_connect_error());
    }
}

public function foo()
{
    return 'I am foo, i exist so i will be called even if mysqli::foo would exist, because i am defined in this class!';
}

public function __get($property)
{
    if(property_exists($this->db, $property)){
        return $this->db->$property;
    }  
}

public function __call($name, $args)
{
    if(method_exists($this->db, $name))
        return call_user_func_array(array($this->db, $name), $args);
}
} 
```

并称它为：

```
$db = new db_connector();
$result = $db->query('SELECT foo FROM bar LIMIT 1');
// this should also work:
echo $result->num_rows; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:14:09.787

类构造函数不会像您期望的那样返回 mysqli 对象。

```
$con = new db_connector;
//$con is a db_connector object not a mysqli object
$con->query("SELECT * FROM test"); 
```

尝试：

```
$con = new db_connector;
$con->db->query("SELECT * FROM test"); 
```

反而。$con->db 是一个保存 mysqli 对象的公共字段。

## 编辑

也改变：

```
$db = new mysqli($this::host, $this::user, $this::password, $this::dbname);
if($db->connect_errno)
{
    die (mysql_connect_error());
}
return $db; 
```

至：

```
$this->db = new mysqli($this::host, $this::user, $this::password, $this::dbname);
if($this->db->connect_errno)
{
    die (mysql_connect_error());
} 
```

# asp.net-mvc - Terilik MVC GRID 控件是免费的吗？

> ID：15987123
> 
> 赞同：1
> 
> 时间：2013-04-13T11:09:00.957
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, telerik-grid, nopcommerce

我是使用 Terilik 网格的初学者。我已经在 nopCommerce 项目 2.30（定制）中工作。

我在 nopCommerce 2.30 项目中找到了**Telerik.Web.Mvc.dll 。**请看下面这张图片。

![在此处输入图像描述](https://i.stack.imgur.com/Rubhi.jpg)

我不知道这个控件是免费的还是试用版。但是 Terilik 控件在我的项目中的任何地方都可以正常工作。

我试图在这个项目（nopCommerce 2.3）中设置一个列上下文菜单，但我无法`.ColumnContextMenu()`在这个项目中使用 Razor 智能。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:58:29.563

.ColumnContextMenu() 选项在 Terilik 库的 nopCommerce 2.65 版本中获取。

但我不确定 Terlirik 控件库是免费的。

希望会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:00:16.277

对于 ColumnContextMenu 问题，请尝试使用：@using Telerik.Web.Mvc.UI.Fluent

也许您可以享受 Razor 智能！

# php - PHP随机字符串，每两秒刷新一次

> ID：15987125
> 
> 赞同：1
> 
> 时间：2013-04-13T11:09:06.873
> 
> 标签：php

我需要一个每两秒刷新一次的随机字符串，这样你就会得到每两秒混合一次的单词的效果。这是我的代码：

```
function rand_string( $length ) {
    $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";  

    $size = strlen( $chars );
    for( $i = 0; $i < $length; $i++ ) {
        $str .= $chars[ rand( 0, $size - 1 ) ];
    }

    return $str; 
```

然后我想重复多次，不是无限次的，所以我使用了这段代码：

```
$random = rand_string( 9 );
for($i=0; $i < 5; $i++) {
   echo $random;
   flush();
   sleep(2);
} 
```

不知何故，页面等待 10 秒，然后显示我的字符串，我的字符串显示五次相同，而不是每两秒刷新一次。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:47:37.010

试试下面的例子。替换指向您自己服务器上的页面/服务的 URL，该 URL 返回下一个字符串值（仅此而已）。请务必将您的响应（来自服务器）中的内容类型设置为“文本/纯文本”。

正如其他帖子中所述/指示/暗示的那样，问题在于 HTTP 是**无状态的**协议。浏览器发送请求。服务器发送响应。结束。:-) PHP 代码只在服务器上执行，它的工作只是为 Web 浏览器生成内容。但除此之外，它不会以任何方式与浏览器交互。一旦 PHP 代码生成的所有内容都发送到浏览器，PHP 代码就完成了。您应该阅读一些关于输出缓冲等概念的内容。您可以稍微控制一下您的 PHP 代码是缓冲所有输出，然后一次性将其发送到浏览器，还是在生成时将其涓涓细流。但是您根本无法使用 PHP 代码以交互方式更改网页上的任何内容。一旦你将它发送到浏览器，它就会被发送，仅此而已。你不能把它召回并改变它。

现在，话虽如此，您当然**可以**使用 PHP 代码发出 JavaScript 代码，然后这些代码可以与浏览器中的 DOM 进行交互，还可以通过 AJAX 回调服务器上的不同资源，这些资源又可以是不同的 PHP 页面做任何你需要他们做的事情并返回结果以在浏览器中显示或进一步处理（这可能导致对服务器的额外 AJAX 调用，尽管“健谈”通常不等于“好”）。

**AJAX**（异步 JavaScript 和 XML）是一种技术，可让您从网页调用**回Web 服务器，而无需重新加载整个页面。**您可以使用诸如 setInterval() 和 setTimeout() 之类的 JavaScript 计时器函数来实现延迟或创建重复事件，例如文本更新。不要太沉迷于“AJAX”中的“XML”。一种称为 JSON 的更新的数据封装标准已经变得非常流行，并且*至少*在几乎所有情况下都可以通过 AJAX 使用，就像 XML 一样。 **JSON**是“JavaScript Object Notation”，标准基本上只是序列化的 JavaScript 数据结构，使用起来非常自然。

事实上，在我下面展示的示例中，既没有使用 XML 也没有使用 JSON（为了简单起见）。但是 XML 或 JSON 都可以很容易地使用，并且可能应该在一个严肃的服务实现中。

**XMLHttpRequest**对象是使 AJAX 成为可能的魔法位。XMLHttpRequest、setInterval()、setTimeout() 和大量其他 API 使用异步回调。所以这是你需要接受的另一个概念。异步回调只是您传递给的函数，例如， setInterval() 以便在计时器事件发生时能够“回调”（您传递对函数的引用）。同时，您的界面没有锁定等待回调。因此它是异步的。我下面的示例还使用了称为闭包的内联（未命名、匿名）函数，这是另一个对现代 JavaScript 编程非常重要的概念。

最后，我衷心推荐使用 jQuery 之类的东西。好吧，我会推荐 jQuery。还有其他 JavaScript 框架，但我不完全确定再看其他任何一个框架有什么意义。下面的示例不使用 jQuery。

您使用原始示例完成的主要事情是，由于 PHP 仅在服务器上执行，因此使您的页面需要更长的时间才能完全完成渲染，这意味着您的请求需要更长的时间才能与 Web 服务器断开连接，这反过来又是在服务器上占用其他浏览器实例无法使用的连接资源，直到请求在启动后至少 10 秒完成。

```
<html>
    <head>
    </head>
    <body>
        <div id="blah">Watch me change.</div>

        <script language="javascript">

            // set callback function, to be called every 2 seconds
            setInterval( function() {
                if (window.XMLHttpRequest) {
                    xmlhttp = new XMLHttpRequest();
                }
                else { // IE6, IE5
                    xmlhttp = new ActiveXObject( "Microsoft.XMLHTTP" );
                }

                // callback function called for each state change, "4" means request finished.
                xmlhttp.onReadyStateChange = function() {
                    if( 4 == xmlhttp.readyState && 200 == xmlHttp.status ) {
                        document.getElementById("blah").innerHTML = xmlHttp.responseText;
                    }
                }

                xmlhttp.open( "GET", "http://source-of-new-string...", true );
                xmlhttp.send();

            }, 2000 );

        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:12:22.947

您还不了解 Web 开发的基础知识。您编写的单个 PHP 脚本首先生成一个字符串，然后循环 5 次，输出生成的字符串然后休眠 2 秒，脚本完成后刷新到浏览器。因此很明显，由于您只调用了一次该函数，因此 10 秒后您会看到 5 个相同的字符串。

对于无状态的“HTTP 请求”，每 2 秒出现一个新字符串是不可能的。您需要使用 Ajax 回调来实现该效果，每 2 秒从客户端调用一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:12:58.580

```
header('Content-Type: text/html; charset=UTF-8');
function rand_string( $length ) {
    $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";  

    $size = strlen( $chars );
    for( $i = 0; $i < $length; $i++ ) {
        $str .= $chars[ rand( 0, $size - 1 ) ];
    }

    return $str;
}
for($i=0; $i < 5; $i++) {
   $random = rand_string(9);
   echo $random;
   flush();
   ob_flush();
   sleep(2);
} 
```

您需要在循环中定义变量 $random new。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T11:15:41.480

## 不知何故，页面等待 10 秒，然后显示我的字符串

首先，PHP 不能如你所愿。PHP 将网页内容发送到浏览器，浏览器依次显示它。

因此，浏览器甚至可以在开始显示页面之前选择它需要接收的数据量。

**有你的延迟：**五次`sleep(2);`。浏览器在显示数据之前等待连接结束。

## 我的字符串显示五次相同

其次，下面的代码只打印了变量内容的五倍，`$random`在 for 循环中永远不会改变。所以五次相同的内容。

```
$random = rand_string( 9 );
for($i=0; $i < 5; $i++) {
   echo $random;
   flush();
   sleep(2);
} 
```

有你的重复：五次`echo $random;`。

## 笔记

*   `$random`是一个变量。有关`rand()`功能，[请参见此处](http://php.net/manual/fr/function.rand.php)。
*   对于随机字符串，请参阅： [PHP 随机字符串生成器](https://stackoverflow.com/questions/4356289/php-random-string-generator)
*   PHP 可能不适合您想做的事情`I need a random string that refreshes every two seconds`。刷新部分可以通过 javascript 获得，或者最坏的情况是，每两秒刷新一次页面，并在旧字符串的同时显示一个新字符串。这将留下添加新字符串的错觉（中间有丑陋的页面加载时刻）。

# matlab - Matlab：使用“for”循环中的先前矩阵创建新矩阵

> ID：15987127
> 
> 赞同：0
> 
> 时间：2013-04-13T11:09:23.300
> 
> 标签：matlab, matrix

我编写了下面的代码来确定矩阵 X 的列内出现颜色的概率。索引号 0-7 指的是这些颜色。

我遇到的问题是 - 我想在第 1 行中有“颜色 0 的概率”，然后在第 2 行中有“颜色 1 的概率”，依此类推，在一个新的矩阵中。我在 Google 和帮助文档上进行了广泛搜索，但仍然不知道。

```
[rows, cols] = size(X);

for index = 0:7   
    B = (X == index);
    colour_in_columns = sum(B,1);
    prob_colour_in_columns = (colour_in_columns ./rows);
    index = index + 1;

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:27:03.847

基本上（我希望这可行）你将每个 prob_colour_in_columns 添加到自身

```
newmatrix=[newmatrix;prob_colour_in_columns]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:26:25.093

您可以简单地使用单线：

```
% Suppose your matrix is 3x3
X = randi([0,7],3);

out = histc(X,0:7,2)./size(X,2) 
```

在`out(1,:)`您将有颜色 0 到 7 发生在 X 的第 1 行的概率。在`out(2,:)`您将有颜色 0 到 7 的概率发生在 X 的第 2 行等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T12:18:24.067

在循环内“手动”修改`index`变量`for`并不像您想象的那样工作。每次循环体再次执行时，Matlab 都会用`index`你给出的列表 0:7 中的下一个值覆盖你。循环主体中的最后一行可能是错误的，您可能希望将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T12:25:42.313

您可以以类似的方式确定颜色出现在矩阵 X 的行内的概率：假设

```
X=[1 2 3 4;
   5 1 1 0;
   7 7 7 7;
   0 7 6 6]

[rows, cols] = size(X);

for index = 0:7   
    B = (X == index);
    colour_in_rows = sum(B,2);
    prob_colour_in_rows = (colour_in_columns ./cols);
end 
```

# java - 如何为每个未点击的按钮添加点？

> ID：15987129
> 
> 赞同：0
> 
> 时间：2013-04-13T11:09:34.320
> 
> 标签：java, android

所以，我有 16 个按钮，当用户点击一个按钮时，我从 db.setText 给它。他现在已经从这些术语中猜到了最终答案。我需要为他在游戏中没有点击的每个按钮加一分。我试过了：

```
if(!button.isPressed){
points = points + 1;
} 
```

这没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:11:31.217

制作一个全局计数器并在每次按下按钮时增加它（onClickListener）。然后从按钮总数中减去计数器，这就是你的分数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:32:48.887

将点初始化为 16，然后在每个按钮上单击将其减一。

左点最终将自动等于未按下的按钮数。

# php - 使用foreach循环插入mysql数据

> ID：15987130
> 
> 赞同：1
> 
> 时间：2013-04-13T11:09:48.910
> 
> 标签：php, mysql, if-statement, insert, foreach

我使用以下代码成功插入记录：

```
 foreach($R as $k=>$v)
 {
     $test_id = str_replace('rep_result_', '', $k);
     if(strstr($k, 'rep_result_'))
     {      
         $content = $v; 
         $SQL = "INSERT INTO report SET
             rep_te_id   = '$test_id',
             rep_result  = '$content',
             record_id = '$R[payment_id]',
             rep_date    = '$dt'"; 
```

但是现在我的表中有两个额外的字段，`remark`并且`nor`. 所以现在，为了插入所有数据，我编写了以下代码：

```
foreach($R as $k=>$v)
{
    $test_id = str_replace('rep_result_', '', $k);
    if(strstr($k, 'rep_result_'))
    {
        $content = $v; 
        if(strstr($k, 'remark_'))
   {
         $remark=$v;
         if(strstr($k, 'nor_'))
         {
             $nor=$v;
         $SQL = "INSERT INTO report SET
                 rep_te_id   = '$test_id',
             rep_result  = '$content',
             record_id = '$R[payment_id]',
             remark  = '**$remark**',
             nor  = '**$nor**',                    
             rep_date    = '$dt'"; 
```

我没有在数据库中得到任何东西。这里并非一切都好。如果我只使用一个`if`条件，那么数据就像`(rep_result,remark,nor any one)`.

```
if(strstr($k, 'remark_'))
   $remark=$v; 
```

但是当我使用所有三个条件时，什么都没有存储。我知道我有`if`语句或`foreach`循环问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:52:07.610

正如其他人所说，您的 SQL 语法根本不正确（混合 INSERT 和 UPDATE 语法）。单行插入语句将具有如下结构：

```
INSERT INTO report (rep_te_id, rep_result, record_id, rep_date )
VALUES ( '$test_id', '$content', '$R[payment_id]', '$dt' ) 
```

请阅读准备好的语句、MySQLi 和 PDO，以了解有关数据库服务器的性能和有效使用的更多信息。

此外，从一般意义上讲，从循环中向数据库发送大量独立的 SQL 语句可能是一个*巨大*的性能问题。这些调用中的每一个都存在与您希望数据库服务器执行的实际数据插入工作无关的通信和连接开销。

MySQL 允许您使用相同的语句插入多行，因此您可以在循环中构建单个 SQL 语句，然后在一次调用中将所有插入发送到数据库。

用一条语句插入多行的语法如下：

```
INSERT INTO report (rep_te_id, rep_result, record_id, rep_date )
VALUES ( '1', 'Row 1 content', '1', '2013-04-15' ),
( '2', 'Row 2 content', '2', '2013-04-15' ),
( '3', 'Row 3 content', '3', '2013-04-15' ),
( '4', 'Row 4 content', '4', '2013-04-15' ); 
```

有关文档和更多示例，请参阅：

[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

[https://stackoverflow.com/a/6889087/618649](https://stackoverflow.com/a/6889087/618649)

[https://stackoverflow.com/a/1307652/618649](https://stackoverflow.com/a/1307652/618649)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:27:12.270

您的`INSERT`查询语句有错误。我无法测试您的代码，但我假设您的条件在这里有效是 mysqli 连接和`INSERT`查询的示例。

```
 //opening connection
    $mysqli = new mysqli($dbserver, $dblogin, $dbpassword, $dbname);
    if (mysqli_connect_errno()) 
    {
        printf("Connection failed: %s\n", mysqli_connect_error());
        exit();
    }

    foreach($R as $k=>$v)
    {
        $test_id = str_replace('rep_result_', '', $k);
        if(strstr($k, 'rep_result_'))
        {
            $content = $v; 
            if(strstr($k, 'remark_'))
            {
                  $remark=$v;
                  if(strstr($k, 'nor_'))
                  {
                      $nor=$v;

                      $SQL = "INSERT INTO report (`rep_te_id`, `rep_result`, `record_id`, `remark`, `nor`, `rep_date`) VALUES ('".$test_id."', '".$content."', '".$R['payment_id']."', '".$remark."', '".$nor."', '".$dt."')";
                      echo $SQL   //let's see the query
                      $mysqli->query($SQL) or die($msqli->error.__LINE__);
                  }
            }
        }
    } 
```

如您所见，我`echo`在语句之后放置了一个，`$SQL`以查看您的条件是否匹配。如果查询不会被打印，那么你对所有这些`if`条件都有问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T11:32:09.757

嘿伙计，您的插入查询语法错误用户正确并学习一些 sql 查询语法

```
INSERT INTO report (rep_te_id,rep_result,remark,nor,rep_date) VALUES ('$test_id','$content','$R[payment_id]','**$remark**','**$nor**','$dt'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T11:21:54.120

尝试为您的每个 if 条件实现 else 并尝试从它们中回显某些内容，因为看起来您的任何 If 条件都没有得到满足。

我建议您仅从所有其他三个中回显 $k，因为您将能够知道 $k 的当前值。

还指定其他没有。在回声中，您将能够获得其他被调用的内容。

# jquery - jQuery 头部标签

> ID：15987132
> 
> 赞同：0
> 
> 时间：2013-04-13T11:10:06.143
> 
> 标签：jquery, head, zen

我在测试服务器上全新安装了 Joomla 2.5.9，唯一添加的扩展是 jb_library、Zen Tools 和 Anycode。我正在使用 Joomla 模板 Beez 20。

我正在使用带有需要我调用 jquery 的小部件的 ECWID 商店。

我可以让该小部件工作并拥有 Zen 工具灯箱的唯一方法是在头部添加 jquery 路径并在 Javascript 之后添加某种字符。（甚至是句号）。

示例（感叹号是本例中的多余字符）：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3    /jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js">    </script>!
</head> 
```

现在商店小部件和灯箱现在将同时工作，但这个额外的字符将显示在我所有页面的顶部。

由于头部的 jquery 路径没有那个额外的字符，ECWID 商店根本不会加载，并给出关于缺少正文标签的错误消息。如果我在正文中添加 jquery 路径，则 ECWID 小部件可以工作，但 zen 工具灯箱不能。

我是这种编码的新手，任何人都可以提出一种方法，我可以停止在头部使用额外的字符或停止它在我的页面上显示吗？

网址：

```
http://79.170.44.128/test-13.co.uk/ 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:06:03.580

Joomlabamboo 现已发布 Zen 工具（独立版本 - 无 jb_library）更新：

[http://www.joomlabamboo.com/blog/joomla-extensions/zentools-update-plus-some-details-about-v2](http://www.joomlabamboo.com/blog/joomla-extensions/zentools-update-plus-some-details-about-v2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:14:43.710

奇怪，真的很奇怪。基本上，这样做是这样的：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

没有额外的标记和其他任何东西......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:56:24.123

解决了！

Joomlabamboo 尝试了一个新的 alpha 版本的 Zen 工具！当新版本可供下载时，我会在这里发布。（我的带有错误的版本是当时 JB_mod_zentools_J2.5_J3.0_1.9.6 可供下载的最新版本）。开发人员还写道，在 1.9.7 版本之后，它将是一个独立的扩展，因此不需要 jb_library。

BTW JB-library 是免费扩展，Zen Tools 是俱乐部扩展。

非常感谢大家的帮助，多么棒的论坛苏珊娜

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T11:35:33.500

您可以尝试在两行之间添加 jQuery noConflict 并删除感叹号，如下所示

```
<script  type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script  type="text/javascript">jQuery.noConflict();</script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T12:10:51.733

试试这个，把下面的代码放在body的结束标签之后

```
 </body>
  <script src="//app.ecwid.com/script.js?2158433" type="text/javascript"></script>
  <script type="text/javascript">
     window.addEvent('load', function() {
            new JCaption('img.caption');
        });
  </script>
  <script type="text/javascript">
     var big ='72%';
     var small='53%';
     var altopen='is open';
     var altclose='is closed';
     var bildauf='/test-13.co.uk/templates/beez_20/images/plus.png';
     var bildzu='/test-13.co.uk/templates/beez_20/images/minus.png';
     var rightopen='Open info';
     var rightclose='Close info';
     var fontSizeTitle='Font size';
     var bigger='Bigger';
     var reset='Reset';
     var smaller='Smaller';
     var biggerTitle='Increase size';
     var resetTitle='Revert styles to default';
     var smallerTitle='Decrease size';
  </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T16:19:28.050

只需删除！从代码。它没有理由在那里。不在标签之间的任何内容都只会在您的页面上输出为 html。为什么要加！首先？

# javascript - 如何检查是否从 HTML 下拉列表中选择了一个项目？

> ID：15987140
> 
> 赞同：23
> 
> 时间：2013-04-13T11:11:25.533
> 
> 标签：javascript, html, drop-down-menu, html-select

我有一个下拉列表，我无法检查是否从下拉列表中选择了一个值

下面是我的 HTML 代码：

```
<label class="paylabel" for="cardtype">Card Type:</label>
<select id="cardtype" name="cards">
    <option value="selectcard">--- Please select ---</option>
    <option value="mastercard">Mastercard</option>
    <option value="maestro">Maestro</option>
    <option value="solo">Solo (UK only)</option>
    <option value="visaelectron">Visa Electron</option>
    <option value="visadebit">Visa Debit</option>
</select><br/> 
```

下面是我的 JavaScript 代码：

```
var card = document.getElementByName("cards")[0].value;
if (card.value == selectcard) {
    alert("Please select a card type");
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-13T11:14:22.187

好吧，您错过了字符串周围的引号`selectcard`，应该是`"selectcard"`

```
if (card.value == selectcard) 
```

应该

```
if (card.value == "selectcard") 
```

这是完整的代码

```
function validate()
{
 var ddl = document.getElementById("cardtype");
 var selectedValue = ddl.options[ddl.selectedIndex].value;
    if (selectedValue == "selectcard")
   {
    alert("Please select a card type");
   }
} 
```

[JS 小提琴演示](http://jsfiddle.net/XFtBD/2/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T11:38:20.803

```
<script>
var card = document.getElementById("cardtype");
if(card.selectedIndex == 0) {
     alert('select one answer');
}
else {
    var selectedText = card.options[card.selectedIndex].text;
    alert(selectedText);
}
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T11:27:52.407

```
function check(selId) {
  var sel = document.getElementById(selId);
  var dropDown_sel = sel.options[sel.selectedIndex].text;
  if (dropDown_sel != "none") {

           state=1;

     //state is a Global variable initially it is set to 0
  } 
}

function checkstatevalue() {
      if (state==1) {
           return 1;
      } 
      return false;
    } 
```

和 html 是例如

```
<form name="droptest" onSubmit="return checkstatevalue()">

<select id='Sel1' onchange='check("Sel1");'>
  <option value='junaid'>Junaid</option>
  <option value='none'>none</option>
  <option value='ali'>Ali</option>
</select>

</form> 
```

现在，当提交表单时，首先检查 state 的值，如果它为 0，则表示没有选择任何项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-28T12:23:07.143

`selectedIndex`您可以使用该属性检查所选值的索引是 0 还是 -1 。

在您的情况下， 0 也不是有效的索引值，因为它是“占位符”：
`<option value="selectcard">--- Please select ---</option>`

[现场演示](https://codverter.com/src/webeditor?query=b6e53687-f832-43a4-90dc-23d452fdf73d)

```
function Validate()
 {
   var combo = document.getElementById("cardtype");
   if(combo.selectedIndex <=0)
    {
      alert("Please Select Valid Value");
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T11:23:27.163

```
<label class="paylabel" for="cardtype">Card Type:</label>
<select id="cardtype" name="cards">
<option value="selectcard">--- Please select ---</option>
<option value="mastercard" selected="selected">Mastercard</option>
<option value="maestro">Maestro</option>
<option value="solo">Solo (UK only)</option>
<option value="visaelectron">Visa Electron</option>
<option value="visadebit">Visa Debit</option>
</select><br />

<script>
    var card = document.getElementById("cardtype");
    if (card.options[card.selectedIndex].value == 'selectcard') {
          alert("Please select a card type");
          return false;
    }
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-18T19:51:47.140

我相信这在所有方面都是最简单的，除非您以其他方式调用 validate 函数。对您的第一个选项使用 no/null/empty 值更容易验证。你也可以去掉第一个选项，从最流行的卡片类型开始。

```
<form name="myForm">
<select id="cardtype" name="cards">
<option value="">--- Please select ---</option>
<option value="mastercard" selected="selected">Mastercard</option>
<option value="maestro">Maestro</option>
<option value="solo">Solo (UK only)</option>
<option value="visaelectron">Visa Electron</option>
<option value="visadebit">Visa Debit</option>
</select><br />

<input type="submit" name="submit" class="button" value="SUBMIT" onmouseover="validate()"></form>

<script>
function validate() {
 if (document.myform.cards.value == "") {
    alert("Please select a card type");
    document.myForm.cards.focus();
}
</script> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-03-07T21:32:48.587

```
Select select = new Select(_element);
List<WebElement> selectedOptions = select.getAllSelectedOptions();

if(selectedOptions.size() > 0){
    return true;
}else{
    return false;
} 
```

# apache - 在 Web 服务器上获取特定页面/目录的子页面

> ID：15987142
> 
> 赞同：0
> 
> 时间：2013-04-13T11:11:32.313
> 
> 标签：apache, webserver

我正在寻找一种方法来查看保存在 Web 服务器上的任何目录中的所有子页面。例如，如果我有一个页面 abc.com/directorA/directoryB，我是否有可能以某种方式获取该子页面下的所有页面和目录？还是只有在服务器具有该目录的“索引”站点之类的东西时才有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:21:29.703

放入你的 httpd.conf

```
<Directory "/srv/www/htdocs/directorA"> 
    Options +Indexes 
    Order allow,deny 
    Allow from all 
</Directory> 
```

[http://wiki.apache.org/httpd/DirectoryListings](http://wiki.apache.org/httpd/DirectoryListings)

只有当站点管理员决定显示它时才有可能。否则，robot.txt 存在，因为它还解释了机器人可以去哪里。但是这个文件是由站点管理员制作的，所以它只能由管理员显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T18:26:12.527

您可以使用 Visio 2013（也可能是旧版本）来实现这一点。

[当您选择“新”文件 Visio 的“搜索在线模板”时，您可以根据https://www.dropbox.com/s/t4w4emxp3vsptv4/Screenshot%202014-06-](https://www.dropbox.com/s/t4w4emxp3vsptv4/Screenshot%202014-06-21%2019.04.32.png)选择形状“网站地图”和“概念网站” [21%2019.04.32.png](https://www.dropbox.com/s/t4w4emxp3vsptv4/Screenshot%202014-06-21%2019.04.32.png)

选择“网站地图”，按照向导并输入您选择的 URL。

# android - 访问安卓解锁屏幕

> ID：15987144
> 
> 赞同：2
> 
> 时间：2013-04-13T11:11:48.433
> 
> 标签：android, android-intent

我是安卓新手。我想开发一个从解锁屏幕启动的应用程序。例如，如果当前（原始）解锁屏幕的密码/模式是“1234”，之后用户将被引导到家，但如果安装了我的应用程序，将有 2 个密码/模式来解锁屏幕。所以，

1-如果用户输入原始密码，将被定向到家。2-如果用户输入备用的第二个密码，经过一些工作，他也会被引导回家。

我是 android 新手，不知道它的访问级别和类似的东西。所以请帮助我，给我一些工作参考，并建议这是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:20:37.943

解锁屏幕是内置在操作系统框架中的，不是您可以通过简单的 APK 替换来更改的。要正确执行您所描述的操作，您必须修改特定设备的操作系统。

# jquery-mobile - 单选按钮的移动 CSS 不适用于敲击模板绑定

> ID：15987147
> 
> 赞同：1
> 
> 时间：2013-04-13T11:12:25.050
> 
> 标签：jquery-mobile, knockout-mapping-plugin

我尝试使用`knockoutjs`模板绑定来动态绑定包含一组单选按钮的字段集。这里我的问题是移动单选按钮 css 不适用单选按钮。我在stackoverflow中搜索了按钮问题，但没有找到单选按钮。所以你能帮我找到解决方案吗

```
<script type="text/x-jquery-tmpl" id="MobileQuestionTemplate"> 
     <div data-role="fieldcontain"> 
        <div class="divborder">  
            <label id="l2" for="select-choice-1" class="questiontext"  data-bind="text:                          QuestionText"></label> 
            <br />    
            <fieldset data-role="controlgroup" data-mini="true"  align="center" data-       bind="attr: { visible: QuestionType==13,id:QuestionID+'_fld'},template: {name:'MobileOptionTemplate', foreach: OptionList}"></fieldset>  
        </div>  
    </div>
</script>
<script type="text/x-jquery-tmpl" id="MobileOptionTemplate"> 
    <input type="radio" data-bind="attr: {id:QuestionID+'_'+OptionID+'_rbt',val:OptionID,name: QuestionID+'_selectedObjects'}"/>
    <label data-bind="text: OptionText ,attr: { for: QuestionID+'_'+OptionID+'_rbt'}" /> 
</script>
<table id="tblMobileMgrQuestions" data-bind="template: {name:'MobileQuestionTemplate', foreach: MobileManagerviewmodel.ManagerQuestions}">
</table> 
```

你能告诉我我需要在哪里更改代码`js`才能申请吗`css`

```
$.ajax(
{
    url: "/Render/LoadSurveyManagerQuestions?surveyGuid=" + surveyGuid + "&surveyItemGuid=" + rsg,
    success: function (result) 
    {
        ko.bindingHandlers['button'] = 
        {
            init: function (element, valueAccessor) 
            {
                debugger;
                $(element).button(ko.utils.unwrapObservable(valueAccessor()));
            }
        }
        debugger;
        var SurveyManagerQuestion = function (managerQuestions) 
        {
            var Self = this;
            Self.ManagerQuestions = ko.observableArray(managerQuestions);

            Self.AssignQuestionAnswer = function (option) 
            {
                ko.utils.arrayFirst(Self.ManagerQuestions(), function (question) 
                {
                    if (question.QuestionID == option.QuestionID) 
                    {
                        question.OptionId = option.OptionID;
                        question.OptionText = option.OptionText;
                    }
                });
            };

            Self.Save = function () 
            {
                alert('hi');
            };
        };
        debugger;
        MobileManagerviewmodel = new SurveyManagerQuestion(result);
        ko.applyBindings(MobileManagerviewmodel, document.getElementById("tblMobileMgrQuestions"));
    }
}); 
```

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:31:31.210

要动态增强单选按钮的标记，请使用以下内容。

```
$('input[type=radio]').checkboxradio().trigger('create') 
```

# php - 更改地图 javascript 以进行自动输入

> ID：15987148
> 
> 赞同：0
> 
> 时间：2013-04-13T11:12:42.057
> 
> 标签：php, javascript, google-maps, google-maps-api-3

我对这个脚本做了几处修改，但我不喜欢将它更改为从我拥有的 php 变量自动加载地图。

我希望地图加载的地址在 php 变量中`$address`

```
var geocoder;
  var map;
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 14,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
  }

  function codeAddress() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  } 
```

我从谷歌提供的地图文档中挑选了这段代码。

我想更改它，以便在加载初始化方法时，它会自动转换`$address`变量转换为 lat 和 long 并将其显示在地图上。我现在让它在按钮上加载 codeAddress() 但希望它成为初始化的一部分！

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:23:28.197

您可以查看这篇文章：[**PHP server side geocoding** with **Google Maps API v3**](http://erlycoder.com/45/php-server-side-geocoding-with-google-maps-api-v3)。

只需在服务器端找到`lat`/`lng`配对（使用`curl`）

```
$url = "http://maps.google.com/maps/api/geocode/json?sensor=false&address=Some+Address";    

$c = curl_init();
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_URL, $url);
$contents = curl_exec($c);
curl_close($c);

$resp = json_decode($contents, true);
$location = $resp['results'][0]['geometry']['location']; // (Lat => x, Lng => y) 
```

然后在地图初始化块中渲染它

```
var myLatlng = new google.maps.LatLng(<?=$Lat;?>, <?=$Lng;?>); 
```

# ruby-on-rails - Capistrano VPS 部署错误

> ID：15987159
> 
> 赞同：0
> 
> 时间：2013-04-13T11:13:13.067
> 
> 标签：ruby-on-rails, deployment, rvm, capistrano, rvm-capistrano

我正在使用 Capistrano 部署到 VPS。在我的`deploy.rb`：

```
require "bundler/capistrano"
server "xxx.xxx.xx.xxx", :web, :app, :db, primary: true
set :application, "riffbox"
set :user, "root"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false
set :scm, "git"
set :repository, "https://xxxx@bitbucket.org/xxxx/iv.git"
set :branch, "master"
default_run_options[:pty] = true
ssh_options[:forward_agent] = true
after "deploy", "deploy:cleanup" # keep only the last 5 releases 
```

运行时出现以下错误`cap deploy:cold`：

```
 * 2013-04-13 22:59:38 executing `bundle:install'
  * executing "cd /home/root/apps/riffbox/releases/20130413105936 && bundle install --gemfile /home/root/apps/riffbox/releases/20130413105936/Gemfile --path /home/root/apps/riffbox/shared/bundle --deployment --quiet --without development test"
    servers: ["198.199.74.146"]
    [198.199.74.146] executing command
 ** [out :: 198.199.74.146] **ERROR: Gem bundler is not installed, run `gem install bundler` first.**
 ** [out :: 198.199.74.146] 
    command finished in 915ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/root/apps/riffbox/releases/20130413105936; true"
    servers: ["198.199.74.146"]
    [198.199.74.146] executing command
    command finished in 907ms
**failed: "sh -c 'cd /home/root/apps/riffbox/releases/20130413105936 && bundle install --gemfile /home/root/apps/riffbox/releases/20130413105936/Gemfile --path /home/root/apps/riffbox/shared/bundle --deployment --quiet --without development test'" on 198.199.74.146** 
```

我可以看到有两个错误，`Bundler`找不到，另一个无法运行`sh`命令。我按照说明（[https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)）安装rvm、rubygem 和 rails 在我的 VPS 上使用`root`用户。

我还缺少什么？

**更新**

我正在使用 rvm-capistrano，并使用创建的用户安装了所有内容，现在部署时出现不同的错误：cold：

> 执行“如果 [ -d /home/app/riffbox/shared/cached-copy ]; 然后 cd /home/app/riffbox/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 2afbd8fb661f62a01e0940be38e70915fc3e32ea && git clean -q -d -x -f; 否则 git clone -q git@bitbucket.org:xxx/iv.git /home/app/riffbox/shared/cached-copy && cd /home/app/riffbox/shared/cached-copy && git checkout -q -b deploy 2afbd8fb661f62a01e0940be38e70915fc3e32ea; fi"
> 服务器：["198.199.74.146"]
> 密码：
> [198.199.74.146] 执行命令
> ** [198.199.74.146 :: err]**致命：无法读取“ [https://xxx@bitbucket.org](https://xxx@bitbucket.org) ”的密码：**没有这样的设备或地址
> 密码：
> 命令在 7399 毫秒内完成
> **git checkout -q -b 部署 2afbd8fb661f62a01e0940be38e70915fc3e32ea；fi'" 在 198.199.74.146**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:54:19.067

您应该使用[rvm-capistrano](https://github.com/wayneeseguin/rvm-capistrano#readme) gem，它可以让您在部署期间访问 RVM 环境。

* * *

## 一个非常重要的注意事项：

您正在使用`root`用户进行部署，直接使用用户是一种不好的做法`root`，您应该考虑为每个应用程序使用一个新用户。

# javascript - 如何在 LocalStorage 中存储函数实例？

> ID：15987160
> 
> 赞同：2
> 
> 时间：2013-04-13T11:13:15.893
> 
> 标签：javascript, html, local-storage

我需要在 LocalStore 中存储一个函数的实例，例如：

```
function boo() {
   //blah blah
}
var instance = new boo(); //I need to store this variable 
```

如何`instance`在 LocalStorage 中存储变量？

**编辑：**

假设我需要在所有浏览器的选项卡/窗口中共享同一个函数实例，就像所有浏览器选项卡的单例一样。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T11:37:52.470

Attempting to store the function itself is unnecessary. The function is static code, not an instance of data and should be passed to the browser from your server.

Also, localStorage is separated by domain, so if your goal is to inject a function into a user's browser and then call it on other websites this is not possible. What you need for that is to create a browser plugin and submit it to the various stores.

The Javascript env per page is also not shared between tabs.

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-13T11:15:59.433

你能做的是

```
var instance = this["boo"]; 
```

这将保存函数，但会忽略上下文。所以你必须将上下文保存在一些单独的变量中，或者使函数独立于上下文并将`state`一些保存在哪里

保存整个上下文

```
var context = JSON.stringify(this);
now when you retrive it then just use eval
var context = eval(context);

instance.cal(context); 
```

# mysql - mySQL - 排序技术和排序

> ID：15987167
> 
> 赞同：-1
> 
> 时间：2013-04-13T11:14:23.200
> 
> 标签：mysql, sql, sorting, rating

我有一个包含图像列表的表格，并希望将它们排序为流行的图像序列。下面列出了表格，我想制作“目标列”，以便我对流行图像进行排序。

![sql_table](https://i.stack.imgur.com/tLxnG.png)

这是SQL代码：

```
SELECT imageID FROM  `ratings` WHERE rating > 3 ORDER BY imageID DESC 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:49:57.467

试试这个，使用计数和分组依据，这将计算重复的 ImageID：

```
SELECT count(*) as ct, imageID  
  FROM `ratings` 
 WHERE rating > 3 
 GROUP BY imageID
 ORDER BY ct 
```

# c# - 在 MVC 网站中使用来自 HttpModule 的重定向，“正确”的方式

> ID：15987169
> 
> 赞同：1
> 
> 时间：2013-04-13T11:14:24.163
> 
> 标签：c#, asp.net-mvc, httpmodule, response.redirect

*古时候：*

我们使用了 Response.Redirect，它设置 302 响应标头并引发 ThreadAbortException 以防止在重定向后发生其他任何事情。

*现在，使用 MVC：*

我们返回一个 RedirectResult，它避免了 ThreadAbortException 的性能问题，并且还允许管道的其余部分在实际将结果发送回浏览器之前检查结果。这是对重定向的另一种思考方式——现在不是停止执行，重定向更像是从函数返回。

我的问题与混合和匹配这些模式有关。

这是要求。我们有一个 MVC 站点，站点包含一个负责身份验证的 HttpModule。如果身份验证出现任何问题，它会丢弃 cookie 并重定向到**外部**网页。因此 HttpModule 决定是发送重定向标头还是将控制权传递给 MVC 站点。如果它发送重定向标头，它必须停止执行——如果身份验证失败，我们不希望该站点以任何方式、形状或形式可访问。

这样做的“正确”方法是什么？HttpModule 应该像我们一直做的那样简单地使用 Response.Redirect 吗？或者是否有一些更符合 MVC 模式的巧妙方法来实现这一点？HttpModule 有没有办法告诉管道停止处理？

或者我应该使用一些完全不同的模式，不使用 HttpModule 的东西？也许是 MVC 过滤器？问题是，模块和站点本身之间的模块化/关注点分离非常重要。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:59:54.447

以为我会在这里提出答案，以防其他人在类似的问题域中有问题。

答案其实很简单。

```
HttpContext.ApplicationInstance.CompleteRequest() 
```

上面的调用不再抛出 ThreadAbortException（这在 .NET 2.0 中发生了变化），因此您可以安全地使用它来告诉管道停止执行。当 HttpModule 退出时，适当的网站被绕过，控制直接转到 EndRequest——这正是我所需要的。这在 .NET 1.1 中是不可能的，但我认为没有很多 1.1 MVC 项目；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:19:50.333

由于您提到这是用于身份验证，因此您应该使用[Authorize Attribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx#deriving_from_authorizeattribute)。您可以在类级别或操作级别使用它。

```
[Authorize]
public class HomeController : Controller
{
    // All actions will require authorization
}

public class ImageController : Controller
{
    public ActionResult PublicImage()
    {
    }

    [Authorize]
    public ActionResult ImageRequiringAuth()
    {
    }
} 
```

对于您的用例，您可能需要从 AuthorizationAttribute 继承，如本[答案](https://stackoverflow.com/questions/746998/override-authorize-attribute-in-asp-net-mvc)中所述。

# java - 推文分析：如何设计

> ID：15987170
> 
> 赞同：0
> 
> 时间：2013-04-13T11:14:26.170
> 
> 标签：java, multithreading, twitter4j

在设计用于推文分析的系统时，我需要建议。

目标：对于给定的主题标签，找出与其他主题标签同时出现的频率。找出每小时模式。我们应该能够回答这种格式的查询：对于给定的日期（比如 2013 年 4 月 13 日）和给定的一小时时间段（比如下午 3:00-4:00），前 5 个同时发生的事件是什么带有“#iPhone”的标签。

我的方法：我正在使用“twitter4j”库来访问 twitter 数据。我可以为一个电话查询并获得 100 条推文（推特只允许这么多）。我可以提取时间和其他相关数据。我计划有一个线程，每 5 分钟查询一次 twitter。这是对观察者每小时模式进行的。这是我感到震惊的地方：我应该如何将这些信息存储在数据库中？我是否应该维护一个哈希图，其中键为和值作为“#iPhone”出现的频率。或者我应该将未聚合的数据直接存储在数据库中吗？向观察者每小时模式查询“twitter”的最佳方式是什么？我应该将时间以“纪元”格式存储在 DB 中还是作为日期一列和小时作为 DB 中的另一列？

非常感谢您的宝贵意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:30:00.973

我建议您[在 Twitter 中使用 Streaming API](https://dev.twitter.com/docs/streaming-apis)。这将允许您保持与 twitter 的持久 HTTP 连接，以便您可以搜索推文。Twitter 建议将[Streaming API](https://dev.twitter.com/docs/streaming-apis/streams/public)用于推文分析类型的应用程序。

但是您必须对某些数据进行预处理，以便分析更快。还要查看[twitter4j 固有的 Streaming API](http://twitter4j.org/en/code-examples.html#streaming)支持。

例如，请查看以下[Github 代码](https://github.com/yusuke/twitter4j/blob/master/twitter4j-examples/src/main/java/twitter4j/examples/stream/PrintSampleStream.java)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T18:16:16.223

正如ay89所说，使用key-tag和value-freq，在存储到数据库之前聚合，并使用epoch。

此外，由于这是一个多线程程序，您有两个同步选项：

选项 1 是使用[ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)。当聚合器运行时，它将使用：

```
(for Key key : hashMap.keySet()) {
    Database.save(key, hashMap.get(key));
    hashMap.replace(key, 0);
} 
```

换句话说，在将标签写入数据库后，将其频率设置为 0。添加推文数据的方法将使用

```
public void increment(Key key) {
    boolean done = false;
    while(!done) {
        int current = hashMap.get(key);
        int newValue = current + 1;
        done = hashMap.replace(key, current, newValue);
    }
} 
```

这是一种增加频率的线程安全方式。

选项 2 可能更有意义。您的聚合器将用新实例替换哈希图。

```
class DataStore {
    Map map = new HashMap();

    public void add(Key key, Value value) {
        // called by the method querying tweet data
    }

    public void aggregate() {
       // called by the aggregator thread every five minutes
       Map oldMap = map;
       map = new HashMap();
       DataBase.save(oldMap);
   }
} 
```

底线是您不想在聚合器将哈希图保存到数据库时以不受控制的方式修改哈希图。第二个选项更简单，因为它只是为查询线程创建一个新的哈希图以进行修改，而聚合器将旧的哈希图保存到数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:22:56.210

由于您只需要检索频率，因此最好将其存储在哈希中，（键 - 标记，值 - 频率）因为将非聚合数据存储在 db 中会占用更多空间（并且主要用于不需要的信息）和最终你将不得不在以后聚合它。

纪元时间是存储时间的好方法。因为您可以使用它来根据时区对其进行本地化，如果以后需要的话。

# ruby - 如何使用 ruby watir 获取标签的 src 属性

> ID：15987174
> 
> 赞同：3
> 
> 时间：2013-04-13T11:14:41.197
> 
> 标签：ruby, watir

```
<table>
  <tr>
    <td>hello</td>
    <td><img src="xyz.png" width="100" height="100"></td>
  </tr>
</table>

tabledata.rows.each do |row|
  row.cells.each do |cell|
    puts cell.text          
  end
end
puts "end" 
```

获取输出 ->

```
hello
end 
```

我应该怎么做这样的输出->

```
hello
xyz.png
end 
```

不使用 Nokogiri。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T12:14:32.057

**获取属性**

`Element#attribute_value`您可以使用该方法获取元素的属性。例如，

`element.attribute_value('attribute')`

对于许多标准属性，您还可以执行以下操作：

`element.attribute`

**输出单元格文本或图像文本**

假设一个单元格有文本或图像：

1.  您可以遍历单元格
2.  检查图像是否存在
3.  如果存在，则输出图像 src
4.  否则输出单元格文本

这看起来像：

```
tabledata.rows.each do |row|
  row.cells.each do |cell|
    if cell.image.exists?
      puts cell.image.src    #or cell.image.attribute_value('src')
    else
      puts cell.text
    end    
  end
end
puts "end" 
```

# c# - C# - 在 texbox 的运行时（实时）中使用 format.string 格式化特定数字

> ID：15987179
> 
> 赞同：1
> 
> 时间：2013-04-13T11:15:01.353
> 
> 标签：c#, runtime, live, string.format

当总长度 == 11 时，我编写了格式化数字的代码，它在 texbox 更改时运行，但只有在它有 11 个字符时才格式化，我想在运行时（实时）进行，明白吗？这是可能的 ？查看我的代码：

```
private void textBox3_TextChanged(object sender, EventArgs e)
        {

            Int64 cpf = Convert.ToInt64(textBox3.Text);
            if (textBox3.TextLength == 11)
            {
                textBox3.Text = string.Format(@"{0:000\.000\.000-00}", Convert.ToInt64(cpf));
            }
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:03:55.170

正如lazyberezovsky 所说，使用带掩码的文本框，但将[PromptChar](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.promptchar.aspx)设置为您想要的任何内容。类似于以下内容：

```
//In your form_load
//Based on your code above, assuming textBox3 is a MaskedTextbox    
textBox3.KeyUp += CheckEvent()
textBox3.Mask = "000000000000";
textBox3.PromptChar = 'x'; //set this to a space or whatever you want ' ' for blank!

//check AFTER every key press
private void CheckEvent(object Sender, KeyEventArgs e)
{
    if(textBox3.Text.Count() < 12)
    {
        return;
    }

    //change the textboxMask when all chars present
    maskedTextBox1.Mask = "0:000.000.000-00";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:51:33.747

考虑使用[MaskedTextbox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)`Mask`等于`000.000.000-00`。它将以通常的方式从左到右填充掩码。输入将如下所示：

```
___.___.___-__ 
```

当使用类型`1`时，它会显示`1__.___.___-__`. 当使用类型`12`时，它会显示`12_.___.___-__`. 等等。

# c++ - 按字母顺序排列的字符串数组

> ID：15987183
> 
> 赞同：2
> 
> 时间：2013-04-13T11:15:18.213
> 
> 标签：c++, arrays, sorting

我之前发过帖子，得到了一些很有帮助的回复。我需要将文本文件中的人员信息（例如 ID、年龄等）读入不同的数组中。记录是这样的 2012317109 Jamie Carles Smith Male 65（不同位的信息用TAB分隔，行以换行符结尾）

但是，关于 ID 号，我被告知使用提取运算符 (<<) 将 ID 号作为整数而不是字符串来获取。

然后我必须按字母字符串顺序对这些记录进行排序，然后将它们放入输出文件中。

到目前为止，我有以下内容。我应该如何进行？我不使用地图或矢量，我需要使用数组。

```
#include <iostream>
#include <fstream>
using namespace std;

void  selection_sort( double x[],  int  length)
{   
    int  i,  j,  k;
    double  t;

    for  (i=0;  i<length-1;  ++i)  {        
        k = i;       //find next smallest elm, x[k]

        for  (j=i+1;  j< length;  ++j)
            if  (x[k] > x[j])  k = j;

        //swap x[i] with x[k] 
        t = x[i];   x[i] = x[k];  x[k] = t;   
    }
}

int main () {

    ifstream fin;
    ofstream fout;

    fin.open("input.txt");
    fout.open("output.txt");

    if (fin.fail()) {
        cout << "Fail to open inout.txt" << endl;
        exit(1);
    }

    struct row{string ID, name, rest;};

    int x; 

    fout << x << endl;

    row *rows=new row[x];

    for (int i=0; i<x; ++i) {
        getline (fin, rows[i].ID,   '\t'); // ID
        getline (fin, rows[i].name, '\t'); // name
        getline (fin, rows[i].rest      ); 
    }

    selection_sort (row[], x); 
//complier error this line: expected primary expression before [ token.

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:58:29.833

最简单的方法可能是使用`std::sort`（从 header `<algorithm>`），并定义一个

```
bool operator<(row const& lhs, row const& rhs)
{
    // delegates to operator< for std::string
    return lhs.name < rhs.name;
} 
```

然后调用STL算法

```
// uses the above defined operator< for row objects
std::sort(rows, rows + x); 
```

然后写入排序后的输出。

# c - 这种分配风格是否明确定义？

> ID：15987184
> 
> 赞同：3
> 
> 时间：2013-04-13T11:15:18.307
> 
> 标签：c

我给出了一个示例来说明我在第 6 行中所指的分配样式。

```
 1 #include<stdio.h>
  2 
  3 int main(int argc,char *argv[])
  4 {
  5         int a,b,c;
  6         c = ({ a=5; b = a+1;});
  7         printf("%d\n%d\n%d\n",a,b,c);
  8         return 0;
  9 } 
```

我不确定它是什么。它`{}`不是数组中使用的初始化列表`int arr[]={1,2,3}`。

* * *

**更新：** 也许使用这种方法我可以在函数中定义一个函数，或者在 gcc 中定义一个错误（版本 4.7.2（Ubuntu/Linaro 4.7.2-2ubuntu1））

```
 1 #include<stdio.h>
  2 #include<math.h>
  3 int main(int argc,char *argv[])
  4 {
  5         int a,b;
  6         b = ({int cos(i){return 0;};a = 0;cos(a);});
  7         printf("%d\n%d\n",a,b);
  8         b = cos(0);
  9         printf("%d\n%d\n",a,b);
 10         return 0;
 11 } 
```

**输出：**

```
0
0
0
1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:17:48.607

```
({ a=5; b = a+1;}) 
```

是一个 GNU 扩展，一个[*表达式语句*](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)。这不是标准的C。

块中的语句被执行，块中最后一个表达式的值就是表达式语句的值。

所以

```
c = ({ a=5; b = a+1;}); 
```

设置`a`为 5，然后设置`b`为`a+1`(6)，然后`c`设置为该值。

* * *

关于更新，

```
b = ({int cos(i){return 0;};a = 0;cos(a);}); 
```

另外使用另一个 GNU 扩展，[嵌套函数](http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html#Nested-Functions)。在表达式语句的复合语句中，`cos`定义了一个嵌套函数，隐藏在 中`cos`声明的名称`math.h`，因此`cos(a)`复合语句中的最后一个表达式调用嵌套的局部定义。

在第 8 行，嵌套函数当然不在作用域内，所以

```
b = cos(0); 
```

调用来自 的那个`math.h`。

# python - 使用 PATCH 或 PUT 请求更新 Django Tastypie 多对多（自我）字段？

> ID：15987186
> 
> 赞同：1
> 
> 时间：2013-04-13T11:15:38.253
> 
> 标签：python, django, api, rest, tastypie

我有这个模型：

```
class UserSub(models.Model):
    user = models.OneToOneField(User, related_name='userSub')
    amigos = models.ManyToManyField('self', null=True)
    title = models.TextField() 
```

导入的 Django 用户模型。

以及以下资源：

```
class UserResource(ModelResource):
    usersub = fields.OneToOneField('test.api.UserSubResource', attribute = 'personal', related_name='user', full=True, null=True)    
    class Meta:
        object_class = User
        fields = ['username', 'first_name', 'last_name', 'password', 'email']
        detail_allowed_methods = ['get', 'post', 'put']
        authentication = Authentication()
        authorization = Authorization()
        queryset = User.objects.all()
        resource_name = 'users'
        excludes = ['id']

class UserSubResource(ModelResource):
    user = fields.OneToOneField('test.api.UserResource', attribute = 'user', related_name = 'userSub')
    amigos= fields.ToManyField('test.api.UserSubResource', attribute = 'amigos', null=True)      
    class Meta:
        object_class = UserSub
        fields = ['title']
        detail_allowed_methods = ['get', 'post', 'put', 'patch']
        authentication = Authentication()
        authorization = Authorization()
        always_return_data = True
        queryset = UserSub.objects.all()
        resource_name = 'usersub'
        excludes = ['id'] 
```

我正在尝试更新特定用户的朋友值。我的数据是：

```
usersub_json: {"amigos":["/api/v1/usersub/9/","/api/v1/usersub/8/"]}

$.ajax({
        url : 'http://127.0.0.1:8000' + usersub_uri,
                        type : 'PUT',
                        contentType : 'application/json',
                        data : usersub_json,
                        dataType : 'json',
                        processData : false,
                        error : function(http) {
                            if (http.responseText != "") {
                                alert(http.responseText);
                            }
                        }
                    }) 
```

我从 PUT 请求中得到“ **202 ACCEPTED** ”，并且朋友没有更新。

并且来自 PATCH 请求的“ **202 ACCEPTED** ”，并且朋友没有更新。

如果我在创建 usersub 时在第一个发布请求中添加朋友，它会成功地将它们添加到数据库中。但是如果我使用 PUT 或 PATCH 向数组添加更多内容，则不会更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T18:20:59.573

我不能确定它和你的情况一样，但我发现了我的问题。

让我稍微修改一下您的示例以反映我遇到的情况：

```
class UserResource(ModelResource):
    usersubs = fields.ToManyField('test.api.UserSubResource', attribute = 'usersubs', full=True, null=True)
    specialUsersub = fields.ToOneField('test.api.UserSubResource', attribute = 'special_user_sub', full=True, null=True) 
    class Meta:
        object_class = User
        fields = ['username', 'first_name', 'last_name', 'password', 'email']
        detail_allowed_methods = ['get', 'post', 'put']
        authentication = Authentication()
        authorization = Authorization()
        queryset = User.objects.all()
        resource_name = 'users'
        excludes = ['id']

class UserSubResource(ModelResource):
    amigos= fields.ToManyField('test.api.UserSubResource', attribute = 'amigos', null=True)      
    class Meta:
        object_class = UserSub
        fields = ['title']
        detail_allowed_methods = ['get', 'post', 'put', 'patch']
        authentication = Authentication()
        authorization = Authorization()
        always_return_data = True
        queryset = UserSub.objects.all()
        resource_name = 'usersub'
        excludes = ['id'] 
```

和请求：

```
PATCH /users/1/
{ "specialusersub" : { "id" : 3, "amigos" : ["/api/v1/usersub/9/","/api/v1/usersub/8/"] } } 
```

在我的情况下，这个问题是由于试图修补嵌套两层的 ToMany 资源，而父资源也存在于顶层的 ToMany 关系中。由于嵌套和资源上字段的顺序，操作的顺序是这样的：

1.  将 usersubs 水合到包中（及其嵌套关系 - 从数据库加载，在我们的例子中为空）
2.  将 specialUsersub 水合到包中（及其嵌套关系 - 包含在请求数据中）
3.  保存 specialUsersub（嵌套资源正确保存在这里）
4.  [此时，tastepie 应该检查它的任何水合资源是否被保存并重新水合捆绑包的适当部分，但它没有，所以：]
5.  保存 usersubs（如果 specialUsersub 的资源也存在于 usersubs 中，那么之前保存的内容将被第 1 步中 usersubs 水合时加载的过时数据覆盖）

更准确地说，因为 sweetpie 在用存储在包中的内容重新填充它们之前故意清除所有 m2m 关系，所以陈旧的数据破坏了新数据，在 3 中创建的朋友被删除并替换为在 1 中加载的 [] 空列表.

我仍在测试，但我认为解决方案/破解是确保您在任何您的美味派资源可能期望的地方包含更新的嵌套**资源**：

```
PATCH /users/1/
{ "usersubs" : [{ "id" : 3, "amigos" : ["/api/v1/usersub/9/","/api/v1/usersub/8/"] }], "specialusersub" : { "id" : 3, "amigos" : ["/api/v1/usersub/9/","/api/v1/usersub/8/"] } } 
```

显然这并不理想。如果我想出更合适的解决方案，我会告诉你的。

# oracle - oracle中如何修改数据类型？

> ID：15987192
> 
> 赞同：-1
> 
> 时间：2013-04-13T11:16:04.973
> 
> 标签：oracle, vb6

我的前端代码是：

```
PRIVATE SUB FORM_LOAD()
.Open SQL, CON, 1, 2
If .RecordCount > 0 Then
Combo4.Clear
.MoveFirst
Do While Not .EOF
Combo4.AddItem .Fields("ASSET_NAME").Value
Combo4.ItemData(Combo4.NewIndex) = .Fields("AID").Value
.MoveNext
Loop
Else
Combo4.Clear
End If
.Close
END SUB 
```

我的 Oracle 表如下所示：

```
SQL> DESC ASSET
 Name                                      Null?    Type
 -------------------------------- -------- -------------
 AID                                       NOT NULL NUMBER(38)
 ASSET_NAME                                         VARCHAR2(50)
 LOC_ID                                             NUMBER(38)
 UNIT                                               VARCHAR2(25)
 SUP_ID                                             NUMBER(38)
 BITT                                               VARCHAR2(5)

SQL> 
```

AID 是数据类型为 INT 的 ASSET 表的主键。但是在前端我得到一个运行时错误 `'6' OVERFLOW`。所以我决定改变 AID 列的数据类型。不幸的是，我收到了这个错误：

```
SQL> ALTER TABLE ASSET
  2  MODIFY AID DOUBLE;
MODIFY AID DOUBLE
            *
 ERROR at line 2:
     ORA-00905: missing keyword
SQL> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:07:09.000

`DOUBLE`不是 Oracle 数据类型，您可以使用`BINARY_DOUBLE`or `FLOAT()`。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#i45441)。

话虽如此，对于应该保存整数的东西来说，这也不是正确的选择。它们也是主键的错误选择。坚持`NUMBER`。

如果您遇到 VB 溢出错误，您可以降低精度。类似的东西`NUMBER(12,0)`（或任何为您的业务规则设置安全上限的值）。

请注意，我们不能更改填充列的数据类型，只能更改空列。

# c# - 设计应用程序范围的日志记录系统的指导方针是什么？

> ID：15987193
> 
> 赞同：2
> 
> 时间：2013-04-13T11:16:05.570
> 
> 标签：c#, design-patterns, logging, enterprise

我目前正在学习分层架构，我想知道如何将日志系统添加到这样的设计中。

现在假设我们有三层：

1.  表示层
2.  业务层
3.  数据访问层

并假设只有更高级别的层知道下面的一层。例如，表示层知道业务层，但反之则不然。

你应该在哪里实现一个通用的记录器类？

1.  如果我在不同的项目中实现它，这意味着所有层都依赖于一个公共程序集，这可能好也可能不好。虽然这可以通过依赖注入来克服。
2.  如果我在最高级别（在我们的例子中为表示层）实现它，它将违反单一职责原则。

什么是实现日志机制的好地方？

而在实施之后，有什么方法可以使用这样的系统呢？

1.  理想情况下，它应该能够捕获未捕获的异常并将异常描述保存在某处。
2.  你应该在哪里捕获异常？他们应该被捕获在最高层（表示层）吗？还是应该在其他地方抓到他们？
3.  将记录器传递给类的方法是什么？向项目中接受类似接口的所有内容添加方法/构造函数重载是否有意义`ILogger`？

正如你所看到的，我对这个主题很困惑，在我目前的工作中，没有人对企业应用程序设计/分层设计有任何了解，即使他们正在设计企业应用程序。因此，任何向我展示正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T23:18:23.593

日志记录是一个跨领域的关注点。这意味着它包含架构的所有层，并且将其作为一个单独的库来实现是有意义的。但是，这仅作为练习才有意义，因为已经有非常好的解决方案，例如 Log4Net、NLog，甚至 .NET 自己的 TraceSources。

我更喜欢那些支持分层日志的（例如 log4net）。这使得在生产系统中配置所需的跟踪级别变得更加容易。`MyApp.SomeNamespace`例如，您可以为to设置一般跟踪级别`Warning`，但也可以设置特定类型，例如`MyApp.SomeNamespace.AnInterestingClass`to `Debug`。

我不确定我是否理解“使用这种系统的方法是什么”部分。

您可以在任何需要它的地方、在应用程序的所有层、在需要它的每个方法中使用日志记录。我的印象是你有一个集中处理和记录所有错误的地方的想法，但这些是不同的事情。

> 理想情况下，它应该能够捕获未捕获的异常并将异常描述保存在某处。

不，不应该。记录器将内容写入日志，它们不处理异常。日志记录不仅仅用于报告错误。您还希望记录应用程序的执行和许多内部信息（但具有不同的跟踪级别），以便在生产或事后分析中对系统进行故障排除。

> 你应该在哪里捕获异常？

在各个层面。您代码中的许多方法将处理与当前上下文相关的异常。我想您真的想知道在哪里处理未在其他地方捕获的异常 - 某种包罗万象的处理程序。为此，通常在最顶层执行此操作是有意义的，即在您的 .exe 中，或者更一般地说，在包含代表应用程序本身的类型的层中执行此操作。有很多方法可以做到这一点 - 从简单地注册未处理异常 ( [ThreadException/UnhandledException](https://stackoverflow.com/questions/6114976/application-threadexception-vs-appdomain-unhandledexception) ) 的处理[程序到 ASP.NET MVC 中的 HandleError/Application_Error](http://www.codeproject.com/Articles/422572/Exception-Handling-in-ASP-NET-MVC#handleerrorvsapperror)到使用我个人不喜欢的[异常处理应用程序块](http://msdn.microsoft.com/en-us/library/ff650741.aspx)之类的东西（就像大多数企业库一样）。

> 将记录器传递给类的方法是什么？向项目中接受 ILogger 之类的接口的所有内容添加方法/构造函数重载是否有意义？

这取决于您的实施。看来您想沿着依赖注入路径走下去。由于 logger 不是基本依赖项（即它与类型的功能行为无关，而是与实现有关），我更愿意通过属性注入作为可选依赖项来处理它，而不是通过 IMO 应该的构造函数来处理它仅用于主要依赖项 - 类型正常运行所需的依赖项。

但是，您可能不想使用 DI。然后你需要一些其他的方法来获取记录器。[这里](https://stackoverflow.com/questions/15377858/suggest-design-almost-every-object-in-app-has-loggger/15380472#15380472)讨论一种选择。

# rss - EXT： RSS提要中的tt_news

> ID：15987201
> 
> 赞同：1
> 
> 时间：2013-04-13T11:18:09.833
> 
> 标签：rss, typo3, tt-news

我正在尝试通过 TYPO3 中的 tt_news 设置 RSS 提要：http: [//www.familieistzukunft.ch/home/? type=100](http://www.familieistzukunft.ch/home/?type=100)

RSS 提要中的链接不是正确的 HTML。他们像这样出现：

```
<link http://www.familieistzukunft.ch/details/...80780691f/ - external-link-new-window "Opens external link in new window">Kommentar</link> 
```

我做了这样的模板：

```
<content:encoded> <![CDATA[###NEWS_CONTENT###]]> </content:encoded> 
```

那么为什么 CDATA 标签没有帮助呢？我该如何解决？

这是我的打字稿：

```
# RSS2
rss2 = PAGE
rss2 {
    typeNum = 100
    10 >
    10 < plugin.tt_news
    10.pid_list >
    10.pid_list = {$plugin.tt_news.pid_list}
    10.singlePid = {$plugin.tt_news.singlePid}
    10.defaultCode = XML
    10.displayXML.xmlFormat = rss2
    #wenn man archivierte News nicht mehr RSSen will
    10.archive = -1
    config {
        disableAllHeaderCode = 1
        additionalHeaders = Content-type:text/xml
        no_cache = 1
        xhtml_cleaning = 0
    }
}
#RSS 0.91
rss091 = PAGE
rss091 < rss2
rss091 {
    typeNum = 101
    10.displayXML.xmlFormat = rss091
}
#RDF
rdffeed = PAGE
rdffeed < rss2
rdffeed {
    typeNum = 102
    10.displayXML.xmlFormat = rdf
    #RDF kennt auch Feed-Images
    10.displayXML.xmlIcon = fileadmin/images/rdf.gif
}
#Atom
atom1 = PAGE
atom1 < rss2
atom1 {
    typeNum = 103
    10.displayXML.xmlFormat = atom1
}

page.headerData.110 = HTML
page.headerData.110.value = <link rel="alternate" type="application/rss+xml" title="News" href="http://www.familieistzukunft.ch/index.php?id=32&type=100"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T09:35:06.740

我遇到了同样的问题并使用以下代码解决了它：

```
rss.10.displayXML {
xmlFormat = rss2
content_stdWrap {
  stripHtml = 0
  htmlSpecialChars = 0
  parseFunc < lib.parseFunc_RTE
  parseFunc.nonTypoTagStdWrap.encapsLines.nonWrappedTag >
} 
```

}

这个想法是相同的，但使用`content_stdWrap`而不是`bodytext_stdWrap`. 就我而言，我在使用`htmlSpecialChars.preserveEntities = 1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:08:48.807

看起来，您只是将原始内容从 DB 放入 ###NEWS_CONTENT### 标记。

您应该使用`pi_RTEcssText($rawContent);`from`tslib_pibase`类将所有原始内容转换为正确的 HTML。

# python - Python 字典键作为一组数字

> ID：15987208
> 
> 赞同：6
> 
> 时间：2013-04-13T11:18:51.403
> 
> 标签：python, dictionary, key, minmax

我想在python中构造一个字典，其键是0到1之间的最小/最大值对。例如：

```
myDict = {(0, .5): 'red', (.5, 1): 'orange'} 
```

我希望能够使用集合 [min, max) 中*的数字调用字典中的条目。*

```
>>> myDict[.464897]
'red'
>>> myDict[.5]
'orange' 
```

我觉得可能有一个很好，简单的方法来做到这一点。不过，这是难以捉摸的，因为我还在我的蟒蛇尿布里。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T11:28:15.850

假设间隔不重叠，则没有间隙并且它们已排序，您使用二进制搜索：

```
>>> keys = [0.5, 1] # goes from 0 to 1, specify end interval
>>> vals = ['red', 'orange']
>>> import bisect
>>> vals[bisect.bisect_right(keys, 0.464897)]
'red'
>>> vals[bisect.bisect_right(keys, 0.5)]
'orange' 
```

# prolog - 使用 =.. 谓词在 Prolog 中执行 furmulas 的符号操作

> ID：15987209
> 
> 赞同：-1
> 
> 时间：2013-04-13T11:18:55.237
> 
> 标签：prolog

我正在使用 SWI Prolog 为大学考试学习 Prolog **，** *我对使用***univ** **=..** `=..`谓词执行*公式*的符号操作的练习有一些疑问，其中频繁操作是*用另一个替换***某些**子表达式表达。

 ******它执行定义以下关系：

**替代物（子术语，术语，子术语 1，术语 1）**

如果 Term1 **rappresent** *表示*其中所有出现的 SubTerm 都被 SubTerm1 替换的 Term 表达式，则为 TRUE。

例如，如果我有：

**替代物(sin(x), 2*(sin(x)), t, F)。**

然后：**F = 2*t*f(t)**因为所有的 sin(x) 出现都被 t 代替

这是解决方案（在 Bratko 书中找到），但我不太确定我的解释：

```
% substitute( Subterm, Term, Subterm1, Term1)
% Term1 is Term with all occurrences (by matching)
% of Subterm are replaced by Subterm1.
% Test: ?- substitute( b, f(a,b,c), e, F).
% Test: ?- substitute( b, f(a,X,c), e, F).
% Test: ?- substitute( b, f(a,X,Y), e, F).
% Test: ?- substitute( a+b, f( a, A+B), v, F).
% Test: ?- substitute(b,B,e,F).
% Test: ?- substitute(b,b,e,F).
% Test: ?- substitute(b,a,e,F).

% Logic, there are three cases:
% If Subterm = Term then Term1 = Subterm1
% otherwise if Term is 'atomic' (not a structure)
%   then Term1 = Term (nothing to be substituted)
%   otherwise the substitution is to be carried
%     out on the arguments of Term.

/* Case 1: SubTerm = Term --> SubTerm1 = Term1 */
substitute(Term, Term, Term1, Term1)  :-  !.

% Case 2: Se Term è atomico non c'è niente da sostituire
substitute( _, Term, _, Term)  :- atomic(Term), !.

/* Case 3: 
substitute(Sub, Term, Sub1, Term1)  :-
   Term  =..  [F|Args],                    % Term è composto da: F è il FUNTORE PRINCIPALE ed Args è la lista dei suoi argomenti
   substlist(Sub, Args, Sub1, Args1),      % Sostituisce Sub1 al posto di Sub nella lista degli argomenti Args generando Args1
   Term1  =..  [F|Args1].                  % Term1 è dato dal FUNTORE PRINCIPALE F e dalla nuova lista degli argomenti Args1

/* sublist: sostituisce all'interno della lista degli argomenti: */

substlist(_, [], _, []).

substlist(Sub, [Term|Terms], Sub1, [Term1|Terms1])  :-

    /* L'elemento in testa Term1 corrisponde all'eventuale sostituzione */
    substitute(Sub, Term, Sub1, Term1),

    /* Il problema è già risolto per le sottoliste e Terms1 rappresenta la sottolista Terms in cui tutte le occorrenze di Sub
       sono già state sostituite con Sub1:
    */
        substlist(Sub, Terms, Sub1, Terms1). 
```

第一条规则**rappresent** *表示***SubTerm = Term**的特殊情况，因此最终的**Term1=SubTerm1**（因为我**替换** *替换*整个术语）

第二条规则**rappresent** *表示***Term 是原子**的特殊情况，因此，无论 SubTerm 和 SubTerm1 的值如何，我都不执行任何替换

我认为到这里为止它很简单，我的推理是正确的......接下来是更困难的部分，我不太确定......

规则：

```
substitute(Sub, Term, Sub1, Term1)  :-
   Term  =..  [F|Args],                    
   substlist(Sub, Args, Sub1, Args1),      
   Term1  =..  [F|Args1]. 
```

**rappresent** *表示*一个一般情况，其中我有一个由**Term***表示的表达式***rappresent** ，其可能的子表达式**由Sub***表示*，一个新的子表达式**Sub1**，当您遇到**Sub**和表达式**Term1**时，它最终应该被替换为Term 表达式，其中所有出现的 SubTerm 都被 SubTerm1 替换。

 ********所以我可以以这种方式以声明**方式** *阅读*它：

**如果以下事实为 TRUE，则 Term1 rappresent*表示*其中所有出现的 SubTerm 都被 SubTerm1 替换的 Term 表达式为 TRUE**：

1）原始表达式**Term**可以分解为一个列表，该列表的头部具有其**主函子 F**（在表达式评估中执行的第一个运算符），然后是一个子列表**Args**，它**表示该函子 F 的参数**（我认为，在在某些情况下，Args 还可以包含其他函子，在这个计算步骤中，它们不是主要的函子......所以在这些情况下仍有一些子问题需要解决）

2) substlist(Sub, Args, Sub1, Args1) 是真的，这意味着Args1 rappresent Args 是真的，其中所有的参数等于Sub 子表达式被Sub1 子表达式替换。

3）最后，新的**Term1**必须是univ **=..**谓词 beetwen 主函子 F 和新参数列表**Args1**的结果（我认为 =.. 重新组合主函子 F 和新参数列表

为了执行参数列表中的替换，它使用了**substlist**关系，它被分为：

基本案例：

```
substlist(_, [], _, []). 
```

简单地说：如果参数列表中没有任何内容，则没有可替换的内容

一般情况：

```
substlist(Sub, [Term|Terms], Sub1, [Term1|Terms1])  :-

    /* L'elemento in testa Term1 corrisponde all'eventuale sostituzione */
    substitute(Sub, Term, Sub1, Term1),

    /* Il problema è già risolto per le sottoliste e Terms1 rappresenta la sottolista Terms in cui tutte le occorrenze di Sub
       sono già state sostituite con Sub1:
    */
        substlist(Sub, Terms, Sub1, Terms1). 
```

这对我来说是更难理解的部分，我以以下方式看待它，声明式阅读：

**如果满足以下条件，则 [Term1|Terms1] 表示参数列表 [Term|Terms]**是正确的，其中所有子项都被 Sub1 替换：

1）substitute(Sub, Term, Sub1, Term1)：这意味着 Term1（新参数列表的头部是 Term（旧参数列表的头部）是 TRUE，其中 if Term == Sub -- -> Term1 == Sub1

2）substlist（Sub，Terms，Sub1，Terms1）这意味着所有的子问题都解决了，我认为这是一个重要的点，因为参数列表**Term**是当前主仿函数F的参数列表，但里面可以包含其他子仿函数它和这些 rap 中的每一个都代表了一个子问题，在此步骤中执行 Sub--> Sub1 替换之前必须解决该子问题。

但我不太确定这最后一件事......

有人可以帮助我深入了解它

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:12:18.533

首先让我说，如果你的问题简短而中肯，那就太好了。Stackoverflow 的整体理念是问题和答案稍后会对其他人有用，而写出好的问题是其中很大一部分。

继续前进：所有编程语言都有权声称程序的实际源代码是对程序功能的最清晰、完整和详尽的解释（对人类而言）。Prolog*绝对*有权获得该声明。这需要一点时间来适应，但很快，一个写得很好的谓词确实能更多地说明程序逻辑，而不是用一种固有的模棱两可的自然语言给出精确的规范/定义，无论是英语、意大利语还是什至是徒劳的德语。

现在回答你的问题...

做什么`=../2`？我们可能会看[这里](http://www.swi-prolog.org/pldoc/doc_for?object=%28=..%29/2)，但简而言之，我们`f(a,b, ..., x)`在左侧和`[f, a, b, ..., x]`右侧都有。

假设递归、列表、匹配和统一不需要在这里解释，您已经广泛研究、用意大利语评论并用英语向我们彻底解释过的程序做了一件简单的事情：所有出现的*Subterm* in *Term*都替换为*Subterm1*在*Term1*。

这个完成了：

*   通过匹配直接替换简单项（原子）
*   通过将复杂项（形式`f(Args)`）分解为列表（使用`=..`），然后将算法递归地应用于该列表中更简单的项（ 的元素`Args`）。之后，列表被重新组合，`=..`再次使用。

因此，如果您有一个嵌套术语，您仍然会得到：

```
?- substitute(x, f( g( h(x,y,z), h(k,l,m) ), g(x,z) ), q, T).
T = f(g(h(q, y, z), h(k, l, m)), g(q, z)) ;
false. 
```

在这里可能遇到的唯一轻微困难是，`substitute`并且`substlist`是相互递归的。如果这给您带来了很大的困难，您可以尝试做的一件事是从谓词定义中删除所有注释，一次将整个程序放在屏幕上（或打印出来），然后查看并考虑它直到有意义为止。有用！**************

# java - 错误代码 500 的 Tomcat 7 中的自定义错误页面

> ID：15987212
> 
> 赞同：16
> 
> 时间：2013-04-13T11:19:26.640
> 
> 标签：java, tomcat, servlets

伙计们，我正在努力解决在 Windows 环境中的 Tomcat 中打开我的自定义错误页面的问题。我得到了一些解决方案，但没有运气。我尝试了几乎所有的链接，但它对我不起作用。其中一些适用于部署在 Tomcat 中的其他解决方案，但不适用于我的 Web 服务

我的*web.xml*

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<error-page>
    <location>/error.html</location>
</error-page> 
```

我从我的 Servlet 3.0 应用程序发送错误 `response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);`

我已将*error.html*放在我的 WebService 的根目录中。

我为 JSP 页面而不是我也尝试过的 HTML 获得的一些链接

在 JSP 的情况下，我使用：

```
<%@ page isErrorPage="true" %>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <h1>Error</h1>
</body>
</html> 
```

仅供参考，它适用于其他 Tomcat 内置解决方案，它运行良好。但在我的*Web 服务*中，我收到响应 500，但页面打开为空白。还有一件事我禁用了我的 Internet Explorer 9.0 显示错误友好页面仍然响应来自 servlet 的 500。但是错误页面是空的。

如果对我的查询有任何想法或疑问，请告诉我。我需要它尽快。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-13T14:55:00.340

尝试将以下代码段放入您的`WEB-INF/web.xml`

```
<error-page>
    <error-code>500</error-code>
    <location>/Error.jsp</location>
</error-page>

<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/Error.jsp</location>
</error-page> 
```

在这种情况下，与目录`Error.jsp`处于同一级别`WEB-INF`（不在其中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-15T14:43:35.410

如果您使用嵌入式 Tomcat，则可以以编程方式实现相同的功能，例如：

```
 Context appContext = ...            
        ErrorPage errorPage = new ErrorPage();
        errorPage.setErrorCode(HttpServletResponse.SC_NOT_FOUND);
        errorPage.setLocation("/my_custom_error_page.html");
        appContext.addErrorPage(er); 
```

# host - 提供商托管的应用程序的 SharePoint 2013 未经授权的异常

> ID：15987216
> 
> 赞同：0
> 
> 时间：2013-04-13T11:19:42.993
> 
> 标签：host, provider, sharepoint-2013

对于 SharePoint 2013 的提供商托管应用程序，我在主机端收到“未经授权”异常。

```
Uri hostWeb = new Uri(Request.QueryString["SPHostUrl"]);
using (var clientContext = TokenHelper.GetS2SClientContextWithWindowsIdentity(hostWeb, Request.LogonUserIdentity))
{
    clientContext.Load(clientContext.Web, web => web.Title);
    clientContext.ExecuteQuery();
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
} 
```

证书已安装，匿名访问被禁用。我无法理解这个问题的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-18T21:19:10.833

我之前遇到过完全相同的问题......我通过实施 OAuth 解决了它，并让它重定向到具有“写入”权限的应用程序主页。Response.Redirect(TokenHelper.GetAuthorizationUrl("mysharepoint.com", "Web.Write", "myapp.com/default.aspx"));

基本上，它的作用是使用您的共享点站点对登录用户进行身份验证，一旦通过身份验证，它将重定向（具有写入权限）到您的应用程序站点。

以下是如何实现 OAuth： http: [//msdn.microsoft.com/en-us/library/office/jj687470 (v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/jj687470(v=office.15).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T18:34:05.700

看起来这是高信任应用程序。如果您已经用尽了[http://msdn.microsoft.com/en-us/library/fp179932.aspx](http://msdn.microsoft.com/en-us/library/fp179932.aspx)上的提示，那么就会出现格式错误的 SPTrustedSecurityTokenIssuer。您可以使用下面的 PS 找出所有这些。理想情况下，它应该是 IssuerId@Realm。如果有一个不是，则将其删除。但请记住不要删除第一个用于工作流的

获取 SPTrustedSecurityTokenIssuer | 选择名称，注册发行人名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T06:52:28.187

首先，您必须检查“Request.LogonUserIdentity”中的用户。实际上，当您的用户无法在 IIS 中访问您的站点时，就会发生这种情况。因此要在“Request.LogonUserIdentity”中设置正确的用户，请按照以下步骤操作：

打开您的 IIS --> 身份验证 --> 匿名身份验证 --> 编辑 --> 特定用户 [您在“Request.LogonUserIdentity”中获得的用户]。--> iis 重置

现在用户有权访问您的 IIS 站点。

# macos - 挂载命令在 10.7.5 上失败

> ID：15987225
> 
> 赞同：0
> 
> 时间：2013-04-13T11:20:36.213
> 
> 标签：macos, bash, shell, mount

我有一个安装 smb 共享的 shell 脚本。它在除 10.7.5 之外的每个 OS 版本的所有 Mac 上都能完美运行 有问题的命令很简单：

```
mount -t smbfs -o nobrowse //test:test@servername/sharename /my/mnt/point 
```

当我在 10.7.5 mac 上尝试此命令时，它会因“管道损坏”或“身份验证失败”错误而失败。但是，它在运行 10.7.4、10.6、10.8 等的 Mac 上运行良好。

任何人都可以在 10.7.5 上成功使用此命令吗？有没有其他方法可以实现这一点，或者解决这个错误发生的确切原因？我的想法不多了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:21:04.487

安装不工作的原因有很多。其中一些原因包括：

*   服务器和客户端之间的时间相差太大
*   mac 上未指定工作组名称
*   本地主机名使用非拉丁字符
*   mac和服务器之间的加密太严格了

解决时间；设置时间。

当您不使用工作组名称进行连接时，我经常看到损坏的管道/身份验证错误。看起来像的连接字符串通常比没有任何工作组的连接字符串效果更好：

```
//WORKGROUP;user:50000@192.168.2.1/Share 
```

...假设`50000`是用户用户的密码，用户应该允许连接。一般来说，你只需要在分号前加一个字符串，它就可以读取任何内容；它只需要在那里。

要解决本地主机名问题，请单击一个界面，选择`advanced`转到`WINS`选项卡并确保名称中没有任何外来字符。

如果加密过于严格，您将需要编辑[`nsmb.conf`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/nsmb.conf.5.html). 我有一组看起来像的行：

```
[server1]
minauth=none 
```

对于无法处理加密密码的古老 BSD 服务器。您可以在一个`/etc/nsmb.conf`或`~/Library/Preferences/nsmb.conf`文件中拥有它。

这可能无法解决您的问题，但它可能会帮助您尝试继续。

不幸的是，说它适用于框 x 而不是框 y 并没有真正帮助，因为它们之间可能存在任意配置差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T12:09:34.380

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

感谢您的回复。问题有两个方面：首先，由于某种原因，您无法在 10.7.5 中以 root 身份运行此命令，其次您无法在`/Volumes`. 奇怪的是，这似乎适用于所有其他操作系统版本。我通过安装我的共享`/Volumes`然后创建一个指向所需安装点的符号链接来解决这个问题：

```
mkdir -p /Volumes/share 
sudo -u localadminuser mount -t smbfs -o nobrowse //user:pass@server/share /Volumes/share 
ln -s /Volumes/share /location/that/I/prefer/to/mnt 
```

我希望这可以帮助某人。不知道为什么 10.7.5 会改变这一点。– BSUK

# sql - 如何在solidDB中使用to_char

> ID：15987227
> 
> 赞同：0
> 
> 时间：2013-04-13T11:20:41.933
> 
> 标签：sql, oracle

当我想将月份更改为名称时，如何在solidDB 中使用 to_char 有什么想法吗？04-4月？此查询在 Oracle 上运行良好：

```
select to_char(AddDate, 'mon'), count(*) from firma group by to_char(AddDate, 'mon');
< mar, 77250 >
< nov, 71802 >
< oct, 77520 >
< jan, 77391 >
< jul, 77361 >
< apr, 74872 >
< jun, 74885 >
< feb, 70482 >
< aug, 77397 >
< sep, 74870 >
< dec, 68732 >
< may, 77418 > 
```

针对solidDB 运行的相同查询生成：

```
MONTH               COUNT(*)
-----               --------
mon                   900000 
```

因此，它为我提供了表中所有行的结果，而无需将其拆分为不同月份的名称。如何在solidDB 中获得与Oracle 相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:31:22.703

针对 Oracle 数据库使用 Oracle 语法。

针对 SolidDB 数据库使用[SolidDB 语法。](http://publib.boulder.ibm.com/infocenter/soliddb/v6r3/index.jsp?topic=/com.ibm.swg.im.soliddb.sql.doc/doc/solid.sql.syntax.html)

# github - 如何将问题放到“问题”条目已关闭的存储库中？

> ID：15987231
> 
> 赞同：0
> 
> 时间：2013-04-13T11:21:03.403
> 
> 标签：github, issue-tracking

我的老板通过一个 Github 存储库给了我一个任务，其中只包含一个自述文件。该文件要求我分叉项目和“***关于该功能的任何不清楚，在 github 上引发问题***”。我已经分叉了项目并且原始存储库上的“问题”条目已关闭，那么我怎样才能创建一个新问题并让我的老板注意到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:21:27.983

如果您提出新问题，您只需在问题表单中输入他/她的用户名即可在问题中标记您的老板。您的老板将被标记为该问题的参与者

所以你的问题看起来像这样。

> 这里有一些问题
> 
> @your_boss_username

# c# - 通过代码添加应用程序监听器

> ID：15987232
> 
> 赞同：0
> 
> 时间：2013-04-13T11:21:04.917
> 
> 标签：c#, wcf, configuration, app-config

我想把所有东西都转换成 C# 代码。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.diagnostics>
    <sources>
      <source propagateActivity="true" name="System.ServiceModel" switchValue="Warning">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="NewListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Warning,ActivityTracing" >
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="NewListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="Trace.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
          name="NewListener" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
        <filter type="" />
      </add>
    </sharedListeners>
  </system.diagnostics>

 </configuration> 
```

此配置所做的是将所有异常**自动**记录在一个文件中，我不需要为此编写代码。我正在寻找一种简单的方法来将我的异常记录到 svclog 文件中，直到客户端将其发送给我进行调试**但**我想删除 app.config 并为此使用 C# 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T06:34:02.530

我搜索了很多，所以我们不能自动做到这一点，但这是一个很好的方法：

```
public static class myClass
{

    [XmlRoot("Exception"), System.Xml.Serialization.XmlType("Exception")]
    public class exception
    {
        public exception()
        {
            ExceptionType = "";
            appDomain = "";
            Message = "";
            StackTrace = "";
            ExceptionString = "";
            InnerException = null;
            HelpLink = "";
            TargetSite = "";
            Source = "";
        }

        internal exception(Exception ex)
        {
            ExceptionType = ex.GetType().ToString();
            appDomain = AppDomain.CurrentDomain.FriendlyName;
            Message = ex.Message;
            StackTrace = ex.StackTrace == null ? " - " : ex.StackTrace.ToString();
            HelpLink = ex.HelpLink == null ? " - " : ex.HelpLink.ToString();
            TargetSite = ex.TargetSite == null ? " - " : ex.TargetSite.ToString();
            Source = ex.Source == null ? " - " : ex.Source.ToString();
            ExceptionString = ex.ToString();
            if (ex.InnerException != null)
                InnerException = new exception(ex.InnerException);
        }

        [XmlElement("ExceptionType")]
        public string ExceptionType { get; set; }
        [XmlElement("AppDomain")]
        public string appDomain { get; set; }
        [XmlElement("Message")]
        public string Message { get; set; }
        [XmlElement("StackTrace")]
        public string StackTrace { get; set; }
        [XmlElement("ExceptionString")]
        public string ExceptionString { get; set; }
        [XmlElement("HelpLink")]
        public string HelpLink { get; set; }
        [XmlElement("TargetSite")]
        public string TargetSite { get; set; }
        [XmlElement("Source")]
        public string Source { get; set; }
        [XmlElement("InnerException")]
        public exception InnerException { get; set; }
    }

    private static System.Diagnostics.TraceSource TraceLogger { get; set; }

    static myClass()
    {
        var xml = new System.Diagnostics.XmlWriterTraceListener(System.IO.Directory.GetCurrentDirectory() + "\\ApplicationTrace.svclog");
        xml.TraceOutputOptions = System.Diagnostics.TraceOptions.Callstack | System.Diagnostics.TraceOptions.DateTime | System.Diagnostics.TraceOptions.LogicalOperationStack | System.Diagnostics.TraceOptions.ProcessId | System.Diagnostics.TraceOptions.ThreadId | System.Diagnostics.TraceOptions.Timestamp;

        TraceLogger = new System.Diagnostics.TraceSource("TraceLogger");
        TraceLogger.Switch.Level = System.Diagnostics.SourceLevels.All;
        TraceLogger.Listeners.Add(xml);

        TraceLogger.Flush();
        TraceLogger.Close();

    }

    private static void WriteException(Exception ex)
    {
        using (var writer = new StringWriter())
        {
            exception ee = new exception(ex);
            System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(ee.GetType());
            x.Serialize(writer, ee);
            var xmlEncodedList = writer.GetStringBuilder().ToString();
            XmlTextReader myXml = new XmlTextReader(new StringReader(xmlEncodedList));

            XPathDocument xDoc = new XPathDocument(myXml);
            XPathNavigator myNav = xDoc.CreateNavigator();
            TraceLogger.TraceData(System.Diagnostics.TraceEventType.Error, 0, myNav);
            TraceLogger.Flush();
        }
    }

    public static void HandleExceptions(Exception ex)
    {
       //do some thing then log
            WriteException(ex);
    }
} 
```

您的应用程序中发生的每个错误都可以调用此方法，也可以使用 application.DispatcherUnhandledException 事件来捕获错误。

* * *

我们创建一个可以使用 xmlSerialization 进行序列化的异常类，然后我们有一个静态跟踪源来记录我们的异常。

# java - 在德国打发时间 - Android

> ID：15987235
> 
> 赞同：4
> 
> 时间：2013-04-13T11:21:20.320
> 
> 标签：java, android

无论用户的位置和当前设备时间如何，如何获取德国的当前时间？

```
 Calendar buttoncal = Calendar.getInstance();
    String tdate = new SimpleDateFormat("dd.MM",Locale.GERMANY).format(buttoncal.getTime());
    String tday  = new SimpleDateFormat("EEEE",Locale.GERMANY).format(buttoncal.getTime());

    one_date.setText(tdate.toString());
    one_day.setText(tday); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:25:45.273

您可以指定需要使用的时区：

```
Calendar c = Calendar.getInstance(TimeZone.getTimeZone("Europe/Berlin")); 
```

有关可用时区的列表：`TimeZone.getAvailableIDs()`。

注意： 中的语言环境`SimpleDateFormat`用于读取/格式化该语言环境中的字符串 - 例如，使用德语语言环境将以德语打印月份/日期名称。但这与时区无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:18:30.050

尝试使用这个：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm", Locale.GERMANY); 
Date date = new Date();
dateFormat.format(date); 
```

您将获得格式为“yyyy-MM-dd HH:mm”的“日期”。然后您可以使用 .split() 以空格作为分隔符来拆分返回的字符串格式。就像是：

```
String[] str_array = date.toString().split(" ");
String time = str_array[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:26:20.023

[正如我在这里建议的](https://stackoverflow.com/a/16037436/1856738)那样，使用[android.text.format.Time](http://developer.android.com/reference/android/text/format/Time.html)代替。

# c - 我们如何限制用户输入字符以及大于 C 中指定长度的整数？

> ID：15987237
> 
> 赞同：-2
> 
> 时间：2013-04-13T11:21:44.360
> 
> 标签：c, stdio

我正在尝试创建一个关于 OTP（One Time Pad）加密的 C 程序。该程序从用户那里获取一个要加密的字符串。然后它必须在获取密钥之前询问密钥的长度（整数）。由于我希望程序 100% 正确，因此我对密钥的长度进行了限制。我们知道，在 OTP 中，密钥的长度必须是整数，不能超过文本的长度。那么，我们如何实现这样的过滤器呢？我已经尝试创建代码，但它不工作。

这是代码：

```
//An Under-Construction program to implement OTP (One time Pad) encryption     
#include "stdio.h"
#include "cstring"
#include "ctype.h"
int main()
{
    char str[10000], key[10000];
    printf("Enter the string:- ");
    scanf("%[^\n]", str); //stops scanning when user presses return

    int len /* stores the number of digits of the OTP key*/, isalphabet=0;
        do
        {
            printf("What is the length of the key you are entering?:-");
            scanf("%d", &len);

            if( isalpha(len) ) // Checks if len is a character
            {
                isalphabet=NULL; //isalphabet becomes NULL if it is a character and not an integer
            }

        } while (len > strlen(str) || isalphabet == NULL); //reiterate the loop until the conditions are satisfied

        for(int i = 0; i < len; i++)
    {
        printf("%dth digit of Key= ", i+1);
        scanf("%d", &key[i]);
    }
    return(0);  
} 
```

我希望程序在扫描“len”时仅从用户那里获取整数值，并且“len”的值不应超过要加密的字符串的长度，如果不满足这些条件，请重复循环。有人可以指出我的错误并展示解决方案吗？另外，请向我解释为什么代码不能正常工作的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:56:29.287

检查`scanf("%d", len);`是否有`&`遗漏的地方？也初始化`len`

更新：-抱歉迟到了，好吧，实际上您需要纠正的地方很少，抱歉我没有在第一篇文章中指出它们。

1) 更正标题包含分隔符。使用`<stdio.h>`代替`"stdio.h"`

2) 初始化`len = 0`

3）阅读后刷新标准输入。如果您真的输入了一个字符，`scanf(%d,&len)`则不会清除它/读取它。因此，由于字符卡在标准输入中，您将陷入无限循环。最后一个 for 循环也是如此。幸运的是，您不会被卡住，但循环会过早结束。

4) `isalphabet=NULL`, isalphabet 是 int，NULL 基本上是一个 0x0 值的 void 指针，你应该将 0 分配给一个 int。

5）所以你进入了 isalphabet=0 的循环，数字不是字母，你没有触摸 isalphabet，并且 while 循环结束`isalphabet==NULL`，这里也许它会以 true 运行，然后 while 循环再次开始。那么循环中断条件何时设置为`isalphabet`？

6）为什么还要使用`cstring`in c 代码？为什么不`string.h`（但这更多是个人选择:)）

`len > strlen(`7 )更正`len >= strlen`

我编辑了一点，检查它是否有效

```
//An Under-Construction program to implement OTP (One time Pad) encryption     
#include <stdio.h>
#include <string.h>
#include <ctype.h>
int main()
{
    char str[10000], key[10000];
    printf("Enter the string:- ");
    scanf("%[^\n]", str); //stops scanning when user presses return

    int len /* stores the number of digits of the OTP key*/, isalphabet=0;
        do
        {
            printf("What is the length of the key you are entering?:-");
            scanf("%d", &len);
            fflush(stdin);

            if( isalpha(len) ) // Checks if len is a character
            {
                isalphabet=1; //isalphabet becomes NULL if it is a character and not an integer
            }

        } while (len >= strlen(str) || isalphabet == 1); //reiterate the loop until the conditions are satisfied

        int i;
        for(i = 0; i < len; i++)
    {
        printf("%dth digit of Key= ", i+1);
        scanf("%d", &key[i]);
    }
    return(0);  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:56:43.247

首先，scanf("%d", len); 应该

```
scanf("%d", &len); 
```

strlen(str) 返回长度，比较应该是

```
len > (strlen(str) -1) 
```

和 if 是否为 alpha 的比较可以在 while 循环内完成。检查此代码。

```
#include "stdio.h"
#include "string.h"
#include "ctype.h"

#define TRUE 1
#define FALSE 0

int main()
{
    char str[10000];
    char key[10000];

    printf("Enter the string:- ");
    scanf("%[^\n]", str); //stops scanning when user presses return

    int len = 0;
    int isalphabet= TRUE;
    int apply = 1;
    do
    {
        printf("What is the length of the key you are entering?:-");
        scanf("%d", &len);

        isalphabet= isalpha(len);
        apply = (len > (strlen(str) -1)) ;

    } while (!apply || isalphabet); //reiterate the loop until the conditions are satisfied

    int i;
    for(i = 0; i < len; i++)
    {
        printf("%dth digit of Key= ", i+1);
        scanf("%c\n", &key[i]);
    }

    for(i = 0; i < len; i++){
        printf("key[%d] = %c\n", i, key[i]);
    }
    return(0);  
} 
```

# php - 在 for 循环中验证文本框

> ID：15987238
> 
> 赞同：0
> 
> 时间：2013-04-13T11:21:47.183
> 
> 标签：php

我有一个`for`循环中的文本框。如果没有输入数据，我想验证这个文本框，那么它应该显示一条错误消息。

```
 <form method="post" action="test.php">
     <?php for($i = 0; $i < 2; $i++) { ?>                
        <input type='text' name='txtName[]' required />                                               
    <?php } ?>  
    <input type="submit" name="btnConfirm" value="Proceed" class="button" /> 
  </form>

<?php
    $name = $_POST['txtName'];

    if(isset($_POST['btnConfirm'])) {
       if(!empty($name))  { echo "it worked!"; } 
       else { echo "Please enter your name."; }
    }
?> 
```

当我使用此代码时它可以工作：

```
$name = $_POST['txtName[]']; 
```

但在我输入数据后`textbox`，它不会进入我的`else`声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:54:39.910

```
<input type='text' name='txtName[]' /> 
```

和

```
$name = $_POST['txtName'];

if(isset($_POST['btnConfirm'])) {
$flag=true;
  for($i = 0; $i < 2; $i++) {
   if(empty($name[$i]))  $flag=false;
}
if($flag) echo "it worked!"; 
   else  echo "Please enter your name."; 
```

# javascript - e.stopPropagation() 在选择框下拉单击

> ID：15987243
> 
> 赞同：2
> 
> 时间：2013-04-13T11:22:04.377
> 
> 标签：javascript, jquery, drop-down-menu, stoppropagation

我有一个带有模糊功能集的可编辑 div。当我单击选择框时，会调用模糊。

我可以停止传播点击选择吗？

我试过 [http://jsfiddle.net/LZQSC/](http://jsfiddle.net/LZQSC/)

```
$("#testInput").blur(function(){alert('blur');});

$('#testDropdown').bind('mousedown',function(e){
    //e.preventDefault();
   e.stopPropagation();
}); 
```

可能吗？我尝试了不同的方法，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:36:51.490

您可以取消绑定选择 mouseenter 上的模糊功能并在 mouseleave 上再次绑定它：

```
$("#testInput").blur(function(){alert('blur');});

$('#testDropdown').on('click',function(){
    // Do stuff
}).on('mouseenter', function() {
    $("#testInput").unbind('blur');
}).on('mouseleave', function() {
    $("#testInput").bind('blur', function() {
        alert('blur');
    });
}); 
```

[http://jsfiddle.net/LZQSC/1/](http://jsfiddle.net/LZQSC/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:58:56.910

首先：

停止点击传播不会影响模糊/焦点变化。（你应该使用任何一个`stopPropagation`，`stopImmediatePropagation`或`preventDefault`- 只禁用点击的默认行为）

另一方面：

如果您想继续关注之前关注的任何元素，您应该：

1.  记住在开始与选择交互时谁有焦点
2.  选择完成后恢复焦点

工作示例：http: [//jsfiddle.net/LZQSC/3/](http://jsfiddle.net/LZQSC/3/)

```
$("#testInput").blur(function(){console.log('blur');});

(function(){
    // stores focused element reference
    var focusedElement;
    $('#testDropdown').on('mousedown', function(e){
            // on mousedown we get the focused element
            var el = $(':focus');
            // if this is other than the current select element 
            if(el.length > 0 && el[0] !== e.currentTarget){
                // save it in the var
                focusedElement = el;
            }
        }).change(function(e){
            console.log('changed');
            /* do stuff */
            // restore original focus
            console.log('setting focus on'+focusedElement.selector);
            focusedElement.focus();
    });
})(); 
```

# jquery - jquery fadeIn 似乎不起作用

> ID：15987245
> 
> 赞同：2
> 
> 时间：2013-04-13T11:22:50.463
> 
> 标签：jquery, fadein

这似乎没有任何作用。我究竟做错了什么。

这是我的脚本 src：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
    $(document).ready(function() {
        $('#block-image').hide().fadeIn(slow);
    });
</script> 
```

块图像：

```
<div id="block-image"></div> 
```

script 和 div 标签在它们周围有 <>，我无法在它们消失的情况下将它们写在这里。

css 文件设置了这个 div 的样式，我试过 Display: none; 在css中仍然一无所有。

我已经对照无数来源检查了我的脚本，但我看不出有什么问题，我确信我的 html 没有隐藏的“或拼写错误”。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:24:52.510

应该是`.fadeIn("slow")`。和 ””。

否则它正在寻找一个名为“慢”的变量。

并且您的脚本包含不正确（检查其他答案，我不想复制它们:)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:25:15.900

您不能将代码放在设置了 src 属性的脚本标记中，像这样使用它：{code is just ignored}

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $('#block-image').hide().fadeIn(slow);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:25:44.043

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>

<script type='text/javascript'> 
   $(document).ready(function() {
        $('#block-image').hide().fadeIn("slow");
   });
</script> 
```

# android - 所有你可以放入 AndroidManifest.xml

> ID：15987247
> 
> 赞同：-3
> 
> 时间：2013-04-13T11:22:53.003
> 
> 标签：android, android-manifest

你好安卓爱好者，

在浏览了 Android 网站上的官方技术资料（即培训、API 参考等）中的各种主题后，我对 AndroidManifest.xml 本身产生了浓厚的兴趣。

如您所知，主题采取的方法是一点一点地介绍概念，然后通过在Java代码中添加某某行以及在AndroidManifest.xml中放置某某元素+属性来推荐实现方式。

虽然有对 Android 特定 Java API 的完整引用，但我一直无法找到对所有元素和属性的完整列表以及描述的任何此类引用，这些都将被放入清单文件中。

请让我知道是否存在任何官方资源来全面列出 AndroidManifest.xml 的元素和属性。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:13:10.480

嗯......以我的拙见，真正的问题应该是你不必在 AndroidManifest 中放入什么！如您所知，每个 Android 应用程序都必须有自己的 AndroidManifest 文件。这需要让 Android 拥有正确的信息（例如 API 级别、权限、活动、服务等），以便正确运行应用程序。

一些有用的链接：

*   [http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)
*   [http://developer.android.com/guide/topics/manifest/manifest-element.html](http://developer.android.com/guide/topics/manifest/manifest-element.html)

然而，下面列出了 AndroidManifest 的基本元素。

# API级别（使用sdk）：

您可以在此处指定您的应用所需的 API 级别 - 即应用与各种 Android 平台的兼容性。例如：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" /> 
```

在示例中，API 级别 8 表示*Android 2.2.x (FroYo)*，而 17 表示*Android 4.2.x (Jelly Bean)*。

*android:minSdkVersion*属性是必需的，而android *:targetSdkVersion*是可选的（默认设置为*android:minSdkVersion*）。

您可以在以下位置找到更多信息：[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)。

# 权限：

您可以在此处指定您的应用需要的权限。*可以使用uses-permission*元素要求现有的 Android 权限，或使用*权限*元素定义自定义权限。每个权限都由一个唯一的标签标识。例如：

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

请注意，永远不要需要比所需更多的权限！（在发布之前，请务必检查您的应用是否真的需要 AndroidManifest 中的所有权限......）

您可以在以下位置找到更多信息：

*   [http://developer.android.com/guide/topics/manifest/uses-permission-element.html](http://developer.android.com/guide/topics/manifest/uses-permission-element.html)
*   [http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)
*   [http://developer.android.com/guide/topics/manifest/permission-element.html](http://developer.android.com/guide/topics/manifest/permission-element.html)

# 活动、提供者、接收者和服务：

AndroidManifest 的最后一个主要元素与声明应用程序的各种活动、提供者、接收者和服务有关。

您可以在以下位置找到更多信息：

*   [http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)
*   [http://developer.android.com/guide/topics/manifest/provider-element.html](http://developer.android.com/guide/topics/manifest/provider-element.html)
*   [http://developer.android.com/guide/topics/manifest/receiver-element.html](http://developer.android.com/guide/topics/manifest/receiver-element.html)
*   [http://developer.android.com/guide/topics/manifest/service-element.html](http://developer.android.com/guide/topics/manifest/service-element.html)

# sql - SQL XML 简单表-列-行条目更改编辑修改

> ID：15987252
> 
> 赞同：1
> 
> 时间：2013-04-13T11:23:12.313
> 
> 标签：sql, xml

如何更正 SQL 数据库表列行中的 XML 条目？

**问题**：我有一个名为`MyClients`. 该数据库有三个表：

*   dbo.Accounts
*   dbo.组织
*   dbo.Managers

表格`Accounts`中有以下列：

*   `AccountID`（PK，varchar(10)，不为空）
*   `OrganizationID`（varchar(10)，不为空）
*   `OrderBy`（整数，空）
*   `Name`（varchar（250），空）
*   `XML`（varchar（最大值），空）

有些行类似于以下示例（我似乎无法让 Markdown HTML 编辑器为此正确创建一个 5 列 2 行的表，所以请原谅接下来的两行）；

```
 <table>
      <tr>
        <th>AccountID</th>
        <th>OrganizationID</th>
        <th>OrderBy</th>
        <th>Name</th>
        <th>XML</th>
      </tr>
      <tr>
        <td>6DC5DB4A</td>
        <td>ECFC36B05A</td>
        <td>2</td>
        <td>Some Company Ltd</td>
<td>&lt;Account&gt;&nbsp;&lt;AccountID&gt;6DC5DB4A&lt;/AccountID&gt;&nbsp;&lt;OrganizationID&gt;ABC567PQR&lt;/OrganizationID&gt;&nbsp;&lt;CreatedDate&gt;1899-12-30 00:00:00&lt;/CreatedDate&gt;&nbsp;&#60/Account&gt;
        </td>
      </tr>
    </table> 
```

像这样的行中有一个明显的问题；XML列中的条目与列中的`<OrganizationID>`值不一样，**条目**显然是错误的！`OrganizationID`**`<CreatedDate>`**

 ****问题**：

在大约 10,000 行的大表中，我有大约 30 行以这种方式损坏。当损坏存在时，`<OrganizationID>`条目 is`ABC567PQR`和`<CreatedDate>`条目是总是相同的`1899-12-30 00:00:00`。

我如何能：

*   将`<CreatedDate>`条目更改为正确的值`2012-06-30 13:00:00`
*   将条目更改为与该行的列中`<OrganizationID>`的相同？`OrganizationID`**

# java - 获取链式异常 Java 的详细消息

> ID：15987258
> 
> 赞同：27
> 
> 时间：2013-04-13T11:24:24.967
> 
> 标签：java, exception, chaining

我想知道如何抛出 "final" `Exception`，其中包含一条详细消息，其中包含许多链接异常的所有详细消息。

例如假设这样的代码：

```
try {
  try {
    try {
      try {
        //Some error here
      } catch (Exception e) {
        throw new Exception("FIRST EXCEPTION", e);
      }
    } catch (Exception e) {
      throw new Exception("SECOND EXCEPTION", e);
    }
  } catch (Exception e) {
    throw new Exception("THIRD EXCEPTION", e);
  }
} catch (Exception e) {
  String allMessages = //all the messages
  throw new Exception(allMessages, e);
} 
```

我对完整的 不感兴趣`stackTrace`，而只对我写的消息感兴趣。我的意思是，我想要这样的结果：

```
java.lang.Exception: THIRD EXCEPTION + SECOND EXCEPTION + FIRST EXCEPTION 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-13T11:33:13.740

我认为你需要的是：

```
public static List<String> getExceptionMessageChain(Throwable throwable) {
    List<String> result = new ArrayList<String>();
    while (throwable != null) {
        result.add(throwable.getMessage());
        throwable = throwable.getCause();
    }
    return result; //["THIRD EXCEPTION", "SECOND EXCEPTION", "FIRST EXCEPTION"]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T11:27:36.497

您可以通过这种方式更好地使用它，将`message()`先前`Exception`的与您正在使用`message()`的新的合并：`Exception``throw`

```
 } catch (Exception e) {
          throw new Exception("FIRST EXCEPTION" + e.getMessage(), e);
      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T11:31:07.657

循环遍历异常原因并在每个异常中附加消息。

```
 try
    {
        try
        {
            try
            {
                try
                {
                    throw new RuntimeException("Message");
                }
                catch (Exception e)
                {
                    throw new Exception("FIRST EXCEPTION", e);
                }
            }
            catch (Exception e)
            {
                throw new Exception("SECOND EXCEPTION", e);
            }
        }
        catch (Exception e)
        {
            throw new Exception("THIRD EXCEPTION", e);
        }
    }
    catch (Exception e)
    {
        String message = e.getMessage();
        Throwable inner = null;
        Throwable root = e;
        while ((inner = root.getCause()) != null)
        {
            message += " " + inner.getMessage();
            root = inner;
        }
        System.out.println(message);
    } 
```

哪个打印

> 第三个异常 第二个异常 第一个异常消息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T11:34:55.827

您可以在每个异常上添加上一个异常消息

这是一个例子：

```
public static void main(String[] args) {

    try {
        try {
            try {
                try {
                    throw new Exception();
                    // Some error here
                } catch (Exception e) {
                    throw new Exception("FIRST EXCEPTION", e);
                }
            } catch (Exception e) {
                Exception e2 = new Exception("SECOND EXCEPTION + " + e.getMessage());
                throw e2;
            }
        } catch (Exception e) {
            Exception e3 = new Exception("THIRD EXCEPTION + " + e.getMessage());
            throw e3;
        }
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

结果是：java.lang.Exception：第三个异常+第二个异常+第一个异常

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-24T16:26:50.410

这是一个将链式异常转换为字符串的好工具：

```
public final class ThrowableUtil {

    private ThrowableUtil() {}

    public static String chainedString(@NonNull Throwable throwable) {
        StringBuilder SB = new StringBuilder(throwable.toString());
        while((throwable = throwable.getCause()) != null)
            SB.append("\ncaused by ").append(throwable);
        return SB.toString();
    }

    public static String chainedString(@NonNull String msg, @NonNull Throwable throwable) {
        StringBuilder SB = new StringBuilder(msg);
        do {
            SB.append("\ncaused by ").append(throwable);
        } while((throwable = throwable.getCause()) != null);
        return SB.toString();
    }

} 
```

示例输出：

```
ThrowableUtil.chainedString(e); 
```

生产

```
java.io.IOException: Failed to create required video encoder
caused by java.lang.RuntimeException: Invalid mime type 
```

另一个示例输出：

```
ThrowableUtil.chainedString("Writing of media file failed", e); 
```

生产

```
Writing of media file failed
caused by java.io.IOException: Failed to create required video encoder
caused by java.lang.RuntimeException: Invalid mime type 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-30T20:11:43.427

我使用以下示例将所有属性保存在类对象中：

```
public List<ErrorMessage> getMessageList(Throwable throwable) {
        List<ErrorMessage> errorMessageList =  new ArrayList<ErrorMessage>();
        while (throwable != null) {
            ErrorMessage message = new ErrorMessage();
            message.set_message( throwable.getMessage());
            message.set_line(throwable.getStackTrace()[0].getLineNumber());
            message.set_methodName(throwable.getStackTrace()[0].getMethodName());
            message.set_fileName(throwable.getStackTrace()[0].getFileName() );
            message.set_className(throwable.getStackTrace()[0].getClassName());
            errorMessageList.add(message);
            throwable = throwable.getCause();
        }
        return errorMessageList; 
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-24T15:00:49.747

也许更简单

```
try {
   // code that throws exception
} catch(Throwable e ) {
    var messages = new ArrayList<String>();

    do {
        messages.add(e.getMessage());
        e = e.getCause();
    } while( e!= null ); 

    var message = String.join(" -> ", messages);    
    System.out.println(message);
} 
```

# triggers - 在 Salesforce 中更新用户触发器中的联系人电子邮件

> ID：15987269
> 
> 赞同：0
> 
> 时间：2013-04-13T11:26:19.360
> 
> 标签：triggers, salesforce, apex-code, force.com, soql

我在用户对象上有一个触发器，该触发器在用户更新和更新联系人字段（链接到此联系人的用户）时触发，例如名字、姓氏和电子邮件。名字和姓氏已正确更新，但电子邮件字段未更新。我认为，这是因为更改用户的电子邮件以通过信中的链接进行确认。但是当我通过电子邮件确认更改时，联系人仍然没有更新:(

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:42:44.273

当工作流规则更改电子邮件时，在用户上添加一些阴影字段更新，它将是执行触发器。

# jquery - 防止对特定表单进行不显眼的验证

> ID：15987273
> 
> 赞同：0
> 
> 时间：2013-04-13T11:27:20.597
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, jquery-validate, unobtrusive-validation

我有一个要与 jQuery 不显眼验证一起使用的表单。一切正常。

但我在该视图上还有其他表单，例如搜索表单、登录表单等，并且插件也附加到所有这些表单，*我不想要这个*。

如何明确说明插件应附加到哪些表单，哪些不附加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:43:05.023

我认为你有两个选择，因为这个选项不是开箱即用的。

1.  编辑不显眼插件的源代码
2.  在您不想验证的表单上取消绑定验证器。

我会选择 1。虽然我记得在 SO 上看到过一些关于它的东西，但我不能 100% 确定你会如何做 2。

因此，如果您查看第 203 行附近的（未缩小的）jquery.validate.unobtrusive.js 文件，您会看到：

```
var $forms = $(selector)
    .parents("form")
    .andSelf()
    .add($(selector).find("form"))
    .filter("form"); 
```

我会将其更改为

```
var $forms = $(selector)
    .parents("form.include")
    .andSelf()
    .add($(selector).find("form.include"))
    .filter("form.include"); 
```

所以这只会验证带有“包含”类的表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-22T10:22:11.737

您可以使用以下方法销毁特定​​表单的验证器实例

`$("#[form_Id]").data("validator").destroy();`

见[https://jqueryvalidation.org/Validator.destroy/](https://jqueryvalidation.org/Validator.destroy/)

# asp.net-mvc-4 - 将模型传递给新动作并不完全有效

> ID：15987275
> 
> 赞同：0
> 
> 时间：2013-04-13T11:27:33.017
> 
> 标签：asp.net-mvc-4

我正在尝试将模型信息从一个动作传递到另一个动作。这在大多数情况下都有效，但是当它使用查询字符串将其转换为新操作时，它没有用于 agentopeninghours 或 agentphonenumber 的查询字符串参数。这些都是字符串，如果我将“MedicalDataCapture.AgentOpeningHours”替换为“3”，它就可以正常工作。我已经尝试对模型项进行编码，但这似乎也不起作用。

它一定很简单，但我看不出它是什么。

提前谢谢大家。

```
 var QuoteSummaryViewModel = new MedicalQuoteSummaryViewModel
        {
            PolicyTransactionNo = Success,
            AgencyRef = MedicalDataCapture.AgencyRef,
            AgentOpeningHours = MedicalDataCapture.AgentOpeningHours,
            AgentPhoneNumber = MedicalDataCapture.AgentPhoneNumber,
            SchemeId = MedicalDataCapture.SchemeId
        };

        //TempData["AgentPhoneNumber"] = QuoteSummaryViewModel;

        return RedirectToAction("QuoteSummary1", QuoteSummaryViewModel);

    public ActionResult QuoteSummary1(MedicalQuoteSummaryViewModel QuoteSummaryViewModel)
    { 
```

# c++ - c++ std 正则表达式问号问题

> ID：15987278
> 
> 赞同：4
> 
> 时间：2013-04-13T11:27:37.857
> 
> 标签：c++, regex, std

我在使用标准正则表达式时遇到问题。我无法使问号量词起作用。对 regex_match 的调用将始终返回 0。

我还尝试了 {0,1} ，它的行为也不像我预期的那样：它的行为就像一个 + 量词。

这是我的代码：

```
#include <iostream>
#include <regex>
using namespace std;

int main(int argc, char **argv){

    regex e1("ab?c");
    cout << regex_match("ac", e1) << endl;    // expected : 1, output 0
    cout << regex_match("abc", e1) << endl;   // expected : 1, output 0
    cout << regex_match("abbc", e1) << endl;  // expected : 0, output 0

    regex e2("ab{0,1}c");
    cout << regex_match("ac", e2) << endl;    // expected : 1, output 0
    cout << regex_match("abc", e2) << endl;   // expected : 1, output 1
    cout << regex_match("abbc", e2) << endl;  // expected : 0, output 1

    return 0;
} 
```

我使用以下命令进行编译：

```
g++ -std=c++11 main.cpp -o regex_test 
```

我在这里做错了吗？或者为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:59:59.990

您的正则表达式代码很好。您正在使用的实现不是。它提供了一个标头，该标头声明了该库实施得不好的一堆东西。如果一个商业包这样做，它会受到严厉的批评，这是正确的。你得到你所付出的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:51:37.183

`str::regex`大部分**没有**在 gcc 中实现（在撰写本文时）。请参阅第 28 节： http: [//gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T12:06:01.873

正则表达式的 POSIX 标准定义了两种类型，基本的和扩展的。这 ？运算符是一个扩展功能。显然你使用

```
std::regex re2(".*(a|xayy)", std::regex::extended) 
```

获得扩展功能。

# c# - Java 中 TimeZone.getDefault().getID() 在 C# 中的等价物是什么？

> ID：15987279
> 
> 赞同：4
> 
> 时间：2013-04-13T11:27:40.387
> 
> 标签：c#, java, timezone, jodatime, nodatime

对于一个生活在[Molossia 共和国的人](https://en.wikipedia.org/wiki/Republic_of_Molossia)来说，Java 中的以下代码：

```
String TimeZoneId=TimeZone.getDefault().getID();
System.out.println(TimeZoneId); 
```

将打印

> 美国/里贾纳

我试过`TimeZoneInfo.GetSystemTimeZones()`了，但返回值似乎不是 tzdb id。C#中是否有等效的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:05:22.390

.Net 并不自然地支持 TZDB，因为微软有它自己的时区数据库。有关详细信息，请参阅[TimeZone 标记 wiki](https://stackoverflow.com/tags/timezone/info)。

如果要使用 TZDB 区域，请使用[NodaTime](https://code.google.com/p/noda-time/)库。你问的确切翻译是：

```
using NodaTime;

...

var timeZoneId = DateTimeZoneProviders.Tzdb.GetSystemDefault().Id;
Console.WriteLine(timeZoneId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:47:55.187

Typically this can be done using the TimeZone class. This is the closest that you will get with the native libraries from my understanding. Why do you need that specific result?

Take a look at [Microsoft Time Zones](http://support.microsoft.com/kb/973627) and the Conversion Table* for the Windows Equivalent as Windows does not fully support the TZID, take a look at the stack overflow question below for more information. I hope this is more useful as I misread your previous question!!! - sorry!

```
//Get A reference to our timezone object
TimeZone t = TimeZone.CurrentTimeZone;

//Print out the display name
Console.WriteLine(t.StandardName); 
```

[MSDN REFERENCE](http://msdn.microsoft.com/en-us/library/xe5cd9e6(v=vs.80).aspx)

[http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/zone_tzid.html](http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/zone_tzid.html)

Please refer this previous stackoverflow question [.NET TimeZoneInfo from Olson time zone](https://stackoverflow.com/questions/5996320/net-timezoneinfo-from-olson-time-zone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-12T17:46:21.757

类似的值由

```
Calendar.GetTimeZone 
```

欲了解更多信息：[https ://docs.microsoft.com/en-us/uwp/api/windows.globalization.calendar.gettimezone?view=winrt-20348](https://docs.microsoft.com/en-us/uwp/api/windows.globalization.calendar.gettimezone?view=winrt-20348)

# javascript - 设置数据后的Highcharts加载动画

> ID：15987283
> 
> 赞同：11
> 
> 时间：2013-04-13T11:28:01.157
> 
> 标签：javascript, jquery, highcharts

我正在使用 Highcharts 图表，并且正在使用 .setData 更新图表中的数据。

这一切正常，但我想使用加载动画（折线图从左到右绘制自身）在我每次重置数据时触发。有没有办法调用这个动画？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T09:02:43.333

您可以删除实际系列，并添加新系列。初始动画与所有其他动画不同（剪辑路径是动画的，而不是系列本身）。

参见示例：http: [//jsfiddle.net/UTC6e/2/](http://jsfiddle.net/UTC6e/2/)

```
 chart.series[0].remove();
    chart.addSeries({data:[229.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4]} ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T12:05:10.673

在[api 参考中](http://api.highcharts.com/highcharts#Series.setVisible%28%29)，我看到了 setVisible() 方法：“一个实用函数，用于显示或隐藏带有可选重绘的系列。”。我想这就是你要找的吗？

更新：添加了 JS Fiddle，参见：http: [//jsfiddle.net/UTC6e/1/](http://jsfiddle.net/UTC6e/1/)

因此，您可以先将 setVisible 设置为 false，然后设置新数据，最后将 setVisible 设置为 true 并告诉图表重绘（第二个布尔参数）。

```
chart.series[0].setVisible(false);
chart.series[0].setData([229.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4] );
chart.series[0].setVisible(true, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T13:34:14.033

您可以手动调用重绘方法：

```
chart.redraw(); 
```

# python - gc.get_referents() 多次返回 Python 对象

> ID：15987287
> 
> 赞同：0
> 
> 时间：2013-04-13T11:28:17.773
> 
> 标签：python, memory-management, memory-leaks, garbage-collection

我正在使用`gc`模块（Ubuntu 12.10 上的 Python 2.7.3）来分析对象引用。

从以下代码开始：

```
a = [1,2,3]
b = [1,2,3,4,5]

print(gc.get_referents(a,b)) 
```

获取结果：

```
[3, 2, 1, 5, 4, 3, 2, 1] 
```

似乎从返回的列表中多次引用了一个对象`gc.get_referents()`。使用`set`方式如下：

```
print(set(gc.get_referents(a,b))) 
```

我得到类似 and 的引用列表的`a`联合`b`：

```
set([1, 2, 3, 4, 5]) 
```

我想知道这是否是获取对象列表引用的正确数量对象的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:32:26.940

如果您想获取所有引用的对象而不重复，是的，

```
set(gc.get_referents(a, b)) 
```

会给你那些。

# xslt - xslt 中的计数器无法正常工作

> ID：15987288
> 
> 赞同：-2
> 
> 时间：2013-04-13T11:28:22.803
> 
> 标签：xslt

我有以下 XML 文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<chapter num="A">
    <title>
        <content-style font-style="bold">PART 1 GENERAL PRINCIPLES</content-style>
    </title>
    <section level="sect1">
        <title>
            <content-style font-style="bold">Chapter 2: PREVENTING COMMERCIAL DISPUTES</content-style>
        </title>
        <section level="sect2" number-type="manual" num="1.">
            <title>INTRODUCTION</title>
            <para>
                <phrase>2.001</phrase> With increasing competition in the business environment and the need to provide value for money to customers, most, if not all businesses, cannot afford to continuously be engaged in the dispute resolution arena as though it were a part of their core business. If all the disputes of a business entity have to be litigated or arbitrated to the bitter end, then this will become a substantial drain on its financial resources and big distraction for its management. Prolonged engagement in litigation and arbitration will undoubtedly have a detrimental effect on the business.</para>
            <para>
                <phrase>2.002</phrase> Preventing or minimising disputes requires businesses to know and understand the people they are dealing with and they will also need to ensure that the governing contracts are clearly and carefully drafted in order to safeguard the rights of both parties. The parties need to devote resources to train their employees to carefully and skilfully monitor the performance of the contracts and to maintain proper and adequate documentary records. This requires financial investment which some businesses are unable or reluctant to budget for. However, those businesses which have a keen awareness of the need to prevent or minimise disputes and are willing to provide the financial investment to attain this will find that, with a manageable preventative dispute resolution philosophy in place, this will, in the long term, be cost-effective and above all, create an environment that preserves close working relationships.</para>
        </section>
        <section level="sect2" number-type="manual" num="2.">
            <title>SELECTING A COUNTERPARTY</title>
            <para>
                <phrase>2.003</phrase> Commercial disputes inevitably arise between two or more parties under a commercial contract. The attributes of the counterparty with which one contracts will therefore have an impact on whether disputes can be prevented or, even if not, whether disputes can be resolved in an efficient and cost-effective manner, which will ultimately benefit both parties.</para>
            <para>
                <phrase>2.004</phrase> Consideration should be given to certain aspects of the counterparty before a contract is entered into. These attributes of a contracting party can impact on whether the relationship is likely to go smoothly or whether it is going to be &#x201C;dispute prone&#x201D;.</para>
            <section level="sect2" number-type="manual" num="(a)">
                <title>Financial power</title>
                <para>
                    <phrase>2.005</phrase> A contracting party which has financial substance is, in general, more likely to be willing to abide by their contractual obligations, simply because they are relatively easy targets of a lawsuit. On the other hand, where one contracts with an insubstantial or &#x201C;fly-by-night&#x201D; party, there is a genuine concern that, once the contract becomes unprofitable or if something goes wrong, there is a bigger propensity for disputes to arise as a result of the latter seeking to avoid its obligations.</para>
            </section>
            <section level="sect2" number-type="manual" num="(b)">
                <title>Market reputation</title>
                <para>
                    <phrase>2.006</phrase> A contracting party which has a market reputation it wishes to safeguard is likely to be more careful in the type of disputes it would be likely to get involved in. Listed companies or those which have a public image to preserve are, in general, more likely to avoid litigating every claim irrespective of size (unless such claims, if not litigated, are liable to open up floodgates) to minimise the bad publicity associated with being in the courts too often, or giving the impression to potential future contracting parties that they are litigious and difficult to deal with.</para>
            </section>
            <section level="sect2" number-type="manual" num="(c)">
                <title>Location and culture</title>
                <para>
                    <phrase>2.007</phrase> This is a sensitive topic and therefore there will be no specific references. However, a discussion of this type would be incomplete without acknowledging the fact that businesses or projects in certain parts of the world are more prone to conflicts or natural disasters and are more likely to end up in disputes than those in more &#x201C;peaceful&#x201D; parts of the world. Certain cultures tend also to be more litigious than others, and when contracting with parties of certain cultural backgrounds that focus less on mutual tolerance and co-operation, there will be more expectation of disputes.</para>
            </section>
            <section level="sect2" number-type="manual" num="(d)">
                <title>Focus/investment on risk prevention</title>
                <para>
                    <phrase>2.008</phrase> Certain contracting parties, more often seen in developed countries, have a better awareness of the law and the need to invest in risk prevention in order to minimise the probability of disputes. &#x201C;Investments&#x201D; in this regard include spending money to vet their business partners, including investigating their financial status and their market reputation, and allowing their legal department a sufficient budget to properly review draft contracts, assist with negotiations and to keep fully up-to-date with the latest legal developments.</para>
            </section>
        </section>
        <section level="sect2" number-type="manual" num="3.">
            <title>CONTRACT NEGOTIATION AND DRAFTING</title>
            <para>
                <phrase>2.009</phrase> There are two basic ways in which conflicts can be avoided without the need for the use of dispute resolution mechanisms. The first is the use of negotiation skills to negotiate a contract that affords the best terms and conditions possible, covering all or most foreseeable contingencies. Having clear and favourable provisions in a contract puts a party in a better position, especially when it is sought to resolve disputes at their source, without the need to revert to the dispute resolution mechanisms provided for in the contract. This, without a doubt, is the cheapest and most effective means of avoiding disputes or resolving possible disputes. The importance of contract negotiations should not be lightly dismissed.</para>
            <para>
                <phrase>2.010</phrase> The second is having a clearly drafted contract that is well thought out and planned and serves everyone&#x2019;s interests. Often a hastily drafted contract that is put together at the last minute results in uncertainty and vagueness of terms which could potentially create disputes. The inclusion of appropriate clauses (for example, clauses that cover force majeure or hardship) provide for changing conditions that may render the contract impossible to perform are of major importance. The drafting of such clauses is relatively technical in nature and requires the skills of a competent drafter of commercial contracts to ensure that they are manageable from a commercial standpoint.</para>
            <para>
                <phrase>2.011</phrase> An area to be aware of is the use of standard form contracts and adopting such forms within the existing framework of the contract. Although there are a variety of such standard form contracts available in the market place to be referred to, care must be taken, as these forms are only a guide to assist in the drafting of a contract that suits individual needs. Consulting legal counsel for advice is beneficial, especially when the contract touches on issues such as jurisdiction, which can often be difficult concepts for a lay person to understand.</para>
            <para>
                <phrase>2.012</phrase> The drafting of specialist contracts such as those in the construction, insurance, commodity and maritime fields requires a great deal of industry knowledge and experience to ensure that suitable wording is used to minimise the chances of disputes. However, regardless of the type of contract involved, there are certain provisions which are generic in nature, and the inclusion of which will generally (although not always) minimise the scope of the disputes between the parties, and are usually good to have. These provisions are often referred to as boilerplate clauses.</para>
            <para>
                <phrase>2.013</phrase> The importance of boilerplate clauses is often overlooked as the parties tend to focus on the commercial terms of the contract, such as the cost of the goods or services being provided. Failure to include appropriate boilerplate clauses may prevent a party from effectively enforcing its rights under the contract and offer an escape route to the defaulting party from its liabilities.</para>
            </section>
            </section>
            </chapter> 
```

当我应用下面的xslt，节中的计数器（取为）时，每次找到一个带有num中数字的新节时，计数器将重置为1但如果num的值类似于（a），（b） .. 它正在继续，我想要的是，计数器永远不应该重置为 1。请帮助我实现这一点。

XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ntw="Number2Word.uri" exclude-result-prefixes="ntw">

    <xsl:variable name="ThisDocument" select="document('')"/>
    <xsl:output method="html"/>
    <xsl:template match="/">

        <xsl:text disable-output-escaping="yes">&lt;!DOCTYPE&gt;</xsl:text>
        <html>
            <head>
                <xsl:text disable-output-escaping="yes"><![CDATA[</meta>]]></xsl:text>
                <title>
                    <xsl:value-of select="substring-after(chapter/section/title,':')"/>
                </title>
                <link rel="stylesheet" href="er:#css" type="text/css"/><xsl:text disable-output-escaping="yes"><![CDATA[</link>]]></xsl:text>
            </head>
            <body>
                <xsl:apply-templates/>

                <section class="tr_footnotes">
                <hr/>
                    <xsl:apply-templates select="//footnote" mode="footnote"/>
                </section>
            </body>
        </html>
    </xsl:template>
    <xsl:template match="chapter">
        <section class="tr_chapter">
            <div class="chapter">
            <xsl:variable name="l">
            <xsl:value-of select="substring(substring-after(section/title,' '),1,1)"/>
            </xsl:variable>
                <a name="AHK_CH_0{$l}"/>

                <div class="chapter-title">
                <xsl:variable name="titl">
                <xsl:value-of select="substring-after(section/title,':')"/>
                </xsl:variable>
                    <span class="chapter-num">
                        <xsl:value-of select="concat('Chapter ',$l,' ')"/>
                    </span>
                    <xsl:value-of select="$titl"/>

                </div>
    <div class="para align-center">
    <span class="font-style-italic">
    <xsl:value-of select="document('AHK-authors.xml')/chapters/chapter[@no=$l]"/>

    </span>
    </div>
    <div class="para align-right"><span class="format-smallcaps">Para</span>.</div>
                <div class="toc">
                    <div class="toc-part">
                        <table class="toc-div">
                            <tbody>
                                <tr>
                                    <td>
                                        <xsl:for-each select="current()/section/section|current()/section/section/section[contains(@num, '(')]|current()/section/section/section/section[contains(@num, '(')]">
                                            <xsl:call-template name="IndexItem">
                                            </xsl:call-template>
                                        </xsl:for-each>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <xsl:apply-templates select="section/section"/>
            </div>
        </section>
    </xsl:template>

    <xsl:template match="chapter/para">
        <div class="para align-right">
            <span class="format-smallcaps">Para</span>.
        </div>
        <xsl:apply-templates select="section"/>
    </xsl:template>

    <xsl:template name="fig" match="figure">
        <div class="figure">
        <div class="figure-title">
        <xsl:value-of select="current()/title"/>
        </div>
            <xsl:variable name="numb">
            <xsl:value-of select="substring-after(graphic/@href,'_')"/>
            </xsl:variable>
        <xsl:variable name="figCon">
            <xsl:value-of select="concat('er:#page-',$numb)"/>
        </xsl:variable>

        <img class="graphic" src="{$figCon}" alt=""/>
        </div>

    </xsl:template>

    <xsl:template name="IndexItem">
    <xsl:if test="not(contains(@level,'sect1'))"><!--changed fron @num to sect2-->
        <xsl:variable name="tocpg">
            <xsl:value-of select="concat('#P',descendant::para/phrase[1]/text())"/>
        </xsl:variable>
        <xsl:variable name="tocpgtag" select="translate($tocpg,'.', '-')"/>
        <xsl:variable name="smallcase" select="'abcdefghijklmnopqrstuvwxyz'"/>
        <xsl:variable name="uppercase" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
        <xsl:variable name="text" select="current()/title/text()"/>
        <xsl:variable name="Brac">
            <xsl:choose>
                <xsl:when test="contains(current()/@num,'(')">
                    <xsl:value-of select="2"/>
                </xsl:when>
                <xsl:otherwise>
                                    <xsl:value-of select="1"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="d">
        <xsl:value-of select="concat('toc-item-',$ThisDocument//ntw:nums[@num=$Brac]/@word,'-level')"/>

        </xsl:variable>
        <table class="{$d}">
            <tbody>
                <tr>
                    <td class="toc-item-num">
                        <xsl:value-of select="@num"/>
                    </td>
                    <td class="toc-title">
                        <xsl:value-of select="concat(substring($text,1,1), translate(substring($text,2), $uppercase, $smallcase))"/>
                    </td>
                    <td class="toc-pg">
                        <a href="{$tocpgtag}">
                            <xsl:value-of select="descendant::para/phrase[1]/text()"/>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
        </xsl:if>
    </xsl:template>
    <!-- Index Templates Complete -->
    <!-- Paragraph templates -->
    <xsl:template name="section" match="section">
        <!-- Variables-->
        <xsl:variable name="classname">
            <!--Get name attribute of current node -->
            <xsl:value-of select="concat('section-',parent::section/@level)"/>
        </xsl:variable>
        <xsl:variable name="chapternumber">
            <!-- Get num attribute of parent node -->
            <xsl:variable name="StrL">
            <xsl:value-of select="string-length(substring(substring-after(ancestor::chapter/section/title,'Chapter '),1,1))"/>
            </xsl:variable>
            <xsl:choose>
                <xsl:when test="$StrL>1">
                <xsl:value-of select="substring(substring-after(ancestor::chapter/section/title,'Chapter '),1,1)"/>
</xsl:when>
            <xsl:otherwise> 
<xsl:value-of select="concat('0',substring(substring-after(ancestor::chapter/section/title,'Chapter '),1,1))"/>

        </xsl:otherwise>    
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="sectnum">
            <xsl:number format="1"/>
        </xsl:variable>
        <!--Create a string variable by concat string method  -->
        <xsl:variable name="sectionname">
            <xsl:value-of select="concat('CH_',$chapternumber,'-SEC-', $sectnum)"/>
        </xsl:variable>
        <!-- Template Content  -->
            <div class="{$classname}">
            <a name="{$sectionname}"> </a>
            <div class="section-title">
                <span class="section-num">
                    <xsl:value-of select="@num"/>
                    <xsl:text> </xsl:text>
                </span>
                <xsl:apply-templates select="title"/>
            </div>
            <xsl:apply-templates select="child::node()[not(self::title)]"/>
        </div>

    </xsl:template>

    <xsl:template name="para" match="section/para">

                <div class="para">
                <xsl:apply-templates select="phrase"/>
                    <span class="phrase">
                        <xsl:value-of select="current()/phrase"/>
                    </span>
                    <xsl:choose>
            <xsl:when test="contains(current()/text(),'Chapter')">
            <xsl:variable name="x">
<xsl:value-of select="substring(substring-before(current()/text(),'Chapter'),1)"/>
</xsl:variable>

<xsl:variable name="y">
<xsl:value-of select="substring(substring-after(current()/text(),'Chapter'),4)"/>
</xsl:variable>

<xsl:variable name="z">
<xsl:value-of select="normalize-space(substring-before(substring-after(current()/text(),'Chapter'),'.'))"/>
</xsl:variable>

<xsl:variable name="h">
<xsl:value-of select="string-length($z)"/>
</xsl:variable>
<xsl:value-of select="$x"/>
<xsl:choose>
<xsl:when test="$h =1">

<a href="{concat('er:#AHK_CH_0',$z,'/AHK_CH_0',$z)}">
<xsl:value-of select="concat('Chapter',$z)"/>
</a>
</xsl:when>
<xsl:otherwise>
<a href="{concat('er:#AHK_CH_',$z,'/AHK_CH_',$z)}">
<xsl:value-of select="concat('Chapter',$z)"/>
</a>
</xsl:otherwise>
</xsl:choose>
<xsl:value-of select="$y "/>
<xsl:apply-templates select="footnote"/>
<xsl:apply-templates select="current()/phrase/text()"/>
    </xsl:when>
                    <xsl:otherwise>     
                    <xsl:apply-templates select="child::node()[not(self::phrase)]"/>
                    </xsl:otherwise>
                    </xsl:choose>

                </div>

    </xsl:template>

    <xsl:template name="phrase" match="phrase">
        <xsl:variable name="phrase">
            <xsl:value-of select="concat('P',text())"/>
        </xsl:variable>
        <xsl:variable name="newphrase" select="translate($phrase,'.','-')"/>
        <a>
            <xsl:attribute name="name"><xsl:value-of select="$newphrase"></xsl:value-of></xsl:attribute>
        </a>
    </xsl:template>

    <!-- Table Templates  -->
    <xsl:template name="table" match="table">
            <table style="frame-{current()/@frame} width-{translate(current()/@width,'%','')}">
    <xsl:apply-templates/>
    </table>
    </xsl:template>

<xsl:template match="tgroup">
        <colgroup>
            <xsl:apply-templates select=".//colspec"/>
</colgroup>
<xsl:apply-templates select="child::node()[not(self::colspec)]"/>

</xsl:template> 

    <xsl:template name="tbody" match="tgroup/tbody">
        <tbody>
            <xsl:for-each select="current()/row">
                <xsl:call-template name="row"/>
            </xsl:for-each>
        </tbody>
    </xsl:template>
    <xsl:template name="thead" match="tgroup/thead">

        <xsl:for-each select="current()/row"><thead>

            <tr>
                <xsl:for-each select="current()/entry">
                    <xsl:call-template name="headentry"/>
                </xsl:for-each>
</tr>
            </thead>
        </xsl:for-each>
    </xsl:template>
    <xsl:template name="colspec" match="colspec">

        <col class="colnum-{current()/@colnum} colname-{current()/@colname} colwidth-{translate(current()/@colwidth,'%','')}"/>
    </xsl:template>
    <xsl:template name="row" match="tbody/row">
        <tr>
            <xsl:for-each select="current()/entry">
                <xsl:call-template name="entry"/>
            </xsl:for-each>
        </tr>
    </xsl:template>
    <xsl:template name="entry" match="entry">
        <xsl:variable name="count">
            <xsl:value-of select="count(preceding-sibling::* | following-sibling::*)"/>
        </xsl:variable>
        <xsl:choose>
            <xsl:when test="$count &lt; 2">
                <xsl:if test="position()=1">
                    <td>
                        <div class="para align-center">
                            <xsl:value-of select="para[position()=1]"/>
                        </div>
                    </td>
                    <td>
                        <div class="para">
                            <xsl:value-of select="following-sibling::node()"/>
                        </div>
                    </td>
                </xsl:if>
            </xsl:when>
            <xsl:when test="$count &gt; 1">
                <td>
                    <div class="para">

                        <xsl:apply-templates/>
                    </div>
                </td>
            </xsl:when>
        </xsl:choose>
    </xsl:template>
    <xsl:template name="headentry">
        <th>
            <xsl:if test="translate(current()/@namest,'col','') != translate(current()/@nameend,'col','')">
                <xsl:variable name="colspan">
                    <xsl:value-of select="translate(current()/@nameend,'col','') - translate(current()/@namest,'col','') + 1"/>
                </xsl:variable>
                <xsl:attribute name="colspan"><xsl:value-of select="$colspan"></xsl:value-of></xsl:attribute>
            </xsl:if>
            <div class="para">
                <xsl:value-of select="current()/para/text()"/>
                <xsl:apply-templates/>
            </div>
        </th>
    </xsl:template>
    <!-- Table Templates complete  -->

    <!--List templates -->

    <xsl:template name="orderedlist" match="orderedlist">
        <ol class="eng-orderedlist orderedlist">
            <xsl:apply-templates/>
        </ol>
    </xsl:template>

    <xsl:template name="orderitem" match="item">
        <li class="item">
            <xsl:apply-templates/>
        </li>
    </xsl:template>

    <xsl:template name="orderitempara" match="item/para">

        <div class="para">

                <span class="item-num">
                <xsl:if test="position()=1">
                    <xsl:value-of select="parent::item[1]/@num"/>
                    <xsl:text> </xsl:text>
                    </xsl:if>
                    </span>
                    <xsl:apply-templates/>

            </div>

    </xsl:template>
    <!--List templates Complete -->
    <!-- Paragraph templates Complete -->
    <!-- Footnote Templates-->
    <xsl:template match="footnote">
        <sup>
            <a>
                <xsl:attribute name="name"><xsl:text>f</xsl:text><xsl:number level="any" count="footnote" format="1"/></xsl:attribute>
                <xsl:attribute name="href"><xsl:text>#ftn.</xsl:text><xsl:number level="any" count="footnote" format="1"/></xsl:attribute>
                <xsl:attribute name="class"><xsl:text>tr_ftn</xsl:text></xsl:attribute>
                <xsl:number level="any" count="footnote" format="1"/>
            </a>
        </sup>
    </xsl:template>
    <xsl:template match="footnote" mode="footnote">
    <div class="tr_footnote">
        <div class="footnote">
        <sup>

                <a>
                    <xsl:attribute name="name"><xsl:text>ftn.</xsl:text><xsl:number level="any" count="footnote" format="1"/></xsl:attribute>
                    <xsl:attribute name="href"><xsl:text>#f</xsl:text><xsl:number level="any" count="footnote" format="1"/></xsl:attribute>
                    <xsl:attribute name="class"><xsl:text>tr_ftn</xsl:text></xsl:attribute>
                    <xsl:number level="any" count="footnote" format="1"/>
                </a>
            </sup>
            <div class="a">
                 <xsl:variable name="new">
                    <xsl:value-of select="current()"/>
                 </xsl:variable>
                 <xsl:variable name="new1">
                    <xsl:value-of select="substring(substring-after(current(),'paragraph'),2,5)"/>
                 </xsl:variable>
                 <xsl:variable name="roo">
                <xsl:value-of select="substring(//@num,2)"/>
                </xsl:variable>
                 <xsl:variable name="befTex">
                 <xsl:value-of select="substring-before(current(),'paragraph')"/>
                 </xsl:variable>
                 <xsl:variable name="before">
                 <xsl:value-of select="substring-before($new1,'.')"/>
                 </xsl:variable>
                 <xsl:variable name="after">
                 <xsl:value-of select="substring(substring-after($new1,'.'),1,3)"/>
                 </xsl:variable>
                 <xsl:variable name="centTex">
                <xsl:value-of select="substring(substring-after(current(),$after),1)"/>
                </xsl:variable>

                <xsl:variable name="pCon">
                <xsl:value-of select="concat('paragraph',' ',$before,'.',$after)"/>
                </xsl:variable>

                    <xsl:variable name="tes">
                <xsl:if test="contains($centTex,'chapter')">
                <xsl:value-of select="concat(' ',substring(substring-before($centTex,'chapter'),2))"/> 
                </xsl:if>
                </xsl:variable>
                <xsl:variable name="ChapNu">
                <xsl:value-of select="normalize-space(substring(substring-after(current(),'chapter'),1,2))"/>
                </xsl:variable>

                <xsl:variable name="ChapNuC">
                <xsl:value-of select="concat('er:#BVI_CH_0',$ChapNu,'/BVI_CH_0',$ChapNu)"/>
                </xsl:variable>
                <xsl:variable name="curSel">
                <xsl:value-of select="concat('#P',$before,'-',$after)"/>
                </xsl:variable>
                <xsl:variable name="ChapCon">
                <xsl:value-of select="concat('chapter',' ',substring(substring-after(current(),'chapter'),2,1))"/>
                </xsl:variable>

                <xsl:variable name="conc1">
                <xsl:value-of select="concat('er:#BVI_CH_0',$before,'/P',$before,'-',$after)"/>
                </xsl:variable>
                <xsl:value-of select="$befTex"/>
                <xsl:choose>
                <xsl:when test="contains(substring(substring-after($new,'paragraph'),1,3),'.')">
                <xsl:choose>

                <xsl:when test="$before = $roo">
                <a href="{$curSel}">
                <xsl:value-of select="$pCon"/>
                </a>
                </xsl:when>
                <xsl:otherwise>
                <a href="{$conc1}">
                    <xsl:value-of select="$pCon"/>
                </a>
                 </xsl:otherwise>
                </xsl:choose>
                <xsl:value-of select="$tes"/>
                <xsl:if test="contains($centTex,'chapter')">
                <a href="{$ChapNuC}">
                <xsl:value-of select="$ChapCon"/>
                </a>
                </xsl:if>
                <xsl:text>.</xsl:text>
                </xsl:when>

                <xsl:otherwise>
                <xsl:apply-templates/>
                </xsl:otherwise>
                </xsl:choose>
        </div>

        </div>
        </div>
    </xsl:template>
    <xsl:template match="footnote/para/uri">

            <xsl:variable name="url1">
                        <xsl:value-of select="translate(@href, '&#x003C;','')" />
            </xsl:variable>
            <xsl:variable name="url2">
                        <xsl:value-of select="translate($url1, '&#x003E;','')" />
            </xsl:variable>
            <a href="{$url2}">
                        <xsl:value-of select="." />
            </a>

    </xsl:template>
    <!-- Footnote Templates Complete -->
    <xsl:template match="content-style">
        <xsl:choose>
            <xsl:when test="@format='smallcaps'">
                <xsl:value-of select="translate(normalize-space(.),'ABCDEFGHIJKLMNOPQRSTUVWXZ','abcdefghijklmnopqrstuvwxyz')"/>
            </xsl:when>
            <xsl:when test="@format='superscript'">
            </xsl:when>

            <xsl:otherwise>
                <xsl:variable name="fontStyle">
            <xsl:value-of select="concat('font-style-',@font-style)"/>
        </xsl:variable>
        <span class="{$fontStyle}">
             <xsl:apply-templates/>
        </span>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    <!-- Namespace ntw-->
    <ntw:nums num="1" word="first"/>
    <ntw:nums num="2" word="second"/>
    <ntw:nums num="3" word="third"/>
    <ntw:nums num="4" word="forth"/>
    <ntw:nums num="5" word="fifth"/>
    <ntw:nums num="6" word="sixth"/>
    <ntw:nums num="7" word="seventh"/>
    <ntw:nums num="8" word="eighth"/>
    <ntw:nums num="9" word="nighth"/>
    <ntw:nums num="10" word="tenth"/>
    <!-- Namespace ntw ends -->
</xsl:stylesheet> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:59:43.973

我在下面的代码中将计数器值用作 1，但我需要使用下面第二个块中给出的代码。

```
<xsl:variable name="sectionname">
 <xsl:value-of select="concat('CH_',$chapternumber,'-SEC-', $sectnum)"/>
 </xsl:variable> 

     <xsl:variable name="sectnum">
       <xsl:for-each select="Current()">
        <xsl:value-of select="count(preceding-sibling::*)"/>
       </xsl:for-each/>
    </xsl:variable> 
```

这将给出价值。

# php - 致命错误：在工作查询的非对象上调用成员函数 rowcount()

> ID：15987289
> 
> 赞同：1
> 
> 时间：2013-04-13T11:28:31.233
> 
> 标签：php, mysql

我正在运行这个查询

```
try
{
$park_id = $_GET['park_id'];
$query2="SELECT `name` FROM  `tpf_rides` WHERE  `park_id` = $park_id AND  

`top_ride` = 1 ORDER BY `name` ASC";
$result2 = $pdo->query($query2);
}
catch (PDOException $e)
{
$output = 'Unable to pull rides.';
include 'output.html.php';
}

$output = 'Sucessfully pulled rides';
//include 'output.html.php';// 
```

并显示它

```
<?php foreach ($result2 as $row2): ?>

<li><h3><?php echo $row2['name']; ?></h3></li>

<?php endforeach; ?> 
```

这一切正常，“热门游乐设施”列表显示正确。

问题是我正在尝试添加一个 if 语句，以便如果特定的“公园”没有“顶级游乐设施”，则不会显示该页面的一部分。下面是我正在尝试工作的代码，但我收到错误“致命错误：在第 133 行的 /home/danville/public_html/parkindex/park.php 中的非对象上调用成员函数 rowcount()”这个 bieng 第 133 行“if ($count2 = $query2->rowcount() < 1)”有人可以帮忙吗？

```
if ($count2 = $query2->rowcount() < 1)

{
    echo "No results found";
} 

else 

{
 echo "<h2>Top Attractions</h2>";

foreach ($result2 as $row2){

echo "<li><h3>{$row2['name']}</h3></li>";

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T01:17:54.303

我有同样的问题。事实证明，修复是准备，然后执行。

```
$result = $pdo->prepare($query2);
$result->execute();
$count = $result->rowCount(); 
```

奇怪的是，rowCount 是从 $pdo->query(); 返回的对象的函数，这似乎是一个内部故障。

尝试：

```
var_dump(get_class_methods($result)); 
```

看看我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:55:30.790

在我看来，有些东西不合逻辑。如果您已经拥有`$park_id`并且匹配一个特定的行，那么只有在`top_rides`= 1 时才能处理结果，所以我将更改查询如下

```
$query2="SELECT `name`, `top_rides` FROM  `tpf_rides` WHERE `park_id` = '".$park_id."'"; 
```

所以现在我们准备好放置`if`条件并只显示结果，`top_rides` 我假设这个字段设置为`1`公园有顶级游乐设施时。

```
foreach ($result2 as $row2)
{
    if($row2['top_rides'] == '1')
    {
         echo '<li><h3>'. $row2['name'] .'</h3></li>';
    } 
    else
    {
         echo "No results found";
    }
} 
```

您将不得不更改您的查询以获取`park_top`字段，所以

```
$query2="SELECT `name` FROM  `tpf_rides` WHERE  `park_id` = $park_id AND  `top_ride` = 1 ORDER BY `name` ASC"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:30:26.953

获取**结果**的行数，而不是查询字符串的行数

```
if ($count2 = $result2->rowcount() < 1) 
```

不是

```
if ($count2 = $query2->rowcount() < 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T12:22:05.077

这是我为该页面运行的所有查询。这里有问题的查询是 query2

```
<?php

try
{
$pdo = new PDO('mysql:host=localhost;dbname=danville_tpf', 'user',
'password');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->exec('SET NAMES "utf8"');
}
catch (PDOException $e)
{
$output = 'Unable to connect to the database server.';
include 'output.html.php';
exit();
}

$output = 'Theme Park Database initialized';
//include 'output.html.php';//

try
{
$park_id = $_GET['park_id'];
$query="SELECT * FROM tpf_parks WHERE park_id = $park_id";
$result = $pdo->query($query);
}
catch (PDOException $e)
{
$output = 'Unable to connect to the database server.';
//include 'output.html.php';//
}

$output = 'Sucessfully pulled park';
//include 'output.html.php';//

foreach ($result as $row)
{
$parkdetails[] = array(
'name' => $row['name'],
'blurb' => $row['blurb'],
'website' => $row['website'],
'address' => $row['address'],
'logo' => $row['logo']);
}

try
{
$park_id = $_GET['park_id'];
$query2="SELECT `name` FROM  `tpf_rides` WHERE  `park_id` = $park_id AND  

`top_ride` = 1 ORDER BY `name` ASC";
$result2 = $pdo->query($query2);
}
catch (PDOException $e)
{
$output = 'Unable to pull rides.';
include 'output.html.php';
}

$output = 'Sucessfully pulled rides';
//include 'output.html.php';//

try
{
$park_id = $_GET['park_id'];
$query3="SELECT `url` FROM  `tpf_images` WHERE  `park_id` = $park_id ORDER 

BY RAND() LIMIT 1";
$result3 = $pdo->query($query3);
}
catch (PDOException $e)
{
$output = 'Unable to pull image.';
include 'output.html.php';
}

$output = 'Sucessfully pulled image';
//include 'output.html.php';//

?> 
```

这是结果应该显示的地方

```
<ul>
<?php foreach ($result2 as $row2): ?>

<li><h3><?php echo $row2['name']; ?></h3></li>

<?php endforeach; ?>
</ul>
<hr>

<?php

if ($count2 = $results2->rowcount() < 1)

{
    echo "No results found";
} 

else 

{
 echo "<h2>Top Attractions</h2>";

foreach ($result2 as $row2){

echo "<li><h3>{$row2['name']}</h3></li>";

}

}

?> 
```

现在是第 133 行`if ($count2 = $results2->rowcount() < 1)`

# vb.net - 插入数据库中的 2 列后在新列中更新

> ID：15987290
> 
> 赞同：0
> 
> 时间：2013-04-13T11:28:54.723
> 
> 标签：vb.net, ms-access-2007

我正在使用以下代码将记录从另一个表插入到一个表中......

```
Private Sub InsDuplicateDB()

    Dim strInsDup As String = "INSERT INTO Duplicate_srno(Sr_no,chalan_no) SELECT sr_no,chaln_no FROM Vendor_Machine where sr_no=@srno"
    Dim comm_InsDup As OleDb.OleDbCommand = New OleDb.OleDbCommand(strInsDup, cnnOLEDB)
    comm_InsDup.Parameters.AddWithValue("@srno", cmbSn_no.Text)
    comm_InsDup.ExecuteNonQuery()

    Dim strUpdDup As String = "UPDATE Duplicate_srno SET sr_no = @srno,chaln_no =@chn_no,Problem=@problemWHERE sr_no = @srno AND chalan_no=@chn_no"
    Dim comm_Update As OleDb.OleDbCommand = New OleDb.OleDbCommand(strUpdDup, cnnOLEDB)

    comm_Update.Parameters.AddWithValue("@srno", cmbSn_no.Text)
    comm_Update.Parameters.AddWithValue("@chn_no", cmbChal_no.Text)
    comm_Update.Parameters.AddWithValue("@problem",strProb)

    comm_Update.ExecuteNonQuery()

End Sub 
```

这里 strProb 是一个字符串，其值在另一个子函数中分配。这里它给出错误为“没有为一个或多个必需参数提供值..”

请解决我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:01:26.610

我不知道这是否是拼写错误，但更新字符串在参数名称@problem 和 WHERE 子句之间缺少空格

```
Dim strUpdDup As String = "UPDATE Duplicate_srno SET sr_no = @srno,chaln_no =@chn_no," & _
                          "Problem=@problem WHERE sr_no = @srno AND chalan_no=@chn_no"
                                           ^ 
```

但是可以简化更新字符串，因为您正在使用 where 子句中使用的相同值更新两个字段

```
Dim strUpdDup As String = "UPDATE Duplicate_srno SET Problem=@problem " & _
                          "WHERE sr_no = @srno AND chalan_no=@chn_no" 
```

除了缺少的空间，错误消息说引擎需要更多参数。
在 OleDb 中，参数的名称无法识别。您需要与字符串中的占位符定义的参数数量相同。在您的原始文本中，您有 5 个占位符，但您只添加了 3 个参数。他们两个是否相同并不重要。

修改后的代码可能如下

```
Dim strUpdDup As String = "UPDATE Duplicate_srno SET Problem=@problem " & _
                          "WHERE sr_no = @srno AND chalan_no=@chn_no"

Dim comm_Update As OleDb.OleDbCommand = New OleDb.OleDbCommand(strUpdDup, cnnOLEDB)
comm_Update.Parameters.AddWithValue("@problem",strProb)
comm_Update.Parameters.AddWithValue("@srno", cmbSn_no.Text)
comm_Update.Parameters.AddWithValue("@chn_no", cmbChal_no.Text) 
```

请注意我如何将`@problem`参数添加为集合中的第一个。现在，参数集合的顺序与占位符在命令文本中出现的顺序相同。

# search-engine - 搜索引擎中的基础词

> ID：15987294
> 
> 赞同：0
> 
> 时间：2013-04-13T11:30:06.400
> 
> 标签：search-engine

我想知道在建立倒排索引时，搜索引擎中是否有选择基础词的规则。我知道一般停用词不会被索引。但是其他人呢？我很困惑...在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:54:24.120

你的意思是去干吗？一些搜索引擎使用它。这意味着所有单词都被截断，所以`walk`,`walks`和`walked`都`walking`将被索引为`walk`。这同样适用于运行搜索之前的查询。它会导致更多的点击，因为搜索`walking in the woods`也会匹配“a `walk in the woods`”。

# iphone - Objective-C 中的异常

> ID：15987295
> 
> 赞同：0
> 
> 时间：2013-04-13T11:30:06.640
> 
> 标签：iphone, objective-c

我是一名 .NET 开发人员，我正在创建一个用于记录异常的 API。

现在我正在为objective-c创建一个。

我的问题是：在objective-c的异常中发现了哪些数据？

在 .NET 中，我们有 stacktrace 、 message ......等等 Objective-c 中的那些是什么？

提前致谢。

编辑：

请注意，我知道在 Objective-C 中有 try catch 块。这不是我要的。异常中有数据，例如代码（错误代码）。还有什么？

例如，Java 有堆栈跟踪。.NET 有堆栈跟踪和消息。

目标 c 的目标是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:57:16.117

只需检查[`NSException`类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSException_Class/Reference/Reference.html)以获取有关它支持哪些属性和方法的信息。

但是请注意，在 Objective-C 中捕获异常是非常罕见的，特别是，异常从不用于控制流，这与您可能习惯的其他语言/框架不同。

异常主要是针对应该在代码中修复而不是在运行时捕获的*程序员错误引发的。*其他类型的错误通常表示为`NSError`. [异常编程主题](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Exceptions/Exceptions.html#//apple_ref/doc/uid/10000012i)文档对此有更多详细信息。

在[Exceptions and the Cocoa Frameworks](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Exceptions/Articles/ExceptionsAndCocoaFrameworks.html#//apple_ref/doc/uid/TP40009045-SW1)一章中，它还指出：

> Cocoa 框架通常不是异常安全的。一般模式是异常只为程序员错误保留，捕获此类异常的程序应在之后立即退出。

# mysql - varchar 类型中的右空格

> ID：15987297
> 
> 赞同：0
> 
> 时间：2013-04-13T11:30:26.563
> 
> 标签：mysql

我在表中有 2 行，

```
field
-----
A 
A //and space 
```

也就是说`A`，如果`A`有正确的空格，列类型是`VARCHAR(3)`,

这个查询

```
 SELECT field FROM `table` WHERE field = 'A' 
```

返回两行，

问题：为什么返回行`A`也有正确的空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:54:56.557

MySQL 中的字符相等比较是在不考虑尾随空格的情况下执行的。如果要考虑尾随空格，可以使用`LIKE`运算符。

读这个。

[http://dev.mysql.com/doc/refman/5.5/en/char.html](http://dev.mysql.com/doc/refman/5.5/en/char.html)

# java - 在 TAG_DISCOVER 之后返回主活动

> ID：15987304
> 
> 赞同：0
> 
> 时间：2013-04-13T11:31:18.767
> 
> 标签：java, android, android-activity, nfc

我终于让我的应用程序对 TAG 做出反应。它由 2 个不同的活动构建而成。活动 A 是主要活动，在我启动应用程序时启动。然后是由 TAG_DISCOVER 发起的活动 B。但是我现在有两个问题。

(1) Activity B 有一个返回按钮，它只是完成()；如果应用程序是手动启动的，我会返回到活动 A，因为它首先是 startet。但是，如果通过发现的 TAG 直接启动活动 B，则不会启动 A，因此当按下 BackButton 时，应用程序会退出，这是我不想要的。

(2) 每次我发现 TAG Activity B 都会启动，即使它可能已经存在。但我希望活动 B 一次只能活动一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T02:30:59.117

这是与此类似的[问题](https://stackoverflow.com/questions/7113766/how-do-you-build-an-android-back-stack-when-an-activity-is-started-directly-from)

您应该能够使用相同的方法 - 检测到活动是从标签启动的，然后“返回”到主要活动。

# javadoc - 让@link 指向在 NetBeans 下使用 JavaDoc 的外部库的类

> ID：15987306
> 
> 赞同：0
> 
> 时间：2013-04-13T11:31:23.717
> 
> 标签：javadoc, netbeans-7

我在**NetBeans 7.3中有一个****Maven**项目。我正在为库准备**JavaDoc**。我需要放置一个指向我通过 POM 文件导入的外部库的类的链接。例如：

 ****```
@see {@link com.google.common.io.Files} 
```

问题是没有创建链接。在对[这个问题](https://stackoverflow.com/questions/5457840/using-link-classname-for-external-api-in-my-class)的回答中，作者表示在运行时必须将外部库添加到 JavaDoc 类路径中。

**如何将外部库添加到 NetBeans7.3 中的 JavaDoc 类路径？******

# jquery - 如何根据表格的类并排对齐表格

> ID：15987307
> 
> 赞同：-1
> 
> 时间：2013-04-13T11:31:30.627
> 
> 标签：jquery, kendo-ui

我正在从数据库中获取行 ID。如果 rowid 相同，那么我想将它们显示在同一行中。否则我想在不同的行中显示它们。我正在使用剑道 ui 列表视图控件。列表视图项应根据 rowid 对齐。

我的记录将来自数据库，例如

```
 id   name     rowid
  1   first      1
  2   second     1
  3   third      2
  4   fourth     2
  5   fifth      3
  6   sixth      4
  7   seven      5
  8   eight      5 
```

然后输出将采用如下形式

```
 first          second
  third          fourth
  fifth
  sixth
  seven           eight 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:37:45.523

首先，您必须确保数据库中的记录是`ordered`由`rowid`.

那么你的列表视图模板应该是这样的：

```
<div style="width: 400px;">
    <script type="text/x-kendo-tmpl" id="template">
        <div style="float: left;height: 100px; width:#=getColWidth(rowid,data)#px;">
            #=name#
        </div>
    </script>
</div>

<script>
function getColWidth(currentRowID,data)
{
    var dataLen = data.length, 
        numberOfColumn=0, 
        columnWidth,
        rowWidth = 400; /**suppose that your Row take 400 pixel in View*/

    for(var i = 0; i < dataLen; i++)
    {
        if(data.rowid == currentRowID)
        {
            numberOfColumn++;
        }
    }
    columnWidth = Math.round(rowWidth/numberOfColumn);
    return columnWidth;
}
</script> 
```

# java - String[] 到单个字符串

> ID：15987308
> 
> 赞同：0
> 
> 时间：2013-04-13T11:31:46.097
> 
> 标签：java, string

我真的不知道如何表达这个问题，因为我真的不明白该怎么做

我有两个“.java”文件

创建文件：

```
public void addRecords(String Package, String ClassName, String[] ListOfBoxes)
{
    format.format("%s", "package " + Package + ";"\n");
    format.format("%s", "@SideOnly(Side.CLIENT)\n");
    format.format("%s", "public class " + ClassName + " extends ModelBiped\n");
    format.format("%s", "{\n");
    format.format("%s", "    ModelRenderer " + ListOfBoxes + ";\n");
    format.format("%s", "}\n");

   } 
```

我试图运行的代码

```
 createFile file = new createFile();
    file.openFile();
    String[] Boxes = {"test1", "test2", "test3"};
    file.addRecords("default", "ModelTest", Boxes);         
    file.closeFile(); 
```

这是输出：

```
package net.minecraft.client.model;
@SideOnly(Side.CLIENT)
public class ModelTest extends ModelBiped
{
    ModelRenderer [Ljava.lang.String;@3794d372;
} 
```

这就是我要的

```
package net.minecraft.client.model;
@SideOnly(Side.CLIENT)
public class ModelTest extends ModelBiped
{
    ModelRenderer test1;
    ModelRenderer test2;
    ModelRenderer test3;
} 
```

这可能很简单，但我是 java 的菜鸟

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:38:57.797

You want the `[Arrays.deepToString](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5b%5d%29)` method. Rewrite the corresponding line in your `addRecords` method like this:

```
format.format("%s", "    ModelRenderer " + Arrays.deepToString(ListOfBoxes) + ";\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:39:16.620

try this for createFile:

```
public void addRecords(String Package, String ClassName, String[] ListOfBoxes)
{
    format.format("%s", "package " + Package + ";"\n");
    format.format("%s", "@SideOnly(Side.CLIENT)\n");
    format.format("%s", "public class " + ClassName + " extends ModelBiped\n");
    format.format("%s", "{\n");
    for (String box : listOfBoxes)
    {
        format.format("%s", "    ModelRenderer " + box + ";\n");
    }
    format.format("%s", "}\n");

} 
```

The difference is that this code renders each element in the array, while your code renders the entire array in one go.

# symfony - Symfony2 + Capifony 学说迁移

> ID：15987310
> 
> 赞同：3
> 
> 时间：2013-04-13T11:31:57.447
> 
> 标签：symfony, deployment, doctrine, capistrano, capifony

我已将 DoctrineMigrationsBundle 安装到我的 Symfony2 应用程序中，但是当我尝试部署到我的开发服务器时，我收到以下错误：

```
 Do you really want to migrate dev's database? (y/N)
y
  * executing "sh -c ' cd /var/www/vhosts/xyz.co.uk/releases/20130413181722 && php app/console doctrine:migrations:migrate --env=dev --no-interaction'"
    servers: ["x.xx.xx.xxx"]
    [x.xx.xx.xxx] executing command
 ** [out :: x.xx.xx.xxx]                                                               
 ** [out :: x.xx.xx.xxx]                     Application Migrations                    
 ** [out :: x.xx.xx.xxx]                                                               
 ** [out :: x.xx.xx.xxx] 
 ** [out :: x.xx.xx.xxx] Migrating up to 0 from 0
 ** [out :: x.xx.xx.xxx] 
 ** [out :: x.xx.xx.xxx] 
 ** [out :: x.xx.xx.xxx]                                                  
 ** [out :: x.xx.xx.xxx]   [Doctrine\DBAL\Migrations\MigrationException]  
 ** [out :: x.xx.xx.xxx]   Could not find any migrations to execute.      
 ** [out :: x.xx.xx.xxx]                                                  
 ** [out :: x.xx.xx.xxx] 
 ** [out :: x.xx.xx.xxx] 
 ** [out :: x.xx.xx.xxx] doctrine:migrations:migrate [--write-sql] [--dry-run] [--configuration[="..."]] [--db-configuration[="..."]] [--em[="..."]] [version]
 ** [out :: x.xx.xx.xxx] 
 ** [out :: x.xx.xx.xxx] 
    command finished in 802ms
*** [symfony:doctrine:migrations:migrate] rolling back
Do you really want to migrate dev's database back to version 0? (y/N) 
```

知道是什么原因造成的吗？

这是我的 deploy.rb 文件：

```
set :stage_dir, 'app/config/deploy'
set :stages, %w(production staging development)
require 'capistrano/ext/multistage'

set :application,           "xyz.co.uk"
set :user,                  "deployer"  # The server's user for deploys

set :normalize_asset_timestamps, false

set :repository,            "git@github.xyz/xyz.co.uk.git"
set :scm,                   :git
set :keep_releases,         3
after "deploy:update",      "deploy:cleanup"
set :use_sudo,              false
set :web_path,              "web"
set :shared_files,          ["app/config/parameters.yml"]
set :shared_children,       [app_path + "/logs", web_path + "/uploads"]
set :use_composer,          true
set :update_vendors,        true
set :dump_assetic_assets,   true
set :deploy_via,            :remote_cache

#logger.level = Logger::MAX_LEVEL

before "symfony:cache:warmup", "symfony:doctrine:migrations:migrate"

after "deploy:update_code" do
  capifony_pretty_print "--> Ensuring cache directory permissions"
  run "setfacl -R -m u:www-data:rwX -m u:`whoami`:rwX #{latest_release}/#{cache_path}"
  run "setfacl -dR -m u:www-data:rwX -m u:`whoami`:rwX #{latest_release}/#{cache_path}"
  capifony_puts_ok
end 
```

**更新**

问题是因为我没有提交学说迁移版本文件并将它们推送到 GitHub。这是对实体进行更改后的正确过程：

```
php app/console doctrine:migrations:diff 
php app/console doctrine:schema:update --force 
git add app/DoctrineMigrations/Version1234.php 
git commit -a -m "migration" 
git push origin develop 
cap development deploy 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T21:59:03.657

不是`php app/console doctrine:schema:update --force`但是`php app/console doctrine:migration:migrate`。

您可以`cap development deploy:migrations`在部署后使用它来执行迁移。

希望它有帮助。最良好的问候。

# d - 在 D 中使用 readf 读取元素数组

> ID：15987313
> 
> 赞同：4
> 
> 时间：2013-04-13T11:32:08.147
> 
> 标签：d

`readf`是否可以在不循环的情况下使用 D 读取元素数组（给定长度） ？

如果长度未知，是否有可能？

我尝试使用与格式化写作相同的语法`%(%d %)`，但它不起作用。

编辑：更一般地说，`readf`能够使用相同的格式`writef`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T20:52:30.617

目前有一个错误 ( [Bugzilla 10060](http://d.puremagic.com/issues/show_bug.cgi?id=10060) ) 阻止它工作，但它确实适用于逐行读取。

```
foreach (line; stdin.byLine())
{
    int[] result;
    formattedRead(line, "%(%d,%)", &result);
    writeln(result);
} 
```

# android - 使用 onStopTrackingTouch 将视频视图与 SeekBar 同步

> ID：15987317
> 
> 赞同：5
> 
> 时间：2013-04-13T11:32:46.570
> 
> 标签：android, android-mediaplayer, android-videoview, seekbar

我正在制作一个自定义视频播放器，我成功地将视频进度同步到 seekbak。当用户移动搜索栏处理程序时，我希望视频视图应将其进度与搜索栏的进度同步。我也实现了这一点，但它的行为也不是我想要的。让我详细说明一下这个问题，当我触摸 seekbar 处理程序并将其移动（向前或向后）时，我会更新 seekbar 进度，但是当我离开 seekbar 时，seekbar 处理程序会向前/向后移动一步，然后开始播放而不是从我离开的地方。

**这是我的代码：**

```
public class MainActivity extends Activity implements OnSeekBarChangeListener {

    private VideoView vvVideo;
    private SeekBar sbVideo;
    private Handler mHandler = new Handler();
    private Utilities utils;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.custom_video_player);
        initOnjects();
        playVideo();
    }

    private void initOnjects() {
        vvVideo = (VideoView) findViewById(R.id.vvVideo);
        sbVideo = (SeekBar) findViewById(R.id.sbVideo);
        sbVideo.setOnSeekBarChangeListener(this);
        utils = new Utilities();
    }

    private void playVideo() {
        Uri uri = Uri
                .parse("android.resource://com.sunshine.handsonequation/raw/title_video");
        vvVideo.setVideoURI(uri);
        sbVideo.setProgress(0);
        sbVideo.setMax(100);
        vvVideo.start();
        // Updating progress bar
        updateProgressBar();
    }

    private void updateProgressBar() {
        mHandler.postDelayed(updateTimeTask, 100);
    }

    private Runnable updateTimeTask = new Runnable() {

        @Override
        public void run() {
            long totalDuration = vvVideo.getDuration();
            long currentDuration = vvVideo.getCurrentPosition();

            // update progress bar
            int progress = (int) (utils.getProgressPercentage(currentDuration,
                    totalDuration));
            sbVideo.setProgress(progress);
            mHandler.postDelayed(this, 100);

        }
    };

    @Override
    public void onProgressChanged(SeekBar seekbar, int progress,
            boolean fromTouch) {
        // TODO Auto-generated method stub

    }

    // when user starts moving the progress handler
    @Override
    public void onStartTrackingTouch(SeekBar seekbar) {
        // remove message Handler from updating progress bar
        mHandler.removeCallbacks(updateTimeTask);
    }

    // when user stops moving the progress handler
    @Override
    public void onStopTrackingTouch(SeekBar seekbar) {
        mHandler.removeCallbacks(updateTimeTask);
        int totalDuration = vvVideo.getDuration();
        int currentPosition = utils.progressToTimer(sbVideo.getProgress(),
                totalDuration);

        // forward or backward to certain seconds
        vvVideo.seekTo(currentPosition);

        // update timer progress again
        updateProgressBar();
    }
} 
```

**实用程序类：**

```
public class Utilities {

    /**
     * Function to convert milliseconds time to
     * Timer Format
     * Hours:Minutes:Seconds
     * */
    public String milliSecondsToTimer(long milliseconds){
        String finalTimerString = "";
        String secondsString = "";

        // Convert total duration into time
           int hours = (int)( milliseconds / (1000*60*60));
           int minutes = (int)(milliseconds % (1000*60*60)) / (1000*60);
           int seconds = (int) ((milliseconds % (1000*60*60)) % (1000*60) / 1000);
           // Add hours if there
           if(hours > 0){
               finalTimerString = hours + ":";
           }

           // Prepending 0 to seconds if it is one digit
           if(seconds < 10){
               secondsString = "0" + seconds;
           }else{
               secondsString = "" + seconds;}

           finalTimerString = finalTimerString + minutes + ":" + secondsString;

        // return timer string
        return finalTimerString;
    }

    /**
     * Function to get Progress percentage
     * @param currentDuration
     * @param totalDuration
     * */
    public int getProgressPercentage(long currentDuration, long totalDuration){
        Double percentage = (double) 0;

        long currentSeconds = (int) (currentDuration / 1000);
        long totalSeconds = (int) (totalDuration / 1000);

        // calculating percentage
        percentage =(((double)currentSeconds)/totalSeconds)*100;

        // return percentage
        return percentage.intValue();
    }

    /**
     * Function to change progress to timer
     * @param progress -
     * @param totalDuration
     * returns current duration in milliseconds
     * */
    public int progressToTimer(int progress, int totalDuration) {
        int currentDuration = 0;
        totalDuration = (int) (totalDuration / 1000);
        currentDuration = (int) ((((double)progress) / 100) * totalDuration);

        // return current duration in milliseconds
        return currentDuration * 1000;
    }
} 
```

我不知道为什么会这样，我希望你们能给我一个提示或解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-04T14:39:14.717

我认为你对那个实用程序类有点太复杂了。将搜索栏的最大进度设置为等于视频持续时间。然后在 seekbar 侦听器上，您可以直接获取它的进度并寻找它。我希望你能明白我在下面输入的内容，这是我的第一个答案:)。

```
private void playVideo() {
    Uri uri = Uri..parse("android.resource://com.sunshine.handsonequation/raw/title_video");
    vvVideo.setVideoURI(uri);
    vvVideo.start();
    // Updating progress bar
    updateProgressBar();
}

private void updateProgressBar() {
    mHandler.postDelayed(updateTimeTask, 100);
}

private Runnable updateTimeTask = new Runnable() {
    public void run() {
        sbVideo.setProgress(vvVideo.getCurrentPosition());
        sbVideo.setMax(vvVideo.getDuration());
        mHandler.postDelayed(this, 100);
    }
};

public void onProgressChanged(SeekBar seekbar, int progress,boolean fromTouch) {

}
public void onStartTrackingTouch(SeekBar seekbar) {
    mHandler.removeCallbacks(updateTimeTask);
}
public void onStopTrackingTouch(SeekBar seekbar) {
    mHandler.removeCallbacks(updateTimeTask);
    vvVideo.seekTo(sbVideo.getProgress());
    updateProgressBar();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T14:19:17.900

Nirmal answer应该有效，但不是

```
vvVideo.seekTo(progress); 
```

它应该是

```
vvVideo.seekTo(progress*1000); 
```

seekTo 时间应该以毫秒为单位

[http://developer.android.com/reference/android/widget/VideoView.html#seekTo(int)](http://developer.android.com/reference/android/widget/VideoView.html#seekTo(int))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T13:50:55.207

求视频功能`SeekBar`进步`onProgressChanged`。

```
@Override
    public void onProgressChanged(SeekBar seekbar, int progress,
            boolean fromTouch) {
    if(fromTouch)
    {
        vvVideo.seekTo(progress);
    }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-14T11:15:14.573

```
int mSeekValue = (progress * mTotalDurationInMilliSeconds) / 1000 ;
vvVideo.seekTo(mSeekValue); 
```

代替

```
vvVideo.seekTo(progress*1000); 
```

# php - 在 smarty 中，如何检查关联数组是否为空？

> ID：15987319
> 
> 赞同：2
> 
> 时间：2013-04-13T11:32:50.427
> 
> 标签：php, smarty

我为它做了谷歌，但无法得到正确的解决方案。谁能帮我检查关联数组是否为空。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-18T09:53:59.673

在 Smarty3 中，您可以使用[PHP 的 empty() 函数](http://www.php.net/manual/de/function.empty.php "PHP 的 empty() 函数")：

`somefile.php`

```
<?PHP
$smarty->assign('array',array());
$smarty->display('template.tpl'); 
```

`template.tpl`

```
{if empty($array)}
  Array is empty
{else}
  Array is not not empty
{/if} 
```

输出`Array is empty`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-12T20:31:24.170

似乎`Smarty`只需检查数组是否存在。例如

`somefile.php`

```
<?PHP
$smarty->assign('array',array());
$smarty->display('template.tpl'); 
```

`template.tpl`

```
{if $array}
  Array is set
{else}
  Array is not set
{/if} 
```

输出`Array is set`。

虽然在 php...

```
<?PHP
$array = array();
if($array){
  echo 'Array is set';
}else{
  echo 'Array is not set';
} 
```

输出`Array is not set`。

为了解决这个问题，我做了一些解决方法：使用以下代码为 smarty 创建了一个修饰符： `modifier.is_empty.php`

```
<?PHP
function smarty_modifier_is_empty($input)
{
    return empty($input);
}
?> 
```

将该代码段保存在您的`SMARTY_DIR`,`plugins`目录中，名称为`modifier.is_empty.php`，您可以像这样使用它：

`template.tpl`（考虑使用相同的`somefile.php`）

```
{if !($array|is_empty)}
  Array is not empty
{else}
  Array is empty
{/if} 
```

这将输出`Array is empty`.

关于使用此修饰符再次使用`@count`修饰符的注意事项：
`@count`将计算数组中元素的数量，而此修饰符只会告诉它是否为空，因此此选项在性能方面更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:37:44.967

您可以将变量直接放在 if 语句中，只要您确定它总是会像这样设置（为空或不为空）`{if !$array}`。如果您正在寻找类似于三元运算符的东西，您可以使用名为[default](http://www.smarty.net/docs/en/language.modifier.default.tpl)的变量修饰符，例如。`$array|default:"empty"`. [smarty docs](http://www.smarty.net/docs/en/tips.tpl)和他们的[论坛](http://www.smarty.net/forums/viewtopic.php?t=300&sid=01b54b7b761b55cd7215617adc92ab39)上也有一些帮助。使用 PHP 的 empty 也对我有用。

# python - 如何计算没有。大数区间的回文数？

> ID：15987320
> 
> 赞同：3
> 
> 时间：2013-04-13T11:32:51.147
> 
> 标签：python, algorithm, data-structures, palindrome

我想计算大区间数据中有多少回文数说`10^15`

我的简单代码（python）片段是：

```
def count_palindromes(start, end):
    count = 0
    for i in range(start, end + 1):
        if str(i) == str(i)[::-1]:
            count += 1

    return count

start = 1000 #some initial number
end = 10000000000000 #some other large number

if __name__ == "__main__":
    print count_palindromes(start, end) 
```

它是一个简单的程序，一个一个地检查每个数字。它耗时且占用大量计算机资源。

有没有其他方法/技术可以用来计算回文数？任何用于此的算法？

我想尽量减少生成输出所花费的时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T09:14:25.457

当您想计算在两个限制之间具有某些给定属性的数字时，解决稍微简单的问题通常很有用

> `0`和之间有多少具有给定属性的数字`n`？

固定一个限制可以使问题更容易解决。当较简单的问题解决后，您可以通过简单的减法得到原始问题的解决方案：

```
countBetween(a,b) = countTo(b) - countTo(a) 
```

或者`countTo(b ± 1) - countTo(a ± 1)`，取决于是否包含限制`countTo`以及应包含哪些限制`countBetween`。

如果可能出现负极限（我认为不是回文），`countTo(n)`则应该是`<= 0`负极限`n`（可以将函数视为相对于计数度量的积分）。

所以让我们确定

```
palindromes_below(n) = #{ k : 0 <= k < n, k is a palindrome } 
```

如果我们假设 0 不是回文，我们会在第一部分得到更统一的公式，所以对于第一部分，我们这样做。

**第 1 部分：**有多少个给定位数`d`的回文？

第一个数字不能是`0`，否则它是不受限制的，因此有 9 种可能的选择（`b-1`对于任意基数的回文`b`）。

最后一个数字与第一个数字相同，因为它应该是回文。

第二个数字 - if `d >= 3`- 可以独立于第一个数字任意选择。这也决定了倒数第二个数字。

如果`d >= 5`，也可以自由选择第三位，以此类推。

片刻的思考表明，对于`d = 2*k + 1`or `d = 2*k + 2`，有一些`k`数字可以不受限制地选择，而一个数字（第一个）受到限制，即它是非零的。所以有

```
9 * 10**k 
```

`d`-digit 回文然后（`(b-1) * b**k`对于 base `b`）。

这是一个很好且简单的公式。由此，使用几何和的公式，我们可以很容易地获得小于 10 ^n的回文数（即最多`n`位数）：

*   如果`n`是偶数，则数为

    ```
     n/2-1                n/2-1
    2 *  ∑ 9*10**k =  18 *    ∑ 10**k = 18 * (10**(n/2) - 1) / (10 - 1) = 2 * (10**(n/2) - 1)
        k=0                  k=0 
    ```

*   如果`n`是奇数，则数为

    2 * (10**((n-1)/2) - 1) + 9 * 10**((n-1)/2) = 11 * (10**((n-1)/2) - 2

（对于一般基数`b`，数字分别`2 * (b**(n/2) - 1)`为`(b+1) * b**((n-1)/2) - 2`）。

这不再那么统一了，但仍然很简单：

```
def palindromes_up_to_n_digits(n):
    if n < 1:
        return 0
    if n % 2 == 0:
        return 2*10**(n//2) - 2
    else:
        return 11*10**(n//2) - 2 
```

（请记住，我们还不算 0）。

现在剩下的部分。`n > 0`给定`k`数字，回文`< n`要么是

*   少于`k`数字的回文，有`palindromes_up_to_n_digits(k-1)`它们，或
*   `k`正好数字小于 的回文数`n`。

所以还是要算后者。

**第2部分：**

让`m = (k-1)//2`和

```
d[1] d[2] ... d[m] d[m+1] ... d[k] 
```

的十进制表示`n`（整个事情对其他基础的工作原理相同，但我没有在下面明确提及），所以

```
 k
n = ∑ d[j]*10**(k-j)
   j=1 
```

对于每一个`1 <= c[1] < d[1]`，我们可以自由选择`m`数字`c[2], ..., c[m+1]`来获得一个回文。

```
p = c[1] c[2] ... c[m+1] {c[m+1]} c[m] ... c[2] c[1] 
```

（`c[m+1]`奇数出现一次，偶数出现`k`两次`k`）。现在，

```
c[1]*(10**(k-1) + 1) <= p < (c[1] + 1)*10**(k-1) <= d[1]*10**(k-1) <= n, 
```

所以所有这些`10**m`回文（对于给定的选择`c[1]`！）都小于`n`.

因此存在`(d[1] - 1) * 10**m` `k`-digit 回文数，其第一个数字小于 的第一个数字`n`。

现在让我们考虑第一个数字小于的`k`-digit 回文串。`d[1]``n`

如果`k == 2`，则只有一个 if `d[1] < d[2]`，否则没有。如果`k >= 3`，对于每个`0 <= c[2] < d[2]`，我们可以自由选择`m-1`数字`c[3] ... c[m+1]`来获得回文

```
p = d[1] c[2] c[3] ... c[m] c[m+1] {c[m+1]} c[m] ... c[3] c[2] d[1] 
```

我们看到`p < n`：

```
d[1]*(10**(k-1) + 1) + c[2]*(10**(k-2) + 10)
         <= p < d[1]*(10**(k-1) + 1) + (c[2] + 1)*(10**(k-2) + 10)
         <= d[1]*(10**(k-1) + 1) + d[2]*(10**(k-2) + 10) <= n 
```

（假设`k > 3`,`k == 3`替换`10**(k-2) + 10`为 10）。

所以这使得`d[2]*10**(m-1)` `k`-digit 回文第一个数字`d[1]`和第二个数字小于`d[2]`。

继续，对于`1 <= r <= m`，有

```
d[m+1]*10**(m-r) 
```

`k`-digit 回文数，其第一个`r`数字是`d[1] ... d[r]`并且其`r+1`^(st)数字小于`d[r+1]`。

总结一下，有

```
(d[1]-1])*10**m + d[2]*10**(m-1) + ... + d[m]*10 + d[m+1] 
```

`k`- 数字回文，其前一位`m+1`数字小于 的对应数字，`n`所有前面的数字都等于 的对应数字`n`。显然，这些都小于`n`。

有一位数的`k`回文数`p`，其第一个`m+1`数字是`d[1] .. d[m+1]`，我们也必须计算它 if `p < n`。

所以，总结起来，现在也加入 0，我们得到

```
def palindromes_below(n):
    if n < 1:
        return 0
    if n < 10:
        return n   # 0, 1, ..., n-1

    # General case
    dec = str(n)
    digits = len(dec)
    count = palindromes_up_to_n_digits(digits-1) + 1   # + 1 for 0
    half_length = (digits-1) // 2
    front_part = dec[0:half_length + 1]
    count += int(front_part) - 10**half_length
    i, j = half_length, half_length+1
    if digits % 2 == 1:
        i -= 1
    while i >= 0 and dec[i] == dec[j]:
        i -= 1
        j += 1
    if i >= 0 and dec[i] < dec[j]:
        count += 1
    return count 
```

由于限制都包含在给定问题的计数中（除非 OP 被误解），所以我们有

```
def count_palindromes(start, end):
    return palindromes_below(end+1) - palindromes_below(start) 
```

快速解决方案：

```
>>> bench(10**100,10**101-1)
900000000000000000000000000000000000000000000000000 palindromes between
10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
and
99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
in 0.000186920166016 seconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T12:13:21.570

实际上，这对 Google Codejam 来说是个问题（我很确定你不应该得到外界的帮助），但唉，我会投入 2 美分。

我为这个大问题想出（但未能实现）的想法是预编译（在运行时生成，而不是硬编码到源代码中）所有回文数的列表小于`10^15`（不是很多，大约需要 60 秒) 然后找出这些数字中有多少位于每个输入的范围之间。

编辑：这对问题不起作用`10^100`，就像你说的那样，这将是一个数学解决方案（虽然如果你看有一个模式，所以你只需要一个算法来生成具有该模式的所有数字）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T12:00:54.867

我认为这适用于像 Project Euler 之类的东西......我的粗略想法是生成所有数字，直到您的限制长度的一半（例如，如果您要达到 99999，则上升到 99）。然后反转它们，将它们附加到未反转的那个，并可能在中间添加一个数字（对于奇数长度的数字）。您可能需要对重复项或奇怪的项进行一些过滤（例如，如果您在数字或 sommat 的开头有一个零），但这应该比您所做的要快得多。

# sql - 在 SQL 中连接多个表

> ID：15987321
> 
> 赞同：18
> 
> 时间：2013-04-13T11:33:00.460
> 
> 标签：sql, sql-server, join

有人可以向我解释一下加入吗？

内连接根据 where 条件选择公共数据。

左外连接从左侧选择所有数据，而不考虑公共数据，但从右表中获取公共数据，反之亦然。

我知道基础知识，但在加入超过 5、8、10 个表时问题仍然存在。

假设我有 10 个表要加入。如果我与前 5 个表有内连接，现在尝试对第 6 个表应用左连接，那么查询将如何工作？

我的意思是说现在前5个表的结果集将被视为左表，第6个将被视为右表？或者只有第五张桌子会被认为是左边，第六张是右边？请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-13T13:18:18.323

当连接多个表时，每个连接的输出逻辑上形成一个进入下一个连接的虚拟表。

因此，在您的问题示例中，连接前 5 个表的复合结果将被视为左侧表。

有关这方面的更多信息，请参阅[Itzik Ben-Gan 的逻辑查询处理海报](http://www.sql.co.il/books/insidetsql2008/Logical%20Query%20Processing%20Poster.pdf)。

连接中涉及的虚拟表可以通过定位`ON`子句来控制。例如

```
SELECT *
FROM   T1
       INNER JOIN T2
         ON T2.C = T1.C
       INNER JOIN T3
                  LEFT JOIN T4
                    ON T4.C = T3.C
         ON T3.C = T2.C 
```

相当于`(T1 Inner Join T2) Inner Join (T3 Left Join T4)`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-13T13:35:36.630

`JOIN`按顺序考虑 ' 是有帮助的，所以前者是正确的。

```
SELECT *
  FROM a
  INNER JOIN b ON b.a = a.id
  INNER JOIN c ON c.b = b.id
  LEFT JOIN d ON d.c = c.id
  LEFT JOIN e ON e.d = d.id 
```

将是来自`a`和所有条件匹配的所有字段，加上其条件匹配的值加上`b`其所有条件匹配的所有内容。`c``ON``d``e`

我知道这`RIGHT JOIN`是完全可以接受的，但根据我的经验，我发现这是不必要的——我几乎总是从左到右加入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T11:41:52.707

**> 简单的 INNER JOIN VIEW 代码...**

```
CREATE VIEW room_view
AS SELECT a.*,b.*
FROM j4_booking a INNER JOIN j4_scheduling b
on a.room_id = b.room_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-06T15:41:45.713

刚刚从 W3School 中给出的示例数据库中尝试了以下内容。对我来说工作得很好。

```
 SELECT Orders.OrderID, Customers.CustomerName, Orders.OrderDate, Products.ProductName, Products.ProductID
    FROM Orders
    INNER JOIN Products
    INNER JOIN Customers
    ON Orders.CustomerID=Customers.CustomerID; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-11T10:27:50.757

你可以像这样申请加入..

```
select a.*,b.*,c.*,d.*,e.*  
from [DatabaseName].[Table_a] a 
INNER JOIN [DatabaseName].[Table_b] b ON a.id = b.id 
INNER JOIN [DatabaseName].[Table_c] c ON b.id=c.id 
INNER JOIN [DatabaseName].[Table_d] d on c.id=d.id 
INNER JOIN [DatabaseName].[Table_e] e on d.id=e.id where a.con=5  and 
b.con=6 
```

在这里，在 a.* 的位置和 where 条件下，您可以显示您喜欢的列（已归档）以及在 where 条件下的条件。您可以根据自己的选择插入更多表和数据库。但请注意，如果您在不同的数据库中工作，则需要提及数据库名称和别名。

# java - 打印格式 Java

> ID：15987323
> 
> 赞同：0
> 
> 时间：2013-04-13T11:33:14.933
> 
> 标签：java

```
 out.append("Line " + (j+1) + ": ");  
 System.out.print("Line " + (j+1) + ":");
 for (int i = 0; i < lotto.length;i++){
     lotto[i] = r.nextInt(45)+1;                                                                
     out.append(lotto[i] + " ");
     System.out.print(lotto[i] + " ");
 } 
```

现在打印如下

> 1号线：41 7 38 20 38 39 2号线：12 35 5 27 4 33 3号线：9 3 10 15 35 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:35:47.957

因为您在打印后正在打印新行`Line n`

您应该在打印数字`println`的内部之后使用。`for`

喜欢

```
// print "Line n"
System.out.print("Line " + (j+1) + ":");

for (int i = 0; i < lotto.length;i++){
    lotto[i] = r.nextInt(45)+1;                                                             
    out.append(lotto[i] + " ");
    // Print in the same line the numbers
    System.out.print(lotto[i] + " ");
}
// Print the new line
System.out.println(); 
```

# image - 如何使用带有 PUT 方法的 stream_context_create 函数上传图像和其他表单数据

> ID：15987325
> 
> 赞同：0
> 
> 时间：2013-04-13T11:33:18.010
> 
> 标签：image, curl, upload, put

我正在使用以下功能在远程服务器上发布数据和图像。

```
function do_post_request_put($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
          'method' => 'PUT',
          'content' => $data
        ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }

  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
} 
```

我正在调用如下函数。

```
$arr[user][full_name]=$_POST[full_name];

$arr[user][email]=$_POST[email];

$arr[user][password]=$_POST[password];

$arr[user][profile_picture]=$_FILES[image];

$post_arr=http_build_query($arr);

$resp=do_post_request_put($url, $post_arr, $optional_headers = null); 
```

# linkedin - 远程服务器返回错误：(403) Forbidden。从我的应用程序发布工作时发生错误

> ID：15987331
> 
> 赞同：0
> 
> 时间：2013-04-13T11:33:43.673
> 
> 标签：linkedin, jobs, posting

从我的应用程序发布工作时，我收到错误“**远程服务器返回错误：(403) Forbidden。 ”。**`Job API`

我从这里找到了代码：

[http://developer.linkedin.com/documents/code-sample-posting-job-c](http://developer.linkedin.com/documents/code-sample-posting-job-c)。

知道我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:16:42.263

你可能会遇到油门限制。

[https://developer.linkedin.com/documents/throttle-limits](https://developer.linkedin.com/documents/throttle-limits)

感谢

# c++ - 将地图的内容传输到自定义数据结构的单个向量

> ID：15987332
> 
> 赞同：0
> 
> 时间：2013-04-13T11:33:44.617
> 
> 标签：c++, templates, map, vector, stl

当我尝试执行一个调用我的方法的程序时，我得到一个分段错误（核心转储），但我只是看不到错误。我犯了某种菜鸟错误吗？

```
#include<map>
#include<vector>
//#include<iostream>
//#include<algorithm>
using namespace std;

template <class T>
class Record{
   public:
      T item;
      int total;
};

template <class T>
class Counter{
   public:
      map<T, int> m;

void printSummary(){

      typename map<T, int>::const_iterator itr; 
      vector< Record<T> > printlist;
      int i = 0;

      for( itr = m.begin(); itr != m.end(); ++itr ){
         printlist[i].item = (*itr).first;
         printlist[i].total = (*itr).second;
         i++;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:35:39.223

`printlist``vector`执行以下行时为空：

```
printlist[i].item = (*itr).first;
printlist[i].total = (*itr).second; 
```

这会导致越界访问，导致未定义的行为，在这种情况下是分段错误。使用`push_back()`或创建`vector`具有所需数量的元素并保持`for`循环不变：

```
vector< Record<T> > printlist(m.size()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:40:46.440

您可以访问

```
printlist[i] 
```

只有当向量有足够的元素时。您可以使用另一个地图来获取具有随机访问权限的容器。

# java - Eclipse 格式化。在为块打开大括号之前删除新行

> ID：15987333
> 
> 赞同：1
> 
> 时间：2013-04-13T11:33:50.170
> 
> 标签：java, eclipse, block, braces

有没有办法阻止 Eclipse 在块打开大括号之前添加新行？

Eclipse 格式如下代码

```
p = new JPanel(new GridLayout(0, 1)); {
    p.add(login);
    p.add(password);
}
frame.add(p, BorderLayout.EAST); 
```

至

```
p = new JPanel(new GridLayout(0, 1));
{
    p.add(login);
    p.add(password);
}
frame.add(p, BorderLayout.EAST); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:43:03.440

转到项目-> 属性-> Java Coe 样式-> 格式化程序-> 配置工作区设置-> 编辑-> 大括号

将“匿名类声明”更改为“同一行”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T22:52:29.683

我有时也使用这种技术。

我认为您将无法在 Eclipse 中执行此操作。

我会说，这很好:)

想想，`p = new JPanel(new GridLayout(0, 1));`不是一个控制下一个块的语句，因此它不能打开它。在阅读代码时，我们发现`}`我们直观地期望开头的 for/if/etc 是`{`. 但是，`p = new ...`这没有任何意义——首先想到的是，IF 或其他东西在哪里！:)

我们只希望块与外部块分开 - 在文本上或在 vars 可见性中。因此，当向上滚动时，我们发现`{`以相同的缩进开始（之前没有控制或其他语句） - 就是这样。没有其他想法，一切都很好。

只要改变你的想法，你就会喜欢`{`排队。

ps 我使用标准格式，所以所有其他起始大括号都在我的代码的行尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T17:40:08.640

我也非常喜欢在创建类时将初始化代码分组到一个块中。所以这是我使用的一个利用静态初始化器的小技巧：

```
p = new JPanel(new GridLayout(0, 1)) {{
    add(login);
    add(password);
}};
frame.add(p, BorderLayout.EAST); 
```

如您所见，您可以调用“add”，而无需在它们前面加上“p”。如：“p.add”，您不再需要担心 Eclipse 将大括号放在下一行的开头，因为分号放置在整个块的末尾。

# c++ - VisualStudio - 很长的观察变量的别名

> ID：15987334
> 
> 赞同：1
> 
> 时间：2013-04-13T11:33:56.173
> 
> 标签：c++, visual-studio, debugging

我正在尝试调试一个树状结构，所以我在每个级别上都做了一个手表。我走的越低，手表变量名就越长。有没有办法重命名它们：

```
{,,HTM_Projekt.exe}*(Node*){*}(((*((*(((*((*this).htm)).top)._Myptr)).input)))._Myptr) 
```

至

```
Level1Node 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:50:44.383

没有更多关于你如何构建它的细节。我建议您制作一个与您的树中的内容相同的类型的变量，然后将该变量放在手表上。这只是意味着你会有一些重复的数据，但可以清楚地看到它是什么。

也许它看起来像。

```
Node* kpLevel1Node = (Node*){*}(((*((*(((*((*this).htm)).top)._Myptr)).input)))._Myptr); 
```

然后您只需添加 kpLevel1Node 即可观看。

编辑1：基于评论。

一个指针只有 4 个字节，并且引用了相同的数据。但是，如果您在调试时暂时无法选择额外的 4 个字节。

那么我建议你使用typedef。使长 rediculas 类型变得更具可读性。和以前一样，如果没有更多代码显示您的实现，那么准确的答案是不可能的

# kendo-ui - 将 Kendo UI Autocomplete 的选定结果的 ID 保留在隐藏的输入中

> ID：15987336
> 
> 赞同：2
> 
> 时间：2013-04-13T11:34:18.230
> 
> 标签：kendo-ui

我编写了这段代码来使用剑道 UI 自动完成功能。我需要在文本框中显示所选结果的标题并将 if 保留在一些隐藏的输入中，我怎样才能获得 id。似乎选择不起作用。

```
 $("[data-autocomplete]").each(function () {
            var luurl = $(this).attr('data-lookupurl');
            var thisElemt = $(this);
            $(this).kendoAutoComplete({
                minLength: 3,
                separator: ", ",
                dataTextField: "title",
                select: function (e) {
                    var selectedOne = this.dataItem(e.item.Index());
                    console.log(kendo.stringify(selectedOne));
                },
                dataSource: new kendo.data.DataSource({
                    serverFiltering: true,
                    serverPaging: true,
                    pageSize: 20,
                    transport: {
                        read: luurl,
                        dataType: "json",
                        parameterMap: function (data) {
                            return { title: thisElemt.val() };
                        },
                        schema: {
                            model: {
                                id: "id",
                                fields: {
                                    id: { type: "id" },
                                    title: { type: "string" }
                                }
                            }
                        }
                    }
                })
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T23:12:28.467

有一个错字错误，你应该使用：`e.item.index()`而不是`e.item.Index()`（`index`是小写的）。

所以选择功能将是：

```
select       : function (e) {
    var selectedOne = this.dataItem(e.item.index());
    console.log(kendo.stringify(selectedOne));
}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-15T14:25:47.590

更简单的方法是：

```
var autocomplete = $("#autoCompleteId").data("kendoAutoComplete");
console.log(autocomplete.listView._dataItems[0]); 
```

您可以访问 autocomplete.listView._dataItems[0] 对象中的选择数据项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T09:19:33.000

你可以使用脚本

```
<script>  
$(document).ready(function () {  
  $("#categories").change(function () {  
    var url = '@Url.Content("~/")' + "Limitations/ThanaByDistrict_SelectedState";  
    var ddlsource = "#categories";  
    var ddltarget = "#target";  
    $.getJSON(url, { Sel_StateName: $(ddlsource).val() }, function (data) {  
      $(ddltarget).empty();  
      $(ddltarget).val(data);  
    });  
  });  
});  
</script> 
```

在控制器中

```
// Get selected combox value  
 public JsonResult ThanaByDistrict_SelectedState ( Guid Sel_StateName )  
 {  
   JsonResult result = new JsonResult ( );  
   objects temp=db . objects . Single ( m => m . ob_guid == Sel_StateName );  
   result . Data = temp.ob_code;  
   result . JsonRequestBehavior = JsonRequestBehavior . AllowGet;  
   return result;  
 } 
```

有关详细信息，您可以查看此[链接](http://atikpassion.blogspot.com/2013/05/kendo-ui-web-selected-combobox-value.html)

# mysql - Mysql ORDER BY varchar 列存储为数字

> ID：15987339
> 
> 赞同：0
> 
> 时间：2013-04-13T11:34:42.497
> 
> 标签：mysql

我有一个格式为 varchar(11) 的 mysql 列 (staffid)。此列用于存储员工id，一般为1,2,3............40,60...我不能为该列使用int格式，因为对于合同员工它将 id 存储为 cont-1，而对于普通员工，它将 id 存储为整数 1、2、3 ...虽然我尝试使用带有该列的 ORDER BY 子句来获取数组，但行没有以正确的顺序获取。我的sql查询是：

```
SELECT * FROM database ORDER BY CAST('staffid' as UNSIGNED INTEGER) ASC 
```

如何在 mysql 查询中格式化该 varchar 列，以便普通员工将其视为整数列作为该列的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:35:22.317

正确的语法是，

```
SELECT  * 
FROM    `database` 
ORDER   BY CAST(staffid AS UNSIGNED) ASC 
```

因为您提到有一些具有这种格式的 id `cont-1`。可能您可以添加`WHERE`子句来过滤特定的 ID，

```
SELECT  * 
FROM    `database`
WHERE   staffid NOT LIKE 'cont%' 
ORDER   BY CAST(staffid AS UNSIGNED) ASC 
```

# android - 使用 GCM 将声音文件或图像作为推送通知发送

> ID：15987340
> 
> 赞同：2
> 
> 时间：2013-04-13T11:34:48.217
> 
> 标签：android, google-cloud-messaging

我正在开发 android 中的推送通知 GCM。我完成了基本功能意味着我正在发送一条短信并在 android 设备上将其作为通知接收。现在我想发送声音和图像文件，这将是我在 android 上的通知。有什么办法可以做到，因为 GCM 允许大小为 4kb 的消息，而且我没有看到任何将图像或声音作为通知发送的示例。任何帮助或链接或教程将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T11:40:26.457

You're right about the size limit. It is 4kb and cannot be any larger. If you need to send an image / sound or other binary data, send custom json with the message that points to a URL that houses the binary data (say [http://myserver.com/mysoundfile.ext](http://myserver.com/mysoundfile.ext)).

Your custom `GCMIntentService` can parse the data and download the file through an `AsyncTask`. If the file size is large use the `DownloadManager` service.

# c# - 如何在表格布局面板中为用户控件触发鼠标单击事件

> ID：15987345
> 
> 赞同：1
> 
> 时间：2013-04-13T11:35:11.093
> 
> 标签：c#, winforms, user-controls, mouseevent, tablelayoutpanel

我在为表格布局面板中的用户控件触发鼠标单击事件时遇到问题。我用这个类创建了一个用户控件。

```
public partial class ComputerControl : UserControl
{
    private int computerId;

    public int ComputerId
    {
        get { return computerId; }
        set { computerId = value; }
    }

    private String computerName;

    public String ComputerName
    {
        get { return computerName; }
        set { computerName = value; }
    }

    private String computerIp;

    public String ComputerIp
    {
        get { return computerIp; }
        set { computerIp = value; }
    }

    private String computerMacAddress;

    public String ComputerMacAddress
    {
        get { return computerMacAddress; }
        set { computerMacAddress = value; }
    }

    private Image computerPicture;

    public Image ComputerPicture
    {
        get { return computerPicture; }
        set { computerPicture = value; }
    }

    private RightClikControl rightClick = new RightClikControl();

    public RightClikControl RightClick
    {
        get { return rightClick; }
        set { rightClick = value; }
    }

    public ComputerControl(int computerId, String computerName, String computerIp, String computerMacAddress, Image computerPicture)
    {
        InitializeComponent();
        ComputerId = computerId;
        ComputerName = computerName;
        ComputerIp = computerIp;
        ComputerMacAddress = computerMacAddress;
        ComputerPicture = computerPicture;
        labelComputerState.Text = ComputerName;
        pictureBoxComputer.Image = ComputerPicture;
    }

    private void ComputerControl_MouseClick(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Right)
        {
            RightClick.Show();
        }
    }
} 
```

我使用这种方法在表格布局面板中添加了多个控件。

```
private void InsertComputers()
    {
        int i, j;
        tableLayoutPanelComputers.Visible = false;
        tableLayoutPanelComputers.Controls.Clear();
        tableLayoutPanelComputers.RowStyles.Clear();
        tableLayoutPanelComputers.ColumnStyles.Clear();
        tableLayoutPanelComputers.ColumnCount = tableLayoutPanelComputers.Size.Width / 130;
        tableLayoutPanelComputers.RowCount = tableLayoutPanelComputers.Size.Height / 100;

        for (i = 0; i < tableLayoutPanelComputers.RowCount; i++)
        {
            tableLayoutPanelComputers.RowStyles.Add(new RowStyle(SizeType.Absolute, 100));
        }
        for (j = 0; j < tableLayoutPanelComputers.ColumnCount; j++)
        {
            tableLayoutPanelComputers.ColumnStyles.Add(new ColumnStyle(SizeType.Absolute, 130));
        }
        int clientCount = 0;
        for (i = 0; i < tableLayoutPanelComputers.RowCount && clientConf.Count > clientCount; i++)
        {
            for (j = 0; j < tableLayoutPanelComputers.ColumnCount && clientConf.Count > clientCount; j++)
            {
                ComputerControl cc = new ComputerControl(clientConf[clientCount].ClientId, clientConf[clientCount].ClientName, clientConf[clientCount].ClientIp, clientConf[clientCount].ClientMacAddress,Images.Pc_PowerOff);
                tableLayoutPanelComputers.Controls.Add(cc, j, i);
                clientCount++;
            }
        }
        tableLayoutPanelComputers.Visible = true;
    } 
```

因此，当我在表格布局面板单元格中的用户控件上单击鼠标右键时，任何事情都会启动。

我在编码什么错误？

# algorithm - Netlogo，创建避障算法

> ID：15987352
> 
> 赞同：4
> 
> 时间：2013-04-13T11:35:48.250
> 
> 标签：algorithm, simulation, netlogo, agent-based-modeling, multi-agent

我在 NetLogo 中模拟行人运动，并且在从头开始创建避障算法时遇到了麻烦。网上有算法，但它们不适合移动障碍物（其他行人）。此外，我的代理正在从他们的生成点（A 点）移动到他们的目标（B 点）。

这是我的 NetLogo 算法：

```
globals [ wall walkway center dest ]
turtles-own [ gender goal velocity spawnpoint mid turn ]

to setup
  clear-all
  ask patches[
set wall patches with [
  (pxcor > 3 and pycor > 3) or 
  (pxcor < -3 and pycor > 3) or
  (pxcor < -3 and pycor < -3) or
  (pxcor > 3 and pycor < -3)
  ]
set walkway patches with [
  (pxcor > -4 and pxcor < 4) or
  (pycor > -4 and pycor < 4) 
]

set center patch 0 0
  ]

  ask patches [
set pcolor black
  ]

  ask walkway [
set pcolor 9
  ]

  crt population [
set velocity 0.1
set mid 0

set gender random 2
if gender = 0 [set color red]
if gender = 1 [set color blue]

set spawnpoint random 4
if spawnpoint = 0 [ move-to one-of walkway with [not any? turtles-here and (pxcor < -11)]]
if spawnpoint = 1 [ move-to one-of walkway with [not any? turtles-here and (pycor > 11)]]
if spawnpoint = 2 [ move-to one-of walkway with [not any? turtles-here and (pxcor > 11)]]
if spawnpoint = 3 [ move-to one-of walkway with [not any? turtles-here and (pycor < -11)]]

set goal random 4
while [ goal = spawnpoint ] [ set goal random 4 ]
if spawnpoint != 0 and goal = 0 [set goal patch -16 0]
if spawnpoint != 1 and goal = 1 [set goal patch 0 16]
if spawnpoint != 2 and goal = 2 [set goal patch 16 0]
if spawnpoint != 3 and goal = 3 [set goal patch 0 -16]
  ]

  reset-ticks

end
to decelerate
  ifelse velocity > 0.01
  [ set velocity velocity - 0.01 ]
  [ rt 5 ]
end

to accelerate
   if velocity < 0.1
   [ set velocity velocity + 0.01 ]
end

to go 

  ask turtles [
   ifelse patch-here != goal[
     set turn random 2
     if distance center < 3 [ set mid 1]
     if mid = 0 [ set dest center ]
     if mid = 1 [ set dest goal ]
     face dest
     ifelse any? other turtles-on patches in-cone 1.5 60
       [ if any? other turtles-on patches in-cone 1.5 60
         [ bk velocity
           rt 90 ]  ]
       [ accelerate
         face dest
         fd velocity ]
  ]
  [ die ]

  ]
end 
```

本次模拟的模拟环境是一个路口：

[http://imgur.com/nQzhA7g,R5ZYJrp#0](http://imgur.com/nQzhA7g,R5ZYJrp#0)

（对不起，我需要 10 个代表来发布图片：（）

图 1 显示了设置后的环境状态。图 2 显示了代理移动到他们的目标（目标！= 他们的生成点）后会发生什么。面向不同方向的特工显示了从中心的特工杂乱无章中走出来的特工，现在正朝着他们的目标前进。然而，由于我的算法，中心的代理被困在那里。当代理数量更多时，模拟会出现更多问题，这意味着它们只会在环境中心杂乱无章，并且在移动时会卡顿。

我的算法基于[http://files.bookboon.com/ai/Vision-Cone-Example-2.html](http://files.bookboon.com/ai/Vision-Cone-Example-2.html)。原谅我的算法，我一周前开始在 NetLogo 中编程，直到现在我仍然没有正确的心态来编程。我确信有更好的方法来实现我的想法，但是我在尝试许多我想到的实现时感到沮丧（但从未接近真实的东西）。

PS：这是我在 StackOverflow 中的第一篇文章/问题！我希望我的问题（以及我的提问方式）还不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:02:57.140

这是我能想到的最简单的工作版本：

```
turtles-own [ goal dest velocity ]

to setup
  clear-all
  let walkway-color white - 1
  ask patches [
    set pcolor ifelse-value (abs pxcor < 4 or abs pycor < 4) [ walkway-color ] [ black ]
  ]
  let goals (patch-set patch -16 0 patch 0 16 patch 16 0 patch 0 -16)
  ask n-of population patches with [ pcolor = walkway-color and distance patch 0 0 > 10 ] [
    sprout 1 [
      set velocity 0.1
      set color one-of [ red blue ] ; representing gender
      set dest patch 0 0 ; first head towards center
      set goal one-of goals with [ distance myself > 10 ]
    ]
  ]
  reset-ticks  
end

to go 
  ask turtles [
    if patch-here = goal [ die ] ; the rest will not execute
    if dest = patch 0 0 and distance patch 0 0 < 3 [ set dest goal ]
    face dest
    if-else any? other turtles in-cone 1.5 60
      [ rt 5
        bk velocity ]
      [ fd velocity ]
  ]
  tick
end 
```

除了我完全重写了您的设置过程之外，它与您自己的版本没有什么不同。我认为你的主要问题是在转弯之前支持：因为你`face dest`在下一个`go`周期开始时再次出现，所以你`rt`基本上没用。

# jquery - 无法在内容可编辑的 div 中设置光标位置 - Jquery

> ID：15987359
> 
> 赞同：3
> 
> 时间：2013-04-13T11:36:33.160
> 
> 标签：jquery, contenteditable

这是一个 jquery 代码，用于将光标位置在内容可编辑 div 中设置为位置`10`

```
var range,selection; var contentEditableElement = $("div#editMe");
if(document.createRange)//Firefox, Chrome, Opera, Safari, IE 9+
{
 range = document.createRange();
 range.selectNodeContents(contentEditableElement);
 range.collapse(true);
 range.setStart(contentEditableElement,0); 
 range.setEnd(contentEditableElement,10);
 selection = window.getSelection();
 selection.removeAllRanges();
 selection.addRange(range);
} 
```

但这不起作用。有什么问题 。??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T21:16:50.470

这是一个工作示例。如果我只将文本放在 div 中，它似乎不起作用，我必须将每个字符都放在一个元素中。另请注意，您必须在 jquery 对象上使用 .get(0) 才能实际获取与 range.setStart 和 range.setEnd 一起使用的 dom 对象。

html:

```
<div id="editMe">
    <span>a</span><span>b</span><span>c</span><span>d</span><span>e</span><span>f</span><span>g</span><span>h</span><span>i</span><span>j</span><span>k</span><span>l</span><span>m</span><span>n</span>
</div>

<button onclick="do_select()">
    select characters
</button> 
```

js：

```
function do_select()
{
    var element = $("div#editMe").get(0);
    var range = document.createRange();

    range.collapse(true);
    range.setStart(element,0); 
    range.setEnd(element,10);

    var selection = window.getSelection();
    selection.removeAllRanges();
    selection.addRange(range);
} 
```

[http://jsfiddle.net/y8pWs/](http://jsfiddle.net/y8pWs/)

# scala - Scala中服务器组件的设计

> ID：15987363
> 
> 赞同：1
> 
> 时间：2013-04-13T11:37:11.577
> 
> 标签：scala, client-server, actor, future

假设我需要一个`Scala`组件同时处理传入的请求并返回处理结果。还假设请求处理由几个步骤组成。其中一些步骤是资源和时间消耗，其中一些是 I/O 或 CPU 密集型等。

假设请求来自JVM*内部*，我将按如下方式设计组件：

*   演员“门面”是入口点：它接收请求并将结果发送给客户端。
*   演员“调度员”异步执行处理步骤`Futures`，包装步骤
*   步骤将他们的结果发送回“调度员”演员。它是通过`Future`回调实现的。
*   当请求处理完成时，“Dispatcher”将结果发送到“Facade”。

是否有意义？Scala中有这样一个组件的好例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:25:01.100

鉴于您展示的细节，这是有道理的。

这种情况的一个很好的框架是[Akka](http://akka.io)。查看源代码中可用的示例，以及 GitHub 中的许多开源项目。

# c++ - 派生异常不继承构造函数

> ID：15987366
> 
> 赞同：5
> 
> 时间：2013-04-13T11:37:29.820
> 
> 标签：c++, oop, exception, inheritance, constructor

我对下面的代码有疑问。

```
#include <iostream>
#include <stdexcept>

class MyException : public std::logic_error {
};

void myFunction1() throw (MyException) {
    throw MyException("fatal error");
};

void myFunction2() throw (std::logic_error) {
    throw std::logic_error("fatal error");
};

int main() {
    try {
        myFunction1();
        //myFunction2();
    }catch (std::exception &e) {
        std::cout << "Error.\n"
            << "Type: " << typeid(e).name() << "\n"
            << "Message: " << e.what() << std::endl;
    }
    return 0;
} 
```

`throw MyException("fatal error");`行不工作。Microsoft Visual Studio 2012 是这样说的：

```
error C2440: '<function-style-cast>' : cannot convert from 'const char [12]' to 'MyException' 
```

MinGW 的反应非常相似。

这意味着，构造函数`std::logic_error(const string &what)`没有从父类*复制*到子类中。为什么？

感谢您的回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T11:39:31.793

Inheriting constructors is a C++11 feature which is not available in C++03 (which you seem to be using, as I can tell from the dynamic exception specifications).

However, even in C++11 you would need a `using` declaration to inherit a base class's constructor:

```
class MyException : public std::logic_error {
public:
    using std::logic_error::logic_error;
}; 
```

In this case, you just have to write explicitly a constructor that takes an `std::string` or a `const char*` and forwards it to the base class's constructor:

```
class MyException : public std::logic_error {
public:
    MyException(std::string const& msg) : std::logic_error(msg) { }
}; 
```

# r - 如何使用for循环在ggplot中添加图层

> ID：15987367
> 
> 赞同：19
> 
> 时间：2013-04-13T11:37:34.527
> 
> 标签：r, ggplot2

我想将数据框的每一列绘制到 ggplot2 中的单独层。逐层构建绘图效果很好：

```
df<-data.frame(x1=c(1:5),y1=c(2.0,5.4,7.1,4.6,5.0),y2=c(0.4,9.4,2.9,5.4,1.1),y3=c(2.4,6.6,8.1,5.6,6.3))

ggplot(data=df,aes(df[,1]))+geom_line(aes(y=df[,2]))+geom_line(aes(y=df[,3])) 
```

有没有办法通过使用单个函数来绘制所有可用列？

我试图这样做，但它不起作用：

```
 plotAllLayers<-function(df){
    p<-ggplot(data=df,aes(df[,1]))
    for(i in seq(2:ncol(df))){ 
        p<-p+geom_line(aes(y=df[,i]))
        }
        return(p)
    }

plotAllLayers(df) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-13T13:46:33.003

`melt()`一种方法是使用library中的函数将数据框从宽格式重塑为长格式`reshape2`。在新数据框中，您将拥有确定数据来自哪个列的`x1`值，并且包含所有原始 y 值。`variable``value`

现在，您可以用一个来绘制所有数据，`ggplot()`并`geom_line()`调用并使用`variable`例如为每条线设置单独的颜色。

```
 library(reshape2)
 df.long<-melt(df,id.vars="x1")
 head(df.long)
  x1 variable value
1  1       y1   2.0
2  2       y1   5.4
3  3       y1   7.1
4  4       y1   4.6
5  5       y1   5.0
6  1       y2   0.4
 ggplot(df.long,aes(x1,value,color=variable))+geom_line() 
```

![在此处输入图像描述](https://i.stack.imgur.com/HjPG4.png)

如果您真的想使用 for() 循环（不是最好的方法），那么您应该使用`names(df)[-1]`而不是`seq()`. 这将生成列名向量（第一列除外）。然后在里面`geom_line()`使用`aes_string(y=i)`他们的名字来选择列。

```
plotAllLayers<-function(df){
  p<-ggplot(data=df,aes(df[,1]))
  for(i in names(df)[-1]){ 
    p<-p+geom_line(aes_string(y=i))
  }
  return(p)
}

plotAllLayers(df) 
```

![在此处输入图像描述](https://i.stack.imgur.com/5ezoy.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-10T09:13:34.340

我在一个庞大的混乱数据集上尝试了 melt 方法，并希望有一种更快、更清洁的方法。这个 for 循环使用 eval() 来构建所需的绘图。

```
fields <- names(df_normal) # index, var1, var2, var3, ...

p <- ggplot( aes(x=index), data = df_normal)
for (i in 2:length(fields)) { 
  loop_input = paste("geom_smooth(aes(y=",fields[i],",color='",fields[i],"'))", sep="")
  p <- p + eval(parse(text=loop_input))  
}
p <- p + guides( color = guide_legend(title = "",) )
p 
```

当我测试时，它的运行速度比大型融化数据集快得多。

我还尝试了使用 aes_string(y=fields[i], color=fields[i]) 方法的 for 循环，但无法区分颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-21T19:17:00.317

对于OP的情况，我认为`pivot_longer`是最好的。但是今天我遇到了一种似乎不适合旋转的情况，所以我使用以下代码以编程方式创建图层。我不需要使用`eval()`.

```
data_tibble <- tibble(my_var = c(650, 1040, 1060, 1150, 1180, 1220, 1280, 1430, 1440, 1440, 1470, 1470, 1480, 1490, 1520, 1550, 1560, 1560, 1600, 1600, 1610, 1630, 1660, 1740, 1780, 1800, 1810, 1820, 1830, 1870, 1910, 1910, 1930, 1940, 1940, 1940, 1980, 1990, 2000, 2060, 2080, 2080, 2090, 2100, 2120, 2140, 2160, 2240, 2260, 2320, 2430, 2440, 2540, 2550, 2560, 2570, 2610, 2660, 2680, 2700, 2700, 2720, 2730, 2790, 2820, 2880, 2910, 2970, 2970, 3030, 3050, 3060, 3080, 3120, 3160, 3200, 3280, 3290, 3310, 3320, 3340, 3350, 3400, 3430, 3540, 3550, 3580, 3580, 3620, 3640, 3650, 3710, 3820, 3820, 3870, 3980, 4060, 4070, 4160, 4170, 4170, 4220, 4300, 4320, 4350, 4390, 4430, 4450, 4500, 4650, 4650, 5080, 5160, 5160, 5460, 5490, 5670, 5680, 5760, 5960, 5980, 6060, 6120, 6190, 6480, 6760, 7750, 8390, 9560))

# This is a normal histogram
plot <- data_tibble %>%
  ggplot() +
  geom_histogram(aes(x=my_var, y = ..density..))

# We prepare layers to add
stat_layers <- tibble(distribution = c("lognormal", "gamma", "normal"),
                     fun = c(dlnorm, dgamma, dnorm),
                     colour = c("red", "green", "yellow")) %>% 
  mutate(args = map(distribution, MASS::fitdistr, x=data_tibble$my_var)) %>% 
  mutate(args = map(args, ~as.list(.$estimate))) %>% 
  select(-distribution) %>% 
  pmap(stat_function)

# Final Plot
plot + stat_layers 
```

这个想法是你用你想要插入到 geom/stat 函数的参数来组织一个 tibble。每行应对应于`+`您要添加到 ggplot 的图层。然后使用`pmap`. 这会创建一个图层列表，您可以简单地将其添加到绘图中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-29T22:01:22.443

重塑你的数据，这样你就不需要循环是最好的选择。否则，对于较新版本的 ggplot，您可以`.data`在`aes()`. 你可以做

```
plotAllLayers<-function(df){
    p <- ggplot(data=df, aes(df[,1]))
    for(i in names(df)[2:ncol(df)]){ 
        p <- p + geom_line(aes(y=.data[[i]]))
    }
    return(p)
}
plotAllLayers(df) 
```

我们使用`.data`代词来获取传递给`ggplot`对象的数据，并遍历列名，因为`.data`出于某种原因不喜欢索引。

# machine-learning - 神经网络，是否值得随着时间的推移改变学习率和动量

> ID：15987374
> 
> 赞同：6
> 
> 时间：2013-04-13T11:38:53.183
> 
> 标签：machine-learning, neural-network

在满足某些条件后改变学习率是否值得？以及如何以及为什么要这样做？例如，网络将以高学习率开始，在平方误差足够低后，学习率会下降以获得更好的精度，或者学习率应该增加以跳出局部最小值？不会造成过拟合吗？那么动量呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T16:35:23.187

通常你应该从高学习率和低动量开始。然后随着时间的推移降低学习率并增加动量。这个想法是允许在学习开始时进行更多探索，并在学习结束时强制收敛。通常你应该查看训练错误来设置你的学习计划：如果它卡住了，即错误没有改变，是时候降低你的学习率了。

# perl - Should I use "use 5.12.0; use warnings;" in a perl module?

> ID：15987376
> 
> 赞同：5
> 
> 时间：2013-04-13T11:38:58.790
> 
> 标签：perl, module

I am not sure if and what difference it makes if a start a perl module with

```
package MYPACKAGE;
use 5.12.0;
use warnings;

# functions are here

1; 
```

or

```
use 5.12.0;
use warnings;
package MYPACKAGE;

#  functions are here

1; 
```

or if these `use ...` are not regarded *at all* because the `use ...` are inherited from the calling perl script.

The question probably boils down to: is it worthwile to specify those `use ...` in a module or is it sufficient if I have them specified in my perl script.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T12:29:57.957

语用模块具有词法范围，而不是动态范围。

版本编译指示激活当前范围内的某些功能，具体取决于版本。它不会全局激活这些功能。这对于向后兼容很重要。

这意味着可以在模块定义之外激活编译指示，但在我们的范围内：

```
# this is package main
use 5.012; # activates `say`
package Foo;
say "Hi"; # works, because lexical scope 
```

这与导入当前包（！= 范围）的正常导入不同。

`warnings`pragma 激活当前范围内的警告。

但是，每个文件都应该包含`use strict`, 因为词法范围永远不会跨文件延伸。Pragma 是不及物的：

下午：

```
say "Hi";
1; 
```

主要.pl：

```
use 5.012;
require Foo; 
```

失败。

* * *

*因此，*您将这些 pragma 放在哪里在很大程度上是无关紧要的。`package`当文件中有多个命名空间时，我建议将编译指示放在之前，例如

```
use 5.012; use warnings;

package Foo;
...;
package Bar;
...;
1; 
```

但`package`如果它是文件中唯一的一个，则放置第一个。

```
package Foo;
use 5.012; use warnings;
...;
1; 
```

唯一重要的是你做`use`他们;-)

# c# - check the page control is checked or not

> ID：15987378
> 
> 赞同：0
> 
> 时间：2013-04-13T11:39:27.457
> 
> 标签：c#, asp.net, c#-4.0, webforms

I am using the below code to read the page control.Its working fine. I read the specific control but the control is check box, I want to check the checked status of the control. But i can't do this please help me to do this.

```
foreach (string key in Request.Form)
{
  if (!key.StartsWith("win_")) continue; //win_11 is control id
  string str_val = Request.Form[key];
} 
```

Request.Form[key] return the value of the control. But i want to check the checked status.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:59:08.970

正如你所说，你找到了复选框的 id，，，所以你可以试试这个......

```
 foreach (string key in Request.Form)
    {
      if (!key.StartsWith("win_")) continue; //win_11 is control id
      CheckBox cb = this.Page.FindControl("key") as CheckBox;
    if(cb.checked==true)
    {
    Your logic
    }
    else
    {
    your logic
    }
    } 
```

# php - 防止未经授权更改 PHP 中 CRUD 的逻辑？

> ID：15987379
> 
> 赞同：1
> 
> 时间：2013-04-13T11:39:31.193
> 
> 标签：php, codeigniter

我正在尝试在 CRUD 中对 PHP 进行建模，并且想知道检查用户授权的最佳方法是什么，以便他们只能编辑自己的内容？

例如：

```
abc.com/post/delete.php?id=3 
```

如何防止已登录的用户编辑其他人的帖子？

我目前的方法是：

1.  成功登录后在会话中存储用户 ID
2.  请求 DELETE 方法时，从会话中加载 User_ID
3.  查询 = 从帖子中删除，其中 user_id = $user_id AND id = 3

这样，如果用户可以修改`ID`参数，他们就无法操作存储的会话变量`user_id`。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:00:44.337

我建议使用您的逻辑，但我通常存储用户 ID + 访问令牌

```
Access token is an hash for example sha256(username+lastname+registered_datetime); and i put it to cookie 
```

因此，您将有一个额外的安全字段，只需在用户登录时检查身份验证令牌是否正常

# javascript - multiple animations like flash

> ID：15987387
> 
> 赞同：0
> 
> 时间：2013-04-13T11:40:11.750
> 
> 标签：javascript, html, html5-canvas

The below code (I just gave a snippet of working code) animates a few images based on time. Something like a Flash animation where at certain times images start to move at certain times or frame count. My question is , is there a better way to do this ? I know I can use something other than setInterval . I am calculating the elapsed time and setting off images based on the time interval.

It is the ClassLoadImages.prototype.m_draw which is the issue.

```
 function doGameLoop() {

    ctx.clearRect(0,0,600,400);
    now = new Date();

    totalSeconds = (now - start) / 1000;
    last = now;

    ctx.fillText("totalSeconds=" +totalSeconds ,10,100);
    if (totalSeconds>2 && totalSeconds<6)
    {
        img2.m_draw(130);
    }
    if (totalSeconds>4 && totalSeconds<8)
    {
        img3.m_draw2(230);
    }

    if (totalSeconds>10){
        start = new Date();//start again

    }
    img.m_draw(30);
  //  fi++;
 }

var img= new ClassLoadImages(30,30);
var img2= new ClassLoadImages(30,30);
var img3= new ClassLoadImages(30,30);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T13:23:43.773

如果你想要 Flash 影片剪辑之类的东西，请查看 github 上的 SpriteClip。[https://github.com/wolthers/SpriteClip.js](https://github.com/wolthers/SpriteClip.js)

# java - 在 Java 中在 Swing GUI 旁边打开一个控制台

> ID：15987388
> 
> 赞同：4
> 
> 时间：2013-04-13T11:40:17.347
> 
> 标签：java

我正在使用 Swing GUI 构建应用程序。如果您想从命令行打开这个程序，将会打印一些文本（信息和错误消息）。该程序只是一个普通的可执行 jar 文件，但对于想要查看控制台的人来说，我想要一个*从*Swing GUI 打开控制台的选项，它显示所有这些消息，由`System.out.print()`. 我见过几个具有这种功能的应用程序，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:06:05.437

基础知识在[https://blogs.oracle.com/nickstephen/entry/java_redirecting_system_out_and](https://blogs.oracle.com/nickstephen/entry/java_redirecting_system_out_and)进行了解释。该示例使用日志记录来重定向标准输出和标准错误。一个简单的方法可能是首先定义一个写入“控制台”的 OutputStream：

```
package outerr;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import javax.swing.JTextArea;

public class PrintOutErrStream extends ByteArrayOutputStream {

final int maxTextAreaSize = 1000;
private JTextArea textArea;
public PrintOutErrStream(JTextArea textArea) {
    this.textArea = textArea;
}

public void flush() throws IOException {
    synchronized(this) {
        super.flush();
        String outputStr = this.toString();
        super.reset();
        if(textArea.getText().length() > maxTextAreaSize) {
            textArea.replaceRange("", 0, 100);
        }
        textArea.append(outputStr);
    }
}
} 
```

然后这是演示程序的剩余部分：

```
package outerr;

import java.io.PrintStream;

public class StdOutErr extends javax.swing.JFrame {

/** Creates new form StdOutErr */
public StdOutErr() {
    initComponents();
    PrintOutErrStream poes = new PrintOutErrStream(this.jTextAreaOutErrLog);
    System.setErr(new PrintStream(poes, true));
    System.setOut(new PrintStream(poes, true));
}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this
 * method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {
    java.awt.GridBagConstraints gridBagConstraints;

    jButtonStdout = new javax.swing.JButton();
    jButtonStderr = new javax.swing.JButton();
    jPanelOutErrLog = new javax.swing.JPanel();
    jScrollPaneOutErrLog = new javax.swing.JScrollPane();
    jTextAreaOutErrLog = new javax.swing.JTextArea();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    getContentPane().setLayout(new java.awt.FlowLayout());

    jButtonStdout.setText("stdout");
    jButtonStdout.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButtonStdoutActionPerformed(evt);
        }
    });
    getContentPane().add(jButtonStdout);

    jButtonStderr.setText("stderr");
    jButtonStderr.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButtonStderrActionPerformed(evt);
        }
    });
    getContentPane().add(jButtonStderr);

    jTextAreaOutErrLog.setColumns(20);
    jTextAreaOutErrLog.setRows(5);
    jScrollPaneOutErrLog.setViewportView(jTextAreaOutErrLog);

    javax.swing.GroupLayout jPanelOutErrLogLayout = new javax.swing.GroupLayout(jPanelOutErrLog);
    jPanelOutErrLog.setLayout(jPanelOutErrLogLayout);
    jPanelOutErrLogLayout.setHorizontalGroup(
        jPanelOutErrLogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 835, Short.MAX_VALUE)
        .addGroup(jPanelOutErrLogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPaneOutErrLog, javax.swing.GroupLayout.DEFAULT_SIZE, 835, Short.MAX_VALUE))
    );
    jPanelOutErrLogLayout.setVerticalGroup(
        jPanelOutErrLogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 378, Short.MAX_VALUE)
        .addGroup(jPanelOutErrLogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPaneOutErrLog, javax.swing.GroupLayout.DEFAULT_SIZE, 378, Short.MAX_VALUE))
    );

    getContentPane().add(jPanelOutErrLog);

    pack();
}// </editor-fold>

private void jButtonStdoutActionPerformed(java.awt.event.ActionEvent evt) {
    System.out.println("message via stdout");
}

private void jButtonStderrActionPerformed(java.awt.event.ActionEvent evt) {
       System.err.println("message via stderr");
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(StdOutErr.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(StdOutErr.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(StdOutErr.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(StdOutErr.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new StdOutErr().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton jButtonStderr;
private javax.swing.JButton jButtonStdout;
private javax.swing.JPanel jPanelOutErrLog;
private javax.swing.JScrollPane jScrollPaneOutErrLog;
private javax.swing.JTextArea jTextAreaOutErrLog;
// End of variables declaration
} 
```

# windows-phone-7 - 在 WP7 中具有特殊应用启动的新 Tile

> ID：15987389
> 
> 赞同：0
> 
> 时间：2013-04-13T11:40:21.100
> 
> 标签：windows-phone-7, windows-phone, live-tile

我有问题。我有一个电话簿应用程序。我想创建 Tile（在 Windows Phone 主屏幕中），在我单击主屏幕上的 Tile 后将调用该号码。

那可能吗？我应该怎么做才能做出这样的事情？我可以创建自定义 Tile 或者我应该在我的应用程序启动后创建一些方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:43:40.877

使用类似于以下代码的内容创建动态磁贴：

```
string number = "000 - 000 000";
ShellTile tile = ShellTile.ActiveTiles.FirstOrDefault(t => t.NavigationUri.ToString().Contains("phone=" + number));

if (tile == null)
{
   StandardTileData tileData = new StandardTileData();
   tileData.Title = "Call " + number;
   ShellTile.Create(new Uri("/MainPage.xaml?phone=" + number, UriKind.Relative), tileData);
} 
```

然后重写 MainPage.xaml 中的 OnNavigatedTo，并添加以下代码：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
   if (NavigationContext.QueryString.ContainsKey("phone"))
   {
       string number = NavigationContext.QueryString["phone"];
       PhoneCallTask task = new PhoneCallTask();
       task.PhoneNumber = number;
       task.Show();
    }
    base.OnNavigatedTo(e);
} 
```

如果还没有做，还需要`"ID_CAP_PHONEDIALER"`在文件中添加capability `WMAppManifest.xml`，否则上面调用的时候会出现异常`task.Show();`。

现在您有了一个活动磁贴，单击该磁贴将启动应用程序并拨打该号码（但用户仍必须在对话框中确认，这是您无法禁用的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T22:29:45.103

您是否尝试过翻转瓷砖并使用这样的东西：

[http://blog.ecofic.com/?p=406](http://blog.ecofic.com/?p=406)

将号码写入隔离存储，然后当他们单击磁贴时，您会读取隔离存储并拨打该号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:30:19.297

您还可以使用 CodePlex 中的 Mangopollo 库来创建辅助动态磁贴：http: [//mangopollo.codeplex.com/](http://mangopollo.codeplex.com/)

# hosting - 在哪里托管 .cur 图像

> ID：15987392
> 
> 赞同：1
> 
> 时间：2013-04-13T11:40:28.253
> 
> 标签：hosting, web-hosting

.cur 是鼠标光标的图像扩展名

我通过 Blogger 购买了一个自定义域。与 Wordpress 不同，Blogger 没有任何网络文件目录或可以上传内容的目录

我需要在我的网站上更改鼠标的默认光标。不幸的是，Google 的 Picassa 或 Imageshack/phobucket 不支持 .cur 文件。

我在谷歌搜索时发现了其他一些图片网站，但都是旧的图片托管服务，不再存在。

我尝试了 dropbox、google 代码，但它们提供了一个下载 .cur 图像的链接，但实际上并没有给出我可以在我的 css 中链接的 url。

有没有办法托管 .cur 图片。请帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T22:30:51.540

你真的需要保持这个文件的`cur`格式吗？不是将其转换为 PNG 的选项吗？

我什至不确定那里的每个浏览器/操作系统都支持`cur`（尽管我在[网上](http://www.htmlgoodies.com/beyond/css/create-custom-cursors-with-javascript-and-css3.html)看到过这种格式的示例，所以我可能弄错了）。转换为更标准的格式可能会确保更好的可移植性，此外还可以省去寻找具有此类特定要求的主机的麻烦。

# php - 将 javascript 数组导出为 CSV

> ID：15987393
> 
> 赞同：1
> 
> 时间：2013-04-13T11:40:37.957
> 
> 标签：php, javascript, jquery, symfony, csv

我有一个 javascript 数组，我必须在客户端环境中将其保存为 CSV。这可能使用 jquery 吗？我也必须在所有主要浏览器中工作..我正在使用 symfony2 框架..如果我可以将这个数组传递给服务器怎么办..请解释传递数组的最佳方法，因为我是有一个相当大的关联数组数组..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:02:07.577

您可以根据需要（使用 、 等）将数据发送到`$_POST`服务器`AJAX`。但是，一旦数据到达服务器，这就是*我*将数据发送到 CSV 文件的方式。

```
$serialized_data = $_POST['some_data_array'];

if($downloadFile) // simple condition
{

    $fp = fopen('php://memory', 'w+'); // open up write to memory

    foreach($serialized_data  as $row) // $serialized_data represents what you sent to the server from JS
    {
        fputcsv($fp, $row);
    }

    rewind($fp);
    $csvFile = stream_get_contents($fp);
    fclose($fp);

    header('Content-Type: text/csv');
    header('Content-Length: '.strlen($csvFile));
    header('Content-Disposition: attachment; filename="yourFile.csv"');
    exit($csvFile);
} 
```

# javascript - 原型中的对象作为引用继承

> ID：15987397
> 
> 赞同：3
> 
> 时间：2013-04-13T11:40:59.743
> 
> 标签：javascript, oop, prototype

我想使用原型继承新的对象实例。

测试用例：

```
var MyObj = function() {}
MyObj.prototype.objName = {} 
// I want this to be a different object for each instance of MyObj

var o1 = new MyObj (),
    o2 = new MyObj ();

o1.objName['a'] = 1;
o2.objName['a'] = 2;

alert(o1.objName['a']) // 2
alert(o1.objName === o2.objName) // true 
```

这意味着原型中的对象不是作为它的副本被继承，而是作为它的引用。

我知道通常你可以这样做。

```
var MyObj = function() {
    this.objName = {}
}

var o1 = new MyObj(),
    o2 = new MyObj();

alert(o1.objName === o2.objName) // false 
```

这很好用，但在我的情况下，这不是一个选择。我真的需要在 MyObj 函数之外定义 objName 。

我设法“解决”了这个问题

```
MyObj.prototype.objName = function() {
    if ( this._objName === undefined ) {
        this._objName = {};
    }
    return this._objName;
}

var o1 = new MyObj(),
    o2 = new MyObj();

o1.objName()['a'] = 1;
o2.objName()['a'] = 2;

alert(o1.objName()['a']) // 1 
```

但这不是很漂亮，而且这段代码的性能要差得多。

有什么方法可以更优雅地解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:18:53.077

> 这意味着原型中的对象不是作为它的副本被继承，而是作为它的引用。

原型上没有任何东西被复制——原型继承的整个概念是属性*引用*原型对象的共享属性。因此，如果您希望每个实例的属性都是独立的，则必须将其显式分配给对象并*隐藏*原型属性；就像您在`_objName`代码中使用属性一样。

> 但这不是很漂亮，而且这段代码的性能要差得多。

如果你想要它漂亮，把它移到构造函数中（或者让构造函数寻找类似的`init`方法来调用，如果存在的话，那么你可以在原型上创建那个 init 方法。

为了使性能更好一点，您可以将 getter 函数更改为

```
MyObj.prototype.getObj = function() {
    var obj = {};
    this.getObj = function(){ return obj; }; // overwrite itself
    return obj;
}; 
```

虽然它仍然有函数调用开销。为了更加优雅，您可以使用在第一次访问时将自身删除的 getter 属性（旧浏览器不支持）：

```
Object.defineProperty(MyObj.prototype, "objName", {
    get: function() {
        var obj = {};
        Object.defineProperty(this, "objName", {
            value: obj,
            writable: true //?
        });
        return obj;
    },
    enumerable: true,
    configurable: true
}); 
```

现在您可以省略函数调用括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:48:46.240

> 这意味着原型中的对象不是作为它的副本被继承，而是作为它的引用。

只是要清楚。首先，在 JavaScript 中，所有对象都是通过引用传递的，而不是通过值传递的。只有原语是按值传递的。其次，你实际上并不是在“复制”或“传递”任何东西。当您设置 a`prototype`时，您正在创建原型链。这意味着在您的情况下：

```
var MyObj = function() {};
MyObj.prototype.objName = {} ;

var o1 = new MyObj ();
var o2 = new MyObj (); 
```

两者`o1`和`o2`都没有任何名为 的属性`objName`，您可以简单地使用以下命令对其进行测试：

```
console.log(Object.keys(o1)); // [] 
```

当 JS 看到类似 的代码`o1.objName`时，首先检查对象是否具有此属性，如果有，则使用它。如果没有，则开始查找原型链，从 的原型开始`o1`，即`MyObj.prototype`：找到了属性`objName`，并返回。如果没有找到，那么 JS 会继续检查 的原型`MyObj.prototype`，以此类推。所以，重点是：`MyObj.prototype` *它是*一个对象：并且您在`o1`和之间共享了该对象`o2`。这就是为什么实例`objName`是相同的。这与具有完全相同的逻辑：

```
function objName(obj) {
    return "objName" in obj ? obj.objName : O.objName;
}

var O = { objName: [] };
var foo = {};
var bar = {};

objName(foo).push(0);
objName(bar).push(1); 
```

因此，您不能放入`prototype`任何不打算在使用该原型创建的对象之间共享的对象。我想说像这样的共享状态也是一种应该避免的不好的做法，这就是为什么通常`prototype`不应该有这样的属性。我仍然不清楚为什么你不能修改构造函数，但重点是：当你创建对象的实例时，你必须“设置”它。通常，调用构造函数，但任何函数都可以。当您想要支持继承并调用“超级”构造函数来初始化您的对象时，也会这样做。

# ios - How to reset push notification badge counter with PushWoosh on an iOS app

> ID：15987400
> 
> 赞同：1
> 
> 时间：2013-04-13T11:41:18.880
> 
> 标签：ios, push-notification, push, counter, badge

I sent a push notification to my users with PushWoosh, and manually set the badge counter to "1" (in the Advanced form). Now the problem is the badge counter is stuck on "1" no matter if the user opened the app or even clicked the notification they got. This badge counter is very annoying to my users, so I need to find a solution as soon as possible.

What can I do to reset it and make it disappear?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:53:22.053

这应该重置徽章，无论推送供应商在放置时 `applicationDidFinishLaunching`

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:58:37.283

显然发送另一个高级推送，并在“徽章”字段中输入“0”重置计数器，现在问题已解决。无论如何，正如 jaytr0n 所建议的，必须修复代码才能知道如何自主处理。

[http://i.stack.imgur.com/IclCv.jpg](http://i.stack.imgur.com/IclCv.jpg)

# c# - .NET web services for mobile application

> ID：15987401
> 
> 赞同：1
> 
> 时间：2013-04-13T11:41:29.653
> 
> 标签：c#, android, .net, ios, web-services

I have to prepare web service for iOS and Android applications. My platform will be .NET with C#. Now I am not sure which of the following is the best option to follow.

1.  WCF SOAP XML Service
2.  WCF SOAP JSON Service
3.  WCF REST XML Service
4.  WCF REST JSON Service
5.  ASMX SOAP XML Service
6.  ASMX SOAP JSON Service
7.  ASMX REST XML Service
8.  ASMX REST JSON Service

So far I have worked with only ASMX SOAP service and these are very easy to use and develop but I got some suggestion from iOS developers that JSON is good for their development. Some times they also suggested to prepare REST services but according to me they are less secure.

Please let me know which one of the above eight approach is best for small user base application and which one is best for large user base application.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:21:48.357

由于 iOS 和 Android 没有太多可用的 SOAP 实现，大量开发人员（包括我）正在选择基于 REST 的 Web 服务。

选择 REST 服务而不是 SOAP Web 服务有几个原因，其中之一是简单性，REST Web 服务通常需要实现 HTTP 请求以及以纯 JSON 或 XML 格式生成请求主体。

SOAP 请求仅在其关于所请求资源的额外细节上有所不同，这些额外的细节/字节可能会在客户端编码请求时成为问题，当然也会导致传输开销。

通过在 REST 上实现 web 服务，您可以利用两个很棒的库，对于 iOS，您有[Restkit](http://www.restkit.org)，在 Android 上，您可以使用[restlet](http://restlet.org)和[jackson](http://jackson.codehaus.org/)。

基于上述内容，我强烈建议使用 WCF REST XML 服务或 WCF REST JSON 服务，其中 WCF REST JSON 将是最具性能的选项，因为序列化格式 (JSON) 是表示要传输的数据的更有效方式通过网络连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T06:10:28.273

看看[ServiceStack](https://github.com/ServiceStack/ServiceStack)：

Service Stack 是一个高性能 .NET Web 服务平台，它简化了高性能 REST（JSON、XML、JSV、HTML、MsgPack、ProtoBuf、CSV）和 WCF SOAP Web 服务的开发。

# javascript - 所有浏览器什么时候开始支持 String.replace(regexp, replacement_function)？

> ID：15987403
> 
> 赞同：14
> 
> 时间：2013-04-13T11:42:21.313
> 
> 标签：javascript, cross-browser, ecma262

根据第 6 版*JavaScript：权威指南*（Flanagan，2011）：

> ECMAScript v3 指定*替换*参数`replace()`可以是函数而不是字符串。

我正在查看 2005 年编写的一些代码，其中使用了[复杂的解决方法](https://stackoverflow.com/questions/15465522/why-is-string-replace-with-lambda-slower-than-a-while-loop-repeatedly-calling)来替换部分字符串。代码的注释清楚地表明它最初使用了函数`replace()`方法，但解决方法是跨浏览器兼容性所必需的。

ECMAScript v3 于 1999 年问世，据我所知（从[这篇讨论文章](http://www.webmasterworld.com/forum91/68.htm)和[这篇博客文章](http://ejohn.org/blog/versions-of-javascript/)），自 2001 年底以来，主流浏览器都支持 ECMAScript v3。可能是作者错了，还是有人能解释一下为什么在 2005 年可能需要这种变通方法？

...

**更新**代码作者的实际评论说：

> RegExps 中的 lambda 函数目前是浏览器过多的问题。
> 
> 更改代码以解决问题。

作者代码[为该业务](http://www.masswerk.at/info.html)工作或运行，尽管代码本身很可能是个人项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-07T11:44:30.890

该答案基于对上述问题的评论（特别感谢[kangax](https://stackoverflow.com/users/130652/kangax)，如果他选择留下一个，我可能会接受他的回答！）

虽然我可能一直在阅读“太多浏览器”字面意思，但也有可能`String.replace()`在 2005 年的 Safari 2.x（使用 JavaScriptCore）和 IEMac 5.x 中使用函数作为参数是一个问题。证据当时的这些问题都存在[这里](https://bugs.webkit.org/show_bug.cgi?id=3294)，并且与上述浏览器的那些特定版本存在[这里](http://phrogz.net/JS/replaceTest.html)。

事实上，Gavin Kistner 在这些页面的第一个页面上提到的解决方法是在某些浏览器中的性能可能比功能替换方法更好，如此[处](https://stackoverflow.com/questions/15465522/why-is-string-replace-with-lambda-slower-than-a-while-loop-repeatedly-calling)所述。

尽管如此，抛开性能不谈，似乎（正如我所怀疑的）功能性替换在今天的所有浏览器中都是可以接受的。

非常感谢所有对此问题的评论者。

# mootools - 奇偶元素的事件处理程序

> ID：15987405
> 
> 赞同：0
> 
> 时间：2013-04-13T11:42:24.760
> 
> 标签：mootools

我有一堆带有 css 类选项的 span 元素

```
<div>
<span class="option">
</div>
<div>
<span class="option">
</div>
<div>
<span class="option">
</div>
<div>
<span class="option">
</div> 
```

我想选择所有这些，然后将事件处理程序附加到他们的鼠标悬停事件。我最终得到了这个：

```
 $$('.option').addEvents({
      'mouseover': function() {
            // code

       },

}); 
```

但是我不知道如何弄清楚内部事件处理程序，如果当前选择的元素是偶数还是奇数，所以我可以根据这些信息做不同的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:12:55.203

您可以以不同的布局订购您的元素，然后使用 mootools 光滑的偶数、奇数选择：

[http://jsfiddle.net/49zpm/1/](http://jsfiddle.net/49zpm/1/)

```
$$('.option:even').addEvents({
    'mouseover': function () {
        console.log('mouseover even');
    }

});

$$('.option:odd').addEvents({
    'mouseover': function () {
        console.log('mouseover odd');
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:34:23.327

尝试使用`each`来迭代选项。这将为您提供当前索引：

```
$$('.option').each(function(elem, i) {
    elem.addEvents({
        mouseover: function() {
            if (i % 2) {
                // odd
            }
            else {
                // even
            }
        }
    });
}); 
```

# .net - .NET force windows application to display only english numbers

> ID：15987406
> 
> 赞同：1
> 
> 时间：2013-04-13T11:42:35.103
> 
> 标签：.net, numbers, cultureinfo

I am building a culture specific .net windows application and recently i faced a problem with the number shape which is changing according to the OS culture. I want to just use the English shape for all cultures especially the Arabic one.

regards,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:59:00.057

您可以使用 System.Globalization CultureInfo 类，然后强制您的程序使用美国英语文化：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US"); 
```

[您可以在此 MSDN 页面](http://msdn.microsoft.com/en-us/library/se513yha%28v=vs.100%29.aspx)上了解更多信息。

# angularjs - angularjs 和 select2：无法选择没有 $digest 错误的选项

> ID：15987410
> 
> 赞同：1
> 
> 时间：2013-04-13T11:42:55.877
> 
> 标签：angularjs, angularjs-directive, jquery-select2

我在 angularjs 项目中的 select2 选择框（ [http://ivaynberg.github.io/select2/ ）有问题。](http://ivaynberg.github.io/select2/)如果我尝试从 javascript 的选择框中选择一个选项（我在指令中执行此操作以在模型更改时更新 UI），我总是会收到错误消息

错误：$digest 已经在进行中

虽然我收到错误，但 UI 行为是正确的。之后，选择框中的正确选项是选择。但是，每次都会抛出一个错误。

我在 plunker 上创建了一个小例子：http: [//plnkr.co/edit/ZLQPr3](http://plnkr.co/edit/ZLQPr3)

我在 mac 上的 firefox/firebug 和 chrome 控制台中看到了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:52:22.050

虽然这不是最好的解决方案，但您可能想尝试一下

[http://plnkr.co/edit/zidLr3?p=preview](http://plnkr.co/edit/zidLr3?p=preview)

AFAIK 问题出在`trigger`导致多个`$digest`.

# windows-xp - 尝试在 WindowsXP 中设置自定义 winlogon shell 时丢失 PATH

> ID：15987411
> 
> 赞同：-1
> 
> 时间：2013-04-13T11:43:02.750
> 
> 标签：windows-xp, windows-shell, kiosk-mode

我已更改 Windows 注册表中的 shell 键以获得自定义 shell（Kiosk 使用）：

> [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon]

我将 shell 密钥设置为运行两个应用程序的批处理文件，如下所示：

```
start "myFirstAppTitle" "myAppPath\myApp1.exe"
start "mySecondAppTitle" "myAppPath\myApp2.exe" 
```

每个应用程序都运行，但需要执行某些文件的第二个应用程序会抛出一个错误，提示找不到依赖文件。而依赖文件与 exe 文件相邻，并且提到的应用程序在启动时工作正常。

**同时，当我手动运行批处理文件时，它运行良好。**

我将 PATH 命令添加到批处理文件中，但它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:02:59.147

将批处理文件更改为：

```
set PATH=%PATH%;C:\MyAppPath

start "myFirstAppTitle" "myApp1.exe"
start "mySecondAppTitle" "myApp2.exe" 
```

如果您在没有绝对路径的情况下启动可执行文件，则该路径是相对于当前工作目录的。此外，当您指定具有相对路径的可执行文件时，`%PATH%`不会搜索具有匹配可执行文件的匹配子文件夹。

由于脚本在您手动启动时有效，因此您的工作目录可能是`C:\`. 但是，当在登录时作为替换 shell 运行时，工作目录很可能是“%SystemRoot%\system32”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T08:36:54.887

问题奇怪地解决了，我删除了启动命令的标题参数并且它起作用了。事实上，我以这种方式使用了**start**命令：

```
set PATH=%PATH%;C:\MyAppPath
start myapp.exe 
start myapp2.exe 
```

# url - 果酱错误下载

> ID：15987414
> 
> 赞同：0
> 
> 时间：2013-04-13T11:43:10.780
> 
> 标签：url, interface, download, package, marmalade

我想尽一切办法解决这个问题，但两天后我被阻止了。我需要在我的应用程序中使用 IwNui Api 来为我的应用程序 iO 构建接口，但是当使用此行“子项目 IwNUI”将此包添加到 mkb 项目时，Visual Studio 会阻止此跟踪错误：

```
 Building project: c:/Users/PC/Documents/testaaaa/testaaaa.mkb
1>c:/Users/PC/Documents/testaaaa/testaaaa.mkb(14): warning : filename case does not match the filesystem: c:/marmalade/6.2/modules/IwNUI/IwNUI.mkf
1>  Executing: 'c:\marmalade\6.2\s3e\bin\mdev.bat update'
1>  Downloading: http://source.madewithmarmalade.com/packages/6.2/Packages
1>  Downloading: https://raw.github.com/marmalade/mdev-package-list/master/6.2?1365852339.42
1>CUSTOMBUILD : error : error downloading url: https://raw.github.com/marmalade/mdev-package-list/master/6.2?1365852339.42 (<urlopen error (8, 'EOF occurred in violation of protocol')>)
1>c:/marmalade/6.2/modules/iwutil/iwutil.mkf(19): error : Executing 'c:\marmalade\6.2\s3e\bin\mdev.bat update' failed. (return code 1)
1>  FAILED (error code=3) 
```

甚至无法构建使用 Iw** api 的 marmalde launchap 的每个示例，因为：[https](https://raw.github.com/marmalade/mdev-package-list/master/6.2?1365852339.42) ://raw.github.com/marmalade/mdev-package-list/master/6.2?1365852339.42 的下载不起作用。我在某些页面上看到了提示，但这些提示并没有为我修复（删除 roaming/appdata/marmalade 中的文件夹，关闭防火墙，尝试使用旧的 sdk 6.2.1、6.2.0、6.1 等）

我对所有建议持开放态度，我的开发进展顺利，直到我需要 UI 才能继续前进。我是界面开发的初学者，如果有另一种简单的方法来添加我也感兴趣的 Ios UI。

非常感谢阅读，大坝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:19:10.347

Marmalade 需要 mdev 包才能正常运行，因此无论如何您都必须下载它，现在您可以跳过它。问题在于您的互联网连接。可能它不接受 HTTPS 连接。尝试使用其他互联网提供商或使用一些朋友的 wifi 进行检查。当我的互联网速度很慢并且下载超时时，我总是会收到此错误。改变互联网计划是唯一可能有帮助的事情。

如果它在其他互联网连接上出现相同的错误，则可能是您设置橘子酱的方式存在一些问题，请尝试重新安装它。

# multithreading - 我可以使用 as3 Workers 的好处来加载外部 swfs

> ID：15987416
> 
> 赞同：0
> 
> 时间：2013-04-13T11:43:14.233
> 
> 标签：multithreading, actionscript-3, flash

我有加载繁重的子 swfs 的 Flash Builder 应用程序。加载 swf 时 UI 冻结几秒钟。Swf 有两种类型：

1.  带有类的 Swf（类似于 flex 模块）——VM 需要一些时间来解析字节并将类添加到应用程序域。总 swf 大小约为 2 MB。

2.  带有形状的 Swf（转换后的 pdf）-VM 还使用 UI 锁解析类和库内容。Swf 大小可以是 0.5 - 10 MB。

所以我希望使用 as3 Workers（多线程功能），但到目前为止还没有看到类似的例子。问题：

1.  主线程和子线程是否共享相同的应用程序域（相同的类）？

2.  我可以在工作人员之间传递显示对象吗？我猜不，因为参数应该被序列化。

斯坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:34:16.187

工作线程是 Flash 运行时的虚拟实例，因此它们不共享应用程序域。您只能使用 MessageChannel（使用`amf`序列化对象）和共享 ByteArrays 在线程之间进行通信。

可以使用 draw API 将显示对象序列化为`ByteArray`or`amf`但我认为这不会非常有效。如果您想从工作人员那里共享位图，这将更加现实。

# sql - 检查 DB_LINK 连接

> ID：15987418
> 
> 赞同：0
> 
> 时间：2013-04-13T11:43:38.077
> 
> 标签：sql, database, oracle

我刚刚在 oracle 中使用以下查询创建了一个数据库链接：

```
CREATE DATABASE LINK LINK_NAME
CONNECT TO DB_USERNAME
IDENTIFIED BY DB_USERNAME'S_PASSWORD
USING 'SERVICE_NAME'; 
```

从 sql 开发人员查看时，我可以看到更多信息，例如所有者、db_link、用户名、主机、创建的详细信息。

如何使用`SELECT`查询来检查与该链接的连接性，`DB_USERNAME`或者请向我建议一种检查相同的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:45:58.777

这很简单：

```
select * from dual@LINK_NAME 
```

# javascript - 带有ajax新图像请求的自定义垂直图像列表视图

> ID：15987422
> 
> 赞同：2
> 
> 时间：2013-04-13T11:44:31.597
> 
> 标签：javascript, jquery, ajax

我需要实现自定义控件 - 每次用户看到所有当前图像时都会检索图像的新部分的图像列表。

我决定使用到达页面底部时触发的自定义 jquery 事件。这是一个足够好的方法吗？是否会触发多个事件期间的一些问题？

另外，这样的插件是否已经存在？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:47:36.167

无论如何，您都需要处理多个事件触发，因为您不知道加载图像需要多长时间。这意味着您可以跟踪当前正在加载的图像，这并不复杂。

我建议您在到达页面末尾之前触发事件以获得无限滚动效果。

# java - 数字制水技术

> ID：15987423
> 
> 赞同：1
> 
> 时间：2013-04-13T11:44:46.677
> 
> 标签：java, image, image-processing, watermark

我正在尝试实现一个新的数字水印系统，这是嵌入程序

参考文件可在以下链接中找到

[http://www.4shared.com/folder/UNjahlTS/_online.html](http://www.4shared.com/folder/UNjahlTS/_online.html)

我无法理解嵌入程序，所以请任何人帮忙，谢谢

> private byte[] encode_text(byte[] image, byte[] 加法, int offset) {
> 
> ```
>  //check that the data + offset will fit in the image
> 
>     if (addition.length + offset > image.length) {
> 
>         throw new IllegalArgumentException("File not long enough!");
> 
>     }
> 
>     //loop through each addition byte
> 
>     for (int i = 0; i < addition.length; ++i) {
> 
>         //loop through the 8 bits of each byte
> 
>         int add = addition[i];
> 
>         for (int bit = 7; bit >= 0; --bit, ++offset) //ensure the new offset value carries on through both loops
>         {
> 
>             //assign an integer to b, shifted by bit spaces AND 1
> 
>             //a single bit of the current byte
> 
>             int b = (add >>> bit) & 1;
> 
>             //assign the bit by taking: [(previous byte value) AND 0xfe] OR bit to add
> 
>             //changes the last bit of the byte in the image to be the bit of addition
> 
>             image[offset] = (byte) ((image[offset] & 0xFE) | b);
> 
>         }
> 
>     }
> 
>     return image;
> 
> } 
> ```

这是嵌入过程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:03:43.033

该算法只是替换图像像素的最后一位，并将其替换为要隐藏在图像中的加法字节中的位

方法的输入：

*   `byte[] image`：您将在其中隐藏数据的图像，
*   `byte[] addition`：要隐藏的数据，
*   `int offset`：一个变量将确定您将从它隐藏的开始索引（这只是一个技巧，您不需要从 0 索引开始隐藏，这取决于您）。

然后你将在`addition`数组上循环，假设数组中的第一个字节是`10` 字节，因为它是`(00001010)`你将把它嵌入到 b 像素中的数据。

* * *

## 让我们看看如何？

假设`image[offset] = 20`---> 假设 `offset`=0;

```
int b = (add >>> bit) & 1;---->in the start loop will be (00001010)
                                                          ^ 
```

然后我将用`image[offset]`这个加法位替换最后一个有效位`0`

`image[offset] = 20------------->00010100`，当我将**LSB** ^(**1**)替换为`0`

这将是`00010100---------> 20`

所以，我将在包含位信息`image[offset]`的数组中设置新值`20``0`

* * *

让我们说**`b = 1`**，**`image[offset] = 20`**

所以，当我更换**LSB** ^(**2**)时

```
 (20)---->00010100  by the 1 it will be 00010101  
                 ^                             ^ 
```

等于 (21) ，`21`嵌入后的新值也是`1`

* * *

^(**1、2：**^(**LSB**表示：最低有效位。))

![在此处输入图像描述](https://i.stack.imgur.com/bEdV3.png)

# html - 居中表格内容（图像和文本）

> ID：15987425
> 
> 赞同：1
> 
> 时间：2013-04-13T11:45:06.163
> 
> 标签：html, css

如何使文本居中位于单元格的中间：

[table_img](http://i.imgur.com/JxKCeKT.png)

一个单元格的html：

```
<td>
   <label for="mcoin"><img src="relics/19.png">Molten Coin</label>
   <input type="checkbox" id="check" onClick="MC()" name="mcoin">
</td> 
```

当我使用 p 标签时，它会使单元格变宽并且不以 img 为中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:47:38.043

你需要使用`vertical-align: middle`，你很高兴

[**演示**](http://jsfiddle.net/qDg4q/)

CSS

```
td img {
   vertical-align: middle;   
} 
```

# twitter-bootstrap - 引导下拉菜单在 IE8 中不起作用

> ID：15987426
> 
> 赞同：8
> 
> 时间：2013-04-13T11:45:08.583
> 
> 标签：twitter-bootstrap, drop-down-menu, internet-explorer-8

我正在使用 Bootstrap 框架来设计我的网站。我在导航中有下拉菜单，但由于 IE8 中的一些未知原因，下拉菜单不起作用。当您单击“关于我们”链接时，下拉菜单并未完全显示。这只发生在 IE8 中。

它在其他浏览器中运行良好。

你可以在这里查看：

[https://dl.dropboxusercontent.com/u/52725754/fightback-responsive/index.html](https://dl.dropboxusercontent.com/u/52725754/fightback-responsive/index.html)

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-18T22:10:31.150

Here is the solution to this issue on the Bootstrap GitHub forums: [https://github.com/twitter/bootstrap/issues/6548](https://github.com/twitter/bootstrap/issues/6548). It seems as though native IE8 will sometimes break due to the filter: parameter which is used throughout Bootstrap css for gradients etc. The solution is to add filter:none!important; to an element like .navbar or .navbar-inner. The former worked out for me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-29T14:35:55.713

使用引导程序 3.3.4 在 IE8 上的下拉菜单出现问题。我设法通过使用 jquery 版本 1.11.2 而不是 jquery 版本 2+ 来解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T04:26:03.777

我在使用引导程序版本 2.3.2 的 IE8 中没有显示下拉列表的问题。

在阅读了一些提要后，我得出了这个答案，并将其添加到我的 IE8 和 7 条件样式表中。

/** 修复 IE8 兼容模式下下拉问题 **/

```
.navbar-inner{filter:none;} 
```

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T10:29:58.750

```
IE8 fix for twitter bootstrap responsive menu:

For me the **menu-toggle** button appeared in IE8 so to make it appear as normal menu I used

<!--[if lt IE 9]>
<script src="http://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="http://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

And a seprate CSS for IE8 containing the below classes 
<!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="css/ie8.css" media="screen" />
  <![endif]-->

Include the below classes inside the ie8.css file

.navbar-header, .navbar-collapse, .collapse{display:none;}
.collapseie8 ul li{ float:left; }
.navbar-nav, .collapse{ display:block; }
    .navbar-inverse.nav li.dropdown.open > .dropdown-toggle,
    .navbar-inverse.nav li.dropdown.active > .dropdown-toggle,
    .navbar-inverse.nav li.dropdown.open.active > .dropdown-toggle, .nav, .navbar, .navbar-inverse.navbar-inner { 

        filter: none!important;
        background-image: none;
    }

 <div id="defaultmenu" class="navbar-collapse collapse collapseie8">
                <ul class="nav navbar-nav "> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-25T12:33:04.810

bootstrap-theme 存在问题（在 IE8 和 IE9 中），请参阅[此线程](https://github.com/twbs/bootstrap/issues/10257)。

要确认这是您的问题，

*   检查下拉菜单是否适用于[Bootstrap 的导航栏示例](http://getbootstrap.com/examples/navbar/)
*   注释掉包含的`bootstrap-theme.min.css`. 然后应该出现下拉菜单。

我使用了以下解决方法（在第一个链接中建议）：

*   使用`bootstrap-theme.css`而不是 .min 版本
*   注释掉这些行`filter: progid:DXImageTransform.Microsoft.gradient(...)`

Mark Otto 还建议将导航栏的内容包装在另一个 div 中，并在那里添加样式调整。

希望这可以帮助

# java - 在 Java Web 应用程序中读取和使用本地视频文件

> ID：15987428
> 
> 赞同：0
> 
> 时间：2013-04-13T11:45:20.397
> 
> 标签：java, file, video

我有一个 java web 应用程序，它使用 java servlet 来处理用户请求。

我的服务器上已经有我的视频，位置 C:\videos\，我想在我的 java web 应用程序上显示这些文件。我不想将这些电影上传到我的网络应用程序，因为其中一些非常大，我希望能够插入一个新驱动器并在我的服务器上使用它，以防磁盘空间不足，所以我将来可以有更多的视频。

所以我的问题是，我如何将我的电影文件加载到我的 java web 应用程序中，这样当它们在 web 服务器的本地 C 驱动器上时，我可以在我的网页上显示它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:33:08.853

您需要设置一个指向本地文件夹的外部上下文。对于在 tomcat 中关于 docbase 的相同研究。

还要记住这样做意味着它将是一个单独的应用程序上下文。

上下文名称是xml文件的名称

# graph - 边缘双分区，没有三角形：复杂性？

> ID：15987429
> 
> 赞同：0
> 
> 时间：2013-04-13T11:45:26.990
> 
> 标签：graph, geometry, complexity-theory, bipartite

我必须找到一种算法来解决教职员工的问题。我不是要求解决方案（请不要发布任何解决方案），请进一步阅读。

问题的句子：

```
** Given a graph G = (V, E) find 2 sets S1 and S2 of edges of G such that:
   1\. S1 ∪ S2 = E
   2\. S1 ∩ S2 = ∅
   3\. The 2 subgraphs of G formed by S1 and S2 do not contain triangles (triangle = 3 nodes such that they link together 2 by 2) 
```

在过去的两天里，我一直在尝试找到一种算法来解决这个问题，我认为我走对了。对于之前偶然发现它的任何人：你知道这个问题是否已经在多项式时间内解决了吗？（如果不是，它是 NP-complete/NP-hard/NP 吗？）

在此先感谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:16:46.977

谷歌搜索了一下，找到了。它被称为[单色三角形](https://en.wikipedia.org/wiki/Monochromatic_triangle)，它是NP完全的。

# php - PHP preg_match：通过类函数链接单个或多个图像

> ID：15987430
> 
> 赞同：1
> 
> 时间：2013-04-13T11:45:29.670
> 
> 标签：php, image, class, preg-match, switch-statement

各位程序员，

我想要完成的是一种使用类从目录中获取图像的动态方法`image`。

我坚持提供返回匹配项的确切字符串，但是当尝试`"`与返回的匹配项进行回显时，如果未提供整个字符串，则图像与部分字符串加上扩展名链接。

```
<?php $image = new image; ?> 
```

调用类函数：

```
<?php $image -> get_image('this_string_1',''); ?> 
```

图片目录内容

```
<?php $path = $_SERVER['DOCUMENT_ROOT'].'/images/;'?>

this_string_1.png

this_string_2.png

this_string_3.png 
```

班上：

```
<?php 
class image{
    function get_image($name,$class){
    if(strlen($class)==0){ $class="default"; }
    ##@@[ Checks the type of image
    global $doc_root,$html_path;
    if($handle = opendir($doc_root.'/images/')){
        while(false !==($value = readdir($handle))){
            if($value !== '..' && $value!=='.'){
                $extention;
                $ext_jpeg = substr($value,-3);
                    if($ext_jpeg=='jpg'){
                        $extention=".jpg";
                    }
                $ext_png = substr($value,-3);
                    if($ext_png=='png'){
                        $extention=".png";
                    }
                $ext_gif = substr($value,-3);
                    if($ext_gif=='gif'){
                        $extention='.gif';
                    }
                }
            switch($extention){
                case '.jpg':
                if(preg_match("/$name/",$value,$result)){
                    foreach($result as $jpg){
                        echo '<img class="'.$class.'" src="'.$html_path.'/images/'.$jpg.'.jpg">';
                        }
                    }
                break;
                case '.png':
                if(preg_match("/$name/",$value,$result)){
                    foreach($result as $png){
                        echo '<img class="'.$class.'" src="'.$html_path.'/images/'.$png.'.png">';
                        }
                    }
                break;
                case '.gif':
                if(preg_match("/$name/",$value,$result)){
                    foreach($result as $gif){
                        echo '<img class="'.$class.'"src="'.$html_path.'/images/'.$gif.'.gif">';
                        }
                    }
                break;

                }
            }   
        }       
    }
}
?> 
```

我相信有很多方法可以完成这样的事情。任何建议将不胜感激。

按照马丁斯的建议。我删除了 if 和 switch 语句，并在第二个 if 语句中将其替换为“substr”。

```
<?php 
class image{
    function get_image($name,$class){
    if(strlen($class)==0){ $class="default"; }
    global $doc_root,$html_path;
    if($handle = opendir($doc_root.'/images/')){
        while(false !==($value = readdir($handle))){
            if($value !== '..' && $value!=='.' && substr($value, 0, -4)==$name){

                echo '<img src="'.$html_path.'/images/'.$value.'">';

                }
            }   
        }       
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:10:28.887

1）我看不出你`if`要分配的语句序列有多大意义`$extention`。你为什么不做`$extention = substr($value,-4)`呢？

2）`switch($extention)`必须在里面`if($value !== '..' && $value!=='.')`

3）你想通过什么来实现`preg_match`？

如果您只想完全匹配名称，只需执行`substr($value, 0, -4) == $name`. 好吧，这依赖于具有 3 个字符的扩展名，这并不完美，但你已经依赖它了。

# twitter-bootstrap - 向右浮动某些列表项

> ID：15987432
> 
> 赞同：4
> 
> 时间：2013-04-13T11:45:33.677
> 
> 标签：twitter-bootstrap, css-float, listitem

我目前正在使用引导程序作为导航栏，我已经更改了一些内容，因此看起来有所不同。但我想将 2 个列表项对齐到 ul 的右侧。

我已经搜索过，但我真的找不到有效的解决方案。另外请记住，我仍然希望导航栏能够完全响应。

```
<div class="navbar">
<div class="navbar-inner">
    <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

        <!-- Everything you want hidden at 940px or less, place within here -->
        <div class="nav-collapse collapse">
            <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Video Library</a></li>
                <li><a href="#">Orphanages</a></li>
                <li><a href="#">The collective</a></li>
                <li><a href="#">What we do</a></li>
                <li><a href="#">Partners</a></li>
                <li class="donate"><a href="#">Donate</a></li>
           </ul>
        </div>
    </div>
</div> 
```

我希望你们能帮助我弄清楚如何做到这一点。谢谢

![我有的](https://i.stack.imgur.com/c9XtL.png)

![我需要的](https://i.stack.imgur.com/ZDsOn.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T12:10:50.047

我认为最好的解决方案是将链接列表分成两部分：

```
 <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Video Library</a></li>
            <li><a href="#">Orphanages</a></li>
            <li><a href="#">The collective</a></li>
            <li><a href="#">What we do</a></li>
       </ul>
       <ul class="nav pull-right">
            <li><a href="#">Partners</a></li>
            <li class="donate"><a href="#">Donate</a></li>
       </ul> 
```

您也可以`pull-right`只添加到通讯员`li`，但您需要修改 的`width`才能`ul`工作。

# javascript - 为什么我不能删除用 var 声明的 javascript 值？

> ID：15987436
> 
> 赞同：6
> 
> 时间：2013-04-13T11:45:54.080
> 
> 标签：javascript

例子：

```
x = "Hello";
delete x; // returns true, x is removed

var y = "Hello";
delete y; // returns false, y is not removed 
```

我对这是*如何*发生的不感兴趣，我想知道*为什么*该语言具有此功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T11:49:54.690

严格来说第一个`x`不是变量而是全局对象的属性。在浏览器中它通常是`window`（所以`x = "Hello"`等于`window.x = "Hello"`）。你不能用`delete`它来删除变量，但你可以用它来删除对象属性，这就是它在第一种情况下所做的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T11:54:57.710

[此页面](http://perfectionkills.com/understanding-delete/)有一个冗长的解释，说明了原因。

简短的回答是删除是针对属性，而不是变量。var y 创建一个变量。x = "something" 创建全局范围的属性。

另请注意，并非所有浏览器都处理相同的删除。 *咳嗽 IE*

# mysql - 使用最接近 now() 的时间字段更新数据库条目

> ID：15987437
> 
> 赞同：0
> 
> 时间：2013-04-13T11:45:57.333
> 
> 标签：mysql

我有 MySQL 数据库表，其结构如下所述。

```
uid         info           time
6           null           2013-04-12 23:00:00
5           something      2013-04-12 22:00:00
4           something      2013-04-10 09:00:00
3           something      2013-04-09 19:00:00
2           something      2013-04-02 10:00:00
1           something      2013-04-01 11:00:00 
```

如何在一个 MySQL 查询中更新具有最新时间值的行？

可能的解决方案之一是

```
SELECT uid FROM my_table ORDER BY time DESC LIMIT 1
UPDATE my_table SET info = 'something' WHERE uid = 'uid_received_in_previuos_query' 
```

但它是两个顺序查询解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:48:55.410

如果我猜对了，您正在寻找[MySQL NOW() 函数](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)。

使用示例：

```
UPDATE my_table SET info='something', time=NOW() WHERE id=6 
```

或者，如果您正在寻找最新的行来更新任何内容，您可以

```
UPDATE my_table SET info='something', time=NOW() ORDER BY time DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:49:21.157

你可以这样做

```
WHERE time > '2013-04-12 00:00:01' and time < '2013-04-12 23:59:59' 
```

**对于动态日期**

```
WHERE time > date ("Y-m-d").'00:00:01' and time < date ("Y-m-d").'23:59:59' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:54:32.923

这应该工作

```
update  tableName first  inner join (SELECT uid FROM tableName ORDER BY time DESC LIMIT 1) as second SET first.info = 'something' where first.uid = second.uid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T12:14:11.713

这就是我一直在寻找的

```
 UPDATE my_table SET info = 'something' ORDER BY time DESC LIMIT 1; 
```

# version-control - 哪个 vcs 跟踪每个文件的更改注释

> ID：15987440
> 
> 赞同：0
> 
> 时间：2013-04-13T11:46:06.913
> 
> 标签：version-control, mercurial

我们需要更改为新的 VCS 系统。我似乎无法找到一个跟踪每个文件和每个更改集的更改评论。目前，当我们在当前的 VCS 中查看文件历史记录时，它会显示各种签入以及该签入文件的注释以及整体签入注释。我们目前正在评估 hg 并喜欢它，但找不到如何实现此行为。任何人都可以建议如何在 hg 中执行此操作 - 或者 VCS 将允许此功能吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:56:53.120

你可以跑

```
$ hg log your-file 
```

使用 Mercurial 获取该文件的历史记录。它也适用于目录或多个文件，您可以在其中获得更改任一指定文件的变更集日志。

Mercurial 在这方面实际上非常有效：尽管有存储库范围的变更集，但它以每个文件为基础存储增量，这使得 Mercurial 可以很容易地向您显示每个文件的历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:27:46.123

Hg`commit`可以处理您指定的已更改文件或它找到的所有已更改文件。然后，该组文件构成变更集，然后将全部应用相同的提交消息。听起来您正在寻找一个超级提交来将多个提交包装成一个更大的提交。

命名分支是此类事情的预期方法。然后，您可以提交带有特定于某些文件的注释，并且整体分支名称是您组合在一起的功能。通过命令行或 Tortoise Hg，您可以选择哪些文件是每个提交的一部分。

# javascript - 如何在放置事件后获取实际图像宽度和高度

> ID：15987445
> 
> 赞同：3
> 
> 时间：2013-04-13T11:47:00.770
> 
> 标签：javascript, html, drag-and-drop

我一直在研究以下范例，以了解“如何从桌面拖动图像并将其拖放到浏览器中”适用于 Html 5。但是在我删除图像后，我无法获得有关的信息在我提醒它的函数 handleFiles(files,n) 中图像的实际宽度和高度。这甚至可能吗？谁能帮我？

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="http://www.facebook.com/2008/fbml"  xml:lang="el-gr" lang="el-gr" dir="ltr">
    <head>
       <meta http-equiv="content-type" content="text/html; charset=utf-8" />
       <title>Files javascript upload with drag and drop</title>
    </head>
<title>File(s) size</title>
</head>
<body>

<table>
    <tr>
        <td><input type="file" id="fileElem1"  name="fileElem1" accept="image/*" style="display:none" onchange="handleFiles(this.files)">
<div id="dropbox_1" style="width:200px;height:100px;border:1px solid blue;z-index=10;">  
    <div id="preview1"></div>
</div>
</td>
        <td><input type="file" id="fileElem2"  name="fileElem2" accept="image/*" style="display:none" onchange="handleFiles(this.files)">
<div id="dropbox_2" style="width:200px;height:100px;border:1px solid blue;">  <div id="preview2"></div></div></td>
        <td><input type="file" id="fileElem3"  name="fileElem3" accept="image/*" style="display:none" onchange="handleFiles(this.files)">
<div id="dropbox_3" style="width:200px;height:100px;border:1px solid blue;">  <div id="preview3"></div></div></td>
    </tr>
</table>

<input type="button" onclick="sendFiles()" value="send" >
<script>
    var dropbox1,dropbox2,dropbox3; 
    dropbox1 = document.getElementById("dropbox_1");
    dropbox1.addEventListener("dragenter", dragenter, false);
    dropbox1.addEventListener("dragover", dragover, false);
    dropbox1.addEventListener("drop", drop, false);

    dropbox2 = document.getElementById("dropbox_2");
    dropbox2.addEventListener("dragenter", dragenter, false);
    dropbox2.addEventListener("dragover", dragover, false);
    dropbox2.addEventListener("drop", drop, false);

    dropbox3 = document.getElementById("dropbox_3");
    dropbox3.addEventListener("dragenter", dragenter, false);
    dropbox3.addEventListener("dragover", dragover, false);
    dropbox3.addEventListener("drop", drop, false);

    var fileElem1 = document.getElementById("fileElem1");
        var fileElem2 = document.getElementById("fileElem2");   
        var fileElem3 = document.getElementById("fileElem3");

    function dragenter(e) {
      e.stopPropagation();
      e.preventDefault();
    }

    function dragover(e) {
      e.stopPropagation();
      e.preventDefault();
    } 

    function drop(e) {
      e.stopPropagation();
      e.preventDefault();

      var n=e.currentTarget.id.split("_");
      var dt = e.dataTransfer;
      var files = dt.files;

      handleFiles(files,n[1]);
    }

    var filesforupload = new Array(null,null,null);
    function handleFiles(files,n) {

      for (var i = 0; i < files.length; i++) {
        var file = files[i];
        var imageType = /image.*/;

        if (!file.type.match(imageType)) {
          continue;
        }

        var img = document.createElement("img");
        img.classList.add("obj");
        img.file = file;
        alert(img.width); // <- HERE I NEED TO GET THE width of the image
            img.style.zIndex=2;
            img.style.position="absolute";                  
            document.getElementById("dropbox_"+n).style.height="200";
        document.getElementById("preview"+n).innerHTML = "";
        document.getElementById("preview"+n).appendChild(img);

        var reader = new FileReader();
        reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);
        reader.readAsDataURL(file);
        filesforupload[n-1]=file;
        //filesforupload.push(file);
        //sendFile(file);
      }
    }

    function sendFile(file) {
            var uri = "upload.php";
            var xhr = new XMLHttpRequest();
            var fd = new FormData();

            xhr.open("POST", uri, true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    // Handle response.
                    alert(xhr.responseText); 
           // handle response.
                }
            };
        var reader = new FileReader();
            fd.append('fileElem', file);
            // Initiate a multipart/form-data upload
            xhr.send(fd);
        }

    function sendFiles(){

                for (var i=0; i<filesforupload.length; i++) {
           if(filesforupload[i]!=null)
                        sendFile(filesforupload[i]);
                }
    }

            dropbox1.ondrop = function(event) {
                event.stopPropagation();
                event.preventDefault(); 
        filesArray = event.dataTransfer.files;
            }

    function dump(obj) {
        var out = '';
        for (var i in obj) {
        out += i + ": " + obj[i] + "\n";
        }

        alert(out);        
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:20:32.430

试试这种方式（更新为 100 毫秒超时）：

```
 reader.onload = (function(aImg) {
        return function(e) {
            aImg.src = e.target.result;
            setTimeout(function() {
                console.log(aImg.width);  // right now file already loaded...
            }, 100);
        };
    })(img); 
```

[http://jsfiddle.net/wVB3V/3/](http://jsfiddle.net/wVB3V/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:39:32.037

无论如何，我通过向图像上的图像 + onload 函数添加一个 id 找到了以下解决方案，就像这样

```
img.addEventListener('load', function() { alert(document.getElementById('test').width); /* ... */ }, false);
img.id="test"; 
```

顺序无关紧要，因为加载事件在 img 对象被附加后触发。

这是完整的代码。

```
<html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:og="http://ogp.me/ns#"
          xmlns:fb="http://www.facebook.com/2008/fbml"  xml:lang="el-gr" lang="el-gr" dir="ltr">
        <head>
           <meta http-equiv="content-type" content="text/html; charset=utf-8" />
           <title>File(s) javascript upload with drag and drop</title>
        </head>
    <title>File(s) size</title>
    </head>
    <body>

    <table>
        <tr>
            <td><input type="file" id="fileElem1"  name="fileElem1" accept="image/*" style="display:none" onchange="handleFiles(this.files)">
    <div id="dropbox_1" style="min-width:200px;height:100px;border:1px solid blue;z-index=10;">  
        <div id="preview1"></div>
    </div>
    </td>
            <td><input type="file" id="fileElem2"  name="fileElem2" accept="image/*" style="display:none" onchange="handleFiles(this.files)">
    <div id="dropbox_2" style="width:200px;height:100px;border:1px solid blue;">  <div id="preview2"></div></div></td>
            <td><input type="file" id="fileElem3"  name="fileElem3" accept="image/*" style="display:none" onchange="handleFiles(this.files)">
    <div id="dropbox_3" style="width:200px;height:100px;border:1px solid blue;">  <div id="preview3"></div></div></td>
        </tr>
    </table>

    <input type="button" onclick="getthewidth()" value="send" >
    <script>
function getthewidth(){
alert(document.getElementById('test').width);
}
        var dropbox1,dropbox2,dropbox3; 
        dropbox1 = document.getElementById("dropbox_1");
        dropbox1.addEventListener("dragenter", dragenter, false);
        dropbox1.addEventListener("dragover", dragover, false);
        dropbox1.addEventListener("drop", drop, false);

        dropbox2 = document.getElementById("dropbox_2");
        dropbox2.addEventListener("dragenter", dragenter, false);
        dropbox2.addEventListener("dragover", dragover, false);
        dropbox2.addEventListener("drop", drop, false);

        dropbox3 = document.getElementById("dropbox_3");
        dropbox3.addEventListener("dragenter", dragenter, false);
        dropbox3.addEventListener("dragover", dragover, false);
        dropbox3.addEventListener("drop", drop, false);

        var fileElem1 = document.getElementById("fileElem1");
            var fileElem2 = document.getElementById("fileElem2");   
            var fileElem3 = document.getElementById("fileElem3");

        function dragenter(e) {
          e.stopPropagation();
          e.preventDefault();
        }

        function dragover(e) {
          e.stopPropagation();
          e.preventDefault();
        } 

        function drop(e) {
          e.stopPropagation();
          e.preventDefault();

          var n=e.currentTarget.id.split("_");
          var dt = e.dataTransfer;
          var files = dt.files;

          handleFiles(files,n[1]);
        }

        var filesforupload = new Array(null,null,null);
        function handleFiles(files,n) {

          for (var i = 0; i < files.length; i++) {
            var file = files[i];
            var imageType = /image.*/;

            if (!file.type.match(imageType)) {
              continue;
            }

            var img = document.createElement("img");
            img.classList.add("obj");
            img.file = file;
        img.addEventListener('load', function() { alert(document.getElementById('test').width); /* ... */ }, false);
        img.id="test";
        //alert(document.getElementById('test').id);
           // alert(img.width); // <- HERE I NEED TO GET THE width of the image
                img.style.zIndex=2;
                img.style.position="absolute";                  
                //document.getElementById("dropbox_"+n).style.height="200";
            document.getElementById("preview"+n).innerHTML = "";
            document.getElementById("preview"+n).appendChild(img);
            var reader = new FileReader();
            reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);
            reader.readAsDataURL(file);
            filesforupload[n-1]=file;
            //filesforupload.push(file);
            //sendFile(file);
          }
        }

        function sendFile(file) {
                var uri = "upload.php";
                var xhr = new XMLHttpRequest();
                var fd = new FormData();

                xhr.open("POST", uri, true);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == 4 && xhr.status == 200) {
                        // Handle response.
                        alert(xhr.responseText); 
               // handle response.
                    }
                };
            var reader = new FileReader();
                fd.append('fileElem', file);
                // Initiate a multipart/form-data upload
                xhr.send(fd);
            }

        function sendFiles(){

                    for (var i=0; i<filesforupload.length; i++) {
               if(filesforupload[i]!=null)
                            sendFile(filesforupload[i]);
                    }
        }

                dropbox1.ondrop = function(event) {
                    event.stopPropagation();
                    event.preventDefault(); 
            filesArray = event.dataTransfer.files;
                }

        function dump(obj) {
            var out = '';
            for (var i in obj) {
            out += i + ": " + obj[i] + "\n";
            }

            alert(out);        
        }
    </script>
    </body>
    </html> 
```

# c# - 多个多对多插入

> ID：15987447
> 
> 赞同：0
> 
> 时间：2013-04-13T11:47:06.010
> 
> 标签：c#, wcf, entity-framework, many-to-many, wcf-data-services

我有一个运行 oData 的 WCF 数据服务，并尝试将数据插入其中。我正在尝试从 Windows 8 客户端异步。

我的实体如下所示：

```
Customer 1 -> m CustomerAddress 1 <- m Address 
```

我可以通过简单地调用 AddObject 方法插入地址或客户并保存更改：

```
context.AddObject("Customer",new Customer { FirstName="foo" });
context.AddObject("Address",new Address { Street="bar" });
await context.SaveChangesBatch(); //a extension class that handels the BeginSaveChanges async calls as batch 
```

我还可以添加地址和客户之间的关系

```
Customer customer=new Customer { FirstName="foo" };
Address orderAddress=new Address { Street="bar" };
CustomerAddress customerAddress = new CustomerAddress { Customer = customer, Address = orderAddress };
context.AddObject("Customer",customer);
context.AddObject("Address",orderAddress);
context.AddObject("CustomerAddress",customerAddress);
await context.SaveChangesBatch(); 
```

但是，我**无法**在上下文中添加第二个相关地址：

```
Address orderAddress=new Address { Street="bar" };
Address deliveryAddress=new Address { Street="bar2" };
CustomerAddress customerAddress = new CustomerAddress { Customer = customer, Address = orderAddress };
Customer customer=new Customer { FirstName="foo" };
CustomerAddress customerAddress = new CustomerAddress { Customer = customer, Address = deliveryAddress };
context.AddObject("Customer",customer);
context.AddObject("Address",orderAddress);
context.AddObject("Address",deliveryAddress);
context.AddObject("CustomerAddress",customerAddress);
context.AddObject("CustomerAddress",customerAddress2);
await context.SaveChangesBatch(); 
```

在[这篇文章](https://stackoverflow.com/questions/7050404/create-code-first-many-to-many-with-additional-fields-in-association-table)中，我了解到只需像这样插入相关实体就足够了：

```
CustomerAddress customerAddress = new CustomerAddress { Customer = customer, Address = orderAddress };
CustomerAddress2 customerAddress = new CustomerAddress { Customer = customer, Address = deliveryAddress };
context.AddObject("CustomerAddress",customerAddress);
context.AddObject("CustomerAddress",customerAddress2);
await context.SaveChangesBatch(); //On save, it should automatically insert customer and order but it dosn't work :( 
```

这将是完美的，但它不起作用。该错误显示外键错误。我有什么设置错误吗？我的 EF 看起来像这样：

![英孚模型](https://i.stack.imgur.com/Md6hP.png)

我是否必须在foregin key properties上添加一些东西：（我使用的是模型优先方法） ![在此处输入图像描述](https://i.stack.imgur.com/7rlbG.png)

作为附加节点：我使用的是 Azure SQL 数据库，因此不允许使用复合键 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:36:18.440

可能是我错了，但不同的是，在您引用的帖子中，MemberComments（在您的情况下 - CustomerAddress） - 是集合：

```
 public virtual ICollection<MemberComment> MemberComments { get; set; } 
```

添加项目时，不要将它们添加到上下文中，而是添加到集合中：

> 语境。会员评论 .Add(memberComment1) **;** // 还将添加 member1 和 comment1 上下文。会员评论 .Add(memberComment2) **;** // 也会添加comment2

所以，在你的情况下，可能应该是这样的

> 语境。**your_defined_CustomerAddressesList** .add(customerAddress); 语境。**your_defined_CustomerAddressesList** .add(customerAddress2);

# php - php为icecast听众清理网站

> ID：15987449
> 
> 赞同：1
> 
> 时间：2013-04-13T11:47:08.040
> 
> 标签：php, icecast, data-scrubbing

任何人都可以帮助使用php从下面的链接中提取当前的侦听器计数我也在下面附加了phph代码，但它需要修改

```
http://209.105.250.69:8382/ 
```

来源如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Icecast Streaming Media Server</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0">
<h2>Icecast2 Status</h2>
<br><div class="roundcont">
<div class="roundtop"><img src="/corner_topleft.jpg" class="corner" style="display: none"></div>
<table border="0" width="100%" id="table1" cellspacing="0" cellpadding="4"><tr><td bgcolor="#656565">
<a class="nav" href="admin/">Administration</a><a class="nav" href="status.xsl">Server Status</a><a class="nav" href="server_version.xsl">Version</a>
</td></tr></table>
<div class="roundbottom"><img src="/corner_bottomleft.jpg" class="corner" style="display: none"></div>
</div>
<br><br><div class="roundcont">
<div class="roundtop"><img src="/corner_topleft.jpg" class="corner" style="display: none"></div>
<div class="newscontent">
<div class="streamheader"><table cellspacing="0" cellpadding="0">
<colgroup align="left"></colgroup>
<colgroup align="right" width="300"></colgroup>
<tr>
<td><h3>Mount Point /listen.mp3</h3></td>
<td align="right">
<a href="/listen.mp3.m3u">M3U</a><a href="/listen.mp3.xspf">XSPF</a>
</td>
</tr>
</table></div>
<table border="0" cellpadding="4">
<tr>
<td>Stream Title:</td>
<td class="streamdata">Quran Kareem Radio</td>
</tr>
<tr>
<td>Stream Description:</td>
<td class="streamdata">Quran Kareem Radio</td>
</tr>
<tr>
<td>Content Type:</td>
<td class="streamdata">audio/mpeg</td>
</tr>
<tr>
<td>Mount started:</td>
<td class="streamdata">Thu, 11 Apr 2013 19:19:59 -0400</td>
</tr>
<tr>
<td>Bitrate:</td>
<td class="streamdata">60</td>
</tr>
<tr>
<td>Current Listeners:</td>
<td class="streamdata">5</td>
</tr>
<tr>
<td>Peak Listeners:</td>
<td class="streamdata">25</td>
</tr>
<tr>
<td>Stream Genre:</td>
<td class="streamdata">Islam</td>
</tr>
<tr>
<td>Stream URL:</td>
<td class="streamdata"><a target="_blank" href="http://qkradio.com.au">http://qkradio.com.au</a></td>
</tr>
<tr>
<td>Current Song:</td>
<td class="streamdata"></td>
</tr>
</table>
</div>
<div class="roundbottom"><img src="/corner_bottomleft.jpg" class="corner" style="display: none"></div>
</div>
<br><br>&nbsp;

<div class="poster">Support icecast development at <a class="nav" target="_blank" href="http://www.icecast.org">www.icecast.org</a>
</div>
</body>
</html> 
```

到目前为止，我已经使用了以下内容，但需要对其进行修改

```
<?php

$fp = fsockopen("listen.qkradio.com.au", 8382, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {

for($i=0; $i<30; $i++) {
if(feof($fp)) break;
$fp_data=fread($fp,31337);
usleep(500000);
}
$fp_data=ereg_replace("^.*<body>","",$fp_data);
$fp_data=ereg_replace("</body>.*","",$fp_data);
list($current,$status,$peak,$max,$unique,$bitrate,$song) = explode(",", $fp_data);
if ($status == "0") {
echo "<center>Off Air</center>";
} else {
echo "<TABLE>";

//start edit below - comment with "//" unnecessary lines
echo "<TR><TD>Current Listeners: </TD><TD>".$current."</TD></TR>";
//echo "<TR><TD>Server Status: </TD><TD>".$status."</TD></TR>";

//stop editing from here

echo "</TABLE>";

//start edit below - comment with "//" next line to stop scrolling
echo "<marquee>".$song."</marquee>";
//stop editing here
}}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:57:45.880

首先，我会使用

```
$html = file_get_contents('http://209.105.250.69:8382/'); 
```

检索远程文件。然后我会使用：

```
$doc = new DOMDocument();
$doc->loadHtml($html); 
```

构建它的 DOM 文档。您可以使用 xpath 从中检索信息：

```
$selector = new DOMXPath($doc);
$result = $selector->query('....'); 
```

然后，例如，您可以使用以下代码来检索流统计信息：

```
$stats = array(
  'Stream Title' => '', 
  'Stream Description' => '', 
  'Bitrate' => ''
  // ...
);

foreach($stats as $key => $val) {
    $result = $selector->query("//td[text()='$key:']");

    foreach($result as $node) {
        $stats[$key] = $node->nextSibling->nextSibling->nodeValue;
    }   
}

var_dump($stats);

// output the stream description
echo $stats['Stream Description']; 
```

# node.js - Express 和 URL 重写 | HTML5 历史

> ID：15987451
> 
> 赞同：3
> 
> 时间：2013-04-13T11:47:33.970
> 
> 标签：node.js, angularjs, express

我正在尝试构建一个简单的服务器来提供一个 HTML 页面，其中所有逻辑都由 Angular 处理。就我使用 HTML5 历史模式而言，我能够浏览标准 URL。

现在，为了完成这项工作，我需要启用 URL 重写。我尝试了这一串行，虽然总是返回正确的 HTML 页面，但 URL 会有所不同并且不保留初始值。例如 /popular 应该加载 index.html 并保留 URL /popular 以便 JS 逻辑可以加载所需的页面。

下面是快速代码。

```
var express = require("express");
var app = express();

app.configure(function(){
  app.use(express.static(__dirname + '/dist'));
}); 

app.get("/*", function(req, res, next){
  res.sendfile(__dirname + '/dist/index.html');
});

app.listen(3000); 
```

任何建议表示赞赏。感谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:58:21.700

您需要为相对文件名设置根目录。

```
app.all('/*', function(req, res) {
  res.sendfile('index.html', { root: __dirname+'/dist' });
}); 
```

# c++ - Red-Black tree fixing insert

> ID：15987460
> 
> 赞同：1
> 
> 时间：2013-04-13T11:48:14.530
> 
> 标签：c++, algorithm, insertion, red-black-tree

I'm creating my own Map structure (needed for class) using RB tree. From what I've learned about insertion we have 3 cases to handle. I'm following [this](http://www.cs.auckland.ac.nz/~jmor159/PLDS210/red_black.html "this") implementation. Still I'm getting a memory violation after inserting the 3rd value ( and any further) while fixing the RB tree structure. How do I handle this case?

Child gets inserted:

![Image](https://i.stack.imgur.com/hn1sUm.png)

So here is my implementation:

```
struct Node
{
    pair<int,int> key;
    int Value;
    Node *LeftNode;
    Node *RightNode;
    Node *Parent;
    bool color;                 // 0 - black 1 - red
};

class Map
{
    int size;

public:
    Map();
    void insert(pair<int,int>, int);

private:
    void RotateLeft(Node*);
    void RotateRight(Node*);
    void InsertNode(Node*, pair <int,int>, int);
    void RestoreColor(Node*);

    Node* root;
};

void Map::RestoreColor(Node* child)
{
    while( child->Parent!=root && child->Parent->color==1 )
    {
        if(child->Parent == child->Parent->Parent->LeftNode)            
        {
            Node* uncle = child->Parent->Parent->RightNode;

            if(uncle->color == 1)                                       
            {
                child->Parent->color = 0;
                uncle->color = 0;
                child->Parent->Parent->color = 1;
                child = child->Parent->Parent;
            }else
            {
                if(child = child->Parent->RightNode)                    
                {
                    child = child->Parent;
                    RotateLeft(child->Parent);
                }
                child->Parent->color = 0;
                child->Parent->Parent->color= 1;
                RotateRight(child->Parent->Parent);
            }
        }else
        {
            if(child->Parent == child->Parent->Parent->RightNode)
            {
                Node* uncle = child->Parent->Parent->LeftNode;

                if(uncle->color == 1)                                                           {
                    child->Parent->color = 0;
                    uncle->color = 0;
                    child->Parent->Parent->color = 1;
                    child = child->Parent->Parent;
                }else
                {
                    if(child = child->Parent->LeftNode)                 
                    {
                        child = child->Parent;
                        RotateRight(child->Parent);
                    }
                    child->Parent->color = 0;
                    child->Parent->Parent->color= 1;
                    RotateLeft(child->Parent->Parent);
                }
            }
        }
        root->color=0;
    }
}; 
```

Violation happens at `uncle` access, where in this example `uncle` equals `null`. How do I change the function?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-09T04:08:31.387

您使用的实现依赖于哨兵节点作为叶节点，因此您始终有一个黑色节点，您可以在这种情况下取​​消引用。要更改它，您必须更改行，例如

```
if(uncle->color == 1) 
```

至

```
if((uncle != NULL) && (uncle->color == 1)) 
```

然后它将采用“else”子句，就像在哨兵版本中一样，在非哨兵版本中有空指针的情况下，颜色将始终为黑色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T23:47:25.523

```
RotateLeft(child->Parent); 
```

```
RotateRight(child->Parent); 
```

您的代码中的上述内容不应该是

`RotateLeft(child)`和`RotateRight(child)`分别。

# java - 使用按钮单击事件更新java中的变量

> ID：15987462
> 
> 赞同：0
> 
> 时间：2013-04-13T11:48:21.467
> 
> 标签：java

我已经绘制了一个图表并在其中放置了一个 20*20 像素的框，我试图用一堆按钮来移动框。问题是，我似乎无法从动作侦听器中更改框的 X 轴和 Y 轴值。这是我的第一个图形应用程序，帮助！

GrapMain.java

```
import java.awt.BorderLayout;
import javax.swing.JFrame;
import java.awt.Color;
import javax.swing.JTextField;

public class GraphMain {

    public static void main(String [] args){

        Display nashDisplay = new Display();
        nashDisplay.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }
} 
```

图.java

```
import java.awt.*;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class Graph extends JPanel {
    int x = 5, y = 100;
    Graph (int x, int y){
        this.x = x;
        this.y = y;
    }
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        this.setBackground(Color.WHITE);

        //horizontal lines
        g.setColor(Color.RED);
        for (int height=20; height<200; height+=20){
            g.drawLine(5, height, 480, height);
        }
        //verticle lines
        g.setColor(Color.RED);
        for (int height=5; height<400; height+=20){
            g.drawLine(height,200,height,10);
        }
        //the box
        g.setColor(Color.BLACK);
        g.fillRect(this.x, this.y, 20, 20);
        //g.fillRect((+20 to move right one box),(+20 to move down one box), 20, 20);
        //g.fillRect((-20 to move left one box),(-20 to move up one box), 20, 20);
    }
} 
```

显示.java

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class Display extends JFrame {

    int X = 5, Y = 100;
    private JButton left, right, up, down;
    Graph dude = new Graph(X, Y);

    public Display() {
        super("nash's graph(moving the box!)");

        JButton left = new JButton("move left");
        add(left, BorderLayout.WEST);
        left.addActionListener(
                new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                X = X - 20;
            }
        });
        JButton right = new JButton("move right");
        add(right, BorderLayout.EAST);
        right.addActionListener(
                new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                X = X + 20;
            }
        });
        JButton up = new JButton("move up");
        add(up, BorderLayout.NORTH);
        up.addActionListener(
                new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                Y = Y - 20;
            }
        });
        JButton down = new JButton("move down");
        add(down, BorderLayout.SOUTH);
        down.addActionListener(
                new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                Y = Y + 20;
            }
        });
        setSize(500, 300);
        setVisible(true);
        add(dude, BorderLayout.CENTER);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:13:27.210

你需要 To`repaint`在你 cange`x`和`y`value 之后像这样：

```
 JButton left = new JButton("move left");
        add(left, BorderLayout.WEST);
        left.addActionListener(
                new ActionListener() {

                    public void actionPerformed(ActionEvent e) {

                        X = X - 20;
                        dude.x = X;
                        dude.y = Y;
                        repaint();
                    }
                });
        JButton right = new JButton("move right");
        add(right, BorderLayout.EAST);
        right.addActionListener(
                new ActionListener() {

                    public void actionPerformed(ActionEvent e) {
                        X = X + 20;
                        dude.x = X;
                        dude.y = Y;
                        repaint();
                    }
                });
        JButton up = new JButton("move up");
        add(up, BorderLayout.NORTH);
        up.addActionListener(
                new ActionListener() {

                    public void actionPerformed(ActionEvent e) {
                        Y = Y - 20;
                        dude.x = X;
                        dude.y = Y;
                        repaint();

                    }
                });
        JButton down = new JButton("move down");
        add(down, BorderLayout.SOUTH);
        down.addActionListener(
                new ActionListener() {

                    public void actionPerformed(ActionEvent e) {
                        Y = Y + 20;
                        dude.x = X;
                        dude.y = Y;
                        repaint();
                    }
                }); 
```

# web-services - IP 地址 MULE CE 3.3.0 中所有请求的日志文件？

> ID：15987466
> 
> 赞同：0
> 
> 时间：2013-04-13T11:48:58.303
> 
> 标签：web-services, cxf, mule, interceptor

在 MULE CE 3.3.0 中，我想实现这个过程：

![在此处输入图像描述](https://i.stack.imgur.com/XJ4Jh.png)

1- 邮局提供向客户提供邮政编码的服务。因此邮局为其服务创建了一个 WSDL 文件。

2-在这里，我们公司是邮局和客户之间的连接器。我们公司使用mule，根据邮局的WSDL 文件创建另一个WSDL 文件，并将WSDL 发布出来供客户使用。

3- Company-A 和 Company-B，获取 WSDL 文件 URL，例如在 My-eclipse IDE 或任何其他 IDE 中创建一个 portlet 并将其部署在 liferay 门户中作为 Web 服务，用于向其显示邮政编码客户。

在此过程中，我想要一个 IP 地址的日志文件。这意味着，我想在 A 公司的客户端或 B 公司的客户端发送到服务器（我们公司）的每个请求之后，将其 IP 地址插入数据库或文件中。

我用红色箭头说明了我在图像中的位置。现在我想在 MULE 服务器中放置一个脚本，并收集公司 A 和公司 B 使用邮政编码 web 服务的客户的所有 IP 地址。

我可以 为此问题使用**cxf-interceptor吗？**如何？引导我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:03:49.487

正如 genjosanzo 在[https://stackoverflow.com/a/15993127/387927](https://stackoverflow.com/a/15993127/387927)中建议的那样，您可以访问 CXF 拦截器中的所有 Mule 标头。这意味着是的，您可以使用 CXF 拦截器实现您的目标。

以下是此类拦截器的示例：[https ://github.com/mulesoft/mule/blob/mule-3.3.1/modules/cxf/src/main/java/org/mule/module/cxf/support/MuleHeadersInInterceptor .java](https://github.com/mulesoft/mule/blob/mule-3.3.1/modules/cxf/src/main/java/org/mule/module/cxf/support/MuleHeadersInInterceptor.java)

这是一个配置示例，展示了如何使用 Spring 实例化和配置 CXF 拦截器：[https ://github.com/mulesoft/mule/blob/mule-3.3.1/modules/cxf/src/test/resources/header-配置文件](https://github.com/mulesoft/mule/blob/mule-3.3.1/modules/cxf/src/test/resources/header-conf.xml)

它的要点是：

```
<cxf:inInterceptors>
    <spring:bean id="foo1" class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
</cxf:inInterceptors> 
```

# java - 在 JavaMail 中获取 html 电子邮件内容

> ID：15987472
> 
> 赞同：0
> 
> 时间：2013-04-13T11:49:47.597
> 
> 标签：java, android, html, jakarta-mail, content-type

我使用 JavaMail API 为我的 Android 手机制作了一个电子邮件客户端。如果它是 html 邮件，我不知道如何获取电子邮件内容。我正在使用以下代码来获取内容：

```
public void printMessage(int messageNo) throws Exception {
    Log.i("MsgNo", "Getting message number: " + messageNo);

    Message m = null;

    try {
        m = folder.getMessage(messageNo);
        dumpPart(m);
    } catch (IndexOutOfBoundsException iex) {
        Log.i("Out of Range","Message number out of range");
    }
}

public static void dumpPart(Part p) throws Exception {

    if (p instanceof Message)
        dumpEnvelope((Message)p);
    Object content = p.getContent();
    Log.i("dumpPart",(String) content);
    String ct = p.getContentType();
    try {
        pr("CONTENT-TYPE: " + (new ContentType(ct)).toString());
        Log.i("MsgNo", "Content Type");
    } catch (ParseException pex) {
        pr("BAD CONTENT-TYPE: " + ct);
        Log.i("MsgNo", "Bad Content Type");

    }

     //* Using isMimeType to determine the content type avoids
   //  * fetching the actual content data until we need it.

    if (p.isMimeType("text/plain")) {
        pr("This is plain text");
        pr("---------------------------");
        Log.i("Text", (String)p.getContent());       
    } else {
         Log.i("MsgNo", "Just a Separator");
        // just a separator
        pr("---------------------------");

    }
} 
```

在 Logcat 中，我得到了 dumpenvelope((Message)p); 的返回值。，但在那之后什么都没有。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:15:10.117

有没有抛出异常？

您是否[启用调试](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)并检查协议跟踪以查看可能失败的原因？

你在使用 IMAP 吗？

看起来您的程序是由名为 msgshow.java 的 JavaMail 示例程序的片段创建的，您找到完整的原始示例程序了吗？

[这个 JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#mainbody)也可能有帮助。

# asp.net-mvc-4 - CSS Intellisense 不适用于 Visual Studio 2012 Ultimate 中的 MVC 4 项目

> ID：15987476
> 
> 赞同：13
> 
> 时间：2013-04-13T11:50:07.877
> 
> 标签：asp.net-mvc-4, visual-studio-2012, intellisense

已经创建了一个全新的 Visual Studio 2012 Ultimate SP2 MVC4 项目，但无法让 CSS 类选择器智能感知工作？

当我输入`<p class="m"`......我应该让类“myClass”出现在智能感知下拉列表中，但没有任何反应。

我在下面列出的文件是：`\Views\Shared\_Layout.cshtml`

有任何想法吗 ？

**编辑：** 在全新的 Windows 7 系统上重新安装了 VS2012（在 Mac OSX 并行 8 上运行）并且仍然以相同的方式运行。MVC 3 项目似乎也一样。

![在此处输入图像描述](https://i.stack.imgur.com/m1KWO.png)

安装的扩展： ![在此处输入图像描述](https://i.stack.imgur.com/FkalT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T22:04:14.123

尝试为 Visual Studio 2012 添加 Web Essentials 2012 扩展：http: //visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6?SRC= [VSIDE](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6?SRC=VSIDE)

和/或

尝试添加 Microsoft Web Developer Tools 扩展。

我有这两个，并且使用你的同一个例子，智能感知就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T05:42:28.210

我尝试了所有上述补救措施和建议。这些都不适用于我的环境。根据微软的说法（在 Microsoft connect 的错误 id 781048 下），他们尚未为 MVC/Razor 文件实现 CSS 类智能感知，但正在努力将其包含在未来的版本中。

我有一个 10 分钟的扩展 VS2012 智能感知的网络广播示例，它添加了一种解决方案，可以将智能感知添加到您的 VS2012 环境：[Visual Studio Intellisense 扩展](http://1drv.ms/1iQhoTW)

网络广播使用 MEF 扩展 Visual Studio 以添加智能感知完成源，该源扫描当前加载的项目以查找 CSS 类名称以添加为智能感知完成集。这是css完成源类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.Composition;
using Microsoft.VisualStudio.Language.Intellisense;
using Microsoft.VisualStudio.Text;
using Microsoft.VisualStudio.Text.Operations;
using Microsoft.VisualStudio.Utilities;
using EnvDTE;
using System.Text.RegularExpressions;
using System.Configuration;
using System.Collections.Specialized;

namespace CssClassIntellisense
{
   internal class cssClassList
   {
      public string cssFileName { get; set; } //Intellisense Statement Completion Tab Name

      public HashSet<string> cssClasses { get; set; }
   }

   internal class CssClassCompletionSource : ICompletionSource
   {
    private CssClassCompletionSourceProvider m_sourceProvider;
    private ITextBuffer m_textBuffer;
    private List<Completion> m_compList;
    private Project m_proj;
    private string m_pattern = @"(?<=\.)[A-Za-z0-9_-]+(?=\ {|{|,|\ )";
    private bool m_isDisposed;

    //constructor
    public CssClassCompletionSource(CssClassCompletionSourceProvider sourceProvider, ITextBuffer textBuffer, Project proj)
    {
        m_sourceProvider = sourceProvider;
        m_textBuffer = textBuffer;
        m_proj = proj;
    }

    public void AugmentCompletionSession(ICompletionSession session, IList<CompletionSet> completionSets)
    {

        ITextSnapshot snapshot = session.TextView.TextSnapshot;
        SnapshotPoint currentPoint = (SnapshotPoint)session.GetTriggerPoint(snapshot);

        if (TargetAttribute.Inside(currentPoint))
        {
            var hash = new List<cssClassList>();
            //read any .css project file to get a distinct list of class names
            if (m_proj != null)
                foreach (ProjectItem _item in m_proj.ProjectItems)
                {
                    getCssFiles(_item, hash);
                }

            //Scan Current Editor's text buffer for any inline css class names 
            cssClassList cssclasslist = ScanTextForCssClassName(
                    "Inline", snapshot.GetText());

            //If file had any css class names add to hash of files with css class names
            if (cssclasslist != null)
                hash.Add(cssclasslist);

            var _tokenSpanAtPosition = FindTokenSpanAtPosition(session.GetTriggerPoint(m_textBuffer), session);

            foreach (cssClassList _cssClassList in hash)
            {
                m_compList = new List<Completion>();
                foreach (string str in _cssClassList.cssClasses.OrderBy(x => x))  //alphabetic sort
                    m_compList.Add(new Completion(str, str, str, null, null));

                completionSets.Add(new CompletionSet(
                    _cssClassList.cssFileName,    //the non-localized title of the tab 
                    _cssClassList.cssFileName,    //the display title of the tab
                    _tokenSpanAtPosition,
                    m_compList,
                    null));

            }
        }
    }

    private ITrackingSpan FindTokenSpanAtPosition(ITrackingPoint point, ICompletionSession session)
    {
        SnapshotPoint currentPoint = (session.TextView.Caret.Position.BufferPosition) - 1;
        ITextStructureNavigator navigator = m_sourceProvider.NavigatorService.GetTextStructureNavigator(m_textBuffer);
        TextExtent extent = navigator.GetExtentOfWord(currentPoint);
        return currentPoint.Snapshot.CreateTrackingSpan(extent.Span, SpanTrackingMode.EdgeInclusive);
    }

    private void getCssFiles(ProjectItem proj, List<cssClassList> hash)
    {
        foreach (ProjectItem _item in proj.ProjectItems)
        {
            if (_item.Name.EndsWith(".css") &&
                !_item.Name.EndsWith(".min.css"))
            {
                //Scan File's text contents for css class names
                cssClassList cssclasslist = ScanTextForCssClassName(
                    _item.Name.Substring(0, _item.Name.IndexOf(".")),
                    System.IO.File.ReadAllText(_item.get_FileNames(0))
                    );

                //If file had any css class names add to hash of files with css class names
                if (cssclasslist != null)
                    hash.Add(cssclasslist);
            }
            //recursively scan any subdirectory project files
            if (_item.ProjectItems.Count > 0)
                getCssFiles(_item, hash);
        }
    }

    private cssClassList ScanTextForCssClassName(string FileName, string TextToScan)
    {

        Regex rEx = new Regex(m_pattern);
        MatchCollection matches = rEx.Matches(TextToScan);
        cssClassList cssclasslist = null;

        if (matches.Count > 0)
        {
            //create css class file object to hold the list css class name that exists in this file
            cssclasslist = new cssClassList();
            cssclasslist.cssFileName = FileName;
            cssclasslist.cssClasses = new HashSet<string>();

        }

        foreach (Match match in matches)
        {
            //creat a unique list of css class names
            if (!cssclasslist.cssClasses.Contains(match.Value))
                cssclasslist.cssClasses.Add(match.Value);
        }

        return cssclasslist;
    }

    public void Dispose()
    {
        if (!m_isDisposed)
        {
            GC.SuppressFinalize(this);
            m_isDisposed = true;
        }
    }
} 
```

}

作为仅供参考，您还可以使用 Resharper 解决此问题。但这是需要为 Visual Studio 购买的第 3 方产品

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T09:28:57.137

只是 CSS 智能感知失败还是在整个 Visual Studio 中完全停止？

我有一个类似的问题，影响了我的整个 Visual Studio 2012。这是一段时间前，但我记得从我的 appdata 中删除了一个文件夹。看看这个链接，希望它会有所帮助： [http ://www.haneycodes.net/visual-studio-2012-intellisense-not-working-solved/](http://www.haneycodes.net/visual-studio-2012-intellisense-not-working-solved/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-11T14:43:25.903

你不会在 VS2012 中为 Razor 视图获得 CSS 智能感知。有一种使用智能感知的解决方法。只需使用 ASPX 视图引擎创建一个测试视图 (.aspx) 并在其中包含您的 css 文件。现在智能感知将在新的 aspx 视图中工作。您所要做的就是将 css 类从 aspx 复制粘贴到 Razor 视图（.cshtml 或 .vbhtml）。我希望这有帮助。

# c - 在 c 中查找 gcd 的欧几里得程序

> ID：15987479
> 
> 赞同：-1
> 
> 时间：2013-04-13T11:50:19.210
> 
> 标签：c, security, number-theory

我想在 c 中执行欧几里得程序但得到不正确的答案。我准备了以下代码来查找 gcd

```
#include<stdio.h>
#include<conio.h>
int gcd(int r1,int r2)
{
int r;
r=r1%r2;
while(r>0)
{
return gcd(r2,r);
}
return r2;
}
void main()
{
int a,b,ans;
clrscr();
printf("enter value of a");
scanf("%d",&a);
printf("enter value of b");
scanf("%d",&b);
ans=gcd(a,b);
printf("%d",ans);
getch();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:53:19.830

```
int a;

...

scanf("%d",a); 
```

此函数调用是不正确的 C 代码。

# php - 在 student_ids 到 class_times 的映射中找到公共负空间的最佳方法

> ID：15987480
> 
> 赞同：7
> 
> 时间：2013-04-13T11:50:21.900
> 
> 标签：php

我正在为 PHP 中的调度应用程序编写概念证明。我有一个二维的学生日程数组，格式为`(str) class_time => (array) student_ids`，打印输出： http: [//d.pr/i/UKAy](http://d.pr/i/UKAy)。

在处理的这一点上，我需要确定哪`class_time`一个最适合举办一门新课程，比如有 10 名学生提出申请。为此，我想确定有多少学生`n class_times`可用，理想情况下存储为`class_time => student_ids => n_available_class_times`.

那么，构建/搜索这些数据的理想方法是什么？最终结果是所有的列表，`class_times`以及在安排每门新课程时学生可以利用给定课程的想法。这使我能够通过排序`available_class_times`找到他们的日程安排最受限制的学生，以及考虑到未来安排他们的难度，考虑到一些当前/潜在的限制，他们需要优先安排到给定的班级.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:48:08.590

以下内容会有所帮助。每个数组都`student_ids`需要排序。您可以使用快速排序在 nlog(n) 时间内完成此操作。然后，您将不得不开始计划。我认为像 AB 修剪这样的东西在这里会起作用，因为你在最后有一些最佳状态，并且在此过程中会影响你的最佳状态。（开始的排序位只是为了让它更快）

以下是关于 AB 修剪的一些内容：

首先，有一种称为 min-max 的决策算法，它指出“游戏”中的所有决策都会导致最终状态，即无限好或无限坏，即赢或输。因此，您构建这棵树的每个节点都代表一个“游戏状态”，在您的情况下是学生被安排的状态。然后你搜索树。将其横穿以获得最佳移动状态。在您的情况下，最佳调度。在每个节点，你决定它是否是一个结束状态，并在无限或负无限时调用它，或者你分支到其他节点。请注意，这不是二叉树。决策树节点有 n 个分支，其中 n 是您可以在那里做出的决策数。这对你的工作来说不是太好，但它需要解释才能理解 AB 修剪。

现在假设不只是询问一个节点是赢还是输，您可以衡量它的游戏状态有多好。在您的情况下，基于可以优化安排的学生人数。当您遍历巨大的决策树时，您可以剪掉很大的部分，因为您知道它们会导致蹩脚的“游戏状态”，即您想要轻松放置学生而不容易放置的状态。您这样做的方法是考虑导致游戏状态 B 的节点，您知道该节点比 A 最差（您之前评估的节点）。这很好，因为搜索这棵树是一项严肃的计算任务。这使您可以通过忽略巨大的部分来进行更深入的评估（这是非常棒的巨大计算增益）。这可以让您获得最佳课程表状态的答案。祝你好运，伙计。

```
// HERE IS SOME CODE FROM THE INTERNET
function alphabeta(node, depth, α, β, Player)         
if  depth = 0 or node is a terminal node
    return the heuristic value of node
if  Player = MaxPlayer
    for each child of node
        α := max(α, alphabeta(child, depth-1, α, β, not(Player) ))     
        if β ≤ α
            break                             (* Beta cut-off *)
    return α
else
    for each child of node
        β := min(β, alphabeta(child, depth-1, α, β, not(Player) ))     
        if β ≤ α
            break                             (* Alpha cut-off *)
    return β
(* Initial call *)
alphabeta(origin, depth, -infinity, +infinity, MaxPlayer) 
```

这是有关该主题的链接： [http ://en.wikipedia.org/wiki/Alpha%E2%80%93beta_pruning](http://en.wikipedia.org/wiki/Alpha%E2%80%93beta_pruning)

# jakarta-ee - Converter @FacesConverter(forClass=[someClass.class]) 可以实现为@Singleton @Lock(READ) 吗？

> ID：15987483
> 
> 赞同：0
> 
> 时间：2013-04-13T11:50:41.023
> 
> 标签：jakarta-ee, singleton, converter, openejb, apache-tomee

为了在我的应用程序中删除“静态”声明（以帮助 JVM 的 GC），我从下面的 Converter 类的定义中删除了“静态”。这导致了下面臭名昭著的错误：

```
Apr 13, 2013 4:10:38 AM org.apache.myfaces.application.ApplicationImpl internalCreateConverter
SEVERE: Could not instantiate converter jsf.CustomerController$CustomerControllerConverter
java.lang.InstantiationException: jsf.CustomerController$CustomerControllerConverter
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.apache.myfaces.application.ApplicationImpl.internalCreateConverter(ApplicationImpl.java:1626)
    at org.apache.myfaces.application.ApplicationImpl.createConverter(ApplicationImpl.java:1545)
    at javax.faces.application.ApplicationWrapper.createConverter(ApplicationWrapper.java:158) 
```

我认为“静态”是必要的，因为每个应用程序只创建一个类的副本。正确的？那么，我可以将类定义为 @Singleton @Lock(READ) 来解决问题吗？

根据 NetBeans 生成的 JSF 控制器/bean 代码，转换器通常定义在与控制器或 @ManagedBean 相同的 .java 文件中。老实说，我“不想”在 xhtml 中使用 addConverter() 或 converterId="..." 。我更喜欢使用@FacesConverter，因为这在整个应用程序中都对我有用。

```
package jsf;

import jpa.entities.Customer;
import jpa.session.CustomerFacade;

import java.io.Serializable;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;

@ManagedBean(name = "customerController")
@RequestScoped
public class CustomerController implements Serializable {

    @EJB
    private jpa.session.CustomerFacade ejbFacade;

    public CustomerController() {
    }

    @FacesConverter(forClass = Customer.class)
    public class CustomerControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            /*
             * 2012-07-10 when user enters invalid/incomplete value (e.g. "irene", see below) in AutoComplete
             *
            WARNING: For input string: "irene"
            java.lang.NumberFormatException: For input string: "irene"
                    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
                    at java.lang.Integer.parseInt(Integer.java:492)
                    at java.lang.Integer.valueOf(Integer.java:582)
                    at jsf.pointOfContact.pf_PointOfContactController$PointOfContactControllerConverter.getKey(pf_PointOfContactController.java:1625)
                    at jsf.pointOfContact.pf_PointOfContactController$PointOfContactControllerConverter.getAsObject(pf_PointOfContactController.java:1620)
                    at org.primefaces.component.autocomplete.AutoCompleteRenderer.getConvertedValue(AutoCompleteRenderer.java:529)
                    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
                    at javax.faces.component.UIInput.validate(UIInput.java:960)
             *
             */
            try {
                Integer test = getKey(value);
            } catch (java.lang.NumberFormatException e) {
                return null;
            }
            CustomerController controller = (CustomerController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "customerController");
            return controller.ejbFacade.find(getKey(value));
        }

        java.lang.Integer getKey(String value) {
            java.lang.Integer key;
            key = Integer.valueOf(value);
            return key;
        }

        String getStringKey(java.lang.Integer value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof Customer) {
                Customer o = (Customer) object;
                return getStringKey(o.getCustomerId());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + Customer.class.getName());
            }
        }
    }
} 
```

请指教。

另外，当有人在 stackoverflow.com 上回答我的问题时，请告诉我如何获取电子邮件通知。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:36:53.150

答案是肯定的，在 JNDI 查找的帮助下。

我刚刚从 JSF @RequestScoped CustomerController 中删除了 CustomerControllerConverter，创建了转换器类，用 @Singleton @Lock(READ) 标记它，并通过 JNDI 查找引用了 @Stateless EJB。见下文。

```
package converter;

import java.util.concurrent.TimeUnit;

import javax.ejb.AccessTimeout;
import javax.ejb.Lock;
import javax.ejb.LockType;
import javax.ejb.Singleton;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;

import javax.naming.InitialContext;

import jpa.entities.Customer;
import jpa.session.CustomerFacade;

/**
 *
 * @author Administrator
 */
@Singleton
@Lock(LockType.READ)
@AccessTimeout(value = 1, unit = TimeUnit.MINUTES)
@FacesConverter(forClass = Customer.class)
public class CustomerConverter implements Converter {

    public CustomerConverter() {

    }

    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        /*
         * 2012-07-10 when user enters invalid/incomplete value (e.g. "irene", see below) in AutoComplete
         *
        WARNING: For input string: "irene"
        java.lang.NumberFormatException: For input string: "irene"
                at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
                at java.lang.Integer.parseInt(Integer.java:492)
                at java.lang.Integer.valueOf(Integer.java:582)
                ...
                ...
                at org.primefaces.component.autocomplete.AutoCompleteRenderer.getConvertedValue(AutoCompleteRenderer.java:529)
                at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
                at javax.faces.component.UIInput.validate(UIInput.java:960)
         *
         */
        try {
            Integer test = getKey(value);
        } catch (java.lang.NumberFormatException e) {
            return null;
        }
        Object object = null;
        CustomerFacade ejbFacade;
        try {
            InitialContext ic = new InitialContext();
            ejbFacade = (CustomerFacade) ic.lookup("java:global/appWARFileNameOrAppContextName/CustomerFacade");
            if (ejbFacade == null) {
                System.err.println("CustomerConverter.getAsObject(): ejbFacade = null)");
                return null;
            }
        } catch (Exception e) {
            System.err.println("CustomerConverter.getAsObject(): error on JNDI lookup of CustomerFacade");
            e.printStackTrace();
            return null;
        }
        try {
            object = ejbFacade.find(getKey(value));
        } catch (Exception e) {
            System.err.println("CustomerConverter.getAsObject(): error on ejbFacade.find(getKey(value))");
            e.printStackTrace();
            return null;
        }
        return object;
    }

    java.lang.Integer getKey(String value) {
        java.lang.Integer key;
        key = Integer.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Integer value) {
        StringBuffer sb = new StringBuffer();
        sb.append(value);
        return sb.toString();
    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof Customer) {
            Customer o = (Customer) object;
            return getStringKey(o.getCustomerId());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + Customer.class.getName());
        }
    }
} 
```

经验教训：无法通过以下方式引用或实例化 ejbFacade：

@Inject、@EJB、BeanManager

参考：

甲骨文博客

1.  [Ken Saks 的博客：应用程序指定的可移植 JNDI 名称](https://blogs.oracle.com/kensaks/entry/application_specified_portable_jndi_names)
2.  [Ken Saks 的博客：可移植的全球 JNDI 名称](https://blogs.oracle.com/kensaks/entry/portable_global_jndi_names)

TomEE JavaEE 示例 - 引用 EJB

1.  [注入Ejbs](http://tomee.apache.org/examples-trunk/injection-of-ejbs/README.html)
2.  [使用描述符查找 Ejb](http://tomee.apache.org/examples-trunk/lookup-of-ejbs-with-descriptor/README.html)
3.  [Ejb的查找](http://tomee.apache.org/examples-trunk/lookup-of-ejbs/README.html)

最终，我不得不参考 Glassfish 的 server.log 文件，即参考实现 (RI)，以查看我的 @Stateless EJB 的 JNDI 查找路径示例，因为我过去使用过 Glassfish。:)

**更新：**

您还可以在 TomEE/catalina 日志中找到可移植的全局 JNDI 名称。如下所示。

```
Apr 13, 2013 10:00:58 AM org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=CustomerFacadeLocalBean) --> Ejb(deployment-id=CustomerFacade)

Apr 13, 2013 10:00:58 AM org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/webApp/CustomerFacade!jpa.session.CustomerFacade) --> Ejb(deployment-id=CustomerFacade)

Apr 13, 2013 10:00:58 AM org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/webApp/CustomerFacade) --> Ejb(deployment-id=CustomerFacade) 
```

其中全局 JNDI 名称中的 'webApp' 可能是您的 WAR 文件名的名称，也可能是 EJB JAR 文件名等...

希望这对其他人有帮助！

# inheritance - 骨干视图继承-调用父级导致递归

> ID：15987490
> 
> 赞同：7
> 
> 时间：2013-04-13T11:51:40.150
> 
> 标签：inheritance, backbone.js, backbone-views

我有一个三个 Backbone View 类继承：

```
var preventRecursion = 0;

var parentView = Backbone.View.extend({

  initialize: function(){
    console.log('parentView');
  }
});

var nestedChildView = parentView.extend({

  initialize: function(){

    if (++preventRecursion == 5) {throw "Recursion"};

    console.log('nestedChildView');
    this.constructor.__super__.initialize.apply(this);          
  }
});

var nestedNestedChildView = nestedChildView.extend({

  initialize: function(){
    console.log('nestedNestedChildView');
    this.constructor.__super__.initialize.apply(this);          
  }
}); 
```

当我尝试创建nestedNestedChildView 时：

```
var t = new nestedNestedChildView(); 
```

我得到无限递归：这里是[jsfiddle](http://jsfiddle.net/n5mWP/2/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-13T12:57:24.807

如[Model.extend](http://backbonejs.org/#Model-extend)文档中所述，

> 关于 super 的简要说明：JavaScript 没有提供调用 super 的简单方法——在原型链上定义的同名函数。如果你重写了一个像 set 或 save 这样的核心函数，并且你想调用父对象的实现，你必须显式地调用它，如下所示：

在你的类层次结构中，`this.constructor`总是等于的构造函数`nestedNestedChildView`，这意味着`this.constructor.__super__.initialize`将是`nestedChildView.initialize`一个循环。请参阅[http://jsfiddle.net/X5yBb/](http://jsfiddle.net/X5yBb/)进行测试。

您可以显式调用类 __super__ ( [http://jsfiddle.net/X5yBb/1/](http://jsfiddle.net/X5yBb/1/) )

```
var nestedChildView = parentView.extend({
  initialize: function(){
    console.log('nestedChildView');
    nestedChildView.__super__.initialize.apply(this);          
  }
});

var nestedNestedChildView = nestedChildView.extend({
  initialize: function(){
    console.log('nestedNestedChildView');
    nestedNestedChildView.__super__.initialize.apply(this);          
  }
}); 
```

或者如果您愿意，也可以调用原型链上的方法（[http://jsfiddle.net/X5yBb/2/](http://jsfiddle.net/X5yBb/2/)）：

```
var nestedChildView = parentView.extend({
  initialize: function(){
    console.log('nestedChildView');
    parentView.prototype.initialize.apply(this);          
  }
});

var nestedNestedChildView = nestedChildView.extend({
  initialize: function(){
    console.log('nestedNestedChildView');
    nestedChildView.prototype.initialize.apply(this);          
  }
}); 
```

有关该主题的更多信息，请参阅[Accessing parent class in Backbone](https://stackoverflow.com/questions/8970606/accessing-parent-class-in-backbone)和[Super in Backbone](https://stackoverflow.com/questions/8596861/super-in-backbone)。

# c# - .NET 中的 CoCreateInstance 完全匹配？

> ID：15987491
> 
> 赞同：4
> 
> 时间：2013-04-13T11:51:51.917
> 
> 标签：c#, .net, windows, com, interop

我有进程内（DLL）COM 服务器，但我决定以 DllSurrogate 的身份运行，因此来自非托管代码（Delphi）我有：

```
function TComWrapper.GetServer: IUnknown;
begin
  OleCheck(CoCreateInstance(ServerData^.ClassId, nil, CLSCTX_LOCAL_SERVER, IUnknown, Result));
end; 
```

来自 C# 我现在正在使用：

```
[DllImport("ole32.dll", EntryPoint = "CoCreateInstance", CallingConvention = CallingConvention.StdCall)]
static extern UInt32 CoCreateInstance([In, MarshalAs(UnmanagedType.LPStruct)] Guid rclsid,
   IntPtr pUnkOuter, UInt32 dwClsContext, [In, MarshalAs(UnmanagedType.LPStruct)] Guid riid,
   [MarshalAs(UnmanagedType.IUnknown)] out object rReturnedComObject); 
```

...

```
 UInt32 dwRes = CoCreateInstance(ClassIdGuid,
                                            IntPtr.Zero,
                                            (uint)(CLSCTX.CLSCTX_LOCAL_SERVER), //if OR with CLSCTX_INPROC_SERVER then INPROC Server will be created, because of DLL COM Server
                                            IUnknownGuid,
                                            out instance); 
```

上面的代码是不安全的。它是否存在上述安全版本`CoCreateInstance`？似乎这`Activator.CreateInstance`对我没有帮助。我必须明确设置运行上下文（第三个参数）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T15:11:02.403

你也可以这样做：

```
[ComImport]
[Guid(YourGuidGoesHere)]
private class MyClass
{
} 
```

并像这样创建 COM 对象的实例：

```
 IYourInterface myClass = (IYourInterface)(new MyClass()); 
```

不使用 p/invoke。

# c# - 通过 RowUpdating 在数据表中设置值

> ID：15987492
> 
> 赞同：-4
> 
> 时间：2013-04-13T11:51:52.280
> 
> 标签：c#, asp.net, .net

```
 protected void gd_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            TextBox txtAuthor;
            TextBox txtBook;
            dt = new DataTable();
            dt=(DataTable)ViewState["dt"];
            GridViewRow gdr = gd.Rows[e.RowIndex];
            if (gdr != null)
            {
                txtAuthor = (TextBox)gd.Rows[e.RowIndex].FindControl("txtAuthor1");
                txtBook = (TextBox)gd.Rows[e.RowIndex].FindControl("txtBook1");
                dt = (DataTable)ViewState["dt"];
                string txtAuthorName;
                string txtBookName;

            if (txtAuthor != null && txtBook!=null)
            {
                txtAuthorName = txtAuthor.Text;
                txtBookName = txtBook.Text;

                int i=0;
                dt = (DataTable)Session["dt"];
                for (; i < gd.Rows.Count; i++)
                {
                    if (e.RowIndex == i)
                    {
                        dt.Rows[i][0] = txtAuthor.Text;
                        dt.Rows[i][1] = txtBook.Text;
                        ViewState["dt"] = dt;
                        gd.DataSource = dt;
                        gd.DataBind();
                    }
                }
            }

        }

        dt = (DataTable)ViewState["dt"];
        gd.DataSource = dt;
        gd.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:59:05.253

该错误可能是因为试图访问一行不存在的数据表。要将值分配给`datatable`行，您必须检查是否有该行，`datatable`您正在检查行`grid`而不是`datatable`您不需要循环，因为您可以直接访问`datatable`具有索引的行，只需检查是否`e.RowIndex`是有效的行索引`datatable`。

```
if (e.RowIndex <= dt.Rows.Count)
{
    dt.Rows[e.RowIndex][0] = txtAuthor.Text;
    dt.Rows[e.RowIndex][1] = txtBook.Text;
    ViewState["dt"] = dt;
    gd.DataSource = dt;
    gd.DataBind();
} 
```

# ios - 如何防止ipa文件/iphone应用被破解到源码？

> ID：15987495
> 
> 赞同：1
> 
> 时间：2013-04-13T11:52:40.073
> 
> 标签：ios, iphone, security, reverse-engineering

来自 stackexchange 问题之一，它证明我们可以将 iphone 应用程序反编译为其源代码，现在问题来了，我们如何保护 ipa 文件/iphone 应用程序不被破解到其源代码？我已经在这里验证了这个 [答案](https://reverseengineering.stackexchange.com/questions/1594/possibilities-for-reverse-engineering-an-ipa-file-to-its-source)[1](https://stackoverflow.com/questions/846309/reducing-piracy-of-iphone-applications) [方法 2](https://stackoverflow.com/questions/5341408/how-to-encrypt-application-from-being-cracked-iphone?rq=1) 但可悲的是它无法保护代码，任何更新以防止应用程序到源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:59:04.703

你真的不能。

设备上的 iOS 运行时需要能够解释二进制文件，因此二进制文件必须存在，未加密并准备好运行。

您可以通过一个打乱方法名称、属性名称等的工具运行它来混淆它。.NET 和 Java 有执行此操作的工具，但我不知道任何用于 Objective-C 的工具，所以我认为您是靠自己的。

（您链接到的工具，如anticrack，将在短时间内工作，直到有人想出一种方法来扭转anticrack 所做的事情 - 但因为您的应用程序最终必须以运行时准备运行的格式存在，所有你能做的就是让它变得更难。这就像古老的海盗军备竞赛与桌面应用程序中的保护机制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T15:14:06.057

这已经被讨论了很多。一般来说，你花时间改进或推广你的应用程序会赚更多的钱，然后花时间试图防止它以任何方式被破解。

# c# - 自动转义字符串中的字符

> ID：15987496
> 
> 赞同：0
> 
> 时间：2013-04-13T11:52:50.997
> 
> 标签：c#, string, escaping

我正在开发一个 C# 项目，我正在从用户定义的数据库中导出数据，所以我不知道数据将包含什么或它将采用的格式。

数据库中的某些字符串可能包含撇号 (')，我需要转义，但我在互联网上找到的所有内容都表明我必须执行 string.replace("'", "\'"); 这似乎有点奇怪，因为这将是每种可能性的大量替换语句。

没有更好的方法来做到这一点。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:40:20.333

我最近不得不对同样的问题进行代码修复。我不得不在各处放置大量的 string.replace() 语句。我的建议是创建一个处理所有转义字符可能性的方法，并让您的查询字符串在执行之前通过此方法。如果你正确地设计了你的结构，你应该只需要调用一次这个方法。

```
 public string FixEscapeCharacterSequence(string query)
    {
        query = query.Replace("'", "\'");
        //..Any other replace statements you need
        //....

        return query;
    } 
```

# svg - 斯坦福解析器输出到 SVG

> ID：15987497
> 
> 赞同：0
> 
> 时间：2013-04-13T11:52:57.250
> 
> 标签：svg, stanford-nlp

我正在使用[斯坦福解析器](http://nlp.stanford.edu/software/lex-parser.shtml)。使用提供的 GUI 工具，它会从句子中输出 grafic 树 -[就像这样](http://screencast.com/t/3xqeJIQSxA)，但是在保存输出时，它只会给出这样的括号格式`(ROOT (NP (NP (DT The) (NN capability))...`。是否可以使用命令行获得相同的输出（SVG）？如果没有，也许还有其他工具可以做到这一点？也许先获取 DOT 文件，最后使用 Graphviz 获取 SVG！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:29:48.083

最后，我编写了自己的脚本来获取 DOT 格式，并进一步将其与 Graphviz 一起使用以获取 SVG 输出。

```
public static void main(String[] args)
        {
            Properties props = new Properties();
            props.put("annotators", "tokenize, ssplit, pos, lemma, ner, parse, dcoref");
            StanfordCoreNLP pipeline = new StanfordCoreNLP(props);

            Annotation document = new Annotation(args[0]);

            pipeline.annotate(document);

            List<CoreMap> sentences = document.get(CoreAnnotations.SentencesAnnotation.class);

            for (CoreMap sentence : sentences) {
                SemanticGraph dependencies = sentence.get(SemanticGraphCoreAnnotations.CollapsedCCProcessedDependenciesAnnotation.class);
                System.out.println(dependencies.toDotFormat());
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T09:36:39.020

您可能想尝试 d3.js。这是一个树的例子：http: [//mbostock.github.io/d3/talk/20111018/tree.html](http://mbostock.github.io/d3/talk/20111018/tree.html)。其他示例在这里：[https](https://github.com/mbostock/d3/wiki/Gallery) ://github.com/mbostock/d3/wiki/Gallery 。如果您想从命令行使用 d3 进行渲染，请尝试与 PhantomJS ( [http://phantomjs.org/](http://phantomjs.org/) ) 结合使用。PhantomJS 还允许您以 PNG 或 SVG 格式打印结果。这就是我作为网络人的处理方式。这样做的一个优点是您将能够在浏览器中运行它，并且将来可能会添加一些交互性。当然取决于你的应用...

# python - 带有 Python 的 TCP 服务器：如何优化我的实现？

> ID：15987505
> 
> 赞同：1
> 
> 时间：2013-04-13T11:54:26.173
> 
> 标签：python, tcp, network-programming, ethernet

我想使用 Python 脚本实现 TCP 服务器。

服务器基本上应该完成以下任务：

它将由远程客户端循环轮询，然后读取其本地工作站上的某些数据并将其发送到客户端轮询。

可以假设如下：

*   始终只有一个客户端连接到服务器（通过以太网）
*   客户端和服务器运行在 Windows 平台上
*   Python 2.5.1 将用于实现

目标：

*   服务器应该尽可能高效地从/向客户端读取/写入数据
*   服务器应尽可能减少本地工作站的压力
*   服务器不得造成系统不稳定

由于我对该主题只有一点经验，因此我想在这里讨论如何优化我当前的（非常简单的）代码以满足前面提到的要求。

到目前为止，我有以下内容：

```
import socket
import sys

port_number = 12345
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

server_address = (socket.gethostname(), port_number)
sock.bind(server_address)

sock.listen(1)
while True:
    connection, client_address = sock.accept()
    try:
        while True:
            data = connection.recv(4096)
            if data:
                connection.sendall(getdesireddata(data))
            else:
                break
    finally:
        connection.close() 
```

感谢您的所有回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:46:37.490

首先，代码中存在小错误。线...

```
data = connection.recv(4096) 
```

...将尝试从单个 TCP 数据包中读取多达 4k 的数据，但如果客户端发送的数据超过 4k，或者决定将数据分成几个数据包，您可能无法在一次调用中获得所有数据。

您通常会继续从套接字读取数据，附加到缓冲区，直到您拥有协议规范定义的完整消息，或者直到远程主机关闭其 TCP 连接的出站一半。

如果客户端崩溃并且没有正确关闭套接字，您还会遇到服务器卡住的问题。为避免这种情况，您需要查看任一非阻塞 IO，类似于...

```
connection.setblocking(0)
buffer = ''
while 1:        
    try:
        data = connection.recv(4096)
        if not data:
            # Client has closed outbound connection
            break
        else:
            # Append to buffer
            buffer += data
    except socket.error, e:
        code = e.args[0]
        if code == 11:
            # Got EWOULDBLOCK/EAGAIN
            time.sleep(0.1)
        else:
            # Got another error
            raise
do_something_with(buffer) 
```

...或者看看使用 Python[选择](http://docs.python.org/2/library/select.html)模块来做同样的事情。

关于性能的次要问题，我看不出你可以用这么小的代码示例做出任何重大改进。

# python - Github：当 Travis 构建因拉取请求而失败时，这意味着什么？

> ID：15987511
> 
> 赞同：0
> 
> 时间：2013-04-13T11:55:16.370
> 
> 标签：python, git, github

我分叉了一个现有的存储库，然后克隆了它。然后我对代码进行了更改，然后将更改推送到我的分叉存储库。然后我创建了一个对基础仓库的拉取请求。

Travis 构建完成后，我看到它失败了。它本质上是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:33:48.360

看起来有些测试失败了，例如：

```
1) MtGox::Client#buy! should place a bid
     Failure/Error: buy = @client.buy!(0.88, 0.89)
     WebMock::NetConnectNotAllowedError:
       Real HTTP connections are disabled. Unregistered request: POST https://data.mtgox.com/api/0/buyBTC.php with body 'amount=0.88&price=0.89&nonce=1321745961249676' with headers {'Accept'=>'*/*', 'Content-Type'=>'application/x-www-form-urlencoded', 'Rest-Key'=>'key', 'Rest-Sign'=>'ixxn/IrNcHJVB6ztBisOVfUSfm3PUVK3n/YAb2lACdFRrQWFFFMDBTbwIBu8aELgBmgL8j3qqIpY99ozh9FjcA==', 'User-Agent'=>'Ruby'}

       You can stub this request with the following snippet:

       stub_request(:post, "https://data.mtgox.com/api/0/buyBTC.php").
         with(:body => {"amount"=>"0.88", "nonce"=>"1321745961249676", "price"=>"0.89"},
              :headers => {'Accept'=>'*/*', 'Content-Type'=>'application/x-www-form-urlencoded', 'Rest-Key'=>'key', 'Rest-Sign'=>'ixxn/IrNcHJVB6ztBisOVfUSfm3PUVK3n/YAb2lACdFRrQWFFFMDBTbwIBu8aELgBmgL8j3qqIpY99ozh9FjcA==', 'User-Agent'=>'Ruby'}).
         to_return(:status => 200, :body => "", :headers => {})

       registered request stubs:

       stub_request(:post, "https://mtgox.com/api/0/buyBTC.php").
         with(:body => "amount=0.88&price=0.89&nonce=1321745961249676",
              :headers => {'Rest-Key'=>'key', 'Rest-Sign'=>'ixxn/IrNcHJVB6ztBisOVfUSfm3PUVK3n/YAb2lACdFRrQWFFFMDBTbwIBu8aELgBmgL8j3qqIpY99ozh9FjcA=='})

       ============================================================
     # ./lib/mtgox/request.rb:16:in `request'
     # ./lib/mtgox/request.rb:10:in `post'
     # ./lib/mtgox/client.rb:178:in `buy!'
     # ./spec/mtgox/client_spec.rb:211:in `block (3 levels) in <top (required)>' 
```

当您在 github 上提交拉取请求时，如果您配置了 travis，则 travis 将为该特定版本的工作树开始构建。如果 travis 配置为运行一些测试并指示失败（恰好在您的情况下），则表明 Travis 构建失败。

理想情况下，您需要修复您为拉取请求提交的分支中的这些错误，并在上游作者批准您的拉取请求之前让 travis 构建成功。

# wpf - WPF：使用 WPF 扩展中的 PropertyGrid

> ID：15987512
> 
> 赞同：2
> 
> 时间：2013-04-13T11:55:19.960
> 
> 标签：wpf, dll, namespaces, propertygrid

我是 WPF（.NET 4.0，VS2010）的新手，并尝试包含一个属性网格。我的 XAML 标记如下所示：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfToolkit="clr-namespace:Xceed.Wpf.Toolkit.PropertyGrid;assembly=WPFToolkit.Extended"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <WpfToolkit:PropertyGrid Name="Grid" />
    </Grid>
</Window> 
```

现在我得到了没有找到程序集“WPFToolkit.Extended”的错误。我在我的应用程序中包含了对 dll Xceed.Wpf.Toolkit.dll 的引用。

为什么它不起作用？我是否需要包含更多参考资料或可能是什么错误？感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:26:10.477

我可以解决问题。我的错是我没有解封包含 dll 的 zip 文件。在此之后，我必须将标记中命名空间的源更改为 uri。在最终标记下方：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfToolkit="http://schemas.xceed.com/wpf/xaml/toolkit"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <WpfToolkit:PropertyGrid Name="Grid" />
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:30:17.363

检查您的项目属性。应用下，目标框架下选择什么？默认情况下，新项目会选择“.Net Framework 4 Client Profile”。如果扩展库使用超出客户端配置文件的 .net 部分，则需要选择“.Net Framekwork 4”来使用扩展功能。

# ruby-on-rails-3 - 带有月份和年份菜单栏的 Jquery-ui 日期选择器

> ID：15987521
> 
> 赞同：0
> 
> 时间：2013-04-13T11:56:35.940
> 
> 标签：ruby-on-rails-3, jquery-ui, datepicker, jquery-ui-datepicker

我有一个 Rails 应用程序，我想在其中选择出生日期。我想为此使用 jquery-ui datepicker，但不知道如何在我的 rails 应用程序中实现它。

这是我想要的月份和年份菜单选项的屏幕截图，以便更轻松地选择生日。

[http://cl.ly/image/46152b372N1b](http://cl.ly/image/46152b372N1b)

至于在我的 application.js 文件中以及在我的视图中进行设置，我真的不确定从哪里开始。

现在我的视图/表单看起来像这样

```
 <%= f.text_field :patient_dob, :id => 'datepicker' %> 
```

这是我的 application.js

```
$(function() {
  $( "#datepicker" ).datepicker({
    changeMonth: true,
    changeYear: true
  });
}); 
```

同样，我希望它是一个带有月份和年份选项的 jquery-ui 日期选择器，以便更轻松地选择生日。

如果有人可以给我一些代码来开始，我将不胜感激。现在，当我单击文本字段时，什么也没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:36:02.633

*   确保在 head html 标记中包含*jquery.js*、*jquery-ui.js*、*jquery-ui.css 。*

*   jQuery 和 jQuery-ui javascript 文件应该只声明**一次**。您可以通过右键单击您的网页（例如在 chrome 中）并选择*查看源代码*来检查这一点。此外，在源代码上单击 jquery.js、jquery-ui.js、jquery-ui.css 和 application.js 链接并确保您的代码在其中（如果您没有找到预期的代码，请检查您的路径）。

*   application.js 文件应该在jquery 和 jquery-ui**之后声明。**

所以你的 <head> 应该是这样的：

```
<head>
  <meta [your code]>
  <title>[your code]</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <%= javascript_include_tag "application.js" %>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:07:16.737

经过一番搜索和试验，这段代码对我有用。看来我之前使用的不是对象，或者我把它关错了。

```
$(function(){
  $('#datepicker').datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: '1900:2013'      
  });
  $('#datepicker').datepicker('option', 'dateFormat', 'yy-mm-dd');
}); 
```

# c# - 使用 EF5 从数据库加载数据并使用 foreach 循环的性能问题

> ID：15987528
> 
> 赞同：0
> 
> 时间：2013-04-13T11:57:20.370
> 
> 标签：c#, performance, entity-framework, foreach

我正在构建一个统计（多代理）应用程序，我正在使用 EF5 从代理表中检索代理列表。需要一次加载大量数据（每个地区大约 50 000 个代理）才能对它们进行一些移民逻辑。我发现 (Region).Agents 导航属性的加载速度非常慢，但是在 Sql 服务器上执行相同的查询只需 1 秒。并且 foreach 也需要相当长的时间循环。

```
foreach (OrigineAgent origineAgent in new List<Agent> Origine.Agents.AsParallel()))
{
    origineAgent.ScoreCalculator = _container.Resolve<IScoreCalculator>();
    origineAgent.AgentExoVariables = AgentVars;
    _migrationManager.Migrate(origineAgent);
} 
```

我必须做些什么来提高数据加载和循环性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:04:13.140

那个怎么样：

```
var resolved = _container.Resolve<IScoreCalculator>();
foreach (OrigineAgent origineAgent in Origine.Agents.ToList().AsParallel())
{
    origineAgent.ScoreCalculator = resolved
    origineAgent.AgentExoVariables = AgentVars;
    _migrationManager.Migrate(origineAgent);
} 
```

我已经`_container.Resolve<IScoreCalculator>();`在循环之前移动并修复了您的`foreach`循环源，因为您的问题中的那个甚至没有编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:28:20.683

基于上面 MarcinJuraszek 的帖子，以下如何：

```
List<Task> tasks = new List<Task>();
var resolved = _container.Resolve<IScoreCalculator>();
foreach (OrigineAgent origineAgent in Origine.Agents.ToList().AsParallel())
{
    origineAgent.ScoreCalculator = resolved
    origineAgent.AgentExoVariables = AgentVars;
    Task t = Task.Factory.StartNew((arg) => { _migrationManager.Migrate((OrigineAgent)arg); }, origineAgent);
    tasks.Add(t);
}
Task.WaitAll(tasks.ToArray()); 
```

它并行调用`_migrationManager.Migrate(origineAgent);`

# ruby-on-rails - Thinking Sphinx：索引翻译属性

> ID：15987529
> 
> 赞同：0
> 
> 时间：2013-04-13T11:57:20.337
> 
> 标签：ruby-on-rails, thinking-sphinx

我有一个带有 Globalize3 名称翻译的好模型，所以：good.name(:en) return en good name。good.name(:ru) 返回 rus 好名字。我需要按字母顺序对 Good 进行排序，取决于当前语言，所以（我想是的）我需要做

```
index ... as :en_name
index ... as :ru_name 
```

然后搜索 (order : "en_name asc" ) 例如。

我有：

```
good.translations
=> [#<Good::Translation id: 5, good_id: 3, locale: "**ru**", name: "**Аурелия** ", description: "\"Lorem ipsum dolor sit amet, consectetur adipisicin...", created_at: "2012-12-24 13:43:37", updated_at: "2012-12-24 13:43:37">,
 #<Good::Translation id: 6, good_id: 3, locale: **"en"**, name: "**Aurelia**", description: "\"Lorem ipsum dolor sit amet, consectetur adipisicin...", created_at: "2012-12-24 13:43:37", updated_at: "2012-12-24 13:43:37">] 
```

并且需要对每个商品做索引 en_name 和 ru_name。像这样的东西：

```
indexes "translations(:name) where locale='en'", :as => :en_name, sortable: :insensitive 
```

但它不起作用。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:12:17.843

`WHERE`子句不应该是字段或属性定义的一部分——因为它们在`SELECT`底层 SQL 查询的子句中。

`WHERE`但是，您可以在索引定义中轻松地指定自己的条件：

```
indexes translations.name
# other fields and attributes

where "translations.locale = 'en'" 
```

# objective-c - NSWindowController 无法第二次打开 NSWindow

> ID：15987530
> 
> 赞同：0
> 
> 时间：2013-04-13T11:57:31.623
> 
> 标签：objective-c, nswindowcontroller

我有一个 NSWindowController 子类，BBPreferencesWindowController

```
@implementation BBPreferencesWindowController

- (NSString *)windowNibName
{
    return @"PreferencesWindow";
}

... 
```

我的 AppDelegate 中的一个函数可以通过这个控制器打开“PreferencesWindow.xib”中的窗口。

这个函数是从一个 NSMenuItem 调用的，它附加到系统菜单栏中 NSStatusItem 项下的 NSMenu。

```
@property (strong) BBPreferencesWindowController *preferencesWindow;

...

- (void)openPreferences
{
    if (self.preferencesWindow == nil)
    {
        self.preferencesWindow = [[BBPreferencesWindowController alloc] init];
    }

    [self.preferencesWindow showWindow:self];
    NSLog(@"%@", self.preferencesWindow.window.isVisible ? @"YES" : @"NO");
} 
```

第一次单击 NSMenuItem 时窗口显示良好（尽管 NSLog 行记录“NO”），但是当我关闭窗口然后尝试通过再次单击 NSMenuItem 重新打开它时，窗口赢了不开。

我错过了什么？

谢谢！

**编辑：** `BBPreferencesWindowController`没有自定义的 init 方法。它确实有一个自定义`awakeFromNib`（第一次被调用）

```
- (void)awakeFromNib
{
    [super awakeFromNib];
    NSLog(@"Loaded!");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:26:23.023

`BBPreferencesWindowController`我找到了我没有很好地管理窗口的原因：在 XIB 中，文件的所有者`window`插座没有正确链接。

解决这个问题也解决了所有其他问题。

谢谢你的帮助！

# jquery - jquery 字段名与 jquery 对话框冲突

> ID：15987536
> 
> 赞同：0
> 
> 时间：2013-04-13T11:58:06.873
> 
> 标签：jquery, jsp, jquery-dialog

我正在创建单独的 jsp 文件以显示在 jquery 对话框中。如果我有一个 jsp 页面“parent.jsp”。'parent.jsp' 有两个用于 jquery 对话框的子页面。“child1.jsp”和“child2.jsp”。

如果 child1.jsp 和 child2.jsp 在那些子页面内的任何或任何 DOM obj 中都有一个具有相同 id 的元素。然后是命名冲突。单击 child1.jsp 上的按钮会影响 child2.jsp。因此，为了使事情正常进行，我为子页面分配了唯一的 ID。有没有办法解决这个问题？

我可以提供唯一的 ID，但是，我将在几个页面中重新使用我的 child.jsp。可能有一些 parent.jsp id 和子 id 相同。我必须格外小心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:09:50.780

您可能想要更改这些类的 id，或者只是更改这些元素的 id 名称。

根据 W3C：

“id 选择器用于为单个唯一元素指定样式。”

“类选择器用于为一组元素指定样式。与 id 选择器不同，类选择器最常用于多个元素。”

# php - PHP：根据邮政编码的动态运费

> ID：15987542
> 
> 赞同：1
> 
> 时间：2013-04-13T11:58:37.177
> 
> 标签：php, e-commerce, postal-code

该任务就像标题所说的：**在 PHP 中实现一个根据给定**的英国邮政编码动态设置交付成本的功能。它将是电子商务应用程序的一部分（准确地说：prestashop）。它应该或多或少像[这个页面](http://www.indigofurniture.co.uk/helpful-info/delivery-and-returns/delivery-costs)一样工作。

我的问题是：**有什么我可以使用的工具**吗？我发现的唯一东西是一个[单表“数据库”](http://www.doogal.co.uk/PostcodeDistricts.php)（基本上以 CSV 格式下载）。但是有2个问题：

*   我缺少小规模区域（如`Aberdeen`）和大规模区域/县/国家（如`Scotland`）之间的关系。我不考虑手动进行 - 可能有一些可以帮助的东西。
*   然而，正如[维基百科](http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom#Special_postcodes)所说，皇家邮政给出了一些与地区无关但与组织相关的特殊邮政编码。因此，我不能 100% 确定上述 CSV 将涵盖客户可以提交的所有可能的邮政编码。

你知道任何工具或网络服务或任何其他处理这些功能的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:36:36.887

为什么不使用官方来源的邮政编码数据库，例如 Ordnance Survey 的 CodePoint Open - ordnancesurvey.co.uk/oswebsite/products/code-point-open - 它也是免费的，每年更新四次。

CodePoint Open 不包括“特价商品”，因为它们不是地理上的潮汐（因此不包括有效的“SAN TA1”邮政编码），但您真的希望交付到足协总部或任何那些“自己的邮政编码”组织？如果您确实需要这些，那么您可以随时手动添加它们。

# machine-learning - 与内核 svm 相 关的困惑

> ID：15987552
> 
> 赞同：2
> 
> 时间：2013-04-13T11:59:33.360
> 
> 标签：machine-learning, svm

我有这种与内核 svm 相​​关的困惑。我读到使用内核 svm 保留的支持向量的数量很大。这就是为什么训练困难且耗时的原因。我没有得到这部分为什么难以优化。好的，我可以说嘈杂的数据需要大量的支持向量。但这与训练时间有什么关系。

另外我正在阅读另[一篇文章](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://jmlr.csail.mit.edu/proceedings/papers/v22/zhang12d/zhang12d.pdf&ei=90dpUcTeJcXu0gHylYHoDQ&usg=AFQjCNE4mUPPsSiyQBW5FY_IyeRT7Im9Og&sig2=r5oZey9nhHIW_MOZf6lGfg&bvm=bv.45175338,d.dmQ)，他们试图将非线性 SVM 内核转换为线性 SVM 内核。在线性核的情况下，它只是原始特征本身的点积。但在非线性的情况下，它是 RBF 和其他。我没有理解他们所说的“操纵核矩阵会带来重大的计算瓶颈”的意思。据我所知，内核矩阵是静态的，不是吗。对于线性内核，它只是原始特征的点积。在 RBF 的情况下，它使用高斯核。所以我只需要计算一次，然后我就完成了不是吗。那么操纵和瓶颈思考的意义何在？

**支持向量机 (SVM) (Cortes and Vapnik, 1995) 作为最先进的分类算法已广泛应用于各个科学领域。内核的使用允许将输入样本映射到再现内核希尔伯特空间（RKHS），这对于解决线性不可分问题至关重要。虽然核 SVM 提供了最先进的结果，但操作核矩阵的需要带来了严重的计算瓶颈，使得难以在大数据上进行扩展。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:35:04.393

这是因为核矩阵是一个大小为 N 行 N 列的矩阵，其中 N 是训练样本的数量。所以假设你有 500,000 个训练样本，那么这意味着矩阵需要 500,000*500,000*8 字节（1.81 TB）的 RAM。这是巨大的，需要某种并行计算集群以任何合理的方式处理。更不用说计算每个元素所需的时间了。例如，如果您的计算机需要 1 微秒来计算 1 个内核评估，那么计算整个内核矩阵需要 69.4 小时。相比之下，一个好的线性求解器可以在普通桌面工作站上几分钟或一小时内处理这种规模的问题。这就是为什么首选线性 SVM 的原因。

要了解它们为何如此之快，您必须退后一步，想想这些优化器是如何工作的。在最高级别，您可以将它们视为搜索在所有训练样本上提供正确输出的函数。此外，大多数求解器都是迭代的，因为他们对这个函数应该是什么有一个当前的最佳猜测，并且在每次迭代中他们在训练数据上测试它，看看它有多好。然后他们以某种方式更新功能以改进它。他们一直这样做，直到找到最好的功能。

记住这一点，线性求解器如此快的主要原因是因为他们正在学习的函数只是固定大小的权重向量和训练样本之间的点积。因此，在优化的每次迭代中，它只需要计算当前权重向量和所有样本之间的点积。这需要 O(N) 时间，此外，无论您有多少训练样本，好的求解器只需几次迭代即可收敛。所以求解器的工作内存就是存储单个权重向量和所有训练样本所需的内存。这意味着整个过程只需要 O(N) 时间和 O(N) 字节的 RAM。

另一方面，非线性求解器正在学习一个函数，而不仅仅是权重向量和训练样本之间的点积。在这种情况下，它是一个函数，它是测试样本和所有其他训练样本之间的一堆内核评估的总和。*因此，在这种情况下，仅针对一个*训练样本评估您正在学习的函数需要 O(N) 时间。因此，针对所有训练样本对其进行评估需要 O(N^2) 时间。已经设计了各种巧妙的技巧来尝试保持非线性函数紧凑以加快速度。但是在某种意义上，它们都至少有一点启发式或近似性，而好的线性求解器会找到精确的解决方案。这就是线性求解器流行的部分原因。

# ruby-on-rails - Guard+Spork 问题（Guard::Spork 未能实现其 ,)

> ID：15987553
> 
> 赞同：5
> 
> 时间：2013-04-13T11:59:52.270
> 
> 标签：ruby-on-rails, ruby, rspec, guard, spork

我按照 Michael Hartl 的 Rails 教程使用 Spork 运行 Guard，我遇到了这个问题。以下是错误消息：

```
20:45:58 - INFO - Starting Spork for RSpec, Test::Unit
20:45:58 - ERROR - Guard::Spork failed to achieve its <start>, exception was:
> [#B57790298EE3] ChildProcess::LaunchError: No such file or directory - bundle exec spork -p 8989
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/childprocess-0.3.9/lib/childprocess/unix/fork_exec_process.rb:54:in `l\aunch_process'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/childprocess-0.3.9/lib/childprocess/abstract_process.rb:72:in `start'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-spork-1.2.0/lib/guard/spork/spork_instance.rb:38:in `start'

> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-spork-1.2.0/lib/guard/spork/runner.rb:33:in `each'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-spork-1.2.0/lib/guard/spork/runner.rb:33:in `launch_sporks'

> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-spork-1.2.0/lib/guard/spork.rb:21:in `start'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:99:in `block in run_supervised_task'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:97:in `catch'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:97:in `run_supervised_task'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:54:in `block (2 levels) in run'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:175:in `block (3 levels) in scoped_gua\rds'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:174:in `each'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:174:in `block (2 levels) in scoped_gua\rds'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:173:in `catch'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:173:in `block in scoped_guards'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:172:in `each'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:172:in `scoped_guards'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:53:in `block in run'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/lumberjack-1.0.3/lib/lumberjack.rb:27:in `unit_of_work'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/runner.rb:52:in `run'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard.rb:189:in `block in start'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard.rb:365:in `block in within_preserved_state'

> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard.rb:362:in `synchronize'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard.rb:362:in `within_preserved_state'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard.rb:187:in `start'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/lib/guard/cli.rb:110:in `start'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/thor-0.18.1/lib/thor/command.rb:27:in `run'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/thor-0.18.1/lib/thor/invocation.rb:120:in `invoke_command'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/thor-0.18.1/lib/thor.rb:363:in `dispatch'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/thor-0.18.1/lib/thor/base.rb:439:in `start'
> [#B57790298EE3] /home/us/.rvm/gems/ruby-2.0.0-p0/gems/guard-1.7.0/bin/guard:6:in `<top (required)>'
> [#B57790298EE3] ./bundler_stubs/guard:16:in `load'
> [#B57790298EE3] ./bundler_stubs/guard:16:in `<main>'
20:45:58 - INFO - Guard::Spork has just been fired 
```

Spork 可以毫无问题地执行：

```
Using RSpec
Preloading Rails environment
Loading Spork.prefork block...
Spork is ready and listening on 8989! 
```

似乎是什么问题？childprocess-0.3.9 中是否存在错误？还是我的 Guardfile？下面是我的Guardfile：

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

guard 'rspec', :version => 2, :all_after_pass => false, :cli => '--drb' do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{\m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb", (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : "spec/requests/#{m[1].s\ingularize}_pages_spec.rb")] }
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" }

  # Capybara request specs
  watch(%r{^app/views/(.+)/}) do |m|
    (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" :
     "spec/requests/#{m[1].singularize}_pages_spec.rb")
  end

  # Turnip features and steps
  watch(%r{^spec/acceptance/(.+)\.feature$})
  watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }

end

guard 'spork', :rspec_env => { 'RAILS_ENV' => 'test' } do
  watch('config/application.rb')
  watch('config/environment.rb')
  watch('config/environments/test.rb')
  watch(%r{^config/environments/.+\.rb$})
  watch(%r{^config/initializers/.+\.rb$})
  watch('Gemfile')
  watch('Gemfile.lock')
  watch('spec/spec_helper.rb')
  watch('test/test_helper.rb')
  watch('spec/support/')
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T17:54:20.597

[使用 Spork 和 Guard 时在开始时](https://stackoverflow.com/questions/14590399/error-on-start-when-using-spork-and-guard)引用错误

```
"That's a known issue in guard-spork and you can either use the previous 
version of ChildProcess by adding

gem 'childprocess', '0.3.6'

to your Gemfile or try the guard-spork master branch, which has fixed 
the issue by adding

gem 'guard-spork', :github => 'guard/guard-spork'

to your Gemfile." 
```

我采用 :github => 'guard/guard-spork' 方法，现在一切正常

# python - Python Maxent 分类器

> ID：15987554
> 
> 赞同：2
> 
> 时间：2013-04-13T11:59:59.317
> 
> 标签：python, nltk, maxent

我一直在 python 中使用 maxent 分类器并且它失败了，我不明白为什么。

我正在使用电影评论语料库。（总菜鸟）

```
import nltk.classify.util
from nltk.classify import MaxentClassifier
from nltk.corpus import movie_reviews

def word_feats(words):
 return dict([(word, True) for word in words])

negids = movie_reviews.fileids('neg')
posids = movie_reviews.fileids('pos')

negfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'neg') for f in negids]
posfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'pos') for f in posids]

negcutoff = len(negfeats)*3/4
poscutoff = len(posfeats)*3/4

trainfeats = negfeats[:negcutoff] + posfeats[:poscutoff]
classifier = MaxentClassifier.train(trainfeats) 
```

这是错误（我知道我做错了，请链接到 Maxent 的工作原理）

> 警告（来自警告模块）：文件“C:\Python27\lib\site-packages\nltk\classify\maxent.py”，第 1334 行 sum1 = numpy.sum(exp_nf_delta * A, axis=0) RuntimeWarning：遇到无效值乘以
> 
> 警告（来自警告模块）：文件“C:\Python27\lib\site-packages\nltk\classify\maxent.py”，第 1335 行 sum2 = numpy.sum(nf_exp_nf_delta * A, axis=0) RuntimeWarning：遇到无效值乘以
> 
> 警告（来自警告模块）：文件“C:\Python27\lib\site-packages\nltk\classify\maxent.py”，第 1341 行 deltas -= (ffreq_empirical - sum1) / -sum2 RuntimeWarning：在除法中遇到无效值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-21T14:06:47.820

我更改并更新了代码。

```
import nltk, nltk.classify.util, nltk.metrics
from nltk.classify import MaxentClassifier
from nltk.collocations import BigramCollocationFinder
from nltk.metrics import BigramAssocMeasures
from nltk.probability import FreqDist, ConditionalFreqDist
from sklearn import cross_validation

from nltk.classify import MaxentClassifier
from nltk.corpus import movie_reviews

def word_feats(words):
 return dict([(word, True) for word in words])

negids = movie_reviews.fileids('neg')
posids = movie_reviews.fileids('pos')

negfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'neg') for f in negids]
posfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'pos') for f in posids]

negcutoff = len(negfeats)*3/4
poscutoff = len(posfeats)*3/4

trainfeats = negfeats[:negcutoff] + posfeats[:poscutoff]
#classifier = nltk.MaxentClassifier.train(trainfeats)

algorithm = nltk.classify.MaxentClassifier.ALGORITHMS[0]
classifier = nltk.MaxentClassifier.train(trainfeats, algorithm,max_iter=3)

classifier.show_most_informative_features(10)

all_words = nltk.FreqDist(word for word in movie_reviews.words())
top_words = set(all_words.keys()[:300])

def word_feats(words):
    return {word:True for word in words if word in top_words} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T22:59:43.517

溢出问题可能有一个修复，`numpy`但由于这只是一个用于学习 NLTK/文本分类的电影评论分类器（而且你可能不希望训练花费很长时间），我将提供一个简单的解决方法：你可以只是限制特征集中使用的单词。

您可以`300`在所有这样的评论中找到最常用的词（如果您愿意，显然可以将其提高），

```
all_words = nltk.FreqDist(word for word in movie_reviews.words())
top_words = set(all_words.keys()[:300]) 
```

然后，您所要做的就是`top_words`在特征提取器中交叉引用以进行评论。另外，作为一个建议，使用字典理解而不是将 a `list`of `tuple`s转换为 a 更有效`dict`。所以这可能看起来像，

```
def word_feats(words):
    return {word:True for word in words if word in top_words} 
```

# git - GitHub：使用分支最常见的模式是什么？

> ID：15987555
> 
> 赞同：0
> 
> 时间：2013-04-13T12:00:00.730
> 
> 标签：git, version-control, github

最近我越来越多地使用git和GitHub了，虽然我在一般和理论上理解了分支的概念，但我还没有理解人们在实践中实际使用分支的方式？

我怎么知道是时候维护不同的分支以及何时开始提交除 master 分支以外的任何东西？

我主要是自己开发和为自己开发，我不必完全跟上“生产”和“开发”版本，因为我的大部分东西都在大量开发中。仍然：在这种情况下，将我的代码保存在不同的分支中对我有什么好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T12:02:40.953

这是我喜欢使用的一种称为 git-flow 的模式：[git-flow](http://nvie.com/posts/a-successful-git-branching-model/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T12:10:18.653

一个常见的范式是尽可能频繁地提交，以便在开发中实现非常小的增量步骤，因为如果出现问题，这可以很容易地回到历史中。如果您仅在 master 分支上进行所有开发，则修订历史记录将非常长，因为其中包含大量注释，因此难以区分何时添加了特色。

另一种方法是为新功能创建一个分支并在那里进行所有增量开发。当您对设计/代码感到满意时，您可以压缩修订历史并将其合并回主控，然后将拥有一个非常干净的基于功能的历史记录，您无需查看让您到达那里的所有小步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:26:56.960

我刚刚意识到我应该更多地搜索stackoverflow，我不需要问这个问题。

这是一个 4 年前的锁定问题，其中包含我认为我需要了解的关于 Git 和 GitHub 的所有内容，包括 socketwiz 提到的 git-flow 范例。

[Git 初学者：权威实用指南](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide/5968622#5968622)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T14:30:24.583

书中的[分支工作流](http://git-scm.com/book/en/Git-Branching-Branching-Workflows)一章- Scott Chacon 的 Pro Git，解释了一些 git 工作流。由于 git 非常灵活，您可以拥有自己的工作流程。例如

```
Release -> Production Deployment
Master -> Most Stable tested branch - Deployed on staging
All other branches -> One branch for each feature 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T12:17:54.780

我建议将`master`分支保持在随时可以发布的状态。如果你所有的提交都是“可靠的”，那么就不需要分支。

我养成了为每个新功能在专用分支上工作的习惯。这样，如果我必须紧急修复错误，例如因为我收到来自 Android 应用程序的崩溃报告，我可以暂停我当前的工作，修复错误`master`，打包新版本，然后回到我离开的地方。

顺便说一句，我使用以下命令将我的功能分支合并到 master 中：

```
git merge --no-ff --no-commit the_branch
git commit -m 'merged: improved this and that' 
```

这样，当我查看 中的历史记录时`gitk`，我会看到每个功能分支很好地分组的详细实现步骤。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T13:08:08.133

正确的分支策略很大程度上取决于项目、团队中的工作人员和外部需求。有一些通用模式，例如 git-flow，但您应该始终问自己，它们在您的情况下是否有意义。

在您的情况下，您独自处理代码，您不必维护不同版本的代码，也没有外部要求。- 因此你可以很自由地做什么，所有复杂的模式真的是矫枉过正。

我建议在 github 上只有一个分支（主）。在您的本地存储库中，您很可能也会在 master 上工作。每当您完成某个步骤时，您就提交，并且只要您对当前工作状态感到满意，您就会推送到 github。

请注意提交和推送之间的区别：只要您不推送，您就可以随时更改提交、修复错误、重新排序提交等 - 因此您很可能不需要任何显式分支。

如果您愿意，可以使用分支来获得更清晰的历史记录。如果你一个接一个地开发一个特性并且经常提交它可能会导致很长的历史。在这种情况下，您可以在自己的分支上开发每个功能，并在完成后将其合并（--no-ff）以掌握。- 那么你的主分支应该只包含（--first-parent）每个功能一个合并。但这在您的情况下可能已经过大了。

# ant - ANT 使用具有属性的文件替换指定文件中的字符串

> ID：15987556
> 
> 赞同：4
> 
> 时间：2013-04-13T12:00:04.873
> 
> 标签：ant, properties, replace

我在文件 dev.properties 中有一个属性，它们看起来像这样：

```
test.url=https://www.example.com/
[...] 
```

在项目文件中有一个令牌 [[test.url]] 我想用[https://www.example.com/](https://www.example.com/)替换它。我只想在 dev.properties 中定义所有标记并在构建脚本中使用它们，但不修改构建脚本，我想替换指定文件中的这些标记，如 *.php、*.html 等。

有人可以给我一个建议吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T09:11:30.197

尝试这个：

```
<copy file="input.txt" tofile="output.txt">
   <filterchain>
   <replaceregex pattern="\$\{" replace="{" />
   <filterreader classname="org.apache.tools.ant.filters.ReplaceTokens">
        <param type="propertiesfile" value="properties.txt"/>
        <param type="tokenchar" name="begintoken" value="{"/>
        <param type="tokenchar" name="endtoken" value="}"/>
    </filterreader>
    </filterchain>
</copy> 
```

在这里成立：[Ant replace token from properties file](https://stackoverflow.com/questions/3680362/ant-replace-token-from-properties-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T17:11:51.067

在以下 Ant 脚本中，将`src-root`属性替换为包含标记化文件的根目录：

```
<project name="ant-replace-tokens-with-copy-task" default="run">
    <target name="run">
        <!-- The <copy> task cannot "self-copy" files. So, for each -->
        <!-- matched file we'll have <copy> read the file, replace the -->
        <!-- tokens, and write the result to a temporary file. Then, we'll -->
        <!-- use the <move> task to replace the original files with the -->
        <!-- modified files. -->
        <property name="src-root" location="src"/>
        <property name="filtered-file.extension" value="*.filtered-file"/>

        <copy todir="${src-root}">
            <fileset dir="${src-root}">
                <include name="**/*.html"/>
                <include name="**/*.php"/>
            </fileset>
            <globmapper from="*" to="${filtered-file.extension}"/>
            <filterchain>
                <filterreader classname="org.apache.tools.ant.filters.ReplaceTokens">
                    <param type="propertiesfile" value="dev.properties"/>
                </filterreader>
            </filterchain>
        </copy>

        <move todir="${src-root}">
            <fileset dir="${src-root}" includes="**"/>
            <globmapper from="${filtered-file.extension}" to="*"/>
        </move>
    </target>
</project> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T15:43:08.073

您指定您不想编辑构建脚本，因此此答案不符合条件，但仍可能对其他读者有用。

如果您愿意编辑您的目标文件以使用格式 ${test.url} 而不是 [[test.url]] 那么[ExpandProperites](http://ant.apache.org/manual/Types/filterchain.html#expandproperties)将是一个很好的选择。

# python - Python 2.7 的 Tkinker 模块

> ID：15987561
> 
> 赞同：-1
> 
> 时间：2013-04-13T12:00:56.383
> 
> 标签：python, tkinter

我有 Python 2.7 和 windows vista。

当我运行以下代码时：

```
`from Tkinker import  *` 
```

它会给出这个错误：

```
Error:
Traceback (most recent call last):
  File "C:/Python27/Button", line 5, in <module>
    from Tkinker import  *
ImportError: No module named Tkinker 
```

所以请帮我了解如何安装 Tkinker 模块 在哪里复制 Tkinker 模块的源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T12:02:14.710

您拼错了模块名称。这`Tkinter`不是`Tkinker`

# c# - 异步填充强类型数据集

> ID：15987563
> 
> 赞同：2
> 
> 时间：2013-04-13T12:01:16.403
> 
> 标签：c#, .net, winforms, data-binding, asynchronous

相信大家都熟悉使用Visual Studio将数据填充到数据绑定控件中的传统方式。VS 创建一个强类型的 DataSet 并在表单加载事件中调用 DataAdapter 的 Fill 函数，就像下面给出的代码一样：

```
this.applications_infoTableAdapter.Fill(this.bITSS_UIT_dBDataSet_tmpApplication.Applications_info, textBox1.Text); 
```

一切都很完美，除非从数据库中获取大量数据。

当我们在数据库中有超过 500K 的元组，并且需要在服务器端进行搜索时，即使是 sql server 也需要一些时间才能返回数据。在这段时间内，Windows 窗体的 UI 变得无响应。

对于大量数据，UI 在相当长的时间内保持无响应，这是不可接受的。

所以，我的问题是，是否有任何异步方式来填充数据，以便 UI 保持响应，并且我们可能会向用户显示加载动画或我们想要的任何其他内容。

我希望我已经说清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:13:58.510

类型化数据集中没有异步填充。查询在数据库上运行，而不是在您的代码中。数据库引擎可以使用多个内核进行查询，但只有在查询完成并且结果通过线路同步发送回时才会返回填充调用。您可以通过 BeginLoadData 关闭数据表中的簿记，但这不会改变数据库服务器处理您的查询的方式。

如果您的服务器是 SQL Server，您可以将 SqlClient async 与启用了 async=true 的 SqlConnection 一起使用，但是类型化的数据集不会生成使用 SQL Server 提供程序的代码，您需要以某种方式修补设计器生成的代码以使用 sql服务器对象而不是通用对象。

一种更简单的方法是通过 System.Threading、Background Worker 或 PPL 将表适配器的创建和填充移动到后台线程，因此它会挂起另一个线程。如果要暂停或恢复数据填充，则需要重写查询以支持分页。

# windows-phone-7 - Cimbalino 应用栏，使用 UserControls 旋转

> ID：15987564
> 
> 赞同：0
> 
> 时间：2013-04-13T12:01:28.760
> 
> 标签：windows-phone-7, mvvm-light, cimbalino

好的，关于 Cimbalino appbar 的另一个问题。

我有一个带有几个页面的枢轴作为用户控件。我想要的是为每个 UC（页面）提供不同的应用栏。但我无法在 UC 中定义 appbar，因为这会引发异常 *“此 ApplicationBarBehavior 元素只能附加到 LayoutRoot 元素”*，但 root 是 Pivot 本身。

PS：我肯定想使用 mvvm 方式，并将 appbar 保留在 UC 的视图模型中，而不是通过 Pivot 代码隐藏中的 SelectedIndex 切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:15:19.653

啊，看起来 MultiApplicationBarBehavior 很适合。 [http://www.pedrolamas.com/2013/03/11/cimbalino-windows-phone-toolkit-multiapplicationbarbehavior/](http://www.pedrolamas.com/2013/03/11/cimbalino-windows-phone-toolkit-multiapplicationbarbehavior/)

虽然，我不确定它是否 100% 有用：它绑定到索引，但如果我想切换一些页面怎么办？

# javascript - 如何使用函数返回的对象？

> ID：15987565
> 
> 赞同：2
> 
> 时间：2013-04-13T12:01:44.000
> 
> 标签：javascript, html, css

有一个 pokki 函数`pokki.getWorkAreaSize()`，它返回一个包含工作区域高度和宽度的对象。

如何将这些值用作 CSS 属性？

例如`<object style="width:0px;height:0px;"></object>`，我希望该对象的宽度和高度是函数返回的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:09:56.570

你应该有一个元素的身份。那么你可以这样做，

```
<object id="obj1" style="width:0px;height:0px;"></object>

var size = pokki.getWorkAreaSize();
var obj1 = document.getElementById("obj1");
obj1.style.width = size.width + "px";
obj1.style.height = size.height + "px"; 
```

希望这可以帮助。

# html - 如何将 span 标签包装在 slim_to 中？

> ID：15987566
> 
> 赞同：10
> 
> 时间：2013-04-13T12:02:01.630
> 
> 标签：html, ruby-on-rails, ruby, slim-lang

```
li = link_to 'Account', '#account', data: { toggle: 'tab' } 
```

我需要围绕“帐户”的跨度标签。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-13T12:32:50.727

如果您发现链接文本中的代码比**span**标签更复杂，也可以使用块：

```
 li = link_to '#account', data: {toggle: 'tab'} do
     span
       = "Account" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-13T12:13:13.773

```
li = link_to content_tag(:span, 'Account'), '#account', data: { toggle: 'tab' } 
```

[http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-tag](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-tag)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:06:44.020

```
li = link_to "<span>Account</span>".html_safe, '#account', data: { toggle: 'tab' } 
```

# java - JSP java servlet在web.xml中保持错误

> ID：15987567
> 
> 赞同：1
> 
> 时间：2013-04-13T12:02:02.880
> 
> 标签：java, jsp, servlets

我试图使这项工作。

但仍然给我错误

我还是新手

我的 .jsp 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Staff Page - Add Book</title>
    </head>

    <body>
                <center>
                    <h2 style="text-align: center;">Return Book Form.</h2>

                    <form name="uForm" method="get" action="addbookServlet" enctype="multipart/form-data">

                        <table align="center" width="300px" style="background-color:#f5f5f5;border:1px solid #e5e5e5; padding:5px;">
                            <tr><td colspan=2 align="center" height="10px"></td></tr>
                            <tr>
                                <td><b>Book ID</b></td>
                                <td><input type="text" name="book_id" size="50"></td>
                            </tr>
                            <tr>
                                <td><b>Book Title</b></td>
                                <td><input type="text" name="book_title" size="50"></td>
                            </tr>
                            <tr>
                                <td><b>Book Author</b></td>
                                <td><input type="text" name="book_author" size="50"></td>
                            </tr>
                            <tr>
                                <td><b>Book Quantity</b></td>
                                <td><input type="text" name="book_quantity" size="50"></td>
                            </tr>
                            <tr>
                                <td><b>Book Location</b></td>
                                <td><input type="text" name="book_location" size="50"></td>
                            </tr>
                            <tr>
                                <td><b>Book Image</b></td>
                                <td><input type="file" name="book_image" accept="image/x-png, image/gif, image/jpeg" size="50"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><input type="submit" class="g-button" value="Submit"></td>
                            </tr>
                            <tr><td colspan=2 align="center" height="10px"></td></tr>
                        </table>

                    </form>
                </center>
    </body>
</html> 
```

我的 .java 文件

```
package caal;

import java.io.IOException;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.Part;
import caal.DbConnection.*;

public class AddBook extends HttpServlet {

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //response.setContentType("text/html");
       // PrintWriter out = response.getWriter();
        Connection con = null; // connection to the database
        String message = null;  // message will be sent back to client
       // Statement stmt;

        String book_id = request.getParameter("book_id");
        String book_title = request.getParameter("book_title");
        String book_author = request.getParameter("book_author");
        String book_quantity = request.getParameter("book_quantity");
        String book_location = request.getParameter("book_location");
        //String book_image = request.getParameter("book_image");
        InputStream inputStream = null; // input stream of the upload file

        // obtains the upload file part in this multipart request
        Part filePart = request.getPart("book_image");
        if (filePart != null) {
            // prints out some information for debugging
            System.out.println(filePart.getName());
            System.out.println(filePart.getSize());
            System.out.println(filePart.getContentType());

            // obtains input stream of the upload file
            inputStream = filePart.getInputStream();
        }

        try {
            DriverManager.registerDriver(new com.mysql.jdbc.Driver());
            con = DbConnection.getConn();
            String query = "INSERT INTO booktable(bookId, bookTitle, bookAuthor, bookQuantity, bookLocation, bookimage) VALUES (?,?,?,?,?,?)";
            System.out.println("query " + query);
            PreparedStatement statement = con.prepareStatement(query);
            statement.setString(1, book_id);
            statement.setString(2, book_title);
            statement.setString(3, book_author);
            statement.setString(4, book_quantity);
            statement.setString(5, book_location);

            if (inputStream != null) {
                // fetches input stream of the upload file for the blob column
                statement.setBlob(6, inputStream);
            }
            //stmt = con.createStatement();
            //stmt.executeUpdate(query);
            response.sendRedirect("login.jsp");
            con.close();
            System.out.println("Disconnected from database");
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (con != null) {
                // closes the database connection
                try {
                    con.close();
                } catch (SQLException ex) {
                    ex.printStackTrace();
                }
            }
            // sets the message in request scope
            request.setAttribute("Message", message);

            // forwards to the message page
            getServletContext().getRequestDispatcher("/Message.jsp").forward(request, response);
        }
    }
} 
```

我的 web.xml 变成错误。如果我这样说

```
 <!-- SERVLET FOR ADD BOOK -->
   <servlet>
        <servlet-name>addBookServlet</servlet-name>
        <servlet-class>caal.AddBook</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>addBookServlet</servlet-name>
        <url-pattern>/addbookServlet</url-pattern>
    </servlet-mapping>
    <multipart-config>
    <location>/tmp</location>
    <max-file-size>20848820</max-file-size>
    <max-request-size>418018841</max-request-size>
    <file-size-threshold>1048576</file-size-threshold>
</multipart-config> 
```

错误是

```
Error occurred during deployment: Exception while deploying the app [fpx] : org.xml.sax.SAXParseException; lineNumber: 52; columnNumber: 23; Deployment descriptor file WEB-INF/web.xml in archive [web].  cvc-complex-type.2.4.a: Invalid content was found starting with element 'multipart-config'. One of '{"http://java.sun.com/xml/ns/j2ee":description, "http://java.sun.com/xml/ns/j2ee":display-name, "http://java.sun.com/xml/ns/j2ee":icon, "http://java.sun.com/xml/ns/j2ee":distributable, "http://java.sun.com/xml/ns/j2ee":context-param, "http://java.sun.com/xml/ns/j2ee":filter, "http://java.sun.com/xml/ns/j2ee":filter-mapping, "http://java.sun.com/xml/ns/j2ee":listener, "http://java.sun.com/xml/ns/j2ee":servlet, "http://java.sun.com/xml/ns/j2ee":servlet-mapping, "http://java.sun.com/xml/ns/j2ee":session-config, "http://java.sun.com/xml/ns/j2ee":mime-mapping, "http://java.sun.com/xml/ns/j2ee":welcome-file-list, "http://java.sun.com/xml/ns/j2ee":error-page, "http://java.sun.com/xml/ns/j2ee":jsp-config, "http://java.sun.com/xml/ns/j2ee":security-constraint, "http://java.sun.com/xml/ns/j2ee":login-config, "http://java.sun.com/xml/ns/j2ee":security-role, "http://java.sun.com/xml/ns/j2ee":env-entry, "http://java.sun.com/xml/ns/j2ee":ejb-ref, "http://java.sun.com/xml/ns/j2ee":ejb-local-ref, "http://java.sun.com/xml/ns/j2ee":service-ref, "http://java.sun.com/xml/ns/j2ee":resource-ref, "http://java.sun.com/xml/ns/j2ee":resource-env-ref, "http://java.sun.com/xml/ns/j2ee":message-destination-ref, "http://java.sun.com/xml/ns/j2ee":message-destination, "http://java.sun.com/xml/ns/j2ee":locale-encoding-mapping-list}' is expected.. Please see server.log for more details. 
```

我也尝试过使用@MultipartConfig，但它仍然无法正常工作。我需要一些帮助 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:39:05.597

在 web.xml 中，必须有正确且对应的 DOCTYPE 和 DTD/XSD 设置，否则可能会出现 xml 失效错误。

尝试检查您的 web.xml XSD 设置，请参阅[此处](http://wiki.metawerx.net/wiki/Web.xmlDTDAndXSD)，然后重试。

> *从 JSP 2.0 / Servlets 2.4（例如：Tomcat 5.5）开始，首选 XSD 版本。请注意，XML 编码可以指定为 ISO-8859-1、UTF-8 或任一版本中的任何其他有效编码，并且应与文本文件的实际编码相匹配。*

# windows-8 - 更换硬盘后获取我的 Windows 8 密钥

> ID：15987568
> 
> 赞同：0
> 
> 时间：2013-04-13T12:02:04.653
> 
> 标签：windows-8

我买了一个新硬盘并从我准备的一些 USB 上安装了 windows 8，我的问题是，我如何从 bios 或我的 Microsoft 帐户中获取我的产品密钥，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:06:54.937

如果您在购买计算机时预装了 windows8，它很可能有一个 OEM 密钥，那么该密钥不再对您的使用有效，因为它不再是预装版本。

您可以使用恢复磁盘（或分区），它们可以恢复密钥和预装的 windows 版本。

密钥不会保存到 bios 或类似设备中，从机器上获取密钥的唯一方法是在重新安装之前将其提取出来。

但大多数大生产商都会在电脑上贴上带有钥匙的贴纸。

# php - 计算IP唯一访问者并将其发送到mysql数据库

> ID：15987571
> 
> 赞同：0
> 
> 时间：2013-04-13T12:02:27.063
> 
> 标签：php, ip, unique, counter

我想知道如何获取有关我网站的唯一 IP 的信息，指定链接并将该信息存储在 mysql 数据库中以供特定用户使用。我不仅需要该脚本计数[http://example.com.com](http://example.com.com)，还需要例如：[http://example.com/somesub/this/link](http://example.com/somesub/this/link)。因为我想开发一个项目，在这个项目中，用户可以访问我的系统并获得报酬。（付费推广系统）。我该如何开发这个？关于php代码的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:02:15.637

首先使用`$_SERVER['REMOTE_ADDR']`查找请求 IP 地址或查看[PHP 如何获取客户端 IP 地址](https://stackoverflow.com/questions/3003145/how-to-get-client-ip-address-in-php)。然后在您网站的每个页面的开头，您应该获取此值（其作用类似于主键）并查询数据库以增加特定计数器。

PS：如果客户端使用代理访问您的站点，您会发现问题，请参阅上面的链接以获取更多信息。

# linux - 请帮助，使用 %echo 参数

> ID：15987576
> 
> 赞同：0
> 
> 时间：2013-04-13T12:02:38.640
> 
> 标签：linux, unix, input, echo

我有这个问题，如何使用 echo 来补充输入并告诉程序要给出多少输出。

基本上，我已经整理出了程序逻辑，即从 y 输入中随机选择 x 数的子集。我的代码在这里：

问题是，如何将主参数中的 argc 变量转发给程序执行？

上下文需要我调用：%echo ABCDEFG | 子集 2，假设随机打印 2 个字符。但是我不能这样做，数字2似乎不能在这里转发。%echo 命令的调用似乎也不起作用。任何人请帮助

```
int main(int argc){
RandomizedQueue<char> q;
char input;

while(cin.peek() != '\n'){
    cin >> input;
    q.enqueue(input);
}

for(int k = 0; k < argc; k++)
    cout << q.dequeue() << endl;

return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:37:46.190

我认为 % in`%echo`不是您应该输入的内容，而是表示命令提示符本身。所以你输入这个：

```
echo A B C D E F G | ./Subset 2 
```

假设您的程序名为 Subset 并且位于当前工作目录中。然后，Subset 将收到 argc==2 和 argv=={"./Subset", "2"}。您需要以标准方式声明 main （您缺少 argv）：

```
int main(int argc, char* argv[]) 
```

一旦你这样做了， argv[1] 将是“2”作为一个字符串（程序的第一个参数）。您可以执行以下操作将其转换为 int：

```
int count = atoi(argv[1]); 
```

您应该阅读 main 的声明，因为 argc 不是作为数字的参数，而是参数的数量。用 argc 而不是 argv 声明 main 是非常不典型的。

# .net - BLE112 - BLE112 和 Win7 通信

> ID：15987578
> 
> 赞同：2
> 
> 时间：2013-04-13T12:02:54.220
> 
> 标签：.net, windows-7, bluetooth-lowenergy, bluegiga

我正在为我的项目使用 BLE112 和 BLED112。我想将一些数据从安装在我的 PCB 上的 BLE112 发送到插入我的 Windows 7 机器的 BLED112 USB 加密狗。我已经通过 BLEGUI 通过 BLED112 连接到 BLE112，因此我的硬件工作正常。

我的问题是我想通过我的 .Net 应用程序读取 BLED112 接收到的数据。

那么您能否回答我的以下问题，或者如果您对如何从 Windows 7 轻松读取 BLED112 有任何其他想法，请告诉我。

*   BLED112可以独立工作并通过USB将数据发送到PC吗？我可以从虚拟串行端口读取这些数据吗？

*   有没有我可以直接使用的 .Net 库。（我知道有一个Java Lib）

*   我是否必须只使用在 BGAPI 上实现的 BGLib 从 BLED112 读取数据。

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T11:43:36.500

上周，当我遇到您的情况时，我在 gitHub 上找到了 BlueGiga API 的这个 C# 包装器：[https ://github.com/ahouben/BleDriver.NET](https://github.com/ahouben/BleDriver.NET)

我已经成功地将其调整并集成到我的应用程序中。它可以毫无问题地与 TI CC2541 运行（到目前为止......）。

我还使用 BG 的最新 API XML (ble-1.1.1-77) 对其进行了测试，Python 脚本（生成 C# 类）与该脚本同样适用。

# java - 从二维数组java打印字符

> ID：15987580
> 
> 赞同：-1
> 
> 时间：2013-04-13T12:03:10.160
> 
> 标签：java, multidimensional-array

如何从二维数组中逐列而不是逐行打印字符？另外，如何让字符填充数组？我知道你必须使用 for 循环，但我不断得到逐行读取的字符串。

```
String command = args[0]; 
    String Text = args[1]; //leters to be 

    char letters [] = Text.toCharArray(); 
    int m = Text.length(); //number of letters to be decrypted/encrypted

    if (command.equals("-encrypt")) {

        if ( m / (int) Math.sqrt(m) == Math.sqrt(m) ) { //if m is a perfect square no. eg.4,9,16

            int RootM = (int) Math.sqrt(m); //find depth and width of grid, square therfore depth = width
            char [][] box = new char [RootM][RootM]; //define and create grid 

        for (int i=0; i<RootM; i++) {
            for (int j=0; j<RootM; j++) {

                box[i] = letters; //change this to read each column
                System.out.print(Text); //displays encrypted text
            }
        }
     }

        else if     ( m / (int) Math.sqrt(m) != Math.sqrt(m) ) { //non perfect square digits

        int RootM = (int) Math.pow((Math.sqrt(m))+1,2); //overall size of 2d array (depth*width)
        int RootN1 = (int) Math.sqrt(RootM); //length of rows & columns

        char [][] box = new char [RootN1][RootN1]; //define dimensions of 2d array

            for (int i=0; i<RootN1; i++) {
                for (int j=0; j<RootN1; j++) {
                    box[j] = letters; //change this to read each column
            System.out.println(Text); //displays encrypted text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:11:55.377

```
char [][] box = new char [5][3];//5 rows, 3 columns
for(int i =0;i<3; i++){
    for (int j = 0; j < 5; j++) {//Iterate rows
        System.out.println(box[j][i]);//Print colmns
    }   
} 
```

# php - php DOMDocument 元素值不能是 HTML

> ID：15987583
> 
> 赞同：1
> 
> 时间：2013-04-13T12:03:33.350
> 
> 标签：php, html, domdocument

这是与问题相关的代码：

`$prep = "<select><option>Option 1</option><option selected>Option 1</option></select>"
$td = $dom->createElement('td',$prep);`

解决方案：

```
$f = $this->dom->createDocumentFragment();
$f->appendXML($prep); 
```

但仍然是一个大问题。任何没有值 ex:`selected`的属性`disabled`（您不能写为 `selected="selected"`）`createElement`都不允许您这样做。

如何使用没有价值的属性，而不是像现在这样得到 1000 错误： `Warning: DOMDocumentFragment::appendXML() [domdocumentfragment.appendxml]: Entity: line 1: parser error : Specification mandate value for attribute selected Warning: DOMDocumentFragment::appendXML() [domdocumentfragment.appendxml]: Entity: line 2: parser error : chunk is not well balanced`

传递`selected`属性或禁用时会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:10:20.960

我无法抗拒纠正。在 PHP 的 DOMDocument 模型实现中，字符串是`also`对象（这使您可以轻松地选择它们而不是依赖于 nodeValue，这在大多数情况下使生活更轻松）。

要插入带有文本的表格行，请执行以下操作：

```
$f = new DOMDocument();
$table = $f->createElement("table");
$f->appendChild($table);
$tbody = $f->createElement("tbody");
$table->appendChild($tbody);
$tr = $f->createElement("tr");
$tbody->appendChild($tr);
$td = $f->createElement("td");
$tr->appendChild($td);

// Magic happens here
$td->appendChild(new DOMText("this is my text")); 
```

顺便说一句，空属性在正确插入时会被保留 - 但是您可以自由使用 selected="selected"，只要它的内容是其属性名称的小写版本，它仍然有效（[在 HTML 5 中当属性是布尔属性吗？](https://stackoverflow.com/questions/4139786/what-does-it-mean-in-html-5-when-an-attribute-is-a-boolean-attribute)）。如果您仍然希望将其标记为 boolean true，请使用：

```
$elem->setAttribute("selected",""); 
```

（我只是运行代码+模式，没有任何错误，无需使用shutop）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:22:17.393

我自己找到了答案。
`$this->dom = new DOMDocument;` 所有其他代码以及您构建的内容
`$tbody = $this->dom->createElement('tbody');`
`$td = $this->dom->createElement('td');`

要将一段 html 代码放入 TD 中，您不能只是粘贴它或通过 ->nodeValue = '' 设置值。它将输出为文本，而不是 HTML。

`$prep = "<strong>lalala</strong>";`或任何其他 html 字符串 // 创建片段并附加它
`@@$f = $this->dom->createDocumentFragment(); @@$f->appendXML($prep);`

`$td->appendChild($f);`
——它工作！但要小心 :: HTML 标记的任何类型的空属性，例如`<option selected>`or`<option disabled>`都会导致错误并失败。
不要尝试将属性设置为`selected="selected"`. 由于 HTML/XML 解析器，这也将失败。

`createDocumentFragment()`只要您没有空值属性，例如 selected、disabled 或其他，SO就可以很好地工作

# javascript - 无限的javascript while循环查询表

> ID：15987584
> 
> 赞同：1
> 
> 时间：2013-04-13T12:03:45.133
> 
> 标签：javascript, backbone.js

在下面的标记上——当页面刷新时，while 循环工作，即（回发）——即 while 循环中的调用正在运行。但是，它不会在没有刷新的情况下更新（即，如果我更新数据库中的值，我不会在网页上看到更改）。我希望它不断地获取数据。

为什么不呢？解决方法是什么？

**标记**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>TestPage</title>
<script type="text/javascript" src="js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="js/data-import.js"></script>
<script src="js/underscore-min.js"></script>
<script src="js/backbone-min.js"></script>
<script src="js/jquery.dateFormat-1.0.js"></script>
</head>
<body>
    <div id="container">
        <div id="header">
        </div>
                <div id="tabContent">
                    <div id="fileRepositoryTable">
                        <h2 id="dataImportHeader">File Management</h2>
                        <table width="100%">
                            <tr>
                                <td>
                                    <div id="fileRepository">
                                        <script type="text/template" id="fileRepository-template">
                                                <div id="fileRepositoryTable">

                    <h2 id="dataImportHeader">File Management</h2>
                    <table width="100%">
                        <tr>
                            <td>
                                <div id="fileRepository">
                                    <script type="text/template" id="fileRepository-template">
                        <table id = "fileRepositoryTable">
                            <thead>
                                <tr>
                                    <th>File Name</th>
                                    <th>Progress</th>
                                    <th>Time Imported</th>
                                </tr>
                            </thead>
                        <tbody>

                        </tbody>
                        </table>
                        </script>
                        <script type="text/template" id="fileRepositoryrow-template">
                        <td><%= get('fileName')%></td>
                        <td><%= get('progress') +" %"%></td>
                        <td><%= $.format.date(get('timeImported'), 'dd/MM/yyyy hh:mm:ss') %></td>
                        </script>
                        </div>
                        </td>
                        </tr>
                    </table>
                    </div> 
```

**骨干代码 **

```
DataImport.FileRepositoryView = Backbone.View.extend({

    el: '#fileRepository',
    template: _.template($('#fileRepository-template').html()),

      initialize: function () {
        _.bindAll(this, 'render', 'appendRow');
        this.collection.bind('reset', this.render);
      },

      appendRow: function (fileRepo) {
        var repositoryView = new DataImport.FileRepositoryRowView({model: fileRepo});
        this.$el.find('tbody').append(repositoryView.render().el);
        return this;
      },

      render: function () {
        this.$el.html('');
        this.$el.append(this.template(this));
        _(this.collection.models).forEach(this.appendRow, this);
        return this;
      }
});

DataImport.FileRepositoryRowView = Backbone.View.extend({

     tagName: 'tr',
      template: _.template($('#fileRepositoryrow-template').html()),

      initialize: function () {
        _.bindAll(this, 'render');
        this.render();
      },

      render: function () {
        this.$el.html(this.template(this.model));
        return this;
      }
});

DataImport.FileRepositoryRows = Backbone.Collection.extend({

    model: DataImport.Row,
    url: DataImport.rootURL + 'path/getFileRepository',

}); 
```

**编辑包括主干代码 **

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T12:11:26.633

代替

```
while (true) {} 
```

尝试

```
setInterval(function() {
    // update code here
}, 0); 
```

否则，由于 JS 一直在使用 CPU，您的浏览器不会更新页面。

如果你不得不使用

```
while (whatever) {} 
```

在很长一段时间内，您应该很想使用

```
var clock = setInterval(function() {
    // the code to repeat
    if (!whatever) {
        clearInterval(clock);
    }
}, 0); 
```

而是让浏览器保持响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:20:46.823

解决了：

在我的 document.ready 函数中：

```
setInterval(function() {
            DataImport.FileRepositoryRowList.fetch();
            }, 10000); 
```

感谢小伙伴们的帮助。

# java - ImageIO 没有加载图像

> ID：15987589
> 
> 赞同：2
> 
> 时间：2013-04-13T12:04:24.127
> 
> 标签：java, image, loading

我无法使用 java 代码加载图像。我有图像，i.png 与此代码所在的类在同一个包中。这是代码。

```
 Image img;
    try
    {
        img = ImageIO.read(new File("i.png"));
    }
    catch(IOException e)
    {
    } 
```

当我执行此代码时，它会抛出一个 IOException 并说它无法读取输入文件。
有谁知道它为什么会抛出该异常 对不起，我所说的措辞不好，代码会抛出异常，然后您显然不能在代码的后面使用它（这就是我熬夜到 11:30 的结果）
谢谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:59:53.260

在您的代码中硬编码路径或将资源保留在同一个包中只是为了使访问变得容易，这是一种不好的做法。您可以提供硬编码路径或使用[getResourceAsStream](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)

getResourceAsStream 的文档说

> 查找具有给定名称的资源。资源是可以由类代码以独立于代码位置的方式访问的一些数据（图像、音频、文本等）。

这就是您想要的代码。

阅读[此](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)答案以更清楚地了解访问资源的文件方式与访问资源的类加载器方式。

因此，通过一些修改，您的代码在像这样更改时可以工作 -

```
public class TestIt {
public static void main(String[] args) throws IOException {

Image img = null;
img = ImageIO.read(TestIt.class.getResourceAsStream( "i.png" ));
img.getGraphics();
System.out.println(img);
} 
```

}

注意 getResourceAsStream 方法的使用。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:17:44.293

您收到空指针异常，因为您的**img**变量在执行 **img = ImageIO.read(new File("i.png"))**后保持为空。因为它保持为空，所以您在尝试在代码中进一步使用它时会遇到空指针异常。

这是您的解决方案：

```
BufferedImage img = ImageIO.read(new File("i.png")); 
```

问候，拉维

# android - 安卓记录广场视频

> ID：15987590
> 
> 赞同：13
> 
> 时间：2013-04-13T12:04:34.843
> 
> 标签：android, video

我目前正在尝试使用 MediaRecorder 和相机录制视频。但是对于我的应用程序，我需要以方形格式录制视频，就像 Instagram 对图片所做的那样，以独立于设备方向。

有什么方法可以自动裁剪和预览方形分辨率（fi 800x800）的视频，还是我必须手动裁剪视频（我在 Android 设备上有 FFMPEG）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T06:19:37.980

使用 ImageView，我可以设置正方形的高度和宽度（比如 100dip x 100dip）。然后使用`android:scaleType="centerCrop"`给了我一个被裁剪为正方形的图像，无论纵横比如何。

# html - 如何使用 HTML5 在辅助显示器上打开链接？

> ID：15987591
> 
> 赞同：-1
> 
> 时间：2013-04-13T12:04:38.000
> 
> 标签：html, browser, webkit

是否可以在使用 HTML5 连接到我的 PC 的辅助显示器上的新浏览器窗口中打开链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:12:23.793

我认为无法检查用户是否正在使用多个显示器，但您可以检查用户屏幕的宽度与高度的比较。如果它大于 1.9，你可以假设他有两个显示器。然后你可以尝试用大的左偏移打开第二个窗口，它有可能会跳转到第二个监视器。

即，如果有两个 1024x768 显示器，宽度为 2048。如果您将在左侧打开例如 1280 的窗口，则它应该在第二个屏幕上。当然，用户可以拥有不同分辨率的显示器，因此它可能并非在每种情况下都有效。

您还可以检查浏览器的宽度和位置，因为它可能有助于识别当前监视器的结束位置。

当然，这只是想法，我从未测试过。

# c++ - C ++中的手动或自动类型转换

> ID：15987592
> 
> 赞同：2
> 
> 时间：2013-04-13T12:04:46.563
> 
> 标签：c++, casting

我想知道，如果我使用 static_cast 而不是让编译器找出是否可以强制转换对象并自行执行，它是否会花费更少的编译时间？大约。我正在讲述 3000 行 c++ 代码。例如：

```
stack< const something*> myStack;
// ...
myStack.push(/* not const */ something*) 
```

对比

```
stack< const something*> myStack;
// ...
myStack.push(static_cast< const something*>(something*)). 
```

我在大学里学过 ada 语言，从那以后我有点困惑是应该进行强制转换还是让编译器来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:21:42.710

这里`static_cast<>`没有必要，因为正如您所猜测的，编译器将自己执行限定转换。

它只会使您的（有效）代码不必要地难以阅读，所以我不会使用它。当我阅读 a`static_cast<>`时，我预计会发生一些相关的事情，这*需要*演员表，需要我注意的事情，并要求我去弄清楚发生了什么以及为什么。这就像一个假警报。

**更喜欢使您的代码易于阅读和清洁**。

而且，如果您对编译时间有疑问，我个人不会为这种微优化而烦恼-它们也可能会*增加*编译时间（毕竟，编译器`static_cast`首先需要检查是否合法）。相反，请考虑您是否不能重新考虑类的设计以及它们之间的依赖关系——尽管不能在没有看到它们的情况下给出具体的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:32:07.067

不，它不会节省编译时间。

要找出原因，请考虑：

```
auto i = /* some expr */; 
```

相对：

```
int i = /* some expr */; 
```

在这两种情况下，编译器需要做的第一件事就是计算`some expr`. 然后，在这种`auto`情况下，它会简单地认为基类型是 of `i`，而在第二种情况下，如果基类型不是`int`，它将检查是否存在有效的转换。

同样的事情发生在您的情况下，无论您是否明确指定类型，编译器都*必须*计算表达式的类型，并且*必须*检查是否允许发生的转换（无论是否隐式）。

因此，您并没有提供帮助，而且您将代码弄得杂乱无章，从而降低了您自己和您的同事的可读性。

# c# - 使用C#查找磁盘0中的分区信息

> ID：15987595
> 
> 赞同：0
> 
> 时间：2013-04-13T12:05:15.767
> 
> 标签：c#

有什么方法可以使用 C# 在磁盘 0 中找到分区信息

我想要做的是在磁盘 0 中获取系统分区（操作系统所在的位置）。

我想要操作系统所在的分区号。

实际上我需要磁盘 0 中分区的 Diskpart 信息。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:09:09.097

像这样的东西

```
Path.GetPathRoot(Environment.SystemDirectory) 
```

您可以从 MSDN获取其他[环境属性。](http://msdn.microsoft.com/en-us/library/system.environment_properties.aspx)

# c++ - 在 C++ 中使用标准库时出现链接器错误

> ID：15987596
> 
> 赞同：1
> 
> 时间：2013-04-13T12:05:25.393
> 
> 标签：c++, gcc, linker, g++

我已经为这个编译问题苦苦挣扎了好几个小时，但我找不到任何解决方案：

我正在开发一个以“C with classes”风格编写并使用cmake的中型应用程序。我正在尝试将 a 添加`std::multimap`到我正在扩展的部分。我已将`<map>`和包含`<utility>`在相应的头文件中，此代码是我的最小示例：

```
std::pair<int,int> y(5,10);
cout << y.first << ", " << y.second << endl;

std::map<int,int> x;
//x.insert(y);
//x[2] = 4;
cout << x.empty() << endl; 
```

除非我启用任一注释行，否则这将按预期工作，在这种情况下，我会从链接器收到以下错误：

```
In function `std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::_M_insert_(std::_Rb_tree_node_base const*, std::_Rb_tree_node_base const*, std::pair<int const, int> const&)':
/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_tree.h:981: undefined reference to `std::_Rb_tree_insert_and_rebalance(int, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&)'
collect2: error: ld returned 1 exit status 
```

**我尝试过的事情**

*   一些研究指出这与 libc++ 与 libstdc++ 有关，但我认为不是，因为删除`insert()`确实有效。（我也不太明白区别）
*   上面的代码在独立程序中运行良好，使用`g++`（无选项）或`gcc -lstdc++`.
*   我尝试添加`-lstdc++`到 cmake `CMAKE_CXX_FLAGS`，但这似乎没有任何区别。
*   CMakeLists.txt 中的设置`set(CMAKE_CXX_COMPILER "g++")`似乎没有任何区别。

我想这一定与库或项目设置有关，但我会非常感谢一些关于从哪里开始寻找的建议。

# php - if/else 条件未正确执行以分配变量值

> ID：15987597
> 
> 赞同：0
> 
> 时间：2013-04-13T12:05:32.330
> 
> 标签：php, regex, if-statement, preg-match

我只是试图根据`if()`语句`OR`s 和与`$pattern`. 我尝试了几种直接匹配和其他方法。

我无法`$boxclr`根据`OR`'s 和`preg_match()`. 我究竟做错了什么？

```
$row['casetype_txt'] = $var; // $var = ADDICTION or GOTOBO etc..

$pattern = "/^".$_POST["loc_type"]."/"; // ADDI or GOTO etc... 

while ($row = @mysql_fetch_assoc($result)) 
{
///////////////////////////////////////////////////
///////////////////// TYPE 1 /////////////////////////
///////////////////////////////////////////////////
if ( // TYPE 1 
preg_match($pattern, $row['casetype_txt']) 
AND 
   $row['last_action_txt'] == 'A' 
OR $row['last_action_txt'] == 'B' 
OR $row['last_action_txt'] == 'C'
OR $row['last_action_txt'] == 'D'

)
{
 $boxclr = "type1"; // assigning class
} elseif ( // TYPE 1-2
preg_match($pattern, $row['casetype_txt']) 
AND
   $row['case_disp'] == 'C' 
OR $row['case_disp_txt'] == 'E' 
OR $row['case_disp_gp'] == 'F' 
OR $row['disp_act_txt'] == 'G' 

) { 
$boxclr = "type1-2"; // assigning class
}  
///////////////////////////////////////////////////
///////////////////// TYPE 2 /////////////////////////
///////////////////////////////////////////////////
elseif ( // TYPE 2
preg_match($pattern, $row['casetype_txt']) 
AND 
$row['last_action_txt'] == 'H' 
OR $row['last_action_txt'] == 'I' 
OR $row['last_action_txt'] == 'J'
OR $row['last_action_txt'] == 'K'
)
 {
$boxclr = "type2"; // assigning class
} elseif ( // TYPE 2-2
preg_match($pattern, $row['casetype_txt']) 
AND 
   $row['case_disp'] == 'C' 
OR $row['case_disp_txt'] == 'L' 
OR $row['case_disp_gp'] == 'M' 
OR $row['disp_act_txt'] == 'N' 

)
{ 
$boxclr = "type2-2"; // assigning class
} 
///////////////////////////////////////////////////
///////////////////// TYPE 3 ////////////////////////
///////////////////////////////////////////////////
elseif... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:56:23.037

试试这个，尽我所能优化，将重复项移到 s`preg_match()`之外`IF`并用于`in_array()`两个条件，这样您就不必进行多重比较。根本问题是您没有在条件语句中正确使用括号，因此排序/优先级已关闭。`preg_match()`此举解决了这个问题。

```
$row['casetype_txt'] = $var;

$pattern = '/^' . preg_quote($_POST['loc_type']) . '/'; // escape special chars

while ($row = @ mysql_fetch_assoc($result)) // I recommend not using @
{
    if (preg_match($pattern, $row['casetype_txt']))
    {
        if (in_array($row['last_action_txt'], array('A', 'B', 'C', 'D')))
        {
            $boxclr = 'type1';
        }
        else if ($row['case_disp'] == 'C' || $row['case_disp_txt'] == 'E' || $row['case_disp_gp'] == 'F' || $row['disp_act_txt'] == 'G')
        {
            $boxclr = 'type1-2';
        }
        else if (in_array($row['last_action_txt'], array('H', 'I', 'J', 'K')))
        {
            $boxclr = 'type2';
        }
        else if ($row['case_disp'] == 'C' || $row['case_disp_txt'] == 'L' || $row['case_disp_gp'] == 'M' || $row['disp_act_txt'] == 'N')
        {
            $boxclr = 'type2-2';
        }
        // ...else if ()...
    }
} 
```

# java - Mongodb (v2.4.0) $match 聚合不适用于日期范围

> ID：15987601
> 
> 赞同：3
> 
> 时间：2013-04-13T12:06:00.510
> 
> 标签：java, mongodb, mongodb-query, aggregation-framework

我正在使用 mongodb java 驱动程序通过 maven 存储库（如下 pom.xml 中）来查询日期范围与聚合框架之间的事务。java 驱动程序生成以下 $match 我尝试在 mongo 控制台上验证并发现它不起作用：

```
db.transactions.aggregate(
{ "$match" : 
    { 
        "created_at" : { "$gt" : { "$date" : "2001-04-12T12:00:00.000Z"} , "$lte" : { "$date" : "2020-04-13T12:00:00.000Z"}}
    }
}
) 
```

如果我删除 $date 块并将其替换为 ISOdate 函数和日期字符串，那么它似乎正在工作。我不明白为什么它在 java 中不起作用（$match JSON - 我已经从 eclipse 中获取并在 mongo 控制台中尝试，但它也不起作用。）

```
pom.xml
<dependency>
    <groupId>org.mongodb</groupId>
    <artifactId>mongo-java-driver</artifactId>
    <version>2.11.0</version>
</dependency> 
```

有谁知道为什么 $date 不能使用 MongoDB v2.4.0 处理聚合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-08-28T05:01:00.220

您必须在传递给 $match 聚合之前格式化日期。

```
Order.aggregate([
        {
          $match: {
            createdAt: {
              $gte: new Date(req.body.startDate),
              $lt: new Date(req.body.endDate)
            }
          }
        },
        {
          $lookup: {
            from: 'acbinstallerpayments',
            localField: "_id",
            foreignField: 'customerObjectID',
            as: 'installerPaymentDetails'
          }
        }
      ]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T13:08:21.533

我通过删除in 字段上的`""`&`$`前缀解决了这个问题。为您删除相同的, &`$date``$match``$date``$gt``$lte`

所以它应该看起来像

```
db.transactions.aggregate(
{ "$match" : 
         { 
          'created_at': { 
                         $gt: "2001-04-12T12:00:00.000Z", 
                         $lt: "2020-04-13T12:00:00.000Z"
                        }
         }
}); 
```

# objective-c - 使用 UIActivityViewController 分享视频

> ID：15987603
> 
> 赞同：2
> 
> 时间：2013-04-13T12:06:21.430
> 
> 标签：objective-c, xcode

是否可以在不使用任何自定义 UIActivity 的情况下与 UIActivityViewController 共享视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T13:17:06.297

不，不幸的是，目前还不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T12:08:27.293

在 iOS 7 中，您可以使用 UIActivityViewController 在 facebook 上分享视频。不过不确定其他服务。

# ajax - 在 Wordpress 中使用 AJAX 和设置 API 的最佳实践是什么？

> ID：15987610
> 
> 赞同：0
> 
> 时间：2013-04-13T12:07:01.447
> 
> 标签：ajax, wordpress, wordpress-theming

在我的 Wordpress Admin 中，我使用 Settings API 设置了我的主题选项。我正在尝试使用 Ajax 保存主题选项表单，以便页面不会刷新。我唯一需要添加的是这个 jQuery 代码：

```
$("#cgform").submit(function() {
var form_data = $('#cgform input').serializeArray();
$.post( 'options.php', form_data ).error(function() {
        alert('error');
    }).success( function() {
        alert('success');   
    });
return false; 
}); 
```

我想知道这样做是否安全？我知道设置 api 负责处理 nonce 字段，但我想确定这样做是否安全可靠。如果有人可以指导我将设置 api 与 Ajax 一起使用的“最佳实践”，那就太好了。

# c - 寻找最快的汉明距离 C 实现

> ID：15987611
> 
> 赞同：4
> 
> 时间：2013-04-13T12:07:09.217
> 
> 标签：c, performance, assembly, optimization, hamming-distance

我想找出两个相等长度的字符串有多少个不同的字符。我发现异或算法被认为是最快的，但它们返回以位表示的距离。我想要用字符表示的结果。假设“pet”和“pit”以字符表示的距离为 1，但 'e' 和 'i' 可能有两个不同的位，因此 xoring 返回 2。

我写的函数是：

```
// na = length of both strings
unsigned int HammingDistance(const char* a, unsigned int na, const char* b) {

    unsigned int num_mismatches = 0;
    while (na) {
        if (*a != *b)
            ++num_mismatches;

        --na;
        ++a;
        ++b;
    }

    return num_mismatches;
} 
```

它可以变得更快吗？也许使用一些较低级别的命令或实现不同的算法？

**系统：英特尔至强 X5650 上的 Gcc 4.7.2**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:54:35.673

循环展开怎么样：

```
while (na >= 8){
  num_mismatches += (a[0] != b[0]);
  num_mismatches += (a[1] != b[1]);
  num_mismatches += (a[2] != b[2]);
  num_mismatches += (a[3] != b[3]);
  num_mismatches += (a[4] != b[4]);
  num_mismatches += (a[5] != b[5]);
  num_mismatches += (a[6] != b[6]);
  num_mismatches += (a[7] != b[7]);
  a += 8; b += 8; na -= 8;
}
if (na >= 4){
  num_mismatches += (a[0] != b[0]);
  num_mismatches += (a[1] != b[1]);
  num_mismatches += (a[2] != b[2]);
  num_mismatches += (a[3] != b[3]);
  a += 4; b += 4; na -= 4;
}
if (na >= 2){
  num_mismatches += (a[0] != b[0]);
  num_mismatches += (a[1] != b[1]);
  a += 2; b += 2; na -= 2;
}
if (na >= 1){
  num_mismatches += (a[0] != b[0]);
  a += 1; b += 1; na -= 1;
} 
```

此外，如果您知道有很长一段相等的字符，您可以一次将指针转换为`long*`并比较它们 4 个，并且只有在不相等时才查看各个字符。此代码基于`memset`并且`memcpy`速度很快。它将字符串复制到`long`数组中以 1) 消除对齐问题，以及 2) 用零填充字符串到整数`long`s。当它比较每对`long`s 时，如果它们不相等，它会将指针转换为`char*`并计算不相等的字符。与上述类似，主循环也可以展开。

```
long la[BIG_ENOUGH];
long lb[BIG_ENOUGH];
memset(la, 0, sizeof(la));
memset(lb, 0, sizeof(lb));
memcpy(la, a, na);
memcpy(lb, b, nb);
int nla = (na + 3) & ~3; // assuming sizeof(long) = 4
long *pa = la, *pb = lb;
while(nla >= 1){
  if (pa[0] != pb[0]){
    num_mismatches += (((char*)pa[0])[0] != ((char*)pb[0])[0])
                    + (((char*)pa[0])[1] != ((char*)pb[0])[1])
                    + (((char*)pa[0])[2] != ((char*)pb[0])[2])
                    + (((char*)pa[0])[3] != ((char*)pb[0])[3])
                    ;
  }
  pa += 1;pb += 1; nla -= 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:27:35.197

如果字符串用零填充以始终为 32 字节并且它们的地址是 16 对齐的，您可以执行以下操作：（代码既未测试也未分析）

```
movdqa xmm0, [a]
movdqa xmm1, [a + 16]
pcmpeqb xmm0, [b]
pcmpeqb xmm1, [b + 16]
pxor xmm2, xmm2
psadbw xmm0, xmm2
psadbw xmm1, xmm2
pextrw ax, xmm0, 0
pextrw dx, xmm1, 0
add ax, dx
movsx eax, ax
neg eax 
```

但是如果字符串通常很小，它会做很多不必要的工作，并且可能不会更快。不过，如果字符串通常（接近）32 个字节，它应该会更快。

* * *

编辑：我在看到您更新的评论之前写了这个答案 - 如果字符串通常那么小，这可能不是很好。一个 16 字节的版本可能（也许）有用（有条件地运行第二次迭代，应该很好地预测它的分支，因为它很少被采用）。但是对于这么短的字符串，普通代码很难被击败。

```
movdqa xmm0, [a]
pxor xmm1, xmm1
pcmpeqb xmm0, [b]
psadbw xmm0, xmm1
pextrw ax, xmm0, 0
movsx eax, ax
neg eax 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T12:30:14.253

您可以通过对本机整数大小执行按位运算符来一次比较更多字节。

在您的代码中，您一次比较一个字节的相等性，但是您的 CPU 可以在一个周期内至少比较一个字，如果它是 x86-64，则可以比较 8 个字节。当然，确切的性能能力取决于 CPU 架构。

但是，如果您以 8 的步幅通过两个指针，在某些情况下肯定会更快。当它必须从主内存中读取字符串时，内存加载时间实际上将主导性能。但是如果字符串在 CPU 缓存中，您可能可以进行 XOR，并通过测试 64 位值中位更改的位置来解释结果。

可以使用从 0x33333333 而不是 0x55555555 开始的 SWAR 算法的变体来计算不为 0 的桶。

该算法将更难使用，因为它需要使用具有正确内存对齐的 uint64_t 指针。您需要涵盖剩余字节的序言和后记。也许你应该阅读编译器输出的程序集，看看它是否在你尝试更复杂的代码之前没有做一些更聪明的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T12:56:29.293

代替

```
if (*a != *b)
    ++num_mismatches; 
```

这在某些架构（使用 8 位字节）上会更快，因为它避免了分支：

```
int bits = *a ^ *b;
bits |= bits >> 4;
bits |= bits >> 2;
bits |= bits >> 1;
num_mismatches += bits & 1; 
```

# algorithm - 用 x 个红色顶点查找 2 个顶点之间的路径

> ID：15987614
> 
> 赞同：1
> 
> 时间：2013-04-13T12:07:35.953
> 
> 标签：algorithm, graph, directed-graph

我已经尝试了几种方法，但它们都以死胡同告终。问题：

给定一个 G=(V,E) 一个有向无权图，其中每个顶点都被着色为红色或蓝色。假设有来自 V 的顶点 s 和 t。描述一个算法，该算法将找到 s 和 t 之间的路径，该路径将包含最少的红色顶点。解释算法，证明它并展示它的复杂性。

我想到了两种方法并放弃了两种方法：

1.  使用按颜色排序的邻接列表（蓝色第一个红色最后一个）并运行 DFS - 坏主意
2.  将红色顶点的每条边的权重设置为 2，将蓝色顶点设置为 1，然后运行 ​​Dijkstra - 找到了一个反例

我真的很乐意在正确的方向上获得一些帮助。我不想得到完整的答案，而是得到点击/提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:27:07.773

考虑为任何到达红色顶点的边设置 weight=1。然后证明从 s 出发的具有*n 个*红色顶点的路径的成本是*n*或*n-1*，具体取决于 s 的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:31:52.410

好吧，在我向他展示了加权的方法之后，我找到了这个问题的答案，不是我，而是我的一个朋友。

我们将使用 2 个队列，而不是在 BFS 算法中使用一个队列：一个用于蓝色顶点，一个用于红色顶点。

我们检查 S 是什么颜色并将其添加到正确的队列中，只要蓝色顶点的队列不为空，我们就从它中出列并继续常规 BFS，如果遇到红色顶点，我们将其加入红色队列，如果我们找到一个蓝色顶点，我们将它排入蓝色队列。如果蓝色队列为空，我们从红色队列中出列。

最终，数组 pi[|V|] 将保持对顶点 v 的反向表示，其中红色顶点最少。

由于 BFS 算法并没有对其数据结构进行真正的更改，因此正确性证明成立，并且时间复杂度为 O(|V|+|E|)，就像 BFS 中一样。

谢谢你们的帮助！

# php - PHP文件上传外部url

> ID：15987615
> 
> 赞同：0
> 
> 时间：2013-04-13T12:07:37.990
> 
> 标签：php, forms, url, submit, external

我已经构建了一个表单，您可以在其中添加图像。不幸的是，我无法在 PHP 中调用“move_uploaded_file”，因为服务器正在运行 PHP 安全模式并且无法修改它（我已经检查过）。因此，我将表单提交到处理文件上传的 OWN 服务器。

但是，在我自己的服务器上，该文件；没有找到。我认为这与调用外部 url 的表单有关。我知道这是因为

```
echo $_FILES['uploadFile']['name'] ."<br>"; 
```

只返回一个空行。

表格本身是：

```
<form action="http://ejw.patrickh.nl/load.php" method="get" enctype="multipart/form-data" onsubmit ="return checkInput();"> </form> 
```

并包含几个输入按钮。

底线：我自己服务器上的表单完美地提交了文件，但是当我使用另一个站点上的表单时，执行上述操作；没有找到文件。

这可以解决吗？如果可以；如何？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:27:00.643

您必须使用`method="post"`提交文件。

也`enctype`只能使用单独的属性，如果`method="post"`.

# coffeescript - Spinejs路由不保存状态

> ID：15987616
> 
> 赞同：1
> 
> 时间：2013-04-13T12:07:53.417
> 
> 标签：coffeescript, history, spine.js

我试图让状态进入我的脊椎应用程序。单击时，会将一个项目添加到列表中。然后创建一个 url 并导航到，然后呈现列表。但是，当我使用浏览器的“返回”功能时，列表不会变回以前的状态。如何让它工作？

这是相关代码，我省略了似乎无关紧要的部分，但如果需要更多，我会提供。

```
class App extends Spine.Controller  
  constructor: ->
    super
    @products = new Products
    @filters = new Filters

    Filter.bind 'filterAdded', => @navigateAfterFilterChange()
    Filter.bind 'filterRemoved', => @navigateAfterFilterChange()

    Spine.Route.setup( history: false )

  renderAll: ->
    @products.render()
    @filters.render()

  navigateAfterFilterChange: ->
    Spine.Route.navigate( encodeURIComponent( JSON.stringify( _.map( Filter.active_filters, ( filter ) -> { t: filters.type, v: filters.value } ) ) ) )

class Filter extends Spine.Model
  listen: => #This is used to make the right list item listen to a click event
    $("'a[data-cid=\"#{ @id }\"]'").one 'click', @triggerFilter

  triggerFilter: (e) =>
    e.preventDefault()
    filter = Filter.find( $( e.currentTarget ).attr( 'data-cid' ) )
    if @active
      @active = false
      Filter.active_filters =  _.reject Filter.active_filters, (x) -> ( x.type is filter.type and x.value is filter.value )
      @save()
      Filter.trigger 'filterRemoved', @
    else
      @active = true
      Filter.active_filters.push filter
      @save()
      Filter.trigger 'filterAdded', @

class Filters extends Spine.Controller
  constructor: ->
    super
    @utils = new GeneralScripts
    @createFilters()
    @listenForTypeActivation()
    @routes
      "": ( params ) ->
        @render()
      "*glob": ( params ) ->
        @render() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:40:06.933

不确定，但看起来您可能需要使用 render() 发送参数

```
class Filters extends Spine.Controller
  constructor: ->
    super
    @utils = new GeneralScripts
    @createFilters()
    @listenForTypeActivation()
    @routes
      "": ( params ) ->
        @render(params)
      "*glob": ( params ) ->
        @render(params) 
```

当然，您还需要在渲染方法中处理参数

# java - Java 套接字 TCP 拆解

> ID：15987617
> 
> 赞同：0
> 
> 时间：2013-04-13T12:07:55.043
> 
> 标签：java, sockets, tcp

创建套接字并建立连接后，我使用 BufferedReader 和 PrintWriter 从套接字写入/读取。

```
Socket s = new Socket(ip, port);
BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
PrintWriter out = new PrintWriter(s.getOutputStream()); 
```

当我使用完套接字时，我将其关闭。

```
s.close(); 
```

这将导致发送 TCP fin 并留下半开的 TCP 连接。有什么方法可以检测客户端/服务器是否关闭了连接结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:14:23.177

> 这将导致发送 TCP fin 并留下半开的 TCP 连接。

不完全的。它将留下一个半开放的 TCP 连接，如果它接收到更多数据，它将发出重置。

> 有什么方法可以检测客户端/服务器是否关闭了连接端？

如果您已经关闭了您的，则不会。如果你刚刚发出了写关闭，你可以一直读到 EOS，它会告诉你对等体关闭，然后关闭套接字。除非你真的必须同时关闭，否则没什么意义。

# php - Codeigniter 路由 ID

> ID：15987619
> 
> 赞同：1
> 
> 时间：2013-04-13T12:08:04.153
> 
> 标签：php, codeigniter, routing

我已经建立了一个网页，在它的产品页面中，它的 url 有这个原型

[http://www.example.com/products/show/some-really-nice-product/512](http://www.example.com/products/show/some-really-nice-product/512)

url 的最后一位是产品 id，它的唯一目的是在数据库中搜索产品。

但是，是否有可能使用路由来隐藏该部分并且仍然可以通过其 id 搜索产品？

像 [http://www.example.com/products/show/some-really-nice-product/](http://www.example.com/products/show/some-really-nice-product/) ??

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:27:14.470

如果您不想在 URL 中输入数字，则以后不能按数字/ID 搜索 :)

因此，您可以在表中添加一个 VARCHAR 字段，例如“urlized”，并使用“some-really-nice-product”作为给定 ID 的内容（您需要“urlize”所有产品名称并制作它们独特的）。不要忘记索引您的新字段...

然后，您可以使用这个对 SEO 非常友好的 URL 访问产品页面（以“.html”结尾）：

```
http://www.example.com/products/show/some-really-nice-product.html 
```

...通过添加到 CodeIgniter 的路由，就像这样：

```
$route['^products/show/(.*).html'] = 'products/show/$1'; 
```

在您的控制器/模型中，在数据库中搜索传递给“show”方法的字符串，而不是 ID

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T12:31:31.063

如果您隐藏 id，您将无法再从 url 中检索它

如果您想隐藏它，只需执行以下操作：

```
$route['products/show/(:any)'] = "products/show/$1/$2"; 
```

# c++ - 我可以制作一个不打开终端窗口的 OS X Glut 应用程序吗？

> ID：15987622
> 
> 赞同：0
> 
> 时间：2013-04-13T12:08:54.957
> 
> 标签：c++, xcode, macos, glut

我有很多用 XCode 编写的简单 C++ 程序，使用 OpenGL 和 Glut 来可视化科学数据。它工作得很好，但有一个小烦恼：每次我从 XCode 外部运行一个二进制文件时，它都会打开一个终端窗口。这意味着我得到了终端窗口的硬壳堆积，必须在使用后清理。

有没有办法防止这种情况发生？我希望快速解决一个非常小的问题，所以任何需要我学习 Objective C 或一些花哨的 GUI 创建工具的东西都不是我想要的。我只是想知道是否有一种方法可以编译我现有的 C++ Glut 应用程序，以便在您单击图标时不会出现终端窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:16:23.643

有点...基本上，您需要某种 OS X 包装器来包含二进制文件。您可以使用 Automator 或 AppleScript 或使用[DropScript 之](http://www.wsanchez.net/software/)类的工具来执行此操作，该工具旨在封装 unix 二进制文件。

否则，解决方案是创建一个最小的 Objective-C 程序，然后她会从其中取出 unix 二进制文件，这样当它终止时就不会留下任何残留物。

# r - 启动 R3.0.0 和 RStudio 时出现错误消息

> ID：15987625
> 
> 赞同：0
> 
> 时间：2013-04-13T12:09:24.397
> 
> 标签：r, rstudio

我刚刚在 64 位 Windows 7 中下载了 R3.0.0。

当我单击 R 图标时，R 启动但出现以下错误和警告

```
Error in loadNamespace(name) : there is no package called ‘modeltools’
During startup - Warning message:
unable to restore saved data in .RData 
```

当我尝试启动 RStudio 时，它不会*启动*，但会说

```
The R session had a fatal error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T12:41:56.487

以下是RStudio 支持的当前[主页的屏幕截图：](http://support.rstudio.org/help/)

![在此处输入图像描述](https://i.stack.imgur.com/1wEeL.png)

一个简单的重新安装应该可以解决您的问题。请务必通过检查其 MD5 哈希来验证下载文件的完整性。我不是 Windows 用户，所以我不能特别推荐任何特定的软件来执行此操作。我想[微软的 FCIV](http://support.microsoft.com/kb/841290)是一个很好的起点（在[这里](http://pcsupport.about.com/od/software-tools/ht/file-checksum-integrity-verifier.htm)和[这里](http://pcsupport.about.com/od/software-tools/ht/verify-file-integrity.htm)阅读）。但是，我敢肯定也有很多 GUI 替代品。

在 RStudio[下载页面](http://www.rstudio.com/ide/download/desktop)，您会注意到列出了正确的 MD5 哈希值以及正确的文件大小。

* * *

至于您关于 .RData 文件的错误，这听起来像是应该删除的损坏的 .RData 文件。很可能，在某处，当 R 询问您是否要保存当前会话时，您单击“是”（而不是您明确决定保存会话，从而给文件一个正确的名称）。由于文件前面有一个点，您可能需要启用“显示隐藏的文件和文件夹”才能找到它。

* * *

另外，请记住，在重新安装 R 之后，您还必须重新安装所有已安装的软件包才能使用它们！让 R 和 RStudio 备份运行后，尝试以下操作：

```
update.packages(checkBuilt = TRUE) 
```

重新安装您从 CRAN 安装的所有软件包。如果您从 GitHub 和其他地方安装了软件包，则需要手动重新安装。

# java - 添加到 hashmap 需要很长时间

> ID：15987629
> 
> 赞同：6
> 
> 时间：2013-04-13T12:09:46.177
> 
> 标签：java

我在我的 java 程序中遇到了几行问题，这花费了太多时间（大约 20 秒），这对我来说似乎很奇怪。

这是线条

```
 Map<URL, Integer> res2 = new HashMap<>();
 for (URL url : res) {
     res2.put(url, null);
 } 
```

其中 res 定义如下：

```
List<URL> res = new ArrayList<>(); 
```

在我的程序中， res.size() ~= 1500

你知道我的问题可能来自哪里吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-13T12:12:34.283

执行DNS解析的`hashCode()`方法。`java.net.URL`该类`URL`不适合在 a 中使用`HashSet`或作为 a 中的键`HashMap`。使用字符串或`java.net.URI`.

这里有一些背景：

*   [Michael Scharf：java.net.URL.equals 和 hashCode 建立（阻止）互联网连接....](http://michaelscharf.blogspot.com/2006/11/javaneturlequals-and-hashcode-make.html)
*   [Eishay Smith：Java 的 URL 小秘密](http://www.eishay.com/2008/04/javas-url-little-secret.html)（RobAu 在对此答案的评论中链接）

# jquery - Datatables ajax 源但仅限本地（DOM 样式）过滤器

> ID：15987631
> 
> 赞同：0
> 
> 时间：2013-04-13T12:10:02.633
> 
> 标签：jquery, datatables

这是关于使用 JQuery Datatables 插件：

我想使用我的服务器端源，但就过滤器而言，如果您知道我的意思，我更愿意将其保留为“DOM 方式”.. 即无需向服务器发出新的 XHR 请求，而是简单地工作关于已经填充的内容。

任何推荐/普遍接受的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:00:07.493

这可能不是做您想要实现的目标的正确方法，但是当我一直在使用 dataTables 时，我开始使用 CSV 文件在页面首先加载时将表填充到 DOM，然后在完成初始化时数据表。所以只有一个请求。我现在正在做同样的事情，但使用 Google 电子表格而不是 CSV 文件，效果很好！

我会指出，我的桌子非常基本，而且不是很大。

但是我会通过使用 AJAX 首先从您的 php 页面中检索数据，创建一个 HTML 表，然后初始化数据表来解决这个问题。

就像是.....

```
$.ajax({
   type:'GET',
   url:'../yourdatasource.php',
   success: function(data){
      // Your code to create the HTML table
      $('#yourTable').dataTable();
   }
}); 
```

正如我所说，可能有更好的方法可以做到这一点，但我喜欢保持简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T10:56:19.717

我想到了这个，因为我需要这个。但几个小时后，我找到了解决方案。数据表概念有两个方面。左侧是 DOM 处理，右侧是服务器端。这两者的区别是...

DOM 处理：
- 加载源数据
- 处理源数据

服务器端处理
- 加载源数据
- 所有交互都作为 XHR 请求发送。
（来源：[Enhancing-HTML-tables-using-a-JQuery-DataTables-pl](http://www.codeproject.com/Articles/194916/Enhancing-HTML-tables-using-a-JQuery-DataTables-pl) “在这种模式下，插件只处理与用户的交互，所有处理都在服务器端完成。”）

所以你不能将这两个方面结合在一起，因为 DOM 使用已加载的数据，而服务器端使用实时数据（数据库）进行操作。如果您想在服务器端处理中启用此功能，我认为这是个坏主意，因为在 DOM 中是“过滤”，而在服务器端是“搜索”。如果他们之间最大的区别。如果用户想要“过滤”数据，则无法确保正确的结果。

如果你有很多记录，你应该使用服务器端。
否则加载数据并使用 DOM 工作。

试试这个..
[http://datatables.net/ref#bServerSide](http://datatables.net/ref#bServerSide)

我希望这对你有帮助

祝你有美好的一天

**编辑**

**如果要从远程服务器加载数据并过滤已通过 DOM 过滤器加载的数据，可以使用 "sAjaxSource": "xhr.php" 加载数据，但不指定/启用 bServerSide。它工作正常。**

[http://datatables.net/ref#sAjaxSource](http://datatables.net/ref#sAjaxSource)

# node.js - Node.js 将函数委托给导入的模块

> ID：15987633
> 
> 赞同：0
> 
> 时间：2013-04-13T12:10:16.217
> 
> 标签：node.js, events, eventemitter

目前我有一个具有以下形式的 Node.js 模块：

```
var events = require('events');
var emitter = new events.EventEmitter();

function emitSomething() {
    emitter.emit("event");
}
exports.emitSomething = emitSomething;
exports.on = emitter.on; 
```

但是，通过注册的任何回调`on`在我调用时都不会被调用`emitSomething`。

我可以通过将最后一行更改为

```
exports.on = function(event, callback) { emitter.on(event, callback); }; 
```

有没有理由我不能将 on 函数委托给另一个模块中定义的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:35:59.500

这是一个常见的 JS 错误。请注意，该`on`方法取决于`this`（`emitter`在您的示例中）。但是，您导出的只是函数本身，因此`emitter`当您稍后调用它时，它的上下文 ( ) 会丢失。

这是此问题的一个小示例：

```
var someObj = { 
    doSth: function() { console.log(this) } 
};
someObj.doSth(); // "Object { ..."

var doSth = someObj.doSth;
doSth(); // "Window { ..." 
```

当我调用`doSth`as 的方法时`someObj`，按预期`this`引用。`someObj`在我将函数复制到 后`doSth`，`this`在浏览器中引用它的新上下文，即全局上下文`Window`。这就是你的情况。

正如您已经提到的，您必须将`emitter`上下文绑定到函数。这也可以这样做：

```
exports.on = emitter.on.bind(emitter); 
```

# python - 已部署应用程序上的主页（仅该页面）为空白

> ID：15987635
> 
> 赞同：1
> 
> 时间：2013-04-13T12:10:26.067
> 
> 标签：python, html, deployment

我有一个多页面的应用程序，在 python 2.7 上运行。该应用程序在本地工作得很好，但是一旦我部署它，在我登录我创建的登录页面后，主页（斜杠后没有任何内容）完全空白。我可以在应用程序的其他页面中输入地址，它们就可以正常显示（如果我已登录）

URL 是 hoosierhillsfoodbank.blogspot.com 现在唯一的用户是 admin，admin。

涉及大量代码，所以我只会发布我认为可能相关的内容。这是 HTML 页面的顶部：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Volunteer Kiosk | Home</title>
<link href="../static/style.css" rel="stylesheet" type="text/css" />
</head> 
```

**这是登录后使主页加载的代码**

```
class LoginPage(BaseHandler):

    def get(self):
        if self.session.get('user'):
            self.redirect('/') #already logged in, go to homepage
        else:
            doRender(self, 'login.html')

    def post(self):
        in_username = self.request.get('username')
        in_password = self.request.get('password')

        self.session['user'] = '' #logout user if still logged in
        if in_password == '' or in_username == '':
            doRender(self, 'login.html', 
                     {'error': 'Please specify Username and Password'})
            return

        result = User.all().filter('username =', in_username).get()

        if result and security.check_password_hash(in_password, result.password) :
            logging.info('session[user] ='+ self.session['user'])
            self.session['user'] = in_username
            self.session['usertype'] = result.usertype
            self.session['msg'] = 'Welcome '+self.session['user']
            self.redirect('/')
        else:
            doRender(self, 'login.html', 
                     {'error': 'Incorrect Username or Password'}) 
```

**一些使“/”进入主页的代码**

```
def doRender(handler, tname='home.html', values={}):

    temp = os.path.join(os.path.dirname(__file__),
                    'templates/' + tname)
    if not os.path.isfile(temp):
        return False

    #make a copy of values and add the path
    newval = dict(values)
    newval['path'] = handler.request.path

    #check if user logged in
    val = handler.session.get('user')
    newval['user'] = val

    #if logged in, add userlinks
    if handler.session.get('user') and handler.session.get('usertype') < 2:
        newval['userlinks'] = [('/','Home'),
                             ('/Programs','Programs'),
                             ('/Volunteers','All Volunteers'),
                             ('/Individuals','Individuals'),
                             ('/ServiceLearners','Service Learners'),
                             ('/Groups','Groups'),]
        if handler.session.get('usertype') == 0:
            newval['userlinks'].append(('/users', 'Users'))

    #check if there's a msg, add it, then delete it
    newval['msg'] = handler.session.get('msg')
    handler.session['msg'] = ''

    handler.response.write(template.render(temp, newval))
    return True 
```

**当然，处理程序**

```
class MainPage(BaseHandler):
    def get(self):
        #check if logged in, otherwise redirect
        if self.session.get('user'):
            doRender(self, 'home.html')
        else:
            self.redirect('/login')

class Home(BaseHandler):
    def get(self):
        if self.session.get('user'):
            time.sleep(.5)
            doRender(self, 'home.html') 
```

任何帮助，将不胜感激！谢谢

# java - 我收到一个名为 The constructor main(Display) is undefined 的错误

> ID：15987637
> 
> 赞同：2
> 
> 时间：2013-04-13T12:10:29.570
> 
> 标签：java, eclipse

这是主要课程

```
 package com.First.Game;

import javax.swing.JFrame;

public class main {

    public static Display f = new Display();
    public static int width =600;
    public static int height = 400;
    public static void main(String args[]){
f=new Display();    

f.setSize(width, height);
f.setResizable(false);
f.setVisible(true);
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
f.setTitle("Sticky Zombies");
f.setLocationRelativeTo(null);
System.out.println("STICKY ZOMBIES is running on a main window");

    }
} 
```

这是类显示

```
 package com.First.Game;

import javax.swing.*;

public class Display extends JFrame{
public main panel;

public Display(){
    panel= new main(this);

}
} 
```

我是初学者，我真的需要帮助我基本上完全从我所看到的和我观看的视频中复制了一些代码，他可以完美地运行它（这不是我观看的完整代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T12:17:11.490

您还**没有为您的主类定义任何构造函数。**在这种情况下，您的类将**只有默认构造函数**（零参数构造函数）。但是在您的代码中，`panel= new main(this);`您试图调用**不存在的参数化构造函数**。因此你得到错误。

用这个替换它：`panel= new main();`

或者

在主类中显式定义构造函数，如下所示：

```
public main(Display disp) {
this.display = disp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T12:21:53.810

```
package com.First.Game;

public class Display {

public main panel;

          public Display(){
             panel= new main(this);
           }

public static void main(String[] args) throws Exception {

       Display obj = new Display();

   }
} 
```

并将类的名称更改为`main`其他名称

# jquery - jQuery - 设置 div 高度等于 div 宽度

> ID：15987638
> 
> 赞同：5
> 
> 时间：2013-04-13T12:10:38.120
> 
> 标签：jquery

我正在尝试制作一个具有正方形网格的响应式网站。所以我需要每个 div 的高度（具有“main”类）在调整大小时与 div 的宽度相同。我对 jQuery 很陌生，所以我希望有人能告诉我我在这里做错了什么。

```
var divWidth = $('.main').width(); 

$(window).resize(function(){
    $('.main').height() = divWidth;
}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T12:18:54.873

您不应该`divWidth`在 resize() 函数的范围之外声明，因为触发 resize 事件时不会更新该值。此外，还有可能存在多个`.main`元素的风险。要么使用 ID，要么遍历所有类（如果有多个实例）。

尝试这个：

```
$(window).resize(function(){
    // If there are multiple elements with the same class, "main"
    $('.main').each(function() {
        $(this).height($(this).width());
    });

    // Or you can switch to using an ID
    $('#main').height($('#main').width());
}).resize(); 
```

您再次触发 resize() 事件以确保在加载时设置大小。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T12:12:48.670

你可以做：

```
var divWidth = $('.main').width(); 

$(window).resize(function(){
    $('.main').height(divWidth);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T12:14:50.607

尝试

```
var divWidth = $('.main').width(); 

$(window).resize(function(){
    $('.main').height(divWidth);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-13T12:14:55.123

尝试这个：

```
var divWidth = $('.main').width(); 

$(window).resize(function(){
    $('.main').height( divWidth );
}); 
```

请注意，在`height()`不带参数的情况下调用时会给你高度，但是带参数时，它会改变对象的高度；）

# http - 进行 Web 身份验证（HTTP 状态代码）的推荐工作流程是什么？

> ID：15987641
> 
> 赞同：2
> 
> 时间：2013-04-13T12:11:05.280
> 
> 标签：http, authentication, web-applications, http-status-codes

我正在编写一个需要用户登录的 Web 应用程序。正如您可能认识到的那样，有许多工作流程可以响应无效的用户凭据。大多数浏览器都能够在其凭证存储中存储（接受）用户凭证。

我最初的问题分为两部分：

1.  如果站点需要登录用户，应该向用户发送哪个 HTTP 状态代码？我不是指用户自己请求登录页面的情况。
2.  如果他/她输入了无效的凭据，应该向用户发送哪个 HTTP 状态代码？

我猜 HTTP 401 仅适用于通过浏览器提示进行的“旧式”身份验证。我正在使用自己的登录页面来摆脱那些浏览器提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:04:49.840

认证有很多标准。您可以在此处找到几个示例： [http](http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html) : //docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html 您描述的错误代码 401 用于基本身份验证。它不旧:)。

当您使用自己的登录表单时，请遵循标准表单身份验证流程：

1.  如果用户在没有身份验证的情况下访问受保护的资源，则重定向到登录页面（HTTP 代码 302）
2.  显示登录页面（HTTP 代码 200）。提交用户名到专用 URL（一般是 j_security_check）
3.  身份验证成功后重定向回原始受保护资源（HTTP 代码 302）
4.  身份验证失败后，再次显示登录页面并显示错误代码（HTTP 代码 200）
5.  如果用户在身份验证后访问受保护的资源，则显示该资源（HTTP 代码 200）

要区分经过身份验证的会话和未经过身份验证的会话，您可以使用 HTTP cookie。建议使用 GUID 而不是任何用户信息（例如用户名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:20:04.170

401 Unauthorized / 407 Proxy Authentication Required 是唯一相关的状态代码。

仅当您拒绝访问任何资源时才应显示 401 Unauthorized - 如果您正在重定向或向其显示登录页面，则不应显示。

407 就像 401 一样，除了您希望 auth 由外部服务处理并且您希望提供 Proxy-Authenticate 标头字段。

更典型的是，您向用户显示 200 OK 和登录页面。

# android - 从 MySQL 数据库中添加/删除某些内容后，ListView 不会刷新

> ID：15987644
> 
> 赞同：0
> 
> 时间：2013-04-13T12:11:33.093
> 
> 标签：android, mysql, database, listview, refresh

我编写了一个 Android 应用程序来管理[MySQL数据库，并使用一些](http://en.wikipedia.org/wiki/MySQL)[PHP](http://en.wikipedia.org/wiki/PHP)类连接/添加/删除行，这些类由后台 AsyncTask 中的 HttpRequest 调用。我只想要一件简单的事情，比如：

主屏幕 -> 添加屏幕 -*按添加按钮*-> 主屏幕

但是当我在数据库中添加一行时，列表视图不会刷新。但是，如果我重新启动应用程序，一切都会重新创建，并且我的列表视图会显示添加的行。

要从数据库中获取信息，我使用以下代码：

```
class LoadAllBooks extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoadAllActivity.this);
        pDialog.setMessage("Loading authors. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * Getting all books from a URL
     * */
    protected String doInBackground(String... args) {

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_books, "GET",
                params);

        // Check your log cat for JSON reponse
        Log.d("All Authors: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // Products found
                // Getting Array of Products
                products = json.getJSONArray(TAG_BOOKS);

                // Looping through all products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each JSON item in variable
                    String author = c.getString(TAG_AUTHOR);

                    // Creating a new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // Adding each child node to HashMap key => value.
                    // map.put(TAG_ID, id);
                    map.put(TAG_AUTHOR, author);

                    // Adding HashList to ArrayList
                    booksList.add(map);
                }
            } else {
                // No products found
            }
        }
        catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * After completing a background task, dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // Dismiss the dialog after getting all products
        pDialog.dismiss();

        // Updating UI from the background thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                SimpleAdapter adapter = new SimpleAdapter(
                        LoadAllActivity.this, booksList, R.layout.menu_row,
                        new String[] { TAG_ID, TAG_AUTHOR }, new int[] {
                                R.id.id, R.id.book });
                // Updating listview
                setListAdapter(adapter);
            }
        });
    } 
```

我知道更新时有一种方法可以更新它`booksList`，但是我尝试了许多不同的方法，这并不是我认为的最简单的方法。

我想解决它的方法就是重新启动主要活动，调用这个 onCreate(Bundle ...) 方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Hashmap for ListView
    booksList = new ArrayList<HashMap<String, String>>();

    // Loading products in the background thread
    new LoadAllBooks().execute();

    // Get listview
    ListView lv = getListView();

    // On seleting single product
    // Launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int pos,
                                long id) {
            String author = ((TextView) view.findViewById(R.id.book))
                            .getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                               AuthorTitlesActivity.class);
            // Sending pid to next activity
            in.putExtra(TAG_AUTHOR, author);

            // Starting a new activity and expecting some response back.
            startActivityForResult(in, 100);
        }
    });
} 
```

有没有办法实现这个解决方案？

# bison - Shift 减少 Bison 语法中的冲突？

> ID：15987649
> 
> 赞同：0
> 
> 时间：2013-04-13T12:12:37.817
> 
> 标签：bison, yacc

我有以下 Bison 语法文件，当我执行“bison -d filename.y”时，我收到一条消息

冲突：5 Shift/Reduce。

实际上他们是 8 个，我设法摆脱了 3 个，但不知道其余的在哪里，我猜这与 COMMA 有关，但是嗯..anyidea 我的语法定义有什么问题。解析器应该解析 Prolog 语法的一部分

```
%{#include <math.h>
#include <stdio.h>
void yyerror(char *message);
%}
%start program
%token ATOM VAR NUM

%token DOT COMMA
%token PARENTLEFT PARENTRIGHT RSQRBRACKETS LSQRBRACKETS
%token IF CUT IS PIPE
%token SMALLEREQ GREQ SMALLER GREATER EQ
%token PLUS MULTIP DIVIDE MINUS MOD
%token Aus

%left PLUS MINUS
%left DIVIDE MULTIP
%left COMMA

%%
program :           program rule                { printf("programm fertig gelesen \n");} 
        |       program fact                { printf("programm fertig gelesen \n");} 
        |       rule                        { printf("programm fertig gelesen \n");} 
        |       fact                        { printf("programm fertig gelesen \n");}
;

fact :              struct DOT                  { printf("Fakt gelesen\n\n\n"); }
;

rule :              struct IF subProbList DOT   { printf("Regel mit %d Teilprobleme    gelesen\n\n\n", $3); }
;

struct :            ATOM PARENTLEFT parameterList PARENTRIGHT  {printf("%s mit %d    Variablen\n",$1,$3); $$=$3;}
;

subProbList :       subProb                     {$$ = 1; }
        |       subProbList COMMA subProb   {$$ = $1 + 1;}
;

subProb :           struct | assignmentTerm | comparison | CUT { printf("CUT Op\n"); }
;

assignmentTerm :    exp IS exp                  { printf("is mit %d Variabeln\n", ($1 + $3)); $$ = $1 + $3; }
;

exp :               num                         { $$ = 0; }
    |           var                         { printf("Variable %s \n", $1); $$ = 1; } 
    |           exp operation exp           { printf("left exp is %d right exp is %d\n",$1,$3); $$ = $1 + $3;} 
    |           PARENTLEFT exp PARENTRIGHT         { $$ = $2;}
;

parameter :         var                         { printf("Variable %s\n",$1 ); $$ = 1; }
        |       struct                      { $$ = $1; }
        |       list                        { $$ = $1; }
;

parameterList :     parameter                   { $$ = $1;}
            |   parameterList COMMA parameter {$$= $1 + $3;}
;

operation :         PLUS | MINUS | MULTIP | DIVIDE | MOD
;

comparison :        var comparisonOp num        { printf("Variable %s \n", $1);

                                                printf("Vergleich mit 1 Vars\n" );
                                                $$=1;   
                                            }
        |       num comparisonOp var        {  
                                                printf("Variable %s \n", $3);
                                                printf("Vergleich mit 1 Vars\n" );
                                                $$=1;   
                                            }

        |       var comparisonOp var        {   printf("Variable %s \n", $1);
                                                printf("Variable %s \n", $3);
                                                printf("Vergleich mit 2 Vars\n" );
                                                $$=2;   
                                            }
        |       num comparisonOp num        {  
                                                $$=0; 
                                                printf("Vergleich mit 0 Variablen \n");

                                            }
;

comparisonOp :      EQ | GREATER | SMALLER | GREQ | SMALLEREQ
;

list :              LSQRBRACKETS varList RSQRBRACKETS       {$$ = $2;}
    |           LSQRBRACKETS elementList RSQRBRACKETS   {$$ = $2;}
    |           LSQRBRACKETS RSQRBRACKETS               {$$ = 0;}
;
varList :           var PIPE var                {   printf("Variable %s \n", $1);
                                                printf("Variable %s \n", $3);
                                                $$ = 2;
                                            }
;
elementList :       ATOM                        { $$ = 0;}
            |   var                         { printf("Variable %s \n", $1); $$ = 1; } 
            |   elementList COMMA var       { $$ = $1 + 1; } 
            |   elementList COMMA ATOM      { $$ = $1; }
;

num : NUM | MINUS NUM
;
var : VAR | MINUS VAR
;
%%

int main(int argc, char **argv){
    yyparse();
    return 0;
}

void yyerror(char *message) {
    printf("How about no?Well,no,that word doesnt belong to this classy language! \n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:34:43.033

如果您将定义更改`exp`为

```
exp :           num    
    |           var
    |           exp PLUS exp
    |           exp MINUS exp
    |           exp MULTIP exp
    |           exp DIVIDE exp
    |           exp MOD exp
    |           PARENTLEFT exp PARENTRIGHT
; 
```

即在`operation`内部展开（并删除它）`exp`并添加

```
%left MOD 
```

在其他运算符中，即定义其相对于其他运算符的优先级，那么您应该没问题。

# c# - 正则表达式在第一个空格之后获取所有内容

> ID：15987650
> 
> 赞同：17
> 
> 时间：2013-04-13T12:12:43.000
> 
> 标签：c#, regex, string

在第一个空格之后获取字符串中所有单词的语法是什么。例如，鲍勃漂亮的房子。所以结果应该是没有引号的“漂亮的房子”。

`([^\s]+)`给我所有 3 个单词，由 ; 分隔

`,[\s\S]*$ >`不编译。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-13T12:28:19.917

我真的在寻找最短的代码。以下完成了这项工作。多谢你们

```
\s(.*) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T12:14:49.903

我认为应该这样做：

```
[^ ]* (.*) 
```

它允许 0 个或更多不是空格的元素，而不是单个空格，并选择该空格之后的任何内容。

***C# 用法***

```
var input = "bobs nice house";

var afterSpace = Regex.Match(input, "[^ ]* (.*)").Groups[1].Value; 
```

`afterSpace`是`"nice house"`。

要在结果字符串中也获得第一个空格，请将表达式更改为`[^ ]*( .*)`

***没有正则表达式解决方案***

```
var afterSpace = input.Substring(input.IndexOf(' ')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T12:27:17.570

*实际上*，您不需要为该过程使用正则表达式。你只需要使用[`String.Split()`](http://msdn.microsoft.com/tr-tr/library/system.string.split.aspx)这样的方法；

```
string s = "bobs nice house";
string[] s1 = s.Split(' ');
for(int i = 1; i < s1.Length; i++)
    Console.WriteLine(s1[i]); 
```

输出将是；

```
nice
house 
```

这是一个[`DEMO`](http://ideone.com/VwFYAD).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-07T10:20:59.507

用于`/(?<=\s).*/g`在第一个空格后查找字符串。运行代码段检查

```
str="first second third forth fifth";
str=str.match(/(?<=\s).*/g)
console.log(str);
```

# android - Android 显示星期几

> ID：15987652
> 
> 赞同：4
> 
> 时间：2013-04-13T12:12:48.820
> 
> 标签：android, android-calendar, android-date

我想用那一周的日期显示星期几。就像今天一样，我想为我的日历显示是这样的：

```
Mon  Tues  Wed  Thurs  Fri  Sat   Sun
8    9     10    11    12   13    14 
```

然后，当另一个星期开始时，数字会发生变化。所以，我尝试了 android 日历类。所以我想出了这个：

```
TextView[] tx = {t1, t2, t3, t4, t5, t6, t7};

    SimpleDateFormat curFormater = new SimpleDateFormat("EEE dd"); 
    GregorianCalendar date = new GregorianCalendar();
    String[] dateStringArray = new String[7];

    for (int day = 0; day < 7; day++) {
        dateStringArray[day] = curFormater.format(date.getTime());
        date.roll(Calendar.DAY_OF_MONTH, true);
        System.out.println("HELLO WORLD DAYS: " + dateStringArray[day]);
        tx[day].setText(dateStringArray[day]);
    } 
```

只是为了检查我是否可以实现我的目标。嗯，它接近我想要的。问题是，例如今天是星期六，输出是这样的：

```
Sat   Sun   Mon   Tue   Wed   Thur   Fri
13    14    15    16    17    18     19 
```

然后，明天..我猜这会变成

```
Sun   Mon   Tue   Wed   Thur   Fri  Sat
14    15    16    17    18     19   20 
```

因此，开始日期发生了变化。有没有一种方法可以帮助我实现目标。也许我在阅读文档时错过了这一点。请谢谢。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:13:06.587

试试这个

```
 SimpleDateFormat curFormater = new SimpleDateFormat("EEE dd"); 
        GregorianCalendar date = new GregorianCalendar();
        String[] dateStringArray = new String[7];
             date.set(GregorianCalendar.DATE, date.get(GregorianCalendar.DATE)-date.get(GregorianCalendar.DAY_OF_WEEK));
        for (int day = 0; day < 7; day++) {
            dateStringArray[day] = curFormater.format(date.getTime());
            date.setFirstDayOfWeek(day);
            date.roll(Calendar.DAY_OF_MONTH, true);
            System.out.println("HELLO WORLD DAYS: " + dateStringArray[day]);
        }
} 
```

# objective-c - 静态属性、静态类、单例模式

> ID：15987654
> 
> 赞同：-1
> 
> 时间：2013-04-13T12:13:14.897
> 
> 标签：objective-c

我有3节课。

*   A类包含：

    1.  静态变量“dataX”。
    2.  设置数据的 setter 方法。
    3.  返回数据值的 getter 方法。
*   B类

*   C类。

流程如下：

B类实例化A类并使用setter方法初始化变量“dataX”。

之后，C 类在 viewDidLoad 方法中实例化 A 类，并获取静态变量的值。

但即使 A 类中的变量是静态的，该变量也始终为空。

我想我需要将单例模式与静态 A 类一起放置，而不仅仅是静态属性。

将类指定为静态的语法是什么？

下面的代码：

```
//  HandleMessage.h

@interface HandleMessage : NSObject
@property *NSString nameFile;

// Getter
- (NSString *)getNameFile;

// Setter
- (void)setNameFile: (NSString *) value;

@end 
```

和：

```
//  HandleMessage.m

#import "HandleMessage.h"

@implementation HandleMessage

static nameFile;

@synthesize nameFile ;

// Getter definition
- (NSString *)getNameFile{
    return nameFile;
}

// Setter definition
- (void)setNameFile: (NSString *) value{
    nameFile = value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:38:36.397

当您实例化一个类的另一个实例时，这个实例的值当然是空的。

您可以使用单例或将数据存储在其他地方（如果您想使用 NSUserdefaults 将应用程序启动之间的数据保留在您的用户默认值中）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T12:27:35.747

“静态类”是什么意思？

你可以使用我在[这个答案中描述的单例模式](https://stackoverflow.com/a/15107876/642626)

或使用类方法

类A.h

```
@interface ClassA

+ (void)setData:(int)data;
+ (int)getData;

@end 
```

类A.m

```
static int sData;

@implementation ClassA

+ (void)setData:(int)data {
    sData = data;
}

+ (int)getData {
    return data;
}

@end 
```

# php - 使用 JavaScript 或 PHP 交换日期和月份

> ID：15987655
> 
> 赞同：0
> 
> 时间：2013-04-13T12:13:17.540
> 
> 标签：php, javascript, fullcalendar

我正在使用 jQuery Fullcalendar 插件，并注意到它希望事件的格式为，`'mm-dd-yyyy'`但我的事件提要是`'dd-mm-yyyy'`.

有没有一种简单的方法可以使用 JavaScript/PHP 进行转换？因为我无法更改事件源的格式。*而且我查看了 Fullcalendar 文档并没有看到任何方法来更改 fullcalendar 如何使用日期的格式......因为这样会更好。*

这是代码示例（使用 WordPress 自定义类型）：

```
$('#training-calendar').fullCalendar({
    viewDisplay: function(view) {
        resizeCalendar();
    },
    windowResize: function(view) {
        resizeCalendar();
    },
    header: {
        left: 'title',
        center: '',
        right: 'today prev,next'
    },
    editable: false,
    events: [
        <?php $training_query = new WP_Query('post_type=training'); while ($training_query->have_posts()) : $training_query->the_post(); $id = get_the_ID(); ?>
        {
            title: '<?php the_title(); ?>',
            start: '<?php echo get_post_meta($id, 'startDate', true ); ?>',
            end: '<?php echo get_post_meta($id, 'endDate', true); ?>',
            allDay: true
        },
        <?php endwhile; ?>  
    ]
}); 
```

所以日期是 2013 年 1 月 5 日：`05-01-2013`

**另外我确定我记得 Fullcalendar 从 0 开始的月份有问题，这在以后的版本中是否已更改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:27:52.387

尝试这个

```
$d = date('m-d-Y', strtotime(get_post_meta($id, 'startDate', true ))); 
```

# java - 仅限反馈面板的 AJAX 刷新行为

> ID：15987659
> 
> 赞同：0
> 
> 时间：2013-04-13T12:13:36.913
> 
> 标签：java, wicket

我有一个可以上传文件的表格。该页面有一个 FeedBackPanel。出于某种原因，UploadProgressBar 对我不起作用。有没有办法只将 AJAX 刷新行为添加到反馈面板？这样，当上传结束时，我可以在反馈面板中至少有一个 info() 。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:07:12.487

您可以`send()`在上传完成后发送一个事件，并在 中的 FeedbackPanel 中接收它`onEvent()`。该事件应该包含一个 AjaxRequestTarget，以便您可以将 feedbackPanel 添加到它。

# c# - ASP.NET 表单身份验证漏洞

> ID：15987661
> 
> 赞同：5
> 
> 时间：2013-04-13T12:13:39.800
> 
> 标签：c#, asp.net, asp.net-mvc, security, forms-authentication

当我被@Slauma 对@reach4thelasers 所写的所选答案的链接响应（包括[在此处](http://threatpost.com/en_us/blogs/demo-aspnet-padding-oracle-attack-091710)）所震惊时，我正在阅读这个[SO 问题。](https://stackoverflow.com/questions/9868941/is-forms-authentication-ticket-safe-enough)这是一篇关于如何在大约半小时的时间内破解 ASP.NET 的表单身份验证并收集远程机器密钥的博客文章。

对博客文章的一些回复提到，只有在你不做一些具体的事情时才有可能，但我不清楚这些具体的事情是什么（关于自定义错误页面的东西，但视频似乎没有点击任何错误页面）。它还提到 MS 提出了避免此类攻击的建议，但没有与该建议的链接。

那么，首先，在开发 ASP.NET 表单身份验证系统时，有人能清楚地解释什么是必要的，以防止像上面提到的那样被利用吗？

其次，在 ASP.NET 表单身份验证中是否还有其他众所周知的漏洞可以通过某种最佳实践（默认情况下未实现）来缓解或阻止？我正在建立一个包含财务数据的公共网站，所以这对我来说是一个严重的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T12:26:52.813

很久以前就已经解决了这个问题：[http ://technet.microsoft.com/en-us/security/bulletin/MS10-070](http://technet.microsoft.com/en-us/security/bulletin/MS10-070)

Scott Gu 当时写过它[http://weblogs.asp.net/scottgu/archive/2010/09/28/asp-net-security-update-now-available.aspx](http://weblogs.asp.net/scottgu/archive/2010/09/28/asp-net-security-update-now-available.aspx)

这个 SO 问题涵盖了该问题的一些影响[它是否容易受到 ASP Padding oracle的影响](https://stackoverflow.com/questions/15838011/is-it-vulnerable-to-asp-padding-oracle)

我想说，主要的收获是框架中的补丁和升级比将生产应用程序留在旧框架、旧补丁级别更危险，大型组织的变更控制委员会反过来看到了这一点。他们通常更担心补丁和更新，而不是现有代码中存在漏洞的可能性。

# android - 图像未按比例放大（Android）

> ID：15987663
> 
> 赞同：1
> 
> 时间：2013-04-13T12:14:05.043
> 
> 标签：android, xml

我正在为我的 Android 应用程序的 UI 使用一些 .png 图像。我将图像保存在“res/drawable”目录中。我在一些教程中读到，当屏幕分辨率大于 mdpi 时，Android 会自动放大图像。但是当我在大屏幕设备上运行我的应用程序时，图像显示为其原始大小，而不是按比例放大。其余空间为空（黑色）。我在这里做错了什么？如果有帮助，下面是我的布局的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:theme="@android:style/Theme.Black.NoTitleBar" 
      >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:clickable="false"
        android:contentDescription="@string/p"

        android:src="@drawable/volbar" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:contentDescription="@string/p"

        android:src="@drawable/head" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="33dp"
        android:layout_marginRight="19dp"
        android:text="@string/press_to_update" />

    <ImageView
        android:id="@+id/imageView9"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView2"
        android:clickable="false"
        android:contentDescription="@string/p"

        android:src="@drawable/frag11"
         />
    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageView9"
        android:layout_alignParentLeft="true"
        android:clickable="false"
        android:contentDescription="@string/p"

        android:src="@drawable/base" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T02:06:59.207

我猜您希望您的图像按比例放大以填充空间。如果是这种情况，您将需要`scaledType`为您指定`ImageView`：

```
<ImageView
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:scaleType="cropInside" /> 
```

[尝试使用ImageView.ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)中的不同值以获得您想要的效果。

仅供参考，当您将图像放入时`res/drawable`，它会根据设备密度进行缩放。例如，如果您的 png 为 200x150，那么它会在 1.5 密度的设备上缩放为 300x225。这种缩放独立于`scaleType`.

# iphone - 创建 Facebook 事件然后向用户发送邀请的正确 iOS 语法是什么？

> ID：15987664
> 
> 赞同：0
> 
> 时间：2013-04-13T12:14:05.027
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我有一个名为`FBSession`. 我知道会话已打开，但我如何发送图形请求以创建事件，然后邀请用户参加该事件？我知道用户的 Facebook ID，因为我设法从本地地址簿属性中提取了它们。

```
 if (appDelegate.session.state == FBSessionStateCreatedTokenLoaded) {
        // even though we had a cached token, we need to login to make the session usable
        [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                         FBSessionState status,
                                                         NSError *error) {

        switch (status) {
            case FBSessionStateOpen:
            {

            /* What do I do here to create the event and invite IDs x, y and z where z, y and z are long long Facebook Ids */

            NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                                           @"venue name",@"name",
                                                           @"2012-01-13T17:00:00+0000",@"start_time",
                                                           @"2012-01-16T01:30:00+0000",@"end_time",@"location",@"location name ch",@"1234567890",@"id", nil];
            FBRequest *facebook = [[FBRequest alloc] initWithSession:appDelegate.session graphPath:@"me/events" parameters:params HTTPMethod:@"POST"]; 
```

这些是否正确，我需要运行哪些委托方法来检查它在 appDelegate 中是否正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:38:02.807

好的，这看起来很酷。

```
FBRequest *eventPostOK = [FBRequest requestWithGraphPath:@"me/permissions" parameters:Nil HTTPMethod:GET];
[eventPostOK startWithCompletionHandler: ^(FBRequestConnection *connection,
                                           NSDictionary* result,
                                           NSError *error) {
    BOOL canDoIt = FALSE;
    if (!error)
    {
        FBGraphObject *data = [result objectForKey:@"data"];
        for(NSDictionary<FBGraphObject> *aKey in data) {
            canDoIt = [[aKey objectForKey:@"create_event"] boolValue];
        }
    }

    if (canDoIt) { ... DO STUFF .... }

]; 
```

# php - 从周数获取日期 - 年份从 3 月开始 - 第 1 周 = 3 月 1 周 - PHP

> ID：15987665
> 
> 赞同：0
> 
> 时间：2013-04-13T12:14:05.370
> 
> 标签：php, date, week-number

我正在尝试编写一个自定义函数来从周数中获取日期，但要求是周数是自定义的，即**第 1 周从 3 月的第一周开始，每周的第一天是星期五** 我试图在 PHP 中执行此操作。

您的帮助或建议对编写此函数非常有帮助。我已经在这里完成了一些功能，但实际上并不符合我的要求。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:58:21.457

这可能会给你一个起点：

```
$year = 2012;
$startDate = new \DateTime($year . '-03-01');
$startDate->modify('Friday');
echo $startDate->format('Y-m-d') , PHP_EOL;
$endDate = new \DateTime($year+1 . '-03-01');
$endDate->modify('Friday');
echo $endDate->format('Y-m-d') , PHP_EOL;

$interval = new \DateInterval('P1W');
$weekPeriod = new \DatePeriod ($startDate, $interval, $endDate);

foreach ($weekPeriod as $key => $weekDate) {
   echo 'Week #' , $key + 1 , ' starts on ';
   echo $weekDate->format('Y-m-d') , PHP_EOL;
} 
```

您可以使用它来构建一个数组，然后您可以将其用作查找

# c++ - 将整数转换为数字数组

> ID：15987666
> 
> 赞同：9
> 
> 时间：2013-04-13T12:14:06.043
> 
> 标签：c++, c

我需要将两个整数转换为两个数字数组，例如 544 将变为`arr[0] = 5, arr[1] = 4, arr[2] = 4`.

我发现了一些这样做的算法，但是它们创建了新数组并返回了这个。我必须为两个数组分配这个内存，所以我想通过引用传递两个整数并直接对它们执行此操作。

我想我可以这样做，因为这些整数实际上是模板类型，所以它们应该是可变的。这就是我在这里添加 C++ 标签的原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T12:19:10.557

只是使用这样的东西：

```
int n = 544; // your number (this value will Change so you might want a copy)
int i = 0; // the array index
char a[256]; // the array

while (n) { // loop till there's nothing left
    a[i++] = n % 10; // assign the last digit
    n /= 10; // "right shift" the number
} 
```

请注意，这将导致以相反的顺序返回数字。这可以通过修改初始值`i`以及增量/减量来轻松更改，具体取决于您希望如何确定值的长度。

* * *

(Brett Hale) 我希望张贴者不介意，但我想我会添加一个用于这种情况的代码片段，因为在转换之前正确确定小数位数并不容易：

```
{
    char *df = a, *dr = a + i - 1;
    int j = i >> 1;

    while (j--)
    {
        char di = *df, dj = *dr;
        *df++ = dj, *dr-- = di; /* (exchange) */
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T12:20:29.730

一个简单的解决方案是：

```
int i = 12312278;

std::vector<int> digits;

while (i)
{
    digits.push_back(i % 10);

    i /= 10;
}

std::reverse(digits.begin(), digits.end()); 
```

或者，基于字符串（ i >= 0 ）

```
for (auto x : to_string(i))
    digits.push_back(x-'0'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T12:19:01.500

调用整数`a`。

要获得 的个位`a`，`a % 10`

向下移动`a`，所以十位是个位，`a / 10`

要知道什么时候完成，`a == 0`

首先要知道您的数组需要多大，`min(ceil(log(a+1, 10)), 1)`（为了说服自己这是可行的，请在计算器中尝试它的对数部分。如果您没有多个参数日志，请使用 identity `log(x,y) == log(x)/log(y)`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T12:22:01.607

如果你使用 C++，你可以这样做：

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

int main() 
{

    int a=544;
    stringstream str;
    str << a;
    string arr;
    str>>arr;
    for(int i=0; i<arr.length(); i++)
    {
        cout << arr[i];
    }
    system("pause");
    return 0; 
} 
```

# javascript - 仅在不存在时将脚本添加到头部

> ID：15987668
> 
> 赞同：17
> 
> 时间：2013-04-13T12:14:18.573
> 
> 标签：javascript, append

我想在加载特定`div`内容时向我的网站添加其他脚本和样式。我首先定义脚本或样式表的路径，然后创建一个元素。此后，我将元素附加到 HTML 中的 head 标签。

但我想在再次附加之前查看脚本或样式表是否已经附加。附加一个已经存在的脚本或样式表是愚蠢的。

问：如何使用javascript检查head标签中是否已经存在脚本，如果不存在则追加元素？

**编辑**

我根据@KernelPanik 的回答制作了一个函数。它还没有工作，但希望它会。该功能目前有问题：[我的脚本附加功能不起作用](https://stackoverflow.com/questions/15988186/my-script-appending-function-doesnt-work)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-14T08:17:50.430

如果你可以使用jquery，这段代码很好

```
function appendScript(filepath) {
    if ($('head script[src="' + filepath + '"]').length > 0)
        return;

    var ele = document.createElement('script');
    ele.setAttribute("type", "text/javascript");
    ele.setAttribute("src", filepath);
    $('head').append(ele);
}

function appendStyle(filepath) {
    if ($('head link[href="' + filepath + '"]').length > 0)
        return;

    var ele = document.createElement('link');
    ele.setAttribute("type", "text/css");
    ele.setAttribute("rel", "Stylesheet");
    ele.setAttribute("href", filepath);
    $('head').append(ele);
} 
```

在你的代码中写

```
appendScript('/Scripts/myScript.js');
appendStyle('/Content/myStyle.css'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-12T08:53:00.277

```
var lib = '/public/js/lib.js';

if (!isLoadedScript(lib)) {
  loadScript(lib);
}

// Detect if library loaded
function isLoadedScript(lib) {
  return document.querySelectorAll('[src="' + lib + '"]').length > 0
}

// Load library
function loadScript(lib) {
  var script = document.createElement('script');
  script.setAttribute('src', lib);
  document.getElementsByTagName('head')[0].appendChild(script);
  return script;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-13T12:32:17.003

您可以使用 DOM`getElementsByTagName("script")` 来获取`<script>`文档中的所有标签。然后，您可以检查`src`返回的每个脚本标记的 url，以获取已添加到 head 部分的脚本的 url。同样，您可以通过将“script”的搜索替换为“style”来对样式表执行类似的操作。

例如，如果附加到该`<head>`部分的脚本的 url 是`header_url.html`

```
var x = document.getElementsByTagName("script");
var header_already_added = false;

for (var i=0; i< x.length; i++){
    if (x[i].src == "header_url.html"){
        // ... do not add header again
        header_already_added = true;
    }
}

if (header_already_added == false){
    // add header if not already added
} 
```

同样，如果附加到该`<head>`部分的样式的 url 是`header_style.css`

```
var x = document.getElementsByTagName("style");
var header_already_added = false;

for (var i=0; i< x.length; i++){
    if (x[i].src == "header_style.css"){
        // ... do not add header again
        header_already_added = true;
    }
}

if (header_already_added == false){
    // add header if not already added
} 
```

这里也问了一个类似的问题：[Check if Javascript script exists on page](https://stackoverflow.com/questions/9659265/check-if-javascript-script-exists-on-page)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-14T05:07:51.150

我使用了 Jack Lee 的解决方案。它很容易实现，并且几乎可以使用任何类型的文件快速通用......我没有扩展任何东西......我实际上可能有点傻眼......只是想列出我所做的事情以防它帮助某人别的...

```
var lib_jq = '//pathtofile/jquery.js';
var lib_bs = '//pathtofile/bootstrap.min.3.5.js';
var lib_cs = '//pathtofile.css';

 ///checks files with the SRC attribute
function isLoadedScript(lib) {
    return document.querySelectorAll('[src="' + lib + '"]').length > 0
}
///checks files with the HREF attribute
function isLoadedCss(lib) {
    return document.querySelectorAll('[href="' + lib + '"]').length > 0
}
///loads the script.js files
function loadScript(link) {
   document.write('<scr' + 'ipt type="text/javascript" src="'+link+'"></scr' + 'ipt>');
}

///loads the style.css files
function loadCss(link) {
   document.write('<link rel="stylesheet" href="'+link+'">');
}

 /// run funtion; if no file is listed, then it runs the function to grab the URL listed. ///Run a seperate one for each file you wish to check. 
if (!isLoadedScript(lib_jq)) { loadScript(lib_jq); }
if (!isLoadedScript(lib_bs)) { loadScript(lib_bs); }
if (!isLoadedCss(lib_cs))    { loadCss(lib_cs);    }

I know there is always a "better" and more "elegant" solution, but for us beginiers, we got to get it working before we can start to understand it... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-17T02:12:57.143

另一种使用函数助手的方法，如下所示

```
function isScriptAlreadyPresent(url) {
  var scripts = Array.prototype.slice.call(document.scripts);
  return scripts.some(function(el) {
     return el.src && el.src != undefined && el.src == url;
  });
}

isScriptAlreadyPresent('http://your_script_url.tld/your_lib.js'); 
```

它使用[Array.prototype.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)函数。如果您使用的浏览器不支持 ES5（IE7 和 IE8...），您可能需要[es5-shim](https://github.com/es-shims/es5-shim)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T12:27:46.257

也许[headjs](http://headjs.com/)可以帮助你。

或者您可以在脚本标签中添加 onload 属性。

我的英语有点差，所以也许我误解了你的问题。

```
if(ie){
  js.onreadystatechange = function(){
    if(js.readyState == 'complete'){
      callback(js);
  }
}
else{  
js.onload = function(){
  callback(js);
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2014-07-31T14:07:44.830

您可以尝试从该js脚本文件中调用一些函数、对象、变量，如果找到则它存在，如果不存在，则需要插入该js脚本文件。

# python-2.7 - Python 中的 Jellybean 离线识别

> ID：15987672
> 
> 赞同：1
> 
> 时间：2013-04-13T12:14:40.727
> 
> 标签：python-2.7, speech-recognition, speech-to-text

JellyBean 的离线语音识别可以用在 Python 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T01:50:21.603

如果你能得到一个谷歌语音识别的 API，我认为它存在于网络上的某个地方。然后在 python 中使用它不会是一个问题，你可以使用 SL4A 在 python 中编程并通过使用 python 解释器编译你的应用程序来制作一个 .apk。

# android - 如何使用 ArrayAdapter 返回并显示 ListView

> ID：15987675
> 
> 赞同：-1
> 
> 时间：2013-04-13T12:14:52.200
> 
> 标签：android

我正在为我正在尝试创建的 mp3 播放器编写代码。我只是在项目的开始，希望能够读取和显示我 sd 卡上的所有 mp3 文件。我不想使用直接路径方法。现在我编写的这段代码为我收集了所有的 mp3 文件，但唯一的问题是它没有为我在屏幕上查看它们。该应用程序显示一个空白屏幕，但不会崩溃。

我从导师那里得到了帮助和建议，并被告知使用 ArrayAdapter 来查看结果，但我找不到任何帮助来展示它。如果有人可以请帮忙，那就太好了。

这是我在 onCreate 方法中的代码；

```
ListView list;
Cursor cursor;
int columnIndex;
int count;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //list = (ListView) findViewById(R.id.list);

    //A array is created that display the 3 fields
    String[] displayMusic = {MediaStore.Audio.Media._ID, MediaStore.Audio.Media.DISPLAY_NAME, MediaStore.Audio.Media.TITLE};
    //the cursor displays all of the audio in the sd card, just to limit to .mp3 files now
    cursor = getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, displayMusic, null, null, null);

    //this is the loop that gather all of the .mp3 files
    int pos = 1;
    ArrayList<String> listOfMp3s = new ArrayList<String>();
    while (cursor.moveToNext())
    {
        if(cursor.getString(pos).endsWith("mp3"))
        {
            listOfMp3s.add(cursor.getString(pos));
        }
    }

    String[] displayFields = new String[] {MediaStore.Audio.Media.DISPLAY_NAME};
    int[] displayViews = new int[] {android.R.id.text1};
    //setListAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, displayFields, displayViews);
    ArrayAdapter<String> musicAdapter = new ArrayAdapter<String>(getBaseContext(), R.layout.list_songs, listOfMp3s);
    //list.setAdapter(listOfMp3s);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:26:22.370

看看简单直接的教程[How to create a ListView using ArrayAdapter in Android](http://anujarosha.wordpress.com/2011/11/17/how-to-create-a-listview-using-arrayadapter-in-android/)。

您需要生成一个字符串数组并将该数组附加到一个数组适配器

```
adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, YourStringArray); 
```

然后将此适配器插入您的 ListView

```
yourListView.setAdapter(adapter); 
```

`ArrayAdapter<YourItem>`或者您可以通过扩展和附加`YourItem`数组来创建自己的自定义适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:39:34.163

我建议您创建一个自定义以按照您想要的方式从您的对象`ArrayAdapter`中填充 a 。`ListView`

这种技术的优点是您获得了一种视图回收机制，该机制将回收`Views`您的内部`ListView`以减少内存消耗。

**简而言之**，您必须：

**1.**创建一个代表单行数据的对象。

**2.**创建`ArrayList`这些对象中的一个。

**3.**创建一个包含 ListView 的布局或使用代码将 ListView 添加到您的主布局。

**4.**创建单行布局。

**5.**创建一个`ViewHolder`从 的角度代表数据行的视觉方面`Views`。

**6.**创建一个自定义`ArrayAdapter`，将根据您的需要填充行，在其中您将覆盖该`getView`方法以准确指定行数据将是什么。

**7.**最后把这个分配`ArrayAdapter`给你的`ListView`in `onCreate`。

通过阅读我写的这篇博文，您可以了解如何实现这一点：

[创建自定义 ArrayAdapter](http://blog-emildesign.rhcloud.com/?p=495)

# backup - Cpanel 备份冻结在“修复邮件权限”状态

> ID：15987683
> 
> 赞同：0
> 
> 时间：2013-04-13T12:15:56.067
> 
> 标签：backup, cpanel

当恢复 Cpanle 备份的“修复邮件权限”部分时，我的恢复操作停止。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T10:26:47.927

对于单个 cpanel 帐户，您可以通过 root SSH 将其修复为

```
/scripts/mailperm username 
```

用户名 = cpanel 用户名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T11:46:20.087

尝试如下修复邮箱权限，如果您要恢复现有帐户的备份，希望对您有所帮助。

WHM > 电子邮件 > 修复邮箱权限

# powershell - 竹变量是否自动用作环境变量？

> ID：15987684
> 
> 赞同：10
> 
> 时间：2013-04-13T12:16:00.133
> 
> 标签：powershell, bamboo

我试图在我的构建脚本（PowerShell）中将 Bamboo 的变量作为环境变量访问。

例如，这在 TeamCity 中运行良好

```
$buildNumber = "$env:BUILD_NUMBER" 
```

我希望这适用于 Bamboo

```
$buildNumber = "$env:bamboo_buildNumber" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-21T22:37:27.473

在当前版本的 Bamboo (5.x) 中，以下环境变量适用于我在 Bash 脚本中的 Amazon EC2 Linux 客户端上的 Bash 中。它在 PowerShell 中应该非常相似。

*   `${bamboo.buildKey}`-- 当前作业的作业键，格式为 PROJECT-PLAN-JOB，例如`BAM-MAIN-JOBX`
*   `${bamboo.buildResultsUrl}`-- 作业执行完成后 Bamboo 中结果的 URL。
*   `${bamboo.buildNumber}`-- Bamboo 内部版本号，例如`123`
*   `${bamboo.buildPlanName}`-- Bamboo 计划名称 例如`Some Project name - Some plan name`

[您可以在 Atlassian Bamboo 构建变量文档页面上](https://confluence.atlassian.com/display/BAMBOO/Bamboo+variables)查看 Bamboo 构建变量的完整列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T00:15:17.257

典型的。这是一个错误。

[https://jira.atlassian.com/browse/BAM-11824?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://jira.atlassian.com/browse/BAM-11824?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

[https://answers.atlassian.com/questions/66109/accessing-build-specific-variables-from-script-without-having-to-use-environment-variables-box-on-script-config-page](https://answers.atlassian.com/questions/66109/accessing-build-specific-variables-from-script-without-having-to-use-environment-variables-box-on-script-config-page)

所以我不得不（同时）在脚本任务中添加环境变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-02T14:02:53.990

是的，Bamboo 变量在 Bamboo 5.9.4 中似乎可以作为环境变量自动使用。以下作为内联 Powershell 对我有用：

```
$revision = $Env:bamboo_planRepository_revision
$buildNumber = $Env:bamboo_buildNumber
$text = "$revision - $buildNumber"
$text > 'Version.txt' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-06T10:56:09.707

请记住，平台上的 var 命名约定存在一些差异：

*   在 unix 上应该是竹子.buildNumber
*   一对双胞胎 。符号应替换为 _ -bamboo.buildNumber >>bamboo_buildNumber

# inheritance - 如何覆盖子视图中的 tagName、id、className、el 和事件？

> ID：15987685
> 
> 赞同：0
> 
> 时间：2013-04-13T12:16:04.990
> 
> 标签：inheritance, backbone.js, backbone-views, backbone-events

假设我有以下主干结构：

```
 var BrowserView = Backbone.View.extend({
   el: 'body',
   events: {
     click : "onClickEvent"
   },

   initialize: function () {
     this.collections = [];
   }
 });

 var FileBrowserView = BrowserView.extend({
   el: '#file',
   className: 'file-class',
   events: {
     click: "onFileClick",
     mouseover: "onMouseOver"   
   },

   initialize: function () {
     this.constructor.__super__.initialize.apply(this);     
   }
 }); 
```

我需要覆盖子视图中的 tagName、id、className、el 属性，并将子视图中的事件对象与父视图结合起来。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T23:16:02.140

对于*tagName*、*id*、*className*和*el*属性，您可以通过设置新值来简单地覆盖它们。
对于*events*，您可以使用与*initialize*方法相同的技巧，因为*events*键可以是一个函数。

```
events: function(){
  return _.extend({}, this.constructor.__super__.events, {
    // list of events
  });
} 
```

请注意，这不适用于多个继承级别，因此，确切的公式是：

```
events: function(){
  return _.extend({}, _.result(this.constructor.__super__, 'events'), {
    // list of events
  });
} 
```

# css - 当文本在 HTML 段落中换行时，使用 *only* css 与第一行上的第一个非空白字符对齐

> ID：15987686
> 
> 赞同：0
> 
> 时间：2013-04-13T12:16:08.800
> 
> 标签：css

我有一段文字如下：

```
<p>

&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp; In this respect, the conceptual structure of the Act is something like a pyramid. The pyramid shape illustrates the way the income tax law is organised, moving down from the central or core provisions at the top of the pyramid, to general rules of wide application and then to the more specialised topics.

</p> 
```

目前它呈现为：

> 在这方面，该法案的概念结构有点像金字塔。金字塔形状说明了所得税法的组织方式，从金字塔顶部的中央或核心条款向下移动到广泛适用的一般规则，然后到更专业的主题。

我希望它像这样呈现：

```
                   在这方面，该法案的概念结构类似于
                   金字塔。金字塔形状说明了所得税法的方式  
                   有组织的，从顶部的中央或核心条款向下移动
                   金字塔，到广泛应用的一般规则，然后到更多
                   专门的话题。

```

只使用 CSS！

### 背景故事

我正在将 Markdown 文件转换为 HTML。这些文件在源代码管理中。Markdown 文件已经使用`&ensp;`字符为我缩进了。我还想要干净的提交日志，所以我想将每个日志保留`<p>`在一行上。

### 编辑

以下是 Markdown 文档之一的部分要点：[https ://gist.github.com/vjpr/5378401](https://gist.github.com/vjpr/5378401)

基本上我想

*   避免在我的 Markdown 文档中使用内联 html。
*   允许在 GitHub 上使用缩进查看 Markdown 文档。
*   允许使用自定义样式表查看相同的 Markdown 文档，并保持将段落包装在与第一个非空白字符相同的缩进级别，如图所示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:54:13.800

您可以使用 padding-left 和负文本缩进的组合，例如

```
p{
    padding-left:18em;
    border: 1px solid black;
    text-indent :-9em;
} 
```

小提琴示例：http: [//jsfiddle.net/NzUtM/1](http://jsfiddle.net/NzUtM/1)

根据需要随意调整填充和缩进。

# jpa - 将 BatooJPA 与 Gradle 集成到 Jetty 中的示例

> ID：15987687
> 
> 赞同：0
> 
> 时间：2013-04-13T12:16:10.817
> 
> 标签：jpa, batoo

我正在尝试将 Batoo JPA 集成到我的一个项目中，使用 gradle 和 Jetty 作为服务器。我必须集成哪些库？有样品吗？

目前我有这些：

```
'org.batoo.jpa:persistence-api:2.0',
'javax.validation:validation-api:1.0.0.GA',
'com.jolbox:bonecp:0.8.0-rc1' 
```

但这些似乎还不够。在进一步讨论“反复试验”之前，我想先在 stackoverflow 上问一下，我需要哪些库才能开始使用 Batoo Jpa（以及 gradle 和 Jetty）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T14:53:29.940

在我制作的一个基本项目中，我必须配置这些库：

```
-batoo-annotations-2.0.1.0-RTM.jar
-batoo-annotations-2.0.1.0-RTM-sources.jar
-batoo-jdbc-2.0.1.0-RTM.jar
-batoo-jpa-2.0.1.0-RTM.jar
-batoo-jpa-spi-2.0.1.0-RTM.jar
-jpql-0.1.6.jar
-parser-2.0.1.0-RTM.jar
-persistence-api-2.0.jar
-guava-14.0.1.jar
-commons-lang-2.6.jar
-validation-api-1.0.0.GA.jar
-bonecp-0.7.1.RELEASE.jar
-commons-dbutils-1.5.jar
-commons-io-2.4.jar
-asm-3.3.1.jar

-h2-1.3.171.jar  <-- I add this one as database driver it could be changed. 
```

如果你有事务问题（如果我没记错的话，如果你没有事务控制，Batoo 会引发异常，但你可以测试它）我配置了这些库以便拥有 CDI 事务控制，但如果你可以省略这些想要使用 spring 或 Batoo 在没有事务控制的情况下效果很好:-)

```
-deltaspike-cdictrl-api-0.3-incubating.jar
-deltaspike-cdictrl-weld-0.3-incubating.jar
-deltaspike-core-api-0.3-incubating.jar
-deltaspike-core-impl-0.3-incubating.jar
-deltaspike-jpa-module-api-0.3-incubating.jar
-deltaspike-jpa-module-impl-0.3-incubating.jar

-weld-api-2.0.0.jar
-weld-spi-2.0.0.jar
-weld-se-2.0.0.jar 
```

现在，请记住 Batoo 在 persistence.xml 文件中使用标准属性，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"  xmlns="http://java.sun.com/xml/ns/persistence"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="your PU name" transaction-type="RESOURCE_LOCAL">
    <provider>org.batoo.jpa.core.BatooPersistenceProvider</provider>

    <class>here.you.add.your.Entities</class>

    <properties>
                    <!-- here your driver-->
        <property name="javax.persistence.jdbc.driver" value="org.h2.Driver" />
                    <!-- here the URL of your database-->
        <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://localhost/~/test" />
                    <!-- here your username-->
        <property name="javax.persistence.jdbc.user" value="sa" />
                    <!-- here your password-->
        <property name="javax.persistence.jdbc.password" value="" />
    </properties>
</persistence-unit> 
```

希望这会有所帮助，干杯:-)

# python - 如何在python中探索一个非常大的变量？

> ID：15987690
> 
> 赞同：0
> 
> 时间：2013-04-13T12:16:41.740
> 
> 标签：python

我有一个问题，我有一个 python 脚本，它加载了一个非常大的变量，让我们调用它`foo`。现在我想探索 foo 的结构，所以我编写了以下代码：

```
print foo 
```

但问题是，当我执行此操作时，我的 IDLE 被阻塞并且我看到任何输出。我认为这是因为`foo`它太大了。有没有什么功能或…… 等于探索一个变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:19:18.737

`repr`您可以将of转储`foo`到具有类似...的文本文件中

```
open('foo.txt', 'w').write(repr(foo)) 
```

# sql - 在同一查询中使用 UPDATE 和 INSERT

> ID：15987691
> 
> 赞同：0
> 
> 时间：2013-04-13T12:17:01.163
> 
> 标签：sql, db2

我可以在同一个查询中进行插入和更新吗？

**之前**：

```
MemberID |   SubsID |   StartDate  |  EndDate
------------------------------------------------
1001     |   10     |   2012-12-21 |  2012-12-31 
2002     |   10     |   2012-12-22 | 
```

**之后**：

```
MemberID |   SubsID |   StartDate  |  EndDate
------------------------------------------------
1001     |   10     |   2012-12-21 |  2012-12-31 
2002     |   10     |   2012-12-22 |  2012-04-13 
2002     |   10     |   2012-04-13 | 
```

*获取行*：

```
select * from MemberSubs 
where SubsID = 10 and EndDate is null; 
```

*插入新行*：

```
insert into 
  MemberSubs(MemberID, SubsID, Price, StartDate)
select 
  MemberID, SubsID, Price, Current Date 
from 
  MemberSubs 
where 
  SubsID = 10
  and
  EndDate is null 
```

*更新旧行*：

```
update MemberSubs 
set 
  EndDate = current date
where 
  SubsID = 10
  and
  EndDate is null
  and
  StartDate < Current Date 
```

是否可以在一个查询中实现这一点（不使用存储过程或触发器等）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:04:09.360

你有两个选择：

1.  使用触发器（查看谷歌上的“DB2 9.5 Cookbook”，第 333 页。有一个将触发器与历史数据一起使用的示例）

2.  升级到 DB2 版本 10 并使用系统时间通过时间旅行查询来查询历史数据。

# sql - 查找重复项并将它们插入到单独的表中

> ID：15987693
> 
> 赞同：0
> 
> 时间：2013-04-13T12:17:02.960
> 
> 标签：sql, insert, duplicates

我有一张桌子

```
Id int
Post code int
Suburb varchar
State varchar 
```

我需要能够找到组合的重复项`(post code, suburb, state)`

并将它们插入到记录错误数据的绝望表中

```
Eg
Id int
Post code int
Suburb varchar
State varchar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:31:03.143

```
INSERT INTO IncorrectResults (PostCode, Suburb, State)
SELECT PostCode, Suburb, State
FROM MyTable
GROUP BY PostCode, Suburb, State
HAVING COUNT(*) > 1 
```

# iis-express - 在运行时重置 IIS Express

> ID：15987695
> 
> 赞同：0
> 
> 时间：2013-04-13T12:17:18.087
> 
> 标签：iis-express

我有一些测试需要我在运行它们之前重新启动 IIS。使用成熟的 IIS，这就像`iisreset`从`Process.start`.

我现在遇到的问题是我的一台计算机使用的是老旧的 Windows XP，因此它不支持 IIS7。我安装了 IIS Express，但我似乎无法找到通过命令行或某种服务重新启动 IIS Express（或重新启动单个网站）的方法。

关于 SO 和其他地方的一些问题建议重新启动`MsDevSvc`服务，但这似乎与 IIS Express 无关。

**编辑：**这个解决方案看起来很有希望：[https ://stackoverflow.com/a/4777927/210780](https://stackoverflow.com/a/4777927/210780)

# microsoft-metro - 我可以使用什么控件在多列中显示文本？

> ID：15987702
> 
> 赞同：1
> 
> 时间：2013-04-13T12:18:02.650
> 
> 标签：microsoft-metro, windows-store-apps, modern-ui

我想知道 Windows 8 中“新闻应用程序”中使用的多列文本控件是什么：

![在此处输入图像描述](https://i.stack.imgur.com/sbJpB.png)

我见过[这个微软的例子](http://code.msdn.microsoft.com/windowsapps/XAML-text-display-sample-2593ba0a/)，他们在网格中使用了固定的 RichTextBlock 和 RichTextBlockOverflow。必须有更好的方法来做到这一点（我希望）。你知道如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:49:27.087

不幸的是，如果您在 XAML 中创建应用程序，那么这是最好的方法。但是，如果您使用 HTML5/JavaScript 创建应用程序，则可以使用 CSS 溢出属性来实现。

2012 年 BUILD 会议上有一段视频，展示了这是如何完成 [的：构建出色阅读体验](http://channel9.msdn.com/Events/Build/2012/3-118) 的关键技术 - 溢出部分在大约 20 分钟后开始。

*注意：该视频讨论了 HTML5 和 XAML 的可能性和限制，并展示了它是如何完成的。*

# java - 重新创建一个对象而不删除最后一个

> ID：15987703
> 
> 赞同：1
> 
> 时间：2013-04-13T12:18:05.193
> 
> 标签：java, android, android-canvas, ondraw

我正在创建一个允许用户在屏幕上绘图的应用程序。我的代码实际上创建了一个路径，然后创建了一行。但是，当用户拿起屏幕的手指并转到屏幕的另一部分时，它会在下一个视频中出现一条线。 [http://youtu.be/CBv1wtUC2g4](http://youtu.be/CBv1wtUC2g4)

以下代码是drawview的代码。

```
public class DrawView extends View implements OnTouchListener {
private static final String TAG = "DrawView";

List<Point> points = new ArrayList<Point>();
Paint paint = new Paint();
int action;
int draw=0;
Boolean finger=true;

public DrawView(Context context) {
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);

    this.setOnTouchListener(this);

    paint.setColor(Color.BLACK);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(5);
    paint.setAntiAlias(true);
    }

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub

    Path path = new Path();
    boolean first = true;

        for(int i = 0; i < points.size(); i += 2){
            Point point = points.get(i);

                if(first){
                    first = false;
                    path.moveTo(point.x, point.y);
                }
                else if(i < points.size() - 1){
                    Point next = points.get(i + 1);
                    path.quadTo(point.x, point.y, next.x, next.y);
                }
                else {
                    path.lineTo(point.x, point.y);
                }

            }

    canvas.drawPath(path, paint);       

}
    public boolean onTouch(View view, MotionEvent event) {
        action = event.getAction();

        Point point = new Point();
        point.x = event.getX();
        point.y = event.getY();
        points.add(point);
        invalidate();    
        Log.d(TAG, "point: " + point);

        if (action == MotionEvent.ACTION_MOVE) {
            finger = true;
       }
       if (action == MotionEvent.ACTION_UP) {
            finger = false;
       }
       draw++;
        return true;
    }
}

class Point {
    float x, y;

    @Override
    public String toString() {
        return x + ", " + y;
    }
} 
```

另外我认为也许我想要的是一个包含对象（路径和线条）的数组，但我不知道该怎么做。使用这种方法，我认为我可以回去删除最后一个对象，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:58:37.963

每次用户抬起手指时，您都需要创建不同的“路径”。我已经改变了你的代码来做到这一点。试试看它是否是你需要的。

```
import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class DrawView extends View implements OnTouchListener {

    private static final String TAG = "DrawView";

    private List<List<Point>> _paths = new ArrayList<List<Point>>();
    private List<Point> _lastPath;
    private Paint _paint = new Paint();
    private Path _path = new Path();

    public DrawView(Context context) {
        super(context);

        setFocusable(true);
        setFocusableInTouchMode(true);
        setOnTouchListener(this);

        _paint.setColor(Color.BLACK);
        _paint.setStyle(Paint.Style.STROKE);
        _paint.setStrokeWidth(5);
        _paint.setAntiAlias(true);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        for (List<Point> pointsPath : _paths) {
            _path.reset();
            boolean first = true;

            for (int i = 0; i < pointsPath.size(); i += 2) {
                Point point = pointsPath.get(i);

                if (first) {
                    first = false;
                    _path.moveTo(point.x, point.y);
                } else if (i < pointsPath.size() - 1) {
                    Point next = pointsPath.get(i + 1);
                    _path.quadTo(point.x, point.y, next.x, next.y);
                } else {
                    _path.lineTo(point.x, point.y);
                }
            }
            canvas.drawPath(_path, _paint);
        }
    }

    public boolean onTouch(View view, MotionEvent event) {
        Point point = new Point();
        point.x = event.getX();
        point.y = event.getY();
        Log.d(TAG, "point: " + point);

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            _lastPath = new ArrayList<Point>();
            _lastPath.add(point);
            _paths.add(_lastPath);
            break;
        case MotionEvent.ACTION_MOVE:
            _lastPath.add(point);
            break;
        }
        invalidate();
        return true;
    }

    private class Point {
        float x, y;

        @Override
        public String toString() {
            return x + ", " + y;
        }
    }
} 
```

# android - 退出和重新进入应用程序时，带有edittext的Listview崩溃

> ID：15987706
> 
> 赞同：2
> 
> 时间：2013-04-13T12:18:15.157
> 
> 标签：android, listview, android-edittext

我在 viewpager 中有一个 Listfragment，该片段只包含

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    Log.e("Starter", "Starter");
    View v = inflater.inflate(R.layout.chat, container, false);

    text = (EditText) v.findViewById(R.id.text);

    return v;

} 
```

chat.xml 文件包含

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="45dp" >
</ListView>

<EditText
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/button1"
    android:layout_toLeftOf="@+id/button1"
    android:ems="10"
    android:inputType="textMultiLine" >
</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Send" /> 
```

我可以按 EditText，键盘就会出现，如果我按后退按钮，它就会消失。当键盘升起或按下时，列表视图会改变大小。

所有这一切都很好，直到我按下主页按钮，等待一两秒钟，然后再次进入应用程序。然后我收到以下错误：

我在列表中没有任何位图，也没有任何会导致此错误的内容。在您退出应用程序、重新进入并单击 EditText 之前，这一切都有效。

如果有人知道为什么会发生这种情况，很高兴收到您的来信！

* * *

```
04-13 14:02:06.121: E/AndroidRuntime(19976): FATAL EXCEPTION: main
04-13 14:02:06.121: E/AndroidRuntime(19976): java.lang.IllegalArgumentException: Cannot draw recycled bitmaps
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.GLES20Canvas.drawBitmap(GLES20Canvas.java:797)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.GLES20RecordingCanvas.drawBitmap(GLES20RecordingCanvas.java:117)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.graphics.drawable.BitmapDrawable.draw(BitmapDrawable.java:393)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.widget.ImageView.onDraw(ImageView.java:1095)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.draw(View.java:13553)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12504)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.draw(View.java:13277)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.drawChild(ViewGroup.java:2947)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2817)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12502)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.draw(View.java:13277)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.drawChild(ViewGroup.java:2947)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2817)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.draw(View.java:13556)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.widget.FrameLayout.draw(FrameLayout.java:467)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.widget.ScrollView.draw(ScrollView.java:1562)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12504)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.draw(View.java:13277)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.drawChild(ViewGroup.java:2947)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2817)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12502)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.draw(View.java:13277)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.drawChild(ViewGroup.java:2947)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2817)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12502)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2929)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12440)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2929)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12440)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2929)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12440)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2929)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12440)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.View.getDisplayList(View.java:12548)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1170)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2432)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2286)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2053)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1151)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4661)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.Choreographer.doFrame(Choreographer.java:525)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.os.Handler.handleCallback(Handler.java:615)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.os.Looper.loop(Looper.java:155)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at android.app.ActivityThread.main(ActivityThread.java:5493)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at java.lang.reflect.Method.invokeNative(Native Method)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at java.lang.reflect.Method.invoke(Method.java:511)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
04-13 14:02:06.121: E/AndroidRuntime(19976):    at dalvik.system.NativeStart.main(Native Method) 
```

# java - JAVA：无法运行 jar 文件

> ID：15987708
> 
> 赞同：1
> 
> 时间：2013-04-13T12:18:28.147
> 
> 标签：java, jar, noclassdeffounderror, manifest.mf

我是 JAVA 新手，无法弄清楚我创建的项目有什么问题。

我在 Eclipse 中创建了一个 JAVA 项目并导出了一个 jar（不可运行的 jar）。我在导出时未选中 .project 和 .classpath 文件选项。现在我正在尝试运行该 jar 并获得 NoClassDefFoundError：

我正在粘贴命令和以下错误：

```
C:\Users\Anjali>"C:\Program Files\Java\jre7\bin\java.exe" -classpath D:\Web\Hbas
eGateway\bin;C:\Users\Anjali\Downloads\Hbase\hbase-0.94.5-security.jar;C:\Users\
Anjali\Downloads\Hbase\lib\hadoop-core-1.0.4.jar;C:\Users\Anjali\Downloads\Hbase
\py4j0.7.jar -jar D:\Web\HbaseGateway\bin\HBaseGateway.jar
Exception in thread "main" java.lang.NoClassDefFoundError: py4j/GatewayServer
        at hbase.gateway.HBaseGatewayEntryPoint.main(HBaseGatewayEntryPoint.java
:22)
Caused by: java.lang.ClassNotFoundException: py4j.GatewayServer
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 1 more 
```

现在，有趣的是我可以使用以下命令运行主类。在下面的命令中，我删除了 -jar 开关并将主类传递给 java.exe。

```
C:\Users\Anjali>"C:\Program Files\Java\jre7\bin\java.exe" -classpath D:\Web\Hbas
eGateway\bin;C:\Users\Anjali\Downloads\Hbase\hbase-0.94.5-security.jar;C:\Users\
Anjali\Downloads\Hbase\lib\hadoop-core-1.0.4.jar;C:\Users\Anjali\Downloads\Hbase
\py4j0.7.jar hbase.gateway.HBaseGatewayEntryPoint
Gateway Server Started 
```

为什么`NoClassDefFoundError`会被抛出？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T12:26:16.260

要使**-jar**选项起作用，您必须在清单中添加**Main-class键。**请参阅 java 命令文档[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)

**-jar 选项**

执行封装在 JAR 文件中的程序。第一个参数是 JAR 文件的名称，而不是启动类名称。为了使此选项起作用，JAR 文件的清单必须包含格式为**Main-Class: classname**的行。在这里，classname 标识具有用作应用程序起点的 public static void main(String[] args) 方法的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:42:41.050

当您使用该`-jar`选项时，也会从`MANIFEST.mf`文件中读取类路径。从该`-jar`选项的文档中：

> 使用此选项时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。

这意味着您必须`Class-Path`在清单文件的一部分中添加所有依赖项。

# node.js - 使用 Node.js 在 Icecast 上进行流式传输的任何方式？

> ID：15987709
> 
> 赞同：3
> 
> 时间：2013-04-13T12:18:32.780
> 
> 标签：node.js, icecast

我正在寻找一种使用nodejs或其他类似框架在icecast流上以浮点值形式流式传输音频数据的方法。我看过某些框架，但它们似乎都只能从现有流中读取数据或将元数据注入到现有流中。

任何帮助都会很棒。

# c# - 在 C# 中处理粘贴事件

> ID：15987712
> 
> 赞同：7
> 
> 时间：2013-04-13T12:18:46.243
> 
> 标签：c#, .net, regex, static-methods, paste

我创建了一个静态类数字文本框，但我不想控制用户在文本框中粘贴的内容。为了处理粘贴事件，我使用 textchanged 事件：

```
 static public void textChanged(EventArgs e, TextBox textbox, double tailleMini, double tailleMaxi, string carNonAutorisé)
    {            
        //Recherche dans la TextBox, la première occurrence de l'expression régulière.
        Match match = Regex.Match(textbox.Text, carNonAutorisé);
        /*Si il y a une Mauvaise occurence:
         *   - On efface le contenu collé
         *   - On prévient l'utilisateur 
         */
        if (match.Success)
        {
            textbox.Text = "";
            MessageBox.Show("Votre copie un ou des caractère(s) non autorisé", "Attention", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }
        tailleTextBox(textbox, tailleMini, tailleMaxi);
    } 
```

在另一个类中，我像这样使用这个静态方法

```
 private void tbxSigné_TextChanged(object sender, EventArgs e)
    {
        FiltreTbx.textChanged(e, tbxSigné, double.MinValue, double.MaxValue, @"[^\d\,\;\.\-]");
    } 
```

我不想做的是这样的：

```
 if (match.Success)
    {
        textbox.Text = //Write the text before users paste in the textbox;

    } 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T14:08:31.503

首先，您是否考虑过使用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)代替？它可以为您处理字符过滤。

然而，为了这个练习，你可以想出一个沿着这条线的解决方案。这是用法：

```
public Form1()
{
    InitializeComponent();

    FiltreTbx.AddTextBoxFilter(tbxSigné,
                               double.MinValue, double.MaxValue,
                               @"[^\d\,\;\.\-]");
} 
```

这`AddTextBoxFilter`是一个新的静态方法，您只调用一次。它会将 TextChanged 处理程序添加到`TextBox`. 此处理程序使用[闭包](http://csharpindepth.com/articles/chapter5/closures.aspx)将先前的内容存储`Text`在文本框中。

您的静态方法获得了一个额外的参数来传递前面的文本。

```
public class FiltreTbx
{
    public static void AddTextBoxFilter(TextBox textbox,
                                        double tailleMini, double tailleMaxi,
                                        string carNonAutorisé)
    {
        string previousText = textbox.Text;

        textbox.TextChanged +=
            delegate(object sender, EventArgs e)
            {
                 textChanged(e, textbox, tailleMini, tailleMaxi,
                             carNonAutorisé, previousText);
                 previousText = textbox.Text;
            };
    }

    static public void textChanged(EventArgs e, TextBox textbox,
                                   double tailleMini, double tailleMaxi,
                                   string carNonAutorisé, string previousText)
    {
        //Recherche dans la TextBox, la première occurrence de l'expression régulière.
        Match match = Regex.Match(textbox.Text, carNonAutorisé);
        /*Si il y a une Mauvaise occurence:
         *   - On efface le contenu collé
         *   - On prévient l'utilisateur 
         */
        if (match.Success)
        {
            // Set the Text back to the value it had after the previous
            // TextChanged event.
            textbox.Text = previousText;
            MessageBox.Show("Votre copie un ou des caractère(s) non autorisé",
                            "Attention", MessageBoxButtons.OK,
                            MessageBoxIcon.Information);
        }
        tailleTextBox(textbox, tailleMini, tailleMaxi);
    }
} 
```

我不确定`tailleTextBox`应该做什么，您没有包含该源代码，但我怀疑它强制执行最小值和最大值？

## 替代解决方案

如果您想自己处理粘贴操作，甚至在它发生之前，您将不得不拦截`WM_PASTE`到文本框的消息。一种方法是创建一个专门的控件：

```
using System;
using System.Windows.Forms;

class MyTextBox : TextBox
{
    private const int WM_PASTE = 0x0302;

    protected override void WndProc(ref Message m)
    {
        if (m.Msg != WM_PASTE)
        {
            // Handle all other messages normally
            base.WndProc(ref m);
        }
        else
        {
            // Some simplified example code that complete replaces the
            // text box content only if the clipboard contains a valid double.
            // I'll leave improvement of this behavior as an exercise :)
            double value;
            if (double.TryParse(Clipboard.GetText(), out value))
            {
                Text = value.ToString();
            }
        }
    }
} 
```

如果您在 WinForms 项目中定义该类，您应该能够像任何其他控件一样将其拖到您的表单上。

# python - 可迭代的通用基类？

> ID：15987715
> 
> 赞同：7
> 
> 时间：2013-04-13T12:18:56.777
> 
> 标签：python, list, python-3.x, iterator, tuples

我正在尝试创建一个只接受可迭代参数的方法，例如`list`,或.`tuple``set``dict`

这是我的代码：

```
class MjmMenuControl(MjmBaseMenu):
    def __init__(self, items=None):
        iterables = (dict, list, set, tuple)
        for iterable in iterables:
            if isinstance(items, iterable):
                ...
                break 
```

但是，我想知道是否有更简单的方法，例如`if isinstance(items, <iterable_base_class>):`但我找不到任何东西。

我已经尝试为`list`等找到基类，但它们似乎都来自`object`：

```
>>> inspect.getmro(list)
(<class 'list'>, <class 'object'>)
>>> inspect.getmro(tuple)
(<class 'tuple'>, <class 'object'>) 
```

这是可能的还是我必须坚持可怕的`for`循环？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-13T12:19:46.810

是的，使用[`collections.abc.Iterable`](http://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable)：

```
>>> from collections import abc
>>> isinstance(set(), abc.Iterable)
True
>>> isinstance((), abc.Iterable)
True
>>> isinstance([], abc.Iterable)
True
>>> isinstance('', abc.Iterable)
True
>>> isinstance({}, abc.Iterable)
True
>>> isinstance(0, abc.Iterable)
False 
```

但是，我只是让方法*假设*它传递了一个可迭代对象，*调用者*有责任确保传入正确的类型。

该[`collections.abc`模块](https://docs.python.org/3/library/collections.abc.html)是 Python 3.3 中的新模块；它的内容以前存在于[`collections`模块](https://docs.python.org/2/library/collections.html)中，尽管即使在 Python 3.3 及更高版本中，这些名称仍然可以在旧位置使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T13:11:33.030

该选项的一个弱点`collections.abc.Iterable`是它无法处理像这样的自定义可迭代类......

```
from collections.abc import Iterable

class MyIterable(object):
    def __getitem__(self, index):
        if index >= 10:
            raise IndexError
        return index

>>> myiter = MyIterable()
>>> isinstance(myiter, Iterable)
False
>>> [i for i in myiter]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

人们经常声称这样做的“Pythonic”方式是使用[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)，即尝试将对象视为可迭代对象，并在失败时处理异常。例如...

```
class MjmMenuControl(MjmBaseMenu):
    def __init__(self, items=None):
        try:
            for item in items:
                do_something_with(item)
        except TypeError:
            # If we get here, 'items' is not iterable
            do_something_else() 
```

...但是，这两种方法都具有将字符串视为与列表相同的弱点，这通常不是您想要的。通常你想测试一个可迭代的**容器**，它略有不同，所以通常会看到将字符串视为特殊情况的代码......

```
class MjmMenuControl(MjmBaseMenu):
    def __init__(self, items=None):
        if isinstance(items, (str, bytes)):
            do_something_else()
        else:
            try:
                for item in items:
                    do_something_with(item)
            except TypeError:
                # If we get here, 'items' is not iterable
                do_something_else() 
```

...这有点乱，但可以完成工作。

# php - 如何在php中的图像上画一条垂直线

> ID：15987728
> 
> 赞同：0
> 
> 时间：2013-04-13T12:20:04.167
> 
> 标签：php, line, draw, image

我正在制作一个显示不同图片的反机器人，并要求用户单击特定图片。但是，我希望每次对图片进行一些小的随机更改，以便软件无法分析和确定正在显示的图片...

我希望每次在随机坐标处添加一条水平线和一条垂直线，颜色随机到图片中，然后使用 get_file_contents 和标题显示图片。

希望这是有道理的...我不希望将更改保存到图片中，而只显示给用户...我正在使用 file_get_contents 和 header 来显示图片，如下所示：

```
$id = $_GET['id'];
$image = "images/".$id . ".jpg";
$content = file_get_contents($image); 
header('Content-Type: image/jpeg');
echo $content;
exit() 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:31:15.813

有很多[PHP GD 函数可用于实现这一点](http://www.php.net/manual/en/ref.image.php)，我认为下面的代码片段可能会对您有所帮助

```
<?php

$im = imagecreatefrompng("images/yourImage.png");
$white = imagecolorallocate($im, 0xFF, 0xFF, 0xFF);

// Draw a vertical dashed line
imagedashedline($im, 50, 25, 50, 75, $white);

// Save the image
imagepng($im, './imagewithdashedline.png');
imagedestroy($im);
?> 
```

参考[PHP GD imagedashedline 函数](http://php.net/manual/en/function.imagedashedline.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:27:51.830

在 PHP 中使用 GD 将允许您执行此操作

```
http://php.net/manual/en/book.image.php 
```

创建一个名为 image.php 的文件

从 php 手册：

```
<?php

header("Content-type: image/png");
$string = $_GET['text'];
$im     = imagecreatefrompng("images/button1.png");
$orange = imagecolorallocate($im, 220, 210, 60);
$px     = (imagesx($im) - 7.5 * strlen($string)) / 2;
imagestring($im, 3, $px, 9, $string, $orange);
imagepng($im);
imagedestroy($im);

?> 
```

您可以使用 imageline 函数添加一条线

```
<?php

header("Content-type: image/png");
$string = $_GET['text'];
$im     = imagecreatefrompng("images/button1.png");
$orange = imagecolorallocate($im, 220, 210, 60);
$px     = (imagesx($im) - 7.5 * strlen($string)) / 2;
imagestring($im, 3, $px, 9, $string, $orange);
imageline($im, $x1, $y1, $x2, $y2, $orange);
imagepng($im);
imagedestroy($im);

?> 
```

# unobtrusive-javascript - 不显眼的 Javascript onclick

> ID：15987733
> 
> 赞同：5
> 
> 时间：2013-04-13T12:20:37.550
> 
> 标签：unobtrusive-javascript

我最近在阅读 Unobtrusive javascript 并决定试一试。我是否决定使用这种风格将在以后确定。这只是出于我自己的好奇心，而不是出于任何时间限制的项目。

现在，我正在查看示例代码，很多示例似乎都在使用，让我永远发现的是 jQuery。他们使用像 $('class-name').whatever(...); 这样的函数。

好吧，我更喜欢 $('class').function 的外观，所以我尝试在不使用 jQuery 的情况下模拟它（因为我不知道 jQuery 并且不关心 atm）。但是，我无法使这个示例工作。

这是我的 jsFiddle：http: [//jsfiddle.net/dethnull/K3eAc/3/](http://jsfiddle.net/dethnull/K3eAc/3/)

```
<!DOCTYPE html>
<html>
<head>
    <title>Unobtrusive Javascript test</title>
<script>
    function $(id) {
        return document.getElementById(id);
    }

    $('tester').onclick(function () {
        alert('Hello world');
    });
</script>
<style>
    .styled {
        width: 200px;
        margin-left: auto;
        margin-right: auto;
        font-size: 2em;
    }
    a {
        cursor: pointer;
        color: blue;
    }
    a:hover {
        text-decoration: underline;
    }   
</style>
</head>
    <body>
        <div class='styled'>
            <ul>
                <li><a id='tester'>CLICK ME</a></li>
            </ul>

         </div> 
     </body>
</html> 
```

当您单击链接时，我希望会弹出一个警告框，但似乎没有发生。在 chrome 中检查控制台时，它会显示此消息“Uncaught TypeError: Cannot call method 'onClick' of null”

我不是 javascript 专家，所以很可能我做错了什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-05T17:33:09.763

试试这个代码，

**脚本**

```
function $(id) {
    return document.getElementById(id);
}

$('tester').addEventListener('click', function () {
    alert('Hello world');
}); 
```

当您控制此`$('tester')`选择器时，它只返回`<a id='tester'>CLICK ME</a>`哪个是 html 元素而不是对象，因此您不能直接使用 onclick。相反，您必须使用`addEventListener`或`attachEvent`绑定单击事件

**演示 JS** [http://jsfiddle.net/K3eAc/4/](http://jsfiddle.net/K3eAc/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-08T11:38:01.957

您不需要`addEventListener`或`attachEvent`：[**现场演示**](http://jsbin.com/cinoj/1/edit?html,output)。

编码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Unobtrusive Javascript test</title>
<style>
.styled {
    width: 200px;
    margin-left: auto;
    margin-right: auto;
    font-size: 2em;
}
</style>
</head>
<body>

    <div class="styled">
        <ul>
            <li><a href="#" id="tester">CLICK ME</a></li>
        </ul>
    </div>

<script>
var tester = document.getElementById('tester');
tester.onclick = function() {
    alert('Hello world');
}
</script>

</body>
</html> 
```

.
我在实践中比在理论上更好，但在我看来，将目标元素转换为变量后，它就变成了一个对象。在 IE8/9、Chrome25 和 FF30 中测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T12:32:11.837

试试这个

```
function $(id) {
    return document.getElementById(id);
}
var a = $('tester');
a.onclick = (function () {
    alert('Hello world');
}); 
```

参考：[https ://developer.mozilla.org/en-US/docs/DOM/element.onclick](https://developer.mozilla.org/en-US/docs/DOM/element.onclick)

# c# - DotNetOpenAuth Twitter Authenticaion 返回 401 Unauthorized

> ID：15987734
> 
> 赞同：5
> 
> 时间：2013-04-13T12:20:52.920
> 
> 标签：c#, oauth, twitter-oauth, dotnetopenauth

我开始用 Twitter 撕扯我的头发并尝试登录一个用户！！！我的 Facebook、Google、OpenId 都运行良好，只是 Twitter 很麻烦。

当我尝试运行我的代码时，我不断得到 401 Unauthorized 并且我一生都无法弄清楚为什么。

我创建了一个 twitter 客户端，并将它与 DotNetOpenAuth 示例解决方案中的 InMemoryTokenManager 一起使用。我的 Twitter 客户端在这里

```
public class TwitterClient
{
    private string UserName { get; set; }

    private static readonly ServiceProviderDescription ServiceDescription =
        new ServiceProviderDescription
        {
            RequestTokenEndpoint = new MessageReceivingEndpoint(
                                       "https://api.twitter.com/oauth/request_token",
                                       HttpDeliveryMethods.GetRequest |
                                       HttpDeliveryMethods.AuthorizationHeaderRequest),

            UserAuthorizationEndpoint = new MessageReceivingEndpoint(
                                      "https://api.twitter.com/oauth/authorize",
                                      HttpDeliveryMethods.GetRequest |
                                      HttpDeliveryMethods.AuthorizationHeaderRequest),

            AccessTokenEndpoint = new MessageReceivingEndpoint(
                                      "https://api.twitter.com/oauth/access_token",
                                      HttpDeliveryMethods.GetRequest |
                                      HttpDeliveryMethods.AuthorizationHeaderRequest),

            TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
        };

    IConsumerTokenManager _tokenManager;

    public TwitterClient(IConsumerTokenManager tokenManager)
    {
        _tokenManager = tokenManager;
    }

    public void StartAuthentication()
    {
        var request = HttpContext.Current.Request;
        using (var twitter = new WebConsumer(ServiceDescription, _tokenManager))
        {
            var callBackUrl = new Uri(request.Url.Scheme + "://" + request.Url.Authority + "/Members/TwitterCallback");
            twitter.Channel.Send(
                twitter.PrepareRequestUserAuthorization(callBackUrl, null, null)
            );
        }
    }

    public bool FinishAuthentication()
    {
        using (var twitter = new WebConsumer(ServiceDescription, _tokenManager))
        {
            var accessTokenResponse = twitter.ProcessUserAuthorization();
            if (accessTokenResponse != null)
            {
                UserName = accessTokenResponse.ExtraData["screen_name"];
                return true;
            }
        }

        return false;
    }
} 
```

我的 MembersController 的构造函数中有以下内容，它使用正确的凭据实例化 InMemoryTokenManager

```
_tokenManager = new InMemoryTokenManager(ConfigUtils.GetAppSetting("TwitterAppId"), ConfigUtils.GetAppSetting("TwitterAppSecret")); 
```

我的两个动作是

```
 public ActionResult LogonTwitter()
    {
        var client = new TwitterClient(_tokenManager);
        client.StartAuthentication();
        return null;
    }

    public ActionResult TwitterCallback()
    {
        var client = new TwitterClient(_tokenManager);

        if (client.FinishAuthentication())
        {
            return new RedirectResult("/");
        }

        // show error
        return View("LogOn");
    } 
```

错误出现在我的 TwitterClient的**StartAuthentication()中。**只要它调用这条线

```
twitter.Channel.Send(
                twitter.PrepareRequestUserAuthorization(callBackUrl, null, null)
            ); 
```

我收到以下错误

```
Error occurred while sending a direct message or getting the response.
Inner Exception: The remote server returned an error: (401) Unauthorized. 
```

有人有什么建议吗？我昨天和今天早上的大部分时间都在试图解决这个问题。我尝试过的所有在线示例似乎也得到了 401 Unauthorized 回复？DotNetOpenAuth 和 Twitter 是否存在已知问题？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T12:35:04.923

我不记得确切的术语，但您是否在 twitter 应用程序（以及代码）中设置了回调 URL？我最近遇到了类似的问题，即使在本地开发时我相信您需要设置该值，即使它只是一个占位符

# c++ - 如何将 *Base 分配给 *Child[n] 指向 Child 数组的下一个元素？

> ID：15987735
> 
> 赞同：2
> 
> 时间：2013-04-13T12:21:09.537
> 
> 标签：c++, oop, pointers, inheritance, parent-child

我有这个 [不完整] 功能：

```
void EditorWindow::OnLMClick(SObjectType sOT, short xPos, short yPos)
{
    SObject* pSObject;

    int nElements;

    switch(sOT)
    {
        case SOT_Tile:      nElements=TILETYPE_COUNT;       pSObject = pSOTile[0];      break;
        case SOT_Surface:   nElements=SURFACEBMP_COUNT;                                 break;
        case SOT_Object:    nElements=OBJECTBMP_COUNT;                                  break;
        case SOT_Edit:      nElements=EDITBMP_COUNT;                                    break;
        default:    MessageBox(NULL,"Switch does not include this SObjectType","Error in EditorWindow::OnLMClick()",NULL); return;
    }

    // From there on, pSObject may be pointing to any array of its child classes
    for (int n = 0; n<nElements; n++)
    {
        if (xPos > pSObject->coor.X &&
            xPos < pSObject->coor.X + pSObject->size.Width &&
            yPos > pSObject->coor.Y &&
            yPos < pSObject->coor.Y + pSObject->size.Height)
        {
            selectedItemRect.left       =       pSObject->coor.X;
            selectedItemRect.top        =       pSObject->coor.Y + pSObject->size.Width;
            selectedItemRect.right      =       pSObject->coor.X;
            selectedItemRect.bottom     =       pSObject->coor.Y + pSObject->size.Height;
        }
        *(pSObject++);
    }
    Display();
} 
```

我试图让 pSObject 指向数组 pSOTile 的下一个元素。我怎样才能做到这一点？请注意，由于我将更新函数，pSObject 最终将有可能指向其他子对象，而不仅仅是 SOTile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:14:17.023

好吧，也许这对你不起作用，但它让我想起了在学校迭代数据结构。通常，我会在类中声明一个类指针成员。由于您想指出的不仅仅是 CTile，我将假设您正在使用类继承来实现您的目标，也许不是。

```
class YourClass : public base {
    private:
        // Your Stuffs
    public:
        // More stuffs
} 
```

现在，在 base 中，声明一个静态向量 base* 指针，您将始终在构造函数中 push_back。然后当你想迭代对象时，你可以迭代指针。

```
class base {
    private:
        static std::vector<base*> AllMyFoos;
    //rest of your foos
} 
```

在你的 .cpp 中不要忘记初始化。`std::vector<base*> base::AllMyFoos;` 在所有继承基的构造函数中添加：

```
MyNewClass::MyNewClass() {
    AllMyFoos.push_back(this);
    //more stuff
} 
```

然后你可以迭代并访问所有子函数

```
//Non iter version because that stuff creeps me out
for (int i = 0; i < AllMyFoos.size(); i++ ) {
     AllMyFoos->SomeFunction() 
     //will access most derived function of SomeFunction() if you declared everything virtual.   
     //Either can be a base function or a derived function of MyNewClass.
} 
```

我认为这就是我的做法，但我不能简单地将其注入您的示例代码中，也不知道这是否可能。

# java - 应用程序在 Netbeans 中的运行方式不同

> ID：15987739
> 
> 赞同：1
> 
> 时间：2013-04-13T12:21:20.487
> 
> 标签：java, jvm

我需要使用这 2 个 VM 选项运行我的应用程序：(-XX:+UseConcMarkSweepGC -Xmx2048m)。我将它们设置为 Netbeans 中的“项目属性 -> 运行 -> VM 选项”。然后，当我在 Netbeans 中运行它时，它工作得很好，但在 Netbeans 或另一台电脑上却没有。

是否可以让我的应用程序始终使用这些 VM 选项运行？（在运行应用程序之前没有在控制台中设置它）

需要怎么做？（我的项目属性方法好像不对）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:10:02.483

可能最简单的方法是创建一个简单的批处理文件，该文件使用相关选项执行 Java 应用程序。

```
java -XX:+UseConcMarkSweepGC -Xmx2048m -jar MyApp.jar 
```

将其另存为 MyApp.cmd（假设此处为 Windows 操作系统）与 JAR 文件在同一文件夹中，应该就是这样 - 只需双击 .cmd 文件。

此方法还需要在 OS 路径中包含 Java，但现在默认 Java 安装应该是这种情况。

# javascript - 如果将 Java Script 放在 h:panelGroup 中，则不会调用 h:commandLink

> ID：15987741
> 
> 赞同：0
> 
> 时间：2013-04-13T12:21:26.473
> 
> 标签：javascript, jquery, jsf, jsf-1.2

下面是代码，

```
<h:panelGroup rendered="#{myBean.showDialogBox}"> //Boolean value from bean decides
//if Jquery Dialog box has to be shown or not for this User.

<script type="text/javascript">
/* <![CDATA[ */

   var $h=jQuery.noConflict();          
   function myFunction() 
   {

        $h(document).ready(function() {

            $h("#someDivID").dialog({

                // Dialog box attributes go here
        });
   }

   myFunction();  // Call myFunction to render Jquery Dialog box

/* ]]> */
</script>

<div id="someDivID"> //Below JSF component gets displayed inside Jquery Dialog box
    <h:commandLink value="Click Here" action="#{myBean.someMethod}"></h:commandLink>
</div>

</h:panelGroup> 
```

**问题：** 如果我删除`h:panelGroup`，我的`h:commandLink`工作正常（调用 bean 方法）。但是，我无法删除`h:panelGroup`，因为此对话框必须根据预定义的条件仅向少数用户显示。我想`rendered`利用`h:panelGroup`.

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:43:27.493

它可能是跨度问题中的 div。尝试在 h:panelGroup 中添加 layout="block" ，使其呈现为 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:17:59.043

通过放置`h:panelGroup`刚刚解决它`</script>`

下面是代码，

```
<h:panelGroup rendered="#{myBean.showDialogBox}"> //Boolean value from bean decides
//if Jquery Dialog box has to be shown or not for this User.

<script type="text/javascript">
/* <![CDATA[ */

   var $h=jQuery.noConflict();          
   function myFunction() 
   {

        $h(document).ready(function() {

            $h("#someDivID").dialog({

                // Dialog box attributes go here
        });
   }

   myFunction();  // Call myFunction to render Jquery Dialog box

/* ]]> */
</script>

</h:panelGroup> // This is what was required

<div id="someDivID"> //Below JSF component gets displayed inside Jquery Dialog box
    <h:commandLink value="Click Here" action="#{myBean.someMethod}"></h:commandLink>
</div> 
```

但是，如果有人可以解释这一点，将不胜感激。

# ruby-on-rails - nested_form 不保存到模型 Rails 3

> ID：15987743
> 
> 赞同：0
> 
> 时间：2013-04-13T12:21:31.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, nested-forms, model-associations

我认为我走在正确的道路上，尽管我无法将表单数据保存到模型中。我有 2 个模型

```
class Prediction < ActiveRecord::Base
  attr_accessible :home_team, :away_team, :home_score, :away_score, :fixtures_attributes

  has_many :fixtures
  accepts_nested_attributes_for :fixtures
end

class Fixture < ActiveRecord::Base
  attr_accessible :home_team, :away_team, :fixture_date, :kickoff_time

  belongs_to :predictions
end 
```

为了创建一个新的预测记录，我有一个表格，它包含所有的装置并预先填充表格，用户只需在每个团队旁边添加分数

```
<%= form_for @prediction do |f| %>
<!-- Gets all fixtures -->
<%= f.fields_for :fixtures, @fixtures<!-- grabs as a collection --> do |ff| %>

<%= ff.text_field :home_team %> VS <%= ff.text_field :away_team %><%= f.text_field :home_score %><%= f.text_field :away_score %><br>

<% end %>
<%= f.submit 'Submit Predictions' %>
<% end %> 
```

然后我让我的控制器来处理新/创建操作，我认为这是我可能会摔倒的地方

```
class PredictionsController < ApplicationController

def new
 @prediction = Prediction.new
 @prediction.fixtures.build
 @fixtures = Fixture.all
end

 def create
  @prediction = Prediction.new(params[:prediction])
  @prediction.save
   if @prediction.save
    redirect_to root_path, :notice => 'Predictions Submitted Successfully'
   else
    render 'new'
end
  end
 end 
```

最后是我的路线

```
resources :predictions
resources :fixtures 
```

所以当我提交表单时，我得到了错误

```
ActiveRecord::RecordNotFound in PredictionsController#create
Couldn't find Fixture with ID=84 for Prediction with ID= 
```

查看正在解析的参数（下面的快照），有些东西看起来不正确，因为 home_score 和 away_score 没有通过。

```
{"utf8"=>"✓",
 "authenticity_token"=>"DfeEWlTde7deg48/2gji7zSHJ19MOGcMTxEsQEKdVsQ=",
  "prediction"=>{"fixtures_attributes"=>{"0"=>{"home_team"=>"Arsenal",
 "away_team"=>"Norwich",
 "id"=>"84"},
 "1"=>{"home_team"=>"Aston Villa",
 "away_team"=>"Fulham",
 "id"=>"85"},
 "2"=>{"home_team"=>"Everton",
 "away_team"=>"QPR",
 "id"=>"86"} 
```

当前输出形式

![图片](https://i.stack.imgur.com/qEuL4.png)

任何建议表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:18:03.960

When you set `@fixtures` to `Fixture.all` in the new method in your prediction controller, you are including every fixture, not just the fixtures belonging to your prediction. When the results of the form are passed to the create controller there are fixtures associated with other predictions being passed in which is the source of the error you have reported. Perhaps you want something like `@fixtures = @prediction.fixtures`.

What you are doing in the `fields_for` block also looks fairly wrong to my eyes. You are using `f.text_field` for your `home_score` and `away_score` inputs. This will repeat the same form element for the prediction model in each fixture field. You won't get the result you want from this. To be honest, I'm struggling to understand how this association makes sense. Are you able to explain it a little better? My suspicion is that your models are not quite set up the way you need them to be.

edit:

OK, I think I have a better idea of what you're trying to achieve now. You're trying to create many predictions in one form and prefill the home_team and away_team from a list of existing fixtures, right?

Okay, assuming that is so, you're definitely approaching it the wrong way. You don't need a many-to-one relationship between your prediction and fixture models (as you have correctly surmised). What you need to do is generate your form by iterating over the collection of fixtures and populating the `home_team` and `away_team` fields from the current fixture instance. Do you actually need these to be editable text fields, or are you just putting them in a text field so they get passed through? If so, you could use hidden fields instead.

The problem now though, is that Rails doesn't easily allow creating multiple records in the one form. It's not something I've done before and it would take me quite a bit of trial-and-error to make it work, but here's a best guess for one way of making it so.

```
models

class Prediction < ActiveRecord::Base
  attr_accessible :home_team, :away_team, :home_score, :away_score, :fixtures_attributes
end

class Fixture < ActiveRecord::Base
  attr_accessible :home_team, :away_team, :fixture_date, :kickoff_time
end 
```

* * *

```
controller

class PredictionsController < ApplicationController

  def new
    @prediction = Prediction.new
    @fixtures = Fixture.all
  end

  def create
    begin
      params[:predictions].each do |prediction|
        Prediction.new(prediction).save!
      end
      redirect_to root_path, :notice => 'Predictions Submitted Successfully'
    rescue
      render 'new'
    end
  end

end 
```

* * *

```
view

<%= form_tag controller: 'predictions', action: 'create', method: 'post' do %>
  <% @fixtures.each do |fixture| %>
    <%= fixture.home_team %> vs <%= fixture.away_team %>
    <%= hidden_field_tag "predictions[][home_team]", fixture.home_team %>
    <%= hidden_field_tag "predictions[][away_team]", fixture.away_team %>
    <%= text_field_tag "predictions[][home_score]" %>
    <%= text_field_tag "predictions[][away_score]" %><br />
  <% end %>
  <%= submit_tag "Submit predictions" %>
<% end %> 
```

So essentially I'm creating a form that returns an array of parameters. I can't use the model form helpers in this situation.

One way around this would be to create a dummy model that has_many predictions and create a nested form using this.

Anyway, that's a lot of untested code that may never get looked at so I'm going to leave it there for now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:52:16.237

我没有花很多时间寻找，因为我的妻子让我很快离开。但是，如果我理解正确的话，您视图中的每一行都来自固定装置和预测模型关联。您得到的参数哈希是一团糟，因为默认行为将是更新单个记录 ID 的视图。因此，您将多条记录带入一个视图并尝试一次更新多条记录。

您在模型中的创建方法

```
@prediction = Prediction.new(params[:prediction]) 
```

但是您传递的参数哈希是这样的：

```
{"utf8"=>"✓",
 "authenticity_token"=>"DfeEWlTde7deg48/2gji7zSHJ19MOGcMTxEsQEKdVsQ=",
  "prediction"=>{"fixtures_attributes"=>{"0"=>{"home_team"=>"Arsenal",
 "away_team"=>"Norwich",
 "id"=>"84"},
 "1"=>{"home_team"=>"Aston Villa",
 "away_team"=>"Fulham",
 "id"=>"85"},
 "2"=>{"home_team"=>"Everton",
 "away_team"=>"QPR",
 "id"=>"86"} 
```

因此，您必须在预测控制器中的 create 方法中获取更多逻辑，以遍历您收到的哈希并一次保存每一行。

# iphone - 在标签上设置文本期间的 iOS 6 问题

> ID：15987746
> 
> 赞同：0
> 
> 时间：2013-04-13T12:21:49.823
> 
> 标签：iphone, ios, objective-c, uilabel

我有一些标签的问题。我创建了一个公共方法，它从表格视图中获取信息，并在 3 个标签、一个文本视图中显示此信息，并从网络加载图片。我在表视图 didSelectRowAtIndexPath 方法中设置了所有变量，但是在显示该信息时遇到了一些问题。我这样做了：在表视图控制器中，我调用了另一种方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.detailCharacterViewController = [[DetailCharacterViewController alloc] init];
    [self.detailCharacterViewController setupDetailViewControllerWithName:[self.arrayCharacters[indexPath.row] objectForKey:@"name"] andSurname:[self.arrayCharacters[indexPath.row] objectForKey:@"surname"] andKind:[self.arrayCharacters[indexPath.row] objectForKey:@"kind"] andDescription:[self.arrayCharacters[indexPath.row] objectForKey:@"description"] andImage:[self.arrayCharacters[indexPath.row] objectForKey:@"URLpic"]];
} 
```

我实现了这个方法：

```
 - (void)setupDetailViewControllerWithName:(NSString*)name andSurname:(NSString *)surname andKind:(NSString*) kind andDescription:(NSString*)description andImage:(NSString*)url {
    NSLog(@"name = %@", name);
    self.labelName.text = name;
    self.labelSurname.text = surname;
    self.labelKind.text = kind;
    self.textDescription.text = description;

    NSURL *urlPic = [NSURL URLWithString:url];
    NSData *dataPic = [NSData dataWithContentsOfURL:urlPic];
    [self.imagePic setImage:[UIImage imageWithData:dataPic]];
} 
```

如果我查看日志，我会看到正确的东西，但如果我查看 iPhone 或 iPhone 模拟器上的 GUI，它将保持空白。这段代码有什么问题？感谢您的建议。

@亚历克斯布伦德尔

```
#import <UIKit/UIKit.h>

@interface DetailCharacterViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *labelName;
@property (weak, nonatomic) IBOutlet UILabel *labelSurname;
@property (weak, nonatomic) IBOutlet UILabel *labelKind;
@property (weak, nonatomic) IBOutlet UIImageView *imagePic;
@property (weak, nonatomic) IBOutlet UITextView *textDescription;

- (void)setupDetailViewControllerWithName:(NSString*)name andSurname:(NSString *)surname andKind:(NSString*) kind andDescription:(NSString*)description andImage:(NSString*)url;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:08:55.690

问题是`DetailCharacterViewController`当您调用时您的视图尚未加载`setupDetailViewControllerWithName:...`，因此没有连接任何插座（还）。通过 alloc-init 实例化视图控制器不会*自动*加载其视图。

`[self view]`您可以通过在 setup 方法的开头调用来强制加载视图。`view`这是有效的，因为如果之前没有加载该属性，访问该属性将自动加载视图。

或者，您可以制作视图控制器的`name`、`surname`等`NSString`属性，并在 中设置相应的标签`viewDidLoad`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T12:26:31.250

您是否使用 Interface Builder/Storyboards 来设计您的界面？您是否确保为每个 UITextField/View 连接 IBOutlets？

您应该在视图控制器类的头文件中识别对象，并确保它们以 IBOutlet 为前缀，以便它们出现在 Interface Builders 连接窗格中。例如

```
IBOutlet UITextField labelName;
[...] 
```

然后您需要转到 IB 并转到视图控制器的连接窗格以连接每个文本字段/视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:10:59.753

This problem happened to me as well.

It has to do with the fact that iOS actually hooks up your outlets *really really* late.

If you put a breakpoint in your `setupDetailViewControllerWithName:` and check your IBOutlet variables, they will be nil. That's why you are seeing a blank view. (The good old nil erroring)

The work-around I will do is to declare properties in the `DetailCharacterViewController` class. (Such as `@property (copy, nonatomic) NSString* name`).

And in the place where you are calling `setupDetailViewControllerWithName:`, set those properties instead such as:

`self.detailCharacterViewController.name = name;`

Finally in your `DetailCharacterViewController`'s `viewDidLoad:`, you set the values of the labels using the saved properties. (The outlets are for sure hooked up then).

(By the way, this problem exists for `prepareForSegue:` as well. The destination view controller's outlets are all still nil in `prepareForSegue:`. So you cannot set them directly there yet)

# node.js - 相当于 mongodb 中的 INET_ATON()

> ID：15987750
> 
> 赞同：4
> 
> 时间：2013-04-13T12:22:11.693
> 
> 标签：node.js, mongodb

mongodb 中的 INET_ATON() 等价物是什么？我将nodejs与mongodb一起使用，所以如果nodejs中的等价物可用，那就足够了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-04T17:43:06.130

```
// ip example: 192.168.2.1
function inet_aton(ip){
    // split into octets
    var a = ip.split('.');
    var buffer = new ArrayBuffer(4);
    var dv = new DataView(buffer);
    for(var i = 0; i < 4; i++){
        dv.setUint8(i, a[i]);
    }
    return(dv.getUint32(0));
}

// num example: 3232236033
function inet_ntoa(num){
    var nbuffer = new ArrayBuffer(4);
    var ndv = new DataView(nbuffer);
    ndv.setUint32(0, num);

    var a = new Array();
    for(var i = 0; i < 4; i++){
        a[i] = ndv.getUint8(i);
    }
    return a.join('.');
} 
```

[http://rolfrost.de/ipjs.html](http://rolfrost.de/ipjs.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T20:46:17.583

```
function inet_aton(ip){
    var a = new Array();
    a = ip.split('.');
    return((a[0] << 24) >>> 0)  + ((a[1] << 16) >>> 0) + ((a[2] << 8) >>> 0) + (a[3] >>> 0);
}

function inet_ntoa(n){
    var a = ((n >> 24) & 0xFF) >>> 0;
    var b = ((n >> 16) & 0xFF) >>> 0;
    var c = ((n >> 8) & 0xFF) >>> 0;
    var d = (n & 0xFF) >>> 0;
    return(a + "." + b + "." + c + "." + d);
} 
```

截至我的网站见下文/上文，与旧浏览器兼容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T12:30:25.513

这是其他人将 IP 地址从点分十进制字符串转换为 32 位数字的解决方案：

```
function dot2num(dot) 
{
    var d = dot.split('.');
    return ((((((+d[0])*256)+(+d[1]))*256)+(+d[2]))*256)+(+d[3]);
} 
```

从这里开始：[存储为 int 的 IP 地址会导致溢出？](https://stackoverflow.com/questions/8105629/ip-addresses-stored-as-int-results-in-overflow)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-07T17:38:58.027

这是 Javascript 中使用类型化数组的 ntoa 函数的一个版本。

```
function ntoa(ipInt) {
  var buffer = new ArrayBuffer(4);
  var uint8View = new Uint8Array(buffer);
  var uint32View = new Uint32Array(buffer);
  uint32View[0] = ipInt;
  var ipSegments = [];
  for (var i = 0; i < uint8View.length; i ++) {
    ipSegments.push(uint8View[i]);
  }
  return ipSegments.join(".");
} 
```

# linux - Linux - 它是否具有等效的 hta？

> ID：15987756
> 
> 赞同：6
> 
> 时间：2013-04-13T12:22:39.147
> 
> 标签：linux, hta

Windows 有 hta 文件。它们有点像 html 文件。它们包括 html5 和 javascript，但它们作为**完全受信任**的桌面应用程序启动。（他们使用在 IE 安装组件中找到的名为 mshta.exe 的文件来运行。）

最棒的是，您只需几行额外的代码，就可以将许多网页移植到桌面应用程序。

信息可以在这里找到：

[http://msdn.microsoft.com/en-gb/library/ms536496%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/ms536496%28v=vs.85%29.aspx)

最新版本的 Linux（可能还有苹果 mac 桌面）是否具有等效的 hta 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:27:49.963

如果您的目标是交付 HTML 内容，您可以采取更灵活的方式：使用具有 HTML 功能的 GUI 框架，如 QT。

[这里](http://qt-project.org/doc/qt-4.8/examples-webkit.html)有一个关于如何使用 webkit（网络渲染引擎）在您的 GUI 中嵌入完全工作的网络浏览器的简单示例，并且 QT 可以在许多桌面和移动平台下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T13:02:04.813

为此，您可以尝试使用[node webkit 。](https://github.com/rogerwang/node-webkit)

# javascript - Webworker 画布性能糟糕

> ID：15987760
> 
> 赞同：1
> 
> 时间：2013-04-13T12:23:01.300
> 
> 标签：javascript, html, canvas, web-worker, fractals

我正在尝试使用 webworkers 来渲染动画 mandelbrot zoomer 的部分帧，因为这涉及到很多计算，并且因为这可以很容易地分成块，这应该是并行处理的理想情况。

但是无论我尝试什么，我都没有得到任何性能来换取工人使用的额外 CPU。与非工作版本相比，在 Chrome 中我的基准测试要慢一些，在 Firefox 中要慢得多。

我的猜测是，将图像数据传输给网络工作者非常昂贵，我尝试只接收原始数据并使用它来渲染帧，但结果几乎相同。我认为这不是向工作人员发送和接收图像数据的理想方式（实际上我只需要接收它，但我无法在工作人员内部创建可直接用于画布的缓冲区） . 因此，就目前而言，发送任何大量数据都会造成真正的瓶颈。

亲爱的stackoverflow，请帮我回答这两个问题：我在这里做错了什么，有什么可以改进的？

可以在[此处为工作人员找到演示，并在](http://mandelbrot.eu01.aws.af.cm/worker/)[jsfiddle](http://jsfiddle.net/3YeMC/)上参考非工作人员版本。

代码如下：

```
"use strict";

/*global $*/

$(function() {

    var mandelbrot = new Mandelbrot();

});

var Mandelbrot = function() {

    // set some values
    this.width = 500;
    this.height = 500;

    this.x_center = -1.407566731001088;
    this.y_center = 2.741525895538953e-10;

    this.iterations = 250;
    this.escape = 4,
    this.zoom = 10;
    this.count = 0;
    this.worker_size = 10;
    this.received = 0;
    this.refresh = true;

    //let's go - create canvas, image data and workers
    this.init();
    //start animation loop
    this.animate();

};

Mandelbrot.prototype = {

    init: function() {

        var self = this;

        //create main canvas and append it to div
        var container = $("#content");

        this.canvas = document.createElement("canvas");
        this.canvas.width = this.width;
        this.canvas.height = this.height;

        container.append(this.canvas);

        //create imagedata
        this.context = this.canvas.getContext("2d");
        this.image = this.context.getImageData(0, 0, this.width, this.height);
        this.data = new Int32Array(this.image.data.buffer);

        //create imagedata for webworkers
        this.worker_data = this.context.getImageData(0, 0, this.width, this.height / this.worker_size);

        //create webworkers drop them in array
        this.pool = [];

        for (var i = 0; i < this.worker_size; i++) {

            this.pool[i] = new Worker("js/worker.js");
            this.pool[i].idle = true;
            this.pool[i].id = i;

            //on webworker finished 
            this.pool[i].onmessage = function(e) {

                self.context.putImageData(e.data, 0, self.height / self.worker_size * e.target.id);
                self.received++;

            };

        }
    },

    iterate: function() {

        for (var i = 0; i < this.pool.length; i++) {

            this.pool[i].postMessage({

                image: this.worker_data,
                id: this.pool[i].id,
                worker_size: this.worker_size,
                width: this.width,
                height: this.height,
                x_center: this.x_center,
                y_center: this.y_center,
                iterations: this.iterations,
                escape: this.escape,
                zoom: this.zoom

            });
        }
    },

    animate: function() {

        requestAnimationFrame(this.animate.bind(this));

        //poor man's benchmark over 250 frames
        if (this.count === 0) {
            console.time("timer");
        } 

        if (this.count === 250) {
            console.timeEnd("timer");
        }

        //refresh at init, then refresh when all webworkers are done and reset
        if (this.received === this.worker_size | this.refresh) {

            this.received = 0;
            this.refresh = false;
            this.count++;
            this.zoom *= 0.95;
            this.iterate();

        }
    }
}; 
```

和worker.js：

```
self.onmessage = function(e) {

    "use strict";

    var x_step = e.data.zoom / e.data.width;
    var y_step = e.data.zoom / e.data.height;

    var y_start = e.data.height / e.data.worker_size * e.data.id;
    var y_end = e.data.height / e.data.worker_size;

    var data = new Int32Array(e.data.image.data.buffer);

    for (var y = 0; y < y_end; y++) {

        var iy = e.data.y_center - e.data.zoom / 2 + (y + y_start) * y_step;

        for (var x = 0; x < e.data.width; x++) {

            var rx = e.data.x_center - e.data.zoom / 2 + x * x_step;

            var zx = rx;
            var zy = iy;
            var zx2 = 0;
            var zy2 = 0;

            for (var i = 0; zx2 + zy2 < e.data.escape && i < e.data.iterations; ++i) {

                zx2 = zx * zx;
                zy2 = zy * zy;
                zy = (zx + zx) * zy + iy;
                zx = zx2 - zy2 + rx;
            }

            data[y * e.data.width + x] = (255 << 24) | (i << 16) | (i << 8) | i;

        }
    }

    self.postMessage(e.data.image);

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-04T14:23:43.553

问题是您正在迭代父图片中的每个像素。如果将迭代限制为两个图像中较小的一个，事情会快得多。此外，如果您平铺绘图，则可以在单独的 web worker 中处理每个平铺，从而增加图像每个部分的托盘化。我写了这个：[http](http://robertleeplummerjr.github.io/CanvasWorker/) ://robertleeplummerjr.github.io/CanvasWorker/这正是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T12:05:52.463

我实际上在这个实验中尝试了同样的事情，这是一个置换过滤器：

[http://www.soundstep.com/blog/experiments/displacement-js/heart/](http://www.soundstep.com/blog/experiments/displacement-js/heart/) [http://www.soundstep.com/blog/2012/04/25/javascript-displacement-mapping/](http://www.soundstep.com/blog/2012/04/25/javascript-displacement-mapping/)

我在过滤器中创建了一个工作人员，并在将它们发布回主应用程序之前一起计算像素。基本上迭代工作人员内部的所有像素。

在工人之前，我有一个循环 4 getImageData，这不能在工人中完成。无论如何，它在 chrome 上占用大约 15% 的 CPU。

所以，总的来说，没有工人我得到 70% 的 CPU，我得到 90% 的 CPU 有工人。

我认为在工作人员中无法完成的操作，例如“getImageData”和“putImageData”，加上拥有工作人员本身的事实，比没有工作人员需要更多的 CPU。

如果我们能够发送其他类型的数据可能会更好，这样我们就可以在 worker 中执行 getImageData 和 putImageData。

不确定是否有另一种发送和接收字节的方式来处理和重建画布内容。

[http://typedarray.org/concurrency-in-javascript/](http://typedarray.org/concurrency-in-javascript/)

# activerecord - 活动记录 3.2.18 中未定义的方法“alias_method_chain”没有轨道迁移

> ID：15987761
> 
> 赞同：0
> 
> 时间：2013-04-13T12:23:08.173
> 
> 标签：activerecord, migration

这是我的 Rakefile

```
require 'bundler'
Bundler.setup
require 'active_record'
require 'sqlite3'
require 'yaml'
require 'logger'

task :migrate => :environment do
   ActiveRecord::Migrator.migrate('db/migrate', ENV["VERSION"] ? ENV["VERSION"].to_i : nil )
end

task :environment do
  ActiveRecord::Base.establish_connection(YAML::load(File.open('config/database.yaml'))['development'])
  ActiveRecord::Base.logger = Logger.new(STDOUT)
end 
```

当我执行任务时，出现此错误：

```
rake aborted!
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/base.rb:2449: warning: already initialized constant Class::VALID_FIND_OPTIONS
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/base.rb:2449: warning: previous definition of VALID_FIND_OPTIONS was here
undefined method `alias_method_chain' for #<Class:0x00000001606340>
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/base.rb:2002:in `method_missing'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/validations.rb:387:in `block in included'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/validations.rb:386:in `class_eval'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/validations.rb:386:in `included'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/base.rb:3210:in `include'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/base.rb:3210:in `block in <module:ActiveRecord>'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/base.rb:3208:in `class_eval'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/base.rb:3208:in `<module:ActiveRecord>'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/activerecord-2.3.18/lib/active_record/base.rb:5:in `<top (required)>'
/home/marco/desenv/technical_analysis/Rakefile:14:in `block in <top (required)>'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/rake-10.0.4/lib/rake/task.rb:246:in `call'
/usr/local/rvm/gems/ruby-2.0.0-p0@ta/gems/rake-10.0.4/lib/rake/task.rb:246:in `block in execute' 
```

我进行了一些调试和一些测试......**然后我转到了 3.2.13**版本的活动记录，一切都按预期工作。我没有找到 3.2.18 版本的任何文档...

我不介意使用 3.2.13 版本，但我对此感到好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:06:01.123

首先，您使用的是 ActiveRecord 2.3.18，而不是 3.2.18（据我所知，后者不存在）。ActiveRecord 2.3 已经很老了，我不相信它与您正在使用的 Ruby 2.0 兼容。

但我认为，核心问题是[在 Rails 2.2-2.3](http://apidock.com/rails/ActiveSupport/CoreExtensions/Module/alias_method_chain)中，在被移回3.0之前被移到`alias_method_chain`了模块中。你没有包括在你的任务中，我认为这就是导致问题的原因。`ActiveSupport``Module``ActiveSupport`

所以我认为快速解决方法就是`require "active_support"`.

# ios - 如何从基于 OpenGLES 的应用程序调用 presentViewController？

> ID：15987775
> 
> 赞同：0
> 
> 时间：2013-04-13T12:25:20.753
> 
> 标签：ios, objective-c, uiview, uinavigationcontroller

我正在使用 GLSprite 基本代码。我有一个 EAGLAppDelegate 和一个 EAGLView。我尝试向委托添加一个 navController 变量：

```
// AppDelegate.h
@property (nonatomic, strong) UINavigationController *navController;
// AppDelegate.m
@synthesize navController = _navController; 
```

然后在 touchesBegan 中执行以下操作（用于测试），但 navController 为 NULL 并且什么都没有出现？我怎样才能解决这个问题？

```
GLSpriteAppDelegate *ad = (GLSpriteAppDelegate *)[[UIApplication sharedApplication] delegate];

SLComposeViewController *fbController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result){
    [fbController dismissViewControllerAnimated:YES completion:nil];
    switch(result){
        case SLComposeViewControllerResultCancelled:
        default:
            NSLog(@"Cancelled.....");
            break;
        case SLComposeViewControllerResultDone:
            NSLog(@"Posted....");
            break;
    }};
//[fbController addImage:[UIImage imageNamed:@"1.jpg"]];
[fbController setInitialText:@"Test message"];
[fbController addURL:[NSURL URLWithString:@"http://www.test.com"]];
[fbController setCompletionHandler:completionHandler];
[ad.navController presentViewController:fbController animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:32:38.177

添加一个变量是不够的，你必须在里面放一些东西......

您的导航控制器 ( `navController`) 是`nil`因为您没有为它分配任何东西。另请注意，如果您希望控制器出现，导航控制器必须在屏幕上。

通常，您应该从当前控制器中呈现一个控制器。如果你正确地构建你的类，你就有了在控制器类中呈现控制器的代码。但是，您始终可以通过以下方式访问窗口根控制器

```
[ad.window.rootViewController presentViewController:...] 
```

# crash - 我的网站始终使 Safari（桌面和 iOS）崩溃

> ID：15987787
> 
> 赞同：8
> 
> 时间：2013-04-13T12:27:09.643
> 
> 标签：crash, mobile-safari, safari

我的网站[http://remotejobs.io](http://remotejobs.io)始终使 Safari 崩溃。昨晚我在 Verizon 商店时第一次注意到崩溃，我尝试在 iPad 上测试该网站的浏览器。因此，我在同一家商店又尝试了 2 台 iPad，每次我尝试访问该域时，该网站都会在所有 3 台设备上崩溃 iOS Safari。

确切的工作流程是：

1.  打开 Safari
2.  输入[http://remotejobs.io](http://remotejobs.io)

而已。一旦你点击去网站崩溃。

这也发生在桌面 Safari 上（仅在 OSX 10.8.3 的 6.0.3 中测试），并且每次都会生成错误报告。这是生成的错误报告之一的副本：http: [//go.jag.is/OGcS](http://go.jag.is/OGcS)

该站点没有抛出任何 JS 错误，并且在我测试过的其他现代浏览器上运行良好，包括 Chrome、Firefox 甚至 IE9（*令人震惊*）。

一件奇怪的事情是，它似乎只会在 iPad 上崩溃 iOS Safari，而不是 iPhone，因为我每次都可以在我的 iPhone 上成功加载该网站。

到底是什么导致了这种情况，我该如何调试它？

**更新：** *我尝试注释掉主样式表，并且该站点不再在没有该样式表的情况下使 Safari 崩溃。我尝试了常规样式表和缩小样式表，都使浏览器崩溃。*

**更新 2：** *我通过注释掉 JS 并保留 CSS 将其范围缩小到 CSS，但它仍然崩溃了。然后我尝试删除所有转换属性，它不再崩溃。显然，过渡属性导致了崩溃。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T15:56:12.253

因此，我能够根据 Adam Moore 的建议将问题缩小到 CSS，然后根据`transition`Jonathan Sampson 的评论将问题缩小到属性声明。

我删除了所有行，`transition`网站不再崩溃。

因此，我查看了这些值，并尝试统一持续时间值，看看这是否会有所帮助，因为我在不同属性中设置了几个不同的持续时间值，包括`.5s`一个、`.3s`另一个以及`.25s`更多。但是统一它们并没有影响任何事情——仍然崩溃了。

最后，我尝试将`transition-property`from更改`all`为`color`，因为`color`这是我真正改变的唯一一件事，并且不再崩溃！显然，这就是解决方案。似乎 Safari 在尝试转换所有属性时感到窒息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T13:05:38.317

您的网站似乎没有在 Windows 7 上使 Safari 5.1 崩溃。要调试导致问题的原因，首先关闭 CSS，然后逐个禁用 JS 文件，直到网站停止崩溃。一旦你弄清楚它是哪个 CSS 文件或 JS 文件，然后发布一个指向该文件的链接，我会看看我是否能提供帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-23T16:39:21.953

我在 Safari 中偶然发现了同样的问题，并尝试了这里提到的所有内容。我还检查了 CSS 验证器中的 css 并修复了一些问题。

但是我的崩溃触发器是**用百分比值填充**。我从填充转换了 %-Values，一切都很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-16T02:03:11.757

-webkit-transform-style: preserve-3d !important;

导致 Safari 因错误而不断重新加载。删除它并且它起作用了。:)。

Safari - 版本 8.0.8 (10600.8.9) OSX EL Captain

# javascript - jQuery Simpleselect 插件事件问题

> ID：15987798
> 
> 赞同：0
> 
> 时间：2013-04-13T12:28:10.470
> 
> 标签：javascript, jquery

我正在使用这个 Simpleselect 插件[http://pioul.fr/jquery-simpleselect](http://pioul.fr/jquery-simpleselect)来设计一个 HTML 选择框。它只是隐藏了选择元素并将其替换为可以轻松设置样式的 div。我遇到的问题是我需要向 select 元素添加一个事件侦听器，以检查它是否已更改。

这是我的代码，当我禁用 Simpleselect 插件时可以正常工作。

```
$("#mode").change(function() {
  console.log("changed mode");
  calcRoute();
}); 
```

该文档在页面末尾有一段关于事件的段落，但我不知道如何让它工作。

这是输出的HTML的结构......

![在此处输入图像描述](https://i.stack.imgur.com/iFMji.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:31:49.227

来自开发者[http://jsfiddle.net/pioul/xn5yT/2/的示例](http://jsfiddle.net/pioul/xn5yT/2/)

```
$("select")
    .simpleselect()
    .bind("change.simpleselect", function(){
        console.log('change; new value='+ $(this).val());
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:36:56.530

阅读文档，您只需将插件的命名空间传递给事件（默认情况下它们会更改元素 id）：

```
$("#simpleselect_mode").change(function() {
  console.log("changed mode");
  calcRoute();
}); 
```

或者你可以绑定到

```
$('#simpleselect_mode').bind('change.simpleselect', function() {
//Your code
}); 
```

# c++ - 逐像素复制两个图像

> ID：15987799
> 
> 赞同：3
> 
> 时间：2013-04-13T12:28:13.057
> 
> 标签：c++, opencv

我正在尝试处理深度图中的每个像素。（我正在实现图像分割。）我不知道如何处理深度大于 1 的图像中的像素。

此示例代码将深度图逐像素复制到另一个 cv::Mat。如果我对其进行归一化（归一化图像的深度 = 1），它可以正常工作。但它不适用于depth = 3，因为`.at<uchar>`这个深度的操作是错误的。

```
cv::Mat res; 
cv::StereoBM bm(CV_STEREO_BM_NORMALIZED_RESPONSE);
bm(left, right, res);
std::cout<<"type "<<res.type()<<" depth "<<res.depth()<<" channels "<<res.channels()<<"\n";// type 3 depth 3 channels 1
cv::Mat tmp = cv::Mat::zeros(res.rows, res.cols, res.type());
for(int i = 0; i < res.rows; i++)
{
    for(int j = 0; j < res.cols; j++)
        {
                tmp.at<uchar>(i, j) = res.at<uchar>(i, j);
                //std::cout << (int)res.at<uchar>(i, j) << " ";
    }
    //std::cout << std::endl;
}
cv::imshow("tmp", normalize(tmp));
cv::imshow("res", normalize(res)); 
```

标准化函数

```
cv::Mat normalize(cv::Mat const &depth_map)
{
    double min;
    double max;
    cv::minMaxIdx(depth_map, &min, &max);
    cv::Mat adjMap;
    cv::convertScaleAbs(depth_map, adjMap, 255 / max);
    return adjMap;
} 
```

![截屏](https://i.stack.imgur.com/egfgC.jpg)

左图 - tmp，右图 - res

如何从深度等于 3 的图像中获取像素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:30:30.963

当您的图像深度为 3 时，请执行此操作以逐像素复制：

```
tmp.at<Vec3b>(i,j) = res.at<Vec3b>(i,j); 
```

但是，如果您要复制整个图像，我不明白单独复制每个像素的意义，除非您想对不同的像素进行不同的处理。

您可以通过以下方式将整个图像 res 复制到 tmp：

```
res.copyTo(tmp); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T09:35:27.403

[`Mat::depth()`](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-depth)返回值等于表示图像的位深度的常数。例如，如果您获得的深度等于 ，`CV_32F`则需要使用像素来`float`代替`uchar`。

`CV_8S`->`char`

`CV_8U`->`uchar`

`CV_16U`->`unsigned int`

`CV_16S`->`int`

`CV_32F`->`float`

`CV_64F`->`double`

[`Mat::channels()`](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-channels)告诉您有多少该类型的值分配给一个坐标。这些多个值可以提取为[`cv::Vec`](http://docs.opencv.org/modules/core/doc/basic_structures.html#vec)。`Mat`因此，如果您有一个具有 depth的两个通道`CV_8U`，而不是使用`Mat.at<uchar>`You 将需要使用`Mat.at<Vec2b>`，或者一个`Mat.at<Vec2f>`。`CV_32F`

# mysql - 加快 MySQL 中大量多查询语句的性能

> ID：15987801
> 
> 赞同：1
> 
> 时间：2013-04-13T12:28:24.703
> 
> 标签：mysql, performance, node.js, node-mysql

我有 node.js 脚本，它在服务器上作为 cron 作业运行。

它异步接收来自外部源的数据（几个同步请求）并使用多个查询语句更新数据库，其中 UPDATE 查询用分号分隔。

一个 8000-UPDATES 多查询运行大约 55 秒。

有没有办法以某种方式加快整个数据库更新过程？

单个查询非常简单——比如

```
 UPDATE my_table SET field1 = smth WHERE id = some_id; 
```

索引是为*id*字段创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T02:49:05.707

减少执行的查询数量将是您最大的胜利。也许是**INSERT...ON DUPLICATE KEY UPDATE**？

```
INSERT INTO my_table (id, field1) 
    VALUES
        (1, 'smth'),
        (10, 'smth2'),
        (88, 'smth3'),
        (23, 'smth4'),
        (68, 'smth5')
    ON DUPLICATE KEY UPDATE
        id = VALUES(id),
        field1 = VALUES(field1); 
```

# apache - htaccess 重写条件以排除文件类型，除了具有特定父目录的文件类型

> ID：15987802
> 
> 赞同：2
> 
> 时间：2013-04-13T12:28:31.380
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个 .htaccess 文件，它被配置为几乎将所有请求路由到我的根 index.php 文件，除了一组特定的文件扩展名（图像、css、js 等）。但是，我需要稍微调整一下该逻辑，我希望将对那些排除的文件扩展名之一的请求路由到 index.php，如果它包含在特定目录中（可能在该目录的子文件夹中）。目前我有：

```
RewriteEngine on
RewriteCond $1 !\.(gif|jpg|png|ico|css|js|swf|wav|mp3|less|cur)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

如果 .css 文件的请求位于 .css 文件的根目录内，我需要做什么`RewriteCond`才能确保它们被重写为 index.php `/docs`。例如，我希望请求`/docs/subfolder/anotherfolder/myfile.css`路由到 index.php，但请求`/assets/css/global.css`继续不路由到 index.php？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T12:33:10.073

您可以使用该`[OR]`标志添加额外的 css 条件（即使它不符合第一个条件）：

```
RewriteEngine on
RewriteCond $1 !\.(gif|jpg|png|ico|css|js|swf|wav|mp3|less|cur) [OR]
RewriteCond %{REQUEST_URI} ^/docs/.*\.css$
RewriteRule ^(.*)$ index.php/$1 [L] 
```

这里的`[OR]`标志逻辑上“或”是两个条件。因此，即使请求的文件以 ''css'' 结尾，也会检查第二个条件。我给出的示例正则表达式只是说它必须以 . 开头`/docs/`并以`.css`. 如果满足，则不需要第一个条件，并且请求被路由到`index.php`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T12:39:39.103

你可以有两个规则。第一条规则`docs`通过`index.php`. 其他一切都将由第二条规则处理

```
RewriteEngine on

RewriteRule ^docs/.*\.css$ index.php/$0 [L]

RewriteCond $0 !\.(gif|jpg|png|ico|css|js|swf|wav|mp3|less|cur)
RewriteRule ^.*$ index.php/$0 [L] 
```

# ios - 具有多个 TableView 键的 NSDictionary

> ID：15987820
> 
> 赞同：0
> 
> 时间：2013-04-13T12:31:35.433
> 
> 标签：ios, xcode, uitableview, nsdictionary

我正在开发一个 iOS 应用程序，该应用程序将列出我存储在 NSDictionary 中的一些数据。我将使用表格视图来执行此操作，但是我应该如何开始有一些问题。

数据看起来像这样：

```
category =     (
            {
        description =             (
                            {
                id = 1;
                name = Apple;
            },
                            {
                id = 5;
                name = Pear;
            },
                            {
                id = 12;
                name = Orange;
            }
        );
        id = 2;
        name = Fruits;
    },
            {
        description =             (
                            {
                id = 4;
                name = Milk;
            },
                            {
                id = 7;
                name = Tea;
            }
        );
        id = 5;
        name = Drinks;
    }
); 
```

我试图将所有“类别”值作为一个部分放在表中，并将每个“描述”中的“名称”放在正确的部分中。正如我所提到的，不知道如何从这里开始，如何为每个“类别”获取一个新部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:20:18.977

您“只需要”实现表视图数据源方法以从字典中提取信息:-)

如果`self.dict`是上面的字典，那么`self.dict[@"category"]`是一个数组，每个部分包含一个字典。因此（使用“现代 Objective-C 下标语法”）：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.dict[@"category"] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return self.dict[@"category"][section][@"name"];
} 
```

对于每个部分，

```
self.dict[@"category"][section][@"description"] 
```

是一个数组，每行包含一个字典。所以：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.dict[@"category"][section][@"description"] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSString *name = self.dict[@"category"][indexPath.section][@"description"][indexPath.row][@"name"];
    cell.textLabel.text = name;
    return cell;
} 
```

# google-apps-script - 远程启动 Google 电子表格功能？

> ID：15987822
> 
> 赞同：0
> 
> 时间：2013-04-13T12:31:55.583
> 
> 标签：google-apps-script, google-sheets, google-maps-api-2

希望这是自动化我的一小部分工作流程的最后一步。

1.  Windows 调度程序/vbs 从我们的 SFDC 应用程序执行导出集合 - 完成

2.  Windows 调度程序/vbs 将导出的数据导入数据库表 - 完成

3.  Windows scheduler/vbs 运行 SQL 查询以生成必要的数据集合以生成 Google Maps 应用程序数据，然后将结果作为 .csv 文件放入我的 Google Drive - 完成

4.  向已发布的 Google 电子表格添加了一个功能，以将 csv 数据导入电子表格。但是，需要手动点击电子表格来完成 - 完成

5.  谷歌地图应用程序通过 JSON 调用指向谷歌电子表格数据 - 完成

问题 - 以任何方式远程运行 Google 电子表格中的功能，或者至少自动执行步骤 (4) 中提到的手动“点击”。

希望您能提供帮助。

谢谢！

PS> 我确实查看了数据的 JDBC 选项，但这比我想在最后一篇文章中解决的要多 - Java 超出了我狭隘的技能范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T13:16:09.967

不要用触发器来做。只需将 ss 中的脚本发布为 contentservice。将 csv 作为参数传递。然后脚本将 csv 导入 ss。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:46:21.647

如果我理解您要正确实现的目标，这是可能的。

目前我猜你的电子表格顶部有一个按钮，上面写着“从 CSV 导入”，然后它会从你的谷歌脚本运行一个函数。您可以转到脚本管理器并设置触发器以在一天中的特定时间运行此脚本。

**触发器在**

`Tools > Script Manager > *EDIT SCRIPT* > Resources > Triggers`

# asp.net - 使用 INNER JOIN 在 ListBox 中显示项目（在 DropDown Selected Index Change 上）

> ID：15987824
> 
> 赞同：0
> 
> 时间：2013-04-13T12:32:09.040
> 
> 标签：asp.net, vb.net, listbox, inner-join, dropdownbox

我有三个表`users`：`departments`和`user_department`。

我有一个 ASP.NET 页面，“部门”，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/thwND.png)

当我单击 DropDownList 上的一个项目时，我希望能够显示所有部门成员将显示在 ListBox 中（通过`user_department`）。

数据库：

![在此处输入图像描述](https://i.stack.imgur.com/eneiG.png)

我必须执行什么 SQL 命令？

这是我尝试过的：

```
SELECT 
    u.username
FROM users u
INNER JOIN user_department ud ON u.user_id = ud.user_id
WHERE ud.department_id = @parameter 
```

VB.NET

```
 Protected Sub drpDepartments_SelectedIndexChanged(sender As Object, e As EventArgs) Handles drpDepartments.SelectedIndexChanged

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim deptComm As String = "SELECT department_id FROM departments WHERE department_name = @DepartmentName"

        Dim deptSQL As New SqlCommand
        Dim dr As SqlDataReader = deptSQL.ExecuteReader()

        deptSQL = New SqlCommand(deptComm, conn)
        deptSQL.Parameters.AddWithValue("@DepartmentName", drpDepartments.SelectedItem.Text)

        dr.Read()

        If dr.HasRows Then

            Dim department_id As Integer = Convert.ToInt32(dr("department_id"))
            Session("DepartmentID") = department_id

        End If

        dr.Close()
        conn.Close() 
```

但是，它们不工作。

你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:39:58.997

尝试这个....

```
SELECT * FROM users u
INNER JOIN 
(
Select x.user_id as userid,x.department_id,y.department_name,y.deparment_code
 from user_Department x 
inner join departments y 
on x.department_id=y.department_id WHERE x.department_id=@yourparameter
) 
    f on u.user_id= f.userid 
```

# php - MySQL TinyInt 值不会更新

> ID：15987828
> 
> 赞同：2
> 
> 时间：2013-04-13T12:32:18.477
> 
> 标签：php, mysql, tinyint

对于我的生活，我无法让 php 更新 mysql 中的 schdl 字段。它将更新测试查询中的所有其他字段，除了 schdl 。

schdl 值当前设置为 1 ，我正在尝试将其设置为 0 。schdl 字段的 NULL 选项设置为“No”，该字段的默认值为“0”。

我已采取的步骤：我可以从 MySQL CLI 成功执行以下命令 `UPDATE dispatch SET schdl="0" WHERE servid="12";`<- 这同样可以正常工作

但是一旦我尝试在 PHP 中执行它，查询就会成功返回，但值保持不变。我试过了： 。我在同一个查询中更新了其他值，它们都按预期更新，只有 schdl 保持不变。我到底错过了什么？

php是否正确提交'0'值并且mysql正在奇怪地解释该值并将其设置为True或其他什么？

我该如何解决？

PHP 5.4.3 MySQL 5.5.24

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:38:36.267

尝试代替`schdl=\"0\"`

```
schdl=0 
```

# hibernate - 无法为事务打开 Hibernate Session；嵌套异常是 org.hibernate.exception.GenericJDBCException

> ID：15987835
> 
> 赞同：0
> 
> 时间：2013-04-13T12:33:16.753
> 
> 标签：hibernate, connection

在我搜索之前，我知道我的情况不是单身，但仍然认为我有个人问题。

```
2013-04-13 12:15:04,980 INFO [org.springframework.beans.factory.xml.XmlBeanDefinitionReader] - <Loading XML bean definitions from class path resource [app-context.xml]>
2013-04-13 12:15:05,312 INFO [org.springframework.context.support.GenericXmlApplicationContext] - <Refreshing org.springframework.context.support.GenericXmlApplicationContext@8def5d: startup date [Sat Apr 13 12:15:05 EDT 2013]; root of context hierarchy>
2013-04-13 12:15:05,405 INFO [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer] - <Loading properties file from class path resource [connection.properties]>
2013-04-13 12:15:05,438 INFO [org.springframework.beans.factory.support.DefaultListableBeanFactory] - <Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@c816a9: defining beans [dataSource,transactionManager,org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,contactDao,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,sessionFactory]; root of factory hierarchy>
2013-04-13 12:15:05,452 INFO [org.springframework.jdbc.datasource.DriverManagerDataSource] - <Loaded JDBC driver: com.mysql.jdbc.Driver>
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
2013-04-13 12:15:05,882 INFO [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] - <Building new Hibernate SessionFactory>
2013-04-13 12:15:06,318 INFO [org.springframework.orm.hibernate3.HibernateTransactionManager] - <Using DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@13b499d] of Hibernate SessionFactory for HibernateTransactionManager>
Exception in thread "main" org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy20.findAll(Unknown Source)
    at rus.spring.hibernate.AppOut.main(AppOut.java:18)
Caused by: org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
    at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
    at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:555)
    ... 7 more
Caused by: java.sql.SQLException: Access denied for user 'root  '@'localhost' (using password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1078)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4120)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:925)
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4615)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1302)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2483)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2516)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2301)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:834)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:416)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:190)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
    at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    ... 12 more 
```

所以，我的 app-context.xml 我在其中配置休眠会话分析等。

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName"><value>${jdbc.driverClassName}</value></property>
    <property name="url"><value>${jdbc.connectionValues}</value></property>
    <property name="username"><value>${jdbc.userName}</value></property>
    <property name="password"><value>${jdbc.password}</value></property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref ="sessionFactory"/>
    </bean>

    <context:property-placeholder location="connection.properties"/>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <context:component-scan base-package="rus.spring.hibernate" />

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref ="dataSource"/>
    <property name="packagesToScan" value="rus.spring.hibernate"/>
    <property name="hibernateProperties">
    <props>
    <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
    <prop key="hibernate.max_fetch_depth">3</prop>
    <prop key="hibernate.jdbc.fetch_size">50</prop>
    <prop key="hibernate.jdbc.batch_size">10</prop>
    <prop key="hibernate.show_sql">true</prop>
    </props>
    </property>

    </bean>

</beans> 
```

我的属性文件是：

```
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.connectionValues=jdbc:mysql://localhost:3306/hibernateDB
jdbc.userName=root  
jdbc.password=25051988 
```

我只是提到这一行：用户'root'@'localhost'的访问被拒绝（使用密码：YES）但我的所有connection.properties都是绝对正确的。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T12:36:20.657

请注意，错误消息说`Access denied for user 'root '@'localhost'`. `root`您的属性文件后面有两个额外的空格。

# linux - 阅读 GET 请求时 Dancer 随机挂起

> ID：15987837
> 
> 赞同：5
> 
> 时间：2013-04-13T12:33:52.357
> 
> 标签：linux, perl, internet-explorer, internet-explorer-9, dancer

我在 Linux 上玩 perl dancer，如果浏览器直接通过 LAN 连接到服务器，一切都很好。但是，当我通过 WAN 连接*并且*浏览器是 IE9 时，偶尔繁忙的光标不会消失。

我可以通过连续重新加载页面 apx 10 次来引发这一点。即使我在每次重新加载之间等待几秒钟，我也会遇到这个问题。页面本身非常简单，并且通过了 w3c 检查。

如果我以 root 身份运行 dancer，或者端口是 80 还是 3000，都没有区别。 A 还测试了使用 apache 频繁重新加载页面，似乎没有问题。

我运行了 strace，我的印象是，请求数据有时在 dancer 尝试读取它时不可用。这就是跟踪的样子

当它工作时：

```
{sa_family=AF_INET, sin_port=htons(52073), sin_addr=inet_addr("78.42.213.92")}, [16]) = 4
ioctl(4, SNDCTL_TMR_TIMEBASE or TCGETS, 0xbfab5028) = -1 ENOTTY (Inappropriate ioctl for device)
_llseek(4, 0, 0xbfab5070, SEEK_CUR)     = -1 ESPIPE (Illegal seek)
ioctl(4, SNDCTL_TMR_TIMEBASE or TCGETS, 0xbfab5028) = -1 ENOTTY (Inappropriate ioctl for device)
_llseek(4, 0, 0xbfab5070, SEEK_CUR)     = -1 ESPIPE (Illegal seek)
fcntl64(4, F_SETFD, FD_CLOEXEC)         = 0
getpeername(4, {sa_family=AF_INET, sin_port=htons(52073), sin_addr=inet_addr("78.42.213.92")}, [16]) = 0
read(4, "G", 1)                         = 1
read(4, "E", 1)                         = 1
read(4, "T", 1)                         = 1 
```

当它挂起

```
{sa_family=AF_INET, sin_port=htons(52225), sin_addr=inet_addr("78.42.213.92")}, [16]) = 4
ioctl(4, SNDCTL_TMR_TIMEBASE or TCGETS, 0xbfab5028) = -1 ENOTTY (Inappropriate ioctl for device)
_llseek(4, 0, 0xbfab5070, SEEK_CUR)     = -1 ESPIPE (Illegal seek)
ioctl(4, SNDCTL_TMR_TIMEBASE or TCGETS, 0xbfab5028) = -1 ENOTTY (Inappropriate ioctl for device)
_llseek(4, 0, 0xbfab5070, SEEK_CUR)     = -1 ESPIPE (Illegal seek)
fcntl64(4, F_SETFD, FD_CLOEXEC)         = 0
getpeername(4, {sa_family=AF_INET, sin_port=htons(52225), sin_addr=inet_addr("78.42.213.92")}, [16]) = 0
read(4, 
```

然后它永远存在。知道我能做什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T19:14:29.203

我在IE9 连接到 Catalyst 开发服务器时遇到了[类似的问题。](https://stackoverflow.com/q/5971081/77782)Eric Lawrence（IE 团队负责人！？）认为这可能是由于 IE9 的后台连接功能。IE9 会打开一个后台 TCP 连接以加快对服务器的未来请求，但这显然会导致单线程服务器出现问题。如果您正在运行 Dancer 的默认开发服务器 (HTTP::Server::Simple::PSGI)，[您将无法处理 IE9](https://github.com/plack/Plack/issues/208)。

我通过 Apache 代理解决了这个问题。它使开发人员更加麻烦，但只有当我必须测试 IE9 时。

# iphone - 从网站加载图像

> ID：15987839
> 
> 赞同：0
> 
> 时间：2013-04-13T12:34:02.360
> 
> 标签：iphone, objective-c, ipad

我正在尝试创建一个简单的应用程序，该应用程序将显示每天发布的图像。然而，图像的名称每天都在变化。

这是我到目前为止所拥有的。

```
--- .h file

{ UIWebView *webView; }

@property (nonatomic, strong) IBOutlet UIWebView *webView;

@end

--- .m file

@implementation AWCViewController

@synthesize webView;

- (void)viewDidLoad {
    [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib.

    NSURLRequest * request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"url/images/image1.png"]];
    [self.webView loadRequest:request]; 
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated. 
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:56:17.920

而不是 @"url/images/image1.png"

做

NSString *image = "image1"; // 你可以将它作为你想要的任何名称传递给方法

[NSString StringWithFormat:(@"url/images/%@.png",image)];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:50:36.707

你有两个选择。

1.  每天在每台 iOS 设备上生成不同的 URL。使用`NSString`或`NSURL`功能更改URL；你需要一种`imageOfTheDayName`方法来返回每天的 NSString
2.  每天更改网络服务器上的图像。在 iOS 设备上，将图像 URL 设置为`url/images/imageOfTheDay.png`.

我建议案例＃2，但任何一个都可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T14:46:40.503

有几种方法可以做到这一点，一切都取决于你想如何管理你的在线图像。

1.  您可以简单地保留代码，并将服务器上的“image1.png”替换为另一个名为“image1.png”的文件。
2.  您可以将 NSURL 地址设置为“url/lastImage”之类的内容，并将页面重定向到您的每日图片 url。
3.  您可以在客户端和服务器上创建一个返回每日图像名称的小函数，如下所示：

    ```
    - (NSString *)dailyImageName 
    {  
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
       [dateFormatter setDateFormat:@"yyyyMMdd"];    
       return [dateFormatter stringFromDate:[NSDate date]];
    } 
    ```

那么你知道你的图像文件名需要是 yearmonthday.png （例如“20130413.png”）

# usb - HID 设备测试仪

> ID：15987841
> 
> 赞同：2
> 
> 时间：2013-04-13T12:34:09.633
> 
> 标签：usb, windows-7-x64, hid

我已经构建了自己的 USB HID 设备。我想检查它是否工作正常。

我想检查设备发送的描述符，显示输入报告和发送输出报告。哪些工具能够完成这项任务并在 Windows 7 64 位上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T14:16:43.983

我每天都使用[USBlyzer](http://www.usblyzer.com/)。它在 Windows 7 64 位上运行良好。

就免费工具而言，Windows DDK 包括（在 C:\winddk\7600.16385.1\tools\avstream\amd64 中）一个名为 UVCview.exe（“USB 设备查看器”）的工具，它至少显示一些描述符信息。

您也可以尝试[Wireshark](http://wiki.wireshark.org/CaptureSetup/USB)，但我承认，我只将它用于网络，无法说明其 USB 捕获的质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-17T19:13:58.270

（即使它是一个旧帖子） - 这是一个方便且免费的解决方案：

我们的 Docklight 脚本软件可以在免费（评估）下载中[测试自定义 USB HID 设备](https://docklight.de/dl_faq040/)，没有时间限制。在 Windows 7 和[Windows 10](https://docklightnews.blogspot.com/2016/06/usb-hid-and-windows-10.html)上测试。您可以通过选择的 VID 和 PID 访问您的设备，显示输入报告数据并发送输出报告，即使输出报告 ID 可变。

# java - 获取其他时区午夜时的当地时间

> ID：15987848
> 
> 赞同：2
> 
> 时间：2013-04-13T12:35:07.927
> 
> 标签：java, date, calendar, timezone

我正在尝试获取我的当地时间，当它是不同时区的午夜时。我的意思是：

*   伦敦的午夜时分，斯德哥尔摩几点钟了？
*   斯德哥尔摩几点钟，赫尔辛基午夜时分？

这是我的代码

```
public static void main(String[] args) throws ParseException {
    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
    formatter.setTimeZone(TimeZone.getTimeZone("Europe/Stockholm"));
    Date date = formatter.parse("2013-04-13 00:00:00.000");

    System.out.println("London: " + formatter.format(getFirstInstantOfDay("Europe/London", date)));
    System.out.println("Helsinki: " + formatter.format(getFirstInstantOfDay("Europe/Helsinki", date)));
}

public static Date getFirstInstantOfDay(String timeZoneId, Date date) {
    Calendar resultDate = Calendar.getInstance(TimeZone.getTimeZone(timeZoneId));
    resultDate.setTime(date);
    resultDate.set(Calendar.HOUR, 0);
    resultDate.set(Calendar.MINUTE, 0);
    resultDate.set(Calendar.SECOND, 0);
    resultDate.set(Calendar.MILLISECOND, 0);
    return resultDate.getTime();
} 
```

输出是：

```
London: 2013-04-12 13:00:00.000
Helsinki: 2013-04-12 23:00:00.000 
```

我期望：

```
London: 2013-04-13 01:00:00.000
Helsinki: 2013-04-12 23:00:00.000 
```

对于赫尔辛基来说，结果如预期，但对于伦敦来说，这是一个疯狂的结果，我不明白它来自哪里。

**- - - 编辑 - - -**

具有预期输出的最终代码：

```
String dateStr = "2013-04-13";

DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
formatter.setTimeZone(TimeZone.getTimeZone("Europe/London"));
Date dateGB = formatter.parse(dateStr);
formatter.setTimeZone(TimeZone.getTimeZone("Europe/Stockholm"));
Date dateSE = formatter.parse(dateStr);
formatter.setTimeZone(TimeZone.getTimeZone("Europe/Helsinki"));
Date dateFI = formatter.parse(dateStr);

DateFormat stockholmFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
stockholmFormatter.setTimeZone(TimeZone.getTimeZone("Europe/Stockholm"));

System.out.println("Midnight in London is " + stockholmFormatter.format(dateGB) + " in Stockholm.");
System.out.println("Midnight in Stockholm is " + stockholmFormatter.format(dateSE) + " in Stockholm.");
System.out.println("Midnight in Helsinki is " + stockholmFormatter.format(dateFI) + " in Stockholm."); 
```

输出：

```
Midnight in London is 2013-04-13 01:00:00.000 in Stockholm.
Midnight in Stockholm is 2013-04-13 00:00:00.000 in Stockholm.
Midnight in Helsinki is 2013-04-12 23:00:00.000 in Stockholm. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T12:48:31.020

尝试将 Hour 更改为 HOUR_OF_DAY。它似乎是读取时间一次作为上午和一次作为下午。

更多信息： [http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T12:49:35.340

`Calender`有两种方法可以设置一天中的时间。

第一种方法是通过`HOUR_OF_DAY`：

```
resultDate.set(Calendar.HOUR_OF_DAY, 0); 
```

第二个选项是通过“HOUR”和“AM_PM”

```
resultDate.set(Calendar.HOUR, 0);
resultDate.set(Calendar.AM_PM,Calendar.AM); 
```

**编辑：** 您得到 2013-04-12 的事实是正确的。

您在斯德哥尔摩输入 2013-04-13 00:00:00.000

这与伦敦的 2013-04-12 23:00:00.000 时间相同

然后将小时重置为 00，在伦敦产生 2013-04-12 00:00:00.000

然后回到斯德哥尔摩时间收益率

2013-04-12 01:00:00.000

当您进行测试时（在斯德哥尔摩 2013-04-13 00:00:00.00），伦敦仍然在前一天（2013-04-12）。

**编辑**

您可能想知道的是各个城市的午夜何时出现（以斯德哥尔摩时间表示）。我会去做这样的事情：

```
public static void main(String[] args) throws ParseException {
    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
    formatter.setTimeZone(TimeZone.getTimeZone("Europe/Stockholm"));

    String date = "2013-04-13";
    System.out.println("Stockholm: " + formatter.format(getMidnightTime("Europe/Stockholm", date)));
    System.out.println("London:    " + formatter.format(getMidnightTime("Europe/London", date)));
    System.out.println("Helsinki:  " + formatter.format(getMidnightTime("Europe/Helsinki", date)));
}

public static Date getMidnightTime(String timeZoneId, String date) throws ParseException {
    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
    formatter.setTimeZone(TimeZone.getTimeZone(timeZoneId));
    return formatter.parse(date);
}

Stockholm: 2013-04-13 00:00:00.000
London:    2013-04-13 01:00:00.000
Helsinki:  2013-04-12 23:00:00.000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T12:58:07.533

您正在使用斯德哥尔摩时区解析日期：

```
formatter.setTimeZone(TimeZone.getTimeZone("Europe/Stockholm")); 
```

以及您解析到伦敦时区和赫尔辛基的结果日期：

```
 DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
 formatter.setTimeZone(TimeZone.getTimeZone("Europe/London"));
 Date date = formatter.parse("2013-04-13 00:00:00.000");
 System.out.println("London: " + formatter.format(getFirstInstantOfDay("Europe/London",  date)));
 System.out.println("Helsinki: " + formatter.format(getFirstInstantOfDay("Europe/Helsinki", date))); 
```

结果是：

```
London: 2013-04-13 00:00:00.000
Helsinki: 2013-04-12 22:00:00.000 
```

请注意，您的格式具有 HH，表示从 0 到 23 的小时。

*** 编辑 ***

要获得在伦敦、斯德哥尔摩和赫尔辛基的时间：

```
formatter.setTimeZone(TimeZone.getTimeZone("Europe/London"));
Date date = formatter.parse("2013-04-13 00:00:00.000");

System.out.println("London: " + formatter.format(date));                    
formatter.setTimeZone(TimeZone.getTimeZone("Europe/Stockholm"));
System.out.println("Stockolm: " + formatter.format(date));
formatter.setTimeZone(TimeZone.getTimeZone("Europe/Helsinki"));
System.out.println("Helsinki: " + formatter.format(date)); 
```

输出是：

```
London: 2013-04-13 00:00:00.000
Stockolm: 2013-04-13 01:00:00.000
Helsinki: 2013-04-13 02:00:00.000 
```

# jquery - 自定义 API 仅在参数更改时获得响应（jQuery GET）

> ID：15987852
> 
> 赞同：0
> 
> 时间：2013-04-13T12:35:39.100
> 
> 标签：jquery, api, xmlhttprequest, response

我面临一个奇怪的问题：

有一个属于冲浪公司的 API。基本上，它会返回站点位置、风力等...

我正在使用 jQuery 调用他们的 API。我第一次得到正确的回应；我可以在 Firebug->Net->XHR->Response 中看到，我可以看到一个正确的 JSON 对象。

当我重新加载页面时，我无法得到任何响应（没有响应）。只有更改 url 中的某些参数才能得到响应。

这是我正在使用的代码：

```
$(document).ready( function() {
    $.get('http://[api_site_url]/[api_key]/?lat=53.904338&lon=-2.028809&distance=200',
           function(data) {
                var jsonp = data;
                alert(jsonp);
           });
}); 
```

显然，`[api_site_url]`并且`[api_key]`被替换为真实的 URL 和 API 密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:42:07.457

查询“get()”操作会缓存在 IE 中，除非您传入唯一的 URL。示例解决方案在这里： http: [//www.miuaiga.com/index.cfm/2010/5/30/jQuery-AJAX-get-function-cached-in-IE](http://www.miuaiga.com/index.cfm/2010/5/30/jQuery-AJAX-get-function-cached-in-IE)

# django - 如何在 Amazon S3 中使用 django-photologue？解决 NotImplementedError

> ID：15987853
> 
> 赞同：4
> 
> 时间：2013-04-13T12:35:39.487
> 
> 标签：django, amazon-s3, django-storage, photologue

我在 Heroku 上使用 Photologue 应用程序和 S3 作为媒体和静态文件 Django 1.5 的存储时遇到问题。

问题是，每当我尝试在 django admin 中添加照片大小时，我都会得到：`NotImplementedError`

```
Exception Value:    
This backend doesn't support absolute paths. 
```

尝试使用 配置 photologue 也是如此`manage.py plinit`。

问题似乎是 photologue 尝试`os.path`在几个地方使用方法，例如（回溯）：

```
/app/.heroku/python/lib/python2.7/site-packages/photologue/models.py in _get_SIZE_filename
    return smart_str(os.path.join(self.cache_path(), 
```

有没有办法将 django-photologue 与远程存储一起使用，尤其是 Amazon S3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T03:09:42.020

这个django- [**photologue**](https://github.com/petry/django-photologue/)的分支完美地与 s3 配合使用。您可能还会喜欢其他一些[改进。](https://github.com/petry/django-photologue/wiki/Modifications-from-this-fork)

感谢这个分叉的作者**Marcos Daniel Petry 。**使我免于许多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:14:22.673

冲突出现在 s3boto 存储类中，路径方法未实现。根据 Django 文档，对于非本地存储，您不应实现此方法。作为建议解决此问题的唯一方法是继续在 django-photologue 代码中实现此方法并修改 storages.backends.s3boto 并添加路径方法。

```
def url(self, name):
    ...

def path(self, name):
    return None 
```

[https://bitbucket.org/david/django-storages/src/tip/storages/backends/s3boto.py](https://bitbucket.org/david/django-storages/src/tip/storages/backends/s3boto.py)

# c++ - GCC声称友元函数被重载，模棱两可的调用，clang编译

> ID：15987854
> 
> 赞同：6
> 
> 时间：2013-04-13T12:35:44.613
> 
> 标签：c++, gcc, clang

```
template <typename T>
class rp {
};

template <template <typename> class P>
struct b {
    template <class, template <typename> class FriendP>
    friend void f(b<FriendP> from);
};

template <class, template <typename> class P>
void f(b<P> from) {
}

int main() {
    b<rp> v;
    f<int>(v);
    return 0;
} 
```

Clang 3.3 (svn) 编译良好，而 GCC 4.8 拒绝它：

```
main.cpp: In function 'int main()':
main.cpp:17:10: error: call of overloaded 'f(b<rp>&)' is ambiguous
  f<int>(v);
          ^
main.cpp:17:10: note: candidates are:
main.cpp:12:6: note: void f(b<P>) [with <template-parameter-1-1> = int; P = rp]
 void f(b<P> from) {
      ^
main.cpp:8:17: note: void f(b<FriendP>) [with <template-parameter-2-1> = int; FriendP = rp; P = rp]
     friend void f(b<FriendP> from);
                 ^ 
```

我想知道为什么 GCC 声称`f`超载。所以我想这是一个 GCC 错误。

哪个编译器是对的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T13:59:40.753

# web-services - Web 服务在 Amazon EC2 上的大量调用

> ID：15987858
> 
> 赞同：0
> 
> 时间：2013-04-13T12:36:03.223
> 
> 标签：web-services, iis, amazon-web-services

我是使用 Web 服务的新手，但我们已经在 Amazon EC2 实例上的 IIS 中构建了一个简单的 Web 服务，并带有一个 Amazon RDS 托管的数据库服务器，这一切都可以作为我们移动应用程序的原型。

下一个阶段是查看规模，我需要知道如何让一个实例集群处理 Web 服务调用，因为我们希望对 Web 服务有大量调用，并且需要扩展处理 Web 服务的实例数量。来电。

我对此很陌生，所以目前我看到我们在对 Web 服务的调用中使用了 IP 地址，这意味着它指向特定的服务器>我们如何在亚马逊上构建一个架构，其中来自移动设备的请求可以是由多个服务器之一处理，我们可以通过在 Amazon 上添加更多服务器来扩展处理更多 Web 服务调用的容量

谢谢你的帮助

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:24:29.953

除了[Elastic Load Balancing](http://aws.amazon.com/elasticloadbalancing/)之外，您还需要创建一个[Amazon 系统映像](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html)，以便您可以按需启动实例，而无需对您启动的每个实例进行手动配置。EC2 文档描述了该过程。

还有[Auto Scaling](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-auto-scaling-elb.html)，它允许您设置特定的指标来监视并自动配置更多实例。我相信它受到限制，因此您不必担心创建太多实例，假设您设置了合理的阈值来启动和停止启动更多实例。

最后（简单概述），您需要考虑处于多个[可用区](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/CHAP_Glossary.html)中，这样您就可以应对任何潜在的中断。它们并不常见，但确实会发生。如果您仅在一个 AZ 中，则无法保证您将有空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:55:17.043

您需要使用负载平衡，AWS 还提供了方便的功能：

[http://aws.amazon.com/elasticloadbalancing/](http://aws.amazon.com/elasticloadbalancing/)

> Elastic Load Balancing 自动跨多个 Amazon EC2 实例分配传入的应用程序流量。它使您能够在应用程序中实现更高的容错能力，无缝提供响应传入应用程序流量所需的负载平衡容量。Elastic Load Balancing 检测池中不正常的实例并自动将流量重新路由到正常的实例，直到不正常的实例恢复。客户可以在单个可用区内或跨多个可用区启用 Elastic Load Balancing，以获得更一致的应用程序性能。

# java - java中的p2p音频会议和桌面共享

> ID：15987868
> 
> 赞同：1
> 
> 时间：2013-04-13T12:37:47.727
> 
> 标签：java, p2p, audio-streaming, rdp, desktop-sharing

我将在大学提交一份项目提案。

**概述**

我将创建一个项目，其中多个参与者可以加入会议，会议组织者与所有参与者共享他的桌面。

参与者可以访问组织者的桌面，这取决于组织者将桌面控制权授予谁。

一次只有一名参与者可以访问管理器桌面，而其他人则坐在并观看管理器桌面的视频流并等待轮到他们。

所有参与者可以同时相互交谈。

整个系统工作在p2p环境中。

**我需要专家意见**

1) 适用于上述场景的 p2p 通信的建议 API。

2) 我应该研究的建议主题，以实现p2p环境中参与者之间的音频聊天。？

3) 在开始编写代码之前我应该​​了解的任何其他先决条件。？

4) Java 编程语言的任何限制。？

5) 还有什么其他想法可以让我的项目变得更好。？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T22:09:32.387

你看过[BBB](https://github.com/bigbluebutton)它是一个开源项目吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:12:19.953

1) 适用于上述场景的 p2p 通信的建议 API。

JXTA

2) 我应该研究的建议主题，以实现p2p环境中参与者之间的音频聊天。？

[http://docs.oracle.com/javase/tutorial/sound/capturing.html](http://docs.oracle.com/javase/tutorial/sound/capturing.html)

3) 在开始编写代码之前我应该​​了解的任何其他先决条件。？

NAT Traversal，p2p策略，如打孔，TCP，UDP

4) Java 编程语言的任何限制。？

对于你的场景没有限制它在java中完全可能..

5) 还有什么其他想法可以让我的项目变得更好。？

好吧，如果你有时间也制作一个android版本..

# xcode - 如何通过调用另一个类的方法来添加 uibuttonitem

> ID：15987872
> 
> 赞同：0
> 
> 时间：2013-04-13T12:38:13.957
> 
> 标签：xcode, uicollectionviewcell, uibuttonbaritem

由于应用程序的需要，我需要从集合视图的单元类中调用一个方法。该方法位于实现集合视图的详细视图控制器中。

如果我在应用程序启动时完全从详细视图控制器的 viewDidLoad 调用该方法，一切顺利，并且按钮按预期添加到导航栏中，但是当我从单元类调用相同的方法时，什么也没有发生。我忘记了什么吗？

这是代码

collectionViewCell.m

```
- (void) addButtonToNavigationBar {

DetailViewController *dvc = [[DetailViewController alloc]init]
[dvc implementButton];

} 
```

DetailViewController.h

```
- (void) implementButton; 
```

细节视图控制器.m

```
- (void) implementButton {
addButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                             style:UIBarButtonItemStyleBordered
                                            target:self
                                            action:@selector(editTable)];
[self.navigationItem.rightBarButtonItem setStyle:UIBarButtonItemStyleBordered];
[self.navigationItem setRightBarButtonItem:addButton animated:YES]; 
```

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:19:48.837

当您编写时，`DetailViewController *dvc = [[DetailViewController alloc]init];`您正在创建一个新控制器。它不是已经存在的那个。

对于您的情况，您可能会考虑让控制器监听`NSNotification`来自单元的 a 并`implementButton`在收到它时调用。

# macos - applescript - 控制点击

> ID：15987881
> 
> 赞同：2
> 
> 时间：2013-04-13T12:38:40.803
> 
> 标签：macos, user-interface, user-controls, applescript, controls

如何使用 AppleScript 控制点击？

该脚本应该可以工作，但不能

```
activate application "Finder"
tell application "System Events"
    tell process "Finder"
        key down control
        delay 1
        click at {600, 600} -- {from left, from top}
        delay 1
        key up control
    end tell
end tell 
```

MouseTools 有时不可靠。我知道 cliclick - 还没有尝试过。

我更喜欢仅 AS 的解决方法，但欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:07:58.470

*   您可以使用菜单栏（文件、编辑等）执行上下文菜单中的大多数操作。它可以简化您的工作。
*   要打开特定 GUI 元素的上下文菜单，您应该告诉`perform action "AXShowMenu"`该元素。您可以使用 Accessibility Inspector 应用程序来找出 GUI 元素层次结构。看看[这个讨论](http://macscripter.net/viewtopic.php?id=14300)。
*   你可以试试鼠标键。看看[这个](http://hintsforums.macworld.com/archive/index.php/t-103714.html)线程的详细信息。请注意，“鼠标键”设置位于 Mountain Lion 的“系统偏好设置”->“辅助功能”->“鼠标和触控板”中。
*   对于查找器脚本[AppleScript 查找器指南](http://manuals.info.apple.com/en_US/AppleScriptFinderGuide.pdf)可以提供很大帮助。

# java - 双缓冲和 libgdx

> ID：15987887
> 
> 赞同：1
> 
> 时间：2013-04-13T12:39:11.063
> 
> 标签：java, buffer, libgdx

我在 libgdx 中有一个非常简单的应用程序。它目前应该用粉红色的纹理覆盖一半的屏幕。它确实做到了，但是纹理在闪烁。基于我自己对主题的理解，以及这个线程： [LibGDX blinking](https://stackoverflow.com/questions/15475422/libgdx-blinking) I need to enable double buffering。或者，写入我的缓冲区。问题是，要么我对 google 无能，要么很难找到任何关于如何在 libgdx 中操作缓冲区的信息。如果有人可以为我提供资源，解释如何操作缓冲区，以及如何创建缓冲区，如何将它们与当前显示交换等。我将非常感激。

编辑：在网上搜索了一些之后，我在 badlogic 论坛上找到了帖子，声称 libgdx 默认设置了双缓冲。问题是，它是如何工作的？缓冲区何时交换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:58:30.203

Libgdx 默认启用双缓冲（它实际上是底层 OpenGL 基础设施的一部分，而不是 Libgdx）。我不认为 Libgdx 公开了对双缓冲的任何控制。有一些控件可以禁用 vsync，这可能会造成一些撕裂，但不太可能相关。

获得这种行为的更可能的方法是，如果您的`render`方法仅被调用一次。这将绘制到一个缓冲区中。然后，假设`render`已成为无操作，没有任何内容被绘制到另一个缓冲区中，它们被切换，没有任何内容被绘制到原始缓冲区中，它们被切换等等。这可能导致您看到的闪烁行为。

如果该猜测不涵盖它，您将不得不提供更多详细信息。你在哪个平台上运行？您是在运行稳定版本的 Libgdx 还是每晚构建的版本之一？您如何设置 libgdx 应用程序配置？你的`render`方法实际上是什么样的？

# javascript - 在 HTML5 和 JavaScript 中使用 Google Maps Indoor Map API

> ID：15987890
> 
> 赞同：6
> 
> 时间：2013-04-13T12:39:33.470
> 
> 标签：javascript, html, google-maps

我想使用 HTML5 和 JavaScript 创建一个室内地图应用程序。我创建了一个简单的路线图应用程序，但是当我单击放大任何室内兼容的建筑物/商场时，没有级别或地板选项。那么，HTML5 和 Javascript 是否支持室内功能？

在移动应用程序中的任何普通谷歌地图中，​​当我们放大任何室内建筑物时，它就会启用并在屏幕上显示楼层地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-02T11:28:29.620

看起来 JavaScript v3 API 还不支持室内地图。但它可能会来。

官方页面说它将**可用**：[https ://www.google.com/maps/about/partners/indoormaps/](https://www.google.com/maps/about/partners/indoormaps/)

> “除了在 Google 地图中向我们的用户提供内容外，您的室内地图**还可以**通过 Google 地图 API 用于您的移动应用程序或**网站**。”

# c++ - c++11：使用 const_iterator 擦除

> ID：15987893
> 
> 赞同：8
> 
> 时间：2013-04-13T12:40:12.637
> 
> 标签：c++, c++11, stdvector, erase, const-iterator

我相信从 C++11 开始，`erase`大多数容器（例如`std::vector`）的函数都接受 a`const_iterator`作为参数：

```
iterator erase (const_iterator position); 
```

即使使用`--std=c++11`.

它是编译器/libstdc++ 错误，还是我做错了什么？这是一个示例代码：

```
#include <vector>

int main( )
{
    std::vector<int> v;
    v.push_back( 1 );
    v.push_back( 2 );
    v.push_back( 3 );

    std::vector<int>::const_iterator i = v.begin();
    while( i != v.end() ) {
        i = v.erase( i );
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T12:49:52.247

此问题记录[在此处](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html)，目前报告为部分实现。

`CTRL + F`使用您的浏览器并搜索`N2350`.

如果您在 Linux 上，可以`libcxx`从 LLVM 项目构建库的开发版本，您可以从[这里](http://libcxx.llvm.org/)下载；我不知道这是否能解决您遇到的任何问题，但我建议将其作为`libstdc++`.

# c# - 有时间限制的旅行推销员

> ID：15987895
> 
> 赞同：1
> 
> 时间：2013-04-13T12:40:35.843
> 
> 标签：c#, java, vb.net, traveling-salesman

我正在尝试制作一个应用程序来计算访问我的客户的每日路线。到目前为止，我可以通过使用遗传算法来解决**整个问题。**但我需要按距离限制解决方案。当我只是在某个时候“切断”解决方案路径时，它就变成了一个糟糕的解决方案。这个实例有特殊的算法吗？我试图找到并适合一个，但没有运气。

有做过这个的人可以给我推荐一下吗？我可以使用 vb.NET、c#、php 或 JAVA。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:27:26.853

如果您限制旅行的距离，那么我假设您可以不用每天访问所有客户。如果您需要访问您的所有客户并且您想要旅行的最大距离，那么您所能做的就是继续运行您的 TSP 算法，直到它（希望）产生一个您满意的解决方案。

如果只想访问距离起点一定距离内的客户，那么确定每个点到起点的[欧式距离](http://en.wikipedia.org/wiki/Euclidean_distance)，过滤掉距离太远的。然后在剩余点上运行您的 TSP 算法。

我假设您希望能够通过最大距离访问尽可能多的客户`d`。我建议使用[爬山](https://en.wikipedia.org/wiki/Hill_climbing)方法。从一个有效的解决方案开始（例如，使用贪婪的方法获取下一个最近的未访问客户端并在总距离为 时停止`d`），然后随机修改`n`解决方案中的节点（这可能意味着对它们进行重新排序，或者这可能意味着将节点交换为当前不在解决方案中的节点；在此处使用明智的启发式方法，您不希望将节点交换为在地图的另一边，一种可能的方法是使用加权算法，该算法有利于与更近的节点而不是更远的节点进行交换）并测试新解决方案是否有效 + 比以前的解决方案更好。您总是可以通过从旅行中剥离最后几个客户来强制新解决方案有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:31:07.933

也许您可以调整[OptaPlanner](http://www.optaplanner.org)（开源、Java）中的 TSP 或 VRP 示例来进行投标？有[一个视频展示了如何根据您的具体情况自定义/调整约束](http://www.youtube.com/watch?v=4hp_Qg1hFgE)。

# c - C - 对不完整类型 (struct input_dev) 无效使用 sizeof

> ID：15987899
> 
> 赞同：0
> 
> 时间：2013-04-13T12:41:35.237
> 
> 标签：c, linux, input

我正在编写一个与 linux 输入子系统交互的程序。以下是我正在尝试编译的主文件：

```
#include <linux/input.h>
#include <stdio.h>

void idevcreate() {
  struct input_dev idev;
  memset(&idev, 0, sizeof(struct input_dev));
} 
```

当我尝试编译它时，我收到以下错误：

```
Invalid application of 'sizeof' to incomplete type (struct input_dev) 
```

我猜该程序无法找到`input_dev`. 我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:50:42.077

我认为您需要简单地找到系统的定义`struct input_dev`和#include 相关标头。我会做这样的事情：

```
grep -r "struct input_dev" /usr/include 
```

# java - 用于在文件中生成数据库值的字符串格式化问题

> ID：15987900
> 
> 赞同：0
> 
> 时间：2013-04-13T12:41:43.800
> 
> 标签：java, regex, string, formatting, string-formatting

我有一个维护用户数据的 bean 类：

所以我已经创建了一个这样的 postgresql DB 表：

```
StringBuffer sqlStr = new StringBuffer();
sqlStr.append("CREATE TABLE Users ("
        user_id         bigint,
        username        character varying NOT NULL,
        biography       character varying NOT NULL
); 
```

＆我想创建一个查询命令并将我的字符串数据注入其中：

```
 sqlStr.append("INSERT INTO users(" +
            "user_id, username, biography)" +
            "\n\tVALUES (" + user.getID()+ "," + user.getUsername() + "," + user.getBiography()+");"; 
```

我的问题是，例如，如果来自我的方法的数据有引号或双引号或“，”假设用户传记是这样的，我的命令将出错：

> 您好，我是 X 先生，是一名“IT 专业人士”...

如果我运行我的应用程序并将输出保存在一个名为 query.sql 的文件中，我将无法使用它，因为我的查询命令由于引号和双引号而出错，如下所示：

```
INSERT INTO users(userid, username, biography)
     VALUES(2, 'Mehdi', 'hello, I'm Mr X an "IT Pro" ..'); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:49:03.777

您**永远不**应该使用上述方法来构建 SQL 查询。

“为什么不？” 你问，好吧；从哪儿开始。经典的例子是[Bobby Tables](http://xkcd.com/327/)，更普遍的问题是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。这使您的程序容易受到攻击，但也容易受到随机故障 - 就像您描述的情况一样。

现在，解决方案。始终用于`PreparedStatement`构造您的查询。在你的例子中

```
final String query = "INSERT INTO users(user_id, username, biography) VALUES (?,?,?)";
final PreparedStatement ps = con.prepareStatement(query);
ps.setInt(1, user.getID());
ps.setString(2, user.getUsername());
ps.setString(3, user.getBiography());
ps.executeUpdate(); 
```

一个更好用的语法是`SET`语法而不是传统`VALUES`语法。然后查询看起来像

```
final String query = "INSERT INTO users SET user_id = ?, username = ?, biography = ?"; 
```

**编辑**

OP 正在为脚本文件构建查询，而不是在代码中执行查询。

Apache Commons Lang 中有一个实用程序类，[`StringEscapeUtils`](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html). 这有一个`escapeSql`方法。查看源代码，所有这些都是用另一个单引号转义单引号。

如果您使用单引号构建查询，则此方法有效：

```
VALUES (" + user.getID()+ ",'" + user.getUsername() + "'... 
```

因此，一旦插入示例值，查询将从：

```
VALUES (10 ,'hello, I'm Mr X an "IT Pro"'... 
```

会变成

```
VALUES (10 ,'hello, I''m Mr X an "IT Pro"'... 
```

“我是”中的撇号现在已被转义且无害。

请注意，您显然需要转义值而不是查询，因此（假设您有`static`该类的导入）

```
VALUES (" + user.getID()+ ",'" + escapeSql(user.getUsername()) + "'... 
```

但不会转义其他 sql 字符，例如百分号。

这确实是一种权宜之计，可以在您提出更强大的解决方案时使代码正常工作。你应该想出一个更强大的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:47:30.280

你为什么不使用**PreparedStatement**？这也将为您提供更好的性能，因为 SQL 将在 DB 端进行预编译。

或者

[您可以使用 String.replaceAll http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String) , java.lang.String)转义引号

# jquery - 动态添加的类的元素变得不可点击

> ID：15987909
> 
> 赞同：0
> 
> 时间：2013-04-13T12:42:49.520
> 
> 标签：jquery, class, checkbox, selector, jsfiddle

我创建了一个电梯功能[有 2 个楼层，每个楼层对应，有一个复选框。根据选中的复选框，电梯会移动到该楼层。

我不确定如何实施的几件事是：

1.  无论我在哪里动态添加了“未选中”类，该元素看起来都好像不可点击。我如何使它可点击？

2.  当橙色电梯在
    选中复选框的水平移动和停止时，如何减慢它的速度？

小提琴可在：[http://jsfiddle.net/hurricaneankit/rJ4Py/12/]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:39:11.297

我认为这就是您要寻找的[东西-jsFiddle](http://jsfiddle.net/apaul34208/rJ4Py/34/)

```
$(document).ready(function () {
    $("#check1, .checked1").click(function () {
        $('.checked1').addClass('fade');
        $('.checked2').removeClass('fade');
        $("#groundDiv").animate({
            "top": "0px"
        }, 2000);
    });
});
$(document).ready(function () {
    $("#check2, .checked2").click(function () {
        $('.checked2').addClass('fade');
        $('.checked1').removeClass('fade');
        $("#groundDiv").animate({
            "top": "-65px"
        }, 2000);  
    });
}); 
```

css-

```
.fade{
    -webkit-animation: fade 3.5s;
    -moz-animation: fade 3.5s;
    -o-animation: fade 3.5s;
    animation: fade 3.5s;
}
@keyframes fade{
    0%{opacity:0;}
    50%{opacity:1;}
    100%{opacity:0;}
} 
```

# android - Android：使drawables可点击

> ID：15987912
> 
> 赞同：0
> 
> 时间：2013-04-13T12:43:29.320
> 
> 标签：android, google-maps

目前，我有一个在谷歌地图上放置图标的 Android 应用程序。我想知道是否有办法让我的drawables可点击，这样我就可以有一个弹出菜单，为用户提供某种菜单选项。我正在实现这样的drawable：

```
Drawable drawable1 = Drawable.createFromStream(getAssets().open("pics/pin1.png"), null);    
CustomItemizedOverlay itemizedOverlay1 = new CustomItemizedOverlay(drawable1, this);

GeoPoint point1 = new GeoPoint(latitudep1, longitudep1);
OverlayItem overlayitem1 = new OverlayItem(point1, "Icon", "#1");

itemizedOverlay1.addOverlay(overlayitem1);
mapOverlays.add(itemizedOverlay1); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:58:04.080

试试这个方法

```
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

private Context context;
Intent intent;
MapView mapview;

public AddItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
}

public AddItemizedOverlay(Drawable defaultMarker, Context context) {
    this(defaultMarker);
    this.context = context;
}

@Override
protected OverlayItem createItem(int i) {
    return mapOverlays.get(i);
}

@Override
public int size() {
    return mapOverlays.size();
}

@Override
protected boolean onTap(int index) {
    OverlayItem item = mapOverlays.get(index);

    /*intent = new Intent(context, Locationdisplay.class);

    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);// changed

    Bundle bundle = new Bundle();
    bundle.putString("namevalue", item.getTitle());
    intent.putExtras(bundle);

    context.startActivity(intent);*/
        Toast.makeText(context, "tapped", 1).show();

    return true;
}

public void addOverlay(OverlayItem overlay) {
    mapOverlays.add(overlay);
    this.populate();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:32:20.607

不确定是否可能，但您可以在地图上显示 ImageViews 而不是 Drawables 吗？使用 ImageViews 可以很容易地在它们上使用点击事件。

# jquery - 在网页上显示 jsonp 数据

> ID：15987915
> 
> 赞同：1
> 
> 时间：2013-04-13T12:43:41.057
> 
> 标签：jquery, json, asp.net-web-api, jsonp

我正在尝试使用 jsonp 显示数据，但由于某种原因它不想显示在网页上。

```
function test() 
{
    $.ajax(
    {
        url: "http://localhost/api/company",  //web api is hosted on iss 8
        dataType: 'jsonp',
        success: function (data) 
        {
            $("#test").append(data[5].Company);
        }
    });
} 
```

请注意从服务器返回的数据就好了。我通过谷歌浏览器执行测试功能并检查网络选项卡中的响应来测试这一点。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:46:51.103

我建议您在此处阅读 JSON 和带有 Padding (JSONP) 的 JSON 之间的一个很好的解释，以便更好地理解正在发生的事情： [谁能用外行术语解释 JSONP 是什么？](https://stackoverflow.com/questions/3839966/can-anyone-explain-what-jsonp-is-in-layman-terms)

首先是您的调用需要支持 JSONP 的 URL。并非所有 web 服务、rest 接口等都支持它，*即使它们生成 JSON 也是如此*。

其次，您需要包含一个**?callback=?** 在您的 URL 中，以便使用来自 jquery 的 JSONP。

你添加 ?callback=? 到您的 URL，例如：

```
var url = 'URL?callback=?';
  $.getJSON(url, function(jsonp){
    $("#jsonp-response").html(JSON.stringify(jsonp, null, 2));
  }); 
```

您还需要测试实际服务是否支持 JSONP，您可以在浏览器中打开您的 web 服务并添加 ?callback=something

```
http://localhost/api/company?callback=callbackID 
```

如果 API 支持 jsonp，您应该在浏览器中看到如下输出：

```
callbackID({
    JSON DOCUMENT HERE
}); 
```

在下一节中，我将包含一些链接，以显示什么是标准的纯 JSON 响应，以及什么是 JSONP 响应。

**使用 Twitter API 的实时示例**

当您使用 getJson 发送请求并有 ?callback=? jquery 会自动添加一个回调 id。

网络服务器收到一个请求，例如并使用回调名称（本例为“a”）包装数据：

```
http://search.twitter.com/search.json?since_id=91770779645124609&q=test&callback=a 
```

如果您在没有回调的情况下尝试相同的请求，您只会看到无法跨站点使用的 JSON：

```
http://search.twitter.com/search.json?since_id=91770779645124609&q=test 
```

# iphone - 如果应用程序被杀死，NSUserDefaults 返回当前时间而不是存储时间

> ID：15987916
> 
> 赞同：0
> 
> 时间：2013-04-13T12:44:01.433
> 
> 标签：iphone, ios, objective-c, nsuserdefaults

我正在保存当前`NSDate`时间`NSUserDefaults`，以便将其与应用程序返回前台或再次激活时的当前时间进行比较。

所以我用它来存储它：

```
NSUserDefaults *stateOfPlay = [NSUserDefaults standardUserDefaults];

NSDate *timeBackgrounded = [NSDate date];

[stateOfPlay setObject:timeBackgrounded forKey:@"timeBackgrounded"];
[stateOfPlay synchronize]; 
```

这是检索它。

```
NSUserDefaults *stateOfPlay = [NSUserDefaults standardUserDefaults];
[stateOfPlay synchronize];

NSDate *timeBackgrounded = [stateOfPlay objectForKey:@"timeBackgrounded"]; 
```

当应用程序在后台运行并返回时，一切正常。看到这个 NSLog：

```
<Warning>: saved timeBackgrounded: 2013-04-13 12:21:01 +0000
...
<Warning>: read timeBackgrounded: 2013-04-13 12:21:01 +0000
<Warning>: current time: 2013-04-13 12:22:54 +0000 
```

到目前为止，一切都很好。但是当我在后台关闭应用程序然后重新启动它时，它的后台时间不再从`NSUserDefaults`. 相反，它返回当前时间。

```
<Warning>: saved timeBackgrounded: 2013-04-13 12:23:09 +0000
...
<Warning>: read timeBackgrounded: 2013-04-13 12:23:43 +0000
<Warning>: current time: 2013-04-13 12:23:43 +0000 
```

当应用程序再次启动时，我存储的其他内容（一些整数）返回正常。那么我错过了什么？

**编辑：**

`NSUserDefaults``NSNotificationCenter`像这样被调用：

调用 via `NSNotificationCenter`，如下所示：

```
[[NSNotificationCenter defaultCenter]
addObserver:self
selector:@selector(goBackground)
name:UIApplicationDidEnterBackgroundNotification
object:nil];

//if app foregrounds or opens, adjust score for time in background

[[NSNotificationCenter defaultCenter]
addObserver: self
selector: @selector(goForeground)
name:UIApplicationWillEnterForegroundNotification
object:nil]; 
```

我可以从控制台看到，当应用程序前景或背景时，它们中的每一个都正确触发；但是在杀死之后，返回的时间`NSUserDefaults`是当前时间，而不是存储在那里的时间。

**编辑#2**

我发现了问题 - 我正在初始化它`didFinishLaunchingWithOptions:`，但不是`[[NSUserDefaults standardUserDefaults] registerDefaults:defaultsDictionary]`. 所以每次应用程序启动时它都会被覆盖。

添加第一个设置`defaultsDictionary`通过确保它仅在应用程序第一次启动时才被初始化来解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:06:57.640

嘿，从 NSUserDefaults 检索数据时，不要根据苹果文档再次同步

**同步** 将对持久域的任何修改写入磁盘，并将所有未修改的持久域更新到磁盘上的内容。

所以其中存在的日期可能会再次修改......

我希望这很好用…………

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:19:12.083

我在这里看到的一件事是您为 NSUserDefaults 调用 getter/setter 的地方。检查它是否一直在更新打开应用程序、视图控制器转换等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:08:56.393

我发现了问题 - 我在 -(void)didFinishLaunchingWithOptions 中初始化它，但不是作为

```
[[NSUserDefaults standardUserDefaults] registerDefaults:defaultsDictionary] 
```

所以每次应用程序启动时它都会被覆盖。

将第一个设置添加到 defaultsDictionary 通过确保它仅在应用程序第一次启动时才被初始化来解决问题。

# css - CSS 表格 td 垂直对齐 text-top

> ID：15987917
> 
> 赞同：24
> 
> 时间：2013-04-13T12:44:12.273
> 
> 标签：css, vertical-alignment

我在表格上垂直对齐到文本顶部有问题

我已将表全局设置`td`为`vertical-align: middle`.

现在我只需要将**一个** `td`更改为`vertical-align: text-top`

问题是，我测试的所有变体都只`vertical-align:text-top`显示为**顶部**

（图像中的“xxxx”与“yyyy”不在同一行）

只有一个变体作为 工作`text-top`，那就是改变所有的全局风格`td`（我不想要这个，我**只需要改变一个** `td`）

查看图片

设置为本地样式显示为**顶级** [本地样式 http://aukro.svecpetr.com/style.png](http://aukro.svecpetr.com/style.png)

设置为类显示为**顶级** [本地样式 http://aukro.svecpetr.com/class.png](http://aukro.svecpetr.com/class.png)

更改全局`td`具有**文本顶部** [本地样式的正确效果 http://aukro.svecpetr.com/global-style.png](http://aukro.svecpetr.com/global-style.png)

**示例**您可以在 [https://zbozimat.cz/test.php找到](https://zbozimat.cz/test.php)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-13T17:51:30.833

为 div 添加这个：

```
display: inline-block;
vertical-align: top; 
```

这是输入：

```
display: inline-block;
vertical-align: top; 
```

# javascript - 我应该如何跟踪我的 Web 应用程序数据库中要更新的条目？

> ID：15987920
> 
> 赞同：0
> 
> 时间：2013-04-13T12:44:23.577
> 
> 标签：javascript, database, web-applications

我正在尝试创建一个 TODO 列表网络应用程序以用于自学目的。我使用 JavaScript 和 PHP。

在客户端，我的应用程序使用全局变量`list_id`来存储用户当前正在查看的列表的 ID。此 ID 与存储在数据库中的 ID 相同。因此，当用户更新列表中的某些内容时，它会发送`list_id`到 PHP 并更新数据库中的相应条目。

但我注意到这种方法非常不安全。也就是说，攻击者只需`list_id`在其 Web 浏览器的控制台中更新 的值，他们就可以通过更改 的值来修改数据库中的任何列表`list_id`。

我应该如何防止这种情况，同时还要跟踪数据库中要更新的列表？

我想我可以将一个变量声明为 final/const，但我认为在 JavaScript 中没有跨浏览器的方法可以做到这一点。也许更好的方法是将 ID 声明为类中的私有变量，并确保没有更新该变量的方法。什么是最安全的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:46:52.903

如果您使用登录系统，您应该检查用户会话 ID == 条目的所有者 ID，然后才允许对其进行编辑。

# ios - Restkit + Rails API 还是 TouchDB + CouchDB？

> ID：15987923
> 
> 赞同：0
> 
> 时间：2013-04-13T12:44:56.623
> 
> 标签：ios, restkit, touchdb

你们中的任何人都知道哪种模型对于 iOS 云数据驱动的应用程序更简单？

Restkit + RESTful API 还是 TouchDB + CouchDB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T17:46:59.443

如果不知道你想做什么，真的很难回答你的问题。您当然可以使两者都适用于不同的用例。

有几件事需要考虑：

*   如果离线模式很重要。

TouchDB 是一个运行在设备上的全功能 nosql 数据存储，它允许用户在没有连接的情况下读取和写入数据。Restkit 需要连接才能完全工作。

*   调整要复制的数据集大小

TouchDB 会将数据复制到设备上，如果您的数据集相对较小，则更容易。大小由数据库中有多少文档以及文档的大小来衡量。

此外，大多数时候设备只需要在应用程序启动时进行完全复制（初始复制），因此您可以解决这个问题（例如，将大部分数据嵌入到应用程序 apk 本身中）并且只复制增量。

顺便说一句，您当然可以同时使用两者，并获得两者的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T07:15:57.823

使用 CouchDB+TouchDB 完全消除了同步的麻烦。你不需要关心同步，它只是工作。您会在同步时收到通知，更新您的 UI，就是这样。

用 TouchDB 替换 Core Data 堆栈也相当容易。模型对象基本保持不变，只是它们现在继承自 CouchModel 而不是 NSManagedObject。这几乎是微不足道的。

查询与 Core Data 略有不同。您定义一组视图（索引），按照不同的标准对数据进行切片和排序，然后使用开始和结束键查询这些索引。所以，没有明确的查询语言，但这并没有什么不便，真的。

我已经将一个 Core Data 应用程序移到了 TouchDB，它完全没有痛苦。大约 3 天后，我完成了 CRUD 和同步启动并运行。

# windows - windows github工具 - 使用分支取消发布或删除？

> ID：15987924
> 
> 赞同：5
> 
> 时间：2013-04-13T12:45:00.097
> 
> 标签：windows, github, git-branch

我是 Github 的新手，我一直在使用[**windows github 工具**](http://windows.github.com/)，它被证明有很大的帮助，并处理了很多事情，比如 SSH 密钥、提示提交、丢弃提交、恢复提交，并且它具有拉取的组合机制+合并和推送（同步），还有很多！

我正在学习它并试图获得它的内部 git 命令级执行。前几天，我合并了一个修补程序分支，然后想删除它-

```
git branch -d hotfix 
```

我还需要知道如何从服务器中删除它。Windows 工具的管理分支中可用的以下两个操作的 git 等效项是什么 -

> *   **取消发布**分支 - 仅从服务器中删除
> *   **删除**分支 - 在本地和服务器上删除

我怀疑的另一件事是上面的 git 命令无法在本地删除分支。我执行了它，它删除了分支（没有显示在**$ git branch**中）但是如果我重新启动该工具，分支仍然存在！那是一个小故障吗？

*如果有人一直在使用这些，您能否建议最好的方法（我不想完全依赖该工具，我也想学习 git）。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T12:55:54.090

此外

```
git branch -d hotfix 
```

你也可以从 GitHub 中删除它：

```
git push origin --delete hotfix 
```

您可以在“[如何在本地和 GitHub 中删除 Git 分支？](https://stackoverflow.com/questions/2003505/how-do-i-delete-a-git-branch-both-locally-and-in-github/2003515#2003515) ”中查看更多信息。

* * *

如果你已经在本地删除了分支，一个简单的：

```
git push --prune origin 
```

足以清理 GitHub 存储库中的相同分支。

* * *

相反的情况是你在 GitHub 上删除了分支，而它们仍在你的本地仓库中。
在这种情况下：

```
git remote prune origin 
```

请参阅“[清理旧的远程 git 分支](https://stackoverflow.com/questions/3184555/cleaning-up-old-remote-git-branches/3184742#3184742)”。

# java - Icefaces 1.8 SelectInputText 字符串值自动完成

> ID：15987928
> 
> 赞同：1
> 
> 时间：2013-04-13T12:45:22.457
> 
> 标签：java, jsf, servlets, icefaces, jsf-1.2

我的代码中似乎有一些愚蠢的错误，但无法弄清楚:(

我`SelectInputText`在屏幕上有一个组件。从自动完成功能中选择字符串值时，我需要在`PanelGrid`. 该`SelectInputText`功能工作正常，即自动完成显示正确的值。当我从自动完成列表中选择一个值时，我无法在`PanelGrid`.

下面是`jspx`：

```
<ice:form>
             <ice:panelGroup>
                <ice:outputText value="Name: "/>        
                <ice:selectInputText id="AutoCmpTxt"
                                     rows="#{nameBean.nameListLength}"
                                     width="300"
                                     value="#{nameBean.name}"
                                     valueChangeListener="#{nameBean.selectInputValueChanged}">
                    <f:selectItems id="AutoCmpTxtItms"
                                   value="#{nameBean.availableNames}"/>
                </ice:selectInputText>
            </ice:panelGroup>           
            <ice:panelGrid columns="2" rendered="#{studentDetail.visible }">
                <ice:outputLabel value="Name"></ice:outputLabel>
                <ice:outputText value="#{studentDetail.name }"></ice:outputText>
                <ice:outputLabel value="Age"></ice:outputLabel>
                <ice:outputText value="#{studentDetail.age }"></ice:outputText>
                <ice:outputLabel value="Gender"></ice:outputLabel>
                <ice:outputText value="#{studentDetail.gender }"></ice:outputText>
                <ice:outputLabel value="Location"></ice:outputLabel>
                <ice:outputText value="#{studentDetail.location }"></ice:outputText>
            </ice:panelGrid>
        </ice:form> 
```

下面是`NameBean.java`

```
public class NameBean {

private List<SelectItem> availableNames;
private String name;
private int nameListLength = 3;
private StudentDetails studentDetails;

public int getNameListLength() {
    return nameListLength;
}

public NameBean() {
    availableNames = new ArrayList<SelectItem>();
    studentDetails = new StudentDetails();
}

public List<SelectItem> getAvailableNames() {
    return availableNames;
}

public void setAvailableNames(List<SelectItem> availableNames) {
    this.availableNames = availableNames;
}

public void selectInputValueChanged(ValueChangeEvent event){

    if(event.getComponent() instanceof SelectInputText){            
        SelectInputText autoComplete = (SelectInputText) event.getComponent();
        String value = (String)event.getNewValue();
        DataService service = new DataService();
        this.availableNames = service.getAvaliableNames(value);

        if (autoComplete.getSelectedItem() != null) {
            System.out.println("Selected");
            String name = (String) autoComplete.getSelectedItem().getValue();
            System.out.println("Name Selected: " + name);
            StudentDetails details = getAvaliableNames(name);
            if (details != null){
                this.studentDetails = details;
            }                
        }
        else{
            System.out.println("Still Not Selected!!!");
            StudentDetails details = getAvaliableNames(value);
            if (details != null){
                this.studentDetails = details;
            }
        }
}
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

private StudentDetails getAvaliableNames(String name){
           //This will return a StudentDetails Model with some data
}

} 
```

`StudentDetails`bean 是一个只有 soem getter 和 setter 的类。

以下是托管 bean 条目：

```
<managed-bean>     
    <managed-bean-name>nameBean</managed-bean-name>
    <managed-bean-class>com.infy.bean.NameBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>        
</managed-bean>
<managed-bean>
    <managed-bean-name>studentDetail</managed-bean-name>
    <managed-bean-class>com.infy.bean.StudentDetails</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>        
</managed-bean> 
```

请让我知道我错过了什么（必须是非常愚蠢的东西：（）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:39:01.320

好的，我将其更改`PanelGrid`为这个，它对我有用：

```
<ice:panelGrid columns="2" rendered="#{nameBean.studentDetails.visible }">
                <ice:outputLabel value="Name"></ice:outputLabel>
                <ice:outputText value="#{nameBean.studentDetails.name }"></ice:outputText>
                <ice:outputLabel value="Age"></ice:outputLabel>
                <ice:outputText value="#{nameBean.studentDetails.age }"></ice:outputText>
                <ice:outputLabel value="Gender"></ice:outputLabel>
                <ice:outputText value="#{nameBean.studentDetails.gender }"></ice:outputText>
                <ice:outputLabel value="Location"></ice:outputLabel>
                <ice:outputText value="#{nameBean.studentDetails.location }"></ice:outputText>
            </ice:panelGrid> 
```

# php - 使用PHP将汉字插入mysql db

> ID：15987931
> 
> 赞同：0
> 
> 时间：2013-04-13T12:45:56.380
> 
> 标签：php, mysql, insert

我想问一下为什么下面显示的代码不能将汉字插入`$split 5`MySQL db。我也创建了一个`db`using`utf8_general_ci`和 table。

```
 $mysqli = new mysqli($GLOBALS["mysql_host"], $GLOBALS["mysql_user"], $GLOBALS["mysql_passwd"], $GLOBALS["mysql_database"]);
$stmt = mysql_query("SET character_set_results 'utf8', character_set_client = 'utf8', character_set_connection = 'utf8', character_set_database = 'utf8', character_set_server = 'utf8");
$stmt = $mysqli->prepare("INSERT INTO cell (`add`) VALUES (?)");
$stmt->bind_param("s", $split[5]);
$stmt->execute();
$stmt->close();
$mysqli->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:49:39.907

首先，有一个错字。你已经使用`mysql_query()`而不是`mysqli_query()`

* * *

遵循 PHP 中的 mysqli 文档，`mysqli_set_cahrset()`是要走的路：

```
$mysqli->set_charset ('utf8'); 
```

所以我会添加上面的行并删除`mysql_query('SET ...');`语句

# spring-mvc - 在spring MVC中为多个像gmail选择文件上传

> ID：15987936
> 
> 赞同：-1
> 
> 时间：2013-04-13T12:46:19.863
> 
> 标签：spring-mvc

我用谷歌搜索了很多，但我没有找到任何线索，这就是为什么发布问题

我想上传文件而不在spring MVC中提交表单，并且文件应该在选择文件后上传。这就像在 gmail 撰写屏幕中附加多个文件一样。

如果您有任何示例或线索，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-20T14:23:13.647

控制器代码 查看代码 在你的项目中添加这些脚本和样式 （1）jquery.uploadify.v2.1.4.min.js（我在Scripts文件夹中添加） （2）swfobject.js（Scripts文件夹） （3）uploadify.css (content 文件夹) (4)uploadify.swf(Scripts 文件夹) (5)cancel.png(images 文件夹) 你可以根据自己的需要添加这些文件，更多细节和下载文件点击[这里](http://www.codedigest.com/Articles/ASPNET/376_Upload_Multiple_Files_in_ASPNet_Using_jQuery_in_GMAIL_style.aspx)[![在此处输入图像描述](https://i.stack.imgur.com/Hi9WH.jpg)](https://i.stack.imgur.com/Hi9WH.jpg)
[![在此处输入图像描述](https://i.stack.imgur.com/IWjbg.jpg)](https://i.stack.imgur.com/IWjbg.jpg)

# iis - 静态文件上的 404

> ID：15987939
> 
> 赞同：0
> 
> 时间：2013-04-13T12:46:38.440
> 
> 标签：iis, iis-7.5

我尝试在我的网络浏览器中打开一个静态文件（PNG 图像），但它返回 404。然后我停止并启动网站并重试，我可以看到图像。但是，只要我在浏览器中按 CTRL+F5，我就会再次得到 404。

这是 IIS 日志的一部分：

```
2013-04-13 12:37:05 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 200 0 0 1809
2013-04-13 12:37:06 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 304 0 0 78
2013-04-13 12:37:06 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 304 0 0 62
2013-04-13 12:37:06 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 304 0 0 46
2013-04-13 12:37:07 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 304 0 0 62
2013-04-13 12:37:07 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 304 0 0 62
2013-04-13 12:37:15 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 200 0 0 15
2013-04-13 12:37:15 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 200 0 0 15
2013-04-13 12:37:15 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 200 0 0 15
2013-04-13 12:37:15 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 200 0 0 15
2013-04-13 12:37:38 1.2.3.4 GET /files/01/018a9b17-a1ee-47ca-bf6d-9c13667c1dc3.png - 80 user 5.6.7.8 Mozilla/5.0 404 0 0 62 
```

如您所见，我能够获得几次图像。但后来它返回了 404。我已经尝试了几次，行为是一样的。

我的猜测是它与 IIS 中的缓存有关。但是我应该去哪里看？

**更新**

我用 Process Monitor 做了一些分析，但对我来说似乎没有什么问题......

![进程监视器截图 404 静态文件](https://i.stack.imgur.com/nQDie.png) [更大的图像](https://i.stack.imgur.com/nQDie.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:39:00.077

This might be the answer for your question: [IIS Status Codes Documentation](http://support.microsoft.com/?scid=kb;en-us;318380&x=17&y=8)

For me, the logs are in *C:\Windows\System32\LogFiles\HTTPERR\httperr1.log*.

In theory, if you do not see a subcode that means a 404.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:37:50.827

该网站是 Kentico 网站，默认情况下所有请求都通过 Kentico 路由器处理程序。通过将文件夹添加到站点管理器、设置、URL 和 SEO 中的排除列表中，排除的 URL 网站现在可以正常工作。

# ruby-on-rails - 如何在 ruby on rails 应用程序中将数组输出转换为普通字符串

> ID：15987944
> 
> 赞同：4
> 
> 时间：2013-04-13T12:46:54.113
> 
> 标签：ruby-on-rails, ruby, arrays, string

我正在实现标签功能，一篇文章可能有一对多标签。我能够以这种格式从 db 获取标签值

```
["social network", "professional"] 
```

我想要这种格式的输出

```
"social network professional" 
```

我想将数组转换为不带`,`. 下面是一个代码片段，它从 db 中取出值作为数组。

```
<%= article.tags.collect(&:name) %> 
```

如何将此输出转换为不带任何逗号的字符串值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T12:51:37.393

你看了`pluck`吗？如果您只需要数据库中的一条记录（在您的情况下为“名称”），这非常有用。你可以用它来做到这一点：

```
a = article.tags.pluck(:name) 
```

然后输出以空格分隔的文章名称，请执行以下操作：

```
a.join(" ") 
```

为了完整起见，您可以像这样链接这些方法（就像您在下面的评论中所说的那样）：

```
article.tags.pluck(:name).join(" ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:17:04.047

我得到了以下两个解决方案：

```
<%= article.tags.collect(&:name).join(" ")%>
<%= article.tags.pluck(:name).join(" ") %> - by yossarian. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-07-08T14:38:09.313

["社交网络", "专业"].join(",")

> “社交网络，专业”

# 或者如果你不想要逗号

["社交网络", "专业"].join(" ")

> “社交网络专业人士”

# matlab - Matlab：找到由微分方程给出的 y 值的根

> ID：15987947
> 
> 赞同：2
> 
> 时间：2013-04-13T12:47:17.700
> 
> 标签：matlab, interpolation

我已经求解了一个初始值微分方程并绘制了 ODE45 给出的 Y 值。从图中我可以模糊地告诉根应该在哪里，但在给定的任务中，我需要非常准确地找到它。

我的第一个猜测是将多项式调整为我的 X 和 Y 值，然后求解多项式方程。但是我使用了 polyfit 并且有 69 个已知值，这给了我一个 68grade 的多项式，我无法解决。那么，有谁知道我如何在不知道实际方程的情况下找到一组给定 Y 值的“根”？任务中写到应该使用插值！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:11:34.277

给定一个 Y 值向量（按照相应的 X 值稳步增加的意义进行排序），您可以很容易地找到根所在的 X 值附近。根要么在 Y 值为零的地方，要么在两个改变符号的连续 Y 值之间。此代码片段说明了这个想法：

```
X = -1:0.1:1;
Y = X.*X - 0.4;

root_exact_pos  = find(Y==0);
root_approx_pos = find(diff(sign(Y))~=0); 
```

根在`X`值中，无论是 in`X(root_exact_pos(k))`还是介于`X(root_approx_pos(k))`and之间`X(root_approx_pos(k)+1)`，`k`从 1 到相应根位置数组的元素数。

从这里开始，您可以应用您想要找到更好的根近似值的任何插值（我会在 2 点之间使用线性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T19:51:28.273

你说你需要“非常准确地”找到根。上面@CST-Link 的答案不是如果你用 数值求解微分方程怎么做`ODE45`。事实上，这是一个坏主意。它需要以高分辨率输出解点并引入错误，如果您正在积分的方程是保守的（即，您将有效地从总能量应始终保持恒定的解中添加或减去能量），这可能会特别糟糕。您需要使用 Matlab 的 ODE 求解器的事件检测（过零）功能。这通常能够以接近机器 epsilon 的精度找到您的根，`eps`. 而@CST-Link 给出的技术只会给出 ODE45 步长数量级的精度，这可能非常大（插值可用于帮助改善这一点，但`eps`除非你使用小步长）。

查看 Matlab 对 的帮助`ODE45`，事件功能似乎令人困惑，因此我将尝试使用基于`ballode`（`help ballode`以及`edit ballode`更多信息）的代码给出一个更简单的示例，Matlab 包含用于演示事件的示例。

```
function eventsdemo

options = odeset('Events',@efun); % specify name of events function
[t,y,te,ye,ie] = ode45(@f,[0 10],[0;20],options); % integrate
figure
plot(t,y(:,1),'b',te,ye(:,1),'r.')

function dydt = f(t,y)
dydt = [y(2);-9.8]; % differential equation for ballistic motion

function [value,isterminal,direction] = efun(t,y)
value = y(1);
isterminal = 1;
direction = -1; 
```

这个例子只是一个球在垂直方向上的简单弹道运动：函数`f`。目标是准确检测球在穿过地平面时的速度，`y(1) == 0`线在负方向。如果你过早发现接触，球的速度将低于实际速度，能量将丢失；为时已晚，能量将被注入。的`value`输出`efun`定义了交叉点必须为零的方程。这可以根据需要简单或复杂，可以取决于所有状态变量和时间，并且您可以通过指定向量来检测多个交叉点。在您的情况下，听起来您对 x 轴上的根感兴趣，所以我想您可能有相同的定义`value`. 如果您只想要第一个根或者只有一个，则`isterminal`在找到它时将停止集成。最后，如果您不知道函数在根部的斜率/梯度，您可以设置`direction`为零。用上面的代码试试这个事件函数（`ie`可以用来判断在`te`和`ye`输出中触发了三个事件中的哪一个）：

```
function [value,isterminal,direction] = efun(t,y)
value = [y(2) y(1)-10 y(1)];
isterminal = [0 0 1];
direction = [-1 0 -1]; 
```

一些小警告。您需要将最终积分时间设置为足够长。换句话说，事件必须在`t0`and之间发生（如果您不知道事件将在哪里发生，`tf`请参阅`ballode`迭代调用的方案）。`ODE45`如果设置`isterminal`为零，则输出`t`向量和`y`矩阵将被修剪以在终端事件发生时结束。最后，如果您指定固定步长输出，例如 ，`TSPAN = t0:dt:tf`最后一个输出点的步长可能会更小。

# angularjs - 如何使用 angularJS 在 HTML 中分配（动态）变量

> ID：15987949
> 
> 赞同：1
> 
> 时间：2013-04-13T12:47:23.890
> 
> 标签：angularjs, angularjs-directive

我有一个复杂的指令，我在许多 HTML 页面上使用我的应用程序。它变得复杂并包含嵌套结构，因此我将其复制并粘贴到任何地方：

```
<card ng-repeat="card in deck"
    scalex="card.scalex"
    scaley="card.scaley"
    ...

    <img ng-repeat="wait in [] | range:card.f" src="symbol.png"       style="position:absolute; left:{{(13*$index + 3 )}}px; z-index: 1;bottom:0px"></img>
    ...

    <icon ng-repeat="icon in card.icons"
        x="icon.x"
        y="icon.y"
        ...
        />
</card> 
```

但是，该指令并不总是绑定到变量“card”。因此，在复制和粘贴之后，我需要将许多作业从“card.bar”的形式更改为“foo.bar”。这有点费力且容易出错。我想分配一个与 foo 具有相同状态的绑定变量卡。然后我不需要更改我一直复制和粘贴的源。

那么有没有我可以在 HTML 中添加一个指令前面的衬线，它将 foo 重新分配给卡？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T12:47:23.890

```
{{card=foo;""}} 
```

啊，尾随，“”停止 AngularJS 表达式被评估为任何文本

# spotify - 临时播放列表的马赛克视图

> ID：15987951
> 
> 赞同：1
> 
> 时间：2013-04-13T12:47:29.260
> 
> 标签：spotify

如果我创建临时播放列表，请手动添加曲目，然后尝试将其用作图像视图的来源：

```
var imageForPlaylist = imageView.forPlaylist(playlist, { height: 300, widht: 300 }); 
```

结果始终是占位符（quaver 图像）。

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:50:45.097

您应该看到马赛克图像。试试这个代码，它会生成一个包含 10 个曲目的临时播放列表：

```
(function () {
  "use strict";
  var sp = getSpotifyApi(),
    models = sp.require("$api/models"),
    views = sp.require("$api/views"),
    container = document.getElementById('container');

  var tempPlaylist = new models.Playlist();
  var playlistUri = 'spotify:user:nowplaylist:playlist:6QHyDeqaPNZ0nyLFJbSKTL';
  models.Playlist.fromURI(playlistUri, function (playlist) {
    for (var i = 0, l = Math.min(10, playlist.length); i < l; i++) {
      var track = playlist.get(i);
      tempPlaylist.add(track);
    }
  });

  var player = new views.Player();
  player.context = tempPlaylist;
  container.appendChild(player.node);
})(); 
```

并`Image`用播放器渲染：

![临时播放列表的播放器](https://i.stack.imgur.com/e8upO.png)

# sql-server - 索引不影响索引视图中的查询性能

> ID：15987954
> 
> 赞同：2
> 
> 时间：2013-04-13T12:47:40.563
> 
> 标签：sql-server, performance, sql-server-2008, view, indexing

我想检查索引视图的查询性能。

我创建了一个基于数据库中所有列的`Product`表的视图。`Northwind`创建视图后，我在视图上添加了一个聚集索引（因为我无法在没有 int 的情况下创建非聚集索引）。

现在，在添加非聚集索引之前，我会检查此查询执行计划和统计信息：

```
SELECT [ProductName]
  ,[QuantityPerUnit]
  ,[UnitPrice]
  ,[UnitsInStock]
  ,[UnitsOnOrder]
  ,[ReorderLevel]
  ,[Discontinued]
FROM [Northwind].[dbo].[test_IndexedView]
WHERE UnitPrice = 21.35 
```

然后我创建一个索引：

```
CREATE NONCLUSTERED INDEX [idx_Unitp] ON [dbo].[test_IndexedView] 
(
[UnitPrice] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

我再次执行该查询，但没有任何变化。不在执行计划中，不在统计中。

问题出在哪里？如何使用索引视图提高性能？

* * *

**编辑 1）** 我创建一个视图：

```
CREATE VIEW [dbo].[indexView]
WITH SCHEMABINDING 
AS
    SELECT     ProductName, SupplierID, CategoryID, QuantityPerUnit, UnitPrice, UnitsInStock, UnitsOnOrder, Discontinued, ReorderLevel
    FROM         dbo.Products
GO 
```

然后当我想在它上面创建一个“非聚集索引”时，就像这样：

```
CREATE NONCLUSTERED INDEX [idx_Unitp] ON [dbo].[IndexView] 
(
    [UnitPrice] ASC
) 
```

我收到此错误：

> 消息 1940，级别 16，状态 1，第 1 行
> 无法在视图“dbo.IndexView”上创建索引。它没有唯一的聚集索引。

所以我被迫创建了一个聚集索引。

索引前后的执行计划都是`Index Scan`

结果`SELECT @@VERSION`是：

> Microsoft SQL Server 2008 (SP2) - 10.0.4000.0 (Intel X86)
> Sep 16 2010 20:09:22 版权所有 (c) 1988-2008 Microsoft Corporation
> Enterprise Edition on Windows NT 6.1 (Build 7600: )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:57:02.437

由于您从表中选择 7 列，并且索引仅包含`UnitPrice`它自己，因此 SQL Server 查询优化器仍然认为扫描比使用索引查找价格然后必须进行键查找更有效对于找到的每一行以获取其他列。

我几乎敢打赌，如果您像这样在索引中**包含**其他列

```
CREATE NONCLUSTERED INDEX [idx_Unitp] 
ON [dbo].[test_IndexedView] ([UnitPrice] ASC)
   INCLUDE(ProductName, QuantityPerUnit, UnitsInStock, UnitsOnOrder, ReorderLevel, Discontinued) 
```

然后将使用该索引 - 几乎可以肯定。

实际使用非聚集索引的要求非常严格——比大多数人起初所相信的要严格得多。选择性必须非常高 - 有时低于 1% - 才能考虑指数。此外，返回的总行数（以及因此获取其余数据所需的键查找总数）需要很小。

最好的办法是始终拥有一个**覆盖索引**- 一个包含满足查询的所有信息（所需的所有列）的索引 - 在这种情况下，使用该 NC 索引的可能性会显着增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:57:53.733

你说“我被迫创建了一个聚集索引”。但不要给出定义。由于视图上的聚集索引需要是唯一的，我添加`ProductID`到视图定义中并假设

```
CREATE UNIQUE CLUSTERED INDEX [idx_Unitp] ON [dbo].[IndexView] 
(
    [UnitPrice] ASC, ProductID ASC
) 
```

然后我通过对基表的扫描看到与您相同的情况

![扫描计划](https://i.stack.imgur.com/av1Su.png)

除非我将查询更改为`FROM [Northwind].[dbo].[IndexView] WITH (NOEXPAND)`在计划确实在视图上显示搜索时使用。

![寻求计划](https://i.stack.imgur.com/W4vuq.png)

原因在[这里解释](https://dba.stackexchange.com/a/27039/3690)。最初的查询得到了一个简单的计划，成本仅为`0.0033667`. 优化器在进行索引视图匹配之前选择此计划。

无论如何，这不是索引视图的好用处。直接在基表上创建索引会更好

```
CREATE NONCLUSTERED INDEX ixNoView
  ON dbo.Products (UnitPrice)
  INCLUDE ( ProductName, 
            QuantityPerUnit, 
            UnitsInStock, 
            UnitsOnOrder, 
            Discontinued, 
            ReorderLevel) 
```

这比视图上的聚集索引更窄，因为它只有 7 列而不是 10 列，并且避免了索引视图匹配问题并且更容易被其他开发人员发现。

现在使用非索引视图

```
CREATE VIEW [dbo].[nonIndexedView]
AS
  SELECT ProductName,
         SupplierID,
         CategoryID,
         QuantityPerUnit,
         UnitPrice,
         UnitsInStock,
         UnitsOnOrder,
         Discontinued,
         ReorderLevel,
         ProductID
  FROM   dbo.Products 
```

查询

```
SELECT [ProductName]
  ,[QuantityPerUnit]
  ,[UnitPrice]
  ,[UnitsInStock]
  ,[UnitsOnOrder]
  ,[ReorderLevel]
  ,[Discontinued]
FROM dbo.nonIndexedView
WHERE UnitPrice = 21.35 
```

显示索引查找

![非索引视图](https://i.stack.imgur.com/bAOeJ.png)

# css - Wordpress 插件 - CSS 未加载

> ID：15987956
> 
> 赞同：3
> 
> 时间：2013-04-13T12:48:12.253
> 
> 标签：css, wordpress, themes

插件不加载 CSS 文件。

主题的 CSS 加载得很好，但插件 CSS 没有加载。

^(如果相关，该网站是：[http ://de.rundertisch.org/](http://de.rundertisch.org/))

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-29T08:43:51.323

wp_head(); 之前从 header.php 中丢失

也不要忘记 wp_footer(); 在footer.php 之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-14T10:33:09.943

我有一个类似的问题，样式确实加载但无法正常工作。我通过替换解决了它：

```
<body> 
```

和

```
<body <?php body_class(); ?>> 
```

# java - 如何使用 toUpperCase 拼音？

> ID：15987957
> 
> 赞同：0
> 
> 时间：2013-04-13T12:48:25.397
> 
> 标签：java, case, setlocale

我想将 toUpperCase() 用于一组 JButton。这些按钮被添加到 JPanel 中，而 JPanel 又被添加到 JDialog 中。按钮的文字是拼音特殊字符。问题是， toUpperCase 依赖于设置的 Locale 并且不知道这些字符的大写版本，因此根本不会更改它们。

我使用了这个命令：

```
button.setText(button.getText().toUpperCase()); 
```

（我知道 toUpperCase 不会更改字符串本身）由于按钮文本是拼音特殊字符，因此不会更改它。

我需要设置哪个区域设置？我已经尝试过 ROOT、CHINA、CHINESE、new Locale("LATIN") 等，但都没有帮助 toUpperCase 方法工作。

拼音特殊字符：āáǎà 同 e,i,o,u 和 ü。

我也可以将所有按钮与其他按钮交换，但我认为如果可能的话，简单地更改文本的大小写会更好。当用户单击其中一个按钮时，我只想获取按钮文本并将其添加到 JTextfield 中。

# user-roles - 我应该为多个角色编写类似的用户故事吗？

> ID：15987959
> 
> 赞同：1
> 
> 时间：2013-04-13T12:48:28.923
> 
> 标签：user-roles, user-stories

我们的两个用户角色似乎有一个相似的故事。

有一个外部和一个内部销售人员被确定为不同的角色。

他们都可以在调查中捕获数据。但是外部推销员（并且只有她）能够添加新的调查来源（例如商店），但只能在创建新调查时添加。内部销售人员必须在另一个系统中添加新的调查源，该系统将在一夜之间导入。没有调查就不可能添加新的调查来源。

到目前为止，我们有这个故事：

```
As a salesman i can create a survey so that the survey source can be benchmarked. 
```

而这些场景：

```
Scenario: Survey created by internal salesman    
Given an internal salesman
and a choosen shop as survey source
when a survey is created
then the survey source is benchmarked.

Scenario: Survey created for new survey source by external salesman
Given an external salesman
and a new shop as survey source
when a survey is created
then the survey source is added 
and the survey source is benchmarked. 
```

我怀疑这应该是要求的结束。首先，没有明确定义“推销员”角色。但我们在故事中使用它。并且没有明确规定只能由外部推销员创建新的调查来源。

我们应该改写还是拆分故事？将“添加新调查源”放在场景中是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:19:58.113

在你开始写故事之前，也许我们应该回到几步。理想情况下，您的需求分析应该从角色（或更好的角色）的初步列表开始，以描述系统参与者是谁以及他们想对系统做什么。所以在你的模型中，内部和外部推销员听起来像是不同的角色，因为他们的互动和他们从系统中得到的东西是不同的。

一旦你确定了一个角色，那么最好画一个简单的域或上下文图来显示角色和外部系统如何与你正在构建的系统交互。( [http://www.agilemodeling.com/essays/initialRequirementsModeling.htm](http://www.agilemodeling.com/essays/initialRequirementsModeling.htm) )

根据您的描述，听起来您应该有一个图表，显示 2 个不同的销售角色和调查源系统，其中箭头描述了这些元素如何与主系统交互。单独的外部销售角色可以直接添加调查来源这一事实在上下文图中应该非常清楚。而且由于他们的互动看起来与内部销售角色不同，您会知道您实际上有两个不同的用户故事。

# libsvm - 使用 SVM 进行文档分类

> ID：15987963
> 
> 赞同：0
> 
> 时间：2013-04-13T12:48:42.553
> 
> 标签：libsvm, svm

哪个是文档分类项目的最佳 SVM 算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T03:14:51.233

Document classification tasks typically feature high dimensional, sparse input spaces when you use a [bag-of-words](https://en.wikipedia.org/wiki/Bag-of-words_model) vectorization of the documents (typically in [tf-idf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf "tf-idf") form). This is an ideal scenario for linear SVM. An important publication which inspired many researchers to use linear SVM for document classification is "*Text Categorization with Support Vector Machines*" by Thorsten Joachims, available [here](http://www.cs.cornell.edu/People/tj/publications/joachims_98a.pdf "here").

It is recommended to use specialized linear SVM packages (such as LIBLINEAR, SVMPERF, PEGASOS) for this type of task since they are much much faster than general SVM packages when training a linear SVM.

# java - 在具有公差的贝塞尔曲线上命中检测？

> ID：15987966
> 
> 赞同：2
> 
> 时间：2013-04-13T12:49:03.507
> 
> 标签：java, javascript, gwt, canvas

我在 a 中有一些二次贝塞尔曲线`Canvas`。如果它们只有 1-2 px 宽，并且我想提供某种公差，那么我怎么能最好地`hit detection`使用它们，这样用户就不必精确地点击就行了。

有什么东西可以计算到贝塞尔曲线的最小距离，如果这个距离足够小，选择贝塞尔曲线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:49:19.647

我可以想到至少 3 种方法来扩大二次贝塞尔曲线的命中区域

我不会推荐第一个解决方案，但无论如何都在这里！

**解决方案#1-根据贝塞尔曲线上计算的各个点手动测试 clickPoint**

这是一个计算 XY 的函数，它是沿着贝塞尔曲线的 n%，还有一个函数来测试您的 clickPoint 是否在该贝塞尔曲线点的范围内。

```
var startPt=makePt(10,100);
var controlPt=makePt(50,30);
var endPt=makePt(90,100);

function makePt(X,Y){ return( { x:X, y:Y } ) }

// find points at various percent along bezier path
// (where percent is a decimal from 0 to 1)
function getQuadraticBezierXY(percent,startPt,controlPt,endPt) {
    var x = Math.pow(1-percent,2) * startPt.x + 2 * (1-percent) * percent * controlPt.x + Math.pow(percent,2) * endPt.x; 
    var y = Math.pow(1-percent,2) * startPt.y + 2 * (1-percent) * percent * controlPt.y + Math.pow(percent,2) * endPt.y; 
    return( makePt(x,y) );
}

// find whether 2 points are close to each other
// range is your pixel tolerance
function arePointsInRange(bezPt,testPt,range){
    var dx=testPt.x-bezPt.x;
    var dy=testPt.y-bezPt.y;
    return( dx*dx+dy*dy <= range*range )
} 
```

**解决方案#2——针对“加宽”曲线的封闭路径进行命中测试**

注意：下面使用的 isPointInPath() 在现代浏览器上可用，但在旧版浏览器上不可用

注意：您不必实际向用户显示加宽的曲线——您可以绘制加宽的曲线，但不能绘制 context.stroke()。（请务必查看 isPointInPath 的文档）。

注意：请务必调整起点和终点之间直线斜率的偏移量。为简单起见，我下面的插图使用 0 斜率。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/4GEeu/](http://jsfiddle.net/m1erickson/4GEeu/)

```
 var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    ctx.lineWidth=2;
    ctx.strokeStyle="red";

    var startX=10;
    var startY=100;
    var controlX=50;
    var controlY=50;
    var endX=90;
    var endY=100;
    var offset=20;

    ctx.beginPath();
    ctx.moveTo(startX,startY-offset);
    ctx.quadraticCurveTo(controlX,controlY-offset,endX,endY-offset);
    ctx.lineTo(endX,endY+offset);
    ctx.quadraticCurveTo(controlX,controlY+offset,startX,startY+offset);
    ctx.closePath();
    ctx.stroke();

    // hitTest point [15,110] which is known to be inside
    // the widened curve path
    if(ctx.isPointInPath(15,110)){
        alert("Point [15,110] is in the closed quadratic curve path");
    } 
```

**解决方案#3——在屏幕外画布上针对加宽曲线进行命中测试**

注意：我的插图只是将屏幕上的曲线画得更宽。您可以在屏幕外画布上进行测试。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/MJfZt/](http://jsfiddle.net/m1erickson/MJfZt/)

```
 var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    ctx.lineWidth=20;
    ctx.strokeStyle="red";

    var startX=10;
    var startY=100;
    var controlX=50;
    var controlY=50;
    var endX=90;
    var endY=100;
    var offset=20;

    ctx.beginPath();
    ctx.moveTo(startX,startY);
    ctx.quadraticCurveTo(controlX,controlY,endX,endY);
    ctx.stroke();

    // hitTest point [10,100] which is known to be inside
    // the widened curve path
    if(hittestByColor(10,100,255,0,0)){
          alert("Pixel [10,100] is inside the widened curve");       
    }

    function hittestByColor(x,y,red,green,blue){
        var pxData = ctx.getImageData(x,y,1,1);
        return(pxData.data[0]==red 
            && pxData.data[1]==green 
            && pxData.data[2]==blue);
    } 
```

# ajax - Sencha Touch 构建的应用程序不加载 JSON 数据

> ID：15987970
> 
> 赞同：1
> 
> 时间：2013-04-13T12:49:32.590
> 
> 标签：ajax, extjs, build, proxy, sencha-touch-2.1

我有以下问题。我正在使用`sencha app build testing`创建用于测试的应用程序构建。我有一些本地 json 模拟文件，其中包含要在应用程序中加载的数据。如果没有构建一切加载正常，没有检测到问题。**在内置版本中，我什至看不到访问这些文件的 ajax 请求。**

生成这样的行为会发生什么？

**型号**：

```
Ext.define('MS.model.Category', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            {name: 'id', type: 'int'},
            {name: 'name', type: 'auto'},
            {name: 'desc', type: 'auto'},
            {name: 'image', type: 'string'},
            {name: 'href', type: 'auto'},
            {name: 'group', type: 'string'},
            {name: 'isNew', type: 'auto'}
        ]
    }
}); 
```

**商店**：

```
Ext.define('MS.store.Categories', {
    extend: 'Ext.data.Store',
    requires: [
        'MS.model.Category',
    ],
    model: 'MS.model.Category',

    sorters: 'id',
    grouper: function (record) {
        return record.get('group');
    },

    proxy: {
        type: 'ajax',
        url : 'categories.json',
        reader: 'json'
    },
    autoLoad: true,

    xtype: 'categoriesstore'
}); 
```

# android - 线性布局中的相对布局是否可以滚动视图？

> ID：15987973
> 
> 赞同：0
> 
> 时间：2013-04-13T12:49:40.460
> 
> 标签：android, android-layout, scrollview, android-linearlayout, android-relativelayout

我有一个用于在我的应用程序中将国家/地区输入数据库的布局。我希望我的布局是可滚动的，因为在某些设备上，键盘最终会阻止文本字段。我知道我可以使用 ScrollView 来执行此操作，但我遇到了问题。我的布局由一个整体 LinearLayout 组成，但我在 RelativeLayout 中包含了 2 个按钮。这给了我一种不寻常的滚动方法，即使我没有输入文本，整个屏幕似乎也会滚动，在屏幕底部留下很大的空隙。对此有什么想法吗？

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="@drawable/map" 
        android:scrollbars = "vertical" >

        <!-- Enter country -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/editcountry"
            android:textColor="@color/black"
            android:textSize="22sp" />

        <AutoCompleteTextView 
            android:id="@+id/editcountry"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:hint="@string/hintprompt"
            android:imeOptions="actionDone" />

        <!-- Enter year -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/edityear"
            android:textColor="@color/black"
            android:textSize="22sp" />

        <Spinner
            android:id="@+id/yearspin"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

        <!-- Enter month -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/editmonth"
            android:textColor="@color/black"
            android:textSize="22sp" />

        <Spinner
            android:id="@+id/monthspin"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:entries="@array/months" />

        <!-- Enter mode of transport -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/edittransport"
            android:textColor="@color/black"
            android:textSize="22sp" />

        <Spinner
            android:id="@+id/transportspin"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:entries="@array/transport" />

        <!-- Enter description -->
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/editdesc"
            android:textColor="@color/black"
            android:textSize="22sp" />

        <EditText
            android:id="@+id/editdesc"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/hintprompt"
            android:inputType="text" 
            android:imeOptions="actionDone"/>

            <!-- Place buttons at the bottom of the screen -->
            <RelativeLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <Button
                    android:id="@+id/backmain"
                    android:layout_width="150dp"
                    android:layout_height="50dp"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentLeft="true"
                    android:text="@string/back" />

                <Button
                    android:id="@+id/add"
                    android:layout_width="150dp"
                    android:layout_height="50dp"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentRight="true"
                    android:text="@string/addinfo" />

            </RelativeLayout>
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:02:50.333

您`LinearLayout`的高度设置为`fill_parent`. 将其更改为`wrap_content`. 您`RelativeLayout`的设置方式相同。也可能是罪魁祸首。

```
<LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@drawable/map" 
        android:scrollbars = "vertical" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:13:53.473

您还可以将您的滚动视图放在另一个布局中。有一个垂直的 LinearLayout，里面有两个布局，一个用于您应该使用 layout_weight="1" 滚动的所有内容，在底部另一个布局包含您的按钮

您的布局将与此类似：

```
Vertical LinearLayout
    LinearLayout with layout_weight="1"
        ScrollView
            Layout containing your stuff
    layout containing buttons 
```

# c# - 引用自定义组件的设计时程序集

> ID：15987974
> 
> 赞同：2
> 
> 时间：2013-04-13T12:49:51.353
> 
> 标签：c#, .net, components, custom-component, design-time

我正在尝试解耦自定义组件的运行时和设计时部分（因此运行时可以使用 .NET 4.0 客户端配置文件，而设计时将使用完整的 4.0 框架）。

我在单独的程序集中拥有所有与设计相关的类，这些类引用运行时程序集，而运行时程序集仅通过字符串引用设计时程序集：

```
[Designer("MyCompany.MyComponents.ComponentDesigner, MyCompany.MyComponents")]
[ToolboxItem("MyCompany.MyComponents.ComponentToolboxItem, MyCompany.MyComponents")] 
```

问题是，从工具箱中拖动组件后，Visual Studio 抱怨它无法创建工具箱项。

所有课程都是公开的。运行时程序集不参考设计时程序集。

你有没有经历过/解决过类似的事情？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T15:29:19.033

上次我开发设计时组件时，我使用了另一个 Visual Studio 实例来调试它，第一个实例附加到第二个实例。

有用的提示：设计时构造函数中的错误很糟糕。我不知道这是否仍然正确，但是 Visual Studio 无法跟踪您正在使用嵌套控件的设计时与运行时。

# mysql - 哪个 MYSQL Join 包含不存在的记录

> ID：15987977
> 
> 赞同：0
> 
> 时间：2013-04-13T12:50:00.803
> 
> 标签：mysql, sql, database

我有一个数据库，我想查询与 product_fields 连接的产品中的所有记录。但是有可能product_fields中没有颜色的记录，在那种情况下我仍然想显示一个记录，只有字段颜色可以留空。product_fields 表由同一产品的多条记录组成，并具有“名称”和“值”字段。

看到我想出的这个声明：

```
SELECT p.*, c.value AS color
FROM products p
LEFT JOIN product_fields c ON c.product_id = products.id 
WHERE c.name = 'color'
AND products.id = '1' 
```

令我惊讶的是，这不起作用，我一定遗漏了一些明显的东西？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:51:53.150

您需要将条件放在`ON`子句中，

```
SELECT p.*, c.value AS color
FROM   products p
       LEFT JOIN product_fields c 
            ON c.product_id = products.id AND 
               c.name = 'color'
WHERE  products.id = '1' 
LIMIT  1 
```

`ON`在子句中添加条件和在子句上添加条件的主要区别在于`WHERE`，在`ON`子句中，它在将指定表连接到另一个表之前过滤掉指定表中的记录，而`WHERE`子句在表连接后过滤掉记录。

# javascript - HTML5：有没有办法显示输入字段的错误气泡弹出窗口？

> ID：15987979
> 
> 赞同：1
> 
> 时间：2013-04-13T12:50:12.623
> 
> 标签：javascript, html

我创建了一个带有`HTML5`特征的表单。我使用`setCustomValidity`函数自定义错误消息。但是大多数输入字段都需要显示错误消息`onfocusout`事件。我做了这个代码来实现这一点。

```
$("form").bind("change" , function(e){
    var ele = e.target;
    if(field.is(":invalid")){
        ele.setCustomValidity(errorMessage);
    }else{
        ele.setCustomValidity('');
    }
}); 
```

![在此处输入图像描述](https://i.stack.imgur.com/5ehRJ.png)

但是，我不知道如何在这里打开气泡弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:59:49.933

是的，有，但是如果它是假的，你需要`checkValidity()`在表格上然后提交它。这不是最好的代码。

```
if(!$('form')[0].checkValidity()) {
  $('form').submit();
} 
```

请记住，并非所有浏览器都支持表单验证。我个人会留下验证，因为浏览器拥有它，因为这是用户将习惯的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-06T09:19:41.000

最好使用 javascript 库来触发验证，您也可以设置自定义消息进行验证。

参考链接：[链接](http://34codefactory.blogspot.in/2018/01/create-custom-javascript-validation.html)

使用它，您可以触发验证消息`onfocusout`

从上面的链接下载 CSS 和 JS 并添加到您的 HTML 页面中。根据您的要求添加验证规则。

```
<input type="text" name="emp_code" id="emp_code" data-rule="emp_code|required"> 
```

这`required`是预定义的规则，`emp_code`是用户创建的自定义规则。

最后一步是初始化库。

```
<script>
// #form is id of form
new Validator(document.querySelector('#form'), function(err, res) {
   return res;
}
</script> 
```

[![在此处输入图像描述](https://i.stack.imgur.com/k8PGX.png)](https://i.stack.imgur.com/k8PGX.png) [![在此处输入图像描述](https://i.stack.imgur.com/wyDQI.png)](https://i.stack.imgur.com/wyDQI.png)

# cocos2d-iphone - CCLayer 在 API ref 中去了哪里？

> ID：15987982
> 
> 赞同：1
> 
> 时间：2013-04-13T12:50:20.690
> 
> 标签：cocos2d-iphone

试图`CCLayer`在 Cocos2D 2.0 中找到参考。自 1.0 版以来，似乎`CCLayer`不再存在于类层次结构中。有什么理由被删除？我看到它确实存在于 API 本身中，但引用就消失了，所以想知道这背后的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:45:07.910

还有其他几个课程也不见了。原因：不正确使用 doxygen 注释。我在[这里托管了正确的 cocos2d api 引用，](http://www.learn-cocos2d.com/api-ref/)其中包括那些缺失的类。我还按平台拆分它们，否则您也会错过平台特定的情况。

# c++ - 如何在 Windows 中运行基本的“Hello World”GLSL 程序？

> ID：15987985
> 
> 赞同：-2
> 
> 时间：2013-04-13T12:50:33.267
> 
> 标签：c++, windows, opengl, windows-7, glut

我正在尝试从[该站点](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/FIFTH_EDITION/PROGRAMS/CHAPTER09/PHONG/phongV.c)运行 GLSL 程序并收到如下错误。除了opengl，我需要安装哪些基本库？我在 Windows 机器上需要这个。

```
main.cpp:72:30: error: 'GLchar' does not name a type
main.cpp:72:38: warning: ISO C++ forbids declaration of 'vShaderFile' with no type [-fpermissive]
main.cpp:72:57: error: 'GLchar' does not name a type
main.cpp:72:65: warning: ISO C++ forbids declaration of 'fShaderFile' with no type [-fpermissive]
main.cpp: In function 'void initShader(const int*, const int*)':
main.cpp:75:5: error: 'GLchar' was not declared in this scope
main.cpp:75:13: error: 'vSource' was not declared in this scope
main.cpp:75:23: error: 'fSource' was not declared in this scope
main.cpp:80:43: error: cannot convert 'const int*' to 'const char*' for argument '1' to 'char* readShaderSource(const char*)'
main.cpp:83:43: error: cannot convert 'const int*' to 'const char*' for argument '1' to 'char* readShaderSource(const char*)'
main.cpp:88:30: error: 'GL_VERTEX_SHADER' was not declared in this scope
main.cpp:88:46: error: 'glCreateShader' was not declared in this scope
main.cpp:89:30: error: 'GL_FRAGMENT_SHADER' was not declared in this scope
main.cpp:90:31: error: 'glCreateProgram' was not declared in this scope
main.cpp:94:36: error: 'glAttachShader' was not declared in this scope
main.cpp:99:39: warning: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]
main.cpp:99:39: warning: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]
main.cpp:99:33: error: expected primary-expression before 'const'
main.cpp:99:33: error: expected ')' before 'const'
main.cpp:100:39: warning: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]
main.cpp:100:39: warning: ISO C++ forbids declaration of 'type name' with no type [-fpermissive]
main.cpp:100:33: error: expected primary-expression before 'const'
main.cpp:100:33: error: expected ')' before 'const'
main.cpp:104:28: error: 'glCompileShader' was not declared in this scope
main.cpp:109:28: error: 'GL_COMPILE_STATUS' was not declared in this scope
main.cpp:109:54: error: 'glGetShaderiv' was not declared in this scope
main.cpp:117:26: error: 'glLinkProgram' was not declared in this scope
main.cpp:118:28: error: 'GL_LINK_STATUS' was not declared in this scope
main.cpp:123:25: error: 'glUseProgram' was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:01:02.257

我认为您应该退后几步，阅读[http://www.arcsynthesis.org/gltut/](http://www.arcsynthesis.org/gltut/)。它有教程和关于如何构建它们的章节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:58:41.757

有这样的错误

> ```
> main.cpp:72:30: error: 'GLchar' does not name a type 
> ```

我首先将正确的包含指令添加到我的源代码中。如果没有您发布一些实际的源代码，我无法告诉您更多信息。

### 更新

在链接的源代码中有这样的：

```
#include <GLUT/glut.h> 
```

`GLUT/glut.h`不是 GLUT 标头的标准位置，因此所有这些错误。如果我不得不做出有根据的猜测，那么这个程序是在 MacOS X 上编写的。只有在 MacOS X 上，您才能使用更新的 OpenGL 函数（如着色器）而无需跳过一些障碍（在运行时加载扩展和更新版本的函数），在MacOS X 的成本跟不上更新的 OpenGL 版本。

我建议安装 GLEW（可从[http://glew.sf.net](http://glew.sf.net)获得）并替换以下

```
#include <GL/glew.h>
#include <GL/glut.h> 
```

并添加对`glewInit()` **after** `glutCreateWindow(…)`的调用。

# java - 线程读者和作者的合作

> ID：15987986
> 
> 赞同：0
> 
> 时间：2013-04-13T12:50:41.283
> 
> 标签：java, multithreading, paint

我有一堂课（我会以非常简单的方式说）

Window 正在绘制图形，而 Mover 正在更改它们的坐标（x，y），我不想`Window`在 Mover 移动它时读取图形的坐标。

```
class Figure{
int x, int y;
Figure(){...}

  void move(int x, int y){ //when mover is moving by this method
      this.x+=x;
      this.y+=y;
  }
  void draw(Graphics g){ //i do not want this method running
      g.draw(x,y); //I USE x,y here
  }     
} 
```

然后我有`Mover`修改`x,y`的类`Figure`

```
class Mover extends Thread{
  Figure f;
  Mover(Figure f){
  this.f = f;
  }
     public void run(){
         while(true){f.move(3,4);}
         Thread.sleep(30);

//
      }       
    } 
```

最后

```
class Window extends JFrame(){
ArrayList<Figure> l;
   public void paint(Graphics g){
      while(true){
        foreach
          l.draw();
         }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:12:21.690

完成此操作的最简单方法是将[synchronized](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)关键字添加到`move`and`draw`方法。这将使用 锁定方法`this`，因此一次只能执行一个（此外，您将不能同时执行`move`多次）。

```
class Figure{
    int x, int y;
    Figure(){...}

    public synchronized void move(int x, int y){ //when mover is moving by this method
         this.x+=x;
         this.y+=y;
    }
    public synchronized void draw(Graphics g){ //i do not want this method running
        g.draw(x,y); //I USE x,y here
    }     
} 
```

# frameworks - 框架是如何创建的？

> ID：15987988
> 
> 赞同：1
> 
> 时间：2013-04-13T12:50:43.573
> 
> 标签：frameworks

我遇到过很多框架，用于软件开发、测试、分布式系统等。但是这些框架是如何创建的？专家是否分析了框架的性能、可用​​性和易用性？那么如果我找到某种方法可以轻松地完成一项复杂的任务，它可以称为框架吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:06:50.643

这是一个非常广泛的问题。让我尝试分解并分阶段回答...

为什么要创建框架？

原因，或者更准确地说，目标是多方面的。一些关键的事情是：

1.  缩短开发时间
2.  简化项目团队成员的工作分配。
3.  简化项目的测试和集成。
4.  简化调试
5.  标准化整个团队/项目的开发习惯和技术

谁建造它们？

同样，答案是广泛的。我建造它们，你建造它们，我们中的许多人都这样做。但并非所有人都会公开我们的框架。有些人决定把它变成一个开源项目。为什么？也许是为了获得资金并继续让它变得更好。或者只是为了里面的现金。

话虽如此，并不是每个人都应该建立一个框架。例如，在我决定制作我的 php“框架”之前，我已经使用 PHP 编码超过 7 年，并且我曾参与过多个项目。然后我意识到某些事情是以某种方式定期完成的，我决定将它们放入一些功能中。然后它转移到模板区域，最后我意识到那里有更好的（例如：CodeIgniter）。

如果我们每个人都建立自己的框架，我们可能会遇到新员工的困难。我们不得不花更多的时间培训员工，而不是在项目上使用他们。这就是为什么我（个人）更喜欢标准的东西。

我们是否在所有项目中都使用它们？

当然不是。有时任务非常琐碎。一个人可能只需要写几页代码就可以完成。因此，如果它不能证明需要一个框架，请不要使用它。

你自己的框架...

是的，如果您像我在开头提到的那样构建一种构建项目的简单方法，您可以将其称为框架。但它必须可用于广泛的项目。否则它们将只是函数的集合。

一旦你有了它，你可能会决定将它用于你的项目，甚至将它们公开。

我使用的一些常见框架...

PHP：代码点火器

帕斯卡：拉撒路

C++：代码块

希望这可以帮助 ：）

# php - Google 云端硬盘上的 XAMPP

> ID：15987989
> 
> 赞同：6
> 
> 时间：2013-04-13T12:50:50.517
> 
> 标签：php, mysql, apache, xampp, google-drive-api

我最近不得不在我的 PC 上重新安装 XAMPP，这意味着不得不替换我之前设置的任何配置文件和任何其他数据文件（如 MySQL 数据库、网站等）的另一个痛苦。

我已经对此进行了尽可能多的研究 - 但大多数人似乎只想同步他们的 htdocs 和 mysql 数据，但是，我想将*整个 xampp*安装存储在 Google Drive 上，这意味着不再需要设置它其他电脑等

是否可以？优点缺点？

如果不推荐 XAMPP，那么在 google 驱动器上单独安装 apache/mysql/php 就足够了吗？

关于如何解决这个问题，我有两个想法：

*   在谷歌驱动器上安装 USB 便携版
*   在 PC 上安装完整版，然后将其移动到谷歌驱动器并将位置符号链接到驱动器文件夹

我意识到它可能无法使用它运行服务......但除此之外，我每次不会从超过一台 PC 访问它，这纯粹是为了让服务器准备好使用，无论我' m 在我的笔记本电脑、PC 等...不再需要复制网站或更改两者的配置文件以满足任何新网站的需求。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-22T19:25:29.533

很久以前我自己就知道了这一点，但我只记得发布答案以防其他人也想要它。

TL：博士；= 虽然这是可能的，但它毫无意义/比需要的开销更大。

# 解决方案：

我最终做的是同步最重要的区域，这些是（在 xampp 根目录下）：

*   `/htdocs`
*   `/phpmyadmin`
*   `/php`
*   `/mysql/data`-*这里的关键**不是**整个文件夹，只是数据位*

这确保了我运行的 PHP 和 phpMyAdmin 的版本都是相同的，并且我的数据库存在（是的，没有更多的导出/导入！）。

我不同步`apache`文件夹的原因是因为我在机器上的设置略有不同（不同的路径）。

我使用符号链接将文件夹指向它们在 Dropbox 上的位置（是的，我确实要求使用 Google Drive，但请参阅答案结尾以了解为什么要交换）。

它工作得很好，我还没有找到更好的解决方案。尽管现在将工作流转移到虚拟机上，但我更需要这种便携性，因为我必须在笔记本电脑和主 PC 之间切换。

## 问题：

*   我遇到了一些小问题，几乎都是 mysql。
    *   如果 MySQL 服务在尝试加载时正在同步文件，它不会总是在机器启动时启动，这不是一个主要问题，而是一个微小的细微差别。
    *   损坏的数据库！:-o 这实际上或多或少地通过从 Google Drive 迁移到 Dropbox 得到了解决，最后对此进行了更多说明。
    *   您不能可靠地同时打开两台机器，因为它可能会导致数据库中的冲突。创建新数据库时，最好在一台机器上进行，让它完全启动，然后关闭机器并启动另一台机器，以便同步所需的内容。有时必须先停止 MySQL 服务。

## Google Drive*与*DropBox

我喜欢 Google 云端硬盘，我用它做所有事情。它很便宜，与 DropBox 的 10 美元（10 英镑？）相比，100GB 的空间只需 3 美元或其他任何东西。

过了一段时间，随着我的项目越来越大，我的 htdocs 变得越来越庞大，我开始注意到几个问题。我开始使用名为 Laravel 4 的框架有一段时间了，这涉及到 composer 将大量文件带入供应商目录。谷歌驱动器似乎索引了其中的一部分，然后只同步了一些文件，但我没有意识到。

这将导致我稍后再去我的笔记本电脑，通常远离我的 PC，并意识到我的一半项目丢失了，因此无法使用。在大多数情况下，除非我删除了整个文件夹或其他一些技巧，否则文件不会被拾取，这对最初的项目创建来说是相当痛苦的。

我还发现在使用 Google Drive 时数据库经常损坏，随着 Google Drive 文件夹中文件数量的增加，情况变得更糟。

最终，我决定把我的换成`htdocs`DropBox。在几个星期没有问题之后，我把剩下的换掉了，从那时起我就没有遇到数据库损坏或任何文件夹未同步的问题。我认为这可能是由于 Google Drive 似乎无法处理这么多小文件（粗略估计，Laravel 4 供应商目录有 4k+ 文件，想象一下这可能是 10 个项目以及任何其他不在 laravel 4 上的项目......） .

### 处理数据库损坏

在仍然使用 Google Drive 的同时，我找到了一种安全的方法来确保我的数据库即使损坏也或多或少是安全的，我创建了一个批处理文件（是的，Windows 用户）来对所有非默认数据库进行数据库备份（跳过那些基本上随 MySQL / PhpMyAdmin 一起提供）到不在 Google Drive/DropBox 上的文件夹中的 .sql 文件。这意味着如果我的数据库确实损坏了，最糟糕的情况是我在数据库上浪费了一天的时间，这通常不会太多（特别是如果您使用迁移来创建表）。删除损坏的表/数据库并通过 .sql 文件恢复它们只是一项简单的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T21:40:03.840

如果其他人对此有疑问并且无法启动 Apache Windows 服务，这是因为 Google Drive 文件夹 (C:\Users\xxx\Google Drive) 没有可继承的权限，并且默认的 Windows 服务用户（本地System) 因此无权访问。

解决方案是将 Apache Windows 服务更改为像您一样运行 - 这样做之后，Windows 服务应该可以正常启动。

# uitableview - 合金：HeaderView 不在 TableView 内呈现

> ID：15987993
> 
> 赞同：0
> 
> 时间：2013-04-13T12:51:33.153
> 
> 标签：uitableview, titanium, titanium-mobile

请在下面查看我的代码。表中确实呈现了一个标题，但它是空白的并且不是正确的高度。我试过 Titanium SDK 3.0.2 和 3.1 并得到相同的结果。

**视图.tss：**

```
"#detail_header": {
    height: 200
}

"#search_icon": {
    top: 17,
    left: 14,
    image: "search_icon.png",
    width: 19,
    height: 23
}

"#search": {
    top: 0,
    left: 48,
    width: 599,
    height: 54,
    backgroundColor: "#ffffff",
    font: {fontFamily: "Open Sans [Regular]", fontSize: "20"},
    autocapitalization: Titanium.UI.TEXT_AUTOCAPITALIZATION_WORDS,
    autocorrect: false,
    returnKeyType: Titanium.UI.RETURNKEY_SEARCH
}

"#search_cancel_icon": {
    top: 19,
    left: 665,
    width: 22,
    height: 23,
    image: "textClear_icon.png",
    visible: false
}

"#horizontal_separator": {
    top: 55,
    left: 321,
    height: 1,
    width: 703,
    backgroundColor: "#e1e1e1"
}

".detail": {
    top: 0,
    left: 322,
    width: 703,
    height: Titanium.UI.FILL,
    separatorColor: "#ebebeb"
} 
```

**视图.xml：**

```
<TableView id="recipes" class="detail">
    <HeaderView id="detail_header">
        <ImageView id="search_icon" onClick="search_icon_click" />
        <TextField id="search" hintText="Search for a recipe" onChange="search_change" />
        <ImageView id="search_cancel_icon" onClick="search_cancel_icon_click" />
    </HeaderView>
</TableView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:53:47.913

试试这个，我很确定 HeaderView 属性必须有一个单一的视图作为其输入：

```
<TableView id="recipes" class="detail">
    <HeaderView id="detail_header">
        <View>
            <ImageView id="search_icon" onClick="search_icon_click" />
            <TextField id="search" hintText="Search for a recipe" onChange="search_change" />
            <ImageView id="search_cancel_icon" onClick="search_cancel_icon_click" />
        </View>
    </HeaderView>
</TableView> 
```

# java - MimeMessage 正文更长 76 个字符

> ID：15987996
> 
> 赞同：0
> 
> 时间：2013-04-13T12:51:42.367
> 
> 标签：java, mime, jakarta-mail

我可以使用 javax.mail 库创建一个 .eml 文件，但如果正文长度超过 76 个字符，则它会分成更多行。问题在于使用 Windows Live Mail 打开 .eml 文件后，“=”字符出现在电子邮件正文中的 76 个字符的对应关系中，并且文本位于多行上。

有人可以帮我吗？谢谢

-安东尼奥

这是 .eml 示例文件：

```
X-Unsent: 1
Message-ID: <2037894577.5.1365866504487.JavaMail.Nunziante@Nunziante-TOSH>
Subject: Comunicazione Contenzioso Spedizione 8092255513 del 09-04-2013
MIME-Version: 1.0
Content-Type: multipart/mixed; 
boundary="----=_Part_4_1091659763.1365866499167"

------=_Part_4_1091659763.1365866499167
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

The Stratford Bust, located on the wall of the chancel of Holy Trinity Chur=
ch at Stratford-upon-Avon, is the oldest and, along with the Droeshout Port=
rait, most credible of all the known images of Shakespeare. But there are m=
any representations of the Bard that have been handed down throughout the c=
enturies, each with its own fascinating story to tell.. Responsabilit=C3=A0=
: Generica

------=_Part_4_1091659763.1365866499167-- 
```

这是我当前的代码：

```
Message message = new MimeMessage(javax.mail.Session.getInstance(System.getProperties()));
message.setFrom(new InternetAddress(from));
message.setRecipients(Message.RecipientType.TO, getAddress(to));
message.setSubject(subject);
Multipart multipart = new MimeMultipart();
MimeBodyPart content = new MimeBodyPart();
multipart.addBodyPart(content);
content.setText(body);
message.setContent(multipart);
FileOutputStream fos = new FileOutputStream(emlFile);
message.writeTo(fos);
fos.close(); 
```

当我打开 eml 文件时，消息是：

斯特拉特福半身像位于埃文河畔斯特拉特福的圣三一教堂的墙上，是最古老的，与 Droeshout Port=ait 一起，是所有已知莎士比亚形象中最可信的。但是，在整个 c=nturies 中流传下来的吟游诗人有 m=ny 的表现形式，每个都有自己迷人的故事要讲述。. Responsabilità= Generica

为了获得确切的身体，我必须设置什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:55:00.693

听起来您没有提供正确的标题。如果正文部分在 QP 中，您需要一个`Content-Transfer-Encoding: quoted-printable`正文部分标头来指示客户端。

如果您需要更多帮助，问题消息的来源将有助于诊断。正确的最小多部分消息如下所示：

```
From: me@example.net
To: you@site.example.co
Subject: privet, mir
Mime-Version: 1.0
Content-type: multipart/mixed; boundary=foo

--foo
Content-type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hello w=
orld.

--foo-- 
```

（严格来说`Date:`也是`Message-Id:`强制性的，但如果缺少它们，MTA 通常会添加它们。）

# c# - C# properties - Adding logic in the setter accessor

> ID：15987999
> 
> 赞同：1
> 
> 时间：2013-04-13T12:51:55.463
> 
> 标签：c#, if-statement, properties, set

I am trying to set the value of the property so if the account goes into debit there is a fee of 10 is charged. I've tried coding the property CurrentBalance in a number of ways including debit(10), value -10 and accountbalance-10 but none of these approaches work. The code compiles but does not charge a fee. What am I doing wrong?

```
 public void Credit(decimal amount)
    {
        accountBalance += amount; //add to balance
    }

    public void Debit(decimal amount)
    {
        accountBalance -= amount; //subtract amount
    }

    public decimal CurrentBalance
    {
        get
        {
            return accountBalance;
        }
        set
        {
            if (value < 0) // if less than zero debit account by 10
            {
              value = accountBalance -10; // charge account
            }
            accountBalance = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T13:02:57.130

This will be a better way to accomplish what you want:

```
public void Credit(decimal amount)
{
    accountBalance += amount; //add to balance
}

public void Debit(decimal amount)
{
    accountBalance -= amount; //subtract amount
    if(accountBalance < 0)
    {
        accountBalance -= 10;
    }
}

//make this a readonly property and use the debit and credit functions to adjust it
public decimal CurrentBalance
{
    get
    {
        return accountBalance;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T12:55:31.193

You can fix it by changing your code to

```
set
{
    if (value < 0) // if less than zero debit account by 10
    {
        accountBalance = value -10; // charge account
    } else {
        accountBalance = value;
    }
} 
```

However, it is not a good idea to do it in a setter that supplies the new value, because the current `accountBalance` gets discarded. it's better to do it in a function that adjusts the *current* value, like this:

```
public decimal AdjustBy(decimal amount) {
    accountBalance += amount;
    if (accountBalance < 0 && amount < 0) {
        // Charge fees on withdrawals when the resultant balance is < 0
        accountBalance -= 10;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T13:21:24.183

I think the issue is that you are **never using the setter** (at least in the code snippets you posted). In your `Debit` and `Credit` functions, you are setting the value of the underlying field (`accountBalance`), not the property (`CurrentBalance`). For example, if you were to udate your `Debit` function like so, it would use the property's setter, and thus, charge a fee:

```
public void Debit(decimal amount)
{
    CurrentBalance -= amount; //subtract amount
} 
```

**If you will always interact with the balance through either your `Debit` or `Credit` functions**, then I agree with the recommendation that you simply put the fee logic in the `Debit` function, rather than in a setter like so:

```
public void Debit(decimal amount)
{
    accountBalance -= amount; //subtract amount
    if(accountBalance < 0)
    {
        accountBalance -= 10; // Charge "overdraft" fee
    }
} 
```

If you do that, you should make your property read-only so that it doesn't get inadvertently used by someone down the road (and thus bypassing your fee logic). You can do that by simply not declaring a setter for your property.

On the other hand, **if you have many places in your code that adjust the balance without using these functions**, I'd recommend making `accountBalance` be a `private` field (if it isn't already) and then setting the value of `CurrentBalance` instead of `accountBalance` in your code like so:

```
CurrentBalance += amount; // add an amount
CurrentBalance -= amount; // subtract an amount 
```