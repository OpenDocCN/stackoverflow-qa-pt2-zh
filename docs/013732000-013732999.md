# StackOverflow 问答 13732000-13732999

# ruby-on-rails - Rails - redirect_to 没有真正重定向 - 显示 500 错误

> ID：13732000
> 
> 赞同：0
> 
> 时间：2012-12-05T20:38:47.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

在我的网站上，我正在检查用户是否已通过身份验证。我的控制器中有以下内容..

```
def index
  login_required
  @profile = current_user.profile  ### line 9
  .. 
```

然后在我的 application_controller 中，我定义了 login_required 方法。

```
def login_required
  unless current_user
    redirect_to root_path, :notice => "Please login first"
  end
end 
```

即使我的日志显示重定向到根目录正在发生，它仍然没有真正将我带到根路径，而是将我带回我的控制器->索引并在“@profile = current_user.profile”行出现错误. 这是日志..

```
Started GET "/meetings" for 127.0.0.1 at 2012-12-05 12:18:12 -0800
  Processing by xyzController#index as HTML
Redirected to http://localhost:3000/
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `profile' for nil:NilClass):
  app/controllers/xyz_controller.rb:9:in `index' 
```

为什么我没有被重定向到根路径（这是我的主页），即使它说它正在重定向？有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:50:14.780

处理后继续进行`redirect_to`- 没有隐含的`return`. 创可贴修复是`return`根据 的结果在索引操作中添加一个`login_required`，但更好的方法是在控制器中使用[过滤](http://guides.rubyonrails.org/action_controller_overview.html#filters)器。

# excel - 运行时错误“13”类型不匹配

> ID：13732001
> 
> 赞同：1
> 
> 时间：2012-12-05T20:38:49.260
> 
> 标签：excel, vba

我正在使用下面的代码从不同的工作表中查找一些值。每次我收到运行时错误 13。我不确定如何更正我的数据类型。对我来说奇怪的是，我确实返回了正确的值，但并非没有收到此错误（这会阻止我的其余代码运行）。你能解释一下我该如何纠正吗？谢谢！

```
Dim acs As Integer

For acs = 2 To 2000

Set rng1 = Sheets("RD" & y).Range("C" & acs)
Set rng2 = Sheets("RD" & y).Range("D" & acs)
Set rng3 = Sheets("RD" & y).Range("E" & acs)

If Sheets("Tsecond").Range("Y" & acs) = Sheets("inputs").Range("B" & y) Then
Sheets("Tsecond").Range("AE" & acs).Copy
Sheets("RD" & y).Range("C" & acs).Select
Selection.PasteSpecial Paste:=xlPasteValues

Sheets("Tsecond").Range("AE" & acs).Copy
Sheets("RD" & y).Range("C" & acs).Select
Selection.PasteSpecial Paste:=xlPasteValues

Sheets("Tsecond").Range("Y" & acs).Copy
Sheets("RD" & y).Activate
rng2.Select
ActiveSheet.Paste

Sheets("Tsecond").Range("T" & acs).Copy
Sheets("RD" & y).Activate
rng3.Select
ActiveSheet.Paste

End If
Application.ScreenUpdating = False

Next acs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:39:34.250

当我在一行代码中遇到令人困惑的错误时，我所做的就是通过使用简单的赋值将这一行分成多行。运行这些简单的任务并观察哪个错误以及其他调试信息有时可以揭示问题所在。对于您的线路：

```
If Sheets("Tsecond").Range("Y" & acs) = Sheets("inputs").Range("B" & y) Then 
```

我要做的是这样的：

```
Set s1 = Sheets("Tsecond")
Let rc1 = "Y" & acs
Set r1 = s1.Range(rc1)
Set s2 = Sheets("inputs")
Let rc2 = "B" & y
Set r2 = s2.Range(rc2)
If r1 = r2 then 
```

如果在 之前出现错误`If`，那么调试器应该可以帮助您查看分解表达式的各种类型。如果错误出现在该`If`行上，则将其更改为：

```
Let v1 = r1.Value
Let v2 = r2.Value
if v1 = v2 then 
```

调试器应该帮助您显示 v1 和 v2 是什么类型（以防它们不兼容），或者是否存在其他错误（即 r2.Value 表示多个单元格而不是单个值）。

也许这会让你对这个问题有一些了解。

# ruby-on-rails - 具有重新定义方法的远程 simple_form_for

> ID：13732004
> 
> 赞同：1
> 
> 时间：2012-12-05T20:38:51.577
> 
> 标签：ruby-on-rails, simple-form

干杯!

```
= simple_form_for :search_input, :url => 'tracks/result', :method => :get do |f| 
```

如何`:remote => true`正确制作此表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:40:39.630

像这样：

```
= simple_form_for(:search_input, :url => 'tracks/result', :method => :get, :remote => true) do |f| 
```

# php - PHP遍历dbpedia xml

> ID：13732005
> 
> 赞同：0
> 
> 时间：2012-12-05T20:38:52.680
> 
> 标签：php, namespaces, xml-parsing, dbpedia

我需要遍历 dbpedia 的 xml 资源文件以获取摘要和其他一些基本信息，例如形成年份和预算。

[美国环保署](http://dbpedia.org/page/United_States_Environmental_Protection_Agency)就是一个例子。（页面底部有指向同一文件不同数据格式的链接）

我只需要 xml 文件的第一个 rdf:Description 命名空间。代码片段

```
$xml_result = file_get_contents($xml_url);
$xml_data = simplexml_load_string($xml_result);
$namespaces = $xml_data->getNamespaces(true);
//print_r($namespaces);

$current = $xml_data->children($namespaces['rdf']); 
```

这只会让我得到第一个 rdf:Description 中的 rdf 元素。如何访问 Description 元素中的其他元素，例如 dbpedia-owl 命名空间元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:18:33.650

您可以使用多个命名空间，请参阅[https://stackoverflow.com/a/13350242/865201](https://stackoverflow.com/a/13350242/865201)

无需测试，我认为您可以使用类似的东西

```
$xml_data->children($namespaces['rdf'])->Description->children($namespaces['dbpedia-owl'])->anotherElement; 
```

# java - java在jar文件中设置字体

> ID：13732009
> 
> 赞同：1
> 
> 时间：2012-12-05T20:39:16.747
> 
> 标签：java, netbeans, fonts, jar, truetype

我正在尝试设置在 jar 文件根目录下的资源文件夹中找到的字体“bilboregular.ttf”。如果我从 netbeans 运行字体设置成功，但是如果从 jar 文件中它不是

代码：

```
main method:{

        String s = System.getProperty("user.dir") + "\\src\\resources\\" + "bilboregular.ttf";
        File a = new File(s);
        if (a.exists()) {
            this.loadFont(s);
        } else {
            this.loadFont(this.getClass().getResource("/resources/" + "bilboregular.ttf").getFile());
        }
}

 public void loadFont(String s) {
    try {
        font = java.awt.Font.createFont(java.awt.Font.TRUETYPE_FONT, new File(s));
        font = font.deriveFont(Font.PLAIN, 20);
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        ge.registerFont(font);
        setFonts();
    } catch (Exception ex) {
    }

}

public boolean setFonts() {
    jLabel3.setFont(font);
    jLabel4.setFont(font);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:40:23.883

您的 main 不能使用`getClass()`，因为它`static`（假设您的意思是`public static void main(String args[])`" *main"*）。

试试这个代码：

```
InputStream is = getClass().getResourceAsStream("/resources/bilboregular.ttf");
Font f = Font.createFont(Font.TRUETYPE_FONT, is); 
```

如果这不起作用：请发布您的 JAR 的结构和引发的异常（例如，在您的`catch`块中使用记录器）。
顺便提一句。一个空的异常块在这里不是一个好主意，因为在许多情况下 IO 操作可能会失败。

# unit-testing - 使用 TestNG 的动态测试套件

> ID：13732015
> 
> 赞同：5
> 
> 时间：2012-12-05T20:39:43.443
> 
> 标签：unit-testing, testng

我想编写 Java 代码，从一个充满文件的目录中动态创建多个 TestNG 测试套件。每个文件对应一个测试套件，其中包含基于文件内容的测试。关键是我需要为每个套件进行特定的设置和拆除。

我知道我可以使用 Factory 注释从单个文件动态构建测试。例如：

```
public class TestFactory {
    @Factory
    public Object[] createTestFromFile() throws Exception {
        ArrayList<MyTest> tests = new ArrayList<MyTest>();

        BufferedReader reader = new BufferedReader(new FileReader("test1.txt"));
        String testData;
        while ((testData = reader.readLine()) != null) {
            tests.add(new MyTest(testData));
        }

        return tests.toArray();
    }
}

public class MyTest {
    private String testData;

    public MyTest(String testData) {
        this.testData = testData;
    }

    @Test
    public void runTest() {
        assertTrue(testData.equals(testData));
    }

} 
```

但是如何读取多个文件并为每个文件创建一个单独的测试套件，每个文件都有不同的套件特定设置/拆卸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:32:15.760

可能这会有所帮助： 以[编程方式运行 TestNG](http://testng.org/doc/documentation-main.html#running-testng-programmatically) 您可以使用 XMLSuite 类创建动态套件，可能将您的文件名设置为套件中的参数，并将您的 setup/teardown 设置为侦听器。

# php - 单表的实体生成

> ID：13732017
> 
> 赞同：1
> 
> 时间：2012-12-05T20:39:45.193
> 
> 标签：php, postgresql, symfony, doctrine, entity

所以我想为具有大量表的数据库中的特定表生成实体。

这是我正在尝试的命令：

```
php app/console doctrine:mapping:convert yml ./src/MyNamespace/Bundle/MyNamespaceBundle/Resources/config/doctrine/metadata/orm --from-database --em=my_manager --filter=TblReports --verbose 
```

这是错误：

```
[Doctrine\DBAL\DBALException]                                                                            
  Unknown database type unknown requested, Doctrine\DBAL\Platforms\PostgreSqlPlatform may not support it. 
```

现在我可以在只有几个表的较小数据库上运行这个命令并且它工作正常，所以它必须是数据库。

是的，我想过滤这张表：

```
--filter=TblReports 
```

如果我删除过滤器，它会为整个数据库生成实体，这是我不想要的。

如果这很重要，我正在运行 PostgreSQL 8.4 和 9.1。

其他人有或知道如何解决这个问题？

```
Unknown database type unknown requested 
```

教义文件

*   [http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/tools.html#reverse-engineering](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/tools.html#reverse-engineering)

相关：

*   [使用 symfony2 和教义从现有数据库生成单个实体](https://stackoverflow.com/questions/10371600/generating-a-single-entity-from-existing-database-using-symfony2-and-doctrine)

更新：添加 my_manager ( config.yml )

```
# Doctrine Configuration
doctrine:
    dbal:
      default_connection: my_database
      connections:
        my_database:
          driver:   pdo_pgsql
          port:     5432
          dbname:   tbl_reports
          user:     foo_user
          password: foo_pass
          charset:  UTF8
          mapping_types:
            bit: string

    orm:
        auto_generate_proxy_classes: "%kernel.debug%"
        default_entity_manager: my_manager
        entity_managers:
            my_manager:
                connection: my_database
                mappings:
                    MyNamespaceBundle:
                      mapping: true
                      dir: Entity/Reports 
```

在 config_dev.yml 中（我使用 dev 和 prod yml 文件来控制我可以连接到的主机）

```
# Doctrine Configuration
doctrine:
    dbal:
      connections:
        my_database:
          host: 172.0.0.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:11:19.527

我同意 Ziumin 的观点，即 Postgres 数据库中的数据类型可能存在问题。可能是 Enum 或类似的。

我要做的是尝试一张一张地转换表，直到将其缩小到问题表，然后查看数据类型，它应该是相当明显的。

# java - Java 线程中断（）。是正常异常吗？

> ID：13732018
> 
> 赞同：-1
> 
> 时间：2012-12-05T20:39:48.547
> 
> 标签：java, multithreading

我正在像这样开始我的线程：

```
public void startTask(Runnable r)
{
    running = true;
    Log.i(tag, "-----------start.Runnable-----------");

    final Thread first = new Thread(r);
    currentTask = first;
    first.start();

    Thread second = new Thread(new Runnable() {

        @Override
        public void run() {
            try{
                first.join();
            }
            catch(InterruptedException e){

            }
            running = false;
        }
    });

    second.start();

} 
```

当我想取消当前操作时，我正在根据这篇文章使用 Theread：[http](http://forward.com.au/javaProgramming/HowToStopAThread.html) ://forward.com.au/javaProgramming/HowToStopAThread.html ：

```
public void cancelTask()
{
    Log.i(tag, "-----------cancelTask()-----------");
    try{
        currentTask.interrupt();
        running = false;
    }
    catch(SecurityException e){
        e.printStackTrace();
    }
} 
```

cancelTask​​ 后应用程序仍在运行，但我有异常：

```
12-05 20:29:00.274: W/System.err(13533): java.lang.InterruptedException
12-05 20:29:00.274: W/System.err(13533):    at java.lang.VMThread.sleep(Native Method)
12-05 20:29:00.294: W/System.err(13533):    at java.lang.Thread.sleep(Thread.java:1047)
12-05 20:29:00.294: W/System.err(13533):    at java.util.concurrent.TimeUnit.sleep(TimeUnit.java:331)
12-05 20:29:00.304: W/System.err(13533):    at com.rsd.myfirstapp3.ProgressServiceActivity$2.run(ProgressServiceActivity.java:174)
12-05 20:29:00.314: W/System.err(13533):    at java.lang.Thread.run(Thread.java:864) 
```

.

**在使用线程的此类操作中是正常的异常吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-29T03:43:40.067

线程自行停止或被外部进程停止。意味着一个线程在完成它正在做的任何事情之后完成它的执行，此时不会抛出 InterruptedException（这是显而易见的）。但是父线程（启动线程的线程）可能希望在其执行之间停止正在执行的线程，在这种情况下，抛出异常 InterruptedException 并且该异常被线程接收。这主要是因为当它被外部进程/父线程停止时，这个线程想要做一些事情（清理资源，关闭 IO 等）。[参考](https://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)

# java - 汉字和外来字列表

> ID：13732019
> 
> 赞同：2
> 
> 时间：2012-12-05T20:39:52.677
> 
> 标签：java, special-characters, keycode

我正在尝试捕捉一些字母和特殊字符。我正在使用这种方法：

```
Keyboard keyboard = null;
if (keyboard.isKeyDown(Key.A)) {
} 
```

但是，我不知道如何注册问号，例如（？）。我需要的信件是：

```
! ? Æ Ø Å æ ø å 
```

我怎样才能使用这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:47:48.387

java中没有问号（？）的键码，所以不确定是否有任何方法可以捕捉到它。来自[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/KeyEvent.html)

> 并非所有字符都有与之关联的键码。例如，问号没有键码，因为它没有出现在主层上的键盘。

对于[感叹号](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/KeyEvent.html#VK_EXCLAMATION_MARK)，似乎有常数`VK_EXCLAMATION_MARK`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:06:54.070

你可以这样做

```
if(event.isShiftDown() && (event.getKeyCode() == KeyEvent.VK_1)) {
 //exclamation mark
} 
```

# validation - primefaces 验证消息未显示（复合组件、primefaces 和验证方法）

> ID：13732022
> 
> 赞同：2
> 
> 时间：2012-12-05T20:40:16.300
> 
> 标签：validation, jsf-2

这是 peticionario，一个复合组件，它要求您提供您的别针。这不是强制性的，但如果您填写的内容必须是数字，并且应用程序将在数据库中查找，因此没有其他人拥有相同的数字：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:cc="http://java.sun.com/jsf/composite"
xmlns:f="http://java.sun.com/jsf/core"      
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:dabit="http://java.sun.com/jsf/composite/components">

<cc:interface> 
    <cc:attribute name="peticionarioB" />
</cc:interface>

<cc:implementation>

<h:form id="peticionario_form">
<p:panel id="unooo">                
    <h:panelGrid columns="2" id="ohruiseñor">
    <f:facet name="header">
            <h:outputText value="Datos personales"/>
        </f:facet>                  

        <h:outputText value="Número de documento"/>
    <h:panelGroup>
        <h:inputText 
        id="numDoc"
    validator="#{radicadoOficioBean.validarPeticionario}"
    value="#{peticionarioBean.peticionario.numDocumento}">
        <f:validateLongRange/>
    </h:inputText> 
    <h:message for="peticionario_form:numDoc" style="color:red"/>
    </h:panelGroup>
    </h:panelGrid>
</p:panel>                            
</h:form> 
```

这是 _crear.xhtml，一个在 ap:dialog 中使用 peticionario 组件的页面

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"      
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:dabit="http://java.sun.com/jsf/composite/components">

<h:body>    

<h:form id="form">
<p:panel header="Radicación de oficio" >
<p:dialog 
header="Creación de peticionario"
id="peticionario_dialog"    
widgetVar="peticionario_dlg">
    <dabit:peticionario peticionarioB="#{radicadoOficioBean.peticionarioBean}"/>    
        <p:ajax 
    event="close"  
    update="form:peticionarioExistentePG"/>  
</p:dialog>   
</h:body>
</html> 
```

这是 RadicadoOficioBean 的 validate 方法

```
public void validarPeticionario (FacesContext context, UIComponent component, Object value) {
if (value == null) {
    return;
}

Long l = new Long(value.toString());

if (DAOBase.findByUniqueLongProperty(Peticionario.class, "numDocumento", l) != null) {
    FacesMessage fm = new FacesMessage("ya existe un usuario con el numero de documento ingresado");
context.addMessage(component.getClientId(), fm);
fm.setSeverity(FacesMessage.SEVERITY_ERROR);
System.out.println(component.getClientId());
throw new ValidatorException(fm);
}       
} 
```

验证实际上发生了:)但我无法得到消息:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:49:44.103

```
<h:inputText id="numDoc" ... /> 
<h:message for="peticionario_form:numDoc" ... /> 
```

这不匹配。你应该使用

```
<h:inputText id="numDoc" ... /> 
<h:message for="numDoc" ... /> 
```

到目前为止发布的代码中不可见的另一个可能原因是您正在发送 ajax 请求，但根本没有重新呈现消息组件。您应该确保在 ajax 请求下重新呈现（更新）消息组件或至少一个其父组件。

* * *

**与具体问题无关**，您准备验证消息的方式很笨拙。无需手动将消息添加到上下文中。`ValidatorException`当被 JSF 捕获时，该工作已经完成。

```
FacesMessage fm = new FacesMessage("ya existe un usuario con el numero de documento ingresado");
context.addMessage(component.getClientId(), fm);
fm.setSeverity(FacesMessage.SEVERITY_ERROR);
System.out.println(component.getClientId());
throw new ValidatorException(fm); 
```

只需以下 oneliner 就足够了：

```
throw new ValidatorException(new FacesMessage(
    FacesMessage.SEVERITY_ERROR, "ya existe un usuario con el numero de documento ingresado", null); 
```

# python - 获取从索引到结束的数组元素

> ID：13732025
> 
> 赞同：27
> 
> 时间：2012-12-05T20:40:29.857
> 
> 标签：python, vector, numpy, indexing

假设我们有以下数组：

```
import numpy as np
a = np.arange(1, 10)
a = a.reshape(len(a), 1)
array([[1],
       [2],
       [3],
       [4],
       [5],
       [6],
       [7],
       [8],
       [9]]) 
```

现在，我想访问从索引 4 到末尾的元素：

```
a[3:-1]
array([[4],
       [5],
       [6],
       [7],
       [8]]) 
```

当我这样做时，结果向量缺少最后一个元素，现在有五个元素而不是六个，为什么会发生这种情况，如何在不附加的情况下获得最后一个元素？

预期输出：

```
array([[4],
       [5],
       [6],
       [7],
       [8],
       [9]]) 
```

提前致谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-05T20:46:28.617

`[:-1]`删除最后一个元素。代替

```
a[3:-1] 
```

写

```
a[3:] 
```

您可以在此处阅读 Python 切片符号：[解释 Python 切片符号](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)

NumPy 切片是它的扩展。NumPy 教程有一些内容：[索引、切片和迭代](http://www.scipy.org/Tentative_NumPy_Tutorial#head-864862d3f2bb4c32f04260fac61eb4ef34788c4c)。

# mysql - 按最后 3 个字符排序

> ID：13732026
> 
> 赞同：34
> 
> 时间：2012-12-05T20:40:31.433
> 
> 标签：mysql

我有一张像这样的桌子：

```
id  name
--------
1   clark_009
2   clark_012
3   johny_002
4   johny_010 
```

我需要按以下顺序获得结果：

```
johny_002
clark_009
johny_010
clark_012 
```

不要问我已经尝试过什么，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-05T20:42:18.333

这将做到这一点，非常简单地选择最右边的 3 个字符并按该值升序排序。

```
SELECT *
FROM table_name
ORDER BY RIGHT(name, 3) ASC; 
```

应该补充一点，随着数据的增长，这将成为一种低效的解决方案。最终，您可能希望将数字附录存储在单独的索引整数列中，以便排序效率最佳。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T20:44:56.410

你应该试试这个。

```
SELECT * FROM Table order by SUBSTRING(name, -3); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T20:56:05.103

您可以应用 substring_index 函数来解析这些值 -

```
select * from table order by substring_index(name, '_', -1) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-27T09:36:22.017

**您可以使用 MySQL`SUBSTRING()`函数按子字符串排序**

> **句法 ：** `SUBSTRING(string,position,length)`

**示例：**按字符串的最后 3 个字符排序

```
SELECT * FROM TableName ORDER BY SUBSTRING(FieldName, -3);
#OR
SELECT * FROM TableName ORDER BY SUBSTRING(FieldName, -3,3); 
```

**示例：**按字符串的前 3 个字符排序

```
SELECT * FROM TableName ORDER BY SUBSTRING(FieldName, 1,3); 
```

> **注意：** `Positive`位置/索引从左到右开始，`Negative`位置/索引从字符串的右到左开始。

这是关于 [SUBSTRING()](https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_substring)函数的详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-30T13:11:49.320

如果您想按名称长度可变的最后三个字符（从左到右）排序，我建议：

```
SELECT *
FROM TABLE
ORDER BY SUBSTRING (name, LEN(name)-2, 3) 
```

索引从名称 -2 的长度开始，这是倒数第三个字符。

我有点晚了，但遇到了同样的问题，这对我有帮助。

# ruby-on-rails - 在 Ruby on rails 中正确实现递归方法

> ID：13732030
> 
> 赞同：2
> 
> 时间：2012-12-05T20:40:35.287
> 
> 标签：ruby-on-rails, ruby, recursion

repeat_purchases_percent 是我的 Category 模型中的一种方法。所有无父类别都保证在数据库中具有 future_purchases_percent 的值。子类别可能有也可能没有 future_purchases_percent。如果他们这样做，我想使用该值。如果没有，我想使用父母的价值等等。

我尝试了一种递归方法。

```
def future_purchases_percent
  if self.future_purchases_percent.nil?
    Category.find(self.parent_id).future_purchases_percent
  else
    future_purchases_percent
  end
end 
```

这陷入了一个不断评估的循环中：

```
if self.future_purchases_percent.nil? 
```

我怎样才能正确地实现这个方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T20:43:43.377

1.  您的方法卡住了，因为它与属性具有相同的名称（因此它正在调用自己），请选择不同的名称。
2.  请注意，这个条件只不过是一个简单的`a || b`表达式。
3.  您应该在`belongs_to :parent, :foreign_key => 'parent_id', :class_name => :Category`此模型中添加一个。

现在，一切就绪，您可以编写真正的声明性代码：

```
def safe_future_purchases_percent
  future_purchases_percent || parent.safe_future_purchases_percent
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:44:25.293

```
 def repeat_purchases_percent
    if self.future_purchases_percent.nil?
      Category.find(self.parent_id).repeat_purchases_percent
    else
      future_purchases_percent
    end
  end 
```

基本上，您的问题是您将方法命名为与字段相同的名称，然后立即调用它。相反，您应该像您所说的那样命名该方法，并且仅在为 nil`repeat_purchases_percent`时才递归到该方法中。`future_purchases_percent`

# python - 如何在循环中从生成器中获取三个下一个值

> ID：13732036
> 
> 赞同：3
> 
> 时间：2012-12-05T20:41:07.073
> 
> 标签：python, iteration, generator

我有一个问题，因为我找不到我的问题的解决方案。

gen 是一个生成器（difflib.Differ.compare() 的结果）：

通常通过迭代 gen 我可以读取每一行。问题是，在每次迭代中，我都需要读取当前行和下两行。

示例（逐行迭代的正常输出）：

```
iteration 1:
    line = 'a'
iteration 2:
    line = 'b'
iteration 3:
    line = 'c'
iteration 4:
    line = 'd'
iteration 5:
    line = 'e'
iteration 6:
    line = 'f'
iteration 7: 
    line = 'g' 
```

但就我而言，我需要得到这个：

```
iteration 1:
    line = 'a'
    next1 = 'b'
    next2 = 'c'
iteration 2:
    line = 'b'
    next1 = 'c'
    next2 = 'd'
iteration 3:
    line = 'c'
    next1 = 'd'
    next2 = 'e'
iteration 4:
    line = 'd'
    next1 = 'e'
    next2 = 'f'
iteration 5:
    line = 'e'
    next1 = 'f'
    next2 = 'g'
iteration 6:
    line = 'f'
    next1 = 'g'
    next2 = None
iteration 7: 
    line = 'g'
    next1 = None
    next2 = None 
```

我试图玩 gen.send()、itertools.islice()，但我找不到合适的解决方案。我不想将此生成器转换为列表（然后我可以将 next1 读取为 gen[i + 1]，将 next2 读取为 gen[i + 2]，但是当 diff 输出很大时，这完全是低效的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T21:03:48.290

这是我建议的任何迭代器/生成器的通用解决方案。我认为这种方式最有效。

```
def genby3(gen):
    it = iter(gen) # Make it a separate iterator, to avoid consuming it totally
    L1 = it.next() # Get the first two elements
    L2 = it.next()
    for L3 in it:
        yield [L1, L2, L3] # Get the results grouped in 3
        L1, L2 = L2, L3 # Update the last 2 elements
    yield [L2, L3, None] # And take care of the last 2 cases
    yield [L3, None, None]

print list(genby3(xrange(10))) 
```

如果它是您正在读取的文件，您可以`seek`,`readline`然后返回，但它可能会变得混乱，因此您可以将其视为任何其他迭代器。

**更新**：使它在每次迭代中不仅仅适用于 3 个项目，它的工作原理与其他项目一样。

```
def genby(gen, n):
    assert n>=1, 'This does not make sense with less than one element'
    it = iter(gen)
    last = list(it.next() for i in xrange(n-1))

    for nth_item in it:
        last = last+[nth_item]
        yield last
        last.pop(0)

    for i in xrange(n-1):
        last = last+[None]
        yield last
        last.pop(0)

r = xrange(10)
for i, n in enumerate(genby(r, 3)):
    print i, 'iteration'
    print '\t', n 
```

**编辑 2**：在 yield 语句之前移动了列表的连接，只是为了避免重复两次。稍微提高性能明智。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T20:55:40.920

尝试保留临时变量。

```
line = iterator.next()
next1 = iterator.next()

for next2 in iterator:
    #do stuff
    line = next1
    next1 = next2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T21:09:44.307

[文档](http://docs.python.org/2.7/library/itertools.html#recipes)中有一个[食谱`itertools`](http://docs.python.org/2.7/library/itertools.html#recipes)，`pairwise()`。它可以适应：

```
from itertools import tee, izip_longest

def triplewise(iterable):
    xs, ys, zs = tee(iterable, 3)
    next(ys, None)
    next(zs, None)
    next(zs, None)
    return izip_longest(xs, ys, zs)

for line, next1, next2 in triplewise(gen):
    ... 
```

也可以概括为：

```
from itertools import tee, izip, izip_longest, islice

no_fillvalue = object()

def nwise(iterable, n=2, fillvalue=no_fillvalue):
    iters = (islice(each, i, None) for i, each in enumerate(tee(iterable, n)))
    if fillvalue is no_fillvalue:
        return izip(*iters)
    return izip_longest(*iters, fillvalue=fillvalue)

for line, next1, next2 in nwise(gen, 3, None):
    ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T20:55:52.047

将三个序列压缩在一起怎么样？

```
izip_longest(gen, islice(gen,1,None), islice(gen,2,None), fillvalue=None) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T21:12:24.653

你可以使用这样的东西：

```
def genTriplets(a):
    first = a.next()
    second = a.next()
    third = a.next()
    while True:
        yield (first, second, third)
        first = second
        second = third
        try:
            third = a.next()
        except StopIteration:
            third = None
            if (first is None and second is None and third is None):
                break 
```

# yui3 - 在加载 YUI3 Tabview 之前阻止列表项出现

> ID：13732040
> 
> 赞同：0
> 
> 时间：2012-12-05T20:41:26.690
> 
> 标签：yui3, tabview

我正在使用 YUI 3 tabview，我的页面非常短暂地出现没有标签，然后出现标签。我找到了这个页面：

[http://yuilibrary.com/yui/docs/widget/](http://yuilibrary.com/yui/docs/widget/) 隐藏渐进增强标记

这似乎相关，但我不确定它如何应用于 tabview。

有没有办法在选项卡准备好之前阻止显示未选项卡列表？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:58:19.127

选项卡容器的默认样式可以设置为 display:none; 然后在您的选项卡视图创建中，您可以删除 display:none 属性您可以绑定到您的选项卡视图渲染事件并在其上设置显示。

# sql - 如何根据我的 Sqlite 查询选择 QTableView 行？

> ID：13732041
> 
> 赞同：1
> 
> 时间：2012-12-05T20:41:32.290
> 
> 标签：sql, select, selection, qtableview, qsqltablemodel

我的应用程序是一个有两个窗口的应用程序，其中一个您可以更改添加到我的 SQL DB 的位置和标记点，另一个您可以查看标记点。

我有`QTableView`一个`QSqlTableModel`。该模型连接到一个以`t_point`下列命名的表：

*   id 整数 PRIMARY KEY
*   位置整数

我想要做的是：在一个窗口中单击表格并自动移动到另一个窗口中的位置。（ 这个完成了 ）

移动位置并自动选择`QTableView`位置最近的项目。这是交易，我想快速而干净地做到这一点。因此，我使用 a`QSqlQuery`通过以下查询获取最接近的项目：

```
QString("SELECT position FROM t_point ORDER BY ABS(position - %1);").arg(actualPosition); 
```

所以 ai 让它们按与该点的距离排序，我使用`query.next()`并得到两个值。索引和位置。

那么现在我如何选择`QTableView`修正这个值的行呢？

我不能使用`selectRow( int row ) from QTableView`，因为我没有一行，我得到了钥匙和位置......

我得到的唯一解决方案是查看我在模型上的身份或位置。但这太可怕了。

# c# - 删除项目后更新列表

> ID：13732042
> 
> 赞同：0
> 
> 时间：2012-12-05T20:41:35.447
> 
> 标签：c#, winforms, visual-studio-2010, list

我有一个表单，当我添加一个项目时，它将它存储在一个列表中并将其添加到`checklistbox`

我有一个从框中删除项目的按钮`checklist`，但是我将如何获取它，以便当我从其中删除它时，`checklistbox`它也会在其存储的列表中删除它

这是删除按钮的代码

```
 private void btnDelete_Click(object sender, EventArgs e)
    {
        for (int i = clbSummary.CheckedIndices.Count - 1; i >= 0; --i)
        {
            clbSummary.Items.RemoveAt(clbSummary.CheckedIndices[i]);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:17:42.003

为什么不从`btnDelete_Click`方法中的列表中删除该项目。

例如：

```
private void btnDelete_Click(object sender, EventArgs e)
{
    for (int i = clbSummary.CheckedIndices.Count - 1; i >= 0; --i)
    {
        object item = clbSummary.Items[clbSummary.CheckedIndices[i]];
        myList = myList.Remove(item);
        clbSummary.Items.RemoveAt(clbSummary.CheckedIndices[i]);

    }

} 
```

我不确定您是否可以在 Items 上使用 [] 运算符，但这是为了给您一个大致的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:48:11.583

将复选框 DataSource 属性设置为存储项目的列表。当您对列表进行任何更改时，您的复选框将更新。

# php - 在导入到 mysql 之前使用 PHP 修改 csv 结构

> ID：13732044
> 
> 赞同：0
> 
> 时间：2012-12-05T20:41:41.027
> 
> 标签：php, mysql, excel, csv, import

我在 .txt 中有一个 csv，需要将其导入**MySql** 我正在手动将其导入到我的表中，但它不断给我这个错误：第 706 行的 CSV 输入中的列数无效。

在 excel 上检查它唯一可能导致问题的信息是其中一个单元格包含： ***5.5 x 18"***

```
 probably the quotation mark is doing it 
```

我该如何解决这个问题？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:44:48.453

我相信您所需要的只是：

```
str_replace('"', '\"', $value); 
```

通过用 \ 替换“”，您正在转义它，它应该正确插入。

# c++ - Visual Studio - 启用优化导致崩溃

> ID：13732045
> 
> 赞同：1
> 
> 时间：2012-12-05T20:41:50.793
> 
> 标签：c++, visual-c++, stl, c++11, visual-studio-2012

我在 Windows 8 和 2012 年 11 月 CTP 上使用 Visual Studio 2012。
当我在启用优化 (/o2) 的情况下运行我的 c++ 应用程序的发布版本时，它会崩溃。
它发生在 std::vector 内（虽然不是我第一次使用向量）。
进入代码我发现我第二次执行 push_back 时，在这里：

```
1197 if (this->_Mylast == this->_Myend)
1198     _Reserve(1); 
```

如果我遵循_Reserve，则从1开始的计数值变为17656451，导致稍后在调用重新分配时出错（我禁用了异常）。
在调试模式下运行时一切正常。禁用优化的发布模式也运行良好。
会不会是因为编译器是测试版？我正在使用一些新功能，所以我无法切换回来尝试。

编辑：

这是代码的一部分。
我有两个结构：

```
struct Subtile
{
    int sequenceId;
    AnimationSequenceState sequenceState;
    XMFLOAT2 position;
};

struct Tile
{
    //int type;
    bool visible;
    bool walkable;

    int x, y;
    int height;
    XMFLOAT2 position;
    float depth;
    XMVECTOR color;

    std::vector<Subtile> subtiles;
}; 
```

当从 lua 文件解析游戏的 2d 地图时，会从循环内部调用此函数：

```
HRESULT Map::parseTile(LuaState& l, int ix, int iy, XMFLOAT2 pos)
{
    Tile tile;

    tile.visible = l.getBoolField(-1, parsing::MapTileVisible, true);
    tile.walkable = l.getBoolField(-1, parsing::MapTileWalkable, true);
    tile.height = l.getIntField(-1, parsing::MapTileHeight, 0);

    bool sync = l.getBoolField(-1, parsing::MapTileSync, true);

    tile.x = ix;
    tile.y = iy;

    tile.position.x = pos.x;
    tile.position.y = pos.y;
    tile.depth = -static_cast<float>(ix + iy);
    tile.color = XMVectorSet(1.0f, 1.0f, 1.0f, 1.0f);

    l.pushString(parsing::MapTileSubtiles);
    l.getTable();
    {
        for(l.pushNil(); l.next(); l.pop())
        {
            Subtile subtile;
            subtile.sequenceId = l.toInt();
            _sequences[subtile.sequenceId].update(subtile.sequenceState);
            if(!sync)
            {
                subtile.sequenceState.elapsed = rand() % 1000; //一秒、適当に
            }
            tile.subtiles.push_back(subtile);
        }
    }
    l.pop();

    _tiles.push_back(tile); //second time crashes here

    return S_OK;
} 
```

编辑2：

这是代码的更完整部分-> [LINK](http://pastebin.com/ep5Xs3b9)

我试图定位问题，这就是我发现的。
删除第 113 行的向量似乎没有任何效果，但是，在第 18 行注释向量（以及写入/读取它的代码）以某种方式解决了它。
不过有一个问题，现在我从第 297 行收到一个错误，在加载所有图块后，我对它们进行了排序。通过在 288-292 处注释 for 循环，这个问题就消失了。
反正我还是不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:58:54.237

我的水晶球显示您在附近存储的另一个变量中具有超出范围的缓冲区访问权限，这会破坏`std::vector`的元数据。

然后我问魔8球会不会是超频导致的硬件故障，得到的回答是“不太可能”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:07:24.563

我终于找到了罪魁祸首。
我将 XMVECTOR（DirectX 数学库）直接存储在 Tile 结构中。

该文档明确指出应避免这样做。
所以我所做的是存储一个 XMFLOAT4 并在需要该值时将其加载到 XMVECTOR 中。

我仍然不明白为什么它会出现访问冲突，但我想是向量的内部表示（在我的例子中是 __m128）、数学库的优化和 std::vector 内部发生的未初始化移动的组合?

# javafx-2 - 如何将掩码格式应用于 TextField？

> ID：13732047
> 
> 赞同：11
> 
> 时间：2012-12-05T20:41:56.367
> 
> 标签：javafx-2

我正在创建一些表单，我需要为某些字段创建掩码和验证。

它是否在 JavaFX 中实现？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-17T17:07:49.080

我的[面具](https://github.com/vas7n/VAMaskField)的例子。

使用：

```
<MaskField mask="+7(DDD)DDD-DDDD"/>
<MaskField mask="AA DDD AAA" placeholder="__ ### ___"/> 
```

ETC

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T11:11:01.530

限制来自[Richard 的 fxexperience 帖子的](http://fxexperience.com/2012/02/restricting-input-on-a-textfield/)输入：

```
TextField field = new TextField() {
    @Override public void replaceText(int start, int end, String text) {
        // If the replaced text would end up being invalid, then simply
        // ignore this call!
        if (!text.matches("[a-z]")) {
            super.replaceText(start, end, text);
        }
    }

    @Override public void replaceSelection(String text) {
        if (!text.matches("[a-z]")) {
            super.replaceSelection(text);
        }
    }
}; 
```

如果您想创建自己的使用掩码并创建自己的控件，请查看[Richard 的 MoneyField](http://fxexperience.com/2012/02/moneyfield/)，其中还包括示例项目和源代码。同样，在 fxexperience 存储库中，有一些控件可以限制对整数、双精度数或格式化的网络颜色（例如[#rrggbb](https://github.com/fxexperience/code/tree/master/FXExperienceControls/src/com/fxexperience/javafx/scene/control/skin) ）的输入。所有这些都遵循一个共同的主题，它们是[Control](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Control.html)的子类，提供一些要获取和设置的属性，这些属性定义了公共接口，然后还定义了一个私有的支持皮肤，它根据通过公共接口设置的值来处理 UI 的呈现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-03T23:39:23.310

> *注意*：这只适用于 JRE 1.8.0_25 或更低版本。对于 JRE 1.8.0_48 或 0_51，每次输入字符后插入符号位置始终设置为 0。

不，这不是在标准 JavaFX 中实现的。您需要使用一些库或自己做。

这是我对文本字段的静态掩码的实现。它适用于日期、电话和其他类型的静态掩码：

```
/**
 * Adds a static mask to the specified text field.
 * @param tf  the text field.
 * @param mask  the mask to apply.
 * Example of usage: addMask(txtDate, "  /  /    ");
 */
public static void addMask(final TextField tf, final String mask) {
    tf.setText(mask);
    addTextLimiter(tf, mask.length());

    tf.textProperty().addListener(new ChangeListener<String>() {
        @Override
        public void changed(final ObservableValue<? extends String> ov, final String oldValue, final String newValue) {
            String value = stripMask(tf.getText(), mask);
            tf.setText(merge(value, mask));
        }
    });

    tf.setOnKeyPressed(new EventHandler<KeyEvent>() {
        @Override
        public void handle(final KeyEvent e) {
            int caretPosition = tf.getCaretPosition();
            if (caretPosition < mask.length()-1 && mask.charAt(caretPosition) != ' ' && e.getCode() != KeyCode.BACK_SPACE && e.getCode() != KeyCode.LEFT) {
                tf.positionCaret(caretPosition + 1);
            }
        }
    });
}

static String merge(final String value, final String mask) {
    final StringBuilder sb = new StringBuilder(mask);
    int k = 0;
    for (int i = 0; i < mask.length(); i++) {
        if (mask.charAt(i) == ' ' && k < value.length()) {
            sb.setCharAt(i, value.charAt(k));
            k++;
        }
    }
    return sb.toString();
}

static String stripMask(String text, final String mask) {
    final Set<String> maskChars = new HashSet<>();
    for (int i = 0; i < mask.length(); i++) {
        char c = mask.charAt(i);
        if (c != ' ') {
            maskChars.add(String.valueOf(c));
        }
    }
    for (String c : maskChars) {
        text = text.replace(c, "");
    }
    return text;
}

public static void addTextLimiter(final TextField tf, final int maxLength) {
    tf.textProperty().addListener(new ChangeListener<String>() {
        @Override
        public void changed(final ObservableValue<? extends String> ov, final String oldValue, final String newValue) {
            if (tf.getText().length() > maxLength) {
                String s = tf.getText().substring(0, maxLength);
                tf.setText(s);
            }
        }
    });
} 
```

* * *

另请参阅： [JavaFX 2.2 TextField maxlength](https://stackoverflow.com/questions/15159988/javafx-2-2-textfield-maxlength/15160289)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-25T14:03:42.297

我也有同样的需求。我创建了这个字段，将其命名为 SpecialTextField，然后推送到[GitHub](https://github.com/aneagle/javafx-SpecialTextField)。也有例子。希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T01:08:34.130

当前 javafx-2 平台默认支持 - 否，但通过[这个链接](https://forums.oracle.com/forums/thread.jspa?threadID=2316760) ，它有很多关于 javaFX 中表单验证的见解和示例代码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-10T15:53:39.483

```
public class NumberTextField extends TextField {
    private int maxLenght;

    public NumberTextField(int maxLenght) {
        super();
        this.maxLenght = maxLenght;
    }

    @Override
    public void replaceText(int start, int end, String text) {
        if (validate(text)) {
            super.replaceText(start, end, text);
        }
    }

    @Override
    public void replaceSelection(String text) {
        if (validate(text)) {
            super.replaceSelection(text);
        }
    }

    private boolean validate(String text) {
        if (this.getText() != null) {
        }
        boolean status = ("".equals(text) || text.matches("[0-9]"));
        if (this.getText() == null) {
            return status;
        } else {
            return (status && this.getText().length() < maxLenght);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-27T17:57:24.177

在某些情况下，我会验证 text 属性：

```
myTextField
    .textProperty()
    .addListener(
    (obs, oldVal, newVal) -> 
        { 
            if(!newVal.matches("\\d+"))
                textField.setText(oldV);
        }); 
```

Unlucky：`textField.setText(oldV);`将再次进入相同的函数，如果 oldVal 匹配，则进行不必要的测试。

如果在这个监听器被添加到TextField之前TextField变成了一个不匹配的值，输入一个不匹配的新值会导致**循环！！！**

为了避免这种情况，这样写会更安全：

```
String acceptableValue = "0";
myTextField
    .textProperty()
    .addListener(
    (obs, oldVal, newVal) -> 
        { 
            if(!newVal.matches("\\d+"))
                textField.setText(oldVal.matches("\\d+") ? oldV : acceptableValue);
        }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-05T21:58:42.133

我编写了一个扩展 TextField 并应用掩码的类。

```
package com.model;

import java.text.NumberFormat;
import java.util.Locale;

/**
 * ATENTION
 * DO NOT FORGUET TO IMPORT IN FXML   
 * <?import com.view.TextFieldMoney?>
 * 
 * */

import javafx.scene.control.TextField;

public class TextFieldMoney extends TextField {
    private int maxlength;
    private String valor = "";

    public TextFieldMoney() {
        this.maxlength = 11;
    }

    public void setMaxlength(int maxlength) {
        this.maxlength = maxlength;
    }

    @Override
    public void replaceText(int start, int end, String text) {
        // Delete or backspace user input.
        if (getText() == null || getText().equalsIgnoreCase("")) {
            valor = "";
        }
        if (text.equals("")) {
            super.replaceText(start, end, text);
        } else{

            text = text.replaceAll("[^0-9]", "");
            valor += text;

            super.replaceText(start, end, text);
            if (!valor.equalsIgnoreCase(""))
                setText(formata(valor));
        }
    }

    @Override
    public void replaceSelection(String text) {
        // Delete or backspace user input.
        if (text.equals("")) {
            super.replaceSelection(text);
        } else if (getText().length() < maxlength) {
            // Add characters, but don't exceed maxlength.
            // text = MascaraFinanceira.show(text);
            if (text.length() > maxlength - getText().length()) {
                // text = MascaraFinanceira.show(text);
                text = text.substring(0, maxlength - getText().length());
            }
            super.replaceSelection(text);
        }
    }

    /*
     *Return the number without money mask
     **/

    public String getCleanValue(){
        String cleanString = getText().replaceAll("[^0-9]", "");
        Double cleanNumber = new Double(cleanString);
        return String.valueOf(cleanNumber/100);
    }

    private String formata(Double valor) {
        Locale locale = new Locale("pt", "BR");
        NumberFormat nf = NumberFormat.getInstance(locale);
        nf.setMaximumFractionDigits(2);
        nf.setMinimumFractionDigits(2);

        return nf.format(valor);
    }

    public String formata(String valor) {
        double v = new Double(valor);
        return formata(v/100);
    }

} 
```

在 FXML 中

```
 <TextField fx:id="valorTextField" GridPane.columnIndex="2" GridPane.rowIndex="2" /> 
```

放

```
 <TextFieldMoney fx:id="valorTextField" GridPane.columnIndex="2" GridPane.rowIndex="2" /> 
```

# hibernate - 实体可以映射到 Hibernate 中的一个额外的列吗

> ID：13732053
> 
> 赞同：0
> 
> 时间：2012-12-05T20:42:22.993
> 
> 标签：hibernate

我有一个用 8 列与 DB 映射的类，但在 hql 中，我在 select 语句中创建第 9 列，并带有 case when 语句。它给出了意外的toekn，似乎是语法错误。但我无法弄清楚确切的语法错误。

我得到的例外

org.jboss.resteasy.spi.UnhandledException：javax.ejb.EJBException：java.lang.IllegalArgumentException：org.hibernate.hql.ast.QuerySyntaxException：意外令牌：（靠近第 1 行，第 353 列

[选择 un.id, un.timestamp, un.recipientUser, un.sendingUser,un.messageType, un.body, un.title, un.readTimestamp, case when sentUser > recipientUser 然后 CONCAT(sendingUser,'-',recipientUser) ELSE CONCAT(recipientUser,'-',sendingUser) END as normalised_message_parties from com.xxxxx.platform.xxx.notification.xxxxxx.UserNotification un inner join ( 选择 max(timestamp) 作为时间戳，sendingUser > recipientUser 然后 CONCAT(sendingUser, '-',recipientUser) ELSE CONCAT(recipientUser,'-',sendingUser) END as normalised_message_parties from com.xxxxx.platform.xxx.notification.xxxxxx.UserNotification un where un.sendingUser like :userID or un.recipientUser like :userID group通过 normalised_message_parties) 作为 m on ( m.normalised_message_parties = normalised_message_parties 和 m.timestamp = un.时间戳）按时间戳 DESC 排序]

找不到问题..我不知道你还需要什么来帮助我..所以请告诉我我会发布它..但据我所知..查询语法中的问题中继。我正在使用休眠 3.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:40:36.490

专栏不是问题。您不能在 FROM 子句中使用子选择。Hibernate 文档指出，这仅在 SELECT 或 WHERE 子句中才有可能。你需要

*   重写您的查询或
*   提供观点

有关更多详细信息，请参阅[Hibernate 文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-subqueries)。

# android - 所以我定义了这个标签：  我也试过：  在 Galaxy Tab 2 上，我正在测试我的网站 - 这正确地阻止了任何类型的双击或捏缩放。 但是一旦我改变方向 - 我可以再次放大！这种行为很奇怪，因为我只能放大，不能缩小。我可以通过双击和捏来做到这一点。 改变方向并不能解决问题，每次后续的方向改变都有这个问题...... 有人以前见过这个问题吗？ 谢谢！ 切雷克 切换视频源后，您需要对其运行.load()以强制其加载新文件。此外，您需要提供多种格式，因为没有所有浏览器都支持的视频编解码器。 首先，像这样设置您的来源： var sources = [ { 'mp4': 'http://video-js.zencoder.com/oceans-clip.mp4', 'webm':'http://video-js.zencoder.com/oceans-clip.webm', 'ogg':'http://video-js.zencoder.com/oceans-clip.ogv' } // as many as you need... ]; 然后，您的 switch 函数应如下所示： function switchVideo(index) { var s = sources[index], source, i; video.innerHTML = ''; for (i in s) { source = document.createElement('source'); source.src = s[i]; source.setAttribute('type', 'video/' + i); video.appendChild(source); } video.load(); video.play(); //optional } 在此处查看工作演示。 这为浏览器提供了可供尝试的不同格式的列表。它将遍历每个 URL，直到找到它喜欢的一个。在每个源元素上设置“类型”属性会提前告诉浏览器它是什么类型的视频，这样它就可以跳过它不支持的视频。否则，它必须访问服务器以检索标头并确定它是什么类型的文件。 只要您提供 ogg/theora 文件，这应该可以在 Firefox 回到 3.5 中工作。它可以在 iPad 上运行，因为页面上一次只有一个视频元素。但是，只有在用户至少手动单击一次播放后，自动播放才会起作用。 对于不支持 html5 视频的旧版浏览器，您可以在源标记之后为视频元素附加 Flash 后备，以获得额外的功劳。（即，IE < 9 - 尽管您需要使用 jQuery 或其他 shim 来替换addEventListener.） androidbrowserorientationzoomingmeta 4 3 回答 3 This answer is useful 2 有同样的问题并通过切换到 HTML5 解决了它。这意味着： 于 2014-03-03T13:54:12.540 回答 This answer is useful 1 也许您需要使用未记录的“target-densityDpi”，如下所示：https ://android.googlesource.com/platform/external/webkit/+/f10585d69aaccf4c1b021df143ee0f08e338cf31 于 2012-12-05T20:45:38.593 回答 This answer is useful 0 我面临同样的问题没有解决方案。合乎逻辑的结论是，当我最初将其设置为“user-scalable=0”时，浏览器窗口必须将元数据重置为“user-scalable=1”。 仅当我使用 CSS transition3d 移动页面内容并在下方显示一个用于关闭画布菜单的侧边栏（如 Google 移动或 Facebook 移动应用程序）时，才会发生该错误。如果我使用负边距来推送内容，那么在我的测试中根本不会发生。 我尝试做的一件事是每次用户更改手机方向时替换元视口标签。但是，我不确定它是否真的有效，因为该错误似乎每 6 页重新加载 + 方向为横向时就会发生。\ function updateMetaOrientationChange() { var viewport = document.querySelector("meta[name=viewport]"); viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;') } 于 2013-06-05T04:06:13.363 回答 Related 1 c# - 尝试格式化 Datagrid 输出的字符串 1 macos - AV Foundation：准备播放的 currentItem 与 -[AVPlayer readyForDisplay] 属性之间的区别？ 2 php - PHP-Downloadscript - 下载限制不起作用 2 scheme - 方案，子列表 1 iphone - 在 Objective-C 和 iOS 中合并项目范围定义的最佳实践 2 mongodb - Yii Gii 与 MongoDB 4 java - 没有真正原因的 NullPointerException 1 javascript - 如何在 Mootools 的 mouseenter 函数中管理多个元素？ 2 c# - asp.net 中的用户配置文件 0 multithreading - 线程和进程的堆栈大小差异 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13732055
> 
> 赞同：1
> 
> 时间：
> 
> 标签：android, browser, orientation, zooming, meta

所以我定义了这个标签：

```
<meta name="viewport" content='width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no' /> 
```

我也试过：

```
<meta name="viewport" content='width=device-width, initial-scale=1.0, user-scalable=no' /> 
```

在 Galaxy Tab 2 上，我正在测试我的网站 - 这正确地阻止了任何类型的双击或捏缩放。

但是一旦我改变方向 - 我可以再次放大！这种行为很奇怪，因为我只能放大，不能缩小。我可以通过双击和捏来做到这一点。

改变方向并不能解决问题，每次后续的方向改变都有这个问题......

有人以前见过这个问题吗？

谢谢！

切雷克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T13:54:12.540

有同样的问题并通过切换到 HTML5 解决了它。这意味着：

```
<!DOCTYPE html>
<html lang="en"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:45:38.593

也许您需要使用未记录的“target-densityDpi”，如下所示：[https ://android.googlesource.com/platform/external/webkit/+/f10585d69aaccf4c1b021df143ee0f08e338cf31](https://android.googlesource.com/platform/external/webkit/+/f10585d69aaccf4c1b021df143ee0f08e338cf31)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T04:06:13.363

我面临同样的问题没有解决方案。合乎逻辑的结论是，当我最初将其设置为“user-scalable=0”时，浏览器窗口必须将元数据重置为“user-scalable=1”。

仅当我使用 CSS transition3d 移动页面内容并在下方显示一个用于关闭画布菜单的侧边栏（如 Google 移动或 Facebook 移动应用程序）时，才会发生该错误。如果我使用负边距来推送内容，那么在我的测试中根本不会发生。

我尝试做的一件事是每次用户更改手机方向时替换元视口标签。但是，我不确定它是否真的有效，因为该错误似乎每 6 页重新加载 + 方向为横向时就会发生。\

```
function updateMetaOrientationChange() {
     var viewport = document.querySelector("meta[name=viewport]");

     viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;')
} 
```

# python - python：从有序列表中对键的子列表进行排序的最快方法是什么

> ID：13732059
> 
> 赞同：2
> 
> 时间：2012-12-05T20:42:48.903
> 
> 标签：python

我有一个关于从一长串键中排序无序键子列表的速度的问题。所以

```
keys =['a','c','b','f','e','d','p','t','s','y','h']
sub_list = ['y','b','a','p'] 
```

我有两个想法：

```
sublist = sorted(sub_list, key=keys) 
```

或者，

```
sublist = [key for key in keys if key in sub_list] 
```

据我所知，可能有比这两个更好的方法。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:51:42.790

只是时间：

```
In [3]: %timeit sorted(sub_list, lambda a,b: cmp(keys.index(a), keys.index(b)))
100000 loops, best of 3: 6.22 us per loop

In [4]: %timeit sublist = [key for key in keys if key in sub_list]
1000000 loops, best of 3: 1.91 us per loop 
```

*编辑（更多方法）*：

```
%timeit sorted(sub_list, key=keys.index)
100000 loops, best of 3: 2.8 us per loop 
```

此示例使用宏（或它们在中调用的任何内容`ipython`），但您可以`timeit`通过以下方式使用自己：

```
import timeit

p = """
keys =['a','c','b','f','e','d','p','t','s','y','h']
sub_list = ['y','b','a','p']"""

s = "sorted(sub_list, lambda a,b: cmp(keys.index(a), keys.index(b)))"

timeit.Timer(stmt=s, setup=p).timeit()
>>> 8.40028386496742

s = "[key for key in keys if key in sub_list]"
timeit.Timer(stmt=s, setup=p).timeit()
>>> 1.9661344551401498 
```

所以你可以尝试所有你能想到的方法并选择最快的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:03:52.733

为什么不只是`sub_list.sort()`？它可能不是最快的，但它肯定很容易理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:14:59.317

我认为您应该使用`sub_list.sort`过度排序，因为`.sort`进行就地排序，其中`sorted`在排序之前复制子列表

您所做的列表理解非常慢，因为最后一个 if 语句必须扫描整个 sub_list （因此每个键执行 n 次操作）

```
sublist = [key for key in keys if key in sub_list] 
```

一个更快的列表理解是这样的

```
sub_set = set(sublist)
sub_list = [key for key in keys if key in sub_set] 
```

因为哈希和集合查找是 O(1)，而列表查找是 O(n)

排序通常是 O(nlog(n)) 并且列表理解是 O(n)

但是假设：

```
sublist = sorted(sub_list, key=keys) 
```

你的意思是：

```
sublist = sorted(sub_list, key=keys.index) 
```

你有列表查找而不是哈希查找，因此你的排序从 O(nlog(n)) 到 O((n**2)*log(n))

要将排序返回到 nlog(n)，您必须将密钥列表转换为哈希，如下所示：

```
keys = dict(zip(keys, range(len(keys))))
sublist = sorted(sub_list, key=keys) 
```

# r - 什么是 seq_along 有效但 seq 产生意外结果的例子？

> ID：13732062
> 
> 赞同：84
> 
> 时间：2012-12-05T20:43:10.557
> 
> 标签：r, seq

有什么好的例子说明什么时候`seq_along`会起作用，但`seq`会产生意想不到的结果？

从`?seq`我们的文档中：

> 请注意，无论参数名称如何，它都会在第一个参数的类上分派。如果仅使用一个旨在将其视为 的参数来调用它，则可能会产生意想不到的后果 `along.with`：在这种情况下使用要好得多`seq_along`。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-12-05T21:01:40.783

这应该清楚地表明差异。基本上，**除了**传递长度为 1 的向量外，它的行为`seq()`类似于. 如果这曾经咬过你，你将永远不会再使用！`seq_along()` **`seq_len()``seq()`**

 **```
a <- c(8, 9, 10)
b <- c(9, 10)
c <- 10

seq_along(a)
# [1] 1 2 3
seq_along(b)
# [1] 1 2
seq_along(c)
# [1] 1

seq(a)
# [1] 1 2 3
seq(b)
# [1] 1 2
seq(c)
# [1]  1  2  3  4  5  6  7  8  9 10 
```

可能值得注意的是，`sample()`表现出同样糟糕的行为：

```
sample(a)
# [1] 10  8  9
sample(b)
# [1]  9 10
sample(c)
# [1]  8  7  9  3  4  1  6 10  2  5 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-05T20:53:19.467

如果 seq 的输入长度为 1，则 和 之间的输出`seq`将`seq_along`不同

```
x <- 5
for(i in seq(x)){
    print(x[i])
}
#[1] 5
#[1] NA
#[1] NA
#[1] NA
#[1] NA

for(i in seq_along(x)){
    print(x[i])
}
#[1] 5 
```

如果输入是日期向量，我们也会看到差异

```
x <- Sys.Date() + 1:5
seq(x)
#Error in seq.Date(x) : 'from' must be of length 1
seq_along(x)
#[1] 1 2 3 4 5 
```**

# java - 在mysql数据库中多次插入

> ID：13732065
> 
> 赞同：1
> 
> 时间：2012-12-05T20:43:23.790
> 
> 标签：java, mysql, jdbc, insert, procedure

我有`Categories`一张`Skins`桌子`Images`

```
Categories : id, Name
Skin :  id, name
CategorySkins : CategoryID, SkinID
Images : id, name
SkinImages: Skinid, ImageID 
```

我的问题是保存一个带有几个的`Category`实例和一个带有几个`Skins`的`Skins`实例`Images`。我尝试动态构建插入字符串，但我不喜欢这种方法。

PS是否可以像这样传递数据：带有皮肤列表和图像列表的类别。作为mysql程序的列表？或者简单是否可以将数组作为参数传递给过程？有关解决此问题的其他方法的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:36:31.040

我已经使用 Statement 来解决这个问题。

```
stmnt = conn.createStatement();
conn.setAutoCommit(false);

stmnt.addBatch("insert statement for categories");
stmnt.addBatch("insert statement for skins");
stmnt.addBatch("insert statement for CategorySkins");
...

stmnt.executeBatch();
conn.commit(); 
```

# c# - 如何捕获在 (WPF) 窗口之外发生的鼠标事件？

> ID：13732070
> 
> 赞同：11
> 
> 时间：2012-12-05T20:43:42.963
> 
> 标签：c#, wpf, window, mouseevent, capture

我有一个具有and的`Window`元素，因此它没有标题栏并支持透明度。`WindowStyle="None"``AllowsTransparency="True"`

我希望用户能够通过左键单击窗口内的任意位置并拖动来将窗口移动到屏幕上的任何位置。只要按下鼠标左键，窗口就会随着鼠标一起拖动。

我能够使此功能与一个例外一起工作：当鼠标移出窗口时（例如，当在窗口边缘附近按下鼠标左键并且鼠标快速移动时），窗口不再捕获鼠标位置，不随鼠标拖动。

这是我用来完成工作的代码隐藏代码：

```
public Point MouseDownPosition { get; set; }
public Point MousePosition { get; set; }
public bool MouseIsDown { get; set; }

private void window_MyWindowName_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    MouseDownPosition = e.GetPosition(null);
    MouseIsDown = true;
}

private void window_MyWindowName_MouseMove(object sender, MouseEventArgs e)
{
    if (MouseIsDown)
    {
        MousePosition = e.GetPosition(null);
        Left += MousePosition.X - MouseDownPosition.X;
        Top += MousePosition.Y - MouseDownPosition.Y;
    }
}

private void window_MyWindowName_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    MouseIsDown = false;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T21:03:57.847

我想你正在寻找这个：Processing Global Mouse and Keyboard Hooks in C#

网址：[在 C# 中处理全局鼠标和键盘挂钩](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

此类允许您点击键盘和鼠标和/或检测它们的活动，即使应用程序在后台运行或根本没有任何用户界面。

此类使用 KeyEventArgs 和 MouseEventArgs 引发常见的 .NET 事件，因此您可以轻松检索所需的任何信息。

有一个例子和解释和演示使用。

很棒的教程！

例子：

```
UserActivityHook actHook;
void MainFormLoad(object sender, System.EventArgs e)
{
    actHook= new UserActivityHook(); // crate an instance

    // hang on events

    actHook.OnMouseActivity+=new MouseEventHandler(MouseMoved);
    actHook.KeyDown+=new KeyEventHandler(MyKeyDown);
    actHook.KeyPress+=new KeyPressEventHandler(MyKeyPress);
    actHook.KeyUp+=new KeyEventHandler(MyKeyUp);
} 
```

现在，一个如何处理事件的示例：

```
public void MouseMoved(object sender, MouseEventArgs e)
{
    labelMousePosition.Text=String.Format("x={0}  y={1}", e.X, e.Y);
    if (e.Clicks>0) LogWrite("MouseButton     - " + e.Button.ToString());
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T20:45:38.053

我相信你正在重新发明轮子。搜索“Window.DragMove”。

例子：

```
 private void title_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        this.DragMove();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T20:41:53.650

试试这种方式：

```
// method to convert from 'old' WinForms Point to 'new' WPF Point structure:
public System.Windows.Point ConvertToPoint(System.Drawing.Point p)
{
    return new System.Windows.Point(p.X,p.Y);
}

// some locals you will need:
bool mid = false; // Mouse Is Down
int x=0, y=0;

// Mouse down event
private void MainForm_MouseDown(object sender, MouseButtonEventArgs e)
{
   mid=true;
   Point p =  e.GetPosition(this);

   x = (int)p.X; 
   y = (int)p.Y;
}

// Mouse move event
private void MainForm_MouseMove(object sender, MouseButtonEventArgs e)
{
   if(mid)
   {
        int x1 = e.GetPosition(this).X;
        int y1 = e.GetPosition(this).Y;

        Left = x1-x;
        Top = y1-y;
   }
}

// Mouse up event
private void MainForm_MouseUp(object sender, MouseButtonEventArgs e)
{
    mid = false;
} 
```

# php - 使用 PHP 在 Heroku 上从非 www 重定向到 www

> ID：13732072
> 
> 赞同：2
> 
> 时间：2012-12-05T20:43:48.960
> 
> 标签：php, redirect, heroku, dns, cname

我在 Heroku 上有一个普通的 php 应用程序，根据他们的建议，我的 DNS 用于指向“www.biglikeco.com”的自定义域。输入“biglikeco.com”并没有指向任何地方。

**在 Heroku 上的 php 应用程序的上下文中，将所有访问“biglikeco.com”的流量重定向到“www.biglikeco.com”的最佳方法是什么？**

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:51:28.030

这是我为您创建的通用 PHP 重定向脚本，您可以将其附加到您拥有的任何全局包含文件中，以执行您想要的操作：

```
$host = $_SERVER['HTTP_HOST'];
if (!preg_match('/^www\..*/', $host)) {
    header('location: http://www.my_site.com');
} 
```

或使用 .htaccess：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^my_site\.com [NC]
RewriteRule (.*) http://www.my_site.com/$1 [L,QSA,R=301] 
```

# extjs - gxt (extJS) Combobox 在 IE -8 中抛出无响应的 JS 错误

> ID：13732074
> 
> 赞同：2
> 
> 时间：2012-12-05T20:43:51.933
> 
> 标签：extjs, combobox, gxt

我有一个 gxt 组合框，它分配了一个大型数据存储（350 个对象）。当我尝试通过单击下拉图标来显示列表时，我在 IE-8 中收到无响应的 js 错误。我知道它试图填充大约 350 个对象（列表）并且它需要时间。如果我几次忽略错误，它最终会加载。除了减少数据存储之外，是否有避免 js 错误的解决方法？我发现了一些文章，其中一些用户建议在加载数据时暂停/恢复布局。但我不太清楚该怎么做。我只是设置商店，之后没有触摸它，那么我在哪里暂停/恢复布局？应该我修改了组合框类还是什么？我正在使用 GXT 2.2.4 这是我的代码。

`private ComboBox hierarchyName;` `private ListStore<BeanModel> listStoreHierarchyName` `hierarchyName.setStore(listStoreHierarchyName);`--- 有 350 个对象

[http://www.sencha.com/forum/showthread.php?226443-IE8-quot-Unresponsive-Script-quot-Prompt](http://www.sencha.com/forum/showthread.php?226443-IE8-quot-Unresponsive-Script-quot-Prompt) http://www.sencha.com/forum/showthread.php?205909-IE-quot -Stop-running-this-script-quot-when-loading-large-store

# excel - 合并员工和依赖信息

> ID：13732075
> 
> 赞同：0
> 
> 时间：2012-12-05T20:43:54.087
> 
> 标签：excel, vba, merge

我有两张纸，一张是员工信息（包括唯一 ID 的 SSN），另一张是受抚养人信息（每个受抚养人都有他们所属员工的 SSN。）

“员工”表不包括公司中的所有员工，但“从属”表包含。

有没有办法让 excel 检查“从属”表（寻找匹配的 SSN），如果找到，复制该行并插入相应的员工下？

*重要 - 家属需要在父母雇员下显示

我有 2,500 名员工需要与家属匹配，因此非常感谢任何帮助。

让我知道更多信息是否有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:56:45.910

```
VLOOKUP(lookup_value,table_array,col_index_num,range_lookup) 
```

不错的小教程在这里：

[http://spreadsheets.about.com/od/excelfunctions/ss/vlookup.htm](http://spreadsheets.about.com/od/excelfunctions/ss/vlookup.htm)

# javascript - jQuery - 使用 stopPropagation() 的更令人困惑的行为

> ID：13732076
> 
> 赞同：3
> 
> 时间：2012-12-05T20:43:54.700
> 
> 标签：javascript, jquery, html, javascript-events

我有以下代码它需要 a`<ul>`并在单击时下拉内容。这很好用。问题是当单击 a 时它也会关闭相同类型的其他菜单`child` `<li>`。

我通过使用该`if`子句确定被单击的项目是否也是当前打开的项目来“修复”这个问题，但我想更进一步并使其如果**再次**单击*父* 项，它将关闭菜单。我对如何解决这个问题有很多误解。我试图阻止子元素的传播，但它产生了相同的结果。有人可以帮忙吗？`ul`

 **# 接线（文件加载）

```
$(document).ready(function () {
                $('[data-role="sidebar-dropdown"]').drawer({
                    open: 'sidebar-dropdown-open',
                    css: '.sidebar-dropdown-open'
                });
        }); 
```

# html

```
<ul>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="pages/.." class="remote">Link Text</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a class="remote" href="pages/...">Link Text</a></li>
            <li><a class="remote" href="pages/...">Link Text</a></li>
            <li><a class="remote" href="pages/...">Link Text</a></li>
        </ul>
    </li>
</ul> 
```

# javascript

```
(function ($) {
    $.fn.drawer = function (options) {
        // Create some defaults, extending them with any options that were provided
        var settings = $.extend({
            open: 'open',
            css: '.open'
        }, options);

        return this.each(function () {
            $(this).on('click', function (e) {
                // slide up all open dropdown menus
                $(settings.css).not($(this)).each(function () {
                    $(this).removeClass(settings.open);
                    // retrieve the appropriate menu item
                    var $menu = $(this).children(".dropdown-menu, .sidebar-dropdown-menu");
                    // slide down the one clicked on.
                    $menu.slideUp('fast');
                    $menu.removeClass('active');
                });

                // mark this menu as open
                $(this).addClass(settings.open);

                // retrieve the appropriate menu item
                var $menu = $(this).children(".dropdown-menu, .sidebar-dropdown-menu");
                // slide down the one clicked on.
                $menu.slideDown(100);
                $menu.addClass('active');
                e.preventDefault();
                e.stopPropagation();

            }).on("mouseleave", function () {
                $(this).children(".dropdown-menu").hide().delay(300);
            });

        })
    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:57:04.103

在 jQuery 事件中，您可以通过引用来读取启动事件的节点`e.target`。

```
if ($(e.target).is("li")) { // do something only if the clicked element was a li } 
```

关于关闭不是子元素的元素，而不是做一个全局选择器`$(selector)`，你应该做一个相对于你的初始 dom 节点的选择器。`this`在 jQuery 插件中传递和存储它是一种常见的做法。

`return this.each(function(this)) { var $node = $(this); }`

然后所有的查找都会像

`$node.find(selector).doStuff()`**

# excel - 如何在不转换为 VBA 中的科学记数法的情况下将长数字从 csv 导入 excel

> ID：13732077
> 
> 赞同：20
> 
> 时间：2012-12-05T20:43:59.423
> 
> 标签：excel, vba

我用下面的代码打开了分号分隔的 txt 文件，长帐号在保存到 excel 后显示为科学记数法，无论该列的文本格式如何。

我在这里做错了什么？

```
 Application.ScreenUpdating = False
    Workbooks.OpenText fileName:=Filetxt, Origin:=xlWindows, StartRow _
    :=2, DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, _
    ConsecutiveDelimiter:=False, Tab:=False, Semicolon:=True, Comma:=False, _
    Space:=False, Other:=False, Local:=True, _
    FieldInfo:=Array(Array(1, 4), Array(2, xlTextFormat)
    'Save text file as csv file
    Set wb = ActiveWorkbook
    Application.DisplayAlerts = False
    wb.SaveAs fileName:=fileXls, FileFormat:=6, _
    ReadOnlyRecommended:=False, _
    CreateBackup:=False
    Application.DisplayAlerts = True
    wb.Close savechanges:=True 
```

txt 文件中的记录如下所示：2011-12-21;100,00;"21375000120000010020601764"

当我打开新保存的文件时，我看到 2.117500012E+25 而不是那个数字。这里有什么问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-18T18:24:06.093

我正在将产品导入 excel 文件，条形码会以科学计数法出现（例如 5.4265E+12）

这意味着当我将文件转换为 csv 文件以上传详细信息时，csv 没有正确读取条形码并将它们更改为 52862300000 等。

为了对抗它：

*   以 Excel 表格形式打开（如果无法以表格形式打开，则进行转换）
*   突出显示（条形码/科学记数法）列
*   进入数据/文本到列
*   第 1 页：选中“分隔”/下一页
*   第 2 页：选中 'Tab' 并将 'Text Qualifier' 更改为 " / Next
*   第 3 页：检查“文本”而不​​是“一般”
*   结束

这应该将它们全部转换为长数字。然后您可以将其保存为 CSV 文件，并且这些数字不会被转换/格式化为科学数字。

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T21:24:53.787

在 Excel 中，数字的精度限制为 15 位。您的示例数字太大，Excel 无法准确表示 - 这可能解释了转换为科学记数法的原因。

您应该将该列作为文本而不是数字导入 Excel：那么您将不会丢失任何精度。

编辑：如果您在录制宏时逐步完成“从文本打开”过程，您应该得到如下内容：

```
Workbooks.OpenText Filename:= Filetxt, Origin:=xlWindows, _
        StartRow:=1, DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, _
        ConsecutiveDelimiter:=False, Tab:=False, Semicolon:=True, Comma:=False _
        , Space:=False, Other:=False, FieldInfo:=Array(Array(1, 5), Array(2, 1), _
        Array(3, 2)), TrailingMinusNumbers:=True 
```

该过程中有一个步骤允许您选择每列中的数据类型。

我认为您的“FieldInfo”参数有点偏离：您应该有 3 列，但您已将 col2 标记为文本...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-16T14:43:09.417

不要直接在 Excel 中打开文件，而是使用

`Data --> From Text/CSV`

并使用向导将列的类型指定为文本。

在数据类型检测下拉框中，选择`Do not detect data types`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-18T22:24:13.830

在数字前插入撇号。这会强制 Excel 显示整数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-31T10:14:44.780

我的系统是 mac os X El Capitan ，当我将数据从 html 表复制到 Excel 时，当我将“单元格格式”更改为文本时，数字总是自动转换为 1.10101E+17 等，数字不正确。

我的决心是：

1.  打开 Mac os 软件“Numbers”并创建一个新选项卡
2.  将数据复制到选项卡，您将看到正确的数字
3.  打开 Microsoft excel 将数字列“单元格格式”更改为文本
4.  从数字选项卡复制数据；
5.  右键单击“可选粘贴”选择文本并确定。

我不知道为什么，但它对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-22T16:52:23.283

我有一个适用于我的解决方案，其中包含分隔的文本文件制表符。

在记事本等中打开文本文件。

使用 Ctrl-A 和 Ctrl-C 然后 Ctrl-V 将文本文件复制到空白表中。

注意所有看起来科学的列。

然后 Ctrl-Z（撤消）。您现在应该有一个空白工作表。

突出显示您之前记下的所有列（Ctrl-单击每个列标题）。

将格式更改为文本

单击第一个单元格，然后再次单击 Ctrl-V。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-28T13:27:48.487

选择应该更改格式的单元格：

```
'Example:
Columns("A:E").Select
Selection.NumberFormat = "0.00" 
Selection.NumberFormat = "0.0"
Selection.NumberFormat = "0"

'The exponential or scientific notation will be converted 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-13T15:53:03.623

看起来您正在使用文本文件作为输入。脚步：

> 1.  转到单元格 A1
> 2.  文件 -> 打开 -> 选择 .txt 文件 -> 打开
> 3.  文本导入向导将打开。根据您的输入文件格式执行步骤 1 和 2。对于第三步，请执行以下操作：
> 4.  在您的情况下，使用鼠标选择让您头疼的、长帐号的列。在“列数据格式”下选择“文本”单选按钮，然后单击完成。

你会很高兴的。

# c++ - 来自数据库 Qt 的值的实时提要

> ID：13732078
> 
> 赞同：0
> 
> 时间：2012-12-05T20:44:10.763
> 
> 标签：c++, database, qt, feed, live

我正在 Qt 上编写一个应用程序，该应用程序使用 QSqlQueryModel 调用查询以检索插入数据库中的最后一个值并将行中的时间戳与检查的前一个值进行比较，从而不断检查某些表上的数据更改。我每 100 毫秒使用一个计时器检查一次，该计时器调用一个方法，该方法发出一个信号，告知数据是否已更改。但是，这会在处理器上产生巨大的负载，有时会导致计算机无法使用，直到我关闭应用程序。我只是在测试平台的性能，因为我需要在同一个数据库和应用程序中的许多其他表中实现它，以便在与每个表相关的一种“实时”提要上显示值。我已经阅读了有关 Threads 的信息，但还没有真正了解如何实现它。还有另一种方法吗？你会推荐我什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:24:38.967

我的猜测是您的查询需要超过 100 毫秒的时间才能执行，因此您基本上是在使用查询重载数据库，将它们堆叠在一起，而之前的查询还没有完成。

不要使用 QTimer 中的重新启动计时器，**而是**使用单次计时器。只有在您的槽中完成查询后才重新启动计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:21:16.180

我改变了我的方法并切换到不同的数据库服务器，我现在使用 postgresql 使用触发器，如下所示：

```
CREATE FUNCTION notification_trigger() RETURNS trigger AS $$

DECLARE

BEGIN
 execute 'NOTIFY ' || TG_RELNAME || '_' || TG_OP;
 return new;
END;

$$ LANGUAGE plpgsql; 
```

然后像这样调用触发器：

```
CREATE TRIGGER sometable_trigger BEFORE insert or update or delete on table1 
execute procedure notification_trigger(); 
```

希望它可以帮助某人。

# iphone - 如果 iOS 6 [这样做] 否则 iOS 5 [这样做]？- UIActivityViewController

> ID：13732079
> 
> 赞同：5
> 
> 时间：2012-12-05T20:44:12.343
> 
> 标签：iphone, objective-c, ios, xcode, uiactivityviewcontroller

我有一个**UIActivityViewController**在 Facebook/Twitter/Email 上共享文本和图像，但它只适用于 iOS 6+ .. 是否可以选择设备上运行的 iOS 版本并执行 IF 语句以避免崩溃iOS 5 ? 如果是 iOS6，请执行以下代码，否则执行其他操作...？

```
-(void)shareMenu
{
    NSString *textToShare = @"Text that will be shared";
    UIImage *imageToShare = [UIImage imageNamed:@"share_picture.png"];
    NSArray *itemsToShare = [[NSArray alloc] initWithObjects:textToShare, imageToShare, nil];
    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:itemsToShare applicationActivities:nil];
    activityVC.excludedActivityTypes = [[NSArray alloc] initWithObjects: UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact, UIActivityTypeSaveToCameraRoll, UIActivityTypeMessage, UIActivityTypePostToWeibo, nil];
    [self presentViewController:activityVC animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-05T20:47:29.230

```
if( [UIActivityViewController class] ) {
     NSString *textToShare = @"Text that will be shared";
    UIImage *imageToShare = [UIImage imageNamed:@"share_picture.png"];
    NSArray *itemsToShare = [[NSArray alloc] initWithObjects:textToShare, imageToShare, nil];
    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:itemsToShare applicationActivities:nil];
    activityVC.excludedActivityTypes = [[NSArray alloc] initWithObjects: UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact, UIActivityTypeSaveToCameraRoll, UIActivityTypeMessage, UIActivityTypePostToWeibo, nil];
    [self presentViewController:activityVC animated:YES completion:nil];
} 
```

或者更好的使用

```
if( NSClassFromString (@"UIActivityViewController") ) {

} 
```

读[这个](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Using/using.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T20:48:16.020

有几种方法可以做到这一点，但最简单的可能是测试这个类的存在，例如

```
if ([UIActivityViewController class])
  //iOS 6+
else 
  // < iOS 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:48:01.360

您应该考虑使用[`[[UIDevice currentDevice] systemVersion]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instp/UIDevice/systemVersion)它将为当前操作系统返回一个字符串。您可以轻松编写宏来查看版本是否至少为指定数字。

# java - 向 gridBag 布局中的组件添加垂直距离

> ID：13732086
> 
> 赞同：0
> 
> 时间：2012-12-05T20:44:28.720
> 
> 标签：java, swing, layout, gridbaglayout, insets

我在 gridbagLayout 中添加了四个组件。我想在它们之间添加垂直距离如何添加垂直距离？组件是

datfeild (Jlabel) billno (JTextFEILD) 日期 (JTextField) 搜索 JBUTTOn) 删除 (JBUTTOn)

我尝试让 widthy=1.0; 但没有得到。请帮帮我。。谢谢。。

```
enter code here

     b()
{
    GridBagLayout gridBag = new GridBagLayout();
    GridBagConstraints gbc = new GridBagConstraints();
    this.setLayout(gridBag);
    panel.setLayout(gridBag);

    JButton search=new JButton();
    JButton delete=new JButton();

    JLabel dateFieldLabel = new JLabel("Date Field");
    JTextField thingNameField = new JTextField("Billno");
    JTextField thingdateField = new JTextField("Date");

gbc.gridx = 0;
gbc.gridy = 0;
this.add(new JScrollPane(table),gbc);

gbc.gridx = 0;
gbc.gridy = 1;
gbc.insets = new Insets(2,2,2,2);
gbc.fill = GridBagConstraints.BOTH; 
gbc.weightx = 1.0; 
gbc.weighty = 1.0;

panel.add(dateFieldLabel,  gbc);

gbc.gridx = 0;
gbc.gridy = 2;  
gbc.insets = new Insets(2,2,2,2);
gbc.fill = GridBagConstraints.BOTH; 
gbc.gridwidth = 2;
gbc.fill = GridBagConstraints.HORIZONTAL; 
gbc.weightx = 0.0; 
gbc.weighty = 0.0;
panel.add(thingNameField,  gbc);        

gbc.gridx = 0;
gbc.gridy = 3;
gbc.insets = new Insets(2,2,2,2);
gbc.fill = GridBagConstraints.BOTH; 
gbc.weightx = 0.0; 
gbc.weighty = 1.0;
gbc.gridwidth = 2;
gbc.fill = GridBagConstraints.HORIZONTAL; 
panel.add(thingdateField,  gbc);

gbc.gridx = 0;
gbc.gridy = 4;
gbc.gridwidth = 1;
gbc.fill = GridBagConstraints.BOTH; 
gbc.fill = GridBagConstraints.NONE; 
gbc.weightx = 1.0; 
gbc.weighty = 1.0;

gbc.insets = new Insets(2,2,2,2);
panel.add(search,  gbc);

gbc.gridx = 1;
gbc.gridy = 4;  
gbc.gridwidth = 1;
gbc.fill = GridBagConstraints.BOTH; 
gbc.fill = GridBagConstraints.NONE; 
gbc.weightx = 1.0; 
gbc.weighty = 1.0;
gbc.insets = new Insets(2,2,2,2);
panel.add(delete,  gbc);
gbc.anchor = GridBagConstraints.NORTHEAST;

this.add(panel);

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:59:05.440

有类`GridBagConstraints`有字段`insets`。这允许设置组件插图：

```
Component c = ...
GridBagLayout gbl = ...
Container container = new JPanel(gbl);
GridBagConstraints gbc = gbl.getConstraints(c);
gbc.insets = new Insets(....);

container.add(c, gbc); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T20:59:43.940

你的答案就在你的眼皮底下：使用`Insets`：

```
gbc.insets = new Insets(2,2,2,2); 
```

可能成为

```
gbc.insets = new Insets(12,2,12,2); 
```

# android - 安卓换壁纸

> ID：13732092
> 
> 赞同：2
> 
> 时间：2012-12-05T20:44:59.647
> 
> 标签：android, android-4.0-ice-cream-sandwich, wallpaper

我正在尝试通过以下代码更改我使用 1280x1440 jpeg 图像的 Galaxy sIII（ICS os）设备上的壁纸：

```
<uses-permission android:name="android.permission.SET_WALLPAPER"/>

....

Bitmap m = BitmapFactory.decodeByteArray(data, 0, data.length);
WallpaperManager.getInstance(this).setBitmap(m); 
```

这不起作用，并且以下也不起作用：

```
Bitmap m = BitmapFactory.decodeResource(getResources(), R.drawable.data_img);
WallpaperManager.getInstance(this).setBitmap(m); 
```

但是当我使用这个时：

```
WallpaperManager.getInstance(this).setResource(data_img); 
```

它工作得很好，但我的情况是下载一些图像数据，将其保存为位图，然后将其设置为墙纸。所以在我的情况下加载资源不起作用。

任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T21:06:20.487

[您可以在此处](http://developer.android.com/reference/android/app/WallpaperManager.html#setStream%28java.io.InputStream%29)找到文档。

你必须使用`public void setStream (InputStream data)`方法：

```
InputStream ins = new URL("absolute/path/of/image").openStream();
WallpaperManager wpm = WallpaperManager.getInstance(context);
wpm.setStream(ins); 
```

或者，如果您有图像 URI，则使用：

```
WallpaperManager wpm = WallpaperManager.getInstance(context);
wpm.setResource(Uri.of.image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T09:40:28.220

感谢@Tudor Luca，它工作正常..

```
ins = new URL("file://"+Environment.getExternalStorageDirectory()+"/gst/chhota.jpg").openStream();
WallpaperManager wpm = WallpaperManager.getInstance(getBaseContext());
wpm.setStream(ins); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T07:58:55.667

尝试这个...

```
 private static boolean connectToNewWifiConfig(final WifiConfiguration wc, Context context)
    {
        wifi = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
        boolean success = false;
        final int actNetId = wifi.getConnectionInfo().getNetworkId();
        WifiInfo wifiInfo = wifi.getConnectionInfo();
        String prevNetworkSSID = wifiInfo.getSSID();
        int netId = wifi.addNetwork(wc);
        if (netId != ApplicationConstants.INVALID_NETWORK_ID)
        {
            success = wifi.saveConfiguration();
        }
        return success;
    } 
```

它对我有用，确保你通过正确的 wificonfiguration，wificonfiguration 将包含

```
wifiConfig = new WifiConfiguration();
        wifiConfig.SSID = "\"".concat(networkSSID).concat("\"");
        wifiConfig.status = WifiConfiguration.Status.ENABLED;
        wifiConfig.hiddenSSID = true;
        wifiConfig.priority = 40; 
```

# c# - C#：使用附加进程进行调试时，Visual Studio 看不到程序集 DLL

> ID：13732095
> 
> 赞同：0
> 
> 时间：2012-12-05T20:45:03.360
> 
> 标签：c#, visual-studio-2010, dll, .net-assembly, windows-media-center

我正在使用 Visual Studio 2010 Professional、C#、Windows Media Center SDK 6.0 和 NET Framework 2.0 开发适用于 Windows Media Center 的插件。

我能够为应用程序创建一个安装程序（使用 WiX 安装程序），它可以很好地将应用程序插入 WMC。

但是，我希望通过使用 VS 中的“附加进程”功能来调试应用程序，通过在 WMC 中打开插件来显示我的即时更改（非常酷的功能）。当我单击开始调试时，应用程序已打开。但是，我的更改不存在，并且在 VS 中显示以下错误：

> “以下模块是在启用优化或没有调试信息的情况下构建的：
> 
> C:\Windows\assembly\GAC_MSIL\UltraPlaylists\1.0.0.0__d56c5e467dd76093\MyProject.dll
> 
> 要调试此模块，请将其项目配置更改为调试模式。要禁止显示此消息，请禁用 'Warn if no user code on launch' 调试器选项。”

[遵循这些说明（ MSDN 指南](http://msdn.microsoft.com/en-us/library/windows/desktop/bb189051.aspx)）时，我注意到的一件事是，在第 6 步中，我应该“找到代表您的应用程序程序集的 DLL，右键单击它，然后选择符号设置”。

但是，我在 DLL 列表中看不到这个应用程序程序集。我相信这可能是我收到较早消息的原因。

# git - heroku - 选择环境来运行迁移？

> ID：13732101
> 
> 赞同：0
> 
> 时间：2012-12-05T20:45:55.030
> 
> 标签：git, heroku, github

我在 heroku 中建立了一个 QA 区域。

对于我的常规区域，对于我使用的迁移：

```
heroku run rake db:migrate 
```

我的 QA 服务器用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:45:55.030

答案是运行以​​下命令，指定应用程序的 qa 版本

```
heroku run rake db:migrate --app dmplanning-qa 
```

# css - Joomla模块中字段集的自定义类

> ID：13732103
> 
> 赞同：0
> 
> 时间：2012-12-05T20:45:55.677
> 
> 标签：css, joomla, content-management-system, fieldset

我正在创建一个新模块，我需要/想要将自定义 CSS 或 ID 添加到整个字段集，这可能吗？如何？

我的代码是：

```
<config>
    <fields name="params">
        <fieldset  name="mymodule" > 
```

我必须做什么才能拥有自定义 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:34:48.803

在 default.php（tmpl 中的默认视图）中调用字段集时，可以使用要应用于字段的任何类。Ex 在循环字段集时在每一行中使用：

```
<div class="tab-pane active" id="details">
<?php foreach ($this->form->getFieldset('details') as $field): ?>
    <div class="control-group YOURCLASS_FIELDSET_HERE">
        <div class="control-label">
        <?php echo $field->label; ?>
        </div>
        <div class="controls">
            <?php echo $field->input; ?>
        </div>
    </div>
<?php endforeach; ?>
</div> 
```

# excel - Excel 中的 Applescript 查找一个值，然后在同一行中查找另一个值

> ID：13732108
> 
> 赞同：1
> 
> 时间：2012-12-05T20:46:06.533
> 
> 标签：excel, find, applescript, lookup

这听起来很简单（我敢肯定），但我无法弄清楚如何做到这一点：我在 excel 的表格中有数据 - 假设有两列：A 列包含 ID，B 列包含电子邮件地址。

我正在寻找一个 Applescript，它将打开数据库文件并在其中一列中查找 ID，但返回第二列的值供我稍后在脚本的其余部分中使用。

这是我迄今为止所拥有的：

```
set theFile to POSIX path of (choose file with prompt "Choose File to Operate on")
tell application "Microsoft Excel"
activate
open theFile
set searchRange to range ("A1:D2")
try
    set foundRange to find searchRange what "ID1" with match case
    (* do something with the foundRange *)
on error -- not found
    (* do error handling *)
end try
end tell 
```

不知道如何获取第二列并将该值返回给 ie。设置为IDEmail？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:06:44.277

尝试：

```
tell application "Microsoft Excel"
    set searchRange to range ("A1:A5")
    set foundRange to find searchRange what "ID3" with match case
    set fRow to first row index of foundRange
    set myData to value of range ("B" & fRow as text)
    (* do something with the foundRange *)
end tell 
```

![在此处输入图像描述](../Images/9d8b31f150b9eae9137819ded6dafb58.png)

# javascript - 如何应用 jQuery UI 主题？

> ID：13732110
> 
> 赞同：8
> 
> 时间：2012-12-05T20:46:19.840
> 
> 标签：javascript, jquery, jquery-ui

这是一个总的 n00b 问题。我正在尝试使用 JQuery UI，但 JQuery CSS 似乎对我的 HTML 文件没有任何影响。

以下是我采取的步骤：1）选择一个主题并包含一个链接（我尝试了远程和本地）

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-darkness/jquery-ui.css" type="text/css" rel="stylesheet" > 
```

2）为按钮设置一个类以使用主题：

```
<button class="ui-button" id='button 1'>hello world</button> 
```

在这个时间点上，我认为这就是它所需要的一切。我通读了一些教程，他们都认为所有主题都是开箱即用的，主要集中在调整它们上。

入门的最低要求是什么？

最终的 HTML 文档：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery demo</title>

    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-darkness/jquery-ui.css" type="text/css" rel="stylesheet" >

    <style>
        a.test { font-weight: bold; }
    </style>

</head>
<body>
<a href="http://jquery.com/">jQuery</a>
<button class="ui-button" id='button 1'>hello world</button>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script>
    $(document).ready(function(){
    });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T20:48:34.110

您已经加载了 jQuery 脚本，但没有加载 jQuery-UI 脚本。（除了 jQuery 本身之外，jQuery-UI 还需要 CSS 和 JS 文件。）

`<script>`将您的标签更改为：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script>
    $(document).ready(function(){
});
</script> 
```

# android - ActionbarSherlock 的“刷新”图标

> ID：13732112
> 
> 赞同：1
> 
> 时间：2012-12-05T20:46:29.877
> 
> 标签：android, image, actionbarsherlock

我正在尝试使用 Jake 的精彩图书馆；ActionbarSherlock(ABS) 4.2 版。我需要使用操作栏中的刷新图标来刷新 SherlockListFragment 的内容。

我的代码是正确的，但我找不到刷新按钮的正确图标。*“搜索”*和其他图标直接内置在 ABS 中。例如`.setIcon(R.drawable.abs_ic_search)`.

我尝试并从谷歌图片下载了一些，但他们有一些或其他问题，比如这个有白色背景。

![在此处输入图像描述](../Images/95005df23abcc27fc5b54fe6507369ec.png)

**我的问题**

如何获取可在带有 Actionbar Sherlock 的 Actionbar 中使用的*“刷新”图标？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:48:59.460

是的，它们可以在[Android 开发者网站上](http://developer.android.com/design/downloads/index.html)的 Action Bar Icon Pack 中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T21:00:47.683

我有类似的问题。我为此使用了 Android Asset Studio。这是[链接](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-actionbar.html#source.type=clipart&source.space.trim=0&source.space.pad=0&source.clipart=res/clipart/icons/navigation_refresh.svg&name=refresh&theme=light)。

基本上它有助于创建自己的图标。他们还拥有常用的操作栏图标。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T21:36:31.610

Eric 是对的，但您不必再次下载它。您可以在您的 PC 上找到所有 android sdk 的图标（如果是窗口）：

android-sdk\platforms\android-"版本"\data\res\drawable-"DPI"

刷新图标的名称是“ic_menu_refresh.png”

# centos - centos 6.2 grub 失败，黑屏，光标闪烁，但在手动输入引导命令行时工作

> ID：13732113
> 
> 赞同：-2
> 
> 时间：2012-12-05T20:46:29.423
> 
> 标签：centos, boot, grub

在 $work，我们有一个 CentOS 6.2 的自定义安装（一个预先准备好的图像，带有一组减少的软件包）。

正常的 CentOS 6.2 安装工作正常。

自定义的启动失败如下：

*   grub 启动并显示定义的引导选项
*   如果我们让它继续并尝试启动，它会给出“带有闪烁光标的黑屏”，这是找不到内核的症状
*   如果我们进入 grub 命令行并手动输入与从 grub.conf 加载的 grub 完全相同的引导命令，机器就会成功引导。

我的 google-foo 在这里失败了，有人有建议或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:30:20.710

initrd 实际上是 CentOS6 中的*initramfs*而不是*initrd*（如在 CentOS5 中），因此它永远不会找到要引导的 initrd。

# android - Android上的图像包解码

> ID：13732114
> 
> 赞同：0
> 
> 时间：2012-12-05T20:46:33.977
> 
> 标签：android, bitmap, png, decoding, clickatell

我正在尝试通过 Clickatell api 请求验证码并在我的活动中显示图像。我设法获得包含图像的 xml 响应，但我无法正确解码它以显示它（创建的位图始终为空）。

xml响应：

```
<ClICKATELLSDK>
<Action>get_captcha</Action>
<Result>Success</Result>
<Values>
<Value>
<captcha_id>c202a3fc98c50a5f8dccc8540077614e</captcha_id>
<captcha_image>%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%AF%00%00%00-%08%02%00%00%00W%88%AC%F1%00%00%12%1AIDATx%9C%ED%5CyxTU%B2%AFs%97%5E%93%EE%A4%B3%27%84l%24%21%40X%24%A8%04%81%A8++%22H%40% B8l%2C%E7%60%3D%14%27%831%D2%C5Z%E2Fu%08%3Cm3%A9%DB%EB%A2%2C% D2FsZ%83H%2B%7B%13s%0Du%87%D4%A6%F3DE%0E%5Db%7B.a%FFZ%D7T%1E% %06%94%96%89%F4%91%00%D0%9D2%85%1E%1B%FA%01%8A%AB+%E0%FF%00%CDSh%D94%F1%00%D8%00%00%00%00IEND%AEB%60%82
</captcha_image>
<Value>
</Values>
<Timestamp>1316511558</Timestamp>
</ClICKATELLSDK> 
```

我解析这个 xml 并将验证码图像保存到一个字符串中，我在这段代码中使用它来创建位图：

```
captchaImage = <captcha_image from xml>
byte[] encodeByte = Base64.decode(captchaImage, Base64.DEFAULT);
Bitmap bitmap = BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:47:13.630

首先，我认为上面粘贴的 Url 编码值已损坏。在 url 编码中，十六进制表示必须在`%`字符之后。但是有这样的部分：`%1E% %06`

您可以使用此 TextUtil 类对字节数组进行编码/解码！

```
String xmlValue = <your xml captcha value>
byte[] decoded = TextUtil.urlDecode(xmlValue.getBytes("UTF-8"));

public final class TextUtil {
static final String HEX_DIGITS = "0123456789ABCDEF";

protected static String urlEncode(byte[] rs) {
    StringBuffer result = new StringBuffer(rs.length * 2);

    for (int i = 0; i < rs.length; i++) {
        char c = (char) rs[i];

        switch (c) {
        case '_':
        case '.':
        case '*':
        case '-':
        case '/':
            result.append(c);
            break;

        case ' ':
            result.append('+');
            break;

        default:
            if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c >= '0' && c <= '9')) {
                result.append(c);
            } else {
                result.append('%');
                result.append(HEX_DIGITS.charAt((c & 0xF0) >> 4));
                result.append(HEX_DIGITS.charAt(c & 0x0F));
            }
        }

    } 

    return result.toString();
}

protected static byte[] urlDecode(byte[] bytes) throws UnsupportedEncodingException,
        IllegalArgumentException {
    if (bytes == null) {
        return null;
    }

    byte[] decodeBytes = new byte[bytes.length];
    int decodedByteCount = 0;

    try {
        for (int count = 0; count < bytes.length; count++) {
            switch (bytes[count]) {
            case '+':
                decodeBytes[decodedByteCount++] = (byte) ' ';
                break;

            case '%':
                decodeBytes[decodedByteCount++] = (byte) ((HEX_DIGITS.indexOf(bytes[++count]) << 4) + (HEX_DIGITS
                        .indexOf(bytes[++count])));

                break;

            default:
                decodeBytes[decodedByteCount++] = bytes[count];
            }
        }

    } catch (IndexOutOfBoundsException ae) {
        throw new IllegalArgumentException("Malformed encoding");
    }

    return decodeBytes;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:54:51.857

很多`%`表明您的图像是 Url 编码的。Base-64 只使用字母和数字。

Android 中的 url-decode 方法之一是`Uri.decode(String)`生成`String`. A`String`可以变成`byte[]`通孔`String#getBytes()`。

所以以下可以工作

```
String captchaImage = <captcha_image from xml>;
String decodedString = Uri.decode(captchaImage);
byte[] decodedBytes = decodedString.getBytes("UTF-8");
Bitmap bitmap = BitmapFactory.decodeByteArray(decodedBytes, 0, decodedBytes.length); 
```

还有[java.net.URLDecoder](http://developer.android.com/reference/java/net/URLDecoder.html)也可以让你指定字符集。

# java - Java switch 语句默认放置的效率

> ID：13732119
> 
> 赞同：2
> 
> 时间：2012-12-05T20:46:49.093
> 
> 标签：java, switch-statement

在 Java 中放置 default 语句会影响效率吗？有没有区别：

```
switch (a) {
case 0: return 0;
case 1: default: return -1;
case 2: return 2
...
case 99: return 99;
} 
```

对比

```
switch (a) {
case 0: return 0;
case 1: return -1;
case 2: return 2;
...
case 99: return 99;
default: return -1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:49:13.253

即使在最幼稚的实现中，这也不会产生性能差异，但是对于 Java，您与实际的机器代码相去甚远，这将变成您绝对不应该尝试优化此代码或任何其他类似代码。事实上，即使你编写了最愚蠢的`else-if`s 级联，你*仍然*有很大的机会将 JIT 变成一个超快的基于哈希查找的机器代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T20:52:08.803

不，这不会有什么不同。为什么？因为这个：JVM什么时候知道它必须使用`default`body？在它检查了所有其他情况之后。因此，放置`default:`在特定位置不会改变性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:51:03.007

如果您编写了一个快速测试程序，我认为您不会看到任何显着的性能改进。至少没有一个可以证明掩盖您的代码是合理的。我只是将默认大小写整齐地放在列表的最后，以使代码更具可读性。它可能比性能的微小改进更重要（如果有的话）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T20:52:15.183

不会。switch 语句的位置对生成的字节码没有影响，除了调试注释。

# jquery - Jquery滚动效果减慢它被点击的次数越多

> ID：13732120
> 
> 赞同：-1
> 
> 时间：2012-12-05T20:46:51.350
> 
> 标签：jquery, css, dom

我正在尝试创建一个框，通过单击向上或向下箭头来向上和向下滚动项目列表，但是我单击向上或向下箭头的次数越多，速度也不是很快，它只会越来越慢地降低滚动的响应速度动画 我已经阅读了一些关于它被递归调用的内容，我认为这会增加滚动效果的响应性。我希望有些人可以查看我的 jquery 并给我一些提高性能的提示。

```
 $(window).load(function () {
        $("#ScrollUp_Wrapper").mouseenter(function () {
            $("#ScrollUp_Button").fadeIn("fast", function () {
                $(this).css("filter", "progid:DXImageTransform.Microsoft.gradient(startColorstr='#F2F2F2', endColorstr='#E5E5E5')"),
                $(this).css("background", "-webkit-gradient(linear, left top, left bottom, from(#F2F2F2), to(#E5E5E5))"),
                $(this).css("background", "-moz-linear-gradient(top,  #F2F2F2 , #E5E5E5)")
                $("#ScrollUp_Button").mouseup(function () {
                    $("#AllPost_leftcol").animate({ scrollTop: $("#AllPost_leftcol").scrollTop() - 200 }, 500);
                        });
                });
            }).mouseleave(function () {$("#ScrollUp_Button").fadeOut("fast");});

        $("#ScrollDown_Wrapper").mouseenter(function () {
            $("#ScrollDown_Button").fadeIn("fast", function () {
                    $(this).css("filter", "progid:DXImageTransform.Microsoft.gradient(startColorstr='#F2F2F2', endColorstr='#E5E5E5')"),
                    $(this).css("background", "-webkit-gradient(linear, left top, left bottom, from(#F2F2F2), to(#E5E5E5))"),
                    $(this).css("background", "-moz-linear-gradient(top,  #F2F2F2 , #E5E5E5)")
                    $("#ScrollDown_Button").mouseup(function () {
                        $("#AllPost_leftcol").animate({ scrollTop: $("#AllPost_leftcol").scrollTop() + 200 }, 500);
                    });
                   });
            }).mouseleave(function () {$("#ScrollDown_Button").fadeOut("fast");
        });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:00:02.713

用这个：

```
$("#ScrollUp_Button").off('mouseup').mouseup(function () {...} 
```

ScrollDown 按钮也是如此。

在您的原始代码中，每次鼠标进入包装器时，您都在为各个按钮处理一个新的单击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:02:25.023

尝试在每个下一个动画步骤排队之前调用[$.stop() ：](http://docs.jquery.com/Effects/stop#clearQueuegotoEnd)

```
$("#ScrollUp_Button").stop(true, true).fadeIn("fast", function () {
...
$("#AllPost_leftcol").stop(true, true).animate({ scrollTop: $("#AllPost_leftcol").scrollTop() - 200 }, 500);
...
$("#ScrollUp_Button").stop(true, true).fadeOut("fast");
... 
```

# ruby-on-rails - RoR - 用于分类数据的类矩阵图表

> ID：13732121
> 
> 赞同：0
> 
> 时间：2012-12-05T20:46:54.333
> 
> 标签：ruby-on-rails, plot

我想绘制一些数据，其中 y 轴代表汽车，x 轴代表某个属性，现在每辆车，某个属性可以采用三个值之一（是，否，平均值），所以类似于这个：

```
 C1 | yes | no | average | no
              C2 | no  | no | yes     | yes
              C3 | yes | yes| no      | average
                 | P1  | P2 | P3      | P4 
```

有没有我可以用来做类似事情的工具？我通常使用 highcharts 来绘制图表.. 但我不认为 highcharts 能够绘制类似的东西..

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:40:29.520

我没有亲自使用它，但搜索“rails pivot table gem”产生了这个页面，其中包括：http: [//itshouldbeuseful.wordpress.com/2011/10/31/easy-grid-tables-and-forms -使用数据透视表/](http://itshouldbeuseful.wordpress.com/2011/10/31/easy-grid-tables-and-forms-using-pivot_table/)

您还可以搜索`crosstab`

# c++ - 带反射键的双边滤光片

> ID：13732122
> 
> 赞同：0
> 
> 时间：2012-12-05T20:47:01.477
> 
> 标签：c++

我得到了我得到负值的问题。我认为问题属于为反射条件重新计算的新 i,j 值。这里是代码：第一部分已经实现，只有以 todo 开头的部分必须完成。

```
#include <math.h>
#include <stdio.h>
#include "BilateralFilter.h"

/* Constructor creates an Bilateral filter.
* sigma is the standard deviation of the spatial weight and
* delta is the standard deviation of the grayvalue differences weight. */
BilateralFilter::BilateralFilter( const double sigma, const double delta )
{
m_Sigma = sigma;
m_Delta = delta;
}
/* Destructor (does nothing) */
BilateralFilter::~BilateralFilter()
{
}

/* Internal Method to compute the Gaussian weights
 * depending on sigma (or delta) and x.
 * The return value is G(sigma,x)=exp(-(x*x)/2*sigma*sigma).
 *
 * The factor  1/(sigma*sqrt(2*pi)) of the Gaussian distribution is
 * constant and therefore not necessary to compute. */
 double BilateralFilter::Gaussian( const double sigma, const double x )
 {
 //printf("wert: %f\n",exp( -(x * x) / (2 * sigma * sigma) ) );
 return exp( -(x * x) / (2 * sigma * sigma) );

 }

/* Execute the bilateral filter. */
bool BilateralFilter::Execute()
{
// First, create a valid output image
// This fails if no valid input image is available.
if( !CreateOutputImage() )
return false;

// Define some often used constant variables to speed up the computation.
const int imageSizeX = m_InputImage->GetSizeX();
const int imageSizeY = m_InputImage->GetSizeY();

// The half size of the mask is defined as three times the
// standard deviation of the spatial Gaussian function.
const int filterHalfSizeX = static_cast<int>( 3 * m_Sigma );
const int filterHalfSizeY = static_cast<int>( 3 * m_Sigma );

/*
 * TODO: Aufgabe 2: Vervollstaendigen Sie die Implementierung des BilateralFilter.
 * Fuer die genaue Definition des Filters beachten sie das Aufgabenblatt und die Folien
 * zur Uebung.
 * Die Schleifen zur Iteration ueber die Bildpixel und die Nachbarschaften, sowie die
 * Ueberpruefung der Randbedingungen sind bereits vorgegeben.
 *
 * Sie muessen folgende Werte berechnen, um den Bilateralen Filter zu implementieren.
 * Der Punkt p ist dabei der aktuelle Zentrums-Pixel und q ein Punkt in der
 * Nachbarschaft von p.
 *
 * Die (Gauss-)Gewichtung des euklidischen Abstandes der Punkte p und q:
 *
 *     G_sigma(||p-q||)
 *
 * Die (Gauss-)Gewichtung der Differenz der Grauwerte im Eingangsbild an den Punkten   p    und q:
 *
 *     G_delta(I(p)-I(q))
 *
 * Den Normalisierungsfaktor als Summe des Produkts dieser Gewichtungen ueber alle Nachbarpunkte q:
 *
 *   W = Sum_{q in N} G_sigma(||p-q||)*G_delta(I(p)-I(q))
 *
 * Die Summe der gewichteten Grauwerte in der Nachbarschaft:
 *
 *   Sum_{q in N} G_sigma(||p-q||)*G_delta(I(p)-I(q))I(q)
 *
 * Hinweis 1: Verwenden Sie moeglichst double-Werte bei Ihren Berechnungen und casten Sie erst das
 * fertig berechnete Ergebnis auf den Typ Image::PixelType um Typfehler zu vermeiden.
 * Hinweis 2: Verwenden Sie die interne Methode Gaussian() um G_sigma bzw. G_delta zu berechnen. Uebergeben
 * Sie dabei das korrekte sigma/delta!
 * Hinweis 3: Vergessen sie nicht die Normalisierung 1/W !
 */

 // Iterate over all pixels.
 for(  int y = 0; y < imageSizeY; y++ )
 {
for( int x = 0; x < imageSizeX; x++ )
{
  // The coordinates of point p are given by (x,y).

  // Get the value of the center pixel.
  double centerValue = m_InputImage->GetPixel( x, y );

  // Variable to accumulate weighted greyvalues.
  double sumValue = 0;

  // Variable für gewichtete Gaußwerte-Abstand
  double G_sigma = 0;

  // Variable für gewichtete Grauwerte
  double G_delta = 0;
  double ende = 0;

  // Variable to accumulate weights for normalization.
  double sumCoeffcients = 0;

  // Iterate over all points in a neighborhood of p.
  for( int m = -filterHalfSizeY; m <= filterHalfSizeY; m++ )
  {
    // Calculate the y-coordinate of the current pixel.
    int j = y + m;

    // Apply reflecting boundary conditions on the current y-coordinate.
    if( j < 0 )
    {
      j = -j - 1;
    }
    else if( j >= imageSizeY )
    {
      j = 2 * imageSizeY - j - 1;
    }

    for( int k = -filterHalfSizeX; k <= filterHalfSizeX; k++ )
    {
      // Calculate the x-coordinate of the current neighbor pixel.
      int i = x + k;

      // Apply reflecting boundary conditions on the current x-coordinate.
      if( i < 0 )
      {
        i = -i - 1;
      }
      else if( i >= imageSizeX )
      {
        i = 2 * imageSizeX - i - 1;
      }

      // TODO The coordinates of the point q in a neighborhood of p are
      // now given by  (i,j). Mind that on the coordinates (i,j) the
      // boundary conditions have already been applied. The distance
      // ||(x,y)-(i,j)|| therefore differs from ||(x,y)-(x+k,y+m)||
      // near the boundary.

      //Berechnung G_sigma

      G_sigma = Gaussian(m_Sigma, sqrt(static_cast<double>(((x-i)*(x-i))+((y-j)*(y-j)))));
      //printf("m_Sigma: %f\nGauss: %f\n", m_Sigma, Gaussian(m_Sigma,x));

      // Berechnung G_delta

      G_delta = Gaussian(m_Delta, abs((centerValue-m_InputImage->GetPixel(i,j))));

      // Normalisierungsfaktor W

      sumCoeffcients += (G_sigma * G_delta);
      //printf("hallo: %f\n", sumCoeffcients);

      // Gesamtsumme

      sumValue += sumCoeffcients * m_InputImage->GetPixel(i,j);
      ende =(1/sumCoeffcients)*sumValue;
     //printf("i: %d\nj: %d\nsumme: %f\nsumvalue: %f\nG_sigma: %f\nG_delta: %f\n", i, j, sumCoeffcients, sumValue, G_sigma, G_delta);
    }
  }
  // TODO Set the pixel of the output image. Remember to cast the double
  // values to Image::PixelType, e.g. by static_cast<double>( value ).
  m_OutputImage->SetPixel(x,y,static_cast<Image::PixelType>(ende));
  printf("grauwert: %d\n", ende);
}
}

return true;
} 
```

# privacy - 登录/忘记密码错误的最佳实践？

> ID：13732123
> 
> 赞同：1
> 
> 时间：2012-12-05T20:47:12.940
> 
> 标签：privacy, forgot-password

没有代码问题，而是应用程序设计问题。如果用户尝试登录 Web 应用程序并提供未知的用户名（或电子邮件），通常的做法是报告“未知的用户名/密码组合”或类似的内容。IE 对于用户的姓名或密码是否错误是模棱两可的。

对于“忘记密码”页面，通常会看到对用户可用于重置密码的电子邮件地址的请求。如果用户再次输入未知的电子邮件地址，是显示成功页面（可能会混淆用户）还是显示错误页面（可能显示用户已注册该应用程序）更好。如果我显示错误消息，感觉就像是隐私问题，但非常小。

当我忘记我最近重置了我的数据库时，我个人只是在我的开发服务器上受到了这个影响。我无法弄清楚为什么我的重置密码电子邮件没有通过。直到我终于`select *`在我的用户表上做了一个，我才意识到我在技术上甚至没有注册。

# c# - C# 应用程序将自动将图像拖入 Gmail 的撰写框

> ID：13732124
> 
> 赞同：0
> 
> 时间：2012-12-05T20:47:20.837
> 
> 标签：c#, browser, console

我需要编写一个控制台应用程序，它会不断查看 Gmail 的撰写窗口是否在几乎任何浏览器的选项卡中打开。如果控制台应用程序看到 Compose 窗口已打开（通过检查选项卡的 url 是否为：[https://mail.google.com/mail/u/0/#compose](https://mail.google.com/mail/u/0/#compose)），它将“拖放”一个文件到撰写框中。关于如何解决这个问题的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:05:00.403

您可以通过以下方式在 Google Chrome 中打开标签页

```
Process.Start("%AppData%\..\Local\Google\Chrome\Application\chrome.exe", 
          "http:\\www.YourUrl.com"); 
```

然后你可以确定，在你的情况下`mail.google.com`是打开的。

看看 WatiN 框架。

有了它，您可以获得网页上的所有元素。您还可以将鼠标移动到该元素：

[http://khemlall.info/2011/07/21/how-to-move-mouse-hover-over-obout-controls-using-watin-framework/](http://khemlall.info/2011/07/21/how-to-move-mouse-hover-over-obout-controls-using-watin-framework/)

然后你可以模拟鼠标移动

```
[DllImport("user32.dll")]
static extern bool SetCursorPos(int X, int Y); 
```

# c# - codeDom 中的 switch 语句（跳表样式）

> ID：13732126
> 
> 赞同：5
> 
> 时间：2012-12-05T20:47:22.770
> 
> 标签：c#, switch-statement, codedom

我知道 switch 语句不可用`CodeDom`以及编译器如何处理 switch 语句。

所以在很多情况下出于性能原因，我不想使用 If-else
[为什么是 switch 语句而不是 if-else？](https://stackoverflow.com/questions/449273/why-the-switch-statement-and-not-if-else)

可以生成代码来模拟给定案例列表的跳转表。

```
switch(value) {
    case 0: return Method0();
    case 1: return Method1();
    case 4; return Method4();
} 
```

会产生：

```
 private delegate object Method();

    Method[] _jumpTable = new Method[] { Method0, Method1, null, null, Method4 };

    private object GetValue(int value)
    {
        if (value < 0 || value > 4) 
            return null;
        return _jumpTable[value]();
    } 
```

如果序列中有漏洞或列表稀疏，那么分析案例列表并生成数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:14:02.643

您可能想查看[The Roslyn Project](http://msdn.microsoft.com/en-us/vstudio/hh500769.aspx)以进行代码分析。如果表很大并且特别稀疏，那么 if/else 可能会更好（考虑到现代 CPU 缓存）。Roslyn 应该让您遍历 DOM 并获取可以排序的 case 值（可能在单个 linq stmt 中）。我相信你的意思是在上面的开关中有'break;'。如果你实现这样的东西，我会非常仔细地测试它，以确保它确实提高了性能。

# ruby - 如何获取目录中最后修改的文件以使用 Ruby 传递给系统命令？

> ID：13732128
> 
> 赞同：-1
> 
> 时间：2012-12-05T20:47:23.423
> 
> 标签：ruby

我正在尝试做一些开发操作。我需要获取目录中最后修改的文件以将文件名传递给另一个命令。

如果我有一个用`ls -la`Ruby 输出的文件列表：

```
-rw-r--r--  1  163929215 2012-11-26 00:02 appname_20121126_000002.tgz
-rw-r--r--  1  164051752 2012-11-27 00:02 appname_20121127_000002.tgz
-rw-r--r--  1  164160113 2012-11-28 00:02 appname_20121128_000002.tgz
-rw-r--r--  1  164284597 2012-11-29 00:02 appname_20121129_000004.tgz
-rw-r--r--  1  164342795 2012-11-30 00:02 appname_20121130_000003.tgz
-rw-r--r--  1  164448312 2012-12-01 00:02 appname_20121201_000003.tgz
-rw-r--r--  1  164490727 2012-12-02 00:02 appname_20121202_000002.tgz
-rw-r--r--  1  164546124 2012-12-03 00:02 appname_20121203_000001.tgz
-rw-r--r--  1  164594711 2012-12-04 00:02 appname_20121204_000002.tgz 
```

我怎么能用 Ruby 扫描这个并提取最后一个文件？

这样的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:41:33.090

根本不需要掏空`ls`和解析它的输出。Ruby 为您提供了标准库方法来获取目录内容并检查文件 mtimes。这是一个 ruby​​ 方法，用于返回具有最新 mtime 的目录中的文件名。

```
def last_modified_in dir
  Dir.glob( File.join( dir,'*' ) ).
  select  {|f| File.file? f }.
  sort_by {|f| File.mtime f }.
  last
end

irb> system 'mkdir -p /tmp/foo'
irb> system 'rm /tmp/foo/*'
irb> ('a'..'c').each { |f| system "touch /tmp/foo/#{f}"; sleep 1; }
irb> puts last_modified_in '/tmp/foo'
# => /tmp/foo/c 
```

# java - 短语中字母的出现次数

> ID：13732130
> 
> 赞同：1
> 
> 时间：2012-12-05T20:47:30.180
> 
> 标签：java, string

我收到以下错误：

> HashMap.CountLetters.tallyPrint(CountLetters.java:12) 在 HashMap.CountLetters.main(CountLetters.java:21) 的线程“主”java.lang.NullPointerException 中的异常

目标是将每个字母的出现存储在`HashMap`. 键是字母，值是出现次数。

```
package HashMap;

import java.util.HashMap;

public class CountLetters {
    public HashMap tallyPrint(String phrase) {
        int count = 0;
        HashMap<String, Integer> fav = new HashMap<String, Integer>();
        for (int i = 0; i<phrase.length(); i++)
        {
            if (fav.containsKey(phrase.substring(i,i+1)))
                fav.put("" + phrase.substring(i,i+1), fav.get(phrase)+1);
            else
                fav.put("" + phrase.substring(i,i+1),1);
        }
        return fav;
    }

    public static void main(String[] args) {
        CountLetters x = new CountLetters();
        System.out.println(x.tallyPrint("my feet smell and my nose runs"));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:51:38.770

在

```
fav.put("" + phrase.substring(i,i+1), fav.get(phrase)+1) 
```

子表达式

```
fav.get(phrase) 
```

应该

```
fav.get(phrase.substring(i,i+1)) 
```

您正在尝试增加计数，但不是获取要加 1 的先前值，而是获取不相关键的值，因此您`NullPointerException`尝试自动取消装箱`null`到`int`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:54:45.973

您需要在`charAt()`此处使用而不是子字符串，因为这会在`NPE`您尝试读取地址 1 更多字符时给出。

### 完整代码

```
import java.util.HashMap;

public class CountLetters {
    public HashMap tallyPrint(String phrase) {
        int count = 0;
        HashMap<Character, Integer> fav = new HashMap<Character, Integer>();
        for (int i = 0; i<phrase.length(); i++) {
            if (fav.containsKey(phrase.charAt(i))) 
                fav.put(phrase.charAt(i), (fav.get(phrase.charAt(i)))+1);
            else
                fav.put(phrase.charAt(i),1);
        }
        return fav;
    }

    public static void main(String[] args) {
        CountLetters x = new CountLetters();
        System.out.println(x.tallyPrint("my feet smell and my nose runs"));
    }
} 
```

### 输出

> {f=1, =6, d=1, e=4, a=1, n=3, o=1, l=2, m=3, u=1, t=1, s=3, r= 1, y=2}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:53:20.043

代替 `fav.put("" + phrase.substring(i,i+1), fav.get(phrase)+1);`

和：

`fav.put("" + phrase.substring(i,i+1), fav.get(phrase.substring(i,i+1))+1);`

旁注1：您应该将其提取`substring`并将其存储在临时变量中以提高效率，这样您就不会`substring`一遍又一遍地调用相同的子字符串。

旁注2：感谢您在您的问题中发布整个（使用主要方法）。如果所有提问者都这样做，它会变得更简单。

# c# - 声明对象时可以调用类的方法吗？

> ID：13732131
> 
> 赞同：3
> 
> 时间：2012-12-05T20:47:30.117
> 
> 标签：c#, wpf, constructor, definition

我有一个类，我在其中声明它，但是该类作为项目添加到另一个更大的类中。有没有办法`Init()`在与调用相同的语句中调用该方法？类似于在调用构造函数时定义公共属性/变量。我不想`Init()`在构造函数中调用该方法，因为它与 WPF 设计器混淆。

```
 FitsView fv = new FitsView();
 fv.Init(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:50:41.880

您可以使用静态函数来做到这一点：

```
public static FitsView CreateFitsView()
{
    var fv = new FitsView();
    fv.Init();
    return fv;
} 
```

然后你只需调用该静态函数而不是`new FitsView()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:52:50.217

如果它知道何时准备好初始化，您也可以尝试将自定义事件挂钩到您的 FitsView？

并像这样使用它：

```
FitsView fv = new FitsView();
fv.someCustomEvent += (o,e) => { fv.Init(); }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:09:32.070

如果设计师因为您的 init 方法而遇到问题，我可以想到两个原因：

*   这是因为您在`Init`方法中所做的某些事情需要应用程序的局部性（读取资源或文件或使用硬件）
*   调用您的`Init`方法需要动态加载一些外部程序集。

对于第一件事，您可能要检查：

1.  对于您的班级：[WPF 中是否有 DesignMode 属性？](https://stackoverflow.com/questions/425760/is-there-a-designmode-property-in-wpf)
2.  对于您的视图模型：[http ://blog.laranjee.com/how-to-get-design-mode-property-in-wpf/](http://blog.laranjee.com/how-to-get-design-mode-property-in-wpf/)

这里的人也指出了这个错误，所以请注意（在winforms中托管wpf）：[https ://connect.microsoft.com/VisualStudio/feedback/details/620001/system-componentmodel-designerproperties-getisindesignmode-does-not-work- if-the-wpf-is-hosted-on-a-winform#tabs](https://connect.microsoft.com/VisualStudio/feedback/details/620001/system-componentmodel-designerproperties-getisindesignmode-does-not-work-if-the-wpf-is-hosted-on-a-winform#tabs)

对于第二个问题，您可以将您的`Init`方法包装在另一个假设中`InitWrapper`，然后对包装器方法进行设计模式检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T20:53:35.063

类似于[`StringBuilder.Append`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.append.aspx)您可以更改 Init 以返回对对象的引用。

```
Public FitsView Init()
{
    //Do stuff

    return this;
} 
```

然后：

```
FitsView fv = new FitsView().Init(); 
```

# c# - 这是对返回 JSON 数据的动态关键字的正确使用吗

> ID：13732132
> 
> 赞同：3
> 
> 时间：2012-12-05T20:47:33.583
> 
> 标签：c#, asp.net, asp.net-mvc, json

在我的控制器中，我有一个返回 JSON 数据的操作：

```
[HttpGet]
public ActionResult AjaxJson(){
    var ret = new List<dynamic>();

    ret.Add(new{
        Make = "Honda",
        Year = 2011,
    });

    ret.Add(new{
        Make = "BMW",
        Fun = true
    });    

    return Json(new { json = ret }, JsonRequestBehavior.AllowGet);
} 
```

我有点担心`dynamic`关键字的使用，因为列表中的项目实际上是匿名类型。但是没有办法创建匿名类型的列表。

我的第二个问题（不那么重要）是，如果我将 JSON 数据作为数组返回。在客户端上，要到达`Honda`，我必须以这种方式引用它：`data.json[0].Make`

但我希望能够这样做：`data.json.MyWeekdayCar.Make`

我知道如果我将 JSON 数据作为对象返回（稍后列出的控制器操作），我可以使用 引用`Honda`，`data.json.MyWeekdayCar.Make`但我将失去使用`data.json.length`. 有没有办法两全其美 - 能够使用`data.json.MyWeekdayCar.Make`和计算客户端的对象数量？

控制器将 JSON 数据作为对象返回：

```
[HttpGet]
public ActionResult AjaxJson(){
    var ret = new{
        MyWeekdayCar = new{
            Make = "Honda",
            Year = 2011
        },
        MyWeekendCar = new{
            Make = "BMW",
            Fun = true
        },
        length = 2 // this makes client side data.json.length work, but it doesn't feel normal.
    };

    return Json(new { json = ret }, JsonRequestBehavior.AllowGet);
} 
```

**编辑**

将动态列表与匿名对象一起使用是否有副作用或意外问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:56:55.243

因此，要回答您的第一个问题，以您正在做的方式使用动态并没有什么特别的问题。

如果不跳过一些障碍，您将无法准确实现您想要的，但是您可以使用以下几个选项：

**选项 1：**您可以编写如下所示的服务器端代码：

```
var honda = new { Make = "Honda", Year = "2011" };
var bmw = new { Make = "Bmw", Fun = true };
var array = new dynamic[] { honda, bmw };

var ret = new
{
    Cars = array,
    Length = array.Length,
    MyWeekDayCar = honda, 
    MyWeekendCar = bmw
}; 
```

然后你可以在你的javascript中使用它（不是你想要的，但关闭）：

```
data.json.MyWeekendCar.Make, 
data.json.Cars.Length
data.json.Cars[0].Make 
```

这种方法的缺点是您必须在服务器端非常具体，因此可能有点不灵活。但它确实涉及最少的工作。

**选项 2：**保持服务器端代码不变，但没有长度属性：

```
var ret = new {
    MyWeekdayCar = new{
        Make = "Honda",
        Year = 2011
    },
    MyWeekendCar = new{
        Make = "BMW",
        Fun = true
    }
}; 
```

然后在 javascript 中创建类作为数据的包装器，允许您以您想要的方式使用它，例如：

```
CarsClass.prototype = Array.prototype;   // Inherit from array type for length and other functions
function CarsClass(json) {   
    var that = this;   // very important... but you'll need to research this yourself ;)

    for (var key in json)   // loop around all the properties in the object
    {
        if (json.hasOwnProperty(key))
        {
            that[key] = json[key];   // copy each property to our new object
            that.push(json[key]);    // add each property to our internal array
        }
    }    
}

var cars = new CarsClass(  // This is just dummy data, you would use your json
{ 
    MyWeekdayCar : { Make: 'Honda', Year: '2011' },
    MyWeekendCar : { Make: 'BMW', Fun: true },
    AnotherCar: { Make: 'Skoda', FuelEfficient: true} // flexible!
});

alert(cars.MyWeekendCar.Make); // 'BMW'
alert(cars.length); // 3
alert(cars[0].Make); // 'Honda'
alert(cars[2].FuelEfficient); // True 
```

你可以在这个 jsfiddle 中看到这个工作：http: [//jsfiddle.net/m49h5/](http://jsfiddle.net/m49h5/)

正如您在这种方法中看到的那样，您可以在服务器端添加更多汽车，它们会被 javascript 类拾取。当然，如果您在客户端添加\删除汽车，这种方法需要更聪明。如果您确实需要这个，请告诉我，我可以提供进一步的建议

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:32:14.633

如果您想要两全其美，并且您的 json 格式不会定期更新，请查看 JSON C# 类生成器：http: [//jsonclassgenerator.codeplex.com/](http://jsonclassgenerator.codeplex.com/)

每次更新 json 格式时，您都可以重新生成类以供前端开发人员使用。

在前端，他们可以使用 json.net 库将您的 json 反序列化为生成的类，如下所示：

```
Car a = JsonConvert.DeserializeObject<Car> (json); 
```

如果这不符合您的要求，我知道的下一个最佳解决方案是按照您的建议使用动态对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:37:20.167

> 有没有办法两全其美 - 能够使用`data.json.MyWeekdayCar.Make`和计算客户端的对象数量？

不适用于匿名类型。您正在创建具有两个属性的匿名类型的单个对象：`MyWeekdayCar`它们 `MyWeekendCar`是*两种不同*的匿名类型。

所以你没有*对象*的集合，你有*一个*具有*两个*属性的对象，它们都是不同的类型。您必须`length`在创建对象时添加一个属性。

您*可以*尝试创建一个`Dictionary`而不是普通数组：

```
var ret = new Dictionary<string,dynamic>();

ret.Add("MyWekedayCar",new{
    Make = "Honda",
    Year = 2011,
});

ret.Add("MyWeekendCar",new{
    Make = "BMW",
    Fun = true
}); 
```

然后我*认为*你可以访问它：

```
data.json.["MyWeekdayCar"].Make
data.json.length 
```

虽然老实说，我对 JSON/JavaScript 和字典知之甚少，不知道这是否有效。如果不是，我会将其从我的答案中删除。

# rpm - Rocks Cluster Distribution - 如何在安装后脚本中手动安装 .rpm

> ID：13732139
> 
> 赞同：0
> 
> 时间：2012-12-05T20:47:46.110
> 
> 标签：rpm, yum, rocks

我的一个 rpm 可以在手动完成时正确安装，但由于某种原因，当我在制作包含该特定软件包的新发行版后重新启动节点时，它会破坏安装过程。

我想知道我是否可以通过在扩展计算的安装后部分运行“yum install package.rpm”来规避这个问题？

或者，如果有人可以给我一个提示，说明为什么一个包首先会破坏安装，那将同样有帮助？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:39:02.983

不确定是否可行，我绝对不会推荐它。

我猜 RPM 数据库会被锁定，所以它会挂起。

只需制作所需的其他 RPM。

# asp.net-mvc-3 - 如何在实体框架中删除具有 1 对 1 关系的相关对象？

> ID：13732142
> 
> 赞同：1
> 
> 时间：2012-12-05T20:47:50.440
> 
> 标签：asp.net-mvc-3, entity-framework-4

我首先使用 EF 模型，在我的`Employee`班级中，我有一个`Manager`与自身具有 1 对 1 关系的属性，即`Employee`班级：

```
public partial class Employee
{
    public Employee()
    {          
    }

    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public virtual Employee Manager { get; set; }
} 
```

现在，当我从数据库中获取现有对象并更改管理器时：

```
employee.Manager = otherEmployeeInstance;
Context.Entry(employee).State = System.Data.EntityState.Modified;
Context.SaveChanges(); 
```

它工作得很好；但是，如果我想删除经理，这将不起作用：

```
employee.Manager = null; 
```

在我看来，我首先需要将经理（员工）实例“加载”到上下文中，因为这使它工作：

```
var dummyVar = employee.Manager.Id;
employee.Manager = null; 
```

所以问题是，删除相关对象的最佳（正确）方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:43:38.513

显然，当你想删除一个一对一关系的实体时，EF 不允许在没有事先准备的情况下删除它。也就是说，从该实体中删除任何依赖实体信息。请记住，我们使用的是关系数据库系统，任何没有任何协调的破坏关系都会导致异常和失败。当你想删除一个关系时，你可以在你的控制器上使用它：

```
employee.Remove(Manager);//Automatically Removes Navigational Properties at both entities
db.SaveChanges(); 
```

而不是这个：

```
employee.Manager = null; 
```

# iphone - [[SKPaymentQueue defaultQueue] addTransactionObserver:observer] 上的应用程序崩溃；

> ID：13732145
> 
> 赞同：10
> 
> 时间：2012-12-05T20:47:54.767
> 
> 标签：iphone, ios, storekit

![关于坠机的报道不多](../Images/71d5ef5059065e286d0d8eca35a1af55.png)

这就是我在车祸中所能得到的一切`applicationDidBecomeActive`

```
MyStoreObserver * observer = [[MyStoreObserver alloc] initWithContext:self.managedObjectContext andDelegate:self];

[[SKPaymentQueue defaultQueue] addTransactionObserver:observer]; 
```

但奇怪的是我过去可以购买两次，即使我删除了应用程序，我也无法摆脱这个坑。这似乎不合逻辑。我可以单独分配初始化观察者没有问题，我可以毫无问题地调用默认的paymentQueue，但是如果我尝试将事务观察者添加到队列中，生命就会停止。它在 ARC 上，我添加到观察者的代表不是问题。我肯定知道。

我已经为观察者中的每个方法添加了一个 nslog，并且在崩溃之前没有一个被调用

找到解决方案

好的，看起来观察者没有被队列保留，因此观察者需要是一个实例变量。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-30T18:34:45.603

好的，看起来观察者没有被队列保留，因此观察者需要是一个实例变量（或以某种方式保留）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T23:48:46.330

要为此答案添加官方来源：

在 Framework Storekit 的头文件 SKPaymentQueue.h 中，有以下清晰的注释：

```
// Observers are not retained.
// The transactions array will only be synchronized with the server while the queue has observers.
// This may require that the user authenticate.
- (void)addTransactionObserver:(id <SKPaymentTransactionObserver>)observer __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_3_0); 
```

# java - 将maven项目作为依赖项添加到java中的非maven时没有ClassDefFound错误

> ID：13732150
> 
> 赞同：0
> 
> 时间：2012-12-05T20:48:14.843
> 
> 标签：java, web-services, maven-2, axis2, noclassdeffounderror

我正在尝试开发`Axis2`网络服务。我创建了一个动态 Web 项目来从`WSDL`. 一旦我实现了我的逻辑，`Skelton`其中有代码可以查询数据库。

所有这些数据库访问逻辑都在另一个 Maven 构建的项目中。我将此 Maven 构建项目作为我的 webservice 项目中的依赖项添加`BuildPath`到我的 webservice 项目中，该项目不是 maven 构建的。

当我运行此 Web 服务并从中访问该服务时`Soap UI`，我得到`No ClassDef Found Error`如下信息。

```
[ERROR] com/sample/test/common/dao/PersonDAO
java.lang.NoClassDefFoundError: com/sample/test/common/dao/PersonDAO
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getConstructor0(Class.java:2699)
    at java.lang.Class.newInstance0(Class.java:326)
    at java.lang.Class.newInstance(Class.java:308)
    at org.apache.axis2.util.Utils$8.run(Utils.java:768)
    at org.apache.axis2.java.security.AccessController.doPrivileged(AccessController.java:132)
    at org.apache.axis2.util.Utils.createServiceObject(Utils.java:765)
    at org.apache.axis2.receivers.AbstractMessageReceiver.makeNewServiceObject(AbstractMessageReceiver.java:245)
    at org.apache.axis2.receivers.AbstractMessageReceiver.getTheImplementationObject(AbstractMessageReceiver.java:282)
    at rg.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我的网络服务代码

```
 public class EnrollmentServiceSkeleton implements EnrollmentServiceSkeletonInterface{

            @Autowired
            PersonDAO personDao;   // Getters and Setters.

        public EnrollmentServiceRespMessage enrollmentServiceProfile (EnrollmentServiceReqMessage enrollmentService) {

// My WebService Logic
} 
```

将maven项目作为对另一个非maven的依赖项直接在非maven项目的构建路径中是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:47:21.730

Maven 通过构建项目而不是将其依赖项构建到包中来工作。因此，使用该库的项目可以选择覆盖或排除 maven 依赖项。

当包含在非 Maven 项目中时，您需要构建它，包括依赖项。

请参阅[如何使用 Maven 创建具有依赖项的可执行 JAR？](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)详细说明如何做到这一点。

# ruby-on-rails - 宝石国家选择帮手

> ID：13732152
> 
> 赞同：-1
> 
> 时间：2012-12-05T20:48:16.893
> 
> 标签：ruby-on-rails, country

我正在尝试使用`countries`来自`hexorx`. 我真的不知道如何将它带入选择助手中。我试着`country_select`像这样使用助手

```
<%= f.country_select :country, :required => true %> 
```

gem 的 GitHub 位置是[https://github.com/hexorx/countries](https://github.com/hexorx/countries)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:11:26.843

该助手的接口定义为：

```
country_select(object, method, priority_countries = nil, options = {}, html_options = {}) 
```

我通过访问您提供的链接找到了这一点，并在源代码中导航到[`/lib/countries/select_helper.rb`](https://github.com/hexorx/countries/blob/master/lib/countries/select_helper.rb)

假设这是在`form_for`对对象实例进行操作，那么也许`@user`User 的实例就是为第一个参数传递的，`object`. 第二个参数`method`是应该接收所选值的对象的属性，因此在此示例中，您的 User 模型将需要一个名为 的属性`country`。

所以问题很可能是第三个参数需要一个 的列表`priority_countries`，但它得到了`:required => true`。如果您通过`nil`，然后通过您的选项，它应该可以工作，如下所示：

```
<%= f.country_select :country, nil, :required => true %> 
```

对于以后的帖子，当某些内容不起作用时，您应该提供您看到的完整错误消息或症状。 [请参考常见问题](https://stackoverflow.com/faq)

# jquery - Kendo UI 网格版本“v2012.3.1114”不支持日期/时间编辑功能

> ID：13732153
> 
> 赞同：2
> 
> 时间：2012-12-05T20:48:21.397
> 
> 标签：jquery, datetime, kendo-ui

我以前使用过`Kendo-UI v2012.2.710`- 但是当我更新到`Kendo-UI v2012.3.1114`我的代码时停止工作。我不太确定发生了什么变化，因为我的代码看起来很简单。任何人都可以对此有所了解吗？

回滚到以前的版本以保持此功能正常工作不是一种选择，因为它可能会破坏其他功能。

```
<div id="gridTiming"></div>

<script>
    var entries = [
        { "city":"Boston", "time":"10:14", datetime: "2012-08-28T10:14:00.000Z" },
        { "city":"Kyoto", "time":"23:14", datetime: "2012-08-28T23:14:00.000Z"},
        { "city":"La Paz", "time":"10:14", datetime: "2012-08-28T10:14:00.000Z"},
        { "city":"San Francisco", "time":"07:14", datetime: "2012-08-28T07:14:00.000Z"},
        { "city":"Salt Lake City", "time":"08:14", datetime: "2012-08-28T08:14:00.000Z"},
        { "city":"Salvador", "time":"11:14", datetime: "2012-08-28T11:14:00.000Z"},
        { "city":"Salzburg", "time":"16:14", datetime: "2012-08-28T16:14:00.000Z" },
        { "city":"San Diego", "time":"07:14", datetime: "2012-08-28T07:14:00.000Z" }
    ];

    function timeEditor(container, options) {
        $('<input data-text-field="' + options.field + '" data-value-field="' + 
                  options.field + '" data-bind="value:' + options.field + 
                  '" data-format="' + options.format + '"/>')
        .appendTo(container)
        .kendoTimePicker({});
    }

    function dateTimeEditor(container, options) {
        console.log("options", options);
        $('<input data-text-field="' + options.field + '" data-value-field="' + 
                  options.field + '" data-bind="value:' + options.field + 
                  '" data-format="' + options.format + '"/>')
        .appendTo(container)
        .kendoDateTimePicker({});
    }

    $("#gridTiming").kendoGrid({
        dataSource: {
            data: entries,
            schema: {
                parse: function (response) {
                    $.each(response, function (idx, elem) {
                        if (elem.time && typeof elem.time === "string") {
                            elem.time = kendo.parseDate(elem.time, "HH:mm");
                        }
                        if (elem.datetime && typeof elem.datetime === "string") {
                            elem.datetime = kendo.parseDate(elem.datetime, "yyyy-MM-ddTHH:mm:ss.fffZ");
                        }
                    });
                    return response;
                }
            }
        },
        columns: [
            { command: [ "edit" ] },
            { field:"city", title:"City" },
            { field:"time", title:"Time", format:"{0:HH:mm}", editor: timeEditor },
            { field:"datetime", title:"Date - Time", format:"{0:yyyy-MM-dd HH:mm}", editor: dateTimeEditor }
        ],
        editable: "inline",
        navigatable: true
    });
</script> 
```

**编辑：以下一对 jsFiddles 演示了该问题：**

*   [版本 1，使用`Kendo-UI v2012.2.710`](http://jsfiddle.net/OnaBai/vj2pE/3/)
*   [版本 2，使用`Kendo-UI v2012.3.1114`](http://jsfiddle.net/OnaBai/vj2pE/4/)

要查看问题，请执行以下操作：

1.  单击一行上的“编辑”
2.  更改任何项目。
3.  点击“更新”

[Troy Alford](https://stackoverflow.com/users/1454806/troy-alford)：两个版本都更新了底层网格的数据 - 但只有`v2012.2.710`版本正确关闭了对话框并将网格的单元格标记为已更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:34:26.777

我已经创建了 2 个 jsFiddles 来测试您的问题~~- 但是这两个版本都`Kendo-UI`对我有用，而不会更改您的代码~~。

*   ~~[版本 1，使用`Kendo-UI v2012.2.710`](http://jsfiddle.net/TroyAlford/vj2pE/1/)~~
*   ~~[版本 2，使用`Kendo-UI v2012.3.1114`](http://jsfiddle.net/TroyAlford/vj2pE/2/)~~

**编辑：**将@Emiliano Bartolome 提供的更新版本添加到OP。这些链接是：

*   [版本 1，使用`Kendo-UI v2012.2.710`](http://jsfiddle.net/OnaBai/vj2pE/3/)
*   [版本 2，使用`Kendo-UI v2012.3.1114`](http://jsfiddle.net/OnaBai/vj2pE/4/)

我应该注意到这些 jsFiddles 依赖于`Kendo-UI`CDN 并`jQuery 1.8.2`通过 CDN。我正在使用的链接是：

*   `Kendo-UI v2012.2.710`：[http ://cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js](http://cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js)
*   `Kendo-UI v2012.3.1114`：[http ://cdn.kendostatic.com/2012.3.1114/js/kendo.all.min.js](http://cdn.kendostatic.com/2012.3.1114/js/kendo.all.min.js)
*   `jQuery 1.8.2`：[http ://code.jquery.com/jquery-1.8.2.js](http://code.jquery.com/jquery-1.8.2.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:50:29.527

谜团已揭开！对于新版本，我们必须`id`在`schema.model`.

我已经[使用 Kendo-UI v2012.3.1114 更新了版本 2](http://jsfiddle.net/OnaBai/vj2pE/5/)

我在模型中所做的设置`id`为`city`，现在它可以工作了！

```
model:{
    id:"city"
}, 
```

# wordpress - 如何让 wordpress 使用类别 slug 而不是查询字符串？

> ID：13732154
> 
> 赞同：0
> 
> 时间：2012-12-05T20:48:21.927
> 
> 标签：wordpress

我的类别链接是这样出来的：

```
http://localhost/sites/wordpress/?cat=1 
```

我怎样才能使用蛞蝓？

此外，只需导航到预期的 slug ulr 就会得到 404：

```
http://localhost/sites/wordpress/category/category-slug 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:49:26.527

此功能应该开箱即用。如果您使用 apache，您可能需要检查您的重写规则。这可能是由于您的 wordpress 安装在子目录中

# extjs4 - Extjs4 - 在模型上定义方法

> ID：13732160
> 
> 赞同：0
> 
> 时间：2012-12-05T20:48:45.903
> 
> 标签：extjs4

根据[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)，我应该能够在模型上定义函数，然后在该模型的实例上调用函数。

至少在我从代理加载模型的情况下，它不起作用。

我的模型：

```
Ext.define('MyApp.model.Detail', {
    extend: 'Ext.data.Model',
    fields: [
        'someField',
        'anotherField',
    ],

    someFunction: function() {
            //do something
    },

    proxy: {
        type: 'ajax',
        url: 'http://example.com/details',
        reader: {
            type: 'json',
            root: 'data',
            totalProperty: 'total',
            successProperty: 'success',
        }
    },
}); 
```

店铺：

```
Ext.define('MyApp.store.DetailStore', {
    extend: 'Ext.data.Store',
    storeId: 'detailStore',
    model: 'MyApp.model.Detail',
}); 
```

控制器：

```
Ext.define('MyApp.controller.appController', {
    extend: 'Ext.app.Controller',
    init: function() {
        this.getDetailStoreStore().addListener('load', this.newDetails, this);
    },

    stores: ['DetailStore'],

    models: ['Detail'],

    views : ['DetailView], //exists, not copied into question

    newDetails: function(store, records) {
        var details = records[0].data;
        details.someFunction();  // Uncaught TypeError: Object #<Object> has no method 'someFunction'
    }
}); 
```

调用 data.someFunction() 时，错误发生在 newDetails 函数中。

我有错误的期望吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:03:30.630

该函数存在于模型中，因此您可以调用：

```
records[0].someFunction(); 
```

# java - FileWriter - 写入项目内但在当前目录之外的 .txt

> ID：13732161
> 
> 赞同：0
> 
> 时间：2012-12-05T20:48:49.027
> 
> 标签：java

所以我正在生成数据并将其附加到文本文件中。

而不是使用`FileWriter fstream = new FileWriter("addressList.txt");`我需要将文件路径放在我创建了 addressList.txt 文件的另一个包中。它说系统找不到路径错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:54:31.877

根据您运行此路径的方式，该路径可能可读但不可写。JAR 文件中的资源通常是静态的，应被视为只读。

如果您尝试创建每个用户设置的列表（存储在列表中的地址），您应该考虑使用 System objects getenv(string) 方法来定位用户临时存储并将默认文件复制到那里。复制默认文件后，您可以像往常一样自由地更新文件。

参考： [http](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getenv(java.lang.String) ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getenv(java.lang.String )

# c# - 数组和列表与结构的差异

> ID：13732163
> 
> 赞同：4
> 
> 时间：2012-12-05T20:48:58.777
> 
> 标签：c#, list, struct

在下面的代码中，结构是从数组和列表中获取的。当按索引获取项目时，数组似乎是通过引用来完成的，而列表似乎是通过值来完成的。有人可以解释这背后的原因吗？

```
struct FloatPoint {
    public FloatPoint (float x, float y, float z) {
        this.x = x;
        this.y = y;
        this.z = z;
    }
    public float x, y, z;
}

class Test {

    public static int Main (string[] args) {
        FloatPoint[] points1 = { new FloatPoint(1, 2, 3) };

        var points2 = new System.Collections.Generic.List<FloatPoint>();
        points2.Add(new FloatPoint(1, 2, 3));

        points1[0].x = 0; // not an error
        points2[0].x = 0; // compile error

        return 0;
    }
} 
```

将结构定义更改为类可以编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T20:57:09.720

当你得到一个结构时，它总是按值。该结构将被复制，您不会获得对它的引用。

不同的是，您可以直接在数组中访问 sstruct，但不能在列表中访问。当您更改数组中结构中的属性时，您可以直接访问该属性，但要对列表执行相同操作，您必须获取结构，设置属性，然后将结构存储回列表中：

```
FloatPoint f = points2[0];
f.x = 0;
points2[0] = f; 
```

早期版本的编译器可以让你编写你拥有的代码，但是对于一个列表，它会生成类似于这样的代码：

```
FloatPoint f = points2[0];
f.x = 0; 
```

即它会读取结构，改变它，然后默默地把改变的结构扔掉。在这种情况下，编译器已更改为给出错误。

# xcode - git忽略了osx xcode项目的gitignore否定

> ID：13732165
> 
> 赞同：1
> 
> 时间：2012-12-05T20:49:00.773
> 
> 标签：xcode, macos, git, version-control, gitignore

这个问题来自阅读和评论另一个问题：[Git ignore file for Xcode projects](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects/13716745#13716745)

虽然亚当的回答（以及随附的[要点](https://gist.github.com/3786883)）似乎是确定的，但我实际上无法让它发挥作用。我对 gitignore 语法的理解似乎不完整。

我的设置：OSX 10.8.2，git 版本 1.7.9.6（Apple Git-31.1）。没有全局 gitignore 文件。

我正在测试使用 Xcode 4.5 中的 OSX 应用程序模板创建的新项目。

这是测试项目文件布局：

```
./.gitignore
./MyApp
./MyApp/AppDelegate.h
./MyApp/AppDelegate.m
./MyApp/en.lproj
./MyApp/en.lproj/Credits.rtf
./MyApp/en.lproj/InfoPlist.strings
./MyApp/en.lproj/MainMenu.xib
./MyApp/main.m
./MyApp/MyApp-Info.plist
./MyApp/MyApp-Prefix.pch
./MyApp.xcodeproj
./MyApp.xcodeproj/project.pbxproj
./MyApp.xcodeproj/project.xcworkspace
./MyApp.xcodeproj/project.xcworkspace/contents.xcworkspacedata
./MyApp.xcodeproj/project.xcworkspace/xcuserdata
./MyApp.xcodeproj/project.xcworkspace/xcuserdata/admin.xcuserdatad
./MyApp.xcodeproj/project.xcworkspace/xcuserdata/admin.xcuserdatad/UserInterfaceState.xcuserstate
./MyApp.xcodeproj/xcuserdata
./MyApp.xcodeproj/xcuserdata/admin.xcuserdatad
./MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes
./MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/MyApp.xcscheme
./MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/xcschememanagement.plist 
```

我设置了禁用源代码控制的测试项目，然后在终端中手动初始化 git repo。工作目录是项目目录：

```
git init
git add .
git commit -m "first commit" 
```

它返回已提交文件的列表：

```
13 files changed, 5204 insertions(+)
create mode 100644 MyApp.xcodeproj/project.pbxproj
create mode 100644 MyApp.xcodeproj/project.xcworkspace/contents.xcworkspacedata
create mode 100644 MyApp.xcodeproj/project.xcworkspace/xcuserdata/admin.xcuserdatad/UserInterfaceState.xcuserstate
create mode 100644 MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/MyApp.xcscheme
create mode 100644 MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/xcschememanagement.plist
create mode 100644 MyApp/AppDelegate.h
create mode 100644 MyApp/AppDelegate.m
create mode 100644 MyApp/MyApp-Info.plist
create mode 100644 MyApp/MyApp-Prefix.pch
create mode 100644 MyApp/en.lproj/Credits.rtf
create mode 100644 MyApp/en.lproj/InfoPlist.strings
create mode 100644 MyApp/en.lproj/MainMenu.xib
create mode 100644 MyApp/main.m 
```

在每次 .gitignore 测试后，我通过删除 .git 文件夹并重新初始化来重置。

如果 .gitignore 是这个

```
AppDelegate.h 
```

然后
`./MyApp/AppDelegate.h`
被排除

如果我将 .gitignore 更改为

```
AppDelegate* 
```

`./MyApp/AppDelegate.h`
`./MyApp/AppDelegate.m`
正如预期的那样，这两个都被排除在外

如果我的 .gitignore 是这样的：

```
AppDelegate*  
!AppDelegate.m 
```

再次，仅`AppDelegate.h`排除

这一切都在意料之中

但是，当排除规则是包含文件夹时，我无法重新包含工作

例如，如果我的 .gitignore 是这个

```
xcuserdata 
```

然后这些文件被排除在外

`./MyApp.xcodeproj/project.xcworkspace/xcuserdata/admin.xcuserdatad/UserInterfaceState.xcuserstate`

`./MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/MyApp.xcscheme`
`./MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/xcschememanagement.plist`

现在，如果我想重新包含 xcschemes 的内容

```
xcuserdata  
!xcschemes 
```

结果是一样的——`!xcschemes`似乎被忽略了。

同样，如果 .gitignore 是

```
en.lproj 
```

这些文件被排除在外

`./MyApp/en.lproj/Credits.rtf`
`./MyApp/en.lproj/InfoPlist.strings`
`./MyApp/en.lproj/MainMenu.xib`

如果我想重新包含其中之一

```
en.lproj  
!Credits.rtf 
```

相同的文件被排除：`!Credits.rtf`被忽略。

gitignore 的手册页只是这样说：

> 一个可选的前缀！这否定了模式；任何被先前模式排除的匹配文件都将再次包含在内。如果否定模式匹配，这将覆盖较低优先级的模式源。

但我不确定“低优先级模式来源”是什么意思，或者在这里是否相关。

我错过了什么？

**更新**
Adam 更新了他的[gitignore gist](https://gist.github.com/adamgit/3786883)以考虑这些问题。我已经将他的更改打包到[我的 fork](https://gist.github.com/foundry/4383910)中，并且还添加了一些关于当 XCode 项目已经在 git 控制下时如何添加或更改此类 .gitignore 的注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:04:26.877

Git 会遍历您的文件系统树并尝试匹配您的忽略规则。如果规则与目录匹配，那么该目录将被忽略。这意味着 git 甚至不会查看它的任何内容，这就是为什么它内部的任何异常都将被忽略的原因。

解决这个问题有点棘手，并不总是可能的。

```
/MyApp.xcodeproj/xcuserdata/*
!/MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/
/MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/*
!/MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/
/MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/*
!/MyApp.xcodeproj/xcuserdata/admin.xcuserdatad/xcschemes/MyApp.xcscheme 
```

上面的 .gitignore 将忽略除 .gitignore`/MyApp.xcodeproj/xcuserdata/`之外的所有文件`MyApp.xcscheme`。

通常也可以忽略这些异常，只指定您实际想要忽略的内容。

# php - RegEx UTF-8 忽略并加粗特殊字符

> ID：13732176
> 
> 赞同：0
> 
> 时间：2012-12-05T20:49:52.537
> 
> 标签：php, regex, preg-replace

我的网站搜索框有以下代码：

`<? echo preg_replace("/({$term})/i", "<b>$0</b>", NoticiaInfo($news_results, 'subtitulo')); ?>`

而且我想知道是否有任何方法可以使例如字母“c”用正则表达式替换“ç”。

所以，如果我搜索“ca”，“Função”的字母“çã”将被加粗......

有没有办法用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:58:38.573

您需要将 preg_replace 与数组一起使用。尝试：

```
<?php
    $replacements = array(
        '/a/' => '<b>ã</b>',
        '/c/' => '<b>ç</b>'
    );
    echo preg_replace(array_keys($replacements), array_values($replacements),  NoticiaInfo($news_results, 'subtitulo')); 
?> 
```

`$replacements`并用您要替换的其他字符填写数组。

@Ranty 提出了一个很好的观点，因此您可以尝试使用 str_replace ，您的代码将变为：

```
<?php
    $replacements = array(
        'a' => '<b>ã</b>',
        'c' => '<b>ç</b>'
    );
    echo str_replace(array_keys($replacements), array_values($replacements),  NoticiaInfo($news_results, 'subtitulo')); 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:28:27.343

没有漂亮的方法可以做到这一点并保留重音符号。您首先必须用替换字符组合搜索词的所有可能排列的列表。

```
<?
$termList = array($term);

// You'll need to programmatically create this list
// This is just a sample, assuming that $term == 'Funcao';
$termList[] = 'Funcão';
$termList[] = 'Funçao';
$termList[] = 'Função';

$bodyText = NoticiaInfo($news_results, 'subtitulo');

foreach($termList as $searchTerm) {
    $bodyText = preg_replace("/({$searchTerm})/i", "<b>$0</b>", $bodyText);
}

echo $bodyText;

?> 
```

以编程方式创建搜索词数组将是一场噩梦，但是已经有许多密码破解应用程序已经这样做了（例如：它们为数字子字符并创建其每个排列），因此逻辑存在于某个地方。但是，当您开始获得更长的搜索字符串时，其开销开始失控。

当然，如果您不关心保持重音标记，这将变得容易得多。

# c - C代码优化，平滑功能

> ID：13732177
> 
> 赞同：2
> 
> 时间：2012-12-05T20:50:06.640
> 
> 标签：c, optimization

对于一项任务，我们被要求优化代码以实现“平滑”功能，描述为：

平滑函数将源图像 src 作为输入，并在目标图像 dst 中返回平滑结果。这是实现的一部分：

```
void naive_smooth(int dim, pixel *src, pixel *dst) { 
  int i, j;
  for(i=0; i < dim; i++)
    for(j=0; j < dim; j++)
      dst[RIDX(i,j,dim)] = avg(dim, i, j, src); /* Smooth the (i,j)th pixel */
  return; } 
```

结构像素存储红色、绿色和蓝色值（整数）。函数 avg 返回第 (i,j) 个像素周围所有像素的平均值。您的任务是优化平滑（和平均）以尽可能快地运行。（注意：函数 avg 是一个本地函数，您可以完全摆脱它以通过其他方式实现平滑。）此代码（以及 avg 的实现）位于文件 kernels.c 中。

任何人都知道如何优化这个有一些建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:00:26.310

您可以通过将矩阵/图像划分为方形块并一次平滑一个块来执行循环的循环平铺/循环条带挖掘。通过这种方式，您可以获得更好的缓存利用率。

考虑当前版本。它遍历图像，一次访问三行，写入中间一行。

```
a[i-1][0], a[i-1][1], ..., a[i-1][dim-1]
a[i  ][0], a[i  ][1], ..., a[i  ][dim-1]
a[i+1][0], a[i+1][1], ..., a[i+1][dim-1] 
```

当它到达图像的最右侧时，第一列可能会从缓存中丢弃。但是当您移动到下一行时，很快就会需要它们，访问方式如下：

```
a[i  ][0], a[i  ][1], ..., a[i  ][dim-1]
a[i+1][0], a[i+1][1], ..., a[i+1][dim-1]
a[i+2][0], a[i+2][1], ..., a[i+2][dim-1] 
```

相反，您可以处理图块中的图像，例如：

```
a[i  ][B], a[i  ][B+1], ..., a[i  ][B+B-1]
a[i+1][B], a[i+1][B+1], ..., a[i+1][B+B-1]
a[i+2][B], a[i+2][B+1], ..., a[i+2][B+B-1] 
```

其中 B 是图块大小。

或者用一张图片，让它更清楚：

```
000111222
000111222
000111222
333444555
333444555
333444555
666777888
666777888
666777888 
```

这里我们有一个 9x9 的图像，分成 9 个图块，编号从 0 到 8，您的目标是编写循环，首先平滑图块 0 中的所有像素，然后平滑图块 1 中的所有像素，然后是所有像素tile 2 中的像素等。顺序并不重要，您甚至可以并行运行每个 tile。

当然，这对于大图像和相对较大的切片是有利的，您可以尝试切片大小，例如，从一个切片行开始跨越一个或两个缓存行。

有关此方法的更多信息，请查看[循环平铺](http://en.wikipedia.org/wiki/Loop_tiling)

* * *

尽管如此，值得注意的是你的编译器应该自己做这件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:54:35.217

根据您的编译器的优化可以提供什么，这通常会受益于标准优化，例如*循环展开、显式矢量化、循环阻塞*以及可能的*循环交换*，具体取决于图像的布局方向。这些都应该包含在您的教科书或课程笔记中。如果没有，这些是在线搜索的关键字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:03:57.720

图像平滑是结构化网格应用程序的常见示例：[Structured Grids](http://view.eecs.berkeley.edu/wiki/Structured_Grids)

您的应用程序肯定会受益于循环展开和循环重新排序技术（尤其是循环平铺），您可以在此处学习：[优化](http://dl.acm.org/citation.cfm?id=197406)

请注意，有效地优化结构化网格计算，尤其是在单个时间步上是一项不那么简单的任务，人们为此获得了博士学位：[Stencil probe](http://www.cs.berkeley.edu/~skamil/projects/stencilprobe/) 无论如何，您的计算相当容易，因此您应该实现显着的加速。但是，实现循环平铺可能很麻烦，并且在某些情况下会适得其反，您可能想尝试使用[Pluto](http://pluto-compiler.sourceforge.net/)等多面体编译器，它能够快速生成具有任意平铺尺寸的平铺代码。选择正确的切片尺寸是实现良好性能的基础，在当前架构中，由于硬件预取矩形切片的存在效果更好：[缓存优化](http://crd-legacy.lbl.gov/~oliker/papers/msp_2005.pdf)

# printing - 当我添加“打印”功能时，Java 代码无法编译

> ID：13732179
> 
> 赞同：2
> 
> 时间：2012-12-05T20:50:22.063
> 
> 标签：printing, compilation

```
class FirstClass{
public static void main(String[] args) {

class XORShift64 {
      long x;
      public XORShift64(long seed) {
        x = seed==0 ? 0xdeadbeef : seed;
      }
      public long randomLong() {
        x ^= (x << 21); 
        x ^= (x >>> 35);
        x ^= (x << 4);
        system.out.print();
        return x;

      }

    } 
```

} }

所以我有这段代码，使用 Xorshift 生成一个随机数，它编译得很好，但是当我添加行“system.out.print();”时 它立即显示错误，但我无法读取错误是什么。

感谢您的帮助，我刚刚开始进行 Java 编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:05:37.807

这是您的程序的修复程序。尝试运行它，让我们知道您到底想要什么。

```
import java.util.Random;

class FirstClass {
    static long x;
    static Random randomGenerator = new Random();

    public static void main(String[] args) {

        for (int i = 0; i <= 100; i++) {
            long randomInt = randomGenerator.nextLong();
            System.out.println("returned value :" + randomLong(randomInt));
        }
    }

    public static long randomLong(long xx) {
        xx ^= (xx << 21);
        xx ^= (xx >>> 35);
        xx ^= (xx << 4);
        System.out.println("Inside Method: " + xx);
        return xx;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:51:18.613

您需要将类名大写`System`，使用方法`println()`，然后将要打印的参数传递给方法。

```
 System.out.println("something to print"); 
```

# grails - Grails findBy 多列 我喜欢

> ID：13732187
> 
> 赞同：0
> 
> 时间：2012-12-05T20:50:58.233
> 
> 标签：grails, grails-orm

我有一个简单的 Tag 类，只有两个字段，名称和值，

```
class Tag {
    String name
    String value
} 
```

我正在尝试渲染一个 XML，我想通过 findBy...Ilike() 在其中搜索两个参数的一部分。

```
def getXml = {
    render Tag.findAllByNameAndValueIlike("%${params.name}%", "%${params.value}%") as XML
} 
```

但这并没有给我任何结果。如果我只使用一个参数，它会按我的预期工作：

```
def getXml = {
    render Tag.findAllByNameIlike("%${params.name}%") as XML
} 
```

我的下一个问题可能是关于过滤结果，并将其他“类似”标签添加到退货列表中，所以有没有办法通过以下方式解决上述问题：

```
def getXml = {
    list = Tag.findAllByNameIlike("%${params.name}%")
    list.add(Some other stuff)
    list.sortBy(Some thing, maby name length)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:54:55.163

对于您的多字段`ilike`查询，您可以使用[`withCriteria`](http://grails.org/doc/latest/ref/Domain%20Classes/withCriteria.html)：

```
def result = Tag.withCriteria {
    ilike('name', "%${params.name}%")
    ilike('value', "%${params.value}%")
} 
```

这将返回`Tag`名称与提供的名称匹配*且*值与提供的值匹配的域列表。

[Criteria DSL](http://grails.org/doc/latest/ref/Domain%20Classes/createCriteria.html)可能会让您完成大部分所需的过滤，但您也可以考虑使用[此处的一些 Groovy 集合示例](http://groovy.codehaus.org/JN1015-Collections)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:46:58.703

Both answer are good. I tried both, but I have to say I like the withcCritia the best. It seems very flexibly.

```
 def result = Tag.withCriteria {
        if(params.name != null)
            ilike('name', "%${params.name}%")
        if(params.value != null)
            ilike('value', "%${params.value}%")
    }
    result.add(new Tag('name': "something"))
    render result as XML 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T01:39:20.903

您必须在动态查找器的每个字段上设置限制（InList、NotNull 等）。如果你不这样做，它假定等于。这是您要查找的内容：

`Tag.findAllByNameIlikeAndValueIlike("%${params.name}%", "%${params.value}%")`

# eclipse - 为什么 Maven Build 在实际上没有启动配置时会提示多个启动配置？

> ID：13732189
> 
> 赞同：2
> 
> 时间：2012-12-05T20:51:10.003
> 
> 标签：eclipse, maven-2, m2e, pom.xml

在我的项目中（继承 BTW，所以它的某些方面仍然未知），在 Eclipse/m2e 下，我右键单击`pom.xml`>`1 Maven Build`并得到一个对话框：

> 选择要运行的启动配置：
> 
> *   m2 myproj (1):
> *   m2 myproj (2):
> *   m2 myproj (3):
> *   m2 myproj：

但是查看项目的`Properties`> `Run/Debug Settings`，根本**没有启动配置**。没有任何。

这意味着什么？

我应该选择上面列出的 4 种配置之一吗？如果是这样，是哪一个？为什么？

**更新 1：**有趣的是，当我右键单击`pom.xml`并选择`Run As`>`Run Configurations...`时，我看到定义了这些配置：

![在此处输入图像描述](../Images/c143cad858177e03db35f421fa5156ca.png)

不过，我仍然不知道这意味着什么。我不记得曾经定义过它们。他们是怎么到那里的？

**更新 2：** 显然，这些启动配置是通过单击某些关闭/取消按钮或类似按钮无意中创建的。所以我删除了除一个之外的所有内容，然后运行它：

```
 [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 0.093s
    [INFO] Finished at: Wed Dec 05 16:44:24 EST 2012
    [INFO] Final Memory: 1M/15M
    [INFO] ------------------------------------------------------------------------
    [ERROR] No goals have been specified for this build. You must specify a valid lifecycle phase or a goal in the format <plugin-prefix>:<goal> or
 <plugin-group-id>:<plugin-artifact-id>[:<plugin-version>]:<goal>. 
Available lifecycle phases are: 
validate, initialize, generate-sources, process-sources, generate-resources, 
process-resources, compile, process-classes, generate-test-sources, process-test-sources,
 generate-test-resources, process-test-resources, test-compile, process-test-classes, 
test, prepare-package, package, pre-integration-test, integration-test, 
post-integration-test, verify, install, deploy, pre-clean, clean, post-clean, pre-site, 
site, post-site, site-deploy. -> [Help 1]
    [ERROR] 
    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR] 
    [ERROR] For more information about the errors and possible solutions, 
please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/NoGoalSpecifiedException 
```

奇怪的。我知道`pom.xml`选择`Run As`>时有目标并且构建良好`Maven Install`。

# linux - 重构 Perl 代码和 PostgreSQL 数据库结构的工具

> ID：13732194
> 
> 赞同：3
> 
> 时间：2012-12-05T20:51:34.757
> 
> 标签：linux, perl, postgresql, ide, refactoring

我在 vim 中编写 perl。我一直在 vim 中编写 perl。然而，在不久前用 NetBeans 编写 java 之后，我现在希望我的 perl 项目有一些东西： 代码重构。

我有一个由多个脚本组成的应用程序，每个脚本都与一个 postgresql 数据库交互。这个应用程序一开始只是一个小小的 hack，但突然间它变成了无数的脚本，总共有几千行代码和一个庞大的数据库。虽然这很好，但我想用数据库修复一些问题，以使其从长远来看更易于维护：在此处重命名列，在此处更改数据类型.. 你知道的，小东西。

是否有任何工具可以让我这样做，同时在与之交互的脚本中查找对所述列的任何引用？

我宁愿有一些很好的自动重构而不是繁琐的手动重命名，因为这太容易产生错误，而且，从长远来看，我希望拥有一套合适的开发工具，而不仅仅是 vim。

顺便说一句，这一切都是通过 ssh 会话完成的，因此任何基于 GUI 的花哨的 IDE 也是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:31:34.893

[App::EditorTools](http://search.cpan.org/~mgrimes/App-EditorTools-0.17/lib/App/EditorTools.pm)提供了一些轻量级的重构 CLI 工具。使用[App::EditorTools::Vim](http://search.cpan.org/~mgrimes/App-EditorTools-0.17/lib/App/EditorTools/Vim.pod)，您可以将这些直接合并到 Vim 中。

Peter Blair 在[http://petermblair.com/2009/10/perl-vim-refactor/上有一个关于它的小视频](http://petermblair.com/2009/10/perl-vim-refactor/)

# php - 使用 CakePHP 模型查询多个关联

> ID：13732199
> 
> 赞同：0
> 
> 时间：2012-12-05T20:51:43.153
> 
> 标签：php, cakephp, has-and-belongs-to-many

我对 CakePHP 很陌生（昨晚开始），我遇到了查询问题。

我的模型的工作方式是这样的：

类组 << hasAndBelongsTo >> 用户 << hasAndBelongsTo >> PermissionsGroups

基本上，一个类组由大量用户组成，每个用户都属于一个权限组。该组定义了他们是什么类型的用户以及他们的权限。

现在我需要进行查询，在其中获取属于某个 P​​ermissionGroup 的所有用户，但我是从 ClassgroupsController 进行的。

但是，每当我尝试这样做时：

```
$this->Classgroup->User->find('list', array(
            'fields' => array('User.surname_firstname'),
            'order' => array(
                    'User.surname_firstname'
                ),
            'conditions' => array(
                    'PermissionGroup.permissions' => '10'
                )
        ) 
```

我收到此错误：

```
Column not found: 1054 Unknown column 'PermissionGroup.permissions' in 'where clause' 
```

因为我在 ClassgroupController 中，所以好像看不到 Group 字段，但我会假设因为 User 与 PermissionGroup 相关联，所以应该没问题。我已经建立了 3 个模型之间的关联，但问题似乎是查询在模型中看起来不够“深入”。

我还尝试将 find 的递归值设置为 2,3 和 4。从我读过的内容来看，我认为这可能不是一个好主意，而且 Containable 更好，但它肯定至少应该有效吗？

我还应该指出，这些关联是一种方式。我只将它们添加到我需要的模型中。所以 Classgroups 与 User 有关联，而 User 与 PermissionGroup 有关联

我在做一些明显错误的事情吗？还是我误解了 CakePHP 的概念？谢谢

更新：我第二次看到有人说我应该使用联接，如下所示：

```
'joins'=>array(
    array(
         'table'=>'rooms',
         'alias'=>'Room',
         'type'=>'inner',
         'conditions'=>array(
              'Room.hotel_id'=>'Hotel.id'
         )
    ) 
```

但我觉得这是一种过时的方式......我也尝试过像这样使用包含：

```
'contain' => array(
                'Group' => array(
                    'conditions' => array(
                        'Group.name' => '10'
                    )
                )
            ) 
```

但它没有用，我仍然得到了所有的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:53:30.497

你在正确的轨道上加入：

```
$joins = array(
    array(
     'table'=>'permission_groups',
     'alias'=>'PemissionGroup',
     'type'=>'inner',
     'conditions'=>array(
          'User.id = PermissionGroup.user_id',
          'PermissionGroup.permissions = 10'
     )
 )

    $this->Classgroup->User->find('list', array(
        'fields' => array('User.surname_firstname'),
        'joins' => $joins,
        'order' => array(
                'User.surname_firstname'
            )
    ) 
```

尝试使用它！

# spring-mvc - 表单的输入值始终为 NULL

> ID：13732202
> 
> 赞同：1
> 
> 时间：2012-12-05T20:51:45.863
> 
> 标签：spring-mvc, modelattribute

目前我正在进入 Spring，除了表格之外，一切都在工作。提交表单时会调用控制器中的映射函数，但值始终为空。我希望你知道如何解决这个错误。我正在使用 Spring 3.1.2

控制器类：

```
@Controller
public class MyController{

@RequestMapping(value="/registerSave.html", method=RequestMethod.POST)
public ModelAndView registerSave(@ModelAttribute("UserInput") UserInput a) {
    Logger log = LoggerFactory.getLogger(MeinController.class);
    log.info("username: " + a.getUsername()); //a.getUserName() is null >.<
    ModelAndView mav= new ModelAndView();
    User registerUser= new User(a.getUsername(), securityService.encodePassword(a.getPassword()), a.getFullname(), a.getEmail());
    try{
        messageService.createUser(registerUser);
        mav.setViewName("registerSuccess");
    } catch(Exception exception) {
        log.info("cannot create user "+  a.getUsername()+ " : "+ exception.getMessage());
        mav.setViewName("registerFail");
    }
    return mav;
}

} 
```

JSP：

```
<!DOCTYPE HTML>
<html>
<body > 
<article>
    <section>
        <form method="post" action="registerSave.html" modelAttribute="UserInput">
            <section>E-Mail Adresse:<br>
                <input id="email" autofocus="autofocus" size="35" type="text" required="required" name="email" maxlength="30"/>
            </section>
            <section>Username:<br>
                <input size="35" type="text" required="required" name="email" maxlength="30"/>
            </section>
            <section>Password:<br>
                <input size="35" required="required" type="password" name="passwort"/>
            </section>
            <section class="right">Password:<br>
                <input id="inPw2" title="Password$Bitte geben sie hier das selbe Passwort ein, wie im ersten Feld$Dies dient der überprüfung, für den Fall, dass sie sich vertippt haben" size="35" required="required" type="password" name="passwort"/>
            </section>
            <section >Your full name:<br>
                <input id="fullname" size="35" type="text" required="required" name="email" maxlength="30"/>
            </section>          
            <p>
                <input size="35" type="submit" value="Regestieren"/>
            </p>
        </form>
    </section>
</article>
</body>
</html> 
```

用户输入类：

```
public class UserInput {

private String username;
private String password; 
private String fullname;
private String email;
public String getUsername() {
    return username;
}
public void setUsername(String username) {
    this.username = username;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}
public String getFullname() {
    return fullname;
}
public void setFullname(String fullname) {
    this.fullname = fullname;
}
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:30:51.160

似乎您的用户名输入元素具有 name=email。表单中没有用户名的输入框。除此以外的一切都是正确的，应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:15:53.563

请`ModelAttribute`在表格中添加

```
<form method="post" action="registerSave.html" modelAttribute="UserInput"> 
```

我认为这是因为我们没有在 GET 请求中设置命令值。当您发布请求时，将创建一个新的命令对象。尝试将此方法添加到控制器类中，看看是否可以解决..

```
 @RequestMapping(value="/registerSave.html", method=RequestMethod.GET)
 public ModelAndView registerGet() {
    ModelAndView mav = new ModelAndView();
    UserInput userInput = new UserInput;
    mav.addObject("UserInput", userInput);
    mav.setViewName("registerSave.html");
    return mav;
  } 
```

# php - PHP&MySQL：使用 php for 和 mysql 查询的问题

> ID：13732207
> 
> 赞同：0
> 
> 时间：2012-12-05T20:52:14.473
> 
> 标签：php, mysql, for-loop

我会使用 12 个不同的函数计算每个月数据库的总利润 [每个月一个（是的，它可能不是一个很好的解决方案，但我正在逐步学习）]

这是 .php 代码（x12 次）

```
$January="SELECT JanuaryProfit()";     //Function
echo "<b>January Profit: E</b>";
$January = mysql_query($giugno,$conn)
          or die("Query failed: " . mysql_error($conn));
$num_rows=mysql_num_rows($January);

if (! $num_rows)
      echo "<p>0</p>";
else {
      while ($row = mysql_fetch_row($January)) {
            $price=$row[0];
            echo "$price";
      };
} 
```

函数 JanuaryProfit() 以这种方式声明 [MySQL]：

```
BEGIN
DECLARE PriceTOT FLOAT;
SELECT SUM(o.PrezzoTot) INTO PriceTOT
FROM orders o
WHERE o.Data BETWEEN '2012-01-01' AND '2012-01-31';
RETURN PriceTOT;
END 
```

所以我特别宣布了 2 月、3 月、...、12 月。

我不会将第一个代码粘贴 12 次到 .php 页面中。我尝试使用每次使用不同功能的 for cicle，但我不知道如何正确解决这个问题。有什么建议吗？

我现在想做的只是改变 php 部分，使用循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:09:04.883

哦，我亲爱的，甜美的，会飞的意大利面怪物。停止你正在做的任何事情，然后烧掉它，然后使用类似下面的东西来避免从开始到结束为每年的每个月编写一个函数。

```
SELECT 
  YEAR(o.Data) as 'year',
  MONTH(o.Data) as 'month',
  SUM(o.PrezzoTot) as 'total'
FROM orders o
GROUP BY YEAR(o.Data), MONTH(o.Data) 
```

我假设您在某些时候难以以编程方式确定该月的最后一天，所以这里有另一个链接，[`LASTDAY()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_last-day)它也是所有*非常有用*的日期函数的文档页面。

* * *

## 编辑

```
define('masochism', TRUE);

$ohgodwhy = array('January','February','March','April','May','June','July','August','September','October','November','December');

$aaahhh = 'SELECT %sProfit()';

foreach( $ohgodwhy as $pleaseno ) {
    $itburns = sprintf($aaahhh, $pleaseno);
    $hidethebodies = mysql_query($itburns) or die("Couldn't hide the bodies because: " . mysql_error());
    // etc...
} 
```

# ruby-on-rails - 在创建的模型上更改设计模型配置

> ID：13732208
> 
> 赞同：0
> 
> 时间：2012-12-05T20:52:25.307
> 
> 标签：ruby-on-rails, devise

Rails 3.2.3 Ruby 1.9.3 设计：2.1.2

我先验地创建了一个名为 Users 的设计模型。

然后，过了一段时间，我想更改电子邮件的正则表达式格式。我认为更改 devise.rb 初始化程序会做到这一点，但不是。

那么，我该如何完成这项任务？请帮忙。我不想重做设计模型......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:32:09.813

对不起大家。问题是Spork。我正在测试我的应用程序，但我从未重新启动过 spork.... 真的谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:33:04.417

*initializers/devise.rb*中的设置：

```
config.email_regexp 
```

应该是你想要做的。您可能看不到预期结果的一个原因是您没有重新启动 Web 服务器。

如果这没有帮助，请提供更多详细信息，说明您将正则表达式更改为什么，以及您看到的内容告诉您它没有被使用。

请记住，您可能在 User 模型中也有一个电子邮件验证器，例如：

```
validates :email, :format => { :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create } 
```

如果是这种情况，它可能会干扰设计配置设置。

# c# - 根据数据库信息动态更改按钮图像

> ID：13732211
> 
> 赞同：0
> 
> 时间：2012-12-05T20:52:43.063
> 
> 标签：c#, winforms, button, sql-server-ce

我正在尝试根据我在数据库中获得的状态更改几个按钮图像。如果我得到任何状态“0”，我应该将按钮图像更改为“忙碌”图像，因为默认图像是“空闲”图像。

**所以我的问题是：如何通过变量名更改按钮？**

我现在有这个代码（我知道它错了）：

```
private void checkSuites()
{
    SqlCeCommand checkSuite = new SqlCeCommand("SELECT * FROM RentSessionLog WHERE State='0'", mainConnection);

    SqlCeDataReader readSuite = checkSuite.ExecuteReader();
    int suiteIndex;
    string suitePath = "suite" + suiteIndex;

    while (readSuite.Read())
    {
        suiteIndex = Convert.ToInt32(readSuite["SuiteNum"]);
        suitePath.Image = NewSoftware.Properties.Resources.busySuiteImg;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:56:56.047

它很简单：

```
while (readSuite.Read())
{
    suiteIndex = Convert.ToInt32(readSuite["SuiteNum"]);
    switch(suiteIndex)
    {
    case 0:
       {
           suitePath.Image = NewSoftware.Properties.Resources.busySuiteImg;
           break;
       }
    default:
       {
           suitePath.Image = NewSoftware.Properties.Resources.freeSuiteImg;
       }
    }
} 
```

编辑：

我使用开关的原因是为了防止将来出现其他状态。您有“忙碌”和“空闲”，但也可能有“保留”，您可能希望有更多的条件，这些条件只会在一个简单的`if else if`序列中被混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:46:57.493

我相信你需要用来`this.Controls.Find(suitePath, true)`把你的字符串变成一个控件。我假设这`"suite" + suiteIndex`是`.Name`你每个按钮的。

```
string suitePath = "suite" + suiteIndex;
Button suiteButton = this.Controls.Find(suitePath, true);
suiteButton.Image = ... 
```

[查看有关 Controls.Find 的更多详细信息](https://stackoverflow.com/questions/3898588/find-control-by-name-from-windows-forms-controls)

或者，为了更快地访问，您可能希望在其中保留`Dictionary<int, Control>`每个按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:46:00.790

我做到了！正如胸腺嘧啶所说，使用字典：

```
 public void checkSuites()
    {
        Dictionary<int, Control> btnList = new Dictionary<int, Control>();
        btnList.Add(1, suite1);
        btnList.Add(2, suite2);
        btnList.Add(3, suite3);
        btnList.Add(4, suite4);
        btnList.Add(5, suite5);
        SqlCeCommand checkSuite = new SqlCeCommand("SELECT * FROM RentSessionLog WHERE State='0'", mainConnection);

        SqlCeDataReader readSuite = checkSuite.ExecuteReader();
        while (readSuite.Read())
        {
            int suiteIndex = Convert.ToInt32(readSuite["SuiteNum"]);
            string suitePath = "suite" + suiteIndex;
            foreach (Button key in btnList.Values)
            {
                if (key.Name == suitePath)
                {
                 key.Image = NewSoftware.Properties.Resources.busySuiteImg;
                }
            }

            }

    } 
```

谢谢所有帮助过的人 :D

# php - CodeIgniter：在某些情况下不生成视图

> ID：13732212
> 
> 赞同：0
> 
> 时间：2012-12-05T20:52:48.880
> 
> 标签：php, arrays, codeigniter, object, codeigniter-2

从一个名为**$data**的变量开始，它是一个包含一个对象的关联数组，其打印值为：

```
Array
(
    [item] => stdClass Object
        (
            [id] => 1
            [tipo] => 0
            [idioma] => es
            [nombre] => Artí­culo de prueba
            [titulo] => Esto es un artí­culo de prueba
            [alias] => articulo-de-prueba
            [texto] => Lorem ipsum etc etc
            [url] => 
            [video] => 
            [fecha_c] => 2012-11-27 10:50:37
            [fecha_m] => 2012-11-27 17:00:00
            [fecha_p] => 2012-11-28 00:00:00
            [destacado] => 0
            [status] => 1
        )

    [imagenes] => Array
        (
        )

) 
```

我需要过滤它的值并将其分配给另一个数组，这样：

```
protected function load_form($data = '') {
        $this->load->helper('form');

        // If item data have been sent, pass it to the form view to edit it.
        // Else display empty form for new item.
        if (! empty($data)) {
            // Data can be an associative array with an object and another array or just an object           
            if (array_key_exists('item', $data)) {
                $this->_vars['item'] =& $data['item'];
            }
            else {
                $this->_vars['item'] =& $data;
            }
            if (array_key_exists('imagenes', $data)) {
                $this->_vars['imagenes'] = $data['imagenes'];
            }
        }

        $view = $this->load->view(ADMIN_FORMS_PATH . $this->_controller . '_form', $this->_vars, true);

        /*DEBUG*/ echo $view; // just for debugging purposes
} 
```

第一个分配产生这些错误：

> 遇到 PHP 错误严重性：通知消息：未定义索引：项目文件名：核心/Admin_Controller.php 行号：205
> 
> 遇到 PHP 错误 严重性：通知消息：stdClass 类的对象无法转换为 int 文件名：core/Admin_Controller.php 行号：205

它的行为就像项目索引不存在，但确实存在。此外，它尝试将对象转换为整数。

为什么会发生，我应该怎么做才能解决它？

**编辑：**

我在做 &= 而不是 =&。这就是错误的原因。

无论如何，问题仍然存在，代码似乎停止了。

**编辑2：**

试图重新定义问题。它可能与 CodeIgniter 相关，所以我添加了整个函数，包括 CodeIgniter 函数。

load_form() 方法可以从创建新项目的请求中调用，在这种情况下 $data 为空，或者从编辑给定项目的请求中调用（在 $data 中）。在第一种情况（创建）中，执行调试行，但在第二种情况（版本）中不执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:58:09.243

这可能是你的问题。快结束时你有“$datos['imagenes'];” 它应该是“$data['imagenes'];”

```
if (! empty($data)) {
    // Data can be an object, or an array with object + array of images            
    if (array_key_exists('item', $data)) {
        $this->_vars['item'] &= $data['item'];
    }
    else {
        $this->_vars['item'] = $data;
    }
    if (array_key_exists('imagenes', $data)) {
        $this->_vars['imagenes'] = $data['imagenes'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:41:20.177

问题解决了。这太简单了。

它在视野之内。我试图回应：

**$项目['id']**

代替

**$item->id**

项目数据作为对象而不是数组被检索。它默默地导致了问题，没有任何警告、通知或错误。

无论如何，我感谢您的快速帮助。

# antlr - 具有多个分配的 Antlr 令牌

> ID：13732214
> 
> 赞同：1
> 
> 时间：2012-12-05T20:52:52.710
> 
> 标签：antlr, token, antlr3

我有一个令牌，我想让 2 个作业有效，并且我试图找出最好的方法。

例如我有

```
TOSTRING = 'tostring' 
```

但我也希望 'toString' 像这样有效：

```
TOSTRING = 'toString' 
```

实现这一目标的最佳方法是什么？

编辑：我想让它输出到 *.token 文件为

```
TOSTRING=9
'toString'=9
'tostring'=9 
```

我使用该语言的代码使用此结构并将 TOSTRING='tostring' 放入 token{ } 部分会生成此结构。即使是具有单个赋值的词法分析器规则也会这样做。但是当我有多个分配时，令牌不会用于“toString”或“tostring”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:52:16.303

In general, don't use the tokens section as you lose some control of the lexer. Always use real lexer rules. The tokens section just automatically adds lexer rules anyway. There is no difference except you start to run in to the limitations when you want more than just a simple string.

If you want case independence, then see the article here:

[How do I get Case independence?](http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782)

But implement it via the override of LA() (described there) and not the 'A'|'a' methods, which will generate lots of code you don't need. If it is JUST this camel case then:

```
TOSTRING
    : 'to' ('s' | 'S') 'tring'
    ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T21:09:34.837

最快的方法是定义词法分析器规则`TOSTRING`以接受两者：

```
TOSTRING
    : 'tostring'   //alternative #1, lower-case 's'
    | 'toString'   //alternative #2, upper-case 'S'
    ; 
```

或等价物：

```
TOSTRING
    : 'to' ('s' | 'S') 'tring'
    ; 
```

# c++ - Arduino整数错误

> ID：13732217
> 
> 赞同：2
> 
> 时间：2012-12-05T20:53:12.477
> 
> 标签：c++, arduino

我们正在尝试初始化一个字符数组，但是我们得到一个错误，说我们不能，因为我们不能混合整数和字符，但是我们没有初始化整数。

提前致谢

```
 void setup()
 {
     Serial.begin(9600); //Set the serial monitor.
     lcd.begin(16, 2); //Set the LCD
 }

 char line1 [5] = {0};
 char line2 [] = {0};

 void loop()
 {
     if (Serial.available() > 0) { //If the serial monitor is open it will read a value.
         line1 = Serial.read();
         delay(10);
         Serial.print(line1);
         lcd.print(line1);
     }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:10:41.730

我*不是*arduino 人，但我昨晚确实住在假日酒店，可以访问 Google :)

[http://arduino.cc/en/Serial/Read](http://arduino.cc/en/Serial/Read)

`Serial.read()`返回单个字节（作为`int`）。您正在尝试将其分配给 char 数组。

你不能那样做。您可以将某些内容分配给数组 *中*的特定元素：`line1[0] = 'c';` 例如，但您不能分配给数组本身。

*好像*你在找`Serial.readBytes()`

[http://arduino.cc/en/Serial/ReadBytes](http://arduino.cc/en/Serial/ReadBytes)

看起来像：

`Serial.readBytes(line1, 5);`

在您的情况下，`5`缓冲区（数组）的长度在哪里。这会将（最多）5 个字节读入您的`line1`缓冲区。

**编辑补充：**话虽如此，看来 arduino 的“C-Like”语言与 C 非常相似，因为它期望“字符串”（`char`数组）`null`在将它们传递给`Serial.print()`. 上面的建议并没有做到这一点，实际上会导致问题。

您需要做的是读取*比数组长度少一个字节*，然后`null`使用实际读取的字节数终止“字符串”，这就是`bytesRead()`返回给您的字节数（数组索引为零）：

```
int numBytesRead = 0;
...
numBytesRead = Serial.readBytes(line1, 4);
line1[numBytesRead] = '\0';  
Serial.print(line1); 
```

选项 B 就像我最初提到的那样做，但`line1`使用索引从数组中循环并一次打印一个字节：

```
int numBytesRead = 0;
numBytesRead = Serial.readBytes(line1, 5);
int i;
for (i = 0; i < numBytesRead; i++) {
    Serial.print(line1[i]);
} 
```

根据文档，`Serial.print()`自动知道在传递给它的所有内容时发送单个字节/字符。

# python - 用python更改目录

> ID：13732221
> 
> 赞同：5
> 
> 时间：2012-12-05T20:53:39.903
> 
> 标签：python, bash

我巧合地发现我无法从 python 代码中更改实际目录。我的测试程序如下：

```
from os import system

def sh(script):
    system("bash -c '%s'" % script)

sh("cd /home")
sh("pwd") 
```

的输出`pwd`不是`/home`，而是上面代码所在的目录。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T20:55:43.047

问题是您执行 shell 命令而不是使用实际更改目录[`os.chdir()`](http://docs.python.org/2/library/os.html#os.chdir)

每个`os.system()`调用都会在一个新的 shell 中执行给定的命令——因此脚本的工作目录根本不受影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T20:55:09.453

该目录实际上已更改，*但在另一个进程中*，您的脚本的子级。有一个简单的规则要记住：孩子永远不能影响其父母的环境（PATH、CWD 等）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T20:55:51.857

```
sh("cd /home")
sh("pwd") 
```

^ 这会产生 2 个单独的外壳，请尝试：

```
sh("cd /home; pwd") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T20:56:54.737

当您运行 sh 函数时，您会生成一个新的 bash 进程，然后该进程会更改当前目录并退出。然后你生成一个新进程，它对第一个 bash 进程发生了什么一无所知。它的当前目录再次设置为当前用户的主目录。
要更改 Python 进程的当前工作目录，请使用

```
os.chdir("blah")` 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T20:56:50.190

每个`sh( )`调用都会生成一个不同的 shell，因此您影响的是 shell 的工作目录，而不是 python 的。要更改 pythons 工作目录，请使用`chdir()`

# r - 如何在不返回 R 中的所有级别的情况下从数据框的行和列中选择文本？

> ID：13732224
> 
> 赞同：3
> 
> 时间：2012-12-05T20:53:46.760
> 
> 标签：r, dataframe, levels

> **可能重复：**
> [在 R 中的子集数据框中删除因子级别](https://stackoverflow.com/questions/1195826/dropping-factor-levels-in-a-subsetted-data-frame-in-r)

我想从数据框中的单元格中获取文本（并使用该文本创建文件）。但是，每当我从数据框中选择特定的行和列时，结果都是数据框的内容，然后是数据框中的级别列表。例如：

```
getFileNameTest<-function(
   columnNames=c(cName1,cName2)
)
{
list1<-c("joe", "bob", "sue")
list2<-c("jones","smith","smith")
myDataFrame<-data.frame(list1,list2)

joeFileName<-myDataFrame[1,1]
return(joeFileName)

} 
```

该函数返回：

```
[1] joe
Levels: bob joe sue 
```

但我只想要“joe”，以便以后可以创建一个名为“joe”的文件。如何在不返回级别的情况下获取数据框中特定行和列的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:12:20.557

正如@joran 建议或：

```
df <- data.frame(x=sample(LETTERS,10))
df[,1][[1]]

as.character(df[,1][[1]]) 
```

# c# - 从清单中获取 asmv1:assemblyIdentity

> ID：13732226
> 
> 赞同：0
> 
> 时间：2012-12-05T20:53:59.663
> 
> 标签：c#, visual-studio, msbuild, clickonce

编译后，应用程序清单中存在以下内容，如果我在 VS 中手动发布，则选择的版本是第一个版本，即 3.9.0.3

```
<asmv1:assemblyIdentity name="MyApp.exe" version="3.9.0.3" publicKeyToken="0000000000000000" language="neutral" processorArchitecture="x86" type="win32" />
<description asmv2:iconFile="Logo.ico" xmlns="urn:schemas-microsoft-com:asm.v1" />
<application />
<entryPoint>
   <assemblyIdentity name="MyApp" version="3.8.0.25806" language="neutral" processorArchitecture="x86" /> 
```

相反，如果我尝试在 MSBuild 脚本中运行它并使用

```
<Target Name="GetVersion">
   <Message Text="Getting version info..."/>
   <GetAssemblyIdentity AssemblyFiles="@(GetVersionAssembly)">
      <Output TaskParameter="Assemblies"
          ItemName="GetVersionAssemblyInfo"/>
   </GetAssemblyIdentity>
   <Message Text="%(GetVersionAssemblyInfo.Version)..."/>
</Target> 
```

其中@(GetVersionAssembly) 是可执行文件的路径，选择3.8.0.25806 版本，如何获取已发布版本而不是MSBuild 中提取的程序集版本，以使其与手动发布相匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:02:14.977

我最终做的是使用 MSBuild.Community.Tasks 库并在 GetVersion 目标中添加以下行，以允许将发布的版本存储在 version.txt 文件中。不确定是否有一种方法可以在 Visual Studio 中访问发布编号，并在使用 msbuild 发布时增加该编号，如果您在两种发布方式之间切换，这将避免手动更新这些版本。我将其描述为半解决方案，因为它仍然涉及手动步骤。

```
<Version VersionFile="version.txt" RevisionType="Increment"> <Output TaskParameter="Major" PropertyName="Major" /> <Output TaskParameter="Minor" PropertyName="Minor" /> <Output TaskParameter="Build" PropertyName="Build" /> <Output TaskParameter="Revision" PropertyName="Revision" /> </Version> 
```

然后，在脚本中，我将所有 %(GetVersionAssemblyInfo.Version) 引用更改为 $(Major).$(Minor).$(Build).$(Revision)

# android - 尝试将 Android 与 Arduino 连接时出错

> ID：13732230
> 
> 赞同：1
> 
> 时间：2012-12-05T20:54:16.587
> 
> 标签：android

我目前正在开展一个项目，试图让我的三星 Galaxy S2 与适用于 Android 的 Arduino Mega ADK 接口，但我遇到了一堆错误。

我已按照此处给出的指示进行操作：[http](http://stream.tellart.com/controlling-arduino-with-android/) ://stream.tellart.com/controlling-arduino-with-android/ 。我试过运行他们的[例子](http://sandbox.tellart.net/apa/Tellart-Android-Processing-Examples.zip)

特别是“TapOn”示例（它应该允许我从我的 Android 控制连接到 Arduino 的 LED）。但是每次我运行它时，我都会在 Android 的处理代码和 arduino 代码上遇到错误。

Arduino 错误：尚未声明 AndriodAccessory

```
AndroidAccessory.cpp:38: error: 'AndroidAccessory' has not been declared
AndroidAccessory.cpp:43: error: ISO C++ forbids declaration of 'AndroidAccessory' with no type
AndroidAccessory.cpp: In function 'int AndroidAccessory(const char*, const char*, const char*, const char*, const char*, const char*)':
AndroidAccessory.cpp:43: error: only constructors take base initializers
AndroidAccessory.cpp: At global scope:
AndroidAccessory.cpp:54: error: 'AndroidAccessory' is not a class or namespace
AndroidAccessory.cpp: In function 'void powerOn()':
AndroidAccessory.cpp:56: error: 'max' was not declared in this scope
AndroidAccessory.cpp:57: error: 'delay' was not declared in this scope
AndroidAccessory.cpp: At global scope:
AndroidAccessory.cpp:60: error: 'AndroidAccessory' is not a class or namespace
AndroidAccessory.cpp:60: error: 'byte' was not declared in this scope
AndroidAccessory.cpp:61: error: expected ',' or ';' before '{' token
AndroidAccessory.cpp:71: error: 'AndroidAccessory' is not a class or namespace
AndroidAccessory.cpp:71: error: variable or field 'sendString' declared void
AndroidAccessory.cpp:71: error: 'byte' was not declared in this scope
AndroidAccessory.cpp:71: error: expected primary-expression before 'int'
AndroidAccessory.cpp:71: error: expected primary-expression before 'const'
AndroidAccessory.cpp:82: error: 'AndroidAccessory' is not a class or namespace
AndroidAccessory.cpp:82: error: 'byte' was not declared in this scope
AndroidAccessory.cpp:83: error: expected ',' or ';' before '{' token 
```

Android/处理错误：来自 Android 工具内部的错误

```
API<=15: Adding annotations.jar to the classpath.
Merging AndroidManifest files into one.
Manifest merger disabled. Using project manifest only.
No AIDL files to compile.
No RenderScript files to compile.
Generating resource IDs...
Generating BuildConfig class.

BUILD FAILED
C:\Users\Nate\Desktop\AndriodSDK\tools\ant\build.xml:705: The following error occurred while executing this line:
C:\Users\Nate\Desktop\AndriodSDK\tools\ant\build.xml:718: Compile failed; see the compiler error output for details. 
```

当我没有更改示例中的任何代码时，我不明白出了什么问题以及为什么会出现这些错误。此外，我可以为 arduino 和 android 独立编写程序，并且它们工作正常......我只在我希望两者相互通信时才会收到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:37:54.873

看起来您的代码没有可使用的库。对我来说，这意味着在互联网上漫游，直到找到正确的库。我会尝试以下方法：

*   确保您拥有最新的[Arduino IDE](http://arduino.cc/en/Main/Software)
*   下载库，可能是[这个](http://labs.arduino.cc/uploads/ADK/GettingStarted/ArduinoADK-beta-001.zip).

[虽然如果你想在这里](http://labs.arduino.cc/ADK/AccessoryMode)一步一步地尝试。

# gis - 为什么这个 lat lng 坐标被分成两半？

> ID：13732234
> 
> 赞同：0
> 
> 时间：2012-12-05T20:54:29.033
> 
> 标签：gis

我有这个来自 tsp.gatech 的文件，但是 lat lng 坐标分为两半。为什么是这样？

```
评论：创建于 2012 年 7 月 7 日，www.tsp.gatech.edu/data/usa/
1 33613.158800 86118.306100
2 33100.954000 85529.675300
3 31571.835200 85250.489300

```

例如，第一个坐标应该是 33.613158800 86.118306100。

更新：我搜索了纽约市，发现它的 lat lng 坐标相似。

更新 2：我认为格式不正确，请参阅此点图像：[http](http://www.tsp.gatech.edu/data/usa/img/usa115475_large.jpg) ://www.tsp.gatech.edu/data/usa/img/usa115475_large.jpg 。我从这个网站的文件中得到了要点：[http](http://www.tsp.gatech.edu/data/usa/index.html) ://www.tsp.gatech.edu/data/usa/index.html 。该站点是关于一个挑战的，我下载的文件是 usa115475.tsp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:48:20.133

[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)倾向于建议这些值是距参考点的 X、Y 距离（以英尺、米、公里、英里、...为单位）。但这通常是为小比例地图保留的，其中地球曲率的影响可以被认为是轻微的。

如果数据似乎对应于格式不正确的十进制度，则在返回数据的任何系统中都可能存在错误。但最好在指责之前审查您自己的流程。你正在做什么查询/过程/代码来获取这些数据？

# c++ - GDB 在使用核心转储时提供无用的回溯

> ID：13732237
> 
> 赞同：0
> 
> 时间：2012-12-05T20:54:44.483
> 
> 标签：c++, gdb, g++

大约一周前，我开始在使用 GDB 从核心转储中获取体面的回溯时遇到问题。如果我在 GDB 中加载程序并让它崩溃，我可以得到一个很好的回溯。

这是我从核心转储中得到的：

```
(gdb) bt
#0  0x00007fd10ad42425 in ?? ()
#1  0x00007fd10ad45b8b in ?? ()
#2  0x0000000000000004 in ?? ()
#3  0x0000000000000005 in ?? ()
#4  0x00007ffff770887e in ?? ()
#5  0x0000000000000009 in ?? ()
#6  0x00007fd10ae87ea7 in ?? ()
#7  0x0000000000000003 in ?? ()
#8  0x00007ffff77072ba in ?? ()
#9  0x0000000000000006 in ?? ()
#10 0x00007fd10ae87eab in ?? ()
#11 0x0000000000000002 in ?? ()
#12 0x00007ffff77072ce in ?? ()
#13 0x0000000000000002 in ?? ()
#14 0x00007fd10ae85b82 in ?? ()
#15 0x0000000000000001 in ?? ()
#16 0x00007fd10ae87ea7 in ?? ()
#17 0x0000000000000003 in ?? ()
#18 0x00007ffff77072b4 in ?? ()
#19 0x000000000000000c in ?? ()
#20 0x00007fd10ae87eab in ?? ()
#21 0x0000000000000002 in ?? ()
#22 0x0000000000000020 in ?? ()
#23 0x0000000000000000 in ?? ()
(gdb) 
```

无论是 SIGSEGV、SIGABRT（未处理的异常还是断言/验证），都会发生这种情况。

我正在使用以下编译器标志进行编译：

> g++ -Wall -Wextra -g -ggdb -std=gnu++0x -rdynamic -pthread -O0

我真的想不出有什么改变导致了这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:09:44.977

事实证明，尽管有“核心转储”消息，但如果存在较旧的现有核心文件，它并没有被覆盖。根据这个，这显然是一个 ubuntu 错误：

[为什么我的核心文件没有被覆盖？](https://stackoverflow.com/questions/12666801/why-is-my-core-file-not-overwritten)

# sql - PostgreSQL 部署脚本停止

> ID：13732240
> 
> 赞同：0
> 
> 时间：2012-12-05T20:54:52.157
> 
> 标签：sql, bash, postgresql, shell, debian

我有一个 bash shell 部署脚本（linode stackscript），它在我部署我的 debian 6.0 服务器时运行。脚本以root身份运行，脚本如下：

```
apt-get update
apt-get install postgresql postgresql-contrib pgadmin3

passwd postgres
su - postgres
psql -c "ALTER USER postgres WITH PASSWORD 'changeme'" -d template1
su - postgres
createdb mytestdb
psql mytestdb 
```

我有两个问题：

首先，当我通过 shell 手动运行每一行时，它可以工作，但是当我将它作为 stackscript 运行时，它运行*passwd postgres*行，但之后什么也没有。

其次，当我运行*passwd postgres*行时，它要求我手动输入密码。有什么办法可以将它作为 shellscript 中的变量放入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:49:15.483

`passwd`旨在以交互方式使用。批量更改密码的正确命令是`chpasswd`.

例子：

```
#!/bin/sh
echo 'postgres:newpassword' | chpasswd 
```

另请注意，您的脚本`su - postgres`看起来不像通常在非交互模式下完成的那样。最好这样做：`su -c 'command1; command2...' - postgres`

# ruby - 未安装：ruby 平台中的宝石

> ID：13732241
> 
> 赞同：1
> 
> 时间：2012-12-05T20:54:53.950
> 
> 标签：ruby, ruby-on-rails-3, bundler, gemfile

我的 Gemfile 在一个`platforms :ruby`块中指定了几个 gem，但是当我尝试在我的 Linux 服务器上安装包时，这些 gem 没有安装。

有人可以给我定位吗？我正在尝试在我的 Linux 服务器上指定我想要的 gem，而不是在 Windows 上。

```
platforms :ruby do
    gem 'execjs', '~> 1.4.0'
    gem 'therubyracer', '~> 0.10.1'

    unless RUBY_VERSION.to_f >= 1.9
        gem 'pre-johnson', '~> 2.0'
    end
end 
```

当我跑步时`bundle show therubyracer`，我收到了消息`Could not find gem 'therubyracer' in the current bundle.`

# android - 应用程序曾经付费，现在免费，给付费的人带来好处？

> ID：13732243
> 
> 赞同：3
> 
> 时间：2012-12-05T20:54:55.133
> 
> 标签：android, google-play

我现在有一个应用程序，我打算将它作为付费应用程序放到 Google Play 上。我知道人们可以在以后决定让该应用程序免费。我在想，有一天我可能想让应用程序免费，出售一些现在包含在付费版本中的功能。有没有办法可以判断用户是否为应用付费？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:00:28.900

我能建议的最好的方法是`SharedPreference`在您的应用程序中将其标记为“付费”，然后发布没有此功能的应用程序的新版本（当您免费时）。然后，您可以检查标志以查看它在释放之前是否存在。

这样做的缺点是 root 用户*可能能够*更改该值，如果他们要发现它的话。另一个缺点是清除数据会清除标志。

为避免这些缺点，您可以将数据存储在网络服务器数据库中，但这似乎需要一些额外的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:49:23.427

正如 Eric 建议的那样，使用 SharedPreference，但对您的值进行编码；不要使用 true 或 yes，而是使用设备 ID 的哈希值，以便没有人可以发布该值以在其他设备上使用。然后，您可以在测试该指标时重新计算哈希值，以确保它是您自己的值，而不是用户输入的值。

# java - Aspectj 匹配切入点，同时不关心方法级注释参数

> ID：13732249
> 
> 赞同：2
> 
> 时间：2012-12-05T20:55:16.897
> 
> 标签：java, annotations, aspectj, pointcut

我遇到了一个涉及 Aspectj 的问题。我要做的是对带有方法级注释的调用进行“after() throwing”匹配。

```
@MyAnnotation    
public void doSomething(Param p1, Param p2) 
```

如果我使用

```
after() throwing(MyCustomException ex) : call (@com.me.MyAnnotation * *.*(..)) 
```

它可以工作，但是如果我在注释中添加了一些参数，那么它们就不会匹配。

```
@MyAnnotation(value = "doobery")    
public void doSomething(Param p1, Param p2) 
```

我的切入点缺少什么？

只是为了澄清，我想匹配这两个例子，我也不关心注释中的参数。

AspectJ 1.6 版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:56:18.777

哈！知道了。

所以线索是从正在编织的东西中看到痕迹。我可以看到一些方法得到编织，而另一些则没有。但我突破的方法是重复编织方法。

我正在使用“调用” - 因此编织只发生在方法的调用上，所以当我有一个类被编织并多次调用匹配的方法时，它们会出现多次。

我需要切换到“执行”，这样即使没有调用方法，编织也会发生在方法上。

将我的建议更改为：

```
after() throwing(MyCustomException ex) : execution (@com.me.MyAnnotation * *(..)) 
```

# php - 如何以 utf8 格式发送电子邮件

> ID：13732253
> 
> 赞同：0
> 
> 时间：2012-12-05T20:55:31.530
> 
> 标签：php, email, utf-8, sendmail

我想用 utf8 编码发送这封电子邮件的消息..

我能为此做些什么

```
include 'functions.php';
    $name = stripslashes($_POST['name']);
    $email = trim($_POST['email']);
    $subject = stripslashes($_POST['subject']);
    $message = stripslashes($_POST['message']);
    $cap=strtoupper($_POST['cap']);

    $error = '';

$mail = mail(WEBMASTER_EMAIL,$subject,$message,
        "From: ".$name." <".$email.">\r\n"
        ."Reply-To: ".$email."\r\n"
        ."X-Mailer: PHP/" . phpversion()); 
```

我可以用 utf8 发送什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:23:27.290

您可以在电子邮件标头中指定编码，如下所示：

```
$mail = mail(WEBMASTER_EMAIL,$subject,$message,
        "From: ".$name." <".$email.">\r\n"
        ."Reply-To: ".$email."\r\n"
        ."Content-type: text/html; charset=UTF-8\r\n"
        ."X-Mailer: PHP/" . phpversion()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:01:33.993

您可以使用 php 的 utf8_encode 函数。像这样：

```
$message = utf8_encode(stripslashes($_POST['message'])); 
```

这会将编码的字符串 utf8 存储在您的 $message 变量或任何其他变量中。

**编辑**：

如果您使用 swiftmailer 库，它将默认为 utf8 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T16:28:31.903

您需要在标头中设置 utf-8 编码并对主题进行编码，因为它很容易被损坏。我个人创建了自己的函数，它还增加了设置发件人地址的功能：

```
function mail_utf8 ($to, $subject='', $message='', $from='', $header='') {
  if (preg_match("/\<html.*\>/i", $message))
    $content_type = "html";
  else
    $content_type = "plain";

  $header .= "\nMIME-Version: 1.0";
  $header .= "\nContent-type: text/$content_type; charset=UTF-8";
  if ($from)
    $header .= "\nFrom: ".$from;
  mail($to, "=?UTF-8?B?".base64_encode($subject)."?=", $message, trim($header));
} 
```

# objective-c - 创建一个 NSMutableArray 来保存指针

> ID：13732254
> 
> 赞同：0
> 
> 时间：2012-12-05T20:55:34.490
> 
> 标签：objective-c, ios, xcode

我正在尝试在目标 c 中创建一个可变数组来保存对对象的引用。数组中的对象通过用户交互定期更新，我希望数组在对象发生时自动反映对对象所做的更改。有谁知道是否有办法做到这一点？也许存储指向对象的指针而不是数组中的对象本身？任何帮助将非常感激

提前致谢

编辑：我应该提到，严格意义上的对象并没有被更新。它们正在重新初始化。例如，如果我有一个控制器：

MyController = [MyController alloc] initWith.....]]

使用不同的初始化参数再次进行上述调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:56:53.473

该数组始终存储指针......它持有对它的强引用或向其发送保留消息（如果使用非 ARC）。

所以

```
[myMutableArray addObject: anObject]; 
```

添加指向它的指针。

如果您现在更改对象的属性并稍后通过数组访问它，它将为您提供指向该对象及其属性更改的指针。

**编辑：**

不，**如果您分配/初始化，您正在创建一个新对象实例**并在堆上为其分配新内存（即，它是另一个指向新内存地址的指针）。你到底想完成什么？如果您提供更多细节，肯定有一种方法。

如果您分配/初始化具有相同类的对象，为什么不创建一个方法来更改对象的属性：

代替

```
myObject = [[MyClass alloc] initWithParameter1: one parameter2: two]; 
```

您可以创建一个更改这些属性的方法：

```
[myObject updateParameter1: anotherOne parameterTwo: anotherTwo]; 
```

而且，当然，可变数组的优点是，您可以更改其内容，所以就像@Eli Gregory 指出的那样，您可以用另一个对象（或者更确切地说是指向它的指针）替换一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:13:59.287

因为你想指向一个新分配和初始化的对象，你不能“更新”指针，你可以做的是用某个索引处的新指针“替换”指针。

您可以用来执行此操作的方法是：

```
- (void)replaceObjectAtIndex:(NSUInteger)index withObject:(id)anObject 
```

所以它看起来像：

```
NewViewController *new = [[NewViewController alloc] init..];
[myArray replaceObjectAtIndex:x withObject:new]; 
```

# java - charAt 方法返回一个整数。需要转换成int

> ID：13732264
> 
> 赞同：0
> 
> 时间：2012-12-05T20:55:53.663
> 
> 标签：java, char, int

我正在创建一个方法，它将采用给定的输入并将值设置为“plate”。然后我继续使用 charAt 方法并尝试获取字符（字母/字符串）输入并将其设置为新值。但我被告知将其设置为 char 值。当我用它运行 aprint 语句时，输出只是一堆整数，或者在我的情况下（对于我将要显示的代码），当我将车牌设置为 abc 123 时，它输出“195”。此外，模型不做任何事情（或至少不应该做）。如果有人能告诉我我到底做错了什么，那将是一个很大的帮助。

到目前为止，这是我的代码：

```
import java.util.Scanner; 
```

公共类 CarRental {

```
public static String model;
public static String plate;

public static void main(String[] args) {
    Scanner input = new Scanner(System.in);

    System.out.println("Car Model:");
    model = input.nextLine();
    System.out.println("License Plate: ");
    plate = input.nextLine();

    char one = plate.charAt(0);
    char two = plate.charAt(1);

    System.out.println(two + one);

} 
```

}

为了让我的问题更清楚，我希望做的是，将我输入到输入中的实际字母分配给一个单独的值。我正在使用 charAt 方法，它返回整数。

如果有人可以提供建议，那将有很大帮助！

谢谢，萨利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:59:55.427

运算符`+`将 2 个字符视为整数，尝试

```
System.out.println("" + two + one); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:58:31.783

你可以使用

```
Character.toChars(X) 
```

其中 x 是您要转换为 char 的数字，然后在转换后显示所述字符。

# sql - SQL 约束：日期 A 在日期 B 之前 - 如何？

> ID：13732269
> 
> 赞同：11
> 
> 时间：2012-12-05T20:56:08.207
> 
> 标签：sql, constraints

我正在创建一个需要字段*from=date*和*to=date*的 SQL 表，但我想做出一个约束，*以便*不能在*from*之前。我的程序会检查它，但我想学习如何使用 SQL 来执行它。我以前写过 SQL，但从未真正使用过约束，也不知道它们是如何工作的。

所以问题是：使用标准 SQL，我如何确保*From*在*To*之前？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T21:02:46.630

```
create table foo
(
   from_date date,
   to_date date,
   constraint check_dates check (from_date < to_date)
); 
```

或者，如果您需要将其应用于现有表，请使用：

```
alter table foo
   add constraint check_dates check (from_date < to_date); 
```

PostgreSQL 手册包含一个关于检查约束的好章节：[http ://www.postgresql.org/docs/current/static/ddl-constraints.html#AEN2410](http://www.postgresql.org/docs/current/static/ddl-constraints.html#AEN2410)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:03:27.107

我认为这对于 sql server、mysql 和 oracle 来说都可以

```
ALTER TABLE myTbl
ADD CONSTRAINT chk_Dates CHECK (dtFrom < dtTo) 
```

# python - 如何在 Python 中编写吉他弦代码？

> ID：13732270
> 
> 赞同：-3
> 
> 时间：2012-12-05T20:56:09.800
> 
> 标签：python, vpython, guitar, sound-synthesis

> **可能重复：**
> [Python 中的吉他字符串代码？](https://stackoverflow.com/questions/13731726/guitar-string-code-in-python)

我对制作可以模拟吉他弦的代码非常感兴趣。我该怎么做呢？或者至少我将如何开始这样做？

以下是我的想法：

我想看看弹奏不同琴弦、音符等时的声波（分析振幅和频率）。我还对演奏两根不同琴弦时的声波感兴趣，以及当它们不和谐时如何变化和辅音音符。我感兴趣的另一件事是，有时琴弦在不被弹拨时会如何振动（共振）。

我只需要一个可以更改的基本代码，但我不知道如何制作。

谢谢！！

# c# - 防止注入的 C# 和 SQL 参数

> ID：13732271
> 
> 赞同：0
> 
> 时间：2012-12-05T20:56:13.247
> 
> 标签：c#, .net, sql, data-access-layer, sqlparameter

我想知道如何（在下面的代码中）确保 dataID 是下面传递的参数中的文本（或 varchar 或 int）？

```
public T ExecuteQuery<T>(Func<IDataReader, T> getResult, string query, params IDataParameter[] parameters)
    {
        using (SqlConnection conn = new SqlConnection(this.DefaultConnectionString))
        {
            conn.Open();

            // Declare the parameter in the query string
            using (SqlCommand command = new SqlCommand(query, conn))
            {
                foreach (var parameter in parameters)
                {
                    command.Parameters.Add(parameter);
                }

                command.Prepare();

                using (SqlDataReader dr = command.ExecuteReader())
                {
                    return getResult(dr);
                }
            }
        }
    }

    public string GetMySpecId(string dataId)
    {
        return ExecuteQuery(
            dr =>
            {
                if (dr.Read())
                {
                    return dr[0].ToString();
                }

                return string.Empty;
            },
            "select specId from MyTable where dataId = @dataId",
            new SqlParameter("dataId", dataId));
    } 
```

我习惯这样编码：

```
command.Parameters.Add(new SqlParameter("key", SqlDbType.Text));

command.Prepare();

command.Parameters[0].Value = dataId; 
```

在顶部的代码中，我如何将两个或更多参数传递给 ExecuteQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:02:10.303

`ExecuteQuery`已经接受了多个参数。它是 a`ParamArray`这意味着它接受任意数量的参数并将它们转换为数组。

例如，如果我有这样的功能：

```
public int Sum(params int[] numbersToSum) { ... } 
```

我可以这样称呼它：

```
Sum(1, 2, 5, 6, 1) 
```

在您的情况下，您可以这样称呼它：

```
ExecuteQuery(
   dr => { //snip }, 
   query,
   new SqlParameter("dataId", dataId),
   new SqlParameter("anotherParm", parm2),
   new SqlParameter("anotherParm", parm3),
   ... ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:59:39.710

代码使用了[`params`](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.100%29.aspx)关键字，因此您似乎应该只编写额外的转义 SQL 并继续将参数附加到方法的末尾。这是一个使用您的代码作为基础的示例。

该链接提供了更完整的解释，但`params`它使您可以在方法签名的末尾拥有可变数量的参数（只要它们是相同的类型）。它将落在该`params`变量中的所有最终参数放入一个数组中。

```
 return ExecuteQuery(
        dr =>
        {
            if (dr.Read())
            {
                return dr[0].ToString();
            }

            return string.Empty;
        },
        "select specId from MyTable where dataId = @dataId and somethingelse = @else",
        new SqlParameter("dataId", dataId), 
        new SqlParameter("else", elseVar); 
```

# java - ObjectInputStream - StreamCorruptedException：无效类型代码：00

> ID：13732272
> 
> 赞同：1
> 
> 时间：2012-12-05T20:56:14.650
> 
> 标签：java, serialization, corruption, objectinputstream

首先，我知道关于这个确切的例外有很多问题，但似乎没有一个有很好的答案。

我有一个本地客户端网络，通过 TCP 套接字与服务器通信。他们正在从服务器接收大量数据。当我开始我的测试时，它运行了一段时间，但最终我在其中一个流上看到了这个异常。

```
java.io.StreamCorruptedException: invalid type code: 00
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1373)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:368)
    at myProgram.connectionProtocol.waitForMsg(connectionProtocol.java:137)
    at myProgram.Client.ClientProcess$testController.run(ClientProcess.java:296)
    at myProgram.Client.ClientProcess.main(ClientProcess.java:71) 
```

**更新：**

**我尝试强制每个进程在继续之前等待确认消息，并在遇到此错误时发送重新发送。这增加了更多的复杂性，并且似乎导致的问题比它解决的问题更多。**

**我向所有输入添加了缓冲流（在代码中更新），听说这会提高 IO 性能，但没有运气。不过它并没有引起问题，所以我将它留在里面。**

这是我的一些代码（已删除垃圾）：

服务器：

```
private Socket client;
private String clientName = "?";
private Boolean threadActive = true;
private PublicKey clientKey;
private int timeout = 100;

ClientWorker(Socket sock) {
    client = sock;
}
public void run(){
    Object line;
    ObjectInputStream in = null;
    ObjectOutputStream out = null;

    client.setSoTimeout(timeout);
    in = new ObjectInputStream(new BufferedInputStream(client.getInputStream()));
    out = new ObjectOutputStream(new BufferedOutputStream(client.getOutputStream()));
    out.flush();

    while(threadActive){

        Message msgOut = msgQueue.get(0);
        if(msgOut != null && msgOut.source.equals(clientName)){
            msgQueue.remove(0);
            msgOut.source = "broker";
            out.writeObject(secure.signObject(msgOut,privKey));
            out.flush();
            out.reset();
        } 

        try{
            line = in.readObject();
            handleMessage((SignedObject) line);
        } catch(SocketTimeoutException e){
            //no data currently in stream
        }
    }
    client.close();
} 
```

客户：

```
serverSock = new connectionProtocol(name,privKey);
socketNum = serverSock.getSocketNum("server");
serverSock.openSocket(socketNum);
serverSock.setSoTimeout(100);

while(isActive){
    // ERROR OCCURS IN NEXT LINE
    serverMsg = (SignedObject)serverSock.waitForMsg();
    if(serverMsg != null)
        handleMessage(brokerMsg);

    // messages are sent/received over other sockets here
}
serverSock.closeSocket(); 
```

周期性地，另一个线程也会调用 serverSock.sendMsg(Message)。

连接协议：

```
public void openSocket(int sockNum) throws IOException {
    socket = new Socket("localhost", sockNum);
    out = new ObjectOutputStream(socket.getOutputStream());
    in = new ObjectInputStream(socket.getInputStream());
    out.flush();

    Message initMessage = new Message(name,"open");
    SignedObject sigMessage = security.signObject(initMessage, privKey);
    out.writeObject(sigMessage);
    out.flush();
    out.reset();

    socketActive = true;
}

public synchronized void closeSocket(){
    socketActive = false;
    Message closeMessage = new Message(name,"end");
    out.writeObject(security.signObject(closeMessage,privKey));
    out.flush();
    socket.close();
}

public synchronized Object waitForMsg() throws IOException {
    Object msg = null;
    try {
        // ERROR OCCURS ON NEXT LINE
        msg = in.readObject();
        return msg;
    } catch (SocketTimeoutException e) {
        return null;
    }catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    return msg;
}

public synchronized void sendMsg(Message msg){
    out.writeObject(security.signObject(msg, privKey));
    out.flush();
    out.reset();
} 
```

# unix - 如何列出嵌套存档 (.gz) 的内容

> ID：13732273
> 
> 赞同：3
> 
> 时间：2012-12-05T20:56:20.860
> 
> 标签：unix, nested, archive, tar, gzip

我有一个压缩档案 (archives.tar.gz) 的压缩档案 f1.tar.gz、f2.tar.gz、f3.tar.gz...

我想列出一个子存档文件的内容，比如 f1.tar.gz，而不需要实际打包和提取所有内容。换句话说，我需要能够执行以下操作： tar -ztvf f1.tar.gz 而无需先执行： tar -zxvf archives.tar.gz

关于如何做到这一点的任何想法？

非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:12:20.247

由于压缩的性质，没有真正的方法可以做到这一点而不会产生一些解压缩存档的开销。如果你想避免创建中间文件，你可以这样做：

```
tar -zxOf archives.tar.gz f1.tar.gz | tar -ztf - 
```

这将仅从`f1.tar.gz`存档中提取并将其提供给第二个 tar，它将列出文件。

# php - 如何在php中对对象进行排序？

> ID：13732274
> 
> 赞同：1
> 
> 时间：2012-12-05T20:56:22.943
> 
> 标签：php, arrays, zend-framework, sorting, object

我有一个`$this->result`包含对象的属性：

```
array(40) {
  [0] => object(Model)#181 (7) {
    ["_id":protected] => string(2) "1"
    ["_img":protected] => string(95) "/1273720855.jpg"
  }
  [1] => object(Model)#224 (7) {
    ["_id":protected] => string(2) "2"
    ["_img":protected] => string(95) "/test.jpg"
  }
  [2] => object(Model)#182 (7) {
    ["_id":protected] => string(2) "3"
    ["_img":protected] => string(95) "/127377775.jpg"
  }
  [3] => object(Model)#224 (7) {
    ["_id":protected] => string(2) "4"
    ["_img":protected] => string(95) "/test.jpg"
  }
  [4] => object(Model)#182 (7) {
    ["_id":protected] => string(2) "5"
    ["_img":protected] => string(95) "/129586775.jpg"
  }
... 
```

所以如果我做一个循环，我可以获得`img`属性：

```
foreach($this->result as $val){
    echo $val->getImg(); //'/1273720855.jpg'
} 
```

我想做的是对对象进行排序，以便属性`/test.jpg`必须是最后一个或最后回显它们，例如：

```
array(40) {
  [2] => object(Model)#182 (7) {
    ["_id":protected] => string(2) "3"
    ["_img":protected] => string(95) "/127377775.jpg"
  }
  [4] => object(Model)#182 (7) {
    ["_id":protected] => string(2) "5"
    ["_img":protected] => string(95) "/129586775.jpg"
  }
  [1] => object(Model)#224 (7) {
    ["_id":protected] => string(2) "2"
    ["_img":protected] => string(95) "/test.jpg"
  } 
  [3] => object(Model)#224 (7) {
    ["_id":protected] => string(2) "4"
    ["_img":protected] => string(95) "/test.jpg"
  }
.... 
```

我对任何解决方案都感兴趣，即使我必须创建一个可以对后记进行排序的新数组等

蚂蚁的想法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:02:42.123

你所追求的是usort。

[http://php.net/usort](http://php.net/usort)

```
bool usort ( array &$array , callable $cmp_function ) 
```

您编写函数来运行排序，并将此函数作为参数 2 传递。然后 PHP 将遍历数组并针对数组中的每个值运行该函数。

所以你应该有类似这样的东西：

```
<?php
function cmp($a, $b)
{
    return strcmp($a->getImg(), $b->getImg());
}

usort($this->result, "cmp"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:26:11.100

我可以看到你已经结束了`40 Images`，它仍然可以增长等等。..不确定你从哪里得到它，但可以使用堆来存储你的图像，它会自动排序......

```
$heap = new ImageStorage();

// Porpulate Storage form source 
$images = array(1 => "/1273720855.jpg",2 => "/test.jpg",3 => "/127377775.jpg",4 => "/test.jpg",5 => "/129586775.jpg");
foreach ( $images as $id => $img ) {
    $heap->insert(new Model($id, $img));
}

// Simple Output
echo "<pre>";
foreach ( $heap as $img ) {
    echo $img->getImg(), PHP_EOL;
} 
```

输出

```
/1273720855.jpg
/127377775.jpg
/129586775.jpg
/test.jpg
/test.jpg 
```

使用的类

```
// Image Sotrage Class
class ImageStorage extends SplHeap {
    public function compare($a, $b) {
        return strcmp($b->getImg(), $a->getImg());
    }
}

// Emulation of your Model class
class Model {
    protected $_id;
    protected $_img;
    function __construct($id, $img) {
        $this->_id = $id;
        $this->_img = $img;
    }

    public function getID() {
        return $this->_id;
    }

    public function getImg() {
        return $this->_img;
    }
} 
```

# java - MySQL 插入异常 [JAVA]

> ID：13732278
> 
> 赞同：0
> 
> 时间：2012-12-05T20:56:33.980
> 
> 标签：java, mysql, jsp, exception, insert

当我尝试使用此代码插入时，我总是遇到异常：

```
 String add="insert into kategorie kategorie values ?";
 PreparedStatement addKategorie=db.prepareStatement(add);
 addKategorie.setString(1,kategorie); 
```

我的插入语法有什么问题？

（使用准备好的语句插入名为 kategorie 的表和名为 kategorie 的列（值=？）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:58:26.057

您的查询应如下所示：

```
insert into kategorie(kategorie) values (?) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:59:09.800

尝试 `insert into kategorie (kategorie) values ?`

因为插入的正确语法是

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

# javascript - 循环对象以预加载图像列表

> ID：13732279
> 
> 赞同：0
> 
> 时间：2012-12-05T20:56:38.660
> 
> 标签：javascript

我有一个对象，它带有我想在显示之前预加载的图像。

信息存储如下：

```
 //var data =     ["images",{"ground":["0.png"]}] 
```

然后我想用 onLoad 循环它们以确保它们已加载，因此它们将显示......但它们不会显示在第一帧上......并且我确定它是因为 onLoad 检查。

这就是我所拥有的：

```
function preLoad(data){
    gfx = new Array();
    count = 0;
    for(var i in data[1]){
        if (data[1].hasOwnProperty(i)) {
            ++count;

            gfx[i] = new Array();
            for(var j in data[1][i]){
                tmp = new Image();
                    tmp.onload = function(){
                        tmp.src = data[0]+'/'+data[1][i][j];
                        gfx[i].push(tmp);               
                }
            }           
        }   
    }

    window.gph = gfx;

    main();
} 
```

我做对了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:13:28.663

你需要

a) 复制到 onload 内的数组，但
b) 在分配 onload 后加载 onload 之外的 src

```
for(var j in data[1][i]){
  tmp = new Image();
  tmp.onload = function(){
    gfx[i].push(tmp);               
  }
  tmp.src = data[0]+'/'+data[1][i][j];
} 
```

最后，通常的做法是在 for in 中使用 o 或 obj 作为 var，在普通 for 循环中使用 i，如

```
for(var o in data[1]) 
```

和

```
for (var i=0;i<array.length;i++) 
```

整个东西有点味道，gfx 没有 var，然后您将其复制到 windows 范围的 var

怎么样

```
function preLoad(obj){
  var data = obj[1], path=obj[0],tmp;
  window.gph = {};
  for(var o in data){
    if (data[o].hasOwnProperty(i)) {
      gph[o] = [];
      for(var p in data[o]){
        tmp = new Image();
        tmp.onload = function(){
          gph[o].push(tmp);               
        }
        tmp.src = path+'/'+data[o][p];
      }           
    }   
  }
  main();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:01:08.530

尝试在 onload 事件之前分配 src 属性，而不是在其中：

```
for(var j in data[1][i]){
    tmp = new Image();
    tmp.src = data[0]+'/'+data[1][i][j];
    tmp.onload = function(){
        gfx[i].push(tmp);               
    }
} 
```

# python - 从 Python 在 OS X 中运行 Google Chrome 浏览器的屏幕截图

> ID：13732281
> 
> 赞同：0
> 
> 时间：2012-12-05T20:56:52.053
> 
> 标签：python, macos, screenshot

当我通过 Python 脚本在 OS X 上使用 Google Chrome 运行 Selenium 风格的集成测试时，我想在每个步骤中截取屏幕截图。我只想捕获 Google Chrome 窗口，而不是整个桌面。有什么方法可以从 Python 脚本中抓取 OS X 中当前正在运行的 Google Chrome 窗口的屏幕吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:25:26.650

我没有在 Chrome 上的 OS X 上完成它，但是这样的事情不起作用：

```
browser.open("/page-to-capture")
png = browser.capture_screenshot_to_string()
with open("screenshot.png", "wb") as fh:
    fh.write(png.decode('base64')) 
```

当然，过去在 linux 上使用 selenium 和 firefox 对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:52:24.523

事实证明，selenium 有一个[get_screenshot_as_file](http://seleniumhq.org/docs/04_webdriver_advanced.html#taking-a-screenshot)方法，适用于 OS X 和 Google Chrome。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:04:39.507

听起来您正在寻找MacOS 下的[“ `screencapture`”命令行工具。](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/screencapture.1.html)你可以从你的 Python 脚本中调用它吗？

其中一个选项是“ `-w`”，即“窗口选择模式”。我不确定这是否会在脚本中起作用（即它是否需要用户交互？），但如果这不起作用，您也可以尝试“ `-m`”，这是“仅捕获主监视器”选项。

# php - 使用 jquery 和 facebox 刷新 src

> ID：13732283
> 
> 赞同：0
> 
> 时间：2012-12-05T20:56:53.533
> 
> 标签：php, jquery, codeigniter, src, facebox

我想刷新图像的 src，这个 src 是由一个 iframe 选择的，它的内容是由 facebox 加载的照片库，但我不能让它看起来像 iframe 的这段代码：

```
$('#my_image').on({
        'click': function(){
             var s= $('#my_image').attr('src');
             $('#img').attr('src',s);
         }
     }); 
```

这是我想用图库中`#img`的 src 刷新的图像的 src 。`#my_image`

我正在使用 php 和 codeigniter。

我认为问题在于我无法访问原始页面的 html 元素（不是 iframe）

# javascript - 将事件分配给数组中的对象时绕过关闭

> ID：13732291
> 
> 赞同：0
> 
> 时间：2012-12-05T20:57:03.347
> 
> 标签：javascript, events, closures, dom-events

**我想要完成的事情：**
我有一个对象数组，每个对象都有一个对 DOM 节点的引用，我用`.getNode()`. 我正在尝试为数组中的每个对象分配一个事件处理程序，以便在单击时`alert()`调用`.name`数组中的给定对象。

**我尝试过的：**
我用循环分配事件，但我遇到了关闭问题。我现在拥有的方式是，所有对象共享相同的事件（循环中的最后一个事件），并且在单击时都会给出相同的消息。

`EventUtil`独立添加事件处理程序浏览器。它不应该包含任何错误。

```
for (var i = 0; i < arrayWithObjects.length; i++) {
    EventUtil.addHandler(arrayWithObjects[i].getNode(), "contextmenu", function(event){
        event = EventUtil.getEvent(event);
        event.preventDefault();
        alert('right click on '+arrayWithObjects[i].name);
        event.stopPropagation();
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:03:30.240

```
for (var i = 0; i < arrayWithObjects.length; i++) {
    (function(i){

    EventUtil.addHandler(arrayWithObjects[i].getNode(), "contextmenu", function(event){
        event = EventUtil.getEvent(event);
        event.preventDefault();
        alert('right click on '+arrayWithObjects[i].name);
        event.stopPropagation();
    });

    })(i)
} 
```

i 是按值传递的，并为这个动态定义的函数设置为本地，每次都会创建一个新的闭包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:00:41.173

这应该可以解决问题：

```
for (var i = 0; i < arrayWithObjects.length; i++) {
    (function(obj) {  // new function scope
        EventUtil.addHandler(obj.getNode(), "contextmenu", function(event) {
            event = EventUtil.getEvent(event);
            event.preventDefault();
            alert('right click on ' + obj.name);
            event.stopPropagation();
        });
    })(arrayWithObjects[i]); // pass in current object
}​ 
```

# java - 无法显示缓冲区中的对象

> ID：13732293
> 
> 赞同：1
> 
> 时间：2012-12-05T20:57:09.347
> 
> 标签：java, object, opengl, rendering, buffer

我正在尝试通过绘制四面体来在 JOGL 中使用带有索引缓冲区对象的顶点缓冲区来启动自己。我完成了代码，没有错误。但我不知道为什么它没有显示任何三角形。缓冲区是在渲染器初始化之后通过调用方法创建的`createBuffers`。类属性 VBO 和 IBO（非常顶点/索引缓冲区对象）和其他缓冲区（顶点 - 顶点坐标，col - 颜色值，ind - 形成四面体的每个三角形的索引）`createBuffers`通过调用在内部初始化`initDataBuffer`。

我已经尝试直接绘制三角形，而不是使用`for`循环使用缓冲区。就像是 ：

```
for(int i=0;i<ind.capacity();){
        int i1 = ind.get(i++);
        int i2 = ind.get(i++);
        int i3 = ind.get(i++);

        gl.glBegin(GL.GL_TRIANGLES);
        gl.glColor3f(col.get(i1), col.get(i1+1), col.get(i1+2));
        gl.glVertex3f(vert.get(i1), vert.get(i1+1), vert.get(i1+2));
        gl.glColor3f(col.get(i2), col.get(i2+1), col.get(i2+2));
        gl.glVertex3f(vert.get(i2), vert.get(i2+1), vert.get(i2+2));
        gl.glColor3f(col.get(i3), col.get(i3+1), col.get(i3+2));
        gl.glVertex3f(vert.get(i3), vert.get(i3+1), vert.get(i3+2));
        gl.glEnd();
} 
```

使用此代码，四面体已成功显示。但是当我使用`gl*Buffer`and`gl*Pointer`函数时，它不会显示任何内容。这是完整的代码：

```
import com.sun.opengl.util.BufferUtil;
import java.nio.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.media.opengl.GL;
import javax.media.opengl.GLAutoDrawable;
import javax.media.opengl.GLEventListener;
import javax.media.opengl.glu.GLU;

public class GLRenderer implements GLEventListener {

IntBuffer VBO, IBO;
FloatBuffer vert,col;
ShortBuffer ind;

public void init(GLAutoDrawable drawable) {
    // initialization routine generated by netbeans + a method for creating the buffers
    // Use debug pipeline
    // drawable.setGL(new DebugGL(drawable.getGL()));

    GL gl = drawable.getGL();
    System.err.println("INIT GL IS: " + gl.getClass().getName());

    // Enable VSync
    gl.setSwapInterval(1);
    gl.glEnable(GL.GL_DEPTH_TEST);

    // Setup the drawing area and shading mode
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    gl.glShadeModel(GL.GL_SMOOTH); // try setting this to GL_FLAT and see what happens.

    // create buffers
    createBuffers(drawable);
}

public void reshape(GLAutoDrawable drawable, int x, int y, int width, int height) {
    GL gl = drawable.getGL();
    GLU glu = new GLU();

    if (height <= 0) { // avoid a divide by zero error!
        height = 1;
    }
    final float h = (float) width / (float) height;
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL.GL_PROJECTION);
    gl.glLoadIdentity();
    glu.gluPerspective(45.0f, h, 1.0, 20.0);
    glu.gluLookAt(3, 3, 3, 0, 0, 0, 0, 0, 1);
    gl.glMatrixMode(GL.GL_MODELVIEW);
    gl.glLoadIdentity();
}

public void initDataBuffer(){
    // Data to put into the buffers
    float[] vert = new float[]{
        0, 0, 1,
        -1, 0, 0,
        0, 1, 0,
        1, 0, 0,
        0, -1, 0
    };

    float[] col = new float[]{
        0.3f, 0.35f, 0.4f,
        0.45f, 0.5f, 0.55f,
        0.6f, 0.65f, 0.7f,
        0.75f, 0.8f, 0.85f,
        0.9f, 0.95f, 1.0f
    };

    short[] ind = new short[]{
        0, 1, 2,
        0, 2, 3,
        0, 3, 4,
        0, 1, 4,
        1, 2, 3,
        1, 3, 4
    };
    this.vert = BufferUtil.newFloatBuffer(vert.length);
    this.col = BufferUtil.newFloatBuffer(col.length);
    this.ind = BufferUtil.newShortBuffer(ind.length);
    this.vert.put(vert);
    this.col.put(col);
    this.ind.put(ind);
}

public void createBuffers(GLAutoDrawable drawable){
    // creating VBO and IBO
    GL gl = drawable.getGL();
    VBO = IntBuffer.allocate(1);
    IBO = IntBuffer.allocate(1);
    initDataBuffer();

    // Verification
    if(!(gl.isFunctionAvailable("glGenBuffersARB") &&
            gl.isFunctionAvailable("glBindBufferARB") &&
            gl.isFunctionAvailable("glBufferDataARB") &&
            gl.isFunctionAvailable("glDeleteBuffersARB"))){
        System.err.println("OpenGL buffering not supported");
        System.exit(-1);
    }

    // Vertex Buffer
    gl.glGenBuffers(1, VBO);
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, VBO.get(0));
    gl.glBufferData(
            GL.GL_ARRAY_BUFFER,
            Float.SIZE*vert.capacity()+Float.SIZE*col.capacity(),
            null,
            GL.GL_STREAM_DRAW);
    gl.glBufferSubData(
            GL.GL_ARRAY_BUFFER,
            0,
            Float.SIZE*vert.capacity(),
            vert);
    gl.glBufferSubData(
            GL.GL_ARRAY_BUFFER,
            Float.SIZE*vert.capacity(),
            Float.SIZE*col.capacity(),
            col);

    // Index Buffer
    gl.glGenBuffers(1, IBO);
    gl.glBindBuffer(GL.GL_ELEMENT_ARRAY_BUFFER, IBO.get(0));
    gl.glBufferData(GL.GL_ELEMENT_ARRAY_BUFFER, Short.SIZE*ind.capacity(), ind, GL.GL_STATIC_DRAW);
    gl.glBindBuffer(GL.GL_ELEMENT_ARRAY_BUFFER, 0);

}

public void display(GLAutoDrawable drawable) {
    GL gl = drawable.getGL();

    gl.glClear( GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT );

    gl.glMatrixMode(GL.GL_MODELVIEW);
    gl.glLoadIdentity();

    this.vert.rewind();
    this.col.rewind();
    this.ind.rewind();

    // Activating
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, VBO.get(0));
    gl.glEnableClientState(GL.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL.GL_COLOR_ARRAY);
    // Pointing
    gl.glVertexPointer(3, GL.GL_FLOAT, 0, 0);
    gl.glColorPointer(3, GL.GL_FLOAT, 0, Float.SIZE*vert.capacity());
    // drawing
    gl.glBindBuffer(GL.GL_ELEMENT_ARRAY_BUFFER, IBO.get(0));
    gl.glDrawElements(GL.GL_TRIANGLE_STRIP, ind.capacity(), GL.GL_UNSIGNED_BYTE, 0);
    // Desactivating
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, 0);
    gl.glDisableClientState(GL.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL.GL_COLOR_ARRAY);

    // Flush all drawing operations to the graphics card
    gl.glFlush();
}

public void displayChanged(GLAutoDrawable drawable, boolean modeChanged, boolean deviceChanged) {
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:40:46.610

终于让它工作了！从最初的代码，我做了这些改变：

*   我使用 short (0-255) 作为颜色类型，我将其更改为 float (0.0-1.0)
*   与其使用 glBufferSubData 将数据单独上传到缓冲区，不如使用 glBufferData，因此需要将颜色和位置合并到一个数组中。
*   创建缓冲区对象后调用 flip() 以使其可供使用。
*   与其从 FloatBUffer 类调用`allocate(nbytes)`，不如从 BufferUtils 创建一个新缓冲区
*   使用`BufferUtil.SIZEOF_FLOAT`而不是`Float.SIZE`

因此，我得到了一个显示旋转四面体的工作代码：

```
public class GLRenderer implements GLEventListener {

int VBO, IBO;
FloatBuffer values;
ShortBuffer ind;
int nVertex;
double angleX = 0, angleZ = 0;

public void init(GLAutoDrawable drawable) {
    // Use debug pipeline
    // drawable.setGL(new DebugGL(drawable.getGL()));

    GL gl = drawable.getGL();
    System.err.println("INIT GL IS: " + gl.getClass().getName());

    // Enable VSync
    gl.setSwapInterval(1);
    gl.glEnable(GL.GL_DEPTH_TEST);

    // Setup the drawing area and shading mode
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    //gl.glClearColor(1.0f, 1.0f, 1.0f, 1.0f);
    gl.glShadeModel(GL.GL_SMOOTH); // try setting this to GL_FLAT and see what happens.

    createBuffers(drawable);
}

public void reshape(GLAutoDrawable drawable, int x, int y, int width, int height) {
    GL gl = drawable.getGL();
    GLU glu = new GLU();

    if (height <= 0) { // avoid a divide by zero error!

        height = 1;
    }
    final float h = (float) width / (float) height;
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL.GL_PROJECTION);
    gl.glLoadIdentity();
    glu.gluPerspective(45.0f, h, 1.0, 20.0);
    glu.gluLookAt(3, 3, 3, 0, 0, 0, 0, 0, 1);
    gl.glMatrixMode(GL.GL_MODELVIEW);
    gl.glLoadIdentity();
}

public void initDataBuffer(){
    float[] vertexArray = {
        0, 0, 1,
        -1, 0, 0,
        0, 1, 0,
        1, 0, 0,
        0, -1, 0            
    };
    int n1 = vertexArray.length;
    float[] colorArray ={
        1.0f, 0.0f, 0.0f,
        0.0f, 1.0f, 0.0f,
        0.0f, 0.0f, 1.0f,
        1.0f, 1.0f, 0.0f,
        1.0f, 1.0f, 1.0f
    };
    int n2 = colorArray.length;

    if(n1!=n2){
        System.err.println("Color and vertex do not match in size");
        System.exit(-1);
    }

    nVertex = (int)(n1/3);

    short[] indexArray = {
        0, 1, 2,
        0, 2, 3,
        0, 3, 4,
        0, 1, 4,
        1, 2, 3,
        1, 3, 4
    };
    ind = BufferUtil.newShortBuffer(indexArray.length);
    ind.put(indexArray);
    ind.flip();

    values = BufferUtil.newFloatBuffer(vertexArray.length+colorArray.length);
    values.put(vertexArray);
    values.put(colorArray);
    values.flip();
}

public void createBuffers(GLAutoDrawable drawable){
    initDataBuffer();

    GL gl = drawable.getGL();
    int[] temp = new int[2];
    gl.glGenBuffers(2, temp, 0);

    VBO = temp[0];
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, VBO);
    gl.glBufferData(GL.GL_ARRAY_BUFFER, values.capacity() * BufferUtil.SIZEOF_FLOAT,
                        values, GL.GL_STATIC_DRAW);
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, 0);

    IBO = temp[1];
    gl.glBindBuffer(GL.GL_ELEMENT_ARRAY_BUFFER, IBO);
    gl.glBufferData(GL.GL_ELEMENT_ARRAY_BUFFER, ind.capacity() * BufferUtil.SIZEOF_SHORT,
                        ind, GL.GL_STATIC_DRAW);
    gl.glBindBuffer(GL.GL_ELEMENT_ARRAY_BUFFER, 0);
}

public void display(GLAutoDrawable drawable) {

    GL gl = drawable.getGL();

    gl.glClear( GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT );

    gl.glMatrixMode(GL.GL_MODELVIEW);
    gl.glLoadIdentity();

    gl.glRotated(angleZ,0,0,1);
    gl.glRotated(angleX,1,0,0);

    gl.glEnableClientState(GL.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL.GL_COLOR_ARRAY);
    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, VBO);
    gl.glVertexPointer(3, GL.GL_FLOAT, 0, 0);
    gl.glColorPointer(3, GL.GL_FLOAT, 0, nVertex*3*BufferUtil.SIZEOF_FLOAT);
    gl.glBindBuffer(GL.GL_ELEMENT_ARRAY_BUFFER, IBO);
    gl.glDrawElements(GL.GL_TRIANGLES, ind.capacity(), GL.GL_UNSIGNED_SHORT, 0);

    gl.glDisableClientState(GL.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL.GL_COLOR_ARRAY);

    angleX += 1;
    angleZ += 1;

    // Flush all drawing operations to the graphics card
    gl.glFlush();
}

public void displayChanged(GLAutoDrawable drawable, boolean modeChanged, boolean deviceChanged) {
} 
```

}

# perl - 根据给定的 ID 列表从文本文件中提取所有行

> ID：13732295
> 
> 赞同：4
> 
> 时间：2012-12-05T20:57:14.953
> 
> 标签：perl, unix, awk

我有 2 个文本文件。`file1`包含一个 ID 列表：

```
11002
10995
48981
79600 
```

`file2`：

```
10993   item    0
11002   item    6
10995   item    7
79600   item    7
439481  item    5
272557  item    7
224325  item    7
84156   item    6
572546  item    7
693661  item    7
..... 
```

我正在尝试选择`file2`ID（第一列）所在的所有行`file1`。目前，我正在做的是遍历第一个文件以创建一个正则表达式，如：

```
^\b11002\b\|^\b10995\b\|^\b48981\b|^\b79600\b 
```

然后运行：

```
grep '^11002\|^10995\|^48981|^79600' file2.txt 
```

但是当 ID 的数量`file1`太大（~2000）时，正则表达式会变得很长并且`grep`变慢。还有其他方法吗？我正在使用 Perl + Awk + ​​Unix。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T21:03:19.993

使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)。它可能是内存密集型的，但查找是在恒定时间内进行的。这是一个高效且正确的过程——不是唯一的，而是高效且正确的——用于创建哈希表、`file1`用作键以及`file2`在哈希表中查找键。如果键在哈希表中，则该行将打印到标准输出：

```
#!/usr/bin/env perl

use strict;
use warnings;

open FILE1, "< file1" or die "could not open file1\n";
my $keyRef;
while (<FILE1>) {
   chomp;
   $keyRef->{$_} = 1;
}
close FILE1;

open FILE2, "< file2" or die "could not open file2\n";
while (<FILE2>) {
    chomp;
    my ($testKey, $label, $count) = split("\t", $_);
    if (defined $keyRef->{$testKey}) {
        print STDOUT "$_\n";
    }
}
close FILE2; 
```

在 Perl 中有很多方法可以做同样的事情。也就是说，我重视清晰和明确而不是花哨的晦涩，因为您永远不知道何时必须回到 Perl 脚本并进行更改，而且它们很难管理，因为它是。一个人的看法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T21:13:29.743

```
awk 'NR==FNR{tgts[$1]; next} $1 in tgts' file1 file2 
```

看：

```
$ cat file1
11002
10995
48981
79600
$ cat file2
10993   item    0
11002   item    6
10995   item    7
79600   item    7
439481  item    5
272557  item    7
224325  item    7
84156   item    6
572546  item    7
693661  item    7
$ awk 'NR==FNR{tgts[$1]; next} $1 in tgts' file1 file2
11002   item    6
10995   item    7
79600   item    7 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T21:38:17.587

我建议使用专门为此而设计的工具。使用连接命令。做“男人加入”以获取更多信息。

```
linux_prompt> join file1 file2
11002 item 6
10995 item 7
79600 item 7 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T20:59:54.977

使用`grep`：

```
$ grep -f f1 f2
11002   item    6
10995   item    7
79600   item    7 
```

注意：我在多个系统上测试了很多建议的答案，有些只显示最后一场比赛`79600 item 7`！？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T21:04:53.837

将第一个文件的所有元素加载到哈希中。对于第二个文件的每一行，`^(\d*)` 如果哈希包含提取的数字，则使用正则表达式提取数字，打印它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T22:07:38.063

使用进程替换将 file1 中的 ID 转换为正则表达式：

```
grep -f <(sed 's/.*/^&\\b/' file1) file2 
```

我假设您正在使用 bash 或类似功能的外壳

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T22:50:20.757

简单的 perl 解决方案是使用散列并计算寻找的数字的出现次数。

```
perl -lanwe 'print if $a{$F[0]}++ == 1;' file1.txt file2.txt 
```

我从您的示例数据中得到以下输出：

```
11002   item    6
10995   item    7
79600   item    7 
```

请注意，您需要在命令行中以正确的顺序使用这些文件。

这将打开并读取输入文件名`-n`（更改为.`-a``@F``== 1``>= 1`

Note that the `++` operator is applied after the equality comparison is done.

# mysql - MySQL 中的 BETWEEN 执行时间长

> ID：13732298
> 
> 赞同：4
> 
> 时间：2012-12-05T20:57:19.707
> 
> 标签：mysql, query-optimization

此查询的执行时间超过 2 秒（对于 10k 行）。是否可以优化此查询？

```
SELECT id, MIN(ABS(timestamp_a - timestamp_b))
FROM a 
  INNER JOIN b ON ( timestamp_a  between (timestamp_b - 5 * 60) 
              AND (timestmap_b + 5 * 60) )
GROUP BY id 
```

示例结果（id、timestamp_a、timestamp_b、diff）：

```
1   1349878538  1349878539  1
2   1349878679  1349878539  2
3   1349878724  1349878539  1
5   1349878836  1349878539  1
6   1349878890  1349878641  1 
```

表一

```
CREATE TABLE `a` (
`id`  int(11) NOT NULL AUTO_INCREMENT ,
`timestamp_a`  bigint(20) NULL DEFAULT NULL ,
PRIMARY KEY (`id`),
INDEX `a` (`timestamp_a`) USING BTREE 
) 
```

表b

```
CREATE TABLE `b` (
`id`  int(11) NOT NULL AUTO_INCREMENT ,
`timestamp_b`  bigint(20) NULL DEFAULT NULL ,
PRIMARY KEY (`id`),
INDEX `b` (`timestamp_b`) USING BTREE 
) 
```

两个表之间不相关 - 我从表 'a' 中搜索位于表 'b' 中的时间戳之间的记录。

**编辑：简单的解决方案（运行非常快）：**

```
SELECT id, MIN(ABS(timestamp_a - timestamp_b))
FROM (SELECT id, timestamp, (timestamp - 5 * 60) timestamp_a, (timestamp + 5 * 60) timestamp_b) a
INNER JOIN b ON ( timestamp between timestamp_a AND timestamp_b )
GROUP BY id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:24:40.257

采用 Michael 对修改的时间戳列的约定，此查询将产生原始查询的预期结果，并具有上述“更快”查询的性能：

```
SELECT a.id, MIN(ABS(a.timestamp_a - tmp_b.timestamp_b))
FROM (SELECT id, timestamp_b, (timestamp_b - 5 * 60) timestamp_b_minus, (timestamp_b + 5 * 60) timestamp_b_plus) tmp_b
INNER JOIN a ON ( a.timestamp_a between tmp_b.timestamp_b_minus AND tmp_b.timestamp_b_plus )
GROUP BY a.id 
```

原始查询是体验性能限制的原因是，由于 ON 子句中使用的公式，RDBMS 被迫`b`对每一行执行全表扫描。`a`

即使“更快”查询需要全表扫描`b`来生成“临时”表`tmp_b`，它也能够使用索引来根据条件`a.timestamp_a`从中提取适当的值`a`：**tmp_b.timestamp_b_minus AND tmp_b.timestamp_b_plus**

# c# - 如何从 MonoTouch 应用程序中的单独程序集加载文件？

> ID：13732300
> 
> 赞同：1
> 
> 时间：2012-12-05T20:57:26.803
> 
> 标签：c#, ios, sqlite, xamarin.ios, nunit

我有一个包含几个项目的 MonoTouch 解决方案。其中一个项目是一个可执行项目。它有一个 SQLite3 数据库文件，即 ./Resources/db.sqlite3。它在其属性中设置为 BundleResource。然后，我有一个第一个测试项目。

有没有办法从测试项目中加载第一个项目的数据库？除了将数据库文件复制到测试项目中，这并不理想，我还没有找到方法。

```
NSBundle.MainBundle.PathForResource("db", "sqlite3"); 
```

在测试项目中找不到任何东西。

查看里面的测试项目

```
/Users/me/Library/Application Support/iPhone Simulator/6.0/Applications/{GUID}/Test.app/ 
```

我没有看到实际的项目程序集，只是它的别名。这似乎是它应该的样子，因为它仍然可以访问类文件并且所有非数据库测试都通过了。

谷歌搜索没有发现任何问题；在这里搜索也没有，只是从你已经在的程序集中加载东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:33:55.527

您不能跨 iOS 应用程序共享文件——至少不能在设备上。

如果您知道（例如使用绝对路径）或猜测您想要的文件的路径，您可以使用模拟器解决这个问题。

**请记住，如果您想在设备上执行（或测试）它，这将不起作用。**

> 我没有看到实际的项目程序集，只是它的别名。

在某些情况下（并且仅在模拟器上）MonoTouch 将使用*符号链接*而不是复制文件。这使得模拟器上的编辑/构建/调试周期更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:15:03.317

我认为不建议使用“资源”作为文件夹名称，这会带来问题。此外，您应该将构建操作设置为“内容”

在主应用程序项目中引用包含文件的项目。从包含 db 文件的项目中实例化至少一个类/对象。这可以是一个虚拟类。现在，编译器将在编译时将具有构建操作“内容”的引用项目中的所有内容复制到应用程序包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:31:37.027

在浏览和尝试 svn 的建议时，我和一位同事注意到您可以在项目中添加指向现有文件的链接。

我们在应用程序项目中保持一切不变。然后在测试项目中：

1.  右键单击文件夹并选择添加->添加文件...
2.  从应用项目中选择数据库文件
3.  点击确定
4.  在弹出窗口中选择“添加文件链接”
5.  点击确定

测试项目现在有一个指向 db.sqlite3 文件的链接，并且我们所有的数据库测试都通过了。

感谢您指导我们找到解决方案。

另外，我想指出我没有创建一个名为 Resources 的文件夹，我知道它是保留的，我只是用它来保存数据库的副本。它被复制到 /Documents 并从中使用，以便我们可以写入它。

# java - 使用 GWT 延迟绑定将非 gwt 类替换为 gwt 类

> ID：13732302
> 
> 赞同：2
> 
> 时间：2012-12-05T20:57:30.507
> 
> 标签：java, xml, gwt, dom, w3c

我有一个*非常简单*的问题，我希望可以使用 GWT 的延迟绑定来解决。

我有大量编写到 org.w3c.dom.* 接口的代码。我不想更改这段代码，所以我希望我可以在编译时换掉这些类。

像这样的东西（即使它不起作用）：

```
<replace-with class="com.google.gwt.dom.client.Document">
    <when-type-is class="org.w3c.dom.Document"/>
  </replace-with> 
```

据我了解，我认为这里的问题是我的两个类都需要实现相同的接口。如果我错了，请纠正我，这让我处于需要返工很多事情以使其满足我需要的情况。

我希望有一个更简单的解决方案？

谢谢，

凯西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:25:21.370

查看`<super-source>`指令（请参阅开发指南的[组织项目](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects?hl=en)部分中的**用另一个包实现覆盖一个包实现）。**

# entity-framework - 在一个模型中创建多个表 ASP.Net MVC 4

> ID：13732305
> 
> 赞同：0
> 
> 时间：2012-12-05T20:57:35.960
> 
> 标签：entity-framework, database-design, ef-code-first, normalization

我有一个 Person 模型，它代表一个人的不同方面。在我的个人模型中，我有以下内容：

```
public class PersonsContext : DbContext
    {
        public PersonsContext()
            : base("SiteDBCon")
        {
        }

        public DbSet<Person> Persons { get; set; }

        public DbSet<UserProfile> UserProfiles { get; set; }
    }

    public class Person
    {
        public int ID { get; set; }
        public int Age { get; set; }
        public string Gender { get; set; }
        public string Race { get; set; }
        public string Ethnicity { get; set; }
        public int UserId { get; set; }                //User who input data
        public UserProfile UserProfile { get; set; }   //User who input data

    } 
```

但是，有些事情，一个人可以有多个条目，地址 - 当前以前的，电话号码当前以前的等等。所有这些我都想要在单独的表格中。我可以在 PersonModel 中添加这些表，还是需要为每个表创建一个新模型，例如。地址模型，电话模型？它们都将与 Person 表具有一对多的关系。如果你能做到，那么将所有东西都放在一个模型中是个好主意。过去我创建了单独的模型，但我质疑这是否有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:14:43.217

您指的是[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)。一般来说，只要您在模型中看到多对一或多对多关系，您就希望对数据进行规范化。

主要问题是，一个人是否总是只有一个地址/电话？如果是这样，将它们保留在您的 Person 模型中可能是有意义的。如果他们*可能*（现在或将来）有多个地址/电话，那么最好将它们标准化为不同的模型。

即使您现在不需要多个地址/电话，您也可能在某个时候需要，因此，大多数人会选择像这样规范化相关。

另一个好处是，这将允许您将类型分配给您的地址（运输/账单）和电话（手机/家庭/工作）。

`List<>`如果我是你，我会考虑建立一个 Address 和 Phone 模型，并通过 a （或 other ）将它们作为与你的 Person 的一对多关系`IEnumerable<>`。

# php - 如何在 SoapClient 中维护会话 - PHP

> ID：13732307
> 
> 赞同：0
> 
> 时间：2012-12-05T20:57:49.113
> 
> 标签：php, soap, soap-client

我正在尝试访问需要调用 2 种方法的 Web 服务，一种用于登录，另一种用于实际结果。

在 SoapUI 中进行测试后，我可以在检查“维护 HTTP 会话”后得到结果。所以我提出了一个登录请求，然后是结果请求，它工作了。

如何在 PHP 中处理“SOAP 会话”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:17:27.930

查看 php 的 SoapClient 类看起来并没有自动处理会话持久性的代码。

相反，您可以使用手动从 SoapClient 获取 cookie

> $SoapClient->_cookies

登录后，将其存储在某个位置（文件、数据库、内存缓存等），并在使用[__setCookie对后续（单独）调用进行任何查询之前设置该 cookie](http://php.net/manual/en/soapclient.setcookie.php)

您可以尝试扩展 SoapClient 类并使用 cookie 持久性代码“装饰”它，因为在某些时候 cookie 可能会过期并且您的方法调用将失败。在这种情况下，您可以做一些事情来重新进行身份验证，并使用新的更新您的 cookie 数据。

# javascript - 立体主义图插值

> ID：13732309
> 
> 赞同：5
> 
> 时间：2012-12-05T20:58:04.237
> 
> 标签：javascript, d3.js, data-visualization, cubism.js

用 mbostock 自己的话来说，Cubism 是为了最大的信息密度而设计的——这意味着它通常希望每个像素显示一个数据点。虽然这在许多情况下很有用，但当您的数据本身不那么密集时，它就无济于事了。在这些情况下，你会得到丑陋的断断续续的图形，如下所示：

![在此处输入图像描述](../Images/14481c6563063fa12f5c06dad0dd32db.png)

有没有办法在 Cubism 中插入我的数据/图表以显示一个漂亮、平滑的图表？

编辑：

将 keepLastValue 添加到指标后，我得到了这个：

![在此处输入图像描述](../Images/53dca939c2e7e12f76c207288bf9cc6d.png)

以下是 Graphite 中显示的相同数据： ![在此处输入图像描述](../Images/de09669d42ba4c9486fd24cac3a23fb2.png)

我想平滑立体主义视图，使其看起来更像石墨（增加了地平线重叠的令人敬畏）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T02:11:10.103

Cubism 不会自动执行此操作，但 d3 有一个插值器，您可以使用它来填充中间值。[这](http://bl.ocks.org/3310323)是 Mike Bostock 使用自定义线插值器的示例；你可能对默认的没问题。

# java - 两个数组之间的差异

> ID：13732312
> 
> 赞同：11
> 
> 时间：2012-12-05T20:58:12.483
> 
> 标签：java, arrays

> **可能重复：**
> [java中arraylists的交集/并集](https://stackoverflow.com/questions/5283047/intersection-union-of-arraylists-in-java)

您好，我有两个字符串数组。我想打印两个数组之间的差异。有什么 java 方法可以解决这个问题吗？例如;

```
String[ ] first={"A","B","C"};
String[ ] second={"C","B"}; 
```

结果必须是“A”。感谢所有评论。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T21:00:19.277

将数组转换为`Set<String>`

```
new HashSet<String>(Arrays.asList(array)); 
```

做

```
Set<String> commonOnes = biggerSet.retainAll(smallerSet);
biggerSet.removeAll(commonOnes).add(smallerSet.removeAll(commonOnes)) 
```

或使用番石榴[`difference()`](http://docs.guava-libraries.googlecode.com/git-history/v9.0/javadoc/com/google/common/collect/Sets.html#difference%28java.util.Set,%20java.util.Set%29)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T21:53:03.740

这在 中运行`O(n log n + m log m)`，其中`n`是 的大小`first`，并且`m`是 的大小`second`。`LinkedList`基本上，它对数组进行排序，然后遍历每个数组，添加与每个机会不匹配的数组，然后在最后创建一个数组。此代码的早期版本无法正常工作，因为较长列表中的尾随元素没有在末尾添加。

```
public class SetDifference {
    public static void main(String... args) {
        String[] arrA = {"1", "2", "3", "4", "5", "25", "10"};
        String[] arrB = {"1", "2", "10", "4", "30"};

        System.out.println(Arrays.toString(differences(arrA, arrB)));
    }

    public static String[] differences(String[] first, String[] second) {
        String[] sortedFirst = Arrays.copyOf(first, first.length); // O(n)
        String[] sortedSecond = Arrays.copyOf(second, second.length); // O(m)
        Arrays.sort(sortedFirst); // O(n log n)
        Arrays.sort(sortedSecond); // O(m log m)

        int firstIndex = 0;
        int secondIndex = 0;

        LinkedList<String> diffs = new LinkedList<String>();  

        while (firstIndex < sortedFirst.length && secondIndex < sortedSecond.length) { // O(n + m)
            int compare = (int) Math.signum(sortedFirst[firstIndex].compareTo(sortedSecond[secondIndex]));

            switch(compare) {
            case -1:
                diffs.add(sortedFirst[firstIndex]);
                firstIndex++;
                break;
            case 1:
                diffs.add(sortedSecond[secondIndex]);
                secondIndex++;
                break;
            default:
                firstIndex++;
                secondIndex++;
            }
        }

        if(firstIndex < sortedFirst.length) {
            append(diffs, sortedFirst, firstIndex);
        } else if (secondIndex < sortedSecond.length) {
            append(diffs, sortedSecond, secondIndex);
        }

        String[] strDups = new String[diffs.size()];

        return diffs.toArray(strDups);
    }

    private static void append(LinkedList<String> diffs, String[] sortedArray, int index) {
        while(index < sortedArray.length) {
            diffs.add(sortedArray[index]);
            index++;
        }
    }
} 
```

# sql - HP Quality Center 中的“WITH”SQL 语句 - 无效语句 - Oracle DB

> ID：13732318
> 
> 赞同：1
> 
> 时间：2012-12-05T20:58:30.313
> 
> 标签：sql, oracle, inner-join, common-table-expression, hp-quality-center

尝试在 HP Quality Center 中运行 SQL 查询时收到错误消息。消息是“Quality Center 无法运行查询，因为它包含无效语句。数据库是 Oracle。我的查询是：

```
WITH AUDIT AS
(
SELECT AUDIT_LOG.AU_ENTITY_ID AS DEFECT_ID,
       MIN(AUDIT_LOG.AU_TIME) AS Date_Deferred,
       AUDIT_LOG.AU_USER AS UserName_Deferred
FROM AUDIT_LOG
INNER JOIN AUDIT_PROPERTIES
ON AUDIT_LOG.AU_ACTION_ID = AUDIT_PROPERTIES.AP_ACTION_ID
WHERE AUDIT_LOG.AU_ENTITY_TYPE = 'BUG' 
  AND AUDIT_LOG.AU_ACTION = 'UPDATE' 
  AND AUDIT_PROPERTIES.AP_TABLE_NAME = 'BUG' 
  AND AUDIT_PROPERTIES.AP_FIELD_NAME = 'BG_STATUS' 
  AND AUDIT_PROPERTIES.AP_NEW_VALUE = 'Deferred'
GROUP BY
    AUDIT_LOG.AU_ENTITY_ID,AUDIT_LOG.AU_USER
),

WITH BUG_LIST AS
(
SELECT BUG.BG_BUG_ID/*Defect.Defect ID*/, BUG.BG_DETECTION_DATE /*Defect.Detected on Date*/,  BUG.BG_USER_01 /*Defect.Application*/, BUG.BG_SEVERITY /*Defect.Severity*/, BUG.BG_STATUS /*Defect.Status*/,  BUG.BG_USER_11 /*Defect.Planned Closing Date*/,  BUG.BG_DETECTED_BY /*Defect.Detected By*/
FROM   BUG /*Defect*/
WHERE  BUG.BG_USER_17 /*Defect.Finding Group*/ = 'UAT'
ORDER BY  BUG.BG_DETECTION_DATE ASC
)

SELECT *
FROM BUG_LIST
INNER JOIN AUDIT ON AUDIT.DEFECT_ID = BUG_LIST.BG_BUG_ID 
```

“AUDIT”查询正在查找 QC 中在某些时候其状态更改为“Deferred”的任何错误。这包含来自所有使用 HPQC 的团队的错误。“BUG_LIST”查询专门查找“UAT”组发现的错误。我可以单独运行每个查询并尝试将两者结合起来，以便获得“UAT”发现的错误列表。如果 UAT 发现的错误具有与其关联的延迟日期状态更改，请显示此信息，如果没有，请将此信息留空以获取特定缺陷。

我之所以尝试这样做是因为任何进入“延期”状态的错误都没有像已关闭错误那样的“计划结束日期”。正因为如此，而不是结束日期，我希望看到错误进入延期状态的日期，并认为这是我的“结束日期”。

HPQC 不支持“WITH”语句吗？有什么方法可以成功组合并运行这些查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:20:47.087

你只需要`with`出现一次，所以去掉`with`之前的BUG_LIST：

```
 WITH AUDIT AS
(
SELECT
AUDIT_LOG.AU_ENTITY_ID AS DEFECT_ID,
MIN(AUDIT_LOG.AU_TIME) AS Date_Deferred,
AUDIT_LOG.AU_USER AS UserName_Deferred
FROM AUDIT_LOG
INNER JOIN AUDIT_PROPERTIES
ON AUDIT_LOG.AU_ACTION_ID = AUDIT_PROPERTIES.AP_ACTION_ID
WHERE AUDIT_LOG.AU_ENTITY_TYPE = 'BUG' AND AUDIT_LOG.AU_ACTION = 'UPDATE' AND AUDIT_PROPERTIES.AP_TABLE_NAME = 'BUG' AND AUDIT_PROPERTIES.AP_FIELD_NAME = 'BG_STATUS' AND AUDIT_PROPERTIES.AP_NEW_VALUE = 'Deferred'
GROUP BY
AUDIT_LOG.AU_ENTITY_ID,AUDIT_LOG.AU_USER
),

    BUG_LIST AS
(
SELECT BUG.BG_BUG_ID/*Defect.Defect ID*/, BUG.BG_DETECTION_DATE /*Defect.Detected on Date*/,  BUG.BG_USER_01 /*Defect.Application*/, BUG.BG_SEVERITY /*Defect.Severity*/, BUG.BG_STATUS /*Defect.Status*/,  BUG.BG_USER_11 /*Defect.Planned Closing Date*/,  BUG.BG_DETECTED_BY /*Defect.Detected By*/
FROM   BUG /*Defect*/
WHERE  BUG.BG_USER_17 /*Defect.Finding Group*/ = 'UAT'
ORDER BY  BUG.BG_DETECTION_DATE ASC
)

SELECT *
FROM BUG_LIST
INNER JOIN AUDIT ON AUDIT.DEFECT_ID = BUG_LIST.BG_BUG_ID 
```

您始终可以使用子查询将它们组合成一个`from`语句：

```
select *
from (your bug_list query here) bl inner join
     (your audit query here) a
     on a.defect_id = bl.bd_bug_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:01:04.940

**WITH**通常用于允许您重用其中一个**with 子句**。在这种情况下，不需要它，因此可以像这样重写查询。（我无法对此进行测试）

```
SELECT audit.*, bug_list.*
FROM 
(
    SELECT BUG.BG_BUG_ID/*Defect.Defect ID*/, 
           BUG.BG_DETECTION_DATE /*Defect.Detected on Date*/,  
           BUG.BG_USER_01 /*Defect.Application*/, 
           BUG.BG_SEVERITY /*Defect.Severity*/, 
           BUG.BG_STATUS /*Defect.Status*/,  
           BUG.BG_USER_11 /*Defect.Planned Closing Date*/,  
           BUG.BG_DETECTED_BY /*Defect.Detected By*/
    FROM   BUG /*Defect*/
    WHERE  BUG.BG_USER_17 /*Defect.Finding Group*/ = 'UAT'
) BUG_LIST,
(
    SELECT AUDIT_LOG.AU_ENTITY_ID AS DEFECT_ID,
           MIN(AUDIT_LOG.AU_TIME) AS Date_Deferred,
           AUDIT_LOG.AU_USER AS UserName_Deferred
    FROM AUDIT_LOG
    INNER JOIN AUDIT_PROPERTIES
    ON AUDIT_LOG.AU_ACTION_ID = AUDIT_PROPERTIES.AP_ACTION_ID
    WHERE AUDIT_LOG.AU_ENTITY_TYPE = 'BUG' 
      AND AUDIT_LOG.AU_ACTION = 'UPDATE' 
      AND AUDIT_PROPERTIES.AP_TABLE_NAME = 'BUG' 
      AND AUDIT_PROPERTIES.AP_FIELD_NAME = 'BG_STATUS' 
      AND AUDIT_PROPERTIES.AP_NEW_VALUE = 'Deferred'
    GROUP BY
        AUDIT_LOG.AU_ENTITY_ID,AUDIT_LOG.AU_USER
) AUDIT
INNER JOIN AUDIT 
ON AUDIT.DEFECT_ID = BUG_LIST.BG_BUG_ID
ORDER BY  BUG_list.BG_DETECTION_DATE ASC 
```

# jquery - jquery 创建的 svg rect 没有出现

> ID：13732326
> 
> 赞同：1
> 
> 时间：2012-12-05T20:58:54.727
> 
> 标签：jquery, svg

我正在尝试使用 jQuery 而不是其他库创建一个 SVG 条形图，但是当我创建我的矩形时，它们不会出现在浏览器中，尽管在 html 中输入的相同的会出现。

```
var data = [4, 8, 15, 16, 23, 42];
var chart = jQuery("#chart");
jQuery.each(data, function(index, value) {
    var bar = jQuery("<rect/>");
    chart.append(bar);
    bar.attr("y", index * 20)
        .attr("width", value * 10)
        .attr("height", 20);
}); 
```

和html：

```
<svg id="chart" class="chart" width=420 height=120 style="display: block;">
    <rect y="0" width="40" height="20"></rect> <!--added to test-->
</svg> 
```

输入的 rect 标记看起来很好，并且使用 Chrome 中的开发人员工具，它看起来与我的代码生成的第一个相同，但生成的代码不会显示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T21:08:27.063

```
$(document).ready(function() {
    var data = [4, 8, 15, 16, 23, 42];
    var chart = jQuery("#chart2");
    jQuery.each(data, function(index, value) {
        var bar = $(document.createElementNS("http://www.w3.org/2000/svg", "rect")).attr({
            x: 0,
            y: index * 20,
            width: value * 10,
            height: 20,
            stroke: "red",
            fill: "white"
        });
        chart.append(bar);
    });
});​ 
```

[http://jsfiddle.net/26ybf/](http://jsfiddle.net/26ybf/)

编辑：显然你可以删除描边和填充属性，我只是把它放在那里以确保它正常工作。干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:06:58.750

尝试刷新您的元素：

```
jQuery.each(data, function(index, value) {
    ...
}    
chart.html(function(){return this.innerHTML}); 
```

[见 jsFiddle](http://jsfiddle.net/26ybf/10/)

# ruby-on-rails - Rails 中 where hash 的条件

> ID：13732328
> 
> 赞同：0
> 
> 时间：2012-12-05T20:59:04.557
> 
> 标签：ruby-on-rails, orm

我有一个看起来像这样的查询：

```
 User.includes(:notifications).where({:type => 'Nice', :notifications => {:name =>'Weekly email'} }) 
```

我怎样才能修改这个查询，以便在哪里， :type 可以是 'Nice', 'nice', 'nicely', 'good' ？

我怎样才能把 OR 放在那里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:04:01.877

这就是你的做法

`User.includes(:notifications).where({:type => ['Nice','nice','nicely','good'], :notifications => {:name =>'Weekly email'} })`

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:02:11.873

您可以在条件中传递一个数组来测试几个值：

```
User.includes(:notifications).where({:type => ['Nice', 'nice', 'nicely', 'good'], :notifications => {:name =>'Weekly email'} }) 
```

它将生成一个带有`IN`子句的 SQL 请求。

# php - PHP显示登录用户信息

> ID：13732331
> 
> 赞同：-2
> 
> 时间：2012-12-05T20:59:13.360
> 
> 标签：php, mysql, database, login

我对 php 很陌生，现在我正在尝试制作一个积分系统。每当人们做一些好事时，他们都会得到一个点，我可以访问并且可以远程访问数据库。但现在唯一的问题是，人们无法确定自己的观点。我有一个名为“login”的数据库和一个名为“users”的数据库。

我知道如何设置“Welcome dude123(username)”，但我不知道如何举例：你得了 4 分

当用户登录时，我希望向用户显示的用户点：http://i48.tinypic.com/343q8ex.jpg

我的数据库：http: [//i50.tinypic.com/33kygqd.jpg](http://i50.tinypic.com/33kygqd.jpg)

当我输入代码时，它会向用户显示位于顶部的点。每个人都可以看到它！我只希望特定用户拥有自己的。

当我使用此代码时，我收到此错误：http: [//i46.tinypic.com/jzcoea.jpg](http://i46.tinypic.com/jzcoea.jpg)

```
<?php
require("dbc.php"); 

$sql = "SELECT * from `users` WHERE `username` = " . $_POST['username']; 
$result = mysql_query ($sql);

$query = "SELECT * FROM `users` WHERE `username` = '$username'";
$result = mysql_query($query) or die(mysql_error());

while ($row = mysql_fetch_assoc($result)) {
   $points = $row['points'];

}
echo 'You have ' . $points . 'points.<br />';
?> 
```

登录.php：

```
<?php

session_start();

$username = $_POST['username'];
$password = $_POST['password'];

if ($username&&$password)
{

    $connect = mysql_connect("localhost","root","") or die ("Couldent connect to database");
    mysql_select_db("login") or die ("Couldent find database"); 

    $query = mysql_query("SELECT * FROM users WHERE username='$username'");

    $numrows = mysql_num_rows($query);

    if($numrows !=0)

    {

    while ($row = mysql_fetch_assoc($query))
    {
         $dbusername =  $row['username'];
         $dbpassword =  $row['password'];

    }
       if ($username==$dbusername&&$password==$dbpassword)
       {
           echo "Login successful. <a href='membersarea.php'>CLick here to enter the members area</a> ";
           $_SESSION['username']=$dbusername; 

$handle = fopen("logs/logins.txt", "a");
foreach($_POST as $variable => $value) {
   fwrite($handle, $variable);
   fwrite($handle, "=");
   fwrite($handle, $value);
   fwrite($handle, "\r\n");
}
fwrite($handle, "\r\n");
fclose($handle);

$ip = $_SERVER['REMOTE_ADDR'];
$pagina = $_SERVER['REQUEST_URI'];
$datum = date("d-m-y / H:i:s");
$invoegen = $datum . " - " . $ip . " - " . $pagina . "<br />";
$fopen = fopen("logs/ips.txt", "a");
fwrite($fopen, $invoegen);
fclose($fopen);

exit;

       }
       else 
           echo "Incorrect password";
   }
   else 
      die ("That username doesnt exist");

}
else
   die ("Please enter a username and password");

?> 
```

和我想要显示点的 membersarea.php：

```
--><br />
  <br />

</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br />
</p>

<div align="center">
  <p><font size="8">Potten:</font>
  <?php 
mysql_connect ("localhost","root",""); 
mysql_select_db ("login"); 

$sql = "select * from info"; 
       $result = mysql_query ($sql); 

       while ($row = mysql_fetch_array($result)) 
              { 
              $potten= $row["potten"]; 
echo "$potten<br>";
      } 
?>
  </p>

  <p>&nbsp;</p>

</div>
</p>
<div id='cssmenu'>
<ul>
   <li class='has-sub '><a href='#'><span>Points</span></a>
      <ul>
         <li><a href='#'><span>Sell points</span></a></li>
         <li><a href='#'><span>Shop with points</span></a></li>
      </ul>
   </li>

   <li><a href='#'><span>Store</span></a> 
    </li>

   <li><a href='#'><span>Contact</span></a></li>
</ul>
</div>
<div id="highscore" align="center">
</blockquote>
<div class="gradientbuttons blacktheme" align="center">

</div>
<div align="center" >
<div style="width:99%; height:100px; border:3px solid black; font-size: 14px; font-style: italic;" align="center">
  <p>Highscore top 5   </p>

</div>

<div id="cboxdiv" style="text-align: center; line-height: 0">
<div><iframe frameborder="0" width="200" height="305" src="http://www7.cbox.ws/box/?boxid=655854&amp;boxtag=7j5vas&amp;sec=main" marginheight="2" marginwidth="2" scrolling="auto" allowtransparency="yes" name="cboxmain7-655854" style="border:#FFFFFF 1px solid;" id="cboxmain7-655854"></iframe></div>
<div><iframe frameborder="0" width="200" height="75" src="http://www7.cbox.ws/box/?boxid=655854&amp;boxtag=7j5vas&amp;sec=form" marginheight="2" marginwidth="2" scrolling="no" allowtransparency="yes" name="cboxform7-655854" style="border:#FFFFFF 1px solid;border-top:0px" id="cboxform7-655854"></iframe></div>
</div>
<div id="info" align="left">
<div id="text" align="bot">
<p>Totalt kj&oslash;pte lodd:  
    <?php
mysql_connect ("localhost","root",""); 
mysql_select_db ("login"); 

$sql = "select * from info"; 
       $result = mysql_query ($sql); 

       while ($row = mysql_fetch_array($result)) 
              { 
              $totallodd= $row["totallodd"];  

echo "$totallodd<br>"; 

              } 
?>
</p>
<p> <span class="sd">Dine poeng</span>:</p>
<p>Dine lodd:
  <?php

mysql_connect("localhost","root","");
mysql_select_db("login");

$sql = mysql_query("SELECT * FROM users ORDER BY id ASC"); 

$id ='id';
$buy = 'buy';

$rows =mysql_fetch_assoc($sql);

echo  '' . $rows[$buy];

?>
</p>

<center><script type="text/javascript" src="http://widget.supercounters.com/online_t.js"></script><script type="text/javascript">sc_online_t(395328,"Users Online","0");</script><br><noscript><a href="http://www.supercounters.com/">Free Tumblr Users Online Counter</a></noscript>
</center>
</div>
<?php

     echo "<a href='logout.php'>logge ut!</a>";

?>
</div>
</div>
</div>
<div class="gradientbuttons orangetheme"> </div></div><p>&nbsp;</p>
  </blockquote>
</blockquote>
<div id="fb-root" align="center">
<p style="color:#FF0000" >Du har fortsatt ikke aktivert poeng! <a href="activate.php">klikke her</a> for å få tilgang til poengene dine</p>
</div>

</body>
</html>
<!-- lappserver18 -->

<!-- [SB] PageID 250995577-->
<!-- null --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:11:06.717

在显示积分之前，Yu 需要对查看页面的用户进行登录检查。目前您的查询`$sql = "select * from info";`正在`$sql = "select * from info";` 选择这些表中的所有数据。* = 一切。您将需要使用您的`$_SESSION['username']`变量来仅查询和显示分配给该用户的点。

就像是：

```
$sql = "SELECT * FROM info WHERE username = " . $_SESSION['username']; 
```

从表中提取与用户名匹配的所有表信息，或者：

```
$sql = "SELECT points FROM info WHERE username = " . $_SESSION['username']; 
```

这只会从数据库表中提取并显示登录用户信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:49:31.843

我认为您的问题可能在 membersarea.php 中：

```
$sql = "select * from info"; 
```

你的`info`桌子的结构是什么？你能限制搜索，只搜索登录的用户吗？就像是：

```
$sql = "SELECT * from `info` WHERE `username` = " . $_POST['username']; 
```

我认为您正在为所有用户返回所有积分。做这个：

```
$num_rows = mysql_num_rows($sql);
echo $num_rows; 
```

也许[这个免费的视频教程](https://phpacademy.org/course/php-register-and-login-tutorial)会有所帮助：
[https ://phpacademy.org/course/php-register-and-login-tutorial](https://phpacademy.org/course/php-register-and-login-tutorial)

# c# - 我如何将 WPF 故事板代码转换为 VB.NET 或 C#.NET，以便将来可以在代码中创建故事板

> ID：13732332
> 
> 赞同：0
> 
> 时间：2012-12-05T20:59:13.727
> 
> 标签：c#, wpf, vb.net, storyboard

我有一个示例故事板，我想知道如何仅使用代码来实现，但我无法弄清楚。这是 WPF/XAML，任何指针将不胜感激。

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    AllowsTransparency="True"
        WindowStyle="None"
    Title="MainWindow" Height="350" Width="525" Background="Transparent" Topmost="True" WindowState="Maximized" ResizeMode="NoResize">
    <Canvas Name="canvas1">
        <Button Canvas.Left="145" Canvas.Top="155" Content="Button" Height="23" Name="Button1" Width="75">
            <Button.Triggers>
                <EventTrigger RoutedEvent="Button.MouseEnter">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="Button1" Storyboard.TargetProperty="Width" AutoReverse="true" RepeatBehavior="Forever">
                                <SplineDoubleKeyFrame KeyTime="00:00:00" Value="100"/>
                                <SplineDoubleKeyFrame KeyTime="00:00:05" Value="300"/>
                                <SplineDoubleKeyFrame KeyTime="00:00:10" Value="100"/>
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimation 
                Storyboard.TargetName="Button1"
                Storyboard.TargetProperty="(Canvas.Left)"
                From="100" To="600" Duration="0:0:10" AutoReverse="true" RepeatBehavior="Forever"/>
                            <DoubleAnimation 
                Storyboard.TargetName="Button1"
                Storyboard.TargetProperty="(Canvas.Top)"
                From="100" To="600" Duration="0:0:10" AutoReverse="true" RepeatBehavior="Forever"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Button.Triggers>
        </Button>
    </Canvas>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:04:34.717

你试过什么了？你有什么问题？

这个页面上有几个很好的例子：[http ://www.galasoft.ch/mydotnet/articles/article-2006102701.aspx](http://www.galasoft.ch/mydotnet/articles/article-2006102701.aspx)

# c# - C# LINQ to Entities 无法识别该方法

> ID：13732334
> 
> 赞同：1
> 
> 时间：2012-12-05T20:59:25.510
> 
> 标签：c#, asp.net, linq

LINQ to Entities 无法识别方法“Int64 getCount()”方法，并且该方法无法转换为存储表达式。

```
return query.OrderBy(e => e.Person.getCount(), sortDirection); 
```

我该如何重写这一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:02:14.853

请用：

```
return query.ToList().OrderBy(e => e.Person.getCount(), sortDirection); 
```

案例是 EF 尝试将`getCount()`方法转换为 SQL。由于它是自定义方法，因此无法完成，因此您应该调用`ToList()`以评估表达式并使 EF 将对象从数据库加载到内存。然后 linq 可以调用您的自定义函数来对数据进行排序。

# workflow-foundation-4 - 状态机自反转换

> ID：13732337
> 
> 赞同：0
> 
> 时间：2012-12-05T20:59:35.070
> 
> 标签：workflow-foundation-4, state-machine

在 WF 4.0 中，如果发生转换，自反转换不会导致状态进入动作重新运行。

在我看来，这不是一种过渡，而是一种包含的行为。自反转换应该离开并重新进入，但 WF 4.0 有限状态机的行为并非如此。

什么正式规范在这里适用，关于自反转换及其对状态、状态进入或退出行为的影响有什么共识，以及 wf 4.0 是如何做到这一点的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T02:11:51.817

如果“自反转换”是指“自我转换”，那么是的，我相信应该再次触发退出和进入事件。简而言之，这是您过渡到您已经处于的状态的地方...

# c++ - GCC 4.7 istream::tellg() 在达到 EOF 后返回 -1

> ID：13732338
> 
> 赞同：6
> 
> 时间：2012-12-05T20:59:38.460
> 
> 标签：c++, istream

以下代码适用于 gcc 4.4。
但是 gcc 4.7 会给出断言失败。

```
#include <assert.h>
#include <iostream>
#include <sstream>

using namespace std;

int main()
{

    string input("abcdefg");
    stringstream iss(input);
    ostringstream oss;
    oss << iss.rdbuf();

    assert (!iss.eof());
    (void) iss.peek();
    assert (iss.eof());

    // the following assertion will fail with gcc 4.7
    assert( streamoff(iss.tellg()) ==
            streamoff(input.length()) );

    return 0;
} 
```

在 gcc 4.7 中，如果 istream 已达到 EOF，tellg() 将返回 -1。不会调用 pubseekoff() 或 seekoff() 在 gcc 4.4 中这不是问题。

哪个应该是行为，gcc 4.4 或 gcc 4.7？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:04:44.983

根据 C++11 第 27.7.2.3p40 节，

> 如果`fail() != false`, 返回`pos_type(-1)`

因此 gcc 4.7 对于当前版本的 C++ 具有正确的行为（假设`peek()`在流结束时`failbit`设置，并且它在哨兵构造期间进行，因为`skipws`默认设置）。

看C++03的写法，也是一样。27.6.1.3p37。所以你在 gcc 4.4 中描述的行为是一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-22T14:03:28.327

准确地说，`eofbit`不会导致`tellg()`return `-1`。*但是您阅读过去*EOF的事实设置了`failbit`, 并且如果设置了or`tellg()`将返回。`-1``badbit``failbit`

解决方案是在调用之前清除状态标志`tellg()`：

```
iss.clear();
iss.tellg();  // should work 
```

# android - Android：带有空白数据的 ListView

> ID：13732339
> 
> 赞同：1
> 
> 时间：2012-12-05T20:59:37.567
> 
> 标签：android, listview, listactivity

我在开发时遇到了麻烦，这是我第一个使用 Eclipse JUNO 的 android 应用程序。我想用正确分配的公共静态变量填充 ListActivity 中的 Listview（使用调试器进行检查）。问题是列表视图向我显示了正确的行数，但数据为空白。

他是我的代码：

格里拉.java

```
import android.os.Bundle;
import android.app.ListActivity;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class Grilla extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try
        {
            SimpleAdapter adapter = new SimpleAdapter(Grilla.this, VariablesPublicas.listado_grilla, R.layout.mylistrow,
                    VariablesPublicas.ColumnTags, new int[] {R.id.column1, R.id.column2});
            setListAdapter(adapter);

            //getListView().setTextFilterEnabled(true);
        }
        catch(Exception e) {
            System.out.println(e.toString());
        }
    }

     protected void onListItemClick(ListView l, View v, int position, long id) {
            super.onListItemClick(l, v, position, id);
            Object o = l.getItemAtPosition(position);
            VariablesPublicas.itemSeleccionado = o.toString();
            finish();

    }

} 
```

mylistrow.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView
        android:id="@+id/column1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1"
        android:visibility="invisible" />

    <TextView
        android:id="@+id/column2"
        android:layout_width="fill_parent"
        android:layout_height="34dp"
        android:text="2" />

</LinearLayout> 
```

activity_grilla.xml (Grilla.java)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView
        android:id="@+id/listView_grilla"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        tools:listitem="@layout/mylistrow" >

    </ListView>

</LinearLayout> 
```

主要应用：

```
public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Button btn_buscarobra = (Button) findViewById(R.id.btn_buscarobra);

        btn_buscarobra.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                servicioweb WS = new servicioweb();
                try {
                    String obras = WS.ObtenerObras("");
                    org.w3c.dom.Document doc = WS.XMLfromString(obras);

                    NodeList nodes = doc.getElementsByTagName("entry");

                    //fill in the list items from the XML document
                    VariablesPublicas.listado_grilla = new ArrayList<HashMap<String, String>>();

                    for (int i = 0; i < nodes.getLength(); i++) {
                        Element e = (Element)nodes.item(i);
                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put("id_obra", servicioweb.getValue(e, "IdObra"));
                        map.put("obra", servicioweb.getValue(e, "Obra"));
                        //VariablesPublicas.listado_grilla.(new String[] {servicioweb.getValue(e, "IdObra"), 
                        //      }); 
                        VariablesPublicas.listado_grilla.add(map);

                    }   
                    VariablesPublicas.ColumnTags = new String[] {"#", "OBRA"};
                    Intent listaObras = new Intent(Main.this, Grilla.class);
                    startActivityForResult(listaObras,0);

                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });   
    } 
```

当我单击列表视图中的项目时，它会返回正确的值。

谢谢！

贡萨洛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:30:35.873

你有一个密钥不匹配。

中的键`VariablesPublicas.ColumnTags`应与地图中的键相对应。

使用任一：

```
map.put("id_obra", servicioweb.getValue(e, "IdObra"));
map.put("obra", servicioweb.getValue(e, "Obra"));
...
VariablesPublicas.ColumnTags = new String[] {"id_obra", "obra"}; 
```

或者：

```
map.put("#", servicioweb.getValue(e, "IdObra"));
map.put("OBRA", servicioweb.getValue(e, "Obra"));
...
VariablesPublicas.ColumnTags = new String[] {"#", "OBRA"}; 
```

# java - 将变量传递给另一个类是否使用同一个类？

> ID：13732342
> 
> 赞同：1
> 
> 时间：2012-12-05T20:59:46.120
> 
> 标签：java

如果我将映射传递给我创建的类，如果该类随后修改了映射，它会更改最初传递它的 main 方法中的映射吗？

第二个实例是否指向同一张地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:01:39.750

是的，调用者将看到被调用者所做的更改。

> 第二个实例是否指向同一张地图？

没有第二个实例（除非您明确制作地图的副本）。您所拥有的是对同一实例的两个引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:01:56.773

是的。您的**原始地图引用**（不是复制地图对象）被传递，并且在其他类中对地图所做的任何更改也将反映在 main 方法中的地图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:05:11.660

如果将地图传递给任何方法，则此方法可以更改地图的**内容**，然后对所有访问地图的人都可见。然而，该方法不能改变**地图对象**本身，例如用另一个地图替换地图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:01:04.003

是的，您正在传递一个参考值。

似乎这很容易通过实验证明，不是吗？

# c# - 如何在 C# 中检测 Windows Server 2008 上的防病毒软件？

> ID：13732351
> 
> 赞同：18
> 
> 时间：2012-12-05T21:00:10.507
> 
> 标签：c#, windows-server-2008, windows-server-2008-r2, antivirus

在寻找答案的过程中，我多次看到类似于以下的代码示例：

```
using System;
using System.Text;
using System.Management;

namespace ConsoleApplication1
{
  class Program
  {
    public static bool AntivirusInstalled()
    {

      string wmipathstr = @"\\" + Environment.MachineName + @"\root\SecurityCenter";
      try
      {
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(wmipathstr, "SELECT * FROM AntivirusProduct");
        ManagementObjectCollection instances = searcher.Get();
        return instances.Count > 0;
      }

      catch (Exception e)
      {
        Console.WriteLine(e.Message);
      }

      return false;
    } 

    public static void Main(string[] args)
    {
      bool returnCode = AntivirusInstalled();
      Console.WriteLine("Antivirus Installed " + returnCode.ToString());
      Console.WriteLine();
      Console.Read();
    }

  }
} 
```

不幸的是，Windows Server 2008 似乎没有`SecurityCenter`or`SecurityCenter2`命名空间，所以我`Invalid namespace`在尝试这种方法时遇到了异常。

有谁知道确定 Windows Server 2008 上是否运行防病毒软件的方法？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T22:48:56.917

使用 EICAR 测试病毒。

1.  让您的应用程序尝试在磁盘上写入以下文件之一：[http ://www.eicar.org/85-0-Download.html](http://www.eicar.org/85-0-Download.html)
2.  捕捉异常

它不仅适用于地球上的所有防病毒软件，而且还会告诉您防病毒软件是否处于活动状态！

如果您启用了防病毒软件，您可能会发现很难下载测试文件，因此您可能希望使用以下字符串：

```
X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H* 
```

请记住，您可能希望将字符串编码在您的应用程序中，并在将其写入磁盘之前对其进行解码。否则，您可能会冒着将您的应用程序检测为病毒的风险 :)

在 EICAR 网站上，他们说：

> 任何支持 EICAR 测试文件的防病毒产品都应该在任何文件中检测到它，前提是该文件以以下 68 个字符开头，并且长度正好为 68 个字节

但是，我不会指望 AV 开发人员已经阅读了规范，所以最好只保留字符串编码。事实上，我只是尝试将字符串保存在桌面上的 .txt 文件中，其中包含一些额外的字符，Windows Defender 开始尖叫。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T20:19:52.203

嗯，我最终玩弄了 PowerShell：

```
$avSoftware = get-wmiobject -class "Win32_Product" -namespace "root\cimv2" -computername "." -filter "Name like '%antivirus%'"
if ($avSoftware.Count -gt 0) {
    foreach ($av in $avSoftware) {
        write-host $p.Name
    }
} else {
    write-host "No AV software found"
} 
```

它似乎适用于我们的 Windows Server 2008 和 2008 R2 实例......

更多信息：[https ://serverfault.com/questions/12343/how-can-i-determine-whether-an-antivirus-product-is-installed](https://serverfault.com/questions/12343/how-can-i-determine-whether-an-antivirus-product-is-installed)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T17:12:31.103

前段时间我为一个客户遇到了这个问题，我最终对本地系统驱动程序和进程执行了字典搜索，以寻找已知的防病毒签名（例如文件夹名称、进程名称等）的模式。不是 100% 肯定，因为有人会在某个地方下载您不知道的全新防病毒软件，但除此之外，它非常有效......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T19:18:38.633

这更像是一个想法，而不是一个完美的解决方案。关于莱昂纳多的回答，如何使用实际的防病毒软件（链接）来搜索其他防病毒软件？ClamAV 是开源的，是一个很好的起点。您“仅”需要定义一个新的且相当具体的签名数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T14:54:30.607

根据大多数网络，SecurityCenter 和 SecurityCenter2 在 Windows Server 2008 上不可用（因为您已经为自己制定了）。

我找到了这篇 SO 文章，其中包含一个解决方法。 [如何使用 WMI 或其他 C++ 中的 WMI 检测安装在 Windows 2003 服务器和 2008 服务器 2003 服务器 R2 和 2008 服务器 R2 上的防病毒软件](https://stackoverflow.com/questions/4396757/how-to-detect-antivirus-installed-on-windows-2003-server-and-2008-server-2003-se)

诚然，这是一个 C++ 实现，但我看不出它不能移植到 C# 的原因

还找到了建议使用 OESIS 框架的此页面。 [http://social.msdn.microsoft.com/Forums/en/windowsgeneraldevelopmentissues/thread/b0806608-fee0-413c-a34d-674aeb11be3c](http://social.msdn.microsoft.com/Forums/en/windowsgeneraldevelopmentissues/thread/b0806608-fee0-413c-a34d-674aeb11be3c)

# ruby-on-rails - Rails 3 的 will_paginate 错误

> ID：13732357
> 
> 赞同：0
> 
> 时间：2012-12-05T21:00:41.803
> 
> 标签：ruby-on-rails, will-paginate

我有一个由开发人员为我构建的小型 Rails 应用程序，代码有很多我正在尝试纠正的异常情况。我正在与 will_paginate 解决一个奇怪的问题，给我以下错误：

```
The @home variable appears to be empty. Did you forget to pass the collection object for will_paginate?` 
```

我已经用谷歌搜索了错误消息，但没有找到任何有用的解决这个问题的方法，所以我求助于你，stackoverflow。

所以我查找位置的搜索表单如下所示：

```
<%= form_for :search_place, :url => search_results_home_index_path, :html => {:class=>""} do |f| %>
  <%= f.hidden_field :search_type, :value=>2 %>
  <%= f.text_field :city,{:placeholder => "Town", :class=>"input-small"} %>
  <%= f.text_field :county,{:placeholder => "County", :class=>"input-medium"} %>
  <%= f.select(:country, db_countries.map(&:country), {:include_blank => 'Select a Country'}, :class=>"input-medium") %>
<%end%> 
```

其中引用 home_controller.rb 如下：

```
def search_results
  :
  elsif !params[:search_place].blank?
    session[:search_params] = params[:search_place]
    @documents = Location.search_location(params[:search_place], params[:page])
  end 
```

并从 Location 模型 location.rb 中获取集合

```
def self.search_location(search_params,page,per_page=50)
  condition_str  = ""
  condition_str += "(UPPER(locations.town) like '%#{search_params[:city].upcase}%' OR UPPER(locations.town) like '%#{search_params[:city].upcase}%') AND " unless search_params[:city].blank?
  condition_str += "(UPPER(locations.county) like '%#{search_params[:county].upcase}%' OR UPPER(locations.county) like '%#{search_params[:county].upcase}%') AND " unless search_params[:county].blank?
  condition_str += "(UPPER(locations.country) like '%#{search_params[:country].upcase}%' OR UPPER(locations.country) like '%#{search_params[:country].upcase}%') " unless search_params[:country].blank?

  unless condition_str.blank?
    self.where(condition_str).paginate(:per_page=>per_page,:page=>page)
  else
    self.where("1=0").paginate(:per_page=>1,:page=>page)
  end

end 
```

搜索结果显示在搜索结果表中，如下所示：

```
<%= render "documents/document_common_list"%> 
<%= will_paginate @documents, :renderer => BootstrapLinkRenderer %> 
```

因此，这会提取正确的搜索结果并显示正确的第一页和分页块，但如果我尝试访问其他页面，则会因上述错误（关于 @home）而崩溃。

will_paginate 以这种方式在网站的其他地方完美工作，除了集合是在控制器而不是模型中构建的，所以这可能是问题（我不完全确定哪种方法是正确的，但我正在工作用别人的代码所以有点挣扎）。

将非常感谢任何指示我朝着正确的方向前进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:46:43.060

我对此并不完全确定，但我认为您遇到的问题描述如下：

[https://github.com/mislav/will_paginate/wiki/Simple-search](https://github.com/mislav/will_paginate/wiki/Simple-search)

基本上，您需要将表单上的 http 方法更改为 GET（通过在表单标记中插入 ":method => 'get'"），这样当您查看后面的搜索结果页面时它不会丢失您的参数。

# java - 在 Java 中，如何遍历 ArrayList 的子列表？

> ID：13732366
> 
> 赞同：2
> 
> 时间：2012-12-05T21:01:09.283
> 
> 标签：java, netbeans, arraylist, sublist

我有一个 csv 文件，其中包含 50 个州、四个地区（东北、西部等）和波多黎各的人口记录，因此有 50 多行数据。我需要找到人口增加的州的数量，所以我不想检查所有的行，50 个州只检查其中的 50 行，从第 6 个元素到第 56 个元素。我相信 ArrayList 的子列表是要走的路，但我将如何编码呢？这是我正在处理的代码部分：

```
// Number of states with estimated population increase in 2011
            int x = 0;
         // al = arrayList.subList(6,56);
            for (int i = 0; i < popList.size(); i++) {
                PopulationRecord pr1 = popList.get(i);
                if (pr1.getPopch2011() > 0) {
                    x++;
                }
            }
            System.out.println("Number of states with estimated population increase in 2011 is " + n); 
```

这是我在驱动程序类中的其余代码：

```
package miniproj2;

import domain.PersistentObject;
import domain.PopulationRecord;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import utilities.MiniProj2Utilities;
import domain.CensusComparator;

/**
 *
 * @author
 */
public class MiniProj2Driver {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        // Make sure that you develop your main() method with reduced code as shown below. 
        // Not the use of private static methods in the driver called from main() method.

        // Read the CSV file records into a list of PopulationRecord objects...
        List<PopulationRecord> popList = MiniProj2Utilities.getDataRecords();

        // Display the list contents and size...
        MiniProj2Utilities.displayRecordsFromList(popList);

        // Create and populate the PersistentObject...
        PersistentObject po = MiniProj2Utilities.getPersistentObject(popList);
        try {
            ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("./data/population-record.ser"));
            oos.writeObject(po);
        } catch (IOException ex) {
        }

        long serializedTime = System.currentTimeMillis();

        System.out.println(po);

        try {
            Thread.sleep(5000);
        } catch (InterruptedException ex) {
            System.out.println("Sleep Error");
        }
        try {
            ObjectInputStream oos = new ObjectInputStream(new FileInputStream("./data/population-record.ser"));
            PersistentObject po1 = (PersistentObject) oos.readObject();
        } catch (IOException ex) {
        } catch (ClassNotFoundException ex) {
        }
        System.out.println("Time waited is: " + (serializedTime - System.currentTimeMillis()) / 1000 + " secs.");

        // Maximum births for 2010 and 2011
        PopulationRecord max = popList.get(0);
        for (int i = 0; i < popList.size(); i++) {
            if (CensusComparator.compareBirths(max, popList.get(i)) == 1) {
                max = popList.get(i);
            }
        }
        System.out.println("Maximum births for 2010 is " + max.getBirths2010());
        System.out.println("Maximum births for 2011 is " + max.getBirths2011());

        // Minimum births for 2010 and 2011
        PopulationRecord min = popList.get(0);
        for (int i = 0; i < popList.size(); i++) {
            if (CensusComparator.compareBirths(min, popList.get(i)) == -1) {
                min = popList.get(i);
            }
        }
        System.out.println("Minimum births for 2010 is " + min.getBirths2010());
        System.out.println("Minimum births for 2011 is " + min.getBirths2011());

        // Population % increase per region for 2010
        for (int i = 0; i < popList.size(); i++) {
            PopulationRecord pr1 = popList.get(i);

            float inc = 0;

            if (pr1.getName().equals("Northeast Region")) {
                inc = ((float) pr1.getPopch2010() / (float) pr1.getPopest2010()) * 100;
                System.out.println("Estimated population increase for 2010 in Northesast Region is " + inc);
            } else if (pr1.getName().equals("Midwest Region")) {
                inc = ((float) pr1.getPopch2010() / (float) pr1.getPopest2010()) * 100;
                System.out.println("Estimated population increase for 2010 in Midwest Region is " + inc);
            } else if (pr1.getName().equals("South Region")) {
                inc = ((float) pr1.getPopch2010() / (float) pr1.getPopest2010()) * 100;
                System.out.println("Estimated population increase for 2010 in South Region is " + inc);
            } else if (pr1.getName().equals("West Region")) {
                inc = ((float) pr1.getPopch2010() / (float) pr1.getPopest2010()) * 100;
                System.out.println("Estimated population increase for 2010 in West Region is " + inc);
            }
        }

        // Population % increase per region for 2011
        for (int i = 0; i < popList.size(); i++) {
            PopulationRecord pr1 = popList.get(i);

            float inc = 0;

            if (pr1.getName().equals("Northeast Region")) {
                inc = ((float) pr1.getPopch2011() / (float) pr1.getPopest2011()) * 100;
                System.out.println("Estimated population increase for 2011 in Northesast Region is " + inc);
            } else if (pr1.getName().equals("Midwest Region")) {
                inc = ((float) pr1.getPopch2011() / (float) pr1.getPopest2011()) * 100;
                System.out.println("Estimated population increase for 2011 in Midwest Region is " + inc);
            } else if (pr1.getName().equals("South Region")) {
                inc = ((float) pr1.getPopch2011() / (float) pr1.getPopest2011()) * 100;
                System.out.println("Estimated population increase for 2011 in South Region is " + inc);
            } else if (pr1.getName().equals("West Region")) {
                inc = ((float) pr1.getPopch2011() / (float) pr1.getPopest2011()) * 100;
                System.out.println("Estimated population increase for 2011 in West Region is " + inc);
            }
        }

        // Number of states with estimated population increase in 2010
        int n = 0;
        for (int i = 0; i < popList.size(); i++) {
            PopulationRecord pr1 = popList.get(i);

            if (pr1.getPopch2010() > 0) {
                n++;
            }
        }
        System.out.println("Number of states with estimated population increase in 2010 is " + n);

        // Number of states with estimated population increase in 2011
        int x = 0;
        al = arrayList.subList(6,56);
        for (int i = 0; i < popList.size(); i++) {
            PopulationRecord pr1 = popList.get(i);
            if (pr1.getPopch2011() > 0) {
                x++;
            }
        }
        System.out.println("Number of states with estimated population increase in 2011 is " + n);

        // Number of states with estimated population decrease in 2010
        int y = 0;
        for (int i = 0; i < popList.size(); i++) {
            PopulationRecord pr1 = popList.get(i);

            if (pr1.getPopch2010() < 0) {
                y++;
            }
        }
        System.out.println("Number of states with estimated population decrease in 2010 is " + y);

        // Number of states with estimated population decrease in 2011
        int z = 0;
        for (int i = 0; i < popList.size(); i++) {
            PopulationRecord pr1 = popList.get(i);

            if (pr1.getPopch2011() > 0) {
                z++;
            }
        }

        System.out.println("Number of states with estimated population decrease in 2011 is " + z);

        // State with highest estimated population decrease for 2010 
        PopulationRecord max3 = popList.get(6);
        for (int i = 6; i < popList.size(); i++) {
            if (CensusComparator.comparePop2010(max3, popList.get(i)) == 1) {
                max3 = popList.get(i);
            }
        }
        System.out.println("State with highest estimated population for 2010 is " + max3.getName());

        // State with highest estimated population increase for 2011 
        PopulationRecord max4 = popList.get(6);
        for (int i = 6; i < popList.size(); i++) {
            if (CensusComparator.comparePop2011(max4, popList.get(i)) == 1) {
                max4 = popList.get(i);
            }
        }
        System.out.println("State with highest estimated population for 2011 is " + max4.getName());

        // State with lowest estimated population increase for 2010 
        PopulationRecord min2 = popList.get(6);
        for (int i = 6; i < popList.size(); i++) {
            if (CensusComparator.comparePopul2010(min2, popList.get(i)) == 1) {
                min2 = popList.get(i);
            }
        }
        System.out.println("State with lowest estimated population for 2010 is " + min2.getName());

        // State with lowest estimated population increase for 2011 
        PopulationRecord min3 = popList.get(6);
        for (int i = 6; i < popList.size(); i++) {
            if (CensusComparator.comparePopul2011(min3, popList.get(i)) == 1) {
                min3 = popList.get(i);
            }
        }
        System.out.println("State with lowest estimated population for 2011 is " + min3.getName());

    }

    // Read the CSV file records into a list of PopulationRecord objects...
    private static List<PopulationRecord> getDataRecords() {
        BufferedReader br = null;
        String line = null;
        List<PopulationRecord> list = new ArrayList<PopulationRecord>();
        try {
            br = new BufferedReader(new FileReader("data/NST_EST2011_ALLDATA.csv"));
            br.readLine(); // Remove header line from file...
            while ((line = br.readLine()) != null) {
                String[] tokens = line.split(",");
                //System.out.println(line);            
                PopulationRecord pr = new PopulationRecord(
                        tokens[0], tokens[1], tokens[2], tokens[3], tokens[4],
                        Integer.parseInt(tokens[5]), Integer.parseInt(tokens[6]),
                        Long.parseLong(tokens[7]), Long.parseLong(tokens[8]),
                        Long.parseLong(tokens[9]), Long.parseLong(tokens[10]),
                        Long.parseLong(tokens[11]), Long.parseLong(tokens[12]),
                        Long.parseLong(tokens[13]), Long.parseLong(tokens[14]),
                        Long.parseLong(tokens[15]), Long.parseLong(tokens[16]),
                        Long.parseLong(tokens[17]), Long.parseLong(tokens[18]),
                        Long.parseLong(tokens[19]), Long.parseLong(tokens[20]),
                        Long.parseLong(tokens[21]), Long.parseLong(tokens[22]),
                        Long.parseLong(tokens[23]), Float.parseFloat(tokens[24]),
                        Float.parseFloat(tokens[25]), Float.parseFloat(tokens[26]),
                        Float.parseFloat(tokens[27]), Float.parseFloat(tokens[28]),
                        Float.parseFloat(tokens[29]));
                list.add(pr);
            }
        } catch (FileNotFoundException ex) {
            Logger.getLogger(MiniProj2Driver.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(MiniProj2Driver.class.getName()).log(Level.SEVERE, null, ex);
        }
        return list;
    }

    // Display the list contents and size...
    private static void displayRecordsFromList(List<PopulationRecord> list) {
        for (PopulationRecord record : list) {
            System.out.println(record);
        }
        System.out.println("Population records processed: " + list.size() + list.get(9));

    }

    private static PersistentObject getPersistentObject(List<PopulationRecord> list) {
        PersistentObject po = new PersistentObject();
        po.setSerializedTime(new Date());
        po.setPopulationList(list);
        return po;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:11:40.190

你也可以试试：

```
for(PopulationRecord pr1 : popList.subList(5, 56)) {
    if (pr1.getPopch2011() > 0) {
        x++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:02:28.410

您可以简单地将 i 初始化为 5，并在 i==56 时停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:07:38.187

正如 awolfe91 提到的，简单地说

```
// Number of states with estimated population increase in 2011
int x = 0;
// al = arrayList.subList(6,56);
for (int i = 5; i < popList.size(); i++) {
    if(i == 56) break;
    PopulationRecord pr1 = popList.get(i);
    if (pr1.getPopch2011() > 0) {
        x++;
    }
}
System.out.println("Number of states with estimated population increase in 2011 is " + n); 
```

或根据需要对数组列表进行切片。您可以编写一个实用程序，例如

```
public static <T> List<T> slice(List<T> list, int index, int count) {
    List<T> result = new ArrayList<T>();
    if (index >= 0 && index < list.size()) {
    int end = index + count < list.size() ? index + count : list.size();
        for (int i = index; i < end; i++) {
                result.add(list.get(i));
         }
    }
    return result;
} 
```

[在此处](http://www.java2s.com/Code/Java/Collections-Data-Structure/Slicealist.htm)查看示例代码。

# java - Hibernate 无法加载空间数据

> ID：13732368
> 
> 赞同：0
> 
> 时间：2012-12-05T21:01:12.807
> 
> 标签：java, mysql, hibernate, spatial

我正在使用 MySql、Hibernate 4 和[hibernate-spatial-4.0-M1](http://www.hibernatespatial.org)。我尝试简单地保存和加载实体，保存成功但加载抛出异常：

```
java.lang.ClassCastException: java.lang.String cannot be cast to [B
        at org.hibernate.spatial.dialect.mysql.MySQLGeometryValueExtractor.toJTS(MySQLGeometryValueExtractor.java:47)
        at org.hibernate.spatial.dialect.AbstractJTSGeometryValueExtractor.extract(AbstractJTSGeometryValueExtractor.java:42)
        at org.hibernate.spatial.dialect.AbstractJTSGeometryValueExtractor.extract(AbstractJTSGeometryValueExtractor.java:37)
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:269)
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:265)
        at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:238)
        at org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:357)
        at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2704)
        at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1541)
        at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1473)
        at org.hibernate.loader.Loader.getRow(Loader.java:1373)
        at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:640)
        at org.hibernate.loader.Loader.doQuery(Loader.java:850)
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
        at org.hibernate.loader.Loader.doList(Loader.java:2438)
        at org.hibernate.loader.Loader.doList(Loader.java:2424)
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2254)
        at org.hibernate.loader.Loader.list(Loader.java:2249)
        at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
        at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
        at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
        at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1248)
        at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
        at com.mm.dao.hibernate.GeoDAO.getById(GeoDAO.java:33)
        at com.mm.service.GeoService.getById(GeoService.java:24)
        at com.mm.service.GeoService$$FastClassByCGLIB$$aeb6c7aa.invoke(<generated>)
        at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
        at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
        at com.mm.service.GeoLocationService$$EnhancerByCGLIB$$f879610f.getById(<generated>)
        at com.mm.controllers.GeoController.updateGeodata(GeoController.java:48)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHa
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingH
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandle
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

我的实体：

```
public class GeoEntity implements java.io.Serializable {

    private Integer id;
    private Point geom;
        //...
} 
```

实体 hbm.xml

```
<property name="geom" type="org.hibernate.spatial.GeometryType">
        <column name="geom" sql-type="Geometry" not-null="true" />
    </property> 
```

休眠配置：

```
<prop key="hibernate.dialect">org.hibernate.spatial.dialect.mysql.MySQLSpatialDialect</prop> 
```

加载：

```
(GeoEntity)sessionFactory.getCurrentSession().createQuery("from GeoEntity where id=:id")
                .setInteger("id", id)
                .uniqueResult(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:45:51.750

旧的 jdbc 驱动程序有问题

# php - 显示带有从数据库中动态获取的标题和副标题的 mysql 数据

> ID：13732384
> 
> 赞同：-2
> 
> 时间：2012-12-05T21:02:14.690
> 
> 标签：php, mysql

我有一个 MySQL 数据库

```
id      area_name       area_district   area_shire
1       Harborne        Birmingham      West Midlands
2       Edgbaston       Birmingham      West Midlands
3       Halesowen       Dudley          West Midlands
4       Rugby                           Warwickshire   
5       Nuneaton                        Warwickshire 
```

我如何让这个显示，

```
West Midlands (main heading)

Birmingham (sub heading)

    Harborne 
    Edgbaston

Dudley (sub heading)

Halesowen

Warwickshire (main heading)

Rugby 
Nuneaton 
```

是否有一个while循环可以实现这一点？

**编辑：**这是我迄今为止尝试过的：

```
$query = mysql_query("SELECT * FROM Areas_Covered ORDER BY ID"); //fetch the results

// convert results into an array
while($rows = mysql_fetch_array($query)):
    $area_name = $rows ['area_name'];
    $area_district = $rows ['area_district'];
    $area_name_url = str_replace(' ', '_', $area_name);
    echo "<a href=\"Driveway_Cleaning_$area_name_url.php\">$area_name</a><br>";
endwhile; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:11:21.803

好吧，您可能想先“规范化”您的数据，但那是另一个问题。

我会迭代行并检查更改。我会做类似的事情：

```
$area_shire = '';
$area_district = '';
$area_name = '';

while($rows = mysql_fetch_array($query)):

    if($rows['area_shire'] != $area_shire) {

        echo '<h1>'.$rows['area_shire'].'</h1>';
        $area_shire = $rows['area_shire'];
    }

    /* do the same for district using h2 and name using h3 */

endwhile; 
```

# ios - 保存搜索结果 xcode

> ID：13732385
> 
> 赞同：0
> 
> 时间：2012-12-05T21:02:16.640
> 
> 标签：ios, iphone

我正在执行各种搜索，人们正在执行四种非常常见的搜索。我想将结果预加载到一个数组中，这样新用户就不必等待那么久。我如何保存结果，以便下次它们已经存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:52:27.277

我建议你构建一个缓存，它可以作为一个 NSDictionary 来实现。

searchTerm 可以是键，Results 可以是数组。

这样，当使用相同的 searchTerm 时，如果存在，则返回现有结果，或者继续进行第一次搜索并填充缓存。

如果您希望它在应用程序启动时持续存在，您可以将缓存存储在用户默认值中，或者更精细的持久性（如核心数据）中。

说，你的ResultsCache是​​NSDictionary，那么逻辑可以

```
if([ResultsCache objectForKey:searchTerm] == nil){
     ResultsArray = [self search:SearchTerm];
     [ResultsCache setObject:ResultsArray forKey:searchTerm];
}

return [ResultsCache objectForKey:searchTerm]; 
```

# apache - 捕获所有子域？

> ID：13732386
> 
> 赞同：0
> 
> 时间：2012-12-05T21:02:21.443
> 
> 标签：apache, ubuntu, subdomain, virtualhost, hosts

在我的本地主机上，我为 cms 开发模块。

因此我有很多这样的网址：

```
cart.cfox.dev  
blog.cfox.dev  
orders.cfox.dev 
```

映射到哪个

> /var/www/cfox/modules/cart
> /var/www/cfox/modules/blog
> /var/www/cfox/modules/orders

每次我设置一个新模块时，我都会创建一个新的虚拟主机。

但都一样，只换了一个字。

我想知道是否有办法让一个虚拟主机处理所有这些。

另一个是我的hosts文件充满了

> 127.0.0.1 购物车.cfox.dev
> 127.0.0.1 博客.cfox.dev
> 127.0.0.1订单.cfox.dev

我们可以在那里做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:17:29.040

我认为处理这些虚拟主机的最佳方式是 VirtualDocumentRoot。特别是 Apache 2.4，据我所知，DocumentRoot 不再是错误的。

```
UseCanonicalName Off
VirtualDocumentRoot /var/www/cfox/modules/%1

<Directory "/var/www/cfox/modules/*">
    # Apache < 2.4
    <IfModule !mod_authz_core.c>
        Allow from all
    </IfModule>
    # Apache >= 2.4
    <IfModule mod_authz_core.c>
        Require all granted
    </IfModule>
</Directory> 
```

> 我们可以在那里做同样的事情吗？

抱歉不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:30:33.907

您可以使用`mod_rewrite`.

使用 in设置您的默认 apache 虚拟主机并`DocumentRoot`在`/var/www`其中放置以下内容`.htaccess`：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^([^\.]+)\.([^\.]+)\.dev$ [NC]
RewriteCond %{REQUEST_URI} !^/.+/modules/.+/.*$
RewriteRule .* /%2/modules/%1%{REQUEST_URI} [QSA,L] 
```

当然，您必须确保您的 apache 读取`.htaccess`文件 ( `AllowOverride`)

# java - 为什么线程等待方法需要同步？

> ID：13732391
> 
> 赞同：0
> 
> 时间：2012-12-05T21:02:48.343
> 
> 标签：java, multithreading

> **可能重复：**
> [为什么等待应该总是在同步块中](https://stackoverflow.com/questions/2779484/why-wait-should-always-be-in-synchronized-block)

我注意到，线程 wait() 方法需要在同步代码块或同步方法中调用。没有它，它正在抛出

> `java.lang.IllegalMonitorStateException`

. 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:28:49.187

来自[Java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)

```
public synchronized guardedJoy() {
// This guard only loops once for each special event, which may not
// be the event we're waiting for.
while(!joy) {
    try {
        wait();
    } catch (InterruptedException e) {}
}
System.out.println("Joy and efficiency have been achieved!");
} 
```

> 为什么这个版本的guardedJoy 是同步的？假设 d 是我们用来调用等待的对象。当线程调用 d.wait 时，**它必须拥有 d 的内在锁——否则会抛出错误**。在同步方法中调用 wait 是获取内在锁的一种简单方法。

您遇到的错误是他们在示例中引用的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:05:15.760

请参阅 Object.wait 的 javadoc。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait) ()

“当前线程必须拥有此对象的监视器。线程释放此监视器的所有权并等待，直到另一个线程通过调用 notify 方法或 notifyAll 方法通知在此对象的监视器上等待的线程唤醒。然后线程等待直到它可以重新获得监视器的所有权并恢复执行。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:35:55.313

**@synchronized(Obj) {...} 就像：** SynchronizedObject.lock() ... SynchronizedObject.Unlock()

**等待*基本上*是：** SynchronizedObject.Unlock() & SynchronizedObject.Lock()

这使得 IMO 更清楚......你需要有锁才能释放它

# java - 如何获得端到端性能分析tomcat

> ID：13732396
> 
> 赞同：0
> 
> 时间：2012-12-05T21:03:08.397
> 
> 标签：java, performance, spring, memory, tomcat6

我有一个性能很好的网络应用程序，然后突然页面请求将冻结并超时，然后一切都会再次变得花花公子，同样的事情也会发生。

我很难弄清楚这一点，因为可以分析的变量太多了。

有什么办法：一个工具或步骤计划可以帮助我深入了解并从页面请求到数据库调用基本上分析整个事情并识别潜在问题？我使用 New Relic 和 MAT，我刚开始使用 Javamelody，但老实说：重点在哪里？通常，当页面冻结/超时时，并不清楚瓶颈在哪里。需要注意哪些阈值/危险信号？

亲切的问候，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:13:50.473

对于服务器端，我发现[jstack](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstack.html)通常是比分析器更好的工具。主要是因为它快速、命令行并且已经随服务器的 JDK 一起安装。

Web 应用程序间歇性变慢的一个典型原因是线程等待某个锁释放。

当 Web 应用程序出现卡住时运行`jstack`并查看线程以查看哪些线程卡在锁上以及锁是什么。这是一个快速[教程](http://www.herongyang.com/Java-Tools/jstack-Detect-Java-Thread-Deadlocks.html)，因为它起初听起来令人生畏，但它真的很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:20:40.247

根据这里和其他地方的提示，我发现了一些似乎影响了事情的事情，尽管我们必须看看它在长期内是如何运作的。现在，它似乎更好了，尽管我很难指出究竟是什么造成了最大的不同。我所做的事情： * 使 Spring 数据源变得惰性，以便可以从缓存中提供服务的请求不会创建不必要的事务 * 将 mySQL thread_cache_size 更改为 50。之前是 8。* 从 c3p0 更改为 BoneCP

目前，间歇性停顿似乎不再发生。

# asp.net-mvc - 在避免“集合已修改”错误的同时向 db/model 添加新行

> ID：13732398
> 
> 赞同：0
> 
> 时间：2012-12-05T21:03:14.500
> 
> 标签：asp.net-mvc, linq, entity-framework

ASP MVC 应用程序。在控制器中，我从数据库中获取 2 行，比较它们并根据需要添加新数据。每个的模型如下所示：

```
 public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Gender { get; set; }

    public List<PersonAlias> AliasList { get; set; }
    public List<Identification> IDList { get; set; } 
```

当我到达列表时，我遇到了麻烦。我擅长循环和比较，但在添加时遇到了麻烦。这是我所拥有的：

```
 var newRecord =
                (from p in db.Person
                 where p.ApplicantID.Equals(ApplicantId)
                 select p).First();

        //  Get the existing applicant record
        var existingRecord =
                (from e in e_db.PersonAttributes
                 where e.PersonID.Equals(PersonId)
                 select e).First();

        foreach (var newAlias in newRecord.PersonAlias)
        {
            matchesAny = true;

            List<PersonAlia> tempAlias = new List<PersonAlia>();

            if ( existingRecord.PersonAlias != null)
            {
                foreach (var oldAlias in existingRecord.PersonAlias)
                {
                    if ((oldAlias.FirstName != newAlias.FirstNameAlias) || (oldAlias.LastName != newAlias.LastNameAlias))
                    {
                        matchesAny = false;
                    }

                    if (!matchesAny)
                    {

                        tempAlias.Add(new PersonAlia
                        {
                            FirstName = newAlias.FirstNameAlias,
                            MiddleName = newAlias.MiddleNameAlias,
                            LastName = newAlias.LastNameAlias,
                            CreatedBy = User.Identity.Name,
                            CreateDate = DateTime.Now,
                            ModifiedBy = User.Identity.Name,
                            ModifiedDate = DateTime.Now
                        });
                    }
                } // End inner foreach

                existingRecord.PersonAlias.Add(new PersonAlia
                {
                    FirstName = tempAlias.
                    MiddleName = newAlias.MiddleNameAlias,
                    LastName = newAlias.LastNameAlias,
                    CreatedBy = User.Identity.Name,
                    CreateDate = DateTime.Now,
                    ModifiedBy = User.Identity.Name,
                    ModifiedDate = DateTime.Now
                });

            } // End outer Foreach 
```

我正在尝试将项目添加到列表中的临时列表中，这看起来不错，但我无法弄清楚如何从临时列表中移动到将其添加到现有记录中。完成后，我将添加 db.savechanges();

我想我混合了几种方法（模型、linq、EF），所以如果有人可以建议一种方法并指向一个好的教程，那就太好了。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:46:28.927

可能最简单的方法是首先获取所有匹配的记录。然后将它们放入一个临时集合中，然后循环并调用existingRecord.PersonAlias.Add。

您正在做的确实是在迭代集合时尝试修改集合。

# c - 从文件中读取以及在我的程序中使用文件中的数据时遇到问题

> ID：13732404
> 
> 赞同：1
> 
> 时间：2012-12-05T21:03:38.237
> 
> 标签：c, io

在这个程序中，我有一个名为“accounts.dat”的文件，在这个文件中有一些数据行，比如

```
1000:first
2000:second
3000:third 
```

但是，当我尝试将数据值 fscanf 到程序中的数组时，我得到：

```
0:$ s·°Ïÿ¿
1:t·¨BuÞZ·
-1217025816:s·0s·É¥s·hp[·4£s· 
```

随着扫描的值，或者至少这就是它所显示的。

我扫描值的功能是：

```
void read (int accounts[MAX], char debcred[MAX], double amount[MAX], char accname[][MAXSTRING], char transname[][MAXSTRING], int *i) {

FILE *fp1 = NULL;
//FILE *fp2 = NULL;

fp1 = fopen("accounts.dat", "r");
//fp2 = fopen("transactions.dat", "r");

int h = 0;

if (fp1 != NULL) // READING THE FILE
{
    while(fscanf(fp1, "%d", &accounts[h]) != EOF)
    {

            fgetc(fp1);
            fscanf(fp1, "%30[^\n]", &accname[h]);
            h++;

            printf("%d:%s\n", accounts[h], accname[h]);

    }

    fclose(fp1);
}
else
    printf ("Failed to open file\n");

} 
```

我在 main 中调用 read 函数的方式是：

```
read(accounts, debcred, amount, accname, transname, &i); 
```

我在主要功能中的声明是：

```
int accounts[MAX], accounts2[MAX], account;
char debcred[MAX], accname[MAX][MAXSTRING], transname[MAX][MAXSTRING];
double amount[MAX]; 
```

谁能弄清楚我的问题是什么？为什么我的文件中的数据行没有被正确扫描到我的程序中的数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:05:13.420

> ```
> fscanf(fp1, "%30[^\n]", &accname[h]);
> h++;
> printf("%d:%s\n", accounts[h], accname[h]); 
> ```

打印`h` **后**尝试递增。

# c# - 变量赋值有类型吗？这个叫什么？

> ID：13732407
> 
> 赞同：3
> 
> 时间：2012-12-05T21:03:43.623
> 
> 标签：c#, .net, variable-assignment

在一个延迟加载的属性获取器中看到了这样的东西：

```
public SomeClass SomeProperty
{
    get
    {
        return _someVar ?? (_someVar = new SomeClass());
    }
} 
```

对我来说发生了什么似乎很明显，我只是设法通过使用 C# 多年来没有注意到这会起作用：

```
int i = 0;
(i = 1).GetType(); 
```

我想我的主要问题是，这是否有某种特殊名称可以用来搜索有关它的更多信息/向其他人描述它？我想我很好奇是否有任何与之相关的陷阱（执行顺序等，类似于将多个空合并运算符链接在一起时必须考虑的问题），或者是否有任何其他标准用途这就像上面看到的延迟加载的属性 getter（尽管我认为它与替代方案相比并不是特别干净）。

我几乎很尴尬地发布这个，因为这似乎是一件很难不曾想过/见过的事情，哈哈。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:13:55.953

这只是赋值是 C# 中的表达式的结果。从[C# 规范](http://msdn.microsoft.com/en-us/library/aa691315.aspx)：

> 简单赋值表达式的结果是赋值给左操作数的值。结果与左操作数具有相同的类型，并且始终归类为值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:08:21.030

它不是具有类型的变量赋值，而是左侧操作数。

任何将被评估并返回类似方法调用的表达式都是相同的。

有关更多信息，请参阅以下页面： [http](http://en.wikipedia.org/wiki/Expression_(programming) ://en.wikipedia.org/wiki/Expression_(programming ) [http://en.wikipedia.org/wiki/Statement_(computer_science)#Expressions](http://en.wikipedia.org/wiki/Statement_(computer_science)#Expressions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T21:07:58.087

您必须寻找赋值运算符，它的计算结果是新设置的值。基本上在

```
(i = 1).GetType(); 
```

i 被赋值为 1，整个表达式 (i = 1) 被计算为整数 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:08:47.787

这是一条有两个后果或副作用的线。也就是说，它做了两件事：1）它运行赋值；2）它使用整个语句作为另一个语句的右手边（RHS）。`null`我在可以用作 BOOLEAN 语句的 C++ 中更频繁地看到这一点。

用起来很好，但我个人更喜欢表现力。imo 有两个后果，更容易错过一些东西。当我开始阅读一行时，`return`我不希望它会产生分配变量的副作用。只是我的 .02。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T21:09:06.597

赋值是一个和其他表达式一样的表达式，表达式的值就是被赋值的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T21:17:33.563

长话短说：赋值运算符返回类型等于左侧变量类型的值。

# java - Array.binarySearch 返回错误数据

> ID：13732413
> 
> 赞同：0
> 
> 时间：2012-12-05T21:04:09.063
> 
> 标签：java, arrays, indexof

我正在尝试使用数组和 array.BinarySearch 函数验证密码和用户名。数组中的前两个用户名：bradley 和 john 使用函数 0 和 1 返回正确的位置。但是，当我尝试验证数组 jim 和 clarke 中的最后两个字符串时，binarySearch 函数返回用户名位于两次都在数组中的位置 -2 导致验证失败。有任何想法吗？

```
 String[] names = {"bradley","john","jim","clarke"};
    String[] passwords = {"password","password","test","test"};
    int pos = Arrays.binarySearch(names, uname);
                    System.out.println("Found you in array:" + uname + "here:" + pos);
                    if(pos >= 0)
                    {   
                        System.out.println("Validation password for:" + uname);
                        if(passwords[pos].equals(pword) && !loggedOn[pos])
                        {
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T21:04:50.113

您的`names`数组未排序：

```
String[] names = {"bradley","john","jim","clarke"}; 
```

这是[`binarySearch()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#binarySearch%28java.lang.Object%5b%5d,%20java.lang.Object%29)（和一般的[二进制搜索算法](http://en.wikipedia.org/wiki/Binary_search_algorithm)）的要求：

> 范围必须按升序排序

首先对其进行排序，它会像一个魅力一样工作：

```
String[] names = {"bradley","clarke","jim","john"}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:06:32.520

二进制搜索需要事先对数组进行排序。您可以按顺序列出名称，也可以自己执行排序。您可以使用`Arrays.sort(names)`对名称数组进行排序。

# ruby-on-rails-3 - 如何使用 rails gem 生成器？

> ID：13732418
> 
> 赞同：0
> 
> 时间：2012-12-05T21:04:29.583
> 
> 标签：ruby-on-rails-3, gem

我正在尝试实现这个 gem： [https ://github.com/styx/timeline_fu](https://github.com/styx/timeline_fu)

没有明确的说明或问题部分。我不知道在哪里跑来`script/generate timeline_fu`制作timeline_event.rb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:04:29.583

事实证明，rails 本身就可以完成这项工作。

`rails g timeline_fu`

# r - 使用 ggplot2 和 geom_area 堆叠负/正时间序列

> ID：13732421
> 
> 赞同：2
> 
> 时间：2012-12-05T21:04:36.340
> 
> 标签：r, ggplot2, time-series

我正在尝试重现一个堆叠的时间序列图，该图显示了银行资产负债表的构成和规模如何随时间变化。它应该看起来像这样：

![资产负债表](../Images/f6984f738045b7444a821163f1e015b0.png)

资产高于 x 轴，负债低于 x 轴。

到目前为止，我已经能够使用以下方法成功重现图表的每一半`ggplot()`：

```
# plot assets stack
assets.plot <- ggplot(assetsm, aes(x=dates, y=value, fill=variable)) + 
  geom_area() 

# plot liability stack
liabiln.plot <- ggplot(liabilnm, aes(x=dates, y=value, fill=variable)) +
  geom_area() 
```

这使：

![资产（左）和负债（右）](../Images/f65aa706f523d21f93fd8376cf9f560f.png)

但是当我将它们加在一起时，出现了问题：

```
# plot whole bs
bs.plot <- ggplot(bsm, aes(x=dates, y=value, fill=variable)) +
  geom_area() 
```

这使：

![在此处输入图像描述](../Images/9996a7211c277bb0b283db2c20dcbc54.png)

记下它旁边的色标和上图，你可以看到：

1.  只显示了一半的变量（从 V19 开始）。
2.  这些变量恰好与数据的“负债”一半（都应该是负数）重合。
3.  x 上每个点的堆栈总高度等于上图中负债堆栈的总高度，但它不再从 y=0 开始 - 它落在 y 轴的两侧。

我不知道我的代码中缺少什么导致这种情况 - 我一直在摆弄`position = "stack"`明确，并尝试回答[这个问题](https://stackoverflow.com/questions/10439632/combined-positive-and-negative-stacked-line-plots "这个问题")（相同的结果），现在我已经无计可施了。

我想这可能是数据问题，所以我在[这里](https://docs.google.com/folder/d/0B2bdLsnOAbZHUVJvem1XbXdScDA/edit "这里")上传了数据。如果我可以使问题更清楚或提供更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:32:17.323

我不能完全解释你现在看到的行为，但是当我做这样的顶部/底部类型图时，我倾向于使用单独的数据框和单独的层调用：

```
ggplot() + 
    geom_area(data = assetsm, aes(x=dates, y=value, fill=variable)) + 
    geom_area(data = liabilnm, aes(x=dates, y=value, fill=variable)) 
```

这看起来像你所追求的：

![在此处输入图像描述](../Images/3110cab3229a370c4a5d39909697aa11.png)

# dynamics-crm-2011 - 在 CRM 中过滤报表列表

> ID：13732426
> 
> 赞同：0
> 
> 时间：2012-12-05T21:04:55.200
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在使用 CRM 2011，查看报告视图。

用户可以单击“报告”并通过此视图查看系统上的所有报告。

我正在尝试通过过滤器从此视图中删除一个特定的报告，但遇到了一点困难。

如果我选择报告，单击编辑，然后向下滚动到分类部分，则“显示在”字段仅显示“相关记录类型的表单”。这似乎会将其从该列表中删除，但事实并非如此。

所以我试图添加一个过滤器，只显示“显示在”设置为“报告区域”的报告——这应该显示所有其他报告。但是当我在报告实体或任何内容下创建此过滤器的条件时，我找不到“显示在”字段。

Display In 字段在哪里？如果它不是我可以在过滤器中使用的东西，那么推荐的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:30:49.223

在报告实体上创建一个视图。**为相关项目Report Visibilities**上的视图过滤定义一个过滤器。

![这就是过滤器的样子](../Images/2be3fe685d09d5c195b1e8c139f79065.png)

# json - Blender 2.6 JSON导出器，纹理坐标麻烦

> ID：13732429
> 
> 赞同：0
> 
> 时间：2012-12-05T21:05:04.060
> 
> 标签：json, python-3.x, blender-2.61, exporter

我正在尝试为 Blender 2.6x 编写一个简单的 JSON 导出器，因为我能找到的唯一一个 ( [http://code.google.com/p/blender-machete/](http://code.google.com/p/blender-machete/) ) 不适用于 2.6。我从搅拌机中获取顶点、法线和索引没有任何问题，但尽我所能，我似乎无法弄清楚为什么纹理坐标出现错误。纹理似乎在一个简单的立方体的表面上对角倾斜，并且拉伸......真的很丑而且错误。我一直在网上寻找一些官方出口商的来源，但我仍然无法弄清楚，所以我希望有人能给我一些提示或解决方案。

我用来访问纹理坐标的代码是这样的：

```
 # add texture coordinates to scene_data structure
    m = bpy.context.active_object.to_mesh(bpy.context.scene, True, 'PREVIEW')
    for j in range(len(m.tessfaces)):
        if len(m.tessface_uv_textures) > 0:
            scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv1.x )
            scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv1.y )
            scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv2.x )
            scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv2.y )
            scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv3.x )
            scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv3.y ) 
```

这给了我一个纹理坐标列表，但不知何故我做错了，因为我上面解释的纹理外观不正确。

除了显示代码，我不知道还能做什么，因为我已经尝试以我能想到的各种方式对其进行更改，所以这是上面代码片段所在的函数：

```
def get_json(objects, scene):
    """ Currently only supports one scene. 
        Exports with -Z forward, Y up. """

    scene_data = []
    mesh_number = -1

    # iterate over each mesh
    for i in range(len(bpy.data.objects)):
        if bpy.data.objects[i].type == 'MESH':

            mesh_number += 1

            bpy.ops.object.mode_set(mode='OBJECT')

            # convert all the mesh's faces to triangles
            bpy.data.objects[i].select = True
            bpy.context.scene.objects.active = bpy.data.objects[i]

            bpy.ops.object.mode_set(mode='EDIT')

            bpy.ops.mesh.select_all(action='SELECT')
            bpy.ops.mesh.quads_convert_to_tris()
            bpy.context.scene.update()

            bpy.ops.object.mode_set(mode='OBJECT')

            bpy.data.objects[i].select = False

            # add data to scene_data structure
            scene_data.append({
                "name"          : bpy.data.objects[i].name,
                "vertices"      : [],
                "indices"       : [],
                "normals"       : [],
                "tex_coords"    : []
            })

            # iterate over all the vertices in the mesh
            for j in range(len(bpy.data.objects[i].data.vertices)):
                # add vertex to scene_data structure
                scene_data[mesh_number]["vertices"].append( bpy.data.objects[i].data.vertices[j].co.x + bpy.data.objects[i].location.x )
                scene_data[mesh_number]["vertices"].append( bpy.data.objects[i].data.vertices[j].co.z + bpy.data.objects[i].location.z )
                scene_data[mesh_number]["vertices"].append( -(bpy.data.objects[i].data.vertices[j].co.y + bpy.data.objects[i].location.y) )

                # add vertex normal to scene_data structure
                scene_data[mesh_number]["normals"].append( bpy.data.objects[i].data.vertices[j].normal.x )
                scene_data[mesh_number]["normals"].append( bpy.data.objects[i].data.vertices[j].normal.z )
                scene_data[mesh_number]["normals"].append( -(bpy.data.objects[i].data.vertices[j].normal.y) )

            # iterate over each face in the mesh
            for j in range(len(bpy.data.objects[i].data.polygons)):
                verts_in_face = bpy.data.objects[i].data.polygons[j].vertices[:]

                # iterate over each vertex in the face
                for k in range(len(verts_in_face)):

                    # twiddle index for -Z forward, Y up
                    index = k
                    if index == 1: index = 2
                    elif index == 2: index = 1

                    # twiddle index so we draw triangles counter-clockwise
                    if index == 0:  index = 2
                    elif index == 2: index = 0

                    # add index to scene_data structure
                    scene_data[mesh_number]["indices"].append( verts_in_face[index] )

            # add texture coordinates to scene_data structure
            m = bpy.context.active_object.to_mesh(bpy.context.scene, True, 'PREVIEW')
            for j in range(len(m.tessfaces)):
                if len(m.tessface_uv_textures) > 0:
                    scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv1.x )
                    scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv1.y )
                    scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv2.x )
                    scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv2.y )
                    scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv3.x )
                    scene_data[mesh_number]["tex_coords"].append( m.tessface_uv_textures.active.data[j].uv3.y )

    return json.dumps(scene_data, indent=4) 
```

有人会告诉我我做错了什么吗？我已经在这几天了，没有任何进展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:38:06.620

经过进一步研究，我想我可能知道这个问题，但我不确定这个......

从这里： [http : *//www.gamedev.net/topic/602169-opengl-drawing-cube-using-gldrawelements-and-gltexcoordpointer/page_p_4811454#entry4811454*](http://www.gamedev.net/topic/602169-opengl-drawing-cube-using-gldrawelements-and-gltexcoordpointer/page__p__4811454#entry4811454)

> 这是不能使用共享顶点的经典示例。一旦您引入除位置以外的顶点属性，立方体就需要有 24 个顶点，而不是 8 个。立方体的角不是共享顶点，因为它们没有相同的纹理坐标。
> 
> 例如，前两个三角形由索引 [0, 1, 2, 0, 2, 3] 组成，如果您引用顶点和纹理坐标数组，则该面很好。后两个三角形由索引 [0, 4, 5, 0, 5, 1] 组成，虽然顶点数组被正确引用以制作立方体的第二个面，但生成的纹理坐标完全被破坏了。

关于这是我的问题，我是对的，还是我离题了？

**编辑：** 几乎可以通过使用更多顶点位置使纹理工作。现在唯一的问题是一个简单立方体的一个面将被扭曲并倾斜到它的正确位置。所有其他面孔看起来都很好。

这是几乎可以工作的功能：

```
def get_json(objects, scene):
    """ Currently only supports one scene. 
        Exports with -Z forward, Y up. """

    object_number = -1
    scene_data = []

    # for every object in the scene
    for object in bpy.context.scene.objects:

        # if the object is a mesh       
        if object.type == 'MESH':

            object_number += 1

            # convert all the mesh's faces to triangles
            bpy.ops.object.mode_set(mode='OBJECT')
            object.select = True
            bpy.context.scene.objects.active = object

            # triangulate using new Blender 2.65 Triangulate modifier
            bpy.ops.object.modifier_add(type='TRIANGULATE')
            object.modifiers["Triangulate"].use_beauty = False
            bpy.ops.object.modifier_apply(apply_as="DATA", modifier="Triangulate")

            bpy.ops.object.mode_set(mode='OBJECT')

            object.select = False

            # add data to scene_data structure
            scene_data.append({
                "name"          : object.name,
                "vertices"      : [],
                "indices"       : [],
                "normals"       : [],
                "tex_coords"    : []
            })

            vertex_number = -1

            # for each face in the object
            for face in object.data.polygons:
                vertices_in_face = face.vertices[:]

                # for each vertex in the face
                for vertex in vertices_in_face:

                    vertex_number += 1

                    # store vertices in scene_data structure
                    scene_data[object_number]["vertices"].append( object.data.vertices[vertex].co.x + object.location.x )
                    scene_data[object_number]["vertices"].append( object.data.vertices[vertex].co.z + object.location.z )
                    scene_data[object_number]["vertices"].append( -(object.data.vertices[vertex].co.y + object.location.y) )

                    # store normals in scene_data structure
                    scene_data[object_number]["normals"].append( object.data.vertices[vertex].normal.x )
                    scene_data[object_number]["normals"].append( object.data.vertices[vertex].normal.z )
                    scene_data[object_number]["normals"].append( -(object.data.vertices[vertex].normal.y) )

                    # store indices in scene_data structure
                    scene_data[object_number]["indices"].append(vertex_number)

            # texture coordinates
            #   bug: for a simple cube, one face's texture is warped
            mesh = object.to_mesh(bpy.context.scene, True, 'PREVIEW')
            if len(mesh.tessface_uv_textures) > 0:
                for data in mesh.tessface_uv_textures.active.data:
                    scene_data[object_number]["tex_coords"].append( data.uv1.x )
                    scene_data[object_number]["tex_coords"].append( data.uv1.y )
                    scene_data[object_number]["tex_coords"].append( data.uv2.x )
                    scene_data[object_number]["tex_coords"].append( data.uv2.y )
                    scene_data[object_number]["tex_coords"].append( data.uv3.x )
                    scene_data[object_number]["tex_coords"].append( data.uv3.y )

    return json.dumps(scene_data, indent=4) 
```

我想知道只有一张脸的纹理扭曲的原因是什么？我快到了，但似乎无法弄清楚这一点。

# java - 如何从一个方法、另一个类中读取具有可变数据的公共静态数据并获取更新的数据

> ID：13732430
> 
> 赞同：0
> 
> 时间：2012-12-05T21:05:07.080
> 
> 标签：java, data-migration

我需要从另一个类中读取“公共静态 NEW_QUERY”，但它在查询中具有在调用该方法时更改的变量。我怎样才能调用这个“公共静态”并从另一个类获取更新的 QUERY。

这是Java代码；

```
package artemispm.autocalc;

import java.sql.*;
import java.util.*;
import a7.unittests.dao.UnitTestHelper;
import artemispm.serverutil.*;
import artemispm.trdo.*;
import artemispm.parser.*;

public abstract class TRBaseScoreCalculator implements ExpressionParserLookup {

/******THIS IS THE PLACE I NEED TO HAVE CORRECTED**********/
/*HOW DO I FORCE THIS TO PUSH VALUES INTO 'match' and 'useFor'*/
/**SO THAT I CAN CALL NEW_QUERY FROM ANOTHER CLASS *****/
/****IT SAYS 'match' and 'useFor' cannot be resolved****/

public static String NEW_QUERY = "select count(userfieldid) from tr_userfield where calcexpression like '%" + match + "%'and usefor like '%" + useFor +"%'";

public Connection               m_con;
protected String                m_characName        = "";

public boolean isThisCharacInUse(Connection con, String characName,String useFor) 
throws SQLException, TRException {
    boolean result;        
    String match = "[" + TRBaseSql.rewrapQuotes(characName) + "]";

    if(TRBaseSql.getDatabaseType(con) == TRBaseSql.DBTYPESQLSERVER) {
        match = "[[]" + TRBaseSql.rewrapQuotes(characName) + "]";
    }

    TRSystemSQL sql = new TRSystemSQL();
    TRSystem sys=sql.getSystem(con);
    result =    (   sys.getScoreCalculation() != null 
                &&  sys.getScoreCalculation().indexOf(match) >= 0  );
    if (result) return(result);
    else {

        int count;

        /*****THIS IS THE PLACE I NEED HELP AT  12/5/2012 ******/

        count = sql.executeGetInt(con, NEW_QUERY , null);

        if (count > 0) return true;
        count = sql.executeGetInt(con, 
                "select count(characid) from tr_charac where calcexpression like '%" + match + "%'and usefor like '%" + useFor +"%'" , null);
        return (count > 0);
        }
}
} 
```

除此之外，我在这里没有尝试过，但我应该按照规范中的内容：

*   找到所有嵌入式 sql 语句并为尚未使用常量的嵌入式 sql 实现常量。

*   **用 String.format() 替换 Sql 语句创建中的任何字符串连接。**

*   **对于任何 String.format 命令，您必须转义任何现有的 % 符号。这些符号经常用于 LIKE 操作。**

    我正在做的是从另一个文件对每个查询进行单元测试，以确保它们对于从 MSSQL Server 2005 到 MYSQL 的数据迁移是正确的

**给出了 STRING.FORMAT 规范，下面是最好的解决方案。它是否正确。测试通过了，但我认为我应该尽可能地更改原始代码**

```
package artemispm.autocalc;

import java.sql.*;
import java.util.*;
import a7.unittests.dao.UnitTestHelper;
import artemispm.serverutil.*;
import artemispm.trdo.*;
import artemispm.parser.*;

public abstract class TRBaseScoreCalculator implements ExpressionParserLookup {

/******THIS IS THE PLACE I NEED TO HAVE CORRECTED**********/
/*HOW DO I FORCE THIS TO PUSH VALUES INTO 'match' and 'useFor'*/
/**SO THAT I CAN CALL NEW_QUERY FROM ANOTHER CLASS *****/
/****IT SAYS 'match' and 'useFor' cannot be resolved****/

public static String NEW_QUERY = String.format( "select count(userfieldid) from tr_userfield where calcexpression like %s and usefor like %s", "?", "?");

public Connection               m_con;
protected String                m_characName        = "";

public boolean isThisCharacInUse(Connection con, String characName,String useFor) 
throws SQLException, TRException {
    boolean result;        
    String match = "[" + TRBaseSql.rewrapQuotes(characName) + "]";

    if(TRBaseSql.getDatabaseType(con) == TRBaseSql.DBTYPESQLSERVER) {
        match = "[[]" + TRBaseSql.rewrapQuotes(characName) + "]";
    }

    TRSystemSQL sql = new TRSystemSQL();
    TRSystem sys=sql.getSystem(con);
    result =    (   sys.getScoreCalculation() != null 
                &&  sys.getScoreCalculation().indexOf(match) >= 0  );
    if (result) return(result);
    else {

        int count;

        /*****THIS IS THE PLACE I NEED HELP AT  12/5/2012 ******/

        PreparedStatement stmt = con.prepareStatement(TRBaseScoreCalculator.NEW_QUERY);
        stmt.setString(1, "%"+match+"%");
        stmt.setString(2, "%"+useFor+"%");

        count = sql.executeGetInt(con, stmt.toString() , null);

        if (count > 0) return true;
        count = sql.executeGetInt(con, 
                "select count(characid) from tr_charac where calcexpression like '%" + match + "%'and usefor like '%" + useFor +"%'" , null);
        return (count > 0);
        }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:08:21.883

静态变量/方法与 lass 定义相关联，因此您不能在其中使用任何非静态变量/方法。

如果您的`match`and`useFor`不是静态的（就是这种情况），那么您不能有这样的静态 qquery：

> public static String NEW_QUERY = "select count(userfieldid) from tr_userfield where calcexpression like '%" + match + "%' and usefor like '%" + useFor +"%'";

最好在查询中使用占位符：

```
 public static String NEW_QUERY = 
           "select count(userfieldid) from tr_userfield "+
            " where calcexpression like ? and usefor like ?"; 
```

以及使用的地方，使用查询参数设置方法传递值：

```
 PreparedStatement stmt= con.prepareStatement(TRBaseScoreCalculator.NEW_QUERY);
   stmt.setString(1,"%"+match+"%");
   stmt.setString(1,"%"+useFor+"%"); 
```

**编辑**：如果您想使用，请`String.format`尝试以下操作：

```
 public static String NEW_QUERY =  "select count(userfieldid) from tr_userfield "+
                           "  where calcexpression like '%s' and usefor like '%s'"; 
```

在您使用查询字符串的那一行，执行以下操作：

```
 String updatedQuery = String.format(TRBaseScoreCalculator.NEW_QUERY, 
                                      "%"+match+"%", "%"+useFor+"%");
 count = sql.executeGetInt(con, updatedQuery, null); 
```

但我仍然更喜欢这`PraparedStatement`条路线，在这种情况下你不需要不必要`String.format`的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:12:04.307

如果您使用`PreparedStatement`s，您不仅可以避免从静态上下文引用非静态内容的问题，而且您的应用程序也不会[那么容易受到损害](http://en.wikipedia.org/wiki/SQL_injection)。

# java - 输入到字符串的原始字符

> ID：13732435
> 
> 赞同：0
> 
> 时间：2012-12-05T21:05:22.853
> 
> 标签：java

我正在尝试使用 Graphics2D 进行聊天渲染用户输入。为此，我需要将*原始*（用户在键盘上键入的每个字符或字母）用户输入获取到字符串。目前我正在使用

```
if (input.isKeyPressed(input.KEY_A)) {
    this.text += "a";
} 
```

但是，这需要我注册每个键（并且某些字符不可用）。

如何获取字符串的原始输入？

编辑：我正在使用 Slick2d 库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:11:56.150

我不知道您现在使用的是哪个库，但在 Java Swing 中您可以使用：

```
char typedCharacter = KeyEvent.getKeyChar(); 
```

这个想法是你应该“听”关键事件，而不是连续检查是否按下了一个键。尝试找出如何做到这一点，使用您正在使用的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:15:42.847

您需要一个`KeyListener`实现该`keyTyped(KeyEvent e)`方法的。在这种方法中，您将能够`e.getKeyChar()`按照其他答案之一的建议进行操作。

# performance - PHP5-FPM 随机开始消耗大量 CPU

> ID：13732436
> 
> 赞同：17
> 
> 时间：2012-12-05T21:05:23.133
> 
> 标签：performance, nginx, performance-testing, php

我遇到了一个非常奇怪的问题，我不确定如何进一步调试。我有一个 NGINX + PHP5-FPM + APC Amazon Ubuntu 实例，上面安装了一个网站，这是一个复杂的 PHP 框架。在尝试调试问题时，我将流程简化为：包含许多大类，创建主要对象，启动会话，从 memcached 检索配置数组，从 memcached 检索 XML 文件，HTML包括模板，输出被发送到客户端。

然后我使用`http_load`工具将网站置于每秒 20 个请求的负载下：`http_load -timeout 10 -rate 20 -fetches 10000 ./urls.txt`

接下来发生的事情相当奇怪。`top`显示了一堆 php5-fpm 进程，每个进程都占用了几个 % 的 CPU 并且一切运行顺利，如下所示：

```
PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
28440 www-data 20 0 67352 10m 5372 S 4.3 1.8 0:20.33 php5-fpm
28431 www-data 20 0 67608 10m 5304 S 3.3 1.8 0:16.77 php5-fpm
28444 www-data 20 0 67352 10m 5372 S 3.3 1.8 0:17.17 php5-fpm
28445 www-data 20 0 67352 10m 5372 S 3.0 1.8 0:16.83 php5-fpm
28422 www-data 20 0 67608 10m 5292 S 2.3 1.8 0:18.99 php5-fpm
28424 www-data 20 0 67352 10m 5368 S 2.0 1.8 0:16.59 php5-fpm
28438 www-data 20 0 67608 10m 5304 S 2.0 1.8 0:17.91 php5-fpm
28439 www-data 20 0 67608 10m 5304 S 2.0 1.8 0:23.34 php5-fpm
28423 www-data 20 0 67608 10m 5292 S 1.7 1.8 0:20.02 php5-fpm
28430 www-data 20 0 67608 10m 5300 S 1.7 1.8 0:15.77 php5-fpm
28433 www-data 20 0 67352 10m 5372 S 1.7 1.8 0:17.08 php5-fpm
28434 www-data 20 0 67608 10m 5292 S 1.7 1.8 0:18.56 php5-fpm
20648 memcache 20 0 51568 8192 708 S 1.3 1.3 2:51.06 memcached
28420 www-data 20 0 69876 13m 6300 S 1.3 2.3 0:20.89 php5-fpm
28421 www-data 20 0 67608 10m 5300 S 1.3 1.8 0:21.19 php5-fpm
28429 www-data 20 0 9524 2260 992 S 1.3 0.4 0:11.68 nginx
28435 www-data 20 0 67608 10m 5304 S 1.3 1.8 0:18.58 php5-fpm
28437 www-data 20 0 67352 10m 5372 S 1.3 1.8 0:17.87 php5-fpm
28441 www-data 20 0 67608 10m 5292 S 1.3 1.8 0:20.75 php5-fpm 
```

然后在可能在一秒到几分钟之间的一段时间后，几个（通常是两个）php5-fpm 进程突然消耗了所有 CPU：

```
PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
28436 www-data 20 0 67608 10m 5304 R 48.5 1.8 0:23.68 php5-fpm
28548 www-data 20 0 67608 10m 5276 R 45.2 1.7 0:07.62 php5-fpm
28434 www-data 20 0 67608 10m 5292 R 2.0 1.8 0:23.28 php5-fpm
28439 www-data 20 0 67608 10m 5304 R 2.0 1.8 0:26.63 php5-fpm 
```

此时一切都卡住了，所有新的 HTTP 请求都超时。如果我停止 http_load 工具，php5-fpm 会挂在那里很多分钟。有趣的是，如果我这样做`php5-fpm stop`了，php5-fpm 进程将消失，但任何使用文件系统的命令都会在执行时出现问题。例如，如果我尝试通过 ssh 下载文件，`top`将显示以下内容，需要几分钟才能启动实际下载：

```
PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
3298 sshd 20 0 7032 876 416 R 75.2 0.1 0:04.52 sshd
3297 sshd 20 0 7032 876 416 R 24.9 0.1 0:04.49 sshd 
```

PHP错误日志通常有这样的：

```
[05-Dec-2012 20:31:39] WARNING: [pool www] seems busy (you may need to increase pm.start_servers, or pm.min/max_spare_servers), spawning 8 children, there are 0 idle, and 58 total children
[05-Dec-2012 20:32:08] WARNING: [pool www] seems busy (you may need to increase pm.start_servers, or pm.min/max_spare_servers), spawning 16 children, there are 0 idle, and 66 total children 
```

Nginx 错误日志充斥着这些条目：

```
2012/12/05 20:31:36 [error] 4800#0: *5559 connect() to unix:/dev/shm/php-fpm-www.sock failed (11: Resource temporarily unavailable) while connecting to upstream, client: ..., server: ec2-....compute-1.amazonaws.com, request: "GET /usa/index.php?page=contact_us HTTP/1.0", upstream: "fastcgi://unix:/dev/shm/php-fpm-www.sock:", host: "ec2-....compute-1.amazonaws.com" 
```

PHP-FPM 慢日志没有显示任何有趣的东西，交换从未发生过，我也没有设法收集任何其他关于该问题的有趣事实。我经历了配置文件更改的多次迭代，最近的一次是

nginx.conf：[http://pastebin.com/uaD56hJF](http://pastebin.com/uaD56hJF)

pool.d/www.conf：[http ://pastebin.com/mFeeUULC](http://pastebin.com/mFeeUULC)

===更新 1===

站点配置： http: [//pastebin.com/qvinVNhB](http://pastebin.com/qvinVNhB)

===更新 2===

也刚刚发现`dmesg`报告这样的错误

```
[6483131.164331] php5-fpm[28687]: segfault at b6ec8ff4 ip b78c3c32 sp bff551f0 error 4 in ld-2.13.so[b78b5000+1c000] 
```

===更新 3===

我们有一个新的 Amazon EC2 微型实例以防万一，以排除可能的硬件问题。另外我现在使用 php-fastcgi 来排除可能的 fpm 错误。其他差异很小，我认为唯一改变的是 Ubuntu->Debian。除了现在服务器设法在 max_execution_time 秒后稍微恢复（然后再次达到峰值）之外，仍然会发生相同的问题。

我尝试使用单独的 test.php，但我不确定这是否是同一个问题，但至少在`top`它看起来一样。我创建了一个 test.php 并包含了一堆属于我们框架的库。除了定义类或包含定义类的其他库之外，这些库不做任何事情。我与 APC 进行了核对，所有这些都由它成功提供。我开始以每秒 200 个请求向 test.php 施压，一段时间后同样的事情发生了。除了现在我设法得到一些错误，说“打开的文件太多”。但它并不总是发生，有时它只是开始超时而没有输出错误，并且一些 php 进程卡住了所有 CPU。我只玩了一点，但我认为这里有一个相关性——通过控制包含的库的数量或稍微改变请求/秒的速率，我可以控制 CPU 峰值何时发生。

```
fs.file-max = 70000
...
*       soft    nofile   10000
*       hard    nofile  30000
...
worker_rlimit_nofile 10000;
...
(reloaded all the configs and made sure the new system vars actually took affect) 
```

所以到目前为止我能想到的下一个最好的也是唯一的解释是，即使 APC 应该从内存中提取文件，但在内部，它的实现方式仍然是在调用 PHP include-s 时仍然使用文件描述符。或者是因为它延迟释放它们，或者在某个不幸的时刻太多请求同时到达，系统运行我们的描述符并且新到达的 HTTP 请求很快堆积到一个巨大的队列中。我会尝试以某种方式对此进行测试。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T21:17:41.800

我已经运行一个具有类似配置的网站好几个月了，停机时间为零。我看了一下你的配置，感觉还可以。话虽如此，我很久以前就做了我的配置。

我会考虑减少`pm.max_requests = 10000`到更合理的东西，比如`pm.max_requests = 500`. 这只是意味着“不要将每个实例用于超过 X 个请求”。这个数字最好不要太高，因为这样做可以让您对可能的 PHP 引擎错误有弹性。

我认为真正的问题很可能出在您的 PHP 脚本中。不知道更多就很难说。

编辑：考虑取消注释`;request_terminate_timeout = 0`并将其设置为`request_terminate_timeout = 20`. 然后，您的脚本将需要在 20 秒内完成。您很可能会看到行为发生变化，但我认为您的网站可能会继续存在。这将表明 PHP 脚本错误。

EDIT2：我自己的 php-fpm 配置如下：

```
[example.com]
listen = /var/run/sockets/example.com.socket
user = www-data
group = www-data
pm = dynamic
pm.start_servers = 5
pm.max_children = 15
pm.min_spare_servers = 5
pm.max_spare_servers = 10
pm.max_requests = 500
php_flag[expose_php] = off
php_flag[short_open_tag] = on 
```

EDIT3：我在你的 nginx 配置中发现了一些意想不到的东西，但它可能什么都不是。

您正在使用`fastcgi_ignore_client_abort on;`哪个在旧版本的 nginx 下导致工作进程出现问题。我自己没有看到这个问题，因为我正在运行最新版本的自定义编译。以下是 nginx 网站上的问题描述：

> 在 1.0.2 中，当 fastcgi_ignore_client_abort 设置为 on 时，无法正确处理 POST 请求，这可能导致工作进程出现段错误。将 fastcgi_ignore_client_abort 切换回默认值（关闭）应该可以解决此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-01T07:14:10.530

简单的技巧，但对于将处理器使用率降低多达 50% 非常有用，只需编辑您的 php-fpm 配置：

```
pm = dynamic 
```

并将其更改为：

```
pm = ondemand 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-28T08:24:53.217

我的服务器上 PHP-FPM 的行为和你一样。瓶颈肯定在某个地方。
问题变成了：如何在 Nginx - PHP-FPM - Mysql 上找到瓶颈？最快的方法是：为 PHP-FPM 启用慢日志。
将下面的行添加到您的 php-fpm.conf 池中，并确保路径存在

```
request_slowlog_timeout = 10
slowlog = /var/log/php-fpm/slow.$pool.log 
```

通过阅读日志回溯，您可以找出 PHP-FPM 花费如此多 CPU 或超时的原因。这是我的案例：

```
[28-Dec-2018 14:56:55]  [pool laravel] pid 19061
script_filename = /public_html/index.php
[0x00007efdda4d8100] hasChildren() /public_html/laravel/vendor/symfony/finder/Iterator/ExcludeDirectoryFilterIterator.php:75
[0x00007ffe31cd9e40] hasChildren() unknown:0
[0x00007ffe31cda200] next() unknown:0
[0x00007ffe31cda540] next() unknown:0
[0x00007ffe31cda880] next() unknown:0
[0x00007efdda4d7fa8] gc() /public_html/laravel/vendor/laravel/framework/src/Illuminate/Session/FileSessionHandler.php:91
[0x00007efdda4d7e50] gc() /public_html/laravel/vendor/laravel/framework/src/Illuminate/Session/Middleware.php:159
[0x00007efdda4d7d48] collectGarbage() /public_html/laravel/vendor/laravel/framework/src/Illuminate/Session/Middleware.php:128
[0x00007efdda4d7c20] closeSession() /public_html/laravel/vendor/laravel/framework/src/Illuminate/Session/Middleware.php:79
[0x00007efdda4d7ac8] handle() /public_html/laravel/vendor/laravel/framework/src/Illuminate/Cookie/Queue.php:47
[0x00007efdda4d7930] handle() /public_html/laravel/vendor/laravel/framework/src/Illuminate/Cookie/Guard.php:51
[0x00007efdda4d7818] handle() /public_html/laravel/vendor/stack/builder/src/Stack/StackedHttpKernel.php:23
[0x00007efdda4d76e0] handle() /public_html/laravel/vendor/laravel/framework/src/Illuminate/Foundation/Application.php:641
[0x00007efdda4d7598] run() 
/public_html/index.php:51 
```

回溯提到了这些关键字：

```
"cookie" "session" "collectGarbage()" "laravel" 
```

我一直在搜索和 TADA，Laravel 使用 RANDOM 方法清除过期会话。在我的配置中，PHP 使用 SSD 来处理 Session。
当会话数变得“非常大”这使得 PHP 花费更多时间来处理 => 高 CPU 使用率。

我们可以有很多种瓶颈， **当我们“调试”它时就可以知道它。**

好好调查一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-24T17:20:45.540

我现在正在经历同样的问题，并想向您指出这篇文章：

## [如何确定 PHP-FPM 进程中正在执行哪个脚本](https://stackoverflow.com/questions/15023540/how-to-determine-which-script-is-being-executed-in-php-fpm-process)

它必须是您的 PHP 脚本之一。看看您是否可以将失控的进程 ID 与阻碍您的 .php 脚本文件联系起来。

有趣的是，这是在一个速度无可挑剔的服务器上。我认为 WordPress 升级（插件或核心）可能非常负责任。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T16:47:13.447

我有同样的问题。我尝试重新配置 PHP-FPM 和 NGINX 并没有走得太远。我们的一个人禁用了 v8js.php ( [http://php.net/manual/en/book.v8js.php](http://php.net/manual/en/book.v8js.php) )，它解决了这个问题。我建议在找到麻烦制造者之前禁用任何 php 模块。希望这可以帮助某人。

# apache-flex - socket.io 服务器发布

> ID：13732438
> 
> 赞同：0
> 
> 时间：2012-12-05T21:05:25.543
> 
> 标签：apache-flex, node.js, socket.io, publish-subscribe

我有一个非常简单的节点服务器，它监听一个套接字并将消息传输到所有客户端（flex）。虽然这适用于发布消息的客户端，但我也希望能够通过 Web API 发布消息。可能吗？

```
var express = require('express');
var app = express();
var io = require('socket.io').listen(server, {
    flashPolicyServer: true,
    transports: ['flashsocket', 'websocket', 'htmlfile', 'xhr-polling', 'jsonp-polling']});

io.sockets.on('connection', function(client) {
    client.on('invalidation', function(message) {
        client.emit('message', message); // send message to sender
        client.broadcast.emit('message', message); // send message to everyone else but the sender
    });

    client.on('disconnect', function(client) {});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:09:37.377

我忘了说 Web API 是用 PHP 编写的。无论如何，我发现 socket.io 使用了一个非常特定的套接字，因此我不能只使用 PHP 中的任何套接字来访问它。有一个名为 Elephant 的库，它非常易于使用且运行良好。

# .net - 如何通过 .NET 在任何显示器上隐藏/显示 Windows 8 任务栏？

> ID：13732440
> 
> 赞同：1
> 
> 时间：2012-12-05T21:05:36.400
> 
> 标签：.net, windows-8, taskbar, user32

我有一个个人应用程序，允许我在 Windows 中隐藏和显示任务栏。它通过调用 user32.dll 来实现这一点：

```
ShowWindow(int hwnd, int command) 
```

可以在[此处](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633548%28v=vs.85%29.aspx)找到此 API 的文档。

我遇到的问题是，显然任务栏在 Windows 8 中发生了一些变化，因为它现在扩展到所有显示器。

有谁知道在 Windows 8 中是否可以在单个屏幕上隐藏和显示任务栏（仅包含代码），如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:22:19.637

找了好久，决定自己写一个。

我已将其上传到 Nuget。在这里能找到它：

[http://nuget.org/packages/BasicWindowsTaskbarManager](http://nuget.org/packages/BasicWindowsTaskbarManager)

我怀疑它是世界上最稳定的库，但如果你确实有问题，请告诉我，我会看看我能做些什么。

# oracle - oracle sysdate 插入文本

> ID：13732446
> 
> 赞同：1
> 
> 时间：2012-12-05T21:06:10.783
> 
> 标签：oracle

我必须在 oracle 的注释列中插入文字说明

> 当年利率设置为`sysdate`

需要将当前年份插入为 2012 和 sysdate 给出今天的日期。

我知道如何从中获取当前年份，`sysdate`但我坚持将上述文本插入我的专栏。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:08:09.483

```
update the_table
   set the_comment = 'current year rate is set on '||to_char(sysdate, 'yyyy-mm-dd'); 
```

# database - 使用自动重命名重复字段合并 ms-access 2010 中的两个表

> ID：13732449
> 
> 赞同：3
> 
> 时间：2012-12-05T21:06:27.527
> 
> 标签：database, ms-access

我想合并两个表，但我的问题是我希望代码识别未来的条目。我希望它能够对新样本进行排序并将字段重命名为（_1，_2，...并继续）。这些是我的表：

```
Table1    
    ID  F_Name  L_Name  Addr    Phone
    1   A1      A2      A3      A4
    2   B1      B2      B3      B4
    3   C1      C2      C3      C4 
```

和

```
Table2
ID  Date    Smpl    Color
1   D1      D2      D3
2   E1      E2      E3
1   F1      F2      F3
1   G1      G2      G3
3   H1      H2      H3
2   I1      I2      I3 
```

我希望合并的表看起来像这样：

```
Results:
ID  F_Name  L_Name  Addr    Phone   Date_1  Smpl_1  Color_1 Date_2  Smpl_2  Color_2 Date_3  Smpl_3  Color_3
1   A1      A2      A3      A4      D1      D2      D3      F1      F2      F3      G1      G2      G3
2   B1      B2      B3      B4      E1      E2      E3      I1      I2      I3          
3   C1      C2      C3      C4      H1      H2      H3 
```

我很困惑，我无法得到正确的结果。你能帮我查询代码吗？我希望将表 2 中的数据添加并以旧顺序重命名为新顺序。我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:59:00.537

使用 VBA 将是最容易的。我会给你一步一步的指导，但你必须查找每个步骤的命令和语法。

* * *

首先确定表 2 中任何 ID 的最大可能计数。在您的示例中，它是 3（来自 ID #1）。我们称它为N。

现在您将执行“DROP TABLE”查询。我们称之为表 3。

然后，您将执行“CREATE TABLE”查询并使用 N 作为字段计数的基础。我们将其称为表 3。

然后使用 UPDATE 查询重置表 2 中的标志。

使用从表 1 到表 3 执行追加查询。

将接下来的 2 个步骤循环 N 次。

执行通过 ID 字段链接表 2 和 3 的更新查询，此查询将使用第**一个**分组选项并根据表 2 中的设置标志字段过滤掉任何记录。这将更新表 3 中的 Date_N / Smpl_N / Color_N 字段. 使用与上述相同的条件执行另一个更新，但设置表 2 中的标志。

* * *

您在这里所做的是获取每个未标记的人的第一条记录，并使用该信息更新您的记录。然后，您将标记那些刚刚用于更新的记录，以便在下一次通过时跳过它们。

# jquery - 如何在水平滚动页面上创建平滑跳转到部分？

> ID：13732451
> 
> 赞同：1
> 
> 时间：2012-12-05T21:06:37.337
> 
> 标签：jquery, scroll, page-jump

我正在为我的摄影业务建立我的投资组合网站。我已经建立了网站，所以投资组合水平滚动。

这就是我到目前为止所拥有的。 [http://www.dscottclarkphoto.com/portfolio/adventure/adventure.html](http://www.dscottclarkphoto.com/portfolio/adventure/adventure.html)

我希望能够包含箭头，当单击时将查看器跳转到下一张照片。

我尝试使用这里演示的内容： [jQuery: jump to next <section>](https://stackoverflow.com/questions/7906001/jquery-jump-to-next-section)

我将 Javascript 保存到它自己的名为 jump.js 的文件中。

```
<script src="../jquery.js"></script>
<script type="text/javascript" src="../jump.js"></script>
</head>

<div id="images">
 <ul> 
    <li><section id="1"><img src="../space.jpg" /></section></li>
    <li><section id="2"><img src="adventure/adv-01.jpg" /></section></li>
    <li><section id="3"><img src="adventure/adv-02.jpg" /></section></li>
    <li><section id="4"><img src="adventure/adv-03.jpg" /></section></li>
    <li><section id="5"><img src="adventure/adv-04.jpg" /></section></li>
  </ul> 
```

我也尝试保存样本，但它的行为也不正确。

```
</div> 
```

关于如何使这项工作或更好的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:29:29.260

我尝试了以下代码。它完全按照您的意愿工作。

```
$(function(){
    var currentImage = 1;
    var imagesCount = $('#images li').length - 1;
    var spacerWidth = $('#images li:eq(1)').offset().left;
    $('#scroll').click(function(){
        currentImage++;
        if (currentImage == imagesCount) currentImage = 1;
        var left = $('#images li').eq(currentImage).offset().left;
        $(window).scrollLeft(left - spacerWidth);
    });
}); 
```

当您添加适当的滚动按钮时，只需更改`$('#scroll')`其选择器即可。现在它附加到“以这种方式滚动>”文本。

请注意，您不需要添加任何额外的标记之类`<section>`的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:32:10.033

在您发布的链接中，他们使用垂直滚动（`$(myEl).offset().top`）如果您使用水平滚动，您应该将其更改为`$(myEl).offset().left`。没试过，但应该是这样。此外，与该问题无关，但它可能有助于改善页面的外观，您可能希望保存图像，`*.png interlaced`以免它们像当前那样滑落。

# google-maps-api-3 - Google Maps API V3 中的 SVG 叠加层

> ID：13732454
> 
> 赞同：1
> 
> 时间：2012-12-05T21:06:48.823
> 
> 标签：google-maps-api-3, svg

当标记太多而无法实际固定在地图上时，我正在动态创建标记的 svg 以放置在地图上以高缩放级别。我制作了svg；如何在 Google Maps API 中叠加它？我看到的所有文档都说我需要创建一个带有路径的图像，但我没有。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T09:54:27.027

（延迟回复其他有同样问题的用户）

如果您仅在 JS 画布中动态使用 SVG。只需将其导出为 JS 字符串，
而不是`http://path/to/file.svg`
提供数据 uri，即：`data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding`... 对于转义字符串，请使用 escape() 函数。

见[http://dopiaza.org/tools/datauri/index.php](http://dopiaza.org/tools/datauri/index.php)

# c++ - 如何让 g_print() 出现？

> ID：13732455
> 
> 赞同：0
> 
> 时间：2012-12-05T21:06:52.613
> 
> 标签：c++, linux, glib

我刚刚从离开公司的人那里继承了一个图书馆。它是用 C++ 编写的，并且在整个代码中都使用了 g_print()。我知道库正在运行，但我看不到任何调试输出。我需要做些什么才能让它出现吗？g_print() 是否仅适用于调试版本？还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:17:41.443

我最终使用了 g_log（如上面[David Schwartz](https://stackoverflow.com/users/721269/david-schwartz)所建议的那样），然后按照[C - gtk Logging](http://www.picksourcecode.com/ps/ct/16100.php) overriding 中的指定覆盖它：

```
void log_handler(const gchar *log_domain,
                 GLogLevelFlags log_level,
                 const gchar *message,
                 gpointer user_data)
{
    FILE *logfile = fopen ("/tmp/debug.log", "a");
    if (logfile == NULL)
    {
        /*  Fall  back  to  console  output  if  unable  to  open  file  */
        printf ("Rerouted to console: %s", message);
        return;
    }

    fprintf (logfile, "%s", message);
    fclose (logfile);
}

uint handlerid = g_log_set_handler(NULL,
    G_LOG_LEVEL_MASK | G_LOG_FLAG_FATAL | G_LOG_FLAG_RECURSION,
    log_handler,
    NULL);

if (!g_main_loop_is_running())
{
    g_log(G_LOG_DOMAIN, G_LOG_LEVEL_ERROR, "g_main_loop_is_running() returned 0\n");
}

if (handlerid != 0)
{
    g_log_remove_handler(NULL, handlerid);
    handlerid = 0;
} 
```

# php - Magento - 调整图像大小，保持纵横比，裁剪超出大小的内容

> ID：13732463
> 
> 赞同：5
> 
> 时间：2012-12-05T21:07:47.507
> 
> 标签：php, image, magento, crop, aspect-ratio

我想在 magento 中调整图像的大小，保持其纵横比，并使其填充另一个纵横比的矩形。

例子：

我的图像是 640x480

我的矩形是 100x50

我希望图像填充所有矩形并裁剪超出它的部分。

我知道*keepFrame(FALSE)* - 它不会使图像填充矩形，而是使它适合内部并且不裁剪任何东西。

另外，如果您熟悉 Wordpress，我想要的是： *add_image_size('home',370,256,true);*

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T15:13:43.863

看一看 @

由于 magento 改变了页面链接结构，请尝试[http://web.archive.org/web/20140707042130/http://www.magentocommerce.com/boards/viewthread/47269/](http://web.archive.org/web/20140707042130/http://www.magentocommerce.com/boards/viewthread/47269/)

~~[将产品缩略图裁剪为干净的正方形](http://www.magentocommerce.com/boards/viewthread/47269/)~~

尝试

```
<img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(120,null); ?>" width="120" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>" /> 
```

# dart - 飞镖的完成者和未来？

> ID：13732473
> 
> 赞同：14
> 
> 时间：2012-12-05T21:08:30.933
> 
> 标签：dart, dart-async

```
Future readData() {
    var completer = new Completer();
    print("querying");
    pool.query('select p.id, p.name, p.age, t.name, t.species '
        'from people p '
        'left join pets t on t.owner_id = p.id').then((result) {
      print("got results");
      for (var row in result) {
        if (row[3] == null) {
          print("ID: ${row[0]}, Name: ${row[1]}, Age: ${row[2]}, No Pets");
        } else {
          print("ID: ${row[0]}, Name: ${row[1]}, Age: ${row[2]}, Pet Name: ${row[3]},     Pet Species ${row[4]}");
        }
      }
      completer.complete(null);
    });
    return completer.future;
  } 
```

以上是取自 github [SQLJocky Connector的示例代码](https://github.com/jamesots/sqljocky/blob/master/example/example.dart)

如果可能的话，我希望有人向我解释为什么在 pool.query 之外创建了一个完成器对象的函数然后调用了一个函数 completer.complete(null)。

简而言之，我无法理解打印执行后的部分。

**注意：如果可能的话，我还想知道 future 和 Completer 如何用于 DB 和非 DB 操作的实际用途。**

我探索了以下链接： [Google groups Discussion on Future and Completer](https://groups.google.com/a/dartlang.org/forum/?fromgroups=#!topic/misc/Xqgu2KT3hwE)

和下面给出的 api 参考文档 [Completer api 参考](http://api.dartlang.org/docs/bleeding_edge/dart_core/Completer.html)和[Future api 参考](http://api.dartlang.org/docs/bleeding_edge/dart_core/Future.html)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-05T21:17:35.607

从某种意义上说，该方法返回的 Future 对象连接到该完成者对象，该完成者对象将在“将来”的某个时间点完成。在 Completer 上调用 .complete() 方法，它向未来发出它已完成的信号。这是一个更简化的示例：

```
Future<String> someFutureResult(){
   final c = new Completer();
   // complete will be called in 3 seconds by the timer.
   new Timer(3000, (_) => c.complete("you should see me second"));
   return c.future;
}

main(){
   someFutureResult().then((String result) => print('$result'));
   print("you should see me first");
} 
```

这是[一篇博客文章的链接，其中详细介绍了期货有用的其他场景](http://phylotic.blogspot.com/2012/10/common-dart-scenarios-for-future.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T21:17:48.073

Completer 用于为future 提供一个值，并发出信号以触发附加到future 的任何剩余回调和延续（即在调用站点/在用户代码中）。

这`completer.complete(null)`是用于向未来发出异步操作已完成的信号。完整的 API 表明它必须提供 1 个参数（即不是可选的）。

```
void complete(T value) 
```

此代码对返回值不感兴趣，只是通知调用站点操作已完成。因为它只是打印，您需要检查控制台的输出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-14T04:09:57.010

正确答案在 DartPad 中有错误，原因可能是 Dart 版本。

```
error : The argument type 'int' can't be assigned to the parameter type 'Duration'.
error : The argument type '(dynamic) → void' can't be assigned to the parameter type '() → void'. 
```

以下片段是补充

```
import 'dart:async';

Future<dynamic> someFutureResult(){
   final c = new Completer();
   // complete will be called in 3 seconds by the timer.
   new Timer(Duration(seconds: 3), () {     
       print("Yeah, this line is printed after 3 seconds");
       c.complete("you should see me final");       
   });
   return c.future;

}

main(){
   someFutureResult().then((dynamic result) => print('$result'));
   print("you should see me first");
} 
```

结果

```
you should see me first
Yeah, this line is printed after 3 seconds
you should see me final 
```

# php - PHP从构造函数调用类方法不填充数组

> ID：13732474
> 
> 赞同：1
> 
> 时间：2012-12-05T21:08:31.063
> 
> 标签：php

我有一个非常奇怪的问题，当我从构造函数中调用类的方法时，我得到空数组，但是当我从类实例调用方法时它工作正常。

这是 loadxml.php 的代码：

```
include('XMLNode.php'); // this is a simple object class

class LoadXML
{
public $MyNodes = array();

public function __constructor($xmlFile)
{
    $this->getNodes($xmlFile);
}

public function getNodes($xmlFile)
{
    if (file_exists($xmlFile)) {
        $xmlNodes = simplexml_load_file($xmlFile);

        foreach ($xmlNodes->XMLNode as $key => $value) {
            array_push($this->MyNodes, $value);
        }
    }
    else
    {
        exit('Failed to open xml file '.$xmlFile);
    }
}
} 
```

现在在主文件中，如果我这样调用：

```
include('loadxml.php');

$nodes = new LoadXML('myXMLFile.xml');

print "<pre>";
print_r($nodes);
print "</pre>"; 
```

...结果如下所示：

LoadXML 对象 ( [MyNodes] => 数组 ( ) )

如果我像这样从类实例进行调用并注释掉从 LoadXML 构造函数中对 getNodes 的调用：

```
include('loadxml.php');

$nodes = new LoadXML();
$nodes->getNodes('myXMLFile.xml');

print "<pre>";
print_r($nodes);
print "</pre>"; 
```

我会得到正确的输出。发生了什么？我在第一种方法中做错了什么？我是否从类构造函数中遗漏了什么？我查看了手册（[http://php.net/manual/en/oop4.newref.php](http://php.net/manual/en/oop4.newref.php)），从构造函数中调用该方法似乎是合法的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T21:12:17.513

尝试将您的构造函数重命名为`__construct`

# scala - Scala构造函数继承

> ID：13732476
> 
> 赞同：4
> 
> 时间：2012-12-05T21:08:33.293
> 
> 标签：scala, inheritance, constructor

这是一件事：我有一些基础课程，例如：

```
abstract class Car(private val model: String = "no name") 
```

我想要类 extends `Car`，例如：

```
class Mazda(model: String) extends Car(model) 
```

我的问题是：如何在没有给定模型的情况下创建 Mazda 实例：`new Mazda`并拥有带有名称的对象`no name`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:17:30.693

为了实现您的目标，您必须在子类中定义默认值：

```
class Mazda(model: String = "no name") extends Car(model) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-11T14:30:27.573

我认为您的问题尚未得到完全回答，部分原因是您尚未接受 yakshaver 的回答。该答案建议您这样做：

```
abstract class Car(private val model: String = "no name")
class Mazda(model: String = "no name") extends Car(model) 
```

在这种情况下，调用`new Mazda`会为您提供所需的结果。但这并不完全令人满意，因为魔线`"no name"`出现在两个不同的地方。你可能希望你能找到一种方法来调用`Car`构造函数内部没有参数的`Mazda`构造函数，可能是这样的：

```
// does not compile!
class Mazda(model: String) extends Car(model) {
    def this() { super() } // attempt at an auxiliary constructor
} 
```

不幸的是，任何辅助构造函数最终都必须直接或间接调用该类的主构造函数。因此，如果您希望能够`model`在某些情况下为 a 的构造指定`Mazda`，则有时您无法在`Car`不带参数的情况下调用构造函数。

如果你想避免魔术`"no name"`字符串的重复，最好的办法就是把它拉到某个地方的常量。例如，像这样：

```
object Car {
  val DefaultCarModel = "no name"
}
abstract class Car(private val model: String = DefaultCarModel)
class Mazda(model: String = DefaultCarModel) extends Car(model) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T01:17:45.727

扩展一些没有名字的东西怎么样？

```
trait DefaultNameIsNoName extends Car {
  override name = "no name"
}

class Fiat extends Car with DefaultNameIsNoName 
```

或者有另一个可以继承的无名类：

```
class NoNameCar extends Car with DefaultNameIsNoName

class Packard extends NoNameCar 
```

但是：拥有一辆没有型号名称的汽车意味着什么？你确定你是在模拟一个真实的东西吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:56:06.500

我觉得这是不可能的，并尝试解释原因：

1.  您本质上需要一个辅助构造`Mazda`函数，以不同的方式调用超类构造函数
2.  辅助构造函数最终将调用默认构造函数，其中调用超类构造函数。
3.  超类构造函数在默认构造函数中仅以一种形式出现。（？）

像 c++ 这样的一些语言可以给你想要的东西，因为构造函数是相互独立的，并且在那里自己调用超类构造函数。在java中，你可以做两种方式，依赖和独立。但是你必须为每个子类编写辅助构造函数，这是更多的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T21:56:58.747

不确定这是你想要的，但是

```
abstract class Car(private val model: String = "no name")
class Mazda extends Car 
```

您现在可以简单地创建马自达

```
val car = new Mazda 
```

和模型的价值将是`"no name"`

# .net - Visual Basic 中程序执行的时间安排

> ID：13732482
> 
> 赞同：-2
> 
> 时间：2012-12-05T21:08:46.237
> 
> 标签：.net, vb.net, visual-studio, scheduled-tasks, scheduling

我想在 Visual Basic（使用 Visual Studio）中创建一个工具，使您能够成为工作定义（程序）、何时运行、计划执行、应用程序启动、执行记录、何时开始、何时结束.. 很快。

有谁知道我该怎么做？

我需要你的帮助。
这对我来说非常重要。
非常感谢大家。
我很感激。

* * *

我已经在文本框中上传了一个文件（我的计算机中文件 .exe 的路径）。

我已经设置了文件执行的开始时间。

我想要从文本框中获取文件（.exe）并将其设置为在特定时间运行的命令，当我按下按钮时。

有谁知道这个命令；

这是我使用过的命令，但不起作用。：

MyProcess.StartInfo.WorkingDirectory = TextBox1.Text MyProcess.start()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:32:17.157

如果您正在为 Windows 的某些变体进行开发，您应该查看任务计划程序，因为它是现代版本的 Windows 的一部分。

# c++ - lex 模式以匹配 ipv4 点分十进制表示法

> ID：13732485
> 
> 赞同：1
> 
> 时间：2012-12-05T21:08:55.680
> 
> 标签：c++, c, token, lex, flex-lexer

我有一个下面给出的模式来匹配点分十进制表示法中的 ipv4 地址。

```
IPV4ADDRESS (([[:digit:]]{1,3}"."){3}([[:digit:]]{1,3})) 
```

我用

```
%x S_rule S_dst_ip

<S_rule>(dst-ip){SPACE}   {

           BEGIN(S_dst_ip);

        }

<S_dst_ip>\{{IPV4ADDRESS}\}  {

       /*code to process the sring here.*/
     } 
```

匹配表单的输入

```
dst-ip {10.13.12.138} 
```

现在我想匹配

```
dst-ip { 10.13.12.138 } in addition to dst-ip {10.13.12.138} 
```

我将上面定义的 IPV4ADDRESS 修改如下

```
IPV4ADDRESS [ \t]*(([[:digit:]]{1,3}"."){3}([[:digit:]]{1,3}))[ \t]* 
```

但是，此修改似乎不匹配

```
 dst-ip { 10.13.12.138 } OR dst-ip {10.13.12.138} 
```

有人可以指出我的代码中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:48:46.170

由于它“对我有用”，因此我无法告诉您您的代码有什么问题，因为您没有显示 SSCCE（[简短、独立、正确的示例](http://sscce.org/)）。这是一个：

```
/*IPV4ADDRESS     (([[:digit:]]{1,3}"."){3}([[:digit:]]{1,3}))*/
IPV4ADDRESS [ \t]*(([[:digit:]]{1,3}"."){3}([[:digit:]]{1,3}))[ \t]*
SPACE [ \t]

%x S_rule S_dst_ip

%%

%{
    BEGIN S_rule;
%}

<S_rule>(dst-ip){SPACE}   {
           BEGIN(S_dst_ip);
        }

<S_dst_ip>\{{IPV4ADDRESS}\}  {
       printf("\n\nMATCH [%s]\n\n", yytext);
       BEGIN S_rule;
     }

. { ECHO; }

%%

int main(void)
{
    while (yylex() != 0)
        ;
    return(0);
}

int yywrap(void)
{
    return 1;
} 
```

使用基于问题文本的测试数据文件：

```
dst-ip {10.13.12.138}
dst-ip { 10.13.12.138 } 
dst-ip {10.13.12.138}
dst-ip { 10.13.12.138 } OR dst-ip {10.13.12.138} 
```

上面的程序产生（省略了一些空白行）：

```
MATCH [{10.13.12.138}]

MATCH [{ 10.13.12.138 }]

MATCH [{10.13.12.138}]

MATCH [{ 10.13.12.138 }]

 OR 

MATCH [{10.13.12.138}] 
```

如果我不得不猜测出了什么问题，我怀疑您`S_rule`在识别后错过了切换回状态`S_dst_ip`（也可能是开头`%{ BEGIN S_rule; %}`短语）。

我顺便指出，这将被接受`{999.999.999.999}`为 IPv4 地址。但是，使用更严格控制的表达式来解决这个问题是可行的，并且与您的主要问题无关。

# c# - 正则表达式：C# 提取文本中的问题

> ID：13732495
> 
> 赞同：2
> 
> 时间：2012-12-05T21:09:25.677
> 
> 标签：c#, regex, extract

我需要一个正则表达式来检测文本中的问题。

示例输入：

> 请告诉我**如何做到这一点**......或**如何使它正确**！等等....

我需要输出：

> 1.  这该怎么做
> 2.  如何使它正确

现在我用这个： `(?<q>(how to|how match|how many).*)(\s|\.|;|!|\?|( \-)|(\- )|‾|:|…|_|\||@|~|…|–|—|¯|»|•|●|{|}|\(|\)|\\|\]|\[|>|<|→|'|""|`|$)`但不起作用

我只需要**如何**提问

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:13:04.003

您尝试完成的任务与正则表达式的用途不同。

要解决从文本中提取任意问题的问题，您需要的不仅仅是几个好的正则表达式。您应该开始寻找一个好的自然语言处理工具包。也许首先做一些词性标记。然后，您需要从那里进行一些语法和句子解析，然后继续尝试回答以下问题：“这是一个句子吗？” 通过检查您的 NLP 管道将识别的每个句子。

有了这些知识，您至少应该明白，您想要完成的任务相当困难，虽然并非不可能，但需要大量微调才能获得良好的性能（通常使用[准确度和精度指标](http://en.wikipedia.org/wiki/Accuracy_and_precision)来衡量）。你很可能不会得到接近 100% 的结果，但你应该能够通过一个好的 PoS 标注器和一个好的句子解析器获得不错的结果。

**编辑**

根据您最近对该问题的编辑，您可能能够使用 RegEx 和手写规则获得一些基本覆盖，但您仍然无法区分许多更复杂的情况。自然语言处理工具包路线仍然是更通用的解决方案的首选。

不要花太多时间试图想出一个*银弹*正则表达式来匹配自然语言。*自然语言是**不规则**的 - 所以它不会工作！*可以使用正则表达式来识别一些关键字，但除此之外，您最好使用简单的手写规则，并根据良好的自然语言管道进行标记。

**更新**

如果您对这项任务非常认真，请查看[sharpnlp.codeplex.com](http://sharpnlp.codeplex.com/)作为起点。如果您不需要使用 C#，那么还有其他 NLP 工具包，其中[NLTK是一种流行的工具包。](http://nltk.org/)第二步，为自己准备一本关于 NLP 的介绍性书籍。主题很广，很酷。我从中学到很多的好书是：Jurafski 和 Martin 的《[语音和语言处理》。](https://rads.stackoverflow.com/amzn/click/com/0131873210)

作为最后的想法，这就是我至少要做的事情：

1.  执行规范化（删除您不需要的任何符号，并重复）
2.  尝试做基本的句子分割（在标点符号处分割`. , ; ? !`：）
3.  将所有字母转换为小写
4.  用标签替换所有数字（即）
5.  对每个标准化句子执行词性标注
6.  然后您可以继续尝试确定所有“如何做”问题在文本中的位置。
7.  获得位置后，您应该能够将它们映射回原始文本并从那里提取原始的“如何做”问题

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:12:10.157

也许这会有所帮助。它可以检测直接问题，即以问号结尾的句子。

```
@"[^\.!]*?(?!\?)" 
```

这匹配除了点、问号和感叹号之外的每个字符，直到找到问号（注意 * 量词是贪婪的，并且问号的负前瞻）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:34:23.093

我不能告诉你如何解析所有问题。这会给你一些可能的问题，你可以解析，但有些问题会被遗漏。其他不是问题的句子可能会在它们不是问题时被选中。那样可以么？

```
([^\.?!]*(?:how|what|where|when|why)[^\.?!]*[\.?!]|[^\.?!]*\?) 
```

在上面的文本上运行它并返回：

我不能告诉你**如何**解析所有问题。其他不是问题的句子可能会在它们不是问题**时被选中。**可以吗* *？**

# iphone - initWithTitle 导致执行不完整

> ID：13732498
> 
> 赞同：2
> 
> 时间：2012-12-05T21:09:31.963
> 
> 标签：iphone, ios

所以我有一个 PersonDoc.h 文件，其中包含以下代码：

```
#import <Foundation/Foundation.h>

@class PersonData;

@interface PersonDoc : NSObject

@property (strong) PersonData *data;
@property (strong) UIImage *thumbImage;

- (id)initWithTitle:(NSString*)name gift:(NSString*)gift thumbImage:(UIImage *)thumbImage; 
```

但是，我的 PersonDoc.m 文件不断给我一个警告符号，说执行不完整。这是.m代码：

```
 #import "PersonDoc.h"
 #import "PersonData.h"

 @implementation PersonDoc

 @synthesize data = _data;
 @synthesize thumbImage = _thumbImage;

- (id)initWithTitle:(NSString*)title gift:(NSString *)gift thumbImage:(UIImage    *)thumbImage fullImage:(UIImage *)fullImage {
if ((self = [super init])) {
    self.data = [[PersonData alloc] initWithTitle:title gift:gift];
    self.thumbImage = thumbImage;
}
return self;
}
@end 
```

PersonData.h 代码：#import

```
@interface PersonData : NSObject

@property (strong) NSString *name;
@property (assign) NSString *gift;

- (id)initWithTitle:(NSString*)name gift:(NSString*)gift;

@end 
```

PersonData.m 代码：

```
#import "PersonData.h"

@implementation PersonData

@synthesize name = _name;
@synthesize gift = _gift;

- (id)initWithTitle:(NSString*)name gift:(NSString*)gift {
    if ((self = [super init])) {
        self.name = name;
        self.gift = gift;
    }
return self;
}
@end 
```

在我的视图控制器中，我收到一条错误消息，提示在 PersonDoc 类型的对象上找不到属性名称和礼物。以下代码在我的 ViewController 中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:           (NSIndexPath *)indexPath
 {
// Configure the cell...
// Create the cell
UITableViewCell *cell;
cell = [tableView dequeueReusableCellWithIdentifier:@"PersonCell"];

if (!cell) {
    cell =  [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"PersonCell"];
}

PersonDoc *person = [self.people objectAtIndex:indexPath.row];
cell.textLabel.text = person.name;
cell.detailTextLabel.text = person.gift;
cell.imageView.image = person.thumbImage;

return cell;
} 
```

我知道这与我的 .h 文件中的 initWithTitle 代码有关，所以任何人都可以告诉我如何为我的 .h 和 .m 文件执行 initWithTitle 的正确方法吗？谢谢，我真的很感谢任何帮助家伙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:11:46.900

根据`initWithTitle`您发布的代码，您的标头和实现中有不同的签名。解决这个问题，你的警告应该消失

# android - 警告：在依赖项列表中找到了 android-support-v4 和 android-support-v13

> ID：13732500
> 
> 赞同：5
> 
> 时间：2012-12-05T21:09:35.413
> 
> 标签：android, android-support-library

我正在尝试导入 SliderMenu Demo，但在项目中出现以下错误。我成功导入了库，但无法导入库。

库：[https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

![在此处输入图像描述](../Images/6e2177392825f7290df176660002e6c1.png)

![在此处输入图像描述](../Images/c1b625315704becd912aafed83def1eb.png) ![在此处输入图像描述](../Images/2afbc0942e877c78855edf26dd1a1d27.png)

我也无法删除 v13 文件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T21:13:55.860

如果您的目标是较旧的设备（API 13<），那么您应该删除 v13 支持库。您收到警告是因为 v13 已包含 v4，但 v13 库的某些 API 仅适用于 API 13+。

# facebook - Facebook 移动应用安装广告：“0 人玩这个”

> ID：13732511
> 
> 赞同：0
> 
> 时间：2012-12-05T21:10:36.647
> 
> 标签：facebook, mobile, ads

我在我的应用中使用了新的移动应用安装广告，并且安装按预期计算。但是，我仍然在广告中看到“0 人玩这个”的消息。到目前为止，我只在我的应用程序被激活时才进行以下调用：

```
[FBSettings publishInstall:YOUR_APP_ID]. 
```

我是否必须向 Facebook 插入其他呼叫才能使其正常工作？

# iis-7 - IIS7 中的经典 ASP 应用程序变量

> ID：13732525
> 
> 赞同：3
> 
> 时间：2012-12-05T21:11:22.203
> 
> 标签：iis-7, asp-classic

我有一个经典的 ASP 网站，我在其中将一些信息存储在 Application 对象中。该应用程序在 IIS6 和 IIS5 中完美运行，但在 IIS 7 中无法正常运行。

在 Global.asa Application.On_start 我设置了一些变量。举个例子：

```
Application("variable1") = 1 
```

在 x.asp 页上，我以非标准方式使用变量：

```
newVariable = variable1
response.write newVariable 
```

在 IIS6 上，我看到数字 1。但在 IIS7 上，newVariable 没有任何价值。

我现在正确的形式是

```
newVariable = Applicaion("variable1")
response.write newVariable 
```

但该网站现在已有 14 年历史，拥有 500 多个页面。所以我想知道是否有办法让 IIS7 与旧的 ASP 页面更兼容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:41:48.740

不是我所知道的，但这可以通过简单的搜索来修复，并使用例如 Sublime Text 编辑器或任何其他好的最近编辑器在一个操作中替换。即使在超过 500 页中，这也不会超过几分钟。然后，您不再需要依赖 IIS 中可能停止处理任何更新或配置更改的怪癖。

# html - 如何使用 html5 在画布上创建动画绘图效果？

> ID：13732529
> 
> 赞同：-1
> 
> 时间：2012-12-05T21:11:39.043
> 
> 标签：html, canvas, drawing, stroke

我想知道如何创建一个漂亮的笔触，它会在人们绘画时吹出一些烟花并在笔触线上产生漂亮的效果，这可能吗？就像这个粒子出现在这个视频[youtube 视频中一样](http://www.youtube.com/watch?feature=player_detailpage&v=gZZaL01zQPc#t=255s)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:30:04.280

我建议你看看这个，这是一个很好的介绍。[http://www.html5canvastutorials.com/advanced/html5-canvas-animation-stage/](http://www.html5canvastutorials.com/advanced/html5-canvas-animation-stage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:18:46.450

此处：[画布：为游戏化目的创建类似游戏的爆炸星效果](https://stackoverflow.com/questions/13670654/canvas-create-a-game-like-exploding-stars-effect-for-gamification-purposes)

正如有人甚至评论的那样，只需将单击事件更改为 mousemove。

# entity-framework - 在每个单元测试之前重新创建和重新设置 LocalDb

> ID：13732532
> 
> 赞同：14
> 
> 时间：2012-12-05T21:11:53.680
> 
> 标签：entity-framework, unit-testing, ef-code-first, asp.net-web-api, localdb

我正在尝试为我的 ASP.NET Web API 项目编写单元/集成测试，并努力单独运行每个测试。请允许我解释一下。

我有一个配置了部署设置的 *.testsettings 文件。在每次测试运行之前，都会将一个空的 *.mdf 文件部署到测试位置。由于我使用的是 Entity Framework Code First，因此我可以使用数据库初始化程序将我的模式推送到数据库并为具有 2 行的特定表提供种子。这很好用。

我面临的问题是，如果我的所有 ApiControllers 动作的各种测试以错误的顺序执行，它们可能会踩到对方的脚趾。例如，如果我在 POST 测试之前运行 GET 测试，则 GET 返回 2 个对象，如果它们以相反的顺序运行，则 GET 返回 3 个对象。

我认为我需要做的是在每次测试之前删除、重新创建和重新植入我的数据库。这是一个好主意还是有更好的方法？如果这是我能做的最好的，我会在每次测试之前重置我的数据库。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-21T14:36:23.860

这就是我最终为任何感兴趣的人所做的事情。

我扩展`DropCreateDatabaseAlways<TContext>`并覆盖了 Seed 方法，用我的单元测试可以依赖的已知测试数据填充我的数据库。

```
public class MyDatabaseInitializer : System.Data.Entity.DropCreateDatabaseAlways<MyDbContext>
{
    protected override void Seed(MyDbContext context)
    {
        // Add entities to database.

        context.SaveChanges();
    }
} 
```

然后我实现了一个`[AssemblyInitialize]`设置数据库初始化程序的方法。

```
[TestClass]
public class Global
{
    [AssemblyInitialize]
    public static void AssemblyInitialize(TestContext context)
    {
        System.Data.Entity.Database.SetInitializer(new MyDatabaseInitializer());
    }
} 
```

这会设置数据库的初始化程序，但不会实际运行它。初始化程序以`[TestInitialize]`我编写的方法运行，该方法强制在每次测试之前删除、重新创建和重新植入数据库。

```
[TestClass]
public class MyTestClass
{
    [TestInitialize]
    public void TestInitialize()
    {
        MyDbContext context = new MyDbContext();
        context.Database.Initialize(true);
    }

    [TestMethod]
    public void MyUnitTest()
    {
        Assert.IsTrue(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T08:12:39.983

我建议在开始测试之前重新创建数据库，然后将每个数据库包装在始终回滚的事务中。如果您的重新创建阶段需要大量时间才能完成（例如，因为需要执行的操作等），这将非常有益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:45:19.893

在我们当前的设置中，我们在加载每个类之前重新创建数据库模式（使用 ClassInitialize 属性，但这肯定可以移动到 AssemblyInitialize），并且只是在每次测试运行之前/之后使用适当的记录播种/清理数据库（带有 TestInitialize/TestCleanup 属性）。

更多信息： http: [//msdn.microsoft.com/en-us/library/ms379625 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379625(v=vs.80).aspx)

# c# - 使用类中的列表填充列表框

> ID：13732535
> 
> 赞同：0
> 
> 时间：2012-12-05T21:12:07.797
> 
> 标签：c#, list, class, listbox

我正在尝试转换并输入列表成员。输入通过类接收，附加到字符串值，然后应添加到列表中。但是，我无法让列表正常工作。

```
 public class Deliveries
{
    private string customername;

    public string CustName
    {
        get { return customername; }
        set { customername = value; }
    }
    private string customeraddress;

    public string CustAddress
    {
        get { return customeraddress; }
        set { customeraddress = value; }
    }
    public DateTime deliverytime;

    public DateTime DelTime
    {
        get { return deliverytime; }
        set { deliverytime = value; }
    }
    public string output;
    private void ToString()
    {
        output=deliverytime.ToString() + " " + CustName + " " + CustAddress;
    }
} 
```

该列表存储在一个名为 Lists 的单独类中。

```
class Lists
{
    private List<Deliveries> deliveries = new List<Deliveries>();

    public void addDelivery(Deliveries del)
    {
        deliveries.Add(del);
    }

    public List<String> listDeliveries()
    {

        List<String> listDeliveries = new List<string>();

        foreach (Deliveries del in deliveries)
        {
            String delAsString = del.ToString();
            listDeliveries.Add(delAsString);
        }
        return listDeliveries;
    }

    public Deliveries getDelivery(int index)
    {

        int count = 0;
        foreach (Deliveries del in deliveries)
        {
            if (index == count)
                return del;
            count++;
        }
        return null;
    } 
```

最后，应该将其添加到列表框中的代码，存储在表单加载中

```
 listBox1.Items.Clear();
        List<String> delList = ListOut.listDeliveries();
        listBox1.Items.AddRange(delList.ToArray()); 
```

目前，它没有添加任何东西。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:29:29.883

列表框自动显示每个对象通过该`ToString`方法返回的字符串。所以在你的类中重写这个方法`Deliveries`并删除你的实现`ToString`。

```
public override string ToString()
{
    return String.Format("{0} {1} {2}", deliverytime, CustName, CustAddress);
} 
```

现在您可以将交货直接添加到列表框中，而无需先将它们转换为字符串列表。

* * *

您可以通过其索引访问列表中的交付，并且不需要循环

```
public Deliveries getDelivery(int index)
{
    if (index < 0 || index >= deliveries.Count) {
        return null;
    }
    return deliveries[index];
} 
```

* * *

使用调试器来解决您的问题。`listDeliveries`通过单击该行左侧的灰色边框，在方法主体的第一个代码行上设置断点。将出现一个棕色点，代码将在此行暂停。通过将鼠标指针悬停在`deliveries`变量上，您将能够检查其内容。

# javascript - 历史回溯强制刷新

> ID：13732540
> 
> 赞同：3
> 
> 时间：2012-12-05T21:12:23.497
> 
> 标签：javascript, html, coldfusion

我有一个应用程序，当用户在仪表板中登录（存在 cookie）时，他可以注销。当他这样做时，他可以点击浏览器上的历史按钮，这会将他从缓存中带回仪表板。

如果有任何其他方法，则 javascript cookie 检查（在注销后已被删除，并且当 cookie 不存在时将强制 document.location = '/'）强制重新加载此页面，因此它将自动被拾取通过我的服务器端身份验证检查？

干杯，

马蒂斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:58:50.423

这是我公司用来使页面缓存过期的方法：

```
`<cfheader name="Expires" value="#GetHttpTimeString(Now())#">
<cfheader name="Pragma" value="no-cache">
<cfheader name="cache-control" value="no-cache, no-store, must-revalidate ">`
```

* * *

 `## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:21:41.910

设置标题以使页面缓存过期？这两个标题应该可以解决问题。

```
Cache-Control: no-cache, must-revalidate

Expires: Thu, 29 Jul 2000 05:00:00 GMT // Any date in the past would do 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T21:25:43.473

也许这不是您期望的答案，但您可以设置无限循环（例如，间隔 10 秒），您可以在其中向您的服务器发送 AJAX 请求，该服务器知道 cookie 的真实状态。`

# function - 列表的功能未定义

> ID：13732543
> 
> 赞同：1
> 
> 时间：2012-12-05T21:12:26.837
> 
> 标签：function, undefined, clisp

我在使用 clisp 时遇到问题。我试图获取列表中数字的总和，但它给了我这个错误：

```
 EVAL-the function L is undefined 
```

当我打电话时

```
(sum '(2 (c 6))) 
```

这是代码：

```
(defun sum(l)
        (cond
           ((null l) 0)
           ((NUMBERP (car l)) (+ (car l) (sum(cdr l)) ))
            (t (sum(cdr(l))))
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:16:19.413

`(cdr(l))`调用函数`l`并应用于`cdr`它返回的值。

你应该改写`(cdr l)`：

```
(t (sum (cdr l)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:15:01.867

```
(defun sum (x) (if (null x) 0 
                    (if (numberp x) x 
                         (+ (car x) (sum (cdr x)))))) 
```

顺便说一句，你可以对产品做类似的事情

```
(defun prod (x) (if (null x) 1 
                    (if (numberp x) x 
                         (* (car x) (prod (cdr x))))))

(eq (prod '(1 2 3 4 5 6 7 8 9 10)) (fact 10)) 
```

但首先定义事实 - 在这里你是事实的定义（通常的......）

```
(defun fact (n)
     (if (not (integerp n)) (print "give me an integer" )          
        (if (< n 0) (print "give me a pos num " )          
         (if (= n 0) 1    
             (if (= n 1) 1 
                 (* n (fact (- n 1)
))))))) 
```

# java - SWT 方法 - 从表格查看器中获取值 / Swing 方法 - 使用值

> ID：13732544
> 
> 赞同：0
> 
> 时间：2012-12-05T21:12:31.753
> 
> 标签：java, swing, swt

我的 SWT 类中有一个方法可以从我的表中获取选定的值。该值实际上是对象的文件名。

```
 public String getPDFFileName() { 
    int row = viewer.getTable().getSelectionIndex();
    if (row != -1) {
       return pdfFileName = AplotSaveDataModel.getInstance().getSelectedPDFFileName(row);
    }
    else {
       MessageDialog.openError(null, "PDF Selection Error Message", "You need to select a PDF to view.");
    }
    return null;
  } 
```

我在同一类中有一个复合材料，它桥接了 SWT 和 Swing。此方法采用字符串文件名并创建一个显示文件的 Swing 查看器。

```
 protected Control createPDFButtons(Composite parent) {
  final Composite swtAwtComponent = new Composite(parent, SWT.EMBEDDED);
  GridData mainLayoutData = new GridData(SWT.FILL, SWT.CENTER, true, false); 
  mainLayoutData.horizontalSpan = 1; 
  swtAwtComponent.setLayoutData(mainLayoutData); 
  GridLayout mainLayout = new GridLayout(1, false); 
  mainLayout.marginWidth = 0; 
  mainLayout.marginHeight = 0; 
  swtAwtComponent.setLayout(mainLayout); 
  final Frame frame = SWT_AWT.new_Frame(swtAwtComponent);
  final JPanel panel = new JPanel();
  panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS)); 

  JButton viewerButton = new JButton("View Selected PDF");
  viewerButton.addActionListener(new ActionListener(){
     public void actionPerformed(ActionEvent actionevent) {

        final File viewerFile = new File(getPDFFileName());
        final AplotPdfViewer pdfv = new AplotPdfViewer(true);
        try {
           pdfv.openFile(viewerFile);
        }
        catch (IOException e) {
           e.printStackTrace();
        }

     }
  });

  panel.add(viewerButton);
  frame.add(panel);
  return swtAwtComponent;
} 
```

如果我尝试在组合中运行 getPDFFileName()，则会收到 SWT 线程错误。我明白这是从哪里来的。

我不确定如何从 getPDFFileName() 获取值并在最终文件 viewerFile = new File("NEED FILENAME OF SELECTION"); 中使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:28:47.700

当您尝试访问小部件（在您的情况下为 ）时，您需要成为 UI 线程`Table`。您可以使用[`Display.syncExec`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FDisplay.html)

```
 JButton viewerButton = new JButton("View Selected PDF");
  viewerButton.addActionListener(new ActionListener(){
     public void actionPerformed(ActionEvent actionevent) {
        // Retrieve the pdf file name in the UI thread
        final String[] filename = new String[1];
        Display.getCurrent().syncExec(new Runnable() { 
            public void run() {
                filename[0] = getPDFFileName();
            }
        }

        final File viewerFile = new File(filename[0]);
        final AplotPdfViewer pdfv = new AplotPdfViewer(true);
        try {
           pdfv.openFile(viewerFile);
        }
        catch (IOException e) {
           e.printStackTrace();
        }    
     }
  }); 
```

如果需要多次调用，请考虑将调用`syncExec`直接放入方法中。`getPDFFileName`String 结果保存在数组中，因为您无法使用`syncExec`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:48:20.270

我建议您`TableViewer`通过添加来保持对选择的引用`SelectionChangeListener`。

当用户从 中选择输入时`TableViewer`，您会在选择侦听器中获得事件并将所选文件名分配给变量。

在 Swing 代码中，使用此（变量）文件名打开 Pdf 视图。我不建议将您的 Swing 代码与 Display.async 或同步执行 CALLS 混淆。

# java - logstash 运行错误

> ID：13732545
> 
> 赞同：0
> 
> 时间：2012-12-05T21:12:33.093
> 
> 标签：java, linux, logstash

有人知道什么是错误吗？

```
 #/usr/java/jre1.7.0/bin/java -cp /home/spatel/logstash logstash.runner agent -f logstash-syslog.conf
    Grok::PatternError: pattern %{IPORHOST:device} not defined
              compile at /home/spatel/logstash/gems/jls-grok-0.10.7/lib/grok-pure.rb:131
                 loop at org/jruby/RubyKernel.java:1410
              compile at /home/spatel/logstash/gems/jls-grok-0.10.7/lib/grok-pure.rb:91
              compile at /home/spatel/logstash/gems/jls-grok-0.10.7/lib/grok/pure/pile.rb:51
             register at /home/spatel/logstash/logstash/filters/grok.rb:142
                 each at org/jruby/RubyArray.java:1615
             register at /home/spatel/logstash/logstash/filters/grok.rb:140
                 each at org/jruby/RubyHash.java:1186
             register at /home/spatel/logstash/logstash/filters/grok.rb:126
      run_with_config at /home/spatel/logstash/logstash/agent.rb:415
      run_with_config at /home/spatel/logstash/logstash/agent.rb:414
                 each at org/jruby/RubyArray.java:1615
      run_with_config at /home/spatel/logstash/logstash/agent.rb:412
      run_with_config at /home/spatel/logstash/logstash/agent.rb:369
                  run at /home/spatel/logstash/logstash/agent.rb:318
    Exception in thread "LogStash::Runner" org.jruby.exceptions.RaiseException: (SystemExit) pattern %{IPORHOST:device} not defined
            at org.jruby.RubyIO.write(org/jruby/RubyIO.java:1361)
            at org.jruby.RubyIO.write(org/jruby/RubyIO.java:2342)
            at org.jruby.RubyIO.puts(org/jruby/RubyIO.java:2297)
            at org.jruby.RubyIO.puts(org/jruby/RubyIO.java:2289)
            at logstash.runner.main(logstash/runner.rb:42)
            at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1615)
            at logstash.runner.main(logstash/runner.rb:41)
            at logstash.runner.(root)(logstash/runner.rb:120) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:38:57.187

当 Logstash 在其任何模式文件中找不到该模式时，您会收到该错误。
最简单的解决方法是为您的过滤器使用`patterns_dir`指令。`logstash-syslog.conf`

# c++ - 如何处理二维数组

> ID：13732546
> 
> 赞同：1
> 
> 时间：2012-12-05T21:12:33.427
> 
> 标签：c++

```
 void printMatrix(int matrix[][], int edge)
{
    int i,j;
    for (i=0; i<edge; ++i) {
        for (j=0; j<edge; ++j) {
        std:cout<<matrix[i][j]<<" ";
        }
        std::cout<<std::endl;
    }
} 
```

如果我在java中这样做似乎很好，但在c ++中，它表示指向不完整类型'int []'的指针的下标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:28:24.050

当你将一个多维数组传递给一个函数时，你必须填写它的所有维度，除了第一个。那就是`arr[][X], arr[][X][Y], ...`。

编译器知道如何根据维度对数组位置进行数学运算。例如，`arr[][5]`表示每行包含 5 个元素，因此`arr[2][0]`从一开始就取 10 个元素。所以第一个维度不是必需的，但所有其他维度都是必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:37:44.303

使用一维数组，如 ls. 并自行计算尺寸

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T21:14:51.663

您根本不应该使用原始数组。`std::array`好多了。如果您希望大小不属于类型，则应使用`std::vector`. 在某些情况下，您可能需要使用原始数组或原始指针，但这不是您作为初学者应该担心的事情。

这是一个如何做事的例子（假设支持 C++11）。这也使用了 const 正确性和新的 foreach 功能。我不记得确切的语法，但它应该看起来像这样。

```
void printMatrix(const std::vector<std::vector<int>> matrix)
{
    for(const auto& row : matrix){
        for(int x : row){
            std::cout << x << " ";
        }

        std::cout<<std::endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:21:25.137

C++ 不传递数组的大小或维数，它只传递数组的起始地址（即指针）。您可以通过使用带有引用的模板函数来解决此问题。这样矩阵的大小在编译时是已知的。

```
template<int X, int Y>
void printMatrix(int (&matrix)[X][Y], int edge)
{
    int i,j;
    for (i=0; i<edge; ++i) {
        for (j=0; j<edge; ++j) {
        std:cout<<matrix[i][j]<<" ";
        }
        std::cout<<std::endl;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T21:25:03.750

如果你有一个方阵，你可以这样做：

```
void printMatrix(int matrix[], int edge)
{
    int i,j;
    for (j=0; j<edge; ++j) {
        for (i=0; i<edge; ++i) {
            std:cout << matrix[j*edge + i] << " ";
        }
        std::cout << std::endl;
    }
} 
```

本质上，在一维数组中一个接一个地存储行（或列，由您决定）。请注意，*内部*循环迭代`j`- 这样循环访问内存中的连续单元。

然后，您的其余代码应使用相同的约定。

但是，如果您为添加到代码中的每个类、模板、设计模式等都获得报酬（或给予积分），那么这种方法并不是最好的。

# css - 推特引导程序中的缩小尺寸？

> ID：13732548
> 
> 赞同：4
> 
> 时间：2012-12-05T21:13:00.883
> 
> 标签：css, twitter-bootstrap, less

当（在我的浏览器中）我缩小了两次时，我喜欢使用 twitter bootstrap 的所有项目的大小，ctrl -，ctrl -，而不是默认值，使用 ctrl+0 查看。

缩放会影响字体大小、响应式设计以及我想使用引导程序的其他十几个重要原因，所以我不想粗暴地修复宽度并破坏所有这些。

Bootstrap 是否有一个 CSS 值（或其中的一小部分），我可以在某个地方进行更改以产生类似缩放和调整大小的东西？我意识到设置缩放本身更多的是浏览器问题，所以我也不想那样硬编码。

编辑

答案可能更接近于这个：

[使用 Bootstrap 设置身体的最大宽度](https://stackoverflow.com/questions/9730263/setting-max-width-for-body-using-bootstrap)

...这表明不？我必须重新编译引导程序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-30T15:21:47.630

使用 CSS，您可以：

```
body {
    zoom: 75%;
} 
```

见： [http ://dev.w3.org/csswg/css-device-adapt/#the-lsquozoomrsquo-descriptor](http://dev.w3.org/csswg/css-device-adapt/#the-lsquozoomrsquo-descriptor)

以及[CSS 中的“缩放”有什么作用？](https://stackoverflow.com/questions/10278783/what-does-zoom-do-in-css)

Firefox 目前似乎不支持缩放（截至 2013 年 8 月）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:45:31.563

您的问题的答案是肯定的 - 至少对于字体并且如果您对 CSS 进行了适当的编码。请参阅我对非字体的答案的后半部分，这要复杂得多。

可以控制所有字体大小的单行 CSS 是：

```
body {
  font-size: small;
} 
```

许多设计师会使用像素大小来编码 css，因为他们喜欢严格的控制。然而，这有一个问题——Internet Explorer（直到 IE9）在使用像素单位时不允许覆盖文本大小。调整文本大小的能力对于视力不佳的人来说是*必不可少*的（即任何 40 多岁以上的人由于老花眼 - 大部分人口 - 想想婴儿潮一代）。

CSS 支持绝对尺寸关键字（如 T 恤尺寸）：

*   xx-小
*   x-小
*   小的
*   中等的
*   大的
*   x-大
*   xx-大

每个尺寸之间的比例因子约为 1.5。*small*关键字通常约为 12 像素，但浏览器之间存在一些差异。

一旦定义了基本尺寸（通常是“小”），就可以使用百分比来定义整个布局所需的相对基本尺寸。例如，如果您希望 H1 元素更大一点，那么您只需执行以下操作：

```
h1 {
  font-size: 150%;
} 
```

因此，任何元素都可以分配一个百分比，您可以使其大于或小于您为 body 设置的基数。不太难，根据您的问题，可以通过单个 CSS 值调整整个文档的字体大小。

还有一些坏消息和好消息。

坏消息是嵌套元素从它们的父容器继承它们的大小。因此，如果我们将#container 设置为基本大小的 95%，然后我们在该容器中有一个 H1 元素，该元素设置为 150% - 那么 H1 实际上将是 95% 的 150%（即 1.5 x 0.95 = 1.425 所以 142.5% 不是 150%）。如果您有许多不同大小的嵌套，这可能会很棘手。

好消息是 rems（'root em's）是可用的，使用 rems 意味着文本大小总是*相*对于基本（根）字体大小进行调整 - 因此，如果您使用 rems 来定义大小，则不需要更多的数学运算。

至于非字体，这是一个很好的问题。如果您希望非字体元素适当地增长/调整大小，我建议您可能必须在 CSS 中使用百分比定义而不是像素定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T03:25:38.720

答案是否定的，在引导设置中没有单一、简单的方法可以做到这一点，即使从 LESS 重新编译在桌面上也是如此。

问题的症结在于引导响应式设计适用于大型 1200 像素显示器。这使得 1000 像素笔记本电脑的显示屏看起来非常放大。

直接编辑较少的文件，我减少了字体大小，减少了 1200 的宽度和字体大小。

*   变量.less
*   无媒体
*   布局.less
*   响应式 1200-min.less

它似乎只是打破了导航栏。我从引导 github 的理解是，硬编码的数量比变量所暗示的少得多，这也是问题的主要原因。

# android - ViewPagerIndicator - 如何在片段之间切换

> ID：13732552
> 
> 赞同：0
> 
> 时间：2012-12-05T21:13:12.393
> 
> 标签：android, android-fragments, viewpagerindicator

我想在我的应用程序中使用 JakeWharton 库。我对示例中的示例 SampleTabsDefault 很感兴趣：![在此处输入图像描述](../Images/a867f63c8c08fcc826631155dc0adf98.png) 现在，我被卡住了。在这个示例中只更改文本，我想更改片段（每个片段都有自己的布局，每个布局都有不同的控件，如按钮、复选框等）我想我必须在从 FragmentPagerAdapter 扩展的类中更改此方法：

```
public Fragment getItem(int position) {
            return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
        } 
```

我想根据特定位置创建新片段（具有自己的布局）。

我已经实现了这段代码：

```
public class MainActivity extends FragmentActivity {
    private static final String[] CONTENT = new String[] {"My Profile", "Statistics"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        FragmentPagerAdapter adapter = new GoogleMusicAdapter(getSupportFragmentManager());

        ViewPager pager = (ViewPager)findViewById(R.id.pager);
        pager.setAdapter(adapter);

        TabPageIndicator indicator = (TabPageIndicator)findViewById(R.id.indicator);
        indicator.setViewPager(pager);

        }

    class GoogleMusicAdapter extends FragmentPagerAdapter {
        public GoogleMusicAdapter(FragmentManager fm) {
            super(fm);
        }

        public Fragment getItem(int position) {
            if (position==0)
            return MyProfile.newInstance(CONTENT[position % CONTENT.length]);
            else if (position==1)
            return Statistics.newInstance(CONTENT[position % CONTENT.length]);
            return null;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return CONTENT[position % CONTENT.length].toUpperCase();
        }

        @Override
        public int getCount() {
          return CONTENT.length;
        }
    }
} 
```

和

```
public class MyProfile extends Fragment {
      private static final String KEY_CONTENT = "TestFragment:Content";

        public static MyProfile newInstance(String content) {
            MyProfile fragment = new MyProfile();

            fragment.mContent = content;

            return fragment;
        }

        private String mContent = "???";

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {
                mContent = savedInstanceState.getString(KEY_CONTENT);
            }

        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.fragment_basic, container, false);
            Button button = (Button) view.findViewById(R.id.fragment_button);

            button.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    Activity activity = getActivity();

                    if (activity != null) {
                        Toast.makeText(activity, "fragmen1", Toast.LENGTH_SHORT).show();
                    }
                }

            });

            return view;
        }
           public void onSaveInstanceState(Bundle outState) {
                super.onSaveInstanceState(outState);
                outState.putString(KEY_CONTENT, mContent);
            }
} 
```

还有这个：

```
public class Statistics extends Fragment {
      private static final String KEY_CONTENT = "TestFragment:Content";

        public static Statistics newInstance(String content) {
            Statistics fragment = new Statistics();

            fragment.mContent = content;

            return fragment;
        }

        private String mContent = "???";

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {
                mContent = savedInstanceState.getString(KEY_CONTENT);
            }

        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.fragment_basic2, container, false);
            Button button = (Button) view.findViewById(R.id.fragment_button);

            button.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    Activity activity = getActivity();

                    if (activity != null) {
                        Toast.makeText(activity, "fragmen2", Toast.LENGTH_SHORT).show();
                    }
                }

            });

            return view;
        }

           @Override
            public void onSaveInstanceState(Bundle outState) {
                super.onSaveInstanceState(outState);
                outState.putString(KEY_CONTENT, mContent);
            }
} 
```

它不起作用...我无法切换页面，并且我的片段布局不显示...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:20:44.773

在您的`getItem()`方法中，您`FragmentPagerAdapter`可以根据位置返回其他片段。例如：

```
 public Fragment getItem(int position) {
 switch(position)
       {
               case 0:
                    TestFragment fragment = new TestFragment();  
                    return fragment;

                case 1:
                    TestFragment2 fragment2 = new TestFragment2();  
                    return fragment2;

         }

                    DefaultFragment fragment3 = new DefaultFragment();  
                    return fragment3;

         } 
```

# r - 仅使用基数 R 按类型条件对第三个变量进行计数

> ID：13732553
> 
> 赞同：1
> 
> 时间：2012-12-05T21:13:15.097
> 
> 标签：r, dataframe, counter, base

我有一些事件我试图根据发生的顺序在我的数据中枚举，但条件是另一个变量（在这种情况下`Date`）没有丢失。我有点卡住了。我的问题是我只需要使用 base-R 来完成它。

这是一个工作示例：

```
df <-
structure(list(Date = c("Sep 02 2012", "Sep 10 2012", "Sep 22 2012", 
"Sep 23 2012", "Sep 23 2012", "Sep 23 2012", "Sep 24 2012", "Sep 24 2012", 
"Sep 24 2012", "Dec 01 2012", "Sep 09 2014", NA), Event = c("005", 
"006", "002", "003", "004", "007", "008", "010", "011", "012", 
"009", "001"), Type = c("IND", "IND", "CON", "OUT", "OUT", "IND", 
"CMA", "ASH", "CON", "ASH", "CMA", "IND")), .Names = c("Date", 
"Event", "Type"), class = "data.frame", row.names = c(13L, 14L, 
10L, 11L, 12L, 15L, 16L, 18L, 19L, 20L, 17L, 9L)) 
```

给我这个数据框，

```
df
          Date Event Type
13 Sep 02 2012   005  IND
14 Sep 10 2012   006  IND
10 Sep 22 2012   002  CON
11 Sep 23 2012   003  OUT
12 Sep 23 2012   004  OUT
15 Sep 23 2012   007  IND
16 Sep 24 2012   008  CMA
18 Sep 24 2012   010  ASH
19 Sep 24 2012   011  CON
20 Dec 01 2012   012  ASH
17 Sep 09 2014   009  CMA
9         <NA>   001  IND 
```

我想得到什么，

```
new.df

       Date    Event Type Num_Type
13 Sep 02 2012   005  IND       1
14 Sep 10 2012   006  IND       2
10 Sep 22 2012   002  CON       1
11 Sep 23 2012   003  OUT       1
12 Sep 23 2012   004  OUT       2
15 Sep 23 2012   007  IND       3
16 Sep 24 2012   008  CMA       1
18 Sep 24 2012   010  ASH       1
19 Sep 24 2012   011  CON       1
20 Dec 01 2012   012  ASH       2
17 Sep 09 2014   009  CMA       2
9         <NA>   001  IND      NA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:25:23.083

你可以用`ave`and做到这一点`cumsum`：

```
df$Num_Type <- 1
df$Num_Type <- ave(df$Num_Type, df$Type, FUN=cumsum)
is.na(df$Num_Type) <- which(is.na(df$Date)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:18:52.280

你可以先订购`df`你想要的变量吗？像：

```
df <- df[order(df$Event, df$Type),] 
```

然后...

```
df$Num_Type  <- sequence(rle(as.character(df$Type))$lengths) 
```

# java - Java 可序列化失败

> ID：13732562
> 
> 赞同：0
> 
> 时间：2012-12-05T21:13:59.833
> 
> 标签：java, android, serializable

我有一个名为 Expression 的类，我尝试使用以下 load()/save() 函数进行序列化。在对我的代码和 Expression 类进行了一些更改后，它曾经工作正常，调用`in.readObject()`throws `ClassCastException`。错误消息是： *java.lang.ClassCastException: java.lang.String cannot be cast to java.io.ObjectStreamClass*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:16:54.643

似乎可序列化不喜欢类成员字段中的 NULL 值。如果我确保所有班级成员都有实际记忆，它不会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:18:55.433

对我来说，将二进制数据存储为字符串感觉非常糟糕。尝试使用更稳定的方式来存储 ObjectOutputStream 的二进制输出。如果您真的想坚持使用字符串格式的方法，请尝试使用 Base64 编码，这始终是安全的。

* * *

我可能认为的问题是您自己将 serialUID 定义为静态常量：

```
private static final long serialVersionUID = 3L; 
```

此 UID 用于确定类路径中的类是否与输入对象的类兼容。所以我怀疑你修改了类而不改变serialVersionUID。这使得 ObjectInputStream 认为这是兼容的，但您仍在使用旧数据。尝试摆脱旧数据，然后重新`save()`调用。

* * *

你确定这`Input`也是可序列化的吗？该类的 UID 没有损坏？

# java - Echo Web 框架及其类似物

> ID：13732564
> 
> 赞同：1
> 
> 时间：2012-12-05T21:14:18.727
> 
> 标签：java, web

有这个 Java Web 应用程序框架[Echo](http://echo.nextapp.com/site/)，它与任何 MVC 框架甚至 MVC 方法都非常不同。与 GWT 不同，它仍然是构建服务器应用程序的框架。

首先，我想知道是否有像 Echo 这样的框架的名称（例如，我将 Spring 称为 MVC 框架，但我不知道如何称呼 Echo）。

其次，我想知道是否还有其他采用相同方法的替代方案。无论它们是否基于 Java。我想不出任何可以帮助我找到这些的搜索查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:44:16.493

Echo 仍然是一个 MVC 框架（它使用 Swing 对象模型，而 Swing 绝对是 MVC）。Web 框架分为基于动作和基于组件的品种，其中 Spring MVC 是基于动作的，而 Echo、Tapestry、Wicket 和 JSF 是基于组件的。

基于动作的框架强调响应 url 的控制器。用户实现在请求 url 时由框架调用的控制器。该应用程序直接处理 url、http 请求和响应以及 http 会话。

基于组件的框架为页面、小部件和事件引入了抽象，因此用户创建组件并编写事件侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:31:53.370

与 MVC 相比，Echo 看起来是一个基于组件的框架。[Apache Wicket](http://wicket.apache.org/)是一个典型的基于组件的框架。另一个著名的面向组件的框架是[Apache Tapestry](http://tapestry.apache.org/)

# node.js - 无法让 find(...).count(...) 计算我的物品

> ID：13732565
> 
> 赞同：0
> 
> 时间：2012-12-05T21:14:19.730
> 
> 标签：node.js, mongodb

为什么以下计数调用不起作用？我知道集合中有一个“我的测试列表”，但计数始终为 0。我的集成测试验证的这一部分，名称在我的数据库中是唯一的。

```
db.collection('lists', function(err, collection) {
 collection.find({name: "My testlist"}).count(function(err, count) {
  console.log("err: " + err + ", count: " + count)
  assert.equal(1, count)
 })
}) 
```

我在 NodeJS 中使用 mongodb 本机驱动程序。

# svn - Subversion / Cornerstone - 如何升级工作副本

> ID：13732567
> 
> 赞同：1
> 
> 时间：2012-12-05T21:14:30.910
> 
> 标签：svn, upgrade, working-copy, cornerstone

我一直在 Mac 上使用 Cornerstone 客户端来更新项目而没有问题，直到昨天没有警告我开始收到以下错误消息：

```
"Working copy '/Users/Si/Documents/workspace/CCA_NewAPI/src/com' is too old (format 10,     created by Subversion 1.6)" 
```

我现在无法对工作副本提交或做任何其他事情。我将 Cornerstone 更新到最新版本，但这根本没有帮助。

一些研究告诉我使用终端导航到工作副本目录并运行'svn upgrade'，但我收到以下结果：

```
Unknown command: 'upgrade'
Type 'svn help' for usage. 
```

任何有关如何升级工作副本的帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T19:35:21.087

您可以升级 Cornerstone 中的措辞副本。在左侧选择您的工作副本，然后转到顶部的工作副本菜单。选择“升级工作副本”，然后选择要升级到的版本。在您的情况下，您似乎应该升级到 1.7。

来源：[基石帮助](http://www.zennaware.com/cornerstone/helpbook/pages/getting-started/add-working-copy.html)

# c# - Foreach 变量错误

> ID：13732574
> 
> 赞同：0
> 
> 时间：2012-12-05T21:15:02.910
> 
> 标签：c#

我显然只是错过了一些东西。我有以下内容：

```
 List<string> stringList = new List<string>(); 
```

然后我用一些数据填充它并执行以下操作：

```
 foreach (List<string> results in stringList) 
```

但它错误地声称它“无法从类型转换`string`为类型`System.Generic.Collections.List<string>`”......但两者都是类型`List<string>`，那么断开连接在哪里？我确信一定有一些非常简单的事情我显然做错了，但对于我的生活我找不到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T21:16:26.640

你`foreach`应该是：

`foreach(string s in stringList)`.

在您的代码中，您正在检查 中的字符串列表`stringList`，而不是列表中的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T21:16:38.027

for-each 迭代一次为您提供一个项目，因此类型应该是`string`，而不是`List<string>`：

```
foreach (string result in stringList) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T21:16:57.683

在 C# 中使用`foreach`循环时，您正在遍历集合类型并使用该集合中的单个值重复执行操作。因此，对于通用集合类型，您需要`foreach`循环中的单个项目类型。

```
List<string> stringList = new List<string>();
foreach (string stringItem in stringList)
{
    // do something
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T21:17:12.240

当您`foreach`遍历列表时，您正在枚举列表中的元素。 `stringList`包含字符串，因此您需要执行以下操作：

```
foreach (string s in stringList) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-05T21:20:45.297

stringList 的类型是`List<string>`.

这意味着您的列表 stringList 的每个元素都将是一个`string`. 因此，当您执行 a 时`foreach (element in stringList)`，元素应为 a `string`。

解决问题的最推荐方法是将`List<string>`foreach 内部替换为`var`. 如果您总是`var`在`foreach`语句中使用，它会自动考虑正确的类型（在这种情况下会`string`代替`List<string>`），因此您不必担心找出您的元素是什么类型。

# vb.net - 如何隐藏表格

> ID：13732576
> 
> 赞同：1
> 
> 时间：2012-12-05T21:15:12.943
> 
> 标签：vb.net

有没有办法隐藏 vb.net 中的主窗体？我想让它让用户按下一个按钮，表单就会消失。就像让它这样程序仍在运行但没有打开窗口。我试过了

```
 Me.Hide() 
```

但它不起作用。有可能做我所描述的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:15:59.287

这取决于你的主要形式是什么，但试试这个：

```
MainForm.Visible = False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:22:55.887

您可以使用 隐藏表单`<form>.Hide()`，但让用户选择隐藏或不隐藏该表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:19:52.407

你问的是让一个进程在后台运行吗？还是您在考虑隐藏方法？您可以使用 Form.Hide 隐藏表单。您可以查看此链接以了解如何让程序在后台运行。

[http://www.dreamincode.net/forums/topic/59527-make-a-program-to-run-in-the-background/](http://www.dreamincode.net/forums/topic/59527-make-a-program-to-run-in-the-background/)

# java - 将字符串转换为日期以计算差异

> ID：13732577
> 
> 赞同：0
> 
> 时间：2012-12-05T21:15:18.073
> 
> 标签：java, string, date

我有 2 个字符串格式的日期（例如 2012-04-23、2012-03-08），我想找出它们之间的区别。

在 Java 中计算它的最佳方法是什么？

我只关心日期而不是时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:18:23.190

您可以使用以下方法将字符串转换为日期：

```
String dateString = "2012-04-23";
Date date = new SimpleDateFormat("yyyy-mm-dd").parse(dateString); 
```

[您可以在此处](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)进一步了解 SimpleDateFormat 。

* * *

至于两个日期之间的差异，您可以使用以下方法以毫秒为单位进行计算：

```
int milliseconds = dateOne.getTime() - dateTwo.getTime(); 
```

`getTime()`返回自 1970 年 1 月 1 日以来的毫秒数。

要在几天内转换它，请使用：

```
int days = milliseconds / (1000 * 60 * 60 * 24) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:25:10.573

如果您愿意将第三方 jar 添加到您的项目中，请查看[jodatime](http://joda-time.sourceforge.net/)

*   将字符串转换为日期 - [`DateTimeFormat`](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)

> DateTimeFormatter 格式化程序 = DateTimeFormat.forPattern("dd/MM/yyyy HH:mm:ss");
> 
> DateTime dt = formatter.parseDateTime(your-string);

*   找出它们之间的区别——[`interval`](http://joda-time.sourceforge.net/key_interval.html)

> 间隔区间 = new Interval(time1, time2);

您可能还想检查间隔和持续时间之间的区别，它们是 jodatime lib 中的概念

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T21:17:56.450

使用 SimpleDateFormat 将字符串转换为 Date 对象，并使用 Date 上的 getTime() 方法获取以毫秒为单位的等效时间。取两个毫秒值之间的差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:28:39.227

您可能希望 DateFormat、Date 和 Calendar 组合如下：

```
 DateFormat dFormat = new SimpleDateFormat("yyyy-MM-dd");
    Date date1 = dFormat.parse("2012-04-23");
    Date date2 = dFormat.parse("2012-03-08");
    long timeDifInMillis = date1.getTime() - date2.getTime();

    Date dateDiff = new Date(timeDifInMillis);
    Calendar diffCal = Calendar.getInstance();
    diffCal.setTime(dateDiff);
    System.out.println("Days="+diffCal.get(Calendar.DAY_OF_MONTH));
    System.out.println("Months="+diffCal.get(Calendar.MONTH));
    System.out.println("Years="+(diffCal.get(Calendar.YEAR)-1970)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T21:20:49.567

检查[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)，它具有解析功能。

# ruby - 替换 Ruby 字符串

> ID：13732578
> 
> 赞同：0
> 
> 时间：2012-12-05T21:15:24.737
> 
> 标签：ruby, string-substitution

因此，如果这`"%05d" % 123`返回`#=> "00123"`，我也希望`"%05d" % 0123`返回`#=> "00123"`，但它会返回`#=> "00083"`。为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T21:17:00.427

以 0 开头的数字被解释为八进制，就像以 0x 开头的数字被解释为十六进制一样。83 用八进制表示为 123。

```
irb(main):001:0> 0123
=> 83
irb(main):002:0> 1*8**2 + 2*8**1 + 3*8**0
=> 83
irb(main):003:0> "%05d" % 0x7b
=> "00123" 
```

# c++ - 尝试播放 OpenCv 帧时挂起

> ID：13732579
> 
> 赞同：0
> 
> 时间：2012-12-05T21:15:28.963
> 
> 标签：c++, opencv

我正在尝试编写一个传输视频然后播放它的应用程序。但一开始我试图打开视频并播放它，但我遇到了麻烦。这是我的代码：

```
VideoPlayer::Play()
{
CvCapture *capture = cvCreateFileCapture(m_FileName.c_str());
    IplImage* frame = cvQueryFrame(capture);

    int frame_number = 0;

     cvNamedWindow("stream_server", CV_WINDOW_AUTOSIZE);

    while (true)
    {
        if (!frame)
        {
            std::cout << "Failed\n";
            break;
        }

        cvShowImage("stream_server", frame);

        ++frame_number;
        frame = cvQueryFrame(capture);

    }

    cvReleaseCapture(&capture);
} 
```

事情是 - 当我运行这个程序时，我看到 videoWindows 出现但它显示灰色屏幕并挂起沙钟。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:24:26.830

您需要调用`waitKey`才能更新窗口。如果用户按下字母“c”，这将停止：

```
int c = waitKey(10);
if( (char)c == 'c' ) { break; } 
```

# c# - 单击按钮后如何循环？

> ID：13732580
> 
> 赞同：-1
> 
> 时间：2012-12-05T21:15:29.243
> 
> 标签：c#, winforms, loops

我现在正在创建一个程序，它将有 10 个按钮供用户单击：1 - 10。程序会告诉他们它是否可以被 2 整除。

我不完全确定我需要怎么做，因为我才开始在 Windows 窗体中编程。这可能真的很简单，但我就是无法理解它！

我希望能够读取单击的按钮...通过循环传递...然后告诉用户他们单击的数字是否可被二整除。

我有所有的代码来完成这项工作，但这只是单击按钮时的一部分，我无法获得要通过循环传递的数字来测试它。我可以复制出每个事件字段下的所有测试代码，但有人告诉我我只需要复制一次。这将意味着我的代码会更加整洁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:22:05.160

关于什么：

```
//in the form constructor
button1.Click += new EventHandler(button_Click);
button2.Click += new EventHandler(button_Click);
button3.Click += new EventHandler(button_Click);
//and so on 
```

那么方法可能是这样的：

```
private void button_Click(object sender, EventArgs e){
   string n = ((Button)sender).Text;
   int number;
   if(int.TryParse(n, out number)){
      if(number % 2 == 0)
         MessageBox.Show(n + "  is divisible by 2");
      else 
         MessageBox.Show(n + "  isn't divisible by 2");
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:24:44.890

你可以：

```
 void button1_onClick(object sender, EventArgs e)
        {
            bool result = IsDivisibleByTwo(1);
        }

        void button2_onClick(object sender, EventArgs e)
        {
            bool result = IsDivisibleByTwo(2);
        }

        bool IsDivisibleByTwo(int x)
        {
            return (x % 2 == 0);
        } 
```

或者，您可以使用每个按钮的值标记每个按钮，然后从事件发送方获取值以传递给 IsDivisble 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:26:02.717

在您的`Button1_Click`事件中，您应该将`button1.Text`其作为数字。您将需要转换为`int`, 通过`Convert.ToInt32(button1.Text)`。它应该从那里按您的需要工作。

# sql-server - 使用 CHARINDEX 查找其他列中的值总是返回 1 条记录

> ID：13732586
> 
> 赞同：0
> 
> 时间：2012-12-05T21:15:53.673
> 
> 标签：sql-server

我有一张简单的桌子

```
Location, PartNo, LookupPart 
```

我正在尝试查找存在于 lookupPart 列中的 PartNo。有点像 excel Vlookup，除了我需要在 SQL 中进行近似和其他计算。

我在用

```
 SELECT Part_No
    FROM Part_tbl 
    WHERE CHARINDEX(PartNo,LookupPart)>0 
```

PartNo 和 LookupPart 都是 VARCHAR。

我收到 1 条记录返回。但是，如果我使用：

```
 SELECT Part_No
     FROM Part_tbl 
     WHERE CHARINDEX('538',LookupPart)>0 
```

我得到 10 多条以“538”开头或包含“538”的记录

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:34:30.133

也许这就是你想要的？

```
SELECT Part_No
FROM Part_tbl t1
WHERE EXISTS (select 1 from Part_tbl t2 WHERE CHARINDEX(t1.PartNo,t2.LookupPart)>0) 
```

# entity-framework - 具有实体框架迁移的条件种子

> ID：13732589
> 
> 赞同：3
> 
> 时间：2012-12-05T21:16:02.003
> 
> 标签：entity-framework, entity-framework-4.3, entity-framework-migrations

一段时间以来，我一直试图找到一个解决方案，说明如何在迁移配置中使用种子方法，而不必担心下次运行种子方法时更新的数据会被覆盖。

简而言之，我的理解是 addorupdate，如各种教程中所示，将重置每个对象的所有值，从而覆盖该对象自最初播种以来可能发生的任何更改。

在我当前的项目中，我希望能够播种一组默认电子邮件模板。将它们放在种子方法中将确保它们始终存在于我的代码中。但是，我希望应用程序的用户能够编辑他们认为合适的一些内容。所以我不能很好地将模板重置为种子方法运行的所有内容，因为它会删除更改。

我的解决方案是这样的：

```
 protected override void Seed(Jobboard.Sandbox.Model.JobboardContext context)
    {
        Guid DefaultTemplateGuid = Guid.Parse("xxxxx");

        context.Templates.AddOrUpdate(
              t => t.Guid,
                  context.Templates.FirstOrDefault(x => x.Guid == DefaultTemplateGuid)
                  ?? new Template {
                     Guid = DefaultTemplateGuid,
                     Name = "Default Template",
                     Content = "Some Default Content"
                  }
        );
    } 
```

总而言之，这似乎工作得很好，我的问题是，是否有人可以通过这种方式发现任何问题，因为这不完全是 EF 团队建议使用此功能的方式，我不希望以后为此头疼在。

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:06:27.450

通过不使用 AddOrUpdate 扩展方法，您可能可以节省一些访问数据库的次数。这是您的代码的简化版本。

```
protected override void Seed(Jobboard.Sandbox.Model.JobboardContext context)
{
    var defaultTemplateGuid = Guid.Parse("xxxxx");
    var defaultTemplate = context.Templates.SingleOrDefault(
        t => t.Guid == defaultTemplateGuid);

    if (defaultTemplate == null)
    {
        context.Templates.Add(
            new Template
                {
                    Guid = defaultTemplateGuid,
                    Name = "Default Template",
                    Content = "Some Default Content"
                });
    }
} 
```

# ruby-on-rails - Rails给定一个字符串，如何将其转换为ruby中的数组？

> ID：13732592
> 
> 赞同：0
> 
> 时间：2012-12-05T21:16:11.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的表有 Attachment.attachment_content_type 这是字符串类型。值如下所示：

```
[]
[image/png]
[application/msword, application/word, application/x-msword, application/x-word, text/plain] 
```

我想要做的是得到第一个项目（如果有的话）。

我正在尝试：

```
attachment.attachment_content_type[0] 
```

但这只是返回 [ 而不是 'application/msword'

我应该使用拆分还是有更好的方法在rails上使用ruby来告诉rails这是一个数组？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:21:17.300

```
$ cat foo.rb 

strings = [
  "[]",
  "[image/png]",
  "[application/msword, application/word, application/x-msword, application/x-word, text/plain]"
]

strings.each do |string|
  array = string[1...-1].split(/[\s,]+/)
  puts array[0]
end

$ ruby foo.rb 

image/png
application/msword 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:27:21.643

`attachment.attachment_content_type[1..-2].split(',').map(&:strip)`将字符串的内容作为数组返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:36:35.640

尝试使用`gsub!`和`scan`。

```
mimetypes.gsub!(/([\[\]])/, '')
mime_array = mimetypes.scan(/, /) 
```

请参阅[字符串 API](http://www.ruby-doc.org/core-1.9.3/String.html)以了解更多有趣的方法以及用于正则表达式测试的[Rubular](http://rubular.com/) :)

# c++ - 在 Linux 中从 Visual C++ 调用脚本文件

> ID：13732595
> 
> 赞同：1
> 
> 时间：2012-12-05T21:16:28.540
> 
> 标签：c++, linux, visual-studio-2010, shell, wine

请帮我。我已经在 Windows (Visual C++) 中编译了代码并在 Windows 中生成了 .exe 文件。我必须在linux中使用这个文件，它使用wine运行良好。

我的问题是：当这个 .exe 在 linux 中运行时，我必须调用一个 shell 脚本文件。

如何在我编译代码的 Windows 中的 Visual C++ 程序中对此进行编码。我正在 Windows 中编译代码，因为我没有其他选择，它不能在 Linux 中编译，因为它使用了很多 windows 的东西。

我尝试使用 System("sh my_shell_scriptfile.sh"); 在 Visual C++ 代码中，但出现错误，“在 linux 中找不到文件（Windows 路径），当我使用 wine 运行 .exe 文件时。

请指导我

谢谢！

# javascript - 在 JQuery 中，如何只对同一个类的当前 div 执行操作？

> ID：13732596
> 
> 赞同：1
> 
> 时间：2012-12-05T21:16:32.847
> 
> 标签：javascript, jquery, html, css, web

html是这样的：

```
<div class="a_list">
  <div class="hide_list_scrollbar"></div>
</div>
<div class="a_list">
  <div class="hide_list_scrollbar"></div>
</div> 
```

js是这样的：

```
$(".a_list").mouseenter(
    function(){
        $(".hide_list_scrollbar").hide();
    }
);
$(".a_list").mouseleave(
    function(){
        $(".hide_list_scrollbar").show();
    }
); 
```

现在，鼠标事件在所有“a_list” div 上执行。我只想在实际激活鼠标事件的特定 div 上执行鼠标事件，而不是所有“a_list”div。我如何实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T21:17:47.607

向选择器添加上下文。见下文，

```
$(".hide_list_scrollbar", this).hide(); 
```

**完整代码：**

```
$(".a_list").mouseenter(function(){
    $(".hide_list_scrollbar", this).hide();
}).mouseleave(function(){
    $(".hide_list_scrollbar", this).show();
}); 
```

或者你可以`.find`像下面这样使用，

```
$(".a_list").mouseenter(function(){
    $(this).find(".hide_list_scrollbar").hide();
}).mouseleave(function(){
    $(this).find(".hide_list_scrollbar").show();
}); 
```

**注意：**我已链接您的调用以减少对 DOM 的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:18:37.697

请参阅`this`哪个将是有问题的对象（仅`.hide_list_scrollbar`在 div 中查找触发事件的类。）：

```
$(".a_list").mouseenter(
    function(){
        $(".hide_list_scrollbar", this).hide();
    }
);
$(".a_list").mouseleave(
    function(){
        $(".hide_list_scrollbar", this).show();
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T21:19:07.600

如前所述，`this`用作上下文来引用触发该事件的元素。然后您可以`hide_list_scrollbar`在该元素中找到 div 并隐藏/显示它。另外，我会使用它，因为它是和[`hover`](http://api.jquery.com/hover/)的简写`mouseenter``mouseleave`

```
$(".a_list").hover(
    function(){
        $(this).find('.hide_list_scrollbar').hide();
    }, 
    function(){ 
        $(this).find('.hide_list_scrollbar').show(); 
    }
); 
```

# lua - 我如何遍历这个表？

> ID：13732604
> 
> 赞同：0
> 
> 时间：2012-12-05T21:17:25.843
> 
> 标签：lua

我有下表：

```
self.keytable = {}
self.keytable.rotate_right = false
self.keytable.rotate_left = false
self.keytable.thrust = false
self.keytable.brake = false
self.keytable.fire = false 
```

我想遍历表并将每个值设置为 false，但我一定错过了 Lua 的一些细微差别。我试过以下没有运气：

```
for k,v in ipairs(self.keytable) do
    v = false
end 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T22:34:29.147

> 我想遍历表并将每个值设置为 false，但我一定错过了 Lua 的一些细微差别。我试过以下没有运气：
> 
> ```
> for k,v in ipairs(self.keytable) do  
>     v = false  
> end 
> ```

是否更容易理解为什么这不起作用？

```
local v = self.keytable[rotate_right]
v = false 
```

您将 的值复制`self.keytable[rotate_right]`到`v`。随后写入不同`v`的值不会影响`keytable`.

这正是 for 循环中发生的事情，相当于：

```
for k=1,#self.keytable do
    local v = self.keytable[k]
    v = false
end 
```

如果你想更新`keytable`你需要写的值：

```
for k=1,#self.keytable do
    self.keytable[k] = false
end 
```

或者，如果您使用 ipairs（如在原始循环中）：

```
for k,v in ipairs(self.keytable) do
    self.keytable[k] = false
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:56:31.710

我不确定您的意图是什么，但是在使用非整数键时，您必须使用pairs() 内置函数。ipairs() 仅用于使用数字键迭代表，在上面的示例中，您将 false 分配给 keytable 中的非数字键。

如果您想避免像在代码示例中那样将 keytable 中的每个键设置为 false ，这样的事情会做您想要更清洁的事情：

```
local keytable = {}
local keys = {"rotate_right", "rotate_left", "thrust", "brake", "fire"}

for _,key in pairs(keys) do
    keytable[key] = false
end 
```

这会在打印时产生此输出：

```
thrust  false
brake   false
fire    false
rotate_left false
rotate_right    false 
```

上面的代码只是遍历字符串值，然后将它们设置为 keytable 的键，同时为它们分配值 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:04:45.780

另外两个答案都是*对*的。

1)`ipairs`迭代整数键（无论如何你都应该忘记它，它并不比数字 for 循环好）。在这里，您的键是字符串，因此您必须使用`pairs`. 这是用它重写的示例：

```
for k,v in pairs(self.keytable) do
  v = false
end 
```

2）由于 Mud 给出的原因，这仍然不起作用：`v`是循环的本地。其实你根本不需要它，这是一个正确的版本：

```
for k in pairs(self.keytable) do
  self.keytable[k] = false
end 
```

# python - 如何在 Python 中将矩阵复制到更大的矩阵？

> ID：13732614
> 
> 赞同：2
> 
> 时间：2012-12-05T21:17:44.190
> 
> 标签：python, matlab, numpy

我是 Python 世界的新移民。我需要弄清楚如何在 Python 中将矩阵复制到更大的矩阵。让我用 Matlab 中的一个例子来说明这一点：

```
A = randn(4,4);
B = eye(2,2);
A(1:2,1:2) = B 
```

给

```
A = 

 1.0000          0     3.5784     0.7254
      0     1.0000     2.7694   - 0.0631
-2.2588   - 0.4336   - 1.3499     0.7147
 0.8622     0.3426     3.0349   - 0.2050 
```

我正在尝试使用 Python 以以下方式使用 NumPy 进行类似的操作。

```
A = np.random.randn(4,4)
B = np.eye(2,2)
A[0:1,0:1] = B 
```

给

```
ValueError: output operand requires a reduction, but reduction is not enabled. 
```

当然，避免这种情况的最简单方法是使用循环，但我希望将其保持矢量化。

有人可以指出我在不使用 for 循环的情况下执行此操作的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:25:15.767

这是问题所在：

```
A[0:1,0:1] = B 
```

你要：

```
A[0:2,0:2] = B 
```

为什么？因为 Python 使用半开范围。所以切片`[0:1]`是半开范围`[0, 1)`，意味着只是索引`0`；切片`[0:2]`是半开范围`[0, 2)`，表示索引`0`和`1`。

# mysql - 我的 sql 如何 sum() 将每个原始数据处理到原始数据？

> ID：13732617
> 
> 赞同：0
> 
> 时间：2012-12-05T21:17:46.810
> 
> 标签：mysql

我写了一个查询，返回 2 col，如下所示：

（我得到了总 col `count(*)`）

```
date     total  
1,2010     2  
2,2010     5  
3,2010     3  
4,2010     7  
5,2010     6  
6,2010     6 
```

我想对我得到的结果进行一些查询，这将对总数进行求和，但在每一行中，它都会求和直到该行，所以我会得到：

```
date     total  
1,2010     2  
2,2010     7  
3,2010     13  
4,2010     20  
5,2010     26  
6,2010     32 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:28:07.293

您可以使用用户变量来计算总和。

```
SELECT id, date, @t:=@t + total AS total
FROM table t1, (SELECT @t:=0) t2
ORDER BY t1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:31:13.573

您可以使用子查询和用户变量来执行此操作：

```
set @running_total := 0;
select date, @running_total := @running_total + total
from
(
  select date,count(*) as total
  from your_table
  group by date
  order by date
) s
order by date; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:34:57.057

有趣的问题，我设法通过 JOIN 完成任务：

```
mysql> select t2.date, sum(t1.total) from tt t1 join tt t2 on t1.date <= t2.date group by t2.date;
+--------+---------------+
| date   | sum(t1.total) |
+--------+---------------+
| 1,2010 |             2 |
| 2,2010 |             7 |
| 3,2010 |            10 |
| 4,2010 |            17 |
| 5,2010 |            23 |
| 6,2010 |            29 |
+--------+---------------+ 
```

和原表：

```
mysql> select * from tt;
+--------+-------+
| date   | total |
+--------+-------+
| 1,2010 |     2 |
| 2,2010 |     5 |
| 3,2010 |     3 |
| 4,2010 |     7 |
| 5,2010 |     6 |
| 6,2010 |     6 |
+--------+-------+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:36:36.280

这称为累积和。标准 SQL 方式是使用相关子查询：

```
select t.date,
       (select sum(total) from t t2 where t2.date <= t.date) as CumulativeTotal
from t 
```

这是假设日期字段可直接比较，“2,2010”对我来说没有意义作为日期。如果这打算是“月，年”，那么它不是一个日期，你需要做额外的工作。我强烈建议当字符串表示日期时，您应该使用 YYYY-MM 或 YYYY-MM-DD 格式。

# ruby-on-rails-3.1 - rspec2 为模型类方法（.self）抛出“未定义的方法”

> ID：13732618
> 
> 赞同：0
> 
> 时间：2012-12-05T21:17:49.727
> 
> 标签：ruby-on-rails-3.1, rspec2, rspec-rails

我有一个模型（event.rb）方法，它检索指定期间所有重复日期的列表

```
 def self.dates_between(start_date, end_date)
     dates = (start_date..end_date).step(7).to_a
  end 
```

比我在 event_spec.rb 中指定以下内容

```
 before(:each) do
    @event = FactoryGirl.create(:event)
  end    
  subject { @event }

  ... other working tests ...

  describe '#dates_between' do
    context 'finds recurrences dates of a event' do
      start_date = "2012-12-01 18:25:25"
      end_date = "2012-12-15 18:25:25"
      output_dates = ["2012-12-01 18:25:25", "2012-12-08 18:25:25", "2012-12-15 18:25:25"]

      it 'should call Event with method dates_between' do
        @event.should_receive(:dates_between).with(start_date, end_date)
        @event.dates_between(start_date, end_date)
      end

      it 'should find and return the RIGHT recurrences dates' do
        @event.dates_between(start_date, end_date).should eq(output_dates)
      end
    end
  end 
```

并得到这个失败：

```
1) Event#dates_between finds recurrences dates of a event should find and return the RIGHT recurrences dates
 Failure/Error: @event.dates_between(start_date, end_date).should eq(output_dates)
 NoMethodError:
   undefined method `dates_between' for #<Event:0xb99e9f8>
 # ./spec/models/event_spec.rb:52:in `block (4 levels) in <top (required)>' 
```

当我将模型从类方法更改为实例方法（删除“自我”）时，控制台只会打印出“野生数据”：

> 22:93:55”、“2012-12-01 22:93:62”、“2012-12-01 22:93:69”、“2012-12-01 22:93:76”、“2012-12 -01 22:93:83”、“2012-12-01 22:93:90”、“2012-12-01 22:93:97”、“2012-12-01 22:94:04”、“2012 -12-01 22:94:11”、“2012-12-01 22:94:18”、“2012-12-01 22:94:25”、“2012-12-01 22:94:32”、 ...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:37:53.680

所以，我让它工作了，我犯了两个错误：

*   首先，我需要调用类方法 (Event.dates_between) 而不是实例方法 (Event.new.dates_between)

*   第二，我期待

    [“2012-12-01 18:25:25”、“2012-12-08 18:25:25”、“2012-12-15 18:25:25”]

但应该已经没有时间了，这在预计的三天内每隔一分钟一小时迭代一次，搞砸了我的控制台

```
["2012-12-01", "2012-12-08", "2012-12-15"] 
```

不，我做了以下并且规格是绿色的：

```
describe Event do

  subject(:event) { FactoryGirl.create(:event) }

  describe '#dates_between' do
    context 'finds recurrences dates of a event' do
      start_date = "2012-12-01"
      end_date = "2012-12-15"
      output_dates = ["2012-12-01", "2012-12-08", "2012-12-15"]

      it 'should call dates_between with two arguments' do
        event.should_receive(:dates_between).with(start_date, end_date).and_return(output_dates)
        event.dates_between(start_date, end_date).should eq(output_dates)
      end

      it 'should find and return the RIGHT recurrences dates' do
        Event.dates_between(start_date, end_date).should eq(output_dates)
      end
    end
  end

end 
```

# php - 使用 PDO 进行动态列表查询

> ID：13732622
> 
> 赞同：1
> 
> 时间：2012-12-05T21:17:57.777
> 
> 标签：php, mysql, pdo

我一直在努力解决这个问题，但我似乎无法靠自己解决这个问题。我遇到了 PDO 和 MYSQL 的已知问题/功能，这些问题/功能导致我使用以下代码。

我正在数据库中搜索与多个条件匹配的标签 ID。我遇到了一个 MYSQL 错误，它似乎迫使我在第二次处理之前使用临时表来存放我的一些结果。PDO 不允许我在第一次执行后引用临时表（我可能做错了）或让我准备多个语句，因此它引导我为此调用创建一个存储过程。在最近的一些测试之后，我发现 PDO 的另一个问题/功能不允许我以我正在寻找的方式调用存储过程。

这是SP：

```
DELIMITER $$
CREATE PROCEDURE sp_searchPrevArticles(IN tagList VARCHAR(255), IN firstArticle INT(10))
BEGIN

CREATE TEMPORARY TABLE at_results (
id INTEGER(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
article_id INTEGER(10) NOT NULL,
datetime DATETIME NOT NULL,
common_tags INTEGER NOT NULL)
SELECT at.article_id, art.datetime, Count(at.article_id) AS common_tags
FROM article_tags AS at 
INNER JOIN articles AS art ON at.article_id = art.article_id
WHERE at.tag_id IN (tagList)
GROUP BY at.article_id
ORDER BY common_tags DESC, art.datetime DESC;

CREATE TEMPORARY TABLE at_article
SELECT id
FROM at_results
WHERE article_id = firstArticle;

SELECT article_id
FROM at_results, at_article
WHERE at_results.id < at_article.id
ORDER BY at_results.id DESC;

END $$
DELIMITER ; 
```

不能正常工作的参数是 tagList。我用

```
foreach ($tag_ids as $tag) {
    $tag_list = ($tag_list . $tag . ",");
}
$tag_list = rtrim($tag_list, ','); 
```

这给了我标签 ID 的动态列表。为此，我们可以说“4,3,2,1”。当我在没有 PDO 的情况下运行此 SP 时，它会返回正确的数据集。每当我使用 PDO 运行它时，它只会给我列表中的第一个标签。在这种情况下，它只会返回“4”的结果。

我的 PDO 电话是：

```
$sql = "CALL sp_searchPrevArticles(:tag_list, :first_article)";
$tag_sth = $this->db->prepare($sql);
$tag_sth->execute(array(':tag_list' => $tag_list, ':first_article' => $first_article));
$tag_sth->setFetchMode(PDO::FETCH_ASSOC);
$data = $tag_sth->fetchAll(); 
```

当我继续以这种方式编写它们时，我不禁认为我让自己的一切变得更加困难。我仍在学习，这是迄今为止我提出的最佳解决方案。任何人都知道如何让这个功能正常运行？

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:08:57.270

PDO 很简单地不能正确处理列表，除非它们是静态长度并定义为`IN(?,?,?,?)`. 我通过以下方式解决它：

```
<?php
$list = '1,2,3,4';
$params = array('a', 'b');

$query = "SELECT * FROM TABLE WHERE thing = ? AND other = ? AND more IN (%s)";
$query = sprintf($query, $list);

$rs = $dbh->doQuery($query, $params); 
```

这是kludge-y，但我还没有看到PHP关于动态长度列表的真正解决方案。

我只是想到了一种更丑陋但更合规的写法：

```
<?php
$list = array(1,2,3,4); //pretend this is dynamic, and always has at least one member
$params = array('a','b');
$query = "SELECT * FROM TABLE WHERE thing = ? AND other = ? AND more IN (%s)";

$placeholders = '?';
for($i=0; $i<count($list); $i++) {
    $placeholders .= ',?';
}
$query = sprintf($query, $placeholders);
$params = array_merge($params, $list);

$rs = $dbh->doQuery($query, $params); 
```

这是粗略和笼统的，但你明白了。除非你*真的*致力于参数化我更喜欢第一个片段的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:38:45.637

我会在这里为其他寻找答案的人发布这个。Sammitch 的想法非常好，但我无法让它与存储过程一起使用。我最终将变量传递给 SQL 并在存储过程中构建完整的查询。我不确定这是否是处理此问题的最佳方法，但它目前正在工作。我可以担心以后调整它。

```
DROP PROCEDURE IF EXISTS sp_searchPrevArticles;

DELIMITER $$
CREATE PROCEDURE sp_searchPrevArticles(IN tagList VARCHAR(255), IN firstArticle INT(10))
BEGIN

SET @sql1 = CONCAT('
CREATE TEMPORARY TABLE at_results (
id INTEGER(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
article_id INTEGER(10) NOT NULL,
datetime DATETIME NOT NULL,
common_tags INTEGER NOT NULL)
SELECT at.article_id, art.datetime, Count(at.article_id) AS common_tags
FROM article_tags AS at 
INNER JOIN articles AS art ON at.article_id = art.article_id
WHERE at.tag_id IN (', tagList ,')
GROUP BY at.article_id
ORDER BY common_tags DESC, art.datetime DESC;');

SET @sql2 = CONCAT('
CREATE TEMPORARY TABLE at_article
SELECT id
FROM at_results
WHERE article_id = ', firstArticle, ';');

SET @sql3 = '
SELECT article_id
FROM at_results, at_article
WHERE at_results.id < at_article.id
ORDER BY at_results.id DESC;';

PREPARE stmt FROM @sql1;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

PREPARE stmt FROM @sql2;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

PREPARE stmt FROM @sql3;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END $$
DELIMITER ; 
```

# wpf - Prism 事件聚合器集合

> ID：13732623
> 
> 赞同：0
> 
> 时间：2012-12-05T21:18:01.787
> 
> 标签：wpf, prism

对于我要编写的实用程序，我希望能够访问由 Prism 中的事件聚合器维护的事件字典......唯一的公共方法/属性似乎是“GetEvent”。是否有可能获得事件字典？

谢谢哈罗德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:18:53.327

您无法通过开箱即用的实现来做到这一点。一个可能的解决方案是对 EventBase 或 WFPPresentationEvent 进行子类化。

看看这个[实现](http://www.ademiller.com/blogs/tech/2008/11/adding-store-and-forward-support-to-the-prism-eventaggregator/)以获得一些灵感。

# php - PHP相当于pythons插槽

> ID：13732627
> 
> 赞同：-1
> 
> 时间：2012-12-05T21:18:20.210
> 
> 标签：php, html, css, web

我不确定如何将其总结为谷歌问题，但也许详细解释它会给我更好的帮助。

我正在尝试在 PHP 中找到与在 python 中设置插槽的等效项

Python：

```
class Node:
    slots = ('name','desc','blah')
    def __init__(self, name, desc, blah):
        self.name = name
        self.desc = desc
        self.blah = blah 
```

跑过一个数组，我讨厌试图记住一些东西在什么位置并做 array[3] 或者这样做 array.blah 会容易得多。这在 PHP 中是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:20:06.867

使用关联数组：

```
$slots = array(
    'name' => $name,
    'desc' => $desc,
    'blah' => $blah
); 
```

然后你可以做`echo $slots['name'];`

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:29:57.523

上述方法只有一个问题，那就是您可以在数组中动态添加新值。我不确定插槽是如何工作的，因为我不熟悉 python，但查看示例键名、desk 和 blah 应该是常量并且它们是预定义的。在这种情况下，我认为最好的方法是使用班级成员，例如

```
 Class Node{
    private $name;
    private $desc;
    private $blah;

    public function __construct($name, $desc, $blah){
    $this->name = $name;
    $this->desc = $desk;
    $this->blah = $blah;
    }
} 
```

您当然可以将变量公开，但这不是最好的方法，相反，您可能应该为每个变量实现 getter 和 setter。

# qtranslate - q翻译日期和时间

> ID：13732630
> 
> 赞同：0
> 
> 时间：2012-12-05T21:18:32.163
> 
> 标签：qtranslate

我刚刚安装了 qTranslate，它就像一个洋娃娃。唯一的问题是这个日期错误已经存在了一段时间。我通过谷歌找到的所有地方都说这是由于 qtrans_ulils.php 中的两个百分号，用于 $strftime_parameters[]。但是，如果我只将其纠正为百分之一，我就不会再遇到问题了，但我确实得到了一个巨大的错误...CRT，它声称，在 qtrans_core.php 中。

```
Warning: Invalid CRT parameters detected in C:\var\htdocs\maud\wp-content\plugins\qtranslate\qtranslate_core.php on line 455 Warning: Invalid CRT parameters detected in C:\var\htdocs\maud\wp-content\plugins\qtranslate\qtranslate_core.php on line 455 Warning: Invalid CRT parameters detected in C:\var\htdocs\maud\wp-content\plugins\qtranslate\qtranslate_core.php on line 455 Warning: Invalid CRT parameters detected in C:\var\htdocs\maud\wp-content\plugins\qtranslate\qtranslate_core.php on line 455 Warning: Invalid CRT parameters detected in C:\var\htdocs\maud\wp-content\plugins\qtranslate\qtranslate_core.php on line 455 at 09:06 PM 
```

我无法真正理解为什么它会这样做......帮助。

红色的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:43:14.457

试试这个：[https ://was955.wordpress.com/2012/11/27/php-warning-invalid-crt-parameters-detected-by-qtranslate-on-wordpress/](https://was955.wordpress.com/2012/11/27/php-warning-invalid-crt-parameters-detected-by-qtranslate-on-wordpress/)

这是该网站的引述：

> 如果您在 WordPress 中使用**qTranslate**插件，您可能会看到许多警告消息，如下面的有关 Windows 操作系统的 Apache 和 PHP 的信息。
> 
> **qTranslate 警告：在第 447 行的 ... \wp-content\plugins\qtranslate\qtranslate_core.php 中检测到无效的 CRT 参数**
> 
> 如果你想删除许多警告信息，我会给你一种方法来解决这个问题
> 
> 如何删除警告信息
> 
> 如果您想删除许多警告消息，您应该编辑 '<strong>...\wp-content\plugins\qtranslate\qtranslate_core.php' （在第**455**行附近），如下代码：

```
$search[] = '/(([^%])%4|^%4)/'; $replace[] = '${2}'.$date; // date U $format = preg_replace($search,$replace,$format);

// Add Windows
if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
  $format = str_replace('%P','%p',$format);
}

return $before.strftime($format, $date).$after; 
```

> 这是非常容易的问题。您不能在 Windows 操作系统中使用 strftime 函数 ( PHP ) 中的 '<strong>%P' 格式。如果您想删除 Windows 操作系统的警告消息，您应该使用 '<strong>%p'。
> 
> %p 基于给定时间的大写“AM”或“PM”示例：AM 表示 00:31，PM 表示 22:23
> 
> %P 基于给定时间的小写 'am' 或 'pm' 示例：am 表示 00:31，pm 表示 22:23

# javascript - ASP.net / Javascript: Automatically postback triggering and next control to have focus

> ID：13732637
> 
> 赞同：1
> 
> 时间：2012-12-05T21:19:26.043
> 
> 标签：javascript, asp.net, vb.net, event-handling, focus

I will preface my question with the disclaimer that I am fairly new to ASP and VB programming and not yet exposed to all the language and framework have to offer.

I am building an ASP site using VB, and I have specific requirements to follow. In the section of the form in question, a series of text boxes collects quantities of an item. Upon postback, the quantities are used to recalculate a total. All of these controls perform the calculation perfectly.

For this form, I am using the OnChange Javascript event to trigger the postback when any of them are modified. This also works correctly. However, when the user clicks or tabs away from the textbox being changed and the postback fires, no control appears to have focus.

I need the focus to be on the control which was clicked by the user, if they clicked onto another control. Is there an event or method by which I can capture the ID of the control which gained focus immediately prior to the postback being triggered? I have seen several questions and answers which demonstrate how to collect the ID of the control which actually triggered the postback, but this would place the focus directly back into the field which was just changed.

Whether the focus is placed into the control which triggered the postback or not, the behavior requires the user to select their next control twice, once to indirectly fire the postback and once to place focus into the desired control.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:34:58.260

I'm not sure I'm understanding you completely, but I've tried to recreate your scenario from your description, and using an UpdatePanel looks like a simple solution. This is a quick and easy way of ajaxifying your page, without worrying about the details. Surround the field that is being updated with the UpdatePanel, and add an AsyncPostBackTrigger for the control (or controls) that cause the postback (in this case, a hidden button):

```
<script type="text/javascript">
    function pb() {
        document.getElementById("<%= btnPostBack.ClientID %>").click();
    }
</script>
<asp:button id="btnPostBack" runat="server" onclick="PostBack" style="display: none;" />

<asp:textbox id="t1" runat="server" onchange="pb();" />
<asp:textbox id="t2" runat="server" onchange="pb();" />
<asp:textbox id="t3" runat="server" onchange="pb();" />
<asp:textbox id="t4" runat="server" onchange="pb();" />

<asp:updatepanel id="update" runat="server">
    <contenttemplate>
        <asp:label id="label" runat="server" />
    </contenttemplate>
    <triggers>
        <asp:asyncpostbacktrigger controlid="btnPostBack" />
    </triggers>
</asp:updatepanel> 
```

In my PostBack method in code behind, I simply aggregate the values from t1, t2, t3 and t4\. I can tab from one TextBox to the next adding text, and the label is updated without focus being lost.

# arrays - 具有单个项目的数组的正确 JSON 输出？

> ID：13732643
> 
> 赞同：1
> 
> 时间：2012-12-05T21:20:23.490
> 
> 标签：arrays, json

数组中包含单个项目的数组的 JSON 输出的规范是什么？

是吗：

```
{"people":{"person":[{"id":1,"name":"jimbob"}]}} 
```

或者：

```
{"people":{"person":{"id":1,"name":"jimbob"}}} 
```

我知道数组中多个项目的 JSON 规范是：

```
{"people":{"person":[{"id":1,"name":"jimbob"},{"id":2,"name":"bettysue"}]}} 
```

但我似乎找不到关于如何表示数组中的单个项目的规范。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:21:23.607

这是第一个——

```
{"people":{"person":[{"id":1,"name":"jimbob"}]}} 
```

否则它将是一个对象，而不是一个数组。

* * *

顺便说一句，删除“人”对象似乎更有意义（似乎多余）：

```
{"people":[{"id":1,"name":"jimbob"}]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:33:48.993

实际上它们都返回对象。

要返回一个数组，您需要使用类似的东西：

[{"id":1,"name":"Harry"},{"id":2,"name":"Sally"}]

# asp.net-mvc - 随机发生的 Ninject 异常：“加载 Ninject 组件 ICache 时出错”

> ID：13732645
> 
> 赞同：8
> 
> 时间：2012-12-05T21:20:30.297
> 
> 标签：asp.net-mvc, ninject, ninject.web.mvc

我最近将 Ninject 和 Ninject.Web.Mvc 添加到现有的 ASP.NET MVC 4 Web 应用程序中。浏览该网站时，我收到以下异常，似乎是随机的：

> [InvalidOperationException：加载 Ninject 组件 ICache 时出错 内核的组件容器中没有注册此类组件。
> 
> 建议： 1) 如果您已经为 KernelBase 创建了自定义子类，请确保您已正确实现 AddComponents() 方法。2) 确保您没有通过调用 RemoveAll() 从容器中删除组件。3) 确保您没有意外创建多个内核。] Ninject.Components.ComponentContainer.Get(Type component) in c:\Projects\Ninject\ninject\src\Ninject\Components\ComponentContainer.cs:160 Ninject.Components.ComponentContainer.Get() in c:\Projects\Ninject\ ninject\src\Ninject\Components\ComponentContainer.cs:116 Ninject.Web.Common.<>c__DisplayClass2.b__1(IKernel kernel) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\ OnePerRequestHttpModule.cs:74 Ninject.GlobalKernelRegistration.MapKernels(Action`1 action) in c:

一旦我收到上述异常，只需刷新或单击返回似乎会导致站点再次开始正常运行。该网站的任何一个区域似乎都不会导致它发生。

该问题与此处提出的问题非常相似：[Ninject + "Error loading Ninject component ICache"](https://stackoverflow.com/questions/5134630/ninject-error-loading-ninject-component-icache)。但是，该问题中的问题似乎是由扩展本身的错误引起的，已经存在一年多，并且看起来已经解决。

发生这种情况时无需对**NinjectWebCommon.cs**文件进行任何修改。（没有加载模块，没有添加绑定。）我让它停止的唯一方法是从项目中完全排除**NinjectWebCommon.cs 。**

我不确定要包括哪些其他信息，因为除了安装 Nuget 软件包之外我几乎没有做任何事情。或许值得注意的是，该项目确实包含对使用 Ninject for DI 的其他程序集的引用。

我环顾四周，不知道为什么会发生这种情况。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T08:57:29.523

显然，您的应用程序中涉及多个内核（MVC + Libs）。应该避免在应用程序运行时创建和释放内核实例。我强烈建议更改您的设计，以便在应用程序启动时创建少量内核。以后不会创建任何内容（包括所有库）。

Having said that, I don't see any way in the code how this problem can happen with the latest version of Ninject. It may be worth verifying that the Application and ALL the libraries are on the latest version of Ninject.

# perl - 为什么 Scalar::Util 和 Test::Most 不能很好地配合使用？

> ID：13732647
> 
> 赞同：3
> 
> 时间：2012-12-05T21:20:32.987
> 
> 标签：perl

拿这个简单的测试用例：

```
#!/usr/bin/env perl

use Test::Most;
use Scalar::Util qw( reftype );

ok( 1, 'foo' );

done_testing(); 
```

运行此测试会给我以下输出：

原型不匹配：sub main::reftype: none vs ($) at /Users/olaf/perl5/perlbrew/perls/perl-5.16.2/lib/site_perl/5.16.2/Exporter.pm 第 66 行。

有两种方法可以消除此警告。

*   我可以使用 Test::More 而不是 Test::Most
*   我可以使用 Test::Most 但不明确地导入 reftype

我可以调用 Scalar::Util::reftype （甚至使用另一个模块），但我正在寻找调试此问题的一些帮助，以便我可以提交适当的错误报告，因为我不确定至于警告的根本原因在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:42:52.703

两者`Test::Most`和`Scalar::Util`定义函数称为`reftype`，以及您调用的方式`use`会导致两个模块尝试将其`reftype`函数导出到调用包。有时这会触发`Subroutine ... redefined`警告，但这种情况下`Scalar::Util::reftype`想用原型定义自己，所以冲突是一个更严重的错误。

除了调用之外的一些选项`Scalar::Util::reftype($ref)`：

一。定义和使用不同的别名`Scalar::Util::reftype`

```
     使用标量::Util ();
     开始 { *su_reftype = *Scalar::Util::reftype; }
     print "reftype is ", su_reftype($ref), " ...";

```

二。`reftype`在加载之前从符号表中删除`Scalar::Util`：

```
    使用 Test::Most;
    开始 { *{reftype} = '' }
    使用 Scalar::Util 'reftype';

```

# php - PHP排序里面while

> ID：13732653
> 
> 赞同：0
> 
> 时间：2012-12-05T21:20:51.207
> 
> 标签：php, sorting, while-loop

我希望`echo`按 的值排序`$match_count`。最高的数字应该在顶部。

```
while($row = mysql_fetch_array($result)) {
    $num_kanal = count(explode(' ', $row['kanaler']));

    $pr_kanal = $row['pris'] / $num_kanal;
    $pr_kanal = number_format((float)$pr_kanal, 2, '.', '');

    $farve = '#6a6a6a;';

    if ($_POST['kanaler']) {

        $getkan = implode($_POST['kanaler'], ' ');
        $kan = $row['kanaler'];
        $match_count = count(TheMatch($kan, $getkan));
        $match = ' Match = '.$match_count;
        }

        // I WANT THIS ECHO TO BE SORT BY THE VALUE OF '$match_count' HIGEST NR IN TOP //
        echo'<tr>
            <td style="background-color:'.$farve.'"><p>
            ' . $row['udbyder'] . ' '.$_POST['kanaler'].'
            </p></td>
    </tr>';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:33:04.493

您必须在遍历数组时缓冲输出/值，对其进行排序然后打印。像这样的东西：

```
$results = array();
while($row = ...) {
    ...
    $results[] = array($match_count, '<tr><td style="background-color:...</tr>');
}

uasort($results, my_comp);

foreach($results as $result)
    echo $result[1]; 
```

这将对数组进行排序，然后根据此排序函数打印它：

```
function my_comp($left, $right) {
    return $left[0] > $right[0]; // to be honest I'm not 100% sure right now whether you'd need < or > for the right sorting order
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:51:39.483

您也可以使用 array_multisort ：

```
<?php 
array_multisort($match_count, SORT_DESC, $array_values_to_print);

foreach ($match_count as $result) {
    echo '<tr><td style="background-color:...</tr>';
}
?> 
```

第一个数组确定索引。

# php - 从文本中获取特定值

> ID：13732655
> 
> 赞同：1
> 
> 时间：2012-12-05T21:20:52.513
> 
> 标签：php, parsing

嗨，我有一个带有这个值的 cookie

```
a:2:{i:0;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:5196;s:11:"category_id";s:3:"209";s:5:"price";d:1;s:3:"tax";s:5:"18.00";s:6:"tax_id";s:1:"1";s:11:"description";s:0:"";s:12:"product_name";s:4:"test";s:11:"thumb_image";s:0:"";s:3:"ean";s:0:"";s:10:"attributes";s:6:"a:0:{}";s:16:"attributes_value";a:0:{}s:6:"weight";s:6:"0.0000";s:9:"vendor_id";s:1:"0";s:5:"files";s:6:"a:0:{}";s:14:"freeattributes";s:6:"a:0:{}";s:25:"dependent_attr_serrialize";s:6:"a:0:{}";}i:1;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:4617;s:11:"category_id";s:3:"211";s:5:"price";d:1200;s:3:"tax";s:5:"18.00";s:6:"tax_id";s:1:"1";s:11:"description";s:74:"Машка блуза,EXTERRA ГТЦ 1 спрат и CITY MALL 1спрат";s:12:"product_name";s:0:"";s:11:"thumb_image";s:42:"thumb_e069100cef8553637664fc695df55c66.JPG";s:3:"ean";s:0:"";s:10:"attributes";s:6:"a:0:{}";s:16:"attributes_value";a:0:{}s:6:"weight";s:6:"0.0000";s:9:"vendor_id";s:1:"0";s:5:"files";s:6:"a:0:{}";s:14:"freeattributes";s:6:"a:0:{}";s:25:"dependent_attr_serrialize";s:6:"a:0:{}";}} 
```

我需要读取该值并获取文本中数字 5196 位置的任何数字，就在“product_id”之后；一世： 。所以有人知道我如何使用 php 获得数字 5196？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:24:47.623

如果可能的话，我非常反对直接使用序列化数据。相反，我会使用 反序列化数据[`unserialize`](http://php.net/manual/en/function.unserialize.php)，然后从结果数组中获取值。

```
$data = 'a:2:{i:0;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:5196...';
$rslt = unserialize($data);

echo $rslt[0]["product_id"]; 
```

运行此代码：[http ://codepad.org/JKYUS6yd](http://codepad.org/JKYUS6yd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:31:20.983

该字符串是一个序列化的对象。如果你反序列化它，你可以遍历它并找到 product_id = 5196 的数组，然后用它做你想做的事情，例如获取它的其他值：

```
$str = 'a:2:{i:0;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:5196;s:11:"category_id";s:3:"209";s:5:"price";d:1;s:3:"tax";s:5:"18.00";s:6:"tax_id";s:1:"1";s:11:"description";s:0:"";s:12:"product_name";s:4:"test";s:11:"thumb_image";s:0:"";s:3:"ean";s:0:"";s:10:"attributes";s:6:"a:0:{}";s:16:"attributes_value";a:0:{}s:6:"weight";s:6:"0.0000";s:9:"vendor_id";s:1:"0";s:5:"files";s:6:"a:0:{}";s:14:"freeattributes";s:6:"a:0:{}";s:25:"dependent_attr_serrialize";s:6:"a:0:{}";}i:1;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:4617;s:11:"category_id";s:3:"211";s:5:"price";d:1200;s:3:"tax";s:5:"18.00";s:6:"tax_id";s:1:"1";s:11:"description";s:74:"Машка блуза,EXTERRA ГТЦ 1 спрат и CITY MALL 1спрат";s:12:"product_name";s:0:"";s:11:"thumb_image";s:42:"thumb_e069100cef8553637664fc695df55c66.JPG";s:3:"ean";s:0:"";s:10:"attributes";s:6:"a:0:{}";s:16:"attributes_value";a:0:{}s:6:"weight";s:6:"0.0000";s:9:"vendor_id";s:1:"0";s:5:"files";s:6:"a:0:{}";s:14:"freeattributes";s:6:"a:0:{}";s:25:"dependent_attr_serrialize";s:6:"a:0:{}";}}';
$unserialObj = unserialize($str);
foreach($unserialObj as $item) {
    if($item['product_id'] == 5196) {
        echo $item['cateogry_id'] . ', ';
        echo $item['price'];
        //etc
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:25:01.160

```
$str = 'a:2:{i:0;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:5196;s:11:"category_id";s:3:"209";s:5:"price";d:1;s:3:"tax";s:5:"18.00";s:6:"tax_id";s:1:"1";s:11:"description";s:0:"";s:12:"product_name";s:4:"test";s:11:"thumb_image";s:0:"";s:3:"ean";s:0:"";s:10:"attributes";s:6:"a:0:{}";s:16:"attributes_value";a:0:{}s:6:"weight";s:6:"0.0000";s:9:"vendor_id";s:1:"0";s:5:"files";s:6:"a:0:{}";s:14:"freeattributes";s:6:"a:0:{}";s:25:"dependent_attr_serrialize";s:6:"a:0:{}";}i:1;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:4617;s:11:"category_id";s:3:"211";s:5:"price";d:1200;s:3:"tax";s:5:"18.00";s:6:"tax_id";s:1:"1";s:11:"description";s:74:"Машка блуза,EXTERRA ГТЦ 1 спрат и CITY MALL 1спрат";s:12:"product_name";s:0:"";s:11:"thumb_image";s:42:"thumb_e069100cef8553637664fc695df55c66.JPG";s:3:"ean";s:0:"";s:10:"attributes";s:6:"a:0:{}";s:16:"attributes_value";a:0:{}s:6:"weight";s:6:"0.0000";s:9:"vendor_id";s:1:"0";s:5:"files";s:6:"a:0:{}";s:14:"freeattributes";s:6:"a:0:{}";s:25:"dependent_attr_serrialize";s:6:"a:0:{}";}}';
$ar = explode(";",$str);
$ar2 = explode(":",$ar[4]);
print_r($ar2[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:25:12.923

使用正则表达式：

```
$cookie = 'value from your post';
preg_match('/.*"product_id";i:([^;]+)/', $cookie, $matches);
$product_id = $matches[1]; 
```

# facebook - 无法在移动设备上成功重定向到 https://apps.facebook.com/MYAPPNAME

> ID：13732656
> 
> 赞同：1
> 
> 时间：2012-12-05T21:20:58.897
> 
> 标签：facebook, mobile

Facebook 画布站点 Ruby on Rails 3.0.7 OmniAuth 0.3.0（服务器端身份验证）

在 Facebook 身份验证成功时，当 Facebook 调用我的 Omniauth 回调操作时，我的应用程序。重定向到 URL “http://apps.facebook.com/MY_APP_NAME”。

在桌面上，这将按照画布应用程序的正常方式在 Facebook iframe 中显示我的应用程序。重定向到“http://apps.facebook.com/MY_APP_NAME”会导致在我的应用程序上调用“/facebook/canvas”，并从那里继续前进。

在任何移动平台（iOS、Android）上，我都会收到错误消息“应用程序“Redflag Dev Staging”的移动版本不可用，因为它被错误地配置为移动访问。” 从来没有给我的应用打回电话。

我已经对此进行了相当多的谷歌搜索，试图找出问题所在。

许多人建议我的“移动站点 URL”需要与应用设置中的“站点 URL”不同。我已将“Mobile Site URL”值更改为几个不同的东西并得到相同的结果。

我很高兴对我的应用程序设置进行任何可能需要的更改，但我已经尝试了我能想到的一切，但似乎没有任何帮助。

在为移动请求提供服务时，我应该重定向到“apps.facebook.com/MY_APP_NAME”的移动等效项吗？

任何见解都值得赞赏。

韦斯

# c# - 在 Windows 8 应用程序中使用 MessageBinder.SpecialValues 不起作用？

> ID：13732657
> 
> 赞同：2
> 
> 时间：2012-12-05T21:21:00.563
> 
> 标签：c#, mvvm, windows-8, caliburn.micro

我是 Caliburn.Micro 的新手，所以我希望有人可以在这里帮助我:)。

我试图在我的 Windows 8 应用程序中使用 MessageBinder.SpecialValues，但我无法让它工作。我正在添加一个新的“$pointerPercentage”来了解鼠标在元素内的位置（对于我的合成器应用程序中的音乐键盘）的百分比（在 0.0 和 1.0 之间浮动）。其他一切目前都在工作（所以我相信我已经正确连接了 Caliburn.Micro）。

我已将以下内容添加到我的 App.xaml.cs 的 Configure 方法中：

```
protected override void Configure()
{
    container = new WinRTContainer();
    container.RegisterWinRTServices();

    MessageBinder.SpecialValues.Add("$pointerPercentage", ctx =>
    {
        return 1.0f;
    });
} 
```

然后我在 Canvas 元素中的 PointerMoved 事件中使用它：

```
<Canvas x:Name="keyCanvas" Background="#338B8BDC"
    cal:Message.Attach="[Event PointerMoved] = [Action UpdateKeyboard($pointerPercentage)]" /> 
```

我的 ViewModel 中的 UpdateKeyboard 方法确实被触发（我用调试器闯入它），但传入的参数始终是 0.0f（不是上面 SpecialValues 代码中设置的 1.0f）。

我究竟做错了什么？任何帮助，将不胜感激 ：）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:55:34.993

我发现了你的问题：问题在于这一行的 CM 源：

```
else if (MessageBinder.SpecialValues.ContainsKey(parameterText.ToLower()) || char.IsNumber(parameterText[0])) 
```

不确定它是否被认为是源问题 - CM 按原样处理所有键，但在与字典`SpecialValues`中的键进行比较之前将任何指定的操作消息特殊参数字符串转换为小写`SpecialValues`

解决方案是将您的`SpecialValues`参数键添加为小写！

```
protected override void Configure()
{
    container = new WinRTContainer();
    container.RegisterWinRTServices();

    MessageBinder.SpecialValues.Add("$pointerpercentage", ctx =>
    {
        return 1.0f;
    });
} 
```

我已经看到你也在 CM codeplex 网站上发布了这个，我已经在那里回答了 - 我认为这应该在 dict 中的键和你的操作消息参数中的键上完成，以防止这种情况发生。（可以在调用 SpecialValues.Add 方法以最小化代码影响时完成） - 但这是 CM 开发人员需要考虑的事情

# c# - 从文本框值插入数字（十进制）数据

> ID：13732665
> 
> 赞同：0
> 
> 时间：2012-12-05T21:21:30.987
> 
> 标签：c#, sql, insert, numeric

我对以下问题感到困惑；

我有一个 C# (WindowsForms) 应用程序，我连接到 SQL Server DB 并且对 INSERT、SELECT、UPDATE... 没有任何问题，直到我开始使用数字数据；

这个应用程序的目的是管理员工、他们的合同、工作率、合同期限、小时费率......并用它做一些有趣的计算，没什么*神奇*的。

基本上，我需要在我的数据库中存储一些格式为“0000,0000”的值（十进制？双精度？浮点数？）。

*   在我的数据库中，我已经将我的表设置为我需要将这些“000,0000”值转换为十进制的所有列

*   在我的表单中，我没有为我的文本框指定任何特定属性，

*   要插入，我使用我定义十进制参数的方法

    ```
     public void createNewContract(int employeeId, string agency, string role, string contractType, string startDate,
        string endDate, string lineManager, string reportTo, string costCenter, string functionEng, string atrNo, string atrDate, string prNo, string prDate,
        string poNo, string poDate, string comments, decimal duration, decimal workRatePercent, string currency, decimal hourlyRate, decimal value)
    {
        if (conn.State.ToString() == "Closed")
        {
            conn.Open();
        }
        SqlCommand newCmd = conn.CreateCommand();
        newCmd.Connection = conn;
        newCmd.CommandType = CommandType.Text;
        newCmd.CommandText = "INSERT INTO tblContracts (CreatedById, CreationDate, EmployeeId, Role, ContractType, StartDate, "
        + "EndDate, Agency, LineManager, ReportTo, CostCenter, FunctionEng, AtrNo, AtrDate, PrNo, PrDate, PoNo, PoDate, Comments, Duration, WorkRatePercent, Currency, HourlyRate, Value)"
        + "VALUES ('" + connectedUser.getUserId() + "','" + DateTime.Now.ToString("dd/MM/yyyy hh:mm:ss") + "','" + employeeId + "','" + role + "','" + contractType
        + "','" + startDate + "','" + endDate + "','" + agency + "','" + lineManager + "','" + reportTo + "','" + costCenter + "','" + functionEng + "','" + atrNo + "','" + atrDate + "','" + prNo
         + "','" + prDate + "','" + poNo + "','" + poDate + "','" + comments + "','" + duration + "','" + workRatePercent + "','" + currency + "','" + hourlyRate + "','" + value + "')";
        newCmd.ExecuteNonQuery();
        MessageBox.Show("Contract has been successfully created", "Completed", MessageBoxButtons.OK, MessageBoxIcon.Information);
    } 
    ```

（通过这种方法，我只需插入 00,0000 持续时间（nb 小时）、工作率百分比、小时费率（货币货币）和值（货币货币））

*   为了捕获我的文本框值并通过我的方法“createNewContrat”发送它们，我尝试了 Convert.ToDecimal(this.txtDuration.Text) 和许多其他对我来说似乎不错的东西，但我无法理解机制，我我当然没有使用最实用/最聪明的解决方案......

我不断收到以下错误；

> *System.FormatException：Le format de la chaîne d'entrée est 不正确。**= 输入/输入字符串的格式不正确**
> à System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
> à System.Number.ParseDecimal(String value, NumberStyles options, NumberFormatInfo numfmt)
> à System.Convert.ToDecimal（字符串值）*

你会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:34:28.313

首先，`using`在处理和所有其他实现的类时`SqlConnection`总是`SqlCommand`使用它，`IDisposable`只需阅读更多关于它的信息。

第二件事，始终使用参数，`SqlCommand`并且永远不要将值作为字符串传递给 sql 字符串。这是一个严重的安全问题。除了这些参数之外，还可以使您的代码人性化！

```
// Always use (using) when dealing with Sql Connections and Commands
using (sqlConnection conn = new SqlConnection())
{
    conn.Open();

    using (SqlCommand newCmd = new SqlCommand(conn))
    {
        newCmd.CommandType = CommandType.Text;

        newCmd.CommandText = 
              @"INSERT INTO tblContracts (CreatedById, CreationDate, EmployeeId, Role, ContractType, StartDate, EndDate, Agency, LineManager, ReportTo, CostCenter, FunctionEng, AtrNo, AtrDate, PrNo, PrDate, PoNo, PoDate, Comments, Duration, WorkRatePercent, Currency, HourlyRate, Value) 
              VALUES (@UserID, @CreationDate, @EmployeeID, @Role.....etc)";

        // for security reasons (Sql Injection attacks) always use parameters
        newCmd.Parameters.Add("@UserID", SqlDbType.NVarChar, 50)
             .Value = connectedUser.getUserId();

        newCmd.Parameters.Add("@CreationDate", SqlDbType.DateTime)
             .Value = DateTime.Now;

        // To add a decimal value from TextBox
        newCmd.Parameters.Add("@SomeValue", SqlDbType.Decimal)
             .Value = System.Convert.ToDecimal(txtValueTextBox.Text);

        // complete the rest of the parameters
        // ........

        newCmd.ExecuteNonQuery();

        MessageBox.Show("Contract has been successfully created", "Completed", MessageBoxButtons.OK, MessageBoxIcon.Information);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:59:54.783

这不是您问题的直接答案，但请（！）用这个替换这个丑陋的方法：

为您的合同创建一个类。这将使处理合同变得更加容易。如果您有几种方法以某种方式处理合同，那么当向合同添加属性时，您不必更改所有这些方法的几乎无穷无尽的参数列表。

```
public class Contract
{
    public int EmployeeID { get; set; }
    public string Agency { get; set; }
    public string Role { get; set; }
    ... and so on
} 
```

并将方法签名更改为

```
public void CreateNewContract(Contract contract) 
```

从数据库加载合同的方法的标头看起来像这样

```
public List<Contract> LoadAllContracts()

// Assuming contractID is the primary key
public Contract LoadContractByID(int contractID) 
```

比返回 1000 个变量要容易得多！

您可以创建一个新合同

```
var contract = new Contract {
    EmployeeID = 22,
    Agency = "unknown",
    Role = "important", 
    ...
}; 
```

* * *

另外（正如其他人已经指出的那样）使用命令参数。

```
newCmd.Parameters.AddWithValue("@EmployeeID", contract.EmployeeID);
newCmd.Parameters.AddWithValue("@Agency", contract.Agency);
newCmd.Parameters.AddWithValue("@Role", contract.Role); 
```

（HaLaBi 的帖子展示了如何制定插入命令字符串。）

# jquery - 在 ASP.NET MVC 中嵌入外部网站的内容

> ID：13732670
> 
> 赞同：0
> 
> 时间：2012-12-05T21:21:41.957
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-2

可以使用哪些技术将外部网站的内容嵌入到 ASP.NET MVC 的 contentplaceholder 中？它类似于 ASP 的 iFrame。我知道如何托管第一页，但我不知道如何使外部站点中的链接页面保留在 MVC 应用程序的 contentplaceholder 中。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:29:39.697

iframe 是完全有效的 HTML，因此它在 MVC 应用程序中完全有效。

只需在 contentplaceholder 中放置一个 iframe 并将其`src`属性分配给所需的 URL。

# orchardcms - 使用 Orchard CMS 主题

> ID：13732671
> 
> 赞同：1
> 
> 时间：2012-12-05T21:21:43.160
> 
> 标签：orchardcms

我正在努力使用 Orchard CMS 快速构建一个网站。我的网站将使用自定义主题。我在 Visual Studio 中编辑这个主题。当我更新我的“Layout-url-homepage.cshtml”文件时，我的更改似乎永远不会发生。似乎必须有一种更优雅的方式来更新主题并更快地对其进行测试。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:46:50.370

您可能没有启用 url 替代功能。或者你设置缓存过于激进。以其他方式立即反映对模板的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:00:14.283

您还可以使用 Rickard Magnusson 的“主题编辑器”模块来更改特定页面的布局。你可以在这篇文章中看到如何做到这一点。 [http://support.bind.pt/entries/21855492-Assigning-a-layout-to-a-single-page](http://support.bind.pt/entries/21855492-Assigning-a-layout-to-a-single-page)

# node.js - phonegap 中的 Websockets 和一个使用 socket.io 的应用程序

> ID：13732677
> 
> 赞同：2
> 
> 时间：2012-12-05T21:22:04.077
> 
> 标签：node.js, cordova, websocket, socket.io

我们正在开发一个 phonegap 应用程序，并将 node.js 与 socket.io 结合使用。我们知道 phonegap 还不支持 websocket，但是有一些方法可以让它们工作（https://github.com/anismiles/websocket-android-phonegap 和[http://anismiles.wordpress.com/2011 /02/03/websocket-support-in-android%E2%80%99s-phonegap-apps/](http://anismiles.wordpress.com/2011/02/03/websocket-support-in-android%E2%80%99s-phonegap-apps/) )

唯一的问题是，这些示例通过覆盖通常 socket.io 为您处理的事情来使它们工作。

我的问题：当您的应用程序使用 socket.io 时，有什么方法可以在 phonegap 中使用 websockets？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:34:54.223

> 当您的应用程序使用 socket.io 时，有什么方法可以在 phonegap 中使用 websockets？

是的。这里有一个关于 Phonegap 中通用 WebSockets 的类似问题。我的回答： [https ://stackoverflow.com/a/13527585/39904](https://stackoverflow.com/a/13527585/39904)

我在示例中链接到的这个项目示例使用[Pusher](http://pusher.com) JavaScript 库，但您可以很容易地将其替换为 socket.io 库。

为了快速参考，这里是示例项目：[https ://github.com/pusher/pusher-phonegap-android](https://github.com/pusher/pusher-phonegap-android)

# objective-c - 无法在 NSURLConnection 上维护会话

> ID：13732679
> 
> 赞同：1
> 
> 时间：2012-12-05T21:22:07.260
> 
> 标签：objective-c, ios, mobile, mobile-safari, nsurlconnection

我正在尝试使用 NSURLConnection 使用我的用户名和密码进行连接和登录。我可以发出发布请求并收到回复，但我无法保持会话。在我提出请求后，我从网站收到这条消息：

> 该系统需要使用 HTTP cookie 来验证授权信息。我们的系统检测到您的浏览器已禁用 HTTP cookie 或不支持它们。请参阅浏览器中的帮助页面，了解有关如何正确配置浏览器以用于本系统的更多信息。

我建立连接的代码在这里：

```
NSMutableURLRequest *request = nil;
request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://loginsite.com"]];
[[NSHTTPCookieStorage sharedHTTPCookieStorage]setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways];

NSString *post = [NSString stringWithFormat:@"username=username&pass=password"];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
[request setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"];
[request setTimeoutInterval: 15];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:postData];

_urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[_urlConnection start]; 
```

如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:29:54.793

他们可能会检查您发送的用户代理标头。在这种情况下没有....

1）添加兼容的标头

```
 NSString *myAgent = @"SOME AGENT StRING";
    [request setValue:myAgent forHTTPHeaderField:@"User-Agent"]; 
```

例如来自 AFNetworking 的代理字符串

```
 #if __IPHONE_OS_VERSION_MIN_REQUIRED
        // User-Agent Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43
        [self setDefaultHeader:@"User-Agent" value:[NSString stringWithFormat:@"%@/%@ (%@; iOS %@; Scale/%0.2f)", [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString *)kCFBundleExecutableKey] ?: [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString *)kCFBundleIdentifierKey], (__bridge id)CFBundleGetValueForInfoDictionaryKey(CFBundleGetMainBundle(), kCFBundleVersionKey) ?: [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString *)kCFBundleVersionKey], [[UIDevice currentDevice] model], [[UIDevice currentDevice] systemVersion], ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] ? [[UIScreen mainScreen] scale] : 1.0f)]];
    #elif __MAC_OS_X_VERSION_MIN_REQUIRED
        [self setDefaultHeader:@"User-Agent" value:[NSString stringWithFormat:@"%@/%@ (Mac OS X %@)", [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString *)kCFBundleExecutableKey] ?: [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString *)kCFBundleIdentifierKey], [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"] ?: [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString *)kCFBundleVersionKey], [[NSProcessInfo processInfo] operatingSystemVersionString]]];
    #endif 
```

**2）获取响应cookie并在未来对主会话的请求中使用它们**

```
nextR.requestCookies = rLogin.responseCookies.mutableCopy; 
```

# javascript - 替代使用 eval 调用略有不同的函数名称？

> ID：13732683
> 
> 赞同：0
> 
> 时间：2012-12-05T21:22:15.787
> 
> 标签：javascript

我的问题是如何做到这一点，但我遇到了`eval`似乎可行的方法。有人告诉我`eval`是邪恶的，为什么我的解释太过分了，所以我的问题是：

像这样使用或其他方式有什么问题`eval`吗？

```
var condition1=false;
var condition2=true;
var condition3=false;
//etc

if (condition1){x = "1"}
else if (condition2){x = "2"}
else if (condition3){x = "3"};
//etc

var thing1= 11;
var thing2= 22;
var thing3= 33;
//etc

eval ("thing" + x) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:24:41.940

可能最好的解决方案是用数组替换所有这些变量：

```
thing = [11, 22, 33 ...]; 
```

那么你可以这样做：

```
thing[x];  // either change your code to zero indexed or subtract 1 here 
```

如果变量是全局的，你也可以这样做：

```
window["thing"+x]; 
```

但理想情况下，您不希望这些是全球性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:24:19.653

你可以有一个对象叫做`things`

```
var things = {
   "1": 11,
   "2": 22,
   "3": 33
} 
```

然后你可以用

```
things[x] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:16:27.080

由于您正在构建要`eval()`自己编写的字符串，因此不会涉及任何真正的危险。`eval()`当你开始'ing 用户输入时，事情开始变得糟糕。

我会推荐数组。所以你可以这样做：

```
var conditions=[false, true, false];
for(var i=0;i<conditions.length;i++)
    if(condition[i])x=i+1; //i=0, 1, 2, ...; x=1, 2, 3, ...
eval("thing"+x+"()"); //don't forget the "()"! 
```

# java - Spring表单中可变数量的字段

> ID：13732688
> 
> 赞同：3
> 
> 时间：2012-12-05T21:22:30.333
> 
> 标签：java, forms, spring, jsp

我需要在表单中放入可变数量的相同类型的字段。假设我有一个命令对象

```
public class Person
  String name;
  String surname;

// getters and setters 
```

和一个jsp

```
<form:form command="personCommand">
  <form:input path="name"/>
  <form:input path="surname"/>
</form:form> 
```

当我有静态数量的字段时，这是标准方式。但是如果我有类似的东西怎么办

```
<form:form command="personCommand">
  <c:forEach items="${persons}">
    <form:input path="name"/>
    <form:input path="surname"/>
  </c:forEach>
</form:form> 
```

（这当然是不正确的）其中人数事先不知道？Spring中是否有某种方法可以绑定数组或列表中的字段？或者某种解决方法（目前我正在使用 javascript 连接字段并以编程方式将它们分开，这是丑陋的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:54:38.637

You can create a class(PersonWrapper) and include the List of persons as a variable in that class. Then in JSP, you can use the following syntax

```
<c:forEach items="${personWrapper.persons}" varStatus="i">
  <form:input path="persons[${i.index}].name"/>
  <form:input path="persons[${i.index}].surname"/>
</c:forEach> 
```

Then in the controller, you can get the values in List of persons

# java - 使用多个功能分支时处理架构更改

> ID：13732697
> 
> 赞同：5
> 
> 时间：2012-12-05T21:22:58.570
> 
> 标签：java, database, hibernate, junit, dbunit

除了为开发中的每个分支创建单独的数据库之外，是否有另一种方法或某种工具来处理多个并行功能分支中的数据库模式更改？

IE。根据一些配置或脚本在内存中启动一个数据库，并在运行测试之前使用 DbUnit 填充。

这个问题专门针对单元测试，但也适用于 UAT。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:47:32.947

你看过H2数据库引擎吗？如果您使用的是 Spring，您可以尝试此处记录的方法：[Unit Testing JPA with in-memory H2 database](http://boplicity.nl/confluence/display/Java/Unit+testing+JPA+-+Hibernate+components+with+in-memory+H2+database)（有用的信息，即使不使用 Spring）。快速谷歌搜索产生了这篇[博文](http://jsicotte.wordpress.com/2011/02/23/h2-and-dbunit/)，表明肯定有人在使用 H2 和 DbUnit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:05:33.840

我们正在使用[dbdeploy](http://dbdeploy.com/)，它对我们非常有效。它有助于以版本控制方式管理数据库创建脚本。它仍然需要一些工作（例如，如果应用程序同时部署在多个节点上，则进行并发 sql 迁移），但除此之外它开箱即用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T20:21:56.770

很长一段时间后，似乎[Liquibase](http://www.liquibase.org/)*与*DbUnit等其他工具结合使用，应该能够完成我最初提出的要求。

感谢所有其他建议。

# jquery - 将一个类的所有成员添加到另一个类

> ID：13732699
> 
> 赞同：0
> 
> 时间：2012-12-05T21:23:10.763
> 
> 标签：jquery

使用 JQuery，是否可以将一个类的所有成员添加到另一个类？在这里，我试图将类的所有成员添加`ui-widget-content`到类中`draggable`。

[http://jsfiddle.net/j8czR/](http://jsfiddle.net/j8czR/)

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Draggable - Auto-scroll</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    #draggable, #draggable2, #draggable3 { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 0 10px 10px 0; }
    </style>
    <script>
    $(function() {
       $(".draggable").draggable({ scroll: true });
    });
    </script>
</head>
<body>

<div id="draggable" class="ui-widget-content">
    <p>Scroll set to true, default settings</p>
</div>

<div style="height: 5000px; width: 1px;"></div>

</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:24:13.737

您可以使用[.addClass()](http://api.jquery.com/addClass/)方法添加指定的类..

```
$('.ui-widget-content').addClass('draggable'); 
```

如果您想根据 id 将类添加到指定的 div 中，您可以这样做

```
$("#draggable,#draggable2,#draggable3").addClass("draggable"); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/j8czR/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:24:07.890

似乎可以使用该`addClass( classname )`方法执行此操作，如下所述：http: [//api.jquery.com/addClass/](http://api.jquery.com/addClass/)

# networking - [如果可能的话]我如何在远程 UNIX 服务器中购买空间？

> ID：13732700
> 
> 赞同：-4
> 
> 时间：2012-12-05T21:23:16.387
> 
> 标签：networking

我想在运行 Linux 的远程服务器中获得一些空间。这个想法是创建我的自定义脚本并在远程服务器上运行它们。想法是这样的：我坐在我的 Windows 机器上上课；我启动终端并连接到某个远程主机，然后突然进入 Linux 环境。那么是否可以在远程 Linux/UNIX 服务器中购买私人空间？

【对网络一窍不通，所以真的不知道这个问题是傻还是超级简单】

吉尔贝茨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:47:07.113

您可以采取稍微不同的方法，下载 Oracle 的 VirtualBox 软件并在其中运行虚拟 Linux 环境。这将允许您保留当前的操作系统，拥有 Linux 环境并节省您的资金。

[Oracle VirtualBox 下载](https://www.virtualbox.org/wiki/Downloads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:41:54.277

可以使用 SSH（在 windows 中使用 PuTTY）。您可以使用基于 Web 的服务器（如 Web 主机），它可以提供 shell 访问权限，我知道 Hostgator 可以。或者在 Amazon Web Services 上获取一个微型实例。或者更好的是，学生只需设置一个虚拟机。

# javascript - 从字符串中删除图像标签

> ID：13732703
> 
> 赞同：0
> 
> 时间：2012-12-05T21:23:25.660
> 
> 标签：javascript, jquery

我正在尝试`<img>`从返回字符串的数据库调用中删除标签。

字符串示例如下

```
dummy textdummy text dummy text dummy text dummy text
<img src='text.jpg'/>
dummy textdummy text 
<img src='text1.jpg'/>dummy textdummy text dummy textdummy text 
dummy textdummy text 
<img src='text3.jpg'/> 
```

`image tag`和的位置`image src`可能会有所不同，但主要目的是删除`<img>`标签。

`replace`在我的情况下不起作用

有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:35:46.127

如果我理解正确，您只想删除 html 标签并将文本保留在客户端？为什么不把它变成一个 jQuery 对象并使用 .text() 方法

```
$(yourstring).text();​ 
```

[http://jsfiddle.net/DDjFz/](http://jsfiddle.net/DDjFz/)

除非您要保留其他标签，否则我将发布另一个答案

编辑：

如果您只想删除图像元素..您可以使用过滤器功能

```
var newString = $(x).filter(function() {
     return this.tagName != 'IMG';
}).text(); 
```

[http://jsfiddle.net/47bcJ/](http://jsfiddle.net/47bcJ/)

从技术上讲`$(x).filter(':not(img)').text()`应该可行，但不确定为什么不可行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:28:47.540

如果您使用 PHP 从数据库中返回数据，您是否考虑过[strip_tags](http://php.net/manual/en/function.strip-tags.php)？它删除了 HTML 标签（和 PHP，也是！）

或者您正在寻找 JavaScript 解决方案？试试[这个](http://phpjs.org/functions/strip_tags/)。还有很多其他的 PHP 函数也移植到了 JavaScript！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:44:22.147

这是一种删除特定`img`元素的方法：http: [//jsfiddle.net/DDjFz/2/](http://jsfiddle.net/DDjFz/2/)

```
<img src='http://placekitten.com/g/200/300'/>
<ul>
  <li>dummy textdummy text dummy text dummy text dummy text <img src='http://placehold.it/350x150'/></li>
  <li>dummy textdummy text <img src='http://placekitten.com/200/300'/></li>
  <li>dummy textdummy text dummy textdummy text dummy textdummy text <img src='http://lorempixel.com/400/200/'/></li>
</ul> 
```

使用此脚本：

```
$('li > img').remove(); 
```

如果您想删除所有这些，您可以使用：

```
$('img').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T22:00:59.227

你可以尝试这样的事情。

```
$(document).ready(function(){
    $("img").each(function(){
        var i = $(this).attr("src");
        $(".display").append('<p>' + i + '</p>'); 
    });
}); 
```

通过附加，您可以在 html 页面中看到结果。

# java - 我无法让我的 JTable 显示任何内容

> ID：13732705
> 
> 赞同：1
> 
> 时间：2012-12-05T21:23:28.713
> 
> 标签：java, swing, jtable, jpanel, jscrollpane

我无法让我的 gui 显示 Jtable，为什么我不知道并且我没有收到任何错误，当我在屏幕上打印某些内容时，我得到 9 列。所以我得到数据。但我做错了什么我对此一无所知。

我的 GUIOdreHandler 看起来像这样

```
public GUIOrdreHandler(){

            KaldSQL ks = new KaldSQL();
            ResultSet rs;

        }

        public static DefaultTableModel buildTableModel(ResultSet rs)
                throws SQLException {

            java.sql.ResultSetMetaData metaData = rs.getMetaData();

            // names of columns
            Vector<String> columnNames = new Vector<String>();
            int columnCount = metaData.getColumnCount();
            for (int column = 1; column <= columnCount; column++) {
                columnNames.add(metaData.getColumnName(column));
                System.out.println(columnCount);
            }

            // data of the table
            Vector<Vector<Object>> data = new Vector<Vector<Object>>();
            while (rs.next()) {
                Vector<Object> vector = new Vector<Object>();
                for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
                    vector.add(rs.getObject(columnIndex));
                }
                data.add(vector);
            }

            return new DefaultTableModel(data, columnNames);

            } 
```

我的 GUIHentOrdre 看起来像这样

```
public GUIHentOrdre(){

        try {
            con = ks.connectNow();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        JPanel info = new JPanel();
        info.setLayout(new BorderLayout());
        button = new JButton("button");
        info.add(button, BorderLayout.CENTER);
        add(button);
        ResultSet rs = ks.Hentalleordreliste(con);
        GUIOrdreHandler gh = new GUIOrdreHandler();

        try {
            table = new JTable(gh.buildTableModel(rs));

            System.out.println(table);
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        info.add(table, BorderLayout.CENTER);
        add(table);
    }
} 
```

> 我已经尝试过任何谷歌，书北工程，所以请帮助我：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:01:27.760

仅关于您的代码中的错误

```
JPanel info = new JPanel();
info.setLayout(new BorderLayout());
button = new JButton("button");
info.add(button, BorderLayout.CENTER);
add(button); 
```

*   删除关于`add(button);`的代码行（代码不完全在谈论）

*   更改`info.add(button, BorderLayout.CENTER);`为`NORTH`或`SOUTH`

*   您没有正确添加`JTable`(in `JScrollPane`)`JPanel`

伪代码

```
JPanel info = new JPanel();
info.setLayout(new BorderLayout());
button = new JButton("button");
info.add(button, BorderLayout.SOUTH);
JTable table = new JTable (ClassOrVoidOrModelNameReturnsTableModel)
JScrollPane scroll = new JScrollPane(table)
info.add(scroll, BorderLayout.CENTER); 
```

*   但这上面没有什么可以解决的，因为你的问题应该是一些异常来自`JDBC`

    1.  不要在-块`JComponent`内创建 s ，之前准备好这个，更好的可能是`try``catch``Object``local variable`

    2.  不要在里面创建`XxxModel`for `JComponent`s `try`-`catch`块，`Object`之前准备好这个，更好的可能是`local variable`

    3.  初始化`XxxModel`及其 `JComponent`，然后将数据加载`JDBC`到`XxxModel`

    4.  添加`rs.close()`到`finally`块（`try`- `catch`- `finally`）

*   不要重新发明轮子，使用

    1.  [结果集表模型](http://www.java2s.com/Code/Java/Database-SQL-JDBC/DatabaseBrowser.htm)

    2.  [@camickr 来自数据库的表](http://tips4java.wordpress.com/2009/03/12/table-from-database/)

# c# - 本机 dll 调用始终使我的解决方案中的一个项目崩溃，但另一个项目却没有（Windows 7 64 位）

> ID：13732708
> 
> 赞同：0
> 
> 时间：2012-12-05T21:23:41.087
> 
> 标签：c#, .net, lua, marshalling, unmarshalling

基本上我使用的是来自 c# 的 lua（用于脚本的本机 dll）。我按照教程使用正确的调用约定重新编译 lua dll 并导入所需的函数。

每次我调用它时，都会有一个特定的函数使我的程序崩溃。它从本机环境中获取一个字符串（我之前使用不同的 api 调用将它放在那里）并再次将其作为托管字符串返回。

我有 3 个单独的 .net 项目。第一个项目是一个共享项目，它将所有本地调用都漂亮整洁地包装到一个 .net dll 中。另外两个使用共享项目。一个是使用 Windows.Forms 的 GUI 应用程序，另一个是控制台应用程序。

控制台应用程序一切正常，但每次我从 GUI 项目中调用我提到的那个函数时，它都会立即崩溃，没有异常或错误。我在调试时尝试从监视窗格调用该函数，它说：“函数评估已被放弃”，几秒钟后调试器退出。

我 100% 肯定，我从 GUI 程序和控制台程序调用它的方式没有区别，即使一个有效而另一个无效。我应该提到我主要在 Windows 7 64 位上进行开发，但是当我在 Windows xp 32 位的笔记本电脑上进行调试时，gui 程序神秘地工作了。

我怀疑这个问题与编组（诚然我对此知之甚少）或我不知道的其他一些细节有关。在推入本机环境之前，我确实将字符串编组为 UnmanagedType.LPStr。

我不是在寻找一个全面的答案或任何东西（尽管如果你有一个，无论如何，让我们听听吧）。我只是在寻找有关如何解决此类问题的一些方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:36:56.703

检查 Console 和 WinForms 项目的平台目标项目设置。我敢肯定，其中一个具有“x86”，一个具有“任何 CPU”。

# javascript - 将图像存储为 Javascript 对象属性

> ID：13732710
> 
> 赞同：0
> 
> 时间：2012-12-05T21:23:43.643
> 
> 标签：javascript, object

我想知道是否可以将图像存储为 js 对象的属性。例如，我目前有：

```
twitter = {h:35, w:35, x:0, y:0, src: "./twitter.png"};
tw = new Image;
tw.src = twitter.src; 
```

然后在程序中

```
context.drawImage(tw, twitter.x, twitter.y, twitter.w, twitter.h); 
```

但我想知道是否可以将图像 src 组合到 twitter 对象中，以便可以像这样调用它

```
context.drawImage(twitter.src, twitter.x, twitter.y, twitter.w, twitter.h); 
```

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:56:10.290

是的，`new Image`返回一个对象，您可以将任何对象作为属性值。所以试试这个：

```
twitter = {h:35, w:35, x:0, y:0, src: "./twitter.png"};
tw = new Image;
tw.src = twitter.src;
twitter.src = tw;
context.drawImage(twitter.src, twitter.x, twitter.y, twitter.w, twitter.h); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:26:10.227

您可以使用画布的`toDataURL()`方法来获取图像的原始 base64 字节并将其存储在对象中

# file-upload - 绕过 max_file_uploads 限制？

> ID：13732711
> 
> 赞同：0
> 
> 时间：2012-12-05T21:23:54.393
> 
> 标签：file-upload, limit, php, shared-hosting

我有一个 HTML 表单，其中包含上传图像和相应`input type="file"`字段的列表。

随着列表的增长，它开始达到 max_file_uploads 限制，该限制通常不能在共享/相互托管上进行修改。

我可以采取什么方法来解决这个问题？

PS：考虑交错方法可以通过填充数据库来完成，但目前尚不清楚我将如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:29:32.300

您可以使用 HTML5 或 Flash 上传器一次上传一个文件。这样，限制将仅是单个文件的限制。你可以尝试像[Uploadify](http://www.uploadify.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:30:36.927

在您的 php.ini 中更改此行 ...传递您要允许的文件数

max_file_uploads=50

# asp.net - Grid.SelectedRow.Cells.Item(1).Text.ToString 返回未编码的字符，如 Bol& #237;vares

> ID：13732712
> 
> 赞同：4
> 
> 时间：2012-12-05T21:23:57.860
> 
> 标签：asp.net, vb.net, gridview, encoding

我正在用asp.net中gridview的选定行中的数据填写表格

```
TXTName.Text = Grid.SelectedRow.Cells.Item(1).Text.ToString 
```

回归 : Bolívares Fuertes

```
TXTName.Text = Grid.DataKeys(grdMaestro.SelectedRow.RowIndex).Values(1).ToString 
```

返回：“Bolívares Fuertes”

第一种方式，带有重音符号的字母显示为 &#XXX，第二种方式效果很好。第二种方法的问题是我必须在[datakeynames](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx "数据键名")属性中包含所有行，如果我最终使用 gridview 控制器的自动更新和删除功能，它可能会导致一些问题。

注意：我在“Bol&”**和**“#237;vares Fuertes”之间插入了一个空格，因为 stackoverflow 在预览中修复了它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T21:34:20.037

替换这个

```
TXTName.Text = Grid.SelectedRow.Cells.Item(1).Text.ToString 
```

和

```
TXTName.Text = HttpUtility.HtmlDecode(Grid.SelectedRow.Cells.Item(1).Text.ToString) 
```

看看它现在是否有效。

祝你好运

# javascript - 重用 jQuery.post() / jQuery.Deferred() 对象

> ID：13732713
> 
> 赞同：7
> 
> 时间：2012-12-05T21:24:04.007
> 
> 标签：javascript, jquery, ajax, deferred

我正在寻找的最简单的例子是：

```
var messageLoader = $.post("api/user/messages", {api:data})

messageLoader.done(function(data){
   //do something 
}); 
```

这非常有效，但只有一次。如果我想更新数据，我必须重新定义一切。

我似乎找不到任何让我重新启动它的延迟对象的调用。即`messageLoader.redo()`，理想情况下会重新执行 POST 请求，然后调用相同的“完成”处理程序，而无需我重新定义它。

我可以把它全部放在一个函数中，然后再次调用该函数，但这不是我想要的，因为我还想这样做：

```
var messageLoader = $.post("api/user/messages", {api:data})
var friendRequestLoader = $.post("api/user/friendrequests", {api:data})

$.when(messagesLoader, friendRequestLoader)
    .done(function (messages, friendRequests) {
        // update display of messages and friend requests
        // attach Handlers
    });

$("#updateMessages").click(function(){
    messageLoader.redo() // This doesn't exist
}) 
```

这个想法是单击`$("#updateMessages")`将重新执行该请求，然后`$.when()`处理程序将使用新`messageLoader`数据和原始`friendRequestLoader`数据。

我在文档中查看了类似的内容，但没有找到任何东西。也许这里有人知道它是否存在，或者知道完成同样事情的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:51:42.113

我很确定 Deferred 类并不是按照您想要的方式设计的，因为它们旨在成为一次性使用的对象。我什至在 jQueryConf 上参加了有关 Deferreds 的整个会议，甚至没有提到重用它们。

此外，您可以从 Deferred API 页面中看到：

```
http://api.jquery.com/category/deferred-object/ 
```

没有重启方法。您*也许*可以手动更改 Deferred 的属性以模拟“重新启动”它，但实际上我认为您现在应该创建自己的类，因为您确实在寻找 Deferred 不提供的东西。

您必须记住，Deferred 的设计目的是让您可以说“嘿 Deferred，去做某事”（`new Deferred().when(something)`），然后您可以说“嘿 Deferred，完成后做 X”（`deferred.then(x)`）。现在，当您说“完成时”时，即。当您`.then`拨打电话时，Deferred 可以处于两种状态：已完成或未完成，但在任何一种情况下都可以调用（如果已完成，则立即解析，否则等待触发）。

现在，如果一个 Deferred 可以有第三种状态（“完成但重新启动”），`.then`调用将不知道该做什么：“完成但重新启动”是否意味着它应该触发它？答案取决于您是`.then`在重新启动呼叫之前还是之后拨打电话，并且您希望看到一切都有可能变得相当复杂（特别是如果您允许多次重新启动）。

jQuery人员没有处理所有这些（这些都不需要`$.ajax`），而是使用（相对简单的）当前 Deferred 实现，我认为这是他们的正确选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:13:19.707

它就像创建一个函数并调用它一样简单。由于 http 是静态协议，因此无法保持 $.post 活动。

```
var messageLoader;
var friendRequestLoader;
updateMessages();

function updateMessages(){
 messageLoader= $.post("api/user/messages", {api:data})
 friendRequestLoader = $.post("api/user/friendrequests", {api:data})
}

$.when(messagesLoader, friendRequestLoader)
    .done(function (messages, friendRequests) {
        // update display of messages and friend requests
        // attach Handlers
    });

$("#updateMessages").click(function(){
    updateMessages(); // This doesn't exist
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:17:18.757

你可以试试这个方法：

```
function Defer() {
    $.when(messageLoader, friendRequestLoader)
        .done(function (messages, friendRequests) {
            console.log("M : " + messages[0].test);   
            console.log("F : " + friendRequests[0].test);  
        });
}
$("#updateMessages").click(function(){
    messageLoader = $.post("api/user/messages", {api:data});
    Defer();          
}); 
```

这将允许您重新加载一个，同时保留另一个数据。

# xml - 循环遍历 xml 元素

> ID：13732715
> 
> 赞同：15
> 
> 时间：2012-12-05T21:24:09.197
> 
> 标签：xml, powershell, foreach, xml-parsing, powershell-2.0

我有以下内容：

```
$aMyArray = $null

[xml]$userfile = Get-Content C:\AppSense\Scripts\AmPolicyConversion\AM_dev.xml

$i = 0
FOREACH ($j in $userfile.ChildNodes){

    FOREACH($k in $j.DocumentElement) {

    }

    $i = $i + 1
} 
```

我试图弄清楚如何遍历powershell中的每个元素。

然后检查元素上的 SID 属性。

如果存在，则获取属性值并将该值放入对象中，对于同一元素，获取第二个属性 DISPLAYNAME 并将其放入同一对象中。我们将创建一个对象数组。

我知道我很遥远，但希望你能提供帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T21:56:51.660

使用 XPATH 来查找具有 SID 属性的所有节点，如下所示：

```
$objs = @()
$nodes = $userfile.SelectNodes("//*[@SID]")
foreach ($node in $nodes) {
    $sid = $node.attributes['SID'].value
    $dispName = $node.attributes['DISPLAYNAME'].value
    $obj = new-object psobject -prop @{SID=$sid;DISPNAME=$dispName}
    $objs += $obj
}
$objs 
```

这是一个输出示例：

```
$xml = [xml]@"
<doc>
  <foo SID='foosid' DISPLAYNAME="foodisp">
    <bar SID='barsid' DISPLAYNAME="bardisp"/>
    <baz>
      <blech SID='blechsid' DISPLAYNAME="blechdisp"/>
    </baz>
  </foo>
</doc>
"@

$objs = @()
$nodes = $xml.SelectNodes("//*[@SID]")
foreach ($node in $nodes) {
    $sid = $node.attributes['SID'].value
    $dispName = $node.attributes['DISPLAYNAME'].value
    $obj = new-object psobject -prop @{SID=$sid;DISPNAME=$dispName}
    $objs += $obj
}
$objs 
```

输出：

```
SID                       DISPNAME                
---                       --------                
foosid                    foodisp                 
barsid                    bardisp                 
blechsid                  blechdisp 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T17:50:45.900

您还可以在遍历子节点时引用子节点：

```
$j.LocalName (the name of the child element)
$j.InnerXml  (the Xml content of the child node) 
```

# ruby-on-rails - ActiveRecord 命名范围的两个关系到一个模型

> ID：13732720
> 
> 赞同：2
> 
> 时间：2012-12-05T21:24:29.637
> 
> 标签：ruby-on-rails, ruby, activerecord, scope, named-scope

我正在使用两个不同模型的多态关联到一个标记模型。很好，很简单。但是，这两个模型中的一个也属于另一个模型。

```
class Facility < ActiveRecord::Base
  has_many :units
  has_many :taggings, :as => :taggable
  has_many :tags, :through => :taggings
end
class Unit < ActiveRecord::Base
  belongs_to :facility
  has_many :taggings, :as => :taggable
  has_many :tags, :through => :taggings
end
class Tagging < ActiveRecord::Base
  belongs_to :taggable, :polymorphic => true
  belongs_to :tag
end
class Tag < ActiveRecord::Base
  has_many :taggings
end 
```

我正在尝试编写一个范围来检索某个标签的所有单元，包括那些属于带有该标签的设施的单元。这不起作用：

```
named_scope :by_tag_id, lambda {|tag_id| 
{ 
  :select => "DISTINCT units.*",
  :joins => [:taggings, {:facility => :taggings}],
  :conditions => ["taggings.tag_id = ? OR taggings_facilities.tag_id = ?", 
    tag_id.to_i, tag_id.to_i] 
}} 
```

对于那个named_scope，我只得到那些有标签的单位。

有什么想法吗？我在这里遗漏了一些明显的东西吗？

**更新**

不幸的是，我使用的是 Rails 2.3.x、Ruby 1.8.7。

我现在正在尝试一些具有更明确写入连接的技术。

**更新 2**

*我无法回答我自己的问题，因为我没有名声。哎呀。我真的应该贡献更多...*

好吧，我想我只需要再戳一下并推动一下。这是我的工作：

```
named_scope :by_tag_id, lambda {|tag_id| 
  { 
    :select => "DISTINCT units.*",
    :joins => [
        "INNER JOIN facilities as bti_facilities ON units.facility_id = bti_facilities.id",
        "LEFT JOIN taggings AS bti_facilities_taggings 
          ON bti_facilities_taggings.taggable_id = bti_facilities.id AND bti_facilities_taggings.taggable_type = 'Facility'",
        "LEFT JOIN taggings AS bti_units_taggings ON bti_units_taggings.taggable_id = units.id AND bti_units_taggings.taggable_type = 'Unit'",
      ],
    :conditions => ["bti_units_taggings.tag_id = ? OR bti_facilities_taggings.tag_id = ?", tag_id.to_i, tag_id.to_i] 
  }
} 
```

我正在使用一些故意混淆的表别名，以避免与其他命名范围发生冲突。（我没有设施别名来启动，我在查询中遇到了一个 SQL 错误，我试图链接到另一个引用设施表的范围。）

如果有人有更好的答案，或者对我的方法有一些反馈，我很想**听听**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:09:05.420

我看到您已经回答了您的问题，但是如果您要使用`:include =>`而不是`:join =>`在原始查询中使用，它将生成一个`LEFT OUTER JOIN`. 也就是说，您可能不需要预先加载关联，只需对其进行查询，因此您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:42:47.200

我想知道你能不能写成这样？

```
named_scope :by_tag_id, lambda {|tag_id| 
  { 
    :select     => "DISTINCT units.*",
    :include    => [:tags, {:facility => :taggings}],
    :conditions => { :tags => { :tag_id => tag_id } }
  }
} 
```

# javascript - 如何将一个数组从 struts2 散列到一个未指定大小的 javascript 数组？

> ID：13732722
> 
> 赞同：3
> 
> 时间：2012-12-05T21:24:35.220
> 
> 标签：javascript, for-loop, struts2, hashtable

我正在尝试根据用户在下拉框中选择的内容更新图像（无需单击提交或任何内容），并且我已经让它工作了，除了一件事 - 它有一个上限选项可用：

```
var hash = new Array();
hash['<s:property value="itemLists[1][0].id"/>']=0;
hash['<s:property value="itemLists[1][1].id"/>']=1;
hash['<s:property value="itemLists[1][2].id"/>']=2;
hash['<s:property value="itemLists[1][3].id"/>']=3;
hash['<s:property value="itemLists[1][4].id"/>']=4;
hash['<s:property value="itemLists[1][5].id"/>']=5;
hash['<s:property value="itemLists[1][6].id"/>']=6;
hash['<s:property value="itemLists[1][7].id"/>']=7;
var item= new Array();
item[0] = '<s:property value="itemLists[1][0].image"/>';
item[1] = '<s:property value="itemLists[1][1].image"/>';
item[2] = '<s:property value="itemLists[1][2].image"/>';
item[3] = '<s:property value="itemLists[1][3].image"/>';
item[4] = '<s:property value="itemLists[1][4].image"/>';
item[5] = '<s:property value="itemLists[1][5].image"/>';
item[6] = '<s:property value="itemLists[1][6].image"/>';
item[7] = '<s:property value="itemLists[1][7].image"/>'; 
```

这显然太具体了，我想知道是否有办法说为列表中的每个项目创建一个 for 循环。问题来自struts2 -`'<s:property value="itemLists[1][#].id"/>'`在页面首次加载时进行评估，并且“字符串”不能分成两部分，中间有一个迭代器变量。有没有办法在 Javascript 函数中使用带有 struts2 数组的 for 循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:35:30.057

上述循环之一的大约（阅读：未经测试）：

```
var items = [];
<s:iterator list="itemLists[1]" var="item" varStatus="stat">
  items.push('<s:property value="#item[#stat.index].image"/>');
</s:iterator> 
```

^(*您还需要对字符串进行 JS 转义以避免损坏。*)

* * *

我质疑单独的数组。JS 具有匿名对象表示法，例如`{ id: 0, image: "ohai" }`. 我会用那个；它使事情更容易处理。它看起来更接近这个：

```
var items = [];
<s:iterator list="itemLists[1]" var="item" varStatus="stat">
  items.push({
    id:    '<s:property value="#item[#stat.index].id"/>',
    image: '<s:property value="#item[#stat.index].image"/>
  });
</s:iterator> 
```

所有 JSP 标记所做的就是创建要发送到客户端的文本。

文本是什么并不重要——它没有理由不能是 JavaScript 源代码。

您还可以将数据公开为 JSON/直接 JS 并避免很多忙碌的工作。

# java - 在 MongoDB Map Reduce 函数中查询

> ID：13732735
> 
> 赞同：1
> 
> 时间：2012-12-05T21:25:16.993
> 
> 标签：java, mongodb, mapreduce

我已经将大约 25 万条推文流式传输并保存到 MongoDB 中，在这里，我正在检索它，如您所见，基于推文中出现的单词或关键字。

```
Mongo mongo = new Mongo("localhost", 27017);
DB db = mongo.getDB("TwitterData");
DBCollection collection = db.getCollection("publicTweets");
BasicDBObject fields = new BasicDBObject().append("tweet", 1).append("_id", 0);
BasicDBObject query = new BasicDBObject("tweet", new BasicDBObject("$regex", "autobiography"));
DBCursor cur=collection.find(query,fields); 
```

我想做的是使用 Map-Reduce 并根据关键字对其进行分类并将其传递给 reduce 函数以计算每个类别下的推文数量，有点像你[在这里](http://architects.dzone.com/articles/getting-mapreduce-working/)看到的。在示例中，他计算的是页数，因为它是一个简单的数字。我想做类似的事情：

```
"if (this.tweet.contains("kword1")) "+
"category = 'kword1 tweets'; " + 
"else if (this.tweet.contains("kword2")) " + 
"category = 'kword2 tweets'; 
```

然后使用reduce函数来获取计数，就像在示例程序中一样。

我知道语法不正确，但这正是我想做的。有没有办法实现它？谢谢！

PS：哦，我正在用Java编码。因此，Java 语法将受到高度赞赏。谢谢！

发布的代码的输出是这样的：

```
{ "tweet" : "An autobiography is a book that reveals nothing bad about its writer except his memory."}
{ "tweet" : "I refuse to read anything that's not real the only thing I've read since biff books is Jordan's autobiography #lol"}
{ "tweet" : "well we've had the 2012 publication of Ashley's Good Books, I predict 2013 will be seeing an autobiography ;)"} 
```

当然，这适用于所有带有“自传”一词的推文。我想在 map 函数中使用它，将其归类为“自传推文”（以及其他关键字），然后将其发送到 reduce 函数以计算所有内容并返回带有单词 in 的推文数量它。

就像是：

```
{"_id" : "Autobiography Tweets" , "value" : { "publicTweets" : 3.0}}
{"_id" : "Biography Tweets" , "value" : { "publicTweets" : 15.0}} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T03:16:30.047

您可能想尝试以下方法：

```
 String map = "function() { " +
                 "    var regex1 = new RegExp('autobiography', 'i'); " +
                 "    var regex2 = new RegExp('book', 'i'); " +
                 "    if (regex1.test(this.tweet) ) " +
                 "         emit('Autobiography Tweet', 1); " +
                 "    else if (regex2.test(this.tweet) ) " +
                 "         emit('Book Tweet', 1); " +
                 "    else " +
                 "       emit('Uncategorized Tweet', 1); " +
                 "}";

    String reduce = "function(key, values) { " +
                    "    return Array.sum(values); " +
                    "}";

    MapReduceCommand cmd = new MapReduceCommand(collection, map, reduce,
             null, MapReduceCommand.OutputType.INLINE, null);
    MapReduceOutput out = collection.mapReduce(cmd);

    try {
        for (DBObject o : out.results()) {

            System.out.println(o.toString());

       }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T11:15:17.603

尽管您已经接受了 Kay 的答案并且这个答案可能会被忽略，但我想提出一个替代解决方案。

MongoDB 文档中有一篇关于如何[在 Mongo 中执行全文搜索](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)的文章。为了允许基于文本的字段快速搜索单个单词，他们建议通过将文本字段拆分为单个单词的数组来准备文档，将这些数组与全文一起存储在文档中，并在此基础上创建索引大批。

之后，您可以非常快速地找到包含特定单词的所有文档，因为您的搜索查询可以 1\. 使用索引 2\. 不必使用正则表达式（这可能非常昂贵）。

# php - 将每个 _ 字符替换为 _ 字符后的大写字母

> ID：13732738
> 
> 赞同：2
> 
> 时间：2012-12-05T21:25:24.730
> 
> 标签：php, regex, string

我将如何解决这个问题：

我想像这样转换字符串：

```
some_words => someWords
some_more_text => someModeText 
```

希望你明白这一点，我需要用 X 替换每个 _x。

我现在有这样的事情：

```
$string = 'some_words';
$new = preg_replace('/_([a-z])/', strtoupper('$1'), $string); 
```

但这不起作用。我可以在 preg_replace 函数中使用内置的 PHP 函数吗？

我将如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:28:38.247

您可以使用[`preg_replace_callback()`](http://php.net/preg_match_callback)，如下所示：

```
$new = preg_replace_callback('/_([a-z])/', function( $match) { 
    return strtoupper( $match[1]);
}, $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:54:14.877

或者，如果您不想使用正则表达式，您可以简单地使用`explode/implode`

```
$string = 'some_words';
$string_array = explode('_', $string);
for ($i = 1; $i < count($string_array); $i++) {
    $string_array[$i] = ucfirst($string_array[$i]);
}
$string_camel_case = implode('', $string_array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T21:58:30.893

从[手册页中的评论`ucwords`](http://php.net/manual/en/function.ucwords.php#92092)

```
$string = 'some_words';
$new = preg_replace('/_(.?)/e',"strtoupper('$1')",$string); 
```

# c# - 使用 Process.Start()，当 /K 参数不起作用时，如何保持 cmd 提示符打开？

> ID：13732740
> 
> 赞同：4
> 
> 时间：2012-12-05T21:25:29.663
> 
> 标签：c#, cmd

> **可能重复：**
> [在 Process.Start(..) 期间保持外部命令窗口打开的任何方法？](https://stackoverflow.com/questions/905352/any-way-to-keep-an-external-command-window-open-during-a-process-start)

我以前看过这篇文章，但由于某种原因，这些解决方案对我不起作用。使用 Process.Start()，当 /K 参数不起作用时，如何保持 cmd 提示符打开？也没有可用的“WaitForExit”方法。

```
ProcessStartInfo processInfo = new ProcessStartInfo("cmd.exe", "/K " + "C:\\Windows\\System32\\" + "takeown.exe");
processInfo.Verb = "runas";
processInfo.Arguments = "/F \"C:\\Program Files(x86)\\Borland\" /R /D Y";
Process.Start(processInfo); 
```

我想看看这个过程是否成功处理。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T21:30:50.347

您可以等待该过程完成后再继续：

```
var process = Process.Start(processInfo);
process.WaitForExit();
if (process.ExitCode != 0) {
    // Handle failure...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T01:35:09.893

试试这个：

```
ProcessStartInfo processInfo = new ProcessStartInfo("cmd.exe");
processInfo.Verb = "runas";
processInfo.Arguments = "/K C:\\Windows\\System32\takeown.exe /F \"C:\\Program Files(x86)\\Borland\" /R /D Y";
Process.Start(processInfo); 
```

# c# - 如何从 Windows Mobile 6 设备发送带有附件的电子邮件

> ID：13732747
> 
> 赞同：1
> 
> 时间：2012-12-05T21:25:50.400
> 
> 标签：c#, windows-mobile, compact-framework, opennetcf

我了解到 .NET CF 不支持 SmtpClient 类。它最好的是我不想使用的 PocketOutlook 类。

我发现 OpenNETCF 确实有一个 OpenNETCF.Net.Mail 命名空间，它使 SmtpClient 类可用。不幸的是，它只是部分实现，不直接支持附件：http: [//community.opennetcf.com/forums/t/11325.aspx](http://community.opennetcf.com/forums/t/11325.aspx)

该帖子表明仍然可以使用多部分 MIME 消息添加附件。

**更新**

在阅读了 ctacke 的建议以查看 w3.org 文章后，我尝试像这样更改我的方法：

```
using OpenNETCF.Net.Mail;

    public void EmailPicture(string picLoc)
    {
        var smtpClient = new SmtpClient
                             {
                                 Host = MailProperties.SmtpHost,
                                 Credentials = new SmtpCredential(MailProperties.UserName, MailProperties.Password, MailProperties.Domain),
                                 DeliveryMethod = SmtpDeliveryMethod.Network,
                                 Port = MailProperties.Port
                             };

        var message = new MailMessage();
        var fromAddress = new MailAddress(MailProperties.From);

        message.To.Add(MailProperties.To);
        message.From = fromAddress;
        message.Subject = "Requested Picture";
        message.IsBodyHtml = false;

        message.Headers.Add("MIME-Version", "1.0");
        message.Headers.Add("Content-Type", "multipart/mixed; boundary=\"simple boundary\"");

        var bodyBuilder = new StringBuilder();
        //add text
        bodyBuilder.Append("--simple boundary\r\n");
        bodyBuilder.Append("Content-type: text/plain; charset=us-ascii\r\n\r\n");
        bodyBuilder.Append("Requested Picture is attached.\r\n\r\n");
        //add attachment
        bodyBuilder.Append("--simple boundary\r\n");
        bodyBuilder.Append("Content-type: image/jpg;\r\n\r\n");
        var fs = new FileStream(picLoc, FileMode.Open, FileAccess.Read);
        var picData = new byte[fs.Length];
        fs.Read(picData, 0, picData.Length);
        bodyBuilder.Append(picData);
        bodyBuilder.Append("\r\n\r\n");
        bodyBuilder.Append("--simple boundry--\r\n");

        message.Body = bodyBuilder.ToString();

        smtpClient.Send(message);
    } 
```

我收到的电子邮件最终看起来像这样：

--simple 边界 Content-type: text/plain; charset=us-ascii

附上要求的图片。

--简单边界Content-type: image/jpg;

系统字节[]

--简单的边界--

我有格式问题吗？还是缺少标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:51:59.663

正如您所指的论坛帖子所说，附件未在 OpenNETCF 邮件代码中实现。我们只是没有时间去做。带有附件的电子邮件只是多部分的 MIME 消息，它不是非常复杂，并且[在 RFC 1341 中有所介绍](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)。您必须扩展代码以构建多部分 MIME 消息，然后设置适当的内容类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:31:14.143

我做了一个粗略的工作，创建了自己的电子邮件类，该类的方法和属性名称与.NET 的 SMTP 使用的名称完全相同。

在我的班级中，如果有附件，则在调用我的电子邮件班级的发送时将其复制到我们的服务器。我的电子邮件也只发送到同一台服务器，发送到一个最小的应用程序，该应用程序位于 TCP 连接上并侦听消息。

服务器收到信息后，就可以构造一个 SMTP 邮件，使用复制过来的文件创建一个附件（如果 Attachment Path 为 NULL，则没有附件），并将邮件发送到我指定的地址电子邮件类的收件人、抄送和/或密件抄送字段。

这是完成它的更长的方法，但它就像一个冠军！

代码相当大，但这更多是因为我希望它与我编写的应用程序套件中的其他东西一起工作。此外，显然有两个项目：一个用于移动，一个用于 Windows 或 Web（服务器）。

# android - 在android中按名称搜索记录

> ID：13732750
> 
> 赞同：-3
> 
> 时间：2012-12-05T21:26:07.043
> 
> 标签：android, sqlite

我在 sq-lite 中创建了这个表

```
String TABLE_CREATE_QUERY = 
            "create table contacts(id integer primary key autoincrement,name text not null, fname text not null, regid integer unique not null,year text not null, email text not null, phone text not null, address text not null)"; 
```

并且有一种按名称搜索记录的方法

```
public Cursor searchByName(String name)
    {

        return db.query(DATABASE_TABLE, new String[] {"id","name", "phone"},
"name="+name, null, null, null, null);
    } 
```

现在当我想像这样搜索 uzair 的记录时，我得到了一个错误。

```
open(); //open database;
 Cursor c=searchByName("uzair");
close();  //close database. 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:36:38.777

您没有将 SQL 字符串括在引号中：`"name='"+name+"'"`
但实际上您应该对查询进行参数化以保护您的数据库免受注入攻击：

```
return db.query(DATABASE_TABLE, new String[] {"id","name", "phone"}, 
        "name=?", new String[] {name}, null, null, null); 
```

（如果这不是完整的解决方案，您需要发布您的 LogCat 错误，这样我们就不必猜测了。）

* * *

**添加**
您添加了此评论：

> `if(student_name.length()>0) { open(); Cursor c= searchByName(student_name); c.moveToFirst(); names=new String[c.getCount()]; for(int i=0;i<names.length;i++) { names[i]=c.getString(1); } db.close(); }`

我*假设*这段代码不能以某种方式工作，但我不得不再次*猜测*......单击问题左下角的[“编辑” ，将此代码和](https://stackoverflow.com/posts/13732750/edit)*LogCat 错误*添加到您的原始帖子中。

无论如何，我可以看到您没有`moveToNext()`在循环中使用：

```
for(int i=0;i<names.length;i++) { 
    names[i]=c.getString(1); 
    c.moveToNext();
} 
```

# ruby-on-rails - before_destroy 定义 NoMethodError

> ID：13732752
> 
> 赞同：0
> 
> 时间：2012-12-05T21:26:08.733
> 
> 标签：ruby-on-rails, ruby, nomethoderror

嘿，我在使用此功能时遇到了一些问题

```
class User < ActiveRecord::Base
  belongs_to :group
end

class Group < ActiveRecord::Base
  has_many :users
  attr_accessible :name
  validates_presence_of :name

  before_destroy :set_default_group

  private
  def set_default_group
    self.users.each do |u| 
      puts u # prints out <User:0x007fd678a85cb8>
      u.group = self.first
      u.save    
    end
  end
end 
```

它给了我这个错误 NoMethodError: undefined method `group' for #Group id: 18，那么我的定义有什么问题？

错误信息

```
 NoMethodError: undefined method `group' for #<Group id: 18>
from /Users/.../.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:407:in `method_missing'
    from /Users/.../.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/attribute_methods.rb:149:in `method_missing'
    from /Users/.../Developer/rails/.../app/models/group.rb:12:in `block in set_default_group'
    from /Users/.../.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/collection_proxy.rb:89:in `each'
    from /Users/.../.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/collection_proxy.rb:89:in `method_missing'
    from /Users/.../Developer/rails/.../app/models/group.rb:10:in `set_default_group' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:49:07.153

您的错误没有意义，因为您在*user*而不是*group上调用**#group*。

 **然而，我相信

```
u.group = self.first 
```

不会像你想要的那样工作，因为*#first*是一个类方法，而这里的*self*是一个实例。尝试：

```
u.group = self.class.first 
```

或者简单地说：

```
u.group = Group.first 
```**

# javascript - kineticjs - 如何从一条线上获取点

> ID：13732758
> 
> 赞同：0
> 
> 时间：2012-12-05T21:26:17.917
> 
> 标签：javascript, dom-events, kineticjs

如果我创建一条线...

```
 var line = new Kinetic.Line({
  points: [0 , 5, 0, 100],
  stroke: 'black',
  strokeWidth: 2,
  draggable: true 
```

});

我附上一个事件......

```
 line.on("mouseup", function () {
      updateLineInput( this.attrs.points );
   }); 
```

怎么才能把积分拿回来？`this.attrs.points`不工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:22:40.903

您可以获取点，`line.getPoints()`但它们通常在拖放后不会改变，X、Y 坐标会改变，相对点是从中绘制的。你可以得到那些`line.getX()`和`line.getY()`

```
 //It would be better to use the 'dragend' event if you want it to fire on a drag/drop
  line.on('dragend', function() {

    //You may really want the coordinates too
    var x = line.getX();
    var y = line.getY();

    //But this is what you asked for:
    var points = line.getPoints();
    updateLineInput(points);
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:46:52.583

我同意 nak 但我建议：

```
 //It would be better to use the 'dragend' event if you want it to fire on a drag/drop
  line.on('dragend', function(evt) {
     var myline=evt.shape;
    //You may really want the coordinates too
    var x = myline.getX();
    var y = myline.getY();

    //But this is what you asked for:
    var points = myline.getPoints();

    var mynewpoints=manipulate(points);
    myline.setPoints(mynewpoints);
    var mylayer=myline.getLayer();
    mylayer.draw();
  }); 
```

# javascript - 如何限制javascript正则表达式中的某些特定字符

> ID：13732762
> 
> 赞同：0
> 
> 时间：2012-12-05T21:26:34.893
> 
> 标签：javascript, regex

> **可能重复：**
> [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

我刚刚为电子邮件地址做了一个 RE。它是一个最简单的并且运行良好。但我想让它变得更好。我的意思是说，电子邮件地址可以包含字母数字字符、下划线“_”、点“。” 但不能包含连字符“-”、分号“;” 等等。下面是我刚刚为电子邮件地址制作的 RE。

```
<!DOCTYPE html>
<html>
<body>

<script>
str = "assad-ch7@Yahoo.com";

re = /[a-z0-9][@]((yahoo)|(hotmail)|(gmail))[.]((com)|(co.uk))/i; 

result = re.test(str);

document.write(result);

</script>

</body>
</html> 
```

此外，这是为电子邮件地址制作 RE 的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:34:11.377

如果您想将电子邮件地址限制在这些域中，这还不错。虽然有一些修复

1.  需要 _ 和 . 在第一个字符类
2.  在第一个字符类之后添加 + 以捕获 @ 之前的所有字符
3.  删除 @ 和 . 从字符类括号
4.  删除不必要的额外括号
5.  反斜杠文字句点（在字符类中是不必要的）

`var re = /[a-z0-9_.]+@(yahoo|hotmail|gmail)\.(com|co\.uk)/i;`

# c# - 使用 MultipartFormDataStreamProvider 和 ReadAsMultipartAsync

> ID：13732766
> 
> 赞同：20
> 
> 时间：2012-12-05T21:26:43.813
> 
> 标签：c#, asp.net, asp.net-web-api

我将如何在 a 中使用`MultipartFormDataStreamProvider`and ？`Request.Content.ReadAsMultipartAsync``ApiController`

我用谷歌搜索了一些教程，但我无法让它们中的任何一个工作，我使用的是 .net 4.5。

这是我目前得到的：

```
public class TestController : ApiController
{
    const string StoragePath = @"T:\WebApiTest";
    public async void Post()
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            var streamProvider = new MultipartFormDataStreamProvider(Path.Combine(StoragePath, "Upload"));
            await Request.Content.ReadAsMultipartAsync(streamProvider);
            foreach (MultipartFileData fileData in streamProvider.FileData)
            {
                if (string.IsNullOrEmpty(fileData.Headers.ContentDisposition.FileName))
                {
                    throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
                }
                string fileName = fileData.Headers.ContentDisposition.FileName;
                if (fileName.StartsWith("\"") && fileName.EndsWith("\""))
                {
                    fileName = fileName.Trim('"');
                }
                if (fileName.Contains(@"/") || fileName.Contains(@"\"))
                {
                    fileName = Path.GetFileName(fileName);
                }
                File.Copy(fileData.LocalFileName, Path.Combine(StoragePath, fileName));
            }
        }
        else
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
        }
    }
} 
```

我得到了例外

> MIME 多部分流的意外结束。MIME 多部分消息不完整。

当`await task;`运行。有没有人知道我做错了什么，或者在使用 web api 的普通 asp.net 项目中有一个工作示例。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-05T23:10:41.130

我解决了错误，我不明白这与多部分流结束有什么关系，但这是工作代码：

```
public class TestController : ApiController
{
    const string StoragePath = @"T:\WebApiTest";
    public async Task<HttpResponseMessage> Post()
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            var streamProvider = new MultipartFormDataStreamProvider(Path.Combine(StoragePath, "Upload"));
            await Request.Content.ReadAsMultipartAsync(streamProvider);
            foreach (MultipartFileData fileData in streamProvider.FileData)
            {
                if (string.IsNullOrEmpty(fileData.Headers.ContentDisposition.FileName))
                {
                    return Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted");
                }
                string fileName = fileData.Headers.ContentDisposition.FileName;
                if (fileName.StartsWith("\"") && fileName.EndsWith("\""))
                {
                    fileName = fileName.Trim('"');
                }
                if (fileName.Contains(@"/") || fileName.Contains(@"\"))
                {
                    fileName = Path.GetFileName(fileName);
                }
                File.Move(fileData.LocalFileName, Path.Combine(StoragePath, fileName));
            }
            return Request.CreateResponse(HttpStatusCode.OK);
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-01T11:46:03.917

首先，您应该在 ajax 请求标头中将**enctype**定义为**multipart /form-data。**

```
[Route("{bulkRequestId:int:min(1)}/Permissions")]
    [ResponseType(typeof(IEnumerable<Pair>))]
    public async Task<IHttpActionResult> PutCertificatesAsync(int bulkRequestId)
    {
        if (Request.Content.IsMimeMultipartContent("form-data"))
        {
            string uploadPath = HttpContext.Current.Server.MapPath("~/uploads");

            var streamProvider = new MyStreamProvider(uploadPath);

            await Request.Content.ReadAsMultipartAsync(streamProvider);

            List<Pair> messages = new List<Pair>();
            foreach (var file in streamProvider.FileData)
            {
                FileInfo fi = new FileInfo(file.LocalFileName);
                messages.Add(new Pair(fi.FullName, Guid.NewGuid()));
            }

            //if (_biz.SetCertificates(bulkRequestId, fileNames))
            //{
            return Ok(messages);
            //}
            //return NotFound();
        }
        return BadRequest();
    }
}

public class MyStreamProvider : MultipartFormDataStreamProvider
{
    public MyStreamProvider(string uploadPath) : base(uploadPath)
    {
    }
    public override string GetLocalFileName(HttpContentHeaders headers)
    {
        string fileName = Guid.NewGuid().ToString()
            + Path.GetExtension(headers.ContentDisposition.FileName.Replace("\"", string.Empty));
        return fileName;
    }
} 
```

# javascript - 如何在 AudioBufferSourceNode 上使用音高保留执行时间拉伸？

> ID：13732767
> 
> 赞同：4
> 
> 时间：2012-12-05T21:26:46.587
> 
> 标签：javascript, web-audio-api

我正在寻找 javascript 中的相位声码器或某种音高移位/时间拉伸算法，我可以在更改播放速度时与 webaudio 一起使用，以防止音高也发生变化。

编辑：我找到了[https://github.com/also/soundtouch-js](https://github.com/also/soundtouch-js) 但是它并不理想，因为它必须有权访问完整的源文件；我正在开发一个具有多个轨道的系统（每个轨道都有自己的增益控制）；所以理想情况下，我需要一个可以将所有节点连接到的系统，而不必合并它们或制作多个 soundtouch 系统。

# javascript - jQuery $.delegate() 单个选择器多个事件还是 $.bind() 更好的解决方案？

> ID：13732768
> 
> 赞同：3
> 
> 时间：2012-12-05T21:26:48.740
> 
> 标签：javascript, jquery, html, dom

所以我试图找到这个问题的答案，但似乎没有明确的答案可以帮助我做出正确的选择。

所以我很好奇的是`$.delegate()`，最近我很喜欢使用它，现在在我的大多数应用程序中似乎都更加稳定了。所以就这样。我通常在使用它时会做类似的事情

```
$('div').delegate('.someclass', 'click', function(e){ .... }); 
```

我对此很满意，直到现在。我有一个需要处理多个事件的元素。所以我想知道最好的方法是什么？我做某事的程度。

```
$('div').delegate('.someclass', 'click', function(e){ .... });
$('div').delegate('.someclass', 'mouseover', function(e){ .... });
$('div').delegate('.someclass', 'mouseout', function(e){ .... }); 
```

还是我走这`$.bind()`条路？并做类似的事情

```
$('.someclass').bind({
    click:function(){...},
    mouseout:function(){...},
    mouseover:function(){...}
}); 
```

是否`$.delegate()`支持类似的东西`$.bind()`？阅读 API 时看起来并不那么好，但你永远不知道（对我不起作用）。还是有一个我可能不知道的与两者结合的功能相似的功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T21:30:55.480

`.delegate`并已`.bind`被**jQuery 1.7 版取代**`on.()`

 **```
$('div').on({
    click:function(){...},
    mouseout:function(){...},
    mouseover:function(){...}
},'.someclass'); 
```

* * *

```
$('div').on( 'click mouseover mouseout','.someclass', function(e){ .... }); 
```

当您想委托​​事件时，可以使用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T07:30:58.083

试试这个代码。我有正确的结果视图。

```
$('div').delegate('.someclass', 'click mouseover mouseout', function(e){ .... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:36:15.263

我的猜测是所有这些事件都彼此不同？如果是这样，那么如果您更新到至少 jquery 1.7，您可以在方法[.on](http://api.jquery.com/on/)上使用事件映射：

```
$('div').on({
    'click': function(e){ .... },
    'mouseover': function(e){ .... },
    'mouseout': function(e){ .... }
}, '.someclass'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T21:42:58.117

如果您刚刚开始使用新的事件管理函数：on() 和 off()，这可能是最好的。它们使您能够使用精简语法同时使用委托事件和标准事件，例如：

```
$("a").on({
    click: function() {},
    mouseover: {}
});  // ordinary event handlers

$("div").on({
    click: function() {},
    keydown: function() {}
}, "a.cls");  // delegated 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T21:43:23.273

您建议的方法自 jQuery 1.7 版起已弃用。
请改用 .on() 方法，因为它提供了附加事件处理程序所需的所有功能。
要删除与 .on() 绑定的事件，请使用 .off( [)](http://api.jquery.com/off/)。
或者，如果您想要只调用一次的事件，请使用[.one()](http://api.jquery.com/one/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T21:52:36.517

可能delegate 比bind 更稳定的原因是delegate 与live() 具有相同的结果。这意味着delegate() 还将事件绑定到动态生成的元素。

至于使用 on() 的建议，我一直很喜欢 live() 和 bind() 之间的区别，因为它告诉了我一些关于事件绑定的性质。

我不知道 jQuery 是如何优化 on() 函数的。Live() 总是比 bind() 重一些。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-05T21:36:11.680

需要注意的是，delegate 和 live 具有与 bind 和 on 不同的功能。delegate 和 live 都将事件绑定到任何当前和未来的元素。on 方法仅将自身附加到当时选择的元素。

chris 在他的页面上看到了更好的结果，因为当他的页面的用户使用它时，他可能没有正确绑定和取消绑定事件。

他应该单独研究并切换到 .on() 整体。

克里斯...我可以建议研究一下backbonejs或其他一些MVC系统，它们会为你做这种事情，并在完成后清理大部分混乱。

[http://backbonejs.org/](http://backbonejs.org/)**

# php - 黑莓推送通知 - 订阅处理

> ID：13732770
> 
> 赞同：0
> 
> 时间：2012-12-05T21:26:51.350
> 
> 标签：php, blackberry, push-notification

我有一个向不同类型的智能手机发送推送的 PHP 应用程序。最近添加了 BlackBerry 推送 - 为此我使用了常见的可用代码段，并出现在许多 stackoverflow 答案中。

一件事-所有接收者都指定为“push_all”，我认为将消息推送到所有具有活动订阅的设备。那么：如何针对单个设备？

我所发现的是，为了接收 device_id，我必须`example.com/subscribesdk`在我的服务器应用程序中设置 url。但是将发送到该 URL 的内容是什么？有没有可用的规范？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:38:34.273

该规范包含在 push api 文档中。要定位单个设备，请使用设备 PIN，这是发送到 URL 的值之一。您还可以获得型号和设备操作系统版本。

# javascript - IE 只检测打印屏幕键的第一个键（其他每次都工作）

> ID：13732771
> 
> 赞同：0
> 
> 时间：2012-12-05T21:26:53.130
> 
> 标签：javascript, internet-explorer, keyup

这是我的代码：

```
$(document).keyup(function (e) {
    alert("felt something!");
    if (e.keyCode == 44) {
        alert("felt PS");
        ccd();
    }
});

function ccd() {
    if (clipboardData) {
        window.clipboardData.setData('text', '');
    }
} 
```

在 chrome 中，ccd 函数什么都不做（这很好），但是每次我按下 PS 按钮时都会弹出消息“Felt PS”。但是，在 IE (7-9) 中，我会出现一条“Felt PS”消息。在那之后，按 PS 没有任何作用，但按任何其他键都会导致“感觉到什么！”。

任何人有任何想法可能导致这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-08T21:12:34.047

我没有足够的酷点来发表评论，但我知道这一点：

*在 Internet Explorer 中，如果先按下另一个键*，打印屏幕的 KeyUp 事件将触发一次 - 并且仅触发一次。 通过再次按下另一个键，将再次检测到打印屏幕：但*只有一次。*

这适用于页面，因此登录网站然后浏览多个页面，然后点击打印屏幕：检测到。

让 IE 在您下次访问时记住您的登录信息，浏览相同的几个页面，点击打印屏幕：未检测到。

这就是为什么大通关于 ALT + Print Screen 的更新答案是正确的。通过首先按下alt，您已经导致检测到打印屏幕所需的按键......一次。

使用 Javascript 创建的伪造键盘事件不足以人为地诱导这种行为，无论是什么导致打印屏幕被检测（或不检测）都位于 IE 本身中（因为相同的 JS 在 Firefox 中也可以正常工作）。

虽然不是您问题的完整答案，但我希望可以根据我自己尝试解决相同问题的经验提供一些见解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T21:51:32.800

对于 IE，你需要小心`e`，因为旧版本的 IE 使用全局`window.event`对象。请尝试以下代码：

```
$(document).keyup(function (e) {
    if(!e) e = window.event; //check for e, otherwise use the global window.event
    var keyCode = e.which || e.keyCode //changed as not all browsers use keyCode
    alert("felt something!");
    if (keyCode  == 44) {
        alert("felt PS");
        ccd();
    }
});

function ccd() {
    if(window.clipboardData) { //changed to look for window.clipboardData instead otherwise throws an error in other browsers.
        window.clipboardData.setData('text', '');
    }
} 
```

请注意上面我更改了代码的注释行。

**[例子](http://jsfiddle.net/yMZmM/)**

**更新**：

您可能必须按 ALT + PRINT SCREEN 才能让事件注册该键。我现在不是 100% 确定为什么，所以如果其他人碰巧知道，请编辑答案或将其留在评论中。

**请注意修改后的代码。

# ruby-on-rails - 路线集合为？

> ID：13732774
> 
> 赞同：0
> 
> 时间：2012-12-05T21:27:17.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, ruby-on-rails-3.2

我基于此[http://railscasts.com/episodes/382-tagging对我的网站实施了标记](http://railscasts.com/episodes/382-tagging)

我想在我的房屋资源中添加标签，所以我得到这样的网址......

/houses/tag1 /houses/tag2 等

我的路线文件：

```
localized(['en', 'nl', 'de']) do
  scope "/:locale" do
    resources :houses do
      collection do
        get ':tag', to: 'houses#index', as: :tag
      end
    #...
    end
  end
end 
```

房屋控制器

```
if params[:tag]
  @houses = House.tagged_with(params[:tag])
  @tag = Tag.find_by_name(params[:tag])
else
  @houses = House.find.all
end 
```

房屋模型（部分）

```
def self.tagged_with(name)
       Tag.find_by_name!(name).houses
     end

      def self.tag_counts
        Tag.select("tags.*, count(taggings.tag_id) as count").
          joins(:taggings).group("taggings.tag_id")
      end

      def tag_list
        tags.map(&:name).join(", ")
      end

      def tag_list=(names)
        self.tags = names.split(",").map do |n|
          Tag.where(name: n.strip).first_or_create!
        end
      end 
```

这适用于房屋资源中的标签。但是当我通过示例房屋/房屋名称1转到房屋ID（显示方法）时，我收到一条错误消息

```
undefined method `houses' for nil:NilClass
house.rb:41:in `tagged_with' 
```

我究竟做错了什么？

Ciao..remco

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:09:59.240

房屋和标签的路线正在崩溃。您需要决定如何访问标签。我建议：

**选项1**

标签可以是一个单独的资源：

```
resources :houses
resources :tags 
```

**选项 2**

标签可以像过滤器一样`houses#index`。在这种情况下，您不需要在路由中定义标签，只需：

```
resources :houses 
```

然后只需使用这种路由按标签过滤房屋：

```
/houses/?tag=tag1 
```

# android - 在 if 块中使用手动创建的 id 而不是系统 id

> ID：13732777
> 
> 赞同：1
> 
> 时间：2012-12-05T21:27:22.250
> 
> 标签：android, contextmenu

**TLDR：**

当提到点击的项目时，我宁愿使用“shareButton”而不是“2131427332” `onCreateContextMenu()`。我怎样才能做到这一点？

**解释：**

我有一个带有两个上下文菜单的活动。因此，在我的`onCreateContextMenu()`方法中，我正在检索所单击项目的 id，并膨胀相应的菜单。

但是 - 我知道如何做到这一点的唯一方法是使用`v.getId();`- 这似乎很糟糕/奇怪，因为我在 if 块中使用系统生成的 id 而不是我自己创建的 id。有一个更好的方法吗？那个id会改变吗？我可以使用 XML 项目的 id 代替这个自动生成的 id 吗？

**代码：**

```
/**
 * Opens the context menu(s)
 */
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo)
{
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    if(v.getId() == 2131427332)
    {
        inflater.inflate(R.menu.share_menu, menu);
    }
    else if(v.getId() == 2131427329)
    {
        inflater.inflate(R.menu.options_menu, menu);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:02:02.540

您可以使用您的 ids 来引用自动生成的 R.class

例如：

```
if(v.getId() == R.id.my_custom_id) 
{

} 
```

我记得前段时间 R.class 中的 ids 是 static final 的，但谷歌团队将其更改为 static 所以现在你不能在 switch 语句中使用它们，但可以在你的代码中随意使用它们。

找到了！更多关于这里：[http ://tools.android.com/tips/non-constant-fields](http://tools.android.com/tips/non-constant-fields)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:13:37.723

因此，您有一个名为 shareButton 的视图。

你需要做的是替换这个：

```
if(v.getId() == 2131427332) {
        inflater.inflate(R.menu.share_menu, menu);
    } 
```

有了这个：

```
if(v.equals(shareButton)) {
        inflater.inflate(R.menu.share_menu, menu);
    } 
```

就那么简单！

# php - javascript通过XMLHttpRequest向php发送数据，也希望php发回一些数据

> ID：13732779
> 
> 赞同：0
> 
> 时间：2012-12-05T21:27:34.097
> 
> 标签：php, javascript, sql, json, xmlhttprequest

我在 js 中创建了一个 xhr 来将一些数据发送到一个 php 文件。php 文件会将这些数据插入数据库。现在我需要知道自动增加的 ID。我用

```
echo mysql_insert_id(); 
```

获取 php 中的 ID。如何在 javascript 中读取此值？

```
var xhr = new XMLHttpRequest();

 xhr.open(
         "POST",
         "xxx.php",true
     );
    var postContainer = new Array();
    postContainer.push(
    {
        data1 : value1, 
        data2 : value2,
    });
    var newJ = JSON.stringify(postContainer); 
    xhr.setRequestHeader("Content-type","application/json");
    xhr.send(newJ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:32:07.473

您可以附加一个事件处理程序来侦听该`onreadystatechange`事件。

```
xhr.onreadystatechange = function(){
   // check to make sure response finished and status is 200 meaning OK 
   if ( xhr.readyState == 4 && xhr.status == 200 ){
        console.log( xhr.responseText );        
   }
} 
```

# reboot - 树莓派卡在重启循环中，需要运行命令

> ID：13732786
> 
> 赞同：2
> 
> 时间：2012-12-05T21:28:11.503
> 
> 标签：reboot, raspberry-pi, watchdog

显然，我对 Pi 上运行的看门狗进行了错误配置，导致它在启动后大约 10 秒内重新启动并显示登录脚本。我不够快，无法使用 FTP 客户端运行命令，所以我需要运行命令或删除文件。我的 Pi 有最新的 debian wheezy，我想制作它而不必删除所有文件。

编辑：我是为了解决这个问题。幸运的是，它在 15 秒后重新启动，这足以在最后一秒进入 SSH 并删除配置：D 我现在学会了始终备份系统映像。

# java - 如何将长字符串转换为更短的字符串

> ID：13732789
> 
> 赞同：2
> 
> 时间：2012-12-05T21:28:26.523
> 
> 标签：java

理想情况下，我们希望采用 long(Java 中的 System.currentTimeMillis) 加上一个后缀 long 并将其转换为一组字符+数字的更短的字符串。我们只希望使用大写字母。是否已经有一个用于此的库，因为它似乎是一个非常可重用的库，用于生成用户可以更轻松地键入的密钥，因为它们更短。

我想我总是可以写一个但是很容易抓住别人的代码/库会很好。

例子

*   0 = 0
*   1 = 1
*   2 = 2
*   其余数字
*   11 = 一个
*   12 = 乙
*   13 = C

所以我可以取一个数字并显着减少位数。

谢谢，院长

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T21:30:13.383

只需使用这个：

```
long l = System.currentTimeMillis();
String str = Long.toString(l, 36).toUpperCase(); 
```

要将其转换回来，请使用：

```
String str = "9XQ693458KF";
long = Long.parseLong(str, 36); // No need to use toLowerCase here 
```

36 指的是基数（10 位数字 + 26 个字符）。

JavaDoc 参考资料：

*   [`Long.toString(long, int);`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#toString%28long,%20int%29)
*   [`Long.parseLong(String, int);`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T21:31:21.440

最简单的可能是将数字转换为 base-36：

```
Integer.toString(n, 36).toUpperCase()
Long.toString(n, 36).toUpperCase() 
```

这将使用 to 的数字和to`0`的`9`大写字母。`A``Z`

# mongodb - Mongo Newbie：最新子哈希在时间范围内具有值的条目计数

> ID：13732798
> 
> 赞同：3
> 
> 时间：2012-12-05T21:28:57.273
> 
> 标签：mongodb

我有一个 mongo 存储“任务”，它有一个数组“答案”，它接受一个哈希，其元素是一个时间戳。所以：

```
task ->
  project_id,
  answers ->
    [ 
       {
         timestamp: <time>,
         question_1: <answer_1>,
         question_2: <answer_2>
       },
       {
         timestamp: <time>,
         question_1: <answer_1>,
         question_2: <answer_2>
       },
    ] 
```

我想做的是获取具有给定项目 ID 的所有任务的列表，并且其最新答案时间戳字段在过去 24 小时内。项目 ID 的事情显然非常简单，我可以确定时间戳是否介于 $gte 和 $lt 的给定时间段之间......但我不知道如何仅将其范围限定为最新时间戳。

我没有为此使用 ORM - 所以只是首选普通的 mongo 查询语法。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:43:11.973

正如@shelman 所提到的，Map Reduce 不是必需的，我不会认为它是这里最好的方法。请注意，MR 并非真正设计为内联运行到您自己的应用程序中，而且速度很慢（根据定义）。

通常使用聚合框架（可以轻松做到这一点）或普通查询会更好。

现在，即使您想知道最新的项目答案是否在 24 小时内，假设应该包括 24 小时内的任何项目答案可能是一个不错的选择，因为这很可能意味着最新的答案（如果不是那么为什么不？）。所以这可以通过（再次如@shelman所说）来实现：

```
find({project_id: 5, "answers.timestamp": {$gte: ISODate(), $lt: ISODate()}}) 
```

这将在过去 24 小时内找到任何有答案的项目。然后，您可以过滤掉第一个/最后一个答案（应该始终是您要寻找的答案），然后bam，您的结果将获得更高的性能，内嵌到您的应用程序中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:39:39.260

我可能误解了您尝试使用的确切查询，但我不确定您为什么需要 map reduce。对24 小时前正确`project_id`和时间戳的复合查询不会起作用吗？`$gt`

# .net - 异步控制器还是 Ajax？

> ID：13732801
> 
> 赞同：1
> 
> 时间：2012-12-05T21:29:24.640
> 
> 标签：.net, asp.net-mvc-4

我正在编写一个 Asp.Net MVC 4 应用程序，其中，一旦用户登录，他们就会被重定向到仪表板页面，我在该页面上有这 4 个单独的 div。必须进行 4 次不同的数据库调用才能填充这些 div。我计划使用多个 Ajax 调用，这样用户就不必等到所有数据都回来才能看到页面。然后我读到了异步控制器，现在我很困惑是使用异步控制器还是 ajax 调用来达到我的目的。请帮忙 ！提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:24:52.823

在我看来，异步控制器允许服务器以类似于 node.js 的非阻塞方式处理 mre 并发请求，从而在服务器上进行更响应的请求处理。如前所述，Ajax 在客户端/浏览器上默认是异步的，这就是您需要允许页面无阻塞地呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T01:57:18.053

> 然后我读到了异步控制器，现在我很困惑是使用异步控制器还是 ajax 调用来达到我的目的

只是不要把苹果和梨混在一起。

**您制作了一个异步控制器以在服务器上**生成另一个线程，客户端对此一无所知。（为了避免服务器上的线程饥饿，长时间操作是有意义的——比如二进制操作等）

您发出一个异步请求，而不是阻塞**客户端上**浏览器的 UI 线程。

# linux - 阿帕奇 不适用于子目录

> ID：13732809
> 
> 赞同：1
> 
> 时间：2012-12-05T21:30:05.823
> 
> 标签：linux, apache, directory, linux-mint

我正在 Linux Mint 14 上运行最新的 Apache 服务器，并尝试使用 vhosts 迈出第一步，但我的设置遇到了一个普遍问题：

我在 <Directory> 部分中声明的每个选项似乎对任何子目录都没有任何影响 - 但据我所知并根据文档应该这样做。

例如：我正在尝试通过以下方式授予 .htaccess 文件的权限

```
<Directory /var/www/>
    AllowOverride All
</Directory> 
```

/var/www 中的 .htaccess 可以正常工作，但例如 /var/www/test 中的 .htaccess 内容为“全部拒绝”将无效。

是否有任何我不知道的选项我必须设置？这不是我的第一个 apache 设置，所以我现在有点困惑，但我找不到解决方案。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:52:26.820

明白了，apache2.conf 包含外部 vhost 设置，因此 sites-available/default 中的默认设置会覆盖我的。

# javascript - jquery查找具有值的表格单元格

> ID：13732815
> 
> 赞同：4
> 
> 时间：2012-12-05T21:30:20.363
> 
> 标签：javascript, jquery

我有一个 ID 为趋势表的表。我想要与“Page Fans”完全匹配的单元格

```
 $j("#trends_table td:contains('Page Fans')") 
```

这给了我所有包含的单元格，我该怎么做？我摆弄了一堆语法，但我找不到任何作品。

我看到了这一点， [Jquery 找到值为 X 的表格单元格，](https://stackoverflow.com/questions/12746846/jquery-find-table-cell-where-value-is-x)但看不到我将如何为给定的表格执行此操作，不了解上下文。

谢谢乔尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T21:31:49.647

尝试使用过滤器。见下文，

```
$j('#trends_table td').filter(function () {
  return $.trim($(this).text()) == 'Page Fans';
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T22:16:06.727

```
$('#trends_table td').filter(function() {
    return $(this).text() == 'Page Fans';
}).css('background-color', 'red'); 
```

这是您尝试完成的示例。 [http://jsfiddle.net/bQdpp/1/](http://jsfiddle.net/bQdpp/1/)。在此示例中，我只是将单元格变为红色，注意如果返回的单元格超过 1 个，则所有单元格都变为红色。

# c - C中的字符串数组与文件

> ID：13732821
> 
> 赞同：1
> 
> 时间：2012-12-05T21:30:44.670
> 
> 标签：c

我正在尝试对文件进行标记并将某些字符串插入到数组中。当我对文件进行标记并打印出每个标记时，它工作正常，但是当我将每个标记放入一个数组并打印出数组的内容时，内容根本不一样。

```
char *filenames[1000];    
token = strtok(line, " ");              
while (token != NULL) {                     
    printf("%s\n", token);                      
    /*                      
      filenames[i] = token;                     
      i++;                      
    */                      
    token = strtok(NULL, " ");                  
}                   
ck = fgets(line, 1000, fp);    
for (j = 0; j <= i; j++){               
    printf("%s \n", filenames[j]);              
} 
```

我应该 malloc 文件名数组，还是 malloc 每个令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:31:49.100

你不断地重复使用同一个指针。尝试类似：

```
filenames[i] = strdup(token); 
```

你还应该记住`free(filenames[i])`当你完成它们时。

* * *

如果你没有，`strdup`你可以自己滚动或只使用：

```
filenames[i] = malloc(strlen(token) + 1);    /* XXX check malloc return. */
strcpy(filenames[i], token); 
```

# ssl - 将 .pem 转换为 .crt 和 .key

> ID：13732826
> 
> 赞同：507
> 
> 时间：2012-12-05T21:30:54.467
> 
> 标签：ssl, certificate, private-key

谁能告诉我从文件中提取/转换证书`.crt`和私钥`.key`文件的正确方法/命令`.pem`？我刚刚读到它们是可互换的，但不是如何互换的。

* * *

## 回答 #1

> 赞同：674
> 
> 时间：2013-01-23T16:23:03.357

我能够使用以下方法将 pem 转换为 crt：

```
openssl x509 -outform der -in your-cert.pem -out your-cert.crt 
```

* * *

## 回答 #2

> 赞同：545
> 
> 时间：2016-07-16T06:59:01.917

**使用 OpenSSL 进行转换**

这些命令允许您将证书和密钥转换为不同的格式，以使其与特定类型的服务器或软件兼容。

*   将 DER 文件 (.crt .cer .der) 转换为 PEM

    ```
    openssl x509 -inform der -in certificate.cer -out certificate.pem 
    ```

*   将 PEM 文件转换为 DER

    ```
    openssl x509 -outform der -in certificate.pem -out certificate.der 
    ```

*   将包含私钥和证书的 PKCS#12 文件 (.pfx .p12) 转换为 PEM

    ```
    openssl pkcs12 -in keyStore.pfx -out keyStore.pem -nodes

    You can add -nocerts to only output the private key or add -nokeys to only output the certificates. 
    ```

*   将 PEM 证书文件和私钥转换为 PKCS#12 (.pfx .p12)

    ```
    openssl pkcs12 -export -out certificate.pfx -inkey privateKey.key -in certificate.crt -certfile CACert.crt 
    ```

*   将 PEM 转换为 CRT（.CRT 文件）

    ```
    openssl x509 -outform der -in certificate.pem -out certificate.crt 
    ```

**OpenSSL 转换 PEM**

*   将 PEM 转换为 DER

    ```
    openssl x509 -outform der -in certificate.pem -out certificate.der 
    ```

*   将 PEM 转换为 P7B

    ```
    openssl crl2pkcs7 -nocrl -certfile certificate.cer -out certificate.p7b -certfile CACert.cer 
    ```

*   将 PEM 转换为 PFX

    ```
    openssl pkcs12 -export -out certificate.pfx -inkey privateKey.key -in certificate.crt -certfile CACert.crt 
    ```

**OpenSSL 转换 DER**

*   将 DER 转换为 PEM

    ```
    openssl x509 -inform der -in certificate.cer -out certificate.pem 
    ```

**OpenSSL 转换 P7B**

*   将 P7B 转换为 PEM

    ```
    openssl pkcs7 -print_certs -in certificate.p7b -out certificate.cer 
    ```

*   将 P7B 转换为 PFX

    ```
    openssl pkcs7 -print_certs -in certificate.p7b -out certificate.cer

    openssl pkcs12 -export -in certificate.cer -inkey privateKey.key -out certificate.pfx -certfile CACert.cer 
    ```

**OpenSSL 转换 PFX**

*   将 PFX 转换为 PEM

    ```
    openssl pkcs12 -in certificate.pfx -out certificate.cer -nodes 
    ```

**通过 OpenSSL 生成 rsa 密钥**

*   在命令行上使用 OpenSSL，您首先需要生成一个公钥和私钥，您应该使用 -passout 参数对这个文件进行密码保护，这个参数可以采用多种不同的形式，因此请参阅 OpenSSL 文档。

    ```
    openssl genrsa -out private.pem 1024 
    ```

*   这将创建一个名为 private.pem 的密钥文件，该文件使用 1024 位。这个文件实际上有私钥和公钥，所以你应该从这个文件中提取公钥：

    ```
    openssl rsa -in private.pem -out public.pem -outform PEM -pubout

    or

    openssl rsa -in private.pem -pubout > public.pem

    or

    openssl rsa -in private.pem -pubout -out public.pem 
    ```

    > 您现在将拥有仅包含您的公钥的 public.pem，您可以与第 3 方自由共享它。您可以通过使用您的公钥自己加密某些内容然后使用您的私钥解密来测试这一切，首先我们需要一些数据来加密：

*   示例文件：

    ```
    echo 'too many secrets' > file.txt 
    ```

*   您现在在 file.txt 中有一些数据，让我们使用 OpenSSL 和公钥对其进行加密：

    ```
    openssl rsautl -encrypt -inkey public.pem -pubin -in file.txt -out file.ssl 
    ```

*   这将创建一个 file.txt 的加密版本，称为 file.ssl，如果您查看此文件，它只是二进制垃圾，对任何人都没有什么用处。现在您可以使用私钥对其进行解密：

    ```
    openssl rsautl -decrypt -inkey private.pem -in file.ssl -out decrypted.txt 
    ```

*   您现在将在decrypted.txt 中有一个未加密的文件：

    ```
    cat decrypted.txt
    |output -> too many secrets 
    ```

**OpenSSL 中的 RSA 工具选项**

*   **姓名**

    > rsa - RSA 密钥处理工具

*   **概要**

    > openssl rsa [-help] [-inform PEM|NET|DER] [-outform PEM|NET|DER] [-in filename] [-passin arg] [-out filename] [-passout arg] [-aes128] [- aes192] [-aes256] [-camellia128] [-camellia192] [-camellia256] [-des] [-des3] [-idea] [-text] [-noout] [-modulus] [-check] [-pubin] [-pubout] [-RSAPublicKey_in] [-RSAPublicKey_out] [-engine id]

*   **描述**

    > rsa 命令处理 RSA 密钥。它们可以在各种形式之间转换，并且可以打印出它们的组件。请注意，此命令使用传统的 SSLeay 兼容格式进行私钥加密：较新的应用程序应使用更安全的 PKCS#8 格式，使用 pkcs8 实用程序。

*   **命令选项**

    ```
    -help 
    ```

    > 打印出使用信息。

    ```
    -inform DER|NET|PEM 
    ```

    > 这指定了输入格式。DER 选项使用与 PKCS#1 RSAPrivateKey 或 SubjectPublicKeyInfo 格式兼容的 ASN1 DER 编码形式。PEM 表单是默认格式：它由带有附加页眉和页脚行编码的 DER 格式 base64 组成。输入 PKCS#8 格式的私钥也被接受。NET 表单是一种在 NOTES 部分中描述的格式。

    ```
    -outform DER|NET|PEM 
    ```

    > 这指定了输出格式，选项与 -inform 选项的含义相同。

    ```
    -in filename 
    ```

    > 如果未指定此选项，则这指定要从中读取密钥的输入文件名或标准输入。如果密钥被加密，将提示输入密码短语。

    ```
    -passin arg 
    ```

    > 输入文件密码源。有关 arg 格式的更多信息，请参阅 openssl 中的 PASS PHRASE ARGUMENTS 部分。

    ```
    -out filename 
    ```

    > 如果未指定此选项，这将指定要写入密钥的输出文件名或标准输出。如果设置了任何加密选项，则会提示输入密码。输出文件名不应与输入文件名相同。

    ```
    -passout password 
    ```

    > 输出文件密码源。有关 arg 格式的更多信息，请参阅 openssl 中的 PASS PHRASE ARGUMENTS 部分。

    ```
    -aes128|-aes192|-aes256|-camellia128|-camellia192|-camellia256|-des|-des3|-idea 
    ```

    > 这些选项在输出之前使用指定的密码加密私钥。提示输入密码短语。如果未指定这些选项，则密钥以纯文本形式写入。这意味着使用 rsa 实用程序读取没有加密选项的加密密钥可用于从密钥中删除密码短语，或者通过设置加密选项可用于添加或更改密码短语。这些选项只能用于 PEM 格式的输出文件。

    ```
    -text 
    ```

    > 除了编码版本之外，还以纯文本形式打印出各种公钥或私钥组件。

    ```
    -noout 
    ```

    > 此选项可防止输出密钥的编码版本。

    ```
    -modulus 
    ```

    > 此选项打印出密钥模数的值。

    ```
    -check 
    ```

    > 此选项检查 RSA 私钥的一致性。

    ```
    -pubin 
    ```

    > 默认情况下，会从输入文件中读取私钥：使用此选项会读取公钥。

    ```
    -pubout 
    ```

    > 默认情况下会输出私钥：使用此选项将输出公钥。如果输入是公钥，则会自动设置此选项。

    ```
    -RSAPublicKey_in, -RSAPublicKey_out 
    ```

    > 与 -pubin 和 -pubout 类似，但使用 RSAPublicKey 格式。

    ```
    -engine id 
    ```

    > 指定引擎（通过其唯一的 id 字符串）将导致 rsa 尝试获取对指定引擎的功能引用，从而在需要时对其进行初始化。然后引擎将被设置为所有可用算法的默认值。

*   **笔记**

    PEM 私钥格式使用页眉和页脚行：

    ```
    -----BEGIN RSA PRIVATE KEY-----

    -----END RSA PRIVATE KEY----- 
    ```

    PEM 公钥格式使用页眉和页脚行：

    ```
    -----BEGIN PUBLIC KEY-----

    -----END PUBLIC KEY----- 
    ```

    PEM RSAPublicKey 格式使用页眉和页脚行：

    ```
    -----BEGIN RSA PUBLIC KEY-----

    -----END RSA PUBLIC KEY----- 
    ```

    > NET 格式是与旧的 Netscape 服务器和 Microsoft IIS .key 文件兼容的格式，它使用未加盐的 RC4 进行加密。它不是很安全，因此只能在必要时使用。
    > 
    > 一些较新版本的 IIS 在导出的 .key 文件中具有附加数据。要将这些与实用程序一起使用，请使用二进制编辑器查看文件并查找字符串“private-key”，然后追溯到字节序列 0x30、0x82（这是 ASN1 SEQUENCE）。从此点开始将所有数据复制到另一个文件，并将其用作带有 -inform NET 选项的 rsa 实用程序的输入。

    **例子**

    要删除 RSA 私钥上的密码短语：

    ```
     openssl rsa -in key.pem -out keyout.pem 
    ```

    要使用三重 DES 加密私钥：

    ```
     openssl rsa -in key.pem -des3 -out keyout.pem 
    ```

    要将私钥从 PEM 转换为 DER 格式：

    ```
     openssl rsa -in key.pem -outform DER -out keyout.der 
    ```

    要将私钥的组件打印到标准输出：

    ```
     openssl rsa -in key.pem -text -noout 
    ```

    仅输出私钥的公共部分：

    ```
     openssl rsa -in key.pem -pubout -out pubkey.pem 
    ```

    以 RSAPublicKey 格式输出私钥的公共部分：

    ```
     openssl rsa -in key.pem -RSAPublicKey_out -out pubkey.pem 
    ```

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2018-02-17T00:46:53.590

要从 pem 文件中提取密钥和证书：

### 提取密钥

```
openssl pkey -in foo.pem -out foo.key 
```

另一种提取密钥的方法...

```
openssl rsa -in foo.pem -out foo.key 
```

### 提取所有证书，包括 CA 链

```
openssl crl2pkcs7 -nocrl -certfile foo.pem | openssl pkcs7 -print_certs -out foo.cert 
```

### 将文本上的第一个证书提取为 DER

```
openssl x509 -in foo.pem -outform DER -out first-cert.der 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2020-02-20T08:31:24.803

## 先决条件

`openssl` 应该安装。在 Windows 上，如果`Git Bash`已安装，请尝试！可以在此处找到替代[二进制文件。](https://wiki.openssl.org/index.php/Binaries)

## 第 1 步：`.key`从`.pem`

```
openssl pkey -in cert.pem -out cert.key 
```

## 第 2 步：`.crt`从`.pem`

```
openssl crl2pkcs7 -nocrl -certfile cert.pem | openssl pkcs7 -print_certs -out cert.crt 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2021-02-14T11:04:40.507

这就是我在windows上所做的。

1.  [从Google](https://code.google.com/archive/p/openssl-for-windows/downloads)下载包含打开的 ssl exe 的 zip 文件
2.  解压缩 zip 文件并进入 bin 文件夹。
3.  转到 bin 文件夹中的地址栏，然后键入 cmd。这将在此文件夹中打开命令提示符。
4.  将 .pem 文件移动/放入此 bin 文件夹中。
5.  运行两个命令。一个创建证书，第二个创建密钥文件

```
openssl x509 -outform der -in yourPemFilename.pem -out certfileOutName.crt
openssl rsa -in yourPemFilename.pem -out keyfileOutName.key 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-23T11:20:20.523

如果你问这个问题是因为你正在使用，`mkcert`那么诀窍是`.pem`文件是证书，`-key.pem`文件是密钥。

（您不需要转换，只需运行`mkcert yourdomain.dev otherdomain.dev`）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-06T01:30:19.413

.crt 以 pem 格式存储证书。所以 .pem 虽然它也可以有其他东西，比如 csr（证书签名请求）、私钥、公钥或其他证书，但当它只存储一个证书时，它与 .crt 是一样的。

pem 是一个 base 64 编码文件，每个部分之间有一个页眉和一个页脚。

要提取特定部分，像下面这样的 perl 脚本是完全有效的，但可以随意使用一些 openssl 命令。

```
 perl -ne "\$n++ if /BEGIN/; print if \$n == 1 && /BEGIN/.../END/;" mydomain.pem 
```

其中 ==1 可以更改为您需要的任何部分。显然，如果您确切知道所需的页眉和页脚，并且文件中只有其中一个（通常情况下，如果您只保留证书和密钥），您可以简化它：

```
 perl -ne "print if /^-----BEGIN CERTIFICATE-----\$/.../END/;" mydomain.pem 
```

# iphone - 两个非常相似的应用程序，具有不同的文本和 UI 图形

> ID：13732837
> 
> 赞同：1
> 
> 时间：2012-12-05T21:31:43.330
> 
> 标签：iphone, objective-c, ios, design-patterns, app-store

我要开发两个非常相似的应用程序，逻辑是完全一样的，但是api调用base URLs，文本和UI图形（比如背景等）会不同，但是所有的视图都是一样的（按钮，标签在同一个地方）。它是测验应用程序。

如何以聪明的方式做到这一点？不重复代码等。

我考虑过设置工作区，添加带有 UI 的包、带有文本和 URL 的 plist，然后根据项目名称或标识符使用其中一个包等。

也许有人可以分享其他东西？更有效的方式。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:54:16.143

> 我考虑过 [...] 添加带有 UI、plist 文本和 URL 的捆绑包

你写了你自己的答案。此外，您设置了两个目标。每个项目一个。在目标中，您定义了一个环境变量，您可以在代码中使用它来在包/ URL 之间切换。

您应该编写一个 Helper 类来获取资源。该助手类检查环境变量并返回正确的资源。

（您可能想要为和编写您自己的版本的类别`UIImage`。`NSURL`这样`NSLocalizedString`您就不需要检查代码中其他任何地方的任何条件/设置。）

# asp.net - 在运行时动态调整 EDMX 定义

> ID：13732846
> 
> 赞同：0
> 
> 时间：2012-12-05T21:32:13.843
> 
> 标签：asp.net, entity-framework, asp.net-web-api, runtime, odata

我们有一个 EF edmx 文件用于定义 db 的概念模型。这不是用于从我们的 odata 提供程序访问数据库。

手头的问题是我们发现由于 edmx 的大小（非常大），某些事情会导致 EF 在某些情况下真正陷入困境。主要打击是表之间的关系。当在表之间添加关系时，当 odata 或 webapi 显示该数据时，延迟似乎呈指数增长。

情况是我们只在所有运行时案例的 5% 中使用这些关系。

我的问题是，有没有办法在运行时动态更改 edmx 以在我们需要它们时添加关系，因此在 95% 的所有其他情况下它们不会影响性能？这是否可以在运行时更改 edmx 定义并且对此有影响吗？

谢谢

# mysql - 映射关系——外键或映射表

> ID：13732851
> 
> 赞同：0
> 
> 时间：2012-12-05T21:32:24.480
> 
> 标签：mysql, sql-server, database, oracle

尝试在这里获得一些关于创建模式关系时哪种选择更好的专业想法

我大致从这篇[文章](https://dba.stackexchange.com/questions/5239/indexing-uniqueidentifier-foreign-key-or-intermediary-mapping-table)中找到了一个想法，但仍然试图获得更多的想法。

一个简单的场景可能是这样的：

```
class <--> Student <--> Teacher <--> class 
```

（假设一个老师可以教多门课）这是`many-to-many`一轮关系的正常情况。并且查询可以从任何对等点开始到任何方向。那么还有什么更好的设计呢？

我知道在一对一的关系中，映射表绝对是一种浪费，但是映射表解决方案`ONLY`对关系有好处`many-to-many`吗，就像提到的那个帖子一样？如果我们想用方向扩展多对多关系。如果关系`one-direction`不是`bidirectional`，答案会不同吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:57:31.130

一些简单的规则：

对于一对一的关系，外键可以保存在关系中涉及的任何一个表中，引用另一个表。

对于一对多关系，关系多方的表应该保存外键。

对于多对多关系，您可以创建一个关联表（用您的话来说是映射表），它是第三个表，其中包含多对多关系中涉及的两个表的外键。

例如，假设我们有表`STUDENT`、`CLASS`和`TEACHER`。通常， 和 之间存在多对多的关系，`STUDENT`并且`CLASS`从 TEACHER 到 CLASS 是一对多的关系（假设一个班级只有一位老师）。因此，这些表可能如下所示：

```
STUDENT: STUDENT_ID, STUDENT_NAME, etc.
CLASS: CLASS_ID, TEACHER_ID (foreign key), CLASS_NAME, etc.
TEACHER: TEACHER_ID, NAME, etc.
STUDENT_CLASS (mapping table): STUDENT_ID (foreign key), CLASS_ID (foreign key), GRADE, etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:53:21.537

如果你有一个多对多的关系，那么，是的，你需要一个映射表。确实没有其他合理的方法可以在关系数据库中存储有关多对多关系的信息（当然，有许多不合理的方法可以这样做）。

如果您希望关系是单向的（这似乎很奇怪——我无法想象实体 A 与实体 B 有关系而 B 与 A 没有关系的情况，所以我倾向于怀疑数据如果您想实现类似的东西，模型不正确），您仍然会使用映射表。您可能会在映射表中添加另一列来存储`DIRECTION`（即“A -> B”或“B -> A”）。

# html - 自动跨度宽度

> ID：13732854
> 
> 赞同：1
> 
> 时间：2012-12-05T21:32:43.013
> 
> 标签：html, css

我有以下 HTML 作为标题。和是`.left`空`.right`跨度。我有 .left 的特定宽度，但`.text`宽度并不总是相同。我想为 .left （固定宽度）和 .left 设置背景`.right`。`.right`应该获得父元素（h1）中的所有剩余空间。那怎么办？

```
<h1>
    <span class="left"></span>
    <span class="text">Text</span>
    <span class="right"></span>
</h1> 
```

我正在尝试遵循不起作用的 CSS：

```
.left{
    background: yellow;
    width: 30px;
    height: 20px;
    display: inline-block;
}

.right{
    display: inline-block;
    background: blue;   
} 
```

这是 JSFiddle 链接：http: [//jsfiddle.net/jMR8u/](http://jsfiddle.net/jMR8u/)

这是我想要得到的：![在此处输入图像描述](../Images/ccd28a91636f085ccca90686db4b43e6.png)

这个想法是在h1中设置一个背景图像，除了`.text`跨度，问题是我不能为.text设置背景，否则会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:39:55.687

**此版本将拉伸以适应内容`.text`并且应该是跨浏览器的。**

您可以通过将蓝色（右）背景设为以下边框来伪造它`.text`：

```
.text { border-right: 1000px solid; } 
```

然后，`.right`向左移动 1000px：

```
.right { margin-left: -1000px; } 
```

给 一个宽度`.left`，使每个元素`inline-block`，隐藏右侧多余的蓝色边框，并确保`.text`不要`.right`换行：

```
.left { width: 200px; }
.left, .text, .right { display: inline-block; }
h1 { overflow: hidden; white-space: nowrap; } 
```

并给它颜色！

```
body { background: green; }
.left { background: red; }
.text { border-color: blue; } 
```

这是一个 JSFiddle[演示](http://jsfiddle.net/GNsqN/)：

![JSFiddle 的屏幕截图](../Images/c2e3991335f8eb583b23623eaa3d9d60.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:47:55.740

如果我解释你的形象正确..这就是答案[http://jsfiddle.net/jMR8u/4/](http://jsfiddle.net/jMR8u/4/)

```
h1{
    border: 1px solid red;
    position: relative; 
}

.left{
    background: yellow;
    width: 30px;
    height: 20px;
    display: inline-block;
}

.right{
    display: inline-block;
    background: blue;
    position: absolute; 
    z-index: 99;
    height: 20px;
    width: 100%;
}
​.text {
    height: 20px;
    width: 150px;
    display: inline-block;
    position: relative;
    z-index; 101;
}​ 
```

好的，然后使用带有 z-index 和定位的层 ..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T21:51:11.270

您可以使用 flexbox（但使用[新语法](http://css-tricks.com/old-flexbox-and-new-flexbox/)）。可悲的是，它目前只适用于[Chrome 和 Opera](http://caniuse.com/#feat=flexbox)，所以它的用处有限：

```
h1 { display: -webkit-flex; display: flex; }
.left { width: 30px; }
.right { flex: 1; -webkit-flex: 1; } /* This makes it fluid. */
.left { background: yellow; }
.right { background: blue; } 
```

这是一个 JSFiddle 演示：http: [//jsfiddle.net/FN7vQ/](http://jsfiddle.net/FN7vQ/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T22:24:27.070

如果您可以将宽度设置为 .text 跨度和 h1 元素。

```
body{
background:green;
}

h1{
    border: 1px solid red;
    display:table;
    width:100%;
}

.left{
    background: yellow;
    width: 30px;
    display: table-cell;
}

.right{
    display: table-cell;
    background: blue;
}
.text {
    display:table-cell;
    width: 150px;   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-08T15:12:45.240

如果我正确理解了您的要求。你应该改变你的标记如下

```
h1 {
  background: #660000;
  padding-left: 30px;
  line-height: 1.1;
}
h1 span {
  background: #fff;
  padding: 0 3px;
  color: #600;
}
```

```
<h1>
  <span>
  Lorem, ipsum dolor. you are doing great  
  </span>  
</h1>
```

CSS在下面

# jquery - 允许带有哈希的 URL 打开选项卡，但阻止滚动到它？

> ID：13732857
> 
> 赞同：1
> 
> 时间：2012-12-05T21:32:55.683
> 
> 标签：jquery, url, hash

我有一个 jQuery 选项卡元素，其中每个选项卡都向 URL 添加一个哈希，如下所示：

```
www.mysite.com/services#one
www.mysite.com/services#two
www.mysite.com/services#three 
```

我想阻止滚动到该元素（选项卡）的默认浏览器行为，我可以使用 preventDefault 来做到这一点。

但我还想保持链接到已打开特定选项卡的页面的能力。因此，如果我访问 www.mysite.com/services#three，它应该会将我带到打开第三个选项卡的那个页面，但它不应该滚动到页面中的那个位置。

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:37:32.940

不完全可能，但您可以在基于片段加载页面后打开选项卡：

```
//bind click events above

//assumes that ID of tab is the same as the fragment
$(window.location.hash).click();

//scroll to the top, if you really want/need to:
$(window).scrollTop(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:39:09.373

一个解决方案可能是。

```
$(document).ready(function() {
  $.scrollTo('0px');
}); 
```

[资源](http://www.inmotiondesign.nl/playground/?p=20)

# mysql - 返回分组变量排名最低的 ID

> ID：13732858
> 
> 赞同：1
> 
> 时间：2012-12-05T21:32:57.353
> 
> 标签：mysql

对于每个 ID 号，我需要按类值对 ID 号进行分组，当有重复的类值时使用最低等级...我尝试了几次连接但没有成功。希望对建议的任何代码进行非常简短的描述。谢谢！

表结构：

```
ID  Rank    Class
A   1       x
A   2       x
A   3       y
A   4       y
B   1       x
B   2       x
B   3       y
B   4       y 
```

期望的结果：

```
ID  Rank    Class
A   1       x
A   3       y
B   1       x
B   3       y 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:35:56.150

`MIN()`您应该使用带有and`GROUP BY`的聚合函数：`id``class`

```
select id, min(rank) as MinRank, class
from yourtable
group by id, class 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/14381/2)

```
| ID | MinRank | CLASS |
--------------------------
|  A |       1 |     x |
|  A |       3 |     y |
|  B |       1 |     x |
|  B |       3 |     y | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:36:09.243

使用[MIN](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_min)作为聚合函数的简单[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/select.html)就可以了。

```
SELECT `ID`, 
       Min(`Rank`) AS `Rank`, 
       `Class` 
FROM   tbl1 
GROUP  BY `ID`, 
          `Class` 
```

# python - 定位 libmysqlclient_r.so.16 问题

> ID：13732864
> 
> 赞同：1
> 
> 时间：2012-12-05T21:33:15.997
> 
> 标签：python, django, linux, mysql-python

喜欢首先建议我是新手，而我的网页设计师不在国外。我有以下问题并寻求一些建议。我已经重新安装了 mysqldb 并升级了软件包。我和我的托管公司谈过，他们建议他们升级到 mysql 5.5。

我搜索了网络和 stackoverflow，并尝试了许多不同的解决方案，如上所述。

这是服务器上错误日志中的错误：

```
 [Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr: Traceback (most recent call last):
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home1/elitejdm/python/lib/python2.5/site-packages/flup-1.0.3.dev_20110405-py2.5.egg/flup/server/fcgi_base.py", line 574, in run
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     protocolStatus, appStatus = self.server.handler(self)
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home1/elitejdm/python/lib/python2.5/site-packages/flup-1.0.3.dev_20110405-py2.5.egg/flup/server/fcgi_base.py", line 1159, in handler
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     result = self.application(environ, start_response)
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home/elitejdm/python/lib/python2.5/site-packages/django/core/handlers/wsgi.py", line 194, in __call__
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     self.load_middleware()
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home/elitejdm/python/lib/python2.5/site-packages/django/core/handlers/base.py", line 38, in load_middleware
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     mod = __import__(mw_module, {}, {}, [''])
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home/elitejdm/python/lib/python2.5/site-packages/django/contrib/flatpages/middleware.py", line 1, in 
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     from django.contrib.flatpages.views import flatpage
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home/elitejdm/python/lib/python2.5/site-packages/django/contrib/flatpages/views.py", line 1, in 
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     from django.contrib.flatpages.models import FlatPage
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home/elitejdm/python/lib/python2.5/site-packages/django/contrib/flatpages/models.py", line 2, in 
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     from django.db import models
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home/elitejdm/python/lib/python2.5/site-packages/django/db/__init__.py", line 17, in 
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     backend = __import__('%s%s.base' % (_import_path, settings.DATABASE_ENGINE), {}, {}, [''])
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:   File "/home/elitejdm/python/lib/python2.5/site-packages/django/db/backends/mysql/base.py", line 12, in 
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr:     raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
[Wed Dec 05 12:12:47 2012] [warn] [client 146.145.36.41] mod_fcgid: stderr: ImproperlyConfigured: Error loading MySQLdb module: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory 
```

这是同样的错误，但通过python：

python jdm_cars.fcgi

```
WSGIServer: missing FastCGI param REQUEST_METHOD required by WSGI!
WSGIServer: missing FastCGI param SERVER_NAME required by WSGI!
WSGIServer: missing FastCGI param SERVER_PORT required by WSGI!
WSGIServer: missing FastCGI param SERVER_PROTOCOL required by WSGI!
/home1/elitejdm/python/lib/python2.5/site-packages/MySQL_python_embedded-1.2.3-py2.5-linux-x86_64.egg/_mysql.py:3: UserWarning: Module _mysql was already imported from /home1/elitejdm/python/lib/python2.5/site-packages/MySQL_python_embedded-1.2.3-py2.5-linux-x86_64.egg/_mysql.py, but /home1/elitejdm/public_html/new_elitejdm/MySQL-python-1.2.3 is being added to sys.path
  import sys, pkg_resources, imp
Traceback (most recent call last):
  File "/home1/elitejdm/python/lib/python2.5/site-packages/flup-1.0.3.dev_20110405-py2.5.egg/flup/server/fcgi_base.py", line 574, in run
    protocolStatus, appStatus = self.server.handler(self)
  File "/home1/elitejdm/python/lib/python2.5/site-packages/flup-1.0.3.dev_20110405-py2.5.egg/flup/server/fcgi_base.py", line 1159, in handler
    result = self.application(environ, start_response)
  File "/home/elitejdm/python/lib/python2.5/site-packages/django/core/handlers/wsgi.py", line 194, in __call__
    self.load_middleware()
  File "/home/elitejdm/python/lib/python2.5/site-packages/django/core/handlers/base.py", line 38, in load_middleware
    mod = __import__(mw_module, {}, {}, [''])
  File "/home/elitejdm/python/lib/python2.5/site-packages/django/contrib/flatpages/middleware.py", line 1, in <module>
    from django.contrib.flatpages.views import flatpage
  File "/home/elitejdm/python/lib/python2.5/site-packages/django/contrib/flatpages/views.py", line 1, in <module>
    from django.contrib.flatpages.models import FlatPage
  File "/home/elitejdm/python/lib/python2.5/site-packages/django/contrib/flatpages/models.py", line 2, in <module>
    from django.db import models
  File "/home/elitejdm/python/lib/python2.5/site-packages/django/db/__init__.py", line 17, in <module>
    backend = __import__('%s%s.base' % (_import_path, settings.DATABASE_ENGINE), {}, {}, [''])
  File "/home/elitejdm/python/lib/python2.5/site-packages/django/db/backends/mysql/base.py", line 12, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
ImproperlyConfigured: Error loading MySQLdb module: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory
Status: 500 Internal Server Error
Content-Type: text/html

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>Unhandled Exception</title>
</head><body>
<h1>Unhandled Exception</h1>
<p>An unhandled exception was thrown by the application.</p>
</body></html> 
```

在写这篇文章时，我从我的托管公司那里找到了更多信息，我被告知以下内容

基本上我们将 libmysqlclient 更新为：libmysqlclient_r.so.18

来自：libmysqlclient_r.so.16

> 由于处于共享托管环境中，我们必须不时进行这些更新。看来这就是导致您悲伤/问题的原因。
> 
> 您要么需要在服务器上本地重新安装 libmysqlclient_r.so.16，而无需 root 访问权限。（没有百胜）
> 
> 或 B 配置您的脚本以处理新的 .18 版本。
> 
> 如果您执行第一种方式，则将来不需要更新它。如果您采用第二种方式，我们决定再次更新。它将要求您再次更新脚本

对此很新，所以我不知道该怎么做，但愿意学习......请任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T15:57:25.417

[Python模块问题](https://stackoverflow.com/questions/13573359/python-module-issue)

请查看此线程的第二个答案。修复了我的问题。

# twitter-bootstrap - Twitter Bootstrap 输入字段

> ID：13732875
> 
> 赞同：1
> 
> 时间：2012-12-05T21:34:04.000
> 
> 标签：twitter-bootstrap

在[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)中，以下代码提供了样式精美的输入字段，其中按钮相互连接。

```
<div class="input-append">
  <input class="span2" id="appendedInputButton" type="text">
  <button class="btn" type="button">Go!</button>
</div> 
```

我的问题是如何在具有相同样式的按钮之前有两个相邻的输入字段（两者之间没有双边框）

我试着做

```
<div class="input-append">
  <input class="span2" id="appendedInputButton" type="text">
  <input class="span2" id="appendedInputButton" type="text">
  <button class="btn" type="button">Go!</button>
</div> 
```

但造型坏了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:04:59.230

我希望下面的代码会有所帮助..

```
#appendedInputButton2{
  border-left:0;
}
```

```
<div class="input-append">
  <input class="span2" id="appendedInputButton1" type="text">
  <input class="span2" id="appendedInputButton2" type="text">
  <button class="btn" type="button">Go!</button>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-18T21:11:02.127

如果您使用的是引导程序，那么按钮组就是您要寻找的东西：

```
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<div class="btn-group" role="group" aria-label="Basic example">
  <button type="button" class="btn btn-secondary">Left</button>
  <button type="button" class="btn btn-secondary">Middle</button>
  <button type="button" class="btn btn-secondary">Right</button>
</div>
```

# iphone - 并发方式加载webView的多个loadRequest

> ID：13732878
> 
> 赞同：2
> 
> 时间：2012-12-05T21:34:17.947
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

目前，我尝试同时加载大约 4 到 5 个不同的 webView，但是我得出的结论是，一次只能加载一个 loadRequest。虽然我已经为每个 webview 创建了自定义类，但 loadRequest 并没有被调用，而如果有另一个 webview 的 loadRequest 正在使用。

无论如何将这些调用保留在不同的线程中以使其工作或在调度机制中使用？只是想弄清楚是否有替代方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:05:19.077

使用 NSUrlConnection 预加载数据，无线程

```
 //for EACH url to load
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:tweet[@"profile_image_url"]]];
    [NSURLConnection sendAsynchronousRequest:request
                                       queue:[NSOperationQueue mainQueue] // one should ideally use a different queue here to free main thread and ONLY do the imageView.image setting in Main thread
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                               if(!error) {
                                   //load webview! with Data maybe!
                               }
                           }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:44:32.387

由于您似乎只有 4 或 5 个 Web 视图，因此在调度队列中调用它们并不是那么低效。如果有 100 个请求，那么您需要考虑一些策略。

```
NSArray *myWebSites = [NSArray arrayWithObjects:@"www.cnn.com",@"www.fox.com",....,nil];

for(url in myWebsites){
    dispatch_async(dispatch_get_global_queue, ^{
        // get the data from the url.

        // do the display in main queue
        dispatch_async(dispatch_get_mainqueue, ^{
            //load the web view;
        }
    }
} 
```

# php - 如何将所有类别添加到数组中并提取类别名称并将其与自定义元框一起使用

> ID：13732880
> 
> 赞同：0
> 
> 时间：2012-12-05T21:34:19.747
> 
> 标签：php, arrays, wordpress, categories, meta-boxes

基本上我需要向页面添加自定义元框，其中一个选项必须是以前帖子中的类别列表。我已经设法添加元框并将类别包装在一个数组中，但是我必须在页面上缺少一些东西，只显示类别名称的第一个字母。这是结果的屏幕截图： ![问题截图](../Images/39422187164fd88c963ae4fb9976855f.png)

我无法弄清楚我错过了什么。这是元框的代码：

```
 // Check if is page-homepage.php template
        $post_id = (isset($_GET['post'])) ? $_GET['post'] : ((isset($_POST['post_ID'])) ? $_POST['post_ID'] : false);

        if ($post_id) : 
        $post_template = get_post_meta($post_id, '_wp_page_template', true);
        if ($post_template == 'page-homepage.php') {

        // Add the Meta Box
        function home_custom_meta_box() {
            add_meta_box(
                'home_meta_box', // $id
                'Custom Meta Box', // $title 
                'home_show_custom_meta_box', // $callback
                'page', // $page
                'normal', // $context
                'high'); // $priority
        }
        add_action('add_meta_boxes', 'home_custom_meta_box');

        // Field Array
        $prefix = 'custom_';
        $home_custom_meta_fields = array(
            array(
                'label' => 'Title for the middle column',
                'desc'  => 'Optional',
                'id'    => $prefix.'title1',
                'type'  => 'text'
            ),
                array(
                'label' => 'Category',
                'id'    => $prefix.'category',
                'type'  => 'select',
                'options' => $wp_cats
            ),
            array(
                'label' => 'Title for the right column',
                'desc'  => 'Optional',
                'id'    => $prefix.'title2',
                'type'  => 'text'
            ),
            array(
                'label' => 'Textarea',
                'desc'  => 'A description for the field.',
                'id'    => $prefix.'textarea',
                'type'  => 'textarea'
            ),
            array(
                'label' => 'Checkbox Input',
                'desc'  => 'A description for the field.',
                'id'    => $prefix.'checkbox',
                'type'  => 'checkbox'
            ),
            array(
                'label' => 'Select Box',
                'desc'  => 'A description for the field.',
                'id'    => $prefix.'select',
                'type'  => 'select',
                'options' => array (
                    'one' => array (
                        'label' => 'Option One',
                        'value' => 'one'
                    ),
                    'two' => array (
                        'label' => 'Option Two',
                        'value' => 'two'
                    ),
                    'three' => array (
                        'label' => 'Option Three',
                        'value' => 'three'
                    )
                )
            ),
            array (
                'label' => 'Radio Group',
                'desc'  => 'A description for the field.',
                'id'    => $prefix.'radio',
                'type'  => 'radio',
                'options' => array (
                    'one' => array (
                        'label' => 'Option One',
                        'value' => 'one'
                    ),
                    'two' => array (
                        'label' => 'Option Two',
                        'value' => 'two'
                    ),
                    'three' => array (
                        'label' => 'Option Three',
                        'value' => 'three'
                    )
                )
            ),
            array (
                'label' => 'Checkbox Group',
                'desc'  => 'A description for the field.',
                'id'    => $prefix.'checkbox_group',
                'type'  => 'checkbox_group',
                'options' => array (
                    'one' => array (
                        'label' => 'Option One',
                        'value' => 'one'
                    ),
                    'two' => array (
                        'label' => 'Option Two',
                        'value' => 'two'
                    ),
                    'three' => array (
                        'label' => 'Option Three',
                        'value' => 'three'
                    )
                )
            ),
            array(
                'label' => 'Post List',
                'desc'  => 'A description for the field.',
                'id'    =>  $prefix.'post_id',
                'type'  => 'post_list',
                'post_type' => array('post','page')
            ),
        );

        // The Callback
        function home_show_custom_meta_box() {
            global $home_custom_meta_fields, $post;
            // Use nonce for verification
            echo '<input type="hidden" name="custom_meta_box_nonce" value="'.wp_create_nonce(basename(__FILE__)).'" />';

            // Begin the field table and loop
            echo '<table class="form-table">';
            foreach ($home_custom_meta_fields as $field) {
                // get value of this field if it exists for this post
                $meta = get_post_meta($post->ID, $field['id'], true);
                // begin a table row with
                echo '<tr>
                        <th><label for="'.$field['id'].'">'.$field['label'].'</label></th>
                        <td>';
                        switch($field['type']) {
                            // text
                            case 'text':
                                echo '<input type="text" name="'.$field['id'].'" id="'.$field['id'].'" value="'.$meta.'" size="30" />
                                        <br /><span class="description">'.$field['desc'].'</span>';
                            break;
                            // textarea
                            case 'textarea':
                                echo '<textarea name="'.$field['id'].'" id="'.$field['id'].'" cols="60" rows="4">'.$meta.'</textarea>
                                        <br /><span class="description">'.$field['desc'].'</span>';
                            break;
                            // checkbox
                            case 'checkbox':
                                echo '<input type="checkbox" name="'.$field['id'].'" id="'.$field['id'].'" ',$meta ? ' checked="checked"' : '','/>
                                        <label for="'.$field['id'].'">'.$field['desc'].'</label>';
                            break;
                            // select
                            case 'select':
                                echo '<select name="'.$field['id'].'" id="'.$field['id'].'">';
                                foreach ($field['options'] as $option) {
                                    echo '<option', $meta == $option['value'] ? ' selected="selected"' : '', ' value="'.$option['value'].'">'.$option['label'].'</option>';
                                }
                                echo '</select><br /><span class="description">'.$field['desc'].'</span>';
                            break;
                            // radio
                            case 'radio':
                                foreach ( $field['options'] as $option ) {
                                    echo '<input type="radio" name="'.$field['id'].'" id="'.$option['value'].'" value="'.$option['value'].'" ',$meta == $option['value'] ? ' checked="checked"' : '',' />
                                            <label for="'.$option['value'].'">'.$option['label'].'</label><br />';
                                }
                                echo '<span class="description">'.$field['desc'].'</span>';
                            break;
                            // checkbox_group
                            case 'checkbox_group':
                                foreach ($field['options'] as $option) {
                                    echo '<input type="checkbox" value="'.$option['value'].'" name="'.$field['id'].'[]" id="'.$option['value'].'"',$meta && in_array($option['value'], $meta) ? ' checked="checked"' : '',' /> 
                                            <label for="'.$option['value'].'">'.$option['label'].'</label><br />';
                                }
                                echo '<span class="description">'.$field['desc'].'</span>';
                            break;
                            // tax_select
                            case 'tax_select':
                                echo '<select name="'.$field['id'].'" id="'.$field['id'].'">
                                        <option value="">Select One</option>'; // Select One
                                $terms = get_terms($field['id'], 'get=all');
                                $selected = wp_get_object_terms($post->ID, $field['id']);
                                foreach ($terms as $term) {
                                    if (!empty($selected) && !strcmp($term->slug, $selected[0]->slug)) 
                                        echo '<option value="'.$term->slug.'" selected="selected">'.$term->name.'</option>'; 
                                    else
                                        echo '<option value="'.$term->slug.'">'.$term->name.'</option>'; 
                                }
                                $taxonomy = get_taxonomy($field['id']);
                                echo '</select><br /><span class="description"><a href="'.get_bloginfo('home').'/wp-admin/edit-tags.php?taxonomy='.$field['id'].'">Manage '.$taxonomy->label.'</a></span>';
                            break;
                            // post_list
                            case 'post_list':
                            $items = get_posts( array (
                                'post_type' => $field['post_type'],
                                'posts_per_page' => -1
                            ));
                                echo '<select name="'.$field['id'].'" id="'.$field['id'].'">
                                        <option value="">Select One</option>'; // Select One
                                    foreach($items as $item) {
                                        echo '<option value="'.$item->ID.'"',$meta == $item->ID ? ' selected="selected"' : '','>'.$item->post_type.': '.$item->post_title.'</option>';
                                    } // end foreach
                                echo '</select><br /><span class="description">'.$field['desc'].'</span>';
                            break;
                            // date
                            case 'date':
                                echo '<input type="text" class="datepicker" name="'.$field['id'].'" id="'.$field['id'].'" value="'.$meta.'" size="30" />
                                        <br /><span class="description">'.$field['desc'].'</span>';
                            break;
                            // slider
                            case 'slider':
                            $value = $meta != '' ? $meta : '0';
                                echo '<div id="'.$field['id'].'-slider"></div>
                                        <input type="text" name="'.$field['id'].'" id="'.$field['id'].'" value="'.$value.'" size="5" />
                                        <br /><span class="description">'.$field['desc'].'</span>';
                            break;
                            // image
                            case 'image':
                                $image = get_template_directory_uri().'/images/image.png';  
                                echo '<span class="custom_default_image" style="display:none">'.$image.'</span>';
                                if ($meta) { $image = wp_get_attachment_image_src($meta, 'medium'); $image = $image[0]; }               
                                echo    '<input name="'.$field['id'].'" type="hidden" class="custom_upload_image" value="'.$meta.'" />
                                            <img src="'.$image.'" class="custom_preview_image" alt="" /><br />
                                                <input class="custom_upload_image_button button" type="button" value="Choose Image" />
                                                <small>&nbsp;<a href="#" class="custom_clear_image_button">Remove Image</a></small>
                                                <br clear="all" /><span class="description">'.$field['desc'].'</span>';
                            break;
                            // repeatable
                            case 'repeatable':
                                echo '<a class="repeatable-add button" href="#">+</a>
                                        <ul id="'.$field['id'].'-repeatable" class="custom_repeatable">';
                                $i = 0;
                                if ($meta) {
                                    foreach($meta as $row) {
                                        echo '<li><span class="sort hndle">|||</span>
                                                    <input type="text" name="'.$field['id'].'['.$i.']" id="'.$field['id'].'" value="'.$row.'" size="30" />
                                                    <a class="repeatable-remove button" href="#">-</a></li>';
                                        $i++;
                                    }
                                } else {
                                    echo '<li><span class="sort hndle">|||</span>
                                                <input type="text" name="'.$field['id'].'['.$i.']" id="'.$field['id'].'" value="" size="30" />
                                                <a class="repeatable-remove button" href="#">-</a></li>';
                                }
                                echo '</ul>
                                    <span class="description">'.$field['desc'].'</span>';
                            break;
                        } //end switch
                echo '</td></tr>';
            } // end foreach
            echo '</table>'; // end table
        }

        // Save the Data
        function home_save_custom_meta($post_id) {
            global $home_custom_meta_fields;

            // verify nonce
            if (!wp_verify_nonce($_POST['custom_meta_box_nonce'], basename(__FILE__))) 
                return $post_id;
            // check autosave
            if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE)
                return $post_id;
            // check permissions
            if ('page' == $_POST['post_type']) {
                if (!current_user_can('edit_page', $post_id))
                    return $post_id;
                } elseif (!current_user_can('edit_post', $post_id)) {
                    return $post_id;
            }

            // loop through fields and save the data
            foreach ($home_custom_meta_fields as $field) {
                $old = get_post_meta($post_id, $field['id'], true);
                $new = $_POST[$field['id']];
                if ($new && $new != $old) {
                    update_post_meta($post_id, $field['id'], $new);
                } elseif ('' == $new && $old) {
                    delete_post_meta($post_id, $field['id'], $old);
                }
            } // enf foreach
        }
        add_action('save_post', 'home_save_custom_meta');

        } 
```

以下是我如何将所有类别包装到一个数组中：

```
 // Get all categories from WP and create a dropdown
        $categories = get_categories('hide_empty=0&orderby=name');
        $wp_cats = array();
        foreach ($categories as $category_list ) {
               $wp_cats[$category_list->cat_ID] = $category_list->cat_name;
        }
        array_unshift($wp_cats, "Choose a category"); 
```

这是我对 $wp_cats 数组的期望：

```
'options' => array (
    'one' => array (
        'label' => 'Option One',
        'value' => 'one'
    ),
    'two' => array (
        'label' => 'Option Two',
        'value' => 'two'
    ),
    'three' => array (
        'label' => 'Option Three',
        'value' => 'three'
    )
) 
```

这是带有详细信息的图像： ![在此处输入图像描述](../Images/ea410cf245c59307ca141c824bcb19c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:43:42.753

问题在于类别如何存储在与元框代码无关的数组中。为了解决这个问题，我使用了一个函数（由 Jonathan Kuhn 提供），它以我可以与 mate box 代码一起使用的方式包装了类别。这是功能：

```
// Wrap all categories in a function
function wcat2() {
    $out = array();
    $categories = get_categories();
    foreach( $categories as $category ) {
        $out[$category->term_id] = array(
            'label' => $category->slug,
            'value' => $category->term_id
        );
    }
    //return array('options'=>$out);
    return $out;
} 
```

此函数应替换此代码：

```
 // Get all categories from WP and create a dropdown
    $categories = get_categories('hide_empty=0&orderby=name');
    $wp_cats = array();
    foreach ($categories as $category_list ) {
           $wp_cats[$category_list->cat_ID] = $category_list->cat_name;
    }
    array_unshift($wp_cats, "Choose a category"); 
```

现在您所要做的就是从元框中的数组中调用函数：

```
 array(
            'label' => 'Category',
            'id'    => $prefix.'category',
            'type'  => 'select',
            'options' => wcat2()
        ), 
```

这样，您可以拥有一个元框，该框将从 WordPress 中提取所有使用的类别，因此用户可以从元框选项中选择类别，而不必编写类别名称。

# android - Android phonegap 和 SockJS

> ID：13732886
> 
> 赞同：1
> 
> 时间：2012-12-05T21:34:29.380
> 
> 标签：android, sockets, cordova, websocket, sockjs

有没有办法让 Android 与 SockJs 一起在 Phonegap 中打包的应用程序中进行套接字连接？目前，我有以下代码在 iOS 上工作但在 Android 中失败，因为 Android 中套接字连接的 file:/// 限制。

```
var sock = MyEnt.connect('servicename', 'http://socket.api.somewhere.be/api', {debug: true});
var entity_plays = sock.subscribe('plays');
entity_plays.on("play", function(data, msg) {
       //Do something with data
       console.log(data,msg)
}, {backlog: 10}); 
```

我已经更改了客户端隐私的服务名称，但由于上述代码适用于 iOS PG 版本（以及桌面浏览器），这无关紧要。MyEnt 对象是一个包含 SockJS 类中的自定义函数的小包装器，但在 iOS 上同样可以完美运行

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:34:52.713

SockJS 应该可以从 phonegap 正常工作。通过本机 Web 套接字或 xhr-streaming。`file://`在[文档](https://github.com/sockjs/sockjs-client)中查找。

# javascript - 如何对 JavaScript 函数中的每个参数做一些事情？

> ID：13732888
> 
> 赞同：0
> 
> 时间：2012-12-05T21:34:38.743
> 
> 标签：javascript

鉴于此功能：

```
function foo( a,b,c ) {
    //
} 
```

你怎么能做某事，比如对每个参数使用 console.log() ？我知道您可以使用 arguments 关键字来查看参数。参数似乎返回看起来像数组的东西（但类型为“对象”[suprise.. not]），但它不支持.forEach，我使用的是 Chrome。

我尝试将函数修改为此，并希望它能够工作：

```
function foo( a,b,c ) {
    arguments.forEach(function( arg ){
        console.log( arg );
    });
} 
```

你得到 TypeError: Object # has no method 'forEach' 的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:36:15.360

该`arguments`对象没有`forEach`方法，因此您需要使用`for`循环或`for...in`循环对其进行迭代。

```
​function foo () {
    for (var i = 0; i < arguments.length; i++) {
        console.log(arguments[i]);    
    }
}

foo("Foo", { "bar": 0 }); // Output: Foo, Object {bar: 0} 
```

或者

```
​function foo () {
    for (var arg in arguments) {
        console.log(arguments[arg]); 
    }    
}

foo("Foo", "Bar"); // Output: Foo, Bar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T21:38:55.257

或者您可以使用 hack：

```
Array.prototype.forEach.call(arguments, function (arg) {
    console.log(arg);
}); 
```

`arguments`不是数组，但它足够接近，您可以应用 Array 的原型并使用常规数组函数。我们只是抓住了 Array 的实现并将其强行应用于参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T21:37:36.657

来自[**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)：

```
// convert to array
var args = Array.prototype.slice.call(arguments);
args.forEach... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T21:36:13.640

做一个循环`arguments.length`。`arguments`不是一个数组，所以它没有`forEach`原型方法。

```
for ( var i = 0, l = arguments.length; i<l; ++i ) {
  doSomething( arguments[i] );
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T21:36:42.833

只需使用普通`for`循环即可。

```
function foo( a,b,c ) {
    for(var i = 0, len = arguments.length; i < len; i++){
        console.log(arguments[i]);
    }
} 
```

或者您可以将其转换为真实数组。

```
function foo( a,b,c ) {
    var args = Array.prototype.slice.call(arguments);
    args.forEach(function( arg ){
        console.log( arg );
    });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T21:37:05.793

```
var show_args = function (){

    for(var ar in arguments){
        console.log(arguments[ar])
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T21:37:36.433

您可以通过调用数组切片方法将“参数”转换为数组：

```
function foo(a, b, c) {
  var argArray = Array.prototype.slice.call(arguments);
  argArray.forEach(function(x) {
    // ...
  });
} 
```

# internet-explorer-8 - IE8。溢出隐藏+最小宽度：这种奇怪的行为有解决方法吗？

> ID：13732889
> 
> 赞同：4
> 
> 时间：2012-12-05T21:34:48.540
> 
> 标签：internet-explorer-8, css

如果我们浮动了 div A，并且 div B 带有溢出：隐藏在它旁边 - div B 应该占据浮动 div 旁边的所有可用空间。如果我们在 div B 上设置了 min-width 并且窗口尺寸太小而无法将这两个 div 保持在同一行 - div B 应该包裹在 div A 下并占据父级的所有可用宽度。我们可以在除 IE8 之外的所有主要浏览器中看到这种确切的行为，甚至 IE7 也能按预期处理它。在 IE8 中，当窗口大小足够小时，div B 包裹在 div A 下 - div B 不占用所有可用宽度，而只有其最小宽度。问题是：这是错误还是标准行为？如果这是一个错误，我们如何解决它？

我在这里有一个测试用例：http: [//jsfiddle.net/BJM4s/2/](http://jsfiddle.net/BJM4s/2/)，调整窗口大小以查看它的运行情况。

HTML：

```
<div class="parent">
    <div class="A">
        <img src="http://placekitten.com/g/100/100  " />                                                     
    </div>
    <div class="B">
       float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float float
     </div>
 </div>​ 
```

CSS：

```
.parent {
    overflow:hidden;
    margin: 20px;
    border: 1px solid;
}

.A {
    float:left;
    margin-right: 10px;
}
.B {
    overflow:hidden;
    min-width: 200px;
    background: lime;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:36:52.433

似乎添加`display: table-cell`to`.B` [**使它的行为**](http://jsfiddle.net/BJM4s/21/)。我没有在所有其他浏览器中进行全面测试，看看它是否会导致问题。最好只为 IE8 设置它（尽管它似乎不影响 IE7/9 或 Firefox）。

# ios - iPhone 5 优化旧版xib

> ID：13732891
> 
> 赞同：1
> 
> 时间：2012-12-05T21:34:56.090
> 
> 标签：ios, xcode, optimization, screen, iphone-5

这是我的问题：我需要有关如何为 4 英寸屏幕修复 3.5 英寸 xib 的说明。我已经加载了 Default-568 img，所以我不再有信箱布局。

我有传统的 3.5 英寸屏幕 XIB，一切都很完美。

但是当我们转向4英寸屏幕时，有很大的空间要填充，如果我在转向3.5屏幕时重新排列iphone 5屏幕的XIB文件，我看不到按钮。这有意义吗？我也想支持 ios 6 之前的版本。

我需要的是一个修复程序或代码或任何使 iPhone 大屏幕按比例分配的东西。我一直在读到一个解决方案可能是复制原始 xib 文件并将自己复制的文件安排在 4 英寸布局中，但我想不出找出如何让 iPhone 决定打开现有的两个 xib 文件之一。

我已经收到了这段代码，但我仍然不知道在哪里粘贴它。我在 viewDidLoad 中尝试过，但没有；

```
if(thisDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad)
{
    NSLog(@"Ipad ");
}
else
{
    NSLog(@"Iphone %f ",[[UIScreen mainScreen] bounds].size.height);
    if ([[UIScreen mainScreen] bounds].size.height == 568) {
        //this is iphone 5 xib
        viewName=[[NSString alloc]initWithString:@"ViewControllerIphone5"];
    } else {
        // this is iphone 4 xib
        viewName=[[NSString alloc]initWithString:@"ViewController"];
    }
} 
```

我不知道该把代码放在哪里；我知道它在实现文件中，但我不知道在哪里。我不想要自动调整掩码

拜托，如果你能帮助我解决这个问题，我会很高兴。我需要仔细的指导，因为我对这个主题没有太多的了解。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:27:51.750

你有4个选项

1-) 为 4 英寸屏幕使用单独的 xib 文件，并在 applicationDidFinishLaunching:withOptions 方法中根据 mainScreen 高度决定加载哪个 xib。

2-) 使用自动布局（仅限 ios 6 +）

3-) 使用支柱和弹簧

4-) 仅在 4'' 设备上调用方法，并在该方法中手动设置 4'' 显示的视图框架和位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:41:42.213

这种情况下没有单独的笔尖。使用正常的 3.5 英寸布局并使用自动布局或弹簧和支柱（在每个对象的尺寸选项卡下）来正确调整视图大小。

查看有关 Auto Layout 和 Springs and Struts 的 Apple 文档以获取更多信息。

# hibernate - 我怎样才能坚持一个父母有两个对同一个短暂孩子的引用？

> ID：13732893
> 
> 赞同：2
> 
> 时间：2012-12-05T21:35:01.947
> 
> 标签：hibernate, persistence, parent-child, hibernate-mapping

我有一个休眠的父子关系，其中父母与其中一个孩子有单独的一对一关系。如果引用的孩子是短暂的，我怎样才能坚持父母和孩子？

我有这样的架构：

```
PARENT(PARENT_ID, SOME_DATA, SPECIAL_CHILD_ID)
CHILD(CHILD_ID, PARENT_ID, CHILD_DATA) 
```

...和这样的实体：

```
class Parent {
    Child getSpecialChild();
    SortedSet<Child> getChildren();
}

class Child {
    Parent getParent();
} 
```

我正在同一个事务中创建一个临时父级和一个临时子级。当我尝试保持父级（级联 specialChild 和子级）时，我从数据库中收到一个唯一约束错误，因为 hibernate 尝试生成两个插入（一个用于 specialChild，另一个用于子级中的同一个子级）。我已经使用调试器验证了 specialChild 和 children() 拥有瞬态子对象的相同*实例*。

在我的真实商业案例中，我能够通过删除 SPECIAL_CHILD_ID 字段来解决这个问题。但是，如果我真的需要这样做，我将如何正确地保存我的数据？

# sql - 比较 LINQ 中的 sql 字段与 excel 字段

> ID：13732895
> 
> 赞同：0
> 
> 时间：2012-12-05T21:35:07.213
> 
> 标签：sql, linq, excel

所以我有一个 excel 表和一个 mssql 表，这两个表正在使用 LINQ 连接到 excel 表第 0 列（第一个）和 mssql 列 textfield2。我在加入字母数字值时遇到的问题，这似乎不起作用。当值是数字时，它确实有效。

```
 var adapter = new OleDbDataAdapter("SELECT * FROM [Sheet1$]", excconnectionstring);
        var adapter2 = new SqlDataAdapter("SELECT * FROM Table1", sqlconnectionstring);

        var ds = new DataSet();
        adapter.Fill(ds, "excel");
        adapter2.Fill(ds, "sql");

        var excel = ds.Tables["excel"].AsEnumerable();
        var esqel = ds.Tables["sql"].AsEnumerable();

        var query = from exc in excel
                    from sql in esqel
                    where exc[0].ToString() == sql.Field<string>("textfield2")
                    select new
                    {
                        debnr = sql.Field<string>("debnr"),
                        bedrag = double.Parse(exc[5].ToString())/100,
                        description = DateTime.Parse(exc[7].ToString(), new CultureInfo("nl-NL")).ToString("MMM yyyy"),
                        text1 = exc[0].ToString(),
                        projectno = sql.Field<string>("textfield1"),
                        central = sql.Field<string>("CentralizationAccount").Trim()
                    }; 
```

编辑：当我在 Excel 工作表中排序值并在顶部显示字母数字值时，似乎字母数字确实有效。但后来我遇到的问题是它不适用于数值..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:32:57.407

正如其他人所说，问题是由于 OleDb 根据前几行推断列类型而发生的。使用 Interop TextToColumn 我将 excel 列数据类型更改为文本。这是我用来执行此操作的代码：

```
 Workbook workBook = _excelApp.Workbooks.Open(Directory.GetCurrentDirectory() + "\\" + thisFileName,
            0, false, 5, "", "", false, XlPlatform.xlWindows, "",
true, false, 0, true, false, false);

        object fieldInfo = new int[1, 2] { { 1, 2 } };
        Range _range = ((Worksheet)workBook.Worksheets.get_Item("Sheet1")).UsedRange.Columns[1, Type.Missing];

        _range.TextToColumns(
 _range, XlTextParsingType.xlDelimited,
 XlTextQualifier.xlTextQualifierNone, Type.Missing,
 Type.Missing, Type.Missing, Type.Missing,
 Type.Missing, Type.Missing,
 Type.Missing,
 fieldInfo,
 Type.Missing, Type.Missing);

        _excelApp.DisplayAlerts = false;
        _excelApp.ScreenUpdating = false;
        _excelApp.Visible = false;
        _excelApp.UserControl = false;
        _excelApp.Interactive = false;

        workBook.SaveAs(Directory.GetCurrentDirectory() + "\\" + thisFileName, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, XlSaveAsAccessMode.xlNoChange,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing);
        workBook.Close(false, thisFileName, null);
        Marshal.ReleaseComObject(workBook);
        _excelApp.Quit(); 
```

# java - Web 应用程序的更新中心和数据库变更管理

> ID：13732896
> 
> 赞同：4
> 
> 时间：2012-12-05T21:35:10.823
> 
> 标签：java, sql, hibernate, jpa, auto-update

我们有一个使用 Spring/JPA/Hibernate 的 Web 应用程序。目前我们正在使用 SolidBase 进行数据库更改管理，这在托管部署模型中运行良好 - 但是我们现在正在迁移到非托管部署模型，用户将能够在其中下载 Web 应用程序。我们正在为 Web 应用程序构建一个“更新中心”类型的功能，并试图弄清楚我们应该如何应用数据库更改。

理想情况下，我希望应用程序在应用程序启动时应用任何挂起的数据库更改，并且我希望这是我们可以以编程方式编码的东西，但我不想重写 Hibernate 的 SchemaExport 功能来做到这一点。

是否有人对我们如何在我们的应用程序中最好地实现此功能有任何建议、模式或最佳实践？

是否有任何更新中心应用程序库可以解决我们的问题（我找不到一个）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:26:40.960

我在研究这个时发现了这篇文章

[http://www.infoq.com/news/upgrade-frameworks](http://www.infoq.com/news/upgrade-frameworks)

这导致我这篇文章

[http://www.jroller.com/mrdon/entry/transparent_sql_schema_migration_with](http://www.jroller.com/mrdon/entry/transparent_sql_schema_migration_with)

这最终导致我使用 Apache DdlUtils 和 jroller.com 博客文章中提供的 BeanFactory 解决方案推出了我自己的解决方案。

这最终将成为一个组件，可以放入*任何*应用程序中，无论是旧的还是新的，以在 Web 应用程序中实现更新功能。它将使用 XML 来应用数据库更新，并且使用 DDL 这意味着该包将适用于任何受支持的数据库。更新程序还将支持对文件系统资源和数据本身的更新（与架构相反）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:29:49.150

**我不为 BitRock 工作。**

这可能不是您正在寻找的，但我使用[了 Bitrock 的 InstallBuilder](http://installbuilder.bitrock.com/)来管理分布式应用程序的这些类型的更新。这与 PostgreSQL 团队使用的安装程序包相同。让它工作起来非常简单，而且头痛最小。尤其是与其他安装程序相比。

# c# - 通过类和构造函数访问自定义组织的数据

> ID：13732898
> 
> 赞同：-1
> 
> 时间：2012-12-05T21:35:24.067
> 
> 标签：c#, database, sql-server-2008, asp.net-4.0

努力实现基本任务的解决方案：

**与多个`Sql Data table`作为来源的网站应用程序一起工作......**

这就是让我再次来到这里的原因......寻求经验丰富的 `C# .net`开发人员帮助。

我只是想为正确的实现添加一些基本逻辑，比如使用

一个专用的命名空间和类，为 All 保存参考`DATABASE tables`，

[（在我尝试工作/学习`Entities Framework`方法之前。）]

我想尝试自己实现...的**基本**功能`EF`，这样...我还将学习如何正确使用类。

到目前为止...结构化**：据** [**我所知**]

 **一个'*帮手*'.. `namespace`，说公司名称是：`HT technologies`

所以我命名了命名空间 `HT_DbSchema`......它包含**：**

*   表**名**

```
 public sealed class HTDB_Tables
  {
    public const string Customers= "Customers";
    public const string Times= "Times";
  } 
```

*   表**ID**

```
 public sealed class HT_tblIDs
 {
    public const int tblCustomersID = 1, tblTimesID = 2;
 } 
```

*   表格**列 列表**...（只是一个例子）

```
public class HTDB_Cols
{

      public class tblCustomers
      {
           public const string CustId  = "custId",
                               CustName  = "custName",
                               CellPhone  = "cellPhone" .... etc'
      }
} 
```

并且因为所有这 3 个课程都在为所有项目服务..

`constructor`当前项目的每个表还有另一个帮助程序类

```
public class DBMetaDetails
{
       public struct DbTable
       {

             public string TableName { get; set; }
             public int TableID { get; set; }
       }
} 
```

所以这些仍然是构建/助手类并且与项目分开，

现在用于当前项目

什么是完成它的适当方法，在项目中使用上述类和构造函数 [（我可以命名这些模板）]

到目前为止，我为执行某些命令所做的是：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
      .... some other App inits here
    }

    else
    {

    }    

    // this method should be the one that instanciates the DbTable struct
   //and set the values of tables name and "ID"
   setTablesReferences(); 
} 
```

## 这就是混乱开始的地方：

在日常使用中，我想尝试在网站应用程序中实现它：

```
public void setTableReferences()
{
    DBMetaDetails.DbTable CustMeta = new DBMetaDetails.DbTable();
    DBMetaDetails.DbTable TimesMeta = new DBMetaDetails.DbTable();

} 
```

所以现在我需要设置`CustMeta`和`TimesMeta`详细信息（`id`s & `name`s）

它`struct`有一种模板结构，一种用于初始化和赋值的系统技术，所以它的存在给我的逻辑带来了一些不错的秩序。

**那么令人困惑的部分是什么？**

从一个角度（安全）来看，我需要这些表格的详细信息`readonly`

所以`DbTable.TableID`，并且`DbTable.TableName`不会被错误地覆盖。

话虽如此，**应该只有一个地方可以设置**......应用程序的一个专用部分，`setTableReferences()`如上，......我可能会添加：

```
CustMeta.TableID = HT_tblIDs.tblCustomersID
CustMeta.TableName = HTDB_Tables.Customers; 
```

另一方面，我需要表格的信息是可访问的，

所以如果让我们说我想将它们添加`DataTables`到`DataSet`

```
DataSet ALLTablesSet = new DataSet();

// assuming the SQL actions already been taken in another method previosly...
// so DataTable is already retrived from DB 
//...but only as a short usage example:

AllTablesSet.Tables.Add(new DataTable(CustMeta.TableName)); 
```

我的问题是使用结构的正确方法是什么......就像在我的场景中一样，

因此，在应用程序的一个部分：您将初始化 - 私下为其分配一个值。

并且从应用程序的其他部分，您可以**使用**它的值（仅适用于**读数**）

这样，应用程序将无法访问它的写入值，只能通过读取值，我认为它应该通过另一个（公共只读）变量。

所以这个变量本来是要暴露的......它的价值不能被“伤害”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:41:22.863

如果我正确理解了这个问题，我会阻止其他代码修改它的方法是删除属性上的设置器。但是，您仍然需要在某些时候设置它们，因此您可以将它们设为私有，而不是完全删除设置器。例如：

```
public string TableName { get; private set; } 
```

如果这样做，您可以设置此数据的唯一位置是结构本身，因此您需要创建一个构造函数来获取所需的初始值。所以像：

```
public struct DbTable
{
    public DbTable(string tableName, int tableId)
    {
        this.TableName = tableName;
        this.TableID = tableId;
    }

    public string TableName { get; private set; }
    public int TableID { get; private set; }
} 
```**

# backbone.js - 只有一条路线的backbone.js 历史？

> ID：13732902
> 
> 赞同：0
> 
> 时间：2012-12-05T21:35:37.450
> 
> 标签：backbone.js, backbone-routing

我正在开发我的第一个骨干项目，但我有一些不知道如何满足的要求。我确定解决方案与正确路由我的应用程序有关，但我不确定......

```
App.Router = Backbone.Router.extend({
        initialize: function(options) {
            this.el = options.el;
        },
        routes: {
            '': 'search',
            'search': 'search'
        },
search: function() {
            var search = new App.SearchView();
            search.render();
        }
}
    }); 
```

我有三个观点：

```
// Defines the View for the Search Form
App.SearchView = Backbone.View.extend({

    initialize: function() {
        _.bindAll(this, 'render');
        this.render();
    },

    template: _.template($('#search-form').html()),
    el: $('#search-app'),
    events: {
        'click .n-button' : 'showResults'
    },

    showResults: function() {
        this.input = $('#search');
        var search = new App.ResultsSearchView();
        var grid = new App.GridView({ query: this.input.val() });
        search.render();
        grid.render();
    },

    render: function() {
        $(this.el).html(this.template());
        return this;
    },
    name: function() { return this.model.name(); }

}); // App.SearchView

//Defines the View for the Search Form when showing results
App.ResultsSearchView = Backbone.View.extend({

    initialize: function() {
        _.bindAll(this, 'render');
        this.render();
    },  
    template: _.template($('#results-search-form').html()),
    el: $('#search-input'), 
    render: function() {
        $(this.el).html(this.template());
        return this;
    },
    events: {
        'click .n-button' : 'showResults'
    },
    showResults: function() {
        this.input = $('#search');
        var grid = new App.GridView({ query: this.input.val() });
        grid.render();
    },
    name: function() { return this.model.name(); }

}); // App.ResultsSearchView

// Defines the View for the Query Results
App.GridView = Backbone.View.extend({
    initialize: function(options) {
        var resultsData = new App.Results();
        resultsData.on("reset", function(collection) {

        });

        resultsData.fetch({
            data: JSON.stringify({"query":this.options.query, "scope": null}),
            type: 'POST',
            contentType: 'application/json',
            success: function(collection, response) {
                $('#grid').kendoGrid({
                    dataSource: {
                        data: response.results,
                        pageSize: 5
                    },
                    columns: response.columns,
                    pageable: true,
                    resizable: true,
                    sortable: {
                        mode: "single",
                        allowUnsort: false
                    },
                    dataBinding: function(e) {

                    },
                    dataBound: function(){

                    }
                });

            },
            error: function(collection, response) {
                console.log("Error: " + response.responseText);
            }

        });
        _.bindAll(this, 'render');
        this.render();
    },
    el: $('#search-app'),
    template: _.template($('#results-grid').html()),
    render: function() {
        $(this.el).html(this.template());
        return this;
    }
}); // App.GridView 
```

我遇到的问题是，我们希望我们的用户能够使用后退按钮导航回初始搜索，并从那里再次前进到他们的搜索结果。我只是不知道该怎么做。任何帮助都将是巨大的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:54:50.900

Backbone 处理浏览器历史记录——您所要做的就是`Backbone.history.start()`在启动时调用。好吧，确保[`Router.navigate`](http://backbonejs.org/#Router-navigate)在您想要保存当前导航状态时调用。

在您的示例中，适当的时间是用户单击“搜索”时。在该`searchView.showResults`方法中，不是创建和呈现结果视图，而是调用：

```
myRouter.navigate("results/" + this.input.val(), { trigger: true }); 
```

这会导致路由器转到`results/query`您必须添加的路由：

```
'results/:query': 'results' 
```

最后，`results`在您的路由器中创建方法，并将视图创建逻辑放在那里：

```
results: function(query) {
    var search = new App.ResultsSearchView();
    var grid = new App.GridView({ query: query });
    search.render();
    grid.render();
} 
```

* * *

*   [这是一个工作演示](http://jsfiddle.net/zuwjR/8/)——在 JSFiddle 上有点难以看到，因为该页面位于 iFrame 内，但您可以通过按 Alt+Left、Alt+Right 来确认它正在工作，分别调用浏览器的后退和前进。

*   相比之下，[这里有一个类似的演示](http://jsfiddle.net/j792j/1/)，除了它使用单一路由。`router.navigate` *它没有* 调用`trigger: true`。您可以看到，使用这种单路由方法，您可以*向后*导航；但是，您不能再次前进到结果视图，因为 Backbone 无法重新跟踪到达那里的步骤。

**应用程序**

```
var HomeView = Backbone.View.extend({
    initialize: function() {
        this.render();
    },
    el: "#container",
    events: {
        "submit #search": "search"
    },
    template: _.template($("#search-template").html()),
    render: function() {
        var html = this.template();
        this.$el.html(html);
    },
    search: function(e) {
        e.preventDefault();
        router.navigate("results/" + $(e.target).find("[type=text]").val(), { trigger: true });
    }
});

var ResultsView = Backbone.View.extend({
    initialize: function() {
        this.render();
    },
    el: "#container",
    render: function() {
        var html = "Results test: " + this.model.get("query");
        this.$el.html(html);
    }
});

var Router = Backbone.Router.extend({
    routes: {
        "" : "search",
        "results/:query": "results"
    },

    search: function() {
        console.log("search");
        var v = new HomeView();
    },
    results: function(query) {
        console.log("results");
        var v = new ResultsView({ model: new Backbone.Model({ query: query }) });
    }       
});
var router = new Router();
Backbone.history.start(); 
```

**HTML**

```
<script type='text/template' id='search-template'>
    <form id="search">
    <input type='text' placeholder='Enter search term' />
    <input type='submit' value='Search' />
    </form>
</script>

<div id="container"></div>​ 
```

# android - 如何以编程方式显示 Android 系统音量控制

> ID：13732904
> 
> 赞同：12
> 
> 时间：2012-12-05T21:35:45.247
> 
> 标签：android, audio, volume

> **可能重复：**
> [如何在 android 中控制音量？](https://stackoverflow.com/questions/5117051/how-to-control-volume-in-android)

如何以编程方式显示 Android 系统音量控制？好像按下了物理音量+/-按钮。

在 Android 4.x 上

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-05T21:46:30.943

试试`setStreamVolume()`方法。有很多可用的选项，请查看此链接：http: [//developer.android.com/reference/android/media/AudioManager.html#FLAG_SHOW_UI](http://developer.android.com/reference/android/media/AudioManager.html#FLAG_SHOW_UI)

# mercurial - 未找到 TortoiseHG 工作台命令

> ID：13732911
> 
> 赞同：0
> 
> 时间：2012-12-05T21:36:12.770
> 
> 标签：mercurial, tortoisehg, workbench

当我在我的 Ubuntu 系统中安装 TortoiseHg thro synaptic 时，HG Workbench 自动安装到我的主菜单中。

但是，当我在我的 debian 6.0 系统中安装 TortoiseHg thro synaptic 时，在主菜单中找不到 HG Workbench，也没有在任何地方找到 thg comannd。

TortoiseHG 版本是 1.1.1-1。

如何在 debian 中调用 thg 或 workbench 命令？

是否有我在 ubuntu 中安装的其他模块，而我在 debian 中没有安装（我可能已经忘记了）？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:59:47.467

在 Debian 中，你*可能有*TortoiseHG 2，其中 command 只是`hg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:19:25.833

令我沮丧的是，Debian 不像 Ubuntu 那样最新。并且支持不像我在 Ubuntu 上所拥有的那样舒服。但是，Ubuntu 的启动变得相当缓慢，并且消耗了太多资源（还不如回到 Win 7）。此外，Ubuntu 痴迷+强迫性地坚持提供可怕的桌面/配色方案。

回答我自己的问题...

最新的稳定版 Debian 是 Squeeze，它只允许 Mercurial 1.6.4、TortoiseHg 1.1.1。而在 Ubuntu 12.04 LTS 中，我使用的是 2.0.2，TortoiseHg 2.2。

尝试为 Mercurial 2.2/TortoiseHg 2.4 安装 Debian Squeeze backport 导致无法解决的依赖关系。需要调查这是否是由于对 Qt4.8 的依赖。

TortoiseHg 1.1.1 没有工作台。它有 hgtk 和[hgview](http://www.logilab.org/project/hgview)。我更喜欢 thg 而不是 hgtk。为了缓解这种情况，我在我的 Debian 机器上的 Win7 Virtualbox 中安装了 TortoiseHg 2.6，在那里我将使用我的 Win7 TortoiseHg 对共享文件夹进行操作。为 Win7 使用 16 个 CPU 线程中的 2 个应该不会对我的 Debian 机器造成太大伤害。

# c - 从内存中逐字节读取，无需系统调用或 C 中的库函数

> ID：13732916
> 
> 赞同：1
> 
> 时间：2012-12-05T21:36:18.010
> 
> 标签：c, memory, assembly, byte

我想在不使用任何库函数的情况下将信息逐字节从一个内存位置移动到另一个内存位置。我使用在 qemu 中模拟的 16 位架构，这段代码是我正在编写的微小内核的一部分，所以我不能使用任何系统调用

```
// The struct i want to copy
struct procinfo info_tmp;
// here i put some stuff in my struct    
info_tmp.pid = tablaprocesos[indiceProceso].pid;
kstrcpy(info_tmp.nombre, tablaprocesos[indiceProceso].nombre);  
info_tmp.segmento = tablaprocesos[indiceProceso].memoria;
if(tablaprocesos[indiceProceso].estado==PROCESO_LISTO)
  info_tmp.estado = 0;
else if(tablaprocesos[indiceProceso].estado==PROCESO_RUN)
  info_tmp.estado = 1;
else if(tablaprocesos[indiceProceso].estado==BLOQ_TECLADO ||
tablaprocesos[indiceProceso].estado==PROCESO_SYSCALL)
  info_tmp.estado = 2;
else
  info_tmp.estado = 3; // Zombie
// Tiempo total = tiempoSYS + tiempoUSER
info_tmp.tiempo = tablaprocesos[indiceProceso].tiempoUSER +
  tablaprocesos[indiceProceso].tiempoSYS;    

// pointer to destination that i want to copy to
infoProc = (struct procinfo *)(((int)es << 16) + (0x0000ffff & ebx));
// now pointer to my source struct  
procinfo * origen = &info_tmp;         
int limit = sizeof(struct procinfo);
int i;
for(i=0;i<limit;i++){  
   //  I need here to read only one byte from my source pointer to a variable "byte"

   // macro written in ASM to copy one byte to a pointed location
   // it writes in another data segment of another process
   WRITE_POINTER_FAR(infoProc,byte);
   // next byte
   origen += 1; 
   infoProc += 1;
} 
```

有没有一种直接的方法可以做到这一点，而无需在 ASM 中编写一个小代码来手动完成？

注意：此代码是 16 位分段 OS 内核的一部分（每个进程一个 64KB 段），源结构在内核段中，我想将其复制到另一个进程段中的位置，它不能像 *targetBytePointer = *源字节指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:14:53.957

```
// The struct i want to copy
struct procinfo info_tmp;
// here i put some stuff in my struct    
info_tmp.pid = tablaprocesos[indiceProceso].pid;
kstrcpy(info_tmp.nombre, tablaprocesos[indiceProceso].nombre);  
info_tmp.segmento = tablaprocesos[indiceProceso].memoria;

switch(tablaprocesos[indiceProceso].estado) {
case PROCESO_LISTO:
  info_tmp.estado = 0; break;
case PROCESO_RUN:
  info_tmp.estado = 1; break;
case BLOQ_TECLADO :
case PROCESO_SYSCALL:
  info_tmp.estado = 2; break;
default:
  info_tmp.estado = 3; // Zombie
        break;
        }
// Tiempo total = tiempoSYS + tiempoUSER
info_tmp.tiempo = tablaprocesos[indiceProceso].tiempoUSER +
  tablaprocesos[indiceProceso].tiempoSYS;

// pointer to destination that i want to copy to
infoProc = (struct procinfo *)(((int)es << 16) + (0x0000ffff & ebx));
char *dest = (char*) infoProc;
// now pointer to my source struct  
char * origen = (char*) &info_tmp;
int limit = sizeof(struct procinfo);
int i;
for(i=0;i<limit;i++){ 
   char byte;
   //  I need here to read only one byte from my source pointer to a variable "byte"

   // macro written in ASM to copy one byte to a pointed location
   // it writes in another data segment of another process
   byte = *origen;
   WRITE_POINTER_FAR(dest,byte);
   // next byte
   origen += 1;
   dest += 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:45:54.793

我终于写了一个小的 ASM 代码来手动完成。我必须这样做，因为正如我之前提到的，它是我在 qemu 中编写和模拟的 16 位内核的代码片段，它会进行内存分段（每个进程 64KB，总共 10 个进程）。我不能这样做`*targetBytePointer = *sourceBytePointer`，因为 targetPointer 在进程段中，而 sourcePointer 在内核段中，这就是为什么我有宏 WRITE_POINTER_FAR 的原因。基本上 WRITE_POINTER_FAR（写的是 ASM）将使用我已经创建的目标指针，结合调用进程在两个寄存器（ES：BX）中传递给我的内容，并且只会向该目标写入一个字节，这就是我需要只读的原因每次从我的源中获取一个字节。

```
char byte;
struct procinfo * origen = &info_tmp;  
for(i=0;i<limit;i++){
  asm( // leer un byte
    "mov %1,%%ebx   \n\t"
    "mov (%%ebx),%0  \n\t"
    :"=r"(byte)
    :"r"(origen)
  );
  WRITE_POINTER_FAR(infoProc,byte);
  origen += 1;
  infoProc += 1;
} 
```

编辑：另一个简单的解决方案

```
char *byte;
struct procinfo * origen = &info_tmp;  
for(i=0;i<limit;i++){     
  byte = (char*)origen;
  WRITE_POINTER_FAR(infoProc,*byte);
  origen += 1;
  infoProc += 1;
}
// actualizar puntero de proceso
if(indiceProceso+1<=MAX_PROCESOS)
  indiceProceso++;
return 0; 
```

# objective-c - 试图将 NSArray 中的条目添加到 NSDictionary，但 NSDictionary 中的值正在被释放

> ID：13732917
> 
> 赞同：0
> 
> 时间：2012-12-05T21:36:18.857
> 
> 标签：objective-c, memory-management, nsdictionary

我有三个 Deck 对象，它们大多只是包含 Card 对象的 NSArray 对象的包装器。最初，所有卡片对象都在deck1 中，并最终通过deck2 和deck3。

我还有一个 NSDictionary 对象，它将 NSString 对象映射到 Card 对象。我在游戏开始时使用deck1中的卡片来构建这个查找表，就像这样......

```
-(NSDictionary *)buildLookupTable {
    NSMutableDictionary *lookup = [[NSMutableDictionary alloc] init];

    for (Card *card in self.cards) {
        NSString *lookupCode = [self buildCode:card];
        [lookup setObject:card forKey:lookupCode];
    }

    return lookup;
} 
```

然后我将 NSDictionary 和 Decks 传递给图层对象，但是当我尝试基于 NSString 查找给定的 Card 时，我得到“-[CFString hash]: message sent to deallocated instance”，但我可以轻松找到 Card我在deck1 或deck2 中寻找，而不是释放。

我用作检索所需值的键的 NSString 未被释放，NSDictionary 本身也未被释放。我什至迭代了 NSDictionary 对象的 allValues 方法的返回值，并且这些都没有被释放。

还有哪些其他已释放的对象？

Edit-version2：我缩小了一点。

在查找代码中，这有效

```
NSString *key = @"4-0"; //(NSString *)sprite.userData;
return [self.cardLookup objectForKey:key]; 
```

但这不是

```
NSString *key = (NSString *)sprite.userData; // value is @"4-0"
return [self.cardLookup objectForKey:key]; 
```

在调试器中 sprite.userData 看起来不错。

sprite.userData 在 Card 类 buildSprite 方法中定义为...

```
sprite.userData = [NSString stringWithFormat:@"%i-%i",self.x, self.y]; 
```

看起来在 key 上调用 copyWithZone 不起作用（就像对任何其他 NSString 一样）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:56:51.867

发现问题！

问题在于 sprite.userData 对象及其创建方式。

```
sprite.userData = [NSString stringWithFormat:@"%i-%i",self.x, self.y]; 
```

显然 sprite.userData 被释放（认为 Xcode 调试器似乎知道它是什么，可能是因为我启用了僵尸对象）。正确的版本是...

```
sprite.userData = [[NSString stringWithFormat:@"%i-%i",self.x, self.y] retain]; 
```

# c# - 使用 ComboBox 更改 CollectionViewSource 过滤器

> ID：13732918
> 
> 赞同：2
> 
> 时间：2012-12-05T21:36:24.503
> 
> 标签：c#, wpf, xaml, collectionviewsource

我想知道如何`CollectionViewSource`使用 ComboBox 更新 a 上的过滤器。我有以下代码：

```
 <CollectionViewSource x:Key="cvsCars" 
                       Source="{Binding Source={StaticResource odpCars}}">
 <ComboBox Name="cbxMake" Margin="5" IsEnabled="False" /> 
```

我确定我需要 ComboBox 的某种`SelectionChanged`事件，但我想不出一种方法让它与这段代码一起工作。

```
private void MakeFilterOn(object sender, RoutedEventArgs e)
{
    cbxMake.IsEnabled = true;
    cvsCars.Filter += new FilterEventHandler(cvsCars_Filter);
}

void cvsCars_Filter(object sender, FilterEventArgs e)
{
    Car car = e.Item as Car;
    if (car != null)
    {
        if (car.Maker.ToString() == cbxMake.SelectedItem.ToString())
        {
            e.Accepted = true;
        }
        else
        {
            e.Accepted = false;
        }
    }
} 
```

任何意见是极大的赞赏。

由`CollectionViewSource`填充`ObjectDataProvider`。更新将应用于 ListBox。MakeFilterOn 是一个复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:06:48.750

你必须刷新你的 CollectionViewSource 的视图......所以，在你的组合框的 SelectionChanged 事件的处理程序中，刷新你的 cvs：

```
cvsCars.View.Refresh(); 
```

您可能想研究 WPF 的数据绑定功能，然后再研究模型视图视图模型 (MVVM)“模式”。这样，您可以将组合框绑定`SelectedItem`到窗口上的属性，`DataContext`而无需处理 SelectionChanged 事件。

# wordpress - 修改 Wordpress 小部件 - 提取并显示一个类别中的所有帖子

> ID：13732919
> 
> 赞同：1
> 
> 时间：2012-12-05T21:36:27.403
> 
> 标签：wordpress, widget

我已经在圈子里跑了很久，试图编辑这个小部件。在这里格式化所有代码时遇到了一些麻烦，所以我将发布来自 pastebin 的链接 - [http://pastebin.com/tdYFAgQD](http://pastebin.com/tdYFAgQD)。

我想要并且无法实现的是，以这种格式（一个带有特色图像的块，然后是标题，然后是文本）一个接一个地显示一个类别中的所有帖子。我想摆脱那个列表的东西（显示 x 个帖子但在同一个窗口中），并像我说的那样显示所有帖子，一个接一个地显示在单独的块中。

**这是一张可以让事情更清楚的图片**：http : [//i.imgur.com/pfHbi.jpg](http://i.imgur.com/pfHbi.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:52:25.060

您应该阅读[http://codex.wordpress.org/The_Loop_in_Action](http://codex.wordpress.org/The_Loop_in_Action)

要让这 4 个块像这样显示，您必须更多地考虑将生成的 HTML / CSS。考虑通过修改循环来简单地获取要显示的 4 个 div，然后从那里开始。

从您的 pastebin 中的第 105 行开始是产生这些“链接”的位，因此只需删除这些代码行：

```
<?php if ( $warrior_posts_list_left->post_count > 1) echo '<ul>'; ?>                   
                            <?php } else { ?>
                                    <li>
                                            <span class="icon-file"></span> <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php echowarrior_post_title('35'); ?></a>
                                    </li>
                            <?php } ?>
                    <?php $i = $i + 1; endwhile; ?>
                    <?php if ( $warrior_posts_list_left->post_count > 1) echo '</ul>'; ?> 
```

[此外，您可能想在这里https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)或在您正在修改的特定 wordpress 插件的支持论坛上提问[http://wordpress.org/extend/plugins/](http://wordpress.org/extend/plugins/)

# java - Java 类

> ID：13732921
> 
> 赞同：0
> 
> 时间：2012-12-05T21:36:35.280
> 
> 标签：java, android

我有一个类数组，如下所示：

```
private static final Class[] testerClasses={
    Tester1.class
}; 
```

我需要它是这样的，所以我可以启动 Android 意图，如下所示：

```
intent =new Intent(this,testerClasses[0]);
startActivity(intent); 
```

我试图弄清楚如何做以下事情，我真的很难弄清楚如何去做......

1.  我需要从类的实例中调用函数。在大多数情况下，这些是静态或类似静态的函数，因此仅获取函数的实例就足够了。
2.  我需要确保我可以按照 Intent 结构的要求传递课程。

我为什么要这样做？有时我想像调用意图一样调用函数，有时我只想获取有关意图的数据，而不必调用它。我的 abstractTester 类（所有具体的测试器类都继承自）包含一些东西，比如测试的名称，在 Intent 开始之前就很方便了。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:45:51.107

您将无法使用`Intent`. 相反，在意图中传递类名；接收者可以通过`loadClass()`

一旦接收者拥有类对象，它就可以使用反射来调用预期的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:55:03.037

正确的解决方案是：

```
private static final abstractTester[] testerClasses={
    new Tester1()
};

intent =new Intent(this,testerClasses[0].getClass());
startActivity(intent); 
```

然后，如果我需要引用该类，我就可以做到。奇迹般有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:51:10.880

您好，您可以尝试使用下面的代码，

```
ArrayList<Class<?>> a = new ArrayList<Class<?>>();
a.add(MainActivity2.class);
a.add(MainActivity.class);

Intent intent =new Intent(this,a.get(0));
startActivity(intent); 
```

# php - 将整个数组值分配给字符串而不在 PHP 中循环

> ID：13732932
> 
> 赞同：0
> 
> 时间：2012-12-05T21:37:16.877
> 
> 标签：php, arrays

我有一个大约 1000 个值的数组，我刚刚使用 shuffle() 对它们进行了洗牌。现在我想回应洗牌的结果。但这里有一个问题，可以在不循环数组或显示数组“语法”的情况下完成吗？

IE：

```
<?php
    $myarray = array('a','b','c','d');
    shuffle($myarray);
    echo array_echo_vals_only($myarray);
    /*
    should echo: dbca
    */
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:38:30.317

只需使用`Implode`

```
echo implode($myarray); 
```

或者只是减少数组`array_reduce`

```
echo array_reduce($myarray, function($a,$b){$a .= $b; return $a;}); 
```

玩弄`vsprintf`

```
echo vsprintf(str_repeat("%s", count($myarray)), $myarray); 
```

我们也有一些疯狂的方式..

```
echo preg_replace("/\W/", "", json_encode($myarray)); 
```

或者

```
echo str_replace(array("]","[","\"",","), "", json_encode($array)); 
```

我怎么想....

> 将整个数组值分配给字符串而不在 PHP 中循环

循环不是一个糟糕的解决方案..您不妨试一试...示例：

```
$l = "";
$c = count($array);
for($i = 0; $i < $c; ++ $i) {
    $l .= $array[$i];
}
echo $l; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:47:30.270

最简单的解决方案是使用`implode`.

```
echo implode($array); 
```

* * *

如果您*确实*关心速度...好吧...

我希望我不会得到这样的回应：

> -1 用于“基准测试”这个

**编辑**：我做到了。

* * *

通过我的“综合测试”，`str_replace`是最快的方法。

## 但是没有人可以证明这一点，它可以破坏结果。

```
str_replace(array(']', '[', '"', ','), '', json_encode($array)); 
```

[**演示**](http://codepad.org/odCTvDuR)

* * *

## 因此，为简单起见，请坚持使用`implode`.

* * *

*旧的、无效的测试结果：* ~~但无论如何，这是我的测试（我使用了@Baba 脚本中的一些函数进行比较）：[codepad.org/BwBLpmgp](http://codepad.org/BwBLpmgp)。~~

~~结果：~~

~~array_pop 时间：0.0014219284057617 array_shift 时间：0.00010895729064941 循环时间：0.0004279613494873 vsprintf 时间：0.00033998489379883 内爆时间：0.00016212463208902 str_replace 时间：0.00016212463208906 str_replace 时间：0.0004279613494873~~

~~`array_shift`是禁食法。~~

~~用法：~~

~~while($shift = array_shift($array)) { $result .= $shift; }~~

# r - 在条形图中显示日期范围的频率

> ID：13732934
> 
> 赞同：0
> 
> 时间：2012-12-05T21:37:20.097
> 
> 标签：r, date, range, bar-chart

我有一个非常大的数据框，其中包含如下数据：

```
 PENR     ANFDAT     ENDDAT
1 1110 1990-02-01 1998-10-29
2 1981 1998-02-19 1998-02-20
3 6317 1994-11-01 1999-06-30
4 2039 1998-12-01 1999-04-30 
```

（从这里获取）

```
df <- structure(list(PENR = c(1110L, 1981L, 6317L, 2039L), ANFDAT = structure(c(7336, 10276, 9070, 10561), class = "Date"), ENDDAT = structure(c(10528, 10277, 10772, 10711), class = "Date")), .Names = c("PENR", "ANFDAT", "ENDDAT"), row.names = c(1L, 2L, 3L, 4L), class = "data.frame") 
```

ANFDAT 代表某个状态的开始，ENDDAT 代表这个状态的终止

我想将此数据显示为条形图。每个条应该代表一个日期。每个条的高度应代表在该日期具有状态的记录数 (PENR)。

由于数据框非常大，我寻找一种有效的方法来实现这一点。

**[编辑]**

似乎我的问题具有误导性。这是我尝试做的事情：

1.  `min(df$ANFDAT)`为从到的每个日期生成一个数据框`max(df$ENDDAT)`。这可以很容易地完成

    ```
    df1 <- data.frame(DATE = seq(min(df$ANFDAT), max(df$ENDDAT), by = "day")) 
    ```

2.  对于 中的每一行，计算具有和`df1$DATE`的记录数。将结果存储在`df``ANFDAT >= DATE``ENDDAT <= DATE``df1$RECORDS`
3.  生成一个条形图`df1`。这可能可以这样做（未经测试）

    ```
    df2 <- df1$RECORDS
    row.names(df2) <- df1$DATE
    barplot(df2$RECORDS) 
    ```

我的问题是找到一种有效的方法来做#2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:03:00.073

您可以使用`sapply`超过唯一日期来计算记录数。

整个过程：

```
DATE <- seq.int(min(df$ANFDAT), max(df$ENDDAT), by = "day")

df1 <- data.frame(RECORDS = sapply(DATE, function(x)
                                sum(df[["ANFDAT"]] <= x &  df[["ENDDAT"]] >= x)))

rownames(df1) <- DATE
barplot(df1$RECORDS) 
```

# list - 堆栈和队列如何成为列表的“特殊情况”？

> ID：13732936
> 
> 赞同：2
> 
> 时间：2012-12-05T21:37:27.413
> 
> 标签：list, stack, queue

对于明天的考试，我需要能够：

> 解释堆栈和队列如何是列表的特殊情况。

有谁知道我可以阅读这个的好地方吗？谷歌搜索无法帮助我解决这个问题，它是“我们在课堂上讨论过这个问题，不要再问我”类型的问题之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:41:17.043

List 支持任意位置的插入和删除。队列支持尾部插入和前端删除。Stack 支持从顶部插入和删除。

很容易看出队列和栈​​只支持列表操作的一个子集。**从这个意义上说**，它们是列表的特例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:42:14.043

是的，Robert Lafore 有一本书叫做[Data Structures and Algorithms in java](https://rads.stackoverflow.com/amzn/click/com/0672324539)。

阅读前六章（我可能错了，也许更多），你应该对所有数据结构（最常用的）都很熟悉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T21:43:09.267

堆栈是一个列表，仅允许您从“顶部”添加（推送）和删除（弹出）。

![](../Images/f732bdb8302cbb27d4697bdd81705fce.png)

队列是一个列表，只允许添加到“后”（入队）并从“前”（出队）中删除。

![](../Images/2d62a24313d2302cc2c9cb7d9feb958b.png)

看：

[维基百科：列表](http://en.wikipedia.org/wiki/List_(abstract_data_type))

[维基百科：堆栈](http://en.wikipedia.org/wiki/Stack_(abstract_data_type))

[维基百科：队列](http://en.wikipedia.org/wiki/Queue_(abstract_data_type))

# c++ - 如何使用 openMP 使此代码线程安全？

> ID：13732942
> 
> 赞同：1
> 
> 时间：2012-12-05T21:38:06.043
> 
> 标签：c++, thread-safety, openmp, pragma

如果删除 . `#pragma omp parallel for`_ 我猜测原因是多个线程尝试写入变量或. 我该如何解决？有没有办法告诉它变量是共享的？还是通常有另一种方法可以并行执行此循环。我对`openmp完全陌生，这是我第一次使用它。`*** glibc detected *** ./testBin: double free or corruption (!prev): 0x0c43d8d8 ***``core dumped``omega, ell, ....``lineVec`

```
#include <omp.h>

int main( int argc , char **argv )
{ 
 vector <vector<string>> fileVec;
 //some code that reads in a CSV file lines into elements of fileVec

//variables constituting a line:
//my_float has been typedef to be a high precision class in real code
my_float omega;
my_float ell;

my_float init1Real;
my_float init1Imag;
my_float dinit1Real;
my_float dinit1Imag;

my_float init2Real;
my_float init2Imag;
my_float dinit2Real;
my_float dinit2Imag;

#pragma omp parallel for private(lineVec,fileVec,ell,omega,init1Real,init1Imag,dinit1Real,dinit1Imag,init2Real,init2Imag,dinit2Real,dinit2Imag)
 for (size_t i=0; i< fileVec.size(); i++) 
    { 

        lineVec=fileVec[i];

         ell=lineVec[0];
         omega=lineVec[1];

         init1Real=lineVec[2];
         init1Imag=lineVec[3];
         dinit1Real=lineVec[4];
         dinit1Imag=lineVec[5];
         init2Real=lineVec[6];
         init2Imag=lineVec[7];
         dinit2Real=lineVec[8];
         dinit2Imag=lineVec[9];

        // cout<<"OUTPUT ell=" << ell<< " omega=" << omega <<" init1Real="<<init1Real<<endl;

         //do some other calc involving these variables

    }     
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:37:54.617

从共享读取`fileVec` *是*线程安全的。只有类型的变量`my_float`应该被制作`private`甚至更好 - 在循环内声明：

```
int main(int argc, char **argv)
{
    vector<vector<string>> fileVec;

    //some code that reads in a CSV file lines into elements of fileVec

    #pragma omp parallel for private(lineVec)
    for (size_t i = 0; i < fileVec.size(); i++)
    {
        lineVec = fileVec[i];

        //my_float has been typedef to be a high precision class in real code

        my_float ell = lineVec[0];
        my_float omega = lineVec[1];

        my_float init1Real = lineVec[2];
        my_float init1Imag = lineVec[3];
        my_float dinit1Real = lineVec[4];
        my_float dinit1Imag = lineVec[5];
        my_float init2Real = lineVec[6];
        my_float init2Imag = lineVec[7];
        my_float dinit2Real = lineVec[8];
        my_float dinit2Imag = lineVec[9];

        cout << "OUTPUT ell=" << ell << " omega=" << omega
             << " init1Real=" << init1Real << endl;

        //do some other calc involving these variables
    }
} 
```

我在这里看不到任何比赛，除非`my_float`不是线程安全的或者`//do some other calc involving these variables`.

请注意，对于最近的 OpenMP 版本，您甚至可以使用迭代器来遍历向量，因为它提供了随机访问迭代器：

```
typedef vector<vector<string>>::const_iterator iterType;

#pragma omp parallel for private(lineVec)
for (iterType it = lineVec.begin(); it != lineVec.end(); it++)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:28:02.740

按照您编写的方式，openmp 将创建一些线程并在每个线程之间划分 for 循环的总迭代次数。通过这样做，它将尝试对不同线程共享的向量执行并行读取。您可以更改数据共享属性，（请参阅[OpenMP Wiki 关于数据共享属性子句](http://en.wikipedia.org/wiki/OpenMP#Data_sharing_attribute_clauses)，在这个[microsoft 文档](http://msdn.microsoft.com/en-us/library/c3dabskb%28v=vs.80%29.aspx)中，您有一个很好的示例如何做到这一点。例如，将 lineVec 和 fileVec 声明为“私有”使用：

```
#pragma omp parallel private(lineVec, fileVec) 
```

此外，cout 不是线程安全的，多个线程对 cout 的调用也需要序列化。

# c# - C#读/写mifare nfc标签

> ID：13732950
> 
> 赞同：5
> 
> 时间：2012-12-05T21:38:32.533
> 
> 标签：c#, nfc

我进行了很多搜索，但找不到一些 C# 简单的 sdk，它可以让我在 nfc mifare 1k 经典标签中进行读写。

你能给我一些帮助吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-03T21:39:11.297

只需查看我的库中的 ACR122u 阅读器即可。它还支持插入/丢弃事件。使用它是如此简单。基本上，您创建一个类并向该类注册两个事件。之后，调用 Watch 函数。它会监视您设备上的变化。

```
//Initializing
NFCReader NFC = new NFCReader();

//Inserted Event 
NFC.CardInserted += new NFCReader.CardEventHandler(...Some function);

//Ejected Event
NFC.CardEjected += new NFCReader.CardEventHandler(... Some function);

//Enabling Event Watching
NFC.Watch(); 
```

如果发生任何变化，它会调用相关事件。你在那里处理你想做的事情。

```
public void Card_Inserted()
{
  try
  {
    if (NFC.Connect())
    {
        //Do stuff like NFC.GetCardUID(); ...
    }
    else
    {
        //Give error message about connection...
    }
  }
  catch (Exception ex)
  {
    //Something went wrong
  }
}

public void Card_Ejected()
{
   //Do stuff...
   NFC.Disconnect();
} 
```

有关更多信息，请参阅相关的 repo 和链接。

媒体介绍教程： [https ://medium.com/@hakbas/nfcreader-a-very-simple-nfc-library-for-c-that-supports-insert-and-discard-events-93db29f79b5](https://medium.com/@hakbas/nfcreader-a-very-simple-nfc-library-for-c-that-supports-insert-and-discard-events-93db29f79b5)

Github地址： [https ://github.com/h4kbas/NfcReader](https://github.com/h4kbas/NfcReader)

# ruby - 如何迭代弹出输出？

> ID：13732951
> 
> 赞同：3
> 
> 时间：2012-12-05T21:38:37.813
> 
> 标签：ruby

我有这个简单的红宝石脚本：

```
redcricket@dev-006:~$ cat simple.rb  
#!/usr/local/bin/ruby

IO.popen 'ls -l', 'r+' do |f|
        puts f.gets
end 
```

当我运行它时，我得到的唯一输出是这个......

```
redcricket@dev-006:~$ ./simple.rb  
total 32 
```

......我所期望的是这个......

```
redcricket@smp-mig-dev-006:~$ ls -l
total 32
drwxr-xr-x  4 redcricket co 4096 Dec  5 12:23 applications
-rw-r--r--  1 redcricket co  464 Oct  5 16:23 config
drwxr-xr-x 72 redcricket co 4096 Dec  5 15:11 docs
drwxr-xr-x  3 root    root  4096 Dec  5 12:14 oradiag_root
drwxr-xr-x  5 redcricket co 4096 Dec  5 16:22 platform
-rwxr-xr-x  1 redcricket co  373 Dec  5 16:30 process_yum_output.rb
-rwxr-xr-x  1 redcricket co 2159 Nov 28 16:24 SetupSSHPK.sh
-rwxr-xr-x  1 redcricket co  142 Dec  5 16:31 simple.rb 
```

...我想我需要以某种方式迭代 f.gets 吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:42:16.257

传递给的块只[`IO#popen`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-popen)执行*一次*。这不是一个循环。将传递给块的对象视为[`File`](http://www.ruby-doc.org/core-1.9.3/File.html)¹。如果第二个参数`IO#popen`是`"r"`你可以读到`File`；如果是的话，`"w"`你可以写信给它。在控制流离开块后，子进程应该是死的，并且[`IO`](http://www.ruby-doc.org/core-1.9.3/IO.html)您用来访问它的对象不再有效也不再可用。

如果您想获取一个行数组，请调用[`readlines`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-readlines)块的参数。如果您想遍历它们，请调用[`each`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-each)，即

```
IO.popen("ls", "r") { |io| io.each { |line| puts line } } 
```

* * *

¹ 准确地说，它是[`IO`](http://www.ruby-doc.org/core-1.9.3/IO.html).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T21:42:34.820

Ruby[`IO#gets`方法](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-gets)只是从 IO 对象返回下一行输入。

为了得到所有的行，你可以重复调用“gets”直到它为零，或者调用[`read`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-read)来获取整个字符串，或者[`readlines`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-readlines)获取数组中的输入行。

```
IO.popen('ls -l','r') { |f| puts $_ while f.gets }
IO.popen('ls -l','r') { |f| puts f.read }
IO.popen('ls -l','r') { |f| puts f.readlines } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T21:46:03.910

我喜欢：

```
IO.popen 'ls -l', 'r+' do |f|
  puts f.gets until f.eof?
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T21:54:14.380

传递给的块`IO.popen`只被调用一次，传递一个表示已创建管道的 IO 对象。

由于您只`gets`在该对象上调用一次，因此您只会收到该命令的单行输出。要获得更多行，您需要遍历 IO 对象：

```
IO.popen %w{ls -l}, 'r' do |pipe|
  pipe.each do |line|
    puts "|#{line}"
  end
end 
```

# redirect - 为什么重写指令会导致 Nginx 出现“301 永久移动”？

> ID：13732952
> 
> 赞同：-1
> 
> 时间：2012-12-05T21:38:42.727
> 
> 标签：redirect, nginx, webserver, rewrite, security

下面是我在 Nginx 1.2.5 运行的服务器的配置文件中的一个非常简化的版本，但它在提供数据之前导致`301 Moved Permanently`，`Location: http://example.com/phpmyadmin/`这不是我对该`rewrite`指令的默认行为所期望的。

```
server {
    listen 80;
    location /pma {
        rewrite ^ /phpmyadmin;
    }
    location /phpmyadmin {
        root /var/www;
        index Documentation.html;
    }
} 
```

当我`http://example.com/pma`在浏览器中访问时，会提供数据，但地址栏中的 URL 会更改为`http://example.com/phpmyadmin/`while 它应该保持`http://example.com/pma`。

如何避免 Nginx 发送`301 Moved Permanently`，以便它不会在我的服务器上公开实际的目录结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:42:02.377

尝试别名：

```
server {
    listen 80;
    location /pma {
        alias /phpmyadmin;
    }
    location /phpmyadmin {
        root /var/www;
        index Documentation.html;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T11:22:08.887

我认为您需要使用别名而不是重写。Rewrite 创建一个“新”URL，因此它会进行重定向

```
server {
    listen 80;
    location /pma {
        alias  /var/www/phpmyadmin;
        index Documentation.html;
    }
    location /phpmyadmin {
        root /var/www;
        index Documentation.html;
    }
} 
```

# php - 从 PHP 数组创建 HTML 列表

> ID：13732953
> 
> 赞同：4
> 
> 时间：2012-12-05T21:38:47.127
> 
> 标签：php, html, arrays, api

我正在尝试从 PHP 数组创建各种标准的 HTML 列表样式，用于我正在构建的电影数据库，这是我在大学的最后一年项目的一部分，但是我在访问/理解如何执行此操作时遇到了一些问题。我已经从我正在使用的各种 API 中获得了相关数据，但我想动态创建整个列表，并在适当的地方放入正确的信息位。

下面是我要创建的两种列表样式的详细信息。

**列表样式 1 - 角色/演员详情**

对于第一种列表样式，我想将其创建为：

```
<ul>
   <li>Cast name - Character name</li>
   <li>Cast name - Character name</li>
   <li>etc. etc.</li>
<ul> 
```

我直接来自数组的数据集如下所示：

```
Array
(

[abridged_cast] => Array
    (
        [0] => Array
            (
                [name] => Daniel Craig
                [id] => 162687443
                [characters] => Array
                    (
                        [0] => James Bond
                    )

            )

        [1] => Array
            (
                [name] => Javier Bardem
                [id] => 162661456
                [characters] => Array
                    (
                        [0] => Silva
                    )

            )

        [2] => Array
            (
                [name] => Judi Dench
                [id] => 162652435
                [characters] => Array
                    (
                        [0] => M
                    )

            )

        [3] => Array
            (
                [name] => Ralph Fiennes
                [id] => 162653681
                [characters] => Array
                    (
                        [0] => Gareth Mallory
                        [1] => Mallory
                    )

            )

        [4] => Array
            (
                [name] => Naomie Harris
                [id] => 162705781
                [characters] => Array
                    (
                        [0] => Eve
                    )

            )

    ) 
```

在上面的示例中，有五个演员及其各自的角色名称，但是在其他一些示例中，多于或少于五个，因此，理想情况下，我希望系统知道无论给了多少演员并创建一个每个列表，最多 10 个名称。

**列表样式 2 - 视频**

与上一种样式类似，但是此列表希望如下所示：

```
<ul>
    <li><a href='<http://youtube.com/<dynamically generated URL direct to the clip>'><img src='dynamically generated URL to the clip's thumbnail' /></a></li>
    <li>same as above...</li>
</ul> 
```

源数组如下所示：

```
Array
(
[id] => 37724
[youtube] => Array
    (
        [0] => Array
            (
                [name] => Trailer
                [size] => HQ
                [source] => 24mTIE4D9JM
            )

        [1] => Array
            (
                [name] => Official Trailer
                [size] => HD
                [source] => 6kw1UVovByw
            )

        [2] => Array
            (
                [name] => Trailer 1
                [size] => HD
                [source] => 1Uyjf5Pp0Ko
            )

        [3] => Array
            (
                [name] => Trailer 2
                [size] => HD
                [source] => 5Ejo9_3iUpw
            )

    )

) 
```

为这篇文章的长度道歉，提前感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:50:15.620

您正在寻找的东西称为 foreach 循环。对于您的第一个示例，它看起来像这样：

```
foreach($dataSet['abridged_cast'] as $castMember){
    echo '<li>'.$castMember['name'].'-'.implode(', ', $castMember['characters']). '</li>';
} 
```

现在这个例子纯粹是说明性的，尽管它最明确地是初学者的方法。尽管如此，我还是强烈建议研究 MVC 模式和 PHP 框架，例如 YII。如果部署和配置正确，YII 的所有优点应该可以为您完成所有重复的工作。

我已经看到您的问题包含两个部分，尽管我不愿意为第二个部分编写示例，因为它实际上与第一个部分相同并且需要适当注意 - 您将走上正轨并弄清楚。

# c# - SqlParameter.Add 和 AddWithValue 之间的区别

> ID：13732960
> 
> 赞同：2
> 
> 时间：2012-12-05T21:38:56.503
> 
> 标签：c#, .net, .net-3.5, sqlparameter

> **可能重复：**
> [Parameters.Add 和 Parameters.AddWithValue 之间的差异](https://stackoverflow.com/questions/9999751/difference-between-parameters-add-and-parameters-addwithvalue)

从 MSDN 代码来看，这两者有什么区别：

```
 SqlCommand command = new SqlCommand(commandText, connection);

    //#1        
    command.Parameters.Add("@ID", SqlDbType.Int);
    command.Parameters["@ID"].Value = customerID;

    //#2
    command.Parameters.AddWithValue("@demographics", demoXml); 
```

做第一个以确保我正确地转换参数会更好吗？我正在努力使我的代码更安全。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T21:44:29.157

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)：

> AddWithValue 替换了接受 String 和 Object 的 SqlParameterCollection.Add 方法。**由于 SqlParameterCollection 可能存在歧义，不推荐使用带有字符串和对象的 Add 重载**。添加采用 String 和 SqlDbType 枚举值的重载，其中通过字符串传递整数可以解释为参数值或相应的 SqlDbType 值。**每当您想通过指定参数的名称和值来添加参数时，请使用 AddWithValue**。

因此，`AddWithValue`替换了会产生歧义的不推荐使用的重载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:46:44.087

也许这篇文章会有所帮助 [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

# python - wxPython“库未加载”

> ID：13732963
> 
> 赞同：1
> 
> 时间：2012-12-05T21:39:16.637
> 
> 标签：python, wxpython, wxwidgets

我为 Mac 制作了一个 wxPython 应用程序，并用 py2app 打包它。两个人已经说他们无法启动它，并显示以下错误消息：

```
ImportError: dlopen(/Users/username/Desktop/MCManager.app/Contents/Resources/lib/python2.6/wx/_core_.so, 2): Library not loaded: /usr/lib/libwx_macud-2.8.0.dylib
  Referenced from: /Users/username/Desktop/MCManager.app/Contents/Resources/lib/python2.6/wx/_core_.so
  Reason: image not found 
```

我只能在 Mac 10.6.7 上测试该应用程序。遇到问题的两个人都在使用 10.7.x。有没有其他人遇到过这个问题，或者知道这意味着什么？从消息看来，它试图加载 wx 库不成功，但是 wx 库应该在应用程序的 Resources 文件夹中，对吗？

这是我的设置文件：

```
#! /usr/bin/env python

import py2app
from setuptools import setup

setup(
    options = dict(
        py2app = dict(
            iconfile = 'MCManager.icns',
            packages = 'wx',
            site_packages = True,
            plist = dict(
                CFBundleName = "MCManager",
                CFBundleShortVersionString = "1.2.2",
                CFBundleGetInfoString = "MCManager 1.2.2",
                CFBundleExecutable = "MCManager",
                CFBundleIdentifier = "net.sourceforge.mcmanager",
            ),
        ),
    ),
    app = ['ScriptUnix.py']
) 
```

我用 , 运行它`arch -i386 python26 filename.py py2app`（`arch`因为没有 和 2.6 就无法让 Python 运行 32 位`arch`，因为长话短说，我不能将 2.7 与 py2app 一起使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:47:33.157

问题是您正在构建一个半独立的应用程序。正如[文档](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html)在各个地方所解释的那样，如果您使用的是“供应商 Python”，这意味着预装 OS X 的任何 Python 版本`py2app`都无法构建独立的应用程序。例如：

> 如果使用 --semi-standalone 选项或供应商 Python，则忽略 Python.framework。所有其他供应商文件（/usr/ 或 /System/ 中的那些，不包括 /usr/local/）也被排除在外。

因此，它不会将`wx`库打包在 中`/usr/lib`，因为这些是供应商库。相反，它只是链接到现有的。标准 OS X 10.7 系统上没有这样的库。即使有，您最终从 10.6 显式链接到 2.8.0 版本的事实意味着它可能无法在以后的系统上运行。

您需要做的是将这些`wx`库复制到您的`.app`包中，并从那里引用它们。如果`py2app`您使用供应商 Python 运行它，则不会为您执行此操作。这意味着您有三个选择：

1.  使用单独的 Python 安装。
2.  无论如何，都可以通过破解源来欺骗`py2app`构建独立的应用程序`py2app`。
3.  自己捆绑应用程序（或使用其他工具）。

最佳答案通常是#1。在您的评论中，您说您能够安装 Python 2.7.3（可能来自 python.org？），并且您能够安装`py2app`供应商 2.6，但您无法安装`py2app`自定义 2.7。 3\. 这听起来非常难以置信。（如果您能够以某种方式安装 2.7.3，则应该将其安装到您有权访问的目录中。）但是，即使它是真的，也没关系；您可以将 Python 包安装到主目录下的用户特定的站点包目录中。您不需要管理员权限。事实上，大多数 Unix 软件都是按照这种方式设计的。

一个更简单的方法是使用[virtualenv](http://pypi.python.org/pypi/virtualenv)。是的，我知道，您无法安装它，但您不必安装。如果您阅读文档，甚至还有一整套关于如何在无法安装任何东西的系统上引导 virtualenv 的说明。结果是您自己的个人 Python 安装，基于系统 2.7.3，但您可以完全控制。所以你可以`py2app`在那里安装。（有一些关于使用`py2app`和`virtualenv`一起使用的注意事项，您应该在`py2app`文档中阅读。）

如果你不能或不会做任何这些事情，那么`py2app`就不能做你想做的事，至少不能开箱即用。但它是开源的。源代码中甚至有注释解释了为什么它不尝试从系统 Python 进行独立构建。而且大多数真正棘手的东西都被分成单独的包（例如`macholib`and `altgraph`），因此您应该能够理解`py2app`自己，足以将适用于您的特定应用程序的独立包组合在一起。（这比修改`p2app`以完全通用的方式解决潜在问题要容易得多。）

或者您可以查看其他与 py2app 执行类似操作的工具。尝试在 PyPI 中搜索[py2app](http://pypi.python.org/pypi?%3Aaction=search&term=py2app)或[freeze](http://pypi.python.org/pypi?%3Aaction=search&term=freeze)看看会发生什么。您通常可以将软件包安装到您的主目录中，或者在不安装它们的情况下运行它们，所以开始尝试任何看起来有希望的东西，看看它是否能解决您的问题。

# html - css 让浮动 div 垂直堆叠

> ID：13732964
> 
> 赞同：3
> 
> 时间：2012-12-05T21:39:19.373
> 
> 标签：html, css, web

是否有可能让正确的浮动 div 始终“堆叠”在彼此下方？

例如，我正在尝试做这样的事情：

```
> ---------------------------------+
> |Container div           |   div1|
> |Fixed width             +--+----+ 
> |                           |div2|
> |                      +----+----+
> |                      |     div3|
> |                      +---------+
> |                                |
> +--------------------------------+ 
```

Div1、2 和 3 是可变宽度和高度。如果我只是将它们浮动，它们不会总是那样堆叠，有时 div2 会放在 div1 等的左侧，因为布局试图最小化容器的高度。我希望他们总是堆叠在一起。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-05T21:41:54.820

这些 css 规则应该把它们放在右对齐和堆叠上

```
.div1, .div2, .div3{
    float: right;
    clear: right;
} 
```

请参阅[示例小提琴](http://jsfiddle.net/8tXU2/1/)。

截屏 ![在此处输入图像描述](../Images/057f488e2076a199cb66c7c1ddf509cd.png)

资源

```
.div1, .div2, .div3{
    float:right;
    clear:right;
}
.div2{
    background-color:green;
    width: 300px;
    height: 20px;
}
.div1{
    background-color:blue;
    width: 100px;
    height: 30px;
}
.div3{
    background-color:red;
    width: 80px;
    height: 40px;
}

.container{
    background-color: gray;
    width: 400px;
    height: 400px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:41:26.787

在你的,周围放置一个`DIV`包装器，并让包装器在设置,时浮动`div1``div2``div3``div1``div2``div3``display: block``float: none`

# php - 我可以使用 Manifest 或 Appcache 文件定位特定浏览器/设备，还是只从桌面浏览器中排除 appcache？

> ID：13732965
> 
> 赞同：1
> 
> 时间：2012-12-05T21:39:18.977
> 
> 标签：php, android, ios, html, html5-appcache

本质上，我希望能够在我的网站上使用 appcache 文件，但仅适用于移动设备，以使这些设备能够查看我正在离线开发的网站/webapp，但是台式机/笔记本电脑通常可以访问互联网，我宁愿这些按原样查看站点，没有清单/缓存等。

我知道用户代理嗅探充其量是不可靠的，尽管可以提供一些好的结果，如果可以避免这种情况，那将是最好的。

我正在开发的站点/webapp 是用 HTML/CSS/JS/PHP 构建的，并使用响应式布局为每个设备提供相同的站点页面，并根据设备宽度（使用 css 媒体查询）使用自定义视图/布局。

感谢您提前提供的任何帮助，我对此的所有搜索都证明是徒劳的:(

**更新**

在 Robertc 在下面的评论之后，我想澄清一下，我想通过 appcache/manifest 文件排除任何缓存是桌面浏览器（即笔记本电脑上使用的相同浏览器）......这是来自客户端和同样从我看来，以编程方式将台式机和笔记本电脑定位在一起似乎更容易，因为它们使用相同的软件/操作系统...

更具体地说，我的 webapp 需要通过 iOS、Android 和 Blackberry 上的 appcache/manifest 支持缓存（尽管拥有所有平板电脑/智能手机会很好）所以问题可能是如何找到这些设备之一并包含 appcache 参考，但是这看起来像是在引导我希望避免的用户代理嗅探的路径......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:37:31.967

因为浏览器会在其他一切发生之前检查 Appcache.manifast，所以您必须进行额外的服务器端检测。您无法通过 javascript 加载 appcache.manifest。

如果您收到来自 iphone、ipad、android 等的请求，则在 Useragent 上进行服务器端检测并提供带有清单的 HTML，而在其他情况下则不提供清单。

用户代理检查是最好的方法。您为不伪造用户代理的人提供您的网站。

使用 php 对移动设备进行用户代理测试（只需添加您需要的设备）：

*   [移动正则表达式用户代理](https://stackoverflow.com/questions/8660555/mobile-regexp-user-agent)
*   [http://chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/](http://chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/)

# visual-studio-2010 - Visual c++ 中的内联 Shell 脚本代码

> ID：13732966
> 
> 赞同：0
> 
> 时间：2012-12-05T21:39:25.640
> 
> 标签：visual-studio-2010, shell, visual-c++

我想知道是否可以在 Visual c++ 代码中编写内联（嵌入式）shell 脚本代码。

或者可能从可视 C++ 代码调用 shell 脚本文件..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:17:03.437

它不是 shell 脚本，但我怀疑您可以使用 T4 完成您需要的工作，而无需离开 Visual Studio。

[http://msdn.microsoft.com/en-us/library/bb126445.aspx](http://msdn.microsoft.com/en-us/library/bb126445.aspx)

# android - ActionBarSherlock 给出错误

> ID：13732967
> 
> 赞同：0
> 
> 时间：2012-12-05T21:39:27.283
> 
> 标签：android, actionbarsherlock

“无法解析类型 android.support.v4.app 片段。它是从所需的 .class 文件中间接引用的。”

在 Eclipse 中导入墙纸管理器（我想在其中实现 ActionBarSherlock），

Eclipse中导入ActionBarSherlock最新版本库文件夹，

将该库文件夹设置为库，以便与 ACS 的 Properties > Android 中的其他项目一起使用，

从 WM 的属性 > Android 将 ActionBarSherlock 设置为墙纸管理器的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:45:07.100

您是在复制 jar 并链接到它吗？在 Eclipse 中，默认情况下不选中该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:43:09.187

1.  检查您的 libs 文件夹中是否没有另一个 android.support.v4.app 库

2.  尝试清理您的项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T09:09:32.010

您应该检查您的支持库是否与您在项目中引用的版本相同。

# nvd3.js - 带标记的 NVD3 线图是否可行？

> ID：13732971
> 
> 赞同：20
> 
> 时间：2012-12-05T21:39:38.210
> 
> 标签：nvd3.js

我正在制作一个 NVD3 线图，如果我可以为每个数据点显示标记而不仅仅是线本身，它将显着提高清晰度。不幸的是，我还没有找到一种简单的方法来使用 NVD3 做到这一点。我也考虑过使用散点图，但我不知道如何显示点之间的连接线。我考虑的第三个选项是覆盖一条线和散点图，但这会在图例中显示每个系列两次，并可能导致其他不必要的视觉复杂化。

有没有办法优雅地完成这个？下面列出了我的格式化技术的示例代码，但 test_data 中的“大小”和“形状”属性对当前代码的线图没有影响。

```
test_data = [ {     key: 'series1',
            values: [
                { x: 1, y: 2.33, size:5, shape:"circle" },
                { x: 2, y: 2.34, size:5, shape:"circle" },
                { x: 3, y: 2.03, size:5, shape:"circle" },
        ] } ];

nv.addGraph(function() {
  var test_chart = nv.models.lineChart();
  test_chart.xAxis.axisLabel('Sample Number');
  test_chart.yAxis
        .axisLabel('Voltage (V)')
        .tickFormat(d3.format('.02f'));

  d3.select('#test_plot')
      .datum(test_data)
    .transition().duration(500)
      .call(test_chart);

  nv.utils.windowResize(test_chart.update);
  return test_chart;
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T00:39:58.840

我还想在我正在处理的项目中添加标记。这是我和我的搭档找到的解决方案。

首先，您必须选择图表中的所有点并将填充不透明度设置为 1：

```
#my-chart .nv-lineChart circle.nv-point
{
    fill-opacity: 1;
} 
```

现在您的积分将可见。要调整每个点的大小，您需要修改每个点的“r”（半径）属性。这不是一种风格，所以你不能用 css 来做。这是一些可以完成这项工作的 jQuery 代码。500 毫秒的延迟是为了让代码在图表呈现之前不会运行。此代码段将半径设置为 3.5：

```
 setTimeout(function() {
            $('#my-chart .nv-lineChart circle.nv-point').attr("r", "3.5");
        }, 500); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-11T23:53:09.073

这让我感到困惑，直到我得到社区的帮助：

[图形中点的css样式](https://stackoverflow.com/questions/27892806/css-styling-of-points-in-figure)

所以这是我的解决方案，基于`css`：

```
.nv-point {
    stroke-opacity: 1!important;
    stroke-width: 5px!important;
    fill-opacity: 1!important;
} 
```

如果有人从这里来`rCharts`，下面是一个`rmarkdown`模板，用于创建一个`nPlot`带有线条和标记的模板：

```
 ```{r 'Figure'}  
require(rCharts)
load("data/df.Rda") 
# round data for rChart tooltip display
df$value <- round(df$value, 2)
n <- nPlot(value ~ Year, group = 'variable', data = df, type = 'lineChart') 
n$yAxis(axisLabel = 'Labor and capital income (% national income)')
n$chart(margin = list(left = 100)) # margin makes room for label
n$yAxis(tickFormat = "#! function(d) {return Math.round(d*100*100)/100 + '%'} !#")
n$xAxis(axisLabel = 'Year')
n$chart(useInteractiveGuideline=TRUE)
n$chart(color = colorPalette)
n$addParams(height = 500, width = 800)
n$setTemplate(afterScript = '<style>
  .nv-point {
    stroke-opacity: 1!important;
    stroke-width: 6px!important;
    fill-opacity: 1!important;
  } 
</style>'
)
n$save('figures/Figure.html', standalone = TRUE)
``` 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-19T05:16:47.073

当前版本的 nvd3 使用 path 而不是 circle 来绘制标记。这是我用来显示标记的一段 css 代码。

```
#chart g.nv-scatter g.nv-series-0 path.nv-point
{
    fill-opacity: 1;
    stroke-opacity: 1;
} 
```

我还在[https://github.com/novus/nvd3/issues/321](https://github.com/novus/nvd3/issues/321)中写了一些关于此的内容，您可以发现我如何改变制造商的形状。

我不知道如何更改标记的大小。试图找到解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-17T17:08:03.650

使用 nvd3 中的以下逻辑有选择地启用指向某些系列的点。

```
//i is the series number; starts with 0

var selector = 'g.nv-series-'+i+' circle';
d3.selectAll(selector).classed("hover",true); 
```

然而，数据中的附加参数（比如说'enable_points'：'true'）会更有意义。我希望用这个想法对 nvd3 进行一些更改。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-20T13:25:27.940

对于当前版本的 NVD3 (1.8.x)，我使用这个基于 D3 的解决方案（仅脚本，不需要 CSS 文件或样式块）：

```
nv.addGraph(function() {
  // ...
  return chart;
},
function() {
  // this function is called after the chart is added to document
  d3.selectAll('#myChart .nv-lineChart .nv-point').style("stroke-width",
    "7px").style("fill-opacity", ".95").style("stroke-opacity", ".95");
}
); 
```

使用的样式正是 NVD3 通过将“悬停”类应用于每个点（悬停时）添加的样式。根据您的需要调整它们。

# visual-studio-2010 - 在 VS 2010 中继承 C++ 项目属性

> ID：13732972
> 
> 赞同：0
> 
> 时间：2012-12-05T21:39:40.230
> 
> 标签：visual-studio-2010, visual-c++, properties

我在 VS2010 中有一个 C++ 项目。我希望另一个 C++ 项目继承其属性（例如，包括目录、外部库等）。似乎最好的方法是使用属性表，但我不知道该怎么做。

当我尝试将现有属性表添加到新项目时，我希望能够在旧项目的目录中找到包含旧项目属性的属性表。不存在这样的文件。

我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:55:41.917

为了创建可继承的属性，您必须创建一个新的属性表，将其保存在本地位置，并通过“添加现有”表让您希望这些属性使用（继承）它的任何项目。

列出属性表的顺序很重要。如果该属性被列为“使用默认值或从父级继承”，它将从其正下方的属性表中获取值，或者如果它下面没有，它将使用默认值。

属性表管理器中列出的表只是链接。如果文件链接到多个配置并且您将其更改为一个，则所有链接的配置都将接受更改。因此，如果您想对每个 Config 进行不同的更改。对于相同的财产，您必须制作单独的表格。

# c++ - 显示深度优先搜索图遍历 C++

> ID：13732973
> 
> 赞同：0
> 
> 时间：2012-12-05T21:39:44.843
> 
> 标签：c++, graph, vector, depth-first-search, graph-traversal

我正在遍历我设置为一个类的图，使用向量来存储顶点和边。我在图表上使用深度优先搜索来显示路径，但我想以某种方式让我的代码在通过它们时按顺序显示顶点，格式如下：

```
<u, i1, i2, ... v> 
```

其中“u”和“v”都是起始顶点（我希望它在同一个顶点开始和结束），“i”值是它沿途经过的顶点。

这是我目前拥有的 DFS 功能，我已经对其进行了简化，以便可以将其用作一般参考。我可以在这里修改什么以使其显示我想要的内容吗？（当前未设置为显示任何内容）。

```
vector<Vertex*> vertices;
vector<Edge*> edges;

class Vertex {
    public:
        Vertex () {};
        Vertex (int id, float safetyIndex, string name)
            : id(id), safetyIndex(safetyIndex), name(name), previous(NULL), distFromStart(INT_MAX), color("white")
        {
            vertices.push_back(this);
        }
    public:
        int id;
        float safetyIndex;
        string name;
        int distFromStart;
        Vertex* previous;
        string color;
};

class Edge {
    public:
        Edge () {};
        Edge (Vertex* intersection1, Vertex* intersection2, int distance)
            : intersection1(intersection1), intersection2(intersection2), distance(distance)
        {
            edges.push_back(this);
        }
        bool street_connection(Vertex* intersection1, Vertex* intersection2)
        {
            return (
                (intersection1 == this->intersection1 && intersection2 == this->intersection2) ||
                (intersection1 == this->intersection2 && intersection2 == this->intersection1));
        }
    public:
        Vertex* intersection1;
        Vertex* intersection2;
        int distance;
};

void pathFinder(Vertex* startVertex)
{
    DFS_visit(startVertex); 
}

void DFS_visit(Vertex* u)
{
    u->color = "gray";  //  Mark that we have visited intersection 'u'

    //  Create a vector containing all adjacent vertices to intersection 'u'
    vector<Vertex*>* adjVertex = AdjVertices(u);

    const int size = adjVertex->size();
    for( int i=0; i<size; ++i)
    {
        Vertex* v = adjVertex->at(i);
        if ( v->color == "white" )
        {
            DFS_visit(v);  // recursive function call
        }
    }

    //  Once all adjacent vertices have been located, we are done with this node
    u->color = "black";
}

vector <Vertex*>* AdjVertices(Vertex* vert)
{
    //  Creates a vector containing all of the adjacent vertices
    //  to the intersection in question (vert)
    vector<Vertex*>* adjVertex = new vector <Vertex*> ();
    const int size = edges.size();
    for(int i=0; i<size; ++i)
    {
        Edge* edge = edges.at(i);
        Vertex* adjacent = NULL;
        if (edge->intersection1 == vert)    // if edge's start vertex is the vertex in question
        {
            adjacent = edge->intersection2;
        }
        else if (edge->intersection2 == vert)   // if edge's end vertex is the vertex in question
        {
            adjacent = edge->intersection1;
        }
        if (adjacent && vertices_check(vertices, adjacent))
        {
            adjVertex->push_back(adjacent);
        }
    }
    return adjVertex;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:08:21.833

您可以使用 Vector（在调用 DFS_visit 的其他函数中构建）并将其传递给 DFS_visit。在 DFS_visit 中，在开始时添加节点，然后每次从被调查的子节点返回。那应该给你一个完整的路径描述。

```
void DFS_visit(Vertex* u, Vector<Vertex*> path )
{
    u->color = "gray";  //  Mark that we have visited intersection 'u'
    path.push_back(u);
    //  Create a vector containing all adjacent vertices to intersection 'u'
    vector<Vertex*>* adjVertex = AdjVertices(u);

    const int size = adjVertex->size();
    for( int i=0; i<size; ++i)
    {
        Vertex* v = adjVertex->at(i);
        if ( v->color == "white" )
        {
            DFS_visit(v,path);  // recursive function call
            path.push_back(u);
        }
    }

    //  Once all adjacent vertices have been located, we are done with this node
    u->color = "black";
} 
```

# asp.net - 从 URL 获取变量并将其传递给 SqlDataSource SelectCommand

> ID：13732975
> 
> 赞同：4
> 
> 时间：2012-12-05T21:39:58.227
> 
> 标签：asp.net, sql, urlvariables

“我在 asp.net vb 中工作，我试图从 URL 中获取一个变量并将其传递到我的 sql 数据源的 select 语句中。到目前为止，我有这个，但它不适用于 asp.net。

```
 <%Dim PersonNumId as String
    PersonNumID = Request.QueryString("Person")
    Dim PersonNum2
    PersonNum2 = Convert.ToInt32(PersonNumID)%>
    <aspSqlDataSource (other information required) SelectCommand="Select Name From Interests Where ID=@PersonNumID"  />
    <SelectParameters><asp:QueryStringParameter DefaultValue="<%=PersonNum2%>" DbType=Int32/></SelectParameters 
```

我尝试了几种不同的转换方法，但我需要最终结果是查询语句中的变量是一个 int。我是新手，所以任何建议都将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:33:32.333

答案最终很简单（对于了解 asp.net 的人）在`<asp:SqlDatasource><Selectparameters>`下面有一个选项，`<asp:QueryStringParameter>`您可以在 querystringfield 下输入要查询的字段，我认为它会自动将其转换或解析为您想要的类型。我的问题中有这个，但我不知道它实际上做了什么。我只使用了 querystringParameter，因为我在其他地方的示例中看到了它。所以这就是我最终得到的。

```
 <asp:SqlDataSource (other information required) SelectCommand="Select Name From Interests Where ID=@PersonNum">
   <SelectParameters>
   <asp:QueryStringParameter Name="PersonNum" QueryStringField="Person" DbType="Int32"/></SelectParameters></asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:58:00.867

在后面的代码中你可以尝试：

```
SqlDataSource1.SelectCommand = "Select * from notes where ID=" + Request.QueryString["ID"]; 
```

请使用最佳实践来保护自己免受 SQL 注入。

# google-apps-script - 尝试编辑受保护工作表时，触发 onEdit 的脚本遇到权限错误

> ID：13732976
> 
> 赞同：1
> 
> 时间：2012-12-05T21:40:01.060
> 
> 标签：google-apps-script, triggers, google-sheets

我对电子表格的 Google 脚本有疑问。我通过资源菜单在**编辑**上安装了一个脚本。**该脚本将一些单元格从未受保护**的工作表复制到**受保护**的工作表。当我登录到我的帐户（我是电子表格的所有者）时，该脚本可以正常工作，但在从无权访问受保护工作表的协作者帐户运行时会遇到权限错误。***脚本不应该以我（帐户所有者）身份运行并且不会遇到权限问题吗？*** 在同一电子表格中运行**onFormSubmit**的另一个脚本能够编辑**受保护的**协作者提交表单时的工作表，即使他无权访问受保护的工作表。这表明问题不在于权限本身，而是问题特定于 onEdit 触发器，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:56:55.670

这是预期的行为。onEdit 触发器是三个“简单触发器”之一。

来自[文档](https://developers.google.com/apps-script/understanding_triggers)：“这些简单的触发器响应 Google 电子表格中的操作而运行，它们以活动用户的身份运行。例如，如果 Bob 打开电子表格，那么 onOpen 函数将以 Bob 身份运行，无论是谁将脚本添加到电子表格. 出于这个原因，简单的触发器被限制在他们被允许做的事情上：

*   当电子表格以只读模式打开时，它们无法执行。
*   他们无法确定当前用户。
*   他们无法访问任何需要以该用户身份进行身份验证的服务。例如，谷歌翻译服务是匿名的，可以通过简单的触发器访问。Google 日历、Gmail 和协作平台不是匿名的，简单的触发器无法访问这些服务。
*   他们只能修改当前的电子表格。禁止访问其他电子表格。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-06T21:02:06.620

必须使用已安装的触发器才能工作

# php - 在 PHP 页面、IDE 之间传递对象以及将对象传递给其他类问题

> ID：13732979
> 
> 赞同：2
> 
> 时间：2012-12-05T21:40:20.577
> 
> 标签：php, object

我继承了一些我需要对其进行重大更改的 PHP 代码。我知道使用 PHP 可以序列化一个对象，并将页面之​​间的序列化文本作为 FormData 传递。在我继承的代码中，他们就是这样做的，但这会产生一些可维护性问题。我想知道采用这种方法是否是一个好主意。

例如 ...

当用户打开**PageA.php**时，会创建以下内容：

```
$expensiveObj = new ExpensiveClass($id); 
```

然后`$expensiveObj`将其序列化，并将生成的文本存储在 div 中，其中包含以下内容：

```
<div id="expensiveObj"><?php echo strtr(base64_encode(serialize($expensiveObj)), '+/=', '-_,');?></div> 
```

当**PageA.php加载时，会对****PageB.php**进行 ajax 调用。div 的内容作为 post 变量传递给**PageB.php**。在**PageB.php**中，以下代码反序列化对象：

```
$expensiveObj = unserialize(base64_decode(strtr($_POST['expensiveObj'], '-_,', '+/='))); 
```

`$expensiveObj`PHP 现在可以访问的字段和方法。我遇到的问题是

*   因为在**PageB.php**`$expensiveObj`中没有将 标识为 Class 的实例，所以 IDE 不知道 的字段和函数是否可用。我不能自动完成，也不能在 IDE 中查找可用的功能。此外，IDE 无法捕获潜在问题。另一个开发人员专门在 VI 中工作，所以他从不在乎。**`ExpensiveClass``ExpensiveClass`**

***   **PageB.php**需要重构。这个页面中发生了视图、业务和控制器逻辑，我更愿意创建几个类，但是我遇到了一个问题，我不知道如何将它们传递`$expensiveObj`给一个类。** 

 **我的问题是，有没有办法将一个对象传递给一个类？有没有办法通知 IDE 传入的 post 变量确实是 的一个实例`ExpensiveClass`？

最后，以这种方式传递对象甚至是一个好主意，还是我应该考虑更大的重构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:06:31.293

直接在 HTML 中存储对象绝不是一个好主意，因为它可以很容易地被客户端更改。在 PHP 中更常见的是根据给定的参数在每个请求上创建新对象。我看到你正在使用 初始化你的对象`$id`，所以你可以在请求之间传递这个 id。将数据存储到会话也不是最佳实践，会话应用于特定于会话的数据，例如登录用户等。

如果对象的创建非常昂贵，您可以使用缓存，例如[memcache](http://php.net/memcache)，一些外部[库](http://www.pluf.org/doc/cache.html)或只是编写您自己的，例如在文件系统或数据库中以 JSON 格式存储数据。**

# sql - 关注使用外部 SQL 服务器进行 DIH

> ID：13732983
> 
> 赞同：0
> 
> 时间：2012-12-05T21:40:31.720
> 
> 标签：sql, search, solr, lucene

我希望通过使用 DIH 将条目导入我的 SOLR 服务器，使用 JDBC 驱动程序连接到外部 postgre SQL 服务器。我每次将导入大约 50,000 个条目。

为我的数据连接到外部 SQL 服务器是否不可靠或有风险，或者它是否完全合理？

我唯一的选择是在另一台服务器上导出 SQL 文件，将 SQL 文件下载到我的 SOLR 服务器，将其导入我的 Solr 服务器的 postgreSQL 副本，然后在本地数据库上运行 DIH。

如果有人对此有任何经验或可以提供任何信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:43:28.540

这是一个标准用例，从远程数据库导入。充满信心地前进！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:56:06.873

您使用它的方式几乎就是 DIH 存在的原因。否则，您可以只使用`/update`处理 XML 文档的处理程序。我现在正在研究的核心定期索引每批 11,000,000 行。

# android - 带有 TableLayout 的 CursorLoader - 可能吗？

> ID：13732988
> 
> 赞同：0
> 
> 时间：2012-12-05T21:41:12.193
> 
> 标签：android, android-layout

我有一个`LoaderManager`从 SQLite 数据库的两列中提取数据的方法。我想在片段中以表格格式显示数据。我可以在`ListView`or中获取数据`GridView`，但无法弄清楚`TableLayout`. （`Gridview`有`setAdapter`方法，`TableLayout`没有。）

我希望在通过服务更新底层数据库时自动更新数据（因此 loaderManager.

在本网站上的任何问题或其他网站上的示例/教程中，我找不到任何关于如何实现我正在寻找的信息的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:43:38.223

TableLayout是应该静态使用的容器，还有LinearLayout、RelativeLayout、FrameLayout等。TableLayout不是adapter view，也就是不能绑定adapter。我建议您改用 ListView，或者动态构建您的 TableLayout。不过，ListView 解决方案更智能，因为它具有高度可扩展性，因为它是可滚动的和重用视图，通过保留更少的视图实例来优化布局性能。

# windows-phone - Windows Phone 8 磁贴大小？

> ID：13732994
> 
> 赞同：9
> 
> 时间：2012-12-05T21:41:33.450
> 
> 标签：windows-phone, windows-phone-8

我在哪里可以找到我的 windows phone 8 图标应该具有的信息？

为了提交我的应用程序，我必须创建的不同图标大小的最小数量是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T07:34:32.957

实际上，您在此页面上有 Tile 大小： [Windows Phone 的 Tiles](http://msdn.microsoft.com/en-US/library/windowsphone/develop/hh202948%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T21:44:32.043

我在 WP8 文档中找到了答案：http: [//msdn.microsoft.com/library/windowsphone/design/jj662929 (v=vs.105).aspx](http://msdn.microsoft.com/library/windowsphone/design/jj662929(v=vs.105).aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-04T18:20:49.230

有图直接回答

[http://i.msdn.microsoft.com/dynimg/IC619133.png](http://i.msdn.microsoft.com/dynimg/IC619133.png)

**小** 翻转和循环 159 × 159 像素；标志性 110 × 110 像素 **中等** 翻转和循环 336 × 336 像素；标志性的 202 × 202 像素 **宽** 翻转和循环 691 × 336 像素；标志性的不适用

# ruby-on-rails - before_create - Ruby on Rails

> ID：13732995
> 
> 赞同：0
> 
> 时间：2012-12-05T21:41:40.913
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [Ruby on Rails 回调，:before_save 和:before_create 有什么区别？](https://stackoverflow.com/questions/6249475/ruby-on-rails-callback-what-is-difference-between-before-save-and-before-crea)

我希望将 Ruby on Rails 的当前 ID 从 /1、/2、/3 等替换为随机生成的 URL，例如 /csd8dsv68dvs。

在研究创建它之后，我在帖子模型中发现了这个

```
before_create { self.code = SecureRandom.hex(5) } 
```

before_create 做什么以及如何实现随机 id？

### 更新

看来我弄错了一部分。我不想更改 ID，我只想将 URL 更改为用户无法猜测的随机字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:46:07.010

一个伟大的宝石可以帮助您`:id`通过路线作为标识符的资源替代品是**[friendly_id](https://github.com/norman/friendly_id)**。上面甚至还有**[一个 RailsCast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)**。

`before_create`是一个**[ActiveRecord 回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)**，在 SO（正如其他人评论的那样）和 API 中都有很好的解释。

如果您选择使用原始

```
before_create { self.code = SecureRandom.hex(5) } 
```

您可以修改控制器操作以使用此代码而不是 id 来查找资源。

```
def some_action
  @resource = ModelClass.find_by_code!(params[:id])
end 
```

您将`:code`属性传递给视图中资源的路由

```
resource_path(@resource.code) 
```

`resource_path`您的资源的路由方法在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:48:40.217

我*强烈*建议不要替换 Rails id，但如果您的意思是要将 URL 更改为更不可预测的内容，那么您就在正确的道路上。

这是一个与通过创建“漂亮 URL”解决的问题非常相似的问题，该问题已经解决了很多次，例如使用[Friendly ID gem](https://github.com/norman/friendly_id)。也许您会想要分叉 gem 并将其称为“不友好的 ID”:-)

无论 gem 是否开箱即用，方法都很简单——阅读代码并向编写它的人学习！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:55:16.797

我同意另外两张海报；您可能不想这样做，FriendlyID 提供了一种使用备用 ID 记录记录的好方法。也就是说，如果你真的想替换 id，你可以改变它：

```
thing = Thing.new
thing.id = some_random_number_generator()
thing.save! 
```

这已经[在 ActiveRecord 中的 Overriding id on create 中进行了](https://stackoverflow.com/questions/431617/overriding-id-on-create-in-activerecord)介绍。认真考虑不要这样做，除非你有充分的理由。

# java - 使用 import net.jini.export.Exporter 时出现“AWT-EventQueue-0”java.lang.ExceptionInInitializerError；

> ID：13732996
> 
> 赞同：1
> 
> 时间：2012-12-05T21:41:51.907
> 
> 标签：java, swing, jini

我正在尝试创建一个需要使用 JavaSpace 的聊天系统。在大多数情况下，这是有效的，除非尝试使自动通知正常工作，以便在添加条目时从空间向列表添加新条目时更新我的​​列表。当我收到 java.lang.ExceptionInInitializerError 时，这已成为一个问题。完整的跟踪输出如下。

```
Exception in thread "AWT-EventQueue-0" java.lang.ExceptionInInitializerError
at com.sun.jini.thread.GetThreadPoolAction.<clinit>(GetThreadPoolAction.java:52)
at net.jini.jeri.tcp.TcpServerEndpoint.<clinit>(TcpServerEndpoint.java:117)
at com.chat.client.gui.Topics.<init>(Topics.java:129)
at com.chat.client.gui.Main.actionPerformed(Main.java:114)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:6382)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3275)
at java.awt.Component.processEvent(Component.java:6147)
at java.awt.Container.processEvent(Container.java:2083)
at java.awt.Component.dispatchEventImpl(Component.java:4744)
at java.awt.Container.dispatchEventImpl(Container.java:2141)
at java.awt.Component.dispatchEvent(Component.java:4572)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
at java.awt.Container.dispatchEventImpl(Container.java:2127)
at java.awt.Window.dispatchEventImpl(Window.java:2489)
at java.awt.Component.dispatchEvent(Component.java:4572)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:704)
at java.awt.EventQueue.access$400(EventQueue.java:82)
at java.awt.EventQueue$2.run(EventQueue.java:663)
at java.awt.EventQueue$2.run(EventQueue.java:661)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$3.run(EventQueue.java:677)
at java.awt.EventQueue$3.run(EventQueue.java:675)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:674)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
at java.security.AccessController.checkPermission(AccessController.java:549)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
at java.lang.SecurityManager.checkAccess(SecurityManager.java:712)
at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:299)
at java.lang.ThreadGroup.getParent(ThreadGroup.java:150)
at com.sun.jini.thread.NewThreadAction$1.run(NewThreadAction.java:54)
at java.security.AccessController.doPrivileged(Native Method)
at com.sun.jini.thread.NewThreadAction.<clinit>(NewThreadAction.java:49)
... 40 more 
```

我正在使用的代码如下

```
package com.chat.client.gui;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.rmi.RemoteException;
import java.util.ArrayList;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.JTextField;
import javax.swing.ListModel;
import javax.swing.WindowConstants;
import javax.swing.SwingUtilities;
import net.jini.core.entry.UnusableEntryException;
import net.jini.core.lease.Lease;
import net.jini.core.transaction.TransactionException;
import net.jini.space.JavaSpace;
import com.chat.client.backend.SpaceUtils;
import com.chat.client.backend.Topic;
import com.chat.client.backend.TopicList;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultListModel;
import net.jini.core.event.RemoteEvent;
import net.jini.core.event.RemoteEventListener
import java.rmi.server.*;
import java.rmi.RemoteException;
import net.jini.core.event.*;
import net.jini.export.Exporter;
import net.jini.jeri.BasicILFactory;
import net.jini.jeri.BasicJeriExporter;
import net.jini.jeri.tcp.TcpServerEndpoint;
import java.rmi.RMISecurityManager;

public class Topics extends javax.swing.JFrame implements ActionListener,         RemoteEventListener {
private JList topicList;
private JScrollPane jScrollPane1;
private JButton exitButton;
private JButton closeButton;
private JButton joinTopic;
private JButton addButton;
private JLabel jLabel2;
private JLabel jLabel1;
private JTextField topicNameTextField;

/*
 * user added variables
 */
private static JavaSpace space;
private String ownersName;
private String[] theTopics;
    private boolean isFirstTimeStart = true;
    private TopicList theList = null;
    private TopicList template_list = null;
    private ArrayList<String> topics;
    private DefaultListModel topicListModel;
    private RemoteEventListener theStub;
/**
* Auto-generated main method to display this JFrame
*/
public static void main(String[] args) throws RemoteException{
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            Topics inst = new Topics();
            inst.setLocationRelativeTo(null);
            inst.setVisible(true);
        }
    });
}

public Topics() {
    super();
            space = SpaceUtils.getSpace();
            if (space == null){
                    System.err.println("Failed to find the javaspace");
                    System.exit(1);
            }

           try{ 
            if (System.getSecurityManager() == null) {
                System.setSecurityManager(new RMISecurityManager());
            }
            Exporter myDefaultExporter = 
                new BasicJeriExporter(TcpServerEndpoint.getInstance(0),
                    new BasicILFactory(), false, true);
           } catch(Exception ex) {

           }
    initGUI();
}

public Topics(String s) {
    super();
            space = SpaceUtils.getSpace();
            if (space == null){
                    System.err.println("Failed to find the javaspace");
                    System.exit(1);
            }

            try {
                if (System.getSecurityManager() == null) {
                    System.setSecurityManager(new RMISecurityManager());
                }
        /*****The issue seems to arise here when instantiating the Exporter **********/
                // create the exporter
                Exporter myDefaultExporter = 
                    new BasicJeriExporter(TcpServerEndpoint.getInstance(0),
                        new BasicILFactory(), false, true);

                // register this as a remote object 
                // and get a reference to the 'stub'
                theStub = (RemoteEventListener) myDefaultExporter.export(this);

                // add the listener
                space.notify(template_list, null, this.theStub, Lease.FOREVER, null);     

                ownersName = s; when using 
                topics = new ArrayList<String>();
                topicListModel = new DefaultListModel();
                template_list = null;
                template_list = new TopicList();

                System.out.println("trying to get the list from the space");
                theList = null;
                theList = (TopicList) space.take(template_list, null, Long.MAX_VALUE);
                System.out.println("Got the list");
                if(!theList.topics.isEmpty() && theList.topicListName.equals("GZSpace")) {
                    System.out.println("list is not empty");
                    for(int i = 0; i < theList.topics.size(); i++) {
                        topicListModel.addElement(theList.topics.get(i));
                    }
                    space.write(theList, null, Lease.FOREVER);
                } else {
                    space.write(theList, null, Lease.FOREVER);
                }
            } catch (UnusableEntryException ex) {
                Logger.getLogger(Topics.class.getName()).log(Level.SEVERE, null, ex);
            } catch (TransactionException ex) {
                Logger.getLogger(Topics.class.getName()).log(Level.SEVERE, null, ex);
            } catch (InterruptedException ex) {
                Logger.getLogger(Topics.class.getName()).log(Level.SEVERE, null, ex);
            } catch (RemoteException ex) {
                Logger.getLogger(Topics.class.getName()).log(Level.SEVERE, null, ex);
            }
            initGUI();
}

private void initGUI() {
    try {
        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        getContentPane().setLayout(null);
        {
            jScrollPane1 = new JScrollPane();
            getContentPane().add(jScrollPane1);
            jScrollPane1.setBounds(230, 43, 142, 170);
            {
                                topicList = new JList(topicListModel);
                                jScrollPane1.setViewportView(topicList);
                                topicList.setModel(topicListModel);
                                topicList.setBounds(230, 43, 142, 170);
            }
        }
        {
            topicNameTextField = new JTextField();
            getContentPane().add(topicNameTextField);
            topicNameTextField.setBounds(80, 43, 145, 23);
        }
        {
            jLabel1 = new JLabel();
            getContentPane().add(jLabel1);
            jLabel1.setText("To create a topic, enter the name below and click add");
            jLabel1.setBounds(12, 15, 355, 16);
        }
        {
            jLabel2 = new JLabel();
            getContentPane().add(jLabel2);
            jLabel2.setText("Topic Name:");
            jLabel2.setBounds(12, 46, 68, 16);
        }
        {
            addButton = new JButton();
            getContentPane().add(addButton);
            addButton.setText("Add New " +
                    "Topic");
            addButton.setBounds(12, 88, 213, 23);
            addButton.addActionListener(this);
        }
        {
            joinTopic = new JButton();
            getContentPane().add(joinTopic);
            joinTopic.setText("Join Existing Topic");
            joinTopic.setBounds(12, 122, 213, 23);
            joinTopic.addActionListener(this);
        }
        {
            closeButton = new JButton();
            getContentPane().add(closeButton);
            closeButton.setText("Close ");
            closeButton.setBounds(12, 156, 213, 23);
            closeButton.addActionListener(this);
        }
        {
            exitButton = new JButton();
            getContentPane().add(exitButton);
            exitButton.setText("Exit Chat System");
            exitButton.setBounds(12, 190, 213, 23);
            exitButton.addActionListener(this);
        }
        pack();
        this.setSize(400, 269);
    } catch (Exception e) {
        //add your error handling code here
        e.printStackTrace();
    }
}

@Override
public void actionPerformed(ActionEvent e) {
    if(e.getSource() == addButton) {
            try {
                theList = null;
                template_list = null;
                theList = (TopicList) space.take(template_list, null, Long.MAX_VALUE);
                if(!theList.topics.isEmpty() && theList.topicListName.equals("GZSpace")) {
                    theList.topics.add(topicNameTextField.getText());
                    topicListModel.addElement(topicNameTextField.getText());
                    topicNameTextField.setText("");
                    space.write(theList, null, Lease.FOREVER);
                } else {
                    space.write(theList, null, Lease.FOREVER);
                }

            } catch (UnusableEntryException ex) {
                Logger.getLogger(Topics.class.getName()).log(Level.SEVERE, null, ex);
            } catch (TransactionException ex) {
                Logger.getLogger(Topics.class.getName()).log(Level.SEVERE, null, ex);
            } catch (InterruptedException ex) {
                Logger.getLogger(Topics.class.getName()).log(Level.SEVERE, null, ex);
            } catch (RemoteException ex) {
                Logger.getLogger(Topics.class.getName()).log(Level.SEVERE, null, ex);
            }
    }

    if(e.getSource() == joinTopic) {

    }

    if(e.getSource() == closeButton) {
        Main main = new Main();
        main.setLocationRelativeTo(null);
        main.setVisible(true);
        dispose();
    }

    if(e.getSource() == exitButton) {
        dispose();
    }

}

    public void notify(RemoteEvent ev) {
        // this is the method called when we are notified
        // of an object of interest
        TopicList template = new TopicList();

        try {
            TopicList theList = (TopicList)space.take(template, null, Long.MAX_VALUE);
            for(int i = 0; i < theList.topics.size(); i++) {
                topicListModel.addElement(theList.topics.get(i));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        // that's all we need to do in this demo so we can quit...
        System.exit(0);
    }
} 
```

谢天谢地，我们会收到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:00:20.677

好的，所以这个问题的答案是该项目需要这里看到的安全策略

```
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup) 
```

使用 -Djava.security.manager -Djava.security.policy=/src/destination/to/file/policy.all 将安全策略添加到 netbeans 中的项目后，问题已解决