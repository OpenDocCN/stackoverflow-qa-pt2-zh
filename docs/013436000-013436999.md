# StackOverflow 问答 13436000-13436999

# c# - 相机作为背景

> ID：13436000
> 
> 赞同：2
> 
> 时间：2012-11-17T23:50:34.890
> 
> 标签：c#, background, camera, directx, sharpdx

尝试在应用程序中使用笔记本网络摄像头预览时遇到了几个问题。

我正在努力将相机用作 Xaml 中 3D 模型的背景。

让我这么说吧： - XAML 是顶层，它包含所有必要的控件，如按钮、文本等；- DirectX 是呈现 Xaml 背后的所有内容的层

您可以使用 Xaml 和 .NET 显示来自相机的预览。不幸的是，预览显示在 DirectX 层的顶部，覆盖了所有 3D 对象（这是意外行为）。

我试图找到的是解决该问题的方法。

有一种方法可以使用 SurfaceImageSource 制作 Xaml-DirectX-Xaml 层顺序，但需要大量的工作和底层编程。

希望您能帮助我找到该特定问题的解决方案。

# linux - 如何调用位于其他目录的 Makefile？

> ID：13436002
> 
> 赞同：19
> 
> 时间：2012-11-17T23:50:42.220
> 
> 标签：linux, shell, makefile

我正在尝试这样做：

我想从位于不同目录中的 shell 脚本中调用 make（`Makefile`存在于其他目录中，`abc`可以使用路径）。我该怎么做呢？

由于 shell 脚本不允许我`cd`进入`Makefile`目录并执行`make`，我如何编写 shell 命令（通过给出要执行的路径`Makefile`）来执行`make`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-17T23:56:49.210

GNU`make`接受许多[选项](http://www.gnu.org/software/make/manual/make.html#Options-Summary)，特别是`-C`在运行之前更改目录，以及`-f`提供`Makefile`以下选项。

适当地组合它们。

考虑使用[remake](http://bashdb.sourceforge.net/remake/)来简化相关问题的调试（尤其是使用`-x`） 。`Makefile`使用 GNU make 版本 4 或更高版本，还可以使用`make --trace`...

您可以拥有自己的可执行shell 脚本（例如，在您的`$HOME/bin/`哪个将在您的中`$PATH`），它同时使用`cd`和`make`）。

您可以考虑其他[构建自动化](https://en.wikipedia.org/wiki/Build_automation)工具（也许是[忍者）](https://en.wikipedia.org/wiki/Ninja_(build_system))

另请阅读 P.Miller 的论文[*Recursive Make 被认为是有害的*](http://aegis.sourceforge.net/auug97.pdf)

# jquery-mobile - jQuery Mobile 和 ASP.NET WebForms

> ID：13436004
> 
> 赞同：0
> 
> 时间：2012-11-17T23:51:04.077
> 
> 标签：jquery-mobile, webforms

我正在使用 jQuery Mobile 1.1 和 .NET 3.5 WebForms。检查 !Page.IsPostBack 后，我在 Page_Load 中填充了一些下拉列表。使用 JQM 时，带有这些下拉菜单的 UpdatePanel 返回时所有下拉菜单都为空。我觉得这与 ViewState 有关，因为它是以前由代码填充的所有控件。在 ascx 中填写的下拉列表没有相同的问题。

我的 mobileinit 中唯一的内容是：

```
$.mobile.ajaxEnabled = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:03:15.347

jQuery Mobile、asp.net web 表单和更新面板根本无法相互配合：

[由于回发，JQueryMobile 对话框显示两次](https://stackoverflow.com/questions/13402300/)

当更新面板中发生更改时，您可能还会遇到与选择菜单不刷新相关的问题。考虑手动刷新：

```
$("#mySelectMenu").selectmenu("refresh"); 
```

# bash - 用于更新 postgres 数据库的 bash 脚本

> ID：13436005
> 
> 赞同：1
> 
> 时间：2012-11-17T23:51:06.107
> 
> 标签：bash, postgresql, shell, cat, psql

我现在有一些 html 数据存储在文本文件中。我最近决定将 HTML 数据存储在 pgsql 数据库中而不是平面文件中。现在，“条目”表包含指向文件的“路径”列。我添加了一个“内容”列，现在应该将数据存储在“路径”指向的文件中。完成后，“路径”列将被删除。我遇到的问题是这些文件包含使我的脚本无法正常工作的撇号。我能做些什么来纠正这个问题？

这是脚本

```
#!/bin/sh
dbname="myDB"
username="username"
fileroot="/path/to/the/files/*"

for f in $fileroot
do
psql $dbname $username -c "
  UPDATE entries
  SET content='`cat $f`'
  WHERE id=SELECT id FROM entries WHERE path LIKE '*`$f`';"
done 
```

注意： 中的逻辑`id=SELECT...FROM...WHERE path LIKE ""`不是问题。我已经在 pgsql 环境中使用示例文件名对此进行了测试。

问题是当 I 时， **Edit: the contents of**`cat $f` $f中的任何撇号都会关闭 SQL 字符串，并且出现语法错误。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:18:41.890

For the single quote escaping issue, a reasonable workaround might be to double the quotes, so you'd use:

```
`sed "s/'/''/g" < "$f"` 
```

to include the file *contents* instead of the `cat`, and for the second invocation in the `LIKE` where you appeared to intend to use the file *name* use:

```
${f/"'"/"''"/} 
```

to include the literal string content of `$f` instead of executing it, and double the quotes. The `${varname/match/replace}` expression is `bash` syntax and may not work in all shells; use:

```
`echo "$f" | sed "s/'/''/g"` 
```

if you need to worry about other shells.

* * *

There are a bunch of other problems in that SQL.

*   You're trying to *execute* `$f` in your second invocation. I'm pretty sure you didn't intend that; I imagine you meant to include the literal string.
*   Your subquery is also wrong, it lacks parentheses; `(SELECT ...)` not just `SELECT`.
*   Your `LIKE` expression is also probably not doing what you intended; you probably meant `%` instead of `*`, since `%` is the SQL wildcard.

* * *

If I also change backticks to `$()` (because it's clearer and easier to read IMO), fix the subquery syntax and add an alias to disambiguate the columns, and use a here-document instead passed to `psql`'s stdin, the result is:

```
psql $dbname $username <<__END__
  UPDATE entries
  SET content=$(sed "s/'/''/g" < "$f")
  WHERE id=(SELECT e.id FROM entries e WHERE e.path LIKE '$(echo "$f" | sed "s/'/''/g")');
__END__ 
```

The above assumes you're using a reasonably modern PostgreSQL with `standard_conforming_strings = on`. If you aren't, change the regexp to escape apostrophes with `\` instead of doubling them, and prefix the string with `E`, so `O'Brien` becomes `E'O\'Brien'`. In modern PostgreSQL it'd instead become `'O''Brien'`.

* * *

In general, I'd recommend using a real scripting language like Perl with DBD::Pg or Python with psycopg to solve scripting problems with databases. Working with the shell is a bit funky. This expression would be much easier to write with a database interface that supported parameterised statements.

For example, I'd write this as follows:

```
import os
import sys
import psycopg2

try:
        connstr = sys.argv[1]
        filename = sys.argv[2]
except IndexError as ex:
        print("Usage: %s connect_string filename" % sys.argv[0])
        print("Eg: %s \"dbname=test user=fred\" \"some_file\"" % sys.argv[0])
        sys.exit(1)

def load_file(connstr,filename):
        conn = psycopg2.connect(connstr)
        curs = conn.cursor()
        curs.execute("""
        UPDATE entries
        SET content = %s
        WHERE id = (SELECT e.id FROM entries e WHERE e.path LIKE '%%'||%s);
        """, (filename, open(filename,"rb").read()))
        curs.close()

if __name__ == '__main__':
        load_file(connstr,filename) 
```

Note the SQL wildcard `%` is doubled to escape it, so it results in a single `%` in the final SQL. That's because Python is using `%` as its format-specifier so a literal `%` must be doubled to escape it.

You can trivially modify the above script to accept a list of file names, connect to the database once, and loop over the list of all file names. That'll be a *lot* faster, especially if you do it all in one transaction. It's a real pain to do that with `psql` scripting; you have to use bash co-process [as shown here](https://stackoverflow.com/a/8305578/398670) ... and it isn't worth the hassle.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:27:47.077

在原始帖子中，我听起来好像 $f 表示的文件名中有撇号。事实并非如此，所以一个简单`echo "$f"`的就可以解决我的问题。

为了更清楚起见，我的文件内容被格式化为 html 片段，通常类似于`<p>Blah blah <b>blah</b>...</p>`. 在尝试了 Craig 发布的解决方案后，我意识到我在一些锚标记中使用了单引号，我不想将它们更改为其他内容。只有少数文件发生了这种违规行为，所以我只是手动将它们更改为双引号。我还意识到，与其转义撇号，不如将它们转换为`&apos;`以下是我最终使用的最终脚本：

```
dbname="myDB"
username="username"
fileroot="/path/to/files/*"

for f in $fileroot
do
psql $dbname $username << __END__
  UPDATE entries
  SET content='$(sed "s/'/\&apos;/g" < "$f")'
  WHERE id=(SELECT e.id FROM entries e WHERE path LIKE '%$(echo "$f")');
__END__
done 
```

此处的格式着色可能使它看起来语法不正确，但我已经验证它是正确的。**

# c# - 从数据库中删除不在平面文件中的记录

> ID：13436008
> 
> 赞同：0
> 
> 时间：2012-11-17T23:51:15.277
> 
> 标签：c#, asp.net-mvc-3, linq-to-entities

我正在将文本文件中的记录导入我的数据库。我设置了它来检查我的记录，以确保数据库中没有重复。如果数据库中已经有一个条目，它将跳过该记录。现在我需要解决的问题是文本文件中没有记录但数据库中有记录时。我需要从数据库中删除与文件中任何记录都不匹配的记录。

```
 public static void ParseComplaint(string location)
    {

        Console.WriteLine("Parsing.....");
        List<AutoMakeNoEntity> am = DBCacheHelper.GetAllMakes().ToList<AutoMakeNoEntity>();

        using (var reader = new StreamReader(location))
        {
            foreach (string line in File.ReadLines(location))
            {
                if (string.IsNullOrWhiteSpace(line))
                {
                    continue;
                }
                var tokens = line.Trim().Split(new char[] { '\t' });

                if (am.Any(c => c.MakeName == tokens[3]))
                {
                    using (RecallsContext context = new RecallsContext())
                    {
                        string tmp = tokens[0];
                        if (!context.complaints.Any(c => c.CMPLID == tmp))
                        {

                            var recalls = new Complaints();

                            recalls.CMPLID = tokens[0];
                            recalls.ODINO = tokens[1];
                            recalls.MFR_NAME = tokens[2];
                            recalls.MAKETXT = tokens[3];
                            recalls.MODELTXT = tokens[4];
                            recalls.YEARTXT = tokens[5];
                            recalls.CRASH = tokens[6];
                            recalls.FAILDATE = tokens[7];
                            recalls.FIRE = tokens[8];
                            recalls.INJURED = tokens[9];
                            recalls.DEATHS = tokens[10];
                            recalls.COMPDESC = tokens[11];
                            recalls.CITY = tokens[12];
                            recalls.STATE = tokens[13];
                            recalls.VIN = tokens[14];
                            recalls.DATEA = tokens[15];
                            recalls.LDATE = tokens[16];
                            recalls.MILES = tokens[17];
                            recalls.OCCURENCES = tokens[18];
                            recalls.CDESCR = tokens[19];
                            recalls.CMPL_TYPE = tokens[20];
                            recalls.POLICE_RPT_YN = tokens[21];
                            recalls.PURCH_DT = tokens[22];
                            recalls.ORIG_OWNER_YN = tokens[23];
                            recalls.ANTI_BRAKES_YN = tokens[24];
                            recalls.CRUISE_CONT_YN = tokens[25];
                            recalls.NUM_CYLS = tokens[26];
                            recalls.DRIVE_TRAIN = tokens[27];
                            recalls.FUEL_SYS = tokens[28];
                            recalls.FUEL_TYPE = tokens[29];
                            recalls.TRANS_TYPE = tokens[30];
                            recalls.VEH_SPEED = tokens[31];
                            recalls.DOT = tokens[32];
                            recalls.TIRE_SIZE = tokens[33];
                            recalls.LOC_OF_TIRE = tokens[34];
                            recalls.TIRE_FAIL_TYPE = tokens[35];
                            recalls.ORIG_EQUIP_YN = tokens[36];
                            recalls.MANUF_DT = tokens[37];
                            recalls.SEAT_TYPE = tokens[38];
                            recalls.RESTRAINT_TYPE = tokens[39];
                            recalls.DEALER_NAME = tokens[40];
                            recalls.DEALER_TEL = tokens[41];
                            recalls.DEALER_CITY = tokens[42];
                            recalls.DEALER_STATE = tokens[43];
                            recalls.DEALER_ZIP = tokens[44];
                            recalls.PROD_TYPE = tokens[45];
                            if (tokens.Length == 47)
                            {
                                recalls.REPAIRED_YN = tokens[46];
                            }

                            context.complaints.Add(recalls);
                            context.SaveChanges();
                            recalls.Dispose();
                        }

                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:58:33.397

> 我需要从数据库中删除与文件中任何记录都不匹配的记录。

如果您希望数据库匹配文本文件的内容，为什么不先将其清空呢？

# compression - 在霍夫曼编码中加入树

> ID：13436013
> 
> 赞同：0
> 
> 时间：2012-11-17T23:51:43.047
> 
> 标签：compression, huffman-code

我们有动画[http://upload.wikimedia.org/wikipedia/commons/a/ac/Huffman_huff_demo.gif](http://upload.wikimedia.org/wikipedia/commons/a/ac/Huffman_huff_demo.gif) 我听不懂。在霍夫曼算法中，我们必须在动画的第一步中加入具有最低可能性的两棵树，我们加入具有可能性 1 的树，这给了我们具有可能性 2 的树。那么为什么在下一步中我们加入 '2 和 m 2 insted 加入我们的 b 2 p树与'2 树？

# java - 循环不执行内部 if 语句

> ID：13436016
> 
> 赞同：0
> 
> 时间：2012-11-17T23:52:08.037
> 
> 标签：java, if-statement, while-loop

我在一个线程中有以下方法，它可以 100% 工作，但是一旦我删除`System.out.println("here");`代码，它就会停止做它正在做的事情。没有错误，它只是看起来什么都不做。它的作用是使图像的颜色变亮，其中的调试线变亮，没有它，它不会变亮。为什么会这样？

线程类：

```
package pocketshop.threads;

import com.jogamp.opencl.CLBuffer;
import java.awt.Container;
import java.awt.image.BufferedImage;
import java.nio.FloatBuffer;
import pocketshop.Canvas;
import pocketshop.graphics.CL;
import pocketshop.graphics.Preview;

/**
 *
 * @author Ryan
 */
public class AdjustThread extends Thread {

    protected float amount = 0;
    protected CLBuffer<FloatBuffer> buffer;
    protected String adjustment;
    protected Container parent;

    public AdjustThread(Container parent, String adjustment) {
        this.parent = parent;
        this.adjustment = adjustment;
    }
    public void setAmount(float amount){
        this.amount = amount;
    }

    public CLBuffer<FloatBuffer> getBuffer() {
        return buffer;
    }

    public void run() {
        float cAmount = 0;
        while(true){
            System.out.println("here");
            if(cAmount != this.amount){
                cAmount = this.amount;
                CL.start(adjustment, this.amount);
                buffer = CL.getBuffer();

                float[] pixels = CL.getPixels();
                BufferedImage newimage = new BufferedImage(Canvas.image.getWidth(), Canvas.image.getHeight(), BufferedImage.TYPE_INT_RGB);
                buffer.getBuffer().get(pixels).rewind();
                newimage.getRaster().setPixels(0, 0, Canvas.image.getWidth(), Canvas.image.getHeight(), pixels);
                Preview.setImage(newimage);
                Canvas.preview = Preview.getImage();
                parent.repaint();
            }
        }
    }
} 
```

以及对话框相关代码：

```
package pocketshop.dialogs;

import java.awt.image.BufferedImage;
import pocketshop.Canvas;
import pocketshop.graphics.adjustments.Contrast;
import pocketshop.threads.AdjustThread;

/**
 *
 * @author Ryan
 */
public class BrightnessContrastDialog extends javax.swing.JDialog {

    AdjustThread adj;

    /**
     * Creates new form BrightnessContrastDialog
     */
    public BrightnessContrastDialog(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        adj = new AdjustThread(this.getParent(), "Brightness");
        adj.start();
    }

    // Run everytime the JSlider moves
    private void sldBrightnessStateChanged(javax.swing.event.ChangeEvent evt) {                                           
        float val = sldBrightness.getValue();
        txtBrightness.setText("" + (int) val);
        adj.setAmount(val);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:36:44.060

被`this.amount`声明为`volatile`?

我认为这个字段是由于另一个线程中的分配而改变的。如果它没有被声明为`volatile`，那么没有理由假设运行上述`run()`方法的线程会观察到它的变化。在您第一次分配`this.amount`给`cAmount`之后，它们在此后保持相等 - 从这个线程的角度来看，无论如何。

一旦您为我们阐明了声明的限定符`this.amount`并显示在其他地方更改的代码片段，我们可以帮助指定恢复所需行为所需的适当同步设备。

至于为什么调用`PrintStream#println()`似乎在这里有所作为，它可能不仅会导致延迟，而且还可能会在内存可见性边缘*发生之前发生*，这使得更改`this.amount`对该线程可见。这是一个很大的挥手，但我认为在确定特定副作用的根本原因之前，这里有更大的问题需要先解决。

# php - JQuery 的 ajax 发布请求无法正常工作

> ID：13436017
> 
> 赞同：0
> 
> 时间：2012-11-17T23:52:13.063
> 
> 标签：php, jquery, ajax, post

该页面的链接是：localhost/mysite/create-user

这是代码：

```
 <form class="form-horizontal" name = "signUp1F" id = "signUp1F">
            <input class="input-xlarge focused" name="pskil" id ="pskil" type="text" placeholder = "Doctor, Trainer, Human Resource etc.">
            <input type="hidden" name="neoid" id="neoid" value="<?php echo $neoid; ?>" />
            <span><button id = "plus" class="btn btn-success">Plus</button></span>
            <div id="skillsAdded"></div>
        </form> 
```

jQuery代码：

```
<script type="text/javascript">
    $('#plus').click( function(event){
        var pskil = $('#pskil').val();
        var neoid = $('#neoid').val();
        if( !pskil){
            alert( "Please write a skill.");
            return false;
        }

        $.ajax({
            type: 'post',
            url: "localhost/mysite/add-skill",
            data: { pskil: pskil, neoid: neoid},
            success: function( response){
                $('#skillsAdded').append( pskil + "<br>");
                return false;
            }
        });
    });
</script> 
```

目的是这样的：用户在输入中输入一个技能值，单击加号按钮，发送一个 ajax 请求以将技能添加到数据库。处理此请求的代码位于 localhost/mysite/add-skill 上。

但事情出错了。当我单击“加号”按钮时，它会转到页面 localhost/mysite/create-user?pskil=php&neoid=53。什么可能使这个方向？我已经在这个问题上工作了将近 2 个小时，但我无法处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T23:58:44.843

问题是您的按钮标签提交您的表单。这是您可以使用的更新的 JavaScript 源代码。jQuery 为事件提供了一个内置的 preventDefault() 方法。例如，这将阻止按钮提交表单。

```
<script type="text/javascript">
    $('#plus').click( function(event){
        event.preventDefault();

        var pskil = $('#pskil').val();
        var neoid = $('#neoid').val();
        if( !pskil){
            alert( "Please write a skill.");
            return false;
        }

        $.ajax({
            type: 'post',
            url: "localhost/mysite/add-skill",
            data: { pskil: pskil, neoid: neoid},
            success: function( response){
                $('#skillsAdded').append( pskil + "<br>");
                return false;
            }
        });
    });
</script> 
```

试用：http: [//jsfiddle.net/3A7Mg/1/](http://jsfiddle.net/3A7Mg/1/)

# c# - C# 和 VBA 之间的通信

> ID：13436028
> 
> 赞同：8
> 
> 时间：2012-11-17T23:54:42.087
> 
> 标签：c#, .net, vba, interop, office-interop

应老板的要求，我创建了一组脚本，用于定期监控某些设备和进程的状态。该信息随后使用相对复杂的 VBA 模块进行处理，该模块收集所有信息、应用公式、设置范围和生成图形等。

但是有两个问题：我是一个业余程序员，所以我的 VBA 程序效率很低。这对我来说不是什么大问题（我只是在它运行的时候起床喝杯咖啡），但对于其他用户来说，这可能会很麻烦，因为那时不知道为什么要花这么长时间。我想要进度的图形表示。应用程序的配置是通过文本文件完成的。我想提供一个不错的 GUI 来设置配置。

为了实现这一点，我正在寻找一种方法让我的 C# WinForms 应用程序与我的 VBA 应用程序进行通信。我知道如何从我的 C# 应用程序运行 VBA 例程，但我不知道如何让它们实时通信。

**以下是我特别想要实现的两件事：**

*   我已经有一个日志文件保存在 VBA 例程的末尾。相反，**我想将日志/调试消息实时发送到我的 C# 应用程序**（不仅仅是在应用程序结束时），以便消息可以显示在我的 GUI 应用程序中，因为它们是由 VBA 应用程序生成的.
*   我还希望 VBA 应用程序**向我的 GUI 应用程序发送有关实时进度的信息，以便我可以**在我的 GUI 应用程序中创建图形进度条。

我已经考虑过通过标准输出进行通信。我知道如何使用 C#/.Net 从标准输出读取数据，但我不确定如何使用 VBA 写入 StdOut 流。

我相信很多人会指出我想要达到的目标是愚蠢和过时的（或完全没有必要），但作为一个业余程序员，这对我来说似乎是一个非常具有挑战性和有趣的项目，它可以教会我一件事或两个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T02:23:45.460

创建一个 C# COM 可见类非常简单，而且（正如您在评论中所说）它很有趣。这是一个小样本。

在新的 C# 库项目中，添加：

```
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace CSharpCom
{
    [ComVisible(true)]
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    //The 3 GUIDs in this file need to be unique for your COM object.
    //Generate new ones using Tools->Create GUID in VS2010
    [Guid("18C66A75-5CA4-4555-991D-7115DB857F7A")] 
    public interface ICSharpCom
    {
        string Format(string FormatString, [Optional]object arg0, [Optional]object arg1, [Optional]object arg2, [Optional]object arg3);
        void ShowMessageBox(string SomeText);
    }

    //TODO: Change me!
    [Guid("5D338F6F-A028-41CA-9054-18752D14B1BB")] //Change this 
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    interface ICSharpComEvents
    {
        //Add event definitions here. Add [DispId(1..n)] attributes
        //before each event declaration.
    }

    [ComVisible(true)]
    [ClassInterface(ClassInterfaceType.None)]
    [ComSourceInterfaces(typeof(ICSharpComEvents))]
    //TODO: Change me!
    [Guid("C17C5EAD-AA14-464E-AD32-E9521AC17134")]
    public sealed class CSharpCom : ICSharpCom
    {
        public string Format(string FormatString, [Optional]object arg0, [Optional]object arg1, [Optional]object arg2, [Optional]object arg3)
        {
            return string.Format(FormatString, arg0, arg1, arg2, arg3);   
        }

        public void ShowMessageBox(string SomeText)
        {
            MessageBox.Show(SomeText);
        }
    }
} 
```

您将需要进入您的项目属性，进入“签名”选项卡，选中复选框以签署您的程序集，并创建一个新的“强名称密钥文件”。这将有助于防止您注册的 DLL 出现版本控制问题。

编译它，并`regasm`在 Visual Studio 命令提示符下注册 DLL。您将使用 32 位或 64 位 regasm，具体取决于您使用的 Office 版本...您将在`C:\windows\Microsoft.NET\Framework`或`C:\windows\Microsoft.NET\Framework64`（分别为 32 位和 64 位）中找到 RegAsm：

`C:\windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe /codebase /tlb CSharpCom.dll`

这将在 Windows 中注册您的 DLL，因此现在在 VBA 编辑器中，您应该能够转到 Tools->References 并找到您的 COM 命名空间“CSharpCom”。选中该框，现在您应该能够在 VBA 中创建 COM 对象：

```
Sub TestCom()
    Dim c As CSharpCom.CSharpCom
    Set c = New CSharpCom.CSharpCom
    c.ShowMessageBox c.Format("{0} {1}!", "Hello", "World")
End Sub 
```

您可以将表单添加到您的 COM 对象，并在 VBA 调用特定方法时打开它们；您应该能够使用它来创建带有进度条的表单。不过，要考虑的一件事是 VBA 是单线程的。这意味着在您的代码运行时，其他所有内容都会被冻结，因此事情可能会变得有些棘手。

在我的脑海中，你可以在你的 COM 可见类中创建 3 个方法：一个打开表单，一个更新进度（在 VBA 调用 COM 对象上的 update() 方法后立即调用 VBA 的 DoEvents() 方法，以允许 Office 处理屏幕更新），以及关闭它。您应该在表单上调用 Dispose()；这可以在“关闭”方法中完成，但我认为如果你的 VBA 崩溃，它可能会导致内存泄漏/问题，并且你的 close 方法永远不会被调用——只是需要考虑的其他事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T00:30:13.797

您可以在 VB6 项目中使用 .NET DLL，并创建您在程序集中定义的任何对象的实例。这是通过创建类型库文件 (.tlb) 为 COM 互操作（在 VB6 中使用）注册 .NET 程序集 (.dll) 来完成的。.tlb 文件包含额外信息，以便您的 VB6 项目可以使用您的 .dll。请注意，您的 VB6 项目不会引用 .dll，而是引用相应的 .tlb 文件。您可以使用 Regasm.exe 实用程序来生成和注册类型库并注册托管程序集的位置。然后只需创建一个 .NET 对象的实例，无论它是 WinForm 还是其他一些很酷的类。=）。

```
Dim MyDotNetObject As MyDotNetClass

Set MyDotNetObject = New MyDotNetClass
MyDotNetObject.SomeMethod(value1, value2)

''end of execution
Set MyDotNetObject = Nothing 
```

请参阅： http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;817248](http://support.microsoft.com/default.aspx?scid=kb;en-us;817248)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T01:35:37.070

我相信此链接中的代码大致可以满足您的要求：

*   C# 代码创建一个 COM 对象（在示例中它是 IE，但根据您的描述，您已经设法创建了 VBA 例程的实例）

*   它将 .Net 事件处理程序（使用 +=）附加到 COM 对象引发的事件（当标题更改时）

*   它定义了示例事件处理代码

[http://msdn.microsoft.com/en-us/library/66ahbe6y.aspx](http://msdn.microsoft.com/en-us/library/66ahbe6y.aspx)

我不自称理解这段代码，我的目标是展示这个解决方案的复杂性！你真的应该在一个解决方案中构建它。一个完整的 VBA 解决方案将更快地开发（您只需要学习很容易的 VBA 形式），但是旧技术。一个完整的 C# 解决方案的开发速度会较慢，但随后您将开始学习 C#。

性能实际上是一个问题。如果它现在效率低下，当您有 5 倍的记录要处理时会发生什么？您应该在获得那么多记录*之前*解决性能问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-05T06:24:02.450

这个问题的其他答案涉及调用外部方法的 VBA 宏。但是有一个更简单的方法。您的 GUI 应用程序可以附加到工作簿`SheetSelectionChange`事件或工作表`Change`事件，这些事件将在任何值更改时触发。

因为您可能不想减慢所有速度，所以我建议添加一个额外的工作表，添加命名范围来描述每个值的含义，然后挂钩工作表更改事件以在这些值更改时拦截并更新您的 GUI。

# c# - 英国邮政编码的正则表达式

> ID：13436030
> 
> 赞同：1
> 
> 时间：2012-11-17T23:55:15.280
> 
> 标签：c#, .net, regex

我有一个邮政编码列表，应该从我的运输方式中排除。

假设我必须排除[Scilly Isles](http://en.wikipedia.org/wiki/TR_postcode_area)、[Isle of Man](http://en.wikipedia.org/wiki/IM_postcode_area)和其他几个。

对于上述 2 个区域，有效的邮政编码为 IM1-IM9、IM86、IM87、IM89。如果是 IM25 或 IM85 则无效。

我已经写了以下表达式。但即使是 IM25 或 IM 85，它也会返回。

```
var regex = new Regex("(PO3[0-9]|PO4[0-1]|GY[1-9]|JE[1-5]|IM[1-9]|TR[1-9])"); 
```

如果我正在传递 IM85，那么对于我的表达式，它应该返回 false。对于 IM1-IM9、、IM86、IM87、IM89，它应该返回 true。

与 TR 邮政编码相同。TR1-TR27 是有效的邮政编码。如果我给 TR28，它应该返回 false。

我正在使用“|” 分离多个模式。这是在 1 个表达式中包含多个模式的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:10:37.540

你能指望什么？什么应该匹配，什么不匹配？请举例说明您要测试的字符串。

如果您将您的模式与“IM25”匹配，它将匹配，因为您确实允许`IM[1-9]`在您的模式中，因此您将获得有效的部分匹配。如果您想避免这种情况（我不确定您想要实现什么）并且希望在第一个字母之后只允许一个数字，请使用“单词边界”`\b`并准确指定您想要允许的内容，如下所示：

```
(PO3[0-9]|PO4[0-1]|GY[1-9]|JE[1-5]|IM([1-9]|8[6-9])|TR([1-9]|2[0-7]))\b 
```

[在 Regexr 上](http://regexr.com?32rbj)查看

当之前有 8 时，这将允许“IM”部分也将 6-9 作为第二个数字。

**更新**

目前尚不清楚您的任务的上下文是什么。我假设你有一个有效的邮政编码列表，可能会更好，你提取邮政编码或只提取它的第一部分（因为你最终可以使用正则表达式）并检查它是否在列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:53:38.637

实际验证在维基百科网站上......谷歌有答案;）[http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom#Validation](http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom#Validation)

```
(GIR 0AA)|(((A[BL]|B[ABDFHLNRSTX]?|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]?|F[KY]|G[LUY]?|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]?|M[EKL]?|N[EGNPRW]?|O[LX]|P[AEHLOR]|R[GHM]|S[AEGKLMNOPRSTY]?|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)[1-9]?[0-9]|((E|N|NW|SE|SW|W)1|EC[1-4]|WC[12])[A-HJKMNPR-Y]|(SW|W)([2-9]|[1-9][0-9])|EC[1-9][0-9]) [0-9][ABD-HJLNP-UW-Z]{2}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T00:46:17.190

我仍然认为你需要更多的澄清。作为一个正则表达式的大佬，我想指出应该尝试将多位数范围放入代码端，而不是正则表达式端，只是为了你的理智。但我个人喜欢以这种方式玩 Regex。正则表达式一次读取一个字符，因此它只能识别零到九。不是十，不是二十八。如果您想允许以下操作：

28 至 347

然后它变得相当复杂。用文字来表达，你想允许：

```
    如果是两位数，则允许第一个数字为 2-9，并且：
      如果第一个数字是二，那么第二个数字允许 8/9，
      否则，如果第一个数字是 3-9，则允许第二个数字为 0-9
    Elseif 三位数字，第一个数字允许 1-3，并且：
      如果第一个数字是三，则允许第二个数字为 0-4，并且：
        如果第二个数字是四，则允许第三个数字为 0-7，
        否则，如果第二个数字是 0-3，则允许第三个数字为 0-9。
      否则，如果第一个数字是 1/2，则第二个和第三个数字都允许 0-9。

```

然后，您可以像这样编写适当的正则表达式，它搜索围绕 2 对或 3 对的单词边界或非数字。通过这种类型的问题解决，您应该能够找出您的正则表达式问题。否则，请让我们更多地了解您想要匹配和不匹配的内容：

```
(\b|\D)((2[89]|[3-9][0-9])(\b|\D)|(3(4[0-7]|[0-3][0-9])|[12][0-9][0-9])(\b|\D)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:43:38.173

我改变了我的方法。

我没有使用变得越来越复杂的正则表达式，而是保存了英国邮政编码的所有排除外向代码。

如果任何邮政编码包含特定的向外代码，则从列表中排除该邮政编码。向外代码采用这种格式

```
XX-YYY
XXX-YYY
XXXX-YYY 
```

在上述所有格式中，X 表示英国邮政编码的外向代码。

# jquery - 使用 PrettyPhoto 启动可链接到加载到同一模式窗口中的其他内联内容的内联内容？

> ID：13436031
> 
> 赞同：1
> 
> 时间：2012-11-17T23:55:25.097
> 
> 标签：jquery, html, modal-dialog, prettyphoto

是否可以使用具有其他内联内容链接的 PrettyPhoto 将内联内容启动到模态窗口中，并将其加载到同一个模态窗口而不关闭它？几乎就像模态窗口中的几页微型网站......任何帮助将不胜感激！

这是HTML。PrettyPhoto 在网站上运行得很好，所以我没有包含 javascript。

```
<a rel="prettyPhoto" href="#inline-1" title="Inline 1">INLINE-1</a>
<a rel="prettyPhoto" href="#inline-2" title="Inline 2">INLINE-2</a>

<!-- MODAL: INLINE-1 -->
<div id="#inline-1" style="display:none;">
    <p>Inline 1 Content</p>
    <p><a rel="prettyPhoto" href="#inline-2">Link from Inline 1 to Inline 2</a></p>
</div>
<!-- END MODAL: INLINE-1 -->

<!-- MODAL: INLINE-2 -->
<div id="inline-2" style="display:none;">
    <p>Inline 2 Content</p>
    <p><a  rel="prettyPhoto" href="#inline-1">Link from Inline 2 to Inline 1</a></p>
</div>
<!-- END MODAL: INLINE-2 --> 
```

# python - K-Means plus 实施

> ID：13436032
> 
> 赞同：0
> 
> 时间：2012-11-17T23:55:27.250
> 
> 标签：python, colors, cluster-computing, k-means

我的分数是获得图像中最常见的颜色，所以我实现了一个 k-means 算法。该算法运行良好，但结果不是我等待的结果。所以现在我正在尝试做一些改进，我首先想到的是实现 k-means++，这样我就为初始集群中心获得了更好的位置。

首先我选择一个随机点，但我如何选择其他点。我的意思是我如何定义它们之间的最小距离。

对此有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:29:51.927

您可以使用矢量量化。您可以列出 x+1 和 y+1 方向上的每个像素和每个相邻像素，然后选择差异并沿对角线绘制。然后您可以计算 voronoi 图并获得平均颜色并计算特征向量。使用简单的基于网格的平均颜色会更有效。

# java - 避免多层循环嵌套

> ID：13436033
> 
> 赞同：0
> 
> 时间：2012-11-17T23:55:26.833
> 
> 标签：java

我有一个像这样的对象图：

```
root
    : childs (array)
        : childs (array) 
```

我正在构建一个 JSON 响应，所以我需要遍历每个集合，创建如下代码：

```
// code for root

// loop through direct root childs
for (Child child : childs) {

    // Loop through the childs of the object in current context.
    for (AnotherChild anotherChild : moreChilds) {

    }
} 
```

你如何避免这样的代码？最终将是一个箭头。我本可以为每个级别的 for 循环创建自己的方法，但这是一个好方法吗？还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:14:20.577

如果我们正在讨论这个特定问题（构建 JSON 响应），您可以使用某种序列化程序，如[jackson](http://jackson.codehaus.org/) 或编写自定义序列化程序。关于这个主题有一个相关的问题[https://stackoverflow.com/questions/338586/a-better-java-json-library](https://stackoverflow.com/questions/338586/a-better-java-json-library)

另一方面，对于其他一些用途，您可以使用更实用的方法，例如[Guava](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained#Functions)或[Lambdaj](http://code.google.com/p/lambdaj/)。

但是当涉及到大的 O 复杂性时，这些并没有太大的帮助，所以如果可能的话，你可能想尝试不同的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:00:10.017

那是一个递归结构，那么你应该使用递归来处理嵌套。应该进行深度首次访问。

**编辑**接口 JSON 你真的会遵循@Mite Mitreski 的建议，以获得递归访问伪代码示例：

```
void visit(Child tree) {
  json_write_class(tree);
  for (Attribute a : tree.attributes) {
    json_write_attr(a);
  if (tree.children != null) {
    json_push_indent();
    for (Child child : tree.children) {
      visit(child);
    }
    json_pop_indent();
  }
} 
```

如果您需要更多控制，您可以在该树的节点上编写某种“语义操作”来建立属性，并实现访问者模式以输出数据（比第一个替代方案更详细）。

经常有助于使用语法和语法树的类比，这些是我们（作为程序员）习惯的最明显的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T23:59:32.747

我认为您在那里有一个令人讨厌的设计问题，因为执行所有这些循环的类知道很多其他类（因此违反了[Demeter 法则](http://en.wikipedia.org/wiki/Law_Of_Demeter)）。

我尝试使用的一种方法（我从一些非常有经验的开发人员那里学到的）是将集合（或数组）包装在他们自己的类中；然后创建迭代执行一项操作的数组/集合的方法。在这种情况下，它可能正在调用另一个包装集合的类中的另一个方法。

这样，每个类对其他类做什么（或子对象的内部结构）知之甚少。

* * *

### 编辑

这是一个例子。想象一下，您在类似于亚马逊的网站上有一个帐户。在该帐户中，您关联了几张信用卡。

所以，而不是拥有

```
class Account {
    List<CreditCard> creditCards;

    public CreditCard getPrimaryCard() {
        //complex code to find the primary credit card
    }
    //lots of other code related to the account and credit cards
} 
```

你可以做

```
class Account {
    CreditCards creditCards;

    public CreditCard getPrimaryCard() {
        creditCards.getPrimaryCard()
    }
    //lots of other code related to the account
}

class CreditCards {
    List<CreditCard> creditCards;

    public CreditCard getPrimaryCard() {
        //complex code to find the primary credit card
    }
    public void addCard(CreditCard creditCard) {
        //complex logic to validate that the card is not duplicated.
    }
    //lots of other code related to credit cards
} 
```

这样，Account 就不需要知道信用卡是如何存储在内存中的（应该是列表？还是集合？还是从远程 Web 服务获取？）

请记住，这是一个简单的例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T00:25:24.670

您可以提供所有感兴趣的类都应该实现的接口。该接口应提供将当前对象转换为 JSON 的方法。参见示例：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class JsonProgram {

    public static void main(String[] args) {
        Root root = new Root(Arrays.asList(new Child(Arrays.asList(
                new AnotherChild(1), new AnotherChild(2)))));
        System.out.println(root.toJSON());
    }

}

interface JsonState {
    String toJSON();
}

class Root implements JsonState {

    private List<Child> childs = new ArrayList<Child>();

    public Root(List<Child> childs) {
        this.childs = childs;
    }

    @Override
    public String toJSON() {
        StringBuilder builder = new StringBuilder();
        builder.append("{").append("\"childs\"").append(":[");
        int index = 0;
        for (Child child : childs) {
            builder.append(child.toJSON());
            if (index < childs.size() - 1) {
                builder.append(",");
            }
            index++;
        }
        builder.append("]\"}");
        return builder.toString();
    }
}

class Child implements JsonState {

    private List<AnotherChild> anotherChilds = new ArrayList<AnotherChild>();

    public Child(List<AnotherChild> anotherChilds) {
        this.anotherChilds = anotherChilds;
    }

    @Override
    public String toJSON() {
        StringBuilder builder = new StringBuilder();
        builder.append("{").append("\"anotherChilds\"").append(":[");
        int index = 0;
        for (AnotherChild child : anotherChilds) {
            builder.append(child.toJSON());
            if (index < anotherChilds.size() - 1) {
                builder.append(",");
            }
            index++;
        }
        builder.append("]}");
        return builder.toString();
    }
}

class AnotherChild implements JsonState {

    private int value;

    public AnotherChild(int value) {
        this.value = value;
    }

    @Override
    public String toJSON() {
        StringBuilder builder = new StringBuilder();
        builder.append("{").append("\"value\"").append(":\"").append(value)
                .append("\"}");
        return builder.toString();
    }
} 
```

输出：

```
{
   "childs":[
      {
         "anotherChilds":[
            {
               "value":"1"
            },
            {
               "value":"2"
            }
         ]
      }
   ]
} 
```

但这不是一个好的解决方案。而不是实现您自己的解决方案，您应该使用一些可以为您完成的库。我向您推荐[google-gson](http://code.google.com/p/google-gson/)。对我来说是最好的。

**编辑 - GSON 示例**

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class JsonProgram {

    public static void main(String[] args) {
        Root root = new Root(Arrays.asList(new Child(Arrays.asList(
                new AnotherChild(1), new AnotherChild(2)))));

        Gson gson = new GsonBuilder().serializeNulls().create();
        System.out.println(gson.toJson(root));
    }
}

class Root {

    private List<Child> childs = new ArrayList<Child>();

    public Root(List<Child> childs) {
        this.childs = childs;
    }

    @Override
    public String toString() {
        return Arrays.toString(childs.toArray());
    }
}

class Child {

    private List<AnotherChild> anotherChilds = new ArrayList<AnotherChild>();

    public Child(List<AnotherChild> anotherChilds) {
        this.anotherChilds = anotherChilds;
    }

    @Override
    public String toString() {
        return Arrays.toString(anotherChilds.toArray());
    }
}

class AnotherChild {

    private int value;

    public AnotherChild(int value) {
        this.value = value;
    }

    @Override
    public String toString() {
        return Integer.toString(value);
    }
} 
```

上面的示例创建相同的输出。对我来说，这是一个更优雅的解决方案。

# javascript - 如何在 JavaScript 中更新反向引用内联？

> ID：13436035
> 
> 赞同：0
> 
> 时间：2012-11-17T23:55:38.330
> 
> 标签：javascript, regex, grouping, backreference, inline-code

给定以下代码：

```
alpha = ('"foo"="bar"').replace(/.*foo...([^"]*).*/, RegExp.$1)
beta = ('"bar"="baz"').replace(/.*bar...([^"]*).*/, RegExp.$1) 
```

预期的输出是：

```
alpha is "bar"
beta is "bar" 
```

实际输出为：

```
alpha is ""
beta is "bar" 
```

这导致我找到了这个解决方法：

```
var alpha = beta = "", n = "\n";

    ('"foo"="bar"').match(/.*foo...([^"]*).*/);
    alpha.toString.v1 = ('"foo"="bar"').replace(/.*foo...([^"]*).*/, RegExp.$1)

    String('"bar"="baz"').replace(/.*bar...([^"]*).*/);
    beta.toString.v2 = ('"foo"="baz"').replace(/.*foo...([^"]*).*/, RegExp.$1)

    document.body.innerText += alpha.toString.v1 + n + alpha.toString.v2;
```

如何在不需要匹配更新反向引用的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:01:56.443

你可以使用：

```
// $1 = first backref, $2 = 2nd on through $9
// (*)I'm not sure but I think "$10" gets replaced with "backref1"+"0"
alpha = subject.replace(regex, "$1 $2 ... $N"); 
```

**：经过一些测试，这取决于匹配的内容。如果 9 号之后有 backref，则返回正确的 backref。但是如果 backref 不存在，它将按上述方式执行：“backref1”+“0”*

或者：

```
alpha = subject.replace(regex, function(matchedText, backref1, backref2, ...) {
    return "replacement text";
}); 
```

如果您尝试获取属性值匹配：

```
alpha = '"foo"="bar"'.replace(/"([^"]+)"="([^"]*)"/g, function(matched, attr, value) {
    // matched = "foo"="bar"
    // attr = foo
    // value = bar
}); 
```

如果这是在浏览器中完成的，要从页面上已有的元素中获取属性，我强烈建议使用内置的 DOM 操作处理程序。

# php - GD/imagick 代码来查找图像是否聚焦良好？

> ID：13436038
> 
> 赞同：1
> 
> 时间：2012-11-17T23:55:55.747
> 
> 标签：php, focus, imagemagick, gd, imagick

我经营一个网站，上面有数千张用户提供的照片。我想要一个脚本来帮助我从好照片中剔除糟糕的照片。显然这不是 100% 可能的，但应该可以确定图像是否没有可辨别的聚焦区域？我认为？

我做了一些谷歌搜索，在这个主题上找不到太多。

我编写了一个非常简单的脚本，它遍历像素，并对相邻像素之间的亮度差异求和。这为清晰的对比度图像提供了高值，而为模糊/失焦图像提供了低值。但是，它远非理想，好像框架中有一个完美聚焦的小主体，以及一个漂亮的散景背景，它会给出一个低价值。

所以我想我想要的是一个脚本，它可以确定图像*的一部分*是否聚焦良好，如果没有，然后提醒我？

有什么好主意吗？我在浪费时间吗？

我也会对任何可以确定其他类型的“坏”照片的代码感兴趣——太暗、太亮、太平等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T23:59:54.860

太暗和太亮都很容易——在遍历每个像素时计算颜色平均值。

对于您的焦点问题，我认为您会遇到很多问题。我强烈建议您查找内核卷积，因为我有一种下沉的感觉，您会需要它。这使您可以根据邻居对像素执行更复杂的操作——这也是大多数 Photoshop 滤镜的完成方式！

一旦你有了数学背景，我要做的就是将你的图像转换为代表亮度的唯一值数组（而不是 RGB）。从那里，使用边缘查找器内核（Sobel 算子应该可以解决问题）并找到边缘。一旦完成，再次迭代，映射没有边缘的位，并从中计算没有边缘的最大正方形区域。它可能是 CPU 密集度最低的解决方案，尽管不是最深奥的。

# html - 缩短我的 Html 助手 CSS 样式

> ID：13436047
> 
> 赞同：2
> 
> 时间：2012-11-17T23:56:54.697
> 
> 标签：html, css, helpers

我正在创建我的第一个 MVC Web 应用程序（并将我的第一个问题发布到这个论坛，阅读了数百篇文章）。我的问题是如何在没有如此冗长的代码（下图）的情况下创建表单（图片位于[http://www.flickr.com/photos/82728157@N04/8194924118/in/photostream/lightbox/](http://www.flickr.com/photos/82728157@N04/8194924118/in/photostream/lightbox/)）。由于 MVC，模型和控制器非常简洁，但是，我认为我并不真正了解如何在视图中利用 css 和 div。我的格式要求是：1）标签和字段在同一行 2）每个字段下方的验证消息不会增加字段之间的间距，如果它显示它的消息 3）标签的最后一个字母和输入边缘之间的距离盒子是恒定的。

```
<div style="width: 315px; height: 300px; margin: auto auto; text-align:center">
@using (Html.BeginForm()) { 
    <div>
        <fieldset>
          <div class="logon-label" style="float:left; width: 110px; margin: 10px 0px 0px 0px">
                    @Html.LabelFor(m => m.ClientId)
          </div>
          <div style="float:left; width: 110px; margin: 10px 0px 0px 0px">
                    @Html.TextBoxFor(m => m.ClientId, new { @class = "logon-field" })
         </div>
          <div style="clear:both; height:15px">
                    @Html.ValidationMessageFor(m => m.ClientId,null, new {@class="logon-validation"})
          </div>
          <div style="clear:both"></div>

          <div class="logon-label" style="float:left; width: 110px; margin: 10px 0px 0px 0px">
                    @Html.LabelFor(m => m.UserName)
          </div>
          <div style="float:left; width: 110px; margin: 10px 0px 0px 0px">
                    @Html.TextBoxFor(m => m.UserName, new { @class = "logon-field" })
         </div>
          <div style="clear:both; height:15px">
                    @Html.ValidationMessageFor(m => m.UserName,null, new {@class="logon-validation"})
          </div>
          <div style="clear:both"></div>
          <div class="logon-label" style="float:left; width: 110px; margin: 10px 0px 0px 0px">
                    @Html.LabelFor(m => m.Password)
          </div>
          <div style="float:left; width: 110px; margin: 10px 0px 0px 0px">
                    @Html.TextBoxFor(m => m.Password, new { @class = "logon-field" })
         </div>
          <div style="clear:both; height:15px">
                    @Html.ValidationMessageFor(m => m.Password,null, new {@class="logon-validation"})
          </div>
          <div style="clear:both"></div>

         <p>
             <input type="submit" style="width: 150px; font-size:large" value="Login"  />
         </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:44:35.570

看起来您正在使用某些应用程序自动生成 HTML。如果你自己写，对你来说会容易得多。

在这种情况下，我更喜欢使用表格，但 div 块也没有错。无论如何，我认为你的代码是不必要的复杂。

只是 CSS 工作原理的一个示例 -`style="..."`在您拥有的任何地方删除属性`class="logon-label"`并复制`<style>...</style>`下面的代码，它应该以完全相同的方式呈现。另一个例子[在这里](http://jsbin.com/akuwil/1/edit)。

```
<style>
.logon-label {
  float:left; 
  width: 110px; 
  margin: 10px 0px 0px 0px;
}
</style>
...
<div class="logon-label">
  @Html.LabelFor(m => m.ClientId)
</div>
... 
```

更多关于 CSS[点击这里](http://w3schools.com/css/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:06:37.927

将内联的 CSS 定义与`HTML`,`JS`等混合起来并不是一个好方法和简单的方法。我建议您阅读一些现有的`CSS frameworks`. 我个人比较喜欢`Twitter Bootstrap CSS Framework`。它易于理解和使用。

引导链接：[http:///twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/ "这里")。

示例（带有 的简单形式`Twitter Bootstrap CSS Framework`）[在这里](http://www.w3resource.com/twitter-bootstrap/example-horizontal-form-with-twitter-bootstrap.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-01T04:10:25.663

```
<style>
  .intro {
    background-color: yellow;
}
</style>
```

```
<html>
   <head>
     <body>
       <div class="intro">
       <form name="frm" action="" method="post">
         Name:<input type="text" name="name"><br>
         password:<input type="password" name="password"><br>
         <input type="submit" name="btn" value="ok"><br>
        </form>
         </div>
       </body>
     </head>
  </html>
```

##

# php - 不可见的验证码不起作用，很可能是错误的 PHP？

> ID：13436049
> 
> 赞同：0
> 
> 时间：2012-11-17T23:57:34.047
> 
> 标签：php, forms, captcha

我正在尝试将一个不可见的验证码合并到我的联系表格中，但是我不确定它是否有效。

我的代码如下...

HTML

```
<span class="test-field"><label for="test">Please leave blank</label>
  <input type="text" name="test" id="test"/></span> 
```

CSS

```
.test-field {Display: none} 
```

PHP

```
 <?php
if($_POST["test"]!=""){
    header("Location: {$_SERVER[HTTP_REFERER]}");exit;
}
// Get Data 
$f_name = strip_tags($_POST['f_name']);
$f_email = strip_tags($_POST['f_email']);
$f_message = strip_tags($_POST['f_msg']);

// Send Message
mail( "me@website.com", "Website Contact",
"Name: $f_name\nEmail: $f_email\nMessage: $f_message\n",
"From: My Website" );

?> 
```

为了测试它，我做了一些测试，改变了......

```
f($_POST["test"]!="") 
```

...至...

```
f($_POST["test"]="") 
```

我的PHP不是很好，但我猜如果该字段为空白，这不应该发送表单，但它确实通过了。我的PHP有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:02:36.263

至于你的具体问题，没有任何意义。如果用户验证码被隐藏，它绝对没用。

验证码一词代表...

> 完全自动化的公共图灵测试来区分计算机和人类

注意它说人类......

如果他们看不到 CAPTCHA 挑战，我们如何测试人机交互？你不能。从来没有...。这是您的代码的快速模拟...我遗漏的验证码，因为它没有意义。从这里拿走...

```
<?php

if ($_POST['test'] == "") {

    header("Location: {$_SERVER['HTTP_REFERER']}");

} else {

    // Get Data
    $f_name = strip_tags($_POST['f_name']);
    $f_email = strip_tags($_POST['f_email']);
    $f_message = strip_tags($_POST['f_msg']);

}

?>

<html>
<head>
    <style type="text/css">

        #demo {

            width: 250px;
            height: 250px;
        }

        .test-field {
            display: none;
            width: 200px;
            height: 200px;

        }

        #form label {
            width: 50px;
            float: left;

        }

        #form input {
            width: 150px;
            float: right;

        }

    </style>

</head>

<body>

<div id="demo">
    <form name="form" id="form" action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
        <label for="test">Empty </label><input type="text" name="test" id="test"/><br/>
        <label for="f_name">Name</label><input type="text" name="f_name" id="f_name"/><br/>
        <label for="f_email">Email</label><input type="text" name="f_email" id="f_email"/><br/>
        <label for="f_msg">Message</label><textarea rows="15" cols="30" name="f_msg" id="f_msg"></textarea>
        <input type="submit" id="submit">

        <div class="test-field"></div>
    </form>
</div>
</body>

</html>

<?php var_dump($_POST) ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:04:08.950

尝试改变

```
if($_POST["test"]!=""){ 
```

至

```
if(isset($_POST["test"]) && $_POST["test"]){ 
```

# android - Android RatingBar setRating 不起作用

> ID：13436051
> 
> 赞同：3
> 
> 时间：2012-11-17T23:57:44.420
> 
> 标签：android, ratingbar

我正在尝试将 int 值显示为 ratingBar。最大值为 5。

这是我的 XML 文件：

```
<RatingBar
            android:id="@+id/ratBar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:isIndicator="false"
            android:numStars="5" /> 
```

但是如果我用 setRating() 设置评分，android 会吸引很多星星。我不知道有多少，因为我的屏幕太小了。

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:03:15.063

我无法理解您的问题到底是什么，但无论如何在 Android 应用程序中使用 RatingBar 还是很容易的。您需要在适当的位置定义您的 RatingBar；

```
<RatingBar
        android:id="@+id/ratingBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:isIndicator="true"
        android:max="5"
        android:numStars="3" /> 
```

在您的活动中获得对它的引用；

```
private RatingBar rb;
...
this.rb = (RatingBar) findViewById(R.id.ratingBar1); 
```

并开始设置值以填充星星；

```
this.rb.setRating(2); , this.rb.setRating((float)2.5); etc. 
```

如果您的屏幕太小而无法显示五颗星，您可以设置星星的数量，就像我在上面所做的那样。你有几个选择；

1）您可以将两个评分栏放在另一个下面，一个是 3 星，另一个是 2 星。当您的数字超过 3 时，您可以继续填写底部评分栏的 2 星。

2）如果可能，您可以设置浮点值而不是整数。这样您就可以设置 1、1.5、2、2.5、3、3.5 等，并在一点代数之后为您的区间 1-5 填充 3 颗星。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T08:30:23.470

您需要定义自己的自定义样式来实现您想要的`RatingBar`. 尝试在您的视图中创建`styles`并应用该样式。`RatingBar`

像这样：

> ```
> <?xml version="1.0" encoding="utf-8"?>
>   <resources>
>     <style name="foodRatingBar" parent="@android:style/Widget.RatingBar">
>     <item name="android:progressDrawable">@drawable/food_ratingbar_full</item>
>     <item name="android:minHeight">48dip</item>
>     <item name="android:maxHeight">48dip</item>
>   </style> 
>  </resources> 
> ```

```
 <RatingBar   android:id="@+id/my_rating_bar"
        ...
        style="@style/foodRatingBar" /> 
```

在[这里](http://kozyr.zydako.net/2010/05/23/pretty-ratingbar/)查看更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T10:37:16.450

你也可以试试这个

```
<RatingBar
    android:id="@+id/ratingBar"
    style="?android:attr/ratingBarStyleIndicator"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/artist"
    android:layout_below="@+id/artist"
    android:numStars="5"
    android:rating="2.0"
    android:stepSize="1.0" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-29T14:33:22.613

当您为评分栏设置的样式中的可绘制对象具有不同的背景、次要进度和进度的 png 大小时，就会发生这种情况。

将其更改为类似

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background"
        android:drawable="@android:color/transparent" />
    <item android:id="@android:id/secondaryProgress"
        android:drawable="@drawable/star_half" />
    <item android:id="@android:id/progress"
        android:drawable="@drawable/star_full" /> 
```

# zend-framework - Zend Framework 1.12 每个用户的登录会话长度

> ID：13436054
> 
> 赞同：0
> 
> 时间：2012-11-17T23:58:11.737
> 
> 标签：zend-framework

[我已经按照http://framework.zend.com/manual/1.12/en/zend.session.global_session_management.html](http://framework.zend.com/manual/1.12/en/zend.session.global_session_management.html)中的定义将 ZendFramework 中的会话选项设置为在我的 Bootstrap 文件中默认为一周，如下所示：

```
[zendsession]
name = name
save_path = "../zend_sessions"
use_only_cookies = on
remember_me_seconds = 604800

$cacheConfig = new Zend_Config_Ini(ROOT_DIR.'/application/configs/application.ini', 'zendsession');
Zend_Session::setOptions($cacheConfig->toArray()); 
```

它是否有效。

我想知道是否可以在登录单个用户时覆盖持续时间，目前情况如下：

```
$storage = new Zend_Auth_Storage_Session();
$storage->write($authAdapter->getResultRowObject()); 
```

关于，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:58:48.313

您可以在代码中的任何地方使用[Zend_Session::rememberMe()](http://framework.zend.com/manual/1.12/en/zend.session.global_session_management.html#zend.session.global_session_management.rememberme)，只要它在用户会话初始化之前完成。

# ruby-on-rails - 如何在 ruby on rails 的 nested_attributes 哈希中添加一个额外的属性？

> ID：13436059
> 
> 赞同：2
> 
> 时间：2012-11-17T23:58:46.153
> 
> 标签：ruby-on-rails, hash, nested-attributes

我已经使用[railscasts](http://railscasts.com/episodes/197-nested-model-form-part-2)实现了嵌套属性，并且我在应用程序中使用了设计。这是简单的结构。

我有两个模型，即 Group 和 Invite。

**组模型有**

```
accepts_nested_attributes_for :invites, :reject_if => lambda { |a| a[:email].blank? }, :allow_destroy => true 
```

它工作得很好。这是参数的哈希值。

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"uI0HmJrIE9Qh3pZW2qIJymeON/yjbFSgcH8bRx/x5Oo=", "group"=>{"name"=>"Test Group", "description"=>"", "invites_attributes"=>{"0"=>{"name"=>"Test User", "email"=>"test@example.com", "_destroy"=>"false"}}}, "commit"=>"Create Group"} 
```

现在的问题是我想将受邀者 user_id 存储在邀请表中，但我可以在邀请模型中访问 c​​urrent_user。那么如何修改哈希以将 current_user id 保存在邀请模型中。

如果我的哈希参数是：基本上事情会很容易：

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"uI0HmJrIE9Qh3pZW2qIJymeON/yjbFSgcH8bRx/x5Oo=", "group"=>{"name"=>"Test Group", "description"=>"", "invites_attributes"=>{"0"=>{"name"=>"Test User", "email"=>"test@example.com", "_destroy"=>"false", :invited_by => "1" }}}, "commit"=>"Create Group"} 
```

如何在控制器端修改哈希？还是有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:46:56.377

也许你可以尝试使用`hidden_field`.

所以，你可以写这样的东西（基于 Railscasts）：

```
# /app/views/surveys/_question_fields.html.erb
<div class="fields">
  <p>
    <%= f.hidden_field :user_id, :value => "1" %>
    <%= f.label :content, "Question" %>
    <%= link_to_remove_fields "remove", f %><br />
    <%= f.text_area :content, :rows => 3 %><br />
  </p>
  <% f.fields_for :answers do |builder| %>
    <%= render 'answer_fields', :f => builder %>
  <% end %>
  <p><%= link_to_add_fields "Add Answer", f, :answers %></p>
</div> 
```

来自 APIdock：

> 要记住的一件重要事情是，它不会隐藏在源代码中，并且可以被邪恶的用户修改，因此隐藏字段中的所有输入都应被视为不可信并像可见字段一样进行检查。

参考：

*   [http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-hidden_​​field](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-hidden_field)
*   [http://apidock.com/rails/ActionView/Helpers/FormHelper/hidden_​​field](http://apidock.com/rails/ActionView/Helpers/FormHelper/hidden_field)

# performance - Cocos2d Sprite 移动速度

> ID：13436063
> 
> 赞同：1
> 
> 时间：2012-11-17T23:59:32.497
> 
> 标签：performance, cocos2d-iphone, sprite

我有一个类在屏幕上的随机点创建一个精灵，然后这个精灵移动到屏幕的中心。

我怎样才能使它始终以相同的速度行进？

明显地

```
CCMoveTo* move = [CCMoveTo actionWithDuration:5 position: ccp(screenWidth/2, screenHeight/2)]; 
```

无论距离如何，总是意味着持续时间为 5 秒。但我希望速度保持不变，如果它移动 50 像素或 500 像素。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:07:00.643

计算从距离到中心的持续时间。

```
duration = distance / rate; 
```

假设在 5 秒内移动 50 个像素是可以的。那么你的速率是 10 像素/秒。

```
rate = 10; 
```

如果你的精灵在 (x,y) 那么距离是由勾股定理

```
dx = x - screenWidth / 2;
dy = y - screenHeight / 2;
distance = sqrt(dx * dx + dy * dy); 
```

# ruby-on-rails - 预编译资产后是否需要资产下的rails资产文件夹？

> ID：13436070
> 
> 赞同：0
> 
> 时间：2012-11-18T00:00:15.020
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, asset-pipeline, assets

为了生产目的，我在 rails 3.2 中使用以下命令编译了资产。

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

运行上述命令后，将在 public 下创建一个资产文件夹。现在我想删除非编译资产文件夹，因为它很大。但我需要回答以下问题。

*   我需要包含非编译资产的资产文件夹吗？
*   如果是，那么拥有非编译资产文件夹的目的是什么？

我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:06:47.593

您将来很可能需要对您的一项资产进行更改`app/assets`。
`app/assets`具有原始格式的原始源文件，这些是您应该更改的文件。

从理论上讲，您可以删除 app/assets 中的源文件，但是您将无法更改任何内容并使用这些更改重新编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T02:36:39.080

是的，保留它们。

其目的是，当它们从资产发布到公共时，它们通常会被缩小和组合，从而大大节省空间并有助于减少最终用户在使用网站时的下载时间。但是当您需要进行更改时，请使用资产中的原件。

在开发模式下（本地，在您的盒子上），资产版本被使用，并且在开发/调试时在跟踪中很有用，因为它们指向有问题的实际源代码行并且具有原始（通常更长且有意义）变量名称。

# python - 如何使用 Scipy 求解像“x^3/3x == 4”这样的方程？

> ID：13436071
> 
> 赞同：0
> 
> 时间：2012-11-18T00:00:14.807
> 
> 标签：python, math, numpy, scipy

或其他开源 Python 库：Numpy、Matplotlib ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:07:54.757

使用 scipy 的`fsolve`. [在此处](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fsolve.html)找到的文档。

在python中定义你的函数（必须设置为零）：

```
def func(x):
     return x**3/(3*x) - 4 
```

并通过给 python 一个初始猜测来解决：

```
from optimize import fsolve  
x0 = fsolve(func, 3.5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:00:46.017

或者简单的代数会做：

```
x^3/3x = x^2/3 = 4 
```

简化这个：

```
x^2 = 12 
```

或者：

```
x = 2*sqrt(3) 
```

你*真的*不需要 SciPy，对吗？

# junit - 单元测试不起作用

> ID：13436076
> 
> 赞同：0
> 
> 时间：2012-11-18T00:01:01.670
> 
> 标签：junit

有人可以告诉我为什么我的单元测试不起作用。我对单元测试很陌生。这是没有运行的查询，我不知道为什么？？？

```
public class ContactsServiceTest {

@Autowired
private ContactsService contactsService;

@Test
public void testGetContactsById() {
    Contacts con =  contactsService.getContactsById(59);
    assertTrue(con.getFirstName().equals("Jon"));
} 
```

}

这是我得到的错误；

```
java.lang.NullPointerException
at com.logicalideas.myapp.ContactsServiceTest.testGetContactsById(ContactsServiceTest.java:45)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:07:35.820

根据您的错误堆栈跟踪，只要第 45 行是

```
Contacts con =  contactsService.getContactsById(59); 
```

那么您尝试检索的 id 59 不包含任何信息或连接存在问题。

除非您发布有关系统的更多信息，否则很难弄清楚导致此问题的确切问题是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:04:34.437

java.lang.NullPointerException

private ContactsService contactsService = new ContactsService();

# node.js - NodeJS 实际使用 OAuth (Twitter)

> ID：13436077
> 
> 赞同：1
> 
> 时间：2012-11-18T00:01:19.050
> 
> 标签：node.js, twitter, oauth

我正在使用节点 (8.14.0) 并希望访问 Twitter REST API v1.1。到目前为止，我尝试了 node-oauth 和简单的 https，但没有一个比“使用 twitter 登录”更进一步。我不只是想验证用户的身份（也就是使用 twitter 登录），我想通过他们的访问权限对 API 执行操作。我的问题是，我还没有找到一个 node 示例来描述从用户那里检索所需的访问/请求令牌并使用它们执行 API 调用的实际过程。

所有 node-oauth 示例“假设您已经拥有访问令牌并访问任何内容”。好吧，我没有它们，也不知道如何获得它们，因为我找不到具体的示例或文档。只是引用一个引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:42:50.053

据我所知，oauth 库是用来验证或授权的。
在身份验证时，您会从平台取回 accestoken 和 refreshtoken。
您必须将此令牌保存在会话或数据库中。
之后，您可以将它与其他库结合使用。

我建议查看[护照](https://github.com/jaredhanson/passport)或[everyauth](https://github.com/bnoguchi/everyauth)以进行用户身份验证。他们都支持oauth。

另外：
一般来说，谷歌有一个关于 OAuth 的很好的文档。我认为这个模式也可以应用于其他平台。
[https://developers.google.com/accounts/docs/OAuth2?hl=en](https://developers.google.com/accounts/docs/OAuth2?hl=en)

# asp.net-mvc - 实体框架向所有查询添加 where 子句

> ID：13436080
> 
> 赞同：2
> 
> 时间：2012-11-18T00:02:13.597
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, repository

我正在使用实体框架 5 并使用存储库模式。假设我有这些实体客户、文件、图像、任务、发票、用户。

每个实体（除了客户）都有一个客户外键。当用户登录时，我将 customerid 存储在会话（aps.net mvc）中。我想要的是对所有实体采取的任何 CRUD 都仅限于用户登录的客户。例如，我无法删除属于客户 1 的任务，由来自客户 2 的用户删除。

为每种存储库方法添加 customerid 参数是实现此目的的最佳方法，还是有更好/更聪明的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:23:47.720

很难给出明确的答案，但您可以通过实现更高阶的函数使其更具可扩展性，如下所示：

```
public interface IRepository<T>
{
    public T GetBy(Expression<Func<T, bool>> query)
}

public class FileRepository : IRepository<File>
{
    public File GetBy(Expression<Func<T, bool>> query)
    {
        using(var context = new FilesContext())
        {
            return context.Files.Where(query).FirstOrDefault();
        }
    }

}

public class SomeController
{
    private IRepository<File> _repo;

    public SomeController(IRepository<File> repo)
    {
        _repo = repo;
    }

   public ActionResult Index()
   {
       var model = _repo.GetBy(f => f.CustomerId == Session.Whatever.CustomerId);

       return View(model);
   }

} 
```

这样，您可以在需要时更改搜索查询，而不是使用硬编码的客户 ID 属性。例如，如果您想通过 FileID 而不是 CustomerID 获取 File 对象，则：

```
var model = _repo.GetBy(f => f.FileId == someId); 
```

这是代码中唯一需要更改的部分。

这里有一些关于 C# 中高阶函数和函数式编程的非常好的信息：http: [//www.codeproject.com/Articles/375166/Functional-programming-in-Csharp](http://www.codeproject.com/Articles/375166/Functional-programming-in-Csharp)

**编辑：**

您可能可以使用装饰器样式模式将“在访问 DB 时始终使用客户 ID”隔离到它自己的存储库中，因此：（**大量**免责声明 - 我没有对此进行测试，但这些方面的东西应该可以工作)

```
public class SpecialFileRepo : IRepository<File>
{
    private readonly IRepository<File> _baseRepo;

    public SpecialFileRepo(IRepository<File> baseRepo)
    {
        _baseRepo = baseRepo;
    }

    public SpecialFileRepo() : this(new FileRepository())
    {

    }
    public File GetBy(Expression<Func<File, bool>> query)
    {
        var parameters = query.Parameters;
        var newParam = Expression.Parameter(typeof (File), "f");

        var additionalQuery = Expression.AndAlso(query.Body,
                                                 Expression.Equal(
                                                     Expression.PropertyOrField(newParam, "CustomerId"),
                                                     Expression.Constant(HttpContext.Current.Session["customerId"])));

        var newQuery = query.Update(additionalQuery, parameters);

        return _baseRepo.GetBy(newQuery);
    }
} 
```

然后任何与存储库通信的东西，就它而言，它只是一个基本存储库，但是这个类位于两者之间，并且总是将“customerid = sessionwhatever”表达式嫁接到最终传递给数据库的内容上。当然，任何只关心使用基本存储库的东西，仍然可以这样做。

# php - 如何从 FTP 下载文件并使用 PHP 将其流式传输到客户端

> ID：13436082
> 
> 赞同：0
> 
> 时间：2012-11-18T00:02:23.090
> 
> 标签：php, ftp

当有人通过 url: [http://domain.com/FILE_ID](http://domain.com/FILE_ID)访问我的网站时，PHP 将连接到 ftp 服务器并获取 FILE_ID，然后将其流式传输到客户端而不将其保存在本地服务器上。我不想为我的客户提供指向我在 ftp 服务器上的文件的链接，而是我想到了这一点。

有谁知道我怎么能做到这一点？

我在想我可以使用“ftp_get()”方法从 ftp 获取文件，但这需要我在本地服务器上写入（或者我错了吗？）。之后使用 PHP 标头强制下载。

基本上任何和每一条信息都是有用的。就这样我可以开始朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:06:39.987

您所追求的是 Curl 库 - 因为它可以处理 FTP。[看到这个](http://www.linuxformat.co.uk/wiki/index.php/PHP_-_The_Curl_library)，它有一个 FTP 例子。

或者，如果您的服务器具有 file_get_contents 的 URL 绑定，则可以使用

```
file_get_contents("ftp://username:password@server/path/to/file.ext"); 
```

获取 FTP 服务器上的远程文件的内容。

# uilabel - UILabel 高亮文本

> ID：13436087
> 
> 赞同：0
> 
> 时间：2012-11-18T00:02:51.910
> 
> 标签：uilabel, highlighting

任何人都可以快速帮助我吗？我已经玩了几个小时了，不明白为什么这不起作用？

我正在尝试更新选定标签中突出显示的文本（在先前定义的 UILabels 数组中引用）。

此方法由从视图界面中的 UISlider 接收的 IBAction 调用。

但是，当我从数组中检索选定的 UILabel 对象并设置其 HIGHLIGHTED 属性时，视图界面上没有相应的反应。我的印象是它应该自动重绘视图，并使用下面的代码突出显示文本。

PS：我的连接似乎都是正确的接口生成器（即，IBOutlet UILabel 已正确映射/连接，触发此方法的 UISlider 通过 IBAction 连接）。

我错过了什么吗？

```
- (IBAction) changeHighlightedLabel: (id)sender
{

// Setup
UILabel *selectedLabel = [[UILabel alloc] init];
selectedLabel.highlightedTextColor = [UIColor greenColor];

// Interpret slider value and round to integer
UISlider *temp = sender;
float unroundedTempValue = [temp value];
float roundedTempValue = roundf(unroundedTempValue);

// Select the UILabel object from the UI Label array based on slider valuer
selectedLabel = [uiLabelArray objectAtIndex:roundedTempValue];

// Highlight the selected label
selectedLabel.highlighted = YES;

} 
```

我也试过换...

```
 selectedCountryLabel = [[uiCountryLabelArray objectAtIndex:roundedTempValue] isHighlighted]; 
```

...最后一行。还是不行。

请问有什么反馈或帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:34:18.477

您首先创建一个`UILabel`并设置`highlightedTextColor`属性，然后用`UILabel`from 数组覆盖它。由于您`highlightedTextColor`这次没有设置任何内容，因此该`highlighted`属性将不适用于标签。

更改如下。

```
- (IBAction) changeHighlightedLabel: (id)sender
{

   // Interpret slider value and round to integer
   UISlider *temp = sender;
   float unroundedTempValue = [temp value];
   float roundedTempValue = roundf(unroundedTempValue);

   // Select the UILabel object from the UI Label array based on slider valuer
   selectedLabel = [uiLabelArray objectAtIndex:roundedTempValue];

   // Highlight the selected label
   selectedLabel.highlightedTextColor = [UIColor greenColor];
   selectedLabel.highlighted = YES;
} 
```

# objective-c - 基于文档的 Obj-C (Mac) 应用程序发出有关 nsTextViewObj 的错误

> ID：13436092
> 
> 赞同：0
> 
> 时间：2012-11-18T00:03:30.277
> 
> 标签：objective-c, xcode, macos, osx-lion, osx-snow-leopard

我正在使用[Julius Guzy 的](http://juliuspaintings.co.uk/cgi-bin/paint_css/animatedPaint/034-NSDocument-NSTextView.pl)示例代码来创建一个可以保存文本文件的基于文档的应用程序。我运行了他的代码，它运行良好，应用程序运行/保存文件***（全部在最新版本的 Xcode 中。虽然 Guzy 的示例代码使用 10.6 SDK 编译）***。我正在尝试从中学习并重写代码。我拥有编译应用程序所需的一切，但对于**MyDocument.m**中最奇怪的事情。我无法运行它。

```
@synthesize nsTextViewObj; 
```

Xcode 给了我这个错误，我不太明白。

> 具有分配属性的属性 'nsTextViewObj' 的现有 ivar 'nsTextViewObj' 必须是 __unsafe_unretained

**nsTextViewObj;** 假设链接到 IB 中的“文件所有者”。我一开始就是这样做的。它打败了我为什么我得到那个错误。SDK冲突可能吗？**我怎样才能解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:54:47.920

# node.js - 玉 doctype 呈现为文本

> ID：13436094
> 
> 赞同：0
> 
> 时间：2012-11-18T00:03:35.857
> 
> 标签：node.js, express, pug

我的玉文件如下：

```
!!! 5
html(lang="en")
  head
    title test page
  body
    h1 hello world 
```

但它呈现为：

```
!!! 5
<html lang="en">
  <head>
    <title>test page</title>
  </head>
  <body>
    <h1>hello world</h1>
  </body>
</html> 
```

我刚刚试过！！！以及 doctype - 都呈现为文本。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:40:51.193

检查您的文件是否在开头有[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)，如果有 - 删除它。

一些 Windows 编辑器添加它是为了区分字节序。

# javascript - 带有 _blank 的常规链接在选项卡中打开，但 JS window.open(url, "_blank"); 打开一个新窗口？

> ID：13436100
> 
> 赞同：5
> 
> 时间：2012-11-18T00:03:58.450
> 
> 标签：javascript, asp.net, response.redirect

当我使用常规链接时，`target="_blank"`我打开了一个新选项卡，但是当我使用 JS 时， `window.open(url, "_blank");`我得到了一个新窗口（我从 Response.Write() 使用它），相同的浏览器相同的设置，为什么？我需要 JS 以与链接相同的方式做出反应！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:11:57.273

尝试将链接插入页面并设置其样式，使其在视口中隐藏。然后，您将`window.open(url, "_blank");`调用. 而不是`$( 'link-selector' ).click();`. 请注意，我还没有测试过，可能某些浏览器会阻止打开新标签页。

# php - 解释语言（即 PHP）中的面向对象编程是否有效？

> ID：13436107
> 
> 赞同：7
> 
> 时间：2012-11-18T00:05:25.617
> 
> 标签：php, performance, oop, interpreted-language

我只是想知道是否值得为了速度而坚持使用非 OOP 代码。此外，在商业 Web 应用程序中，OOP 通常是使用还是避免使用？哪个是标准？

非常感谢，

埃德

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T00:07:52.700

标准是支持可读代码而不是效率，因为大多数时候“更高效的代码”运行速度快一毫秒。面向对象的编程通常比非面向对象的编程更具可读性。

另请参阅此问题：[为什么有这么多 Web 语言是解释的而不是编译的？](https://stackoverflow.com/questions/340298/why-are-so-many-web-languages-interpreted-rather-than-compiled?rq=1). 页面的大部分加载时间都花在发送和接收数据或做数据库事情上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T00:09:09.930

OOP 通常用于商业 webapps，并且正在成为标准。它的原因不是效率——它是代码的可重用性、代码的可读性、简单的文档、结构，更重要的是模块化！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T00:22:46.247

面向对象的代码是标准，但不是出于性能原因。这真的是关于可维护性。

代码速度很少对 Web 应用程序产生任何实际影响。I/O 的相关性要高得多，人们从事的大多数优化最终都是为了减少 I/O：

*   持久的数据库连接
*   数据片段缓存
*   页面缓存
*   客户端缓存头

任何重要的 CPU 密集型任务通常由编译的插件处理，并且可以被解释语言访问。一些常见的例子：

*   PDF 生成
*   图像处理（Imagik，GD）
*   密码学 (OpenSSL)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T00:11:54.280

我认为 OOP 开销对于速度性能通常可以忽略不计，并且代码将获得很多质量。

商业应用程序通常使用 OOP，如果在可用（并且稳定！）之后启动

# c# - 在 C# 中使用“for”循环用图像填充图片框编号“i”

> ID：13436109
> 
> 赞同：3
> 
> 时间：2012-11-18T00:05:44.577
> 
> 标签：c#, loops, for-loop, controls

我有六个图片框和一个`for`循环。`for`我想使用与循环内递增的“i”变量相同的数字来引用 PictureBox 。

例如，如果`for`循环中的“i”变量是 2，我想将图像分配给图片框 2。

我如何以最简单的方式做到这一点？这是一种独特的方式，也适用于其他控件（即标签、文本框）会很好。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T00:08:27.247

将对控件的引用放入数组中：

```
PictureBox[] boxes = {
  PictureBox1, PictureBox2, PictureBox3, PictureBox4, PictureBox5, PictureBox6
}; 
```

然后你可以遍历它们：

```
for (int i = 0; i < boxes.Length; i++) {
  // use boxes[i] to access each picture box
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:11:08.553

您可以使用`Tag`任何控件的属性来提供附加信息（如图像名称或索引）。例如，您可以为您的图片框提供索引。还使用 ImageList 来存储图像列表：

```
foreach(var pictureBox in Controls.OfType<PictureBox>())
{
    if (pictureBox.Tag == null) // you can skip other pictureBoxes
        continue;

    int imageIndex = (int)pictureBox.Tag;
    pictureBox.Image = imageList.Images[imageIndex];
} 
```

您也可以按标签值搜索图片框：

```
var pictureBox = Controls.OfType<PictureBox>()
                         .FirstOrDefault(pb => (int)pb.Tag == index); 
```

* * *

另一种选择 - 如果所有图片框的名称都像`pictureBox{index}`. 在这种情况下，您可以不使用标签：

```
var pictureBox = Controls
  .OfType<PictureBox>()                     
  .FirstOrDefault(pb => Int32.Parse(pb.Name.Replace("pictureBox", "")) == index); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T00:22:21.480

我用 Array of PictureBoxes 实现了这一点：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace ImageChanger
{
    public partial class Form1 : Form
    {
        PictureBox[] pictureBoxs=new PictureBox[4];

        public Form1()
        {
            InitializeComponent();

            pictureBoxs[0] = pictureBox1;
            pictureBoxs[1] = pictureBox2;
            pictureBoxs[2] = pictureBox3;
            pictureBoxs[3] = pictureBox4;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < 4; i++)
            {
                // Load Image from Resources
                pictureBoxs[i].Image = Properties.Resources.img100;

                Application.DoEvents();
                Thread.Sleep(1000);
            }
        }

    }
} 
```

# java - 如何使用 Eclipse 发现哪些类实现了某个类的方法？

> ID：13436111
> 
> 赞同：1
> 
> 时间：2012-11-18T00:06:16.803
> 
> 标签：java, eclipse

我正在使用 Eclipse 和 2 API。有什么方法可以获取有关哪些类使用类的方法的信息？例如，我`gameStarted()`在 Game 类中有方法，我想知道其他使用`gameStarted()`方法的类。我还想知道哪些类扩展了一个类，哪些类创建了一个类的实例。

我想我需要知道这一点才能了解 API 的一部分是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:10:46.277

[Call Hierarchy](http://help.eclipse.org/galileo/topic/org.eclipse.jdt.doc.user/reference/views/ref-call-hierarchy.htm)将告诉您什么调用了方法或构造函数。

[Type Hierarchy](http://help.eclipse.org/galileo/topic/org.eclipse.jdt.doc.user/reference/views/ref-call-hierarchy.htm)会告诉你什么扩展了一个类/一个类扩展了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:08:47.377

选择源代码中的方法名称，然后从上下文菜单中选择

*   `Call hierarchy`探索所有来电者及其来电者，
*   `Declarations`对于定义此方法的所有地方。

# sql - 如何在没有子查询的情况下获得价值（在 SQL-Server 上）？

> ID：13436122
> 
> 赞同：-1
> 
> 时间：2012-11-18T00:07:34.587
> 
> 标签：sql, sql-server, sql-server-2000

我在 SQL Server 上有下表：

```
ID   Num
 1     A
 2     B
 2     B
 3     C
 3     C
 4     C 
```

（`Num`是一个数字列 - A、B 和 C 代表数值，就本问题而言）

如何在`A+B+C+C`不使用子查询和 CTE 的情况下获取值？

**A** - 1，**B** - 2，**C** - 3，**C** - 4。

答案似乎是`sum(distinct Num)`，但不同的是 ID 字段！

## 演示表：

```
create table test (ID int, Num int);
insert into test values (1, 10);
insert into test values (2, 100);
insert into test values (2, 100);
insert into test values (3, 1000);
insert into test values (3, 1000);
insert into test values (4, 1000); 
```

正确答案是 10+100+1000+1000 = 2110。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:22:56.643

随机猜测，使用 CTE 避免无意义的子查询限制：

```
With X as (Select Distinct Id, No From Test)

Select
  Sum(No) 
From X 
```

或使用派生表（适用于 SQL 2000）：

```
Select
  Sum(No)
From (
  Select Distinct
    Id,
    No
  From
    Test
) a; 
```

[http://sqlfiddle.com/#!3/77a6e/6](http://sqlfiddle.com/#!3/77a6e/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T16:14:07.130

解决方案：

```
select cast(sum(distinct Num + cast(0.00001 as number(38,19))/ID) as number(18,2)) 
```

# math - 检查点积是否接近 0 时，epsilon 应该有多大？

> ID：13436125
> 
> 赞同：4
> 
> 时间：2012-11-18T00:08:03.383
> 
> 标签：math, game-physics, raytracing

检查点积是否接近 0 时，epsilon 应该有多大？

我正在做光线追踪项目，我需要检查点积是否为0。但这可能永远不会发生，所以如果它的值在一个小区域[-eps，+eps]，我想把它当作0，但我不确定 eps 应该有多大？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:09:03.293

没有确定的答案。我使用两种方法。

如果您只关心浮点错误，那么您可以使用一个非常小的值，与编译器可以处理的最小浮点数相当。在 c/c++ 中，您可以使用 中提供的定义`float.h`，例如`DBL_MIN`检查这些数字。我会使用数字的一个小倍数，例如，`10\. * DBL_MIN`作为`eps`.

如果问题不是浮点数学舍入误差，那么我使用与最小向量的模数相比较小的值（比如 1%）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:38:11.770

由于您将其描述为光线追踪项目的一部分，因此您所需的准确性可能取决于场景的“世界坐标”，或者甚至可能取决于它们被转换到的屏幕坐标。这些中的任何一个都会为您的计算中的绝对误差提供一个可接受的目标。

可能会从那个回溯到您正在进行的中间计算所需的精度，例如形成一个“理论上”应该为零的内积。例如，您可能试图找到两个光滑物体之间的最短路径（反射光），而内积（垂直度）的消失给出了一个点的位置。

在这种情况下，内积可能是您寻找的未知数（点的位置）的二次方。未知数可能形成“双根”（多重性 2 的零），使得该根的位置对内积为零的计算特别敏感。

对于这种情况，您可能希望根据位置准确性的需要，在内积中获得大约两倍的“零”位数。本质上，内积随着位置在双根附近的变化非常缓慢。

但是您的应用程序可能不那么敏感；分析所涉及的算法对于给你一个很好的答案是必要的。作为一般规则，我以双精度进行内积，以获得可能与单精度一样可靠的答案，但如果要实时完成光线追踪，这可能成本太高。

# ios - AVAudioPlayer 不能使用 .pls 广播文件？

> ID：13436126
> 
> 赞同：2
> 
> 时间：2012-11-18T00:08:15.130
> 
> 标签：ios, avaudioplayer, avplayer, shoutcast

再会，

我正在开发一个 Radio APP，它可以获取广播流 .pls 文件并在 AVFoundation 框架的帮助下播放它。

使用 AVPlayer 可以轻松完成这项工作，但问题是我无法编写代码或找到任何好的解决方案来让它与音量滑块一起使用，AVPlayer 类没有音量属性。

所以现在我试图让它与具有音量属性的 AVAudioPlayer 一起工作，这是我的代码：

```
NSString *resourcePatch = @"http://vibesradio.org:8002/listen.pls";
NSData *_objectData = [NSData dataWithContentsOfURL:[NSURL URLWithString:resourcePatch]];
NSError *error;

vPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];
vPlayer.numberOfLoops = 0;
vPlayer.volume = 1.0f;
if (vPlayer == nil)
    NSLog(@"%@", [error description]);
else
    [vPlayer play]; 
```

此代码适用于我服务器上上传的 .mp3 文件，但不适用于由喊声生成的 .pls 文件，

有什么方法可以修复 AVAudioPlayer 以使用 .pls 文件，或者将音量滑块实现到 AVPlayer ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:28:44.347

使用`AVAudioPlayer`来自网络的流不是一个好主意。查看 Apple 在[AVAudioPlayer](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)上的文档：

> AVAudioPlayer 类的一个实例，称为音频播放器，提供**文件或内存中音频数据的**播放。
> 
> Apple 建议您将此类用于音频播放**，除非**您正在播放从网络流中捕获的音频或需要非常低的 I/O 延迟。

要更改`AVPlayer's`音量，请检查此问题：[调整正在播放的 AVPlayer 的音量](https://stackoverflow.com/questions/3268949/adjusting-the-volume-of-a-playing-avplayer)

# c# - 在 c# 中构建一个整数数组，每个调用 c++ 或在 c++ 中构建并传递给 c#？

> ID：13436130
> 
> 赞同：0
> 
> 时间：2012-11-18T00:08:54.927
> 
> 标签：c#, c++, visual-c++, marshalling, rdrand

我用 C++ 编写了一个函数，让我通过一个内在函数利用新的英特尔 RdRand 数字随机数生成器。

```
__declspec(dllexport) int __stdcall GetRdRand32(PUINT32 pValue)
{
    return _rdrand32_step(pValue);
} 
```

我已经将它包装起来，以便我可以通过 PInvoke 在 C# 中使用它，它工作正常，如下所示：

```
[DllImport("CppDynamicLinkLibrary.dll", CallingConvention = CallingConvention.StdCall)]
public static extern int GetRdRand32(out UInt32 str); 
```

我的用例通常可能涉及请求多个随机数，尽管一次可能只有数百个（每个请求者）。我的问题是，无论如何我都在使用 C++，将另一个可以返回随机数的动态数组（或向量）的函数放在一起是否有意义，即这是否会比仅多次调用 C++ DLL 大大提高性能? 性能是一个问题，因为这将在一个服务器应用程序上，该应用程序可能会在相似的时间向许多客户端发送约 200 个随机数

如果值得去做，我将如何去做？我正在考虑以下内容，尽管我的猜测是找到一种将向量导入 C# 的方法很容易成为性能问题？

```
__declspec(dllexport) void __stdcall vGetRdRand32(std::vector<UINT32> &pArray)
{
    for (std::vector<UINT32>::iterator It = pArray.begin(); It != pArray.end(); It++ )
        _rdrand32_step(&(*It));
} 
```

最后，Marshal.Copy 会比后一种方法更好吗，如果可以的话，谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:50:19.110

这取决于你需要走多快。为了获得最快的 rdrand 性能，请使用 64 位 rdrands 并使用多个线程进行拉取。2 线程拉动速度是单线程拉动速度的 2 倍，即使在同一核心上的 2 个超线程上也是如此。

因此，如果您将所有内核上的所有线程设置为 64 位并行拉动，您应该能够接近 800MBytes/s。

这可能与直觉相反，但它源于导致此性能特征的片上总线上的并行性。

循环中的单个线程在 Ivy Bridge 上可能会获得 70MBytes/s。

因此，对于 200 个随机数，调用开销将占主导地位。但是对于几兆字节，如果您希望它尽可能快，则生成线程是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:52:28.553

当然，从单个调用中获取 200 个随机数将比从 200 个不同调用中获取 200 个随机数更快。它甚至可能快很多倍。但很可能你说的是毫秒的差异。所以可能不值得去做。几毫秒的差异会对应用程序的整体性能产生显着影响吗？

如果您决定这样做，您可能不想弄乱`vector`，而是想弄乱`UINT32[]`. 在 C# 和 C++ 之间编组 a`vector`充其量是困难的。出于所有实际目的，不可能。

有关如何编组数组的示例，请参阅编组[不同类型的数组。](http://msdn.microsoft.com/en-us/library/hk9wyw21.aspx)

您可能希望在 C# 中分配数组并将其与大小一起传递给 C++ 函数。这样，您不必担心释放内存。如果您让 C++ 代码分配数组并返回它，那么 C# 代码将不得不调用 C++ 函数来释放内存。

# c# - C# Foreach 循环问题

> ID：13436132
> 
> 赞同：3
> 
> 时间：2012-11-18T00:09:10.337
> 
> 标签：c#

我只是在制作这个程序来试验列表等，我很好奇为什么在 foreach 循环中对象总是显示为“Minecraft”Wish 对象。是因为它是最后一个创建的 Wish 对象吗？我该如何解决它，所以所有 3 个已声明的 Wish 对象都会显示出来？谢谢！

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Wish iPod = new Wish("iPod", "Various", 299.00);
            Wish Phone = new Wish("New Phone", "Various", 00.00);
            Wish Minecraft = new Wish("Minecraft Account", "www.minecraft.net", 30.00);

            List<Wish> Wishlist = new List<Wish>();
            Wishlist.Add(Phone);
            Wishlist.Add(iPod);
            Wishlist.Add(Minecraft);
            Console.WriteLine("Toby's Wishlist");
            Console.WriteLine("If cost is 00.00, the Wish's cost varies.");
            Console.WriteLine("              ");
            foreach (Wish wish in Wishlist)
            {
                Console.WriteLine("---Wish---");
                Console.WriteLine("Name: {0}", wish.getName());
                Console.WriteLine("Store: {0}", wish.getStore());
                Console.WriteLine("Cost: ${0}", wish.getCost().ToString());
                Console.WriteLine("----------");
                Console.WriteLine("           ");
            }
            Console.ReadLine();

        }
    }
    public class Wish
    {
        static string Name, Store;
        static double ApproxCost;
        public Wish(string name, string store, double approxCost)
        {
            Name = name;
            Store = store;
            ApproxCost = approxCost;
        }

        public string getName()
        {
            return Name;
        }
        public string getStore()
        {
            return Store;
        }
        public double getCost()
        {
            return ApproxCost;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T00:13:23.337

`static`从`Wish`成员声明中删除

`static`意味着数据将在所有实例之间共享。所以`static`成员也就是所谓的类变量。虽然不是静态成员 - 是对象变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:13:46.753

这是因为在希望类中，您将 Name、Score 和 ApproxCost 声明为静态。

# objective-c - 如何在 Objective-C / iOS 中表示无限数 ~0.99999 .....？

> ID：13436133
> 
> 赞同：2
> 
> 时间：2012-11-18T00:09:30.757
> 
> 标签：objective-c

我有一个可能永远持续下去的数字，比如~0.999999 ...

看到这个：

```
while (myNumber / 25 > 0.999999)
{
   // do stuff
} 
```

如何在 Objective-C 中正确表示该数字？

或者也许我做这个`while`循环不正确，有人可以告诉我如何解决它？我正在尝试查看是否`myNumber`可以至少除以 25 一次……所以即使是 26/25 也会通过（`%`在这种情况下 mod 不起作用）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T00:13:57.990

对你来说幸运的是，这个重复的小数在浮点运算中有一个精确的表示（你不必四舍五入）：

```
while (myNumber / 25 > 1)
{
    // do stuff
} 
```

这是因为“0.999999...”和“1”只是写相同数字的不同方式。它们**不是**不同的数字。

或者也许你想这样做：

```
while (myNumber / 25 >= 1) 
```

如果`myNumber`是一个非负整数，那么这实际上是一样的：

```
while (myNumber / 25) // nonzero values are "true" 
```

或者，您可以将其翻译为等价物：

```
while (myNumber >= 25) // no need to divide 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:13:19.870

如果 myNumber 大于或等于 25，则至少可以将其除以 25 一次。

# jquery - 单击按钮以获取 jquery 模态对话框的 div id

> ID：13436135
> 
> 赞同：0
> 
> 时间：2012-11-18T00:09:45.233
> 
> 标签：jquery, jquery-ui-dialog

我正在使用这样的 jQuery 模态对话框：

```
<div class="dialog-form" id="dialog-form1" title="Edit Invoice">
<form>
.... inputs & selects
</form>
</div>              
<button class="dialog-button">Edit</button> 
```

按钮的功能如下所示：

```
$(".dialog-button").button().click(function() {
alert ($(this).prev("div").attr("id"));
}); 
```

我现在要做的就是获取前一个 div 的 ID（我将按钮更改为类而不是 ID，因为我在同一页面上放置了几个不同的弹出表单）。所以它应该返回“dialog-form1”。但无论我尝试什么，它都找不到前一个 div 的 ID，它只返回“未定义”......

有任何想法吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:16:55.157

将您的 jQuery 脚本替换为以下内容：

```
$(".dialog-button").click(function() {
   alert ($(this).prev("div").attr("id"));
});​ 
```

现场[演示](http://jsfiddle.net/salih0vicX/aueeC/ "演示")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:08:07.173

jQuery UI Dialog 小部件会更改并将包含表单的 div 移动到 DOM 中的单独位置 - 导致您的“prev”逻辑找不到它。

这是我尝试您的示例时写入我的 DOM 的 HTML：

```
<div class="dialog-form ui-dialog-content ui-widget-content" id="dialog-form1" style="width: auto; min-height: 103.03333330154419px; height: auto;" scrolltop="0" scrollleft="0">
<form>
<!-- .... inputs & selects  -->
</form>
</div> 
```

为了证明这一点，不要在您的“dialog-form1”ID 上实例化 Dialog 小部件并运行您的脚本。到时候它会找到的。

我会尝试在您的 DIV 上添加一个您想要查找并按类选择的类（而不是使用“prev”）。像这样的东西...

```
<div class="dialog-form" id="dialog-form1" class="my-dialog-i-want" title="Edit Invoice">
<form>
<!-- .... inputs & selects  -->
</form>
</div>              

$(".dialog-button").on("click", function(e) {
  var myDiv = $("div.my-dialog-i-want");
  alert (myDiv.attr("id"));
}); 
```

希望这有帮助。

# joomla - 如何使用 jQuery Isotope 进行正常分页？

> ID：13436137
> 
> 赞同：3
> 
> 时间：2012-11-18T00:09:55.550
> 
> 标签：joomla, navigation, pagination, jquery-isotope

我已经以这种方式将同位素[http://jsfiddle.net/circlecube/LNRzZ/](http://jsfiddle.net/circlecube/LNRzZ/)实现到我的 Joomla 网站。排序和过滤工作完美，但仅在当前页面中。

我想对所有项目进行排序/过滤，但每页仅显示 20 个项目。我希望保持数字导航，例如[http://tutorials.vinnysingh.co/quicksand/](http://tutorials.vinnysingh.co/quicksand/)。

Isotope 可以处理这个问题还是我应该使用另一个插件？任何帮助是极大的赞赏。提前致谢。

这是我的完整代码：

```
jQuery( document ).ready( function ($) {
// cache container
var $container = $('#container');
// initialize isotope
$container.isotope({                
    getSortData : {     
        author : function ( $elem ) {
        return $elem.find('.author').text();
        },      
        city : function ( $elem ) {
        return $elem.find('.city').text();
        },          
        country : function ( $elem ) {
        return $elem.find('.country').text();
        },                  
        price : function( $elem ) {
                    return parseFloat( $elem.find('.price').text().replace( /[\(\)]/g, '') );
                    }, 
        rating : function ( $elem ) {
        return parseInt( $elem.find('.rating').text(), 10 );
        },          
        review : function ( $elem ) {
        return parseInt( $elem.find('.review').text(), 10 );
        },          
        perfDate: function (element) {
        // parse out the performance date from the css classes
        var classList = element.attr('class').split(/\s+/);
        var dateClassPrefix = 'date-';
        var date;
        $.each(classList, function(index, cssClassName){
        if (cssClassName.substring(0, dateClassPrefix.length) === dateClassPrefix) {
        // Should be a date in format 'yyyy-MM-dd'
        var dateString = cssClassName.substring(dateClassPrefix.length);
        date = SF.parseDate('dd/mm/yyyy').getTime();
        }
        });
        return date;
        }                       
    }   
});         

$('#sort-by a').click(function(){
// get href attribute, minus the '#'
var sortName = $(this).attr('href').slice(1);
    $('#container').isotope({ sortBy : sortName });
   return false;
});

// filter items when filter link is clicked
$('#filters a').click(function(){
    var selector = $(this).attr('data-filter');
    $container.isotope({ filter: selector });
    return false;
});

  var $optionSets = $('#options .option-set'),
      $optionLinks = $optionSets.find('a');

  $optionLinks.click(function(){
    var $this = $(this);
    // don't proceed if already selected
    if ( $this.hasClass('selected') ) {
      if ($this.hasClass('lock')){
          //return false;
        }
        else if ($this.hasClass('asc')){
          $this.removeClass('asc').addClass('desc');
        }
        else if ($this.hasClass('desc')){
          $this.removeClass('desc').addClass('asc');
        }
    }
    var $optionSet = $this.parents('.option-set');
    $optionSet.find('.selected').removeClass('selected');
    $this.addClass('selected');

    // make option object dynamically, i.e. { filter: '.my-filter-class' }
    var options = {},
        key = $optionSet.attr('data-option-key'),
        value = $this.attr('data-option-value');
    // parse 'false' as false boolean
    value = value === 'false' ? false : value;
    options[ key ] = value;
    if ($this.hasClass('asc') || $this.hasClass('desc'))
        options[ 'sortAscending' ] = $this.hasClass('asc');

    if ( key === 'layoutMode' && typeof changeLayoutMode === 'function' ) {
      // changes in layout modes need extra logic
      changeLayoutMode( $this, options )
    } else {
      // otherwise, apply new options
      $container.isotope( options );
    }        
    return false;
  });               
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:41:06.023

同位素不做分页。您需要在 Joomla 中实现分页。

# ruby - 在字符串对象上调用每个

> ID：13436142
> 
> 赞同：2
> 
> 时间：2012-11-18T00:10:29.210
> 
> 标签：ruby

这段代码（由其他人）可能是使用旧版本的 Ruby 编写的，因为现在我在字符串对象上调用 'each' 时遇到错误。下面的迷宫字符串被传递给该`maze_string_to_array`方法。当它运行时，它会在 `maze_string_to_array' 中产生这个错误

```
 NoMethodError: undefined method `each' for #<String:0x00000100854ac0> 
```

你能解释一下问题是什么，以及如何解决它吗？

```
 def maze_string_to_array(mazestring)
        @maze = []
        mazestring.each do |line|        
            @maze.push line.chomp
        end
    end 
```

迷宫线

```
MAZE1 = %{#####################################
# #   #     #A        #     #       #
# # # # # # ####### # ### # ####### #
# # #   # #         #     # #       #
# ##### # ################# # #######
#     # #       #   #     # #   #   #
##### ##### ### ### # ### # # # # # #
#   #     #   # #   #  B# # # #   # #
# # ##### ##### # # ### # # ####### #
# #     # #   # # #   # # # #       #
# ### ### # # # # ##### # # # ##### #
#   #       #   #       #     #     #
#####################################} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:19:42.513

这段代码不必要地冗长。整个方法可以用 a`map`和 1.9 [String#lines](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-lines)来代替旧的 1.8.x [String#each](http://www.ruby-doc.org/core-1.8.7/String.html#method-i-each)来分割行：

```
@maze = mazestring.lines.map(&:chomp) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:17:32.847

Ruby 1.8 String#each 用于遍历行。在 1.9 中，String#each_line 做同样的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T00:17:49.943

在 Ruby 1.9 中使用`each_line`而不是`each`.

但看起来你`mazestring.split(/\n/)`无论如何都可以替换整个方法。

# jquery - 根据参数从数组中获取项目

> ID：13436149
> 
> 赞同：0
> 
> 时间：2012-11-18T00:11:05.993
> 
> 标签：jquery, underscore.js

我有一个对象数组。构造函数是

```
Planet : function(planet)
{
    this.name = planet.name;
    this.percComp = planet.percComp;
    this.preReq = planet.preReq;
} 
```

有没有办法使用 jquery 或下划线来获取一个或多个对象，基于 objects 参数的数组。

就像是

```
_getItem(planetArray, Planet.name === 'Mars') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:12:15.403

这就是 jQuery 的[`grep`](http://api.jquery.com/jQuery.grep/)方法的用途：

```
var theObject = $.grep(planetArray, function (el) {
    return el.name === 'mars';
})[0]; 
```

这是小提琴：http: [//jsfiddle.net/g7syV/](http://jsfiddle.net/g7syV/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:16:41.740

试试下划线的`where`方法

```
_.where(listOfPlanets, {name: "Mars"}); 
```

假设您有以下行星列表 - `prop`是一个虚构的属性

```
var listOfPlanets = [
    { name: 'Mercury', prop:1},
    { name: 'Venus', prop:2},
    { name: 'Earth', prop:3},
    { name: 'Mars', prop:4},
    { name: 'Jupiter', prop:5},
    { name: 'Saturn', prop:6},
    { name: 'Uranus', prop:7},
    { name: 'Neptune', prop:8} ]; 
```

要获取火星对象，只需执行以下操作。请记住，它`_.where`返回一个匹配数组。需要访问索引`0`或使用`_.first`

```
var mars = _.where(listOfPlanets, {name: "Mars"})[0];
console.log(mars.prop);    // 4 
```

Underscore 还有一个`_.find`方法，可以用来只检索第一个匹配项

```
var mars = _.find(listOfPlanets, function(p){ return p.name === 'Mars' });
console.log(mars.prop);    // 4 
```

JSFiddle在这里：http: [//jsfiddle.net/jaimem/6bxnK/1/](http://jsfiddle.net/jaimem/6bxnK/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T00:14:13.447

您可以使用[grep](http://api.jquery.com/jQuery.grep/)：

```
 $.grep(arr, function (obj) { return obj.name === 'Mars'; }); 
```

这将返回一个符合条件的对象数组。

# android - Listview 不显示在 masterdetailsflow 的片段中

> ID：13436150
> 
> 赞同：1
> 
> 时间：2012-11-18T00:11:06.837
> 
> 标签：android, android-fragments

我正在使用 masterdetailsflow 模板来构建自定义细节布局。它似乎效果不佳。之前提出的最接近的问题似乎没有解决我在 [ListView 的问题没有出现在片段中](https://stackoverflow.com/questions/13432658/listview-not-showing-up-in-fragment) 我放了一个日志进行调试，它似乎通过了“Check1”但它没有显示。

```
public class RouteItemDetailFragment extends Fragment {
...
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_routeitem_detail, container, false);
        if (mItem != null) {
            ((TextView) rootView.findViewById(R.id.routeitem_detail)).setText(mItem.title);
             Log.i("GPS", "onCreateView - RouteItemDetailFragment - check listadapter");          
        }
        return rootView;
    }
    @Override
    public void onViewCreated (View view, Bundle savedInstanceState){
        ArrayList<String> listItems = new ArrayList<String>();
        listItems.add("helo1");
        listItems.add("helo2");
        listItems.add("helo3");
        listItems.add("helo4");
        ArrayAdapter<String> adapter;
            ((TextView) view.findViewById(R.id.txt1)).setText("kkkkkk");
            Log.i("Check1", "onCreateView - RouteItemDetailFragment - check listadapter");          
            adapter=new ArrayAdapter<String>(getActivity(),
                    android.R.layout.simple_list_item_1,
                    listItems);
            adapter.notifyDataSetChanged();
            ListView listAdapter = (ListView) view.findViewById(R.id.lv);
            listAdapter.setAdapter(adapter);

    } 
```

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/twopanecontainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        style="?android:attr/textAppearanceLarge"
        android:id="@+id/routeitem_detail"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="16dp"
        tools:context=".RouteItemDetailFragment" />
    <TextView
        android:id="@+id/txt1"
        style="?android:attr/textAppearanceLarge"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="16dp"
        />
    <ListView
        android:id="@+id/lv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:15:34.333

您的 LinearLayout 默认情况下水平显示视图，因此您的第二个 TextView 和 ListView 可能只是在屏幕外显示。将方向更改为`"vertical"`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/twopanecontainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" > 
```

# jquery - 如何在 id 中查找数字并使用 jquery 选中复选框

> ID：13436173
> 
> 赞同：1
> 
> 时间：2012-11-18T00:14:05.457
> 
> 标签：jquery, arrays, find, checkbox

这可能有点令人困惑，但它就是这样。我有第一组这样的复选框：

```
<input type="checkbox" id="quick" value="6" />
<input type="checkbox" id="quick" value="3" /> 
```

还有第二组这样的复选框：

```
<div class="check1"><input type="checkbox" id="1,3,4" value="6" /></div>
<div class="check1"><input type="checkbox" id="1" value="6" /></div>
<div class="check1"><input type="checkbox" id="6,4" value="6" /></div> 
```

我需要获取第一个复选框的值并检查该值是否存在于第二组复选框的 id 数组中，并检查它们是否返回 true。这是我到目前为止所拥有的，但它不起作用：

```
$('#quick').click(function(){
        var perId = $(this).val();
        $('#check1 input[type="checkbox"]').attr('id').find(perId).attr('checked', true);
        }); 
```

有谁知道如何做到这一点？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:27:28.437

我改变了一些东西以使代码更明智（如果我破坏了任何东西，请告诉我）。

1.  “快速”复选框的 id 被删除，取而代之的是一个通用名称。
2.  .check1 中的各种复选框已将其 id 值转换为`data-set`属性。

```
<input type="checkbox" name="quick" value="6" />
<input type="checkbox" name="quick" value="3" />

<div class="check1">
    <input type="checkbox" data-set="1,3,4" value="6" />
    <input type="checkbox" data-set="1,3"   value="6" />
    <input type="checkbox" data-set="6,4"   value="6" />
</div>​ 
```

```
$(function () {

    "use strict";

    var $quick = $("[name=quick]"),
        $dSets = $(".check1 :checkbox");

    // We've changed a checkbox
    $quick.on("change", function () {
        // Uncheck all data-set elements
        $dSets.prop("checked", false);
        // Run through all checked quick elements
        $quick.filter(":checked").each(function (index, quick) {
            // Determine whether each data set element should be checked
            $dSets.prop("checked", function () {
                // Get array of values
                var set = $(this).data("set").toString().split(",");
                // Should this box be checked
                return this.checked || $.inArray(quick.value, set) > -1;
            });
        });
    });

}); 
```

小提琴：http: [//jsfiddle.net/u2q8P/4/](http://jsfiddle.net/u2q8P/4/)

# c - 谁能帮我找到这个 C 函数中的错误？

> ID：13436177
> 
> 赞同：-2
> 
> 时间：2012-11-18T00:14:22.977
> 
> 标签：c, sorting, pointers, cstring

因此，我编写了一个 mystrstr() 函数，它的行为应该与原始 strstr() 函数完全相同。我已经测试了大量的案例，我的功能似乎有效。但是，它没有通过在线提交系统的一些测试。

你能帮助我吗？

```
int mystrcmp(char *a, char *b)
{
    int n = mystrlen(a);
    int m = mystrlen(b);
    int l = n;
    if (m<n) l = m;

    //printf("strcmp => %d %d\n", n, m);
    for (int i=0; i<l; i++)
    {
        //printf("%c %c\n",a[i],b[i]);
        if (a[i]<b[i]) return -2;
        else if (a[i]>b[i]) return 2;
    }

    if (n<m) return -1;
    else if (n>m) return 1;
    else return 0;
}

char *mystrstr(char *haystack, char *needle)
{
    int n = mystrlen(haystack);
    int m = mystrlen(needle);
    if (n==0&&m==0) return haystack;
    int result;

    for (int i=0; i<=(n-m); i++)
    {
        result = mystrcmp(haystack+i, needle);
        if (result==1||result==0||result==-1)
            return haystack+i;
    }
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:42:30.447

请注意，您`mystrcmp`是多余的。你可以使用

```
if (!memcmp(haystack+i, needle, m)) {
     return haystack+i
} 
```

如果不允许使用`memcmp`，请自己编写。但丢弃`mystrcmp`。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-18T00:19:09.900

```
if (n==0&&m==0) return haystack; 
```

你想要“||” 操作员。

```
if (m<n) l = m; 
```

你知道如果 "m != n" 那么这两个字符串的长度不相等，因此不相等。

其他的就不清楚了，没看太远。

# javascript - 根本没有使用消息传递调用 background.js 中的 Javascript 函数。

> ID：13436180
> 
> 赞同：1
> 
> 时间：2012-11-18T00:15:14.193
> 
> 标签：javascript, google-chrome-extension

这是我的 popup.html：

```
<!DOCTYPE html>
    <html lang="en">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="script.js"></script>
    <script src="popup.js"></script>
      <head>
          <meta charset="utf-8">
          <title> Chrome Extension</title>
          <link rel="stylesheet" href="style.css" />
      </head>
      <body id="container">
        <div id="left">
          <form>
          <div class="input-wrapper">
            <input type="text" id="query" />
            <button id="openBackgroundWindow">Open background window</button>
          </div>
            <input type="submit" id="button" value="Search" alt="Loading" />
        </form>
        <!-- rest of the code will follow this -->
        <!-- other code above -->
      <div id="results">
        <ul id="results-list">
          <!-- this gets populated -->
        </ul>
      </div>
    </div> <!-- end #left -->
      </body>
    </html> 
```

这是我的 popup.js：

```
$("#openBackgroundWindow").click(function(){

    login();
     chrome.extension.sendRequest({ msg: "login" });

});

function openNextPage(){  
 var bg = chrome.extension.getBackgroundPage().openNextPage();
}  

function pageRender(){
console.log("no user")
  if (localStorage.getItem("username") == null){
    console.log("no user")
  }

    function codeAddress() {
        document.getElementById('button').style.visibility='hidden'; 
    }

}

function login(){

var xhr = new XMLHttpRequest();
xhr.open("POST", "http://localhost:3000/login", true);
xhr.onreadystatechange = function() {
  if (xhr.readyState == 4) {
    // JSON.parse does not evaluate the attacker's scripts.
    var resp = JSON.parse(xhr.responseText);
  }
}

xhr.send();
} 
```

这是我的背景.js：

```
function login(){

var xhr = new XMLHttpRequest();
xhr.open("POST", "http://localhost:3000/login", true);
xhr.onreadystatechange = function() {
  if (xhr.readyState == 4) {
    // JSON.parse does not evaluate the attacker's scripts.
    var resp = JSON.parse(xhr.responseText);
  }
}

xhr.send();
}

chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse){
        print "hello";
        if(request.msg == "login") login();
    }
); 
```

既没有调用 background.js 中的 login() 函数，也没有调用 popup.js 中的 login 函数。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:42:40.887

尽管 Sudarshan 关于提供您自己的 jQuery 库是完全正确的，但有一种方法可以从 Google 的 CDN 加载 jQuery。您必须将以下内容安全规则添加到清单文件中。

```
 ...
    "content_security_policy": "script-src 'self' https://*.googleapis.com; object-src 'self'",
    ...
```

有关更多信息，请阅读[有关内容安全策略的官方 Chrome 文档](http://developer.chrome.com/extensions/contentSecurityPolicy.html)，尤其是点击[CSP 规范](http://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html#syntax)的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:01:57.957

它对我有用

利用`<script src="jquery.min.js"></script>`

代替

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
```

因为它违反了以下内容安全政策指令。下载 min js 并将其放入您的包中

更多，而不是

```
chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse){ 
```

~~打印“你好”；~~

```
 if(request.msg == "login") login();
    }
); 
```

利用

```
chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse){

console.log("hello");

        if(request.msg == "login") login();
    }
); 
```

确保您已声明

```
 "background":{
    "scripts":["background.js"]
  } 
```

在您的清单文件中

**我的最终工作版本**

***清单.json***

```
 {
  "name": "Demo",
  "version": "1.0",
  "manifest_version": 2,
  "description": "This is a demo",
  "browser_action":{
  "default_popup":"popup.html"
  },
  "background":{
    "scripts":["background.js"]
  }
  } 
```

***Popup.js***

```
function login(){
alert("function called");
chrome.extension.sendRequest({ msg: "login" });
}

$(document).ready(function (){
console.log("Inside");
$("#openBackgroundWindow").click(login);
}); 
```

***popup.html***

```
<!DOCTYPE html>
    <html lang="en">

    <script src="jquery.js"></script>
    <!--<script src="script.js"></script>-->
    <script src="popup.js"></script>
      <head>
          <meta charset="utf-8">
          <title> Chrome Extension</title>
          <!--<link rel="stylesheet" href="style.css" />-->
      </head>
      <body id="container">
        <div id="left">
          <form>
          <div class="input-wrapper">
            <input type="text" id="query" />
            <button id="openBackgroundWindow">Open background window</button>
          </div>
            <input type="submit" id="button" value="Search" alt="Loading" />
        </form>
        <!-- rest of the code will follow this -->
        <!-- other code above -->
      <div id="results">
        <ul id="results-list">
          <!-- this gets populated -->
        </ul>
      </div>
    </div> <!-- end #left -->
      </body>
    </html> 
```

***背景.js***

```
function login_br(){

alert("function called");
}

chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse){
        console.log("hello");
        if(request.msg == "login") login_br();
    }
); 
```

它与上面的代码完美配合，如果您还有问题，请告诉我

# android - 如何找到安卓设备的局域网IP地址？

> ID：13436181
> 
> 赞同：9
> 
> 时间：2012-11-18T00:15:24.330
> 
> 标签：android

如果连接了设备的 wifi，我假设该设备有一个 LAN IP 地址，大概是由在路由器上运行的 dhcp 分配的。

如何在 wifi 接口上找到 LAN ip 地址（不是外部 ip）？

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T00:19:23.190

[NetworkInterface](http://developer.android.com/reference/java/net/NetworkInterface.html)将帮助您：

```
String ipAddress = null;
try {
    for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
        NetworkInterface intf = en.nextElement();
        for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
            InetAddress inetAddress = enumIpAddr.nextElement();
            if (!inetAddress.isLoopbackAddress()) {
                ipAddress = inetAddress.getHostAddress().toString();
            }
        }
    }
} catch (SocketException ex) {} 
```

# asp.net - 保护 web.config 信息

> ID：13436183
> 
> 赞同：1
> 
> 时间：2012-11-18T00:15:43.960
> 
> 标签：asp.net, visual-studio-2010, msdeploy

我们正在开发一个 ASP.NET MVC 站点。我是一名开发人员，还负责与分布在全球的团队其他成员一起进行产品部署。

今天我开始研究用于生产部署的 web.release.config 转换文件，这让我想到我真的不希望其他开发人员访问这些文件，因为它们包含敏感的生产信息。但是，在 VS 2010 中，这些文件被放置在 dev web.config 旁边，所以如果我将它们签入，那么其他工作人员就会看到它们。

是否有推荐的方法来使用 VS2010 将转换应用于 web.config 文件，这样这些转换文件不必与其余的开发文件一起定位？或者，我是否需要使用某种自动化构建工具（例如 NANT 或 MS Team Server）来做到这一点？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:30:13.193

我通常使用 web.config 连接文件上的 src= 标记来为开发人员无权访问的生产服务器的连接字符串创建一个单独的文件，以确保其安全。然后在我的构建过程中，我从更安全的地方获取 webProd.config 文件并用它更新服务器。

# javascript - HTML5 中的本地存储表单

> ID：13436186
> 
> 赞同：2
> 
> 时间：2012-11-18T00:16:06.603
> 
> 标签：javascript, forms, html, local-storage, shopping-cart

我正在尝试将数字存储到具有购物车类型的类型网站的本地存储中...我找到了存储文本/电子邮件有效的示例，但是当我尝试将其存储为数字而不是文本或更改表单名称时似乎不起作用。

这是我在网站上制作的用于捕获数据的表单，然后是应该填写来自另一个会话的已保存数据、捕获数据和（当前在提交时重置）数据的 javascript。

```
<form id="localStorageCart" method="post" action="">
  <label>Rooster:</label>
  <input type="number" name="roosterQ" id="roosterQ" class="stored" min="0" max="99" step="1" value ="0" /><br>

  <label>Cow:</label>
  <input type="number" name="cowQ" id="cowQ" class="stored" min="0" max="99" step="1" value ="0" /><br>

  <label>Cat:</label>
  <input type="number" name="catQ" id="catQ" class="stored" min="0" max="99" step="1" value ="0" /><br>

  <label>Sheep:</label>
  <input type="number" name="sheepQ" id="sheepQ" class="stored" min="0" max="99" step="1" value ="0" /><br>

  <label>Dumpster:</label>
  <input type="number" name="dumpsterQ" id="dumpsterQ" class="stored" min="0" max="99" step="1" value ="0" /><br>

  <label>Dog:</label>
  <input type="number" name="dogQ" id="dogQ" class="stored" min="0" max="99" step="1" value ="0" /><br>

  <label>Horse:</label>
  <input type="number" name="horseQ" id="horseQ" class="stored" min="0" max="99" step="1" value ="0" /><br>

    <input type="submit" class="submitOrder" value="Submit" />
</form><br>
<br>

<script type="text/javascript">
$(document).ready(function () {
    function init() { /* checks for stored data and fills in... */
        if (localStorage["roosterQ"]) {
            $('#roosterQ').val(localStorage["roosterQ"]);
        }
        if (localStorage["cowQ"]) {
            $('#cowQ').val(localStorage["cowQ"]);
        }
        if (localStorage["catQ"]) {
            $('#catQ').val(localStorage["catQ"]);
        }
         if (localStorage["sheepQ"]) {
            $('#sheepQ').val(localStorage["sheepQ"]);
        }
         if (localStorage["dumpsterQ"]) {
            $('#dumpsterQ').val(localStorage["dumpsterQ"]);
        }
         if (localStorage["dogQ"]) {
            $('#dogQ').val(localStorage["dogQ"]);
        }
         if (localStorage["horseQ"]) {
            $('#horseQ').val(localStorage["horseQ"]);
        }
    }
    init();
});

$('.stored').keyup(function () { /* keyup runs when key is pressed in a form with "stored"... Write to LS */
    localStorage[$(this).attr('name')] = $(this).val();
});

$('#localStorageCart').submit(function() { /* currently resets all LS data*/
    localStorage.clear();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:35:01.917

[`localStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)只能保存字符串，因此如果要存储数字，则需要输入 convert

```
var num = 1.5, str;

// Number to string, would be done implicitly by localStorage
str = num.toString();

// String to number
num = +str; // note nothing infront of the + sign.
// OR
// num = window.parseFloat(str,10); // or parseInt if you want integers

console.log(num, str);
// 1.5 "1.5" 
```

* * *

> 或更改它似乎不起作用的表单名称

你也在更新你的`init`吗？为了避免将来必须这样做，它应该循环而不是通过*id*`.stored`单独获取每个。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:44:44.357

如果您仍想通过 localstorage 执行此操作，您可能需要在存储变量之前检查 json.stringify

```
var obj = { 'a': 1, 'b': 2, 'c': 3 };
localStorage.setItem('obj', JSON.stringify(obj)); 
```

* * *

无论如何，你打算做什么？您是否只是想保留该字段以供下次使用或重新加载页面？

如果是这样，你可能想试试这个插件，Sisyphus [http://simsalabim.github.com/sisyphus/](http://simsalabim.github.com/sisyphus/)*

# php - PHPUnit 没有响应 - 这是 PHPUnit.bat 错误吗

> ID：13436197
> 
> 赞同：1
> 
> 时间：2012-11-18T00:18:22.373
> 
> 标签：php, zend-framework, batch-file, phpunit, pear

安装了 Zend/PHPUnit 的人可以告诉我 PHPUnit.bat 应该如何阅读吗？

我已经安装了 PEAR 和 PHPUnit，但 PHPUnit.bat 的代码似乎有错误。

解决了一些问题后，我不再收到*“PHPUnit 不是公认的命令”*错误。但是，如果我现在在命令行中调用“PHPUnit”，除了命令提示符重新出现之外，什么都不会发生。表明某些代码可能已经运行。

我做了一些阅读，PEAR 应该调用 'c:\zend\zendServer\bin' 中的 .bat 文件。我打开了这个，有一个非常短的代码块。

```
if "%PHPBIN%" == "" set PHPBIN=c:\zend\zendserver\bin\php.exe
if not exist "%PHPBIN%" if "%PHP_PEAR_PHP_BIN%" neq "" goto USE_PEAR_PATH
GOTO RUN
:USE_PEAR_PATH
set PHPBIN=%PHP_PEAR_PHP_BIN%
:RUN
"%PHPBIN%" "C:\Zend\zendServer\bin\\phpunit" %* 
```

最后一行看起来不正确，尤其是双斜杠。我尝试了各种派生，例如“bin\pear\phpunit 等”，但不确定应该指向哪里。

任何安装了 ZendServer/PHPUnit 的人都可以告诉我这行应该怎么读。

另外，我还应该问，在 cmd 行中调用“ *PHPunit* ”是测试软件包是否安装正确的最佳方法。想法赞赏。PEAR 安装调用建议安装应该可以正常工作。

**更新** 我刚刚通过 zend 框架 CLI 工具创建了一个新项目，并注意到我的 include_path 中没有找到 PHPUnit。我的包含路径上有 PEAR 和 PHP，我还需要其他东西吗？

**更新** 我在一个潜在的测试中发现了这篇文章[让 PHPUnit 工作 - 包含路径设置不正确？](https://stackoverflow.com/questions/4091862/getting-phpunit-working-include-path-not-set-correctly)，它提供了一种测试 phpUnit 的方法。我将建议的 PHP 脚本保存在我的 htdocs 文件夹中，并尝试使用 PHPUnit 调用它。再次没有响应，这似乎表明我的 PHPUnit.bat 文件中有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:57:52.820

好吧，这是一场噩梦，但我想我有一个解决方案可以解决任何面临同样问题的人。

**问题一：*如何测试 PHPUNit 是否正常工作。*** 答：在 cmd 行中输入 PHPUnit 会给你一个所有命令的列表，因此可以很好地测试安装是否成功。

**问题二：*PHPUnit.bat 应该是什么样子。***

上面的文字是正确的，PHP.bat 中的额外斜杠不会影响 ta.speot.is 注释的输出。

**使安装工作的解决方案：**

本例中的问题与 Zend Server 的异常有关。服务器似乎没有接收到对 php 配置文件 PHP.ini 的更改。Zend 似乎将路径变量存储在其他地方。我注意到对 include_path 的更改尚未通过安装提供的 GUI 服务器界面进行更改。

PHPUnit 现在工作正常。

对于那些在安装过程中苦苦挣扎的人，我会添加两节课来添加到关于该主题的大量帖子中。

1) 如果您曾经在您的计算机上安装过 Zend。请注意卸载留下的跟踪文件可能会使以后的安装复杂化。

2) 在 c:\windows 目录中保存了 PHPUnit.ini 文件，请务必在开始安装之前将其删除。

3) 以下链接是一组很好的说明[http://www.zendexperts.com/2011/06/21/how-to-install-zend-server-ce-pear-phpunit/](http://www.zendexperts.com/2011/06/21/how-to-install-zend-server-ce-pear-phpunit/)。

我唯一要做的改变是在使用go-pear.php安装PEAR时，不要按照帖子中的建议激活错误，否则界面似乎不起作用并在PEAR php中发出大量错误。

希望这可以帮助某人节省几天时间。

# c++ - 使用 Boost 随机基础设施，但如何轻松替换组件（比如底层生成器）？

> ID：13436198
> 
> 赞同：0
> 
> 时间：2012-11-18T00:18:22.627
> 
> 标签：c++, boost, random, replace, prng

例如，我的用例是课堂使用。

Boost random 基础设施已经存在，我试图避免 NIH 综合症。但是比方说，我想

1-研究各种 PRNG 的属性（好的，比如说缺陷）及其对生成正态（或其他分布）变量的影响。如何做到这一点并且仍然保留生成一大堆分布的其他 Boost 功能？

2-使用 Boot（比如 Mersenne Twister）生成器并测试生成其他分布的各种方法（比如正常的分布）。

是否有一种简单而通用的方法可以直接替换任何 Boost 随机基础设施组件，并且仍然能够使用其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:47:07.597

Boost.Random 中随机性的基本来源称为“生成器”。[Boost](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_random/reference.html#boost_random.reference.generators)中提供了几个，但我认为你没有理由不能使用你自己的。

boost 文档中的示例展示了如何创建生成器对象，然后将其传递给分布以获取一系列数字。

*- 之后 -*

这是我创建的一个基本生成器（基于 rand48）：

```
#include <iostream>

#include <boost/random.hpp>

class my_rand {
public:
//  types
    typedef boost::uint32_t result_type;

//  construct/copy/destruct
    my_rand () : next_ ( 0 ) {}
    explicit my_rand( result_type x ) : next_ ( x ) {}

//  public static functions
    static uint32_t min() { return 0; }
    static uint32_t max() { return 10; }

    // public member functions
    void seed() { next_ = 0; }
    void seed(result_type x) { next_ = x; }
//  template<typename It> void seed(It &, It);
//  template<typename SeedSeq> void seed(SeedSeq &);
    uint32_t operator()() {
        if ( ++next_ == max ())
            next_ = min ();
        return next_;
        }

    void discard(boost::uintmax_t) {}
//  template<typename Iter> void generate(Iter, Iter);

    friend bool operator==(const my_rand & x, const my_rand &y);
    friend bool operator!=(const my_rand & x, const my_rand &y);
    // public data members
    static const bool has_fixed_range;
private:
    result_type next_;
};

bool operator==(const my_rand & x, const my_rand &y) { return x.next_ == y.next_; }
bool operator!=(const my_rand & x, const my_rand &y) { return x.next_ != y.next_; }
const bool my_rand::has_fixed_range = true;

int main ( int, char ** ) {
//  boost::random::mt19937 rng;
    my_rand rng;
    boost::random::uniform_int_distribution<> six(1,6);

    for ( int i = 0; i < 10; ++i )
        std::cout << six(rng) << std::endl;

    return 0;
    } 
```

显然，输出不是随机的。但它确实与 Boost.Random 基础设施互操作。

# javascript - jQuery 幻灯片 (Ryan Florence) 在点击时不起作用

> ID：13436202
> 
> 赞同：0
> 
> 时间：2012-11-18T00:19:09.827
> 
> 标签：javascript, jquery, slideshow

我一直在尝试让 jQuery 幻灯片（点击时）工作一段时间，但不知道我哪里出错了。我在这里使用 Ryan Florence 的 jQuery 幻灯片导航：

[http://ryanflorence.com/jquery-slideshow/demos/slideshownav/](http://ryanflorence.com/jquery-slideshow/demos/slideshownav/)

我在这里整理了一个 jsFiddle：

[http://jsfiddle.net/hAvXt/3/](http://jsfiddle.net/hAvXt/3/)

我确保包含 jQuery UI。他网站上的示例中包含三个 javascript 文件（demo.js、jquery.rf.slideshow.js、jquery.rf.slideshownav.js）。我已将它们全部放入 JSFiddle 的 javascript 部分。

基本上，当我单击正确的按钮时，它会将“幻灯片”div 更新为正确的内容，但它并没有给我过渡。起初我以为是因为我使用的是“divs”而不是图像，但我过去曾使用过他更简单的幻灯片和 divs 并且效果很好。非常感谢帮忙。

这是我的导航栏：

```
<div class="slideshow" id="slideshow" style="width:1105px; height:1402px;">
<div id="red" style="background-color:red;height:1402px; width:1105px;">TEST 1</div>
<div id="green" style="background-color:green;height:1402px; width:1105px;">TEST 2</div>
<div id="blue" style="background-color:blue;height:1402px; width:1105px;">TEST 3</div>
</div> 
```

这是jQuery函数的实现：

```
$(function(){
  $('#slideshow').slideshownav({
    transition: 'push(#{direction})',
    mode: 'vertical',
    navSelector: '> ul > li > a',
    duration: 400,
    autoPlay: false
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:57:21.163

我把它设置得很奇怪（对于将来遇到这个问题的人）。使用该幻灯片，实际的锚点 href 没有做任何在该演示站点上的源代码中令人困惑的事情。

它与锚标签的顺序和幻灯片的顺序有关。第一个对应于第一个，依此类推。

# ruby-on-rails - 在 Ruby on Rails 中创建图书库存系统

> ID：13436206
> 
> 赞同：1
> 
> 时间：2012-11-18T00:19:31.917
> 
> 标签：ruby-on-rails, ruby, inventory, inventory-management

我目前正在创建一个专为书籍和其他纸质商品设计的库存系统。我想在 Ruby on Rails 中创建网站。我正在寻找的是可以实现这一目标的任何示例或想法。

我需要做的是，当它设置好后，它会添加书籍，包括当前数量和一些其他详细信息（姓名、出版日期等）。现在，当送货进来时，他们可以添加到当前计数中。当书籍被移除时，他们当然可以从总数中减去。如果可能的话，爱这一切是无缝的。它的用户越友好越好。

此外，当书籍达到低库存时，将显示警告。还有一个按字母顺序排列的书籍清单，包括所有细节等等。

我不知道如何有效地做到这一点，我对 Ruby on Rails 还很陌生，但对 HTML、PHP、CSS 非常熟悉，所以这些都不会造成问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:04:49.280

我也处于一个阶段，我想使用 Ruby 构建一个图书库存系统（因为它有很好的 XML 支持）。在我的快速研究中，这些是一些有趣的链接：

[开始 Ruby on Rails 电子商务：从新手到专业人士](http://books.google.be/books?id=o0JuxK5_1esC&pg=PA59&lpg=PA59&dq=book%20inventory%20ruby&source=bl&ots=rnhYJzefUZ&sig=OGlVlWO9wYo7gxy-HmxVQZIEeSU&hl=en&sa=X&ei=NLgBUfr6M_CY0QWBooH4Bw&ved=0CFMQ6AEwBQ#v=onepage&q=book%20inventory%20ruby&f=false) 还有一个 github 项目： [示例项目](https://github.com/jasondelponte/Ruby-Book-Inventory)

# javascript - jquery 库的兼容性问题

> ID：13436209
> 
> 赞同：2
> 
> 时间：2012-11-18T00:20:09.207
> 
> 标签：javascript, jquery, ajax

我正在为 crm 添加一些功能。其中之一是使用 ajax 发布到另一个页面，使用返回的信息填写一些表格。效果很好。我正在使用 $.post 和所有这些好东西。然后我注意到该网站的其他预先编写的功能之一停止工作。所以我开始四处寻找，停止工作的功能在控制台日志中给出了这个错误。

> [19:15:21.013] TypeError: $("view_Option").selectedIndex 未定义 @ [http://test.com/crm/modules/Calendar/script.js:598](http://test.com/crm/modules/Calendar/script.js:598)

好吧，我想我正在链接到 jquery 两次或类似的内容，所以我注释掉了该行并且它有效。所以我检查了我的代码以确保它也有效，现在我得到了

> [19:13:40.312] TypeError: $.post 不是函数@ [http://test.com/crm/modules/Calendar/renterAutoUpdate.js:16](http://test.com/crm/modules/Calendar/renterAutoUpdate.js:16)

有人可以向我解释发生这种情况的原因以及我将如何解决这样的问题吗？

[编辑]确定我的代码或预先编写的代码是否可以工作的行是

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:42:24.803

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script>
var $jq = jQuery.noConflict();
</script> 
```

然后我做了

```
$jq.post( 
```

代替

```
$.post( 
```

为遇到同样问题的其他人解决了我的所有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:28:51.007

可能您已经注释掉了在您项目的其他地方使用的行。再次尝试取消注释，看看会发生什么。$.post 不是一个函数应该消失，你应该找回你的第一个错误。

如果发生这种情况，您必须反击第一个错误，这可能是 jQuery 没有 .selectedIndex。相反，你应该写：

```
$("view_Option")[0].selectedIndex 
```

试试这个，然后写下会发生什么。

# batch-file - 在作为第一个参数传递给 bash.exe 的路径上打开 Cygwin

> ID：13436210
> 
> 赞同：1
> 
> 时间：2012-11-18T00:20:12.377
> 
> 标签：batch-file, cygwin, console2, cygpath

我要疯了，试图实现这一目标。我在 Stack Overflow 上阅读了很多问题，但没有奏效。我正在尝试在 console2 上打开一个选项卡，该选项卡在作为参数传递给它的路径上打开 Cygwin。

对于 cmd.exe，非常简单：

```
cmd.exe %1 
```

对于 Cygwin，这看起来真的很难：

```
bash --login -i -c 'cd `cygpath \'D:\Program Files\'`;exec bash' 
```

这里的问题是，没有空格的路径效果很好，有空格，它不起作用。另外，我不知道如何将参数传递给它，可能是 $1 或 %1？

**编辑1：**

我快到*了*，我创建了这个应该直接运行而不是 bash.exe 的批处理文件：

```
@echo off

set CHERE_INVOKES=%CD%
set TORUN="D:\Program Files\Cygwin\bin\bash.exe" --login -i -c 'cd "%CHERE_INVOKES%"; exec bash'
echo %TORUN%
call %TORUN%
PAUSE 
```

这适用于除 C: (和 D:) 之外的所有路径，原因是什么？Windows 是愚蠢的，它没有一个名为 C: 的路径，而是一个名为 C: 的路径！！！所以，虽然所有路径都**没有反斜杠**结束，但第一条路径以它结束，让我发疯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:04:11.750

这是解决方案：

```
@echo off

set CHERE_INVOKES=%CD%
::Remove trailing slash if required
IF %CHERE_INVOKES:~-1%==\ SET CHERE_INVOKES=%CHERE_INVOKES:~0,-1%

set TORUN="D:\Program Files\Cygwin\bin\bash.exe" --login -i -c 'cd "%CHERE_INVOKES%"; exec bash'

call %TORUN% 
```

我从这个问题中添加了这段代码：[Remove Trailing Slash From Batch File Input](https://stackoverflow.com/questions/2952401/remove-trailing-slash-from-batch-file-input)

```
::Remove trailing slash if required
IF %CHERE_INVOKES:~-1%==\ SET CHERE_INVOKES=%CHERE_INVOKES:~0,-1% 
```

这样我就可以使用这个批处理文件在当前路径上打开 Console2 Cygwin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:58:48.357

以下命令对我有用：

```
c:\cygwin\bin\bash --login -i -c "cd '%~1'; exec /bin/bash.exe" 
```

Where`%~1`扩展 %1 删除任何周围的引号 (") — 请参阅`help for`命令提示符。

另请参阅： Cygwin 中的**chere**包和**ConEmu**终端 :)

# ruby-on-rails - Apache 无法拾取新的索引页面 - Ruby on Rails - EC2

> ID：13436215
> 
> 赞同：0
> 
> 时间：2012-11-18T00:20:41.917
> 
> 标签：ruby-on-rails, apache, amazon-ec2, passenger

我在我的 RoR 服务器上创建了一个新项目，我想重定向 apache 以从我的 app/views/home/index.html.erb 中获取新的索引文件，但它似乎不起作用。

这是我创建新索引文件之前的虚拟服务器 conf 文件

```
<VirtualHost *:80>
    ServerName www.example.com
    ServerAlias example.com
    DocumentRoot /var/www/html/blog/public
    ErrorLog logs/example.com-error_log
    CustomLog logs/example.com-access_log common
<Directory /var/www/html/blog/public>
        Allow from all
    PassengerEnabled off 
    Options +Indexes +FollowSymLinks -MultiViews
</Directory>
</VirtualHost> 
```

在我删除了 public/index.html

```
<VirtualHost *:80>
    ServerName www.example.com
    ServerAlias example.com
    DocumentRoot /var/www/html/blog/app/views/home/
    ErrorLog logs/example.com-error_log
    CustomLog logs/example.com-access_log common
<Directory /var/www/html/blog/app/views/home/>
        Allow from all
    PassengerEnabled off 
    Options +Indexes +FollowSymLinks -MultiViews
</Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:35:17.370

# 完全编辑最后一个答案

请发布您的路线文件，但将您的 DocumentRoot 行改回

`DocumentRoot /var/www/html/blog/public`

您指向您的公共目录，您的路线将告诉应用程序显示 app/home/index，而不是 apache（如果您使用的是应该使用的 rails）。

在 config/routes.rb 确保你有这条线`root :to => 'home#index'`

## 更新 1

检查显示 Options 的行是否有正确的参数，并且更重要的是您需要它。[http://httpd.apache.org/docs/current/mod/core.html#options](http://httpd.apache.org/docs/current/mod/core.html#options)就我个人而言，我使用 nginx 和 unicorn，但我不记得当我搞乱Passenger 时那句话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:25:48.350

我修好了它。我必须在 httpd.conf 中指定 RailsEnv，然后触摸 tmp/restart.txt

# iis-7 - 如何在 web.config 中设置规则以重写到 IIS7 中的子目录/文件？

> ID：13436217
> 
> 赞同：1
> 
> 时间：2012-11-18T00:20:53.973
> 
> 标签：iis-7, web-config, rewrite

我在尝试让重写在 IIS7 web.config 中工作时遇到问题。

我需要将 /err/interaccess 之类的 URL 重写为 /err/404new.asp（不是重定向，因为我不想公开文件。

我尝试了以下方法，它仅在我使用 /interaccess 而不是 /err/interaccess 时才有效

```
 <rule name="Rewrite Interaccess Error" enabled="true" stopProcessing="true">
                <match url="^tinteraccess$" />
                <action type="Rewrite" url="/err/404new.asp" />
            </rule> 
```

知道为什么吗？我试图找到有关此的文档，但找不到有关此用法的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:02:17.107

神奇之处在于`<match>`标签的正则表达式。要使其与您的确切 URL 匹配，您将使用：

```
 <rule name="Rewrite Interaccess Error" enabled="true" stopProcessing="true">
            <match url="^err/interaccess$" />
            <action type="Rewrite" url="/err/404new.asp" />
        </rule> 
```

如果您想匹配`/err/`您将使用的所有内容：

```
 <rule name="Rewrite Interaccess Error" enabled="true" stopProcessing="true">
            <match url="^err/" />
            <action type="Rewrite" url="/err/404new.asp" />
        </rule> 
```

这一切都有很好的记录，例如：[http](http://www.iis.net/downloads/microsoft/url-rewrite) ://www.iis.net/downloads/microsoft/url-rewrite （参见相关学习）

# python - 如何从python将“整数指针数组”传递给c库中的函数

> ID：13436218
> 
> 赞同：4
> 
> 时间：2012-11-18T00:21:02.653
> 
> 标签：python, pointers, 2d, ctypes

最近我正在做一个函数被大量调用的项目，所以我想在这部分使用 C 代码。我是ctypes的新手，如果我的问题很简单，请原谅我。

在这里，我在 python 中有一个二维列表：

```
L = [[1],[1,2],[1,2,3]] 
```

我想在 C 模块中调用一个函数，并将其作为参数。由于 CI 中没有二维列表，因此希望将其转换为 *int 数组。

我不想要一个普通的 2D C 数组，因为每个条目的长度都是不同的。

我在 python 部分所做的是：

```
L = [[1],[1,2],[1,2,3]]
entrylist = []
for entry in L:
  c_entry = (ctypes.c_int * len(entry))(*entry) # c_entry is the C array version of entry
  entrylist.append(c_entry)

c_L = (ctypes.POINTER(ctypes.c_int) * len(entrylist))(*entrylist) # create an array of integer pointer, then initial it 
```

`c_L`是一个“LP_c_long_Array_14 对象”，当`len(L) == 14`.

另外，我可以通过使用完美打印出来

```
for i in range(len(L)):
  for j in range(len(L[i])):
    print(L[i][j], end = ' ')
  print() 
```

另一方面，在 C 代码中，我将函数定义为：

```
int fun(int** c_L)
int fun( (int * c_L)[]) 
```

两者都不起作用。ctypes 抛出“不知道如何转换参数 1”错误。

那么，请告诉我如何使它工作？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T01:39:03.140

你快到了，你只需要一些调整。

```
import ctypes as C

lib = C.CDLL("libfoo.so")

l = [[1],[1,2],[1,2,3]]
entrylist = []
lengths = []

for sub_l in l:
    entrylist.append((C.c_int*len(sub_l))(*sub_l))
    lengths.append(C.c_int(len(sub_l)))

c_l = (C.POINTER(C.c_int) * len(entrylist))(*entrylist)
c_lengths = ( C.c_int * len(l))(*lengths)

lib.test(c_l, c_lengths, len(l))  #here we also pass the sizes of all the arrays 
```

事物的 C 面如下所示：

```
#include <stdlib.h>
#include <stdio.h>

int test(int **ar,int *lens,int n_ar){
    int ii,jj,kk;
    for (ii=0;ii<n_ar;ii++){
        for (jj=0;jj<lens[ii];jj++){
            printf("%d\t",ar[ii][jj]);
        }  
        printf("\n");
        fflush(stdout);
    }
    return 0;
} 
```

如果这不起作用，那么将所有参数显式转换为 c 库函数可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:01:54.843

我认为您可以`int**`通过将所有数据打包到一个列表中来避免指针：

```
[1, 1, 2, 1, 2, 3] 
```

并传递另一个表示每个子列表开始的列表，例如：

```
[0, 1, 3, 6] 
```

所以第一个子列表从 0 开始，在 1 结束，第二个子列表从 1 开始，在 3 结束，第三个子列表从 3 开始，在 6 结束。

将这两个列表转换为 int 数组并将其传递给具有第二个数组长度的 c 函数。

这是一个例子：

```
#include <stdio.h>
void sum_list(int * data, int * positions, int length)
{
    int i, j, s;
    for(i=0;i<length-1;i++)
    {
        s = 0;
        for(j=positions[i];j<positions[i+1];j++)
        {
            s += data[j];
        }
        printf("%d\n", s);
    }
} 
```

和python代码：

```
L = [[1],[1,2],[1,2,3]]

data = []
positions = [0]
for sub in L:
    data.extend(sub)
    positions.append(len(data))

from ctypes import *

lib = CDLL("./sum_list.out")

c_data = (c_int * len(data))(*data)
c_positions = (c_int * len(positions))(*positions)

lib.sum_list(c_data, c_positions, len(c_positions)) 
```

# javascript - 刷新 BootStrap Popover 的内容

> ID：13436219
> 
> 赞同：0
> 
> 时间：2012-11-18T00:21:06.627
> 
> 标签：javascript, backbone.js, twitter-bootstrap

我正在尝试刷新弹出框的内容。我知道当我单击按钮时内容会更新，但是，它没有显示在已经打开的弹出窗口上。

```
$('#popOverPr')
    .popover(
        {
            animate : false,
            html : true,
            offset : 10,
            placement : 'bottom',
            template : '<div class="popover popOverProgress" "><div class="arrow" style="left:80%";></div><div class="popover-inner"><h3 class="popover-title" style="display:none;"></h3><div class="popover-content"><p></p></div></div></div>',
            content : function() {
                                        return $('#popOverPr-content').html();
                                }
$('#popOverPr').popover('show');

$('.popoverButton').on('click', function() {

//if(........)
    $('#popOverPauseText').text("Resume");
// else
    $('#popOverPauseText').text("Start");

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:50:11.300

您可以销毁弹出框，重新创建一个具有不同内容的新弹出框

# c++ - 如何找到像参数一样传递的某个数字的最大序列？

> ID：13436230
> 
> 赞同：0
> 
> 时间：2012-11-18T00:23:07.947
> 
> 标签：c++, algorithm, boost, stl

我有数字向量 **std::vector numbers;** 如何找到像参数一样传递的某个数字的最大序列？例如，如果我喜欢**0, 1, 1 , 3 , 2 , 0 , 0, 0, 6 , 0 , 0** 并且我正在寻找**0**数字，在这种情况下我需要获取起始索引**5 。**是否已经有一些功能或组合可以在**stl**或**boost**中实现这个问题？（我不能使用 C++11）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:38:25.310

真的有必要为此使用lib函数吗？

一个简单的方法——我没有看到任何更有效的方法——选择第一个数字并计算它，只要它按顺序出现。

如果出现另一个数字，则一直数到另一个数字出现，然后将最后一个的频率与刚刚计数的频率进行比较，始终保持频率最高的一个，并这样做直到到达列表的末尾- - 或者直到您可以确认，鉴于列表的大小以及您在列表中的位置，在序列中，没有任何数字比您已经拥有的最频繁的数字更频繁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:43:23.033

我认为没有标准函数可以为您执行此操作，但您可以为它编写一个相对简单的算法：

```
int max_len = -1;
int best_index = -1;
int count = 0;
vector<int> data;
int value;
// Set the data and value here...
for (int i = 0 ; i != data.size() ; i++) {
    if (data[i] == value) {
        count++;
    } else {
        if (count > max_len) {
            best_index = i - count;
            max_len = count;
        }
        count = 0;
    }
}
if (count > max_len) {
    best_index = i - count;
    max_len = count;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T00:37:03.347

我认为你不会比在遍历每个成员时对向量中的运行进行蛮力计数更好。

# cocoa - 将此字符串转换为日期的正确日期格式是什么？

> ID：13436231
> 
> 赞同：2
> 
> 时间：2012-11-18T00:23:18.480
> 
> 标签：cocoa, nsdateformatter

我正在使用一个 JSON API，它返回日期，如下所示：`2012-11-13T17:32Z`. `formatString`关联`NSDateFormatter`实例的正确值是多少？

编辑：

我试过了`@"yyyy-MM-dd'T'hh':'mm'Z'"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:31:29.677

您不需要冒号周围的引号，并且您应该在几个小时内使用大写的 H。

# ruby-on-rails - 使用 Devise 和 Omniauth 编辑用户

> ID：13436232
> 
> 赞同：13
> 
> 时间：2012-11-18T00:23:27.093
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, omniauth

我正在通过 Railscast 实现 Devise 和 OmniAuth（以及 Devise[文档](https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview)）——目前，我有一个网站，访问者可以使用他们的 Facebook 帐户或填写表格进行注册。

但是，当通过 OmniAuth 注册的用户尝试编辑他们的个人资料时，我遇到了麻烦。Devise 在用户提交个人资料更改时会查找用户的当前密码，但使用 facebook 登录的用户不知道他们的密码（它们在用户模型中自动设置）：

```
 def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first
    unless user
      user = User.create(first_name:auth.extra.raw_info.first_name,
                         last_name:auth.extra.raw_info.last_name,
                           provider:auth.provider,
                           uid:auth.uid,
                           email:auth.info.email,
                           password:Devise.friendly_token[0,20]
                           )
    end
    user
  end 
```

当用户编辑他的信息时，如果他通过 OmniAuth 设置他的帐户，则应用程序不应要求密码确认。本教程建议使用方便的 password_required？方法将帮助我实现这个结果。具体来说，将这个方法添加到用户模型意味着它应该只在用户没有通过 OmniAuth 注册时才返回 true（在这种情况下提供者属性将为 nil）：

```
def password_required?
  super && provider.blank?
end 
```

因此，一段代码如下：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>
    <%= render :partial => "essential_user_info_inputs", :locals => { :f => f } %>
    <%= render :partial => "inessential_user_info_inputs", :locals => { :f => f } %>
    <% if f.object.password_required? %> 
        <%= render :partial => "password_inputs", :locals => { :f => f } %>
        <%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
        <%= f.password_field :current_password %>
    <% end %>
  <%= f.submit "Update" %>
<% end %> 
```

理论上只会在需要时显示密码输入。它还表明，Devise 内置了逻辑，即 OmniAuth 用户不需要使用密码来编辑他们的帐户。我不知道这是否属实，但教程有点让它看起来像那样。但是当 OmniAuth 用户尝试编辑他的帐户时，我得到“当前密码不能为空”。非 OmniAuth 用户也是如此（这是有道理的，因为密码字段也不会显示在这些用户的编辑页面上）。

一些闲逛确认password_required？当用户通过 OmniAuth 注册和通过站点的常规用户注册时，方法返回 false。即使我将它更改为简单地运行超类方法，它也会返回 false。

关于 password_required 方法发生了什么的任何想法？我在任何地方都找不到任何关于它的信息，但我觉得这就是现在让事情变得糟糕的原因。

### 更新：

这现在可以工作，但没有使用 Railscast 中概述的方法，它依赖于 requires_password？方法，一个我仍然一无所知的话题。相反，我按照[此处](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-a-password)的建议实施了[此处](https://stackoverflow.com/questions/13436232/editing-users-with-devise-and-omniauth#comment18368874_13436232)概述的解决方案。所以我现在只需要密码来使用代码更新非 OmniAuth 帐户：

```
class Users::RegistrationsController < Devise::RegistrationsController
def update
    @user = User.find(current_user.id)
    email_changed = @user.email != params[:user][:email]
    is_facebook_account = !@user.provider.blank?

    successfully_updated = if !is_facebook_account
      @user.update_with_password(params[:user])
    else
      @user.update_without_password(params[:user])
    end

    if successfully_updated
      # Sign in the user bypassing validation in case his password changed
      sign_in @user, :bypass => true
      redirect_to root_path
    else
      render "edit"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-12-23T05:55:08.917

最简单的方法是在你的`RegistrationsController`. 这是通过设计他们自己的控制器实现来建议的：

```
 # By default we want to require a password checks on update.
  # You can overwrite this method in your own RegistrationsController.
  def update_resource(resource, params)
    resource.update_with_password(params)
  end 
```

所以解决方案是在你自己的控制器中覆盖这个方法，如下所示：

```
class Users::RegistrationsController < Devise::RegistrationsController

  # Overwrite update_resource to let users to update their user without giving their password
  def update_resource(resource, params)
    if current_user.provider == "facebook"
      params.delete("current_password")
      resource.update_without_password(params)
    else
      resource.update_with_password(params)
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:17:33.070

我在下面的链接中添加了更新，其中包括我对 Devise/OmniAuth 更改用户配置文件/密码问题的解决方案，并收集了一些有用的链接：

[stackoverflow - 允许用户编辑帐户而不在设计中保存密码](https://stackoverflow.com/questions/8785290/allowing-users-to-edit-accounts-without-saving-passwords-in-devise-passing-con/15346992#15346992)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T00:31:52.997

我在某个地方看到过这个。

```
 def update
    params[:user].delete(:current_password)
    params[:user].delete(:password)
    params[:user].delete(:password_confirmation)
    if current_user.update_without_password(params[:user])
      redirect_to somewhere_wicked_path, notice => "You rock"
    else
      render 'edit', :alert => 'you roll'
    end
end 
```

在控制器的更新方法中使用类似的东西。很确定该方法也在设计中。

# mysql - sql查询查找至少有2种帐户的用户

> ID：13436234
> 
> 赞同：1
> 
> 时间：2012-11-18T00:23:38.293
> 
> 标签：mysql, sql, sqlplus

我是关系 sql 的新手。我试图找出一个查询来返回拥有多种类型帐户的客户的姓名。

顾客：

```
+------------+--------------+ 
| cid        | Name         | 
+------------+--------------+ 
| 1          | Bob          |
| 2          | John         | 
| 3          | Jane         | 
+------------+--------------+ 
```

帐户：

```
+------------+--------------+ 
| aid        | type         | 
+------------+--------------+ 
| 1          | Checking     |
| 2          | Saving       | 
| 3          | CD           | 
+------------+--------------+ 
```

交易：

```
+------------+--------------+--------------+ 
| tid        | cid          | aid          | 
+------------+--------------+--------------+ 
| 1          | 1            | 1            | 
| 2          | 2            | 1            | 
| 3          | 1            | 2            | 
| 4          | 2            | 3            | 
| 5          | 3            | 1            | 
+------------+--------------+--------------+ 
```

对于这些表，查询应该返回 Bob 和 John。我在编写这样的查询时遇到了一些麻烦。更具体地说，我如何计算一个客户有多少个账户，如果账户不同，我如何在不向表中添加新列的情况下进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:53:18.483

好的，这似乎适用于我的测试数据结构的 SQL Fiddle。使用您的真实数据结构进行尝试，看看它是否为您提供了您正在寻找的东西。

```
SELECT name FROM customers c WHERE EXISTS(
  SELECT DISTINCT aid FROM transactions
  WHERE cid = c.cid
  HAVING COUNT(DISTINCT aid)>1
) 
```

# database - 哈希完全外连接如何工作？

> ID：13436236
> 
> 赞同：2
> 
> 时间：2012-11-18T00:24:00.337
> 
> 标签：database, join, hash, outer-join

我知道哈希左外连接的算法是在右表上构建一个哈希表，然后遍历左表并在哈希表中搜索是否有匹配项，但是完整的外连接如何工作？扫描完左表中的值后，您仍然需要一种方法来获取右表中左侧没有匹配项的元组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:33:17.453

在遍历探测记录时，您会记录哪些正确的元组在构建表中找到了匹配项。您只需将每个匹配的布尔值设置为 true。作为算法的最后一步，您扫描构建表并输出之前不匹配的所有元组。

据我所知，RDBMS 中没有使用另一种策略：构建左右元组的组合哈希表。将该表视为从哈希键到左元组列表和右元组列表的映射。通过遍历两个输入表将所有元组添加到哈希表来构建该表。在使用完所有元组之后，遍历哈希表一次并相应地输出等式组（所有左元组或所有右元组或等式组中所有左元组和所有右元组的叉积）。

后一种算法非常适合内存中的工作负载（例如在客户端应用程序中）。前者适用于极大（或不可预测）的大探针输入，因此 RDBMS 使用那个。

# r - 如何定义导出包中的哪些变量或函数

> ID：13436238
> 
> 赞同：6
> 
> 时间：2012-11-18T00:24:13.393
> 
> 标签：r, namespaces, export, package, devtools

我的 R 包使用内部变量`x`。如果我加载包（我只尝试过使用`devtools::load_all`），则`x`不会出现在`ls()`列表中，但它确实有一个值。我怎样才能避免这种情况？

我很满意用户能够使用 访问变量`myPackage::x`，但不简单`x`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T00:57:26.667

该`load_all`函数有一个`export_all`参数。

从`?load_all`

> 如果为 TRUE（默认值），则导出所有对象。如果为 FALSE，则仅导出在 NAMESPACE 文件中列为导出的对象。

因此，请尝试`export_all=FALSE`在您的`load_all`通话中使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T00:30:43.623

尝试先构建包，并检查问题是否仍然存在。包中的导出在`NAMESPACE`文件中定义。使用时`devtools::load_all`，不会加载命名空间（请参见[此处](http://lists.r-forge.r-project.org/pipermail/rcpp-devel/2012-March/003601.html)）。[在手册编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html#Package-namespaces)中阅读有关此内容的更多信息并构建一个包。

您可能在 NAMESPACE 文件中使用了默认导出模式。检查它在你的包中，如果它看起来像这样：

```
exportPattern("^[^\\.]") 
```

然后包从命名空间中导出不以点开头的所有内容。因此，您要么调用它`.x`，要么将其更改`exportPattern()`为例如...

```
export(myfun1, myfun2) 
```

导出函数`myfun1`并`myfun2`从包中导出。通过明确定义要导出的内容，您可以避免在不需要时出现可用的内容。

# c# - wpf问题中的自定义对话框

> ID：13436244
> 
> 赞同：0
> 
> 时间：2012-11-18T00:25:40.780
> 
> 标签：c#, .net, wpf, modal-dialog

我正在使用以下代码调用我的自定义对话框窗口：

```
GUI.SLDialog sd = new GUI.SLDialog();
if (sd.ShowDialog() == false)
{
    return;
} 
```

但是 sd.ShowDialog() 总是什么都不返回（我认为），因为函数中断了，但是`return;`没有到达航点。

当我添加到按钮时，对话框会自动关闭：

```
this.DialogResult = false;//or true 
```

有人知道我在做什么错吗？在此先感谢您的帮助。
甲烷

@edit 这是我的 SLDialog：xaml：[http](http://wklej.org/hash/9fb67fb0c7c/) : //wklej.org/hash/9fb67fb0c7c/cs： [http ://wklej.org/hash/16e3ccc6c0d/](http://wklej.org/hash/16e3ccc6c0d/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:10:29.280

除非您发布对话框的代码，否则我认为我不能在这里告诉您太多信息，但同时我确实有一个建议。

既然您已经对标准对话框不满意，而且自定义显然是一种选择，为什么不朝着人们所期望的方向发展呢？为什么不创建一个覆盖其余 UI 并从背景中模糊所有内容的用户控件，而不是您的标准对话框？很像您可能在网页上看到的 jquery 对话框。

模态更容易控制，因为它只是用一个半透明的矩形覆盖整个应用程序窗口，然后让对话框窗口以你想要的方式出现。

只是一个建议。

# php - 如何将任何对 swf 文件的直接请求重定向到该 swf 对象的包装页面

> ID：13436247
> 
> 赞同：0
> 
> 时间：2012-11-18T00:26:04.430
> 
> 标签：php, html, apache, mod-rewrite

所以我想要做的是，如果您直接请求 mysite.com/object123.swf，我想将其重定向到 mysite.com/wrapper.php?name=object123 并将该 swf 对象嵌入到页面中。我正在使用 php 和 apache。我遇到的问题是我最终得到了一个重定向循环，其中嵌入的 swf 对象本身重定向到 mysite.com/wrapper.php?name=object123。那么，当我将它嵌入到 wrapper.php 页面时，如何让 swf 对象正常显示呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:30:03.813

这里的问题是：你想达到什么目标？

如果您希望直接链接在其中包含 SWF 对象，则必须添加重写条件以查看引荐来源网址是否为空。但是请注意，这**不是一个受信任的变量**，因为浏览器不必发送它。

```
RewriteCond %{HTTP_REFERER} !^$ 
```

是你所追求的条件。这个小部分，放在 RewriteRule 之前，只有在满足条件时才会触发重写规则——这里，referrer 是空的。因此，直接链接将被重写，而插件加载将有一个引用者（它来自的页面 URL），因此会通过。

# c++ - C++ char* 到 int 错误

> ID：13436248
> 
> 赞同：0
> 
> 时间：2012-11-18T00:26:11.667
> 
> 标签：c++, char, int

我想接受一个命令行参数（它将是一个大于零的整数）并将其用作函数中的整数参数（以决定使用函数的哪一部分）。

```
double func(double x, double y, double z, int n) {
  if (n==1) { return 1; } 
  if (n==2) { return 2; }
  // etc
}
int main (int argc, char *argv[]) {
  int n = argv[1];
  // etc, later I call func(x,y,z,n) with this definition of n
} 
```

当我尝试编译时，我收到一些警告：

```
warning: invalid conversion from ‘char*’ to ‘int’
warning: initializing argument 4 of ‘double func(double, double, double, int)’ 
```

我想我明白它为什么会发生，我只是不知道如何解决它。到目前为止，我发现谷歌搜索没有任何帮助。我是 C++ 的新手，任何能指引我正确方向的信息都会很棒。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:48:44.130

您可以使用`std::istringstream`来转换数字：

```
int main(int ac, char * av[]) {
    int av1;
    if (2 <= ac
        && std::istringstream(av[1]) >> av1) {
        do_something_with(av1);
    }
    else {
        report_error();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:32:00.703

`argv[1]`是类型`char*`。[使用strtol](http://www.kernel.org/doc/man-pages/online/pages/man3/strtol.3.html)将其转换为整数：

```
char *ptr;
int n = strtol(argv[1], ptr, 10);
/* Error checking */ 
```

# c - 使用带有分解的 OpenMP 在并行 GMP-Chudnovsky 中的核心角色

> ID：13436249
> 
> 赞同：0
> 
> 时间：2012-11-18T00:26:22.793
> 
> 标签：c, parallel-processing, gmp, pi

我最近发现了 Chudnovsky 计算 pi 算法的实现：[Parallel GMP-Chudnovsky using OpenMP with factorization](http://gmplib.org/list-archives/gmp-discuss/2008-November/003444.html)

我使用默认的 1 core 选项编译了从 1o^3 到 10^8 的各种数字。但是，我注意到随着内核数量的增加，计算结果所需的时间对于 cpu 和挂钟时间都需要更长的时间。为什么更多的核心会增加计算所需的时间？它不应该加快计算速度并带来更好的性能吗？

这是一个示例输出：

```
~/Desktop$ ./pgmp-chudnovsky 7500000 0 1
#terms=528852, depth=21, cores=1
sieve   cputime =  0.120
...................................................
bs      cputime = 30.300  wallclock = 30.313
gcd     cputime =  6.380
div     cputime =  3.800
sqrt    cputime =  2.140
mul     cputime =  1.420
total   cputime = 37.800  wallclock = 37.838
   P size=10919784 digits (1.455971)
   Q size=10919777 digits (1.455970)

~/Desktop$ ./pgmp-chudnovsky 7500000 0 2
#terms=528852, depth=21, cores=2
sieve   cputime =  0.120
...................................................
bs      cputime = 30.890  wallclock = 17.661
gcd     cputime = 12.930
div     cputime =  3.790
sqrt    cputime =  2.130
mul     cputime =  1.420
total   cputime = 38.380  wallclock = 25.153
   P size=10919611 digits (1.455948)
   Q size=10919605 digits (1.455947)

~/Desktop$ ./pgmp-chudnovsky 7500000 0 3
#terms=528852, depth=21, cores=3
sieve   cputime =  0.120
...................................................
bs      cputime = 31.400  wallclock = 14.266
gcd     cputime = 21.640
div     cputime =  3.810
sqrt    cputime =  2.130
mul     cputime =  1.410
total   cputime = 38.900  wallclock = 21.784
   P size=10726889 digits (1.430252)
   Q size=10726883 digits (1.430251)

~/Desktop$ ./pgmp-chudnovsky 7500000 0 4
#terms=528852, depth=21, cores=4
sieve   cputime =  0.130
...................................................
bs      cputime = 32.480  wallclock = 11.771
gcd     cputime = 27.770
div     cputime =  3.800
sqrt    cputime =  2.130
mul     cputime =  1.410
total   cputime = 39.980  wallclock = 19.284
   P size=10920859 digits (1.456115)
   Q size=10920852 digits (1.456114)

~/Desktop$ ./pgmp-chudnovsky 7500000 0 5
#terms=528852, depth=21, cores=5
sieve   cputime =  0.130
...................................................
bs      cputime = 33.010  wallclock = 15.496
gcd     cputime = 28.500
div     cputime =  3.790
sqrt    cputime =  2.130
mul     cputime =  1.420
total   cputime = 40.510  wallclock = 23.000
   P size=10605102 digits (1.414014)
   Q size=10605096 digits (1.414013)

~/Desktop$ ./pgmp-chudnovsky 7500000 0 10
#terms=528852, depth=21, cores=10
sieve   cputime =  0.130
...................................................
bs      cputime = 33.210  wallclock = 14.311
gcd     cputime = 29.640
div     cputime =  3.780
sqrt    cputime =  2.140
mul     cputime =  1.420
total   cputime = 40.720  wallclock = 21.822
   P size=10607304 digits (1.414307)
   Q size=10607297 digits (1.414306)

~/Desktop$ ./pgmp-chudnovsky 7500000 0 100
#terms=528852, depth=21, cores=100
sieve   cputime =  0.120
...................................................
bs      cputime = 33.080  wallclock = 13.412
gcd     cputime = 17.630
div     cputime =  3.780
sqrt    cputime =  2.130
mul     cputime =  1.420
total   cputime = 40.570  wallclock = 20.912
   P size=12169347 digits (1.622580)
   Q size=12169341 digits (1.622579)

~/Desktop$ ./pgmp-chudnovsky 7500000 0 200
#terms=528852, depth=21, cores=200
sieve   cputime =  0.130
...................................................
bs      cputime = 34.080  wallclock = 13.942
gcd     cputime = 15.620
div     cputime =  3.760
sqrt    cputime =  2.110
mul     cputime =  1.420
total   cputime = 41.530  wallclock = 21.401
   P size=12642316 digits (1.685642)
   Q size=12642309 digits (1.685641) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:29:30.630

从结果来看，您有一个 4 核系统。在此之后增加使用的线程数会*损害*性能，因为您获得了线程上下文切换的开销，而没有更多的同步工作被完成。

```
Cores    Total Time
1        37.838
2        25.153
3        21.784
4        19.284    *Best*
5        23.000
10       21.822
100      20.912 
```

# css - 在 Chrome 中调整视频的宽度以消除黑条

> ID：13436263
> 
> 赞同：0
> 
> 时间：2012-11-18T00:28:23.243
> 
> 标签：css, google-chrome, video, html5-video

使用 VideoJS 嵌入视频，由于控制器的高度，谷歌浏览器中的电影侧面出现了黑条。其他浏览器不会出现此问题。

想要隐藏控制器，除了翻转，或者找到调整宽度/高度的方法。当我通过 CSS 调整宽度或高度时，它会在其他默认隐藏控制器的浏览器中导致间距问题。

截屏： ![在此处输入图像描述](../Images/1fd482494571446997bb2e494413864d.png)

HTML 摘录：

```
 <div id="movieLayer">

<div id="movie">
<video id="abacus_holiday_video" class="video-js vjs-holiday-skin" loop autoplay controls
  preload="auto" width="640" height="360" poster="my_video_poster.png"
  data-setup="{  }" style=" width: 640px; height:360px;">

<source src="abacus_holiday.mp4" type='video/mp4'>

</video></div>

</div> 
```

CSS 摘录：

```
#movieLayer {
    position: relative;
    width:  640px !important;
    height: 360px !important;
    margin: 80px auto 0px;
    border: 10px solid #fff;
    -webkit-box-shadow:  5px 5px 5px 0px rgba(0, 0, 0, .1);
    box-shadow:  5px 5px 5px 0px rgba(0, 0, 0, .1);
}

#movie {
    position: relative;
    width:  640px;
    background-color: #000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:52:32.043

该问题与代码或视频无关，而是与我在 Chrome 中安装的 DivX 插件有关。禁用它与其他一些问题一起解决了这个问题。

# java - Java 中操作数排序的重要性 ==

> ID：13436271
> 
> 赞同：2
> 
> 时间：2012-11-18T00:28:53.320
> 
> 标签：java

很抱歉一直问基础知识，但我不明白这个简单的代码以及为什么第一个 print 语句通过编译器 ok 甚至打印为 true，但第二个 print 语句没有编译，给我一个“无法比较的类型”错误：

```
int in1 = 38;
Number Nn1 = in1;
System.out.println(in1 == Nn1);
System.out.println(Nn1 == in1); 
```

我不期待这个结果，我认为 == 是对称的很标准？

我正在使用 javac 1.6.0_26 和 NetBeans 但得到相同的结果，第一个 println 语句编译没有问题，第二个没有..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:27:38.947

我相信，根据 Java 语言规范，任何一种方式都不应该编译。

首先重要的是要了解**自动（取消）装箱仅适用于满足某些条件的表达式，并且仅适用于特定的包装类**（整数、长整数等，而不是数字）。

现在，在 == 的情况下，当**一个是 [primitive] 数字类型而另一个**根据规则可转换为 [primitive] 数字类型 (JLS 15.12.1) 时，将特别应用自动拆箱。正如我们刚才所说，“根据规则”，**Number 不能转换为数字原始类型**。

例如，不应将 int 转换为 Integer 然后进行参考比较：**自动装箱未指定应用于 == 参考比较**(JLS 15.21.3)。

因此，如果您的编译器允许编译引用的代码，**则它不遵守 Java 语言规范**。

这种行为是有意义的，因为要执行数字比较，**编译器需要知道**两个操作数的实际特定类型才能**执行数字提升**。你可能认为你可以比较一个数字和一个整数，编译器应该只在数字上调用 .intValue() 。但这是不合适的，因为如果原始数字类型实际上是浮点数，那么正确的比较实际上是首先将整数转换为浮点数，而不是反过来。换句话说，**对于 Number，编译器没有所有信息来正确执行与原语的数字比较**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:34:36.543

我的编译器（`jdk1.7.0_03`在 Windows 上）说这两行都不正确：

![在此处输入图像描述](../Images/cc91270a0882a5973bd9c9905b0e19e1.png)

> 运算符 == 不能应用于`int`and`java.lang.Number`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T00:57:49.443

当您检查 an`int`和 an之间的相等性`Integer`时，会发生拆箱。事实上，编译器知道`Integer`操作数只包含`int`. 这就像一个线索。

然而，`Number`尽管由`Integer`（和其他人）实现，但过于通用，编译器需要做太多工作来提取原始原始类型以操作拆箱。

因此，编译器会抱怨它并期望您使用更细粒度的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T00:48:39.993

这两行都是编译错误。如果不是，则 NetBeans 中存在错误。

如果更改`Number`为`Integer`，则两行都会编译。

```
int in1 = 38;
Integer Nn1 = in1; // Changed to Integer
System.out.println(in1 == Nn1); // compiles
System.out.println(Nn1 == in1); // compiles 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T01:04:50.873

因为您将值引用类型值与原始值进行比较，所以它可以工作的唯一方法是自动取消装箱转换。但是这种类型的转换似乎没有在[Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)中指定。

它可能不是对称的，因为它根本不可能。也许是编译器错误。

# php - 从 javascript 或 php 中的 url 读取 vcs

> ID：13436272
> 
> 赞同：0
> 
> 时间：2012-11-18T00:28:53.423
> 
> 标签：php, javascript

我正在尝试读取像这样的 vcs 文件：

[http://ziggi.bgu.co.il/outlook.php?user=sample@email.com](http://ziggi.bgu.co.il/outlook.php?user=sample@email.com) 如果你点击那个链接，它会下载一个 vcs 文件，然后如果你用记事本打开它，你会得到类似的东西：

```
VERSION:2.0
PRODID:WebSched
METHOD:PUBLISH
BEGIN:VEVENT 
```

...

我想要的是能够从该 url 获取 thouse 行（我不持有该域），并逐行阅读它们。我需要它在 javascript 或 php 代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:35:18.397

由于跨域限制，您将无法在纯 JavaScript 中轻松做到这一点。但是，它在 PHP 中是可行的。

您的服务器很可能启用了 fopen 包装器，它允许您在常用文件功能上使用流包装器（http、ftp、ssh 等）。file() 特别是返回文件中的行数组。

将两者结合在一起：

```
 $arrayOfLines = file("http://ziggi.bgu.co.il/outlook.php?user=yoav.hops@gmail.com"); 
```

您的 $arrayOfLines 突然包含文件中的所有行，您现在可以随意迭代它们！但是，在您执行此操作之前，请确保检查 $arrayOfLines 是一个数组 - 因为如果文件加载失败，它将不是一个数组。

# meteor - Meteor._atFlush 的异常：未定义

> ID：13436275
> 
> 赞同：1
> 
> 时间：2012-11-18T00:29:29.537
> 
> 标签：meteor

我正在发现 Meteor，一切运行良好。

我现在在客户端控制台中有一个错误：来自 Meteor._atFlush 的异常：未定义

该应用程序运行良好...我无法找到此错误何时出现以及为什么...

您知道此类错误的根源吗？

编辑：这些行使这个错误出现：

```
Template.description.rendered = function() {
CKEDITOR.inlineAll();
} 
```

我不知道流星是如何在内部工作的，无法理解为什么会出现这个错误。如果有人可以帮助我...

在此先感谢您的帮助

# objective-c - Objective-C 中的类别

> ID：13436277
> 
> 赞同：0
> 
> 时间：2012-11-18T00:29:38.243
> 
> 标签：objective-c, objective-c-category

我在 NSString 上写了以下类别：

```
 @interface NSString (Checks)

 -(BOOL) isUppercase;
 -(BOOL) containsStr: (NSString *) str;

 @end;

 @implementation NSString (Checks)

-(BOOL) isUppercase
 { return [[NSCharacterSet uppercaseLetterCharacterSet] characterIsMember:[self         characterAtIndex:0]]
 }
 -(BOOL) containstStr: (NSString *) str
 { return [self rangeOfString:str].location != NSNotFound;
 }
@end 
```

我缺少方法声明的上下文，预期的方法主体，@end 必须出现在 .h 文件中的 Objective C 上下文错误中，这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:31:50.687

后面不应该有分号`@end`。还要确保导入 Foundation 框架：

```
#import <Foundation/Foundation.h>

@interface NSString (Checks)

- (BOOL)isUppercase;
- (BOOL)containsStr:(NSString *)str;

@end

#import "NSString+Checks.h"  // or whatever your .h is called.

@implementation NSString (Checks)

- (BOOL)isUppercase {
    return [[NSCharacterSet uppercaseLetterCharacterSet] 
           characterIsMember:[self characterAtIndex:0]];
}

- (BOOL)containsStr:(NSString *)str {
    return [self rangeOfString:str].location != NSNotFound;
}

@end 
```

# r - 将列名分配给第一列 R 表

> ID：13436278
> 
> 赞同：2
> 
> 时间：2012-11-18T00:29:51.337
> 
> 标签：r, export-to-csv

我想从**R**中保存下表：

```
x <- rnorm(100)
y <- rnorm(100)
z <- rnorm(100)
model <- z ~ x + y
results <- glm(model)
pe <- results$coefficients
vc <- vcov(results)
se <- sqrt(diag(vc))
results.table <- round(cbind(pe, se),3)
rownames(results.table) <- c("Intercept", "X-Estimate", "Y-Estimate")
colnames(results.table) <- c("Parameter", "pe", "Se")
write.table(results.table,file="test.csv",row.names=T,col.names=NA,sep=",") 
```

但是，我无法为行名提供列名：

```
colnames(results.table) <- c("pe", "Se")     # works
colnames(results.table) <- c("Param", "pe", "Se")    # Doesn't work, incorrect length 
```

更新：答案

根据评论，这是不可能的。如果您有兴趣，这是一种迂回的方式：

```
rows <- c("Intercept", "X-Estimate", "Y-Estimate")
results.table <- round(cbind(pe, se),3)
results.table <- cbind(rows,results.table)
colnames(results.table) <- c("Parameter", "pe", "Se")
write.table(results.table,file="test.csv",row.names=F,sep=",",quote=F) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:23:02.000

比您在问题的“更新”中建议的要短一点：

```
write.csv(cbind(Parameter = rownames(results.table), results.table),
          file = "test.csv", row.names = FALSE) 
```

# ios - 在 MonoTouch 中处理多个屏幕之间来回滑动的架构方法

> ID：13436281
> 
> 赞同：0
> 
> 时间：2012-11-18T00:30:08.820
> 
> 标签：ios, xamarin.ios

我正在为 iOS 开发 MonoTouch 应用程序。

该功能的很大一部分是用户需要在数据页面（屏幕）之间连续滑动并来回切换。

我需要记住内存消耗，所以我的想法是我一次只能有几个屏幕在内存中。例如，延迟加载仅提前 1 个屏幕，所以当用户滑动到它时它是可用的。（或滑动时延迟加载）。

当用户滑回他们所在的上一页时，我需要确保该页面仍在内存中并且没有离开内存。落后的页面，一旦用户向后滑动，我就可以懒惰地重新加载。因此，如果用户有一段时间没有查看屏幕，我将需要一种机制将屏幕发送到 GC，并在用户滑动到该页面时自动加载它们。

我正在考虑创建一个对象列表，其中每个对象都有关于在视图上显示什么的信息以及对实际视图本身的引用。如果此引用为空，我知道要创建视图。如果引用存在且未处理，我可以向用户显示现有引用。当用户左右滑动时，我可以转到列表中的下一个（或上一个）项目并执行相同的操作。检查它是否有视图引用并加载该视图，或者创建它。

性能是这里的关键，因为用户可能会在数百个（或更多）屏幕上滑动。

关于速度和内存管理的最佳架构有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:47:51.973

如果可能，关键是重用视图。在我的应用程序中，我向左/向右滑动类似于我认为你想要的，我只需要创建最多三个视图：一个用于“屏幕上”，然后是右/左屏幕外（尽管在需要之前不会创建左）。

您可以通过在线程中尽可能多地与您的页面构建相关并且只需在主线程上更新 UI 来获得非常有创意的东西。此外，在加载新数据集之前，我肯定首先关注即将可见的页面，然后再移动到右侧不可见页面，如果有意义，则离开不可见页面。当用户滑动到新页面时，视图会被重用并在更大的 UIScrollView 内容区域中移动。

# clojure - 安装 Leiningen 以与 Clojure 一起使用

> ID：13436286
> 
> 赞同：15
> 
> 时间：2012-11-18T00:30:55.403
> 
> 标签：clojure, leiningen

我正在尝试在本地计算机上安装 Leiningen 以运行 Clojure，但我似乎无法获得最新版本。

我在这里按照 github 上的说明进行操作：[https ://github.com/technomancy/leiningen](https://github.com/technomancy/leiningen)

我可以将脚本放在我的路径中，并让 Lein 下载，但由于某种原因，当我运行时，`lein version`我不断收到

```
Leiningen 1.7.1 on Java 1.6.0_33 Java HotSpot(TM) 64-Bit Server VM 
```

我曾多次尝试删除并重新安装 Leiningen，但没有任何变化。我是否需要删除某些文件，或者有什么方法可以切换版本？`lein upgrade`似乎什么也没做。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-05T14:08:20.973

一种更简单的升级方法（如果使用自制软件）是使用自制软件升级并指定版本。

1.  显示可用版本

    ```
     brew info leiningen
     leiningen: stable 1.7.1, devel 2.0.0-preview10, HEAD 
    ```

2.  安装或升级到特定版本

    ```
    brew upgrade --devel leiningen
    ...
    /usr/local/Cellar/leiningen/2.0.0-preview10: 5 files, 80K, built in 10 seconds 
    ```

3.  正常使用 lein

    ```
    lein version
    Leiningen 2.0.0-preview10 on Java 1.7.0_06 Java HotSpot(TM) 64-Bit Server VM 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T21:49:28.727

我发现了这个问题。我之前曾尝试通过 Homebrew 安装 Leiningen，而 Homebrew lein 命令不知何故取代了我通过脚本安装的新版本中的 lein 命令。

我运行了命令：

```
brew uninstall leiningen 
```

然后我通过新的 lein 脚本重新安装了 lein 以确保安全，首先删除以下文件和文件夹：

```
~/.lein
~/.m2
~/bin/lein 
```

现在，当我跑步时，`lein version`我得到：

```
Leiningen 2.0.0-preview10 on Java 1.6.0_33 Java HotSpot(TM) 64-Bit Server VM 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T09:41:46.237

检查本指南：[https ://github.com/technomancy/leiningen/wiki/Upgrading](https://github.com/technomancy/leiningen/wiki/Upgrading)

诀窍是从 github repo 上的预览分支下载脚本：

```
# Make a backup of your previous lein
mv ~/bin/lein ~/bin/lein1
# Download preview version
wget -O ~/bin/lein https://raw.github.com/technomancy/leiningen/preview/bin/lein
# set permissions
chmod 755 ~/bin/lein 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T02:50:40.777

脚本`LEIN_VERSION`顶部有常量。`lein`尝试将其更改为更新的版本（我的是`2.0.0-preview10`），删除 leiningen jar`~/.lein/self-installs/`并`lein self-install`再次运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-18T19:06:12.783

要彻底清除您现有的 Leiningen 安装：

```
rm ~/bin/lein
rm -fr ~/.lein  # Though back up ~/.lein/profiles.clj if you have one.
rm -fr ~/.m2 
```

[然后按照http://leiningen.org/](http://leiningen.org/)上的“如果您想要更新的版本，安装老式方式仍然很容易”说明进行操作。

> 顺便说一句，如果您碰巧有一个 ~/bin/lein2 ，并且不需要任何旧版 lein 1.x（在您的情况下，您不需要），您可以删除该 ~/bin/lein2 文件. 你只想要一个 ~/bin/lein 前进。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T21:46:15.913

有同样的问题确保你更新 brew

```
$brew update 
```

然后

```
$brew install leiningen --devel 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-10T15:22:40.283

[对于想知道如何安装特定版本的 lein 的人来说，一个“简单”的方法是在安装脚本https://github.com/technomancy/leiningen/blob/master/](https://github.com/technomancy/leiningen/blob/master/bin/lein)上查找所需版本的提交[本/莱因](https://github.com/technomancy/leiningen/blob/master/bin/lein)

下载并运行此脚本作为您的`lein`二进制文件，它应该可以正常工作。实际版本的 jar 将被下载到`~/.lein/self-installs`

# c# - 您如何编写一个 Outlook 加载项，每次用户查看项目时在消息框中显示发件人的电子邮件地址？

> ID：13436291
> 
> 赞同：4
> 
> 时间：2012-11-18T00:31:22.933
> 
> 标签：c#, .net, outlook

这是我正在处理的一个更大项目的一部分，但现在我只是想找到一种方法来检索发件人的电子邮件地址，每次用户点击收件箱中的邮件项目及其内容（电子邮件的实际正文）显示在相邻的面板中。

我尝试在过程中编写代码`ItemLoad event handler`，但即使是 MSDN 网站也说作为参数传递的 Item 对象没有初始化其属性，因此调用 (Item as MailItem).SenderEmailAddress 将不起作用。

有人能告诉我怎么做吗？（我使用的是 Outlook 2007）

顺便说一句，以下方法不起作用：

```
public void OnConnection(object application, 
                         Extensibility.ext_ConnectMode connectMode, 
                         object addInInst, 
                         ref System.Array custom)
{
    //this code runs
    applicationObject = (Outlook.Application)application;
    this.applicationObject.Startup += new Microsoft.Office.Interop.Outlook.ApplicationEvents_11_StartupEventHandler(applicationObject_Startup);
}

void applicationObject_Startup()
{
        //this code runs
        this.applicationObject.Explorers.NewExplorer += new Microsoft.Office.Interop.Outlook.ExplorersEvents_NewExplorerEventHandler(Explorers_NewExplorer);
}

void Explorers_NewExplorer(Microsoft.Office.Interop.Outlook.Explorer Explorer)
{
    //This code does not run
    Explorer.SelectionChange += new Microsoft.Office.Interop.Outlook.ExplorerEvents_10_SelectionChangeEventHandler(Explorer_SelectionChange);
}

void Explorer_SelectionChange()
{
    //This code does not run
    //do something
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:40:14.223

我已经有一段时间没有这样做了，但我猜你需要在代表主窗口的[对象上使用该](http://msdn.microsoft.com/en-us/library/office/bb219946%28v=office.12%29.aspx)[`SelectionChange`事件。](http://msdn.microsoft.com/en-us/library/office/bb147654%28v=office.12%29.aspx)[`Explorer`](http://msdn.microsoft.com/en-us/library/office/bb219946%28v=office.12%29.aspx)

在[`Application.Startup`事件](http://msdn.microsoft.com/en-us/library/office/bb147656%28v=office.12%29.aspx)处理程序中，您需要获取[`Explorers`属性，并为](http://msdn.microsoft.com/en-us/library/office/bb220071%28v=office.12%29.aspx)[`NewExplorer`事件](http://msdn.microsoft.com/en-us/library/office/bb147643%28v=office.12%29.aspx)添加一个处理程序，只要用户打开一个新窗口就会触发。

从那里，您可以挂钩新[对象的](http://msdn.microsoft.com/en-us/library/office/bb219946%28v=office.12%29.aspx)[`SelectionChange`事件](http://msdn.microsoft.com/en-us/library/office/bb147654%28v=office.12%29.aspx)，并且在该事件的处理程序中，您将能够通过[属性](http://msdn.microsoft.com/en-us/library/office/bb206694%28v=office.12%29.aspx)获取所选项目。然后，您应该能够获取每个选定项目的发件人电子邮件地址。[`Explorer`](http://msdn.microsoft.com/en-us/library/office/bb219946%28v=office.12%29.aspx)[`Selection`](http://msdn.microsoft.com/en-us/library/office/bb206694%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:04:58.677

我找到了这样做的方法：

```
 public void OnConnection(object application, Extensibility.ext_ConnectMode connectMode, object addInInst, ref System.Array custom)
    {
        applicationObject = (Outlook.Application)application;
        this.applicationObject.ActiveExplorer().SelectionChange += new Microsoft.Office.Interop.Outlook.ExplorerEvents_10_SelectionChangeEventHandler(Explorer_SelectionChange);
    }
    void Explorer_SelectionChange()
    {
        if (applicationObject.ActiveExplorer().Selection.Count == 1)
        {
            Outlook.MailItem item = applicationObject.ActiveExplorer().Selection[1] as Outlook.MailItem;

            if (item != null)
            {
               string address = item.SenderEmailAddress;
               //do something
            }
        }
    } 
```

# c# - 在 Windows 资源管理器中检测文件选择

> ID：13436292
> 
> 赞同：5
> 
> 时间：2012-11-18T00:31:25.540
> 
> 标签：c#, windows, hook, windows-explorer

在 Windows 中，无论是在桌面上还是在 Windows 资源管理器中，我都想检测文件或文件夹被选中（突出显示）的时刻。发生这种情况时，我想显示一个显示文件或文件夹全名的消息框。

如果选择了多个项目，我想显示所有项目。

请注意，我的解决方案必须用 C# 编写。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:20:09.053

看一下这个例子来获取鼠标点击或选择的事件：

[https://stackoverflow.com/questions/7222749/i-created-a-program-to-hide-desktop-icons-on-double-click-of-desktop-but-would-o](https://stackoverflow.com/questions/7222749/i-created-a-program-to-hide-desktop-icons-on-double-click-of-desktop-but-would-o)

加入以下代码，记住添加对 SHDocVW.dll 和 Shell32.dll 的引用，这将返回每个资源管理器中所有选定的项目和文件夹路径。

```
public void GetListOfSelectedFilesAndFolderOfWindowsExplorer()
    {
        string filename;
        ArrayList selected = new ArrayList();
        var shell = new Shell32.Shell();
        //For each explorer
        foreach (SHDocVw.InternetExplorer window in new SHDocVw.ShellWindows())
        {
            filename = Path.GetFileNameWithoutExtension(window.FullName).ToLower();
            if (filename.ToLowerInvariant() == "explorer")
            {
                Shell32.FolderItems items = ((Shell32.IShellFolderViewDual2)window.Document).SelectedItems();
                foreach (Shell32.FolderItem item in items)
                {
                    MessageBox.Show(item.Path.ToString());
                    selected.Add(item.Path);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-16T23:15:26.983

只需在 Renier 的回答中添加一些内容：

*   SHDocVW.dll 和 Shell32.dll 位于文件夹**C:\Windows\System32**
*   如果您在**SHDocVw.ShellWindowsClass()**中遇到错误，只需右键单击解决方案资源管理器上的**SHDocVw**引用，然后选择 Properties 并将 **Embed Interop Types**设置为 false

# perl - perl HTTP::GHTTP 设置传出 ip

> ID：13436297
> 
> 赞同：1
> 
> 时间：2012-11-18T00:31:55.463
> 
> 标签：perl, http, ip

我想动态设置我的[HTTP::GHTTP](http://search.cpan.org/~msergeant/HTTP-GHTTP-1.07/GHTTP.pm)对象的传出 IP，但是我可以在文档的任何地方找到它。有人知道这样做的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:25:32.130

查看[libghttp 源代码](http://ftp.acc.umu.se/pub/gnome/sources/libghttp/1.0/libghttp-1.0.9.tar.gz)，我找不到任何提及本地地址之类的内容。它使用的是普通的 C 套接字库，所以也许你可以在使用它时加入一些东西。

HTTP::GHTTP 和 libghttp 已经有 10 年没有维护过了。libghttp 文档几乎不存在。除非您迫切需要使用该特定的 http 库，否则我建议您查看一个维护的选项。

[LWP::UserAgent](https://metacpan.org/module/LWP%3a%3aUserAgent)和[HTTP::Tiny](https://metacpan.org/module/HTTP%3a%3aTiny)是 Perl 中使用的普通 HTTP 库。 [LWP::UserAgent 和HTTP::Tiny](https://metacpan.org/module/HTTP%3a%3aTiny#new)一样[有一个 local_address 属性](https://metacpan.org/module/LWP%3a%3aUserAgent#CONSTRUCTOR-METHODS)。

# c++ - 链表析构函数

> ID：13436299
> 
> 赞同：1
> 
> 时间：2012-11-18T00:32:09.250
> 
> 标签：c++, memory-management, memory-leaks

我正在研究一个链接列表类。每当我编译时，我都没有收到任何错误或警告。但是，可执行文件停止工作（使用 Windows Dev C++）。我推断问题出在我的析构函数上。

我的理解是使用 delete 关键字为动态创建的对象调用析构函数，或者每当对象超出堆栈上对象的范围时。

我认为当我的堆栈对象（Node* 结果）调用析构函数时会出现我的问题，但不确定。

这是我的头文件：

```
 #ifndef Node_H
    #define Node_H

    class Node{
          int data;
          Node* next;

    public:
           Node(int data);       
           ~Node();
           void insert(int d);
           Node* remove(int d);
           void removeDups(void);
           Node* add(Node* a, Node* b);
           void printOut(void);
    };

    #endif 
```

.cpp 文件的相关部分：

```
 #include <iostream>
    #include "Node.h"

    using namespace std;

    Node::Node(int d){
          data = d;
          next = NULL;
          }

    Node::~Node(){
           Node* n = this;
           Node* delptr;

           while(n->next != NULL){
                         delptr = n;
                         n = n->next;
                         delete delptr;
                         }
           delete n;            

        }

    void Node::insert(int d){

          Node* n = this;
          Node* current = new Node(d);

          while(n->next != NULL){
                  n = n->next;                   
                  }

          n->next = current;
          } 
```

主要的：

```
 int main (void){
        int i = 0;

        Node* root = new Node(111);
        Node* result;

        root->printOut();

        for (i = 0; i < 11; i++){
            root->insert(i);
            } 

        root->printOut();

        delete root; 
        getchar();
        return 0;   
    } 
```

另外，我在 USB 上运行 Dev C++。我的希望是防止我的操作系统出现内存泄漏。那是对的吗？

谢谢

——特灵武

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T00:34:50.310

```
delete delptr; 
```

这肯定是错误的，因为最初`delptr == this`，并且您处于析构函数中（*即已*在释放请求上调用的代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:47:10.640

编写资源管理的关键思想是使概念和职责尽可能简单。

您拥有的是一个根节点，负责删除其所有子节点。您更喜欢负责删除的结构，而不是单个节点。

常见的做法是创建一个 LinkedList 类型/类以及一个 Node 类。这将简化职责。LinkedList 类型将*拥有*节点，并作为所有者负责在其析构函数中删除。

然后 inserts 和 remove / removeDups 将进入 LinkedList 类。该节点可以帮助执行以下功能

```
insert(Node* afterThisNode){  
    this->next = afterThisNode->next;
    afterThisNode->next= this;
} 
```

# c - 如何在 C 中操作文件时提高性能

> ID：13436307
> 
> 赞同：2
> 
> 时间：2012-11-18T00:33:58.847
> 
> 标签：c, machine-learning, data-mining

我已经在 410k 行的大型数据集上实现了朴素贝叶斯算法。现在我的所有记录都得到了正确分类，但问题是程序花了将近一个小时将记录写入相应的文件。改进的最佳方法是什么我的代码的性能。这是下面的代码。这段代码正在将 410k 记录写入相应的文件。谢谢。

```
 fp=fopen("sales_ok_fraud.txt","r");
        while(fgets(line,80,fp)!=NULL) //Reading each line from file to calculate the file size.
        {
                token = strtok(line,",");
                token = strtok(NULL,",");
                token = strtok(NULL,",");
                token = strtok(NULL,",");
                token = strtok(NULL,",");
                token = strtok(NULL,",");
                token1 = strtok(token,"\n");
                memcpy(mystr,&token1[0],strlen(token1)-1);
                mystr[strlen(token1)-1] = '\0';

        if( strcmp(mystr,"ok") == 0 )
            counter_ok++;
        else 
        counter_fraud++;       
    }
    printf("The no. of records with OK label are %f\n",counter_ok);
    printf("The no. of records with FRAUD label are %f\n",counter_fraud);

    prblty_ok = counter_ok/(counter_ok+counter_fraud);
    prblty_fraud = counter_fraud/(counter_ok+counter_fraud);
    printf("The probability of OK records is %f\n",prblty_ok);
    printf("The probability of FRAUD records is %f\n",prblty_fraud);
    fclose(fp);

    fp=fopen("sales_unknwn.txt","r");
    fp2=fopen("sales_unknown_ok_classified.txt","a");
    fp3=fopen("sales_unknown_fraud_classified.txt","a");
    while(fgets(line1,80,fp)!=NULL) //Reading each line from file to calculate the file size.
        {
                unknwn_attr1 = strtok(line1,",");
                unknwn_attr2 = strtok(NULL,",");
                unknwn_attr3 = strtok(NULL,",");
                unknwn_attr4 = strtok(NULL,",");
                unknwn_attr5 = strtok(NULL,",");

        //printf("%s-%s-%s-%s-%s\n",unknwn_attr1,unknwn_attr2,unknwn_attr3,unknwn_attr4,unknwn_attr5);

        fp1=fopen("sales_ok_fraud.txt","r");
        while(fgets(line,80,fp1)!=NULL) //Reading each line from file to calculate the file size.
            {
            ok_fraud_attr1 = strtok(line,",");
                    ok_fraud_attr2 = strtok(NULL,",");
                    ok_fraud_attr3 = strtok(NULL,",");
                    ok_fraud_attr4 = strtok(NULL,",");
                    ok_fraud_attr5 = strtok(NULL,",");
            ok_fraud_attr6 = strtok(NULL,",");
                    memcpy(ok_fraud_attr6_str,&ok_fraud_attr6[0],strlen(ok_fraud_attr6)-2);
                    ok_fraud_attr6_str[strlen(ok_fraud_attr6)-2] = '\0';
            //ok_fraud_attr6[strlen(ok_fraud_attr6)-2] = '\0';      
            //printf("Testing ok_fraud_attr6 - %s-%d\n",ok_fraud_attr6_str,strlen(ok_fraud_attr6_str)); 
            if( strcmp(ok_fraud_attr6_str,"ok") == 0 )
            {
                if( strcmp(unknwn_attr2,ok_fraud_attr2) == 0 )
                counter_ok_attr2++;

                if( strcmp(unknwn_attr3,ok_fraud_attr3) == 0 )
                counter_ok_attr3++;

                if( strcmp(unknwn_attr4,ok_fraud_attr4) == 0 )
                counter_ok_attr4++;

                if( strcmp(unknwn_attr5,ok_fraud_attr5) == 0 )
                counter_ok_attr5++;
            }

                    if( strcmp(ok_fraud_attr6_str,"fraud") == 0 )
                        {
                if( strcmp(unknwn_attr2,ok_fraud_attr2) == 0 )
                counter_fraud_attr2++;

                if( strcmp(unknwn_attr3,ok_fraud_attr3) == 0 )
                counter_fraud_attr3++;

                if( strcmp(unknwn_attr4,ok_fraud_attr4) == 0 )
                counter_fraud_attr4++;

                if( strcmp(unknwn_attr5,ok_fraud_attr5) == 0 )
                counter_fraud_attr5++;
            }
        }
        fclose(fp1);
        if(counter_ok_attr2 == 0)
        prblty_attr2_given_ok = (counter_ok_attr2+arbitrary_value*prblty_ok)/(counter_ok+arbitrary_value);
        else
        prblty_attr2_given_ok = (counter_ok_attr2)/(counter_ok);

        if(counter_ok_attr3 == 0)
        prblty_attr3_given_ok = (counter_ok_attr3+arbitrary_value*prblty_ok)/(counter_ok+arbitrary_value);
        else
                prblty_attr3_given_ok = (counter_ok_attr3)/(counter_ok);

        if(counter_ok_attr4 == 0)
        prblty_attr4_given_ok = (counter_ok_attr4+arbitrary_value*prblty_ok)/(counter_ok+arbitrary_value);
        else
                prblty_attr4_given_ok = (counter_ok_attr4)/(counter_ok);

        if(counter_ok_attr5 == 0)
        prblty_attr5_given_ok = (counter_ok_attr5+arbitrary_value*prblty_ok)/(counter_ok+arbitrary_value);
        else
                prblty_attr5_given_ok = (counter_ok_attr5)/(counter_ok);

        if(counter_fraud_attr2 == 0)
        prblty_attr2_given_fraud = (counter_fraud_attr2+arbitrary_value*prblty_fraud)/(counter_fraud+arbitrary_value);
        else
                prblty_attr2_given_fraud = (counter_fraud_attr2)/(counter_fraud);

        if(counter_fraud_attr3 == 0)
        prblty_attr3_given_fraud = (counter_fraud_attr3+arbitrary_value*prblty_fraud)/(counter_fraud+arbitrary_value);
        else
                prblty_attr3_given_fraud = (counter_fraud_attr3)/(counter_fraud);

        if(counter_fraud_attr4 == 0)
        prblty_attr4_given_fraud = (counter_fraud_attr4+arbitrary_value*prblty_fraud)/(counter_fraud+arbitrary_value);
        else
                prblty_attr4_given_fraud = (counter_fraud_attr4)/(counter_fraud);

        if(counter_fraud_attr5 == 0)
        prblty_attr5_given_fraud = (counter_fraud_attr5+arbitrary_value*prblty_fraud)/(counter_fraud+arbitrary_value);
        else
                prblty_attr5_given_fraud = (counter_fraud_attr5)/(counter_fraud);

        total_prblty_ok = prblty_ok*prblty_attr2_given_ok*prblty_attr3_given_ok*prblty_attr4_given_ok*prblty_attr5_given_ok;
        total_prblty_fraud = prblty_fraud*prblty_attr2_given_fraud*prblty_attr3_given_fraud*prblty_attr4_given_fraud*prblty_attr5_given_fraud;

//      printf("Testing counts for OK - %f - %f - %f - %f\n",counter_ok_attr2,counter_ok_attr3,counter_ok_attr4,counter_ok_attr5);
//      printf("Testing counts for FRAUD - %f - %f - %f - %f\n",counter_fraud_attr2,counter_fraud_attr3,counter_fraud_attr4,counter_fraud_attr5);
//      printf("Testing attribute probabilities for OK - %f - %f - %f - %f\n",prblty_attr2_given_ok,prblty_attr3_given_ok,prblty_attr4_given_ok,prblty_attr5_given_ok);
//      printf("Testing attribute probabilities for FRAUD- %f - %f - %f - %f\n",prblty_attr2_given_fraud,prblty_attr3_given_fraud,prblty_attr4_given_fraud,prblty_attr5_given_fraud);
//      printf("The final probabilities are %f - %f\n",total_prblty_ok,total_prblty_fraud);

        if(total_prblty_ok > total_prblty_fraud)
        {
            fprintf(fp2,"%s,%s,%s,%s,%s,ok\n",unknwn_attr1,unknwn_attr2,unknwn_attr3,unknwn_attr4,unknwn_attr5);
        }   
        else
        {
            fprintf(fp3,"%s,%s,%s,%s,%s,fraud\n",unknwn_attr1,unknwn_attr2,unknwn_attr3,unknwn_attr4,unknwn_attr5);
        }
        counter_ok_attr2=counter_ok_attr3=counter_ok_attr4=counter_ok_attr5=0;
        counter_fraud_attr2=counter_fraud_attr3=counter_fraud_attr4=counter_fraud_attr5=0;
    }

    fclose(fp);
        fclose(fp2);    
        fclose(fp3); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T01:32:21.840

我可以立即看到您可以做的几件事，按照我尝试的顺序：

1.  停止在输出文件上重复打开-写入-关闭、打开-写入-关闭意识形态。他们的名字是固定的和有限的。在这件事开始时适当地打开它们**，然后在完成后冲洗并关闭。**
2.  有几个逻辑结构可以**显着**简化。
3.  你的`strlen()`横冲直撞需要*显着*减少。大多数体面的优化编译器会检测到未更改的源并优化对已知未更改的 char-ptr 的后续调用，所以我会最后执行此操作（但老实说，我仍然会这样做，因为`strlen()`在相同的数据。
4.  **与 OP**对话后添加：您一遍又一遍地重新解析相同的数据文件 (sales_ok_fraud.txt)，一次是针对 sales_unknwn.txt 中的数据行。如果 sales_ok_fraud.txt 可以放入内存，那么 12gB/abg-line-length 是很多不必要的重复解析。加载该数据*一次，*计算其基本统计信息*一次*，并将其中的数据和统计信息用于其余的数据处理。

* * *

**逻辑简化**

您可以特别在一个地方减少*大量工作，改变这一点：*

```
 if(strcmp(unknwn_attr2,ok_fraud_attr2) == 0 && strcmp(ok_fraud_attr6_str,"ok") == 0)
        counter_ok_attr2++;

    if(strcmp(unknwn_attr3,ok_fraud_attr3) == 0 && strcmp(ok_fraud_attr6_str,"ok") == 0)
        counter_ok_attr3++;

    if(strcmp(unknwn_attr4,ok_fraud_attr4) == 0 && strcmp(ok_fraud_attr6_str,"ok") == 0)
        counter_ok_attr4++;

    if(strcmp(unknwn_attr5,ok_fraud_attr5) == 0 && strcmp(ok_fraud_attr6_str,"ok") == 0)
        counter_ok_attr5++;

    if(strcmp(unknwn_attr2,ok_fraud_attr2) == 0 && strcmp(ok_fraud_attr6_str,"fraud") == 0)
        counter_fraud_attr2++;

    if(strcmp(unknwn_attr3,ok_fraud_attr3) == 0 && strcmp(ok_fraud_attr6_str,"fraud") == 0)
        counter_fraud_attr3++;

    if(strcmp(unknwn_attr4,ok_fraud_attr4) == 0 && strcmp(ok_fraud_attr6_str,"fraud") == 0)
        counter_fraud_attr4++;

    if(strcmp(unknwn_attr5,ok_fraud_attr5) == 0 && strcmp(ok_fraud_attr6_str,"fraud") == 0)
        counter_fraud_attr5++; 
```

对此：

```
 if (strcmp(ok_fraud_attr6_str, "ok") == 0)
    {
        if(strcmp(unknwn_attr2,ok_fraud_attr2) == 0)
            counter_ok_attr2++;

        if(strcmp(unknwn_attr3,ok_fraud_attr3) == 0 )
            counter_ok_attr3++;

        if(strcmp(unknwn_attr4,ok_fraud_attr4) == 0)
            counter_ok_attr4++;

        if(strcmp(unknwn_attr5,ok_fraud_attr5) == 0)
            counter_ok_attr5++;
    }
    else if (strcmp(ok_fraud_attr6_str,"fraud") == 0)
    {
        if(strcmp(unknwn_attr2,ok_fraud_attr2) == 0)
            counter_fraud_attr2++;

        if(strcmp(unknwn_attr3,ok_fraud_attr3) == 0)
            counter_fraud_attr3++;

        if(strcmp(unknwn_attr4,ok_fraud_attr4) == 0)
            counter_fraud_attr4++;

        if(strcmp(unknwn_attr5,ok_fraud_attr5) == 0)
            counter_fraud_attr5++;
    } 
```

* * *

**前装式`sales_ok_fraud.txt`**

以下内容依赖于您的`sales_ok_fraud.txt`stats 文件的数据格式的神圣性，同时在验证所述格式时尽可能地迂腐。它分配了一块足够大的内存来保存整个文件加一个字符，以将整个正文视为单个空项字符串。然后通过您之前使用的相同通用算法对该缓冲区进行拼凑。结果将是一个指向固定长度字符指针数组的指针表，然后可以在您当前（并重复）打开、解析、使用和丢弃所有内容的同一位置迭代地使用这些指针。

```
// declare an array of six string pointers
typedef char *OFAttribs[6];

// loads a table consisting of the following format:
//
// str1,str2,str3,str4,str5,str6\n
// str1,str2,str3,str4,str5,str6\n
// ...
// str1,str2,str3,str4,str5,str6
//
// any deviation from the above will cause premature termination of the loop
//  but will return whatever was able to be parsed up to the point of failure.
//  the caller should therefore always `free()` the resulting table and data
//  pointers.

size_t init_ok_fraud_data(const char *fname, OFAttribs **ppTable, char **ppTableData)
{
    if (!fname || !*fname)
        return 0;

    // check file open for thumbs up
    FILE *fp = fopen(fname, "rb");
    if (!fp)
        return 0;

    // allocate enough memory to hold the entire file, plus a terminator
    fseek(fp, 0,  SEEK_END);
    long len = ftell(fp);
    fseek(fp, 0,  SEEK_SET);

    // allocate enough ram for the entire file plus terminator
    OFAttribs *pTable = NULL;
    size_t nTableLen = 0;
    char *pTableData =  malloc((len+1) * sizeof(char));
    if (NULL != pTableData)
    {
        fread(pTableData , len, 1, fp);
        pTableData[len] = 0;
    }

    // no longer need the file
    fclose(fp);

    // prime first token
    char *token = strtok(pTableData, ",");
    while (token)
    {
        // read next line of tokens
        OFAttribs attribs = { NULL };
        for (int i=0;i<4 && token; ++i)
        {
            attribs[i] = token;
            token = strtok(NULL, ",");
        }

        // filled 0..3, set lat token and move on
        if (attribs[3] && token)
        {
            // next-to-last entry set
            attribs[4] = token;

            // line enter is only terminated by newline
            token = strtok(NULL, "\n");
            if (token)
            {
                // proper format. 6 parms, 5 commas, one new-line.
                attribs[5] = token;
                size_t slen = strlen(token);
                if (slen > 0)
                {
                    while (isspace(token[--slen]))
                        token[slen] = 0;
                }

                // make space on the master list for another.
                OFAttribs *tmp = realloc(pTable, sizeof(*tmp) * (nTableLen+1));
                if (NULL != tmp)
                {
                    pTable = tmp;
                    memcpy(pTable + nTableLen++, attribs, sizeof(attribs));
                }
                else
                {   // allocation failure.
                    printf("Error allocating memory for expanding OKFraud data set");
                    exit(EXIT_FAILURE);
                }
            }
            else
            {   // not good.
                printf("Invalid line format detected. Expected ok/fraud\\n");
                break;
            }

            // next token of new line
            token = strtok(NULL, ",");
        }
    }

    // set output variables
    *ppTable = pTable;
    *ppTableData = pTableData;
    return nTableLen;
} 
```

* * *

**把它放在一起**

合并上述所有内容会对您的代码库产生以下影响：

```
// load the ok_fraud table ONCE.
OFAttribs *okfr = NULL;
char *okfr_data = NULL;
size_t okfr_len = init_ok_fraud_data("sales_ok_fraud.txt", &okfr, &okfr_data);

// walk table to determine probabilities of ok and fraud states.
//  note: this really should be done as part of the loader.
for (size_t i=0;i<okfr_len; ++i)
{
    if (0 == strcmp("ok", okfr[i][5]))
        ++counter_ok;
    else
        ++counter_fraud;
}

printf("The no. of records with OK label are %f\n",counter_ok);
printf("The no. of records with FRAUD label are %f\n",counter_fraud);

// compute probabilites for ok and fraud states
prblty_ok = (float)counter_ok/(float)(okfr_len);
prblty_fraud = (float)counter_fraud/(float)(okfr_len);
printf("The probability of OK records is %f\n",prblty_ok);
printf("The probability of FRAUD records is %f\n",prblty_fraud);

fp=fopen("sales_unknwn.txt","r");
fp2=fopen("sales_unknown_ok_classified.txt","w");
fp3=fopen("sales_unknown_fraud_classified.txt","w");
while(fgets(line1,sizeof(line1),fp)!=NULL) //Reading each line from file to calculate the file size.
{
    char *unknwn_attr1 = strtok(line1,",");
    char *unknwn_attr2 = strtok(NULL,",");
    char *unknwn_attr3 = strtok(NULL,",");
    char *unknwn_attr4 = strtok(NULL,",");
    char *unknwn_attr5 = strtok(NULL,",");

    //printf("%s-%s-%s-%s-%s\n",unknwn_attr1,unknwn_attr2,unknwn_attr3,unknwn_attr4,unknwn_attr5);

    for (size_t i=0;i<okfr_len; ++i)
    {

        if( strcmp(okfr[i][5], "ok") == 0 )
        {
            // ok case
            if( strcmp(unknwn_attr2, okfr[i][1]) == 0 )
                counter_ok_attr2++;

            if( strcmp(unknwn_attr3, okfr[i][2]) == 0 )
                counter_ok_attr3++;

            if( strcmp(unknwn_attr4, okfr[i][3]) == 0 )
                counter_ok_attr4++;

            if( strcmp(unknwn_attr5, okfr[i][4]) == 0 )
                counter_ok_attr5++;
        }

        else // fraud case
        {
            if( strcmp(unknwn_attr2, okfr[i][1]) == 0 )
                counter_fraud_attr2++;

            if( strcmp(unknwn_attr3, okfr[i][2]) == 0 )
                counter_fraud_attr3++;

            if( strcmp(unknwn_attr4, okfr[i][3]) == 0 )
                counter_fraud_attr4++;

            if( strcmp(unknwn_attr5, okfr[i][4]) == 0 )
                counter_fraud_attr5++;
        }
    }

    if(counter_ok_attr2 == 0)
        prblty_attr2_given_ok = (counter_ok_attr2+arbitrary_value*prblty_ok)/(counter_ok+arbitrary_value);
    else
        prblty_attr2_given_ok = (counter_ok_attr2)/(counter_ok);

    if(counter_ok_attr3 == 0)
        prblty_attr3_given_ok = (counter_ok_attr3+arbitrary_value*prblty_ok)/(counter_ok+arbitrary_value);
    else
        prblty_attr3_given_ok = (counter_ok_attr3)/(counter_ok);

    if(counter_ok_attr4 == 0)
        prblty_attr4_given_ok = (counter_ok_attr4+arbitrary_value*prblty_ok)/(counter_ok+arbitrary_value);
    else
        prblty_attr4_given_ok = (counter_ok_attr4)/(counter_ok);

    if (counter_ok_attr5 == 0)
        prblty_attr5_given_ok = (counter_ok_attr5+arbitrary_value*prblty_ok)/(counter_ok+arbitrary_value);
    else
        prblty_attr5_given_ok = (counter_ok_attr5)/(counter_ok);

    if(counter_fraud_attr2 == 0)
        prblty_attr2_given_fraud = (counter_fraud_attr2+arbitrary_value*prblty_fraud)/(counter_fraud+arbitrary_value);
    else
        prblty_attr2_given_fraud = (counter_fraud_attr2)/(counter_fraud);

    if(counter_fraud_attr3 == 0)
        prblty_attr3_given_fraud = (counter_fraud_attr3+arbitrary_value*prblty_fraud)/(counter_fraud+arbitrary_value);
    else
        prblty_attr3_given_fraud = (counter_fraud_attr3)/(counter_fraud);

    if(counter_fraud_attr4 == 0)
        prblty_attr4_given_fraud = (counter_fraud_attr4+arbitrary_value*prblty_fraud)/(counter_fraud+arbitrary_value);
    else
        prblty_attr4_given_fraud = (counter_fraud_attr4)/(counter_fraud);

    if(counter_fraud_attr5 == 0)
        prblty_attr5_given_fraud = (counter_fraud_attr5+arbitrary_value*prblty_fraud)/(counter_fraud+arbitrary_value);
    else
        prblty_attr5_given_fraud = (counter_fraud_attr5)/(counter_fraud);

    total_prblty_ok = prblty_ok*prblty_attr2_given_ok*prblty_attr3_given_ok*prblty_attr4_given_ok*prblty_attr5_given_ok;
    total_prblty_fraud = prblty_fraud*prblty_attr2_given_fraud*prblty_attr3_given_fraud*prblty_attr4_given_fraud*prblty_attr5_given_fraud;

    //      printf("Testing counts for OK - %f - %f - %f - %f\n",counter_ok_attr2,counter_ok_attr3,counter_ok_attr4,counter_ok_attr5);
    //      printf("Testing counts for FRAUD - %f - %f - %f - %f\n",counter_fraud_attr2,counter_fraud_attr3,counter_fraud_attr4,counter_fraud_attr5);
    //      printf("Testing attribute probabilities for OK - %f - %f - %f - %f\n",prblty_attr2_given_ok,prblty_attr3_given_ok,prblty_attr4_given_ok,prblty_attr5_given_ok);
    //      printf("Testing attribute probabilities for FRAUD- %f - %f - %f - %f\n",prblty_attr2_given_fraud,prblty_attr3_given_fraud,prblty_attr4_given_fraud,prblty_attr5_given_fraud);
    //      printf("The final probabilities are %f - %f\n",total_prblty_ok,total_prblty_fraud);

    if(total_prblty_ok > total_prblty_fraud)
    {
        fprintf(fp2,"%s,%s,%s,%s,%s,ok\n",unknwn_attr1,unknwn_attr2,unknwn_attr3,unknwn_attr4,unknwn_attr5);
    }
    else
    {
        fprintf(fp3,"%s,%s,%s,%s,%s,fraud\n",unknwn_attr1,unknwn_attr2,unknwn_attr3,unknwn_attr4,unknwn_attr5);
    }
    counter_ok_attr2=counter_ok_attr3=counter_ok_attr4=counter_ok_attr5=0;
    counter_fraud_attr2=counter_fraud_attr3=counter_fraud_attr4=counter_fraud_attr5=0;
}

// free the table data and dynamic pointer array
free(okfr);
free(okfr_data);

fclose(fp);
fclose(fp2);
fclose(fp3);
return 0; 
```

* * *

这些只是一些想法。可以肯定的是，其中还有更多的东西，但是这些应该*极大*地有助于处理具有连续输出的文件单前向扫描，这与在这些情况下将获得的效率差不多。毫无疑问，这三者的组合：单个文件打开+关闭、逻辑缩减和对 sales_ok_fraud.txt 文件进行单解析缓存将有巨大的性能提升，尤其是其中的第一个和最后一个。

**编辑**协助 OP 更新此处理器以预先加载 sales_ok_fraud.txt 文件内容，从而消除重复加载、解析并迅速丢弃大约 15000 多行要重复解析的文本（每个主源输入行一次）。上面的答案相应更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:09:10.617

@m02ph3u5 是对的。保持文件打开，将 fopen 和 fclose 的调用排除在循环之外。

```
inputFile = fopen("sales_unknwn.txt","r");
okayFile = fopen("sales_ok_fraud.txt","r");
unknownOkayFile = fopen("sales_unknown_ok_classified.txt","a");
unknownFraudFile = fopen("sales_unknown_fraud_classified.txt","a");

// your loops go here

fclose(inputFile);
fclose(okayFile);
fclose(unknownOkayFile);
fclose(unknownFraudFile); 
```

如果它仍然很慢，请在您的应用程序上运行采样分析器，并将测试数据的子集作为输入，以保持快速周转。这将告诉您程序将时间花在哪里。你可能会感到惊讶。如果您不知道要使用探查器，则可以通过使用调试器运行您的应用程序来对采样探查器进行穷人模拟，反复闯入调试器并注意它正在运行的函数。如果您在某个功能或大多数时间在某条线上，这可能是您可以优化的热点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T01:24:55.473

几点建议：

• 重复打开文件以进行追加、关闭和重新打开它们非常昂贵。这是因为 I/O 比内存访问慢得多，并且*每次写入时都强制磁盘打开每个文件并寻找到末尾。* 最好在开始时打开它们一次并在结束时关闭它们，除非您担心程序会崩溃并且您会丢失迄今为止编写的数据。

• 您可以替换行

```
memcpy(ok_fraud_attr6_str, &ok_fraud_attr6[0], strlen(ok_fraud_attr6)-2);
ok_fraud_attr6_str[strlen(ok_fraud_attr6)-2] = '\0'; 
```

和

```
ok_fraud_attr6[strlen(ok_fraud_attr6)-2] = '\0'; 
```

然后`ok_fraud_attr6`在您的测试中使用。由于`strtok`具有破坏性（快速搜索将值得您花时间了解为什么使用它通常是一个坏主意），您不必担心保留`line`or的内容`ok_fraud_attr6`。

• 当您发现自己一遍又一遍地编写相同的代码时，通常表明您的算法效率低下。代替

```
if ((some_unique_test) && (a_common_test))
  do_some_stuff;
if ((some_other_unique_test) && (a_common_test))
  do_other_stuff; 
```

你可以写

```
if (a_common_test) {
  if (some_unique_test)
    do_some_stuff;
  if (some_other_unique_test)
    do_other_stuff;
} 
```

但是请注意，只有第一个建议可能会对程序的执行时间产生显着影响，尽管它们都是需要学习的好习惯。

Jason 对使用分析器的建议是非常好的建议，怎么强调都不为过。程序员——即使是经验丰富的程序员——在预测他们的代码中的瓶颈在哪里方面是出了名的糟糕。除了调试器，配置文件是您最好的朋友。

# iphone - 有没有办法在 iOS 中为浮点数添加逗号，或者至少将其显示为货币？

> ID：13436308
> 
> 赞同：0
> 
> 时间：2012-11-18T00:34:17.420
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有以下内容：

```
NSLog(@"Total: $%.2f", paymentsToday); 
```

它当前显示：

```
$16000.00 
```

如何让它显示：

```
$16,000.00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:48:27.390

您应该为此使用[NSNumberFormatter 。](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFormatter_Class/Reference/Reference.html)

这应该可以解决问题：

```
NSNumberFormatter *priceFormatter = [[NSNumberFormatter alloc] init];
[priceFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[priceFormatter setCurrencyCode:@"USD"];
[priceFormatter setCurrencySymbol:@"$"];
NSString *formattedOutput = [priceFormatter stringFromNumber:[NSNumber numberWithFloat: paymentsToday]];
NSLog(@"Total: %@", formattedOutput); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:45:27.493

使用 NSNumberFormatter 设置货币格式：

```
 NSNumberFormatter* formatter=[[NSNumberFormatter alloc]init];
    [formatter setNumberStyle: NSNumberFormatterCurrencyStyle];
    NSLog(@"%@",[formatter stringFromNumber: @(paymentsToday)]); 
```

# iphone - Boostrap 下拉菜单在某些 iphone 上不起作用

> ID：13436313
> 
> 赞同：3
> 
> 时间：2012-11-18T00:35:01.943
> 
> 标签：iphone, ios, drop-down-menu, twitter-bootstrap

这个最近推出的基于引导程序（实际上是 joostrap）的网站：[http](http://www.lenspolitica.net/) ://www.lenspolitica.net/在移动模式下的下拉菜单有一个奇怪的问题。一些使用 iphone 的人报告说下拉菜单不起作用，而它正在使用其他 iphone。在使用其中一款无法正常工作的 iphone 进行测试时，我唯一注意到的是，当页面仍在加载过程中时，菜单实际上可以工作。然后按钮根本不只是响应。

我唯一能想到的另一件事是放置在网站顶部的一些隐藏 iframe，用于社交共享插件。

非常欢迎任何提示/建议。非常感谢。

我可以尝试测试我在这个论坛或其他地方找到的各种技巧，但由于该网站在我的 iPhone 上运行良好，我无法测试这些尝试的结果。因此，我决定发布这个问题以获得一些专家建议。

# asp.net-mvc-3 - csv到数据库c#

> ID：13436314
> 
> 赞同：0
> 
> 时间：2012-11-18T00:35:09.240
> 
> 标签：asp.net-mvc-3

我相信以下代码可以使用以下格式将 csv 文件上传到数据库：

.csv 格式：

约翰·安德森·米

1.  它将使用插入语句记录到 TableRef 表（完成）
2.  需要根据 csv 中有多少列表记录在 BulkImportDetails 中插入 custId 和 RefId。目前它只插入 1 条记录。

表 1：TableRef (guid refid(pk, not null), taskname, taskdescription) 表 2: BulkImportDetails (guid custid (pk, not null), guid refid(fk, not null, firstname, surname, age)

我如何将基于 csv 格式的信息插入到两个表中，请告知。谢谢你

```
 /// <summary>
        /// Process the file supplied and process the CSV to a dynamic datatable
        /// </summary>
        /// <param name="fileName">String</param>
        /// <returns>DataTable</returns>
        private static DataTable ProcessCSV(string fileName)
    {

        string connString = ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString;
        int AppID = Convert.ToInt32(ConfigurationManager.AppSettings["AppID"]);
        Guid ReferralID = Guid.NewGuid();
        DateTime date = DateTime.Now;
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();

            using (SqlCommand cmd =
            new SqlCommand("INSERT INTO TestTable VALUES(" +
                "refid, @ServerID, @AppID, @CreateDate, @CreatedBy, @CreateDescription, @Description)", conn))
            {
                cmd.Parameters.AddWithValue("@refid", ReferralID);
                cmd.Parameters.AddWithValue("@ServerID", 2);
                cmd.Parameters.AddWithValue("@AppID", AppID);
                cmd.Parameters.AddWithValue("@CreateDate", date);
                cmd.Parameters.AddWithValue("@CreatedBy", "Create by bulk insert");
                cmd.Parameters.AddWithValue("@CreateDescription", "Create by bulk insert");
                cmd.Parameters.AddWithValue("@Description", "Create by bulk insert");

                int rows = cmd.ExecuteNonQuery();

                //rows number of record got inserted
            }

        }

        //Set up our variables 
        string Feedback = string.Empty;
        string line = string.Empty;
        string[] strArray;
        DataTable dt = new DataTable();

        DataRow row;

        // work out where we should split on comma, but not in a sentance
        Regex r = new Regex(",(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))");

        //Set the filename in to our stream
        StreamReader sr = new StreamReader(fileName);

        //Read the first line and split the string at , with our regular express in to an array
        line = sr.ReadLine();
        strArray = r.Split(line);

        //For each item in the new split array, dynamically builds our Data columns. Save us having to worry about it.

        Array.ForEach(strArray, s => dt.Columns.Add(new DataColumn()));
        dt.Columns.Add("CustID", Type.GetType("System.Guid"));
        dt.Columns.Add("Refid", Type.GetType("System.Guid"));
        dt.Columns["CustID"].SetOrdinal(3);
        dt.Columns["Refid"].SetOrdinal(4);
        //Read each line in the CVS file until it's empty
        while ((line = sr.ReadLine()) != null)
        {
            row = dt.NewRow();

            //add our current value to our data row
            row["CustID"] = Guid.NewGuid();
            row["Refid"] = ReferralID;

            row.ItemArray = r.Split(line);
            dt.Rows.Add(row);
        }
        dt.Columns["CustID"].SetOrdinal(0);

        dt.Columns["Refid"].SetOrdinal(1);
        //Tidy Streameader up
        sr.Dispose();

        //return a the new DataTable
        return dt;

    }

        /// <summary>
        /// Take the DataTable and using WriteToServer(DataTable) send it all to the database table "BulkImportDetails" in one go
        /// </summary>
        /// <param name="dt">DataTable</param>
        /// <returns>String</returns>
        private static String ProcessBulkCopy(DataTable dt)
        {
            string Feedback = string.Empty;
            string connString = ConfigurationManager.ConnectionStrings["DataBaseConnectionString"].ConnectionString;

            //make our connection and dispose at the end    
            using(  SqlConnection conn = new SqlConnection(connString))
            {
                //make our command and dispose at the end
                using (var copy = new SqlBulkCopy(conn))
                {

                        //Open our connection
                        conn.Open();

                        ///Set target table and tell the number of rows
                        copy.DestinationTableName = "BulkImportDetails";
                        copy.BatchSize = dt.Rows.Count;
                        try
                        {
                            //Send it to the server
                            copy.WriteToServer(dt);
                            Feedback = "Upload complete";
                        }
                        catch (Exception ex)
                        {
                            Feedback = ex.Message;
                        }
                }
            }

            return Feedback;
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:18:05.270

我将代码修改如下： [http ://arranmaclean.wordpress.com/2010/07/20/net-mvc-upload-a-csv-file-to-database-with-bulk-upload/#comment-188](http://arranmaclean.wordpress.com/2010/07/20/net-mvc-upload-a-csv-file-to-database-with-bulk-upload/#comment-188)

# iphone - 如何在 xcode 中延迟事件？

> ID：13436315
> 
> 赞同：5
> 
> 时间：2012-11-18T00:35:09.037
> 
> 标签：iphone, objective-c, ios, xcode

我很惊讶我找不到这个答案，但由于某种原因无法为 Xcode 找到它。

在我的应用程序中，我有一个 IBAction buttonPressed 并将硬币添加到我的“硬币”变量中并将其显示在 UILabel 中。我想这样做，当用户按下按钮时，它不会添加硬币或在 UILabel 中显示大约 30 秒。有没有一种简单的方法可以做到这一点？我很新，所以如果可能的话，请用简单的步骤解释。谢谢你 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T00:38:36.193

这很简单，只需使用 performSelector:withObject:afterDelay:。你可以把它放在你的 IBAction 代码中，如下所示：

```
-(IBAction)buttonPressed:(UIButton *) sender {
[self performSelector:@selector(addCoins) withObject:nil afterDelay:30];
}

-(void)addCoins {
//put whatever code you want to happen after the 30 seconds
} 
```

# c - 如何在 C 中进行声音合成？

> ID：13436319
> 
> 赞同：1
> 
> 时间：2012-11-18T00:35:21.847
> 
> 标签：c, audio, signal-processing

我正在使用 ST 板生成一个简单的乐器。基本上我有一个传感器，它可以检测运动或空间角度，并根据角度产生不同音高和音量的声音。我已经有了音频编解码器的驱动程序，所以我需要做的就是生成声音样本并将样本提供给它。现在我能够从传感器获得角度读数，但具有挑战性的部分是如何产生声音。到目前为止，从谷歌搜索来看，我认为我需要根据传感器的读数生成一个频率和幅度（音量）设置的 sin 函数。但是我的编解码器假设采样率为 0f 48KHz 那么我将如何为固定采样率生成具有不同频率的正弦曲线呢？

到目前为止，我已经这样做了：

```
 samplingRate = 48000;
 n = 0;  // reset once there is a change in frequency

// this function is called 48000 times a second
int generateSineWave(float frequency, float volume)
{
  int temp = volume*(sin(2*pi*frequency*n);
  n = n + 1; 
  if (n == samplingRate) {
    n = 0;
  }
  if (abs(temp) > MAXVAL) {
    return ERROR_CODE;
  }
  return temp;
} 
```

这似乎有效（我听到了一些声音），但我不确定它是否产生了正确的频率正弦曲线。我听到的声音也不是很悦耳，我将如何产生复杂的音调（例如钢琴中的音调）？我想我的控制变量（空间角度）也需要低通滤波。但除此之外，关于如何产生更悦耳的波浪的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T00:46:07.393

由于您以 48 kHz（每秒 48,000 个样本）进行采样，因此 1 Hz 正弦波完成一个周期需要一秒或 48,000 个样本。因此，您需要按采样率对 进行*归一化*或除法：

```
temp = volume * sin(2 * pi * n * frequency / samplingRate); 
```

请注意，`temp`必须始终在从`-volume`到的范围内`volume`，因此您只需检查一次`volume < MAXVAL`，并且可以在计算 之前执行此操作`temp`，这将更有效地检测错误（非常轻微）。您会发现`pi`已经为您定义了，`M_PI`如`math.h`.

你提到的音调不是很悦耳。这是一个可能有问题的迹象，因为纯正弦曲线听起来不错，很纯净，而且通常令人愉悦。您可能会尝试的一件简单的事情是在过零处开始和停止您的音调。否则您会在过渡时听到咔嗒声或失真。或者，您可以通过乘以“斜坡”函数来淡入和淡出它们，您可以通过`float`在短时间内将 a 从 1 减小到 0 来创建该函数。

一些C语言技巧：

• 您可以替换`n = n + 1`为`++n`。

• 您可以更换

```
 if (abs(temp) > MAXVAL) {
   return ERROR_CODE;
 }
 return temp; 
```

和

```
return abs(temp) > MAXVAL ? ERROR_CODE : temp; 
```

• 如果您选择保留`if`，最好对单行正文使用大括号，因为有一天您可能会添加另一行而忘记大括号。这是一个特别难以找到的错误，因为您会按照您的*预期*阅读代码，而不是实际阅读代码。相信我。:-)

# php - 如何在两个不同的表中显示相同的列项？

> ID：13436320
> 
> 赞同：-1
> 
> 时间：2012-11-18T00:35:28.397
> 
> 标签：php, mysql

我有两个不同的表，分别称为**News**和**SpotNews** .. 这些表有两个相同的列，如**id 、News_Title 和 News_Content** .. 关于 ; 如何在同一查询中显示 sql 结果？

例如（输出应该是这样的）；

```
id      News_title      News_Content
====================================
23      Title abc       content 123     // Comes from News
67      Title ahs       content 233     // Comes from Spot_News
223     Title abc4      content 321     // Comes From Spot_News
367     Title ahseq     content tg3     // Comes from News
567     Title ahs2      content 2da     // Comes from News 
```

你能为此写一个sql查询吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:39:51.613

尝试[`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html)：

```
SELECT id, news_title, news_content FROM table_one
UNION ALL
SELECT id, news_title, news_content FROM table_two 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:40:12.547

您正在寻找`UNION`运营商。

```
SELECT id, News_title, News_content FROM News WHERE 1 = 1 
UNION ALL 
SELECT id, News_title, News_content FROM Spot_News 
```

`UNION`允许您整理来自两个查询的结果，前提是它们具有完全相同数量的字段。每个查询也可以有它的`WHERE`子句集！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T00:40:31.030

好吧，您只需要创建多个查询。

```
$query = "SELECT news from TABLE_ONE WHERE ...";
$query2 = "SELECT news from TABLE_ONE WHERE ...";

$result = mysql_query($query);
$result2 = mysql_query($query2);

$allnews = $result.$result2;

$while($row=mysql_fetch_array($allnews)){echo "$row[anything you want to echo here]";} 
```

我没有测试过这段代码，所以试试吧。

# c - 阻塞当前线程，类似于 getchar()

> ID：13436321
> 
> 赞同：1
> 
> 时间：2012-11-18T00:35:31.180
> 
> 标签：c, multithreading, getchar

目前我正在做。

```
int main()
{
  create_daemon_thread_and_run();

  getchar();
  return 0;
} 
```

我使用 getchar() 来阻止主线程终止整个进程。

我不喜欢 getchar() 因为如果我在标准输入中输入一些内容，它将返回并且进程将终止。但我希望它永远阻塞，比如

```
while()
{
  ;
} 
```

但我担心 while loop 永远会耗尽 CPU 使用率。我想要的东西只是让线程休息，而不是吃CPU。我想要跨平台的方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:43:32.770

您可以简单地等待您的线程完成，thread.join 将阻塞主线程，直到您生成的线程完成。但是你不会将你的线程分离到守护进程。

如果你能从那里得到某种州旗`create_daemon_thread_and_run();`，那就容易多了

```
int main()
{
  bool is_thread_finished = false;
  create_daemon_thread_and_run(is_thread_finished);
  while (!is_thread_finished){
    sleep(1);
  }
  return 0;
} 
```

C++11 演示：

```
#include <thread>
void thread_function()
{
    // do something in a loop
}

int main()
{
  std::thread t1(thread_function);   
  t1.join();

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:45:45.693

你可能会更好地使用 pthread_join （如果它是一个 pthread，非分离线程）。

否则，请使用互斥体、条件变量或信号量。

下面的示例演示了如何使用信号量，它响应*信号*（例如，当在终端中使用 Ctrl-C 时）。当然，当信号量完成处理并想要关闭时，您的“恶魔”实现可以自由地发出信号量。

```
#include <signal.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <assert.h>
#include <semaphore.h>

static sem_t daemon_shutdown;

static void exit_handler(int sig) {
    sem_post(&daemon_shutdown);
}

static int set_signal_handler(int sig, void (*handler)(int)) {
    struct sigaction sa;
    memset(&sa, 0, sizeof(struct sigaction));
    sa.sa_handler = handler;
    sigemptyset(&(sa.sa_mask));
    sa.sa_flags = 0;
    if(sigaction(sig, &sa, NULL) == -1) {
        perror("sigaction");
        return -1;
    }
    return 0;
}

// DEFINE THESE FOR YOUR PROGRAM:
int do_daemon();
void do_exit();
//

int main() {
    assert(0 == sem_init(&daemon_shutdown, 0, 0));
    if(!do_daemon()) {
        do_exit();
        return 1;
    }
    if(
        set_signal_handler(SIGHUP, exit_handler) != 0 ||
        set_signal_handler(SIGINT, exit_handler) != 0 ||
        set_signal_handler(SIGTERM, exit_handler) != 0 ||
        set_signal_handler(SIGPIPE, SIG_IGN) != 0) {
        do_exit();
        return 2;
    }
    sem_wait(&daemon_shutdown);
    do_exit();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T00:41:05.510

你的程序是做什么的？

如果后台线程正在执行某种计算等，那么您的主线程应该等待后台线程完成。如果您使用的是 Windows，请参阅`CreateEvent`和`WaitForMultipleObjects`。

# c# - 检索数据绑定的行列的值

> ID：13436322
> 
> 赞同：2
> 
> 时间：2012-11-18T00:35:56.727
> 
> 标签：c#, wpf, datagrid

我有一个 DataGrid，我设置了一个调用方法的双击事件设置器。下面是我的 xaml，下面是我的代码隐藏页面。双击事件有效，但我得到的返回是“system.data.datarowview”，我不知道为什么。我正在尝试获取行的“vehicleID”值，该行是隐藏的自己的列。

XAML：

```
<DataGrid Name="OpenVehicles" AutoGenerateColumns="False" IsReadOnly="False" SelectedItem="{Binding vehicleID}" SelectionUnit="FullRow">
<DataGrid.ItemContainerStyle>
    <Style TargetType="DataGridRow">
        <EventSetter Event="MouseDoubleClick" Handler="OpenVehicleClick" />
    </Style>
</DataGrid.ItemContainerStyle>
<DataGrid.Columns>
    <DataGridTextColumn Binding="{Binding vehicleID}" Width="*" Header="vehicleID" Visibility="Hidden"/>
    <DataGridTextColumn Binding="{Binding date, StringFormat=\{0:MMM dd yyyy \}}" Width="*" Header="Date"/>
    <DataGridTextColumn Binding="{Binding companyshortname}" Width="*" Header="Customer"/>
    <DataGridTextColumn Binding="{Binding subject}" Width="5*" Header="Vehicle Description"/>
    <DataGridTextColumn Binding="{Binding FName}" Width="*" Header="Owner"/>
</DataGrid.Columns> 
```

C#代码：

```
 private void OpenVehicleClick(object sender, RoutedEventArgs e)
    {
        MessageBox.Show(OpenVehicles.CurrentCell.Item.ToString());
    } 
```

任何关于如何检索列值的想法或任何其他建议都非常受欢迎。我非常难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:57:14.263

该`DataRowView.Row`属性将包含`DataRow`您想要的。`DataRowView.Row["ColumnName"]`从那里您可以使用索引器访问列值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:29:23.813

XAML 中的这一位：`SelectedItem="{Binding vehicleID}"`意味着所选数据项将绑定到`vehicleID`网格的 DataContext 的属性中（将从其所在的控件/页面继承）。

我注意到您已经排除了网格上对 ItemsSource 的任何提及 - 该`vehicleID`属性应与 ItemSource 属性属于同一类。您需要确保它`vehicleID`是公共属性，而不是字段 - 您不能将数据绑定到字段。因此，根据您的设置方式，这里有几个选项：

```
pubic class MyPage
{
    public MyPage()
    {
        InitializeComponent();
        this.DataContext = this;
    }

    private void OpenVehicleClick(object sender, RoutedEventArgs e)
    {
        MessageBox.Show(VehicleID != null ? VehicleID.WhateverProperty : "Nothing selected");
    }

    public MyDataObject VehicleID { get; set; }
} 
```

或者，如果您有一个单独的视图模型分配给页面/控件的 DataContext：

```
private void OpenVehicleClick(object sender, RoutedEventArgs e)
{
    var selectedDataItem = ((MyViewModel) DataContext).VehicleID;
    MessageBox.Show(selectedDataItem != null ? selectedDataItem.WhateverProperty : "Nothing selected");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T00:59:57.117

目前，您正在参考网格本身。您的事件处理一行，因此使用事件参数在所选行中查找您需要的内容（在调试中调查它们）。

# c# - 防止 C# 中的 WebBrowser 控件在登录 Windows Live 时启动外部 IE 弹出窗口

> ID：13436328
> 
> 赞同：1
> 
> 时间：2012-11-18T00:36:57.763
> 
> 标签：c#, webbrowser-control, windows-live

这适用于 Visual Studio 2012 中的桌面 C# 应用程序。

我需要使用 C# 中的 WebBrowser 控件登录到 Windows Live 实例，让控件打开页面没什么，但登录让我很头疼。

我尝试了从 Google 收集到的大约 4 种不同的建议，但我没有正确登录。

这就是我所拥有的：

```
//FORM1 code
//Added reference to 'Microsoft Internet Controls'
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication3
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            webBrowser1.Url = new Uri("http://digitbot.com/live/");
        }
        SHDocVw.WebBrowser nativeBrowser;
        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);
            nativeBrowser = (SHDocVw.WebBrowser)webBrowser1.ActiveXInstance;
            nativeBrowser.NewWindow2 += nativeBrowser_NewWindow2;
        }
        protected override void OnFormClosing(FormClosingEventArgs e)
        {
            nativeBrowser.NewWindow2 -= nativeBrowser_NewWindow2;
            base.OnFormClosing(e);
        }

        void nativeBrowser_NewWindow2(ref object ppDisp, ref bool Cancel)
        {
            var popup = new Form2();
            popup.Show(this);
            ppDisp = popup.Browser.ActiveXInstance;
        }
    }
}

//FORM2 code
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication3
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }
        public WebBrowser Browser
        {
            get { return webBrowser1; }
        }
    }
} 
```

这会在第二个窗口中启动登录弹出窗口，但不知何故，它似​​乎永远不会完成该过程。

在浏览器中点击上面代码中的链接应该可以让您登录，并且应该显示日历事件的原始 JSON，然后是个人资料图片。我需要在 WebBrowser 控件中获得相同的结果。

任何帮助都会很棒，我被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:29:30.187

从来没有得到我最初的工作方法，所以我转而使用带有 REST 服务器端的 WebClient 和浏览器，因为我需要在用户注销的情况下做一些事情。

这是带有 WPF 的 C# Windows 8 端的基本设置：

```
static string client_id = "your-client-id";
static string client_secret = "your-client-secret";
static string accessTokenUrl = 
  String.Format(@"https://login.live.com/oauth20_token.srf?client_id={0}&client" + 
  @"_secret={1}&redirect_uri=https://login.live.com/oauth20_desktop.srf&grant_type" + 
  @"=authorization_code&code=", client_id, client_secret);
static string apiUrl = @"https://apis.live.net/v5.0/";
public Dictionary<string, string> tokenData = new Dictionary<string, string>(); 
```

这是我主窗口中的大部分代码：

```
private void getAccessToken()
{
    if (App.Current.Properties.Contains("auth_code"))
    {
        makeAccessTokenRequest(accessTokenUrl + App.Current.Properties["auth_code"]);
    }
}

private void makeAccessTokenRequest(string requestUrl)
{
    try
    {
        WebClient wc = new WebClient();
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(accessToken_DownloadStringCompleted);
        wc.DownloadStringAsync(new Uri(requestUrl));
        lError.Content = "";
    }
    catch (Exception ex)
    {
        lError.Content = "There has been an internet connection error.";
    }
}

void accessToken_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    tokenData = deserializeJson(e.Result);
    if (tokenData.ContainsKey("access_token"))
    {
        App.Current.Properties.Add("access_token", tokenData["access_token"]);
        App.Current.Properties.Add("refresh_token", tokenData["refresh_token"]);
        getUserInfo();
    }
}

private Dictionary<string, string> deserializeJson(string json)
{
    var jss = new JavaScriptSerializer();
    var d = jss.Deserialize<Dictionary<string, string>>(json);
    return d;
}

private void getUserInfo()
{
    if (App.Current.Properties.Contains("access_token"))
    {
        try
        {
            makeApiRequest(apiUrl + "me?access_token=" + App.Current.Properties["access_token"]);
            lError.Content = "";
        }
        catch (Exception ex)
        {
            lError.Content = "There has been an internet connection error.";
        }
    }
}

private void makeApiRequest(string requestUrl)
{
    try
    {
        WebClient wc = new WebClient();
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
        wc.DownloadStringAsync(new Uri(requestUrl));
        lError.Content = "";
    }
    catch (Exception ex)
    {
        lError.Content = "There has been an internet connection error.";
    }
}

void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    changeView(e.Result);
}

private void changeView(string result)
{
    string imgUrl = apiUrl + "me/picture?access_token=" + App.Current.Properties["access_token"];
    imgUser.Source = new BitmapImage(new Uri(imgUrl, UriKind.RelativeOrAbsolute));
    String code = "" + App.Current.Properties["refresh_token"];
    String auth = "" + App.Current.Properties["access_token"];

}

void browser_Closed(object sender, EventArgs e)
{
    try
    {
        getAccessToken();
        lError.Content = "";
    }
    catch (Exception ex)
    {
        lError.Content = "There has been an internet connection error.";
    }
} 
```

然后，Windows Live 授权将在此浏览器中进行，并在我们登录后消失。

浏览器的 XAML：

```
<Window x:Class="WpfApplication3.BrowserWindow"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Sign In" Height="460" Width="423.881" 
      ShowInTaskbar="False" WindowStartupLocation="CenterScreen">
    <Grid>
        <WebBrowser Height="419" HorizontalAlignment="Left" 
           Name="webBrowser" VerticalAlignment="Top" 
           Width="406" LoadCompleted="webBrowser_LoadCompleted" />
    </Grid>
</Window> 
```

这是浏览器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Text.RegularExpressions;

namespace WpfApplication3

{
    public partial class BrowserWindow : Window
    {
        static string scope = "wl.signin wl.calendars wl.offline_access wl.contacts_calendars";
        static string client_id = "your-client-id";
        static Uri signInUrl = new Uri(String.Format(@"https://login.live.com/oauth20" + 
          @"_authorize.srf?client_id={0}&redirect_uri=https://login.live.com/" + 
          @"oauth20_desktop.srf&response_type=code&scope={1}", client_id, scope));
        MainWindow mainWindow = new MainWindow();

        public BrowserWindow()
        {
            InitializeComponent();
            webBrowser.Navigate(signInUrl);
        }

        private void webBrowser_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
        {
            if (e.Uri.AbsoluteUri.Contains("code="))
            {
                if (App.Current.Properties.Contains("auth_code"))
                {
                    App.Current.Properties.Clear();
                }
                string auth_code = Regex.Split(e.Uri.AbsoluteUri, "code=")[1];
                App.Current.Properties.Add("auth_code", auth_code);
                this.Close();
            }
        }
    }
} 
```

这是一个更冗长的解释的链接：http: [//www.codeproject.com/Articles/497199/Switch-to-SMS-Text-Event-Reminders-When-Your-Ultra#live](http://www.codeproject.com/Articles/497199/Switch-to-SMS-Text-Event-Reminders-When-Your-Ultra#live)

# css - 垂直对齐：当多个元素在父级时居中

> ID：13436334
> 
> 赞同：0
> 
> 时间：2012-11-18T00:38:26.447
> 
> 标签：css

如何在 ? 中垂直居中`img`和以下文本`td`？

```
<td><a><img width="32" height="32" alt="txt" src="txt.png">Text</a></td> 
```

我尝试过`vertical-align:middle;`但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:07:42.353

您可以通过将文本放在`span`标签内来实现所需的效果。然后`span`根据需要定位它并添加一个`line-height`with`vertical-align:middle;`

这应该会产生预期的效果 - [http://jsfiddle.net/tdJ8u/23/](http://jsfiddle.net/tdJ8u/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:10:24.043

您需要在表格单元格内的元素上指定垂直对齐方式。在你的情况下：

```
td a, td img { vertical-align:middle; } 
```

或查看[http://jsfiddle.net/ZfP7r/1/](http://jsfiddle.net/ZfP7r/1/)。

# java - Eclipse Juno 没有调试工具栏？

> ID：13436337
> 
> 赞同：83
> 
> 时间：2012-11-18T00:38:51.533
> 
> 标签：java, eclipse

我刚刚升级到 Eclipse Juno，但我发现在 Debug 透视图中没有调试工具栏（Resume/Step into/Step over/Stop 等）？如何找回工具栏？谢谢！

[![在此处输入图像描述](../Images/7ce6bdec01201b75b21031eac17a34e9.png)](https://i.stack.imgur.com/L8ggf.png)

在以前的版本中：

[![在此处输入图像描述](../Images/cdda25fddd39546f495c32efbfb08cd3.png)](https://i.stack.imgur.com/l1ak1.png)

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-02-17T16:28:58.280

您可以在此处找到将其重新打开的菜单： ![juno 启用调试工具栏](../Images/e167048990253bd4521e833639aed255.png)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-18T07:11:53.813

从[朱诺文档](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.user/whatsNew/platform_whatsnew.html?cp=0_6_3#Debug)：

> 为了改进 Debug 透视图的显示，常用的调试控制命令（Stop、Resume 等）已从 Debug 视图移到全局工具栏中。
> 
> 可以使用 Window > Customize Perspective... 操作自定义全局工具栏，以添加或删除调试命令，或完全显示/隐藏调试工具栏。
> 
> 通过首先切换调试视图菜单中的显示调试工具栏选项，然后从自定义透视对话框中禁用调试工具栏，可以恢复旧的工具栏行为。

![全局工具栏](../Images/6956c64051a3e9f8148c2f2d4b59b9a2.png) ![显示调试工具栏](../Images/22e05eac2047daacb6faebcd0d9b529f.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-02T13:26:46.927

大约一个月前在 Juno 和现在的 Kepler 中，我的全局菜单缺少调试按钮，并且不会应用或保存来自 Customize Perspective 的更改。broc.seib 的解决方法有效，但我想解决实际问题。**我发现该文件存储在workspace/.metadata/.plugins/org.eclipse.ui.workbench/workbench.xml。删除（或重命名）文件重置了我的观点并解决了更改未保存的问题。**但是，该文件显然没有被重新创建，所以我假设 Kepler 将它保存在其他地方并且只读取旧文件以实现向后兼容性；如我错了请纠正我。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-02T18:41:18.130

在工具栏中启用调试图标的另一种方法是选择**Window** -> **Perspective** -> **Customize Perspective**（或右键单击 Perspective 图标并选择 Customize）。然后在新的弹出窗口中选择**操作集可用性选项卡**>在左侧列表中**启用调试。**

完成上述操作后，右键**单击 Debug 透视图图标**->**另存为...** -> 命名 Debug，单击保存，确定覆盖。

![在此处输入图像描述](../Images/cff6923bfff5204d27d015f03521f53d.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-19T17:14:50.700

在调试窗口中有这个下拉菜单（由小矩形表示）检查选项“显示调试工具栏”，这就是我的问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T00:42:27.150

确保它们在工具栏可见性和命令组可用性下的“自定义透视图”对话框中被选中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-03T10:07:49.807

经过（重新）搜索后，我终于意识到这个选项（运行\调试操作工具栏）在 Eclipse Helios 中根本不存在。对我来说最相似的配置是

一种。将调试视图与其他选项卡分开 b. 将其停靠在所有其他调试面板之上（变量、控制台，无论 c. 最小化它的大小，只留下带有标题和操作工具栏的标题

我将它发布在这里，而不是用明显的“不是这样的东西”答案来询问关于 Eclipse Helios 的相同问题。希望它可以帮助下一个使用旧 Eclipse 版本的用户。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-08T10:00:53.340

对于 Kepler eclipse 版本，可以使用 Eclipse->Window->Show Toolbar 使调试工具栏可见

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-27T12:35:59.023

使用 -clean 标志启动 Eclipse，这对我来说在从oxygen.0=>oxygen.1 升级时有用

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-09-24T05:21:14.940

之前看不到调试工具栏，之后

```
 Window->Reset Perpective 
```

可以再次展示

# r - 如何制作向量到对象的查找/哈希表？

> ID：13436338
> 
> 赞同：1
> 
> 时间：2012-11-18T00:38:56.477
> 
> 标签：r, hashmap

我想将带有数字向量的对象作为键存储在某些数据结构中，以便以后在为数据结构提供相同向量时可以检索该对象。我怎样才能做到这一点？

所有向量都具有相同数量的元素。将存储的对象数量很少（<20）。

就像是：

```
hash[c(1,2,4)] <- myObject 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:59:51.680

您可以使用 a`list`并将矢量键转换为唯一的字符键，`paste`例如：

```
hash <- list()
hash[[paste(c(1,2,4), collapse = '.')]] <- 1:10
hash
# $`1.2.4`
#  [1]  1  2  3  4  5  6  7  8  9 10 
```

检索对象的相同想法：

```
hash[[paste(c(1,2,4), collapse = '.')]]
#  [1]  1  2  3  4  5  6  7  8  9 10 
```

# ruby-on-rails - Rails 远程 js 错误不会在 chrome 中产生消息

> ID：13436340
> 
> 赞同：0
> 
> 时间：2012-11-18T00:39:45.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3

众所周知，来自 rails 远程调用的 js RUNTIME 错误将静默失败，如下所述：

[http://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/](http://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/)

> 问题通常不是 js.erb 中的 JavaScript 没有被执行，而是它正在被执行并引发错误。默认情况下，当 jQuery 处理 JavaScript 响应时，它会做两件事。它执行（或评估）响应，并将其作为文本返回。
> 
> 除非，如果 JS 评估出现错误，我们将不会在我们最喜欢的 JavaScript 控制台中看到该错误；自动 JS 评估无声无息地失败，因此 jQuery 似乎只是将响应解释为文本而不是其他任何东西。

当然，你可以看到什么都没有发生，并最终发现链接/按钮是一个 rails 远程调用，然后转到网络选项卡，复制 js 响应，然后粘贴到控制台中。

**但是为什么这无法解决，以至于控制台中出现错误而不必弄清楚这一切呢？**

这使我认为动态更新应用程序的 rails 远程技术的价值可能应该仅限于呈现表单部分的特定情况，否则，长期使用标准 JQuery.ajax 与返回的承诺对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:39:29.447

解决方案似乎是，如果您使用 rails UJS，那么您必须查看错误响应，然后您需要将返回值粘贴到控制台中以检测任何错误。

# jquery - jQuery datepicker 输入不会失去对 chrome 的关注

> ID：13436341
> 
> 赞同：3
> 
> 时间：2012-11-18T00:39:48.187
> 
> 标签：jquery, focus, jquery-ui-datepicker

我有一个使用 jQuery UI 日期选择器的输入，在选择日期选择器关闭的日期后，我进行 ajax 调用以获取一些数据并刷新数据网格。

不知何故，在数据网格完成刷新日期选择器自动打开之后。我假设输入永远不会失去焦点，并且用于日期选择器触发器。这只发生在 chrome 中。有没有办法阻止这种情况发生？

我尝试在关闭日期选择器时强制使用 .blur()，但这没有用

```
$(".datePickerEnable").datepicker({
            dateFormat:"dd-mm-yy",
            changeMonth: true,
            changeYear: true,
            dayNames: [ "Domingo", "Segunda-feira", "Terça-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira", "Sabado" ],
            dayNamesMin: [ "Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sab" ],
            monthNames: [ "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro" ],
            onClose: function() {
                this.blur();
            }
        }) 
```

在数据网格刷新后执行`document.activeElement`表明输入仍然集中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:05:29.833

在 formUtils.js 中注释 5736 到 5739 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:30:12.000

尝试使用 jQuery 的 focus 方法将焦点设置到另一个元素：

```
$('#target').focus(); 
```

# c# - 动态添加 ASP.NET 验证控件

> ID：13436345
> 
> 赞同：0
> 
> 时间：2012-11-18T00:40:30.183
> 
> 标签：c#, asp.net

有一点麻烦，我已经想弄清楚几个小时了。

我有三个面板，其中两个在任何给定时间都是可见的=假。三个面板中的两个具有需要验证用户输入的文本框。下面的代码循环遍历所有三个面板中的所有控件，并为每个文本框创建两个验证控件。

第一个面板，设置，只允许数字。两个验证都按预期捕获错误。

第二个面板 ConfigImages 有三个文本框。两个允许文本/数字/有限符号并需要输入。第三个需要一个 URL。验证器不会在这些文本框上触发。

任何想法为什么这些验证器没有触发？

代码隐藏

```
 //Initialize page validation
        foreach (Panel p in this.Form.Controls.OfType<Panel>().ToList())   
        {
            foreach (TextBox ctrl in p.Controls.OfType<TextBox>().ToList())
            {
                //add a new RequiredFieldValidator for each textbox
                this.Form.Controls.Add(new RequiredFieldValidator()
                {
                    //set the properties of the new RequiredFieldValidator
                    ControlToValidate = ctrl.ID.ToString(),
                    Display = ValidatorDisplay.None,
                    Enabled = true,
                    ErrorMessage = ctrl.ID.Substring(3) + " Field cannot be empty"
                }
                );

                //Add a new RegularExpressionValidator for each textbox
                this.Form.Controls.Add(new RegularExpressionValidator()
                {
                    //set the properties of the new RegularExpressionValidator
                    ControlToValidate = ctrl.ID.ToString(),
                    Display = ValidatorDisplay.None,
                    Enabled = true,
                    ErrorMessage = ctrl.ID.Substring(3) + " field has invalid characters",
                    //Double Ternary Allows 0-255 for all Settings textbox , a-zA-Z0-9'!#$%&'*+/=?^_`{|}~.- for Slide Text
                    //or URL for URL textbox
                    ValidationExpression = (ctrl.Parent.ID == "pnlSettings") ? @"^[0-9]*$" :
                        (ctrl.ID == "txtUrl") ? @"http(s)?://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?" :
                        @"^[a-zA-Z0-9#$%&@?""{}[]]*$"
                }
                );
            }
        }
        //Add Validation Summary        
        this.Form.Controls.Add(new ValidationSummary() { ShowMessageBox = true, ShowSummary = false }); 
```

# json - RefineryCMS 图像 URL 不正确

> ID：13436347
> 
> 赞同：1
> 
> 时间：2012-11-18T00:40:31.077
> 
> 标签：json, image, refinerycms, refinery

我正在为 RefineryCMS 编写一个用于产品照片库的引擎。我正在使用主干编写图库页面，并通过前端模板和使用主干的 javascript 进行大部分渲染。所以基本上我只是将我的产品作为 JSON 发送给客户端，然后客户端构建页面。

该应用程序还设置为将图像保存到 Amazon s3。

现在每个产品都可以有很多与之相关的照片。当我将这些照片作为 JSON 发送时，我通过调用确定存储为 Refinery::Image 的图像的 url

图片.url()

并将url发送给客户端。然后在客户端代码中，我使用 url 作为图像标签的 src 属性。

但是，我发送的网址在我的服务器上不存在。

我对 image_fu 以及它如何生成服务器端图像并不是非常熟悉。如果有人可以帮助我弄清楚如何生成可以工作的图像 url，那就太棒了。

# c - 在 C 中创建具有任意节点类型的堆。如何释放它？

> ID：13436348
> 
> 赞同：0
> 
> 时间：2012-11-18T00:40:55.643
> 
> 标签：c, data-structures, heap-memory, free

要求对此设计选择进行合理检查。

我正在通过创建一个可以接受字符串或数字节点类型的堆数据结构在 C 中编写堆排序。（我正在创建自己可以排序的私有堆）

堆中的节点是 void*，它们被取消引用以执行比较操作。Heap 结构将每个节点的大小存储在 Heap.nodesize 中，如果节点是字符串，则为 -1。

插入节点时，会为 void* 分配内存。如果 Heap.nodesize 为 -1，则将 strlen(val) 传递给 malloc，否则将 Heap.nodesize 传递给 malloc。

执行比较时，如果 Heap.nodesize 为 -1，则使用 strcmp，否则使用布尔运算符作为数值。

当堆被释放时，我计划循环并释放每个 void*。此时free会知道每个节点要释放多少字节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:42:51.650

您不需要知道最初的`malloc`ed 大小。您只需将`malloc()`返回的指针传递给`free()`.

```
ssize_t size = 400;
void* p = malloc(size);
// Do whatever with p
free(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:52:21.243

`free`不需要知道字节数，就像'Jonathon Reinhart'所说的那样使用它[。TCPL](https://rads.stackoverflow.com/amzn/click/com/0131103628)的第8章中`malloc`有一个简单的实现。只要阅读它，你就会知道它是如何工作的，而不需要知道你的大小动态分配的内存。希望它有效！`free``free`

# javascript - Google Maps API 方向中的标识符

> ID：13436355
> 
> 赞同：4
> 
> 时间：2012-11-18T00:42:30.480
> 
> 标签：javascript, maps, identifier, directions

我有一个问题，我似乎无法找到解决方案。我对 Google Maps API 并不陌生，过去用它编写过地图和行车路线页面。我经常遇到的问题是没有在起点、目的地或任何航路点的结果中返回地名。返回的方向按照我设置的方式排列，但地址始终是“格式化的”，而不是我发送的方向（带有地名）。

所以我的问题是：有没有办法保留地名，以便它显示在方向窗格的地址中？

示例：发送的数据：“John Smith, 570 Washington Street, Nowhere, TN 33002” 返回的数据：“570 N Washington Street, Nowhere, TN 33002, USA”

没有名称或标识符，只有地址。任何指向正确方向的人都将不胜感激。. . 现在请不要给 John Smith 发邮件……他讨厌这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:54:50.463

你需要做的是：

1）抑制方向显示生成的标记和信息窗口（保存地址）

2) 放置您自己的标记和信息窗口

要完成 1) - 您需要：

```
directionsDisplay = new m.DirectionsRenderer({supressMarkers: true,
suppressInfoWindows: true}); 
```

对于 2) - 你应该像往常一样简单地创建一个标记。

# php - 配置：错误：utf8_mime2text() 具有新签名，但缺少 U8T_CANONICAL

> ID：13436356
> 
> 赞同：43
> 
> 时间：2012-11-18T00:42:36.907
> 
> 标签：php, macos

今天我正在尝试在 MacOS Mountain Lion 上升级 php。我按照[MacTuts+](http://mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/)教程和执行那个长命令的步骤：

```
./configure  \
--prefix=/usr  \
--mandir=/usr/share/man  \
--infodir=/usr/share/info  \
--sysconfdir=/private/etc  \
--with-apxs2=/usr/sbin/apxs  \
--enable-cli  \
--with-config-file-path=/etc  \
--with-libxml-dir=/usr  \
--with-openssl=/usr  \
--with-kerberos=/usr  \
--with-zlib=/usr  \
--enable-bcmath  \
--with-bz2=/usr  \
--enable-calendar  \
--with-curl=/usr  \
--enable-dba  \
--enable-exif  \
--enable-ftp  \
--with-gd  \
--enable-gd-native-ttf  \
--with-icu-dir=/usr  \
--with-iodbc=/usr  \
--with-ldap=/usr  \
--with-ldap-sasl=/usr  \
--with-libedit=/usr  \
--enable-mbstring  \
--enable-mbregex  \
--with-mysql=mysqlnd  \
--with-mysqli=mysqlnd  \
--without-pear  \
--with-pdo-mysql=mysqlnd  \
--with-mysql-sock=/var/mysql/mysql.sock  \
--with-readline=/usr  \
--enable-shmop  \
--with-snmp=/usr  \
--enable-soap  \
--enable-sockets  \
--enable-sysvmsg  \
--enable-sysvsem  \
--enable-sysvshm  \
--with-tidy  \
--enable-wddx  \
--with-xmlrpc  \
--with-iconv-dir=/usr  \
--with-xsl=/usr  \
--enable-zip  \
--with-imap=/usr/local/imap-2007 \
--with-kerberos \
--with-imap-ssl \
--enable-intl \
--with-pcre-regex  \
--with-pgsql=/usr  \
--with-pdo-pgsql=/usr \
--with-freetype-dir=/usr/X11 \
--with-jpeg-dir=/usr  \
--with-png-dir=/usr/X11 
```

我在流程结束时收到错误消息。

> 配置：错误：utf8_mime2text() 具有新签名，但缺少 U8T_CANONICAL。这不应该发生。检查 config.log 以获取更多信息。

有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2016-07-22T12:19:05.047

对于那些在 docker 上遇到相同错误的人：

```
RUN apt-get update && apt-get install -y libc-client-dev libkrb5-dev && rm -r /var/lib/apt/lists/*
RUN docker-php-ext-configure imap --with-kerberos --with-imap-ssl \
    && docker-php-ext-install imap 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-18T04:49:55.837

如果您的操作系统存储库中有“libc-client-devel”RPM 或其他软件包，请安装它。

这将提供 PHP 支持 IMAP 所需的 c-client 库和头文件。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-02T16:04:55.610

可以通过删除 IMAP 支持来修复错误，删除这些行

```
--with-imap=/usr/local/imap-2007
--with-imap-ssl 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-09-07T10:55:16.203

旧线程永远不会死......

我在 OSX Yosemite 10.10.5 上，并且已经安装了我自己的 php，目前是 5.6.1，并且想要升级到 5.6.13 - 在 imap 之后遇到了同样的错误。

看到这个线程，然后根据我现有的输出运行`brew install imap-uw`然后运行。`configure``phpinfo`

```
./configure \
--prefix=/usr/local/php5 \
--with-apxs2=/usr/sbin/apxs \
--with-config-file-scan-dir=/usr/local/php5/php.d \
--with-openssl=/usr \
--with-zlib=/usr \
--with-zlib-dir=/usr \
--with-gd \
--with-ldap \
--with-xmlrpc \
--enable-exif \
--enable-soap \
--enable-wddx \
--enable-ftp \
--enable-sockets \
--with-bz2=/usr \
--enable-zip \
--enable-shmop \
--enable-sysvsem \
--enable-sysvshm \
--enable-sysvmsg \
--enable-mbstring \
--enable-bcmath \
--enable-calendar \
--with-mhash \
--enable-fpm \
--with-mysql=mysqlnd \
--with-mysqli=mysqlnd \
--with-pdo-mysql=mysqlnd \
--enable-pcntl \
--enable-dtrace \
--enable-opcache \
--disable-phpdbg \
--with-icu-dir=/usr/local/php5 \
--with-mssql=shared,/usr/local/php5 \
--with-pdo-dblib=shared,/usr/local/php5 \
--with-libxml-dir=shared,/usr/local/php5 \
--with-xsl=shared,/usr/local/php5 \
--with-imap=shared,/usr/local/Cellar/imap-uw/2007f \
--with-kerberos=/usr \
--with-imap-ssl=/usr \
--with-gettext=/usr/local/php5 \
--with-curl=shared,/usr/local/php5 \
--with-png-dir=/usr/local/php5 \
--with-jpeg-dir=/usr/local/php5 \
--enable-gd-native-ttf \
--with-freetype-dir=/usr/local/php5 \
--with-pgsql=shared,/usr/local/php5 \
--with-pdo-pgsql=shared,/usr/local/php5 \
--with-mcrypt=shared,/usr/local/php5 \
--with-tidy=/usr/local/php5 \
--with-gmp=shared,/usr/local/php5 \
--with-readline=shared,/usr/local/php5 
```

然后`make`。它似乎工作正常。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-30T09:24:20.653

我已经安装了以下软件包并且它可以工作：
**uw-imap-devel**

在 CentOS 7.x 上运行此命令：
`yum -y install uw-imap-devel`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-06-27T00:39:37.400

在尝试编译 PHP 5.5.0 时，我在 Fedora 上遇到了同样的问题。

问题与`'--with-imap'`配置参数有关。

为了解决这个问题，我从最新的源代码（当前为 imap-2007f）编译了我自己的 imap 版本，为此我必须安装一些先决条件。在fedora上我做了这个......

```
yum install openssl openssl-devel pam-devel
wget ftp://ftp.cac.washington.edu/imap/imap-2007f.tar.gz
tar zxvf imap-2007f.tar.gz 
```

然后我必须建立一个软链接，以便编译器可以找到这些库。就我而言，我做了以下事情：

```
mkdir /usr/local/ssl
ln -s /usr/include /usr/local/ssl/include 
```

然后编译：

```
cd imap-2007f
make lnp SSLTYPE=unix EXTRACFLAGS=-fPIC 
```

然后我可以通过将 imap 源路径添加到配置参数来编译 PHP，如下所示：

```
/path/to/php/src> ./configure ...other_params... '--with-imap=/path/to/imap-2007f' '--with-imap-ssl' 
make
make install 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-04-08T17:35:03.173

带有 Apache 的 Docker 和 PHP（php:apache 默认映像）可以用于：

```
RUN apt-get update && apt-get install libc-client-dev libkrb5-dev && \
    docker-php-ext-configure imap --with-kerberos --with-imap-ssl && apt-get clean 
```

可能需要其他依赖项，具体取决于安装。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-05-02T21:44:48.433

在安装 php 之前安装 imap。

> 冲泡安装 imap-uw

然后

> brew install php55 --with-fpm --with-imap --without-apache --with-debug

然后 --with-imap 选项应该可以正常运行。

# android - Android Column GridView，可变宽度，如 GooglePlus App

> ID：13436359
> 
> 赞同：18
> 
> 时间：2012-11-18T00:42:59.633
> 
> 标签：android, android-layout, google-plus, android-view

所以像大多数人一样，我们都使用/看过 Google Plus 应用程序。

让我感兴趣的是他们开发的ColumnGridView，它不仅可变宽度，而且可变高度，似乎基于内容会愉快地为CardView显示最佳空间。

很少有可能的解决方案可以复制这一点，但只真正寻找最好的解决方案，当然是谷歌实现。

1.  是的，这可以通过 TableView 来实现 - 但如果没有视图回收器，那将是糟糕的编程。
2.  我自己的自定义实现，基于 ListView/GridView - 并非不可能，但需要大量工作。
3.  理想情况下使用我假设与 Google Now/Plus 相同的 Google，因为它们基于“卡片”样式项目执行相同的方式。

那么有人遇到过这个吗？

我可以使用任何教程、示例和源代码来节省我的注意力吗？

甚至可能来自谷歌的一些方向，它是如何计算尺寸的？

![谷歌加](../Images/4eddd5ac3d0bc26f5cc4ef82228b92ba.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-18T11:06:25.130

`StaggeredGridView`当前存在于`frameworks/ex/widgets/`AOSP 的文件夹中，这似乎是 Google+ 正在使用的（或它的变体，可能）。

它将在最新的支持库版本 (r11) 中，直到它被 Katherine Kuan 恢复`b54e36f2`并移至实验性 repo。

# sqlite - SQLite“PRIMARY KEY 必须是唯一的”，而并发 SELECT 查询

> ID：13436360
> 
> 赞同：0
> 
> 时间：2012-11-18T00:43:05.627
> 
> 标签：sqlite

对于网络爬虫，我正在将一个带有 INSERT INTO 表的进程运行到一个 2GB（2000 万行）的巨大表中。有时，长时间运行的第二个进程“SELECT * from table”查询会导出所有行（并转换数据）。当 SELECT * 运行时，该表当然被锁定以进行写入。所以 INSERT INTO 查询会抛出异常。我在第一个过程中捕获异常并每分钟重试一次，直到它起作用。

奇怪的是，在异常被捕获并且理论上 INSERT 可以通过之后，插入*总是*失败并出现错误“sqlite3.IntegrityError：PRIMARY KEY must be unique”。当我检查表格时，我确信没有一个主键是重复的。该行实际上根本没有添加。当我重新尝试手动插入行时，它可以工作。

我怀疑正在进行一些与异常有关的回滚。我不知道该怎么做（没有创建一个信号文件来告诉第一个进程不要接触数据库）。有任何想法吗？

或者更好的是，关于如何正确解决一般问题的任何其他想法：一个进程写入一个表，第二个进程不时需要完整的表？

这是在带有 python 2.7 的 sqlite 3.5.9 中。（由于增加了依赖，我不希望升级 sqlite。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:18:46.163

如果启用[预写日志记录](http://www.sqlite.org/wal.html)，您可以同时拥有读取器和写入器。（但是你必须找到时间进行检查点。）

# php - 在 php.ini 中找不到 extension_dir

> ID：13436365
> 
> 赞同：0
> 
> 时间：2012-11-18T00:44:16.210
> 
> 标签：php

我正在尝试找到设置 extension_dir 的位置。我查看了加载的配置文件（cli 和 web），但它不在那里。但是， phpinfo 和 php -i 都显示设置的值。

当 dir 未在 php.ini 中明确设置时，是否有备用默认值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:47:46.127

你有什么Linux发行版？您可以按模块搜索：

例如：

```
shell ~ # php -m 
[PHP Modules]
gd
hash
.....
shell ~ # find /usr -name gd.so 
```

# haskell - 操作“任意”元组

> ID：13436366
> 
> 赞同：5
> 
> 时间：2012-11-18T00:44:19.710
> 
> 标签：haskell

我有简单的元组（例如从数据库中读取），我不知道元素的数量也不知道内容。例如 `(String, Int, Int)`或`(String, Float, String, Int)`。

我想编写一个通用函数，它将采用各种元组并用字符串“NIL”替换所有数据。如果字符串“NIL”已经存在，它应该保持不变。

回到例子： `("something", 3, 4.788)`应该导致`("something", "NIL", "NIL")`

`("something else", "Hello", "NIL", (4,6))`应该导致`("something else", "NIL", "NIL", "NIL")`

我显然不知道从哪里开始，因为用已知的元组来做这件事不会有问题。没有模板 Haskell 是否有可能达到我想要的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T08:50:20.210

可以使用`GHC.Generics`，我想我会在这里记录它以保持完整性，尽管我不会推荐它而不是这里的其他建议。

这个想法是将您的元组转换为可以进行模式匹配的东西。典型的方法（我相信`HList`使用）是从 n 元组转换为嵌套元组：`(,,,)`-> `(,(,(,)))`。

`GHC.Generics``:*:`通过将元组转换为产品构造函数的嵌套应用程序来做类似的事情。`to`并且`from`是将值与它们的通用表示进行转换的函数。元组字段通常由新类型表示`K1`，所以我们要做的是向下递归遍历元数据 ( `M1`) 和产品 ( `:*:`) 节点的树，直到找到`K1`叶节点（常量）并将其内容替换为“NIL”字符串.

`Rewrite`type 函数描述了我们如何修改类型。`Rewrite (K1 i c) = K1 i String`声明我们要用 . 替换每个值（`c`类型参数）`String`。

给定一个小测试应用程序：

```
y0 :: (String, Int, Double)
y0 = ("something", 3, 4.788)

y1 :: (String, String, String, (Int, Int))
y1 = ("something else", "Hello", "NIL", (4,6))

main :: IO ()
main = do
  print (rewrite_ y0 :: (String, String, String))
  print (rewrite_ y1 :: (String, String, String, String)) 
```

我们可以使用通用重写器来生成：

```
*主> :主
（“某事”、“无”、“无”）
（“别的东西”，“无”，“无”，“无”）

```

使用内置`Generics`功能和类型类进行实际转换：

```
{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE TypeOperators #-}

import Data.Typeable
import GHC.Generics

rewrite_
  :: (Generic a, Generic b, Rewriter (Rep a), Rewrite (Rep a) ~ Rep b)
  => a -> b
rewrite_ = to . rewrite False . from

class Rewriter f where
  type Rewrite f :: * -> *
  rewrite :: Bool -> f a -> (Rewrite f) a

instance Rewriter f => Rewriter (M1 i c f) where
  type Rewrite (M1 i c f) = M1 i c (Rewrite f)
  rewrite x = M1 . rewrite x . unM1

instance Typeable c => Rewriter (K1 i c) where
  type Rewrite (K1 i c) = K1 i String
  rewrite False (K1 x) | Just val <- cast x = K1 val
  rewrite _ _ = K1 "NIL"

instance (Rewriter a, Rewriter b) => Rewriter (a :*: b) where
  type Rewrite (a :*: b) = Rewrite a :*: Rewrite b
  rewrite x (a :*: b) = rewrite x a :*: rewrite True b 
```

还有一些本示例未使用的实例，其他数据类型需要它们：

```
instance Rewriter U1 where
  type Rewrite U1 = U1
  rewrite _ U1 = U1

instance (Rewriter a, Rewriter b) => Rewriter (a :+: b) where
  type Rewrite (a :+: b) = Rewrite a :+: Rewrite b
  rewrite x (L1 a) = L1 (rewrite x a)
  rewrite x (R1 b) = R1 (rewrite x b) 
```

通过更多的努力，`Typeable`可以从`K1`实例中删除约束，由于重叠/UndecidableInstances，它是否更好是有争议的。GHC 也无法推断结果类型，尽管它似乎应该能够。在任何情况下，结果类型都必须正确，否则您将收到难以阅读的错误消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T07:01:52.657

查看[HList](http://hackage.haskell.org/package/HList)或[Vinyl](https://github.com/jonsterling/Vinyl)包作为使用元组的替代方案。

Vinyl 需要 GHC 7.6，并且预计很快就会对 HList 进行更新（根据最新的 Haskell 社区活动报告）。特别是 HList 似乎非常适合表示 SQL 查询的结果。

关于 HList：

> HList 是一个全面的通用 Haskell 库，用于类型化的异构集合，包括可扩展的多态记录和变体。HList 类似于标准列表库，提供了许多不同的构造、查找、过滤和迭代原语。与常规列表相比，异构列表的元素不必具有相同的类型。HList 允许用户制定静态可检查的约束：例如，集合中没有两个元素可能具有相同的类型（因此元素可以通过它们的类型明确索引）。
> 
> ...
> 
> 2012 年 10 月版本的 HList 库标志着重大的重写，以利用 GHC 7.4+ 提供的更高级的类型。HList 现在依赖于类型级布尔值、自然数和列表，以及种类多态性。许多操作被实现为类型函数。另一个值得注意的新增功能是展开异构列表。许多操作（投影、分割）现在都是在展开方面实现的。这样的重构将更多的计算转移到类型级别，没有运行时开销。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T15:16:00.500

有人在评论中提到了这一点，但也许你应该使用列表而不是元组。你用：

```
data MyType = S String | D Double

someData :: [MyType] 
```

然后你可以使用简单的转换列表`map`：

```
convert :: MyType -> String
convert (S str) = str
convert _       = "NIL"

convertList :: [MyType] -> [String]
convertList = map convert 
```

我也不明白你怎么不知道你的值源的元组大小是多少。你或许应该澄清一下。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-18T02:47:57.540

在 haskell 中，每个元组都是另一种类型，所以我认为如果没有 TH 就无法以任何简单的方式编写函数。GHC 还对允许的最大元组大小施加了限制。Haskell 标准只说编译器应该允许元组至少达到 15 的大小。像

```
Prelude> let a = (1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0)

<interactive>:2:9:
    A 70-tuple is too large for GHC
      (max size is 62)
      Workaround: use nested tuples or define a data type 
```

所以我认为你应该尝试使用其他数据类型，而不是使用元组。

# vim - 跳转到上一个位置在 vim 中不起作用

> ID：13436372
> 
> 赞同：2
> 
> 时间：2012-11-18T00:45:39.270
> 
> 标签：vim

出于某种奇怪的原因，ctrl-i/o 组合跳到上一个/下一个位置对我不起作用。

正如对 OP [Jump with Ctrl-O/I 的评论中所建议的那样，在我的 Vim 中不起作用](https://stackoverflow.com/questions/4192545/jump-with-ctrl-o-i-doesnt-work-in-my-vim)

`:verbose map <C-o>`并`:verbose map <C-i>`给我“找不到映射”。

我如何恢复这些键映射？

编辑：这是我的 vimrc [http://pastebin.com/bX2NkNgz](http://pastebin.com/bX2NkNgz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:01:00.087

你应该使用

```
:verbose map <C-o>
:verbose map <C-i> 
```

或者您可以分别按`C-v``C-i`和`C-v``C-o`

（如果在 Windows 上，您可能需要使用`C-q`而不是`C-v`）

* * *

PS。你在窗户上吗？`behave mswin`如果是这样，请尝试`source mswin.vim`从`$MYVIMRC`. 重新开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:12:08.120

`<C-o>`并且`<C-i>`是内置的：你不会用`:map`. 对于任何其他`d`或`zM`.

只是为了确定，您是否处于*正常*模式？你在“简单”模式下使用 Vim 吗？你能告诉我们你的 vimrc 的内容吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-15T03:37:57.470

我处于同样的情况。

您使用 tmux 或其他终端多路复用器吗？

就我而言，我覆盖了 vim 键映射打击代码，所以我删除了下面的代码，然后 finally`<C-o>`运行`<C-i>`良好。

`bind-key -n C-o run "tmux select-pane -l || tmux select-pane -t :.+"`

# ruby-on-rails - Rails：使用 Bootstrap-Sass，你如何使用 Mixin？

> ID：13436379
> 
> 赞同：3
> 
> 时间：2012-11-18T00:46:27.097
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass, gradient

我找不到关于如何使用 bootstrap-sass 中的 mixins 的好的参考资料。我正在尝试为我的背景颜色添加渐变效果，并且我想学习如何使用 mixin 中的内置渐变功能。

```
// Gradients
@mixin gradient-horizontal($startColor: #555, $endColor: #333) {
  background-color: $endColor;
  background-image: -moz-linear-gradient(left, $startColor, $endColor); // FF 3.6+
  background-image: -webkit-gradient(linear, 0 0, 100% 0, from($startColor),     to($endColor)); // Safari 4+, Chrome 2+
  background-image: -webkit-linear-gradient(left, $startColor, $endColor); // Safari   5.1+, Chrome 10+
  background-image: -o-linear-gradient(left, $startColor, $endColor); // Opera 11.10
  background-image: linear-gradient(to right, $startColor, $endColor); // Standard, IE10
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#{ie-hex-  str($startColor)}', endColorstr='#{ie-hex-str($endColor)}', GradientType=1); // IE9 and   down
} 
```

在**application.css.scss**文件中，我尝试了

```
body {
padding-right: 50px;
padding-left: 50px;
gradient-vertical($startcolor: $white, $endcolor: #08C);
} 
```

但没有奏效。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T00:53:18.277

试试这个：

```
body {
  padding-right: 50px;
  padding-left: 50px;
  @include gradient-vertical($white, #08c);
} 
```

`$startcolor: $white`mixin 参数通常是可选的（除非您省略了一些或将它们声明为乱序），但是像使用它们（等）一样使用它们并没有错。您唯一缺少的是`@include`. 还要确保你有`@import "bootstrap";`在顶部`application.css.scss`。

您可以参考[SASS 参考](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixins)以获取更多信息。

# android - Android单选按钮是否或切换？

> ID：13436382
> 
> 赞同：0
> 
> 时间：2012-11-18T00:47:19.263
> 
> 标签：android, radio-button, switch-statement, onclicklistener, buttonclick

![在此处输入图像描述](../Images/958395c8ee0d0057e6d1ea6de7750e2d.png)

大家好，我的第一个 android 应用程序需要一些帮助，并且我有一点编程经验。所以首先我想做的是“让用户选择他们想要转换的任何方法，让他们在 TextView 中输入值，然后按下转换按钮以吐司结束它。”

目前，我在使用 toast 输出完成按钮时遇到问题`onClickListener()`，我无法从 switch/case 中的字符串获取结果。另外我不确定我的代码是否还可以，因为我无法测试它:(。我花了几个小时试图让它工作但没有运气。需要有人指出我正确的方向和我需要看的东西，拜托.

```
 class convert_handler_CMtoM implements Button.OnClickListener {

    public void onClick(View v) {

        if (v == btnDisplay) {

            if (MMtoCM.isChecked())
            {
                int Amount = (int) Float.parseFloat(et1.getText().toString());
                int formula = (int) (Amount * 10) ; 
                String result = String.valueOf(formula);
            }

            if (CMtoMM.isChecked())
            {
                double Amount = (double)Float.parseFloat(et1.getText().toString());
                double formula = (double) (Amount / 10) ; 
                String result = String.valueOf(formula);
            }
        }

    }   

    private OnClickListener btnDisplay = new OnClickListener() {
        public void onClick(View v) {
            // Perform action on clicks
            RadioButton rb = (RadioButton) v;
            Toast.makeText(second.this, rb.getText(), result, Toast.LENGTH_SHORT).show();
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:59:27.417

```
package com.example.radiobuttongroup;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.RadioButton;
import android.widget.Toast;

import com.example.radiobuttongroup.R.id;

public class MainActivity extends Activity {

    RadioButton rd1, rd2, rd3;
    Button btn1;
    int type;
    String title;
    EditText input;
    AlertDialog.Builder editalert;
    AlertDialog alertd;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        rd1 = (RadioButton) findViewById(id.radioButton1);
        rd2 = (RadioButton) findViewById(id.radioButton2);
        rd3 = (RadioButton) findViewById(id.radioButton3);
        btn1 = (Button) findViewById(id.button1);

        rd1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                rd2.setChecked(false);
                rd3.setChecked(false);
                type = 1;
                title = "cm to m";
            }
        });

        rd2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                rd1.setChecked(false);
                rd3.setChecked(false);
                type = 2;
                title = "m to cm";

            }
        });

        rd3.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                rd2.setChecked(false);
                rd1.setChecked(false);
                type = 3;
                title = "mm to cm";
            }
        });

        btn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                calculate(title, type);

            }
        });
    }

    void calculate(String title, final int type) {
        try {

            editalert = new AlertDialog.Builder(MainActivity.this);
            alertd = editalert.create();
            editalert.setTitle("Calculator");
            editalert.setMessage(title);
            input = new EditText(MainActivity.this);
            LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.FILL_PARENT,
                    LinearLayout.LayoutParams.FILL_PARENT);
            input.setLayoutParams(lp);
            input.setText("1000");
            editalert.setView(input);

            editalert.setPositiveButton("Convert",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int whichButton) {
                            int value = Integer.valueOf(input.getText().toString());

                            switch (type) {
                            case 1:
                                Toast.makeText(
                                        MainActivity.this,
                                        String.valueOf(value / 100),
                                        Toast.LENGTH_LONG).show();
                                dialog.cancel();
                                alertd.dismiss();
                                break;

                            case 2:
                                Toast.makeText(MainActivity.this,
                                        String.valueOf(value * 100),
                                        Toast.LENGTH_LONG).show();
                                dialog.cancel();
                                alertd.dismiss();
                                break;

                            case 3:
                                Toast.makeText(MainActivity.this,
                                        String.valueOf(value / 100),
                                        Toast.LENGTH_LONG).show();
                                dialog.cancel();
                                alertd.dismiss();
                                break;
                            default:
                                break;
                            }

                        }
                    });
            editalert.show();
        } catch (Exception e) {
            Log.v("hata", e.toString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:15:36.900

尝试使用[RadioGroup](http://developer.android.com/reference/android/widget/RadioGroup.html)并设置[RadioGroup.OnCheckedChangeListener](http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html)。

每次`int`用户`checkedId`更改`RadioButton`.

单击“转换”按钮时，只需使用块中`RadioButton`最后选择的 id`switch`来决定使用哪个转换。

# javascript - javascript: 未知 - 为什么未定义的变量

> ID：13436393
> 
> 赞同：0
> 
> 时间：2012-11-18T00:48:56.230
> 
> 标签：javascript, function, object, appendchild

下面的代码是让一个杠杆来回移动并改变一个正方形的颜色。但是，以下是我被卡住的元素的基本内容。IE 给我的错误是“属性 'appendChild' 的值：对象为空或未定义” 这位于代码中的 XXXXX 处。此外，当我编写此代码时，我对何时使用“”以及何时使用我们感到困惑。它运行良好，直到 XXXX 出现错误。

```
 function sliderBox(style){ 
     this.style = style;
     var line = null;
     var bar = null;
     var divElem1 = document.createElement('div');
     this.divElem = divElem1.setAttribute('class', 'sliderBox');

    this.constructDOM = function(){ 
     line = new sliderLine();
     bar = new sliderBar(style);
     var ldE = line.divElem;  
     ldE.appendChild(bar.divElem);  XXXXXX PROBLEM HERE
     var tdE = this.divElem;
     tdE.appendChild(line.divElem);
   }    

 }

  function sliderLine(){
    var divElem1 = document.createElement('div');
    this.divElem = divElem1.setAttribute("class", "sliderLine");
  }

  function sliderBar(style){
    this.style = style;
    var divElem1 = document.createElement('div');
    var sBs = "sliderBar" + style;
    this.divElem = divElem1.setAttribute('class', sBs);
  } 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:22:13.943

您在代码的最后一行将 divElem 分配给 setAttribute 的返回值。setAttribute 的返回值为 null 或 undefined [1]。当您尝试在标有 XXXX 的行中附加Child 时，会出现错误。您应该将 sliderBar 函数更改为

```
function sliderBar(style){
   this.style = style;
   var divElem1 = document.createElement('div');
   var sBs = "sliderBar" + style;
   divElem1.setAttribute('class', sBs);
   this.divElem = divElem1;
} 
```

[1] [http://reference.sitepoint.com/javascript/Element/setAttribute](http://reference.sitepoint.com/javascript/Element/setAttribute)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:33:02.550

简而言之，`element.setAttribute`方法不返回任何内容（参见[this](http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#method-setAttribute)）。换句话说，您`this.divElem`在 sliderLine 构造函数中没有分配任何内容。这就是为什么（sliderLine 实例）的属性什么都不是`divElem`。`line`"nothing" 可以实现为`undefined`or `null`，它不获取任何属性。因此，当我们尝试访问 or 上的属性时，IE 给了我们“对象为空或未定义`null`” `undefined`。

# javascript - jQuery Cycle：如何添加标题、标题和自定义寻呼机图像

> ID：13436394
> 
> 赞同：1
> 
> 时间：2012-11-18T00:48:58.200
> 
> 标签：javascript, jquery, slider, cycle, jquery-cycle

我能够让 jQuery Cycle 动态生成我想要的图像。但是，我对如何`rgba(0.0.0.04)`在幻灯片的左下角添加自定义寻呼机（使用图像精灵）、标题和标题框/水印（不透明度）感到头疼。

图像数组已经将标题分配给图像`alt`，将标题分配给图像，`title`如下所示：`<img src="banner[i].image" alt="banner[i].caption" title="banner[i].title" />`

这是 jsFiddle：http: [//jsfiddle.net/rkSqj/1/](http://jsfiddle.net/rkSqj/1/)

我想实现类似于[http://slidesjs.com/examples/images-with-captions/](http://slidesjs.com/examples/images-with-captions/) 但我不需要 (Next/Prev) 控件。

我无法显示寻呼机，更不用说其他自定义设置了 >_< 非常感谢您的帮助。

虽然我使用的是 jsFiddle，但为方便起见，我仍在添加代码 ;-)

HTML：

```
<!-- #gallery.banner -->
    <div id="banner">
    </div>
<!-- /#gallery.banner --> 
```

CSS：

```
@charset "utf-8";
#banner {
    width: 550px;
    height: 225px;
    float:left;
    box-shadow: -2px 15px 50px 10px #888888;
}
#banner a {
    margin: 0;
    padding: 0;
    color: #fff;
}
#banner img {
    width: 550px;
    height: 220px;
    border: 2px solid #DBDBDB;
    border-radius: 4px;

    padding: 4px;
    background-color: #F3F3F3;
}

/* Pager CSS */
#banner #pager.active {
    width:12px;
    height:13px;
    background:url(http://slidesjs.com/examples/images-with-captions/img/pagination.png) 0px -12px;
}
#banner #pager.inactive {
    width:12px;
    height:13px;
    background:url(http://slidesjs.com/examples/images-with-captions/img/pagination.png) 0px 0px;
}

/* Watermark CSS */
#banner #watermark {
    background-color: #000000;
    background-color: rgba(0.0.0.04);
}
#banner #watermark #title {
    color: #FFFFFF;
    font-weight: bold;
}
#banner #watermark #caption {
    color: #FFFFFF;
    font-weight: normal;
} 
```

JS: 变量 $banner = ; //整个数据在jsFiddle里面

$(document).ready(function(){ $().append(' ');

```
for( $i = 0; $i < $banner.length; ++$i){
    $('#banner').append('<a href="' + $banner[$i].link + '"><img src="' + $banner[$i].image + '" alt="' + $banner[$i].caption + '" titile="' + $banner[$i].titile + '" /></a>');
}

$('#banner').cycle( {
    fx: 'fade',
    timeout: 1500,
    speed: 4000,
    pager: "#pager",
}); 
```

});

**=== 编辑（11/21/2012）===**
最终修订：http: [//jsfiddle.net/omarjuvera/WX77f/18/](http://jsfiddle.net/omarjuvera/WX77f/18/)

谢谢[@eicto](https://stackoverflow.com/users/815386/eicto)！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T04:21:02.023

为您的元素添加标题`<a>`，为标题制作一个 CSS

[样本](http://jsfiddle.net/oceog/rkSqj/2/)

JS：

```
for( $i = 0; $i < $banner.length; ++$i){
        $('#banner').append('<a href="' + $banner[$i].link 
          + '"><img src="' + $banner[$i].image + '" alt="' + $banner[$i].caption + '" titile="'          
          + $banner[$i].titile
          + '" /><div class="caption" style="bottom:0">' 
          + $banner[$i].caption + '</div></a>');
    } 
```

CSS

```
a .caption {
    margin-top: -10px;
    color:white;
    text-decoration: none;
    position: absolute;
    text-align: center;
    background: black;
    opacity: 0.6;
    width: 100%;
} 
```

关于寻呼机，循环具有生成寻呼机的回调函数，所以我只生成了与其他插件相同的元素：

[http://jsfiddle.net/oceog/rkSqj/14/](http://jsfiddle.net/oceog/rkSqj/14/)

```
$('#banner').cycle( {
        fx: 'fade', 
        timeout: 15000, 
        speed: 400,
        pager: "#pager",
        //build new pager!
        pagerAnchorBuilder: function(index,dom) {
        console.log(index,dom);
        return "<li><a href='#'>"+index+"</li>";
}
}); 
```

CSS：

```
#pager {
    margin:0px auto 0;
    top: 30px;
    width:100px;
    position: relative;
    z-index: 1005;
}

#pager li {
    float:left;
    margin:0 1px;
}

#pager li a {
    display:block;
    width:12px;
    height:0;
    padding-top:12px;
    float:left;
    overflow:hidden;
    background-image:url(http://slidesjs.com/examples/images-with-captions/img/pagination.png);
    background-position:0 0;
}
#pager li.activeSlide a {
     background-position:0 -12px;  
}
​ 
```

到我刚刚添加的 html`<ul id="pager"></ul>`

# url - erlang中的URL处理

> ID：13436395
> 
> 赞同：2
> 
> 时间：2012-11-18T00:49:00.057
> 
> 标签：url, erlang

是否有现成的 erlang 库用于处理具有以下功能的 URL：

*   从 URL 中提取方案、域、路径和文件部分
*   路径连接
*   解析`.`和`..`路径元素

更轻量级的更可取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:35:57.883

你可以看看Erlware的[uri包](https://github.com/erlware/uri/blob/master/src/uri.erl)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T08:32:19.800

Mochiweb 在模块[mochiweb_util](https://github.com/bipthelin/mochiweb_util/blob/master/src/mochiweb_util.erl)中包含一个 URL 解析器。

最小代码示例：

```
{"http", "host:port", "/foo", "", "bar?baz"} =
    mochiweb_util:urlsplit("http://host:port/foo#bar?baz"). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T02:17:33.460

检查这个：[https ://github.com/stfairy/eurl/blob/master/eurl.erl](https://github.com/stfairy/eurl/blob/master/eurl.erl)

我只是为这个问题写的。稍后将添加测试。

顺便说一句，我不太明白什么是*路径连接*:-)

# javascript - 使用 JavaScript 写入文本文件？

> ID：13436398
> 
> 赞同：2
> 
> 时间：2012-11-18T00:49:42.567
> 
> 标签：javascript, activex, activexobject

我需要从我的一个博客页面中捕获搜索主题并将其写入文本文件以进行跟进。我已经能够捕获输入字符串，但是无法将其写入文本文件。我已阅读并尝试实施我找到的所有解决方案，但均未成功。我包含一个非常简单的代码示例来将文本写入文件，但我无法让它工作。Onblur 事件可以很好地访问 myFunction，所以这不是问题。我快疯了，因为其他人展示的样本是如此简单。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" >
    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>fs=Server CreateObject ("Scripting FileSystemObject")</title>
    <script type="text/javascript">
    function myFunction()
    {
        var fs = ActiveXObject("Scripting.FileSystemObject");
        var f = fs.OpenTextFile("d:\\test\\topics.txt", 8, true);
        f.WriteLine("This text will be added to the end of file");
        f.Close();
    }
    </script>
    </head>

    <body>
    <input name="Text1" type="text" size="55" onblur="myFunction()" />

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:54:14.330

JavaScript[无法](http://javascript.about.com/od/reference/a/cannot.htm)从客户端读取/写入文件或将文件（直接）写入服务器。

如果您想将文件写入服务器，请考虑使用将与您的 javascript 交互的服务器端脚本 - 以及如何使用一点 PHP 来执行此操作的[示例。](http://www.dreamincode.net/forums/topic/69055-how-to-save-a-txt-file-to-a-server-using-php-code/)

在客户端文件交互方面，出于安全原因，这根本是不可能的（除非它被上传到脚本，在这种情况下它可以读取）。

但是，您可以将数据存储在客户端上——我以前一直在使用[jStorage](http://www.jstorage.info/)并强烈推荐它。它可以跨浏览器工作（甚至在 IE 6 上）并且非常易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:45:19.840

如果您使用的是支持 data-uri 的现代浏览器，您可以使用 javascript 创建内容并通过 base64 编码强制下载并使其与 data-uri 兼容，然后只需将窗口位置指向它即可。

[这个答案演示了一种纯 HTML 的方法。](https://stackoverflow.com/questions/10473932/browser-html-force-download-of-image-from-src-dataimage-jpegbase64)

您也可以使用 flash 助手来解决这个问题。[例如，Downloadify 就是这样做的。](http://pixelgraphics.us/downloadify/test.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:44:28.973

感谢成员提供的所有建议，我能够在服务器上执行写入和附加到文本文件。我使用 html 代码获取写入所需的数据，然后调用 .php 文件来写入文件。这是客户端与服务器端的问题，.php 使用 fopen、fwrite 和 fclose 解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-27T16:29:04.613

从技术上讲，当在 (.hta) 文件中使用 javascript 时，您可以使用 ActiveXObject`Scripting.FileSystemObject`访问文件系统，有了它，您需要对您有权执行的文件系统执行任何操作。

```
var fso=new ActiveXObject("Scripting.FileSystemObject");
if(fso.FolderExists("C:\\Users\\")){
  alert("It exists, hello friend!");
}eles{
  alert("Doesn't exist, who are you?");
} 
```

# objective-c - Instagram API RequestToken URL？

> ID：13436406
> 
> 赞同：0
> 
> 时间：2012-11-18T00:50:29.773
> 
> 标签：objective-c, ios, cocoa-touch, oauth-2.0, instagram

我正在使用 GTM OAuth 库将 Instagram 集成到我的应用程序中。GTMOAuthViewControllerTouch init 方法的签名如下所示：

```
- (id)initWithScope:(NSString *)scope
           language:(NSString *)language
    requestTokenURL:(NSURL *)requestURL
  authorizeTokenURL:(NSURL *)authorizeURL
     accessTokenURL:(NSURL *)accessURL
     authentication:(GTMOAuthAuthentication *)auth
     appServiceName:(NSString *)keychainAppServiceName
           delegate:(id)delegate
   finishedSelector:(SEL)finishedSelector; 
```

我被困在的是`requestTokenURL`. instagram 文档列出了`access/authorize tokenURL`，但他们没有提到任何关于`requestTokenURL`. 有人知道这个网址是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:24:16.573

Instagram 使用 OAuth 2.0，而不是 OAuth 1.0。这`requestTokenURL`是 OAuth 1.0 的一部分。如果您正在使用`GTMOAuthViewControllerTouch`，您可能使用了错误版本的库，因为 Google 的 OAuth 2.0 兼容库中不存在该类。

请尝试获取[http://code.google.com/p/gtm-oauth2/](http://code.google.com/p/gtm-oauth2/)。

# ruby - 嵌套形式的未知属性错误 - Rails 3.2

> ID：13436407
> 
> 赞同：0
> 
> 时间：2012-11-18T00:50:39.990
> 
> 标签：ruby, ruby-on-rails-3.2, nested-attributes

我有一个活动模型和一个场地模型。每个活动有1个场地。但是一个场地可以有多个活动。作为活动创建过程的一部分，我还想捕获有关场地的信息并将其存储。现在我正在为嵌套表单设置而苦苦挣扎。我收到以下错误：

```
ActiveRecord::UnknownAttributeError in EventsController#new
unknown attribute: event_id 
```

事件模型

```
class Event < ActiveRecord::Base
attr_accessible :name, :budget, :user_id, :venue_id, :client, :date, :description, 
:attendees, :assets_attributes, :tag_list, :venue_attributes
belongs_to :user

has_many :assets, :dependent => :destroy
has_many :vendors
has_one :venue

accepts_nested_attributes_for :assets, :allow_destroy => true
accepts_nested_attributes_for :vendors, :allow_destroy => true
accepts_nested_attributes_for :venue, :allow_destroy => true
acts_as_taggable
end 
```

场地模型

```
class Venue < ActiveRecord::Base
attr_accessible :capacity, :city, :contact, :country, :email, :exclusiveVendors,:fee, 
:latitude, :longitude, :name, :state, :street, :tel, :union
belongs_to :event
has_many :vendors
acts_as_gmappable
has_many :events
end 
```

事件控制器

```
def new
  @event = Event.new
  5.times { @event.assets.build }
  venue = @event.build_venue()
  # respond_to do |format|
  #   format.html # new.html.erb
  #   format.xml  { render :xml => @event }
  # end

end

def create
  @user = current_user
  @event = Event.new(params[:event])
  @event.create_venue()

  5.times { @event.build_assets}
  if @event.save
    redirect_to @event, :notice => "Successfully created event."
  else
    render :action => 'new'
  end
end 
```

表格（摘录）

```
<%= f.fields_for :venue do |builder| %>

    <%= builder.label :name %><br />
    <%= builder.text_field :name %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:29:11.540

我认为你在这里搞错了关系。Venue 模型应该有 has_many :events 和 Event 模型应该有 belongs_to :venue 和一个名为venue_id 的字段。

并从 Event 模型中删除 has_one :venue 和从 Venue 模型中删除 belongs_to :event 。

# windows - 什么是 %0|%0，它是如何工作的？

> ID：13436408
> 
> 赞同：84
> 
> 时间：2012-11-18T00:50:48.087
> 
> 标签：windows, command-line

如果您在其中运行 .bat 或 .cmd 文件`%0|%0`，您的计算机开始使用大量内存，几分钟后重新启动。为什么此代码会阻止您的 Windows？这段代码以编程方式做了什么？它可以被认为是一个“错误”吗？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-11-18T00:52:46.533

这是一个[**fork 炸弹**](https://en.wikipedia.org/wiki/Fork_bomb)的 Windows 版本。

`%0`是当前正在执行的批处理文件的名称。只包含这一行的批处理文件：

```
%0|%0 
```

将永远递归地执行自身，快速创建许多进程并减慢系统速度。

这不是 Windows 中的错误，它只是在批处理文件中做的一件非常愚蠢的事情。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-28T21:54:19.813

这被称为叉形炸弹。它不断分裂，直到别无选择，只能重新启动系统。 [http://en.wikipedia.org/wiki/Fork_bomb](http://en.wikipedia.org/wiki/Fork_bomb)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-12-14T00:02:47.433

# 这是什么：

`%0|%0`是**[叉子炸弹](http://en.wikipedia.org/wiki/Fork_bomb)**。它将使用管道生成另一个进程，该管道`|`异步运行同一程序的副本。这会占用 CPU 和内存，使系统减速到几乎停止（甚至使系统崩溃）。

# 这是如何工作的：

`%0`指用来运行当前程序的命令。例如，`script.bat`

管道`|`符号将使第一个命令序列的输出或结果作为第二个命令序列的输入。在 fork 炸弹的情况下，没有输出，因此它只会运行第二个命令序列而无需任何输入。

扩展示例，`%0|%0`可能意味着`script.bat|script.bat`. 这会再次运行自己，但也会创建另一个进程来再次运行相同的程序（没有输入）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-01-21T01:01:47.747

%0 永远不会结束，但它永远不会创建多个进程，因为它会立即将控制权转移到第二个批处理脚本（恰好是它自己）。

但是，除了父进程之外，Windows 管道还会为管道的每一侧创建一个新进程。直到管道的每一侧终止，父进程才能完成。所以带有简单管道的主程序将有 3 个进程。如果管道的每一侧递归地调用父批处理，您可以看到炸弹是如何迅速失控的！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-11-28T17:26:11.207

这是一个逻辑炸弹，它不断地重新创建自己并占用你所有的 CPU 资源。它使您的计算机因过多的进程而过载，并迫使它关闭。如果您在其中创建一个批处理文件并启动它，您可以使用 taskmgr 结束它。您必须非常快地完成此操作，否则您的计算机将太慢而无法执行任何操作。

# vba - 在 VBA 中查找时间段

> ID：13436409
> 
> 赞同：1
> 
> 时间：2012-11-18T00:50:50.130
> 
> 标签：vba

```
Date        Time    Variable
2011.01.02  22:22   1258.25
2011.01.02  22:24   1258.5
2011.01.02  22:26   1258.25
2011.01.02  22:27   1258.25
2011.01.02  22:28   1258.5
2011.01.02  22:29   1258.5
2011.01.02  22:31   1258.5
2011.01.02  22:32   1260.5
2011.01.02  22:33   1259.75
2011.01.02  22:34   1259.75
2011.01.02  22:37   1259.75
2011.01.02  22:38   1260
2011.01.02  22:39   1260.25
2011.01.02  22:40   1260
2011.01.02  22:43   1259.75
2011.01.02  22:44   1259.5
2011.01.02  22:47   1259.75
2011.01.02  22:48   1260
2011.01.02  22:52   1259.75
2011.01.02  23:10   1259.75
2011.01.02  23:12   1260
2011.01.02  23:13   1260.25
2011.01.02  23:14   1260.25
2011.01.02  23:15   1260.5
2011.01.02  23:16   1260.5
2011.01.02  23:17   1260.25 
```

大家好，

我在 excel 中有一个时间序列数据，我想搜索所有以 23:xx（23 小时）开头的“时间”值并选择该单元格。相反，我得到的是 VBA 选择任何有时间“XX：23”（第 23 分钟）的单元格

假设我在“时间”列上有我的活动单元格，我正在使用此代码，但它不起作用。我究竟做错了什么？

```
Range(ActiveCell, ActiveCell.End(xlDown)).Find("23:", lookat:=xlPart).Select 
```

后续问题：

还有另一个快速问题道格，我希望能够在第 23 小时找到以“23:XX”开头的所有数据点，找到第一个值和最后一个值，突出显示两者之间的所有内容并将其命名为一个范围。

在找到第一个“23：XX”后，我正在考虑一个“Do”语句来循环遍历单元格

```
Do
     ActiveCell.Offset(1, 0).Select
Loop Until Left(ActiveCell) = "23:" 
```

但似乎“左”功能将单元格识别为数字，而不是时间格式的单元格？我应该怎么办？太感谢了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:37:42.467

该`Lookin`函数的参数`FIND`指定是否查看“公式” - 您在编辑模式中看到的文本 - 或`Value`- 单元格中显示的内容。您的`FIND`函数正在查看公式，因此它会在单元格中看到“晚上 11:10”。将其更改为查看值，如下所示：

```
Range(ActiveCell, ActiveCell..End(xlDown)).Find("23:", lookat:=xlPart,lookin:=xlvalues).Select 
```

# jquery - jquery链html元素

> ID：13436412
> 
> 赞同：0
> 
> 时间：2012-11-18T00:52:02.027
> 
> 标签：jquery

这是我的 jQuery 代码：

```
 $("#context").html(
  $('<div>')
  .attr('data-ratio', "0.84" )
  .attr('class', "flowplayer no-background")
  .html(
    $('<video>').html(
      $('<source />', {
        type: "video/flash",
          src: 'http://google.com'
      }),
    $('<source />', {
        type: "video/mp4",
        src: 'http://google.net'
    })))

  );​ 
```

这是所需的输出：

```
<div data-ratio=".84" class="flowplayer no-background" >
  <video>
    <source type="video/flash" src="http://google.com"/>
    <source type="video/mp4" src="http://google.net"/>
  </video>
</div> 
```

然而，这是目前从我的 jQuery 输出的内容：

```
<div data-ratio=".84" class="flowplayer no-background" >
  <video>
    <source type="video/flash" src="http://google.com"/>
  </video>
</div> 
```

有人可以告诉我如何解决最后一个源元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:58:00.187

你可以这样做，

**[现场演示](http://jsfiddle.net/rajaadil/cdfvP/)**

```
 $("#context").html(
  $('<div>')
  .attr('data-ratio', "0.84" )
  .attr('class', "flowplayer no-background")
  .html(
    $('<video>').append(
      $('<source />', {
        type: "video/flash",
          src: 'http://google.com'
      })).append(
    $('<source />', {
        type: "video/mp4",
        src: 'http://google.net'
    })))

 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:09:30.503

您需要将元素放入数组中。

**[演示](http://jsfiddle.net/AZYJs/1)**

```
$("#context").html(
  $('<div>')
  .attr('data-ratio', '0.84' )
  .attr('class', 'flowplayer no-background')
  .html(
    $('<video>').html(
      [$('<source />', {
        type: 'video/flash',
        src: 'http://google.com'
      }),
      $('<source />', {
        type: 'video/mp4',
        src: 'http://google.net'
      })]
    )
  )
);​ 
```

# php - while 循环中的最后一次迭代

> ID：13436414
> 
> 赞同：0
> 
> 时间：2012-11-18T00:52:07.460
> 
> 标签：php, while-loop

当被迭代以输出与字符串不同的内容时，我试图获取数组中的最后一项。

```
if (count($this->condition) > 1) {
        $i=0;
        while ($i < count($this->condition)){
            if ($i == (count($this->condition) -1)) {

                foreach ($this->condition as $key => $value){

                    $query .= $value['columns']." = ".$value['value'];
                }
            } else {
                foreach ($this->condition as $key => $value){

                    $query .= $value['columns']." = ".$value['value']." AND ";
                    $i++;

                }
            }
        }
    } else {
        foreach ($this->condition as $key => $value){
            $query .= $value['columns']." = ".$value['value'];

        }
    } 
```

但是，它不断添加 AND，这意味着`$i == (count($this->condition))`永远不会正确。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T03:42:29.200

到目前为止，更简单的方法是构建一个条件数组，然后将`implode`它们放在最后。

```
$conditions = array();
foreach($this->condition as $key => $value) {
   $conditions[] = $values['columns'] . ' = ' . $value['value'];
}
$query = implode(' and ', $conditions); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T00:54:30.647

PHP 中的数组是从零开始的。如果`count()`返回`n`，则可以在第`n-1`th 索引处访问数组中的最后一个元素。

因此：

`if ($i == (count($this->condition)))`

应该

`if ($i == (count($this->condition) - 1))`

另外，你增加的`$i`太频繁了。`$i++`应该移到`foreach`循环之外。它应该是这样的：

```
while ($i < count($this->condition)) {
    if ($i == (count($this->condition) -1)) {
        foreach ($this->condition as $key => $value){
            $query .= $value['columns']." = ".$value['value'];
        }
    } else {
        foreach ($this->condition as $key => $value){
            $query .= $value['columns']." = ".$value['value']." AND ";
        }

        $i++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T00:55:30.533

简单的方法：你的 if 应该是

```
 if ($i == count($this->condition)-1) { 
```

因为数组是 0 索引的。

不过，更简单的方法 - 当您的代码用完时，仍然会设置 $i 。你为什么不在一段时间后阅读它，然后减去一个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T01:49:56.277

我已经修好了。

```
 if (count($this->condition) > 1) {
            $i=0;
            foreach ($this->condition as $key => $value){

                if ($i == ($conditionCount -1)) {
                    $query .= $value['columns']." = ".$value['value'];
                } else {
                    $query .= $value['columns']." = ".$value['value']." AND ";
                }
            $i++;
            }
    } else {
        foreach ($this->condition as $key => $value){
            $query .= $value['columns']." = ".$value['value'];

        }
    } 
```

# css - 如何跨越 CSS 边界

> ID：13436415
> 
> 赞同：0
> 
> 时间：2012-11-18T00:52:10.020
> 
> 标签：css, twitter-bootstrap, border, border-layout

我正在尝试为我的页面创建一些样式，我希望它看起来基本上像这样：

![在此处输入图像描述](../Images/69823199eaa708fc2a299b06d877a9d7.png)

我很好奇是否有任何方法可以让边界像这样重叠。我正在使用 Twitter Bootstrap，我的 HTML 现在看起来像这样：

```
<div class="container-fluid">

  <div class="row-fluid">

    <div class="span2">
       <img src="/images/logo.png" alt="logo"><br><br>

       <div class="well sidebar-nav">
        <ul class="nav nav-list">
          <li class="nav-header">Sub-Menu (this will only show for pages that need a sub-menu)</li>
          <li class="active"><a href="#">Current</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
        </ul>
      </div><!--/.well -->

    </div>

    <div class="span10">
      <h1 style="text-align:center;">Interplanetary Reactions</h1>
      <div class="center-me" style="border-top:5px solid white; border-bottom:5px solid white;">

    </div>

  </div>
<div class="center-me">
      <img src="http://i.imgur.com/yeHzm.jpg" alt="graphic">
</div>
    </div>
  </div>

  <footer style="border-top:5px solid white;">
<br>
<div class="row-fluid">

<div class="span4">
    &copy; Interplanetary Reactions 2012
</div>

<div class="span4">
    <div class="fb-like" data-href="http://www.facebook.com/    InterplanetaryReactions" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div>
</div>

<div class="span4">
    <a href="https://twitter.com/InterReactions" class="twitter-follow-button" data-show-count="false" data-lang="en">Follow @InterReactions</a>
</div>

</div>
  </footer>

</div><!--/.fluid-container--> 
```

我知道这不是很清楚，但我希望有人会有一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:05:19.483

`border-image`我建议在你的父元素周围放置一个。基本方法是创建一个包含 9 个切片（每个角、每个边和中间）的边框的图像，然后使用 CSS3`border-image`将边框添加到您的元素。有关详细信息，请参阅[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)。

# javascript - 模拟点击python中的javascript链接

> ID：13436418
> 
> 赞同：1
> 
> 时间：2012-11-18T00:52:43.590
> 
> 标签：javascript, python, selenium, web-scraping, spidermonkey

我正在尝试整理对餐馆的评论。Urllib2 适用于评论的初始页面，但随后有一个链接可以加载下一个评论增量，这是一个 javascript 链接。示例页面在[这里](http://www.just-eat.co.uk/restaurants-chathamgrill-me4/reviews)，链接“Next 25”的代码是：

```
<a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$RestRatings$Next','')" class="red" id="ctl00_ContentPlaceHolder1_RestRatings_Next">NEXT 25&gt;&gt; </a> 
```

我已经查看了所有以前的答案（[例如](https://stackoverflow.com/questions/11018796/clicking-on-a-javascript-link-on-firefox-with-selenium)），我不得不说我一点也不聪明。在 Firebug 中查看控制台并没有提供方便的链接。您能否建议实现这一目标的最佳（最简单）方法？

编辑：感谢 Seleniumnewbie，此代码将打印出评论中的所有评论。：

```
from selenium import webdriver
from BeautifulSoup import BeautifulSoup
import re

driver = webdriver.Firefox()

def getURLinfo(url):

    driver.get(url)
    html = driver.page_source
    next25 = "ctl00_ContentPlaceHolder1_RestRatings_Next"
    soup = BeautifulSoup(html)

    while soup.find(id=re.compile(next25)):            
        driver.find_element_by_id(next25).click()
        html = html + driver.page_source
        soup = BeautifulSoup(driver.page_source)

    soup = BeautifulSoup(html)
    comment = soup.findAll(id=re.compile("divComment"))

    for entry in comment:
        print entry.div.contents #for comments

    driver.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:13:26.217

当用户单击该链接时，将在客户端的 javascript 中调用函数 __doPostBack。您提供的另一个问题的链接假定​​此函数进行 AJAX 调用，然后将结果放在同一页面中。

但是，您链接到的评论页面不会这样做。它确实进行了 AJAX 调用，但随后它重新加载了同一页面。我无法捕捉到 AJAX 调用是什么，因为它会立即重新加载，但由于页面只是重新加载新评论，我很确定它告诉服务器将您移动到下一页。

因此，为了获得下一页的评论，您必须调用 __doPostBack 函数正在调用的相同 url，然后重新加载您所在的页面。为了找到这个 url，我会去混淆他们的 javascript 并找到被调用的函数。我相信将被调用的实际 URL 将取决于该函数的参数，因此您要确保复制它的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:04:17.150

找到元素`id="ctl00_ContentPlaceHolder1_RestRatings_Next"`，然后单击它。

# python - 在 Python 中使用匿名函数

> ID：13436426
> 
> 赞同：5
> 
> 时间：2012-11-18T00:53:27.737
> 
> 标签：python, anonymous-function

我有一些代码从多个 URL 下载数据列表，然后调用另一个函数，传入每个结果。就像是...

```
def ShowUrls(self, url):
    Urls = self.Scraper.GetSubUrls(url)
    for Url in Urls:
        self.UI.addLink(
          Url[0],
          Url[1]) 
```

这工作正常，但`self.Scraper.GetSubUrls`运行时有很长的延迟，然后所有 UI 调用都会非常迅速地进行。这会导致 UI 长时间显示“0 Urls added”，然后完成。

我想要的是能够将方法传递给`self.UI.addlink`方法，以便在`self.Scraper.GetSubUrls`检索到每个 URL 后立即调用它。这应该使 UI 在检索到每个 url 后立即显示正确的计数。

这可能吗？如果是这样，正确的语法是什么？

如果我在 Javascript 中，我会做类似......

```
getSubUrls(url, function(x, y) {UI.addLink(x, y)}) 
```

然后，在 getSubUrls 里面做

```
SomeParamMethod(Pram1, Param2) 
```

这可能吗？如果是这样，正确的语法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T00:55:53.360

您可以使用[`lambda`](http://docs.python.org/2/reference/expressions.html#lambda)，但通常最好创建一个单独的函数并传递它。

```
self.Scraper.GetSubUrls(url, lambda url: self.UI.addLink(url[0], url[1])) 
```

或者

```
def addLink(url):
    self.UI.addLink(url[0], url[1])

self.Scraper.GetSubUrls(url, addLink) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T01:04:47.510

这个建议涉及更多一点，但如果您控制`GetSubUrls`，则更 Pythonic 的方法可能是使其成为生成器，在检索到每个 URL 时生成它。然后，您可以在 for 循环中处理函数外部的每个 URL。例如，我假设`GetSubUrls`大概看起来像这样：

```
def GetSubUrls(self, url):
    urls = []
    document = openUrl(url)
    for stuff in document:
        urls.append(stuff)
    return urls 
```

也就是说，它构建了一个 URL 列表并返回整个列表。您可以将其设为生成器：

```
def GetSubUrls(self, url):
    document = openUrl(url)
    for stuff in document:
        yield stuff 
```

然后你可以做

```
for url in self.Scraper.GetSubUrls(url):
    self.UI.addlink(url[0], url[1]) 
```

这和以前一样，但是如果`GetSubUrls`是生成器，它不会等待收集所有子网址然后返回它们。它一次只产生一个，您的代码同样可以一次处理一个。

与传递回调相比，这样做的一个优点是您可以存储生成器并随时使用它，而不是在内部进行调用`GetSubUrls`。也就是说，您可以这样做`urls = GetSubUrls(url)`，将其保存以备后用，并在以后“按需”迭代 URL，当它们将被一一检索时。使用回调方法会强制该`GetSubUrls`函数立即处理所有 URL。另一个优点是您不需要创建一堆内容很少的小回调；相反，您可以自然地将这些单行代码编写为 for 循环的主体。

阅读 Python 生成器以获取更多信息（例如[“yield”关键字在 Python 中的作用是什么？](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)）。

# json - 在可变长度输入上使用 lapply 和 readLines

> ID：13436431
> 
> 赞同：2
> 
> 时间：2012-11-18T00:53:55.207
> 
> 标签：json, r, parallel-processing, readline

我有一个文本文件，其中每一行都是一个 JSON 对象。我可以很容易地将特定文件读入 R：

```
lapply(readLines(FILE, n=N, warn=FALSE), fromJSON) 
```

这可能很简单，但我想采用此功能并将其应用于多个文件并行

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:48:36.790

这是使用的一种解决方案`parLapply`：

```
f <- function(x) lapply(readLines(x, n=N, warn=FALSE), fromJSON)
library(parallel)
cl <- makeCluster(detectCores())
unlist(parLapply(cl, FILES, f), recursive=FALSE)
# where FILES is a vector of file paths 
```

# iphone - Google Analytics for iOS SDK 2.0 - 如何处理应用程序委托中的“跟踪器”变量？

> ID：13436433
> 
> 赞同：14
> 
> 时间：2012-11-18T00:54:13.150
> 
> 标签：iphone, ios, google-analytics

遵循此处的概述后：

[https://developers.google.com/analytics/devguides/collection/ios/v2/](https://developers.google.com/analytics/devguides/collection/ios/v2/)

我在`Unused variable "tracker"`添加到的代码的最后一行看到警告：

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

以下是 Google 概览页面中的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  // Optional: automatically track uncaught exceptions with Google Analytics.
  [GAI sharedInstance].trackUncaughtExceptions = YES;
  // Optional: set Google Analytics dispatch interval to e.g. 20 seconds.
  [GAI sharedInstance].dispatchInterval = 20;
  // Optional: set debug to YES for extra debugging information.
  [GAI sharedInstance].debug = YES;
  // Create tracker instance.
  id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:@"UA-YOUR-TRACKING-ID"];

} 
```

`tracker`真正认为在这一点之后绝对没有用，并且概述文档并没有真正说明如何处理它。有什么建议么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-18T01:17:04.700

如果您不需要对跟踪器的引用（看起来您不需要），您可以通过更改最后一行代码来删除警告

```
id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:@"UA-YOUR-TRACKING-ID"]; 
```

到

```
[[GAI sharedInstance] trackerWithTrackingId:@"UA-YOUR-TRACKING-ID"]; 
```

`[GAI sharedInstance]`如果您想在用户启动应用程序时创建一个事件，而无需调用来获取该引用，则在此代码块中保留对跟踪器的引用的用例可能是。

# python - 如何将 BlobProperty 从我的模型输出到十六进制字符串

> ID：13436435
> 
> 赞同：0
> 
> 时间：2012-11-18T00:54:22.613
> 
> 标签：python, google-app-engine, google-cloud-datastore, blob

我有这个类代表我的模型：

```
from google.appengine.ext import db

class PuzzleSets(db.Model):
   img = db.BlobProperty(required=True)
   ... 
```

我想检索那个 blob 属性。但是，我想检索字节数组并将其输出到字符串。前任。：“AE214FAA21617772”用于存储在我的 blob 中的 8 字节图像。

我尝试使用 blob_reader 和其他一些方法，但我总是收到类似的错误

UnicodeDecodeError：“utf8”编解码器无法解码位置 0 中的字节 0x89：无效的起始字节

或者

hex() 参数不能转换为十六进制

等等

任何人都可以帮助我获得正确的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:32:37.577

Blobreader 用于从 BlobStore 中读取。要使用 BlobProperty / 获取字符串，请使用：

```
data = db.Blob(puzzleset_instance.img) 
```

如果您的 blob 包含文本，请使用：

```
unicode_data = db.Blob(instance.blob_property).decode('utf-8') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:08:32.563

您可以使用 以十六进制编码 str 实例`foo.encode('hex')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T02:28:30.500

我终于用这行流畅的代码得到了我想要的东西：

```
self.response.out.write(''.join([hex(z)[2:].zfill(2) for z in bytearray(puzzleset_instance.img)])) 
```

# c# - 如何与多个 APM BeginXXX 调用共享 AsyncCallback？

> ID：13436436
> 
> 赞同：3
> 
> 时间：2012-11-18T00:54:26.423
> 
> 标签：c#, asynchronous, delegates, callback, asynccallback

我想通过许多 APM 风格的异步方法重用我的代码。每个方法都有一个 BeginXXX 和一个 EndXXX 签名对。我想在每个函数中重用相同的回调。

我一直使用像下面这样的匿名方法，但我不确定如何将其提取为可重用的形式。我知道这应该很容易，但我不知道如何使用委托来实现这一点。（这是我自学得到的）

```
 var result = tableSymmetricKeys.BeginExecuteQuerySegmented(query, token, opt, ctx, (o) =>
                {
                    var response = (o.AsyncState as CloudTable).EndExecuteQuerySegmented(o);
                    token = response.ContinuationToken;
                    int recordsRetrieved = response.Results.Count;
                    totalEntitiesRetrieved += recordsRetrieved;
                    Console.WriteLine("Records retrieved in this attempt = " + recordsRetrieved + " | Total records retrieved = " + totalEntitiesRetrieved);
                    evt.Set();
                }, tableSymmetricKeys); 
```

如何将匿名方法提取`(o) => ...`到委托中并使其可重用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:07:45.123

您将创建一个包含所有“捕获”变量的类，并将其作为状态传递：

```
public class QueryState
{
   public CloudTable CloudTable{get;set;}
   public Token Token{get;set;}
   public class ManualResetEvent Evt{get;set;} //i'm guessing that's what this is
   //any other variables you were using
} 
```

然后，您将创建一个像这样的委托：

```
AsyncCallback asyncCallback = (asyncResult) =>
{
   QueryState state = asyncResult.State as QueryState;
   var response = state.CloudTable.EndExecuteQuerySegmented(asyncResult);
   //rest of method... make sure to use the state variable to get whatever you need.
} 
```

最后，你这样称呼它：

```
var state = new QueryState
{
   CloudTable = tableSymmetricKeys,
   //set everything else
}

var result = tableSymmetricKeys.BeginExecuteQuerySegmented(query, token, opt, ctx,asyncCallback, state); 
```

# java - 如何为自定义 Java 标记添加 Eclipse 快速修复？

> ID：13436440
> 
> 赞同：14
> 
> 时间：2012-11-18T00:55:23.063
> 
> 标签：java, eclipse, eclipse-jdt

我想向 Eclipse 的问题视图报告 Java 文件的自定义问题，并为它们提供快速修复。

标准的做法是使用扩展点`org.eclipse.core.resources.markers`声明自定义标记并通过调用添加标记`org.eclipse.core.resources.IResource.createMarker(String)`。然后，可以使用扩展点`org.eclipse.ui.ide.markerResolution`为自定义标记提供快速修复。

上述方法是一种独立于语言的创建和解析资源标记的方法。缺点是我必须编写一些样板代码来解决我的自定义 Java 问题。相反，我想被重用`IQuickFixProcessor`。也就是说，我想使用扩展点解析我的自定义 Java 标记`org.eclipse.jdt.ui.quickFixProcessors`。使用这个扩展点，我不再需要解析找到标记的 Java 文件，我不必构建绑定并找到覆盖标记的 AST 节点。如果我不重用`org.eclipse.jdt.internal.ui.text.correction.CorrectionMarkerResolutionGenerator`及其依赖项，我最终会复制大部分内容。

如何使用 JDT 基础架构为我的自定义 Java 标记提供快速修复？

**尝试1：**

我将自定义标记定义如下：

```
<extension
  id="custom.marker"
  name="Custom Java Problem"
  point="org.eclipse.core.resources.markers">
    <super type="org.eclipse.jdt.core.problem"/>
    <super type="org.eclipse.core.resources.problemmarker"/>
    <super type="org.eclipse.core.resources.textmarker"/>
    <persistent value="true"/>
</extension> 
```

然后，我通过调用方法添加了上述标记的实例`IResource.createMarker("custom.marker")`。

接下来，我定义了一个自定义 Quick Fix 处理器。

```
<extension
  point="org.eclipse.jdt.ui.quickFixProcessors">
  <quickFixProcessor
    class="quickfixes.CustomQuickFixProcessor"
    id="quickfixes.quickFixProcessor">
  </quickFixProcessor>
</extension> 
```

我的自定义标记显示在 Eclipse 的问题视图中，但是当我右键单击自定义问题时，快速修复菜单项被禁用。

**尝试2：**

我换`IMarker marker = resource.createMarker("custom.marker");`了`IMarker marker = resource.createMarker(IJavaModelMarker.JAVA_MODEL_PROBLEM_MARKER);`。由于此更改，当我在“问题视图”中右键单击自定义问题时，“快速修复”菜单项变为可用，但是，当我选择它时，会弹出一个对话框，提示没有可用于选定的修复程序问题。但是，我验证了`CustomQuickFixProcessor.hasCorrections(ICompilationUnit, int)`被调用并返回`true`，但是`CustomQuickFixProcessor.getCorrections(IInvocationContext, IProblemLocation[])`没有被调用。

**尝试 3：**

尝试 3 是尝试 2 的延续。我将`IJavaModelMarker.ID`自定义标记的设置如下：

```
marker.setAttribute(IJavaModelMarker.ID, IProblem.ExternalProblemFixable); 
```

因此，`CustomQuickFixProcessor.getCorrections`当我将鼠标悬停在编辑器中的自定义标记上或单击 Java 编辑器左边距的 light-build 时，会调用它。但是，当我在“问题视图”中选择标记时，右键单击该标记并选择“快速修复”菜单项，`CustomQuickFixProcessor.getCorrections`不会被调用，并且会出现一个对话框，指出没有可用的快速修复。

`CustomQuickFixProcessor.getCorrections`我在调试模式下运行 JDT 以查看为什么当我从问题视图调用快速修复时它没有调用。结果没有`CorrectionMarkerResolutionGenerator.internalGetResolutions(IMarker)`找到解决方案，因为`CorrectionMarkerResolutionGenerator.hasProblem (context.getASTRoot().getProblems(), location)`在编译单元的 AST 中没有找到自定义问题。我不确定如何将我的自定义标记与编译单元的 AST 关联起来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-08T16:18:48.907

在这篇文章和调试器的帮助下，我得到了这个工作。这是你必须做的：

## 创建标记

**插件.xml**

声明标记，使其扩展这三个现有标记（我认为都是必要的）

```
<extension
       id="mymarker"
       name="My Problem"
       point="org.eclipse.core.resources.markers">
    <super
          type="org.eclipse.jdt.core.problem">
    </super>
    <super
          type="org.eclipse.core.resources.problemmarker">
    </super>
    <super
          type="org.eclipse.core.resources.textmarker">
    </super>
    <persistent
          value="true">
    </persistent>
 </extension> 
```

**爪哇**

创建标记时，设置`IJavaModelMarker.ID`字段很重要，我认为这里列出的所有其他字段也是如此。

```
// Must match the "id" attribute from plugin.xml
String MY_MARKER_ID = "com.example.my.plugin.mymarker"
// Must not be -1 or any of the values in org.eclipse.jdt.core.compiler.IProblem
int MY_JDT_PROBLEM_ID = 1234

// ....
IMarker marker = resource.createMarker(MY_MARKER_ID);
marker.setAttribute(IMarker.SEVERITY, IMarker.SEVERITY_WARNING);
marker.setAttribute(IMarker.MESSAGE, msg);
marker.setAttribute(IMarker.CHAR_START, start);
marker.setAttribute(IMarker.CHAR_END, end);
marker.setAttribute(IJavaModelMarker.ID, MY_JDT_PROBLEM_ID); 
```

## 创建 QuickFixProcessor

**插件.xml**

首先在`plugin.xml`. 确保您`id`在`handledMarkerTypes`

```
<extension
      point="org.eclipse.jdt.ui.quickFixProcessors">
   <quickFixProcessor
         class="com.example.my.plugin.ui.MyQuickFixProcessor"
         id="org.eclipse.jdt.ui.text.correction.QuickFixProcessor"
         name="My Quick Fix Processor">
      <handledMarkerTypes>
         <markerType
               id="com.example.my.plugin.mymarker">
         </markerType>
      </handledMarkerTypes>
   </quickFixProcessor>
</extension> 
```

**爪哇**

这是快速修复处理器的基本框架。请注意，检查`locations`实际有内容很重要。

如果您制作自己的标记类型（如上所述），我*认为*您可以硬编码`hasCorrections`以返回 true。但是要保存并遵循约定检查它是否与您的 jdt 问题 ID 匹配。

```
public class MyQuickFixProcessor implements IQuickFixProcessor {

  @Override
  public IJavaCompletionProposal[] getCorrections(IInvocationContext context, IProblemLocation[] locations) throws CoreException {
    if (locations == null || locations.length == 0) {
      // https://bugs.eclipse.org/444120 Eclipse can call this method without
      // any locations, if a quick fix is requested without any problems.
      return null;
    }

    IJavaCompletionProposal[] proposals = ...
    //...
    return proposals;
  }

  @Override
  public boolean hasCorrections(ICompilationUnit unit, int problemId) {
    return problemId == MY_JDT_PROBLEM_ID;
  }
} 
```

## 寻找一个好的 JDT ID

你需要一个`MY_JDT_PROBLEM_ID`独一无二的！运行下面的代码，打印在`IProblem`. 在这些数字中选择一个相当大的范围，然后在该范围内选择您的 ID。

```
Field[] fields = org.eclipse.jdt.core.compiler.IProblem.class.getFields();
List<Integer> ints = new ArrayList<>();
for (Field field : fields) {
  ints.add(field.getInt(null));
}
sort(ints);
for (Integer integer : ints) {
  System.out.printf("%16d %16o %16x%n", integer, integer, integer);
} 
```

* * *

我希望我已经记住了一切。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:54:25.747

您的**尝试 1**将不起作用，原因：

JDT UI 定义了以下扩展。

```
 <extension
         point="org.eclipse.ui.ide.markerResolution">
      <markerResolutionGenerator
            markerType="org.eclipse.jdt.core.problem"
            class="org.eclipse.jdt.internal.ui.text.correction.CorrectionMarkerResolutionGenerator">
      </markerResolutionGenerator> 
```

即来自JDT 的快速修复仅适用于markerType="org.eclipse.jdt.core.problem"。

**尝试 2**：即使在 JDT UI 实现中也有一些情况，当 QuickFixProcessor#hasCorrections(...) 返回 true 但 QuickFixProcessor#getCorrections(...) 可能不会返回修复。这是因为我们总是为特定的标记返回真或假。但是，特定标记的所有实例可能不是“可修复的”。也许你遇到类似的事情？

**尝试 3**：您在标记上设置了哪些所有属性？由于`CorrectionMarkerResolutionGenerator.hasProblem(...)`检查它，您至少需要设置 IMarker.CHAR_START 属性。看看 `org.eclipse.jdt.internal.core.eval.RequestorWrapper.acceptProblem(CategorizedProblem, char[], int)`，这是在 JDT Core 中创建标记的地方。

# xml - 计算xslt中父标签后面有多少标签

> ID：13436442
> 
> 赞同：2
> 
> 时间：2012-11-18T00:55:30.023
> 
> 标签：xml, xslt

我必须编写一个可与​​任何 XML 文档一起使用的 XSLT 文档，并将结果显示在 HTML 表中。表格的列都取决于 XML 文档中有多少标签。我试图使用

```
<xsl:value-of select="count(/*/*/)"/> 
```

计算标签的数量。

但我想要，例如，如果我有：

```
 <film>
      <title></title>
      <year></year>
      <actor></actor>
  </film>
  <film>
      <title></title>
      <year></year>
      <actor></actor>
  </film> 
```

结果将是 3 而不是当前显示的 6。请问这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:37:40.673

**一、假设**：

1.  您有一个格式良好的 XML 文档，例如：

. . . .

```
<films>
  <film>
    <title/>
    <year/>
    <actor/>
  </film>
  <film>
    <title/>
    <year/>
    <actor/>
  </film>
</films> 
```

**和**：

.2\. 元素都具有相同数量的`film`同名列，那么您只需要：

```
 count(/*/*[1]/*) 
```

**这将产生 XML 文档顶部元素的第一个子元素的子元素的数量**：

```
3 
```

* * *

**二、另一种可能性：不同`film`的元素有不同数量的子元素，其中一个元素的所有子元素决定了 table 的总列数**。

```
<films>
  <film>
    <title/>
    <year/>
    <actor/>
  </film>
  <film>
    <title/>
    <year/>
    <actor/>
    <rating/>
    <director/>
  </film>
  <film>
    <title/>
    <year/>
    <actor/>
    <rating/>
  </film>
</films> 
```

然后，使用 XPath 2.0，使用：

```
max(/*/*/count(*)) 
```

这将产生 XML 文档顶部元素的子元素具有的最大子元素数：

```
5 
```

* * *

**三、最后，如果没有一个`film`元素可能包含列的所有元素，则使用**（ABach 已经提出的）：

```
count(distinct-values(/*/*/*/name())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:19:54.563

**I. XSLT 1.0/XPath 1.0**

I don't believe there is a way to do this with pure XPath 1.0 (since you are looking for distinct element names that are, I assume, not in any particular order [at any rate, I don't like to rely on there being some sort of order]).

That said, you can use a key-based XSLT 1.0 solution to solve the problem.

**When this XSLT 1.0 document:**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:key name="kFilmChildren" match="film/*" use="name()"/>

  <xsl:template match="/">
    <xsl:value-of
      select="count(//film/*[
                generate-id() = 
                generate-id(key('kFilmChildren', name())[1])
      ])"/>
  </xsl:template>
</xsl:stylesheet> 
```

**...is applied against your sample XML (wrapped in a root element):**

```
<films>
  <film>
    <title/>
    <year/>
    <actor/>
  </film>
  <film>
    <title/>
    <year/>
    <actor/>
  </film>
</films> 
```

**...the wanted result is produced:**

```
3 
```

**If we apply the same stylesheet against a slightly modified XML:**

```
<films>
  <film>
    <title/>
    <year/>
    <actor/>
    <test/>
  </film>
  <film>
    <title/>
    <year/>
    <actor/>
    <test/>
    <test2/>
  </film>
</films> 
```

**...again, the correct answer is produced:**

```
5 
```

**NOTE:** given that you did not show a complete document, I made up for that lacking knowledge by using the `//` expression. That, however, can be an expensive operation near the root of very large trees; you would do well to make yours more specific.

* * *

**II. XSLT 2.0/XPath 2.0**

**Pure XPath 2.0 can be used to obtain the correct answer by utlizing the `distinct-values` expression:**

```
count(distinct-values(//film/*/name())) 
```

**XSLT Verification:**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output omit-xml-declaration="no" indent="yes" method="text" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/">
     <xsl:value-of select="count(distinct-values(//film/*/name()))" />
  </xsl:template>

</xsl:stylesheet> 
```

**Result:**

```
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T08:34:47.150

您的文档实际上包含 16 个标签：8 个开始标签和 8 个结束标签。所以我怀疑“计算标签”不是你真正的要求。由于您的术语不正确，我们只能猜测您的真实需求。我怀疑它可能是制作一个表格，每个不同的元素名称都有一行，其中包含具有该名称的元素数量的计数。这将是：

```
<table>
  <xsl:for-each-group select="//*" group-by="name()">
    <tr>
      <td><xsl:value-of select="current-grouping-key()"/></td>
      <td><xsl:value-of select="count(current-group()"/></td>
    </tr>
  </xsl:for-each-group>
</table> 
```

# ruby-on-rails - 循环内的 Flash 消息不会显示多次

> ID：13436443
> 
> 赞同：0
> 
> 时间：2012-11-18T00:55:31.067
> 
> 标签：ruby-on-rails

我目前正在尝试每次自定义方法（过程！）在我的事务控制器中返回 false 或 true 时显示一条消息。但是，它只为每个 false 和每个 true 返回一次。下面是控制器中的代码：

```
 def execute_all
@transaction = Transaction.find(:all)
#Execute all transactions
@transaction.each do |t|
        if (t.process!)
            #flash.keep[:noticeTransaction] = 'Transaction number: ' + t.id.to_s + ' executed Successfully!'
            else 
            flash.keep[:errorTransaction] = 'Transaction cannot be executed -> Transaction Id: ' + t.id.to_s
        end
        end
respond_to do |format|
      format.html { redirect_to transactions_url }
      format.json { head :no_content }
    end 
```

以下是 application.html.erb 中的代码

```
<html>
<head>

</head>
<body>
<p style="color:red" class="error"><%= flash[:errorTransaction] %></p>
<p style="color:green" ><%= flash[:noticeTransaction] %></p>

<%= yield %>

</body> 
```

我假设因为我在应用程序布局中只提到过一次（一个代表错误，一个代表成功），所以它只显示一次。我想知道如何为方法“process！”返回的每个 false 显示它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:02:04.967

布局只显示一个，因为*只有*一个。 `flash`无论您是否使用，每个键都存储一条消息`keep`。

因此，每次设置时`flash.keep[:errorTransaction]`，您都会覆盖上一条消息，而不是附加另一条消息。

为了解决这个问题，您可以在遍历事务时存储所有消息，然后`flash`一次将它们存储在所有消息中，例如：

```
messages = []
@transaction.each do |t|
  if (t.process!)
    messages << '<div class="some-class">your message in a wrapper</div>'
  end
end
flash.keep[:errorTransaction] = messages.join if messages.any? 
```

# user-interface - wxHaskell 和 Reactive-Banana staticText 在文本更改时不更新大小

> ID：13436444
> 
> 赞同：3
> 
> 时间：2012-11-18T00:55:41.797
> 
> 标签：user-interface, haskell, frp, wxhaskell, reactive-banana

我正在尝试构建一个简单的 UI 作为学习 wxHaskell 和 Reactive Banana 的练习，但我在尝试解决一个看似简单的问题时遇到了困难。具体来说，我想在标签的文本更新时调整窗口大小以适应标签，使其始终适合文本。我尝试使用 来完成此操作`windowReLayoutMinimal`，但这出乎意料地导致窗口在文本溢出时无法调整大小，并且在手动调整大小时窗口在其原始大小和新大小之间闪烁（即用句柄拉伸它角落）。据我所知，`StaticText`当文本更改时，项目的大小无法更新。有没有办法强制项目重新计算其最小尺寸？我的代码如下所示：

```
{-# LANGUAGE ScopedTypeVariables #-}
import Graphics.UI.WX hiding (Event)
import Reactive.Banana
import Reactive.Banana.WX

main = start $ do
    mainWindow      <- frame [text := "Test"]
    inputText   <- textEntry mainWindow []
    outputText  <- staticText mainWindow []
    set mainWindow  [layout :=
                      margin 10 $
                      grid 10 10 [
                        [widget inputText, fill $ valignCenter $ widget outputText]
                      ]
                    ]
    let
        networkDescription :: forall t . Frameworks t => Moment t ()
        networkDescription = do
            inputTextEvStream <- eventText inputText
            let 
                currentInputText = stepper "" inputTextEvStream
            sink outputText [text :== currentInputText]
            reactimate $ windowReLayoutMinimal mainWindow <$ inputTextEvStream
    network <- compile networkDescription
    actuate network 
```

# .net - 从 rdlc 本地文件生成 PDF 版本 1.4

> ID：13436448
> 
> 赞同：0
> 
> 时间：2012-11-18T00:57:06.273
> 
> 标签：.net, pdf, rdlc

我在项目中有几个报告（.rdlc 文件）。我需要从这些报告中生成 PDF 文件，但我需要 PDF 版本 1.4 或更高版本。

目前我正在使用report.Render方法生成PDF，但生成的版本是1.3。据我所知，没有生成更新版本的选项。

环境：Visual Studio 2010 Windows Forms Application C# .NET Framework 4 Report Viewer 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:21:40.663

查看 itextsharp.dll [http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)它可以写入 1.4，下载中也有配置它的文档。

# jquery - 仅在通过滚动位置问题时显示 DIV

> ID：13436455
> 
> 赞同：3
> 
> 时间：2012-11-18T00:57:59.387
> 
> 标签：jquery, css, displayobject

我已经找到了当您到达滚动位置时如何显示 div 的方法。我用来执行此操作的 JQuery 代码是这样的：

```
$(window).scroll(function() {
if ($(this).scrollTop() > 75) {
    $("#ddmenubg2:hidden").fadeIn('slow');
}
else {
    $("#ddmenubg2:visible").fadeOut("slow");
} 
```

});

据我所知，这是告诉 div ddmenubg2 在到达 75 滚动标记之前隐藏，然后在超过该标记的任何地方，div 保持可见......以及该标记之前的任何内容，div 都被隐藏。但是，由于某种原因，ddmenubg2 div 在我的页面上位于 75 像素标记之前。然后当我输入超过 75 标记时，div 会逐渐消失并重新淡入。这只发生在第一个页面加载或刷新时，它在您向上和向下滚动多次后可以正常工作，但是每当您刷新页面时，这个问题就会出现，直到您向下滚动。

现在，对这个问题的一个简短修复是使 ddmenubg2 div 的显示“无”。这实际上解决了整个滚动问题，但它使我的主菜单无法正常运行。

那么我将如何做到这一点，以便 ddmenubg2 div 在您超过 75 之前保持隐藏，并且在您超过 75 时保持隐藏.. 即使在第一页加载或刷新时？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T06:33:54.140

使用[可见性：隐藏](https://developer.mozilla.org/en-US/docs/Web/CSS/visibility)而不是显示无。这将保留元素的宽度和高度属性，但会使其不可见。以下是我如何修改您的代码以使其正常工作。

CSS

```
#ddmenubg2{
   visibility:hidden;
} 
```

javascript

```
$(function(){
    $(window).scroll(function() { 
        if ($(this).scrollTop() > 75) { 
            $("#ddmenubg2:hidden").css('visibility','visible');   
            $("#ddmenubg2:hidden").fadeIn('slow');  
        } 
        else {     
            $("#ddmenubg2:visible").fadeOut("slow"); 
        }  
    });
}); 
```

# ruby-on-rails - 显示在同一视图中的多态关联的形式？

> ID：13436461
> 
> 赞同：1
> 
> 时间：2012-11-18T00:59:26.507
> 
> 标签：ruby-on-rails

我有三个模型：`Post,` `Reply`和`Vote`。作为与and`Vote`的多态关联：`Post``Reply`

**路线.rb：**

```
 resources :posts do
    resources :votes
    resources :replies do
      resources :votes
    end
  end
  resources :votes,         only: [:create, :destroy] 
```

**votes_controller.rb：**

```
 def create
    @votable = find_votable
    @vote = @votable.votes.create(params[:vote])
    if @votable.save
     # vote saved
    else
      render :action => 'new'
    end
  end

  private

  def find_votable
    params.each do |name, value|
      if name =~ /(.+)_id$/
        return $1.classify.constantize.find(value)
      end
    end
    nil
  end 
```

**post_controller.rb：**

```
def show
    @post = Post.find(params[:id])
    @replies = @post.replies.paginate(page: params[:page])
    @reply = @post.replies.build
    @votable = ? # not sure what to add here
    @vote = Vote.new
 end 
```

**帖子/show.erb：**

```
 <%= form_for ([@votable, @vote]) do |f| %>
    <p>
      <%= f.label :polarity %><br />
      <%= f.text_field :polarity %>
      <%= f.label :user_id %><br />
      <%= f.text_field :user_id %>
    </p>
    <p><%= f.submit "Submit" %></p>
  <% end %>

  <%= render 'replies/form' %> 
```

**回复/form.rb：**

```
 <%= form_for ([@votable, @vote]) do |f| %>
    <p>
      <%= f.label :polarity %><br />
      <%= f.text_field :polarity %>
      <%= f.label :user_id %><br />
      <%= f.text_field :user_id %>
    </p>
    <p><%= f.submit "Submit" %></p>
  <% end %> 
```

我不确定如何`@votable`在 post 控制器中定义，所以它`Post.find(params[:id])`适用于 post 的投票表单和`Reply.find(params[:id])`vote 的帖子表单。这很难，因为两者`posts`都`replies`在同一个显示视图中。

有什么解决方法吗？（或者有更好的方法吗？比如让`@votable`投票控制器中的变量在后控制器中可用？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T05:58:07.487

您尝试的内容称为嵌套表单。多态的关系不应该影响如何实现它。试试看下面的 railscast

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

并检查这颗宝石

[https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)

它很旧，因此可能会有更新的宝石和方法。

# c++ - 一维不变，一维可变的容器

> ID：13436463
> 
> 赞同：2
> 
> 时间：2012-11-18T00:59:43.583
> 
> 标签：c++, stl, containers

我有一个系统，我需要获取特定职位的“代码”。位置的数量是固定的，从 1 到 40，但是，每个位置可以有不同数量的代码（从 2 到 20）。容器是常量，需要定义，然后仅用于查找程序其余部分的位置。

例如，我需要能够做一些事情，比如`myCodes.at(position3)`得到`{1, 3, 9, 23, 52}`和`myCodes.at(position7)`得到`{23, 52}`

因此，外部容器的大小是恒定的，但内部容器的大小可以从 2 到 20 不等。我知道如何做到这一点的方法是使用数组，并将第二维设为最大可能大小 (20): `const int myCodes[40][20]`，然后只需用额外的 0“填充”内部数组。

然而，这感觉真的很浪费，特别是因为许多内部数组只能保存 2 个元素。我也在努力学习 C++11，所以如果有的话，我更喜欢“现代”解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:03:00.517

这可能是您想要的：

```
std::array<std::vector<code>, const_size> 
```

外部是恒定的，内部是动态的。

保持不变并使用填充会更快，但更丑陋，所以不要一开始就尝试。18*20 未使用的整数对现代硬件来说并不算浪费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T01:14:06.873

对于一个疯狂的方法，一个不同大小的 std 数组的元组加上一组迭代器对数组的开始/结束。如果内存，第一个会导致非统一的连续块，第二个会为您提供基于统一范围的访问。理论上，第二个是可以即时计算的，但我只是缓存它。

将数组元组转换为对数组的代码编写起来会很有趣。

好吧，我真的会做向量数组甚至向量向量的先前答案。但这项技术展示了现代 C++11 的表现如何。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T01:25:09.427

您应该使用数组`vectors`或`lists`.

```
std::array<std::vector<MyType>, const_size>

std::array<std::list<MyType, const_size> 
```

两者都是一维静态而另一维动态的结构。

# javascript - MongoDB 中的 JavaScript NoSQL 注入预防

> ID：13436467
> 
> 赞同：24
> 
> 时间：2012-11-18T01:00:02.917
> 
> 标签：javascript, node.js, mongodb, mongoose, javascript-injection

如何防止 JavaScript NoSQL 注入 MongoDB？

我正在开发一个 Node.js 应用程序，我正在将`req.body`json 对象传递给猫鼬模型的保存函数。我以为幕后有保障措施，但事实并非如此。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-07-16T21:49:45.463

**[Sushant](https://stackoverflow.com/a/13438800/1476885)的回答不正确。**您***需要***了解 MongoDB 中的 NoSQL 注入。

**示例**（取自[此处](https://groups.google.com/forum/#!topic/mongoose-orm/AuMen1Fg6Po)）

```
User.findOne({
    "name" : req.params.name, 
    "password" : req.params.password
}, callback); 
```

如果`req.params.password`是`{ $ne: 1 }`，将在不知道密码的情况下检索用户（`$ne`表示*不等于 1*）。

**MongoDB 驱动程序**

您可以使用[mongo-sanitize](https://github.com/vkarpov15/mongo-sanitize)：

> 它将删除输入中以“$”开头的所有键，因此您可以将其传递给 MongoDB，而不必担心恶意用户覆盖。

```
var sanitize = require('mongo-sanitize');

var name = sanitize(req.params.name);
var password = sanitize(req.params.password);

User.findOne({
    "name" : name, 
    "password" : password
}, callback); 
```

**猫鼬司机**

由于它遵循模式，如果*密码*是字符串字段，它会将对象转换`{ $ne: 1 }`为字符串，并且不会造成任何损坏。在这种情况下，您不需要清理，只需记住设置适当的架构。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-08T21:50:10.983

尽管帖子已过时，但我正在回答。

我知道三种方法。

***第一：***有一个多用途的[内容过滤器](https://github.com/efkan/content-filter)。还通过过滤方式提供MongoDB注入保护。

***第二：*** [mongo-sanitize](https://github.com/vkarpov15/mongo-sanitize)，帮助清理 mongodb 查询以防止查询选择器注入。

***第三：***我[在这里看到了](http://www.w3schools.com/jsref/jsref_escape.asp)这个也可以应用于 MongoDB 的解决方案。实现起来真的很简单。仅使用 JavaScript 的内置`escape()`函数。

`escape()`将字符串转换为`ascii`代码。`$ne`被转换为`%24ne`.

```
var privateKey = escape(req.params.privateKey);

App.findOne({ key: privateKey }, function (err, app) {
  //do something here
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-22T19:33:30.230

为了防止来自具有未知结构的数据对象的查询选择器注入

使用 mongo-sanitize 通过递归进行深度清理：

```
const deepSanitize = (value) => {
    if(Array.isArray(value)){
        value.forEach(elm=>deepSanitize(elm))
    }
    if(typeof(value) === 'object' && value !== null){
        Object.values(value).forEach((elm)=>{
            deepSanitize(elm)
        })
    }
    return sanitize(value)
} 
```

例如，`sanitize(req.query)`嵌套查询选择器将不会被删除：

```
const req = {} 
req.query = { _id : { $ne: 1 } } 

console.log(req.query))               // { _id: { '$ne': 1 } }
console.log(sanitize(req.query))      // { _id: { '$ne': 1 } } 
```

使用`deepSanitize(req.query)`净化过的对象（包括嵌套的）会发生变异：

```
console.log(deepSanitize(req.query))       // { _id: {} }
console.log(req.query)                     // { _id: {} } 
```

用 消除对象突变`{...req.query}`：

```
console.log(deepSanitize({...req.query}))  // { _id: {} }
console.log(req.query)                     // { _id: { '$ne': 1 } } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-18T09:02:43.123

**注意** 我的回答不正确。请参考其他答案。

--

当客户端程序在 MongoDB 中组装查询时，它会构建 BSON 对象，而不是字符串。因此，传统的 SQL 注入攻击不是问题。

有关详细信息，请遵循[文档](http://docs.mongodb.org/manual/faq/developers/#how-does-mongodb-address-sql-or-query-injection)

**更新**

避免`eval`使用可以执行任意 JS 的表达式。如果您从用户那里获取输入并在`eval`不清理输入的情况下运行类似的表达式，您可能会搞砸。正如 JoBu1324 所指出的`where`，`mapReduce`和之类的操作`group`允许直接执行 JS 表达式。

# java - SoundPoolThread 通过 JNI 错误“访问已删除的全局引用”导致 SIGSEGV

> ID：13436470
> 
> 赞同：2
> 
> 时间：2012-11-18T01:01:14.490
> 
> 标签：java, android, java-native-interface, soundpool

我的 Android 应用程序（minSdkLevel: 2.2, targetSdkLevel: 3.0, testing on Nexus 7 with Android 4.2）在加载阶段执行以下操作：

1.  创建一个并在其上`SoundPool`注册一个`OnLoadCompleteListener`
2.  开始加载声音。`SoundPool`每当加载声音时调用我的回调方法。
3.  如果加载过程被用户中断，`SoundPool.release()`则调用
4.  （如果`release()`已经调用并且之前开始的声音加载完成，即系统调用我的回调，那么我的应用程序检测到我`SoundPool`的已经是`null`并忽略回调，所以它是安全的）。

在 Nexus 7 上进行测试，调用后 210 毫秒出现以下错误`SoundPool.release()`（logcat）： ![日志猫](../Images/790ac88fcd304299903b68a4dbc1c747.png)

即事件顺序可能如下：

1.  由于我的`SoundPool.load(...)`调用，系统开始异步加载声音
2.  我离开了加载屏幕，所以`SoundPool.release()`被调用并`SoundPool`设置为`null`
3.  (?) 系统完成了较早的声音加载完成回调，但遇到了一些错误。

我检查了 Android 源代码和 JNI 代码`SoundPool.release()`确实删除了`SoundPool`JNI 中的`DeleteGlobalRef`. 它使用弱引用来存储`SoundPool`Java 级别的引用。

我无法重现该错误，可能是因为由于不确定性，我无法重现确切的条件。系统应该正确处理`SoundPool`异步加载声音时可能会释放的问题，但似乎在极少数情况下会出现错误。（请注意，我的代码`SoundPool`在 nullcheck 后仅发布一次，因此该错误肯定不在我的代码中）。

关于为什么在Android中会发生这样的错误的任何想法？从理论上讲，我的上述怀疑是否正确？如何保护我的应用程序免受这个 Android 错误的影响？也许我可以尝试设置一个`SoundPool`应该被释放的布尔值，等到所有回调返回，然后在最后一个回调中释放它（基于这个布尔值）？我想不出任何其他解决方法，但我想确保它至少会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:57:00.550

正如您所说，由于竞争条件，这似乎是 Android 中的一个错误。根据用户 CommonsWare 的要求，我打开了一个带有回溯的错误：[http ://code.google.com/p/android/issues/detail?id=53043](http://code.google.com/p/android/issues/detail?id=53043)

有问题的代码似乎在 Android 的 media/jni/soundpool/SoundPool.cpp 中：

```
void SoundPool::notify(SoundPoolEvent event)
{
    Mutex::Autolock lock(&mCallbackLock);
    if (mCallback != NULL) {
        mCallback(event, this, mUserData);
    }
} 
```

看起来 mCallback 是一个可以被垃圾收集器删除的 Java 对象，因此当调用 notify 时，它会尝试引用该对象，并且会发生“访问已删除的全局引用”崩溃。

# python - 如何使用 python 库将数据字符串发送到 XBee？

> ID：13436471
> 
> 赞同：5
> 
> 时间：2012-11-18T01:01:16.200
> 
> 标签：python, xbee

我应该使用哪个库，以及如何使用？

[Python XBee](http://code.google.com/p/python-xbee)似乎只能在 API 模式下发送命令，我找不到任何人使用它发送字符串的示例。也许我误解了 API 模式是什么，但我在文档中找不到有效负载......

[Digi 的 Python Socket 扩展](http://www.digi.com/wiki/developer/index.php/XBee_Extensions_to_the_Python_socket_API)是否已融入 Python？我似乎无法获得他们声称在我的 Python (2.7.3rc2) 中定义的任何常量，也无法在他们的网站上找到有关如何获取这些扩展的提及。这似乎是一种传递字符串的方法，但我该如何使用它呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T01:17:42.247

如果 Xbee 作为串行设备连接到计算机，您可以使用串行库，例如[`pySerial`](http://pyserial.sourceforge.net). 这是我刚刚完成的一个项目的一些代码片段。

```
# Connect to Xbee
self.ser = serial.Serial(port, baud, timeout=timeout)

# Send data (a string)
self.ser.write(packet)

# Read data
self.data += self.ser.read() 
```

我们在透明模式下使用 Xbees - 您在一端写入的每个字节在另一端都可以通过读取看到。不需要特殊的 Xbee 库。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T18:23:16.263

如果您有一个非常简单的设置并且只有两个 XBees，我还建议您使用 pySerial，但如果您有更复杂的东西，那么最好使用库。

python-xbee 库使用起来非常简单，但缺少任何类型的综合文档。要使用它发送和接收简单消息：

```
from xbee import XBee
from serial import Serial

PORT = '/dev/ttyUSB0'
BAUD = 9600

ser = Serial(PORT, BAUD)

xbee = XBee(ser)
# Send the string 'Hello World' to the module with MY set to 1
xbee.tx(dest_addr='\x00\x01', data='Hello World')

# Wait for and get the response
print(xbee.wait_read_frame())

ser.close() 
```

您可以通过以下方式发送 AT 命令：

```
xbee.at(frame_id='A', command='MY')
reply = xbee.wait_read_frame()
print(reply)

# Getting the integer value out of reply
import struct    
print(struct.unpack('>h', reply['parameter'])[0]) 
```

您可以将 frame_id 设置为任何字符串，它用于识别正确的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-18T16:01:39.503

第一个问题是“您确定您的设备处于 API 模式吗？”。您看到此错误是因为接收端看到一个类型为“tx”（类型 0x01）的帧进入。虽然这是您要求发送的帧，但我相信您希望它以类型“rx”的形式接收（类型 0x81）由接收端。

如果您查看 /xbee/ieee.py 中的代码，您将看到两个列表： * api_commands = Outgoing：您永远不会期望这些帧类型之一传入。* api_responses = 传入：您应该只看到这些帧类型传入。

如果库检测到传入的 api_commands 之一，它将抛出您看到的错误： `"Incoming frame with id 1 looks like a command frame of type 'tx' (these should not be received). Are you sure your devices are in API mode?"`

我不是 100% 确定你的情况，但看起来你传出的“tx”帧没有被转换为另一端传入的“rx”帧——可能所有 XBees 上都没有启用 API 模式？

另见[https://github.com/nioinnovation/python-xbee/issues/44](https://github.com/nioinnovation/python-xbee/issues/44)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-13T13:20:45.923

```
ser = serial.Serial(SERIAL_PORT, 9600)
bee = ZigBee(ser) # <-- 
```

如果失败，请尝试使用 ZigBee 而不是 XBee。

# windows-8 - 在 Win 8 Store XAML 应用程序中显示用户输入对话框

> ID：13436472
> 
> 赞同：1
> 
> 时间：2012-11-18T01:01:44.237
> 
> 标签：windows-8, windows-runtime, winrt-xaml

有没有办法在 Win 8 Store XAML 应用程序中实现类似对话框的效果；与本文中指出[的](https://stackoverflow.com/questions/11593978/in-winrt-api-how-to-accept-user-input-in-a-dialog-just-like-in-weather-and-fina)类似，其中对话框的内容是用于收集用户输入的自定义控件。

这是一些示例 XAML 内容，我想以类似于上面帖子中所示的内容居中显示。

```
<common:LayoutAwarePage
x:Class="App1.UserControls.Control1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"   
mc:Ignorable="d"
>

<Grid HorizontalAlignment="Stretch" Background="Gold" VerticalAlignment="Center">
    <StackPanel  VerticalAlignment="Center" HorizontalAlignment="Center" AreScrollSnapPointsRegular="True" Margin="20">
        <TextBlock Text="This is sample text" FontSize="20" Style="{StaticResource HeaderTextStyle}"/>            
        <Button Content="Close" Click="btnClose_Click" Margin="0,20,0,0" HorizontalAlignment="Right"/>
    </StackPanel>
</Grid></common:LayoutAwarePage> 
```

我正在使用 Popup 控件从主页中显示它，如下所示：

```
<common:LayoutAwarepage>
<Grid Style="{StaticResource LayoutRootStyle}">
   <Popup x:Name="ParentedPopup" VerticalOffset="300" HorizontalOffset="200" 
    HorizontalAlignment="Stretch">
            <usercontrols:CreateCategory/>
   </Popup>
 </Grid>
<Page.BottomAppBar>
    <AppBar x:Name="bottomAppBar" Padding="10,0,10,0">
        <Grid>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                <Button Style="{StaticResource AddAppBarButtonStyle}" Click="AddButton_Click"/>

            </StackPanel>
        </Grid>
    </AppBar>
</Page.BottomAppBar></common:LayoutAwarePage> 
```

```
private void AddButton_Click(object sender, RoutedEventArgs e)
{
    if (!ParentedPopup.IsOpen) { ParentedPopup.IsOpen = true; }
} 
```

但是，这并没有像我想要的那样显示，弹出窗口没有显示 xaml 内容居中，它显示在顶部并且没有像我想要的那样居中和拉伸。

有没有一种简单的方法可以实现这一目标？注意：我不想依赖任何库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T04:17:54.597

如果它们解决了您的问题，为什么您不想依赖任何二进制文件？看看[Callisto](http://winrtxamltoolkit.com)，它有一个 CustomDialog 可以为您执行此操作，如文档中所示 - [https://github.com/timheuer/callisto/wiki/CustomDialog](https://github.com/timheuer/callisto/wiki/CustomDialog)。它是开源的，因此您也可以使用源代码。但是您要么依赖某人对您的代码回答，要么依赖二进制文件:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:12:46.843

将垂直偏移分配给屏幕的高度

```
popup.VerticalOffset = (Window.Current.Bounds.Height / 2) - popup.ActualHeight / 2;
Width = Window.Current.Bounds.Width;

VerticalAlignment="Center"; 
```

还

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" x:Name="ContentColumn"/>
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

//Place content in "ContentColumn" to center it
<Grid> 
```

把内容放在`ContentColumn`中心。

# android - 如何提示用户启用 GPS

> ID：13436477
> 
> 赞同：2
> 
> 时间：2012-11-18T01:02:16.580
> 
> 标签：android, android-layout, android-mapview, android-maps

你好 stackoverflow 的世界，

这是我在这里的第一篇文章。

我是 Android 世界的新人，所以如果我查看在线不同的教程，我在打开自己的地图时必须出现的启用 GPS 设置有问题。

我尝试了我在这里找到的以下代码：[Android get location or prompt to enable location service if disabled](https://stackoverflow.com/questions/3470693/android-get-location-or-prompt-to-enable-location-service-if-disabled/3470757#3470757)

```
Button gpsButton = (Button)this.findViewById(R.id.buttonGPSLocation);
gpsButton.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
    // Start loction service
    LocationManager locationManager = (LocationManager)[OUTERCLASS].this.getSystemService(Context.LOCATION_SERVICE);

    Criteria locationCritera = new Criteria();
    locationCritera.setAccuracy(Criteria.ACCURACY_COARSE);
    locationCritera.setAltitudeRequired(false);
    locationCritera.setBearingRequired(false);
    locationCritera.setCostAllowed(true);
    locationCritera.setPowerRequirement(Criteria.NO_REQUIREMENT);

    String providerName = locationManager.getBestProvider(locationCritera, true);

    if (providerName != null && locationManager.isProviderEnabled(providerName)) {
        // Provider is enabled
        locationManager.requestLocationUpdates(providerName, 20000, 100, [OUTERCLASS].this.locationListener);
    } else {
        // Provider not enabled, prompt user to enable it
        Toast.makeText([OUTERCLASS].this, R.string.please_turn_on_gps, Toast.LENGTH_LONG).show();
        Intent myIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        [OUTERCLASS].this.startActivity(myIntent);
    }
}
}); 
```

但是我收到了一些错误，可能是因为我也无法理解它！

这些是我的问题：

*   为什么有必要声明一个按钮（gpsButton）以及我可以在哪里/如何创建它？
*   代码可以整体放在 MapActivity 类之后还是必须放在第一个 onCreate 之后？
*   什么是外层？
*   Manifest 的部分权限（我已经拥有）我必须更改 Layout 上的某些内容？

所以，一般来说，有人可以更好地解释我如何使用这段代码以及我需要做什么修改。

如果您需要，我可以发送我的整个 Java 代码。

提前感谢您的到来。

带着敬意，

克劳迪奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:56:48.933

好吧，你在这里有几个问题。

> 为什么有必要声明一个按钮（gpsButton）以及我可以在哪里/如何创建它？

如果你想创建一个按钮，那么你可以在 Activity 使用的 XML 布局中声明它，或者你可以在代码中添加它。如果您只是从一些示例中粘贴代码，您需要了解此代码实际上是通过在当前视图层次结构（即当前正在显示的布局）中通过它的 id 找到它来创建对 Button 对象的引用。因此，如果您没有在 XML 中的某处创建一个 ID 为 buttonGPSLocation 的按钮，那么此代码将不起作用。至于为什么它是必要的：似乎样本的作者决定提示用户点击一个按钮以打开手机设置并启用 GPS。

> 代码可以整体放在 MapActivity 类之后还是必须放在第一个 onCreate 之后？

这个问题不是很清楚（这里可能是语言问题），但如果您发布所有相关代码可能会有所帮助。一般来说，设置 onClickListeners 可能应该在你的 Activity 的 onCreate 中完成。是否在 MapActivity 内部完成取决​​于您未提供给我们的更多信息。

> 什么是外层？

在 Java 中，您可以在另一个类中定义一个类。我们通常看到的类被定义为“顶级”类，即一些文件名 SomeClass.java，其内容看起来像

```
public class SomeClass {
//some code
} 
```

现在，当您在另一个类中定义一个类时，“嵌套”的是另一个类的内部，反之亦然。所以包含嵌套类的是“外部”类。

```
class OuterClass {
    ...
    class NestedClass {
        ...
    }
} 
```

为什么这一切都很重要？因为有一些关于外部类和嵌套类之间如何工作的规则。在您的情况下，最相关的是当您在按钮上设置 onClickListener 时，您实际上正在做的是将引用传递给 OnClickListener 类的实例。在 Java 中，您可以创建一个匿名内部类，这意味着无需定义一些实现 onClickListener 的顶级类（顺便说一句，您可以轻松地通过让所有这一切发生的类简单地声明它实现 onClickListener 接口，例如`public class WhateverMyClassNameIs extends Activity implements View.OnClickListener`) 您实际上只是在动态创建一个未命名的 onClickListener 实例，该实例无法在其他任何地方引用，因为您尚未声明对它的引用。现在，问题是在这个 onClicklistener 实例内部，当你现在想引用它定义的外部类（在你的例子中，Activity 类）时，你不能再只使用“this”，因为“this”实际上是onClickListener 因为“范围”的工作方式。换句话说，OnClickListener 没有名为“startActivity”的方法；只有一个 Activity 类（或扩展 Activity 的类）。因此，您必须使用所谓的“限定 this”来澄清您打算引用“外部类”，这就是您需要的原因`*MyActivity*.this.startActivity...`

> Manifest 的部分权限（我已经拥有）我必须更改 Layout 上的某些内容？

清单文件和布局文件是两个完全不同的东西。它们都是使用 XML 定义的，但它们完全不同。除其他外，清单包含应用程序请求的所有活动类和权限的声明等。布局文件是活动（UI）内部使用的实际布局。它们应该位于 res/layout 中，你可以在那里定义任何你想要的东西。当您需要使该 UI “活跃”时，您必须在代码中的 Activity 中获取对您的小部件（按钮、文本视图）等的引用，然后在那里做您想做的事情。

# interface - UML - 接口、抽象类或......？

> ID：13436479
> 
> 赞同：2
> 
> 时间：2012-11-18T01:02:24.050
> 
> 标签：interface, uml, virtual, abstract, class-diagram

我的程序有一些抽象的“模块”。假设它是一个 GUI 模块。它只包含模块的接口及其类型——为了与其他模块兼容（在另一个模块中，我可以使用 GUI 模块及其类型，而不用担心它的实现）。

所以我有这样的东西：

```
GUI::Component //represent the abstract component (button, label etc.)
//so it's only the base class for components

GUI::Clickable //if any component is clickable, it must inherit from it

GUI::Button : public Component, public Clickable
GUI::Label : public Component 
```

但即使 a `Label`or`Button`只有虚拟方法（我猜它们是模块的接口）。GUI 模块实现的例如`SomeGUIImp`必须声明`SomeButton : public GUI::Button`和`SomeLabel : public GUI::Label`（由于对象工厂，它们对用户是透明的）。

**我不想更改代码中的任何内容**，我只想**为它制作一个适当的 UML 图**。

所有这些元素 ( `Component, Clickable, Button`) 都是接口吗？还是抽象类？

我想以某种方式表明`Label`and`Button`比`Component`.

此外，最好展示`Clickable`（它的功能）和`Component`（它是所有组件的抽象基础）之间的区别。

## 当前解决方案（不确定）

我不能说 100% 为什么，但在我看来，也许`Clickable`是一个接口，`Component`是一个抽象类，`Button`只是普通类。

但这显示了模块内部的关系，忽略了`Button`（只有纯虚拟方法）也只是某些模块实现的声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:08:13.490

规则很简单——只有纯虚方法的类是接口，部分方法纯虚的类是抽象类，没有虚方法的类是实现类。如果这不适合您的设计，您可能应该重新考虑一些事情。例如，如果您将`Button`其视为接口和常规类，您可能应该将其拆分为 2 个不同的类 - 一个用于接口，一个用于实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T06:53:17.833

由于 C++ 没有接口的概念，当一个类是 100% 抽象（虚拟）时，您可以将其建模为接口或抽象类。在您的描述中，这些类在语义上更接近接口，因此以这种方式对它们进行建模会很好。恕我直言，您所采取的方向似乎非常好。

# apache - 超出文件大小限制（核心转储）PHP CLI 错误

> ID：13436480
> 
> 赞同：0
> 
> 时间：2012-11-18T01:02:35.653
> 
> 标签：apache, centos, cpanel, error-logging

安装了 Cpanel/WHM 的 CentOS（“专用服务器”）。硬盘有 110G 可用。

这是一个命令行 php 错误。我找不到错误日志。指定的错误日志记录的是 http 错误，而不是 CLI 错误。帮助。

我发现一些信息表明某处有一个超过 2GB 的日志文件。

我到处找，找不到。

奇怪的事情：在我的 public_html 文件夹中运行命令并在我的问题标题中收到错误消息：

```
File size limit exceeded (core dumped) 
```

但是当我在里面运行它时，`/var`我得到了：

```
File size limit exceeded 
```

这很奇怪，因为我在命令中使用了绝对路径。

`var/log`没有什么比几 MB 大。`/tmp`没有什么大于约0.7G。

我找不到这个文件，我什至找不到错误日志来给我提示。我找到了 apache 访问日志，但没有错误日志。

编辑：

我从未找到现有的日志文件，但我只是创建了一个新文件。它成功记录了错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:46:23.503

看来我已经想出了自己的答案。

我用它来查找系统上的大文件。从根目录运行它。

```
/ # find -maxdepth 6 -type f -size +1G > ~/largefiles.txt 
```

令人惊讶的是，只花了一两分钟，结果加起来不到一页。

果然，我找到了一个 system.log 文件，它位于其中一个站点根目录的子目录中，大小正好是 2.0GB。我像这样截断它：

```
# > system.log 
```

现在我的命令起作用了！

# php - PHP 代码不拉 Sql 表

> ID：13436482
> 
> 赞同：0
> 
> 时间：2012-11-18T01:02:38.993
> 
> 标签：php

我的 php 代码有问题，它没有从 mysql 数据库中提取我的表行。这段代码看起来是否正确。

```
<?php

$host="localhost"; // Host name 
$username="username"; // Mysql username 
$password="password"; // Mysql password 
$db_name="database"; // Database name 
$tbl_name="marquee"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Retrieve data from database 
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);
?>

    <?php
// Start looping rows in mysql database.
$rows=mysql_fetch_array($result);
?>
test
<? echo $rows['scroll']; 
   echo $rows['id'];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:05:34.637

将您的代码更改为此，然后重试。

```
$host="localhost"; // Host name 
$username="username"; // Mysql username 
$password="password"; // Mysql password 
$db_name="database"; // Database name 
$tbl_name="marquee"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die (mysql_error()); 
mysql_select_db("$db_name")or die(mysql_error());

// Retrieve data from database 
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);

while($rows=mysql_fetch_array($result)) { echo "$rows[scroll] $rows[id]";} ?> 
```

**用于通过 html 表单更新行**

下面，是要更新的代码，但是，你必须先发布`$new_value`，`$id`所以，sql 知道要更新哪个。

`$result = mysql_query("UPDATE marquee SET scroll='$new_value' WHERE id='$id'") or die(mysql_error());`

对于上面的代码，您应该使用 html 表单来发送值，例如：

```
<form method="" post="">
<input type="text" name="new_value" />
<input type="text" name="id" />
<input type="submit" name="submit" /> 
```

以上代码+变量的传递是更新该表所需的全部内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:22:04.483

为了使它起作用，

您必须将此代码放在名为 update.php 的文件中

“marquee”必须是你的桌子的名字

"scroll" 必须是表格中您的行的名称

"1" 必须是 "scroll" 行的 id 名称

**这是数据库连接**

```
<?php
mysql_connect("$host", "$username", "$password")or die (mysql_error()); 
mysql_select_db("$db_name")or die(mysql_error());
?> 
```

**这是html表单**

```
<?php echo "
<form method=\"POST\" action=\"update.php\">
<br/>Update scroll to: <input type=\"text\" name=\"new_value\" />
<input type=\"submit\" name=\"submit\" /> "; ?> 
```

这就是 php 将如何处理提交的数据。

```
<?php 
if(isset($_POST['new_value']) && !empty($_POST['new_value'])) {
$new_value =   mysql_real_escape_string(htmlentities($_POST['new_value']));
mysql_query("UPDATE marquee SET scroll='$new_value' WHERE id='1' ") or die(mysql_error());

} else {echo "Please choose your update term";}

?> 
```

# html - 浏览器 (Chrome/FF) 缩放时不正确地缩放列表项

> ID：13436485
> 
> 赞同：-1
> 
> 时间：2012-11-18T01:03:07.573
> 
> 标签：html, css, browser, webkit, margin

在缩放级别 100% 时，一切都匹配。但是当缩放级别被修改时，（我认为）列表项的边距没有正确缩放。对于几个缩放级别，它似乎保持相同的大小，然后“跳转”到下一个正确的值。我相信这是由于浏览器将边距四舍五入，所以 1.1px 仍然是 1px，1.4px 仍然是 1px，然后从那里突然跳跃。

可以显示此行为的示例网页：http: [//thisiswhyimsane.com/](http://thisiswhyimsane.com/)

缩放页面时，请查看“查看”按钮和下方的缩略图。

编辑：对行为的更多测试表明缩放对于 50%、100%、150%、200% 等是正确的，但介于两者之间是正确的。这强烈表明浏览器中存在舍入问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:22:23.593

Webkit 最终将值四舍五入以获得性能。

# floating-point - 负浮点到二进制转换

> ID：13436486
> 
> 赞同：2
> 
> 时间：2012-11-18T01:03:27.450
> 
> 标签：floating-point, binary, hex, base-conversion, ar.drone

我正在使用 AR Drone SDK 对无人机进行编程。在文档中，是这样说的：

> 根据 IEEE-754 格式，数字 -0.8 作为 32 位字存储在内存中，其值为 BF4CCCCD(16)。这个 32 位字可以认为是保存 32 位整数值 -1085485875(10)。所以要发送的命令是 AT*PCMD=xx,xx,-1085485875,xx,xx。

对于二进制转换的十进制表示，它们如何到达 -1085485875？这对我来说没有意义。使用此页面： http: [//kipirvine.com/asm/workbook/floating_tut.htm](http://kipirvine.com/asm/workbook/floating_tut.htm)和此页面： http: [//www.madirish.net/240](http://www.madirish.net/240)和此页面[http://cs.furman.edu/digitaldomain/more /ch6/dec_frac_to_bin.htm](http://cs.furman.edu/digitaldomain/more/ch6/dec_frac_to_bin.htm)，这就是我想出的：

```
decimal value = -0.8

binary value of decimal (-0.8) = -.11001100110011001100110

biased exponent (move above decimal over once to right) = 127 - 1 = 126 = 01111110

sign, exponent, mantissa (mantissa: drop off the 1 to left of decimal point, pad to 23) = 1 01111110 10011001100110011001100

10111111010011001100110011001100 = 3209481420 (10) BF4CCCCC (16). 
```

文档说它的 -1085485875 (10) 和 BF4CCCCD (16)

我在这里做错了什么？？？

谢谢。

编辑：

由于我正在使用 node/js 编写 AR DRONE 应用程序，因此如果我使用这些 node.js 函数：

```
var buffer = new Buffer(4);
buffer.writeFloatBE(-0.8, 0);
return -~parseInt(buffer.toString('hex'), 16) - 1; 
```

根据文档，我得到了正确的结果。当我把它写出来时，我只是不明白我做错了什么。我想了解发生了什么。非常感谢任何帮助。

谢谢。

更新：

所以，我已经知道（从上面的 javascript 代码中）如果我首先将按位 NOT 运算符应用于二进制，那么它会产生正确的数字。我的问题是，为什么需要应用这个？完成此操作后，如果第一位是零而不是一，您必须确定其是否为负。这有什么意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:50:57.960

-0.8 = -0.110011001100110011001100 11001100110011001100110011001100110011...（空格在位 24 和 25 之间——位 25 是舍入位）。这四舍五入为 24 位，为 0.110011001100110011001101。以下是它在 IEEE 单精度格式中的外观：

```
sign  biased exponent    trailing 23-bits of mantissa
 \/        \/                      \/
 1      01111110         10011001100110011001101 
```

那是 10111111010011001100110011001101，或十六进制的 BF4CCCCD。如果您将其视为整数的二进制补码，则为 -1085485875。

# android - 如何获取 CheckBox 或 RadioButton textAppearance？

> ID：13436488
> 
> 赞同：4
> 
> 时间：2012-11-18T01:03:40.283
> 
> 标签：android, radio-button, android-checkbox

我的布局中有一些单选按钮和/或复选框，我希望`TextViews`它们周围的文本外观（大小、颜色等）相同。

基本上，我正在寻找类似以下的内容：

```
<TextView
    android:textAppearance="?android:attr/textAppearanceRadioButton"
    ...
/> 
```

是否有可能以其他方式实现这一目标？

PS：我不想更改单选按钮和复选框已有的“默认”文本外观。另外，我不是在寻找运行时解决方案，而是在寻找利用 xml 布局文件的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T12:05:36.237

我现在找到了，这似乎至少适用于`Theme.Holo`and `Theme.Holo.Light`：

```
android:textAppearance="?android:attr/textAppearance"
android:textColor="?android:attr/textColorPrimaryDisableOnly" 
```

这些是设置在 a`CheckBox`上但未设置在 a上的两件事`TextView`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T01:23:17.150

根据Android API docs（强调我的）：

> 安卓：文本外观
> 
> 基本文本颜色、字体、大小和样式。
> 
> **必须是对另一个资源的引用**，形式为“@[+][package:]type:name”或主题属性的形式为“?[package:][type:]name”。
> 
> 这对应于全局属性资源符号 textAppearance。

这表明您只需要在 s 的 `android:textAppearance`属性中引用您`TextView`在 s 中使用的相同资源`RadioButton`。

# html - 在 jQuery Mobile 中链接到外部 HTML 文件

> ID：13436489
> 
> 赞同：1
> 
> 时间：2012-11-18T01:03:41.927
> 
> 标签：html, jquery-mobile, jquery

我正在使用 jQuery Mobile 创建一个项目，并且在尝试链接单独的 HTML 页面时遇到了麻烦。到目前为止，我有两个单独的 HTML 文件：pageInitEvent.htm 和 pageInitEvent2.htm。我在两个页面上都有按钮，并且希望在单击时相互链接，当单击第一页上的按钮（pageInitEvent.htm）时，我还有一个事件会被触发（或者我希望它被触发）。我已使用 $(document).on("pageinit", ".pageinit2", function(){ （pageInitEvent.htm 文件的部分）将此事件绑定到 pageInitEvent2.htm。

我的问题是，如果我没有在两个按钮中都包含 rel="external"，它们将不起作用并且只会发出错误，如果我将 rel="external" 添加到两个按钮，那么它们链接正常，但事件如果有任何不起作用，仍然不会触发和页面转换。有什么方法可以链接 2 个单独的 html 文件而不影响页面转换并使事件正常工作？我已经尝试过使用多页 HTML 文件，并且一切正常，只是当我将它们分成不同的 HTML 文件时，一切都搞砸了

**这是 pageInitEvent.htm 的代码：**

```
<!DOCTYPE html>
<html>
<head>
    <title>Listing 4.1</title>
    <!-- name attribute tells the browser the meta tag contains information about the viewport or the display size of the page -->
    <!-- content attribute tells browser to display the page with the same dimensions as the device it is beign viewed on -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The jQuery Mobile CSS style sheet -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <!-- The standard jQuery library -->
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

   <script type="text/javascript">
         $(document).on("mobileinit", function(){
            //$.extend allows to merge two objects together
            //$.mobile is the target object to add or merge to
            //The second argument to this function is the settings we want to change or merge to the $.mobile object
            $.extend($.mobile, {
                //change the message that appears when a pageLoadError happens
                pageLoadErrorMessage: 'Either the page cannot be found or it cannot be loaded.'
            });
        }); 

        //binds the pageinitevent with the page pageInit2
        //third argument is an anonymous inner functi
        $(document).on("pageinit", ".pageinit2", function(){
            alert("pageinit is bound!");
        }); 
    </script>

    <!-- The jQuery Mobile library -->
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head>
<body>
    <div data-role="page">
        <div data-role="header"><h1>pageInit event example</h1></div>
        <div data-role="content">
            <p>The button below will use AJAX to load another page and trigger a bound event</p>
            <a href="pageInitEvent2.htm" data-role="button" >Click to open a new page</a>
        </div>
    </div>  
</body>
</html> 
```

**pageInitEvent2.htm 的代码是：**

```
<!DOCTYPE html>
<html>
<head>
<title>pageInitEvent2</title>
    <!-- name attribute tells the browser the meta tag contains information about the viewport or the display size of the page -->
    <!-- content attribute tells browser to display the page with the same dimensions as the device it is beign viewed on -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The JQuery Mobile CSS style sheet -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <!-- The standard JQuery library -->
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

    <!-- The jQuery Mobile library -->
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
    <div data-role="page"  data-url="pageInitEvent2.htm" class="pageinit2">
        <div data-role="header"><h1>pageinit example</h1></div>
        <div data-role="content">
            <p>fantastic!</p>
            <a href="pageInitEvent.htm" data-role="button" rel="external" >Amazing, now take me back</a>

        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:16:32.367

尝试为每个 div 分配唯一的 ID。

```
<div id="pageA" data-role="page"></div>
<div id="pageB" data-role="page"></div> 
```

# php - 从 phpmyadmin 提取查询时如何从我的 url 中删除 %20

> ID：13436495
> 
> 赞同：0
> 
> 时间：2012-11-18T01:04:47.643
> 
> 标签：php, url, phpmyadmin

好的，我在数据库中手动插入了名称 New York。现在我想显示为 New York 的两个词，它工作正常，但是当我想变成像 newyork.mydomain.com 这样的链接时，这两个词没有组合，而是 new%20york.mydomain.com。无论如何要在数据库中将名称保留在两个单词中，但是当我变成链接时将它们组合起来。当我进行查询时，请保留在我的位置上，有些名称只有一个词，而另一些则有多个词。这是我正在使用的代码。

```
while($state = mysql_fetch_array($states_set)) {
    echo "<td><a href=\"http://{$state["menu_name"]}.mydomain.com\">{$state["menu_name"]}</a></td>"; 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:16:18.597

必须摆脱`%20`可能会导致问题，因为问题是它最初是如何到达那里的。您可以使用`urldecode`解码任何网址

例子

```
$url = "new%20york.mydomain.com";
echo urldecode($url); 
```

输出

```
new york.mydomain.com 
```

然后`str_replace`在必要时和`trim`连接期间使用替换空白空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:30:29.267

十六进制 20 是空格（20H 或 %20）。Urls 不能有空格，所以最好的办法是删除所有 %20 或用“_”或“-”替换它们，用 str_replace() 或类似函数。

# caching - 什么叫检查缓存功能？

> ID：13436508
> 
> 赞同：0
> 
> 时间：2012-11-18T01:07:07.673
> 
> 标签：caching, naming

API 提供该功能`get_object()`。现在，我正在编写一个自己的函数，它要么调用`get_object()`，要么，如果对象被缓存，则返回缓存的对象。怎么调用那个函数？

我认为`get_cached_object()`这意味着它已经被缓存了，但情况可能并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:17:50.690

我个人喜欢将此类方法命名为“获取”，以与术语“从缓存中获取”相关。对我来说，这听起来像是“可能发生缓存”，而不是具有正常含义的“获取”，即：没有含义而不是“给我”。

例如，单例或缓存工厂：“fetchOrCreate”
互联网下载或从缓存中获取：“fetchOrDownload”

如果您不喜欢它的声音，我建议您使用简单的“getCachedObjectInstance”或“getCachedObject”。表明缓存的存在就足够了，我认为这样名称的方法也可以根据需要初始化或更新缓存。

# c# - 选择 LINQ 中不存在子行的行

> ID：13436510
> 
> 赞同：4
> 
> 时间：2012-11-18T01:07:21.117
> 
> 标签：c#, linq, linq-to-sql

我有以下表格

```
Clubs
- Id
- Name

Members
- Id
- ClubId linked to Clubs.Id
- Name 
```

如何在 LINQ 中编写一个查询，它会给我一个没有任何成员的俱乐部列表？

PS：这里的正确术语应该是什么？members 表是 Clubs 表的 *。（不是父母和孩子，而是？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:10:51.780

> 如何在 LINQ 中编写一个查询，它会给我一个没有任何成员的俱乐部列表？

你可以这样做：

```
from m in db.Members
where !db.Clubs.Any( c => (c.Id == m.ClubId))
select m; 
```

**对于你的第二个问题：**

> 这里应该是正确的术语吗？members 表是 Clubs 表的 *。（不是父母和孩子，而是？）

不它不是。这不是父子关系，因为成员可以在没有俱乐部的情况下存在。`Members`在您的情况下和之间的关系`Clubs`是他们在 UML 中所说的***Aggregation***。但是父子关系或他们所谓的***组合***，即***有***关系，子对象不能没有父对象而存在。这不是你的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:57:45.010

这为您提供了没有会员的俱乐部列表：

```
from c in db.Clubs
where !db.Members.Any( m => m.ClubId == c.Id)
select c; 
```

但我怀疑正确的方法是与中间表建立多对多关系。（您的数据可能是个例外？）如果您属于 3 个俱乐部，您的记录会在会员表中出现 3 次吗？如果 ClubId 在 Members 表中，则必须这样做。必须对 3 条记录进行地址更改。这不是正确的方法。

因此，从 Members 表中删除 ClubId 并添加一个仅包含 MemberId 和 ClubId 的表 Members_Clubs 将允许您将单个成员与多个俱乐部相关联。

然后语句将如下所示：

```
from c in db.Clubs
where !db.Members_Clubs.Any( mc => mc.ClubId == c.Id)
select c; 
```

在这种情况下，两个实体都不是“父母”或“孩子”。这使它们成为关联实体。

# javascript - 没有服务器端脚本（javascript）的处理表单+在脚本中添加CSS

> ID：13436516
> 
> 赞同：1
> 
> 时间：2012-11-18T01:08:08.810
> 
> 标签：javascript, html, css, forms, document.write

在过去的几天里，我一直在做一个非常大的表单项目。我终于设法让表格在打开一个新显示窗口的 javascript 文件中正常工作。现在手头的问题是我似乎无法让 CSS 代码在我创建的 javascript 中工作。

在每个人开始思考“只使用服务器端脚本白痴”之前，我有一些关于文件的条件和信息：

*   由于机密信息风险，该文件仅在本地运行。再次没有服务器访问选项。计算机所在的 Intranet 已经是最高安全级别，这不完全是公司范围内的程序*   下面的代码显然只是一个简单形式的演示......*   真实文件有六页高度机密信息*   实际上只会收集此表单上的某些字段（例如：地址未出现在结果中）*   显示页面将包含编译成表格的数据，以便于查看*   我需要能够创建 css 命令以轻松检测某些信息（如果它适用）以及原始表单的匹配设计

这是代码：

```
<html>
<head>
<title>Form Example</title>
<script LANGUAGE="JavaScript" type="text/javascript">
function display() {
DispWin = window.open('','NewWin', 'toolbar=no,status=no,width=800,height=600')

message = "<body>";
message += "<table border=1 width=100%>";
message += "<tr>";
message += "<th colspan=2 align=center><font face=stencil color=black><h1>Results</h1><h4>one</h4></font>";
message += "</th>";
message += "</tr>";

message += "<td width=50% align=left>";
message += "<ul><li><b><font face=calibri color=red>NAME:</font></b> " +         document.form1.yourname.value + "</UL>"  
message += "</td>"; 

message += "<td width=50% align=left>";  

message += "<li><b>PHONE: </b>" + document.form1.phone.value + "</ul>";
message += "</td>";
message += "</table>";
message += "<body>";

DispWin.document.write(message);
DispWin.document.body.style.cssText = 'color:#blue;'; 
}
</script>
</head>
<body>
<h1>Form Example</h1>
Enter the following information:
<form name="form1">
<p><b>Name:</b> <input TYPE="TEXT" SIZE="20" NAME="yourname">
</p>
<p><b>Address:</b> <input TYPE="TEXT" SIZE="30" NAME="address">
</p>
<p><b>Phone: </b> <input TYPE="TEXT" SIZE="15" NAME="phone">
</p>
<p><input TYPE="BUTTON" VALUE="Display" onClick="display();"></p>
</form>
</body>
</html>
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:18:41.480

无需将整个内容编写为 JS，只需调用静态页面，并根据需要让脚本更改值。

例如，制作您的模板：

不管是什么_after_post.html

```
<SomeKindOfDocType>
<html>
  <blahblah>
    <style> * { color: black} </style>
  </blahblah>
  <blahblah>
    <input type=text id="DatTing" />
  </blahblah>
</html> 
```

接下来，从调用创建新窗口的页面，以同样的方式...

```
DispWin = window.open(... 
```

只需打开模板文件，并使用您对 DispWin 的引用来访问更改该模板值的方法，就像更改任何其他页面 ( `window.getElementById`vs `DispWin.getElementById`) 上的值一样。没有理由将整个 HTML 文件构建为调用它的 JS 中的字符串……这将更难维护，并且您将遇到现在遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:14:38.350

您可以创建一个标签以链接到 CSS

# javascript - CSV/TSV 注释行 d3

> ID：13436519
> 
> 赞同：4
> 
> 时间：2012-11-18T01:09:47.010
> 
> 标签：javascript, comments, d3.js

我正在尝试使用 d3 读取 tsv 数据。但是，我的数据有如下注释行

```
#Comment line
@Different comment line
x    y
1    2
4    2
5    1 
```

是否可以让 d3 忽略这些行？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T05:22:21.740

D3 没有内置的方法来忽略注释行。您最简单的选择是在使用 D3 解析之前对文件进行预处理：

```
d3.text(url, 'text/csv', function(csv) {
    // remove comment rows with regex - not fully tested, but should work
    csv = csv.replace(/^[#@][^\r\n]+[\r\n]+/mg, '');
    var data = d3.csv.parse(csv);

    // ... now the rest of your code ...
}); 
```

# java - 如何在不破坏应用程序输出的情况下重定向 JVM 输出？

> ID：13436520
> 
> 赞同：18
> 
> 时间：2012-11-18T01:09:52.737
> 
> 标签：java, python, linux, jvm

最近我在写一些微基准代码，所以我必须打印出 JVM 行为以及我的基准信息。我用

```
-XX:+PrintCompilation
-XX:+PrintGCDetails 
```

和其他选项来获取 JVM 状态。对于基准信息，我只是使用`System.out.print()`方法。因为我需要知道我打印的消息的顺序和 JVM 输出。

当我在控制台中打印出来时，我可以得到很好的结果，虽然 JVM 输出有时会破坏我的消息，但由于它们在不同的线程中，这是可以理解和接受的。

当我需要做一些批处理基准测试时，我想***`redirect the output into a file`***使用`pipe (> in Linux system)`, 并使用 python 从文件中获取结果并进行分析。

这是问题所在：

**`The JVM output always overlapped with the messages I printed in the Java application.`**它破坏了消息的完成。

知道如何处理这种情况吗？我需要**`both the JVM output and application output in the same place in order to preserve the sequence because it is important. And they do not overlap on each other so I don't lose anything.`**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T02:09:44.417

I would suggest taking a slight detour and looking at using Java Instrumentation APIs - use (write) a simple **Java Agent** to do this. From your benchmarking perspective, this will give you far more power as well. You could use your Java Agent to log everything (and hence there would be no contention between different logger threads).

You can read more at [http://www.javabeat.net/2012/06/introduction-to-java-agents/](http://www.javabeat.net/2012/06/introduction-to-java-agents/) or [http://today.java.net/pub/a/today/2008/04/24/add-logging-at-class-load-time-with-instrumentation.html](http://today.java.net/pub/a/today/2008/04/24/add-logging-at-class-load-time-with-instrumentation.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T16:13:39.510

尝试使用`System.out.println()`而不是`System.out.print()`. `System.out.println()`强制同步部分内的流刷新，至少您的输出不会混合。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T23:07:20.123

使用 Log4J 或消息驱动的日志框架而不是`System.out.println()`.

Log4J 使用消息事件模型来保证消息的顺序。此外，各种“附加程序”可用于记录到数据库或其他输出/文件，允许通过 Java 包和其他属性进行分离，因此数据不会混合。

此外，按照这些思路，考虑使用高性能计时器和/或不要尝试测量非常短（毫秒）的事件。原因是调用`System.currentTimeMillis()`将反过来调用操作系统时钟。在每个操作系统上，都会存在一些“时钟漂移”和缓存，这样底层系统函数可能会返回相同的值，从而导致实际时间出现 +/- 30 毫秒的偏移。为了解决这个问题或提高准确性，请将被测量的函数分组为足够大的样本大小，然后除以迭代次数。

例如，执行 10K 次平均 1-2 毫秒的操作作为一个测量操作。然后除以 10K 得到每次操作的时间。

否则，同样需要高性能计时器。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-22T14:22:36.943

通过 System.out.print/println 直接记录被认为是不好的做法。

为什么？

1.  它不是“线程安全的”。从多个线程记录导致乱码文本
2.  它不灵活，因为它是硬编码的并且没有配置。
3.  它不灵活，因为您无法指定希望在日志中看到的详细程度（例如详细跟踪/特定调试逻辑/应用程序警告/应用程序错误处理/应用程序致命错误）。你总是得到很多，需要注释很多行代码以避免日志过载。
4.  它是不灵活的，因为您无法指定您对哪些包/类感兴趣或不感兴趣 - 同样，您总是会得到很多并且需要为更简单和更具体的内容注释很多行
5.  它不灵活，因为您无法将日志重定向到数据库表和列、文件、电子邮件、消息系统、SMS 警报等
6.  这是不灵活的，因为您不能将不同的日志级别/包或类流式传输到不同的日志记录目的地。此外，您不能将其配置为与应用服务器登录到相同的目的地或不同的目的地，并且它是 JVM
7.  当您将数千/数百万行记录到物理磁盘时，它会很慢

2000 年，Log4J 被引入。
它解决了所有这些问题，从那时起就或多或少成为标准解决方案。虽然有一些最新最好的日志工具试图超越 Log4J，但您仍然可以使用 Log4J 获得强大、灵活的结果。如果您将所有 System.out.print 调用切换到 Log4J，那么您引用的问题和许多其他问题将会消失。

[http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-11T03:18:24.343

对于`-XX:+PrintCompilation`，您可以改用`-XX:+UnlockDiagnosticVMOptions -XX:+LogCompilation`标志在单独的“hotspot.log”文件中获取“详细”输出。该文件为 XML 格式，包含`-XX:+PrintCompilation`此类编译的信息和原因。文件路径可以通过`-XX:LogFile=<new_hotspot_log>`. 参考：[https ://wiki.openjdk.java.net/display/HotSpot/LogCompilation+overview](https://wiki.openjdk.java.net/display/HotSpot/LogCompilation+overview)

对于`-XX:+PrintGCDetails`，您可以使用`-Xloggc:<gc_log>`将 GC 输出重定向到指定文件。参考：`java -X`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T06:03:49.913

Try splitting the output of JVM and your application.

*   Output JVM's information to stdout
*   Output your application's information to stderr, with "System.err.println()"
*   Analyze the the output with your favorite tools.

So, the command line is like this:

```
$java -XX:+PrintCompilation -XX:+PrintGCDetails MainClass 1>stdout.txt 2>stderr.txt 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-18T06:11:38.703

我建议尝试以下方法。这更像是一种黑客行为，需要一些修补。但从长远来看，掌握这种方法可能会有所回报。特别是，如果您进行大量基准测试。

话虽如此，我很肯定 HS（现在是 Oracle）应该可以选择将编译器输出重定向到文件。您只需要足够努力地寻找它:-) HS 应该有一个选项可以打印出所有 JVM 和编译器选项，其中可能是将输出重定向到文件的选项。

反正我跑题了...

1) 你的 $JAVA_HOME 或 %JAVA_HOME% 中应该有 src.zip。它包含 Java 类库的源代码。

2) 修改 System.out 以将所有输出重定向到特定的失败，或者只是让它插入一些特殊符号，您可以在其上使用 grep 来捕获 stdout 和 stderr。不幸的是，我不能更具体地说明这一特定步骤，因为我们公司的政策禁止我们检查 src.zip 的内容。我只能想象这一步会有多困难。也许它就像用你的输出流交换“out”一样微不足道，或者像修改你的应用程序直接使用的每一个打印方法一样困难。我什至不知道 System.out 使用了多少本地人

3) 将编译后的版本放入 jar 文件中。

4) 将此选项添加到您的命令行： -Xbootclasspath/p:full_path_to_your_jar 这将告诉 JVM 首先使用您的类版本。“P”代表前置。

希望这会有所帮助...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-23T05:56:44.200

为了以非重叠方式输出，请使用 System.out.println。然后你可以像这样重定向到同一个文件：

```
java -XX:+PrintCompilation -XX:+PrintGCDetails MainClass 1>stdout.txt 2>&1 
```

这在文件名 stdout.txt 中包含所有错误以及正常的控制台输出

此外，如果日志有任何形式的线程/时间信息，您可以简单地使用

```
sort -n -k 1 
```

其中 -k 1 代表您拥有线程/数据（纪元）信息的列。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-19T20:24:53.497

首先，我会尝试@barracel 关于使用 System.out.println() 的说明。

我对 Java 了解不多，但您也可以将所有调试消息写到 stderr 并将 stdout 留给 JVM。这可以防止多个线程写入同一文件描述符时明显发生的标准输出污染。

# php - 如何用 PHP 替换显示的输出

> ID：13436526
> 
> 赞同：1
> 
> 时间：2012-11-18T01:10:33.717
> 
> 标签：php, mysql

有没有办法用预先定义的东西自动替换 PHP 中的回显单词或短语？我尝试使用`define()`，但这不是我想要的方式（或者我没有正确执行它。

在我的数据库中，我有所有美国州，但它们的名称都是这样缩写的；密苏里州、阿拉斯加州、阿拉巴马州、伊利诺伊州...

我想做的是创建一个文件，将 MO 定义为密苏里州，将 IL 定义为伊利诺伊州，当 MO 被回显时，它会自动替换为密苏里州。

有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T01:13:46.793

最好的方法是缓冲输出然后处理它。

输出缓冲是通过调用 ob_start() 在你想要的内容即将被回显之前完成的。然后，您可以获取使用 ob_get_clean() 回显的所有内容，这会将其从缓冲区队列中取出。然后，您可以对其进行任何类型的处理，然后再次回显。

一个简单的例子：

```
<?php
function echoState() { echo "NY"; }

ob_start();
echoState();
$output = ob_get_clean();
echo str_replace("NY","New York",$output);
?> 
```

运行它，您将在页面上打印纽约。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T01:12:56.880

有几种好方法。一种是创建一个包含您的文本的变量，然后对其进行操作，而不是立即回显字符串。

另一种是使用[输出缓冲](https://stackoverflow.com/questions/2832010/what-is-output-buffering)，它接收你回显的所有内容并将其保存起来，允许你构建你的页面，然后一次显示它，或者将它转储到一个变量中进行处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T01:11:40.313

用户`str_replace(find,repalce,from);`函数来替换 PHP 中的任何内容。

如果要替换多个预分配的值，请使用以下内容：

```
function replacer($searchArray,$replaceArray, $text){

        $searchArray = array("illinois","NewYork","LosAngeles");    
        $replaceArray = array("IL","NY","LA");  

        return str_replace($searchArray, $replaceArray, $text);
        } 
```

现在，替换部分：

`$text = "this is a full text containing everything you want to be replaced";`

`echo replacer(@$searchArray, @$replaceArray, $text);`

# c++ - DCT 的输入值是多少？

> ID：13436530
> 
> 赞同：3
> 
> 时间：2012-11-18T01:11:31.807
> 
> 标签：c++, compression, jpeg, dct

所以我正在尝试编写一个简单的 bmp to jpeg 图像转换器程序。如您所知，jpeg 压缩、DCT、量化和熵编码涉及 3 个主要步骤。我想将在每个中间阶段计算的值写入文件。

现在我的问题是，在我将每个像素的 RGB 值转换为 YUV 格式并将其存储到 3 个单独的二维数组中之后，是否在每个数组上计算 DCT？因此给了我 3 个不同的阵列并应用了 DCT？如果这是正确的，那么下一步就是量化对应于 Y、U 和 V 的每个数组。然后必须对这些二维数组中的每一个应用熵编码。

这 3 个数组如何组合/写入文件，以便它们可以作为 .jpeg 文件读取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:37:58.260

首先我建议你下载[jpeg 规范](http://www.w3.org/Graphics/JPEG/itu-t81.pdf)。

您必须为每个颜色通道单独计算 DCT：因此对于 YUV 颜色空间，您必须为每个 Y 8x8 块计算一个 DCT，一个用于 U 通道，一个用于 V 通道。

大多数情况下，U 和 V 通道被二次采样：这意味着每个 U 和 V 有 2 或 4 个 Y 块。

应用 DCT 后，您可以对每个 DCT 进行量化：不同的通道通常需要不同的量化表（jpeg 规范建议使用正确的表）。

然后使用 Huffman 算法对量化结果进行编码：您可以以交错方式（1 到 4 个 Y 块后跟 1 个 U 和 1 个 V 块）或线性模式（首先是所有 Y 块）将每个颜色通道转储到 jpeg 流，然后是所有的 U，然后是 V)。

jpeg 流可能包含 RST 标签，这些标签在丢失字节的情况下重新同步解码。

但是您确实需要 jpeg 规范才能完成此任务。

# c# - 在 ASP.NET 页面上的 .asmx Web 服务中获取 Routedata

> ID：13436531
> 
> 赞同：1
> 
> 时间：2012-11-18T01:11:32.280
> 
> 标签：c#, asp.net, routedata

我正在使用 ASP.NET Web 表单。在我的应用程序中，我需要能够访问 URL 中用户名的路由数据。

网址看起来像这样：`localhost/profile/MyRAndomUserNAme`

在 On_Load 事件中接收它没有问题，如下所示：

```
string userName = Page.RouteData.Values["UserName"] as string; 
```

但是，如果我在我的 Asmx WebService 中并尝试从 URL 接收用户名，它就不起作用。那么我该如何解决呢？

PS：它不是 MVC 项目，所以我不能`var userName = ViewContext.RouteData.Values["UserName"];`在视图上使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:22:19.773

我有一段时间没有做过 asp.net 非 MVC，但我相信这可以使用类的`Current`属性`HttpContext`。该`Current`属性是`static`并且应该在网页回发期间始终可用。

用于`HttpContext.Current.Request.QueryString["UserName"]`获取您需要的值。

# c - C 错误似乎突然抛出

> ID：13436538
> 
> 赞同：0
> 
> 时间：2012-11-18T01:14:05.690
> 
> 标签：c, segmentation-fault

我正在关注 C 的在线课程（[链接](http://c.learncodethehardway.org/book/learn-c-the-hard-waych18.html)），这是一段代码，里面有我的一些打印：

```
void Database_create(struct Connection *conn, int max_rows, int max_data)
{
  printf("Database_create with max_rows = %d, max_data = %d\n",max_rows,max_data);
  int i = 0;

  printf("Starting for-loop\n");
  for(i = 0; i < max_rows; i++) {

    printf("i");
    struct Address addr = {.id = i, .set = 0};

    printf("a");
    conn->db->rows[i] = addr;
  }
  printf("Done!");
} 
```

当我运行它时，上面的函数被调用，输出如下：

```
toon@ToonAlfrinkPC ~/Projects/lcthw $ ./ex17 test.db c 200 513
Database_create with max_rows = 200, max_data = 513
Segmentation fault 
```

现在，我确定我在 for 循环的某个地方犯了一个错误，但这无关紧要，我担心没有打印“开始 for 循环”。这一定意味着错误介于这两个打印语句之间。

初始化 i 或调用 printf 是否导致分段错误？如果没有，有空格吗？怎么可能？

注意：我没有忘记编译。

编辑：

更令人困惑的是，Database_create 函数现在似乎无需任何调整即可正常工作。

是否可以同时运行不同的功能？程序是这样运行的：

```
if(argc != 5) die(conn, "USAGE: ex17 <dbfile> create <max_rows> <max_data>");
Database_create(conn,atoi(argv[3]),atoi(argv[4]));
Database_write(conn);
break; 
```

Database_write 函数似乎导致错误，是否有可能在 Database_create 完成之前引发该错误？

编辑：

我说'没有任何调整'，但我确实在最后一条评论之后添加了一个换行符（“完成！\n”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:47:30.027

stdout 通常是行缓冲的。因此，除非您打印的字符串是换行符终止的，否则它将被缓冲并稍后显示，可能直到程序退出时才显示。

这意味着即使您看不到它的输出，问题也可能发生在 printf 之后。

为了避免这种情况，在所有没有终止换行符的 printf 语句之后放置一个 fflush(stdout) 。

# javascript - Phonegap / Cordova 改变个别声音的音量？

> ID：13436540
> 
> 赞同：2
> 
> 时间：2012-11-18T01:14:07.417
> 
> 标签：javascript, ios, audio, cordova

使用 Phonegap / Cordova 2.2 及其媒体 API 来加载循环以在我的应用程序中播放。(http://docs.phonegap.com/en/2.2.0/cordova_media_media.md.html#Media)

工作正常，但我希望能够以编程方式更改每个声音的相对电平。有谁知道这是否可能？

我能看到的唯一选择是避免使用 Native Phonegap 解决方案并使用 Web Audio /html5，但这会将应用程序仅限于 ios6 设备。

PS。我也知道 IOS 的音量滑块插件，但需要一个只影响单个声音的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:40:24.373

从 Cordova 2.0 开始（正如我发现的那样），有一种方法可以以编程方式更改音量。未记录但类似这样（其中 x = 0 到 1）

```
MySound.setVolume(x); 
```

请注意，它只会影响声音开始播放之前的音量。它不会改变已经播放的声音的音量（我已经提交了功能请求）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:09:33.690

您可能需要查看低延迟音频插件。有些人对它提出了下拉请求以支持设置音量。检查以下评论：

[http://www.tricedesigns.com/2012/01/25/low-latency-polyphonic-audio-in-phonegap/](http://www.tricedesigns.com/2012/01/25/low-latency-polyphonic-audio-in-phonegap/)

# c - 查找 EOF 以附加字符数组

> ID：13436542
> 
> 赞同：0
> 
> 时间：2012-11-18T01:14:29.273
> 
> 标签：c, append, add, eof

这是我的问题：我从 .csv 文件中读取并将该文件的每个字符放入一个 1D 数组中，例如 500 个字符（我知道 .csv 文件中的字符数永远不会达到这样的数字，所以没关系）。问题是，我想在 .csv 文件的末尾添加一个新行。由于我需要在将字符放入文件之前对字符进行一些操作，因此我想在我的数组末尾添加这样一行的内容，好吧，在 EOF 之前的索引处。有没有一种简单的方法可以扫描我的整个阵列并找到放置新内容的位置？

例如，我的数组看起来像这样：

```
[ j o h n ,   p a s s 1 2 ,   u s e r (...remaining empty spaces, i.e RES) ]
[ j o h n ,   p a s s 1 2 ,   u s e r   j o e y ,   h e l l o 9 ,   u s e r (RES) ] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:24:54.370

要查找文件末尾，请执行以下操作：

```
fseek(file, 0, SEEK_END); 
```

因此，要在文件结尾之前找到一个位置，您可以：

```
fseek(file, -1, SEEK_END); 
```

# delphi - 如何在 Delphi 中创建类名数组以进行比较？

> ID：13436547
> 
> 赞同：0
> 
> 时间：2012-11-18T01:14:55.107
> 
> 标签：delphi, class

我正在使用德尔福。我有一个根类和许多来自根的派生类，类的名称是TROOT，TA，TB，TC ...在代码中，我有一些代码可以通过以下代码控制程序的流程

```
var
  obj :TROOT;
begin
  if ((obj is TA) or (obj is TB) or (obj is TC) or (obj is TD)) then
  begin
    // some other codes here
  end
end; 
```

这段代码运行良好，但后来我扩展了我的代码，因此更多的子类派生自 TROOT，并且 swtich 出现在程序中的多个位置。有什么办法可以将类类型放入一个集合或数组中，并有一些类似下面的伪代码，这样我就不必在扩展代码时到处修改？

```
classarray = {TA, TB, TC, TD, TE, TF};
if (obj in classarray) then
begin
  // put my code here
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T01:40:53.110

您当然可以将这些类放在一个数组中。像这样声明类型：

```
type
  TRootClass = class of TRoot;
  TRootClassArray = array of TRootClass; 
```

声明并填充数组：

```
var
  RootClasses: TRootClassArray;

SetLength(Classes, 4);
RootClasses[0] := TA;
RootClasses[1] := TB;
RootClasses[2] := TC;
RootClasses[3] := TD; 
```

然后你可以测试数组的内容：

```
var
  c: TRootClass;

for c in RootClasses do
  if obj is c then
    // ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T01:49:04.027

有更多甚至更好的 OOP 之类的方法来处理这个问题。

*   类变量
*   自定义属性
*   [访客模式](http://www.uweraabe.de/Blog/2010/08/17/the-visitor-pattern-part-4/)

或作为一种非常简单的方法（但也有限）

```
TROOT = class
...
end;

// just an dummy class to identify
TROOTALLOWED = class(TROOT)
end;

TA = class( TROOTALLOWED )
end;

TB = class( TROOT )
end;

TC = class( TROOTALLOWED )
end; 
```

并在代码中

```
if obj is TROOTALLOWED then 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T09:21:43.887

declare a abstract function on superclass and override the function on inherited classes.

```
TROOT = class
  function HasFeature1:Boolean;virtual;abstract;
end;

// just an dummy class to identify
TA= class(TROOT)
  function HasFeature1:Boolean;override;

end;

 if obj.HasFeature1 then // obj:TRoot
 begin
   // do something
 end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:34:59.550

我看到很多人在这里邀请“全新的自行车”，制作临时阵列等。看起来像经典的“NIH 综合症”。

然而，人们可以考虑一下 VCL 是如何实现的，以及它的`RegisterClass`例程是如何工作的。有点像猫一样的好奇心应该是程序员的职业要求 ;-)

对上述例程进行一点调查会向您展示 Delphi 非常典型的东西 - 现成的 TList 容器。

[http://docwiki.embarcadero.com/Libraries/XE3/en/System.Contnrs.TClassList](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Contnrs.TClassList)

所以，那个代码

```
classarray = {TA, TB, TC, TD, TE, TF};
if (obj in classarray) then
begin
  // put my code here
end 
```

翻译成类似的东西

```
var classarray : TClassList; ci: TClass;
...
classarray := TClassList.Create;
for ci in (TA, TB, TC, TD, TE, TF) do classarray.Add(ci);
....

if classarray.IndexOf(obj.Class) >= 0  then
begin
  // put my code here
end
....

classarray.Free; 
```

# javascript - 如何使对象跟随路径的动画

> ID：13436548
> 
> 赞同：0
> 
> 时间：2012-11-18T01:15:04.270
> 
> 标签：javascript, raphael

我设置了一个[jsFiddle](http://jsfiddle.net/HighKickX/ap34g/)来说明我的问题。

我希望红色圆圈在动画期间保持在路径上。有没有“简单”的方法来做到这一点？

```
var r = Raphael(0, 0, "100%", "100%");

(function () {
    var el = r.path("M0 100L200 100").attr({fill: "none"}),
        elattrs = [{path: "M0 100L200 100"}, {path: "M0 100S100 150 200 100"}],
        now = 1;
    var set = r.set();
    set.push(
        el,
        r.circle(100, 100, 5).attr({fill: 'red'}),
        r.circle(50, 100, 5).attr({fill: 'red'}),
        r.circle(150, 100, 5).attr({fill: 'red'})
    );

    r.circle(40, 40, 20).attr({fill: 'blue'}).click(function () {
        el.stop().animate(elattrs[+(now = !now)], 1000, 'elastic');
    });
})(); 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:53:45.237

有一个很好的方法[Element.getPointAtLength](http://raphaeljs.com/reference.html#Element.getPointAtLength)可用于此目的。

我已经[分叉并更新了您的代码](http://jsfiddle.net/andersand/yxFdn/)，让圆形元素按照您的意愿跟随动画路径。Stackoverflow 强迫我在这里粘贴代码，所以这里是：

```
var r = Raphael(0, 0, "100%", "100%");

(function () {
    var paths = ["M0 100 L200 100",
                 "M0 100 S100 150 200 100"];
    var line = r.path(paths[0]).attr({fill: "none"}),
        elattrs = [{path: paths[0]}, {path: paths[1]}],
        now = 1;
    var guide = r.path(paths[1]).attr({stroke : "none"});
    var c1 = r.circle(50, 100, 5).attr({fill: 'red'}),
        c2 = r.circle(100, 100, 5).attr({fill: 'red'}),
        c3 = r.circle(150, 100, 5).attr({fill: 'red'});

    r.circle(40, 40, 20).attr({fill: 'blue'}).click(function () {
        now = now ? 0 : 1;
        line.stop().animate(elattrs[now], 1000, 'elastic');
        c1.stop().animate({cy : (now ? guide.getPointAtLength(50).y  : 100)}, 1000, 'elastic');
        c2.stop().animate({cy : (now ? guide.getPointAtLength(100).y : 100)}, 1000, 'elastic');
        c3.stop().animate({cy : (now ? guide.getPointAtLength(150).y : 100)}, 1000, 'elastic');
    });
})(); 
```

## ​</h2>

PS。[在此处](http://benknowscode.wordpress.com/2012/11/01/finding-points-along-an-svg-path-using-raphael/)查看更多示例。

# java - 我如何将Java中单词的第一个字母大写？

> ID：13436551
> 
> 赞同：-4
> 
> 时间：2012-11-18T01:15:46.943
> 
> 标签：java, string, java-7

我如何将句号 (.) 之后的下一个单词大写？例如。

> 太阳升起来了。植物开始生长。

我需要做什么才能将**植物**中的**p**大写？

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T01:44:49.440

根据您提出这个问题的方式，我假设您是一般编程的初学者，特别是 Java 编程的初学者。

所以第一个答案是Java中没有神奇的解决方案；即没有“查找并大写每个句子的第一个单词”。您（或某人）需要通过*设计和编写一些代码*来解决它。

解决问题的方法是将其分解为多个部分。例如，这是一种可能的故障...

1.  给定一个输入字符串，将其拆分为句子字符串。

2.  给定一个句子字符串，提取第一个单词。

3.  给定一个单词，将其大写。

4.  用新词替换句子的第一个词。

5.  将一系列句子转换回字符串。

然后对上面的代码进行编码，并单独和一起测试它们。现有的 Java 库 API 可以为您提供帮助。例如：

*   该[`String.split(...)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)方法基于分隔符（例如句号，或一个或多个空白字符）拆分字符串。
*   这些[`String.indexOf(...)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)方法查找字符串中特定子字符串的第一个位置。
*   这些[`String.substring(...)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)方法根据字符串中的字符偏移量提取子字符串。
*   该[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)课程可能很有用。
*   等等。

（阅读这些方法的 javadocs ...）

一旦代码工作，您可以对其进行改进以使代码更好（可读、可维护等）和/或使其运行得更快。

如果您对上述方法有疑问，请随时提出后续问题。但是您需要向我们展示您的代码……或伪代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:14:14.977

与其尝试自己寻找单词和句子的边界，不如使用[BreakIterator](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html)类，一个[句子实例](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html#getSentenceInstance%28%29)。

BreakIterator 也处理了检测指定语言环境的句子边界的所有困难，例如数字中的小数点不是句子边界。

这是一些将转换句子的示例代码：

```
String sentence = "The sun rose.  plants started to grow.";
StringBuilder buf = new StringBuilder(sentence);

BreakIterator bi = BreakIterator.getSentenceInstance(Locale.ENGLISH);
bi.setText(sentence);
int pos;
do
{
    pos = bi.next();
    if (pos != BreakIterator.DONE && pos < buf.length())
        buf.setCharAt(pos, Character.toUpperCase(buf.charAt(pos)));
}
while (pos != BreakIterator.DONE);

String correctedSentence = buf.toString();
System.out.println(correctedSentence); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T02:14:21.613

Here's a solution using regular expressions:

```
public String capitalizeSentences(String s) {
    Pattern p = Pattern.compile("\\.\\s+\\w");
    Matcher m = p.matcher(s);
    StringBuffer buf = new StringBuffer();
    while (m.find()) m.appendReplacement(buf, m.group().toUpperCase());
    m.appendTail(buf);
    return buf.toString();
} 
```

the pattern `/\.\s+\w/` matches a sequence of a dot, one or more spaces, and a word character. Regular expressions are very powerful for string processing and supported by almost all programming languages. Learn their syntax once, and you'll be more productive in all languages!

**Edit:** *see @prunge's solution for a much more elegant solution using Java's `BreakIterator` class which breaks text into sentences.*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T01:59:50.463

尝试这个。

```
String phrase = "The sun rose. plants started to grow";

// Split every sentence
String[] sentences = phrase.split(".");

String capitalized = "";

StringBuilder sb = new StringBuilder();

// Process every sentence
for (String str : sentences){
    // Trim the sentence. It might have a space in the beginning
    String result = str.trim();
    // get the first char
    String fc = "" + result.charAt(0);
    // Replace with capitalized one
    result = result.replace(fc, fc.toUpperCase());
    sb.append(result);
    sb.append(". "); // A full-stop and space
}

capitalized = sb.toString(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-18T01:29:13.390

你能解析整个句子吗，你的分隔符将是一个句号。那么从上面的例子中你基本上会有2个字符串；“太阳升起”和“植物开始生长”，然后您可以获取每个字符的第二个字符（将句号后的空格作为第一个字符）并将其大写。

```
public class mainClass {

public static void main(String[] args) {

    String phrase = " The sun rose. plants started to grow.";
    String delims = "\\."; //full stop as delimiter
    String[] tokens = phrase.split(delims);

    String capitalizedLetter;
    String word;
    String capitalizedWord;

    for(String sentence: tokens)
    {
    capitalizedLetter = sentence.substring(0, 2).toUpperCase();
    word = sentence.substring(2);
    capitalizedWord = capitalizedLetter + word;
    System.out.println(capitalizedWord + "."); //to include the missing full-stop
    } 

} 
```

}

希望这可以帮助！祝你好运！**

# python - 从 CSV 文件中获取项目并将元素放入列表中

> ID：13436552
> 
> 赞同：0
> 
> 时间：2012-11-18T01:15:54.420
> 
> 标签：python, list, csv

我在这里有一个 CSV 文件：[http](http://www.filedropper.com/excel) ://www.filedropper.com/excel ，看起来像这样[http://pastebin.com/ammzv4FK](http://pastebin.com/ammzv4FK)。

我想做的是：

取每一年及其对应的行，找出以月为单位的数字并将它们加起来并将它们分配给变量。

所以第一年，也就是 2000 年，这个列表看起来像这样：

```
year2000 = ['14744', '2947', '14905', '1748',  '2859',  '11778', '1453',  '5255', '14806', '1858', '10763', '6000'] 
```

然后，一旦我有了那个列表，我就可以将列表中的元素从字符串转换为整数，并使用 sum() 命令对它们求和。

我可以打印出这些行，但我无法排除年份编号，然后将其余部分存储到变量中，因为我的列表如下所示：

```
['2000, 14744, 2947, 14905, 1748,  2859,  11778, 1453,  5255, 14806, 1858, 10763, 6000'] 
```

作为一个大字符串，而不是单个元素，我的列表一次打印出所有年份，所以我似乎无法弄清楚如何将它们存储到变量中并分别总计。

这是我的代码：

```
with open("file.csv","r") as f:
    for i in range(1): 
        next(f)
    for x in f:
        x=x.split()
        print (x) 
```

但是在`print(x)`运行时它会全部打印出来，我怎样才能将每年的内容及其内容存储在一个变量中，同时不包括实际的年份编号？

我正在使用 Python 3，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:35:57.537

如果你得到这样的行，你可能没有使用 csv 阅读器。您应该使用该[`csv`](http://docs.python.org/3/library/csv.html)模块并将每一行存储在 a`dict`中，以年份为键。这仅在您的数据由整数组成时才有效。

```
data = {}

with open("data.csv") as f:
    reader = csv.reader(f, delimiter="\t")
    reader.next() # Skip header
    for row in reader:
        row = list(map(int, row))
        data[row[0]] = row[1:] 
```

要获得总和，请使用内置`sum`函数。

# c# - 如何通过列名获取 DataGridView 的单元格值？

> ID：13436553
> 
> 赞同：24
> 
> 时间：2012-11-18T01:15:57.400
> 
> 标签：c#, winforms, datagridviewcolumn

我有一个 WinForms 应用程序`DataGridView`，其中 DataSource 是一个 DataTable（从 SQL Server 填充），其中有一列`xxx`. 以下代码引发了异常

> ArgumentException 未处理。找不到名为 xxx 的列。

```
foreach (DataGridViewRow row in Rows)
{
    if (object.Equals(row.Cells["xxx"].Value, 123))
} 
```

是否可以按列名获取单元格值？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-18T01:54:06.563

`DataGridViewColumn`对象有一个`Name`（仅显示在表单设计器中）和一个`HeaderText`（显示在 GUI 中的列顶部）属性。您的示例中的索引器使用列的`Name`属性，所以既然您说这不起作用，我假设您真的在尝试使用列的标题。

没有任何内置功能可以满足您的需求，但添加起来很容易。我会使用扩展方法使其易于使用：

```
public static class DataGridHelper
{
    public static object GetCellValueFromColumnHeader(this DataGridViewCellCollection CellCollection, string HeaderText)
    {
        return CellCollection.Cast<DataGridViewCell>().First(c => c.OwningColumn.HeaderText == HeaderText).Value;            
    }
} 
```

然后在您的代码中：

```
foreach (DataGridViewRow row in Rows)
{
    if (object.Equals(row.Cells.GetCellValueFromColumnHeader("xxx"), 123))
    {
        // ...
    }
 } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-09T15:43:07.763

是的，只需删除引号并添加.Index，即

```
foreach (DataGridViewRow row in Rows)
{
    if (object.Equals(row.Cells[xxx.Index].Value, 123)) 
```

...也就是说，如果您的列真的被称为 xxx 而不是其他名称，如 Column1 等。您可以独立设置列名和列标题，以便检查设计器。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-03-09T04:25:50.103

通过这样做，您将能够访问当前选定行的“xxx”列名称处的单元格。

```
dataGridView1.SelectedRows[0].Cells["xxx"] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-24T06:36:01.123

我找到了这个：

1.  右键单击数据网格视图。
2.  从弹出菜单“编辑列”中选择。
3.  选择所需的列。设计/（名称） - 这就是您要寻找的。

样本：

```
if(dataGridViewProjectList.Rows[dataGridViewProjectList.CurrentCell.RowIndex].Cells["dateendDataGridViewTextBoxColumn"].Value.ToString().Length == 0) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-09T14:59:39.727

如果您在设计模式下网格列。然后列名是gridView~~~列控件的名称示例：

```
DataGridViewTextBoxColumn idDataGridViewTextBoxColumn = new DataGridViewTextBoxColumn();

idDataGridViewTextBoxColumn.Name = "idDataGridViewTextBoxColumn"; 
```

然后你可以访问这个，你想要的。

```
row.Cells["idDataGridViewTextBoxColumn"].Value 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-14T13:41:43.200

如果你看看：

```
row.Cells["xxx"].Value; 
```

这样 ：

```
row.Cells[yourdataGridView.Columns["xxx"].Index].Value; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-06T18:47:53.730

如果您的 datagridviews 列是动态的，带有专用的标题文本，那么您可以为 DGV 的特定列分配一个名称，如下所示：

```
dataGridView2.Columns[1].HeaderText = "Invoice No";
dataGridView2.Columns[1].Name = "invoice_no"; 
```

然后可以使用该名称作为索引，如下所示：

```
foreach (DataGridViewRow row in rows_with_checked_column)
{
    MessageBox.Show(row.Cells["invoice_no"].Value.ToString());
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-24T13:08:10.897

> **也可以在DataGridview单元格点击事件下试试**

```
 TxtTankPainting.Text = DataGridTransfData.Rows[e.RowIndex].Cells["TankPainting"].Value.ToString();
                TxtTankPosition.Text = DataGridTransfData.Rows[e.RowIndex].Cells["TankPosition"].Value.ToString();
                TxtCorePosition.Text = DataGridTransfData.Rows[e.RowIndex].Cells["CorePosition"].Value.ToString(); 
```

# javascript - Javascript 货币格式

> ID：13436557
> 
> 赞同：0
> 
> 时间：2012-11-18T01:16:45.367
> 
> 标签：javascript

大家好，我在这里需要一些帮助。我绝不是一个 javascript 程序员，但我拼凑了一些代码来做我需要做的事情，但是我在处理我所拥有的货币格式时遇到了问题。在下面的代码中，myForm.man_quan.value 不需要 $，但需要逗号分隔千位，如果价格没有美分，myForm.man_price.value 需要 $、逗号和 .00。

基本上我需要能够将 $ 和 , 和 .00 添加到我所拥有的内容中。

```
function runTotal(myForm) {
var form_field1 = Number(myForm.man_quan.value);
var form_field2 = Number(myForm.man_price.value);
myForm.man_total.value = form_field1.toFixed(0) * form_field2.toFixed(2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:32:42.587

尝试

```
function runTotal(myForm) {
var form_field1 = formatmoney(myForm.man_quan.value);
var form_field2 = formatmoney(myForm.man_price.value);
myForm.man_total.value = form_field1.toFixed(0) * form_field2.toFixed(2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:37:38.077

替换或删除不必要的符号，如 $ 和逗号

```
form_field1 = myForm.man_quan.value.replace(',', '.');
form_field2 = myForm.man_price.value.replace('$', '');
myForm.man_total.value = form_field1 * form_field2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T02:01:41.583

我认为您正在寻找 parseInt() [http://www.w3schools.com/jsref/jsref_parseint.asp](http://www.w3schools.com/jsref/jsref_parseint.asp) ，因为它是货币，您可能想要使用 parseFloat [http://www.w3schools.com/jsref/jsref_parsefloat.asp](http://www.w3schools.com/jsref/jsref_parsefloat.asp)

所以它应该是这样的：

```
function runTotal(myForm) {
    var form_field1 = parseFloat(myForm.man_quan.value);
    var form_field2 = parseFloat(myForm.man_price.value);
    myForm.man_total.value = form_field1.toFixed(0) * form_field2.toFixed(2);
} 
```

为数千个重新添加 , 可能会更棘手。但是您可以使用 toString() 将 var 改成字符串并像这样添加 $ 符号。

```
var output = "$"+myForm.man_total.value.toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-13T11:50:47.980

JavaScript 中非常简单的函数，称为**toLocaleString**

> 注意：数据类型应为整数

```
function numTocurrency(num)
{
   return parseInt(num).toLocaleString();
} 
```

# iphone - 如何应用多个应用更新？

> ID：13436558
> 
> 赞同：3
> 
> 时间：2012-11-18T01:17:01.603
> 
> 标签：iphone, ios, cocoa, core-data, migration

我已经发布了我的应用程序的 1.0 版。1.1 版可能会包含某种迁移代码。为了论证的缘故，假设它将更新核心数据属性 - 所有姓氏都将转换为大写。我将在版本 1.1 中首次启动时执行此代码。

我是否需要为所有后续版本保留此代码？如果用户跳过 1.0 并且仅在 1.2 发布时更新，是否会自动先应用 1.1？还是我需要不断检查是否永远更新所有版本中的姓氏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:20:00.597

你不发布更新，你发布新版本。如果有人从 1.0 更新到 1.2 并跳过 1.1，那么这正是正在发生的事情。1.1 永远不会被安装或执行。

**编辑：**

这是一个非常简单的更新管理方法的建议。可能不是最优雅的，但它确实有效。

```
NSString *lastVersion = [[NSUserDefaults standardUserDefaults]
                         stringForKey:@"LastVersion"];
NSString *currentVersion = [[NSBundle mainBundle]
            objectForInfoDictionaryKey:@"CFBundleShortVersionString"];

if ([self version:lastVersion isSmallerThanVersion:@"1.1"]) {
    // update from 1.0 to 1.1 here.
}
if ([self version:lastVersion isSmallerThanVersion:@"1.2"]) {
    // update from 1.1 to 1.2 here.
}
if ([self version:lastVersion isSmallerThanVersion:@"1.3"]) {
    // update from 1.2 to 1.3 here.
}

[[NSUserDefaults standardUserDefaults]
  setObject:currentVersion forKey:@"LastVersion"]; 
```

在此示例中，您有 4 个版本（1.0、1.1、1.2、1.3），而 1.3 是最新版本。

您在每次启动应用程序时运行它。由于更新应用程序也会终止它，您可以假设这将在可能的更新后运行。

基本上，您从用户默认值加载用户在此设备上使用的最后一个版本。如果应用程序第一次启动，则不会有已知的先前版本，不会执行任何更新例程，并且当前版本 (1.3) 会保存为最后使用的版本。

如果应用程序与以前的版本 (1.2) 一起使用，`lastVersion`则将是`1.2`并且仅执行最后一个`if`块。

如果应用程序在 1.1 版本中使用，但跳过了 1.2，现在更新到 1.3，`lastVersion`则将是 1.1，最后两个`if`块按顺序执行。因此，首先您将数据从 1.1 更新到 1.2，然后从 1.2 更新到 1.3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T01:24:19.080

您应该保留所有版本 > 1.0 的迁移代码

# eclipse - SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”

> ID：13436564
> 
> 赞同：5
> 
> 时间：2012-11-18T01:17:54.527
> 
> 标签：eclipse, logging, slf4j

运行 maven 项目时在 Eclipse Juno 4.2 上出现此错误。

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

我没有使用 slf4j 进行日志记录。实际上我不使用任何日志记录。

我究竟做错了什么。？

我的 pom.xml 中唯一的依赖项

```
<dependencies>
   <dependency>
     <groupId>junit</groupId>
     <artifactId>junit</artifactId>
     <version>4.10</version>
     <scope>test</scope>
    </dependency>   
</dependencies> 
```

* * *

编辑：

mvn 依赖：树

```
[INFO] \- junit:junit:jar:4.10:test
[INFO]    \- org.hamcrest:hamcrest-core:jar:1.1:test 
```

* * *

编辑2：

我创建了一个新的 Maven 项目--> maven-archetype-quickstart。之后我运行全新安装，Eclipse 控制台显示上述错误。我什至还没有编写任何代码部分。即使我删除了示例 src java 文件和示例测试 java 文件，它也会产生相同的错误。

* * *

编辑3：

我在 Eclipse 之外运行该项目并且没有错误指示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T10:04:40.947

Eclipse Juno 和 Indigo 在使用捆绑的 maven 版本 (m2e) 时，不会抑制消息 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。此行为从 m2e 版本 1.1.0.20120530-0009 及更高版本开始存在。

虽然，这被指示为错误，您的日志将正常保存。在修复此错误之前，突出显示的错误仍将存在。[在m2e 支持站点](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)中了解更多信息。

当前可用的解决方案是使用外部 maven 版本而不是 Eclipse 的捆绑版本。您可以在下面的问题中找到有关此解决方案和有关此错误的更多详细信息，我相信这与您面临的问题相同。

[SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:19:57.557

我认为实际上是 Maven 插件抱怨没有记录器。我相信这是无害的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T02:22:35.213

您可以添加此依赖项：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <version>1.7.7</version>
</dependency> 
```

Or you can also add **slf4j-nop** **slf4j-log4j12** which I haven't test.

# java - Android 9补丁模糊？

> ID：13436567
> 
> 赞同：1
> 
> 时间：2012-11-18T01:18:53.690
> 
> 标签：java, android, bitmap, uiimageview, nine-patch

我通过 androids 工具创建了一个 9 补丁 png，但它在我的 260 ppi 设备上显得模糊。

我在 Photoshop 中将图像的大小调整为 48 x 69，因为 9patch 抽屉建议图像尽可能小，因为它支持放大而不是缩小。

我将图像透明地保存为 png，它基本上是一个带有笔划的透明矩形。

装入 9 个补丁抽屉，勾勒出可拉伸区域（顶部和左侧）

保存图片...

将其加载到图像按钮中......但图像模糊？

我重新完成了整个过程，但没有在 Photoshop 中调整大小，而是在 android 中调整大小，现在它清晰锐利..？

为什么是这样？我以为 9patch 大幅扩大规模？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:36:44.707

好吧，让我们看一张图像，但问题很可能是 9 补丁旨在用于您想要复制像素的情况。因此，您需要一个或多或少统一的像素区域来进行拉伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:40:33.473

它很模糊，但是……请检查您是否以正确的格式从 Photoshop 中保存。3 个 RGB 通道 + Alpha。仔细检查你的轮廓颜色。它应该是黑色#000000，alpha 通道应该是#ff。

# php - 数据不会提交到 SQL 数据库

> ID：13436568
> 
> 赞同：0
> 
> 时间：2012-11-18T01:19:22.227
> 
> 标签：php, sql, pdo

我对 PHP 很陌生，正在尝试一些示例。出于某种原因，当我单击表单上的提交时，数据不会插入到我的 SQL 数据库中。有什么理由不这样做吗？

```
<!DOCTYPE HTML>

<?php 

$server = 'x';
$user = 'x';
$pass = 'x';
$db = 'x';

try {
    $con = new PDO("mysql:host=$server;dbname=$db",$user,$pass);
}
catch(PDOException $e) {
    echo $e->getMessage();
}

?>

<html>
<form name="Contact form" input type="text" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST"> 
First name: <input type="text" id="firstname" name="firstname"><br />
Last name: <input type="text" id="lastname" name="lastname"><br />
<input type="submit" id="submit" value="Submit this!" name="submit">
</form>
</html>

<?php 

if(isset($_POST['submit'])) {

$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$q = "INSERT INTO names(fname,lname) VALUES(:firstname,:lastname)";
$query = $con->prepare($q);
$result = $query->execute(array(
    ":firstname" => $firstname, 
    ":lastname" => $lastname
    ));
}

$con = null;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:26:16.770

您应该始终检查数据库连接或准备或执行语句的返回状态。这样，您可以获得更多信息，为什么它失败了。您正在从连接中捕获可能的异常，这很好。但是我注意到，如果确实发生了连接错误，您的代码只会打印错误消息，然后就好像连接成功一样继续。换句话说，即使您没有有效的连接，您也会尝试准备 INSERT。如果数据库连接失败，您应该停止执行并且不要对数据库连接做任何进一步的事情。

例如，代替`echo`，使用`die()`。这会在打印错误时停止脚本。随着您对 PHP 的熟练程度越来越高，您可以在错误周围添加 HTML，这样它看起来会更好，并且还为用户提供了转到另一个页面以重试的链接。

```
try {
    $con = new PDO("mysql:host=$server;dbname=$db",$user,$pass);
}
catch(PDOException $e) {
    die($e->getMessage());
} 
```

此外，如果您对表没有权限，或者如果表不存在，或者您的 SQL 语法错误，或者任何其他原因，SQL 语句也可能无法准备。如果您提供非法值，SQL 语句也可能在执行时失败，或者如果磁盘已满或其他原因，插入可能会失败。

一般来说，返回值是`false`如果有问题。这是检查它们的示例：

```
$q = "INSERT INTO names(fname,lname) VALUES(:firstname,:lastname)";
$query = $con->prepare($q);
if ($query === false) {
    die(print_r($query->errorInfo()), true));
}

$result = $query->execute(array(
    ":firstname" => $firstname, 
    ":lastname" => $lastname
    ));
}
if ($result === false) {
    die(print_r($query->errorInfo()), true));
} 
```

如果您遇到任何错误，请在 mysql 手册中查找它们：http: [//dev.mysql.com/doc/refman/5.5/en/error-handling.html](http://dev.mysql.com/doc/refman/5.5/en/error-handling.html)

# php - PHP获取javascript变量值

> ID：13436570
> 
> 赞同：-1
> 
> 时间：2012-11-18T01:19:35.770
> 
> 标签：php, javascript

起初我有这个脚本

```
<head>
    <script type="text/javascript">
        function test(work){
            document.getElementById("php_code").innerHTML="<?php 

            *$job = work;*

            $sql="INSERT INTO event ( id, name, job, status)
             VALUES
             ('','$_SESSION[username]','$job','not verified')";
            $result = mysql_query($sql); 
            ?>";
        }
    </script>
</head>

<body>
  <button onclick='test(job1)'>&nbsp&nbsp  Add  &nbsp&nbsp</button>
</body> 
```

我需要将工作值从 javascript 传递给 php 中的 $job。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:26:11.210

Javascript（在这种情况下）存在于您的浏览器中。PHP 位于服务器端。这两种语言不能直接交互。PHP 在浏览器甚至看到页面内容之前就被评估了。

您可以使用 AJAX 请求将信息发送到服务器，然后由服务器端的 PHP 处理。我强烈建议使用适当的 Javascript 库来处理 AJAX 请求，例如 jQuery 或众多替代方案之一。

另一种可能性是提交一个表单，将信息发送到服务器端，PHP 按照建议处理它。

# jquery - 使用 jQuery 水平滑动动画 div

> ID：13436571
> 
> 赞同：1
> 
> 时间：2012-11-18T01:19:40.137
> 
> 标签：jquery, menu, navigation, slide, sliding

我想像这个网站一样创建一个类似的滑动面板动画：http: [//www.grano.hu/](http://www.grano.hu/)

我在浏览器的左侧有一个固定的垂直侧边栏主导航 div，带有链接，单击时应该从后面滑出一个辅助导航栏，因此它出现在主导航栏旁边。这个辅助导航栏也会有链接，点击后会从后面向右滑出最后一个带有内容的第三个 div（就像上面的网站一样）。

当您单击辅助栏中的不同链接时，内容 div 应该向左滑动，因此它被隐藏，并且紧随其后的是不同的内容 div 向右滑动以替换它。

此外，如果单击来自固定主导航栏的链接，则当前内容 div 应向左滑动，随后辅助导航菜单也立即向左滑动，以便唯一显示的面板是固定主导航菜单。然后应立即向右滑出一个不同的相应辅助导航面板。

我是 jQuery 新手，不了解如何构建它，因此非常感谢您的帮助。

本质上，我希望我的导航面板可以像上面的示例网站一样滑入和滑出，但我希望这些功能能够自动运行，而不是必须单击每个面板右上角的关闭图标来折叠面板。

谢谢您的帮助！

# php - PHP 包和导入

> ID：13436572
> 
> 赞同：2
> 
> 时间：2012-11-18T01:19:50.060
> 
> 标签：php

我想要一个普通类型的类结构，比如

```
com.acme.module.Class.php 
```

那么如何导入这样的包

在其他语言中，我可以做类似的事情

```
import "com.acme.module.Class" 
```

或者

```
import "com.acme.module.*" 
```

这可能在 PHP

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T01:26:39.513

在 PHP 5.3 及更高版本中，我们有命名空间。

根据[PSR-0 标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)，包名采用目录名的形式。即如果我有一个类`Mauris\Acme\Controllers\Home`（包名是`Mauris\Acme\Controllers`，类名是`Home`），我的类文件将被命名`Home.php`并放在文件夹中`src/Mauris/Acme/Controllers`。

然后使用自动加载器（有一个[简化的 PSR-0 兼容自动加载器](https://gist.github.com/221634)），您可以直接将类“导入”到您的脚本中：

```
<?php
namespace Mauris\Acme\Actions;

require('autoloader.php');
$classLoader = new SplClassLoader();
$classLoader->register(); // register the autoloading callback

// the "import"
// the require() or include() statement is in the auto
use Mauris\Acme\Controllers\Home as HomeController;

$controller = new HomeController();
// if you don't use the "use" statement, you can also write:
// $controller = new \Mauris\Acme\Controllers\Home(); 
```

[在http://php.net/manual/en/language.namespaces.importing.php](http://php.net/manual/en/language.namespaces.importing.php)阅读更多内容

# regex - 替换 HTML 表单元素？

> ID：13436574
> 
> 赞同：0
> 
> 时间：2012-11-18T01:20:48.213
> 
> 标签：regex, vb.net, replace

我有这个 HTML 代码：

```
<HTML>
<HEAD>
<TITLE></TITLE>

</HEAD>

<BODY>

<form action="http://www.aweber.com/scripts/addlead.pl" method="post">
<input id="email" class="text" type="text" size="20" value="Enter your best email" name="email" onblur="if (this.value == '') {this.value = 'Enter your best email';}" onfocus="if (this.value == 'Enter your best email') {this.value = '';}" />
<input type="hidden" name="meta_web_form_id" value="">
<input type="hidden" name="meta_split_id" value="">
<input type="hidden" name="listname" value="">
<input type="hidden" name="redirect" value="">
<input type="hidden" name="meta_adtracking" value="">
<input type="hidden" name="meta_message" value="1">
<input type="hidden" name="meta_required" value="email">
<input type="hidden" name="meta_tooltip" value="">
<div style="padding-top:5px;">
<center><input class="button1" id="submit" type="image" src="red_getwaitinglist.png" name="submit" value="Get Instant Access"/></center>
</div>
</form>

</BODY>
</HTML> 
```

我正在使用这个函数来使用 RegEx 替换元素：

```
Function StripTags(ByVal html As String, ByVal replace As String) As String
    Return Regex.Replace(html, "<form.+?</form>", replace)
End Function 
```

但它似乎不起作用。它返回相同的代码（没有替换）。

我不太了解正则表达式，所以我假设正则表达式语法可能是错误的。有人可以帮我解决这个问题或告诉我哪里错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:37:16.680

附加 RegexOption `Singleline`。没有这个`.`将不匹配换行符。

```
Return Regex.Replace(html, "<form.+?</form>", replace, RegexOptions.Singleline) 
```

有关更多详细信息，请参阅[RegexOptions 枚举](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)。

# python - Python 中的类型错误：需要单个 Unicode 字符作为参数

> ID：13436580
> 
> 赞同：0
> 
> 时间：2012-11-18T01:22:28.287
> 
> 标签：python, unicode, numeric

当我尝试使用 将 unicode 变量转换为 float`unicodedata.numeric(variable_name)`时，我收到此错误“需要单个 Unicode 字符作为参数”。有谁知道如何解决这个问题？

谢谢！

这是我正在使用的代码片段：

```
f = urllib.urlopen("http://compling.org/cgi-bin/DAL_sentence_xml.cgi?sentence=good")
s = f.read()
f.close()
doc = libxml2dom.parseString(s)
measure = doc.getElementsByTagName("measure")
valence = unicodedata.numeric(measure[0].getAttribute("valence"))        
activation = unicodedata.numeric(measure[0].getAttribute("activation")) 
```

这是我在运行上面的代码时遇到的错误

```
Traceback (most recent call last):
File "sentiment.py", line 61, in <module>
valence = unicodedata.numeric(measure[0].getAttribute("valence"))        
TypeError: need a single Unicode character as parameter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:26:13.337

**总结：**改用`float()`。

该`numeric`函数采用**单个**字符。它不进行一般转换：

```
>>> import unicodedata
>>> unicodedata.numeric('½')
0.5
>>> unicodedata.numeric('12')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: need a single Unicode character as parameter 
```

如果要将数字转换为 a `float`，请使用该`float()`函数。

```
>>> float('12')
12.0 
```

但是，它不会做 Unicode 魔术：

```
>>> float('½')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: could not convert string to float: '½' 
```

# scope - Pascal：将模块完全导入当前范围

> ID：13436584
> 
> 赞同：0
> 
> 时间：2012-11-18T01:23:16.523
> 
> 标签：scope, pascal, freepascal, uses

更多的帕斯卡困境。

假设我有 2 个单位`MainUnit`， 和`ExampleClass`。

主要单位：

```
Unit MainUnit;

interface

Uses ExampleClass;

function ReturnFive: Integer;

implementation

function ReturnFive: Integer;
begin
  ReturnFive := 5;
end;

begin
end. 
```

示例类：

```
Unit ExampleClass;

{$mode objfpc}

interface

type 
  ClassThing = Class
    SampleValue: Integer;
  end;

implementation

begin
end. 
```

现在，我只想导入`MainUnit`，但仍然可以使用`ClassThing`. `MainUnit` `uses ExampleClass`，但`ClassThing`在导入时不可用`MainUnit`。

我真的不想和`use` `ExampleClass`一起`MainUnit`，我更愿意将其保留在一个`uses`声明中。

你怎么做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:20:18.723

放

```
type ClassThing = ExampleCLass.ClassThing; 
```

在主机界面。

该原则也适用于 const，但仅适用于“真实”的（不是更多初始化变量的类型）：

```
const myconst = unitname.myconst; 
```

几乎所有我经常使用的类型都是相似的别名，因此我可以轻松地在定义它们的位置移动，而无需更改所有业务代码单元中的 uses 子句

# asp.net-mvc - 没有“IEnumerable”类型的 ViewData 项 ' 仅当提交表单出错时

> ID：13436586
> 
> 赞同：0
> 
> 时间：2012-11-18T01:23:26.053
> 
> 标签：asp.net-mvc

我有一个下拉列表，从中填充

视图模型：

```
public class OrgPages
{
    public int ID { get; set; }
    public string URL { get; set; }
} 
```

帮手：

```
 public SelectList PageList()
    {
        var pagelist = new List<OrgPages>();

        foreach (var count in Enumerable.Range(1, 10))
        {
            var pages = new OrgPages();

            pages.ID = count;

            if(count == 1)
                pages.URL = "Done";
            else if (count == 2)
                pages.URL = "Address";
            else if (count == 3)
                pages.URL = "Import/Export";
            else if (count == 4)
                pages.URL = "Membership";
            else if (count == 5)
                pages.URL = "Business Type";
            else if (count == 6)
                pages.URL = "Industry Type";
            else if (count == 7)
                pages.URL = "Phone Number";
            else if (count == 8)
                pages.URL = "Email";
            else if (count == 9)
                pages.URL = "Website";
            else if (count == 10)
                pages.URL = "Note";
            pagelist.Add(pages);
        }
        return new SelectList(pagelist, "ID", "URL", 0);            
    } 
```

在我的控制器中，我启动了我的助手：

```
private DropDownPopulatorController ddp = new DropDownPopulatorController(); 
```

在我的创建操作中，而不是帖子中，我调用了 ViewBag：

```
ViewBag.OrgPages = ddp.PageList(); 
```

在我的 HTTP POST 创建操作中，我传递了 OrgPages 值：

```
[HttpPost]
public ActionResult Create(OrganizationEmail email, int OrgPages)
{
    try
    {
        // TODO: Add insert logic here
        using (var db = new VAGTCEntities())
        {
            db.OrganizationEmails.Add(email);
            db.SaveChanges();
        }
        if (OrgPages == 2)
            return RedirectToAction("Create", "OrgAddress");
        else if (OrgPages == 3)
            return RedirectToAction("Create", "OrgIE");
        else if (OrgPages == 4)
            return RedirectToAction("Create", "OrgMembership");
        else if (OrgPages == 5)
            return RedirectToAction("Create", "OrgBusinessType");
        else if (OrgPages == 6)
            return RedirectToAction("Create", "OrgIndustryType");
        else if (OrgPages == 7)
            return RedirectToAction("Create", "OrgPhone");
        else if (OrgPages == 8)
            return RedirectToAction("Create", "OrgEmail");
        else if (OrgPages == 9)
            return RedirectToAction("Create", "OrgWebsite");
        else if (OrgPages == 10)
            return RedirectToAction("Create", "OrgNote");
        else
            return RedirectToAction("Index");
    }
    catch (Exception)
    {
        ModelState.AddModelError("Error", "This item exists in the database already.");
    }
    return View(email);
} 
```

在我的创建视图页面中，我将其放入字段集中：

```
<div>
    @Html.Label("Add:")
</div>
<div>
    @Html.DropDownList("OrgPages")
</div> 
```

因此，现在，当有人提交表单时，他们可以选择他们想要快速访问的下一页。当提交表单没有错误（比如没有重复）时，它可以完美地工作。但是，当存在重复的主键或类似错误时，它会吐出错误`There is no ViewData item of type 'IEnumerable<SelectListItem>' that has the key 'OrgPages'.`

感谢您的任何帮助！

编辑 * 创建动作

```
public ActionResult Create()
{
    ViewBag.OrgPages = ddp.PageList();
    return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:55:35.517

在对其进行了几次调试并完成之后 - 我注意到它在返回创建时被捕获： `return View(email);`

那时它不再有 OrgPages 的 ViewData。所以，我所做的只是 `ViewBag.OrgPages = ddp.PageList();`在 catch 块显示错误后再次调用它。那解决了它！

# android - 激活的 APK 在 Google Play 上出现错误：此应用程序可用于 0 多个设备

> ID：13436587
> 
> 赞同：0
> 
> 时间：2012-11-18T01:23:55.480
> 
> 标签：android, android-manifest, google-play

我昨天上传了我的应用程序，并在 Google Play 市场中填充。但是，我无法下载它。我的设备说不兼容。

1.  我检查了可用的设备，结果为零。我重新发布了应用程序，删除了除 INTERNET 之外的所有权限。而且它仍然说该应用程序与任何设备都不兼容。

2.  我将构建路径添加到项目中的所有 jar 文件。

3.  我设置了屏幕

> ```
> supports-screens
>     android:smallScreens="false"
>     android:normalScreens="true"
>     android:largeScreens="true"    
>     android:anyDensity="true" 
> ```

1.  我每次都激活了 apk，并且我继续收到“此应用程序可用于 0 多个设备”

2.  这应该会在 2 小时内[生效 https://play.google.com/store/apps/details?id=com.sugardefynery.animeconvention.scheduler1](https://play.google.com/store/apps/details?id=com.sugardefynery.animeconvention.scheduler1)

您对如何解决此错误有任何建议吗？

这是清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sugardefynery.animeconvention.scheduler1"
    android:versionCode="8"
    android:versionName="1.8" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
     <!-- 
GCM connects to Google Services. 
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.VIBRATE" />

    <permission
        android:name="com.sugardefynery.animeconvention.scheduler1.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.sugardefynery.animeconvention.scheduler1.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />
-->

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.TabBarExample"
            android:label="@string/app_name"
            android:theme="@style/Theme.Tab1" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.ScheduleView" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.PullToRefreshListView" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.Tutorial" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.About" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.ShowSettingsActivity" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.DemoActivity" >
        </activity>
        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.GCMAdapterUpdate"
            android:theme="@style/Theme.Transparent" >
        </activity>
        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.AlertSettings"
            android:label="@string/app_name" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.EventsView" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.ConventionView" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.EventList.DataView" >
        </activity>
        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.EventList.EventDetails"
            android:label="@string/app_name" >
        </activity>

        <service
            android:name="com.sugardefynery.animeconvention.scheduler1.EventList.UpdateLocalDatabaseService"
            class="com.sugardefynery.animeconvention.scheduler1.EventList.UpdateLocalDatabaseService" >
            <intent-filter>
                <action
                    android:name="com.sugardefynery.animeconvention.scheduler1.EventList.UpdateLocalDatabaseService"
                    android:value="com.sugardefynery.animeconvention.scheduler1.EventList.UpdateLocalDatabaseService" />
            </intent-filter>
        </service>
        <service
            android:name="com.sugardefynery.animeconvention.scheduler1.EventList.UpdateAdapterService"
            class="com.sugardefynery.animeconvention.scheduler1.EventList.UpdateAdapterService" >
            <intent-filter>
                <action
                    android:name="com.sugardefynery.animeconvention.scheduler1.EventList.UpdateAdapterService"
                    android:value="com.sugardefynery.animeconvention.scheduler1.EventList.UpdateAdapterService" />
            </intent-filter>
        </service>

        <activity android:name="com.sugardefynery.animeconvention.scheduler1.EventList.OneShotAlarmEvents" >
        </activity>
        <activity android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.AlertView" >
        </activity>
        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.AlertServiceDialogActivity"
            android:theme="@style/Theme.Transparent" >
        </activity>
        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.AlertsDetails"
            android:label="@string/app_name" >
        </activity>

        <receiver android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.OneShotAlarm" >
        </receiver>

        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.AlertDialogActivity"
            android:theme="@style/Theme.Transparent" >
        </activity>
        <activity android:name=".Notifications.NotesView" >
        </activity>
        <!--
          BroadcastReceiver that will receive intents from GCM
          services and handle them to the custom IntentService.

          The com.google.android.c2dm.permission.SEND permission is necessary
          so only GCM services can send data messages for the app.

        -->

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>

                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.sugardefynery.animeconvention.scheduler1" />
            </intent-filter>
        </receiver>

        <service
            android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.AlarmsService"
            class="com.sugardefynery.animeconvention.scheduler1.Alerts.AlarmsService" >
            <intent-filter>
                <action
                    android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.AlarmsService"
                    android:value="com.sugardefynery.animeconvention.scheduler1.Alerts.AlarmsService" />
            </intent-filter>
        </service>

        <receiver android:name="com.sugardefynery.animeconvention.scheduler1.Alerts.AlarmsBroadcastReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

        <activity
            android:name="com.sugardefynery.animeconvention.scheduler1.AdapterUpdateReceiverActivity"
            android:theme="@style/Theme.Transparent" >
        </activity>

        <!--
        <receiver android:name="com.sugardefynery.animeconvention.scheduler1.AdapterUpdateReceiver" >
            <intent-filter>
                <action android:name="com.sugardefynery.animeconvention.scheduler1.AdapterUpdateReceiver.action" >
                </action>
            </intent-filter>
        </receiver>

          Application-specific subclass of GCMBaseIntentService that will
          handle received messages.

          By default, it must be named .GCMIntentService, unless the
          application uses a custom BroadcastReceiver that redefines its name.

        -->
        <service android:name=".GCMIntentService" />
    </application>

    <supports-screens
    android:smallScreens="false"
   android:normalScreens="true"
     android:largeScreens="true"    

android:anyDensity="true"/> 

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:03:39.663

由于最近的更新，我需要将我的所有类导入一个新项目并导出。解决了它。

# javascript - 使用 Razor 和 JS 单击行时获取列数据

> ID：13436592
> 
> 赞同：1
> 
> 时间：2012-11-18T01:24:24.857
> 
> 标签：javascript, jquery, asp.net-mvc, razor

我有在 MVC 中使用 Razor 动态构建的表。

我希望能够单击一行并获取让我们说第一列 ID 的值。

现在它正在获取所有列，但我不太了解 Javascript 或它如何与文本一起存储。

无论如何，我正在寻找的是在我单击的行上获得某个列。

剃刀 MVC

```
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>ID</th> 
    <th>Owner</th> 
</tr> 
</thead> 
<tbody> 
@for(int i=0; i<Model.changes.Count(); i++)
{
<tr> 
    <td>@Model.changes[i].ID</td> 
    <td>@Model.changes[i].Owner</td> 
</tr> 
}
</tbody> 
</table> 
```

Javascript

```
<script>

    var table = $("#myTable tr");

    table.click(function () {
        alert($(this).text());
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:26:19.183

您可以使用[**nth-child**](http://api.jquery.com/nth-child-selector/)，

**[现场演示](http://jsfiddle.net/rajaadil/2hyjF/2/)**

```
var table = $("#myTable tr");

table.click(function () {
    alert($(':nth-child(1)',  this).text());
});​ 
```

# wordpress - wordpress 获取没有域的当前永久链接或 url

> ID：13436605
> 
> 赞同：0
> 
> 时间：2012-11-18T01:26:20.467
> 
> 标签：wordpress, multilingual, permalinks

我不确定我的标题是否正确，但这是我的问题，我必须创建 2 个完全相同的博客，唯一的区别是语言。因此，但是我需要的是在顶部单击一种语言时，它会将用户带到同一页面，但使用的是他/她单击的语言。

我目前正在使用永久链接，并且尝试了以下方法：

```
<?php 
   function my_permalink() {
    echo substr(get_permalink(), strlen(get_option('home')));
   }

   my_permalink();
?> 
```

但由于某种原因，我的主页上指向的是帖子而不是主页。我相信这可以在帖子中使用，但我也需要在家中使用。这是两个博客的链接，非常感谢任何帮助..

英语： http: [//www.inblu.pe/prblog/](http://www.inblu.pe/prblog/) 西班牙语： http: [//www.inblu.pe/prbloges/](http://www.inblu.pe/prbloges/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:54:33.777

使用标准 PHP 方法可能更简单：

```
$_SERVER["REQUEST_URI"] 
```

当然，它仅适用于当前帖子。

您也可以使用它：

```
<?php 
   function my_permalink() {
    echo substr(get_permalink(), strlen(home_url('/')));
   }

   my_permalink();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T20:57:05.710

the_permalink 怎么样？我现在正在与之抗争。

〜贾斯汀

# eclipse - 我应该如何将许可证信息添加到 maven 项目及其源文件

> ID：13436609
> 
> 赞同：2
> 
> 时间：2012-11-18T01:27:14.143
> 
> 标签：eclipse, maven, licensing

我有几个（Java）项目在 Maven 控制下，在 Eclipse 中开发，在 Mercurial/bitbucket 下的 repo，我在 Apache2 下获得许可（尽管这个问题适用于任何许可）。获得许可的最佳方式是什么？

我在项目的顶层目录中包含了 (Apache) LICENCE.txt 的逐字副本。但是，任何源文件中都没有许可证，因此如果它们在其他项目中重复使用（我希望它们可以），它们可能会与许可证信息分开。[源文件可以是配置/数据以及代码，不是 Java 特定的]。如果许可证有任何更改，则必须编辑所有这些文件。可能的方法是：

*   用一个简短的句子来指回 LICENSE.txt
*   如果有 Maven 许可工具，请使用它？
*   如果有 Eclipse 许可工具，请使用它？
*   使用 Bitbucket 许可证工具（如果有的话）？

[我在 Windows 上，所以我不想要 sed/awk/grep 方法]

更新 - 已接受@Nicmancol 作为给出的第一个答案对我有用

更新2-嗯。它为发行版中的各种文件添加了许可证。不是个好主意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:31:19.933

有用于在源文件头中添加/维护版权声明的 Eclipse 插件；例如，请参阅这个 SO 问题： [如何在 Eclipse 插件项目的源文件中管理许可证横幅](https://stackoverflow.com/questions/204676/how-to-manage-license-banners-in-source-files-of-eclipse-plug-in-projects)。（答案比问题更笼统......）

使用 Maven 项目，您可以/还应该将许可证详细信息添加到 POM 文件中。

* * *

从纯粹的法律角度来看，文件是否与包含版权声明的“捆绑包”分开可能并不重要。无论是否有版权声明，版权均适用。

> 我同意无论如何都适用版权，但作者身份和许可不适用。因此，在软件可能被重用的领域，我们需要向重用者提供该信息。

无论每个文件中是否说明， 作者身份和许可都*适用。*

*   作者身份只是一个事实，“William Stallings 编写了 Emacs”即使有人去掉了源头文件，它仍然是正确的。但是知道某个软件的作者是谁与其他人如何使用它没有关系，所以它可能没有太大的相关性。

*   许可源自版权，默认许可在相关版权法中有所规定。也就是说，默认情况下您无权制作副本，或拥有非法制作的副本。

    如果文件与许可证信息分离，则由文件的用户来处理问题；即他需要找出许可证是什么。因为，默认是他没有执照。

基本上，如果版权和/或许可不明确，复制者有义务找出版权/许可状态是什么……而不是版权所有者/许可人。这是应该的。版权所有者/许可人不可能阻止信息被分离，并且因其他人为实现该分离而进行的某些（非法）行为而惩罚版权所有者/许可人显然是不公平的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:47:58.770

您可以使用[Maven 许可证插件](http://code.google.com/p/maven-license-plugin/)或[许可证 Maven 插件](http://mojo.codehaus.org/license-maven-plugin/)

# javascript - 外部java脚本文件不工作

> ID：13436612
> 
> 赞同：0
> 
> 时间：2012-11-18T01:27:44.690
> 
> 标签：javascript, html

我正在为学校做一个项目，到目前为止，已经复制了很多这个脚本并将其粘贴到这里以使事情“工作”。除了将一行代码与另一行代码进行比较并寻找差异之外，我真的不知道我在做什么。

我有 javascript 向我返回一些值，当它采用简单的网页格式时它工作正常，但是当我将它插入更复杂的页面时它停止工作。

在页面的最后，它应该给出一行数值并每 1000 毫秒更新一次，但发生的情况是它只是坐在那里显示 Temp()...

我检查了 data.xml，当我按下 PIC 原型板上的按钮和东西时，这些值正在更新。

我对简单网页和复杂页面都使用相同的 ajax.js 文件。我认为这很简单，例如错过`</p>`或`</div>`标签，但我的眼睛似乎看不到它。

有人可以看一下代码，看看我错过了什么吗？谢谢！

**ajax.js**

```
 var xhr;

        function getXMLHttpRequest(){

        try { return new ActiveXObject("Msxm12.XMLHTTP"); } catch(e){}; 
        try { return new ActiveXObject("Microsoft.XMLHTTP"); } catch(e){};  
        try { return new XMLHttpRequest(); } catch(e){};    

        return null;
        }

        function parseHttpResponse(){

            if(xhr.readyState == 4){

                if(xhr.status == 200){

                document.getElementById("T0").innerHTML=xhr.responseText;
                }
                else
                {

                }
            }
        }

        function getTemp(){
        xhr = getXMLHttpRequest();

        xhr.open("GET", "data.xml", true);
        xhr.onreadystatechange = parseHttpResponse;
        xhr.send(null);
        }

        setInterval("getTemp()", 1000); 
```

**简单的网页 - 这很好用**

```
 <html>
        <head><title>Ajax test - index1</title>

        <script src="ajax.js" type="text/javascript">
        </script>

        </head>

        <body onload="getTemp();">
            <h2>Headline</h2>
            <p>Paragraph</p>
            <div id='T0'>Loading Temp0...</div> 
        </body>
        </html> 
```

**“复杂”的网页——当它被使用时，我不高兴**

```
 <!DOCTYPE html>
            <html>
            <head>
            <title>Elex267-Webpage</title>

            <script src="ajax.js" type="test/javascript">
            </script>

            <link rel="stylesheet" href="myStyle.css" type="text/css" >

            </head>

            <body onload="getTemp();">
            <!-- Banner at Top of Page ***********************************-->
            <div style="background-color:blue; color:white;font-size:30px;">

            <img src="Pics/camosun-white.png" alt="CamosunPNG" width="200" height="70" align="left">
            <div align="center"style="margin-left:50%">Elex 267 Web Demo
            <br>
            Microchip TCP/IP Stack v3.02</div>
            </div>
            <!--*********************************************************-->
            <!--NavBar Code *********************************************-->
            <div class="nav">
            <ul>
            <li><a href="index.htm">Home</a></li>
            <li><a href="features.htm">Features</a></li>
            <li><a href="about.htm">About</a></li>
            </ul>
            </div>
            <!--***************************************************-->
            <p>
            Welcome to the Elex 267 Demo Web Server for [Name Here].<br>
            </p>
            <p>
            This web page is being run on the NM101 NorthMicro Pic Prototype Board with the LCD/Keypad and Network modules.
            <br>
            This web page refreshes the data every 3 seconds.
            </p>
            <center>
            <img border="5" src="http://www.northmicro.com/GFX/nm110nm120onproto.jpg" alt="NM110 Proto Pic" width="200" height="200" >
            </center>
            <br>
            <div id="feedback" style="width:500px;float:left;">
            &nbsp;&nbsp;&nbsp;&nbsp;Pot RA0:   1022 <br>
            &nbsp;&nbsp;&nbsp;&nbsp;Pot RA1:   223 
            <br><br>
            &nbsp;&nbsp;&nbsp;&nbsp;Switch RA2: <img src="Pics/SwitchUp.gif" alt="SwitchOff" width="20" height="20" align="top">
            <br><br>
            &nbsp;&nbsp;&nbsp;&nbsp;LEDs:&nbsp;&nbsp;RB6  <img src="Pics/LEDOff.gif" alt="LED_Off" width="20" height="20" align="top"> &nbsp;&nbsp;RB5   <img src="Pics/LEDOn.gif" alt="LED_On" width="20" height="20" align="top">  
            </div>

            <div id="input" style="width=50%;margin-left:50%;">
            <b>Commands</b><br>
            <button align="left" type="button" onclick="alert ('RB5 Activated')">Toggle RB5</button>
            <br>
            <button align="left" type="button" onclick="alert ('RB6 Activated')">Toggle RB6</button>
            </div>
            <br><br>
                <div id='T0'>Loading Temp0...</div> 
            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:32:24.580

```
setInterval("getTemp()", 1000); 
```

在这条线上没有意义，它可能是你的问题的原因。此调用导致`getTemp`每秒调用一次，从返回的此调用之后开始。在`getTemp`函数中，您正在重用变量，每次都`xhr`创建一个新实例。`XMLHttpRequest`仅此一项不一定是问题（除了`"Msxm12.XMLHTTP"`which 似乎是错误的；应该是`"Msxml2.XMLHTTP"`）。

但是在每次调用中，`getTemp`您都会发出一个新请求，*无论*前一个请求是否收到响应（第三个参数`true`表示*异步*请求-响应处理）。考虑一下：`readystatechange`监听器可能没有被调用（或者它的`readyState == 4`部分没有被执行），因为客户端正在等待服务器响应。现在您的一秒计时器启动，`getTemp` *再次*调用，从而*覆盖*`xhr`将在侦听器代码中使用的值。有一个闭包，`xhr`是一个绑定变量，因此已经存在竞争条件。

此外，HTTP 客户端不应该（根据 RFC 2616）和精心设计的 Web 浏览器不会保持超过指定数量的持久 HTTP 连接（默认值：2 到 8）对同一服务器或代理打开。所以文档越复杂，需要并行加载的资源越多，这种方法就越有可能失败。

您应该删除该调用并在您更新属性的行下方`setInterval(…)`添加一个调用（当请求成功时，），这样才会发出新的请求。在发出新请求之前，您至少应该等待变为(FINISHED)。由于您想在下一次通话前等待一秒钟，请使用.`getTemp()``innerHTML``status == 200``readyState``4``window.setTimeout("getTemp()", 1000)`

如果您漂亮地打印该代码，它应该有助于您的理解，即使用合理数量的空白缩进函数体和块内容，并添加一些空白，例如`)`and之间`{`。有像 Eclipse JavaScript Development Tools 这样的编辑器可以自动化大部分代码格式化。

之后你应该学会使用调试器（在 Firefox 上使用 Firebug，其他浏览器的新版本有一个内置的）并在你的代码中设置断点，特别是在`getTemp`和`parseHttpResponse`. 单步执行代码（警告：*跳过* `send()`，然后继续，以便执行在 中的断点处停止`parseHttpResponse`）以查看发生了什么。祝你好运。

# sql - 显示姓名和最大年龄

> ID：13436613
> 
> 赞同：2
> 
> 时间：2012-11-18T01:28:06.343
> 
> 标签：sql, oracle, top-n

> **可能重复：**
> [如何在 Oracle 中显示最高值的记录？](https://stackoverflow.com/questions/12767996/how-to-display-the-record-with-the-highest-value-in-oracle)

我应该显示数据库中最年长的人的姓名和年龄。我使用的代码显示了几个人的姓名和计算出的年龄，但它不会显示一个最年长的人。我怎样才能让它工作？这是我的代码

```
select dr_drvname as "Name", trunc(max((sysdate-dr_brthdate)/365)) as "Highest AGE"
from driver,dual
group by dr_drvname; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:00:54.523

Oracle 中的另一种方法是：

```
SELECT
    dr_drvname AS "Name",
    trunc(months_between(sysdate, dr_birthdate) / 12) AS "Highest Age"
FROM
(
SELECT
    dr_drvname,
    dr_birthdate
FROM
    driver
ORDER BY
    dr_birthdate
)
WHERE
    ROWNUM = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:32:58.237

尝试这样的事情：

```
SELECT top 1
  Firstname, LastName, Max([BirthDate]) as Oldest    
  FROM [Employees]
  group by BirthDate, FirstName, LastName 
```

注意：如果多人有相同的出生日期，有什么要求？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T01:45:07.910

您可以使用分析函数

```
select dr_drvname as "Name", 
       trunc( months_between( sysdate, dr_birthdate )/ 12 ) "Highest Age"
  from (select dr_drvname ,
               dr_birthdate,
               rank() over (order by dr_birthdate) rnk
          from driver)
 where rnk = 1; 
```

# generator - Pygame 蛇食物生成器

> ID：13436616
> 
> 赞同：2
> 
> 时间：2012-11-18T01:28:41.320
> 
> 标签：generator, pygame

我目前正在创建一个 Snake 游戏，我想创建一个食物生成器，根据我的游戏内计时器每 10 秒生成一个苹果。计时器从 60 倒计时到 0（游戏结束时），我希望每 10 秒生成一个新苹果，即使它没有被吃掉也要保留旧苹果。我不知道如何解决这个问题，可以使用一些帮助。这是我的完整程序。

编辑：这是一个初学者计算机科学学校项目，所以越基础越好。

```
import random
import pygame
pygame.init()

#---------------------------------------#
                                        #
# window properties                     # 
width = 640         # 
height = 480                                         
game_window=pygame.display.set_mode((width,height))
black = (  0,  0,  0)                   #                   
#---------------------------------------#

# snake's properties

outline=0                               
body_size = 9
head_size = 10
apple_size = 8                          
speed_x = 8                           
speed_y = 8                         
dir_x = 0                               
dir_y = -speed_y                               
segx = [int(width/2.)]*3                 
segy = [height, height + speed_y, height + 2*speed_y]              
segments = len(segx)
apple_counter = 0
grid_step = 8

regular_font = pygame.font.SysFont("Andina",18)
blue   = [11,  90,  220]
clock = pygame.time.Clock()
time = 60
fps = 25            
time = time + 1.0/fps
text = regular_font.render("Time from start: "+str(int(time)), 1, blue)
text2 = regular_font.render("Score: "+str(int(apple_counter)), 1, blue)

apple_x = random.randrange(0, 640, grid_step)
apple_y = random.randrange(0, 480, grid_step)  
apple_colour = (255,0,0)

def redraw_game_window():               
    game_window.fill(black)             
    for i in range(segments):           
        segment_colour = (random.randint(1,50),random.randint(100,150),random.randint(1,50))
        head_colour = (random.randint(180,220),random.randint(180,220),random.randint(1,15))
        apple_colour = (255,0,0)
        pygame.draw.circle(game_window, segment_colour, (segx[i], segy[i]), body_size, outline)
        pygame.draw.circle(game_window, head_colour, (segx[0], segy[0]), head_size, outline)
    game_window.blit(text, (530, 20))
    game_window.blit(text2, (30, 20)) 
    pygame.draw.circle(game_window, apple_colour, (apple_x, apple_y), apple_size, outline)
    pygame.display.update()

exit_flag = False
print "Use the arrows and the space bar."
print "Hit ESC to end the program."

########################################################## TIMER/CONTROLS

while exit_flag == False:
    redraw_game_window()

    clock.tick(fps)                     
    time = time - 1.00/fps
    text = regular_font.render("Time: "+str(int(time)), 1, blue)
    text2 = regular_font.render("Score: "+str(int(apple_counter)), 1, blue)

    if time < 0.1:
        print "Game Over"
        exit_flag = True

    pygame.event.get()                      
    keys = pygame.key.get_pressed()

    if time == 

    if keys[pygame.K_ESCAPE]:               
        exit_flag = True

    if keys[pygame.K_LEFT] and dir_x != speed_x:
        dir_x = -speed_x
        dir_y = 0                                             
    if keys[pygame.K_RIGHT] and dir_x != -speed_x:                
        dir_x = speed_x                      
        dir_y = 0                           
    if keys[pygame.K_UP] and dir_y != speed_x:                   
        dir_x = 0                           
        dir_y = -speed_y                    
    if keys[pygame.K_DOWN] and dir_y != -speed_x:                 
        dir_x = 0                           
        dir_y = speed_y

############################################################ SNAKE MOVEMENT

    for i in range(segments-1,0,-1):          
        segx[i]=segx[i-1]                   
        segy[i]=segy[i-1]

    segx[0] = segx[0] + dir_x              
    segy[0] = segy[0] + dir_y

############################################################ COLLISION

    for i in range(segments-1, 3, -1):
        if segments > 3:
            if segx[0] == segx[i] and segy[0] == segy[i]:
                print "You have collided into yourself, Game Over."
                exit_flag = True

############################################################# BORDERS

    if segx[0] > 640 or segx[0] < 0:
        print "Game Over, you left the borders."
        break

    if segy[0] > 480 or segy[0] < 0:
        print "Game Over, you left the borders."
        break

############################################################# APPLE DETECT

    for i in range (0 , 13):
        if segx[0] == apple_x + i  and segy[0] == apple_y + i:
            segments = segments + 1            
            segx.append(segx[-1])               
            segy.append(segy[-1])
            apple_counter = apple_counter + 1

        if segx[0] == apple_x - i  and segy[0] == apple_y - i:
            segments = segments + 1            
            segx.append(segx[-1])               
            segy.append(segy[-1]) 
            apple_counter = apple_counter + 1

#############################################################

pygame.quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:51:28.113

你要么

A) 使用[pygame.time.set_timer](http://www.pygame.org/docs/ref/time.html#pygame.time.set_timer)每 10 秒调用一次函数以生成食物，每 60 秒调用一次函数以结束回合。

或者

B) 比较 get_ticks()

def new_round(): last_apple = pygame.time.get_ticks() + 10*1000

> 虽然是真的：现在 = pygame.time.get_ticks()
> 
> ```
> if now - last_apple >= 1000:
>     spawn_apple()
>     last_apple = now
> 
> if now - round_start >= 60*1000:
>     round_end() 
> ```

# node.js - 安装 pg 节点模块时出错

> ID：13436618
> 
> 赞同：4
> 
> 时间：2012-11-18T01:28:57.153
> 
> 标签：node.js, postgresql, npm, gyp, node-gyp

我想安装 pg 节点模块，这是我遇到的问题：

```
Exception: Call to 'pg_config --libdir' returned exit status 1\. while trying to load binding.gyp
gyp ERR! configure error
gyp ERR! stack Error: `gyp` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onCpExit (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure
.js:350:16)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:678:10)
gyp ERR! System Windows_NT 6.1.7600
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild
"
gyp ERR! cwd C:\wamp\www\googleMap\node_modules\pg
gyp ERR! node -v v0.8.14
gyp ERR! node-gyp -v v0.7.1
gyp ERR! not ok
pg@0.8.7 node_modules\pg
└── generic-pool@1.0.12 
```

谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:28:42.913

`pg_config`是 PostgreSQL 包的可执行文件。在安装 node pg 模块之前，您需要确保首先安装它。

原因是 pg 模块实际上使用 pgsql 工具和可能的 C/C++ 代码编译驱动程序，这就是节点模块使用`node-gyp`.

阅读本文了解更多详情：[http ://www.postgresql.org/docs/8.2/static/install-win32.html](http://www.postgresql.org/docs/8.2/static/install-win32.html)

你会看到`pg_config.exe`在名单上。另外，当您尝试再次安装 pg 节点模块时，请确保它`pg_config.exe`在您的文件中。`PATH`您可以通过`pg_config.exe`在您运行的当前工作目录中运行来检查`npm install <module>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-15T01:16:50.060

在 Windows 8 64 位；如下配置环境变量：

右键单击`My Computer`，然后单击`Properties`，单击*高级*选项卡，单击*环境变量*。

编辑`%PATH%`变量；并添加`c:\Program Files\PostgreSQL\9.3\bin`

# php - 在php中为任何日期添加设定时间

> ID：13436621
> 
> 赞同：0
> 
> 时间：2012-11-18T01:29:37.240
> 
> 标签：php, mysql, date, time

基本上我需要做的是将时间 00:01 添加到用户选择的任何日期以查找日期/时间之间的结果，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:31:03.367

您可以在这样的日期获得 00:01 的时间戳：

```
$timestamp = strtotime($date_from_user . ' 00:01'); 
```

然后，您可以根据需要使用 格式化该时间戳`date()`，尽管您可能不需要这样做。

```
SELECT * FROM table WHERE datecol BETWEEN '$date1' AND '$date2' 
```

# c - C 语言中的时间限制 - 测验程序

> ID：13436622
> 
> 赞同：4
> 
> 时间：2012-11-18T01:29:50.407
> 
> 标签：c, time, limit

我有一个测验程序的代码如下，我需要添加一个时间限制。现在，代码根据使用的时间执行测验分数。但我希望它在程序启动后的 5 分钟内退出。

使用的标头

```
#include<time.h> 
```

初始化值如下

```
time_t initialtime,finaltime; 
```

我在测验开始使用此代码之前开始计时

```
initialtime=time(NULL); 
```

当程序结束时，我通过这段代码得到时间

```
finaltime=time(NULL); 
```

现在，如何在最后时间达到 10 分钟之前结束程序？我应该在 Main 函数中使用什么代码？

**PS：如果需要，我可以发布完整的代码。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T01:38:58.883

大致如下：

```
int main()
{
    //....
    time_t initial_time = time(NULL);
    float time_limit = 600.0f;

    //...
    while ( (time(NULL) - initial_time) < time_limit )
    {
        // ... do stuff
    }

    // clean up etc.
} 
```

这将循环直到特定的持续时间过去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:40:21.077

有很多方法可以做到这一点：

*   编写一个循环来检查每次迭代的 10 分钟是否到了
*   生成一个[休眠](http://linux.die.net/man/3/sleep)10 分钟的线程，然后结束程序
*   实施10 分钟后发出信号的[警报](http://linux.die.net/man/2/alarm)

也可以看看：

*   [设置读取标准输入的超时时间](https://stackoverflow.com/questions/3711830/set-a-timeout-for-reading-stdin)
*   [想在 C 中为一个函数实现超时](https://stackoverflow.com/questions/9074380/want-to-implement-timeout-for-one-function-in-c)
*   [如何为C中的函数设置超时？](https://stackoverflow.com/questions/7738546/how-to-set-a-timeout-for-a-function-in-c)
*   [一个简单的超时函数](https://stackoverflow.com/questions/13239129/a-simple-timeout-function)

Stack Overflow 的优点是你可以[搜索 "C Timeout"](https://stackoverflow.com/search?q=c+timeout&submit=search)，而且[Google 上的 "function timeout c"](https://www.google.com/search?q=function+timeout+c)也能得到很好的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T01:42:24.190

您有两个选择- 1\. 在过程/程序期间，继续检查所用时间是否达到 10 分钟。这很容易。2\. 将程序作为一个简单的计时器启动，10 分钟后自动退出。现在在这个程序中，在计时器启动之前，将您需要的操作作为一个单独的线程启动。这更准确。

# python-2.7 - 如何从自然语言处理中的句子中提取中心词？有没有办法在 python 中使用 NLTK 工具包来获取它？

> ID：13436627
> 
> 赞同：1
> 
> 时间：2012-11-18T01:30:33.743
> 
> 标签：python-2.7

例如：“Workers dumped sacks into a bin”是一个句子，它的中心词是“dumped”

# ruby-on-rails - 如果记录存在，则阻止用户执行新操作

> ID：13436632
> 
> 赞同：0
> 
> 时间：2012-11-18T01:31:33.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

您好，我的 rails 应用程序存在以下问题：

我有两个模型，用户和信息，用户，使用这个 url 创建他的信息：

> 用户/id/信息/新

并使用此网址编辑他的信息：

> 用户/id/信息/id/编辑

如果出现以下问题，用户创建他的信息后，如果他转到 url：

> 用户/id/信息/新

记录从数据库中删除，用户可以创建新记录；这是完全错误的，因为用户只允许创建一个用户信息，然后他只能编辑他的记录。

如果用户在信息表上有记录，我如何拒绝用户转到新的操作 url。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:04:31.670

在操作 new 中添加一个 before 过滤器，然后在该过滤器中检查用户信息是否存在

```
UserInformationsController
  before_filter :require_no_user_information, :only => :new

  def require_no_user_information
    if UserInformation.exists?(:user_id => params[:id])
      flash[:notice] = 'The user information already exists'
      redirect_to edit_user_information_path params[:id]
      false
    end
  end
end 
```

如果用户信息存在，过滤器将重定向并返回 false 并返回错误消息，代码是示例，我不知道您的型号

# fonts - 如何更改 Nicedit 编辑器中显示的文本的 Nicedit 默认字体大小？

> ID：13436635
> 
> 赞同：2
> 
> 时间：2012-11-18T01:32:09.607
> 
> 标签：fonts, nicedit

如何更改 Nicedit 编辑器的编辑框中显示的文本的 Nicedit 默认字体大小？

请参阅此处的图片链接：http: [//4.bp.blogspot.com/-BDOmlcOIcBA/UKbZ-TFLfnI/AAAAAAAACKU/8LRYrZZRio8/s640/toggle0.jpg](http://4.bp.blogspot.com/-BDOmlcOIcBA/UKbZ-TFLfnI/AAAAAAAACKU/8LRYrZZRio8/s640/toggle0.jpg) 编辑框是黄色矩形。

我确信编辑字体属性的代码是这样的：

```
area1 = new nicEditor({fullPanel : true}).panelInstance('peterText',{hasPanel : true}); 
```

或喜欢：

```
area1 = new nicEditor({/*fullPanel : true*/buttonList : ['save','center','right','forecolor','bgcolor','image','fontSize','fontFamily','fontFormat','subscript','superscript','ol','ul','indent','link','unlink','xhtml']
  }).panelInstance('peterText',{hasPanel : true}); 
```

或类似的东西：

```
 bkLib.onDomLoaded(function() {
        new nicEditor().panelInstance('area1');
        new nicEditor({fullPanel : true}).panelInstance('area2');
        new nicEditor({iconsPath : '../nicEditorIcons.gif'}).panelInstance('area3');
        new nicEditor({buttonList : ['fontSize','bold','italic','underline','strikeThrough','subscript','superscript','html','image']}).panelInstance('area4');
        new nicEditor({maxHeight : 100}).panelInstance('area5');
  }); 
```

任何想法，任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T20:22:37.153

nicEdit uses html tags within the textarea's body to manage fonts/bold/underline etc. The trick is to supply the tags in the body of the textarea before you create the panel instance.

```
var body = document.getElementById('editor_body');
body.innerHTML = "<font face='verdana' color='green' size='6'><div align='left'>Hello!</div></font>";
new nicEditor({iconsPath:'edit/nicEditorIcons.gif'}).panelInstance('editor_body'); 
```

# linux - Set-user-id 位在 Linux 上如何工作？

> ID：13436648
> 
> 赞同：0
> 
> 时间：2012-11-18T01:34:55.557
> 
> 标签：linux, file-permissions, setuid

我有以下“根文件”，其内容如下：

```
$ cat root-file 
#!/bin/bash   
echo $EUID
id 
```

以下是此文件的权限：

```
$ ls -l root-file 
-rwsr-sr-x 1 root root 15 Nov 18 02:20 root-file 
```

由于为此文件设置了 set-user-id 位，我希望在执行此文件时，即使非 root 用户执行有效 uid 也会显示为 0（因为 set-user-id 位会导致使用文件所有者的有效用户 ID（在本例中为 root）执行的进程。但是，相反，我在从非根 shell 执行“根文件”时得到以下输出。

```
$ ./root-file 
1000
uid=1000(chanakya) gid=1000(chanakya) groups=1000(chanakya),4(adm),20(dialout),24(cdrom),46(plugdev),105(lpadmin),119(admin),122(sambashare) 
```

此文件/或脚本未使用有效用户 ID 0 执行。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:52:07.747

你不能在 shell 脚本上使用 setuid ......

如果你绝对需要使用 setuid checkout [http://isptools.sourceforge.net/suid-wrap.html](http://isptools.sourceforge.net/suid-wrap.html)

通常，也可以使用一些自定义 sudo 配置来建立这样的事情......

# html - 使用 Buzz 停止将流式音频下载到 HTML5 元素

> ID：13436650
> 
> 赞同：0
> 
> 时间：2012-11-18T01:35:31.877
> 
> 标签：html, html5-audio, buzz.js

我正在使用[Buzz](http://buzz.jaysalvat.com/)为互联网广播提取 HTML5 音频。这很好用，但我需要一种在音频停止时停止下载流的方法。

例如，当我开始播放时，我可以看到流的网络请求开始了。当我停止音频时，流的数据仍在传输，就好像它是静态资源一样。我需要防止这种情况发生，或者一旦音频停止就让它停止。

我相信 jPlayer 通过破坏`<audio>`元素来做到这一点，但我在 Buzz 中没有看到任何方法来做到这一点。可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:25:51.520

在使用 Buzz 资源一段时间后，我目前没有看到任何方法可以做到这一点。幸运的是，原始音频元素被暴露出来，允许这样的事情：

```
buzz.sound.prototype.destroy = function () {
    this.set('src', '');
} 
```

这可能会混淆 Buzz 的一些内部状态信息。我现在正在调查。

# c++ - 结构体、数组、函数

> ID：13436657
> 
> 赞同：0
> 
> 时间：2012-11-18T01:36:34.493
> 
> 标签：c++, arrays, function, structure

新手在这里，我的结构化数组参数被发送到函数中遇到了一些困难。看来我的基本流血编译器不喜欢我设置的功能。我对整个程序进行了一些改进，但已经为此苦苦挣扎了好几个小时。我尝试查看该站点上的类似程序，但没有足够相似的程序让我指出错误。我的库存功能的工作是在可乐 = 0 等饮料时发送一条消息说已售罄。任何帮助将不胜感激。我已将我的函数定义从 int main 之后的底部移到顶部以清除不同的编译器错误。我对这个程序的任何部分的所有反馈持开放态度，因为它是一项课堂作业，并且可以使用指针在我的下一次测试中取得成功。谢谢

```
 #include<iostream>
#include<iomanip>
using namespace std;

struct Soda
{
   string name;
   float  price;
    int    inv;
};

void functInventory(Soda[],int);       //prototype

void functInventory(Soda drink[],int num)       //function definition
{
      if ( drink[num].inv = 0)
      cout << "SOLD OUT" <<endl;
}

int main()
{
    const int option = 5;
    string cola, rbeer, lemlime, grape, cream;

    int InsAmount, choice;
    int income = 0;

    Soda array[option] =    {
                            {cola,   .75, 20},
                            {rbeer,  .75, 20},
                            {lemlime,.75, 20},
                            {grape, .80,   20},
                            {cream, .80,   20}
                          }; 

     cout << "Please choose 1-6 " << endl;
     cout    << " 1\. Cola = $.75 " << endl;
     cout  << " 2\. Root Beer = $.75 "  << endl;
     cout << " 3\. Lemon Lime = $.75 " << endl;
     cout  << " 4\. Grape Soda = $.80 " << endl;
     cout << " 5\. Cream Soda = $.80 " << endl;
     cout << " 6\. QUIT & EXIT "       << endl;

  switch(choice)
     {
       case 1:   array[0].inv - 1 = array[0].inv;
                  income = income + .75;
                  functInventory(array, choice);
                  break;

       case 2:    array[1].inv - 1 = array[1].inv;
                  income = income + .75;
                  functInventory(array, choice);
                  break;

       case 3:    array[2].inv - 1 = array[2].inv;
                  income = income + .75;
                  functInventory(array, choice);
                  break;

       case 4:    array[3].inv - 1 = array[3].inv;
                  income = income + .80;
                  functInventory(array, choice);
                  break;

       case 5:    array[4].inv - 1 = array[4].inv;
                  functInventory(array, choice)
                  income = income + .80;
                  break;

       case 6:  cout << "The total amount earned is: $" << income <<endl;
                  break;

        default:
                cout <<  "Please enter a capital letter from 1-6 " << endl;
   }

     cout << "Please Tell Me How Much Money You Are Inserting:  " <<endl;
     cin  >> InsAmount;

     change = InsAmount - .75;        //I will work on creating a more accurate function 4 change
     cout << "your change is " << change; << "  "<< endl;
    return 0;

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:40:37.047

你说血战？我认为这是基于 gcc：打开警告，例如，`-W -Wall`可能还有其他！这会告诉你，这可能不是你想要做的：

```
if ( drink[num].inv = 0) 
```

这是作业，不是比较！你可能是说

```
if (drink[num].inv == 0) 
```

...或者，为了防止意外`=`弄乱你的逻辑

```
if (0 == drink[num].inv) 
```

...因为如果您尝试使用赋值，这会导致编译器错误。我没有检查其他错误，但这似乎是一个明显的错误。由于这是我最近的一个习惯，我还要指出你[不应该使用`std::endl`](http://kuhllib.com/2012/01/14/stop-excessive-use-of-stdendl/).

再往下看一点代码：这甚至不应该编译：

```
array[0].inv - 1 = array[0].inv; 
```

表达式的结果`array[0].inv - 1`是一个临时的内置类型，我认为你不能分配给这个类型（当我尝试编译代码时它肯定会失败；当我尝试编译它时，它很好地发出了一个关于我上面提到的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:49:12.877

您从编译器获得的错误可能如下所示：

> test2.cpp:46:46：错误：需要左值作为赋值的左操作数

在您的 switch 语句中，您的赋值语句（每种情况下的第一行）在等号的左侧而不是右侧有一个值。这有点像在说：

```
int my_age;
26 = my_age; 
```

这是行不通的。变量是你的左值。

# java - 启动第二个 JavaFX 应用程序

> ID：13436659
> 
> 赞同：4
> 
> 时间：2012-11-18T01:36:46.417
> 
> 标签：java, javafx-2, javafx

我正在尝试从 JavaFx 应用程序中启动 JavaFx 应用程序，但看起来 Application.launch() 只能调用一次。这是否意味着我必须启动一个单独的 JVM... 如 exec("java... 或有其他方法？

更多背景信息。我希望我的 JavaFx 应用程序能够构建和运行 JavaFx 应用程序。现在它在内存中编译类，加载类......真的很不​​幸不得不求助于将所有内容写入文件系统，这样我就可以在文件系统上获得一个 jar，所以我可以使用 exec 来启动它。

作为第二个问题......有没有办法打开另一个JavaFx窗口并获取舞台并将其传递给我新编译和加载的应用程序子类？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-18T10:54:21.593

如果您想在同一个 JVM 中执行另一个 JavaFX 应用程序，您只需创建它的实例，手动创建`Stage`并调用`Application#start()`

```
public void runAnotherApp(Class<? extends Application> anotherAppClass) throws Exception {
    Application app2 = anotherAppClass.newInstance(); 
    Stage anotherStage = new Stage();
    app2.start(anotherStage);
} 
```

注意：如果您在另一个应用程序中使用标准初始化的特殊功能，它将不起作用，例如，`Application.init()`或`Application.getParameters()`

# scheme - 读一个“。” 在方案 R5RS

> ID：13436660
> 
> 赞同：2
> 
> 时间：2012-11-18T01:36:49.703
> 
> 标签：scheme

我需要能够读取项目方案中的用户输入。例如，我需要能够读取字符串`4 5 * .`。我正在使用该`(read)`函数实现它，但它在读取`.`. 我会使用不同的符号，但它是由项目描述指定的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:27:48.367

您不能用于`read`输入任意文本。该`read`过程仅用于输入“S-expressions”，一种可用于表示 Scheme 源代码表达式超集的数据格式。

您无法`.`通过该`read`过程读取 a 的原因是句点标记在 Scheme 源代码中具有特殊作用：它用于点对表示法。 `(C1 . C2)`是把`C1`和`C2`写成 S 表达式的方式。*请注意，单对* `(C1 . C2)`和*列表* `(C1 C2)`（由两对组成）之间存在关键区别；然而，源文本之间的唯一区别是单个句点的存在/不存在。

点对符号[在 R5RS 的第 6.3.2 节中进行了](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-9.html#%_idx_378)描述。

因此，正如 Dan D. 在对您的问题的评论中所建议的那样，您应该考虑使用该`read-char`过程来使用用户输入文本。它在[R5RS 的第 6.6.2 节中进行了](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-9.html#%_idx_614)描述。这似乎违反直觉，因为`read-char`只消耗一个字符而`read`消耗许多字符（并构建一个潜在的大型结构化数据树），但现实是您可以在 之上构建自己的解析器`read-char`，通过在循环，正如 Dan D. 所建议的那样。

事实上，一些方案系统`read`通过使其成为调用`read-char`. 参见例如[Larceny 的阅读器源代码](https://trac.ccs.neu.edu/trac/larceny/browser/trunk/larceny_src/src/Lib/Common/reader.sch#L33)，哪里`read`会调用`get-datum`，哪些调用`get-datum-with-source-locations`，哪些调用`read-char`在多个地方。

或者，您可能有其他方式来读取用户的输入。这个`read-line`过程很常见（而且它也很容易写在上面`read-char`）。或者您可能会查看 Parser-Generator（例如为 Larceny 的阅读器生成源代码的那个，上面链接。

# ruby-on-rails - Phusion 乘客：`检测到意外的文件结尾。`

> ID：13436662
> 
> 赞同：1
> 
> 时间：2012-11-18T01:37:09.783
> 
> 标签：ruby-on-rails, passenger

我正在尝试让我的 Rails 3.2.8 应用程序在 justhost.com 的网络托管平台上运行，但遇到了一些问题。当我 ssh 进入服务器并运行时，该应用程序在 WEBrick 上运行良好`rails server`，但乘客（justhost 提供的服务器平台）存在一些问题：

![我真的开始讨厌的错误消息。](../Images/ef2766ada1061507bac860daa68830be.png)

我不明白这个错误是什么意思，也不知道如何解决它。有人可以指出我正确的方向吗？

如果这些信息是相关的，这里是我的`.htaccess`文件的内容：

```
PassengerEnabled On
PassengerAppRoot /home3/webgemla/rails_apps/WebGemLabs/

SetEnv GEM_HOME /home3/webgemla/.rvm/gems/ruby-1.9.3-p194 
```

*注意：我的应用程序的实时版本位于[webgemlabs.com](http://www.webgemlabs.com)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:58:26.957

当我访问您的链接时，我收到此错误消息：

```
Error message:
no such file to load -- bundler 
```

你可能只需要`gem install bundler`在你的服务器上。

# javascript - 在 CoffeScript 中为 Class 属性设置默认值

> ID：13436663
> 
> 赞同：0
> 
> 时间：2012-11-18T01:37:15.317
> 
> 标签：javascript, coffeescript

我尝试为给定的类属性设置默认值。

```
class MyClass
    name: (name = 'value') -> 
```

上面的代码不返回`value`。它返回整个函数。

```
a = new MyClass
a.name
> function (name) {
if (name == null) name = 'value';
} 
```

如果我为它设置一个值，那么它可以工作：

```
a = new MyClass
a.name = 'something'
a.name
> 'something' 
```

我想知道在 CoffeScript 中为 Class 属性设置默认值的正确方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:52:26.440

这：

```
class MyClass
    name: (name = 'value') -> 
```

简单地定义`name`为一个方法，它接受一个参数，也称为`name`，并且该参数的默认值为`'value'`. 因此，如果我们添加一个主体并执行该方法：

```
class MyClass
    name: (name = 'value') ->
        console.log(name)
new MyClass().name()
new MyClass().name('pancakes') 
```

您将在控制台中看到`'value'`和。[这是一个演示](http://coffeescript.org/#try%3aclass%20MyClass%0A%20%20%20%20name%3A%20%28name%20%3D%20%27value%27%29%20-%3E%0A%20%20%20%20%20%20%20%20console.log%28name%29%0Anew%20MyClass%28%29.name%28%29%0Anew%20MyClass%28%29.name%28%27pancakes%27%29)，打开你的控制台看看会发生什么。`'pancakes'`

如果您希望 的实例`MyClass`具有默认值为的 name 属性，`'value'`那么您想说：

```
class MyClass
    constructor: (@name = 'value')
console.log(new MyClass().name)
console.log(new MyClass('pancakes').name) 
```

这也会[给你`'value'`和`'pancakes'`](http://coffeescript.org/#try%3aclass%20MyClass%0A%20%20%20%20constructor%3a%20%28@name%20=%20%27value%27%29%20-%3E%0Aconsole.log%28new%20MyClass%28%29.name%29%0Aconsole.log%28new%20MyClass%28%27pancakes%27%29.name%29)控制台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:49:26.803

为什么不是构造函数中的默认值？

```
class MyClass
  constructor: (@name = 'default') -> 
```

如果你想在实际的 MyClass 函数上设置一个属性，你可以这样做：

```
class MyClass
  @Name = 'value' 
```

但我怀疑这不是你的意思。

# php - Cookie 未设置

> ID：13436665
> 
> 赞同：2
> 
> 时间：2012-11-18T01:37:18.300
> 
> 标签：php, cookies

我有一个不会在远程服务器上设置的 cookie，可以在本地找到。没有错误消息，var_dump 让我为 Null，echo 为空白。

```
<php
 setcookie('ymp','14', time()+3600);
 session_start();
?> 
```

我可以很好地设置一个javascript cookie。开始标签是页面的第 1 行。

有任何想法吗

谢谢加里

编辑时

我在下面发表了一些评论，这是一个 3 文件过程。

第一页是设置cookie，如上。

第二页我有调试

```
<php var_dump($_COOKIE['ymp']); echo'<br />'.$_COOKIE['ymp'];?> 
```

第 3 页，这一切都在我本地工作

```
 <?php
 if($_COOKIE['ymp']!=='14')
 {die('Sorry, you have not had your delightful little pastry yet.... try again.');} 
```

?>

我设置了一个 js cookie，并更改了代码以反映不同的 cookie 名称，它工作正常。

我还将时间重置为 +86400，因为与服务器有两个小时的时差，尽管我认为这并不是真正需要的。

感谢所有的帮助

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T14:21:53.323

这可能是因为您没有为 cookie 指定路径和/或域。试试这个：

```
<?php
    setcookie('ymp','14', time()+3600, '/', 'yourdomain.com')
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:24:28.437

这个问题从未解决，我最终将一个新文件写入同一主机上的不同域，为 cookie 赋予了不同的名称和值（是否有可能是 3 字符名称 cookie 的 2 位值太小？？）它按预期工作。

谢谢大家的帮助……太忙了，没时间对 CSI 调查的方式和原因进行调查。

加里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T01:40:23.807

在发出新页面请求之前，您无法读取 cookie 的值。这是因为 cookie 数据的值是随页面请求一起发送的。因此，在设置它并发出新的页面请求之前*，*它不能访问它的值。

此外，`session_start()`对 cookie 没有影响。他们是两个不同的东西。（会话通常使用 cookie 来存储会话 ID，但这无关紧要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T01:47:04.690

这很奇怪——我认为这可能与 PHP 配置有关。

看看`setcookie`函数的返回值是什么——[可能是`FALSE`](http://php.net/manual/en/function.setcookie.php#refsect1-function.setcookie-returnvalues)在函数调用之前已经发送了输出。您确实在脚本的开头提到了它，但是可能还有其他实体输出数据（可能是服务器上的预执行脚本？）

您的浏览器也可能设置为不接受来自特定域的 cookie - 检查您的配置。

请提供任何其他相关代码并说明您如何检查是否设置了 cookie。

# django - 是否可以使用一个 Django 实例运行多个不相关的站点？

> ID：13436668
> 
> 赞同：0
> 
> 时间：2012-11-18T01:37:55.303
> 
> 标签：django

每个站点都应该有自己的域、数据库、settings.py、urls.py、views.py 等等。据我了解，这是不可能的，但我不太确定。

编辑：jdi 建议对不同的应用程序使用不同的设置文件。请你解释一下，怎么做？另一个问题是我使用 Webfaction 并在选择现有的 Django webapp 后收到以下错误：

> 具有此站点、路径和帐户的站点应用程序已存在

所以我需要知道，是 Django 还是 Webfaction 的限制。Django 的版本是 1.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:40:17.313

*此项目结构适用于 Django 1.4，但概念保持不变*

您可以完成所有这些操作，而无需使用单个流程。为您的项目创建一个 virtualenv，它可以存储您需要的每个库的共享集。然后为每个站点创建不同的设置文件，每个站点加载不同的 django 应用程序，都位于项目中：

```
djangoProject
|- bin/
|- include/
|- lib/
|- manage.py
|- djangoProject/
    |- settings_site1.py
    |- settings_site2.py
    |- settings_site3.py
    |- wsgi_site1.py
    |- wsgi_site2.py
    |- wsgi_site3.py
|- site1_app/
    |- models.py
    |- views.py
    |- urls.py
|- site2_app/
    |- models.py
    |- views.py
    |- urls.py
|- site3_app/
    |- models.py
    |- views.py
    |- urls.py 
```

**settings_site1.py**（示例）

```
...
# or you could make multiple urls_siteX.py files in the root
ROOT_URLCONF = 'djangoProject.site1_app.urls'
...
INSTALLED_APPS = (
    ...
    'djangoProject.site1_app'
) 
```

**wsgi_site1.py**（示例）

```
...
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "djangoProject.settings_site")
... 
```

但老实说……如果你只用多个 django 项目创建一个 virtualenv，所有这一切都更容易完成。然后，您不必过多地隔离您的应用程序：

```
projectEnv
|- bin/
|- include/
|- lib/
|- project1/
    |- manage.py
    |- project1/
|- project2/
    |- manage.py
    |- project2/
|- project3/
    |- manage.py
    |- project3/ 
```

Either way you do it, I don't think it is necessary to think about trying to get them all to run under the same single process. Django isn't designed to do that. It is designed to let you run multiple processes on the same project, for different sites, via the sites framework.

# linux - 带 pthread 的互斥锁

> ID：13436673
> 
> 赞同：1
> 
> 时间：2012-11-18T01:38:44.583
> 
> 标签：linux, multithreading, synchronization, pthreads

我需要调用一个返回唯一ID的函数，

```
int getid()
{
static id=0;
id++;
return id;

} 
```

多个线程需要调用这个函数，我的问题是我不确定我需要在哪里锁定互斥体，

在调用如下函数之前和之后是否需要锁定

```
 pthread_mutex_lock( &id );
  int id = getid()
  pthread_mutex_unlock( &id ); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T01:47:18.680

只要在访问共享状态之前，它被锁定在哪里并不重要。如果互斥锁在函数内部，则不太容易出错。像这样最小的东西会起作用：

```
int getid()
{
static int id=0;

pthread_mutex_lock( &mutex );
int newId = ++id;
pthread_mutex_unlock( &mutex );

return newId; 
} 
```

静态变量的初始化存在一些线程安全的问题，您可能需要研究这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T01:56:44.233

对于单个整数，您不需要完整的互斥锁，[*原子增量*](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html)就足够了：

```
int getid() {
    static int id = 0;
    return __sync_fetch_and_add( &id, 1 );
} 
```

# ruby - 如何对“回复”的实例进行计数

> ID：13436674
> 
> 赞同：0
> 
> 时间：2012-11-18T01:38:43.417
> 
> 标签：ruby, ruby-on-rails-3

我目前正在学习 ruby​​，并且我有一个用户输入的应用程序：

```
:name
:menu
:rsvp 
```

它们都被输入为`reply`

我希望能够计算当前添加了多少人并将其显示在索引页面上。到目前为止，我将如何计算有多少项目添加到数据库中？

**回复.rb**

```
class Reply < ActiveRecord::Base
  attr_accessible :menu, :name, :rsvp, :user_id
  belongs_to :user
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me,
                  :first_name, :last_name, :profile_name
  # attr_accessible :title, :body

  has_many :replies

  def full_name
    first_name + " " + last_name
  end
end 
```

**回复控制器**

```
class RepliesController < ApplicationController
  # GET /replies
  # GET /replies.json
  def index
    @replies = Reply.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @replies }
    end
  end

  # GET /replies/1
  # GET /replies/1.json
  def show
    @reply = Reply.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @reply }
    end
  end

  # GET /replies/new
  # GET /replies/new.json
  def new
    @reply = Reply.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @reply }
    end
  end

  # GET /replies/1/edit
  def edit
    @reply = Reply.find(params[:id])
  end

  # POST /replies
  # POST /replies.json
  def create
    @reply = Reply.new(params[:reply])

    respond_to do |format|
      if @reply.save
        format.html { redirect_to @reply, notice: 'Reply was successfully created.' }
        format.json { render json: @reply, status: :created, location: @reply }
      else
        format.html { render action: "new" }
        format.json { render json: @reply.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /replies/1
  # PUT /replies/1.json
  def update
    @reply = Reply.find(params[:id])

    respond_to do |format|
      if @reply.update_attributes(params[:reply])
        format.html { redirect_to @reply, notice: 'Reply was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @reply.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /replies/1
  # DELETE /replies/1.json
  def destroy
    @reply = Reply.find(params[:id])
    @reply.destroy

    respond_to do |format|
      format.html { redirect_to replies_url }
      format.json { head :no_content }
    end
  end
end 
```

我希望这些信息对你有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:46:05.917

要获取用户数：

```
User.count 
```

在你的控制器中，最好把它放在一个实例变量中：

```
@user_count = User.count 
```

要在典型的 ERR 视图上显示它：

```
<%= @user_count %> 
```

所有典型的 ActiveRecord 模型、控制器和视图都是这样工作的。

# delphi - 使 TpageControl 中的组件仅对一页可用

> ID：13436675
> 
> 赞同：1
> 
> 时间：2012-11-18T01:38:48.217
> 
> 标签：delphi, user-interface, delphi-xe2

我正在使用delphi（使用delphi XE 2）开始我的第一个应用程序，并且我正在尝试通过创建GUI来拼凑我的方式。

我正在尝试使用 TpageControl 来保持分离和简单，但是当我尝试将组件放在选项卡上时，它会显示在所有组件上。根据我所阅读的内容，放置在每个给定选项卡上的组件只应该显示在那个选项卡中。

基本上我希望每个选项卡都作为一个单独的表单运行。有没有人有任何关于使用 Tpagecontrol 的提示和/或教程来完成我所描述的操作？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T02:08:27.507

只要看看结构，你就会明白为什么会发生这种情况。

![PageControl 截图](../Images/78c0600f11b4669dbf283d407b808cb7.png)

Button1 和 Button2 似乎与 TabSheet1 相关，但查看结构您会看到，Button1 的父级是 Form1，而 Button2 的父级是 TabSheet1。

如果切换到 TabSheet2，Button1 仍然可见，但 Button2 不可见。

但是您可以将结构面板中的控件从实际父级拖放到新父级。

# php - 间歇性写入数据库仅部分有效

> ID：13436679
> 
> 赞同：1
> 
> 时间：2012-11-18T01:39:57.923
> 
> 标签：php, sql, database, insert, vbulletin

我无法重新创建问题，它似乎只发生在多台机器上的一个人身上..

我在想，也许与 SQL 有关。我不知道他的 ISP 是否与此有关？就像我说的，到目前为止，这个问题只发生在一个人身上。多台机器，多个用户名来测试我的权限代码，这很奇怪。

我已经测试了另外 100 次，一切都完美无缺。这是我的代码的一部分。

```
if($_REQUEST['do'] == 'save_new_vehicle') {
$userid = $vbulletin->userinfo['userid'];
$username = $vbulletin->userinfo['username'];
$vbulletin->input->clean_array_gpc('p', array(
'year' => TYPE_INT,
'make_model' => TYPE_NOHTML,
'susp_type' => TYPE_NOHTML,
'interior' => TYPE_NOHTML,
'exterior' => TYPE_NOHTML,
'audiovideo' => TYPE_NOHTML,
'wheelstires' => TYPE_NOHTML,
'suspension' => TYPE_NOHTML,
'drivetrain' => TYPE_NOHTML,
'nickname' => TYPE_NOHTML,
));  

$year = $vbulletin->GPC['year'];
$make_model = $vbulletin->GPC['make_model'];
$susp_type = $vbulletin->GPC['susp_type'];
$interior = $vbulletin->GPC['interior'];
$exterior = $vbulletin->GPC['exterior'];
$audio_video = $vbulletin->GPC['audiovideo'];
$wheels_tires = $vbulletin->GPC['wheelstires'];
$suspension = $vbulletin->GPC['suspension'];
$drivetrain = $vbulletin->GPC['drivetrain'];
$nickname = $vbulletin->GPC['nickname'];

$sql = "INSERT INTO ". TABLE_PREFIX ."BAMFG_vehicle (

  userid, 
  username, 
  nickname, 
  year, 
  make_model,
  susp_type,
  exterior,
  interior,
  audio_video,
  drivetrain,
  suspension,
  wheels_tires) VALUES (

  '". $userid ."',
  '". $username ."',
  '". $nickname ."',
  '". $year ."',
  '". $make_model ."',
  '". $susp_type ."',  
  '". $exterior ."',
  '". $interior ."',
  '". $drivetrain ."',
  '". $audio_video ."',
  '". $suspension ."',
  '". $wheels_tires ."')";
$db->query_write($sql);
} 
```

它会写：年份，make_model，susp_type，interior，exterior和audio_video..这个家伙没有别的了..

再一次，无数次我试图重新创造一切正常工作的问题，其他人以及一切正常工作。我要拔头发了！

您可以自己尝试该站点，看看我们是否可以复制结果.. [http://www.minitrucker.org/bamfg.php](http://www.minitrucker.org/bamfg.php) 登录：stackoverflow 密码：密码

在没有 CSS 的情况下，一切仍然很粗糙，直到我把所有的代码都弄清楚了。再次感谢。

****编辑 *** 我已将代码更改为：**

 **```
$year =  mysql_real_escape_string($vbulletin->GPC['year']);
$make_model =  mysql_real_escape_string($vbulletin->GPC['make_model']);
$susp_type =  mysql_real_escape_string($vbulletin->GPC['susp_type']);
$interior =  mysql_real_escape_string($vbulletin->GPC['interior']);
$exterior =  mysql_real_escape_string($vbulletin->GPC['exterior']);
$audio_video =  mysql_real_escape_string($vbulletin->GPC['audiovideo']);
$wheels_tires =  mysql_real_escape_string($vbulletin->GPC['wheelstires']);
$suspension =  mysql_real_escape_string($vbulletin->GPC['suspension']);
$drivetrain =  mysql_real_escape_string($vbulletin->GPC['drivetrain']);
$nickname =  mysql_real_escape_string($vbulletin->GPC['nickname']); 
```

一切对我来说仍然有效，我将进行更多测试，看看会发生什么。想法？**

# c# - 使用 Javascript 禁用按钮时的意外行为

> ID：13436685
> 
> 赞同：0
> 
> 时间：2012-11-18T01:41:15.117
> 
> 标签：c#, javascript, internet-explorer, webforms

我有一个页面属性

```
 private Boolean Status
    {
        get { return (Boolean)Session["st"]; }
        set { Session["st"] = value; }
    } 
```

然后我在同一页面中有一个按钮（在更新面板内）

```
<asp:UpdatePanel ID="UpdatePanel4" runat="server" >
    <ContentTemplate>
        <asp:Button ID="btnSubmit" runat="server" Text="Submit" Width="150px"   
              OnClick="btnSubmit_Click" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

＆我已将此代码添加到页面加载以防止多次单击按钮

```
 btnSubmit.Attributes.Add
          ("onclick", "this.disabled=true;" + 
          Page.ClientScript.GetPostBackEventReference(btnSubmit, "").ToString()); 
```

如果我将会话属性 ( `Status`) 设置为**true**，然后单击按钮`btnSubmit`，会话属性将自动设置为**false**，如果我删除禁用代码，它就可以正常工作。

任何想法是什么导致了这种意外行为？

* * *

**更新 1**：这只发生在**Internet Explorer 10** (Windows 8) 上，在 Internet Explorer 8 和 Google Chrome 上运行良好....！

* * *

**更新 2**

我在页面加载中有这段代码

```
if (!Page.IsPostBack)
{ 
    Status = false;
} 
```

使用 Chrome，当我单击提交按钮时，它会将其视为 PostBack，因此它可以正常工作（不运行`Status = false;`），但使用 IE 提交单击未识别为 PostBack，因此它`Status = false`在页面加载事件中设置状态（）。

为什么不同的浏览器在这种情况下表现不同？有没有办法克服这个？

# xaml - 如何在不影响其他控件的情况下添加边框？

> ID：13436687
> 
> 赞同：2
> 
> 时间：2012-11-18T01:41:27.320
> 
> 标签：xaml, border, winrt-xaml, stackpanel, grid-layout

我尝试以这种方式用边框包围我的网格：

```
<Border BorderBrush="Black" BorderThickness="2">
<Grid>. . .</Grid>
</Border> 
```

...但是当我这样做时，以前位于我页面顶部的 TextBlock 以及其他网格被推到整个画布上 - 边框完美地包围了我的网格，但它会导致这些副作用。如何在不影响其他控件的情况下添加边框？

我的 XAML 是：

```
StackPanel
    Grid with 3 columns and four rows)
        TextBlock (GridRow=0, GridCol=0, GridColSpan=3)
        Grid (GridRow=1)
        Grid (GridRow=2)
        Grid (GridRow=3) 
```

## 更新

感谢达武特；这很好用：

```
 <Border Grid.Row="1" Padding="4" Margin="4" BorderThickness="2" BorderBrush="Black" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
    <Border Grid.Row="1" Padding="4" Margin="4" Grid.Column="1" BorderThickness="2" BorderBrush="Black" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
    <Border Grid.Row="1" Padding="4" Margin="4" Grid.Column="2" BorderThickness="2" BorderBrush="Black" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" /> 
```

# c# - 如何以特定编码从excel中读取？

> ID：13436690
> 
> 赞同：0
> 
> 时间：2012-11-18T01:42:11.270
> 
> 标签：c#, excel, encoding

我将列名从 excel 文件复制到 txt 文件。我通过以下方式从 txt 文件中读取：

```
CultureInfo cultureHU;
Encoding encodingHU;
cultureHU = CultureInfo.GetCultureInfo("hu-HU");
encodingHU = Encoding.GetEncoding(cultureHU.TextInfo.ANSICodePage);
using (StreamReader sr = new StreamReader("settings.txt", encodingHU, true))
{
...
} 
```

**如何读取具有相同编码的 Excel 文件？**如果我以默认方式 (xlRange.Cells[1, i].Value.ToString()) 执行此操作，那么我会得到错误的值：

*   在我的 excel 和 txt 文件中：“Szerzõdõ”
*   *从encodingHU*编码的文本文件中读取我得到：“Szerződő”（这是正确的格式）
*   从 C# 中的 excel 中读取我得到：“Szerzõdõ”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:51:10.543

您可以将错误的字符串转换为正确的编码，如下所示：

```
Console.WriteLine(encodingHU.GetString(Encoding.Default.GetBytes(str))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-15T07:31:58.303

我使用 ExcelDataReader。我需要编码 1250

```
ExcelReaderConfiguration conf = new ExcelReaderConfiguration();
conf.FallbackEncoding = Encoding.GetEncoding(1250);

using (IExcelDataReader reader = ExcelReaderFactory.CreateReader(stream, conf))
{
...
} 
```

# c++ - C++ 控制台问题

> ID：13436691
> 
> 赞同：0
> 
> 时间：2012-11-18T01:42:15.247
> 
> 标签：c++, arrays, function, multidimensional-array

这似乎是一个简单的问题，但我就是想不通是什么让我的控制台快速打开和关闭？我在 main() 函数中包含了 system("PAUSE") 。

程序信息：该程序用于电影院票务系统，显示哪一排的哪些座位可用（如您所见的多维数组）。

有人知道为什么控制台不会保持打开状态吗？我没有在编译器中收到任何错误消息。

```
#include <iostream>
#include <fstream>
using namespace std;
using std::ifstream;

void Init();
void Display();
void SellTicket();
void ReadPrices();

 char tickets[15][20];
 int revenue = 0;
 int ticketsSold = 0;
 int prices[15];

 int main()
 {
Init();
ReadPrices();
int choice;

    cout << "Enter your choice: " << endl;
    cout << "Press 1 for Display Chart" << endl;
    cout << "Press 2 for sell ticket" << endl;
    cout << "Press 3 for exit" << endl;
    cin >> choice;
    cout << endl;
    switch(choice)
    {
    case 1:
        Display();
        break;
    case 2:
        SellTicket();
        break;
    case 3:
        exit(0);
        break;
    }

system("PAUSE");
return 0;
 }

 void Init()
 {
for (int row = 0; row < 15; row++)
{
    for (int col = 0; col < 20; col++)
    {
        tickets[row][col]='*';
    }
}
 }

 void Display()
 {
cout <<"Seats:\t0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19"<<endl;
for (int row = 0; row < 15; row++)
{
    cout << "Row"<< row << "\t";
    for (int col = 0; col < 20; col++)
    {
        if(col < 10)
            cout << tickets[row][col] << " ";
        else
            cout << tickets[row][col] << "  ";
    }
    cout << endl;
    cout << endl;
}

cout << "Total sold seats are: " << ticketsSold << endl;
cout << "Total revenue is: " << revenue << endl;
cout << endl;

 }

 void SellTicket()
 {
int rowNo,seatNo;
//while(1)
//{
    cout << "Enter Row Number:";
    cin >> rowNo;
    cout << endl;

    cout << "Enter Seat Number:";
    cin >> seatNo;
    cout << endl;

    if (tickets[rowNo][seatNo]=='#')
    {
        cout << "Ticket is not available " << endl;
        cout << endl;
        SellTicket();
    }
    else
    {
        tickets[rowNo][seatNo]='#';
        revenue+=prices[rowNo];
        ticketsSold+=1;

        char c;
        cout << "Would you like to sell another ticket? Press y for yes or      n for no: ";
        cin >> c;
        cout << endl;
        if (c=='y')
        {
            SellTicket();
        }
    }
//}
 }

 void ReadPrices()
 {
int count=0;
ifstream indata; 
int num; 
indata.open("prices.dat"); 
if(!indata) 
{ 
  cerr << "Error: file could not be opened" << endl;
  exit(1);
}
indata >> num;
while ( !indata.eof() ) 
{ 
    prices[count++]=num;
  //cout<< "The next number is " << num << endl;
  indata >> num; 
}
indata.close();
//cout << "End-of-file reached.." << endl;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:48:02.413

因为在您的 ReadPrices() 函数中，您无法打开 price.dat 文件并简单地退出 (1) 应用程序

```
 indata.open("prices.dat"); 
  if(!indata) 
  { 
    cerr << "Error: file could not be opened" << endl;
    exit(1);
  } 
```

如果您使用 VisualStudio，运行应用程序，CTL + F5 控制台将保留。

**了解如何调试您的应用程序非常重要，单步执行每一行代码，您就可以轻松找到适合您案例的问题。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:48:58.567

我相信 exit() 是由 ReadPrices 调用的。exit() 不调用系统（“暂停”）。

可能的解决方法：

*   std::at_exit()
*   如果成功，请让您的 ReadPrices 函数返回一个布尔值来标记，而不是调用 exit。

# ruby-on-rails - 如何重构复杂的单例模型方法以在 Rails 中创建嵌套模型？

> ID：13436697
> 
> 赞同：0
> 
> 时间：2012-11-18T01:43:20.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refactoring

我有以下从控制器中切断的复杂方法：

```
def self.create_with_company_and_employer(job_params)
  company_attributes = job_params.delete(:company_attributes)
  employer_attributes = job_params.delete(:employer_attributes)

  new(job_params) do |job|
    job.employer = Employer.find_or_create_by_email(employer_attributes)
    company_attributes[:admin_id] = job.employer.id if Company.find_by_nip(company_attributes[:nip]).nil?
    job.company = Company.find_or_create_by_nip(company_attributes)
    Employment.create(employer_id: job.employer.id, company_id: job.company.id)
  end
end 
```

我在这里使用两个nested_attributes 功能来创建公司和雇主。

您可以在这里找到完整的代码：[https ://gist.github.com/2c3b52c35df763b6d9b4](https://gist.github.com/2c3b52c35df763b6d9b4)

```
company_attributes[:admin_id] = job.employer.id if Company.find_by_nip(company_attributes[:nip]).nil?
Employment.create(employer_id: job.employer.id, company_id: job.company.id) 
```

基本上我想重构这两行：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:25:47.227

我看了你的要点，我认为这是一个设计问题。

*   您的就业和工作模型似乎有些多余，但我不知道它们的实际目的究竟是什么，所以我现在无法真正帮助解决这个问题（我有一种预感，您的架构可以用属于的雇员进行改造工作）。但是，如果你真的想要，你可以使用`after_create`回调来管理复制：

    ```
    class Job < ActiveRecord::Base
      after_create :create_corresponding_employment

      def create_corresponding_employment
        Employment.create( employer_id: employer.id, company_id: company.id )
      end
    end 
    ```

    this gets you rid of the last line of your method.

*   the other line you want to get rid of is tricky : you assign an admin_id to your company, but why would you want to do that ? In fact, you're just creating a 'hidden' relation between Company and Employer (a belongs_to one). Why do you need that ? Give more information and i can help.
*   one more thing: it is not advised to delete keys form the params, or even modify the hash directly. Use a copy.

# jquery - JQuery获取单选框选择的当前值

> ID：13436701
> 
> 赞同：3
> 
> 时间：2012-11-18T01:44:37.360
> 
> 标签：jquery

我有一个表单，其中有单选按钮字段，例如：

```
<p><ul>
<li><label for="id_building_height_0"><input checked="checked" name="building_height"   value="1" id="id_building_height_0" type="radio" class="can_update_spans" /> 1 Story</label>    </li>
<li><label for="id_building_height_1"><input value="2" type="radio" class="can_update_spans" name="building_height" id="id_building_height_1" /> 2 Stories</label></li>
<li><label for="id_building_height_2"><input value="3" type="radio" class="can_update_spans" name="building_height" id="id_building_height_2" /> 3 Stories</label></li>
</ul></p> 
```

我的问题是 - 如何获得`$("input:checkbox[name='bulding_height']")`当前设置的当前值？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T01:48:35.857

```
$('input:radio[name=bulding_height]:checked').val(); 
```

或者

```
$('[name=bulding_height]:checked').val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T01:46:37.387

你有`input type radio but using input type checkbox in selector`你必须使用类型收音机。你也给了`wrong name in selector bulding_height should be building_height`

这些都将为您提供所选单选按钮的价值，

**[现场演示](http://jsfiddle.net/rajaadil/7n4sK/3/)**

```
alert($("input:radio[name='building_height']:checked").val());
alert($(":radio[name='building_height']:checked").val());
alert($("[name='building_height']:checked").val()); 
```

要遍历所有单选按钮值，您可以使用每个

**[现场演示](http://jsfiddle.net/rajaadil/7n4sK/1/)**

```
$("input:radio[name='building_height']").each(function(){
     alert(this.value);
});​ 
```

# objective-c - 使用 AFHTTPRequest 操作下载文件不起作用？

> ID：13436707
> 
> 赞同：0
> 
> 时间：2012-11-18T01:45:57.810
> 
> 标签：objective-c, download, nsurlrequest

这是我正在使用的代码（[来自这个 Stack Overflow 问题](https://stackoverflow.com/questions/10245345/how-to-download-audio-video-files-from-internet-and-store-in-iphone-app)，尽管稍作修改）：

```
NSLog(@"Saving File...");

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[detailDataSourceDict valueForKey:@"filepath"]]];
NSLog(@"This is the link you are downloading: %@",request);
AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [paths objectAtIndex:0];
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Successfully downloaded file to %@", path);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@", error);
}];

[operation start]; 
```

我得到 NSLog “成功下载文件到 /Users/xxxx/Library/Application Support/iPhone Simulator/6.0/Applications/F29C1E99-A277-41DC-8205-6556B6123A85/Documents”但是当我在 Finder 中打开该文件夹时，我不'看不到文件。有什么我做错了吗？我的代码中没有错误。任何帮助将不胜感激，谢谢。

* * *

## 更新

我正在使用 AFNetwork 库...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:55:56.527

您将下载位置设置为实际的文档目录，而不是目录中的文件。更新您的代码以使用目录中的特定文件。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [paths objectAtIndex:0]; //filepath to documents directory!
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:[path stringByAppendingPathComponent:@"filename.extension"] append:NO]; 
```

另外，我认为您可能想要设置`inputStream`属性而不是`outputStream`因为您正在下载文件而不是上传文件。

# ajax - HttpDelete 标头字段 'x-method' 缺失错误的原因

> ID：13436712
> 
> 赞同：2
> 
> 时间：2012-11-18T01:46:30.320
> 
> 标签：ajax, http, rest, http-delete

请帮助我了解使用 HttpDelete 时“x-method”缺失错误的可能原因。

有一个 Windows 7 用户使用 Chrome 23，但 HttpDelete 不工作。此测试网站[http://www.mnot.net/javascript/xmlhttprequest/](http://www.mnot.net/javascript/xmlhttprequest/)报告以下“可用的方法？” 部分：

> 删除：失败（测试执行问题：缺少预期的响应头字段（'x-method'）。）

当使用自定义 Web 应用程序使用 jQuery ajax 访问 REST 服务时，机器也无法使用 DELETE。它报告任何 DELETE 请求的 405 异常。该应用程序适用于具有完全相同操作的其他机器。

感谢您提供有关在这些情况下可能导致删除动词失败的原因的信息。

# javascript - 如何停用 console.log 和警报？

> ID：13436713
> 
> 赞同：1
> 
> 时间：2012-11-18T01:46:36.050
> 
> 标签：javascript

作为一个新手，我在尝试学习 JavaScript 时经常使用 console.log 和 alert()。我找到了一个我感兴趣的网站，并将 html 和 javascript/jquery 复制到我的本地主机上来玩弄它。当我将 console.log() 和 alert 语句放入 javascript 以帮助解决问题时，它们都不起作用。我在多个浏览器（Chrome、Safari、Firefox）中尝试过这个，删除浏览器历史等。对我来说，代码没有什么不寻常的。有什么我可能会丢失的吗？代码运行良好（控制台中没有记录错误）。

顺便说一句，我将它复制到我的本地主机上，因为我不知道如何在 Firebug 中添加控制台日志。有没有办法这样做？我从 console.log 获得更多信息（我理解）而不是设置断点。

这是代码。这显然相当简单（尽管我仍然需要 console.log 才能完全得到它）。

```
// Global variables
var flag;
var dark;

$(document).ready(function() {
// $(function() {

    // Hide all closed sections
    $(".closed").next().hide();

    // Add slide functions to all sections (h1 elements)
    $("h1").click(function () {
        if($(this).is('.closed')) {
            $(".open").delay(200, function() { $(this).next().slideUp("slow"); });
            $(this).delay(200, function() { $(this).next().slideDown("slow"); });
            $("h1").deactivateElement();
            $(this).activateElement();
        }
        else if($(this).is('.open')) {
            $(this).delay(200, function() { $(this).next().slideUp("slow"); });
            $(this).deactivateElement();
        }
    });

    // Add a function to toggle the CSS styles
    $("a#style_switcher").click(function () { flag = !flag; dark.disabled = flag; });

    // Add hover functions to all sections (h1 elements)
    $("h1").hover(function() { $(this).addClass('hover'); }, function() { $(this).removeClass('hover'); });

    // Delay the call to (slide) functions
    // => http://james.padolsey.com/javascript/jquery-delay-plugin/
    $.fn.delay = function(time, callback) {
        jQuery.fx.step.delay = function() {};
        return this.animate( { delay: 1 }, time, callback);
    }

    // Set an element class to 'open' or 'closed'
    $.fn.activateElement = function() { switchClasses($(this), 'open', 'closed'); }
    $.fn.deactivateElement = function() { switchClasses($(this), 'closed', 'open'); }

    // Do this at start
     initialize(console.log("farting"));
      alert("hi");

    $(".who").delay(600, function() { $(this).next().slideDown("slow"); });
     $(".who").activateElement();
});

// Initialization function
function initialize () {
    flag = true;
    dark = document.getElementById("dark_css");
    dark.disabled = flag;

    // Set year in copyright section
    document.getElementById('year').innerHTML = (new Date()).getFullYear();
}

// Utility function for switching/toggling classes
function switchClasses (element, classToAdd, classToRemove) {

    element.addClass(classToAdd);
    element.removeClass(classToRemove);
    // De/Activate the given element
    (classToAdd == 'open') ? element.addClass('active') : element.removeClass('active');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:20:02.737

针对您的标题，这是：

```
window.alert = function () { }
alert('hi'); 
```

不触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:09:08.930

```
initialize(console.log("farting"));
alert("hi"); 
```

这是什么魔法？

这里有两个问题：

1.  您将参数传递给`function initialize () {`语法错误的无参数函数，您不能指望该语句执行您想要的操作。

2.  `alert`是一个未定义的函数，您可能是这样想的，[`window.alert`](https://developer.mozilla.org/en-US/docs/DOM/window.alert)但它应该足以[`console.log`](https://developer.mozilla.org/en-US/docs/DOM/console.log)代替使用，因为前一页提到没有兼容性图表：

    > DOM 级别 0。不属于任何标准。

    因此，`console.log`建议使用它，因为它至少提供了一个兼容性图表。

    尝试放置一条`console.log("hi");`自己的线路。

*不过，真正的交易是[学习断点](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T02:12:49.837

我建议您使用控制台本身来执行这些测试并运行一些“示例代码”Chrome 控制台： [https ://developers.google.com/chrome-developer-tools/docs/console](https://developers.google.com/chrome-developer-tools/docs/console)

# mysql - mysql 创建表 - 与评论相关的错误 1064

> ID：13436715
> 
> 赞同：-1
> 
> 时间：2012-11-18T01:46:40.960
> 
> 标签：mysql

我是Mysql的新手，在创建表时出错，请告诉我，

询问

```
CREATE  TABLE schoolsy.Employees (

Emp_Num               INT(11)  NOT NULL AUTO_INCREMENT,

Emp_First_Name    VARCHAR(30),

Emp_Last_Name    VARCHAR(30),

Emp_Middle_Name VARCHAR(30),

Emp_Gender            ENUM('M','F', 'N'),

Emp_Hire_Date      DATE,

Emp_End_Date      DATE,

Emp_Status             CHAR(1),

Row_Create_Ts    TIMESTAMP,

Row_Create_UserId  CHAR(30),

Row_Update_Ts    TIMESTAMP,

Row_Update_UserId CHAR(30) 

  PRIMARY KEY (Emp_Num)

COMMENT = 'This table contains all the employee details.'; 
```

新错误：

ERROR 1064：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '='This table contains all the employee details.'' 附近使用正确的语法，第 15 行

SQL 语句：

```
CREATE  TABLE schoolsy.Employees (

Emp_Num               INT(11)  NOT NULL AUTO_INCREMENT,

Emp_First_Name    VARCHAR(30),

Emp_Last_Name    VARCHAR(30),

Emp_Middle_Name VARCHAR(30),

Emp_Gender            ENUM('M','F', 'N'),

Emp_Hire_Date      DATE,

Emp_End_Date      DATE,

Emp_Status             CHAR(1),

Row_Create_Ts    TIMESTAMP,

Row_Create_UserId  CHAR(30),

Row_Update_Ts    TIMESTAMP,

Row_Update_UserId CHAR(30),

  PRIMARY KEY (Emp_Num),

COMMENT = 'This table contains all the employee details.' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:47:38.837

缺少逗号：

```
Row_Update_UserId CHAR(30),
                          ^--- here
  PRIMARY KEY (Emp_Num),
                       ^-- here
COMMENT = 'This table contains all the employee details.';
        ^--- remove 
```

# vb.net - 添加防火墙例外

> ID：13436721
> 
> 赞同：0
> 
> 时间：2012-11-18T01:47:40.257
> 
> 标签：vb.net, firewall, tcplistener, windows-firewall

我正在处理服务器/客户端 TCP 通信，它工作正常，尽管我无法制作应用程序来将软件添加到 Windows 防火墙异常中。我确实找到了一个样本，但它没有用。

我的代码：

```
Imports NetFwTypeLib
Public Class Form1

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load
        Dim appType As Type = Type.GetTypeFromProgID("HnetCfg.FwAuthorizedApplication")
        Dim app As INetFwAuthorizedApplication
        app = DirectCast(Activator.CreateInstance(appType), INetFwAuthorizedApplication)

        ' Set the application properties
        app.Name = "My App"
        app.ProcessImageFileName = "c:\users\klein\documents\visual studio 2012\projects\tcp_server\tcp_server\bin\debug\tcp_server.exe"
        app.Enabled = True

        ' Get the firewall manager, so we can get the list of authorized apps
        Dim fwMgrType As Type = Type.GetTypeFromProgID("HnetCfg.FwMgr")
        Dim fwMgr As INetFwMgr
        fwMgr = DirectCast(Activator.CreateInstance(fwMgrType), INetFwMgr)

        ' Get the list of authorized applications from the Firewall Manager, so we can add our app to that list
        Dim apps As INetFwAuthorizedApplications
        apps = fwMgr.LocalPolicy.CurrentProfile.AuthorizedApplications
        apps.Add(app)
    End Sub
End Class 
```

代码运行完美，未检测到异常。但是，加载表单后，程序并未列出。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:04:55.507

看这个：

[使用 C# 以编程方式将异常添加到 Windows 防火墙](http://www.codeguru.com/csharp/.net/net_general/tipstricks/article.php/c14167/Programatically-Add-Exceptions-to-a-Windows-Firewall-Using-C.htm)

# mysql - MySQL计算两列上的唯一值并为每列加入这些计数

> ID：13436725
> 
> 赞同：4
> 
> 时间：2012-11-18T01:48:05.330
> 
> 标签：mysql, sql, left-join, outer-join, jointable

我有一个这样设置的表：

```
 +----+-------+-------+
  | id | col1  | col2  |
  +----+-------+-------+
  |  1 | John  | Mike  |
  |  2 | Mike  | John  |
  |  3 | Marty | John  |
  |  4 | Walt  | Marty |
  |  5 | Walt  | Mike  |
  +----+-------+-------+ 
```

我基本上想计算 col1 和 col2 中的唯一值并将它们与适当的唯一值一起显示。问题是 col1 不一定包含 col2 具有的所有相同名称，反之亦然。我正在寻找这样的设置：

```
 +-------+-------+------+
 | names | col1  | col1 |
 +-------+-------+------+
 | John  |     1 |    2 |
 | Marty |     1 |    1 |
 | Mike  |     1 |    2 |
 | Walt  |     2 | NULL |
 +-------+-------+------+ 
```

我可以使用以下方法独立选择这些值：

```
 SELECT col1, count(col1) as count FROM example GROUP BY col1; 
```

或者

```
 SELECT col2, count(col2) as count FROM example GROUP BY col2; 
```

但是我很难理解我是如何将这两个计数结合在一起的，特别是因为这里的值“Walt”没有出现在 col2 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:01:14.003

我假设您的案例可能比数据中显示的要多。你可以在 col1 中有 NULL，你可以有只出现在 col1 或只出现在 col2 中的名称，等等。

```
SELECT a.name, c1.`count`, c2.`count`
FROM (SELECT col1 AS name FROM `Table` UNION SELECT col2 FROM `Table`) a
LEFT JOIN (SELECT col1, COUNT(*) AS `count` FROM `Table` GROUP BY col1) c1 
  ON a.name = c1.col1
LEFT JOIN (SELECT col2, COUNT(*) AS `count` FROM `Table` GROUP BY col2) c2 
  ON a.name = c2.col2; 
```

说明:
派生表`a`是出现在任一列中的所有名称的联合。然后再制作两个派生表，每个表都有 col1 中的每个名称和它出现的次数，然后是 col2 中名称的另一个类似的派生故事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T01:53:57.727

试试这个：

```
SELECT 
  t1.col1, 
  count(t2.col2), 
  COUNT(t1.col2) 
FROM table1 t1
LEFT JOIN 
(
   SELECT col2 
   FROM Table1
) t2 ON t1.col1 = t2.col2
GROUP BY t1.col1; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/4bf8d/10)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T01:58:25.913

```
select coalesce(a.col1,b.col2) names, a.c col1, b.c col2 from
(select col1, count(*) c from table1 group by col1) a
left outer join
(select col2, count(*) c from table1 group by col2) b
on a.col1 = b.col2; 
```

实际上，它需要`full outer join`包含仅存在于 col2 中的名称 - 因为 MySQL 不支持完整的外部连接，所以您必须首先将它们联合在一起，如 Bill 的回答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T09:02:55.033

这也可能是一个解决方案：

```
select names, sum(totalc1), sum(totalc2)
from
  (select col1 as names, count(col1) as totalc1, 0 as totalc2
   from your_table group by col1
   union
   select col2 as names, 0 as totalc1, count(col2) as totalc2
   from your_table group by col2) t
group by names 
```

我只是将您的两个原始查询合并为一个。

第一个计算col1中的唯一值，所以我将0设置为col2的计数。第二个计算col2中的唯一值，所以我将0设置为col1的计数。联合查询将这两个查询组合在一起，因此我们现在只需对结果进行分组和求和。由于不涉及任何连接，我认为这个解决方案应该很快。

# c++ - 有符号浮点变量转换为无符号 DWORD

> ID：13436729
> 
> 赞同：0
> 
> 时间：2012-11-18T01:48:57.583
> 
> 标签：c++, winapi

我正在尝试将带符号的浮点变量转换为 DWORD ... DWORD 将由另一个程序使用，因此 DWORD 变量类型很重要...

首先...可以将带符号的 DWORD 解释为无符号的 DWORD ..？

还...如何将带符号的浮点数转换为 DWORD（带符号）..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T03:10:58.187

> 我正在尝试将带符号的浮点变量转换为 DWORD ... DWORD 将由另一个程序使用，因此 DWORD 变量类型很重要...
> 
> 首先...可以将带符号的 DWORD 解释为无符号的 DWORD ..？
> 
> 还...如何将带符号的浮点数转换为 DWORD（带符号）..？

`DWORD`是由 Windows API 定义的 32 位无符号整数类型。没有“签名的 DWORD”之类的东西。可能您的意思是*相应*的签名类型。

在 C++ 中，所有**浮点**类型（`float`和`double`）`long double`都是有符号类型，因此谈论“有符号浮点”是不寻常的。大概你的意思是它可以是一个*负值*。将负浮点值转换为无符号整数有两种主要可能性：

*   *就好像*浮点值，比如说`-1.23`，被转换为有符号整数，然后通过 2 ^(*n*)的适当倍数进行调整，使其进入无符号整数范围，或者

*   *就好像*浮点值，再次说，通过 2 ^n`-1.23`的适当倍数调整，使其进入无符号整数范围，然后转换为无符号整数类型。

这些过程通常会产生不同的结果，相差 1。但是，测试它，这是 Visual C++ 11.0 和 MinGW g++ 4.7.1 使用的第一个过程。而且我怀疑这是标准规定的（例如，C++11 终于有了关于负数整数除法结果的明确规则）：

```
#include <math.h>
#include <windows.h>
using namespace std;

#include <iostream>
DWORD test1()
{
    double floatValue = -1.23456;
    DWORD const dwValue = floatValue;

    cout << dwValue << endl;
    return dwValue;
}

DWORD test2()
{
    double floatValue = -1.23456;
    double reduced    = floatValue + (1uLL << 32);
    DWORD const dwValue = reduced;

    cout << dwValue << endl;
    return dwValue;
}

int main()
{
    cout << DWORD(-1) << endl;
    DWORD const t1 = test1();  cout << 1uLL + DWORD(-1) - t1 << endl;
    DWORD const t2 = test2();  cout << 1uLL + DWORD(-1) - t2 << endl;
} 
```

输出，使用 Visual C++ 11.0 和 MinGW g++ 4.7.1：

```
4294967295
4294967295
1
4294967294
2

```

通常，转换（通过简单的赋值或初始化执行）会丢失数据。

编译器可能会对此发出警告。使其关闭的一种可能方法（可能有效也可能无效）是使用 a`static_cast`使转换显式。无论如何，请注意在一般情况下转换*必须*丢失数据，因为通常浮点值比`DWORD`.

然而，在一种情况下， a`DWORD`有足够的位，这是一个 type 的值`float`，在 Windows 中是 32 位 IEEE。

因此，您可以将任何`float`值表示为`DWORD`具有*相同位*的值，但是数值之间的连接看起来非常随意。它是否实用取决于您的其他应用程序。它期望什么，或者它可以处理什么？

```
#include <windows.h>
#include <iostream>
using namespace std;

DWORD dwordBitsFrom( float const number )
{
    return *reinterpret_cast< DWORD const* >( &number );
}

float floatFromBits( DWORD const bits )
{
    return *reinterpret_cast< float const* >( &bits );
}

int main()
{
    float const original        = -1.23;
    DWORD const bits            = dwordBitsFrom( original );
    float const reconstituted   = floatFromBits( bits );

    cout << original << endl;
    cout << bits << endl;
    cout << reconstituted << endl;
} 
```

输出，使用 Visual C++ 11 和 g++ 4.7.1（以及任何实际有用的 Windows C++ 编译器）：

```
-1.23
3214766244
-1.23

```

但是请注意，虽然后一种转换*在 Windows 中得到了很好的定义*，但 C++ 标准不支持 Windows 规则。从严格的形式上看，不恰当地将上述代码视为平台无关，这违反了C++**严格的别名**规则。哪个 g++ 很高兴通知您：

```
[D:\开发\测试]
> gnuc --strict-aliasing foo.cpp
foo.cpp：在函数“DWORD dwordBitsFrom(float)”中：
foo.cpp:7:55: 警告：取消引用类型双关指针将破坏严格别名规则 [-Wstrict-aliasing]
foo.cpp：在函数'float floatFromBits（DWORD）'中：
foo.cpp:12:53：警告：取消引用类型双关指针将破坏严格别名规则 [-Wstrict-aliasing]

[D:\开发\测试]
> _

```

为了让 g++ 等愚蠢的编译器满意，您必须通过字节缓冲区进行转换。这很烦人，因为警告都是关于编译器*检测*到你所表达的你想要的，与它可能应用的一些非常不受欢迎的边际优化不兼容。当它可以检测到它不应该做的事情时，为什么它不能不做那些不受欢迎的事情，而不是警告它不能做呢？或者，为什么不能根本不做呢？既然没人要。

但无论如何，这里的代码让 g++ 闭嘴：

```
#include <windows.h>
#include <iostream>
#include <string.h>         // memcpy
using namespace std;

static_assert( sizeof( DWORD ) == sizeof( float ), "y DWORD no same size float?" );

int const nBytes = sizeof( DWORD );

DWORD dwordBitsFrom( float const number )
{
    char    buffer[nBytes];
    DWORD   result;

    memcpy( buffer, &number, nBytes );
    memcpy( &result, buffer, nBytes );
    return result;
}

float floatFromBits( DWORD const bits )
{
    char    buffer[nBytes];
    float   result;

    memcpy( buffer, &bits, nBytes );
    memcpy( &result, buffer, nBytes );
    return result;
}

int main()
{
    float const original        = -1.23;
    DWORD const bits            = dwordBitsFrom( original );
    float const reconstituted   = floatFromBits( bits );

    cout << original << endl;
    cout << bits << endl;
    cout << reconstituted << endl;
} 
```

当然，由于它是更冗长且效率更低的代码，人们可能会认为关闭一个愚蠢的编译器（即 g++）是不值得的。个人认为*不*值得。相反，只需`-fno-strict-aliasing`对 g++ 说，并使用`reinterpret_cast`, 因为这就是它的*用途*，为什么我们在语言中使用它。

总而言之，如果您的其他程序需要一个尽可能接近原始浮点值的数值，那么只需通过分配或初始化转换为*，*`DWORD`可能使用 a`static_cast`来抑制编译器警告。

如果您的其他程序需要一个值的*位*`float`，那么只需使用`reinterpret_cast`转换。上面的代码展示了如何使用更低效、更冗长和更容易吸引错误的代码`memcpy`来取悦 g++ 编译器。但我的建议是，如果这是相关的，那么只需通过`-fno-strict-aliasing`（另一个使 g++ 编译器符合实用性的有用的此类选项是`-fwrapv`，恕我直言，应该始终使用它）来抑制 g++ 警告。

# java - 在java中最终返回之前

> ID：13436735
> 
> 赞同：3
> 
> 时间：2012-11-18T01:49:32.343
> 
> 标签：java

在这种情况下，“myMethod()”是在“doSomething()”之前还是之后执行的？

```
public class Foo {
    public void fooMethod() {
        Bar bar = new Bar();
        bar.barMethod().myMethod();
    }
}

public class Bar {
    public SomeClass barMethod() {
        try {
            return new SomeClass();
        } finally {
            doSomething();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T01:51:22.107

`myMethod()`*之后* 执行，`doSomething`因为*在之前*`doSomething`执行将其值返回给调用者。 *`barMethod`*

 *该值被计算并准备好返回，然后整个`finally`块执行，只有这样调用者才能继续；这是`myMethod`被调用的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:58:06.457

myMethod() 之前的 doSomething()

```
public class Test {

   public static void main(String[] a){
       new Foo().fooMethod();
   }

public static class Foo {

    public void fooMethod(){
        Bar bar = new Bar();
        bar.barMethod().parseInt("sc");
    }

}

public static class Bar {

    public Integer barMethod(){
        try {
            return new Integer(100);
        } finally {
            doSomething();
        }
    }

    private void doSomething(){
        System.out.println("doSomething");
    }

}
} 
```

显示“doSomething”后崩溃*

# c - linux内核，如何循环所有cpu？

> ID：13436746
> 
> 赞同：3
> 
> 时间：2012-11-18T01:52:19.747
> 
> 标签：c, linux-kernel, kernel

我需要遍历每个 CPU，以便`per_cpu`从它们中获取值，但 Linux 内核 2.6.26.5 版本中似乎没有`for_each_cpu(i)`宏。

我怎样才能实现以下目标？

```
for_each_cpu(i)
    per_cpu(vm_event_states, i) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T03:03:23.587

回到 2.6.26 内核，`for_each_cpu()`被称为`for_each_cpu_mask()`. 它在 中定义`cpumask.h`，并接受两个参数 - 一个迭代器和一个掩码。掩码是一个`cpumask_t`左值，用于定义要迭代的 CPU 集。

有三个只需要一个迭代器的辅助宏——你可能想使用其中之一：

```
for_each_possible_cpu(cpu)
for_each_present_cpu(cpu)
for_each_online_cpu(cpu) 
```

`for_each_possible_cpu()`遍历内核启动时可能存在的所有 CPU；`for_each_present_cpu()`迭代当前存在的所有 CPU（在不支持 CPU 热插拔的系统上，这两个是相同的）；并`for_each_online_cpu()`遍历所有当前已启用且可供调度程序使用的 CPU。

请注意，`for_each_online_cpu()`应在`get_online_cpus()`/`put_online_cpus()`部分中使用，以防止在您迭代时更改在线 CPU 映射。

这很可能`for_each_possible_cpu()`就是你想要的。

# android - 我的 Android 应用程序不断强制关闭

> ID：13436749
> 
> 赞同：2
> 
> 时间：2012-11-18T01:54:03.670
> 
> 标签：android, android-intent, android-emulator, forceclose

我不明白为什么当我在模拟器中运行它时它会强制关闭。我做了一个启动画面，这没有问题，但它不会通过：

```
public class MainActivity extends Activity 
{
protected boolean _active = true;
protected int _splashTime = 5000;

// Called when the activity is first created.
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // thread for displaying the SplashScreen
    Thread splashTread = new Thread() 
    {
        @Override
        public void run() 
        {
            try 
            {
                int waited = 0;
                while(_active && (waited < _splashTime)) 
                {
                    sleep(100);
                    if(_active) 
                    {
                        waited += 100;
                    }
                }
            } 
            catch(InterruptedException e) 
            {
                // do nothing
            } 
            finally 
            {
                finish();
                startActivity(new Intent("com.example.textsmslock.EnableActivity"));
                stop();
            }
        }
    };
    splashTread.start();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        _active = false;
    }
    return true;
}
} 
```

在启动屏幕之后，它应该转到下面的另一个活动代码：

```
public class Enable extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_enable);
   // getActionBar().setDisplayHomeAsUpEnabled(true);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_enable, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
}
public void EnableYes(View view)
{
    startActivity(new Intent("com.example.textsmslock.EnterPin"));
}
public void EnableNo(View view)
{

}

} 
```

红色 Logcats

```
11-17 21:04:53.504: E/Zygote(32): setreuid() failed. errno: 2
11-17 21:05:00.924: E/Zygote(32): setreuid() failed. errno: 17
11-17 21:05:02.074: E/BatteryService(58): usbOnlinePath not found
11-17 21:05:02.074: E/BatteryService(58): batteryVoltagePath not found
11-17 21:05:02.074: E/BatteryService(58): batteryTemperaturePath not found
11-17 21:05:02.094: E/SurfaceFlinger(58): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
11-17 21:05:07.994: E/EventHub(58): could not get driver version for /dev/input/mouse0, Not a typewriter
11-17 21:05:07.994: E/EventHub(58): could not get driver version for /dev/input/mice, Not a typewriter
11-17 21:05:08.653: E/System(58): Failure starting core service
11-17 21:05:08.653: E/System(58): java.lang.SecurityException
11-17 21:05:08.653: E/System(58):   at android.os.BinderProxy.transact(Native Method)
11-17 21:05:08.653: E/System(58):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
11-17 21:05:08.653: E/System(58):   at android.os.ServiceManager.addService(ServiceManager.java:72)
11-17 21:05:08.653: E/System(58):   at com.android.server.ServerThread.run(SystemServer.java:184)
11-17 21:05:09.293: E/SoundPool(58): error loading /system/media/audio/ui/Effect_Tick.ogg
11-17 21:05:09.304: E/SoundPool(58): error loading /system/media/audio/ui/KeypressStandard.ogg
11-17 21:05:09.304: E/SoundPool(58): error loading /system/media/audio/ui/KeypressSpacebar.ogg
11-17 21:05:09.304: E/SoundPool(58): error loading /system/media/audio/ui/KeypressDelete.ogg
11-17 21:05:09.304: E/SoundPool(58): error loading /system/media/audio/ui/KeypressReturn.ogg
11-17 21:05:35.019: E/AndroidRuntime(272): FATAL EXCEPTION: Thread-8
11-17 21:05:35.019: E/AndroidRuntime(272): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=this, com.example.textsmslock.Enable.class }
11-17 21:05:35.019: E/AndroidRuntime(272):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
11-17 21:05:35.019: E/AndroidRuntime(272):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
11-17 21:05:35.019: E/AndroidRuntime(272):  at android.app.Activity.startActivityForResult(Activity.java:2817)
11-17 21:05:35.019: E/AndroidRuntime(272):  at android.app.Activity.startActivity(Activity.java:2923)
11-17 21:05:35.019: E/AndroidRuntime(272):  at com.example.textsmslock.MainActivity$1.run(MainActivity.java:45)

**end of logcat** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:59:29.690

没有堆栈跟踪很难说，但很可能没有调用 Activity `EnableActivity`。根据您的代码， Activity 被调用`Enable`。

一种类型安全的方法是不使用字符串，而是使用`startActivity(new Intent(this, com.example.textsmslock.Enable.class))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:32:40.790

首先，我认为你开始第二个`Activity`错误。在你的`MainActivity`，你有这个：

```
startActivity(new Intent("com.example.textsmslock.EnableActivity")); 
```

当你应该有这样的东西时：

```
startActivity(new Intent(this, Enable.class)); 
```

其次，这就是`Enable`清单中的样子。您实际上不必使用`meta-data`标签指示父活动：

```
<activity android:name="com.example.textsmslock.Enable"
    android:label="@string/title_activity_enable"></activity> 
```

第三，当人们说“堆栈跟踪”时，您通常会在 Logcat 中看到以红色打印出来的内容。这意味着有一个`Exception`或一个错误抛出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T23:06:27.760

我的清单中缺少意图过滤器

```
<intent-filter>
            <action android:name="com.example.textsmslock.Enable" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

# jquery - jquery mobile：根据下拉菜单选择显示/隐藏文本输入

> ID：13436753
> 
> 赞同：0
> 
> 时间：2012-11-18T01:54:33.670
> 
> 标签：jquery, jquery-mobile, select, show-hide

这是我的代码：http: [//jsfiddle.net/AcfnR/19/](http://jsfiddle.net/AcfnR/19/)

使用 optgroup，我在下拉菜单中创建了两个类别：请求新机架和修复/更换现有机架。我希望在页面加载时隐藏 id="description" textarea 和 id="photo" 文件输入。目前，我将这两个包装在 id="damage_div" 的 div 中，假设隐藏一个 div 更容易。当用户选择修复/替换现有机架选项组下的任何选项时，应显示两个隐藏元素。如果用户返回并将他的选择更改为请求 new racks optgroup 中的某些内容，则该字段将再次隐藏。另外，我如何使显示功能成为向下滑动过渡并隐藏向上滑动过渡？

我已经查看了其他 stackoverflow 问题和谷歌的一些示例，但未能使它们工作：http: [//jsfiddle.net/bryanjamesross/RF9Fg/1/](http://jsfiddle.net/bryanjamesross/RF9Fg/1/)

这些示例将一个选择选项链接到一个输入字段，我想将许多选择选项链接到相同的两个输入字段（或包装它们的 div）。

HTML：自行车架请求

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>       
</head>

<body>
<div data-role="page" data-theme="d" id="bike-rack-request" class="page">
 <div data-role="header" data-theme="d">
 </div><!--header-->
<div data-role="content" data-inset="true" class="content">
   <div style="float:left;"><h3 data-theme="a">Bike Rack Request</h3></div>
   <div style="float:right; padding-bottom:0px;"></div>
  <form id="rackForm" action="rack-form.php" method="post" data-ajax="false">

   <fieldset data-role="fieldcontain" class="ui-hide-label">
    <label for="Business_Name">Name of business:</label>
    <input type="text" data-theme="c" name="Business_Name" id="Business_Name" value=""  placeholder="Name of business" data-mini="true"/>
   </fieldset><!--fieldcontain-->

   <fieldset data-role="fieldcontain" class="ui-hide-label">
    <label for="Contact_Name">Contact name:</label>
    <input type="text" data-theme="c" name="Contact_Name" id="Contact_Name" value=""  placeholder="Contact name" data-mini="true" />
   </fieldset><!--fieldcontain-->

   <fieldset data-role="fieldcontain" class="ui-hide-label">
    <label for="email">Email:</label>
    <input type="email" data-theme="c" name="email" id="email" value="" placeholder="Email" data-mini="true"/>
   </fieldset><!--fieldcontain-->

   <fieldset data-role="fieldcontain" class="ui-hide-label">
    <label for="Street_Address">Address:</label>
    <input type="text" data-theme="c" name="Street_Address" id="Street_Address" value="" placeholder="Address of rack location" data-mini="true" />
   </fieldset><!--fieldcontain-->

   <fieldset data-role="fieldcontain"  class="ui-hide-label">
    <label for="Number_of_Racks" class="select">Select rack request</label>
    <select name="Number_of_Racks" data-theme="c" id="Number_of_Racks" data-native-menu="true" data-mini="true">
            <option value="" data-placeholder="true">Select rack request</option>
           <optgroup label="Request new rack(s)">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5+</option>
           </optgroup>
           <optgroup label="Repair/replace existing rack"> 
            <option value="Seperating from concrete">Seperating from concrete</option>
            <option value="Missing footing screws">Missing footing screws</option>
            <option value="Rack has been cut">Rack is cut</option>
            <option value="Rack has been smashed">Rack is smashed</option>
            <option value="Rack was stolen">Rack was stolen</option>
            <option value="Other">Other damage</option>
           </optgroup> 
    </select>
   </fieldset>

   <div id="damage_div"><!-- next two div will be hidden at first -->
       <fieldset data-role="fieldcontain" id="damagefield" class="ui-hide-label">
        <label for="description">Describe the damage</label>
        <textarea type="textarea" data-theme="b" name="description" id="description" class="required" maxlength="1000" value="" placeholder="Describe the damage" data-mini="true" /></textarea>
       </fieldset><!--fieldcontain-->

       <fieldset data-role="fieldcontain" id="photofield" class="photofield">
        <label for="photo">&nbsp;Photo of damaged rack: </label>
        <input type="file" accept="image/*" capture="camera" data=theme="b" name="photo" id="photo" placeholder="Photo of damage">
       </fieldset><!--fieldcontain-->
   </div><!--end of hidden div wrapper-->

   <button type="submit" data-theme="d" name="submit" value="submit-value" data-mini="true" data-rel="popup">Submit</button>
  </form>
 </div><!--content-->
 <div data-role="footer" data-theme="none" class="footer">   
 </div><!--footer-->
</div><!--bike-rack-request--> 
```

​</p>

Javascript：

```
$('#Number_of_Racks').change(function() {
    var value = $(this).val();
    if (value == 'Other') {
    $('#damage_div').show('fast');
    }
    else {
    $('#damage_div').hide('fast');
    }
});​ 
```

# php - PHP乘数组（）*整数

> ID：13436754
> 
> 赞同：0
> 
> 时间：2012-11-18T01:54:43.357
> 
> 标签：php, post, integer

我的代码是：

POST 的 HTML 部分：

```
<form action='key.php' method='POST'> 
<input type='number' name='consumervar[]' value='512'/>
<input type='number' name='consumervar[]' value='256'/>
<input type='number' name='consumervar[]' value='1024'/>
<input type='submit'/>
</form> 
```

key.php 的 PHP 代码：

```
<?PHP
  foreach ($_POST as $key => $value) {
    $consumervar = $value*64;
  }
  print_r($consumervar); // this is for for debug (see array contents)
?> 
```

但是当我运行它重现的所有内容时：

```
Fatal error: Unsupported operand types in /var/blahblah/blahblah/key.php on line 3 
```

请帮忙。如何正确执行？它需要将每个发布的值乘以整数 64。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T01:56:31.653

循环应该是

```
foreach($_POST['consumervar'] as $key => $value) {
              ^^^^^^^^^^^^^^^ 
```

如所写，您的代码提取了您尝试相乘的消费者变量值的数组。您不能在 php.ini 中“相乘”数组。

同样，请注意循环生成的 $key/$value 只是数组中存在的内容的副本。您没有更改数组的值。为此，你应该这样做

```
 $_POST['consumervar'][$key] = $value * 64; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:56:42.197

试试这个：

```
<?php
    $arr = isset($_POST['consumervar']) ? $_POST['consumervar'] : array();
    if(!is_array($arr)) die('some_error');

    foreach($arr as $key => $value) {
        $arr[$key] = $value*64;
    }
    print_r($arr); // this is for for debug (see array contents)
?> 
```

`$key`对应`input`于 HTML 元素中的“名称”。

# javascript - 这个 JS cookie 脚本有什么问题？

> ID：13436760
> 
> 赞同：0
> 
> 时间：2012-11-18T01:56:03.750
> 
> 标签：javascript, google-chrome, cookies, mobile-safari

我有一个没有语法错误的代码（Dreamweaver），但 Chrome JS 控制台说 ExistsCookie 是未定义的。该 cookie 位于该站点的 cookie 列表中，但该页面未重定向。我究竟做错了什么？注意：我知道人们可以关闭 cookie。

```
var cname = "voicevote"
var data ="1";

function CheckForCookie()
{
  if( ExistsCookie(cname) )
   {
     window.location.replace("cookie.htm")
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:59:13.087

最有可能的`ExistsCookie`是，您的脚本中没有包含一个功能 - 如果这是从其他网站上的教程中获取的，请查看那里 - 该页面上可能有一个您忘记包含在代码中的功能。

**编辑：**经过一番谷歌搜索，看起来这就是你需要的：

```
function ExistsCookie(name)
 {
  var aCookie = document.cookie.split("; ");
  for (var i=0; i < aCookie.length; i++)
  {
    var aCrumb = aCookie[i].split("=");
    if (name == aCrumb[0]) 
      return true;
  }

  return false;
} 
```

（[来源](http://answers.google.com/answers/threadview/id/183253.html)，这似乎与原始问题相匹配）

# javascript - 如何划分这个 jQuery 数据数组？

> ID：13436763
> 
> 赞同：1
> 
> 时间：2012-11-18T01:56:32.897
> 
> 标签：javascript, jquery

我有以下 javascript 数组：

```
[{
    "id": "115",
    "poster": "809",
    "post": "alfa"
}, {
    "id": "127",
    "poster": "808",
    "post": "beta"
}]​ 
```

为了将值提取到可用变量中，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:01:59.660

尝试这个，

```
var arr = [{"id":"115","poster":"809","post":"alfa"},{"id":"127","poster":"808","post":"beta"}];
for (i = 0; i < arr.length; i++)<br/>
    document.write("id: " + arr[i].id + " poster: " + arr[i].poster + " post: " + arr[i].post + "<br/>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T02:03:37.787

你所拥有的是一个包含两个元素的数组

```
data = [a,b] 
```

其中元素`a`和`b`都是对象，每个对象都具有三个字段（id、poster、post）。

回想一下，要访问数组中`i`您只需编写的位置的元素`data[i]`（这将访问`i`数组中的第 th 个元素，即对象之一）。

为了访问对象的字段，`a`您只需使用`a.fieldName`. 例如`a.id`将访问`id`object 的字段`a`。如果将它们结合起来，您可以`data[i].fieldName`访问特定对象的字段（例如`data[0].id`将返回“115”）。

附带说明一下，数组结构是可迭代的：

```
for(var i = 0;i<data.length;i++){
    id = data[i].id;
    post = data[i].post;
    poster = data[i].poster;

    document.write(id+" "+post+" "+poster+"<br/>");
} 
```

**更新**：关于[jsFiddle的示例](http://jsfiddle.net/78Hfg/1/)

# django - 使用 Cygwin 和 Django

> ID：13436769
> 
> 赞同：2
> 
> 时间：2012-11-18T01:57:19.233
> 
> 标签：django, cygwin

我开始越来越不喜欢 Windows，可能会尝试 Linux。很难使用 windows 来使用终端进行 web 开发。

我有两个问题

1.  我如何在 Cygwin 终端上*cd desktop*我看到人们很容易做到这一点，但我不断收到 -bash: cd desktop no such file directory 我猜这与 Cygwin 设置为家庭这一事实有关目录。
2.  我想使用 wget 下载[https://www.djangoproject.com/download/1.4.2/tarball/](https://www.djangoproject.com/download/1.4.2/tarball/)所以我做了

`wget https://www.djangoproject.com/download/1.4.2/tarball/`

我得到一个错误回复说

`ERROR: the certificate of 'django' is not trusted.`

`ERROR: the certificate of 'django' hasn't got a known issuer.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:03:58.423

对于第一个问题：

检查您当前的目录`pwd`并从那里导航。

对于第二个问题：

添加`--no-check-certificate`到您的 wget 命令

```
wget -Odjango.tar.gz --no-check-certificate https://www.djangoproject.com/download/1.4.2/tarball/ 
```

# java - 如何从java中的类创建大量实例

> ID：13436776
> 
> 赞同：1
> 
> 时间：2012-11-18T01:58:45.740
> 
> 标签：java

我对java很陌生，我不确定我需要使用什么来实现我的目标......或者我不知道如何在谷歌或stackoverflow上搜索它......

假设我有一个学生班级，它有一种方法来获取/设置他们的名字和专业。我还有另一个专业类，我可以创建一个实例并将属于该专业的学生添加到 ArrayList 中。

我有一个扫描仪，以便学生可以输入他们的详细信息......

我会在我的学生课上这样写，主要是：

```
 package exp;
import java.util.Scanner;
public class Student {

    private String name, major;
    private int id;

    public Student(){
    }
    public void setName(String name){
        this.name = name;
    }
    public String getName(){
        return name;
    }
    public void setMajor(String major){
        this.major = major;
    }
    public String getMajor(){
        return major;
    }    
    public static void main(String[] args) {

        Scanner scan = new Scanner(System.in);
        Student student1 = new Student();
        System.out.println("Enter name: ");
        student1.setName(scan.next());
        System.out.println("Enter major: ");
        student1.setMajor(scan.next());

        Major major1 = new Major();
        major1.addStudents(student1);
        System.out.println("List of students in major1: ");
        major1.getStudents(); 
    }
} 
```

在我的专业课上：

```
package exp;
import java.util.ArrayList;
public class Major {

private ArrayList<Student> students;

public Major(){
    students = new ArrayList<Student>();
}

public void addStudents(Student insertStudent){
    students.add(insertStudent);
}
public void getStudents(){
    for(Student student: students){
        System.out.println(student.getName());
    }
}

} 
```

我知道这很好用...学生填写他们的详细信息...但是如果有 1000 或未知数量的学生怎么办？我们如何创建新实例而不是在主“Student student2 = new Student();”中手动创建 等等......还有我们如何将学生的实例添加到他们所属的专业的实例中？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:01:57.090

您可以简单地将大部分 main 方法放在一个 while(true) 循环中，该循环将永远循环，直到用户输入一些标记值（“输入 0 退出”）。当他们输入“0”时，跳出循环：

```
if(scan.nextLine().equals("0")){ break; } 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T02:03:37.737

只需使用一个while循环

```
Scanner scan = new Scanner(System.in);
while(true)
{
        Student student = new Student();
        System.out.println("Enter name: ");
        student.setName(scan.next());
        System.out.println("Enter major: ");
        student.setMajor(scan.next());
        System.out.println("Do you wish to continue [Y/N] ?");
        if(scan.next().equalsIgnoreCase("N"))
        {
            break;
        }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T02:03:47.007

一旦`student1`添加到`ArrayList`，您可以删除它的引用，给它一个新的`Student`对象值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T02:09:33.073

首先，当您设置专业时，请使用 major1 变量，并将 Student 类的专业属性设为“专业”

从少校的声明开始

使用循环填充所有内容

```
Major major1 = new Major();

while(true) {
    Student temp = new Student();
    System.out.println("please enter your name...");
    temp.setName(scan.next());
    System.out.println("Please enter the name of your major.");
    Major majTemp = null;
    while(majTemp == null) majTemp = getMajorPerName(scan.next());
    temp.setMajor(majTemp);
    majTemp.addStudent(temp.getName());
} 
```

# javascript - 如何判断一个按钮是否被点击

> ID：13436778
> 
> 赞同：3
> 
> 时间：2012-11-18T01:59:13.473
> 
> 标签：javascript, html, button, if-statement

我有这个代码：

```
<script type="text/javascript">
function changestate()
{
    var StateTextBox = document.getElementById("State");
    var IgnoreTextBox = document.getElementById("Ignore");
    var PlayButton = document.getElementById("Play");
    if(document.getElementById("Play").onclick == true)
    {
        StateTextBox.value = "Happy";   
    }
}
</script>
<input TYPE="button" VALUE="Play with Pogo" id="Play" onClick="changestate();"/> 
```

我想知道何时单击该按钮，并在 if 语句中单击该 if 按钮。我想知道这一点，以便我可以更改文本框中的值。问题是，我不知道如何判断按钮何时被点击。如果你能帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T02:02:30.897

该`onclick`属性标识当用户单击此特定元素时应该发生什么。在您的情况下，您要求运行一个函数；当函数运行时，您可以放心，该按钮已被单击——毕竟这就是函数本身如何启动（除非您以其他方式调用它）。

您的代码有点混乱，但是假设您有两个按钮，并且您想知道单击了哪个按钮，并通过`stateTextBox`值通知用户：

```
(function () {
    // Enables stricter rules for JavaScript
    "use strict";
    // Reference two buttons, and a textbox
    var playButton = document.getElementById("play"),
        stateTextBox = document.getElementById("state"),
        ignoreButton = document.getElementById("ignore");
    // Function that changes the value of our stateTextBox
    function changeState(event) {
        stateTextBox.value = event.target.id + " was clicked";
    }
    // Event handlers for when we click on a button
    playButton.addEventListener("click", changeState, false);
    ignoreButton.addEventListener("click", changeState, false);
}()); 
```

[您可以在http://jsfiddle.net/Y53LA/](http://jsfiddle.net/Y53LA/)现场测试此代码。

请注意我们如何在`playButton`和上添加事件侦听器`ignoreButton`。这允许我们保持我们的 HTML 干净（不需要`onclick`属性）。`changeState`每当用户单击它们时，这两者都会触发该功能。

在`changeState`函数中，我们可以访问一个`event`对象。这为我们提供了有关发生的特定事件（在本例中为`click`事件）的一些详细信息。该对象的一部分是`target`，它是被单击的元素。我们可以从该元素中获取属性`id`，并将其放入`value`.`stateTextBox`

这是调整后的 HTML：

```
<input type="button" value="Play with Pogo" id="play" />
<input type="text" id="state" />
<input type="button" value="Ignore with Pogo" id="ignore" />​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-12T00:36:26.380

您可以通过使用标志（真或假）知道按钮是否被点击。

```
 var flag = false;

    window.addEventListener("load", changestate, false);

    function changestate() {

        var StateTextBox = document.getElementById("State");
        var PlayButton = document.getElementById("Play");

        PlayButton.addEventListener("click", function () {
            flag = true;
        })

        PlayButton.addEventListener("click", change)

        function change() {
            if (flag) {
                StateTextBox.value = "Happy";
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-16T19:26:26.543

多年后回顾这一点，您可以简单地执行以下操作：

```
<script type="text/javascript">
function changestate(action)
{
    var StateTextBox = document.getElementById("State");
    var IgnoreTextBox = document.getElementById("Ignore");
    var PlayButton = document.getElementById("Play");
    if(action == "Play")
    {
        StateTextBox.value = "Happy";   
    }
}
</script>
<input TYPE="button" VALUE="Play with Pogo" id="Play" onClick='changestate("Play");'/> 
```

# php - 为什么这个递归正则表达式不起作用？

> ID：13436783
> 
> 赞同：2
> 
> 时间：2012-11-18T02:00:02.283
> 
> 标签：php, regex

我正在尝试编写一个简单的正则表达式来匹配嵌套的大括号。所以如果我有这个文本：

```
{
  apple
  {second}
  banana
} 
```

`{}`然后我希望它匹配第一个和最后一个（包括第二对）之间的整个文本`{}`。这是我写的正则表达式：

```
/{ (?:.+?|(?R) ) }/six 
```

输出是：

```
{ apple {second} 
```

如您所见，第一个大括号正在匹配，而末尾的“香蕉”未匹配。这是我希望它返回的输出：

```
apple {second} banana 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:32:08.493

您要使用的模式是：

```
/{ (?:  (?R) | .+? )+ }/six 
```

使用您的正则表达式， the`.+?`将始终优先。PCRE 将匹配尽可能长的字符串，并且从不寻找替代方案。

只有使替代`(..)+`重复允许匹配在递归部分和 match-anything 占位符之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:13:35.393

这对你有用吗？

`\{([\s\S]*)\}`

# c# - 使用 Mono 的 mcs 使用 Tuple 编译代码

> ID：13436784
> 
> 赞同：3
> 
> 时间：2012-11-18T02:00:14.000
> 
> 标签：c#, .net, c#-4.0, mono, compiler-errors

我有一些使用`Tuple`s 的 C# 代码：

```
public class Test {
    static void Main() {
        Tuple<int, int> t = Tuple.Create(0, 1);
    }
} 
```

我尝试使用编译

```
mcs -debug+ -o Test.exe Test.cs 
```

但它给出了错误

```
Test.cs(3,9): error CS0246: The type or namespace name `Tuple' could not be found. Are you missing a using directive or an assembly reference?
Compilation failed: 1 error(s), 0 warnings 
```

我认为它可能试图针对缺少元组的旧版本 mscorlib 进行编译。查看手册页，您似乎使用 指定了版本`-sdk:4`，但这也不起作用：

```
$ mcs -sdk:4 Test.cs

Unhandled Exception: System.TypeLoadException: Type 'System.Dynamic.BinaryOperationBinder' not found in assembly 'System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 
```

（后跟堆栈跟踪）。

我在跑步：

```
$ mcs --version
Mono C# compiler version 2.10.8.1 
```

在 Ubuntu Precise 上。根据文档，Mono 从 2.8 版开始就支持 .NET 4.0，特别是[支持`System.Tuple`](https://stackoverflow.com/questions/5346453/mono-is-there-a-system-tuple).NET ，所以这不应该是问题。

如何编译使用`Tuple`s 的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:58:45.527

我*希望*它会失败，`mcs`但可以使用`dmcs`. 我刚刚在 Windows 上安装了 Mono 2.10.9，干净，这是我的代码结果（包括`using System;`顶部）：

```
c:\Users\Jon\Test>mcs Test.cs
    Test.cs(4,9): error CS0246: The type or namespace name `Tuple' could not be
    found. Are you missing a using directive or an assembly reference?
    Compilation failed: 1 error(s), 0 warnings

c:\Users\Jon\Test>dmcs Test.cs
    Test.cs(4,25): warning CS0219: The variable `t' is assigned but its value is
    never used
    Compilation succeeded - 1 warning(s) 
```

不同之处在于`dmcs`默认使用框架 v4 而`mcs`使用 v2。您`mcs`只需指定 v4 框架即可使用它：

```
mcs -sdk:4 Test.cs 
```

尝试一下，并仔细检查您在*使用*`dmcs`. 如果您看到它不是一个干净的编译但没有注意到它是不同的消息，我不会感到惊讶。

# knockout.js - 防止对象被 Knockout.js toJS/toJSON 序列化

> ID：13436785
> 
> 赞同：1
> 
> 时间：2012-11-18T02:00:24.863
> 
> 标签：knockout.js

我正在使用[Stripe](https://stripe.com/)，为了避免任何与 PCI 合规性相关的问题，我的表格中输入的信用卡数据绝不应该从浏览器传输到服务器。用户应使用 Knockout.js 将信用卡数据输入表单。

主要是出于兴趣（主要是为了让我更好地了解 knockout.js 的工作原理），我想提出一种方法来防止信用卡数据的序列化，方法是在尝试序列化数据时发生显式错误通常的 knockout.js 方式（即`ko.toJS`或`ko.toJSON`或`ko.mapping.*`等价物）。

为了实现这一点，我认为我可以做一些聪明的事情，比如（在 CoffeeScript 中）：

```
class NeverSerialize
  datums = ko.observable()
  blocker = ko.computed(
    read: () -> throw new Error("You shall not pass!")
    deferEvaluation: true
  ) 
```

并且当`ko.toJS/toJSON`调用或等效调用时，它将执行`blocker()`并且将调用该`read`函数并结束它。

这个想法几乎可行 - 正如您从[这个 jsFiddle](http://jsfiddle.net/bmh_ca/xYkWA/)中看到的那样。不幸的是，它只`read()`在第一次执行，但它从未被调用过。我认为这是因为没有可观察的`read`依赖，所以淘汰赛假定计算的值不会改变。

所以我想我对两件事感到好奇：

1.  从概念上讲，这是否是防止可观察对象被序列化的明智方法`ko.toJS/toJSON`？（或者，一般来说，只要`read`在计算的 observable 上调用 a ，就执行一个函数）

2.  如何在每次访问计算变量`read`时调用它的函数（即避免缓存它）？

我只是好奇如何使用 Knockout.js 来处理这种事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:56:55.827

与其做所有这些，只需定义一个`toJSON`函数，该函数将返回一个包含您想要序列化的属性的对象。即，创建您的视图模型的副本并从您不想序列化的副本中删除属性。

```
function ViewModel(model) {
    this.name = ko.observable(model.name);
    this.password = ko.observable(model.password);

    this.toJSON = function () {
        var copy = ko.toJS(this);
        delete copy.password;
        return copy;
    }
} 
```

* * *

如果你真的想这样做，我想你可以这样做。该`ko.toJS`函数遍历对象的所有属性并将值映射到新对象。因此，如果它不是可观察的，它将简单地复制它，否则它将调用（读取）它。您需要欺骗淘汰赛无条件地调用您的 observable，因此您可能总是在读取它时抛出错误。

你可以编写一个新的可观察层次结构，它是一个非缓存版本，但这是你可能不需要的很多东西。你只需要创建一个最终抛出错误的可观察对象。所以你可以做的是创建一个函数，它只会抛出一个错误并欺骗淘汰赛认为它是一个可观察的。幸运的是，knockout 通过一个特殊的属性看到它有一个作为原型的 observable 来检查这一点。

```
ko.errorObservable = function (thrower) {
    function errorObservable() {
        if (typeof thrower === 'function') {
            thrower();
        }
    }
    // trick knockout into thinking this is an observable so it will be invoked
    errorObservable[ko.observable.protoProperty] = ko.observable;
    return errorObservable;
}; 
```

然后只需将 observable 添加到您的视图模型中即可。

```
function ViewModel(model) {
    this.name = ko.observable(model.name);
    this.password = ko.observable(model.password);
    this._neverSerialize = ko.errorObservable(function () {
        throw new Error("Serialization of this model is prohibited.");
    });
} 
```

当然，这依赖于无证行为。淘汰赛决定这些事情的方式在未来可能会发生变化。使用风险自负。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-02T15:28:26.323

只是我在第一次阅读这篇文章后偶然发现的另一种选择：

如果`enumerable`将属性的选项设置为`false`它将不会被序列化。

例如，当创建一个对象时`Object.create()`：

```
const obj = Object.create(objProto, {
        name: { value: name, enumerable: true },
        items: { value: items, enumerable: false }
    }); 
```

在这种情况下`items`，不会出现在序列化字符串中`ko.toJSON()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-19T05:20:03.560

这是一篇关于`knockmeout`

它与 Jeff 的答案基本相同，但有更多细节。

[http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html](http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html)

# facebook - 使用 Facebook SDK 发布当前 URL 链接

> ID：13436786
> 
> 赞同：2
> 
> 时间：2012-11-18T02:00:35.470
> 
> 标签：facebook

我正在尝试创建一个脚本来验证 facebook 用户并在他们的墙上发布他们从我的网站打开的每个帖子。

我已经构建了身份验证部分。但是，当它自动在用户的墙上发帖时，我无法让它发布他们正在阅读的帖子的 URL，而只能发布静态 URL

这是我的手表.php

```
<?

include"func/ob_get_clean.php";
    require      'config.php';
    require_once 'inc/lib/facebook.php';
    require_once 'inc/fb.php';

$string = get_include_contents('func/db_info.php');
include("admin/settings".".php");

$surl = $_SERVER['HTTP_HOST'] ;

$getid=$_GET['v'];

if(is_numeric($getid)){
mysql_query("UPDATE videos SET views=views+1 WHERE id='$getid'");
} else {
include"func/404.php";
}
$vi=mysql_query("SELECT  * FROM videos WHERE id='$getid' LIMIT 1");
$v = mysql_fetch_object($vi);

    $vidID = "$v->videoid";
    $url = "http://gdata.youtube.com/feeds/api/videos/". $vidID;
    $doc = new DOMDocument;
    $doc->load($url);
    $title = $doc->getElementsByTagName("title")->item(0)->nodeValue;
    $des = $doc->getElementsByTagName("description")->item(0)->nodeValue;
    $key = $doc->getElementsByTagName("keywords")->item(0)->nodeValue;

//$token is the access token from the URL above
$post = array('access_token' => $token, 

'link' => 'www.mywebsitelink.com');

try{
$res = $facebook->api('/me/feed','POST',$post);
print_r($res);

} catch (Exception $e){

    echo $e->getMessage();
}

?>

<head>
<html xmlns:fb="http://ogp.me/ns/fb#">
<title><?=$title?></title>
<meta property="og:url" content="http://<?=$surl?>/watch.php?v=<?=$getid?>"/>    
<meta property="fb:app_id" content="<?=$fbappid?>"/>  
<meta property="og:title" content="<?=$title?>"/> 
<meta property="og:type" content="video" />
<meta property="og:image" content="http://img.youtube.com/vi/<?=$v->videoid?>/hqdefault.jpg"/>   
<meta property="og:description" content="<?=$des?>"/>
<meta property="og:site_name" content="YourVidz"/>

<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=UTF-8">
<META NAME="ROBOTS" CONTENT="INDEX"> 
<META NAME="AUTHOR" CONTENT="Menti">
<META HTTP-EQUIV="CONTENT-LANGUAGE" CONTENT="en-US">
<META NAME="COPYRIGHT" CONTENT="&copy; 2011 Galeria Shqip">
<META NAME="title" CONTENT="<?=$title?>">
<META NAME="DESCRIPTION" CONTENT="<?=$des?>">
<META NAME="KEYWORDS" CONTENT="<?=$key?>">

<link href="img/favicon.ico" rel="icon" type="image/x-icon" />
<link type="text/css" rel="stylesheet" href="css/watch.css" />

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

</head>
<body>
<div class="banner"><?=$banner?></script></div>

<a href="index.php"><img src="img/logo.png" border="0"></a>
<div align="center"><h3><?=$title?></h3><br>
<iframe src="vid.php?v=<?=$getid?>" height="378px" width="562px" frameborder="0"  scrolling="no"></iframe><br>

<table border="0" cellpadding="3" cellspace="0" width="562px"><tr>
<td width="400px"><?=$v->views?> Views</td>
<td>
<div class="addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_6"></a>
<a class="addthis_button_google"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
</td></tr></table>

<br>
<fb:comments href="http://<?=$surl?>/watch.php?v=<?=$getid?>" num_posts="5" width="562"  data-colorscheme="dark"></fb:comments>
</div>
<div style="display:none">    
<?=$online?>
</div>
</body> 
```

# java - Eclipse WindowBuilder，重叠 JPanel

> ID：13436787
> 
> 赞同：2
> 
> 时间：2012-11-18T02:00:38.450
> 
> 标签：java, swing, overlay, layout-manager, windowbuilder

我正在尝试重叠`JPanel`实例。将面板直接放在另一个面板上，位置和尺寸完全相同。每次我这样做时，它都会将另一个面板移动到另一侧或下方，前一个面板在另一个更大的面板内，并且里面有按钮。

我该怎么做？请记住，它使用的是 Window Builder 工具。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T04:08:15.070

你可能还想看看，在[这里](http://www.java2s.com/Code/Java/Swing-JFC/AtestoftheOverlayLayoutmanagerallowingexperimentation.htm)[`OverlayLayout`](http://download.oracle.com/javase/7/docs/api/javax/swing/OverlayLayout.html)见过。它不包含在传统[画廊](http://download.oracle.com/javase/tutorial/uiswing/layout/visual.html)中，但可能会引起人们的兴趣。

![叠加样本](../Images/e9e7ba447ad9f5f638ef2bd54c14fb2a.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.OverlayLayout;

/** @see http://stackoverflow.com/a/13437388/230513 */
public class OverlaySample {

    public static void main(String args[]) {
        JFrame frame = new JFrame("Overlay Sample");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        panel.setLayout(new OverlayLayout(panel));
        panel.add(create(1, "One", Color.gray.brighter()));
        panel.add(create(2, "Two", Color.gray));
        panel.add(create(3, "Three", Color.gray.darker()));
        frame.add(panel, BorderLayout.CENTER);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    private static JLabel create(final int index, String name, Color color) {
        JLabel label = new JLabel(name) {
            private static final int N = 64;

            @Override
            public boolean isOpaque() {
                return true;
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(index * N, index * N);
            }

            @Override
            public Dimension getMaximumSize() {
                return new Dimension(index * N, index * N);
            }
        };
        label.setHorizontalAlignment(JLabel.RIGHT);
        label.setVerticalAlignment(JLabel.BOTTOM);
        label.setBackground(color);
        label.setAlignmentX(0.0f);
        label.setAlignmentY(0.0f);
        return label;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T02:09:32.277

> I'm attempting to overlap JPanels

Use a [`JLayeredPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html) (image below from the linked tutorial).

![JLayeredPane](../Images/fe8fa20d27d2bf506cebd86969428fd9.png)

> Put a JPanel directly on another,

..or a [`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html) as shown [here](https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005)..

![](../Images/3e84734e45f9ce4d8da39f4e7796ef42.png) ![](../Images/108a81166d0c089a8de60cdb6ed2908a.png)

..depending on which of those two you mean, since I understand them as quite different effects.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T02:09:07.087

使用 a `JDesktopPane`（或其超类`JLayeredPane`）作为其内容，添加到窗格中。

有关[示例](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html#eg)，请参见[*如何使用内部框架*](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)。

![内部框架演示](../Images/c433f105f83ce2a25af2703a74def74b.png)

* * *

在这里，您可以看到一种让组件叠加并在光标停留在其上时弹出的好方法：

```
import javax.swing.*;

import java.awt.*;
import java.awt.event.*;

public class ShiftedStackPanel extends JPanel implements MouseListener,
                                                            ActionListener {

    private static final long serialVersionUID = 1988454751139668485L;

    private int layer;
    private JDesktopPane desktopPane;
    private Timer timer;
    private Component currentComponent;
    private int layerOfCurrent;
    private int shiftDivision;

    public ShiftedStackPanel() {
        this(4);
    }

    public ShiftedStackPanel(int shift) {
        shiftDivision = shift;

        setLayout(new BorderLayout(0, 0));

        desktopPane = new JDesktopPane();
        desktopPane.setBackground(SystemColor.window);
        super.add(desktopPane);
        timer = new Timer(1000, this);
        timer.setRepeats(false);

    }

    public Component add(Component c) {
        Dimension dim = c.getPreferredSize();
        c.setBounds(
                (desktopPane.getComponentCount() * (dim.width / shiftDivision)),
                0, dim.width, dim.height);
        desktopPane.add(c, new Integer(++layer));
        c.addMouseListener(this);
        return c;
    }

    public void remove(Component c) {
        throw new IllegalArgumentException(
                "Removal of component, not yet supported.");
        // FIXME: allow removal, and shift all latter comps, to left
    }

    public void removeAll() {
        desktopPane.removeAll();
    }

    public static void main(String[] args) {
        JFrame f = new JFrame("JFrame Wrapper");
        ShiftedStackPanel p;
        f.setContentPane(p = new ShiftedStackPanel(4));
        p.add(new JTextField("ABCDEFGHI"));
        p.add(new JTextField("DEFGHIJKL"));
        p.add(new JTextField("GHIJKLMNO"));
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setVisible(true);
        f.setMinimumSize(new Dimension(400, 200));
        f.setLocationRelativeTo(null);
    }

    @Override
    public void mouseClicked(MouseEvent evt) {
        if (currentComponent != null) {
            Component c = (Component) evt.getSource();
            currentComponent = c;
            layerOfCurrent = desktopPane.getLayer(c);
            desktopPane.remove(c);
            desktopPane.add(c, new Integer(100));
        }
    }

    @Override
    public void mouseEntered(MouseEvent evt) {
        timer.start();
        Component c = (Component) evt.getSource();
        currentComponent = c;
        layerOfCurrent = desktopPane.getLayer(c);
    }

    @Override
    public void mouseExited(MouseEvent evt) {
        if ((currentComponent != null) && currentComponent == evt.getSource()) {
            desktopPane.remove(currentComponent);
            desktopPane.add(currentComponent, new Integer(layerOfCurrent));
            currentComponent = null;
            timer.stop();
        }
    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void actionPerformed(ActionEvent arg0) {

        desktopPane.remove(currentComponent);
        desktopPane.add(currentComponent, new Integer(100));
    }
} 
```

在使用需要焦点的组件时仍然存在一些问题，但应该可以很好地与`JLabel`, 和`JPanel`.

# xcode - 标签栏控制器切换视图 - 在切换视图之前检查先决条件

> ID：13436790
> 
> 赞同：1
> 
> 时间：2012-11-18T02:01:04.747
> 
> 标签：xcode, uitabbarcontroller

我在标签栏控制器上有五个标签。默认情况下显示第一个视图。如果不满足先决条件，有没有办法阻止用户点击其他选项卡？

目前，在我的应用程序中，我检查前提条件，并显示警报 - 但是，在切换视图之后。

山姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:42:01.980

使用`UITabBarControllerDelegate`方法：

```
-(BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    if (_precondition){
        return YES;
    } else {
        [[[UIAlertView alloc] initWithTitle:@"Hey!" message:@"Learn to meet your preconditions!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Sorry Chum", nil] show];
        return NO;
    }
} 
```

# android - Spring for Android - 自定义 Rest 模板

> ID：13436796
> 
> 赞同：2
> 
> 时间：2012-11-18T02:02:00.073
> 
> 标签：android, spring, jackson

我正在使用 Spring for Android 并通过以下方式提取 JSON 数据：

**课程活动.java**

```
private void getCourses()
{
  RestTemplate restTemplate = new RestTemplate();
  restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
  String url = "http://192.168.1.74:3000/andy/courses.json";
  Course[] coursesArray = restTemplate.getForObject(url, Course[].class);

  ...
} 
```

**课程.java**

```
@JsonIgnoreProperties(ignoreUnknown = true)
public class Course implements Parcelable, DBObject
{
    @JsonProperty
    private String number = null;
    @JsonProperty
    private String title = null;
    @JsonProperty
    private int school_id = -1;
    @JsonProperty
    private String department = null;

    ...
} 
```

JSON 调用返回这种类型的数据：

```
[{"id":1,"number":"CE-490","title":"Senior Design","school_id":1,"department":"Computer Engineering"},{"id":2,"number":"CE-491","title":"Introduction to Mobile App Development","school_id":1,"department":"Computer Engineering"}] 
```

现在您可以看到 JSON 数据键直接映射到我的课程属性名称。

如果我想有不同的名字怎么办？具体来说，如果我的 JSON 返回诸如“notify_on_follow”之类的键，我如何使用 Spring for Android 将其映射到不带下划线的“notifyOnFollow”？或者也许将“active”更改为“isActive”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:40:59.440

我找不到文档，但我很确定这会起作用：

```
@JsonProperty("notify_on_follow")
private SomeType notifyOnFollow; 
```

# symfony - FOSFacebookBundle 未将用户添加到数据库

> ID：13436797
> 
> 赞同：0
> 
> 时间：2012-11-18T02:02:03.093
> 
> 标签：symfony

我已成功配置 FOSUserBundle 以连接到网站的管理部分，效果很好。

我们希望公共用户只能通过 Facebook 登录网站，所以我还安装了 FOSFacebookBundle，它可以工作。有点。我可以登录、验证、访问用户的个人资料页面和注销；所有这些都按预期工作。

但是，当用户通过 Facebook 登录时，不会将该用户添加到数据库中。我误认为这是文档底部的“自定义用户提供程序”（[https://github.com/FriendsOfSymfony/FOSFacebookBundle](https://github.com/FriendsOfSymfony/FOSFacebookBundle)）应该做的吗？

基本上，当发生 Facebook 登录时，会添加用户（如有必要），然后通过 FOSUserBundle 获取。

我一次又一次地关注文档，在此处阅读有关 SO 的问题，但无法弄清楚（未）发生了什么。

任何人都知道代码中的什么地方可能导致登录操作不使用 Facebook 数据更新数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:07:55.047

在 security.yml 中：

```
 providers:
        chain_provider:
            chain:
                providers: [my_fos_facebook_provider, fos_userbundle]
        my_fos_facebook_provider:
            id: my.facebook.user
        fos_userbundle:
            id: fos_user.user_manager
    firewalls:
        admin:
            pattern:      /admin(.*)
            form_login:
                provider:       fos_userbundle
                login_path:     /admin/login
                use_forward:    false
                check_path:     /admin/login_check
                failure_path:   null
            logout:
                path:           /admin/logout
            anonymous:    true
        public:
            # since anonymous is allowed users will not be forced to login
            pattern:   ^/.*
            fos_facebook:
                provider: my_fos_facebook_provider
                app_url: "http://www.facebook.com/apps/application.php?id=your_app_id"
                server_url: "http://localhost/facebookApp/"
                login_path: /
                check_path: /login_check_fb
                default_target_path: /moi
            anonymous: true
            logout:
                handlers: ["fos_facebook.logout_handler"] 
```

这个想法是通过运行磨坊用户名和密码访问管理员，普通用户通过 Facebook 登录。

现在，关键部分是定义多个提供者（我有），但也许最重要的是在每个防火墙中指定“提供者”。fos_userbundle 用于管理员，my_fos_facebook_provider 用于公共

# php - 如何使用 php 从 html 中隐藏源代码

> ID：13436798
> 
> 赞同：-4
> 
> 时间：2012-11-18T02:02:21.877
> 
> 标签：php

好的，所以我正在 Minecraft 区域创建一个网站。这个领域竞争非常激烈！因此，当我是一流的 Minecraft 服务器/图形人员并且我想出售我的知识时，我不希望人们窃取我的资源。我知道如果你使用 PHP 并查看源代码，只会弹出一个空白的源代码页面。请不要告诉我我需要用 PHP 对我的页面进行编码，因为老实说，我对此知之甚少。我试着做

```
<?php
$page = file_get_contents('http://mysite.com/websitecode.html');
echo $page
?> 
```

但是每当我单击 CTRL+U 时，它仍然显示源代码。我真的不希望别人偷我的东西，因为那样别人会以更便宜的价格来做，这要了我的命。请帮忙，如果他们有任何其他方式我可以禁止任何人看到源代码，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:04:59.620

你无法阻止任何需要输出到浏览器的东西被用户窃取。你能做的最好的就是混淆它，但任何有决心的人都可以轻松地绕过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T02:32:54.020

正如其他人指出的那样，您无法隐藏提供给浏览器的 HTML 源代码。

实现接近您想要做的事情的一种方法是仅使用一个 AJAX 调用来提供页面，以从您的 php 脚本中获取源代码。

如果你真的想让事情变得复杂，你的 AJAX 调用可以返回一个加密的 html 版本，你将使用一些混淆的 javascript 来解密它。

当然，这不是万无一失的，因为任何用户都可以访问您的 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T02:04:11.173

你不能隐藏源代码，至少不是你的意思，而是使用巧妙的方式隐藏你的 css 文件，这将使它有点，如果一个人有经验的话，获取内容会更难一些

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T02:05:32.213

你是什​​么意思隐藏html？你可以编码它，但你不能隐藏它。如果没有 html，将呈现什么页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T02:06:18.420

没有办法阻止用户看到您的 HTML 代码。

当浏览器从服务器请求您的页面时，服务器会将 HTML 代码发送到浏览器，浏览器会计算出如何在页面上显示所有内容。因此，浏览器将始终接收 HTML 代码 - 因此，由浏览器来阻止用户看到该代码，而不是您。并且考虑到所有主流浏览器都允许查看源代码，那么您就不走运了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T02:06:19.590

可悲的是，您将无法向用户隐藏 html 页面代码，我前段时间也想知道这一点。您的服务器端代码是安全的，但将为 DOM 显示任何 HTML 格式

# android - 等待 ImageView 中的一个动画停止以启动另一个动画？

> ID：13436802
> 
> 赞同：0
> 
> 时间：2012-11-18T02:02:47.940
> 
> 标签：android, animation, oncreate

```
 public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.genie_out);

        genie = (ImageView) findViewById(R.id.genieout);
        startService(new Intent(this, MyService2.class));
        SceneAnimation come = new SceneAnimation(genie, comingout,     durationcomingout);
        SceneAnimation circled = new SceneAnimation(genie, circle,durationcircle);

       come.play(1);

       circled.play(1);

    } 
```

有一个 ImageView 并且它占据了整个屏幕，我想知道如何等到 come.play(1) 完成播放 circle.play(1)，就像这个圆圈先播放然后来播放其余部分因为来是一个较长的动画，我想知道这一点也是因为我有更多的服务我也想开始和停止，谢谢你的时间

```
class SceneAnimation {
public int x;
public ImageView mImageView;
public int[] mFrameRess;
public int[] mDurations;
public int mDuration;

public int mLastFrameNo;
public long mBreakDelay;

 public SceneAnimation(ImageView pImageView, int[] pFrameRess, int[] pDurations)
 {

    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDurations = pDurations;
    mLastFrameNo = pFrameRess.length - 1;

    play(1);
}

public SceneAnimation(ImageView pImageView, int[] pFrameRess, int pDuration){
    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDuration = pDuration;
    mLastFrameNo = pFrameRess.length - 1;

    mImageView.setImageResource(mFrameRess[0]);

    playConstant(1);
}

public SceneAnimation(ImageView pImageView, int[] pFrameRess, int pDuration, long pBreakDelay){            
    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDuration = pDuration;
    mLastFrameNo = pFrameRess.length - 1;
    mBreakDelay = pBreakDelay;

    mImageView.setImageResource(mFrameRess[0]);
    playConstant(1);
}

   public void play(final int pFrameNo)
{

    mImageView.postDelayed(new Runnable(){
        public void run() {

            mImageView.setImageResource(mFrameRess[pFrameNo]);
            if(pFrameNo == mLastFrameNo)
                {
                return;}
            else
                play(pFrameNo + 1);
        }
    }, mDurations[pFrameNo]);
}

public void playConstant(final int pFrameNo){
    mImageView.postDelayed(new Runnable(){
        public void run() {                    
            mImageView.setImageResource(mFrameRess[pFrameNo]);

            if(pFrameNo == mLastFrameNo)
                playConstant(0);
            else
                playConstant(pFrameNo + 1);
        }
    }, pFrameNo==mLastFrameNo && mBreakDelay>0 ? mBreakDelay : mDuration);
}

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:42:46.180

这是实现自己的 AnimationListener 的一种方法

```
package com.example.intentfiletersample;

import android.widget.ImageView;

class SceneAnimation {
public int x;
public ImageView mImageView;
public int[] mFrameRess;
public int[] mDurations;
public int mDuration;

public int mLastFrameNo;
public long mBreakDelay;

private AnimationListener mAnimationListener;

public SceneAnimation( ImageView pImageView, int[] pFrameRess, int[] pDurations ) {

    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDurations = pDurations;
    mLastFrameNo = pFrameRess.length - 1;

    play( 1 );
}

public SceneAnimation( ImageView pImageView, int[] pFrameRess, int pDuration ) {
    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDuration = pDuration;
    mLastFrameNo = pFrameRess.length - 1;

    mImageView.setImageResource( mFrameRess[0] );

    playConstant( 1 );
}

public SceneAnimation( ImageView pImageView, int[] pFrameRess, int pDuration, long pBreakDelay ) {
    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDuration = pDuration;
    mLastFrameNo = pFrameRess.length - 1;
    mBreakDelay = pBreakDelay;

    mImageView.setImageResource( mFrameRess[0] );
    playConstant( 1 );
}

public void setAnimationListener(AnimationListener listener){
    this.mAnimationListener = listener;
}

public void play( final int pFrameNo ) {

    mImageView.postDelayed( new Runnable() {
        public void run() {

            mImageView.setImageResource( mFrameRess[pFrameNo] );
            if ( pFrameNo == mLastFrameNo ) {
                return;
            } else
                play( pFrameNo + 1 );

            // Callback when animation ends.
            if( mAnimationListener != null ){
                mAnimationListener.onAnimationEnd();
            }
        }
    }, mDurations[pFrameNo] );
}

public void playConstant( final int pFrameNo ) {
    mImageView.postDelayed( new Runnable() {
        public void run() {
            mImageView.setImageResource( mFrameRess[pFrameNo] );

            if ( pFrameNo == mLastFrameNo )
                playConstant( 0 );
            else
                playConstant( pFrameNo + 1 );

            // Callback when animation ends.
            if( mAnimationListener != null ){
                mAnimationListener.onAnimationEnd();
            }
        }
    }, pFrameNo == mLastFrameNo && mBreakDelay > 0 ? mBreakDelay : mDuration );
}

public static interface AnimationListener {
    public void onAnimationEnd();
    // You can add onAnimationStart(), and do the same thing like onAnimationEnd.
}
}; 
```

始终建议您先浏览 Android sdk 附带的 Animation API，然后再实施自己的，看看是否适合您。

希望有帮助。

# jquery - 使用 jQuery 更改微数据 itemprop 名称值？

> ID：13436803
> 
> 赞同：2
> 
> 时间：2012-11-18T02:02:49.847
> 
> 标签：jquery, google-plus

这是失败的代码：

```
var newName= "jill"
$("h1").attr('itemprop','name').html(newName); 
```

这是微数据：

```
<body itemscope itemtype="http://schema.org/Blog">

<div style="display:none;"> 
<h1 itemprop="name">jack</h1>
<img itemprop="image" src="http://somehewhere.com/something.png" />
<p itemprop="description">some text</p>

</div> 
```

我需要将“jack”的值更改为“jill”。

我将其更改为与 G+ 一起使用，因为“jill”的 var 值（尽管在此示例中是静态的）会因为它是动态的而改变。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:05:54.687

如 Adil 所示，您可以使用 jQuery 更改值，但这并不能解决您的问题。Google+ 会拍摄 HTML 的快照，以决定如何在您的 javascript 运行之前或根本不执行 javascript 之前创建代码段。

您最好使用服务器端语言使页面动态化。

也许对您的情况有更多解释，我们可以建议另一种方法或解决方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T02:07:18.087

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/QR7vh/)**

```
$("h1[itemprop=name]").html(newName) 
```

# html - IE 和 Firefox 中的定位下拉菜单

> ID：13436810
> 
> 赞同：0
> 
> 时间：2012-11-18T02:04:03.110
> 
> 标签：html, css

我正在尝试定位此下拉菜单。它仅适用于 Chrome，子菜单显示在悬停链接的正下方。但在 IE 和 firefox 中，它们都出现在左下角的同一个位置。

[http://jsfiddle.net/3HZGB/2/](http://jsfiddle.net/3HZGB/2/)

CSS

```
 #menu {
    float:right;
    list-style-type: none;
    padding: 0px;
    margin: 36px 130px 0 0;
}

#menu a {
    height:50px;
    font-size:18px;
    font-weight:bold;
    color:black;
    text-decoration:none;
}

#menu a:hover {
    color:#FFF;
    border:#002d56 6px solid;
    background-color:#002d56;
    opacity:0.8;

}

#menu li {
    position:relative;
    display:inline;
    padding:24px 5px 10px 5px;
    margin-left:40px;   
}

#menu li:hover > ul
{
        display: block;
}

#menu li:hover ul  {  
     display: block;
}  

#menu ul li:first-child a:after /*triangulo*/
{
    content: '';
    position: absolute;
    left: 10px;
    top: -15px;
    z-index:99999;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 8px solid #002d56;

}

/*submenu*/

#menu ul { 
    padding:5px 30px 5px 10px;
    margin-top:12px;
    position:absolute;  
    display:none;
    z-index: 99999;
    float:left;
    /*visual*/
    background-color:#002d56;
    box-shadow: 4px 4px 10px #999;
    border:#002d56 2px solid;
    /*opacity:0.9;*/
    border-radius:10px;
    /*gradiente*/
    background-image: linear-gradient(bottom, rgb(0,72,135) 39%, rgb(0,43,84) 66%);
    background-image: -o-linear-gradient(bottom, rgb(0,72,135) 39%, rgb(0,43,84) 66%);
    background-image: -moz-linear-gradient(bottom, rgb(0,72,135) 39%, rgb(0,43,84) 66%);
    background-image: -webkit-linear-gradient(bottom, rgb(0,72,135) 39%, rgb(0,43,84) 66%);
    background-image: -ms-linear-gradient(bottom, rgb(0,72,135) 39%, rgb(0,43,84) 66%);
    background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.39, rgb(0,72,135)),
    color-stop(0.66, rgb(0,43,84))
);

}  

#menu ul a
{
    color:#FFF;
    font-size:14px;
    font-weight:400;
    padding: 10px;
    height: auto;
    line-height: 1;
    display: block;
    white-space: nowrap;
    float: none;
    text-transform: none;
}
#menu ul a:hover {
    background-color:transparent;
    border:none;
    display: block;
    font-size:14px;
    font-weight:400;
    text-decoration:underline;
    opacity:1;
}

#menu ul li
{
    float: none;
    margin: 0;
    padding: 0;
    display: block;
   }

.form
{
    color:#FFF;
    font-size:14px;
    font-weight:400;
    padding: 10px;
    height: auto;
    line-height: 1;
    display: block;
    white-space: nowrap;
    float: none;
    text-transform: none;
}

.form li:first-child/*triangulo*/
{
    content: '';
    position: absolute;
    left: 10px;
    top: -15px;
    z-index:99999;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 8px solid #002d56;

}

.forminput {
    margin:8px 0;
    width:100px;
    border:2px solid #919293;
    border-radius:10px; 
    padding:5px;
    /*gradiente*/
    background: rgb(255,255,255); /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjcwJSIgc3RvcC1jb2xvcj0iI2Q2ZDZkNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9Ijg5JSIgc3RvcC1jb2xvcj0iI2JjYmNiYyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNhM2EzYTMiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(214,214,214,1) 70%, rgba(188,188,188,1) 89%, rgba(163,163,163,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(70%,rgba(214,214,214,1)), color-stop(89%,rgba(188,188,188,1)), color-stop(100%,rgba(163,163,163,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(214,214,214,1) 70%,rgba(188,188,188,1) 89%,rgba(163,163,163,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(214,214,214,1) 70%,rgba(188,188,188,1) 89%,rgba(163,163,163,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(214,214,214,1) 70%,rgba(188,188,188,1) 89%,rgba(163,163,163,1) 100%); /* IE10+ */
background: linear-gradient(top, rgba(255,255,255,1) 0%,rgba(214,214,214,1) 70%,rgba(188,188,188,1) 89%,rgba(163,163,163,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#a3a3a3',GradientType=0 ); /* IE6-8 */    
}

*:focus { outline:none; }

.enviar {
    float:right;
    width:50px;
    color:#fff;
    border:2px solid #002d56;
    border-radius:10px; 
    padding:5px;
    /*gradients*/
background: rgb(30,87,153); /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzFlNTc5OSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzI5ODlkOCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUxJSIgc3RvcC1jb2xvcj0iIzIwN2NjYSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
background: -moz-linear-gradient(top, rgba(30,87,153,1) 0%, rgba(41,137,216,1) 50%, rgba(32,124,202,1) 51%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(30,87,153,1)), color-stop(50%,rgba(41,137,216,1)), color-stop(51%,rgba(32,124,202,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, rgba(30,87,153,1) 0%,rgba(41,137,216,1) 50%,rgba(32,124,202,1) 51%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, rgba(30,87,153,1) 0%,rgba(41,137,216,1) 50%,rgba(32,124,202,1) 51%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, rgba(30,87,153,1) 0%,rgba(41,137,216,1) 50%,rgba(32,124,202,1) 51%); /* IE10+ */
background: linear-gradient(top, rgba(30,87,153,1) 0%,rgba(41,137,216,1) 50%,rgba(32,124,202,1) 51%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#207cca',GradientType=0 ); /* IE6-8 */
}

.login {
    margin:0 10px 0 0;  
}

.perdadesenha a {
    font-size:9px;
}

/**/ 
```

HTML

```
<ul id="menu">
<li><a href="#">EMPRESA</a>
<ul><li><a href="visaogeral.html">Visão geral</a></li>
<li><a href="historia.html">História</a></li>
<li><a href="escritorios.html">Escritórios</a></li>
<li><a href="trabalhe.html">Trabalhe conosco</a></li>
</ul>
</li>
<li><a href="#l">SERVIÇOS</a>
<ul>
<li><a href="despacho.html">Despacho</a></li>
<li><a href="transporte_rodoviario.html">Transporte Rodoviário</a></li>
<li><a href="logistica_de_liquidos.html">Logística de Líquidos</a></li>
<li><a href="frete_internacional.html">Frete Internacional</a></li>
<li><a href="licencas.html">Licenças Polícia/Exército</a></li>
</ul>
</li>    
<li><a href="contato.html">CONTATO</a></li>
<li><a href="#">LOGIN</a>
<ul class="form"><form>
<li></li>
<li><label class="login">Login</label><input class="forminput" type="text" name="firstname" /><br />
<label>Senha</label> <input class="forminput" type="password" name="firstname" /></li> 
<li><input  class="enviar" type="submit" value="Entrar" /></li>
</form>
<a href="#"><font size="-6">Esqueceu a senha?</font></a>
</ul>
</li>    
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:23:17.007

你需要更新你的CSS

在“#menu ul”中删除以下属性

```
margin-top:12px;
float:left; 
```

并添加

```
top:56px;
left:0; 
```

这是更新的[jsFiddle 文件](http://jsfiddle.net/3HZGB/4/)。

这将解决下拉问题。

# video.js - video.js中视频帧的API方法

> ID：13436811
> 
> 赞同：1
> 
> 时间：2012-11-18T02:04:03.273
> 
> 标签：video.js

有没有办法获取当前帧号和寻找给定帧的方法？这将类似于`currentTime`方法

# ios - NSUserDefault 更新公式

> ID：13436817
> 
> 赞同：-3
> 
> 时间：2012-11-18T02:04:52.367
> 
> 标签：ios, xcode, ipad, nsuserdefaults, formula

对如何通过 NSUserDefault 更新我的公式有疑问。所以我有两个文本字段需要让我的公式保持最新。所以用户在那里输入数字（值）然后这些数字需要进入我的公式，但公式只显示距离值:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:19:47.710

我对您的代码进行了一些更改。这是我的`.h`文件和`.m`文件。试试这个。现在我也不明白你想找出什么，但是这段代码给我的值不是 a `nan`。在编写代码时，不要忘记以小写字母开头变量名，这是一种标准方式。`self`如果您将变量设置为属性，也可以使用。

`ViewController.h`

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

@interface ViewController : UIViewController
<UITextFieldDelegate,CLLocationManagerDelegate>{
    IBOutlet MKMapView *mapView;
    IBOutlet UITextField *textGas;
    IBOutlet UITextField *textMoney;
    IBOutlet UITextField *textTotal;
    IBOutlet UITextField *textDistance;
}

@property (nonatomic, retain) CLLocationManager *locationManager;
@end 
```

`ViewController.m`

```
 #import "ViewController.h"

    @interface ViewController ()
    {
        double totalDistance;
        float gas,money;
    }
    @end

    @implementation ViewController
    @synthesize locationManager;

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        self.locationManager = [[CLLocationManager alloc] init];
        self.locationManager.delegate = self;
        self.locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
        [self.locationManager startUpdatingLocation];

//set default value for Gas
        if (![[NSUserDefaults standardUserDefaults] objectForKey:@"Gas"]) {
            [[NSUserDefaults standardUserDefaults] setObject:@"1.0" forKey:@"Gas"];
            [[NSUserDefaults standardUserDefaults] synchronize];
        }

//set default value for Money
        if (![[NSUserDefaults standardUserDefaults] objectForKey:@"Money"]) {
            [[NSUserDefaults standardUserDefaults] setObject:@"1.0" forKey:@"Money"];
            [[NSUserDefaults standardUserDefaults] synchronize];
        }

        gas = [[[NSUserDefaults standardUserDefaults] objectForKey:@"Gas"] floatValue];
        money =  [[[NSUserDefaults standardUserDefaults] objectForKey:@"Money"] floatValue];

        textGas.text = [NSString stringWithFormat:@"%.1f",gas];
        textMoney.text = [NSString stringWithFormat:@"%.1f",money];

        // Do any additional setup after loading the view, typically from a nib.
    }

    -(void)viewDidAppear:(BOOL)animated
    {
        [super viewDidAppear:animated];
        if ([[NSUserDefaults standardUserDefaults] objectForKey:@"Gas"])
            textGas.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"Gas"];
        else
            textGas.text = @"0";//set default value

        if ([[NSUserDefaults standardUserDefaults] objectForKey:@"Money"])
            textMoney.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"Money"];
        else
            textMoney.text = @"0.01";//set default value

    }

    -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
        [textMoney resignFirstResponder];
        [textGas resignFirstResponder];
    }

    - (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
    {
        if (buttonIndex == 1)
        {
            exit(0);
        }
        if (buttonIndex == 0) {
            [self.locationManager stopUpdatingLocation];
            mapView.showsUserLocation = NO;
        }

    }
    #pragma mark - UITextFieldDelegate
    -(void)textFieldDidEndEditing:(UITextField *)textField
    {

        if ([textField.text intValue] == 0) {
            textGas.text = [NSString stringWithFormat:@"%.1f",gas];
            textMoney.text = [NSString stringWithFormat:@"%.1f",money];
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""
                                                            message:@"Value cann't be zero."
                                                           delegate:self
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];
            alert = nil;
            return;
        }

        if (![textField.text length]) {
            textGas.text = [NSString stringWithFormat:@"%.1f",gas];
            textMoney.text = [NSString stringWithFormat:@"%.1f",money];
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""
                                                            message:@"Value cann't be empty."
                                                           delegate:self
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];
            alert = nil;
            return;
        }

        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        if (textField == textGas) {
            [defaults setObject:textGas.text forKey:@"Gas"];
            gas = [textGas.text floatValue];
        }
        else if (textField == textMoney)
        {
            [defaults setObject:textMoney.text forKey:@"Money"];
            money = [textMoney.text floatValue];
        }
        [defaults synchronize];
    }

    - (BOOL) textFieldShouldReturn:(UITextField *)textField
    {
        [textField resignFirstResponder];
        return YES;
    }

    #pragma mark -
    #pragma mark CLLocationManagerDelegate Methods

    - (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation
               fromLocation:(CLLocation *)oldLocation {
        {
            // Zoom to the current user location.
            MKCoordinateRegion userLocation = MKCoordinateRegionMakeWithDistance(newLocation.coordinate, 1200.0, 1200.0);
            [mapView setRegion:userLocation animated:NO];
            mapView.showsUserLocation = YES;
        }

        if (!oldLocation)
            totalDistance = 0.0;
        else
            totalDistance += [newLocation distanceFromLocation:oldLocation];

        double distance = totalDistance*0.00062137119;
        textTotal.text = [[ NSString alloc] initWithFormat:@"$%.2f", distance/gas*money];
        textDistance.text = [NSString stringWithFormat:@"%.2f Miles", distance];

    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }
    @end 
```

模拟器中的结果是 ![结果模拟器](../Images/834c552bca270f00e684d37055740cf7.png)

不要忘记连接`delegates`和`IBOutlet`从界面生成器。![这是检查委托连接的方法](../Images/46eace17bb7dbd37bb04c2985ddfe625.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:24:17.020

我认为问题可能出在这里：

```
int gas = [[NSUserDefaults standardUserDefaults] objectForKey:@"Gas"];
int money =  [[NSUserDefaults standardUserDefaults] objectForKey:@"Money"]; 
```

您是`NSUserDefaults`直接从您`textField.text`的. 它被存储为可能。您应该将其存储和阅读为.`0.00``int``NSString``NSNumber`

走进：

```
NSNumber *foo = [NSNumber numberWithInteger:TextGas.text.integerValue];
NSNumber *bar = [NSNumber numberWithDouble:TextMoney.text.doubleValue];    
[defaults setObject:foo forKey:@"Gas"];
[defaults setObject:bar forKey:@"Money"]; 
```

出来：

```
NSNumber *gas = [[NSUserDefaults standardUserDefaults] objectForKey:@"Gas"];
NSNumber *money =  [[NSUserDefaults standardUserDefaults] objectForKey:@"Money"];
gas.integerValue;
money.doubleValue; 
```

# c - 这是在 C 中创建数组的有效方法吗？

> ID：13436821
> 
> 赞同：3
> 
> 时间：2012-11-18T02:05:22.167
> 
> 标签：c, arrays, multithreading

```
int threads = 5;

pthread_t * thread = malloc(sizeof(pthread_t)*threads);

            for (i = 0; i < threads; i++){
                int ret = pthread_create(&thread[i], NULL, &foobar_function, NULL);} 
```

我现在无法运行代码。但是我将其视为在线示例的一部分，并且对完全没有方括号感到有些困惑。我对C不太好。

那么这对创建线程数组有用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:09:28.960

Yes.

`thread` is pointing at a block of memory allocated by `malloc` that is large enough to hold `threads` `pthread_t` objects.

An array of `threads` `pthread_t` objects can be represented in exactly this way.

# keyboard-shortcuts - 禁用 MacVim 键盘快捷键

> ID：13436823
> 
> 赞同：10
> 
> 时间：2012-11-18T02:05:37.923
> 
> 标签：keyboard-shortcuts, vim, macvim

有没有办法在 MacVim 中禁用键盘快捷键？我的意思是快捷方式`Cmd + s`，例如，我想说服自己使用类似的东西`:w`，但如果我可以使用保存文件，我就不能这样做`Cmd + s`，你明白吗？

但我当然还是想使用 GUI，那么有什么方法可以禁用这些，而不停止使用 MacVim GUI？

谢谢你的帮助。顺便说一句，我进行了谷歌搜索，但无法找到答案。

**编辑：**
按照@ChrisJohnsen 的建议，我已经尝试了以下方法但没有成功：

```
if has('gui_running')
    macmenu File.Save key=<nop>
    macmenu File.Save\ As\.\.\. key=<nop>
endif 
```

**编辑 2：**
我将错误转移到另一个问题：[当我尝试在命令行中运行 vim 时出现 Python 错误](https://stackoverflow.com/questions/13441820/when-i-try-to-run-vim-in-command-line-i-get-python-errors)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-18T04:09:04.333

没有简单的方法可以禁用所有预定义的 Mac 风格的键盘快捷键，但您绝对可以更改/禁用其中任何一个。重要的命令是`:macmenu`（见`:help :macmenu`）；它允许您设置任何 Vim 菜单项的 Mac 特定属性（主要是 Mac 特定的键盘快捷键和 Mac 特定的操作（例如打开/保存对话框、窗口操作等））。

```
macmenu File.Save key=<nop>
macmenu File.Save\ All key=<nop>
macmenu File.Save\ As\.\.\. key=<nop> 
```

问题是命令只有在你的文件`:macmenu`中才有效。`.gvimrc`

如果您这样做`:e $VIMRUNTIME/menu.vim`并搜索`macm`，您将找到预定义的快捷方式和操作列表。将所需的行复制给您`.gvimrc`并替换`key=<whatever>`为`key=<nop>`. 如果您需要在多个平台上工作，您也可以将它们包装在`if has("gui_macvim")`/中。`endif``.gvimrc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:58:30.830

MacVim 与普通 Vim 相比只有一个“优势”：它支持原生 Mac OS X 快捷方式。如果你不想要这些快捷方式，你也可以简单地使用普通的 Vim。

FWIW，当我从 TextMate 切换时，我也过了一段时间发现这些原生快捷方式是我学习 Vim 的障碍。我的解决方案是将精力集中在普通的 Vim 上。在终端中使用一周后，您应该能够完全忽略这些快捷方式。

我建议你暂停一下，考虑以更合适的顺序做事：

1.  在终端中，`$ vimtutor`根据需要执行多次。

2.  再次在终端中，`$ vim`先用于简单任务，然后再用于更复杂的任务。一开始会有可预测的生产力冲击，但只会持续几天/几周。

3.  一旦你达到了之前的生产力水平，你就可以开始全职使用 Vim。那时，使用 MacVim 或 GVim 或 plain`$ vim` *应该没有任何区别。*

不过度依赖插件、其他人的 vimrc 或 janus 或 spf13 等“发行版”的奖励积分......</p>

# python - 为什么我可以从 python 中的另一个模块访问一个模块中的非全局变量？

> ID：13436828
> 
> 赞同：1
> 
> 时间：2012-11-18T02:06:36.657
> 
> 标签：python, global-variables, local-variables

好的，下面的代码完全是我编的废代码；但我觉得很奇怪，我可以从 qwerty() 函数访问变量“b”，而 b 只在内部声明，而...我想我只能以某种方式全局声明它才能访问它？

```
x = 14
while (x > 10):
    b = 3
    b += 3
    print(b)
    x -= 1

def qwerty():
    if b == 6:
         print("b can be accessed elsewhere?")

input("") 
```

运行这段代码，“b 可以在别处访问吗？” 将被打印...即使 b == 6 引用了在单独的 while() 函数中声明的变量 b 。

我想我仍然对python中全局和局部变量的属性感到困惑。谁能解释为什么会发生上述情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T02:08:15.873

`while`不是函数。创建自己的范围的唯一构造是`def`,`class`和生成器表达式/理解（取决于版本）。

```
if True:
    while 1:
        for x in range(1):
            z = 1
        break

def function():
    print(z)

function() # prints 1 
```

这与内部函数的工作方式*几乎*相同。

```
def function():
    while True:
        x = 5
        break
    def nested():
        print(x)
    nested() # prints 5
    x = 10
    nested() # prints 10 
```

我说*几乎*是因为在如何修改外部变量方面存在一些细微的差异，具体取决于它们是全局变量还是属于封闭函数。

# bison - 野牛没有创建 tab.h 文件

> ID：13436832
> 
> 赞同：4
> 
> 时间：2012-11-18T02:07:43.380
> 
> 标签：bison, lex, flex-lexer

我是 flex 和 bison 的新手，我已经在这个项目上工作了几天。我有一个野牛文件，以前蜜蜂工作正常，我对其进行了一些更改，现在它没有创建 tab.h 文件...我已将错误以及我的野牛和 flex 文件放在下面...错误：

```
 In file included from stojk_3_2.y:55:
  stojkovic_project1_2.l:4:27: error: stojk_3_2.tab.h: No such file or directory
  stojk_3_2.tab.c: In function ‘int yyparse()’:
  stojk_3_2.tab.c:1416: warning: deprecated conversion from string constant to ‘char*’
  stojk_3_2.tab.c:1562: warning: deprecated conversion from string constant to ‘char*’ 
```

.y 文件：

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

#define YYSTYPE double

int yylex(void);

static
void yyerror(char *s)
{
printf("yyerror: %s\n", s);
}

%}

%token PLUS
%token MINUS
%token MULT
%token DIVIDE

%token LPAREN
%token RPAREN

%token UNSIGNEDINTEGER

%left PLUS MINUS
%left MULT DIVIDE

%token Variable
%token Exp
%token Sign
%token Unsigned_int
%token Unsigned_float_int
%token Factor

%%

lines     :         lines expr   '\n'         {printf("%g\n", $2);}
|         lines '\n'
|         /*empty*/
;

expr      :          expr PLUS  expr           {$$  =  $1  +  $3;}  
|          expr MINUS  expr           {$$  =  $1  -  $3;} 
|          expr MULT  expr           {$$  =  $1  *  $3;} 
|          expr DIVIDE  expr           {$$  =  $1  /  $3;} 
|          LPAREN  expr  RPAREN        {$$ =  $2;}
|          UNSIGNEDINTEGER
;

%%

#include  "lex.yy.c"

int yylex(void);
int yyparse(void);

int main(void)
{
return yyparse();
} 
```

.l 文件

```
/*** Definition section ***/
%{

#include "stojk_3_2.tab.h"
%}

Variable                    [a-zA-Z_]+[a-zA-Z0-9_]*
Digit                       [0-9]
Digits                      [0-9]*
Sign                        [+]|[-]
Exp                         [E]+{Sign}|[e]+{Sign}
Unsigned_int                {Digit}|{Digits}
Unsigned_float_int          ({Digit}|{Digits}+[.]+{Digit}|{Digits})({Digit}|    {Digits}+[.]+{Digit}|{Digits}+{Exp}+{Digit}|{Digits})
Factor                      {Variable}|{Unsigned_int}|    {Unsigned_float_int}  

%{
/* C code to be copied verbatim */
#include <stdio.h>

%}

/* This tells flex to read only one input file */
%option noyywrap

%%
    /*** Rules section ***/

    /* [0-9]+ matches a string of one or more digits */

{Variable}   {  return Variable; }

{Exp}   {return Exp; }
{Sign}   { return Sign; }

{Unsigned_int}   {  return Unsigned_int; }
{Unsigned_float_int}  { return Unsigned_float_int; }
{Factor}               {  return Factor; }

.|\n    {   /* Ignore all other characters. */   }

%% 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T02:18:37.783

Try running

```
bison -d blah.y 
```

This will make it produce the .h file

# android - 如何进行活动转换？

> ID：13436838
> 
> 赞同：0
> 
> 时间：2012-11-18T02:09:06.650
> 
> 标签：android

我已经实现了一个有很多活动的应用程序...... 我想以整个活动之间的快速过渡方式将一个活动实现为左右，反之亦然。例如

因此，当您点击 next 时，应该在 next 活动之间进行转换，而当您点击 previous 时，应该在 previous 之间进行转换。我应该如何实现这个？......它的投掷但不是触摸，而是使用那些按钮......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:14:26.467

Check out [ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html) (video demo [here](http://www.youtube.com/watch?v=SZTiJmclaRc)), [ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html), or [ViewPagerIndicator](http://viewpagerindicator.com/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:18:40.893

Define translation animations in xml then use `overridePendingTransition` BEFORE setContentView in each Activity. E.g. `overridePendingTransition(R.anim.slidein, R.anim.slideout);` You probably need to put this in onResume if you want it to work both ways (i.e. when you're going from and back to that Activity.).

# python - 显示所有 jinja 对象属性

> ID：13436841
> 
> 赞同：19
> 
> 时间：2012-11-18T02:09:19.833
> 
> 标签：python, jinja2, hyde

有没有办法在 jinja 模板中显示给定对象的所有属性的名称/内容/功能。这将使调试未按预期运行的模板变得更加容易。

我正在使用该`hyde`框架构建一个网站，这会非常方便，因为我仍在学习 jinja 和 hyde 的复杂性。

最初，我认为使用`attr`过滤器会起作用，但这似乎需要一个名称值。我希望不必指定名称即可获取对象的所有可用属性。

一些谷歌搜索显示 django 语法如下所示，但我对 django 不熟悉，因此这可能仅适用于数据库项目。长话短说，我想要一种对任何名为`obj`

```
{% for field, value in obj.get_fields %}
    {{ field }} : {{ value }} </br>
{% endfor %} 
```

* * *

### 最终解决方案：

@jayven 是对的，我可以创建自己的 jinja2 过滤器。不幸的是，使用 hyde 的稳定版本（0.8.4），在 pythonpath 中设置一个过滤器并在文件中设置一个简单的 yaml 值并不是一件简单的事情`site.yaml`（有一个拉取请求）。话虽如此，我能够弄清楚！所以以下是我的最终解决方案，它最终对调试任何未知属性非常有帮助。

创建特定于站点的 hyde 扩展很容易，只需使用以下目录树创建一个本地 python 包

```
hyde_ext
    __init__.py
    custom_filters.py 
```

现在创建扩展：

```
from hyde.plugin import Plugin
from jinja2 import environmentfilter, Environment

debug_attr_fmt = '''name:  %s
type:  %r
value: %r'''

@environmentfilter
def debug_attr(env, value, verbose=False):
    '''
    A jinja2 filter that creates a <pre> block
    that lists all the attributes of a given object
    inlcuding the value of those attributes and type.

    This filter takes an optional variable "verbose",
    which prints underscore attributes if set to True.
    Verbose printing is off by default.
    '''

    begin = "<pre class='debug'>\n"
    end = "\n</pre>"

    result = ["{% filter escape %}"]
    for attr_name in dir(value):
        if not verbose and attr_name[0] == "_":
            continue
        a = getattr(value, attr_name)
        result.append(debug_attr_fmt % (attr_name, type(a), a))
    result.append("{% endfilter %} ")
    tmpl = Environment().from_string("\n\n".join(result))

    return begin + tmpl.render() + end

    #return "\n\n".join(result)

# list of custom-filters for jinja2
filters = {
        'debug_attr' : debug_attr
        }

class CustomFilterPlugin(Plugin):
    '''
    The curstom-filter plugin allows any
    filters added to the "filters" dictionary
    to be added to hyde
    '''
    def __init__(self, site):
        super(CustomFilterPlugin, self).__init__(site)

    def template_loaded(self,template):
        super(CustomFilterPlugin, self).template_loaded(template)
        self.template.env.filters.update(filters) 
```

要让 hyde 知道扩展名，请添加`hyde_ext.custom_filters.CustomFilterPlugin`到`site.yaml`文件的“插件”列表中。

最后，在文件上进行测试，您可以将其添加到一些随机页面`{{resource|debug_attr}}`或以下内容以获取下划线属性`{{resource|debug_attr(verbose=True)}}`

当然，我应该补充一点，将来只要发布 hyde 1.0，这似乎会变得容易得多。特别是因为已经有一个拉取请求等待实施一个更简单的解决方案。不过，这是了解更多关于如何使用 jinja 和 hyde 的好方法！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T03:43:14.257

我认为您可以自己实现过滤器，例如：

```
from jinja2 import *

def show_all_attrs(value):
    res = []
    for k in dir(value):
        res.append('%r %r\n' % (k, getattr(value, k)))
    return '\n'.join(res)

env = Environment()
env.filters['show_all_attrs'] = show_all_attrs

# using the filter
tmpl = env.from_string('''{{v|show_all_attrs}}''')
class Myobj(object):
    a = 1
    b = 2

print tmpl.render(v=Myobj()) 
```

另请参阅文档了解详细信息：http: [//jinja.pocoo.org/docs/api/#custom-filters](http://jinja.pocoo.org/docs/api/#custom-filters)

# sql - 获取 SQL 中插入操作的标识行值

> ID：13436849
> 
> 赞同：1
> 
> 时间：2012-11-18T02:10:04.320
> 
> 标签：sql, sql-server

我玩 SQL 这么多年，从来没想过要问这个问题。

如果我在表中添加（插入）一行，并且它有一个标识列，我如何检索这个新行的标识？我很想听听一个解决方案，因为我担心我可能正在使用一些非常相似或重复的行的数据库上进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:17:15.447

使用[`SCOPE_IDENTITY`](http://msdn.microsoft.com/en-us/library/ms190315.aspx)函数获取当前范围内最后插入的标识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:49:48.503

如何检索 IDENTITY 列的值有三种主要功能/方式。请按照第一个链接进行简要说明。第二个（MSDN）提供了清晰的示例和比较：

*   [http://blog.sqlauthority.com/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)
*   [http://msdn.microsoft.com/](http://msdn.microsoft.com/en-us/library/ms190315%28SQL.105%29.aspx)

如何获得身份的三种方式：*`@@IDENTITY`, `SCOPE_IDENTITY()`,`IDENT_CURRENT('TableName')`*

虽然`@@IDENTITY`很可能是“最常用的”，但由于它的实现，它不必总是返回预期的标识值。[在这里](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)阅读更多

# php - Laravel 中的条件路由

> ID：13436850
> 
> 赞同：2
> 
> 时间：2012-11-18T02:10:14.287
> 
> 标签：php, laravel

假设我有我的`user`控制器，其中有`action_index()`, `action_login()`,`action_logout()` `action_profile($userid)` 方法。我想做一个路由

```
www.mysite.com/user/xxxx 
```

检查`xxxx`url 的一部分，如果它不是 (login,logout,index) 之一，它会调用`action_profile(xxxx)`方法。

现在我这样做：我的路由将所有`www.mysite.com/user/xxxx`类型的请求路由到`action_index`它并检查是否`xxxx`是方法名称。如果它不是它调用的方法名称`action_profile(xxxx)`

但是，我认为有可能以更好的方式。我怎样才能做得更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T02:55:14.773

嗯，我不确定我是否明白你在问什么。laravel 中的路线是基于第一次匹配的。

因此，您可以将以下内容添加到您的`routes.php`：

```
Route::get('user/(:num)', 'user@profile');
Route::controller('user'); 
```

第一行用于路由`user/xxx`到`action_profile()`用户控制器中`xxx`的任何数值。而第二个会将任何其他 URI ( `user/***/***`) 映射到相应的用户控制器的方法。这意味着它会自动映射`user/login`到`action_login()`、`user/register`to`action_register()`等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T11:27:37.780

我建议您避免`Route::controller()`在这种情况下使用。虽然在某些情况下可以使用它，但对于您所追求的，最好映射到路线。

你可以这样做。

```
Route::get('user', 'user@index');
Route::get('user/(:num)', 'user@profile');
Route::get('user/(:any)', 'user@(:1)'); 
```

或者你可以对你的最后一条路线更严格一些。

```
Route::get('user/(login|logout)', 'user@(:1)'); 
```

我建议您避免使用`Route::controller()`的原因是它确实会创建某些内容的重复项。例如，`yoursite.com/user`将在 上重复`yoursite.com/user/index`。这可能对搜索引擎优化不利。

映射到您的操作可为您提供额外的灵活性和控制力。

# css - CSS Layout Trouble

> ID：13436852
> 
> 赞同：1
> 
> 时间：2012-11-18T02:10:22.217
> 
> 标签：css, background

I've been trying to build this CSS layout for a while now. I am trying to make this:

[http://tinypic.com/r/29xx9ps/6](http://tinypic.com/r/29xx9ps/6)

And I can not even get the first step done of putting the blue bar at the top of the screen. But any help would be much appreciated.

I also found this:

[What is the hexadecimal code of the "blue" background color of Facebook?](https://stackoverflow.com/questions/7442123/what-is-the-hexadecimal-code-of-the-blue-background-color-of-Facebook)

give me the color codes but please any help would be appriated I'm watching tutorials like crazy but I have a wired dead line for this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:40:00.147

> 说到CSS，我很清楚

这时候你可能需要学习它。我建议您从[http://www.w3.org/TR/CSS21/selector.html](http://www.w3.org/TR/CSS21/selector.html)和[http://www.w3.org/TR/CSS21/propidx.html开始](http://www.w3.org/TR/CSS21/propidx.html)

> 而且我什至无法完成将蓝条放在屏幕顶部的第一步

您的“白色标题”文本和“注册”按钮位于某物内：在您的 HTML 中，让“某物”成为一个`<div>`元素。

例如，如果您在我的网页[http://www.modeltext.com](http://www.modeltext.com)上执行“查看源代码”，您会看到我有一个`<div id="HEADER">`元素。

[我在http://www.modeltext.com/images/styles.css](http://www.modeltext.com/images/styles.css)的 CSS指定：

```
#HEADER
{ 
  background-image: url(bg_main.gif);
  background-repeat: repeat-x;
  background-position: bottom; } 
```

那是因为我使用图像作为背景，将这些线条放在背景上。如果您想要一个简单的纯色背景色，那么您可以简单地使用[background-color](http://www.w3.org/TR/CSS21/colors.html#propdef-background-color)属性。

# php - PHP / Regex / JavaScript 有条件地替换路径中的特定单词

> ID：13436853
> 
> 赞同：0
> 
> 时间：2012-11-18T02:10:25.303
> 
> 标签：php, javascript, regex

我正在使用 WordPress 和 phpBB 开发一个站点，您必须知道图像路径是由这些 CMS 生成的。我想要的是............在发送到浏览器之前保留输出............根据设备类型更改图像路径，最后输出正确的图像。

**为什么要替换路径？**

因为我的 NORMAL 图像是 180KB，我的 MEDIUM 图像是 90KB，我的 SMALL 图像是 30KB，像这样在每页上大约有 20 个图像，想象一下通过用较小的图像替换它来降低页面速度，用于小型和慢速设备. 还裁剪图像以仅突出显示较小设备的重要部分，因此更改尺寸不会解决我的问题。

*我也不是在寻找 CSS3 媒体查询，因为我有不使用它们的特定原因。*

**什么对我有用？**

由于我的首要任务是尽量减少页面加载时间，因此最好的解决方案是使用一些**正则表达式**，因为我没有在我的模板中使用任何 JavaScript 库。

如果没有 JavaScript 就无法实现这一点，那么我更喜欢不使用任何库的普通旧 JavaScript 方法，因为这将是我模板中唯一的 JavaScript 函数，为它加载整个库没有任何意义。

以下是我当时的事情应该是的做法。但是我不知道如何获得它。请帮忙。

**请注意：-**我对 PHP 非常陌生，在 Regex 和 JavaScript 上也是零。因此，请详细解释一下。

```
<?php ob_start (); ?> /* Start Buffering */

<div>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pellentesque vestibulum fringilla. Nullam eget fermentum neque. Quisque ullamcorper fringilla quam, eu elementum nisl ornare vitae.</p>
<img src="images/desktop/pic1.jpg"/>
<img src="images/desktop/pic2.jpg"/>
<img src="images/desktop/pic3.jpg"/>
</div>

<?php ob_get_contents();  /* Get the Buffer */

if ($layout = 'mobile') {

    /* replace <img src="images/desktop/pic1.jpg"/> with <img src="images/mobile/pic1.jpg"/>
    /* replace <img src="images/desktop/pic2.jpg"/> with <img src="images/mobile/pic2.jpg"/>
    /* replace <img src="images/desktop/pic3.jpg"/> with <img src="images/mobile/pic3.jpg"/>
    The Folder-Name 'desktop' should be replaced by 'mobile'
    */

} else if ($layout = 'tablet') {

    /* replace <img src="images/desktop/pic1.jpg"/> with <img src="images/tablet/pic1.jpg"/>
    /* replace <img src="images/desktop/pic2.jpg"/> with <img src="images/tablet/pic2.jpg"/>
    /* replace <img src="images/desktop/pic3.jpg"/> with <img src="images/tablet/pic3.jpg"/>
    The Folder-Name 'desktop' should be replaced by 'tablet'
    */

}

ob_end_flush (); /* Send Output to the browser */
?> 
```

$layout 的值由另一个 PHP 函数计算。

如果您认为这会是更好的方法，请随时提出完全不同的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:04:19.263

您想要将路径中的“桌面”一词替换为“移动设备”或“平板电脑”。您不需要正则表达式。

我打算建议使用，但*后来*`str_replace`我意识到你甚至不需要那个。

试穿这个尺寸：

```
<?php ob_start (); ?> /* Start Buffering */
<div>
    <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pellentesque vestibulum fringilla. Nullam eget fermentum neque. Quisque ullamcorper fringilla quam, eu elementum nisl ornare vitae.
    </p>
    <img src="images/<?=($layout !== 'desktop' ? $layout : 'desktop')?>/pic1.jpg"/>
    <img src="images/<?=($layout !== 'desktop' ? $layout : 'desktop')?>/pic2.jpg"/>
    <img src="images/<?=($layout !== 'desktop' ? $layout : 'desktop')?>/pic3.jpg"/>
</div>
?> 
```

* * *

奇怪的是，*如果*总是设置布局（即通常是“桌面”，或者“移动”或“平板电脑”），为什么你甚至需要替换 url？您可以像这样动态构造 url：

```
<img src="images/<?=$layout?>/pic1.jpg"/> 
```

# java - Android get difference in milliseconds between two dates

> ID：13436854
> 
> 赞同：6
> 
> 时间：2012-11-18T02:10:46.907
> 
> 标签：java, android, date

I have Integer fields:

currentYear,currentMonth,currentDay,currentHour,currentMinute and nextYear,nextMonth,nextDay,nextHour,nextMinute.

How I can get difference between those two spots in time in milliseconds. I found a way using Date() object, but those functions seems to be depricated, so it's little risky.

Any other way?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T02:20:01.753

Use [GregorianCalendar](http://developer.android.com/reference/java/util/GregorianCalendar.html#getGregorianChange%28%29) to create the date, and take the diff as you otherwise would.

```
GregorianCalendar currentDay=new  GregorianCalendar (currentYear,currentMonth,currentDay,currentHour,currentMinute,0);
GregorianCalendar nextDay=new  GregorianCalendar (nextYear,nextMonth,nextDay,nextHour,nextMinute,0);

diff_in_ms=nextDay. getTimeInMillis()-currentDay. getTimeInMillis(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T02:42:25.417

为and创建一个`Calendar`对象，将它们变成长整数，然后减去。例如：`currenDay``nextDay`

```
Calendar currentDate = Calendar.getInstance();
Calendar.set(Calendar.MONTH, currentMonth - 1); // January is 0, Feb is 1, etc.
Calendar.set(Calendar.DATE, currentDay);
// set the year, hour, minute, second, and millisecond
long currentDateInMillis = currentDate.getTimeInMillis();

Calendar nextDate = Calendar.getInstance();
// set the month, date, year, hour, minute, second, and millisecond
long nextDateInMillis = nextDate.getTimeInMillis();

return nextDateInMillis - currentDateInMillis; // this is what you want 
```

如果您不喜欢`Calendar`课堂上的混乱，可以查看 Joda 时间库。

# bash - 从具有特定窗口坐标的命令行启动 Google Chrome

> ID：13436855
> 
> 赞同：34
> 
> 时间：2012-11-18T02:11:25.067
> 
> 标签：bash, google-chrome

我正在尝试找到一个 shell 命令，该命令将使用特定的 x 和 y 坐标打开 Google Chrome（以便我可以设置窗口打开时的位置。）是否可以使用命令行参数来做到这一点？

我需要修改以下命令以实现此目的：

`google-chrome http://www.google.com/`

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-11-16T22:30:17.057

当您使用 Google 的 Chrome 时，有一种更短的方法：

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" 
     --profile-directory="Default"
     --app="data:text/html,<html><body><script>window.moveTo(580,240);window.resizeTo(800,600);window.location='http://www.test.de';</script></body></html>" 
```

临：

*   自动打开窗口
*   避免弹出窗口阻止程序
*   在不同的显示器上打开多个窗口（多显示器设置，需要两个或更多 Chrome 配置文件）

缺点：

*   似乎只在“应用程序”模式下工作
*   未在其他浏览器上测试

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-18T02:18:15.180

[http://peter.sh/experiments/chromium-command-line-switches/](http://peter.sh/experiments/chromium-command-line-switches/)说 --window-position=x,y 是你要找的。

几年后更新以包含我多年前编写的一个小 shell 脚本（但在回答了这个问题之后），它提供了一个示例，说明如何使用自定义窗口大小/位置启动 chrome，并能够按名称创建“假”用户数据目录.

它可能仍然有效，也可能无效，并且设置了一些危险的选项，但你明白了.. 不要逐字使用这个，一些标志可能已被重命名或被完全删除..（就像 socks 代理命令所做的那样）

```
#!/bin/bash -x

FAKEUSER="${1:-fake-chrome-user}"
CHROMEROOT=$HOME/.chromeroot/

mkdir -p ${CHROMEROOT}

export PROFILE="${CHROMEROOT}/${FAKEUSER}-chromium-profile"
export DISK_CACHEDIR="${CHROMEROOT}/${FAKEUSER}-chromium-profile-cache"
export DISK_CACHESIZE=4096
export MEDIA_CACHESIZE=4096

PARANOID_OPTIONS="\
        --no-displaying-insecure-content \
        --no-referrers \
        --disable-zero-suggest \
        --disable-sync  \
        --cipher-suite-blacklist=0x0004,0x0005,0xc011,0xc007 \
        --enable-sandbox-logging >/dev/null 2>&1
        "

/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome \
        --remember-cert-error-decisions \
        --ignore-certificate-errors \
        --ignore-urlfetcher-cert-requests \
        --allow-running-insecure-content \
        --window-position=2400,400 \
        --window-size=1500,1000 \
        --no-pings \
        --user-data-dir=${PROFILE} \
        --disk-cache-dir=${DISK_CACHEDIR} \
        --disk-cache-size=${DISK_CACHESIZE} \
        --media-cache-size=${MEDIA_CACHESIZE} \
        2>&1

#--proxy-server="socks4://localhost:30604" \
#--host-resolver-rules="MAP * 0.0.0.0 , EXCLUDE localhost" \ 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-11-05T12:48:37.867

以@synthesizerpatel 的答案为基础，`--window-position`不能单独工作。

您需要使用`--user-data-dir`或`--chrome-frame`类似以下方式启动它，因为它是自己的新实例：

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe"  --user-data-dir=XXXXXXXXXX --window-size=800,600 --window-position=580,240 --app="http://www.google.com/"
or
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --chrome-frame --window-size=800,600 --window-position=580,240 --app="http://www.google.com/" 
```

对我来说不幸的是，将它作为一个新实例意味着它不会从其他实例中继承 session/cookie/etc 信息，因此我必须正常打开它（仅使用`--app`参数），然后在页面中添加 javascript我打开做：

```
window.moveTo(580,240);
window.resizeTo(800,600); 
```

我想如果你打开一个别人拥有的网页，你可以打开你自己的网页，上面有上面的js，然后导航到他们的网页。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-18T10:24:49.237

我用过这个：

```
google-chrome "data:text/html;charset=ISO-8859-1,<html>
    <head></head><body><script language=\"javascript\">
        window.open('http://perso.f-hauri.ch/~felix/svg/dustin_w_Clock_autonom.svg',
             'clock','toolbar=0,location=0,status=0,menubar=0,scrollbars=1,'
             +'resizable=1,width=600,height=600,top=100,left=120');</script>" 
```

但是*google-chrome*阻止*弹出窗口*，所以这样：

```
google-chrome "data:text/html;charset=ISO-8859-1,<html><head></head><body>
    <button onclick=\"javascript:window.open(
        'http://perso.f-hauri.ch/~felix/svg/dustin_w_Clock_autonom.svg',
        'clock','toolbar=0,location=0,status=0,menubar=0,scrollbars=1,'
        +'resizable=1,width=600,height=600,top=100,left=120');\"> clock </button>" 
```

给一个很好的方法来做到这一点。

**注意：**这也适用于 Firefox。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-07T23:08:35.960

使用我最新版本的 Chrome - 我只需要以下内容。每次我关闭应用程序时，它都会记住我的窗口大小和位置。

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --chrome-frame --app=https://mightytext.net/web8/?exp=1 
```

这适用于我的版本 48.0.2564.48 beta-m（64 位）和版本 48.0.2564.48 beta-m（64 位）

# html - how to have text between an HR line

> ID：13436856
> 
> 赞同：1
> 
> 时间：2012-11-18T02:11:25.037
> 
> 标签：html, css

How can I have my text between an `<HR>` line?

For example: [http://jsfiddle.net/VrvvX/](http://jsfiddle.net/VrvvX/)

```
<div id="outerDiv">
    <button id="myButton">Do This</button>
    <br>-----------or do something else-<br>
    <table id="mytable">
        <tr>
            <td>Blah:</td>
            <td><select id="foo"></select></td>
        </tr>
        <tr>
            <td>Blah:</td>
            <td><select id="foo"></select></td>
        </tr>
    </table>​ 
```

Rather than having `-----` I'd like to have a pretty `<hr>` tag which works like a separator between the `button` and the `table`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T05:29:38.163

将两个`<hr/>`标签设置为`display: inline-block`并`width`在它们之间放置一个文本。[喜欢这个小提琴](http://jsfiddle.net/VrvvX/143/)。虽然您[可能想要调整](http://jsfiddle.net/VrvvX/145/)它的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-17T18:19:51.437

除了 Tomás 解决方案之外，您还可以创建一个 HR 类并将其添加`content: attr(data-content);`到其中。然后使用下面的 HTML `<hr class="hr-1" data-content="CONTENT HERE"/>`。

这样您就可以通过 HTML 而不是 CSS 来填写内容。

小提琴： [https ://jsfiddle.net/xqeuzrg7/](https://jsfiddle.net/xqeuzrg7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T06:06:07.393

我认为这不是执行此操作的最佳做​​法，但您可以将此 css 用于`<hr/>`标记，它会正常工作：

```
hr {
    padding: 0;
    border: none;
    border-top:  1px dashed #CCC;
    color: #333;
    text-align: center;    
    font-size:12px;
}
hr:after {
    content:"or do something else";
    display: inline-block;
    position: relative; 
    top: -0.7em;  
    font-size: 1.5em;
    padding: 0 0.25em;
    background: white;
}​ 
```

我已经更新了你的例子，看看这是不是你想要的：http: [//jsfiddle.net/VrvvX/146/](http://jsfiddle.net/VrvvX/146/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T05:44:31.773

你可以做这样的事情：

```
<div style="background: url('line-background.png') 50% 50% repeat-x;width: 100%;text-align: center;">
    Do this
</div> 
```

当然你可以调整宽度或使用 padding: 0 ?px;

编辑 ：

如果你想在标题下隐藏背景，你可以这样做：

```
<div style="background: url('line-background.png') 50% 50% repeat-x;width: 100%;text-align: center;">
   <span style="background: white;padding: 2px;"> Do this</div>
</div> 
```

# ruby - Extracting info from button in Ruby

> ID：13436857
> 
> 赞同：0
> 
> 时间：2012-11-18T02:11:37.063
> 
> 标签：ruby, xpath, nokogiri

I have a line of code that links to a button on a HTML page and I'm wondering is there anyway that I can extract a specific value?

```
<input type="button" style="cursor: pointer;" onclick="selector(item,012345)"<br /> 
```

Is there anyway that I can extract the number `012345` from the code above? My current attempt is:

```
temp = doc.xpath(//div....../input) 
```

but that returns the raw data of the whole button.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:25:47.813

我无法告诉如何在没有更多上下文的情况下选择正确的输入，但通常你会这样做：

```
doc.at('input')[:onclick][/\d+/] 
```

# php - in codeigniter, how do i load a library that has multiple directories

> ID：13436859
> 
> 赞同：2
> 
> 时间：2012-11-18T02:12:34.750
> 
> 标签：php, codeigniter, shared-libraries, directory-structure

for example, here is my path to one of my library:

```
application/libraries/samples/samples.php 
```

now how would i load the samples.php library in codeigniter, since it is not at the root level of the libraries folder? basically can i do this:

```
$this->load->library("samples"); 
```

will that load the samples library even tho its not in the root of the libraries folder?

Sorry im new to codeigniter, and the codeigniter docs do not say about multiple directories in the libraries folder. But i don't see why they would miss that out, seems reasonable to include that info or support it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:13:18.977

Just put the path to the library in your request:

```
$this->load->library("samples/samples"); 
```

# python-2.7 - iterate through paired values in dictionary

> ID：13436867
> 
> 赞同：0
> 
> 时间：2012-11-18T02:15:38.537
> 
> 标签：python-2.7, arcpy

I have converted grid1 and grid2 into arrays and using following function which iterates through table and should return corresponding value form table when grid1 and grid2 values are matched. But somehow the final output contain only 4 integer values which isn't correct. Any suggestion what is possibly wrong here?

```
def grid(grid1,grid2):
    table = {(10,1):61,(10,2):75,(10,3):83,(10,4):87,
             (11,1):54,(11,2):70,(11,3):80,(11,4):85,
             (12,1):61,(12,2):75,(12,3):83,(12,4):87,
             (13,1):77,(13,2):85,(13,3):90,(13,4):92,}
    grid3 = np.zeros(grid1.shape, dtype = np.int)

    for k,v in table.iteritems():
        grid3[[grid1 == k[0]] and [grid2 == k[1]]] = v

    return grid3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:43:06.953

我认为正在发生的事情是对变量“k”和“v”的赋值没有使用“deepcopy”完成。这意味着分配只是对变量而不是它们的值。例如，当“k”的值在后续迭代中发生变化时，所有先前的“gridx”分配现在都反映了“k”的新/当前状态。

# bash - 循环（？）一个 if 语句

> ID：13436868
> 
> 赞同：4
> 
> 时间：2012-11-18T02:16:38.350
> 
> 标签：bash, shell, unix

我是shell脚本的菜鸟，我想知道这个：

```
#!/usr/local/bin/bash
number=5
echo "Enter 'yes' to continue, 'no' to abort:"
read choice
if [ $choice = yes ]; then
        while [ $number -lt 10 ]; do
                echo "The script is now looping!"
        done
elif [ $choice = no ]; then
        echo "Loop aborted"
else
        echo "Please say 'yes' or 'no'"
        read choice
# What now?
fi 
```

如果您未指定“是”或“否”，我将如何处理 if 语句重新检查您的 $choice（第 13 行）？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:21:17.963

1.  您可以将代码从“echo Enter ...”放到外部“while”循环中。while 循环将循环直到 $choice 为“yes”或“no”。在执行此操作时删除最后一个“else”子句（这将是多余的）。

2.  PS您需要在内部while循环中增加（或更改） $number 。否则，它将无限运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T02:22:55.557

您可以跟踪是否在一个名为的变量中循环`invalid_choice`

```
invalid_choice=true
while $invalid_choice; do
    read choice
    if [ "$choice" = "yes" ]; then
        invalid_choice=false
        ...
    elif [ "$choice" = "no" ]; then
        invalid_choice=false
        ...
    else
        echo "Please say yes or no"
done 
```

或者，如果您需要大量执行此操作，您可以将其概括为一个函数：

```
function confirm() {
    local ACTION="$1"
    read -p "$ACTION (y/n)? " -n 1 -r -t 10 REPLY
    echo ""
    case "$REPLY" in
        y|Y ) return 0 ;;
        *   ) return 1 ;;
    esac
}

confirm "Do something dangerous" || exit 
```

# ios - ios - 在模拟器上进行远程调用但无法从实时设备上工作

> ID：13436873
> 
> 赞同：0
> 
> 时间：2012-11-18T02:18:09.407
> 
> 标签：ios, nsurl, nsurlrequest, nsoperationqueue

我的情况有点混乱。我有一个表单，之后我创建一个 url 并进行异步服务器调用。该数据不需要是安全的。

这是我所拥有的：

```
NSString *urlString = @"http://my.url.com/script_name.php?subject=hardcoded_string&body=";

NSString *inputString = textArea.text;

NSString *url_to_send = [NSString stringWithFormat:@"%@%@", urlString , inputString];         

NSURL *url = [NSURL URLWithString:url_to_send];
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url ];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];
... 
```

在我如何创建 url 时，我在这里做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:29:07.213

看起来没问题...看看 asihttprequest 库，在 google 上...这是一个强大的 http 连接包装器...您现在应该设置队列并将请求添加到队列中。最后你必须开始排队。

# java - 使用递归java从链表中删除节点

> ID：13436878
> 
> 赞同：2
> 
> 时间：2012-11-18T02:19:25.913
> 
> 标签：java, list, recursion, linked-list

所以我有一个链接列表，我希望能够删除第一次出现的数字，

我正在尝试使用递归，但遗憾的是我最终所做的只是能够删除列表的头部和

```
public List remove(int num){
   if(value == num) {
       return next.remove(value);
   }else{
       next = next.remove(value);
       return this;
   }
} 
```

我知道我需要返回新列表，但我究竟如何摆脱我试图避免的节点，或者有办法解决它，所以它继续到下一个点头。

编辑。更新实际代码。

```
class List{
  int value;  //value at this node 
  List next;  //reference to next object in list
  public List(int value, List next){
      this.value = value;
      this.next  = next;
  }
} 
```

我有三个不同的类，一个用于此末尾的空列表，一个声明此方法的类，以及实际列表。

```
 public static List makeSample() {
        EmptyList e = new EmptyList();
        List l1 = new List(5, e);
        List l2 = new List(4, l1);
        List l3 = new List(3, l2);
        List l4 = new List(3, l3);
        List l5 = new List(2, l4);
        List l6 = new List(1, l5);
        return l6;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:32:06.843

试试这个

```
import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class List {

    private int value;
    private List next;

    public static final List EMPTY = new List(-1, null) {
        public List remove(int n) { return this; };
        public String toString() { return ""; };
    };

    public List(int value, List next) {
        this.value = value;
        this.next = next;
    }

    public List remove(int n) {
        if (value == n) return next;
        return new List(value,next.remove(n));
    }   

    public String toString() {
        return value + "," + next.toString();
    }

    public static class Examples {

        @Test
        public void shouldRemoveElement() {
            List l = new List(1, new List(2, new List(2, new List(3, EMPTY))));
            assertEquals("1,2,2,3,",l.toString());
            assertEquals("2,2,3,",l.remove(1).toString());
            assertEquals("1,2,3,",l.remove(2).toString());
            assertEquals("1,2,2,",l.remove(3).toString());
            assertEquals("1,2,2,3,",l.toString());
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:43:00.453

保留两个列表。

```
List nonDuplicates;

List allElements;

for (Node node : allElements){
    if (!nonDuplicates.contains(node)){
        nonDuplicates.add(node);
    }
} 
```

# objective-c - Japanese character selected from suggestions on keyboard in objectivec

> ID：13436879
> 
> 赞同：1
> 
> 时间：2012-11-18T02:19:51.757
> 
> 标签：objective-c, ios5

I have an issue, where I am trying to enter Japanese characters using the keyboard in iPhone in UITextField.

The issue, is I have implemented `shouldChangeCharactersInRange` method, which gets called properly. However, when I use Japanese characters, using Japanese keyboard, there is a suggestion bar on top of the keyboard. If I select any of the word from that suggestion bar, it gets replaced. I want to identify if the user selected from the suggestion bar that was shown or the word was typed. Is there any way by which I can find if, the word has been typed or selected from the suggestion list?

Thanks, Vijay

# sql - phpMyAdmin 创建名称中带有“#”字符的属性

> ID：13436884
> 
> 赞同：0
> 
> 时间：2012-11-18T02:20:51.193
> 
> 标签：sql, phpmyadmin

我正在尝试创建下表。

```
CREATE TABLE customer
( 
cust# CHAR(3)NOT NULL , 
cname VARCHAR(30) NOT NULL , 
city VARCHAR(20) NOT NULL,   
PRIMARY KEY (cust#) 
)engine=InnoDB; 
```

我收到以下错误 #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 'cname VARCHAR(30) NOT NULL , city VARCHAR(20) NOT NULL, PRIMARY KEY (cust#' 附近使用正确的语法

我已经确认问题出在“#”上，方法是用“custNum”替换它。但是，我必须使用“#”号。我知道我可以将 myPhpAdmin 界面中的字段重命名为 cust#，但我需要知道如何在 SQL 语句中对其进行转义。

*编辑说我已经尝试过'\#'

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:23:29.450

我能够回答我自己的问题，我在这里发帖以防其他人有同样的问题。您必须在名称周围使用“`”。所以 `cust#` 成功了。

# php - 如何要求密码才能查看网站？

> ID：13436885
> 
> 赞同：-1
> 
> 时间：2012-11-18T02:20:54.183
> 
> 标签：php, javascript, password-protection

你们知道要求用户输入指定密码才能查看您的网站的方法吗？喜欢这个网站，例如[Click](http://pirate-zone.com/)。我在想它是.htaccess，但我不想保护任何目录。我只是希望我的朋友能够登录到我的站点，而不必出于安全问题更改我的目录名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:27:52.903

Apache htaccess 听起来像你需要的。您链接到的站点有一个定制的站点登录，可以用 PHP 或任何站点编码的方式编写。

设置 Apache 来执行此操作很简单，首先使用 htpasswd 命令创建密码：

```
 htpasswd -c .htpasswd dave 
```

然后将其放入 .htaccess 文件中：

```
 AuthUserFile /full/path/to/.htpasswd
    AuthType Basic
    AuthName "My Secret Folder"
    Require valid-user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:27:32.177

它通常称为“登录系统”，它通常还需要一个用户名（尽管在您的示例中没有）。`.htaccess`与它无关，它应该用 PHP 或任何其他脚本语言来完成。

登录系统通常需要一些输入验证和数据库技能。如果你不拥有它们，我强烈建议你学习一些关于 PHP、XSS、Sql Injection、Mysql 和 PDO 的知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T02:35:39.473

通常这是通过服务器端脚本和数据库来完成的。无法使用Javascript，因为无论您对代码进行多少混淆，任何人都可以右键单击“查看源代码”来找出您的密码。我看到你标记了 php。在php中，它相当简单。设置一个带有用户名和密码框的 HTML 表单（通过 POST，而不是 GET！，否则密码将显示在浏览历史记录和 url 栏中）。示例表单如下所示：

```
 <html>
    <body>
    <form action="login.php" method="post">
        Enter your username: <input type="text" name="user" /> <br />
        Enter your password: <input type="text" name="pass" /> <br />
        <input type="submit" value="Login" />
    </form>
    </body>
    </html> 
```

然后在 login.php 中：

```
 <?php
         session_start();

         $db = mysqli_connect("server","db_user","db_pass","database_name");
         $stmt = $db -> prepare("SELECT pass FROM users WHERE username=?");
         $stmt -> bind_param("s",$_POST['user']);
         $stmt -> execute();
         $stmt -> bind_result($result);
         if ($_POST['pass']==$result)
         {
              $_SESSION['auth'] = "yes";
              header("Location: index.php");
         }
         else
         {
               die("Authentication rejected!");
         }
    ?> 
```

然后您需要做的就是将以下代码放在您想要“密码保护”的所有文件的开头：

```
 <?php
         session_start();
         if (isset($_SESSION['auth']))
         {
              if ($_SESSION['auth']!="yes")
              {
                  header("Location: login.php");
              }
         }
         else
         {
              header("Location: login.php");
         }
    ?> 
```

这假设您有一个 MySQL 数据库（免费且易于安装），其中包含一个名为 users 的表，其中至少包含一个用户列和一个密码列。很容易找出这段代码，而且这绝对不是唯一的方法！但是，这是一种不错的方式，因为它包含基本必需品（您可以在其他地方阅读），例如输入卫生。

祝你好运！这确实是一个巨大的问题，在计算机安全中极为重要。事实上，这是一个十亿美元的问题：“我如何让好人进来，而把坏人拒之门外？”

# javascript - IE 中不会触发表单重置事件

> ID：13436887
> 
> 赞同：3
> 
> 时间：2012-11-18T02:21:18.117
> 
> 标签：javascript, jquery

此函数在 firefox/chrome 中触发：

```
$(document).on("reset", "form", function(){
alert("working");
}); 
```

IE 有哪些替代方案（我安装了 8 个，所以我想让它从 8 个开始工作）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:25:42.447

尝试将事件处理程序直接附加到您的表单：

```
$(document).ready(function(){
    $("form").bind("reset", function(e) {
        alert("working");
    });
}); 
```

这[显然适用](http://forum.jquery.com/topic/trapping-the-form-reset-event#14737000000769986)于包括 IE8 在内的多种浏览器。

由于 IE8 处理事件传播的方式，您的方法可能无法正常工作......来自[jQuery 文档](http://api.jquery.com/on/)：

> 在 Internet Explorer 8 及更低版本中，粘贴和重置事件不会冒泡。此类事件不支持与委托一起使用，但可以在事件处理程序直接附加到生成事件的元素时使用。

# ruby-on-rails - ActiveRecord：我需要belongs_to 和has_one

> ID：13436889
> 
> 赞同：14
> 
> 时间：2012-11-18T02:22:01.437
> 
> 标签：ruby-on-rails, activerecord

我有 2 个模型，即**user**和**userprofile**。用户和用户配置文件之间存在**一对一的关系**。

```
class Userprofile < ActiveRecord::Base
   attr_accessible :fname, :lname, :iswoman, :age, :urlphoto, :user_id

   belongs_to: user

end

class User < ActiveRecord::Base
   attr_accessible :name, :provider, :uid

   has_one: userprofile
end 
```

我想知道我是否需要两个类来设置连接，或者只需要**belongs_to**或**has_one**就足够了？其他方法也是如此，例如**has-many**。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-18T02:30:40.620

您可以在任何需要的地方定义关联。如果在某些时候你需要说`user.userprofile`，那么包括`has_one :userprofile`在`User`. 同样，如果您需要说`userprofile.user`，则包含`belongs_to user`在`Userprofile`.

换句话说，关联是相对的。您可以指定模型 A`has_one :b`而不指定模型 B `belongs_to :a`。您只需定义您需要什么。一对多和多对多关联也是如此。

只需确保已迁移`user_id`到“userprofiles”表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T02:30:04.960

在 userprofiles 和 user 之间只有一个 belongs_to 关系默认为 has_one。但是，在两个模型上指定关联是明智的（Rails-proper）。

毕竟，如果你想要一个 has_many 关联（等），你会想要指定它。

查看[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)了解更多信息

# jquery - 在没有用户交互的情况下将 jQuery 绑定到动态 HTML

> ID：13436891
> 
> 赞同：0
> 
> 时间：2012-11-18T02:22:37.190
> 
> 标签：jquery, html, dynamic, binding

我正在使用该`on()`方法，并成功地将一些 jQuery 绑定到动态添加到页面的 HTML 元素：

```
$('#video').on('click', 'a.expand', function() {
  // Do something
}); 
```

在这种情况下，将一个 id 为“video”的 div 动态添加到页面中。在该 div 内部，有一个锚点可以切换所述 div 的可见性。通过单击所述锚点效果很好，但我想找出的是我可以列出什么事件而不是“单击”来将我的 jQuery 绑定到该 div 当它被添加到页面时，而不是当你与它交互时？

我已经看了一遍，只看到过“点击”、“焦点”等话题，但没有某种互动就无法做到这一点。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:00:10.910

如果要在插入 that 时执行该函数`div`，则需要找到事件处理程序，该事件处理程序插入该`div`然后最后，您需要调用该函数。

```
function (){
    $("body").append("#video");
    // Call your function after this append() function is done.
    myEventFunction();
} 
```

如果您知道`div`插入的情况，这是最好的方法。

# php - Which PHP regexp method is better to use?

> ID：13436896
> 
> 赞同：0
> 
> 时间：2012-11-18T02:24:08.233
> 
> 标签：php, regex

I was writing some code to output HTML links and it ended up like this:

```
$search = array('/{LINK([^.]*)\.([^.]*)\.([^}]*)}/', '/{ILINK([^.]*)\.([^.]*)\.([^}]*)}/');
$replace = array('<a href="$1.php?$2">$3</a>', '<a class="ilink" href="$1.php?$2">$3</a>');
$foo = preg_replace($search, $replace, $foo); 
```

But then I looked at all the duplication and I tried to find a "better" method. So I ended up with this:

```
$foo = preg_replace_callback ('/{(I?)LINK([^.]*)\.([^.]*)\.([^}]*)}/', '_rep', $foo);

function _rep($m) {
  $x = ' href="'.$m[2].'.php?'.$m[3].'">'.$m[4].'</a>';
  if($m[1]) { return '<a class="ilink"'.$x; }
  return '<a'.$x;
} 
```

They both return the exact same output. The first one is easier to read. The second one only has to run half as many regexps. But I'm not sure which one is faster, less intensive, and just plain better to use.

Any advice?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:37:20.823

Go with the easier to read. You can soon optimise it in the future if you ever found that to be the bottle neck (which i doubt it ever will be). You will find that you will be glad of going with the easier to read version in 6 months time when you need to update it due to a regex bug you have found ;)

Remember, languages have the ability to leave "comments" to help you make code easier to read at a later date ;)

# jquery - 在重复生成的 html 块中使用 id 来导航元素？

> ID：13436899
> 
> 赞同：0
> 
> 时间：2012-11-18T02:25:09.543
> 
> 标签：jquery, html, dynamically-generated

例如，我有 html 块：

```
<div class="span3">
  <div class="firstDiv"></div>
</div>
<div class="span3">
  <div class="secondDiv"></div>
</div> 
```

这个html块的副本可以用javascript插入，所以我有大量的这些块一个接一个。

我想听听关于将 id 放在所有这些元素上以便与它们一起工作是否是一种标准/有效的做事方式的观点。我有一个好方法可以在生成的元素上放置具有匹配后缀的唯一 ID，例如：

```
 ...
  <div class="span3">
    <div id="firstDiv_154 class="firstDiv""></div>
  </div>
  <div class="span3">
    <div id="secondDiv_154 class="secondDiv""></div>
  </div>

  <div class="span3">
    <div id="firstDiv_155 class="firstDiv""></div>
  </div>
  <div class="span3">
    <div id="secondDiv_155" class="secondDiv"></div>
  </div>
  ... 
```

然后作为一般规则，当我单击集合中的 firstDiv 时对 secondDiv 做一些事情，我可以这样做：

```
$('.firstDiv').on ('click', function(evt) {
  var idToFind = $(evt.target).attr('id').replace(/firstDiv/, /#secondDiv/)
  var $secondDiv = $(idToFind);
  // do something with $secondDiv
}); 
```

是否有更有效的方法来使用 id？

如果不使用 id，我可以使用 jQuery：

如果我想从第一个元素中找到第二个元素：

```
$('.firstDiv').parent().next().children() 
```

如果我重新排列元素太多，这会破坏，或者

```
$('.firstDiv').closest('.span3').find('.secondDiv') 
```

这将更健壮，但可能比第一个 jQuery 方法更占用资源。

您（请有经验的网络开发人员）推荐所有这些方法中的哪一种？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:59:22.303

这取决于您要完成的工作。如果您需要一种唯一标识元素的方法，并且在当前设置中没有其他方法可以做到这一点，那么唯一 id 是一个不错的方法。

# c# - 隐式定义时，多维数组是否填充了空值？

> ID：13436901
> 
> 赞同：2
> 
> 时间：2012-11-18T02:25:28.387
> 
> 标签：c#, arrays, class, multidimensional-array, null

我有：

`public static BlockQuadrant[] EditModeBlocks = new BlockQuadrant[9];`

但是当我尝试使用它们时，我得到一个空值异常，显然所有的值都等于空。我认为这是我类**中**`BlockQuadrant`的一个值，但我在构造函数中定义了所有内容。如果是这种情况，有没有办法让它用实际实例`BlockQuadrant`而不是空值填充数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:29:57.240

当您构造一个*引用*对象数组时，它只构造一个数组，而不是其中的对象。您需要通过调用构造函数来初始化各个对象。

您可以使用 LINQ 使用快捷方式，如下所示：

```
public static BlockQuadrant[] EditModeBlocks = Enumerable
    .Range(0, 9)
    .Select(i => new BlockQuadrant())
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T02:29:48.863

循环遍历数组和`new`ing 元素有问题吗？

```
for (int ii = 0; ii < EditModeBlocks.Length; ii++)
{
    EditModeBlocks[ii] = new BlockQuadrant();
} 
```

使用您的初始语句，您已经创建了一个具有默认值的数组。对于引用类型，默认值为`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T02:30:50.777

在使用数组之前，您必须实例化数组中的每个元素，因为数组的元素中包含 null。

```
public static BlockQuadrant[] EditModeBlocks = new BlockQuadrant[9]; 
```

在某些静态方法中，使用循环来实例化它们。

```
private static someMethod()
{
    for (int i = 0; i < EditModeBlocks.Length; i++)
    {
        EditModeBlocks[i] = new BlockQuadrant();
    }
} 
```

# c++ - 由于getline而挂起程序

> ID：13436907
> 
> 赞同：0
> 
> 时间：2012-11-18T02:26:15.987
> 
> 标签：c++, file-io, getline

我正在从文件中读取输入。我知道它的格式。所以我想从文件中读取输入并存储它。我正在尝试使用 getline 读取最后一行，但程序只是挂起。这是我的输入文件数据：

```
6
1 2 2 -4 45 32
123 4234 -234 34534 54 2344
1 2 2 3 4 -234
2 3 -4 -4 4 234
1 11 123 1234 -12334563 2342
2 -234 -23 23 4322 2342
op 2 
```

输入文件中的第一个值表示方阵的行数/列数。然后你有方阵本身。最后，你有一个操作码。

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include <cstdlib>

using namespace std;

int main()
{
    int i,j,matlim;
    int num;
    string matrixlimit;
    string inputfile;
    string operation;
    ifstream data;
    vector< vector<int> > mat1storage,mat2storage;

    cout<<"Please enter an input file name: ";
    cin>>inputfile;    

    data.open(inputfile.c_str());
    if(data.is_open())
    {
    data >> matlim;
    while(!data.eof())
    {
        for(i = 0;i<matlim;i++)
        {
            vector<int> mat1row;
            for (j = 0;j<matlim;j++)
            {
                data >> num;
                mat1row.push_back(num);
            }
            mat1storage.push_back(mat1row);
        }

        getline(data,operation);
        cout << operation;

    }
 }
 data.close();
} 
```

当我在循环中执行简单的“数据>>操作”以从文件中读取最后一行时，程序可以顺利运行。但是当我尝试使用 getline 它不起作用......我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:21:41.823

Getline 读取数据并存储到字符串中，直到找到分隔符。

> 分隔符是`\n`

在文本文件中插入一个空白换行符`op 2`，它应该可以工作

# mysql - MySQL InnoDB，自动增量辅助列？

> ID：13436908
> 
> 赞同：2
> 
> 时间：2012-11-18T02:26:18.747
> 
> 标签：mysql, sql, database, innodb

我有一张放书的桌子，每本书可以有多个副本，我想给每个副本一个副本号。

```
TABLE:
BOOK(book_pk, book_name, book_copy); 
```

基本上每个 book_pk 都是唯一的，但如果有两行具有相同的 book_name，则应将一个 book_copy 设置为 1，另一个设置为 2。

```
TABLE ROWS:
1, AAA, 1
2, BBB, 1
3, AAA, 2
4, CCC, 1
5, BBB, 2 
```

所以我想在插入相同 book_name 的新元组时自动增加主键并跟踪 copyNumber。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:41:52.070

尝试：

```
INSERT INTO Book (book_name, book_copy) 
VALUES ( 
   'AAAA',
    (SELECT copy FROM ( SELECT IFNULL(MAX(book_copy),0)+1 as copy FROM Book) AS d)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T02:30:27.083

简短的版本是在 MySQL 中它不能直接从数据库中完成。也许这最好用两张表来描述。`Book`一桌`BookCopy`一桌。该`Book`表可以像您一样具有自动增量。该`BookCopy`表也有一个自动增量，但引用回该`Book`表。这样一来，您就可以拥有一本没有副本的书，而不能拥有一`BookCopy`本未确定的书`Book`。

```
Book Table
Book(book_pk (auto increment), book_name, ...)

BookCopy Table
BookCopy(book_copy_pk (auto increment), book_pk (foreign key), ...) 
```

# android - “不幸的是，应用名称已停止。” 安卓设备或模拟器

> ID：13436909
> 
> 赞同：2
> 
> 时间：2012-11-18T02:26:28.233
> 
> 标签：android, android-emulator

我是 android 开发的新手，我正在按照一些教程来创建第一个应用程序。当我想运行应用程序时，编译器没有显示错误，但在模拟器中显示“不幸的是，取景器已停止。”

编码：

**AndroidManifest.xml 文件**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
          package="com.example.viewfinderee368" 
          android:versionCode="1" 
          android:versionName="1.0">

    <application android:icon="@drawable/icon" 
                 android:label="@string/app_name">

        <activity android:name=".ViewfinderEE368" 
                  android:label="@string/app_name" 
                  android:screenOrientation="landscape">

                 <intent-filter>
                      <action android:name="android.intent.action.MAIN"/>
                      <category android:name="android.intent.category.LAUNCHER"/>
                 </intent-filter>
        </activity>
    </application>

    <uses-sdk android:minSdkVersion="6"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-feature android:name="android.hardware.camera"/>
    <uses-feature android:name="android.hardware.camera.autofocus"/>

</manifest> 
```

**src/.java 文件**

```
package com.example.viewfinderee368;

import java.io.IOException;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.view.ViewGroup.LayoutParams;

// ----------------------------------------------------------------------

public class ViewfinderEE368 extends Activity {    
    private Preview mPreview;
    private DrawOnTop mDrawOnTop;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Hide the window title.
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        // Create our Preview view and set it as the content of our activity.
        // Create our DrawOnTop view.
        mDrawOnTop = new DrawOnTop(this);
        mPreview = new Preview(this, mDrawOnTop);
        setContentView(mPreview);
        addContentView(mDrawOnTop, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    }
}

//----------------------------------------------------------------------

class DrawOnTop extends View {
    Bitmap mBitmap;
    Paint mPaintBlack;
    Paint mPaintYellow;
    Paint mPaintRed;
    Paint mPaintGreen;
    Paint mPaintBlue;
    byte[] mYUVData;
    int[] mRGBData;
    int mImageWidth, mImageHeight;
    int[] mRedHistogram;
    int[] mGreenHistogram;
    int[] mBlueHistogram;
    double[] mBinSquared;

    public DrawOnTop(Context context) {
        super(context);

        mPaintBlack = new Paint();
        mPaintBlack.setStyle(Paint.Style.FILL);
        mPaintBlack.setColor(Color.BLACK);
        mPaintBlack.setTextSize(25);

        mPaintYellow = new Paint();
        mPaintYellow.setStyle(Paint.Style.FILL);
        mPaintYellow.setColor(Color.YELLOW);
        mPaintYellow.setTextSize(25);

        mPaintRed = new Paint();
        mPaintRed.setStyle(Paint.Style.FILL);
        mPaintRed.setColor(Color.RED);
        mPaintRed.setTextSize(25);

        mPaintGreen = new Paint();
        mPaintGreen.setStyle(Paint.Style.FILL);
        mPaintGreen.setColor(Color.GREEN);
        mPaintGreen.setTextSize(25);

        mPaintBlue = new Paint();
        mPaintBlue.setStyle(Paint.Style.FILL);
        mPaintBlue.setColor(Color.BLUE);
        mPaintBlue.setTextSize(25);

        mBitmap = null;
        mYUVData = null;
        mRGBData = null;
        mRedHistogram = new int[256];
        mGreenHistogram = new int[256];
        mBlueHistogram = new int[256];
        mBinSquared = new double[256];
        for (int bin = 0; bin < 256; bin++)
        {
            mBinSquared[bin] = ((double)bin) * bin;
        } // bin
    }

    @Override
    protected void onDraw(Canvas canvas) {
        if (mBitmap != null)
        {
            int canvasWidth = canvas.getWidth();
            int canvasHeight = canvas.getHeight();
            int newImageWidth = canvasWidth;
            int newImageHeight = canvasHeight;
            int marginWidth = (canvasWidth - newImageWidth)/2;

            // Convert from YUV to RGB
            decodeYUV420SP(mRGBData, mYUVData, mImageWidth, mImageHeight);

            // Draw bitmap
//          mBitmap.setPixels(mRGBData, 0, mImageWidth, 0, 0, 
//                  mImageWidth, mImageHeight);
//          Rect src = new Rect(0, 0, mImageWidth, mImageHeight);
//          Rect dst = new Rect(marginWidth, 0, 
//                  canvasWidth-marginWidth, canvasHeight);
//          canvas.drawBitmap(mBitmap, src, dst, mPaintBlack);

            // Draw black borders                       
//          canvas.drawRect(0, 0, marginWidth, canvasHeight, mPaintBlack);
//          canvas.drawRect(canvasWidth - marginWidth, 0, 
//                  canvasWidth, canvasHeight, mPaintBlack);

            // Calculate histogram
            calculateIntensityHistogram(mRGBData, mRedHistogram, 
                    mImageWidth, mImageHeight, 0);
            calculateIntensityHistogram(mRGBData, mGreenHistogram, 
                    mImageWidth, mImageHeight, 1);
            calculateIntensityHistogram(mRGBData, mBlueHistogram, 
                    mImageWidth, mImageHeight, 2);

            // Calculate mean
            double imageRedMean = 0, imageGreenMean = 0, imageBlueMean = 0;
            double redHistogramSum = 0, greenHistogramSum = 0, blueHistogramSum = 0;
            for (int bin = 0; bin < 256; bin++)
            {
                imageRedMean += mRedHistogram[bin] * bin;
                redHistogramSum += mRedHistogram[bin];
                imageGreenMean += mGreenHistogram[bin] * bin;
                greenHistogramSum += mGreenHistogram[bin];
                imageBlueMean += mBlueHistogram[bin] * bin;
                blueHistogramSum += mBlueHistogram[bin];
            } // bin
            imageRedMean /= redHistogramSum;
            imageGreenMean /= greenHistogramSum;
            imageBlueMean /= blueHistogramSum;

            // Calculate second moment
            double imageRed2ndMoment = 0, imageGreen2ndMoment = 0, imageBlue2ndMoment = 0;
            for (int bin = 0; bin < 256; bin++)
            {
                imageRed2ndMoment += mRedHistogram[bin] * mBinSquared[bin];
                imageGreen2ndMoment += mGreenHistogram[bin] * mBinSquared[bin];
                imageBlue2ndMoment += mBlueHistogram[bin] * mBinSquared[bin];
            } // bin
            imageRed2ndMoment /= redHistogramSum;
            imageGreen2ndMoment /= greenHistogramSum;
            imageBlue2ndMoment /= blueHistogramSum;
            double imageRedStdDev = Math.sqrt( imageRed2ndMoment - imageRedMean*imageRedMean );
            double imageGreenStdDev = Math.sqrt( imageGreen2ndMoment - imageGreenMean*imageGreenMean );
            double imageBlueStdDev = Math.sqrt( imageBlue2ndMoment - imageBlueMean*imageBlueMean );

            // Draw mean
            String imageMeanStr = "Mean (R,G,B): " + String.format("%.4g", imageRedMean) + ", " + String.format("%.4g", imageGreenMean) + ", " + String.format("%.4g", imageBlueMean);
            canvas.drawText(imageMeanStr, marginWidth+10-1, 30-1, mPaintBlack);
            canvas.drawText(imageMeanStr, marginWidth+10+1, 30-1, mPaintBlack);
            canvas.drawText(imageMeanStr, marginWidth+10+1, 30+1, mPaintBlack);
            canvas.drawText(imageMeanStr, marginWidth+10-1, 30+1, mPaintBlack);
            canvas.drawText(imageMeanStr, marginWidth+10, 30, mPaintYellow);

            // Draw standard deviation
            String imageStdDevStr = "Std Dev (R,G,B): " + String.format("%.4g", imageRedStdDev) + ", " + String.format("%.4g", imageGreenStdDev) + ", " + String.format("%.4g", imageBlueStdDev);
            canvas.drawText(imageStdDevStr, marginWidth+10-1, 60-1, mPaintBlack);
            canvas.drawText(imageStdDevStr, marginWidth+10+1, 60-1, mPaintBlack);
            canvas.drawText(imageStdDevStr, marginWidth+10+1, 60+1, mPaintBlack);
            canvas.drawText(imageStdDevStr, marginWidth+10-1, 60+1, mPaintBlack);
            canvas.drawText(imageStdDevStr, marginWidth+10, 60, mPaintYellow);

            // Draw red intensity histogram
            float barMaxHeight = 3000;
            float barWidth = ((float)newImageWidth) / 256;
            float barMarginHeight = 2;
            RectF barRect = new RectF();
            barRect.bottom = canvasHeight - 200;
            barRect.left = marginWidth;
            barRect.right = barRect.left + barWidth;
            for (int bin = 0; bin < 256; bin++)
            {
                float prob = (float)mRedHistogram[bin] / (float)redHistogramSum;
                barRect.top = barRect.bottom - 
                    Math.min(80,prob*barMaxHeight) - barMarginHeight;
                canvas.drawRect(barRect, mPaintBlack);
                barRect.top += barMarginHeight;
                canvas.drawRect(barRect, mPaintRed);
                barRect.left += barWidth;
                barRect.right += barWidth;
            } // bin

            // Draw green intensity histogram
            barRect.bottom = canvasHeight - 100;
            barRect.left = marginWidth;
            barRect.right = barRect.left + barWidth;
            for (int bin = 0; bin < 256; bin++)
            {
                barRect.top = barRect.bottom - Math.min(80, ((float)mGreenHistogram[bin])/((float)greenHistogramSum) * barMaxHeight) - barMarginHeight;
                canvas.drawRect(barRect, mPaintBlack);
                barRect.top += barMarginHeight;
                canvas.drawRect(barRect, mPaintGreen);
                barRect.left += barWidth;
                barRect.right += barWidth;
            } // bin

            // Draw blue intensity histogram
            barRect.bottom = canvasHeight;
            barRect.left = marginWidth;
            barRect.right = barRect.left + barWidth;
            for (int bin = 0; bin < 256; bin++)
            {
                barRect.top = barRect.bottom - Math.min(80, ((float)mBlueHistogram[bin])/((float)blueHistogramSum) * barMaxHeight) - barMarginHeight;
                canvas.drawRect(barRect, mPaintBlack);
                barRect.top += barMarginHeight;
                canvas.drawRect(barRect, mPaintBlue);
                barRect.left += barWidth;
                barRect.right += barWidth;
            } // bin
        } // end if statement

        super.onDraw(canvas);

    } // end onDraw method

    static public void decodeYUV420SP(int[] rgb, byte[] yuv420sp, int width, int height) {
        final int frameSize = width * height;

        for (int j = 0, yp = 0; j < height; j++) {
            int uvp = frameSize + (j >> 1) * width, u = 0, v = 0;
            for (int i = 0; i < width; i++, yp++) {
                int y = (0xff & ((int) yuv420sp[yp])) - 16;
                if (y < 0) y = 0;
                if ((i & 1) == 0) {
                    v = (0xff & yuv420sp[uvp++]) - 128;
                    u = (0xff & yuv420sp[uvp++]) - 128;
                }

                int y1192 = 1192 * y;
                int r = (y1192 + 1634 * v);
                int g = (y1192 - 833 * v - 400 * u);
                int b = (y1192 + 2066 * u);

                if (r < 0) r = 0; else if (r > 262143) r = 262143;
                if (g < 0) g = 0; else if (g > 262143) g = 262143;
                if (b < 0) b = 0; else if (b > 262143) b = 262143;

                rgb[yp] = 0xff000000 | ((r << 6) & 0xff0000) | ((g >> 2) & 0xff00) | ((b >> 10) & 0xff);
            }
        }
    }

    static public void decodeYUV420SPGrayscale(int[] rgb, byte[] yuv420sp, int width, int height)
    {
        final int frameSize = width * height;

        for (int pix = 0; pix < frameSize; pix++)
        {
            int pixVal = (0xff & ((int) yuv420sp[pix])) - 16;
            if (pixVal < 0) pixVal = 0;
            if (pixVal > 255) pixVal = 255;
            rgb[pix] = 0xff000000 | (pixVal << 16) | (pixVal << 8) | pixVal;
        } // pix
    }

    static public void calculateIntensityHistogram(int[] rgb, int[] histogram, int width, int height, int component)
    {
        for (int bin = 0; bin < 256; bin++)
        {
            histogram[bin] = 0;
        } // bin
        if (component == 0) // red
        {
            for (int pix = 0; pix < width*height; pix += 3)
            {
                int pixVal = (rgb[pix] >> 16) & 0xff;
                histogram[ pixVal ]++;
            } // pix
        }
        else if (component == 1) // green
        {
            for (int pix = 0; pix < width*height; pix += 3)
            {
                int pixVal = (rgb[pix] >> 8) & 0xff;
                histogram[ pixVal ]++;
            } // pix
        }
        else // blue
        {
            for (int pix = 0; pix < width*height; pix += 3)
            {
                int pixVal = rgb[pix] & 0xff;
                histogram[ pixVal ]++;
            } // pix
        }
    }
} 

// ----------------------------------------------------------------------

class Preview extends SurfaceView implements SurfaceHolder.Callback {
    SurfaceHolder mHolder;
    Camera mCamera;
    DrawOnTop mDrawOnTop;
    boolean mFinished;

    Preview(Context context, DrawOnTop drawOnTop) {
        super(context);

        mDrawOnTop = drawOnTop;
        mFinished = false;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        mCamera = Camera.open();
        try {
           mCamera.setPreviewDisplay(holder);

           // Preview callback used whenever new viewfinder frame is available
           mCamera.setPreviewCallback(new PreviewCallback() {
              public void onPreviewFrame(byte[] data, Camera camera)
              {
                  if ( (mDrawOnTop == null) || mFinished )
                      return;

                  if (mDrawOnTop.mBitmap == null)
                  {
                      // Initialize the draw-on-top companion
                      Camera.Parameters params = camera.getParameters();
                      mDrawOnTop.mImageWidth = params.getPreviewSize().width;
                      mDrawOnTop.mImageHeight = params.getPreviewSize().height;
                      mDrawOnTop.mBitmap = Bitmap.createBitmap(mDrawOnTop.mImageWidth, 
                              mDrawOnTop.mImageHeight, Bitmap.Config.RGB_565);
                      mDrawOnTop.mRGBData = new int[mDrawOnTop.mImageWidth * mDrawOnTop.mImageHeight]; 
                      mDrawOnTop.mYUVData = new byte[data.length];                    
                  }

                  // Pass YUV data to draw-on-top companion
                  System.arraycopy(data, 0, mDrawOnTop.mYUVData, 0, data.length);
                  mDrawOnTop.invalidate();
              }
           });
        } 
        catch (IOException exception) {
            mCamera.release();
            mCamera = null;
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        // Because the CameraDevice object is not a shared resource, it's very
        // important to release it when the activity is paused.
        mFinished = true;
        mCamera.setPreviewCallback(null);
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewSize(320, 240);
        parameters.setPreviewFrameRate(15);
        parameters.setSceneMode(Camera.Parameters.SCENE_MODE_NIGHT);
        parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
        mCamera.setParameters(parameters);
        mCamera.startPreview();
    }

} 
```

我尝试在模拟器和真实设备中运行该应用程序，并且错误是相同的。

谢谢！

编辑： **LogCat**

```
11-20 02:50:38.943: E/AndroidRuntime(614): FATAL EXCEPTION: main
11-20 02:50:38.943: E/AndroidRuntime(614): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.viewfinderee368/com.example.viewfinderee368.ViewfinderEE368}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.os.Looper.loop(Looper.java:137)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-20 02:50:38.943: E/AndroidRuntime(614):  at java.lang.reflect.Method.invokeNative(Native Method)
11-20 02:50:38.943: E/AndroidRuntime(614):  at java.lang.reflect.Method.invoke(Method.java:511)
11-20 02:50:38.943: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-20 02:50:38.943: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-20 02:50:38.943: E/AndroidRuntime(614):  at dalvik.system.NativeStart.main(Native Method)
11-20 02:50:38.943: E/AndroidRuntime(614): Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
11-20 02:50:38.943: E/AndroidRuntime(614):  at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:215)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.Activity.requestWindowFeature(Activity.java:3225)
11-20 02:50:38.943: E/AndroidRuntime(614):  at com.example.viewfinderee368.ViewfinderEE368.onCreate(ViewfinderEE368.java:52)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.Activity.performCreate(Activity.java:5008)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-20 02:50:38.943: E/AndroidRuntime(614):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-20 02:50:38.943: E/AndroidRuntime(614):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T03:27:59.033

你需要在`setContentView()`旁边有一行`super.onCreate(savedInstance)`

```
 setContentView(R.layout.your_layout_filename); 
```

在初始化任何 UI 组件之前总是调用`setContentView()`，否则你会得到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:59:53.730

看来您是 Android 新手。我强烈建议您通过

[这个链接](http://www.vogella.com/articles/Android/article.html)。它有大量的教程，肯定会有所帮助。

对于你遇到的问题，是因为Activity中没有指定布局。要了解 Activity 是什么，请浏览上面链接或 developer.android.com 上的 Android 教程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T05:19:57.637

将您的 android 版本代码和版本名称更改为当前使用的版本代码和名称。

我一开始也遇到了同样的问题，但它已经解决了..

# asp.net-mvc - 在生产中创建新项目时，MVC 4 应用程序用户有时会被注销

> ID：13436910
> 
> 赞同：2
> 
> 时间：2012-11-18T02:26:27.963
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个 MVC 4 应用程序，并且正在使用默认身份验证提供程序。我没有使用持久性 cookie。

我在开发中没有任何问题，但是在 HostGator 上托管时，我有时会在尝试创建新项目（HTTP POST）时注销。发生这种情况时，我最终会进入登录页面，就像我没有通过身份验证一样。

HostGator 在多个 Web 服务器上没有该应用程序，所以我想我不必担心机器密钥的问题。我错了吗？

发生这种情况时，我只需再次登录并再次创建项目，它就会成功。一旦发生这种情况，我将无法重现该问题。我尝试重新打开浏览器甚至不同的浏览器，但创建项目将始终有效。如果我稍后再尝试，它似乎只会再次发生。

一些附加信息，超时设置为 2880（MVC 项目的默认值），我知道它很长，但我看不出它是如何相关的。不过，我想我会提到它。

因此，我无法查看 IIS 日志或事件查看器来了解可能发生的情况，但我可以向应用程序添加更多日志记录。任何人都可以提供有关要检查什么或要添加什么日志来诊断的想法吗？

谢谢

编辑

我意识到我可以访问 IIS 日志，所以我比较了成功的 POST 和失败的 POST，并立即注意到了一些东西。

当我第一次执行 GET 加载项目/创建页面/视图时，填充了 cs-username 但是当我执行 POST 来创建项目时，它就消失了。我可以看到，当我再次登录并能够成功创建项目时，该 POST 确实填充了 cs-username。

为什么它会在 GET 和 POST 之间消失？从 GET 到 POST 有 7 分钟的延迟，但我可以看到我在 GET 前 1 分钟登录，所以当帖子发生时会话只有 8 分钟。我已经仔细检查过我没有明确配置 sessionstate，所以默认应该是 20 分钟。我觉得我正在做某事，但不确定到底是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:36:10.857

可能值得添加 Glimpse，尽管在已部署的代码上运行它有点冒险。不过，它的好处是可以让您看到服务器上实际发生的事情。我从未使用过 HostGator，所以我不能肯定地说，但如果他们积极回收应用程序池，那会使您的登录无效，并解释为什么注销似乎是随机发生的。

# c# - Nancy - 两个模块监听不同的端口

> ID：13436914
> 
> 赞同：5
> 
> 时间：2012-11-18T02:28:04.063
> 
> 标签：c#, .net, nancy

这个想法是我有两个`NancyModule`类将处理两个不同端口上的流量。例如：

*   `FirstModule`听着`localhost:8081`
*   `SecondModule`听着`localhost:8082`

我目前正在使用在和`Nancy.Hosting.Self`上创建 Nancy 实例：`localhost:8081``localhost:8082`

```
internal static void Main(string[] args) {
    var uris = new Uri[] {
        new Uri("localhost:8081"),
        new Uri("localhost:8082"),
    };

    var host = new NancyHost(uris);
    host.Start();
    Console.ReadLine();
} 
```

如何让课堂`FirstModule : NancyModule`只听端口`8081`和`SecondModule : NancyModule`只听端口`8082`？

```
public class FirstModule : NancyModule {
    public FirstModule(){
        Get["/"] = _ => "Hello from FirstModule!"
    }
}

public class SecondModule : NancyModule {
    public FirstModule(){
        Get["/"] = _ => "Hello from SecondModule!"
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T16:14:12.497

您可以使用自定义引导程序将其拆分为每个服务器的单独项目，以分离 NancyModule 注册。

这个例子是一个三部分的解决方案，每个服务器有两个类库和一个控制台应用程序来启动它们。

第一个服务器项目

```
using System;
using System.Collections.Generic;
using System.Linq;
using Nancy;
using Nancy.Bootstrapper;
using Nancy.Hosting.Self;

namespace Server1
{
    public class Server : NancyModule
    {
        private static NancyHost _server;

        public static void Start()
        {
            _server = new NancyHost(new Bootstrapper(), new Uri("http://localhost:8686"));
            _server.Start();
        }

        public Server()
        {
            Get["/"] = _ => "this is server 1";
        }
    }

    public class Bootstrapper : DefaultNancyBootstrapper
    {
        /// <summary>
        /// Register only NancyModules found in this assembly
        /// </summary>
        protected override IEnumerable<ModuleRegistration> Modules
        {
            get
            {
                return GetType().Assembly.GetTypes().Where(type => type.BaseType == typeof(NancyModule)).Select(type => new ModuleRegistration(type, this.GetModuleKeyGenerator().GetKeyForModuleType(type)));
            }
        }
    }
} 
```

第二个服务器项目

```
using System;
using System.Collections.Generic;
using System.Linq;
using Nancy;
using Nancy.Bootstrapper;
using Nancy.Hosting.Self;

namespace Server2
{
    public class Server : NancyModule
    {
        private static NancyHost _server;

        public static void Start()
        {
            _server = new NancyHost(new Bootstrapper(), new Uri("http://localhost:9696"));
            _server.Start();
        }

        public Server()
        {
            Get["/"] = _ => "this is server 2";
        }
    }

    public class Bootstrapper : DefaultNancyBootstrapper
    {
        /// <summary>
        /// Register only NancyModules found in this assembly
        /// </summary>
        protected override IEnumerable<ModuleRegistration> Modules
        {
            get
            {
                return GetType().Assembly.GetTypes().Where(type => type.BaseType == typeof(NancyModule)).Select(type => new ModuleRegistration(type, this.GetModuleKeyGenerator().GetKeyForModuleType(type)));
            }
        }
    }
} 
```

从单独的控制台应用程序或其他任何方式启动它们

```
using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Server1.Server.Start();
            Server2.Server.Start();
            Console.WriteLine("servers started...");
            Console.Read();
        }
    }
} 
```

# java - 尝试将大字符串与正则表达式匹配时出现 StackOverflow 错误

> ID：13436917
> 
> 赞同：0
> 
> 时间：2012-11-18T02:28:41.000
> 
> 标签：java, regex, string, stack-overflow

我有一个包含自然数的字符串，它们之间有任何模式，如 (,-) 或 (,)。有一段时间 - 条件我确保给定的字符串包含的数字与给定的窗口大小一样少，例如 5。

条件如下所示：

```
while(discretizedTs.substring(lagWindowStart).matches("(-?,?\\d+,){5,}")) {
} 
```

其中 lagWindowStart 跳转到下一个数字或 (-,) 模式的索引。对于小字符串，这个正则表达式工作正常（就测试而言）。我的问题是，对于大字符串（我必须正常处理非常大的字符串），这个正则表达式导致了 SOF。例如，如果字符串包含超过 17k 个字符，就会发生这种情况。

要匹配的字符串的长度是否有限制？还是必须完成匹配的时间限制？如果没有正则表达式，我不知道如何解决给定的问题。我希望你有任何想法..

谢谢你最好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:03:51.747

默认 JVM 堆栈大小相当小。您可以使用 -Xss 选项增加它，例如 -Xss1024k，应该会有所帮助。

# javascript - 如何使 JavaScript 函数继承正常工作

> ID：13436920
> 
> 赞同：1
> 
> 时间：2012-11-18T02:28:48.957
> 
> 标签：javascript, oop, inheritance

我有问题。我正在开发一个相当大的 JavaScript 项目，并且正在学习如何使用 OOP。我相信你知道，这在 JS 中有点奇怪。

所以这就是我想要做的：我有一个基本的“类”，我称之为`AbstractAnimal`. 我有另一个班级叫`Animals`. 在`Animals`课堂内，我有三个组，分别称为`Man`、`Monkey`和`Elephant`。我希望这些组中的每一个都继承`AbstractAnimal`，但成为自己的功能，而不是连接到`AbstractAnimal`.

我最初是这样做的：

```
Animals.prototype.Man = AbstractAnimal;
Animals.prototype.Monkey = AbstractAnimal; //etc... 
```

但是，遗憾的是，这并不能满足我的需要。原因如下：

```
AbstractAnimal.prototype.clicked = function() { console.log("clicked") };
//If I change Man...
animals.Man.clicked = function() { console.log("HA!"); };
//Monkey is effected too...
animals.Monkey.clicked();
//Console: "HA!" 
```

在上面的示例中，当单击 Monkey 时，我希望控制台说“单击”。当单击 Man 时，它应该说“HA！”。

所以我发现了一些我认为可以在这里做的事情：[javascript class inherit from Function class](https://stackoverflow.com/questions/7988566/javascript-class-inherit-from-function-class)

它几乎奏效了，但并不完全奏效。这是一个简化的测试用例：http: [//jsfiddle.net/9KRJk/2/](http://jsfiddle.net/9KRJk/2/)

能帮帮我吗？谢谢！

PS 不，实际上，整个动物都是隐喻的，我实际上并不是在为动物园编程。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T02:45:46.903

不知道我是否很理解你的问题，但也许你把事情复杂化了，或者你错过了一些概念，但你的原型链可以这样表示：

```
// Extends helper
Function.prototype.extends = function( parent ) {
  this.prototype = Object.create( parent.prototype );
};

function Animal() {}
Animal.prototype = {
  clicked: function() {
    console.log('animal');
  }
};

function Man() {}
Man.extends( Animal );
Man.prototype.clicked = function() {
  console.log('man');
};

function Monkey() {}
Monkey.extends( Animal );
Monkey.prototype.clicked = function() {
  console.log('monkey');
};

var animal = new Animal();
animal.clicked(); //=> 'animal'

var man = new Man();
man.clicked(); //=> 'man'

var monkey = new Monkey();
monkey.clicked(); //=> 'monkey' 
```

# css - 相同的颜色代码，不同的显示器不同的效果

> ID：13436921
> 
> 赞同：0
> 
> 时间：2012-11-18T02:28:51.500
> 
> 标签：css, colors

我觉得奇怪的是，相同的颜色代码（例如：#FEE9CC）会根据用户的显示器产生不同的表示。我的电脑连接了两台显示器，我发现了这种行为。我猜有些颜色的表示会波动。那么，始终代表相同方式的颜色是什么？换句话说，

**如何确保我的计算机上的“棕色”实际上是其他人的棕色？**

这是我使用的颜色。它在一台显示器上显示为浅棕色，在另一台显示器上显示为浅粉色。![在此处输入图像描述](../Images/95ac742df876a089ccd43301950857a5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:34:54.903

简而言之，你不能。即使您的用户不会故意摆弄任何硬件颜色设置，他们中的绝大多数也不会为他们的显示器设置正确的[颜色配置文件（除了设计师之外几乎没有人会拥有](http://en.wikipedia.org/wiki/Color_management)[校准过的显示器](http://en.wikipedia.org/wiki/Color_calibration)反正）。

如果您正在从事印刷工作（照片修饰、印前……），这将是一个重要问题，您将使用的工具将为色彩管理提供广泛的功能，预览颜色在另一种介质上的外观（打样） ， 等等。另一方面，Web 浏览器和文件格式根本就不是为准确再现颜色而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T02:32:33.833

排序答案，但你不能。

您和您的计算机可以为正确校准的显示器使用正确的颜色代码，但显示器不会“发送”关于它们的角色以及它们如何呈现的反馈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T02:32:55.160

这是不可能的。

显示器和显卡可以通过多种不同的方式进行配置。有些人喜欢“温暖”的色调，有些人喜欢“冷”。

如果我愿意，我可以将显示器设置为只显示灰色。如果你选择红色，对我来说它是灰色的，如果你选择绿色，它也是灰色的。

# c++ - 便携式硬实时 C 或 C++ 原始以太网协议库

> ID：13436924
> 
> 赞同：5
> 
> 时间：2012-11-18T02:29:16.633
> 
> 标签：c++, c, protocols, real-time, raw-ethernet

我正在尝试创建一个具有硬实时功能的爱好者便携式机器人库（Windows 和 Linux）。它应该能够通过标准以太网连接到微控制器，将固件上传到该设备，通过现场总线连接到其他设备，并将固件上传到运行专用控制器的其他微控制器。如果需要硬实时，则 NIC 将是 RTnet 支持的那些。我希望典型的伺服速率至少为 1 kHz，但最好是 2 kHz 或更高。它将运行一个完全自定义的协议（不是 TCP 或 IP 上的 UDP），因此开销最小，并且高速现场总线可以在不接收或传输帧的情况下饱和。然后可以解释以太网帧中的有效负载或将其发送到连接的设备。

1) 我更喜欢将协议保留在 C++ 中，但知道使用“new”关键字不适用于实时编程。如果我选择使用 C++ 语言而不是将项目转换为 C，我会遇到哪些其他限制？人们是否推荐教如何使用 C++ 并满足严格的实时截止日期的书籍或网站？我相信这是可能的，并且我希望能够继续使用 C++，因为 Orocos 项目使用实时 C++。我宁愿不使用 C 代码。

2) 为了保持可移植协议库的通用性，程序应该如何处理同时在非实时以太网适配器和 RTnet 以太网适配器上运行的协议？

我遇到的一个具体问题是关于可以使用 boost 或 Xenomai 互斥锁的可移植互斥锁类的问题。

问题 2 的解决方案 1 可能如下：如果应用程序也已使用 Xenomai 库编译，则可以使用布尔标志构造互斥锁，以说明哪些方法（boost 或 Xenomai）将在运行时包装以进行锁定和解锁. 如果库是为 Xenomai 编译的，它可能包含 boost 互斥锁和 Xenomai 互斥锁。我不喜欢这个解决方案，因为如果项目是为 Xenomai 编译的，那么它将包含用于 boost 和 Xenomai 的互斥锁的私有变量，这似乎是一种不太优雅的方式，而不是只拥有一个需要的互斥锁。

问题 2 的解决方案 2 可能如下：将 2 个不同的派生类从纯虚拟接口方法的抽象类写入互斥锁，一个用于 boost，一个用于 Xenomai。我更喜欢这种方式，但是在运行时告诉使用哪个类很麻烦。我可能必须有一个提升池和 Xenomai 互斥体。这是大多数硬实时 C++ 程序解决问题的方式吗？

我提出的这个问题不仅仅是一个互斥锁，而是希望收到反馈，因为我不想从一开始就复制糟糕的设计模式。

3) 我相信 Beckoff 的 TwinCAT 可以在 Windows 7 下实时运行 EtherCAT。在 Windows 7 下支持至少一个具有硬实时的 NIC 或之后？也许有一个开源的 Hypervisor 项目。

4）此外，人们如何加载系统，以便他们的四核计算机使用每个内核的 100%，以便他们可以判断他们的系统是否没有实时运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:27:00.177

一个细节：如果你想要一个 1khz 的伺服系统刷新周期，你为什么要使用硬实时？软实时（即以 root 身份运行，但纯用户空间，但将调度程序策略设置为该进程的 FIFO 级别，将所有内容锁定到内存中，禁用交换空间 ...），您将轻松从中获得 1khz，而不会错过任何一个运行一整年的消息。

此时，只需为您的以太网协议使用原始套接字即可。

至于无关的问题，这些天以太网 CD/CA 是在硬件中实现的。只是忽略它们。

# ios - ios spinner在停止命令时没有停止

> ID：13436931
> 
> 赞同：0
> 
> 时间：2012-11-18T02:30:49.203
> 
> 标签：ios, xcode, spinner

我有一个 ios 微调器，当我调用它时（当用户登录时）它变得不隐藏并启动，如果使用代码成功或不成功，应该停止并返回隐藏状态：

```
[spinner stopAnimating]; 
```

然而，由于某种原因，它只是一直在旋转，因此保持不隐藏。我认为像这样简单的事情只需要“微调器停止动画”方法......（顺便说一下，我将微调器命名为“微调器”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:53:04.673

就我而言，我这样做：

```
// on main thread
-(void)spinnerStopAnimating {
    if ([self.activityIndicatorView isAnimating]) {
        [self.activityIndicatorView stopAnimating];
    }
} 
```

在这里，我通过以下方式初始化了我的活动指示器：

```
- (void)awakeFromNib
{
    activityIndicatorView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [self addSubview:self.activityIndicatorView];
} 
```

并以这种方式开始：

```
CGRect rect = self.frame;
self.activityIndicatorView.center = CGPointMake(rect.size.width /2.0, rect.size.height / 2.0);

[self bringSubviewToFront:self.activityIndicatorView];
[self.activityIndicatorView startAnimating]; 
```

这也将微调器定位在视图的中间。

# css - 如何在没有图像的情况下在这样的元素上制作阴影？

> ID：13436934
> 
> 赞同：0
> 
> 时间：2012-11-18T02:31:52.803
> 
> 标签：css

![在此处输入图像描述](../Images/697dec935c1c44e18ac0823fded4b540.png)

如何在没有图像的情况下在这样的元素上制作阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:39:57.247

您可以使用 CSS3 [box-shadow](http://www.css3.info/preview/box-shadow/)属性：

```
.my-box{ box-shadow: 0 0 4px #333333; } 
```

# c# - 如何在正则表达式中转义特殊字符？

> ID：13436936
> 
> 赞同：5
> 
> 时间：2012-11-18T02:32:08.200
> 
> 标签：c#, regex

此代码搜索富文本框并将数组的第一个字段替换为第二个字段。除了两个字段外，一切都很好。

```
iEmo = new string[,] {
  {@":\)",    Smile},
  {@":\(",    Sad},
  {@"8\)",    Cool},
  {@":\|",    Neutral},
  {@";\)",    Wink},
  {@">:\(",   Evil},    // Won't work for this one
  {@">:D",    Twisted}, // Or this one
  {@":\?",    Question,}
}; 
```

这是将数组转换为我想要的部分：

```
public void SetSmiley(RichTextBox RichBox) {
  for (int i = 0; i < (iEmo.Length / 3); i++) {
    try {
      RichBox.Rtf = Regex.Replace(RichBox.Rtf, iEmo[i, 0], iEmo[i, 1], RegexOptions.IgnoreCase);
    }
    catch (Exception e){}
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T03:01:17.307

您的正则表达式看起来不错，但我看到一些阻止它工作的事情：

```
for (int i = 0; i < (iEmo.Length / 3); i++) 
```

我不知道你为什么要除以 3。你应该在这里使用第一个维度的长度：

```
for (int i = 0; i < iEmo.GetLength(0); i++) 
```

此外，由于替换发生的顺序，正常的皱眉`":("`将在“邪恶”脸之前替换`">:("`。当循环到达邪恶的情况时，字符串看起来像`">Sad"`. 您应该以递减的复杂性重新排列替代品，如下所示：

```
iEmo = new string[,]
{
    {@">:\(",   Evil},
    {@":\)",    Smile},
    {@":\(",    Sad},
    {@"8\)",    Cool},
    {@":\|",    Neutral},
    {@";\)",    Wink},
    {@">:D",    Twisted},
    {@":\?",    Question,}
}; 
```

同样，正常的字符串替换将适用于上述更改。

# android - 让android应用程序响应软键盘输入而不显示输入

> ID：13436938
> 
> 赞同：2
> 
> 时间：2012-11-18T02:32:17.230
> 
> 标签：android, android-widget

我对 Android 比较陌生，刚刚花了几天时间发现了对我正在尝试做的事情不起作用的方法。也许有人可以指出我正确的方向。

我目前的需要是在屏幕上显示不同的文本以响应用户在软键盘上输入的字符，而不显示用户输入的内容。EditText 似乎不是为此而设计的，但也许我可以做一些时髦的事情，比如有一个隐藏的 EditText 字段来使用 onTextChanged 捕捉字母，然后在可见的 TextView 字段中显示文本。

我已经尝试过使用 TextView 的关键侦听器，但没有成功。（Eclipse 皱着眉头，但我觉得值得一试。）

任何指针——包括我之前错过的stackoverflow问题——都非常感激地接受了。

编辑：答案没有运气，但我发现了一些有用的东西。在 XML 文件中，我使用了 EditText 视图，但添加了以下属性

```
 android:cursorVisible="false"
        android:editable="false" 
```

不知道这是否是一个不错的解决方案，但它确实有效。

# javascript - 注销确认对话框

> ID：13436939
> 
> 赞同：2
> 
> 时间：2012-11-18T02:32:18.780
> 
> 标签：javascript, jquery, ajax

我已经重定向到 logout.php

```
<a class="menu_button" href="logout.php">Logout</a> 
```

在 logout.php 上，我只是销毁会话并将用户重定向回登录。

我需要的是，当用户单击 menu_button 注销时，显示对话框，要求他确认他要注销。

我知道我可以通过 php new page 做到这一点，但认为这更优雅。

我有这个：

```
<a class="menu_button" href="logout.php" onClick="return confirm('Sure to logout?');">Logout</a> 
```

但是浏览器弹出窗口很难看..

编辑：

这个我用过，还是不行。。。。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/blitzer/jquery-ui.css" type="text/css" />
<script src="jquery/js/jquery.easy-confirm-dialog.js"></script>
<script>
$(".customDialog").easyconfirm({dialog: $("#question")});
</script> 
```

身体

```
<a href="?confirm=true" class="customDialog">Test with custom confirm dialog</a>
  <div class="dialog" id="question"><img src="question.png" alt="" />Do you want to continue?</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:34:20.630

你熟悉[jQuery](http://jquery.com/)（更具体地说是[jQuery ui](http://jqueryui.com/)吗？它们可以让你创建相当漂亮的对话框（我的意思是你可以用它们做任何你可以用你的页面做的事情——以一种简单的方式）。

我还推荐[jquery 简单确认对话框](http://projectshadowlight.org/jquery-easy-confirm-dialog/)插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T02:40:48.587

您可以调整 jQuery UI 对话框。这是非常容易使用。实际上，请尝试[http://jqueryui.com/dialog/#modal-confirmation](http://jqueryui.com/dialog/#modal-confirmation)

# php - 通过嵌套的 foreaches 取消设置多维数组中的键

> ID：13436943
> 
> 赞同：1
> 
> 时间：2012-11-18T02:32:37.063
> 
> 标签：php, multidimensional-array, foreach, nested-loops, unset

似乎很奇怪，我找不到答案，但这里是：

这个：

```
foreach ($stuffs as $stuffRow) {
    foreach ($stuffRow as $stuff) {
        if($stuff=== null){
            unset($stuff);
        }
    }
} 
```

不管用。

我知道我不应该说“不工作”，但这就是我所拥有的。if 条件有效；我已经测试过了。但是，当我应用 unset 时，key=>value 仍然存在。

注意：PHP 5.3

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:42:28.173

虽然这可能有效（我从来没有这样做过，也没有测试过）：

```
foreach ($stuffs as &$stuffRow) {
    foreach ($stuffRow as &$stuff) {
        if($stuff=== null){
            unset($stuff);
        }
    }
} 
```

如果我没记错的话，在foreachs中通过引用传递不是一个好主意（但不记得为什么，可能在某个地方的php文档中，也许有人可以在评论中澄清，但我认为这是因为foreach适用于数组的副本并传递引用传递对副本的引用，而不是原始的，尽管这只是一个有根据的猜测）。相反，试试这个。

```
foreach ($stuffs as $key1=>$stuffRow) {
    foreach ($stuffRow as $key2=>$stuff) {
        if($stuff=== null){
            unset($stuffs[$key1][key2]);
        }
    }
} 
```

顺便说一句，您的代码不起作用的原因是因为 foreach 循环遍历了数组的副本。

# java - servlet 调用顺序

> ID：13436945
> 
> 赞同：0
> 
> 时间：2012-11-18T02:32:41.570
> 
> 标签：java, html, servlets

嗨，我有一个 HTMl 表单，可以自动生成验证码图像，然后根据生成的验证码自动生成音频剪辑​​。表格如下所示。

```
<div class="formRow">
            <div class="field">
                <img style="margin-left:91px; margin-top:-6px;" class="image" src="http://www.abc.com/captchaServlet">
            </div>
            </div>
             <div class="formRow">
                  <div class="field">
                  <audio style="margin-left:91px;" controls="controls">
  <source id="audiowav" src="http://www.abc.com/getSound" type="audio/wav">
Your browser does not support this audio format.
</audio>
                      </div>
             </div> 
```

当生成验证码时，我将验证码代码作为属性存储在会话中，然后当我必须生成音频文件时，我从会话中获取属性并生成它。但有时会发生的是，当我刷新页面时，首先调用音频标签 servlet，即[http://www.abc.com/getSound在](http://www.abc.com/getSound)[http://www.abc.com/captchaServlet](http://www.abc.com/captchaServlet)调用之前调用图像和音频不匹配。所以我想确保首先从表单调用 [http://www.abc.com/captchaServlet然后](http://www.abc.com/captchaServlet)[http://www.abc.com/getSound](http://www.abc.com/getSound)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:54:52.060

您无法保证会发生这种情况，因为浏览器正在决定以何种顺序加载资源，这取决于浏览器，您不能真正强迫它遵循特定的顺序。

你应该让你的验证码以不同的方式工作。也许有页面生成的实际代码并放入会话中，然后`getSound`从`captchaServlet`会话中的代码生成相应的声音或图像？

# objective-c - 提高代码Objective C的处理速度

> ID：13436951
> 
> 赞同：1
> 
> 时间：2012-11-18T02:33:53.987
> 
> 标签：objective-c, multithreading, grand-central-dispatch, block, database-performance

基本上，我的 iPhone 应用程序中有一个图形视图控制器（实际上是几个）。这些图表取决于用户对不同“记分卡”的选择。然而，问题是用户可以选择任意数量的记分卡：他们可以选择数百个。

在生成图表时，我运行了许多算法，它们非常繁重，因为它们会深入核心数据以提取信息，下面是我的一种算法的示例。

```
-(NSDictionary *) stablefordForEachPersonOnCourse:(NSString *) courseName atDate:(NSString *) date
{

NSDictionary *shotsForEachPersonOnCourse = [[NSDictionary alloc]initWithDictionary:[self shotsForEachPersonOnCourse:courseName atDate:date]];
CoreDataHelper *helper = [[CoreDataHelper alloc]init];
NSMutableDictionary *stablefordWithNames = [[NSMutableDictionary alloc]init];

ScoreCard *card = [helper getScoreCardWithDate:date fromCourse:[helper getGolfCourseWithName: courseName]];

 for (int j = 0 ; j < [[shotsForEachPersonOnCourse allKeys]count]; ++j) {

     Player *player = [helper getPlayerWithName:[[shotsForEachPersonOnCourse allKeys]objectAtIndex:j] fromScoreCard:card];

     NSString *teeColour = player.teePlayed;
     NSArray *arrayOfHolesPlayed = [helper getOrderedArrayOfHolesFromPlayer:player];
     NSArray *arrayOfHoles = [helper getOrderedArrayOfHolesFromTee:[helper getTeeWithColour:teeColour fromCourse:[helper getGolfCourseWithName:courseName]]];
     NSMutableArray *stableFord = [[NSMutableArray alloc]init];

     for (int i = 0; i< [arrayOfHolesPlayed count]; i++) {

         HolePlayed *holePlayed = [arrayOfHolesPlayed objectAtIndex:i];
         Hole *hole = [arrayOfHoles objectAtIndex:i];

         int temp1 = 0, shotsGet = 0;

         int handicap = player.handicap.intValue;
         int strokeIndex = hole.holeSI.intValue;
         int par = hole.holePar.intValue;
         int shotScore = holePlayed.holeScore.intValue;

         if (shotScore >0) {
         while (temp1 >= 0) {

             if(handicap - (strokeIndex + (18*temp1))>= 0)
             {
                 ++shotsGet;
                 ++temp1;
             }
             else temp1 = -1;

         }
         int stableford = (0 - (shotScore - (shotsGet + par))+2);
         if (stableford < 0) {
             stableford = 0;
         }

        [stableFord addObject:[NSNumber numberWithInt:stableford]];
         }
         else if (shotScore <1) [stableFord addObject:[NSNumber numberWithInt:0]];
     }

     [stablefordWithNames setValue:stableFord forKey:[[shotsForEachPersonOnCourse allKeys]objectAtIndex:j]];
     }
return stablefordWithNames;} 
```

该算法计算特定记分卡上每个人的 stableford。现在，当用户选择许多记分卡时，我需要一种快速提高此类算法速度的方法。

我已经把这个问题留得很开放了——但是加速我的代码的最好方法是什么。显然，必须使用 Grand Central Dispatch (GCD)，因为这使代码能够在不同的内核上运行，从而提高每单位时间的处理能力 - 但是在此使用 GCD 的最佳方法是什么？另外，我应该把我所有的计算变成块吗？这会显着提高计算速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:58:55.300

> 我已经把这个问题留得很开放了——但是加速我的代码的最好方法是什么？

不要从在问题上抛出更多线程开始。您应该首先关注花费最多时间的事情：

*   中央处理器？
*   输入输出？（包括核心数据）
*   可以使用更好的算法吗？
*   搜索？排序？
*   大量对象创建？
*   程序的某些部分可以用 C 轻松表达吗？

然后尽可能多地降低（迭代），然后重新评估。如果您还没有优化您的实现，那么通常会从初始实现中获得显着的收益（例如 2x-20x 或更多）（同时保持它比并发/多线程实现更易于维护）。您*可能会*从多线程中受益，但这应该是您最后的手段之一，特别是如果您的实现不是为并发执行而设计的（不是线程安全的）。

> 显然，使用 Grand Central Dispatch (GCD) 是必须的……</p>

进行正确的多线程实现可能会花费大量时间，并且还会不必要地消耗/引入大量硬件资源需求。即便如此，还有 GCD 的替代品。

（*如果您应该在 UX 的辅助线程上执行工作，那不仅仅是在问题上抛出更多线程。*）

# android - Android ActionBar 和内容位置

> ID：13436953
> 
> 赞同：1
> 
> 时间：2012-11-18T02:34:35.837
> 
> 标签：android

我正在使用支持包 ActionBar。只需使用标准的“setContentView”。似乎操作栏只是漂浮在内容之上，而不是取代它。我确信我正在做一件非常愚蠢的事情，但它让我发疯。我希望我的内容显示在操作栏下方。

此外，在另一个屏幕上使用带有标签的 viewpager。同样的问题，但更糟。内容占据整个屏幕，操作栏和选项卡位于顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:28:22.093

听起来[windowActionBarOverlay](http://developer.android.com/reference/android/R.attr.html#windowActionBarOverlay)设置为 true。这将导致您所描述的行为，其中 ActionBar 仅位于内容之上。

# c# - ObservableCollection.Remove - 无法将 lambda 表达式转换为类型，因为它不是委托类型

> ID：13436958
> 
> 赞同：3
> 
> 时间：2012-11-18T02:35:42.200
> 
> 标签：c#, c#-4.0

我偶然发现了这种非常奇怪的编译器行为。我正在尝试根据某些条件从 ObservableCollection 中删除项目。这是我的代码中引发错误的内容

```
public ObservableCollection<StandardContact> StandardContacts { get; set; }
....
StandardContacts.Remove(s => s.IsMarked); //Compiler Error 
```

错误如下

```
Error Cannot convert lambda expression to type 'RelayAnalysis_Domain.Entity.StandardContact' because it is not a delegate type 
```

令人惊讶的是，下面的代码以相同的方法工作

```
var deleteCount = StandardContacts.Where(s => s.IsMarked).Count(); //This Works 
```

我的课堂上已经有以下导入

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using System.Data.Entity; 
```

这个问题可能结果很愚蠢，但它让我很头疼。

注意：即使是 Intellisence 也会显示相同的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:41:21.330

Observable 集合的 remove 方法接受 T 类型的输入（在本例中为 StandardContract），而不是`Func<T, bool>`. 如果此功能对您有用，您可以考虑为 ICollection 编写自己的扩展方法：

```
public static void RemoveWhere<T>(this ICollection<T> collection, Func<T, bool> predicate)     {
var i = collection.Count;
while(--i > 0) {
    var element = collection.ElementAt(i);
    if (predicate(element)) {
        collection.Remove(element);
    }
} 
```

哪个可以像这样使用：

```
StandardContacts.RemoveWhere(s => s.IsMarked) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T02:38:30.493

正如错误消息未明确指出的那样，您不能这样做。
`ObservableCollection<T>`没有删除符合条件的项目的方法。（不像`List<T>`, 有`RemoveAll()`）

相反，您可以向后循环遍历集合并调用`Remove()`.

# python - 尝试使用 Python 将字符串拆分为多个部分

> ID：13436965
> 
> 赞同：1
> 
> 时间：2012-11-18T02:36:51.420
> 
> 标签：python, unicode, split

我正在尝试以下列方式拆分字符串。这是一个示例字符串：

```
"Hello this is a string.-2.34 This is an example1 string." 
```

请注意，“”是一个 U+F8FF unicode 字符，字符串的类型是 Unicode。

我想将字符串分解为：

```
"Hello this is a string.","-2.34"," This is an example1 string." 
```

我已经编写了一个正则表达式来拆分字符串，但是使用它我无法获得我想要的数字部分。（第一个字符串中的-2.34）

我的代码：

```
import re
import os
from django.utils.encoding import smart_str, smart_unicode

text = open(r"C:\data.txt").read()
text = text.decode('utf-8')
print(smart_str(text))

pat = re.compile(u"\uf8ff-*\d+\.*\d+")
newpart = pat.split(text)
firstpart = newpart[::1]

print ("first part of the string ----")
for f in firstpart:
f = smart_str(f)
print ("-----")
print f 
```

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T02:49:43.087

`-*\d+\.*\d+`如果要将其保留在以下结果中，则需要将括号括起来`re.split`：

```
import re
text = u"Hello this is a string.\uf8ff-2.34 This is an example1 string."
print(re.split(u'\uf8ff(-*\d+\.*\d+)', text)) 
```

产量

```
[u'Hello this is a string.', u'-2.34', u' This is an example1 string.'] 
```

# postgresql - postgresql数组/复合输出

> ID：13436967
> 
> 赞同：2
> 
> 时间：2012-11-18T02:37:11.280
> 
> 标签：postgresql, escaping

在我的应用程序中，我使用 postgresql 返回复合类型值，如下所示：

```
select row('a','b','c','d'); 
```

此查询返回：

> （A B C D）

我正在使用更复杂的类型，其中包含其他复合类型的数组等。在我的 DB 层中，我解析返回值并从中“解包”数组和其他复合。

问题？

```
select row(array[1,2,3,4]); 
```

和

```
select row('{1,2,3,4}'); 
```

给出完全相同的输出：

> ("{1,2,3,4}")

我如何区分这`'{1,2,3,4}'`意味着什么是常规字符串（可能由用户提供）和什么时候意味着它是数组？

复合字段值中不应该有类似转义序列的东西`{`吗？`}`

PS我不能使用类似的东西`select * from row[1,2,3]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:12:56.603

确定列类型最安全的方法是查询结果集元数据。

我不能告诉你怎么做，因为你没有指定你的框架/语言。一般来说，您需要扩展一些结果集类并在那里解决这种歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:50:42.477

由于您使用的是匿名记录，因此这将具有挑战性。观察：

```
SELECT pg_typeof( row('{1,2,3,4}') ), pg_typeof( row(array[1,2,3,4]) ); 
```

如果可能的话，使用命名类型`CREATE TYPE`而不是匿名记录（`ROW()`构造函数）。然后您可以检查行类型。

```
CREATE TYPE r1 AS (col1 text);
CREATE TYPE r2 AS (col1 integer[]);

SELECT pg_typeof( row('{1,2,3,4}')::r1 ), pg_typeof( row(array[1,2,3,4])::r2 ); 
```

正如 Ondrej 建议的那样，协议级结果集元数据中可能有更多细节，提供了无需使用记录类型即可完成此操作的方法。

# java - 扩展片段中的 FragmentInstantiationException

> ID：13436979
> 
> 赞同：0
> 
> 时间：2012-11-18T02:40:39.770
> 
> 标签：java, android, actionbarsherlock

我想要一个分页布局，其中每个页面都是一个带有项目列表的片段。数据来自单个调用中的 Web 服务，并将被分隔（例如，按关键字）到一个或多个列表中。

我的尝试是使用 ViewPager 并创建了一个“经理”：

```
class PagesManager extends FragmentPagerAdapter 
```

它有一个（数组）适配器列表和一个片段列表。片段是以下实例：

```
class Page extends SherlockListFragment implements OnScrollListener 
```

使用构造函数：

```
public Page(PagesManager manager, int id) 
```

哪些课程会导致 FragmentInstantiationException；我可以通过其他方式将引用和 id 传递给页面并留下一个空的构造函数，但是即使我在适配器上调用 notifyDataSetChanged() 也不会重绘列表。所以我的问题是，我怎样才能让具有不同属性的同一个 Fragment 类的多个实例（ViewPager 中的页面数需要自定义）能够在系统重新实例化它们后恢复它们的配置？我意识到这可能太笼统了，但我觉得我的问题是设计，我确实有代码可以正常工作，除非片段在旋转时被破坏或者应用程序在后台的时间太长。

**编辑** 这是适配器：

```
public class DiscoverListAdapter extends ArrayAdapter<String> {
    private final Context context;
    private DiscoverPagesManager manager;
    private int id;

    public DiscoverListAdapter(Context context, DiscoverPagesManager manager, int id) {
        super(context, R.layout.note_item);

        this.context = context;
        this.manager = manager;
        this.id = id;
    }

    @Override
    public int getCount() {
        return manager.pageGetCount(id);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // load up the stuff
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.note_item, parent, false);

        // now fill it up
        Note note = manager.pageGetNote(id, position);
        ((TextView) rowView.findViewById(R.id.note_item_displayname))
                .setText(note.getUser().getUsername());
        return rowView;
    }

} 
```

我在管理器中创建片段：

```
public DiscoverPagesManager(Context context, FragmentManager fm) {
        super(fm);

        pages = new ArrayList<Fragment>();
        pages.add( new SearchPage() );

        adapters = new ArrayList<DiscoverListAdapter>();
        adapters.add(null);

        notes = new ArrayList<List<Note>>();
        notes.add(null);
DiscoverPage page;
        for(int i=1; i<titles.length; i+=1) {
            page = new DiscoverPage(this, i);
            this.pages.add( page );
            this.adapters.add( new DiscoverListAdapter(context, this, i) );
            this.notes.add(null);
        } 
```

和

```
@Override
public Fragment getItem(int position) {
    return this.pages.get(position);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:05:42.583

我认为你做错了。您需要将 FragmentPagerAdapter 视为只做一件事且仅做一件事：将 Fragment 的处理作为页面进行管理。现在，恰好是您添加到 Fragment 适配器的 Fragment 本身具有处理其中数据的适配器，但这并不意味着这些问题应该完全交叉。您只需将片段添加到您的 FragmentPagerAdapter。然后，在您的 ListFragments 内部，它们将由它们自己的适配器支持。换句话说，管理`ArrayList<DiscoverListAdapter>()`PagerAdapter 的内部是一个很大的禁忌。DiscoverListAdapter 应该在各个片段的 onCreateView 上的 onCreate 中创建。

编辑：

FragmentPagerAdapter 中的 getItem 将适配器中的位置传递给您。您需要将该数据绑定到片段。使用这样一个简单、干净的模式：

```
public class MyFragment extends Fragment {
 private int mPosition;
public static MyFragment newInstance(int position) {
   MyFragment fragment = new MyFragment();
   Bundle bundle = new Bundle();
   bundle.putInt("position", position);
   fragment.setArguments(bundle);
   return fragment;
}

public void onCreate(Bundle savedState) {
  super.onCreate(savedState);
  Bundle data = getArguments();
  mPosition = data.getInt("position");
  //do something based on position

}
} 
```

//在您的 PagerAdapter 中：

```
@Override
public Fragment getItem(int position) {
    return MyFragment.newInstance(position);
} 
```

# objective-c - 打字时加括号？

> ID：13436992
> 
> 赞同：1
> 
> 时间：2012-11-18T02:42:58.920
> 
> 标签：objective-c, ios, xcode, uitextfield

> **可能重复：**
> [本地化电话号码格式](https://stackoverflow.com/questions/12407726/localized-phone-number-formatting)

我正在尝试在您输入电话号码的位置输入，并且**在输入**时，它意识到有这么多字符并在括号中添加：（xxx）xxx-xxxx。我在 Stack Overflow 上查看了我的问题的任何类似答案，并附上了[这个链接](https://stackoverflow.com/questions/7441315/how-to-set-the-textfield-format-as-decimal-while-typing "这个链接")。

但是，我不能使用转换为十进制形式来解决我的问题，但在我可能应该使用`textField:shouldChangeCharactersInRange:withString:`方法这一事实中获得了更多的知识。我还需要在电话号码中添加连字符，但我想如果我可以为一个做，我可以为另一个做。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T03:09:07.017

这个怎么样：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    if (textField.text.length == 0)
     textField.text = [NSString stringWithFormat:@"(%@",textField.text];

    if (textField.text.length == 4)
        textField.text = [NSString stringWithFormat:@"%@) ",textField.text];

    if (textField.text.length == 9)
        textField.text = [NSString stringWithFormat:@"%@-",textField.text];

    if (textField.text.length > 13)
        return NO;

    return YES;
} 
```

# javascript - 自动网址修饰符

> ID：13436994
> 
> 赞同：0
> 
> 时间：2012-11-18T02:43:01.170
> 
> 标签：javascript

从[https://stackoverflow.com/questions/11798336/change-all-website-links-to-affiliate-links-automatically?lq=](https://stackoverflow.com/questions/11798336/change-all-website-links-to-affiliate-links-automatically?lq=1) 1 （第二个）获得了一个小脚本，用于将附属标签添加到 url

这就是我放在页面标题中的内容

```
 <script type="text/javascript" src="http://。。。。。。/js/jquery-1.8.3.min.js"></script>

<script type='text/javascript'>
$("a").click(function() {
    addAffiliate(this);
});

myCode = "http://moe.jlist.com/click/99999999?url=";
myAmazonCode = "&tag=99999999"
    function addAffiliate(link) {
        alert("enterting script: " + link.href);
        if ((link.href).indexOf("jlist.com") > -1 && (link.href).indexOf(myCode) < 0) {
                link.href = myCode + link.href;
        }else if((link.href).indexOf("amazon.com") > -1 && (link.href).indexOf(myAmazonCode) < 0){
                link.href = link.href + myAmazonCode;   
        }
            alert(link.href);
            return true;
        }​
</script> 
```

但是，它不起作用，但是当我使用 jquery 将框架设置为“onload”时，它可以从上面链接提供的 url 在 jsfiddle.net 上运行

其次，我已经转换了另一个购物网站的代码，我想将其集成到我的代码中，这是他们给我的 wut 示例

```
 function convert_aff_links( $_body, $_aff_id = '9999999' )
{
    $_body = preg_replace
    (
        '@://(w+\.)?(playasia|play-asia)\.com/?([^/a-zA-Z])@',
        '://www.play-asia.com/SOap-23-' . '83-' . $_aff_id . '-50-00.html$3',
        $_body
    );

    $_body = preg_replace
    (
        '/paOS-(\d{2})/',
        'SOap-23-' . '83-' . $_aff_id . '-50-$1',
        $_body
    );

    return $_body;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:52:55.020

您在加载 DOM 之前运行它太早了，因此`a`页面中还没有标签可以附加到：

```
<script type='text/javascript'>
$("a").click(function() {
    addAffiliate(this);
});
</script> 
```

将其更改为此，以便在文档加载之前不会运行：

```
<script type='text/javascript'>
$(document).ready(function() {
    $("a").click(function() {
        addAffiliate(this);
    });
});
</script> 
```

# java - 为什么以及何时在 java 中使用 Skeletal 实现

> ID：13436995
> 
> 赞同：17
> 
> 时间：2012-11-18T02:43:09.847
> 
> 标签：java, interface, abstract-class

从 Effective Java Item 18 中它建议我们可以通过提供抽象骨架实现类来组合接口和抽象类。我想知道我们什么时候应该使用骨架实现来模拟多重继承？有什么优点和缺点？有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-18T02:46:11.253

正如您所说，“骨架类”的重点主要是强制执行某些基本规则，这些规则将管理您的设计的使用。接口和抽象类本身无法完成这项工作。以接口为例

1.  您不能指定有关您的方法的任何实现细节
2.  在接口级别指定的变量必须是静态的。
3.  接口不能实现任何东西（类或接口）

所以这意味着单独使用接口来指定设计规则仍然允许滥用接口中定义的操作，您将无法指定重要的类级别变量或充分利用继承。

现在采取抽象类

1.  Java 不支持多重继承，因此无法获得多个类、抽象类或其他类的好处
2.  您不能仅从基于抽象类的设计中获得多态性的全部好处，因为接口（对我而言）位于多态性树的顶部

将两者结合起来可以为您带来两全其美的效果

1.  抽象类可以实现接口。实现类可以扩展您的抽象类以获取接口已实现方法的好处。并且这种链接可以根据需要持续到尽可能多的抽象类，直到具体实现
2.  实现类可以实现标记类型所需的尽可能多的接口。所以你可以有尽可能多`Serializable`的类型接口用于标记，这些接口将被其他接口扩展
3.  实现抽象类（实现接口）的类可以定义为接口的一种类型，以便在实例化为抽象类的子类时从更好的多态性中受益

考虑这个用例

*   你有一个接口，大约有 6 个方法将控制一个类的使用，然后你有一个标记接口，你只需要用于识别目的，所以你可以使用 instanceOf 运算符。
*   现在在第一个接口中，您需要强制执行其中 3 个方法的特定实现，其余 3 个，您将留给类的最终用户。
*   所以接口 A 有 6 个方法定义，接口 B 只是一个类的标记，表示“我是 B 类类”。现在您将拥有类 A，一个抽象类，实现接口 A 和 B
*   在您的抽象类中，您只实现了所需的 3 个方法，然后将其他 3 个方法的实现细节留给该抽象类的最终消费者