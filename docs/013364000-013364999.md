# StackOverflow 问答 13364000-13364999

# php - 使用 Laravel，您可以在迁移过程中更改列名吗？

> ID：13364002
> 
> 赞同：3
> 
> 时间：2012-11-13T15:52:36.507
> 
> 标签：php, laravel

几乎就像标题所说的那样；作为迁移的一部分，我需要更改列名，可以这样做吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T07:38:03.183

## 拉拉维尔 3

是的，它可以完成，但只能使用原始查询。某些 DBMS 不支持更改列名，因此决定不实现此类功能，因为对于某些 DBMS，它会失败。

`DB::raw()`所以不要忘记你可以在迁移中利用原始查询。您可以通过这种方式更改列名。

## 拉拉维尔 4

在 Laravel 4.1 中，您必须`doctrine/dbal`在`composer.json`.

```
"doctrine/dbal": "2.4.*" 
```

运行后`composer update`，您现在可以使用该`renameColumn`方法。

```
Schema::table('users', function($table)
{
    $table->renameColumn('location', 'address');
}); 
```

这会将`location`列重命名为`address.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-16T20:43:23.650

renameColumn() 方法在 Laravel 4.1 中默认不可用，请参阅发行说明：

> 如果您在迁移中使用 renameColumn 函数，则需要将教义/dbal 依赖项添加到您的 composer.json 文件中。默认情况下，这个包不再包含在 Laravel 中。

[http://laravel.com/docs/releases](http://laravel.com/docs/releases)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-26T20:59:06.177

请注意，从 Laravel 4 开始，DB Schema*确实*允许通过[`$table->renameColumn('from', 'to')`](http://laravel.com/docs/schema#renaming-columns).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-04T23:48:47.860

在 Laravel 4的`renameColumn()`功能被修复之前（现在它失败并`There is no column with name`出现错误），你可以使用这样的东西：

```
Schema::table('table_name', function(Blueprint $table) {
    $table->string('new_name')->after('some_other_column_name');
});
DB::table('table_name')->update(array('new_name' => DB::raw('old_name')));
Schema::table('table_name', function(Blueprint $table) {
    $table->dropColumn('old_name');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-19T06:44:39.210

我尝试使用laravel 的模式构建器中提到的[语法，如下所示：](http://laravel.com/docs/schema#renaming-columns)

```
public function up()
{
    if (Schema::hasColumn('lesson_plans', '`desc`'))
    {
        Schema::table('lesson_plans', function(Blueprint $table)
        {
                $table->renameColumn('`desc`', 'comment');
        });
    }
}
    .. 
```

虽然这在我的 localhost 机器上工作得很好。但是，它在 prod 上出现以下错误：

```
[PDO Exception]
SQLSTATE [HY000]: General error: 1366 incorrect string value: '\xD9\x8A\xD8\xB1\xD8\xAC\...' for column 'comment' at row 115 
```

做一些研究..[事实证明](https://stackoverflow.com/a/4793471/766570)这个错误与字符集和排序规则有关..我在网上找不到任何东西告诉我如何使用 laravel 的模式构建器指定这些人（坦率地说，这些例子非常稀缺).. 我只是像这样使用 DB::RAW：

```
public function up()
{
    if (Schema::hasColumn('lesson_plans', '`desc`'))
    {
        DB::select(DB::raw('alter table lesson_plans change `desc` `comment` longtext character set utf8 collate utf8_general_ci default null'));
    }
} 
```

在当地和产品上像魅力一样工作！

关键是**DB::Raw**可以做任何你想做的迁移，而不会遇到 Laravel 的限制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-29T21:57:13.377

根据[https://github.com/laravel/laravel/issues/2146](https://github.com/laravel/laravel/issues/2146)， renameColumn 已被删除并且没有可用的修复：

```
public function renameColumn($oldColumnName, $newColumnName) {
    throw new DBALException("Table#**renameColumn() was removed**, because it drops and recreates the column instead. **There is no fix available**, because a schema diff cannot reliably detect if a column was renamed or one column was created and another one dropped.");
} 
```

对于 Laravel 4.1 和学说/dbal 2.2，这可以在 vendor/doctrine/dbal/UPGRADE 中找到

# ruby - ruby 数组密钥对值？

> ID：13364003
> 
> 赞同：9
> 
> 时间：2012-11-13T15:52:39.533
> 
> 标签：ruby, arrays, hash

我正在尝试配对两个键值对，但我不确定如何实现这一点。以下是我尝试过的：

```
struc = Array[(3,4),(5,6)]
for i in 0..1
    puts "#{struc[i,i]}"
end 
```

但我想要的输出如下（前一个代码块没有产生）：

```
3 4
5 6 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T15:56:19.450

为什么不使用哈希。有了它，您可以：

```
struc = {3 => 4, 5 => 6} 
```

要输出结果，您可以使用 each_pair 方法，如下所示：

```
struc.each_pair do |key, value|
    puts "#{key} #{value}"
end 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-13T15:55:09.077

尝试这个：

```
arr = [[3,4],[5,6]]
arr.each do |(a,b)|
  puts "#{a} #{b}"
end 
```

此外，您的数组语法 ( `Array[(3,4),(5,6)]`) 不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-17T16:08:07.473

在 Ruby 2.3 中，您可以执行以下操作：

```
arr = [[3,4],[5,6]]
arr.each do |a,b|
    puts "#{a} #{b}"
end 
```

# javascript - 如果从后台发送响应，则在内容脚本中执行函数

> ID：13364004
> 
> 赞同：0
> 
> 时间：2012-11-13T15:53:00.963
> 
> 标签：javascript, background, google-chrome-extension, response, content-script

对于我的 Chrome 扩展，我正在尝试将选定的文本发布到 PHP 网页。这个网站上一个已解决的问题（[Chrome 扩展：如何捕获选定的文本并发送到网络服务](https://stackoverflow.com/questions/2626859/chrome-extension-how-to-capture-selected-text-and-send-to-a-web-service)）对我实现这一目标有很大帮助，但我想要一种不同的方式来发布文本。
而不是那里提到的 XMLHttpRequest，我想从内容脚本发送一个隐藏的 JS 表单。此方法允许我在将文本导入数据库之前查看或更改文本。

问题是从后台获取触发器到内容脚本。我已经有一条消息，所以需要使用函数（响应）。但是，在“sendMessage”之外，我无法监听 response.cmd。而在“sendMessage”里面，我无法得到response.cmd来触发一个函数。除了从后台脚本发送全新消息之外，是否有解决方案？我指的代码：

背景.js

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
  if(request.cmd == "createSelectionMenu") {
    sendResponse({cmd: "saveText"}); //Do things
  }
}); 
```

内容脚本.js

```
chrome.extension.sendMessage({ cmd: "createSelectionMenu", data: selectedText },
  function(response) {
    if(response.cmd == "saveText") { 
      createForm();
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:20:30.287

我所做的是：

我跟踪我打开的标签

**内容脚本**：

```
// connect to the background script
var port = chrome.extension.connect(); 
```

**后台脚本**

```
// a tab requests connection to the background script
chrome.extension.onConnect.addListener(function(port) {
  var tabId = port.sender.tab.id;
  console.log('Received request from content script', port);

  // add tab when opened
  if (channelTabs.indexOf(tabId) == -1) {
    channelTabs.push(tabId);
  }

  // remove when closed/directed to another url
  port.onDisconnect.addListener(function() {
    channelTabs.splice(channelTabs.indexOf(tabId), 1);
  });
}); 
```

现在，当某个动作发生时，我可以从后台脚本通知我所有注册的选项卡（即内容脚本）：

```
var notification = { foo: 'bar' };
for(var i = 0, len = channelTabs.length; i < len; i++) {
  chrome.tabs.sendMessage(channelTabs[i], notification, function(responseMessage) {
    // message coming back from content script
    console.log(responseMessage);
  });
} 
```

同样，在内容脚本的另一端，您可以在这些消息上添加一个侦听器：

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
  if (request.foo == 'bar') {
    executeStuff();
    // if a callback is given:
    sendResponse && sendResponse('success');
  }
}); 
```

这有点脑残，因为它在某些地方是多余的。但我最喜欢这样，因为你可以把它包起来，让它更容易一些。

如果您想了解我是如何使用它的，请查看我在 GitHub 上的存储库：[chrome-extension-communicator](https://github.com/dan-lee/chrome-extension-communicator)。

# ios5 - UINavigatorController popViewController:animated 在 iOS 5.1 中显示奇怪的行为，但在 iOS 6 中没有

> ID：13364006
> 
> 赞同：1
> 
> 时间：2012-11-13T15:53:04.707
> 
> 标签：ios5, uinavigationcontroller, popviewcontrolleranimated

我发现了一些我无法在我的 iOS 应用程序中解释的奇怪行为。

我正在使用嵌入在 UITabBarController 子类中的标准 UINavigationController。

当我在 NavigationController 上推送 ViewController 时，动画就很好了。但是，当 ViewController 在 Landscape 中弹出时，弹出动画从屏幕顶部到下端发生，这与预期的从右到左的标准行为相反。

更奇怪的是，TabBar 包含在动画过渡中，而在 Portrait 模式下也不是这样。

这只发生在 iOS 5 设备上，目前我只是不知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T12:35:01.637

我们找到了解决方案。问题是第一个`shouldAutorotateToInterfaceOrientation`只允许旋转的视图控制器`UIInterfaceOrientationPortrait`- 这并不明显，因为它实际上正确地旋转到任何（全局允许的）方向。

所以，这个属性只对推送和弹出行为有影响。现在两个视图控制器（第一个和被推送的）都`shouldAutorotateToInterfaceOrientation`使用`return YES;`. 现在动画是正确的（在横向模式下从左到右，反之亦然，而不是在推动时从右到左，在弹出时从上到下）。

# mongodb - 如何理解我的 MongoDB 挂起的原因

> ID：13364008
> 
> 赞同：1
> 
> 时间：2012-11-13T15:53:19.253
> 
> 标签：mongodb

我编写了一个 PyMongo 脚本来构建大型 MongoDB 表。当它快完成时，它现在突然挂起。设置它的人说，它消耗 2GB 内存已达到极限。

我如何才能调查一般情况？管理员是否应该调整选项以顺利执行（内存限制、缓冲区等）？

我查找了 db.current_op() 并得到：

```
 {'inprog': [{'active': False,
                   'client': '0.0.0.0:0',
                   'desc': 'initandlisten',
                   'lockStats': {'timeAcquiringMicros': {'R': 0,
                                                         'W': 2,
                                                         'r': 6,
                                                         'w': 0},
                                 'timeLockedMicros': {'R': 0, 'W': 100416}},
                   'ns': 'test',
                   'numYields': 0,
                   'op': 'query',
                   'opid': 1,
                   'query': {'options.temp': {'$in': [True, 1]}},
                   'threadId': '0x7fa7c7a71b40',
                   'waitingForLock': False},
                  {'active': False,
                   'desc': 'DataFileSync',
                   'lockStats': {'timeAcquiringMicros': {},
                                 'timeLockedMicros': {}},
                   'ns': '',
                   'numYields': 0,
                   'op': 'none',
                   'opid': 0,
                   'query': {},
                   'threadId': '0x7fa7c4605700',
                   'waitingForLock': False},
                  {'active': False,
                   'desc': 'journal',
                   'lockStats': {'timeAcquiringMicros': {'R': 278218664,
                                                         'W': 20638320},
                                 'timeLockedMicros': {'R': 34804203,
                                                      'W': 313165131}},
                   'ns': '',
                   'numYields': 0,
                   'op': 'none',
                   'opid': 0,
                   'query': {},
                   'threadId': '0x7fa7c3203700',
                   'waitingForLock': False},
                  {'active': False,
                   'client': '0.0.0.0:0',
                   'desc': 'TTLMonitor',
                   'lockStats': {'timeAcquiringMicros': {'r': 2, 'w': 0},
                                 'timeLockedMicros': {'r': 32, 'w': 0}},
                   'ns': 'local.system.indexes',
                   'numYields': 0,
                   'op': 'query',
                   'opid': 22735364,
                   'query': {'expireAfterSeconds': {'$exists': True}},
                   'threadId': '0x7fa7c09ff700',
                   'waitingForLock': False},
                  {'active': False,
                   'desc': 'websvr',
                   'lockStats': {'timeAcquiringMicros': {},
                                 'timeLockedMicros': {}},
                   'ns': '',
                   'numYields': 0,
                   'op': 'none',
                   'opid': 0,
                   'query': {},
                   'threadId': '0x7fa7bfffe700',
                   'waitingForLock': False},
                  {'active': False,
                   'desc': 'clientcursormon',
                   'lockStats': {'timeAcquiringMicros': {},
                                 'timeLockedMicros': {}},
                   'ns': '',
                   'numYields': 0,
                   'op': 'none',
                   'opid': 0,
                   'query': {},
                   'threadId': '0x7fa7c1e01700',
                   'waitingForLock': False},
                  {'active': False,
                   'desc': 'snapshotthread',
                   'lockStats': {'timeAcquiringMicros': {},
                                 'timeLockedMicros': {}},
                   'ns': '',
                   'numYields': 0,
                   'op': 'none',
                   'opid': 0,
                   'query': {},
                   'threadId': '0x7fa7c2802700',
                   'waitingForLock': False},
                  {'active': False,
                   'client': '192.168.101.43:52230',
                   'connectionId': 15,
                   'desc': 'conn15',
                   'lockStats': {'timeAcquiringMicros': {},
                                 'timeLockedMicros': {}},
                   'ns': '',
                   'numYields': 0,
                   'op': 'killcursors',
                   'opid': 22735367,
                   'query': {},
                   'threadId': '0x7fa7834fb700',
                   'waitingForLock': False},
                  {'active': False,
                   'client': '192.168.101.43:51872',
                   'connectionId': 13,
                   'desc': 'conn13',
                   'lockStats': {'timeAcquiringMicros': {},
                                 'timeLockedMicros': {'r': 0, 'w': 18}},
                   'ns': 'kolibri.nodes',
                   'numYields': 0,
                   'op': 'update',
                   'opid': 22735070,
                   'query': {'_id': 'kolibri-236-237-155368'},
                   'threadId': '0x7fa7833fa700',
                   'waitingForLock': False}]} 
```

貌似卡住的操作应该是更新$push。我尝试的另一件事是 db.last_status()：

```
{'connectionId': 15, 'err': None, 'n': 0, 'ok': 1.0} 
```

有人可以帮助我理解这一点，并可能提供一些建议（对于初学者），如何检查发生了什么以及可能对常见错误进行一些有用的操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T02:54:40.973

Mongodb 有许多工具可以为您的系统中发生的事情提供一些透明度。你可以试试：

*   [mongostat](http://docs.mongodb.org/manual/reference/mongostat/)
*   [蒙戈托普](http://docs.mongodb.org/manual/reference/mongotop/)
*   [彩信](http://mms.10gen.com)

前两个应该包含在您的 mongodb 安装中。第三个可从 10gen 免费获得。

# eclipse - Zend Studio 9 - SVN 版本号不显示

> ID：13364011
> 
> 赞同：0
> 
> 时间：2012-11-13T15:53:25.503
> 
> 标签：eclipse, svn, ubuntu, zend-studio

我已经在我的 Ubuntu 12.04 桌面上安装了 Zend Studio 9 (Eclipse) 和 SVN。安装 SVN 后，我收到了一个关于我想安装哪个连接器的问题。服务器使用 subversion 1.4.4，这没有列出。我为 1.5 选择了 SVN KIT 1.3.5。它的工作原理是我可以连接到 SVN 并进行更新。我在 Eclipse 中看不到任何文件的版本号，这对我来说很重要。

在我升级到 12.04 之前它工作正常，所以我想旧的 svn 版本没有问题。我用另一个 1.6 版的 svn-server 进行了测试，我也遇到了同样的问题。

在使用 Zend Studio 8 时，它可以正常工作。我仍然想知道为什么它不适用于版本 9。

这是因为我安装了错误的插件吗？我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:38:27.143

当我打开 Zend Studio 8 时，它创建了另一个工作区。我在那里打开了一个新的 SVN 项目，并且工作正常。然后我决定将工作区更改为原始工作区，并配置我的所有项目。没有数字。所以我打开 Zend Studio 9，将工作区更改为使用 8 创建的工作区，它显示了数字。所以问题出在工作区，我可能必须重建......

# grails - grails 安装-可搜索-配置

> ID：13364015
> 
> 赞同：0
> 
> 时间：2012-11-13T15:53:37.020
> 
> 标签：grails, searchable, grails-searchable, searchable-plugin

我需要重新配置可搜索插件的默认设置。当我尝试运行**install-searchable-config**时，出现以下错误：

Error I/O exception loading script [null\scripts\Init.groovy (系统找不到指定的路径)]: null\scripts\Init.groovy (系统找不到指定的路径)

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:11:47.880

插件需要一个声明良好的 grails 主页，但正如我从异常中看到的那样，您没有。您必须找到并更正 grails 主页定义（在 groovy 课程中）

# c# - Webbrowser 控件的行为与 IE 不同

> ID：13364020
> 
> 赞同：0
> 
> 时间：2012-11-13T15:54:13.760
> 
> 标签：c#, javascript, .net, html, browser

在我的应用程序中，我使用 WebBrowser-Control 来显示本地 HTML 文件。该文件包括 jQuery 和自定义 js 文件。

当我用 IE（本地）打开文件时，一切正常。但是，如果我在我的应用程序中显示带有 WebBrowser 控件的文件，则 JQuery 不能完全正常工作（有些东西可以正常工作，`$.(...)addClass('abc')`但不能正常工作）。

任何人都知道为什么会这样？我`Navigate()`用来导航到 HTML 文件，然后 `InvokeScript`在 WebBrowser 的文档上使用来调用使用 jQuery 的 javascript 函数。我还尝试通过导航到一个`javascript:`不起作用的 -URL 来调用该函数。

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:03:43.160

这是一个很长的镜头，但我已经看到 WebBrowser 控件出于某种原因默认为旧版本的 IE 渲染引擎的实例，即使安装了较新版本的 IE。一些旧版本的 IE 可能会遇到 jquery 问题。

尝试添加一些 js 以确保它使用的是您期望的 IE 版本。

[http://obvcode.blogspot.com/2007/11/easyest-way-to-check-ie-version-with.html](http://obvcode.blogspot.com/2007/11/easiest-way-to-check-ie-version-with.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:42:26.560

Rick Strahl 写了一篇关于这个问题和解决方案的好文章：

[http://www.west-wind.com/weblog/posts/2011/May/21/Web-Browser-Control-Specifying-the-IE-Version](http://www.west-wind.com/weblog/posts/2011/May/21/Web-Browser-Control-Specifying-the-IE-Version)

您必须设置两个注册表项，一个用于 32 位应用程序，一个用于 64 位应用程序。

> 32位：
> 
> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION
> 
> 值键：yourapplication.exe

> 64位：
> 
> HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION
> 
> 值键：yourapplication.exe

将此键设置为（[取自 MSDN here](http://msdn.microsoft.com/en-us/library/ee330730%28v=vs.85%29.aspx#browser_emulation)）作为十进制值的值：

> 9999 (0x270F) Internet Explorer 9。无论 !DOCTYPE 指令如何，网页都以 IE9 标准模式显示。
> 
> 9000 (0x2328) Internet Explorer 9。包含基于标准的 !DOCTYPE 指令的网页以 IE9 模式显示。
> 
> 8888 (0x22B8) 网页以 IE8 标准模式显示，无论 !DOCTYPE 指令如何。
> 
> 8000 (0x1F40) 包含基于标准的 !DOCTYPE 指令的网页以 IE8 模式显示。
> 
> 7000 (0x1B58) 包含基于标准的 !DOCTYPE 指令的网页以 IE7 标准模式显示。

# python - 在 Python 中打印异常，而不是引发异常

> ID：13364023
> 
> 赞同：3
> 
> 时间：2012-11-13T15:54:18.050
> 
> 标签：python, exception, exception-handling

我想捕获一个 Python 异常并打印它而不是重新引发它。例如：

```
def f(x):
    try:
        return 1/x
    except:
        print <exception_that_was_raised> 
```

这应该这样做：

```
>>> f(0)
'ZeroDivisionError' 
```

无一例外被提出。

有没有办法做到这一点，除了在一个巨大的 try-except-except...except 子句中列出每个可能的异常？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T15:55:54.237

使用`message`异常的属性，或者`e.__class__.__name__`如果您想要基本异常类的名称，即`ZeroDivisionError'`在您的情况下

```
In [30]: def f(x):
        try:
                return 1/x
        except Exception as e:
            print e.message
   ....:         

In [31]: f(2)
Out[31]: 0

In [32]: f(0)
integer division or modulo by zero 
```

在 python 3.x 中，该`message`属性已被删除，因此您可以简单地使用`print(e)`or `e.args[0]`，并且`e.__class__.__name__`保持不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:06:45.383

这就是我的工作方式：

```
try:
    0/0
except Exception as e:
    print e 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T16:30:06.807

```
try:
    0/0
except ZeroDivisionError,e:
    print e
#will print "integer division or modulo by zero" 
```

Something like this, Pythonic duck typing lets us to convert error instances into strings on the fly=) Good luck =)

# c# - WCF ChannelFactory.CreateChannel()

> ID：13364026
> 
> 赞同：3
> 
> 时间：2012-11-13T15:54:21.997
> 
> 标签：c#, wcf

为什么我能够做到这一点：

```
var _channel = new ChannelFactory<T>("bindingname").CreateChannel(); 
```

但不是这个

```
var _channelFactory = new ChannelFactory<T>("bindingname");
var _channel = _channelFactory.CreateChannel(); 
```

第二个片段抱怨我需要传入一个`EndPointAddress`in`CreateChannel()`而第一个不需要。

2个片段本质上不是一样的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-05T11:47:17.040

这可能是因为`var _channelFactory = new ChannelFactory<T>("bindingname");` 将 _channelFactory 解析为`IChannelFactory<T>`而不是`ChannelFactory<T>`.

尝试

```
ChannelFactory<T> _channelFactory = new ChannelFactory<T>("bindingname");
var _channel = _channelFactory.CreateChannel(); 
```

[ChannelFactory<T>](http://msdn.microsoft.com/en-us/library/ms576132(v=vs.100).aspx)有一个不带参数的 CreateChannel() 方法。[IChannelFactory<T>](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k(%22SYSTEM.SERVICEMODEL.CHANNELS.ICHANNELFACTORY%601%22);k(TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22);k(DevLang-CSHARP)&rd=true)没有不带参数的 CreateChannel() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:44:16.600

查看 ChannelFactory 的构造函数的签名，唯一将单个字符串作为输入的签名是要求端点配置名称 - 而不是绑定名称。这可能是您问题的根源吗？您可能错误地构造了 ChannelFactory？见下文：-

```
 public ChannelFactory();
    public ChannelFactory(Binding binding);
    public ChannelFactory(ServiceEndpoint endpoint);
    public ChannelFactory(string endpointConfigurationName);
    protected ChannelFactory(Type channelType);
    public ChannelFactory(Binding binding, EndpointAddress remoteAddress);
    public ChannelFactory(Binding binding, string remoteAddress);
    public ChannelFactory(string endpointConfigurationName, EndpointAddress remoteAddress); 
```

# tsql - 过滤 BETWEEN 字符串参数

> ID：13364030
> 
> 赞同：0
> 
> 时间：2012-11-13T15:54:31.590
> 
> 标签：tsql, ssrs-2008

我有一个带有代表季度和年份的文本参数的报告。例如，“1Q11”代表 2011 年第一季度，“2Q13”代表 2013 年第二季度，以此类推。我也有使用这种格式“QuarterYear”的字段的记录。

问题是，我需要将其合并到报告中，以便仅在季度和年份介于参数中指定的数据之间时才显示数据。例如，如果用户选择“1Q12”和“4Q12”，则报表应显示 QuarterYear 值为“1Q12”、“2Q12”、“3Q12”和“4Q12”的所有记录。如果用户选择“1Q12”和“2Q13”，则报表应显示 QuarterYear 值为“1Q12”、“2Q12”、“3Q12”、“4Q12”、“1Q13”和“2Q13”的记录。

这对我来说很难，因为这些不是日期值，所以我不能使用简单的 BETWEEN。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:02:42.540

您是否尝试过将 1Q12 解析为一个日期，在这种情况下，该日期将变为 01/01/2012，结束日期为 31/03/2012？

当您选择 1Q12 到 3Q12 等范围时，请选择 2012 年 1 月 1 日到 2012 年 9 月 30 日之间的报告。

否则（我会说不是推荐的解决方案），您可以编写一个简单的函数，该函数可以循环运行以查找给定范围之间的所有四分之一。并执行诸如递增月份之类的操作（逐月递增 12，并将月份重置为 1）并继续进行直到达到范围的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:10:48.337

对于一个相对较小的表，最简单的方法可能是使用字符串切片 - 所以你的条件是这样的：

```
where ...
right(table_quarter,2)+left(table_quarter,1) >= right(@start,2) + left(@start,1) and
right(table_quarter,2)+left(table_quarter,1) <= right(@end,2) + left(@end,1) 
... 
```

请注意，此条件是不可分割的，即。无法在表的季度列上使用任何索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:21:05.197

如果您可以控制字符串数据的格式，则应考虑将其转换为 12Q3 而不是 3Q12 之类的格式，这样可以轻松`BETWEEN`工作。如果您无法控制该特定字段的格式，另一种选择可能是在原始字段的基础上以这种格式将计算字段添加到表中。`=right(QuarterYear,2)+'Q'+left(QuarterYear,1)`

在这两种情况下，您都可以索引字段以优化`BETWEEN`. 如果这些都不是可用的选项，那么 Mark Ba​​nnister 的解决方案可能是最好的。

# javascript - 对象属性上的猫鼬 findOne

> ID：13364031
> 
> 赞同：5
> 
> 时间：2012-11-13T15:54:35.140
> 
> 标签：javascript, mongodb, mongoose

我有一个猫鼬模式如下

```
var user_schema = new Schema({
    reset : { type: Schema.Types.Mixed, required: true }
}); 
```

其中 reset 被赋予了一个像这样的对象来存储在数据库中

```
{
    id: 23,
    name: 'something'
} 
```

我想根据重置对象中的 id 查找文档。这是我尝试过的，但我从未得到返回结果。

```
models.Users.findOne({ 'reset.id': id }, function (err, user) {
    // user is null 
}); 
```

猫鼬可以进行这样的查找吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:36:08.330

我认为您遇到的问题是使用混合模式类型。

你能不能使用嵌入式文档`Reset`

```
var reset_schema = new Schema({
    id        : Int,
    name      : String
});

var user_schema = new Schema({
    name      : String,
    reset     : reset_schema 
}); 
```

然后像这样查询：

```
models.Users.findOne({ 'reset.id': id }, function (err, user) {

}); 
```

# android - 动态android字符串资源

> ID：13364033
> 
> 赞同：3
> 
> 时间：2012-11-13T15:54:42.107
> 
> 标签：android, android-layout

`HashTable`是否可以从存储库（例如等`List`）而不是 strings.xml获取字符串资源？布局中的所需用途，如

```
<EditText android:id="@+id/inputSearch"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@StringRepository.GetMessage("Search")"
        android:inputType="textVisiblePassword"/> 
```

我的挑战是在应用程序服务器（Web）上维护字符串值并在不更新版本的情况下刷新所有字符串资源（布局和 Java 端）。

我试图遍历实例`onCreate`方法上的所有视图`Activity`，但找不到动态创建视图的解决方案。

任何有助于实现这一挑战的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:03:38.463

不可以。该`@resource`语法仅适用于 XML 定义的资源。如果要在哈希图中定义字符串，则需要在代码中设置视图的提示/文本。

# java - 使用 Eclipse Indigo 的 JD-Eclipse 插件中的 UnsatisfiedLinkError

> ID：13364035
> 
> 赞同：2
> 
> 时间：2012-11-13T15:54:47.440
> 
> 标签：java, decompiler

当尝试使用 JD-Eclipse 0.1.3 版在 Eclipse Indigo 中反编译一个类时，我得到一个 UnsatisfiedLinkError。我将 JDK 7（64 位）与 Eclipse Indigo 64 位版本结合使用。

```
java.lang.UnsatisfiedLinkError: /usr/local/java/eclipse/configuration/org.eclipse.osgi/bundles/798/1/.cp/lib/linux/x86/libjd-eclipse.so: /usr/local/java/eclipse/configuration/org.eclipse.osgi/bundles/798/1/.cp/lib/linux/x86/libjd-eclipse.so: wrong ELF class: ELFCLASS32 (Possible cause: architecture word width mismatch) 
```

# javascript - 创建javascript日期UTC

> ID：13364036
> 
> 赞同：20
> 
> 时间：2012-11-13T15:54:51.090
> 
> 标签：javascript, date, datetime, utc

假设我在控制台中输入以下代码：

```
var TheDate = new Date(2012, 10, 5);
TheDate.toUTCString();
"Sun, 04 Nov 2012 23:00:00 GMT" (I'm +1 hour ahead of GMT) 
```

结果是日期实际上设置为本地时间。如何创建设置为 UTC 的日期？如果我这样做，`TheDate.toUTCString()`我希望它说 2012 年 11 月 5 日 00:00:00 GMT。

谢谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-13T16:00:54.273

使用[`Date.UTC()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC)方法：

```
var TheDate = new Date( Date.UTC(2012, 10, 5) );
console.log( TheDate.toUTCString() ); 
```

返回

```
Mon, 05 Nov 2012 00:00:00 GMT 
```

> **日期.UTC**
> 
> 接受与构造函数的最长形式相同的参数，并返回 Date 对象中自 1970 年 1 月 1 日 00:00:00（通用时间）以来的毫秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T08:58:49.120

我找到了它的**简写**，您还可以以**ISO 格式**创建日期，`new Date('YYYY-MM-DD')`以便将日期创建为**UTC**：

```
var DateA = new Date( '2012-11-05' );
console.log( DateA.toUTCString() );

// note the difference between input methods

var DateB = new Date( Date.UTC(2012, 10, 5) );
console.log( DateB.toUTCString() );
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-13T15:58:42.327

我建议你使用 momentjs (

> momentjs.com

)，那么您所要做的就是：

```
var theDate = new Date(2012, 10, 5),
    utcDate = moment.utc(theDate); 
```

# android - 如何在Android中表示随机json对象

> ID：13364038
> 
> 赞同：2
> 
> 时间：2012-11-13T15:54:57.073
> 
> 标签：android, json

我在我的 Android 应用程序中使用以下库 -> [Google/Gson。](http://code.google.com/p/google-gson/) 我不知道如何将以下 json String 表示为适当的类来抽象它。

```
"random_chunks": [
    {
        "2013-01-01T10:00:00+00:00": {
            "available": 61,
            "in_inventory": 61,
            "in_service": 61,
            "percent_in_inventory_available": 100,
            "percent_in_service_available": 100
        }
    }, 
```

基本上我们有一个名为“random_chunks”的数组，其中包含一个动态名称为“2013-01-01T10:00:00+00:00”的对象。

这是我的想法：

```
public class RandomChunks {
    @SerializedName("random_chunks")
    private foo[] chunks;

    public class foo extends Object {
        // Here is where I get stuck
} 
```

如何定位这个随机名称？我不能说@SerializedName("some random string")。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:21:26.877

你的结构有点奇怪，简洁：

```
"random_chunks": [
{
    "2013-01-01T10:00:00+00:00": { } 
} , 
.... ] 
```

在我看来，更自然的表达方式是直接使用字段：

```
 "random_chunks": {
    "2013-01-01T10:00:00+00:00": { },
    "2012-01-01T10:00:00+00:00": { },
    ...
 } 
```

上面的JSON是一个Map，即`randomChunks = Map<String, Stuff>`

在您的情况下，由于您无法更改格式，我相信可以（但不是很干净）将其表示为地图数组：

```
 private Map<String, Stuff>[] weirdObjects; 
```

实际上，所有这些地图都会非常无聊，并且只有一个键，即您要查找的一个字段。这不是表示它的最有效方式，但看起来这就是你所得到的。

注意：我对 GSON 不太*熟悉*，所以我不确定它是否可以处理。不过杰克逊可以。

# ios - IOS：不从中心拖动imageView

> ID：13364042
> 
> 赞同：0
> 
> 时间：2012-11-13T15:55:06.230
> 
> 标签：ios, touch, drag

我有这个代码来拖动一个 imageView：

在接触开始：

```
CGPoint point = [touch locationInView:self];
[imageView setCenter:point]; 
```

在 touchmoved:

```
CGPoint point = [touch locationInView:self];
[imageView setCenter:point]; 
```

此代码允许在我的手指下拥有 imageview 并将其从其中心移动。但我想要一些东西，让我不仅可以从 imageview 的中心拖动一个 imageview，还可以从 imageview 的另一个点拖动它......如果我触摸这个 imageView 就不能拖动它......你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:00:29.313

您需要弄清楚触摸是如何移动的，而不是仅仅将中心点设置为触摸点。

将接触点存储在变量中。

在接触开始...

```
storedPoint = [touchLocationInView:self]; 
```

然后在touchesMoved...

```
CGPoint currentPoint = [touch locationInView:self];

CGPoint vector = CGPointMake(currentPoint.x - storedPoint.x, currentPoint.y storedPoint.y);

[imageView setCenter:CGPointMake(imageView.center.x + vector.x, imageView.center.y + vecotr.y)];

storedPoint = currentPoint; 
```

反正是这样的。

要忽略触摸，您可以在 touchesBegan 中说...

```
if (!CGRectContainsPoint(imageView.frame, [touch locationInView:self])
{
    //ignore touch
    trackTouches = NO;
}

trackTouches = YES; 
```

（trackTouches 是一个类变量）

然后在 touchesMoved 中仅在 trackTouches == YES 时执行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:04:01.690

您需要： A) 测试触摸是否在 imageView B) 计算触摸与 imageView 中心之间的差异。一旦您知道 x/y 差异，您就可以做一些简单的数学运算，以相对于用户触摸的 imageView 上的位置移动中心。

这个网站上有很多关于 A 的例子，B 应该是直截了当的。

# c# - C# 数据网格视图

> ID：13364043
> 
> 赞同：0
> 
> 时间：2012-11-13T15:55:07.597
> 
> 标签：c#, datagridview

我是 C# 新手

尝试从 c# 中的数据网格执行更新语句，基本上我正在执行以下操作以尝试将值携带到更新语句，有人可以告诉我引用单元格的正确方法，以便它将值作为字符串对于 sql 语句，我一直在这样做，但显然它是错误的。

```
 AssetNumberV = dgvAssetCost.CurrentCell.ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:03:28.777

您可以使用此代码：

```
string item = dataGridView1["columnName", dataGridView1.CurrentRow.Index].Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:00:54.227

你在winforms中尝试这个吗？如果是这样，这样的事情可能会有所帮助；

```
 string Result =  dgvAssetCost.Rows[dgvAssetCost.CurrentRow.Index].Cells["columnNameHere"].Value.ToString(); 
```

在这里，您引用了一行，该行收集在您的单元格 onclick 事件中，然后为其指定列名。

# mobile - 使用 TCP 的小数据包是个坏主意？使用 UDP 更好

> ID：13364045
> 
> 赞同：1
> 
> 时间：2012-11-13T15:55:11.353
> 
> 标签：mobile, tcp, udp, client-server

我看过帖子说，当您将信息分解成更小的数据包时，TCP 的吞吐量会降低。但我正在制作一个真正只需要发送少量信息的游戏服务器。这是一款回合制策略游戏，所以我可以用 1 台服务器支持的玩家数量比延迟更重要，我已经说过无论如何我都想学习如何控制未来项目的延迟。

那么对于很多小数据包来说，UDP 是更好的选择吗？我确实需要它们是可靠的，所以如果我丢失数据包，我将不得不重新发送......另外，UDP数据包的实际丢失率是多少？假设服务器在正常情况下运行会高达 5-10% 吗？我应该提到客户端将在移动设备上......他们的丢失率可能比PC高得多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:31:50.613

无论是什么协议——TCP、UDP 或其他任何协议——许多较小的数据包将比较少的较大数据包效率低。每个数据包都有一个固定大小的标头（或者更准确地说，一个具有最小尺寸但在某些情况下可能更大的标头）以及可能还有一个尾部，因此对于吞吐量有限的网络管道，用以下数据包填充它标头 + 尾标 + 1 字节有效负载意味着几乎所有容量都被元数据使用，而不是实际数据。在每个数据包中发送更大的数据块可以提高效率。也就是说，有时您的应用程序架构没有太多数据要发送，因此您可以选择小数据包或更大的延迟，同时聚合一堆数据包以一次发送。弄清楚采取哪种方法（或介于两者之间的方法，甚至）是设计应用程序的一部分。在您的特定情况下，使用基于回合的方法，如果我正确理解您的意思，那么后续数据包之间的时间段已经很重要（无论如何按网络时间尺度），所以小数据包可能是最佳路线。由于数据包之间的延迟较大，您的小数据包流对整体吞吐量的影响可能可以忽略不计。

可靠性无疑增加了复杂性。从编码的角度来看，使用 TCP 会使可靠性变得“容易”，但根据网络的实际特性，编写自己的重新发送 UDP 代码最终可能是更好的路由，尤其是当通道的整体可靠性降低时。TCP 在大多数情况下会恢复，但由于某些事件而导致的各种超时和调整方式可能会在不太可靠的通道上出现问题（许多 VPN 解决方案基于 UDP 的主要原因之一）。

预测实际丢失率高度依赖于网络，但您可能是正确的，遍历`LAN - internet - LAN - mobile network`（或某些类似拓扑）的丢失明显高于本地 LAN 丢失。

# ios - 为什么 ABGroupAddMember 失败？它返回 NO 并且不设置 CFErrorRef 值

> ID：13364049
> 
> 赞同：2
> 
> 时间：2012-11-13T15:55:27.143
> 
> 标签：ios, contacts, abaddressbook

我需要防止在我们的应用程序中显示联系人组，但是从地址簿中简单地删除组对用户来说是一种干扰。所以我试图在显示联系人之前删除它们，然后在完成后将它们添加回来，以便地址簿保持不变，iOS 联系人应用程序按原样显示组。我创建了两个数组来存储信息：

```
NSArray *aGroups;
NSMutableArray *aGroupMembers; 
```

我删除组，存储它们，并在 viewWillAppear 中显示选择器：

```
// Remove group records for the life of this view.
CFErrorRef error;
ABAddressBookRef abRef = ABAddressBookCreate();
NSArray *groups = (NSArray *)ABAddressBookCopyArrayOfAllGroups(abRef);
if (groups.count > 0) {

    // we will remove the groups so save for restoration
    self.aGroups = [[NSArray alloc] initWithArray:groups];
    aGroupMembers = [[NSMutableArray alloc] initWithCapacity:groups.count];
    for (int i = 0; i < groups.count; i++) {

        NSArray *members = (NSArray *)ABGroupCopyArrayOfAllMembers([groups objectAtIndex:i]);
        NSMutableArray *memberIDs = [[NSMutableArray alloc] initWithCapacity:[members count]];
        for (id member in members) {
            ABRecordID ID = ABRecordGetRecordID(member);
            [memberIDs addObject:[NSNumber numberWithInteger:ID]];
        }

        [aGroupMembers insertObject:memberIDs atIndex:i];
        CFRelease(members);
        [memberIDs release];

        // Remove the group from the addressbook
        ABAddressBookRemoveRecord(abRef, [groups objectAtIndex:i], &error);
    }

    CFRelease(groups);
    ABAddressBookSave(abRef, nil);
    self.picker.addressBook = abRef;
}

CFRelease(abRef); 
```

然后在 viewWillDisappear 和 willResignActive 我“尝试”重新创建组，将成员重新添加到每个组并添加回地址簿。但是我无法重新添加成员，因为 ABGroupAddMember() 失败。当我在调试器中检查变量时，GroupName 和 person 的名字都是正确的。我看不到问题，并且没有设置 CFErrorRef 值。

```
// Restore the group records.
if (self.aGroups != nil) {

    CFErrorRef error = nil;
    CFTypeRef grpName = nil;
    CFTypeRef firstName = nil;
    ABRecordRef newGroup = nil;
    ABAddressBookRef abRef = ABAddressBookCreate();

    // Re-create the groups
    for (int i = 0; i < self.aGroups.count; i++) {

        // Create the new group
        newGroup = ABGroupCreate();
        grpName = ABRecordCopyValue((ABRecordRef)[self.aGroups objectAtIndex:i], kABGroupNameProperty);
        ABRecordSetValue(newGroup, kABGroupNameProperty, grpName, &error);

        // Create the members
        NSArray *memberIDs = (NSArray*)[aGroupMembers objectAtIndex:i];
        for (NSNumber *iD in memberIDs) {

            ABRecordRef person = ABAddressBookGetPersonWithRecordID(abRef,iD.intValue);
            firstName = ABRecordCopyValue((ABRecordRef)person, kABPersonFirstNameProperty);                
            BOOL bSuccess = ABGroupAddMember(newGroup, person, &error);
            if (!bSuccess) {
                //NSString *errorStr = [(NSString *)CFErrorCopyDescription(error) autorelease]; // this cause EXEC_BAD_ACCESS
                CFRelease(error);
            }
        }

        CFRelease(newGroup);
        CFRelease(grpName);
    }

    // Save the changes
    ABAddressBookSave(abRef, nil);

    CFRelease(abRef);
    self.aGroups = nil;
    [aGroupMembers removeAllObjects];
    aGroupMembers = nil;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:16:40.560

`iPhone`当我尝试将通过协议从 Google同步到我的联系人添加到`CardDAV`以编程方式创建的本地组时，这发生在我身上。

事实证明，您无法将同步的联系人添加到本地组，反之亦然，但它只是返回`NO`而没有将`error`参数设置为任何错误消息来解释它为什么不起作用。

我通过尝试将联系人添加到组中解决了我的应用程序，如果它不起作用，我通过在我的应用程序中本地保存联系人组关系来解决它。

不是很好，如果有人有办法解决这个问题，我会很高兴听到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:10:58.807

`ABAddressBookAddRecord`在尝试使用 将成员添加到组之前，您可能需要将组记录添加到地址簿`ABGroupAddMember`。

# css - IE 中的 z-index 问题仅适用于动态数据

> ID：13364059
> 
> 赞同：3
> 
> 时间：2012-11-13T15:55:54.627
> 
> 标签：css, internet-explorer, z-index

我只有在 IE 中的 z-index 有问题。当我从数据库加载数据时，用户可以滚动徽标，CSS 弹出框将显示描述。它在除 IE 之外的所有浏览器中都能正常工作。弹出框 z-index 似乎没有被调用。它将呈现在当前徽标之前绘制的徽标上方，但将显示在之后绘制的徽标下方。

见[http://tempcfo.com/testimonials.php](http://tempcfo.com/testimonials.php)

这是我的代码

CSS...

```
.thumbnail{
position: relative;
}

.thumbnail:hover{
text-decoration:none;

}

.thumbnail span{ /*CSS for enlarged image*/
position: absolute;
background:#E2E2E2;
background-repeat:no-repeat;
padding: 0px;
visibility: hidden;
color: black;
text-decoration: none;
width:265px;
height:195px;
}

.thumbnail span img{ /*CSS for enlarged image*/
border-width: 0;
padding:0px;
float:left;
z-index:0;
}

.thumbnail:hover span{ /*CSS for enlarged image on hover*/
visibility: visible;
top: -77px;
padding:10px;
left:135px; /*position where enlarged image should offset horizontally */
float:left;
text-decoration:none;
z-index:500;
}

.thumbnail2{
position: relative;

}

.thumbnail2:hover{
text-decoration:none;

}

.thumbnail2 span{ /*CSS for enlarged image*/
position: absolute;
background:#E2E2E2;
background-repeat:no-repeat;
padding: 0px;
visibility: hidden;
color: black;
text-decoration: none;
width:265px;
height:195px;
}

.thumbnail2 span img{ /*CSS for enlarged image*/
border-width: 0;
padding:0px;
float:right;
z-index:0;
}

.thumbnail2:hover span{ /*CSS for enlarged image on hover*/
visibility: visible;
top: -77px;
padding:10px;
right:138px; /*position where enlarged image should offset horizontally */
float:right;
text-decoration:none;
z-index:500; 
```

}

HTML...

```
<div id="logos" >
        <table cellspacing="5" >
             <tr>

            <td valign="top" bgcolor="#EDEDED" align="center" height="105" width="140">

            <a class="thumbnail"  href="#success_page" style="border:none; outline:none; cursor:default;">
            <img src="images/logo/20120830005810.png"width="85%" border="0" />

            <span>
            <table>
                <tr>
                    <td class="popup_title">
                    </td>
                </tr>
                <tr>
                    <td class="short_desc">
                    “I hired tempCFO on a contracting basis to be the first CFO of my start-up company. They performed their role extremely well, building up our chart of accounts, developing a sophisticated financial model, creating powerful board presentations and overseeing the accounting function.
-Tom Mohr, Digital Air Strike                    </td>
                </tr>
                <tr>
                    <td class="quotee">
                     Tom Mohr - Digital Air Strike                     </td>
                </tr>
            </table>
            </span>

    </a>

     <table  width="138" >

              </table>
            </td>

            <td valign="top" bgcolor="#EDEDED" align="center" height="105" width="140">

            <a class="thumbnail"  href="#success_page" style="border:none; outline:none; cursor:default;">
            <img src="images/logo/20120830005827.png"width="85%" border="0" />

            <span>
            <table>
                <tr>
                    <td class="popup_title">
                    </td>
                </tr>
                <tr>
                    <td class="short_desc">
                    Mitrionics AB is the technology leader in FPGA-based processing for Accelerated Computing, providing greater processing performance and a greener computing alternative, because of lower energy consumption.                    </td>
                </tr>
                <tr>
                    <td class="quotee">
                                         </td>
                </tr>
            </table>
            </span>

    </a>

     <table  width="138" >

              </table>
            </td>

            <td valign="top" bgcolor="#EDEDED" align="center" height="105" width="140">

            <a class="thumbnail2" href="#success_page" style="border:none;outline:none; cursor:default;">

            <img src="images/logo/20120830005843.png"width="85%" border="0" />

           <span>
            <table>
                <tr>
                    <td class="popup_title">
                    </td>
                </tr>
                <tr>
                    <td class="short_desc">
                    RelayHealth provides connectivity solutions that make it easy for consumers and healthcare organizations to securely exchange information.                    </td>
                </tr>
                <tr>
                    <td class="quotee">
                                         </td>
                </tr>
            </table>
            </span>

    </a>

     <table  width="138" >

              </table>
            </td>

            <td valign="top" bgcolor="#EDEDED" align="center" height="105" width="140">

            <a class="thumbnail2" href="#success_page" style="border:none;outline:none; cursor:default;">

            <img src="images/logo/20120830005855.png"width="85%" border="0" />

           <span>
            <table>
                <tr>
                    <td class="popup_title">
                    </td>
                </tr>
                <tr>
                    <td class="short_desc">
                    Propero Solutions offers world-class expertise in agile software development, Scrum methodology, agile project management, extreme programming (XP), lean and kanban development methods.                    </td>
                </tr>
                <tr>
                    <td class="quotee">
                                         </td>
                </tr>
            </table>
            </span>

    </a>

     <table  width="138" >

              </table>
            </td>
                         </tr>
                <tr>        
            <td valign="top" bgcolor="#EDEDED" align="center" height="105" width="140">

            <a class="thumbnail"  href="#success_page" style="border:none; outline:none; cursor:default;">
            <img src="images/logo/20120830005906.png"width="85%" border="0" />

            <span>
            <table>
                <tr>
                    <td class="popup_title">
                    </td>
                </tr>
                <tr>
                    <td class="short_desc">
                    Glam Media is the pioneer and global leader of Vertical Media—a revolutionary new media model that combines our flagship properties with curated publisher sites and their passionate, engaged audiences.                    </td>
                </tr>
                <tr>
                    <td class="quotee">
                                         </td>
                </tr>
            </table>
            </span>

    </a>

...... 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:53:44.383

我想通了。页面很旧，是别人写的。他们正在使用这个

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"> 
```

一旦我升级到

```
<!DOCTYPE html> 
```

z-index 开始正常工作。这么简单，浪费了这么多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:00:28.877

我很确定这与 IE 处理 z-index 的方式有关。在 Internet Explorer 中，定位元素会生成一个新的堆叠上下文，从 z-index 值 0 开始。因此 z-index 无法正常工作 - 为父元素提供更高的 z-index 通常会修复该错误。

我打算看看是否可以给您一个如何更改代码的示例，但您似乎正在对您提供的示例 URL 进行更改。

# vba - 循环遍历excel中的两行数据以匹配单元格并将字符串添加到vba中的新单元格

> ID：13364060
> 
> 赞同：1
> 
> 时间：2012-11-13T15:55:54.690
> 
> 标签：vba, excel

我有一列唯一值（A）和第二组列，其中的值来自一组唯一值（B）和另一个值（C）。

本质上，我要做的是遍历所有唯一值 A，然后有一个内部循环来遍历 B，它可能多次具有来自 A 的相同值，并且每次找到匹配项时，添加值（ C) 到一个连接的字符串，然后当它找到所有这些值时，将其插入一个新单元格并移动到下一个 A 值并执行相同操作。

我遇到了各种错误，并尝试了几种方法，但根本不经常使用 VBA，我没有到达那里，也没有找到任何好的信息。

关于如何做到这一点的任何帮助或想法都会有所帮助，下面是我正在使用的代码。

这基本上就是电子表格的样子

```
Column A ----- Column B -------- Column C 

A-----------------A---------------stringA  
A-----------------A --------------stringB
C-----------------B---------------stringC 
```

所以在我的新列中，列 AI 旁边会插入 stringA、stringB。

希望这是有道理的。

```
Sub contactStuff()
    Dim roleName As String
    Dim rowNumber As Integer
    Dim userName As String
    Dim userRoleName As String
    Dim concatString As String
    Dim roleNumber As Integer
    roleNumber = 2
    rowNumber = 2
    For Each c In Worksheets("parentRoles").Range("C2:C856").Cells
        roleName = c.Value
        Do
            userRoleName = Worksheets("parentRoles").Range("G" & rowNumber)
            If userRoleName = roleName Then
                contactString = concatString & ", " & Worksheets("parentRoles").Range("E" & rowNumber)
                rowNumber = rowNumber + 1
            End If
        Loop While userRoleName = roleName
        Worksheets("parentRoles").Range("D" & roleNumber).Value = concatString
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:42:14.890

```
Sub Button1_Click()
    Dim a As Long
    Dim b As Long
    Dim colA As Long
    Dim colB As Long
    Dim newString As String

    ' gets the last row in a column '
    colA = ActiveSheet.Cells(ActiveSheet.Rows.Count, 1).End(xlUp).Row
    colB = ActiveSheet.Cells(ActiveSheet.Rows.Count, 2).End(xlUp).Row

    With Worksheets("Sheet1")
        ' First loop takes you through each unique value in column A '
        For a = 1 To colA
            newString = ""
            ' For every unique value in column A loop through column B and get the value from column C to build your string '
            For b = 1 To colB
                If .Cells(b, 2) = .Cells(a, 1) Then
                    If newString <> "" Then
                        newString = newString & ", " & Cells(b, 3) ' gets the value from col C and adds it to your new string '
                    Else
                        newString = Cells(b, 3)
                    End If
                End If
            Next
            ' Place the new string in column D'
            .Cells(a, 4).Value = newString
        Next
    End With
End Sub 
```

使用以下列：

```
Col A   Col B   Col C
a         a       1 
b         b       1 
c         c       1 
          a       2 
          b       2 
          c       2 
          a       3 
          b       3 
          c       3 
```

您最终会在 Col D 中得到以下输出：

```
1, 2, 3
1, 2, 3
1, 2, 3 
```

# azure - 将站点更新从 Orchard 部署到 Azure

> ID：13364061
> 
> 赞同：0
> 
> 时间：2012-11-13T15:55:57.357
> 
> 标签：azure, orchardcms

我有一个果园网站。此站点当前正在部署到 Windows Azure。最初的部署花了我大约 20 分钟。但是，我现在正在进行一些模板更改。我注意到，每次我尝试推广 Azure 更新时，都需要 10 到 15 分钟。这是正常的吗？我有什么误解吗？在我看来，对 .css 进行微小的更改应该能够相当快地从 Orchard 部署到 Azure。

有人可以帮助我了解如何更有效地将 Orchard 站点更新部署到 Azure 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:09:46.807

听起来您使用的是 Azure Web 角色而不是 Azure 网站，对吗？如果是这样，这是正常的，没有办法绕过它。这是 Azure web/worker 角色部署方式的限制。

Azure 项目构建输出两个工件：(1) 一个 .cspkg 文件，它是一个部署到 Azure 的包，以及 (2) 一个服务定义 .cscfg 文件，它告诉 Azure 如何配置您的站点；有多少实例，实例大小等。

.cspkg 包包含您所有的站点代码、.css、.js、web.config 等，为了更改其中任何一个，即使是微不足道的 .css 编辑，您也必须重新部署整个包。我认为 Orchard 的基本安装包文件大约为 20MB。没有办法解决这个问题。

在不进行冗长的重新部署的情况下，唯一可以更改的是服务配置中的内容。您可以上传该文件的更新版本。

如果这对你来说是不可接受的，你可以考虑切换到部署更灵活的 Azure 网站。您可以通过 FTP 和 Git 进行部署，我认为这可以让您进行更精细的更改，并且速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:48:31.860

在 Azure 托管服务中升级部署通常需要大约 10-15 分钟。如果您只想检查您的更改在已发布服务器上的外观，请连接您的 Azure 服务器上的远程桌面，上传您的新 css 文件并刷新您的浏览器！您甚至可以更新主题或模块的视图。但请注意，不要指望这些文件会在不升级您的实例的情况下保留在那里。

# ios - IOS 模拟器上未处理的电话号码

> ID：13364062
> 
> 赞同：9
> 
> 时间：2012-11-13T15:56:01.913
> 
> 标签：ios, cordova, tel

我正在为 IOS 开发基于 phonegap 的应用程序，该应用程序已经为 Android 完成。我在 html 页面上有以下链接：

```
<a href="tel:0180123456789">0180123456789</a> 
```

Android 设备正确解释它。如果我在 XCode 中的 iPhone 模拟器上单击此链接，控制台会给我以下反馈：

> 无法加载网页并出现错误：无法显示 URL

这仅仅是因为模拟器吗？我还不能在真实设备上测试它，这就是为什么现在无法为我检查它的原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T16:19:50.423

这似乎是模拟器的问题。当我在模拟器中运行它时，我会遇到与您相同的错误，但在设备上它可以完美运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T04:30:02.420

根据[Apple URL Scheme Reference](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/PhoneLinks/PhoneLinks.html)：

> 如果设备上未安装电话应用程序，则打开电话 URL 会向用户显示适当的警告消息。

将其安装在设备中，如果没有其他问题，您的点击通话链接将起作用。

# java - 如何监控hbase的major compaction

> ID：13364067
> 
> 赞同：7
> 
> 时间：2012-11-13T15:56:13.927
> 
> 标签：java, hbase

我想监控 hbase 的主要压缩。对于我想知道的每张桌子

*   何时启动（由 hbase 或用户）
*   当它完成时

我怎样才能监控这个？

*   通过 JMX？
*   通过用户界面？

一般来说，我应该监控哪些附加参数来检测是否需要进行主要压实？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T09:37:25.017

我知道答案有点晚了，但你也可以试试 Hannibal，而不是手动查看日志文件。它是一个开源工具，可为每个区域提供历史图表。这些图表显示了压缩发生的时间以及它们花费了多长时间。

[https://github.com/sentric/hannibal/](https://github.com/sentric/hannibal/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T00:29:44.250

HBase 通过 Apache Hadoop 的指标系统导出大量指标。这些指标也通过 jmx 公开。所以[ganglia](http://www.ryangreenhall.com/2010/10/monitoring-hadoop-clusters-using-ganglia/)或[jmx](http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html)是开始观察 HBase 导出的指标的非常简单的方法。其他选项包括 OpenTSDB 和专有条目。

在 ganglia 或 jmx 内部，您要查看的指标是 hbase.regionserver.compactionQueueSize。这是已安排的压缩次数。

RegionServer UI 还包括一些指标的副本，包括 compactionQueueSize。![这是 0.94 版本的屏幕截图。](../Images/cf27e93990e7fb05f6051ef8497c21bf.png)更高版本的 HBase 看起来会更好，但这给出了一个示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-06T19:59:13.037

这是 hbase 版本 0.96 和 0.98 的情况

当压缩开始时，可​​以从以下位置收集 HBase 压缩的状态： `<hbase.master.ip>:<hbase.master.info.port>/dump` 即`10.4.4.40:60010/dump`

在标题为

**服务器：**

```
 <hostname>,60020,1406845954503: ...<other stuff here>...
    totalCompactingKVs=9121040186, currentCompactedKVs=14351361679,
    compactionProgressPct=1.5734347,... 
```

`compactionProgressPct`给出您当前正在处理的已完成压实的百分比。

一个更友好的查看压缩的方法在这里：

`http://<hbase.regionserver.ip>:<hbase.regionserver.info.port>/rs-status#queueStats`

它将为您提供如下所示的统计信息： ![在此处输入图像描述](../Images/5db5b7c012887f3e0b5efa2782e493cd.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-23T18:02:43.810

可以从 Hbase 日志或 Regionservers GUI 中查看压缩状态，但是如果我们有大量事务，则很难从日志中跟踪压缩区域状态。GUI 仅显示同一节点上的压缩状态，并且在 GUI 中查看很繁琐如果我们有“n”个区域服务器

> 将收集跨区域服务器的在线压缩区域状态的实用程序下载到给定表。Github[链接](https://github.com/karthikpshva/hbaseutility/blob/master/src/main/java/com/alpha/hbase/compaction/StatusUtil.java)到`StatusUtil.java`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-27T19:28:21.397

我们可以通过 JMX 获取压缩状态。

compactionQueueSize, compactionSizeNumOps, compactionSizeAvgTime, compactionSizeMinTime, compactionSizeMaxTime, compactionTimeNumOps, compactionTimeAvgTime, compactionTimeMinTime, compactionTimeMaxTime

启用 JMX 指标，如[http://hbase.apache.org/metrics.html所示](http://hbase.apache.org/metrics.html)

[您可以在此处](https://github.com/karthikpshva/hbaseutility/blob/master/src/main/java/com/alpha/hbase/metrics/JMXRegionServer.java)下载 JMX 示例

# android - When a Google Play in-app subscription auto-renews, does it send another purchase notification (in app notify)?

> ID：13364070
> 
> 赞同：7
> 
> 时间：2012-11-13T15:56:22.093
> 
> 标签：android, in-app-purchase, subscription

As the title says, I am interested in learning whether the Google Play in-app subscription model sends a new IN_APP_NOTIFY for each auto-renewal or if the developer must wait for the purchaseTime to indicate expired and then pull the next purchase token. If the answer is the latter, then how does one retrieve the active purchase token rather than revive the old transaction which has expired? Thank you for any insight that you may provide.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T17:16:51.447

**No**, for every renewal it will send an email containing transaction information to **your user**.

If you are using in-App billing version 2 google play notify your app about expiry at the end of the active cycle that the purchase state of the subscription is now **"Expired"**.

but from version 3 it will not send any notification to your app but This is your responsibility to check at every launch about subscription expiry.

With In-app Billing Version 3, when you call `getPurchases` you will get a `bundle` which will not have product details which got expired.

# c# - ExceptionPolicyImpl 类型有多个长度为 2 的构造函数。无法消除歧义。微软错误

> ID：13364071
> 
> 赞同：2
> 
> 时间：2012-11-13T15:56:23.893
> 
> 标签：c#

在尝试调试我的程序并且无法找到解决方案时，我是构建和接收以下错误消息的新手。请有人帮助：

错误：

```
Microsoft.Practices.ServiceLocation.ActivationException: Activation error occured while trying to get instance of type ExceptionPolicyImpl, key &quot;General Exception Policy&quot; ---> Microsoft.Practices.Unity.ResolutionFailedException: Resolution of the dependency failed, type = &quot;Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyImpl&quot;, name = &quot;General Exception Policy&quot;.
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The type ExceptionPolicyImpl has multiple constructors of length 2\. Unable to disambiguate. 
```

代码：

```
catch (Exception ex)
        {
            if (ExceptionPolicy.HandleException(ex, "General Exception Policy")) { throw; }
        } 
```

网络配置：

```
 <?xml version="1.0"?>
    <configuration>
      <configSections>
        <sectionGroup name="system.web.extensions"    type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions,     Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup,     System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler"     type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="MDS_HE_CS" value="K31fZXPsRsNicTKZjYZEY5fztMAjJakZCPHR0jg/ktpCbA3eOZCRNPUKzyaall3dEH/9WJxtzA0lqnAF8zZd9g=="/>
    <add key="MDS_HG_CS" value="K31fZXPsRsN6eqRj7RG3iVGFHQJHlaKXZ7Wid8/O8n5n1i0PmLRKA99KkjVlX/si2CmQhRimqOUy2NU2rgeaDg=="/>
    <add key="MDS_SG_CS" value="K31fZXPsRsNsK1mZRedCcsX2NTeAU++y10mRWBHyjeJdhMPf4Li57rQhS5bNE40YyMdyn76xQbRQDASc+Hvnmg=="/>
    <add key="MDS_MG_CS" value="K31fZXPsRsM3r7gLICawWaaUMSj4U2tx0feh+eT/BzLaXFBWqFUEF19zpXG7HKvwZKpvEoNi3gBTjoyK5+zb1Q=="/>
    <add key="MDS_TST_CS_2" value="K31fZXPsRsOprCPavJFNNxdlljNGgQ0MVZ1H7bN9t/QRDacO5cEv0Iu6jzkehAeGHy+VJn2um3hgtf8s0tYL9Q=="/>
    <add key="MDS_TST_CS" value="K31fZXPsRsOE2fkrlag8a9x2CK4E35/9G/IxK0WRidmU9Su4O81qAI8CwXPhFU5W5OBMV4k+K523h4nmSt6VlQ=="/>
    <add key="MDS_KEY" value="80e995ebfb724ffca2f11205cb8ad0eb"/>
  </appSettings>
  <connectionStrings/>
  <system.web>
    <!--
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </assemblies>
    </compilation>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
    <authentication mode="Windows"/>
    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
  <system.web.extensions>
    <scripting>
      <webServices>
        <!--
              Uncomment this section to enable the authentication service. Include 
              requireSSL="true" if appropriate.

          <authenticationService enabled="true" requireSSL = "true|false"/>
          -->
        <!--
              Uncomment these lines to enable the profile service, and to choose the 
              profile properties that can be retrieved and modified in ASP.NET AJAX 
              applications.

          <profileService enabled="true"
                          readAccessProperties="propertyname1,propertyname2"
                          writeAccessProperties="propertyname1,propertyname2" />
          -->
        <!--
              Uncomment this section to enable the role service.

          <roleService enabled="true"/>
          -->
      </webServices>
      <!--
        <scriptResourceHandler enableCompression="true" enableCaching="true" />
        -->
    </scripting>
  </system.web.extensions>
  <!--
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
  </system.webServer>
  <system.serviceModel>
    <services>
      <service name="CNP.MDS.AMS35.Webservice35.Service1" behaviorConfiguration="CNP.MDS.AMS35.Webservice35.Service1Behavior">
        <!-- Service Endpoints -->
        <endpoint address="" binding="wsHttpBinding" contract="CNP.MDS.AMS35.Webservice35.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="CNP.MDS.AMS35.Webservice35.Service1Behavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-17T11:26:39.480

您需要添加`<loggingConfiguration>`和`<exceptionHandling>`标记以登录 web.config 文件，因为我无法在您的 web.config 文件中找到。

# sql - 光标练习不起作用

> ID：13364082
> 
> 赞同：0
> 
> 时间：2012-11-13T15:57:21.083
> 
> 标签：sql, sql-server-2008, cursor

知道为什么这段代码在 Sql Server 中不起作用吗？

```
CREATE PROCEDURE sum_salaries(OUT sum INTEGER) 
  LANGUAGE SQL
  BEGIN
    DECLARE p_sum INTEGER;
    DECLARE p_sal INTEGER;
    DECLARE c CURSOR FOR SELECT SALARY FROM EMPLOYEE;
    DECLARE SQLSTATE CHAR(5) DEFAULT '00000';

     SET p_sum = 0;

     OPEN c;

     FETCH FROM c INTO p_sal;

     WHILE(SQLSTATE = '00000') DO
        SET p_sum = p_sum + p_sal;
        FETCH FROM c INTO p_sal; 
     END WHILE;

     CLOSE c;

     SET sum = p_sum;

  END% 
```

它给出了各种各样的错误：

> 消息 102，级别 15，状态 1，过程 sum_salaries，第 3 行“OUT”附近的语法不正确。消息 155，级别 15，状态 2，过程 sum_salaries，第 6 行“整数”不是公认的 CURSOR 选项。消息 155，级别 15，状态 2，过程 sum_salaries，第 7 行“整数”不是公认的 CURSOR 选项。消息 155，级别 15，状态 2，过程 sum_salaries，第 9 行“CHAR”不是公认的 CURSOR 选项。消息 102，级别 15，状态 1，过程 sum_salaries，第 15 行“p_sal”附近的语法不正确。消息 102，级别 15，状态 1，过程 sum_salaries，第 17 行“DO”附近的语法不正确。消息 102，级别 15，状态 1，过程 sum_salaries，第 19 行“p_sal”附近的语法不正确。消息 102，级别 15，状态 1，过程 sum_salaries，第 24 行 '=' 附近的语法不正确。

或者，如果您可以将我指向一个教授游标使用的大量文章/网站，那也很棒。此示例取自： http: [//publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp ?topic=%2Fcom.ibm.db2.luw.apdv.routines.doc%2Fdoc%2Fc0024361.html&resultof =%22%63%75%72%73%6f%72%22%20](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.routines.doc%2Fdoc%2Fc0024361.html&resultof=%22%63%75%72%73%6f%72%22%20)

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:02:38.653

你不需要光标来做到这一点

```
create procedure sum_salaries
(
    @sum int output
) 
as
begin
    select @sum = sum(salary) from employee
end 
```

但是，如果您想使用光标，请尝试

```
create procedure sum_salaries
(
    @sum int output
) 
as
begin
    declare @p_sum int, @p_sal int

    declare c cursor for
        select salary from employee

    set @p_sum = 0

    open c

    fetch from c into @p_sal

    while @@fetch_status = 0
    begin
        set @p_sum = @p_sum + @p_sal
        fetch from c into @p_sal
    end

    close c
    deallocate c

    set @sum = @p_sum
end 
```

# .net - 如何在 EF2 linq 中将用户定义的函数调用到实体？

> ID：13364083
> 
> 赞同：2
> 
> 时间：2012-11-13T15:57:25.203
> 
> 标签：.net, entity-framework, linq-to-entities

有没有办法在使用实体框架 v2 时从 LINQ 调用 SQL Server 用户定义函数到实体？

我找到了一种使用 Entity Framework 4 的方法（此[博客文章](http://thedatafarm.com/blog/data-access/ef4-model-defined-functions-level-1-amp-2/)中解释了所有内容，但似乎 EdmFunctionAttribute 类在 EF4 中不可用 :(

如果不可能，在 LINQ to entity 中编写复杂的 where 子句的最佳方法是什么？这是我的功能的摘录，向您展示它的复杂程度：

```
IF @ageOfReferenceType = 3 or @ageToCompareType = 3 -- if one is expressed in weeks
    BEGIN
        --convert both to weeks
        SET @ageOfReference = @ageOfReference * CASE @ageOfReferenceType
                WHEN 1 THEN 52
                WHEN 2 THEN 4
                WHEN 3 THEN 1
            END
        SET @ageToCompare = @ageToCompare * CASE @ageToCompareType
                WHEN 1 THEN 52
                WHEN 2 THEN 4
                WHEN 3 THEN 1
            END
    END
    ELSE -- last solution, one is in years and the other in months
    BEGIN
        -- convert both to months
        SET @ageOfReference = @ageOfReference * CASE @ageOfReferenceType
                WHEN 1 THEN 12
                WHEN 2 THEN 1
            END
        SET @ageToCompare = @ageToCompare * CASE @ageToCompareType
                WHEN 1 THEN 12
                WHEN 2 THEN 1
            END
    END
END
IF @ageToCompare >= @ageOfReference
BEGIN
    RETURN 1
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:30:13.300

我的问题似乎没有解决方案，所以我将把整个 linq 到实体查询封装到一个存储过程中，该过程将能够调用我的 UDF。

# internet-explorer - PDF 下载无法在 IE 或 Chrome 中打开

> ID：13364084
> 
> 赞同：0
> 
> 时间：2012-11-13T15:57:27.977
> 
> 标签：internet-explorer, google-chrome, pdf, download

我正在处理一个处理大量文档下载（.pdf、.docx、.pptx 等）的网站的内容。它们通过远程桌面连接上传到 ASP.NET 站点。我注意到某些 PDF 文档无法打开。单击链接获取文件后，下载将完成，但扩展名似乎丢失，计算机不知道如何打开文件。它会告诉我 Windows 无法打开它，声称文件类型为“未知”，并询问我是否要搜索要使用的正确程序。

我可以选择保存文件并添加 .pdf 扩展名（然后它会打开）。但是，对于不熟悉此过程的潜在用户来说，这不是一个很好的解决方案。

这只发生在 Chrome(v23) 和 IE9 中。我在 Mac 和 PC 上测试过。Firefox 可以很好地下载 PDF。所有浏览器均已更新。我桌面上的 PDF 可以正常打开。

我尝试禁用/启用所有与 Adob​​e PDF 相关的加载项和插件。我已经重新安装了 Adob​​e Acrobat 和 Reader。我使用过 Acrobat 和 Reader Internet Options，如在线几个地方所述。到目前为止，没有运气，我完全没有想法。

有没有人知道发生了什么？将不胜感激。

# jquery - 循环遍历 JSON 中的键和值

> ID：13364086
> 
> 赞同：-1
> 
> 时间：2012-11-13T15:57:32.977
> 
> 标签：jquery

这是返回的 JSON

```
var errorsObject = JSON.parse('{ "fieldErrors": {"name":["You must enter your name1"],"name":["You must enter your name2"],"age":["Only people ages 13 to 19 may take this quiz"]}}'); 
```

下面的代码第一个循环工作正常，我得到键名，如姓名、年龄等。在第二个循环中，想要获取从外循环中选择的键的值。`Issue is errors.fieldErrors[key]`. 我首先只需要循环带有名称的键并获得 2 个值。

```
$.each(errors.fieldErrors, function(key, val) {
    alert("key->" + key); //Fine
    $.each(errors.fieldErrors[key], function(index, val) {
        alert("key->" + key + ", val->" + val);
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T15:59:53.747

一个对象不能两次包含相同的键，因此您尝试做的事情是不可能的。解析 JSON 时，第一条消息会丢失。

但是，您的值是数组 - 为什么不更改返回 JSON 的代码以正确使用这些数组？假设它是由 PHP 代码创建的，你可以创建这样的 JSON 闻起来就像有人使用字符串函数来创建它，而不是`json_encode`- 另一件应该改变的事情......

# visual-studio-2012 - CodedUI v11 多浏览器支持

> ID：13364089
> 
> 赞同：2
> 
> 时间：2012-11-13T15:57:40.833
> 
> 标签：visual-studio-2012, coded-ui-tests

我正在尝试在 chrome 中运行 Codedui 测试。这是我正在使用的代码：

```
BrowserWindow.CurrentBrowser = "chrome";
var browser = BrowserWindow.Launch(new Uri("http://msdn.com")); 
```

但是我遇到了异常：“当前不支持浏览器 chrome”。我安装了 VS2012 Ultimate 和“用于编码 UI 跨浏览器测试的 Selenium 组件”。

我做错了什么还是有什么我需要检查的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:30:59.410

我相信我在跨浏览器和 CodedUi 测试方面遇到了类似的问题。我认为这是由于兼容性问题以及我所读到的 VS2012 CodedUi 只能在 IE 中运行的事实。希望此链接可以帮助您，或者至少为您提供解决方案的起点。抱歉，我无法提供进一步的帮助。

[CodedUI 跨浏览器插件](http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/30/introducing-cross-browser-testing-with-coded-ui-tests.aspx?ocid=soc-n-eg-elite--MRadwan)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:10:20.030

这让我开始了。在我安装并对一些测试用例进行了一些调整之后，我能够在 Chrome 上运行编码的 ui 测试。

[http://go.microsoft.com/fwlink/?LinkId=267598](http://go.microsoft.com/fwlink/?LinkId=267598)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T12:13:28.487

您应该安装 VS2012 更新 1 或更高版本才能使用此功能

# c# - 在没有完整路径的情况下检索子文件夹名称的快速方法

> ID：13364090
> 
> 赞同：0
> 
> 时间：2012-11-13T15:57:43.173
> 
> 标签：c#

我知道那里有重复，但我尝试了大约 10 种方法，它需要 6 毫秒到 29 毫秒之间，每个文件夹平均大约需要 10 毫秒才能从`Directory.GetDirectories()`.

我发现的最快的是`System.IO.Path.GetFileName(fullPath)`，但仅差一点`string.SubString(string.LastIndexOf(@"\")`；

`C:\`我正在编写一个更好的 Windows Explorer 版本，但展开并显示所有子文件夹大约需要半秒钟。半秒可能看起来不多，但是 Windows 和我看过的另一个程序会立即出现。

我唯一能想到的就是对文件进行索引并将索引存储为 XML，我想这可以在启动时完成。

我只是好奇 Windows 和另一个控件如何在同一台 PC 上更快地完成它。C# 和托管代码是否比非托管 C++ 慢？

更新：

这是日志条目的示例，我意识到使用 File.AppendAllText 必须打开和关闭文件，但是许多操作只需要 1 毫秒即可完成，因此唯一慢的时间是 SetDirectoryName，它的完成方式如下：

```
public void LoadChildNodes()
        {
            // clear the child nodes
            this.ChildPanel.Controls.Clear();

            // if this path exists
            if (Directory.Exists(this.Path))
            {
                // get the log
                WriteLogEntry("After Path Exists: " + stopWatch.Elapsed.Milliseconds.ToString());

                // get the directories for this node
                string[] tempDirectories = Directory.GetDirectories(this.Path);

                // get the log
                WriteLogEntry("After GetDirectories: " + stopWatch.Elapsed.Milliseconds.ToString());

                // if there rae one or more directories
                if ((tempDirectories != null) && (tempDirectories.Length > 0))
                {  
                    // reverse the list
                    List<string> directories = new List<string>();

                    // iterate the strings
                    foreach (string tempDirectory in tempDirectories)
                    {
                        // add this item
                        directories.Add(tempDirectory);
                    }

                    // now set the directories
                    directories.Reverse();

                    // log the time
                    WriteLogEntry("After Reverse Directories: " + stopWatch.Elapsed.Milliseconds.ToString());

                    // iterate the directory names
                    foreach (string directory in directories)
                    {
                        // log the time
                        WriteLogEntry("After Start Iterate New Directory: " + stopWatch.Elapsed.Milliseconds.ToString());

                        // create the childNode
                        ExplorerTreeNode childNode = new ExplorerTreeNode();

                        // the path for folders is the same as the name
                        string directoryName = System.IO.Path.GetFileName(directory);

                        // log the time
                        WriteLogEntry("After set directory name: " + stopWatch.Elapsed.Milliseconds.ToString());

                        // setup the node
                        childNode.SetupNode(directoryName, NodeTypeEnum.Folder, this.IconManager, this.Font, path);

                        // log the time
                        WriteLogEntry("After Setup Node" + stopWatch.Elapsed.Milliseconds.ToString());

                        // add this node
                        this.ChildPanel.Controls.Add(childNode);

                        // log the time
                        WriteLogEntry("After Add childNode to Controls: " + stopWatch.Elapsed.Milliseconds.ToString());

                        // dock to top
                        childNode.Dock = DockStyle.Top;

                        // log the time
                        WriteLogEntry("After Dock: " + stopWatch.Elapsed.Milliseconds.ToString());
                    }

                    // finished loading child nodes
                    stopWatch.Stop();
                    WriteLogEntry("Finished loading child nodes: " + stopWatch.Elapsed.Milliseconds.ToString());
                }                 
            }
        } 
```

我试图避免购买控件，以便我可以使项目开源，但我想我只会购买它并且只提供可执行文件。

路径存在后：1 GetDirectories 后：2 反向目录后：3 开始迭代新目录后：3 设置目录名称后：20 设置节点后 21 将子节点添加到控件后：21 停靠后：22 开始迭代新目录后：22 设置后目录名称：29 设置节点后 29 将子节点添加到控件后：30 停靠后：30 开始迭代新目录后：30 设置目录名称后：37 设置节点后 38 将子节点添加到控件后：38 停靠后：39 开始迭代新目录后: 39

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:26:51.943

You access times are strange, I doubt that your real bottleneck is there. For example, I just ran a test app and got this (note: I have an SSD, so my test pretty much removes the influence of disk access speed):

```
Finding all files inside E:\ (recursive)...
Directory.GetFiles found 91731 files in 10,600 ms: 115.6 microseconds/file
Path.GetFileName parsed 91731 files in 134 ms: 1.5 microseconds/file 
```

That's **microseconds**. And most of the time is spent fetching the files into the array, parsing the file name is trivial after that.

The bottom line is: I would recommend that you download a profiler (like [EQUATEC](http://eqatec.com/Profiler/)), and check where your time is being spent.

Here's my code if you'd like to try it yourself:

```
class Program
{
    static void Main(string[] args)
    {
        var stopwatch = new Stopwatch();
        var path = @"E:\";

        Console.WriteLine("Finding all files inside {0} (recursive)", path);

        stopwatch.Restart();
        var allFiles = Directory.GetFiles(path, "*.*", SearchOption.AllDirectories);
        stopwatch.Stop();
        Output("Directory.GetFiles found", allFiles.Length, stopwatch.ElapsedMilliseconds);

        stopwatch.Restart();
        var filenames = allFiles.Select(Path.GetFileName).ToArray();
        stopwatch.Stop();
        Output("Path.GetFileName parsed", filenames.Length, stopwatch.ElapsedMilliseconds);

        Console.Read();
    }

    private static void Output(string action, int len, long timeMs)
    {
        Console.WriteLine("{0} {1} files in {2:#,##0} ms: {3:0.0} microseconds/file", action, len, timeMs, timeMs * 1000.0 / len);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:12:37.243

首先，Windows Explorer 实现了对 FAT 表的直接访问。这提供了相当大的速度。

其次，它结合使用缓存和挂钩到更改通知。这允许它知道其他应用程序/窗口何时创建文件和目录。

因为它在启动时启动，所以它能够预先获取所有这些信息，这使得一切看起来都在瞬间运行。

您会注意到访问网络驱动器时速度变慢。这是因为它一次只检索一个级别，同时缓存结果并在其他访问时刷新。

最后，我认为您还有其他事情要做。10ms 解析单个文件名有点极端。

# javascript - AngularJS - 由于未定义的数组而导致的自定义过滤器错误并且仍然可以正确过滤？

> ID：13364091
> 
> 赞同：5
> 
> 时间：2012-11-13T15:57:51.923
> 
> 标签：javascript, angularjs

我`$scope`在控制器中分配了一组对象，并在部分模板中的一系列 div 中进行过滤：

```
 <div class="entity-list">
    <!-- Folders -->
    <div class="entity-listing folder" ng-repeat="child in folders | filterName:nameFilter | entityType:filterType | orderBy:orderProp:orderAscDesc">
      <!-- Some HTML -->
    </div>
    <!-- Files -->
    <div class="entity-listing document" ng-repeat="child in documents | filterName:nameFilter | entityType:filterType | orderBy:orderProp:orderAscDesc">
      <!-- Some HTML -->
    </div>
  </div> 
```

过滤器显示在一个单独的`fieldset`元素中：

```
 <fieldset id="filters">
    <legend>Filters</legend>
    <label for="filter-name">Name Contains:</label>
    <input id="filter-name" ng-model="nameFilter">
    <label for="filter-type">Show:</label>
    <select id="filter-type" ng-model="filterType">
      <!-- some options -->
    </select>
    <label for="sort-field">Sort By:</label>
    <select id="sort-field" ng-model="orderProp">
      <!-- some options -->
    </select>
    <select ng-model="orderAscDesc">
      <!-- some options -->
    </select>
  </fieldset> 
```

我有一个设置了两个过滤器的模块，并将该模块传递给我的应用程序：

```
angular.module('widget', ['filters']).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.
      when('/homefolder', {templateUrl: 'widget/partial/entity-list.html', controller: HomeFolderCtrl}).
      when('/folder/:uuid', {templateUrl: 'widget/partial/entity-list.html', controller: FolderCtrl}).
      otherwise({redirectTo: '/homefolder'});
  }]);
angular.module('filters', []).
  filter('entityType', function() {
    return function(items, type) {
      var returnArray = [];
      for (var i=0,ii=items.length;i<ii;i++) {
        if (type == "both") {
          returnArray.push(items[i]);
        } else if (items[i].type == type) {
          returnArray.push(items[i]);
        }
      }
      return returnArray;
    }
  }).
  filter('filterName', function() {
    return function(items, str) {
      var returnArray = [];
      if (str != '') {
        for (var i=0,ii=items.length;i<ii;i++) {
          if (items[i].name.indexOf(str) !== -1) {
            returnArray.push(items[i]);
          }
        }
      } else {
        returnArray = items;
      }
      return returnArray;
    }
  }); 
```

我担心这段代码可以工作，但是在查看错误控制台时，我收到一堆`Cannot read property 'length' of undefined`关于`filterName`and`entityType`过滤器 for 循环的错误。如果我将这些过滤器包装在 if 语句中以检查是否`items`已定义（例如`filterName`）：

```
 filter('filterName', function() {
    return function(items, str) {
      var returnArray = [];
      if (items) {
        if (str != '') {
          for (var i=0,ii=items.length;i<ii;i++) {
            if (items[i].name.indexOf(str) !== -1) {
              returnArray.push(items[i]);
            }
          }
        } else {
          returnArray = items;
        }
      }
      return returnArray;
    }
  }); 
```

它消除了错误并且也可以正常工作。为什么 AngularJS 会将 undefined 传递`item`给过滤器？如果这些过滤器只在我的两个`ng-repeat`s中被显式调用，它们还能在哪里被调用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T16:11:36.370

假设通过过滤器的数据是从服务器异步检索的是否安全？当页面第一次渲染，并且 angular 遍历所有内容时，还没有数据，所以它是未定义的。一旦数据返回，它又经历了一次摘要循环，然后这次有数据，所以一切正常。出于这个原因，在过滤器函数的开头有定义的检查是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T19:00:49.597

当页面呈现时，Angular 会检查所有内容。如果在初始阶段数据为空，那么您应该检查未定义。

```
 app.filter('greaterThenHundred', function () {
    return function (items) {

        if (items == undefined)
            items = [];
        var filtered = [];
        for (var i = 0; i < items.length; i++) {
            var item = items[i];
            if (item.Salary > 100) {
                filtered.push(item);
            }
        }
        return filtered;
    };
}); 
```

# objective-c - 查找 NSDictionary 键的更简单方法？

> ID：13364093
> 
> 赞同：2
> 
> 时间：2012-11-13T15:57:53.600
> 
> 标签：objective-c, arrays, performance, optimization, dictionary

在我正在处理的程序中，我使用了一个 C 字符数组（它可能是一个非常大的数组，所以我不想使用 NSArray）。每个都存储一个对应于特定状态的值。

为了可以存储有关每个状态的一些信息，我使用的是 NSDictionary。每个键对应于可能的状态值。对于每个键，值是一个子字典，其中包含我需要与状态值相对应的信息。

目前，每当我想从 NSDictionary 中提取信息时，我都会执行以下操作：

```
for(i=0; i<arrayLen; i++) {

NSString *lookupKey1 = [[NSString alloc]initWithFormat:@"%i", array[i]];
int stateInfo1 = [[[statesDict objectForKey:lookupKey1] 
                                objectForKey:@"infoKey1"] intValue];
[lookupKey1 release];

NSString *lookupKey2 = [[NSString alloc]initWithFormat:@"%i", array[i]];
int stateInfo2 = [[[statesDict objectForKey:lookupKey2] 
                                objectForKey:@"infoKey2"] intValue];
[lookupKey2 release];

// Now do something with the values just obtained...

} 
```

这工作得很好，但我不喜欢这样做是我必须分配一个 NSString，只是为了查找一个键。感觉就像我在执行不必要的操作。这对我来说是一个特别关心的问题，因为我正在遍历一个大数组，除非我绝对必须这样做，否则我不想通过这种方式减慢它的速度。

当我尝试像最初希望的那样简单地传递字符时：

```
char stateInfo = [[[statesDict objectForKey:array[i]] 
                                objectForKey:@"infoKey"] charValue]; 
```

编译器给出警告“传递 objectForKey 的参数 1：从不强制转换的整数中生成指针”，并且调试器抛出 EXC_BAD_ACCESS 异常。

我也尝试过传入格式化的字符串文字：

```
char stateInfo = [[[statesDict objectForKey:(@"%i", array[i])] 
                                objectForKey:@"infoKey"] charValue]; 
```

这会引发完全相同的错误。有谁知道是否有更有效的方法来做我想做的事情，或者我在第一个片段中描述的方式是我想做的事情的“正确”方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:18:30.867

NSDictionary* 只能将对象作为键和值。当你将它传递给一个字符时，它会将它转换为一个指针。

@dasblinkenlight 提出了一个很好的建议，尽管我猜您在框架决定为您提供共享 NSNumber 实例时会稍有摆布，这可能因操作系统版本而异。

另一种选择是重命名您的源文件，以便扩展名为 .mm 并使用 c++ std::map，它可以轻松处理此类事情。

```
#import <map>

@implementation MyClass {
  std::map<char, int> statesMap;

...

int stateInfo1 = statesMap[i]; 
```

**话虽如此，我担心你会不必要地担心这个：**

> 所有这些对象都不利于性能

即使有一个包含 10,000 个元素的数组，使用唯一对象键的内存开销也将是 80k 左右。相当于几个图标。除非您制作数百个，否则不太可能导致内存问题。在性能方面，从分析工具中获取数据，而不是假设。瓶颈不太可能出现在您期望它们出现的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:03:45.093

您可以做两件事来简化您的访问：

*   使用`NSNumber`而不是`NSString`作为你的键`NSDictionary`
*   使用自动释放的键来避免调用`release`

这会稍微简化你的代码：

```
int stateInfo2 = [[[statesDict objectForKey:[NSNumber numberWithInt:array[i]]] 
                            objectForKey:@"infoKey2"] intValue]; 
```

如果代码数量相对较少，则很有可能`NSNumber`在当前实现中没有分配：根据[此链接](http://forums.macrumors.com/archive/index.php/t-205556.html)，`[NSNumber numberWithInt:...]`将为整数的低值返回相同的对象。

**编辑：**由于属性列表不支持类型以外的键`NSString`，您需要将从 plist 获得的字典转换为具有`NSNumber`如下键的字典：

```
NSDictionary *fromPlist = ... // This is your original dictionary
NSMutableDictionary *target = [NSMutableDictionary dictionary];
[fromPlist enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop){
    [target setObject:obj forKey:[key intValue]];
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:03:58.383

你有没有尝试过

```
char stateInfo = [[[statesDict objectForKey:[NSString stringWithFormat:@"%i", array[i]] 
                                objectForKey:@"infoKey"] charValue]; 
```

# java - 在服务器和本地进程之间创建通信流

> ID：13364100
> 
> 赞同：0
> 
> 时间：2012-11-13T15:58:37.727
> 
> 标签：java, scala

一段时间以来，我一直在尝试创建一个本地进程，该进程将充当我的服务器的 CLI。这个想法类似于[Drush](http://drupal.org/project/drush)所做的[Drupal](http://drupal.org)服务器所做的。

我还没有创建 CLI 界面（可能会使用第 3 方代码），但我想分享我的解决方案以解决我在这件事上遇到的最大障碍：在不使用 REST 服务的情况下将本地进程之间的消息传输到我正在运行的服务器和活动服务器，因为他们通过一些命令增加了安全风险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:58:37.727

*注意：此代码是用[Scala](http://www.scala-lang.org)编写的，但可以转换为 Java*

首先，我们需要创建一个扩展 HttpServlet 的 servlet 类。对于每个 GET 请求，servlet 类将检查我们的线程（稍后解释）是否打开，如果没有则尝试启动它。请注意，我们在 start 方法中使用了 try catch，因为如果线程的状态为[TERMINATED](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.State.html#TERMINATED) isAlive 将返回 true（我不知道为什么）。

如果 servlet 死了，我还实现了 destroy 方法来杀死我们的线程。我不确定如果 servlet 死了，运行线程会发生什么，但以防万一......

**Servlet.scala：**

```
package com.example

import javax.servlet.http.HttpServlet
import javax.servlet.http.HttpServletRequest
import javax.servlet.http.HttpServletResponse

class Servlet extends HttpServlet {

    override def doGet(req: HttpServletRequest, resp: HttpServletResponse) = {
        if (!CLIThread.isAlive) {
            try {
                CLIThread.start
            }
            catch {
                case _ => resp.getOutputStream().println("Error: thread state is, " + CLIThread.getState)
            }
        }
        resp.getOutputStream().println(CLIThread.pool)
    }

    override def destroy(): Unit = {
        super.destroy()
        CLIThread.shutdown
    }
} 
```

我们的线程（CLIThread）是扩展[Thread的](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)[scala 对象](https://stackoverflow.com/questions/1755345/scala-difference-between-object-and-class#answer-1755521 "一个类的单例对象，它被隐式定义")类

CLIThread 有 2 个方法，pool 和 shutdown，它们都传递给我们的[Runnable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html)实现。

CLIRunnable 是传递给 Thread 构造函数的 Runnable 实现对象。

CLIRunnable 有一个空的 ServerSocket (listener)、Socket (socket) 和 InputStream (in)、一个真正的 Boolean (keepAlive) 和一个空的 String (_pool) 作为变量。

运行方法：

1.  将新的 ServerSocket 分配给侦听器变量。*我使用了一个while循环、一个布尔值、一个try-catch块和一个随机函数来分配一个监听空端口的serverSocket，否则如果使用该端口，它会抛出一个异常*
2.  从侦听器对象分配接受的套接字（此方法保持线程，直到一个套接字连接到侦听器，这就是我们使用线程的原因）
3.  将套接字输入流分配给 in
4.  只要 keepAlive 为真，就会检查输入流是否为空，如果是，它会用它填充 _pool 变量。

池方法：

*   如果 in 变量不为空（CLIThread 已启动并且一个套接字连接到我们的端口），我们返回 _pool 字符串并将其清空。
*   否则，如果上述情况为假，但侦听器不为空（尚未接受套接字），我们将打印出侦听器的值，供用户用于连接到我们的端口。
*   如果以上所有方法都失败了，监听器为空，这意味着线程从未启动，我们打印字符串“listener == null ...”

关机方法：

1.  将 keep alive 设置为 false（从 while 循环中释放线程）
2.  如果监听器不为空：
    1.  如果没有套接字连接到我们的端口，则创建一个连接并关闭它的新套接字，以从它的循环中释放我们的侦听器。
    2.  如果套接字不为空，则关闭它。
    3.  关闭监听器

**CLIThread.scala**

```
package com.example

import java.io.InputStream
import java.net.ServerSocket
import java.net.Socket

object CLIThread extends Thread(CLIRunner) {
    def pool: String = CLIRunner.pool
    def shutdown() = CLIRunner.shutdown()
}

protected final object CLIRunner extends Runnable {
    var listener: ServerSocket = null
    var socket: Socket = null
    var in: InputStream = null
    private var keepAlive = true

    private var _pool = ""

    def run: Unit = {
        var ok = false
        while (!ok) {
            try {
                listener = new ServerSocket((math.random * 10000).toInt)
                ok = true;
            }
            catch {
                case _ => {}
            }
        }
        socket = listener.accept()
        in = socket.getInputStream
        while (keepAlive) {
            while (in.available() > 0) _pool += in.read().toChar
        }

    }
    def pool: String = if (in != null) {
        val temp = _pool
        _pool = ""
        return temp
    }
    else if (listener != null) (listener.getInetAddress, listener.getLocalPort).toString
    else "listener == null..."

    def shutdown() {
        keepAlive = false
        if (listener != null) {
            if (socket == null)
                (new Socket(listener.getInetAddress, listener.getLocalPort)).close()
            if (socket != null)
                socket.close()
            listener.close()
        }
    }
} 
```

**CLI.scala**

```
package com.example

import java.net.Socket
import java.net.URL

object CLI extends App {
    val addr = args(0) // The server address (example.com:8080)

    val addrUrl = new URL("http://" + addr + "/~cli/addr")
    var con = addrUrl.openConnection()
    var in = con.getInputStream()
    var cliAddr = ""
    while (in.available() > 0)
        cliAddr += in.read.toChar

    val portUrl = new URL("http://" + addr + "/~cli/port")
    con = portUrl.openConnection()
    in = con.getInputStream()
    var cliPort = ""
    while (in.available() > 0)
        cliPort += in.read.toChar

    val socket = new Socket(cliAddr, Integer.valueOf(cliPort))

    implicit def stringToByteArray(s: String) = s.toCharArray.map(c => c.toByte)

    socket.getOutputStream().write("Hellllo from CLI process")
} 
```

**CliAddr.scala**

```
package org.sdms

import javax.servlet.http.HttpServlet
import javax.servlet.http.HttpServletRequest
import javax.servlet.http.HttpServletResponse

class CliAddr extends HttpServlet {
    override def doGet(req: HttpServletRequest, resp: HttpServletResponse) {
        resp.getWriter.print(CLIRunner.listener.getInetAddress.getHostAddress)
    }
} 
```

**CliPort.scala**

```
package com.example

import javax.servlet.http.HttpServlet
import javax.servlet.http.HttpServletRequest
import javax.servlet.http.HttpServletResponse

class CliPort extends HttpServlet {
    override def doGet(req: HttpServletRequest, resp: HttpServletResponse) {
        resp.getWriter.print(CLIRunner.listener.getLocalPort)
    }
} 
```

# javascript - JavaScript 什么时候优于 jQuery？

> ID：13364105
> 
> 赞同：-1
> 
> 时间：2012-11-13T15:58:54.060
> 
> 标签：javascript, jquery

昨天第一次看jQuery，看起来很神奇。我一直在反复摆弄一些简单的 jQuery 教程，然后想到了一些问题。

JavaScript 可以实现 jQuery 无法实现的功能吗？JavaScript 能否以比 jQuery 更简单、更快的方式实现某些功能？还是说 jQuery 只是整体上更好？

所以这里的基本问题是：JavaScript 是否比 jQuery 更好用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:01:57.967

jQuery 确实会产生一定程度的开销，这在原始/纯 javascript 中是不存在的。很多时候 jQuery 可能是矫枉过正。与其假设 jQuery 更好（我自己也喜欢并使用它），不如在每个项目中问问自己，jQuery 是否添加了我需要并且无法用 javascript 轻松完成的功能？如果答案是肯定的，请使用它。如果没有，请不要使用它。它只是一个工具，而不是语言本身的替代品。

最后，正如评论所言。jQuery 是 JavaScript。干净利落。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:04:33.703

JQuery 是一个 javascript 库，所以你可以用 jQuery 做任何你不能用 javascript 做的事情。

JQuert 提供的 API 是：

*   跨浏览器。
*   在很多方面比 DOM API 更方便。

但是：由于它是一个包装器，因此在某些情况下，您可能会使用本机 API 获得更好的性能。

但是，不要上当：除非您偶然发现性能是关键点的非常特殊的情况，否则使用 jQuery API 腾出的时间通常会让您有更多时间编写更简洁、更健壮、更高效的代码，并且最终弥补了jQuery在很多情况下的微观开销。

# javascript - ScriptControl WebResource 加载顺序

> ID：13364109
> 
> 赞同：3
> 
> 时间：2012-11-13T15:59:00.650
> 
> 标签：javascript, asp.net, webforms, asp.net-controls

我正在向具有一些 ASP.Net 控件的项目添加一个新控件。每个控件本质上都包含一个 .Net 类（继承 ScriptControl）和一个 javascript 文件。每个 js 文件都作为 WebResource 添加到程序集中

```
[assembly: WebResource("Assembly.Namespace.WidgetControl.js", "text/javascript")]
[assembly: WebResource("Assembly.Namespace.CogControl.js", "text/javascript")] 
```

我想从其他控件之一的另一个 javascript 资源中的“类”继承，否则我需要从我想要继承的 js 类中复制/粘贴代码一些函数代码，丑陋，丑陋，难看维护。我不喜欢重复的努力。

现在，我所追求的是 WebResource 加载顺序。假设，出于演示目的，我想从类继承`WidgetControl.js`并扩展它`ThingaMahBobControl.js`. 在 Widget 保证加载顺序之后添加 ThingaMahBob 的 WebResource 程序集引用吗？

我不能从尚未加载的东西继承，所以这很重要。由于控件继承了抽象的 ScriptControl，它必须实现`GetScriptReferences()`，所以以所需的顺序返回可枚举的引用集合会起作用吗？IE：

```
protected override IEnumerable<ScriptReference> GetScriptReferences()
{
    List<ScriptReference> refs = new List<ScriptReference>();
    refs.Add(new ScriptReference("Assembly.Namespace.WidgetControl.js", this.GetType().Assembly.FullName));
    refs.Add(new ScriptReference("Assembly.Namespace.ThingaMahBobControl.js", this.GetType().Assembly.FullName));
    return refs;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:20:31.000

是的，这会起作用。如果在 GetScriptReferences 中您将指定您控制所需的脚本引用的完整集合，那么这将起作用。注意：脚本管理器根本不会添加重复的脚本引用。但这里的重点是您需要指定您的控件所依赖的脚本的完整集合。

我还建议看看它在 Ajax Control Toolkit 中的实现方式（或者例如在 Telerik ASP.NET Ajax Controls 中使用相同的方法）。存在 ClientScriptResource 和 RequiredScript 属性以及 ScriptObjectBuilder 帮助类，可帮助解决此类排序问题。

# html - 正则表达式匹配 HTML 表格行 () 不包含特定值

> ID：13364111
> 
> 赞同：3
> 
> 时间：2012-11-13T15:59:02.670
> 
> 标签：html, regex, html-table, notepad++, tablerow

我正在使用 Notepad++ 来清理一个又长又乱的 HTML 表格，并且我正在尝试使用正则表达式。

我需要删除所有**不包含**特定值的表行（我可以称之为*子字符串*吗？）。

解包所有文件内容后，我可以使用以下正则表达式逐个选择每个表行**及其所有内容**：

```
<tr>.+?</tr> 
```

如何改进正则表达式以便仅选择和替换包含定义的*子字符串*`<td>`的表行，在它们的一部分内*内？*

 *我不知道这是否重要，但每个表格行的结构如下（我已将每个 HTML 标记放在那里，点代表标准内容/值）

```
<tr>
    <td> ... </td>
    <td> ... </td>
    <td> <a sfref="..." href="...">!! SUBSTRING I HAVE TO MATCH HERE !!</a> </td>
    <td> <img /> </td>
    <td> ... </td>
    <td> ... </td>
    <td> ... </td>
    <td> ... </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T16:55:01.087

您应该使用包含简单 DOM 解析器的编程语言编写一个小脚本，因为没有任何正则表达式解决方案是完美的。

另外，你的问题对我来说似乎有点矛盾。首先，您要删除所有**不**包含特定子字符串的行。然后你说你想匹配所有**包含**特定子字符串的行。

无论如何，这是两种情况的正则表达式临时解决方案。为确保`SUBSTRING`发生在一行内，您需要使用以下命令：

```
<tr>((?!</tr>).)+?SUBSTRING.+?</tr> 
```

`(?!...)`是负前瞻。Notepad++ 6 之前可能不支持它，因此请确保更新。前瞻确保永远不会超过一个表格行的末尾，只是为了找到`SUBSTRING`下一个。它通过为我们`+?`重复中的每个字符断言它不标记`</tr>`.

为了确保`SUBSTRING`不会发生在行内，我们可以简单地放入`SUBSTRING`我们已经拥有的负前瞻：

```
<tr>((?!SUBSTRING).)+?</tr> 
```

请注意，如果您的标签中有额外的空格或开始标签中的属性以及类似的东西，这两种解决方案都将开始崩溃。这就是为什么强烈推荐使用 DOM 解析器的解决方案。*

# java - 弹簧配置文件和测试

> ID：13364112
> 
> 赞同：62
> 
> 时间：2012-11-13T15:59:05.017
> 
> 标签：java, spring, junit, profile

我有一个 Web 应用程序，其中存在一个典型问题，即它需要针对不同环境使用不同的配置文件。一些配置作为 JNDI 数据源放置在应用程序服务器中，但是一些配置保留在属性文件中。

因此，我想使用 Spring 配置文件功能。

我的问题是我没有让测试用例运行。

上下文.xml：

```
<context:property-placeholder 
  location="classpath:META-INF/spring/config_${spring.profiles.active}.properties"/> 
```

测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners({
    TestPreperationExecutionListener.class
    })
@Transactional
@ActiveProfiles(profiles = "localtest")
@ContextConfiguration(locations = {
    "classpath:context.xml" })
public class TestContext {

  @Test
  public void testContext(){

  }
} 
```

问题似乎是加载配置文件的变量没有解决：

```
Caused by: java.io.FileNotFoundException: class path resource [META-INF/spring/config_${spring.profiles.active}.properties] cannot be opened because it does not exist
at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:157)
at org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:181)
at org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:161)
at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.postProcessBeanFactory(PropertySourcesPlaceholderConfigurer.java:138)
... 31 more 
```

当前配置文件应使用`@ActiveProfile`注释进行设置。由于这是一个测试用例，我将无法使用`web.xml`. 如果可能的话，我也想避免运行时选项。测试应该按原样运行（如果可能）。

如何正确激活配置文件？是否可以使用 context.xml 设置配置文件？我可以在实际调用正常上下文的 test-context.xml 中声明变量吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-13T16:24:43.823

我可以推荐这样做吗，像这样定义你的测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners({
    TestPreperationExecutionListener.class
    })
@Transactional
@ActiveProfiles(profiles = "localtest")
@ContextConfiguration
public class TestContext {

  @Test
  public void testContext(){

  }

  @Configuration
  @PropertySource("classpath:/myprops.properties")
  @ImportResource({"classpath:context.xml" })
  public static class MyContextConfiguration{

  }
} 
```

在 myprops.properties 文件中包含以下内容：

```
spring.profiles.active=localtest 
```

有了这个你的第二个属性文件应该得到解决：

```
META-INF/spring/config_${spring.profiles.active}.properties 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T16:39:45.167

看着 Biju 的回答，我找到了一个可行的解决方案。

我创建了一个额外的上下文文件`test-context.xml`：

```
<context:property-placeholder location="classpath:config/spring-test.properties"/> 
```

包含简介：

```
spring.profiles.active=localtest 
```

并加载测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners({
    TestPreperationExecutionListener.class
    })
@Transactional
@ActiveProfiles(profiles = "localtest")
@ContextConfiguration(locations = {
    "classpath:config/test-context.xml" })
public class TestContext {

  @Test
  public void testContext(){

  }
} 
```

这在创建多个测试用例时节省了一些工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-02T07:27:24.510

这里最好的方法是删除 @ActiveProfiles 注释并执行以下操作：

```
@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners({
    TestPreperationExecutionListener.class
    })
@Transactional
@ContextConfiguration(locations = {
    "classpath:config/test-context.xml" })
public class TestContext {

  @BeforeClass
  public static void setSystemProperty() {
        Properties properties = System.getProperties();
        properties.setProperty("spring.profiles.active", "localtest");
  }

  @AfterClass
  public static void unsetSystemProperty() {
        System.clearProperty("spring.profiles.active");
  }

  @Test
  public void testContext(){

  }
} 
```

你的 test-context.xml 应该有以下内容：

```
<context:property-placeholder 
  location="classpath:META-INF/spring/config_${spring.profiles.active}.properties"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-27T10:15:43.440

```
public class LoginTest extends BaseTest {
    @Test
    public void exampleTest( ){ 
        // Test
    }
} 
```

从基础测试类继承（此示例是`testng`而不是`jUnit`，但`ActiveProfiles`是相同的）：

```
@ContextConfiguration(locations = { "classpath:spring-test-config.xml" })
@ActiveProfiles(resolver = MyActiveProfileResolver.class)
public class BaseTest extends AbstractTestNGSpringContextTests { } 
```

`MyActiveProfileResolver`可以包含确定使用哪个配置文件所需的任何逻辑：

```
public class MyActiveProfileResolver implements ActiveProfilesResolver {
    @Override
    public String[] resolve(Class<?> aClass) {
        // This can contain any custom logic to determine which profiles to use
        return new String[] { "exampleProfile" };
    }
} 
```

这将设置配置文件，然后用于解决测试所需的依赖关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-09T04:28:24.743

@EnableConfigurationProperties 需要在那里（你也可以注释你的测试类），来自 test/resources 的 application-localtest.yml 将被加载。jUnit5 示例

```
@ExtendWith(SpringExtension.class)
@EnableConfigurationProperties
@ContextConfiguration(classes = {YourClasses}, initializers = ConfigFileApplicationContextInitializer.class)
@ActiveProfiles(profiles = "localtest")
class TestActiveProfile {

    @Test
    void testActiveProfile(){

    }
} 
```

# python - 有没有办法在发生事情时发送信号，然后接收信号并做其他事情？

> ID：13364114
> 
> 赞同：0
> 
> 时间：2012-11-13T15:59:10.923
> 
> 标签：python, signals

我可以使用 .txt 文件来做到这一点，当发生某些事情时它会写入“ok”，如果 .txt 文件里面有“ok”，另一个程序会读取它并执行某些操作。但是，我想知道我是否可以用另一种方式来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:57:03.390

您可以使用信号，例如 USR1，但我认为您不能在 Python 中发出信号。您可以使用命名管道，而不是像现在这样通过文件进行通信。命名管道将提供一些额外的功能，请参见最后一段。

您将管道作为普通文件打开，然后像现在一样进行读写。你通过创建管道`mkfifo filename`，也可以在你的python程序中创建。两个演示示例程序：

发件人：

```
fdw= os.open("./mypipe", os.O_WRONLY)
while (1):
 try:
    os.write(fdw, "OK\n")
 except OSError, e:
    if e.errno==errno.EPIPE:
        #Receiver closed the pipe                                                   
        print "Reader closed pipe\n"
        sys.exit(0)
    else:
        #some other os problem                                                         
        print os.strerror(e.errno)
  time.sleep(3) 
```

接收者：

```
fdr= os.open("./mypipe", os.O_RDONLY | os.O_NONBLOCK)
while (1):
  try:
    s= os.read(fdr, 10)
    print s
  except OSError, e:
    if e.errno==errno.EBUSY:
        print "nothing to read yet\n"
    else:
        print os.strerror(e.errno)
  time.sleep(1) 
```

发送方打开一个阻塞管道，因此如果接收方关闭管道，通常会在终止时出现异常。阅读器打开一个非阻塞管道，因此它在等待发送者写入的任何内容时不会挂起。当发送方或接收方关闭一个管道端时，阻塞/非阻塞的组合会产生不同的响应。如果有任何管道溢出的可能性（写入千字节，没有读取内容），您可能希望以非阻塞方式打开写入端。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-13T18:29:16.637

看来你想使用一个功能。我假设您正在按照进行各种测试的方式做一些事情，如果这是真的，每个人都会做不同的事情......

```
def function(parameters): 
```

参数是函数中使用的对象：

```
def fib(a, b, c):
   x=a*b*c*10
   print x 
```

这只是一个简单的功能，但你可以做非常复杂的事情。

我建议您参考 TutorialsPoint 上的这个网页：[Python Functions](http://www.tutorialspoint.com/python/python_functions.htm)。

如果您在另一个程序中具有该功能，则可以打开该文件：

```
open(file_name)
function(parameters) 
```

python打开文件后，正常输入函数即可。这应该有效。

# r - sendplot 包错误：image() 找不到对象“x”

> ID：13364115
> 
> 赞同：2
> 
> 时间：2012-11-13T15:59:15.780
> 
> 标签：r, function, object

您好，我有一个使用 sendplot 包创建交互式绘图的功能，但出现了一个奇怪的错误，我在网上搜索了很多，但我什么也没找到！

我使用 R 2.15.1

问题是当我调用我的函数时，我得到了错误：

> 图像错误（x = xx，y = yy，z = zz，col = heat.colors(30)，axes = FALSE）：找不到对象“xx”

但是，如果我在控制台中逐行执行我的代码，它就可以工作（因为 xx,yy,zz,data.mat 在我的工作区中）我不明白为什么当我调用我的函数时对象不在我的工作区中.. .

这是我的代码：

```
 Heatmap<-function(data.mat,main.str="heatmap"){

         xx <- 0:dim(data.mat)[1] 
         yy <- 0:dim(data.mat)[2] 
         zz <- log(data.mat+1)
         plot.call = "image( x=xx,y=yy, z=zz,col = heat.colors(30),axes = FALSE);
         axis(1,0.5:(dim(data.mat)[1]-0.5),
         labels=rownames(data.mat),
         las = 2, line = -0.5, tick = 0,cex.axis =1);
         axis(4,0.5:(dim(data.mat)[2]-0.5),
         labels=colnames(data.mat),
         las = 2, line = -0.5, tick = 0,cex.axis =.8)"
         mai.mat = matrix(c(1.5,.5,.5,1.5), ncol=4)
         mai.prc = FALSE
         xy.labels=list(nb_of_sequences=t(data.mat))
         x.labels=data.frame(City=rownames(data.mat))
         y.labels=data.frame(Order=colnames(data.mat))

         imagesend(plot.call=plot.call,
            y.pos=yy,
            x.pos=xx,
            mai.mat=mai.mat, mai.prc=mai.prc,
            xy.type="image.box",
            x.labels=x.labels,
            y.labels=y.labels,
            xy.labels = xy.labels,
            image.size="500x800",
            fname.root="exPlotImage",
            font.size=18)

           return (0) 
```

如果您对此有解决方案，请告诉我！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:59:03.547

我找到了一个临时解决方案：我只需将 xx,yy,zz 分配给全局环境并在最后删除它们就可以了

```
 Heatmap<-function(data.mat,main.str="heatmap"){

     xx <<- 0:dim(data.mat)[1] 
     yy <<- 0:dim(data.mat)[2] 
     zz <<- log(data.mat+1)
     plot.call = "image( x=xx,y=yy, z=zz,col = heat.colors(30),axes = FALSE);
     axis(1,0.5:(dim(data.mat)[1]-0.5),
     labels=rownames(data.mat),
     las = 2, line = -0.5, tick = 0,cex.axis =1);
     axis(4,0.5:(dim(data.mat)[2]-0.5),
     labels=colnames(data.mat),
     las = 2, line = -0.5, tick = 0,cex.axis =.8)"
     mai.mat = matrix(c(1.5,.5,.5,1.5), ncol=4)
     mai.prc = FALSE
     xy.labels=list(nb_of_sequences=t(data.mat))
     x.labels=data.frame(City=rownames(data.mat))
     y.labels=data.frame(Order=colnames(data.mat))

     imagesend(plot.call=plot.call,
        y.pos=yy,
        x.pos=xx,
        mai.mat=mai.mat, mai.prc=mai.prc,
        xy.type="image.box",
        x.labels=x.labels,
        y.labels=y.labels,
        xy.labels = xy.labels,
        image.size="500x800",
        fname.root="exPlotImage",
        font.size=18)

  rm(xx,envir = .GlobalEnv)
  rm(yy,envir = .GlobalEnv)
  rm(zz,envir = .GlobalEnv)
  return (0)
} 
```

但我想这不是最好的解决方案......如果你有更好的解决方案，请告诉我

# android - Android/Linux：请求失败的错误：BadAlloc（操作资源不足）

> ID：13364118
> 
> 赞同：0
> 
> 时间：2012-11-13T15:59:22.203
> 
> 标签：android, ubuntu, opengl-es

运行android模拟器时出现以下错误：

```
[2012-11-13 21:27:15 - Emulator] X Error of failed request:  BadAlloc (insufficient resources for operation)
[2012-11-13 21:27:15 - Emulator]   Major opcode of failed request:  154 (GLX)
[2012-11-13 21:27:15 - Emulator]   Minor opcode of failed request:  24 (X_GLXCreateNewContext)
[2012-11-13 21:27:15 - Emulator]   Serial number of failed request:  15
[2012-11-13 21:27:15 - Emulator]   Current serial number in output stream:  16 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:40:11.550

一些旧的英特尔显卡有这个问题，我在英特尔 82865G 显卡和 ubuntu 12.04 上遇到了这个问题，解决这个问题的一种方法是从命令提示符启动模拟器，然后它将使用软件渲染器，转到 android-sdks/tools 目录并输入：emulator-arm -avd your_avd，使用命令行我可以工作

# python - 通过命令行传递 Python 变量？

> ID：13364119
> 
> 赞同：4
> 
> 时间：2012-11-13T15:59:26.730
> 
> 标签：python, command-line, command-line-arguments

我是 Python 新手（就像昨天一样），所以如果我还不知道“显而易见的”，请耐心等待。

有两种方法可以解决这个问题，任何一种都适合我，我不确定是否`getopt`或`optparse`包含我想要/需要的东西（来自我正在阅读的内容）？我想做类似于以下的事情：

```
python this.py --variable VariableName="Value" -v VariableName2="Value2" 
```

或者

```
python this.py --VariableName "Value" 
```

我面临的主要问题是，我可能需要有选择地传入任何变量，但不一定要以任何特定顺序传递所有变量（因此，`sys.argv`在我的情况下，原始变量不起作用）。对于其中一些变量，我可能会传递字符串、数字和/或数组。

在脚本中传递变量后，我需要以一种或另一种方式检查它们是否设置/不为空，并根据需要分配默认值。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:01:16.663

你肯定想要一个命令行参数解析器。Python 附带了一些。Python2.7[`argparse`](http://docs.python.org/dev/library/argparse.html)可以根据需要向后移植到早期版本，这是我推荐的。还有[`optparse`](http://docs.python.org/dev/library/optparse.html)。它不如 好`argparse`，但它仍然可以做得很好，并且可用于较旧的 python 版本以及较新的版本。

也有[`getopt`](http://docs.python.org/2/library/getopt.html)，但与其他人相比，那一个几乎不值得一提。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:46:20.743

我将首先回答我自己的问题。

尽管我很喜欢@mgilson 给出的答案，但我找到了一种“更简单”的方法。我对正则表达式非常熟悉，找出一个关联数组（即字典）并不太难。

```
import re

args = {}
args['pythonFile'] =  sys.argv[0]

for arg in sys.argv[1:]:
  variable = re.search('\-\-(.*)\=',arg)
  variable = variable.group(1)
  value = re.search('\=(.*)',arg)
  value = value.group(1)
  args[variable] = value

print args 
```

这是证明：

```
$ /opt/python27/bin/python2.7 Test.py --var1=1 --var2="Testing This"
{'var1': '1', 'pythonFile': 'Test.py', 'var2': 'Testing This'} 
```

哇！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-07T03:57:26.790

我对上面的代码进行了一些重构，使其更加灵活和模块化（顺便说一句，这是一个很好的解决方案）。您现在可以添加类似的东西，`--dev`而不是`--dev=true`. 或者你可以两者都做。如果您不添加任何参数，它也不会使应用程序崩溃。

```
def get_cli_args():
    """
    Returns a dictionary of arguments passed to through the CLI.
    """

    import re
    import sys

    args = {}

    for arg in sys.argv[1:]:
        var = re.search('\-\-([A-Za-z]*)', arg) # optional value assignment
        var = var.group(1)
        value = re.search('\=(.*)', arg)
        value = value.group(1) if value else None
        args[var] = value

    return args 
```

# google-chrome - Google Chrome - 开发工具 - 网络选项卡 - 预览 - JSON 与文本

> ID：13364120
> 
> 赞同：2
> 
> 时间：2012-11-13T15:59:26.943
> 
> 标签：google-chrome

我刚刚将 Chrome 更新到 beta 版本 - 版本 24.0.1312.5 beta-m 和用于显示 json 响应的树视图的网络选项卡预览。现在它是纯文本，就像响应选项卡一样。我检查了设置，那里没有任何东西看起来会改变它。有没有其他人看过这个？也许知道修复或者我应该回滚到以前的版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T01:32:35.250

我猜您正在寻找“预览”选项卡。请参阅此问题：[Google Chrome 将 JSON AJAX 响应显示为树而不是纯文本](https://stackoverflow.com/q/3888454/266535)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:29:07.183

Google Chrome Dev build 24.0.1312.5 的构建存在问题，导致预览面板不再显示 json 对象树，而是显示纯文本。它应该在下一个开发版本中修复。

在此处查看更多信息：[http ://code.google.com/p/chromium/issues/detail?id=160733](http://code.google.com/p/chromium/issues/detail?id=160733)

# python - 在 pyparsing 中使用 escChar 和 escQuote

> ID：13364121
> 
> 赞同：2
> 
> 时间：2012-11-13T15:59:39.347
> 
> 标签：python, pyparsing

我正在尝试解析一个可能包含一些转义字符的字符串，例如 `\" \"`. 例如，

`"this is an \"example\" of what I want to parse"`

我目前有以下解析规则，但它无法处理转义字符`\"` `QuotedString('"',multiline=True)`

escChar 和 escQuote 以及 QuotedString 类有一些选项，但我不确定在那里使用什么。

我想做的一个完整的例子

```
def test1():
    str_ = QuotedString('"',escChar='\\',multiline=True)
    decl = (Keyword("FIELD1") + str_ + ';') | \
        (Keyword("FIELD2") + str_ + ';') 
    G = OneOrMore(decl)

    s = """
FIELD1 "hello world";

FIELD2 "an example of \"what\" I want to parse";
"""

    print G.parseString(s)
    # Only print ['FIELD1', 'hello \nworld', ';'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:05:28.190

QuotedString 的文档字符串给出：

```
 |  __init__(self, quoteChar, escChar=None, escQuote=None, multiline=False, unquoteResults=True, endQuoteChar=None)
 |      Defined with the following parameters:
 |       - quoteChar - string of one or more characters defining the quote delimiting string
 |       - escChar - character to escape quotes, typically backslash (default=None)
 |       - escQuote - special quote sequence to escape an embedded quote string (such as SQL's "" to escape an embedded ") (default=None)
 |       - multiline - boolean indicating whether quotes can span multiple lines (default=False)
 |       - unquoteResults - boolean indicating whether the matched text should be unquoted (default=True)
 |       - endQuoteChar - string of one or more characters defining the end of the quote delimited string (default=None => same as quoteChar)
 | 
```

一些交互式解释器实验：

```
>>> import pyparsing
>>> s = r'''"this is an \"example\" of what I want to parse" '''
>>> pyparsing.QuotedString('"').parseString(s)
(['this is an \\'], {})
>>> pyparsing.QuotedString('"', escChar='\\').parseString(s)
(['this is an "example" of what I want to parse'], {}) 
```

我不能说*所有*类的构造函数参数都是 100% 完成的，但可能 > 90%。

# sql - 选择每列的最后一个值，每个用户，最简单的方法

> ID：13364126
> 
> 赞同：1
> 
> 时间：2012-11-13T15:59:55.170
> 
> 标签：sql, null

这是[先前相关问题](https://stackoverflow.com/questions/13347439)的扩展版本。我已经向[Erwin Brandstetter](https://stackoverflow.com/users/939860/erwin-brandstetter)发布了一个新问题，建议我这样做。（在人们回答我的第一个问题后，我意识到我实际上想要这个）

具有以下数据（空白表示 NULL）：

```
ID    User  ColA    ColB    ColC
1     1     15              20
2     1     11      4       
3     1             3
4     2     5       5       10
5     2     6 
6     2             8
7     1             1 
```

如何以最简单的方式为所有用户获取每列的最后一个非 NULL 值？因此，给定数据的结果将是：

```
User  ColA    ColB    ColC
1     11      1       20
2     6       8       10 
```

我没有找到太多，似乎与我描述的功能相似的功能是`COALESCE`，但在我的情况下它没有按预期工作。

**注意**：如果可能，使用标准 SQL，否则使用 PostgreSQL。所涉及的列的数量可能会发生变化，因此最好采用不与这三个特定列绑定的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:00:23.260

### “标准”SQL

类似于我在上一个问题上发布的内容，[**递归 CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html)很优雅，并且可能是**标准 SQL**中最快的方法——尤其是对于每个用户的许多行。

```
WITH RECURSIVE t AS (
   SELECT row_number() OVER (PARTITION BY usr ORDER  BY id DESC) AS rn
         ,usr, cola, colb, colc
   FROM   tbl
   )

   , x AS (
   SELECT rn, usr, cola, colb, colc
   FROM   t
   WHERE  rn = 1

   UNION ALL
   SELECT t.rn, t.usr
        , COALESCE(x.cola, t.cola)
        , COALESCE(x.colb, t.colb)
        , COALESCE(x.colc, t.colc)
   FROM   x
   JOIN   t USING (usr)
   WHERE  t.rn = x.rn + 1
   AND    (x.cola IS NULL OR x.colb IS NULL OR x.colc IS NULL)
   )
SELECT DISTINCT ON (usr)
       usr, cola, colb, colc
FROM   x
ORDER  BY usr, rn DESC; 
```

[-> 用于请求的 PostgreSQL 的 sqlfiddle。](http://sqlfiddle.com/#!12/75838/1)

唯一的非标准元素是`DISTINCT ON`，它是标准中的扩展`DISTINCT`。将 final 替换`SELECT`为标准 SQL：

```
SELECT usr
      ,max(cola) As cola
      ,max(colb) As colb
      ,max(colc) As colc
FROM   x
GROUP  BY usr
ORDER  BY usr; 
```

“标准 SQL”的请求用途有限。该标准仅存在于纸面上。没有 RDBMS 实现 100% 的标准 SQL - 这也毫无意义，因为该标准到处都包含无意义的部分。可以说，PostgreSQL 的实现是最接近标准的。

### PL/pgSQL 函数

此解决方案特定于 PostgreSQL，但性能应该非常好。

我在上面小提琴中演示的同一张桌子上建造。

```
CREATE OR REPLACE FUNCTION f_last_nonull_per_user()
RETURNS SETOF tbl AS
$func$
DECLARE
   _row tbl;  -- table name can be used as row type
   _new tbl;
BEGIN

FOR _new IN
   SELECT * FROM tbl ORDER BY usr, id DESC
LOOP
   IF _new.usr = _row.usr THEN 
      _row.id := _new.id;   -- copy only id
      IF _row.cola IS NULL AND _new.cola IS NOT NULL THEN
         _row.cola := _new.cola; END IF;   -- only if no value found yet
      IF _row.colb IS NULL AND _new.colb IS NOT NULL THEN
         _row.colb := _new.colb; END IF;
      IF _row.colc IS NULL AND _new.colc IS NOT NULL THEN
         _row.colc := _new.colc; END IF;
   ELSE
      IF _new.usr <> _row.usr THEN  -- doesn't fire on first row
         RETURN NEXT _row;
      END IF;   
      _row := _new;  -- remember row for next iteration
   END IF;
END LOOP;

RETURN NEXT _row;  -- return row for last usr

END
$func$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_last_nonull_per_user(); 
```

返回整行 - 包括`id`我们需要填充所有列的最小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:40:01.143

此查询很容易转换为 MS SQL。如果您需要更多特定内容，请添加评论。mysql查询：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/b33f4/11)**

```
SELECT
t1.User,
(SELECT ColA 
           FROM Table1
           WHERE ColA is not null
           AND Table1.User = t1.User
           ORDER BY ID DESC
           LIMIT 1 ) as ColA,
(SELECT ColB 
           FROM Table1
           WHERE ColB is not null
           AND Table1.User = t1.User
           ORDER BY ID DESC
           LIMIT 1 ) as ColB,
(SELECT ColC 
           FROM Table1
           WHERE ColC is not null
           AND Table1.User = t1.User
           ORDER BY ID DESC
           LIMIT 1 ) as ColC
FROM Table1 t1
GROUP BY t1.User 
```

结果：

```
| USER | COLA | COLB | COLC |
-----------------------------
|    1 |   11 |    1 |   20 |
|    2 |    6 |    8 |   10 | 
```

# javascript - 有条件地将字符串拆分为数组

> ID：13364127
> 
> 赞同：1
> 
> 时间：2012-11-13T16:00:13.563
> 
> 标签：javascript, jquery, regex

我有一小段代码需要将字符串拆分为 javascript 对象。

生成的对象需要看起来像这样：

```
var myObject = {
valueOne: value,
valueTwo: value,
arrayOfValues: [values] 
} 
```

需要转换的字符串有两种不同的格式。这些格式如下所示：

1) `"MyValues are ('1','2','3')"` --这将被翻译成：

```
var myObject = {
valueOne: myValues,
valueTwo: are,
arrayOfValues: [1,2,3] 
} 
```

或 2) `"MyValue="1""` -- 这将被翻译成：

```
var myObject = {
valueOne: myValue,
valueTwo: =,
arrayOfValues: [1] 
} 
```

我知道我可以像这样拆分这个字符串：

```
var arr[] = myString.split(" "); 
```

但是根据字符串的构成来决定使用哪个拆分器，然后将其转换为 javascript 对象，这对我来说是一个未知的世界。

谢谢你的帮助。

**编辑——我在****第二个**例子中犯了一个小错误

 **我更新了它，所以它是正确的。-- 我收到的字符串格式如下：

```
`"MyValue="1""` 
```

samy-delux，感谢您的帮助！这很好用，但是对第二个字符串的更改会破坏您的示例。（对不起，我打错了字符串的格式。）

我正在尽我所能学习正则表达式。但是还没有足够的知识来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:13:36.847

给你（[http://jsfiddle.net/VBmb8/](http://jsfiddle.net/VBmb8/)）：

```
function parse(str) {
    var match = str.match(/(\w+)\s?([\w=]+)\s?\('(.+)'\)/);

    return {
        valueOne: match[1],
        valueTwo: match[2],
        arrayOfValues: match[3].split("','")
    };
} 
```

*** 编辑后 ***

[http://jsfiddle.net/VBmb8/2/](http://jsfiddle.net/VBmb8/2/)

```
function parse(str) {
    var match = str.match(/(\w+)\s?([\w=]+)\s?\(?['"](.+)['"]\)?/);

    return {
        valueOne: match[1],
        valueTwo: match[2],
        arrayOfValues: match[3].split("','")
    };
} 
```**

# facebook-php-sdk - facebook 访问令牌无效-尝试使用 cron 通过应用程序发布到 facebook 网站-“页面”

> ID：13364131
> 
> 赞同：-3
> 
> 时间：2012-11-13T16:00:19.737
> 
> 标签：facebook-php-sdk, facebook-apps, facebook-access-token

我正在尝试通过服务器上的 cron 发布到我网站的 Facebook 粉丝页面。

我在 Facebook 上创建了一个名为“John Doe”的用户，在我网站的 Facebook 粉丝页面上让他成为管理员，然后我在沙盒模式下从该用户创建了一个应用程序，所以只有他“John Doe”可以“运行”它。

我从运行它的“John Doe”那里为我的应用程序授予了必要的权限。

我可以通过developers.facebook.com 手动获取访问令牌，并使用它们通过“John Doe”的应用程序从我的php cron 脚本发布到我网站的Facebook 粉丝页面。

问题是，为了让它工作，我的“John Doe”facebook用户必须登录。

**我应该怎么做我的网站 php cron 脚本总是自动有效的访问令牌，以便它可以通过管理员“John Doe”正在使用并允许访问的应用程序成功发布到网站的 Facebook 粉丝页面？**

现在，我以“John Doe”的身份手动登录 facebook，并且我正在将 developer.facebook.com 的访问令牌复制粘贴到我的 php 脚本中，并且它可以工作。

（我网站的 Facebook 粉丝页面中的成功帖子显示为“mywebsite 通过 myapp 共享了一个链接”，所以我很确定除了访问令牌之外，其他一切都很好）

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:40:41.713

[这个问题与我自己的问题](https://stackoverflow.com/questions/13531596/how-to-get-non-expiring-access-token-in-facebook/13535102#13535102)非常相似，我花了 2 天时间试图解决这个问题。解决方案非常简单。

1.  将您的应用设置为**Native/Desktop**，这样您就可以获得一个 60 天的令牌（稍后您将把它变成永久的）。通过转到[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)编辑设置 > 高级 > 在应用类型中选择本机/桌面来执行此操作。

2.  转到[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)选择您的应用，然后**获取访问令牌**

3.  在**扩展权限**选项卡中，选择`manage_pages`并`publish_stream`

4.  现在您有一个 60 天的临时令牌。

5.  要获取您的永久令牌，请转到此处并使用您的临时令牌：`https://graph.facebook.com/me/accounts?access_token=REPLACE_THIS_WITH_YOUR_TEMPORARY_TOKEN`

您应该会看到您是管理员的所有 Facebook 页面的永久访问令牌

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T18:23:52.373

请参阅[https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/](https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/) - 特别是**场景 5** -

1.  使用服务器端 Oauth 流程（有关详细信息，请参阅[登录](https://developers.facebook.com/docs/concepts/login/)文档）获取页面管理员（具有`manage_pages`权限）的访问令牌

2.  检索您从`/me/accounts`或检索的页面访问令牌`/<PAGE ID>?fields=access_token`。

此页面访问令牌将无限期过期，这意味着它不会过期，除非用户不再是页面管理员、删除您的应用程序、终止所有应用程序会话等。

# asp.net - 添加 GridView 行标题？或者我应该以不同的方式处理这个问题？

> ID：13364132
> 
> 赞同：2
> 
> 时间：2012-11-13T16:00:24.103
> 
> 标签：asp.net, vb.net

我想使用以下格式的 ASP.NET 3.5 (VB.NET) 使用 Oracle 数据库中的数据填充表：

![我要显示的数据模型](../Images/d3a5696e2aa89d4b15be6d25e4c5057d.png)

如您所见，右侧有描述数据的标题行。有没有办法使用 GridView 来完成这个？我曾尝试查看 GridView.Row 类，但找不到任何可以添加行标题的内容。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:28:46.127

It would be easiest for you to move the headers (that are currently in the first column), so that they are horizontally displayed in the first row (instead of the word "header"). The data should repeat vertically so it will have to be flipped around.

Alternatively, as long as you have a fixed number of columns you should look at binding the values to literals instead. If you do not have a fixed number of records, then a grid which repeats horizontally is not a good idea for a web page.

The GridView control is suited for tabular, vertically-repeating data that is designed to be paged.

# excel - 以小时和分钟计算日期之间的总时间

> ID：13364134
> 
> 赞同：0
> 
> 时间：2012-11-13T16:00:28.253
> 
> 标签：excel, userform, vba

你好

我正在尝试使用 VB 解决问题，我需要一些帮助。我对这门语言很陌生（1 周）。问题是我创建了一个用户表单来显示两个不同时间之间已经过去了多少小时和分钟，类似于时间表。

用户表单由两个日历组成，每个日历下有两个文本框；每个盒子记录他们离开的小时和分钟，另外两个盒子记录他们回来的时间。

我已经使用代码将日历一起减去（例如日历输入 - 日历输出），然后将其乘以 24 以指示距离的小时数。然后在日历下我有一个文本框供用户输入他们离开的时间。然后我按小时减去 24，例如，如果它是 24 -15，它将显示为 9（当天的 9 小时），然后我会将其添加到他们插入到文本框 Hour in（返回时间）中的数字中。例如 14。然后我会将它们加到一起，例如 9 + 14 = 23 并将其显示在另一个文本框 Total Hours 中。因此它将显示 23 表示 23 小时。

然后我想显示另外两个文本框来指示分钟。一个代表分钟出来然后分钟。

我有转换这些分钟的问题，例如，如果外出时间是 15:50，而第二天的时间是 15:55，它显示为 24（在一个文本框中）和 105 分钟（在另一个文本中）盒子）。我想将分钟添加到小时中，并将剩余分钟的余额放在分钟文本框中。这应该显示 24（在一个文本框中）和 5（在另一个文本框中）。

最终目的是获得显示一个人缺席数天、数小时和数分钟的结果，例如，2天、5小时和10分钟。关于如何修改代码以实现此目的的任何想法？

这是我的代码。

请帮忙

```
Dim number1 As Date
Dim number2 As Date
Dim number3 As Integer
Dim number4 As Integer
Dim Number5 As Integer
Dim Number6 As Integer
Dim answer  As Integer
Dim answer2 As Integer
Dim answer3 As Integer
Dim answer4 As Integer
Dim answer5 As String

number1 = DTPicker1
number2 = DTPicker2
number3 = Txthourout
number4 = TxtHourin
Number5 = TxtMinuteout
Number6 = TxtMinuetIn

answer = number2 - number1
answer2 = answer * 24
answer3 = answer2 - number3
answer4 = answer3 + number4

answer5 = Number5 + Number6

TextBox1.Text = answer4
TextBox2.Text = answer5

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:39:37.430

好的答案，您应该被告知 Date 包含日期和时间，它实际上存储为一个数值，其中日期构成整数部分（尽管它可以大于 nax 值，`Integer`因此请确保使用变量键入`Long`以保存日期部分）。

下一步如果您获取两个日期之间的差异并将该答案`Date`再次放入变量中，它会很容易地为您提供您正在寻找的答案：

```
dtDiff = dtEnd - dtStart 
```

您现在可以对此执行以下操作：

```
intDaysDiff = Int(dtDiff) 'As the number of days between the two dates is expected to be small enough we can use the Int() function
intHoursDiff = Hour(dtDiff)
intMinutesDiff = Minute(dtDiff) 
```

要检索 minutein hourin 等，只需使用相同的方法

在用户表单中根据需要为用户报告它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:57:11.253

这应该让你开始。有关日期差异语法，请参阅此[链接](http://www.techonthenet.com/access/functions/date/datediff.php)。

```
Dim d1 As Date, d2 As Date, diff As Variant
'sample dates
d1 = DateTime.Now   '<--you'd use your calendar 1 here
d2 = DateTime.DateAdd("h", 4, d1)   '<--you'd use your calendar 2 here

'change "h" to what ever part of the different you want.
diff = DateTime.DateDiff("h", d1, d2) 
```

还要看看[CDate](http://msdn.microsoft.com/en-us/library/s2dy91zy%28v=vs.80%29.aspx)和[Format](http://msdn.microsoft.com/en-us/library/office/gg251755.aspx)函数。它们可用于确保某些内容采用正确的日期格式并将日期转换为您喜欢的字符串表示形式。

# sql - 匹配sql中的数字模式

> ID：13364136
> 
> 赞同：1
> 
> 时间：2012-11-13T16:00:29.580
> 
> 标签：sql, sql-server, sql-server-2012

我需要找到一种方法，将我在一个表中的数字序列与另一个表中的序列匹配，但如果可能的话，在 SQL 中使用不同的数值。

例子：

```
Table A contains

Word   | Location
-----------------
Quick    2
Brown    3
Fox      4

Table B contains

Word   |  Location  | Product
------------------------------
Quick        2           A
Brown        3           A
Fox          4           A
Brown        8           B
Fox          9           B
Quick        10          B
Quick        7           C
Quick        18          D
Brown        19          D
Fox          20          D 
```

基本上我只想从表 B 中返回产品 A 和 D，因为它们是唯一引用所有三个单词的单词，重要的是这些单词的顺序相同，即 2,3,4 与 18,19 相同,20 仅具有不同的数值。

很容易找出引用所有单词的所有产品，但我只想要以正确顺序匹配所有相同单词的产品。

请注意，通常顺序不会像 2,3,4 那样简单，它可能是 2,7,9，在这种情况下，如果产品的所有单词都按 36、41、43 的顺序排列，我会想要它回来。

我希望以上是有道理的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:22:33.990

尝试这个：

```
select PRODUCT
from   (
select A.Word,A.Location-B.Location as diff,B.PRODUCT
from   TableA A
join   TableB B
on     A.Word=B.Word)C
group by diff,PRODUCT
having count(*)=3 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!6/e3975/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:20:52.227

架构和数据：

```
CREATE TABLE A
    (     
     Word varchar(10),
     Location int                  
    );

CREATE TABLE B
    (Word varchar(10),
     Location int,
     Product varchar(3));

INSERT INTO A (Word, Location)
VALUES
  ('Quick', 2),
  ('Brown', 3),
  ('Fox', 4);

INSERT INTO B (Word, Location, Product)
VALUES
  ('Quick', 2, 'A'),
  ('Brown', 3, 'A'),
  ('Fox', 4, 'A'),
  ('Brown', 8, 'B'),
  ('Fox', 9, 'B'),
  ('Quick', 10, 'B'),
  ('Quick', 7, 'C'),
  ('Quick', 18, 'D'),
  ('Brown', 19, 'D'),
  ('Fox', 20, 'D'); 
```

查询：

```
SELECT Product
FROM B B1
WHERE (
  SELECT COUNT(*) 
  FROM B B2
  WHERE B2.Location < B1.Location
    AND B2.Product = B1.Product) = (
  SELECT COUNT(*) 
  FROM A A1 JOIN A A2 ON A1.Word = B1.Word
  WHERE A2.Location < A1.Location)
GROUP BY Product
HAVING COUNT(*) = (SELECT COUNT(*) FROM A) 
```

[在这里](http://sqlfiddle.com/#!3/2aaed/1)你可以找到 SQLFiddle。

# flex-lexer - lintian 在构建 DEB 包时从 flex 生成的源代码中报告 shlib-calls-exit

> ID：13364139
> 
> 赞同：0
> 
> 时间：2012-11-13T16:00:39.190
> 
> 标签：flex-lexer, deb

如果一个[**DEB**](http://en.wikipedia.org/wiki/Deb_(file_format))包包含一个由[**flex**](https://github.com/westes/flex/)生成的源代码构建的共享库，[**/usr/bin/lintian**](http://lintian.debian.org)会报告

[shlib-调用-退出](http://lintian.debian.org/tags/shlib-calls-exit.html)

由于 flex 生成的函数 yy_fatal_error 中的 exit() 调用：

```
static void yy_fatal_error (yyconst char* msg )
{
        (void) fprintf( stderr, "%s\n", msg );
        exit( YY_EXIT_FAILURE );
} 
```

如何修改 DEB 包，让 lintian 停止报告 shlib-calls-exit？

DEB 包在其构建脚本中使用了[**CMake 。**](http://cmake.org/)对应的 CMake 源代码片段是

```
flex_target(scanner lexer.l ${CMAKE_CURRENT_BINARY_DIR}/lexer.c)
bison_target(parser parser.y ${CMAKE_CURRENT_BINARY_DIR}/parser.c) 
add_flex_bison_dependency(scanner parser)
add_library(parse-and-scan SHARED ${FLEX_scanner_OUTPUTS} ${BISON_parser_OUTPUT_SOURCE}) 
```

软件版本信息：

*   弹性 2.5.35
*   cmake 2.8.9
*   临田 2.5.10
*   Linux 发行版：**Debian Unstable (sid)**

大约一周前，我在 debian-mentors 邮件列表中发布了一个[类似的问题](http://lists.debian.org/debian-mentors/2012/11/msg00015.html)

在 flex 生成的源代码中调用 exit() 的问题已在 flex-help 邮件列表中[提出](http://sourceforge.net/mailarchive/message.php?msg_id=29126320)，但该帖子没有给出任何答案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-13T16:00:39.190

通过用 abort() 调用替换 exit() 调用，**lintian**将不再报告 shlib-calls-exit。CMake 可以通过将文件**lexer.c**读入字符串，然后进行文本替换，然后将字符串写入新文件 **lexer_replaced.c**（任意文件名）来处理这种替换。

```
flex_target(scanner lexer.l ${CMAKE_CURRENT_BINARY_DIR}/lexer.c)
bison_target(parser parser.y ${CMAKE_CURRENT_BINARY_DIR}/parser.c) 
add_flex_bison_dependency(scanner parser)
set(replaced_file ${CMAKE_CURRENT_BINARY_DIR}/lexer_replaced.c)
file(WRITE ${CMAKE_CURRENT_BINARY_DIR}/replace_exit_with_abort.cmake "
  file(READ ${FLEX_scanner_OUTPUTS} var1)
  string(REPLACE \"exit\\( YY_EXIT_FAILURE \\);\" \"abort();\" var2 \"\${var1}\")
  file(WRITE ${replaced_file} \"\${var2}\")
")
add_custom_command(OUTPUT ${replaced_file}
  COMMAND ${CMAKE_COMMAND} 
  ARGS -P ${CMAKE_CURRENT_BINARY_DIR}/replace_exit_with_abort.cmake
  DEPENDS ${FLEX_scanner_OUTPUTS}
)
add_library(parse-and-scan SHARED ${replaced_file} ${BISON_parser_OUTPUT_SOURCE}) 
```

我认为这是一个可行的解决方案，但从长远来看，最好的解决方案是修改程序**flex**以始终从其函数返回，而不是有时使用 exit() 调用。如果发生错误情况，则 flex 函数将通过使用不同的返回值将此信息传递给调用者。

# php - PHP循环整数加入资源数组

> ID：13364144
> 
> 赞同：0
> 
> 时间：2012-11-13T16:00:49.280
> 
> 标签：php, arrays

我正在查询作为资源输出的数据库，例如

```
$tracker=get_record("tracker_entries", "userid", $user, "course", $course->id, "unitid" , $unit); 
```

输出为：

```
$tracker->obj; 
```

我写了一个运行良好的循环。我正在努力解决的问题是将 $f 整数添加到资源中。即加入2个变量。

```
$tracker->obj.$f; 
```

它将它们视为 2 个独立的回声，有人知道我如何加入变量以便输出

```
$tracker->obj1
$tracker->obj2
$tracker->obj3
$tracker->obj4 
```

ETC

希望这是有道理的，这是我的代码

```
 $f=0;
 for($number=1;$number<6;$number+=1){
 for($i=0;$i<6;$i+=1){
 $f+=1;  
 $theunit = $unitx->pc.$f;
 $thetracker = $tracker->obj.$f;
 $feedback = $tracker->feedback.$f;
       if(!empty($theunit)){
          echo'<tr>
              <td class="pc" valign="top" valign="top" align="left" width="5%"><strong>'.$number.'.'.$i.'</strong> </td>
              <td valign="top" class="pc" align="left">'.$theunit.'</td>
              <td valign="top" class="pc" align="left">'.$feedback.'</td>
              <td valign="top" class="pc" align="center">'.$thetracker.'</td>
          </tr>';
      }
 }
 } 
```

$tracker 的 var_dump（有点大）

object(stdClass)#491 (208) { ["id"]=> string(5) "11810" ["course"]=> string(3) "958" ["unitid"]=> string(4) " 1089" ["userid"]=> 字符串(4) "9659" ["obj1"]=> 字符串(2) "否" ["obj2"]=> 字符串(3) "是" ["obj3"]= > string(0) "" ["obj4"]=> string(0) "" ["obj5"]=> string(0) "" ["obj6"]=> string(0) "" ["obj7" ]=> 字符串(0) "" ["obj8"]=> 字符串(0) "" ["obj9"]=> 字符串(0) "" ["obj10"]=> 字符串(0) "" [" obj11"]=> 字符串(0) "" ["obj12"]=> 字符串(0) "" ["obj13"]=> 字符串(0) ""["obj14"]=> 字符串(0) "" ["obj15"]=> 字符串(0) "" ["obj16"]=> 字符串(0) "" ["obj17"]=> 字符串(0) "" ["obj18"]=> 字符串(0) "" ["obj19"]=> 字符串(0) "" ["obj20"]=> 字符串(0) "" ["obj21"]=> 字符串( 0) "" ["obj22"]=> 字符串(0) "" ["obj23"]=> 字符串(0) "" ["obj24"]=> 字符串(0) "" ["obj25"]=>字符串（0）“”[“obj26”]=>字符串（0）“”[“obj27”]=>字符串（0）“”[“obj28”]=>字符串（0）“”[“obj29”] => 字符串(0) "" ["obj30"]=> 字符串(0) "" ["obj31"]=> 字符串(0) "" ["obj32"]=> 字符串(0) "" ["obj33"]=> 字符串(0) "" ["obj34"]=> 字符串(0) "" ["obj35"]=> 字符串(0 ) "" ["obj36"]=> 字符串(0) "" ["obj37"]=> 字符串(0) "" ["obj38"]=> 字符串(0) "" ["obj39"]=> 字符串(0) "" ["obj40"]=> 字符串(0) "" ["obj41"]=> 字符串(0) "" ["obj42"]=> 字符串(0) "" ["obj43"]= > 字符串(0) "" ["obj44"]=> 字符串(0) "" ["obj45"]=> 字符串(0) "" ["obj46"]=> 字符串(0) "" ["obj47" ]=> 字符串(0) "" ["obj48"]=> 字符串(0) "" ["obj49"]=>字符串(0) "" ["obj50"]=> 字符串(0) "" ["obj51"]=> 字符串(0) "" ["obj52"]=> 字符串(0) "" ["obj53"] => 字符串(0) "" ["obj54"]=> 字符串(0) "" ["obj55"]=> 字符串(0) "" ["obj56"]=> 字符串(0) "" ["obj57 "]=> 字符串(0) "" ["obj58"]=> 字符串(0) "" ["obj59"]=> 字符串(0) "" ["obj60"]=> 字符串(0) "" [ "obj61"]=> 字符串(0) "" ["obj62"]=> 字符串(0) "" ["obj63"]=> 字符串(0) "" ["obj64"]=> 字符串(0) " " ["obj65"]=> 字符串(0) "" ["obj66"]=> 字符串(0) "" ["obj67"]=> 字符串(0) "" ["obj68"]=> 字符串(0) "" ["obj69"]=> 字符串(0) "" ["obj70"]=> 字符串(0) "" [" obj71"]=> 字符串(0) "" ["obj72"]=> 字符串(0) "" ["obj73"]=> 字符串(0) "" ["obj74"]=> 字符串(0) "" ["obj75"]=> 字符串(0) "" ["obj76"]=> 字符串(0) "" ["obj77"]=> 字符串(0) "" ["obj78"]=> 字符串(0) "" ["obj79"]=> 字符串(0) "" ["obj80"]=> 字符串(0) "" ["obj81"]=> 字符串(0) "" ["obj82"]=> 字符串( 0) "" ["obj83"]=> 字符串(0) "" ["obj84"]=> 字符串(0) "" ["obj85"]=> 字符串(0) "" ["obj86"]=> 字符串(0) "" ["obj87"]=> 字符串(0) "" ["obj88"]=> 字符串(0) "" ["obj89"]=> 字符串(0) "" ["obj90"]=> 字符串(0) "" ["obj91"]=> 字符串(0) "" ["obj92"]=> 字符串(0) "" ["obj93"]=> 字符串(0) "" ["obj94"]=> 字符串(0) "" ["obj95"]=> 字符串(0) "" ["obj96"]=> 字符串( 0) "" ["obj97"]=> 字符串(0) "" ["obj98"]=> 字符串(0) "" ["obj99"]=> 字符串(0) "" ["obj100"]=>字符串（0）“”[“obj101”]=>字符串（0）“”[“obj102”]=>字符串（0）“”["obj103"]=> 字符串(0) "" ["obj104"]=> 字符串(0) "" ["obj105"]=> 字符串(0) "" ["obj106"]=> 字符串(0) "" ["obj107"]=> 字符串(0) "" ["obj108"]=> 字符串(0) "" ["obj109"]=> 字符串(0) "" ["obj110"]=> 字符串( 0) "" ["obj111"]=> 字符串(0) "" ["obj112"]=> 字符串(0) "" ["obj113"]=> 字符串(0) "" ["obj114"]=>字符串（0）“”[“obj115”]=>字符串（0）“”[“obj116”]=>字符串（0）“”[“obj117”]=>字符串（0）“”[“obj118”] => 字符串(0) "" ["obj119"]=> 字符串(0) "" ["obj120"]=>字符串(0) "" ["obj121"]=> 字符串(0) "" ["obj122"]=> 字符串(0) "" ["obj123"]=> 字符串(0) "" ["obj124"] => 字符串(0) "" ["obj125"]=> 字符串(0) "" ["obj126"]=> 字符串(0) "" ["obj127"]=> 字符串(0) "" ["obj128 "]=> 字符串(0) "" ["obj129"]=> 字符串(0) "" ["obj130"]=> 字符串(0) "" ["obj131"]=> 字符串(0) "" [ "obj132"]=> 字符串(0) "" ["obj133"]=> 字符串(0) "" ["obj134"]=> 字符串(0) "" ["obj135"]=> 字符串(0) " " ["obj136"]=> 字符串(0) "" ["obj137"]=> 字符串(0) ""["obj138"]=> 字符串(0) "" ["obj139"]=> 字符串(0) "" ["obj140"]=> 字符串(0) "" ["obj141"]=> 字符串(0) "" ["obj142"]=> 字符串(0) "" ["obj143"]=> 字符串(0) "" ["obj144"]=> 字符串(0) "" ["obj145"]=> 字符串( 0) "" ["obj146"]=> 字符串(0) "" ["obj147"]=> 字符串(0) "" ["obj148"]=> 字符串(0) "" ["obj149"]=>字符串(0) "" ["obj150"]=> 字符串(0) "" ["obj151"]=> 字符串(0) "" ["obj152"]=> 字符串(0) "" ["obj153"] => 字符串(0) "" ["obj154"]=> 字符串(0) "" ["obj155"]=>字符串(0) "" ["obj156"]=> 字符串(0) "" ["obj157"]=> 字符串(0) "" ["obj158"]=> 字符串(0) "" ["obj159"] => 字符串(0) "" ["obj160"]=> 字符串(0) "" ["obj161"]=> 字符串(0) "" ["obj162"]=> 字符串(0) "" ["obj163 "]=> 字符串(0) "" ["obj164"]=> 字符串(0) "" ["obj165"]=> 字符串(0) "" ["obj166"]=> 字符串(0) "" [ "obj167"]=> 字符串(0) "" ["obj168"]=> 字符串(0) "" ["feedback1"]=> 字符串(10) "fghj" ["feedback2"]=> 字符串(10) “gfhj”[“feedback3”]=>字符串（10）“fghj”[“feedback4”]=> 字符串(10) "fghj " ["feedback5"]=> 字符串(10) "fghj" ["feedback6"]=> 字符串(10) "ghhj " ["feedback7"]=> 字符串(7) " ghj " ["feedback8"]=> string(8) "fgjh " ["feedback9"]=> string(8) "fghj" ["feedback10"]=> string(8) "fgjh " ["feedback11"]= > string(0) "" ["feedback12"]=> string(0) "" ["feedback13"]=> string(0) "" ["feedback14"]=> string(0) "" ["feedback15" ]=> string(0) "" ["feedback16"]=> string(0) "" ["feedback17"]=> string(0) "" ["feedback18"]=> string(0) "" ["反馈19"]=> 字符串(0) ""["feedback20"]=> string(0) "" ["feedback21"]=> string(0) "" ["feedback22"]=> string(0) "" ["feedback23"]=> string(8) “fghj”[“feedback24”]=>字符串（7）“ghj”[“feedback25”]=>字符串（8）“fgjh”[“feedback26”]=>字符串（8）“fghj”[“feedback27”] => string(8) "fgjh " ["comment"]=> string(0) "" ["iv"]=> string(0) "" ["grade"]=> string(0) "" [" ivgrade"]=> string(0) "" ["ivdate"]=> string(0) "" ["assessorgrade"]=> string(0) "" ["gradedate"]=> string(0) "" [“评估日期”]=> 字符串（0）“”["partofiv"]=> 字符串(1) "0" }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:09:48.620

使用**标量**

示例代码：

```
<?php
$obj = (object) 'ciao';
$obj->test1 = (object) 'test1';

$i = 1;

echo $obj->test1->scalar . PHP_EOL;

echo $obj->{'test'.$i}->scalar . PHP_EOL; 
```

你的代码：

```
$theunit = $unitx->{'pc'.$f}->scalar;
$thetracker = $tracker->{'obj'.$f}->scalar;
$feedback = $tracker->{'feedback'.$f}->scalar; 
```

# mercurial - 如何不推送给定的提交

> ID：13364147
> 
> 赞同：0
> 
> 时间：2012-11-13T16:00:53.227
> 
> 标签：mercurial

我不小心提交了一些大文件（300MB）。然后我做了其他提交，意识到大文件不应该进入存储库，所以我删除了它们。

但是，在推送时，mercurial 会尝试按时间顺序发送变更集，这意味着它首先会尝试推送大文件。等待2小时后没有成功。那么，我可以在不影响其余部分的情况下摆脱那个特定的提交（变更集）吗？

或者我应该删除整个项目，提取一个新副本并手动重新应用我的其他更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:53:43.300

我通常发现`rebase`和`strip`命令对于这种历史修改操作是非常有用的工具；您可以将错误提交后所做的所有更改重新设置在其父级之上，然后剥离错误的变更集。

说`<bad>`是您要删除的坏变更集，`<parent>`是它的父级，`<child>`是您要保留的子级：

```
hg rebase -s <child> -d <parent>
hg strip <bad> 
```

例子：

```
$ hg log -G
@  changeset:   2:6d0685591967
|  summary:     after
|
o  changeset:   1:fab6b3f4effa
|  summary:     bad
|
o  changeset:   0:0233d1f3547c
   summary:     before

$ hg rebase -s 2 -d 0
saved backup bundle to .hg/strip-backup/6d0685591967-backup.hg
$ hg log -G
@  changeset:   2:b0fa9ee8533f
|  parent:      0:0233d1f3547c
|  summary:     after
|
| o  changeset:   1:fab6b3f4effa
|/   summary:     bad
|
o  changeset:   0:0233d1f3547c
   summary:     before

$ hg strip 1
saved backup bundle to .hg/strip-backup/fab6b3f4effa-backup.hg
$ hg log -G
@  changeset:   1:b0fa9ee8533f
|  summary:     after
|
o  changeset:   0:0233d1f3547c
   summary:     before 
```

如您所见，坏的变更集现在已经消失了。

请注意，为了`rebase`和`strip`工作，您需要启用`rebase`和`mq`扩展。还要确保在执行此历史修改操作之前制作存储库的备份副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:10:37.790

只要推送没有完成，您可以尝试启用“mq”扩展，您可以删除尚未推送的提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:02:02.710

您不必完全手动重新应用其他更改。您可以`export`将`import`它们添加到新的存储库副本中。

# javascript - 有没有办法可以减少在打字稿文件顶部定义的引用路径的数量？

> ID：13364149
> 
> 赞同：1
> 
> 时间：2012-11-13T16:01:03.450
> 
> 标签：javascript, typescript

鉴于以下情况：

```
/Admin/dialog/start.ts
/// <reference path="file1.ts" />
/// <reference path="file2.ts" />
module Admin.dialog {
    export function x() { };
    Admin.dialog.y();
    Admin.dialog.z();
}

/Admin/dialog/file1.ts
module Admin.dialog {
    export function y() { };
}

/Admin/dialog/file2.ts   
module Admin.dialog {
    export function z() { };
} 
```

有什么方法可以缩短引用，或者我可以在另一个文件中声明函数 y() 和 z()，这样我就不必在文件 start.ts 中引用许多引用路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T16:44:05.863

对于我们当前的项目，我们有一个全局 .ts 文件，其中当前包含 79 个不同的引用路径。为了这个答案，称之为 Global.ts

然后在我们的源文件中，我们在顶部只有 1 个对 Global.ts 的引用，它本身引用了我们需要的所有其他内容，并且到目前为止它运行良好。

有时我们需要引用 Global.ts*和*特定的 ts 文件，以便 Visual Studio code-insight 充分发挥作用，但并非一直如此。我们将其归结为 VS TypeScript 扩展的不成熟，因为代码仍然构建良好，只是 VS 补全出了点问题。

# c# - 如何将文件夹浏览器对象的根文件夹更改为系统文件夹以外的特定文件夹/路径？

> ID：13364150
> 
> 赞同：0
> 
> 时间：2012-11-13T16:01:07.300
> 
> 标签：c#, directory

这不起作用：

```
fbFolderBrowser.RootFolder = @"C:\A Folder I Created\Test1\"; 
```

当用户单击按钮时，我希望选择上述文件夹。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:08:44.210

而不是`RootFolder`你需要设置`SelectedPath`-

```
fbFolderBrowser.SelectedPath = @"C:\A Folder I Created\Test1\"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:03:22.270

如果我没记错的话：

```
fbFolderBrowser.InitialDirectory = @"C:\A Folder I Created\Test1\"; 
```

# linux - awk one liner 根据列的值仅选择行

> ID：13364153
> 
> 赞同：16
> 
> 时间：2012-11-13T16:01:18.857
> 
> 标签：linux, unix, awk

我想读取**filein.txt**（制表符分隔）并输出一个**fileout.txt**，其中仅包含与给定列的值匹配的行，并消除正在查询的列。IE，

```
filein.txt
#name\thouse\taddress
roger\tvictorian\t223 dolan st.
maggie\tfrench\t12 alameda ave.
kingston\tvictorian\t224 house st.
robert\tamerican\t22 dolan st. 
```

假设我只想选择房屋`victorian`风格的行，那么我的**fileout.txt**应该如下所示：

```
fileout.txt
#name\taddress
roger\t223 dolan st.
kingston\t224 house st. 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-13T16:19:37.317

```
awk -F"\t" '$2 == "victorian" { print $1"\t"$3 }' file.in 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T16:11:12.317

您可以使用以下`awk`脚本执行此操作：

```
#!/bin/bash

style="victorian"
awk -v s_style=$style 'BEGIN{FS=OFS="\t"}
    $2==s_style {$2=""; sub("\t\t","\t"); print}' 
```

**解释：**

*   `style="victorian"`：在脚本之外指定要选择的房屋样式，`awk`以便更容易维护
*   `awk`: 调用 awk
*   `-v s_style=$style`: 该`-v`选项将外部变量传递给 awk。需要为您传入的每个变量指定此项。在这种情况下，它将外部变量分配给`$style`awk 变量`s_style`。
*   `BEGIN{FS=OFS="\t"}`: 告诉 awk 输出中的字段分隔符应该是制表符，而不是默认情况下的空格。
*   `{$2==s_style {$2=""; sub("\t\t","\t"); print}}'`：如果第二个字段是`s_style`（在这种情况下，`victorian`）中指定的房屋类型，则将其删除并打印该行。

**或者**，您可以这样做：

```
#!/bin/bash

style="victorian"
awk -v s_style=$style 'BEGIN{FS=OFS="\t"}
    $2==s_style {print $1, $3}' 
```

但这假设您的输入文件将来不会有由制表符分隔的其他字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-11T19:37:13.233

使用 OFS（输出字段分隔符）变量，可以避免行之间的硬编码：

```
awk -F"\t" -v OFS="\t" '$2 == "victorian" { print $1,$3 }' file.in 
```

# python - 将信息从 URL 保存到 MySQL 数据库

> ID：13364155
> 
> 赞同：0
> 
> 时间：2012-11-13T16:01:19.263
> 
> 标签：python, mysql

我基本上有这个 url 有一堆信息，我想使用 python 将它们保存到 MySQL 中的数据库中。我会发布我的代码以显示我在哪里，但老实说，我真的不知道从哪里开始如何将它保存到数据库表中。请让我知道这是否令人困惑，我会尽力清除它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:11:43.297

[从http://zetcode.com/databases/mysqlpythontutorial/](http://zetcode.com/databases/mysqlpythontutorial/)试试这个例子。当然你应该首先安装一个 MySQL DB 和 MySQLdb 库。

```
import MySQLdb as mdb
import sys

con = mdb.connect('localhost', 'testuser', 'test623', 'testdb');

with con:

    cur = con.cursor()
    cur.execute("CREATE TABLE IF NOT EXISTS \
        Writers(Id INT PRIMARY KEY AUTO_INCREMENT, Name VARCHAR(25))")
    cur.execute("INSERT INTO Writers(Name) VALUES('Jack London')")
    cur.execute("INSERT INTO Writers(Name) VALUES('Honore de Balzac')")
    cur.execute("INSERT INTO Writers(Name) VALUES('Lion Feuchtwanger')")
    cur.execute("INSERT INTO Writers(Name) VALUES('Emile Zola')")
    cur.execute("INSERT INTO Writers(Name) VALUES('Truman Capote')") 
```

要从 url 加载 html 文件，您可以使用[urllib2](http://docs.python.org/2/library/urllib2.html)：

```
import urllib2
f = urllib2.urlopen('http://www.python.org/')
html = f.read() 
```

要解析 html 并提取数据，您可以使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(html)
for a in soup.find_all('a'):
    # add to mysql 
```

# silverlight - 在用户控件中绑定文本框？

> ID：13364156
> 
> 赞同：0
> 
> 时间：2012-11-13T16:01:21.057
> 
> 标签：silverlight, user-controls

我有以下

**MyAwesomeControl（用户控制）**

它里面有一个**文本框**。它绑定到一个名为**Text**的依赖属性。

**简单视图模型**

像对象（不是真正的虚拟机，但它得到了重点），建立了一个人的集合（这是可观察的）

它还有一个**SelectedPerson**属性，用于通知更改

**主页面控制**

将其数据上下文设置为**SimpleViewModel** 包含一个绑定到人员集合的网格（用于选择人员）

MyAwesomeControl 及其**Text**属性绑定到 SelectedPerson.Name

一个 TextBlock 也绑定到 SelectedPerson.Name

我在这里做了一个小解决方案：[https ://skydrive.live.com/redir?resid=82ECBE29B8DC2CD5!300](https://skydrive.live.com/redir?resid=82ECBE29B8DC2CD5!300)

**问题**

当我在网格中选择一个人时，MyAwesomeControl 中的文本框不会更新。

主窗体上的文本块确实如此。

我们如何允许用户提供对 MyAwesomeControl 的文本的绑定，并让它更新内部文本框（注意这个控件将被重用，所以我不知道主页特定的值）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:26:17.067

当您需要绑定到自定义用户控件中的自定义依赖属性时，您需要使用元素绑定，并且不要设置`DataContext`用户控件内部。

因此，您需要按照以下步骤使您的示例工作：

*   您需要`DataContext = this;`从 userControl 的构造函数中删除

*   只需为您的 UserControl 添加一个名称，例如`<UserControl ... x:Name="Self" >`

*   并在您的文本绑定（内部）中使用`ElementName`with ：`Self``MyAwsomeControl.xaml`

    ```
    Text="{Binding Text, ElementName=Self, Mode=TwoWay}" 
    ```

如果您不想使更新工作，您还需要设置您使用自定义控件的位置（内部`Mode`）：`TwoWay``MainPage.xaml`

```
Text="{Binding SelectedPerson.Name, Mode=TwoWay}" 
```

# jquery - jQuery Tokeninput：只读不工作

> ID：13364161
> 
> 赞同：2
> 
> 时间：2012-11-13T16:01:37.127
> 
> 标签：jquery, json, jquery-tokeninput

我在一个字段中使用了在[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)中找到的插件，该字段创建了一个对 Web 应用程序具有管理员访问权限的用户列表。

搜索、添加和删除用户完美无缺。

但是，我想使用“只读”功能来阻止人们将自己从列表中删除（这会导致问题，因为他们无法看到该页面）。

该插件建议将`"readonly" : true`属性添加到设置页面的 JSON 中。我已经这样做了，但我仍然可以删除自己。

这是生成的函数。任何人都可以看到它有什么问题吗？

```
$("#admin_users").tokenInput("/people/select", {
  prePopulate: [
    {
      "id": 1,
      "name": "Kevin Hughes",
      "readonly": true
    }, {
      "id": 3,
      "name": "Caroline Hughes",
      "readonly": false
    }
  ]
}); 
```

正如我所说，除了`readonly`位之外，它工作正常。

**额外信息：**我也在页面上使用 Bootstrap。这能有什么互动吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:11:59.143

[事实证明，您从http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)网页上的下载链接获得的代码实际上并不支持此功能，即使它在页面上的文档中，下载链接说“latest”，并且版本号与其 repo 中的最新提交相同。

[我从他们的 GitHub https://github.com/loopj/jquery-tokeninput](https://github.com/loopj/jquery-tokeninput)下载了一个更新的版本，它现在可以正常工作了。

# html - 使用经典 ASP 替换 HTML 中的文本

> ID：13364164
> 
> 赞同：3
> 
> 时间：2012-11-13T16:01:52.103
> 
> 标签：html, asp-classic, replace

我不确定Classic ASP（VBscript）是否可以做到这一点，但我想做的是以下几点：

在 HTML 文本中搜索特定字符串（仅在 p-tags、div-tags、li-tags、span-tags 和忽略其他标签（如 a-tags）之间的文本）并将其替换为其他内容。例如：

**原始的 HTML**

```
<p>Some text with the keyword.</p> 
```

**经典的 ASP 函数**

仅在所有 p-tags、div-tags、span-tags 和 li-tags 之间搜索 HTML 文本中的关键字，但忽略其他标签（如 a-tags）之间的文本。将关键字替换为其他内容。

**输出 HTML**

```
<p>Some text with the <a href="someurl">keyword</a>.</p> 
```

如果这是**不可能**的，有没有其他方法可以做到这一点？有人有这方面的经验吗？

只是要清楚。“带有关键字的一些文本。”-文本不是来自数据库，因为这太容易了:) 不幸的是，它位于 .asp 文件的 HTML 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:13:29.843

这里需要字符串操作.. 因为我从来没有真正进入过正则表达式，所以我很久以前就带着一堆我自己的方法来以各种方式操作文本。非常丑陋，不是最佳效率，但它有效。

首先，将这些函数添加到您的代码中：

```
Function GetBetween(str, leftDelimeter, rightDelimeter)
    Dim tmpArr, result(), x
    tmpArr=Split(str, leftDelimeter)
    If UBound(tmpArr) < 1 Then
        GetBetween=Array() : Exit Function
    End If
    ReDim result(UBound(tmpArr)-1)
    For x=1 To UBound(tmpArr)
        result(x-1)=(Split(tmpArr(x), rightDelimeter))(0)
    Next
    Erase tmpArr
    GetBetween=result
End Function

Function ReplaceWholeWord(ByVal strText, strWord, strToReplaceWith)
    ReplaceWholeWord = strText
    If InStr(strText, strWord)<1 Then Exit Function

    'Text is only the word?
    If strText=strWord Then
        strText = Replace(strText, strWord, strToReplaceWith)
    Else  
        'Text starting with word?
        If InStr(strText, strWord & " ")=1 Then
            strText = strToReplaceWith & " " & Right(strText, Len(strText) - Len(strWord & " "))
        End If

        'Text ends with word?
        If Right(strText, Len(" " & strWord))=(" " & strWord) Then
            strText = Left(strText, Len(strText) - Len(" " & strWord)) & " " & strToReplaceWith
        End If

        'Text ends with word and a period?
        If Right(strText, Len(" " & strWord & "."))=(" " & strWord & ".") Then
            strText = Left(strText, Len(strText) - Len(" " & strWord & ".")) & " " & strToReplaceWith & "."
        End If

        'Replace between other words:
        strText = Replace(strText, " " & strWord & " ", " " & strToReplaceWith & " ")
    End If

    ReplaceWholeWord = strText
End Function 
```

使用这些函数，这里是示例代码，可以按照您想要的方式替换关键字：

```
Const KEYWORD = "keyword"
Dim strHTML, arrTagsToFind, x
Dim curItemsArray,  y, curItem
Dim curReplacedItem
arrTagsToFind = Array("p", "div")
strHTML = "<b>this keyword will not be replaced</b><p>Some text with the keyword.</p>keyword here won't be replaced too<p>Some other text with the keyword22 that is not whole word but end with keyword</p><div>keyword first</div>"
For x=0 To UBound(arrTagsToFind)
    curItemsArray = GetBetween(strHTML, "<" + arrTagsToFind(x) + ">", "</" + arrTagsToFind(x) + ">")
    For y=0 To UBound(curItemsArray)
        curItem = curItemsArray(y)
        curReplacedItem = ReplaceWholeWord(curItem, KEYWORD, "<a href=""#foo"">" & KEYWORD & "</a>")
        strHTML = Replace(strHTML, curItem, curReplacedItem)
    Next
Next
Response.Write(strHTML) 
```

# ruby - 作为 Ruby/Rails 开发人员，zsh 与 bash？有什么好处？

> ID：13364169
> 
> 赞同：10
> 
> 时间：2012-11-13T16:02:12.803
> 
> 标签：ruby, bash, shell, zsh

我已经看到很多人推荐 zsh 而不是 bash 进行 ruby​​ 开发，但我不明白 zsh 比 bash 提供了什么？

这篇文章的答案是：

当使用 zsh 而不是 bash 时，对于 ruby​​ 开发人员来说，有什么好处呢？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T16:11:54.950

编辑：如果你使用[oh-my-zsh这适用](https://github.com/robbyrussell/oh-my-zsh)

就个人而言，我主要使用它，因为它会在命令提示符中显示您当前的 git 分支。所以，如果你像我一样经常要切换分支，千万不要乱码。

此外，对我来说，一个不错的好处是我创建了一个`oh-my-zsh`默认启用自定义主题的 fork，我可以将它部署到我需要它的任何机器上（例如，生产服务器），只需几个命令。这样，我加载了我所有的 zsh 别名、我的自定义主题等......

最后，我正在使用一个 zsh 插件，它是[zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting)。这会在您键入命令时突出显示命令，以使其防伪。绿色 = 良好的现有命令，红色 = 你打错了……但还有更多，值得一试。

所以，是的，git 集成和在几秒钟内在任何机器上安装我自己的个人 zsh 设置的能力是我喜欢它的原因。

还有一个关于 oh-my-zsh 的 railscast：[http ://railscasts.com/episodes/308-oh-my-zsh](http://railscasts.com/episodes/308-oh-my-zsh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:11:16.310

除非执行某种 shell 脚本，否则 Ruby 开发人员不太可能注意到差异。Zsh 的最大胜利是：

*   更好的自动补全（恕我直言——bash 有自动补全功能，但不知何故，zsh 更直观、更流畅且通常更成熟）。

*   附加数据结构。

*   附加模块。

自动完成是最大的日常差异。其余的只有在编写 shell 脚本时才会注意到。

# asp.net - 如何自动化和导出 HTML 可搜索查询数据到 Excel

> ID：13364172
> 
> 赞同：3
> 
> 时间：2012-11-13T16:02:27.893
> 
> 标签：asp.net, excel, xhtml, vba

我有兴趣从中提取数据的网页有一个包含多个搜索字段的表格。我可以在这些字段中的任何一个字段中输入数据，然后单击表格底部的搜索按钮，然后根据我想要搜索的信息查看结果。

我有多个要搜索的数字（大约 300 个），而不是单独搜索每个数字，有没有办法自动搜索数据并将数据导入到我要搜索的每个数字的 Excel 工作表中？

是否可以使用 Excel 宏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:55:43.017

为此，您可以使用 MSXML 和 MSHTML 库。此代码应该可以帮助您入门。
首先运行这个 sub 来添加两个引用（你只需要运行一次）：

```
Sub addReferences()
    ActiveWorkbook.VBProject.References.AddFromGuid "{3050F1C5-98B5-11CF-BB82-00AA00BDCE0B}", 4, 0
    ActiveWorkbook.VBProject.References.AddFromGuid "{F5078F18-C551-11D3-89B9-0000F81FE221}", 6, 0
End Sub 
```

然后编辑`getCAGEValues`sub 以导入您的 CAGE 代码并保存结果数据（以及您想要从页面获取的任何其他数据）：

```
Sub getCAGEValues()
    Dim oHTMLDoc As MSHTML.HTMLDocument
    Dim oSpan As MSHTML.HTMLGenericElement
    Dim CAGECodes() As Variant
    CAGECodes = Array("12345", "12346") 'CAGECodes is an array of your codes'
    For Each CAGECode In CAGECodes
        Set oHTMLDoc = getPage(CAGECode)
        Set oSpan = oHTMLDoc.getElementById("ctl00_cphMainPageBody_lblCompNameData") 'The id for the company name'
        MsgBox oSpan.innerText 'Save the value however you want to.'
    Next
End Sub

Function getPage(CAGECode As Variant) As MSHTML.HTMLDocument
    Dim oHttpRequest As MSXML2.XMLHTTP60
    Set oHttpRequest = New MSXML2.XMLHTTP60
    With oHttpRequest
        .Open "GET", "http://www.logisticsinformationservice.dla.mil/BINCS/details.aspx?CAGE=" & CAGECode, False
        .setRequestHeader "Cache-Control", "no-cache"
        .setRequestHeader "Pragma", "no-cache"
        .setRequestHeader "If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"
        .send
    End With
    Dim oHTMLDoc As MSHTML.HTMLDocument
    Set oHTMLDoc = New MSHTML.HTMLDocument
    oHTMLDoc.body.innerHTML = oHttpRequest.responseText
    Set getPage = oHTMLDoc
End Function 
```

# android - 修改 Holo 主题（ActionBar Sherlock）以将选项卡放在操作栏上方？

> ID：13364173
> 
> 赞同：0
> 
> 时间：2012-11-13T16:02:30.933
> 
> 标签：android, tabs, android-actionbar, actionbarsherlock

我正在开发一个使用 ActionBarSherlock 提供选项卡式 ActionBar 界面的应用程序。但是，我们的客户可能希望选项卡位于操作栏*上方*，而不是下方，这是常态。

是否可以覆盖默认样式来更改这些元素的顺序？如果是这样，我应该查看哪些文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:12:27.117

您不能更改此顺序。事实上，当空间允许时，有时会将选项卡放置在操作栏内，这会使您的要求更加复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T23:38:26.077

其实，我做这件事很偶然。我试图获取屏幕底部的选项卡（想想 iPhone），并将 LayoutParams 设置为底部的重力。选项卡保持在顶部，操作栏就在它们下方！

# javascript - 页面加载期间执行的 Javascript 行数

> ID：13364177
> 
> 赞同：9
> 
> 时间：2012-11-13T16:02:41.630
> 
> 标签：javascript, internet-explorer, profiler

我有一个用例，我需要在我的网页加载时获取执行的 Javascript 行总数。

我面临的问题是，当 JS 执行次数超过一定数量（我认为 IE 为 500 万）并且页面被挂起时，浏览器会发出警报。

我使用了 IE Developers 工具栏中提供的分析器，但它给了我调用的 JS 函数的总数，而不是执行的总行数/计数。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:57:07.140

这可能会有所帮助：

[http://www-archive.mozilla.org/performance/jsprofiler.html](http://www-archive.mozilla.org/performance/jsprofiler.html)

> 第一行指定从中收集时间的 js 文件。以下每一行的格式为： [A, B] C {DE} F {G, H, I}

D -> JS 文件中函数的基线号
E -> JS 文件中函数的 Extent（最后）行号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T13:52:30.970

只需将其分成更小的块并在超时后调用 - 这可以解决 IE 问题。例如

```
somethingBig();
somethingElseBig(); 
```

而是写：

```
somethingBig();
setTimeout(somethingElseBig); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T02:24:05.897

首先，你真的应该重新设计你的代码；500 万条没有将控制权交还给浏览器的语句绝对是很多代码，想象一下移动浏览器将如何处理它。

找出执行了多少语句的一种方法是检测代码，为代码中的每个语句添加一条语句以计算其执行次数，从而有效地将代码中的语句数加倍。

还有一些代码覆盖工具可以在浏览器中运行，而无需检测您的代码；谷歌搜索“javascript 代码覆盖率”提供了相当多的浏览器扩展，例如[hrtimer](http://hrtimer.mozdev.org/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T01:02:00.450

在 BASH 中：

```
wc -l file.js 
```

在 PHP 中：

```
<?php
$c=0;
$file_handle = fopen("file.js", "r");
while (!feof($file_handle)) {
    $line = fgets($file_handle);
    $c++;
}
fclose($file_handle);
print "$c lines.\n";
?> 
```

在 Node.js 中：

```
var i, count = 0, js=require('fs').createReadStream('file.js');

js.on('data', function(chunk) {
    for (i=0; i < chunk.length; ++i)
        if (chunk[i] == 10) count++;
});

js.on('end', function() {
    console.log(count);
}); 
```

尝试[缩小](https://github.com/mishoo/UglifyJS)以降低您的行号。

不过，这似乎是一大堆代码。

# json - 如何正确解组不同类型的数组？

> ID：13364181
> 
> 赞同：14
> 
> 时间：2012-11-13T16:02:46.720
> 
> 标签：json, go, unmarshalling

只要我有键值对，解组非常简单，但我将如何以不同的顺序解组不同类型的数组？单个元素是明确定义和已知的，但顺序不是。

我想不出一个漂亮的解决方案。

我会尝试在所有元素上出错吗？是否有某种工会类型可以为我做到这一点？

[游乐场版](http://play.golang.org/p/ZVPW7eYJh2)

```
package main

import (
    "encoding/json"
    "fmt"
)

var my_json string = `{
    "an_array":[
        "with_a string",
        {
            "and":"some_more",
            "different":["nested", "types"]
        }
    ]
}`

type MyInner struct {
    And     string
    Different   []string
}

type MyJSON struct {
    An_array []json.RawMessage
}

func main() {
    var my_json_test MyJSON

    e := json.Unmarshal([]byte(my_json), &my_json_test)
    if e != nil {
        fmt.Println(e)
    } else {
        for index, value := range my_json_test.An_array {
            fmt.Println("index: ", index)
            fmt.Println("value: ", string(value))
        }
        var my_inner MyInner
        err := json.Unmarshal(my_json_test.An_array[1], &my_inner)
        if err != nil {
            fmt.Println(err)
        } else {
            fmt.Println("inner structure: ", my_inner)
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T18:32:54.227

Go 官方博客有一篇关于[`encoding/json`](http://golang.org/pkg/encoding/json/)：[JSON 和 GO](http://blog.golang.org/2011/01/json-and-go.html)的好文章。可以将任意数据“解码”到 interface{} 中并使用类型断言来动态确定类型。

您的代码可能会修改为：

```
package main

import (
    "encoding/json"
    "fmt"
)

var my_json string = `{
    "an_array":[
    "with_a string",
    {
        "and":"some_more",
        "different":["nested", "types"]
    }
    ]
}`

func WTHisThisJSON(f interface{}) {
    switch vf := f.(type) {
    case map[string]interface{}:
        fmt.Println("is a map:")
        for k, v := range vf {
            switch vv := v.(type) {
            case string:
                fmt.Printf("%v: is string - %q\n", k, vv)
            case int:
                fmt.Printf("%v: is int - %q\n", k, vv)
            default:
                fmt.Printf("%v: ", k)
                WTHisThisJSON(v)
            }

        }
    case []interface{}:
        fmt.Println("is an array:")
        for k, v := range vf {
            switch vv := v.(type) {
            case string:
                fmt.Printf("%v: is string - %q\n", k, vv)
            case int:
                fmt.Printf("%v: is int - %q\n", k, vv)
            default:
                fmt.Printf("%v: ", k)
                WTHisThisJSON(v)
            }

        }
    }
}

func main() {

    fmt.Println("JSON:\n", my_json, "\n")

    var f interface{}
    err := json.Unmarshal([]byte(my_json), &f)
    if err != nil {
        fmt.Println(err)
    } else {
        fmt.Printf("JSON: ")
        WTHisThisJSON(f)
    }
} 
```

它给出如下输出：

```
JSON:
 {
    "an_array":[
    "with_a string",
    {
        "and":"some_more",
        "different":["nested", "types"]
    }
    ]
} 

JSON: is a map:
an_array: is an array:
0: is string - "with_a string"
1: is a map:
and: is string - "some_more"
different: is an array:
0: is string - "nested"
1: is string - "types" 
```

它还没有完成，但显示了它是如何工作的。

# javascript - 点击 Jquery 打开和关闭子菜单

> ID：13364183
> 
> 赞同：6
> 
> 时间：2012-11-13T16:02:52.350
> 
> 标签：javascript, jquery, menu

我有一个主菜单，它将在 jquery 中显示带有单击事件的子菜单（客户端想要单击而不是悬停）所以我得到了它但我仍然无法弄清楚一件事：我的菜单和子菜单工作正常所以当我点击“新闻”时，子菜单会很好地向下滑动，当我点击“新闻”时，它会关闭，但是如果在打开新闻子菜单后我点击“资源”，则会出现相应的子菜单，但新闻子菜单保持打开状态，我希望在单击另一个菜单项或在主菜单区域之外关闭上一个子菜单有什么想法吗？这是我得到的：

```
<ul id="MainMenu">
        <li><a href="#">Home</a></li>
        <li><a href="#">About Us</a></li>
        <li>
              <a href="#">News</a>
              <ul class="noJS">
                <li><a href="#">sub menu 1</a></li>
                <li><a href="#">sub menu 2</a></li>
                <li><a href="#">sub menu 3</a></li>
                <li><a href="#">sub menu 4</a></li>
                <li><a href="#">sub menu 5</a></li>
                <li><a href="#">sub menu 6</a></li>
            </ul>                         
        </li>
        <li><a href="#">Jobs</a></li>
        <li><a href="#">Contact Us</a></li>
        <li><a href="#">Admin</a></li>
        <li>
            <a href="#">Resources</a>
            <ul class="noJS">
                <li><a href="#">sub menu 1</a></li>
                <li><a href="#">sub menu 2</a></li>
                <li><a href="#">sub menu 3</a></li>
                <li><a href="#">sub menu 4</a></li>
                <li><a href="#">sub menu 5</a></li>
                <li><a href="#">sub menu 6</a></li>
            </ul>
        </li>
        <li class="lastChild"><a href="#">New Button</a></li>
    </ul> 
```

和jQuery：

```
 $(function(){
$('#MainMenu').find('> li').click(function(){
    $(this).find('ul')
    .stop(true, true).slideToggle(400); 
    return false;       
});    
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T16:17:39.340

尝试这样的事情

```
$(function() {
    $('#MainMenu > li').click(function(e) { // limit click to children of mainmenue
        var $el = $('ul',this); // element to toggle
        $('#MainMenu > li > ul').not($el).slideUp(); // slide up other elements
        $el.stop(true, true).slideToggle(400); // toggle element
        return false;
    });
    $('#MainMenu > li > ul > li').click(function(e) {
        e.stopPropagation();  // stop events from bubbling from sub menu clicks
    });
});​ 
```

[http://jsfiddle.net/Ssu32/](http://jsfiddle.net/Ssu32/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:50:07.573

只需将此行添加到您的代码中

```
$('#MainMenu > li').not(this).find('ul').slideUp(); 
```

**完整代码**

```
$('#MainMenu').find('> li').click(function() {
    $('#MainMenu > li').not(this).find('ul').slideUp();
    $(this).find('ul').stop(true, true).slideToggle(400);
    return false;
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/ZpeLG/)**

# c# - Curl - 获取包含图像和 css 的页面

> ID：13364187
> 
> 赞同：0
> 
> 时间：2012-11-13T16:03:09.603
> 
> 标签：c#, php, javascript, jquery

```
<?php
function get_web_page($url)
{
        //echo "curl:url<pre>".$url."</pre><BR>";
    $options = array(
        CURLOPT_RETURNTRANSFER => true,     // return web page
        CURLOPT_HEADER         => false,    // don't return headers
        CURLOPT_FOLLOWLOCATION => true,     // follow redirects
        CURLOPT_ENCODING       => "",       // handle all encodings
        CURLOPT_USERAGENT      => "spider", // who am i
        CURLOPT_AUTOREFERER    => true,     // set referer on redirect
        CURLOPT_CONNECTTIMEOUT => 15,      // timeout on connect
        CURLOPT_TIMEOUT        => 15,      // timeout on response
        CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects

    );

    $ch      = curl_init($url);
    curl_setopt_array( $ch, $options );
    $content = curl_exec( $ch );
    $err     = curl_errno( $ch );
    $errmsg  = curl_error( $ch );
    $header  = curl_getinfo( $ch,CURLINFO_EFFECTIVE_URL );
    curl_close( $ch );

    $header['errno']   = $err;
    $header['errmsg']  = $errmsg;

    //change errmsg here to errno
    if ($errmsg)
    {
        echo "CURL:".$errmsg."<BR>";
    }
    return $content;
}
print_r(get_web_page('http://google.com'));
?> 
```

为什么在这个例子中我没有图像和 CSS？我怎么才能得到它？只是解决这个问题吗？我必须在所有链接之前添加[http://google.com](http://google.com)，但是如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:07:01.963

您可能对这样的库感兴趣：http: [//phpcrawl.cuab.de/](http://phpcrawl.cuab.de/)

libcurl 本身不能充当网络爬虫，因为它不分析页面内容。这是你必须自己做的工作。

# c# - EF Code First - 集合中的集合

> ID：13364188
> 
> 赞同：0
> 
> 时间：2012-11-13T16:03:12.930
> 
> 标签：c#, asp.net, entity-framework, code-first

我可能是个白痴，在过去的 2 个小时里我一直在寻找这个问题的答案，问题很可能是我不确定如何表达它。

基本上我是第一次编码并在这个项目中使用它并且不确定如何查询它的新手。

我有三个班

简介 > 团队 > 活动

我需要获取特定用户可以访问的事件列表，该用户必须是拥有所述事件的团队的成员。

用户（个人资料）可以是许多团队的成员，我需要所有团队的事件列表。

我已经减少了我的课程，因为其中大部分与我目前的要求无关

```
 private void BindEvents()
    {
        var db = new Context();

        var events = db.Profiles
            .Include("Teams")
            .Include("Teams.Events")
            .Where(p => p.User_ID == user)
            .FirstOrDefault().Teams.Select(t => new { t.Events }.Events);

        gvUpcomingEvents.DataSource = events;
        gvUpcomingEvents.DataBind();

        db.Dispose();
    }

public class Profile
{
   [Key]
   public Guid User_ID { get; set; }
   [Required, MaxLength(10)]
   public string Title { get; set; }
   [Required, MaxLength(50)]
   public string Forename { get; set; }
   [Required, MaxLength(50)]
   public string Surname { get; set; }
   public ICollection<Team> Teams { get; set; }
   public Profile()
   {
       Teams = new HashSet<Team>();
   }
}

public class Team
{
    [Key]
    public int ID { get; set; }
    [Required, MaxLength(150)]
    public string Name { get; set; }
    [Required]
    public bool Active { get; set; }

    //Foreign Keys
    public ICollection<Profile> Users { get; set; }
    public ICollection<Event> Events { get; set; }

    public Team()
    {
        Users = new HashSet<Profile>();
    }
}

public class Event
{
   [Key]
   [Required]
   public int ID { get; set; }
   [Required]
   public Guid GUID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:09:17.980

试试 SelectMany

```
var events = db.Profiles
         .Where(p => p.User_ID == user)
         .SelectMany(p=>p.Teams.SelectMany(t=>t.Events)); 
```

# python - 声明性混合类中的同义词

> ID：13364189
> 
> 赞同：0
> 
> 时间：2012-11-13T16:03:18.057
> 
> 标签：python, sqlalchemy

我正在尝试在声明性类模型中混合使用同义词。

```
class MyMixin(object):

    __my_field = Column(Boolean, name='my_field', index=True, default=True)

    def __get_my_field(self):
        return self.__my_field

    @declared_attr
    def my_field(cls):  # @NoSelf
        return synonym('__my_field', descriptor=property(cls.__get_my_field))    

Base = declarative_base(cls=MyMixin)

class Model(Base):

    __tablename__ = 'model'

    value = Column(String) 
```

代码可以正常启动，但每当我尝试查询该字段 ( `session.query(Model).filter(Model.my_field==True)`) 时，都会出现最大递归错误。

我已经尝试过[其他问题](https://stackoverflow.com/questions/5821947/sqlalchemy-getter-setter-in-declarative-mixin-class "python - SQLAlchemy：声明性 Mixin 类中的 getter/setter")中建议的解决方案，但我得到的只是最大递归超出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:07:31.933

Python 将[名称修饰](http://docs.python.org/2/reference/expressions.html#atom-identifiers)应用于以双下划线开头的类属性，我*强烈*怀疑这是您问题的根源。

从列声明中删除一个下划线：

```
class MyMixin(object):

    __my_field = Column(Boolean, name='my_field', index=True, default=True)

    def _get_my_field(self):
        return self._my_field

    @declared_attr
    def my_field(cls):  # @NoSelf
        return synonym('_my_field', descriptor=property(cls._get_my_field)) 
```

# javascript - JQuery：悬停时缩放文本

> ID：13364200
> 
> 赞同：5
> 
> 时间：2012-11-13T16:03:48.587
> 
> 标签：javascript, jquery

我想用动画缩放/取消缩放文本。问题是文本绝对位于相对 div 内，当我为字体大小设置动画时，文本仅扩展到右侧和底部。我希望它平等地向所有方面扩展/收缩。

准备好的例子：http: [//jsbin.com/welcome/48103/edit](http://jsbin.com/welcome/48103/edit)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:29:09.033

使用 CSS`transition`属性制作动画：

```
.zoom {
  display: inline-block; /* this is needed for inline elements */
  transition: transform 0.3s ease-in-out;
}

.zoom:hover {
  transform: scale(1.4);
}
```

```
<a class="zoom" href='#'>Hover me!</a>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:12:45.400

水平中心对齐很容易。只需添加`text-align: center`即可。但是如果你想在中间对齐，你需要使用`display: table`，因为“只有” td 是“允许”设置`vertical-align: middle`的。所以你必须建立一个 div-table 布局：http: [//jsbin.com/welcome/48145/edit](http://jsbin.com/welcome/48145/edit)

# android - Android：TextView 高亮显示

> ID：13364205
> 
> 赞同：0
> 
> 时间：2012-11-13T16:04:09.757
> 
> 标签：android, textview, highlight, thin

就像一支黄色荧光笔。如何在两端圆角的 TextView 文本上画一条细黄线？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:50:50.523

您可以使用渐变并根据需要控制它，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
  <shape xmlns:android="http://schemas.android.com/apk/res/android"
     android:shape="rectangle">
   <gradient android:startColor="#FFFF00" android:centerColor="#FFFF00"
         android:endColor="#FFFF00" android:angle="0" /> 
     <corners android:radius="30dp"  /> 
 </shape> 
```

并在 xml 中将 textview 引用到该渐变，如下所示：

```
 android:background="@drawable/gredient" 
```

希望能帮到你。

# core-animation - 一个 CGImageRef 用于多个 CALayers

> ID：13364207
> 
> 赞同：1
> 
> 时间：2012-11-13T16:04:28.493
> 
> 标签：core-animation, calayer

最近我一直在尝试用不同的技术在 iOS 上绘制 2D 精灵（CoreAnimation、UIViews、CGContext 和 Open GL ES）。我从 CoreAnimation 获得的最佳性能与开发时间，所以我会坚持下去（暂时）。

为了显示位图，我使用了 CALayers——它工作得很好，并且不比 Open GL 慢多少。有多种模式经常重复（这是平台游戏的典型特征）。出于节省内存的原因，我想为多个 CALayer 重用存储的图像。

我可以这样做吗？如何？我想像：

1.  将位图以任何形式（UIImage？）存储在内存中
2.  从 UIImage 获取 CGImageRef
3.  将 CGImageRef 应用于应显示该位图的每个 CALayer

这实际上是否只存储**指向**每个图层的位图的指针，或者“Apple-magic”是否为每个 CALayer 创建位图的**副本？**

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:13:04.917

在创建了一个 iOS 项目来测试之后，这是我的结论：

*   您可以将内容（类型 id）设置为 UIImage。时期。所以恕我直言，类型 id 是没用的：它应该是 UIImage
*   因此：您不能将内容设置为 CGImageRef 类型（如果您使用 __bridge id），内容为 nil 并且不会生成错误（与 Apple 文档相反，该文档说这适用于基于 afaik 的 iOS 的 MacOS X 10.6 及更高版本） .

我发现如果不为每个使用 CALayer 的 tilebitmap 使用 RAM，就无法多次显示一个 tile。您必须使用 OpenGL ES 才能做到这一点。

# blackberry - 如何在黑莓中创建搜索栏？

> ID：13364208
> 
> 赞同：0
> 
> 时间：2012-11-13T16:04:28.460
> 
> 标签：blackberry, java-me, seekbar

我需要在我的黑莓应用程序中创建一个搜索栏，就像在 android 中一样。我需要做的就是将它向右或向左滑动以增加和减少。黑莓中是否存在搜索栏，还是在黑莓中被称为滑块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:33:26.020

Create a SliderScreen:

```
public class SliderScreen extends MainScreen implements FieldChangeListener
{
    private SliderField slider;
    private HorizontalFieldManager hm;

    public SliderField(){
        slider = new SliderField(
            Bitmap.getBitmapResource("slider2_thumb_normal.png"),
            Bitmap.getBitmapResource("slider2_progress_normal.png"),
            Bitmap.getBitmapResource("slider2_base_normal.png"),
            Bitmap.getBitmapResource("slider2_thumb_focused.png"),
            Bitmap.getBitmapResource("slider2_progress_focused.png"),
            Bitmap.getBitmapResource("slider2_base_focused.png"), 
            8, 4, 8, 8, FOCUSABLE);

        slider.setChangeListener(this);
        hm = new HorizontalFieldManager();
        hm.add(slider);
        setStatus(hm);
    }

    public void fieldChanged(Field field, int context) {
        try {
            if (field == slider) {
                int value = slider.getValue();
            }
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (NullPointerException e) {
            e.printStackTrace();
        }
    } 
```

and Finally get the SliderField Class and SliderImages From [this BlackBerry Documents](https://github.com/blackberry/Samples-for-Java/blob/master/Advanced%20UI/src/com/samples/toolkit/ui/component/SliderField.java)

you can get the seekbar images from [BlackBerry samples](https://github.com/blackberry/Samples-for-Java/tree/master/Advanced%20UI/src/com/samples/toolkit/ui/images/sliders/version2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:57:18.397

在 API 中有一个[`GaugeField`](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/GaugeField.html)，但它仅用于显示值，用户无法更改它。但是你可以使用[`AdvancedUiLibrary`](http://docs.blackberry.com/es-es/developers/deliverables/29251/About_the_advanced_UI_library_1626501_11.jsp)which 有一个`SliderField`. [这里](http://docs.blackberry.com/es-es/developers/deliverables/29251/Creating_a_slider_1626520_11.jsp)的例子。

# javascript - 如何在 HTML 对象标签中包含带有 ä、ö、ü 等德语符号的文件？

> ID：13364216
> 
> 赞同：0
> 
> 时间：2012-11-13T16:04:55.980
> 
> 标签：javascript, jquery, html, encoding, jsf-1.2

在我的 Web 应用程序中，人们可以上传任何文件并稍后查看（或下载，如果无法显示）。因此，它们嵌入在 HTML“对象”标签中。从 Java 代码（我使用 JSF 1.2）中，我获得了必要的信息（文件路径、mime 类型），然后我通过 jQuery 构造了对象。这很好用……除非文件名中有 ä、ö、ü 等特殊符号。

我需要使用 jQuery 而不是直接获取 bean 值，因为 JSF 似乎总是返回数字实体而不是 ä、ö、ü 等，我替换它们。但是，它仍然不起作用。浏览器 URI 对文件路径进行编码并尝试查找。URI编码值我自己也没有改变。（我的编码是 ISO-8859-1）。

因此，简而言之：我必须做些什么才能在 HTML 对象标记中包含其文件名中具有 ä、ö ü 之类的符号的文件？（以及在替代下载链接中，如果文件无法显示）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:08:34.503

您需要为此使用一些特殊字符，本网站将它们全部包含在内：

[http://webdesign.about.com/library/bl_htmlcodes.htm](http://webdesign.about.com/library/bl_htmlcodes.htm)

Ä = `&Auml;`
ä = `&auml;`
Ü = `&Uuml;`
ü =`&uuml;`

有系统吗？

# android - 在Android中，将两个随机字符串放在两个单独的文本视图中？

> ID：13364218
> 
> 赞同：0
> 
> 时间：2012-11-13T16:04:58.757
> 
> 标签：android, sqlite

我知道在 Android 中 SQL`Order BY RANDOM() LIMIT 2`会输出两个随机字符串，但它会将两个字符串放入同一个 TextView 中。我想得到两个随机字符串并将它们放在两个单独的 TextView 中。此代码获取两个随机字符串并将它们输出到相同的文本视图中：

```
 //--- DBAdapter method
public String getRandomHP1() {
    Cursor cursor = this.db.query(
            "hdtable Order BY RANDOM() LIMIT 2",
            new String[] { KEY_HP }, null, null, null, null, null);
    String result = "";

    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
        result = result + cursor.getString(0);
    }
    return result;
}

//--- Main Activity
String r1 = dba.getRandomHP1();
dba.close();
optionB_TV.setText(r1); 
```

所以我尝试了下面的代码来尝试将两个随机字符串分成两个字符串数组，但它使应用程序崩溃。有人可以让我知道我做错了什么吗？谢谢！

```
 //--- DBAdapter method
public String[] getRandomHP2() {
    Cursor cursor = this.db.query(
            "hdtable Order BY RANDOM() LIMIT 2",
            new String[] { KEY_HP }, null, null, null, null, null);

    if (cursor != null) {
        for (cursor.moveToFirst(); !cursor.isAfterLast();){
            String colStrings[] = new String[2];
            colStrings[0] = cursor.getString(0);
            colStrings[1] = cursor.getString(1);
            return colStrings;
        }
    }
    return null;
}

//---Main Activity
String[] r2 = dba.getRandomHP2();
dba.close();
optionB_TV.setText(r2[0]);
optionC_TV.setText(r2[1]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:10:09.400

使用代码

```
 for (cursor.moveToFirst(); !cursor.isAfterLast();){
       String colStrings[] = new String[2];
        colStrings[0] = cursor.getString(0);
        colStrings[1] = cursor.getString(1);
        return colStrings;
    } 
```

您不断移动到光标中的第一个值。您将永远不会获得第二个值。此外，您正在尝试检索一个不存在的列，`cursor.getString(1)`这很可能是您发生崩溃的地方

试试这个

```
 int i = 0;
    String colStrings[] = new String[cursor.getCount()];
    while (cursor.moveToNext())
    {
     colStrings[i] = cursor.getString(0);
     i++;
    }

    return colStrings; 
```

另外..完成后不要忘记关闭光标..

只需致电`cursor.close();`即可

# facebook - facebook页面应用栏，如onclick next

> ID：13364219
> 
> 赞同：0
> 
> 时间：2012-11-13T16:05:01.677
> 
> 标签：facebook, facebook-graph-api, user-interface, facebook-apps, facebook-page

我对 Facebook 上的应用页面功能有疑问。

[https://www.facebook.com/InternationalDelight/app_481604621851046?ref=ts](https://www.facebook.com/InternationalDelight/app_481604621851046?ref=ts)

在上面的链接中，有蓝色的标头，然后是带有四个项目的银色或白色条。

头像/图标图像 一个按钮，允许直接链接到附加到另一个下拉按钮的所有者的 Facebook 页面。

**现在最后一个按钮是我很好奇的那个。它允许启动页面（在内容区域中）被喜欢，然后将人重定向到报价。**

我的应用程序处于沙盒模式，我想知道：这是我可以添加的应用程序吗？它是自定义构建的功能吗？我没有看到的标准功能，因为我的页面没有上线。，

如何复制整个栏的功能？

我已经深入研究了 Facebook 的 API 和 Facebook 图表，但老实说，我不知道要寻找什么或它叫什么。

检查时，容器 div 说...'stickeyheader' 可能是因为它粘在蓝色标题上...或时间线和 'timelineStickyHeader' 和 '可见'... .

有人熟悉这个动作/事件吗？让我知道是否需要添加更多详细信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:40:15.057

这是答案（以防有人在路上碰到这个）。有几个步骤可以通过 iFrame 将您的应用程序放到 Facebook 上（基本上是托管在其他地方的应用程序，但需要一些类似 Facebook 的按钮拦截。

首先，您构建您的应用程序。创建登录页面（稍后将添加标签）。在该页面的标题中查看截取用户 Facebook 日期以查看他们当前是否喜欢您的页面。如果他们不这样做，则设置一个阻止他们的功能。如果他们喜欢在“赞”按钮上对页面进行回发/处理，则单击将为用户设置传递到应用程序的条件。这就像门控。

现在，要开发应用程序，您必须访问 developer.facebook.com 并创建一个帐户。有两种方法可以拦截喜欢/用户日期...

这是我的原始代码（在 Coldfusion 和 Javascript 中）：

```
<cfscript>
//Decode the signed request
fb_str = listToArray(FORM.signed_request, '.');
//Facebook use strtr
fb_str = replacelist(fb_str[2], "-,_", "+,/");
//For some reason their base64 needs padding out to match a base64 length
pad = repeatstring("=", 4-len(fb_str) mod 4);
//Decode it
result = ToString(BinaryDecode(fb_str & pad, 'base64'));
//JSON-ify it
liked = deserializeJSON(result);
//Clean up and release memory
fb_str = pad = result = '';
</cfscript>

<cfif liked.page.liked eq 'YES'>
<script type="text/javascript">

top.window.location = 'http://apps.facebook.com/parentsavvybook/';

</script>
</cfif> 
```

这在您的 Coldfusion 页面（或其他服务器端脚本等效项）上进行。

更多可以在这里找到：http: [//www.facebook.com/note.php?note_id=10150169691075844](http://www.facebook.com/note.php?note_id=10150169691075844)

然后在开发者工具中，您要选择网络应用程序，然后单击显示创建新应用程序的按钮。填写应用信息，例如域是什么，以及应用的名称。

重要的是标签设置。

添加您的应用程序 URL（托管您的网络应用程序以指向具有 FB 脚本代码/重定向内容的页面。

创建后，您将拥有一个应用 ID 和应用 URL。

钥匙

关键是这段愚蠢的代码。

[http://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL](http://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL)

为什么这很重要。Facebook 页面可能由您管理，但您无法将其附加到页面。你会发疯好几天试图把它联系起来。

填写上面缺少的部分并转到链接。

系统会提示您一个下拉菜单，可让您将其附加到您的页面或您管理的页面。

这是另一个达到高点的帖子。

[http://blog.hubspot.com/blog/tabid/6307/bid/26330/How-to-Create-Custom-Tabs-for-Facebook-Business-Pages.aspx](http://blog.hubspot.com/blog/tabid/6307/bid/26330/How-to-Create-Custom-Tabs-for-Facebook-Business-Pages.aspx)

我希望这可以帮助那些在 FB 应用程序和标签上苦苦挣扎的人获得点赞按钮以及如何与之交互，然后最终附加它。

# bash - 从 shell 运行 IF 语句时出错

> ID：13364223
> 
> 赞同：0
> 
> 时间：2012-11-13T16:05:20.833
> 
> 标签：bash, shell, unix, if-statement, tcsh

尝试在两台机器上运行 IF 语句-

1.SunOS 5.8 Generic_Virtual sun4u sparc SUNW,Sun-Fire-V240 (bash)

2.SunOS 5.10 Generic_127112-11 i86pc i386 i86pc (tcsh)

我从 shell 运行的命令 -

> 如果（回声 13 | grep -w `date +%e`>/dev/null）；然后回显“现在”；菲

它在机器 1 上运行良好。但在机器 2 上出现以下错误（tcsh）-

> if：表达式语法。

如何在 tcsh 中纠正这个问题？我需要从 crontab 文件中运行它-

> 30 09 * * * 如果（回声 13 | grep -w `date +%e`>/dev/null）；然后回显“现在”；菲

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:17:20.310

您可能在这些机器上使用不同的 shell，这可以解释语法错误。您在代码中使用子shell，在不同的shell 上可能有不同的语法。

另请注意，您将 echo 的标准输出重定向到 /dev/null，因此无论如何您都看不到任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:05:07.787

`/bin/sh`无论您的登录 shell 是什么，您的 cron 作业都将在 下运行。

要从命令行运行它，只需先启动`/bin/sh`（或者，如果您愿意，可以`/bin/bash`）。

# php - mysqli 查询返回没有数据的行

> ID：13364226
> 
> 赞同：0
> 
> 时间：2012-11-13T16:05:31.360
> 
> 标签：php, mysql, phpmyadmin, mysqli

在 php 代码中，我试图检索数据库中一行的值。我希望我的查询是安全的，所以我使用 mysqli 和准备好的语句。但是，在获取行并尝试回显结果后，无论我回显什么，我都会得到空值。可能是什么原因？

下面是我的代码中获取并回显结果的部分。

```
// get value of id that sent from address bar 
$id=$_GET['id'];

////$sql="SELECT * FROM $tbl_name WHERE id='$id'";
$sql = $mysqli -> prepare("SELECT topic, detail, name, email, datetime FROM $tbl_name WHERE id=?");
$sql -> bind_param ("s", $id);
$sql -> execute();    

/* store result */
//  $sql->store_result();

// echo  "NUMBER IS : " . "$sql->num_rows";

$sql -> bind_result($topic, $detail, $name, $email, $datetime);
$rows = $sql -> fetch();

////$result=mysql_query($sql);

////$rows=mysql_fetch_array($result);
$sql -> close();
?>
<table width="90%" border="0" align="center" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td width="30%" align="left" bgcolor="#FFFFFF"><IMG name="pictureposition1" border="0" alt="" SRC="images/concordia_logo.jpg" ><br></td>
<td width="30%" colspan="5" align="center" bgcolor="#FFFFFF"><h1><font COLOR=#800517>PHP Forum</font></h1> </td>
<td width="30%" colspan="5" align="right" bgcolor="#FFFFFF"><h3><font COLOR=#800517>CMPE and SOFE 495 Computer Security</font></h3> </td>
</tr>
<tr>
<td><font COLOR="#FFFFFF">.</font></td>
</tr>
</table>
<table width="400" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td><table width="100%" border="0" cellpadding="3" cellspacing="1" bordercolor="1" bgcolor="#FFFFFF">
<tr>
<td bgcolor="#F8F7F1"><strong><?php echo $rows['topic']; ?></strong></td>
</tr>

<tr>
<td bgcolor="#F8F7F1"><?php echo $rows['detail']; ?></td>
</tr>

<tr>
<td bgcolor="#F8F7F1"><strong>By :</strong> <?php echo $rows['name']; ?> <strong>Email : </strong><?php echo $rows['email'];?></td>
</tr>

<tr>
<td bgcolor="#F8F7F1"><strong>Date/time : </strong><?php echo $rows['datetime']; ?></td>
</tr>
</table></td>
</tr>
</table>
<BR> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:17:55.190

您`binding result`因此无需将 fetch 的结果分配给新变量，因此请尝试如下

```
$sql -> bind_result($topic, $detail, $name, $email, $datetime);
$sql -> fetch();
echo $topic."<br>";
echo $detail."<br>"; 
```

有关详细信息，请参阅 PHP 手册：[http ://www.php.net/manual/en/mysqli.prepare.php](http://www.php.net/manual/en/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:16:01.757

我认为问题在于数据库查询的结果是一个对象。

尝试这个，

```
$rows[0]->name instead of 

$rows['name'] 
```

如果有多行。使用获取结果的计数

```
$count = count($row); 
```

然后进行 for 循环

```
for($i = 0;$i < $count; $i++){
$rows[$i]->name; 
```

}

# xml - 使用 XSLT 排序后将 XML 转换为 XML

> ID：13364229
> 
> 赞同：3
> 
> 时间：2012-11-13T16:05:44.933
> 
> 标签：xml, xslt, sorting

我正在尝试使用 XSLT 将 XML 转换为 XML。输出 XML 应根据输入 XML 中的 ModificationTime 元素进行排序。下面是xml代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<Process>
<currentDayAndHour>@Fri16</currentDayAndHour>

<!-- Few elements here. Need to retain them -->

<rowCount>1</rowCount>
<currentRow>1</currentRow>

<ClientList>
 <Status>0</Status>
 <ServerResponse>
  <Code>0</Code>
  <Text>OK</Text>
</ServerResponse>
<ServiceStartTime>2012-11-09 16:06:42.786</ServiceStartTime>
<ServiceEndTime>2012-11-09 16:06:42.827</ServiceEndTime>
<Files>
  <File>
    <Name>test.20121107215230411.txt</Name>
    <Size>29</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1352343152</ModificationTime>
    <Owner>19737</Owner>
    <Group>70902</Group>
  </File>
  <File>
    <Name>test.20121107183757513.txt</Name>
    <Size>29</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1352331478</ModificationTime>
    <Owner>19737</Owner>
    <Group>70902</Group>
  </File>
  <File>
    <Name>test1.20121107215230500.txt</Name>
    <Size>32</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1352343152</ModificationTime>
    <Owner>19737</Owner>
    <Group>70902</Group>
  </File>
  <File>
    <Name>test1.txt</Name>
    <Size>32</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1352323788</ModificationTime>
    <Owner>65174</Owner>
    <Group>75431</Group>
  </File>
  <File>
    <Name>HMP_test.txt</Name>
    <Size>28</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1352199478</ModificationTime>
    <Owner>19737</Owner>
    <Group>70902</Group>
  </File>
  <File>
    <Name>test1.20121107183757585.txt</Name>
    <Size>32</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1352331478</ModificationTime>
    <Owner>19737</Owner>
    <Group>70902</Group>
  </File>
  <File>
    <Name>client_access.20121108101411179.txt</Name>
    <Size>4182</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1352387653</ModificationTime>
    <Owner>19737</Owner>
    <Group>70902</Group>
  </File>
  <File>
    <Name>TechMtngAgenda.txt</Name>
    <Size>107</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1352044842</ModificationTime>
    <Owner>19737</Owner>
    <Group>70902</Group>
  </File>
  <File>
    <Name>test.txt</Name>
    <Size>29</Size>
    <Type>Regular</Type>
    <Permissions>-rw-r--r--</Permissions>
    <ModificationTime>1350063313</ModificationTime>
    <Owner>19737</Owner>
    <Group>70902</Group>
  </File>
</Files>
</ClientList>
<currentDocument>1</currentDocument>
</Process> 
```

我需要包含所有输入元素的输出 XML，但 Files 标记应按 ModificationTime 的递增顺序包含每个文件。我对 XSLT 有点陌生。我尝试使用 xsl:sort 但无法获得所需的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:43:14.973

此样式表将在 XSLT 1.0 中执行您想要的操作

```
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- Identity template -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Files">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates select="File">
        <xsl:sort order="ascending" data-type="number" select="ModificationTime"/>
      </xsl:apply-templates>      
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

此样式表将在 XSLT 2.0 中执行您想要的操作

```
<xsl:stylesheet
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

  <!-- Identity template -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Files">
    <xsl:copy>
      <xsl:sequence select="@*"/>
      <xsl:perform-sort select="File">
        <xsl:sort order="ascending" select="xs:integer(ModificationTime)"/>
      </xsl:perform-sort>      
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

在这两种情况下，Identity 模板都用于准确复制文档，并`xsl:template`引入了一个单一的模板来覆盖`Files`元素的处理。在 XSLT 1.0 示例`xsl:apply-templates`中，使用 with`xsl:sort`对`File`元素进行排序`ModificationTime`。`<xsl:apply-templates select="File">`对已排序元素的处理将传递`File`回 Identity 模板，因此它可能会被进一步覆盖。

在 XSLT 2.0 示例`xsl:sequence`中，用于将输入节点直接插入到结果树中。同样`xsl:perform-sort`直接返回排序后的序列，而不是执行额外的指令来复制元素。请注意，这些更改可能会使样式表的执行速度更快，但也会降低未来维护的灵活性。当您直接选择事物时，添加覆盖要困难得多。XSLT 1.0 样式表或其处理方式可以在 XSLT 2.0 中完成，而无需进行重大更改。最后一点，这两个例子都省略了不是元素`node()`的任何子元素。要捕获那些您可以在 XSLT 1.0 中添加的内容`Files``File`

```
<xsl:apply-templates select="node()[not(self::File)]"/> 
```

或者仅在 XSLT 2.0 中

```
<xsl:apply-templates select="node() except File"/> 
```

或者

```
<xsl:sequence select="node() except File"/> 
```

# c++ - QPainter::drawText，获取每个字符的边界框

> ID：13364231
> 
> 赞同：3
> 
> 时间：2012-11-13T16:05:56.243
> 
> 标签：c++, qt, qpainter, drawtext

我正在使用 QPainter 在 QImage 上绘制多行文本。但是，我还需要在每个字符的边界框周围显示一个彩色矩形。

所以我需要知道每个角色在绘制时的边界框。

例如，对于

```
painter.drawText(QRect(100, 100, 200, 200), Qt::TextWordWrap, "line\nline2", &r); 
```

考虑到换行符、自动换行、制表符等，我需要得到 10 个矩形。

例如，第二个`'l'`的矩形将在第一个的矩形下方`'l'`，而不是在 的右侧`'e'`，因为换行符。

类似于这张图片中红色矩形的坐标（我是手工放置的，所以它们并不是真正的正确位置）：

![在此处输入图像描述](../Images/0df25e49ca849f745377ea19e1000ec4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:59:02.190

这可能不是最好的解决方案，但它是我能想到的最好的解决方案。

我相信你将不得不“自己做”。也就是说，不是绘制一个文本块，而是一次绘制一个字符。然后你可以使用 QFontMetrics 来获取每个字符的边界框。

这是一个小工作，但还不错。类似的东西（伪代码，不是代码）：

```
QFontMetrics fm(myFont, paintDevice);
int x = startX;
int y = startY;
for (unsigned int i = 0; i < numChars; i++)
{
    char myChar = mystr[i];  // get character to print/bound
    QRect rect = fm.boundingRect( myChar );   // get that char's bounding box
    painter.drawText(x, y, Qt::TextWordWrap, mystr[i], &r);  // output char
    painter.drawRect(...); // draw char's bounding box using 'rect'
    x += rect.width();     // advance current position horizontally

    // TODO:
    // if y > lineLen      // handle cr
    //     x = startX;
    //     y += line height

} 
```

查看 QFontMetrics，它有许多不同的方法来获取边界框、最小边界框等。

[QFontMetrics 4.7](http://doc.qt.digia.com/qt/qfontmetrics.html)

啊...我现在看到您使用的重载返回实际的边界矩形。如果你愿意，你可以使用它并跳过 QFontMetrics - 否则整体算法是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-03T22:25:59.457

您可以使用 检索单个字符的边界框[`QFontMetrics::boundingRect(QChar)`](http://doc.qt.io/qt-5/qfontmetrics.html#boundingRect)，但它们必须以偏移量（[`QFontMetrics::ascent`](http://doc.qt.io/qt-5/qfontmetrics.html#ascent)从顶部以及[`QFontMetrics::width`](http://doc.qt.io/qt-5/qfontmetrics.html#width)从左侧的前面字符）呈现，因为它们是相对于字体的基线而不是相对于底部的完整字符串的边界框。
几行也必须分开处理。 [`QFontMetrics::lineSpacing`](http://doc.qt.io/qt-5/qfontmetrics.html#lineSpacing)给你他们的补偿。

```
QPainter painter(this);
painter.setFont(QFont("Arial", 72));

auto pen = painter.pen();

QString text{"line\nline2\ngg\n`"};
QRect boundingRect;
painter.drawText(rect(), Qt::AlignLeft | Qt::AlignTop, text, &boundingRect);
painter.drawRect(boundingRect.adjusted(0, 0, -pen.width(), -pen.width()));

pen.setColor(Qt::red);
painter.setPen(pen);
const auto lines = text.split('\n');
const auto fm = painter.fontMetrics();
for (int linei = 0; linei < lines.size(); ++linei) {
    const auto & line = lines[linei];
    for (int chi = 0; chi < line.size(); ++chi) {
        const auto bounds = fm.boundingRect(line[chi]);
        const auto xoffset = bounds.x() + fm.width(line, chi);
        const auto lineOffset = linei * fm.lineSpacing() + fm.ascent();
        const auto yoffset = lineOffset + bounds.y();
        painter.drawRect(QRect{xoffset, yoffset, bounds.width(), bounds.height()});
    }
} 
```

结果是

![](../Images/6dc644259f4decdb1b838a1a871b4f3f.png) ![](../Images/07dca2abc62efeb005569641f502aea6.png)

遗憾的是，这并不完美。

# java - 在原始音频文件中改变音高？

> ID：13364232
> 
> 赞同：-4
> 
> 时间：2012-11-13T16:05:57.850
> 
> 标签：java, android, audio, wav

假设您在 java/android 中有一个原始音频文件，并且需要更改其音高，例如，使声音像 Darth Vader 或其他东西一样低……您认为最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:16:45.920

**如果您想做这个客户端，**这看起来像是完成您想做的一种方法：

[http://www.surina.net/soundtouch/](http://www.surina.net/soundtouch/)

您是否也考虑过在服务器端做它，这样您就不仅限于 Java/Android？会有更多的声音处理库

# c# - winforms应用程序中的多线程

> ID：13364237
> 
> 赞同：4
> 
> 时间：2012-11-13T16:06:20.127
> 
> 标签：c#, winforms, multithreading

我正在编写一个使用报表查看器创建多个 PDF 文件的获胜表单。这些 PDF 文件分为 4 个主要部分，每个部分负责创建特定报告。这些进程正在创建至少 1 个文件，最多为用户数量（当前为 50 个）。

该程序已经存在，按顺序使用了 4 种方法。为了在用户数量不断增长的情况下获得额外的性能，我想将这些方法与邮件进程分开，分成 4 个单独的线程。

虽然我是使用 C# 多线程的新手，但我阅读了许多文章如何实现这一点。我唯一不确定的是我应该从哪个方向开始。当我阅读多篇博客文章时，我不确定是使用 4 个单独的线程、一个线程池还是多个后台工作人员。（或者并行编程应该是最好的方法吗？）。博客文章告诉我是否有超过 3 个线程使用线程池，但另一方面告诉我如果使用 winforms，请使用 backgroundworker。哪个选项是最好的（为什么）？

最后，我的主线程必须等待所有进程结束才能继续。

有人可以告诉我什么是解决我的问题的最佳方法。

*** 编辑后的额外信息 ***

我忘了告诉（在我阅读了您的评论和可能的解决方案之后）。这些方法共享一个“IEnumerable”，仅供阅读。在触发方法（不必按顺序运行）之后，这些方法会触发用于向 UI 发送状态更新的事件。我认为使用单独的线程触发事件即使不是不可能也很困难，因此应该有某种回调函数来报告运行时的状态更新。

伪代码中的一些示例。

```
 main()
 {
       private List<customclass> lcc = importCustomClass()

       export.CreatePDFKind1.create(lcc.First(), exportfolderpath, arg1)

       export.CreatePDFKind2.create(lcc, exportfolderpath)

       export.CreatePDFKind3.create(lcc.First(), exportfolderpath) 

       export.CreatePDFKind4.create(customclass2, exportfolderpath)
 } 

 namespace export
 {
     class CreatePDFKind1         
     {
        create(customclass cc, string folderpath)
        {
            do something;
            reportstatus(listviewItem, status, message)
        }
     }

     class CreatePDFKind2
     {
        create(IEnumerable<customclass> lcc, string folderpath)
        {
            foreach (var x in lcc)
            {
               do something;
               reportstatus(listviewItem, status, message)
            }
        }
     }

     etc.......
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:15:48.450

从您描述的非常基本的图片来看，我会使用[Task Parallel Library (TPL)](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。随附 .NET Framework 4.0+。

您谈到在生成*大量*线程时使用线程池的“最佳”选项。尽管这是正确的 [管理资源的最有效方式]，但 TPL 为您完成所有这些 - 无需您担心任何事情。TPL 还使用多个线程并等待它们的完成也轻而易举......

为了满足您的要求，我将使用**TPL**和[Continuations](http://msdn.microsoft.com/en-us/library/ee372288.aspx)。延续不仅允许您创建任务流，还可以处理您的异常。这是对 TPL的一个[很好的介绍。](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)但是给你一些想法...

您可以使用启动 TPL 任务

```
Task task = Task.Factory.StartNew(() => 
{
    // Do some work here...
}); 
```

现在要在前面的任务完成（错误或成功）时开始第二个任务，您可以使用该`ContinueWith`方法

```
Task task1 = Task.Factory.StartNew(() => Console.WriteLine("Antecedant Task"));
Task task2 = task1.ContinueWith(antTask => Console.WriteLine("Continuation...")); 
```

因此，一旦`task1`完成、失败或被取消，就会`task2`“启动”并开始运行。请注意，如果`task1`在到达第二行代码之前已经完成，`task2`将被安排立即执行。`antTask`传递给第二个 lambda的参数是对前面任务的引用。有关更详细的示例，请参阅[此链接...](http://www.albahari.com/threading/)

您还可以传递先前任务的延续结果

```
Task.Factory.StartNew<int>(() => 1)
    .ContinueWith(antTask => antTask.Result * 4)
    .ContinueWith(antTask => antTask.Result * 4)
    .ContinueWith(antTask =>Console.WriteLine(antTask.Result * 4)); // Prints 64. 
```

笔记。请务必阅读提供的第一个链接中的异常处理，因为这可能会使新手误入 TPL。

最后一件要特别关注的事情是子任务。子任务是那些被创建为`AttachedToParent`. 在这种情况下，直到所有子任务都完成后，延续才会运行

```
TaskCreationOptions atp = TaskCreationOptions.AttachedToParent;
Task.Factory.StartNew(() =>
{
    Task.Factory.StartNew(() => { SomeMethod() }, atp);
    Task.Factory.StartNew(() => { SomeOtherMethod() }, atp); 
}).ContinueWith( cont => { Console.WriteLine("Finished!") }); 
```

因此，在您的情况下，您将启动四个任务，然后在主线程上等待它们完成。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:18:06.500

`BackgroundWorker`如果您需要就后台进程与 UI 进行交互，使用 a会很有帮助。如果你不这样做，那我就不打扰了。您可以直接启动 4 个`Task`对象：

```
tasks.Add(Task.Factory.StartNew(()=>DoStuff()));
tasks.Add(Task.Factory.StartNew(()=>DoStuff2()));
tasks.Add(Task.Factory.StartNew(()=>DoStuff3())); 
```

如果您*确实*需要与 UI 交互；可能通过更新它以反映任务何时完成，然后我建议盯着**一个** `BackgroundWorker`，然后再次使用任务来处理每个单独的工作单元。由于使用 a 会产生一些额外的开销，`BackgroundWorker`如果可以避免的话，我会避免启动它们。

```
BackgroundWorker bgw = new BackgroundWorker();
bgw.DoWork += (_, args) =>
{
    List<Task> tasks = new List<Task>();

    tasks.Add(Task.Factory.StartNew(() => DoStuff()));
    tasks.Add(Task.Factory.StartNew(() => DoStuff2()));
    tasks.Add(Task.Factory.StartNew(() => DoStuff3()));

    Task.WaitAll(tasks.ToArray());
};
bgw.RunWorkerCompleted += (_, args) => updateUI();
bgw.RunWorkerAsync(); 
```

您当然可以只使用`Task`方法来完成所有这些工作，但我仍然发现 BackgroundWorkers 在更简单的情况下使用起来更简单一些。使用 .NEt 4.5，您可以`Task.WhenAll`在所有 4 个任务完成后在 UI 线程中运行延续，但在 4.0 中执行此操作不会那么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:15:37.107

没有进一步的信息是不可能的。如果它们访问相同的资源，它们使用四种不同的方法这一事实并没有太大的区别。以 PDF 文件为例。如果您无法理解我的意思，您应该为每种方法发布一些代码，我将更详细地介绍。

由于您拥有的“部分”数量是固定的，因此无论您使用单独的线程、后台工作人员还是使用线程池，都不会产生很大的不同。我不确定为什么人们推荐背景工作者。很可能是因为它是一种更简单的多线程方法并且更难搞砸。

# node.js - webSocketServer node.js如何区分客户端

> ID：13364243
> 
> 赞同：99
> 
> 时间：2012-11-13T16:06:46.787
> 
> 标签：node.js, websocket

我正在尝试将套接字与 node.js 一起使用，我成功了，但我不知道如何在我的代码中区分客户端。关于套接字的部分是这样的：

```
var WebSocketServer = require('ws').Server, 
    wss = new WebSocketServer({port: 8080});
wss.on('connection', function(ws) {
    ws.on('message', function(message) {
        console.log('received: %s', message); 
        ws.send(message);
    });
    ws.send('something');
}); 
```

此代码适用于我的客户端 js。

但我想向特定用户或在我的服务器上打开套接字的所有用户发送消息。

在我的情况下，我作为客户端发送消息并收到响应，但其他用户什么也没显示。

例如，我想 user1 通过 webSocket 向服务器发送一条消息，然后我向他的套接字打开的 user2 发送一条通知。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2017-10-22T19:35:19.253

在nodejs中可以直接修改ws客户端，分别为每个客户端添加自定义属性。此外，您还有一个全局变量**wss.clients**，可以在任何地方使用。请尝试下一个代码并尝试连接至少两个客户端：

```
var WebSocketServer = require('ws').Server;
var wss = new WebSocketServer({
    server: httpsServer
});

wss.getUniqueID = function () {
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
    }
    return s4() + s4() + '-' + s4();
};

wss.on('connection', function connection(ws, req) {
    ws.id = wss.getUniqueID();

    wss.clients.forEach(function each(client) {
        console.log('Client.ID: ' + client.id);
    });
}); 
```

您也可以直接在客户端连接 URL 中传递参数：

`https://myhost:8080?myCustomParam=1111&myCustomID=2222`

在连接函数中，您可以获取这些参数并将这些参数直接分配给您的 ws 客户端：

```
wss.on('connection', function connection(ws, req) {

    const parameters = url.parse(req.url, true);

    ws.uid = wss.getUniqueID();
    ws.chatRoom = {uid: parameters.query.myCustomID};
    ws.hereMyCustomParameter = parameters.query.myCustomParam;
} 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-06-20T20:56:14.810

您可以简单地将用户 ID 分配给数组 CLIENTS[]，这将包含所有用户。您可以直接向所有用户发送消息，如下所示：

```
var WebSocketServer = require('ws').Server,
    wss = new WebSocketServer({port: 8080}),
    CLIENTS=[];

wss.on('connection', function(ws) {
    CLIENTS.push(ws);
    ws.on('message', function(message) {
        console.log('received: %s', message);
        sendAll(message);
    });
    ws.send("NEW USER JOINED");
});

function sendAll (message) {
    for (var i=0; i<CLIENTS.length; i++) {
        CLIENTS[i].send("Message: " + message);
    }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-05-18T08:56:57.427

您可以使用请求标头“sec-websocket-key”

```
wss.on('connection', (ws, req) => {
  ws.id = req.headers['sec-websocket-key']; 

  //statements...
}); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-06T19:27:39.227

[Worlize 服务器中的这段代码片段](https://github.com/Worlize/WebSocket-Node/wiki/How-to%3a-List-all-connected-sessions-&-Communicating-with-a-specific-session-only)对我帮助很大。即使您使用的是 ws，代码也应该很容易适应。我在这里选择了重要的部分：

```
// initialization
var connections = {};
var connectionIDCounter = 0;

// when handling a new connection
connection.id = connectionIDCounter ++;
connections[connection.id] = connection;
// in your case you would rewrite these 2 lines as
ws.id = connectionIDCounter ++;
connections[ws.id] = ws;

// when a connection is closed
delete connections[connection.id];
// in your case you would rewrite this line as
delete connections[ws.id]; 
```

现在您可以轻松地创建一个 broadcast() 和 sendToConnectionId() 函数，如链接代码所示。

希望有帮助。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-10-14T19:16:53.513

这取决于您使用的是哪个 websocket。例如，最快的一个，在这里找到：[https](https://github.com/websockets/ws) ://github.com/websockets/ws能够通过这种方法进行广播：

```
var WebSocketServer = require('ws').Server,
   wss = new WebSocketServer({host:'xxxx',port:xxxx}),
   users = [];
wss.broadcast = function broadcast(data) {
wss.clients.forEach(function each(client) {
  client.send(data);
 });
}; 
```

然后稍后在您的代码中，您可以使用 wss.broadcast(message) 发送给所有人。为了向单个用户发送 PM，我执行以下操作：

(1) 在我发送到服务器的消息中，我包含一个用户名 (2) 然后，在 onMessage 中，我使用该用户名将 websocket 保存在数组中，然后稍后通过用户名检索它：

```
wss.on('connection', function(ws) {

  ws.on('message', function(message) {

      users[message.userName] = ws; 
```

(3) 要发送给特定用户，您可以执行 users[userName].send(message);

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-25T19:05:56.947

我正在使用 ws 对象中的 fd 。每个客户端应该是唯一的。

```
var clientID = ws._socket._handle.fd; 
```

当我打开一个新的浏览器标签时，我得到一个不同的号码。

第一个 ws 有 11 个，下一个有 12 个。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-22T11:02:08.470

您可以检查连接对象。它为每个连接的客户端提供内置标识；你可以在这里找到它：

```
let id=ws._ultron.id;
console.log(id); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-11-14T12:06:26.300

一种可能的解决方案是在用户 ID 前面附加 deviceId，因此我们可以将具有相同用户 ID 但在不同设备上的多个用户分开。

`ws://xxxxxxx:9000/userID/<<deviceId>>`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-25T11:27:00.333

如果您的意思是打开的连接，则客户端可以`ws.upgradeReq.headers['sec-websocket-key']`用作标识符。并将所有套接字对象保存在一个数组中。

但是如果你想识别你的用户，那么你需要将用户特定的数据添加到套接字对象。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-03T13:07:08.543

如果这里有人可能正在使用[koa-websocket](https://github.com/kudos/koa-websocket)库，则 WebSocket 的服务器实例将附加到`ctx`请求旁边。`wss.clients`这使得操作Set（[ws](https://github.com/websockets/ws)中的会话集）变得非常容易。例如，通过 URL 传递参数并将其添加到 Websocket 实例，如下所示：

```
const wss = ctx.app.ws.server
const { userId } = ctx.request.query

try{

   ctx.websocket.uid = userId

}catch(err){
    console.log(err)
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-11T12:02:13.700

使用全局计数器变量并为每个新连接分配其值：

```
const wss = new WebSocket.Server({server});
let count_clients = 0;
wss.on('connection', function connection(ws){
    ws.id=count_clients++;
    console.log(`new connection, ws.id=${ws.id}, ${ws._socket.remoteAddress}:${ws._socket.remotePort} #clients=${wss.clients.size}`);
    ws.on('close', req => {console.log(`disconnected, ws.id=${ws.id}, ${ws._socket.remoteAddress}:${ws._socket.remotePort} #clients=${wss.clients.size}`);});
... 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-03T19:08:41.320

这是我所做的：

```
* on connect, server generate an unique id (e.g uuid) for the connection,
    * save it in memory, (e.g as key of map),
    * send back to client in response,
    * 
* 
* client save the id, on each request with also send the id as part of request data,
* then server identify the client by id, on receive further request,
* 
* server maintain client, e.g cleanup on close/error,
* 
```

我已经实现了这个想法，它可以很好地识别客户。
并且，我还基于这个想法实现了组/主题广播，这需要服务器维护额外的信息。

# android - 创建一个包含位图的位图

> ID：13364248
> 
> 赞同：1
> 
> 时间：2012-11-13T16:07:14.303
> 
> 标签：android, bitmap, android-canvas, bitmapfactory

我知道 - 标题可能听起来很奇怪。让我解释：

我创建了一个图像来向您展示我在说什么： ![问题](../Images/74ba82c0844515846928318fc8d511d0.png)

我得到了一个图像（位图（1）），大小为 150w/200h。

现在我需要使位图更大（（2）400w/400h），但原始图像必须具有相同的大小。使图像嵌入在白色背景中。

我认为解决它的一种方法是： * 创建一个大位图 * 为它创建一个画布 * 在画布上绘制原始位图 * 绘制画布 * 生成画布的位图

对我来说问题是，它必须在后台线程中完成而不绘制视图。我希望你能理解我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T16:37:53.780

您可以使用下面的代码来实现它。`smallBitmap`您的原始图像在哪里，并且`bigBitmap`是最终图像：

```
Bitmap bigBitmap = Bitmap.createBitmap(width, height , Bitmap.Config.ARGB_8888);
canvas = new Canvas(bigBitmap);
canvas.drawBitmap(smallBitmap, left, top, new Paint()); 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:13:17.600

这应该可以解决问题。

1.  创建一个线程并在该线程对象中：
2.  创建一个新的位图。
3.  基于该位图创建画布。
4.  将您的位图绘制到该画布上

瞧！

我希望这有帮助。

# blackberry - Sencha Touch 2 和 Blackberry OS 7：TabPanel 按钮错误呈现

> ID：13364256
> 
> 赞同：1
> 
> 时间：2012-11-13T16:07:42.540
> 
> 标签：blackberry, sencha-touch, tabpanel

**问题**

我的 Sencha Touch 2 应用程序中的选项卡面板按钮在我的 Blackberry OS 7 设备中显示不正确。这就是他们的样子：

![在此处输入图像描述](../Images/c2a89e4a108571f9379284b65c741ef1.png)

**环境细节**

*   黑莓手电筒 9810
*   黑莓操作系统 7.0
*   煎茶触控 2.0.1

**故障排除**

1.  我在 Blackberry OS 10 Simulator 中成功运行了该网站。标签图标看起来不错
2.  这些按钮在 Android 和 iOS 应用程序中看起来不错。

**解决方案**

我已经将我正在测试站点的 Blackberry Torch 从 7.0 升级到 7.1，并且按钮现在可以正确呈现，但是，对于仍在使用 v7.0 的人来说，这并不能解决我的问题。有没有人在 7.0 中让它正常工作？

感谢您对此的帮助！

# java - 为什么我没有 InputManager.getInstance()？和注入输入事件（）？

> ID：13364264
> 
> 赞同：4
> 
> 时间：2012-11-13T16:08:05.237
> 
> 标签：java, android

我正在尝试开发一种在服务与某些硬件/远程服务器交互时将触摸事件注入系统的服务。我用谷歌搜索，每个人都建议使用这个`InputManager`类，引用[Monkey](https://github.com/android/platform_development/tree/master/cmds/monkey)作为一个示例项目。

但是，没有`getInstance()`适合我的方法`InputManager`！我可以访问的只是[文档](http://developer.android.com/reference/android/hardware/input/InputManager.html)显示的内容。没有`getInstance()`方法，最重要的是，没有`injectInputEvent()`方法。

我的构建目标 SDK 是 Android 4.1.2，我的 AndroidManifest.xml 文件指定目标 SDK 版本为 16（我也尝试将最小目标更改为 16，但没有帮助（另外我想保留它）如果可能的话，在 8 点））。

我到底怎么能`InputManager`像猴子一样使用？Monkey 使用的方法在哪里，为什么我不能使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:35:21.193

您不能将输入事件从其他应用程序注入到一个应用程序。此外，您不能从应用程序内部将事件注入您自己的应用程序。[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/N5R9rMJjgzk%5B1-25%5D](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/N5R9rMJjgzk%5B1-25%5D)

如果你想自动化，你可以使用 monkeyrunner 脚本来做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T05:25:47.830

```
Class cl = InputManager.class;
try {
    Method method = cl.getMethod("getInstance");
    Object result = method.invoke(cl);
    InputManager im = (InputManager) result;
    method = cl.getMethod("injectInputEvent", InputEvent.class, int.class);
    method.invoke(im, event, 2);
}
catch (IllegalAccessException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}  catch (IllegalArgumentException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
} catch (NoSuchMethodException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}catch (InvocationTargetException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T09:14:03.130

也许这有点晚了，但可能对将来的参考有所帮助。

**方法 1：使用检测对象**

```
Instrumentation instrumentation = new Instrumentation();
instrumentation.sendKeySync(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK));
instrumentation.sendKeySync(new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_BACK)); 
```

**方法 2：使用带反射的内部 API**

此方法使用反射来访问内部 API。

```
private void injectInputEvent(KeyEvent event) {
    try {
        getInjectInputEvent().invoke(getInputManager(), event, 2);
    } catch (IllegalAccessException | InvocationTargetException | NoSuchMethodException e) {
        e.printStackTrace();
    }
}

private static Method getInjectInputEvent() throws NoSuchMethodException {

    Class<InputManager> cl = InputManager.class;
    Method method = cl.getDeclaredMethod("injectInputEvent", InputEvent.class, int.class);
    method.setAccessible(true);
    return method;
}

private static InputManager getInputManager() throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {
    Class<InputManager> cl = InputManager.class;
    Method method = cl.getDeclaredMethod("getInstance");
    method.setAccessible(true);
    return (InputManager) method.invoke(cl);
}

injectInputEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK));
injectInputEvent(new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_BACK)); 
```

请注意，*方法 1*是基于公共 API 的干净解决方案，并且在内部它使用来自*方法 2*的相同调用。

另请注意，这两种方法都不能从[MainThread](https://developer.android.com/reference/android/support/annotation/MainThread.html)调用。

# ios - 在 NSMutableAttributedString 上设置期望

> ID：13364266
> 
> 赞同：0
> 
> 时间：2012-11-13T16:08:12.757
> 
> 标签：ios, unit-testing, nsmutablestring

我正在为返回 NSMutableAttributedString 的方法中的“if”语句编写单元测试，但出现了一些错误。

***IF 语句的实际代码：***

```
if (conditionIsTrue)
    {
        return [[NSMutableAttributedString alloc] initWithString:NSLocalizedStringWithDefaultValue(@"ABC", 
                                                                                                   @"ABCLibrary", 
                                                                                                   [NSBundle bundleWithName:@"ABCLibraryResources"],
                                                                                                   @"No ABC", 
                                                                                                   @"No ABC String") 
                                                      attributes:[self methodA]];
    } 
```

***单元测试：***

```
ControllerA *controller = [[ControllerA alloc] init];
id mockController = [OCMockObject partialMockForObject:controller];

NSMutableAttributedString *temp = [[NSMutableAttributedString alloc] initWithString:NSLocalizedStringWithDefaultValue(@"ABC", 
                                                                                                   @"ABCLibrary", 
                                                                                                   [NSBundle bundleWithName:@"ABCLibraryResources"],
                                                                                                   @"No ABC", 
                                                                                                   @"No ABC String") 
                                                      attributes:[self methodA]];

    [[mockController expect] temp]; 
```

***错误：***

```
No known instance method for selector temp. 
```

我是否错误地设置了期望？如何为 NSMutableAttributedString 设置期望值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T19:40:14.957

```
[[mockController expect] temp] 
```

告诉 mockController 期望方法 temp 应该被调用。temp，在这里，只是一个变量。你真正想要的是

```
[[[mockController expect] andReturn:temp ] theMethodThatYouHaveTheIfStatementIn] 
```

# javascript - 批准后访问令牌和离线申请

> ID：13364271
> 
> 赞同：2
> 
> 时间：2012-11-13T16:08:50.277
> 
> 标签：javascript, facebook-access-token

那里你好，

我最近发现他们正在删除 12 月 5 日发布的离线访问权限，并且需要一个快速问题的帮助，并且可能的解决方案将得到解决。

基本上我希望开发一个 facebook 应用程序，用户将通过 JS 登录并授予应用程序的权限。

他们将在几个小时或几天内使用该应用程序，因为 Facebook 登录正在预订过程中。当他们玩游戏时，我希望将更新发布到他们的新闻提要以及任何与他们一起玩的朋友，他们授权了 Facebook 应用程序并且令牌处于活动状态。

Facebook 当前的 SDK 怎么可能做到这一点。

在游戏期间，他们的用户无法在任何设备上查看 facebook，这就是为什么 offline_access 本来是完美的

任何帮助，将不胜感激

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:32:50.803

Facebook api 上的离线访问仅适用于您的应用程序可以离线使用的情况。

对facebook来说，是否显示FB界面并不重要。您没有义务向用户显示您正在执行的操作（例如“喜欢”）

您还可以覆盖默认实现，例如在“共享”上，您可以添加自己的代码来做到这一点。

所以基本上你从来不需要“offline_access”

# google-maps - 谷歌地图两个下拉菜单在地图上产生两个标记

> ID：13364272
> 
> 赞同：1
> 
> 时间：2012-11-13T16:08:56.170
> 
> 标签：google-maps, google-maps-markers

我编写了一些代码来在可通过下拉列表选择的谷歌地图上绘制基本标记。

但是：我希望有两个带有相同选项的下拉菜单，并且只显示在下拉菜单中选择的标记（即有 100 多个标记，但只显示 2 个）。我还想在两点之间“画一条线”，并在将鼠标悬停在该位置上时有一个弹出窗口（根据谷歌地图）。最后，窗口可以根据标记调整大小吗？

这是我到目前为止所得到的：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">
// Here you can specify all list of your geolocation options
                window.markers = {
                               'Moscow': {lat: 55.74257, lng: 37.61547}, 
                               'Saint Petersburg': {lat: 59.93952, lng: 30.31202}
                };

// This is a initialization of map and set of all markers
  function initialize() {
    var latlng = new google.maps.LatLng(window.markers['Moscow'].lat, window.markers['Moscow'].lng);
    var myOptions = {
      zoom: 5,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    window.map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

                for(i in window.markers){
                               var marker = new google.maps.Marker({  
                                 position: new google.maps.LatLng(window.markers[i].lat, window.markers[i].lng),
                                 map: map  
                               });                           
                }
  }

// This is a handler for dropdown change
  function mychange(element){
                var city = new google.maps.LatLng(window.markers[element.value].lat, window.markers[element.value].lng);
                map.setCenter(city);
                return false;
  }
</script>
</head>
<body onload="initialize()">

// This is your dropdown
  <select onchange='mychange(this)'>
                <option value='Moscow'>Moscow
                <option value='Saint Petersburg'>Saint Petersburg
  </select>

// This DIV for you map
  <div id="map_canvas" style="width:100%; height:100%"></div>

</body>
</html> 
```

# javascript - window.close 在 iPad 上不起作用

> ID：13364274
> 
> 赞同：1
> 
> 时间：2012-11-13T16:08:57.653
> 
> 标签：javascript, ipad, popup

我在我的网站上使用 Facebook 连接并使用弹出窗口进行登录过程。完成后，我让 Facebook 将用户重定向到我更新数据库的网站上的 login.php。完成后，脚本会回显：

```
echo "<script type='text/javascript'>
          window.close();
          window.opener.location.reload();
      </script>"; 
```

这适用于除 ipad 之外的所有其他平台/设备。我试过寻找解决方案，但没有运气。

任何和所有的帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:11:55.973

在 window.open() 或 target="_blank" 之后，window.close() 在 iOS 上不起作用？做 setTimeout(window.close, timeout); 其中超时> 300。

[来源](https://twitter.com/#!/gryzzly/statuses/177061204114685952)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T18:28:02.510

通过 Facebook 进入页面将导致 window.close() 也不起作用。唯一的出路是同时提供一个 window.history.back()。根据具体情况，用户可以通过单击这 2 个 javascript 链接之一来关闭窗口。

# sql - 使用文件组的目的

> ID：13364275
> 
> 赞同：2
> 
> 时间：2012-11-13T16:09:06.063
> 
> 标签：sql, sql-server

我不明白在 SQL Server 中使用 Filegroup 的目的？它可以提供什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:45:40.203

If you're using Enterprise Edition, you can do a piecemeal restore. That is, you can place critical and not-so-critical tables on different filegroups and, in the case of disaster, recover them at different times. This requires a lot of forethought, but is handy.

# networking - OpenLayers：显示远程 kml

> ID：13364279
> 
> 赞同：2
> 
> 时间：2012-11-13T16:09:11.883
> 
> 标签：networking, dynamic, openlayers, kml

我试图让 OpenLayers 显示从服务器检索到的 KML 文件。由于某种原因，这不起作用。有人问过类似的问题，但我找不到一个可行的例子。我所做的是改进 OpenLayers 发行版中的一个示例：kml-track.js

我用我发现的东西改进了它。这就是它的样子。我觉得我错过了一些明显的东西。欢迎任何指点

* * *

```
var map ;

function init() {
  var mercator = new OpenLayers.Projection("EPSG:900913");
  var geographic = new OpenLayers.Projection("EPSG:4326");

  //note that I have host equal to location//   //Math.Random will stop caching//
  var mykmlurl = 'http://myserver/kml-track.kml';

  map = new OpenLayers.Map({
    div: "map",
    projection: mercator,
    layers: [
      new OpenLayers.Layer.OSM(),

      //Defiine your KML layer//
      new OpenLayers.Layer.Vector("This Is My KML Layer", {
        //Set your projection and strategies//
        projection: geographic,
        strategies: [new OpenLayers.Strategy.Fixed()],
        //set the protocol with a url//
        protocol: new OpenLayers.Protocol.HTTP({
          //set the url to your variable//
          url: mykmlurl,
          //format this layer as KML//
          format: new OpenLayers.Format.KML({
            //maxDepth is how deep it will follow network links//
            maxDepth: 1,
            //extract styles from the KML Layer//
            extractStyles: true,
            //extract attributes from the KML Layer//
            extractAttributes: true
          })
        }),
        styleMap: new OpenLayers.StyleMap({
          "default": new OpenLayers.Style({
            graphicName: "circle",
            pointRadius: 2,
            fillOpacity: 0.5,
            fillColor: "#ffcc66",
            strokeColor: "#666633",
            strokeWidth: 1
          })
        })
      })
    ],
    center: new OpenLayers.LonLat(-93.2735, 44.8349).transform(geographic, mercator),
    zoom: 8
  });

 //function called// //timer// //layer to refresh//
  window.setInterval(UpdateKmlLayer, 5000, MyKmlLayer);
}

function UpdateKmlLayer(layer) {
  //setting loaded to false unloads the layer//
  layer.loaded = false;
  //setting visibility to true forces a reload of the layer//
  layer.setVisibility(true);
  //the refresh will force it to get the new KML data//
  layer.refresh({ force: true, params: { 'key': Math.random()} });
} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:11:56.807

这是一个如何在 OpenLayers 中显示 KML 图层的示例，可能会对您有所帮助：

[http://openlayers.org/dev/examples/kml-layer.html](http://openlayers.org/dev/examples/kml-layer.html)

您在打开页面时是否遇到任何错误 - 或者它运行正常但没有出现？如果您没有收到任何错误，则可能表明您的投影设置方式存在问题（即您的功能可能不会出现在您期望的位置）

# google-apps-script - Google Apps 脚本 - 是否可以从脚本更新受保护的范围？

> ID：13364281
> 
> 赞同：5
> 
> 时间：2012-11-13T16:09:24.817
> 
> 标签：google-apps-script, google-sheets

我想使用受保护的范围来锁定范围，但是通过使用 UI，我想让用户能够进行编辑、插入新数据等。我只是希望编辑是经过深思熟虑的。

我已经想到了一些解决方案，但不确定它们将如何影响负载，并且不确定哪个是最佳方向：取消保护范围并重新保护，授予编辑权限并将其删除。使用 java 脚本而不是内置的受保护范围功能。这似乎不可能，但即使脚本是从我的帐户运行的也可以工作（工作簿都按照我的帐户的设计工作，但我有对受保护范围的编辑权限）。

任何帮助将不胜感激，在此先感谢。

脚本背景：我有公司内部特定项目的工作簿，还有一个主工作簿，它以两种方式同步。有一个查找键，只是设施/功能特定的标题，所以我有一个脚本可以同时更新两个位置。我还有一个新功能的模板，或者每个设施特定的项目都有自己的模板，我需要用户能够在这些工作簿中添加一个新工作表，并且这些数据用于更新主工作簿“AllTask​​s”工作表用于各种查询，但在两个工作簿中我都需要有受保护的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:20:27.080

仅当您将脚本部署为 Web 应用程序时，才能从您的帐户运行脚本。用户将转到单独的 URL，填写表格，提交等，只要脚本在您的帐户下运行（部署为 Web 应用程序时有一个选项），它将插入/更新受保护的范围因为你有编辑权限。用户仍然可以单独进入工作簿并向其中添加工作表（只要他们具有编辑权限），他们只是不能触摸受保护的范围，除非他们对这些范围具有单独的权限。

但是，如果用户将直接从电子表格运行这些脚本，我认为不可能从您的帐户运行。但我认为以上将是最好的解决方案。无论如何，我没有看到任何可以取消保护/保护范围的脚本，只有工作表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T13:48:54.413

如果只需要防止意外编辑，您可以设置数据验证规则。然后，UI 脚本可以在编辑之前调整这些数据验证规则。

`var allowedText = "Yes" var cell = SpreadsheetApp.getActive().getRange('A1'); var rule = SpreadsheetApp.newDataValidation().requireTextEqualTo(allowedText).build(); cell.setDataValidation(rule); cell.setValue(allowedText);`

这不会防止恶意，也不会防止隐藏、取消隐藏、删除或添加单元格或删除单元格的内容，但可以防止意外覆盖单元格。

# r - 将向量的元素添加到 R 中列表的元素

> ID：13364284
> 
> 赞同：4
> 
> 时间：2012-11-13T16:09:45.033
> 
> 标签：r, loops

我有一个简单的列表和一个相同长度的简单向量。我想将`ith`向量的`ith`元素添加到列表的元素中。有没有办法比这个 for 循环做得更好？

```
test <- list(element1=list(a=1,b=2,a1=8),
             element2=list(a=9,d=17))
vec <- c(12,25)

for (i in 1:length(test)){
    test[[i]] <- c(test[[i]],vec[i])
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:15:35.453

使用 的多元等效项`sapply`，即`mapply`。在下面的代码中，该函数`c`应用于每个`test`and的第一个元素`vec`，然后是第二个元素，等等......

```
test = mapply(c, test, vec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:20:08.143

您总是可以将 for 循环转换为 lapply/apply/sapply。这是您的代码的示例。

```
"for"(i, 1:length(test), test[i] <- c(test[[i]], vec[i]))

test <- lapply(1:length(test), function(i) c(test[[i]], vec[i])) 
```

# php - 将 UTC 转换为 EST 并增加 3 天的更快方法

> ID：13364288
> 
> 赞同：1
> 
> 时间：2012-11-13T16:09:56.810
> 
> 标签：php

我有以下代码，它可以工作，但是是否有“更清洁”的方式，也许代码更少？

```
$today = new DateTime();
$utc_today = date('Y-m-d', $today->format('U'));
$new_date = new DateTime($utc_today, new DateTimeZone('America/New_York'));
$new_date->add(new DateInterval('P3D'));
echo $new_date->format('m-d-Y'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:05:06.620

如果您只需要在 EST 中表达现在的时间，再加上 3 天，那么您做的工作太多了。您只需要一个语句：

```
$date = new DateTime("3 days", new DateTimeZone('America/New_York'));
echo $date->format("Y-m-d H:i:s\n"); 
```

如果您从任意 UTC 时间戳开始，那么您需要大约 3 行代码，而不仅仅是一行：

```
// let us assume $inputTimestamp is the UTC time you want to play with
$date = new DateTime(null, new DateTimeZone('America/New_York'));
$date->setTimestamp($inputTimestamp);
$date->modify("3 days");
echo $date->format("Y-m-d H:i:s\n"); 
```

或者，您可以在时间戳中添加 3 天的秒数并保存一些代码，但这样可读性会降低：

```
$date = new DateTime(null, new DateTimeZone('America/New_York'));
$date->setTimestamp($inputTimestamp + (3*24*60*60) );
echo $date->format("Y-m-d H:i:s\n"); 
```

对于日期/时间操作，我发现 PHP**[相对格式](http://www.php.net/manual/en/datetime.formats.relative.php)**文档非常有用。绝对值得回顾。

# git - 为他们重新定位某人的分支

> ID：13364289
> 
> 赞同：1
> 
> 时间：2012-11-13T16:10:03.643
> 
> 标签：git

如果有人在重新调整他们的分支时遇到困难（例如它离 master 的位置真的很远，因为他们一直懒得跟上）。检查他们的远程分支，为他们重新设置基础（自己手动完成所有手动更新）并将其推送到他们的远程分支上是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:07:33.407

> 检查他们的远程分支，为他们重新设置基础（自己手动完成所有手动更新）并将其推送到他们的远程分支上是否安全？

是和否：您将不得不*强制*推送，即为他们的分支发布不同的历史记录。
因此，您需要传达他们必须将本地分支*重置*`origin/abranch`为新的，并继续从那里工作。

```
git checkout abranch
git branch abranch_old # keep a pointer to the old history just in case
git reset --hard origin/abranch 
```

# paypal - Paypal NVP 我可以传递多个自定义字段吗

> ID：13364291
> 
> 赞同：2
> 
> 时间：2012-11-13T16:10:26.793
> 
> 标签：paypal, paypal-nvp

我知道我可以传递一个应该在 IPN 中返回的字段名称“CUSTOM”我可以传递两个值，例如 CUSTOM0 和 CUSTOM1？或类似的东西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T23:37:52.453

您不能传递多个字段，但如果需要，您可以在该 1 个字段中传递多个值。例如，您可能包含一个值，例如...

val1|val2|val3|val4

然后在您的 IPN 脚本中，您可以像下面的 PHP 示例一样处理它...

```
$custom_values = explode('|',$_POST['custom']); 
```

然后，您的自定义值都将在 $custom_values 数组中供您相应使用。

您也可以发送 NVP 字符串或 XML 字符串，如果这有助于您保持直截了当，但请记住 CUSTOM 参数只接受 256 个字符。

如果您需要更多，或者您只是喜欢，您可以始终将数据保存在本地数据库中，然后只需在 CUSTOM 字段中传递一个记录 ID，以便您可以将所有这些详细信息从您的 IPN 中的数据库中提取出来使用该记录 ID 的脚本。

# c - OpenGL 2D 纹理渲染太大，glViewport 损坏

> ID：13364299
> 
> 赞同：2
> 
> 时间：2012-11-13T16:10:47.757
> 
> 标签：c, opengl, sdl

我用 OpenGL 和 C 编写了一个小型平铺游戏引擎，但我似乎无法弄清楚问题所在。我的主循环如下所示：

```
void main_game_loop()
{
    (poll for events and respond to them)
    glClear(GL_COLOR_BUFFER_BIT);
    glPushMatrix();
    draw_block(WALL, 10, 10);
} 
```

绘制块：

```
void draw_block(block b, int x, int y)
{
    (load b's texture from a hash and store it in GLuint tex)
    glPushMatrix();
    glTranslatef(x, y, 0);
    glBindTexture(GL_TEXTURE_2D, tex);

    glBegin(GL_QUADS);
    //BLOCK_DIM is 32, the width and height of the texture
    glTexCoord2i(0, 0); glVertex3f(0, 0, 0);
    glTexCoord2i(1, 0); glVertex3f(BLOCK_DIM, 0, 0);
    glTexCoord2i(1, 1); glVertex3f(BLOCK_DIM, BLOCK_DIM, 0);
    glTexCoord2i(0, 1); glVertex3f(0, BLOCK_DIM, 0);
    glEnd();
    glPopMatrix;
} 
```

初始化函数：（在 main_game_loop 之前调用）

```
void init_gl()
{
    glViewport(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0, SCREEN_WIDTH, SCREEN_HEIGHT, 0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glClearColor(0, 0, 0, 0);

    glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND);
    glDisable(GL_DEPTH_TEST);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
} 
```

运行时，会显示黑屏。但是，如果我删除 glViewport 调用，它看似显示纹理，但巨大且位于窗口的角落。截屏： ![截屏](../Images/e59745b333b5fcbe086e15e1084fc3bd.png)

纹理被正确绘制，因为如果我按比例放大，我可以看到整个图像。y 轴似乎也从我在 gluOrtho2D 调用中使用的翻转（通过使事件从图像的 x/y 坐标中添加或减去，从 y 坐标中减去导致图像向下移动来发现）。我开始感到沮丧，因为这是我能想到的最简单的例子。我正在使用 SDL，并将 SDL_OPENGL 传递给 SDL_SetVideoMode。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:01:37.877

看起来有问题`glViewport`，但可以肯定的是，您是否尝试将颜色缓冲区清除为紫色？

我一直认为`glViewport`它是一个视频/窗口功能，实际上并不是 OpenGL 本身的一部分，因为它是窗口管理器和 OpenGL 子系统之间的中间体，并且它使用窗口坐标。因此，您可能应该将其与其他 SDL 视频通话一起查看。我建议使用完整代码更新问题，或者至少使用与视频/窗口子系统相关的那些部分。

还是您`glViewport`在调整大小后忽略了调用？

您还应该在没有`SDL_FULLSCREEN`和/或使用较小窗口的情况下尝试您的代码。我通常从 512x512 或 640x480 窗口开始，直到获得正确的视口和一些基本控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:58:44.957

glViewPort 的前两个参数指定视图的左下角 [http://www.opengl.org/sdk/docs/man/xhtml/glViewport.xml](http://www.opengl.org/sdk/docs/man/xhtml/glViewport.xml)

你可以试试

```
 glViewport(0, SCREEN_HEIGHT, SCREEN_WIDTH, SCREEN_HEIGHT); 
```

对于 gluOrtho2D，参数是左、右、上、下，所以我可能会使用

```
 gluOrtho2D(0, SCREEN_WIDTH, 0, SCREEN_HEIGHT); 
```

# c++ - 如何在 Windows 中创建扩展（自定义）文件属性？

> ID：13364301
> 
> 赞同：4
> 
> 时间：2012-11-13T16:10:49.087
> 
> 标签：c++, winapi, windows-shell

我们有一个专有的文件格式，其中嵌入了一个`product-code`.

我刚刚开始“使最终用户能够`product-code`在打开文件时进行排序/过滤”的路径。

对我们来说最简单的方法可能是在我们定制的打开文件对话框中简单地有另一个下拉菜单，在其中选择`product-code`过滤依据。

但是，我认为如果我们可以在此文件类型的详细信息视图中将此信息显示为一列，这可能对最终用户更有用——就像名称、修改日期、类型、大小等也是详细信息一样文件类型的属性（或者可能是所有文件的通用属性）。

我的模糊理解是，XP 和以前的 Windows 操作系统在 NTFS 的备用数据流中嵌入了一些类似这样的元数据。然而，从 Vista 开始，微软停止使用备用数据流，因为它们依赖于 NTFS，因此很脆弱（即不能通过文件附件发送，不能移动到 FAT 格式的拇指驱动器等）。

我需要知道但还没有弄清楚的事情：

1.  是否可能/是否可行/如何为我们的文件类型创建自定义扩展文件属性，该属性`product-code`向 Windows shell 表达，以便可以在 Windows 资源管理器（以及因此文件对话框）中看到它？
2.  如果这是可行的，那么如何进行配置，以便`product-code`默认情况下为包含我们文件类型的文件夹显示该列。

谁能指出我上面的一个好的起点？我们当然不必通过发布自定义扩展文件属性来实现这一点——但这*似乎*是一种明智的方法，因为没有任何方法可以衡量走这条路的成本。

如果您有解决问题的明智替代方法，我也会对这些感兴趣！

* * *

刚刚发现： http: [//www.codeproject.com/Articles/830/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens](http://www.codeproject.com/Articles/830/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)

废话！看来我参加宴会很晚了，MS已经从他们的shell中删除了这个功能：http: [//xpwasmyidea.blogspot.com/2009/10/evil-conspiracy-behind-customizable.html](http://xpwasmyidea.blogspot.com/2009/10/evil-conspiracy-behind-customizable.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:03:45.740

到目前为止，开发 shell 扩展最简单的方法是使用为此目的制作的库。

我可以推荐[EZShellExtension](http://www.ssware.com/ezshell/ezshell.htm)，因为我过去曾使用它为我们公司的自定义文件格式添加列和缩略图/预览。

# javascript - 在 JavaScript 更改值之前和之后使用 Nokogiri 和 Ruby 进行抓取

> ID：13364309
> 
> 赞同：5
> 
> 时间：2012-11-13T16:11:28.003
> 
> 标签：javascript, ruby, web-scraping, nokogiri

[我有一个从https://web.apps.markit.com/WMXAXLP?YYY2220_zJkhPN/sWPxwhzYw8K4DcqW07HfIQykbYMaXf8fTzWT6WKnuivTcM0W584u1QRwj](https://web.apps.markit.com/WMXAXLP?YYY2220_zJkhPN/sWPxwhzYw8K4DcqW07HfIQykbYMaXf8fTzWT6WKnuivTcM0W584u1QRwj)刮取价值的程序

我目前的代码是：

```
doc = Nokogiri::HTML(open(source_url))

puts doc.css('span.indexDate').text
date = doc.css('span.indexDate').text
date = Date.parse(date)
puts date
values = doc.css('table#CdsIndexTable td.col2 span')
puts values 
```

这会正确地从“CDS 索引”表中刮取第二列的日期和值，这很好。现在，我想从我面临问题的“债券指数”表中抓取类似的值。

我可以看到一个 JavaScript 函数在不加载页面且不更改页面 URL 的情况下更改它。这两个表之间的区别在于它们的 ID 不同，这正是应该的。但是，不幸的是，当我尝试：

```
values = doc.css('table#BondIndexTable')
puts values 
```

我从债券指数表中一无所获。但是如果我使用，我会从 CDS 索引表中获取值：

```
values = doc.css('table#CdsIndexTable')
puts values 
```

如何从两个表中获取值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-26T20:59:23.990

您可以使用 Capybara 和 Poltergeist 驱动程序来执行 Javascript 并格式化页面。Poltergeist 是 PhantomJS 无头浏览器的包装器。这是一个如何做到这一点的示例：

```
require 'rubygems'
require 'capybara'
require 'capybara/dsl'
require 'capybara/poltergeist'

Capybara.default_driver = :poltergeist
Capybara.run_server = false

module GetPrice
  class WebScraper
    include Capybara::DSL

    def get_page_data(url)
      visit(url)
      doc = Nokogiri::HTML(page.html)
      doc.css('td.col2 span')
    end
  end
end

scraper = GetPrice::WebScraper.new
puts scraper.get_page_data('https://web.apps.markit.com/WMXAXLP?YYY2220_zJkhPN/sWPxwhzYw8K4DcqW07HfIQykbYMaXf8fTzWT6WKnuivTcM0W584u1QRwj').map(&:text).inspect 
```

访问此处查看使用 Amazon.com 的完整示例： [https ://github.com/wakproductions/amazon_get_price/blob/master/getprice.rb](https://github.com/wakproductions/amazon_get_price/blob/master/getprice.rb)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T16:58:28.630

如果您不想使用 PhantomJS，您也可以在 Firefox 或 Chrome 开发工具上使用网络嗅探器，您将看到 HTML 表数据通过 javascript POST 请求返回到服务器。

然后，您无需使用 Nokogiri 打开原始页面 URL，而是从您的 Ruby 脚本运行此 POST 并解析和解释该数据。看起来它只是嵌入了 HTML 的 JSON 数据。您可以提取 HTML 并将其提供给 Nokogiri。

它需要一些额外的侦探工作，但我已经多次使用这种方法处理 JavaScript 网页和抓取。它适用于大多数简单的任务，但需要深入研究页面和网络流量的内部工作原理。

下面是来自 Javascript POST 请求的 JSON 数据示例：

*债券*：
[https ://web.apps.markit.com/AppsApi/GetIndexData?indexOrBond=bond&ClientCode=WSJ](https://web.apps.markit.com/AppsApi/GetIndexData?indexOrBond=bond&ClientCode=WSJ)

*CDS*：
[https ://web.apps.markit.com/AppsApi/GetIndexData?indexOrBond=cds&ClientCode=WSJ](https://web.apps.markit.com/AppsApi/GetIndexData?indexOrBond=cds&ClientCode=WSJ)

这是快速而肮脏的解决方案，只是为了让您有所了解。这将从初始页面获取 cookie 并在请求中使用它来获取 JSON 数据，然后解析 JSON 数据并将提取的 HTML 提供给 Nokogiri：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'
require 'json'

# Open the initial page to grab the cookie from it
p1 = open('https://web.apps.markit.com/WMXAXLP?YYY2220_zJkhPN/sWPxwhzYw8K4DcqW07HfIQykbYMaXf8fTzWT6WKnuivTcM0W584u1QRwj')

# Save the cookie
cookie = p1.meta['set-cookie'].split('; ',2)[0]

# Open the JSON data page using our cookie we just obtained
p2 = open('https://web.apps.markit.com/AppsApi/GetIndexData?indexOrBond=bond&ClientCode=WSJ',
          'Cookie' => cookie)

# Get the raw JSON
json = p2.read

# Parse it
data = JSON.parse(json)

# Feed the html portion to Nokogiri
doc = Nokogiri.parse(data['html'])

# Extract the values
values = doc.css('td.col2 span')
puts values.map(&:text).inspect

=> ["0.02%", "0.02%", "n.a.", "-0.03%", "0.02%", "0.04%", 
    "0.01%", "0.02%", "0.08%", "-0.01%", "0.03%", "0.01%", "0.05%", "0.04%"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:34:21.093

[PhantomJS](http://phantomjs.org/)是一个带有 JavaScript API 的无头浏览器。由于您需要在正在抓取的页面上运行脚本，因此浏览器会为您执行此操作；PhantomJS 将允许您在脚本执行后操作和抓取页面。

# java - GSON如何解析动态类型的数组

> ID：13364311
> 
> 赞同：2
> 
> 时间：2012-11-13T16:11:36.040
> 
> 标签：java, json, parsing, types, gson

查看这个 Json 文件，KEY 始终是一个字符串，但 VALUE 有时是一个字符串，但有时是具有两个字符串字段的类型化对象。

如何使用 GSON 解析它？

```
{
    "property": [
        {
            "key": "key_A",
            "value": "value_A"
        },
        {
            "key": "key_B",
            "value": "value_B"
        },
        {
            "key": "key_C",
            "value": {
                "param_C_1": "value_C_1", 
                "param_C_2": "value_C_2"

            }
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:40:30.473

第一件事是将这个 json 文件解析为 java，可以通过这种方式完成：-

```
 try {
                InputStream is;
                //read the whole json file stored in assets
//below is android way of opening file from local resource folder, you can use other means to open
                is = getApplicationContext().getAssets().open("jsonfile.json");
                int size = is.available();

                byte[] buffer = new byte[size];

                is.read(buffer);

                is.close();

                //convert the json file to string
                String bufferString = new String(buffer);

                JSONObject jsonObject;
                JSONArray jsonArray;
                jsonObject = new JSONObject(bufferString);
                jsonArray=jsonObject.getJSONArray("property");
                for (int i=0;i<jsonArray.length();i++){
                    jsonObject = jsonArray.getJSONObject(i);
                    JSONObject s = jsonArray.optJSONObject(i);
                    String s2 = s.getString("value");
                    if(s2.contains("{")){
                        JSONObject jobject = new JSONObject(s2);
                        String valueUnderValue1 = jobject.getString("param_C_1");
                        String valueUnderValue2 = jobject.getString("param_C_2");
                    }
                }

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                        } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

            } 
```

然后创建一个类，该类将包含您从 json 文件中获得的所有值。假设该类是 MyClass，包含您从 json 文件中获得的所有值。

制作 MyClass 对象，然后

```
MyClass obj = new MyClass();
Gson gson = new Gson();
JSONObject onj = new JSONObject();
        JSONArray userDataValues = new JSONArray();
//again convert to json
userDataValues.put(new JSONObject(gson.toJson(obj)));
//serialized the object
onj.put("property", userDataValues); 
```

我希望这是你想要的。

# javascript - 立即函数 JavaScript

> ID：13364312
> 
> 赞同：12
> 
> 时间：2012-11-13T16:11:38.833
> 
> 标签：javascript, function, iife

Stoyan Stefanov 在 JavasScript Patterns 中说：“您需要一个即时函数来将所有代码包装在其本地范围内，而不是将任何变量泄漏到全局范围内”第 70 页。

这是他的例子

```
(function() {
    var days = ['Sun','Mon'];
    // ...
    // ...
    alert(msg);
}()); 
```

但肯定因为 days 被定义为一个 var，它只是功能范围吗？立即函数的唯一好处是立即调用该函数。没有范围优势。正确吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T16:15:53.327

这与立即执行的功能与常规功能无关。事实上，它几乎没有关系。

立即调用的包装函数的唯一目的是限定包装函数的局部变量。

```
(function() {
    // This variable is only available within this function's scope
    var thisIsTemp = "a";

    // ...
}());

console.log(thisIsTemp); // undefined 
```

与：

```
// This variable is available globally
var thisIsTemp = "a";

// ...

console.log(thisIsTemp); // "a" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T16:14:36.237

将`days`变量放在函数范围内*正是*该示例的重点。如果没有立即调用的函数，所有变量 ( `days`, `msg`) 都将是全局变量，并且会污染全局命名空间。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-13T16:15:19.163

从技术上讲这是正确的（没有作用域优势，因为该函数是即时的；一个普通的无聊函数也可以做到这一点），但不要忘记

1.  你有一些你想*现在运行的代码*
2.  您不希望该代码将名称泄漏到当前范围内

因此，该函数是因为 #2 而创建的，*但*它也会因为 #1 而被立即调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T14:46:08.693

> “您需要一个立即函数将所有代码包装在其本地范围内，而不是将任何变量泄漏到全局范围内”

这不是真的。（或者至少是有争议的）

我认为 OP 的要求是，“您需要一个立即函数来创建本地范围还是可以只使用普通函数范围？” 我同意 OP 的观点，即函数和立即函数会将变量隐藏`days`在自己的范围内。要测试一个变量是否是全局的，（在控制台中）你可以检查它是否定义在`window`.

### 即时功能：

```
(function() {
    var days = ['Sun','Mon'];
    // ...
    // ...
    alert(msg);
}());
window.days; // undefined 
```

### 正常功能：

```
var func = function() {
    var days = ['Sun','Mon'];
    // ...
    // ...
    alert(msg);
};
window.days; // undefined
Object.prototype.toString.call(window.func); // "[object Function]" 
```

如您所见，`days`在这两种情况下都不是全局的。它在函数范围内是隐藏的或私有的。但是，在第二个示例中，我**确实**创建了一个全局变量。`func`但这证明您不需要立即函数来创建本地范围。

PS：我没看过这本书。我敢肯定作者很聪明，知道他们在说什么，但在这种情况下还不够具体。或者，也许我们需要更多关于引用的上下文来完全理解它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T16:16:27.200

在函数内部的想法`var`是

> 不要将任何变量泄漏到全局范围

问题是，在这种情况下，天数在函数之外是不可见的，如果您尝试在控制台中编写，`console.log(days)`您将得到天数未定义

这样做是因为您永远不知道以后还有谁会使用您的代码，并且可能他会重新定义您的可变天数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T16:16:58.697

`days`仍然在函数的本地范围内。您在这里所做的是在本地范围内执行任务，以便您在该范围内定义的任何内容都不会污染全局名称空间。否则，您将在全局范围内拥有以下内容：

```
var days = ['Sun','Mon'];
// ...
// ...
alert(msg); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T16:17:23.860

在 JavaScript 中，局部变量具有函数作用域，而不是块作用域。例如，在您发布的代码`days`中，实际上是函数的本地代码：

```
(function() {
  var days = ['Sun','Mon'];
  // ...
  // ...
  alert(msg);
}()); 
```

但是，如果您要在全球范围内说以下内容：

```
// ...
{ 
    var days = ['Sun','Mon'];
    // ...
    // ...
}
alert(msg); 
```

`days`将成为全局变量（外部范围内的所有内容都可见），即使它是在块内定义的。那有意义吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-26T03:32:03.097

我有同样的问题，
我认为立即函数的唯一好处是当我们使用匿名函数时它应该与匿名函数一起
使用，这意味着它永远不会被重用；没有名字你怎么能调用它？
所以让它作为一个即时功能更好。
作者没说清楚！

```
var func = function() {
var days = ['Sun','Mon'];
// ...
// ...
alert(msg);
func(); 
```

天数也在 func 的本地范围内，而不是全局变量

# php - 如何确定父/子数组中的特定级别？

> ID：13364314
> 
> 赞同：1
> 
> 时间：2012-11-13T16:11:43.213
> 
> 标签：php, treeview

我正在循环一组组，每个元素都包含一个父 ID。

```
$currentparent = $group['grpId']; //$group is the current element in a loop wrapped around this piece of code
$currentlevel = 0;

foreach($groups as $grp)
{
    $parent = $grp['grpParentId'];

    if($parent != $currentparent && $currentlevel != 6)
    {
        //adding layer
        $currentlevel++;
        //changing parent
        $currentparent = $grp['grpParentId'];
    }

    if($currentlevel == 6)
    {
        //call a special function
    }
    else
    {
        //call the regular function
    }
} 
```

这适用于这样的数组：

```
group
-group
--group
---group
----group
----- group <- the only group on the 5th layer 
```

但不适用于在第 5 级具有多个组的数组：

```
group
-group
--group
--group
---group
----group
-----group <- 5th layer
----group
-----group <- 5th layer too, but diff parent 
```

即使在数组的第五级有多个具有多个父级的组时，我如何解决此问题以调用特殊函数？

我希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:38:24.387

尝试遍历组，始终搜索其级别可以由其父级别确定的组。像这样的东西：

```
// example input
$groups = array(
    array('grpParentId' => 0, 'grpId' => 1, ),
    array('grpParentId' => 1, 'grpId' => 2, ),
    array('grpParentId' => 2, 'grpId' => 3, ),
    array('grpParentId' => 3, 'grpId' => 4, ),
    array('grpParentId' => 4, 'grpId' => 5, ),
    array('grpParentId' => 5, 'grpId' => 6, ),
    array('grpParentId' => 6, 'grpId' => 7, ),

    array('grpParentId' => 5, 'grpId' => 8, ),
    array('grpParentId' => 8, 'grpId' => 9, ),
);

shuffle($groups); // just for testing the logic does in fact tolerate randomly ordered input

$rootId = 1; // set to the rootnode's id
$grouplevels = array();

// find the rootnode first
foreach($groups as $i => $grp) {
    if ($rootId == $grp['grpId']) {
        $grouplevels[$rootId] = 1;
        unset($groups[$i]);
        break;
    }
}

// figure out childgroup levels
do {
    $old_count = count($groups);
    foreach($groups as $i => $grp) {
        if (in_array($grp['grpParentId'], array_keys($grouplevels))) {
            // the current node's parent's level was determinated previously, we can tell this group's level as well
            $grouplevels[$grp['grpId']] = $level = $grouplevels[$grp['grpParentId']]+1;

            if ($level == 6) {
                print $grp['grpId']."\n";
            }

            // remove from the "we dont know yet" list
            unset($groups[$i]);
        }
    }
} while (count($groups) < $old_count); // run while we can sort out at least one group's level in the current iteration

// handle the case when not every group's level could been determinated!
if (!empty($groups)) {
    print "inconsitency ahead!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:36:11.477

它可以通过使用递归模式来解决。下面的代码应该可以解决问题。它可能可以优化。

```
$currentparent = $group['grpId']; //$group is the current element in a loop wrapped around         
$this piece of code
$currentlevel = 0;

// Initialize 
foreach($groups as $grp)
{
    $grp['children'] = array();

}

foreach($groups as $grp)
{
    $parent = $grp['grpParentId'];
    $parent['children'][] = $grp;  
}

foreach($groups as $grp)
{
    if(empty($parent['children'])) $root = $grp; // Alternatively check if parent is null or something. 
}

function recursive_count($root, $lvl = 0)
{
    if($currentlevel == 6)
    {
        //call a special function
    }
    else
    {
        //call the regular function
    }
    foreach($root['children'] as $children)
    {
       recursive_count($children, $lvl++);
    }

 }

 recursive_count($root); 
```

**更新：**如果内存消耗是一个问题，可以在将组添加到子数组时使用引用。

**更新二：**即使算法有 4 个 foreach 和递归结构，运行时间仍然是 O(n)，其中 n 是图的大小。

# mysql - Magento 和数据库 max_user_connections 错误

> ID：13364315
> 
> 赞同：0
> 
> 时间：2012-11-13T16:11:43.687
> 
> 标签：mysql, magento, magento-1.7

Magento 有没有办法监控哪些模块连接到数据库？最近我在报告中遇到我的网站以下错误：

`SQLSTATE[42000] [1203] User magento_db_user already has more than 'max_user_connections' active connections`

我的主机允许一次有 10 个活动连接，所以主机不应该是这里的问题，对吧？一次访问我网站的用户数量也不多。

我必须知道一种监视/记录哪些模块尝试连接到数据库的方法，这样我才能做出反应，也许可以改进或禁用其中的一些。有没有办法在 Magento 中做到这一点？我能在 Internet 上找到的唯一监控方法是针对数据库本身，但我的主机不允许修改 db。

提前感谢您提供有关如何处理此错误的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:32:07.543

@boruch - 启用持久连接，嗯？

@Bartosz Górski - 如果您无权访问 my.cnf 文件，并且您的托管服务提供商限制了您的数据库操作，您最好再找一个。看在上帝的份上，这是你的商店，你的生意。今天，您可以获得任何您喜欢的托管服务，无限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:17:35.123

尝试在您的服务器中启用持久连接（如果可以的话）。您也可以使用事件观察器来获取所有连接（如 model_load_before）但模块可能有点复杂。

也许尝试一次禁用一个模块，看看是否会返回？:)

# treeview - 在 KendoUI TreeView 中动态插入节点

> ID：13364321
> 
> 赞同：1
> 
> 时间：2012-11-13T16:12:05.100
> 
> 标签：treeview, kendo-ui

我有以下代码：

```
 var cnt = 0;
    $(document).ready(function () {
        var data = [
            {
                "id":  cnt++,
                "text":"node_" + cnt
            }
        ];
        var tree = $("#treeview").kendoTreeView({
            dataSource:kendo.observableHierarchy(data)
        }).data("kendoTreeView");

        $("#push").click(function () {
            var pos = tree.dataItem(tree.select());
            pos.items.push({id:cnt++, text:"node_" + cnt});
        });

        $("#append").click(function () {
            var pos = tree.select();
            tree.append({id:cnt++, text:"node_" + cnt}, pos);
        });

        $("#show").click(function () {
            var data = tree.dataItem(".k-item:first");
            $("#content").html(JSON.stringify(data, null, 2));
        });
    }); 
```

并且有两个功能： 1\. push：在树中选择一个节点后，它使用 dataItem 获取当前数据项并将一个附加节点（子节点）推入其中。这应该是有效的，因为 dataSource 是一个 ObservableHierarchy 对象。2\. append：一旦在树中选择了一个节点，它就会使用 append 向其中引入一个额外的节点（子节点）。这在 KendoUI 的先前版本中有效，并且修改了树，但不应反映 DataSource 中的更改。

问题/问题是： 1\. 如果我使用追加树是更新（视觉上），但 dataItem 没有更新。2\. 如果我使用推送，那么 dataItem 是更新的，而不是树。3\. 如果我选择一个节点，使用追加然后推送，树和模型都会在视觉上更新。

似乎我第一次引入孩子时会`append`更新一些内部结构，然后从那里“观察”树“观察”可观察的层次结构，如果我直接推送它，那么树就不会观察到可观察的层次结构。

我应该如何动态插入节点以检查数据源并获取树的当前状态？

**注意**这是最新版本的 KendoUI Q2.1024。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:03:09.220

好的，我在 2 天后才得到关于这件事的票上的答复。这确实是一个已经在最新版本中修复的**BUG**，但这些版本**仅**适用于具有有效订阅的客户...

它将在下一个正式版本（大约 2013 年 3 月）中提供给社区的其他成员。因此，目前唯一的解决方案是购买商业订阅，您将可以立即访问新版本...

对所有这些商业内容有点失望，因为**它是一个错误**..但无论如何，我们对此无能为力.. 至少我们知道我们并不疯狂，几个月后我们可以用固定版本替换我们的代码。:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:52:38.637

有点我的问题，因为追加根本不更新数据源，而推送更新数据源，它只在我第一次添加节点时这样做，之后我什至无法选择该节点，直到我保存数据源并刷新页面。（或者我得到一个`pos.items is undifined`错误）

到目前为止我所知道的是，也许我们可以使用将子节点添加到数据源的 push 方法，并尝试每次通过强制加载数据源中选定节点的子节点`treeview.dataSource.get(treeview.select()).load()`

根据此处的文档[http://docs.kendoui.c​​om/ documentation/api/framework/node](http://docs.kendoui.com/documentation/api/framework/node)

如果我们可以选择节点，我们可以强制加载它的子节点。但到目前为止`get`我还没有能够拥有`datasource.get()`或读取所选节点..`dataSource.view()[]`

PS我知道这不是一个完整的答案，但也许它有帮助..

# cocos2d-iphone - Cocos2d 加速度计景观

> ID：13364323
> 
> 赞同：2
> 
> 时间：2012-11-13T16:12:19.643
> 
> 标签：cocos2d-iphone, accelerometer, landscape

我无法让加速度计在 cocos2d 的横向模式下正常工作。一切都在纵向上完美运行，但无法弄清楚如何翻转它以在横向上正确工作。这是我的代码：

```
-(void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{

float deceleration = 0.0f;
float sensativity = 15.0f;
float maxVelocity = 100;

playerVelocity.x = playerVelocity.x * deceleration + acceleration.x * sensativity;
playerVelocity.y = playerVelocity.y * deceleration + acceleration.y * sensativity;

if (playerVelocity.x > maxVelocity)
{
    playerVelocity.x = maxVelocity;
}
else if (playerVelocity.x < - maxVelocity)
{
    playerVelocity.x = - maxVelocity;
}

if (playerVelocity.y > maxVelocity)
{
    playerVelocity.y = maxVelocity;
}
else if (playerVelocity.y < - maxVelocity)
{
    playerVelocity.y = - maxVelocity;
}

}

-(void) update:(ccTime) delta
{
CGPoint pos = player.position;

pos.x += playerVelocity.x;
pos.y += playerVelocity.y;

CGSize screeSize = [[CCDirector sharedDirector]winSize];

float imageHalf = [player texture].contentSize.width * 0.5f;

float leftLimit = imageHalf;
float rightLimit = screeSize.width - imageHalf -20;

float bottomLimit = imageHalf;
float topLimit = screeSize.height - imageHalf - 20;

if (pos.y < bottomLimit) {
    pos.y = bottomLimit;
}
else if (pos.y > topLimit){
    pos.y = topLimit;
}

if (pos.x < leftLimit) {
    pos.x = leftLimit;
}
else if (pos.x > rightLimit){
    pos.x = rightLimit;
}

player.position = pos;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:58:47.230

在横向中，加速度计 x 和 y 值被翻转。此外，在界面方向横向右侧，x 为负。在横向左侧，y 为负：

```
// landscape right:
position.x = -acceleration.y
position.y = acceleration.x

// landscape left:
position.x = acceleration.y
position.y = -acceleration.x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:49:40.023

看[这个问题的答案](https://gamedev.stackexchange.com/questions/33412/accelerometer-to-move-player-left-and-right/33427#33427)

cocos2d 游戏中加速度计使用的最佳方式。

# ruby - Watir-Webdriver 是否支持单击目标为 javascript 的链接？

> ID：13364324
> 
> 赞同：6
> 
> 时间：2012-11-13T16:12:19.300
> 
> 标签：ruby, watir, watir-webdriver

我是 Ruby 和 Watir-Webdriver 的新手。我有一套用 VBScript 编写的网站自动化套件，我想将其转换为 Ruby/Watir，因为我现在必须支持 Firefox。我发现我真的很喜欢 Ruby，而且我正在研究 Watir，但我花了一个星期的时间试图让 Webdriver 甚至显示我的登录屏幕。

该站点以带有“我同意”区域的“警告屏幕”开头。用户单击我同意并显示登录屏幕。

```
<body onload="showMessage('true')"><div id="login"><div id="message"><map name="accept">

<area href="javascript:showLogin();" shape="rect" coords="280,390,384,432" />

</map></div></div></body> 
```

我需要单击该区域以显示登录屏幕（这是同一页面，实际上是一个表单，只是隐藏了）。我整天都在用 VBScript 做这个：

```
objExplorer.Document.GetElementsByTagName("area")(0).click 
```

然而，使用 Watir-Webdriver，browser.area(:index, 0).click 什么也不做。

```
puts browser.area(:index, 0).shape
=>RECT

puts browser.area(:index, 0).coords
=>280,390,384,432 
```

所以，我知道脚本可以“看到”区域元素并读取它的属性。它只是对点击事件没有任何作用。

如果我在 href 本身上使用 browser.goto：

```
browser.goto("javascript:showLogin();") 
```

登录变得可见，但我无法与元素交互（设置用户名和密码的文本字段）。我正在查看打开开发人员工具窗口的页面（以查看 HTML），它只是显示“正在加载...”。

这就是我卡住的地方。有趣的是，如果我使用登录表单的名称并执行以下操作：

```
browser.form(:name, "LoginForm").submit 
```

我从表单中得到用户名和密码为空的弹出消息，所以还有一些交互。

当然，如果我手动输入用户名/密码，即使显示“正在加载...”，我也可以正常提交表单。

我了解“when_present.click”和其他等待浏览器的技巧；这些不起作用。我的困境是我不能点击该区域，如果我在 javascript 上使用 goto，浏览器就会忽略来自 Watir 的自动化。

谢谢你的帮助。即使是“对不起，Watir 或 Webdriver 不会这样做”的答案我也可以接受。这将使我能够继续前进并寻找其他解决方案。

**在评论中的问题后编辑：**

对不起，该网站不公开，所以我不能发布链接。至于在 Firefox 中工作，脚本工作得很好。IE 有这个问题。这些评论让我想到：第一次导航到该站点时，我确实收到“......证书不是由受信任的......”证书错误。在提交表单之前，我在 IE 中遇到的证书错误是否会导致某种与自动化断开连接？我使用我在stackoverflow上得到的一行来点击证书错误：

```
browser.goto("javascript:document.getElementById('overridelink').click()") 
```

但现在我认为这可能是问题的一部分。我已经转到我的 IE（使用 IE 9）选项并取消选中用于检查证书的安全选项，但无济于事。如果这可能导致问题，我将不得不与基础架构团队协商，以生成证书供我们在每次构建新服务器时下载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:42:39.553

好的，我想在阅读了数百篇帖子和数小时的 Google 搜索之后，我终于找到了解决问题的方法：browser.execute_script。

```
browser.execute_script("showLogin();") 
```

就这么简单。使用 browser.goto 在加载页面时挂起并且 webdriver 超时。使用 execute_script 效果很好！

# inheritance - 在 Symfony 2.1 中处理具有继承的实体的业务逻辑

> ID：13364325
> 
> 赞同：0
> 
> 时间：2012-11-13T16:12:20.157
> 
> 标签：inheritance, symfony, business-logic

我读过实体的业务逻辑应该在一个单独的类（服务）中，而不是在实体类中。这听起来对我来说是正确的，没有问题，但是当存在实体继承时会发生什么？

我的意思是，我有两个实体“Commute”和“SingleRide”，其中包含一个名为 Ride 的抽象超类。这两个类共享一些逻辑，因此可以提供服务，但同时每个类都有自己的逻辑。

例如，如果我想获得一个根据实体类而有所不同的“乘车描述”，我该如何使用单个“乘车”服务来处理这个问题？我应该为每个乘车子类创建一个服务吗？（重复实体结构）

在这种情况下，如何以多态方式管理“游乐设施”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:45:19.477

在抽象类上添加任何共享逻辑。我的意思是，RIDES 的共同点。

所有特定的实现都在孩子身上进行，他们做的事情是其他人没有做的。

使用服务来放置与特定类型无关的逻辑，可以在各种不同的情况下使用。（例如：模板、数据库访问、日志记录、文件访问等是 Symfony 服务，它们是可以注入其他地方的通用功能，但不与任何实体或特定功能耦合）

# sql - 如何编写 SQL ...其中 mytable.somedate 从今天开始超过 30 天

> ID：13364329
> 
> 赞同：0
> 
> 时间：2012-11-13T16:12:39.893
> 
> 标签：sql, db2

如何用 SQL 编写`...where mytable.somedate from today is older that 30 days`。我正在使用 db2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:17:58.263

这应该这样做：

```
SELECT *
FROM mytable
WHERE somedate < CURRENT_TIMESTAMP - 30 DAYS 
```

# c# - 单个视图上的文件类型的多个输入字段

> ID：13364333
> 
> 赞同：1
> 
> 时间：2012-11-13T16:12:47.407
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, file-upload

我正在开发一个应用程序，我需要提供两个上传文件选项，一个用于图像，一个用于视频，我有这个代码[参考](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)

```
foreach (string file in Request.Files)
{
   HttpPostedFile hpf = Request.Files[file] as HttpPostedFile;
   if (hpf.ContentLength == 0)
      continue;
   string savedFileName = Path.Combine(
      AppDomain.CurrentDomain.BaseDirectory, 
      Path.GetFileName(hpf.FileName));
   hpf.SaveAs(savedFileName);
} 
```

并且在视图中

```
<input type="file" id="fileUpload1" name="fileUpload1" size="23" class="image" /> 
<input type="file" id="fileUpload2" name="fileUpload2" size="23" class="video" /> 
```

它工作正常，文件被上传，但问题是我如何确定哪个文件来自哪个输入类型，以便区分图像和视频，因为我必须为它们分配单独的唯一名称并保存到数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:20:28.283

[您可以使用HttpPostedFileBase](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilebase.aspx)的内容类型来识别图像

```
if (file.ContentType.Contains("image"))
{
    var isImage = true;
} 
```

如果您只有一张已排序的图像，您还可以检查您的视频内容类型以进行验证。如果你有两张图片，我们可能不得不考虑别的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:48:12.257

一种可能更好的方法是按键识别文件。

`Request.Files["fileUpload1"]`应该返回图像

和

`Request.Files["fileUpload2"]`应该返回视频

仅供参考，`Request.Files.AllKeys`已上传所有文件的所有密钥，它们应与您为`<input type="file"...`元素指定的任何名称匹配。

# java - 停止从 readLine() 方法读取被阻塞的线程

> ID：13364334
> 
> 赞同：3
> 
> 时间：2012-11-13T16:12:47.770
> 
> 标签：java, multithreading, http, sockets, buffer

```
while (active) {
   String message = reader.readLine();
}

public void stop(){
   active = false;
} 
```

在返回 a`Thread`之前如何阻止它？`readLine()``String`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:15:31.553

正如您可能已经确定的那样，您的布尔检查一切正常，但如果您的线程在网络 I/O 上阻塞或正在休眠，则不起作用。相反，您需要[中断](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)该线程。有关更多详细信息，请参见[此处](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:20:39.110

在这种情况下，您的 BufferedReader 必须关闭才能解除对读取线程的阻塞。

```
public void stop() {
    closeQuietly(reader); // unblock
    active = false;
}

public static void closeQuietly(Closable c) {
    if(c != null)
        try {
            c.close();
        } catch(IOException ignored) { }
} 
```

# php - 如何将 noindex 元标记添加到错误报告页面。

> ID：13364336
> 
> 赞同：0
> 
> 时间：2012-11-13T16:12:50.390
> 
> 标签：php, magento, error-handling, seo, noindex

在 Magento 中，/errors 下有通用错误报告。这些目前正在被谷歌索引。我尝试将元 noindex 标记添加到 /default/page.phtml 但这似乎不起作用。也许我什至应该接触这些文件。在其他情况下，例如使用愿望清单，我更新了 XML - 但在这种情况下无法弄清楚如何进行。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:18:34.313

将以下内容放入您`robots.txt`的网站根目录中：

```
User-agent: *
Disallow: /errors/ 
```

如果您有兴趣，这里还有一个更详尽的版本：

[http://www.byte.nl/blog/2012/06/11/magento-robots-txt/](http://www.byte.nl/blog/2012/06/11/magento-robots-txt/)

# c# - 将 System.Windows.Forms.Keys 发送到多个区域/语言环境

> ID：13364339
> 
> 赞同：0
> 
> 时间：2012-11-13T16:12:58.473
> 
> 标签：c#, keyboard, sendmessage

全部-

我一直在尝试搜索并找到解决方案一段时间，但我仍然对 2 个问题感到困惑

1）基本上可以说我有这个键：

System.Windows.Forms.Keys.A

我想使用 SendMessage 将它发送到一个键盘布局可以是任何东西的窗口。它可以是 US-EN、DE 或 BE，任何东西。

我怎样才能做到这一点？现在，Windows 正在根据其区域设置以不同的方式解释密钥。

我想也许是 KeysConverter 但我没有看到可以帮助解决这个问题的功能。

2）假设我只有一个键列表，如何将它们转换为正确的代码（虚拟？）以传递给 SendMessage？

提前致谢！

# android - Android 通知使用中的附加捆绑包？

> ID：13364341
> 
> 赞同：1
> 
> 时间：2012-11-13T16:13:01.577
> 
> 标签：android, notifications

虽然没有在[Notification Documentation](http://developer.android.com/reference/android/app/Notification.html)中记录，但查看 Jelly Bean 的 Notification.java 有一个额外的 Bundle，其中定义了 EXTRA_PEOPLE 键。

该类型被列为待定，Android 中的任何人都可以提供关于这可能是什么样子的指导吗？您是否希望这是一个字符串名称列表，或者可能是 Long rawContactIds？是否有任何推荐的顺序（例如会议组织者与与会者，或 Gmail From 与 CC）？

Android 4.2 中是否有任何更改将利用这一点，或者这仍然是真正的待定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:55:31.010

即使它现在已填写，依赖它也是有风险的——如果它被标记为 TBD，那么他们可以在任何次要版本中更改它而不告诉你，任何依赖它的代码都可能会损坏。我不会为我发布的任何东西冒险。

但是，如果您想对其进行测试，请编写一个使用它的应用程序并使用 java 反射来获取对象的类名并打印出值。如果它是一个集合类，请在它拥有的任何对象上重复并让我们知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:33:47.300

仍然是真正的待定。

（一般规则：避免使用任何有标记的东西，`@hide`除非你真的知道自己在做什么。）

# jquery - 如何添加一个jquery监听器？

> ID：13364343
> 
> 赞同：0
> 
> 时间：2012-11-13T16:13:06.833
> 
> 标签：jquery

我有一个列表排序器插件，排序很好，但过滤器功能不起作用。我认为这是因为过滤器按钮不直接与需要过滤的列表相邻。如何为包含要过滤的列表的 div 添加侦听器？

jsfiddle：http: [//jsfiddle.net/infatti/S9vU2/](http://jsfiddle.net/infatti/S9vU2/)

这可能是一个解决方案，但不确定如何使用现有的 jquery 来实现它：

```
$('#random-search-field').keyup(function() {
    list.search($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:50:18.680

在您正在寻找的功能中，`category`但`options`列表中没有。我更改`category`为`Type`，它似乎可以正确过滤。

[http://jsfiddle.net/S9vU2/3/](http://jsfiddle.net/S9vU2/3/)

```
$('#filter-LPO').click(function() {
    featureList.filter(function(item) {
        if (item.values().Type == "LPO") {
            return true;
        } else {
            return false;
        }
    });
    return false;
}); 
```

jsfiddle 现在看起来很慢，所以让它完全加载。

# android - 如何以编程方式判断是否有可用的操作系统升级

> ID：13364346
> 
> 赞同：1
> 
> 时间：2012-11-13T16:13:20.263
> 
> 标签：android

是否可以从我的应用程序中判断操作系统是否有可用的升级？如果是这样，我们可以告诉什么版本可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T21:27:23.687

Can't be done. There's no set API to determine when an upgrade is available because that functionality is dependent on the manufacturer, not Google.

# windows - 在 WINDOWS 命令 行中更改文本颜色

> ID：13364347
> 
> 赞同：0
> 
> 时间：2012-11-13T16:13:24.837
> 
> 标签：windows, colors, cmd

> **可能重复：**
> [如何在批处理文件中有多种颜色？](https://stackoverflow.com/questions/4339649/how-to-have-multiple-colors-in-a-windows-batch-file)
> [为 PHP 的 Windows 命令行输出着色](https://stackoverflow.com/questions/7086034/colorizing-windows-command-line-output-from-php)

让我说得很清楚：我在 WINDOWS 上，所以`\033[0;35mText`不会工作。

很抱歉不得不这样强调，但是我看到的每一个可能的重复项都有人说要使用上面的代码，不管问题是关于什么操作系统的。

现在，我知道没有太多麻烦是可能的 - ffmpeg 正是我想做的事情：（[来源：][[adamhaskell.net](http://adamhaskell.net/img/ffmpeg_colours.png)][）]
[![例子](../Images/d679f1f1f70a7ae04e173ca03f217a62.png)](https://i.stack.imgur.com/oTZDP.png)

那么它有多难呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:16:37.060

使用[SetConsoleTextAttribute](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx)设置文本颜色。

# php - 我需要关于使用 wordpress 的 php 代码的 if else 语句的帮助

> ID：13364348
> 
> 赞同：-3
> 
> 时间：2012-11-13T16:13:25.803
> 
> 标签：php, arrays, wordpress, html, header

基本上我有这个代码。当 wordpress 页面的 postId 是数组的一部分时，它会显示在 header_new 上。

现在我想要第三个选项，一个带有 id 的新标头。因此，当它是一组新数组的一部分时，它就会显示出来。如果它不起作用，我尝试了其他方法。

你们能帮我添加一个新的 php 行来做到这一点。如果它是数组的一部分，基本上是第三个 else if 语句来执行一个新的标题。

由于我是PHP的菜鸟，请详细说明

```
<div id="wrapper" class="<?php echo $post->ID;?>">
<?php $pagesArray = array(7686,7913,7915,8019,8131,8180,8676,8769,8796,8810,8812,8814,8818,8815); ?>`
<?php if(in_array($post->ID, $pagesArray)){ ?>
<div id="header_new"><!--header!-->
    </div><!--header!-->
<?php } else {?>
<div id="header-out">
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:30:09.460

您不能像这样订购您的代码：

```
if (something){
    xxxxx
} else {
    xyxyx
} else if (something else) {
    zzzzz
} 
```

因为你的循环以 else 结尾。`else if`必须在`else`case 之前，因为`else` 完成了循环。第三个`else if`永远不会实现。

编辑：

当你把你的第二个 else if ，你需要指定你的测试。它是`else if(test clause){some execution}`。

这是一个链接，这可能会对您有所帮助：[Php else if](http://php.net/manual/en/control-structures.elseif.php)

# wcf - 使用 Common Service Factory 时如何初始化我的容器

> ID：13364349
> 
> 赞同：0
> 
> 时间：2012-11-13T16:13:28.283
> 
> 标签：wcf, inversion-of-control, ioc-container

[Common Service Factory](http://commonservicefactory.codeplex.com/)网站指定了以下使用步骤：

*   下载最新版本的 Common Service Factory 库
*   下载最新版本的 Common Service Locator 库和您正在使用的 IoC 容器的适配器
*   添加对 CommonServiceFactory.dll、Microsoft.Practices.ServiceLocation.dll 和包含 IoC 容器适配器的程序集的引用
*   编辑服务的 .svc 文件，使服务属性包含服务类型的程序集限定名称
*   在 .svc 文件中，添加 Factory 属性并提供 Common Service Factory 库中可用工厂（用于 SOAP 服务的 ServiceHostFactory 和用于 RESTful 服务的 WebServiceHostFactory）的 Assembly-Qualified Name
*   配置您的 IoC 并设置 Common Service Adapter
*   使用您喜欢的 IoC 容器在 WCF 服务中使用松散耦合的依赖项

我只是不知道我应该在哪里执行倒数第二步：配置您的 IOC 并设置公共服务适配器。

有没有人有一个如何使用公共服务工厂的例子？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:53:28.823

您通常在应用程序的启动路径中设置容器。例如，对于 ASP.NET 应用程序，这通常是`Application_Start`事件。创建容器后，将容器包装到给定容器的 Common Service Locator 适配器中，并将其提供给`ServiceLocator.SetLocatorProvider`CSL 项目的 ，然后就完成了。

这是使用 Simple Injector 时的样子：

```
var adapter = 
    new SimpleInjectorServiceLocatorAdapter(container);

ServiceLocator.SetLocatorProvider(() => adapter); 
```

# ruby - Ruby：每页显示一个子数组

> ID：13364354
> 
> 赞同：0
> 
> 时间：2012-11-13T16:13:44.320
> 
> 标签：ruby, sinatra

我正在使用 Ruby (+ Sinatra) 来处理我的一个网络项目。

我有一个包含相当多内容的数组，并且只想在每页显示 10 个数组元素。

* * *

所以到目前为止我所做的是：

*   创建一个包含所有内容的数组

    ```
    ary = ["ex1", "ex2", "ex3", … ,"ex60" ] // all elements 
    ```

*   将数组拆分为子数组

    ```
    ary.each_slice(10).to_a // subarrays with fewer content 
    ```

现在，我需要一种将子数组拆分为单个数组并为它们命名的方法，

例如：

```
@subAry1 # ex1, ex2, ex3, … ex10
@subAry2 # ex11, ex12, ex13, … ex20
@subAry3 # ex21, ex22, ex23, … ex30 
```

我坚持用数组名称中的连续数字创建这些数组。

* * *

当我将我的数组拆分时，我会在我的 .erb 文件中使用它：

```
<% currentAry = @subAry1 %>
<% currentAry.each do |element| %><%= element %><% end %> 
```

如果按下“下一步”按钮，这将更改内容：

```
currentAry = @subAry + '1' 
```

* * *

有人可以帮助我，或者它甚至是一种有效的方法，在我的页面上拆分/显示数组元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:24:24.913

数组数组怎么样？这里有一些可以帮助您入门的东西。

```
all = ary.each_slice(10).to_a
current_page = 0 
```

在 ERB 文件中：

```
<% all[current_page].each do |element| %><%= element %><% end %> 
```

在“下一步”按钮被按下后

```
current_page += 1 
```

# ios - iOS 上的调查应用程序使用什么数据存储方法

> ID：13364355
> 
> 赞同：1
> 
> 时间：2012-11-13T16:13:44.570
> 
> 标签：ios, core-data

我正在尝试为 iOS 创建一个将数据存储在设备上的调查应用程序。该应用程序还需要能够对调查数据进行统计。

示例问题可能是：

今天是什么日子？
选择一个数字 1 - 10。
你最喜欢的颜色是什么？
你吃过早餐了吗？

每个调查都需要存储（最好在设备上）作为自己的项目/事件/表格行。

| 星期一 | 9 | 蓝色 | 是的 |

然后我希望应用程序运行并显示数据统计信息。

星期一进行的调查的总数/平均值是多少？周二？ETC？
选择蓝色的百分比是多少？
有多少百分比有蓝色，是的？

这似乎是一个相对简单的应用程序，但我是初学者。我现在最大的问题是：我应该使用什么数据存储方法？归档？核心数据？还有什么？

# jquery - 我的 jQuery 插件没有被调用

> ID：13364356
> 
> 赞同：1
> 
> 时间：2012-11-13T16:13:45.567
> 
> 标签：jquery, jquery-1.7

我正在尝试使用 jQuery 创建一个通用函数，但由于某种原因它没有被调用。当我添加如下所示的警报时，会弹出第一个警报，但不会弹出`'My plugin invoked'`第二个警报。`'Submitting'`

任何帮助是极大的赞赏。谢谢

```
$(document).ready(function() {

  jQuery.fn.ajaxFormSubmit = function(parameter1, parameter2) {
    alert('My plugin invoked...');
      this.submit(function(e) {
          alert('Submitting.......');
          $.ajax({ 
              url: "/Servletpath",
              dataType: "json",
              data: { //data
                    },

              success:  (function(data) {
                            alert('success');
                        }),  
              error:    (function() { 
                            alert('error');
                        })          
            });
          return false;
      });
  };

  $("#search").live("click", function() {
      var parameter1 = $("#id1").val();
      var parameter2 = $("#id2").val();
      $("#form_id").ajaxFormSubmit(parameter1, parameter2);
      return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:25:07.443

`this.submit(function() {...})`不会触发提交。它将等待表单提交，然后调用回调。这会有所帮助

```
this.submit(function(e) {
    ...
}).trigger('submit'); 
```

要不就

```
 jQuery.fn.ajaxFormSubmit = function(parameter1, parameter2) {
    alert('My plugin invoked...');
    alert('Submitting.......');
    $.ajax({ 
        url: "/Servletpath",
        dataType: "json",
        data: { //data
              },
        success:  function(data) {
                        alert('success');
                    },  
          error:    function() { 
                        alert('error');
                    }          
        });
  }; 
```

# c# - GridView 页脚模板操作

> ID：13364360
> 
> 赞同：1
> 
> 时间：2012-11-13T16:14:12.557
> 
> 标签：c#, asp.net, gridview, objectdatasource

我创建了一个gridView，它的数据绑定到一个objectdatasource 我面临的问题是插入命令。我想创建一个页脚并使用该页脚将数据插入数据库。但是当我放置一个页脚模板时，它会自动添加到一个新列中。这是代码：

```
<asp:GridView ID="GridView1" runat="server" DataKeyNames="ID" ForeColor="#333333" 
    ShowFooter="True" CssClass="grid"
    DataSourceID="ObjectDataSource3"  AutoGenerateColumns="False" 
    AllowPaging="True" Width="1200px" 
         AlternatingRowStyle-CssClass="gridAltRow" RowStyle-CssClass="gridRow"  
        FooterStyle-CssClass="gridFooterRow" >
         <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <Columns>
        <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" 
            ShowSelectButton="True"  />
        <asp:TemplateField>
           <FooterTemplate>
            <asp:LinkButton ID="Insert" runat="server">Insert</asp:LinkButton>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="ID" HeaderText="ID" 
            SortExpression="ID" />
        <asp:BoundField DataField="ElementName" HeaderText="ElementName" 
            SortExpression="ElementName" />
        <asp:BoundField DataField="Status" HeaderText="Status" 
            SortExpression="Status" /> 
```

有谁知道如何解决此问题或如何在 footerTemplate 中添加命令字段

# sql - oracle中对大型结果集的按位计算

> ID：13364362
> 
> 赞同：0
> 
> 时间：2012-11-13T16:14:17.017
> 
> 标签：sql, oracle, plsql

我有以下场景在这个[小提琴](http://sqlfiddle.com/#!4/32d53/2)中很简单：

在我的数据库中，我将一次处理一个大型结果集（1 亿+）记录，并且需要将表示为数值的权限合并在一起。按位或是将使用的聚合。我的问题是，确保在小提琴中`Steve`条目返回一个如下所示的元组的最有效方法是什么：

```
name     permissions   
Steve    23 --(bit_or) 
```

我知道主要问题是跟踪我所看到的时间，`Steve`但我无法推断出一种有效的方式来处理这个问题。首选是在数据库中完成，以便 a`materialized view`可以处理计算后的结果集。

**问题**

> 使用按位聚合或听起来对我没有吸引力。您不能创建一个已应用该掩码的单独列吗？

**回复**

> 这就是存储在物化视图中的内容。我必须在某个地方计算它。问题特别是，这是一个数据仓库应用程序，它不断地被提供数据，并且这些权限需要根据所使用的缓存策略相当频繁地更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:37:58.710

最有效的解决方案*可能*是运行直接 SQL 聚合。由于权限是有限的，因此存在给定数量的个人权限 (N)。您可以在 N 列中分解每个权限，聚合（使用`MAX`）并在之后重新组合权限：

```
p1 = sign(BitAnd(permissions, 2^0))
p2 = sign(BitAnd(permissions, 2^1))
...
P1 = MAX(p1)
P2 = MAX(P2)
...

Permissions = 2^0 * P1 + 2^1 * P2 + ... + 2^(N-1) * PN 
```

但这[会很乏味](http://sqlfiddle.com/#!4/cdb73/3)，并且在添加新权限时必须重写查询：

```
SQL> select name,
  2           power(2, 0) * MAX(sign(BitAnd(permissions, power(2, 0))))
  3         + power(2, 1) * MAX(sign(BitAnd(permissions, power(2, 1))))
  4         + power(2, 2) * MAX(sign(BitAnd(permissions, power(2, 2))))
  5         + power(2, 3) * MAX(sign(BitAnd(permissions, power(2, 3))))
  6         + power(2, 4) * MAX(sign(BitAnd(permissions, power(2, 4))))
  7         + power(2, 5) * MAX(sign(BitAnd(permissions, power(2, 5))))
  8         + power(2, 6) * MAX(sign(BitAnd(permissions, power(2, 6))))
  9         + power(2, 7) * MAX(sign(BitAnd(permissions, power(2, 7))))
 10         + power(2, 8) * MAX(sign(BitAnd(permissions, power(2, 8))))
 11            permissions
 12    from cats
 13   group by name;

NAME            PERMISSIONS
--------------- -----------
Carl                     15
Steve                    23 
```

相反，我建议您编写自己的用户定义聚合（受[Tom Kyte 的这篇文章的](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CEoQFjAD&url=http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3aNO%3a%3aP11_QUESTION_ID:2196162600402&ei=iHOiUPCqI6LU0QW594GADw&usg=AFQjCNEHIx6szttJBLhtj5nuP_KntO7LUQ)启发——在 9ir2 上测试）：

```
SQL> create or replace type bin_agg_type as object
  2  (
  3     total NUMBER,
  4
  5     static function
  6          ODCIAggregateInitialize(sctx IN OUT bin_agg_type )
  7          return number,
  8
  9     member function
 10          ODCIAggregateIterate(self IN OUT bin_agg_type ,
 11                               value IN NUMBER)
 12          return number,
 13
 14     member function
 15          ODCIAggregateTerminate(self IN bin_agg_type ,
 16                                 returnValue OUT NUMBER,
 17                                 flags IN number)
 18          return number,
 19
 20     member function
 21          ODCIAggregateMerge(self IN OUT bin_agg_type,
 22                             ctx2 IN bin_agg_type)
 23          return number
 24  );
 25  /

Type created.

SQL> create or replace type body bin_agg_type
  2  is
  3
  4  static function ODCIAggregateInitialize(sctx IN OUT bin_agg_type )
  5  return number
  6  is
  7  begin
  8      sctx := bin_agg_type ( 0 );
  9      return ODCIConst.Success;
 10  end;
 11
 12  member function ODCIAggregateIterate(self IN OUT bin_agg_type ,
 13                                       value IN NUMBER)
 14  return number
 15  is
 16  begin
 17      self.total := self.total + value - BitAND(self.total, value);
 18      return ODCIConst.Success;
 19  end;
 20
 21  member function ODCIAggregateTerminate(self IN bin_agg_type ,
 22                                         returnValue OUT NUMBER,
 23                                         flags IN number)
 24  return number
 25  is
 26  begin
 27      returnValue := total;
 28      return ODCIConst.Success;
 29  end;
 30
 31  member function ODCIAggregateMerge(self IN OUT bin_agg_type ,
 32                                     ctx2 IN bin_agg_type )
 33  return number
 34  is
 35  begin
 36      self.total := self.total+ctx2.total - BitAND(self.total, ctx2.total);
 37      return ODCIConst.Success;
 38  end;
 39
 40
 41  end;
 42  /

Type body created.

SQL> CREATE or replace
  2  FUNCTION BitOr_Agg(input NUMBER)
  3  RETURN NUMBER
  4  PARALLEL_ENABLE AGGREGATE USING bin_agg_type ;
  5  /

Function created. 
```

让我们称之为：

```
SQL> SELECT name, bitor_agg(permissions) from cats group by name;

NAME            BITOR_AGG(PERMISSIONS)
--------------- ----------------------
Carl                                15
Steve                               23 
```

我很想知道哪个是最快的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:35:21.210

这是一个博客[链接](http://radino.eu/2008/05/31/bitwise-or-aggregate-function/)，该博客在 Oracle 中实现了按位或聚合函数。

# jquery - 防止 JQuery datepicker 日期环绕

> ID：13364363
> 
> 赞同：2
> 
> 时间：2012-11-13T16:14:23.690
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有一个 jquery 日期选择器，用于选择过去 100 年到“现在”范围内的出生日期。

```
$("#dateOfBirth").datepicker({
    changeYear: true,
    yearRange: "-100:+0"
}); 
```

一旦日期选择器弹出，用户就可以“向前滚动”这些年。由于日期范围，现在（2012）之后的下一年是过去一百年（1912）。

这种行为会导致混乱。

是否可以停止日期环绕到日期范围的开头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:18:32.513

更改方法和使用[`minDate`](http://api.jqueryui.com/datepicker/#option-minDate)和[`maxDate`](http://api.jqueryui.com/datepicker/#option-maxDate)属性，而不是`yearRange`. `yearRange`仅用于设置该选择的内容，它不限制用户可以输入的日期。

在这里查看它的外观：http: [//jqueryui.com/datepicker/#min-max](http://jqueryui.com/datepicker/#min-max)

在您的情况下，您可能只需添加

```
maxDate: "0" 
```

您的选择： http: [//jsbin.com/uducov/1](http://jsbin.com/uducov/1)这告诉日期选择器使“今天”成为可以选择的最大日期，并防止通过`>`按钮向前翻页。

请注意，两者都`minDate`接受`maxDate`具有相对日期的字符串。

# c# - 将方法传递给轨迹栏

> ID：13364364
> 
> 赞同：1
> 
> 时间：2012-11-13T16:14:24.873
> 
> 标签：c#, visual-studio, image-processing, methods, trackbar

这是一个任务。

我在 C# 中创建了一个非常简单的图像处理程序，它允许用户对灰度图像执行某些操作。

我目前遇到的问题是我需要将多个方法传递给轨迹栏。这将允许跟踪栏更改任何调用方法的阈值。

我已经搜索了谷歌，但似乎对这个问题没有什么帮助。那么有人可以给我一些关于如何做到这一点的建议吗？

我目前拥有的代码是这样的。

```
using System;
using System.Collections.Generic;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Text;
using System.Windows.Forms;

namespace DIP_START
{

    public partial class Form1 : Form
    {
        public Bitmap original_image, proc_image;
        public int[] bins = new int[256];
        int max;

        public Form1()
        {
            InitializeComponent();
            original_image = null;
            proc_image = null;

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        public void Form1_Paint(object sender, PaintEventArgs e)
        {
            if (original_image != null)
            {
                Graphics g = e.Graphics;
                Rectangle r = new Rectangle(10, 50, original_image.Width, original_image.Height);
                g.DrawImage(original_image, r);

            }

        }

        //                OPEN IMAGE FILE
        /******************************************************************************************/

        private void openToolStripMenuItem_Click_1(object sender, EventArgs e)
        {
            // show the openFile dialog box            
            Graphics g = this.CreateGraphics();
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                original_image = new Bitmap(openFileDialog1.FileName);

            }

            Rectangle r = new Rectangle(10, 50, original_image.Width, original_image.Height);
            g.DrawImage(original_image, r);
        }
        //                 EXIT APPLICATION
        /************************************************************************************/

        private void exitToolStripMenuItem_Click_1(object sender, EventArgs e)
        {
            Dispose();
            Application.Exit();
        }

        /***********************************************************************************/
        //           EDGE DETECTION
        /***********************************************************************************/

        /***********************************************************************************/
        //           ROBERTS GRADIENT - WITH THRESHOLD
        /***********************************************************************************/

        private void withoutToolStripMenuItem_Click(object sender, System.EventArgs e)
        {

            Graphics g = this.CreateGraphics();

            int width = original_image.Width - 1;
            int height = original_image.Height - 1;

            int threshold = thresholdBar1.Value;
            thresholdBar1.Visible = true;
            thresholdValueBox.Visible = true;
            string thresholdBarVal = Convert.ToString(thresholdBar1.Value);
            thresholdValueBox.Text = thresholdBarVal;

            Rectangle r = new Rectangle(535, 50, original_image.Width, original_image.Height);
            Rectangle r2 = new Rectangle(0, 0, original_image.Width, original_image.Height);

            proc_image = original_image.Clone(r2, PixelFormat.Format8bppIndexed);

            g.DrawImage(original_image, r2);

            BitmapData bmDataOR = original_image.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.ReadWrite, PixelFormat.Format8bppIndexed);
            BitmapData bmDataPR = proc_image.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.ReadWrite, PixelFormat.Format8bppIndexed);

            int stride = bmDataOR.Stride;
            // System.IntPtr Scan0 = bmData.Scan0;

            unsafe
            {
                byte* o = (byte*)(void*)bmDataOR.Scan0;
                byte* p = (byte*)(void*)bmDataPR.Scan0;

                byte[] pix_val = new byte[4];

                for (int y = 0; y < height; ++y)
                {
                    for (int x = 0; x < width; ++x)
                    {
                        pix_val[0] = o[y * stride + x];
                        pix_val[1] = o[(y + 1) * stride + x + 1];
                        pix_val[2] = o[(y + 1) * stride + x];
                        pix_val[3] = o[y * stride + x + 1];
                        int new_pix_val = Math.Abs(pix_val[0] - pix_val[1]) + Math.Abs(pix_val[2] - pix_val[3]);

                        if (new_pix_val > threshold)
                        {

                            p[y * stride + x] = 255;

                        }
                        else
                            p[y * stride + x] = 0;
                    }
                }

                proc_image.UnlockBits(bmDataPR);
                original_image.UnlockBits(bmDataOR);

                g.DrawImage(proc_image, r);
                //thresholdBar1.Visible = false;

            }

        }

        /***********************************************************************************/
        //           NEIGHBOURHOOD AVERAGING WITHOUT THRESHOLD
        /***********************************************************************************/

        private void withoutThresholdToolStripMenuItem_Click(object sender, System.EventArgs e)
        {

            Graphics g = this.CreateGraphics();

            int width = original_image.Width - 2;
            int height = original_image.Height - 2;

            int total_val = 0;
            int avg = 0;

            Rectangle r = new Rectangle(535, 50, original_image.Width, original_image.Height);
            Rectangle r2 = new Rectangle(0, 0, original_image.Width, original_image.Height);

            proc_image = original_image.Clone(r2, PixelFormat.Format8bppIndexed);

            BitmapData bmDataOR = original_image.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.ReadWrite, PixelFormat.Format8bppIndexed);
            BitmapData bmDataPR = proc_image.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.ReadWrite, PixelFormat.Format8bppIndexed);

            int stride = bmDataOR.Stride;

            unsafe
            {
                byte* o = (byte*)(void*)bmDataOR.Scan0;
                byte* p = (byte*)(void*)bmDataPR.Scan0;

                byte[] pix_val = new byte[9];

                for (int y = 0; y < height; ++y)
                {
                    for (int x = 0; x < width; ++x)
                    {
                        pix_val[0] = o[y * stride + x];
                        pix_val[1] = o[y * stride + x + 1];
                        pix_val[2] = o[y * stride + x + 2];
                        pix_val[3] = o[(y + 1) * stride + x];
                        pix_val[4] = o[(y + 1) * stride + x + 1];
                        pix_val[5] = o[(y + 1) * stride + x + 2];
                        pix_val[6] = o[(y + 2) * stride + x];
                        pix_val[7] = o[(y + 2) * stride + x + 1];
                        pix_val[8] = o[(y + 2) * stride + x + 2];

                        for (int i = 0; i < 9; ++i)
                        {

                            total_val = total_val + pix_val[i];

                        }

                        avg = total_val / 9;

                        p[y * stride + x] = (byte)avg;

                        total_val = 0;
                    }
                }

                proc_image.UnlockBits(bmDataPR);
                original_image.UnlockBits(bmDataOR);

                g.DrawImage(proc_image, r);

            }

        }

    }
} 
```

如您所见，轨迹条被硬编码到罗伯茨梯度中，我也需要邻域平均来采用轨迹条。

在 Visual Studio 中，在轨迹栏的事件标题下，我插入了 Roberts Gradient 的方法

# jquery-plugins - Bootstrap typeahead 在 jquery 文件上传插件中不起作用

> ID：13364365
> 
> 赞同：1
> 
> 时间：2012-11-13T16:14:24.023
> 
> 标签：jquery-plugins, file-upload, twitter-bootstrap, bootstrap-typeahead

我正在使用 jQuery File Upload 插件并在表单中尝试使用 twitter bootstrap 中的 typeahead 但它不起作用，

代码是这样的：

```
<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name">
        <input type="text" name="uploader-title[]" value="" placeholder="{%=file.name%}">
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
        <td>
            <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
        </td>
        <td class="start">{% if (!o.options.autoUpload) { %}
            <button class="btn btn-primary">
                <i class="icon-upload icon-white"></i>
                <span>{%=locale.fileupload.start%}</span>
            </button>
        {% } %}</td>
        {% } else { %}
        <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>{%=locale.fileupload.cancel%}</span>
            </button>
        {% } %}</td>

    </tr>

    <tr>
        <td> </td>
        <td>
            <select name="uploader-subsector[]" onchange="uploaderSelectSubsector(this)" required>
            <option value="">Subsectores</option>
            </select>
        </td>

        <td>
            <select name="uploader-eje[]" onchange="uploaderSelectEje(this)" required>
                <option value="">Ejes</option>
            </select>
        </td>

        <td>
            <select name="uploader-ae[]" onchange="uploaderSelectAe(this)" required>
                <option value="">Contenidos</option> 
            </select>
        </td>
    </tr>
    <tr>
     <td> </td>
        <td>
            <input name="uploader-description[]" type="text" placeholder="Descripción (Ej: Prueba de ecuaciones)"/>
        </td>

        <td >
            <input name="uploader-tags[]" id="uploader-tags" type="text" placeholder="Tags (Ej: ecuaciones, logaritmos)" data-provide="typeahead"/>
        </td>

        <td>
            <select name="uploader-nivel[]" onchange="uploaderSelectNivel(this)">
                <option value="">Nivel</option>
            </select>
        </td>
    </tr>

{% } %}
</script> 
```

然后在javascript中调用列表

```
<script type="text/javascript">
        jQuery(document).ready(function() {
        var helps = ['hola','mundo'];
        $('#uploader-tags').typeahead({source: helps, items:5});
    });
</script> 
```

如果我将控件放在

```
<script id="template-upload" type="text/x-tmpl">
</script> 
```

标签它工作得很好，但在里面我不能让它工作，希望你能帮助我

# c++ - 类包含 boost::container::flat_set 时复制对象时出错

> ID：13364366
> 
> 赞同：4
> 
> 时间：2012-11-13T16:14:32.130
> 
> 标签：c++, boost, copy-constructor

在（错误？）的印象`boost::container::flat_set`中`std::set`，我认为元素`set`的`flat_set`数量很少，并且搜索性能比插入更关键。

在稍后的阶段，我被一个令人困惑的编译错误难住了，我最终将其追溯到`flat_set`作为类成员的使用。

例如：

```
class Room {
  private:
    boost::container::flat_set<int> v;
}; 
```

以下代码不会编译，但如果我替换`flat_set`为`std::set`.

```
Room a;
Room b = Room(); // Example 1\. Compiles OK
a = b;           // Example 2\. Compiles OK
a = Room();      // Example 3\. Eeeek! Compile fails on this line 
```

我看到的编译错误是：

```
错误：'a = Room()' 中的 'operator=' 不匹配
注：候选人是：
注意：Room&Room::operator=(Room&)
注意：从 'Room' 到 'Room&' 的参数 1 没有已知的转换

```

**我的问题是：**

1.  这个错误是预期的吗？如果是，那么我该如何解决呢？
2.  示例代码中的三个语句有何不同，为什么只有最后一个语句失败？
3.  为什么编译器抱怨`Room`而不是赋值运算符`flat_set`？的使用是否`flat_set`影响了为类生成的默认运算符？

* * *

完整的示例程序：

```
#include <boost/container/flat_set.hpp>

class Room {
  private:
    boost::container::flat_set<int> v;
};

int main(int argc, char *argv[]) {
  Room a;

  Room b = Room();
  a = b;
  a = Room();  // compilation fails here

  return 0;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:24:07.057

这是*Boost.Move*执行的移动模拟的已知限制。您可以在此处找到有关它的更多信息：http: [//www.boost.org/doc/libs/1_52_0/doc/html/move/emulation_limitations.html#move.emulation_limitations.assignment_operator](http://www.boost.org/doc/libs/1_52_0/doc/html/move/emulation_limitations.html#move.emulation_limitations.assignment_operator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:22:32.860

***免责声明：****我是 OP；我已经接受了[K-ballo 的回答](https://stackoverflow.com/questions/13364366/error-copying-objects-when-class-contains-boostcontainerflat-set/13364536#13364536)，因为它导致了最终的解决方案，我发布这个来补充这个线程的一些细节。*

正如在接受的答案中提到的，这确实是使用[BOOST_COPYABLE_AND_MOVABLE 宏的类的](http://www.boost.org/doc/libs/1_52_0/doc/html/BOOST_COPYABLE_AND_MOVABLE.html)[已知限制](http://www.boost.org/doc/libs/1_52_0/doc/html/move/emulation_limitations.html#move.emulation_limitations.assignment_operator)（它适用于包括and中的许多类）。`boost::container``flat_set``flat_map`

为了克服这个问题，我为类定义了一个赋值运算符，它接受一个 const 引用参数。例如，在问题中的示例`Room`类的情况下，它将沿着以下行：

```
class Room {
  private:
    boost::container::flat_set<int> v;

  public:
    Room& operator=(const Room& source) {
      v = source.v;
      return *this;
    }
}; 
```

# javascript - 创建一个 ExtJS 弹出表单？

> ID：13364372
> 
> 赞同：1
> 
> 时间：2012-11-13T16:14:42.260
> 
> 标签：javascript, extjs, extjs4

有谁知道如何创建一个简单的 ExtJS 的“弹出式表单”，意思是用户在菜单上选择一些东西，屏幕上会出现一个弹出窗口来询问用户的一些输入，最后提交信息。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:15:34.567

将表单面板包裹在 ext 窗口内。这是最简单的方法。

# iphone - 将颜色/Alpha/过滤器更改为 MKMapView iOS 6

> ID：13364374
> 
> 赞同：5
> 
> 时间：2012-11-13T16:14:56.543
> 
> 标签：iphone, core-graphics, mkmapview

有没有办法将 CI 过滤器应用于`MKMapViews`？或者类似的东西？我试图不让我的基于地图的应用程序看起来如此米色。有没有办法应用`RGBA`过滤器？

任何帮助/教程方向表示赞赏。我在本机文档中没有看到任何关于更改外观的内容`MKMapView`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T20:03:36.727

我认为您无法在图像呈现到屏幕之前对其进行更改。但是，您可以在整个世界上使用 MKOverlayView 来实现相同的效果。以下应该可以工作，但将其视为伪代码只是为了让您入门。

```
@interface MapTileOverlay : NSObject <MKOverlay>
@end

@implementation MapTileOverlay
-(id)init {
    self = [super init];
    if(self) {
        boundingMapRect = MKMapRectWorld;
        coordinate = MKCoordinateForMapPoint(MKMapPointMake(boundingMapRect.origin.x + boundingMapRect.size.width/2, boundingMapRect.origin.y + boundingMapRect.size.height/2));
    }
    return self;
}
@end

@interface MapTileOverlayView : MKOverlayView
@end

@implementation MapTileOverlayView
-(void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context {
    CGContextSetBlendMode(context, kCGBlendModeMultiply);  //check docs for other blend modes
    CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 0.5);  //use whatever color to mute the beige
    CGContextFillRect(context, [self rectForMapRect:mapRect]);
}
@end 
```

您需要有一些实现`MKMapViewDelegate`协议的类来创建视图......

```
@interface MapViewDelegate : NSObject<MKMapViewDelegate>
@end

@implementation MapViewDelegate
-(MKOverlayView*)mapView:(MKMapView*)mapView viewForOverlay:(id<MKOverlay>)overlay {
    if([overlay isKindOfClass:[MapTileOverlay class]]) {
        return [[MapTileOverlayView alloc] initWithOverlay:overlay];
    }
    return nil;
} 
```

最后，在你初始化你的地图之后，你需要在地图上设置代理并添加覆盖......你必须在添加覆盖之前设置代理......

```
MapViewDelegate* delegate = [[MapViewDelegate alloc] init];  //you need to make this an iVar somewhere
[map setDelegate:delegate];
[map addOverlay:[[MapTileOverlay alloc] init]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:06:34.420

您可以在地图视图的顶部添加一个视图，该视图几乎是透明的，带有轻微的颜色（例如，蓝色以补偿棕色。）

# php - 有没有办法将 ajax 数据作为单独的变量而不是完整的 HTML 来获取？

> ID：13364378
> 
> 赞同：1
> 
> 时间：2012-11-13T16:15:22.413
> 
> 标签：php, jquery, ajax

我正在尝试使用 jquery 通过书籍的第一个字母将书籍行获取`$.post`到我`<td> </td>`的表中，这是我的表的一部分。

我的桌子看起来像：

```
<table id="myTable">

  <thead>
    <tr>
      <th class="page">pages</th>
      <th class="book_name">Book Name</th>
      <th class="author">Author</th>
    </tr>
  </thead>

  <tbody id="result_list">
  <!--Here is data which will come with ajax($.post) -->                 
  </tbody>
</table> 
```

编写 jquery 代码，我成功了，但`$("#result_list").html(data)`像这样：

```
$.post( "/ajax.php", { book_first_letter: 'A'},
  function( data ) {
      $( "#result_list" ).html( data );
  }
); 
```

但我不想以 HTML 格式获取所有数据并插入`<tbody>`. 我想从 ajax.php 获取数据作为单独的变量。例如; 书名、徽标、页面、作者。我想将它们插入`<td> </td>`.

我的 ajax.php 是这样的：

```
 $letter= trim($_POST['book_first_letter']);    
 $query = $this->book_model->get_books_by_letter($letter);       
 foreach ($query as $book) { ?>

     <tr>
         <td> <?php echo $book->page; ?> </td>
         <td> <?php echo $book->name; ?> </td>
         <td> <?php echo $book->author; ?> </td>

     </tr>
   <?php  
}
?> 
```

有什么方法可以获取每个变量（即 $book->name）并将其插入`<td></td>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:20:17.847

您可以使用以下方法将数据转换为 JSON [`json_encode()`](http://php.net/json_encode)：

```
$letter= trim($_GET['book_first_letter']);    
$query = $this->book_model->get_books_by_letter($letter);    
echo json_encode( $query ); 
```

然后在客户端，您[`getJSON()`](http://api.jquery.com/jQuery.getJSON/)在 JavaScript 中使用并拥有与 PHP 中类似的对象：

```
$.getJSON( "/ajax.php", { book_first_letter: 'A'},
  function( data ) {
      // data has the same properties as $query did in PHP
  }
); 
```

**编辑**

正如@MrCode 所指出的，它`getJSON()`只是做一个 GET 请求。所以我将访问 PHP 代码中参数的方式从`$_POST`更改为`$_GET`.

无论如何，这里的 GET 请求可能是更好的选择，因为这里的 GET 请求可以被浏览器缓存，而 POST 请求每次都必须执行。

另一种选择是保留 POST 请求，这会将客户端 JS 更改为

```
$.post( "/ajax.php", { book_first_letter: 'A'},
  function( data ) {
      // data has the same properties as $query did in PHP
  }
  , 'json'
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:28:42.510

不仅可以，而且应该。与其让 PHP 将 html 作为文本返回，不如让它返回一个 JSON 对象。

你需要做一些事情。首先为您的 $.post() 调用添加第四个参数，以获取“json”的数据类型。

```
$.post( "/ajax.php", { book_first_letter: 'A'}, callback, "json" ); 
```

然后，让 PHP 为结果发送 JSON 标头是一种很好的形式，因此在您使用 PHP 发送任何数据之前

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json'); 
```

而不是呼应你的书本模型的属性，只需使用 json_encode()

```
$letter= trim($_POST['book_first_letter']);    
$books = $this->book_model->get_books_by_letter($letter);
echo json_encode( $books ); 
```

所以客户端现在有了原始数据，您可以使用 js/jQuery 循环浏览书籍并将其添加到您的表格中。

```
function callback( books)
{
   var i = 0, len = books.length, html = "";

    for( ; i < len; ; )
    {
        html += "however you want to structure the data";
    }

    $( "#result_list" ).html( html );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:19:07.273

JSON 将是您执行此操作的最佳方式

并且取决于您要恢复的`$query` 内容，它应该像

```
echo json_encode($query) 
```

然后你将不得不处理客户端javascript上的数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T16:19:29.907

是的，有 - 使用 JSON。PHP有[`json_encode`](http://php.net/manual/en/function.json-encode.php)功能。只需从您的数据中创建一个类似 json 的数组，`json_encode`然后将它们发送给客户端。在客户端，使用`$.post`with `dataType: json`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T16:20:01.387

您可以将变量作为 JSON 返回。

在你的 ajax.php 中：

```
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
echo json_encode($arr); 
```

在您的 jquery AJAX 调用中：

```
$.post('ajax.php', { book_first_letter: 'A'}, function(data) {
    console.log(data) //view the data returned in the console of firebug
},'json'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T16:22:57.153

Json 编码。在我看来，您可能很快就会开始考虑[骨干和下划线](http://documentcloud.github.com/backbone/)堆栈以满足您的 ajax 需求。它在客户端具有模板功能，这看起来是您在该示例中绝对可以使用的东西之一

# c# - Razor Return File 返回多个文件

> ID：13364381
> 
> 赞同：1
> 
> 时间：2012-11-13T16:15:33.857
> 
> 标签：c#, asp.net-mvc, file-upload, razor

我有一个返回文件，它提供下载文件但也将文件下载到另一个位置，我只是希望它提供给用户一个文件下载，即它从内存中读取初始数据，所以第一个参数在返回文件中是某种 MemoryStream，但我不知道该怎么做

```
 [HttpPost]
    public FilePathResult FileToFasta(F2FModel model)
    {

        string FullText = new StreamReader(model.File.InputStream).ReadToEnd();
        TextLayer layer = new TextLayer(FullText);
        string outputFile = layer.WriteToFasta();

        String mydatetime = DateTime.Now.ToString("MMddyyyy");
        string FileName = String.Format("TextFile{0}.txt", mydatetime);
        string FilePath = @"F:\test\" + FileName;
        FileInfo info = new FileInfo(FilePath);
        if (!info.Exists)
        {
            using (StreamWriter writer = info.CreateText())
            {
                writer.Write(outputFile);
            }
        }
        return File(FilePath, "text/plain", FileName);

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:50:05.370

`MemoryStream`可以与 一起使用[`FileStreamResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.filestreamresult%28v=vs.108%29.aspx)，例如这样：

```
[HttpPost]
public FilePathResult FileToFasta(F2FModel model)
{
    string FullText = new StreamReader(model.File.InputStream).ReadToEnd();
    TextLayer layer = new TextLayer(FullText);
    string outputFile = layer.WriteToFasta();

    string mydatetime = DateTime.Now.ToString("MMddyyyy");
    string FileName = String.Format("TextFile{0}.txt", mydatetime);

    //Use different encoding if needed
    byte[] outputArray = Encoding.Unicode.GetBytes(outputFile);
    MemoryStream outputStream = new MemoryStream(outputArray); 

    //FileStreamResult will close the stream for you so don't worry
    return new FileStreamResult(outputStream, "text/plain") { FileDownloadName = FileName };
} 
```

# c# - 如何将json解析为来自不同来源的枚举

> ID：13364390
> 
> 赞同：0
> 
> 时间：2012-11-13T16:15:52.223
> 
> 标签：c#, .net, datacontractjsonserializer

我从不同的来源获取 json 格式的数据，并试图将它们映射到实现相同接口的对象。

json 变量在提要 1 中看起来像这样：

```
{"identifier": 232, "type": "Feed1"} 
```

我正在使用这个对象对其进行序列化：

```
 [DataContract]
    public class Class A : InterfaceA
    {

        [DataMember(Name = "identifier")]
        public int Id{ get; set; }

        [DataMember(Name = "type")]
        public FeedType Type { get; set; }
    }

    [DataContract]
    public enum FeedType
    {
        [EnumMember(Value = "Feed1")]
        FeedA,
        [EnumMember(Value = "Feed2")]
        FeedB,
        [EnumMember(Value = "Feed3")]
        FeedC
    } 
```

界面如下所示：

```
public interface InterfaceA
{
   int Id {get;set;}
   FeedType Type{get;set;}
} 
```

在提要 2 中，对象如下所示：

```
{"identifier": 232, "feedType": "A"} 
```

如何创建另一个实现相同接口并返回相同枚举的对象？如何设置 DataContract？

编辑：

我像这样序列化它

```
 var serializer = new DataContractJsonSerializer(ClassA);

            var ms = new MemoryStream(Encoding.Unicode.GetBytes(json));
            var serializedObject = serializer.ReadObject(ms); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:55:34.830

[我将使用Json.Net](http://json.codeplex.com/)给出答案（当然，如果您愿意使用不同的序列化程序）

```
string json = @"{""identifier"": 232, ""type"": ""Feed2""}";
var classa = JsonConvert.DeserializeObject<ClassA>(json); 
```

.

```
public interface InterfaceA
{
    int Id { get; set; }
    FeedType Type { get; set; }
}

public class ClassA : InterfaceA
{
    [JsonProperty("identifier")]
    public int Id{ get; set; }

    [JsonConverter(typeof(MyConverter))] //<--- !!!
    [JsonProperty("type")]
    public FeedType Type { get; set; }
}

[DataContract]
public enum FeedType
{
    [EnumMember(Value = "Feed1")]
    FeedA,
    [EnumMember(Value = "Feed2")]
    FeedB,
    [EnumMember(Value = "Feed3")]
    FeedC
} 
```

这是类型转换器类

```
public class MyConverter : Newtonsoft.Json.Converters.StringEnumConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(FeedType);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var field = objectType.GetFields()
            .First(f => f.GetCustomAttributes(false)
                         .Any(a=>a.GetType()==typeof(EnumMemberAttribute) &&
                                 ((EnumMemberAttribute)a).Value.Equals(reader.Value))); 

        return field.GetValue(null);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:35:37.747

所以如果你想要B级

```
[DataContract]
    public class ClassB : InterfaceA
    {

        [DataMember(Name = "identifier")]
        public int Id{ get; set; }

        [DataMember(Name = "type")]
        public FeedType Type { get; set; }
    }

var serializer = new DataContractJsonSerializer(ClassB);

            var ms = new MemoryStream(Encoding.Unicode.GetBytes(json));
            var serializedObject = serializer.ReadObject(ms); 
```

而已？！如果您想重用代码，可以使用泛型：

```
public T SerialiseObject<T>(string json) where T : InterfaceA
{
var serializer = new DataContractJsonSerializer(T);

var ms = new MemoryStream(Encoding.Unicode.GetBytes(json));
 return (T)serializer.ReadObject(ms);
} 
```

然后调用它：

```
SerialiseObject<ClassA>(json);
SerialiseObject<ClassB>(json); 
```

**更充分地解释**你不可能

```
public class ClassA : InterfaceA
{
 public ns1.FeedType Type{get; set;}
} 
```

和

```
public class ClassB : InterfaceA
{
  public ns2.FeedType Type{get; set;}
} 
```

这不会像`InterfaceA`预期的那样编译，`ns1.FeedType`或者`ns2.FeedType`

# asp.net - 使用复选框读取和更新数据库

> ID：13364395
> 
> 赞同：0
> 
> 时间：2012-11-13T16:16:25.483
> 
> 标签：asp.net

我有三个数据库字段，它们在数据库中保存一个字符或空值我想在我的表单上使用这三个字段作为复选框。如果它们相应的数据库字段不为空，则应检查它们，如果它们为空，则应取消选中它们。再次，如果我想对这些字段进行更改，我应该可以使用提交按钮来完成。

我一直通过使用文本框而不是复选框来实现上述功能，用户一直在输入不必要的文本

到目前为止，我一直在使用 sqldatareader 将数据读入文本字段

请指导我看一个类似的例子或者我该如何开始

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:21:41.663

这是使用 DataSet 执行此操作的代码示例，但原理是相同的（注意：第一个链接是我自己的博客文章）：

[http://www.codersbarn.com/post/2008/10/12/Bind-CheckBoxList-to-DataSet.aspx](http://www.codersbarn.com/post/2008/10/12/Bind-CheckBoxList-to-DataSet.aspx)

[在 CheckBoxList 控件中预选项目](http://www.4guysfromrolla.com/articles/050703-1.aspx)

# wpf - 为什么不更新具有自动宽度的 ListView 列？

> ID：13364398
> 
> 赞同：0
> 
> 时间：2012-11-13T16:16:38.773
> 
> 标签：wpf, listview, layout

我正在使用包含自定义单元格模板的 ListView 控件，以允许编辑该单元格中的值。当我将列设置为自动宽度时，它会在加载视图时只调整一次列的宽度。但是当内容更改时，宽度永远不会更新，即 TextBox 控件随着更多文本的输入而扩展。

当内容更改时，如何说服 ListView 控件使其列大小保持最新？我的意思是，如果自动调整大小的列跟不上，它有什么用？这在 Grid 控件中完美地工作，而不是在 ListView 中。

我创建了一个显示问题的小型演示应用程序。您可以在此处下载其源代码：（按 Ctrl+S 或使用文件/保存菜单命令下载完整存档）

[https://docs.google.com/open?id=0B8CN0ghdY1SdWFNyYWpxajNzY1E](https://docs.google.com/open?id=0B8CN0ghdY1SdWFNyYWpxajNzY1E)

# c# - 两个不同的种子产生相同的“随机”序列

> ID：13364401
> 
> 赞同：21
> 
> 时间：2012-11-13T16:16:55.500
> 
> 标签：c#, .net, random, integer

也许对此有一个非常合乎逻辑的解释，但我似乎无法理解为什么使用 .NET 的[Random Class (System)](https://docs.microsoft.com/en-us/dotnet/api/system.random?redirectedfrom=MSDN&view=netcore-3.1)`0`种子并`2,147,483,647`产生相同的“随机”序列。

快速代码示例：

```
var random1 = new Random(0);
var random2 = new Random(1);
var random3 = new Random(int.MaxValue); //2,147,483,647

var buffer1 = new byte[8];
var buffer2 = new byte[8];
var buffer3 = new byte[8];

random1.NextBytes(buffer1);
random2.NextBytes(buffer2);
random3.NextBytes(buffer3);

for (int i = 0; i < 8; i++)
{
    Console.WriteLine("{0}\t\t{1}\t\t{2}", buffer1[i], buffer2[i], buffer3[i]);
} 
```

输出：

```
26      70      26
12      208     12
70      134     76
111     130     111
93      64      93
117     151     115
228     228     228
216     163     216 
```

如您所见，第一个和第三个序列是相同的。有人可以向我解释一下吗？

**编辑**：显然，正如 alro 指出的那样，这些序列不一样。但它们非常相似。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T16:20:32.247

好吧，原因将与 Random 类用于从种子中派生伪随机序列的任何派生函数有关。因此，***真正的***答案是数学上的（而且超出了我的能力）。

确实-我不相信无论如何都可以保证两种不同的种子一定会产生不同的序列。

**编辑**好的-我将做bitbonk所做的-但请解释*原因*：

```
public Random(int Seed)
{
    int num = (Seed == -2147483648) ? 2147483647 : Math.Abs(Seed);
    int num2 = 161803398 - num;
    this.SeedArray[55] = num2;
    int num3 = 1;
    for (int i = 1; i < 55; i++)
    {
        int num4 = 21 * i % 55;
        this.SeedArray[num4] = num3;
        num3 = num2 - num3;
        if (num3 < 0)
        {
            num3 += 2147483647;
        }
        num2 = this.SeedArray[num4];
    }
    for (int j = 1; j < 5; j++)
    {
        for (int k = 1; k < 56; k++)
        {
            this.SeedArray[k] -= this.SeedArray[1 + (k + 30) % 55];
            if (this.SeedArray[k] < 0)
            {
                this.SeedArray[k] += 2147483647;
            }
        }
    }
    this.inext = 0;
    this.inextp = 21;
    Seed = 1;
} 
```

我们实际上不需要深入代码来了解原因 - 从上到下阅读代码，这些是上述代码在种子`0`和种子是时将存储的值`2147483647`：

```
int num = (Seed == -2147483648) ? 2147483647 : Math.Abs(Seed);
  =>  num is 0 and 2147483647

int num2 = 161803398 - num;
  => num2 is 161803398 and -1985680249

this.SeedArray[55] = num2;
  => this.SeedArray is as above in both cases

int num3 = 1;
for (int i = 1; i < 55; i++)
{
  int num4 = 21 * i % 55
  this.SeedArray[num4] = num3;

  => num4 is 21, SeedArray[21] is 1

num3 = num2 - num3
  => num3 is 161803397 and -1985680250

if(num3 < 0)
  num3 += 2147483647

  => num3 is 161803397 and 161803397 
```

在第一个循环之后，算法已经针对两个种子值收敛。

**编辑**

正如在问题上所指出的那样-序列不一样-但它们显然非常相似-在这里我们可以看到这种相似性的原因。

# java - 模拟带参数的构造函数

> ID：13364406
> 
> 赞同：102
> 
> 时间：2012-11-13T16:17:10.363
> 
> 标签：java, junit, mocking, mockito, powermock

我有一堂课如下：

```
public class A {
    public A(String test) {
        bla bla bla
    }

    public String check() {
        bla bla bla
    }
} 
```

`A(String test)`构造函数中的逻辑`check()`是我试图模拟的东西。我想要任何调用，例如：`new A($$$any string$$$).check()`返回一个虚拟字符串`"test"`。

我试过：

```
 A a = mock(A.class); 
 when(a.check()).thenReturn("test");

 String test = a.check(); // to this point, everything works. test shows as "tests"

 whenNew(A.class).withArguments(Matchers.anyString()).thenReturn(rk);
 // also tried:
 //whenNew(A.class).withParameterTypes(String.class).withArguments(Matchers.anyString()).thenReturn(rk);

 new A("random string").check();  // this doesn't work 
```

但这似乎不起作用。`new A($$$any string$$$).check()`仍在通过构造函数逻辑而不是获取`A`.

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-13T17:32:43.033

您发布的代码适用于我最新版本的 Mockito 和 Powermockito。也许你还没有准备好A？试试这个：

爪哇

```
public class A {
     private final String test;

    public A(String test) {
        this.test = test;
    }

    public String check() {
        return "checked " + this.test;
    }
} 
```

MockA.java

```
import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.Matchers.equalTo;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mockito;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(A.class)
public class MockA {
    @Test
    public void test_not_mocked() throws Throwable {
        assertThat(new A("random string").check(), equalTo("checked random string"));
    }
    @Test
    public void test_mocked() throws Throwable {
         A a = mock(A.class); 
         when(a.check()).thenReturn("test");
         PowerMockito.whenNew(A.class).withArguments(Mockito.anyString()).thenReturn(a);
         assertThat(new A("random string").check(), equalTo("test"));
    }
} 
```

两个测试都应该通过 mockito 1.9.0、powermockito 1.4.12 和 junit 4.8.2

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-11-13T17:12:50.717

据我所知，你不能用 mockito 来模拟构造函数，只能用方法来模拟。但是根据 Mockito google code page 上的 wiki，有一种方法可以通过在您的类中创建一个返回该类的新实例的方法来模拟构造函数的行为。然后你可以模拟出那个方法。以下是[直接来自 Mockito wiki 的摘录](https://code.google.com/p/mockito/wiki/MockingObjectCreation)：

> **模式 1 - 使用单行方法创建对象**
> 
> 要使用模式 1（测试一个名为 MyClass 的类），您将替换一个调用，例如
> 
> ```
>  Foo foo = new Foo( a, b, c ); 
> ```
> 
> 和
> 
> ```
>  Foo foo = makeFoo( a, b, c ); 
> ```
> 
> 并写一个单行方法
> 
> ```
>  Foo makeFoo( A a, B b, C c ) { 
>         return new Foo( a, b, c );
>    } 
> ```
> 
> 重要的是不要在方法中包含任何逻辑；只是创建对象的一行。这样做的原因是方法本身永远不会进行单元测试。
> 
> 当你来测试这个类时，你测试的对象实际上是一个 Mockito spy，这个方法被覆盖，返回一个 mock。因此，您正在测试的不是类本身，而是它的一个非常轻微的修改版本。
> 
> 您的测试类可能包含以下成员
> 
> ```
>  @Mock private Foo mockFoo;
>   private MyClass toTest = spy(new MyClass()); 
> ```
> 
> 最后，在您的测试方法中，您模拟了对 makeFoo 的调用，如下所示
> 
> ```
>  doReturn( mockFoo )
>       .when( toTest )
>       .makeFoo( any( A.class ), any( B.class ), any( C.class )); 
> ```
> 
> 如果要检查传递给构造函数的参数，可以使用比 any() 更具体的匹配器。

如果您只是想返回您班级的模拟对象，我认为这应该适合您。在任何情况下，您都可以在此处阅读有关模拟对象创建的更多信息：

[http://code.google.com/p/mockito/wiki/MockingObjectCreation](http://code.google.com/p/mockito/wiki/MockingObjectCreation)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2020-02-27T09:23:48.090

使用 Mockito，您可以使用`withSettings()`. 例如，如果`CounterService`需要 2 个依赖项，您可以将它们作为模拟传递：

```
 UserService userService = Mockito.mock(UserService.class);
 SearchService searchService = Mockito.mock(SearchService.class);   
 CounterService counterService = Mockito.mock(CounterService.class, withSettings().useConstructor(userService, searchService)); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-12-14T11:06:59.413

不使用 Powermock .... 请参阅下面基于 Ben Glasser 回答的示例，因为我花了一些时间才弄清楚..希望可以节省一些时间...

**原班：**

```
public class AClazz {

    public void updateObject(CClazz cClazzObj) {
        log.debug("Bundler set.");
        cClazzObj.setBundler(new BClazz(cClazzObj, 10));
    } 
} 
```

**修改类：**

```
@Slf4j
public class AClazz {

    public void updateObject(CClazz cClazzObj) {
        log.debug("Bundler set.");
        cClazzObj.setBundler(getBObject(cClazzObj, 10));
    }

    protected BClazz getBObject(CClazz cClazzObj, int i) {
        return new BClazz(cClazzObj, 10);
    }
 } 
```

**测试班**

```
public class AClazzTest {

    @InjectMocks
    @Spy
    private AClazz aClazzObj;

    @Mock
    private CClazz cClazzObj;

    @Mock
    private BClazz bClassObj;

    @Before
    public void setUp() throws Exception {
        Mockito.doReturn(bClassObj)
               .when(aClazzObj)
               .getBObject(Mockito.eq(cClazzObj), Mockito.anyInt());
    }

    @Test
    public void testConfigStrategy() {
        aClazzObj.updateObject(cClazzObj);

        Mockito.verify(cClazzObj, Mockito.times(1)).setBundler(bClassObj);
    }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-01-18T08:38:21.280

从[Mockito 3.5.0 版](https://javadoc.io/static/org.mockito/mockito-core/3.7.7/org/mockito/Mockito.html#mocked_construction)开始并使用`InlineMockMaker`，您现在可以模拟对象构造：

```
 try (MockedConstruction mocked = mockConstruction(A.class)) {
   A a = new A();
   when(a.check()).thenReturn("bar");
 } 
```

在`try-with-resources`构造内部，**所有**对象构造都返回一个模拟。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-04T20:02:20.087

Mockito 在测试最终、静态和私有方法时存在局限性。

使用 jMockit 测试库，您可以非常简单直接地做一些事情，如下所示：

java.io.File 类的模拟构造函数：

```
new MockUp<File>(){
    @Mock
    public void $init(String pathname){
        System.out.println(pathname);
        // or do whatever you want
    }
}; 
```

*   公共构造函数名称应替换为 $init
*   抛出的参数和异常保持不变
*   返回类型应定义为 void

模拟一个静态方法：

*   从方法模拟签名中删除静态
*   方法签名保持不变，否则

# php - 清漆 ESI：奇怪的字符

> ID：13364410
> 
> 赞同：2
> 
> 时间：2012-11-13T16:17:22.347
> 
> 标签：php, varnish, esi

我在使用 Varnish ESI（Edge Side Includes）时遇到问题：有时使用 ESI 的部分会显示奇怪的字符，如下图所示：

![带 ESI 的部分有时会显示奇怪的字符](../Images/cc94d88b87a8edefa8f1585185814e0f.png)

我怎样才能解决这个问题？有趣的是，有时会出现这个问题，但有时不会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T11:49:49.533

这看起来像是 Varnish 中 gzip 的一个奇怪错误。如果您通过 ESI 获得 gzipped 块并且它不在缓存中（MISS），您会得到这个奇怪的符号。如果您从缓存中获取此块，则一切正常。解决方案是为内部路由禁用 gzip：

```
if (req.url ~ "/_internal") {
    # Telling ESI that we do not support gzip
    remove req.http.Accept-Encoding; 
```

......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:52:20.740

看起来你有双重压缩 ESI 内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:15:21.527

[本章](https://www.varnish-cache.org/docs/3.0/phk/gzip.html#gzip-and-esi)解释了在 ESI 处理过程中 Varnish 如何与 gzip 一起工作。我真的很喜欢这句话：

> 理论上，并希望在实践中，当您启用 ESI 时，您在上面阅读的所有内容也应该适用，如果不是，您应该报告它是一个错误。

长话短说，Varnish 是如何工作的：在对页面的第一次请求（缓存未命中）期间，Varnish 直接从 Web 服务器呈现页面。之后 - 页面被放入缓存存储中，因此对于下一个请求，它将从存储中加载（缓存命中）。

不知何故，在第一个请求页面呈现**ungzipped**，但被放入存储**gzipped**。这就是bug发生的地方。由于 nginx 总是尝试对内容进行 gzip，因此我们在未压缩的页面中对包含（在 ESI 期间）进行了 gzip 压缩。

提到的文档章节中解释了此行为：

> 在查找过程中，我们忽略了对象 Vary: 字符串中的任何“接受编码”，为了避免对象的 gzip 和 gunzip 版本，varnish 可以按需进行 gunzip。（我们在查找时实现了这一点，因此存储在持久存储中的任何对象都可以在启用或不启用 gzip 支持的情况下使用。）

因此，这个问题可以通过一种尖峰来“解决”——通过强制 Varnish 在 ESI 处理期间始终发送未压缩的内容（正如klipach[的](https://stackoverflow.com/users/1777361/klipach)[答案之一所述](https://stackoverflow.com/a/13564267/970721)）：

```
# www.vcl

sub vcl_recv {
    # ...
    if (req.url ~ "/_internal") {
        # Telling ESI that we do not support gzip
        remove req.http.Accept-Encoding;

        return(lookup);
    }
    # ...
} 
```

# objective-c - 从 nsdictionary 中获取 nsdictionary 和 nsstring 值

> ID：13364412
> 
> 赞同：1
> 
> 时间：2012-11-13T16:17:31.953
> 
> 标签：objective-c, macos, cocoa, nsdictionary, nsmutabledictionary

我有一个返回`NSDictionary`命名数据的函数。它包含 2 个对象：一个`NSDictionary`带有 key的对象`currency_data`和一个`NSString`带有 key 的对象`time`。

我想通过：

*   `time`带有新`NSString`对象键的字符串值
*   具有变量`NSDictionary`键的对象。`currency_data``NSMutableDictionary`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:51:25.160

取决于您是否使用ARC。使用 ARC，您的示例应该可以工作，没有 ARC，您至少需要保留字符串值。

```
NSDictionary *dataDict = [foo data];
NSMutableDictionary *currency_dict= [[NSMutableDictionary alloc] initWithDictionary:dataDict[@"currency_data"]];
NSString *time = [data[@"time"] retain]; 
```

我认为[anoop-vaidy 的](https://stackoverflow.com/users/1395941/anoop-vaidya)意思是，如果您需要一个可变字典，请直接在数据调用中创建它并将其传递出去。另一个注意事项：您可以更好地利用您对数据结构的了解。不要使用 2 个键构建字典，而是使用第一个值（时间字符串）作为键，使用第二个值（货币字典）作为值。您可以很容易地访问字典中的值和键

```
NSArray *value = dict.allValues;
NSArray *keys = dict.allKeys; 
```

# javascript - 如何在返回数据之前隐藏表类？

> ID：13364414
> 
> 赞同：-1
> 
> 时间：2012-11-13T16:17:41.940
> 
> 标签：javascript, html, quickbase

如代码所示。用户将数据输入到 6 个输入框之一。查询结果返回（例如`<td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="PROC_CODE" name="PROC_CODE">&nbsp;</td>`：）

`<td><tr>`除非返回查询结果，否则我需要隐藏空白。

代码很长，但相当简单直接。基本上用户查询1条记录，显示1条记录。用户查询 4 ​​条记录 4 条记录显示。

我已经让数据库工作并提取了我需要的结果我只是不知道如何隐藏空白表数据

```
enter code here

<body style="text-align: center">
  <a name="top"></a>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
   <tr>
    <!-- xxxxxxx Logo -->
    <td height="50" width="150">
     <a href="http://xxxxxxx.xxxxxxx.com"><img src="http://xxxxxxx.xxxxxxx.com/contentowners/xxxxxxx_template/js/images/xxxxxxx_50.gif" alt="xxxxxxx" width="150"
     height="50" border="0"></a>
    </td>
    <!-- xxxxxxx Search -->
    <td height="50" align="right">
     <iframe src="/provider_services/search.html" name="search" id="search" width="475" height="50" marginwidth="0" marginheight="0" align="right" scrolling="no" frameborder="0"></iframe>

</td>
   </tr>
   <tr>
    <!-- Current Date -->
    <td height="28" align="center" bgcolor="#CCFF66" class="smblue">
<script language="JavaScript" type="text/javascript" src="http://xxxxxxx.xxxxxxx.com/contentowners/xxxxxxx_template/js/date_short.js">
</script>

    </td>
    <td height="28" bgcolor="#99CC33">
     <!-- Top Navigation (optional for your site) -->
    <table border="0" cellspacing="0" cellpadding="0">
      <tr>
       <td class="topnav" id="TOPNAV">       </td>
      </tr>
     </table>
    </td>
   </tr>
  </table>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
   <tr>
    <!-- left col -->
    <td width="150" valign="top" bgcolor="#ADD1EE">
     <table width="100%" cellspacing="0" cellpadding="0">
      <tr>
       <!-- Insert your site name here -->
       <!-- Link this text to your homepage or main index -->
       <h5 align="center" class="white"><img src="../../images/psc_logo_150x150.jpg" width="150" height="150"></h5></td>
<body onLoad="loadCommon();" style="text-align: center">
<script src="../../psc_nav_bar.js" language="javascript" type="text/javascript"></script>
<td class="leftnav" id="LEFTNAV">
</table>
</td>

    <!--center col -->
    <td valign="top">
     <!-- begin content table -->
     <form action="" method="post" name="frmTracking" id="frmTracking" onReset="clearControls(this);">
<input type="hidden" name="recordID" value="">
<p>
     <br>  <table width="100%" border="0" align="center">
  <tr align="left">
    <td align="left"> <p><U><strong>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx <br></p>
</td>
  </tr>
</table>
  <table width="100%" border="0" align="center">
  <tr align="left">
    <td align="left">
    <input name="searchRecord" id="searchRecord" type="text"  size="8" maxlength="8">
<input name="searchRecord" id="searchRecord" type="text"  size="8" maxlength="8">
<input name="searchRecord" id="searchRecord" type="text" size="8" maxlength="8">
<input name="searchRecord" id="searchRecord" type="text"  size="8" maxlength="8">
<input name="searchRecord" id="searchRecord" type="text"  size="8" maxlength="8">
<input name="searchRecord" id="searchRecord" type="text"  size="8" maxlength="8">
</td>
  </tr>
    <td>  <div id="TRACKBUTTONS" align="center">
          <input type="button" name="btnFind" value="Find"
                                                                class="cmdBtn" onClick="return getDBRecord(this.form);"><input type="button" name="reset_form" value="Clear" onclick="this.form.reset(); history.go(0) "   >

         <!--  <input type="button" name="btnSave" value="Save" class="cmdBtn" title="Save current entry" onClick="return updateDBRecord(this.form);"> -->
        </div></td>

</table>
  <table width="100%" border="0" cellpadding="5" cellspacing="0">
    <tr bgcolor="#F0F0F0">
      <td colspan="5" align="center" class="th2">Procedure Code Record</td>
    </tr>
     <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure Code </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="PROC_CODE" name="PROC_CODE">&nbsp;</td>

    </tr>
    <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Medicare Advantage </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="MEDICARE" name="MEDICARE">&nbsp;</td>

    </tr>
            <tr>
             <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="STATUS">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Specialty</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" class="tLBL1l" id="xxxxxxx_ID">&nbsp;</td>

            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Precert Type

              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">
              <td width="55%" class="tLBL1l" id="SYS_APP">&nbsp;</td>
      &nbsp;</td>
              <td class="tLBL1l" id="DETAILS3">&nbsp;</td>
              <td width="1%" class="tdFieldHeadingsR1">&nbsp;</td>
              <td width="5%" class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Review Type:</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
     <td class="tLBL1l" id="SUBMITTER">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Guidelines:</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="EMAIL">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td4">&nbsp;</td>

           <tr bgcolor="#F0F0F0">
      <td colspan="5" align="center" class="th2">Procedure Code Record1</td>
    </tr>
     <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure Code </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="PROC_CODE1" name="PROC_CODE">&nbsp;</td>

    </tr>
    <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Medicare Advantage </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="MEDICARE1" name="MEDICARE">&nbsp;</td>

    </tr>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="STATUS1">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Specialty</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" class="tLBL1l" id="xxxxxxx_ID1">&nbsp;</td>

            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Precert Type

              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">
              <td width="55%" class="tLBL1l" id="SYS_APP1">&nbsp;</td>
      &nbsp;</td>
              <td class="tLBL1l" id="DETAILS31">&nbsp;</td>
              <td width="1%" class="tdFieldHeadingsR1">&nbsp;</td>
              <td width="5%" class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Review Type:</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
     <td class="tLBL1l" id="SUBMITTER1">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Guidelines:</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="EMAIL1">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td4">&nbsp;</td>

    <!--3rd set -->
              <tr bgcolor="#F0F0F0">
      <td colspan="5" align="center" class="th2">Procedure Code Record2</td>
    </tr>
     <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure Code </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="PROC_CODE2" name="PROC_CODE">&nbsp;</td>

    </tr>
    <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Medicare Advantage </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="MEDICARE2" name="MEDICARE">&nbsp;</td>

    </tr>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="STATUS2">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Specialty</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" class="tLBL1l" id="xxxxxxx_ID2">&nbsp;</td>

            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Precert Type

              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">
              <td width="55%" class="tLBL1l" id="SYS_APP2">&nbsp;</td>
      &nbsp;</td>
              <td class="tLBL1l" id="DETAILS32">&nbsp;</td>
              <td width="1%" class="tdFieldHeadingsR1">&nbsp;</td>
              <td width="5%" class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Review Type:</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="SUBMITTER2">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Guidelines:</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="EMAIL2">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td4">&nbsp;</td>

              <!--4th set -->
                          <tr bgcolor="#F0F0F0">
      <td colspan="5" align="center" class="th2">Procedure Code Record3</td>
    </tr>
     <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure Code </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="PROC_CODE3" name="PROC_CODE">&nbsp;</td>

    </tr>
    <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Medicare Advantage </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="MEDICARE3" name="MEDICARE">&nbsp;</td>

    </tr>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="STATUS3">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Specialty</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" class="tLBL1l" id="xxxxxxx_ID3">&nbsp;</td>

            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Precert Type

              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">
              <td width="55%" class="tLBL1l" id="SYS_APP3">&nbsp;</td>
      &nbsp;</td>
              <td class="tLBL1l" id="DETAILS33">&nbsp;</td>
              <td width="1%" class="tdFieldHeadingsR1">&nbsp;</td>
              <td width="5%" class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Review Type:</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
     <td class="tLBL1l" id="SUBMITTER3">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Guidelines:</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="EMAIL3">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td4">&nbsp;</td>

              <!--5th set -->
                          <tr bgcolor="#F0F0F0">
      <td colspan="5" align="center" class="th2">Procedure Code Record4</td>
    </tr>
     <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure Code </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="PROC_CODE4" name="PROC_CODE">&nbsp;</td>

    </tr>
    <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Medicare Advantage </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="MEDICARE4" name="MEDICARE">&nbsp;</td>

    </tr>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="STATUS4">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Specialty</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" class="tLBL1l" id="xxxxxxx_ID4">&nbsp;</td>

            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Precert Type

              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">
              <td width="55%" class="tLBL1l" id="SYS_APP4">&nbsp;</td>
      &nbsp;</td>
              <td class="tLBL1l" id="DETAILS34">&nbsp;</td>
              <td width="1%" class="tdFieldHeadingsR1">&nbsp;</td>
              <td width="5%" class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Review Type:</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
     <td class="tLBL1l" id="SUBMITTER4">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Guidelines:</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="EMAIL4">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td4">&nbsp;</td>

              <!--6th set -->

                                     <tr bgcolor="#F0F0F0">
      <td colspan="5" align="center" class="th2">Procedure Code Record5</td>
    </tr>
     <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure Code </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="PROC_CODE5" name="PROC_CODE">&nbsp;</td>

    </tr>
    <tr bgcolor="#F0F0F0">
      <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Medicare Advantage </td>
      <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="MEDICARE5" name="MEDICARE">&nbsp;</td>

    </tr>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Procedure</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="STATUS5">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Specialty</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
      <td width="55%" class="tLBL1l" id="xxxxxxx_ID5">&nbsp;</td>

            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Precert Type

              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">
              <td width="55%" class="tLBL1l" id="SYS_APP5">&nbsp;</td>
      &nbsp;</td>
              <td class="tLBL1l" id="DETAILS35">&nbsp;</td>
              <td width="1%" class="tdFieldHeadingsR1">&nbsp;</td>
              <td width="5%" class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Review Type:</td>
              <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
     <td class="tLBL1l" id="SUBMITTER5">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td">&nbsp;</td>
            <tr>
              <td align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">Guidelines:</td>
              <td align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="EMAIL5">&nbsp;</td>
              <td class="tdFieldHeadingsR1">&nbsp;</td>
              <td class="tLBL1l" id="td4">&nbsp;</td>
    <!-- <tr id="rowTIN">
      <td align="right" class="tdFieldHeadingsR">Change Status</td>
      <td class="tdFieldHeadingsR">&nbsp;</td>
      <td colspan="3" class="tdFieldHeadingsR"><!-- <input name="txtTinPin" type="text" title="TIN/PIN" value="" size="12"> -->
       <!-- <label for="txtTinPin"></label>
        <select name="txtTinPin2" size="1" id="txtTinPin">
          <option value="Open" selected>Open</option>
          <option value="Closed">Closed</option>
      </select></td>
    </tr>

    <tr id="rowControlNumber">
      <td align="right" valign="top" class="tdFieldHeadingsR">Handler Notes</td>
      <td class="tdFieldHeadingsR">&nbsp;</td>
      <td colspan="3" class="tdFieldHeadingsR"><textarea name="txtControl" cols="50" rows="8" title="Handler Notes"></textarea></td>
    </tr> -->
    <tr align="center">
      <td colspan="5"> 
        <p></p>
       </td>
    </tr>
  </table>
</form>
     <table width="100%" border="0" cellspacing="0" cellpadding="10">

      <tr>
       <td valign="top">
        &nbsp;<p align="center">
          <img src="http://xxxxxxx.xxxxxxx.com/contentowners/xxxxxxx_template/js/images/up_arrow.gif" alt="" width="12" height="13" border="0" align="middle">&nbsp;<a href="#top" class="top">top of page</a></td>

                   <!-- Right column for boxes -->
      </tr>
     </table>

                 <!-- end content table -->
    </td>
   </tr>
   <!-- end center column -->

   <tr>
    <td colspan="2">
     <hr size="1">
    </td>
   </tr>
  </table>

     <a href="http://www.xxxxxxx.com/">
<img src=
     "http://xxxxxxx.xxxxxxx.com/contentowners/xxxxxxx_template/js/images/logo_footer.gif" alt="xxxxxxx" width="149" height="65" border="0" align="right"></a>

<!-- begin footer -->
<p align="left" class="pubinfo" id="PUBINFO">
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:19:32.190

给表一些 id 并调用 $(tableId).hide(); （可选）您可能希望显示表格，但在返回数据之前禁用它

# iphone - 扩展 NSURLCache 不能使用参数

> ID：13364419
> 
> 赞同：0
> 
> 时间：2012-11-13T16:17:56.527
> 
> 标签：iphone, objective-c, ios, nsurlcache

我有一个类 URLCache 扩展 NSURLCache

在 URLCache.m

```
+ (void)initialize {

    NSString *_cacheSubFolder = nil;
    NSUInteger _cleanCacheFilesInterval;
    if (_pageType == FirstPage) {
        _cleanCacheFilesInterval = FirstPageCleanCacheFilesInterval;
        _cacheSubFolder = @"/WebCatchedFiles/FirstPage/";
    }else if (_pageType == SecondPage){
        _cleanCacheFilesInterval = SecondPageCleanCacheFilesInterval;
        _cacheSubFolder = @"/WebCatchedFiles/SecondPage/";
    }else if (_pageType == ThirdPage){
        _cleanCacheFilesInterval = ThirdPageCleanCacheFilesInterval;
        _cacheSubFolder = @"/WebCatchedFiles/ThirdPage/";
    }

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    cacheDirectory = [[paths objectAtIndex:0] stringByAppendingString:_cacheSubFolder];
//    cacheDirectory = [cacheDirectory stringByAppendingString:@"/"];
    removeFilesInCacheInDueTime(cacheDirectory, _cleanCacheFilesInterval);
    createDirectry(cacheDirectory);
    supportSchemes = [NSSet setWithObjects:@"http", @"https", @"ftp", nil];
} 
```

如果 Am 调用 URLCache.m 那么 A 需要将参数 _pageType 发送到 URLCache，我不知道如何发送 _pageType。我试过了

```
-(void)setPageType:(NSUInteger)pageType{
    _pageType = pageType;
} 
```

但每次在上午

```
URLCache *sharedCache = (URLCache *)[NSURLCache sharedURLCache];
    [sharedCache setPageType:self.naviType]; 
```

得到

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSURLCache setPageType:]：无法识别的选择器发送到实例 0xabd1470”

为什么不能将参数发送到 NSURLCache？

如何发送_pageType？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:07:20.433

```
[NSURLCache sharedURLCache] 
```

返回共享 URL 缓存实例。如果您尚未使用 设置自定义实例`setSharedURLCache:`，则这是一个`NSURLCache`对象。

类型`(URLCache *)`转换不会更改对象，也不会将其“转换”为`URLCache`对象。你可以用

```
NSLog(@"class = %@", [sharedCache class]); 
```

这就是`[sharedCache setPageType:...]`引发异常的原因。

另请注意，这`initialize`是一个*特殊的类方法*，在创建该类的任何实例之前运行一次（很好的解释和链接：[Objective-C：init vs initialize](https://stackoverflow.com/questions/6191480/objective-c-init-vs-initialize)）。`_pageType`因此，检查in是没有意义的`initialize`。

所以你必须首先创建你的`URLCache`类的一个实例，然后你可以将它设置为共享实例

```
[NSURLCache setSharedURLCache:...] 
```

# c - 将十进制数转换为分数

> ID：13364425
> 
> 赞同：2
> 
> 时间：2012-11-13T16:18:26.773
> 
> 标签：c, math

我正在尝试将十进制数转换为其分数。小数点后最多有 4 位数字。例如：- 12.34 = 1234/100 12.3456 = 123456/10000

我的代码：-

```
#include <stdio.h>
int main(void) {
  double a=12.34;
  int c=10000;
  double b=(a-floor(a))*c;
  int d=(int)floor(a)*c+(int)b; 
  while(1) {
     if(d%10==0) {
    d=d/10;
    c=c/10;
 }
 else break;
  }
  printf("%d/%d",d,c);
 return 0;
} 
```

但我没有得到正确的输出，十进制数只有双精度。请指导我应该做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:26:27.707

如果您的浮点数是`x`，那么超过 10000 的分数的分子将是 的整数部分`(x + 0.00005) * 10000`。是否要将分数简化为最简单的项（即除以分子和分母的 gcd）取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:51:36.163

```
#include <stdio.h>

int main(void) {
    double a = 12.34;
    int c = 10000;
    double b = (a - floor(a)) * c;
    int d = (int)floor(a) * c + (int)(b + .5f); 
    printf("%f %d\n", b, d);

    while(1) {
       if(d % 10 == 0) {
           d = d / 10;
           c = c / 10;
       }
       else break;
    }
    printf("%d/%d\n", d, c);
    return 0;
} 
```

问题是`b`得到了 3400.00，但是当你`(int) b`得到 3399 时，你需要添加`0.5`以便数字可以截断为 3400。

获得 3400.00 与拥有 3400 不同，3400.00 意味着该数字四舍五入为 3400，这就是为什么当您执行 (int) 3400.00 时，它假定最接近的整数（小于您要转换的数字）是 3399，但是，当您添加0.5 到那个数字，最后一个最接近的整数现在是 3400。

如果您想更深入地了解浮点运算，请阅读[每个计算机科学家应该了解的关于浮点运算的知识](https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-15T22:56:27.027

我的解决方案很简单，“懒惰”，通过迭代运行，没什么花哨的。

在大多数拥有不错数学库的语言中，您只需要算法本身即可。

但是在 bc 中，您需要实现简单的功能，例如

```
int() to return integer part of a number ,
abs() to return absolute value ,
float() to return floating part of a number ,
round() to round to nearest integer. 
```

如果在 (1/eps) 次迭代后没有找到任何东西，则循环以最后一个结果中断。

```
eps=10^-4 /*Tweak for more or less accuracy */

define int(x) {
  auto s ;
  s = scale ;
  scale = 0 ;
  x /= 1 ;
  scale = s ;
  return x ;
}
define round(x) { return int(x+.5-(x<0)) ; }
define abs(x) { if ( x < 0 ) x=-x ; return x ; }
define float(x) { return abs(x-int(x)) ; }

define void frac(x) {
    auto f, j, n, z ;
    f = float(x) ;    
    j = 1 / eps ;
    z = .5 ;
    if ( f != 0 ) {
        while ( ( n++ < j ) && ( abs( z - round(z) ) > eps ) ) z = n / f ;
        n -= 1 ;
        if ( x < 0 ) n = -n ;
        x = int(x)
        z = round(z) ;
        print n + x*z , "/" , z , " = "
        if ( x != 0 )  print x , " + " , n , "/" , z , " = "
    }
    print x+n/z , "\n" ;
} 
```

使用标准精度（eps=.0001），您可以得到：

```
frac(-.714285)
-5/7 = -.71428571428571428571

sqrt(2)
1.414213562373
frac(sqrt(2))
19601/13860 = 1 + 5741/13860 = 1.414213564213

6-7/pi
3.77183080
eps=.000001 ; frac(6-7/pi)
1314434/348487 = 3 + 268973/348487 = 3.77183080 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-17T03:48:21.777

这是我使用的算法。这是一个迭代过程，其工作原理如下：

1.  分子的初始近似值为 1，分母为 1 除以浮点值的小数部分。例如，将 0.06 转换为分数时，分母 = 1/0.06 = 16.66666667（四舍五入为 17），因此初始近似值为 1/17。
2.  计算浮点值和当前近似值之间的差。例如，差值为 1/17 - 0.06 = 0.058824 - 0.06 = -0.001176。
3.  如果差的绝对值小于定义的容差（即 0.000005），则终止迭代。
4.  使用在步骤 2 中计算的差值来改进分数的近似值。这是通过将差值转换为分数并添加（或减去）到当前近似值来完成的。在该示例中，负差异表示低近似值 - 因此需要将差异添加到当前近似值中。差异分数是分子 = 1 和分母 = 1/0.001176 = 850 - 分数的差异是 1/850。新的近似值将是 (1/17) + (1/850) = (850*1 + 17*1)/(850*17) = 867/14450。
5.  重复步骤 2 到 4，直到找到解决方案。
6.  找到解决方案后，可以减少分数。例如，867/14450 正好是 0.06，迭代过程终止。867/14450可以减少到3/50。

这种方法的一些特点是：

*   如果得到的分数是 1/anything，则第一个近似值将是精确的。例如，将 0.25 转换为分数，第一个近似值将是 1/4。因此不需要进一步的迭代。
*   在 1,000,000 个测试用例中的大多数（> 80%）中，收敛发生在 2 次或更少的迭代中。
*   对于所有测试用例，最大迭代次数为 3。

我在 github 上发布了这个算法的代码——https: [//github.com/tnbezue/fraction](https://github.com/tnbezue/fraction)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T16:30:01.393

这是个有趣的问题。我认为您最好从阅读计算“最大公约数”的倍数方法开始（[http://en.wikipedia.org/wiki/Greatest_common_divisor](http://en.wikipedia.org/wiki/Greatest_common_divisor)是一个很好的来源）。

实现一个快速而肮脏的算法，像用笔和纸一样进行这些计算，然后研究双精度数的表示方式（符号、指数、尾数）并改进您的算法以利用这种表示。

可悲的是，如果不编写您的代码，我将无能为力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-29T06:00:07.127

用 c++ 创建的一种算法，可以将小数转换为分数。

```
#include <iostream>
using namespace std;

// converts the string half of the inputed decimal number into numerical values
void converting (string decimalNumber, float& numerator, float& denominator )

{
float number;
string valueAfterPoint = decimalNumber.substr(decimalNumber.find(".") + 1,((decimalNumber.length() -1) )); // store the value after the decimal into a valueAfterPoint
cout << valueAfterPoint<< " "<< endl;
int length = valueAfterPoint.length(); //stores the length of the value after the decimal point into length

 numerator = atof(valueAfterPoint.c_str()); // converts the string type decimal number into a float value and stores it into the numerator

// loop increases the decimal value of the numerator and the value of denominator by multiples of ten as long as the length is above zero of the decimal

cout << length<< endl;
for (; length > 0; length--)
{
    numerator *= 10;

}
do
    denominator *=10;
    while  (denominator < numerator);

}

// simplifies the the converted values of the numerator and denominator into simpler values for          an easier to read output
  void simplifying (float& numerator, float& denominator)
{
int maximumNumber = 9; //Numbers in the tenths place can only range from zero to nine so the maximum number for a position in a poisitino for the decimal number will be nine

bool isDivisble; // is used as a checker to verify whether the value of the numerator has the       found the dividing number that will a value of zero

// Will check to see if the numerator divided denominator is will equal to zero

if(int(numerator) % int(denominator) == 0)
{
    numerator /= denominator;
    denominator = 1;
    return;
}

//check to see if the maximum number is greater than the denominator to simplify to lowest form
while (maximumNumber < denominator)
{
    maximumNumber *=10;
 }

// the maximum number loops from nine to zero. This conditions stops if the function isDivisible is true
for(; maximumNumber > 0; maximumNumber --)
{

    isDivisble = ((int(numerator) % maximumNumber == 0) && int(denominator)% maximumNumber == 0);
    cout << numerator << denominator <<" " <<endl;
    if(isDivisble)
    {
        numerator /= maximumNumber;  // when is divisible true numerator be devided by the max    number value for example 25/5 = numerator = 5

        denominator /= maximumNumber; //// when is divisible true denominator be devided by the max number value for example 100/5 = denominator = 20

    }
    // stop value if numerator and denominator is lower than 17 than it is at the lowest value
    int stop = numerator + denominator;

    if (stop < 17)
    {
        return;
    }
}
}
  int main()
{
string decimalNumber;
float numerator = 0;
float denominator = 1;

cout << "Enter the decimal number";
cin >> decimalNumber;

//convert function
converting(decimalNumber, numerator, denominator);

//call simplyfication funcition
simplifying(numerator, denominator);

cout<< "Fraction: "<< numerator << "/" << denominator<< endl;
 return 0; 

} 
```

# javascript - 使用 nodeJS 和 HighStocks（或 Google Annotation Time Line）设计 Web 应用程序

> ID：13364427
> 
> 赞同：1
> 
> 时间：2012-11-13T16:18:29.083
> 
> 标签：javascript, node.js, highcharts, google-visualization, highstock

嗨，我是 nodeJS 的新手，但我有兴趣制作一个基于浏览器的应用程序，该应用程序能够使用 HighStocks API 或 Google Annotation Time Line 绘制图形）。

我如何将 nodeJS 和 API 绑定在一起，有博客吗？很难找到 nodeJS 如何与 HighStocks API 或 Annotation Time Line 一起使用。任何带有代码解释的博客的帮助或指导都将非常有帮助！

希望大部分工作都是使用 javascript 完成的。

**编辑**：如果我已经在调用 HighStocks API 或 Google API，我还需要使用 Dojo 吗？

**编辑1**：这是供个人使用，并提高技能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:33:04.560

nodeJS 用于服务器端开发。如何将其他 API 与 nodeJS 组合在一起取决于您，我真的不知道这些 API 是做什么的，所以很难说。看起来它们是用于数据可视化的，如果是这样，您可能会使用它们在浏览器上运行的客户端代码，而不是在节点中。

通常使用 node 你正在编写 Web 服务；即处理http请求。您可以简单地使用它来创建类似 restful 的服务来获取数据，例如 example.com/application/getStocks?user=bob 可能会返回一些 xml 或 json 数据。如果您愿意，您可以使用 node 来为您的整个网站提供服务，例如 example.com/somepage 映射到 node 中返回 HTML 页面的函数。我从来没有这样做过，但我相信这是可能的。

无论如何，一个典型的架构可能是

```
--webserver(e.g. apache): serves up pages w/ HTML & client-side javascript)
--NodeJS : handles specific HTTP requests and serves back repsonses (likely as xml or JSON)
--Browser : where the client side javascript code executes, to consume webservices and API's 
```

过程：

```
1\. User enters URL to a page in browser; page is served up by web server
2\. javascript in page makes XHR request to a webservice url
3\. the url maps to a function in node.
4\. node returns response data (probably xml or json)
5\. client js in page handles the response data (via callback function)
6\. client code calls 3rd party API (again via XHR), passing along pertinent values from the node response data
7\. API gives back something fancy 
```

当然，完全有可能从节点调用这些第 3 方 api，并将它们的结果作为响应发回——这是否有意义取决于应用程序和 API 的实际作用——由您自己判断。

# file - 如何设置自解压 zip 文件的文件版本和产品版本属性？

> ID：13364431
> 
> 赞同：2
> 
> 时间：2012-11-13T16:18:38.037
> 
> 标签：file, attributes, zip, version, self-extracting

我有一个 EXE 文件，它是一个自解压的 zip 文件。EXE文件如何设置产品版本和文件版本？Windows 在文件属性中列出了它们，但它们都是空白的。Winzip 中可用的描述字段似乎对文件属性没有影响。

我正在使用 Winzip Self-Extractor 4.0 个人版，但其他解决方案/解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:27:30.780

您可以使用资源编辑器手动更改可执行文件的产品和文件版本。互联网上有很多可用的工具，例如[ResEdit](http://www.resedit.net/)、[Resource Hacker](http://www.angusj.com/resourcehacker/)、[XN Resource Editor](http://www.wilsonc.demon.co.uk/d10resourceeditor.htm)等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T19:33:45.617

如果您以编程方式生成此自解压 zip，则可以使用 DotNetZip 来完成。有一个编程接口来指定所有这些东西。

# c - C中的牛顿拉夫森

> ID：13364434
> 
> 赞同：4
> 
> 时间：2012-11-13T16:18:43.340
> 
> 标签：c, algorithm, numerical-methods

我已经实现了用于在 C 中查找根的 newton raphson 算法。我想在不进入 nan 土地的情况下尽可能打印出最准确的根近似值。我的策略是`while (!(isnan(x0)) { dostuff(); }`但这会继续多次打印出结果。理想情况下，我想设置一个范围，以便在我的情况下，当前一个电流小于某个范围 .000001 时，每个计算的 x 截距近似值之间的差异将停止。我在下面有一个可能的实现。当我输入 2.999 时只需要一步，但是当我输入 3.0 时需要 20 步，这对我来说似乎不正确。

（当我输入 3.0 时）

```
λ newton_raphson 3
2.500000
2.250000
2.125000
2.062500
2.031250
2.015625
2.007812
2.003906
2.001953
2.000977
2.000488
2.000244
2.000122
2.000061
2.000031
2.000015
2.000008
2.000004
2.000002
2.000001
进行了 20 次操作来逼近 2.000002 的正确根
在 0.000001 范围内

```

（当我输入 2.999 时）

```
λ newton_raphson 2.999
进行了 1 次操作来逼近 2.000000 的正确根
在 0.000001 范围内

```

我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#define RANGE 0.000001

double absolute(double number)
{
    if (number < 0) return -number;
    else return number;
}

 double newton_raphson(double (*func)(double), double (*derivative)(double), double x0){
    int count;
    double temp;
    count = 0;
    while (!isnan(x0)) {
            temp = x0;
            x0 = (x0 - (func(x0)/derivative(x0)));
            if (!isnan(x0))
                printf("%f\n", x0);
            count++;
            if (absolute(temp - x0) < RANGE && count > 1)
                break;
    }
    printf("Took %d operation(s) to approximate a proper root of %6f\nwithin a range of 0.000001\n", count, temp);
    return x0;
 }

/* (x-2)^2 */
 double func(double x){ return pow(x-2.0, 2.0); }
/* 2x-4 */
 double derivative(double x){ return 2.0*x - 4.0; }

 int main(int argc, char ** argv)
 {
   double x0 = atof(argv[1]);
   double (*funcPtr)(double) = &func; /* this is a user defined function */
   double (*derivativePtr)(double) = &derivative; /* this is the derivative of that function */

   double result = newton_raphson(funcPtr, derivativePtr, x0);
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:28:44.427

你调用`trunc(x0)`which`2.999`变成`2.0`. 自然，当您从正确的答案开始时，就不需要迭代了！换句话说，虽然您打算将其`2.999`用作起始值，但实际上却使用了`2.0`.

只需删除对`trunc()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:18:15.790

值得指出的是：采取 20 步收敛*也是*异常的；因为您正在收敛到多重根，所以收敛只是线性的，而不是牛顿-拉夫森在一般情况下给出的典型二次收敛。您可以看到，每次迭代您的错误都会减半（使用通常的二次收敛，每次迭代您将获得两倍的正确数字，并且收敛速度要快得多）。

# jax-ws - Axis2：使用 Rampart 通过 JAX-WS (WS-Security) 实现安全性

> ID：13364437
> 
> 赞同：0
> 
> 时间：2012-11-13T16:18:55.757
> 
> 标签：jax-ws, axis2, ws-security, rampart

我正在使用 Axis2 JAX-WS 服务。我定义了 WSDL 并使用 wsimport 工具来生成类。它使用 sun-jaxws.xml 文件，不需要 services.xml 文件。

有人可以帮我集成 Rampart (WS-Security) 以进行身份​​验证和安全性。高度赞赏示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T10:49:56.697

壁垒的一个很好的起点，有一些基本的例子：http: [//blog.sweetxml.org/2007/12/rampart-basic-examples-how-you-add-ws.html](http://blog.sweetxml.org/2007/12/rampart-basic-examples-how-you-add-ws.html)

# javascript - 将 rowindex 传递给 javascript

> ID：13364442
> 
> 赞同：0
> 
> 时间：2012-11-13T16:19:08.817
> 
> 标签：javascript, asp.net

我正在尝试将行索引从我的 gridview 内部传递给 javascript 函数，并且我收到一个错误，即数据绑定不包含属性名称容器。

```
<label style="text-decoration: underline" onclick="javascript:GetSelectedRow('<%# Eval("ID") %>','<%# Eval("root__level") %>','<%# Eval("ParentMclid") %>','<%# Eval("systempath") %>','<%# Eval("Container.DataItemIndex + 1") %>);"><%#Eval("ID") %></label> 
```

我只想将gridview的rowindex传递给javascript函数。.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:27:06.307

试试`<%# Container.DataItemIndex %>`吧。

Container 是在数据绑定期间向您公开的对象，您不需要将其包含在您的 Eval 语句中。仅当您需要访问数据源中的属性或项时才使用 Eval。另外，`Eval("chicken")`确实是一个捷径`DataBinder.Eval(Container, "chicken")`。

# javascript - 如何搜索到最后 /

> ID：13364446
> 
> 赞同：-2
> 
> 时间：2012-11-13T16:19:18.283
> 
> 标签：javascript, regex

我有这个网址

```
http://abc.com.ppd-www.abccom.server.net/info/first/abccom/office/About_abc        /abc_Information/ABC_Informatio_Press_News/Images                      /Here%20You%20Can%20Get%20More%20Related%202012%20News%20About%20FINAL.pdf 
```

我一直在寻找一个正则表达式来搜索直到最后一个`/`并消除`%20`. 我想最终拥有

```
here you can get more related 2012 news about final 
```

我尝试了许多可能的表达方式，但都不成功。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:45:16.537

这里不需要正则表达式。只需使用内置函数来操作字符串和数组就足够了：

```
var parts = str.split('/');
var result = decodeURIComponent(parts[parts.length-1].split('.').slice(0,-1).join('')); 
```

这将占用最后一个`/`和最后一个之间的所有内容`.`如果您只想直到第一个（或者您确定文件名中`.`总是只有一个）：`.`

```
var parts = str.split('/');
var result = decodeURIComponent(parts[parts.length-1].split('.')[0]); 
```

只是如果你好奇，这里是正则表达式的解决方案：

```
var result = str.match(/\/([^\/]*)\.pdf$/)[1].replace(/%20/g, ' '); 
```

但是您不能告诉我这更具可读性/可维护性；）。

# mysql - 在函数中使用 node-mysql

> ID：13364449
> 
> 赞同：5
> 
> 时间：2012-11-13T16:19:27.867
> 
> 标签：mysql, node.js

我对nodejs很陌生并且有一个问题。

尝试创建一个函数，该函数将调用我从表中提及其 ID 的任何字段的值：

```
function getUserInfo (userID, dynamicField) {
    var query = connection.query('SELECT '+dynamicField+' from users WHERE userID = '+connection.escape(userID));
    query.on('result', function(row) {
        return(row.dynamicField);
    });
};
console.log(getUserInfo(8, userEmail)) //this should get me the userEmail value of the user with userID=8 
```

但是，我得到“未定义”。如果我使用console.log 而不是return，它会记录该值，但这没有用作在其他函数中用于获取值的函数。

如果我能获得修改功能的帮助，我会很高兴。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T17:35:11.420

这是 async/nodejs 初学者的常见错误。您实际上已经在一个同步函数中包装了一个异步函数，它打破了节点事件循环的性质。返回表达式需要替换为回调。见下文：

```
// Method
function getUserInfo (userID, dynamicField, callback) {
    var query = connection.query('SELECT '+dynamicField+' from users WHERE userID = '+connection.escape(userID));
    query.on('result', function(row) {
        callback(null, row.dynamicField);
    });
};

// Implementation
getUserInfo(8, userEmail, function(err, result){
    console.log(err || result);
}); 
```

按照惯例，在 Nodejs 中，我们总是首先在回调中传递一个错误对象。在这种情况下，由于没有要捕获的错误，我们传递 null 代替它。

# highcharts - 一系列的 Highcharts 向下钻取

> ID：13364455
> 
> 赞同：1
> 
> 时间：2012-11-13T16:19:39.983
> 
> 标签：highcharts, series, multiple-columns, drilldown

我有一个按年份显示系列数据的图表。例如 1011、1112、1213、1415，并显示每年的实际和目标。

如果用户单击一列，则图表将深入到该数据集，但是我希望能够彼此相邻显示实际和目标，而不是单个列...

JSFiddle：http: [//jsfiddle.net/MuydK/](http://jsfiddle.net/MuydK/)

任何帮助表示赞赏，因为尝试了几种方法，我对此感到困惑。我相信我了解如何将数据设置为系列集而不仅仅是数据集，但不知道我需要对 SetChart 等进行哪些更改...

一旦我钻入和钻出一次，系列​​标题也会消失，有什么想法......？

非常感谢您的帮助。

```
 var chart;
    $(document).ready(function () {
        var colors = Highcharts.getOptions().colors,
        categories1 = ['1011', '1112', '1213', '1415'],
        name1 = 'Actual',

        data1 = [ ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:11:23.580

我用简单的数据更新了你的代码，我想这就是你想要的，这只是一个演示，你可以根据你的更新代码。

[JSFiddle](http://jsfiddle.net/zaheerahmed/7xEhW/)

这是代码：

```
$(function () {
        var chart;
        $(document).ready(function () {
            var colors = Highcharts.getOptions().colors,
            categories1 = ['1011', '1112', '1213', '1415'],
            name1 = 'Actual',

            data1 = [
{
     y: 1674,
     color: colors[0],
     drilldown: {
         name: '1011 Actual',
         categories: ['BS', 'B', 'IT', 'C'],
         data: [3, 32, 54, 50],

         color: colors[0],

         name1: '1011 Target',
         data1: [0, 31, 50, 60],
         color1:colors[1]
     }
 }
];            var colors = Highcharts.getOptions().colors,
            categories2 = ['1011', '1112', '1213', '1415'],
            name2 = 'Target',

            data2 = [  
{
     y: 1633,
     color: colors[1],
     drilldown: {
          name: '1011 Actual',
         categories: ['BS', 'B', 'IT', 'C'],
         data: [3, 32, 54, 50],

         color: colors[0],

         name1: '1011 Target',
         data1: [0, 31, 50, 60],
         color1:colors[1]
     }
 }
];            function setChart(name, categories, data, color) {
                console.log(name, categories, data, color);
                chart.xAxis[0].setCategories(categories);
                while (chart.series.length > 0) {
                    chart.series[0].remove(true);
                }
                for (var i = 0; i < data.length; i++) {
                    chart.addSeries({
                        name: name[i],
                        data: data[i],
                        color: color[i]
                    });

                }
            }
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'con1',
                    type: 'column'
                },
                title: {
                    text: 'Learner Responsive 16-18'
                },
                subtitle: {
                    text: 'Click the columns to view breakdown by department. Click again to view by Academic Year.'
                },
                xAxis: {
                    categories: categories1
                    , labels: {rotation:-90, align:'right'}
                },
                yAxis: {
                    title: {
                        text: 'Learner Responsive 16-18'
                    }
                },

                plotOptions: {
                    column: {
                        cursor: 'pointer',
                        point: {
                            events: {
                                click: function () {
                                    var drilldown = this.drilldown;
                                    if (drilldown) { // drill down
                                        setChart([drilldown.name,drilldown.name1], drilldown.categories, [drilldown.data, drilldown.data1], [drilldown.color,drilldown.color1]);
                                    } else { // restore
                                        setChart(name, categories1, [data1, data2], 'white');
                                    }
                                }
                            }
                        },

                        dataLabels: {
                            enabled: true,
                            color: colors[0],
                            style: {
                                fontWeight: 'bold'
                            },
                            formatter: function () {
                                return this.y; // +'%';
                            }
                        }
                    }
                },

                tooltip: {
                    formatter: function () {
                        var point = this.point,
                        series = point.series,
                        s = 'Learner Responsive 16-18' + '<br/>' + this.x + ' ' + series.name + ' is <b>' + this.y + '</b><br/>';
                        if (point.drilldown) {
                            s += 'Click to view <b>' + point.category + ' ' + series.name + ' </b>' + ' by department';
                        } else {
                            s += 'Click to return to view by academic year.';
                        }
                        return s;
                    }
                },

                series: [{
                    name: name1,
                    data: data1,
                    color: colors[0]
                },{
                    name: name2,
                    data: data2,
                    color: colors[1]
                }],

                exporting: {
                    enabled: false
                }
            },
                function (chart) {
                console.log(chart);
            });
        });
    }); 
```

# objective-c - UISlider 降低 UIImage 的 alpha

> ID：13364458
> 
> 赞同：0
> 
> 时间：2012-11-13T16:19:49.140
> 
> 标签：objective-c, ios, xcode, algorithm, logic

我有`UISlider`。通过增加它的值，它需要将 alpha`UIImage`从 1 减少到 0（`UIImage`位于同一视图上）。最大值-最小值：

UISlider：0 - 100

UIImage.alpha = 1 - 0

如果我理解正确，问题是写一个算法，什么会设置成对值的对应关系，例如：0,99 - 0,01, 0,98 - 0,02 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:22:29.667

## 解决方案

如果您希望滑块值 100 为 alpha 1.0，请使用：

`valueFromSlider / maxValueOfSlider`

如果您希望滑块值 0 为 alpha 1.0，请使用：

`1 - (valueFromSlider / maxValueOfSlider)`

## 为什么这行得通？

您只是获得了滑块距离的百分比，并将该百分比应用为 alpha（无论如何都以百分比起作用）。使用的第二种解决方案`1 - ...`是简单地计算反数值。

通过此计算，您`UISlider`可以有任何范围的值，从`0-5`或`0-25000`，并且仍然会计算正确的 alpha。唯一的区别是您可以更精细地控制具有更大范围的 alpha，这是有道理的，您有 25000 个可能的值，而不是 5 个（假设离散值，滑块可以是连续的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:24:24.013

另一种选择是将滑块保留为默认最小值 0.0 和最大值 1.0。然后不需要转换。

如果您需要将滑块的当前值显示为 0 - 100，则将滑块的当前值乘以 100。

# r - R中具有不同颜色的直方图

> ID：13364459
> 
> 赞同：5
> 
> 时间：2012-11-13T16:19:50.053
> 
> 标签：r, plot

我正在尝试以`data`类似直方图的样式绘制向量。这总是很容易，因为`plot(data, type="h")`正是我想要的。但是，颜色有问题。我的矢量`data`看起来像这样：

```
 data = c(1,2,2,3,1,1,2,3,1,2,2,3, ... ) 
```

我想看到的是，每一个`1`都用一种颜色绘制，每`2`一个都用不同的颜色绘制，每一个都`3`一样。我试图用

```
 plot(data, type="h", col=c("red","blue","green") 
```

但它失败了 R 循环颜色向量，所以第一个条是红色的，第二个是蓝色的，第三个是绿色的，第四个是红色的，依此类推。

我对通用解决方案非常感兴趣，因为我的`data`向量并不总是由数字`1`和`2`组成`3`。在很多情况下，向量包含从 1 到 6 的数字。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T16:25:04.133

您需要创建一个长度相同的颜色矢量，如下所示：

```
data = c(1,2,2,3,1,1,2,3,1,2,2,3)
colors = c("red","blue","green")
plot(data, type="h", col=colors[data]) 
```

这有效，因为`colors[data]`看起来像：

```
print(colors[data])
#  [1] "red"   "blue"  "blue"  "green" "red"   "red"   "blue"  "green" "red"  
# [10] "blue"  "blue"  "green" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T16:46:48.217

试试这个一般方法：

```
data = c(1,2,2,3,1,1,2,3,1,2,2,3,4,5,6,7,12,3)
colors = rainbow(length(unique(data)))
plot(data, type="h", col=colors[data]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:12:25.800

```
 colors = rainbow(length(unique(data)));
 hist(data, col=colors[data]) 
```

使用先生。lapalme 的数据（上图）

# perl - Perl 波特词干

> ID：13364462
> 
> 赞同：0
> 
> 时间：2012-11-13T16:19:55.773
> 
> 标签：perl, file

我正在检查这个搬运工词干分析器。下面他们说我应该改变我的第一行。我到底做了什么，但词干分析器不起作用。一个好的例子可能是什么？

```
#!/usr/local/bin/perl -w
#
# Perl implementation of the porter stemming algorithm
# described in the paper: "An algorithm for suffix stripping, M F Porter"
# http://www.muscat.com/~martin/stem.html
#
# Daniel van Balen (vdaniel@ldc.usb.ve)
#
# October-1999
#
# To Use:
#
# Put the line "use porter;" in your code. This will import the subroutine 
# porter into your current name space (by default this is Main:: ). Make 
# sure this file, "porter.pm" is in your @INC path (it includes the current
# directory).
# Afterwards use by calling "porter(<word>)" where <word> is the word to strip.
# The stripped word will be the returned value.
#
# REMEMBER TO CHANGE THE FIRST LINE TO POINT TO THE PATH TO YOUR PERL 
# BINARY
# 
```

作为代码，我正在编写以下内容：

```
use Lingua::StopWords qw(getStopWords);
use Main::porter;
my $stopwords = getStopWords('en');

@stopwords = grep { $stopwords->{$_} } (keys %$stopwords);

    chdir("c:/perl/input");
    @files = <*>;
    foreach $file (@files) 
      {
        open (input, $file);

        while (<input>) 
          {
            open (output,">>c:/perl/normalized/".$file);
        chomp;
        porter<$_>;
        for my $stop (@stopwords) 
        {
        s/\b\Q$stop\E\b//ig;
        }
        $_ =~s/<[^>]*>//g;
        $_ =~ s/[[:punct:]]//g;
        print output "$_\n";

          }

       }
    close (input);
    close (output); 
```

该代码没有给出任何错误，只是它没有阻止任何东西！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:40:38.623

该评论块充满了不正确的建议。

一个 ＃！.pm 文件中的行无效。这是一个常见的错误。这 ＃！*当且仅当*您将文件作为命令行程序运行时，行告诉 Unix 使用哪个解释器运行程序。

```
./somefile                # uses #! to determine what to run somefile with
/usr/bin/perl somefile    # runs somefile with /usr/bin/perl regardless of #! 
```

这 ＃！行在一个模块中什么都不做，一个 .pm 文件，你`use`. 那时 Perl 已经在运行了。该行只是一个注释。

第二个问题是您的默认命名空间`main`不是`Main`. 外壳很重要。

继续您的代码，`use Main::porter;`不应该工作。应该是`use porter`。您应该会收到一条错误消息，例如`Can't locate Main/porter.pm in @INC (@INC contains: ...)`. 如果该代码运行，也许您将 porter.pm 移到了一个`Main/`目录中？移出来，会混淆porter函数的导入。

`porter<$_>;`说“尝试从文件句柄 $_ 中读取一行并将其传递给搬运工”。$_ 不是文件句柄，它是您刚刚打开的文件中的一行。您想`porter($_)`将该行传递给 porter 函数。如果你打开警告（添加`use warnings`到你的脚本顶部）Perl 会警告你这样的错误。

您可能还想对 porter 的返回值做一些事情，否则它真的什么都不做。 `my @whatever_porter_returns = porter($_)`.

您的一个或多个可能`chdir`已经`open`默默地失败了，因此您的程序可能没有输入。不幸的是，Perl 不会让您知道何时发生这种情况，您必须检查一下。通常你[在函数之后](http://perldoc.perl.org/perlopentut.html#Simple-Opens)[添加一个`or die $!`](http://perldoc.perl.org/perlopentut.html#Simple-Opens)来检查错误。这是一项繁忙的工作，经常会忘记，相反，如果任何系统调用喜欢或失败，您可以[`use autodie`](http://perldoc.perl.org/autodie.html)自动产生错误。`chdir``open`

修复了这些东西后，您的代码应该可以工作，或者至少会产生有用的错误消息。

最后，CPAN 上有许多[词干模块，](https://metacpan.org/search?q=stem)它们的质量可能比您在文档、测试和更新等中找到的模块质量更高。 [Lingua::Stem](https://metacpan.org/module/Lingua%3a%3aStem)和[Text::English](https://metacpan.org/module/Text%3a%3aEnglish)专门使用了 porter 算法。你可能想试一试。

# verilog - 将位/逻辑向量的 SystemC 结构安全地转换/转换为单个位/逻辑向量

> ID：13364464
> 
> 赞同：3
> 
> 时间：2012-11-13T16:19:59.017
> 
> 标签：verilog, system-verilog, systemc

我正在将代码从 SystemVerilog 移植到 SystemC。SV 很容易将位/逻辑的打包结构解释为单个位/逻辑向量。例如：

```
typedef struct logic {
  logic [31:0] blk1;  //63:32
  logic [4:0]  blk2;  //31:27
  logic [2:0]  blk3; //26:24
  logic [4:0]  blk4;  //23:19
  logic [2:0]  blk5;  //18:16
  logic [7:0]  blk6;  //15:8
  logic [7:0]  blk7;  //7:0
} typ_block;
...
typ_block blockA;
logic[63:0] blockB;
blockB = blockA; // no problem here 
```

但是对于 SystemC 和使用 sc_lv<> 模板，由于类型不匹配，这会导致编译器错误。

```
struct typ_block {
  sc_lv<32> blk1;  //63:32
  sc_lv<5>  blk2;  //31:27
  sc_lv<3>  blk3; //26:24
  sc_lv<5>  blk4;  //23:19
  sc_lv<3>  blk5;  //18:16
  sc_lv<8>  blk6;  //15:8
  sc_lv<8>  blk7;  //7:0
};
...
typ_block blockA;
sc_lv<64> blockB;
blockB = blockA; // compiler error 
```

有没有一个很好的 SystemC 支持的方法来做这个等价物？我可以想到潜在的解决方案，但它们并不优雅或简洁，而且我不确定 c 风格的指针转换是否安全/正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T03:53:02.337

这是对您自己的答案的轻微改进。您不需要转换为字符串，因为`sc_lv`类型可以与`()`运算符连接。

所以你可以像这样简化你的功能：

```
sc_lv<64> to64bit() { return (blk1, blk2, blk3, blk4, blk5, blk6, blk7); }; 
```

我想有一种方法可以通过重载一些运算符来使简单的赋值工作`typ_block`，但我不确定它是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:12:23.767

这是使用 C++ 类型转换运算符重载来替换`to64bit()`.

```
struct typ_block {
    sc_lv<32> blk1;  //63:32
    sc_lv<5>  blk2;  //31:27
    sc_lv<3>  blk3; //26:24
    sc_lv<5>  blk4;  //23:19
    sc_lv<3>  blk5;  //18:16
    sc_lv<8>  blk6;  //15:8
    sc_lv<8>  blk7;  //7:0

    operator sc_lv<64>() const {
        return sc_lv<64>((blk1.to_string() + blk2.to_string() + ...).c_str());
    }
};

typ_block blockA;
sc_lv<64> blockB;
blockB = blockA; 
```

这个 C++ 运算符的限制是你必须使用显式表达式让编译器知道类型转换。这意味着你不能使用 like `blockB = (blockA).range(7,0);`，你必须使用`blockB = sc_lv<64>(blockA).range(7,0);`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:14:16.240

编辑：我将这 3 个答案结合到以下内容：

```
struct typ_block {
  sc_lv<32> blk1;  //63:32
  sc_lv<5>  blk2;  //31:27
  sc_lv<3>  blk3; //26:24
  sc_lv<5>  blk4;  //23:19
  sc_lv<3>  blk5;  //18:16
  sc_lv<8>  blk6;  //15:8
  sc_lv<8>  blk7;  //7:0

  // replacing the commented version by combining jclin's and dwinkle's answers
  // sc_lv<64> to64bit() { return (sc_lv<64>((blk1.to_string() + blk2.to_string() + blk3.to_string() + blk4.to_string() + blk5.to_string() + blk6.to_string() + blk7.to_string()).c_str())); };
  operator sc_lv<64>() const { return (blk1, blk2, blk3, blk4, blk5, blk6, blk7); };
};
...
typ_block blockA;
sc_lv<64> blockB;
blockB = blockA; 
```

# iphone - UIRefreshControl 背景颜色

> ID：13364465
> 
> 赞同：16
> 
> 时间：2012-11-13T16:20:01.720
> 
> 标签：iphone, objective-c, ios, uirefreshcontrol

是否可以使 UIRefreshControl 的背景随着控件的增长而增长？

我想为刷新控件设置一个彩色背景，以匹配顶部单元格的背景颜色。更改 tableview 的背景颜色是不可接受的，因为底部的空单元格也会有颜色，但我需要它们保持白色。

Apple 的邮件应用程序显示了这种行为。刷新控件的背景与灰色的搜索栏相匹配，但表格视图底部的空单元格仍然是正常的白色。

这是一个示例屏幕截图，显示了在拉动刷新控件时显示的丑陋白色的表格：
![在此处输入图像描述](../Images/e3a095ca2e5d2a3b4cf8d4b1a6d8ae40.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-15T09:51:32.743

您必须使用 bgColor 创建一个视图，并在 tableView 中添加负 y 原点。

警告：

*   您必须将此视图插入到 tableView 子视图的底部堆栈中
*   您必须在设置 refreshControll 后插入此视图： self.refreshControl = refreshControl;

如果您不以这种方式插入此视图，您将看不到刷新控件：他将隐藏在您的视图下方。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Background Color
    UIColor *bgRefreshColor = [UIColor grayColor];

    // Creating refresh control
    refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(refresh) forControlEvents:UIControlEventValueChanged];
    [refreshControl setBackgroundColor:bgRefreshColor];
    self.refreshControl = refreshControl;

    // Creating view for extending background color
    CGRect frame = self.tableView.bounds;
    frame.origin.y = -frame.size.height;
    UIView* bgView = [[UIView alloc] initWithFrame:frame];
    bgView.backgroundColor = bgRefreshColor;
    bgView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

    // Adding the view below the refresh control
    [self.tableView insertSubview:bgView atIndex:0]; // This has to be after self.refreshControl = refreshControl;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-26T22:12:24.263

Swift 版本更容易复制粘贴 :)

**斯威夫特 2**

```
func viewDidLoad() {
    super.viewDidLoad()

    // Background Color
    let backgroundColor = UIColor.grayColor()

    // Creating refresh control
    let refresh = UIRefreshControl()
    refresh!.backgroundColor = backgroundColor
    refresh!.addTarget(self, action: #selector(refresh), forControlEvents: UIControlEvents.ValueChanged)
    refreshControl = refresh

    // Creating view for extending background color
    var frame = tableView.bounds
    frame.origin.y = -frame.size.height
    let backgroundView = UIView(frame: frame)
    backgroundView.autoresizingMask = .FlexibleWidth
    backgroundView.backgroundColor = backgroundColor

    // Adding the view below the refresh control
    tableView.insertSubview(backgroundView, atIndex: 0) // This has to be after refreshControl = refresh
} 
```

**斯威夫特 3**

```
func viewDidLoad() {
    super.viewDidLoad()

    // Background Color
    let backgroundColor = .gray

    // Creating refresh control
    let refresh = UIRefreshControl()
    refresh!.backgroundColor = backgroundColor
    refresh!.addTarget(self, action: #selector(refresh), forControlEvents: .valueChanged)
    refreshControl = refresh

    // Creating view for extending background color
    var frame = tableView.bounds
    frame.origin.y = -frame.size.height
    let backgroundView = UIView(frame: frame)
    backgroundView.autoresizingMask = .flexibleWidth
    backgroundView.backgroundColor = backgroundColor

    // Adding the view below the refresh control
    tableView.insertSubview(backgroundView, atIndex: 0) // This has to be after refreshControl = refresh
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-13T14:00:01.723

现在可以通过简单地设置 UIRefreshControl 背景颜色属性来实现（Swift 5、iOS 13）：

```
let ctrl = UIRefreshControl(frame: .zero)    
ctrl.backgroundColor = UIColor.gray'
tableView.refreshControl = ctrl 
```

[![在此处输入图像描述](../Images/5f3c2646e42ea692f62446c6e754e77b.png)](https://i.stack.imgur.com/o3SYS.png)

# sql - SQL 存储小数字

> ID：13364468
> 
> 赞同：2
> 
> 时间：2012-11-13T16:20:02.420
> 
> 标签：sql, sql-server, database, sql-server-2008

对于 db 家伙来说，这是一个很好的简单问题，它不是非常重要，但我很好奇。

是否有比 a 更小（数字）的东西`tinyint`。

我存储了 120 个不同的值，几乎所有的值都将是`(0-9)`.

A`tinyint`是我能找到的最小的，它的值是 upto `255`。(3 位数)

## D B：

我正在使用 MSSqlServer 2008 版本 10.00.1600

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:25:15.903

数值`tinyint`可能尽可能小（这实际上取决于您使用的数据库引擎）。您*可以*使用`char(1)`然后依赖隐式转换来查询值，但这对于解决实际上不需要解决的问题将是不必要的开销。此外，`char(1)`仍将消耗 1 个字节，8 位，范围为 0-255。我认为这是一种微优化，不值得花时间/精力。

我知道您可能要求用于学术目的，但就数据库存储而言，`tinyint`几乎可以满足所有情况。如果您*担心*空间消耗，我会说您需要考虑传统 RDBMS 之外的其他选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:26:47.627

您当然可以手动将多个元素打包到一个字段中；因为几乎每个计算系统都是面向字节（8 位）的，通常最小的可用元素只有一个字节，8 位，例如可以表示 0-255（或 -128 到 127）。

# mysql - 从 mysql 迁移到 MongoDb，任何有助于创建迁移计划的工具

> ID：13364474
> 
> 赞同：0
> 
> 时间：2012-11-13T16:20:28.593
> 
> 标签：mysql, mongodb

我们计划从 mysql 迁移到 mongoDB。我想知道是否有工具或任何其他资源可以帮助我制定迁移计划。例如（带有公司的表，应先移动，然后是用户详细信息等），以便顺利迁移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:28:07.083

您不能简单地将 MySQL 模式迁移到 MongoDB（或任何其他文档数据库存储）。存储数据的方式*完全*不同。请记住，没有连接，您很可能需要对数据进行非规范化，并将某些数据嵌入到其他文档中。这不是可以自动化的东西。

这里的数据库根本不同。您需要从应用程序端查看如何读取和写入数据，在哪里进行连接，如何最好地构建新模式以*与*MongoDB 一起使用，而不是仅仅将其用作 RDBM。搜索“MongoDB 架构设计”以大致了解您需要考虑的事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:11:51.043

首先，您必须了解您的表和查询之间的关系。

1.  根据外键关系对表进行分组。也许有些团体只有一张桌子。您可以先迁移这些。因为那很容易。例如：日志、访客人数。

2.  然后一组2张桌子。

    1.  如果关系是`1:1`，您可以简单地将它们合并到一个表中并进行迁移。
    2.  如果`1:n`，您可以将`n`边嵌入到`1`边中。但是是否合并（嵌入）应该根据您的查询。例如：如果两个有`1:1`关系的表永远不会被一起读取，你可以直接迁移到 MongoDB 而不合并。
    3.  虽然`n:m`可以用 MongoDB 实现，但您必须自己管理大量冗余数据或处理`join`。但如果你真的很想这样做，那也没关系。但是性能可能是个问题。
3.  如果组中的表数> = 3，我认为您应该在大多数情况下将它们保存在 MySQL 中。但仍有一些例外。我最近处理了3个有`1:1`和`1:n`关系的表，我只是将它们合并并嵌入到一个表中，这很容易，性能也更好。

# ruby-on-rails - wicked_pdf/wkhtmltopdf 忽略 Twitter Bootstrap css

> ID：13364476
> 
> 赞同：3
> 
> 时间：2012-11-13T16:20:33.430
> 
> 标签：ruby-on-rails, twitter-bootstrap, wkhtmltopdf, wicked-pdf

我无法使用来自以下来源的 wicked_pdf/wkhtmltopdf 在 Ruby 中生成 pdf 文档：

```
respond_to do |format|
  format.js
  format.pdf {
    render :pdf => pdf_filename(@invoice,false),
        :template => "invoices/generate",
        :layout => "document",
        :show_as_html => params[:debug]
  }
end 
```

--

```
 <style type='text/css'>/*!
  * Bootstrap v2.1.1
  ...
  */
    .clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:"";line-height:0;}
    .clearfix:after{clear:both;}
   /*.... and so on twitter bootstrap css is definitely included here ..... */
  </style>
</head>
<body>
<div class="container">

  <div class="row">
   <div id="left" class="span6">
     <!-- any text here -->
   </div>
   <div id="right" class="span6">
     <!-- any other text here -->
   </div>
  </div>
</div>
</body>
</html> 
```

生成的 PDF 确实完全忽略了引导 css（这意味着文档的整个布局都被打乱了）。但它完全加载到“风格”部分。

当我尝试调试（generate.pdf?debug=1）输出 html 时，我确实得到了我想要的正确格式（#left 是页面左侧的列，#right 是右侧的列） .

wkhtmltopdf 是否能够呈现 twitter bootstrap css ？

我正在使用最新的 wicked_pdf gem 和 wkhtmltopdf 0.11.0 rc1。

感谢您对此的任何提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:09:54.233

在您的布局中，您必须在 CSS 包含标签中提供绝对路径或使用提供的帮助器：

```
wicked_pdf_stylesheet_link_tag 'application' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:04:51.807

没关系 ！！

更新到最新的 Bootstrap 版本 2.2.1 修复了它（之前有 2.1.1）。不要问我为什么，但这一定是 Bootstrap 中的一个问题，我没有怀疑。

# functional-programming - CoffeeScript 中的惰性和函数式编程

> ID：13364478
> 
> 赞同：-2
> 
> 时间：2012-11-13T16:20:38.253
> 
> 标签：functional-programming, coffeescript

咖啡脚本是否懒惰地评估？如果是这样，我可以以功能方式编写咖啡脚本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:50:15.293

不，CoffeeScript 是 JavaScript 语言的一个精简句法包装器。尽管它的语法对于函数式编程可能比 JavaScript 更友好，但它并没有改变 JavaScript 不会被延迟评估的事实。

# sql - Azure - 取决于数据库的 IP 筛选器

> ID：13364481
> 
> 赞同：5
> 
> 时间：2012-11-13T16:20:39.373
> 
> 标签：sql, security, azure, filter, ip

我有一个使用不同服务器的不同数据库的 Azure 应用程序。这个数据库是独立的，我的应用程序的每个扇区只使用一个数据库。我尝试制作一个 IP 过滤器。此过滤器必须识别请求者的 ip，并根据此过滤器是否允许访问每个数据库。这给了我一种方法，允许访问 A 而不是 B 的 IP，访问 B 而不是 A 的另一个 IP，完全访问另一个不同的 IP ......使用 Azure 的安全性。这可能吗？

谢谢，我等一个答案！

PD：对不起我糟糕的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:26:33.417

假设您指的是 SQL Azure 托管数据库，您可以使用数据库级防火墙设置，[此处](http://msdn.microsoft.com/en-us/library/windowsazure/jj553530.aspx)记录了这些设置。

> 使用 sp_set_database_firewall_rule 存储过程创建数据库级防火墙规则。通过在 sp_set_database_firewall_rule 存储过程的 name 参数中指定唯一名称，为基于 Internet 的连接添加新的防火墙设置。使用 start_ip_address 参数指定该范围内所需的最低 IP 地址，并使用 end_ip_address 参数指定该范围内所需的最高 IP 地址。name 参数是 nvarchar 数据类型，start_ip_address 和 end_ip_address 参数是 varchar 数据类型。
> 
> 同样，您可以通过使用参数 start_ip_address 和 end_ip_address 等于 0.0.0.0 的 sp_set_database_firewall_rule 存储过程来启用来自 Windows Azure 的连接尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:30:34.757

我相信你已经找到了一个解决方案，因为它现在已经有几个月了，但以防万一......

假设我理解正确，您有一堆客户端与您的应用程序服务器通信，而应用程序服务器又会查询许多数据库服务器中的一个。mellamokb 建议的防火墙不是一个选项，因为客户端实际上并没有访问数据库，因此需要的东西必须位于应用程序服务器上。

根据客户端的 IP 地址选择用于访问/a 数据库的连接字符串可能就是您在这里所追求的。如果您还需要使用其本机安全性锁定数据库，则需要为每个客户端创建一个命名用户帐户。

或者，您可以调查Azure SQL 数据库上的[联合](http://msdn.microsoft.com/en-us/library/windowsazure/hh597452.aspx)，并使用客户端的 IP 地址或类似的标识符作为分发密钥。

# javascript - 以php形式更改一个输入单词的颜色

> ID：13364485
> 
> 赞同：0
> 
> 时间：2012-11-13T16:20:55.760
> 
> 标签：javascript, html, css

下面是一个下拉搜索表单，我希望更改显示的 this.value 句子中一个单词的颜色。

```
<form method="get" id="searchform" action="<?php bloginfo('url'); ?>/">
<input type="text" onfocus="if(this.value=='We'll steer you in the right direction') this.value='';" onblur="if(this.value=='') this.value='We'll steer you in the right direction';" value="We'll steer you in the right direction" name="s" id="s" /><br /> 
```

我希望以不同的颜色显示“转向”一词。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:24:59.783

您将需要创建自己的控件来执行此操作。“富文本”框将允许您控制文本框内的格式，请参阅[此问题](https://stackoverflow.com/questions/732429/html-rich-textbox)。

# javascript - 使用 knockout.js / jquery 查询数据库

> ID：13364486
> 
> 赞同：1
> 
> 时间：2012-11-13T16:20:59.093
> 
> 标签：javascript, jquery, mysql, ajax, knockout.js

我正在关注从服务器加载数据的 knockout.js 教程，但我对查询的实际来源有点困惑。该教程可以在[这里](http://learn.knockoutjs.com/#/?tutorial=loadingsaving)找到，我正在谈论的具体代码在第 2 页。

我了解使用 ajax 的必要性，但我实际上不确定如何根据他们正在做的事情进行查询。

```
$.getJSON("query/tasks", function(allData) {
    var mappedTasks = $.map(allData, function(item) { return new Task(item) });
    self.tasks(mappedTasks);
}); 
```

正在发生的事情的描述：

```
On this server, there's some code that handles requests to the URL /tasks, and 
responds with JSON data. Add code to the end of TaskListViewModel to request that
data and use it to populate the tasks array: 
```

因此，假设我正在使用 PHP，并希望进行以下查询以查找任务：

```
$tasks= mysql_query("select * from tasks"); 
```

**我将把这个查询放在哪里？**我看到它与 /tasks 有某种关系，但这里到底发生了什么？

**编辑，我会做这样的事情吗？**所以本质上 $.getJSON 请求在这种情况下调用驻留在查询/任务中的函数？

```
//assuming this is on query.php

Class query{

    function tasks(){
        $task = mysql_query("select * from tasks");
        return $task;
    }   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:38:06.943

本质上，您正在对服务器上的某个端点进行 AJAX 调用，该端点将返回 JSON 数据。我已经有一段时间没有使用 PHP 了，但是您基本上是在请求服务器上的资源。假设您的网站是[http://www.myawesomesite.com](http://www.myawesomesite.com)。如果您要向“/tasks”发出 AJAX 请求，则会向[http://www.myawesomesite.com/tasks](http://www.myawesomesite.com/tasks)发出一个请求，该请求预计会返回 JSON 数据。

该资源可以是另一个页面，某种网络服务，无论你有什么可用的。我主要在 ASP.NET MVC 领域工作，所以我的经验与 PHP 不同，但想法是一样的。您正在向服务器上的资源发出请求以返回 JSON 数据。无论该资源是什么，都取决于您。！

# android - Android SQLite 多表输入

> ID：13364487
> 
> 赞同：0
> 
> 时间：2012-11-13T16:21:03.350
> 
> 标签：android, sqlite, multiple-tables

我有一个预算程序，它使用多个表来存储信息。当我尝试一次向多个表添加信息时，我最终只让第一个表接收任何信息。这是我使用的代码：

```
public SQLiteDatabase createBudget(String bname, String bpay, String bamount,
                String bmemo) {
            // TODO Auto-generated method stub
            ContentValues t1 = new ContentValues();
            ContentValues t2 = new ContentValues();
            ContentValues t4 = new ContentValues();
            t1.put(KEY_NAME, bname);
            t1.put(KEY_PAYDAY,bpay);
            t2.put(KEY_AMOUNT, bamount);
            t4.put(KEY_MEMO, bmemo);
            ourDatabase.insert(DATABASE_TABLE1, null, t1);
            ourDatabase.insert(DATABASE_TABLE2, null, t2);
            ourDatabase.insert(DATABASE_TABLE4, null, t4);
            return ourDatabase;
        } 
```

我完全不知道该怎么做。我曾尝试在网上查找，但我发现的内容是针对单表数据库的。我将不胜感激任何帮助。这是 LogCat 内容：

```
11-13 10:14:33.935: E/SQLiteDatabase(662): Error inserting budget_amount=99
11-13 10:14:33.935: E/SQLiteDatabase(662): android.database.sqlite.SQLiteConstraintException: Budget_Items.edit_date may not be NULL (code 19)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:775)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteSession.executeForLastInsertedRowId(SQLiteSession.java:788)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:86)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1469)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at budget.app.BudgetDB.createBudget(BudgetDB.java:161)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at budget.app.AddBudget$1.onClick(AddBudget.java:40)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.view.View.performClick(View.java:4084)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.view.View$PerformClick.run(View.java:16966)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.os.Handler.handleCallback(Handler.java:615)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.os.Looper.loop(Looper.java:137)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at java.lang.reflect.Method.invokeNative(Native Method)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at java.lang.reflect.Method.invoke(Method.java:511)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-13 10:14:33.935: E/SQLiteDatabase(662):  at dalvik.system.NativeStart.main(Native Method)
11-13 10:14:33.955: E/SQLiteDatabase(662): Error inserting _memo=for pie
11-13 10:14:33.955: E/SQLiteDatabase(662): android.database.sqlite.SQLiteConstraintException: Budget_Memos.edit_date may not be NULL (code 19)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:775)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteSession.executeForLastInsertedRowId(SQLiteSession.java:788)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:86)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1469)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at budget.app.BudgetDB.createBudget(BudgetDB.java:162)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at budget.app.AddBudget$1.onClick(AddBudget.java:40)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.view.View.performClick(View.java:4084)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.view.View$PerformClick.run(View.java:16966)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.os.Handler.handleCallback(Handler.java:615)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.os.Looper.loop(Looper.java:137)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at java.lang.reflect.Method.invokeNative(Native Method)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at java.lang.reflect.Method.invoke(Method.java:511)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-13 10:14:33.955: E/SQLiteDatabase(662):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:26:06.843

我认为问题是“Budget_Items.edit_date 可能不是 NULL”。您的数据库中有一个 NOT NULL 列，并尝试插入一行而不在列 Budget_Items.edit_date 给出值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:26:08.327

您的约束异常在这里非常明显

android.database.sqlite.SQLiteConstraintException：Budget_Items.edit_date 可能不是 NULL（代码 19）

尝试在您的调用周围放置一个 try catch 块以查找确切的错误。

# asp.net - 如何强制 ASP.NET 用户控件 DLL 查看父项目的库

> ID：13364490
> 
> 赞同：2
> 
> 时间：2012-11-13T16:21:09.777
> 
> 标签：asp.net, user-controls

我有一个用户控件（.ascx 文件），它引用了几个类库（在 App_Code 中）和一个 Web 服务（在 App_WebReferences 中）。

我已经将 UC 项目编译成一个 DLL，以便它可以在其他项目中使用，并获得了 3 个 DLL：usercontrol.dll、app_code.dll 和 app_webreferences.dll。

将使用此用户控件的其他项目已经具有类库和 Web 服务引用，因此我不想从用户控件项目中引入 app_code.dll 和 app_webreferences.dll 的附加 DLL，但是它不会否则编译。

有没有办法强制用户控制 DLL 在父项目的代码而不是它自己的 DLL 中查找这些库和 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:15:49.980

你的问题的答案是肯定的，需要反思。方法如下： [动态添加引用](https://stackoverflow.com/questions/1413831/c-sharp-add-a-reference-using-only-code-no-ide-add-reference-functions)

# ios - FBProfilePictureView 对象不会显示图像

> ID：13364495
> 
> 赞同：13
> 
> 时间：2012-11-13T16:21:45.257
> 
> 标签：ios, facebook, sdk, profile

我正在为 3.1 iOS SDK 编写 scrumptios facebook 开发者教程。我已经设法从 facebook 显示我的个人资料名称，但是 FBProfilePictureView 不会显示图片

这是 iboutlet 的代码

```
@property (strong, nonatomic) IBOutlet FBProfilePictureView *useProfileImage; 
```

这是我用来显示图片的内容

```
self.useProfileImage.profileID = user.id; 
```

我已经确认它通过在标签中显示它来更改图像的 profileid 变量。

当我第一次运行该项目时，我遇到了这个错误

> “2012-05-18 04:04:11.620 Scrumptious [6548:f803] Interface Builder 文件中的未知类 FBProfilePictureView。”

并按照 FB 教程建议的方式解决了这个问题- 通过`[FBProfilePictureView class];` 在应用程序委托中添加“applicationdidfinishlaunching：withoptions”。

知道为什么图片不显示吗？

[链接到教程](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/personalize/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-07T04:21:47.923

在 didFinishLaunching 的应用程序委托方法中添加`[FBProfilePictureView class];`作为第一行对我来说似乎有点 hacky。

查看 SDK 中的 HelloFacebookSample。这是 4 行注释：

```
// If you have not added the -ObjC linker flag, you may need to uncomment the following line because
// Nib files require the type to have been loaded before they can do the wireup successfully.
// http://stackoverflow.com/questions/1725881/unknown-class-myclass-in-interface-builder-file-error-at-runtime
// [FBProfilePictureView class]; 
```

我尝试添加`-ObjC`标志，它工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T09:48:32.310

要解决此问题，请将其添加为应用委托的应用程序的第一行：didFinishLaunchingWithOptions: 方法：

[FBProfilePictureView 类];

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T08:22:08.307

如 facebook 网页中所述，您需要放置 [FBProfilePictureView 类]；作为 didFinishLaunching 的应用程序委托方法的第一行。（请注意，他们的示例代码没有这个但仍然有效，在我的情况下，没有它它将无法工作。

我创建了一个 UIView 对象，对其进行了调整，然后从 UIView 中选择了 FBProfilePictureView 类。这将断开您的程序和 IB 之间的任何连接，因此您需要再次重新连接，您无法看到图片的错误是由于对象未连接到 IBOutlet 项目。我不确定剪切和粘贴是否会起作用，也许会起作用，但我从 UIView 创建了对象，只是通过 IB 手动更改了类。

没有 [FBProfilePictureView 类]；它会给你一个错误。

如果操作正确，如果您查看 XIB - 在对象窗口/列表中，您应该看到“配置文件图片视图”以及按钮和标签，而不是 FBProfilePictureView。应该显示来自 facebook 的个人资料图片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T03:17:47.857

我也有同样的问题。我的解决方案是取消选中 xib 文件的“文件检查器”中的“使用自动布局”选项。要打开“文件检查器”，请在打开 xib 文件后按 cmd+option+1。

**编辑1**：只需找到另一个解决方案。

尝试为个人资料图片视图设置宽度约束和高度约束。我觉得[这个教程](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T10:02:15.520

我有同样的问题，xcode4.5.1 ios6。解决这个问题：在 IB 中取消选中使用 FBprofilepictureview 的自动布局，也取消选中“autoresize subview”进入视图

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-06T06:49:04.897

他们（fb开发者论坛）说在你的应用程序委托didLunch方法中粘贴这样的方法

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        [FBProfilePictureView class];

        // Create a LoginUIViewController instance where the login button will be
        LoginUIViewController *loginUIViewController = [[LoginUIViewController alloc] init];

        // Set loginUIViewController as root view controller
        [[self window] setRootViewController:loginUIViewController];

        self.window.backgroundColor = [UIColor whiteColor];
        [self.window makeKeyAndVisible];
        return YES;
    } 
```

只需更换

```
 [FBProfilePictureView class]; 

with these commented lines it will work 

    // Override point for customization after application launch.

    // Load the FBProfilePictureView
    // You can find more information about why you need to add this line of code in our troubleshooting guide
    // https://developers.facebook.com/docs/ios/troubleshooting#objc
    [FBProfilePictureView class]; 
```

它会神奇地工作:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-11T21:34:01.493

使用类别扩展现有类的类不会自动加载。从 Xcode 界面构建器使用的类不会自动加载，例如，当您通过在 .xib 文件中绘制视图然后从界面构建器 UI 将其分类为 FBLoginView 来将 FBLoginView 添加到界面时。

`class`有助于创建指向 FBProfilePictureView 的指针。

# html - 不使用 JavaScript 缩放字体大小

> ID：13364500
> 
> 赞同：1
> 
> 时间：2012-11-13T16:21:57.160
> 
> 标签：html, css, fonts

有没有办法在不使用 JavaScript 的情况下缩放字体大小？例如，如果您在 15" 笔记本电脑上打开网页，并且容器 div 的宽度为 400px，并且字体被定义为填充整个 div。然后您在 17" 屏幕上打开网站，并且 div 为 600px。有没有办法让字体自动缩放？

本质上，它在文本中添加了“宽度：100%”，这是您无法做到的。我宁愿在没有 JavaScript 的情况下这样做，因为我已经在网页中使用了很多，而且一段时间后它变得混乱。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:24:57.373

您可以为此使用*媒体查询*。根据页面/容器的宽度，您可以相应地设置字体大小。

例如：

```
@media only screen and (max-device-width: 480px) {
    #container { font-size: 90%; }
}

@media only screen and (max-device-width: 600px) {
    #container { font-size: 100%; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:26:40.827

添加媒体查询您的 css 文件。

```
@media only screen and (max-width: 800px)
{
    body
    {
        //font-size or what you want to change 
    }
} 
```

或者编写外部文件并导入它：

```
<link rel="stylesheet" href="http://domain.tld/screen.css" type="text/css" media="MediaCssId" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:17:42.947

感谢大家的帮助，但我最终做的只是使用 text-align: justify。这不完全是我想要的，但它是一种拉伸文本的解决方案。我感谢您的所有帮助。

# javascript - JavaScript“我”=“这个”，为什么？

> ID：13364503
> 
> 赞同：41
> 
> 时间：2012-11-13T16:22:08.247
> 
> 标签：javascript, extjs

我在许多源代码中看到：

```
var me = this; 
```

特别是在 Ext-JS 4（JS 框架）中。为什么要做这样的事情？是否有任何其他原因，或者您只是希望将变量称为“me”而不是“this”？

谢谢你。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-13T16:23:01.177

通常，您可以将引用保留在引用其他`this`内容的范围内`this`（例如，回调函数）。

考虑这个示例，其中 click 事件处理函数具有与您可能期望的不同的上下文（`this`不引用 的实例`MyClass`）：

```
var MyClass = function (elem) {
    this.elem = elem;
    this.name = "James";
    elem.addEventListener("click", function () {
        alert(this.name); //oops
    }, false);
}; 
```

现在考虑这个例子，我们`this`在构造函数内部存储了对 的值的引用，并在回调函数中使用它：

```
var MyClass = function (elem) {
    var me = this;
    this.elem = elem;
    this.name = "James";
    elem.addEventListener("click", function () {
        alert(me.name); //works!
    }, false);
}; 
```

回调函数可以引用在外部函数中声明的变量，即使在该函数返回之后（`MyClass`构造函数一执行就返回`addEventListener`）。这是一个*闭包*的演示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-31T17:06:04.890

虽然闭包当然是这样做的更明显的原因，但我只是想补充一点，另一个原因可能是减小 javascript 文件的缩小版本的大小。

`this`as 在压缩文件的过程中不能重命名关键字，而局部变量可以。换句话说，只要您使用这个（4 个字符），就可以使用 1 个字符的局部变量。

考虑以下ExtJS 的[示例函数](http://docs.sencha.com/extjs/4.2.2/source/Store.html#Ext-data-Store-method-filterBy)[`Ext.data.Store`](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.data.Store)：

```
filterBy: function(fn, scope) {
    var me = this;

    me.snapshot = me.snapshot || me.data.clone();
    me.data = me.queryBy(fn, scope || me);
    me.fireEvent('datachanged', me);
    me.fireEvent('refresh', me);
} 
```

（注意这里不涉及关闭）

及其缩小版：

```
filterBy:function(b,a){var c=this;c.snapshot=c.snapshot||c.data.clone();c.data=c.queryBy(b,a||c);c.fireEvent("datachanged",c);c.fireEvent("refresh",c)} 
```

（151 个字符/字节）

现在，如果我们没有分配`this`给局部变量，让我们将它与缩小版本进行比较：

```
filterBy:function(b,a){this.snapshot=this.snapshot||this.data.clone();this.data=this.queryBy(b,a||this);this.fireEvent("datachanged",this);this.fireEvent("refresh",this)} 
```

（170 个字符/字节）

如您所见，带有局部变量的版本只占用了`this`每次使用的函数大小的 88%。

尤其是在大型库中，这可以大大减少文件大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-05T00:52:14.747

设置`me=this`允许您`this`在内部范围中使用来自外部范围的变量。

```
var Outer= function () {
        var me = this;
        me.x = "outerx";
        me.inner = {
            x: "innerx",
            displayValues: function () {
                console.log(me.x); //outerx
                console.log(this.x); //innerx
            }
        };
    };

    new Outer().inner.displayValues(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T16:23:52.877

基本上这利用了javascript中的*闭包。*[阅读有关关闭的信息。](http://jibbering.com/faq/notes/closures/)

它用于携带具有不同含义的`this`函数调用的特定实例。`this`

# php - Paypal IPN 更新网站上的“已售单位”

> ID：13364504
> 
> 赞同：0
> 
> 时间：2012-11-13T16:22:17.377
> 
> 标签：php, paypal, paypal-ipn

对不起这个问题的基本性质，但我已经搜索了两天，但我仍然不确定如何做到这一点。

我已经设置了一个贝宝购物车/商店。如何利用 paypal IPN 或第三方服务来识别我要出售的三件商品中的一件特定商品，并向我发送已购买副本的通知，然后更新我原始网站上的柜台？

再次，我们将不胜感激只是建议或指导 - 甚至可以为我指明正确的方向。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:10:04.940

为您提供的基本指南：

*   有一个沙盒帐户（我假设你已经有了）
*   在那里创建一个卖家和买家帐户
*   将卖家帐户的 IPN 设置设置为您的测试 URL（您将在其中检查返回的某些数据）
*   为上面提到的 URL 创建一个带有 IPN 验证器的 php 文件
*   并转到此处[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables#id08CTB0S055Z](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables#id08CTB0S055Z)检查您将要搜索的变量。

我假设您需要选择`num_cart_items`并循环遍历可能`item_nameX`返回的变量。

您不需要编写任何代码来验证 IPN，使用其中一些类： http: [//www.micahcarrick.com/php-paypal-ipn-integration-class.html](http://www.micahcarrick.com/php-paypal-ipn-integration-class.html) http://www.phpclasses.org/package /2249-PHP-Process-Paypal-payment-interactions.html

# asp.net - asp.net gridview项目模板格式货币

> ID：13364506
> 
> 赞同：0
> 
> 时间：2012-11-13T16:22:23.787
> 
> 标签：asp.net, gridview, format, currency, itemtemplate

> 可能重复[的格式化 DataBinder.Eval 数据](https://stackoverflow.com/questions/275194/formatting-databinder-eval-data)

我想更改网格视图中项目模板的格式，我想显示货币..

这是我的代码：

```
<asp:TemplateField HeaderText="Monto">
                <ItemTemplate><%# Eval("Monto")%></ItemTemplate>
                <EditItemTemplate>
                <asp:TextBox runat="server" ID="txtMonto" Text='<%# Eval("Monto", "{0:C2}")%>' /><%-- Eval("Price", "{0:C2}")--%>
                </EditItemTemplate>
                <FooterTemplate>
                <asp:TextBox ID="txtfooterMonto" runat="server"></asp:TextBox>                        
                <asp:RequiredFieldValidator runat="server" id="rfvMonto" controltovalidate="txtfooterMonto" Display="None" 
                errormessage="Monto" ValidationGroup="InsertValidationControls"/> 
                </FooterTemplate> 
            </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:34:29.640

您在此处有用于编辑的格式设置：EditItemTemplate

但不适合在这里查看：ItemTemplate

# javascript - 更新禁用字段的表单记录

> ID：13364510
> 
> 赞同：3
> 
> 时间：2012-11-13T16:22:40.070
> 
> 标签：javascript, html, forms, extjs

我在 ExtJS 4 中有一个复杂的表单，其中表单的各个部分根据用户从某些表单字段中选择的内容动态启用或禁用。**每当我禁用表单域时，我也会清除它当前在其中的任何值。**

我有一个代表表单的模型类。要加载表单，我使用`form.loadRecord(model)`. 为了在用户“提交”表单时更新我的​​模型，我使用`model.set(form.getValues())`.

问题是 ext 的`getValues()`实现跳过了禁用的表单字段。这在我的情况下会导致问题，因为某些已更改值的表单字段被禁用（即，当我禁用它们时我清除了其值的表单字段）。因此，当我调用`model.set(...)`.

解决此问题的最佳方法是什么？我考虑了以下想法，但似乎没有一个很好。如果你有更好的，我想听听。

*   在调用之前清除模型（将所有字段设置为未定义）`model.setValues()`。不幸的是，没有`model.clear()`方法，所以这很快就会变得丑陋 - 我必须获取所有字段并遍历它们，单独清除每个字段。
*   当我禁用和清除表单字段时，也清除模型字段。这似乎违反了关注点分离，也意味着模型会发生变化，即使用户选择取消而不提交表单也是如此。
*   覆盖 ext 的实现`form.getValues()`以不跳过禁用的字段。这更难看，因为需要更改的实际代码在`Ext.form.field.Field`类中，而不是`Ext.form.Basic`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-23T20:07:22.537

禁用字段通常（不仅是 extjs）总是从发布数据中排除。而是将字段设置为只读。readonly 和 disabled 字段之间的平均差异就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T14:18:59.127

我意识到这是一个旧帖子，但我遇到了同样的问题。恕我直言，这是一个相当严重的问题，因为它可能会在您不知情的情况下导致数据问题。在我的情况下，我还将几个复选框设置为`false`禁用时，但由于这种工作方式，它们被留`true`在了幕后。

作为一种解决方法，我现在遍历表单中的所有字段并手动更新每个字段的记录。这是更多的工作，但我不必重写任何类，并且循环足够通用，如果/当表单定义更改时它将继续工作。

```
 var fields = this.getForm().getForm().getFields();
    var record = this.getForm().getRecord();

    for (var i = 0; i < fields.length; i++) {
        var name = fields.items[i].name;
        var value = fields.items[i].value;
        record.set(name, value);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T02:32:28.377

这是您在第三点中公开的解决方案：您必须更改此行为的唯一方法是覆盖此方法。

```
Ext.override('Ext.form.field.Field', {
    getSubmitData: function() {
        var me = this,
            data = null;
        if (!me.isFileUpload()) {
            data = {};
            data[me.getName()] = '' + me.getValue();
        }
        return data;
    }
}); 
```

关于您的第一点， .reject(false) 有用吗？

最新的选项可以覆盖表单中每个字段的 getSubmitData，如下所示：

```
{
   xtype: 'textfield',
   getSubmitData: this.getSubmitDataMyOwnVersion
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-23T18:06:19.803

请注意，Mark Wagoner 的回答破坏了其他组件的任何高级组件/功能，因为它直接获取值而不是获取 getSubmitValue()。我不得不稍微修改 Iontivero 的答案，因为这不是我发现 Extjs 至少在 4.2.0 中调用的类。

```
Ext.define('YourAppName.override.Field', {
  override: 'Ext.form.field.Base',

  getSubmitData: function() {
      var me = this,
          data = null,
          val;
      if (me.submitValue && !me.isFileUpload()) {
          val = me.getSubmitValue();
          if (val !== null) {
              data = {};
              data[me.getName()] = val;
          }
      }
      return data;
  }
}); 
```

然后在 Ext.application: requires: ['YourAppName.override.Field'],

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T17:09:23.380

到目前为止我还没有遇到过这个问题，但是我使用 update() 方法而不是 setValue() 来更新我的模型。也许它以不同的方式处理禁用的字段？或者，由于我们刚刚开始主要测试，我可能也需要这个答案？-- 这是 Form.update 方法的基本用法，假设 form 是 Ext.form.Panel 并且 this.record 是模型实例：

```
//Save record
form.updateRecord(this.record);
this.record.save();
this.record.commit(); 
```

如果这对您不起作用，我建议编写一个类似命名的方法并扩展表单面板以包含它，该方法获取值数组，然后遍历每个值并仅在它不为空时更新它。

# git - 我可以将 GIT 子模块添加到现有项目的根目录，其中文件不联合吗？

> ID：13364511
> 
> 赞同：1
> 
> 时间：2012-11-13T16:22:39.820
> 
> 标签：git, magento, themes, git-submodules

例如，我有 Magento 项目：

```
app/design/frontend/base/
app/design/frontend/default/
errors/default/
errors/local.xml.sample
...
skin/frontend/base/
skin/frontend/default/
... 
```

...和它的外部主题：

```
app/design/frontend/[theme name]/default/
errors/[theme name]/
errors/local.xml.[theme name]
skin/frontend/[theme name]/default/
README.[theme name] 
```

但是当我尝试将主题的存储库作为子模块添加到项目的根目录时......

```
$ git submodule add -b theme_name git://theme_repository.git .
'' already exists in the index 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:13:45.590

您不能在*当前*目录中添加子模块的内容（已经版本化，因此“已经存在于索引中”）。
您将需要使用：

```
git submodule add -b theme_name git://theme_repository.git aDirectory 
```

`aDirectory`将是一个尚不存在的*新目录，并创建为子模块的根文件夹。*

然后，您可以将符号链接添加到该新文件夹，以便访问`app/design/frontend/[theme name]`或`skin/frontend/[theme name]`引用正确的文件夹。

# selenium - 文档混乱：Selenium 支持什么版本的 Firefox？

> ID：13364512
> 
> 赞同：5
> 
> 时间：2012-11-13T16:22:43.177
> 
> 标签：selenium

查看[Selenium 支持的平台，支持](http://seleniumhq.org/about/platforms.html)的 selenium 的最高版本是 v 10。我假设这与当前扩展支持版本 10 一致，v17 是下一个 ESF，将于 2012 年 11 月 20 日发布

*   [Firefox 扩展支持](https://wiki.mozilla.org/Enterprise/Firefox/ExtendedSupport:Proposal)
*   [Firefox 发布日历](https://wiki.mozilla.org/RapidRelease/Calendar)

**然而**，查看 Selenium 客户端驱动程序 2.25（12 年 7 月 18 日）的[发行说明](http://selenium.googlecode.com/svn/trunk/java/CHANGELOG)，它说“将支持的 Firefox 版本更新到 17”

我们应该阅读哪一页？Selenium 支持的平台页面与 2.2.5 版本有何关系？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T03:02:44.850

您应该参考[CHANGELOG](http://github.com/SeleniumHQ/selenium/blob/master/java/CHANGELOG)。那总是最新的。Seleniumhq.org 由某人手动更新......我猜这不会经常发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:48:53.037

我使用 selenium 2.25，我必须下载到 Firefox 版本 14 才能让 selenium 正常工作。其他人已经记录了这个问题，但我没有找到任何资源说明每个版本的 selenium 支持哪些版本的 Firefox。

[selenium-firefox-driver 2.25.0 无法与 Firefox 15 一起正常工作](https://stackoverflow.com/questions/12302940/selenium-firefox-driver-2-25-0-not-working-correctly-with-firefox-15)

此外，如果您在 Web 浏览器中使用 selenium，您将不得不关闭浏览器上的自动更新以防止其更新。

# html - ie6中的全宽绝对定位页脚

> ID：13364513
> 
> 赞同：0
> 
> 时间：2012-11-13T16:22:47.297
> 
> 标签：html, css, sticky-footer

我使用粘性页脚，绝对位置，但在 IE6 中它不会拉伸到 100%。问题是我需要在其父容器上有不同的宽度来伪造列。父级没有指定宽度，但左边距允许左列使用另一种背景颜色。

```
#footer {
background-color:#ccc;
height:100px;
position:absolute;
bottom:0px;
width:100%;
left:0px;
text-align:center;
}
#wrapper {

background-color:red;
min-height:100%;
height:100%;
margin-left:264px;
} 
```

[http://jsfiddle.net/6hvMC/](http://jsfiddle.net/6hvMC/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:04:48.523

真的很难相信，在更好的浏览器时代，你正在为 IE6 尝试一些东西..另[请查看有关 MSIE6 的页面](http://www.gtalbot.org/BrowserBugsSection/MSIE6Bugs/)

对于您的问题，您可以在浏览器为 MSIE6 时以像素而不是百分比为单位指定页脚的宽度。

# unix - 批量替换文本文件中的文本（Linux/OSX 命令行）

> ID：13364514
> 
> 赞同：3
> 
> 时间：2012-11-13T16:22:49.010
> 
> 标签：unix, command-line, replace, text-files, batch-processing

我有数百个文件需要更改其部分文本。

例如，我想用 "rtmp://" 替换 "http://" 的每个实例。

这些文件具有 .txt 扩展名，并分布在多个文件夹和子文件夹中。

我基本上是在寻找一种方式/脚本，它可以通过每个文件夹/子文件夹和每个文件，如果它在该文件中找到“http”的出现以用“rtmp”替换它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T16:27:00.123

You can do this with a combination of `find` and `sed`:

```
find . -type f -name \*.txt -exec sed -i.bak 's|http://|rtmp://|g' {} + 
```

This will create backups of each file. I suggest you check a few to make sure it did what you want, then you can delete them using

```
find . -name \*.bak -delete 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:27:37.870

Here's a `zsh` function I use to do this:

```
change () {
        from=$1 
        shift
        to=$1 
        shift
        for file in $*
        do
                perl -i.bak -p -e "s{$from}{$to}g;" $file
                echo "Changing $from to $to in $file"
        done
} 
```

It makes use of the nice Perl mechanism to create a backup file and modify the nominated file. You can use the above to iterate through files thus:

```
zsh$ change http:// rtmp:// **/*.html 
```

or just put it in a trivial `#!/bin/zsh` script (I just use zsh for the powerful globbing)

# c++ - 给定迭代器检索容器的比较函数

> ID：13364519
> 
> 赞同：16
> 
> 时间：2012-11-13T16:23:09.213
> 
> 标签：c++, generics, c++11

给定一个迭代器，是否可以为该迭代器引用的集合检索/使用正确的比较函数？

例如，假设我正在编写一个通用算法：

```
template <class InIt, class T>
void do_something(InIt b, InIt e, T v) { 
    // ...
} 
```

现在，假设我想做一些简单的事情，比如 find `v`in `[b..e)`。如果`b`和`e`是 a 的迭代器`std::vector`，我可以简单地使用`if (*b == v) ...`. 然而，让我们假设`b`and`e`是 a 上的迭代器`std::map`。在这种情况下，我*应该*只比较*keys*，而不是 map 中包含的整个 value 类型。

所以问题是，给定映射中的那些迭代器，我如何检索只会比较键的映射比较函数？同时，我不想盲目地假设我正在使用`map`其中之一。例如，如果迭代器指向 a `set`，我想使用为它定义的比较函数`set`。如果他们指向`vector`or `deque`，我可能不得不使用`==`，因为这些容器不会定义比较函数。

哦，差点忘了：我意识到在许多情况下，一个容器只会有一个等价物`operator<`而不是`operator==`它包含的元素——我完全可以使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T16:28:06.610

迭代器不必连接到容器，因此它们不会向您提供有关它们不一定连接到的容器的任何详细信息。这是基本的迭代器抽象：迭代器分隔序列，而不考虑序列来自何处。如果您需要了解容器，则必须编写采用容器的算法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T16:39:04.527

没有标准方法可以从迭代器映射到底层容器类型（如果有这样的容器的话）。您也许可以使用一些启发式方法来尝试确定哪个容器，尽管这并不简单，也可能无法保证。

例如，您可以使用元函数来确定 *value_type* 是否为`std::pair<const K, T>`，这暗示这可能是 a`std::map`和提取类型后，`K`并`T`尝试使用元函数来确定迭代器的类型和`std::map<K,T,X,Y>::iterator`或的类型匹配,`std::map<K,T,X,Y>::const_iterator`的特定组合。`X``Y`

In the case of the map that could be sufficient to *determine* (i.e. guess with a high chance of success) that the iterator refers to a `std::map`, but you should note that even if you can use that and even extract the type `X` of the comparator, that is not sufficient to *replicate* the comparator in the general case. While uncommon (and not recommended) comparators can have state, and you would not know which is the particular state of the comparator without having access to the container directly. Also note that there are cases where this type of heuristic will not even help, in some implementations of `std::vector<>` the iterator type is directly a pointer, and in that case you cannot differentiate between an 'iterator' into an array and an iterator into a `std::vector<>` of the same underlying types.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T16:53:54.883

Unfortunately iterators don't always know about the container that contains them (and sometimes they aren't in a standard container at all). Even the `iterator_traits` only have information about the value_type which doesn't specifically tell you how to compare.

Instead, let's draw inspiration from the standard library. All the associative containers (`map`, etc) have their own `find` methods rather than using `std::find`. And if you *do* need to use `std::find` on a such a container, you don't: you use `find_if`.

It sounds like your solution is that for associative containers you need a `do_something_if` that accepts a predicate telling it how to compare the entries.

# python - python gi.repository.gtk 菜单分隔符丢失

> ID：13364521
> 
> 赞同：3
> 
> 时间：2012-11-13T16:23:17.963
> 
> 标签：python, pygtk, gtk3, pygobject

我想通过右键单击显示简单的弹出菜单，菜单工作正常，但缺少菜单分隔符，我搜索了类似的示例，但它们都使用 pygtk 但我使用的是 gi.repository 我不知道我的代码错误还是这个问题是所有关于图书馆。

我的代码是

```
#!/usr/bin/python
from gi.repository import Gtk

class Win(Gtk.Window):

    def __init__(self):
        super(Win, self).__init__()
        self.resize(400,280)
        self.button = Gtk.Button()
        self.add(self.button)
        self.button.connect("button-press-event", self.button_press)
        self.connect("destroy", Gtk.main_quit)
        self.show_all()

    def button_press(self,widget,event):
        if event.button == 3:
            self.menu = Gtk.Menu()
            self.menu_copy = Gtk.MenuItem("Copy")
            self.menu_paste = Gtk.MenuItem("Paste")
            self.menu_select_all = Gtk.MenuItem("Select All")
            self.menu.append(self.menu_copy)
            self.menu.append(self.menu_paste)
            # separator 1
            self.menu.append(Gtk.SeparatorMenuItem())
            # separator 2
            self.menu.append(Gtk.MenuItem())

            self.menu.append(self.menu_select_all)

            self.menu.show_all()
            self.menu.popup(None, None, None, None, event.button, event.get_time())
            pass
def main():
    app = Win()
    Gtk.main()

if __name__ == "__main__":    
    main() 
```

这是我的菜单[示例 1的屏幕截图](http://i.imgur.com/S0sc6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:07:58.030

你有什么版本的pygobject？我在 6 月份为此提交了一个补丁，并在 3.3.4 中修复：[https ://bugzilla.gnome.org/show_bug.cgi?id=670575](https://bugzilla.gnome.org/show_bug.cgi?id=670575)

如果在您使用`Gtk.SeparatorMenuItem.new()`而不是构造函数时分隔符正常工作，那么您就知道这是上述错误。

# php - 将 php 转换为 jQuery 以获取 XML？

> ID：13364523
> 
> 赞同：1
> 
> 时间：2012-11-13T16:23:31.397
> 
> 标签：php, jquery, xml

我有一个 XML 提要，我必须使用 php 将其拉入我的服务器。最后一行是这样的：

```
$xml = file_get_contents($url); 
```

我正在使用一种非常标准的方法来使用 jQuery 读取测试 XML 测试文件：

```
$(document).ready(function(){
            $.ajax({
                type: "GET",
                url: "abc.xml",
                dataType: "xml",
                success: function(xml) { 
```

我的问题是，如何将 jQuery 的 abc.xml 替换为 php 的 $xml 变量？这是公认的做法吗？

如果这是最好的方法，我可以每隔几个小时将此文件写入我的服务器。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:27:37.237

Replace that line :

```
url: "abc.xml", 
```

With something like that

```
url: "yourphpfile.php", 
```

Don't forget to add

```
echo $xml; 
```

At the end of your php file. **Don't echo anything else, anywhere in your php script.**

You can also add

```
header("Content-type:text/xml"); 
```

at the beginning of your php file.

# php - 使用 PHP 解析 XML - 错误：文档末尾的额外内容

> ID：13364526
> 
> 赞同：0
> 
> 时间：2012-11-13T16:23:37.967
> 
> 标签：php, xml, soap, curl, simplexml

前言：在发布这个问题之前，我进行了彻底的搜索和阅读。我看到了一些与我类似的问题，有些甚至有相同的错误信息，但大多数都有简单的答案，例如“需要单个根元素”。我无法在这里应用这些解决方案，因此我发布了。

我正在使用 PHP 和 cURL 来使用 .NET Web 服务，其中我以 XML 格式发送数据，并以 XML 格式接收响应。它工作正常，我在 .NET 服务端验证了良好的写入。当我使用：

```
$xml_obj = simplexml_load_string($result);
print $xml_obj->asXML() 
```

响应 XML 像这样返回到浏览器：

![在此处输入图像描述](../Images/cfec4669670a99efced168c92dfa7f85.png)

我正在尝试解析该 XML，以便我可以对潜在的错误和/或成功的响应做一些有意义的事情。我正在尝试使用这种方法：

```
$xml = new SimpleXMLElement($xml_obj);
$is = $xml->xpath('*/i');

foreach($is as $i) {
    echo $i['title'], ': ', $i['description'], "\n";
} 
```

这可能是也可能不是最好的方法。当我执行此操作时，我收到此消息：

![在此处输入图像描述](../Images/073f4b0bcf8303156ce87943fce2a032.png)

我不清楚问题是否出在响应 XML 中（错误消息似乎表明，但我无法找到），或者我是否试图以不正确的方式解析 XML。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:28:43.413

You can't mix plain text output with XML output. You need to use one or the other.

**Plain Text Output:**

```
foreach($is as $i) {
    echo $i['title'], ': ', $i['description'], "\n";
} 
```

View the source of the resulting page and you will clearly see the malformed (plain text) response.

If you are outputting XML, I would expect something more like:

```
foreach($is as $i) {
    echo '<title>', $i['title'], '</title><description>', $i['description'], '</description>';
} 
```

# sql - 如何获得一个可以使用索引的虚拟数据库？

> ID：13364527
> 
> 赞同：-3
> 
> 时间：2012-11-13T16:23:36.370
> 
> 标签：sql

如何获得一个可以对表进行索引的虚拟数据库？

什么虚拟数据库最适合我的学习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:26:03.303

你试过[http://sqlfiddle.com/](http://sqlfiddle.com/)吗？使用简单，支持mySQL和SQL Server

# python - 解码十六进制字符串给了我垃圾

> ID：13364530
> 
> 赞同：-2
> 
> 时间：2012-11-13T16:23:47.167
> 
> 标签：python, hex

我有一个十六进制字符串：

`12104c06134e5709140f104f02521b0a0442020c4d070b184f4815541f0800484e1e0241061d064d540b0a020210194510164d4f3a005343004e430e1e1d0a524612171b0117001b0e45431c0c1d160a520d11744e19061a114d0e55174f084e543714050b174353541b48070e000e4d`

如果你很好奇，我只是想解码成可读的文本（虽然这是一个加密问题，所以解码的文本仍然看起来是无意义的，但不是十六进制的）。为此，我将上述消息保存到变量 msg 中。然后我执行了这个操作：

```
msg.decode('hex') 
```

但是，当我打印该值时，我会得到一些字符、一堆奇怪的方块和多行碎片的文本。这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:59:40.143

听起来您认为某些[ASCII](http://en.wikipedia.org/wiki/ASCII)数据存储在该十六进制字符串中。如果是这种情况，十六进制字符串中的每 2 个字符代表 ASCII 文本的一个字节。如果是这种情况，您可以这样做来解码它：

```
>>> a = "12104c06134e5709140f104f02521b0a0442020c4d070b184f4815541f0800484e1e0241061d064d540b0a020210194510164d4f3a005343004e430e1e1d0a524612171b0117001b0e45431c0c1d160a520d11744e19061a114d0e55174f084e543714050b174353541b48070e000e4d"
>>> bytes = [a[i:i+2] for i in range(0,len(a),2)]
>>> s_decoded = [chr(int(c,16)) for c in bytes]
>>> ''.join(s_decoded)
'\x12\x10L\x06\x13NW\t\x14\x0f\x10O\x02R\x1b\n\x04B\x02\x0cM\x07\x0b\x18OH\x15T\x1f\x08\x00HN\x1e\x02A\x06\x1d\x06MT\x0b\n\x02\x02\x10\x19E\x10\x16MO:\x00SC\x00NC\x0e\x1e\x1d\nRF\x12\x17\x1b\x01\x17\x00\x1b\x0eEC\x1c\x0c\x1d\x16\nR\r\x11tN\x19\x06\x1a\x11M\x0eU\x17O\x08NT7\x14\x05\x0b\x17CST\x1bH\x07\x0e\x00\x0eM' 
```

但是，正如您所看到的，这些字符中的大多数都是“不可打印”字符（即它们的 ASCII 值不编码一些人类可读的字符，如“A”或“d”）。这是一个解码包含可打印 ASCII 字符的十六进制字符串的示例：

```
>>> a2 = "43616c6562"
>>> bytes2 = [a2[i:i+2] for i in range(0,len(a2),2)]
>>> bytes2
['43', '61', '6c', '65', '62']
>>> ''.join([chr(int(c,16)) for c in bytes2])
'Caleb'
>>> 
```

# matlab - Matlab：无法绘制具有重复 x 值的时间序列。如何摆脱重复的行？

> ID：13364533
> 
> 赞同：1
> 
> 时间：2012-11-13T16:23:52.860
> 
> 标签：matlab, rows, average

所以我有一个这种格式的矩阵数据：Data = [Date Time Price]

现在我想做的是根据时间绘制价格，但我的数据非常大，并且在同一日期/时间有多个价格的行，例如第一行、第二行

```
29  733575.459548611  40.0500000000000
29  733575.459548611  40.0600000000000
29  733575.459548612  40.1200000000000
29  733575.45954862   40.0500000000000 
```

我想取相同日期/时间的平均价格，并去掉任何额外的行。我的目标是对值进行线性内插，这就是为什么我必须只有一个时间到一个价格值。

我怎样才能做到这一点？我这样做了（这减少了矩阵，因此它只需要第一行用于重复日期/时间的行）但我不知道如何取平均值

```
function [ C ] = test( DN )

[Qrows, cols] = size(DN);
C = DN(1,:);

for i = 1:(Qrows-1)
if DN(i,2) == DN(i+1,2)
    %n = 1;
    %while DN(i,2) == DN(i+n,2) && i+n<Qrows
    %        n = n + 1;
    %end
    % somehow take average;
else
    C = [C;DN(i+1,:)];
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:40:55.237

尝试以下操作：

```
[Qrows, cols] = size(DN);

% C is your result matrix
C = DN;

% this will give you the indexes where DN(i,:)==DN(i+1)
i = find(diff(DN(:,2)==0);

% replace C(i,:) with the average
C(i,:) = (DN(i,:)+DN(i+1,:))/2;

% delete the C(i+1,:) rows
C(i,:) = []; 
```

希望这有效。如果重复的时间值成对出现（在 i 和 i+1 之间计算平均值），这应该可以工作。如果您有 3 次或更多的时间重复，请尝试重新考虑如何更改这些步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:58:55.440

> [`[C,ia,ic] = unique(A,'rows')`还返回索引向量 ia 和 ic](http://www.mathworks.de/de/help/matlab/ref/unique.html) 使得 C = A(ia,:) 和 A = C(ic,:)

`A`如果您仅将不想平均的列用作输入（此处为：日期和时间），`ic`则对于要组合的行具有相同值的每一行都有一个值。

从那里到你想要的方式对于 MATLAB 初学者来说可能更直观的`for`循环：使用逻辑索引，例如`DN(ic==n,3)`你得到一个你想要平均的所有值的向量（`n`它所属的日期时间行的索引在哪里）。您需要为所有不同的日期时间组合执行此操作。

一种更面向矢量的方法是使用`accumarray`，它可以通过两行解决您的问题：

```
[DateAndTime,~,idx] = unique(DN(:,1:2),'rows');
Price = accumarray(idx,DN(:,3),[],@mean); 
```

我不太确定您希望结果如何，但`[DataAndTime Price]`再次为您提供输入的三行格式。

请注意，如果您的输入包含以下内容：

```
1 0.1 23
1 0.2 47
1 0.1 42
1 0.1 23 
```

那么在`unique(...,'rows')`上述行之前应用到输入的结果将给出与`1 0.1`直接使用上述不同的结果，因为后者将计算 23、23 和 42 的平均值，而在前一种情况下，一个 23 将被消除为重复之前和具有 42 的不同行的平均权重更大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:39:01.830

像这样的东西会起作用，但我没有运行代码，所以我不能保证没有错误。

```
newX = unique(DN(:,2));
newY = zeros(1,length(newX));

for ix = 1:length(newX)
     allOcurrences = find(DN(:,2)==DN(i,2));
          % If there's duplicates, take their mean
          if numel(allOcurrences)>1   
               newY(ix) = mean(DN(allOcurrences,3));
          else 
          % If not, use the only Y value
               newY(ix) = DN(ix,3);
          end
end 
```

# linux - 在 Linux（一般是 POSIX）中，如何确定线程是否在系统调用中？

> ID：13364535
> 
> 赞同：3
> 
> 时间：2012-11-13T16:24:05.590
> 
> 标签：linux, multithreading, posix, system-calls

我必须通过知道它的 tid 来知道一个线程当前是否正在执行系统调用（例如读/写/等）。有没有办法在 Linux 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:37:44.993

这应该列出线程的状态代码

```
ps -p<pid> -o stat 
```

两个相关的代码是：

```
D    uninterruptible sleep (usually IO)
S    interruptible sleep (waiting for an event to complete) 
```

编辑：如果您想以编程方式获取确切的系统调用，您可以`ptrace`按照您的建议和阅读`EAX`使用，您还应该使用`PTRACE_SYSCALL`标志让进程在下一个系统调用条目处停止。

# json - 解析 JSON 化数组时出错

> ID：13364537
> 
> 赞同：0
> 
> 时间：2012-11-13T16:24:12.000
> 
> 标签：json, gson

我有一个包含 SpellingError 对象数组的 JSON 字符串。我使用 Gson 将其转换为 SpellingErrors 列表。解析工作正常（或者至少 ddoes 不会引发任何解析错误）。但是，当我尝试遍历我希望的 SpellingErrors 列表时，我发现它们实际上是 StringMaps，并且我收到错误“com.google.gson.internal.StringMap 无法转换为 SpellingError”

知道使用 Gson 将我的对象数组从 JSON 字符串中拉出的正确方法是什么吗？我可以看到数组中有 3 个 StringMap 对象代表我的 3 个对象。

这是有问题的代码

```
 spellingErrorsJSON = "[{\"context\":\"This is a stmple string\",\"errorIndex\":\"3\"},{\"context\":\"This is a stmple string 2\",\"errorIndex\":\"3\"},{\"context\":\"This is a stmple string 3\",\"errorIndex\":\"3\"}]";
    List<SpellingError>spellingErrors;  
    spellingErrors = m_gson.fromJson( spellingErrorsJSON, List.class );

    for( SpellingError spellingError : spellingErrors )
    {
        if( spellingError.isValid() )
        {
            String spellingMistake = spellingError.getSpellingMistake();
            String[] suggestions = Query.lookupSpelling( spellingMistake, LOCALE_US);
        }
    } 
```

但是，如果我使用

```
m_gson.fromJson( spellingErrorsJSON, SpellingError[].class ); 
```

相反，我得到一个解析异常“预期为 BEGIN_OBJECT 但为 BEGIN_ARRAY”</p>

这是我的拼写错误 PoJo

```
public class SpellingError
{
    private String [] context;
    private int errorIndex;

    public String[] getContext()
    {
        return context;
    }

    public void setContext(String[] context)
    {
        this.context = context;
    }

    public int getErrorIndex()
    {
        return errorIndex;
    }

    public void setErrorIndex(int index)
    {
        this.errorIndex = index;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:42:21.063

您可以使用 TypeToken 告诉 Gson，您希望在结果列表中包含哪种类型的对象。更换你的线路

```
spellingErrors = m_gson.fromJson( spellingErrorsJSON, List.class ); 
```

和

```
Type collectionType = new TypeToken<List<SpellingError>>(){}.getType();
spellingErrors = m_gson.fromJson( spellingErrorsJSON, collectionType ); 
```

编辑：这对我有用：

```
import java.lang.reflect.Type;
import java.util.List;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

class SpellingError
{
    private String  context;
    private int errorIndex;

    public String getContext()
    {
        return context;
    }

    public void setContext(String context)
    {
        this.context = context;
    }

    public int getErrorIndex()
    {
        return errorIndex;
    }

    public void setErrorIndex(int index)
    {
        this.errorIndex = index;
    }
}

public class TestGson {
    private static Gson m_gson = new Gson();

    class DataPacket {
        public String fn;
        public Object data;
    }

    class ChatPacket {
        public int roomId;
        public String message;
    }

    public static void main(String[] args) {
        String spellingErrorsJSON = "[{\"context\":\"This is a stmple string\",\"errorIndex\":\"3\"},{\"context\":\"This is a stmple string 2\",\"errorIndex\":\"3\"},{\"context\":\"This is a stmple string 3\",\"errorIndex\":\"3\"}]";
        List<SpellingError>spellingErrors;  
        Type collectionType = new TypeToken<List<SpellingError>>(){}.getType();
        spellingErrors = m_gson.fromJson( spellingErrorsJSON, collectionType );

        for( SpellingError spellingError : spellingErrors )
        {
            String spellingMistake = spellingError.getContext();
        }

    }

} 
```

# symfony - 一张桌子的不同型号

> ID：13364538
> 
> 赞同：2
> 
> 时间：2012-11-13T16:24:16.073
> 
> 标签：symfony, doctrine-orm

是否可以（并推荐）为一张桌子使用多个模型？

我有多种类型的“人”（老师、学生、员工、公司），并希望将它们存储在同一张表中。他们拥有所有共同的个人数据，但有其他关系（例如学生 -> 公司、教师 -> 房间等）、附加信息（例如公司：公司名称、教师：教育）等等。

为这种情况获得一些最佳实践会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:42:39.410

这真的很简单！您必须制作这样的实体：

```
 /**
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({"teacher" = "Teacher"})
 */
class Person
{
    /**
    * @ORM/Id
    **/
    private $id;
    /**
    * @ORM/Column
    **/
    private $name;
    //setters getters and all the stuff
} 
```

在 Teacher.php 文件中：

```
/**
 * @ORM\Table()
 * @ORM\Entity()
 */
class Teacher extends Person
{
    private $salary;
} 
```

成功的关键是这两个注释：

```
@ORM\DiscriminatorColumn(name="discr", type="string")
@ORM\DiscriminatorMap({"teacher" = "Teacher"}) 
```

首先是告诉 ORM 将使用哪一列来验证人员是否是教师。其次是告诉哪些类正在扩展基本 Person 类以及在我之前提到的列中放入什么。当您这样做时，您将有两个表，但在教师中，您将只有添加到教师实体的数据:)

一般来说，在使用 ORM 时，您必须考虑对象抽象级别并且不关心 DB（嗯，这并不完全正确，但这是一般的想法）:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:02:40.087

不建议这样做。以下是我能想到为什么*不*这样做的几个原因：

*   如果教师和学生共享同一组 ID，如何阻止某人使用学生 ID 加载教师，并在“工资”字段中添加值？可以限制此访问，但可能需要自定义存储库或其他修改。
*   假设教师必须有薪水。如果学生和教师共享同一个表，那么数据库将无法在不给学生工资的情况下强制执行该约束。
*   即使学生永远不会有薪水，数据库也可能需要为该字段分配空间。

IBM 有一篇关于[在关系数据库中映射继承](http://www.ibm.com/developerworks/library/ws-mapping-to-rdb/#h5)的好文章，在实现这种类型的模型时，我已经多次提到它。他们引用了三种方法：（1）使用单个表来表示所有类（您提出的方法），（2）对子类使用单独的表，或（3）对所有类使用单独的表。最后，它归结为个人喜好，但我通常这样做的方式是#2和#3之间的混合，我为所有类创建模型，但我限制了子类对父类的访问，而是编写快捷方法来访问父数据。考虑一下：

```
class Person
{
    private $id;
    private $name;

    public function getId()
    { return $this->id; }

    public function getName()
    { return $this->name; }
    public function setName($name)
    { return $this->name; }
}

class Teacher
{
    private $id;
    private $person; // reference to Person table
    private $salary;

    public function getId()
    { return $this->id; }

    private function getPerson()
    { return $this->person; }

    public function getSalary()
    { return $this->salary; }
    public function setSalary($salary)
    { $this->salary = $salary; }

    public function getName()
    { return $this->getPerson()->getName(); }
    public function setName($name)
    { $this->getPerson()->setName($name); }
} 
```

我通常选择这种方法，因为我可以根据情况需要将老师视为简单的老师或人。假设我有两页：一页打印出*每个人的*姓名（教师和学生），另一页只打印教师和他们的薪水：

```
// Assume:
// $people = $this->getDoctrine()->getEntityManager()->getRepository("MyBundle:Person")->findAll()

{% for person in people %}
    {{ person.name }}
{% endfor %}

// Assume:
// $teachers = $this->getDoctrine()->getEntityManager()->getRepository("MyBundle:Teacher")->findAll()

{% for teacher in teachers %}
    {{ teacher.name }} makes ${{ teacher.salary }}
{% endfor %} 
```

# php - 用于移动 Web (jQuery) Android 和 iOS 应用程序的 PHP 后端框架

> ID：13364540
> 
> 赞同：0
> 
> 时间：2012-11-13T16:24:21.160
> 
> 标签：php, json, jquery-mobile

所以我有一个简单的 jQuery Mobile 站点，它通过 PHP 与 MySQL 数据库交互。最初会查询用户订单，然后使用移动 Web 界面进行更新。我没有使用任何 PHP 框架，我只编写了 7 或 8 个 PHP 文件来检索、更新、创建和删除订单记录。

当我开始开发 Android 和 iOS 应用程序时，我意识到拥有一个 PHP 后端框架是有益的，它可以处理从 3 个来源中的任何一个来源创建/读取/更新/删除我的订单和用户记录的请求，而无需关心哪个来源它是。我想在服务器端数据库处理和 3 个移动接口中的每一个之间创建一个抽象层。我设想能够从客户端进行 POST 调用，将 TYPE 参数和数据的 JSON 数组传递到像 /myserver/mRequest.php 这样的通用页面，这将根据 TYPE 确定要做什么并处理处理，将一个 STATUS 变量和一个 JSON 数据数组返回给客户端。

是否有一个好的（最好是免费的）PHP 框架来帮助布局后端？我看过 Zend 和其他一些，但它们看起来很重，并且适用于桌面站点。我想尽量减少对服务器的调用次数以及来回发送的数据量（我们都知道 Verizon 3G 有多慢）。

我希望那里有一些轻量级的框架，可以作为我组织 CRUD 函数、检查空值、处理 MySQL 错误等的骨架。

如果没有，开发 PHP 移动后端的指南将是下一个最佳选择。

注意：我很抱歉，已经有一个帖子在问这​​个问题，但我找不到我认为合适的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:32:26.723

几乎所有主要的免费框架都可以做到这一点，例如 Symfony 可以为您的 jQM 页面处理常规页面模板，并且也可以很好地处理 ajax。

但是，如果您只需要用于 AJAX 处理的框架和更广泛的框架，则可能会建议您开发简单的脚本，用更少的努力和更少的学习曲线（当然，学习可能是您计划的一部分） .

另一种选择是脚本和 PHP 之间的数据抽象层，这将在数据更改方面为您提供更大的灵活性，但不会在两者之间使用庞大的框架给您带来负担。Propel 和 Doctrine 值得一看，它们经常被用作 Web 框架的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:28:18.583

我个人非常喜欢[CodeIgniter](http://codeigniter.com)，它是一个非常干净且功能强大的轻量级 PHP 框架，并且可以轻松访问数据库。

看看吧。

问候，史蒂芬

# actionscript-3 - Flash 作为 VOIP 客户端崩溃

> ID：13364543
> 
> 赞同：0
> 
> 时间：2012-11-13T16:24:24.217
> 
> 标签：actionscript-3, apache-flex, voip

我有一个具有三种状态的 Web 应用程序。

1.  拨入-（基本上，以下都不是）
2.  VOIP — 连接到 Freeswitch 实例
3.  听——此选项是通过与 FMS 实例的正常连接（与 #2 不同的服务器）。

当用户首次进入应用程序时，通过弹出窗口选择初始状态。从那时起，这些都由一个 ComboBox 控制。当它发生变化时，应用程序会检查所有打开的连接，然后关闭它们。然后它会打开适当的新连接。

问题是有时这会导致应用程序冻结 10-20 秒，有时会导致它崩溃，我不知道为什么。`trace`应该在 VOIP 更改之前触发的 s 仅在冻结之后出现（时间戳会有延迟），但是如果我注释掉对更改函数的调用，它们会按照预期的顺序出现。

到底是怎么回事？这种架构根本站不住脚吗？有没有更好的方法来做事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:30:45.910

显然......这些联系是一条红鲱鱼。

查看服务器上的结果后，很明显问题出在将处理函数的调用放在 Flex 生成的 EventListener 中。之前的开发人员使用了`change="handler(event)"`导致崩溃的属性。当我切换到 时`<voip-drop-box>.addEventListener("change",function(e:Event):void{});`，一切都立即清除了。

# javascript - 如何从 highcharts 系列中删除所有点

> ID：13364549
> 
> 赞同：3
> 
> 时间：2012-11-13T16:24:40.927
> 
> 标签：javascript, charts, highcharts

使用 HighCharts 我想从一个系列中删除所有点，以便我可以添加一个新数据集。有没有比遍历所有点并像这样一个一个地删除它们更好的方法？：

```
for(var i=0; i < chart.series[0].points.length; i++){
    chart.series[0].points[i].remove()
} 
```

我还看到了对删除整个系列的方法的引用`chart.series[0].remove();` 这似乎删除点更快，但我不明白如何创建一个具有相同属性和名称的空系列，可以添加点，这就是我选择的原因删除点。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T17:14:01.337

如果您想从意甲中删除一些积分，我建议您存储您的意甲积分，删除您想要的积分，然后`setData`再次用于设置您的意甲数据。

如果你想**删除所有点而不删除**你可以使用的系列`chart.series[0].setData([]);`。

您可以使用`addPoint`一个一个或`setData`多个添加点。
有一些例子说明了如何做到这一点。
[**演示**](http://jsfiddle.net/TjTn7/)
[**参考**](http://api.highcharts.com/highstock#object-Series)

# android - “未定义的引用”（函数）和“存档中不是对象”Android ndk-build

> ID：13364558
> 
> 赞同：1
> 
> 时间：2012-11-13T16:25:06.710
> 
> 标签：android, curl, build, android-ndk

我会很快暴露我的问题。我正在尝试在 Android 上移植 curl 并在我的应用程序中使用它。我用 ARM 工具链构建了 curl 库，配置并制作了（几次以确保我第一次没有做错任何事情）。

然后我继续将新创建的 libcurl.a 和 curljni.c 放入我的 jni 文件夹中，只要以下 Android.mk ：

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE:= libcurl
LOCAL_SRC_FILES := libcurl.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include/curl
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := curljni
LOCAL_SRC_FILES := curljni.c
LOCAL_C_INCLUDES := $(LOCAL_PATH)/include/curl
LOCAL_STATIC_LIBRARIES := libcurl
include $(BUILD_SHARED_LIBRARY) 
```

我一直在尝试很多东西，我很确定它现在看起来不错，但是每当我尝试使用 ndk-build 工具进行构建时，我都会获得以下信息：

![在此处输入图像描述](../Images/aea56adbb38ca4005b336a4fc01c4489.png)

注意：curljni.c 调用 libcurl 库及其 easy.h 和 curl.h 文件中的函数。然后将它们包含在文件的顶部。

我还尝试使用 LOCAL_WHOLE_STATIC_LIBRARIES 而不是 LOCAL_STATIC_LIBRARIES 要求将整个库加载到我的 Android 应用程序中，但没有取得更多成功：

![在此处输入图像描述](../Images/4cee17965793612437a5e1bff0b73614.png)

之前 ：

*   下载 curl.7.28.0
*   为 ARM 4.6 制作了一个独立的工具链
*   修复了 curl 中的几个文件，其换行符类似于 DOS 并且需要类似于 Unix（配置中的错误） - 其中一个是 depcomp，链接到 libcurl_la-file.lo
*   ./configure --host=arm-linux-androidaebi --with-zlib --enable-ipv6
*   制作/制作安装
*   从 curl\lib.libs 添加生成的 libcurl.a

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:30:03.563

好的，您的问题是您的库 libcurl.a 不是使用 Android ndk gcc 构建的。您已经完成了：

```
$ ./configure --host=arm-linux-androidaebi --with-zlib --enable-ipv6
$ make
$ make install 
```

这将使用您的 PC gcc 生成一个库 ..不好。

* * *

我所做的是使用 line 命令（或像您所做的那样）为 android 配置开源库 l：

```
 ./configure --build=x86_64-unknown-linux-gnu --host=arm-linux-androideabi --target=arm-linux-androideabi 
```

但是你不应该调用 make 和 make install ！.

您必须创建一个 android.mk whinch 将编译您的 libcurl + 您的 jni 文件“curljni.c”中的所有源文件并将所有源文件放在一个库中：这里是 Android.mk 编译 SQLITE3 的示例

```
###################################################
# SQLITE3
###################################################
include $(CLEAR_VARS)
LOCAL_MODULE := Mysqlite3
MY_LOCAL_SQLITE_SRC := $(LOCAL_PATH)/sqlite/

LOCAL_CPPFLAGS := -g
LOCAL_CPPFLAGS += -I $(MY_LOCAL_SQLITE_SRC)

 LOCAL_EXPORT_C_INCLUDES:=$(MY_LOCAL_SQLITE_SRC)

FILE_LIST :=$(wildcard $(MY_LOCAL_SQLITE_SRC)*.c*)
LOCAL_SRC_FILES += $(FILE_LIST:$(LOCAL_PATH)/%=%)

# My SQLITE3 JNI FILE 
LOCAL_SRC_FILES +=mysqlite_jni.cpp

# include native  NDK library  liblog and libz 
LOCAL_LDLIBS := -llog -lz
include $(BUILD_SHARED_LIBRARY) 
```

# c# - C# 64 位应用程序，大内存地址感知

> ID：13364559
> 
> 赞同：3
> 
> 时间：2012-11-13T16:25:09.037
> 
> 标签：c#, memory, windows-7, windows-7-x64

我对应用程序的内存限制有点困惑。据我所知，如果我编写针对 x64 的 ac# 应用程序，我的程序将可以访问 8TB 的虚拟地址空间 = HD 上的空间？

操作系统 >= Windows 7 专业版支持 192gigs 的 RAM。所以如果我有 192gig 系统（不幸的是我没有），我可以将超过 8.1TB 的数据加载到内存中（假设没有其他进程正在运行）？

是否仅在我用完可用内存时才使用虚拟内存？我假设存在与虚拟内存与使用 RAM 相关的性能影响？

抱歉，如果这些问题看起来很愚蠢，但是在内存管理方面，我很绿色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:54:45.583

您的问题实际上是几个相关的问题，分别处理：

> 操作系统 >= Windows 7 专业版支持 192gigs 的 RAM。所以如果我有 192gig 系统（不幸的是我没有），我可以将超过 8.1TB 的数据加载到内存中（假设没有其他进程正在运行）？

不，它仍然是 8 TB。这是可寻址空间的最大数量，无论是在 RAM 中还是在其他地方。

但是，即使您已经卸载了 Windows 本身，您也永远无法使用 8 TB，因为操作系统需要跟踪正在使用的空间。总的来说，您大概可以达到 7 TB。

> 只有当我用完可用的内存时才使用虚拟内存？

不，如果您打开了虚拟内存，则通常会将整个 RAM 预加载到您的 HDD 上（等待几秒钟）。这允许操作系统在需要时卸载某些内容以腾出空间，而无需保留数据。请注意，操作系统会保持彻底的跟踪，因此会知道是否是这种情况。

> 我假设存在与虚拟内存与使用 RAM 相关的性能影响？

取决于你的上下文。硬盘驱动器上的每次搜索都需要计算永恒，但它仍然只有几分之一秒。假设您的进程没有颠簸并重复访问虚拟内存，您应该不会注意到高性能计算之外的显着性能影响。

> 抱歉，如果这些问题看起来很愚蠢，但是在内存管理方面，我很绿色。

你的主要问题是你对记忆如何工作有一些与现实不符的先入为主的观念。如果您真的感兴趣，您应该研究一下现代系统中如何使用内存。

例如，大多数人认为指针指向内存中的某个位置，因为它是基本结构。这并不完全正确。实际上，指针包含一条信息，可以将其解码到系统可寻址空间中的某个位置，该位置并不总是在 RAM 中。这个解码过程使用了很多有趣的技巧，但超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:41:07.747

通常，您应该编写面向`Any CPU`. .NET 加载程序然后决定（取决于它运行的平台）哪个版本的运行时环境将执行应用程序以及将其编译成什么样的本机代码。无需指定平台，除非您使用将加载到为您的应用程序创建的进程中的自定义本机组件。然后，此过程与一些虚拟地址空间相关联 - 映射到物理内存的方式由操作系统管理......

# c++ - libxml++ C++ 按名称查找节点

> ID：13364564
> 
> 赞同：3
> 
> 时间：2012-11-13T16:25:17.913
> 
> 标签：c++, xml, libxml2

我正在使用 libxml++ 解析来自 wikimedia 的 xml 文件。我已经能够使用 textparser 将文本从所有节点推送到堆栈上，但我想专门抓取页面和 /page 之间的文本以及获取文本、作者姓名和标题。我不知道如何使用 libxml++ 做到这一点。这是来自 wikimedia 的页面示例

```
<mediawiki xmlns="http://www.mediawiki.org/xml/export-0.7/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mediawiki.org/xml/export-0.7/ http://www.mediawiki.org/xml/export-0.7.xsd" version="0.7" xml:lang="en">
  <page>
    <title>Human Anatomy/Osteology/Axialskeleton</title>
    <ns>0</ns>
    <id>181313</id>
    <revision>
      <id>1481605</id>
  <parentid>1379871</parentid>
  <timestamp>2009-04-26T02:03:12Z</timestamp>
  <contributor>
    <username>Adrignola</username>
    <id>169232</id>
  </contributor>
  <minor/>
  <comment>+Category</comment>
  <sha1>hvxozde19haz4yhwj73ez82tf2bocbz</sha1>
  <text xml:space="preserve">[[Image:Axial_skeleton_diagram.svg|thumb|240px|right|Diagram of the axial skeleton]]

The Axial Skeleton is a division of the human skeleton and is named because it makes up the longitudinal ''axis'' of the body. It consists of the skull, hyoid bone, vertebral column, sternum and ribs. It is widely accepted to be made up of 80 bones, although this number varies from individual to individual.

[[Category:{{FULLBOOKNAME}}|{{FULLCHAPTERNAME}}]]</text>
</revision> 
```

如何将文本、作者、日期等节点保存为字符串或 Glib::ustrings？我尝试使用 xpath 来使用。谢谢你的帮助，这不是家庭作业。

-gtk

# design-patterns - 一旦用户单击按钮，如何创建手动推荐引擎，向用户的关注者推荐内容？

> ID：13364565
> 
> 赞同：0
> 
> 时间：2012-11-13T16:25:18.147
> 
> 标签：design-patterns, database-design, oop

我正在创建一个系统，其中有类似“手动推荐系统”的东西。它的工作原理是这样的：如果用户认为系统内部的某些内容很有趣，它可以“推荐”该内容。然后，此内容将被推荐给所有用户的关注者（他们将出现在他们的“墙”中）。（我不关心谁访问了或任何类型的自动化，对我来说，用户能够通过单击按钮来分享评论很重要）。

假设我关注的用户推荐了一篇博文，这篇博文的链接将出现在我的“墙”中。此链接包含帖子标题、描述等。他还可以推荐视频、照片和用户资料等。

对于每一种推荐的内容，我都会有不同的布局和显示不同的信息，这就是我的问题所在：

**我在创建该方法时遇到了一些问题，因此请解决此问题：如何跟踪推荐的内容，保持信息更新（如果帖子标题已更改，则应在推荐中更改）并保持我的解决方案干净？**

这些是我所采用的方法以及我不喜欢它们的原因：

*   创建一个名为“推荐”的“常规”表。这将具有推荐标题、推荐信息_1、推荐信息_2、推荐信息_3、...、推荐信息_N。这是一种很好的方法，因为它很容易检索，并且所有推荐类型都可以使用相同的列。我不喜欢它，因为它不能保持信息更新（这样做有点复杂，每次更新对象时我都必须检查可能的建议）而且看起来很乱。

*   创建推荐表和“值对表”。推荐表将具有所有推荐类型共有的字段，键值表将具有每种推荐类型的特定信息。我不喜欢它，因为它在维护更新的字段时也有同样的问题，第二张表对我来说看起来很乱，而且执行查询来一次检索各种建议也不会那么简单。

*   创建仅包含推荐 ID、推荐类型和内容 ID 的推荐表。表格看起来更干净，这是一个加分点，它还解决了更新信息的问题。这里的问题是：我担心检索查询会很复杂，我将不得不执行 N 个“外连接”，因为我拥有的内容类型的数量和我的 select 子句由于种类不同而增长很快来自不同内容类型的信息。

**你有什么想法/文章/设计模式可以帮助我吗？**

ps：我不知道这是否重要，但我使用的是asp.net和msssql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:58:37.077

因此，您的用户可以推荐照片、视频、汽车、香蕉等。制作一张列出所有这些内容的表格。因此，用户可能推荐的所有项目都在`Thing`or`Object`表中，并附有关于它是什么类型的信息以及附加信息在哪里的信息。

当用户推荐事物时，您只需在用户和事物之间创建关系。因此，该`Recommendation`表将具有 userId、thingId 和可能的时间戳，以指示何时推荐该事物。

在您的程序中，您将使用子类 Photo、Video、Car、Banana 创建一个超类 Thing。也许你所有的东西都实现了一些接口，这样`thing.getName()`不管是什么东西你都可以调用。

# javascript - D3 力有向图节点上的标签/文本

> ID：13364566
> 
> 赞同：12
> 
> 时间：2012-11-13T16:25:20.080
> 
> 标签：javascript, d3.js, label, force-layout

我仍然不明白为什么下面的代码不显示其标签/文本......我已经定义了 css 并在移动结束时将属性设置为标题：

杰森：

```
{
 "nodes":[
   {"name":"t1","group":1},
   {"name":"t2","group":1},
   {"name":"t3","group":1}, 
   {"name":"t4","group":1},
   {"name":"hate","group":2},
   {"name":"good","group":2},
   {"name":"aiport","group":3},
   {"name":"flight","group":3}
 ],
 "links":[
   {"source":0,"target":4,"value":4},
   {"source":0,"target":5,"value":4},
   {"source":1,"target":4,"value":4},
   {"source":2,"target":5,"value":4},
   {"source":3,"target":5,"value":4},
   {"source":4,"target":6,"value":4},
   {"source":5,"target":6,"value":4},
   {"source":5,"target":7,"value":4}
 ]
} 
```

代码：

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

.node {
  fill: #555;
  stroke: #999;
  stroke-width: 1.5px;
}

.link {
  stroke: #999;
  stroke-opacity: .6;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
    <script>

    var width = 1024,
        height = 768;

    var color = d3.scale.category20();

    var force = d3.layout.force()
        .charge(-120)
        .linkDistance(30)
        .size([width, height]);

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    d3.json("data.json", function(error, graph) {
      force
          .nodes(graph.nodes)
          .links(graph.links)
          .start();

      var link = svg.selectAll("line.link")
          .data(graph.links)
        .enter().append("line")
          .attr("class", "link")
          .style("stroke-width", function(d) { return Math.sqrt(d.value); });

     var node = svg.selectAll("circle.node")
          .data(graph.nodes)

        .enter().append("circle")
          .attr("class", "node")
          .attr("r", 5)
          .style("fill", function(d) { return color(d.group); })
          .call(force.drag);

         node.append("title")
          .text(function(d) { return d.name; });

        node.append("text")
          .text(function(d) { return d.name; });

      force.on("tick", function() {
        link.attr("x1", function(d) { return d.source.x; })
            .attr("y1", function(d) { return d.source.y; })
            .attr("x2", function(d) { return d.target.x; })
            .attr("y2", function(d) { return d.target.y; });

        node.attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });

      });
    });

    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-13T21:40:30.367

您在 circle 元素内添加文本元素 - 尝试运行您的代码并使用 DOM 检查器查看 svg。我不确定那里是否允许文本。而是单独添加文本元素 - 就像节点的另一个渲染：

```
var texts = svg.selectAll("text.label")
                .data(graph.nodes)
                .enter().append("text")
                .attr("class", "label")
                .attr("fill", "black")
                .text(function(d) {  return d.name;  });

force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });

    texts.attr("transform", function(d) {
        return "translate(" + d.x + "," + d.y + ")";
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-26T14:41:51.643

另一种选择是在**g容器元素中添加****圆形**和**文本**元素，如下所示：

 **```
var container = svg.selectAll("g.node").data(graph.nodes).enter().append("g")
.attr("class", "node")
.attr("transform", function (d) {
    return "translate(" + d.x + "," + d.y + ")";
}).call(force.drag);

container.append("circle")
.attr("r", 5)
.style("fill", color);

container.append("text")
.style("text-anchor", "middle")
.text(function (d) {
    return d.name;
}); 
```

在这里你可以玩一个工作的 jsfiddle：

*   [http://jsfiddle.net/vfu78/16/](http://jsfiddle.net/vfu78/16/)**

# asp.net - .Net 中未返回数据库中的数据

> ID：13364567
> 
> 赞同：0
> 
> 时间：2012-11-13T16:25:25.603
> 
> 标签：asp.net, .net, sql-server-2008

我已将 Web 应用程序发布到 IIS Web 服务器，但在此之前一切正常，但现在不行。

通过连接字符串 Persist Security Info = true 中的用户 ID 和密码访问 SQL Server 2008。web.config 上没有设置 Windows 身份验证或模拟，Web 应用程序运行在我们的 INTRANET 上。

我看到的问题是应用程序加载，但是当应用程序的一部分涉及从数据库获取一些数据时，它会失败。使用 IDataRecord 作为我从数据库到类的数据映射的一部分，IDataRecord 显示以下内容：

1) Error_Number 值 = 0 2) Error_Message 值 = 1

将其传递给字典类以查看返回的内容后。

任何人都可以对此有所了解吗？

# java - 为什么使用 quickfix 的 FIX 字段为空？

> ID：13364570
> 
> 赞同：2
> 
> 时间：2012-11-13T16:25:34.183
> 
> 标签：java, quickfix, fix-protocol

我是 FIX 的新手。我有一条 FIX 消息：

```
8=FIX.4.4|9=122|35=D|34=215|49=CLIENT12|52=20100225-19:41:57.316|56=B|1=Marcel|11=13346|21=1|40=2|44=5|54=1|59=0|60=20100225-19:39:52.020|10=072| 
```

我正在使用 quickfixJ。这是我的课程代码：

```
 public String getYear(Message aMessage, SessionID aSessionID){
        try {
            crack(aMessage, aSessionID);
        } catch (Exception e) {
           e.printStackTrace();
        }

        String year = String.valueOf(mUTCCal.get(Calendar.YEAR));
        String begin = String.valueOf(BeginString);
        return year + " " + begin;
    } 
```

当我调用此方法时，我 2012 null 我尝试了针对不同字段的各种方法，但我得到了 null。我很困惑为什么我没有得到 null 的日期以及如何让它正确解释其他字段？

```
 quickfix.fix44.NewOrderSingle message;
    message = new quickfix.fix44.NewOrderSingle();
    SessionID session = new SessionID("beginString", "senderCompID", "targetCompID");
    MyApp app = new MyApp("", "", "");
    String result = app.myMessage(message, session);
    System.out.println(result); 
```

我不明白在哪里将我拥有的字符串（顶部）输入到消息中

```
 public void onMessage(Message message, SessionID sessionID) throws FieldNotFound {
        Header header = message.getHeader();
        String FIX = header.getString(8);

        System.out.println(FIX);
    }

    public void onMessage(quickfix.fix44.NewOrderSingle message, SessionID sessionID) throws FieldNotFound, UnsupportedMessageType, IncorrectTagValue {
    Header header = message.getHeader();
    String FIX = header.getString(8);
            String a = message.getString(1);

            System.out.println(a);
            System.out.println(FIX);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:07:27.097

为了通过 QuickFIX 正确获取和解析 FIX 消息，您必须：

*   创建您的应用程序：[http ://www.quickfixengine.org/quickfix/doc/html/application.html](http://www.quickfixengine.org/quickfix/doc/html/application.html)
*   实现 FromApp(Message message, SessionID sessionID) 方法
*   为您将从对手方收到的所有消息类型实施破解方法

FromApp 方法可以很简单：

```
public void fromApp(Message message, SessionID sessionID)
{
  crack(message, sessionID);
} 
```

现在，在您的示例中，您有一条类型为 35=D [NewOrderSingle] 的消息 FIX 4.4

因此，您必须实现如下方法：

```
 public override void onMessage(QuickFix44.NewOrderSingle message, SessionID session)
    {
        base.onMessage(message, session);
    } 
```

现在进入您的方法，您可以轻松处理所需的所有字段：

```
 public override void onMessage(QuickFix44.NewOrderSingle message, SessionID session)
    {
        base.onMessage(message, session);

        ClOrdID ordid = new ClOrdID();
        message.get(ordid);
    } 
```

也请看这里：[http ://www.quickfixengine.org/quickfix/doc/html/receiving_messages.html](http://www.quickfixengine.org/quickfix/doc/html/receiving_messages.html)

# backbone.js - 骨干网在基于权限的应用程序中限制来自用户的路由

> ID：13364576
> 
> 赞同：3
> 
> 时间：2012-11-13T16:25:59.517
> 
> 标签：backbone.js, permissions, authorization

这更像是对模式和讨论的要求，而不是一个简单的一次性问题。我有一个骨干应用程序，用户可以在其中担任不同角色。路线像往常一样定义：

```
routes:
  "": "showHomePage"
  "import": "showImportPage" 
```

我希望该`import`页面只能由某些用户角色访问。我想我可以做这样的事情：

```
showImportPage: ->
  if not MyApp.CurrentUser.can_import
    return 
```

这确实有效。当然，正如您可以想象的那样，这很容易通过使用 Chrome 控制台来利用，即使我没有在任何地方显示链接，也很容易进入地址栏并输入它。

尽管上述内容足以阻止普通用户，但我的问题是：如何确保该路由不被访问？

到目前为止我的观点是，唯一的方法是在提供该路由之前引用服务器，或者通过检查特殊的 URL，或者在访问之前简单地重新获取用户模型......不过，我有这个问题，这基本上会破坏“单页应用程序”背后的整个想法的目的，如果每个 url 都必须由服务器进行身份验证，并且我需要在允许用户导航之前显示通常的 ajax 微调器......我知道来回的数据量很少（只有json用户信息甚至更少），但仍然......

如果您不得不面对这个问题，您有什么意见或解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:55:04.473

我认为你的问题很好。

我使用 BackboneJS 和 Jquery mobile 制作了一个 PhoneGap 应用程序，所以我遇到了你现在面临的同样问题。

我认为授权不能单独存在于客户端，因为它本质上是错误的。生活在客户身上的东西，完全由客户控制，这是任何人都无法改变的。

只要请求获得所需的最少数据并且所有逻辑/视图组件都位于客户端上，向服务器发送请求不会破坏单应用程序页面范例。

请记住，如果您在该页面中有不希望普通用户看到的敏感数据，也必须在验证请求的授权后从服务器发送，因此它不仅仅是用户信息的 JSON必须发送的，它也是数据本身。

我希望其他人会在这里证明我错了，但就我而言，这就是交易。

# javascript - Javascript更改空白选项标签的文本

> ID：13364583
> 
> 赞同：1
> 
> 时间：2012-11-13T16:26:14.547
> 
> 标签：javascript

我对javascript相当陌生，并试图自己解决这个问题，但我对一些对象和属性还是陌生的。我相信我下面的代码可以用于更改文档中的“所有”“选项”文本，但我需要它来仅更改空选项标签的文本值，例如；`<option></option>`, 到`<option>Choose One</option>`. 我希望它在页面加载时执行此操作，因为页面是由 asp 动态生成的。

```
 <script type="text/javascript">
    function changeEmpty(){
      document.getElementByTagName('option')options[0].text='Choose One';
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:27:58.217

If it is going to be the first option on the page for one select it would be

```
document.getElementsByTagName('option')[0].text='Choose One'; 
```

It would be better to specify the element so if someone in the future adds a select before it, it will not matter.

```
document.getElementById("MyId").getElementsByTagName('option')[0].text='Choose One'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:29:40.833

> *"I need it to only change the text value of empty option tags..."*

Your syntax is invalid, so I'm not sure why you think it would change all `option` elements.

But what you can do is simply iterate them, and test the text content.

```
var opts = document.getElementsByTagName('option');

for (var i = 0, len = opts.length; i < len; i++) 
    if (opts[i].text === "")
        opts[i].text = "Choose One"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:31:13.170

如果你真的想改变所有`<option>`没有内容的s，你可以使用这个代码

```
function changeEmpty(){
  var els = document.querySelectorAll( 'option' );

  for ( var i=els.length; i--; ) {
    if ( els.innerHTML.trim() == '' ) {
      els.innerHTML = 'choose one';
    }
  }
} 
```

假设空`<option>`的 s 将始终是每个`<select>`标签中的第一个，更改为

```
var els = document.querySelectorAll( 'select > option' ); 
```

以节省一些计算。

**编辑**

`querySelectorAll()`所有现代浏览器都支持，但在 IE7 和以前的版本中不支持！请参阅[caniuse.com](http://caniuse.com/#feat=queryselector)。

# php - 将提交按钮添加到 HTML 表单

> ID：13364588
> 
> 赞同：1
> 
> 时间：2012-11-13T16:26:22.450
> 
> 标签：php, html, ajax

我有一个带有四个输入字段（联系人 ID、电话号码、姓名、称呼）的简单表单。如果我输入“联系人 ID”并按 Enter 按钮，该字段的其余部分将自动填充从数据库中检索。现在我想在表单中添加一个“提交”按钮，以便通过单击该按钮将这些信息保存到另一个数据库表中。我尝试添加按钮，但自动填充功能不再起作用。有人可以帮忙吗？在此先感谢 :) 这是我的 index.html 文件：

```
<html> 
    <body> 
        <script language="javascript" type="text/javascript">

    function ajaxFunction(e){
    var e=e || window.event;
    var keycode=e.which || e.keyCode;
    if(keycode==13 || (e.target||e.srcElement).value==''){ 
    var http;  // The variable that makes Ajax possible! 

    try{ 
        // Opera 8.0+, Firefox, Safari 
        http = new XMLHttpRequest(); 
    } catch (e){ 
        // Internet Explorer Browsers 
        try{ 
            http = new ActiveXObject("Msxml2.XMLHTTP"); 
        } catch (e) { 
            try{ 
                http = new ActiveXObject("Microsoft.XMLHTTP"); 
            } catch (e){ 
                // Something went wrong 
                alert("Your browser broke!"); 
                return false; 
            } 
        }
    }

    var url = "getagentids.php?param=";
                var idValue = document.getElementById("agid").value;
                var myRandom = parseInt(Math.random()*99999999);  // cache buster
                http.open("GET", "getagentids.php?param=" + escape(idValue) + "&rand=" + myRandom, true);
                http.onreadystatechange = handleHttpResponse;
                http.send(null);
         function handleHttpResponse() {
                    if (http.readyState == 4) {
                        results = http.responseText.split(",");
                        document.getElementById('agfn').value = results[0];
                        document.getElementById('agsal').value = results[1];
                        document.getElementById('agtel').value = results[2];
                        document.getElementById('agid').value = results[3];
                    }
                } 
    }
}

</script> 

       <form>
            <table>
                <tr>
                    <td>Contact ID:</td>
                    <td><input id="agid" type="text"
                               name="contactid" onkeyup="ajaxFunction(event)"></td>
                </tr>
                <tr>
                    <td>Tel Number:</td>
                    <td><input id="agtel" type="text"
                               name="contacttel"></td>
                </tr>
                <tr>
                    <td>Name:</td>
                    <td><input id="agfn" type="text"
                               name="contactfullname"></td>
                </tr>
                <tr>
                    <td>Salutation:</td>
                    <td><input id="agsal" type="text"
                               name="contactsalutation"></td>
                </tr>
                <tr>
                    <td><input type="reset" value="Clear"></td>
                    <td></td>
                </tr>
            </table>
        </form>

    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:12:30.593

如果您想在填充表单*后*添加提交按钮，您可以通过 using`innerHTML`

```
...
if (http.readyState == 4) {
   results = http.responseText.split(",");
   document.getElementById('agfn').value = results[0];
   document.getElementById('agsal').value = results[1];
   document.getElementById('agtel').value = results[2];
   document.getElementById('agid').value = results[3];
   document.getElementById('buttons').innerHTML = "<input type=\"submit\" name=\"submit\" value=\"Submit\"/>";  // add Submit button by innerHTML
}
... 
```

并在您的表格中添加一个`<div id="buttons">`到您要添加`submit`按钮的位置

```
<tr>
    <td><div id="buttons"></div><input type="reset" value="Clear"></td>
    <td></td>
</tr> 
```

# flash - 如何从 Zinc 4.0 构建的 Flash 项目内的菜单中单击按钮启动 .exe 文件

> ID：13364590
> 
> 赞同：2
> 
> 时间：2012-11-13T16:26:28.990
> 
> 标签：flash, actionscript, fscommand

我目前正在开展一个项目，将 Zinc 4.0 内置闪存菜单放在 CD 上。菜单上的其中一个按钮需要打开一个 .exe 文件的外部目录。我能够使用 fscommand 脚本让它在闪光灯投影仪中工作。但我想在 windows 本身的设计中提供更多选择，所以我改为通过 Zinc 4.0 运行它。现在文件不再在按钮单击时执行。

我尝试了一些 Zinc 4.0 脚本，但仍然无法正常工作。

这是我目前正在使用的代码片段。

```
view_btn.addEventListener(MouseEvent.CLICK, openCat);
function openCat (e:MouseEvent):void {
fscommand("exec",mdm.Application.path+"cellrun.exe");
} 
```

有什么建议或想法吗？

谢谢

# jquery - jQuery在Parent中查找Div

> ID：13364592
> 
> 赞同：5
> 
> 时间：2012-11-13T16:26:32.260
> 
> 标签：jquery

我不确定我的措辞是否正确。但我有一个与此类似的 HTML 文档设置。

```
<div id="intro_page" class="sub_page">

        <div class="sub_header"><img src="assets/img/intro_header.jpg" /></div>

        <div class="video_holder">
            <video class="video_player"></video>
        </div>

        <div class="page_text"><img src="" width="1020" /></div>

</div><!-- /intro_page --> 
```

和

```
<div id="spark_page" class="sub_page car_page">

            <div class="sub_header"><img src="assets/img/header.jpg" /></div>

            <div class="video_holder">
                <video class="video_player"></video>
            </div>

            <ul class="car_story">
                <li data-text="story1_text"><img src="assets/img/story1_btn2.jpg" /></li>
                <li><img src="assets/img/story2_btn2.jpg" /></li>
                <li><img src="assets/img/story3_btn2.jpg" /></li>
            </ul>

            <div class="page_text"><img src="" width="1020" /></div>

</div><!-- /spark_page --> 
```

如果有人`page_text`点击`car_story li`. 但是因为有两个 div 有`page_text`，我不知道如何定位与`car_story ul`. 希望这是有道理的。谢谢！

我尝试过类似的事情，但没有运气。

```
$(".car_story li").click(function() {

    $(this).parent().find(".page_text img").attr("src","newimage.jpg");

}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T16:38:10.907

传入最近的 div.sub_page 作为选择器中的上下文，然后是要查找的元素

```
$(".car_story li").click(function() {
    var parent = $(this).closest('.sub_page'); // find closest sub_page
    $(".page_text img",parent).attr("src","newimage.jpg"); // find img inside of closest sub_page
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:27:59.433

```
$(".car_story li").click(function() {
    $(this).parents("div").find(".page_text > img").attr("src","newimage.jpg");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:39:04.653

尝试`closest()`

```
$(".car_story li").click(function() {

    $(this).closest('.sub_page').find(".page_text img")
                                .attr("src","newimage.jpg");

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:58:11.610

这具有相同的结果，但我认为更清楚的是在所有情况下你会得到什么结果（例如，如果你有另一个页面可能 ajaxed 也恰好有一个带有 car_story 类的 li 那么这个点击事件将仍然只为 spark_page 开火。）：

```
$(".car_story li").click(function() {
    $('div#spark_page').find(".page_text img").attr("src","newimage.jpg");
}); 
```

当然，如果您要使用 li car_story 将更多 html ajax 并想更改所有 .page_text img 的来源，那么我认为您可以这样做

```
$(".car_story li").click(function() {
    $(".page_text img").attr("src","newimage.jpg");
}); 
```

# objective-c - Error 256 Reading via NSString's initWithContentsOfFile

> ID：13364602
> 
> 赞同：0
> 
> 时间：2012-11-13T16:26:52.457
> 
> 标签：objective-c, xcode, file-io

I am attempting to read a number of files from a directory tree inside the Documents directory within my App andbox. Most of them are xml files which I read with :

```
NSData *data = [NSData dataWithContentsOfFile:packagefile. 
RXMLElement *rxml = [RXMLElement elementFromXMLData:data]; 
```

All but ***one*** them read OK. But ***one*** does not read and I get error code 256. For the bad file I can also try :

```
NSData *data = [NSData dataWithContentsOfFile:packagefile options:0 error:&err]; 
```

but the same error code comes back . (Hence I think my issue is not related to the actual xml content of the file).

Clearing out the sandbox and copying all the files back in programatically in my App makes no difference.

What can be wrong here? What else can I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:50:42.597

我找到了解决此问题的方法（“莫名其妙的错误代码 256”。）希望此解决方案对遇到此问题的其他开发人员有所帮助。

**它已经用完了文件句柄。**

在我的应用程序中，我还有一个日志记录功能，可以将活动记录到文件中（有点像 Log4J）。这需要每个记录的语句 - 使用“NSFileHandle”打开一个文件，然后是“seekToEndOfFile”，然后是“writeData”。

我错误地依赖 ARC 在退出日志记录过程时处理和关闭文件。显然 ARC 不会**关闭**文件，最终系统会耗尽文件句柄。

解决方案只是像在 Java 或 C 中那样调用“closeFile”。

# ios - Scrollers are not displaying in UIWebView

> ID：13364606
> 
> 赞同：0
> 
> 时间：2012-11-13T16:27:07.367
> 
> 标签：ios, uiwebview, scroller

I have a span inside a div, and although I can scroll vertically just fine, there are no scroll indicators displayed like I'd usually see in a UIWebView while scrolling. Any clues to why?

This is formulated in javascript

```
 $(".contentArea").append('<div style="width=300px; height:520px; 
overflow-x:visible; overflow-y: scroll; position: relative; top: 0px; 
left: 15px;"><span class="description">' + $(this).find("Description").text() 
+ '</span></div>'); 
```

CSS:

```
#contentArea{
    position:relative;
    width:600px;
    height:768px;
    font-size: 13px; 
    line-height:20px;
}

span.description {
    line-height:17px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:30:05.470

您可以在 UIWebView 中查找滚动视图并将其设置为显示栏：

```
UIScrollView *scrollView = nil;
for (UIView *subview in webview.subviews) 
    if ([subview isKindOfClass:[UIScrollView class]]) 
        scrollView = (UIScrollView *)scrollView;

scrollView.showsVerticalScrollIndicator = YES; 
```

# razor - Long delays when formatting a .cshtml file in Visual Studio 2012

> ID：13364608
> 
> 赞同：4
> 
> 时间：2012-11-13T16:27:13.800
> 
> 标签：razor, asp.net-mvc-4, visual-studio-2012

Working with MVC4 using Visual Studio 2012 at the moment and when every I format a CSHTML document (CTRL + E + D) I get the "Waiting for a background operation to complete dialog"

This dialog stays around for roughly a minutes however I've had wait times of up to 10minutes before.

My document is not long it consists of 20< lines of basic html.

I'm only using 1 Add-in; Visual Git.

EDIT: Removing the Add-in has no effect.

EDIT2: I'm now getting the following error trying to edit the file after trying to format.

```
 Attempted TextBuffer edit operation while another edit is in progress. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T16:20:25.187

For me it seemed to be related with the razor syntax, since I only had it on one particular file.

For example if I put the following code in one line I had the described issue.

```
@section BodyClassName {note} 
```

But when putting the closing parenthesis on the next line the issue went away

```
@section BodyClassName {note
    } 
```

Kind regards

Stijn

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:25:10.443

我有同样的问题，我做了以下，它对我有用。

1.  取消选中您的视图的只读属性（通过使用 Windows 资源管理器）
2.  如果您已经在 VS 中打开了视图，请关闭您的视图并再次打开它。
3.  如果您可以单击解决方案资源管理器顶部的刷新按钮，这也将重新加载文件。

它应该是可编辑的。

我希望这会有所帮助。

谢谢。

# ffmpeg - GStreamer Tee（多路复用器）

> ID：13364610
> 
> 赞同：4
> 
> 时间：2012-11-13T16:27:24.613
> 
> 标签：ffmpeg, gstreamer, tee, mux

我正在尝试将视频流（来自我的网络摄像头）存储到 MKV 和 FLV 文件中。这意味着我必须在 h264 编码之后拆分视频和音频管道，并使用不同的复用器复用每个路径。

这就是我想象的应该如何工作：

```
 |->queue->matroskamux->filesink
v4l2src->videorate->videoscale->x264enc->tee-|
                                             |->queue->flvmux->filesink 
```

这个假设正确吗？所有的队列都在正确的地方吗？像这样的 GStreamer 命令会是什么样子？我在“三通”的概念上遇到了特别麻烦。如何/在何处在命令中启动它们以及如何操作不同的 Tee-Path。我在 GStreamer 文档中查找了“Tee”，但仍然无法应用它们。

提前致谢！

编辑：好的，多亏了 mreithub，我让它为视频工作。这是命令现在的样子：

```
gst-launch-0.10 -v -m v4l2src ! videorate ! videoscale ! ffmpegcolorspace ! x264enc ! tee name=muxtee ! queue2 ! matroskamux name=mkvmux ! filesink location=file1.mkv muxtee. ! queue ! flvmux name=flvmux ! filesink location=file1.flv 
```

这是我让音频运行的尝试：

```
gst-launch-0.10 -v -m v4l2src ! videorate ! videoscale ! ffmpegcolorspace ! x264enc ! tee name=muxtee ! queue2 ! matroskamux name=mkvmux pulsesrc ! ffenc_aac ! filesink location=file1.mkv muxtee. ! queue ! flvmux name=flvmux pulsesrc ! ffenc_aac ! filesink location=file1.flv 
```

这不起作用（命令执行但立即停止 - 没有错误消息）。但我也无法确定放置音频编码的位置。在我尝试的解决方案中，我对每个 Tee-Pipeline 中的音频进行编码（对吗？）。但我只想对音频进行一次编码，然后相应地在两个管道路径中将其混合。

这是另一个尝试：在音频编码之后，我使用 Tee 拆分管道并将其分配给 mkvmuxer 和 flvmuxer：

```
gst-launch-0.10 -v -m v4l2src ! videorate ! videoscale ! ffmpegcolorspace ! x264enc ! tee name=muxtee ! queue2 ! matroskamux name=mkvmux ! filesink location=file1.mkv muxtee. ! queue ! flvmux name=flvmux ! filesink location=file1.flv pulsesrc ! ffenc_aac ! tee name=t2 ! queue ! mkvmux. t2\. ! queue ! flvmux. 
```

但是有了这个，我收到以下错误消息：

```
could not link queue1 to flvmux 
```

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T01:04:21.350

由于您需要管道中的视频和音频，它会有点复杂（我认为一张小图片可能会有所帮助）： ![GraphViz 图显示了生成的管道](../Images/00ad02192e52cfc3bbb437e15d67dbac.png)

为了使 gst-launch 命令尽可能清晰，我将每个线性管道片段放入一个命令行（第一行中的红色连接，然后是蓝色、绿色和黄色连接，最后是黑色的排队内容）上图）：

```
gst-launch-0.10 v4l2src ! videorate ! videoscale ! x264enc ! tee name=videoTee \
    pulsesrc ! ffenc_aac ! tee name=audioTee \
    flvmux name=flvMux ! filesink location=/tmp/foo.flv \
    matroskamux name=mkvMux ! filesink location=/tmp/foo.mkv \
    audioTee. ! queue ! flvMux. \
    audioTee. ! queue ! mkvMux. \
    videoTee. ! queue ! flvMux. \
    videoTee. ! queue ! mkvMux. 
```

最后一点：我尝试使用它，`lame`而不是`ffenc_aac`因为我没有安装它，但它应该适用于它们。

**编辑：**完全重写了答案，包括音频支持，添加了一个管道图片（顺便说一句，图片是使用很棒的 GraphViz 工具制作的）。

# wxwidgets - wxWidgets：是否有一个 makedirs 函数可以沿路径创建更多不存在的子目录？

> ID：13364612
> 
> 赞同：0
> 
> 时间：2012-11-13T16:27:34.157
> 
> 标签：wxwidgets

有一个像 c:\MyPath\where\ **the\part\of\it\does\not\exist**这样的路径（这里是 Windows） 。wxWidgeds 中是否有任何函数可以创建所有缺失的（在示例中为粗体）子目录，还是我必须自己写一些？

（如果您了解 Python，则`os.makedirs()`是等价的。）

谢谢，

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:11:36.120

最简单的方法是使用静态函数[wxFileName::Mkdir](http://docs.wxwidgets.org/trunk/classwx_file_name.html#ac2006b2fb30c0c0f11ef44560e1a62c7)并将`wxPATH_MKDIR_FULL`标志传递给它。

# javascript - 如何知道窗口“加载”事件是否已经触发

> ID：13364613
> 
> 赞同：72
> 
> 时间：2012-11-13T16:27:33.823
> 
> 标签：javascript, asynchronous, dom-events

我正在编写一个 Javascript 脚本。该脚本可能会异步加载（AMD 格式）。

`window.load`在这个脚本中，在事件被触发之前，我不想做任何重要的事情。所以我听窗口“加载”事件。

但是如果脚本是在 window.load 事件之后加载的......我怎么知道`window.load`已经被解雇了？

当然我不想在任何其他脚本中添加一些东西（它们都是异步加载的，问题是一样的）:)

编辑 ：

想象一个完全没有 Javascript 的 HTML 文档。

比有人在这个文档中插入一个标签，这个脚本标签加载我的 Javascript 文件。

这将执行我的脚本。

这个脚本如何知道 window.load 是否已经被触发？

没有 jQuery，在我之前的 HTML 文档中没有任何脚本。

有可能知道吗？？

我找到了`window.document.readystate`房产。我猜这个属性是针对文档“就绪”事件，而不是针对窗口“加载”。窗口“加载”事件有类似的东西吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2015-01-22T16:17:21.080

最简单的解决方案可能是检查`document.readyState == 'complete'`，请参阅[http://www.w3schools.com/jsref/prop_doc_readystate.asp](http://www.w3schools.com/jsref/prop_doc_readystate.asp)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2019-01-14T10:29:38.093

## 快速回答

要快速回答问题的标题：

```
document.readyState === 'complete' 
```

## 更深层次的例子

如果您想在窗口加载时调用代码，下面是一个很好的帮手，同时仍然处理在代码运行时窗口可能已经加载的情况。

```
function winLoad(callback) {
  if (document.readyState === 'complete') {
    callback();
  } else {
    window.addEventListener("load", callback);
  }
}

winLoad(function() {
  console.log('Window is loaded');
});
```

**注意**：此处的代码片段实际上不会在相同的窗口上下文中运行，因此实际上会在您运行它时`document.readyState === 'complete'`进行评估。`false`如果您现在为此窗口将相同的内容放入控制台，它应该评估为真。

**另请参阅**：['$(document).ready()' 的非 jQuery 等价物是什么？](https://stackoverflow.com/questions/2304941/what-is-the-non-jquery-equivalent-of-document-ready/53601942#53601942)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-11-28T18:01:38.040

浏览器[导航性能](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceTiming/loadEventEnd)loadEventEnd 指标可用于确定是否触发了加载事件：

```
let navData = window.performance.getEntriesByType("navigation");
if (navData.length > 0 && navData[0].loadEventEnd > 0)
{
    console.log('Document is loaded');
} else {
    console.log('Document is not loaded');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T16:47:01.570

如果你不想使用 jQuery，它使用的逻辑是：

```
if( !document.body )
    setTimeout( checkAgain, 1 ); 
```

因此，在 windows 加载事件和检查文档的 body 属性是否可用之间，您可以检查 DOM 是否准备好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-26T09:12:19.667

基于@CTS_AE 的方法，我为以下环境制定了一个解决方案：

*   `window.addEventListener('load', activateMyFunction);`和
*   `window.addEventListener('DOMContentLoaded', activateMyFunction);`

不工作。

它需要单个字符替换（例如，从

```
window.addEventListener('load', activateMyFunction); 
```

到

```
window_addEventListener('load', activateMyFunction);) 
```

该函数`window_addEventListener()`如下所示：

```
const window_addEventListener = (eventName, callback, useCapture = false) => {

  if ((document.readyState === 'interactive') || (document.readyState === 'complete'))   {

    callback();
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-02T13:54:02.807

简易方法：

```
window.onload = (event) => {
  console.log('page is fully loaded');
}; 
```

[您可以从这里](https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event)的资源中找到其他方法。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-11-13T16:31:51.160

覆盖window.load怎么样？

```
window._load = window.load;
window.load = function(){
  window.loaded = true;
  window._load();
} 
```

然后检查

```
if (window.loaded != undefined && window.loaded == true){
    //do stuff
} 
```

# scheme - Scheme——过程如何将其他过程作为参数？

> ID：13364614
> 
> 赞同：1
> 
> 时间：2012-11-13T16:27:34.693
> 
> 标签：scheme

编写一个名为 'proc4' 的 Scheme 过程，它接受 2 个过程作为参数 (w,x) [注意 w 和 x 在给定两个数字作为参数时可以正常工作] 并返回一个接受 2 个数字的过程 (y,z ) 作为参数并返回应用于 y 和 z 时产生最大数字的过程（w 或 x）（即在 C++ 伪代码中 if ((ywz) > (yxz)) {return w; } else {return x;} )

所以我开始

(define proc4(lamdda (wx) (lambda yz)... 然后我想做 if 部分。像 (if (> (apply w (yz)) (apply x( wz))) 之类的东西) 但我不断收到错误.

我一直试图在互联网上寻求帮助，但到目前为止我所看到的一切对我来说都没有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:08:14.193

您可以直接调用函数对象，而无需使用`apply`：

```
(define (proc4 f g)
  (lambda (x y)
    (if (> (f x y) (g x y))
        f
        g))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:24:00.410

@ChrisJester-Young 回答的一些语法糖 - 您可以声明一个返回另一个过程的过程，如下所示：

```
(define ((proc4 f g) x y)
  (if (> (f x y) (g x y))
      f
      g)) 
```

在上面的代码中，第一个过程接收过程`f`和作为参数`g`，然后返回一个接收作为参数的`x`过程`y`。我们知道这一点`f`并且`g`是过程，因为它们在定义主体中的使用方式，但它们可以具有您想要的任何名称。当然，您可以按通常的方式调用该过程：

```
((proc4 + *) 10 20)
=> #<procedure:*> 
```

这个例子的有趣之处在于，*过程*也可以作为参数传递（并作为值返回），您不需要`apply`它们，只需调用作为参数接收的过程，就像使用任何其他过程一样。另请注意，此问题的所有答案都是等效的，但我使用的速记语法可能不适用于所有解释器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:10:58.320

我无法理解这个（显然是家庭作业）问题，但我会这样做：

```
(define proc4
  (lambda (w x)
    (lambda (y z)
      (if (> (w y z) (x y z))
          w
          x)))) 
```

# php - 为购物车定价规则创建自定义条件

> ID：13364615
> 
> 赞同：1
> 
> 时间：2012-11-13T16:27:35.847
> 
> 标签：php, magento

我正在定制一个现有的 Magento 安装，客户想要一个复杂的购物车价格规则条件，内置条件不适用。

我本质上想插入我自己的自定义 php 代码。IE

```
function doesRuleApply() {
    //complicated code
    if ($someCondition) {
        return true; //i.e. apply the rule
    } else {
        return false; //i.e. don't apply rule
    }
} 
```

我认为这是可能的，给定一个自定义模块，但我不确定从哪里开始。看看现有的规则，看起来很混乱。

是否有任何指南或示例描述如何开始执行此操作，或者任何人都可以指出我正确的方向吗？

（对于他们来说，能够在前端选择此规则也是理想的！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:13:01.003

我在 github 上找到了一个非常直接且简单的开源插件，名为[DiscountForATweet](https://github.com/magento-hackathon/DiscountForATweet)。

他们实现了一个[自定义规则](https://github.com/magento-hackathon/DiscountForATweet/blob/master/app/code/community/Hackathon/DiscountForATweet/Model/Condition/Tweet.php)以及一个[Observer 类](https://github.com/magento-hackathon/DiscountForATweet/blob/master/app/code/community/Hackathon/DiscountForATweet/Model/Observer.php)，为我指明了我需要的方向。它也恰好是一个很好的简单、自包含的模块，应该可以帮助任何学习 Magento 的人。

# android - 类似 Instagram 的裁剪？

> ID：13364619
> 
> 赞同：1
> 
> 时间：2012-11-13T16:27:44.427
> 
> 标签：android, image-processing

虽然一开始并不明显，但在 Android Instagram 应用程序中，您可以（在编辑照片后）返回照片卷以查看旧图像。然后出现一个框架，侧面带有拖动手柄；您可以通过拖动手柄来移动框架并调整其大小，从而可以裁剪到图像的任何部分。

我如何在安卓上做到这一点？这是标准功能吗，有没有类似的开源库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-29T13:42:13.187

看看这个项目。 [https://github.com/naver/android-imagecropview](https://github.com/naver/android-imagecropview)
这个项目是针对像 instagram 这样的 imagecropview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:19:43.107

这[符合](http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/)你想要的吗？

# c# - Assembly references in T4 in Visual Studio 2012 .NET 4.5

> ID：13364621
> 
> 赞同：1
> 
> 时间：2012-11-13T16:27:46.550
> 
> 标签：c#, visual-studio-2012, t4, .net-4.5

I am having problems using the T4 tool in Visual Studio 2012\. My .tt-files have an assembly directive to a 64-bit .DLL built in the same solution. This is the output from debugging the tt file:

> Error 308 The host threw an exception while trying to resolve the assembly reference '$(TargetDir)\DCSGenerator.dll'. The transformation will not be run. The following Exception was thrown: System.IO.FileLoadException: The given assembly name or codebase was invalid. (Exception from HRESULT: 0x80131047) at System.Reflection.AssemblyName.nInit(RuntimeAssembly& assembly, Boolean forIntrospection, Boolean raiseResolveEvent) at System.Reflection.AssemblyName..ctor(String assemblyName) at Microsoft.VisualStudio.TextTemplating.GlobalAssemblyCacheHelper.GetLocation(String strongName) at Microsoft.VisualStudio.TextTemplating.VSHost.TextTemplatingService.ResolveAssemblyReference(String assemblyReference) at Microsoft.VisualStudio.TextTemplating.Engine.ResolveAssemblyReferences(ITextTemplatingEngineHost host, TemplateProcessingSession session) C:\TFS\Dev01\CorePlatform\CoreServices\ImportExport.NET\ImportExport.NET\DicomInterface\TemplateUtilFunctions.tt 0 0 ImportExport.NET (CoreServices\ImportExport.NET\ImportExport.NET)

Is anyone else having problems with this?

Best Regards,

UPDATE 2012-11-14 09:17 (CET): Visual Studio and hence the T4 generator runs as a 32-bit application and my assemblies are built as 64bit DLLs. This might be a source of the problem.

UPDATE 2012-11-14 09:43 (CET): Tried to reference the assembly using the full path but this didn't solve the problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:00:00.190

正如我所怀疑的，通过使用`PlatformTarget AnyCPU`. 现在生成的 DLL 与 32 位和 64 位程序集兼容。

# iphone - iPhone interface orientation change not returning to portrait orientation

> ID：13364622
> 
> 赞同：0
> 
> 时间：2012-11-13T16:27:51.667
> 
> 标签：iphone, ios, uiinterfaceorientation, autorotate

So I have a view that I present modally when the interface orientation changes to landscape. However when the orientation returns to portrait and the modal view dismisses itself, the tableview from the initial view remains in landscape orientation (this table view must be only in portrait orientation)

Here is the code :

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return ((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight) );
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if ((toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)) {
        [self performSegueWithIdentifier:@"showCatChart" sender:self];
    }
    if (toInterfaceOrientation == UIInterfaceOrientationPortrait) {
        [self refreshTableView];
    }
} 
```

I tried to refresh the tableview but that doesn't make it portrait again ... this could be from the view hierachy ... NavigationController->tableView (only portrait)->tableview->landscapeViewModalController

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:39:20.997

在 iOS 6 中，您需要实现以下内容：

```
- (BOOL)shouldAutoRotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

在您的 AppDelegate 中，您需要更改以下内容：

```
[self.window addSubview:viewController.view]; 
```

至

```
[self.window setRootViewController:viewController]; 
```

此外，如果您想支持以前版本的 iOS，请保留您当前的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:56:50.963

在 appdelegate 中使用以下内容。

```
[self.window addsubview:viewcontroller]; 
```

仅此一项就可以解决您的方向问题。

# excel - Excel VBA在一列中找到一系列相同的值

> ID：13364626
> 
> 赞同：3
> 
> 时间：2012-11-13T16:28:11.250
> 
> 标签：excel, vba

我需要编写一个宏来根据值查找单元格范围。一列将在一行中具有相同的值，我需要找出在一行中具有相同值的第一列和最后一列是什么。![在此处输入图像描述](../Images/5b49ebc514e7e3145ecf06c719fcdb0c.png)

所以宏需要找到“Jill Cross”的范围是a4到a9

到目前为止，我没有太多，有办法找到第一次出现的值

```
 Function GetFirstCell(CellRef As Range)
   Dim l As Long
   l = Application.WorksheetFunction.Match(CellRef.Value, Range("A1:A10000"), 0)
   GetFirstCell = l
   End Function 
```

现在我需要以某种方式遍历下一行以返回事件的最后一行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:31:07.230

如果您的第一个单元格在排序列表中，则 countif 函数将轻松为您提供最后一个单元格。

```
 Function GetFirstCell(CellRef As Range) as long
       Dim l As Long
       l = Application.WorksheetFunction.Match(CellRef.Value, Range("A1:A10000"), 0)
       GetFirstCell = l
   End Function

   function GetLastCell(cellRef as range, lFirstCell as long)
       Dim l As Long
       l = Application.WorksheetFunction.countif(Range("A1:A10000"), CellRef.Value)
       GetLastCell = lFirstCell+l-1
   End Function 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T18:00:47.390

尽管它有其局限性（例如，如果名称未排序并且您要查找的名称在您的范围内的多个位置分隔...），但这将起作用。当然，您需要将范围替换为您要检查的范围，并将“bob”替换为您要查找的任何名称。此外，该列是静态的，因此您可能需要更改该部分。这是一个数组公式，因此您需要在公式栏中按 [ctrl]+[shift]+[enter] 来执行它。

`="A"&MIN(IF(ROW(A1:A6)*(A1:A6="bob")=0, 99999999, ROW(A1:A6)*(A1:A6="bob")))&":A"&MAX(SI(ROW(A1:A6)*(A1:A6="bob")=0, -99999999, ROW(A1:A6)*(A1:A6="bob")))`

# jquery - Formatting jQuery key/value separator

> ID：13364627
> 
> 赞同：0
> 
> 时间：2012-11-13T16:28:12.903
> 
> 标签：jquery

I have the following code, which successfully outputs data to to the product_slides array.

```
var product_slides = new Array();

Product.findAll({}, function(products) {
    $.each(products, function(i, product) {
        var product_slide = new Object();
        product_slide.title = product.name;
        product_slide.url = product.url;
        product_slides[i] = product_slide;
    });
}); 
```

When I view the contents with `console.log(product_slides);` in firebug's console it has the following format:

```
[
    {image = 'value', url = 'value'},
    ...
] 
```

however, I need it to have the following:

```
[
    {image : 'value', url : 'value'},
    ...
] 
```

which I believe may be JSON(?).

I'm still quite new to scripting, does anyone know how to swap those =s for :s ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:09:51.493

在使 product_slide 成为对象而不是数组之后，在每个内部尝试此操作

```
product_slide{'image':product.name, 'url':product_url}; 
```

如果可行，请替换键的硬编码 val

# asp.net-mvc - IIS 限制对用户表目录的访问

> ID：13364628
> 
> 赞同：1
> 
> 时间：2012-11-13T16:28:14.107
> 
> 标签：asp.net-mvc, iis, web-config, forms-authentication

我正在尝试限制对目录中文件的访问，并且它是基于用户权限的子目录。我的用户权限以自定义格式存储在 MS SQL 数据库中，但是很容易查询对该目录具有权限的用户列表。

我需要知道如何将其应用于服务器上的 Web 配置，以针对数据库表的查询进行身份验证，以确定用户名是否经过身份验证并允许查看文件。当然，如果不是，他们应该被阻止/给出 404。

我正在使用具有基于表单的安全性的 IIS 和 ASP.Net MVC3，而不是为我们定制并且效果很好的内置角色和职责。有超过 10,000 个用户与此非 Active Directory 身份验证相关联，因此我不打算更改我的身份验证类型，因此请不要去那里。

这不是我选择平台的决定，否则我会选择 LAMP 服务器并完成此操作。

编辑 2012 年 11 月 13 日 @ 8:57a：在 web 配置中，您可以放置​​ SQL 查询的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:13:54.117

我过去曾回答过类似的问题（上传和访问文件），但这些原则仍然适用于提供对文件系统级文件的访问。

[在 asp.net-mvc 中，保存用户内容（图像、文件等）时是否有一个好的库或模式可以遵循](https://stackoverflow.com/questions/7208120/in-asp-net-mvc-is-there-a-good-library-or-pattern-to-follow-when-saving-users-c/7560390#7560390)

# phpmailer - Not able to send attachment with my code?

> ID：13364630
> 
> 赞同：1
> 
> 时间：2012-11-13T16:28:19.370
> 
> 标签：phpmailer, attachment

I am using phpMailer i do not know whats wrong with my code, it return fails after execution? my function which call the phpmailer.php page and takes parameters:

```
function sendEmail($to,$from,$sender_name="",$subject,$body,$attachement_path){ 
  require("PHPMailer/class.phpmailer.php");
  $mail = new PHPMailer(); 
  $host="mail.mysite.com";
  $userName="info";
  $password="password!";
  $mail->IsSMTP();                                      // set mailer to use SMTP i.e. smtp1.example.com;smtp2.example.com
  $mail->Host = $host;  // specify main and backup server
  $mail->SMTPAuth = true;     // turn on SMTP authentication
  $mail->Username = $userName;  // SMTP username i.e email id of an email address
  $mail->Password = $password; // SMTP password for the specified email address         
  $mail->From = $from;
  $mail->FromName = $sender_name;
  $mail->AddAddress($to);   //mail,name
  $mail->AddAddress("myBCCMailAddress@gmail.com");                  // name is optional
  $mail->AddReplyTo($to);//to, name         
  $mail->WordWrap = 50; 
  $mail->AddAttachment($attachement_path);
  $mail->IsHTML(true);                                 // set email format to HTML
  $mail->Subject = $subject;
  $mail->Body    = $body;
  //$mail->AltBody = "This is the body in plain text for non-HTML mail clients";      
  if(!$mail->Send())
  {
     return false;
      }
  else{
      return true;
      }
  } 
```

Here is the calling method of my above function:

```
if(sendEmail($to,"info@mysite.com","My Company Name",$subject,$body,$path)){
              echo 'mail sent';
              }
           else{
               echo('mail failed to send '.$to);
               } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:31:06.573

这是我使用的脚本。

```
 // phpmailer is required earlier
        $mail = new PHPMailer();
        $mail->IsSMTP();
        $mail->isHtml(true);
        $mail->AddAddress($customer_email);

        $mail->From = 'billing@example.com';
        $mail->FromName = 'MyName';
        $mail->Sender = 'mailman@example.com';

        $mail->AddBcc('accounting@example.com);
        $mail->Subject = 'Invoince;

        $mail->Body = 'Some exiting text explaining the customer about his invoice';
        $mail->AddAttachment('/var/invoices/'.$invoce_nr.'.pdf', 'Faktura.pdf');
        $mail->Body = iconv("UTF-8", "ISO-8859-1",$mail->Body);

        if($mail->send()){
            return true;
        } else {
            return false;
        } 
```

还要确保您可以发送常规电子邮件，然后确保您尝试发送的文件是可读的。

# c++ - 访问模板化基类的模板化方法

> ID：13364631
> 
> 赞同：1
> 
> 时间：2012-11-13T16:28:28.450
> 
> 标签：c++, qt, templates, gcc4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:31:12.843

你不得不说：

```
BaseQNativeWindow::template findChildren< QWidget * >()
//                 ^^^^^^^^ 
```

由于`findChildren`是从属名称，因此必须消除其含义。

# delphi - Firebird混淆的Delphi TDatabase参数

> ID：13364632
> 
> 赞同：1
> 
> 时间：2012-11-13T16:28:34.333
> 
> 标签：delphi, firebird, bde

我已经通过控制面板成功创建了一个数据源，并将它与 TTable 和 TQuery 和 TDBGrid 一起使用，现在我想学习如何使用 TDatabase 连接到我的 Firebird DB，我选择了 Firebird Interbase Driver 并选择了“默认值” . 我必须完成所有弹出的参数吗？我可以删除那些我不想干涉（不懂）的吗？事实上，我唯一尝试设置的是

```
DATABASE NAME=localhost:c:\fbdb\abook.fdb
USERNAME=SYSDBA
PASSWORD=masterkey 
```

有人可以帮我剩下的吗，我一直在

> 无效的配置参数

*我加入的公司有使用 BDE 的现有应用程序，并要求我在加入之前对自己进行 Delphi 7、Firebird、BDE、Report Builder 培训。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T07:19:45.383

您可以创建 BDE 别名（在控制面板下的 BDE 管理员中或从某些 Delphi 菜单中）。

在您的应用程序中双击`TDatabase`. 在这里你给出一个`Name`，你从列表中选择你新创建`Alias name`的并添加这些`Parameter overrides`：

```
USER NAME=SYSDBA
PASSWORD=masterkey
SQLDIALECT=3 
```

单击确定并尝试在`Connected`属性下将属性设置为 True `TDatabase`。

# windows-8 - 我是否需要在 Windows 8 应用程序中调用 CachedFileManager.DeferUpdates

> ID：13364637
> 
> 赞同：1
> 
> 时间：2012-11-13T16:28:49.877
> 
> 标签：windows-8, async-await, storagefile

在文件选择器 Windows 8 示例中，文件保存如下：

```
CachedFileManager.DeferUpdates(file);
await FileIO.WriteTextAsync(file, stringContent);
FileUpdateStatus status = await CachedFileManager.CompleteUpdatesAsync(file); 
```

我将一个对象序列化为 XML，所以这样做略有不同：

```
// CachedFileManager.DeferUpdates(file);
var ras = await file.OpenAsync(FileAccessMode.ReadWrite);
var outStream = ras.GetOutputStreamAt(0);
var serializer = new XMLSerializer();
serializer.Write(myObject, outStream);
// FileUpdateStatus status = await CachedFileManager.CompleteUpdatesAsync(file); 
```

无论有没有 CachedFileManager（上面注释掉），它都可以工作。

所以，我应该包含 CachedFileManager 吗？如果我使用它，我是否以正确的方式保存文件。

此代码可以正常工作并很好地保存文件，但我不喜欢包含我不理解的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:49:21.320

是的，此代码将在没有 CachedFileManager 的情况下工作。但是，当您使用 CachedFileManager 时，您会通知文件提供者该文件正在更改中。如果您的文件位于 SkyDrive 上，则创建文件并一次上传会比多次更新更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:18:12.777

你可以在那里获得完整的故事：http: [//www.jonathanantoine.com/2013/03/25/win8-the-cached-file-updater-contract-or-how-to-make-more-useful-the-文件保存选择器合同/](http://www.jonathanantoine.com/2013/03/25/win8-the-cached-file-updater-contract-or-how-to-make-more-useful-the-file-save-picker-contract/)

它只是告诉“存储库”应用程序上传文件。

# html - "cannot resolve tag svg" with html5 in Visual studio 2012

> ID：13364643
> 
> 赞同：6
> 
> 时间：2012-11-13T16:29:29.510
> 
> 标签：html, svg, visual-studio-2012

I following the jump start course on Microsoft virtual acadamy. In module 3 they do some fun stuf with SVG. when I try to do the same in visual studio 2012 the tag can not be found

this is de html for the default page.

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>WindowsSandbox</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!-- WindowsSandbox references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
</head>

<body>
    <menu id="optoinsMenu">
        <li id="optionsMenuText">Title</li>
        <svg></svg>
    </menu>
    <section style="margin-left: 120px; margin-top: 45px">

        <hgroup>
            <h1>Markup</h1>
            <h2>Demo</h2>
        </hgroup>
        <p>Favorites:</p>
        <form onsubmit="mrRock.play(); return false;">
            <input id="favUrl" type="url" required="required" placeholder="http://www.naam.com" />
            <input type="submit" name="Save" value="Save" />
        </form>
        <audio src="/audio/01 - MacDonald, Amy - Mr Rock & Roll.mp3" id="mrRock"></audio>
        <video src="Video/Exam480Mod6Part2_high.mp4" controls="controls" />
    </section>
</body> 
```

It is a standard javascript windows store project. Am I missing a refernce?

Michiel

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T10:48:05.700

Could it be you are using ReSharper?

# ios - What determines the load address for an ios app?

> ID：13364648
> 
> 赞同：1
> 
> 时间：2012-11-13T16:29:50.320
> 
> 标签：ios, crash-dumps, symbolicatecrash

Up until very recently (around november 4th, 2012) the crash dumps from our ios app always had a load address of 0x1000\. We never used the -l option in atos and we still got good results so I assume it defaults to 0x1000\. Over the last week we were having difficulties tracing crashes and it turned out the load addresses have been different in every crash log since november 4th.

Does anyone know what determines the load address?

Is it something that Apple has done recently or possibly something that our app has done to cause this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:51:59.467

您可以通过查看报告底部的“二进制图像”部分从崩溃报告中检索基地址。第一个条目是具有一系列地址的二进制映像，取第一个并将其`atos`作为加载地址传递。

崩溃报告示例：

```
[...]
Binary Images:
0x1000 - 0xfcfff +YOUR_BINARY_NAME armv7  <9b381f1828fa3a888d4fbc4175f9a16d> /var/mobile/Applications/FD624263-D877-4F07-BC1F-5E6703A78D07/YOUR_APP.app/YOUR_BINARY_NAME
0x7ba000 - 0x7befff  AccessibilitySettingsLoader armv7   /System/Library/AccessibilityBundles/AccessibilitySettingsLoader.bundle/AccessibilitySettingsLoader
[...] 
```

`0x1000`是您要查找的装载地址。

# .net - RadAjaxManager AJAX Request Fails Roughly 10% of the time

> ID：13364649
> 
> 赞同：8
> 
> 时间：2012-11-13T16:29:51.007
> 
> 标签：.net, ajax, vb.net, telerik

I have a web application which uses a RadAjaxManager to populate RadComboBox controls as a user makes selections on one of my pages. This works correctly most of the time however roughly 10% of the time the AJAX call seems to fire but no values are loaded into the target RadComboBox. If the browser is closed and the page accessed again this behavior seems to continue but after a few minutes and another browser refresh everything works fine once again.

Here are the Ajax settings for the RadComboBox initiating the AJAX request:

```
<telerik:AjaxSetting AjaxControlID="rcmbMarket">
        <UpdatedControls>
            <telerik:AjaxUpdatedControl ControlID="rcmbApplicationField" 
                LoadingPanelID="RadAjaxLoadingPanel1" />
            <telerik:AjaxUpdatedControl ControlID="ApplicationFieldSource" 
                LoadingPanelID="RadAjaxLoadingPanel1" />
        </UpdatedControls>
    </telerik:AjaxSetting> 
```

Here is the markup for the initiating and traget combo boxes:

```
<asp:TableRow HorizontalAlign="Center" ID="ProductRow3">
    <asp:TableCell Width="25%" HorizontalAlign="Left" ID="MarketLabelCell">
        <asp:Label ID="lblMarket" runat="server" Text="Market: "></asp:Label>
        <asp:RequiredFieldValidator ID="vldMarket" runat="server" ControlToValidate="rcmbMarket" 
            ErrorMessage="*" ForeColor="Red" SetFocusOnError="true" ValidationGroup="grpMain"></asp:RequiredFieldValidator>
    </asp:TableCell>
    <asp:TableCell Width="25%" HorizontalAlign="Left" ID="MarketDDLCell">
        <telerik:RadComboBox ID="rcmbMarket" runat="server" AllowCustomText="false" DataSourceID="MarketSource" AutoPostBack="true" CausesValidation="false"
            DataTextField="MarketDesc" DataValueField="pkMarketID" AppendDataBoundItems="true" OnSelectedIndexChanged="Market_Check">
            <Items>
                <telerik:RadComboBoxItem Text="" Value="" />
            </Items>
        </telerik:RadComboBox>
        <asp:SqlDataSource ID="MarketSource" runat="server" ConnectionString="<%$ ConnectionStrings:QuoteProdConn %>" SelectCommand="SELECT pkMarketID, MarketDesc FROM Data.Market WHERE Active = 'True' ORDER BY MarketDesc ASC"></asp:SqlDataSource>
    </asp:TableCell>
    <asp:TableCell Width="25%" HorizontalAlign="Left" ID="ApplicationLabelCell">
        <asp:Label ID="lblApplicationField" runat="server" Text="Application Field:"></asp:Label>
        <asp:RequiredFieldValidator ID="vldAppField" runat="server" ControlToValidate="rcmbApplicationField" 
            ErrorMessage="*" ForeColor="Red" SetFocusOnError="true" ValidationGroup="grpMain"></asp:RequiredFieldValidator>
    </asp:TableCell>
    <asp:TableCell Width="25%" HorizontalAlign="Left" ID="ApplicationTextCell">
        <telerik:RadComboBox ID="rcmbApplicationField" runat="server" AllowCustomText="false" DataSourceID="ApplicationFieldSource" ExpandDirection="Down"
            AutoPostBack="true" DataTextField="AppDescription" DataValueField="pkAppFieldID" AppendDataBoundItems="true" CausesValidation="false" MaxHeight="300px">
            <Items>
                <telerik:RadComboBoxItem Text="" Value="" />
            </Items>    
        </telerik:RadComboBox>
        <asp:SqlDataSource ID="ApplicationFieldSource" runat="server" ConnectionString="<%$ ConnectionStrings:QuoteProdConn %>"></asp:SqlDataSource>
    </asp:TableCell>
</asp:TableRow> 
```

Here is the code behind for the Market_Check sub called when the selected index of the market combo box is changed:

```
Protected Sub Market_Check(ByVal sender As Object, ByVal e As System.EventArgs)

    Dim tmpItem As New Telerik.Web.UI.RadComboBoxItem("", "")
    ApplicationFieldSource.SelectCommand = "SELECT pkAppFieldID, AppDescription FROM Data.ApplicationField WHERE Active = 'True' AND fkMarketID = " & rcmbMarket.SelectedValue.ToString() & " ORDER BY AppDescription ASC "
    ApplicationFieldSource.DataBind()
    rcmbApplicationField.Items.Clear()
    rcmbApplicationField.Items.Add(tmpItem)
    rcmbApplicationField.DataBind()

End Sub 
```

It is all pretty simple so I am really not sure why my this issue is happening. Any help at all would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:49:44.927

也尝试使用 Telerik Ajax 更新 ApplicationFieldSource。

无论如何，这种方法非常棘手，今天您拥有比 RadAjaxManager/MS ASP.NET ajax 好得多的客户端服务器技术，例如对简单 Web 服务的简单 jQuery 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T08:52:41.823

您是否尝试使用 FireBug（Net 选项卡）或 Fiddler 检查请求和响应属性？如果 rcmbMarket 项目的某些选定值（即数据库中的一些不良数据）发生这种情况，这可以提供更多的洞察力。另外，请检查页面是否太重而无法发布。RadAjaxManager 即使在 ajax 请求中也会发布整页。

# android - How to implement CordovaWebView in an activity

> ID：13364650
> 
> 赞同：2
> 
> 时间：2012-11-13T16:29:55.750
> 
> 标签：android, cordova

I try to implement CordovaWebView in an activity but I get the following Error:

```
android.view.InflateException: Binary XML file line #12: Error inflating class
org.apache.cordova.CordovaWebView 
```

Here is my Code:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" /-->

<org.apache.cordova.CordovaWebView
    android:id="@+id/tutorialView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

and:

```
public class NewActivity extends Activity implements CordovaInterface {

CordovaWebView cwv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    cwv = (CordovaWebView) findViewById(R.id.tutorialView);
    cwv.loadUrl("file:///android_asset/www/index.html");
}
} 
```

My Phonegap version is 2.2.0 can anyone tell why it is happening?

thanks in advance

kobi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:32:31.660

尝试将其添加到您的主要活动课程中-

```
public Activity getActivity() {
      return this;
    } 
```

参考：http: [//3z.uipc.org/blog_wp/mixing-phonegap-webview-with-native-ui/](http://3z.uipc.org/blog_wp/mixing-phonegap-webview-with-native-ui/)

# ruby-on-rails - 自定义 Jasmine HTML 输出

> ID：13364653
> 
> 赞同：2
> 
> 时间：2012-11-13T16:30:07.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jasmine

我正在用 Jasmine 在 Rails 中测试一个项目，一切都很好。

我现在唯一的问题是我不是测试显示方式的忠实粉丝。目前，我在查看我的测试套件，`http://localhost:8000/jasmine`Jasmine 将我的样式连同它自己的样式一起引入，并按如下方式呈现测试：

![我的茉莉花输出](../Images/44a589a5b46cfa7301bface1370b6c46.png)

我想像这样渲染测试（正如我在其他地方看到的那样）： ![所需的茉莉花产量](../Images/12c70965b74ba6ac0d0e58467b56f4ae.png)

或者有一些自定义 HTML 输出/布局的方法。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:08:37.330

如果您使用`jasmine.TrivialReporter`. gem 显示的是推荐的，即`jasmine.HtmlReporter`. 您可以使用此处所述的琐碎操作：[https](https://github.com/pivotal/jasmine/blob/v1.3.1/lib/jasmine-core/example/SpecRunner.html) ://github.com/pivotal/jasmine/blob/v1.3.1/lib/jasmine-core/example/SpecRunner.html ，但这意味着不通过独立运行 jasmine宝石。

（仅限版本 1._._。）

# jquery - 我如何使用 jquery + CSS 过滤图像

> ID：13364654
> 
> 赞同：1
> 
> 时间：2012-11-13T16:30:07.713
> 
> 标签：jquery, image, list, filtering

所以我有一个来自 mysql 表的列表。示例：http: [//i.imgur.com/MPJSR.png](http://i.imgur.com/MPJSR.png?1)

此列表包含具有 ID 的某些类别。获取类别和图像之间的链接。我为每个图像赋予了与列表 ex 中的类相同的类名。

```
(e.g  <a href="#" class="1">Logo</a>  and <img class="1" src="#" /> 
```

用 JQuery 写这个的最好方法是什么？

我开始写一些 jQuery 代码，但很快就注意到它是垃圾。

```
$(document).ready(function(){    
  $(".1").click(function(event){
    $('img.2').addClass("white");        
    $('img.3').addClass("white");        
    $('img.4').addClass("white");
    $('img.5').addClass("white");     
    $('img.6').addClass("white");
    $('img.7').addClass("white");        
    $('img.8').addClass("white");        
    $('img.9').addClass("white");
    $('img.10').addClass("white");
    $('img.11').addClass("white");
    $('img.12').addClass("white");
    $('img.13').addClass("white");    
   });
}); 
```

所以我对你们的问题是......在不编写 100 行丑陋代码的情况下处理这个问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:47:18.233

您可以为每个 dom 元素**添加多个类**，jquery 仍然可以正确找到它。您需要为所有图像分配额外的类，例如`class="1 thumb_image`，`class="2 thumb_image`然后只需使用[jquery 而不是](http://api.jquery.com/not-selector/)选择器：`$('.thumb_image:not("1")').addClass("white");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:39:37.273

如果我正确理解了这个问题，我认为这应该可以解决问题。

```
<script type="text/javascript">
    $(document).ready(function(){    
      $("#category a").click(function(e){
            e.preventDefault();
            var clicked_class = $(this).attr('class');

        $('img').each( function() {
            var image = $(this);

            if( image.hasClass( clicked_class ) ) {
                image.removeClass( 'white' );
            } else {
                image.addClass( 'white' );
            }

        });

       });
    });
</script> 
```

首先，我们将点击事件添加到`#category`div 中的锚点。当它们被点击时，我们然后抓取点击锚的类，然后使用该类与每个图像进行比较。如果图像共享该类，我们将其与`white`该类更新，否则我们删除`white`该类，以防先前的操作添加它。

# android - .DataManagerAppPreferenceActivity 在其他设备中的 defy

> ID：13364656
> 
> 赞同：2
> 
> 时间：2012-11-13T16:30:09.913
> 
> 标签：android

什么意图我可以让我的应用打开启用和禁用数据包的设置？

我尝试`ACTION_DATA_ROAMING_SETTINGS`但我错了，因为不要做我想要的。

我只需要启用和禁用数据包...

我用的手机是motorola defy，我发现做我想要的Intent是：`com.motorola.blur.datamanager.app.DataManagerAppPreferenceActivity`。但我需要 Android 的本机 Intent，因为我的应用程序将在其他设备上运行。

# javascript - 淘汰赛 - 将单击绑定到嵌套数组子元素

> ID：13364657
> 
> 赞同：0
> 
> 时间：2012-11-13T16:30:27.760
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

好的，我在使用 Knockout 时遇到问题，因为它无法解析可观察数组的子元素上的点击绑定。我怀疑我的映射有问题，但我无法弄清楚。我有一个我创建的 jsFiddle：

[http://jsfiddle.net/internetH3ro/ShjeE/1/](http://jsfiddle.net/internetH3ro/ShjeE/1/)

这是我的 JS：

```
var PaycheckBudgetItem = function(data) {
    var self = this;
    self.PaycheckBudgetItemId = ko.observable(data.PaycheckBudgetItemId);
    self.PaycheckBudgetId = ko.observable(data.PaycheckBudgetId);
    self.Description = ko.observable(data.Description);
    self.Amount = ko.observable(data.Amount);
    self.DueDate = ko.observable(data.DueDate);
    self.IsPaid = ko.observable(data.IsPaid);
    self.PaidStatus = ko.observable(data.PaidStatus);

    self.updateStatus = function() {
        alert('test');
    };
};

var mapping = {
    'Items': {
        create: function(options) {
            return new PaycheckBudgetItem(options.data);
        }
    }
};

var PaycheckBudget = function(data) {
    var self = this;
    self.PaycheckBudgetId = ko.observable(data.PaycheckBudgetId);
    self.PaycheckBudgetDate = ko.observable(data.PaycheckBudgetDate);
    self.PaycheckBudgetAmount = ko.observable(data.PaycheckBudgetAmount);
    self.Remaining = ko.observable(data.Remaining);
    self.Items = ko.observableArray(data.Items);
    ko.mapping.fromJSON(data.Items, mapping, self.Items);
};

var BudgetListViewModel = function(data) {
    var self = this;
    self.budgets = ko.observableArray(data);
};

var data = [
    {
    "PaycheckBudgetId": 1,
    "PaycheckBudgetDate": "11/9/2012",
    "PaycheckBudgetAmount": 2315,
    "Items": [
        {
        "PaycheckBudgetItemId": 11,
        "PaycheckBudgetId": 1,
        "Description": "Rent",
        "Amount": 400,
        "DueDate": "11/9/2012",
        "IsPaid": "Unpaid",
        "PaidStatus": false},
    {
        "PaycheckBudgetItemId": 12,
        "PaycheckBudgetId": 1,
        "Description": "Cell Phone",
        "Amount": 166,
        "DueDate": "11/9/2012",
        "IsPaid": "Unpaid",
        "PaidStatus": false}
    ],
    "Remaining": 1749},
{
    "PaycheckBudgetId": 2,
    "PaycheckBudgetDate": "11/23/2012",
    "PaycheckBudgetAmount": 2315,
    "Items": [
        {
        "PaycheckBudgetItemId": 3,
        "PaycheckBudgetId": 2,
        "Description": "Rent",
        "Amount": 400,
        "DueDate": "11/23/2012",
        "IsPaid": "Unpaid",
        "PaidStatus": false},
    {
        "PaycheckBudgetItemId": 4,
        "PaycheckBudgetId": 2,
        "Description": "Tuition",
        "Amount": 250,
        "DueDate": "11/23/2012",
        "IsPaid": "Unpaid",
        "PaidStatus": false}
    ],
    "Remaining": 1665}
];

ko.applyBindings(new BudgetListViewModel(data), $('#budget-list-container')[0]);​ 
```

这是我的 HTML：

```
<div id="budget-list-container" class="well sidebar-nav">
        <ul class="nav nav-list" data-bind="template: { name: 'budgetTemplate', foreach: budgets, as: 'budget' }">
            <script type="text/html" id="budgetTemplate">
                <li class="nav-header">
                    Paycheck for <span data-bind="text: PaycheckBudgetDate"></span> - <span data-bind="text: formatCurrency(PaycheckBudgetAmount)"></span>
                </li>
                <li>
                    <table class="table table-bordered table-condensed">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Due Date</th>
                                <th>Paid/Unpaid</th>
                            </tr>
                        </thead>
                        <tbody data-bind="template: { name: 'budgetItemTemplate', foreach: Items, as: 'budgetItem' }"></tbody>
                    </table>
                        Remaining: <span data-bind="text: formatCurrency(Remaining)"></span>
                    <hr />
                </li>
            </script>
            <script type="text/html" id="budgetItemTemplate">
                <tr>
                    <td><span data-bind="text: Description"></span></td>
                    <td><span data-bind="text: formatCurrency(Amount)"></span></td>
                    <td><span data-bind="text: DueDate"></span></td>
                    <td>
                        <button class="btn-link pull-right update-status" data-bind="text: IsPaid, click: updateStatus" />
                    </td>
                </tr>
            </script>
        </ul>
    </div>​ 
```

它的肉是这个。我有 2 个 KO 模型，PaycheckBudget 和 PaycheckBudgetItem。PaycheckBudget 包含 PaycheckBudgetItem 模型的可观察数组。PaycheckBudgetItem 模型上有一个名为“updateStatus”的函数，它绑定到我的 HTML 中的点击事件。当我加载我的页面时，我收到错误“无法解析绑定。未定义更新状态”。

我假设我的问题出在我的项目映射中。如果我删除点击处理程序，一切都会绑定并正确显示。

如果有人可以帮助我，也许指出我所缺少的，那将非常有帮助。我对淘汰赛的东西有点陌生，所以我很可能错过了一些明显/简单的东西。

（不，我的小提琴中没有任何数据是敏感或真实世界的，只是虚拟数据。:)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:27:28.457

[我确实在KnockoutJs JabbR 聊天室](https://jabbr.net/#/rooms/knockoutjs)回答了你的问题。

你的假设是正确的。问题似乎主要是您的映射。您甚至从未调用 PaycheckBudget 类的构造函数。例如，您的 BudgetListViewModel 构造函数如下所示：

```
var BudgetListViewModel = function(data) {
    var self = this;
    self.budgets = ko.observableArray(data);
}; 
```

但可能应该是这样的：

```
var BudgetListViewModel = function(data) {
    var self = this;
    self.budgets = ko.observableArray(ko.utils.arrayMap(data, function(item){
        return new PaycheckBudget(item);
    }));
}; 
```

我对你的 jsfiddle 进行了一些编辑，并在以下位置提供了一个工作示例：http: [//jsfiddle.net/KBpET/](http://jsfiddle.net/KBpET/)。我确实先编辑了另一个映射，所以我从未检查过项目映射是否正确，但我相信您将能够解决该步骤（项目的代码已在链接的小提琴中更改）。

希望能帮助到你！

/罗伯特

# javascript - 是否有未记录的 FB.init 选项？

> ID：13364658
> 
> 赞同：1
> 
> 时间：2012-11-13T16:30:35.723
> 
> 标签：javascript, facebook-javascript-sdk

**[`FB.init`](https://developers.facebook.com/docs/reference/javascript/FB.init/)**列出以下选项**[的文档：](https://developers.facebook.com/docs/reference/javascript/FB.init/)**

*   `appId`
*   `cookie`
*   `logging`
*   `status`
*   `xfbml`
*   `channelUrl`
*   `authResponse`
*   `frictionlessRequests`
*   `hideFlashCallback`

但是，我已经看到几个使用其他选项的 FaceBook 网络应用程序，包括（但可能不限于）

*   `useCachedDialogs`
*   `oauth`
*   `secret`（*对于 appSecret - 这是一个坏主意，对吧？*）

这些标准选项适用于`FB.init`吗？如果是这样，他们在哪里记录，如果有的话？

如果不是，这些是自定义选项吗？以及做这样的事情有什么好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:24:08.943

*从评论中复制 n 粘贴*

`oauth`已（或已）记录在案。需要`oauth`在js sdk中使用。`useCachedDialogs`适用于移动应用程序。从[这里](http://developers.facebook.com/docs/mobile/web/build/)

> 默认情况下，出于性能原因，对话框将被预先缓存。如果您出于调试原因想要禁用它，请在 init() 中将“useCachedDialogs”标志设置为“false”。

`Secret`不应该在客户端可见，我认为 facebook 不会说过要在客户端包含这个

# mysql - mysql NOT IN 查询

> ID：13364659
> 
> 赞同：1
> 
> 时间：2012-11-13T16:30:40.317
> 
> 标签：mysql, sql

我正在尝试生成有权访问特定位置的用户列表。在我看来，我的数据库中记录用户可以访问的位置的表是倒退的。它列出了用户**无法**访问的位置。我尝试`not in`了几种不同的方法，但没有任何运气。该查询只返回一个空白结果集。我试过在这里找到一些东西来帮助我并用谷歌搜索，但这没有帮助......我总是得到空白的结果屏幕（没有返回）。我认为问题在于每个相应位置`USER_LOCATION_EXCLUSION`都有几个条目。`USER_ID`我没有创建这个表结构，而是继承了它。

### 设想

```
Tables                  Columns
====================================================
APP_USER                USER_ID, USER_NAME    
LOCATION                LOCATION_ID, LOCATION_NAME    
USER_LOCATION_EXCLUSION USER_ID, LOCATION_ID 
```

`APP_USER`和`LOCATION`表都有唯一的 ID。这些ID既用于`USER_LOCATION_EXCLUSION`（列出用户**无法**访问的位置），也可以根据用户访问在此表中多次使用。我想制作具有`USER_NAME`并且`LOCATION_NAME`他们可以访问的报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:51:27.380

听起来您想要的是笛卡尔结果减去排除...即：对于每个用户，假设为他们提供每个位置访问权限，然后找出他们被排除在外的内容...

```
select
      PreQuery.User_ID,
      PreQuery.User_Name,
      PreQuery.Location_Name
   from
      ( select
               AU.User_ID,
               AU.User_Name,
               L.Location_ID,
               L.Location_Name
            from
               App_User AU,
               Location L ) PreQuery
         LEFT JOIN USER_LOCATION_EXCLUSION ULE
             on PreQuery.User_ID = ULE.User_ID
             AND PreQuery.LOCATION_ID = ULE.LOCATION_ID
       where
          ULE.Location_ID = NULL 
```

通过对排除表执行 LEFT JOIN，每条记录都将尝试加入排除列表......因此，当它找到匹配项时，该位置 ID 将存在......当它不存在时，它将是null（满足您的 NOT Excluded from）

这也消除了为每个用户/位置测试的子选择 WHERE 子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:45:17.597

我会使用这样的东西。要获取位置用户的**所有**组合，您可以使用不带连接的 Select 查询：

```
Select *
From Location, App_User 
```

但从这里您必须排除`user_location_list`表中包含的位置用户组合。这可以解决您的问题：

```
Select
  Location.*,
  App_User.*
From App_USer, Location
Where
  Not Exists (select * from user_location_exclusion
              where user_location_exclusion.user_id=app_user.user_id
              and user_location_exclusion.location_id=location.location_id) 
```

这显示了尚未排除的每个用户的每个位置。

# facebook - 是否可以确定用户的@Facebook.com 电子邮件地址？

> ID：13364661
> 
> 赞同：1
> 
> 时间：2012-11-13T16:30:43.920
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

是否有可能可靠地确定任何 Facebook 用户的 Facebook 电子邮件是什么？我之前知道这是不可能的，因为并非所有用户都有用户名。但我相信这已经改变了...

我试图找出一种方法让用户通过我的应用程序向他们的朋友发送直接消息。请求功能现在非常混乱，因为您无法发送自定义消息，这意味着大多数朋友可能会忽略该请求。

我试图让我的用户发送给他们的朋友的消息类型不会被 Facebook 视为垃圾邮件，因为这些消息是直接从用户发送给他们的朋友的消息，除非它是通过应用程序完成的。但是，如果消息只是说“Joe 想让你试试这个应用程序……”那是毫无意义的。Facebook 平台上的应用程序的实用性现在变得值得怀疑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:50:23.750

我认为[facebook的条款和条件](https://developers.facebook.com/policy/)不允许这样做......

> Facebook 消息传递（即发送到@facebook.com 地址的电子邮件）是为用户之间的通信而设计的，而不是应用程序直接与用户通信的渠道。”

尽管您在帖子末尾提出警告，但我相信 facebook 会认为这是从您的应用程序发送给用户的消息。

就您的问题而言，返回的用户数据包括“用户名”，这是您创建电子邮件地址所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:18:17.197

> 是否有可能可靠地确定任何 Facebook 用户的 Facebook 电子邮件是什么？我之前知道这是不可能的，因为并非所有用户都有用户名。但我相信这已经改变了...

是的，现在每个用户都应该设置一个用户名——如果不是他们自己，那么 FB 会为他们选择一个。

除此之外，我认为写信给 userid@facebook 也可以。

但我同意组合的回答——Facebook 明确表示这不应该用于应用程序到用户的通信。判断您的情况是否正常取决于您 - 否则您可能会考虑使用发送对话框，这更像是让用户“通过”您的应用程序进行交流的“指定”方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:38:30.277

如果您正在寻找的是给他们一个新的消息通知，它是行不通的。因为，如果您向 facebook 电子邮件发送电子邮件，它将落在`Others`消息框中的文件夹中，这就像一个垃圾邮件箱。尝试邮寄您自己的@facebook id，看看会发生什么。

Facebook 没有提供任何关于如何让用户@facebook 电子邮件的文档，很可能是因为他们不希望开发人员使用它。

为什么不直接邮寄？您可以通过添加范围轻松获取他们的电子邮件`email`，并且您也可以轻松捕获电子邮件。

> ```
> $data = file_get_contents("https://graph.facebook.com/me?access_token=xxxxxx");
> 
> $data = json_decode($data,true);
> 
> $email = $data['email']; 
> ```

在您的情况下，这是一个可行的选择吗？

# drupal - Theme Omega 3 (D7) - 多种布局

> ID：13364662
> 
> 赞同：0
> 
> 时间：2012-11-13T16:30:44.343
> 
> 标签：drupal, drupal-7, drupal-theming

我尝试在 Drupal 7 上使用 Omega 3 的主题。我喜欢使用可以选择区域大小的列布局。

![在此处输入图像描述](../Images/5717e037baa49a5438823569835f9905.png)

但是当我想在其他页面上使用不同的布局时，我不明白该怎么做，因为“外观”的“设置”提供了对所有页面的有效布局的规定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:55:59.840

您应该使用 Delta & Context 模块来实现它，请参阅[http://friendlymachine.net/posts/2012/creating-page-layouts-omega-theme如何](http://friendlymachine.net/posts/2012/creating-page-layouts-omega-theme)

# javascript - 向 if-else 块添加语句破坏了我的代码

> ID：13364663
> 
> 赞同：-1
> 
> 时间：2012-11-13T16:30:44.153
> 
> 标签：javascript, jquery, string, compare

这有效（它将一些文本打印到屏幕上）：

```
$(document).ready(function() {

var uspTot = 1
var keyTot = 5

    $('.field .button').click(function(){
    var theSibling = $(this).siblings('div').attr('id');
    if (theSibling == 'usp'){
       $(this).before('the string is usp')
       uspTot++ 
    } else if (theSibling == 'keywords')(
       $(this).before('the string is keywords') 
    )
}); 
```

然而这并没有做任何事情：

```
$(document).ready(function() {

var uspTot = 1
var keyTot = 5

    $('.field .button').click(function(){
    var theSibling = $(this).siblings('div').attr('id');
    if (theSibling == 'usp'){
       $(this).before('the string is usp')
       uspTot++ 
    } else if (theSibling == 'keywords')(
       $(this).before('the string is keywords')
       keyTot++
    )
}); 
```

两者之间的唯一区别是这段代码：

```
keyTot++ 
```

我不明白为什么这完全破坏了我的基本脚本，所以我希望这里有人可以指出并说“哦，那是因为你忘记了 XXXX，你这个愚蠢的东西” - 或类似的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:33:06.630

你的大括号打错了：

```
} else if (theSibling == 'keywords')(
       $(this).before('the string is keywords')
       keyTot++
    ) 
```

应该：

```
} else if (theSibling == 'keywords'){
       $(this).before('the string is keywords')
       keyTot++
    } 
```

花括号对于多个命令是必需的，这就是您没有收到错误的原因。

当您使用常规大括号时，代码被视为：

```
} else if (theSibling == 'keywords')
    ($(this).before('the string is keywords')) 
```

这是有效的，但无用的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:32:59.707

```
else if (theSibling == 'keywords')(
        $(this).before('the string is keywords')
        keyTot++
) 
```

你想要花括号：

```
else if (theSibling == 'keywords'){
        $(this).before('the string is keywords')
        keyTot++
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:06:42.153

您在应该使用花括号的地方使用常规大括号。if 和 else 的正确语法是`if(){} else if () {}` 所以你的**两个块都是错误的**。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T16:34:05.097

语句后缺少分号`$this.before();`。

# entity-framework - 使用实体框架更新数据库记录（延迟加载和虚拟属性）

> ID：13364665
> 
> 赞同：1
> 
> 时间：2012-11-13T16:31:07.663
> 
> 标签：entity-framework, orm, sql-update, lazy-loading, crud

我正在努力*更新*数据库中现有讲师的数据。
每个讲师都有他/她教授的**Name**、**AcademicDegree**和**Courses （** *Courses==Lessons*）。

实际上有更多的属性，`class Lecturer`但它们不相关。为简单起见，我们假设[POCO](http://en.wikipedia.org/wiki/Plain_Old_CLR_Object)类是这样定义的：

```
// POCO class (Entity Framework Reverse Engineering Code First)
public class Lecturer
{
    public Lecturer()
    {
        this.Courses = new List<Course>();
    }

    public int Id_Lecturer { get; set; } // Primary Key
    public string Name { get; set; }
    public int? Academic_Degree_Id { get; set; }
    public virtual AcademicDegree AcademicDegree { get; set; }
    public virtual ICollection<Course> Courses { get; set; }
} 
```

在*数据访问层*中，我有方法应该更新等于（使用，和）`void UpdateLecturer(Lecturer lecturer)`的讲师。`Id_Lecturer``lecturer.Id_Lecturer``lecturer.Name``lecturer.AcademicDegree``lecturer.Courses`

这是非常方便的方法，因为在*ViewModel*中我可以调用`_dataAccess.UpdateLecturer(SelectedLecturer)`（在[XAML](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language)`SelectedLecturer`中绑定的位置；属性可以由用户在es 和中设置）。`SelectedLecturer``TextBox``Checkbox`

不幸的是这种方法：

```
 public void UpdateLecturer(Lecturer lecturer)
    {
        using(var db = new AcademicTimetableDbContext())
        {
            // Find lecturer with Primary Key set to 'lecturer.Id_Lecturer':
            var lect = db.Lecturers.Find(lecturer.Id_Lecturer);

            // If not found:
            if (lect == null)
                return;

            // Copy all possible properties:
            db.Entry(lect).CurrentValues.SetValues(lecturer);
            // Everything was copied except 'Courses'. Why?!

            // I tried to add this, but it doesn't help:
            // var stateMgr = (db as IObjectContextAdapter).ObjectContext.ObjectStateManager;
            // var stateEntry = stateMgr.GetObjectStateEntry(lect);
            // stateEntry.SetModified();

            db.SaveChanges();
        }
    } 
```

更新所有内容（即`Id_Lecturer`、和）`Name`，但 .之后不变的**除外**。`Academic_Degree_Id``AcademicDegree` **`Courses``db.SaveChanges()`**

 **为什么？我该如何解决？

* * *

类似的问题：

*   [更新实体框架中的实体](https://stackoverflow.com/questions/6655716/updating-an-entity-in-entity-framework)
*   [如何-我-附加-实体-框架-对象-从-数据库](https://stackoverflow.com/questions/700192/how-do-can-i-attach-a-entity-framework-object-that-isnt-from-the-database)
*   [using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)
*   [实体框架更新与相关实体](https://stackoverflow.com/questions/1612655/entity-framework-updating-with-related-entity)
*   [实体框架代码首先不分离方法在 dbcontext](https://stackoverflow.com/questions/4168073/entity-framework-code-first-no-detach-method-on-dbcontext)

* * *

*- 编辑 -*

我也尝试过这种方式（想法来自[这篇文章](https://stackoverflow.com/questions/12585664/an-object-with-the-same-key-already-exists-in-the-objectstatemanager-the-object#12587752)）：

```
public void UpdateLecturer(Lecturer lecturer)
{
    using (var db = new AcademicTimetableDbContext())
    {
        if (lecturer == null)
            return;

        DbEntityEntry<Lecturer> entry = db.Entry(lecturer);

        if (entry.State == EntityState.Detached)
        {
            Lecturer attachedEntity = db.Set<Lecturer>().Find(lecturer.Id_Lecturer);

            if (attachedEntity == null)
                entry.State = EntityState.Modified;
            else
                db.Entry(attachedEntity).CurrentValues.SetValues(lecturer);
        }

        db.SaveChanges();
    }
} 
```

但*课程*仍然不会覆盖旧值。

* * *

-- 编辑 2 --

作为对@Slauma 问题的回应，我将描述我是如何加载的（作为参数`SelectedLecturer`传递给方法）。`UpdateLecturer(Lecturer lecturer)`

我正在实施[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)概念，因此我的*解决方案中有**View*项目，并设置为. 在*视图*中有从数据库中获取的所有讲师的列表。以这种方式绑定：*`DataContext``LecturerListViewModel`*`DataGrid``DataGrid`**

 **```
<DataGrid AutoGenerateColumns="False" Name="LecturersDataGrid" HeadersVisibility="Column" IsReadOnly="True" ItemsSource="{Binding Lecturers,Mode=TwoWay}" SelectedItem="{Binding SelectedLecturer, Mode=TwoWay}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
        <DataGridTextColumn Header="Academic degree" Binding="{Binding AcademicDegree.Degree_Name}" />
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Button Content="Edit" Click="EditButtonClick"/>
                        <Button Content="Delete" Command="{Binding DataContext.RemoveLecturer, ElementName=LecturersDataGrid}" />
                    </StackPanel>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

`Lecturers``LecturerListViewModel`以这种方式从构造函数中的数据库中获取：

```
///
/// Code within LecturerListViewModel class:
///

// All lecturers from database.
public ObservableCollection<Lecturer> Lecturers

// Constructor
public LecturerListViewModel()
{
    // Call to Data Access Layer:
    Lecturers = new ObservableCollection<Lecturer>(_dataAccess.GetAllLecturers());

    // Some other stuff here...
}

private Lecturer _selectedLecturer;

// Currently selected row with lecturer.
public Lecturer SelectedLecturer
{
    get { return _selectedLecturer; }
    set { SetProperty(out _selectedLecturer, value, x => x.SelectedLecturer); }
}

///
/// Data Access Layer (within DataAccess class):
/// 

public IEnumerable<Lecturer> GetAllLecturers()
{
    using (var dbb = new AcademicTimetableDbContext())
    {
        var query = from b 
                    in dbb.Lecturers.Include(l => l.AcademicDegree).Include(l => l.Timetables).Include(l => l.Courses)
                    select b;
        return query.ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:52:33.770

将状态设置为`Modified`并且仅更新实体`SetValues`的标量属性。`Lecturer`更新`Courses`集合（它不是一个标量属性）需要更多的工作。您必须处理课程可能已从集合中删除、课程可能已添加或课程的标量属性可能已修改的情况。

此外，更新集合的方式取决于课程是否依赖于讲师。课程从集合中删除后是否需要从数据库中删除，还是只需要删除讲师和课程之间的关系？新课程添加到集合时是否需要创建新课程，还是只需要建立关系？

如果不需要删除课程并且没有创建新课程，则 Update 方法可能如下所示：

```
public void UpdateLecturer(Lecturer lecturer)
{
    using(var db = new AcademicTimetableDbContext())
    {
        if (lecturer == null)
            return;

        var lecturerInDb = db.Lecturers
            .Include(l => l.Courses)
            .Single(l => l.Id_Lecturer == lecturer.Id_Lecturer);

        // Update lecturer
        db.Entry(lecturerInDb).CurrentValues.SetValues(lecturer);

        // Remove courses relationships
        foreach (var courseInDb in lecturerInDb.Courses.ToList())
            if (!lecturer.Courses.Any(c => c.Id_Course == courseInDb.Id_Course))
                lecturerInDb.Courses.Remove(courseInDb);

        foreach (var course in lecturer.Courses)
        {
            var courseInDb = lecturerInDb.Courses.SingleOrDefault(
                c => c.Id_Course == course.Id_Course);
            if (courseInDb != null)
                // Update courses
                db.Entry(courseInDb).CurrentValues.SetValues(course);
            else
            {
                // Add courses relationships
                db.Courses.Attach(course);
                lecturerInDb.Courses.Add(course);
            }
        }
    }

    db.SaveChanges();
} 
```

根据您的场景的详细信息，正确的解决方案可能会略有不同。

**编辑**

如果集合中的课程对（可能具有导航属性）`lecturer.Courses`有引用，则在将此集合中的课程附加到上下文时可能会遇到问题，因为已经附加并且具有相同的键。您可以尝试像这样更改最后一个块以希望解决问题：`lecturer``Lecturer``lecturerInDb``else`

```
 else
            {
                // Add courses relationships
                var courseToAttach = new Course { Id_Course = course.Id_Course };
                db.Courses.Attach(courseToAttach);
                lecturerInDb.Courses.Add(courseToAttach);
            } 
```****

# ruby-on-rails - mongoid 多对多关系的更好解决方案

> ID：13364666
> 
> 赞同：0
> 
> 时间：2012-11-13T16:31:08.100
> 
> 标签：ruby-on-rails, mongodb, mongoid

mongoid 文档告诉我，`should be used with caution` 我理解他的 nn 关系，但不知道如何使用纯 mongoid 更好地解决我的问题：

一个课程有很多参与者，一个参与者可以参加很多课程。那么，将参与者存储在课程模型中，并在需要参与者的所有课程时对所有课程进行搜索，不是更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:51:49.630

您的模型应该反映您的用例。

做到这一点的一种方法是为课程设置一个模型，为参与者设置一个模型，以及将学生映射到课程的第 3 个模型（具有课程和学生的唯一索引以防止重复）。这样，就有一个模型引用其他 2 个模型。根据您的访问模式，这可能是理想的，也可能不是理想的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:23:01.473

我认为这可能是嵌入文档的一个很好的用例。有关 embeds_many 和 embedded_in，请参见首页上的示例语法：http: [//mongoid.org/en/mongoid/](http://mongoid.org/en/mongoid/)

这里的主要缺点是，如果您有不止一门课程的参与者，那么您将在每门课程中都有重复的参与者。

确保您在计划用于查找参与者的字段上放置索引。

# sql-server - SQL Server 查询对象中的错误已关闭

> ID：13364668
> 
> 赞同：0
> 
> 时间：2012-11-13T16:31:11.897
> 
> 标签：sql-server, vba, project

我想知道为什么我的查询一直返回错误 3704。在线

```
If Not rsRisks.EOF Then 
```

代码：

```
Conn.ConnectionString = sConexaoProjectServer Conn.Open

strSql = "SELECT RiskID, Title " & _
         "FROM [WebCarioca-ProjectWebApp].[dbo].[MSP_WssRisk]"

rsListRisksID.Open strSql, Conn

strSql = "SELECT " & _
            "RiskID as Id," & _
            "Title as Titulo," & _
          "FROM    [WebCarioca-ProjectWebApp].[dbo].[MSP_WssRisk]"

Dim iLinha As Integer
iLinha = 2

If Not rsRisks.EOF Then
   While Not rsRisks.EOF
       PPT_Slide.Shapes(2).Table.Cell(iLinha, 1).Shape.TextFrame.TextRange.Text = TrimNull(rsRisks("Id"))
       PPT_Slide.Shapes(2).Table.Cell(iLinha, 2).Shape.TextFrame.TextRange.Text = TrimNull(rsRisks("Titulo"))
       PPT_Slide.Shapes(2).Table.Cell(iLinha, 3).Shape.TextFrame.TextRange.Text = TrimNull(rsRisks("Atribuido"))
       PPT_Slide.Shapes(2).Table.Cell(iLinha, 4).Shape.TextFrame.TextRange.Text = TrimNull(rsRisks("Status"))
       PPT_Slide.Shapes(2).Table.Cell(iLinha, 5).Shape.TextFrame.TextRange.Text = TrimNull(rsRisks("Exposicao"))
       PPT_Slide.Shapes(2).Table.Cell(iLinha, 6).Shape.TextFrame.TextRange.Text = TrimNull(rsRisks("Categoria"))
       PPT_Slide.Shapes(2).Table.Cell(iLinha, 7).Shape.TextFrame.TextRange.Text = TrimNull(Format(rsRisks("DataVencimento"), "dd/mm/yyyy"))

       iLinha = iLinha + 1
       PPT_Slide.Shapes(2).Table.Rows.Add (-1)

       rsRisks.MoveNext

   Wend
   Else
       PPT_Slide.Shapes(2).Table.Cell(2, 1).Merge MergeTo:=PPT_Slide.Shapes(2).Table.Cell(2, 7)
       PPT_Slide.Shapes(2).Table.Cell(2, 1).Shape.TextFrame.TextRange.Text = "Não existem riscos cadastrados para este projeto."
   End If

   rsListRisksID.Close
   rsRisks.Close
   Conn.Close

   iSlideAcompanhamentoPendencias = iSlideAcompanhamentoPendencias + iDuplicateSlides - 1
   iSlideAcompanhamentoProblemas = iSlideAcompanhamentoProblemas + iDuplicateSlides - 1

   iSlideAcompanhamentoRiscos = 0 
```

如果有人可以帮助我，我将不胜感激。谢谢我也在使用项目专业2013和sharepoint 2013

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:36:10.370

在已发布的代码中，您绝不会打开 rsRisks。

您在此处打开 rsListRisksID：

```
rsListRisksID.Open strSql, Conn 
```

但不是 rsRisks。我怀疑你的意思是：

```
strSql = "SELECT " & _
            "RiskID as Id," & _
            "Title as Titulo," & _
          "FROM    [WebCarioca-ProjectWebApp].[dbo].[MSP_WssRisk]"

rsRisks.Open strSql, Conn 
```

# java - Java GUI 小画图程序

> ID：13364672
> 
> 赞同：-1
> 
> 时间：2012-11-13T16:31:18.200
> 
> 标签：java, swing, paint, paintcomponent, jcomponent

这与我的上一个问题类似（请参见[此处](https://stackoverflow.com/questions/13356365/gui-java-program-paint-program)），但我仍然无法让一切正常工作。我现在可以显示实际的 GUI，但没有显示任何内容，例如我的按钮或您绘制的内容。如果有人可以提供帮助，将不胜感激！！谢谢！

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Paint{

 public static void main(String[] args){
    Win frame = new Win();
    frame.setSize(500, 500);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

 }

}

class gui extends JComponent{
 Image image;
 Graphics2D draw;
 int x, y, prevX, prevY;

gui(){
        setDoubleBuffered(false);   
        addMouseListener(new MouseAdapter(){
                public void mousePressed(MouseEvent e){
                        prevX = e.getX();
                        prevY = e.getY();
                }

        });

        addMouseMotionListener(new MouseMotionAdapter(){
                public void mouseDragged(MouseEvent e){
                        x = e.getX();
                        y = e.getY();
                        draw.drawLine(prevX, prevY, x, y);
                        repaint();
                        prevX = x;
                        prevY = y;

                }

        });

}

public void changeColor(Color color)
{
    draw.setPaint(color);
    repaint();
}
public void clear(){
    draw.setPaint(Color.white);
    draw.fillRect(0, 0, getSize().width, getSize().height);
    draw.setPaint(Color.black);
    repaint();
}
public void paintComponent(Graphics g)
{
    if(image == null)
    {
        image = createImage(getSize().width, getSize().height);
        draw = (Graphics2D)image.getGraphics();
        draw.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        clear();
    }

    g.drawImage(image, 0, 0, null);
 }
} 

class Win extends JFrame implements ActionListener{
    JButton red, green, blue, clear;
    gui gui = new gui();

    Win(){
        super("Paint");
        setSize(500,500);

        Container content=new Container();
        content.setLayout(new BorderLayout());
        content.add(gui, BorderLayout.CENTER);
        content.setVisible(true);

        JPanel panel = new JPanel();
        content.add(panel, BorderLayout.SOUTH);

        panel.setPreferredSize(new Dimension(32, 68));
        panel.setMinimumSize(new Dimension(32, 68));
        panel.setMaximumSize(new Dimension(32, 68));

        red = new JButton("Red");
        green = new JButton("Green");
        blue = new JButton("Blue");
        clear = new JButton("Clear");

        red.setPreferredSize(new Dimension(50, 16));
        green.setPreferredSize(new Dimension(50,16));
        blue.setPreferredSize(new Dimension(50, 16));

        panel.add(red);
        panel.add(green);
        panel.add(blue);
        panel.add(clear);

        panel.setVisible(true);

        red.addActionListener(this);
        green.addActionListener(this);
        blue.addActionListener(this);
        clear.addActionListener(this);

    }
    public void actionPerformed(ActionEvent e) {

        if( e.getSource()==red){
            gui.changeColor(Color.red);
            repaint();
        }
        if( e.getSource()==green){
            gui.changeColor(Color.green);
            repaint();
        }
        if( e.getSource()==blue){
            gui.changeColor(Color.blue);
            repaint();
        }
        if( e.getSource()==clear){
            gui.clear();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:42:58.650

看看那个`Win`构造函数。您创建了很多组件，将它们添加到很多面板中，但实际上没有一个组件被添加到`Win`实例中。

由于它是`Win`您使可见的那个实例，因此没有任何东西出现是有道理的

进一步说明：

*   请不要在此处转储您的所有代码，而应尝试将其缩减为[SSCCE](http://sscce.org)（强调简短）。例如，如果您只需一个按钮即可重现您的问题，为什么要向我们展示 5 个按钮的代码。为什么`ActionListener`当您的问题是 UI 不显示时的代码
*   没有必要打电话`set(xxx)Size`。`JFrame#pack`添加所有组件后使用
*   默认情况下，组件是可见的。因此，无需调用`setVisible( true )`您创建的每个组件，只要将它们添加到已经可见的父级即可
*   `Graphics2D`类中字段的使用`gui`是完全错误的。您应该覆盖`paintComponent`自定义绘画的方法
*   类的名称`gui`违反了 Java 命名约定。这使得代码难以阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:48:48.293

您似乎没有使用您的 gui 类 - 添加此行：

```
frame.add(new Gui()); 
```

设置框架可见后（请注意，您已将类命名为 gui，这不是标准的）

# php - 根据字典顺序将单词转换为数字

> ID：13364680
> 
> 赞同：1
> 
> 时间：2012-11-13T16:31:52.560
> 
> 标签：php, redis, lexicographic

我正在尝试计算一个单词的“分数”，以便将其用于确定它在 Redis 排序集中的词典顺序（按字母顺序列出的单词）。

阅读[这篇文章](https://groups.google.com/d/msg/redis-db/o9m0dDAX6Qs/ddI7RCZWWAcJ)它说：

> 如何把一个单词变成一个分数？
> 
> 例如，如果你想使用前四个字母来产生分数，这是规则：
> 
> 分数 = 第一个字节值*(256^3) + 第二个字节值*(256^2) + 第三个字节值*(256^1) + 第四个字节值
> 
> 如果单词的长度小于 4 个字符，则只需从总和不存在的字符中省略。
> 
> 为什么这行得通？您只是将字节视为 radis-256 数字的数字:)

有了这个理论，我想出了以下代码来测试这是否可以在 PHP 数组中工作：

```
$words = array('abcd', 'hello', 'dogs', 'hiya');
$newWords = array();

foreach ($words as $word) {
    $len = strlen($word);

    if ($len > 4) {
        $len = 4;
    }

    $i = 0;
    $j = $len - 1;
    $score = 0;

    while ($i < $len) {
        $byte = ord($word[$i]);

        if ($j == 0) {
            $score += $byte;
        }
        else {
            $score += $byte * (256 ^ $j);
        }

        $i++;
        $j--;
    }

    $newWords[$score] = $word;
}

ksort($newWords);
print_r($newWords); 
```

但是，这会返回：

```
Array
(
    [75950] => abcd
    [80858] => hello
    [81124] => dogs
    [85220] => hiya
) 
```

这不是按字母顺序排列的。

谁能发现这个问题（显然分数计算是错误的）？我可能误解了帖子：-/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:55:53.223

我稍微改进了代码并改为使用`pow`a

```
$words = array('abcd', 'hello', 'dogs', 'hiya');
$newWords = array(); 
foreach ($words as $word) {

$len = strlen($word);

    if ($len > 4) {
        $len = 4;
    }

    $i = 0;
    $j = $len - 1;
    $score = 0;

    while ($i < $len) {
        $byte = ord($word[$i]);
        $score += $byte * pow(256, $j);
        $i++;
        $j--;
    }

    $newWords[$score] = $word;
}
ksort($newWords);
print_r($newWords); 
```

它完全符合您的预期：

```
Array ( [1633837924] => abcd [1685022579] => dogs [1751477356] => hello [1751742817] => hiya ) 
```

你实际上使用了 XOR [http://www.php.net/manual/en/language.operators.bitwise.php](http://www.php.net/manual/en/language.operators.bitwise.php)

# php - 保护Mysql密码

> ID：13364681
> 
> 赞同：1
> 
> 时间：2012-11-13T16:32:05.623
> 
> 标签：php, mysql

我一直在想，我正在完成一个网站，我不确定如何保护我的数据库登录名和密码，是否可以通过 php.ini 文件中的 PHP 变量声明这些？有没有更合适的方式？此外，我所有的文档现在都是使用`localhost , root , ""`. 我只想为变量切换这些值，但我不确定在哪里声明这些以保持安全。感谢您的任何回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:46:39.293

@Cthulhu 描述的方法很常见，也适用于 CakePHP 或 Symfony 等框架。

即使您将配置存储在 webroot 中的 .php 文件中，它本身也不会立即成为安全漏洞：如果您的网络服务器配置正确，它将始终使用 PHP 解析该文件，然后发送创建的输出通过 PHP。

无论如何，你最好保护你的服务器作为一个整体。如果您还没有这样做，那么确保您的数据库不接受来自外部世界的连接将是一个不错的起点。下一步是保护您的 webroot 免受其他协议（例如 ftp）的影响。最后，无论如何，防止未经授权的人登录到您的服务器（他们可以在本地连接到数据库）是必须的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:03:31.760

在 .htaccess 中使用环境变量是另一种安全存储密码的方法。

SetEnv MYSQL_DATABASE_HOSTNAME 主机名

SetEnv MYSQL_DATABASE_USERNAME 用户名

SetEnv MYSQL_DATABASE_PASSWORD 密码

最好使用任何加密和解密方法存储密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:33:41.683

你可以制作一个 php，包含

```
$username = ..
$password = ..
$db_host = .. 
```

等等

然后`include_once('database_config.php')`在任何你想使用它的地方包含它。如果您愿意，以后可以轻松修改。

此文件可以保存在您网站的 HTML 根目录**之外**`.htaccess`，或使用规则进一步保护

# c# - ChannelFactory 与自动生成的代理中的错误处理

> ID：13364686
> 
> 赞同：1
> 
> 时间：2012-11-13T16:32:29.643
> 
> 标签：c#, .net, wcf, proxy, channelfactory

我最近开始编写自己的 ChannelFactory 包装器来调用我的 WCF 服务，而不是依赖于 Visual Studio 自动生成的代码

以前，使用自动生成的代理，我可以这样做以进行错误检查：

```
 protected AccessControlServiceClient AccessControlService
    {
        get
        {
            // Check if not initialized yet
            if (HttpContext.Current.Session["AccessControlServiceClient"] == null)
                HttpContext.Current.Session["AccessControlServiceClient"] = new AccessControlServiceClient();

            // If current client is 'faulted' (due to some error), create a new instance.
            var client = HttpContext.Current.Session["AccessControlServiceClient"] as AccessControlServiceClient;
            if (client.State == CommunicationState.Faulted)
            {
                try { client.Abort(); }
                catch { /* no action */ }

                client = new AccessControlServiceClient();
                HttpContext.Current.Session["AccessControlServiceClient"] = client;
            }

            return client;
        }
    } 
```

我应该如何为 ChannelFactor 处理这个问题？如果出现问题，处理和重新创建频道的最佳做法是什么？例如，间歇性网络连接、会话超时等。

这是我的代码目前的样子：

来自 ProxyBase.cs 的片段 - 创建通道

```
private void Initialise()
{
    lock (_sync)
    {
        if (_channel != null) return;

        _channel = new ChannelFactory<T>(_serviceEndPointUri).CreateChannel();
    }
 } 
```

UserManagementServiceClient.cs - IUserManagementService 是 WCF 合同

```
public class UserManagementServiceClient : ProxyBase<IUserManagementService>
{
    public UserManagementServiceClient(string serviceEndPointUri)
        : base(serviceEndPointUri)
    {
    }

    public TokenResponse GetToken(TokenRequest request)
    {            
        return Channel.GetToken(request);
    }

    public LoginResponse Login(LoginRequest request)
    {
        return Channel.Login(request);
    }

    public LogoutResponse Logout(LogoutRequest request)
    {
        return Channel.Logout(request);
    }
} 
```

最后，这就是我在 MVC 项目中的调用方式

```
 protected UserManagementServiceClient UserManagementService
    {
        get
        {
            // Check if not initialized yet
            if (HttpContext.Current.Session["UserManagementServiceClient"] == null)
                HttpContext.Current.Session["UserManagementServiceClient"] = new UserManagementServiceClient("NetTcpBinding_UserManagementService");

            var client = HttpContext.Current.Session["UserManagementServiceClient"] as UserManagementServiceClient;

            return client;
        }
    } 
```

所以目前，每当默认的 10 分钟会话结束时，我都会收到错误消息，因为通道已经关闭。

如何强化我的代码，以便处理网络断开/会话超时等问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:11:24.540

我使用这样的代码

```
public T Channel {
    get {
        lock (_channelLock) {
            if (!object.Equals(_channel, default(T))) {
                if (((ICommunicationObject)_channel).State == CommunicationState.Faulted) {
                    // channel has been faulted, we want to create a new one so clear it
                    _channel = default(T);
                }
            }

            if (object.Equals(_channel, default(T))) {
                // channel is null, create a new one
                Debug.Assert(_channelFactory != null);
                _channel = _channelFactory.CreateChannel();
            }
            return _channel;
        }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:10:21.033

我通常在每个操作中使用一个新的服务实例。像这样：

```
public async Task<bool> IsOnline()
    {
        using (var service = new DebugService())
        {
            return await service.OnlineCheckAsync();
        }
    } 
```

除其他外，我的包装器在[本文](http://www.vasylevskyi.com/2010/11/correct-wcf-client-proxy-closing.html)之后实现了 IDisposable 。这样您就不必担心每次执行操作时通道是否出现故障。

**编辑**

IDisposable 实现的原始链接已损坏，但代码如下所示：

```
public void Dispose()
    {
        // The following code is from: http://www.vasylevskyi.com/2010/11/correct-wcf-client-proxy-closing.html
        try
        {
            if (this.State != CommunicationState.Closed && this.State != CommunicationState.Faulted)
            {
                ((ICommunicationObject)this).BeginClose(
                    (asr) =>
                    {
                        try
                        {
                            ((ICommunicationObject)this).EndClose(asr);
                        }
                        catch
                        {
                            this.Abort();
                        }
                    }, null
                );
            }
            else
            {
                this.Abort();
            }
        }
        catch (CommunicationException)
        {
            this.Abort();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:13:06.093

在我当前的项目中，我为客户端创建了一个包装类，它使用`CurrentInstance`访问器模型。在这种情况下，getter 检查`_client.State`或创建一个新客户端。创建新客户端是由提供给包装器构造函数的工厂委托完成的，因此有一种免费但一致的方式来创建客户端实例。`Closing``Closed``Faulted`

对于您的场景，这意味着将包装器存储在`Session`而不是直接存储客户端。`wrapper.CurrentInstance`如果在此期间发生超时，调用将检查状态并在后台重新创建客户端。

该模型还可以通过强大的错误处理（物理断开连接、服务器崩溃......）、延迟初始化、创建新客户端后的任意初始化逻辑（在我的情况下它调用某种`Subscribe`创建回调通道的方法，但是它可以是任何东西）

我希望这对你来说也是正确的方向。

# c# - 如何循环设置文件中的名称？

> ID：13364690
> 
> 赞同：0
> 
> 时间：2012-11-13T16:32:44.570
> 
> 标签：c#, loops, controls, identifier

我觉得这应该很容易，但我似乎无法弄清楚。我有一个设置文件 Settings1.settings，其中包含 20 个文本框的条目（n1 到 n10 和 c1 到 c10）。

目前，我将文本框文本保存到 Form1_FormClosing 上的设置文件中，如下所示：

```
Settings1.Default.n1 = n1.Text;
Settings1.Default.n2 = n2.Text;
...
Settings1.Default.n10 = n10.Text;

Settings1.Default.c1 = c1.Text;
Settings1.Default.c2 = c2.Text;
...
Settings1.Default.c10 = c10.Text; 
```

我将如何用循环做类似的事情？我的想法是这样，但显然它不起作用：

```
int count = 1
while (count < 11)
{
    Control n = panel2.Controls.Find("n" + count.ToString(), true).Single();
    Settings1.Default.n = n.Text; //Settings1.Default.n is an invalid statement ...

    Control c = panel2.Controls.Find("c" + count.ToString(), true).Single();
    Settings1.Default.c = c.Text; //Settings1.Default.c is an invalid statement ...

    count++;
} 
```

解决“Settings1.Default.n + count”的正确方法是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:36:44.930

我建议将设置“n”和“c”的类型更改为“System.Collections.Specialized.StringCollection”，并像常规列表或数组对象一样处理它，例如：

```
Settings1.Default.n.Clear()
Settings1.Default.c.Clear()
int count = 1
while (count < 11)
{
    Control n = panel2.Controls.Find("n" + count.ToString(), true).Single();
    Settings1.Default.n.Add(n.Text);

    Control c = panel2.Controls.Find("c" + count.ToString(), true).Single();
    Settings1.Default.c.Add(c.Text);

    count++;
} 
```

或者，我认为您也可以通过字符串访问设置条目，如下所示：

```
Settings1.Default["n" + count.ToString()] = n.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:44:33.930

bde's suggestion is undoubtedly the better way to do it, however, you could use the [GetProperty](http://msdn.microsoft.com/en-us/library/zy0d4103.aspx) method of `Type`. This can be used to get a collection of properties. You can then loop through them and use [PropertyInfo.SetValue](http://msdn.microsoft.com/en-us/library/hh194291.aspx) to set them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:47:04.847

您可以使用 ConfigurationManager 来读取 AppSettings。这是一个 NameValueCollection，您可以查询特定键（例如，名称以“n”或“c”开头的键）。您还可以将控件分组到控件数组中，以便 n[1] 包含对 n1 的引用、n[2] 对 n2 的引用，依此类推。

# .net - 如何仅将查找和替换应用于所选文本而不是 VB.net 中的整个文档

> ID：13364698
> 
> 赞同：2
> 
> 时间：2012-11-13T16:33:07.083
> 
> 标签：.net, vb.net, richtextbox, replace

对，我已经创建了允许用户对富文本框中的所有文本执行**查找和替换的代码。**但是，我现在允许用户选择要执行**查找和替换的部分文本**

这是我目前正在使用的代码：

```
Private Sub btnFFindNext_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnFFindNext.Click
Dim length as String

length = textToFind.Text.Length

lastposition = frm1.RichTextBox.Find(textToFind.Text, lastposition, RichTextBoxFinds.None)

frm1.RichTextBox.SelectionStart = lastposition
frm1.RichTextBox.SelectionLength = length
lastposition = lastposition + 1 
```

我还在 RTB 中添加了 form1 selection changed 事件处理程序的代码，因此当它更改时，它将当前光标位置设置为**lastposition**。

希望上面的代码和我的描述能帮助你理解我的情况。所以只是为了澄清，我将如何调整我的代码，以便如果用户选择一些文本，那么它只`Find and Replace`对那个文本执行。一旦到达选择的末尾，它就结束了。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:41:46.210

我建议使用`MouseUp`和`MouseDown`事件来捕获选择，然后在选择范围内找出搜索字符串。

您还可以查看[此](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.find%28v=vs.71%29.aspx)MSDN 示例，或者类似的内容可以帮助您：

```
Private selectionStart As Integer
Private selectionEnd As Integer
Private searchString As String

Private Sub btnFindAll_Click(sender As Object, e As EventArgs)
    searchString = textToFind.Text   ' Set string to find here

    ' Swap position due to reverse selection
    If selectionStart > selectionEnd Then
        Dim x As Integer = selectionStart
        selectionStart = selectionEnd
        selectionEnd = x
    End If

    'Every time find index and focus the result
    Dim index As Integer = richTextBox1.Find(searchString, selectionStart, selectionEnd, RichTextBoxFinds.None)
    If index > 0 Then
        richTextBox1.Focus()
        richTextBox1.Select(index, searchString.Length)
        selectionStart = index + searchString.Length
    Else
                ' not found
    End If
End Sub

Private Sub richTextBox1_MouseUp(sender As Object, e As MouseEventArgs)
    selectionEnd = richTextBox1.GetCharIndexFromPosition(New System.Drawing.Point(e.X, e.Y))
End Sub

Private Sub richTextBox1_MouseDown(sender As Object, e As MouseEventArgs)
    selectionStart = richTextBox1.GetCharIndexFromPosition(New System.Drawing.Point(e.X, e.Y))
End Sub 
```

# extjs - Extjs - 在添加带有商店数据的网格面板时获取“类型错误：名称未定义”

> ID：13364702
> 
> 赞同：2
> 
> 时间：2012-11-13T16:33:16.643
> 
> 标签：extjs, grid, extjs4, store

我试图在我的视图中简单地加载一个网格面板，其中包含来自商店的数据，但我不断收到以下错误：

```
TypeError: name is undefined
Line: if (name === from || name.substring(0, from.length) === from) { 
```

我已经尝试过如何初始化面板，这是我目前所拥有的：

```
Ext.define('BP.view.induction.RightPage', {
extend: 'Ext.tab.Panel',
alias : 'widget.rightpage',

title: "Right Page",    

items: [
    {
        title: 'Tasks',
        html: '',
        cId: 'tasksTab',
        initComponent: function() {
            this.add( [{
                store: 'Tasks',
                xtype: 'taskgrid',
                hideHeaders: true,
                columns: [
                    {
                        text     : 'Task ID',
                        flex     : 0,
                        sortable : false,
                        hidden   : true,
                        dataIndex: 'id'
                    }, 
                    {
                        text     : 'Task',
                        flex     : 1,
                        sortable : false,
                        dataIndex: 'name'
                    },

                ]
            }]);

            this.callParent();
        } 
    },{
        title: 'Content',
        html: '',
        cId: 'contentTab'
    }
]
}); 
```

最初我没有 initComponent 函数，而是立即构建项目 - 但这产生了同样的错误。

[编辑]根据要求，这是商店定义：

```
Ext.define('BP.store.Tasks', {
extend: 'Ext.data.Store',
requires: 'BP.model.Task',
model: 'BP.model.Task',
proxy: {
    type: 'ajax',
    url : '/resources/data/tasks.php',
    reader: {
        type:'json',
        root:'tasks'
    }
},
autoLoad: true
}); 
```

完整的数据很笨拙，但这里有一个示例（json 格式）：

```
{"success":true,
"tasks":[
    {"id":1,"name":"Cleaning Products","content":"Lorem ipsum...","resource_type":"text","resource_url":"","category_id":1},
    {"id":2,"name":"Preservatives","content":"Lorem ipsum...","resource_type":"text","resource_url":"","category_id":1}]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T18:42:04.447

除了 dbrin 的回答，我很确定您没有定义一个名为*taskgrid*的小部件，这会导致您的错误。

无论如何，删除`initComponent()`方法和`add()`方法。在您的情况下，您可以直接将 all 分配给`items:[]`（子注 2），这将导致相同的结果，并且是正确的做法。`add()`在已经创建的实例上调用该方法（这也可能导致错误。参见子注 1）。还备用空`html`属性。

**子注释**

1.  如果您需要在类定义`initComponent()`方法中调用诸如 add 之类的方法，则需要确保您`callParent(arguments);`首先调用！

2.  代码示例

```
Ext.define('BP.view.induction.RightPage', {
extend: 'Ext.tab.Panel',
alias : 'widget.rightpage',

title: "Right Page",    

items: [
    {
        store: 'Tasks',
        title: 'Tasks',
        xtype: 'taskgrid',
        cId: 'tasksTab',
        hideHeaders: true,
        columns: [
            {
                text     : 'Task ID',
                sortable : false,
                hidden   : true,
                dataIndex: 'id'
            }, 
            {
                text     : 'Task',
                flex     : 1,
                sortable : false,
                dataIndex: 'name'
            }
        ]
    },{
        title: 'Content',
        cId: 'contentTab'
    }
]
}); 
```

**编辑**

xtype 是定义的别名。目前有四个；[小部件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.enums.Widget)，[功能](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.enums.Feature)，[布局](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.enums.Layout)，[插件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.enums.Plugin)。如果是组件，则使用小部件类型。您可以通过使用来定义自己的`alias: 'widget.yourname'`，瞧，您拥有自己的 xtype。您可以使用`xtype: 'yourname'` Why the grid not renders is hard to tell 来参考它。它可能取决于扩展中的定义或渲染它的容器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T17:53:21.883

initComponent 进入类定义。在您的代码示例中，您正在创建一个带有通用任务面板的选项卡面板，您正在尝试设置一个 initComponent 方法。如果您需要该 initComponent 方法，则需要为您的任务网格创建一个单独的类定义。你不能内联它。

此外，您正在做的是过度嵌套面板。如果您将网格面板添加到选项卡面板，它会自动成为选项卡之一。您不需要将网格包装到另一个面板中。

调试时：确保使用 ExtJS 库的调试版本（或开发版本）。使用 FF 或 Chrome 进行调试（您更喜欢哪个）。如果您使用 FF，请获取名为 Illuminations for Developers 的 firebug 插件 - 它对布局问题以及理解容器船和嵌套问题有很大帮助。它还允许您在从服务器加载记录后查看商店中的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T19:41:51.580

在使用架构师构建我的项目时，我遇到了同样的问题。原来是代理配置中的语法错误。尝试修改你的看起来像这样。它对我有用。不仅仅是一个 URL，而是指定一个带有读取参数的 api。

```
proxy: {
    type: 'ajax',
    api: {
        read: '/resources/data/tasks.php'
    },
    reader: {
        type: 'json',
        root: 'tasks'
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-15T12:07:05.133

我有一个与确切错误类似的情况，我通过添加一个构造函数来解决它：

```
constructor: function(config) {
      this.initConfig(config);
      return this;
} 
```

在我的情况下，我需要 initComponent，所以最终代码将类似于：

```
Ext.define('SomeNewField', {
 extend: 'Ext.Something',
 alias: 'widget.SomeNewField',

initComponent: function(config) {
    this.callParent(arguments);
},

constructor:function(config) {
      this.initConfig(config);
      return this;
 } 
```

# node.js - 如何在 node.js 中使用添加的原型方法导出对象

> ID：13364703
> 
> 赞同：4
> 
> 时间：2012-11-13T16:33:17.157
> 
> 标签：node.js

我在文件中有一个对象，并且希望能够要求该文件，然后随心所欲地创建该对象的新实例，但我遇到了障碍。这似乎非常基本，我错过了什么。

**帽子.js**

```
function Hat(owner) {
    this.owner = owner;
}
Hat.prototype.tip = function() {
    console.log("and he (" + owner + ") tipped his hat, just like this");
}
exports.Hat = Hat; 
```

**节点终端**

*尝试 1*

```
> require('./hat.js');
> var mighty_duck = new Hat('Emilio');
  ReferenceError: Hat is not defined 
```

*尝试 2*

```
> var Hat = require('./hat.js');
> var mighty_duck = new Hat('Emilio');
  { owner: 'Emilio' }
> mighty_duck.tip();
  TypeError: Object #<Hat> has no method 'tip' 
```

# 编辑

最不幸的是，我忽略了原来是最大的问题。我试图使用的事实

```
util.inherits(Hat, EventEmitter); 
```

所以我的 hat.js 实际上是

```
function Hat(owner) {
    this.owner = owner;
}
Hat.prototype.tip = function() {
    console.log("and he (" + owner + ") tipped his hat, just like this");
}
util.inherits(Hat, EventEmitter);
exports.Hat = Hat; 
```

这是一个问题，因为*显然*在开始扩展原型*之前*`inherits`打电话很重要。修复很简单，将调用向上移动几行*`inherits`*

 *```
function Hat(owner) {
    this.owner = owner;
}
util.inherits(Hat, EventEmitter);
Hat.prototype.tip = function() {
    console.log("and he (" + owner + ") tipped his hat, just like this");
}
exports.Hat = Hat; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:40:51.860

看看这里： http: [//openmymind.net/2012/2/3/Node-Require-and-Exports/](http://openmymind.net/2012/2/3/Node-Require-and-Exports/)

你可以试试这个：

```
function Hat(owner) {
    this.owner = owner;
}
Hat.prototype.tip = function() {
    console.log("and he (" + this.owner + ") tipped his hat, just like this");
}
module.exports = Hat; 
```

然后…… 像这样：

```
var hat = require('./hat.js');
var mighty_duck = new hat('Emilio');
mighty_duck.tip() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:35:34.713

你做错了你的要求：

```
var Hat = require('./hat.js').Hat; 
```

是你想要的。当您这样做时，`exports.Hat = Hat;`您正在导出一个`exports`具有`Hat`. 因此，当您需要`'./hat.js'`获取对象时，需要访问该`Hat`属性。

从节点复制：

```
> require('./hat.js');
{ Hat: [Function: Hat] }
> require('./hat.js').Hat;
[Function: Hat]
> var Hat = require('./hat.js').Hat;
undefined
> var mighty_duck = new Hat('Emilio');
undefined
> mighty_duck.tip();
and he (Emilio) tipped his hat, just like this 
```

当然，这导致了一个错误，因为你说`owner`而不是`this.owner`in `tip()`，但是在我改变它之后它工作正常:)

如果你只想做

```
var Hat = require('./hat.js'),
    hat = new Hat('Emilio'); 
```

然后将您的导出更改为：

```
module.exports = exports = Hat; 
```

它有效：

```
> require('./hat.js');
[Function: Hat]
> var Hat = require('./hat.js');
undefined
> var hat = new Hat('Emilio');
undefined
> hat.tip();
and he (Emilio) tipped his hat, just like this 
```

**编辑**清理并从 EventEmitter 继承：

```
var util = require('util'),
    events = require('events');

var Hat = exports.Hat = function(owner) {
    events.EventEmitter.call(this);
    this.owner = owner;
}

util.inherits(Hat, events.EventEmitter);

Hat.prototype.tip = function() {
    console.log("and he (" + this.owner + ") tipped his hat, just like this");
} 
```*

# php - 字符串操作，反转回文

> ID：13364704
> 
> 赞同：4
> 
> 时间：2012-11-13T16:33:23.510
> 
> 标签：php, lamp

让我们仅对*PHP*进行分类。

好的，所以我昨天接受了*高级软件开发人员*职位的面试。我不太记得这个问题，但我尽量把它写下来。

**问题;**

编写一个以字符串为输入的函数，如果遍历则返回 true，否则返回 false。

要求; （据我所知） - 只有一种输入（字符串）类型。
- 字符串参数必须通过引用传递。
- 函数中没有变量，他的意思是如果参数被称为*$str*操作应该在那个上完成，不喜欢我使用第二个变量来设置*reverseStr*等
- 没有循环字符串中的每个字符，他特别说不要遍历字符串中的每个字符。
- 没有内置的 PHP 函数可以使用，我认为他对 (strlen) 很好

**我的答案;** （不，他不喜欢）

```
$str = 'this is testing';
$length = strlen($str);
$reverseStr = '';
for($i=$length-1; $i>=0; $i--) {
 $reverseStr .= $str[$i];
} 
```

因此，虽然这在一定程度上起到了作用，但他不喜欢我通过每个角色来获得 reverseStr。我猜我需要考虑一个递归解决方案来获取字符串和索引等的最后一个字符。但我在写这篇文章时正在考虑这些，为时已晚！

你们在想什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:49:07.403

这个问题根本不清楚..但是如果你想检查字符串是否是回文：

```
function is_palindrome ($str){
    if(strlen($str)==0){return true;}
    if($str[0]==$str[strlen($str)-1]){
        return true and is_palindrome(substr($str, 1, strlen($str)-2));
    }else{
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:10:11.380

我认为这行得通。未经测试。虽然它确实有内部变量。

```
 function is_palindrome( &$str )
    {
        $i = $j = 0;
        while( isset( $str[++$j] ) ) {};

        while( $i < --$j )
        {
            if( $str[$i++] !== $str[$j] )
                return FALSE;
        }

        return TRUE;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:10:20.330

所以他说“不要循环遍历每个字符”，但他没有说要循环遍历*一半*？[邪恶的笑]

```
function is_palindrome(&$str) {
    for($i = 0; $i < strlen($str) / 2; $i++) {
        if ($str[$i] != $str[strlen($str)-1-$i]) return false;
    }
    return true;
} 
```

他说函数中没有用于操作的变量`$str`，但迭代器肯定没问题吗？（嗯，除了“不循环”规则......）

```
is_palindrome('abcdcba'); // odd length, returns true
is_palindrome('abcddcba'); // even length, returns true
is_palindrome('abc'); // not a palindrome, returns false 
```

我知道，我知道，这是要求的字面意思，而不是要求的精神。

# ios - 不同语言的 iOS UI 自动化

> ID：13364705
> 
> 赞同：5
> 
> 时间：2012-11-13T16:33:23.710
> 
> 标签：ios, xcode, automation, instruments, ios-ui-automation

我的 iOS 应用程序具有 10 多种语言的本地化功能。我想检查所有屏幕是否正常（标签不是太长/太短等）。

我知道我可以浏览我的应用程序并使用 UI 自动化制作屏幕截图。有没有办法在 UI 自动化中切换模拟器的语言？有什么方法可以通过启动 1 个命令为我的应用程序生成屏幕截图？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T04:11:08.470

就在这里。事实上，我只是自己写的。:)

使用这个项目：[https ://github.com/jonathanpenn/ui-screen-shooter](https://github.com/jonathanpenn/ui-screen-shooter)

它演示了如何从命令行运行 UI 自动化、使用 plist 更改命令交换模拟器语言以及使用 AppleScript 选择模拟器设备类型。它记录了大量的评论，但如果您对某些事情感到困惑，请随时打开项目的问题或拉取请求，我们可以改进它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-15T22:00:28.373

还有另一个名为[Snapshot](https://github.com/KrauseFx/snapshot)的 github 项目，正是您想要的。

它提供了与[UI Screen Shooter](https://github.com/jonathanpenn/ui-screen-shooter)相同（甚至更多）的功能，我发现它更加充实和记录。

启动和运行最具挑战性的部分是学习用于在模拟器中执行操作的 Javascript API，但您可以在网上找到许多有用的教程。

以下是一些有用的参考资料：

*   [UI自动化测试教程](http://www.3pillarglobal.com/insights/mobile-ios-automated-testing-with-uiautomation)
*   [Apple 的 UI 自动化指南](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html#//apple_ref/doc/uid/TP40004652-CH20-SW1)
*   [UIAutomation 对象的 API 参考](https://developer.apple.com/library/ios/documentation/DeveloperTools/Reference/UIAutomationRef/_index.html)
*   [来自 Apple 的随机片段](https://developer.apple.com/library/ios/documentation/DeveloperTools/Reference/UIAutomationRef/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-27T00:49:49.010

> 我在测试 osx 应用程序时截取了下面的屏幕截图。它也适用于 ios 应用程序。

您可以为您的 xcode 项目生成无限数量的方案。如果这样做，您可以使用任何语言测试您的应用程序并在模拟器中获取屏幕截图。好的，让我们从一个例子开始：*将德语方案添加到您的项目中*

完成本地化后，您必须为每种语言添加一个新方案。

**第 1 步：**单击您当前的方案（选项卡栏中的方案面板）。下图中的方案是*JHDTestLayout*：

![方案](../Images/25b6d0434417898528b1cdecb454379d.png)

**第 2 步：**现在，您可以管理您的方案。首先我们必须添加一个新的：

![添加新方案](../Images/071968803a1d55f008ebe4c3263a8e26.png)

**第 3 步：**输入新方案的名称：

![在此处输入图像描述](../Images/8bd15ff5982d65381f4a74b4bedd1845.png)

**第 4 步：**之后，再次单击选项卡栏中的方案面板（第 1 步），选择您的新方案并选择“编辑方案”

![在此处输入图像描述](../Images/5015247cb99e3ed6a575ed5185d1fee9.png)

**第 5 步：**将两个参数添加到“ *Arguments Passed On Launch* ”部分（使用 +），然后按 OK：

![在此处输入图像描述](../Images/67a2acd605a28062c283efe2d9026720.png)

**启动时传递的参数：**您还可以将其他语言用于不同的方案，例如：

*德语*

```
-AppleLanguages (de)
-AppleLocale de_DE 
```

*西班牙文*

```
-AppleLanguages (es)
-AppleLocale es_ES 
```

# xml - 更改 XML 的布局 - 将 XML 元素值拆分为多个元素；删除不必要的元素

> ID：13364712
> 
> 赞同：1
> 
> 时间：2012-11-13T16:33:48.657
> 
> 标签：xml, xslt

我有这样的 XML：

```
<StockInfo>
<Item>
<stockcode>111111</stockcode>
<vehicle>Ford</vehicle>
<model>Escape (2000-)~Maverick (2001-)</model>
<width>8</width>
<wheel_size>18</wheel_size>
<offset>35</offset>
<bolt_pattermn>5x114.3</bolt_pattermn>
<brand>ANTERA</brand>
<Velg_ID/>
<kit1>DK-135259671 x1</kit1>
<kit2/>
<kit3/>
<kit4/>
<qty_available>3.00000000</qty_available>
<price>1110.00</price>
<picture>410110
</picture>
</Item>
<Item>
<stockcode>111111</stockcode>
<vehicle>Honda</vehicle>
<model>Civic (5skr,2001-2006)(2006-)~Accord (2003-2008)~Acord Coupe (1999-)~Acord Type R~Civic Type R (2001-2006)(2007-,17"&lt;)~Civic Type S (2001-2006)(2007-,17"&lt;)~Integra Type R~Prelude (1997-2001)~Legend (1991-1999)</model>
<width>8</width>
<wheel_size>18</wheel_size>
<offset>40</offset>
<bolt_pattermn>5x114.3</bolt_pattermn>
<brand>ANTERA</brand>
<Velg_ID/>
<kit1>DK-135259641 x1</kit1>
<kit2/>
<kit3/>
<kit4/>
<qty_available>3.00000000</qty_available>
<price>1110.00</price>
<picture>410110
</picture>
</Item>
<Item>
<stockcode>2222222</stockcode>
<vehicle>BMW</vehicle>
<model>6 (e63/64, 2004-2011)~M6 (e63/64, 2004-2011)</model>
<width>9</width>
<wheel_size>18</wheel_size>
<offset>15</offset>
<bolt_pattermn>5x120</bolt_pattermn>
<brand>AEZ</brand>
<Velg_ID>AEZ Ares</Velg_ID>
<kit1>DK-ZJB3 x1</kit1>
<kit2/>
<kit3/>
<kit4/>
<qty_available>4.00000000</qty_available>
<price>151110.00</price>
<picture>41001
</picture>
</Item>
</StockInfo> 
```

如您所见，有 2 个相同的项目（具有相同的股票代码；项目是汽车车轮）和 1 个不同的项目......对于每个不同的汽车型号，相同的项目可以 X 次转换为 XML（如果这个车轮适用于奥迪 A3，奥迪 A4，雪铁龙 X，它将 3 次转化为 XML，所有其他元素（除了和具有相同的值））。

我的问题：

1.  如何分离/拆分元素`<model>`：

    ```
     <model>Civic (5skr,2001-2006)(2006-)~Accord (2003-2008)~Acord Coupe (1999-)~Acord Type R~Civic Type R (2001-2006)(2007-,17"&lt;)~Civic Type S (2001-2006)(2007-,17"&lt;)~Integra Type R~Prelude (1997-2001)~Legend (1991-1999)</model> 
    ```

成 X 元素`<model>`

```
 <model>Civic (5skr,2001-2006)(2006-)</model>
    <model>Accord (2003-2008)</model>
    <model>Acord Coupe (1999-)</model>
    <model>Acord Type R</model>
    <model>Civic Type R (2001-2006)(2007-,17"&lt;)</model>
    <model>Civic Type S (2001-2006)(2007-,17"&lt;)</model>
    <model>Integra Type R</model>
    <model>Prelude (1997-2001)</model>
    <model>Legend (1991-1999)</model> 
```

分隔符号是“~”

直到现在我都无法做到（既不使用 php，也不使用 xsl 转换）因此寻求帮助；-(

1.  如何将相同的项目分组`<stockode>`为 1 个`<Item>`根而不是 X？

2.  如何删除具有相同值的元素（正如我所说，如果车轮适用于许多汽车模型，那么它将在 XML 中多次使用不同的元素（有时也是`<vehicle>`- 但以防万一这个车轮只适用于少数汽车楷模））？

所以修改后的 XML 应该是这样的：

```
<StockInfo>
<Item>
<stockcode>111111</stockcode>
<vehicle>Ford</vehicle>
<model>Escape (2000-)~Maverick (2001-)</model>
<vehicle>Ford</vehicle>
<model>Civic (5skr,2001-2006)(2006-)</model>
<model>Accord (2003-2008)</model>
<model>Acord Coupe (1999-)</model>
<model>Acord Type R</model>
<model>Civic Type R (2001-2006)(2007-,17"&lt;)</model>
<model>Civic Type S (2001-2006)(2007-,17"&lt;)</model>
<model>Integra Type R</model>
<model>Prelude (1997-2001)</model>
<model>Legend (1991-1999)</model>
<wheel_size>18</wheel_size>
<offset>35</offset>
<offset>40</offset>
<bolt_pattermn>5x114.3</bolt_pattermn>
<brand>ANTERA</brand>
<Velg_ID/>
<qty_available>3.00000000</qty_available>
<price>1110.00</price>
<picture>410110
</picture>
</Item>
<Item><stockcode>2222222</stockcode>
<vehicle>BMW</vehicle>
<model>6 (e63/64, 2004-2011)</model>
<model>M6 (e63/64, 2004-2011)</model>
<model>M6 (e63/64, 2004-2011)</model>
<width>9</width>
<wheel_size>18</wheel_size>
<offset>15</offset>
<bolt_pattermn>5x120</bolt_pattermn>
<brand>AEZ</brand>
<Velg_ID>AEZ Ares</Velg_ID>
<qty_available>4.00000000</qty_available>
<price>151110.00</price>
<picture>41001
</picture>
</Item>
</StockInfo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:34:04.833

这对我有用（作为我第一个问题的解决方案）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output indent="yes"/>
<xsl:template match="@*|node()">
<xsl:copy>
<xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>
<xsl:template match="text()[contains(.,'~')]">  
<xsl:variable name="elementName" select="name(..)"/>
<xsl:call-template name="splitIntoElements">
<xsl:with-param name="baseName" select="name(..)" />
<xsl:with-param name="txt" select="." />    
</xsl:call-template>
</xsl:template>
<xsl:template name="splitIntoElements">
<xsl:param name="baseName" />
<xsl:param name="txt" />
<xsl:param name="delimiter" select="'~'" />
<xsl:variable name="first" select="substring-before($txt, $delimiter)" />
<xsl:variable name="remaining" select="substring-after($txt, $delimiter)" />
<xsl:element name="{$baseName}">
<xsl:choose>
<xsl:when test="$first">
<xsl:value-of select="$first" />
</xsl:when>
<xsl:otherwise>
<xsl:value-of select="$txt" />
</xsl:otherwise>
</xsl:choose>
</xsl:element>
<xsl:if test="$remaining">
<xsl:call-template name="splitIntoElements">
<xsl:with-param name="baseName" select="$baseName" />
<xsl:with-param name="txt" select="$remaining" />
<xsl:with-param name="delimiter" select="$delimiter" />
</xsl:call-template>
</xsl:if>
</xsl:template>
<xsl:template match="model">
<xsl:apply-templates/>
</xsl:template>
</xsl:stylesheet> 
```

# ubuntu - 更改 redis 转储的默认文件权限

> ID：13364713
> 
> 赞同：4
> 
> 时间：2012-11-13T16:33:50.823
> 
> 标签：ubuntu, permissions, redis

我有一个 cron 作业，它在一个名为“deployer”的用户下运行，访问受限。cron 作业正在执行我的 redis 数据库的备份，从而生成一个 dum /var/lib/redis/dump.rdb。

现在，cron 作业现在尝试`/bin/gzip -c /var/lib/redis/dump.rdb > /home/deployer/Backup/.tmp/redis_backup/databases/Redis/dump.rdb.gz`在将其发送到 S3 之前执行 a。问题是，/var/lib/redis/dump.rdb 的权限是 -rw-rw----，所以我收到以下错误：

```
gzip: /var/lib/redis/dump.rdb: Permission denied 
```

所以我的问题是，我对给我的部署用户更广泛的权限不感兴趣，所以我希望每次运行 cron 作业时都会创建的转储具有其他权限。

我怎样才能以最简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:56:28.797

Redis 转储文件是使用标准 fopen('...',"w") 调用创建的。所以访问权限实际上是从当前的[umask](http://en.wikipedia.org/wiki/Umask)继承的。

在启动 Redis 服务器本身之前，尝试使用 umask 命令更改脚本中的 umask 或用于启动 Redis 服务器的 shell：

```
$ umask 022 
```

此命令将更改掩码，以便创建具有 644 访问权限的新文件（666 是默认访问权限）。

# c - 检测到 glibc - 双重释放或损坏

> ID：13364714
> 
> 赞同：1
> 
> 时间：2012-11-13T16:34:01.853
> 
> 标签：c, arrays, memory-leaks, glibc

我正在用 C 语言编写一个简单的堆栈程序，最后有一个灵活的 void* 数组。当需要将更多元素推入数组时，我使用 realloc() 创建一个新堆栈，释放旧堆栈并将新堆栈分配给旧堆栈。（目前我没有 pop() 函数）。

```
#include <stdlib.h>
#include <stdio.h>

typedef struct Stack
{
    int top, length;
    void* start_ptr[];
} Stack;

Stack* init_stack(int n_items)
{
    Stack* stack;
    stack = malloc(sizeof(int) * 3 + sizeof(void*) * n_items);

    stack->top = -1;
    stack->length = n_items;

    return stack;
}

Stack* increase_stacksize(Stack* stack, int n_itemsToAdd)
{
    Stack* newstack;    
    newstack = realloc(stack, sizeof(*stack) + sizeof(void*) * (n_itemsToAdd + stack->length));

    if(newstack != NULL)
         //printf("\nDebug print - array reallocated\n");

    free(stack);
    stack = newstack;

    stack->length += n_itemsToAdd;

    return stack;
}

Stack* push(Stack* stack, void* item)
{
    if(stack->top + 1 == stack->length){

        stack = increase_stacksize(stack, 10);
    }

    int pos = stack->top + 1;

    stack->start_ptr[pos] = item;
    ++(stack->top);

    return stack;
}

void printstack(Stack* stack)
{
     printf("Number of items in the stack = %d\n", stack->top + 1);
     printf("Capacity of the stack = %d\n", stack->length);

     printf("Elements in the stack are: \n");

    int i;

    for(i = 0; i <= stack->top; i++){
        int* item_ptr;
        void* address;

        address = stack->start_ptr[i];

        item_ptr = (int*)address;

        printf("Position = %d, Item = %d \n", i, *item_ptr);
    }
}

int main(void)
{    
    Stack* stack;
    stack = init_stack(5);

    int a[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    int i;

    for(i = 0; i < 10; i++)
    {
        stack = push(stack, (void*)(a+i));
    }

    printstack(stack);

    free(stack);

    return 1;
} 
```

问题是当我在我完成后释放（） main() 中的堆栈时，会在 stderr 中打印一条消息：

```
*** glibc detected *** ./prog: double free or corruption (fasttop): 0x096ee008 ***
======= Backtrace: =========
/lib/libc.so.6[0xb7721fd4]
/lib/libc.so.6(cfree+0x9c)[0xb772387c]
./prog[0x8048731]
./prog[0x8048461] 
 ======= Memory map: ======== 
```

虽然 printstack() 的输出很好。即使我删除了 free(stack) 行，我也会在[ideone.com](http://ideone.com/Xqdfmq)中收到运行时错误，但没有 stderr 消息。我猜这可能是由于零大小的数组。这里可能是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T16:38:43.090

`realloc`如有必要，释放您的旧块，因此您应该删除该`free(stack)`行`increase_stacksize`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:40:59.130

你`realloc`再自由原版`stack`。只需删除`free`那里：

```
free(stack);   // remove this line
stack = newstack; 
```

成功后`realloc`，函数返回的地址不保证和原来的一样。如果相同，您最终会释放内存两次。如果不一样，你最终会释放一个未分配的内存位置。

简而言之，不要`free`把原来的放在后面`realloc`。

# c++ - 在接触侦听器类中创建焊接接头的问题

> ID：13364716
> 
> 赞同：2
> 
> 时间：2012-11-13T16:34:03.827
> 
> 标签：c++, cocos2d-iphone, box2d, box2d-iphone

我设置了一个接触监听器，当两个物体之间建立接触时，它会创建一个焊接接头。当身体接触时，我不断收到指向线的 SIGABRT

```
b2Assert(IsLocked() == false); 
```

在方法中

```
b2Joint* b2World::CreateJoint(const b2JointDef* def) 
```

班内

```
b2World.cpp 
```

以下是联系人监听器类：SubcContactListener.h：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "Box2D.h"
#import "Spriter.h"
#import "CreateRope.h"

class SubcContactListener : public b2ContactListener    {
public:
void     *helloWorldLayer;

b2WeldJoint *weldJoint;
b2World *world;

void BeginContact(b2Contact* contact);
void EndContact(b2Contact* contact);
void createWeldJoint(b2Body* ABody ,b2Body* BBody);
//void destroyWeldJoint(b2WeldJoint *weldJoint);

}; 
```

SubcContactListener.mm：

```
#import "SubcContactListener.h"
#import "HelloWorldLayer.h"

void SubcContactListener:: BeginContact(b2Contact *contact) {

}

void SubcContactListener:: EndContact(b2Contact *contact)   {
b2Fixture       *fixtureA = contact->GetFixtureA();
b2Fixture       *fixtureB = contact->GetFixtureB();
b2Body          *fixtureABody = fixtureA->GetBody();
b2Body          *fixtureBBody = fixtureB->GetBody();

// We don't care about collisions that don't involve two bodies.
if (helloWorldLayer && fixtureABody && fixtureBBody)
{

    if(fixtureABody != NULL && fixtureBBody != NULL){
        createWeldJoint(fixtureABody, fixtureBBody);
    }

}

}
void SubcContactListener:: createWeldJoint(b2Body* ABody ,b2Body* BBody)    {

// The sprite tag is 1 for the spriter sprite and 3 for the rope links.
if (ABody && BBody)
//{
    CCSprite            *bodyASprite = (CCSprite *) ABody->GetUserData();
    CCSprite            *bodyBSprite = (CCSprite *) BBody->GetUserData();
    NSInteger           bodyASpriteTag = bodyASprite.tag;
    NSInteger           bodyBSpriteTag = bodyBSprite.tag;

    if (((bodyASpriteTag == 1) && (bodyBSpriteTag == 3)) ||
        ((bodyASpriteTag == 3) && (bodyBSpriteTag == 1)))
    {

        //creation of weldjoint
        if ( ABody!= NULL && BBody != NULL) {

        b2WeldJointDef      weldJointDef;
        weldJointDef.Initialize(ABody,
                                BBody,
                                ABody->GetWorldCenter());
        weldJointDef.collideConnected = false;

        weldJoint = (b2WeldJoint*) ABody->GetWorld()->CreateJoint(&weldJointDef);
        }
    }
}

} 
```

同样在 HelloWorldLayer.mm initPhysics 方法中：

```
// Create contact listener
contactListener = new SubcContactListener();
contactListener->helloWorldLayer = self;
world->SetContactListener(contactListener); 
```

从错误中我认为它与焊接接头有关，只是不太确定。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:52:13.723

不允许在回调中修改世界。assert 语句声明它已锁定世界以开始模拟步骤，因此不允许您执行该操作。

这个问题是通过缓存接触事件并在模拟步骤之后处理它们来解决的。

# google-app-engine - AppEngine 模型/处理程序问题

> ID：13364723
> 
> 赞同：1
> 
> 时间：2012-11-13T16:34:35.393
> 
> 标签：google-app-engine

我们的团队对 AppEngine 来说相对较新，我们仍在学习中。我们使用普通的 ndb.Model 模型（即没有什么花哨的）和 webapp2 处理程序。该应用程序没有 UI，因为它只是一个安静的 API。

所以我们有一个这样定义的模型：

```
from google.appengine.ext import ndb
class Pasta(ndb.Model):
 type = ndb.StringProperty(indexed=True)
 name = ndb.StringProperty()
 contents = ndb.JsonProperty()
 modified_date = ndb.DateTimeProperty(auto_now=True)
 added_date = ndb.DateTimeProperty(auto_now_add=True) 
```

用例是，如果一条记录不存在，我们想添加一条记录，如果确实存在，则返回它。我们可以在处理程序中查询它，甚至在那里创建一个并使用`pasta.put()`实例方法创建一个新的。但是，我们认为数据绑定代码属于模型，而不是处理程序，但是，如果我们没记错的话，在模型上下文中我们需要使用 ，`get_or_insert()`这需要我们显式声明一个 Key，对吗？

有什么建议如何在模型中处理这种逻辑？TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:51:34.213

我不知道您为什么认为代码是否进入模型或处理程序的决定决定了您用于执行查询的方法。您可以`get_or_insert`在任何一个地方使用，但这确实意味着您需要知道所需实体的密钥。而且，您可以在任何一个地方进行查询。

如果您确实希望将所有数据交互保留在模型中，一种可能的模式是在模型上定义一个类方法，该方法执行查询并返回现有实例或新实例。就像是：

```
class Pasta(ndb.Model): 
    ...
    @classmethod
    def get_or_create(cls, type=None, name=None):
        query = cls.query(cls.type=type, cls.name=name)
        existing = query.get()
        if existing:
            return existing
        else:
            new_item = cls(type=type, name=name)
            new_item.put()
            return new_item 
```

（注意我实际上并没有使用 ndb，但这或多或少是正确的。）您需要确保在事务中调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:28:14.380

对于为什么创建实例（或记录）属于模型，您有一个非常奇怪的论点。

是的，模型代表数据，但处理程序是负责创建模型实例的人。您没有提供足够的信息来说明您的处理程序所做的事情。

首先，您需要确定要用作密钥的内容。如果您只是使用 ndb 随机创建的密钥，我不知道您将如何确定记录是否存在。我假设您想使用 Pasta.type 或 Pasta.name 作为键。

在这种情况下，“类型”或“名称”可能会作为参数提供给您的处理程序，并且您的处理程序将在根据其参数构造键后调用 get_or_insert。

我也可以将您的问题解释为您只需要给定 Pasta 模型的一条记录。这将是相当非典型的数据存储使用，但在这种情况下，在模型中使用方法来检查单个实例是否存在可能是有意义的。在这种情况下，您可以硬编码您的密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:55:47.490

密钥访问比查询更快且成本更低。在实现查询之前始终确定您不能使用 ID 是个好主意。此外，请记住所有模型属性的默认索引状态为 True，因此无论何时设置模型，始终声明 indexed=True/False 是一个非常好的主意。在很多情况下，人们忘记了默认值为 True，然后想知道为什么他们的索引存储在只查询少量属性时会变得非常大。您是否想要其他模型属性的索引？

# winforms - 对象引用未设置为 DataGridView 的 InitializeEditingControlValue 中的对象实例

> ID：13364726
> 
> 赞同：-2
> 
> 时间：2012-11-13T16:34:43.650
> 
> 标签：winforms, datagridview, datagridviewcombobox

我有一个 DataGridView，在一个包含项目列表的 ComboBox 单元格内。当我们点击其中一个项目时，我会在我的主窗口中显示这些“项目”的内容。但是，如果用户单击小箭头来选择一个项目，但最后没有选择任何项目，我得到一个 NullReferenceException（对象引用未设置为对象的实例）。

我在 Google 上发现了一些东西，说我需要实现自己的 ComboBoxCell（或列），但我发现的唯一例子比我得到的更糟糕。

为了您的信息，我在 DataBindingComplete 中填充了 ComboBoxCell 的项目，我将值放在了 RowPrePaint 中。是的：每个 ComboBoxCell 都有不同的“项目”列表。

请帮助找到解决方案。

PS如果有人能解释我们为什么我有这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:51:00.283

因为您很可能`ComboBox`通过访问器使用以下代码来获取所选项目：

```
this.textBox1.Text = MyForm.ComboItemValue(); 
```

在表格中`ComboBox`，您将拥有

```
public string ComboItemValue
{
    get 
    { 
        if (this.datGridView.CurrentCell.GetType() == typeof(DataGridViewComboBoxCell))
            return this.dataGridView.CurrentCell.Value.ToString();
    }
} 
```

显然，如果该值留空，这将返回一个`null`.

说了这么多，如果不发布任何代码，很难猜出问题！

我希望这有帮助。

# javascript - Javascript访问主机终端

> ID：13364728
> 
> 赞同：-3
> 
> 时间：2012-11-13T16:34:47.810
> 
> 标签：javascript, html, terminal

是否可以从网络访问主机终端？某种 HTML5 魔法。

我想围绕 R 构建一个 javascript 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:39:36.380

不，那里没有。出于安全原因，浏览器不允许网站访问主机，除非是用户授权的操作，例如下载文件或授予对麦克风或网络摄像头的访问权限。用户无法授权访问其机器上的终端。

# c# - 将流转换为 WMA

> ID：13364731
> 
> 赞同：1
> 
> 时间：2012-11-13T16:35:14.703
> 
> 标签：c#, .net, silverlight, audio, stream

我正在 Silverlight 中创建一个需要读取其内容的应用程序。我正在使用 WCF 服务将内容发送到服务器端，然后有这段代码可以将文本合成为语音。

```
public class SpeechService
{
  [OperationContract]
  public byte[] StartSpeak(string Text)
  {
    MemoryStream ms = new MemoryStream();
    using (System.Speech.Synthesis.SpeechSynthesizer synhesizer = new System.Speech.Synthesis.SpeechSynthesizer())
    {
      synhesizer.SelectVoiceByHints(System.Speech.Synthesis.VoiceGender.NotSet, System.Speech.Synthesis.VoiceAge.NotSet, 0, new System.Globalization.CultureInfo("pl-PL"));
      synhesizer.SetOutputToWaveStream(ms);
      synhesizer.Speak(Text);
  }
  return ms.ToArray();
} 
```

在客户端，我使用以下代码：[http](http://elegantcode.com/2010/03/07/text-to-speech-in-silverlight-using-wcf/) : //elegantcode.com/2010/03/07/text-to-speech-in-silverlight-using-wcf/ 使用 MediaElement 向客户端播放创建的声音。

它可以工作，但我需要调整它，因为生成的流非常大 - 2 分钟的新闻超过 8MB。最近几天我在网上浏览两个问题的解决方案： 1\. 使用 wcf 将音频数据流式传输到 Silverlight 2\. 在将音频发送到客户端之前对其进行压缩

至于问题号。1 我不知道如何实现它：/我将使用任何帮助或想法。最难的是没有。2是我无法将输出声音保存为文件。我需要即时进行编码并将压缩的声音发送到客户端。据我所知，最好的想法是将编码为 AAC 或 WMA，因为这两者都受 MediaElement 支持。

我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:19:38.480

Windows Azure 媒体服务可能值得一看。[http://www.windowsazure.com/en-us/home/features/media-services/](http://www.windowsazure.com/en-us/home/features/media-services/)

它提供“实时流媒体”，您可能会将其与您的音频一起使用。我已经将其用于点播，但不是直播，流媒体，而且它真的很容易做到。只需将您的媒体“上传到云端”，它就会编码并为您提供一个端点。然后，您可以在 Silverlight 媒体元素中使用此端点来获取流媒体。

# deployment - JBoss AS 7 - 按特定顺序部署战争

> ID：13364735
> 
> 赞同：8
> 
> 时间：2012-11-13T16:35:33.440
> 
> 标签：deployment, configuration, jboss7.x

我试图以独立模式部署一些 .war 文件，问题是我需要按特定顺序部署它们......我有：file1.war，file2.war，file3.war，我必须先部署file2.war，然后是 file3.war，最后是 file1.war

我看过很多帖子，但我得到的所有答案都是针对以前版本的 Jboss

谁能帮帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:47:35.223

我不确定您的用例是什么，但控制顺序并不是最佳的部署方式，因为 JBoss 尝试进行并行部署以加快流程，如果您应该这样做，那么您可以提供每个部署对另一个部署的依赖关系。例如，如果您希望 file2.war 在 file1.war 之后部署，您应该提供 file2.war 对 file1.war 的依赖关系，如下所示*`jboss-deployment-structure.xml`*（存储在**`META-INF`**for ear 和**`WEB-INF`**in wars 中）

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
  <deployment>
    <dependencies>
      <module name="deployment.file1.ear" />
    </dependencies>
  </deployment>
</jboss-deployment-structure> 
```

同样，很少需要尝试对部署进行微观管理，但请谨慎使用。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-22T11:17:44.683

jboss-deployment-structure.xml 是关于类加载器的，例如，一场战争提供了对另一部署的依赖等。我认为您正在寻找的是：

[控制 JBoss EAP 6 上部署应用程序的顺序](https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.3/html/Administration_and_Configuration_Guide/Control_the_order_of_Deployed_Applications_on_JBoss_Enterprise_Application_Platform.html "控制 JBoss EAP 6 上部署应用程序的顺序")

这样，一个部署依赖于另一个的服务，例如 EJB，因此您可以确保它们以正确的顺序部署。

# php - Codeigniter 2.1 - PHP 文件中的 Javascript 代码

> ID：13364737
> 
> 赞同：-3
> 
> 时间：2012-11-13T16:35:36.380
> 
> 标签：php, javascript, codeigniter, codeigniter-2

可以这样加载JS吗？

```
 <script language="javascript" src="<?php echo JS ?>mali_oglasi/<?php echo $js ?>.php"></script> 
```

**JS**是文件的路径，**$js**是在控制器中创建的文件的名称（路径和名称都可以）。

```
$data['js'] = ($data['posao'] == 'izmeni' ? 'mali_oglas_izmeni' : 'mali_oglas_pregled'); 
```

在我要加载的文件的请求中，我放了这个

```
<?php header("Content-Type: application/x-javascript"); ?> 
```

作为 JS 代码的一部分，我有：

```
<?php echo IMG ?> 
```

它应该回声孔路径，但它只显示IMG？这是我想要的这种方式还是其他方式？

常数：

```
$root = "http://".$_SERVER['HTTP_HOST'];
$root .= str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']);
define('ABSOLUTE_PATH', str_replace('system/','', BASEPATH));
define('BASE', $root);
define('CSS', BASE . 'public/css/');
define('JS', BASE . 'public/js/');
define('IMG', BASE . 'public/img/');
define('STORE', BASE . 'public/store/'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:22:56.017

因为`JS`是文件夹名称，你可以这样做：

```
<script language="javascript" src="<?php echo base_url(JS . "mali_oglasi/{$js}.php"); ?>"></script> 
```

# jquery - 如何在 2 行中显示过滤器工具栏？

> ID：13364740
> 
> 赞同：0
> 
> 时间：2012-11-13T16:35:58.153
> 
> 标签：jquery, jquery-ui, jquery-plugins, jqgrid, jqxgrid

我有需要在网格中显示过滤器控件（如文本框、复选框、下拉框）的要求。这是示例图像![在此处输入图像描述](../Images/3ae6e46d750b985150da8ac8f026a0a4.png)

目前我正在使用数据表插件。从此只添加了 1 个过滤器控制列，但每列需要多个控制。

请让我知道是否可以通过使用数据表插件来实现。或者请让我知道是否有其他插件可用。

我也探索过jqgrid、jqxgrid。似乎所有插件每列只显示一个过滤器控件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:38:40.833

jqGrid 不支持第二行过滤器，但它确实具有高级搜索功能，可让您实现相同的目标：

![在此处输入图像描述](../Images/1d562808f820f200dd01bb0a834d809a.png)

您可以在此处使用`+`按钮添加多个过滤条件。例如，您可以按`Inv No == 1`OR搜索`Inv No == 2`。这完成了具有两行过滤器工具栏将实现的功能，但具有指定 AND/OR、尽可能多的条件等所需的功能。UI 可能比您的示例中更复杂，但更高级的搜索需要这种折衷方案.

[`Searching`您可以在|`Complex search`](http://www.trirand.com/blog/jqgrid/jqgrid.html)下在线查看现场演示 .

无论如何，请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching)以获取更多详细信息。

# java - 将日期格式从 Java 移植到 C++

> ID：13364742
> 
> 赞同：1
> 
> 时间：2012-11-13T16:36:02.143
> 
> 标签：java, c++, porting

我在 Java 中有以下代码。我被要求将它移植到 C++，但是，我不是 Java 开发人员。C ++中的等价物是什么：

```
public String formatDate( String string, Date time, TimeZone timeZone )
{
    Calendar calendar = Calendar.getInstance( timeZone );
    calendar.setTime( time );
    StringBuffer answer = new StringBuffer();
    SimpleDateFormat format = new SimpleDateFormat( string );
    format.format( calendar, answer, null );
    return answer.toString();
} 
```

以下行是它的调用方式：

```
formatDate( "yyyy-MM-dd'T'HH:mm'Z'", new Date(), TimeZone.getTimeZone( "GMT" )); 
```

格式字符串有“T”和“Z”，我找不到太多文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:38:26.943

T 和 Z 只是被插入（注意引号），而*不是*作为格式的一部分被替换。因此，以上可以给你

```
2012-11-13T14:35Z 
```

`+0000`如果没有引用Z 通常会给您一个时区（例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:39:56.333

SimpleDateFormat的[JavaDocs 为](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)您提供了格式化选项的列表。`Z`通常代表时区，但请注意，两者实际上都是`Z`和，它们只是字符串。`T``'Z'``'T'`

# telerik - 如何在 Kendo UI 网格中创建自定义删除/销毁按钮/命令？

> ID：13364744
> 
> 赞同：9
> 
> 时间：2012-11-13T16:36:03.957
> 
> 标签：telerik, telerik-grid, telerik-mvc, kendo-ui

我正在使用 Kendo UI 网格，`GridEditMode.InCell`我需要在网格列中添加删除/销毁命令的超链接，而不是默认的“删除”按钮。

我当前的代码如下所示：

```
c.Command(command => command.Destroy()).Width(90); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T14:24:32.787

这是我最终要做的

```
 c.Template(@<text></text>)
              .Width(50)
              .ClientTemplate(@"<a class=""k-button-icontext k-grid-delete"" href=""\#"">Delete</a>"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-13T22:15:42.867

您需要做的就是添加一个具有`k-grid-delete`该类的元素。

例如，您可以将以下锚元素添加到模板列中，它将开始作为删除按钮工作。

```
<a class="k-button k-button-icontext k-grid-delete" href="#">My delete !</a> 
```

# c - MKL：调用 ?gbtrf

> ID：13364752
> 
> 赞同：0
> 
> 时间：2012-11-13T16:36:35.097
> 
> 标签：c, matrix, factorization

我必须使用 MKL 来求解线性方程组。该方程组用于求解 2D 泊松问题，因此正好有 5 条对角线与 0 不同。系统 Ax=b 的矩阵 A 是方阵，其大小为 n*n。我检查了英特尔的文档，我对调用顺序有点困惑。原型是：

```
lapack_int LAPACKE_dgbtrf( int matrix_order, lapack_int m, lapack_int n, lapack_int kl, lapack_int ku, <datatype>* ab, lapack_int ldab, lapack_int* ipiv ); 
```

1）matrix_order。Afaik矩阵的顺序是行数和列数之间的最大值。图书馆不应该从第二个和第三个参数中找出它吗？

2)m 和 n。这些是指原始矩阵 A 还是带存储中的表示？

3）带存储。鉴于问题的结构，我在主对角线上方有 d 条对角线，在主对角线下方有 d 条对角线，因此，包括分解的额外行，带存储的内存区域应该有 (n*n)*(3*d+ 1）元素。元素是按列的。我对吗？

4）领先的维度。这应该是 (3*d+1)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T20:10:49.433

1) 根据 MKL 文档 ( [http://software.intel.com/sites/products/documentation/hpc/mkl/mklman/GUID-C124D9D6-BCF5-471E-B750-0CF9CD1ACB02.htm](http://software.intel.com/sites/products/documentation/hpc/mkl/mklman/GUID-C124D9D6-BCF5-471E-B750-0CF9CD1ACB02.htm) )，订单说明如果矩阵是行或列优先的（LAPACK_ROW_MAJOR 或 LAPACK_COL_MAJOR）。

2）正确，它们是原始矩阵中的“m”和“n”。

3) 大小为 n * (3 * d + 1)，它们的布局取决于 1)。

4) 如果矩阵是行优先的，则更正。

# jquery - Twitter json不起作用

> ID：13364755
> 
> 赞同：2
> 
> 时间：2012-11-13T16:36:56.480
> 
> 标签：jquery, twitter, getjson

我以前使用 JQuery 使用过 twitter JSON。但它现在似乎不起作用。推特服务器是关闭了还是我做错了什么？

这是我的代码：

```
 //Twitter

    $(function() {
        var twitterBaseURL = 'http://twitter.com/status/user_timeline/archies4000.json?count=1&callback=?';
        var html = '';
        var num_of_tweets=0;
        $.getJSON(twitterBaseURL, function(json) {
            $.each(json, function(i, item) {
                num_of_tweets=i+1;
                var text = $.toLink(item.text);
                var profileImageURL = item.user.profile_image_url;
                var time_arr= item.created_at.split(" ");
                var time=time_arr[1]+" "+time_arr[2];
                html += '<p>' + text + ' on '+ time + '</p>';
            });
            $('#twt-desc').html(html);
            $('#twt-pic').append('<img src="'+profileImageURL+'" alt="VPULTS" />');
        });
    }); 
```

我什至尝试在浏览器中直接输入 URL (http://twitter.com/status/user_timeline/archies4000.json?count=1&callback=?) 以在浏览器本身中获取 JSON。它显示：

```
({"errors":[{"message":"Sorry, that page does not exist","code":34}]}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:11:41.320

我得到了答案......Twitter最近做了一些家务：

[https://dev.twitter.com/discussions/10803](https://dev.twitter.com/discussions/10803)

URL 需要更改为：

[https://api.twitter.com/1/statuses/user_timeline/username.json?count=1&callback=](https://api.twitter.com/1/statuses/user_timeline/username.json?count=1&callback=) ?

感谢@Lloyd 为我指明了正确的方向

# .htaccess - Collabnet Apache 服务器和重写

> ID：13364756
> 
> 赞同：0
> 
> 时间：2012-11-13T16:36:57.360
> 
> 标签：.htaccess, apache2, collabnet

我将 Collabnet Subversion Server 与 Apache 一起使用。我正在尝试在特定目录下执行简单的重写指令，但我似乎无法找出问题所在。我有另一台单独运行 Apache 的服务器，并且重写指令按预期工作。

我的 .htaccess （简化只是为了让事情正常工作）

```
Options +FollowSymLinks

RewriteEngine On
RewriteRule .* http://%{SERVER_NAME} [R,L] 
```

使用上面的 .htaccess 文件内容，我的页面甚至不会加载...如果我删除

```
RewriteEngine On 
```

页面将加载，但不会发生重写。
我的 http.conf （或相关部分）：

```
RewriteEngine on
RewriteLog "rewrite.log"
RewriteLogLevel 9

<Directory "wwww">
    Options Indexes FollowSymLinks
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory> 
```

RewriteLog 和 RewriteLogLevel 指令似乎也被忽略了。重新启动 Collabnet/Apache 服务后，会创建 rewrite.log 文件，但从未向其中写入任何内容。

我想我真正的问题是，这里有没有其他人使用重写指令成功配置了 Collabnet Apache 服务？正如我上面提到的，我有另一台单独运行 Apache 的服务器，我可以成功地执行重写。

**或者，有人知道为什么我的日志不能正常工作吗？** 如果也许我能做到那么远，也许我可以自己调试问题......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:00:15.463

我对其中的 .htaccess 部分无能为力，但只想说 CollabNet 只是分发他们构建的二进制文件。它仍然是来自官方源代码版本的普通 Apache httpd 服务器构建。Subversion Apache 模块不会以任何方式干扰使用 mod_rewrite 和这些其他功能的能力。因此，您应该能够只专注于让 Apache 配置正确。二进制文件来自 CollabNet 的事实不应该是相关的。

我确定这只是上面的一个错字，但我注意到您可能在“wwww”目录指令中有一个额外的“w”。

# ios - 试图在 Web 视图中复制 UIScrollView：为什么我不能向左滚动？

> ID：13364757
> 
> 赞同：2
> 
> 时间：2012-11-13T16:36:57.167
> 
> 标签：ios, css, webkit, scroll, css-position

我正在尝试使用 iPhone 应用程序中的 Web 内容复制 UIScrollView 的行为。将有许多与整个屏幕一样宽的等高项目，我希望用户能够水平滚动它们。想想照片应用程序之类的东西，或者类似于 Coverflow 之类的东西。内容是今天的新闻，明天的新闻，然后是昨天的新闻。

我已经编写了一堆 HTML 和 CSS 代码。每个“天”对应一个项目。这是代码（出于说明目的，我添加了边框）

```
<html>
<style type="text/css">
    body {
        margin-left:0px;
        margin-right:0px;
    }

    div#todayContainer {
        position:relative;
        height:250px;
        overflow-x:auto;
        -webkit-overflow-scrolling: touch;
        border:solid 1px yellow;
    }

    div#todayContent {
        position:absolute;
        left:-320px;
        width:960px;
        height:100%;
        overflow-x:auto;
        border:solid 1px blue;
    }

    .day {
        position:absolute;
        left:330px;
        width:300px;
        height:100%;
        background-color:red;
    }

    .nextDay {
        position:absolute;
        left:650px;
        width:300px;
        height:100%;
        background-color:green;
    }

    .previousDay {
        position:absolute;
        left:10px;
        width:300px;
        height:100%;
        background-color:orange;
    }
    </style>
<body>
    <div id="todayContainer">
        <div id="todayContent">
            <div class="previousDay">
                Test previousDay
            </div>
            <div class="day">
                Test
            </div>
            <div class="nextDay">
                Test nextDay
            </div>
        </div>
    </div>
</body> 
```

运行时一切正常...

![在此处输入图像描述](../Images/1d290cc97d0a479e27e3ecbeacc9d30e.png)

......如果我向右滚动一点，看起来一切都会好起来的！

![在此处输入图像描述](../Images/13bf4561c58b95996ddf230dd6b65642.png)

但是当我尝试向左滚动时，这是不行的。但是由于我开启了触摸溢出滚动，我可以向左“弹跳”一点，以查看我打算在那里的内容......

![在此处输入图像描述](../Images/1dab1c49e0d9b24c177975217f0a4c89.png)

我只是无法将它完全滚动到视图中。另外：注意底部的滚动指示器似乎认为它已经在内容的最左边。但是，我真的希望它认为它只是通过方式的 1/3 左右。

有什么帮助吗？

# ios - 缩小和放大后闪烁的MapOverlay-iOS

> ID：13364758
> 
> 赞同：7
> 
> 时间：2012-11-13T16:36:57.693
> 
> 标签：ios, map, ios6, mkmapview

我有两个问题。首先，一旦我为坐标分配内存，请参阅下面的代码，我是否必须释放内存（坐标）？其次，正如您在下面的代码中看到的，我得到了覆盖并添加到地图上。但是，有不同的时间戳提供坐标，应该更新地图。就像雷达地图改变覆盖形状的不同时间戳一样。它最初更新得很好；但是，一旦用户缩小和放大，它就会开始闪烁或闪烁。我想知道为什么会发生这种闪烁？以前有人遇到过这个问题吗？

```
NSArray *ants = [mapView overlays];
for(bb = 0; bb < [polygonArray count]; bb++){
        int attr=[[idArray objectAtIndex:bb]floatValue];

        coords = malloc(sizeof(CLLocationCoordinate2D) * [[polygonArray objectAtIndex:bb] count]);
        for (int a = 0;a < [[polygonArray objectAtIndex:bb] count]; a++){
            coords[a].latitude = [[[[polygonArray objectAtIndex:bb]objectAtIndex:a]objectAtIndex:0]doubleValue];
            coords[a].longitude = [[[[polygonArray objectAtIndex:bb]objectAtIndex:a]objectAtIndex:1]doubleValue];
        }
        polygon = [[MKPolygon alloc]init];
        polygon = [MKPolygon polygonWithCoordinates:coords count:[[polygonArray objectAtIndex:bb]count]]; 
        //free(coords);
        [previousPolygons addObject:polygon];

            }
        [mapView addOverlay:polygon];
        }

    }
[mapView removeOverlays:ants]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:00:17.390

下载苹果

> [面包屑演示](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html)

应用程序。
使用此演示，您会看到推荐的技术来完成您的任务。
我在我的应用程序中使用了那个 Demo，它就像一个魅力。

使用 MkPolygon 的方法不适用于大多边形或更改多边形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T20:20:50.877

我在 iOS 6.1 (iPad 3) 上测试了 BreadCrumbs Demo，它闪烁。这是新的 MKMapView 的错误（悲伤）。我已将错误提交给 Apple。

# iphone - 动作队列 cocos2d

> ID：13364760
> 
> 赞同：0
> 
> 时间：2012-11-13T16:37:08.367
> 
> 标签：iphone, ios, cocos2d-iphone

我可以做类似动作队列的事情吗？例如，我在点击时有旋转动作，但如果用户点击了 10 次，则必须逐步进行所有旋转（现在它是取消最后一个旋转动作并通过单击列表开始新的旋转动作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:48:15.780

正如我所担心的那样，SDK 中没有任何功能。但是您可以编写一个方法，该方法在调用时将操作推送到数组中。完成后，动画的完成通知应该返回一个成功状态的委托。然后你可以从数组中弹出动作并查看是否同时推送了另一个动作并重新开始。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T16:48:30.300

当然，您要查找的内容称为`CCSequence`. 下面是一个例子：

```
id moveAction = [CCMoveBy actionWithDuration:2 position:ccp(size.width/2,0)];
id rotateAction = [CCRotateBy actionWithDuration: 1 angle:90.0f];

[mySprite runAction: [CCSequence actions:moveAction, rotateAction, moveAction, rotateAction, nil]]; 
```

# html - Chrome 和 Opera 为高度添加边框

> ID：13364761
> 
> 赞同：0
> 
> 时间：2012-11-13T16:37:13.617
> 
> 标签：html, css, google-chrome, opera

我的代码看起来类似于这个：http: [//jsfiddle.net/wJ6V5/](http://jsfiddle.net/wJ6V5/)

CSS

```
.u_menu {
    background:#000;
    height:40px;
    width:100%;
    background-image: -moz-linear-gradient(top, #97c840, #8ab63a);
    background-image: -webkit-linear-gradient(top, #97c840, #8ab63a);
    background-image: -o-linear-gradient(top, #97c840, #8ab63a);
}
ul.u_nav {
    float:right;
    margin-right:250px;
    margin-top:7px;
}
ul.u_nav li {
    font-size:14px;
    background:#fff;
    float:left;
    margin-right:15px;
    padding:3px 10px;
    border-bottom:solid 1px #a6cd62;
    box-shadow:inset 0 1px 1px 0 #666;
    background-image: -moz-linear-gradient(top, #80ae2e, #8ebf38);
    background-image: -webkit-linear-gradient(top, #80ae2e, #8ebf38);
    background-image: -o-linear-gradient(top, #80ae2e, #8ebf38);
} 
```

HTML

```
<div class="u_menu">
    <ul class="u_nav">
        <li>Test</li>
        <li>Teest</li>
    </ul>
</div> 
```

在 Firefox 页面看起来不错（就像我想要的那样），但在 Chrome 和 Opera 中 li 元素不在主 div 的中间。它们离顶部边框更近 1px。

我认为这是因为 Chrome 和 Opera 将边框高度添加到 li 高度，所以在这些浏览器中 li 元素比 FF 中高 1px，但我不确定这是否是一个原因。

有什么办法可以解决吗？我希望在 Chrome 和 Opera 中的效果与在 Firefox 中完全相同。还是有其他方法可以在**u_menu** div 中间设置 li 元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:16:13.827

问题似乎与字体大小有关。当我把它缩小到 11px 时，Firefox 和 Chrome 都显示相同的高度。我真的不知道为什么会这样，但是例如 font-size: 1em 大约是您现在拥有的大小，并且在两种浏览器中对我来说也给出了相同的结果。

# java - 如何在 Linux 中杀死和停止在应用程序外部运行的 TimerTask

> ID：13364762
> 
> 赞同：1
> 
> 时间：2012-11-13T16:37:13.540
> 
> 标签：java, linux, multithreading, scheduled-tasks, daemon

我有一个在 Linux 机器上运行的简单 Java 程序，该程序基本上安排了一个重复任务，例如每小时运行一次，所以它有点像坐在那里的守护进程线程，但不完全是。我想知道如何知道程序是否仍在 Linux 中运行以及如何终止正在运行的程序？我需要找到一种方法来触发取消方法吗？或者我可以使用 Linux 命令杀死它？或者我需要编写一个停止并运行脚本？我不确定这是否是一个开放式问题，但实践中最好的方法是什么。

这是我的java代码

```
 public static void main(String [] args){
               ScheduledExecutorService task = 
                                 Executors.newSingleThreadScheduledExecutor();

               task.scheduleAtFixedRate(new Task(),0,1,TimeUnit.HOURS);
        }

        static class Task{
             @Override
             public void run(){
                    //do something
             }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:45:52.237

有很多方法。

Google for `ipc`（进程间通信）。

...和/或编程`cron`以不时停止您的过程...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:46:41.543

通过 (sun.misc.Signal) 使用信号处理程序。如果您通过在执行程序上调用 shutdown() 来获得信号处理它。

例如：

```
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

import sun.misc.Signal;
import sun.misc.SignalHandler;

public class Main {
    public static void main(String[] args) {
        final ScheduledExecutorService task = Executors
                .newSingleThreadScheduledExecutor();

        task.scheduleAtFixedRate(new Task(), 0, 1, TimeUnit.HOURS);
        SignalHandler sh = new SignalHandler() {

            @Override
            public void handle(Signal arg0) {
                task.shutdown();
            }
        };

        Signal.handle(new Signal("USR1"), sh);
    }

    static class Task implements Runnable {
        @Override
        public void run() {
            // do something
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T03:23:19.837

> 如何知道程序是否仍在 Linux 中运行以及如何终止程序运行？

如果您谈论的是现有代码，那么您就是 SOL，除非程序中已经内置了钩子。

> 实践中最好的方法是什么。

有很多方法可以做到这一点。我会使用 JMX。只需公开一个调用`cancel()`方法来停止计时器任务线程的 JMX 操作。有许多不同的 JMX 命令行客户端，您始终可以使用 jconsole。

如何公开 JMX 方法很大程度上取决于您使用的框架。您可以使用我的[SimpleJmx 库](http://256stuff.com/sources/simplejmx/)来相当轻松地完成此任务。

# settings - AppHarbor Web.config 转换错误

> ID：13364763
> 
> 赞同：0
> 
> 时间：2012-11-13T16:37:15.357
> 
> 标签：settings, appharbor, web-config-transform

我有 web.config 文件覆盖设置文件中的项目，如下所示：

```
<applicationSettings>
    <MvcApplication.Properties.Settings>
      <setting name="FacebookUrlAuth" serializeAs="String">
        <value>http://URL1.com</value>
      </setting>
      <setting name="GoogleUrlAuth" serializeAs="String">
        <value>http://URL2.com</value>
      </setting>
    </MvcApplication.Properties.Settings>
  </applicationSettings> 
```

我有 web.release.config 可以转换这些设置：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <applicationSettings>
    <MvcApplication.Properties.Settings>
      <setting name="FacebookUrlAuth" serializeAs="String" xdt:Locator="Match(name)" xdt:Transform="Replace">
        <value>http://AlternativeUrl1.com</value>
      </setting>
      <setting name="GoogleUrlAuth" serializeAs="String" xdt:Locator="Match(name)" xdt:Transform="Replace">
        <value>http://AlternativeUrl2.com</value>
      </setting>
    </MvcApplication.Properties.Settings>
  </applicationSettings>
</configuration> 
```

当我在发布配置中发布解决方案时，它可以正常工作（我的意思是只有 url 与 web.config 不同）

但是当 Appharbor 发布应用程序时，我使用的页面出现运行时错误`@Settings.Default.FacebookUrlAuth`

具有以下详细信息：

**无法识别的元素“设置”。（D:\websites\45\31968\17022\0x0001_PublishedWebsites\MVC.Web\web.config 第 73 行）**

当我评论所有转换规则时，AppHarbor 从我的默认 web.config 中获取这些属性，并且一切正常。这是 AppHarbor 方面的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:34:54.867

你[不能有多个`setting`元素](http://blogs.msdn.com/b/tess/archive/2010/02/16/system-configuration-configurationerrosexception-unrecognized-element-setting-and-other-unrecognized-elements.aspx)。该错误可能与转换无关。

# php - 如果用户已注销，如何不显示容器？

> ID：13364764
> 
> 赞同：0
> 
> 时间：2012-11-13T16:37:16.823
> 
> 标签：php, styles, containers

我在 style.css 文件中创建了一个容器。而且，如果用户已登录，我如何显示一个容器，如果他没有登录，我如何不显示？

**代码：**

```
<div class="container">

<?php
if($_SESSION['id'])
echo '<center>TURINYS MATOMAS TIK NARIAMS</center>';
?>
</div> 
```

现在在这里，如果用户已登录，它会显示文本“TURINYS MATOMAS TIK NARIAMS”，但如果用户未登录，它只会显示一个空白容器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:41:19.020

我没有测试代码，但这应该可以工作：

```
<?php if($_SESSION['id']) : ?>

  <div class="container">
    <center><?php echo 'TURINYS MATOMAS TIK NARIAMS'; ?> </center>
  </div>

<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:42:41.427

```
<?php if(isset($_SESSION['id'])){ ?>
  <div class="container">
    <center>
        <?php echo 'TURINYS MATOMAS TIK NARIAMS'; ?> 
    </center>
  </div>
<?php } ?> 
```

# php - 如何使用一组带背景的 div 创建 jpeg - PHP/jQuery

> ID：13364765
> 
> 赞同：0
> 
> 时间：2012-11-13T16:37:20.080
> 
> 标签：php, javascript, jquery, html, image

图像的最终输出如下所示。

![在此处输入图像描述](../Images/48f78953d6b866a132024426a507d995.png)

如果您查看 html 部分，它是使用不同的 div 创建的，如下所示。所有 div 都使用 CSS 一对一放置，并将位置设为绝对。

```
<div id="tproduct" class="timage" style="z-index: 30; background-image: url('main-mask.png') ;"></div>
<div id="tdesign1" class="timage" style="z-index: 20; background-image: url('design1.png');"></div>
<div id="tdesign2" class="timage" style="z-index: 20; background-image: url('design2.png');"></div>
<div id="tmaincolor" class="timage" style="background-color:blue;"></div>
<div id="tembellishment" class="timage" style="z-index: 10; background-image: url('flower.png');"></div> 
```

如果我们分开来看，它将如下所示。

![在此处输入图像描述](../Images/05f2262b5d94ceadd32b16e3472a15d8.png)

![在此处输入图像描述](../Images/264110bd9964d1855e5f820da5b32628.png)

![在此处输入图像描述](../Images/b3017fc25cd7f76258754ed5f109b5cc.png)

ETC

我的问题是如何使用上述 div 和图像集创建单个图像？我可以使用 PHP 还是 jQuery？

我只想要应该如何完成的步骤或指导。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:57:11.443

在 PHP 中，你会这样做：

1.  声明最终图像（将全部合并为一个）

    $final = imageCreateTrueColor($final_width, $final_height);

2.  开始使用 alpha 混合将所有图像组合成`$final`，`imageCopy`从距离观察者“更远”的地方开始。

3.  最后，您获得单个最终输出作为单个图像

    imageJPEG($final, $outputFileName, $quality);

您只要求“步骤或指导”，但您也必须小心：

*   基本图像可能是*精灵*。在这种情况下，您将不得不从每个图像中“切出”您感兴趣的区域。`ImageCopy`也可以为您做到这一点。
*   图片可能尺寸不合适，您必须使用`ImageCopyResampled`.
*   使用 GD 函数可能无法使用精确复制 CSS 透明度所需的操作，您必须查看 imageMagick PHP 扩展。
*   背景图像（“花”）可能是**重复的图案**。如果它的大小小于主蒙版的大小，您将不得不在水平和垂直方向上循环以使用背景纹理覆盖所有最终图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:41:34.687

您可以在 PHP 中使用[GD](http://php.net/manual/en/book.image.php)来随意操作图像。从你的照片中，我猜你会有多个图层，每一层都应该乘以你的“衣服”（以获得正确的阴影），然后你将它们一层一层地应用以创建最终的 jpg。

您必须使用`imagecreatefrompng`,加载您的图像`imagecreate`来创建最终的 jpg 和一系列（我假设）`imagecopy`以一个接一个地加载您的图层。

# wpf - Win8 和旧版本的 Windows 之间的 WPF 布局有区别吗？

> ID：13364766
> 
> 赞同：0
> 
> 时间：2012-11-13T16:37:24.650
> 
> 标签：wpf, windows-7, windows-8

我们正在升级到更新的开发箱。他们配备了 Windows 7。我一直在计划将我的升级到 Windows 8。然而，[LinkedIn 上的这篇文章](http://www.linkedin.com/groups/Odd-WPF-behavior-on-Windows-43315.S.151387424?qid=8eb87058-b69b-433f-b59c-c0c184382b43&trk=group_search_item_list-0-b-ttl)让我很担心，因为我们必须做一些 WPF 开发。在进行 WPF 开发时，Windows 8 与旧版 Windows 的布局是否存在差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:26:50.030

我相信，如果您正确布局控件，使用垂直/水平对齐，那么在linkedin 上描述的问题根本不会发生。我开始在 Windows 8 上开发 WPF，所以我很快习惯了控件不是我最初想要它们的位置，这是我从 winforms 继承的。

# sql - 覆盖实体框架如何连接到数据库？

> ID：13364776
> 
> 赞同：0
> 
> 时间：2012-11-13T16:38:05.680
> 
> 标签：sql, entity-framework, sqlconnection

我希望能够“手动”管理实体框架如何连接到我的 SQL 数据库。

我想到的是类似于覆盖与数据库建立连接的函数。

```
public override SqlConnection getNewConnection()
{
    // return the connection to be used
} 
```

这可能吗？

**更新：**这是我根据收到的答案写的：

```
System.Data.EntityClient.EntityConnection connection = new System.Data.EntityClient.EntityConnection("metadata=res://*/Models.ADLEntities.csdl|res://*/Models.ADLEntities.ssdl|res://*/Models.ADLEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=myserver;initial catalog=mycatalog;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;");
entities = new Models.ModswebEntities(connection); 
```

我通过从生成 EDMX 对象的 VS 向导生成的 web.config 复制连接字符串来编写此代码。但是，当我运行此代码时，我收到一条错误消息`Keyword not supported: 'data source'`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:03:37.460

DbContext 构造函数中有一个[重载](http://msdn.microsoft.com/en-us/library/gg696604%28v=vs.103%29.aspx)，您可以在其中传入 DbConnection 以及上下文是否拥有它：

```
public DbContext(DbConnection existingConnection,bool contextOwnsConnection) 
```

或者，如果您使用的是 ObjectContext ，则可以在构造函数中[传入](http://msdn.microsoft.com/en-us/library/bb738714.aspx)[EntityConnection](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnection.aspx)：

```
public ObjectContext( EntityConnection connection) 
```

# hbase - 如何将协处理器部署到 CDH4 HBase 集群

> ID：13364779
> 
> 赞同：1
> 
> 时间：2012-11-13T16:38:10.733
> 
> 标签：hbase, cloudera

将区域协处理器 jar 部署到使用 Cloudera Manager 运行 CDH 4 的 HBase 集群的推荐方法是什么？具体来说，是否有推荐的方法来分发 jar 并将其添加到每个 regionserver 的类路径中？理想情况下，我会将它添加到 HDFS 中的 /lib 目录中，但这会引发两个问题：

1.  是否可以将 HDFS uri 添加到 java 类路径，例如`hdfs:///lib`？
2.  Cloudera 管理器中的 HBase 类路径如何更改？我找不到与添加`export HBASE_CLASSPATH=hdfs:///lib`到 hbase-env.sh对应的配置设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T02:17:54.010

我们可以将协处理器 jars 放入 hdfs 路径中，但您不应该在 HBASE_CLASSPATH 中定义它，您只能：创建/更改表，将 hdfs 放入方法中：

htd.addCoprocessor(className, jarFilePath, priority, kvs);

# vbscript - runas 不允许复杂的参数？

> ID：13364781
> 
> 赞同：3
> 
> 时间：2012-11-13T16:38:16.367
> 
> 标签：vbscript, escaping, arguments, command-line-arguments, runas

我有一个应用程序，我试图在 windows 7 和 windows xp 瘦客户端上运行提升，但我似乎无法让 runas.exe cmd 行正确。我知道我需要其中的反斜杠转义字符，以便 runas 正确解释空格。这在发送 runas 已用反斜杠转义的单个参数时有效。这种情况是我发现的所有解决方案，但是它可以工作，但是我需要发送多个参数，这些参数都用反斜杠转义，因为文件路径等引起的争论中有空格。这里有一些例子：

这些工作和预期的那样会提示输入管理员密码：

`runas.exe /user:Administrator "C:\update_andon.exe autosetup /kiosktype:\"Andon Kiosk"\`

`runas.exe /user:Administrator "C:\update_andon.exe autosetup /directory:\"C:\Program Files\CIMS_Andon\Kiosk"\`

当我开始添加我需要的其余参数（例如下面的行）时，我收到 runas 帮助文本，表明存在问题：

`runas.exe /user:administrator "C:\update_andon.exe autosetup /kiosktype:\"Andon Kiosk"\ /exename:\"eAndonKiosk.exe"\ /directory:\"C:\Program Files\CIMS_Andon\Kiosk"\ /repository:\"\\domain\sat\shared\repository\andon kiosk"\"`

一种解决方案是一个接一个地运行每个参数，但我不认为这是一种解决方案，而是一种解决方法。我将反斜杠与各种参数混合在一起的方式是否遗漏了什么？我在某处错过了更多报价吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-26T18:31:47.140

看起来在您的尾随引号中您没有正确转义它们。反斜杠用于避免解释器查看下一个字符。对于尾随引号，您将反斜杠放在引号之后，这是不正确的。

帮助示例

`"notepad \"my file.txt\""`

请注意，反斜杠在引号之前。您甚至可以在使用他们的降价在堆栈交换上输入答案时尝试一下，因为您必须输入双 \ 才能显示单个反斜杠

原始代码

`runas.exe /user:administrator "C:\update_andon.exe autosetup /kiosktype:\"Andon Kiosk"\ /exename:\"eAndonKiosk.exe"\ /directory:\"C:\Program Files\CIMS_Andon\Kiosk"\ /repository:\"\\domain\sat\shared\repository\andon kiosk"\"`

更正的代码

`runas.exe /user:administrator "C:\update_andon.exe autosetup /kiosktype:\"Andon Kiosk\" /exename:\"eAndonKiosk.exe\" /directory:\"C:\Program Files\CIMS_Andon\Kiosk\" /repository:\"\\domain\sat\shared\repository\andon kiosk\""`

参考

1.  [引号、转义字符、分隔符 - Windows CMD - SS64.com](http://ss64.com/nt/syntax-esc.html)
2.  [批处理文件 - 转义字符](http://www.robvanderwoude.com/escapechars.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:34:29.717

典型解决方案：将命令写入批处理脚本并通过`runas`.

# cocos2d-iphone - TexturePackager 导出到 Cocos2d 现有的 sprite sheet

> ID：13364787
> 
> 赞同：0
> 
> 时间：2012-11-13T16:38:38.483
> 
> 标签：cocos2d-iphone, sprite-sheet, texturepacker

我有一个现有的精灵表在 6x6 矩阵上划分图像。现在我想在我的 Cocos2d 项目中使用它。然而 CCSpriteFrameCache 需要一个 .plist 文件以便稍后在批处理节点上使用它们。所以问题是我如何生成一个包含 Cocos2d 元数据的 .plist 文件，以便正确渲染精灵表。这可以使用 Texture Packager 来完成吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:22:58.787

Texture Packer 没有此功能。

您可以编写一个脚本来自己生成 plist，语法非常简单。

您还可以在 Photoshop 或类似的工具中快速将它们切片，然后将这些图像放入 Texture Packer。

# knockout.js - 淘汰赛验证验证可观察组错误

> ID：13364788
> 
> 赞同：1
> 
> 时间：2012-11-13T16:38:42.197
> 
> 标签：knockout.js, knockout-validation

我有一组项目需要作为一个整体进行验证。我`validatedObservable`在组上设置了一个，但没有显示错误消息。

我在这里有一个简化的例子。我希望每个数字都在 0-100 之间，并且总和正好是 100。我该如何处理这种验证？

**更新：**我知道在这个例子中我可以做一个`ko.computed`并验证它，但这不是我需要的。

示例：http: [//jsfiddle.net/CGuW2/5/](http://jsfiddle.net/CGuW2/5/)

```
0-100:<input data-bind="value: num1, valueUpdate: 'afterkeydown'"/><br>
0-100:<input data-bind="value: num2, valueUpdate: 'afterkeydown'"/><br>
<span class="validationMessage" data-bind='text: isValidSum.errors()'></span>

ko.validation.rules['mustEqual'] = {
    validator: function (val, otherVal) {
        return (parseInt(val.num1()) + parseInt(val.num2())) == otherVal;
    },
    message: 'total must equal {0}'
};
ko.validation.registerExtenders();

var viewModel = {
    num1: ko.observable("50").extend({ number: true, min: 0, max: 100 }),
    num2: ko.observable("50").extend({ number: true, min: 0, max: 100 })
};

viewModel.isValidSum = ko.validatedObservable({
                            num1: viewModel.num1,
                            num2: viewModel.num2
                        }).extend({ mustEqual: 100 });

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:20:16.547

我需要绑定`text: isValidSum.error`而不是`text: isValidSum.errors()`. 此外，看起来您必须`visible: !isValidSum.isValid()`在执行此操作时进行绑定。

所以我的解决方案如下所示：

示例：http: [//jsfiddle.net/CGuW2/6/](http://jsfiddle.net/CGuW2/6/)

```
0-100:<input data-bind="value: num1, valueUpdate: 'afterkeydown'"/><br>
0-100:<input data-bind="value: num2, valueUpdate: 'afterkeydown'"/><br>
<span class="validationMessage" data-bind='visible: !isValidSum.isValid(), text: isValidSum.error'></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:49:55.810

检查这个小提琴，我已经实现了总和验证。
[http://jsfiddle.net/CGuW2/3/](http://jsfiddle.net/CGuW2/3/)
我认为问题是你不能`extend`使用`validatedObservable`

# mysql - 用户数据和更改日志的哪种布局最有效且存储消耗更少？

> ID：13364790
> 
> 赞同：5
> 
> 时间：2012-11-13T16:38:52.693
> 
> 标签：mysql, sql, postgresql

我的用户可以更新他们的信息，这些信息保存在表中定义数量的列中，例如：`user ( id INT, email VARCHAR, phone VARCHAR, address VARCHAR )`，例如。

我见过其他实现，例如 Wordpress 的实现，它将用户的这些信息存储在一个名为`usermeta`layout的表中`( umeta_id INT, user_id INT, meta_key VARCHAR, meta_value VARCHAR )`。

在我想要实现的更改日志中，我正在评估使用这样的解决方案还是制作（我认为会更好）这样的布局：`userLog ( id INT, date TIMESTAMP, email VARCHAR, phone VARCHAR, address VARCHAR )`.
因此，我可以拥有任何用户在给定日期所拥有的所有信息的历史记录。行只会记录更改，在未更改的列上具有 NULL。

**对于第一个问题**：这种布局除了能够通过插入适当的信息类型来创建新的信息类型之外还有什么优势`meta_key`吗？
我有时认为，如果性能在我的环境中是一个问题，那么这种布局可能不太合适，因为我会`VARCHAR`为我想要存储的每一种数据使用一个。

**对于第二个问题**：存储和选择/插入效率真的可以在我正在考虑的两种解决方案之间产生影响吗？
哪个解决方案应该比另一个解决方案更少（或更多）占用空间和/或更少（或更多）选择/插入效率，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:25:15.980

一些想法，如果不一定是答案：

显然，更改日志对您来说是必不可少的，因此每个用户只有一行的原始结构不是您的解决方案。因此，我们正在讨论以下选择：

1.  每个用户的整个信息集的每个版本都有一行；或者
2.  每个用户的信息项的每个版本的单行

解决方案 1 对应于您的

```
userLog ( id INT, date TIMESTAMP, email VARCHAR, phone VARCHAR, address VARCHAR ) 
```

解决方案 2 对应于 Wordpress 之一：

```
umeta_id INT, user_id INT, meta_key VARCHAR, meta_value VARCHAR 
```

**您的问题 1：**我看不到解决方案 2 的任何优势，除非您随后决定要捕获用户的（例如）网站 URL 或（例如）最喜欢的颜色，您可以通过添加 meta_key 来做到这一点. 但是您可以在解决方案 1 下同样轻松地做到这一点，只需执行

```
ALTER TABLE userlog ADD COLUMN WebSiteURL(etc) 
```

这并不难做到。除非你店里的 DBA 非常像杜宾犬 (;))。因为您持有更改日志，所有现有用户（更改时）现在将有一个空白的 WebsiteURL 列；但这正是您想要的：您不知道他们的 WebsiteURL，因为系统之前没有捕获它。当然，新列必须为 NULLABLE - 但无论如何这可能是不可避免的，即使使用“初始”数据，除非您用于捕获用户信息的方法坚持将电子邮件、电话和地址作为必需的列。

对我来说，meta_key 解决方案的缺点大于优点。缺点是：

*   您必须开发一段数据透视代码来将一个用户的用户信息透视到
    一行。您必须在每个要获取一行用户信息的地方调用此代码。相反，Solution1 只需要

    SELECT userID,[all user info] FROM userLog INNER JOIN (SELECT userID,MAX(datechanged) AS LatestDateChanged FROM userlog GROUP BY userID) a ON userlog.userid=a.userID AND userlog.DateChanged=a.LatestDAteChanged

    这比枢轴更有效。使用 UserID,DateChanged 上的索引，这将像风一样运行。

*   除非您真的想在 userinfo 表（Email、Email、Email、Email、Email）中多次保存 meta_key 值，否则您需要一个额外的 Meta_Key_Lookup 表。

**第二个问题：** 对于最终的空间效率，是的，meta_key Solution2 是最好的。特别是如果您不使用 VARCHAR 元键，而是元键 ID 值，并且有一个单独的元键查找表（例如 1=电子邮件、2=电话等）。但考虑到几乎为零的存储价格以及该解决方案所涉及的困难，我认为这不是 meta_key 解决方案2 的决定性论据。

（注意/想法：恕我直言，您在解决方案1中保留NULL值的想法没有改变，这是一条错误的道路。尝试获取最新电子邮件，然后是电话，然后是每个地址（分别）的编码用户，将是一场噩梦：几乎与其他解决方案所需的枢轴一样难以编码/测试 - 以及服务器运行 - 以及存储边际的减少。每次一件事发生变化时只需保持整行。除非你只是举个例子，真正的用户信息集是 50 列宽......）

恕我直言，存储问题不是决定性的。所以让我们转向 SELECT/INSERT 效率：

在这个问题上，我认为 Solution1 仍然获胜。在插入时，解决方案 1 获胜：即使用户更改了他们信息中的每个字段，也只插入一行。在 SELECTS 上，解决方案 1 再次获胜：您只需要查看每个用户的最新信息（上面的代码），这是 SQL 优化的对象。相反，Solution2 需要一个支点：SQL 不擅长的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:22:55.670

我同意@sebt 关于标准 SQL 解决方案的看法。

如果您需要 PostgreSQL 中的灵活解决方案，我会为您推荐 hstore 类型（[postgresql 9.1 文档](http://www.postgresql.org/docs/9.1/static/hstore.html)）。这种类型可以在一列中存储许多 key => value 对。
有许多可能的方法可以插入、搜索和索引此列。文档是开始查找的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:03:29.643

最佳选择很大程度上取决于您想要做什么，因此您将运行哪些查询（与许多事情一样）。

我不太了解 WordPress（我知道您将单个字段存储为行，但我不知道它适合哪里），所以我将列出所有选项：

1.  让用户和历史表每行存储单独的字段
2.  只有历史表每行存储单个字段
3.  每行只有用户表存储单个字段
4.  没有每行存储单独的字段
5.  有 1 个用于用户和历史记录的组合表
6.  有 1 个组合表，用于存储每行的单个字段

(5) 和 (6) 在大多数情况下似乎并不是真正的选项，因为我怀疑您希望获取用户（或一群用户）的详细信息比获取历史记录更频繁（除非您的大多数查询是同时获取两者）。

不建议使用 (1) 和 (3)，除非许多细节没有填写（因此在其他情况下您最终会得到非常稀疏的表格）。

(4) 当用户倾向于一次更改所有详细信息时，这可能不会经常发生，我怀疑人们一次只更改 1 或 2 个字段。因此，(2) 可能是一个更好的选择，特别是如果用户表有很多字段（并且人们一次只更改 1 或 2 个字段）。

通常，每行存储单个字段是为了减少存储空间而不是性能（假设有一些空字段，否则每行存储单个字段会更糟），您基本上可以通过查看您的要求和预期数据来确定哪个是最好的. 请注意，我们在这里主要讨论的是选择，这通常是缓慢的操作，除非您有一些奇怪的事情发生，或者一次插入大量。对于历史，减少存储通常比性能更受青睐，因此 (2)。

无论如何，添加字段通常有点费力，所以只是说“更新用户添加列列”并不是什么大不了的事，它甚至可以自动化。这将是另一个（小）理由更喜欢（2）而不是（4）。

# android - file.exists() 在 Android 上返回 false

> ID：13364793
> 
> 赞同：1
> 
> 时间：2012-11-13T16:39:07.270
> 
> 标签：android

```
 String filename = "file:///android_asset/Help_ja.html";
    File f = new File(filename);
    if (!f.exists()) filename="file:///android_asset/Help_us.html";
    webView.loadUrl(filename); 
```

我从assets文件夹中加载了一个HTML，两个文件都在那里，当我尝试这段代码时：

```
filename="file:///android_asset/Help_us.html";
webView.loadUrl(filename); 
```

它起作用了，但由于某种原因 f.exists() 返回 false，我在想可能是因为 URL，但是在将文件加载到 webView 之前如何检查文件是否存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:22:30.993

在代码中适用于我的解决方案：

```
private static boolean assetExists(AssetManager assets, String name) {
    try {
        // using File to extract path / filename
        // alternatively use name.lastIndexOf("/") to extract the path
        File f = new File(name);
        String parent = f.getParent();
        if (parent == null) parent = "";
        String fileName = f.getName();
        // now use path to list all files
        String[] assetList = assets.list(parent);
        if (assetList != null && assetList.length > 0) {
            for (String item : assetList) {
                if (fileName.equals(item))
                    return true;
            }
        }
    } catch (IOException e) {
        // Log.w(TAG, e); // enable to log errors
    }
    return false;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // test for file:///android_asset/Help_ja.html
    boolean exists1 = assetExists(getAssets(), "Help_ja.html"));
    // and if assets are in subfolders
    // would be ./assets/www/test2.hml in your project
    boolean exists2 = assetExists(getAssets(), "www/test2.html");
} 
```

资产文件不是设备上的物理文件，因此您不能使用`File`它们。阅读其内容的唯一方法是通过`AssetManager`. 上面的示例代码使用该`list()`方法列出资产文件并检查您搜索的列表。例如，您也可以尝试打开一个`InputStream`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-28T17:10:59.077

假设您有两个文件路径：

```
String originalPath = "file:///android_asset/..."
String localizedPath = "file:///android_asset/..." 
```

以下将测试第二个是否存在，如果不可用则默认为第一个：

```
String localizedAssetPath = localizedPath.replace("file:///android_asset/",  "");
try {
  InputStream stream = getResources().getAssets().open(localizedAssetPath);
  stream.close();
  return localizedPath;
}
catch (Exception e) {
  return originalPath;
} 
```

因此，基本上，您删除了`file:///android_asset/`基本路径并尝试将其作为流打开。如果失败，则默认使用原始路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:44:44.540

文件不需要 URL，它需要路径。所以它不应该以 File:/// 开头，它应该以 / 开头（绝对路径）或第一个目录名称（相对路径）。

如果您需要在将其加载到 URL 之前检查它是否存在，请在传递给 File 构造函数之前从字符串中剥离协议。如果将 URL 加载到 URL 对象中，则可以使用 getPath() 和 getFile() 作为助手

# linux - 多平台 Amazon-AWS 开发

> ID：13364794
> 
> 赞同：0
> 
> 时间：2012-11-13T16:39:09.937
> 
> 标签：linux, windows, macos, amazon-web-services, monodevelop

我正在寻找开发与 Amazon S3 存储桶和 Amazon EC2 实例通信的应用程序。我需要为多个平台开发它，我已经看到通过 Mono 开发似乎是流行的答案。有没有办法在 Mono 中使用 AWS 开发工具包（.NET 或 Java）而不排除任何平台（Windows、Mac OSX 和 Linux）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T00:15:48.580

FWIW，当前适用于 .NET 的 AWS 开发工具包（v2.2.4.0）似乎在 Mono 3.4.1 中工作。AWS SDK 在 Mono 3.2.8 中不起作用。

我还没有进行详尽的测试，但是一个针对 DynamoDB 表运行一些查询的测试应用程序现在可以在 Ubuntu 14 上运行的 Mono 3.4.1 中运行。因此，AWS 身份验证和请求签名现在可以在 Mono 堆栈上运行。（测试应用程序在 Mono 3.2.8 中失败，在 HttpClient webget 深处的令牌模拟例程中出现“未实现”异常，这是对 AWS 开发工具包的调用的一部分）

我使用这个 Docker 容器作为单声道执行环境：[https ://registry.hub.docker.com/u/akoeplinger/mono-aspnetvnext/](https://registry.hub.docker.com/u/akoeplinger/mono-aspnetvnext/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:26:22.207

只要您正在构建 API 来访问非特定语言的应用程序（即它们需要客户端，并且只能以特定语言提供），任何语言的客户端都应该能够访问您的服务。

# hadoop - 是否使用 Brisk？

> ID：13364796
> 
> 赞同：1
> 
> 时间：2012-11-13T16:39:29.437
> 
> 标签：hadoop, cassandra, hive, brisk

我将开发一个包含大量数据的可扩展 Web 应用程序。我正在考虑使用 Brisk。有人用过吗？有一些很好的资源解释了如何使用它，但它仍然看起来很新并且来源有限（即使在 stackoverflow 中，关于轻快的问题也少于 10 个：）

我的问题是，我可能会尝试将其他工具与 Brisk 联系起来，特别是对于数据的可视化和我现在无法预见的其他需求。我正在考虑用 Python 编程。例如，有一个 python 库可以访问 cassandra，但据我所知，没有库可以访问 Brisk。那么，当我尝试使用 Brisk 附加或合并其他工具时会不会有问题？

你推荐使用 Brisk 吗？还是在不使用 Brisk 的情况下使用 cassandra+hadoop+hive 的本机实现是更好的选择？

谢谢。

编辑： Brisk 是商业产品吗？这意味着开源版本不会再次更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:46:54.423

我很久以前使用 Brisk，然后测试了 Datastax Enterprise (DSE)，最后从 Hadoop 迁移到内部开发的自定义 map/reduce 解决方案。

Brisk 是一个开源项目，但在 Datastax 将他们的努力转向商业产品之后，没有人更新 Brisk。

我想如果您将 cassandra、hadoop 和 hive 更新到最新版本并从[DataStax github](https://github.com/riptano/hive)获取最新的 Hive Cassandra Handler，那么使用 Brisk 就可以了。

即使您设法在您的项目中使用 Brisk，我也建议您联系 DataStax 了解他们的产品。当前版本的 DSE 是从 Brisk 向前迈出的一大步，并且可能不会花费太多。

如果 DSE 不是您的选择并且 Brisk 也无法提供帮助，请使用我在常规 Hive/Hadoop/Cassandra 安装中提到的 Hive Cassandra 处理程序。

# java - Solr 添加后是否可以删除动态字段的前缀/后缀？

> ID：13364801
> 
> 赞同：2
> 
> 时间：2012-11-13T16:39:38.563
> 
> 标签：java, solr, solrj

我有用户要求在填充索引后将动态字段添加到索引中。目前我正在使用 solrj 添加它们。

```
 SolrInputDocument solrDoc = new SolrInputDocument();
    solrDoc.setField("id",myId);
    solrDoc.setField("model_txt", "test123");
    solr.add(solrDoc);
    solr.commit(); 
```

添加了字段模型。

但是当用户尝试使用 dismax 搜索它时，他们必须使用

model_txt:test123

代替：

型号：test123

我知道 solr 需要前缀/后缀来确定字段类型，但有没有办法在添加字段后删除它？或者另一种达到相同结果的方法？

编辑：

我问这个的原因是因为用户可以创建新的动态字段，但他不知道类型。

因此，如果他将模型添加为新的动态字段，他不知道它是索引中的 model_txt。

我知道我应该避免用户必须输入字段名，但是当他们想要动态添加它们时，没有其他方法可以这样做吗？

# c - C中奇怪的scanf问题

> ID：13364803
> 
> 赞同：0
> 
> 时间：2012-11-13T16:39:52.373
> 
> 标签：c

例如，假设我曾经`scanf`从键盘读取一个字符。之后我`printf`用来打印我刚刚读到的字符。

```
scanf("%c",&ch);
printf("%c",ch); 
```

在`scanf`读取字符时，我必须按 enter 继续并运行`printf`，对吗？

假设我`ABCD`用键盘输入。之后`printf`将打印`A`.

但是当我这样做时：

```
do {
   scanf("%c",&ch);
   printf("%c",ch);
} while (ch!='\n'); 
```

并`ABCD`用键盘输入，我认为`printf`必须打印`A`. 而且因为它`A`不会`\n`继续循环，对吗？

但它会打印而不是这个`ABCD`。为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:42:01.600

当您输入 时`"ABCD\n"`，每个都从输入缓冲区`scanf("%c",&ch);`读取一个`char`，直到到达换行符。

因此，在`'A'`打印完之后，缓冲区中仍然存在 a ，`"BCD\n"`因此 next在循环的下一次迭代中`scanf`立即成功读取 another 。`char``'B'`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T16:43:25.997

> 在 scanf 中，我必须按 enter 继续并运行 printf 对吗？

没有。只要有要读取的字符，就会读取它。

> 我在 printf 将打印 A 之后放入 scanf ABCD ...

如果您输入 ABCD 并回车，则输入现在将包含五个字符。A、B、C、D 和换行符。您的循环将依次读取字符 A、B、C、D，然后读取换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:45:14.183

`scanf` does not wait for you to press enter, it simple tries to read in what you typed if it matched your format string. If you had used `%s`, then it would wait until a whitespace character before matching.

This thread may also be useful: [why does scanf not wait for user input after it fails one time?](https://stackoverflow.com/questions/11805414/why-does-scanf-not-wait-for-user-input-after-it-fails-one-time)

# android - Android、启动器和喜爱的应用程序

> ID：13364805
> 
> 赞同：1
> 
> 时间：2012-11-13T16:40:01.250
> 
> 标签：android, xml, android-launcher

我正在尝试在 Android 中创建自己的启动器，并使用了[android 示例 Home](https://play.google.com/store/apps/details?id=org.frankkie.home&hl=fr)。

该示例并不简单，几乎没有关于它的文档或教程，只是论坛上的一些问题没有明确的答案。

我试图在我的启动器中添加最喜欢的应用程序，但该应用程序正在搜索一个`etc/favorites.xml`不存在的 xml 文件“”。

我必须以编程方式创建此文件吗？这个文件是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:04:49.553

我找到了解决方案。

我在文件夹“assets”中创建了一个文件“favorites.xml”并写入：

```
<?xml version="1.0" encoding="UTF-8"?>

<favorites>
    <favorite package="com.android.email" class="com.android.email.activity.Welcome"/>
    <favorite package="com.android.browser" class="com.android.browser.BrowserActivity"/>
</favorites> 
```

在示例代码中，我编辑了方法“bindFavorites”（我使用 InputStream 而不是 FileReader 加载 xml 文件）：

```
/**
 * Refreshes the favorite applications stacked over the all apps button.
 * The number of favorites depends on the user.
 */
private void bindFavorites(boolean isLaunching) {
    if (!isLaunching || mFavorites == null) {

        if (mFavorites == null) {
            mFavorites = new LinkedList<ApplicationInfo>();
        } else {
            mFavorites.clear();
        }          

        InputStream is = null;
        try {
            is = getAssets().open("favorites.xml");
        } catch (IOException e) {
            Log.e(LOG_TAG, "Couldn't find or open favorites file ");
            return;
        }

        final Intent intent = new Intent(Intent.ACTION_MAIN, null);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);

        final PackageManager packageManager = getPackageManager();

        try {
            final XmlPullParser parser = Xml.newPullParser();
            parser.setInput(is, "UTF-8");

            beginDocument(parser, TAG_FAVORITES);

            ApplicationInfo application;

            while (true) {
                nextElement(parser);
                String name = parser.getName();
                if (!TAG_FAVORITE.equals(name)) {
                    break;
                }

                final String favoritePackage = parser.getAttributeValue(null, TAG_PACKAGE);
                final String favoriteClass = parser.getAttributeValue(null, TAG_CLASS);

                final ComponentName cn = new ComponentName(favoritePackage, favoriteClass);
                intent.setComponent(cn);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                application = getApplicationInfo(packageManager, intent);
                if (application != null) {
                    application.intent = intent;
                    mFavorites.addFirst(application);
                }
            }
        } catch (XmlPullParserException e) {
            Log.w(LOG_TAG, "Got exception parsing favorites.", e);
        } catch (IOException e) {
            Log.w(LOG_TAG, "Got exception parsing favorites.", e);
        }
    }

    mApplicationsStack.setFavorites(mFavorites);
} 
```

它可以工作，但我仍然需要一些帮助，在 xml 文件中我们必须设置类值，我不知道在哪里可以找到这些信息。如您所见，此值取决于应用程序。我在这里找到了一些值：http: [//forum.xda-developers.com/showthread.php?t=836719](http://forum.xda-developers.com/showthread.php?t=836719) 但是我有自己的钛应用程序，我不知道需要哪个类值。

# javascript - 使用 javascript 通过 on change 事件处理程序更改选择框的值

> ID：13364808
> 
> 赞同：0
> 
> 时间：2012-11-13T16:40:08.967
> 
> 标签：javascript, jquery, html, json

我在这里做了一个更好看的 JSfiddle [。](http://jsfiddle.net/pNzag/3/)这包括预期的 json 响应和相关的 JS。

到目前为止，它所做的是对 json 进行 ajax 调用，并触发 onchange 开始按材料拆分 json，然后将每个材料组放入一个 optgroup。显示给用户。

我希望能够在调用第一次更改后设置材料选择框的值，以便显示当前使用情况而不是第一个木材。任何想法如何修复我的代码来做到这一点？它让我难倒了几个小时。

Javascript：

```
$(document).ready(

function() {

    var selectData, $states, firstRun, herp_current_material, value;
    firstRun = 0;

    function updateSelects() {
        $('#id__material').empty();
        var cities = $.map(selectData[this.value], function(city) {
            m = city.split(":");
            if (m.length == 3) {
                value = m[1] + ":" + m[2];
                value = value.toLowerCase().replace(/ /g, "_");
                if (document.getElementById(m[0])) {
                    $('#' + m[0]).append($("<option />").text(m[2]).attr("value", value));
                }
                else {
                    if (firstRun === 0) {
                        console.log(m[1]);
                        if (m[0] == "Current") {
                            herp_current_material = m[1];
                        }
                    }
                    $('#id__material').append($("<optgroup />").attr("label", m[0]).attr("id", m[0]));
                    $('#' + m[0]).append($("<option />").text(m[2]).attr("value", value));
                }
            }
            else if (m.length == 4) {
                value = m[1] + ":" + m[2] + ":" + m[0];
                value = value.toLowerCase().replace(/ /g, "_");
                if (document.getElementById(m[0])) {
                    $('#' + m[0]).append($("<option />").text(m[2]).attr("value", value));
                }
                else {
                    $('#id__material').append($("<optgroup />").attr("label", m[0]).attr("id", m[0]));
                    $('#' + m[0]).append($("<option />").text(m[2]).attr("value", value));
                }
            }
            else {
                return true;
            }
        });
        $("optgroup[label='Local']").insertBefore("optgroup[label='Global']");
        $("optgroup[label='Current']").insertBefore("optgroup[label='Local']");
    }

    $.getJSON("/appdata/joinery/ajax/usage/" + return_item_uuid() + "/" + return_component_code() + "/", function(data) {
        var state;
        selectData = data;
        $states = $('#materialwidgettypeselector').change(updateSelects);
        $states.change();
        if (firstRun === 0) {
            $('#materialwidgettypeselector option:text="' + herp_current_material + '"').attr('selected', 'selected');
            firstRun = 1;
        }
    });
});​ 
```

html:

```
<label for="id__material">Material:</label></td><td style="font-weight:lighter; width:200px;"><select id="materialwidgettypeselector"><option value="timber">Timber</option><option value="sheet">Sheet</option><option value="door_blank">Door blank</option><option value="profiled">Profiled</option><option value="glass">Glass</option><option value="fitting">Fitting</option></select><br><select name="_material" id="id__material"><optgroup label="Local" id="Local"><option value="timber:softie">Softie</option></optgroup><optgroup label="Global" id="Global"><option value="timber:carcase">Carcase</option><option value="timber:cill">Cill</option></optgroup></select> 
```

杰森：

```
{"door_blank": [], "fitting": ["Frame:fitting:Bifold doors:Bifold Doors", "IEL:fitting:Bifold doors:Bifold Doors", "IEL:fitting:Sliding doors:Sliding Doors", "IER:fitting:Sliding doors:Sliding Doors", "IER:fitting:Bifold doors:Bifold Doors", "IL:fitting:Bifold doors:Bifold Doors", "IL:fitting:Sliding doors:Sliding Doors", "IML:fitting:Bifold doors:Bifold Doors", "IML:fitting:Sliding doors:Sliding Doors", "IMR:fitting:Sliding doors:Sliding Doors", "IMR:fitting:Bifold doors:Bifold Doors", "IR:fitting:Bifold doors:Bifold Doors", "IR:fitting:Sliding doors:Sliding Doors", "JL:fitting:Bifold doors:Bifold Doors", "JL:fitting:Sliding doors:Sliding Doors", "JML:fitting:Sliding doors:Sliding Doors", "JML:fitting:Bifold doors:Bifold Doors", "JMR:fitting:Sliding doors:Sliding Doors", "JMR:fitting:Bifold doors:Bifold Doors", "JR:fitting:Bifold doors:Bifold Doors", "JR:fitting:Sliding doors:Sliding Doors", "OEL:fitting:Bifold doors:Bifold Doors", "OEL:fitting:Sliding doors:Sliding Doors", "OER:fitting:Sliding doors:Sliding Doors", "OER:fitting:Bifold doors:Bifold Doors", "OHEL:fitting:Sliding doors:Sliding Doors", "OHEL:fitting:Bifold doors:Bifold Doors", "OHER:fitting:Bifold doors:Bifold Doors", "OHER:fitting:Sliding doors:Sliding Doors", "OHL:fitting:Sliding doors:Sliding Doors", "OHL:fitting:Bifold doors:Bifold Doors", "OHML:fitting:Sliding doors:Sliding Doors", "OHML:fitting:Bifold doors:Bifold Doors", "OHMR:fitting:Bifold doors:Bifold Doors", "OHMR:fitting:Sliding doors:Sliding Doors", "OHR:fitting:Bifold doors:Bifold Doors", "OHR:fitting:Sliding doors:Sliding Doors", "OL:fitting:Bifold doors:Bifold Doors", "OL:fitting:Sliding doors:Sliding Doors", "OML:fitting:Bifold doors:Bifold Doors", "OML:fitting:Sliding doors:Sliding Doors", "OMR:fitting:Bifold doors:Bifold Doors", "OMR:fitting:Sliding doors:Sliding Doors", "OR:fitting:Bifold doors:Bifold Doors", "OR:fitting:Sliding doors:Sliding Doors", "frame:fitting:Bifold doors:Bifold Doors", "frame:fitting:Sliding doors:Sliding Doors", "Global:fitting:Left", "Global:fitting:Right", "Global:fitting:Top"], "sheet": ["Global:sheet:Anti ballistic", "Global:sheet:Anti vandle steel sheet", "Global:sheet:Blue cladding", "Global:sheet:Core", "Global:sheet:Green cladding", "Global:sheet:Inner veneer", "Global:sheet:Insulation", "Global:sheet:Non specific layer", "Global:sheet:Outer veneer", "Local:sheet:Softie", "Current:sheet:"], "profiled": [], "timber": ["Global:timber:Carcase", "Global:timber:Cill", "Local:timber:Softie"]}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:16:29.020

要设置选择列表的选定选项，请使用类似于以下的语法：

```
$("select#myselectid").val(someobject.objectproperty).attr('selected', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:27:10.933

$('#form select[name=country]').val('United States');

# algorithm - 2/9 游戏（Facebook 采访）

> ID：13364811
> 
> 赞同：12
> 
> 时间：2012-11-13T16:40:15.870
> 
> 标签：algorithm, math

我被问到这个问题： google的[类似问题](https://stackoverflow.com/questions/13299684/in-the-game-of-babylon-if-one-user-starts-playing-how-can-we-calculate-wholl "类似的问题")。在 Facebook 采访中也提出了类似的问题。

> 确定 2/9 数字游戏的获胜者
> 
> 两个玩家玩以下游戏：他们选择一个随机数 N（小于 20 亿），然后从 1 开始，轮流将前一回合的数字乘以 2 或 9（他们的选择）。谁先达到N，谁就获胜。
> 
> 候选人应该编写一个函数，给定 N 决定谁获胜（第一名还是第二名？）

2/9 的基本随机选择是否会用于乘法工作，或者他们希望我们在移动时增加智能。例如：从乘以 2 开始，然后仅当您看到其他人无法比您更快地达到 N 时才乘以 9？

处理这类问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T07:15:26.607

此类问题的最佳方法。

首先你需要对**博弈论有基本的了解**。真的很基础。那就是你意识到这样一个事实，对于给定的数字 N，要么是先发玩家的获胜策略，要么是对手的获胜策略。因此，您必须假设他们都知道策略并尽其所能采取最佳行动。

然后你开始**熟悉这个游戏**。你练习的水平很低。您很快就会注意到，对于 2-9，先发者获胜，而对于 10-18，他必须输。因此，您的函数已准备好用于`N<=18`.

然后你开始**思考一般的制胜策略**。了解策略将为您提供算法。5 分钟后（越快越好），您会明白自己无法及时找到获胜策略，因为在这种情况下并不明显。所以你决定给计算机一些基本原理，让它为你解谜。你知道你会使用递归。

你试图找到递归的规则。您可能希望从头开始或从头开始。我将从最后描述这种方法。

游戏的目标是**把你的对手推到区域，他必须给你胜利**。不要自己被推到那个区域。从 N/9 到 N 有一个获胜区。如果一个人在 N/9/2 和 N/9 之间被逼上场，他必须输。（因为他的两个动作都将他的对手推到了胜利区。）所以你写你的函数：

```
wins(n) {
  // returns 1, if starting player is able to reach
  // the range [n, 2*n) with his move
  if (n<=18) {
    if (n<=9)
      return 1;
    else
      return 0;
  } else {
    // I must push him to the zone between N/9/2 and N/9
    return wins(n/18);
  } 
```

如果你达到了那个点，你就通过了。还有一些细节，比如是使用 float 还是 int，是否使用 int 向上舍入或向下舍入。但总的来说，你展示了正确的思维方式，你已经准备好面对面试官了:)

**编辑**：*实际上上面的代码有一个错误。“获胜”与“能够达到范围（n，2n）”不同。这里可能需要 2 个函数：`wins(n)`和`reaches_slightly_above(n)`. 后者将以递归方式调用，低于 18 的返回值应该不同，类似于[Peter de Rivaz](https://stackoverflow.com/a/13367642/772981)解决方案中的值。但是，下面的解决方案和一般方法应该没问题。*

**从下到上**的替代方法是使用以下功能：

```
wins(a,n) {
  if (9*a >= n)
    // I win easily
    return 1;
  else
    // if one of my moves pushes the opponent to the zone
    // where he's not able to win, then I win!
    return !wins(2*a, n) || !wins(9*a, n);
} 
```

如果他们要求`n`，您返回 的值`win(1,n)`。这个算法的复杂性并不明显，但我相信它是对数的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T17:37:49.947

由于它们必须精确地达到`N`，这只有在`N`是 形式时才有可能`2^a * 9^b`，其中之一也`a, b`允许为 0。

查找`a`及`b`以上：如果`a + b = even`，则第二个玩家获胜，否则第一个玩家获胜。

这是因为，在每一步，玩家都会接近其中一个`a`或`b`一个，因此接近`a + b`一个。所以问题简化为：给定`k`，如果每一步玩家必须从 中减去 1 `k`，那么哪个玩家将首先达到 0？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T19:46:58.877

The optimal play will normally be to play the opposite of the opponent's move except right at the start and end.

By comparing with a recursive solution, it turns out that the answer can be computed based on the most significant digit in a base 18 representation of the number-1 as follows:

```
def win29(n):
    if n<=9: return True
    n-=1
    while n>=18:
        n = n//18
    return n==1 or 4<=n<=8 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-13T17:45:14.510

无论只是试图满足或满足或超越`N`，这都可以通过确定在各种情况下总是获胜的策略来解决。我将介绍 5 个案例（或 2 个案例，其中第二个案例有 4 个子案例），涵盖所有案例`N`并给出每个案例的获胜策略。

考虑一下`T = ceil( log(N)/log(18) )`，那就是让满足或超过`T`的最小功率。`18^T``N`

如果`18^(T-1) * 9 < N`那么第一个玩家总是输给一个理想的对手。每当第一个玩家选择 2 时，第二个玩家选择 9。每当第一个玩家选择 9 时，第二个玩家选择 2。这样，第二个玩家的回合总是以 18 的力量结束。`T`回合后，第二个玩家获胜。第一个玩家不能在前一轮获胜，因为乘以 9 不足以超过`N`（所以乘以 2 也不是）。

所以，现在让我们考虑 `18^(T-1) * 9 >= N`并选择最小的`k`这样`18^(T-1) * 2^k > N`。有四种可能`k = 1, 2, 3, or 4`。

*   `(k = 1)`第一个玩家获胜。第一个玩家可以从 2 开始，然后像上面的第二个玩家一样玩，在接下来的每一轮中与其他玩家玩相反的数字，直到下一轮。第二个玩家将始终面对初始 2 的 18 倍的幂。在 18^(T-2) * 2 时，玩家二最多可以`18^(T-1)`通过乘以 9 达到，这不足以获胜，并且可以在最少返回`18^(T-2)*4`哪个玩家可以乘以 9 获胜`18^(T-1)*2`。

*   `(k = 3)`第一个玩家也获胜。这一次玩家一从 9 开始并像以前一样玩。第二个玩家将始终面对初始 9 的 18 倍的幂。在 18^(T-2) * 9 时，玩家二最多可以达到`18^(T-2) * 9 * 9 < 18^(T-2) * 18 * 8 = 18^(T-1) * 2^3`，因此不足以获胜，并且至少可以返回 18^ (T-1) 乘以 2，哪个玩家乘以 9 并获胜。

*   `(k = 2 or 4)`第二名玩家获胜。这里第二个玩家应该像以前一样玩相反的数字，直到接近尾声，这样每一轮玩家一个以 18 的幂开始。在`18^(T-2)`，玩家一个最多可以达到`18^(T-2)* 9 < 18^(T-1)`，因此不足以获胜。如果他返回 18^(T-2)*9，则玩家二获胜，`18^(T-2)*9*9 > 18^(T-2)*18*4 = 18^(T-1)*2^2`如果玩家一返回`18^(T-2)*2`，则玩家二返回`18^(T-2)*4`。然后玩家一最多可以制作`18^(T-2)*4*9 = 18^(T-1)*2`，这仍然不够。而现在玩家一至少可以回归`18^(T-2)*8`，这足以让玩家二达到目标`18^(T-2)*8*9 = 18^(T-1)*4`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-13T18:00:37.397

是的，你应该考虑双方球员的最佳发挥并决定谁会赢。

在这里，一个简单的递归思维可以引导您找到解决方案。

如果玩家有号码`n`，`n*9 >= N`则当前玩家将赢得比赛。
否则，他会将`2*n`或`9*n`传给第二名玩家。`2*n`现在，只有当他（和`9*n`）提供给第二名的两个选项都导致第二名的中奖号码时，第一名才会输掉比赛，否则他将有机会再次选择中奖号码。

因此，我们可以编写如下递归方法：
因为游戏中的所有数字都将具有格式：`2^i * 9^j`我们可以编写：

```
 F(i, j) = true; if (2^i * 9^j * 9) >= N
           !(F(i+1, j) && F(i, j+1)); otherwise 
```

解决方案将在 中`F(0, 0)`，无论第一玩家是否获胜。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-24T17:41:22.317

如果 N 可以被 2 和 9 整除，那么会有很好的答案，并且有一些很好的博弈论方法。这是一种简单的 Javascript 动态编程方法，可以为任何可能的 N 提供答案。

```
function getWhoWins(n) {
    if(getWhichPlayerWins(0, 1, n) === 0) {
        console.log("First player wins for " + n);
    } else {
        console.log("Second player wins for " + n);
    }
}

// Returns 0 if first, 1 if 2nd player would win
function getWhichPlayerWins(currentPlayer, currentNumber, targetNumber) {
    if(currentNumber * 9 >= targetNumber) {
        return currentPlayer;
    }
    var nextPlayer = (currentPlayer + 1) % 2;
    if(getWhichPlayerWins(nextPlayer, currentNumber *2, targetNumber) === currentPlayer || getWhichPlayerWins(nextPlayer, currentNumber *9, targetNumber) === currentPlayer) {
        return currentPlayer;
    }
    return nextPlayer;
} 
```

该解决方案的时间复杂度为 O(2*logN) = O(logN)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T23:15:32.370

*组合博弈论*研究了诸如此类的两人、确定性博弈。这种无聊的博弈论与经济学中流行的更有用的诺伊曼和纳什博弈论无关。开创性的工作是一本令人愉快的书，名为 Conway、Berlekamp 和 Guy 的 Winning Ways。

*想想*。对于任何游戏，要么：

1.  有一种策略，第二个玩家总是赢，但是第一个玩家玩。
2.  有一种策略，第一个玩家总是赢，但是第二个玩家玩。 

你的游戏是一个特例，一个*不偏不倚的游戏*，游戏的状态对两个玩家来说都是一样的。最好的例子是一个名为 Nim 的简单火柴游戏。碰巧所有不偏不倚的博弈都等价于 Nim（这就是 Sprague Grundy 定理），所以所有不偏不倚的博弈都可以完全解决。

* * *

让我们解决你的游戏。游戏的可能状态是正整数。我们将每个状态分类为第二个玩家获胜（我们将此类游戏标​​记为零“0”游戏）或第一个玩家获胜（我们将此类游戏标​​记为星号“*”游戏）。

大于或等于 N 的整数都是零游戏，因为此时游戏已经结束。不管是谁出手，都已经输了。

轮到的玩家可以移动到上面的零位置的状态是明星游戏。因此整数 n`N/9 <= n < N`都是明星游戏 - 获胜的举动是乘以 9。

轮到的玩家别无选择只能移动到明星位置的状态再次为零。所以整数 n,`N/9/2 <= n < N/9`是零位。我们的球员输了。

等等。使用类似的论点，我们最终将所有整数归为一。

* * *

对于 N=1000 来说，

*   整数 1000 及以上是零游戏
*   整数 112 到 999 是明星游戏（要赢，乘以 9）
*   整数 56 到 111 是零游戏（玩家无法获胜）
*   整数 7 到 55 是明星游戏（相应地乘以 9 或 2 以移动到零游戏 56 到 111 之一）
*   整数 4 到 6 是零游戏（玩家无法获胜）
*   整数 2 到 3 是明星游戏（乘以 2）
*   整数 1 是零游戏（玩家无法获胜）

* * *

概括我们得出彼得的结论[https://stackoverflow.com/a/13367642/284795](https://stackoverflow.com/a/13367642/284795)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-13T17:16:57.460

答案（我不是 100% 确定）：

```
r = N mod 18

if r belongs to (1,9]  player 1 wins
if r belongs to (9,18) or is =1  then player 2 wins. 
```

我没有完整的数学演示，所以我可能是错的。
如果两个玩家（或至少其中一个）都知道如何玩，这应该是正确的答案。

我能得到这份工作吗？:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-16T18:18:49.593

有趣的帖子和答案。我很想提出一个理论上的蛮力函数，它使用 2/9 因子枚举所有组合路径到 N <= 2X10^12（或尽可能接近）。我说“理论上的”是因为我假设这种计算能力甚至超过了 FB？

# java - digit.digit.digit 的模式表达式？

> ID：13364812
> 
> 赞同：0
> 
> 时间：2012-11-13T16:40:17.203
> 
> 标签：java, regex

我，我正在做一个模式正则表达式来检查一个字符串是否是：

像这样的数字.数字.数字：

```
1.1.1
0.20.2
58.55541.5221 
```

在java中我使用这个：

```
private static Pattern pattern = Pattern.compile("\\d*.\\d*.\\d*", Pattern.CASE_INSENSITIVE); 
```

但如果我通过 20.20。在比赛中让我回归真实。

什么是地？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:41:25.673

您应该使用`+`而不是`*`. `*`是 0 次或多次重复，而`+`是 1 次或多次重复。

此外，不要忘记转义`.`字符：

```
"\\d+\\.\\d+\\.\\d+" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T16:41:52.507

您使用了`*`量词。匹配`0 or more repetition`。

使用`+`量词，它匹配`1 or more repetition`： -

```
Pattern.compile("\\d+\\.\\d+\\.\\d+"); 
```

此外，您需要转义您的`dot(.)`，因为它在 中具有特殊含义`Regex`，它匹配任何字符。所以，`.`在你的正则表达式中，不仅是匹配`.`，它实际上会匹配任何字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T16:42:10.937

你必须逃离这个点！它匹配任何字符，请参阅[文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

所以你需要

```
Pattern.compile("\\d+\\.\\d+\\.\\d+"); 
```

我也替换`*`为`+`,`*`因为也会计算 0 位数字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T16:43:14.910

zzzzBov 的建议是正确的，你还需要转义`.`，所以正确的正则表达式是

```
\\d+\\.\\d+\\.\\d+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T16:53:43.210

这是您需要的基本正则表达式

```
\d+\.\d+(\.\d+)? 
```

这将匹配以下内容

```
20.20.20
1.1.1
1.1.1
0.20.2
58.55541.5221
20.20 
```

# r - 排序 igraph 顶点

> ID：13364814
> 
> 赞同：2
> 
> 时间：2012-11-13T16:40:29.950
> 
> 标签：r, igraph

数据帧 t

```
Student         Played     Count
Mike            Soccer          5
Mike            Football        10
Mike            Golf            15
Mike            Hockey          2 
```

需要创建一个 igraph，我需要在中心显示学生并作为顶点播放。我可以通过以下方式做到这一点：

```
g <- graph.data.frame(t)
plot(g, layout = layout.kamada.kawai,  vertex.label = V(g)$name,  vertex.label.color= "darkblue",  edge.arrow.size=0.9,  edge.curved=T, edge.label=t$count, edge.label.color="#F900F9", edge.label.font=10,vertex.shape="rectangle",edge.color="darkgreen") 
```

这可行，但我喜欢按计数排序图表。例如，Played 的顶点应该按计数逆时针排列。在这种情况下，曲棍球应该先于足球等。有人可以帮我吗？这样，最终用户会更好地阅读它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:26:09.943

您可以使用 轻松完成此`layout.star`操作，请查看手册并告诉我您是否无法解决。

# automation - 如何通过 Outlook 自动化获取属于已读回执 (ReportItem) 的 MailItem

> ID：13364815
> 
> 赞同：2
> 
> 时间：2012-11-13T16:40:34.880
> 
> 标签：automation, outlook, vsto, outlook-addin, mailitem

Outlook 将已读回执存储为`ReportItem`对象。

是否可以获得`ID`属于给定已读回执的原始消息的一个或一些细节？我查看[了对象的属性，`ReportItem`](http://msdn.microsoft.com/en-us/library/office/bb176769%28v=office.12%29.aspx)但我迷路了。

由于已读回执有不同的形式，我不想以编程方式处理回执的正文 - 相反，如果可能的话，我希望从 Outlook 中获取它。

**注意**：该解决方案至少应适用于 Outlook 2003 到新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:35:28.377

看起来`ReportItem`和源之间的唯一链接`MailItem`是[`ConversationIndex`](http://msdn.microsoft.com/en-us/library/office/ff869024.aspx)和[`ConversationTopic`](http://msdn.microsoft.com/en-us/library/office/ff860352.aspx)。这是 Outlook 用来将已读回执消息与相关源链接在一起的方法`MailItem`。您只需按[过滤，`ConversationTopic`](http://www.outlookcode.com/codedetail.aspx?id=1714)然后[使用 的前 44 个字符`ConversationIndex`来识别原始来源`MailItem`](http://www.experts-exchange.com/Programming/Languages/Visual_Basic/Q_23334181.html)。

### 示例对话索引

**来源索引**： `01CDC1C35624E2A7BD18CF8C439CA73B62A052922657`
**收据索引**：`01CDC1C35624E2A7BD18CF8C439CA73B62A0529226570000012862`

您可以使用`Items.Restrict`将项目减少到特定的 DASL 过滤器

### **DASL 搜索：**

`[ConversationTopic] = 'read receipt ConversationTopic here'`

### 定位 ReportItem 的父 MailItem

```
Outlook.MailItem source = FindReadReceiptSourceMessage(ri);
string entryID = source.EntryID;
// ...
public static Outlook.MailItem FindReadReceiptSourceMessage(Outlook.ReportItem readReceipt) 
{
    Outlook.Folder inbox = Globals.ThisAddIn.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox) as Outlook.Folder;
    string sourceIndex = readReceipt.ConversationIndex.Substring(0, 44);
    string topicFilter = string.Format("[ConversationTopic] = '{0}'", readReceipt.ConversationTopic);
    Outlook.Items topicItems = inbox.Items.Restrict(topicFilter);
    return topicItems.OfType<Outlook.MailItem>().Where(c=>c.ConversationIndex.Equals(sourceIndex)).FirstOrDefault();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T09:02:31.230

您的意思是：“您只需按 ConversationTopic 过滤，然后使用 ConversationIndex 的前 44 个字符来识别原始源 MailItem。”

但我认为我们只过滤 ConversationIndex 的前 44 个字符。因为如果有 2 封电子邮件具有相同的 ConversationTopic，那么我们不需要使用 ConversationTopic 进行过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T03:23:51.510

在您的项目“myitem”上使用兑换库。在我看来比上面的好

```
 If vs_sender = "" Then 'read receipts
            Set objSMail = CreateObject("Redemption.SafeMailItem")
            objSMail.item = myitem
            vs_sender = objSMail.SenderEmailAddress
            vs_recipient = myitem.Recipients(1).Address
            Set objSMail = Nothing
    End If 
```

# c++ - 在非标准位置使用 icpc 和 gnu libstdc++

> ID：13364820
> 
> 赞同：1
> 
> 时间：2012-11-13T16:41:00.907
> 
> 标签：c++, c++11, libstdc++, icc

我正在尝试将 icpc 与 c++11 功能一起使用，但是我需要一个 c++11 标准库，英特尔不提供。

我在 RHEL 6 上以用户身份运行，因此系统 libstdc++ 已过时。安装了较新的版本，但它位于非标准位置。

如何链接到非标准位置的 gcc std 库？我使用什么标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:46:59.803

我不知道 ICC，但是您是否分别尝试过标头和库的常用选项`-I`和选项？`-L`

我会尝试使用标志运行较新的版本`g++`，该`-v`标志将告诉您它搜索其头文件和库的所有目录，然后告诉 ICC 查找这些相同的路径。

我很确定 RHEL6 不附带 GCC 4.0，因为 RHEL5 附带 GCC 4.1！我认为它是 RHEL6 上的 4.4，如果内存服务正确，它确实支持一些 C++11 功能，但您可能需要定义`__GXX_EXPERIMENTAL_CXX0X__`ICC 是否在您使用`-std=c++11`.

# ios - 注释视图的 PopOver

> ID：13364831
> 
> 赞同：4
> 
> 时间：2012-11-13T16:41:26.717
> 
> 标签：ios, storyboard, mapkit, mkannotation, mkannotationview

那么我有一个问题？我很困惑！

我有一个地图视图，其中放置了注释。现在我想要一个用于注释的弹出框。

我该怎么做

1.在storyboard中创建一个popover控制器，并通过delgate方法推送。2.通过所有子视图和东西创建一个程序化弹出视图？

我想使用第一种方法，任何人都可以帮助我。

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control 
```

`{ // UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"annotationPopUp"]; [self performSegueWithIdentifier: @"annotationPush" sender:nil]; }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:47:56.907

在`mapView:didSelectAnnotationView`你的班级中制作你的弹出框（最好是一个属性）并按下它。这是一个例子：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    self.popover = [[UIPopoverController alloc] initWithContentViewController:yourViewController];

    [self.popover presentPopoverFromRect:view.bounds 
                                  inView:view   
                permittedArrowDirections:UIPopoverArrowDirectionAny 
                                animated:YES];
} 
```

# c++ - C++ 中的高效字符串/模式匹配（suffixarray、trie、suffixtree？）

> ID：13364834
> 
> 赞同：8
> 
> 时间：2012-11-13T16:41:39.773
> 
> 标签：c++, pattern-matching, trie, suffix-tree, suffix-array

我正在寻找一种有效的数据结构来对一组非常庞大的字符串进行字符串/模式匹配。我发现了尝试、后缀树和后缀数组。但是到目前为止，我在 C/C++ 中找不到一个现成的实现（而且我自己实现它似乎很困难并且容易出错）。但我仍然不确定 Suffix-Arrays 是否真的是我正在寻找的东西......我已经尝试过 libdivsufsort 和 esaxx，但无法找到如何使用它们来满足我的需求：

我想使用一组预定义的字符串，带有通配符（甚至是正则表达式）来匹配用户输入。我有一大堆预定义的字符串，即

“什么是 *？” “什么是 XYZ？” “多少 *？” ...

现在我想找到最匹配的字符串（如果有的话，那就完全匹配了）。即用户输入：>什么是XYZ？应该找到“什么是 XYZ？” 而不是“什么是*？”，而是“什么是什么？” 应该找到“什么是*？” （假设 * 是任何字符数的通配符）。

构建结构不是时间紧迫的（并且结构不必非常节省空间），但搜索不应该花费太长时间。怎么能轻易做到呢？欢迎任何框架/库或代码示例

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T00:27:02.460

鉴于您认为模式不需要在运行时更新，我不确定您是否需要运行时结构。

我建议使用[re2c](http://re2c.org/)或[ragel](http://www.complang.org/ragel/)将模式编译为执行模式匹配的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:10:10.557

你可能想看看[flex](https://github.com/westes/flex)。从手册：

> flex 是一个生成扫描仪的工具。扫描仪是一种识别文本中词汇模式的程序。flex 程序读取给定的输入文件，如果没有给出文件名，则读取其标准输入，以生成扫描仪的描述。描述采用成对的正则表达式和 C 代码的形式，称为规则。flex 默认生成一个 C 源文件 lex.yy.c 作为输出，它定义了一个例程 yylex()。该文件可以编译并与 flex 运行时库链接以生成可执行文件。当可执行文件运行时，它会分析其输入中是否出现正则表达式。只要找到一个，它就会执行相应的 C 代码。

还有这个：

> flex 的主要设计目标是生成高性能扫描仪。它已针对处理大量规则进行了优化。

例如，此扫描仪匹配您帖子中的三种模式：

```
%%
"WHAT IS XYZ?"      puts("matched WHAT-IS-XYZ");
"WHAT IS ".*"?"     puts("matched WHAT-IS");
"HOW MUCH ".*"?"    puts("matched HOW-MUCH"); 
```

Flex 通过生成离散有限自动机 (DFA) 来工作。DFA 只查看每个输入字符一次。即使匹配通配符，也没有回溯。运行时间为 O(N)，其中 N 是输入字符数。（更多的模式会生成更大的 DFA 表，这会导致更多的缓存未命中，所以更多的模式会受到一些惩罚。但对于我能想到的任何匹配系统都是如此。）

但是，您必须以正确的顺序列出您的模式以正确匹配它们。如果有问题，Flex 可能会告诉您。例如，如果您颠倒上述扫描仪中 WHAT-IS-XYZ 和 WHAT-IS 模式的顺序，flex 会告诉您：

```
:; flex matcher.l
matcher.l:3: warning, rule cannot be matched 
```

如果你能满足 flex 的要求，flex 应该会给你一个非常快速的扫描仪。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-19T11:06:33.803

上述许多答案在实践中都不能很好地工作，或者不构成您问题的最知名答案：例如，使用编译器构造中的扫描仪生成器（**re2c**，**lex**，**flex**，...）可能会失败大型词典，因为这些工具是为编程语言设计的，通常最多有几百个内置关键字。

我可以推荐两种替代方法：

(1) 选择一个 C++ trie 类，将字符串映射到第二个数组中使用的 size_t id，以存储有效负载数据。使用 Web 搜索引擎搜索查询，例如：

> ```
> c++ trie c++14 implementation fast "small footprint" site:github.com 
> ```

找到合适的候选人 - 在撰写本文时，例如[https://github.com/Tessil/hat-trie](https://github.com/Tessil/hat-trie)看起来相当不错（干净、可移植、现代的代码，并且有一篇科学论文可供参考，这增加了可信度）；或者

(2) 将字符串词典到有效载荷数据的映射表示为有限状态转换器 (FST)，它是 NFA（带输出的自动机）的扩展，由**FOMA**、**XFST**或**OpenFST**实现。

第一个选项意味着您必须测试可用的库以确保易用性和可扩展性。第二个选项意味着您必须让自己熟悉 FST 和现有的实现库及其许可证。

（第二种方法被计算语言学家用来模拟大型单词列表，政府也用来扫描你在互联网上写的所有东西，所以它的扩展性很好。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T17:06:35.790

查看[CritBit](http://cr.yp.to/critbit.html)树：

如果您真的觉得需要，对 C++-ise 来说微不足道的示例[源代码。](https://github.com/agl/critbit)

要查找所有匹配项，请使用该功能`critbit0_allprefixed`

例如

```
// Find all strings that start with, or are equal to, "WHAT IS"`
critbit0_allprefixed(tree, "WHAT IS", SomeCallback);` 
```

`SomeCallback`为每场比赛调用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T08:21:25.240

您是否尝试过[三元搜索树](http://en.wikipedia.org/wiki/Ternary_search_tree)？这是一个 c++ 实现：[http ://code.google.com/p/ternary-search-tree/](http://code.google.com/p/ternary-search-tree/)

我没有任何关于构建三叉树有多慢的经验，但我知道搜索非常快。

**[编辑]**

在 partialMatchSearch 中匹配树内的通配符：（免责声明：这只是一个建议，未经任何测试）

您可以将 * 符号添加到树中，并在 partialMatchSearch 函数的开头添加这样的 if 子句：

```
 if ( ( *key != 0 ) && tree->splitChar == '*' )
  {
     this->partialMatchSearch( tree, key+1 );
  } 
```

换句话说，只需递归调用具有相同节点但字符串设置为下一个字符的 partialMatchSearch。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-22T15:38:50.467

我相信，如果您有大量模式，这是一个解决方案应该可以很好地工作。仅仅 10k 可能有点过头了，实现它意味着相对大量的工作，但你可能仍然感兴趣。

基本思想是创建一个**倒排索引**，将模式的子字符串映射到模式 ID。首先，每个模式都有一个 ID：

```
1: what is *
2: where is *
3: do * need to
etc. 
```

然后我们创建一个倒排索引。在最简单的情况下，我们将模式拆分为**标记**并将每个标记映射到它出现的模式 ID 列表。我们可以灵活地定义标记，但一种方法是假设每个空格分隔的单词是一个令牌。所以这里是索引：

```
what  -> 1
is    -> 1,2
where -> 2
do    -> 3
need  -> 3
to    -> 3 
```

然后，当您从用户那里获得输入字符串时，您将其拆分为标记并在索引中查找它们。您可以组合从索引中获得的所有模式 ID。例子：

```
INPUT: what is something?

TOKENS:
   what      -> 1
   is        -> 1,2
   something -> n/a 
```

您检索每个标记的模式 ID 并将它们放入一个临时数据结构中，该数据结构计算每个 ID 的频率，例如哈希（例如 a `std::unordered_map<id_type,std::size_t>`）。

然后，您按频率对其进行排序，以发现规则 1 被找到了两次，而规则 2 被找到了一次。

然后**，您按照频率的顺序将找到的规则应用于**输入文本。在这里，您使用正则表达式库或类似的东西来生成匹配项。最频繁的规则与输入文本有最多的共同标记，因此它很可能匹配得很好。

该方法的**总体优势**是您不需要将所有规则应用于输入，而只需将那些与输入至少具有一个共同标记的规则应用，甚至在那些您按照每个规则有多少标记的顺序执行的规则中与输入共享，一旦找到匹配规则，您可能会中断匹配过程的其余部分（或不 - 取决于您是否想要每种情况下的*所有*匹配规则，或者只需要一个非常好的匹配）。

**改进**以上执行基于令牌的规则预选。相反，您可以像这样连接所有规则：

```
what is *||where is *||do * need to||... 
```

然后你构造这个连接字符串的后缀数组。

然后，给定一个输入字符串，将其与**后缀数组**进行匹配，以识别所有子字符串匹配项，包括小于一个标记或跨越多个标记的匹配项。在上面的例子中，我假设通配符`*`和`$`包含在后缀数组中，当然输入字符串的任何部分都不会匹配它们。您可以很好地将它们从后缀数组中排除或用虚拟字符替换它们。

一旦确定了匹配项，就可以按长度对它们进行排序。您还必须将连接字符串中的匹配位置映射到规则 ID。这很容易通过维护规则相对于连接字符串的起始位置数组来实现；还有一些基于索引位向量的高度优化的方法（如有必要，我可以详细说明）。

获得匹配规则 ID 后，您可以执行与倒排索引案例相同的操作：使用标准正则表达式匹配（或类似方法）应用匹配规则。

同样，这种方法相对复杂，并且仅在您拥有大量规则时才有意义，并且基于标记（或基于子字符串）的查找可能会显着减少候选规则的数量。从您给出的示例规则中，我假设在这种情况下是后者，但是如果您正在处理的规则数量（大约 10k）证明这种方法是合理的，我不确定。如果规则的总数在 100ks 或数百万个，这可能更有意义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T16:52:40.717

如果空间不是问题，那么您可以在我的脑海中执行以下操作。

在树中的这一点上创建一个具有可能字符的子级的树，其中当前级别是字符串的索引。树的第一级是索引级别 0，或者更确切地说是字符串中的数组索引 0。

每个级别都是字符串的索引，因此根节点的索引为 0，它的子节点的索引为 1。每个节点的 N 个子节点的数量等于字符串中此时可能出现的字符数。

所以，假设你有一组可能的 [ "a", "b", "c" ] 它会有三个孩子。然后假设您想找到字符串“ab”的可能匹配项，您将递归到具有“a”路径的孩子并从那里开始。

如果在到达叶节点之前到达字符串的末尾，那么可能的字符串列表就是当前节点上所有子节点的整个子树。

希望这有任何意义，但它看起来有点像一棵霍夫曼树，但每片叶子都有一个潜在的字符串可供选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-22T06:07:17.790

我会接受 Kernighan 和 Pike 的建议，选择一个合理的算法，然后蛮力进行。

你所有的例子都在寻找“最长的前缀”，这对我来说是一个简单的树而不是后缀树。鉴于您只需要存储约 10k 字符串，您应该能够使用嵌套的 STL 映射在最多几个小时内实现一个 char-trie。

除非内存很紧或性能确实很关键，否则这应该没问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-22T12:32:09.050

这不是你要问的问题。你想要一些预先煮好的东西。但...

这需要有多复杂？如果我试图做你所要求的，我会尝试一些空间密集但时间密集的东西。

我会（并且已经）从字母表索引为 0 的树开始。

然后每个子节点将是一个单词（字典）。

然后，它的每个子节点都将是一个潜在的字符串段匹配，例如，知道“圆形”几乎从不直接跟随“方形”。你可能会说，“把圆钉放在方孔里”，但“圆”后面的词是“钉”。所以“round”的段匹配将是“round peg”、“round cup”、“round ball”。我也会删除文章，因为它们对句子没有任何意义（通常）。上面的段落将翻译为“每个子节点都是单词”。

不过，我会添加一个启发式方法，因为当您拥有这么多数据时，即使是高级 B 树也会变慢。在搜索非常大的数据集时，我已经看到它们减慢到一分钟或更长时间。

这是假设您不想实际使用数据库，除非您想在 ASM 中编码，否则这可能是最快的。

# jquery - Plupload & jQuery 在 IE 中不起作用

> ID：13364837
> 
> 赞同：1
> 
> 时间：2012-11-13T16:41:47.520
> 
> 标签：jquery, plupload

Plupload 适用于所有浏览器栏 IE。`#photo-upload`在 IE 中按下链接后，文件浏览器无法打开。的实例`uploader`肯定是正确创建的 - 使用开发工具检查。

非常感谢任何解决方案！

**这是我们用来创建上传器的脚本：**

```
 var uploader = new plupload.Uploader({
            runtimes : 'gears,html5,flash,silverlight,html4',
            browse_button : 'photo-upload',
            container : 'img-container',
            url : 'productPhoto.php?id=<?=$_GET["id"];?>',
            max_file_size : '5mb',
            flash_swf_url : '/dev/plupload/js/plupload.flash.swf',
            silverlight_xap_url : '/dev/plupload/js/plupload.silverlight.xap',
            unique_names : true,
            filters : [{title : "Image files", extensions : "jpg,gif,png"}],
            multipart_params: {type:1},

            // Post init events, bound after the internal events
            init : {
                UploadProgress: function(up, file) {
                    // Called while a file is being uploaded
                    $("#bar").css("width",file.percent+"%");
                },
                FilesAdded: function(up, files) {
                    $(".progress").slideDown();
                    uploader.start();
                    up.refresh(); // Reposition Flash/Silverlight
                },
                UploadComplete: function(up, file, info) {
                    // Called when a file has finished uploading
                    setTimeout(function(){
                        $(".progress").slideUp();
                        $("#bar").css("width","0");
                        document.location.reload();
                    },2000);
                },
                Error: function(up, args) {
                    // Called when a error has occured
                    alert(args);
                    up.refresh(); // Reposition Flash/Silverlight
                }
            }
        });
        uploader.init(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:13:18.390

链接在下拉列表中的问题 - 在开始时隐藏。链接必须可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T15:01:39.180

我可以建议避免将您的上传控件放在隐藏的容器中。

```
<div class="container" style="display:none">
    <a id="pickfiles" href="#">[Select files]</a>
    <a id="uploadfiles" href="#">[Upload files]</a>
</div> 
```

在上面的例子中，容器 div 有一个样式元素声明`display:none`属性。这就是它在 IE 中不起作用的原因。

只需将其更改为`display:block`或删除样式元素，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T16:45:22.480

我在 IE 8 中在页面加载时隐藏 plupload div 时遇到了同样的问题。我选择将 div 绝对定位在屏幕之外，而不是 display:none，然后在需要时传入新的顶部/左侧坐标：

```
 #plupload {
        display: block;
        position:absolute;
        top:-999px;
        left:-999px;
        background:#fff;
        border:1px solid #c8c8c8;
        padding:10px;
        z-index: 951;
    }

    $('#some-button-to-open-plupload-widget').button().click(function() {
         var css = {"top":"175px", "left":"175px"};
         $("#plupload").css(css);
    });

    $('#some-button-to-close-plupload-widget').button().click(function() {
         var css = {"top":"-999px", "left":"-999px"};
         $("#plupload").css(css);
    });

    <div id="plupload">
       <a href="" class="ui-icon ui-icon-close" id="close"></a>
       <div id="uploader" style="display:block">
           <p>Your browser doesn't have Flash, Silverlight or HTML5 support.</p>
       </div>    
    </div> 
```

# android - 从片段创建操作栏选项卡

> ID：13364839
> 
> 赞同：4
> 
> 时间：2012-11-13T16:41:48.370
> 
> 标签：android, android-fragments, actionbarsherlock

是否可以从片段创建 ActionBar 选项卡？

我正在使用 ABS 库并有 2 个片段。第二个片段中的数据正在动态变化，是否可以动态显示片段中的选项卡？

```
public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);        
         getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            for (int i = 1; i <= 3; i++) {
                ActionBar.Tab tab = getSupportActionBar().newTab();
                tab.setText("Tab " + i);
                tab.setTabListener(this);
                getSupportActionBar().addTab(tab);
            }
    } 
```

这是我拥有的代码，我得到了`The method getSupportActionBar() is undefined for the type`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T17:07:25.300

没关系，

刚刚使用 getSherlockActivity().getSupportActionBar()

完美运行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-18T09:56:24.490

你必须投射到你的活动（比如`ActivityExtendsActionBarActivity`），它扩展了`ActionBarActivity`：

```
((ActivityExtendsActionBarActivity)getSupportActionBar()).setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

# javascript - 播放 HTML5 视频时不加载 XML 文件

> ID：13364842
> 
> 赞同：0
> 
> 时间：2012-11-13T16:41:55.683
> 
> 标签：javascript, jquery, xml, html5-video

我应该能够加载相关的 XML 文件并在视频播放时显示 XML 文件的内容。

我错过了什么？

[演示](http://jsfiddle.net/3fJqZ/19/)

**脚本**

```
var XML_PATH = "http://www.adjustyourset.tv/interview/cuepoints.xml";

var cuepoints=new Array();

$(document).ready(function() {
    loadXML();
});

function loadXML()
{
    $.ajax({
            type: "GET",
            url: XML_PATH,
            dataType: "xml",
            success: function onXMLloaded(xml) 
            {
                // set cuepoints
                cuepoints=$(xml).find("cuepoints");

                // loop for each cuepoint
                $(xml).find('cuepoint').each(function loopingItems(value)
                {   
                    // create an object
                    var obj={
                    timeStamp:$(this).find("timeStamp").text(),
                    desc:$(this).find("desc").text(),
                    thumbLink:$(this).find("thumbLink").text(),
                    price:$(this).find("price").text()};
                    cuepoints.push(obj);

                    $("#mycustomscroll").append('<ul>');
                    $("#mycustomscroll").append('<li id="item"><strong>'+(value+1)+"</strong><br/><strong>Time Stamp: </strong>"+obj.timeStamp+'</li>');
                });

                // close </ul>
                $("#mycustomscroll").append('</ul>');
                // append li tags
                $("#leftcolumn").append('<li src="'+cuepoints[0].desc+'"> <p src="'+cuepoints[0].thumbLink+'" /></li>');

                $("#price").append(cuepoints[0].price);

            }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:57:14.607

没有什么在召唤`init()`。

改变

```
function init() {
    // call loadXML function
    loadXML();
} 
```

到

```
$(document).ready(function() {
    loadXML();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:41:10.683

行。现在我明白了这个问题。您可以从 ajax 请求中获取 xml，但无法正确解析它。

如果你关心这段代码

```
 $(xml).find('cuepoint').each(function loopingItems(value)
                {    
            // create an object
                    var obj={timeStamp:$(this).find("timeStamp").text(), desc:$(this).find("desc").text(), thumbLink:$(this).find("thumbLink").text(), price:$(this).find("price").text()};
                    cuepoints.push(obj);

                    // append <ul> and timeStamp
                    $("#mycustomscroll").append('<ul>');
                    $("#mycustomscroll").append('<a><li id="item"><strong>'+(value+1)+"</strong><br/><strong>Time Stamp: </strong>"+obj.timeStamp+'</li></a>');
                }); 
```

那么我建议你使用`this.getAttribute('timeStamp') or $(this).attr('timeStamp')` 而不是`$(this).find("timeStamp").text()`，你不会从中得到任何东西，因为这是一个属性而不是一个元素。

# python - Python正则表达式用空格代替连字符

> ID：13364850
> 
> 赞同：1
> 
> 时间：2012-11-13T16:42:14.263
> 
> 标签：python, regex

我得到一个可能有一个或多个日期的 lob 对象。如果第一个日期为空，则将日期视为表格，我得到一个 chr(20)。ex 数组的第三个元素有一个日期，前两个空的日期看起来类似于“”、“、”、“01/01/01 01:01:01”。我想将日期时间字符串中的“”更改为不同的内容（“-”），这样我就可以轻松地区分空元素和中间有空格的实际日期时间值。全新的 python 和正则表达式不会被认为是我的强项。

```
>>> x = '01/01/12 17:11:11'
>>> y = re.sub( r"\d{2} \d{2}", r"\d{2}-\d{2}",x)
>>> print (x,y)
01/01/12 17:11:11 01/01/\d{2}-\d{2}:11:11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:46:51.637

使用前瞻和后瞻断言：

```
>>> import re
... x = '01/01/12 17:11:11 random junk 01/08/10 12:01:33'
... y = re.sub(r'(?<=\d{2}) (?=\d{2})', '-', x)
... y
103: '01/01/12-17:11:11 random junk 01/08/10-12:01:33' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:44:14.233

你需要正则表达式吗？怎么样`'-'.join(x.split())`？

否则，您可能需要使用组：

```
y = re.sub( r"(\d{2})\s+(\d{2})", r"\1-\2",x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:45:57.317

Regular expressions are overkill here. Just use the string.replace() function:

```
>>> a='01/01/12 17:11:11'
>>> a.replace(' ','-')
'01/01/12-17:11:11' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T16:44:04.670

你不能只使用：

```
x = x.replace(' ', '-') 
```

# php - PDO 和存储过程的无缓冲查询错误

> ID：13364852
> 
> 赞同：0
> 
> 时间：2012-11-13T16:42:15.290
> 
> 标签：php, mysql, sql, stored-procedures, pdo

我正在重构一个项目，我正在做的部分工作是将内联 SQL 替换为对存储过程的调用。我遇到了一个问题。我正在使用 PHP 5.3.5 版和 MySQL 5.0.7 版

该项目有成员，成员可以有请求。我想获取特定成员的所有请求并将它们作为 Request 对象数组返回。

我创建了一个静态方法，该方法调用一个返回所有请求 id 的存储过程，然后我用它来实例化新的请求对象。问题是我收到关于无缓冲查询的错误，这是错误：

```
General error: 2014 Cannot execute queries while other unbuffered queries are active. Consider using PDOStatement::fetchAll(). Alternatively, if your code is only ever going to run against mysql, you may enable query buffering by setting the PDO::MYSQL_ATTR_USE_BUFFERED_QUERY attribute 
```

我已按照错误消息的建议完成并使用了 fetchAll，但我仍然遇到这个问题。以下是相关 PHP 的简化版本：

```
class Request
{
    public function __construct($request_id)
    {
        //as you can see this is still inline 
        $db = Database::get_instance();
        $sql = "SELECT field1,field2,field3 FROM requests WHERE request_id = ?";
        $stmt = $db->prepare($sql);
        $stmt->execute(array($request_id));
        $row = $stmt->fetch(PDO::FETCH_ASSOC);
        if(!empty($row))
        {
            //populate properties
            foreach($row as $key=>$value)
            {
                $this->$key = $value; 
            }   
        }

    }

    public static function get_requests_by_member_id($member_id)
    {
        //array to hold results
        $requests = array();
        //this is just a PDO object
        $db = Database::get_instance();
        $sql = "CALL get_requests_by_member_id(?)";
        $stmt = $db->prepare($sql);
        /bind the param 
        $stmt->bindParam(1,$member_id,PDO::PARAM_INT,10);
        $stmt->execute();
        //iterate through adding new Request objects to the array       
        foreach($stmt->fetchAll(PDO::FETCH_ASSOC) as $row)
        {
            //here is where the problem occurs
            $requests[] = new self($row['request_id']);
        }

        return $requests;   

    }

} 
```

我的存储过程的简化版本：

```
delimiter $$

CREATE PROCEDURE get_requests_by_member_id(member_id_in INT)
BEGIN
    SELECT request_id 
    FROM requests 

    WHERE cr.member_id = member_id_in;
END$$
delimiter ; 
```

正如我上面提到的，当我尝试实例化一个新的请求以添加到数组时，就会出现问题。这似乎会导致我看到的光标问题，但是因为我使用了 fetchAll() 应该不能解决问题吗？是否有处理这种情况的最佳实践？任何建议将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:33:41.543

完成语句后，您应该调用`closeCursor()`，如下所示：

```
$stmt->closeCursor(); 
```

通过关闭光标，您可以使连接可​​用于新请求。**[有关详细信息，请参阅PDOStatement::closeCursor](http://php.net/manual/en/pdostatement.closecursor.php)**上的 PHP 文档。

# java - 从泛型创建类对象

> ID：13364853
> 
> 赞同：0
> 
> 时间：2012-11-13T16:42:14.440
> 
> 标签：java, class, generics, downcast

在泛型方法中，我似乎无法在运行时访问该方法的泛型类型（错误：无法从类型变量中选择）。

```
public <A> A get(Animal a) {
    Class ac = a.getClass();
    if(ac.isAssignableFrom(A.class)) {  // <- not working!
        return (A) a;
    } else {
        // error handling
    }
} 
```

我这样做的原因是能够安全地降低内容，例如：

```
Animal a = new Dog();
Dog d = get(a);    // <- OK
Cat c = get(a)     // <- incompatible types, caught by else block 
```

我发现了 9 多年前的一个帖子，问题完全相同： [https ://forums.oracle.com/forums/thread.jspa?threadID=1184291](https://forums.oracle.com/forums/thread.jspa?threadID=1184291)

在那里，解决这个问题的想法是在构造函数中提供一个 Class 对象，并使用这个变量来检查它是否是可赋值的。这似乎是一个非常愚蠢的解决方案，因为您可以将任何类放在那里，而所有漂亮的类型检查都是无用的......

所以，同样的问题：为什么要`<any>.class`在构造函数中提供，而在运行时类型`<A>`是完全已知的？如何访问 的实际类型`<A>`？

* * *

**找到了一个非常丑陋的解决方案：**

```
public <A> A get(Animal a, Class<A> clazz) {
    // same as above...
} 
```

因此，现在您必须提供一个`Class`，但您可以在此处插入的唯一有效类是您的返回类型。但至少现在它是类型安全的。

完全不方便...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:44:12.373

与您的断言相反， A 的类型在运行时是未知的*。*查看有关[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)的文档以获取更多详细信息。

简而言之，运行时知道您有一个类型为 的对象`Whatever`。`Whatever<A>`但是，它无法区分`Whatever<B>`您是否明确提供信息。这就是为什么建议您提供一个类对象。请注意，这与编译阶段不同，其中完整的类型信息是已知的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:45:43.083

It is not possible to select the generic type at runtime.

See here for a possible solution: [Access generic type parameter at runtime?](https://stackoverflow.com/questions/2993678/access-generic-type-parameter-at-runtime)

# sql - 使用 INNER JOIN 删除 PostgreSQL 错误

> ID：13364855
> 
> 赞同：5
> 
> 时间：2012-11-13T16:42:19.270
> 
> 标签：sql, postgresql, sql-delete, cascading-deletes

# Postgres 8.4

```
DELETE
FROM processing_transaction AS pt 
INNER JOIN processing_transaction_movement AS ptm 
ON pt.processing_transaction_id = ptm.processing_transaction_id
LEFT OUTER JOIN test_package tesp ON pt.test_package_id = tesp.test_package_id
LEFT OUTER JOIN test_batch tbat On tesp.test_batch_id = tbat.test_batch_id
WHERE pt.processing_transaction_type = 'TEST'; 
```

我收到以下错误：

> 错误：>>INNER<< LINE 1 处的语法错误：DELETE FROM processing_transaction AS pt INNER JOIN processi...

请你能帮我找出我的 SQL 查询中的错误吗

* * *

感谢您对@desislavkamenov @jan 的支持。现在我用这个：

> 开始工作；
> 
> 从 processing_transaction AS pt 使用 processing_transaction_movement AS ptm，test_package testp，test_batch tbat 删除 pt.processing_transaction_type = 'TEST'；AND pt.processing_transaction_id = ptm.processing_transaction_id AND pt.test_package_id = tesp.test_package_id AND tesp.test_batch_id = tbat.test_batch_id
> 
> 回滚；

但是我需要从两个表**（processing_transaction 和 processing_transaction_movement）**中删除数据，我一直在寻找这样的想法，发现我可以使用“ON DELETE CASCADE”来做到这一点。但我不知道如何在这里使用它。所以请再次帮助我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T16:49:14.410

您不能在 DELETE 语句中使用 JOIN。而是使用 USING 并将第二个表放在那里。像这样的东西应该可以工作（对不起，但我无法测试它，所以在`BEGIN`交易后运行它并检查结果是否符合您的预期，然后再进行交易`COMMIT`；`ROLLBACK`如果不是）。

```
DELETE
FROM processing_transaction AS pt 
USING processing_transaction_movement AS ptm, test_package tesp, test_batch tbat 
WHERE pt.processing_transaction_type = 'TEST'
AND pt.processing_transaction_id = ptm.processing_transaction_id
AND pt.test_package_id = tesp.test_package_id
AND tesp.test_batch_id = tbat.test_batch_id 
```

这是文档的链接。 [http://www.postgresql.org/docs/current/static/sql-delete.html](http://www.postgresql.org/docs/current/static/sql-delete.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:47:01.120

据我所知，`JOIN`语句中不支持语法`DELETE`。根据[DELETE 的文档](http://www.postgresql.org/docs/9.2/interactive/sql-delete.html)，您可以使用某些类型的其他子查询；特别是`USING`语法可能很有趣。该页面上有一些示例用于`DELETE`查看其他表的查询。

# php - 嵌入具有 alpha 透明度的 PNG 时的“粒化”效果

> ID：13364857
> 
> 赞同：0
> 
> 时间：2012-11-13T16:42:31.990
> 
> 标签：php, transparency, gd, tcpdf, imagick

我正在尝试使用 TCPDF 在 pdf 文件上添加透明图像。但是，该功能仅在我调用时才有效

```
 $this->Image($markupfile, 0, 0,  $s['w'],$s['h'] , '', '', '', true, 55); 
```

dpi（最后一个参数）非常低，小于 60 左右。这导致下图显示了某种颗粒效果。我无法将 dpi 设置得更高，因为这会中断 php 执行，这似乎是另一个问题。有人知道可能出了什么问题吗？**[查看tcpdf](http://sourceforge.net/p/tcpdf/code/ci/146e4337cac1f27eb9ee1328e2e2091e5cd1fc4f/tree/tcpdf.php)**的源代码，它使用**GD**或**imagick**库来嵌入 png。

![透明度问题](../Images/2716c4be0fe6821058f0a4aa81be7217.png)

# java - 执行 Maven 插件到命令行

> ID：13364860
> 
> 赞同：4
> 
> 时间：2012-11-13T16:42:44.587
> 
> 标签：java, command-line, smartcard, exec-maven-plugin

我有一个在 NetBeans/Maven 中开发的应用程序，可以通过命令行启动：

```
mvn exec:exec "-Dexec.executable=C:\\Java\\jdk1.6.0_33\\bin\\java.exe" "-Dexec.args=-Dlog4j.properties=... -classpath %classpath com.xxx.MyLauncher" -Dexec.classpathScope=runtime -Dexec.workingdir= 
```

现在我需要通过标准的 java 命令行方法运行应用程序，例如：

```
java -Dlog4j.properties=... -jar myapp-1.2-SNAPSHOT.jar 
```

不幸的是，这不能以相同的方式工作，因为我得到以下异常：

```
opencard.core.util.OpenCardPropertyLoadingException: property file not found 
```

问题：

*   使用 Exec-Maven-plugin 启动应用程序和在命令行上执行标准 java 有什么区别？
*   有没有一种简单的方法可以将 Maven 执行脚本转换为标准命令行？
*   如何成功运行应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:55:57.897

问题是由这个[错误](http://jira.codehaus.org/browse/MASSEMBLY-334)引起的类路径。用 maven-shade-plugin 替换 maven-assembly-plugin 解决了这个问题。

# java - 没有 Thread.sleep(...) 调用，线程代码无法正常工作

> ID：13364863
> 
> 赞同：2
> 
> 时间：2012-11-13T16:42:54.713
> 
> 标签：java, multithreading

我有以下代码：

```
public class ThreadTest implements Runnable {
    public int ThrCount    = 0;

    public void ThrCountIncr() {
        while (true) {
            ThrCount++;
            System.out.println(ThrCount);
            try {
                Thread.currentThread().sleep(500);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    public void run() {
        while (true) {
            if (ThrCount > 10) {
                System.out.println(ThrCount + "\n Thread finished");
                System.exit(1);
            }
            try {
                Thread.currentThread().sleep(100);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

但是，当我从 中删除此行时`run`，它会停止工作：

```
Thread.currentThread().sleep(100); 
```

首先，我启动线程，然后使用`ThrCountIncr`.

```
ThreadTest Thrtest = new ThreadTest();
Thread thr = new Thread(Thrtest);
thr.start();
Thrtest.ThrCountIncr(); 
```

线程检查`ThrCount`变量值，如果大于 10，则停止程序。没有`sleep(100)`，线程不会停止程序，我认为它不会检查变量值。为什么调用`sleep`使此代码起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T16:44:52.640

即使使用`Thread.sleep()`它也可能无法正常工作。这是因为您没有正确同步对共享`ThrCount`变量的访问。

如果您设置该变量`volatile`，您应该不会再看到任何问题。但是，由于`++`操作不是原子的，因此它可能不会精确循环 10 次。

理想情况下，您应该使用 AtomicInteger 并使用它的`incrementAndGet()`方法。

另请注意：

*   Java 命名约定：变量和方法名称应以小写 ( `thrCount`,`thrCountIncr()`
*   `sleep`是一个静态方法，所以你可以简单地调用`Thread.sleep(...);`它，它会在当前线程中休眠。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T16:44:33.483

如果你的线程不休眠，其他线程可能无法工作，所以里面的循环`ThrCountIncr`随时都可能卡住（可能在第一个`sleep`或第一个`println`）。

**永远不要让线程在没有任何睡眠或等待的情况下循环。**

另请注意，`ThrCount++;`如果您不使用同步保护它可能会失败，因为它不是原子操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T16:59:05.913

当循环迭代超过 10,000 次时，它可以通过 JIT 进行优化。在第二个线程的情况下，线程的代码不会修改该字段，因此 JIT 可以优化掉`if`条件或确定它始终运行。

如果您创建该字段，`volatile`这会阻止 JIT 进行此类优化。

# regex - RegExp.exec 如何填充其结果数组

> ID：13364866
> 
> 赞同：0
> 
> 时间：2012-11-13T16:43:02.883
> 
> 标签：regex, proof-general

我正在使用一些正则表达式，并且在查看我的一些匹配项时，我很好奇为什么 exec 函数会产生与它一样多的结果。

我只是想稍微澄清一下操作的内部工作原理，以便我对*为什么*正则表达式返回*n 个*结果感到更舒服，而不是仅仅接受它确实如此。

前任。

```
var invalidValues = new RegExp(
"\\bZIP or City & State$|" +
"\\bCity & State or ZIP$|" +
"\\bEm[ai][ia]l Address(\\s\\(Optional\\)|$)|" +
"^$", "gi"); 

invalidValues.exec("Zip or City & State");
//returns ["Zip or City & State", undefined] 
```

在上面的示例中，我明白了为什么它匹配“邮编或城市和州”，但我不知道为什么会产生第二个匹配未定义的值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:54:05.270

我不熟悉 Proof General，但看起来`exec`一次只返回一个*匹配*项。您看到的结果是：

*   `"Zip or City & State"`— 完全匹配的子串。
*   `undefined`—`(\\s\\(Optional\\)|$)` [捕获组捕获](http://www.regular-expressions.info/brackets.html)的子字符串。在这种情况下，或者*未*捕获，因为该捕获组位于不匹配的交替项内。

要删除后者，您可以（大概）将 更改`(`为`(?:`，将其标记为非捕获组。

要检索后续匹配项，您可能需要`exec`多次调用。

# python - 在 pytest 中，如何确定测试是否失败？（来自“请求”）

> ID：13364868
> 
> 赞同：15
> 
> 时间：2012-11-13T16:43:03.917
> 
> 标签：python, testing, selenium, pytest

我正在使用 Selenium 和 PYTEST 来测试一个站点。我想在测试失败时（并且仅在失败时）截取页面的屏幕截图。

有没有办法我可以做到这一点？文档对此很安静（或者我找不到）。我会假设它会像

```
request.function.failed 
```

它会返回一个布尔值或其他东西。

这就是我想做的：

```
@pytest.fixture()
def something(request):
    if request.function.failed:
        print "I failed" 
```

当然，这将被添加到终结器中。可以做到吗？使用 pytest 2.3.3

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T08:25:32.183

可以做，但不能直接做。我刚刚[在文档中添加了一个示例](https://docs.pytest.org/en/latest/example/simple.html#making-test-result-information-available-in-fixtures)。默认情况下使这更容易可能是有意义的，即不需要使用 conftest.py 钩子。如果您同意，请[提出问题](https://bitbucket.org/hpk42/pytest/issues/new)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-07T01:14:44.257

我必须在每个模块级别上做类似的事情。在检查了现有的解决方案后，我对它们的复杂性感到有些惊讶。这是我想出的解决此问题的方法：

```
import pytest

@pytest.fixture(scope="module", autouse=True)
def failure_tracking_fixture(request):
    tests_failed_before_module = request.session.testsfailed
    yield
    tests_failed_during_module = request.session.testsfailed - tests_failed_before_module 
```

可以通过使夹具成为功能级别的夹具来调整它以执行您想要的操作。

希望这可以帮助！

# javascript - 有没有办法 *getRotationAngleAtLength(in float distance)* 类似于 getPointAtLength(in float distance)

> ID：13364872
> 
> 赞同：1
> 
> 时间：2012-11-13T16:43:14.013
> 
> 标签：javascript, svg, d3.js, smil

嘿，伙计们和极客们！

我对 Web 3.0 有这个革命性的想法，呵呵。我将创建一个 SVG-UI-lib 一个 jQuery-UI。为了使某些功能成为可能，我需要 fork/contribute 到 d3.js。IE。我希望能够沿曲线/路径设置动画/定位。

是的，我知道有 Raphael，但是 d3 在 github 上，我更喜欢 d3s 的语法......

所以，我现在正在考虑的是如何创建实际上不是直线而是路径的滚动条——非常“华丽”，对吧？

因此，我找到了一种使用 SMIL 的方法：使用 beginElementAt() 和 endElementAt() 或 pausAnimations() 的某种组合将允许我沿路径设置动画......而没有时间通过​​利用路径精确到该位置。~~pathLength attr~~ .getTotalLength() 方法 --- 使用旋转属性我什至可以让它沿着路径倾斜度旋转

因此，在这里的另一篇文章中，我发现了美妙的方法 getPointAtLength(0..1) 这将使沿着路径创建滚动条变得很容易......而且我真的不需要旋转，因为它还不错如果手柄始终以 90 度的方式定向，以提示其行驶方向。

但无论如何，我想知道，

**_ 有没有像 getPointAtLength(0..1) 这样的方法来表示方向？？？_**

干杯，乔汉内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:55:06.960

我已经让它工作得非常粗略：http: [//jsfiddle.net/UT69H/18/](http://jsfiddle.net/UT69H/18/)

这真的很紧张，但它会随着路径旋转。请注意，我将 mousemove 处理程序移动到了 body 元素，这样如果您的鼠标移出框本身，它就不会突然停止。

```
bod.on "mousemove", () ->
    if mousedown
         pos = getPosHandle { x: d3.mouse(h[0][0])[0], y: d3.mouse(h[0][0])[1] }  
         pos1 = getPosHandle { x: d3.mouse(h[0][0])[0], y: d3.mouse(h[0][0])[1] - 1 } 
         pos2 = getPosHandle { x: d3.mouse(h[0][0])[0], y: d3.mouse(h[0][0])[1] + 1 }
         ang = Math.round(Math.atan2(pos2.y - pos1.y, pos2.x - pos1.x) * 180 / Math.PI) - 90
         h.attr "transform", "rotate(#{ang} #{pos.x} #{pos.y})"
         h.attr "x", (pos.x - h.attr("width") / 2)
         h.attr "y", (pos.y - h.attr("height") / 2) 
```

这更好一点：http: [//jsfiddle.net/UT69H/19/](http://jsfiddle.net/UT69H/19/)

```
bod.on "mousemove", () ->
    if mousedown
         pos = getPosHandle { x: d3.mouse(bod[0][0])[0], y: d3.mouse(bod[0][0])[1] }  
         pos1 = getPosHandle { x: d3.mouse(bod[0][0])[0], y: d3.mouse(bod[0][0])[1] - 1 } 
         pos2 = getPosHandle { x: d3.mouse(bod[0][0])[0], y: d3.mouse(bod[0][0])[1] + 1 }
         ang = Math.round(Math.atan2(pos2.y - pos1.y, pos2.x - pos1.x) * 180 / Math.PI) - 90
         h.attr "transform", "rotate(#{ang} #{pos.x} #{pos.y})"
         h.attr "x", (pos.x - h.attr("width") / 2)
         h.attr "y", (pos.y - h.attr("height") / 2) 
```

您可以通过进一步间隔测试点来减少抖动：http: [//jsfiddle.net/UT69H/21/](http://jsfiddle.net/UT69H/21/)

```
bod.on "mousemove", () ->
    if mousedown
         pos = getPosHandle { x: d3.mouse(bod[0][0])[0], y: d3.mouse(bod[0][0])[1] }  
         pos1 = getPosHandle { x: d3.mouse(bod[0][0])[0], y: d3.mouse(bod[0][0])[1] - 4 } 
         pos2 = getPosHandle { x: d3.mouse(bod[0][0])[0], y: d3.mouse(bod[0][0])[1] + 4 }
         ang = Math.round(Math.atan2(pos2.y - pos1.y, pos2.x - pos1.x) * 180 / Math.PI) - 90
         h.attr "transform", "rotate(#{ang} #{pos.x} #{pos.y})"
         h.attr "x", (pos.x - h.attr("width") / 2)
         h.attr "y", (pos.y - h.attr("height") / 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:34:00.090

好的，我的问题实际上是/是否有一种相当程序化/javascript 的方式来执行此操作，不涉及 SMIL 或至少不涉及动画功能。滥用动画标签只是为了设置一个值似乎有点 hacky...

好吧，我发现了另一个标签，它也是 SMIL，所以不是纯 js，但它看起来更像是为此目的而设计的东西：

[http://www.w3.org/TR/SVG11/animate.html#SetElement](http://www.w3.org/TR/SVG11/animate.html#SetElement) ...您是否可以使用“正常”动画标签的所有属性/参数，但不涉及 - 至少我按它的名字猜——首先是动画，然后立即停止。它将使我能够只说 begin="onBegin" 然后调用 beginElement() 方法。

**编辑**：好的，设置不是很酷。它无法使用我需要沿路径设置动画的 animateMotion-specific-props

# actionscript-3 - 从 AS3 中的 Dictionary 继承有什么技巧？

> ID：13364875
> 
> 赞同：3
> 
> 时间：2012-11-13T16:43:16.893
> 
> 标签：actionscript-3, apache-flex, inheritance, dictionary

给定以下代码：

```
import flash.utils.Dictionary;

import mx.collections.ArrayCollection;
import mx.controls.Alert;

public class CDictionary extends Dictionary
{
    public function CDictionary(weakKeys:Boolean=false)
    {
        super(weakKeys);
    }
} 
```

这会引发错误 #1056：

```
m_cdictNearIDs = new CDictionary();
m_cdictNearIDs[4] = "f"; 
```

但这不是：

```
m_cdictNearIDs = new Dictionary();
m_cdictNearIDs[4] = "f"; 
```

（在每种情况下，它都是一个成员变量，它被声明为与它被实例化的类型相同。）Wth？从字典继承的技巧是什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T16:49:48.370

您必须将您的班级定义为`dynamic`：

```
package
{
    import flash.utils.Dictionary;

    public dynamic class CDictionary extends Dictionary
    {
        public function CDictionary(weakKeys:Boolean=false)
        {
            super(weakKeys);
        }
    }
} 
```

# sql - 如何在日期类型的列之间应用

> ID：13364877
> 
> 赞同：0
> 
> 时间：2012-11-13T16:43:23.963
> 
> 标签：sql, sql-server-2008

我有一个简单的 SQL Server 2008 表，其中有一列`ourdate`类型为`date`.

所以我尝试应用`between`日期值，但它不起作用并给我一个错误。

> *消息 241，级别 16，状态 1，第 1 行
> 从字符串转换日期和/或时间时转换失败*

像这样的代码：

```
select * 
from [ComplainsDb].dbo.dateTB 
where ourdate between '2012-11-01' AND '2012-12-31'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:47:32.113

您需要使用对所有语言和区域设置都**安全的日期字符串格式。**

ISO-8601 格式`YYYYMMDD`（注意：**没有**破折号！）适用于所有情况 - 试试这个：

```
select * 
from [ComplainsDb].dbo.dateTB 
where ourdate between '20121101' AND '20121231'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:52:30.500

尝试转换为日期如下：

```
select *
from dateTB  
where ourdate between convert(datetime,'2012-11-01') and convert(datetime,'2012-12-31');

select *
from dateTB  
where convert(datetime,ourdate) between '2012-11-01' and '2012-12-31'; 
```

你也可以使用 cast 如下

```
select *
from dateTB  
where ourdate between cast('2012-11-01' as datetime) and cast('2012-12-31' as datetime);

select *
from dateTB  
where cast(ourdate as datetime) between '2012-11-01' and '2012-12-31'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T16:50:34.140

您需要将字符串转换为日期：

```
select * 
from [ComplainsDb].dbo.dateTB 
where ourdate between Cast('2012-11-01' AS Date) AND Cast('2012-12-31' AS Date); 
```

# c# - 在 C# 中编辑 GIF

> ID：13364883
> 
> 赞同：7
> 
> 时间：2012-11-13T16:43:53.737
> 
> 标签：c#, animation, frame, gif

如何获取 GIF 动画的持续时间（播放时间）？

这是我的代码：

```
GifTime = PoczatkowyGIF.GetFrameCount(FrameDimension.Time); 
//GifTime is a double; PoczatkowyGIF is my gif image. 
```

`GifTime`不准确。我的动画是3.8s，但是`GifTime`是3.9s。我尝试的另一个动画是0.88s，但`GifTime`为0。那么我如何获得动画时间？另外，如何编辑 GIF 的第一帧时间，并在现有的 GIF 中添加具有指定时间的帧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:16:19.390

在以下代码段中，您可以看到如何计算总持续时间，即累加每一帧的持续时间：

```
for (int f = 0; f < frameCount; f++)
{
  this_delay = BitConverter.ToInt32(image.GetPropertyItem(20736).Value, index) * 10;
  // Minimum delay is 100 ms
  delay += (this_delay < 100 ? 100 : this_delay);  
  index += 4;
} 
```

请注意，帧持续时间不能短于 100 毫秒，这可能会导致您的计算差异。

您可以阅读[这篇](http://madskristensen.net/post/examine-animated-gife28099s-in-c)关于检查 .GIF 的帖子，您可以在其中找到其余代码。

此外，要编辑动画图像的最后一帧，您可以使用

```
gifImage.SelectActiveFrame(dimension, first_frame_index); 
```

`SelectActiveFrame`将允许您编辑图像，更改指定的（在您的情况下为第一个）帧。

我对此并不完全确定，但该框架不支持添加帧，为此我使用[MagickNet](http://midimick.com/magicknet/)重新编码了一个新的 GIF。您可能还想看看[NGif](http://www.codeproject.com/Articles/11505/NGif-Animated-GIF-Encoder-for-NET)作为替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-27T15:46:00.850

下面的代码是一个用于创建、打开或编辑 Gif 的类。

它无法从流中读取播放时间，但对于您问题的第二部分，它可以在每帧上编写具有指定延迟的 Gif 动画。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;

/// <summary>
/// Uses default .net GIF encoding and adds animation headers.
/// </summary>
public class Gif : IDisposable, IEnumerable<Image>
{
    #region Header Constants
    const byte FileTrailer = 0x3b,
        ApplicationBlockSize = 0x0b,
        GraphicControlExtensionBlockSize = 0x04;

    const int ApplicationExtensionBlockIdentifier = 0xff21,
        GraphicControlExtensionBlockIdentifier = 0xf921;

    const long SourceGlobalColorInfoPosition = 10,
        SourceGraphicControlExtensionPosition = 781,
        SourceGraphicControlExtensionLength = 8,
        SourceImageBlockPosition = 789,
        SourceImageBlockHeaderLength = 11,
        SourceColorBlockPosition = 13,
        SourceColorBlockLength = 768;

    const string ApplicationIdentification = "NETSCAPE2.0",
        FileType = "GIF",
        FileVersion = "89a";
    #endregion

    class GifFrame
    {
        public GifFrame(Image image, double delay, int xOffset, int yOffset)
        {
            Image = image;
            Delay = delay;
            XOffset = xOffset;
            YOffset = yOffset;
        }

        public Image Image;
        public double Delay;
        public int XOffset, YOffset;
    }

    List<GifFrame> Frames = new List<GifFrame>();

    public Gif() { DefaultFrameDelay = 500; }

    public Gif(Stream InStream, int Repeat = 0, int Delay = 500)
    {
        using (Image Animation = Bitmap.FromStream(InStream))
        {
            int Length = Animation.GetFrameCount(FrameDimension.Time);

            DefaultFrameDelay = Delay;
            this.Repeat = Repeat;

            for (int i = 0; i < Length; ++i)
            {
                Animation.SelectActiveFrame(FrameDimension.Time, i);

                var Frame = new Bitmap(Animation.Size.Width, Animation.Size.Height);

                Graphics.FromImage(Frame).DrawImage(Animation, new Point(0, 0));

                Frames.Add(new GifFrame(Frame, Delay, 0, 0));
            }
        }
    }

    #region Properties
    public int DefaultWidth { get; set; }

    public int DefaultHeight { get; set; }

    public int Count { get { return Frames.Count; } }

    /// <summary>
    /// Default Delay in Milliseconds
    /// </summary>
    public int DefaultFrameDelay { get; set; }

    public int Repeat { get; private set; }
    #endregion

    /// <summary>
    /// Adds a frame to this animation.
    /// </summary>
    /// <param name="Image">The image to add</param>
    /// <param name="XOffset">The positioning x offset this image should be displayed at.</param>
    /// <param name="YOffset">The positioning y offset this image should be displayed at.</param>
    public void AddFrame(Image Image, double? frameDelay = null, int XOffset = 0, int YOffset = 0)
    {
        Frames.Add(new GifFrame(Image, frameDelay ?? DefaultFrameDelay, XOffset, YOffset));
    }

    public void AddFrame(string FilePath, double? frameDelay = null, int XOffset = 0, int YOffset = 0)
    {
        AddFrame(new Bitmap(FilePath), frameDelay, XOffset, YOffset);
    }

    public void RemoveAt(int Index) { Frames.RemoveAt(Index); }

    public void Clear() { Frames.Clear(); }

    public void Save(Stream OutStream)
    {
        using (var Writer = new BinaryWriter(OutStream))
        {
            for (int i = 0; i < Count; ++i)
            {
                var Frame = Frames[i];

                using (var gifStream = new MemoryStream())
                {
                    Frame.Image.Save(gifStream, ImageFormat.Gif);

                    // Steal the global color table info
                    if (i == 0) InitHeader(gifStream, Writer, Frame.Image.Width, Frame.Image.Height);

                    WriteGraphicControlBlock(gifStream, Writer, Frame.Delay);
                    WriteImageBlock(gifStream, Writer, i != 0, Frame.XOffset, Frame.YOffset, Frame.Image.Width, Frame.Image.Height);
                }
            }

            // Complete File
            Writer.Write(FileTrailer);
        }
    }

    #region Write
    void InitHeader(Stream sourceGif, BinaryWriter Writer, int w, int h)
    {
        // File Header
        Writer.Write(FileType.ToCharArray());
        Writer.Write(FileVersion.ToCharArray());

        Writer.Write((short)(DefaultWidth == 0 ? w : DefaultWidth)); // Initial Logical Width
        Writer.Write((short)(DefaultHeight == 0 ? h : DefaultHeight)); // Initial Logical Height

        sourceGif.Position = SourceGlobalColorInfoPosition;
        Writer.Write((byte)sourceGif.ReadByte()); // Global Color Table Info
        Writer.Write((byte)0); // Background Color Index
        Writer.Write((byte)0); // Pixel aspect ratio
        WriteColorTable(sourceGif, Writer);

        // App Extension Header
        unchecked { Writer.Write((short)ApplicationExtensionBlockIdentifier); };
        Writer.Write((byte)ApplicationBlockSize);
        Writer.Write(ApplicationIdentification.ToCharArray());
        Writer.Write((byte)3); // Application block length
        Writer.Write((byte)1);
        Writer.Write((short)Repeat); // Repeat count for images.
        Writer.Write((byte)0); // terminator
    }

    void WriteColorTable(Stream sourceGif, BinaryWriter Writer)
    {
        sourceGif.Position = SourceColorBlockPosition; // Locating the image color table
        var colorTable = new byte[SourceColorBlockLength];
        sourceGif.Read(colorTable, 0, colorTable.Length);
        Writer.Write(colorTable, 0, colorTable.Length);
    }

    void WriteGraphicControlBlock(Stream sourceGif, BinaryWriter Writer, double frameDelay)
    {
        sourceGif.Position = SourceGraphicControlExtensionPosition; // Locating the source GCE
        var blockhead = new byte[SourceGraphicControlExtensionLength];
        sourceGif.Read(blockhead, 0, blockhead.Length); // Reading source GCE

        unchecked { Writer.Write((short)GraphicControlExtensionBlockIdentifier); }; // Identifier
        Writer.Write((byte)GraphicControlExtensionBlockSize); // Block Size
        Writer.Write((byte)(blockhead[3] & 0xf7 | 0x08)); // Setting disposal flag
        Writer.Write((short)(frameDelay / 10)); // Setting frame delay
        Writer.Write((byte)blockhead[6]); // Transparent color index
        Writer.Write((byte)0); // Terminator
    }

    void WriteImageBlock(Stream sourceGif, BinaryWriter Writer, bool includeColorTable, int x, int y, int w, int h)
    {
        sourceGif.Position = SourceImageBlockPosition; // Locating the image block
        var header = new byte[SourceImageBlockHeaderLength];
        sourceGif.Read(header, 0, header.Length);
        Writer.Write((byte)header[0]); // Separator
        Writer.Write((short)x); // Position X
        Writer.Write((short)y); // Position Y
        Writer.Write((short)w); // Width
        Writer.Write((short)h); // Height

        if (includeColorTable) // If first frame, use global color table - else use local
        {
            sourceGif.Position = SourceGlobalColorInfoPosition;
            Writer.Write((byte)(sourceGif.ReadByte() & 0x3f | 0x80)); // Enabling local color table
            WriteColorTable(sourceGif, Writer);
        }
        else Writer.Write((byte)(header[9] & 0x07 | 0x07)); // Disabling local color table

        Writer.Write((byte)header[10]); // LZW Min Code Size

        // Read/Write image data
        sourceGif.Position = SourceImageBlockPosition + SourceImageBlockHeaderLength;

        var dataLength = sourceGif.ReadByte();
        while (dataLength > 0)
        {
            var imgData = new byte[dataLength];
            sourceGif.Read(imgData, 0, dataLength);

            Writer.Write((byte)dataLength);
            Writer.Write(imgData, 0, dataLength);
            dataLength = sourceGif.ReadByte();
        }

        Writer.Write((byte)0); // Terminator
    }
    #endregion

    public void Dispose()
    {
        Frames.Clear();
        Frames = null;
    }

    public Image this[int Index] { get { return Frames[Index].Image; } }

    public IEnumerator<Image> GetEnumerator() { foreach (var Frame in Frames) yield return Frame.Image; }

    IEnumerator IEnumerable.GetEnumerator() { return GetEnumerator(); }
} 
```

# iphone - “多个方法命名......”的问题

> ID：13364891
> 
> 赞同：4
> 
> 时间：2012-11-13T16:44:19.410
> 
> 标签：iphone, objective-c, ios, popup

我有一个问题。我想在我的项目中实现 UAModalpanelview。起初它工作得很好......我实现了文件......无论如何。但是现在我想运行该应用程序，但每次都收到此错误。正是因为“中心”，它向我展示了“发现多个名为中心的方法，结果、参数类型或属性不匹配”。

```
- (IBAction)showPopup:(id)sender {

    UAModalPanel *modalPanel = [[UAExampleModalPanel alloc] initWithFrame:self.view.bounds];
    [self.view addSubview:modalPanel];
    [modalPanel showFromPoint:[sender center]];
} 
```

谁能帮我解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T16:49:46.213

看起来您需要将 sender 转换为对象类型。我会假设它是一个 UIView。

```
[modalPanel showFromPoint:[(UIView *)sender center]]; 
```

你可以看看这个类似的问题： [为什么我会收到警告“找到多个名为 'center' 的方法”](https://stackoverflow.com/questions/11129778/why-am-i-am-getting-the-warning-multiple-methods-named-center-found)

# umbraco - 在多语言站点中通过剃刀获取基于当前节点的相关页面

> ID：13364894
> 
> 赞同：1
> 
> 时间：2012-11-13T16:44:26.417
> 
> 标签：umbraco

有一个多语言网站，例如

```
Content
 +UK Home
  -About Us
 +US HOme
  -About Us 
```

如何通过剃刀根据英国“关于我们”的当前节点获取美国“关于我们”页面？美国站点是使用关系从英国站点复制的。

当访问者访问美国“关于我们”时，根据业务规则将访问者重定向到英国“关于我们”。问题是我需要以编程方式获取英国“关于我们”页面的有效 url，并将访问者重定向到它。似乎 Umbraco 没有太多的支持。例如，Umbraco 关系仅适用于主页级别。每个站点都有一个具有多个级别的树节点。

任何想法将不胜感激。

Umbraco 4.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-08T20:47:05.813

我只需要自己使用 7.2.6 来解决这个问题......

因为 BeaverProj 的答案不完整和贬低，我想我会分享。

如果有人有更短的代码来做同样的事情，那就太好了。

> ```
> @{
> 
> var rs = ApplicationContext.Current.Services.RelationService;
> var currentPageId = CurrentPage.AncestorOrSelf().Id;
> 
> var relations = rs.GetByParentOrChildId(currentPageId);
> 
>         <h2>Relations</h2>
> foreach (Relation relation in relations)
> {
>     if (relation.RelationType.Alias == "relateDocumentOnCopy")
>     {
>         // the relation has two ids... 
>         // 1\. parent
>         // 2\. child
>         // we want the opposite one as the id above is for the current node
>         umbraco.NodeFactory.Node node;
> 
>         if (relation.ParentId == currentPageId)
>         {
>             //get child
>             node = new umbraco.NodeFactory.Node(relation.ChildId);
>         }
>         else
>         {
>             node = new umbraco.NodeFactory.Node(relation.ParentId);
>         }
> 
>        <text>@node.NiceUrl</text>            <br />
>     }
> 
> } } 
> ```

我还尝试使用带有 lambda [ *where* ] 语句的 razor 来仅查询别名的结果，但它在视图中不起作用。我可以将其移至控制器，但它可以在视图中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:26:08.053

当您创建多语言网站时，您是否在复制框中“将复制的项目与原始项目相关联”？还是页面之间有关系？

在 Razor 中，您应该能够访问 Umbraco 原生的 Relation API。

像这样的东西：

```
@using umbraco.cms.businesslogic.relation;
@using umbraco.cms.businesslogic.member;

@{
    RelationType relationType = RelationType.GetByAlias("relateDocumentOnCopy");
    Relation[] relations = Relation.GetRelations(Model.Id, relationType);

  <h2>Relations</h2>
    foreach (Relation relation in relations)
    {
...
    }
} 
```

我基本上从这个论坛帖子中得到了这段代码：http: [//our.umbraco.org/forum/developers/razor/28103-Using-relations-with-razor](http://our.umbraco.org/forum/developers/razor/28103-Using-relations-with-razor)

这是一篇博客文章，其中包含有关关系 API 的更多信息：http: [//blog.hendyracher.co.uk/umbraco-relation-api/](http://blog.hendyracher.co.uk/umbraco-relation-api/)

此外，如果您可以访问付费 Umbraco.tv 帐户，这将有所帮助：[http ://umbraco.com/help-and-support/video-tutorials/developing-with-umbraco/relations/simple-document-to-文档关系/TVPlayer](http://umbraco.com/help-and-support/video-tutorials/developing-with-umbraco/relations/simple-document-to-document-relation/TVPlayer)

# asp.net - 在 ASP.Net 中异步调用 asmx 方法？

> ID：13364900
> 
> 赞同：0
> 
> 时间：2012-11-13T16:44:43.617
> 
> 标签：asp.net, asmx

*   我有一个 asmx Web 服务，它是我的 ASP.Net Web 应用程序的一部分。我想使用基于事件的方法以异步方式调用此 Web 服务。这可能吗？如果可以，怎么办？如果这是不可能的，有什么替代方案？
*   另外，我可以在用“[WebMethod]”属性装饰的 aspx 页面中以异步方式调用静态 PageMethod 吗？我拥有的页面方法的一个示例是：

    ```
     [WebMethod]
    public static SupplierData GetAgeSummary(string supplierId)
    {
        return ABC.Data.SupplierData.GetAgeSummary(supplierId);
    } 
    ```

我所说的异步是指服务器端的异步，而不是客户端的异步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:04:50.487

网站的服务器端不能以可靠的方式异步调用。由于所有线程仅在父线程期间处于活动状态，如果您的异步线程在站点完成并继续响应时仍在执行，这将终止父线程并且所有子线程将被迫停止执行。

如果您使用的应用程序是使用 Web 服务作为参考的 WinForms 或 WPF 应用程序，则可以异步调用它，因为可以依赖应用程序（在父线程上运行）在服务调用期间保持活动状态. 但是，在 Web 应用程序中，响应很可能会在回调传递之前构建。

# ant - junit sometimes fails with timeout error, even when well below the limit

> ID：13364902
> 
> 赞同：0
> 
> 时间：2012-11-13T16:44:50.323
> 
> 标签：ant, junit, cobertura

I've set up an Ant build script to run unit tests with Cobertura. I have a "timeout" attribute of "10000" in the "junit" task.

I've tested running my unit tests many times. For some reason, when I first run it after having not run it for a while (like first thing in the morning), I often see every single test case fail like this:

```
 Testsuite: ...
Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec

Testcase: null took 0.109 sec
    Caused an ERROR
Timeout occurred. Please note the time in the report does not reflect the time until the timeout.
junit.framework.AssertionFailedError: Timeout occurred. Please note the time in the report does not reflect the time until the timeout. 
```

Every time this has happened, I just rerun the command line and everything works. When it fails like this, it does delay a tiny bit before starting, but it's certainly not 10 seconds.

What can I do to prevent this from happening? It's one thing to happen when I run it manually from the command line, but it will be quite another when I have this set up to run from a CI server, where irrelevant failures will be much more annoying.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:49:06.410

我想我会称之为没有实际意义的。部分问题是 Cobertura 目前正在打印大量的调试输出，我猜这是导致问题的原因。当我添加'forkmode =“once”'时它有所帮助。他们正在努力为 Cobertura 添加一个“安静模式”，这将进一步提供帮助。

# drupal - I need an example on attaching a field collection to a form

> ID：13364905
> 
> 赞同：6
> 
> 时间：2012-11-13T16:45:01.013
> 
> 标签：drupal, drupal-7

I have some field collections that are attached to a node type and I am in the process of writing a custom form, using Drupal's Form API.

How do I go about loading these field collection fields into the form? Should I use `hook_form`, `hook_field`, or something else?

Can someone provide me a simple example of writing a form element that is a field collection with unlimited cardinality?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:46:24.473

我能够使用以下代码加载字段收集表单。我添加了额外的注释并删除了从 $form_state['values'] 变量中寻找字段值的自定义逻辑。

```
function mymodule_custom_form($form, $form_state, $args ){
  $form = array();
  $type = $args['type'];
  $id = $args['id'];
  module_load_include('inc', 'field_collection', 'field_collection.pages');
  if(!empty($entity->field_comments[LANGUAGE_NONE][0]['value']) ){
    $field_collection_item = field_collection_item_load($entity->field_comments[$entity->language][0]['value'], TRUE);
    $output = drupal_get_form('field_collection_item_form', $field_collection_item);
  }else{
    $output = field_collection_item_add('field_comments', 'node', $entity->nid);
  }  
  dpm($output);
  // If you want to use field collection form submit handlers as is, just return the below   
  // In case you want to use your own custom submit handlers then do modify the $output array as seems fit.
  $form['field_collection_element'] = $output;
  // You may also attach the $output array to your custom form array. Make sure you handle submit handlers properly

  return $form;
} 
```

一个示例提交处理程序@see 在提交处理程序中，您可以使用[此处给出的示例](http://drupal.org/node/1459952#comment-6462658)

```
function mymodule_custom_form_submit( $form, $form_state ){
  ...
  if(empty($item_id)){
    $field_collection_item = entity_create('field_collection_item', array('field_name' => $field_name ));
    $field_collection_item->setHostEntity('node', $node);
  }
  else {
    $items = entity_load('field_collection_item', array($item_id));
    $field_collection_item = $items[$item_id];
  }
  if( is_object($field_collection_item)){
    // for references.
    $field_collection_item->field1[$node->language][0]['target_id'] = $field1_val;
    // normal values
    $field_collection_item->field2[$node->language][0]['value'] = $field2_val;
    $field_collection_item->field3[$node->language][0]['value'] = $field3_val;
    if(empty($item_id)){
      $field_collection_item->save( FALSE );
    }
    else{
      $field_collection_item->save( TRUE );
    }
  }
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T17:15:30.313

如果您希望使用表单使用内容填充节点，则始终可以将节点表单公开给用户，并使用 hook_form_alter 以在用户访问的基础上隐藏元素。

或者，如果您正在寻找一个可字段的表单，您可以使用[entityform](https://www.drupal.org/project/entityform)，然后使用规则来填充其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T03:56:29.447

Drupal 表单中还有另一个分组字段的概念，称为

> [字段集](https://api.drupal.org/api/drupal/developer%21topics%21forms_api_reference.html/7#fieldset)

这允许格式化一组表单项。表单 api 页面上的示例适用于具有以下代码的联系人模块。

```
function contact_form_user_profile_form_alter(&$form, &$form_state) {
  if ($form['#user_category'] == 'account') {
    $account = $form['#user'];
    $form['contact'] = array(
      '#type' => 'fieldset',
      '#title' => t('Contact settings'),
      '#weight' => 5,
      '#collapsible' => TRUE,
    );
    $form['contact']['contact'] = array(
      '#type' => 'checkbox',
      '#title' => t('Personal contact form'),
      '#default_value' => !empty($account->data['contact']) ? $account->data['contact'] : FALSE,
      '#description' => t('Allow other users to contact you via a <a href="@url">personal contact form</a> which keeps your e-mail address hidden. Note that some privileged users such as site administrators are still able to contact you even if you choose to disable this feature.', array('@url' => url("user/$account->uid/contact"))),
    );
  }
} 
```

因此，如果您的意图是将各种字段组合在一起，那么这也是一种方法。

# c# - 多维列表绑定到列表框

> ID：13364906
> 
> 赞同：0
> 
> 时间：2012-11-13T16:45:06.080
> 
> 标签：c#, list, data-binding, listbox, multidimensional-array

我知道如何将列表绑定到列表框，但我使用以下代码创建了一个多维列表，但无法弄清楚如何将其绑定到列表框。

```
public class MultiDimDictList<K, T> : Dictionary<K, List<T>>
    {
        public void Add(K key, T addObject)
        {
            if (!ContainsKey(key)) Add(key, new List<T>());
            base[key].Add(addObject);
        }
    } 
```

然后下面使用这个类并将 2 个字符串添加到列表中：

```
var myDicList = new MultiDimDictList<string, string>();
        myDicList.Add("Title", "Data");
        myDicList.Add("Title2", "Data2"); 
```

基本上我要做的是将此数据绑定到仅显示标题的列表框，但是当单击按钮时，它使用数据部分来完成该过程。

我不知道该去哪里，因为我一直在查看其他帖子，但没有找到与我正在尝试做的类似的事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:54:15.990

A`Dictionary<K,V>`不是列表。您的情况下的标题是字典的键，并且没有排序。您可以通过`Keys`属性访问它们，但必须在绑定之前对它们进行排序。将此属性添加到您的`MultiDimDictList`

```
public List<string> Titles { get { return Keys.OrderBy(k => k).ToList(); } } 
```

并将列表框绑定到此属性。

上面的例子假设键是字符串类型的。使用泛型类型参数`K`时，您必须先转换为字符串（除非您需要`K`原因列表）：

```
public List<string> Titles {
    get {
        return Keys
            .Select(k => k.ToString())
            .OrderBy(s => s)
            .ToList(); 
    }
} 
```

# java - How to run a query when the application is first deployed and then keep data for rest of the lifecycle

> ID：13364907
> 
> 赞同：0
> 
> 时间：2012-11-13T16:45:10.920
> 
> 标签：java, spring, spring-mvc, spring-jdbc

I have a query where I'm getting column names from a DB. These column names won't change on a request or session basis. So, to avoid running useless queries on each request, I would like to run this query once when the application is deployed and then keep the results in a `List<String>` for rest of the lifecycle of the application (until its deployed again).

How can this be achieved so that I can use the final `List<String>` in my service layer?

If there is a better way to do this rather than tying running a query on deploy, then please suggest some other way.

Currently, I have this:

```
public List<String> fetchColNames (String tableName) {
    String query = "SELECT Upper(column_name) FROM information_schema.columns WHERE table_name = ?";
        List<String> cols = getJdbcTemplate().query(query, new Object[] {tableName}, new RowMapper<String>() {
           public String mapRow(ResultSet rs, int rowNum) throws SQLException {
               return rs.getString(1);
           } 
        });
    return cols;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:49:28.747

您可以使您的方法[Cachable](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html#cache-annotations-cacheable)：

```
@Component
public class ColumnFetcher {
    @Cachable("columnNames")
    public List<String> fetchColNames (String tableName) {
        String query = "SELECT Upper(column_name) FROM information_schema.columns WHERE table_name = ?";
            List<String> cols = getJdbcTemplate().query(query, new Object[] {tableName}, new RowMapper<String>() {
               public String mapRow(ResultSet rs, int rowNum) throws SQLException {
                   return rs.getString(1);
               } 
            });
        return cols;
    } 
} 
```

当然，您还必须[启用](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html#cache-annotation-enable)缓存注释：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:cache="http://www.springframework.org/schema/cache"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">
    <cache:annotation-driven />
</beans> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:20:39.510

您可以在bean`postconstruct`的方法上使用注解`configurable`，它将在应用程序部署时执行。

# html - CSS behaviour not the same for HTML and JSF

> ID：13364912
> 
> 赞同：1
> 
> 时间：2012-11-13T16:45:20.623
> 
> 标签：html, css, jsf, xhtml, jsf-1.2

I have a few html pages with css files and it works perfectly when opened in chrome. If I copy the exact content into JSF (xhtml) pages without converting the html components to jsf components (h:inputs etc.) the styling behaviour is not the same. 99% of the components appear the same as with the html files, but some of them have styling issues. I have noticed that a user agent stylesheet rule was added on one of the components.

Should the behaviour for JSF (xhtml) pages with HTML content be same as normal HTML files with regards to styling and css?

I am using JSF 1.2 with IceFaces 1.8.2 and NetBeans 6.8

# mysql - MySQL LEFT OUTER JOIN virtual table

> ID：13364913
> 
> 赞同：2
> 
> 时间：2012-11-13T16:45:29.393
> 
> 标签：mysql, left-join

I am working on a pretty complicated query let me try to explain it to you. Here is the tables that I have in my MySQL database:

students Table

```
--- `students` ---
student_id    first_name    last_name    current_status    status_change_date
------------  ------------  -----------  ----------------  --------------------
1             John          Doe          Active            NULL
2             Jane          Doe          Retread           2012-02-01 
```

students_have_courses Table

```
--- `students_have_courses` ---
students_student_id    courses_course_id    s_date      e_date      int_date
---------------------  -------------------  ----------  ----------  -----------
1                      1                    2012-01-01  2012-01-04  2012-01-05
1                      2                    2012-01-05  NULL        NULL
2                      1                    2012-01-10  2012-01-11  NULL 
```

students_have_optional_courses Table

```
--- `students_have_optional_courses` ---
students_student_id    optional_courses_opcourse_id    s_date      e_date
---------------------  ------------------------------  ----------  ----------
1                      1                               2012-01-02  2012-01-03
1                      1                               2012-01-06  NULL
1                      5                               2012-01-07  NULL 
```

Here is my query so far

```
SELECT 
  `students_and_courses`.student_id,
  `students_and_courses`.first_name,
  `students_and_courses`.last_name,
  `students_and_courses`.courses_course_id,
  `students_and_courses`.s_date,
  `students_and_courses`.e_date,
  `students_and_courses`.int_date,
  `students_have_optional_courses`.optional_courses_opcourse_id,
  `students_have_optional_courses`.s_date,
  `students_have_optional_courses`.e_date
FROM (
  SELECT
    `c_s_a_s`.student_id,
    `c_s_a_s`.first_name,
    `c_s_a_s`.last_name,
    `c_s_a_s`.courses_course_id,
    `c_s_a_s`.s_date,
    `c_s_a_s`.e_date,
    `c_s_a_s`.int_date
 FROM (
   SELECT
      `students`.student_id,
      `students`.first_name,
      `students`.last_name,
      `students_have_courses`.courses_course_id,
      `students_have_courses`.s_date,
      `students_have_courses`.e_date,
      `students_have_courses`.int_date
    FROM
      `students`
      LEFT OUTER JOIN `students_have_courses`
        ON (
          `students_have_courses`.`students_student_id` = `students`.`student_id` AND     (( 
          `students_have_courses`.`s_date` >= `students`.`status_change_date` AND
          `students`.current_status = 'Retread' ) OR
          `students`.current_status = 'Active')
        )
      WHERE
        `students`.current_status = 'Active' OR
        `students`.current_status = 'Retread'
  ) `c_s_a_s`
  ORDER BY
    `c_s_a_s`.`courses_course_id` DESC
) `students_and_courses`
LEFT OUTER JOIN `students_have_optional_courses`
  ON (
    `students_have_optional_courses`.students_student_id =     `students_and_courses`.student_id AND
    `students_have_optional_courses`.s_date >= `students_and_courses`.s_date AND 
    `students_have_optional_courses`.e_date IS NULL
  )
GROUP BY
 `students_and_courses`.student_id; 
```

What I want to be returned is the student_id, first_name, and last_name for all Active or Retread students and then LEFT JOIN the highest course_id, s_date, e_date, and int_date for the those students where the s_date is since the status_change_date if status is 'Retread'. Then LEFT JOIN the highest optional_courses_opcourse_id, s_date, and e_date from the students_have_optional_courses TABLE where the students_have_optional_courses.s_date is greater or equal to the students_have_courses.s_date and the students_have_optional_courses.e_date IS NULL

Here is what is being returned:

```
student_id    first_name    last_name    courses_course_id    s_date      e_date      int_date      optional_courses_opcourse_id    s_date_1    e_date_1
------------  ------------  -----------  -------------------  ----------  ----------  ------------  ------------------------------  ----------  ----------
1             John          Doe          2                    2012-01-05  NULL        NULL          1                               2012-01-06  NULL
2             Jane          Doe          NULL                 NULL        NULL        NULL          NULL                            NULL        NULL 
```

Here is what I want being returned:

```
student_id    first_name    last_name    courses_course_id    s_date      e_date      int_date      optional_courses_opcourse_id    s_date_1    e_date_1
------------  ------------  -----------  -------------------  ----------  ----------  ------------  ------------------------------  ----------  ----------
1             John          Doe          2                    2012-01-05  NULL        NULL          5                               2012-01-07  NULL
2             Jane          Doe          NULL                 NULL        NULL        NULL          NULL                            NULL        NULL 
```

Everything is working except one thing, I cannot seem to get the highest students_have_optional_courses.optional_courses_opcourse_id no matter how I form the query

Sorry, I just solved this myself after writing this all out I think it helped me think of the solution.

Here is the solution query:

```
 SELECT 
      `students_and_courses`.student_id,
      `students_and_courses`.first_name,
      `students_and_courses`.last_name,
      `students_and_courses`.courses_course_id,
      `students_and_courses`.s_date,
      `students_and_courses`.e_date,
      `students_and_courses`.int_date,
      `students_optional_courses`.optional_courses_opcourse_id,
      `students_optional_courses`.s_date,
      `students_optional_courses`.e_date
    FROM (
      SELECT
        `c_s_a_s`.student_id,
        `c_s_a_s`.first_name,
        `c_s_a_s`.last_name,
        `c_s_a_s`.courses_course_id,
        `c_s_a_s`.s_date,
        `c_s_a_s`.e_date,
        `c_s_a_s`.int_date
      FROM (
        SELECT
          `students`.student_id,
          `students`.first_name,
          `students`.last_name,
          `students_have_courses`.courses_course_id,
          `students_have_courses`.s_date,
          `students_have_courses`.e_date,
          `students_have_courses`.int_date
        FROM
          `students`
          LEFT OUTER JOIN `students_have_courses`
            ON (
              `students_have_courses`.`students_student_id` = `students`.`student_id` AND (( 
              `students_have_courses`.`s_date` >= `students`.`status_change_date` AND
              `students`.current_status = 'Retread' ) OR
              `students`.current_status = 'Active')
            )
          WHERE
            `students`.current_status = 'Active' OR
            `students`.current_status = 'Retread'
      ) `c_s_a_s`
      ORDER BY
        `c_s_a_s`.`courses_course_id` DESC
    ) `students_and_courses`
    LEFT OUTER JOIN (
      SELECT
        *
      FROM
        `students_have_optional_courses`
      ORDER BY
        `students_have_optional_courses`.optional_courses_opcourse_id DESC
    ) `students_optional_courses`
      ON (
        `students_optional_courses`.students_student_id = `students_and_courses`.student_id AND
        `students_optional_courses`.s_date >= `students_and_courses`.s_date AND 
        `students_optional_courses`.e_date IS NULL
      )
    GROUP BY
     `students_and_courses`.student_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:11:09.550

这是我自己调试时找到的答案：

```
 SELECT 
      `students_and_courses`.student_id,
      `students_and_courses`.first_name,
      `students_and_courses`.last_name,
      `students_and_courses`.courses_course_id,
      `students_and_courses`.s_date,
      `students_and_courses`.e_date,
      `students_and_courses`.int_date,
      `students_optional_courses`.optional_courses_opcourse_id,
      `students_optional_courses`.s_date,
      `students_optional_courses`.e_date
    FROM (
      SELECT
        `c_s_a_s`.student_id,
        `c_s_a_s`.first_name,
        `c_s_a_s`.last_name,
        `c_s_a_s`.courses_course_id,
        `c_s_a_s`.s_date,
        `c_s_a_s`.e_date,
        `c_s_a_s`.int_date
      FROM (
        SELECT
          `students`.student_id,
          `students`.first_name,
          `students`.last_name,
          `students_have_courses`.courses_course_id,
          `students_have_courses`.s_date,
          `students_have_courses`.e_date,
          `students_have_courses`.int_date
        FROM
          `students`
          LEFT OUTER JOIN `students_have_courses`
            ON (
              `students_have_courses`.`students_student_id` = `students`.`student_id` AND (( 
              `students_have_courses`.`s_date` >= `students`.`status_change_date` AND
              `students`.current_status = 'Retread' ) OR
              `students`.current_status = 'Active')
            )
          WHERE
            `students`.current_status = 'Active' OR
            `students`.current_status = 'Retread'
      ) `c_s_a_s`
      ORDER BY
        `c_s_a_s`.`courses_course_id` DESC
    ) `students_and_courses`
    LEFT OUTER JOIN (
      SELECT
        *
      FROM
        `students_have_optional_courses`
      ORDER BY
        `students_have_optional_courses`.optional_courses_opcourse_id DESC
    ) `students_optional_courses`
      ON (
        `students_optional_courses`.students_student_id = `students_and_courses`.student_id AND
        `students_optional_courses`.s_date >= `students_and_courses`.s_date AND 
        `students_optional_courses`.e_date IS NULL
      )
    GROUP BY
     `students_and_courses`.student_id; 
```

我需要在 LEFT JOINING 之前选择并订购students_have_optional_courses 表。我希望这可以帮助任何其他人寻找这样的答案。

# php - WordPress - How to add anchor to previous/next page links

> ID：13364914
> 
> 赞同：2
> 
> 时间：2012-11-13T16:45:29.813
> 
> 标签：php, html, wordpress, anchor, hyperlink

I have a gallery at the top of my WordPress theme and the blog posts are below it. Each time I go to the next page it goes to the top which I don't want. I would like to add an anchor called #blog just below the gallery and add it to previous/next page links. Where in the code should I put #blog to make this work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:59:39.877

您应该能够通过两次调整来做到这一点。第一个将创建锚点，第二个将调整链接以使用锚点。

锚点可以作为`<a>`具有`name`属性的标签或几乎任何具有`id`属性的标签来引用。我想说大多数 WordPress 主题已经有一个可以在`#content`. 导航到您的任何博客文章并查看源代码。在源代码中搜索`id="content"`并验证它是否存在。如果没有，请找到`id`您的实际帖子内容所在的位置，然后您可以使用该内容。如果找不到，则需要创建一个。

在您的 WordPress 主题文件中，查找名为`single.php`. 这通常是控制如何呈现单个帖子的文件。这是您将编辑以添加锚点（如有必要）和调整链接的文件。

如果您无法找到`id`要使用的内容（无论是“内容”还是其他任何内容），您将需要找到内容被调用以进行输出的位置，并将一个内容添加`id`到包裹在其周围的任何 HTML 标记中。

例如，我的文件的精简版本如下所示：

```
<div id="primary">
  <div id="content">
    <?php while ( have_posts() ) : the_post(); ?>
      <div class="entry-content">
       <?php the_content(); // this is your post content ?>
      </div><!-- .entry-content -->
    <?php endwhile; // end of the loop. ?>
  </div>
</div> 
```

输出链接的方法有很多种，所以这取决于 WordPress 的主题和版本。在`single.php`文件中，查找与“next_post”和“previous_post”相关的函数。大多数用于创建链接的函数会自动`<a>`为您编写整个链接标记 ( )，因此无法截取链接并更改它。

您需要自己编写链接。下面的代码显示了如何获取信息和创建链接。它假定您将`id="content"`用作锚参考。

```
 <?php
  $prev_post = get_previous_post();
  if (!empty( $prev_post )): ?>
    <a href="<?php echo get_permalink( $prev_post->ID ); ?>#content"><?php echo $prev_post->post_title; ?></a>
  <?php endif; ?>

  <?php
  $next_post = get_next_post();
  if (!empty( $next_post )): ?>
    <a href="<?php echo get_permalink( $next_post->ID ); ?>#content"><?php echo $next_post->post_title; ?></a>
  <?php endif; ?> 
```

这应该会创建您正在寻找的链接，这些链接会自动将页面跳过图像并跳转到帖子内容。

# javascript - Previous / Next buttons in html?

> ID：13364915
> 
> 赞同：-1
> 
> 时间：2012-11-13T16:45:32.777
> 
> 标签：javascript, html, navigation, pagination, next

I want to create a navigation for the News section on my website, where when the buttons will be clicked it will navigate the user to the next or previous html.

The button must add or remove a number on the end of the html name so if first html is news.html and next button is clicked it should go to news1.html etc.

I suppose this can be achieved with javascript, how do I start?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:55:20.977

```
var path = window.location.pathname; 
```

然后使用正则表达式解析`path`，获取当前页数（如果有）并将其转换为数字，增加/减少它并从中创建您的 url。

但是，我认为您使用的不是 ajax，而是某种服务器端语言，最好在服务器端使用。

我们不能为你做作业。这是测试接受日期字符串的正则表达式的示例：

```
 // Date validation
        if (bdate != "")
        {
             if(!/^[0-9]{1,2}\.[0-9]{1,2}\.[0-9]{4}(\.)?$/.test(bdate)||
             String(new Date(bdate.split(".")[1] + "/" + bdate.split(".")[0] + "/" + bdate.split(".")[2])) == "Invalid Date")        
            {return "Please enter a valid date in format dd.mm.yyyy"}
        } 
```

在那里，正则表达式测试是这个表达式：`/^[0-9]{1,2}\.[0-9]{1,2}\.[0-9]{4}(\.)?$/.test(bdate)`它测试字符串`bdate`是否符合正则表达式。正则表达式是您可以通过将运算符放在上面的两个正斜杠之间来构造的对象 ( `/operators/`)。

[这是 javascript regex](http://www.w3schools.com/jsref/jsref_obj_regexp.asp) ant 的参考 这是一个[教程](http://www.w3schools.com/js/js_obj_regexp.asp)。祝你好运 ：）

顺便说一句，如果您不想学习任何东西，您可能应该考虑使用 wordpress 甚至 tumblr 之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:52:27.953

您可以使用`window.location`获取当前页面，将其与正则表达式匹配以获取末尾的数字（如果存在），然后将其递增以获取下一页并为上一页递减它。当然，您必须弄清楚如何处理第一页和最后一页。

例如，这样的事情可能会起作用：

```
var regex = /news(\d*)\.html/;
var index = +regex.exec(window.location.pathname)[1]; 
```

现在您的索引将是空白（for `news.html`）或数字。然后，您可以使用该数字来形成您需要的下一个和上一个按钮的 URL。

```
var nextUrl = "news" + (index+1) + ".html";
var prevUrl = "news" + (index-1) + ".html"; 
```

编辑：这不是最好的方法，但这是一个让你开始的[小提琴。](http://jsfiddle.net/Qr7tR/2/)

# php - Adding additional dots / full stops / periods causes duplicate URLs

> ID：13364916
> 
> 赞同：2
> 
> 时间：2012-11-13T16:45:37.690
> 
> 标签：php, wordpress, sanitization

A website has linked to my site incorrectly, adding a full stop at the end of the link:

```
http://www.example.com/hello-world. 
```

I would have expected this to go to a 404 page, instead, it loads the correct page, without redirecting to the valid URL.

This will be creating duplicate content issues in search engines.

Looking at a few other Wordpress site, it seems that it's a common issue, if you enter any number of full stops or hyphens (just the couple I came across), the page loads the correct content:

```
http://www.example.com/hello-------world.......
http://www.example.com/hello-....world----- 
```

Has anyone else come across this issue and found a solution?

I could setup a redirect from the linked URL to the correct URL, but ideally I'd like to find a solution so this won't occur in the future.

**UPDATE**

I've found that the issue seems to be due to the `sanitize_title_with_dashes` function in **/wp-includes/formatting.php (line 954)**:

```
function sanitize_title_with_dashes($title, $raw_title = '', $context = 'display') {

    echo "1: " . $title . "<br />";

    $title = strip_tags($title);
    // Preserve escaped octets.
    $title = preg_replace('|%([a-fA-F0-9][a-fA-F0-9])|', '---$1---', $title);
    // Remove percent signs that are not part of an octet.
    $title = str_replace('%', '', $title);
    // Restore octets.
    $title = preg_replace('|---([a-fA-F0-9][a-fA-F0-9])---|', '%$1', $title);

    if (seems_utf8($title)) {
        if (function_exists('mb_strtolower')) {
            $title = mb_strtolower($title, 'UTF-8');
        }
        $title = utf8_uri_encode($title, 200);
    }

    $title = strtolower($title);
    $title = preg_replace('/&.+?;/', '', $title); // kill entities
    $title = str_replace('.', '-', $title);

    echo "2: " . $title . "<br />";

    if ( 'save' == $context ) {
        // Convert nbsp, ndash and mdash to hyphens
        $title = str_replace( array( '%c2%a0', '%e2%80%93', '%e2%80%94' ), '-', $title );

        // Strip these characters entirely
        $title = str_replace( array(
            // iexcl and iquest
            '%c2%a1', '%c2%bf',
            // angle quotes
            '%c2%ab', '%c2%bb', '%e2%80%b9', '%e2%80%ba',
            // curly quotes
            '%e2%80%98', '%e2%80%99', '%e2%80%9c', '%e2%80%9d',
            '%e2%80%9a', '%e2%80%9b', '%e2%80%9e', '%e2%80%9f',
            // copy, reg, deg, hellip and trade
            '%c2%a9', '%c2%ae', '%c2%b0', '%e2%80%a6', '%e2%84%a2',
        ), '', $title );

        // Convert times to x
        $title = str_replace( '%c3%97', 'x', $title );
    }

    $title = preg_replace('/[^%a-z0-9 _-]/', '', $title);
    $title = preg_replace('/\s+/', '-', $title);
    $title = preg_replace('|-+|', '-', $title);
    $title = trim($title, '-');

    return $title;
} 
```

It seems to be replacing full stops with hyphens, then replacing multiple hyphens, then trimming hyphens from the end of the URL.

**UPDATE**

It doesn't seem that this is an issue with categories, I wonder why the page/post titles are sanitized to that level when categories aren't...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:47:14.537

那是因为url重写被重写的方式。

您可能想弄乱它来解决问题。它可以`.htaccess`在网站文档根目录的文件中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:51:47.963

除非您或其他人故意链接到它们，否则搜索引擎不会索引任何这些链接。基本上，我不会担心太多。

原因：

在接收 URL slug 时，WordPress 可能会清理变量并去除不需要的字符。我怀疑它与实际的 .htaccess 文件有什么关系。

# c# - WPF DynamicDataDisplay - 将字符串放在 Y 轴而不是数字

> ID：13364917
> 
> 赞同：2
> 
> 时间：2012-11-13T16:45:37.177
> 
> 标签：c#, wpf, string, dynamic-data-display

使用 WPF（不是 Silverlight）D3，是否可以在 Y 轴上放置字符串？我特别谈论一种情况，其中我有一个带有状态值的时间线图（假设“高”、“中”和“低”映射为 1、0 和 -1）并且想要 y 轴上的状态记号而不是数字...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:28:14.470

您可以使用 LabelProvider 来实现您想要的效果。您必须创建一个新的 LabelProvider 类，该类源自 LabelProviderBase，或者更具体地说，在您的情况下，NumericLabelProviderBase。您应该能够获取您拥有的所有刻度 (1,0-1)，并使用新 LabelProviderClass 中的 if 或开关将它们更改为字符串。在标签提供者的源代码中有大量示例，您可以将其用作基础。

您要覆盖的方法是 CreateLabels。这是我提出的一种快速方法，应该（希望！）让你到达你需要的地方。在您创建的新类中实现。

```
public override UIElement[] CreateLabels(ITicksInfo<double> ticksInfo) {            

        var ticks = ticksInfo.Ticks;
        Init(ticks);            

        UIElement[] res = new UIElement[ticks.Length];
        LabelTickInfo<double> tickInfo = new LabelTickInfo<double> { Info = ticksInfo.Info };
        for (int i = 0; i < res.Length; i++) {
            tickInfo.Tick = ticks[i];
            tickInfo.Index = i;
            string labelText = "";

            if(Convert.ToInt32(tickInfo.Tick) == 1) {
                labelText = "High";
            } else if(Convert.ToInt32(tickInfo.Tick) == 0) {
                labelText = "Medium"
            } else if(Convert.ToInt32(tickInfo.Tick) == -1) {
                labelText = "Low"
            } else {
                labelText = ""
            }

            TextBlock label = (TextBlock)GetResourceFromPool();
            if (label == null) {
                label = new TextBlock();
            }

            label.Text = labelText;
            label.ToolTip = ticks[i].ToString();

            res[i] = label;

            ApplyCustomView(tickInfo, label);
        }
        return res;
    } 
```

要将这个新的 LabelProvider 分配给 ChartPlotter，请在 XAML 中命名要标记的轴，或在 C# 中将其创建为对象：

```
yAxis.LabelProvider = new ZazkapulskLabelProvider(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T14:58:59.073

Dont use upper solution. Make my VS many compiler errors. I'm trying that solution on VS2013 on 3 hours but didnt work. Use that solution wherein function draw graph :

```
 dimSeviyesiAxis.LabelProvider.CustomFormatter = (tickInfo) =>
        {
            return "%" + tickInfo.Tick.ToString();
        }; 
```

Which dimSeviyesiAxis is xaml axis name made the axis label starts with "%". Before return you can code any conditional statements. Here is the source link :

[http://dynamicdatadisplay.codeplex.com/discussions/462842](http://dynamicdatadisplay.codeplex.com/discussions/462842)

# objective-c - Programatically check if there is a configuration profile installed or not on an iPhone

> ID：13364922
> 
> 赞同：4
> 
> 时间：2012-11-13T16:45:43.150
> 
> 标签：objective-c, ios, configuration-files

I need to develop an application that programatically checks if there is a configuration profile (called "X", for example) installed on the phone or not.

I tried the solution already on this [link](http://alex.tapmania.org/2011/09/check_conf_prof_is_installed_ios.html) but it didn't work. I also posted a [question](https://stackoverflow.com/questions/13291846/unable-to-check-if-a-configuration-profile-exists-on-the-iphone-objective-c) already related to this solution, but there has been no answer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:52:31.700

这很难做到。如果您在 MDM 解决方案的上下文中询问，那么您设备上的应用程序可能会向服务器询问安装的内容（假设您或您的公司同时开发 MDM 端和设备上的应用程序）。如果您的应用程序需要自行查找，那么唯一的方法是您的应用程序是内部应用程序： - 作为 VOIP 应用程序运行，以便它可以在后台定期运行 - 通过监控 iOS 内核消息asl_queue 用于与配置文件安装或删除相关的消息。

# c# - 如何防止禁用的 ToolStripMenuItem 在鼠标悬停时显示边框？

> ID：13364923
> 
> 赞同：6
> 
> 时间：2012-11-13T16:45:46.990
> 
> 标签：c#, winforms, border, toolstripmenu

是的，与标题完全相同，在我的项目中，一些工具条菜单项被禁用。但是当我将光标移到菜单项上时，会出现一个蓝色边框，如下所示： ![在此处输入图像描述](../Images/c60a96162b442e29fc840d72c76de9fb.png)
但我不想要这个。我想要这样：
![在此处输入图像描述](../Images/d167103d8eceafe69055242440ab4074.png)
你能帮我吗，我如何防止这个蓝色边框？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T17:26:51.653

您应该创建一个自定义`ToolStripRenderer`，看看这个 - [How to: Set the ToolStrip Renderer for an Application](http://msdn.microsoft.com/en-us/library/ms229634.aspx)

1.  您必须像这样创建自定义渲染器：

    ```
    class CutomToolStripMenuRenderer : ToolStripProfessionalRenderer
    {
        protected override void OnRenderMenuItemBackground(ToolStripItemRenderEventArgs e)
        {
            if (e.Item.Enabled)
            base.OnRenderMenuItemBackground(e);
        }

        protected override void OnRenderButtonBackground(ToolStripItemRenderEventArgs e)
        {
            if (e.Item.Enabled)
            base.OnRenderMenuItemBackground(e);
        }
    } 
    ```

2.  然后将此渲染器设置为您的菜单条：

    ```
    menuStrip1.Renderer = new CustomToolStripRenderer(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-15T15:52:34.133

**通过在ToolStripMenuItem**和作为**ToolStripLabel**的项目副本之间切换，我可以更好地控制我的“已禁用”菜单项。然后，我没有设置 Enabled = false，而是在两者之间切换可见性。这样我可以为“禁用”菜单项（标签）设置自定义前景色。

```
 bool m_isStartSvcEnabled = true;

    void ToggleServiceEnabled()
    {
        m_isStartSvcEnabled = !m_isStartSvcEnabled;

        mnuStartSvc.Visible = m_isStartSvcEnabled;
        lblStartSvc.Visible = !m_isStartSvcEnabled;

        mnuStopSvc.Visible = !m_isStartSvcEnabled;
        lblStopSvc.Visible = m_isStartSvcEnabled;
    } 
```

[![在此处输入图像描述](../Images/4487546964269c1c4c0800a59bf9f872.png)](https://i.stack.imgur.com/TeBsc.png) [![在此处输入图像描述](../Images/3809f5a8e98c9e0664e2ce35d6cba2e9.png)](https://i.stack.imgur.com/zOMuT.png)

（我在创建项目时定义的标签的白色菜单前景色和浅灰色前景色。）

# c# - Querying datatable to get rows with a certain value in the first column

> ID：13364926
> 
> 赞同：1
> 
> 时间：2012-11-13T16:45:54.053
> 
> 标签：c#, asp.net, datatable

I am currently using the code below and am wondering if it would be possible to query based on an entry value. At the moment it returns the number of rows that have been defined.

```
var q = sqlData.AsEnumerable().Take(2); 
```

This data comes in from a database and is imputed into the table but at the moment it only returns database data into the datatable and allows me to select the first two rows and I was wondering if I can query the data table so that I can get the rows that I require based on an index in the actual table itself (e.g. in the table I find five rows and query this information out).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:53:20.450

是的，您可以像普通的 Enumerable 集合一样查询它 -

假设，您希望特定列名的所有行都`"Id"`等于`5`，您可以像这样查询它 -

```
sqlData.AsEnumerable().Where(data => data.Field<int>("Id") == 5); 
```

这将返回列`Id`值为 的所有行`5`。

您可以类似地查询其他数据类型，假设您想获取所有`Name`设置为`TestName`这样的行 -

```
sqlData.AsEnumerable().Where(data => data.Field<string>("Name") == "TestName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:56:08.873

尝试这个

```
var q = sqlData.AsEnumerable()
               .FindAll(data => data.Field<int>("Id") == 10 
                     && data.Field<string>("Name").Equals("SomeName")); 
```

// 查询将返回数据记录，其`id = 10`和`name = 'somename'`。

# azure-storage - Where are Azure Crash Dumps located?

> ID：13364927
> 
> 赞同：1
> 
> 时间：2012-11-13T16:45:55.723
> 
> 标签：azure-storage, autoscaling, wasabi

I have uploaded a hosted service to Azure. I am running a web role and a worker role. The autoscaling block is within the worker role. In Azure storage it automatically created a container called wad-control-container. The autogenerated blob has the following Directory Configuration

```
<DirectoryConfiguration>
      <Path>C:\Resources\directory\3a77c22456b2433890e2976e6621724d.WorkerRole1.DiagnosticStore\CrashDumps</Path>
      <Container>wad-crash-dumps</Container>
      <DirectoryQuotaInMB>1024</DirectoryQuotaInMB>
    </DirectoryConfiguration> 
```

Why is it creating a local path? I do not have a container called wad-crash-dumps. Where can I find the crash dump created by the diagnostic monitor?

# python - 将常用文件导入 Sage

> ID：13364934
> 
> 赞同：1
> 
> 时间：2012-11-13T16:46:24.337
> 
> 标签：python, sage

我想将一些位于单独目录中的实用程序文件导入到我的项目中，例如，这样我就可以`import util`从 Sage 提示符下进行操作。将该目录添加到`SAGE_PATH`变量中允许我这样做，但是当我想读取 SAGE 中任何函数的文档时，这样做会导致问题。例如，

```
sage: solve?? 
```

ImportError Traceback（最近一次调用最后一次）

……

ImportError：没有名为 conf 的模块

知道如何从不同的目录正确导入文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:06:57.187

[导入文件](http://www.sagemath.org/doc/tutorial/programming.html)的标准方法很简单

```
sage: load /path/to/foo.py 
```

或者

```
sage: attach /path/to/foo.py 
```

或`foo.sage`，视情况而定。`init.sage`如果您总是希望这种情况发生，您可以在您的`DOT_SAGE`目录（通常位于）中创建一个名为的文件，`$HOME/.sage/`您可以使用它。

# memory-management - 当操作系统将程序从文件系统加载到内存中时，操作系统如何知道程序有多大？

> ID：13364938
> 
> 赞同：3
> 
> 时间：2012-11-13T16:46:46.250
> 
> 标签：memory-management, operating-system

当操作系统将程序从文件系统加载到内存中时，操作系统如何知道程序有多大？

它一次只从文件系统中翻页吗？或者是否有某种硬件或软件指示器，以便操作系统知道程序有多大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:30:25.960

可执行文件的开头有一个标头，它为操作系统布置了可执行文件的各个部分。在 Linux 上，这通常是[“ELF”格式](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)，在 Windows 上是不同的格式，但想法是一样的。

可执行文件中的部分可以直接复制到内存中，也可以按需加载/分页。某些部分可能是虚拟的（例如，布局显示“我需要 8MB 的零内存”，但文件实际上并不包含 8MB 的零）。部分可以在内存中移动，或者可以加载到内存中的固定位置。

操作系统仅以这种方式加载初始可执行文件。任何其他文件（或动态链接库等）都由操作系统间接加载（应用程序只要求内存，要求将文件位复制到该内存中，然后跳转到该代码）。

# actionscript-3 - 为影片剪辑分配编号以插入公式...不起作用

> ID：13364945
> 
> 赞同：0
> 
> 时间：2012-11-13T16:47:10.977
> 
> 标签：actionscript-3, flash

所以我试图垂直均匀地排列这些电影剪辑，所以我想出了一个涉及 n（按钮编号）的数学公式，但它不起作用。

```
var buttonArray:Array = [side_banner.btn1, side_banner.btn2, side_banner.btn3, side_banner.btn4];

var buttonCount:uint = buttonArray.length;

for (var i:uint = 0; i < buttonCount; i++) {
  buttonArray[i].addEventListener(MouseEvent.CLICK, outputNumber);
  buttonArray[i].theTrigger = [i + 1];
}

function outputNumber(e:MouseEvent):void {
  trace( e.target.theTrigger);
  buttonArray[i].y = (((stage.stageHeight - 400)/4)*(e.target.theTrigger)) - ((stage.stageHeight - 400)/4)/2
} 
```

但显然每个电影剪辑实际上并没有一个数值，只是一个数字名称......我怎样才能获得“n”btn 数字来使用我的公式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:57:15.027

看起来你有方括号，你应该没有任何东西或括号：

```
buttonArray[i].theTrigger = [i + 1]; 
```

我也不认为按钮是动态的，因此您不能随意向其添加属性，但是只要您的按钮不直接用作渲染器，就应该安全地使用数据值。喜欢

```
buttonArray[i].data = i+1; 
```

# valgrind - valgrind 无法检测到什么样的错误？

> ID：13364954
> 
> 赞同：2
> 
> 时间：2012-11-13T16:47:37.017
> 
> 标签：valgrind, segmentation-fault

我有一个与 SIGSEGV 崩溃的应用程序。

```
--20183-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 (SIGSEGV) - exiting
--20183-- si_code=80;  Faulting address: 0x0;  sp: 0x409a8de60

valgrind: the 'impossible' happened:
   Killed by fatal signal
==20183==    at 0x38039981: vgPlain_arena_free (m_mallocfree.c:245)
==20183==    by 0x38001E84: die_and_free_mem (mc_malloc_wrappers.c:124)
==20183==    by 0x380688C3: vgPlain_scheduler (scheduler.c:1402)
==20183==    by 0x380913F4: run_a_thread_NORETURN (syswrap-linux.c:95) 
```

它一定是某种内存损坏弄乱了 malloc 链，因为崩溃发生在随机位置 - 但总是在释放时。

通常你会看到这样的消息：

```
Invalid write of size 8 
```

这表明我破坏了内存的地方，但*没有任何消息*，只是立即崩溃。AFAIK valgrind 涵盖了大多数系统调用，因此它甚至会报告与这些调用相关的问题，所以......

我的理论（*）问题是：我应该寻找什么样的错误？*valgrind 无法检测到什么样的无效写入？*

(*)：请不要询问实际代码，正如我所说，这是一个理论问题。

附带问题：还有其他工具可以解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:34:23.897

只检查堆上的分配，不检查*全局/堆栈*变量。

*如果最终访问有效内存（另一个分配的块），则不会捕获*缓冲区溢出。*对于以下示例 valgrind 不会报告溢出（当然这完全取决于您使用的内存分配器......）：*

 *```
int main() {
    char* a = malloc(1024);
    char* b = malloc(1024);
    *(a+1600) = '!';
} 
```

就我而言，valgrind 的 ptrcheck 工具 ( `--tool=exp-ptrcheck`) 发现了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:15:12.433

除非最近发生了变化，否则 Valgrind 的 Memcheck 工具无法检测覆盖堆栈数组边界。这可能会导致 Valgrind 可能无法解决的各种有趣的问题。

我做了一些挖掘，发现了一个名为[Annelid](http://valgrind.org/downloads/variants.html?njn)的用户创建的工具，它声称能够检测堆栈变量损坏。这可能有助于发现此类问题。

我对 Valgrind 内部结构的大部分经验都围绕它的内存检查系统展开，因此其他人可能能够详细说明它的其他方面以及它可以检测到和不能检测到的内容。*

# c++ - 在指针向量中释放内存的正确方法？(C++)

> ID：13364955
> 
> 赞同：5
> 
> 时间：2012-11-13T16:47:51.130
> 
> 标签：c++

我有一个作业问题，其中我有一个`class Student`, 和一个指向`Student`对象的向量，它是 Student 类中的一个成员字段：

```
vector<Student*> vectorName; 
```

为了进行正确的（？）内存管理，我在 Student 类中声明了析构函数，如下所示

```
Student::~Student() {
  for(int i=0; i<vectorName.size(); i++){
    delete vectorName.at(i);
  }
} 
```

这**真的**从堆中正确释放内存，还是有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T16:53:59.153

这主要取决于`Student*`引用存储的位置。如果一个`Student*`实例有它的个人学生列表，这些学生列表在其他任何地方都没有引用，那么你正在做的事情会产生许多悬空指针。

隐式调用销毁`std::vector`包含对象上的析构函数时，这意味着如果包含的对象`Student*`只是释放指针的空间，您必须手动执行您正在执行的操作，**如果且仅当您不这样做时，这是正确的将相同的 Student* 存储在多个集合**中。

所以总结一下：

*   `Student*`如果向量包含对它的唯一引用，则必须删除该对象。
*   删除`Student*`集合中的 a 将使其他集合中指向它的指针无效，这将导致问题
*   在共享学生的情况下，您必须找到一种方法来检查何时不再引用它（同时销毁向量），以便您可以安全地删除它。（请参阅智能指针，您也可以手动计算引用，但这将是重新发明轮子）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:53:10.703

如果您分配了`vectorname`with的项目`new Student`，那么是的。但是您必须记住，在此之后， a 指向的任何数据 都将`vectorName.at(i)`被销毁，并且不应在程序的其他地方访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T16:56:50.223

如果向量拥有学生（也就是说，它负责删除它们），则根本不要使用指针（除非您需要多态性，但您没有在问题中说明，所以我假设您没有）。如果你这样做了，你就不需要再显式地定义 dtor、copy ctor 和 copy assignment 操作符了；参见[零规则](http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html)。

```
vector<Student> vectorName; 
```

如果您不希望在将对象插入向量时复制对象的开销，请移动它们或使用`emplace_back`：

```
vectorName.push_back(std::move(student));
vectorName.emplace_back("John", 42); 
```

# maven - Maven Assembly 分发 jar-with-dependency 包括只有 google guava 的 jar

> ID：13364956
> 
> 赞同：1
> 
> 时间：2012-11-13T16:47:51.660
> 
> 标签：maven, maven-assembly-plugin

我有一个多模块项目，不同的模块使用 google guava 作为依赖项。与所有示例一样，另一个子模块仅用于为项目构建分发。在那个项目中，我使用程序集插件来创建一个带有依赖关系的模块罐子的目录。问题在于，对于每个依赖于 google guava 的项目，它都会创建一个没有“jar-with-dependencies”标签的单独 jar，仅包含 google guava。

例如：

```
 parent
    |- moduleA
       |- pom.xml
       |-src
         |- ...   
    |- dist 
       |- pom.xml
       |- src
          |- main
             |- assembly
                |- assembly.xml
       | - target
          |- libs
             |- moduleA-XX.x-SNAPSHOT.jar
             |- moduleA-XX.x-SNAPSHOT-jar-with-dependencies.jar
   |- pom.xml 
```

moduleA-XX.x-SNAPSHOT.jar 仅包含 google guava。我没想到会构建一个只包含 google guava 的 jar。

## 模块一个 pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
     <modelVersion>4.0.0</modelVersion>

     <parent>
       <groupId>foor.bar</groupId>
       <artifactId>parent</artifactId>
       <version>0.0</version>
     </parent>

     <artifactId>commons</artifactId>
     <version>0.0-SNAPSHOT</version>
     <packaging>jar</packaging>

     <name>Commons</name>

     <properties>
       <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
     </properties>

     <dependencies>
       <dependency>
         <groupId>com.google.guava</groupId>
         <artifactId>guava</artifactId>
         <version>11.0</version>
       </dependency>
     </dependencies>

     <build>
       <!-- For annotations and other Java5 stuff -->
       <plugins>
         <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-compiler-plugin</artifactId>
           <version>2.5.1</version>
           <configuration>
             <source>1.7</source>
             <target>1.7</target>
           </configuration>
         </plugin>
         <plugin>
           <artifactId>maven-assembly-plugin</artifactId>
           <version>2.3</version>
           <configuration>
             <descriptorRefs>
               <descriptorRef>jar-with-dependencies</descriptorRef>
             </descriptorRefs>
           </configuration>
           <executions>
             <execution>
               <id>make-assembly</id> 
               <phase>package</phase> <!-- bind to the packaging phase -->
               <goals>
                 <goal>single</goal>
               </goals>
             </execution>
           </executions>
         </plugin>
       </plugins>
     </build>
   </project> 
```

## dist 程序集.xml

```
 <assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
     <id>bin</id>
     <formats>
       <format>dir</format>
     </formats>
     <includeBaseDirectory>false</includeBaseDirectory>
     <moduleSets>
       <moduleSet>

         <!-- Enable access to all projects in the current multimodule build! -->
         <useAllReactorProjects>true</useAllReactorProjects>

         <!-- Now, select which projects to include in this module-set. -->
         <includes>
           <include>**</include>
         </includes>
         <binaries>
           <attachmentClassifier>jar-with-dependencies</attachmentClassifier>
           <outputDirectory>libs/</outputDirectory>
           <unpack>false</unpack>
         </binaries>
       </moduleSet>
     </moduleSets>
   </assembly> 
```

# google-apps-script - 如何使用 Google Scripts 打开网站？

> ID：13364957
> 
> 赞同：0
> 
> 时间：2012-11-13T16:47:54.707
> 
> 标签：google-apps-script

我正在尝试编写一个 Google 脚本来记录一些用户数据，例如日期、用户 ID 和他点击的链接，然后为他打开相关的点击链接。我写了以下脚本：

```
function doGet() {

var ss =SpreadsheetApp.openById('????').getSheets()[0];
var range = ss.getRange(ss.getLastRow()+1, 1, 1, 3);
var mm=Session.getActiveUser().getUserLoginId();
var values = [[new Date(), mm,'diigo']];    
range.setValues(values);    
return HtmlService.createTemplateFromFile('hello').evaluate();  
} 
```

在 hello.html 我写道：

```
<html>
<a href="http://www.diigo.com> HTMLgoodies </a>  
</html> 
```

但它不会打开 diigo 网站，但它会记录信息。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:08:19.793

看到这个[回复](https://stackoverflow.com/questions/13272748/how-to-open-a-given-url/13290663#13290663)。简短的回答是您不能在 Apps 脚本中自动打开窗口。该回复中发布了一些替代方案。

# python - 如何在 Python 中验证我的线程安全模型？

> ID：13364962
> 
> 赞同：0
> 
> 时间：2012-11-13T16:48:06.437
> 
> 标签：python, testing, thread-safety

我正在做[ddbmock 项目](http://pypi.python.org/pypi/ddbmock)。基本上，这是一个复制 Amazon DynamoDB API 的服务器。

尽管此实现不直接涉及线程，但它很可能在多线程环境中运行，并且目前，我知道它具有不可预测的“特性”:) 所有线程都将在同一个存储中工作......

第一步是添加互斥体，但我如何测试我没有遗漏任何东西并且设计确实有效？有什么可靠的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:09:34.190

观看[此](https://www.youtube.com/watch?v=zEaosS1U5qY)视频，您将意识到在 CPython 中**无法**可靠地执行您想要的操作。这仅仅是因为 python 将**一切都**交给了操作系统。它不以任何方式（主动）控制调度，它只是释放 GIL，有时让操作系统在需要*时**进行*上下文切换。这对多核计算机产生了一些丑陋的后果。

 *无论如何，在其他语言中，这也是**很难**做到的。调试并发程序是一个地狱，这就是为什么你应该尽可能避免它（如果你想进行可靠的测试）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T18:31:00.750

@martineau，问题不仅限于CPython。任何时候有共享资源都可能导致并发问题。

一种方法是完全避免它。序列化所有内容，不允许并发。鉴于这是一个内存模拟服务器，这可能是一个合理的限制。

但是，如果您确实想提供并行访问，我会使用的策略是长时间使用各种请求对系统进行压力测试。这往往会摆脱大量的竞争条件错误。否则我知道没有可靠的方法来证明程序没有并发错误。*

# tsql - 调试此查询所需的指针

> ID：13364963
> 
> 赞同：0
> 
> 时间：2012-11-13T16:48:08.713
> 
> 标签：tsql

我正在尝试调试此查询但没有任何成功。在下面的代码中，如果我注释掉 Pt.pt_id_nbr 它可以工作，否则查询会持续执行很长时间

```
Declare @sAlias         char(1),
 @sGQOrgId  char(3),
 @sID            char(12),
 @sType        char(1),
 @sSource    char(2),
 @dcLocationId numeric(18, 0) = NULL

 set @sAlias='N'
 set @sGQOrgId  =''
 Set @sID     =''
 Set @sType       ='M'
 Set @sSource  ='MD'

SELECT DISTINCT 
         '' 'ImportID',d.GQOrgId, d.DeviceId
        --,isnull(Pt.Pt_id_nbr,0)as Pt_id_nbr
        --,Pt.pt_id_nbr works if commented out else the query keeps executing for a long time
        , DeviceDesc = LTRIM(RTRIM(d.DeviceDesc)), d.Source, 
                      SourceDesc = LTRIM(RTRIM(s.SourceDesc))
        FROM    GasQuality.dbo.Device AS d WITH (NoLock)
        JOIN    GasQuality.dbo.SourceCodes AS s WITH (NoLock)
        ON      s.Source = d.Source
        left join elm_qa.elm.dbo.pt_sys_xref as Pt WITH (NoLock)
        ON    d.DeviceID = Pt.REF_VAL  and (Pt.OLD_SYS_ID = 'PK' and Pt.VAL_TYPE_CD = 'OM' ) 
        WHERE s.Type = @sType AND
            d.GQOrgId LIKE RTRIM(@sGQOrgId) + '%'
            AND d.Source LIKE RTRIM(@sSource) + '%'
            AND d.DeviceId LIKE RTRIM(@sID) + '%'

        ORDER BY d.GQOrgId, d.DeviceId, d.Source 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:37:34.050

然后我会尝试将它作为一个组而不是一个独特的。

# javascript - 失去焦点后如何重置 webcontrol.textbox.text？

> ID：13364964
> 
> 赞同：-1
> 
> 时间：2012-11-13T16:48:09.027
> 
> 标签：javascript, asp.net, vb.net-2010, asp.net-webcontrol

我有一个 asp 页面，顶部有过滤器文本框。这 3 个文本框在其中呈现文本（说明要输入的内容）。我已经添加了代码以在文本框获得焦点时选择所有文本，但现在我需要在某种意义上在控件失去焦点时执行完全相反的操作。此处的目标是使文本框过滤器始终使用默认文本填充，除非用户输入了有效的过滤器值。

基本上

如果 control.text = string.empty 和 control.lostfocus 然后将文本设置回“默认”结束如果

到目前为止，我在页面加载时有此代码...

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        txtAcctFilter.Attributes.Add("onFocus", "JavaScript:this.select();")
        txtMonthFilter.Attributes.Add("onFocus", "JavaScript:this.select();")
        txtYearFilter.Attributes.Add("onFocus", "JavaScript:this.select();")
        'txtAcctFilter.Attributes.Add("onBlur", )
        'txtMonthFilter.Attributes.Add("onBlur", txtMonthFilter.Text = "Enter Month")
        'txtYearFilter.Attributes.Add("onBlur", txtYearFilter.Text = "Enter Year")
        Populate()
    End If
End Sub 
```

注释掉的 3 行是我的尝试，但我相信它们是在控件上恢复的属性之间的问题。我是 javascript 的菜鸟，所以不确定那里到底发生了什么。关于如何让这个简单的逻辑起作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:52:31.373

这将是这样的：

```
txtMonthFilter.Attributes.Add("onBlur", "javascript: if (this.value == """") {this.value = ""Enter Month""}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:07:06.787

```
you can use jquery:

$('input[id$="txtMonthFilter"]').blur( function () {
   if ($(this).val() == '') $(this).val('Enter Month');
}); 
```

# ruby-on-rails - Rails 3：与 3 个组合模型的关联

> ID：13364970
> 
> 赞同：0
> 
> 时间：2012-11-13T16:48:39.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, associations

我无法通过我的关联访问模型。我有三个模型：

*用户.rb*

```
class User < ActiveRecord::Base
 devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable

 has_one :profile
 has_many :posts
 attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

*简介.rb*

```
class Profile < ActiveRecord::Base
 belongs_to :user, :dependent => :destroy
 has_many :posts
 attr_accessible :currentlatitude, :currentlongitude, :forename, :surname, :profpicture, :notes                      
end 
```

*Post.rb*

```
class Post < ActiveRecord::Base
 ...
 attr_accessible :title, :body, :tag_list, :blogger_id, :coverphoto, :locations_attributes
 belongs_to :user, :polymorphic => true
 has_and_belongs_to_many :locations
 has_one :profile
end 
```

我想在帖子标题旁边的帖子索引视图中显示 Profile.forename，但是当我尝试时；

```
<%= post.profile.forename %> 
```

我只是收到以下错误：

```
SQLite3::SQLException: no such column: profiles.post_id: SELECT  "profiles".* FROM "profiles"  WHERE "profiles"."post_id" = 56 LIMIT 1 
```

我认为上述关联有问题，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:12:24.510

尽量保持双方的关系：`belongs_to`<=> `has_many/has_one`。因此，在您的情况下，您应该更改：

```
class Post < ActiveRecord::Base
 ...
 belongs_to :profile
 ...
end 
```

此外，为了使其工作，您应该添加`profile_id`到您的`posts`表格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:42:55.187

我认为你可以通过这样定义关联来做到这一点：

```
class Post < ActiveRecord::Base
  ...
  has_one :profile, :through => :user
end 
```

然后，您可以获得：`post.profile.forename`

希望这会有所帮助。

# oracle - 如何解决以数字字符开头的表名的直接 Oracle 访问失败？

> ID：13364977
> 
> 赞同：1
> 
> 时间：2012-11-13T16:49:19.157
> 
> 标签：oracle, delphi, c++builder, double-quotes

有谁知道如何使 Direct Oracle Access 处理涉及以数字字符开头的表的查询。

原始表是用双引号创建的，我们在表名周围用双引号形成查询。但是 DOA 在执行其内部/中间查询时会故意去掉双引号。这会导致我们的应用程序中的访问冲突。

不幸的是，此时修改表名是不可行的，侵入 DOA 源代码也不是我们想做的事情。

有没有其他人经历过这种情况，如果有，你是如何解决这个问题的。

不幸的是，这是我继承的系统，双引号表名无处不在。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:11:24.810

创建一个同义词并从您的应用程序中引用它。

```
SQL> create table "1table" (id  number);

Table created.
SQL> create synonym foo for "1table";

Synonym created.

SQL> select  * from foo;

no rows selected

SQL> 
```

# c++ - 将值从 fortran 传输到 C++，使其显示为 numeric_limits 在 C++ 中通过共享内存

> ID：13364978
> 
> 赞同：1
> 
> 时间：2012-11-13T16:49:18.807
> 
> 标签：c++, fortran

我需要将一个数字从 fortran 传输到 C++，以便在 C++ 中读取它时，它被视为 numeric_limits::quiet_nan()。我们在 Fortran 端使用 Salford/Intel 编译器，在 C++ 端使用 VS2010，使用 Windows 中的共享内存。

任何想法，詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:51:20.440

Fortran 2003 标准定义了一个内在模块，该模块*除其他外*`ieee_arithmetic`包含名为. 同一个模块还定义了一堆该类型的命名常量，其中一个命名常量的名称是. *`ieee_class_type``ieee_quiet_nan`*

 *`ieee_arithmetic`还定义了一个带有`ieee_value`2 个参数的函数；其中第一个（调用它`x`）是一个实数，第二个（调用它`class`）接受一个类型的值，`ieee_class_type`因此`ieee_quiet_nan`函数调用`ieee_value(x,ieee_quiet_nan)`将返回一个与 IEEE 相同类型和种类的 IEEE quiet NaN `x`。

请注意，此函数仅在函数调用`ieee_support_nan(x)`返回时才有效`.true.`。Fortran 处理器不需要支持 IEEE 算术的所有功能，并且为了可移植性，最好先检查您要使用的功能。

因此，我想，如果您的 Fortran 和 C++ 程序共享内存，则 Fortran 语句如

`y = ieee_value(x,ieee_quiet_nan)`

会将位放入`y`您的 C++ 程序将理解为安静 NaN 的名称指定的位置。

**编辑**

如果，正如 Vladimir F 告诉我们的那样，Salford 的 Fortran 缺乏`ieee_arithmetic`我想你将不得不求助于 Fortran 的小工具。在 C++ 中用你想要的位数声明一个整数变量，找出一个安静的 NaN 的有效位模式是什么，那么它应该是飞机航行。*

# css - CSS绝对定位是否意味着不使用它？

> ID：13364980
> 
> 赞同：-2
> 
> 时间：2012-11-13T16:49:21.820
> 
> 标签：css

我担心地使用了这个位置：绝对；在我的模板容器中，以便我放置中心和两侧。

但是，正如我担心的那样，如果您碰巧希望您的网站被您以外的其他人访问，那么请不要使用它。这是因为绝对位置对您来说意味着一件事，而对于拥有不同尺寸的不同显示器屏幕的其他人来说意味着另一件事，对吧？

我去另一台电脑查看我的网页，但盒子向右移动了？

我说的对吗？

谢谢你

这是我的容器

```
#container-center{
  width:630px; /*** Set to = center col width ***/
  height:500px;
  float:center;
  font-size:8px;
  display:inline;
  position:absolute;
    left:450px;
    top:80px;

/* \*/
  margin-left:-1px;
/* Hidden from IE-mac */
}

#left_container_home{
  width:150px; /*** Set to = center col width ***/

  height:500px;

  font-size:8px;
  display:inline;
  position:absolute;
    left:250px;
    top:80px;

/* \*/
  margin-left:-1px;
/* Hidden from IE-mac */
}

#right_container{
  width:200px; /*** Set to = center col width ***/

  height:500px;
  float:right;
  font-size:8px;
  display:inline;
  position:absolute;
  left:1085px;
  background:#F3F3F4;
  top:80px;

/* \*/
  margin-left:-1px;
/* Hidden from IE-mac */

} 
```

这种技术正确吗？我的意思是我做了什么。我这么说是因为，我不明白说“左 450 像素”对我来说是正确的，而对于屏幕较小的其他人来说是正确的。

我已经像这样修改了标题，它已经向左漂移了！如果我只是告诉它margin 0 auto，为什么会这样呢？

```
#header {

    background: url("../jq185/css/start/images/ui-bg_gloss-wave_75_2191c0_500x100.png") repeat-x scroll 50% 50% #2191C0;
    font-family: 'trebuchet ms',geneva,arial,tahoma,sans-serif;
    font-size: 10px;
    width: 930px; margin: 0 auto; 
    h2 {color:#ffffff;}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:51:16.897

不，绝对定位有很多用途。css 规范中的所有内容都有其用途，您永远不应该说“不要使用它”。话虽这么说，定位是绝对的，因此如果你做得不好，可能会搞砸。您需要在正确的情况下使用正确的工具，并正确使用它们。

编辑以响应更新的问题：

不。不要为此使用绝对定位！你要做的就是在中间有一个 div 。这可以通过像`<div id="content"></div>`那时这样简单的东西来实现，`#content { width: 1000px; margin: 0 auto;`并且几乎每个人都会以它为中心，几乎没有标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:54:39.370

嗯，不。`position:absolute;`表示它*绝对*定位在*相对*定位的容器中。举个例子：

```
x { position: absolute; top: 0; left: 0; } 
```

这意味着它将被放置在其父容器的左上角，如果有`position:relative;`. 但是，如果它没有，它将继续沿着 DOM 树向上移动，直到找到一个。如果没有人这样做，它将被放置在文档的左上角 ( `body`)。

在此处阅读有关 CSS 定位的更多信息：

*   [https://developer.mozilla.org/en-US/docs/CSS/position](https://developer.mozilla.org/en-US/docs/CSS/position)
*   [http://docs.webplatform.org/wiki/css/properties/position](http://docs.webplatform.org/wiki/css/properties/position)
*   [http://www.quirksmode.org/css/position.html](http://www.quirksmode.org/css/position.html)

在您的具体示例中，我认为您正在寻找简单的中心点。实现这一点的最佳方法不是使用`position: absolute;`，而是将您的内容包装在具有设定宽度的容器中，并应用自动边距，如下所示：

```
.wrap { width: 920px; margin: 0 auto; } 
```

这意味着它有一个固定的宽度，并使用共享两边的剩余空间作为边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:53:14.713

无论屏幕大小如何，绝对定位都会将您的元素定位在所有浏览器中完全相同的屏幕偏移处。但是，在许多情况下，您没有绝对位置的所有内容都将遵循通常的模型，并且会根据屏幕尺寸而变化。您所看到的是相对于其他元素，您的绝对定位元素正在移动。

一旦更改，您在使用绝对定位时对屏幕尺寸所做的任何假设都将被抛弃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T16:58:30.457

绝对定位的元素从其最近的定位祖先偏移，即位置设置为“静态”以外的任何元素的祖先元素，或者如果不存在这样的定位祖先，则为文档根元素。

您这样做的原因有很多。居中内容通常不是其中之一，但还有其他方法可以做到这一点。

# python - 如何在python中将属性访问转换为继承的属性访问？

> ID：13364981
> 
> 赞同：0
> 
> 时间：2012-11-13T16:49:24.873
> 
> 标签：python, inheritance

我在python中有一些继承自超类的类。超类有一个字典，其中包含一些值。一些派生类通过属性访问直接使用这个字典。然而，一些派生类定义了自己的字典，覆盖了超类的字典。

这会产生一种全有或全无的情况，其中类可以从超类继承字典属性，也可以将其替换为自己的。

是否有一种向后兼容的、可取的 pythonistic 方式让子类继承父类的字典并用它们自己的条目来扩充它？如果使用方法访问所有内容，我将在继承的类中执行如下操作：

```
class SuperClass(object):
   my_dict = {'key': 'value'}
   def get_dictioary(self):
        return my_dict

class Inherited(SuperClass):
    my_dict = {'some key': 'some value'}
    def get_dictionary(self):
        dictionary = super(SuperClass, self).get_dictioary().copy()
        dictionary.update(my_dict)
        return dictionary 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:17:33.237

您的子类在实例化时可以使用字典

```
class Inherited(SuperClass):
   my_dict = {}
   def __init__(self, a_dict):
      # get Superclasses dict
      Inherited.my_dict = SuperClass.my_dict
      # update with child class specific values
      Inherited.my_dict.update(a_dict)

in = Inherited({'some key': 'some value'})
in.my_dict #Inherited.my_dict
# {'key': 'value', 'some key': 'some value'} 
```

# php - Wordpress -标签挂钩/过滤器？

> ID：13364983
> 
> 赞同：0
> 
> 时间：2012-11-13T16:49:34.977
> 
> 标签：php, wordpress, plugins, application-cache

我正在为 Wordpress 编写应用程序缓存插件。
我想知道如何将**当前主题**中的 <\html> 标签从我的插件修改为：

<\html manifest="Site_url().../plugin/bla.php?var1=foo&var2=bar">

我正在谷歌搜索并在 wordpress 的开发网站上查找东西，但还没有运气。

我感谢任何帮助（：

最好的，米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:46:31.813

你可以试试`language_attributes`。这假设他们遵循了 wordpress 主题标准，并且他们的标题包括以下内容：

```
<!--[if IE 6]>
<html id="ie6" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 7]>
<html id="ie7" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 8]>
<html id="ie8" <?php language_attributes(); ?>>
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html <?php language_attributes(); ?>>
<!--<![endif]--> 
```

过滤器示例：

```
function jrod_add_html_manifest( $output ) {

    $output .= ' manfiest="Site_url().../plugin/bla.php?var1=foo&var2=bar"';

    return $output;
}

add_filter( 'language_attributes', 'jrod_add_html_manifest' ); 
```

# c# - 根据货币代码将小数格式化为货币

> ID：13364984
> 
> 赞同：8
> 
> 时间：2012-11-13T16:49:36.223
> 
> 标签：c#, format, currency, tostring

我有一张包含金额和货币代码（美元、日元、加元、欧元等）的收费表，并且正在寻找正确格式化货币的最简单方法。使用我的本地文化代码（美国）并使用我的 decimal.ToString("c") 可以获得 0.00 美元的输出，但我想要基于代码的正确货币符号和小数位数。

有没有为此而存在的库？我当然可以为每个语句编写一个 switch 语句和自定义规则，但我认为这一定是以前做过的。

更新：

我修改了 Jon B 的示例代码如下

```
static IDictionary<string, string> GetCurrencyFormatStrings()
{
    var result = new Dictionary<string, string>();

    foreach (var ci in CultureInfo.GetCultures(CultureTypes.AllCultures))
    {
        try
        {
            var ri = new RegionInfo(ci.Name);
            result[ri.ISOCurrencySymbol] =
                  string.Format("{0}#,#0.{1};({0}#,#0.{1})",
                                ri.CurrencySymbol,
                                new string('0', 
                                i.NumberFormat.CurrencyDecimalDigits));
        }
        catch { }
    }

    return result;
} 
```

这使我可以简单地使用 Amount.ToString(Currency["JPY"])，格式将在我的本地上下文中输出逗号分隔符，但会自动输入正确的货币符号和小数位。

让我知道是否有人有更清洁的方法，否则我会很快将 Jon 的答案标记为正确。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-06-03T18:56:21.960

```
public static class DecimalExtension
{
    private static readonly Dictionary<string, CultureInfo> ISOCurrenciesToACultureMap =
        CultureInfo.GetCultures(CultureTypes.SpecificCultures)
            .Select(c => new {c, new RegionInfo(c.LCID).ISOCurrencySymbol})
            .GroupBy(x => x.ISOCurrencySymbol)
            .ToDictionary(g => g.Key, g => g.First().c, StringComparer.OrdinalIgnoreCase);

    public static string FormatCurrency(this decimal amount, string currencyCode)
    {
        CultureInfo culture;
        if (ISOCurrenciesToACultureMap.TryGetValue(currencyCode, out culture))
            return string.Format(culture, "{0:C}", amount);
        return amount.ToString("0.00");
    }
} 
```

以下是为几种不同的货币代码调用 FormatCurrency 的结果：

```
decimal amount = 100;

amount.FormatCurrency("AUD");  //$100.00
amount.FormatCurrency("GBP");  //£100.00
amount.FormatCurrency("EUR");  //100,00 €
amount.FormatCurrency("VND");  //100,00 ?
amount.FormatCurrency("IRN");  //? 100.00 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T16:52:36.057

应该通过传递来完成`CultureInfo`：

```
CultureInfo ci = new CultureInfo("en-GB");
amount.ToString("C", ci); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T17:54:15.650

您可以构建一个字典以从 ISO 货币符号 (USD) 到货币符号 ($)：

```
static void Main(string[] args)
{
    var symbols = GetCurrencySymbols();

    Console.WriteLine("{0}{1:0.00}", symbols["USD"], 1.5M);
    Console.WriteLine("{0}{1:0.00}", symbols["JPY"], 1.5M);

    Console.ReadLine();
}

static IDictionary<string, string> GetCurrencySymbols()
{
    var result = new Dictionary<string, string>();

    foreach (var ci in CultureInfo.GetCultures(CultureTypes.AllCultures))
    {
        try
        {
            var ri = new RegionInfo(ci.Name);
            result[ri.ISOCurrencySymbol] = ri.CurrencySymbol;                    
        }
        catch { }
    }

    return result;
} 
```

这是基本思想，您需要对其进行调整以满足您的需求。

请注意，您当然可以使用`CultureInfo`该类转换为特定文化的字符串，但正如 Alexei 的评论中所述，这将导致每个字符串略有不同（如 1.00 与 1,00）。使用哪种取决于您的需求。

# objective-c - 如何修复 No visible @interface for NSString 声明选择器 JSONValue 错误

> ID：13364985
> 
> 赞同：0
> 
> 时间：2012-11-13T16:49:41.630
> 
> 标签：objective-c, ios, json, sbjson

我遇到了这个错误：

```
No visible @interface for 'NSString' declares the selector 'JSONValue'. 
```

错误发生在：

`NSDictionary * root = [responseString JSONValue]; NSArray *data = [root objectForKey:@"data"];`

有谁知道如何修理它？我会丢失 JSON 文件吗？

![在此处输入图像描述](../Images/8824620771e5992e93fd8e1b379ceaae.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T17:15:51.473

将此行添加到您尝试调用它的 .m 文件的顶部：

```
#import "NSString+SBJSON.h" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T16:53:35.567

安装 NSString+JSON 类别。

# joomla - Joomla 的企业级主机

> ID：13364989
> 
> 赞同：1
> 
> 时间：2012-11-13T16:49:58.553
> 
> 标签：joomla

有人可以推荐一个提供完整、集成 Joomla 包的企业级主机吗？似乎大多数 Joomla 主机都针对较小的站点/公司。是否有大型主机无法处理具有企业级可靠性的大型 Joomla 安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:43:32.330

我不知道您所说的“完整的、集成的 Joomla 包”是什么意思。

但根据您的要求，我可以建议您获得[Dreamhost](http://dreamhost.com/) VPS。

可靠性高，价格合理。

自 2011 年 12 月以来，我一直在使用它，并且在将近一年的时间里，它只下降了约 1 天。我目前正在运行 8 个不同的 joomla 站点，其中 2 个站点的总访问量超过 5.000 次/天，使用大量的 sql 和数据传输。我目前为 vps 捆绑包（600 Mb Ram VPS + mysql VPS）支付大约 35 美元/月。

我认为他们会给 1 或 2 周的免费试用时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:46:19.687

Joomla的[官方主机！](http://www.joomla.org/about-joomla/the-project/partners.html)项目是[Rochen](http://www.rochenhost.com/)。

[我对cloudaccess.net](http://www.cloudaccess.net/)也有很好的体验——他们也专注于 Joomla 托管。

看看他们，然后给我们一些反馈。

# git - 如何在 Git 中检测本地存储库和远程存储库之间的差异

> ID：13364996
> 
> 赞同：7
> 
> 时间：2012-11-13T16:50:07.573
> 
> 标签：git

假设我从存储库的 URL 进行了 Git 克隆。我对文件做了一些更改，做了一个 Git 提交。

当我执行 a`git pull`时，我看到它显示“Already up-to-date”。

它不应该显示一些说我不是最新的东西吗？

我的问题是：

1.  假设我对本地存储库进行了上述更改，但两天内没有提交，但是在两天结束之前，其他人对远程存储库进行了更改。我必须采取哪些步骤来确保我不会覆盖远程存储库中的更改，或者至少能够在提交之前提取最新的更改？

2.  有什么方法可以区分我的本地存储库和远程存储库以检查有什么区别？（如果我只是想回忆一下我以前有什么？）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T17:05:48.757

我的第一个建议是不要`git pull`。执行 a`git fetch`后跟 a `git merge`。

回答你的第零个问题：事实上，你*是*最新的。您拥有远程存储库的所有提交。因此，没有任何东西可以获取或合并¹。

要回答您的第一个问题：

1.  `git commit`：在您自己的分支上提交您的更改，与远程存储库中发生的事情完全无关。
2.  `git fetch origin`: 获取远程存储库 ( `origin`) 的内容，但将它们保存在`origin/branch`分支下。此时您自己的代码不受影响。
3.  `git merge origin/master`: 将远程存储库（您刚才获取的）的分支与当前分支合并`origin/master`。`master``origin`
4.  `git push origin`：将提交和合并推回远程存储库

回答你的第二个问题：

1.  `git fetch origin`: 更新`origin/branch`分支。
2.  `git diff origin/master`：获取当前分支和分支之间的差异`origin/master`。

* * *

¹假设这是您的存储库中的提交最初在分支上的样子`master`：

```
A -> B -> C -> D -> E
                    |
                    |\- master
                    |
                     \- origin/master 
```

这是在您克隆存储库之后。现在你说你在本地分支上做了一个新的提交`master`：

```
A -> B -> C -> D -> E -> F
                    |    |
                    |     \- master
                    |
                     \- origin/master 
```

所以这里有两点需要注意。

1.  假设 remote 中的其他人没有任何活动`origin`，则没有什么新东西要获取。所以`git fetch origin master`告诉你没有什么新鲜事。

2.  如果你这样做`git merge origin/master`，再一次，没有什么可以合并的。`origin/master`是的*前缀*。`master`换句话说，`master`已经包含了所有的提交`origin/master`，所以没有什么新的可以合并。

如果您使用`fetch`and`merge`而不是`pull`，您可以很容易地理解双命令 ( `pull`) 的哪一部分是导致意外（在您看来）行为的部分。

当然，在 a 之后`git push origin master`，你会得到：

```
A -> B -> C -> D -> E -> F
                         |
                         |\- master
                         |
                          \- origin/master 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T16:55:38.933

当您拉取时，它会从服务器中提取历史记录，并自动尝试将您更改的任何内容与其他人更改的内容合并。如果它可以自动执行，那么它将成功并且您将看不到任何内容，如果它失败，那么您将被要求修复任何冲突。您将永远无法默默地覆盖其他人所做的更改。

如果您确实想查看是否有人更改了某些内容，您可以运行此`git fetch`然后`git status`. Status 将打印出哪些文件在本地发生了更改，但它也会显示类似“您的分支在 origin/master 之前 2 个提交”之类的内容，这意味着您有 2 个提交尚未推送到服务器。如果其他人也推送到服务器，那么它会说“您的本地分支和源/主服务器已经分歧。这意味着您和其他人都已承诺主服务器，当您拉动时它会尝试合并它们， 如上所述。

# php - 清爽 并从 php 加载数据

> ID：13364997
> 
> 赞同：-1
> 
> 时间：2012-11-13T16:50:13.903
> 
> 标签：php, javascript, mysql, html

我在我的页面上有一个标签，其中一些和值是从 mySQL DB 填充的。我认为我需要一些 JavaScript。当我选择一个选项时，我想在数据库中的这个适当的数据中显示。无需刷新整个页面。如果你知道的话，你能告诉我怎么做吗？：）

```
<div id="country1" class="tabcontent">
<label>Choose protocol</label>
<SELECT name="cisloprot">
<?php

$con = mysql_connect("localhost", "root", "123456");
$sql = "SELECT kod FROM prot GROUP BY kod";

$rs = mysql_query($sql,$con);

while ($r = mysql_fetch_array($rs))
{

echo "<OPTION VALUE=".$r['kod'].">".$r['kod']."</OPTION>";
}

?>
</SELECT>

</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-13T16:57:00.800

是的，你需要一些 JavaScript ——我建议你使用[jQuery](http://jquery.com/)库。这样做的最佳选择是[AJAX](http://www.w3schools.com/ajax/default.asp)，它很容易理解和用于这些事情。

[有](http://www.w3schools.com/ajax/ajax_aspphp.asp)一个仅使用 JavaScript 执行此操作的示例，[如果](http://www.w3schools.com/jquery/jquery_ajax_intro.asp)您使用 jQuery 执行此操作。[还有](http://www.ibm.com/developerworks/opensource/library/os-php-jquery-ajax/index.html)关于连接 PHP 和 JavaScript 的完整教程。