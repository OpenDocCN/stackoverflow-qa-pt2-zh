# StackOverflow 问答 12619000-12619999

# knockout.js - 带有 Knockout.JS 的交替类

> ID：12619000
> 
> 赞同：0
> 
> 时间：2012-09-27T10:12:41.387
> 
> 标签：knockout.js

我有下一张桌子：

```
 <table class="table" id="calls_table">
        <thead>
        <tr>
            <th class="round-bg header">Val1</th>
            <th class="rep-bg header">Val2</th>
            <th class="rep-bg header">Val3</th>

        </tr>
        </thead>
        <tbody data-bind="template: {name: 'call-template', foreach: calls}">
        </tbody>

    </table> 

    <script type="text/html" id="call-template">
        <tr class="alt">
            <td><a data-bind="attr: {href: url}, text: v1" class="simp" href=""></a></td>
            <td><a data-bind="attr: {href: url}, text: v2" class="simp" href=""></a></td>
            <td data-bind="text: v3"></td>

        </tr>
    </script> 
```

问题是如何为 TR 添加类的交替？比如：class='alt', class=''——请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:10:13.093

您还可以使用 jQuery :odd 或 :even 选择器。

```
$(".table tr:even").addClass('alt'); 
```

这不使用淘汰赛来解决答案，我知道，但有时简单是好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:06:02.050

这个问题在 SO 上[以 $index 绑定的备用行样式回答](https://stackoverflow.com/questions/11231256/alternate-row-style-with-index-binding)

我在[jsfiddle整理了一个工作示例](http://jsfiddle.net/photo_tom/Yr7gQ/)

# ruby-on-rails - 在终端中打开一个 ROR 目录，然后启动 rails server

> ID：12619001
> 
> 赞同：0
> 
> 时间：2012-09-27T10:12:45.100
> 
> 标签：ruby-on-rails, ruby, terminal

我对 ruby​​ 和 ROR 真的很陌生，我在尝试让我之前创建的目录在终端（在 Mac 上）中打开然后启动 Rails 服务器以便我可以在浏览器中预览它时遇到了真正的麻烦。

我一直在尝试：

`cd /Users/sam/Documents/Pudle/Projects/treeb`

和

`ruby /Users/sam/Documents/Pudle/Projects/treeb`

然后运行`rails s`

我认为我遇到的问题是我没有正确加载目录，很抱歉这是一个如此简单的问题，但我已经为此转了几个小时！非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:18:28.600

假设您已经使用 创建了新的 Rails 应用程序`rails new app_name`，您可以简单地通过运行`cd /Users/sam/Documents/Pudle/Projects/treeb`和`rails s`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:22:08.883

参考[`how to create a rails application`](http://guides.rubyonrails.org/getting_started.html#creating-the-blog-application)

假设您的应用程序路径是`cd /Users/sam/Documents/Pudle/Projects/treeb`

然后执行以下操作以启动服务器

```
cd /Users/sam/Documents/Pudle/Projects/treeb
rails server #or just rails s 
```

注意：- 只有当您使用 Rails 3 时，上述内容才有效

对于 Rails 2

```
ruby script/server 
```

# google-chrome-extension - Chromium\Google Chrome 以前版本的开发人员文档

> ID：12619005
> 
> 赞同：0
> 
> 时间：2012-09-27T10:13:04.600
> 
> 标签：google-chrome-extension, chromium

> **可能重复：**
> [我在哪里可以查看哪些 chrome 扩展 API 对哪个 chrome 版本有效](https://stackoverflow.com/questions/11453108/where-can-i-see-which-chrome-extensions-api-is-valid-for-which-chrome-version)

是否有任何可用于 Google Chrome\Chromium 以前版本的开发人员文档？我需要使我的扩展向后兼容到 Chromium 17 版本，但我不知道如何在没有文档的情况下做到这一点。

我正在寻找这样的东西，但对于以前的版本：http: [//developer.chrome.com/extensions/docs.html#versions](http://developer.chrome.com/extensions/docs.html#versions)

# c# - 寻找像 StructuralEqualityComparer 这样的内置类 带有通用版本

> ID：12619007
> 
> 赞同：3
> 
> 时间：2012-09-27T10:13:13.347
> 
> 标签：c#, linq

假设我有两个类`A`并且`B`具有不同数量的属性：

```
class A
{
    public int Pro1  { get; set; }
    public string Pro2 { get; set; }   
}

class B
{
    public int Pro1 { get; set; }
    public string Pro2 { get; set; }
    public bool Pro3 { get; set; }
} 
```

为了进行*结构相等比较*以在 Lamda 方法中使用，例如：Distinct、Intesect... 我必须构建两个自定义`EqualityComparer`：

```
public class CustomComparerA : EqualityComparer<A> {} 
// use all Pro1 and Pro2

public class CustomComparerB : EqualityComparer<B> {} 
// use all Pro1, Pro2 and Pro3 
```

假设我有 10 个实体，我必须构建 10 个自定义比较器，看起来代码不太干净。环顾四周，发现 .NET 框架有一个内置类`StructuralEqualityComparer`，但它标记为`internal`，并且它没有*通用版本*。我看的是：

```
StructuralEqualityComparer<T> 
```

这样我就可以重复使用：

```
listA.Distinct(new Structuralequalitycomparer<A>())
listA.Distinct(new Structuralequalitycomparer<B>()) 
```

有谁知道内置类 .NET 来支持这个？如果没有，有什么原因吗？

还是我们必须自己管理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:10:52.387

我已经设法自己构建，`StructuralEqualityComparer<T>`因为 .NET 不支持这一点，原因是 dasblinkenlight 的回答中提到的，感谢 dasblinkenlight。

```
private class StructuralEqualityComparer<T> : EqualityComparer<T> where T : class
{
    public override bool Equals(T x, T y)
    {
        return typeof(T).GetProperties()
                         .All(pro => pro.GetValue(x).Equals(pro.GetValue(y)));

    }

    public override int GetHashCode(T obj)
    {
        int hashCode = typeof(T).GetProperties()
                                .Aggregate(0, (current, pro) => 
                                     current ^ pro.GetValue(obj).GetHashCode());

        return hashCode.GetHashCode();
    }
} 
```

# javascript - Javascript：将变量设置为 nodeValue 不起作用

> ID：12619010
> 
> 赞同：1
> 
> 时间：2012-09-27T10:13:14.813
> 
> 标签：javascript, variables

我在设置变量时遇到问题，找不到任何有用的文档。

这有效：

```
<!DOCTYPE html>
<html>
 <body onload="alert(document.getElementById('foo').firstChild.nodeValue)">
  <a id="foo" href="old">Foobar</a>
 </body>
</html> 
```

但这不起作用：

```
<!DOCTYPE html>
<html>
 <head>
  <script type="text/javascript">
   var theText = document.getElementById('foo').firstChild.nodeValue ;
  </script>
 </head>
 <body onload="alert(theText)">
  <a id="foo" href="old">Foobar</a>
 </body>
</html> 
```

警报显示“未定义”。我真正想做的是这样的事情，这也行不通：

```
<!DOCTYPE html>
<html>
 <head>
  <script type="text/javascript">
    var theElement = document.getElementById('foo') ;
    var theText = theElement.firstChild.nodeValue ;
    document.write(theElement.getAttribute('href')) ;
    theElement.setAttribute('href', theText) ;
    document.write(meta.getAttribute('href')) ;
  </script>
 </head>
 <body>
  <a id="foo" href="old">Foobar</a>
 </body>
</html> 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:16:46.537

当您的脚本运行时，该`foo`元素不存在。如果您检查 JavaScript 控制台，您应该会看到一个错误，如下所示：

> 未捕获的类型错误：无法读取 null 的属性“firstChild”

您会收到此错误，因为如果找不到您要查找的元素，`getElementById`则会返回。`null`

您需要在标记之后执行 JavaScript 代码。将您的`script`标签移动到底部`body`，或将其放入 DOM 就绪/加载事件处理程序中。例如：

```
<body onload="alert(theText)">
    <a id="foo" href="old">Foobar</a>
    <!-- Now the `foo` element actually exists, our script can find it -->
    <script type="text/javascript">
        var theText = document.getElementById('foo').firstChild.nodeValue;
    </script>
</body> 
```

# wpf - 如何通过触发器从 wpf 中的代码后面设置图像源

> ID：12619013
> 
> 赞同：1
> 
> 时间：2012-09-27T10:13:19.357
> 
> 标签：wpf, image, code-behind

我在xaml中有这样的东西。

```
 <Image.Style>
            <Style TargetType="Image">
                <Setter Property="Source" Value="../Images/FolderImage.png" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=img, Path=IsEnabled}" 
                                                                           value="False">
                        <Setter Property="Source" Value="../Images/FolderImage_Disabled.png" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Image.Style> 
```

我想在后面的代码中实现同样的事情。我做了以下事情：

```
 Style imgStyle = new Style();

        imgStyle.TargetType = typeof(Image);

        Setter imgSetter = new Setter();
        imgSetter.Property = Image.SourceProperty;
        imgSetter.Value = bmpImg;
        imgStyle.Setters.Add(imgSetter);

        disabledImage = new BitmapImage();
        disabledImage.BeginInit();
        disabledImage.UriSource = new Uri("pack://application:,,,/../Images/FolderImage_Disabled.png");
        disabledImage.EndInit();

        DataTrigger trg = new DataTrigger();
        Binding trgBinding = new Binding();
        trgBinding.ElementName = "img";
        trgBinding.Path = new PropertyPath("IsEnabled");
        trg.Value = false;
        trg.Binding = trgBinding;
        imgStyle.Triggers.Add(trg);

        imgSetter = new Setter();
        imgSetter.Property = Image.SourceProperty;
        imgSetter.Value = disabledImage;
        trg.Setters.Add(imgSetter);
        menuIcon.SetValue(Image.StyleProperty, imgStyle); 
```

我在 VS 输出中收到以下错误

```
"System.Windows.Data Error: 4 : Cannot find source for binding with 
    reference 'ElementName=img'. BindingExpression:Path=IsEnabled; DataItem=null;
    target element is 'Image' (Name='img'); target property is 'NoTarget' (type 'Object')" 
```

这里的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:28:26.770

我不确定您为什么要这样做..但是，请尝试设置绑定源。

```
tryBinding.Source = this; 
```

这是您可能要考虑的另一种方式。

*   在后面的代码中创建一个布尔属性
*   将该属性绑定到 img - twoway 模式的 IsEnabled 属性
*   在属性的设置器中，根据值更改图像的来源。

# sql-server - 使用 sql server 2008 R2 的远程过程调用失败

> ID：12619014
> 
> 赞同：62
> 
> 时间：2012-09-27T10:13:22.277
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。我无法远程连接到我的数据库。我收到以下错误。

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。
> （提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）*

我检查了 SQL Server 属性并启用了**Allow remote connections**。

我检查了服务管理器和**SQL Server 服务**是否正在运行。

我检查了配置管理器，我在 SQL Server 服务下看不到任何服务，它显示**远程过程调用失败**

![在此处输入图像描述](../Images/70e8c7447a9511b9e74a62175f4d4e4a.png)

所以请指导我。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-10-13T07:30:19.193

打开控制面板>管理工具>服务>选择标准服务选项卡（在底部）>查找启动SQL Server代理

右键单击并选择属性，

启动类型：自动，

申请，好的。

完毕。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-24T16:43:00.527

我刚刚遇到了同样的问题，并且能够通过安装[Service Pack 1](http://www.microsoft.com/en-us/download/details.aspx?id=26727)来解决它。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-18T04:23:08.660

只有在我的工作机器上安装了 Microsoft Visual Studio 2012 设置后才会出现此错误。

由于是 WMI 错误，我重新编译了 MOF 文件 –> mofcomp.exe "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"

我还取消注册并重新注册了 sql 提供程序 DLL –> regsvr32 "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmprovider.dll" 但问题没有解决。

**解决方案：**

我已经在我的 SQL 2008 R2 实例上应用了 SQL Server 2008 R2 SP2，这解决了 Sql Server 配置管理器的问题。您可以从这里下载安装程序... [http://www.microsoft.com/en-us/download/details.aspx?id=30437](http://www.microsoft.com/en-us/download/details.aspx?id=30437)。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-04-24T10:50:48.113

在尝试了 Stackoverflow 和 Google 之间的一切之后，我终于找到了一个解决方案：http: [//blogs.lessthandot.com/index.php/datamgmt/dbadmin/remote-procedure-call-failed/](http://blogs.lessthandot.com/index.php/datamgmt/dbadmin/remote-procedure-call-failed/)

**TL;博士：**

如果您正在（或曾经）在您的计算机上运行多个版本的 SQL Server，则开始菜单上的配置管理器快捷方式可能指向旧版本，而这是不应该的。在我的例子中，它指向一个旧的 Sql Server 2008 实例。

解决方案是：

1.  根据您的系统，转到 C:\Windows\SysWOW64 或 C:\Windows\System32。
2.  查找名为 SQLServerManagerXX.msc 的可执行文件，如果有多个，请运行最新版本。就我而言，我同时拥有 SQLServerManager11.msc 和 SQLServerManager10.msc，其中第 10 个给出了错误，而第 11 个则完美运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T15:26:35.020

I can't comment yet, but make sure you made all the checks in this quide: [How to enable remote connections in SQL Server 2008?](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx) It should work fine if all steps are made.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T16:45:25.543

> 当 .mof 文件（托管对象格式 (MOF)）在设置期间未正确安装和注册时，似乎会发生此错误。为了解决这个问题，我在命令提示符下执行了以下 mofcomp 命令来重新注册 *.mof 文件：
> 
> mofcomp.exe "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"

[这个](http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/569ee2d4-0805-40e2-a4f0-10f7d573fd75/)对我有用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T12:38:28.053

将 SQL Server 升级到 SP3

您可以从以下位置安装它： http: [//www.microsoft.com/en-us/download/details.aspx?id=27594](http://www.microsoft.com/en-us/download/details.aspx?id=27594)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-03T20:19:25.903

使用以下命令从命令提示符启动 SQL Server 代理：

```
SQLAGENT90 -C -V>C:\SQLAGENT.OUT 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-28T15:38:39.813

您可能需要安装 SQL Server 2008 SP3。

[SQL Server 2008 服务包 3](http://www.microsoft.com/en-us/download/details.aspx?id=27594)

[SQL Server 2012 配置管理器 WMI 错误 - 远程过程调用失败 [0x800706be]](http://thesqldude.com/2012/12/05/sql-server-2012-configuration-manager-wmi-error-remote-procedure-call-failed-0x800706be/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-12T02:16:14.483

我遇到了类似的问题，而 SQLServer 和 SQLServerAgent 服务都在运行。该错误通过重新启动服务来修复。

```
Server Manager > Service > 
    SQL Server > Stop
    SQL Server > Start
    SQL Server Agent > Start 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-18T04:45:02.820

打开控制面板管理工具服务选择扩展服务选项卡

找到 SQL Server(MSSQLSERVER) & SQL Server(SQLEXPRESS) 停止这些服务并重新启动（从上面显示的启动和停止按钮）

完毕。

# c++ - 为什么十进制浮点运算的提议没有被 C++0x 接受？

> ID：12619015
> 
> 赞同：4
> 
> 时间：2012-09-27T10:13:24.243
> 
> 标签：c++, c++11, standards

为什么[小数类型](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2849.pdf)不被 C++0x（现在的 C++11）作为完全成熟的类型或作为类接受？

在 2004 年进行了相当严厉的[批评](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1567.htm)之后，他们从[2005 年](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/)开始着手研究它，而最后一篇论文是[2009 年](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/)，并且通过它[看起来非常完整](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2849.pdf)。尽管大部分问题都已解决，但 2004 年提出的担忧是否是拒绝它的依据？

在[boost](http://www.boost.org/)中甚至没有实现它（尽管在今年早些时候的邮件列表中对此进行了一些[讨论）。](http://lists.boost.org/Archives/boost/2012/05/193217.php)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T10:21:08.617

C++11 的时间非常匆忙。他们真的无法四处走动，包括所有出现的旧事物。到了 2009 年，很明显它会很晚，而他们根本没有考虑到这一点。然而，[N3407](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3407.html)表示提议接受它用于（希望）C++17。

# android - OnOverListener 不起作用

> ID：12619016
> 
> 赞同：1
> 
> 时间：2012-09-27T10:13:39.140
> 
> 标签：android, android-4.0-ice-cream-sandwich

我正在尝试使用新事件 onHover。我查看了示例、文档……但没有任何效果。onHover 事件应该由鼠标指针完成。

我创建了一个简单的 xml 文件，其中包含 1 个 LinearLayout 和 2 个按钮。

我的java代码如下

```
 findViewById(R.id.linearLayout1).setOnHoverListener(new OnHoverListener() {

        @Override
        public boolean onHover(View v, MotionEvent event) {
            Log.e("tag", "tag");
            return false;
        }

    }); 
```

LinearLayout1 是我的包含按钮的线性布局。onHover 永远不会被调用。

我尝试了很多东西都没有成功。

让我知道你是否有想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:21:04.563

在`View`包含子视图的 a 中，首先调用子视图回调。

如果您的 中有一个按钮，`LinearLayout`则首先在按钮和所有其他视图上调用所有事件，并且只有当所有子视图都返回`false`时，才会在父视图上调用该事件。

在激活`onHover`

# arrays - fortran90：以不同的结构打印整数数组

> ID：12619021
> 
> 赞同：0
> 
> 时间：2012-09-27T10:14:04.393
> 
> 标签：arrays, integer, structure, fortran90

我有一个整数数组

```
int(4) :: idate            ! 1979 March 1st 00hrs

write(*,*)idate            ! prints ' 0 3 1 1979' 
```

我想`idate`保存在一个不同的变量（仅限整数/整数数组）中，它将日期打印为：

```
1979030100 
```

无需将其更改为字符/字符串。

这可以做到吗。如果这是微不足道的，请原谅我，但我已经花了很多时间在它上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:30:19.770

你可以这样做：

```
integer :: date_as_int
...
date_as_int = idate(1)*10**6 + idate(2)*10**4 + idate(3)*10**2 + idate(4) 
```

你甚至可能逃脱

```
date_as_int = sum(idate*10**[6,4,2,0]) 
```

或者

```
date_as_int = dot_product(idate, 10**[6,4,2,0]) 
```

方括号语法来自 Fortran 2003。对于较旧的编译器`[6,4,2,0]`，应替换为`(/6,4,2,0/)`.

# android - 如何从 onItemClick 访问 arrayadapter getView 中的变量

> ID：12619022
> 
> 赞同：2
> 
> 时间：2012-09-27T10:14:04.657
> 
> 标签：android, android-listview, android-arrayadapter

我有一个 ArrayAdapter，它的 getView 用数据设置列表视图中的项目。当我单击列表视图中的一行时，我想开始另一个活动（我可以这样做），但向该活动发送一些数据以呈现在另一个视图中。

如何在 onItemClick 方法中使 getView 中的数据可访问？

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View rowView = inflater.inflate(R.layout.rotarowlayout, parent,
                    false);

            TextView startTime = (TextView) rowView
                    .findViewById(R.id.rowstarttime);
            TextView duration = (TextView) rowView
                    .findViewById(R.id.rowduration);
            TextView status = (TextView) rowView.findViewById(R.id.rowstatus);
            TextView name = (TextView) rowView.findViewById(R.id.rowclientname);
            TextView actualTimeIn = (TextView) rowView.findViewById(R.id.rowactualtimein);
            TextView actualTimeOut = (TextView) rowView.findViewById(R.id.rowactualtimeout);

            String record = list.get(position).toString();
            String[] itemsInRecord = record.split(",");
            Log.e(TAG, "itemin record = " + itemsInRecord.length);
            String[] recordItem = new String[itemsInRecord.length];

            for (int x = 0; x < itemsInRecord.length; x++) {

                recordItem[x] = itemsInRecord[x];

            }

            //set date above listview

            textViewDate.setText("Rota For " + recordItem[0].substring(1, 11));

            String withoutBraket = recordItem[0].substring(11);
            String withoutSecs = withoutBraket.substring(0, 6);

            Log.e(TAG, "recordItem = " + recordItem[2]);

            String _statusString = recordItem[2].toString().trim();

            if(_statusString.equalsIgnoreCase("Completed")){

                statusField = "c";

            }else if(_statusString.equalsIgnoreCase("NCR")){

                statusField = "NCR";

            }else if(_statusString.equalsIgnoreCase("Waiting")){

                statusField = "W";
            }

            Log.e(TAG, "statusField = " + statusField);

            startTime.setText(withoutSecs+"     " );
            duration.setText( recordItem[1]+" mins     ");
            status.setText( statusField);
            name.setText( "     " + recordItem[3] + recordItem[4]);
            callID = recordItem[5];
        //  needName = recordItem[6];
            actualTimeIn.setText("This call was completed at " + recordItem[6] + " - ");

            if( ! recordItem[7].toString().trim().equalsIgnoreCase(  "]")){

            String stripBracket = recordItem[7].toString().trim();
            Log.e(TAG, "stripBracket = " + stripBracket);
            String stripBracket2 = stripBracket.substring(0,5);
            Log.e(TAG, "SB after split = " + stripBracket2 );
            actualTimeOut.setText(stripBracket2);
            }

            return rowView;

        } 
```

.

```
@Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        Log.e(TAG, "inside onItemClick");
Intent i = new Intent(GetRota.this, someOtherActivity.class);
    i.putsomedata;
    startActivity(i);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:23:11.103

通过 Using`setTag()`和`getTag()`方法，您可以从`onItemClick()`. 像这样

在适配器类中

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {           

    rowView.setTag(yourdata_object);
    return rowView;
} 
```

在项目点击

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

   YourDataObject item = (YourDataObject ) view.getTag();
   Intent i = new Intent(GetRota.this, someOtherActivity.class);
   i.putsomedata;
   startActivity(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:23:25.707

试试这个。

您将在 onItemClick 方法中获得单击项目的位置以及在列表中单击的视图。因此，您可以将标签设置为在 getView 和 onitemClick 中查看，您可以获得该视图标签并传递给意图。

```
rowView.setTag(YOURDATA);  // in getView

@Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        Log.e(TAG, "inside onItemClick");
       Intent i = new Intent(GetRota.this, someOtherActivity.class);
       (yourData) = view.getTag();   // get the tag value and set to putextra
       i.putsomedata;
       startActivity(i);

    } 
```

# sql - SQL 中的时间聚合

> ID：12619027
> 
> 赞同：2
> 
> 时间：2012-09-27T10:14:15.210
> 
> 标签：sql, time, aggregation

我有一个数据集，其中包括时间 {hh,mm,ss} 和温度。我想根据时间汇总温度。对于特定小时内的每一分钟，都有许多温度记录，我想计算它们的平均值，以便每分钟都有一个值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:18:31.690

使用日期函数 ( [http://www.w3schools.com/sql/](http://www.w3schools.com/sql/) ) 获得更一般（不太精确）的时间 [即仅小时和分钟]，按此分组并使用平均 SQL 函数来获得平均值。

# java - 是否可以使用 Ghost4j 创建图像的 PDF 文件？

> ID：12619028
> 
> 赞同：3
> 
> 时间：2012-09-27T10:14:18.880
> 
> 标签：java, image, pdf, pdf-generation, ghostscript

我需要使用 Ghost4j 创建一个包含多个图像的 PDF 文件？真的有可能吗？我在他们的网站上没有找到任何相关文档...欢迎任何有价值的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:34:51.157

Ghostscript 将 PostScript 和 PDF 文件作为输入处理，而不是图像文件格式。也就是说，PostScript 是一种编程语言，因此可以在 PostScript 中编写导入工具。作为标准，Ghostscript 附带导入 GIF、JPEG、BMP 和 PCX 文件格式的代码 (ghostpdl/gs/lib/view___.ps)

但是，我不知道 Ghost4j 暴露了什么（此外，我不是 Java 程序员）所以我不能告诉你如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:30:41.450

不确定 Ghost4j，我使用[PDFBox ImageToPDF](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/examples/pdmodel/ImageToPDF.html)

实际代码可以在[这里](http://www.docjar.org/html/api/org/apache/pdfbox/examples/pdmodel/ImageToPDF.java.html)找到，您也可以根据自己的要求进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T23:30:49.587

这是使用 Ghost4j 将 pdf 转换为图像的工作示例：

```
import org.ghost4j.document.DocumentException;
import org.ghost4j.document.PDFDocument;
import org.ghost4j.renderer.RendererException;
import org.ghost4j.renderer.SimpleRenderer;
import java.awt.Image;
import java.awt.image.RenderedImage;
import java.io.File;
import java.util.List;
import javax.imageio.ImageIO;
import java.io.IOException;

public class PdfToIm_G4J {

    public void convertPdfToIm( String pdfFilePath, String imExtension ) throws 
                                     IOException,DocumentException,RendererException

        // load the pdf
        document.load( new File( pdfFilePath ) );     

        // create renderer
        SimpleRenderer renderer = new SimpleRenderer();

        // set resolution (in DPI)
        renderer.setResolution( dpi );

        // render the images
        List<Image> images = renderer.render( document );

        // write the images to file
        for (int iPage = 0; iPage < images.size(); iPage++) {
            ImageIO.write( (RenderedImage) images.get( iPage ), imExtension, 
                            new File( "" + iPage + "." + imExtension ) );
        }

    }    

} 
```

# extjs - 如何在 ExtJs 商店中使用过滤器？

> ID：12619039
> 
> 赞同：8
> 
> 时间：2012-09-27T10:14:47.950
> 
> 标签：extjs

我使用 ExtJs 创建了一个商店，我想将商店的值加载到 ComboBox。但在加载值之前，我需要根据在另一个组合框中选择的值过滤一些数据。

因此，为此目的，我认为我需要在商店中应用过滤器，请任何人都可以帮助我如何做到这一点。

模型：-

```
Ext.define('City', {
extend: 'Ext.data.Model',
fields: [
        { name: 'StateId', type: 'string' },
        { name: 'City', type: 'string' },
]}); 
```

店铺：-

```
var cityStore = Ext.create('Ext.data.Store', {
model: 'City',
data : [
    { StateId: '1', City: 'Bangalore'},
    { StateId: '1', City: 'Mysore'},
    { StateId: '1', City: 'Dharwad'},
    { StateId: '2', City: 'Mumbai'},
    { StateId: '2', City: 'Pune'},
    { StateId: '2', City: 'Nagpur'}
   ]}); 
```

现在我正在使用这个**cityStore**来加载 Combobox。但在加载之前，如果**stateId 为 1**，那么只有 3 条记录**（Bangalore、Mysore、Dharwad）**加载到组合框中，如果**stateId 为 2**，则其他 3 条记录加载到组合框中。我怎样才能实现它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-27T10:37:15.333

根据[Ext.data.Store 过滤](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-filter)方法文档：

```
var stateId = 1; // your value
cityStore.clearFilter(true);
cityStore.filter('StateId', stateId); 
```

**更新**

我发现 ComboBox 自己过滤数据，没有机会改变它的行为。但我看到了这个问题的两种解决方案：

1.  手动过滤数据（参见[Ext.util.MixedCollection 过滤器](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.MixedCollection-method-filter)）并将其加载到您的商店（参见[Ext.data.Store load](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load)）

2.  禁用商店`clearFilter`和`filter`方法并使用自己的`cityFilter`：

    ```
    Ext.define('CityStore', {
        extend: 'Ext.data.Store',
        filter: Ext.emptyFn,
        clearFilter: Ext.emptyFn,
        cityFilter: function (stateId) {
            Ext.data.Store.prototype.clearFilter.call(this);
            Ext.data.Store.prototype.filter.call(this, 'StateId', stateId);
        }
    }); 
    ```

    然后使用`cityFilter()`方法。

# mysql - 使用with_lockmode（主查询）时如何在SQLAlchemy RoutingSession.get_bind中做'if else'判断

> ID：12619041
> 
> 赞同：0
> 
> 时间：2012-09-27T10:14:52.660
> 
> 标签：mysql, sqlalchemy, master-slave

我想从 mysql 数据库中获取一行，然后修改一些字段并提交。在我提交之前，应该禁止更新这一行。所以我使用**with_lockmode('update')**。我使用以下 RoutingSession，我发现它使用**Slave**来执行此查询。但我想用**Master**做这个查询，我应该在**get_bind**做什么？？？

```
class RoutingSession(Session):
    def get_bind(self, mapper=None, clause=None):
        if self._flushing:

            return engines['master']
        else:
            return engines['slave']

row = session.query(SomeTable).filter(SomeTable.id = 1).with_lockmode('update').one
row.somefield = 'newcontent'
session.commit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:07:20.617

我假设你从我[在 SQLAlchemy 中的 Django-style Database Routers 的](http://techspot.zzzeek.org/2012/01/11/django-style-database-routers-in-sqlalchemy/)博客文章中获得了这个秘诀。如果您查看“手动访问”部分，您将看到当您需要将路由会话显式指向某个节点时的配方：

```
class RoutingSession(Session):

    def get_bind(self, mapper=None, clause=None ):
        if self._name:
            return engines[self._name]
        elif mapper and issubclass(mapper.class_, OtherBase):
            return engines['other']
        elif self._flushing:
            return engines['master']
        else:
            return engines[
                    random.choice(['slave1','slave2'])
                ]

    _name = None
    def using_bind(self, name):
        s = RoutingSession()
        vars(s).update(vars(self))
        s._name = name
        return s 
```

然后，您只需明确地使用该绑定进行操作：

```
m1 = Session().using_bind("master").query(Model1).first() 
```

# bazaar - 转换 bzr 的三重修订号

> ID：12619048
> 
> 赞同：0
> 
> 时间：2012-09-27T10:15:14.110
> 
> 标签：bazaar

`bzr annotate`给出分支的修订版本的形式的修订`a.b.c`版本号；`a`对于我们的工作流程，更有趣的是知道此更改在哪个修订版中合并回当前存储库。我可以让 bzr 告诉我这些信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:38:30.797

您可以使用修订前缀`mainline:`，请参阅`bzr help revisionspec`详细信息。

例如，

```
bzr revno -r 1.2.3 
```

打印 1.2.3，但是

```
bzr revno -r mainline:1.2.3 
```

打印合并 1.2.3 的修订版本号。

# python - 为什么python通过引用分配列表值

> ID：12619050
> 
> 赞同：0
> 
> 时间：2012-09-27T10:15:21.747
> 
> 标签：python, list, reference

我们在 Python 中知道这一点

```
a= [1, 2]
b= [a, a]
print b
[[1, 2], [1, 2]]
a.append(3)
print b
[[1, 2, 3], [1, 2, 3]] 
```

这是因为`b`具有相同列表的引用`a`并且在其中附加的东西`a`也会发生变化`b`。
我的问题是——这种行为的用途或优势是什么？
为什么 Python 通过引用分配列表值？
如果我做`b =[a,a]`得很糟糕，这意味着我对价值观感兴趣，而`a`不是对`a`以后发生的事情感兴趣。
我们可以做到这一点

```
b=[a[:], a[:]] 
#or
b=[a,a]
a=[] 
```

但是为什么这不是python中的默认行为？为什么 Python 是这样设计的！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:23:23.423

在 Python 中，一切都是对象。记住这条规则，你不会在任何地方感到困惑。

在上面的例子中，我们可以说

```
b=[a,a] 
```

b 的对象现在是一个列表

```
[object of a,object of a ] 
```

所以对 a 的任何修改都会反映在这里。

证明这一点的一个有趣的例子是我们都知道元组是不可变的，现在；

```
a=[1,2]

b=(0,a)

a.append(3)

print b # (0,[1,2,3]) 
```

太神奇了，元组是如何在这里修改的。答案和上面一样。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:50:17.187

> 如果我在做 b =[a,a] 时，这意味着我对 a 的值感兴趣，而不是对 a 以后发生的事情感兴趣。

我不明白为什么这很明显。列表只是一种保存事物的方式。我可能对事物的值感兴趣，但我也可能对事物本身感兴趣——例如，我想将它们传递给一个改变它们的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:19:35.960

Python通过引用分配*所有内容。*运算符只需将`=`左侧的名称绑定到右侧的对象。只有在右侧使用可变对象，然后通过调用实例方法（如`.append()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:21:16.167

基本上，这是一种语言设计选择。它简化了 Python 的语义，说[Python 有名称而不是变量](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables)。这样，语义`=`非常简单：LHS 只是一个新名称，用于引用 RHS。

# php - wordpress 正确调整 add_image_size 的大小

> ID：12619052
> 
> 赞同：0
> 
> 时间：2012-09-27T10:15:21.770
> 
> 标签：php, image, wordpress

我正在尝试更改 wordpress 中缩略图的大小，但即使我想拉伸宽度而不是高度，它仍然保持完全正方形。我不确定为什么这不起作用。任何帮助都会很棒在我拥有的功能中

```
// Used for large feature (header) images.
add_image_size( 'large-feature', $custom_header_support['width'], $custom_header_support['height'], true );
// Used for featured posts if a large-feature doesn't exist.
add_image_size( 'small-feature', 500, 300 ); 
```

及以下

```
if ( function_exists( 'add_image_size' ) ) { 
add_image_size( 'results-thumb', 70, 55, true); 

} 
```

我在哪里调用缩略图...

```
<?php echo the_post_thumbnail('results-thumb'); ?> 
```

Heres the site, at the bottom in the latest results section you'll see the thumbnails.. [http://limerickfc.hailstormcommerce.com/cms/](http://limerickfc.hailstormcommerce.com/cms/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:30:06.183

您可能需要重新生成大小。尝试安装和运行这个插件[http://wordpress.org/extend/plugins/regenerate-thumbnails/](http://wordpress.org/extend/plugins/regenerate-thumbnails/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:17:33.330

好的，我只是通过`min-width`对包含的 div 应用规则来使用 css 解决方法修复它，尽管我仍然不确定这是解决它的最佳方法。但我不会接受答案，因为我确定我会再次遇到这种情况

# php - 从 PHP 电子邮件管道传递参数

> ID：12619056
> 
> 赞同：1
> 
> 时间：2012-09-27T10:16:12.500
> 
> 标签：php, piping

我有一个从管道电子邮件转发器接收信息的 PHP 脚本。

目前一切正常。我只想操纵接收到的参数以仅从电子邮件中接收我想要的数据

脚本是：

```
#!/usr/local/bin/php -q

<?PHP
//get email
$fd = fopen("php://stdin", "r");
$email_content = "";
while (!feof($fd)) {
$email_content .= fread($fd, 1024);
}
fclose($fd); 
//get email end

//get variables from email start

//split the string into array of strings, each of the string represents a single line, recieved
$lines = explode("\n", $email_content);

// initialize variable which will assigned later on
$from = "";
$subject = "";
$headers = "";
$message = "";
$is_header= true;

//loop through each line
for ($i=0; $i < count($lines); $i++) {
if ($is_header) {
// hear information. instead of main message body, all other information are here.
$headers .= $lines[$i]."\n";

// Split out the subject portion
if (preg_match("/^Subject: (.*)/", $lines[$i], $matches)) {
$subject = $matches[1];
}
//Split out the sender information portion
if (preg_match("/^From: (.*)/", $lines[$i], $matches)) {
$from = $matches[1];
}
} else {
// content/main message body information
$message .= $lines[$i]."\n";
}
if (trim($lines[$i])=="") {
// empty line, header section has ended
$is_header = false;
}
} 
```

目前，变量 $email 返回：

```
"Person name" <person@domain.net> 
```

如何修改此变量以仅获取电子邮件部分？

其次，变量消息返回一大堆数据，包括格式和标签，如下所示：

```
This is a multipart message in MIME format.

------=_NextPart_000_0031_01CD9CA8.9BE5F470
Content-Type: text/plain;
    charset="us-ascii"
Content-Transfer-Encoding: 7bit

testing

------=_NextPart_000_0031_01CD9CA8.9BE5F470
Content-Type: text/html;
    charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" = xmlns:o=3D"urn:schemas-microsoft-com:office:office" = xmlns:w=3D"urn:schemas-microsoft-com:office:word" = xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" = xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META = HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; = charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 = (filtered medium)"><style><!--
/* Font Definitions */
@font-face
    {font-family:Calibri;
    panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
    {margin:0cm;
    margin-bottom:.0001pt;
    font-size:11.0pt;
    font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
    {mso-style-priority:99;
    color:blue;
    text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
    {mso-style-priority:99;
    color:purple;
    text-decoration:underline;}
span.EmailStyle17
    {mso-style-type:personal-compose;
    font-family:"Calibri","sans-serif";
    color:windowtext;}
.MsoChpDefault
    {mso-style-type:export-only;
    font-family:"Calibri","sans-serif";}
@page WordSection1
    {size:612.0pt 792.0pt;
    margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
    {page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" /> </xml><![endif]--><!--[if gte mso 9]><xml> <o:shapelayout v:ext=3D"edit"> <o:idmap v:ext=3D"edit" data=3D"1" /> </o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue = vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Ninety = nine<o:p></o:p></p></div></body></html>
------=_NextPart_000_0031_01CD9CA8.9BE5F470-- 
```

. 我只想以纯文本格式提取我的正文内容。因此，如果电子邮件正文只是“测试”，那么我希望变量返回测试？

一如既往的帮助表示赞赏。

再次感谢。

* * *

根据@hakra 编辑

```
#!/usr/local/bin/php -q

<?php 
// read from stdin 
$fd = fopen("php://stdin", "r"); 
$email = ""; 
while (!feof($fd)) { 
$email .= fread($fd, 1024); 
} 
fclose($fd); 

// handle email 

$lines = explode("\n", $email); 

// empty vars 

$from = ""; 
$subject = ""; 
$headers = ""; 
$message = ""; 
$splittingheaders = true; 

for ($i=0; $i < count($lines); $i++) { 
if ($splittingheaders) { 
// this is a header 
$headers .= $lines[$i]."\n"; 
// look out for special headers 
if (preg_match("/^Subject: (.*)/", $lines[$i], $matches)) { 
$subject = $matches[1]; 
} 
if (preg_match("/^From: (.*)/", $lines[$i], $matches)) { 
$from = $matches[1]; 
} 
} else { 
// not a header, but message 
$message .= $lines[$i]."\n"; 
} 

if (trim($lines[$i])=="") { 
// empty line, header section has ended 
$splittingheaders = false; 
} 
} 

$buffer = [$email] // Mail Content from Pipe 

$mail = mailparse_msg_create(); 
mailparse_msg_parse($mail, $buffer); 
$struct = mailparse_msg_get_structure($mail);  

foreach ($struct as $st) {  
    $section = mailparse_msg_get_part($mail, $st);  
    $info    = mailparse_msg_get_part_data($section);  
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:44:07.983

[`imap_rfc822_parse_adrlist`^(*您可以使用Docs*)](http://php.net/manual/en/function.imap-rfc822-parse-adrlist.php)或[`mailparse_rfc822_parse_addresses`^(*Docs*)](http://php.net/manual/en/function.mailparse-rfc822-parse-addresses.php)解析地址行。

要解析电子邮件的正文，您可以使用[*Mail Parse*扩展^(*Docs*)](http://php.net/manual/en/intro.mailparse.php)：

```
$buffer = [...] // Mail Content from Pipe

$mail = mailparse_msg_create();
mailparse_msg_parse($mail, $buffer);
$struct = mailparse_msg_get_structure($mail); 

foreach ($struct as $st) { 
    $section = mailparse_msg_get_part($mail, $st); 
    $info    = mailparse_msg_get_part_data($section); 

    print_r($info);
} 
```

# .net - 如何在 PdfPCell 中添加文本后跟图像？

> ID：12619061
> 
> 赞同：0
> 
> 时间：2012-09-27T10:16:24.450
> 
> 标签：.net, image, itext, paragraph

我创建了一个表格，我需要在右侧的文本附近添加一个小图像。我怎样才能做到这一点？

```
PdfPCell cell = new PdfPCell();
cell.AddElement(new Paragraph("text", font));
Image img = Image.GetInstance("path");
img.ScaleAbsolute(width, height);
cell.AddElement(img); 
```

# android - 是否可以在任何设备和平台上的 android 中启动本机文件管理器？

> ID：12619063
> 
> 赞同：1
> 
> 时间：2012-09-27T10:16:32.117
> 
> 标签：android, file, browser, android-intent, file-management

以三星为例

```
Intent i = new Intent("com.sec.android.app.myfiles.PICK_DATA");
            i.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(i, 0); 
```

您可以使用上面的代码片段启动本机文件管理器，但是如何在任何平台、任何设备以及任何 android API 级别上启动本机文件管理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:57:14.190

> 是否可以在任何设备和平台上的 android 中启动本机文件管理器？

Android 没有“本机文件管理器”。某些设备可能预装了某种文件管理器应用程序，但这取决于设备制造商，并非所有设备都会有一个。

# actionscript-3 - 带有“双”进度条的视频播放器（视频加载/视频播放进度）

> ID：12619067
> 
> 赞同：0
> 
> 时间：2012-09-27T10:16:40.570
> 
> 标签：actionscript-3, apache-flex, progress-bar, flex3

我正在实现一个基于 Flex 3 的 FLV 视频播放器，我想添加一个类似于 YouTube 播放器的功能。

我希望进度条既显示视频显示进度，又显示视频加载状态。我该如何实现这种行为？

在彼此之上使用 2 个进度条？我也在使用 Flex mx: VideoDisplay 组件，我需要更改它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:03:18.250

是的，您应该在背景中放置两个条相互重叠放置laodingbar，在前面放置当前位置条。

但最后，这比看起来要使其功能齐全要多一些工作......我将创建一个实现所有条形/滑块功能的新类。

laoder 只监听 update(val) 以设置其新的百分比值。播放栏将需要一些单击和鼠标按下/鼠标移动功能以进行搜索和重新设置更新功能，包括在用户交互后触发播放器搜索的事件。

然后你将加载栏更新绑定到播放器的进度事件所有事件都可以在这里找到

```
//setting up loadingbar
player.addEventListener(ProgressEvent.PROGRESS,slider_update);

//function to update the slider
private function slider_update(E:ProgressEvent):void{
    var percentage:float = 0;
    if(E.bytesTotal != 0){
       E.bytesLoaded/E.bytesTotal
    }
    slider.update(percentage)
} 
```

与当前的播放栏几乎相同

```
//listens to statechanges of the player to handle updates for cur-pos

player.addEventListener(VideoEvent.PLAYHEAD_UPDATE, checkStatechange);

private function checkStatechange(E:VideoEvent):void{
    if(player.totalTime!=0){
        timeSlider.update(E.playheadTime/E.totalTime);
    }; 
```

继续单击绑定以立即设置搜索 - 到 mouseDown 和移动以使视频滚动成为可能...实际上对于使用 mousedown 进行搜索，mousemove 应该在舞台上侦听，因此 mouseUp 否则用户必须留在加载栏上虽然在大多数情况下寻求这个是几乎不可能处理的;） - 玩得开心}

# python - 使用 Scapy 和 Python 的网桥

> ID：12619068
> 
> 赞同：7
> 
> 时间：2012-09-27T10:16:41.207
> 
> 标签：python, network-programming, scapy

我正在创建一个连接同一台机器上的两个以太网卡的网桥。其中一张卡连接到 LAN，另一张连接到网络设备。它看起来像这样，

![在此处输入图像描述](../Images/8f4b23fce49d9fa659eedd04c36a6cb0.png)

我在两个接口上嗅探数据包，然后使用`sendp(x,iface='eth0')`我在 eth1 上嗅探的数据包将它们发送到另一个，反之亦然。

我验证了两个接口上的数据包并发现它们是正确的，但不知何故我无法获得设备的 IP。下面是我的一段代码，我创建了两个线程，每个接口一个：

```
from scapy.all import*

**THREAD1:**
pkt=sniff(iface="eth0",store=1,count=1)
outbuff=[]
outbuff+=pkt[:]
for src in outbuff[:]
srcmac=src.sprintf(r"%Ether.src%")
if srcmac==deviceMAC:
    pass
else:
    sendp(self.outbuff[:],iface="eth1",verbose=0)

**THREAD2:**
pkt=sniff(iface="eth1",store=1,count=1)
outbuff=[]
outbuff+=pkt[:]
for src in outbuff[:]
srcmac=src.sprintf(r"%Ether.src%")
if srcmac==deviceMAC:
    sendp(self.outbuff[:],iface="eth1",verbose=0)
else:
    pass 
```

有人可以帮我解决这个问题或建议我为此实施的替代解决方案吗？

**已解决：结合 Python+IPTABLES 并使用 TRIGGER 的原理解决了这个问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T14:38:47.830

发布桥接类的片段

```
from threading import Thread
import threading
import socket
import thread   

class iface0(threading.Thread):
    def __init__(self, MAC):
        Thread.__init__(self)
        pass

    def run(self):
        self.a = socket.gethostbyname_ex(socket.gethostname())[2]

        while 1:
            self.sSock = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
            self.sSock.bind((self.a[1],23432))
            self.iface0_sniff()
            self.sSock.close()

    def iface0_sniff(self):        
        self.sSock.sendto("THISISATESTWORLD",(self.a[1],78456))
        data = ''             

class iface1(threading.Thread):
    def __init__(self,MAC):
        Thread.__init__(self)
        pass

    def run(self):
        self.a=socket.gethostbyname_ex(socket.gethostname())[2]

        while 1:
            self.sSock = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
            self.iface1_sniff()
            self.sSock.close()            

    def iface1_sniff(self):

        self.sSock.sendto("THISISATESTWORLD",(self.a[1],98658))
        data = ''

if __name__ == '__main__':
    MAC = ['XX:XX:XX:XX:XX:XX']

    iface0 = iface0(MAC)       
    iface1 = iface1(MAC)

    iface1.start()
    iface0.start() 
```

# mysql - SQL查询/记录数

> ID：12619069
> 
> 赞同：-3
> 
> 时间：2012-09-27T10:16:42.010
> 
> 标签：mysql, sql

我有一个包含两列的简单表格。第一个字段表示 id，第二个字段表示名称（字符串值）。没有字段是唯一的。因此，例如，有许多记录，例如：

![在此处输入图像描述](../Images/2f943d05c415f6d8a7a47fac4df94dd3.png)

我需要的是一个简单的 SQL 语句，它以以下格式向我显示整个表，并将内容插入到一个新表中。

![在此处输入图像描述](../Images/a6ef7bb1ec174c94fdf1a8e81035af10.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:18:33.327

你必须使用`group by`：

```
insert into tab2 (name,cnt)
select name, count(1) as cnt
from tab
group by name 
```

[这](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)是有关聚合函数的更多信息。

## [SQL 小提琴](http://sqlfiddle.com/#!8/47f74/1/0)演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:18:14.253

只需使用[`COUNT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)函数计数`from_id`。如果你想在组中计数，请使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)子句。像这个。

```
SELECT `name`, COUNT(from_id) AS `COUNT`
FROM myTable 
GROUP BY `name`; 
```

这将返回您想要的结果。

现在你想把它插入到新表中然后你可以这样做：

```
INSERT INTO newTable (`name`, `count`) 
SELECT `name`, COUNT(from_id) AS `COUNT`
    FROM myTable 
    GROUP BY `name`; 
```

# ruby - 带有变量的 URI

> ID：12619073
> 
> 赞同：1
> 
> 时间：2012-09-27T10:17:05.423
> 
> 标签：ruby, file, uri

我在单独的行上有一个带有 uid 的文件，我正在尝试将它们包含在 URI 中。

```
File.open("File Path").readlines.each do |line|

puts line

uid = line 

uri = URI("http://example:port/path/variable=#{uid}&fragment")

res = Net::HTTP.get_response(uri)

puts res.body 
```

但我收到一条错误消息，提示“错误的 URI（不是 URI？）”。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:35:05.423

这在很大程度上取决于您实际喂它的内容，但我建议尝试这 2 件事，以便您很好地排除代码故障。

*   用于`puts "[#{uid}]"`查看`line`变量究竟包含*什么*。例如，这肯定会帮助您注意它是否有换行符。右方括号将在下一行，您将知道您的输入格式错误。

*   尝试像这样构造 URL `uri = URI("http://example:port/path/variable=#{URI.encode(uid)}&fragment")`：. 这将帮助您转义通常不允许在 URI / URL 中使用的字符。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:15:00.463

你能试试

```
uid = line.strip 
```

删除前导`strip`和尾随空格和换行符。

和

```
p uid 
```

或者

```
puts uid.inspect 
```

您可能会看到字符串的真实内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:20:54.140

你的意思是

```
uri = URI("http://example:port/path/?variable=#{uid}&fragment") 
```

# java - JavaFX 在带有控制器的场景构建器中显示视图

> ID：12619075
> 
> 赞同：2
> 
> 时间：2012-09-27T10:17:16.920
> 
> 标签：java, model-view-controller, javafx, fxml, scenebuilder

我有这个控制器：

```
package cz.vutbr.feec.bmds.cv2;

import java.awt.Button;
import java.awt.TextField;

import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.Slider;

public class TestGuiController {

    private int buttonPressed = 0;
    @FXML
    private Button tlacitko;
    @FXML
    private TextField textovePole;
    @FXML
    private Slider slider;

    public void buttonPressed(ActionEvent e) {
        buttonPressed++;
        textovePole.setText(Integer.toString(buttonPressed));
    }
} 
```

这个 fxml：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.layout.BorderPane?>

    <AnchorPane prefHeight="200.0" prefWidth="200.0" xmlns:fx="http://javafx.com/fxml" fx:controller="cz.vutbr.feec.bmds.cv2.TestGuiController">
      <children>
        <Button fx:id="tlacitko" layoutX="30.0" layoutY="40.0" mnemonicParsing="false" onTouchPressed="#buttonPressed" text="Button" />
        <Slider fx:id="slider" layoutX="157.0" layoutY="17.0" orientation="VERTICAL" />
        <TextField fx:id="textovePole" layoutX="14.0" layoutY="89.0" prefWidth="134.0" />
      </children>
    </AnchorPane> 
```

这是我的主要课程：

```
package cz.vutbr.feec.bmds.cv2;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class Main extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("TestGui.fxml"));
        primaryStage.setTitle("Titulek");
        primaryStage.setScene(new Scene(root,300,275));
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

当我通过 ant 运行它时，我收到错误消息框（运行应用程序期间异常）。我尝试了没有控制器的简单 fx​​ml 并且它可以工作，所以我猜我在控制器上做错了。我必须改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T11:39:26.803

我必须回答我自己的问题。问题出`TestGuiController`在我使用`java.awt.Button`and`java.awt.TextField`而不是`javafx.scene.control.Button`and的地方`javafx.scene.control.TextField`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:49:33.690

我不是 100% 确定，但请尝试：

*   在 FXML 中：按钮：onAction 而不是 onTouchPressed

请提供确切的异常消息。

# xslt - foreach 内部标记化

> ID：12619076
> 
> 赞同：6
> 
> 时间：2012-09-27T10:17:19.600
> 
> 标签：xslt, xslt-2.0, xpath-2.0

这是来自 xml 的片段：

```
<sample>
        <test>
            <Cell1>John</Cell1>
            <Cell2>A</Cell2>
            <Cell4>xy</Cell4>
        </test>
        <test>
            <Cell1>Jack</Cell1>
            <Cell2>B</Cell2>
            <Cell3>Red</Cell3>
            <Cell6>10</Cell6>
        </test>
        <test>
            <Cell1>John,Jade</Cell1>
            <Cell2>A,Y</Cell2>
            <Cell4>1</Cell4>
        </test>
        <test>
            <Cell1>John,Jade</Cell1>
            <Cell2>A B,X</Cell2>
            <Cell3>Blue</Cell3>
        </test>
    </sample> 
```

## 条件：

如果`Cell2`包含逗号拆分值并检查前面是否`Cell2`包含相同的值，同样如果`Cell2`包含空格拆分值并检查前面是否`Cell2`包含相同的值 -> 如果是则忽略它。

这就是我想要的输出：

```
<Cell2>A</Cell2>
<Cell2>B</Cell2>
<Cell2>Y</Cell2>
<Cell2>X</Cell2> 
```

这是我写的 xslt：（请查看评论）

```
<xsl:template match="sample">
        <xsl:for-each select="test">
                <xsl:choose>
                    <xsl:when test="contains(Cell2,',')">
                        <xsl:variable name="token1Cell2" select="tokenize(Cell2,',')"/>
                        <xsl:for-each select="$token1Cell2">
                            <xsl:choose>
                                <xsl:when test="contains(.,' ')">
                                    <xsl:variable name="token2Cell2" select="tokenize(.,' ')"/>
                                    <xsl:for-each select="$token2Cell2">
              <!-- I tried to check if the preceding sibling element test/Cell2 contains the text that is not equal to the current text. But I know what I am doing is wrong as I am inside for-each tokenize. How to get the preceding-sibling? -->
                                      <xsl:if test="preceding-sibling::test/
Cell2/text() != '.'">
                                        <Cell2>
                                            <xsl:value-of select="."/>
                                        </Cell2>
                                        </xsl:if>
                                    </xsl:for-each>
                                </xsl:when>
                                <xsl:otherwise>
                                <xsl:if test="preceding-sibling::test/Cell2/text() != '.'">
                                    <Cell2>
                                        <xsl:value-of select="."/>
                                    </Cell2>
                                </xsl:if>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:for-each>
                    </xsl:when>
                    <xsl:otherwise>
                        <Cell2>
                            <xsl:value-of select="Cell2"/>
                        </Cell2>
                    </xsl:otherwise>
                </xsl:choose>
        </xsl:for-each>
    </xsl:template> 
```

我怎样才能实现输出？有任何想法吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T14:47:43.703

**只是这个简单的转换**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:for-each select="distinct-values(/*/test/Cell2/tokenize(.,'[ ,]'))">
      <Cell2><xsl:value-of select="."/></Cell2>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<sample>
    <test>
        <Cell1>John</Cell1>
        <Cell2>A</Cell2>
        <Cell4>xy</Cell4>
    </test>
    <test>
        <Cell1>Jack</Cell1>
        <Cell2>B</Cell2>
        <Cell3>Red</Cell3>
        <Cell6>10</Cell6>
    </test>
    <test>
        <Cell1>John,Jade</Cell1>
        <Cell2>A,Y</Cell2>
        <Cell4>1</Cell4>
    </test>
    <test>
        <Cell1>John,Jade</Cell1>
        <Cell2>A B,X</Cell2>
        <Cell3>Blue</Cell3>
    </test>
</sample> 
```

**产生想要的正确结果：**

```
<Cell2>A</Cell2>
<Cell2>B</Cell2>
<Cell2>Y</Cell2>
<Cell2>X</Cell2> 
```

**说明**：

`select`属性中的XPath表达式`xsl:for-each`是理解的关键：

```
distinct-values(/*/test/Cell2/tokenize(.,'[ ,]')) 
```

这会产生所有标记化（的字符串值）的序列的不同值`/*/test/Cell2`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T10:56:57.277

首先，如果您在逗号或空格上进行标记，那么您可以将您的标记组合成一个表达式

```
<xsl:for-each select="tokenize(., ',|\s')"> 
```

你能做的，是首先匹配所有**Cell2**元素，使用模板标记内容，但将结果放入变量中

```
 <xsl:variable name="cells">
     <xsl:apply-templates select="test/Cell2"/>
  </xsl:variable> 
```

然后你可以简单地使用**xsl:for-each-group**来迭代它们

```
 <xsl:for-each-group select="$cells/Cell2" group-by="text()">
     <xsl:copy-of select="."/>
  </xsl:for-each-group> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:template match="sample">
      <xsl:variable name="cells">
         <xsl:apply-templates select="test/Cell2"/>
      </xsl:variable>
      <xsl:for-each-group select="$cells/Cell2" group-by="text()">
         <xsl:copy-of select="."/>
      </xsl:for-each-group>
   </xsl:template>

   <xsl:template match="Cell2">
      <xsl:for-each select="tokenize(., ',|\s')">
         <Cell2>
            <xsl:value-of select="."/>
         </Cell2>
      </xsl:for-each>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<Cell2>A</Cell2>
<Cell2>B</Cell2>
<Cell2>Y</Cell2>
<Cell2>X</Cell2> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T13:53:41.880

当您有深度嵌套的 xsl:for-each 指令时，上下文项在每个级别都会更改，因此您通常需要将一个变量绑定到每个级别的上下文项，以便您可以返回到它。但是，深度嵌套的 xsl:for-each 指令有时表明您应该将代码分解为更小的模板或函数。

# c# - 使用 DataSet 时从 DataRow 访问关系

> ID：12619083
> 
> 赞同：1
> 
> 时间：2012-09-27T10:17:39.463
> 
> 标签：c#, linq-to-dataset

我正在尝试访问一行的父级，但它总是返回 null。

我有两张桌子，一张描述一个车站，另一张告诉车站是否彼此“接近”。

```
CREATE TABLE [dbo].[GlobalStations] (
    [GlobalStationId] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
    ....
)

CREATE TABLE [dbo].[NearStations] (
    [OriginalStationId] [int] NOT NULL,
    [ToleratedStationId] [int] NOT NULL,
    ...
) 
```

在 SQL Server 上设置约束以确保数据一致。

```
ALTER TABLE [dbo].[NearStations]  WITH CHECK ADD  CONSTRAINT [FK_NearStations_Original] FOREIGN KEY([OriginalStationId])
REFERENCES [dbo].[GlobalStations] ([GlobalStationId])

ALTER TABLE [dbo].[NearStations]  WITH CHECK ADD  CONSTRAINT [FK_NearStations_Tolerated] FOREIGN KEY([ToleratedStationId])
REFERENCES [dbo].[GlobalStations] ([GlobalStationId]) 
```

如果是数据集，我已经添加了这两个表，现在当我有一个 NearStation 行时，我正在尝试访问 GlobalStation。

```
var nearStationsTA = new NearStationsTableAdapter()
var stations = nearStationsTA.GetData();
var st = stations[0];
var tid = st.ToleratedStationId;
var global = st.GlobalStationsRowByFK_NearStations_Tolerated; // Always NULL 
```

我希望生成的代码能够进行某种延迟加载，但显然它没有这样做。

如何强制代码自行加载？我是否可以强制数据集加载我使用的所有 GlobalStation）以便在需要时拥有该行？

谢谢

# wpf - SurfaceDragDrop 似乎永远不会结束，对象似乎陷入了永恒（非）操纵

> ID：12619084
> 
> 赞同：1
> 
> 时间：2012-09-27T10:17:47.760
> 
> 标签：wpf, xaml, pixelsense

我正在为 Surface 开发 WPF 应用程序，但遇到了一个我和我的同事都不知道答案的错误。

我有一种情况，用户可以从框中拖动东西。盒子只是一个图像，当触摸它时，会生成另一个图像并且是获得交互的对象，即被拖放。整个拖动都是用 来执行的`SurfaceDragDrop.BeginDragDrop(...)`。掉落后，该物体会消失。

现在的问题是偶尔（似乎是当输入快速出现时，只是敲击屏幕而不是实际拖动对象）生成的项目永远不会消失，即即使输入已被删除，它仍会保留在屏幕上。可以通过触摸它来与它进行交互以继续拖动它，但它的移动和旋转是关闭的，因为它似乎认为已经有另一个手指与它交互。

但是，通过调试，我已经证明该对象没有注册任何触摸。它的`AreAnyTouchesCaptured`属性是`false`。然而，操纵是活跃的。所以似乎发生的是，它进入了某种永无止境的操纵。为了摆脱它，我实现了一个临时解决方案，它只是`SurfaceDragDrop.CancelDragDrop(..)`对已经在屏幕上显示一段时间而没有捕获任何触摸的此类对象进行处理。

我希望我对问题的描述有点清楚，如果没有，请询​​问。下面是用于生成对象的代码。但是我没有写它（一位前同事写的），我只是坚持调试：

```
private void item_PreviewTouchDown(object sender, TouchEventArgs e)
    {
        var box = sender as Canvas;

        var imgpath = String.Format(@"[someimgpath].png");
        var bmp = new BitmapImage(new Uri(imgpath, UriKind.RelativeOrAbsolute));

        Image draggedItem = new Image { Source = bmp, Stretch = Stretch.None, Width = bmp.Width, Height = bmp.Height };
        draggedItem.UpdateLayout();

        var touchPoint = e.TouchDevice.GetTouchPoint(box);
        var itemX = touchPoint.Position.X - draggedItem.Width / 2.0;
        var itemY = touchPoint.Position.Y - draggedItem.Height / 2.0;

        box.Children.Add(draggedItem);

        draggedItem.SetValue(Canvas.LeftProperty, itemX);
        draggedItem.SetValue(Canvas.TopProperty, itemY);
        draggedItem.Visibility = System.Windows.Visibility.Hidden;

        //We should perfom drag-and-drop when the size of the draggedItem is updated, since
        //BeginDragDrop uses ActualWidth and ActualHeight property
        draggedItem.SizeChanged += (o, ev) =>
        {
            List<InputDevice> devices = new List<InputDevice>();
            devices.Add(e.TouchDevice);
            foreach (TouchDevice touch in box.TouchesCapturedWithin)
            {
                if (touch != e.TouchDevice)
                {
                    devices.Add(touch);
                }
            }

            var img = new Image { Source = draggedItem.Source, Stretch = Stretch.None, Width = bmp.Width, Height = bmp.Height };
            img.SetValue(Canvas.LeftProperty, itemX);
            img.SetValue(Canvas.TopProperty, itemY);

            var cursor = SurfaceDragDrop.BeginDragDrop(box, draggedItem, img, draggedItem, devices, DragDropEffects.Move);
        };

        e.Handled = true;
    } 
```

# c# - 是否可以在 C# 中获取事件处理程序的实例

> ID：12619087
> 
> 赞同：-1
> 
> 时间：2012-09-27T10:17:50.213
> 
> 标签：c#, event-handling

是否可以在 C# 中获取事件处理程序的实例？就像在 C++ 中获取函数指针一样

我想要的是获取文本框的事件处理程序，它可能在不同的部分和不同的时间设置不同。

示例：对于文本框，我们有如下代码：

```
TextBox tbUserName;
tbUserName.Click += new EventHandler( (s, e) => { MessageBox.Show("bla") } ); 
```

我希望另一个函数能够像这样获取处理程序：

```
EventHandler h = tbUserName.Click; 
```

但它不起作用。编译器说的， Click 只支持 += -= 但不能在右手边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:23:09.397

该事件实际上是一个多播委托，并且可以使用简单的 += 和 -= 语法指定处理程序。

例如...

```
private void myButton_Click(object sender, EventArgs e)
{

   // Do something in here...

}

...
...

myButton.Click += myButton_Click; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:41:06.987

*   在 C# 中，没有单独的事件处理程序类型，但事件机制建立在 Delegate 类型之上。
*   委托/多播委托对象类似于 c++ 函数指针，可以存储一个、多个方法地址并可以被调用。
*   C#以关键字事件的形式提供了一个语法糖，一旦源代码被编译，它就变成了一个多播委托。
*   可以订阅和取消订阅事件

订阅：`<event> += <method>` 取消订阅：`<event> -= <method>`

显示订阅相同点击事件的三个​​方法的代码

```
tbUserName.Click += new EventHandler( (s, e) => { MessageBox.Show("method 1 called") } );
tbUserName.Click += new EventHandler( (s, e) => { MessageBox.Show("method 2 called") } );
tbUserName.Click += new EventHandler( (s, e) => { MessageBox.Show("method 3 called") } ); 
```

[http://msdn.microsoft.com/en-us/library/17sde2xt(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/17sde2xt(v=VS.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:57:07.677

您可以检索事件的调用列表，并且可以从每次调用中检索 Target（对于静态事件处理程序方法可以为 null）和 MethodInfo。

像这样的东西：

```
public class TestEventInvocationList {
    public static void ShowEventInvocationList() {
        var testEventInvocationList = new TestEventInvocationList();
        testEventInvocationList.MyEvent += testEventInvocationList.MyInstanceEventHandler;
        testEventInvocationList.MyEvent += MyNamedEventHandler;
        testEventInvocationList.MyEvent += (s, e) => {
            // Lambda expression method
        };

        testEventInvocationList.DisplayEventInvocationList();
        Console.ReadLine();
    }

    public static void MyNamedEventHandler(object sender, EventArgs e) {
        // Static eventhandler
    }

    public event EventHandler MyEvent;

    public void DisplayEventInvocationList() {
        if (MyEvent != null) {
            foreach (Delegate d in MyEvent.GetInvocationList()) {
                Console.WriteLine("Object: {0}, Method: {1}", (d.Target ?? "null").ToString(), d.Method);
            }
        }
    }

    public void MyInstanceEventHandler(object sendef, EventArgs e) {
        // Instance event handler
    }
} 
```

这将产生：

```
Object: ConsoleApplication2.TestEventInvocationList, Method: Void MyInstanceEven
tHandler(System.Object, System.EventArgs)
Object: null, Method: Void MyNamedEventHandler(System.Object, System.EventArgs)
Object: null, Method: Void <MyMain>b__0(System.Object, System.EventArgs) 
```

# vb.net - 带有组和连接的 linq2sql

> ID：12619088
> 
> 赞同：0
> 
> 时间：2012-09-27T10:17:56.277
> 
> 标签：vb.net, linq, join, linq-to-sql, group-by

如何在 linq (VB) 中编写此查询

```
select 
    g.* 
from PROB_GROUP g 
inner join 
(
    select 
        PGR_NAME, 
        PGR_PCELL, 
        max(PGR_VERSION) max_version 
    from PROB_GROUP 
    group by PGR_NAME, PGR_PCELL
) grouped_g 
on g.PGR_NAME = grouped_g.PGR_NAME 
    and g.PGR_PCELL = grouped_g.PGR_PCELL 
    and g.PGR_VERSION = grouped_g.max_version 
order by g.PGR_TYPE, g.PGR_NAME 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:37:36.753

知道了

```
From pp In DB.PROB_GROUPs Join p1 In
 (From p In DB.PROB_GROUPs Group By p.PGR_NAME, p.PGR_PCELL Into g = Group Select PGR_NAME, PGR_PCELL, H_VERSION = g.Max(Function(p) p.PGR_VERSION))
 On p1.H_VERSION Equals pp.PGR_VERSION And p1.PGR_NAME Equals pp.PGR_NAME And p1.PGR_PCELL Equals pp.PGR_PCELL Select pp Order By pp.PGR_TYPE, pp.PGR_NAME 
```

应该没问题吧？

# html - 为什么在 Bootstrap 中使用固定位置的顶部导航栏时必须添加填充？

> ID：12619089
> 
> 赞同：8
> 
> 时间：2012-09-27T10:17:58.723
> 
> 标签：html, css, twitter-bootstrap

我正在使用最新版本的 Bootstrap 来设置网站的样式，并且遇到了看起来像错误的东西。您可以[在此处将其](http://jsfiddle.net/5arx/gNb5j/)视为 JSFiddle。

如果我添加一个标准的固定位置顶部导航栏，然后在其后添加一些内容，则后续内容会被拉高约 60px，因此它最终位于顶部导航栏*下方。*因此，我查看了[Bootstrap 示例页面](http://twitter.github.com/bootstrap/examples/starter-template.html)，发现了一些内联 CSS（在 head 部分中），显然用于纠正此问题：

```
body {
    padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
} 
```

这让我很惊讶，我想知道这是否是 Bootstrap 中一个被忽视的错误的结果，或者我是否应该理所当然地这样做。

如果是后者，我很想知道为什么当 Bootstrap 应该是一个现成的 CSS 解决方案时我应该使用内联 CSS。

如果是前者，我非常想知道为什么会这样 - 为什么 Bootstrap CSS 不只是将填充添加到导航栏的底部或其他东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T10:24:12.877

从[文档](http://twitter.github.com/bootstrap/components.html#navbar)中：

> 添加 .navbar-fixed-top 并记住通过向 .navbar-fixed-top 添加至少 40px 的填充来说明其下方的隐藏区域`<body>`。请务必在核心 Bootstrap CSS 之后和可选的响应式 CSS 之前添加它。

`.navbar-fixed-top`is ，`position: fixed`所以 a`padding`不会影响任何其他元素。

**编辑**

“在两个 .css 之间”的建议有助于防止移动设备出现问题。正如`position: fixed`在许多设备上被破坏的那样，导航栏会消失`static`，并且`<body>`填充会在顶部创建一个空白包装。因此`bootstrap-responsive.css`覆盖该视口的填充。

您只需向规则添加媒体查询即可重现该行为：

```
@media (min-width: 979px) {
    body {
        padding-top: 60px;
    }
} 
```

在您的自定义样式表中包含此规则并忘记`<style>`标记。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T10:20:14.087

如果不添加导航栏，则不需要填充。Bootstrap 本身无法知道是不是这样，所以你需要自己放这个小 CSS 位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:29:41.307

从文档中：

> 添加`.navbar-fixed-top`并记住通过向`<body>`. 请务必在核心 Bootstrap CSS 之后和可选的响应式 CSS 之前添加它。

[http://twitter.github.com/bootstrap/components.html](http://twitter.github.com/bootstrap/components.html)

# magento - Magento 1.5 在头部导航中按名称排序类别

> ID：12619093
> 
> 赞同：1
> 
> 时间：2012-09-27T10:18:05.207
> 
> 标签：magento

我尝试按名称对头部导航中的类别和子类别进行排序。我发现至少有 3 种不同的方法可以做到这一点，但它们似乎都不起作用。

1.  将“ `->setOrder('name', Varien_Db_Select::SQL_ASC)`”添加到 Category.php
2.  将“ `->setOrder('name', 'asc')`”添加到 Category.php
3.  将“ `->addAttributeToSort('name', Varien_Db_Select::SQL_ASC)`”添加到 Category.php
4.  将“ `->addAttributeToSort('name', 'asc')`”添加到 Category.php
5.  使用 SQL 查询排序，可能有效，但在我的情况下它不是一个真正的选择

还有一些不值得注意的...

对于分层导航，我想对数组进行排序，但在头部导航中不能这样做。我很感激各种提示......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:52:53.463

那是因为集合是使用加载的`->load()`- 之后您无法更改它。对其进行排序的最佳方法是通过拖放在管理员中对其进行排序，或者如果这不是一个选项，则必须在目录集合事件 _load_before 中挂钩
`app/code/core/Mage/Catalog/Model/Resource/Category/Flat/Collection.php`
（如果您使用的是平面目录），但这不是正确的方式，因为它会影响任何类别列表的显示，并使您的管理员排序无法使用。花点时间在管理员中正确排序。

# colors - 将 RGB 图像转换为 H&E 颜色空间

> ID：12619094
> 
> 赞同：2
> 
> 时间：2012-09-27T10:18:06.090
> 
> 标签：colors, rgb, transformation, space, channel

在 MATLAB 中，如何将 RGB 图像转换为 H&E（苏木精和伊红染色）颜色空间以进行医学成像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:29:46.410

H&E 是一种染色方式（基本上是对组织样本中不同细胞进行着色的一种方式），而不是颜色空间。您可以拥有一张已用苏木精和伊红染色的幻灯片的 RGB 图像*，*但您可以将该 RGB 图像转换为另一个色彩空间（如 HSL、CIELab 等），它仍然是相同的图像。

对于一个愚蠢的类比：您可以录制一首歌曲并通过转换音高来改变它的调 - 所以它在不同的调中，但歌曲的“信息”被保留下来，类似于在色彩空间之间切换图像。但是，您不能通过类似的过程将摇滚歌曲转换为爵士歌曲，您必须以爵士风格重新录制歌曲（即切换染色方式）。

# visual-studio-2010 - OpenGL GLUT窗口很慢，为什么？

> ID：12619107
> 
> 赞同：11
> 
> 时间：2012-09-27T10:18:32.500
> 
> 标签：visual-studio-2010, opengl, window, glut

# 问题

我刚刚开始使用 GLUT 使用 OpenGL。下面的代码编译并显示了两个线框立方体和一个球体。问题是当我尝试拖动或调整窗口大小时，它会在跟随我的鼠标之前引起明显的延迟。

这个问题在我同事的电脑上没有出现，同样的代码。

我正在 Windows 7 计算机上使用 Visual Studio 2012 c++ express。我不是一个经验丰富的程序员。

# 编码

```
 // OpenGLHandin1.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <GL/glut.h>

void initView(int argc, char * argv[]){
    //init here
    glutInit(&argc, argv);
    //Simple buffer
    glutInitDisplayMode( GLUT_SINGLE | GLUT_RGBA );
    glutInitWindowPosition(100,100);
    glutInitWindowSize(800,400);
    glutCreateWindow("Handin 2");
}
void draw(){

    glClearColor(0,0,0,1);
    glClear(GL_COLOR_BUFFER_BIT);
    //Background color

    glPushMatrix();
    glLoadIdentity();
    glTranslatef(0.6, 0, 0);

    glColor3f(0.8,0,0);
    glutWireCube(1.1); //Draw the cube
    glPopMatrix();

    glPushMatrix();
    glLoadIdentity();
    glTranslatef(-0.5, 0, -0.2);

    glColor3f(0,0.8,0);
    glutWireCube(1.1); //Draw the cube
    glPopMatrix();

    glPushMatrix();
    glLoadIdentity();
    glTranslatef(0, 1.2, 0);
    glRotatef(90, 1, 0, 0);

    glColor3f(1,1,1);
    glutWireSphere(0.6, 20, 20); //Draw the sphere
    glPopMatrix();

    //draw here
    //glutSwapBuffers();
    glutPostRedisplay();
    glFlush();

}
void reshape (int w, int h){
    glViewport(0,0,w ,h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, (float)w/(float)h, 1.5, 10);
    gluLookAt(1.5, 2.5, 4, 
              0, 0.6, 0, 
              0, 1, 0); //Orient the camera
    glRotatef(5, 0, 0, 1);
    glMatrixMode(GL_MODELVIEW);
}
int main(int argc, char * argv[])
{
    initView(argc,argv);
    glutDisplayFunc(draw);
    glutReshapeFunc(reshape);
    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T11:35:54.947

**解决方案：**

似乎`Sleep(1)`在渲染函数中使用的简单解决方案有效。您还问过为什么 - 我不确定我能否正确解决这个问题，但这是我最好的猜测：

**为什么它甚至可以工作？**

您的同学可以在他们的驱动程序中默认打开 VSync。这导致他们的代码只能以屏幕刷新的速度运行，很可能是 60 fps。它为您提供大约 16 毫秒的帧渲染时间，如果代码高效（例如，渲染时间为 2 毫秒），它会为 CPU 留出大量时间来执行其他与操作系统相关的事情，例如移动窗口。

现在，如果您禁用垂直同步，程序将尝试渲染尽可能多的帧，从而有效地阻塞所有其他进程。我建议您使用睡眠，因为它揭示了这一特定问题。它是 1 毫秒还是 3 毫秒并不重要，它真正做的是说“嘿，CPU，我现在没有特别做任何事情，所以你可以做其他事情”。

**但这不会减慢我的程序吗？**

使用睡眠是一种常见的技术。如果您担心每帧丢失 1 毫秒，您也可以尝试 put `Sleep(0)`，因为它的行为应该完全相同 - 将空闲时间留给 CPU。您也可以尝试启用垂直同步并验证我的猜测是否正确。

附带说明一下，您还可以查看有和没有睡眠的 CPU 使用率图表。它应该是 100%（或在双核 CPU 上为 50%）没有（尽可能快地运行），并且要低得多，具体取决于您的程序要求和 CPU 的速度。

**关于 Sleep(0) 的补充说明**

*休眠间隔过后，线程就可以运行了。如果您指定 0 毫秒，线程将放弃其时间片的剩余部分但保持就绪状态。请注意，不保证就绪线程会立即运行。因此，线程可能要等到休眠间隔过去一段时间后才会运行。*- 来自[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)。

另请注意，在 Linux 系统上的行为可能略有不同；但我不是 linux 专家；也许路人可以澄清一下。

# javascript - 谷歌地图 v3 的单独点击和鼠标悬停制造商侦听器

> ID：12619109
> 
> 赞同：0
> 
> 时间：2012-09-27T10:18:52.890
> 
> 标签：javascript, google-maps-api-3

我已将我的制造商设置为动态调用信息窗口并在鼠标悬停时重定向到 URL，因此：

```
google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);  
      location.href='/places/'+locations[i][3];
    }
  })(marker, i)); 
```

我将如何修改它以使信息窗口部分发生在鼠标悬停时，但 location.href 部分仅发生在单击时？我一直在玩一些排列，但我无法让它工作。

谢谢！

* * *

**编辑：** 我找到了答案：我想我错过了分号或其他东西：

```
google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i)); 

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {     
      location.href='/spots/'+locations[i][3];
    }
  })(marker, i)); 
```

# javascript - 如何使用 javascript 集成 mailchimp

> ID：12619110
> 
> 赞同：0
> 
> 时间：2012-09-27T10:19:12.130
> 
> 标签：javascript, extjs, mailchimp

我有一个网络应用程序，我想集成 mailchimp，这样当用户单击页面上的注册按钮时，用户的电子邮件会添加到 mailchimp 订阅列表中，但我很难这样做。问题是，页面上的按钮是使用 extjs 在 javascript 文件中创建的。我在开发 Web 应用程序方面没有太多经验。我已经下载了用于与 php 集成的 api。我看到了这个：“ [AJAX Mailchimp 注册表单集成](https://stackoverflow.com/questions/8425701/ajax-mailchimp-signup-form-integration)”，但它似乎有安全问题。任何人都可以帮助解释如何去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:35:48.703

使用用户的电子邮件将 ajax 调用定向到您的服务器。
从那里，使用 API（您下载的）添加电子邮件，并将他们的响应结果返回给您的客户。

当您在幕后（您的服务器对他们的服务器）执行此操作时，没有安全风险，因为您没有暴露您的 API 密钥。

客户端代码：

```
Ext.Ajax.request({
    url: 'add_mail_to_chimp.php',
    params: {
        email: theUser_sEmail
    },
    success: function(response){
        var text = response.responseText;
        alert ('yay' + text);
    }
}); 
```

# exec - 重定向到标准输出的 tcl exec 结果也需要存储

> ID：12619111
> 
> 赞同：7
> 
> 时间：2012-09-27T10:19:13.923
> 
> 标签：exec, tcl, stdout

湖看看这两条线

**情况1**

```
set cvsUpdStr [exec cvs -qn upd] 
```

**案例2**

```
set cvsUpdStr [exec cvs -qn upd >&@stdout] 
```

第一种情况`cvsUpdStr`是命令的输出，但在命令执行期间没有打印任何内容。对于第二种情况，`cvs upd`命令输出打印在屏幕上，但`cvsUpdStr`为空。如何组合它们以便打印出结果`cvs upd`并将相同的输出存储在`cvsUpdStr`变量中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T10:42:03.810

有两种可能性。要么将其作为管道（使用创建`open |...`）运行，并通过存储和打印消息来处理消息，或者使用 Unix`tee`实用程序。第二种选择肯定更简单！

```
# I like to spell out “update” in full
set cvsUpdStr [exec cvs -qn update | tee /dev/tty] 
```

程序将`tee`其标准输入发送到其正常标准输出以及命名文件；我们`/dev/tty`用来将其发送到当前终端。

但是请注意，`cvs`由于它缓冲其输出，您可能会在输出中得到长时间的延迟。这只是将输出发送到非终端时 C 库的 I/O 处理的默认行为，如果您需要立即输出，这可能是一个问题。解决这个问题非常复杂（你最终会使用 Expect），所以如果你对输出的突发性感到满意，那就别管它了……</p>

* * *

在 Windows 上，您需要以另一种方式进行操作。

```
set pipe [open |[list cvs -qn update] "r"]
while {[gets $pipe line] >= 0} {
    append cvsUpdStr "$line\n"   ;# Note the \n at the end!
    puts $line
}
close $pipe                      ;# Any errors turn up here! 
```

with 的构造`|[list ...]`在 Tcl 术语中相当不寻常，但在这种情况下使用它是正确的。（如果“文件名”的第一个字符`open`是 a `|`，则参数的*其余部分*被视为用于构建管道的参数列表。）

# css - Jquery切换类

> ID：12619119
> 
> 赞同：0
> 
> 时间：2012-09-27T10:19:32.610
> 
> 标签：css, jquery-ui, accordion, addclass

我有一个使用以下脚本开发的手风琴菜单

```
$(document).ready(function(){

    $('li.button a').click(function(e){
     $(this).addClass('active');

        /* Finding the drop down list that corresponds to the current section: */
        var dropDown = $(this).parent().next();

        /* Closing all other drop down sections, except the current one */
        $('.dropdown').not(dropDown).slideUp('100');
        dropDown.slideToggle('100');

        /* Preventing the default event (which would be to navigate the browser to the link's address) */
        e.preventDefault();     })      

}); 
```

单击菜单时我需要添加 .active 类，因此我在 jquery 中添加了 addclass ，它正在添加类，但问题是单击另一个菜单时应删除该类。我什至也尝试了切换类，但没有奏效。

而且我还希望在打开页面时默认打开第一个 li 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:22:30.747

只需在函数的开头添加它：

```
$('li.button a').click(function(e){
    $('li.button a').removeClass('active');
    $(this).addClass('active');
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:23:13.770

尝试这个

```
$('li.button a').each(function(){
    $(this).removeClass("active").addClass("no-active"); // your non active class
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:23:26.807

```
$('li.button a').click(function(e){
     if($(this).hasClass('active')) // this line verifies if the actual clicked element is already active
         return false;  // you can return false or do another operation here

     $('li.button a.active').removeClass('active');

     $(this).addClass('active');

     /* Finding the drop down list that corresponds to the current section: */ 
        var dropDown = $(this).parent().next(); 

        /* Closing all other drop down sections, except the current one */ 
        $('.dropdown').not(dropDown).slideUp('100'); 
        dropDown.slideToggle('100'); 

        /* Preventing the default event (which would be to navigate the browser to the link's address) */ 
        e.preventDefault();     
}) 
```

# c# - 代码首先定义“外部”表的外键

> ID：12619123
> 
> 赞同：2
> 
> 时间：2012-09-27T10:19:49.973
> 
> 标签：c#, ef-code-first

在我的项目中，我有一些不由 Code First 管理的表（ASP.NET 用户和角色表）。我想从我自己的表中引用这些表，只是为了确保数据是完整的。我没有向 ASP.NET 表添加任何约束，只是对我自己的，所以我相当肯定这不会打扰 ASP.NET 成员资格代码。

我有自己的用户表，其中将保存其他用户信息：

```
class MyUser
{
     public int UserId { get; set; };   // The primary key of the table
     public Guid UserGuid { get; set; } // References aspnet_Users.UserGuid
     ...
} 
```

我基本上希望 Code First 在创建 MyUsers 表时执行以下 SQL：

```
ALTER TABLE MyUsers ADD FOREIGN KEY (UserGuid) REFERENCES aspnet_Users(UserId) 
```

我希望它在执行迁移等时正确运行它......

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:32:04.603

所以基本上，我认为您需要使用逆向工程工具为 ASP.NET umembership 表生成代码优先 POCO。例如，您可以直接从您的 MyUser 类中引用这些 POCO。

# xcode - 如何在 xcode 4.5 中同时支持 armv6 和 armv7s 的发布版本

> ID：12619124
> 
> 赞同：53
> 
> 时间：2012-09-27T10:19:54.890
> 
> 标签：xcode, xcode4.5, armv7, armv6

我知道这是不可能的，Apple 计划这样做是为了迫使用户升级他们的设备。但我只想知道是否有一些解决方法或黑客能够做到这一点？客户坚持认为我们仍然应该支持 armv6，因为应用程序用户的比例仍然“很大”。

我知道一个名为`lipo`合并静态库的命令，我在某处读到我们也可以使用它来合并 ipa 文件，但我不确定它是如何完成的。我已经在谷歌和这个网站上进行了几次搜索，但很难找到具体的答案。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-10-01T17:29:05.223

我已经能够使用 App Store 中的应用成功地做到这一点。它支持 armv6、armv7 和 armv7s 以及从 4.2 到 6.0 的 iOS 版本。我已经验证它可以在旧设备（iPhone 3G、iPod touch 2g）上一直运行到 iPhone 5。

此方法需要同时安装 Xcode 4.5 和旧版本的 Xcode。对于我的旧版本，我仍在使用 4.3.2，但 4.4 应该也可以工作。

我有这个答案的截图，但 Stack Overflow 不允许我发布它们，因为我是新手。:(

## Xcode 4.5 中的设置

1.  为您的 armv6 构建添加新的构建配置。我复制了 Release 配置并将其命名为 Release_armv6。

2.  为您的构建配置设置架构和有效架构。对于除 Release_armv6 之外的所有版本，使用默认值。对于 Release_armv6，手动将其设置为**armv6**。 [http://i.stack.imgur.com/h8Mpl.png](http://i.stack.imgur.com/h8Mpl.png)

3.  如果您正在使用 Xcode 4.4 及更低版本无法理解的 iOS 6 功能，则需要为您的 armv6 构建#ifdef 这些功能。在其他 C 标志和其他 C++ 标志下的构建设置中，我将**-DARMV6_ONLY**添加到了我的 Release_armv6 配置中。然后，无论代码使用新的 iOS 6 API，我都会根据需要执行 #ifndef ARMV6_ONLY / #endif 之类的操作。 [http://i.stack.imgur.com/czF6J.png](http://i.stack.imgur.com/czF6J.png)

4.  添加一个新方案并将其设置为在所有情况下都使用 Release_armv6 构建配置。

5.  在 Build Phases 下，使用以下脚本添加 Run Script Build Phase（将 Shell 设置为**/bin/csh**）。这就是魔法发生的地方。**编辑配置部分：**确定 Release_armv6 构建的完整路径并将其替换为 ARMV6_EXECUTABLE_PATH。还要设置 MINIMUM_OS。

```
 #
    # Script to add armv6 architecture to iOS executable built with Xcode 4.5
    #

    #################
    # Configuration #
    #################
    # Change this to the full path where Xcode 4.4 (or below) puts your armv6 output
    setenv ARMV6_EXECUTABLE_PATH "$BUILD_ROOT/Release_armv6-iphoneos/$EXECUTABLE_PATH"

    # Your "real" minimum OS version since Xcode 4.5 wants to make it iOS 4.3
    # Must be 4.2 or below if you are supporting armv6...
    setenv MINIMUM_OS 4.2
    #####################
    # End configuration #
    #####################

    # For debugging
    echo CURRENT_ARCH = $CURRENT_ARCH
    echo CONFIGURATION = $CONFIGURATION

    # Don't need to do this for armv6 (built in older Xcode), simulator (i386), or debug build
    if ("$CURRENT_ARCH" == "armv6") exit 0
    if ("$CURRENT_ARCH" == "i386") exit 0
    if ("$CONFIGURATION" != "Release" && "$CONFIGURATION" != "Beta Test") exit 0

    # Paths
    setenv LIPO_PATH "$CODESIGNING_FOLDER_PATH/${EXECUTABLE_NAME}.lipo"
    setenv FINAL_PATH "$CODESIGNING_FOLDER_PATH/$EXECUTABLE_NAME"
    setenv FULL_INFO_PLIST_PATH "$CONFIGURATION_BUILD_DIR/$INFOPLIST_PATH"

    # Debug / sanity check
    lipo -info "$FINAL_PATH"
    ls -l "$ARMV6_EXECUTABLE_PATH"

    # Make sure something exists at $LIPO_PATH even if the next command fails
    cp -pv "$FINAL_PATH" "$LIPO_PATH"

    # If rebuilding without cleaning first, old armv6 might already be there so remove it
    # If not, lipo won't output anything (thus the cp command just above)
    lipo -remove armv6 -output "$LIPO_PATH" "$FINAL_PATH"

    # Add armv6 to the fat binary, show that it worked for debugging, then remove temp file
    lipo -create -output "$FINAL_PATH" "$ARMV6_EXECUTABLE_PATH" "$LIPO_PATH"
    lipo -info "$FINAL_PATH"
    rm -f "$LIPO_PATH"

    # Change Info.plist to set minimum OS version to 4.2 (instead of 4.3 which Xcode 4.5 wants)
    /usr/libexec/PlistBuddy -c "Set :MinimumOSVersion $MINIMUM_OS" "$FULL_INFO_PLIST_PATH"
    plutil -convert binary1 "$FULL_INFO_PLIST_PATH" 
```

## 构建过程

当您准备好创建发布版本时，请按以下顺序进行：

1.  关闭 Xcode 4.5 并打开 Xcode 4.4 或更低版本。选择您的 armv6 方案并构建它。

2.  关闭 Xcode 4.4 或更低版本并打开 Xcode 4.5。选择您的发布方案并构建它。

差不多就是这样。检查构建输出以验证您是否得到了您想要的 - 一个包含三个体系结构的可执行文件。运行脚本的最后一个输出应该告诉你这一点。

如果有人有改进的想法，请随意。我想你可能会喜欢并从构建脚本中调用 Xcode 4.4 的“xcodebuild”命令，从而完全减轻在 Xcode 版本之间切换的需要。但这对我来说已经足够好了。;)

**注意事项：**

*   为了安全起见，您可能希望在旧版本的 Xcode 中编辑您的 xib 文件。到目前为止，4.5 似乎是向后兼容的，但你永远不知道。

*   事实上，您可能会考虑只在较旧的 Xcode 中进行大部分开发，除了 iOS 6 特定的东西。取决于对您来说最简单的方法。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-11T09:50:52.427

还有另一种方式，因为 gcc-4.2 仍然支持 armv6，它不需要您关闭 Xcode 4.5 并打开以前的版本（用于编译，但不适用于在 4.2 设备上运行应用程序）：

*   将 armv6 添加到有效的拱门和拱门：

拱门：$(ARCHS_STANDARD_32_BIT) armv6

有效架构：armv6 armv7 armv7s

*   Vim（或 TextEdit）您的 project.pbxproj 文件以根据需要将 IPHONEOS_DEPLOYMENT_TARGET 替换为 4.0 - 4.1 - 4.2，Xcode 4.5 不会让您低于 4.3。

然后，如果您构建项目，您将看到警告：

```
警告：没有规则为架构 armv6 处理 sourcecode.c.objc 类型的文件“$(PROJECT_DIR)/App/AppDelegate.m”
警告：没有规则为架构 armv6 处理 sourcecode.cc 类型的文件 '$(PROJECT_DIR)/App/SomeFile.c'

```

*   `Build Rule`为名称匹配的源文件添加一个：`*.[mc]`将使用`LLVM GCC 4.2`

它适用于静态库，但不适用于应用程序：

```
ld：文件是通用的（4 片），但不包含（n）armv6 片：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib /crt1.3.1.o 用于架构 armv6

```

*   为了使其适用于应用程序，我们需要将 armv6 切片添加到此目标文件（随 5.1 SDK 提供）：

```
lipo /path/to-4.4/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/crt1.3.1.o -extract armv6 -output /tmp/crt1 .3.1-armv6.o
lipo /Applications/Xcode.app/Contents//Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o /tmp/crt1.3.1-armv6.o -create -输出/tmp/crt1.3.1-armv677s.o
mv /Applications/Xcode.app/Contents//Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o /Applications/Xcode.app/Contents//Developer/平台/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o.bkp
mv /tmp/crt1.3.1-armv677s.o /Applications/Xcode.app/Contents//Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o

```

编译您的项目并检查您的应用程序是否包含所有拱门：

```
$ 文件 DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app/TestApp
DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app/TestApp：具有 3 种架构的 Mach-O 通用二进制文件
DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app/TestApp（用于架构 armv6）：Mach-O 可执行 arm
DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app/TestApp（用于架构 armv7）：Mach-O 可执行 arm
DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app/TestApp（用于架构 cputype (12) cpusubtype (11)）：Mach-O 可执行 arm

```

请注意，dSYM 文件还包含所有拱门（用于崩溃报告符号化）：

```
$ 文件 DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app.dSYM/Contents/Resources/DWARF/TestApp
DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app.dSYM/Contents/Resources/DWARF/TestApp：具有 3 种架构的 Mach-O 通用二进制文件
DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app.dSYM/Contents/Resources/DWARF/TestApp（用于架构 armv6）：Mach-O dSYM 配套文件 arm
DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app.dSYM/Contents/Resources/DWARF/TestApp（用于架构 armv7）：Mach-O dSYM 配套文件 arm
DerivedData/TestApp/Build/Products/Debug-iphoneos/TestApp.app.dSYM/Contents/Resources/DWARF/TestApp（用于架构cputype（12）cpusubtype（11））：Mach-O dSYM配套文件arm

```

`Product`我通过打开 xcode 4.4.1，然后->成功地在 iOS 4.2 2gen iPod touch 上安装并启动了该应用程序`Run without building`。

*   当您**存档**您的产品时，您可能会再次遇到 Apple Mach-O 链接器错误，这一次涉及其他文件，例如`libarclite_iphoneos.a`或`libclang_rt.ios.a`：

```
ld：文件是通用的（2 个切片）但不包含一个（n）armv6 切片：/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphoneos.a 用于架构 armv6

```

```
ld：文件是通用的（2 个切片）但不包含一个（n）armv6 切片：/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/4.1/libclang_rt.ios.a用于架构 armv6

```

用于 crt1.3.1.o 的过程也适用于这些文件，并且将修复允许 Xcode 成功归档您的项目的错误：您可以使用*ld*打印的路径来查找文件并将 armv6 切片与*lipo*连接；请记住，以前版本的 Xcode 中的 libclang_rt.ios.a 不是位于，`Xcode.app/[...]/usr/lib/clang/4.1`而是位于`Xcode.app/[...]/usr/lib/clang/4.0`.

我已成功归档文件，使用临时分发配置文件部署它，并在 iPhone 3G (4.2.1) 和 iPhone 3GS (6.0) 上进行了测试。

*   最后一个问题：我们无法启动应用程序。在 中`Organizer`，有消息：**此版本的 Xcode 不支持“iPhone 3G”类型的设备。**

但是`ls`在`DeviceSupport`节目中：

```
ls /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/
4.2 4.3 5.0 5.1 6.0 (10A403)

```

Xcode 4.4.1 的 4.2 目录中没有差异。

现在的问题是：Xcode 如何检测设备是否受支持？

`/Applications/Xcode.app/Contents/Developer//Platforms/iPhoneOS.platform/Developer//Library/PrivateFrameworks/DTDeviceKitBase.framework/DTDeviceKitBase`使用（或其他十六进制编辑器）打开`Hex Fiend`，并将 ascii 替换`4.3`为`4.2`使错误消息消失，并列出设备上安装的应用程序（但设备列表中的设备项目符号仍为红色）。

然后我们需要编辑`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks//DTDeviceKit.framework/Versions/Current/DTDeviceKit`和替换：

`Expired.deviceArchitecture.iPhone1,1.iPhone1,2.iPod1,1.iPod2,1.iPod2,2.armv6`

至 ：

`Expired.deviceArchitecture.iPhone0,1.iPhone0,2.iPod0,1.iPod0,1.iPod0,2.armv5`

然后我们在 Organizer (Xcode 4.5.1) 中有一个橙色的子弹：

```
“iPhone”上的 iOS 版本太旧，无法与此版本的 iOS SDK 一起使用。请将设备恢复到下列操作系统版本。

安装在 iPhone 上的操作系统
4.2.1 (8C148)

Xcode 支持的 iOS 版本
6.0 (10A403)
5.1
5.0
4.3

```

现在的问题是：Xcode 支持的 iOS 版本在哪里定义？

由于 中有一个`4.2`目录`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/`，它应该已经被支持...

试图`iPhoneOS4.2.sdk`从 Xcode 4.4.1 复制到`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/`，但它不支持设备。

所以还没有找到如何在 Xcode 4.5 中添加 4.2 设备支持。有任何想法吗 ？

结论：在 Xcode 4.5 中编译 armv6/7/7s 是可能的。但是如果不启动 Xcode 4.4，就无法在 4.2 armv6 设备上启动应用程序。

**大更新：它适用于 Xcode 4.5.2！**

现在项目符号在 Xcode 4.5.2 中是绿色的 :-) 该设备出现在 Run 按钮附近的下拉列表中。但是在尝试运行该应用程序时，收到消息：

```
Xcode 无法使用所选设备运行。
选择具有受支持架构的目标，以便在此设备上运行。

```

只需将 armv6 添加到有效架构中：-)

其他说明：`Build Rule`对于名称匹配的源文件：`*.[mc]`可以使用`LLVM GCC 4.2`or `Apple LLVM compiler 4.1`, or`Default compiler`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-23T12:23:11.737

感谢这个有用的脚本！

我成功地结合了整篇文章中的所有信息，生成的完整脚本如下。此脚本需要 Xcode 4.5.x 和支持 armv6 的先前 Xcode 版本（例如 Xcode 4.4.1，安装在 /Applications/Xcode 4.4.1.app 中）

该脚本不需要在 xcode 4.4.x 中首先编译，您只需启动最新的 Xcode，选择发布配置并构建。（Release-armv6 配置应该像 Mike 的原始帖子中提到的那样定义）。

它将生成与 armv6 armv7 和 armv7s 兼容的 .app

感谢 Mike 的原始脚本！

```
#################
# Configuration #
#################
# Change this to the full path where Xcode 4.4 (or below) puts your armv6 output
setenv ARMV6_OUTPUT_PATH     "$BUILD_ROOT/Release-armv6-iphoneos/"
setenv ARMV6_EXECUTABLE_PATH "$ARMV6_OUTPUT_PATH$EXECUTABLE_PATH"

# Your "real" minimum OS version since Xcode 4.5 wants to make it iOS 4.3
# Must be 4.2 or below if you are supporting armv6...
setenv MINIMUM_OS 4.2
#####################
# End configuration #
#####################

# For debugging
echo CURRENT_ARCH = $CURRENT_ARCH
echo CONFIGURATION = $CONFIGURATION

# Don't need to do this for armv6 (built in older Xcode), simulator (i386), or debug build
#if ("$CURRENT_ARCH" == "armv6") exit 0
if ("$CURRENT_ARCH" == "i386") exit 0
if ("$CONFIGURATION" != "Release" && "$CONFIGURATION" != "Beta Test") exit 0

# Paths
setenv LIPO_PATH "$CODESIGNING_FOLDER_PATH/${EXECUTABLE_NAME}.lipo"
setenv FINAL_PATH "$CODESIGNING_FOLDER_PATH/$EXECUTABLE_NAME"
setenv FULL_INFO_PLIST_PATH "$CONFIGURATION_BUILD_DIR/$INFOPLIST_PATH"

#log file for armv6 build
echo "------------------------- BUILDING ARMV6 NOW -------------------------"
setenv LOGFILE "$BUILD_ROOT/buildarmv6.txt"
setenv CONFIGURATION_ARMV6 "${CONFIGURATION}-armv6"
#build armv6 version
echo "Building $FULL_PRODUCT_NAME armv6         CONFIG=$CONFIGURATION-armv6            target=$TARGETNAME"
"/Applications/Xcode 4.4.1.app/Contents/Developer/usr/bin/xcodebuild" -project         "${PROJECT_FILE_PATH}" -target "${TARGETNAME}" -sdk "${PLATFORM_NAME}" -configuration "$CONFIGURATION-armv6" CONFIGURATION_BUILD_DIR="$ARMV6_OUTPUT_PATH" >> "$LOGFILE"
echo "---------------------------- ARMV6 BUILT  -------------------------"
# to check for armv6 build errors
open "$LOGFILE"

# Debug / sanity check
lipo -info "$FINAL_PATH"
ls -l "$ARMV6_EXECUTABLE_PATH"

# Make sure something exists at $LIPO_PATH even if the next command fails
cp -pv "$FINAL_PATH" "$LIPO_PATH"

# If rebuilding without cleaning first, old armv6 might already be there so remove it
# If not, lipo won't output anything (thus the cp command just above)
lipo -remove armv6 -output "$LIPO_PATH" "$FINAL_PATH"

# Add armv6 to the fat binary, show that it worked for debugging, then remove temp file
lipo -create -output "$FINAL_PATH" "$ARMV6_EXECUTABLE_PATH" "$LIPO_PATH"
echo "------------------------- CHECK ARMV6 ARMV7 ARMV7S ARE MENTIONED BELOW -------------------------"
lipo -info "$FINAL_PATH"
echo "------------------------------------------------------------------------------------------------"
rm -f "$LIPO_PATH"

# Change Info.plist to set minimum OS version to 4.2 (instead of 4.3 which Xcode 4.5 wants)
/usr/libexec/PlistBuddy -c "Set :MinimumOSVersion $MINIMUM_OS" "$FULL_INFO_PLIST_PATH"
plutil -convert binary1 "$FULL_INFO_PLIST_PATH" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-17T00:58:49.223

谢谢你的帖子。我们有一些应用程序要构建，因此我们按照您的建议使用 xcodebuild 自动化了 armv6 构建。这是执行此操作的脚本的一部分（在我们使用 bash 时进行了修改），可以将其添加到上面的脚本中。这可以在“# Debug / sanity check”之前添加

```
setenv LOGFILE "/Users/xyz/Desktop/buildarmv6.txt"

setenv CONFIGURATION_ARMV6 "${CONFIGURATION}_armv6"
echo "Building $FULL_PRODUCT_NAME armv6         CONFIG=$CONFIGURATION_ARMV6         target=$TARGETNAME"

"/Applications/Xcode 4.4.1.app/Contents/Developer/usr/bin/xcodebuild" -project "${PROJECT_FILE_PATH}" -target "${TARGETNAME}" -sdk "${PLATFORM_NAME}" -configuration "$CONFIGURATION_ARMV6" >> "$LOGFILE"

echo "Built armv6"
open "$LOGFILE" # to check for armv6 build errors 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-30T23:50:43.167

感谢 Mike 提供了这个有用的教程和脚本。正如 Piotr 在评论中提到的，如果您从 Xcode 运行归档命令，脚本将失败，因为它使用另一个构建目录进行归档。

下面是我对脚本的修改，以使其适用于正常发布构建和存档特定构建​​。

它假定 armv6 构建之前按照 Mike 的原始指令运行。它使用 bash 语法，因为我更容易剥离公共基础构建目录。因此，这意味着将原始脚本转换为 bash，这只是通过 export 替换 setenv 并更改 if 语句语法的问题。

```
# Find the common base directory for both build
XCODE_BUILD=${BUILD_ROOT%%/Build*}
# Change this to the full path where Xcode 4.4 (or below) puts your armv6 output, using the previously derived base
export ARMV6_EXECUTABLE_PATH="$XCODE_BUILD/Build/Products/Release_armv6-iphoneos/$EXECUTABLE_PATH" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-04T08:14:30.450

我想与kenji的回答分享我的经验。我认为这是构建在 armv6 / armv7 / armv7s 上运行的通用应用程序的最佳方法，从 iOS3.1 到 iOS7。

完全按照kenji的建议去做。您可能会忽略有关归档产品的部分，主要是如果您通过应用程序加载器（压缩）将您的应用程序发送到苹果。

更多建议：

当您为“分发”配置构建时，xcode 将验证产品，您将收到两个警告：

*   “不支持架构 armv6..​​.”
*   “不支持低于 4.3 的 iOS 部署目标......”。

当然，因为您实际上是为 armv6 构建的，并且您将部署目标设置为 3.1 或 4.2，例如！

所以......只是忽略这些警告。

将您的应用程序发送到 iTunes Connect 后，您会收到一封来自 Apple 的警告电子邮件，说您的应用程序不是“Position Independent Executable”。当然，再次，这是因为你的目标低于 4.3。忽略这个警告。

在此日期（2013 年 7 月 3 日），我已使用此方法成功将应用更新到应用商店，并且已通过验证。应用部署目标为 iOS 3.1.2，支持 armv6-armv7-armv7s。

我还想说：

*   如果您制作一个全新的应用程序，只需将部署目标设置为 iOS6 或 iOS5。忽略旧操作系统。
*   如果你有一个自 2010 年以来销售的旧应用程序，拥有成千上万的用户，那么实际上在 armv6 上使用它的人可能比苹果通常说的要多得多。我认为 3 年对于放弃对这些旧设备的支持来说太短了，主要是如果您的应用程序可以在它们上运行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-17T14:27:46.840

Apple 已停止接受支持 iOS5 之前的设备并包含 iPhone 5 启动图像的版本。这是我提交的基于 Xcode 4.4.1 构建的最后一个构建的电子邮件

> 亲爱的开发者，
> 
> 我们发现您最近交付的“”存在一个或多个问题。要处理您的交付，必须更正以下问题：
> 
> 无效的启动图像 - 您的应用包含一个带有大小修饰符的启动图像，仅支持使用 iOS 6.0 SDK 或更高版本构建的应用。
> 
> 更正这些问题后，请转到“版本详细信息”页面并单击“准备上传二进制文件”。继续完成提交过程，直到应用状态为“等待上传”。然后，您可以提供更正后的二进制文件。
> 
> 问候，
> 
> 应用商店团队

# javascript - Javascript 的 indexOf() 如何解析引用

> ID：12619130
> 
> 赞同：14
> 
> 时间：2012-09-27T10:20:10.747
> 
> 标签：javascript, arrays, reference, specifications, ecmascript-5

我对一个思想实验有点困惑，现在我正在寻找一些建议。它关于 ECMAscript 参考和`Array.prototype.indexOf()`方法。

让我们轻松开始：

```
var container = [ ];
// more code
container.push( 5 );
container.push( 7 );
container.push( 10 ); 
```

* * *

所以现在我们将一些“*原始值*”推送到我们的 ECMAscript 数组中（无论该声明是否正确，我都会回来讨论），至少到目前为止我是这样想象的。打电话给

```
container.indexOf( 7 ); 
```

`1`将按预期返回。我遇到的一个大问题是，如果`.indexOf()`真的比较原始值，或者实际上`Number()`是否创建了一个对象并存储了它，并且它的**引用**正在被比较。如果我们像这样重写它，这将变得更加明显：

```
var a = 5,
    b = 7,
    c = 10;

var container = [ ];

container.push( a );
container.push( b );
container.push( c );

container.indexOf( b ); 
```

* * *

到此为止，人们仍然可以很容易地争辩说，所有`.indexOf()`需要做的就是比较值，但现在让我们看一下这样的事情：

```
var a = { name: 'a', value: 5 },
    b = { name: 'b', value: 10 },
    c = { name: 'c', value: 15 };

var container = [ ];
// more code
container.push( a );
container.push( b );
container.push( c ); 
```

*在这里，我们用对象引用*填充了该容器数组，并且仍然`.indexOf()`按预期工作

```
container.indexOf( b ) // === 1 
```

虽然这样的电话

```
container.indexOf({ name: 'b', value: 10 }); 
```

显然返回`-1`，因为我们正在创建一个新对象并获得一个新的引用。所以这里它必须在内部相互比较引用，对吧？

一些 ECMAscript 规范天才可以确认或更好地链接我一些关于此的材料吗？

*一个附带的问题是，是否有任何可能的方式来访问lexicalEnvironment*和*Activation Object*中的内部存储的对象引用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T10:31:52.367

它归结为`indexOf()`使用与运算符相同的算法依次比较每个数组属性`===`。

ECMAScript 5 规范的相关部分是第 15.4.4.14 节，第 9 步，第 b 节（突出显示我的）：

> 如果 kPresent 为真，则
> 
> > 一世。令 elementK 为使用参数 ToString(k) 调用 O 的 [[Get]] 内部方法的结果。
> > 
> > ii. 让同样是对 searchElement 和 elementK应用**严格相等比较算法的结果。**
> > 
> > iii. 如果相同，则返回 k。

参考：

*   [指数（）](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.14)
*   [严格等式比较算法](http://ecma-international.org/ecma-262/5.1/#sec-11.9.6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:25:33.693

我不确定这是否在所有 ECMAScript 实现中都得到保证，但[Mozilla 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)指出它使用严格相等来进行比较 (===)。因此，这将表现出您描述的行为，通过原语上的值进行比较，但通过对象上的引用进行比较（请参阅[严格相等](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators#Using_the_Equality_Operators)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:49:31.660

@Tim Down 是对的。`indexOf`进行严格的比较。我正在通过覆盖`valueOf`函数来演示这一点

```
var MyObject = function(n, v){
   this.name = n;
   this.value = v;
}

MyObject.prototype.valueOf = function(){
    return this.value;
}

var a = new MyObject("a", 5);
var b = new MyObject("b", 10);
var c = new MyObject("c", 15);

var container = [ ];

container.push( a );
container.push( b );
container.push( c );

console.log(b == 10); // true
console.log(container[1] == 10); // true

console.log(b === 10); // false
container.indexOf(10); // -1 
```

# android - 地图应用程序错误

> ID：12619136
> 
> 赞同：1
> 
> 时间：2012-09-27T10:20:33.940
> 
> 标签：android

我正在android中做一个谷歌地图应用程序。我已经安装了 2 个平台 2.3.3 和 2.1 以及对应的 Google API。我已经获得了 Google Maps API 密钥。我还在清单文件中添加了权限。对于这个应用程序，我使用 Google API 2.1 构建 SDK 和 Android 2.1 用于 MinSDK 版本。但是当我运行项目时，它在控制台中显示警告

**忽略平台“android-8”：缺少 build.prop**。

我在 main.xml 文件 ( android:apikey = ) 上粘贴的 API KEY 上的错误也是

**错误：解析 XML 时出错：格式不正确（令牌无效）**

main.xml 文件代码是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"  
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<com.google.android.maps.MapView
android:id="@+id/mapView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:enabled="true"
android:clickable="true"
android:apiKey="<MYAPIKEY>" />

</LinearLayout> 
```

我在主要活动中没有错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:23:07.353

API 密钥中不应包含`<`and`>`字符。

# objective-c - 将应用程序置于前台后，UIAlertView 不可见

> ID：12619138
> 
> 赞同：0
> 
> 时间：2012-09-27T10:20:39.630
> 
> 标签：objective-c, ios, uinavigationcontroller, uialertview

我正在做一个 iOs 项目。在这个项目中，我有一个过程：

1.  用户在注册页面注册自己
2.  当他按下“注册”时，会显示另一个页面（通过`NavigationControler`，带有进度指示器和“请稍候”消息。）
3.  从服务器获得响应后，`UIAlertView`显示一些消息
4.  当用户在警报时按下“确定”时，它会移至下一个（当一切正常时）或上一个（当出现问题时）页面。

在大多数情况下，此流程有效。但有时（并非总是），当用户在进程指示器打开时将应用程序发送到后台/锁定屏幕，然后将应用程序恢复到活动状态时，`UIAlertView`不会显示。但是，如果用户再次将应用程序发送到后台并将其带回，则消息是可见的。

`UIAlertView`因为需要继续进行交互，所以这是一个问题。我不能要求用户知道，如果此时没有消息可见，他们应该再次将应用程序前后翻转。我不知道为什么会发生这种情况，以及如何避免这种行为。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:28:30.643

当您的应用程序处于后台时，您可以发出本地通知。所以根据你的说法，如果警报视图没有出现，但你仍然希望用户知道发生了什么事情或出了什么问题，那么你可以直接使用本地通知。

这是代码 -

```
 UILocalNotification *localNotification = [[UILocalNotification alloc] init];

 localNotification.fireDate = self.datePicker.date;
 localNotification.alertBody = self.messageField.text;
 localNotification.soundName = UILocalNotificationDefaultSoundName;
 localNotification.applicationIconBadgeNumber = 1;

 NSDictionary *infoDict = [NSDictionary dictionaryWithObjectsAndKeys:@"Object 1", @"Key
  1", @"Object 2", @"Key 2", nil];
 localNotification.userInfo = infoDict;

 [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
 [localNotification release]; 
```

因此，当本地通知生成时，用户可以知道这一点。您可以将用户导航到直接到应用程序。点击关闭本地通知警报。本地语言通知警报将自动出现。

这里是更多细节的链接 - [http://www.iostipsandtricks.com/ios-local-notifications-tutorial/](http://www.iostipsandtricks.com/ios-local-notifications-tutorial/)

# html - 嵌套html表格问题

> ID：12619147
> 
> 赞同：0
> 
> 时间：2012-09-27T10:21:25.770
> 
> 标签：html, css

您好，我在asp.net的gridview（我认为它基本上也是一个表格）中嵌套了一个表格，但问题是单元格内的表格在它的边缘留下了一个空间，（即从网格的墙上视图），我希望这个空间最小化这是我的网格视图：

```
<FooterTemplate>
                    <table border="1" cellspacing="0" cellpadding="0" width="auto">
                     <tr><td><asp:Label ID="cl_crTotal" runat="server" CssClass="alLbl" /></td>
                        </tr>
                        <tr><td><asp:Literal runat="server" ID="closingTotC" ></asp:Literal></td>
                        </tr>
                    </table>
                  </FooterTemplate> 
```

我也给出了图片，请查看 [http://imgur.com/4ukGm&K8tRy](http://imgur.com/4ukGm&K8tRy) “这张图片”

PS：我知道并希望这是一个简单的问题，并且很容易解决，因为我是新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:26:13.293

在没有看到该网格视图的代码的情况下，我只能猜测设置了一些填充或边距，这会导致这种行为。

所以对于表格出现的网格单元格

```
padding: 0; 
```

并为表本身设置

```
margin: 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:27:08.590

实际上，它非常简单。如果您查看数据中的所有字段，您会发现实际上每个字段都有它。它称为填充。

您应该做的是从该单元格中删除填充。我将假设您不希望它在您的表格的其余部分中，所以您要做的是给特定的单元格一个 id，并在 css 中添加一条规则，说它不应该接收任何填充。

你的 html 看起来像这样：

```
<body>
    <table>
         <tr>
              <td id="cell_id">somedata</td>
         </tr>
    </table>
</body> 
```

这在您的 css 文件中看起来像这样

```
 #cell_id { padding: 0px; } 
```

# android - IntelliJ - 包括模块但从构建中排除

> ID：12619148
> 
> 赞同：4
> 
> 时间：2012-09-27T10:21:32.657
> 
> 标签：android, build, intellij-idea

我正在尝试以下操作：

在我的项目中包含一个 Android 模块。从实际构建中排除它（例如，如果您按重建项目）。

背景：Android模块编译需要20秒我不想等待，因为我现在只做桌面测试。但是我不能从项目中完全删除 Android 模块，会丢失重构功能（例如，在我重命名库项目中的类之后不会运行）。

我如何告诉他不要使用 DEX And​​roid 的任何想法（用空的脚本覆盖 Android ANT 脚本中的构建是我想到的一种方法）。欢迎任何提示...

克里斯

# jquery - 页面加载时 Jquery UI 自动完成加载

> ID：12619152
> 
> 赞同：0
> 
> 时间：2012-09-27T10:21:48.103
> 
> 标签：jquery, jquery-ui, autocomplete

我正在尝试在页面加载时加载自动完成数据，现在当我在输入中键入一些字母时它正在执行 getJson，并且由于 json 数据的大小，它被冻结了。所以我希望在页面加载时触发自动完成 json 请求，并拥有数据，所以当我开始输入时它不会冻结。干杯!

```
 <script>
$(function() {

  $.getJSON("airports.php", function(data) {

            $( "#cityAirport" ).autocomplete({
                source: data
            });
        });
});
</script> 
```

我的 Exatc 问题是，现在当我开始输入内容时，当 getJson 被解雇时，网站会冻结一秒钟（2-3）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:41:51.400

我将对此做出回答，而不是发表评论。您可以限制它，也可以`minLength`用于仅在您输入超过 * 个字符时获取数据。

```
$.getJSON("airports.php", function(data) 
{
    $( "#cityAirport" ).autocomplete(
    {
        source: data,
        max: 10, // Limit the autocomplete options that will show
        minLength: 3 // Will only autocomplete when there are 3 or more letters
    });
}); 
```

如果这不能解决它，也许首先尝试获取更少的结果。

# android - 致命异常：AsyncTask #1 从谷歌应用引擎读取时

> ID：12619158
> 
> 赞同：0
> 
> 时间：2012-09-27T10:22:06.093
> 
> 标签：android, google-app-engine

```
 private class GetXMLTask extends AsyncTask<String, Void, String>
 {
        @Override
        protected String doInBackground(String... urls)
        {           
        String output = null;           
        try
        {   
            List<String> citations = new ArrayList<String>();
             for (String url : urls) 
                 {                  
                    output = getOutputFromUrl(url);   
                    citations.add(output);
                outputText.setText(output);
             }               
        }
        catch(Exception e)
        {
            Toast.makeText(getBaseContext(), "Cant connect to server", Toast.LENGTH_LONG).show();
        }
        return output;
    }           
  } 
```

//我正在尝试从 Google App Engine 读取字符串并将其设置为文本框。其余的代码都很好。但是异步任务抛出了一个致命的异常......帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:24:01.323

删除这个：

```
Toast.makeText(getBaseContext(), "Cant connect to server", Toast.LENGTH_LONG).show(); 
```

Toast 在 doInBackground() 中不起作用并移动

```
outputText.setText(output); 
```

至

```
onPostExecute(){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:25:30.907

UI 更新不能工作`doInBackground()`，使用`runOnUi()`方法你可以做到这一点..like this

```
runOnUIThread(Toast.makeText(getBaseContext(), "Cant connect to server", Toast.LENGTH_LONG).show(); 
```

# php - php重定向到另一个带有POST数据的页面

> ID：12619160
> 
> 赞同：1
> 
> 时间：2012-09-27T10:22:12.253
> 
> 标签：php, post

在我的 php 应用程序中，我只需要使用一些 POST 数据将用户重定向到特定的 url（第三方）即可完成他们的服务。

数据应安全地传递到该 URL（因为它们是该第三方系统的登录凭据）。

我尝试使用 cURL 执行此操作，但它不会重定向到该特定页面。如果我发布带有设置值的隐藏字段的表单，它工作正常。但是任何人都可以通过在浏览器中查看“查看页面源”选项轻松查看发布的数据。

我正在寻找一个sloution很长时间，但仍然没有运气。如果有人可以指导我将非常感激。提前致谢...！！！！

**编辑**

我不能使用会话，因为这是第三方 url，它要求发布登录凭据以进入该页面。

简而言之的功能，

我要做的是所有用户凭证都存储在我的系统中。
当用户按下一个按钮时，它应该将他重定向到该 url，并应该发布该凭据以进入该外部 3rd 方页面。当用户按下按钮时，他不必通过文本框输入凭据。这就是为什么如果转到浏览器中的“查看页面源代码”选项，我什至无法将隐藏字段硬编码为可见。

**----------**

只是我正在寻找一种方法（在 php 中），它将在发布一些数据时将用户重定向到一个 url。它可以通过创建一个表单并具有文本输入（文本框）来允许用户输入帖子信息并提交来简单地完成。

但就我而言，我不能让用户输入文本框的 POST 信息并提交。当用户单击按钮时，它必须发布数据并重定向到指定的 URL。尝试通过 cURL 执行此操作，但它不会将用户重定向到 URI。此外，如果我添加 hiddenFields 硬编码 POST 值，则它不安全，因为任何人都可以通过浏览器“查看页面源”选项查看 POST 信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:14:32.330

只需制作一个字段数等于凭据的表单。即，如果您想发送用户名和密码，请这样做，

```
<form id="uform" action="" method="post">
        <input type="text" name="uname" id="uname" style="opacity:0;" />
        <input type="text" name="pass" id="pass" style="opacity:0;" />
    </form> 
```

在文件.php 中，

```
<php
var $_uname = "Required username";
var $_pass = "Required password";
echo $_uname.",".$_pass;
?> 
```

然后在您的 javascript 中，在按钮单击事件中，获取此表单并设置输入字段的值。然后提交表格，

```
<script>
var ajax = new XMLHttpRequest();
ajax.open("GET","file.php",true);
ajax.send();

ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
    var dt = ajax.responseText;
    dtsp = dt.split(",");
    var frm = document.getElementById("uform");
    var inp1 = document.getElementById("uname");
    var inp2 = document.getElementById("pass");
    inp1.value = dtsp[0];
    inp2.value = dtsp[1];
    frm.action = 'Url of the site to redirect to';
    frm.submit();
    }
}

    </script> 
```

然后在用户被重定向的第二个站点中，如果要获取数据，请执行此操作，

```
<php
$uname = $_POST["uname"];

$pass = $_POST["pass"];
?> 
```

你去吧。您将安全地将数据从一个站点传输到另一个站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:30:25.400

你可以通过发送`session`，

在第一个站点执行此操作，

```
<?php
        session_start(); 
        $_dt = 'data to send';
        $_SESSION['dt'] = $_dt;
    ?> 
```

在第二个这样做，

```
<?php
     session_start(); 
        $_dt = $_SESSION['dt']
?> 
```

数据将在`$_dt`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T10:27:15.997

如果您需要将与用户关联的数据发送给第三方而不将该数据提供给用户，那么您需要使用以下流程：

*   使用服务器端代码发送数据
*   获取一个令牌来识别该组数据（您可以将其包含在您最初发送的数据中，或者从第三方站点的响应中获取）
*   将用户重定向到第三方站点并在 URL 中包含令牌

显然，这需要第三方网站的配合。

将评论添加到问题后更新：

> 这是第三方 url，它要求发布登录凭据以进入该页面。因此会话在这里不起作用。

听起来您正试图让用户以您的身份登录而不给他们凭据。那是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T10:27:56.800

```
function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
} 
```

（你也可以使用 ajax）；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:27:05.497

您是否考虑过：

a) 使用 javascript 或 java 应用程序对其进行加密——我的银行过去就是这样做的。

b）将变量发布回自身，加密它们，假设它加密，然后将页面反弹到带有加密变量的新页面..

加密的唯一问题是您需要能够将其解密以将其提供给第三方应用程序，除非他们接受特定的编码，在这种情况下，如果您可以解密它，其他人就会知道如何。

# c# - TextBox 应以特定格式显示十六进制文本

> ID：12619165
> 
> 赞同：0
> 
> 时间：2012-09-27T10:22:29.057
> 
> 标签：c#, wpf, mvvm, textbox

我的 xaml 文件中有一个可编辑的文本框。现在根据我的项目要求，文本框中的内容应该只有 0-9 和 af（十六进制值），文本框应该基于十六进制值进行输入。

演示：

**12 ab 32 a5 64**

现在，如果我的光标在末尾并且我继续按退格键，它将删除值，因为它发生在一般文本框中。

现在如果我的光标在 a5 的开头，并且我按下“删除键”，值应该变成这样：

**12 ab 32 56 4**

如果我的光标位于 a5 的末尾并且我按下“删除键”，则不会发生任何事情。

我在我的 C++ 应用程序中成功地做到了这一点，如下所示：

```
void CMSP430CommPanel::textEditorTextChanged (TextEditor& editor)
{

if(&editor == m_texti2cWrite)
{       
    int count = 0;
    int location;

    String text1 = m_texti2cWrite->getText();
    String text = m_texti2cWrite->getText().removeCharacters(" ");
    String hexString = String::empty;   
    int countCaret = m_texti2cWrite->getCaretPosition();

        for(int i=0; i < text.length(); i++)
        {               
            hexString = hexString + String (&text[i], 1);
            if((i+1) % 2 == 0)
            {
                if(i != text.length()-1)
                {
                    hexString = hexString + T(" "); 
                    count ++;               
                }
            }
            count ++;
        }           

        m_texti2cWrite->setText(hexString,false);

        if(text1.length() == m_texti2cWrite->getCaretPosition())
        {
            m_texti2cWrite->setCaretPosition(count);
        }
        else
        {
            m_texti2cWrite->setCaretPosition(countCaret);
        }
} 
```

}

其中 m_texti2cWrite 是文本框的名称。我如何在基于 MVVM 的 wpf 应用程序中实现相同的案例。正如我上面所说，我有一个文本框可以输入。请帮忙！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:36:35.167

由于您使用的是 MVVM - 您可以通过[值转换器](http://wpftutorial.net/ValueConverters.html)执行此操作- 我尝试这样做，主要是出于好奇 - 这似乎工作得很好，但目前每个控件都需要一个转换器实例，因为它正在使用一个实例变量来缓存最后一个已知的好十六进制值 - 我确定你可以将它与验证结合使用来改进它。

**更新** 好吧，这似乎可行（ish） - 只允许 1-9 和 AF，我不得不禁用文本框选择，因为它会导致奇怪的结果 - 我已经使用附加行为来控制光标，可能有更好的方法这样做，但我肯定不知道如何...

删除行为按您的要求工作（如果您在一对末尾删除它什么都不做）。

玩一玩：）

**更新 2**

进行了一些更改以使其与文本选择一起使用。

**看法**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.Resources>
        <local:HexStringConverter x:Key="HexConverter"></local:HexStringConverter>
    </Grid.Resources>
    <StackPanel>
        <TextBox local:TextBoxBehaviour.KeepCursorPosition="true"  VerticalAlignment="Center" Width="200" HorizontalAlignment="Center" Text="{Binding HexValue,Mode=TwoWay,Converter={StaticResource HexConverter},UpdateSourceTrigger=PropertyChanged}"></TextBox>

    </StackPanel>
</Grid> 
```

**查看后面的代码**

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        this.DataContext = new MyViewModel();
        InitializeComponent();
    } 
```

**视图模型**

```
public class MyViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged.Invoke(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private string hexValue;
    public string HexValue
    {
        get
        {
            return hexValue;
        }
        set
        {
            hexValue = value;
            OnPropertyChanged("HexValue");
        }
    }

} 
```

**十六进制转换器**

```
public class HexStringConverter : IValueConverter
{
    private string lastValidValue;
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string ret = null;

        if (value != null && value is string)
        {
            var valueAsString = (string)value;
            var parts = valueAsString.ToCharArray();
            var formatted = parts.Select((p,i)=>(++i)%2==0 ? String.Concat(p.ToString()," ") : p.ToString());
            ret = String.Join(String.Empty,formatted).Trim();
        }

        return ret;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        object ret = null;
        if (value != null && value is string)
        {
            var valueAsString = ((string)value).Replace(" ",String.Empty).ToUpper();
            ret = lastValidValue = IsHex(valueAsString) ? valueAsString : lastValidValue;                
        }

        return ret;
    }

    private bool IsHex(string text)
    {
        var reg = new System.Text.RegularExpressions.Regex("^[0-9A-Fa-f]*$");
        return reg.IsMatch(text);
    }
} 
```

**文本框行为**

```
public static class TextBoxBehaviour
{
    public static bool GetKeepCursorPosition(DependencyObject obj)
    {
        return (bool)obj.GetValue(KeepCursorPositionProperty);
    }

    public static void SetKeepCursorPosition(DependencyObject obj, bool value)
    {
        obj.SetValue(KeepCursorPositionProperty, value);
    }

    // Using a DependencyProperty as the backing store for KeepCursorPosition.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty KeepCursorPositionProperty =
        DependencyProperty.RegisterAttached("KeepCursorPosition", typeof(bool), typeof(TextBoxBehaviour), new UIPropertyMetadata(false, KeepCursorPosition));

    public static int GetPreviousCaretIndex(DependencyObject obj)
    {
        return (int)obj.GetValue(PreviousCaretIndexProperty);
    }

    public static void SetPreviousCaretIndex(DependencyObject obj, int value)
    {
        obj.SetValue(PreviousCaretIndexProperty, value);
    }

    // Using a DependencyProperty as the backing store for PreviousCaretIndex.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty PreviousCaretIndexProperty =
        DependencyProperty.RegisterAttached("PreviousCaretIndex", typeof(int), typeof(TextBoxBehaviour), new UIPropertyMetadata(0));

    public static string GetPreviousTextValue(DependencyObject obj)
    {
        return (string)obj.GetValue(PreviousTextValueProperty);
    }

    public static void SetPreviousTextValue(DependencyObject obj, string value)
    {
        obj.SetValue(PreviousTextValueProperty, value);
    }

    // Using a DependencyProperty as the backing store for PreviousTextValue.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty PreviousTextValueProperty =
        DependencyProperty.RegisterAttached("PreviousTextValue", typeof(string), typeof(TextBoxBehaviour), new UIPropertyMetadata(null));

    private static void KeepCursorPosition(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var textBox = sender as TextBox;

        if (textBox != null)
        {
            textBox.PreviewKeyDown += new System.Windows.Input.KeyEventHandler(textBox_PreviewKeyDown);
            textBox.TextChanged += new TextChangedEventHandler(textBox_TextChanged);
            textBox.Unloaded += new RoutedEventHandler(textBox_Unloaded);
        }
        else
        {
            throw new ArgumentException("KeepCursorPosition only available for textboxes");
        }
    }

    static void textBox_Unloaded(object sender, RoutedEventArgs e)
    {
        var textBox = sender as TextBox;
        textBox.PreviewKeyDown -= new System.Windows.Input.KeyEventHandler(textBox_PreviewKeyDown);
        textBox.TextChanged -= new TextChangedEventHandler(textBox_TextChanged);
        textBox.Unloaded -= new RoutedEventHandler(textBox_Unloaded);
    }

    static void textBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        //For some reason our e.Changes only ever contains 1 change of 1 character even if our
        //converter converts it to 2 chars with the additional space - hmmm?
        var textBox = sender as TextBox;
        var previousIndex = GetPreviousCaretIndex(textBox);
        var previousText = GetPreviousTextValue(textBox);

        var previousLen = !String.IsNullOrEmpty(previousText) ? previousText.Length : 0;
        var currentLen = textBox.Text.Length;
        var change = (currentLen - previousLen);

        var newCharIndex = Math.Max(1, (previousIndex + change));

        Debug.WriteLine("Text Changed Previous Caret Pos : {0}", previousIndex);
        Debug.WriteLine("Text Changed Change : {0}", change);
        Debug.WriteLine("Text Changed New Caret Pos : {0}", newCharIndex);

        textBox.CaretIndex = Math.Max(newCharIndex, previousIndex);
        SetPreviousCaretIndex(textBox, textBox.CaretIndex);
        SetPreviousTextValue(textBox, textBox.Text);
    }

    static void textBox_PreviewKeyDown(object sender, System.Windows.Input.KeyEventArgs e)
    {
        var textBox = sender as TextBox;
        Debug.WriteLine("Key Preview Caret Pos : {0}", textBox.CaretIndex);
        Debug.WriteLine("------------------------");
        SetPreviousCaretIndex(textBox, textBox.CaretIndex);
        SetPreviousTextValue(textBox, textBox.Text);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:25:36.383

~~尝试使用Extended WPF Toolkit 中的[MaskedTextBox](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox)。~~ 抱歉，我更仔细地查看了`MaskedTextBox`. 十六进制数字没有掩码字符。:(

您应该取消标记答案。
我在 Extended WPF Toolkit 的跟踪器上发布了一个[问题。](http://wpftoolkit.codeplex.com/workitem/18712)

# cakephp - 在 CakePHP 2.2 中更改输入的标签位置

> ID：12619168
> 
> 赞同：2
> 
> 时间：2012-09-27T10:22:36.923
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

CakePHP 通常在输入之前放置标签，所以这样做：

```
echo $this->Form->input('subject'); 
```

我们得到这个：

```
<div class="input text required">
    <label for="TicketSubject">Subject</label>
    <input name="data[Ticket][subject]" maxlength="255" type="text" id="TicketSubject">
</div> 
```

有没有办法在输入之后放置标签以获得这个？

```
<div class="input text required">
    <input name="data[Ticket][subject]" maxlength="255" type="text" id="TicketSubject">
    <label for="TicketSubject">Subject</label>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T11:10:29.420

正确的方法是使用“格式”选项。

```
$this->Form->input('subject', array(
    'format' => array('before', 'input', 'between', 'label', 'after', 'error')
)); 
```

没有人读过[API](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3ainput) :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:49:31.523

你可以试试这个：

```
echo $this->Form->input('subject', array('label' => false, 'after' => $this->Form->label('Subject:'))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T10:50:28.530

你也可以这样做——

```
echo $this->Form->input('subject', array('label' => false, 'after' => '<label for="subject">Subject</label>')); 
```

# tomcat - 在 Grails 中设置嵌入 Tomcat 以遵循符号链接

> ID：12619169
> 
> 赞同：2
> 
> 时间：2012-09-27T10:22:38.553
> 
> 标签：tomcat, grails

这篇文章的简化问题是：

如何在 Grails 中访问 WEB-APP 目录之外的文件？

我有一个 grails 应用程序，它与另一个系统有一些共享资源（图像）。所以我创建了一个指向新文件的符号链接。这些文件是由用户上传的，因此它们被有意放在 web-root 之外。

例如：

```
/images/country_flags/ --> /some/directory/with/images/country_flags/ 
```

所以当tomcat请求图片时：

```
/images/country_flags/flag1.png 
```

它真的是：

```
/some/directory/with/images/country_flags/flag1.png 
```

我知道 Tomcat 默认不支持符号链接，但可以通过在 META-INF 目录中创建一个 context.xml 文件来启用它，其中包含以下信息：

```
<?xml version="1.0" encoding="UTF-8"?>

<Context path="/images" allowLinking="true"></Context> 
```

Grails 允许通过在脚本目录中创建一个名为“_Events.groovy”的新文件来配置 Tomcat。

从互联网上环顾四周，这应该可以解决问题：

```
eventConfigureTomcat = {tomcat ->
    println "Changing the configuration for tomcat"
    println serverContextPath

    def ctx=tomcat.host.findChild(serverContextPath) 
    ctx.allowLinking = true 
    println "Configuration changed"
} 
```

但是，我在控制台中得到以下输出：

```
Changing the configuration for tomcat
/
| Error Exception occurred trigger event [ConfigureTomcat]: Cannot set property 'allowLinking' on null object (Use --stacktrace to see the full trace) 
```

我的application.properties文件如下（注意上下文改为“/”）：

```
#Grails Metadata file
#Wed Sep 26 09:56:39 BST 2012
app.context=/
app.grails.version=2.1.1
app.name=SomeCoolApp
app.version=0.1
plugins.google-visualization=0.5.3
plugins.mail=1.0
plugins.quartz=1.0-RC2
plugins.searchable=0.6.3
plugins.spring-security-core=1.2.7.3 
```

这些方法都不起作用。有人可以向我指出有关如何使用 _Events.groovy 方法配置 Tomcat 的文档。除了尝试打印到控制台之外，还有没有办法解决上下文为空的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:11:54.897

我找到了答案，但我不太明白它为什么会起作用。我将上下文从 serverContextPath （返回 /）更改为 "" 并且它可以工作。

```
eventConfigureTomcat = {tomcat ->
    println "Changing the configuration for tomcat"
    println serverContextPath

    def ctx=tomcat.host.findChild(serverContextPath) // doesn't work?
    def ctx=tomcat.host.findChild("") // works
    ctx.allowLinking = true 
    println "Configuration changed"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T00:38:26.990

这是在 Grails 2.4.x 上对我有用的：

在 BuildConfig.groovy 中：

```
grails.appName = appName; 
```

（不知道如何访问应用程序名称。您也可以以类似的方式添加您的 app.context）然后添加带有此内容的 scripts/_Events.groovy：

```
eventConfigureTomcat = { tomcat ->
    def ctx = tomcat.host.findChild("/${grailsSettings.config.grails.appName}")
    ctx.allowLinking = true
    println "Added symbolic link support for /${grailsSettings.config.grails.appName}"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-21T21:43:32.990

没有一个答案对我很有效，但 Tobia 的评论帮助我正确设置了 ctx 变量。最后，我只需要像这样编辑 scripts/_Events.groovy：

```
eventConfigureTomcat = { tomcat ->
    def ctx = tomcat.host.findChildren()[0] 
    ctx.allowLinking = true
    println "Added symbolic link support for /${grailsSettings.config.grails.appName}"
} 
```

# java - 从 Web 服务列表中隐藏 Restful 服务（Apache CXF）

> ID：12619171
> 
> 赞同：1
> 
> 时间：2012-09-27T10:22:45.873
> 
> 标签：java, web-services, soap, wsdl, cxf

我正在使用 Apache CXF 框架，其中我在 cxf-servlet.xml 中指定了 Restful 以及 Soap Webservice，在部署项目并通过 url 请求服务列表为 htt://SystemIP:8080/WebServicesExample/services / 出现同时包含 SOAP 和 REST 服务的服务列表，有没有办法隐藏列表中列出的 REST 服务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T13:25:48.887

我自己做过......简单的事情是添加一个属性标签

```
 <jaxrs:properties>
             <entry key="org.apache.cxf.endpoint.private" value="true"/>
     </jaxrs:properties> 
```

这也适用于 JAX-WS 服务。这必须添加到 cxf-servlet.xml 文件中

# r - 在 R 中绘制圆圈

> ID：12619174
> 
> 赞同：5
> 
> 时间：2012-09-27T10:23:01.590
> 
> 标签：r, plot, plotrix

我正在使用 plotrix 包来绘制圆圈。

而且我不明白我的代码有什么问题...... :-(

我有三点。第一个点`(1,1)`应该是圆的中心。以下两点`(1,4)`到`(4,1)`中心的距离/半径相同。所以剧情中的圆圈应该是经过这些点的吧？

而且我不知道为什么圆圈看起来不对。有解释吗？

```
 p1 <- c(1,1)
  p2 <- c(4,1)
  p3 <- c(1,4)
  r <- sqrt(sum((p1-p2)^2))

  plot(x=c(p1[1], p2[1], p3[1]),
       y=c(p1[2], p2[2], p3[2]), 
       ylim=c(-5,5), xlim=c(-5,5))
  draw.circle(x=p1[1], y=p1[2], radius=(r))
  abline(v=-5:5, col="#0000FF66")
  abline(h=-5:5, col="#0000FF66") 
```

看看[这里产生的输出](http://i.stack.imgur.com/uiDCP.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T12:20:02.393

正如@Baptiste 上面所说，您可以使用`plot(...,asp=1)`. 但是，这仅在您的 x 和 y 范围恰好相同时才有效（因为它将您的绘图的*物理*纵横比设置为 1）。否则，您可能想使用包中的`eqscplot`功能`MASS`。每当您尝试仔细绘制几何对象时，都会出现类似的问题，例如[绘制不相交的圆](https://stackoverflow.com/questions/4587794/drawing-non-intersecting-circles)

该图是通过在上面的代码中替换`MASS::eqscplot`for生成的：`plot`

![在此处输入图像描述](../Images/f45c5720508087985fa201cbc7f2d510.png)

请注意，根据 R 对您的显示器配置等的详细看法，当您在 R 的图形窗口中绘图时，圆圈可能看起来有点挤压（即使它穿过点）——它对我来说是这样的——但应该在图形输出中看起来不错。

# count - cakephp 2.0 hasmany 关系检索数据

> ID：12619186
> 
> 赞同：0
> 
> 时间：2012-09-27T10:23:28.010
> 
> 标签：count, cakephp-2.0, has-many

我有两个型号名称图像和评论。这里的关系就像图像有很多评论。现在在我的列表页面中，我想显示所有 imae 详细信息，并且只显示对该图像的评论。你能告诉我我应该怎么得到它吗？在我编写查询后，我的返回数据是

```
Array
(

    [0] => Array
        (
            [Image] => Array
                (
                    [image_id] => 57
                    [user_id] => 1
                    [category_id] => 22
                    [image_title] => scroul
                    [description] => beutifull natural image for the animal
                    [keyword] => scrual
                    [image_price] => 
                    [image_name] => 7bf4a72509da5906903c84e88228b9dd.jpg
                    [image_path] => img/uploads/images/original/
                    [image_available_size] => 
                    [like] => 12
                    [size] => 3244
                    [resolution] => 2162 x 1644
                    [i_date] => 1348573022
                    [i_by] => 1
                    [u_date] => 1348573022
                    [u_by] => 1
                    [is_active] => Y
                    [is_deleted] => N
                )

            [Comment] => Array
                (
                    [0] => Array
                        (
                            [comment_id] => 5
                            [image_id] => 57
                            [user_id] => 2
                            [comment] => socute
                            [comment_date] => 1348739230
                            [is_active] => N
                            [is_deleted] => N
                        )

                )

        )

    [1] => Array
        (
            [Image] => Array
                (
                    [image_id] => 56
                    [user_id] => 1
                    [category_id] => 22
                    [image_title] => cute dog
                    [description] => cute dog looking 
                    [keyword] => 
                    [image_price] => 
                    [image_name] => d4af899b0d52cccbec94952a3abd0077.jpg
                    [image_path] => img/uploads/images/original/
                    [image_available_size] => 
                    [like] => 8
                    [size] => 620
                    [resolution] => 2592 x 1944
                    [i_date] => 1348572897
                    [i_by] => 1
                    [u_date] => 1348572897
                    [u_by] => 1
                    [is_active] => Y
                    [is_deleted] => N
                )

            [Comment] => Array
                (
                    [0] => Array
                        (
                            [comment_id] => 3
                            [image_id] => 56
                            [user_id] => 2
                            [comment] => ohhhhhhh
                            [comment_date] => 1348737968
                            [is_active] => N
                            [is_deleted] => N
                        )

                )

        )

    [3] => Array
        (
            [Image] => Array
                (
                    [image_id] => 55
                    [user_id] => 1
                    [category_id] => 22
                    [image_title] => ships
                    [description] => ships with beutiful green background
                    [keyword] => ship,green,animal,nature,background,eating,white ship
                    [image_price] => 
                    [image_name] => c0dfc2432ae047e9160f3ef99880fe87.jpg
                    [image_path] => img/uploads/images/original/
                    [image_available_size] => 
                    [like] => 1
                    [size] => 1831
                    [resolution] => 2520 x 1944
                    [i_date] => 1348572846
                    [i_by] => 1
                    [u_date] => 1348661976
                    [u_by] => 1
                    [is_active] => Y
                    [is_deleted] => N
                )

            [Comment] => Array
                (
                    [0] => Array
                        (
                            [comment_id] => 2
                            [image_id] => 55
                            [user_id] => 2
                            [comment] =>  i like it
                            [comment_date] => 1348737942
                            [is_active] => Y
                            [is_deleted] => N
                        )

                    [1] => Array
                        (
                            [comment_id] => 4
                            [image_id] => 55
                            [user_id] => 2
                            [comment] =>  good scene
                            [comment_date] => 1348738004
                            [is_active] => N
                            [is_deleted] => N
                        )
                )
        )
) 
```

在上面的数组中有该图像的所有注释。我不想要这里的评论列表我只想要没有评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:38:31.677

您能否发布您正在使用的查找语句。您可以从文档中将递归设置为某个级别：

> *   -1 Cake 仅获取组数据，不获取连接。
> *   0 Cake 获取组数据及其域
> *   1 Cake 获取一个组、它的域及其关联的用户
> *   2 Cake 获取一个组、它的域、它的关联用户以及用户的关联文章

因此，如果您只需要来自当前模型的数据，则可以调用以下命令：

```
$this->Model->find('all', array('recursive' => -1)); 
```

还有[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)行为，它允许您在调用时指定要检索的模型数据`find`。

假设您有一个 Post 模型，其中`hasMany`Image. 正确包含 Post 模型中的 Containable 行为的调用将是：

```
$this->Post->find('all', array(
 'conditions' => array('Post.id' => 1),
 'contain' => array('Image')
)); 
```

**编辑：** 由于拼写和格式，我误读了您最初的问题。我以为您希望*“无评论”*出现在数据数组中，而不是只希望出现*“评论数”*。

如果您想要评论计数，请按照 Kishor Kundan 的建议使用[counterCache 。](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#countercache-cache-your-count)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:38:59.683

Cake 提供了另一个神奇的魔法，“counterCache”。

您可以在 Comments 模型中定义 counterCache

```
public $belongsTo = array(
    'className' => 'Image',
    'foreignKey' => <your_foreign_key>,
    ...
    ...
    'counterCache' => true

); 
```

然后在图像表（或模型图像正在使用的表）中添加一个字段“comment_count”，蛋糕将为您完成剩下的工作。

每次添加/删除评论时，这确实会增加开销，但它比每次获取图像数据时发出“计数”要好得多。

有关更多信息，您可以查看[食谱](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#belongsto)。在那里寻找“counterCache”。

**更新：**

要限制计数器缓存的范围，请使用附加属性“counterScope”作为

```
public $belongsTo = array(
    'className' => 'Image',
    'foreignKey' => <your_foreign_key>,
    ...
    ...
    'counterCache' => true,
    'counterScope' => array('Image.active' => 1)

); 
```

# javascript - 迭代器内 Javascript 中的单选按钮验证

> ID：12619187
> 
> 赞同：1
> 
> 时间：2012-09-27T10:23:29.113
> 
> 标签：javascript, jsp, radio-button

我在 jsp 的迭代器中有单选按钮。

我想检查脚本中是否选中了列表中的任何单选按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:33:12.717

有很多方法。

例如，您可以在脚本中有一个布尔变量和一个将其变为真的函数。将此功能与 onclick 属性添加到您的单选按钮。稍后，如果您需要检查是否选择了任何填充的单选按钮，您只需检查您的布尔值是否为真。

或者简单地使用 JQuery 的可能性：

这是一个函数，如果在页面上的任何位置至少选择了一个单选按钮，则该函数将返回 true。

```
function atLeastOneRadio() {
    return ($$('input[type=radio]:checked').size() > 0);
} 
```

您可以通过单选按钮的名称以相同的方式检查：

```
$('input[name=your_radiobuttons_common_name]:checked').length > 0) 
```

# sql - SUM 字段不求和

> ID：12619188
> 
> 赞同：1
> 
> 时间：2012-09-27T10:23:33.710
> 
> 标签：sql, database, tsql, plsql

类似于我的上一个问题。这是我的代码：

```
 SELECT TR.ITEMNO,
      SUM ( TR.TRANS_QUAN * CASE TR.TRANS_TYPE WHEN 'PO' THEN 1 ELSE 0 END ) AS SUM_IN,
      SUM ( TR.TRANS_QUAN * CASE TR.TRANS_TYPE WHEN 'MH' THEN 1 ELSE 0 END ) AS SUM_OUT
  FROM IQMS.TRANSLOG TR
  WHERE TR.ITEMNO = '200672'
  GROUP BY TR.ITEMNO
  HAVING SUM ( TR.TRANS_QUAN * CASE TR.TRANS_TYPE WHEN 'PO' THEN 1 ELSE -1 END ) < 0
  ORDER BY TR.ITEMNO 
```

代码运行良好，但没有对 SUM_OUT 求和。我知道一个事实，但是有一些数字需要相加。我有什么明显的遗漏吗？提前致谢！！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:46:31.043

尝试...

```
SUM (TR.TRANS_QUAN * CASE TR.TRANS_TYPE WHEN 'PO' THEN 1 ELSE 0 END ) 
OVER(PARTITION BY TR.ITEMNO)  AS SUM_IN,

SUM ( TR.TRANS_QUAN * CASE TR.TRANS_TYPE WHEN 'MH' THEN 1 ELSE 0 END )
OVER(PARTITION BY TR.ITEMNO)  AS SUM_OUT, 
```

# sql - 防止在数据库和 vb.net 中的 datagridview 中插入重复值

> ID：12619189
> 
> 赞同：0
> 
> 时间：2012-09-27T10:23:34.280
> 
> 标签：sql, vb.net, validation

我想防止使用以下代码在数据库中输入重复滚动，但这没有帮助，并且还建议如何在 gridview 中防止这种情况。

```
 If txtRollNo.Text.Trim = "" Then
        ErrorProvider1.SetError(txtRollNo, "Roll Number is required")
        Errorcheck = False
      ElseIf varDuplicate = True Then
        MessageBox.Show("Duplicate values are not allowed")
      Else
       ErrorProvider1.SetError(txtRollNo, "")
  End If

    Private Function Duplicate() As Boolean
        Duplicate = True
        duplicatedata = "Select Count(RollNo) from KaiyumVbStudent where RollNO = &txtRollNo.Text.Trim"
        con = New SqlConnection(constring)
        cmd = New SqlCommand(duplicatedata, con)
        con.Open()
        Dim mcount As Integer = cmd.ExecuteScalar
        If mcount > 0 Then
            Duplicate = True
        Else
            Duplicate = False
        End If
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:26:48.000

更好的做法是`RollNO`在数据库中的列上添加一个 UNIQUE INDEX 并捕获异常并在重复值的情况下处理该异常。

**编辑**你没有提到你的数据库供应商所以这里是如何在 SQL SERVER [http://msdn.microsoft.com/en-us/library/ms187019.aspx中创建唯一索引](http://msdn.microsoft.com/en-us/library/ms187019.aspx)

这是标准 SQL

```
CREATE UNIQUE INDEX index_name ON table_name (column_name) 
```

**EDIT 2**除了 UNIQUE INDEX，也许还应该提到 UNIQUE CONSTRAINT [http://www.w3schools.com/sql/sql_unique.asp](http://www.w3schools.com/sql/sql_unique.asp)。为了确保我不会混淆 OP，UNIQUE INDEX 和 UNIQUE CONSTRAINT 基本相同，它们达到相同的目标，它们的性能是相同的；从技术上讲，唯一约束背后有唯一索引。

```
ALTER TABLE table_name ADD CONSTRAINT constraint_name UNIQUE (column_name) 
```

# c# - 即时更改内容主机名

> ID：12619193
> 
> 赞同：0
> 
> 时间：2012-09-27T10:23:55.943
> 
> 标签：c#, .net, cdn, static-content

我尝试实现的是设置一种从不同主机加载静态内容的方法。

说我有一个页面。它上面有一个样式表、一个 js 文件和一个图像。它们都有一个以 开头的参考`/`。

有没有办法，比如在 global.asax 文件中，当页面被流式传输给用户时，找到所有`href`并`src`更改它们加载的主机。所以所有的图片都来自`image.domain.com`.js `js.domain.com`。明白了吗？

我努力了：

[这](http://omaralzabir.com/loading_static_content_in_asp_net_pages_from_different_domain_for_faster_parallel_download/)- ajax 控制工具包有各种各样的问题。我确实喜欢这背后的想法，但重新使用流方法来保持快速......

和

RequestReduce 在[这里](http://requestreduce.org/)找到——据我所知，它只支持一个不同的主机来处理所有的静态内容。

我不想要的是去每个并手动设置它。我只想要一个设置，在 web 配置中或某处，它包含它应该附加到给定文件扩展名前面的值。即维护更容易...

这样的事情可能吗？

在此先感谢，干杯罗宾

Ps：我很清楚 3+ 子主机等的成本 re dns 查找。为了争论，我不关心这个的额外成本......

编辑在更技术方面，是否可以通过网络服务器上的 apache 中的匹配测试来做到这一点。就像请求是 js 我 gzip 一样，所以我想知道，我不能添加一个指令来说 301 到一个新的地方吗？我会想象在重定向方面的“成本”会使其有点愚蠢......我想只是大声思考......

# c++ - 如何在 Win32 中从另一个对话框函数显示对话框函数？

> ID：12619196
> 
> 赞同：0
> 
> 时间：2012-09-27T10:24:09.717
> 
> 标签：c++, c, windows

我在win32中创建了一个对话框。该对话框有一些文本和一个按钮。

如果我按下按钮，我想显示另一个对话框，它有 2 个文本框。我已经使用了 Dialogboxparam 函数。但是当我尝试获取第二个对话框文本值时，我遇到了“找不到 Control_id”错误的问题。

所以我将使用 DialogboxindirectParam 函数，但它不能调用对话框。
这是我的代码：

这是我的对话功能：

```
int CALLBACK SecurityOptionsDialog::PasswordDlg(HWND hDlg,UINT msg,WPARAM  wp, LPARAM lParam)   
{  

} 
```

调用对话框函数：

```
case c:

DialogBoxIndirectParamA(hInst,(LPDLGTEMPLATE)(MAKEINTRESOURCE(IDD_PWD)),_hwnd,PasswordDlg,lparam);

break; 
```

# matlab - MATLAB GUI 中的一个接一个屏幕

> ID：12619200
> 
> 赞同：0
> 
> 时间：2012-09-27T10:24:21.590
> 
> 标签：matlab, user-interface

我正在解决这个使用 Matlab项目[构建基于 Web 的工具的问题。](https://stackoverflow.com/questions/12563201/constructing-a-web-based-tool-using-matlab#comment16923662_12563201)

在这方面，我需要我的 GUI 无缝地从一个屏幕转到另一个屏幕，例如欢迎屏幕到包含菜单的屏幕。我可以从另一个无花果中调用一个无花果，但这会弹出另一个窗口。我需要它在一个窗口中。每个屏幕中的背景图像将重新发送相同的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:43:35.510

创建您需要的小部件并使用它们的“可见”属性：

```
>> a = uicontrol('Style','edit','String','hello','visible', 'off');
>> set(a, 'visible', 'on') 
```

您还可以将它们分组为 uipanels

```
hp = uipanel('Title','Main Panel','FontSize',12,...
            'BackgroundColor','white',...
            'Position',[.25 .1 .67 .67], 'visible', 'off');
a = uicontrol('Style','edit','String','hello','parent', hp);
set(hp, 'visible', 'on') 
```

# bigdata - 如何保持地理坐标

> ID：12619205
> 
> 赞同：1
> 
> 时间：2012-09-27T10:24:34.867
> 
> 标签：bigdata

我正在制作一个从 GPS 手机记录地理坐标的应用程序。稍后使用这些地理坐标，我将在地图中显示路线。

保留此信息的最佳方法是什么？你推荐哪个数据库？

我问这个问题是因为对于大型旅行，地理坐标会记录很多，并且会影响性​​能。

任何帮助将不胜感激。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:31:22.817

如果您想要其他具有坐标的事物，则可能只需要一个数据库。有几种可用的解决方案：

*   带有[PostGIS的](http://postgis.refractions.net/)[Postgresql](http://www.postgresql.org)（开源）
*   [Oracle](http://www.oracle.com/us/products/database/overview/index.html)与[Oracle Spatial](http://www.oracle.com/us/products/database/options/spatial/overview/index.html?origref=http://www.oracle.com/us/products/database/overview/index.html)
*   带有空间扩展的 Microsoft SQL Server
*   [SQLite（空间）](https://www.gaia-gis.it/fossil/libspatialite/index)

您可以将它们与输出系统结合起来，例如

*   [地理服务器](http://geoserver.org/display/GEOS/Welcome)
*   [地图服务器](http://mapserver.org/)
*   [ArcGIS Online](http://www.esri.de/products/arcgis/arcgisonline/index.html)
*   [地理信息系统](http://www.qgis.org/)
*   ...

显示您的路线。

# c++ - CLOB 不包含任何数据

> ID：12619209
> 
> 赞同：0
> 
> 时间：2012-09-27T10:24:48.557
> 
> 标签：c++, oracle, stored-procedures, oracle11g

从存储过程中我想输出 a `CLOB`，因为 a`varchar2`不够长（即使我在这个例子中只使用 255 个字符）。

我找到了一些 oracle 示例并尝试将它们与我的代码一起使用。但遗憾的是，我的`CLOB`. 我怎样才能正确写入`CLOB`？

下面是 C++ 代码的样子：

```
extern "C" DLLEXPORT 
void version(OCIExtProcContext* context, OCILobLocator **out, sb4 *ind_out){
    OCIEnv* envh;
    OCISvcCtx* svch;
    OCIError* errh;
    OCIExtProcGetEnv (context, &envh, &svch, &errh);

    std::string versioninfo;
    versioninfo = "103";

    oraub8 written = 10;

    OCIDescriptorAlloc(envh, 
                       (dvoid **) out,
                       (ub4) OCI_DTYPE_LOB,       /* Type of Descriptor */
                       (size_t) 0, 
                       (dvoid **) 0);
    OCILobTrim2(svch, 
               errh, 
               *out,
               (ub4)1);

    OCILobWrite2(/*svcctx*/svch, /*errh*/errh, /*ociloblocator*/*out,
                 /*byte_amtp*/NULL, /*char_amtp*/NULL, /*offset*/1,
                 /*bufp*/(void*)versioninfo.c_str(), /*buflen*/versioninfo.size(),
                 /*piece*/OCI_ONE_PIECE, /*context for callback*/NULL,
                 /*callback*/NULL, /*csid*/0, /*csfrm*/SQLCS_IMPLICIT);
    *ind_out = 0;
    return;
} 
```

SP注册如下：

```
create or replace
procedure version(versioninfo OUT clob) as
    external name "version" library myLib language c with context 
    parameters (context, versioninfo, versioninfo INDICATOR SB4); 
```

我这样称呼SP：

```
declare
  res clob;
  begin
  --dbms_lob.createtemporary(res,true);
  version(res);
  dbms_output.put_line(dbms_lob.substr(res, 255, 0));
end; 
```

如您所见，我也尝试`CLOB`在调用 SP 之前分配 ，但这并没有太大帮助。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:55:08.773

`OCILobCreateTemporary`在使用该 CLOB 之前通过使用解决它。

```
 OCIDescriptorAlloc(envh, 
                       (dvoid **) out,
                       (ub4) OCI_DTYPE_LOB,       /* Type of Descriptor */
                       (size_t) 0, 
                       (dvoid **) 0);
    OCILobCreateTemporary(svch, errh, *out, 0, SQLCS_IMPLICIT, OCI_TEMP_CLOB, OCI_ATTR_NOCACHE, OCI_DURATION_CALL);
    ub4 amt = static_cast<ub4>(result.size());
    OCILobTrim2(svch, 
                errh, 
                *out,
                (ub4)amt);

    oraub8 amtp = static_cast<oraub8>(result.size());
    OCILobWrite2(/*svcctx*/svch, /*errh*/errh, /*ociloblocator*/*out,
                 /*byte_amtp*/NULL, /*char_amtp*/&amtp, /*offset*/1,
                 /*bufp*/reinterpret_cast<dvoid*>(const_cast<char*>(result.c_str())), /*buflen*/amt,
                 /*piece*/OCI_ONE_PIECE, /*context for callback*/NULL,
                 /*callback*/NULL, /*csid*/0, /*csfrm*/SQLCS_IMPLICIT);
    *ind = 0; 
```

# ios - 适用于 iOS 的自制点击手势识别器

> ID：12619210
> 
> 赞同：1
> 
> 时间：2012-09-27T10:24:52.763
> 
> 标签：ios, uigesturerecognizer, gesture, touches

我想编写自己的点击手势识别器，以检测点击次数和触摸次数（我不想使用 iOS 点击手势识别器，因为我想稍后以各种其他方式扩展它）；

我尝试了以下方法：使用第一次`motionBegin`触摸作为`numberOfTouches`点击，增加`numberOfTaps`，并启动点击检测计时器以检测点击手势，如果一段时间内没有看到新的点击

问题是人们很快就会意识到，在执行双击手势时，iOS 要么正确地检测到一个`motionBegin`双击事件，要么检测到两个快速的一键事件。我想一个正确的实现应该尝试检测那些紧密发生的快速一键式事件，但我想知道是否有更好的方法来实现手势识别器。

有人知道 iOS 点击手势是如何实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-15T07:34:36.437

```
1\. Add UIGestureRecognizerDelegate in your .h file. like
@interface finalScreenViewController : UIViewController <UIGestureRecognizerDelegate>
{
// do your stuff
}

2\. Create a view in your viewDidLoad method (or any other method) you wanna to add the gesture in your .m file
ex 

UIView * myView=[[UIView alloc]init];
myView.frame=CGRectMake(0,0.self.view.frame.size.width,self.view.frame.size.height);
[self.view addSubView: myView];

UITapGestureRecognizer *letterTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapMethod:)];
        letterTapRecognizer.numberOfTapsRequired = 1;
        [myView addGestureRecognizer:letterTapRecognizer];

3\. you can get view by

- (void) tapMethod:(UITapGestureRecognizer*)sender {
     UIView *view = sender.view; 
     NSLog(@"%d", view.tag);//By tag, you can find out where you had tapped. 
} 
```

# javascript - 如何在threejs中为相机添加datgui控件？

> ID：12619211
> 
> 赞同：5
> 
> 时间：2012-09-27T10:24:51.883
> 
> 标签：javascript, three.js, dat.gui

我想在此页面的基本threejs示例中为threejs相机启用dat-gui控件：

[https://github.com/mrdoob/three.js/](https://github.com/mrdoob/three.js/)

```
var camera, scene, renderer;
var geometry, material, mesh;

init();
animate();

function init() {

    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.position.z = 1000;

    scene = new THREE.Scene();

    geometry = new THREE.CubeGeometry( 200, 200, 200 );
    material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );

    mesh = new THREE.Mesh( geometry, material );
    scene.add( mesh );

    renderer = new THREE.CanvasRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );

    document.body.appendChild( renderer.domElement );

}

function animate() {

    // note: three.js includes requestAnimationFrame shim
    requestAnimationFrame( animate );

    mesh.rotation.x += 0.01;
    mesh.rotation.y += 0.02;

    renderer.render( scene, camera );

} 
```

我试过以下代码：

```
var params = {
    z: 100
}

var gui = new dat.GUI();

gui.add(params, 'z', -500,500).step(5).onChange(function(value){
        changeCameraZ(value);
    });
function changeCameraZ(value){
    camera.position.z = value;
} 
```

这可行，但这意味着我必须编写一个新函数： `changeBlah();`

对于我希望从 GUI 更改的每个 three.js 变量。有没有更好、更清洁的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T13:09:05.750

您还可以利用 DAT.gui 如何使用引用。

```
gui.add( camera.position , 'z', -500, 500 ).step(5) 
```

和一个例子

[http://jsfiddle.net/2WKqL/2/](http://jsfiddle.net/2WKqL/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T11:37:52.540

这个单线应该工作。

```
gui.add( params, 'z', -500, 500 ).step(5).onChange( function( value ){ camera.position.z = value; } ); 
```

# javascript - Jquery，Codeigniter 2.1 - 分页问题

> ID：12619213
> 
> 赞同：2
> 
> 时间：2012-09-27T10:25:01.037
> 
> 标签：javascript, jquery, codeigniter

我正在使用 Codeigniter 创建分页，并且我想添加 ajax 功能。第一次单击分页链接时，JS 正在工作。当它第二次被点击时，JS 不起作用并且分页正在通过 PHP 控制器工作（这部分工作没有任何问题）。这是JS代码：

```
var pag = $('#pagination a');

    pag.on('click', function(e){
        var pagination =
            {
            target : $(this).attr('href') + ' .mali_oglasi',    
            content : $('.mali_oglasi'),
            container: $('.mali_oglasi_wrapper')
            };

            pagination.content.animate({'opacity':0, scrollTop: 0}, 400, function(){
                pagination.container.load(pagination.target, function(){
                    pagination.content.animate({'opacity':1}, 400);
                });                
            });            
        e.preventDefault(); 
    }); 
```

**scrollTop**也不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:28:04.490

这可能是因为您的 DOM 每次都被操纵，因此 click 事件的处理程序丢失了。

试试这种方式：

```
$('body').on('click', '#pagination a', function(e) {
    var pagination =
    {
        target : $(this).attr('href') + ' .mali_oglasi',    
        content : $('.mali_oglasi'),
        container: $('.mali_oglasi_wrapper')
    };

    pagination.content.animate({
        'opacity':0, 
        scrollTop: 0
    }, 400, function(){
        pagination.container.load(pagination.target, function(){
            pagination.content.animate({
                'opacity':1
            }, 400);
        });                
    });            
    e.preventDefault(); 
}); 
```

这将确保在每个 DOM 操作上重新绑定 click 事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:31:08.860

试试这个兄弟。。

也许该元素尚未加载...

> var pag = $('#pagination a');
> 
> ```
> pag.on('click', 'a', function(e){
>     var pagination =
>         {
>         target : $(this).attr('href') + ' .mali_oglasi',    
>         content : $('.mali_oglasi'),
>         container: $('.mali_oglasi_wrapper')
>         };
> 
>         pagination.content.animate({'opacity':0, scrollTop: 0}, 400, function(){
>             pagination.container.load(pagination.target, function(){
>                 pagination.content.animate({'opacity':1}, 400);
>             });                
>         });            
>     e.preventDefault(); 
> }); 
> ```

# c++ - 请求关于 dll 编程的好教程

> ID：12619214
> 
> 赞同：15
> 
> 时间：2012-09-27T10:25:01.443
> 
> 标签：c++, dll, resources

在过去，我一直在尝试为一些应用程序创建插件。这些总是 dll 文件，我已经按照各种应用程序的 SDK 文档中的说明进行操作，但我从来没有*真正*理解我在做什么。为了解决这个问题，我试图找到更多处理 C++ 编程的一些实际方面的任何资源，包括处理 dll，我脑海中的一个列表是：

*   dll 文件，它们的用途是什么，为什么？
*   为什么在库上使用 dll 文件？
*   那个 .def 文件是关于什么的，它是微软独有的吗？
*   清单文件有什么用？
*   ...

基本上，所有可以在 IDE 中看到的可爱选项（对我来说是 Visual Studio 和 XCxcode）——人们如何了解它们是什么以及如何将它们与比编写“hello world”应用程序稍微复杂的代码结合使用? 我想我正在寻找更多关于编程的“架构视图”。到目前为止，我在所有 C++ 书籍中发现的最多的是总有一节， `source code > object code > linked w/ other obj code > executable` 但仅此而已。

那么，对于像我这样想学习更多 C++ 语法的人来说，有什么好书吗？我了解代码，了解面向对象，了解 STL。下一步我需要一本好书或资源。

谢谢！（对不起，如果这是一个模糊的问题，但它已经到了这个）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T10:49:33.037

**dll 文件，它们的用途是什么，为什么？**

dll 文件与 Microsoft Windows 上的 .exe 文件相同（除了标题中的 1 位表示它是 DLL）。任何使用它的程序都可以共享 dll 内存，从而节省内存。可以根据需要从 RAM 加载和卸载 Dll，从而节省内存。它们也可以单独更新，无需*重新编译*.exe（您可能没有可用的源代码。）

**为什么在库上使用 dll 文件？**

libs，也称为*静态库*，每次进行更改时都需要**重新编译exe，而 Dlls 则不需要。**如果多个进程使用Dll可以**节省内存**，并且可以从一个集中位置为所有程序更新。对于库，您必须单独重新编译和替换每个 .exe。Dll 是必须包含在 exe 中的额外文件，因此**dll 可能不利于 Internet 分发**。

**那个 .def 文件是关于什么的，它是微软独有的吗？**

.def 是编译器特定的文件，它告诉编译器 dll（API）应如何在内存中布局。它们可以在包括 gcc 在内的许多不同编译器中找到，尽管支持的功能和语法有所不同。

**清单文件有什么用？**

清单是 Windows XP SP3 的新功能，基本上它告诉 Windows 它需要哪些版本的系统库，以及二进制文件是否需要管理员权限才能运行。（请记住，dll 只是一个 exe，但有一点不同）。我相信 manfest 也用于代码签名，验证可执行文件是否合法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T10:46:30.747

CodeProject 上有一篇关于 C++ 中的 DLL 编程的*优秀* [文章。](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-25T07:48:29.797

我真的很喜欢 CodeGuru 上的这个：http: [//www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c9855/DLL-Tutorial-For-Beginners.htm](http://www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c9855/DLL-Tutorial-For-Beginners.htm)

它适用于初学者，但它确实帮助了我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T10:37:48.000

我可以向您推荐以下参考资料。看看它们对你有没有用。

1.  [C++ DLL 编程](http://msdn.microsoft.com/en-us/library/ms235636%28v=vs.110%29.aspx)
2.  [组件](http://msdn.microsoft.com/en-us/library/hk5f40ct%28v=vs.71%29.aspx)

# python - 在 Python pandas 中将 DataFrame 添加到面板

> ID：12619215
> 
> 赞同：4
> 
> 时间：2012-09-27T10:25:01.873
> 
> 标签：python, pandas, dataframe

我想用不同的数据框创建面板，我尝试编写一个函数来返回这个面板。我使用了一些已经编写好的函数`createNewDf(i)`，它根据给定的数值从现有数据中返回 dataFrame。

```
def panelCreation():
    dp1 = Panel({})
    for i in range(1,3):
        name = 'X' + str(i)
        name = createNewDf(i)
    dp1.update(name)       # This does not work
    return dp1 
```

我找不到要代替的方法的名称`dp1.update(name)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T10:47:00.467

仅从 DataFrame 的字典中创建 Panel 怎么样？

```
In [10]: dd = {}

In [11]: for i in range(1, 3):
   ....:     name = 'X' + str(i)
   ....:     dd[name] = DataFrame(np.random.randn(3,3))
   ....:     

In [12]: Panel(dd)
Out[12]: 
<class 'pandas.core.panel.Panel'>
Dimensions: 2 (items) x 3 (major) x 3 (minor)
Items: X1 to X2
Major axis: 0 to 2
Minor axis: 0 to 2 
```

所以像：

```
def panelCreation():
    dd = {}
    for i in range(1,3):
        name = 'X' + str(i)
        dd[name] = createNewDf(i)
    return Panel(dd) 
```

# java - ajax 按钮的 WebElement.click() 之后如何避免 StaleElementException？

> ID：12619219
> 
> 赞同：0
> 
> 时间：2012-09-27T10:25:14.653
> 
> 标签：java, selenium, junit, selenium-chromedriver

我有一个页面，它有一个带有一个输入字段和一个提交按钮的小表单。**提交按钮是 AJAX！**当我单击它时，它会将输入值提交给服务器，服务器要么将其验证为可接受并加载新页面，要么发现问题并添加反馈错误标签。

我编写了以下硒代码来测试此功能：

```
WebDriverWait waiter = new WebDriverWait(driver, 20);
WebElement inputField = waiter.until(ExpectedConditions.presenceOfElementLocated(By.id("inputField")));
inputField.sendKeys("Test input");

WebElement submitInput = waiter.until(ExpectedConditions.presenceOfElementLocated(By.id("submitInput")));
submitInput.click();

WebElement feedback = waiter.until(ExpectedConditions.presenceOfElementLocated(By.id("feedback")));
Assert.assertTrue("Feedback not was not empty, but was: " + feedback.getText(), feedback.getText().isEmpty()); 
```

问题是，`submitInput.click()`如果通过事件加载新页面，则会立即完成并返回：[selenium docs](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)，因此通过“反馈”进行检索的调用工作正常，我可以通过调试看到它正确获取了元素，但是`StaleElementException`当我打电话时我得到了一个`feedback.getText()`，因为页面已经在后台刷新了。

我怎样才能让测试通过而没有：

1.  添加 Thread.sleep()。
2.  添加一个`StaleElementException`捕获以重新获取元素。

*注意*：上述测试在输入无效时有效，因为页面未刷新，但在输入有效时无效。

任何帮助将非常感激。

**编辑：请注意，在元素出现之前轮询页面不是问题，而是检测是否`submitInput.click()`加载新页面或将文本添加到现有标签的问题。**

**编辑 2：为了说明问题，我编译了一个时间记录的贯穿测试和服务器日志：**

```
16:34:48,589 - TEST   - Navigating to page.
16:34:48,605 - SERVER - Page request started.
16:34:48,631 - SERVER - Page request ended.
16:34:49,050 - TEST   - Typing test input.
16:34:49,456 - TEST   - Clicking button.
16:34:49,519 - SERVER - Received click event.
16:34:49,529 - SERVER - Responding with redirect.
16:34:49,556 - TEST   - Finding feedback by id.
16:34:49,560 - SERVER - Page request started.
16:34:49,581 - SERVER - Page request ended.
16:34:49,775 - TEST   - Test threw exception. 
```

您可以看到服务器在测试发送后仅半秒多一点就收到了点击事件。它立即响应（在这种情况下）重定向命令。[由于单击是 AJAX 事件，因此根据文档在后台继续进行](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)测试，这导致（如您所见）测试在服务器收到新页面请求之前 0.004 秒检索反馈。在`feedback.getText()`解析并发送到 ChromeDriver 时，服务器已经响应了一个新页面，因此该函数返回过时异常。

关键是我可以使用 修复这个问题`Thread.sleep(1000)`，但这远非理想；首先是因为在某些情况下，服务器解析 AJAX 并返回结果的时间可能超过半秒，这使得测试具有不确定性，其次因为这些时间很快就会堆积起来并浪费时间，通常是不必要的，当只有一个需要几毫秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:12:23.830

我实际上会采取其他方式来解决这个问题。我会使用一些 js 来克服 `StaleElementException`+++ fluent wait +++ css 选择器而不是 xpaths。1）**流利的等待**方法。它返回您实际的（定位的）网络元素：

```
public WebElement fluentWait(final By locator){
    Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
            .withTimeout(30, TimeUnit.SECONDS)
            .pollingEvery(5, TimeUnit.SECONDS)
            .ignoring(NoSuchElementException.class);

    WebElement foo = wait.until(
        new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                return driver.findElement(locator);
            }
        }
    );
    return  foo;
}; 
```

关于流利的等待你可以到达[这里](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html) 和[这里](http://www.jarvana.com/jarvana/view/org/seleniumhq/selenium/selenium-support/2.9.0/selenium-support-2.9.0-sources.jar!/org/openqa/selenium/support/ui/FluentWait.java?format=ok)

2) 字符串 cssSelectorInputField = "[id='inputField']" 字符串 cssSelectorSubmitInput = "[id='submitInput']" 字符串 cssSelectorFeedback = "[id='feedback']"

3）现在我提供了一些 jsMethods 模板（我用于我的自动化，prolly 可能对你有用）

```
public String jsGetText(String cssSelector){

  JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var x = $(\""+cssSelector+"\");");
        stringBuilder.append("return x.text().toString();")       ;

       String res= (String) js.executeScript(stringBuilder.toString());
return res;
}

public String jsGetColor(String css){

        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;

    }

public void jsClickOnElement(String css){

JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+css+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString());

} 
```

4）所以最后的步骤是这样的：

```
driver.findElement(By.cssSelector(cssSelectorInputField)).sendKeys("Test input");
driver.findElement(By.cssSelector(cssSelectorSubmitInput)).click();
//or jsClickOnElement(cssSelectorSubmitInput);
WebElement feedBack =fluentWait(cssSelectorFeedback);
String textForVerifying=feedBack.getText().trim();
//or String textForVerifying= jsGetText(cssSelectorFeedback);
Assert.assertTrue(textForVerifying.equals("..blablablab...")); 
```

希望这对你有用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:31:06.377

不要忘记这样的方法

```
input.findElements(By.xpath("//xpath")).size() > 0

driver.findElement(By.xpath("//xpath")).isDisplayed()

public bool IsElementPresent(By selector)
{
    return driver.FindElements(selector).Any();
} 
```

用于验证页面上的元素存在。它们也很有帮助。但请注意您找到的定位器（在萤火虫中验证您正确定位的所有元素）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:37:03.737

对于遇到类似问题的任何人（这是两个不同的问题，1 - 检测 AJAX 控制的页面更改，以及 2 - 检测 AJAX 控制的元素更改），我最终的解决方案是

第1步：创建几个函数来通过jQuery跟踪页面更改（所有页面都使用jQuery，因此脚本执行良好）：

```
private void updateLastChange()
{
    driver.executeScript("$('html').data('CHANGED_PAGE', false)");
}

public boolean pageChanged()
{
    Object script = driver.executeScript("return $('html').data('CHANGED_PAGE');");
    Boolean changed = (Boolean)script;
    if(changed == null)
    {
        updateLastChange();
        return true;
    }
    return false;
} 
```

然后我可以简单地调用`pageChanged()`以检测页面更改。

第 2 步：创建一个实现`ExpectedCondition<Boolean>`.

使用上面的示例，问题在于反馈何时准备就绪是不确定的，我将问题中代码的底部两行更改为：

```
WebDriverWait waiter = new WebDriverWait(driver, 5, 200);
waiter.ignoring(AssertionFailedError.class);
waiter.ignoring(StaleElementReferenceException.class);
waiter.until(new ExpectedCondition<Boolean>()
{
    public Boolean apply(WebDriver input)
    {
        WebElement feedback = input.findElement(By.id("feedback"));
        Assert.assertTrue("Feedback not was not empty, but was: " + feedback.getText(), feedback.getText().isEmpty());            
        return true;
    }
}); 
```

这样，它每 200 毫秒轮询一次页面，持续 5 秒，忽略断言异常和过时元素异常。它通过的唯一方法`return true;`是在 5 秒用完之前到达线路。我目前正在考虑如何使它更整洁，但它工作得很好，比简单地睡觉更快，并且由于轮询而提前（如果可能）成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T02:44:53.683

我不确定如何在 Java 中做到这一点，也不确定我是否正确理解了这个场景，但我会尝试一下。顺便说一句，它在Ruby中......

```
 @wait.until { @driver.find_element(:id,"feedback") }
 assert "true","Feedback was not empty but was #{@driver.find_element(:id,\"feedback\").text}" 
```

我基本上想要做的不是使用在断言上方的行中找到/存在的网络元素“反馈”。相反，我让 webdriver 再次找到该元素，然后对其执行一些操作（获取文本）。

**编辑**

* * *

```
@wait.until { alert_text = @driver.find_element(:id,"feedback").text }
assert_match "expected text","#{alert_text}","Feedback is not empty and expected" 
```

# python - Python - 我从哪里开始？

> ID：12619220
> 
> 赞同：0
> 
> 时间：2012-09-27T10:25:24.807
> 
> 标签：python, programming-languages

我对 C/C++ 很满意，但我觉得另一种语言肯定会帮助我。因此，我认为 Python 会是很好的入门语言，因为我听到很多人谈论 Python。我有以下问题：

*   我从哪里开始使用 Python ？
*   我有像 Visual Studio for Python 这样的编译器吗？我将 VS2010 用于 C/C++

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:26:46.450

像大多数语言一样，阅读一本书可能会有所帮助

[lpthw](http://learnpythonthehardway.org/)

是学习python的推荐书。它将指导您完成设置等:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:55:15.837

我认为互联网上有很多 python 信息，如果你是 C++ 程序员并且已经有编程知识，你可以在那里搜索信息。虽然您可以安装解释器并开始玩arround，但根据我的经验，这是一种相当简单的学习方式（解释器+文档）

一些有趣的网页：

[http://www.python.org/](http://www.python.org/)

[http://docs.python.org/py3k/tutorial/index.html](http://docs.python.org/py3k/tutorial/index.html)

一些 IDE 作为视觉工作室，但用于 python：

[http://wingware.com/](http://wingware.com/)

[http://www.eclipse.org/](http://www.eclipse.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:29:20.330

[Dive into python](http://www.diveintopython.net/)是一个很棒的选择，如果你已经熟悉编程，它会让你快速上手。通过在每一章中构建小而有用的项目来学习。

[Python 网站](http://python.org/)提供了 Python 解释器。可以使用。Python 不像 c/c++ 那样编译，而是解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:12:46.073

不久前，我写了一篇博客文章来解决您问题的第一部分：

[http://codelike.com/blog/2011/07/07/a-jump-start-for-learning-python/](http://codelike.com/blog/2011/07/07/a-jump-start-for-learning-python/)

至于第二部分：不，您不需要编译器。代码是即时解释的，这意味着您可以在 Python shell（Python 安装附带）中键入代码并立即查看它的作用。这是探索某些语言特性的好方法。如果您在 Python 之上安装[iPython](http://ipython.org/)，您甚至可以在该 shell 中获得自动完成功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:34:28.093

这取决于您喜欢哪种学习方式。我建议阅读理论，玩一点，并使用 python 写一些有用的东西。

以下是您选择的几点开始。

理论：

*   [官方教程](http://docs.python.org/tutorial/index.html)
*   [深入研究 Python 书籍（适用于 Python 2）](http://www.diveintopython.net)
*   [深入了解 Python 3](http://getpython3.com/diveintopython3)
*   Zen A. Shaw[的《艰难地学习 Python》](http://learnpythonthehardway.org)
*   学习 Python： Mark Lutz[的强大的面向对象编程](https://rads.stackoverflow.com/amzn/click/com/0596158068)
*   Mark Lutz 的[Python 编程](https://rads.stackoverflow.com/amzn/click/com/0596158106)
*   艾伦·B·唐尼 (Allen B. Downey) 的[Think Python](http://greenteapress.com/thinkpython/thinkpython.html)

课程和视频：

*   [谷歌的 Python 类](http://code.google.com/edu/languages/google-python-class/introduction.html)
*   [Codeacademy 的 Python 课程](http://www.codecademy.com/tracks/python)
*   [Coursera 的](https://www.coursera.org/course/interactivepython)Python 交互编程简介

游乐场：

*   [checkio.org](http://www.checkio.org/) - python 编程竞争平台，从简单到困难的许多任务
*   [pythonchallenge.com](http://pythonchallenge.com)

如果您是编程新手，我建议您阅读官方教程并开始使用在线教程，这些教程将指导您从简单的“hello world”程序到更复杂的程序。然后阅读 Dive Into Python 并深入了解。

关于 IDE，有多种选择，您可以尝试它们以找到最适合您目标的选择。

*   IDE：PyCharm、Eclipse + PyDev、Wing IDE。
*   只是编辑器：vim 或 sublime 或 notepad++，我已经使用了所有这些并停止了 sublime。
*   交互式解释器：ipython - 可以选择将其作为控制台或本地服务器上的笔记本运行。这是很棒的工具和真正的交互式编程体验。先看一些教程。有几个非常强大的东西，如 matplotlib、numpy、scipy 支持，使这个工具非常高效。

您还必须查看 virtualenv 和 virtualenvwrapper 来配置您的虚拟环境。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T10:47:18.733

我建议[Head First Python](http://www.headfirstlabs.com/books/hfpython/)。即使开始阅读时看起来有点幼稚，但事实证明，它不仅非常非常适合学习基本概念，而且还可以了解该语言的能力和用途（google app engine，python on安卓，...）。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-27T10:30:03.887

要回答您的第二个问题，Python 是一种解释型语言，因此您不需要编译器。只要您安装了 Python，只需运行脚本即可。

您可以使用您喜欢的任何 IDE 来编写代码。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-27T10:30:22.543

我真的很喜欢从[python 基本参考中学习 python](https://rads.stackoverflow.com/amzn/click/com/0672329786)

至于编译器部分：Visual Studio 不是编译器。这是一个使用 MSVC 编译器的 IDE。另一方面，Python 是一种解释型动态语言（嗯......它实际上并没有被解释，因为解释器在第一次导入模块时会将其编译为字节码，所以两者兼而有之，但这些是您需要了解的技术细节不用担心什么时候开始学习语言）

对于python，您需要：

1.  python iterpreter：[http ://www.python.org/getit/](http://www.python.org/getit/)
2.  您选择的编辑器。我个人喜欢 emacs，但如果您喜欢 IDE，那么您可以使用[PyDev](http://pydev.org/)或[komodo](http://www.activestate.com/komodo-ide)或许多其他工具。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-09-27T10:36:23.973

正如 swair 所说，Dive into python 是其他语言经验丰富的程序员的一个很好的资源。如果你想留在 Windows Visual Studio 环境中，你可以给 Iron Python [http://ironpython.net/tools/](http://ironpython.net/tools/)一个机会它是内置的Visual Studio 2010。但如果要重新开始，我推荐 Python shell、iPython 或 PyCrust。PyCrust 是我的最爱。

# java - 表达式包含“最多一个副作用，作为其最外层的操作”是什么意思？

> ID：12619225
> 
> 赞同：9
> 
> 时间：2012-09-27T10:25:47.963
> 
> 标签：java, jls

在[Java 语言 Spex 15.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7)中：

> 当每个表达式最多包含一个副作用时，代码通常会更清晰，因为它的最外层操作

这是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T10:30:11.183

这意味着每个表达式一次应该执行一项任务。

考虑以下两个声明：

```
int a = 10;
int b = 20; 
```

现在的任务是将这两个`int`s 相加并加`b`1。有两种方法可以做到。

```
int c = a + b++; 
```

和

```
int c = a + b;
b++; 
```

JLS 更喜欢并推荐后者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T10:30:22.750

这意味着：

```
int x = someFunction(a, b); 
```

当`someFunction(a, b)`没有任何副作用时更清楚，即*它不会改变任何东西*。相反，上面唯一的变化是分配给`x`.

另一个例子是使用前缀/后缀增量器。

```
int x = a + b; 
```

比

```
int x = (a++) + (++b); 
```

因为只有`x`分配给。在第二个示例中`a`，并`b`在同一语句中进行了更改。

通过限制副作用，您可以更轻松地推断代码的功能和/或重新排序语句调用，包括将它们并行化，例如在下面，如果方法没有副作用，那么您可以调用方法`a()`，`b()`并`c()`以任何顺序和/或并行表示参数。

```
int res = f(a(), b(), c()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:35:55.520

表达式的副作用主要是在表达式求值期间对变量的赋值。

注意代码：

```
int x = 5, y = 7;
while ((z = x-- + --y) > 0 ) {
    console.out("What is 'z' now? " + z);
    console.out("How many times will this be printed?");
} 
```

病情评估有 3 个副作用：

*   递减`x`
*   递减`y`
*   分配给`z`

看起来很扭曲，不是吗？

# php - 我无法接收从我的服务器发送的电子邮件

> ID：12619226
> 
> 赞同：0
> 
> 时间：2012-09-27T10:25:53.083
> 
> 标签：php, windows, apache, email, sendmail.exe

我在 Windows 上使用 apache、php 和 sendmail.exe。我下载 sendmail.exe 并像这样配置它：

```
 ; configuration for fake sendmail

    ; if this file doesn't exist, sendmail.exe will look for the settings in
    ; the registry, under HKLM\Software\Sendmail

    [sendmail]

    ; you must change mail.mydomain.com to your smtp server,
    ; or to IIS's "pickup" directory.  (generally C:\Inetpub\mailroot\Pickup)
    ; emails delivered via IIS's pickup directory cause sendmail to
    ; run quicker, but you won't get error messages back to the calling
    ; application.

    smtp_server=smtp.gmail.com

    ; smtp port (normally 25)

    smtp_port=587

    ; the default domain for this server will be read from the registry
    ; this will be appended to email addresses when one isn't provided
    ; if you want to override the value in the registry, uncomment and modify

    default_domain=domain.com

    ; log smtp errors to error.log (defaults to same directory as sendmail.exe)
    ; uncomment to enable logging

    error_logfile=error.log

    ; create debug log as debug.log (defaults to same directory as sendmail.exe)
    ; uncomment to enable debugging

    ;debug_logfile=debug.log

    ; if your smtp server requires authentication, modify the following two lines

    auth_username=admin@whilgeek.com
    auth_password=19910610

    ; if your smtp server uses pop3 before smtp authentication, modify the 
    ; following three lines

    pop3_server=
    pop3_username=
    pop3_password=

    ; to force the sender to always be the following email address, uncomment and
    ; populate with a valid email address.  this will only affect the "MAIL FROM"
    ; command, it won't modify the "From: " header of the message content

    force_sender=webmaster@domain.com

    ; sendmail will use your hostname and your default_domain in the ehlo/helo
    ; smtp greeting.  you can manually set the ehlo/helo name if required

    ;hostname= 
```

我的 php.ini 中的电子邮件功能是这样的：

```
[mail function]
    ; For Win32 only.
    SMTP = localhost
    smtp_port = 25

    ; For Win32 only.
    sendmail_from = admin@whilgeek.com

    ; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
    sendmail_path =C:\usr\lib\sendmail.exe -t

    ; Force the addition of the specified parameters to be passed as extra parameters
    ; to the sendmail binary. These parameters will always replace the value of
    ; the 5th parameter to mail(), even in safe mode.
    ;mail.force_extra_parameters = 
```

我在我的电脑上使用 userCake1.4（[在此处下载表格](http://www.ahaugas.com/downloads.php)），它显示已成功发送电子邮件。但是我没有收到发送给我的 gamil 的电子邮件。

有什么不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:39:07.140

我认为您的问题是反向 DNS 查找。当您从服务器发送电子邮件时，您的服务器必须连接到 Internet，并且反向 DNS 查找必须指向您的服务器。

例如，mail.example.com 的地址 (A) 记录指向 IP 地址 192.0.2.5。在反向数据库的指针记录中，这个IP地址被存储为域名5.2.0.192.in-addr.arpa，指向其指定的主机名mail.example.com。

请参阅[http://en.wikipedia.org/wiki/Reverse_DNS_lookup](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)

# ios - iOS 中的背景音频

> ID：12619227
> 
> 赞同：2
> 
> 时间：2012-09-27T10:25:59.713
> 
> 标签：ios, audio, background, avplayer

我正在尝试构建一个 iOS 应用程序（iOS > 5.0）。它应该在用户设置的计时器结束时播放音乐文件。这是我的设置，如果到目前为止完成：

*   我用avplayer
*   我已将 plist 中的背景模式设置为“应用程序播放音频”
*   在我的 appDelegate 我有：

    ```
    NSError *sessionError = nil;
    [[AVAudioSession sharedInstance] setDelegate:self];
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&sessionError]; 
    ```

*   在将要播放一首歌曲之前：

    ```
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&sessionError];
    [[AVAudioSession sharedInstance] setActive:YES error:&sessionError]; 
    ```

*   我在“playerItemDidPlayToEnd”上通知我的应用程序，停止播放器并告诉其他应用程序（如 music.app）再次激活

    ```
    _avPlayer = nil;
    NSError *sessionError = nil;
    [[AVAudioSession sharedInstance] setActive:NO withFlags:AVAudioSessionSetActiveFlags_NotifyOthersOnDeactivation error:&sessionError]; 
    ```

这工作正常。您可以让您的音乐应用在后台播放。我的应用程序开始播放音乐应用程序逐渐消失的歌曲。我的歌曲已播放，如果完成，音乐应用程序将继续播放。但只要我的应用不在后台。

在后台我得到错误：

> 错误域 = NSOSStatusErrorDomain 代码 = 560161140 “操作无法完成。（OSStatus 错误 560161140。）”

是否有可能在后台播放（在自定义事件上）以及在 fe music.app 和我的后台应用程序之间切换这两种组合是不可能的？

这是我的播放器模型的代码：http: [//pastie.org/4830995](http://pastie.org/4830995)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:20:34.343

我认为您的问题可能与后台处理有关。您需要在应用委托上覆盖此功能。

```
 - (void)applicationDidEnterBackground:(UIApplication *)application
{
 __block UIBackgroundTaskIdentifier task = 0;
 task=[application beginBackgroundTaskWithExpirationHandler:^{
     NSLog(@"Expiration handler called %f",[application backgroundTimeRemaining]);
    [application endBackgroundTask:task];
    task=UIBackgroundTaskInvalid;
}];

} 
```

除非播放声音，否则您的应用程序将在 6 分钟后被终止。如果您的用户将计时器设置为超过 6 分钟，您可以做的是每 5.5 分钟播放一次简短的声音，以使您的应用程序保持活力并开始新的后台任务。此外，您还必须考虑很多事情不会在后台执行。我做了一些与您正在做的事情有些相似的事情。我所做的是创建 NSObject 的自定义子类来处理音乐播放和应用程序过期的东西。并使其成为我委托的强大属性，因为许多功能和通知不会在后台运行在您的 VC 上。

尽管如果您只想播放声音，这可能不是最好的方法。也许只发送本地通知就可以了。

希望这有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T11:06:48.567

您是否注册了您的应用程序以作为音频应用程序在后台继续运行？为此，请将`UIBackgroundModes`密钥添加到`Info.plist`文件并将其值设置为`audio`.

# jsf - 重置输入字段而不执行验证

> ID：12619228
> 
> 赞同：12
> 
> 时间：2012-09-27T10:26:04.577
> 
> 标签：jsf, primefaces, facelets, reset

我有一个 Facelets 视图，如下所示：

```
<h:form id="f1">
<p:panelGrid id="p1" columns="2"> 
<p: inputText value="Distance Travelled::/><p:inputText value="#{airTransportUsage.distance}" immediate="true"
required="true" requiredMessage="Distance Travelled Field cannot be left blank.."
converterMessage="Distance Travelled must be a number"
validatorMessage="Distance Travelled must be a valid number.."
id="dis">
<f:validateLongRange minimum="1"/>
</p:inputText>
<p:commandButton value="Reset" action="#{airTransportUsage.reset}" update=":f1:p1" />
</p:panelGrid>
</h:form> 
```

单击重置按钮时，由于验证，将永远无法执行相应的方法。我不能`immediate="true"`在我的重置按钮上使用它，因为它会产生一些其他问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-27T11:03:46.633

默认情况下`<p:commandButton>`处理整个表单 ( `process="@form"`)，您可以通过仅在`process`属性中指定当前组件来更改此设置。

```
<p:commandButton value="Reset" ... process="@this" /> 
```

但是，如果事先已经验证了表单，这将失败。被标记为无效的输入字段将不会使用新的模型值（您自己重置）进行更新。如果您使用的是 PrimeFaces 3.4，则嵌入[`<p:resetInput>`](https://www.primefaces.org/showcase/ui/misc/resetInput.xhtml)按钮中：

```
<p:commandButton value="Reset" ... process="@this">
    <p:resetInput target="@form" />
</p:commandButton> 
```

如果您还没有使用 PrimeFaces 3.4 并且无法升级到它，那么您可以使用 OmniFaces [`ResetInputAjaxActionListener`](http://showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener)。

一个完全不同的选择是通过一个新的 GET 请求来刷新当前页面。

```
<p:button value="Reset" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-06T14:32:20.243

这在 PrimeFaces 5.3 中对我有用

```
<p:commandButton action="#{bean.reset()}" value="Reset" process="@this" update="@form" resetValues="true" /> 
```

如果需要，您可以`"@form"`将更新属性的目标替换为特定组件。

# haskell - 如何在 Haskell 中将函数列表映射到多个参数上？

> ID：12619233
> 
> 赞同：7
> 
> 时间：2012-09-27T10:26:15.567
> 
> 标签：haskell, currying

我有三个带有两个参数（x 和 y）的函数（`getRow`, `getColumn`, `getBlock`），每个函数都生成一个相同类型的列表。我想编写第四个函数来连接它们的输出：

```
outputList :: Int -> Int -> [Maybe Int]
outputList x y = concat . map ($ y) $ map ($ x) [getRow,getColumn,getBlock] 
```

该函数有效，但是有没有办法将双映射（带有三个'$'）重写为单个映射？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-27T10:46:36.857

```
import Data.Monoid

outputList :: Int -> Int -> [Maybe Int]
outputList = mconcat [getRow, getColumn, getBlock] 
```

* * *

你应该得到一个解释。

首先，我要明确指出所有这些函数都具有相同的类型。

```
outputList, getRow, getColumn, getBlock :: Int -> Int -> [Maybe Int] 
```

现在让我们从您的原始定义开始。

```
outputList x y = concat . map ($ y) $ map ($ x) [getRow,getColumn,getBlock] 
```

这些函数产生一个`[Maybe Int]`，并且任何东西的列表都是一个幺半群。Monoidally 组合列表与连接列表相同，因此我们可以替换`concat`为`mconcat`.

```
outputList x y = mconcat . map ($ y) $ map ($ x) [getRow,getColumn,getBlock] 
```

另一个是幺半群的东西是一个函数，如果它的结果​​是一个幺半群。也就是说，如果`b`是一个幺半群，那么`a -> b`也是一个幺半群。单面组合函数与调用具有相同参数的函数，然后单面组合结果相同。

所以我们可以简化为

```
outputList x = mconcat $ map ($ x) [getRow,getColumn,getBlock] 
```

然后再次

```
outputList = mconcat [getRow,getColumn,getBlock] 
```

我们完成了！

* * *

Typeclassopedia 有一个关于[monoids 的部分](http://www.haskell.org/haskellwiki/Typeclassopedia#Monoid)，尽管在这种情况下，我不确定它是否会超出[Data.Monoid 的文档](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Monoid.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T11:01:38.193

作为第一步，我们观察到您的定义

```
outputList x y = concat . map ($ y) $ map ($ x) [getRow,getColumn,getBlock] 
```

可以使用函数组合运算符`(.)`而不是函数应用运算符重写`($)`，如下所示。

```
outputList x y = (concat . map ($ y) . map ($ x)) [getRow,getColumn,getBlock] 
```

接下来我们注意到它`map`是`fmap`on 列表的另一个名称并且满足`fmap`法律，因此，特别是，我们有`map (f . g) == map f . map g`. 我们应用此定律来定义使用单个应用程序的版本`map`。

```
outputList x y = (concat . map (($ y) . ($ x))) [getRow,getColumn,getBlock] 
```

作为最后一步，我们可以将`concat`和的组合替换`map`为`concatMap`。

```
outputList x y = concatMap (($ y) . ($ x)) [getRow,getColumn,getBlock] 
```

最后，在我看来，虽然 Haskell 程序员倾向于使用许多花哨的运算符，但将函数定义为

```
 outputList x y = concatMap (\f -> f x y) [getRow,getColumn,getBlock] 
```

正如它清楚地表达的那样，该功能的作用。但是，使用类型类抽象（如另一个答案所示）可能是一件好事，因为您可能会观察到您的问题具有一定的抽象结构并获得新的见解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T11:07:38.837

我会选择@dave4420 的回答，因为它最简洁，准确地表达了你的意思。但是，如果你不想依赖`Data.Monoid`那么你可以重写如下

原始代码：

```
outputList x y = concat . map ($ y) $ map ($ x) [getRow,getColumn,getBlock] 
```

融合两张地图：

```
outputList x y = concat . map (($y) . ($x)) [getRow,getColumn,getBlock] 
```

替换`concat . map`为`concatMap`：

```
outputList x y = concatMap (($y) . ($x)) [getRow,getColumn,getBlock] 
```

你完成了。

*编辑：* aaaaand 这与@Jan Christiansen 的回答完全相同。那好吧！

# delphi - delphi中的文件屏蔽

> ID：12619235
> 
> 赞同：4
> 
> 时间：2012-09-27T10:26:22.660
> 
> 标签：delphi, mask

我正在尝试查找所有扩展名为 .cbr 或 .cbz 的文件

如果我将掩码设置为 *.cb？

它会找到 *.cbproj 文件。如何将掩码设置为仅查找 .cbr 和 .cbz 文件？

这是我正在使用的代码。

我有两个编辑框 EDIT1 是要搜索的位置，EDIT2 是我放置面具的位置。显示它找到的内容的列表框和一个搜索按钮。

```
edit1 := c:\
edit2 := mask (*.cb?) 
```

空间

```
 procedure TFAutoSearch.FileSearch(const PathName, FileName : string; const InDir : boolean);
var Rec  : TSearchRec;
    Path : string;
begin
Path := IncludeTrailingBackslash(PathName);
if FindFirst(Path + FileName, faAnyFile - faDirectory, Rec) = 0 then
 try
   repeat
     ListBox1.Items.Add(Path + Rec.Name);
   until FindNext(Rec) <> 0;
 finally
   FindClose(Rec);
 end;

If not InDir then Exit;

if FindFirst(Path + '*.*', faDirectory, Rec) = 0 then
 try
   repeat
    if ((Rec.Attr and faDirectory) <> 0)  and (Rec.Name<>'.') and (Rec.Name<>'..') then
     FileSearch(Path + Rec.Name, FileName, True);
   until FindNext(Rec) <> 0;
 finally
   FindClose(Rec);
 end;
end; //procedure FileSearch

procedure TFAutoSearch.Button1Click(Sender: TObject);
begin
  FileSearch(Edit1.Text, Edit2.Text, CheckBox1.State in [cbChecked]);
end;

end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T13:58:52.600

最简单的方法是使用`ExtractFileExt`当前文件名并检查它是否与您想要的扩展名匹配。

这是您例程的完全重写版本，`FileSearch`它完全符合您的要求（无论如何，根据您的问题）：

```
procedure TFAutoSearch.FileSearch(const ARoot: String);
var
  LExt, LRoot: String;
  LRec: TSearchRec;
begin
  LRoot := IncludeTrailingPathDelimiter(ARoot);
  if FindFirst(LRoot + '*.*', faAnyFile, LRec) = 0 then
  begin
    try
      repeat
        if (LRec.Attr and faDirectory <> 0) and (LRec.Name <> '.') and (LRec.Name <> '..') then
          FileSearch(LRoot + LRec.Name)
        else
        begin
          LExt := UpperCase(ExtractFileExt(LRoot + LRec.Name));
          if (LExt = '.CBR') or (LExt = '.CBZ') then
            ListBox1.Items.Add(LRoot + LRec.Name);
        end;
      until (FindNext(LRec) <> 0);
    finally
      FindClose(LRec);
    end;
  end;
end; 
```

虽然另一个建议使用多个扩展作为掩码的答案`*.cbr;*.cbz`应该（无论如何原则上）有效，但我通过痛苦的经验注意到，Delphi 中的`FindFirst`and`FindNext`方法往往不接受掩码中的多个扩展！

我提供的代码应该可以很好地满足您的需求，尽情享受吧！

**更新**：允许在运行时动态地在掩码中使用多个扩展（如 OP 对此答案的第一条评论所示）。

我们要做的是`String`从您的`TEdit`控制中获取一个（这`String`是一个或多个文件扩展名，正如您所期望的那样），将其“分解”`String`成一个`Array`，并将每个文件与`Array`.

听起来比它更复杂：

```
type
  TStringArray = Array of String; // String Dynamic Array type...

// Now let's provide a "Mask Container" inside the containing class...
  TFAutoSearch = class(TForm)
    // Normal stuff in here
  private
    FMask: TStringArray; // Our "Mask Container"
  end; 
```

此代码将填充`FMask`每个单独的掩码扩展名，这些扩展名由`;`诸如`.CBR;.CBZ`.

请注意，此方法不接受通配符或任何其他正则表达式魔法，但您可以根据需要对其进行修改！

```
procedure TFAutoSearch.ExplodeMask(const AValue: String);
var
  LTempVal: String;
  I, LPos: Integer;
begin
  LTempVal := AValue;
  I := 0;
  while Length(LTempVal) > 0 do
  begin
    Inc(I);
    SetLength(FMask, I);
    LPos := Pos(';', LTempVal);

    if (LPos > 0) then
    begin
      FMask[I - 1] := UpperCase(Copy(LTempVal, 0, LPos - 1));
      LTempVal := Copy(LTempVal, LPos +  1, Length(LTempVal));
    end
    else
    begin
      FMask[I - 1] := UpperCase(LTempVal);
      LTempVal := EmptyStr;
    end;
  end;
end; 
```

我们现在需要一个函数来确定指定文件是否与任何定义的扩展匹配：

```
function TFAutoSearch.MatchMask(const AFileName: String): Boolean;
var
  I: Integer;
  LExt: String;
begin
  Result := False;
  LExt := UpperCase(ExtractFileExt(LExt));
  for I := Low(FMask) to High(FMask) do
    if (LExt = FMask[I]) then
    begin
      Result := True;
      Break;
    end;
end; 
```

现在这是修改后的`FileSearch`程序：

```
procedure TFAutoSearch.FileSearch(const ARoot: String);
var
  LRoot: String;
  LRec: TSearchRec;
begin
  LRoot := IncludeTrailingPathDelimiter(ARoot);
  if FindFirst(LRoot + '*.*', faAnyFile, LRec) = 0 then
  begin
    try
      repeat
        if (LRec.Attr and faDirectory <> 0) and (LRec.Name <> '.') and (LRec.Name <> '..') then
          FileSearch(LRoot + LRec.Name)
        else
        begin
          if (MatchMask(LRoot + LRec.Name)) then
            ListBox1.Items.Add(LRoot + LRec.Name);
        end;
      until (FindNext(LRec) <> 0);
    finally
      FindClose(LRec);
    end;
  end;
end; 
```

最后，这是您启动搜索的方式：

```
procedure TFAutoSearch.btnSearchClick(Sender: TObject);
begin
  ExplodeMask(edMask.Text);
  FileSearch(edPath.Text);
end; 
```

Where`edMask`在您的问题中定义为`Edit2`并且`edPath`在您的问题中定义为`Edit1`。请记住，此方法不支持使用通配符或其他特殊字符，因此`edMask.Text`应该类似于`.CBR;.CBZ`

如果您使用 Delphi 的 Regex 库，您可以轻松地修改此方法以支持您可以想象的所有表达式案例！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:05:05.050

Dorin 建议更换你的面具`*.cbr;*.cbz`应该会奏效。也就是说，它不再匹配 cbproj。但是，它仍会匹配 cbzy 或任何其他以 cbr 或 cbz 开头的扩展名。原因是 FindFirst/FindNext 匹配文件名的长格式和旧的短格式 (8.3)。所以简短的形式总是有截断的扩展，其中 cbproj 被缩短为 cbp，因此匹配 cb?。

这应该可以通过使用 FindFirstEx 来避免，但这需要对您的搜索功能进行少量重写，实际上对我不起作用。因此，我只是使用[MatchesMask](http://delphi.about.com/library/rtl/blrtlMatchesMask.htm)函数仔细检查了所有匹配项。

# c++ - 背包 - 如何识别使用了哪些重量？

> ID：12619238
> 
> 赞同：0
> 
> 时间：2012-09-27T10:26:31.143
> 
> 标签：c++, knapsack-problem

我有一个代码，它给出了通过用最佳重量组填充背包可以获得的最大值。

```
int arr[5] = {0, 0, 0, 0, 0};
int Weight[5] = {2, 5, 8, 7, 9};
int Value[5]  = {4, 5, 7, 9, 8};
const int n = 5;
const int maxCapacity = 20;

int maximum(int a, int b)
{
    return a > b ? a : b;
}

int knapsack(int capacity, int i)
{
    if (i > n-1) return 0;

    if (capacity < Weight[i])
    {
        return knapsack(capacity, i+1);
    }
    else
    {
        return maximum (knapsack(capacity, i+1),
                        knapsack(capacity - Weight[i], i+1) + Value[i]);
    }
}

int main (void)
{
    cout<<knapsack(maxCapacity,0)<<endl;
    return 0;
} 
```

我需要通过打印所有权重用于找到最佳解决方案来扩展此解决方案。为此，我计划使用一个初始化为 0 的数组 arr。每当使用权重时，我将 arr 中的相应位置标记为 1，否则它保持为 0。

我想到的第一件事是更改 maximum() 函数，如下所示

```
int maximum(int a, int b, int i)
{
    if (a > b)
    {
        if (arr[i] == 1) arr[i] = 0;
        return a;
    }
    else
    {
        if (arr[i] == 0) arr[i] = 1;
        return b;
    }
} 
```

但即使是这种解决方案也因权重和值的某些组合而失败。关于如何前进的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:11:42.543

The problem is that you dont know which one of the two options are selected by this command

```
return maximum (knapsack(capacity, i+1),
                knapsack(capacity - Weight[i], i+1) + Value[i]); 
```

I guess you can use two variables to store the values and if the weight is selected( the value of that variable is bigger ) you can add it to the array . Hope that solves your problem.

# r - 删除和更改 ggplot2 中的图例

> ID：12619240
> 
> 赞同：0
> 
> 时间：2012-09-27T10:26:45.053
> 
> 标签：r, ggplot2, legend

我有以下情节，但不希望显示点大小的图例。另外如何更改因子（grp）的标题？抱歉，我知道这应该很容易，但我被卡住了。

```
df1<-data.frame(x=c(3,4,5),y=c(15,20,25),grp=c(1,2,2))
p<-ggplot(df1,aes(x,y))
p<-p+ geom_point(aes(colour=factor(grp),size=4))
p

df2<-data.frame(x=c(3.5,4.5,5.5),y=c(15.5,20.5,25.5))
p<-p + geom_path(data=df2,aes(x=x,y=y))
p 
```

![在此处输入图像描述](../Images/f673f2df885a056b7574c64d68558e23.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:43:19.013

要更改图例标题，只需更改数据框标题就更容易（我发现）：

```
df1$grp = factor(df1$grp)
colnames(df1)[3] = "Group" 
```

尺寸之所以出现在传说中，是因为你把它变成了一种审美——它不是！审美是随数据而变化的东西。这里大小是固定的：

```
p = ggplot(df1,aes(x,y))
p = p+ geom_point(aes(colour=Group), size=4) 
```

您还可以在 ggplot 本身中更改图例的名称：

```
p =  p + scale_colour_discrete(name="Group") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:46:38.513

将尺寸排除在美学之外。

```
ggplot(df1,aes(x,y)) + geom_point(aes(colour = factor(grp)), size=4) +    
scale_colour_discrete(name = "Grp") 
```

# performance - Grails 2.0 run-app 性能很慢

> ID：12619243
> 
> 赞同：14
> 
> 时间：2012-09-27T10:26:51.643
> 
> 标签：performance, grails, grails-2.0

我正在使用 Grails 2.0。我曾经在 Grails 1.3.7 下开发，但是在 Grails 2.0 下运行应用程序时性能非常慢。一个页面可能需要超过 30 秒才能显示出来，这非常令人尴尬且效率低下。

我搜索了一下，发现 2.0 中的 GSP 在某些情况下比 1.3.7 慢 10 倍；Greame 解释说，在 dev mod 中有一种处理 GSP 的新方法，但是在执行 grails prod run-app 时，我遇到了几乎相同的问题。

我应该怎么做才能加快开发进程？我浪费了太多时间。

PS：我的 GRAILS_OPTS 是“-server -Xmx600M -Xms600M -XX:MaxPermSize=250m -Dfile.encoding=UTF-8 -Dserver.port=9090”</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T16:06:29.463

大约 20 分钟前，我在邮件列表上发布了一个小公告：http: [//grails.1312388.n4.nabble.com/GSP-Compilation-tt4632864.html#a4635595](http://grails.1312388.n4.nabble.com/GSP-Compilation-tt4632864.html#a4635595)

此问题已修复：http: [//jira.grails.org/browse/GRAILS-9423](http://jira.grails.org/browse/GRAILS-9423)

请测试最新的 2.1.x 快照构建的性能。

试试这些

```
export GRAILS_OPTS="-server -noverify -XX:PermSize=256m
-XX:MaxPermSize=256m -Xmx600M -Xms600m -XX:+UseParallelGC -Djava.net.preferIPv4Stack=true 
-Dsun.reflect.inflationThreshold=100000" 
```

对我来说，诀窍是将 Xmx 和 Xms 设置为相同的值，并将 PermSize 和 MaxPermSize 设置为相同的值。sun.reflect.inflationThreshold 有助于 permgen。（ Grails jira 中的[http://jira.grails.org/browse/GRAILS-7878?focusedCommentId=66447&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-66447](http://jira.grails.org/browse/GRAILS-7878?focusedCommentId=66447&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-66447)进行解释）

顺便提一句。我在 10 分钟前提交了这个问题：http: [//jira.grails.org/browse/GRAILS-9444](http://jira.grails.org/browse/GRAILS-9444) 如果它很有趣，请就这个问题投票。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T21:58:19.043

由于重新加载的改进，Grails 2.x 在开发模式下比 1.3.x 慢。它使用类似于 JRebel 的 Spring-Loaded 重载代理。

确保您的开发笔记本电脑有足够的内存 (>4GB)、SSD 和快速的 i7 CPU。

购买一台配备 16GB 内存和快速 SSD 的最新笔记本电脑，您就不会再考虑速度慢了。我还推荐i7系列CPU。目前仅花费约 1200 美元。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T21:50:10.563

为确保您使用的是 Spring-Loaded 重载代理的最新修复，请使用 Grails 2.1.x 而不是 Grails 2.0.x。对于 Grails 2.1.1，您可能希望将 Spring-Loaded 重新加载代理升级到快照版本。

您可以从以下位置获取最新快照： [https ://repo.springsource.org/snapshot/com/springsource/springloaded/springloaded-core/](https://repo.springsource.org/snapshot/com/springsource/springloaded/springloaded-core/)

目前它是[https://repo.springsource.org/snapshot/com/springsource/springloaded/springloaded-core/1.1.1.BUILD-SNAPSHOT/springloaded-core-1.1.1.BUILD-20120821.173635-2.jar](https://repo.springsource.org/snapshot/com/springsource/springloaded/springloaded-core/1.1.1.BUILD-SNAPSHOT/springloaded-core-1.1.1.BUILD-20120821.173635-2.jar)。

将 $GRAILS_HOME/lib/com.springsource.springloaded/springloaded-core/jars/springloaded-core-1.0.6.jar 替换为下载的快照（将快照重命名为相同的文件名 springloaded-core-1.0.6.jar） .

一旦 springloaded-core 版本 1.1.1 发布，这个答案就会过时。

# jsf - 在布局中显示选定的树节点信息

> ID：12619244
> 
> 赞同：-1
> 
> 时间：2012-09-27T10:26:55.417
> 
> 标签：jsf, xhtml

在我的 pge 中，我有这个：

```
<p:layout style="min-width:1400px;min-height:600px;" id="layout">

   <p:layoutUnit position="west" resizable="true" size="300">
     a tree ...
</p:layoutUnit>

<p:layoutUnit id="center" position="center" size="800">  
     tabs ..
     </p:layoutUnit>

 </p:layout> 
```

当用户选择树节点时，我应该在选项卡组件中显示所选节点信息，并且此选项卡位于位于中心（id="center"）的 layoutUnit 中，最初此 layoutUnit 应该为空知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:12:43.340

使用`rendered`选项卡组件的属性。

当在您的树组件中触发某些属性时，该`rendered`属性可以从“false”切换到“true”（该值将保存在 bean 中） 。`actionlistener`查看这个问题的具体步骤（并检查第二个答案，而不是第一个）： [如何使用 JSF 显示/隐藏组件？](https://stackoverflow.com/questions/3694450/how-can-i-show-hide-component-with-jsf)

注意：这不是primefaces特定的，所以我从你的问题中删除了标签以反映这一点。

# liferay - liferay 重新部署：重新部署时根上下文为空

> ID：12619249
> 
> 赞同：1
> 
> 时间：2012-09-27T10:27:11.487
> 
> 标签：liferay, root, liferay-6, applicationcontext, redeploy

我有一个带有几个 spring portlet 的 Web 应用程序。每个 portlet 都有一个带有声明控制器的 xml，但控制器使用的服务放在 applicationContext.xml 中。我知道每个portlet 都会创建一个spring 应用程序上下文（来自自己的xml 文件），并且每个上下文都具有从applicationContext.xml 创建的spring 应用程序上下文作为根上下文。也就是说，在 applicationContext.xml 中声明的所有 bean 对于所有 portlet 都是通用的。

所以让我们举个例子：

**portlet example-portlet.xml 的**xml 文件： ... ...

控制器**ExampleController.java**：

```
package example.controller;
@Controller
@RequestMapping(value = "VIEW")
public class NavigareController {

@Autowired
private ExampleService es;
...
} 
```

**应用上下文.xml**：

```
...
<context:component-scan base-package="example.service />
... 
```

服务**ExampleServiceImpl.java**：

```
package example.service;
@Service
public class ExampleServiceImpl implements ExampleService {
...
} 
```

当服务器启动其中的应用程序时，应用程序启动并且一切正常。重新部署应用程序时，出现错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'exampleController'...
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private example.service.ExampleService...
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [example.service.ExampleService]... 
```

结果 portlet 没有启动。

我已经调试了lifery的源代码，我发现了以下代码：

```
package org.springframework.web.portlet
...
public abstract class FrameworkPortlet extends GenericPortletBean
implements ApplicationListener<ContextRefreshedEvent> {
...
protected ApplicationContext initPortletApplicationContext() {
ApplicationContext parent = PortletApplicationContextUtils.getWebApplicationContext(getPortletContext());
ApplicationContext pac = createPortletApplicationContext(parent);
... 
```

上面的代码，在第一种情况下（当服务器在内部启动应用程序时）返回不为 null 的父级，但在第二种情况下（当重新部署应用程序时）它返回一个 null 父级。在 PortletApplicationContextUtils.getWebApplicationContext(getPortletContext()) 中有以下代码：

```
Object attr = pc.getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE); 
```

因此，在第一种情况下，该属性在 portlet 上下文中，但在第二种情况下，它不在 portlet 上下文中。问题很清楚，在 null parent 中找不到 exampleService bean。

问题是：**热部署过程中是否有任何错误？**. 请帮我！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:48:08.913

你的 Liferay 版本是什么？如果是 6.1.1，那么这是一个已知问题

[http://issues.liferay.com/browse/LPS-29103](http://issues.liferay.com/browse/LPS-29103)

如果您只需要部署一次 portlet - 按照票证中的建议手动更改 web.xml 中侦听器的顺序。

如果您需要大量重新部署 portlet（用于开发），那么以前的解决方案非常耗时，最简单的方法是从 6.2.0 分支向后移植修复程序。

# php - 在抽象类中声明的 PHP 魔术方法 __set 避免扩展类属性分配

> ID：12619253
> 
> 赞同：1
> 
> 时间：2012-09-27T10:27:16.963
> 
> 标签：php, abstract-class, extends, magic-methods

我对抽象类（模型）中的魔术方法 __set() 有问题，因为我无法分配扩展模型的类的任何属性。既不尝试在 __set 方法中打印变量的名称：

```
abstract class Model
{
public $data;
public function __set($name, $value)
{
echo $name; $this->$name = $value;
}
}

class User extends Model
{
public $id;
}

$u = new User();
$u->data = "hello"; //print "data";
$u->id = 123; //print NOTHING.. WHY¿? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:32:41.720

`__set`当您尝试在未定义的属性中分配值时调用。在您的情况下`__set`将永远不会被调用，因为这两个属性都已定义并存在。

[请参阅此处](http://codepad.org/6NBHcQkZ)，这两个属性的输出都没有，并尝试删除其中一个属性声明部分并查看输出差异。

# python - 用python发送电子邮件不起作用

> ID：12619256
> 
> 赞同：0
> 
> 时间：2012-09-27T10:27:20.220
> 
> 标签：python, smtp

我尝试通过 python 发送电子邮件。根据我的脚本发送成功。

```
import smtplib

sender = 'from@fromdomain.com'
receivers = ['my@emailadress.com']

message = """From: From Person <from@fromdomain.com>
To: To Person <to@todomain.com>
Subject: SMTP e-mail test

This is a test e-mail message.
"""

try:
    smtpObj = smtplib.SMTP('127.0.0.1', 1025)
    smtpObj.sendmail(sender, receivers, message)
    print "Successfully sent email"
except smtplib.SMTPException:
    print "Error: unable to send email" 
```

但是当我检查我的电子邮件时，我没有收到新邮件。:(问题出在哪里？我发送的电子邮件在哪里？

**编辑：**

我的 smtp 测试服务器是：

```
import smtpd
import asyncore

class CustomSMTPServer(smtpd.SMTPServer):

    def process_message(self, peer, mailfrom, rcpttos, data):
        print 'Receiving message from:', peer
        print 'Message addressed from:', mailfrom
        print 'Message addressed to  :', rcpttos
        print 'Message length        :', len(data)
        return

server = CustomSMTPServer(('127.0.0.1', 1025), None)
print "Started...."

asyncore.loop() 
```

我的 smtp 服务器说：

```
Receiving message from: ('127.0.0.1', 65071)
Message addressed from: from@fromdomain.com
Message addressed to  : ['my@emailadress.com']
Message length        : 129 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:32:57.367

`process_message()`除了输出其输入数据之外什么都不做。因此，它会显示有关它收到的邮件的数据，但它不会将此邮件转发到您的真实收件箱，而是丢弃数据。

所以收不到邮件是正常的。

# iphone - iPhone：如何自动连接到已知的 wifi SSID？

> ID：12619257
> 
> 赞同：13
> 
> 时间：2012-09-27T10:27:21.463
> 
> 标签：iphone, ios, wifi, ssid, captivenetwork

我知道可以使用官方 Apple SDK 中的 CaptiveNetwork API 在 iPhone 上列出可用的 Wifi 网络。

我想知道是否有办法以编程方式自动连接到特定的 SSID，只要我能在 CaptiveNetwork 返回的列表中找到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:37:50.810

苹果不希望你做这样的事情。连接到 Wifi 站是用户的责任，所以不要指望公共 API。参见例如[这里](https://stackoverflow.com/questions/10231735/is-there-a-way-to-toggle-wifi-on-and-off-programatically-in-ios)。可能[此](http://itunes.apple.com/us/app/autowifi-lite/id301447456?mt=8)应用程序的制造商也希望自动执行此操作。

彼得

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T07:08:57.687

据我所知，您只能在不使用私有api的情况下获得当前连接的wifi，但让我困惑的是Nest iOS App可以获取可用wifi列表，Apple没有拒绝它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-06T01:09:17.280

首先，我认为您无法使用 Captive network API 在 iPhone 上获取可用 WiFi 网络的列表。它只会为您提供已连接 wifi 的详细信息。尽管有私有 API 可以做到这一点，但 Apple 不批准使用它们的应用程序。

# jsf-2 - p:dataTable 中的 p:fileDownload 在对 p:dataTable 执行搜索后不起作用（只是刷新页面）

> ID：12619259
> 
> 赞同：2
> 
> 时间：2012-09-27T10:27:30.587
> 
> 标签：jsf-2, datatable, primefaces, download

我有一个 JSF/PrimeFaces Web 应用程序。在一页`<p:dataTable>`中`<p:fileDownload>`使用了组件。bean 构造函数从数据库加载数据。页面加载时它工作正常。下载按钮位于数据表的最后一列。单击此按钮后，它将文件下载控制器，一切正常。

但是，如果我在页面中添加一个搜索功能，该功能根据查询过滤数据表结果，那么单击下载按钮不会返回下载的文件，而只会刷新页面。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:38:31.297

如果后面的模型在显示带有搜索结果的表格的请求和下载文件的请求之间发生了不兼容的变化，则`value`可能会发生这种情况。`<p:dataTable>`如果您的 bean 是请求范围的，那么这反过来又会发生。然后在每个 HTTP 请求上新创建模型。在表单提交请求期间，JSF 需要遍历模型，同时在数据表中查找和执行操作。但是，如果模型不代表与显示表单时相同的模型，那么这一切都会失败。

将 bean 放在视图范围内应该可以解决问题，前提是您在 (post) 构造函数中正确初始化模型并在 (action)listener 方法中更改它，因此*不在*任何 getter 方法中。只要您回发到同一个视图，视图范围的 bean 实例就会一直存在，因此模型不再在每个请求上重新初始化，但同一个视图将在同一个视图上的请求中重用。

或者，如果您出于技术原因确实需要将 bean 保留在请求范围内，那么您需要确保将搜索查询也作为请求参数传递，以便可以根据搜索查询正确初始化模型。

# php - 重复投票

> ID：12619269
> 
> 赞同：2
> 
> 时间：2012-09-27T10:28:10.707
> 
> 标签：php

我们目前有一个投票系统设置，可以保存投票人的 IP 地址以阻止重复投票。

然而，每天都会从数据库中删除 IP 地址，这样他们就可以对最喜欢的项目重新投票。

看看下面的代码，你能看到我如何阻止这种情况，这样一个拥有特定 IP 地址的人就再也不能投票给那个特定的项目了吗？然而，他们可以对其他参赛者进行投票，但同样只能投票一次。

有任何想法吗？

```
<?php
// Script Voting - http://www.coursesweb.net/
class Voting {
  // properties
  static protected $conn = false;            // stores the connection to mysql
  public $affected_rows = 0;        // number of affected, or returned rows in SQL query
  protected $voter = '';                    // the user who vote, or its IP
  protected $nrvot = 0;                 // if it is 1, the user can vote only one item in a day, 0 for multiple items
  protected $svoting = 'mysql';         // 'mysql' to register data in database, any other value register in TXT files
  public $votitems = 'voting';        // Table /or file_name to store items that are voted
  public $votusers = 'votusers';             // Table /or filename that stores the users who voted in current day
  protected $tdy;                // will store the number of current day
  public $eror = false;          // to store and check for errors

  // constructor
  public function __construct() {
    // sets $nrvot, $svoting, $voter, and $tdy properties
    if(defined('NRVOT')) $this->nrvot = NRVOT;
    if(defined('SVOTING')) $this->svoting = SVOTING;
    if(defined('USRVOTE') && USRVOTE === 0) { if(defined('VOTER')) $this->voter = VOTER; }
    else $this->voter = $_SERVER['REMOTE_ADDR'];
    $this->tdy = date('j');

    // if set to use TXT files, set the path and name of the files
    if($this->svoting != 'mysql') {
      $this->votitems = '../votingtxt/'.$this->votitems.'.txt';
      $this->votusers = '../votingtxt/'.$this->votusers.'.txt';
    }
  }

  // for connecting to mysql
  protected function setConn() {
    try {
      // Connect and create the PDO object
      self::$conn = new PDO("mysql:host=".DBHOST."; dbname=".DBNAME, DBUSER, DBPASS);

      // Sets to handle the errors in the ERRMODE_EXCEPTION mode
      self::$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

      self::$conn->exec('SET CHARACTER SET utf8');      // Sets encoding UTF-8

    }
    catch(PDOException $e) {
      $this->eror = 'Unable to connect to MySQL: '. $e->getMessage();
    }
  }

  // Performs SQL queries
  public function sqlExecute($sql) {
    if(self::$conn===false OR self::$conn===NULL) $this->setConn();      // sets the connection to mysql
    $re = true;           // the value to be returned

    // if there is a connection set ($conn property not false)
    if(self::$conn !== false) {
      // gets the first word in $sql, to determine whenb SELECT query
      $ar_mode = explode(' ', trim($sql), 2);
      $mode = strtolower($ar_mode[0]);

      // performs the query and get returned data
      try {
        if($sqlprep = self::$conn->prepare($sql)) {
          // execute query
          if($sqlprep->execute()) {
            // if $mode is 'select', gets the result_set to return
            if($mode == 'select') {
              $re = array();
              // if fetch() returns at least one row (not false), adds the rows in $re for return
              if(($row = $sqlprep->fetch(PDO::FETCH_ASSOC)) !== false){
                do {
                  // check each column if it has numeric value, to convert it from "string"
                  foreach($row AS $k=>$v) {
                    if(is_numeric($v)) $row[$k] = $v + 0;
                  }
                  $re[] = $row;
                }
                while($row = $sqlprep->fetch(PDO::FETCH_ASSOC));
              }
              $this->affected_rows = count($re);                   // number of returned rows
            }
          }
          else $this->eror = 'Cannot execute the sql query';
        }
        else {
          $eror = self::$conn->errorInfo();
          $this->eror = 'Error: '. $eror[2];
        }
      }
      catch(PDOException $e) {
        $this->eror = $e->getMessage();
      }
    }

    // sets to return false in case of error
    if($this->eror !== false) { echo $this->eror; $re = false; }
    return $re;
  }

  // returns JSON string with item:['vote', 'nvotes', renot] for each element in $items array 
  public function getVoting($items, $vote = '') {
    $votstdy = $this->votstdyCo($items);     // gets from Cookie array with items voted by the user today

    // if $vote not empty, perform to register the vote, $items contains one item to vote
    if(!empty($vote)) {
      // if $voter empty means user not loged
      if($this->voter === '') return "alert('Vote Not registered.\\nYou must be logged in to can vote')";
      else {
        // gets array with items voted today from mysql, or txt-files (according to $svoting), and merge unique to $votstdy
        if($this->svoting == 'mysql') {
          $votstdy = array_unique(array_merge($votstdy, $this->votstdyDb()));
        }
        else {
          $all_votstdy = $this->votstdyTxt();     // get 2 array: 'all'-rows voted today, 'day'-items by voter today
          $votstdy = array_unique(array_merge($votstdy, $all_votstdy[$this->tdy]));
        }

        // if already voted, add in cookie, returns JSON from which JS alert message and will reload the page
        // else, accesses the method to add the new vote, in mysql or TXT file
        if(in_array($items[0], $votstdy) || ($this->nrvot === 1 && count($votstdy) > 0)) {
          $votstdy[] = $items[0];
          setcookie("votings", implode(',', array_unique($votstdy)), strtotime('tomorrow'));
          return '{"'.$items[0].'":[0,0,3]}';
        }
        else if($this->svoting == 'mysql') $this->setVotDb($items, $vote, $votstdy);       // add the new vote in mysql
        else $this->setVotTxt($items, $vote, $all_votstdy);          // add the new vote, and voter in TXT files

       array_push($votstdy, $items[0]);        // adds curent item as voted
     }
    }

    // if $nrvot is 1, and $votstdy has item, set $setvoted=1 (user already voted today)
    // else, user can vote multiple items, after Select is checked if already voted the existend $item
    $setvoted = ($this->nrvot === 1 && count($votstdy) > 0) ? 1 : 0;

    // get array with items and their votings from mysql or TXT file
    $votitems = ($this->svoting == 'mysql') ? $this->getVotDb($items, $votstdy, $setvoted) : $this->getVotTxt($items, $votstdy, $setvoted);

    return json_encode($votitems);
  }

  // insert /update rating item in #votitems, delete rows in $votusers which are not from today, insert $voter in $votusers
  protected function setVotDb($items, $vote, $votstdy) {
    $this->sqlExecute("INSERT INTO `$this->votitems` (`item`, `vote`) VALUES ('".$items[0]."', $vote) ON DUPLICATE KEY UPDATE `vote`=`vote`+$vote, `nvotes`=`nvotes`+1");

    $this->sqlExecute("DELETE FROM `$this->votusers` WHERE `day`!=$this->tdy");

    $this->sqlExecute("INSERT INTO `$this->votusers` (`day`, `voter`, `item`) VALUES ($this->tdy, '$this->voter', '".$items[0]."')");

    // add curent voted item to the others today, and save them as string ',' in cookie (till the end of day)
    $votstdy[] = $items[0];
    setcookie("votings", implode(',', array_unique($votstdy)), strtotime('tomorrow'));
  }

  // select 'vote' and 'nvotes' of each element in $items, $votstdy stores items voted by the user today
  // returns array with item:['vote', 'nvotes', renot] for each element in $items array
  protected function getVotDb($items, $votstdy, $setvoted) {
    $re = array_fill_keys($items, array(0,0,$setvoted));    // makes each value of $items as key with an array(0,0,0)

    function addSlhs($elm){return "'".$elm."'";}      // function to be used in array_map(), adds "'" to each $elm
    $resql = $this->sqlExecute("SELECT * FROM `$this->votitems` WHERE `item` IN(".implode(',', array_map('addSlhs', $items)).")");
    if($this->affected_rows > 0) {
      for($i=0; $i<$this->affected_rows; $i++) {
        $voted = in_array($resql[$i]['item'], $votstdy) ? $setvoted + 1 : $setvoted;   // add 1 if the item was voted by the user today
        $re[$resql[$i]['item']] = array($resql[$i]['vote'], $resql[$i]['nvotes'], $voted);
      }
    }

    return $re;
  }

  // add /update rating item in TXT file, keep rows from today in $votusers, and add new row with $voter
  protected function setVotTxt($items, $vote, $all_votstdy) {
    // get the rows from file with items, if exists
    if(file_exists($this->votitems)) {
      $rows = file($this->votitems, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
      $nrrows = count($rows);

      // if exist rows registered, get array for each row, with - item^vote^nvotes
      // if row with item, update it and stop, else, add the row at the end
      if($nrrows > 0) {
        for($i=0; $i<$nrrows; $i++) {
          $row = explode('^', $rows[$i]);
          if($row[0] == $items[0]) {
            $rows[$i] = $items[0].'^'.($row[1] + $vote).'^'.($row[2] + 1);
            $rowup = 1; break;
          }
        }
      }
    }
    if(!isset($rowup)) $rows[] = $items[0].'^'.$vote.'^1';

    file_put_contents($this->votitems, implode(PHP_EOL, $rows));      // save the items in file

    // add row with curent item voted and the voter (today^voter^item), and save all the rows
    $all_votstdy['all'][] = $this->tdy.'^'.$this->voter.'^'.$items[0];
    file_put_contents($this->votusers, implode(PHP_EOL, $all_votstdy['all']));

    // add curent voted item to the others today, and save them as string ',' in cookie (till the end of day)
    $all_votstdy[$this->tdy][] = $items[0];
    setcookie("votings", implode(',', array_unique($all_votstdy[$this->tdy])), strtotime('tomorrow'));
  }

  // get from TXT 'vote' and 'nvotes' of each element in $items, $votstdy stores items voted by the user today
  // returns array with item:['vote', 'nvotes', renot] for each element in $items array
  protected function getVotTxt($items, $votstdy, $setvoted) {
    $re = array_fill_keys($items, array(0,0,$setvoted));    // makes each value of $items as key with an array(0,0,0)

    if(file_exists($this->votitems)) {
      $rows = file($this->votitems, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
      $nrrows = count($rows);

      // if exist rows registered, get array for each row, with - item^vote^nvotes
      // if row with item is in $items, add its data in $re
      if($nrrows > 0) {
        for($i=0; $i<$nrrows; $i++) {
          $row = explode('^', $rows[$i]);
          $voted = in_array($row[0], $votstdy) ? $setvoted + 1 : $setvoted;   // add 1 if the item was voted by the user today
          if(in_array($row[0], $items)) $re[$row[0]] = array($row[1], $row[2], $voted);
        }
      }
    }

    return $re;
  }

  // gets and returns from Cookie an array with items voted by the user ($voter) today
  protected function votstdyCo() {
    $votstdy = array();

    // if exists cookie 'votings', adds items voted today in $votstdy (array_filter() - removes null, empty elements)
    if(isset($_COOKIE['votings'])) {
      $votstdy = array_filter(explode(',', $_COOKIE['votings']));     // cookie stores string with: item1, item2, ...
    }

    return $votstdy;
  }

  // returns from mysql an array with items voted by the user today
  protected function votstdyDb() {
    $votstdy = array();
    $resql = $this->sqlExecute("SELECT `item` FROM `$this->votusers` WHERE `day`=$this->tdy AND `voter`='$this->voter'");
    if($this->affected_rows > 0) {
      for($i=0; $i<$this->affected_rows; $i++) {
        $votstdy[] = $resql[$i]['item'];
      }
    }

    return $votstdy;
  }

  // returns from TXT file an array with 2 arrays: all rows voted today, and items voted by the user today
  protected function votstdyTxt() {
    $re['all'] = array();  $re[$this->tdy] = array();
    if(file_exists($this->votusers)) {
      $rows = file($this->votusers, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
      $nrrows = count($rows);

      // if exist rows registered, get array for each row, with - day^voter^item , compare 'day', and 'voter'
      if($nrrows > 0) {
        for($i=0; $i<$nrrows; $i++) {
          $row = explode('^', $rows[$i]);
          if($row[0] == $this->tdy) {
            $re['all'][] = $rows[$i];
            if($row[1] == $this->voter) $re[$this->tdy][] = $row[2];
          }
        }
      }
    }

    return $re;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:31:05.107

为您要禁止的 IP 地址创建一个 SQL 数据库，或者如果列表足够短，我们可以创建一个数组。

检查 IP 地址是否在数据库或阵列中。如果不允许他们投票。但是，如果让他们认为他们已投票，则将其放入数据库并使其成为已投票，但将投票标记为不计入，这样他们就不会试图绕过您的区块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:32:39.193

此功能似乎正在删除不是来自“今天”的投票：

```
// insert /update rating item in #votitems, delete rows in $votusers which are not from today, insert $voter in $votusers
  protected function setVotDb($items, $vote, $votstdy) {
        $this->sqlExecute("INSERT INTO `$this->votitems` (`item`, `vote`) VALUES ('".$items[0]."', $vote) ON DUPLICATE KEY UPDATE `vote`=`vote`+$vote, `nvotes`=`nvotes`+1");

        //$this->sqlExecute("DELETE FROM `$this->votusers` WHERE `day`!=$this->tdy");

        $this->sqlExecute("INSERT INTO `$this->votusers` (`day`, `voter`, `item`) VALUES ($this->tdy, '$this->voter', '".$items[0]."')");

        // add curent voted item to the others today, and save them as string ',' in cookie (till the end of day)
        $votstdy[] = $items[0];
        setcookie("votings", implode(',', array_unique($votstdy)), strtotime('tomorrow'));
  } 
```

我已经注释掉了删除查询。您应该在将其投入生产之前对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:46:39.510

您的数据库结构似乎有点混乱，您有一个表格来计算每个项目的投票和一个表格来计算每个用户的投票。

您应该检查您的数据库结构以将这两个表合并到一个表中，其中包含：item、user、vote 字段。

因此，您可以根据需要记录每个用户对每个项目的每次投票，并最终发出 count() 或 sum() 请求以获取每个项目的总票数

# database - 在 Webmatrix 中获取数据库插入/更新的 @html.dropdownlist ID 值

> ID：12619270
> 
> 赞同：1
> 
> 时间：2012-09-27T10:28:11.323
> 
> 标签：database, razor, webmatrix, html-select

我已经使用 LINK to Objects 方法和 @html.dropdownlist Webmatrix 帮助器构建了一些下拉列表。这工作正常。

我想知道`how to pass / store the selected value in my database table`。

**在代码部分构建项目列表**

```
var titlesData = db.Query("SELECT TitleId, Name FROM Titles ORDER BY Name");
        titlesListItems = titlesData.Select(i => new SelectListItem {
        Value = i.TitleId.ToString(),
        Text = i.Name,
        Selected = i.TitleId == providerData.TitleId ? true : false
        }); 
```

**HTML 标记部分：**

```
@Html.DropDownList("titlesCombo","-- Veuillez sélectionner -- ",titlesListItems) 
```

**数据库更新命令（见???）**：

```
db.Execute("UPDATE Providers SET TitleId=@0 WHERE ProviderId=@1",???,providerId) 
```

我现在使用的方法是创建另一个变量：

```
var titleId = "";

if (!IsPost) {

    titleId = providerData.TitleId.ToString(); //providerData stores the SQL query result
}

if (IsPost) {

    var titleId = Request.Form[TitleID]
    db.Execute("UPDATE Providers SET TitleId=@0 WHERE ProviderId=@1",titleId,providerId)
} 
```

**不幸的是，数据没有得到更新**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:51:29.340

据我所知，您没有在代码中正确引用 DropDownList 助手。尝试使用以下代码：

```
var titleId = ""; 

if (!IsPost) { 
    titleId = providerData.TitleId.ToString();
} 

if (IsPost) { 
    titleId = Request.Form["titlesCombo"];
    db.Execute("UPDATE Providers SET TitleId=@0 WHERE ProviderId=@1",titleId,providerId);
} 
```

# extjs - ExtJS：在 Ext.grid.property.Grid 中显示模型

> ID：12619273
> 
> 赞同：5
> 
> 时间：2012-09-27T10:28:25.213
> 
> 标签：extjs

我想在属性网格中显示持久字段（在我的模型文件中定义的字段）。

![在此处输入图像描述](../Images/20faa180e4329b8b96d96c100b899171.png)

**属性网格：**

```
Ext.define('ATCOM.view.InspectorProperties', {
    extend : 'Ext.grid.property.Grid',
    alias : 'widget.inspectorProperties',
    cls : 'property-grid',
    height : 150,
    listeners : {
        beforerender : function() {
            // Rename the first column
            var cols = this.getView().getHeaderCt().getGridColumns();
            cols[0].setText("Property");
        },
        beforeedit : function(e) {
            // Read-only
            return false;
        }
    },
    source : {} // Start with no items
}); 
```

我在选择事件（在控制器中）中加载这样的项目，其中记录是我们的模型对象，getInfo() 是属性网格：

```
var source = {};
source.id = record.get('id');
source.start = record.get('start');
source.end = record.get('end');

this.getInfo().setSource(source); 
```

**模型：**

```
Ext.define('ATCOM.model.Shift', {
    extend : 'Ext.data.Model',
    fields : [ 'id', {
        name : 'start',
        type : 'date',
    }, {
        name : 'end',
        type : 'date',
    }, 'position', 'controller' ],
    hasMany : {
        model : 'ATCOM.model.ShiftAlloc',
        name : 'allocations'
    }
}); 
```

有没有更好的方法来解决这个问题，以便所有非关联字段（`allocations`在我的情况下除外）都会自动发送到属性网格？也可以读取字段`ATCOM.model.Shift.getFields()`并迭代那些检查`persistent:false;`以保留剩余的键，但是我如何从实例中获取类引用 - 例如，我如何`ATCOM.model.Shift`从它的一个实例中获取以便我可以调用获取字段（）？

编辑：

查找类名：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.Base-static-method-getName](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Base-static-method-getName)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:40:51.723

说 setSource(record.data) 可能有效。我现在只是在玩这个；它似乎显示了正确的信息，尽管您可能无法控制要启用编辑的字段的详细信息等。

# mysql - 如何使用 MySQL 语句替换 ' （引号）字符

> ID：12619274
> 
> 赞同：0
> 
> 时间：2012-09-27T10:28:24.403
> 
> 标签：mysql, sql, xml, atom-feed

我正在尝试使用 SQL 查询的结果集创建 XML 提要。其中一个字段包含 ' 字符，这会导致生成的 XML 文件出现错误。

如何替换 ' 字符。我读过一些建议类似的帖子

```
Replace(my_column,'''','') 
```

但这会引发语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:31:13.090

可能您正在寻找这样的东西：

```
UPDATE your_table
   SET your_column = REPLACE(your_column, '\'', '&apos;'); 
```

但话又说回来，我想知道为什么有必要在 DB 中而不是在输出代码中这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:31:29.287

它应该工作

```
select replace('abc''def','''','') 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/d41d8/2385)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:30:55.770

`&apos;`代替`'`. _ 这将起作用：

```
Replace(my_column,"'",'&apos;') 
```

# android - 是否可以在 Android 上实现 ssl 错误启动

> ID：12619288
> 
> 赞同：2
> 
> 时间：2012-09-27T10:29:14.380
> 
> 标签：android, https, ssl

根据 google chrome 团队日志，他们在 chrome 9 中实现了 Ssl 错误启动，并大大减少了 ssl 连接设置时间。我正在开发一个需要通过 https 连接与服务器通信的 android 应用程序，但是使用 https 连接时存在巨大的延迟问题。我很好奇是否有可能像谷歌在 chrome 浏览器中那样进行错误启动更改？我研究了 android http apis 和 apache httpclient apis，到目前为止还没有运气。

# android - 从android列表中的复选框中检索选定的数据

> ID：12619289
> 
> 赞同：2
> 
> 时间：2012-09-27T10:29:18.613
> 
> 标签：android, android-layout, android-listview, android-checkbox

如何从复选框列表中检索选定的数据？

我已经制作了一个列表并将 a`checkbox`放入列表中，现在我想从中检索选定的数据。我怎样才能做到这一点？

这是我的示例代码

```
public class PlanetsActivity extends Activity {

  private ListView mainListView;
  private Planet[] planets;
  private ArrayAdapter<Planet> listAdapter;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
        null, null, null);

    // Find the ListView resource.
    mainListView = (ListView) findViewById(R.id.mainListView);

    // When item is tapped, toggle checked properties of CheckBox and
    // Planet.
    mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
      @Override
      public void onItemClick(AdapterView<?> parent, View item,
        int position, long id) {
        Planet planet = listAdapter.getItem(position);
        planet.toggleChecked();
        PlanetViewHolder viewHolder = (PlanetViewHolder) item.getTag();
        viewHolder.getCheckBox().setChecked(planet.isChecked());
      }
    });

    // Create and populate planets.
    planets = (Planet[]) getLastNonConfigurationInstance();
    // planets = new Planet[10];
    // planets.Add("asdf");
    ArrayList<Planet> planetList = new ArrayList<Planet>();

    if (planets == null) {
      if (cur.getCount() > 0) {
        planets = new Planet[cur.getCount()] ;
        int i=0;
        while (cur.moveToNext()) {
          String id = cur.getString(cur
            .getColumnIndex(ContactsContract.Contacts._ID));
          String name = cur.getString(cur
            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

          //Toast.makeText(getApplicationContext(), name,
          //Toast.LENGTH_LONG).show();

          planets = new Planet[] { new Planet(name) };
          planetList.addAll(Arrays.asList(planets));

          //planets[i].setName(name);
          //planets[i].setChecked(false)

          if(Integer.
            parseInt(cur
              .getString(cur
              .getColumnIndex(ContactsContract
              .Contacts.HAS_PHONE_NUMBER))) > 0) {
                  // Query phone here. Covered next
          }
          i++;
        }
      }

      // planets = new Planet[] { new Planet("Mercury"),
      // new Planet("Venus"), new Planet("Earth"),
      // new Planet("Mars"), new Planet("Jupiter"),
      // new Planet("Saturn"), new Planet("Uranus"),
      // new Planet("Neptune"), new Planet("Ceres"),
      // new Planet("Pluto"), new Planet("Haumea"),
      // new Planet("Makemake"), new Planet("Eris") };
    }

    // Set our custom array adapter as the ListView's adapter.
    listAdapter = new PlanetArrayAdapter(this, planetList);
    mainListView.setAdapter(listAdapter);
}

/** Holds planet data. */
private static class Planet {
  private String name = "";
  private boolean checked = false;
  public Planet() {}

  public Planet(String name) {
    this.name = name;
  }

  public Planet(String name, boolean checked) {
    this.name = name;
    this.checked = checked;
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public boolean isChecked() {
    return checked;
  }

  public void setChecked(boolean checked) {
    this.checked = checked;
  }

  public String toString() {
    return name;
  }

  public void toggleChecked() {
    checked = !checked;
  }
}

/** Holds child views for one row. */
private static class PlanetViewHolder {
    private CheckBox checkBox;
    private TextView textView;

    public PlanetViewHolder() {
    }

    public PlanetViewHolder(TextView textView, CheckBox checkBox) {
        this.checkBox = checkBox;
        this.textView = textView;
    }

    public CheckBox getCheckBox() {
        return checkBox;
    }

    public void setCheckBox(CheckBox checkBox) {
        this.checkBox = checkBox;
    }

    public TextView getTextView() {
        return textView;
    }

    public void setTextView(TextView textView) {
        this.textView = textView;
    }
}

/** Custom adapter for displaying an array of Planet objects. */
private static class PlanetArrayAdapter extends ArrayAdapter<Planet> {

    private LayoutInflater inflater;

    public PlanetArrayAdapter(Context context, List<Planet> planetList) {
        super(context, R.layout.simplerow, R.id.rowTextView, planetList);
        // Cache the LayoutInflate to avoid asking for a new one each time.
        inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // Planet to display
        Planet planet = (Planet) this.getItem(position);

        // The child views in each row.
        CheckBox checkBox;
        TextView textView;

        // Create a new row view
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.simplerow, null);

            // Find the child views.
            textView = (TextView) convertView
                    .findViewById(R.id.rowTextView);
            checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);

            // Optimization: Tag the row with it's child views, so we don't
            // have to
            // call findViewById() later when we reuse the row.
            convertView.setTag(new PlanetViewHolder(textView, checkBox));

            // If CheckBox is toggled, update the planet it is tagged with.
            checkBox.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    CheckBox cb = (CheckBox) v;
                    Planet planet = (Planet) cb.getTag();
                    planet.setChecked(cb.isChecked());
                }
            });
        }
        // Reuse existing row view
        else {
            // Because we use a ViewHolder, we avoid having to call
            // findViewById().
            PlanetViewHolder viewHolder = (PlanetViewHolder) convertView
                    .getTag();
            checkBox = viewHolder.getCheckBox();
            textView = viewHolder.getTextView();
        }

        // Tag the CheckBox with the Planet it is displaying, so that we can
        // access the planet in onClick() when the CheckBox is toggled.
        checkBox.setTag(planet);

        // Display planet data
        checkBox.setChecked(planet.isChecked());
        textView.setText(planet.getName());

        return convertView;
    }

}

public Object onRetainNonConfigurationInstance() {
    return planets;
}
} 
```

我想将选定的数据发送到下一个活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:47:38.650

您只需按照您的意图传递您的行星阵列，阵列上的每个 bean 都有一个选定的状态！但是，要做到这一点，在此之前，Planet 对象需要实现 Parcelable。

# c# - IPv6 和 IPv4 的正则表达式 (.Net Regex)

> ID：12619293
> 
> 赞同：1
> 
> 时间：2012-09-27T10:29:40.123
> 
> 标签：c#, devexpress

> **可能重复：**
> [IP 地址的正则表达式](https://stackoverflow.com/questions/9165922/regex-for-ip-address)

有一个正则表达式匹配 IPv6 **AND** IPv4 吗？
或者，只是 IPv6 ？

用于 DevExpress UI 控件中的验证掩码。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:33:27.233

我知道您要求使用正则表达式，但您可能要考虑使用该`System.Net.IPAddress.TryParse`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:31:58.520

IP4 看起来像 "(0?0?[1-9]|0?[1-9][0-9]|1[0-9][0-9]|2[0-4][ 0-9]|25[0-4])(\.(0?0?[0-9]|0?[1-9][0-9]|1[0-9][0-9] |2[0-4][0-9]|25[0-4])){2}(\.(0?0?[1-9]|0?[1-9][0-9] |1[0-9][0-9]|2[0-4][0-9]|25[0-4]))"

这也允许 0，例如 010.000.000.001 ..（因为我们这个地方的某个人认为这样做很聪明）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:35:06.260

正则表达式真的很长 =) ip4 的第一行，其余的是 ip6

```
((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|
((\A([0-9a-f]{1,4}:){1,1}(:[0-9a-f]{1,4}){1,6}\Z)|
(\A([0-9a-f]{1,4}:){1,2}(:[0-9a-f]{1,4}){1,5}\Z)|
(\A([0-9a-f]{1,4}:){1,3}(:[0-9a-f]{1,4}){1,4}\Z)|
(\A([0-9a-f]{1,4}:){1,4}(:[0-9a-f]{1,4}){1,3}\Z)|
(\A([0-9a-f]{1,4}:){1,5}(:[0-9a-f]{1,4}){1,2}\Z)|
(\A([0-9a-f]{1,4}:){1,6}(:[0-9a-f]{1,4}){1,1}\Z)|
(\A(([0-9a-f]{1,4}:){1,7}|:):\Z)|
(\A:(:[0-9a-f]{1,4}){1,7}\Z)|
(\A((([0-9a-f]{1,4}:){6})(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3})\Z)|
(\A(([0-9a-f]{1,4}:){5}[0-9a-f]{1,4}:(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3})\Z)|
(\A([0-9a-f]{1,4}:){5}:[0-9a-f]{1,4}:(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\Z)|
(\A([0-9a-f]{1,4}:){1,1}(:[0-9a-f]{1,4}){1,4}:(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\Z)|
(\A([0-9a-f]{1,4}:){1,2}(:[0-9a-f]{1,4}){1,3}:(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\Z)|
(\A([0-9a-f]{1,4}:){1,3}(:[0-9a-f]{1,4}){1,2}:(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\Z)|
(\A([0-9a-f]{1,4}:){1,4}(:[0-9a-f]{1,4}){1,1}:(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\Z)|
(\A(([0-9a-f]{1,4}:){1,5}|:):(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\Z)|
(\A:(:[0-9a-f]{1,4}){1,5}:(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\Z)
) 
```

# javascript - 通过 HTML iphone 4s 远程激活条码扫描器

> ID：12619295
> 
> 赞同：0
> 
> 时间：2012-09-27T10:29:42.420
> 
> 标签：javascript, iphone, html, barcode

是否可以从 Web 服务器中的 HTML 文件激活条形码扫描仪？如果 HTML 文件位于我的设备中，我可以激活它，但如果它位于 Web 服务器中，它将无法启动。

我认为问题出在

> 脚本类型="text/javascript" charset="utf-8" src="barcodescanner.js"

，但我找不到我应该为源代码在 iPhone 上运行的内容。

如果有办法远程运行它，请告诉我。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:32:08.300

Apple 不允许 webApp 访问相机。唯一的方法是拥有一个原生应用程序。您可以使用 Titanium Appcelerator 使用 Javascript 构建本机应用程序。然后您就可以访问相机了。

# iphone - 应用程序未在 iPod 4.1.1 上运行，显示“完成运行”

> ID：12619296
> 
> 赞同：0
> 
> 时间：2012-09-27T10:29:47.617
> 
> 标签：iphone, xcode, ipod

应用程序未在 iPod 4.1.1 上运行 显示“完成运行”。甚至应用程序也可以在 iPad 5.0 上运行。为什么 ？

目标属性中的体系结构设置为标准 (armv7)。我必须添加 armv6 架构并且它有效

我的 xcode 版本是 4.2.1

有什么建议吗？

# math - 正切公式

> ID：12619299
> 
> 赞同：0
> 
> 时间：2012-09-27T10:29:54.857
> 
> 标签：math, matrix, trigonometry

我有这个公式

```
B = tan(atan(A) + C) 
```

其中 A 是输入，B 是输出，C 是常数。问题是 sin、cos 和 tan 函数的计算量很大，而且当计算为 4 字节浮点数时，公式的精度损失相当大。我正在优化我的代码，所以即使计算总数高出几倍，有什么方法可以避免使用这些函数？

进一步背景：数字 A、B 和 C 是二维平面上 3 个点的 x/y 坐标的比率

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:52:52.127

根据[Wolfram Alpha](http://www.wolframalpha.com/input/?i=tan%5Barctan%5BA%5D%2bC%5D)，`tan(atan(A)+C)`可以写为`(A+tan(C))/(1-A*tan(C))`.

您可以从切线和公式中轻松地手动得出：

> tan(a + b) = (tan a + tan b)/(1 - tan a tan b)。

如果`tan`您的数学库中的实现很慢或不准确，则可能存在更快或更精确的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:12:16.823

我会假设你的公式是正确的。Mark 的评论基本上归结为 C 必须具有角度单位才能使公式有意义的想法，但如果 C 是比率，那么它将没有适当的单位。马克有一个有效的问题。

最后，您仍然需要计算切线，但您可以做一些事情来提供一些帮助。

首先，对[sum 的切线](http://en.wikipedia.org/wiki/List_of_trigonometric_identities)应用一个简单的三角恒等式。这与 tan(atan(A)) = A 相结合，将您的公式简化为

```
B = (A + tan(C))/(1 - A*tan(C)) 
```

因此，您仍然需要计算一个切线，即 C 的切线。（因此预先计算 tan(C) 一次。）没有什么能解决这个问题。

但是，有一些方法可以比 sin(C)/cos(C) 更有效地计算切线。例如，直接级数近似可能更好。或者有一个使用 versine 级数的技巧，它本身比切线级数计算效率更高。对于小角度，它可以快速收敛。您可以使用该 versine 的范围缩小技巧来确保小角度。其他技巧也存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:10:20.800

`atan(A) = atan(x_a/y_a)`对于某些点是矢量`(x_a,y_a)`和 Oy 之间的角度。因为C是一个常数，你可以预先计算一些`c=(x_c,y_c)`单位长度的向量，并以角度C倾斜Oy。然后cos(atan(A)+C)可以表示为这些向量的内积除以a的长度。从 cos 中，您可以使用主要身份获得棕褐色。最后得到：

```
B = sqrt((x_a^2 + y_a^2)/(x_a*x_c + y_a*y_c)^2 - 1) 
```

这可能更有效。小心标志。

# excel - 从 VLOOKUP 中添加总和？

> ID：12619303
> 
> 赞同：1
> 
> 时间：2012-09-27T10:30:07.413
> 
> 标签：excel

我有3列如下：

```
Boolean          Value          Date
Yes               £3000         01-Jan-2012
No                £3000         01-Jan-2012
No                £3000         01-Nov-2012 
```

基本上我只需要查看该表并得出布尔值设置为否的总值，但是只取那些月份等于或小于计算机时间设置的当前月份的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:54:15.163

哪个版本的 Excel？在 Excel 2007 及更高版本中尝试 SUMIFS，它允许您对多个条件求和，即

`=SUMIFS(B2:B10,A2:A10,"No",C2:C10,"<="&TODAY())`

我使用了单元格引用，但您可以在它们的位置使用命名范围，如下所示：

`=SUMIFS(Value,Boolean,"No",Date,"<="&TODAY())`

或在早期版本的 Excel 中，您可以像这样使用 SUMPRODUCT：

`=SUMPRODUCT(B2:B10,(A2:A10="No")*(C2:C10<=TODAY()))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:10:06.450

使用该[`DSUM`](http://office.microsoft.com/en-us/excel-help/dsum-HP005209069.aspx)功能。

标准范围是

```
Boolean         Month Check
No              =MONTH(C2) < X 
```

其中`C2`是 column 中的第一个数据单元格`Date`。

# perl - 在 Perl 中取消引用散列的散列

> ID：12619304
> 
> 赞同：2
> 
> 时间：2012-09-27T10:30:07.890
> 
> 标签：perl, hash

我正在尝试收集我存储在哈希哈希中的值，但我对 perl 是如何做到这一点感到有点困惑。所以，我创建我的哈希哈希如下：

```
 my %hash;
 my @items;

 #... some code missing here, generally I'm just populating the @items list 
 #with $currentitem items

 while (<FILE>) { #read the file

         ($a, $b) = split(/\s+/,$_,-1);
         $hash{$currentitem} => {$a => $b};
         print $hash{$currentitem}{$a} . "\n";#this is a test and it works
} 
```

上面的代码似乎工作。现在，重点是：我有一个数组@items，它保留了$currentitem 的值。我想做这样的事情：

```
@test = keys %hash{ $items[$num] }; 
```

这样我就可以获得特定项目的所有键/值对。我已经尝试了上面的代码行，以及

```
 while ( ($key, $value) = each( $hash{$items[$num]} ) ) {

      print "$key, $value\n";
 } 
```

我什至尝试按如下方式填充哈希：

```
$host{ "$currentcustomer" }{"$a"} => "$b"; 
```

根据我遇到的各种在线资源，这似乎更正确。但是，我仍然无法访问该哈希中的数据......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:56:09.410

你说这行得通，我很困惑：

```
$hash{$currentitem} => {$a => $b}; 
```

那不应该工作（并且对我不起作用）。`=>`运算符是一种特殊的逗号，而不是赋值（参见perlop [）](http://perldoc.perl.org/perlop.html)。此外，右边的结构产生了一个新的匿名散列。使用它，一个新的匿名散列将覆盖您尝试添加的每个元素的旧散列。您将永远只有一个元素`$currentitem`。

这是您要分配的内容：

```
$hash{$currentitem}{$a} = $b; 
```

以下是获取密钥的方法：

```
keys %{ $hash{ $items[$num] } }; 
```

我建议阅读[Perl 参考资料](http://perldoc.perl.org/perlref.html)以更好地处理这个问题。语法起初可能有点棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:49:07.530

长答案在[perldoc perldsc](http://perldoc.perl.org/perldsc.html)中。

简短的回答是：

```
keys %{ $expr_producing_hash_ref }; 
```

在你的情况下，我相信这是

```
keys %{ $hash{$items[$num]} }; 
```

# c# - 如何禁用wpf datagrid的某些按钮

> ID：12619307
> 
> 赞同：1
> 
> 时间：2012-09-27T10:30:17.380
> 
> 标签：c#, wpf

我有一个 WPF 数据网格。其中有一列包含编辑按钮，因此如何以编程方式启用或禁用数据网格的某些按钮，例如

```
 <DataGrid AutoGenerateColumns="True" Height="80" Margin="2,-4,8,0" Name="grdQHDRShowAll" VerticalAlignment="Top" ItemsSource="{Binding}" IsReadOnly="True" SelectionChanged="grdQHDRShowAll_SelectionChanged">
                                        <DataGrid.Columns>

                                            <DataGridTemplateColumn>
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button Click="Qhdr_CreateOrder_Click"  CommandParameter="{Binding Path=QuoteNo}" >Create Order</Button>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid> 
```

上面的代码有一个带按钮的列，所以我想知道如何禁用行中的某些按钮取决于其他列数据，例如第二列的真假值，如果第二列第一行的数据为真，那么第一列第一行按钮应该是启用方式取决于其他列的任何列如何启用/禁用数据网格的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:06:00.170

如果您使用 MVVM 模式，您可以将按钮的 IsEnabled 属性绑定到 VM 的布尔属性，或者使用转换器将其转换为布尔类型：

```
<Button IsEnabled="{Binding Path=BoolProp}"/> 
```

如果没有，您可以使用 elementbinding 将其绑定到元素：

```
<Button IsEnabled="{Binding ElementName=CellName, Path=BoolProp}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:25:00.177

```
 <Button Content="Approve" VerticalAlignment="Center" Height="23" Width="90" FontWeight="Bold" Command="{Binding ApprovedCommand}" Margin="5,0,0,0" IsEnabled="{Binding IsEnabled,Mode=TwoWay}"/> 
```

在 MVVM 中，您创建一个属性并根据条件使 IsEnabled 为 true 或 false

# javascript - 跨平台桌面应用程序的最佳 javascript 引擎

> ID：12619308
> 
> 赞同：2
> 
> 时间：2012-09-27T10:30:18.817
> 
> 标签：javascript, c++, html, qt

我将创建一个桌面应用程序，以 C++ 作为后端，Html/JS 作为 UI。目前，它只是由 QtWebKit 跨平台托管，也许将来，可能会在线托管。

QtWebKit 是一个好方法吗？接口是信号/槽，不知道移植到网站时是否容易移植到其他javascript引擎？

对此有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:19:34.660

我已经在跨平台 C++ 应用程序（32 位和 64 位 Windows 和 Ubuntu）中成功使用了 Mozilla 的 SpiderMonkey，并且效果很好。不过，我不太了解您的问题详细信息/描述...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:58:11.300

如果您保持每个插槽“简单”（就像字面上只是在实例化的业务逻辑类中处理您的业务逻辑来做 UI 工作），那么稍后将其移植到 Web 应该是微不足道的。

如果您要尝试将其移植到网络上，我建议您不要这样做。原因是您将不得不以服务器语言（php、.NET、python、RoR 等）重新实现后端（目前将在您的应用程序中用 c++ 完成）。

如果您正在为 Web 界面和跨平台 Qt c++ 应用程序寻找一种“简单”的方式来完成这项工作，我希望在服务器应用程序上完成所有业务逻辑，同时仍然使用 QtWebkit 作为你的前端。使用 Qt 执行 HTTP 请求（GET 和 POST）和获取/解析 json/html 是微不足道的。

这将允许您非常轻松地用任何 JS 事件驱动框架（我使用 jQuery）替换插槽机制。这也不会强迫您“移植”后端逻辑。

如果您也考虑采用这种方式，这还具有能够用于移动应用程序的额外好处。

# sql-server - SQL Server 插入链接服务器

> ID：12619314
> 
> 赞同：1
> 
> 时间：2012-09-27T10:30:25.377
> 
> 标签：sql-server, sql-server-2008, linked-server

在我控制错误的过程中`TRY` `CATCH`，但在插入链接服务器时不会运行以处理此错误，因为 try catch 未运行。

我该如何处理这个错误？

例子：

```
insert into linkedserver.database.dbo.table values ('value1','value2') 
```

如果服务器离线我有连接错误，`SQLCLI`并且当链接服务器离线时无法控制此错误插入本地，当服务器返回在线状态后，通过另一个过程将数据放入远程服务器。

谢谢

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:33:57.627

如果您将代码包装到 EXEC 语句中，您将可以访问该错误。

```
like exec( 'insert into....') 
```

# android - 出于安全目的在应用程序中使用安卓锁屏

> ID：12619316
> 
> 赞同：0
> 
> 时间：2012-09-27T10:30:35.743
> 
> 标签：android, lockscreen

我是 android 新手，我正在尝试制作一个基于安全的应用程序，我想在其中创建在单击列表视图项目后出现的 android 锁屏。
我是否应该使用与可用相同的锁屏代码并进行一些更改？
我试图搜索我的问题，但找不到任何东西。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:05:50.613

请参阅[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

# delphi - 加载前刷新标签标题？

> ID：12619319
> 
> 赞同：2
> 
> 时间：2012-09-27T10:30:46.697
> 
> 标签：delphi

我有一段代码：

```
setEnableControls(false);
lblLoading.Caption:='Loading tree contents, please wait.';
someBigLoading(); 
setEnableControls(true);
lblLoading.Caption:=''; 
```

问题是，标签的标题文本直到“大加载”完成后才会刷新。有没有办法让程序在执行下一个命令之前处理消息队列中的消息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T10:39:10.403

只要打电话`lblLoading.Update`。这将更新标签，并且不会引入任何可能因在代码中间处理消息而引发的问题。

# asp.net - PC 区域和语言设置在 .Net 中被忽略

> ID：12619320
> 
> 赞同：2
> 
> 时间：2012-09-27T10:30:46.640
> 
> 标签：asp.net, .net, datetime, formatting, region

我知道我并不孤单，但我还没有找到解决方案。

我的 PC 区域和语言设置都是英语（英国），但 .Net 使用美国格式的日期和货币。

我检查了机器配置和网络配置，没有全球化设置，我不想添加它们。

我错过了其他设置吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T10:36:54.197

您使用了 ASP.NET 标记：我怀疑您是在没有自己的配置文件的身份下运行应用程序，并且它使用的是存储在注册表中“HKEY_USERS.Default\Control Panel\International”下的默认区域设置。

这些不一定与交互式用户的区域设置相同。

您可以执行以下两项操作之一：

*   向您的 web.config添加一个`<globalization>`元素。这可能是最好的解决方案，因为它使您的应用程序独立于托管服务器的区域设置。

*   使用控制面板为当前用户和默认用户配置文件设置您想要的区域设置。具体步骤取决于您使用的 Windows 版本。

# scala - Scala - 理解涉及柯里化的代码片段

> ID：12619336
> 
> 赞同：4
> 
> 时间：2012-09-27T10:31:31.873
> 
> 标签：scala

我是 scala 的新手，我在理解 currying 时遇到了一些麻烦 - 我现在正在通过编写简单的函数来练习，需要澄清以下内容

```
 def mul (a: Int) (b: Int): Int =
  {
  {
  a * b
  }
  } 
```

上面的函数定义和下面的一样吗？

```
def mul: Int => Int => Int = {
  (a: Int) =>
    {
      (b: Int) =>
        a * b
    }
} 
```

从语法我可以解释`mul`为一个接受整数的函数，并返回一个接受整数并返回整数的函数。但我不确定我的解释是否真的正确。关于上述示例或柯里化函数语法的任何解释都会非常有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T11:31:37.463

你的解释是正确的。但你不需要所有这些牙套。

```
def mul(a: Int)(b: Int) = a*b

val mulAB = (a: Int) => { (b: Int) => a*b }   // Same as mul _
val mul5B = (b: Int) => 5*b                   // Same as mulAb(5) or mul(5) _ 
```

通常，您可以将具有多个参数的任何函数重写为柯里化链，其中每个参数生成一个函数，该函数需要少一个参数，直到最后一个实际产生值：

```
f(a: A ,b: B ,c: C, d: D): E  <===>  A => B => C => D => E 
```

在 Scala 中，自然分组是按*参数块*，而不是按单个参数，所以

```
f(a: A)(b: B, c: C)(d: D): E  <===>  A => (B,C) => D => E 
```

# asp.net-mvc-3 - 具有列表验证的 ASP.NET MVC3 模型

> ID：12619338
> 
> 赞同：0
> 
> 时间：2012-09-27T10:31:33.030
> 
> 标签：asp.net-mvc-3, validation, model

给定模型：

```
 public class RegisterModel
    {
        <!-- some properties -->

        [Required]
        public Dictionary<DayOfWeek, bool> DaysAtWork { get; set; } 

        public RegisterModel()
        {
            DaysAtWork = new Dictionary<DayOfWeek, bool>
                         {
                             {DayOfWeek.Monday, true},
                             {DayOfWeek.Tuesday, true},
                             {DayOfWeek.Wednesday, true},
                             {DayOfWeek.Thursday, true},
                             {DayOfWeek.Friday, true}
                         };
        }
    } 
```

控制器：

```
 public ActionResult Register()
    {
        var model = new RegisterModel();

        return View(model);
    }

    [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
    <!-- and at these point in model state property for DaysAtWork 
    Dictionary is null and the whole model is invalid - and property in model 
    parameter is also null -->
        if (ModelState.IsValid)
        {
            <!-- some logic here -->    
        }    
        return View(model);
    } 
```

并查看：

```
 <!-- some code -->
    @using (Html.BeginForm()) {
    @Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the errors and try again.")
    <div>
        <fieldset>
            <legend>Account Information</legend> 

            <div>Days at work</div>

            <div>
                Monday @Html.CheckBoxFor(m => m.DaysAtWork[DayOfWeek.Monday])
            </div>
            <div>
                Tuesday @Html.CheckBoxFor(m => m.DaysAtWork[DayOfWeek.Tuesday])
            </div>
            <div>
                Wednesday @Html.CheckBoxFor(m => m.DaysAtWork[DayOfWeek.Wednesday])
            </div>
            <div>
                Thursday @Html.CheckBoxFor(m => m.DaysAtWork[DayOfWeek.Thursday])
            </div>
            <div>
                Friday @Html.CheckBoxFor(m => m.DaysAtWork[DayOfWeek.Friday])
            </div>

            <p>
                <input type="submit" value="Register" />
            </p>
        </fieldset>
    </div>
    } 
```

我在尝试注册用户时遇到问题，因为在模型中 DaysAtWork 属性设置为 null。如何告诉 asp 使用在 Register() HttpGet 方法中创建的模型？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:22:49.770

如果您制作一个名为“Week”或类似名称的模型：

```
public Week(){
public int Id;
public int AccountId;
public bool Monday;
public bool ...;
public bool Friday;
} 
```

并在您的 Registermodel 中添加对此的引用。

希望这可以帮助！

# matlab - UI控件回调

> ID：12619340
> 
> 赞同：0
> 
> 时间：2012-09-27T10:31:37.603
> 
> 标签：matlab, user-interface, matlab-guide

我想用一个Bushbutton（Bushbutton）制作一个主GUI。当按下 pb1 => 打开一个带有按钮（Upb1）、一个编辑（Uet1）和一个文本（Ust1）的图形（图）。我想要：当按下 Upb1 时，Ust1 显示 Uet1 的数量（同样，当改变 Uet1 并按下 Upb1 时，Ust1 改变）。

我写了这段代码但没有工作（`var1`未定义）。我该怎么办？

```
function Bushbutton_Callback(hObject, eventdata, handles)       % main
      Fig=figure('MenuBar','none');
      Ust1= uicontrol(Fig,...
               'Position',[50 60 80 20 ],...
               'Style','text')
      Uet1= uicontrol(Fig,...
              'Position',[50 90 80 20 ],...
              'Style','edit',...
              'string',10,...
              'callback',@printNum)
     Upb1= uicontrol(Fig,...
              'Position',[50 30 80 20 ],...
              'Style','pushbutton',...
              'callback',@printNum)

function printNum(hObject, eventdata,handles)         

    var1=get(Uet1,'string')
    set(Ust,'string',var1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:59:51.040

您需要更改第二个函数的范围，以便它可以访问变量 Uet1 和 Ust1。这意味着，您需要在 Bushbutton_Callback 的范围内实现它（可能希望将其称为 Pushbutton_Callback ...）

```
function Bushbutton_Callback(hObject, eventdata, handles)
      Fig=figure('MenuBar','none');
      Ust1= uicontrol(Fig,...
           'Position',[50 60 80 20 ],...
           'Style','text')
      Uet1= uicontrol(Fig,...
          'Position',[50 90 80 20 ],...
          'Style','edit',...
          'string',10,...
          'callback',@printNum)
     Upb1= uicontrol(Fig,...
          'Position',[50 30 80 20 ],...
          'Style','pushbutton',...
          'callback',@printNum)

    function printNum(hObject, eventdata,handles)         
        var1=get(Uet1,'string')
        set(Ust1,'string',var1)
    end

end 
```

# google-apps-script - 如何使用 Google Apps Script for Spreadsheet 在单元格中动态创建按钮？

> ID：12619342
> 
> 赞同：3
> 
> 时间：2012-09-27T10:31:41.087
> 
> 标签：google-apps-script, google-sheets

我想在电子表格的一组行上添加按钮，每个按钮都将使用该行的值调用一个函数。

这可以通过 Google Apps 脚本/电子表格实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:04:12.147

现在 Google 电子表格和 GAS 都不支持单元格中的控件。这里有一个[类似的问题](https://stackoverflow.com/questions/6876819/)和一个可能的解决方法。

# sql - 在单个表中选择单独的 2 个用户组？

> ID：12619344
> 
> 赞同：1
> 
> 时间：2012-09-27T10:31:54.030
> 
> 标签：sql, ms-access

我有一个这样的表，我想在 25 个用户中选择 12 个组，但用户不能在任一列中出现多次。这是为了我的研究工作。

```
userx   usery   final
user1   user9   0
user2   user21  0
user3   user20  1.86603810646243E-02
user4   user14  0
user5   user13  0
user6   user12  0
user7   user11  0
user8   user10  0
user9   user23  5.2301255230118E-03
user10  user12  5.13300861745978E-02
user11  user15  1.6096147655314E-03
user12  user19  2.1337126600292E-03
user12  user22  2.1337126600292E-03
user13  user18  3.3259423503309E-03
user14  user21  7.657805491741E-04
user15  user16  5.4939136055145E-03
user16  user21  5.3359468583246E-03
user17  user18  1.49153302680261E-02
user18  user21  0.004619445666522
user19  user22  0
user20  user24  2.6088701585401E-03
user21  user23  2.01673460630756E-02
user22  user23  0.05878423513694
user23  user24  2.21079691516702E-02
user24  user25  4.57905347028916E-02 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:02:03.633

我认为这就是你想要的：

```
SELECT top 12 u.userx, u.usery
FROM usergroups u
WHERE u.usery not in (
    select top 12 userx 
    from usergroups x 
    order by x.userx,x.usery)
ORDER BY u.userx, u.usery; 
```

这将选择 userx 列中未包含 usery 的 12 条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:32:52.203

```
select distinct userx, usery
from your_table 
```

# string - BSTR 和字符串

> ID：12619348
> 
> 赞同：2
> 
> 时间：2012-09-27T10:32:06.833
> 
> 标签：string, visual-c++, com, bstr

```
BSTR DoSOmething()
{
   return L"";
} 
```

或者可以将 TCHAR * 传递给以 BSTR 作为输入参数的 API。

是否可以通过return语句将wchar_t字符串转换为BSTR。会导致一些内存损坏吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:47:14.333

不，这是不行的，因为一些 API 不仅需要一个`WCHAR*`指针，它`BSTR`也是，而是一个`BSTR`带有长度信息的真实指针。仍然以这种方式投射可能通常效果很好，这可能会产生误导。

关于 BSTR 的一切：[Eric 的 BSTR 语义完整指南](http://blogs.msdn.com/b/ericlippert/archive/2003/09/12/52976.aspx)。

那里的相关引述：

> 2) 必须使用 SysAlloc* 系列函数分配和释放 BSTR。PWSZ 可以是堆栈中的自动存储缓冲区，也可以使用 malloc、new、LocalAlloc 或任何其他内存分配器分配。
> 
> 3) BSTR 是固定长度的。PWSZ 可以是任意长度，仅受其缓冲区中有效内存量的限制。
> 
> 4) BSTR 总是指向缓冲区中的第一个有效字符。PWSZ 可以是指向字符串缓冲区中间或结尾的指针。

# php - PHP：PEAR 邮件消息错误

> ID：12619350
> 
> 赞同：2
> 
> 时间：2012-09-27T10:32:07.013
> 
> 标签：php, email, smtp, pear

我可以通过此代码发送电子邮件（网址：http://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page）

但错误显示如下...

> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 365 行 /Users/abc/pear/share/pear/Mail/smtp.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 450 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 467 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 474 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 517 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 521 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 376 行 /Users/abc/pear/share/pear/Mail/smtp.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 628 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 809 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 813 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 821 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 825 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 829 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 834 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 656 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 249 行 /Users/abc/pear/share/pear/Mail/smtp.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 285 行 /Users/abc/pear/share/pear/Mail/smtp.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 952 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 955 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 Mail_RFC822::parseAddressList()，假设 $this 来自第 253 行 /Users/abc/pear/share/pear/Mail.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 982 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 985 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 1063 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 1066 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 1126 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 1136 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 1141 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 491 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 265 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 494 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 PEAR::isError()，假设 $this 来自第 497 行 /Users/abc/pear/share/pear/Net/SMTP.php 中的不兼容上下文
> 
> 严格标准：非静态方法 PEAR::isError() 不应在第 27 行的 /Applications/MAMP/htdocs/p/testEmail.php 中静态调用

消息发送成功！

在 php.ini 文件中，我还将错误报告级别更改为

“error_reporting = E_ALL ^ E_STRICT”

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:33:31.407

首先，您要告诉 PHP 显示所有错误和严格的标准违规行为。要忽略严格标准（非致命），请将您的错误报告级别更改为

```
 // PHP.INI
 error_reporting=E_ERROR^E_PARSE

 //or better, inline with error_reporting()
 error_reporting(E_ERROR | E_PARSE); 
```

错误的根源是 PEAR 的邮件类定义。我也在使用 Mac 服务器和 PEAR。它是多封电子邮件的更好解决方案，但是，它会引发严格标准错误。你可以无视。

在您的 send() 调用之后，您可能有这行代码。

```
 if (PEAR::isError($mail_object)) {print($mail_object->getMessage());} 
```

我更喜欢去掉这条线，而是使用 try/catch/exception。

我会通过对您的 PHP.INI 文件或内联（最佳选择）的错误报告修改之一来更改您的错误报告级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T11:12:06.950

迟到总比不到好。检查这个答案：[https ://stackoverflow.com/questions/19248503/non-static-method-peariserror-should-not-be-call-statically?r=SearchResults&s=1|114.7471](https://stackoverflow.com/questions/19248503/non-static-method-peariserror-should-not-be-called-statically?r=SearchResults&s=1%7C114.7471)

您可以使用`(new PEAR)->isError($variable)`，`is_a($obj, 'PEAR_Error')`但最好升级您的代码并使用更现代的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T14:00:24.830

如果您在 cPanel 服务器上，请进入您的 PEAR 包并确保您已更新您的 Net Server 和 SMTP 包。您应该安装 net_socket2 和 net_smtp2 包。这解决了我升级到 PHP 5.6 后的问题。

# php - 带有获取表单和验证码数据的 PHP CURL

> ID：12619354
> 
> 赞同：0
> 
> 时间：2012-09-27T10:32:13.357
> 
> 标签：php, forms, curl, captcha, send

我想用 curl 访问这个网站：[http ://www.ttrehber.turktelekom.com.tr/trk-wp/IDA2](http://www.ttrehber.turktelekom.com.tr/trk-wp/IDA2)

我只会输入姓名、姓氏和安全代码数据。

我的问题/问题是：

1- 我将手动输入验证码数据，但我必须在检索图像数据的同时访问该页面。所以我不能预先输入代码。但是我无法单独访问该页面，因为代码每次都会更改。所以我必须访问页面，将验证码数据发送给自己（我已经介绍过）并将响应返回到 curl 表单数据。

2- 表单是 GET 表单，它使用 javascript 发送数据。'BUL' 图像使用 javascript 代码发送表单：`"javascript:DoSearch()"`

```
function DoSearch() {
  with ( document.sForm )
  {
    if ( CheckInput() ) // bcp ok
    {
        ACTION.value="search";
    submit();
    }
  } // with
} 
```

我怎样才能通过 PHP curl 做到这一点？

提前致谢，

# javascript - jQuery防止复选框检查嵌套在另一个DIV中

> ID：12619356
> 
> 赞同：0
> 
> 时间：2012-09-27T10:32:22.610
> 
> 标签：javascript, jquery, html, checkbox, click

我已经查看并尝试了有关此主题的许多答案，但似乎找不到有效的解决方案。我可能会遗漏一些明显的东西，在这种情况下我很抱歉，但这是我的问题：

我有一个嵌套在 DIV 元素中的复选框，这个 DIV 元素附加了一个 jQuery click 事件，然后检查复选框是否被选中，然后选中/取消选中它。根据它是否已被选中/取消选中，然后将变量发送到 PHP 脚本以添加到会话变量中。

当它是已单击的 DIV 时，这一切正常，但是当单击复选框时，我认为会发生一些冒泡，因为它每次都会触发取消选中复选框的事件。我尝试使用`stopPropogation();`并附`preventDefault();`加到复选框单击事件，但无济于事。

这是一些示例代码，可以尝试使这一点更清晰：

**复选框 HTML 代码：**

```
<div class='bundle_offer' id='bundle_offer_0'>
    <input type="checkbox" />
</div> 
```

**点击功能：**

```
// Click function on bundle offer div to add booster
$(".bundle_offer").click(function (event) {

    // IF its not the checkbox clicked, send over the div id
    if (event.target.type !== 'checkbox') {

        var bundle_offer_div_id = "#"+this.id;
        bundle_offer_click(bundle_offer_div_id);
    }
    // ELSE find div id and send it
    else{
        var bundle_offer_div_id = $(this).closest(".bundle_offer").attr("id");
        bundle_offer_div_id = "#"+bundle_offer_div_id;
        bundle_offer_click(bundle_offer_div_id);
    }
}); // end bundle offer click function 
```

该`bundle_offer_click`函数只需获取单击的 DIV 的 id，找到复选框，选中/取消选中它，然后通过 AJAX 将适当的变量发送到 PHP 脚本。

**编辑：**

我设法通过稍微移动逻辑来解决问题，这是我将其更改为：

```
// Click function on bundle offer div to add booster
$(".bundle_offer").mouseup(function (event) {

    // Get whether checked or not
    var isChecked = $(this).find('input').is(':checked');

    // IF its not the checkbox clicked
    // check/uncheck
    // send over the div id
    if (event.target.type !== 'checkbox') {
        if(isChecked == false){
            // Check
            $(this).find('input').attr('checked',true);
        }
        else{
            // Uncheck
            $(this).find('input').attr('checked',false);
        }
        var bundle_offer_div_id = "#"+this.id;
        bundle_offer_click(bundle_offer_div_id, isChecked);
    }

    // ELSE find div id and send it
    else{   
        var bundle_offer_div_id = $(this).closest(".bundle_offer").attr("id");
        bundle_offer_div_id = "#"+bundle_offer_div_id;
        bundle_offer_click(bundle_offer_div_id, isChecked);
    }
}); // end bundle offer click function 
```

主要区别在于使用该`mouseup`函数并执行逻辑来检查/取消选中该 mouseup 函数中的复选框而不是那个`bundle_offer_click`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:41:16.253

如果您单击复选框浏览器会自动选中/取消选中复选框。您不需要使用 JavaScript 执行此操作。

我相信`bundle_offer_click`你在里面选中/取消选中复选框。您应该传递一个标志作为 `bundle_offer_click`标志值中的第二个参数应该取决于单击的元素。并在内部`bundle_offer_click`基于标志对复选框采取行动。

代码：

```
function bundle_offer_click(id, isCheckBoxClicked){
    if(isCheckBoxClicked){

       //do nothing on check box
     }
} 
```

# ipad - 将工具栏添加到 UISplittview 的左侧

> ID：12619358
> 
> 赞同：0
> 
> 时间：2012-09-27T10:32:26.393
> 
> 标签：ipad, uisplitviewcontroller, toolbar

如何在 splittview 的左侧添加工具栏？我有一个导航控制器，我已经尝试过了：

> UIToolbar *toolbar = [[UIToolbar alloc] init]; 工具栏.barStyle = UIBarStyleDefault;
> 
> [工具栏 sizeToFit];
> 
> UIBarButtonItem *infoButton = [[UIBarButtonItem alloc] initWithTitle:@"back" style:UIBarButtonItemStyleBordered target:self action:@selector(info_clicked:)];
> 
> [工具栏 setItems:[NSArray arrayWithObjects:infoButton,nil]];
> 
> [self.navigationController.view addSubview:toolbar];

但它没有工作。它出现在顶部而不是底部

MEMA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:41:06.503

您不必为 UINavigationController 创建自己的工具栏，只需设置`toolbarHidden`为`NO`使用其内置工具栏并将您的工具栏添加`UIBarButtonItem`到其中即可。

# android - 按下放大镜时如何调用onSearchRequested

> ID：12619363
> 
> 赞同：6
> 
> 时间：2012-09-27T10:32:36.083
> 
> 标签：android, search

当有人调用搜索时，我正在使用`searchView`并尝试传递一些数据。所以我覆盖了这个`onSearchReqested`方法。`SearchView`问题是，当有人键入并按下键盘上的放大镜时，不会调用此方法。而是启动结果活动。

`onSearchRequested`当有人按下放大镜时，我如何在开始结果活动之前调用该方法。

我试过这两个，但没有用。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.FLAG_EDITOR_ACTION) {
        onSearchRequested();
        return false;
    }
    return false;
} 
```

向搜索视图添加侦听器也不起作用

```
searchView.setOnSearchClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        onSearchRequested();

    }
}); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T18:31:57.463

setOnQueryTextListerner 终于奏效了

```
searchView.setOnQueryTextListener(new OnQueryTextListener() {

    @Override
    public boolean onQueryTextSubmit(String query) {
        onSearchRequested();
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) {
        // TODO Auto-generated method stub
        return false;
    }
}); 
```

# paypal - paypal masspay 总是返回成功，即使是不存在的用户

> ID：12619365
> 
> 赞同：0
> 
> 时间：2012-09-27T10:32:41.273
> 
> 标签：paypal, paypal-sandbox

我目前正在测试我的贝宝集成。使用 Masspay 时，我输入的每个用户名都有类似邮件的格式（@ 和“.”），我会收到“成功”响应。我正在使用以下代码：

```
def emails =[]
def amounts = []

emails[0]=params.cuenta;
amounts[0]=params.cantidad;

//masspay.massPayCode("Dinero recibido de TikCode.com", "info@tikcode.com", emails,          amount, "EUR");

String emailSub = "Dinero recibido de TikCode.com";
String emailAddress = "info@tikcode.com";
String [] receiverEmailItems = emails;
String [] amountItems = amounts;
String currencyCode = "EUR";
CallerServices caller = new CallerServices();

String responseValue = null;

    APIProfile profile = ProfileFactory.createSignatureAPIProfile();
    /*
     WARNING: Do not embed plaintext credentials in your application code.
     Doing so is insecure and against best practices.
     Your API credentials must be handled securely. Please consider
     encrypting them for use in any production environment, and ensure
     that only authorized individuals may view or modify them.
     */

// Set up your API credentials, PayPal end point, and API version.
    profile.setAPIUsername("myusername");
    profile.setAPIPassword("mypasswordapi");
    //profile.setSignature("AFcWxV21C7fd0v3bYYYRCpSSRl31ARykt6evANuQsOANN9TjehZjqIl3"); 
    profile.setSignature("mysignature");
    profile.setEnvironment("sandbox");
    caller.setAPIProfile(profile);
    MassPayRequestType pprequest = new MassPayRequestType();
    pprequest.setVersion("90.0");
    println("llegas aqui?")
// Add request-specific fields to the request.
    MassPayRequestItemType[] massPayItem = new MassPayRequestItemType[receiverEmailItems.length];
    int j = 0
    for(int i=0;i<receiverEmailItems.length; i++)
    {
        String recreceiverEmail=receiverEmailItems[i];
        if(recreceiverEmail != null && recreceiverEmail.length()!= 0)
        {
            MassPayRequestItemType massItemReq = new MassPayRequestItemType();
            massItemReq.setReceiverEmail(receiverEmailItems[i]);
            BasicAmountType amount = new BasicAmountType();
               amount.set_value(amountItems[i]);
            amount.setCurrencyID(CurrencyCodeType.fromString(currencyCode));
            //massItemReq.setUniqueId(uniqueIdItems[i]);
            //massItemReq.setNote(noteItems[i]);
            massItemReq.setAmount(amount);
            massPayItem[j]=massItemReq;
            j++;
        }
    }
    pprequest.setEmailSubject(emailSub);
//  pprequest.setReceiverType(ReceiverInfoCodeType.fromString("abdel@publidirecta.com"));
    pprequest.setMassPayItem(massPayItem);

// Execute the API operation and obtain the response.
    MassPayResponseType ppresponse = (MassPayResponseType) caller.call("MassPay", pprequest);
    responseValue = ppresponse.getAck().toString(); 
```

// println(ex) // ex.printStackTrace();

```
return responseValue; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:08:42.067

这是预期的；MassPay 允许将钱转移给非注册用户。
然后这些人将收到一封来自 PayPal 的电子邮件，让他们知道钱在等着他们，他们只需要注册 PayPal 并确认他们的电子邮件地址即可接收。

然后，这笔钱将可以提取到银行账户，或作为 PayPal 余额使用。

# c++ - 不精确浮点常量的警告

> ID：12619368
> 
> 赞同：11
> 
> 时间：2012-09-27T10:32:47.537
> 
> 标签：c++, c, visual-c++, gcc, floating-point

诸如“*为什么不是 0.1+0.1+0.1+0.1+0.1+0.1+0.1+0.1 = 0.8？* ”之类的问题让我想到......

...让编译器警告浮点常量可能会很好，它会四舍五入到二进制浮点类型中最接近的可表示值（例如，0.1 和 0.8 在 radix-2 浮点中四舍五入，否则它们需要无限的空间来存储无限的数字）。

我已经查找了 gcc 警告，但到目前为止没有发现任何用于此目的的警告（`-Wall`, `-Wextra`, `-Wfloat-equal`, `-Wconversion`, `-Wcoercion`（不支持或仅限 C？），`-Wtraditional`（仅限 C）似乎没有做我想做的事）。

我也没有在 Microsoft Visual C++ 编译器中发现这样的警告。

我错过了隐藏或很少使用的选项吗？

有没有任何编译器有这种警告？

**编辑**：此警告可能对教育目的有用，并提醒那些刚接触浮点的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T13:37:22.623

编译器无法发出此类警告没有技术原因。然而，它们只对学生有用（他们应该在开始认真工作之前了解浮点算术是如何工作的）和对浮点做非常好的工作的人。不幸的是，大多数浮点工作都很粗糙。人们向计算机扔数字，而不考虑计算机的工作方式，他们接受他们得到的任何结果。

默认情况下必须关闭警告以支持大量现有浮点代码。如果它可用，我会在 Mac OS X 数学库中为我的代码打开它。当然，库中的某些点我们依赖于浮点值的每一位，例如我们使用扩展精度算术的地方，并且值通过多个浮点对象表示（例如，我们将有一个1/π 的高位对象，另一个对象的 1/π 减去第一个对象，第三个对象的 1/π 减去前两个对象，给我们大约 150 位的 1/π）。一些这样的值在源文本中以十六进制浮点数表示，以避免编译器转换十进制数字时出现任何问题，并且我们可以轻松地转换任何剩余的数字以避免新的编译器警告。

但是，我怀疑我们能否说服编译器开发人员相信足够多的人会使用此警告，或者它会捕获足够多的错误以使其值得他们花时间。考虑 libm 的情况。假设我们通常为所有常数写精确的数字，但有一次，写了一些其他数字。这个警告会捕获一个错误吗？那么，有什么错误？最有可能的是，无论如何，数字都会被转换为我们想要的值。在打开此警告的情况下编写代码时，我们可能会考虑如何执行浮点计算，并且我们编写的值是适合我们目的的值。例如，它可能是我们计算的某个极小极大多项式的系数，并且该系数与将要得到的一样好，

所以，这个警告很少会发现错误。也许它会捕捉到我们打错数字的情况，不小心在十六进制浮点数字中插入了一个额外的数字，导致它超出了可表示的有效位。但这很少见。在大多数情况下，我们使用的数字要么简单而简短，要么是从计算它们的软件中复制和粘贴的。在某些情况下，我们会手动键入特殊值，例如 0x1.fffffffffffffp0。当额外的“f”滑入该数字时发出警告可能会在编译期间发现错误，但几乎可以肯定在测试中会很快发现该错误，因为它会极大地改变特殊值。

因此，这样的编译器警告几乎没有什么用处：很少有人会使用它，而且它会为使用它的人捕获很少的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:49:18.140

警告在源代码中：当您编写`float`,`double`或`long double`包含它们各自的任何文字时。显然，一些文字是精确的，但即使这样也无济于事：两个精确值的总和可能不精确，例如，如果它们具有相当不同的比例。让编译器警告不精确的浮点常量会产生错误的安全感。另外，你打算对舍入常量做什么？明确地写出最接近的值会容易出错并混淆意图。以不同的方式编写它们，例如，编写`1.0 / 10.0`而不是`0.1`也会混淆意图并可能产生不同的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:23:41.247

不会有这样的编译器开关，原因很明显。我们用十进制写下二进制组件：

第一个小数位是 0.5

第二个小数位是 0.25

第三个小数位是 0.125

……

你看到了吗？由于数字 5 的奇数结尾，*每个*位都需要另一个小数来准确表示它。一位需要一位小数，两位需要两位小数，依此类推。

因此，对于小数浮点数，这意味着对于大多数十进制数，单精度浮点数需要 24（！）十进制数字，双精度浮点数需要 53（！）十进制数字。更糟糕的是，*确切的*数字没有额外的信息，它们是由碱基变化引起的纯人工制品。

没有人会为 pi 写下 3.141592653589793115997963468544185161590576171875 以避免编译器警告。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T10:40:47.423

我不知道编译器是如何知道的，也不知道编译器会警告您类似的事情。一个数字可以用本质上不准确的东西来精确表示，这只是一个巧合。

# eclipse - 基于 Eclipse 中的构建路径的自动编译器合规性选择？（或相反亦然？）

> ID：12619369
> 
> 赞同：1
> 
> 时间：2012-09-27T10:32:48.563
> 
> 标签：eclipse, java, buildpath

我在 Eclipse 中的默认 JRE 是 JDK 1.7。对于不需要 Java 7 的项目，我也有 JDK 1.6。我的默认编译器合规级别自然是 JDK 1.7，与默认的 JRE 一致。

现在，对于使用 Java 6 的项目（在*Project Properties -> Java Build Path*中配置），Eclipse 不会在*Project Properties -> Java Compiler*下自动使用 JDK 1.6 合规性。相反，它使用工作区默认值 1.7，这会导致此处描述的问题：[Exception in thread "main" java.lang.UnsupportedClassVersionError: a (Unsupported major.minor version 51.0)](https://stackoverflow.com/q/7237536/1374678)。

有没有办法将 Eclipse 配置为使用与所选 JRE 匹配的编译器合规级别（反之亦然），或者我是否必须为所有不使用默认 JRE 的项目手动配置两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:21:43.173

*首选项 -> Java -> 已安装的 JRE -> 执行环境*

在那里，您将已安装的 JVM 映射到 Java 语言版本（您的可能将 Java 6 环境映射到 Java 7 JVM）。然后将您的项目构建路径设置设置为该执行环境（不是 JRE 或工作区默认 JRE）。

# accurev - 有没有办法在 accurev 中找到最大促销次数？

> ID：12619371
> 
> 赞同：0
> 
> 时间：2012-09-27T10:33:01.003
> 
> 标签：accurev

有没有办法在 Accurev 中找到用户在流中的最大促销次数？一些信息，如用户 - Count# Of Promotions

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:01:02.367

```
accurev hist -s <stream> -u <user> -k promote -a | grep transaction | wc -l 
```

# c# - Registry.LocalMachine 和 RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default) 有什么区别

> ID：12619372
> 
> 赞同：3
> 
> 时间：2012-09-27T10:33:06.860
> 
> 标签：c#, c#-4.0, registry

`Registry.LocalMachine`和 和有什么不一样`RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default)`？

如果根本没有区别，那么首选的解决方案是什么？为了向后兼容旧的 .NET 框架，只有第一个解决方案 ( `Registry.LocalMachine`) 可用，但未来哪个 API 将继续存在？

MSDN 上的 Registry.LocalMachine 解决方案：http: [//msdn.microsoft.com/en-us/library/microsoft.win32.registry.localmachine.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.localmachine.aspx)

MSDN 上的 RegistryKey.OpenBaseKey 解决方案：http: [//msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.openbasekey.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.openbasekey.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:40:23.867

如果您只想要默认视图（`Registry64`对于 64 位应用程序，`Registry32`对于 32 位应用程序），那么我会使用第一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-16T04:09:22.980

[微软](https://msdn.microsoft.com/en-us/library/aa393042(v=vs.85).aspx)

RegistryValueChangeEvent 类表示对特定键的单个值的更改。有关使用 WMI 注册表事件类的详细信息，请参阅修改系统注册表。有关代码示例，请参阅 WMI 任务：注册表。以下语法是从托管对象格式 (MOF) 代码简化而来的，包括所有继承的属性。属性和方法按字母顺序排列，而不是 MOF 顺序。句法

# java - 詹金斯 org.apache.maven.plugins:maven-compiler-plugin:2.0.2

> ID：12619373
> 
> 赞同：2
> 
> 时间：2012-09-27T10:33:09.047
> 
> 标签：java, maven, jenkins

我正在运行 Jenkins 来构建一个 Maven 项目，我收到以下错误，我不知道如何解决。我花了一整天的时间在谷歌和这里搜索，但似乎没有任何效果。

提前感谢您的帮助和指导。

* * *

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 08:44:56+0000)
Maven home: /usr/local/apache-maven-3.0.4
Java version: 1.7.0_04, vendor: Oracle Corporation
Java home: /var/lib/jenkins/tools/JDK/Java_1.6.0/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "2.6.32-279.el6.x86_64", arch: "amd64", family: "unix"
[INFO] Error stacktraces are turned on.

**loads of other INFO and Debug logs**

[DEBUG] Extension realms for project com.mycompany.app:my-app:pom:1.0-SNAPSHOT: (none)
[DEBUG] Looking up lifecyle mappings for packaging pom from ClassRealm[plexus.core, parent: null]
Waiting for Jenkins to finish collecting data
mavenExecutionResult exceptions not empty
message : Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project web-platform3: Compilation failure
cause : Compilation failure
Stack trace : 
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project web-platform3: Compilation failure
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:516)
    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:114)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 27 more
channel stopped
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:27:38.327

`JAVA_HOME`不应指向该文件`jre`夹。尝试

```
JAVA_HOME=/var/lib/jenkins/tools/JDK/Java_1.7.0_04/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:52:25.730

> Java 版本：1.7.0_04，供应商：甲骨文公司
> 
> Java 主页：/var/lib/jenkins/tools/JDK/Java_1.6.0/jre

这看起来很奇怪。你确定这是正确的吗？也许尝试使用相同的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T17:30:44.997

我在此链接下为此创建了一个描述：

[https://stackoverflow.com/a/17683183/1068938](https://stackoverflow.com/a/17683183/1068938)

在大多数情况下，这是一个 UTF-8 转换问题

我希望它会帮助你。

# objective-c - 在 iOS 上以编程方式更改键盘类型无济于事

> ID：12619375
> 
> 赞同：27
> 
> 时间：2012-09-27T10:33:11.953
> 
> 标签：objective-c, ios, xcode, uikeyboardtype

用户按下返回按钮后，我想将键盘类型从默认更改为数字。然而，在设置了 keyboardType 属性之后，什么也没有发生。

我的代码：

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField setKeyboardType:UIKeyboardTypeNumbersAndPunctuation];

    return YES;
} 
```

我已将自己设置为文本字段委托，并且在按下返回按钮后调用该方法。

编辑：解决

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField setKeyboardType:UIKeyboardTypeNumbersAndPunctuation];
    [textField reloadInputViews];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-27T10:53:46.110

尝试这个：

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField setKeyboardType:UIKeyboardTypeNumbersAndPunctuation];
    [textField reloadInputViews];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-21T10:44:23.067

您可以在属性检查器下的文本输入特征部分执行此操作。

# windbg - 如何使用 VirtualBox 从另一个 VM 调试一个 VM 中的 Windows？

> ID：12619378
> 
> 赞同：4
> 
> 时间：2012-09-27T10:33:12.307
> 
> 标签：windbg, remote-debugging

我正在为 Windows 7 编写一些启动（登录前）代码，并希望能够对其进行调试（如果只是为了看看它是如何工作的，因为 Microsoft 的文档很糟糕）。

我的环境是Linux主机上的VirtualBox，有3台Windows VM（一台Windows 2008域控制器，一台Windows 7开发机，一台Windows 7测试机），我希望能够调试测试的启动过程使用虚拟串行连接两个虚拟机从开发机器远程机器。

[在另一种生活中，我在 Windows 主机上使用 VMware 工作站从另一个 linux VM 中调试了 Linux 内核驱动程序，所以我知道这种事情可能是可行的。]

我见过有人使用windbg 从主机调试VirtualBox VM 中的Windows，但我需要从第二个来宾执行此操作（因为我的主机不是Windows）。有没有人想出如何做到这一点？

**编辑：** 我在发布之前尝试了明显的方法。我在每个 VM 配置中创建了一个虚拟串行端口，并将它们都连接到同一个主机管道，由开发 VM（调试器）创建并由测试 VM（被调试者）使用。然后我跑了

```
bcdedit /dbgsettings serial debugport:1 baudrate:115200
bcdedit /debug {current} on 
```

在测试虚拟机中并关闭它。在 dev VM 中运行 windbg 选择内核调试（在正确的串行端口上）并重新启动测试 VM。出现了一些关于没有可用符号并且测试 VM 挂起的消息。

从那以后，我发现了这篇文章：[http](http://www.benjaminhumphrey.co.uk/remote-kernel-debugging-windbg-virtualbox/) ://www.benjaminhumphrey.co.uk/remote-kernel-debugging-windbg-virtualbox/ （尽管那个人使用的是 Windows 主机）似乎准确地描述了我尝试过的方法，但他的测试虚拟机没有挂起。我在 wndbg 窗口中得到的输出与他的相同，但在“Windows XP Kernel ...”行之前停止

我现在不太确定这个问题是否与 VirtualBox 有关，更不确定我是否正确使用了 windbg。任何帮助，将不胜感激。

**另一个编辑**我尝试将测试 VM 的虚拟串行端口附加到主机文件，并在文件中得到一些调试输出。我尝试将两个 VM 的虚拟串行端口设置为指向主机管道并在 Dev VM 中运行终端（而不是 WinDbg），并在终端中获取调试信息。

我想我现在已经确定这绝对是 WinDbg 而不是 VirtualBox 的问题（我将删除 virtualbox 标签并用 windbg 替换它）但我不确定为什么 WinDbg 不说话。

**更多信息：** 我刚刚升级到 VirtualBox 4.2.4（不确定版本是否重要）并再次查看了这个。

我重建了测试虚拟机并且更有耐心了！

现在看来，测试虚拟机正在运行——我最终在 windbg 窗口中得到了一些输出——但调试对象操作系统启动大约需要 15*分钟！*这显然对日常内核调试没有用处。我不知道为什么这应该这么慢......如果我在开发虚拟机而不是 windbg 中运行一个简单的终端，则不会出现明显的减速（当然，调试信息大多是垃圾）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T15:44:55.753

我知道这是一个地狱死灵，但是...

您是否尝试过为内核模式网络调试设置被调试者？我认为减速在很大程度上是因为串行速度太慢了。

[http://msdn.microsoft.com/en-us/library/windows/hardware/hh439346%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439346%28v=vs.85%29.aspx)

如果/当 M$ 决定删除该链接时，您需要执行上述文章的这些部分来进行此设置：

设置目标计算机

要设置目标计算机，请执行以下步骤：

```
Verify that the target computer has a supported network adapter.

Connect the supported adapter to a network hub or switch using standard CAT5 or better network cable. Do not use a crossover cable, and do not use a crossover port in your hub or switch.

In an elevated Command Prompt window, enter the following commands, where w.x.y.z is the IP address of the host computer, and n is a port number of your choice:

    bcdedit /debug on
    bcdedit /dbgsettings net hostip:w.x.y.z port:n

bcdedit will display an automatically generated key. Copy the key and store it on a removable storage device like a USB flash drive. You will need the key when you start a debugging session on the host computer.

Note  We strongly recommend that you use an automatically generated key. However, you can create your own key as described later in the Creating Your Own Key section.

If there is more than one network adapter in the target computer, use Device Manager to determine the PCI bus, device, and function numbers for the adapter you want to use for debugging. Then in an elevated Command Prompt window, enter the following command, where b, d, and f are the bus number, device number, and function number of the adapter:
bcdedit /set "{dbgsettings}" busparams b.d.f
Reboot the target computer. 
```

要连接到它，请使用以下步骤：

```
Using WinDbg

On the host computer, open WinDbg. On the File menu, choose Kernel Debug. In the Kernel Debugging dialog box, open the Net tab. Enter your port number and key. Click OK.

You can also start a session with WinDbg by opening a Command Prompt window and entering the following command, where n is your port number and Key is the key that was automatically generated by bcdedit when you set up the target computer:

windbg -k net:port=n,key=Key

If you are prompted about allowing WinDbg to access the port through the firewall, allow WinDbg to access the port for all the different network types.

Using KD

On the host computer, open a Command Prompt window. Enter the following command, where n is your port number and Key is the key that was automatically generated by bcdedit when you set up the target computer:

kd -k net:port=n,key=Key

If you are prompted about allowing KD to access the port through the firewall, allow KD to access the port for all the different network types. 
```

# jquery - 如何让超级鱼子菜单顶部对齐？

> ID：12619380
> 
> 赞同：0
> 
> 时间：2012-09-27T10:33:21.280
> 
> 标签：jquery, superfish

在[此处的示例](http://users.tpg.com.au/j_birch/plugins/superfish/#examples)中，每个子菜单都将与您将鼠标放在上面的项目对齐。但是，因为我的菜单包含很多项目，所以我希望每个子菜单都与项目的*列*（即父 ul）对齐，而不是项目本身。这样，所有子菜单将始终从主（水平）菜单正下方的相同垂直位置开始。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:11:01.730

天哪，这很容易。在花了几个小时尝试 JS 解决方案之后，我发现我需要做的就是将 li 设置为 position:static 而不是 relative。但是，除了第一级，解决方案是：

#main_menu li.current li.current { position: static !important }

# .net - SlimDX：Joystick.Poll() 在断开连接的游戏手柄上成功

> ID：12619385
> 
> 赞同：0
> 
> 时间：2012-09-27T10:33:30.500
> 
> 标签：.net, windows, directx, slimdx

我对 SlimDX 有一个奇怪的问题：我们已经在 Windows 7 上看到了这个，还没有测试过其他版本：我正在使用一捆便宜的 USB 游戏手柄（没有序列号），有时一个物理游戏手柄会结束up 为多个`Joystick`对象提供输入。

场景是：

1.  将游戏手柄 1 插入集线器插槽 1。手柄显示`DirectInput.GetDevices`为 GUID f17b2d30。为焊盘创建`Joystick`对象。
2.  将游戏手柄 2 插入集线器插槽 2。手柄显示`DirectInput.GetDevices`为 GUID 5187d2d0。为焊盘创建`Joystick`对象。
3.  按下游戏手柄 2 上的按钮。状态没有变化。
4.  按下游戏手柄 1 上的按钮。按钮出现在两个对象的`GetCurrentState()`后面。`Poll()`
5.  拔下游戏手柄 2.`Poll()`其对象上的方法继续返回而没有错误，但它不再出现在`DirectInput.GetDevices`.
6.  按下游戏手柄 1 上的按钮。按钮出现在两个对象的`GetCurrentState()`后面。`Poll()`

我检查了调试器中的对象。每个都`Joystick`通过 引用正确的 GUID `Information.InstanceGUID`，但每个都在 中具有相同的 USB 路径`Properties.InterfacePath`。

游戏手柄硬件似乎工作正常 - 如果我使用控制面板操纵杆测试仪执行相同的序列，游戏手柄仍然不同。

DirectInput GUID 似乎是根据 USB PID 和 VID 分配的，然后是插入相同游戏手柄的顺序，而不是它们插入的 USB 端口的物理路径。如果我混合不同型号的游戏手柄，问题就会消失。

感觉就像是 SlimDX 甚至是 DirectInput 错误 - 有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T13:33:02.563

我在这里的最终答案是完全放弃 DirectInput，转而使用 RawInput。我实现了一个小的 C DLL 来连接我的 C# 代码和 RawInput。

我有两个限制：[查找设备名称时遇到问题](https://stackoverflow.com/questions/12656236/how-to-get-human-readable-name-for-rawinput-hid-device)，以及[在 XP 下读取设备信息时崩溃](https://stackoverflow.com/questions/12260384/making-getrawinputdeviceinfo-and-ridi-deviceinfo-work-with-c-sharp)。这些都不是我的应用程序的关键问题。

示例 C++ 源代码有点长，无法回答，[所以在这里](http://pastebin.com/AiecKJjZ)。

从 C# 调用使用以下签名：

```
 [DllImport("Adapters.dll", CallingConvention = CallingConvention.Cdecl)]
    private static extern int InitialiseGamepads(IntPtr hwnd);
    [DllImport("Adapters.dll", CallingConvention = CallingConvention.Cdecl)]
    private static extern IntPtr GetDevicePath(int index);
    [DllImport("Adapters.dll", CallingConvention = CallingConvention.Cdecl)]
    private static extern int PollDeviceChange();
    [DllImport("Adapters.dll", CallingConvention = CallingConvention.Cdecl)]
    private static extern int ProcessInput(IntPtr wParam, IntPtr lParam,
        out byte buttons, out int x, out int y); 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2015-03-10T03:24:25.273

我认为，你应该使用：

```
Joystick joy;
string UniquePathForEachJoystick = joy.Properties.InterfacePath.ToString(); 
```

# command - Applescript 中的 Command-Z 用于当前活动的应用程序

> ID：12619386
> 
> 赞同：0
> 
> 时间：2012-09-27T10:33:31.793
> 
> 标签：command, applescript

我正在尝试在 AppleScript 上为当前活动的应用程序创建一个撤消功能。

当我运行它时，我的代码实际上可以在自动机本身上运行，但是当我通过快捷方式将它作为服务启动时它不会。

```
on run {input, parameters}
    tell application "System Events" to keystroke "z"
end run 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:18:41.927

您需要使用 {command down} 发送击键

```
tell application "System Events" to keystroke "z" using {command down} 
```

另外，我认为服务不会完成您想要做的事情。通过聚光灯调用的后台应用程序可能会更好。但是，调用任何解决方案的工作似乎与手动键入命令 z 一样多。

# linux - 将铬安装到 Linux 磁盘映像？

> ID：12619387
> 
> 赞同：2
> 
> 时间：2012-09-27T10:33:34.637
> 
> 标签：linux, chromium, raspberry-pi, diskimage

我确定以前有人问过这个问题，但我不知道要搜索什么

我正在尝试创建一个自定义 Linux 映像（用于 Raspberry Pi） - 我目前正在操作 .img 的文件系统，但我发现它并不像放入二进制文件那么简单:( 如果只是......

在磁盘映像上“预安装”软件包的公认方法是什么，您只能操作文件系统并且最好不要先运行它？我最好启动，安装，然后从中创建映像，还是有一种方法可以事先以与更改配置设置等相同的方式进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:19:51.540

通常，当我必须更改磁盘映像中的某些内容时，我会执行以下操作：

```
sudo mount --bind /proc /mnt/disk_image/proc
sudo mount --bind /sys /mnt/disk_image/sys
sudo mount --bind /dev /mnt/disk_image/dev 
```

需要这些操作，因为此文件夹是在启动过程中创建的，将它们安装在系统映像中将模拟完全启动。然后，您可以`chroot`安全地使用它：

```
sudo chroot /mnt/disk_image 
```

您现在可以在 chroot 环境中发出命令：

```
sudo apt-get install chromium 
```

当然，更改`/mnt/disk_image`为安装文件系统的路径。`apt-get`仅适用于基于 Debian 的系统，请根据您的发行版进行更改。

您可能会发现连接到 Internet 的问题，这可能是由 DNS 配置引起的。您可以做的最好的事情是将您的`/etc/resolv.conf`文件复制到远程文件系统中，因为该文件通常被更改`dhcp`并且在 chroot 环境中它是空的。

这是唯一能让您完全访问您尝试修改的系统的命令行的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:59:07.057

这是一个未经验证的想法：

该`dpkg`工具可以安装 .deb 包，有一个选项可以设置与本地路径`--root`不同的文件系统。`/`

从[手册页](http://manpages.ubuntu.com/manpages/lucid/man1/dpkg.1.html)：

```
 --instdir=dir
          Change default installation directory which refers to the
          directory where packages are to be installed. instdir  is
          also  the  directory  passed  to chroot(2) before running
          package’s installation  scripts,  which  means  that  the
          scripts see instdir as a root directory.  (Defaults to /)

   --root=dir
          Changing root changes instdir  to  dir  and  admindir  to
          dir/var/lib/dpkg. 
```

如果您挂载映像并将其挂载点传递为`--root`，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:36:35.960

有像 Ubuntu Customization Kit 这样的东西，它允许您使用自己的软件包创建自己的发行版版本。

Crunchbang 甚至有一个这样的实用程序，这是我个人选择的用于试验我的 Pi 的发行版。

# jquery-mobile - Jquery mobile pagePage - > live（'pageinit'）不起作用

> ID：12619389
> 
> 赞同：0
> 
> 时间：2012-09-27T10:33:43.600
> 
> 标签：jquery-mobile

我想使用“pageChange”进行页面转换：

```
$.mobile.changePage('new.html', { transition: "none"}); 
```

当页面加载时，我想执行一个函数。为此，我在“new.js”中添加了这段代码：

```
$('#new-page').live('pageinit', function(event) { ... }); 
```

问题是当调用者页面打开新页面时，以前的功能不运行，我必须重新加载页面才能运行它。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:10:54.520

pageinit 仅在页面最初加载到 DOM 时调用一次。对页面的后续导航不会强制它重新加载到 DOM 中（除非您在 changePage 方法中指定选项）

> 当页面加载时，我想执行一个函数。

我怀疑你实际上追求的是 pageshow 或 pagebeforeshow 吗？

# html - 清除时 margin-top 不起作用：两者都使用

> ID：12619392
> 
> 赞同：1
> 
> 时间：2012-09-27T10:34:05.723
> 
> 标签：html, css

正如您从我`clear:both`用来允许我放置`#three`的代码中看到的那样，`#one #two`但这似乎阻止了我添加`margin-top`到`#three`是否有解决此问题的方法？

```
<div id="one">
</div>
<div id="two">
</div>
<div id="three" class="clearfix">
</div>

#one {
    float:left;
}

#two {
    float:right;
}

.clearfix {
    clear:both;
}

#three {
    margin-top: 20px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:37:34.197

作为一种解决方法，您可以使用

```
padding-top : 20px 
```

或者您也可以在技术上使用

```
position: relative;
top: 20px; 
```

应用于`#three`div。甚至

```
padding-bottom: 20px; 
```

应用于`#two`div。乃至

```
 #two:after {
    content : "";
    clear   : both;
    display : block;
    height  : 20px; // or margin-bottom: 20px;
 } 
```

只需选择最适合您的布局的选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:37:33.473

申请`float:left;`#three 来解决您的问题

编辑：如果您不想浮动任何东西，但不需要使用相对定位，请按照 Fabrizio 并添加填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:38:16.593

用 将 #one 和 #two 包装在一个容器中`overflow:hidden;`，您甚至不需要 clearfix。

[演示](http://jsfiddle.net/gionaf/CFa9s/)

* * *

```
<div id="container">
<div id="one"></div>
<div id="two"></div>
</div>
<div id="three"></div>

#container {
    overflow:hidden;
}
#one {
    float:left;
}
#two {
    float:right;
}
#three {
    margin-top: 20px;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:39:25.863

嗨，现在更改您的 html 中的一些代码并执行此操作

```
<div style='overflow:hidden'>
  <div id="one">Left</div>
  <div id="two">Right</div>
</div>
<div id="three" class="clearfix">// your data </div> 
```

***[现场演示](http://tinkerbin.com/XrWbYKkx)***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:41:42.867

这个[**JSFiddle**](http://jsfiddle.net/uJBK2/3/)应该可以帮助你

```
<div class="row">
    <div id="one">
        a
    </div>
    <div id="two">
        b
    </div>
</div>

<div id="three">
    c
</div> 
```

CSS

```
#one {
    float:left;
}    
#two {
    float:right;
}    
clearfix {
    clear:both;
}
.row{ overflow: hidden; border: 1px solid red; }
#three {
    margin-top: 40px;  border: 1px solid green;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-27T10:36:31.080

您需要将 应用于`clear: both;`div `#three`。

然后它会是这样的：http: [//jsfiddle.net/uJBK2/](http://jsfiddle.net/uJBK2/)

**编辑** 现在我看到你在 clearfix 之前错过了一点。没关系。

# android - Android SDK r20 运行时异常

> ID：12619397
> 
> 赞同：0
> 
> 时间：2012-09-27T10:34:23.933
> 
> 标签：android, android-sdk-tools

我下载了新的 Android **SDK r20**并安装了。

我创建了一个带有活动和服务的新应用程序。我正在 onCreate() 活动方法中启动服务。

我得到运行时异常**类未找到**，这是我的服务类名称。**我用SDK r14**测试了相同的应用程序，没有这样的例外，它工作正常。

那么，**SDK r20 有什么问题？？？** 有人请回答我。我在谷歌上搜索过这个问题，但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:40:59.390

你应该试试这个：

1.从Java中删除对项目中JAR的所有引用`project -> properties -> Java build path -> libraries`

2.如果项目的根目录不存在，则创建一个 libs 文件夹`Copy the JAR into the libs folder.`

3.如果还没有运行OK。右键单击您的项目 > Android 工具 > 修复项目属性

`clean your project`并运行。它会起作用的

# node.js - Node 的 console.log() 输出一个对象的信息。如何将其输出到文件？

> ID：12619398
> 
> 赞同：4
> 
> 时间：2012-09-27T10:34:23.633
> 
> 标签：node.js

我喜欢如何以 json 格式`console.log(object)`输出`object`结构。如何让我的应用程序将相同的内容输出到文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:39:46.383

正如 Golo 所说，Node 中没有内置任何东西，但您可以轻松编写自己的（或使用 Winston）:)

```
fs = require('fs');

logToFile = function(fileName, objectToLog) {

  jsonText = JSON.stringify(objectToLog, null, '\t');
  fs.writeFileSync(fileName, jsonText, 'utf8');      

}

sampleData = { name: 'Batman', city: 'Gotham' };
logToFile('log.txt', sampleData); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:37:21.993

Node.js 中的文件日志记录没有开箱即用的支持。

基本上，您有两种选择：

1.  您可以使用操作系统的机制重定向流，将 Node.js 进程的任何输出重定向到文件。

2.  使用专用的日志库，例如[Winston](https://github.com/flatiron/winston)。

我会选择第二种选择，因为它更灵活，你迟早会需要它，至少在你的项目稍微大一点的情况下。

# performance - 性能读取嵌套层次结构

> ID：12619403
> 
> 赞同：1
> 
> 时间：2012-09-27T10:34:49.730
> 
> 标签：performance, hdf5

我在从 hdf 文件中读取属性时遇到性能问题。从大约 18000 个组/数据集中读取属性（每个 10 个）似乎需要将近 1.5 分钟。希望有人能告诉我这是否确实是一个合理的时间这样的结构...... hdf文件在根下有大约300个组这300个组（T）中的每一个都有大约60个子组（V），这60个子组中的每一个都有1或2个数据集（D）

```
 Root 

       ----- T1 

            ----- V1 
                 ---- D 

            -----  V60 
                  ---- D 

         .... 
         .... 
         .... 

      -----  T300 
```

在每个级别我都在阅读最多 10 个微小的属性..

读取每个组是否主要意味着新的磁盘寻道？我最初的想法是，由于元数据属于不同的组......它们可能最终位于不同的磁盘块上，我正在考虑创建所有元数据的数据集

vtune 显示打开组和数据集的等待时间过长..有什么提高性能的建议..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T12:19:57.193

每个对象（组或数据集）的元数据通常存储在对象头中，因此，正如您所说，它们很可能位于不同的磁盘块上。但是，正如您所发现的，如果您需要读取大量属性，这可能会导致性能下降。您制作包含所有属性的数据集的想法实际上已在 HDF5 中实现。这称为“密集属性存储”，可以使用[`H5Pset_attr_phase_change`](http://www.hdfgroup.org/HDF5/doc/RM/RM_H5P.html#Property-SetAttrPhaseChange). [这里](http://www.hdfgroup.org/HDF5/doc/UG/13_Attributes.html#SpecIssues)有一些示例代码。

您将需要在每个组和数据集上使用此功能。从参考手册中不清楚它是为所有具有密集属性存储的对象创建一个数据集，还是为每个对象创建一个数据集。这可能取决于文件驱动程序。

最后，如果密集的属性存储不能给您带来太多的加速，您可以考虑并行 IO。

# php - 使用从星期五开始的日历查找月份中的周数

> ID：12619404
> 
> 赞同：0
> 
> 时间：2012-09-27T10:34:50.737
> 
> 标签：php, date, datetime, monthcalendar

我正在寻找日期在一个月的哪一周开始，一周从星期五开始。例如，日历看起来像这样：

```
Week count   F   Sa  Su  M   Tu  W   Th
----------------------------------------
       0         1   2   3   4   5   6
       1     7   8   9   10  11  12  13
       2     14  15  16  17  18  19  20
       3     ... 
```

输入将是时间戳格式 ( `$currentDate`) 的日期，我正在寻找`$weekCount`.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:44:20.077

只需要一次返回 7 天来计算上周五的数量，直到你发现你已经涵盖了所有这些。

循环将始终超出第一个星期五，以涵盖星期五不是本月第一天的正常情况。如果星期五是该月的第一天，那么您需要减少增量以解决超调。

```
 $currentDate = time(); // e.g.

    $dayOfMonth = date('j', $currentDate);

    $ym = date('Y-m', $currentDate);

    $firstFriday = strtotime("Friday ".$ym);

    $dateOfFirstFriday = date('j', $firstFriday);

    // we need to reduce count by 1 if friday is the 1st, to compensate
    // for overshooting by a week due to the >= in the while loop
    $weekCount = ($dateOfFirstFriday == 1) ? -1 : 0;

    while ($dayOfMonth >= $dateOfFirstFriday) {
        $weekCount ++;
        $dayOfMonth = $dayOfMonth - 7;
    }

    var_dump($weekCount); 
```

This code doesn't account for if we are on say Fri 30th, then actually are we in week 0 of the next month? Not clear though from opening post if that is required.

# java - Java：如何获取日期而不是时间？

> ID：12619406
> 
> 赞同：0
> 
> 时间：2012-09-27T10:34:58.033
> 
> 标签：java, date

我有可能得到今天的日期而不是时间吗？

这是我的代码

```
public static void main(String args[]) throws ParseException{   
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    Calendar calendar = Calendar.getInstance();
    Date today = calendar.getTime();

} 
```

为什么今天的日期显示为日期之前？

```
public class Ravi {

    public static void main(String args[]) throws ParseException {

        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        Date date = new Date();
        System.out.println("Todays Date"+dateFormat.format(date));

        List currentObject = new ArrayList();

        currentObject.add("2012-09-27");

        Date ExpDate = dateFormat.parse((String) currentObject.get(0));

        System.out.println("ddd"+ExpDate);

        if (ExpDate.before(date)) {
            System.out.println("true");
        }

        else {
            System.out.println("false");
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T10:38:01.637

```
System.out.println(new SimpleDateFormat("yyyy-MM-dd").format(new Date())); 
```

它将打印 **2012-09-27**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T10:40:17.437

因为 Date 始终是完整的当前时间，例如 2012.09.27 12:45:23

虽然您的新格式化日期是 2012.09.27 00:00:00，但输出是正确的。

如果你想得到 false，你需要将小时、分钟和秒设置为 0。

使用日历：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");
Calendar cal = Calendar.getInstance();
System.out.println(dateFormat.format(cal.getTime())); 
```

使用日期：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");
Date date = new Date();
System.out.println(dateFormat.format(date)); 
```

比较日期和日历：

```
Calendar old = Calendar.getInstance();

old.set(Calendar.YEAR, 2011);

Calendar now = Calendar.getInstance();

old.before(now)); 
```

请注意，您可能希望将 Hours Minutes 和 Seconds 设置为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T10:39:15.670

以 yyyy-MM-dd 格式获取今天的日期。

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
String output = sdf.format(new Date());
System.out.println(output); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T10:59:50.253

> 为什么今天的日期显示为日期之前？

当您进行 `dateFormat.parse("2012-09-27");` 约会时，您将得到的将是 00h00min00sec 2012-09-27 因此，当您将其与今天的日期进行比较时，`new Date();`您将得到今天的日期，但要晚几个小时（以及几分钟和几秒钟），这就是为什么“ 2012-09-27 " 在 new Date() 之前

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:39:09.047

你可以这样做：

```
Date date=new Date();
            SimpleDateFormat sd=new SimpleDateFormat("yyyyMMdd HHmmss");
            String strDate=sd.format(date);
            String dateNow=strDate.substring(0,strDate.indexOf(" "));
            String timeNow=strDate.substring(strDate.indexOf(" ")+1); 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T10:46:09.650

```
public static void main(String args[]) throws ParseException{   
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    Calendar calendar = Calendar.getInstance();
    Date today = calendar.getTime();
sysout(dateFormat.format(today))
} 
```

# .net - 如果单词不以正则表达式匹配

> ID：12619407
> 
> 赞同：1
> 
> 时间：2012-09-27T10:35:02.730
> 
> 标签：.net, regex

但是，我正在尝试为正则表达式创建一种算法，该算法可以找到未计算的计算，例如“15 + 15”；它不应该匹配 '15+15=30'

到目前为止，我已经找到了诸如 15+15 之类的计算，但是；它也匹配 15+15=30

到目前为止我得到的是

```
\d{1,9}\+\d{1,9} 
```

我试过了

```
\d{1,9}\+\d{1,9}[^=] 
```

但它并没有像我预期的那样真正起作用。

**我正在使用 .net 'Regex' 类**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T10:37:31.140

你需要的是一个消极的前瞻：

```
(\d{1,9}\+\d{1,9})\b(?!=) 
```

这断言该模式不遵循`=`. the`\b`是一个单词边界，可确保您不匹配`15+1`（`15+15=30`因为`5`is not `=`）。

您尝试使用否定字符类不起作用的原因是它在匹配后**需要**一个非字符。`=`

# c# - 我在哪里放置实现相同接口的多个类中所需的公共逻辑？

> ID：12619409
> 
> 赞同：4
> 
> 时间：2012-09-27T10:35:05.433
> 
> 标签：c#, inheritance

给定以下界面：

```
public interface IFoo
{
    bool Foo(Person a, Person b);
} 
```

以及上述的以下两个实现：

```
public class KungFoo : IFoo
{
    public bool Foo(Person a, Person b)
    {
        if (a.IsAmateur || b.IsAmateur) // common logic
          return true;
        return false;
    }
}

public class KongFoo : IFoo
{
    public bool Foo(Person a, Person b)
    {
        if (a.IsAmateur || b.IsAmateur) // common logic
          return false;
        return true;
    }
} 
```

我应该将“通用逻辑”（如代码中的注释）放在哪里，以便它只在一个地方（例如作为 Func）并且不需要重复（如上例）用于多个实现？

*请注意，上面的示例非常简单，但现实生活中的“通用逻辑”更加复杂，而 Foo() 方法做了一些有用的事情！*

我希望这个问题很清楚（并且尚未在其他地方得到回答 - 我确实进行了搜索），但如果需要，请随时向我询问更多细节。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T10:38:26.813

在一个通用的抽象类中：

```
public interface IFoo
{
    bool Foo(Person a, Person b);
}

public abstract class FooBase : IFoo
{
    public virtual bool Foo(Person a, Person b)
    {
        if (a.IsAmateur || b.IsAmateur) // common logic
          return true;
        return false;
    }
}

public class KungFoo : FooBase
{

}

public class KongFoo : FooBase
{
    public override bool Foo(Person a, Person b)
    {
        // Some other logic if the common logic doesn't work for you here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:49:49.447

您可以将基类用于通用方法，但您的通用逻辑（或业务规则）可以使用**规范模式**相当巧妙地外部化。

那里有很多冗长的示例和白皮书，如果您对这类东西没问题，请通读它们（我觉得它有点过于学术化），但似乎确实有一个很好的介绍：

[http://devlicio.us/blogs/jeff_perrin/archive/2006/12/13/the-specification-pattern.aspx](http://devlicio.us/blogs/jeff_perrin/archive/2006/12/13/the-specification-pattern.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:53:41.747

我不是 ac# 开发人员，但我想说你必须将父类更改为实际类并在其中实现方法，当然如果你想添加其他未实现的方法，你会声明一个抽象类，但是这就是它的样子；

```
public abstract class IFoo{
   bool Foo(Person a, Person b){
      if (a.IsAmateur || b.IsAmateur) // common logic
         return true;
   }
   public abstract Object otherFooMethod(Object o);
} 
```

然后在您的子课程中，您将像这样使用它：

```
public class KungFoo : IFoo{
   //Foo already implemented

   public Object otherFooMethod(Object o){
      return o;
   }

}

public class KongFoo : IFoo
{
   public bool Foo(Person a, Person b)
   {
       if (a.IsAmateur || b.IsAmateur) // common logic
         return false;
       return !base.Foo();
   }

   public Object otherFooMethod(Object o){
      return o;
   }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:40:11.010

*   您可以实现一个由所有适当类继承的类，并将功能作为`protected`方法提供。

*   最好您可以实现一个**Extension Method**，我更喜欢它，因为它不会限制您在某个继承层次结构中使用此逻辑，而是允许您在共享类型或接口的所有类中使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:43:35.080

我会使用这样的抽象基类：

```
public interface IFoo
{
    bool Foo(Person a, Person b);
}

public class KungFoo : FooImpl
{
    public override bool Foo(Person a, Person b)
    {
        if (this.IsAmateur(a, b))
            return true;
        return false;
    }
}

public class KongFoo : FooImpl
{
    public override bool Foo(Person a, Person b)
    {
        if (this.IsAmateur(a, b))
            return false;
        return true;
    }
}

public abstract class FooImpl : IFoo
{
    public abstract bool Foo(Person a, Person b);

    protected readonly Func<Person, Person, bool> IsAmateur = (a, b) => a.IsAmateur || b.IsAmateur;
}

public class Person
{
    public bool IsAmateur { get; set; }
} 
```

# html - 为表格提供可访问性标题的最佳方法？

> ID：12619414
> 
> 赞同：1
> 
> 时间：2012-09-27T10:35:13.977
> 
> 标签：html, html-table, accessibility

我想为表格指定标题或标题。对于有视力的用户，这将被隐藏，因为上下文是显而易见的，但对于屏幕阅读器来说，标记它的最佳方法是什么？该表用于开放时间，因此是标题/标题/标题/等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:39:03.833

您可以`<caption>`用于标题。即使标题标签与表格元素一起使用，它也接受块级标签，因此人们将文本包装在标题标签中。该`summary`属性可用于提供描述。[请参阅有关这两个主题](http://www.usability.com.au/resources/tables.cfm#identifying)的 webUsability指南。

# asp.net - 如何删除 SQL 数据库中 .net 成员资格的 dbo 角色要求？

> ID：12619415
> 
> 赞同：0
> 
> 时间：2012-09-27T10:35:16.640
> 
> 标签：asp.net, sql-server, scripting, membership

我正在将应用程序从 Dev 过渡到 QA。我创建了一个 sql 文件来填充 QA 环境中的数据库。在 QA 环境中，我在数据库上使用 Windows 身份验证。我的用户拥有最少的权限。我遇到了错误

```
EXECUTE permission denied on object 'aspnet_CheckSchemaVersion', database 'QADB', schema 'dbo'. 
```

当我尝试登录时。我注意到我的数据库创建脚本有：

```
"CREATE ROLE [aspnet_Membership_BasicAccess] AUTHORIZATION [dbo]" 
```

当我将用户的权限更改为 dbo 时，问题就消失了。

我不希望我的用户成为 dbo。有人知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:25:43.020

授予用户对存储过程的执行权限，或者更好的是，确保用户是角色的成员并向角色授予执行权限。

```
GRANT EXECUTE ON aspnet_checkscemaversion TO aspnet_membership_basicaccess 
```

# android - 如何在 ImageView 中设置图像？

> ID：12619416
> 
> 赞同：1
> 
> 时间：2012-09-27T10:35:19.840
> 
> 标签：android, android-layout, imageview, android-imageview, src

我需要把我自己的形象放在一些`imageView`. 所以这就是为什么我在 res 文件夹中创建了名为“drawable”的文件夹，并将我的图像复制到这个文件夹中，但现在我不知道如何将此图像设置为我`imageView`的 XML 代码。有人可以帮忙吗？对不起英语:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:40:21.290

在您的布局 XML 文件中：

```
<ImageView android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:src="@drawable/your_image_name"/> 
```

替换`your_image_name`为不带扩展名的图像文件的名称（例如，如果您的可绘制文件名为`img1.png`，则该`src`属性的值应为`@drawable/img1`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:37:39.743

使用 android:src="" 设置它

```
 <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image_name" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:40:27.863

尝试这个。

```
<ImageView
    android:id="@+id/YourImageViewID"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/Your_Image_Name"
   /> 
```

这可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T10:37:31.993

//通过调用`android:background`xml中的属性 将背景设置为图像

```
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/myimage"
    /> 
```

**注意：**默认情况下，您无需创建任何可绘制文件夹 android 项目将包含

```
drawable-mdpi
drawable-hdpi
drawable-ldpi 
```

你可以把你的形象放进去。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-14T04:29:05.297

```
<ImageView
 android:layout_width="150dp"
 android:layout_gravity="bottom"
 android:layout_height="150dp"
 android:id="@+id/image1"
 android:layout_marginTop="11dp"
 android:background="@drawable/image1"
          /> 
```

# scala - 子类签名中的超级构造函数？

> ID：12619421
> 
> 赞同：0
> 
> 时间：2012-09-27T10:35:47.610
> 
> 标签：scala, subclass, extend

在此页面上的示例中：[http ://www.scala-lang.org/node/125](http://www.scala-lang.org/node/125)

```
class Point(xc: Int, yc: Int) {
  val x: Int = xc
  val y: Int = yc
  def move(dx: Int, dy: Int): Point =
    new Point(x + dx, y + dy)
}

class ColorPoint(u: Int, v: Int, c: String) extends Point(u, v) {
  val color: String = c
  def compareWith(pt: ColorPoint): Boolean =
    (pt.x == x) && (pt.y == y) && (pt.color == color)
override def move(dx: Int, dy: Int): ColorPoint =
  new ColorPoint(x + dy, y + dy, color)
} 
```

扩展类上的参数/参数列表在子类的定义中起到什么作用？我指的是行`(u, v)`尾的。`Point``class ColorPoint(u: Int, v: Int, c: String) extends Point(u, v) {`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:44:39.950

如果您熟悉 Java，则此代码将是相同的：

```
class ColorPoint extends Point {
  ColorPoint (int u, int v, String c) {
    super(u,v);
  ...
  }
  ...
} 
```

所以，是的，它是对 super 的构造函数的调用

# php - 基于时间的 PHP 文本

> ID：12619425
> 
> 赞同：1
> 
> 时间：2012-09-27T10:35:52.577
> 
> 标签：php, text, time

我有一个快速的问题。我的网站上有一个呼叫按钮，如果可能的话，我想在不同时间使用 PHP 使用不同的电话号码。

在上午 9 点到下午 5 点之间，我想要我们当地的办公室电话号码，在下午 5 点到第二天早上 9 点之间，我想要我们的 24 小时电话号码。

这是标题中的当前特定代码。它使用 Wordpress 主题来调用看涨期权，其想法是用硬数据覆盖它。这是有[问题的网站](http://asprayni.com)。

在 Iscariot 的帮助下，到目前为止，我有这个代码，但它不是很有效 - 现在是上午 11 点，它应该显示我的第一个数字（02840 ...），但不是吗？我什至尝试过凌晨 1 点到晚上 11 点，但它不会在第一个数字中出现。

```
<span class="call-us-button">
  <?php if($hour > 1 && $hour < 23){
    echo '' . do_shortcode('[button link="tel:02840-631-245"]<span class="call-button-inner"><i class="call-us-icon"></i>CALL 02840 631 245</span>[/button]'); } else {
    echo '' . do_shortcode('[button link="tel:0800-077-6704"]<span class="call-button-inner"><i class="call-us-icon"></i>CALL 0800 077 6704</span>[/button]'); }
  ?></span> 
```

如果您有任何建议或指示，我将不胜感激！

提前致谢，

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:38:36.273

```
$hour = date('G', time()); 

if($hour > 8 && $hour < 18){
     // Phone Number
     echo '' . do_shortcode('[button link="' . get_prime_options('call_button_url') . '"]<span class="call-button-inner"><i class="call-us-icon"></i>' . get_prime_options('call_button_text') . '</span>[/button]');
} else {
     // other number
     echo '' . do_shortcode('[button link="' . get_prime_options('call_button_url') . '"]<span class="call-button-inner"><i class="call-us-icon"></i>' . get_prime_options('call_button_text') . '</span>[/button]');
} 
```

但是您需要注意，函数 get_prime_options('call_button_url') 需要更改为其他内容，并且您需要进入该文件并为其添加其他数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:39:00.900

你能不能只使用[日期](http://php.net/manual/en/function.date.php)函数来获得你想要的 -`G`它将在 24 小时内返回当前时间，而不带前导零。

```
if(date('G')>=9 && date('G') <= 17)
{
    // show normal phone Num
}
else
{
    // show after hours phone Num
} 
```

# database - zend框架插入数据没有键值

> ID：12619426
> 
> 赞同：0
> 
> 时间：2012-09-27T10:35:52.243
> 
> 标签：database, zend-framework

你可以使用 insert like `Insert into table values()`。如果值的数量与表字段的数量相对应，则将执行插入。

我想在 中使用此功能`$this->_db->insert('table',$data)`，其中数据是我从 fgetcsv 获得的数组。

这可能吗？问候安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:25:13.260

只要`$data`符合就行`@param array $bind Column-value pairs`。

所以你的 csv 数组必须是一个关联数组，其中***keys = column names***和***values = column values***。

祝你好运！

# c++ - 如何与另一个应用程序共享 HGLOBAL？

> ID：12619430
> 
> 赞同：1
> 
> 时间：2012-09-27T10:36:01.293
> 
> 标签：c++, winapi, shared-memory

我试图了解一些关于`HGLOBAL`s 的东西，因为我刚刚发现我的想法完全是错误的。

在应用程序 AI`GlobalAlloc()`数据中（带有`GMEM_SHARE|GMEM_MOVABLE`）并将字符串`"Test"`放入其中。现在，我可以为另一个应用程序提供什么来获取该数据？

我虽然（错误地！）`HGLOBAL`s 在所有进程中都是有效的，这显然是错误的，因为`HGLOBAL`它是`HANDLE`指向全局数据的，而不是指向全局数据的指针（这就是我所说的“OHHHH！”）。

那么我怎样才能将它传递`HGLOBAL`给另一个应用程序呢？

注意：我只想传递一个指向数据的“指针”，而不是数据本身，就像在剪贴板中一样。

非常感谢！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:54:56.270

（这只是一个很长的评论，因为其他人已经解释过 Win32 采用不同的方法来共享内存。）

我会说您正在阅读有关 Windows 编程的书籍（或教程），这些书籍（或教程）非常古老且过时，因为 Win16 几乎已经死了很长一段时间。

16 位 Windows (3.x) 没有 32 位（及更高版本）Windows 版本提供的内存隔离（或虚拟/平面/地址空间）的概念。那里的内存过去被分为本地（进程）和全局部分，两者都生活在同一个全局地址空间中。像这样的描述符`HGLOBAL`被用来允许内存块在物理内存中移动并且尽管它们在地址空间中的新位置仍然可以正确访问（在使用`LocalLock()`/正确固定之后`GlobalLock()`）。Win32 使用指针代替，因为可以移动物理内存页面而不影响它们在虚拟地址空间中的位置。出于兼容性原因，它仍然提供所有的`Global*`和`Local*`API 函数，但不应再使用它们，而应使用通常的堆管理（例如`malloc()`C 或`new`C++ 中的运算符）。Win16 上还存在几种不同类型的指针，以反映 x86 上可用的几种不同寻址模式 - 近（同一段）、远（段：偏移）和巨大（标准化段：偏移）。您仍然可以`FARPTR`在移植到 Win32 的旧版 Win16 代码中看到类似的内容，但它们被定义为空字符串，因为在平面模式下仅使用指针附近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:50:23.657

每个进程“认为”它拥有计算机上可用的全部内存空间。没有进程可以“看到”另一个进程的内存空间。因此，通常情况下，一个进程存储的任何内容都不会被另一个进程看到。

因为可能需要在进程之间传递信息，所以存在某些机制来提供此功能。

一种方法是消息传递；一个进程向另一个进程发出消息，例如通过管道、套接字或 Windows 消息。

另一种是共享内存，其中一个给定的内存块可供两个或多个进程使用，这样一个进程写入的任何内容都可以被其他进程看到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:56:08.383

不要与`GMEM_SHARE`标志混淆。它不像你想象的那样工作。来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366574%28v=vs.85%29.aspx)：

> 以下值已过时，但提供这些值是为了与 16 位 Windows 兼容。他们被忽略了。
> 
> ```
> GMEM_SHARE 
> ```

[`GMEM_SHARE`Raymond Chen 解释的标志](http://blogs.msdn.com/b/oldnewthing/archive/2004/11/02/251068.aspx)：

> 在 16 位 Windows 中，GMEM_SHARE 标志控制内存是否应该超过分配它的进程。

要与另一个进程/应用程序共享内存，您应该查看[File Mappings](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366556%28v=vs.85%29.aspx) : [Memory-mapped files and how they work](http://blogs.msdn.com/b/khen1234/archive/2006/01/30/519483.aspx)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T22:16:28.660

阅读文档。随着 32 位处理的引入，`GlobalAlloc()`实际上不再分配全局内存。

要与另一个进程共享内存块，您可以分配该块`GlobalAlloc()`并将其放在剪贴板上，然后让其他进程检索它。`CreateFileMapping()`或者，您可以使用and来分配一块共享内存`MapViewOfFile()`。

# objective-c - MKMapVIew 在 iOS 5 中显示 googleMap，在 iOS 6 中显示 Apple 地图

> ID：12619431
> 
> 赞同：1
> 
> 时间：2012-09-27T10:36:05.147
> 
> 标签：objective-c, google-maps, mkmapview, ios6-maps

> **可能重复：**
> [让用户在 IOS 6 中选择谷歌地图和苹果地图？](https://stackoverflow.com/questions/12524012/let-users-choose-between-google-maps-and-apple-maps-in-ios-6)

在我的应用程序中，我使用了 MKMapView，它在 iOS 5.0 中显示谷歌地图，但在 iOS 6.0 中显示 Apple 地图。我想在两个操作系统中都显示谷歌地图，因为苹果地图在 iOS 5.0 中不可用。可能吗？任何建议都会被接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:41:23.617

[让用户在 iOS 6 中选择谷歌地图和苹果地图？](https://stackoverflow.com/questions/12524012/let-users-choose-between-google-maps-and-apple-maps-in-ios-6)

这个问题几乎可以回答它，但是这里的其他人提供了一个谷歌地图叠加层，你可以试试！

[https://github.com/mladjan/GoogleMapsOverlayiOS](https://github.com/mladjan/GoogleMapsOverlayiOS)

# sql-server - 移动和合并报告服务器实例

> ID：12619436
> 
> 赞同：2
> 
> 时间：2012-09-27T10:36:29.403
> 
> 标签：sql-server, reporting-services, ssrs-2008, reportingservices-2005, reportserver

我有一台运行 SSRS 和 SQL Server 的机器，目前我们使用 SSRS 并将其配置为使用 localhost SQL Server 托管的 ReportServer 和 ReportServertempdb。

现在我们需要停用这台机器并将报告转移到全新的机器上。现在全新的机器没有 SQL Server，但我们有另一个 SQL Server，它有 2 个预先存在的数据库：ReportServer 和 ReportServertempdb，它们已经被另一个 SSRS 实例使用。现在我们计划将它们也用于我们要移动的 SSRS 实例。

多个 SSRS 实例是否可以使用相同的 ReportServer 和 ReportServertempdb？如果是的话，你如何合并这些？存在某些相互矛盾的价值观。例如，在“ConfigurationInfo”表中的 ReportServer DB 中，对于我当前的实例，SystemReportTimeout 为 1800，但在我建议的实例上，值为 -1。在合并期间如何解决这个问题？我在两个 ReportServer 数据库中有许多冲突的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:16:42.817

您可以在您的机器上创建多个数据库，每个 DB + TempDB 用于一个实例。但是不可能为两个不同的实例共享 DB + TempDB。

即使这在理论上可行，您也会遇到很多同步问题。缓存表、安全令牌等。

编辑：所以恕我直言，备份您的数据库并以不同的名称恢复。然后您的 SSRS 配置管理器连接到现有数据库。如果您为这些数据库使用安全令牌，请确保您拥有 .snk 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T04:22:19.527

尽管您可以跨多个实例共享 RS 数据库，但您不能将两个不同的数据库合并到同一个数据库中。不幸的是，我们甚至不能重命名 RS 数据库，因为它们被视为系统数据库。您最好的选择是查看您是否可以在同一服务器上的另一个 SQL 实例上托管您的数据库，或者在新服务器上重新部署您的报告。有关其他信息，您可以参考以下链接：横向扩展部署： http: [//msdn.microsoft.com/en-us/library/ms157293 (v=SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms157293(v=SQL.90).aspx)

管理 RS 数据库：http://msdn.microsoft.com/en-us/library/ms156421%28v=SQL.90%29.aspx [http://msdn.microsoft.com/en-us/library/ms159093.aspx](http://msdn.microsoft.com/en-us/library/ms159093.aspx)

# php - jquery图像动画弹回原始大小

> ID：12619437
> 
> 赞同：1
> 
> 时间：2012-09-27T10:36:31.200
> 
> 标签：php, jquery, html, image, resize

我有一个小问题。我有一个链接，当我单击此链接时，我希望图像增长到一定大小并移动到屏幕上的某个位置。一切都很好，只是动画完成后图像弹回原来的大小。

我的项目在 Magento 中，对于图像的奇怪显示感到抱歉

PS：在 img 标签中，它显示 width="235" height="401"。但是图像弹出到 width=924" 和 height="1379"。这些是实际图像的尺寸。

这是我的 HTML 代码：

```
<a class="lightbox"href="#">pic</a>
<p class="product-image">
<?php
    $_img = '<img id="image1" src="'.$this->helper('catalog/image')->init($_product, 'image').'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'" width="235" height="401  "  />';
    echo $_helper->productAttribute($_product, $_img, 'image');
?> 
```

这是我的 jQuery 代码：

```
(function(window, $, undefined) {

jQuery(function(){
    $('.lightbox').click(function(e) {
        $('body').css('overflow-y', 'hidden'); // hide scrollbars!
        var clicked = $('.lightbox').position();

        $('<div id="overlay"></div>')
          .css('top', $(document).scrollTop())
          .css('opacity', '0')
          .animate({'opacity': '0.5'}, 'slow')
          .appendTo('body');

        $('<div id="lightbox"></div>')
          .hide()
          .appendTo('body');

        var img = new Image();
        img.onload = function() {

            var width  = img.width,
                height = img.height;

            $('<img />')
              .attr('src', img.src)
              .load(function() {
                positionLightboxImage(e, width, height);
              })
              .click(function() {
                removeLightbox();
              })
              .appendTo('#lightbox');
        };
        img.src = $('#image1').attr('src');

        /*var height = $('<img />').attr('width', .width());
        alert(height);

        $('<img />')
          .attr('src', $(this).attr('href'))
          .load(function() {
            positionLightboxImage(e);
          })
          .click(function() {
            removeLightbox();
          })
          .appendTo('#lightbox');

        return false;*/
        e.preventDefault();
      });
});

    function positionLightboxImage(e, width, height) {
      var top = e.pageY - (height / 2);
      var left = e.pageX - (width / 2);
      $('#lightbox')
        .css({
          'top': top,
          'left': left
        })
        .fadeIn(1)
        .animate({'width': '50px'}, 3000);
    }

    function removeLightbox() {
      $('#overlay, #lightbox')
        .fadeOut('slow', function() {
          $(this).remove();
          $('body').css('overflow-y', 'auto'); // show scrollbars!
        });
    }

    jQuery.fn.center = function () {
        this.css("position","absolute");
        this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) + 
                                                    $(window).scrollTop()) + "px");
        this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) + 
                                                    $(window).scrollLeft()) + "px");
        return this;
    }

})(window, jQuery); 
```

我希望我提供了足够的信息。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:58:30.033

对于任何对此答案感兴趣的人。

这不是解决此问题的最佳方法。但是为灯箱使用较小的图像并将大图像保留在 data-src 中可以解决这种情况。

# typo3 - tt_news 存档链接未生成

> ID：12619440
> 
> 赞同：0
> 
> 时间：2012-09-27T10:36:44.230
> 
> 标签：typo3, tt-news

在我最新模板的顶部，我有

```
<!--###LINK_ARCHIVE###-->###GOTOARCHIVE###<!--###LINK_ARCHIVE###--> 
```

在我的配置中，我有：

```
pid_list = 18
archiveTypoLink.parameter = 86
singlePid = 87 
```

最新视图、单个视图和列表视图都可以正常工作，但未显示链接存档链接。我错过了什么！（谢谢！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:26:15.663

我的错。配置值被定义为常量！

`archiveTypoLink.parameter`要呈现存档链接是必需的。

# maven - 我可以使用 maven pom.xml 中的属性文件进行飞行路径配置吗

> ID：12619446
> 
> 赞同：24
> 
> 时间：2012-09-27T10:36:57.830
> 
> 标签：maven, pom.xml, flyway

```
<plugin>
    <groupId>com.googlecode.flyway</groupId>
    <artifactId>flyway-maven-plugin</artifactId>
    <version>1.7</version>
    <configuration>
        <driver>com.mysql.jdbc.Driver</driver>
        <url>jdbc:mysql://127.0.0.1:3306/db_abc</url>
        <user>db_user</user>
        <sqlMigrationPrefix>V</sqlMigrationPrefix>
    </configuration>
</plugin> 
```

我不想在这里提及驱动程序、url 和用户。我已经开了`abc.property`一个`src/main/resources`。如何在这里使用该文件？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-27T10:40:05.753

看看[`properties-maven-plugin`](https://www.mojohaus.org/properties-maven-plugin/)。它允许您从文件中读取属性，然后在 pom.xml 中使用它们。

添加以下插件定义：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0.0</version>
    <executions>
      <execution>
        <phase>initialize</phase>
        <goals>
          <goal>read-project-properties</goal>
        </goals>
        <configuration>
          <files>
            <file>src/main/resources/abc.properties</file>
          </files>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

如果`abc.properties`包含：

```
jdbc.driver = com.mysql.jdbc.Driver
jdbc.url = jdbc:mysql://127.0.0.1:3306/db_ab
jdbc.user = db_user 
```

然后，您可以按如下方式使用属性：

```
<!-- language: xml -->

<driver>${jdbc.driver}</driver>
<url>${jdbc.url}</url>
<user>${jdbc.user}</user> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-07T12:58:22.253

在 3.0 版中，您必须使用 configFile ，例如：

```
<configFile>src/main/resources/db/config/flyway.properties</configFile> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-11T07:13:25.210

在我看来，最好和最灵活的方法是：

a)**使用配置文件和过滤**- 保留特定配置文件（开发、测试等）的所有配置属性，例如在 development.properties 中：

```
jdbc.url=jdbc:mysql://127.0.0.1:3306/testdb?useSSL=false
jdbc.user=testuser
jdbc.password=testpass
jdbc.driver=com.mysql.jdbc.Driver 
```

然后，在你的 pom 文件中（可能在 root pom 中）定义一个配置文件，例如：

```
...
<profiles>
    <profile>
        <id>development</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <build>
            <filters>
                <filter>../filters/development.properties</filter>
            </filters>
        </build>
        ... 
```

在这里您可以看到默认情况下已激活*开发配置文件。*如果您想使用另一个配置文件，请将其设置为

```
-p [profile-id] 
```

b)**使用过滤**值设置 flyway.properties - 您的 flyway.properties 应该位于例如 src/main/resources 中，并且应该从配置文件属性文件中定义的参数中使用这些值：

```
flyway.driver = ${jdbc.driver}
flyway.url = ${jdbc.url}
flyway.user = ${jdbc.user}
flyway.password = ${jdbc.password} 
```

c)**从构建目录引用 flyway.properties** - 使用简单的插件配置（我真的很喜欢干净的 poms）：

```
...
    <build>
        <resources>
            <!-- This way we instruct maven to inject values from filters into the resources -->
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.flywaydb</groupId>
                <artifactId>flyway-maven-plugin</artifactId>
                <configuration>
                    <configFile>${project.build.directory}/classes/flyway.properties</configFile>
                    <locations>
                        <location>classpath:migration/mysql</location>
                    </locations>
                </configuration>
            </plugin>
        </plugins>
    </build>
    ... 
```

不要忘记启用资源过滤，如此处的许多示例所示。我的**flyway-maven-plugin 版本是 3.2.1**，它在父 pom 的 pluginManagement 中管理，因此这里看不到版本。我还使用带有位置配置的显式 sql 脚本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T11:22:35.640

有几种方法可以解决这个问题。一种方法是反过来做。

这意味着要使用的属性被保存为内部的属性，`pom.xml`并且文件`abc.properties`只有占位符，这些占位符将在构建时填充。

我将向您展示如何配置它。

这就是`pom.xml`会的样子：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q12619446</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <jdbc.driver>com.mysql.jdbc.Driver</jdbc.driver>
        <jdbc.url>jdbc:mysql://127.0.0.1:3306/db_abc</jdbc.url>
        <jdbc.user>db_user</jdbc.user>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>com.googlecode.flyway</groupId>
                <artifactId>flyway-maven-plugin</artifactId>
                <version>1.7</version>
                <configuration>
                    <driver>${jdbc.driver}</driver>
                    <url>${jdbc.url}</url>
                    <user>${jdbc.user}</user>
                </configuration>
            </plugin>
        </plugins>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>
</project> 
```

这将是您的`src/main/resources/abc.properties`（使用您选择的键名）：

```
jdbcDriver = ${jdbc.driver}
jdbcUrl = ${jdbc.url}
jdbcUser = ${jdbc.user} 
```

构建`target/classes/abc.properties`后将如下所示：

```
jdbcDriver = com.mysql.jdbc.Driver
jdbcUrl = jdbc:mysql://127.0.0.1:3306/db_abc
jdbcUser = db_user 
```

* * *

如前所述，这只是几种方法**之一**。它可能不适合您的确切需求，但可以。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-26T09:09:59.377

加里，

还有另一种方法可以不将数据库连接参数放置到您的 pom 文件中。特别是，可以将它们添加到用户文件夹[[1]](http://maven.apache.org/settings.html)的 .m2 子文件夹中的 settings.xml 文件中。好处是 db 参数不存在于项目文件夹中并且不会传输到存储库，因此每个开发人员都可以使用自己的设置。

设置文件的示例可能类似于以下示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <profiles>
    <profile>
      <id>fw</id>
      <properties>
        <flyway.url>jdbc:oracle:thin:@//localhost:1521/xe</flyway.url>
        <flyway.user>Your login</flyway.user>
        <flyway.password>Your password</flyway.password>
      </properties>
    </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>fw</activeProfile>
  </activeProfiles>
</settings> 
```

之后，您可以根据以下代码段修改您的 pom 文件。

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    ...
    <dependencies>
        ...
    </dependencies>

    <profiles>
        <profile>
            <id>fw</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.flywaydb</groupId>
                        <artifactId>flyway-maven-plugin</artifactId>
                        <version>3.2.1</version>
                        <configuration>
                            <url>${flyway.url}</url>
                            <user>${flyway.user}</user>
                            <password>${flyway.password}</password>
                        </configuration>
                        <dependencies>
                            <dependency>
                                <groupId>com.oracle</groupId>
                                <artifactId>ojdbc7</artifactId>
                                <version>12.1.0.1.0</version>
                            </dependency>
                        </dependencies>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project> 
```

在上面的示例中使用了 Oracle 的驱动程序，但您可以将其替换为所需的驱动程序。

要打印当前设置，请执行以下操作。

```
mvn help:effective-settings 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-19T12:26:48.430

在 3.x 版本中，您有 configFile 选项

```
By default- flyway.properties in the same directory as the project POM. 
```

您可以在 pom 的配置部分添加外部属性文件，也可以在运行 maven 目标示例-命令行时传递-

```
mvn <goal> -Dflyway.configFile=myConfig.properties 
```

Pom文件-

```
<plugin>
<groupId>org.flywaydb</groupId>
<artifactId>flyway-maven-plugin</artifactId>
<version>3.2.1</version>
<configuration>
    <driver/>
    <url/>
    <user/>
    <password/>
    <baselineVersion>1.0</baselineVersion>
    <baselineDescription>Base Migration</baselineDescription>
    <skip>false</skip>
    <configFile>myConfig.properties</configFile>
    </configuration>
</plugin> 
```

# php - 有什么方法可以将内容从维基百科加载到我的网站？

> ID：12619449
> 
> 赞同：-4
> 
> 时间：2012-09-27T10:37:05.643
> 
> 标签：php, wikipedia-api

> **可能重复：**
> [是否有 Wikipedia API？](https://stackoverflow.com/questions/627594/is-there-a-wikipedia-api)

是否有任何 API 或任何特定方式将页面加载到我的网站。例如，如果正在查看 www.mysite.com/php ，它应该显示一个包含来自 wiki 的数据的块！

也请举个例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:39:10.733

是的，[Wikipedia API 的文档显示在 Google](http://www.mediawiki.org/wiki/API)[搜索 Wikipedia API](https://www.google.co.uk/search?q=wikipedia+api)的顶部附近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:39:59.970

维基百科有一个 API，参见：

[http://en.wikipedia.org/w/api.php](http://en.wikipedia.org/w/api.php)

您可以使用它来加载内容，但请注意不要简单地从 Wikipedia 进行“数据挖掘”，因为这会在搜索引擎中对您的网站进行负面评分。

# servlets - 码头webSocket：java.lang.IllegalStateException：已提交

> ID：12619452
> 
> 赞同：4
> 
> 时间：2012-09-27T10:37:22.073
> 
> 标签：servlets, jetty

我在我的 Web 应用程序中使用 Jetty Websockets。

当我尝试重定向到注销 jsp 时，我收到此错误

```
oejs.ServletHandler:/test
java.lang.IllegalStateException: Committed
        at org.eclipse.jetty.server.Response.resetBuffer(Response.java:1069)
        at javax.servlet.ServletResponseWrapper.resetBuffer(ServletResponseWrapper.java:232)
        at org.eclipse.jetty.http.gzip.GzipResponseWrapper.resetBuffer(GzipResponseWrapper.java:273)
        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:199)
        at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:98) 
```

这是我重定向的方式

```
RequestDispatcher rd = request.getRequestDispatcher("logoff.jsp");
    rd.forward(request, response); 
```

这个错误是不可重现的，但你能告诉我它什么时候会发生吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-10-30T15:44:32.633

> java.lang.IllegalStateException：已提交

我想我会对异常的含义提供更一般的解释。首先，Jetty 应该对异常消息感到羞耻。它对开发人员几乎没有帮助，除非他们已经知道它的实际含义。异常应该是这样的：

> java.lang.IllegalStateException：响应标头已发送。您是否在发送内容后尝试返回结果？

通常，当您打电话时会发生此异常：

```
 resp.getOutputStream();  // or getWriter() 
```

然后尝试做重定向或其他事情：

```
 resp.sendRedirect("/someOtherUrl");
 // or
 return new ModelAndView("redirect:/someOtherUrl"); 
```

一旦你得到了`OutputStream`or`Writer`这样你就可以向客户端写入正文字节，Jetty 必须提交响应并发送 HTTP`200`和相关的标头，以便它可以开始返回正文字节。一旦发生这种情况，您就不能进行重定向，也不能对状态代码或标头进行任何其他更改。

一旦返回正文字节，正确的做法是`null`从处理程序返回而不是 a`ModelAndView(...)`或只是将处理程序更改为 return `void`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-07T06:41:40.197

当您在自己的方法实现中调用超级方法时，您也会遇到此异常。

例子：

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) {
    super.doPost(req, resp); // <-- THIS IS THE PROBLEM
    resp.sendRedirect("/someOtherUrl");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T04:18:39.610

发生这种情况是因为您的响应已经处理了重定向请求，您正在尝试修改已提交的响应。

解决这个问题的一般方法有两种：

1.  找出第一个重定向在哪里，并尝试修改逻辑以防止“两次重定向”的情况发生。
2.  在每次重定向后放置一个“return”（我个人推荐这个解决方案）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-07T15:45:36.450

我这边的原因是使用错误网址的码头：
正确：`http://localhost:8080`
错误：`http://localhost:8080/test`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-22T12:22:31.657

考虑您`javax.servlet.Filter`在 Jetty 服务器上运行，并且您面临同样的异常。这里的问题可以完全按照格雷的描述来描述（感谢格雷）。通常，当您打电话时会发生此异常：

```
resp.getOutputStream();  // or getWriter() 
```

然后

```
chain.doFilter(request, response); 
```

如果您致电`resp.getOutputStream();`，请确保您没有`chain.doFilter(request, response);`在同一请求中使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-02T12:58:25.090

就我而言，我有一些存储库，我在课堂开始时将`@Service`其声明为`RepositoryFoo repositoryFoo;`

我忘了添加`@Autowired`甚至忘记添加它`private`，所以它编译得很好，然后在运行时我就有了这个`java.lang.IllegalStateException: Committed`……我浪费了一些时间才弄清楚原因！

# android - 实现搜索活动android的自定义建议

> ID：12619453
> 
> 赞同：6
> 
> 时间：2012-09-27T10:37:27.330
> 
> 标签：android, searchactivity

我正在从这个博客[http://weblog.plexobject.com/?p=1689](http://weblog.plexobject.com/?p=1689)在 doSearchQuery 中实现搜索活动的自定义建议列表，但无法理解他做了什么。另一件事是，当我通过输入例如月份名称进行搜索并以“A”开头时，它会比较它并返回这些匹配结果 August、April 等，但在建议列表中仅显示“a”以及所有匹配结果，如“j”包含在一月、六月、七月。但在得到 j、j、j 的建议列表中只没有这个月份的名称。我错了或遗漏了我不理解的地方

这是我的 SearchActivity 代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.search_activity);
    this.setDefaultKeyMode(Activity.DEFAULT_KEYS_SEARCH_LOCAL);

    final Intent queryIntent = getIntent();

    final String queryAction = queryIntent.getAction();
    if (Intent.ACTION_SEARCH.equals(queryAction)) {
        this.doSearchQuery(queryIntent);
    } else if (Intent.ACTION_VIEW.equals(queryAction)) {
        this.doView(queryIntent);
    } else {
        Log.d(TAG, "Create intent NOT from search");
    }

}

@Override
public void onNewIntent(final Intent queryIntent) {
    super.onNewIntent(queryIntent);
    final String queryAction = queryIntent.getAction();
    if (Intent.ACTION_SEARCH.equals(queryAction)) {
        this.doSearchQuery(queryIntent);
    } else if (Intent.ACTION_VIEW.equals(queryAction)) {
        this.doView(queryIntent);
    }
}
// here in this didn't under what he did one is getting intent and bundle but where he define it.
private void doSearchQuery(final Intent queryIntent) {
    String queryString = queryIntent.getDataString(); // from suggestions
    if (query == null) {
        query = intent.getStringExtra(SearchManager.QUERY); // from search-bar
    }

    // display results here
    bundle.putString("user_query", queryString);
    intent.setData(Uri.fromParts("", "", queryString));

    intent.setAction(Intent.ACTION_SEARCH);
    queryIntent.putExtras(bundle);
    startActivity(intent);
    Log.e("query string", "query string "+queryString);
}

private void doView(final Intent queryIntent) {
    Uri uri = queryIntent.getData();
    String action = queryIntent.getAction();
    Intent intent = new Intent(action);
    intent.setData(uri);
    startActivity(intent);
    this.finish();
} 
```

这是我的提供者，我需要单行建议我评论第二列

```
public class MySuggestionProvider extends SearchRecentSuggestionsProvider {
    public final static String AUTHORITY = MySuggestionProvider.class.getName();
    public final static int MODE = DATABASE_MODE_QUERIES;
    private final static String TAG = MySuggestionProvider.class.getSimpleName();

    private static final String[] COLUMNS = {
            "_id", // must include this column
            SearchManager.SUGGEST_COLUMN_TEXT_1,
//          SearchManager.SUGGEST_COLUMN_TEXT_2,
            SearchManager.SUGGEST_COLUMN_INTENT_DATA,
            SearchManager.SUGGEST_COLUMN_INTENT_ACTION,
            SearchManager.SUGGEST_COLUMN_SHORTCUT_ID };

    public MySuggestionProvider() {
        setupSuggestions(AUTHORITY, MODE);
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {

        String query = selectionArgs[0];
        if (query == null || query.length() == 0) {
            return null;
        }

        MatrixCursor cursor = new MatrixCursor(COLUMNS);

        try {
            List<String> list = callmyservice(query);
            int n = 0;
            for (String obj : list) {
                cursor.addRow(createRow(Integer.valueOf(n), query, obj));
                n++;
            }
        } catch (Exception e) {
            Log.e(TAG, "Failed to lookup " + query, e);
        }
        return cursor;
    }

    @Override
    public Uri insert(Uri uri, ContentValues values) {
        throw new UnsupportedOperationException();
    }

    @Override
    public int delete(Uri uri, String selection, String[] selectionArgs) {
        throw new UnsupportedOperationException();
    }

    @Override
    public int update(Uri uri, ContentValues values, String selection,
            String[] selectionArgs) {
        throw new UnsupportedOperationException();
    }

    private Object[] createRow(Integer id, String text1,
            String name) {
        return new Object[] { id, // _id
                text1, // text1
                //text2, // text2
                text1, "android.intent.action.SEARCH", // action
                SearchManager.SUGGEST_NEVER_MAKE_SHORTCUT };
    }
    private static final String[] months = {"January", "February","march","April","may","june","july","August","September","octobor",
        "november","december"};
    List<String> ls2 = new ArrayList<String>();
    private List<String> callmyservice(String query){
        List<String> ls = new ArrayList<String>();

        for(int i=0;i<months.length;i++){
            if(months[i].toLowerCase().contains(query.toLowerCase())){
                //if(months[i].equalsIgnoreCase(query.toLowerCase())){
                ls.add(months[i]);
            }
        }

        ls2.clear();
        ls2.addAll(ls);

        return ls;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T10:21:15.110

我找到了如何实施自定义建议的方法。对此进行一些更改，您可以在建议列表中实现搜索建议单行或双行。

对于单行建议，我先解释一下。

从问题代码中，我更改了一些并实现了单行建议列表。

从 COLUMN 对象更改此

```
private static final String[] COLUMNS = {
        "_id", // must include this column
        SearchManager.SUGGEST_COLUMN_TEXT_1,
        SearchManager.SUGGEST_COLUMN_INTENT_DATA,
        SearchManager.SUGGEST_COLUMN_INTENT_EXTRA_DATA,
        SearchManager.SUGGEST_COLUMN_SHORTCUT_ID }; 
```

现在在 createRow() 时间只需传递对象一个是 ID，另一个是 query() 方法中的建议列表值。

```
List<String> list = callmyservice(query);
int n = 0;
for (String obj : list) {
     cursor.addRow(createRow(Integer.valueOf(n),obj));
      n++;
} 
```

现在像这样实现 createRow()。

```
private Object[] createRow(Integer id, String text1){
    return new Object[] { id, // _id
            text1, // text1
            text1, // data to sent back to activity and select
            text1, // data sent as extra data when select from suggestin list
            SearchManager.SUGGEST_NEVER_MAKE_SHORTCUT};
} 
```

好的，这是实现此功能时的外观。

![在此处输入图像描述](../Images/0cd9ef1037ab823f61d6d63de5de301c.png)

好的，现在为两行搜索建议列表创建这样的 COLUMN 对象

```
private static final String[] COLUMNS = {
        "_id", // must include this column
        SearchManager.SUGGEST_COLUMN_TEXT_1,
        SearchManager.SUGGEST_COLUMN_TEXT_2,
        SearchManager.SUGGEST_COLUMN_INTENT_DATA,
        SearchManager.SUGGEST_COLUMN_INTENT_EXTRA_DATA,
        SearchManager.SUGGEST_COLUMN_INTENT_ACTION,
        SearchManager.SUGGEST_COLUMN_SHORTCUT_ID }; 
```

现在实现 createRow() 方法并像这样从 query() 调用 // query() 方法 List list = callmyservice(query); 诠释 n = 0; for (String obj : list) { // 这里查询是您当前输入的文本 for search for text_1 // obj 是与此查询一起找到的匹配列表作为结果并显示为 text_2 cursor.addRow(createRow(Integer.valueOf(n) , 查询, obj)); n++; }

```
private Object[] createRow(Integer id, String text1, String name) {
    return new Object[] { id, // _id
            text1, // text1
            text2, // text2
            text1, // data to be sent when select from list as query
            text2, // data to be sent as extra string when select from list as result
            "android.intent.action.SEARCH", // action
            SearchManager.SUGGEST_NEVER_MAKE_SHORTCUT };
} 
```

这是两行搜索建议列表的视图

![在此处输入图像描述](../Images/7df072d08aa2ba0839129fc9f5f49db2.png)

好的，希望这对您有所帮助。

# asp.net - UserControl 上的代码创建错误

> ID：12619463
> 
> 赞同：0
> 
> 时间：2012-09-27T10:37:40.627
> 
> 标签：asp.net

我使用以下代码在我的 asp .net 应用程序上打开 PDF：

```
 Response.Buffer = false; //new
    Response.Clear(); //new
    Response.ClearContent();
    Response.ClearHeaders();
    Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);
    Response.ContentType = "Application/pdf";
    try
    {
        Response.TransmitFile(filename); 
        Response.End();
    }
    catch
    {
        Response.ClearContent();
    } 
```

在大多数情况下工作正常，但是当我将此代码放在 UserControl 按钮事件上时，它给了我一个解析器错误，是否有一种简单的方法来修复或触发完整的回发，所以它应该可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:50:06.257

找到答案，在 page_load 中执行此操作：

```
ScriptManager.GetCurrent(this.Page).RegisterPostBackControl(Button); 
```

# jquery - 将滚动应用于浏览器而不是 jquery flexigrid 中的表格

> ID：12619474
> 
> 赞同：0
> 
> 时间：2012-09-27T10:38:08.780
> 
> 标签：jquery, css, flexigrid

你好，我正在使用[flexigrid 插件](http://www.flexigrid.info/)来制作轻量级但丰富的数据网格。

您可以在插件站点上找到工作演示。

像这样

```
$('#tblMatrixView').flexigrid({ height: 'auto', showToggleBtn: false, singleSelect: true }); 
```

其中**tblMatrixView**是我的表 ID

这太棒了，但我遇到了一个问题，即在调整列大小时，它会水平滚动到表格，但我想滚动到浏览器窗口。

如何完成这件事我尝试了 2-3 天但没有成功。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:39:47.673

像这样设置样式属性

```
style="position:absolute;overflow:auto;" 
```

为我最外层的 div 工作

# ruby-on-rails - 修改返回类别中产品列表的查询，现在它返回基于名称的产品列表

> ID：12619478
> 
> 赞同：0
> 
> 时间：2012-09-27T10:38:30.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个产品列表和一个类别列表。现在产品和品类是**多对多的关系**。

我有以下代码搜索列表并找到所有正在搜索的产品..

```
if params[:search]
  @products = Product.find(:all, :conditions => ['name LIKE ?', "%#{params[:search]}%"])
else
 @products = Product.all
end 
```

如何将其转换为向我返回某个类别的产品列表？

那是

```
@products = Product.find(:all, :conditions => ["what should be here"]) 
```

或任何其他查询一起

代码位于[https://github.com/abhishekdagarit/store.git](https://github.com/abhishekdagarit/store.git)

**在代码*类别*中称为*组***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:36:33.190

```
@products = Product.find(:all, :include => :group, :conditions => ['name ILIKE ? OR group.products ILIKE ?', "%#{search}%", "%#{search}%" ]) 
```

# asp.net - 如何在页面加载期间显示 UpdateProgress 栏

> ID：12619482
> 
> 赞同：0
> 
> 时间：2012-09-27T10:38:44.720
> 
> 标签：asp.net

```
<asp:UpdateProgress ID="UpdateProgress1" runat="server"  DisplayAfter="0" DynamicLayout="true"
     AssociatedUpdatePanelID="update1">
    <ProgressTemplate>
        <div class="TransparentGrayBack">
        </div>
        <div class="Sample5PageUpdate">
            <img src="../RadControls/Ajax/Skins/Default/ajax-loader4.gif" alt="" />
        </div>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

我正在使用更新进度。它工作正常。但现在我希望在页面加载期间显示更新进度。你能建议我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:11:11.257

不完全确定您要实现的目标，但如果它与我试图实现的目标一样，问题是页面在后台初始化（数据绑定和所有），阻止您的 UpdateProgress 显示直到整个页面被加载（失败的目的）

您的选项与您等待加载的数据类型有关。如果您只关心列表和其他数据绑定的加载，那么您可以做的是延迟加载。也就是说，不要在后面的代码中对页面加载时的任何这些项目进行数据绑定。这应该会导致页面显示，这是您需要它处于的状态，以确保 UpdateProgress 面板在后台呈现。然后在准备好文档后，返回并异步加载您的数据绑定项目。此异步调用将导致您的 UpdateProgess 面板触发，在加载剩余数据之前阻止页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:04:59.557

试试这个 jQuery 插件

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

即使页面回发正在发生，它也可以工作。

# php - 按周/月/所有时间对帖子进行排序

> ID：12619484
> 
> 赞同：0
> 
> 时间：2012-09-27T10:38:49.653
> 
> 标签：php, wordpress, sorting, filter

所以我设法用一些基本设置对我的帖子进行了排序。我想从 date-asc、date-dec、comments 等周、月、所有时间更改它。我还希望合并以下代码，仅对投票最多的帖子进行排序，而不是对所有帖子进行排序

```
meta_key=votes_count&orderby=meta_value_num&order=DESC&posts_per_page=10 
```

目前我的工作评分最高的页面，它对我的​​日期升序、标题等进行排序：

```
<?php
if( isset($_GET['o']) && $_GET['o'] != '')
      {
          $order = $_GET['o'];
          switch($order)
          {
            case 'date-asc': $orderby = 'order=ASC';
                        $msg = 'Date Ascending';
                          break;

            case 'date-desc': $orderby = 'order=DESC';
                        $msg = 'Date Descending(default)';
                          break;

            case 'date-mod': $orderby = 'orderby=modified';
                            $msg = 'Date Modified';
                           break;

            case 'title-asc': $orderby = 'orderby=title&order=ASC';
                            $msg = 'Title A-Z';
                            break;

            case 'title-desc': $orderby = 'orderby=title&order=DESC';
                            $msg = 'Title Z-A';
                            break;

            case 'comment': $orderby = 'orderby=comment_count';
                            $msg = 'Comment Count';
                            break;
          }
      }
      else
      {
          $orderby = 'order=DESC';
          $msg = 'Date Descending (default)';
      }
?>

<div id="content">

<div id="sorter-container">

<h2 id="sort-heading">Posts ordered by:<?php echo $msg; ?></h2>
    <select id="order-by">
        <option value="date-desc" <?php echo (!isset($order) || $order == '' || $order == 'date-desc')? 'selected="selected"':''; ?>>Date Desc. (default)</option>
        <option value="date-asc" <?php echo ($order == 'date-asc')? 'selected="selected"':''; ?>>Date Asc</option>
        <option value="date-mod" <?php echo ($order == 'date-mod')? 'selected="selected"':''; ?>>Date Modified</option>
        <option value="title-desc" <?php echo ($order == 'title-desc')? 'selected="selected"':''; ?>>Title Desc.</option>
        <option value="title-asc" <?php echo ($order == 'title-asc')? 'selected="selected"':''; ?>>Title Asc.</option>
        <option value="comment" <?php echo ($order == 'comment')? 'selected="selected"':''; ?>>Comments Count</option>
    </select>
</div>
    <script type="text/javascript">
            var orderby = jQuery('#order-by');
            var str;
            orderby.change(function(){
                str = jQuery(this).val();
                 window.location.href = "<?php echo home_url(); ?>/top-rated/?o="+str;
            });
  </script> 
```

**EDIT2：** 好的，这就是我所拥有的，它不再起作用了，所以我只是继续并将周/月/所有时间添加到我认为应该去的地方（我知道它不正确，但我不确定如何限制排序仅 7 天等。

```
<?php
if( isset($_GET['o']) && $_GET['o'] != '')
      {
          $order = $_GET['o'];
          switch($order)
          {
            case 'week': $orderby = 'meta_key=votes_count&orderby=meta_value_num&order=DESC&WEEK&posts_per_page=10';
                        $msg = 'This Week (default)';
                          break;

            case 'month': $orderby = 'meta_key=votes_count&orderby=meta_value_num&order=DESC&MONTH&posts_per_page=10';
                            $msg = 'This Month';
                           break;

            case 'alltime': $orderby = 'meta_key=votes_count&orderby=meta_value_num&order=DESC&ALLTIME&posts_per_page=10';
                            $msg = 'All Time';
                            break;
      else
      {
          $orderby = 'order=DESC';
          $msg = 'This Week (default)';
      }
?>

<div id="content">

<div id="sorter-container">

<h2 id="sort-heading">Posts ordered by:<?php echo $msg; ?></h2>
    <select id="order-by">
        <option value="week" <?php echo (!isset($order) || $order == '' || $order == 'week')? 'selected="selected"':''; ?>>This Week (default)</option>
        <option value="month" <?php echo ($order == 'month')? 'selected="selected"':''; ?>>This Month</option>
        <option value="alltime" <?php echo ($order == 'alltime')? 'selected="selected"':''; ?>>All Time</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:04:46.307

如问题评论中所述，您当前的代码库无法执行您想要的操作。

[wp-postratings](http://wordpress.org/extend/plugins/wp-postratings/)可以完全按照您的要求在常见问题解答中有一个问题**To Display Highest Rated Post Within A Given Period**。
看看那里你应该能够弄清楚这一点。

# javascript - 如何在Phonegap中将值从iOS返回到javascript？

> ID：12619488
> 
> 赞同：0
> 
> 时间：2012-09-27T10:39:07.153
> 
> 标签：javascript, ios, cordova

我无法在 Cordova 1.7.0 中传递结果或将值从原生 iOS 返回到 javascript。提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:53:45.543

您可以在原生 iOS 中编写代码。

例如。

```
-(void) onClose {

       NSString* jsCallback = [NSString stringWithFormat:@"ChildBrowser._onClose(%d);",am.setPage];
       [self.webView stringByEvaluatingJavaScriptFromString:jsCallback];
} 
```

然后在“childbrowser.js”文件中编码，

代码：

```
ChildBrowser._onClose = function(getPg)
{
    window.localStorage.setItem("setPage", getPg);

    window.plugins.childBrowser.onClose();
}; 
```

然后，您可以在需要时获取 javascript 文件。

例如。

```
var page = window.localStorage.getItem("setPage"); 
```

通过这种方式，

您可以使用插件从本机获取值到 js 代码。

谢谢。

# crystal-reports - 是否可以在没有格式编辑器的情况下为数字字段设置格式？

> ID：12619495
> 
> 赞同：0
> 
> 时间：2012-09-27T10:39:17.483
> 
> 标签：crystal-reports, crystal-reports-2008

我在当前项目中使用 Crystal 报表。（VS2010，C＃，WinForms）我想从代码中设置数字字段的格式（在代码中我想确定当前文化（CultureInfo）并为我的字段使用这种文化的特定分隔符）或者也许有人知道如何在 FormatEditor 中使用 CultureInfo ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:08:09.547

尝试以***自定义样式***编写***小数分隔符***的公式。 请参阅图像以供参考。 然后选择***自***定义打开自定义样式 **![格式编辑器](../Images/1f52ef7418d86727e55bd50d3bb4cd17.png)

 **![自定义样式](../Images/93c15b04c706c4fe64ddd53507c7bbf2.png)**** 

 ****在***Decimal*** Seperator 上写一个 if else 公式来显示**,**或**。**因为小数分隔符取决于您的要求（欧洲或美国）

试试这个并返回您的结果。
准备帮助你。****

# android - 如何在android的自定义列表视图中的复选框中启用单选

> ID：12619498
> 
> 赞同：0
> 
> 时间：2012-09-27T10:39:25.690
> 
> 标签：android, android-checkbox

我有一个列表视图。在列表视图的行中有 4 个文本视图和一个复选框。在从数组列表中设置的文本视图文本中。在列表视图中，有更多的 20 行。这是我的问题，如何在复选框中启用单选。一次我只想要一个复选框，如果我选中一个复选框，另一个被选中它会自动取消选中它是如何可能的。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:43:06.237

用于`youcheckbox.setchecked(false)`取消**选中**任何`checkbox`. 在任何`checkbox`点击上调用此方法为其他点击`checkboxes`

或使用`radioboxes`

# c# - 未加载新的 Outlook 邮件

> ID：12619504
> 
> 赞同：2
> 
> 时间：2012-09-27T10:39:51.230
> 
> 标签：c#, vsto, office-interop

我有以下简化代码：

```
using Outlook = Microsoft.Office.Interop.Outlook;
protected void SendEmailBtn_Click(object sender, EventArgs e)
        {
            Outlook.Application OutlookApp = new Outlook.Application();
            Outlook.MailItem mailItem = (Outlook.MailItem)OutlookApp.CreateItem(Outlook.OlItemType.olMailItem);
            mailItem.Subject = "Test Send Email";
            mailItem.BCC = "test@test.com";
            mailItem.Body = "Dear";
            mailItem.Display(false);
        } 
```

我已经安装了 Office 2007 和 2007 PIA，并在服务器（win2008 服务器）上部署了代码，但是当我点击发送按钮时，客户端机器上没有任何反应，outlook 邮件消息没有创建，页面只是停留在加载中状态，没有给出错误或异常。查看服务器上的任务管理器，Outlook 进程确实启动并正在运行。该代码在本地运行良好，即创建了 Outlook 邮件消息。我不确定是什么原因导致这种情况发生，可能是服务器上的防病毒软件阻止了文件访问？我需要安装其他东西吗？任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:34:58.900

如果您要做的只是将消息加载到 Outlook 窗口中供用户查看，然后发送给自己，我认为使用 Outlook 互操作是矫枉过正的。只需使用像这样的普通超链接：

```
<a href="mailto:?bcc=test@test.com&subject=Test+Send+Email&body=Dear">My Hyperlink</a> 
```

或者在 C# 中：

```
System.Diagnostics.Process.Start("mailto:?bcc=test@test.com&subject=Test+Send+Email&body=Dear"); 
```

# vb.net - 将数据发送到选中列表框

> ID：12619505
> 
> 赞同：1
> 
> 时间：2012-09-27T10:39:54.753
> 
> 标签：vb.net, linq-to-sql

我有一个查询，其中包含我放入选中列表框中的名称列表。但我也想用它发送我的桌子钥匙。但同时我不想表现出来。

当前代码：

```
 Dim Querynames = (From rec In db.table
                         Select rec.tableKey, rec.Names).ToList

        For Each item In Querynames 
          'Need to send my table key with each name
            CheckedListBox1.Items.Add(item.Names)
        Next 
```

我将使用这个表键来查询搜索。我想阻止的是制作第二个 Linq。

如何使用我的选中列表框发送“隐藏”数据（这将是表键），以便我可以从代码中获取键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:23:32.193

您应该将整个对象添加到 中`CheckedListBox`，而不仅仅是`Names`.

```
For Each item In Querynames 
    CheckedListBox1.Items.Add(item)
Next 
```

然后你应该设置[`DisplayMember`](http://msdn.microsoft.com/en-us/library/yx9dzztb.aspx)属性。

```
CheckedListBox1.DisplayMember = "Names" 
```

所以`CheckedListBox`只会显示`Names`属性。

您可能想要使用常规类而不是匿名类型，因此您可以将项目转换回以访问该`tableKey`属性。

* * *

考虑以下示例：

```
Sub Main
    Dim clb = new System.Windows.Forms.CheckedListBox()

    Dim f = new System.Windows.Forms.Form()
    f.Controls.Add(clb)

    Dim items = new Item() { new Item() with {.TableKey = "Foo", .Names = "Foobar"},
                             new Item() with {.TableKey = "ABC", .Names = "ABCDEFG"}}

    For Each item in items
        clb.Items.Add(item)
    next

    clb.DisplayMember = "Names"

    f.ShowDialog()

    Dim message = String.Join(" and ", clb.CheckedItems.Cast(Of Item).Select(Function(i) i.TableKey))
    System.Windows.Forms.MessageBox.Show(message)
End Sub

Class Item
    Public Property TableKey As String 
    Public Property Names As String 
End Class 
```

* * *

另一种方法是将查询结果存储在 an 中`Dictionary`，然后查找`Names`<->`tableKey`对。

# javascript - 无法从 javascript 中的 json 对象中检索信息

> ID：12619506
> 
> 赞同：1
> 
> 时间：2012-09-27T10:39:55.187
> 
> 标签：javascript, jquery, ajax, json

我设法提取了有关使用 AJAX 作为对象的用户的信息。这是返回的信息：

```
Object
0: "27"
1: "BORDAS"
2: "Marie"
3: "3"
4: "1978-01-13"
5: "comm"
6: "mus"
date_n: "1978-01-13"
loisirs: "mus"
nom: "BORDAS"
num: "27"
prenom: "Marie"
service: "comm"
titre: "3" 
```

我为检索信息而编写的代码是：

```
$.ajax( {
    url: 'edit.php',
type: 'post',
dataType: 'json',
data: { id: person }
}).done( function( results ) {
console.log( results );
console.log( results.prenom );
}); 
```

正如您在上面看到的，正在正确检索信息，但是当我执行 console.log( results.prenom ) 时，响应始终是“未定义”。

如何从对象中获取单个信息位？

谢谢。

* * *

我已经设法通过循环对象来让它工作：

```
$.each( results, function( key, value ) {
    console.log( value.prenom );
}); 
```

通过循环，console.log 的输出是我想要的人名。有没有办法在没有循环的情况下达到相同的结果？（据我所知，永远只有一个对象）

# jquery - Fancybox 2 无法在 Chrome 和 IE 中运行，尽管 firefox 和 Safari 都很好

> ID：12619507
> 
> 赞同：0
> 
> 时间：2012-09-27T10:39:59.580
> 
> 标签：jquery, fancybox

如果您查看此页面[https://www.social-cat.com/rwewho/index.php](https://www.social-cat.com/rwewho/index.php)您可以单击人员或城市，然后fancybox 会打开一个 iframe。这在 Firefox 和 Safari 中完美运行。

虽然 IE 只显示一个警告，它不显示不安全的元素（对不起，我不知道它的英文到底是什么意思）（如果你点击一张图片，它只会加载页面而没有花式框）如果我点击“允许”它工作正常。

在 chrome 中，它只是从 iframe 中加载页面而不打开fancybox。

谁能帮我弄清楚我能做什么？我认为这可能是 SSL 问题，但我的房东说这一切都很好。所以也许代码中有什么东西？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:54:37.960

不安全的资源可能是来自 Google 的 jQuery 库。尝试通过 https 调用它。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:12:38.510

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

# onclick - 如何使用 jQuery 暂时禁用嵌套的 onClick 事件

> ID：12619509
> 
> 赞同：1
> 
> 时间：2012-09-27T10:40:01.213
> 
> 标签：onclick, jquery

我有下表，最后一个单元格中有一个链接。该表通过 ajax 填充数据，具体取决于用户输入。

```
<table class="table-list">
<tbody>
<tr>
 <td>...</td>
 <td><a href="/link">Link</a></td>
</tr>
</tbody>
</table> 
```

因为我喜欢让整行都可点击，所以我使用以下脚本来捕获 onClick 事件。但是该链接也在*表格*行中，并且 onClick-Event 被无限次触发，直到脚本因“stackoverflow”错误而中止。

```
<script>
$(function() {
 $('.table-list tr').live('click', function() {
  $('a:last', this).click();
 });
});
</script> 
```

我试图暂时禁用该事件，如下所示，但它不起作用。

```
<script>
$(function() {
 $('.table-list tr').live('click', function() {
  $(this).off('click');
  $('a:last', this).click();
  $(this).on('click');
 });
});
</script> 
```

我还尝试了一些变体，例如 addind 和将类删除`isClicked`到行等，但没有任何效果。

对此有何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:37:40.123

防止事件传播很重要，例如冒泡。

我在这里发布了一些示例代码：http: [//pastebin.com/d25QeVkK](http://pastebin.com/d25QeVkK)

这是 JS/jQuery 部分：

```
(function($){
    $(document).delegate('table tr', 'click', function(e){
        $('a', this).trigger('click');
    });
    $(document).delegate('tr a', 'click', function(e){
        console.log("it works!");
        // use either of these to prevent stackoverflow
        //e.stopPropagation(); // use this if you want normal click behaviour without bubbling
        return false; // use this if you don't want normal click behaviour and no propagation
    });                            
})(jQuery); 
```

所以这不是最聪明的解决方案，因为由于委托的工作方式，它实际上不起作用。如果您使用委托，则单击必须冒泡到 body 元素才能工作 - 而 stopPropagate 会阻止这种情况。这应该可以解决问题：

```
$('body').delegate('.table-list tr', 'click', function(e){
        $('a', this).trigger('click');
});
$('body').delegate('.table-list tr a', 'click', function(e){
        e.stopPropagation();
        window.location.href = $(this).attr('href');   
}); 
```

`e.stopPropagation();`必须留在点击处理程序中，否则您仍然会在一段时间后收到冻结的 UI 和递归警告，然后再重定向到目标 URL。

[http://pastebin.com/PrH96GX8](http://pastebin.com/PrH96GX8)

所以这甚至更短，也应该工作：

```
$('body').delegate('.table-list tr', 'click', function(e){
    window.location.href = $(this).find('a').attr('href');  
}); 
```

使用它在新标签中打开：

```
$('body').delegate('.table-list tr', 'click', function(e){
    window.open($(this).find('a').attr('href'),'_newtab');
    return false;
}); 
```

请记住使用正确的选择器，这是非常通用的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:16:36.840

与其尝试点击链接，[不如试试这个：](http://jsfiddle.net/bldoron/S7C7j/)

```
<table class="table-list">
<tbody>
<tr style='border: 1px solid black;'>
 <td>.1.</td><td>.2.</td><td>.3.</td><td>.4.</td><td>.5.</td>
 <td class='link'><a href="/link" target="_blank">Link</a></td>
</tr>
<tr style='border: 1px solid black;'>
 <td>.1.</td><td>.2.</td><td>.3.</td><td>.4.</td><td>.5.</td>
 <td class='link'><a href="/link">Link2</a></td>
</tr>
</tbody>
</table>​ 
```

脚本：

```
 $('.table-list td').each(function(){
        if ($(this).find('a').length === 0){
            $(this).on('click', function(){
                var link = $(this).siblings('.link').find('a');
                if (link.attr('target') === '_blank'){
                    window.open(link.attr('href'));
                }
                else {
                    window.location = link.attr('href')            
                }
            });
        }
    }); 
```

它很丑陋，并且可以缩短，但它比提交恕我直言的表单更好。
如果您想让其他 tds 可点击，请考虑使用链接包裹整行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:44:30.337

试试这个：

```
$(function() {  
  $('.table-list').on('click', 'tr', function(){
    $(this).find('a:last').trigger('click'); 
  });

  $('.table-list').on('click','a',function(e){ 
   e.stopImmediatePropagation(); 
  }); 
}); 
```

# android - 即使在 Return_STICKY 之后，服务也不会在被杀死后重新启动

> ID：12619510
> 
> 赞同：1
> 
> 时间：2012-09-27T10:40:02.913
> 
> 标签：android, service, android-service

> **可能重复：**
> [强制停止后如何保持服务运行？](https://stackoverflow.com/questions/6254161/how-to-keep-service-running-after-force-stop)

嗨，这是我用来创建服务的一段代码。尝试在设置-> 管理应用程序-> 运行服务中手动停止该服务，即使在 Returning-Sticky .... 之后服务也不会重新启动。请帮忙。任何帮助将不胜感激

代码是：

```
public class MyService extends Service {
private static final String TAG = "MyService";

@Override
public void onCreate() {
    Toast.makeText(this, "My Service Created", 0).show();
}

@Override
public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", 0).show();
    Log.v(TAG, "onDestroy");
}

public int onStartCommand(Intent intent, int flags, int startId) {

    Toast.makeText(this, "On Start Command - service started", 0).show();
    Log.v(TAG, "onStart");
    **return START_STICKY;**

}

@Override
public IBinder onBind(Intent intent) {
    return null;
}

} 
```

请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:55:46.827

强制停止将阻止您的应用程序的*任何内容*再次运行，直到用户手动运行。

为了更好地模拟由于内存不足而终止的进程，请将您的应用程序从最近的任务列表（ICS 和更高版本）中滑出，或使用第三方任务管理器。

# twitter-bootstrap - Bootstrap Modal 在文档加载时可见

> ID：12619519
> 
> 赞同：2
> 
> 时间：2012-09-27T10:40:37.627
> 
> 标签：twitter-bootstrap, modal-dialog

我有一个 Bootstrap 模型工作正常，除了它在文档加载时可见并且我不知道如何使初始状态不可见？

```
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T11:40:48.223

按照文档，将`hide`类添加到模态。

```
<div class="modal hide fade">
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:49:35.877

事实证明，只需添加`style="display: none"`到模态外部 div 就可以了。

# windows-7 - 安装程序忽略 WriteRegStr（尝试将应用程序添加到 Win Startup）

> ID：12619522
> 
> 赞同：4
> 
> 时间：2012-09-27T10:40:41.510
> 
> 标签：windows-7, registry, nsis

我正在将应用程序安装到 Windows 7 机器（我的应用程序针对一个特定设备），并且我试图让它在操作系统启动/登录时运行。

这是一个 Silverlight OOB 应用程序，我认为这可能是一个问题，但我用记事本对其进行了测试，它仍然无法正常工作。

我按照[这里](http://nsis.sourceforge.net/Running_a_.exe_file_on_Windows_Start)的例子：

```
!include "MUI.nsh"

Name "Tech Drive Installer"
OutFile "techdrive_setup.exe"
InstallDir "$PROGRAMFILES\Tech Drive"

RequestExecutionLevel admin
ShowInstDetails show

!insertmacro MUI_LANGUAGE "English"

Section
    SetOutPath "$INSTDIR"
    SetOverwrite ifnewer

    File "TechDrive.xap"
    ExecWait '"$PROGRAMFILES\Microsoft Silverlight\sllauncher.exe" /install:"$INSTDIR\TechDrive.xap" /origin:"http://localhost/TechDrive.xap" /shortcut:desktop'

    WriteRegStr HKEY_LOCAL_MACHINE "SOFTWARE\Microsoft\Windows\CurrentVersion\Run\" "TechDrive" '"$PROGRAMFILES\Microsoft Silverlight\sllauncher.exe" 3388701632.localhost'
SectionEnd 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:09:58.843

WriteRegStr 调用在这台 32 位 Win7 机器上运行良好。写信给 HKLM 时，您应该[确保您是 admin](https://stackoverflow.com/questions/8732019/how-do-you-request-administrator-permissions-using-nsis/8735349#8735349)。

如果您使用的是 64 位操作系统，您最终将写入[注册表的 WOW64 部分](http://support.microsoft.com/kb/305097)。在 NSIS 中，您可以使用`SetRegView`指令来控制它，但是 Run 键应该可以工作。

您可以使用[Autoruns](http://technet.microsoft.com/en-us/sysinternals/bb963902.aspx)来验证是否正确添加了值，或者直接使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)对其进行监视。如果它仍然无法启动，我会仔细检查路径以确保它是正确的。（启动时运行的程序也不允许需要管理员权限）

# c# - 停止控件处理路由事件

> ID：12619523
> 
> 赞同：0
> 
> 时间：2012-09-27T10:40:44.660
> 
> 标签：c#, wpf, user-controls, event-handling, routed-events

希望是一个简单的问题，因为我刚刚开始处理路由事件。

我有一个习惯`UserControl`。这包含许多其他控件。

`UserControl`在我的树的上方，我想响应源自其中一个包含的控件（不是 my ）的双击事件。但是，我`UserControl`显然是在捕捉事件并将`source`属性设置为自身。我怎样才能阻止它这样做？

我不能使用`OriginalSource`，因为这指向点击的最低级别的控件（`Border`或其他）。

例如。

```
MyWindow <--- Want to handle double click here with Source = MyContainedControl1
 |
 +-MyUserControl (this is setting Source to itself. How do I turn this off?)
    |
    +-MyContainedControl1 
       |
       Border    <---- Mouse double clicks here
       EditBox
       Etc 
```

我已经尝试过覆盖`OnMouseDoubleClick()`和`OnPreviewMouseDoubleClick()`in `MyUserControl`，但此时事件已经将 Source 设置为`MyUserControl`甚至在调用 base 或任何东西之前。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:01:03.980

我会像这样走视觉树：

```
 private void Window_PreviewMouseDoubleClick(object sender, MouseButtonEventArgs e)
        {
            var control = FindVisualParent<MyContainedControl1>(e.OriginalSource as DependencyObject);
            if (control != null)
            {
                //magic happens here
            }
        }

        public static T FindVisualParent<T>(DependencyObject child) where T : DependencyObject
        {
            var parent = VisualTreeHelper.GetParent(child);
            if (parent == null) 
                return null;
            T pT = parent as T;
            return pT != null ? pT : FindVisualParent<T>(parent);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:13:53.987

也许您可以尝试更改您的 RoutingStrategy。

[http://msdn.microsoft.com/en-us/library/system.windows.routingstrategy.aspx](http://msdn.microsoft.com/en-us/library/system.windows.routingstrategy.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:03:50.257

我已经设法通过将 my 更改`UserControl`为 a来解决它`ContentControl`。幸运的是，我的内容都是在运行时动态加载的，所以我不需要`UserControl`提供的设计时界面。尽管进行了很多搜索，但除了 WPF Unleashed 中的一句话（第 722 页）之外，我找不到任何关于事件的 UserControl 效果的信息

> 这是因为 UserControl 与它的 ContentControl 基类几乎没有区别。它有一个不同的默认控件模板，它在两个方向上都有一个默认的 Stretch 内容对齐方式（而不是 Left 和 Top），它默认将 IsTabStop 和 Focusable 设置为 false， **并将从内部内容引发的任何事件的源更改为是 UserControl 本身**。

我还不得不改用 using`PreviewMouseDown`而不是`MouseDoubleClick`，因为 MouseDoubleClick 不是真正的冒泡事件。请参阅[Control.MouseDoubleClick](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.mousedoubleclick.aspx)：

> 尽管此路由事件似乎遵循通过元素树的冒泡路由，但它实际上是每个 UIElement 沿元素树引发的直接路由事件。

如果我需要`UserControl`，那么我认为我必须按照 Klaus78 的建议在 ContainedControl 中引发我自己的自定义事件，或者手动订阅每个 ContainedControl 上的双击事件，而不是让它们冒泡。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T10:45:49.730

您可以为此使用 jquery [event.preventDefault()](http://api.jquery.com/event.preventDefault/) API。

# objective-c - 如何在使用 UITapGestureRecognizer 点击 UIImageView 时从 UIImageView 获取 UIImage

> ID：12619527
> 
> 赞同：0
> 
> 时间：2012-09-27T10:41:05.440
> 
> 标签：objective-c, uiimageview, uitapgesturerecognizer

我已经添加`UITapGestureRecognizer`到`UIImageView`，在`UITableViewCell`，`UITapGestureRecognizer`处理程序在`UITableViewCell`的 FileOwner 中。

当我点击`UIImageView`正在调用的处理程序方法并且它的参数也有`UIImageView`但是当我检查时`imageview.image`，我发现它`imageview`没有任何图像：它去了哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:24:19.743

谢谢 hp ...我也在做同样的事情，但对我没有用...现在我正在通过使用`UIButton`而不是`UIImageView`. 我用按钮附加了处理程序，设置`button.backgroundImage`然后在任何地方获取图像，我想要......无论如何谢谢。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:00:48.520

这是我在我的项目中使用的并且效果很好。

```
 UITapGestureRecognizer *singleFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    [self.view addGestureRecognizer:singleFingerTap];

- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
    CGPoint location = [recognizer locationInView:[recognizer.view superview]];

    //Do stuff here...
    // I assume that your imgview is imgView11

    if (imgView11.frame.origin.x < location.x && location.x < something
        && imgView11.frame.origin.y < location.y && location.y < something) {

        largeImgView.image = imgView11.image;
    }
} 
```

如果您可以分享您的代码，那么我将编辑我的答案以解决您的问题

# javascript - 为什么firefox调试器会跳转到随机位置？

> ID：12619529
> 
> 赞同：0
> 
> 时间：2012-09-27T10:41:07.487
> 
> 标签：javascript, debugging, firefox, javascript-debugger

我在 file-A.js 中有这段代码

```
SugarBee.prototype.doubleClicked = function(canvas){
    debugger;
    this.createPropertyEditor();
} 
```

Firefox 调试器在我的函数的第一行停止，这正是我想要的。

所以我点击了两次“step in”按钮，我希望 firefox 的调试器将我带到 createPropertyEditor 函数定义，应该会发生什么，对吧？但是，调试器会跳转到 file-B.js 中的随机位置。

```
AjxDispatcher.require=function(n,a,h,s,r) {
    if(!n) {
        return
    }
    if(typeof(n)=="string") {
        n=[n]
    }
    var l=[];
    for(var o=0; o<n.length; o++){
        var t=n[o];
        if(!AjxDispatcher._getPackageData(t)._loaded) {
            l.push(t)
        }
    }

>>>> if(l.length==0) {
        return AjxDispatcher._postLoadCallback(n,false,h,s)
    } else {
        var e=AjxDispatcher._preLoad;
        if(r&&AjxDispatcher._loadFunctionsEnabled&&e.length) {
            AjxPackage.__log("pre-load function");
            AjxDispatcher._timedAction=new 
                AjxCallback(null,AjxDispatcher._continueRequire,[l,a,h,s]);
            for(var o=0; o<e.length; o++){
                e[o].run()
            }
            window.setTimeout("AjxDispatcher._timedAction.run()",0)
        } else {
            return AjxDispatcher._continueRequire(l,a,h,s)
        }
    }
}; 
```

调试器跳转到标有“>>>>”的行

为什么会这样？

# javascript - 为输入参数“redirect_uri”提供的值无效

> ID：12619532
> 
> 赞同：5
> 
> 时间：2012-09-27T10:41:16.253
> 
> 标签：javascript, phpbb, phpbb3, windows-live

我不断从 Windows Live 收到此错误

> 为输入参数“redirect_uri”提供的值无效。预期值为“https://login.live.com/oauth20_desktop.srf”或与重定向匹配的 URL

为什么我一直收到这个错误。我在 Windows Live 开发者应用程序中设置了域

在我的 <head> 元素中

```
<script src="//js.live.net/v5.0/wl.js"></script> 
```

在我的 <body> 元素下方

```
 WL.init({
    client_id: '{S_AL_WL_CLIENT_ID}', //{S_AL_WL_CLIENT_ID} = phpbb template variable for client_id
    redirect_uri: '{AL_BOARD_URL}', //{AL_BOARD_URL} = phpbb template variable for the  urlencoded domain name
    response_type: 'token',
    scope: ["wl.signin", "wl.basic", "wl.birthday", "wl.emails", "wl.work_profile", "wl.postal_addresses"]
}); 
```

登录按钮是

```
 <div id="login">
        <a href="#"><img src="images/windows_live_connect.png" alt="Windows Live" /></a> 
    </div> 
```

听者

```
jQuery('#login a').click(function(e) 
{
    e.preventDefault();
            WL.login({
                scope: ["wl.signin", "wl.basic", "wl.birthday", "wl.emails", "wl.work_profile", "wl.postal_addresses"]
            }).then(function (response) 
            {
                //do something with stuff here. You know brainy type ajaxy stuff to auth a user
            },
            function (responseFailed) 
            {
                console.log("Error signing in: " + responseFailed.error_description);
            });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:59:20.100

事实证明，[windows-live](/questions/tagged/windows-live "显示标记为“windows-live”的问题") redirect_uri 必须是完全`http://www.yourdomain.com`而不是`http://yourdomain.com`. 因此，如果用户输入`http://yourdomain.com`，则将显示此错误，但如果用户输入，则`http://www.yourdomain.com`脚本有效。

我想我已经被 Facebook Api 宠坏了。

所以最后我只是做了一个正则表达式来匹配使用登录按钮的任何 url 并强制它是带有 .htaccess 的 www。

# jquery - 即使在使用 stopPropagation 之后，标签内元素的事件处理程序也会被执行

> ID：12619535
> 
> 赞同：5
> 
> 时间：2012-09-27T10:41:23.647
> 
> 标签：jquery, css

我在标签中嵌入了很少的元素（如输入、段落、单选按钮任何元素）。这个标签的父标签是 div 标签。为标签内的所有元素和除标签标签之外的父 div 应用事件处理程序。在所有事件处理程序中也应用了 stopPropagation。但是当我点击标签内的任何元素时，就会调用相应的事件处理程序，并且由于 stopPropagation 在那里，它限制了父事件处理程序的调用。到这里为止还好。但问题是它也在调用其兄弟姐妹的事件处理程序。

```
 <div class="scroll-content-item" data-pid="1773">
      <label>   
         <span class="custom">Custom</span>
         <input type="text" class="text custom_width" id="cust_width" value="960"/> 
         <p class="para"> This is test para</p>
      </label>
  </div> 
```

## jQuery代码

```
jQuery(document).ready(function($) {

    $('.para').click(function(event) {
        alert("paragraph event ");
        event.stopPropagation();
    });

    $('.custom_width').click(function(event) {

        alert("input custom width event ");
        event.stopPropagation();
    });

    $('.scroll-content-item').click(function(event) {
        alert("parent div event ");
        event.stopPropagation();
    });

});​ 
```

当我单击段落时，它的事件处理程序和输入类型的处理程序也被调用。当我单击自定义类的跨度时，由于它没有事件处理程序，因此首先调用父级，然后调用输入类型处理程序。

您可能会问的问题是嵌入 p、输入和标签内的所有内容的目的是什么。我们正在使用自定义`input type="file"` ，我们在输入类型文件上覆盖标签数据，但`onclick`在标签输入类型文件上必须被触发。同样，我在标签内嵌入元素

只是想知道为什么即使我正在使用这两个事件处理程序也会被调用`stopPropagation`。

作为参考，我创建了 jsfiddle：http: [//jsfiddle.net/x7xQg/29/](http://jsfiddle.net/x7xQg/29/)

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T10:43:53.833

将 a 添加`return false;`到您的事件处理程序可以解决它。

还添加`event.preventDefault();`以覆盖所有浏览器。

[http://jsfiddle.net/x7xQg/30/](http://jsfiddle.net/x7xQg/30/)

# css - DIV 的 Width & Height CSS 样式与其容器表格列相同

> ID：12619536
> 
> 赞同：0
> 
> 时间：2012-09-27T10:41:37.213
> 
> 标签：css

我想自动将 div 的宽度和高度值设置为与表格的单元格相同。

表格列`<td>`将是动态宽度和高度。

> 目的：用户必须单击表格的每个单元格。

比方说，

```
<table>
  <tr>
    <td> <-------- dynamic width & height
      <commandLink>
        <div> <---------- I cannot click this <div> as link, can you provide me?
          //nod ata
        </div>
      </commandlink>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:43:11.900

只需申请

```
td div {
   width: 100%;
   height : 100%;
} 
```

但您需要指定`td`元素的高度。

无论如何，默认情况下，一个 div 已经适合整个宽度，所以`height: 100%`就足够了。

如果您的 div 必须是可点击的，您可以`<a>`在 div 内附加一个具有以下样式的标签

```
td div#your-id a {
   display : block;
   width: 100%;
   height : 100%;
} 
```

或者您`onclick`通过 JavaScript 将事件处理程序附加到 div。

# perl - 什么时候使用chomp？

> ID：12619545
> 
> 赞同：3
> 
> 时间：2012-09-27T10:41:53.210
> 
> 标签：perl, chomp

chomp函数的目的和优势是什么。它能做什么？使用 chomp 会产生任何问题吗？还是需要在文件打开后使用 chomp ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T11:22:38.560

chomp 用于删除`$/`设置为大部分`\n`（新行）的变量。

```
$/ is the input record separator, newline by default. 
```

> [chomp](http://perldoc.perl.org/functions/chomp.html)：它返回从所有参数中删除的字符总数。它通常用于从输入记录的末尾删除换行符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T10:45:10.683

`chomp``$/`如果有的话，只需从字符串末尾删除换行符（实际上是）。当从文件（例如）中读取您希望换行符消失的行时，它很有用，但仍可用于没有换行符的字符串。

它基本上类似于：

```
chop if /\n$/; 
```

有关详细信息，请参阅[http://perldoc.perl.org/functions/chomp.html 。](http://perldoc.perl.org/functions/chomp.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T10:45:02.620

`chomp`从文本行的末尾删除换行符（如果有）。它很有用，因为这样您就不必担心输入表示换行符的特定方式——Perl 会为您处理细节。

你应该什么时候使用它？每当您需要删除尾随换行符时！从文本文件中读取数据是最常见的情况。

# php - 需要对不同的行求和，而不是不同的值

> ID：12619546
> 
> 赞同：0
> 
> 时间：2012-09-27T10:41:53.977
> 
> 标签：php, mysql

```
+------+------------+----------+--------+
|  id  |  course    |   std_id |  marks |
+------+------------+----------+--------+
|  1   |     1      |    1     |   9    |
|  2   |     2      |    2     |   5    |
|  3   |     1      |    3     |   5    |
|  4   |     1      |    1     |   6    |
|  5   |     2      |    1     |   4    |
+------+------------+----------+--------+

+----------------+----------------+
| course         |  credit        |
+----------------+----------------+
|    1           |     5          |
|    2           |     5          |
+----------------+----------------+ 
```

我需要通过 desc 获得不同课程顺序的学生分数和学分的总和

喜欢：

```
+---------+------------+-------+
|std_id   |  sum(marks)|  sum()|
+---------+------------+-------+
|  1      |     10     |    10 |
|  2      |     5      |    5  |
|  3      |     5      |    5  |
+---------+------------+-------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:56:01.460

我对您的问题和您的标题感到有些困惑。这个答案应该可以很好地帮助您解决您在标题中提出的问题 - 但您发布的一些输出令人费解：

```
select
    c.std_id,
    sum(c.marks) as marks,
    sum(c.credit) as credits
from
    (
        select distinct
            a.id,
            a.course,
            a.std_id,
            a.marks,
            b.credit
        from
            marks a
                join courseCredits
                    on a.course=b.course
    ) c
group by
    c.std_id,
    c.course,
order by
    std_id desc 
```

# ios5 - 设备的gps速度

> ID：12619548
> 
> 赞同：1
> 
> 时间：2012-09-27T10:42:06.113
> 
> 标签：ios5, cllocationmanager

我正在为此计算设备的速度，我使用了委托方法

`(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation`

但是当我在设备上对其进行测试时，它没有显示速度，而是始终显示零速度。

使用的代码是

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{        
    NSLog(@"\nStarting point=%@",startingpoint);
    if (self.startingpoint == nil)
    {
        self.startingpoint = newLocation;
        oldLocation=self.startingpoint;
    }
    //Calculate speed
    double gpsSpeed = newLocation.speed;
} 
```

# android - Android AsyncTask 状态循环

> ID：12619550
> 
> 赞同：0
> 
> 时间：2012-09-27T10:42:15.247
> 
> 标签：android, database, android-asynctask

我有一个 AsyncTask 将数据发布到 sql db，然后我从活动中获取该数据。

问题是，因为当应用程序首次启动时数据库是空的，它会在尝试从中获取内容时崩溃。因此，我尝试创建一个 while() 循环，使活动等到 AsyncTask 完成，然后获取数据。我得到的只是一个白屏，几秒钟后出现“无响应”对话框：

```
 MyAsyncTask task = new MyAsyncTask(this, country, img);
    task.execute(); 

    SetSql mydb = new SetSql(this);
    mydb.open();

    while(task.getStatus()!=AsyncTask.Status.FINISHED){
        //wait
    }

    countryCode = mydb.getLatestCode();
    Log.e("debug", countryCode);
    mydb.close(); 
```

无论如何我使用数据库的原因是因为我想不出一种方法来从我的 AsyncTask 发送一个简单的字符串，有没有办法从 postExecute 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:58:44.573

我认为您可以制作自己的 onTaskDone 界面，如下所示：

```
public class TaskTest extends AsyncTask<String, Integer, String> {

    interface TaskDoneListener {
        abstract void onTaskDone(String result);
    }

    private TaskDoneListener t;

    public TaskTest(TaskDoneListener t){
        this.t = t;
    }

    @Override
    protected String doInBackground(String... params) {
        // do your stuf
        return "some thing";
    }

    @Override
    protected void onPostExecute(String result) {
        t.onTaskDone(result);
        super.onPostExecute(result);
    }
} 
```

您可以使用 notify 和 wait 函数并使用 onTaskDone 通知某种正在等待结果的线程。

**编辑：**

在 onTaskDone 方法中执行此代码：

```
countryCode = mydb.getLatestCode();
Log.e("debug", countryCode);
mydb.close(); 
```

**编辑2：**

活动示例代码：

```
public class TestActivity extends Activity implements TaskDoneListener {
    /** Called when the activity is first created. */

    TaskTest task;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //create your layout and stuff
    }

    @Override
    protected void onStart() {
        super.onStart();

        //Dont start you task in the onCreate this could cause some weird behavior
        //if the onCreate method is not yet done but your task is.
        task = new TaskTest((TaskDoneListener) this, ##country_code?##, ##image?##);
        task.execute();
    }

    public void onTaskDone(String result) {
        //set the results in your created views

    }

} 
```

罗尔夫

# r - 用 ggplot 可视化正/负时间序列数据的优雅方法？

> ID：12619553
> 
> 赞同：3
> 
> 时间：2012-09-27T10:42:22.727
> 
> 标签：r, ggplot2

我有一些时间序列数据，它们表示随着时间的推移许多数据序列的累积总和，基本上是资金流入和流出市场。有些是正面的，有些是负面的，但不同的数据链当然可以总结整个市场的资金流向。我一直在考虑如何使用它来可视化它`ggplot`，到目前为止，小倍数似乎是最清晰的方法 - 请参阅下面的图像和代码。

是否有人对使用 R 和（最好）使用此类数据进行惊人的可视化有任何其他建议`ggplot`？我尝试过使用`geom_area`，但它变得非常混乱，我似乎无法找到一种方法来清楚地显示每个数据系列，即使在使用`stack`关键字之后也是如此。

![小倍数](../Images/00937c49619d4051c5551f26e3f5f2af.png)

```
require(ggplot2)
require(scales)
require(gridExtra)

mymelt <- structure(list(mydate = structure(c(15340, 15340, 15340, 15340,
15340, 15340, 15340, 15340, 15340, 15340, 15340, 15340, 15371,
15371, 15371, 15371, 15371, 15371, 15371, 15371, 15371, 15371,
15371, 15371, 15400, 15400, 15400, 15400, 15400, 15400, 15400,
15400, 15400, 15400, 15400, 15400, 15431, 15431, 15431, 15431,
15431, 15431, 15431, 15431, 15431, 15431, 15431, 15431, 15461,
15461, 15461, 15461, 15461, 15461, 15461, 15461, 15461, 15461,
15461, 15461, 15492, 15492, 15492, 15492, 15492, 15492, 15492,
15492, 15492, 15492, 15492, 15492, 15522, 15522, 15522, 15522,
15522, 15522, 15522, 15522, 15522, 15522, 15522, 15522, 15553,
15553, 15553, 15553, 15553, 15553, 15553, 15553, 15553, 15553,
15553, 15553), class = "Date"), variable = c("b", "bc", "f",
"in", "it", "l", "of", "o", "pr", "s", "total", "tr", "b", "bc",
"f", "in", "it", "l", "of", "o", "pr", "s", "total", "tr", "b",
"bc", "f", "in", "it", "l", "of", "o", "pr", "s", "total", "tr",
"b", "bc", "f", "in", "it", "l", "of", "o", "pr", "s", "total",
"tr", "b", "bc", "f", "in", "it", "l", "of", "o", "pr", "s",
"total", "tr", "b", "bc", "f", "in", "it", "l", "of", "o", "pr",
"s", "total", "tr", "b", "bc", "f", "in", "it", "l", "of", "o",
"pr", "s", "total", "tr", "b", "bc", "f", "in", "it", "l", "of",
"o", "pr", "s", "total", "tr"), value = c(-23, 6.90000000000001,
459.799999999999, -403.6, -56.1, -95, -13.8, 32.6, 121.5, -15.7,
26.2000000000007, 12.5, -25.1, 238.3, 1047.2, -803.2, -151.5,
-260.5, -59.6, -93.8, 461.5, -37.7, 26.7999999999993, -288.8,
-46.4, 249, 1289.8, -783.2, -188.1, -414.9, -77.7, -61, 928.4,
-36.8, 17.4000000000015, -841.7, -46.5, 276.2, 1384.8, -541.1,
-71.8999999999999, -433.3, -61.3, -28.3, 494.699999999999, -23.4,
-14.5999999999985, -964.5, -46.1, 376.2, 1020.1, -119.4, 56.8000000000001,
-447.7, -9.50000000000001, 14.2, -9.20000000000164, 2.5, -42.7999999999993,
-880.6, -52.9, 345.5, 892.599999999999, -241.8, 144.3, -428.2,
-3.30000000000001, 91.9, -294.800000000002, -5.19999999999999,
-42.1999999999971, -490.1, -64.5, 379.7, 679.299999999999, -143.1,
185.9, -419.8, -4.30000000000001, 182.4, -421.900000000002, 1.80000000000001,
-59.8999999999978, -435.2, -80.2, 422.2, 645.499999999998, -391.4,
76.6000000000001, -387.4, -1.70000000000001, 211.2, -131.500000000002,
-10.6, -40.8999999999978, -393.6), fill = c("#A4D3EE80", "#A478AB80",
"#01AEF080", "#8DC73F80", "#F8931D80", "#FFAAAA80", "#8C8C8C",
"#D38D5F80", "#23238E80", "#77B9B780", "#C8373780", "#EEDD8280",
"#A4D3EE80", "#A478AB80", "#01AEF080", "#8DC73F80", "#F8931D80",
"#FFAAAA80", "#8C8C8C", "#D38D5F80", "#23238E80", "#77B9B780",
"#C8373780", "#EEDD8280", "#A4D3EE80", "#A478AB80", "#01AEF080",
"#8DC73F80", "#F8931D80", "#FFAAAA80", "#8C8C8C", "#D38D5F80",
"#23238E80", "#77B9B780", "#C8373780", "#EEDD8280", "#A4D3EE80",
"#A478AB80", "#01AEF080", "#8DC73F80", "#F8931D80", "#FFAAAA80",
"#8C8C8C", "#D38D5F80", "#23238E80", "#77B9B780", "#C8373780",
"#EEDD8280", "#A4D3EE80", "#A478AB80", "#01AEF080", "#8DC73F80",
"#F8931D80", "#FFAAAA80", "#8C8C8C", "#D38D5F80", "#23238E80",
"#77B9B780", "#C8373780", "#EEDD8280", "#A4D3EE80", "#A478AB80",
"#01AEF080", "#8DC73F80", "#F8931D80", "#FFAAAA80", "#8C8C8C",
"#D38D5F80", "#23238E80", "#77B9B780", "#C8373780", "#EEDD8280",
"#A4D3EE80", "#A478AB80", "#01AEF080", "#8DC73F80", "#F8931D80",
"#FFAAAA80", "#8C8C8C", "#D38D5F80", "#23238E80", "#77B9B780",
"#C8373780", "#EEDD8280", "#A4D3EE80", "#A478AB80", "#01AEF080",
"#8DC73F80", "#F8931D80", "#FFAAAA80", "#8C8C8C", "#D38D5F80",
"#23238E80", "#77B9B780", "#C8373780", "#EEDD8280")), .Names = c("mydate",
"variable", "value", "fill"), row.names = c(NA, 96L), class = "data.frame")

myvals <- mymelt[mymelt$mydate == mymelt$mydate[nrow(mymelt)],] ## last date in mymelt should always be same as plotenddate as we subset earlier
mymelt <- within(mymelt, variable <- factor(variable, as.character(myvals[order(myvals$value, decreasing = T),]$variable), ordered = TRUE))

p <- ggplot(mymelt, aes(x = mydate, y = value)) +
     geom_area(aes(fill = variable), position = "stack") +
     facet_wrap(~ variable, ncol = 4) +
     theme(axis.text.x = element_text(size = 8, angle = 90, colour = "grey50")) +
     theme()
print(p) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:39:34.493

通常我会建议您将面板水平堆叠，以便每个时间序列都有共同的 x 轴。但是，如果您不想`scales`按照@GavinSimpson 的建议进行更改，那将无法正常工作。在这种情况下，最好将面板彼此相邻放置，但要删除一些不必要*的数据墨水*（参见[Tufte，2001 年](https://rads.stackoverflow.com/amzn/click/com/0961392142)）。

通常，您不需要图例，因为面板名称已经告诉您变量的名称。这也消除了对彩虹色的需求。我也会避免使用`geom_area`和使用`geom_line`——你的效果仍然很突出，而不会用沉重的几何区域过度填充绘图。之后有一些小的细节 - 你删除小网格以降低网格密度，你改变轴文本大小，你减少`geom_line`. 您将主题更改为`theme_bw`以删除所有灰色废话。最后，在这种特定情况下，如果绘图的高度或多或少是其宽度的 50%，它会有所帮助。此解决方案的唯一问题是 x 轴上的日期标签非常小。

```
p <- ggplot(mymelt, aes(x = mydate, y = value)) +
  geom_line(lwd=0.3) +
  facet_grid(. ~ variable) +
  theme_bw() +
  theme(axis.text.x = element_text(size = 5, angle = 90),
        axis.text.y = element_text(size = 8),
        axis.title.x = element_text(vjust = 0),
        axis.ticks = element_blank(), 
        panel.grid.minor = element_blank())
print(p)
ggsave(plot=p, filename="plot.png", width = 8, height = 4) 
```

![在此处输入图像描述](../Images/8f5e2f70eef92bdb375d40362b6f3c6e.png)

# iphone - 用于复杂报告的 CoreData 对象或 SQL 语句？

> ID：12619557
> 
> 赞同：0
> 
> 时间：2012-09-27T10:42:39.700
> 
> 标签：iphone, objective-c, ios, sqlite, core-data

我的 iOS 应用程序有一个从 PostgreSQL 数据库继承的模型。该应用程序具有报告功能，未来可能会变得更加复杂。此外，可能需要将本地应用程序数据与 PostgreSQL 数据库服务器同步。

到目前为止，我已经使用 CoreData 对象来读取、写入和删除数据。我一直在翻译 SQL 查询以使用 CoreData 语言，但发现它对其中一些来说不必要的麻烦，例如：

```
select sum(amount), date from db.table group by date; 
```

这只是一个示例，该应用程序将来可能需要更复杂的报告查询。因此，我正在考虑从 CoreData 切换到直接查询 SQLite（我可以使用已经编写的查询来查询 PostgreSQL DB）。

我的问题是：

*   考虑到报告是应用程序的核心功能（即需要非平凡的 SELECT 查询），继续使用 CoreData 而不是 SQL 查询是否值得？
*   将 SQL（用于复杂的 SELECT 查询）和 CoreData（用于应用程序的其余部分）与相同的存储一起使用是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:56:27.990

一旦你掌握了语法，我就会转向 CoreData，它非常快速且非常简单。最大的区别是您将 sql 语句替换为以下内容：

```
 // Retrieve the entity from the local store -- much like a table in a database
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"AppSettings" inManagedObjectContext:managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];

// Set the predicate -- much like a WHERE statement in a SQL database
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"version == %@", @"Default"];
[request setPredicate:predicate];

// Set the sorting -- mandatory, even if you're fetching a single record/object

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"version" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[request setSortDescriptors:sortDescriptors];
sortDescriptors = nil;
sortDescriptor = nil;

// Request the data -- NOTE, this assumes only one match, that 
// yourIdentifyingQualifier is unique. It just grabs the first object in the array. 
AppSettings *appSettings1 =[[managedObjectContext executeFetchRequest:request error:&error] objectAtIndex:0];

request = nil;

//Update the object
appSettings1.backGroundImage = [NSNumber numberWithInt: backGroundGraphics.selectedSegmentIndex]; 
```

希望这对开发人员部分下的 MAC 应用商店也有帮助，真正帮助 Core Data Editor 一直是一种用途。

您始终可以直接使用 SQL，但数据存储结构与 Core Data 字段看起来有点滑稽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:59:20.220

出于同样的原因，我删除了核心数据，我有一些非常复杂的查询，翻译为核心数据使用实在是太痛苦了。在我看来，只需坚持使用纯 SQLLite 并手动编写 SQL 即可。或者，您可以使用 FMDB 作为 SQLlite 的包装器[https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

# javascript - 检查是否所有 onload 脚本都已执行

> ID：12619561
> 
> 赞同：1
> 
> 时间：2012-09-27T10:43:02.257
> 
> 标签：javascript, jquery, onload, portal

我有一种情况，我想在页面的所有 onload 脚本完成后执行一个脚本。实际上它是一个门户应用程序，其中我们有多个特定于多个页面的 onload 脚本，并且这个通用脚本将在所有这些执行结束时被调用。

无论如何我们可以做到这一点，而无需在应用程序中进行大量更改

我用过

```
$(function(){
//todo
});

$(document).ready(function() {
//todo
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:49:32.320

您可以使用 jQuery window.load 方法，如下所示

```
 $(window).load(function(){

       //Do something after all onload functions.

      }); 
```

# go - Go 交互式外壳

> ID：12619564
> 
> 赞同：29
> 
> 时间：2012-09-27T10:43:12.937
> 
> 标签：go, interactive-shell

> **可能重复：**
> [Go 是否提供 REPL？](https://stackoverflow.com/questions/8513609/does-go-provide-repl)

有谁知道是否有可用于 go 的 REPL（交互式 go shell，类似于 irb）允许用户使用 import 语句？我希望能够做这样的事情：

```
$igo import ( 
             "log"
             "mypackage/pkg"
            )
log.Print("hello, world!")
pkg.Print("Hello")
... 
```

我试过 igo 但这似乎还不支持这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T19:42:18.007

与[`go-eval`](https://github.com/sbinet/go-eval)来自同一作者`igo`。

这是对旧`exp/eval`包的改进。

但是，由于缺少符号，我无法导入包，这可能是`igo`不支持该`import`声明的原因。

最好使用 play.golang.org 上的编译/执行软件。

# python - 查询在 SQL Server 中工作，但在 sqlite 中不工作

> ID：12619566
> 
> 赞同：1
> 
> 时间：2012-09-27T10:43:22.037
> 
> 标签：python, sqlite, sql-server-2005, sqlalchemy

在 python 的一个程序中，我通过 sqlalchemy 对 SQL Server 2005 进行查询：

```
SELECT * FROM table 
WHERE (cipher=:value? OR CHARINDEX(cipher_mask,:value?)!=0)
and NOT exists( SELECT * FROM table WHERE CHARINDEX(not_cipher_mask,:value?)!=0 AND code=:code?)
and code=:code? 
```

这工作正常。

我正在尝试为 SQLite 创建类似的查询（它不使用函数`CHARINDEX`）

```
SELECT * FROM table 
where (cipher=:value?  OR :value?  like cipher_mask+'/%')
and not exists (SELECT * FROM table  where code=:code? and :value? like not_cipher_mask +'/%') and code=:code? 
```

这在 SQL Server 2005 中运行良好，但在 SQLite 中，我得到一个空结果

为什么它在这里不起作用？

PS表中的所有列都`VARCHAR`具有相同的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:14:10.717

`CHARINDEX(a, b)`类似于`b LIKE '%' || a || '%'`。（您需要先`%`查找`a`它是否不在开头`b`。）

字符串连接使用`||`，而不是`+`。

# javascript - 在 JavaScript 中计算绝对数组长度的最佳方法是什么？

> ID：12619572
> 
> 赞同：8
> 
> 时间：2012-09-27T10:43:45.337
> 
> 标签：javascript

只是想知道，当您使用`array.length`它时，它会获取最后一个索引值并添加一个。如果您有一个数组，由于某种原因以这种方式定义，该怎么办：

```
 var myArray2 =[];
    myArray2[10]='x';
    myArray2[55]='x'; 
```

获得此数组的真实长度的绝对最佳方法是什么？将返回 2 作为值的东西。

我在想这样的事情，但不确定是否已经有这种方法，或者是否有更快的实现。

```
Array.prototype.trueLength= function(){
    for(var i = 0,ctr=0,len=myArray2.length;i<len;i++){
        if(myArray2[i]!=undefined){
            ctr++;
        }
    }
    return ctr;        
}
console.log(myArray2.trueLength()); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T11:36:50.747

[`Array.prototype.reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)仅遍历现有索引，因此您可以执行以下操作：

```
var length = myArray2.reduce(function(sum) {
    return sum+1;
}, 0); 
```

“可是齐拉克叔叔！`reduce`杀了我的父母！” 别担心，年轻人，我们可以使用`Array.prototype.filter`！

```
var length = myArray2.filter(function(item, idx) {
    return idx in myArray2;
}).length; 
```

“这阵法都无聊！” 好吧，你怎么想的！？

```
Object.keys(myArray2).length; 
```

“但是……但是……但是 Zirak！！！！我们是阿米什人，我们还没有 ECMAScript 5！” 别怕，齐拉克来了！

```
for (var length = 0, i = 0; i < myArray2.length; i++) {
    if (i in myArray2) {
        length += 1;
    }
} 
```

但是在这样的时候，人们不得不想：为什么要做这一切并违背数组的目的，一个结构化的构造，而不是使用其他适合其目的的东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:48:44.910

使用 遍历数组`for in`。[jsfiddle](http://jsfiddle.net/EXDPq/)

```
Array.prototype.trueLength= function(){
  var ctr = 0;  
  for(var i in this){
        if(this.hasOwnProperty(i)){
            ctr++;
        }
    }
    return ctr;        
}
console.log(myArray2.trueLength()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:03:45.433

替代原型方法：

```
Array.prototype.trueLength= function(){
    var list= [], ctr = 0, array = this;

    for(var i in array) (function(arr) {

        if(array.hasOwnProperty(i)){
            list.push(arr);
            ctr++;
        };

    }(array[i]));

    return {length: ctr, "list": list}
} 
```

样本：

```
var myArray2 =[];
    myArray2[10]='44';
    myArray2[55]='55';

// list not undefined 
myArray2.trueLength().list  // ["44", "55"]

// not undefined length list
myArray2.trueLength().length // 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-08T00:09:04.173

```
function TrueArrayLength (myArray2)
{
var TrueLength = 0;    
for ( var i = 0; i < myArray2.length; i++) 
{
    if (i in myArray2) 
    {
        TrueLength += 1;
    }
}

return TrueLength;
} 
```

使用此函数并获取真实的数组长度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:30:50.310

我会使用[运算](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)[符`in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)：

```
function getArrayPropertyCount(arr) {
    var count = 0;
    for (var i = 0, len = arr.length; i < len; ++i) {
        if (i in arr) {
            ++count;
        }
    }
    return count;
} 
```

# sql - 确定死锁的原因

> ID：12619575
> 
> 赞同：0
> 
> 时间：2012-09-27T10:43:54.707
> 
> 标签：sql, sql-server, profiling, deadlock

我有 2 个以上的并发进程。在它们内部有一个执行重复验证（选择）+保存（插入）操作的迭代。这是关于死锁的 sql-server-profiler 信息：

```
<deadlock-list>
     <deadlock victim="process8e09048">
      <process-list>
       <process id="process8e09048" taskpriority="0" logused="1088" waitresource="PAGE: 29:1:376823" waittime="920" ownerId="1276429306" transactionname="user_transaction" lasttranstarted="2012-09-26T20:59:44.367" XDES="0x3077833c0" lockMode="S" schedulerid="1" kpid="4872" status="suspended" spid="79" sbid="0" ecid="0" priority="0" trancount="1" lastbatchstarted="2012-09-26T20:59:44.427" lastbatchcompleted="2012-09-26T20:59:44.427" clientapp=".Net SqlClient Data Provider" hostname="PORTAL" hostpid="5348" loginname="IIS APPPOOL\ASP.NET v4.0 Classic" isolationlevel="read committed (2)" xactid="1276429306" currentdb="29" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
        <executionStack>
         <frame procname="adhoc" line="1" stmtstart="282" sqlhandle="0x02000000b79df8046665e3984d6dc129fec20a3029fce9bc">
    SELECT id FROM [WP_CashCenter_StockTransactionLine] WHERE StockTransaction_id=@StockTransaction_id and Direction=@Direction and IsVerified=@IsVerified and QualificationType=@QualificationType and id &lt;&gt; @id and Product_id is null and Material_id=@Material_id and StockContainer_id is null and StockLocation_id=@StockLocation_id     </frame>
         <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000">
    unknown     </frame>
        </executionStack>
        <inputbuf>
    (@id bigint,@StockTransaction_id bigint,@Direction int,@IsVerified bit,@QualificationType int,@Material_id nvarchar(3),@StockLocation_id int)SELECT id FROM [WP_CashCenter_StockTransactionLine] WHERE StockTransaction_id=@StockTransaction_id and Direction=@Direction and IsVerified=@IsVerified and QualificationType=@QualificationType and id &lt;&gt; @id and Product_id is null and Material_id=@Material_id and StockContainer_id is null and StockLocation_id=@StockLocation_id    </inputbuf>
       </process>
       <process id="process5c13948" taskpriority="0" logused="2636" waitresource="PAGE: 29:1:376823" waittime="920" ownerId="1276429252" transactionname="user_transaction" lasttranstarted="2012-09-26T20:59:44.337" XDES="0x222e64e80" lockMode="S" schedulerid="6" kpid="2956" status="suspended" spid="70" sbid="0" ecid="0" priority="0" trancount="1" lastbatchstarted="2012-09-26T20:59:44.427" lastbatchcompleted="2012-09-26T20:59:44.427" clientapp=".Net SqlClient Data Provider" hostname="PORTAL" hostpid="5348" loginname="IIS APPPOOL\ASP.NET v4.0 Classic" isolationlevel="read committed (2)" xactid="1276429252" currentdb="29" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
        <executionStack>
         <frame procname="adhoc" line="1" stmtstart="238" sqlhandle="0x02000000d77dd1038a9b7f6d7158436117c042e42767242d">
    SELECT id FROM [WP_CashCenter_StockTransactionLine] WHERE StockTransaction_id=@StockTransaction_id and Direction=@Direction and IsVerified=@IsVerified and QualificationType=@QualificationType and id &lt;&gt; @id and Product_id is null and Material_id=@Material_id and StockContainer_id is null and StockLocation_id is null     </frame>
         <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000">
    unknown     </frame>
        </executionStack>
        <inputbuf>
    (@id bigint,@StockTransaction_id bigint,@Direction int,@IsVerified bit,@QualificationType int,@Material_id nvarchar(3))SELECT id FROM [WP_CashCenter_StockTransactionLine] WHERE StockTransaction_id=@StockTransaction_id and Direction=@Direction and IsVerified=@IsVerified and QualificationType=@QualificationType and id &lt;&gt; @id and Product_id is null and Material_id=@Material_id and StockContainer_id is null and StockLocation_id is null    </inputbuf>
       </process>
      </process-list>
      <resource-list>
       <pagelock fileid="1" pageid="376823" dbid="29" objectname="Edsson_WebPortal_v5.01.dbo.WP_CashCenter_StockTransactionLine" id="lock9302c80" mode="IX" associatedObjectId="72057594148028416">
        <owner-list>
         <owner id="process5c13948" mode="IX"/>
        </owner-list>
        <waiter-list>
         <waiter id="process8e09048" mode="S" requestType="convert"/>
        </waiter-list>
       </pagelock>
       <pagelock fileid="1" pageid="376823" dbid="29" objectname="Edsson_WebPortal_v5.01.dbo.WP_CashCenter_StockTransactionLine" id="lock9302c80" mode="IX" associatedObjectId="72057594148028416">
        <owner-list>
         <owner id="process8e09048" mode="IX"/>
        </owner-list>
        <waiter-list>
         <waiter id="process5c13948" mode="S" requestType="convert"/>
        </waiter-list>
       </pagelock>
      </resource-list>
     </deadlock>
    </deadlock-list> 
```

![在此处输入图像描述](../Images/25510e3edc73149b6f08b0b25cf3ad39.png)

这些语句是带有条件的选择。这些选择的 where 子句仅使用包含在非聚集索引中的列。执行计划： ![在此处输入图像描述](../Images/b8415343733620934e1195a17a4923ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T00:26:09.110

在这个死锁图中，两个进程都成功地执行了 INSERT，并且在同一页上持有 IX 锁。他们必须在同一页的两个单独的行上也持有 X 锁。

由于SELECT被NC索引覆盖，因此死锁涉及的页面必须属于NC索引。

您的 SELECT 语句正在尝试获取页级锁，该锁已通过 INSERT 语句获得 IX 锁。

因此，如果您的 INSERT 不属于同一个 StockTransaction_id，只需将 ROWLOCK 提示添加到 SELECT 即可解决死锁条件。

RCSI 保证读取器不会被写入器阻塞，反之亦然。但是，如果您的应用程序设计依赖于任何阻塞行为，这可能是一个问题。

[您可以在此处](http://sqlindian.com/2012/07/06/deadlock-due-to-different-lock-granularity/)阅读有关由于锁定粒度不同而导致的死锁的更多信息

# c# - 如何在不改变概念的情况下减少我的代码长度？

> ID：12619578
> 
> 赞同：0
> 
> 时间：2012-09-27T10:44:14.940
> 
> 标签：c#, entity-framework

任何人都可以帮我解决这个问题。有三台服务器。我想将作业分配给未启动作业最少的服务器。我们要考虑已开始的作业而不是已开始的作业。我已经做到了。但是我的代码很长。我不知道如何在不改变我的概念的情况下最小化我的代码。这是我的代码：

```
 public List<int> GetPaServer()
    {
        List<int> PaServers = new List<int>();
        using (PaEntities pa = new PaEntities())
        {
            var PaServer = from server in pa.AppPM_Pa_Server
                              where server.IsActive == true
                              select server.ServerId;
            foreach (var paServer in PaServer)
            {
                PaServers.Add(paServer);
            }
        }
        return PaServers;
    }

    //Method to get the serverid for each request.
    public int GetPaQueue()
    {
        using (PaEntities server = new PaEntities())
        {
            List<int> Paserver = new List<int>();
            Paserver = GetPaServer();
            string server1 = string.Empty;
            string server2 = string.Empty;
            string server3 = string.Empty;
            foreach (int paserver in Paserver)
            {
                if (paserver == 1)
                {
                    server1 = "active";
                }
                else if (paserver == 2)
                {
                    server2 = "active";
                }
                else if (paserver == 3)
                {
                    server3 = "active";
                }
            }
            int retVal = 0;

            // Get the Server NotStarted details here
            var NotStarted1 = (from serverID in server.AppPM_Pat
                               where serverID.Status == "NotStarted" && serverID.ServerId == 1
                               select serverID.ServerId).Count();
            var NotStarted2 = (from serverID in server.AppPM_Pat
                               where serverID.Status == "NotStarted" && serverID.ServerId == 2
                               select serverID.ServerId).Count();
            var NotStarted3 = (from serverID in server.AppPM_Pat
                               where serverID.Status == "NotStarted" && serverID.ServerId == 3
                               select serverID.ServerId).Count();

            // Get the  Server Started details here
            var server_Started1 = (from serverID in server.AppPM_Pat
                                   where serverID.Status == "Started" && serverID.ServerId == 1
                                   select serverID.ServerId).Count();
            var server_Started2 = (from serverID in server.AppPM_Pat
                                   where serverID.Status == "Started" && serverID.ServerId == 2
                                   select serverID.ServerId).Count();
            var server_Started3 = (from serverID in server.AppPM_Pat
                                   where serverID.Status == "Started" && serverID.ServerId == 3
                                   select serverID.ServerId).Count();

            //Get the server number for each  request
            //control comes here only when the server is active 
            if (server1 == "active" && server2 == "active" && server3 == "active")
            {
                if (NotStarted1 == 0 && NotStarted2 == 0 && NotStarted3 == 0)
                {
                    if ((server_Started1 > server_Started2) && (server_Started1 > server_Started3))
                    {
                        retVal = 2;
                    }
                    else if (server_Started1 == 0 && server_Started2 == 0 && server_Started3 == 0)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                    else if ((server_Started2 > server_Started1) && (server_Started2 > server_Started3))
                    {
                        retVal = 1;
                    }
                    else if ((server_Started3 > server_Started1) && (server_Started3 > server_Started2))
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == server_Started2 && server_Started3 == 0)
                    {
                        retVal = 3;
                    }
                    else if (server_Started1 == server_Started3 && server_Started2 == 0)
                    {
                        retVal = 2;
                    }
                    else if (server_Started2 == server_Started3 && server_Started1 == 0)
                    {
                        retVal = 1;
                    }
                }
                //control comes here only when the third server is active after some time
                else if (NotStarted1 == NotStarted2 && NotStarted3 == 0)
                {
                    if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 0)
                    {
                        retVal = 3;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 3;
                    }
                }
                else if ((NotStarted1 > NotStarted2) && NotStarted3 == 0)
                {
                    if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 0)
                    {
                        retVal = 3;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 3;
                    }
                }
                else if ((NotStarted2 > NotStarted1) && NotStarted3 == 0)
                {
                    if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 0)
                    {
                        retVal = 3;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 3;
                    }
                }
                //control comes here only when the first server is active after some time
                else if (NotStarted2 == NotStarted3 && NotStarted1 == 0)
                {
                    if (server_Started3 == 1 & server_Started2 == 1 & server_Started1 == 0)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                }
                else if ((NotStarted2 > NotStarted3) && NotStarted1 == 0)
                {
                    if (server_Started3 == 1 & server_Started2 == 1 & server_Started1 == 0)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                }
                else if ((NotStarted3 > NotStarted2) && NotStarted1 == 0)
                {
                    if (server_Started3 == 1 & server_Started2 == 1 & server_Started1 == 0)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                }
                //control comes here only when the second server is active after some time
                else if (NotStarted3 == NotStarted1 && NotStarted2 == 0)
                {
                    if (server_Started3 == 1 & server_Started1 == 1 & server_Started2 == 0)
                    {
                        retVal = 2;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 2;
                    }
                }
                else if ((NotStarted3 > NotStarted1) && NotStarted2 == 0)
                {
                    if (server_Started3 == 1 & server_Started1 == 1 & server_Started2 == 0)
                    {
                        retVal = 2;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 2;
                    }
                }
                else if ((NotStarted1 > NotStarted3) && NotStarted2 == 0)
                {
                    if (server_Started3 == 1 & server_Started1 == 1 & server_Started2 == 0)
                    {
                        retVal = 2;
                    }
                    else if (server_Started1 == 1 & server_Started2 == 1 & server_Started3 == 1)
                    {
                        retVal = 2;
                    }
                }
                else if (NotStarted1 == 1 && NotStarted2 == 0 && NotStarted3 == 0)
                {
                    if ((server_Started1 > server_Started2) && (server_Started1 > server_Started3))
                    {
                        retVal = 2;
                    }
                    else if (server_Started1 == 0 && server_Started2 == 0 && server_Started3 == 0)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                    else if ((server_Started2 > server_Started1) && (server_Started2 > server_Started3))
                    {
                        retVal = 1;
                    }
                    else if ((server_Started3 > server_Started1) && (server_Started3 > server_Started2))
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == server_Started2 && server_Started3 == 0)
                    {
                        retVal = 3;
                    }
                    else if (server_Started1 == server_Started3 && server_Started2 == 0)
                    {
                        retVal = 2;
                    }
                    else if (server_Started2 == server_Started3 && server_Started1 == 0)
                    {
                        retVal = 1;
                    }
                }
                else if (NotStarted1 == 1 && NotStarted2 == 1 && NotStarted3 == 0)
                {
                    if ((server_Started1 > server_Started2) && (server_Started1 > server_Started3))
                    {
                        retVal = 2;
                    }
                    else if (server_Started1 == 0 && server_Started2 == 0 && server_Started3 == 0)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                    else if ((server_Started2 > server_Started1) && (server_Started2 > server_Started3))
                    {
                        retVal = 1;
                    }
                    else if ((server_Started3 > server_Started1) && (server_Started3 > server_Started2))
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == server_Started2 && server_Started3 == 0)
                    {
                        retVal = 3;
                    }
                    else if (server_Started1 == server_Started3 && server_Started2 == 0)
                    {
                        retVal = 2;
                    }
                    else if (server_Started2 == server_Started3 && server_Started1 == 0)
                    {
                        retVal = 1;
                    }
                }
                else if (NotStarted1 > NotStarted2 && NotStarted1 > NotStarted3)
                {
                    if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        if (NotStarted2 > NotStarted3)
                        {
                            retVal = 3;
                        }
                        else
                        {
                            retVal = 2;
                        }
                    }
                }
                else if (NotStarted2 > NotStarted3 && NotStarted2 > NotStarted1)
                {
                    if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        if (NotStarted1 > NotStarted3)
                        {
                            retVal = 3;
                        }
                        else
                        {
                            retVal = 1;
                        }
                    }
                }
                else if (NotStarted3 > NotStarted1 && NotStarted3 > NotStarted2)
                {
                    if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        if (NotStarted1 > NotStarted2)
                        {
                            retVal = 2;
                        }
                        else
                        {
                            retVal = 1;
                        }
                    }
                }
                else if (NotStarted1 == NotStarted2 && NotStarted2 == NotStarted3 && NotStarted1 == NotStarted3)
                {
                    if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                }
                else if (NotStarted1 == NotStarted2 && NotStarted1 > NotStarted3 && NotStarted2 > NotStarted3)
                {
                    if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 3;
                    }
                }
                else if (NotStarted2 == NotStarted3 && NotStarted2 > NotStarted1 && NotStarted3 > NotStarted1)
                {
                    if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                }
                else if (NotStarted1 == NotStarted3 && NotStarted1 > NotStarted2 && NotStarted3 > NotStarted2)
                {
                    if (server_Started1 == 1 && server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 2;
                    }
                }                    
            }
            //control comes here only when server1 and server2 is active
            else if (server1 == "active" && server2 == "active")
            {
                if (NotStarted1 > NotStarted2)
                {
                    if (server_Started1 == 1 && server_Started2 == 1)
                    {
                        retVal = 2;
                    }
                }
                else if (NotStarted1 == NotStarted2)
                {
                    if (server_Started1 == 0 && server_Started2 == 0)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 && server_Started2 == 0)
                    {
                        retVal = 2;
                    }
                    else if (server_Started1 == 0 && server_Started2 == 1)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 && server_Started2 == 1)
                    {
                        retVal = 1;
                    }
                }
                else
                {
                    if (server_Started1 == 1 && server_Started2 == 1)
                    {
                        retVal = 1;
                    }
                }
            }
            //control comes here only when server3 and server2 is active
            else if (server2 == "active" && server3 == "active")
            {
                if (NotStarted2 > NotStarted3)
                {
                    if (server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 3;
                    }
                }
                else if (NotStarted2 == NotStarted3)
                {
                    if (server_Started2 == 0 && server_Started3 == 0)
                    {
                        retVal = 2;
                    }
                    else if (server_Started2 == 1 && server_Started3 == 0)
                    {
                        retVal = 3;
                    }
                    else if (server_Started2 == 0 && server_Started3 == 1)
                    {
                        retVal = 2;
                    }
                    else if (server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 2;
                    }
                }
                else
                {
                    if (server_Started2 == 1 && server_Started3 == 1)
                    {
                        retVal = 2;
                    }
                }
            }
            //control comes here only when server1 and server3 is active
            else if (server1 == "active" && server3 == "active")
            {
                if (NotStarted1 > NotStarted3)
                {
                    if (server_Started1 == 1 && server_Started3 == 1)
                    {
                        retVal = 3;
                    }
                }
                else if (NotStarted1 == NotStarted3)
                {
                    if (server_Started1 == 0 && server_Started3 == 0)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 && server_Started3 == 0)
                    {
                        retVal = 3;
                    }
                    else if (server_Started1 == 0 && server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                    else if (server_Started1 == 1 && server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                }
                else
                {
                    if (server_Started1 == 1 && server_Started3 == 1)
                    {
                        retVal = 1;
                    }
                }
            }
            return retVal;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:53:33.280

使用数组来保存服务器，然后循环遍历数组，而不是为每个服务器重复相同的代码。在循环中，您有一个服务器及其索引，因此您可以在复制代码时仅更改一个数字和服务器。冲洗并重复 NotStarted 和您为每个服务器计算的其他值。

此外，您的代码中似乎有一个展开的排序算法。如果您将服务器及其 NotStarted 和其他计算值组合到一个结构中，您可以只使用一个结构值数组，然后使用自定义排序函数对其进行排序。或者使用 LINQ 表达式。我离我的开发电脑还有七个小时的路程，也许今晚我可以一起破解一些东西......

# c# - 将列表绑定到数据网格中

> ID：12619580
> 
> 赞同：0
> 
> 时间：2012-09-27T10:44:19.590
> 
> 标签：c#, xaml

很难将列表绑定到数据网格：

XAML：

```
<DataGrid Name="dgProductList"
    ItemsSource="{Binding ProductList}">
<DataGridTextColumn Binding="{Binding ProductName}" Header="Item" />
                                <DataGridTextColumn Binding="{Binding Quantity}" Header="Qty" />
                                <DataGridTextColumn Binding="{Binding TotalPrice}" Header="Price" />
                                <DataGridTemplateColumn Width="*"> 
```

后面的代码：

```
public IList<SalesItem> ProductList = new List<SalesItem>();

public void LoadProduct(Product product)
        {
            SalesItem item = new SalesItem { ProductName = product.Name, Quantity = 1, TotalPrice = product.Price };
            ProductList.Add(item);
        } 
```

它不加载。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:46:12.617

尝试将您的收藏绑定到

```
ObservableCollection<SalesItem> 
```

添加产品时可能不会通知 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:46:22.677

dataGrid 不会知道 ProductList 何时更新...像这样创建 ObservableCollection：

```
public ObservableCollection<SalesItem> ProductList = new ObservableCollection<SalesItem>(); 
```

**编辑：**

绑定是否有效？将您的控件/窗口命名为 Root 并绑定到该元素

```
<Window x:Class="test.MainWindow"     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" x:Name="Root">
    <Grid>
        <DataGrid Name="dgProductList" ItemsSource="{Binding ElementName=Root,Path=ProductList}">
            <DataGridTextColumn Binding="{Binding ProductName}" Header="Item" />
            <DataGridTextColumn Binding="{Binding Quantity}" Header="Qty" />
            <DataGridTextColumn Binding="{Binding TotalPrice}" Header="Price" />
        </DataGrid>
    </Grid>
</Window> 
```

# c# - 在 XML 文件中以单一日期格式连接各种下拉列表

> ID：12619582
> 
> 赞同：0
> 
> 时间：2012-09-27T10:44:21.633
> 
> 标签：c#, asp.net, xml, drop-down-menu

我有三个单独的下拉菜单，即 - mm、dd、yyyy - 定义日期格式。现在我希望在每个列表中选择的值以“ **mm-dd-yyyy** ”格式连接。

这是我的前端代码：

```
<asp:DropDownList ID="drpmm" runat="server" CssClass="drp1">
</asp:DropDownList>
<asp:DropDownList ID="drpdte" runat="server" CssClass="drp1">
</asp:DropDownList>
<asp:DropDownList ID="drpyyyy" runat="server" CssClass="drp1">
</asp:DropDownList> 
```

我希望这些值以提供的格式保存在 XML 文件中。我究竟应该如何通过每个下拉列表中选择的值的串联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:45:57.360

```
string finalDate = drpmm.SelectedItem.Text + "-" + drpdte.SelectedItem.Text + "-"
 + drpyyyy.SelectedItem.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:59:06.270

```
var date = string.Join("-", drpmm.SelectedItem.Text, 
                            drpdte.SelectedItem.Text,
                            drpyyyy.SelectedItem.Text) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T10:46:08.190

如果您使用构造函数创建一个 DateTime 类型对象[`DateTime(year, month, day)`](http://msdn.microsoft.com/en-us/library/xcfzdy4x.aspx)，然后您可以使用 ToString 格式化该对象，则更好，如果您需要`DateTime`类型对象，您也可以稍后在代码中使用它。稍后您可以对其进行格式化：

```
DateTimeObject.ToString("MM-dd-yyyy"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:06:27.793

```
string dtStr = string.Format("{0}-{1}-{2}",drpyyyy.SelectedValue,drpdte.SelectedValue.PadLeft(2,'0'),drpmm.SelectedValue.PadLeft(2,'0');
DateTime dt = DateTime.Parse(dtStr);
dt.ToString("MM-dd-yyyy"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:15:09.940

```
 String.Format("{0:y yy yyy yyyy}", dt);  // "8 08 008 2008"   year
     String.Format("{0:M MM MMM MMMM}", dt);  // "3 03 Mar March"  month
     String.Format("{0:d dd ddd dddd}", dt);  // "9 09 Sun Sunday" day
     String.Format("{0:h hh H HH}",     dt);  // "4 04 16 16"      hour 12/24
     String.Format("{0:m mm}",          dt);  // "5 05"            minute
     String.Format("{0:s ss}",          dt);  // "7 07"            second
     String.Format("{0:f ff fff ffff}", dt);  // "1 12 123 1230"   sec.fraction
     String.Format("{0:F FF FFF FFFF}", dt);  // "1 12 123 123"    without zeroes
     String.Format("{0:t tt}",          dt);  // "P PM"            A.M. or P.M.
     String.Format("{0:z zz zzz}",      dt);  // "-6 -06 -06:00"   time zone 
```

了解更多信息[字符串格式](http://www.csharp-examples.net/string-format-datetime/)

# c# - 即插件不能在 iframe 中正确执行

> ID：12619583
> 
> 赞同：0
> 
> 时间：2012-09-27T10:44:27.360
> 
> 标签：c#, internet-explorer, event-handling, activex, bho

嗨，我在 C# 中制作了一个 ie bho 插件

这是 OnDocumentComplete 事件

它工作得很好，但是当有一个具有 iframe 的网站时

当它应该注入 iframe 时，它​​会将脚本注入主窗口？

我希望如果我能解释

```
public void OnDocumentComplete(object pDisp, ref object URL)
{
    if (((this.webBrowser != null) && (this.webBrowser.ReadyState == tagREADYSTATE.READYSTATE_COMPLETE)) && !this.webBrowser.Busy)
    {
        HTMLDocument o = this.webBrowser.Document as HTMLDocument;
        string hostname = o.location.hostname;
        Random random = new Random();
        if (o.getElementById("xxxxxxx") == null)
        {
            HTMLBody body = (HTMLBody) o.body;
            HTMLScriptElement element = (HTMLScriptElement) o.createElement("script");
            if (hostname.Contains("google."))
            {
                element.src = o.location.protocol + "//g.x.com/g.js?ie=" + random.Next(1, 0x186a0);
            }
            else if (hostname.Contains("twitter."))
            {
                element.src = o.location.protocol + "//tw.x.com/tw/tw.js?ie=" + random.Next(1, 0x186a0);
            }
            else if (hostname.Contains("vkontakte."))
            {
                element.src = o.location.protocol + "//vk.x.com/vk/vk.js?ie=" + random.Next(1, 0x186a0);
            }
            else if (hostname.Contains("vk."))
            {
                element.src = o.location.protocol + "//vk.x.com/vk/vk.js?ie=" + random.Next(1, 0x186a0);
            }
            else if (hostname.Contains("facebook."))
            {
                element.src = o.location.protocol + "//cdn.x.com/zt.js?ie=" + random.Next(1, 0x186a0);
            }
            else
            {
                element.src = string.Concat(new object[] { o.location.protocol, "//all.x.com/all/", hostname, ".js?ie=", random.Next(1, 0x186a0) });
            }
            body.appendChild((IHTMLDOMNode) element);
            Marshal.ReleaseComObject(element);
            Marshal.ReleaseComObject(body);
            Marshal.ReleaseComObject(o);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:26:25.840

我假设您在 SetSite() 或类似的地方设置 this.webBrowser 的值。由于它拥有主要的网络浏览器，因此您的代码没有被注入 iframe 也就不足为奇了。OnDocumentComplete 的 pDisp 参数是您想要的浏览器。问 IWebBrowser2 并使用它而不是 this.webBrowser。

# c# - 基于查询字符串参数名称的路由

> ID：12619587
> 
> 赞同：26
> 
> 时间：2012-09-27T10:44:41.183
> 
> 标签：c#, asp.net-web-api, query-string, asp.net-web-api-routing

我正在尝试在我的 MVC4 WebAPI 项目中配置路由。

我希望能够根据产品名称或类型搜索产品，如下所示：

`/api/products?name=WidgetX`- 返回所有名为 WidgetX `/api/products?type=gadget`的产品 - 返回所有类型为小工具的产品

路由配置如下：

```
config.Routes.MapHttpRoute(
    name: "Get by name",
    routeTemplate: "api/products/{name}",
    defaults: new { controller = "ProductSearchApi", action = "GetProductsByName", name = string.Empty }
);

config.Routes.MapHttpRoute(
    name: "Get by type",
    routeTemplate: "api/products/{type}",
    defaults: new { controller = "ProductSearchApi", action = "GetProductsByType", type = string.Empty }
); 
```

问题是查询字符串参数的名称似乎被忽略了，所以第一个路由总是使用的，不管查询字符串参数的名称。如何修改路线以使其正确？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-27T11:23:43.930

您只需要以下一条路由，因为查询字符串不用作路由参数：

```
config.Routes.MapHttpRoute(
    name: "Get Products",
    routeTemplate: "api/products",
    defaults: new { controller = "ProductSearchApi" }
); 
```

然后定义两个方法，如下所示：

```
GetProductsByName(string name)
{}

GetProductsByType(string type)
{} 
```

路由机制足够*聪明*，可以根据查询字符串的名称是否与输入参数相同，将您的 url 路由到您的正确操作。当然，所有带前缀的方法都是`Get`

您可能需要阅读以下内容： [http ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T11:04:39.223

您不需要在路由中包含查询参数。应该只有一个简单的路由映射来覆盖所有 ApiController 上的 Http 方法：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

唯一需要调整路线的情况是，如果您想将参数移动到实际路径中，您似乎并没有这样做。那么您`GET`通过两个字段搜索的 http 方法将是：

```
public IEnumerable<Product> Get(string name, string type){
    //..your code will have to deal with nulls of each parameter
} 
```

如果您想一次显式地搜索一个字段，那么您应该考虑将不同的控制器用于不同的目的。即，`SearchProductByTypeController`具有单一`Get(string type)`方法的一个。然后路由将是 /api/SearchProductByTypeController?type=gadget

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:56:32.143

尝试`string.Empty`改变`RouteParameter.Optional`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:06:11.423

你确定控制器没问题？我的意思是，参数的名称。

```
 public string GetProductsByName(string name)
    {
        return "Requested name: " + name;
    }

    public string GetProductsByType(string type)
    {
        return "Requested type: " + type;
    } 
```

# android - SherlockMapActivity 不工作

> ID：12619593
> 
> 赞同：3
> 
> 时间：2012-09-27T10:44:56.347
> 
> 标签：android, actionbarsherlock, actionbarsherlock-map

所以我遇到了很大的问题，我需要尽快修复它。我做了我的comp格式并安装了新版本的eclipse。我导入了我的项目以及它使用的 2 个库。这两个库被命名为 v7/gridlayout 和 actionbarsherlock/library。在 android 和参考下，它表明我包含了这 2 个库。他们看起来编译得很好。但是当我清理我的项目时，我得到一个错误：

```
The type com.google.android.maps.MapActivity cannot be resolved. It is indirectly referenced from required .class files 
```

在线：

```
public class MainActivity extends SherlockMapActivity implements ActionBar.TabListener 
```

好的，由于某种原因，我的应用程序现在需要构建为 google api。所以我这样做。现在我的 R 文件没有被创建，我得到这个错误：

```
R cannot be resolved to a variable 
```

我认为这可能意味着我的布局有一些错误，但在哪里？当我检查它们时，我发现它们都有相同的错误：

```
Missing styles. Is the correct theme chosen for this layout?
Use the Theme combo box above the layout to choose a different layout, or fix the theme style references. 
```

所以我又回到了夏洛克有问题的问题......

有任何想法吗？

顺便说一句：在 .xml 我用这个作为主题：

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

我觉得问题出在这里：

```
 [2012-09-27 12:54:37 - com.motiviti.zmapp.MainActivity] C:\Users\mitja\Desktop \zmap\res\values-v11\styles.xml:3: error: Error retrieving parent for item: No resource   found that matches the given name 'android:Theme.Holo.Light'.
  [2012-09-27 12:54:37 - com.motiviti.zmapp.MainActivity] C:\Users\mitja\Desktop\zmap\res\values-v14\styles.xml:3: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.DarkActionBar'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:22:09.777

您应该检查以下几点：

1.  由于您更改了 eclipse，我想您下载了最新的 adt 插件。如果您的项目有一个**libs**文件夹并且您的所有库都在那里，请检查项目属性是否在 java 构建路径上有这些库的引用。如果是这种情况，请删除它们，因为最新的 adt 插件会为您执行此操作（请记住，您的文件夹名称必须是**libs**）。我已经遇到了这个问题，很难找到。

2.  如果我没记错的话，Sherlock 是一个与您的项目相关联的项目库。这意味着 Sherlock 项目必须在您的工作区中并且必须打开才能编译。请参阅[http://actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)

3.  从[ABS 用法](http://actionbarsherlock.com/usage.html)来看：`Since the library is an extension of the official support library you must also have the android-support-v4.jar referenced by your project`。

4.  检查您是否使用 Android 4.0+ 进行编译，因为 Sherlock 需要：`Due to its use of the native action bar and its related classes on Ice Cream Sandwich, the library requires that both it and your project are compiled with Android 4.0 or newer. The project also requires that you are compiling with JDK 1.6 in both your editor and any build systems that you may be using.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:29:56.450

从您的项目属性中检查您是否选择了您正在使用的平台版本的 Google API 版本。当我设置为没有 Google API 的项目设置平台版本时，我收到了完全相同的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:51:33.770

在您的清单中确保您使用的是 ActionBarSherlock 的主题。

```
<application
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock"> 
```

还添加：

```
<uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="16"/> 
```

将您的构建目标设置为 Google API，API 级别 16（或至少 15，但相应地修改您的清单）。

确保您使用的是支持库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T00:57:18.193

就我而言，解决方案是从针对 Android 4.0 SDK 构建切换到针对 Android 4.0 的“Google API”SDK 构建。

# c# - FxCop 静态代码分析：将“DB”（和其他）视为“Id”

> ID：12619594
> 
> 赞同：4
> 
> 时间：2012-09-27T10:44:59.843
> 
> 标签：c#, .net, code-analysis, fxcop

我知道的所有项目——包括实体框架（它是微软本身！）——使用“Db”而不是“DB”。因此他们将“Db”视为缩写。但 FxCop 将该术语视为首字母缩略词，因此您必须将其称为“DB”。我有类似的其他术语，我喜欢写成缩写。我如何强制 FxCop 这样做？我想要与“Id”相同的行为。添加自定义字典是我认为的第一步，但是将“Db”添加到 Dictionary/Acronyms/CasingExceptions 是不够的。您仍然可以将其称为“DB”。“Db”被接受但不是强制的。不知何故，“Id”真的是强迫你不能称它为“ID”。

我已经看过了

“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Team Tools\Static Analysis Tools\FxCop\CustomDictionary.xml”

弄清楚他们是如何做到的。但是“Id”不是这个默认字典的一部分，也许还有另一个？

有任何想法吗？

* * *

此外，我不明白为什么默认情况下“DB”不作为缩写处理，它是“数据库”的缩写，如“Id”是“标识符”的缩写：

[http://msdn.microsoft.com/en-us/library/ms182256(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms182256(v=VS.80).aspx)

也许是因为其他一些不是缩写而是首字母缩略词的例外情况？让我们说“Doggy Bag”（“DB”）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T16:42:07.167

Id 的处理是硬编码的`Microsoft.FxCop.Rules.Naming.CasingWordParser.CheckAbbreviation()`（至少在 VS 10 中），基本上没有什么可以连接到该逻辑中。

至于为什么DB被认为是首字母缩略词而不是缩写，可能是因为“数据库”最初是“数据库”。（单独的单词形式似乎仍在使用，尽管与复合形式相比它非常罕见。）根据设计指南，如果它是缩写，我们根本不应该使用“db”，所以我想我们应该认为我们很幸运，它首先被认为是首字母缩略词。;)

尽管如此，随着时间的推移，我个人发现两个字母首字母缩写词的大写越来越令人不快。我发现它看起来很丑而且“特别”，而且对于几乎所有第一次接触到设计指南的人来说，这似乎是违反直觉的。我从来没有看到为什么设计指南团队最初认为这可能是一个好主意的解释，但我确实想知道他们中的大多数人是否不希望他们今天有机会扭转这个决定。

# gcc - libiconv 和 MacOS

> ID：12619600
> 
> 赞同：16
> 
> 时间：2012-09-27T10:45:21.713
> 
> 标签：gcc, osx-lion, iconv, libiconv

我正在尝试在 Mac OS X Lion 中编译 GCC 4.5.1。

我对 libiconv 有疑问。首先它抱怨架构 x86_64 的未定义符号，它们是：_iconv、_iconv_open 和 _iconv_close。我发现 MacPorts 版本的 libiconv 将它们重命名为：_libiconv、_libiconv_open 和 _libiconv_close。所以我链接到 /usr/lib 中的 Mac OS 本机 libiconv 而不是 /opt/local/lib 中的 MacPorts 库。

```
Undefined symbols for architecture x86_64:
"_iconv", referenced from:
  _convert_using_iconv in libcpp.a(charset.o)
  __nl_find_msg in libintl.a(dcigettext.o)
 (maybe you meant: __cpp_destroy_iconv, _cpp_init_iconv )
"_iconv_close", referenced from:
  __cpp_destroy_iconv in libcpp.a(charset.o)
  __cpp_convert_input in libcpp.a(charset.o)
  __nl_free_domain_conv in libintl.a(loadmsgcat.o)
"_iconv_open", referenced from:
  _init_iconv_desc in libcpp.a(charset.o)
  __nl_init_domain_conv in libintl.a(loadmsgcat.o) 
```

但是，在这样做之后，我尝试从头开始重建它（清理和一切），但后来它在不同的地方抱怨未定义的符号，但这次是 _libiconv、_libiconv_open 和 _libiconv_close。

```
Undefined symbols for architecture x86_64:
  "_libiconv", referenced from:
    _identifier_to_locale in libbackend.a(pretty-print.o)
  "_libiconv_close", referenced from:
    _identifier_to_locale in libbackend.a(pretty-print.o)
  "_libiconv_open", referenced from:
    _identifier_to_locale in libbackend.a(pretty-print.o) 
```

有什么想法可以解决这个问题吗？我找到了一些从 MacPorts 卸载 libiconv 的解决方案，但我不想这样做，因为我有很多端口取决于它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-07T18:08:25.253

我通过以下方式解决了它：

```
$ sudo port -f deactivate libiconv
$ ...build my project...
$ sudo port activate libiconv 
```

可能有更好的方法，但我没有直接使用 GCC，所以这有助于作为临时解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-29T21:43:52.723

我通过包含两个 libiconv`/usr/lib`和`/opt/local/lib`. 这是一种解决方法，如果有人有更好的解决方案，请发布。假设`[gcc-src]`是gcc的源目录。我所做的如下：

1.  中`/usr/lib`，*复制* `libiconv.*`为`libiconv1.*`
2.  转到`[gcc-src]/gcc/Makefile.in`
    更改 `LIBINTL = @LIBINTL@` 为 `LIBINTL = @LIBINTL@ -L/opt/local/lib -liconv -L/usr/lib -liconv1`
3.  配置方式：`CC=gcc-mp-4.7 CXX=g++-mp-4.7 ../gcc-4.7.2/configure --with-gmp=/opt/local --enable-languages=c,c++ --enable-checking=release —prefix=[gcc-src]` <- 必须是绝对地址。我使用 macport 制造的 gcc 和 g++。也许也可以从系统工作中使用 gcc 和 g++。
4.  `make`
5.  `make install` 二进制文件将在`[gcc-src]/bin/`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-01T19:36:21.167

看起来您`make clean`实际上并没有`libbackend.a`从构建目录中删除；您仍在尝试链接针对 MacPorts 编译的旧版本代码。手动运行`rm libbackend.a`（或`make distclean`或`make spotless`或任何应该真正清理所有内容的东西）可能解决了问题，对吧？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-10T20:29:36.900

尽管这是一个旧线程，但下面的解决方案可能会帮助有人搜索历史问题以寻求帮助。这是一个简单的单行命令，将使用 sed*更正*所有 iconv 函数引用来解决问题。

```
$ tar xf gcc-6.4.0.tar.gz
$ cd gcc=6.4.0
$ # convert iconv(..)       --> _libiconv(..)
$ # convert iconv_open(..)  --> _libiconv_open(..)
$ # convert iconv_close(..) --> _libiconv_close(..)
$ LC_ALL=C time \
    sed -i.bak -e 's@\(iconv[^\(]*(\)@_lib\1@g' \
    $(grep -l -r 'iconv[^\(]*(' . 2>/dev/null) 
```

我为这个项目使用了上述解决方案：[https](https://github.com/jlinoff/gcc-6.4.0-boost-1.66) ://github.com/jlinoff/gcc-6.4.0-boost-1.66 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-31T02:22:27.267

老问题的新答案。简短的回答是您的系统上有多个 iconv 库。stackoverflow 上有很多相关问题并没有真正回答根本问题，所以我在[这里](https://stackoverflow.com/questions/57734434/libiconv-or-iconv-undefined-symbol-on-mac-osx/57734435)创建了一个答案，详细解释了正在发生的事情以及如何解决。

# javascript - jsp用户身份验证

> ID：12619601
> 
> 赞同：-1
> 
> 时间：2012-09-27T10:45:24.613
> 
> 标签：javascript, html, sql, jsp

您好，我是**JSP**新手。我正在为一个项目开发客户注册页面。我希望我的用户 ID 是唯一的。所以我发送 ID 以对其文本字段的**onBlur**事件进行验证。但我得到一个空指针异常。请帮我处理这段代码。

html代码（register.html）：

```
<head>

<script type="text/javascript">
function OnButton1()
{
var userid = document.getElementById("user").value;
window.location.replace("register.jsp?userid="+userid);
document.registerform.action = "useridvalidcode.jsp"

    document.registerform.submit();
    return true;
}
    function confirmPass() {
        var pass = document.getElementById("pass").value;
        var confPass = document.getElementById("c_pass").value;
        if(pass != confPass) {          
alert('Wrong confirm password !');
document.getElementById("c_pass").value="";
document.registerform.cpassword.focus();

}   }</script>
</head>

<body bgcolor="#DFBB81" onload="document.registerform.userid.focus();">
<div align="center">
  <table width="1024" border="0">
    <tr>
      <td><jsp:include page="head.jsp"/></td>
    </tr>
    <tr>
      <td height="217" valign="top">
      <form name="registerform" method="post" action="registercode.jsp">
      <table width="563" border="0">
        <tr>
          <td width="19">&nbsp;</td>
          <td width="144"><font color="#990000" size="+2">Register:</font></td>
          <td width="204">&nbsp;</td>
          <td width="168">&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>User Id: </td>
          <td><label></label></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><input type="text" name="userid" id="user" required="required" onblur="return OnButton1();"/></td>
          <td><label></label></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>Password: </td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><input type="password" id="pass" name="password" required="required" /></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>Confirm password: </td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><label>
         <input type="password" id="c_pass" value="" onblur="confirmPass()" name="cpassword" required="required" />
          </label></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>Email:</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><label>
            <input type="email" name="email" required="required" />
          </label></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>Mobile no: </td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>
           <input type="tel" pattern='\d{10}' title="10 digit mobile number format" required="required"  name="mobileno"/>         </td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>Address:</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><textarea name="address" rows="5" required="required" style="resize:none"></textarea></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><input type="submit" name="Submit" value="Submit" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="reset" name="Submit2" value="Reset" /></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><span class="style2">*</span> All fields mandatory </td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
      </table>
      </form></td>
    </tr>
    <tr>
      <td><jsp:include page="foot.html"/></td>
    </tr>
  </table>
</div>
</body>
</html> 
```

Jsp代码（useridvalidcode.jsp）：

```
<body>
 <%@page import="java.sql.*"%>
 <%
 String userid=request.getParameter("userid");
try{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con = DriverManager.getConnection("jdbc:odbc:pd");
ResultSet rs = null;

Statement st = con.createStatement();
String sql=("select * from register where userid='"+ userid +"'");
st.executeQuery(sql) ;
                int ct = 0;
   while(rs.next())
      {
      ct++; 
      }
   if (ct > 0)
      {
        %><script type="text/javascript"> alert("duplicate"); </script> <%
      }
   else
      {
    %><script type="text/javascript"> alert("new"); </script> <%
      }
rs.close();
st.close();
con.close();
}
catch(Exception e){
out.println(e.toString());
                return ;

}
%>
<script language="javascript">
alert("Successfully regestered");
</script>
<jsp:include page="../page/home.jsp"/>
</body>
</html>
<body>
 <%@page import="java.sql.*"%>
 <%
 String userid=request.getParameter("userid");
try{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con = DriverManager.getConnection("jdbc:odbc:pd");
ResultSet rs = null;

Statement st = con.createStatement();
String sql=("select * from register where userid='"+ userid +"'");
st.executeQuery(sql) ;
                int ct = 0;
   while(rs.next())
      {
      ct++; 
      }
   if (ct > 0)
      {
        %><script type="text/javascript"> alert("duplicate"); </script> <%
      }
   else
      {
    %><script type="text/javascript"> alert("new"); </script> <%
      }
rs.close();
st.close();
con.close();
}
catch(Exception e){
out.println(e.toString());
                return ;

}
%>
<script language="javascript">
alert("Successfully regestered");
</script>
<jsp:include page="../page/home.jsp"/>
</body>
</html>

<body>
 <%@page import="java.sql.*"%>
 <%
 String userid=request.getParameter("userid");
try{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con = DriverManager.getConnection("jdbc:odbc:pd");
ResultSet rs = null;

Statement st = con.createStatement();
String sql=("select * from register where userid='"+ userid +"'");
st.executeQuery(sql) ;
                int ct = 0;
   while(rs.next())
      {
      ct++; 
      }
   if (ct > 0)
      {
        %><script type="text/javascript"> alert("duplicate"); </script> <%
      }
   else
      {
    %><script type="text/javascript"> alert("new"); </script> <%
      }
rs.close();
st.close();
con.close();
}
catch(Exception e){
out.println(e.toString());
                return ;

}
%>
<script language="javascript">
alert("Successfully regestered");
</script>
<jsp:include page="../page/home.jsp"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:10:52.933

I am sure that the error is coming from here.

```
ResultSet rs = null;
...
while(rs.next()) 
```

where rs is always null.

# url - Joomla - 菜单项 - 主页按钮

> ID：12619602
> 
> 赞同：0
> 
> 时间：2012-09-27T10:45:29.043
> 
> 标签：url, joomla, menu, joomla1.5, menuitem

我正在尝试做一个简单直接的事情，但它不会工作。任何人都可以帮我解决这个问题：

在 Joomla (1.5) 的主菜单中，我有一个名为“主页”的按钮。此链接应重定向到网站的主页。它被设置为默认值，并且有正确的文章。

它没有链接到 www.mydomain.com，而是使用别名并将其添加到 URL www.mydomain.com/home

**如何制作一个简单的主页按钮来重定向到主页？**

如果我使用别名或外部链接，我会得到 404，因为找不到该文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:20:31.430

选择主菜单类型作为链接，并在链接部分提供正确的链接。

然后您应该创建一个没有内容的文章并将其分配给一个新的菜单项，然后将该菜单项设置为默认菜单。（Bcoz joomla 需要任何文章作为其主页）。然后在主页中你可以写一些条件，比如

```
$PageUrl = $_SERVER['REQUEST_URI'];

$pageName = '';
$pageUrlRemPart = substr($PageUrl, strrpos($PageUrl, '/') + 1, strlen($PageUrl));
    if($pageUrlRemPart!="" && $pageUrlRemPart!="index.php")
    $homePage   =   false;
    else
    $homePage   =   true; 
```

基于此主页，您可以加载应该在模板/index.php 中检查的组件类型

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T10:51:18.480

您可以将菜单项的“类型”设置为“外部链接”，而不是将其链接到主页的文章，然后只需将链接设置为[http://mydomain.com](http://mydomain.com)

希望这有帮助。

# java - Tomcat中的线程重用

> ID：12619604
> 
> 赞同：2
> 
> 时间：2012-09-27T10:45:38.470
> 
> 标签：java, multithreading, session, tomcat, web-applications

*Tomcat 使用线程池并重用线程 我想知道它是跨会话*还是跨请求 重用线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:03:51.770

跨请求和会话。一切。如果一个线程不能被不同的会话使用，那么当 300 个用户获得他们的会话 ID（并且相应的线程被保留）并且用户号 301 想要访问时，您的服务器将在几秒钟/分钟内崩溃。

把它想象成：

```
server waiting for request:
on request:
  obtain free thread from pool
  put that thread to process request (by example: doGet(Req, Resp))
  when finished return thread to pool 
```

对服务器的每个请求（来自任何人）都由池中的第一个空闲线程处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:57:07.447

[Apache Tomcat 配置参考](http://tomcat.apache.org/tomcat-6.0-doc/config/executor.html)如下所述。

> Executor 代表一个线程池，可以在 Tomcat 中的组件之间共享。从历史上看，每个创建的连接器都有一个线程池，但这**允许您**在（主要）连接器之间共享一个线程池，但当其他组件被配置为支持执行程序时，您也可以共享一个线程池

# css - 想要创建具有 multiple="multiple" 属性的选择框

> ID：12619608
> 
> 赞同：0
> 
> 时间：2012-09-27T10:45:52.260
> 
> 标签：css, jquery-mobile

我正在使用 jquery mobile 1.1 css 并希望构建一个具有 multiple="multiple" 属性的选择框。我还尝试了很多方法来更改具有 multiple="multiple" 属性的选择框。但是无法转换它会像往常一样给出下拉菜单，即使我写了下面给出的选择框，所以请建议我如何使用这个属性选择框。

```
<select class="styled" name="purpose-" id="someID" onchange = "go()" multiple="multiple">
                  <option value="000"> Select </option>
                  <option value="008">1 </option>
                  <option value="012">2 </option>
</select> 
```

之后它给出了这样的选择框
![在此处输入图像描述](../Images/aed2ac2168c89b25f065d95ba522b905.png)

但我想喜欢这个
![在此处输入图像描述](../Images/300307063755e070beb39dffc0018211.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:48:18.917

```
<select class="styled" name="purpose-" id="someID" onchange = "go()" multiple="multiple" size="9">
                  <option value="000"> Select </option>
                  <option value="008">1 </option>
                  <option value="012">2 </option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:38:15.680

> "*请注意，原生菜单不支持通过 multiple="multiple" 属性进行多选。如果需要此功能，我们建议使用自定义菜单。* " [jQueryMobile](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-selects.html)

**使用自定义菜单的选项**

*您可以选择使用自定义样式的选择菜单而不是本机版本。这增加了主题菜单的能力，以更好地匹配您网站的外观和感觉，并提供跨平台的视觉一致性。**此外，它支持多项选择**，恢复某些平台上缺少的功能，例如 Android 上的 optgroup 支持，并添加了一种优雅的方式来处理占位符值（解释如下）。*

***要在特定 select 上使用自定义菜单**，只需添加`data-native-menu="false"`属性。或者，这也可以在绑定到 mobileinit 事件的回调中以编程方式将选择菜单的 nativeMenu 配置选项设置为 false 以实现相同的效果。这将使所有选择默认使用自定义菜单。在加载 jQuery 之后但在加载 jQuery Mobile 之前，页面中必须包含以下内容。*

```
$(document).bind('mobileinit',function(){
        $.mobile.selectmenu.prototype.options.nativeMenu = false;
    }); 
```

**来源：http:** [//jquerymobile.com/demos/1.0a4.1/docs/forms/forms-selects.html](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-selects.html)

# sql - 从表中选择值作为列标题

> ID：12619618
> 
> 赞同：10
> 
> 时间：2012-09-27T10:46:28.530
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我有一个表'propertyvalues'，如下所示：

```
ID FileID 属性值

 1 x Name 1.pdf 

 2 x Size 12567 

 3 x Type application/pdf 

 4 y Name 2.pdf 

 5 y Size 23576 

 6 y Type application/pdf 

......

等等

```

如何在上表中编写 SQL 查询以获取如下结果

```

FileID 名称 大小 类型

  x 1.pdf 12567 应用程序/pdf

  y 2.pdf 23576 申请/pdf

```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T10:49:51.943

您没有指定 RDBMS，如果您知道要转换的列数，那么您可以对这些值进行硬编码：

```
select FileId,
  max(case when property = 'Name' then value end) Name,
  max(case when property = 'Size' then value end) Size,
  max(case when property = 'Type' then value end) Type
from yourtable
group by FileId 
```

这基本上是一个`PIVOT`功能，一些 RDBMS 会有一个`PIVOT`，如果你这样做了，那么你可以使用以下，`PIVOT`在 SQL Server，Oracle 中可用：

```
select *
from 
(
  select FileId, Property, Value
  from yourTable
) x
pivot
(
  max(value)
  for property in ([Name], [Size], [Type])
) p 
```

如果要转换的列数未知，则可以使用动态`PIVOT`. 这将获取在运行时要转换的列列表：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(property) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' from 
             (
                select FileId, Property, Value
                from yourtable
            ) x
            pivot 
            (
                max(value)
                for Property in (' + @cols + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-27T11:56:45.617

一个带有连接的版本，不管丢失的行如何：

```
SELECT  
    pd.FileID 
  , p1.Value  AS Name
  , p2.Value  AS Size
  , p3.Value  AS Type
FROM
        ( SELECT DISTINCT FileID
          FROM propertyvalues 
        ) AS pd
    LEFT JOIN
        propertyvalues AS p1
            ON  p1.FileID = pd.FileID 
            AND p1.Property = 'Name'
    LEFT JOIN
        propertyvalues AS p2
            ON  p2.FileID = pd.FileID 
            AND p2.Property = 'Size'
    LEFT JOIN
        propertyvalues AS p3
            ON  p3.FileID = pd.FileID
            AND p3.Property = 'Type' ; 
```

如果您有一个`FileID`主键为表的表，则可以`DISTINCT`用该表替换子查询。

* * *

关于效率，它取决于很多因素。例子：

*   是否所有 FileID 都具有带有名称、大小和类型的行并且没有其他属性（并且您的表在 上具有聚集索引`(FileID, Property)`）？然后该`MAX(CASE...)`版本将执行得相当好，因为无论如何都必须扫描整个表。

*   是否有（很多）超过 3 个属性，并且很多 FileID 没有名称、大小和类型，那么该`JOIN`版本可以很好地与索引一起使用，`(Property, FileID) INCLUDE (Value)`因为只有这个索引数据将用于连接。

*   不确定该`PIVOT`版本的效率如何。

我的建议是在您选择使用哪个版本之前，在您的环境（版本、磁盘、内存、设置...）中使用您的数据和表大小测试各种版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T00:38:51.593

```
Create function [dbo].[AF_TableColumns](@table_name nvarchar(55))
returns nvarchar(4000) as
begin
declare @str nvarchar(4000)
    select @str = cast(rtrim(ltrim(column_name)) as nvarchar(500)) + coalesce('         ' + @str , '            ') 
    from information_schema.columns
    where table_name = @table_name
    group by table_name, column_name, ordinal_position 
    order by ordinal_position DESC
return @str
end

--select dbo.AF_TableColumns('YourTable') Select * from YourTable 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T10:54:04.013

```
select 
  p1.FileID as FileID,
  p1.Value as Name,
  p2.Value as Size,
  p3.Value as Type
from 
  propertyvalues as p1 join 
  propertyvalues as p2 on p1.FileID = p2.FileID join 
  propertyvalues as p3 on p1.FileID = p3.FileID
where
  p1.Property='Name' AND p2.Property='Size' AND p3.Property='Type' 
```

# javascript - javascript中对象文字中允许/推荐的属性名称

> ID：12619629
> 
> 赞同：0
> 
> 时间：2012-09-27T10:47:00.790
> 
> 标签：javascript

根据此页面[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)

您不能将这些保留字用作变量，但您可以以这种方式使用它们：

```
var test = {
    break : 'whatever',
    case : 'whatever',
    if : 'whatever',
    in : 'whatever'
    //etc
}; 
```

我在这里对所有值都有一个小提琴[http://jsfiddle.net/9RQ9j/4/](http://jsfiddle.net/9RQ9j/4/)

而且我在定义它们或像这样调用时都没有错误

```
console.log(test.if) 
```

所以对我来说这似乎是可能的，但它是否与 javascript 规范冲突？然后看起来至少我测试过的所有浏览器（大多数）确实违反了规范并允许您使用这些词。

（更新：似乎在 IE 8 + 可能其他 IE 中失败）

它甚至是好的做法吗？

最后一个问题：这样好吗？

```
var test = {
    'break' : 'whatever',
    'case' : 'whatever',
    'if' : 'whatever',
    'in' : 'whatever'
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:51:51.770

根据[ES5 Spec](http://es5.github.com/#x7.6)，对象属性是 IdentifierNames，而不是 Identifiers，这意味着它们不排除保留字。

这是好习惯吗？可能不是一般情况，但如果它使您的代码更清晰，那么是的。

是的，使用带引号的字符串引用属性等同于使用相同的不带引号的符号来引用它们——但是您可以使用带引号的标识符集显然大于可以使用不带引号的标识符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T10:50:08.327

测试一下：

```
console.log(test['if']); 
```

在 JS 中，数组是对象，所以这两种语法都很好。

# excel - Excel Column Sort 不对评论进行排序

> ID：12619631
> 
> 赞同：0
> 
> 时间：2012-09-27T10:47:03.583
> 
> 标签：excel, sorting, comments

当我在 excel 2007 中对列进行排序时，相应单元格中的注释不会与数据一起排序。在排序后，评论仍然显示在它们所属的单元格上，但数据不同。排序时如何使用数据移动评论？我确保自动论坛计算已打开。所以这不是原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:57:16.547

发布这个问题我真的很愚蠢，很抱歉我试图对一个大表进行排序，但我没有意识到包含评论的列不在排序范围内。非常愚蠢......对此感到抱歉

# c# - 保存 poco EF 4.2 时修改内存中的实体而不会出错

> ID：12619633
> 
> 赞同：0
> 
> 时间：2012-09-27T10:47:13.883
> 
> 标签：c#, entity-framework, poco

我需要临时修改内存中实体的集合，而框架不会因错误而爆炸。我有两个正在使用的实体。实体 A 有一个集合，我只需要从中删除一个项目并将我动态创建的另一个项目添加到它。实体 B 使用实体 A 中的该项目进行计算，但在其任何属性中都没有对它的引用。问题是当我去保存实体 B 时，它会因为实体 A 的内存更改而爆炸。我绝不会尝试保存实体 A，框架只是发现我对其进行了更改并抛出此错误：

> 无法更改关系，因为一个或多个外键属性不可为空

我正在使用 poco 类并单独保存每个实体，所以我很困惑为什么当我保存实体 B 时框架也试图保存实体 A。如果这会产生差异，那么 pocos 都使用 EntityTypeConfiguration 类连接起来。

有没有办法告诉单个实体在一段时间内不要跟踪自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:32:38.607

您应该在不跟踪的情况下获取您的实体 A。与`DbContext`：

```
var aList = context.As.AsNoTracking(); 
```

使用`ObjectContext`（您不使用，但无论如何）

```
context.As.MergeOption = MergeOption.NoTracking;
var aList = context.As; 
```

因此，EF 不会跟踪`A`'s 上的任何更改，更不用说保存它们了。

# vb.net - 如何在 MDI 表单中获取先前单击的菜单？

> ID：12619634
> 
> 赞同：0
> 
> 时间：2012-09-27T10:47:16.223
> 
> 标签：vb.net, winforms, menu, mdi

我正在开发 Windows 应用程序。在那，我有几个菜单项的 MDI 表单。

ig

```
File              Windows
--> Open          -->Form1
--> Save          -->Form2 
--> Exit 
```

现在用户首先单击“Form1”，然后单击“Form2”。现在我的问题是，我可以在 MDI 表单中获得以前单击的菜单 ig“Form1”吗？是否有任何事件或任何方法可以找出相同的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:01:36.983

我不认为你应该在项目中使用公共变量并且喜欢这些

```
Module Module1
 Public current As String
 Public prev As String
End Module 
```

然后当您单击菜单项时，使用这些代码保存单击的上一个菜单项

```
prev = current
current = "Current Menu Item Name" 
```

# ios - 从 Facebook iOS SDK 中删除集成帐户

> ID：12619637
> 
> 赞同：-2
> 
> 时间：2012-09-27T10:47:51.150
> 
> 标签：ios, facebook-ios-sdk

1.  [一旦我使用iOS](http://en.wikipedia.org/wiki/IOS_%28Apple%29) [SDK](http://en.wikipedia.org/wiki/Software_development_kit) 3.0登录[Facebook](http://en.wikipedia.org/wiki/Facebook)系统。
2.  不知何故，我的应用程序将在不调用注销事件的情况下终止。
3.  我当前的登录在浏览器或 web 视图中处于活动状态，我想
    从设备中删除该帐户信息。我怎样才能删除它？（终止我的应用程序时以编程方式调用注销事件）。

我试过`[FBSession activesession close;]`了，但我没有得到正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:33:12.887

我得到了解决方案。当您的应用程序崩溃并且您的会话仍然存在时，此时只需检查此方法：

```
if([FBSession activeSession])
{
    [[FBSession activeSession] closeAndClearTokenInformation];
} 
```

，在此应用程序委托中：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:00:18.230

当您单击注销按钮时，调用以下方法。

```
-(void)fbDidLogout
{
    [facebook invalidateSession];
} 
```

我希望这是有帮助的。

# jquery - 淡入/淡出我的弹出窗口？

> ID：12619650
> 
> 赞同：0
> 
> 时间：2012-09-27T10:49:11.570
> 
> 标签：jquery, popup, jqmodal

我正在使用 jqModal，它可以做我想做的一切，但是我想添加一个淡入淡出效果来显示和隐藏弹出窗口，它目前只是显示和隐藏，我觉得它有点太突然了。问题是我已经尽一切努力让它淡入淡出，但我没有任何运气。

你能帮我实现这个吗？即使它是某种替代解决方案:)

```
$('.trigger').click(function(){
   $('.jqmWindow').jqm({ ajax:'people'});
   $('.jqmWindow').jqmShow();
});

$('.jqmWindow').on('click', '.close', function(){
   $('.jqmWindow').jqmHide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:37:30.377

这个怎么样：

```
var myFadeIn=function(hash){
    hash.w.fadeIn("2000");
};

var myFadeOut=function(hash){
    hash.w.fadeOut("2000",function(){
        hash.o.remove(); 
    });
};

$('.trigger').click(function(){
    $('.jqmWindow').jqm({
        ajax:'people',
        onShow:myFadeIn,
        onHide:myFadeOut
    });
    $('.jqmWindow').jqmShow();
});

$('.jqmWindow').on('click', '.close', function(){
    $('.jqmWindow').jqmHide();
}); 
```

# javascript - Javascript拆分文本然后循环

> ID：12619659
> 
> 赞同：0
> 
> 时间：2012-09-27T10:49:34.407
> 
> 标签：javascript, jquery

我有一些要拆分为新行的文本“lorem ipsum^^^text^^^testtext”。我正在使用 split 将文本分成一个数组，如下所示：

```
var companySplit = this.company.split('^^^'); 
```

我可以这样输出：

```
$("#company").html(companySplit[0] + '<br />' + companySplit[1]); 
```

但是，在某些情况下，可能没有 2 个数组项……例如，可能有 3 个或 4 个。无论项目数量如何，如何显示由换行符分隔的数组项目？我试过使用循环，但我不熟悉它们，所以我很难让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:52:11.273

做一个循环，你基本上会写：

```
for(var i = 0, l = companySplit.length; i < l; i++) {
   $('#company')
       .append('<br/>')
       .append(companySplit[i]);
} 
```

您可能需要检查 的值`i`以避免在第一项之前插入中断。

```
if(i > 0)
   $('#company').append('<br/>');
$('#company').append(companySplit[i]); 
```

但在你的情况下，一个简单的连接就足够了：

```
$('#company').html(companySplit.join('<br/>')); 
```

或者，就此而言，替换：

```
$('#company').html(this.company.replace(/\^\^\^/g, '<br/>')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:53:01.020

使用 for() 循环。

```
var result[] = this.company.split('^^^');
var out;
for(int i=0,j=result.length; i<j; j++) {
  out += result[i] + '<br />';}
$("#company").html(out); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:53:11.290

试试这个。

```
 var companySplit = this.company.split('^^^');
 var htmlContent="";
   for(int count=0;count<companySplit.length;count++)
   {
      htmlContent=htmlContent+companySplit[count] + '<br />'

   }
   $("#company").html(htmlContent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:53:45.983

```
var i=0;
$.each(companySplit,function(){

$("#company").html(companySplit[i] + '<br />' + companySplit[i+1]);
i++;

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:58:10.600

```
$.each(company.split('^^^'), function(index, value) { 
  $("#company").append(value+'<br/>');
});​ 
```

# ruby - Geokit 可以在 Sinatra 中与 AR 一起使用吗？

> ID：12619660
> 
> 赞同：0
> 
> 时间：2012-09-27T10:49:34.970
> 
> 标签：ruby, activerecord, sinatra, geokit

我有一个捆绑了 AR 的 Sinatra 应用程序。Geokit 方面，我需要将逻辑保留在acts_as_mappable mixin 提供的某些模型中。问题是，这个 mixin 是 geokit-rails3 的一部分，而不是 geokit。并且这些 gem 依赖于 rails 3。是否有一种方法可以解耦各个部分以实现可靠的 geokit-activerecord 实现，而不是将其与框架紧密耦合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:37:08.163

如果*geokit-rails3* gem 依赖于*rails* gem，你就无能为力了。剩下的唯一选择是重写*geokit-rails3* gem 或从中提取所需的部分到您的项目中。

我还建议研究*地理编码*器 gem，因为目前它似乎得到了更好的维护（*geokit*实际上已经死了），并且它在主 gem 本身中集成了 ActiveRecord ......

# java - 如何使用 Spring 和 Java 创建动态代理

> ID：12619663
> 
> 赞同：1
> 
> 时间：2012-09-27T10:49:42.603
> 
> 标签：java, spring, dynamic-proxy

我有这种情况：我有一个接口服务，它聚合了所有服务接口。例如，如果我有两个接口 ILoginService1 和 ILoginService2 服务接口看起来像这样

```
Service extends ILoginService1,ILoginService2\. 
```

我需要在给定的上下文中可以访问此接口，如下所示：

```
service.login(); 
```

这是我的解决方案（类似于[http://artofsoftwarereuse.com/tag/dynamic-proxy/](http://artofsoftwarereuse.com/tag/dynamic-proxy/)）：

我创建了一个注释 ServiceFacade，我将它放在 Service 接口上，然后我有 BeanPostProcessor，我在其中为 Service 接口创建 DynamicProxy。但问题是服务接口没有从spring组件扫描中获取，即使我在上面放了@Component，但其他组件都放在了Spring容器中。

到目前为止，我该如何解决我的解决方案，或者我遗漏了什么，或者还有其他解决方案？这是源代码：applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config/>    
    <context:component-scan base-package="org.finki.auction.ui.application"/>
    <context:component-scan base-package="org.finki.auction.services"/>

</beans> 
```

注解：

```
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface ServiceFacade{} 
```

动态代理的调用处理程序：

```
/**
 * 
 */
package org.finki.auction.services;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Service;

/**
 * 
 */
@Component("serviceLayer")
public class ServiceLayer implements InvocationHandler, ApplicationContextAware
{

    private static ApplicationContext applicationContext = null;
    private static Map<String, String> serviceMap = new HashMap<>();

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable
    {
        Object result;
        try
        {
            String searchKey = method.getName();
            String beanName = serviceMap.get(searchKey);
            Object methodObject = applicationContext.getBean(beanName);
            result = method.invoke(methodObject, args);
        } catch (InvocationTargetException e)
        {
            throw e.getTargetException();
        } catch (Exception e)
        {
            throw new RuntimeException("unexpected invocation exception: " + e.getMessage());
        }
        return result;
    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException
    {
        ServiceLayer.applicationContext = applicationContext;

        Map<String, Object> beans = applicationContext.getBeansWithAnnotation(Service.class);
        for (Map.Entry<String, Object> entryBean : beans.entrySet())
        {
            String beanName = entryBean.getKey();
            Object beanObject = entryBean.getValue();
            Method[] beanMethods = beanObject.getClass().getDeclaredMethods();
            for (Method bMethod : beanMethods)
            {
                serviceMap.put(bMethod.getName(), beanName);
            }
        }
    }

} 
```

BeanPostProcessor 类：

```
/**
 * 
 */
package org.finki.auction.services.annotation;

import java.lang.reflect.Proxy;
import java.util.Arrays;

import org.finki.auction.services.Service;
import org.finki.auction.services.ServiceLayer;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.stereotype.Component;

/**
 * 
 */
@Component("serviceFacadeProcessor")
public class ServiceFacadeProcessor implements BeanPostProcessor, ApplicationContextAware
{

    private static ApplicationContext applicationContext = null;

    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException
    {
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException
    {
        Class<?> clz = bean.getClass();
        Class<?>[] tmpInterfaces = clz.getInterfaces();
        System.out.println("ServiceFacadeProcessor : " + bean);
        if (tmpInterfaces != null && tmpInterfaces.length == 1
                && tmpInterfaces[0].isAnnotationPresent(ServiceFacade.class))
        {

            System.out.println("Find serviceFacade >>>>");
            Class<?>[] interfaces = Arrays.copyOf(tmpInterfaces, tmpInterfaces.length + 1);

            interfaces[tmpInterfaces.length] = Service.class;
            ClassLoader cl = bean.getClass().getClassLoader();
            ServiceLayer serviceLayerBean = applicationContext.getBean("serviceLayer", ServiceLayer.class);
            Object t = Proxy.newProxyInstance(cl, interfaces, serviceLayerBean);
            System.out.println("Find serviceFacade <<<<");
            return t;
        }

        return bean;

    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException
    {
        ServiceFacadeProcessor.applicationContext = applicationContext;
    }

} 
```

所以，我的问题不是配置，我的问题是如何将 Service 接口附加到 spring 容器以便被 BeanPostProcessor 捕获并为其创建动态代理。到目前为止，这是我的解决方案，也许我遗漏了一些东西，但是如果有人有更好的方法，现在就让我这样做。提前致谢

解决方案：

```
/**
 * 
 */
package org.finki.auction.services.annotation;

import java.lang.reflect.Proxy;
import java.util.Arrays;

import org.finki.auction.services.Service;
import org.finki.auction.services.ServiceLayer;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.FactoryBean;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.stereotype.Component;

/**
 * @author
 * 
 */
@Component
public class ServiceFactoryBean implements FactoryBean<Service>, ApplicationContextAware
{

    private static ApplicationContext applicationContext = null;

    @Override
    public Service getObject() throws Exception
    {

        Class<?>[] tmpInterfaces = Service.class.getInterfaces();
        Class<?>[] interfaces = Arrays.copyOf(tmpInterfaces, tmpInterfaces.length + 1);
        interfaces[tmpInterfaces.length] = Service.class;
        ServiceLayer serviceLayerBean = applicationContext.getBean("serviceLayer", ServiceLayer.class);
        ClassLoader cl = serviceLayerBean.getClass().getClassLoader();
        Object t = Proxy.newProxyInstance(cl, interfaces, serviceLayerBean);
        return (Service) t;
    }

    @Override
    public Class<?> getObjectType()
    {
        return Service.class;
    }

    @Override
    public boolean isSingleton()
    {
        return true;
    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException
    {
        ServiceFactoryBean.applicationContext = applicationContext;
    }

} 
```

还需要删除 BeanPostProcessor 和注解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T14:17:45.990

我遇到了类似的情况，并相信您可以使用 Spring 的 Java 配置功能使您的场景正常工作。

```
@Configuration
public class ServiceConfiguration {

    // you can wire your service1 and service2 here

    @Bean
    Service service() {
         // create and return dynamic proxy here
    }
} 
```

这样，您最终将得到一个类型为“Service”且名称为“service”的 bean，它将成为您的带有调用处理程序等的动态代理。

我确信 Java 配置不会限制您使用上述方法（您将 service1 和 service2 连接到配置中） - 我认为这是实现细节。

# jquery - jquery获取h2标签的值

> ID：12619664
> 
> 赞同：2
> 
> 时间：2012-09-27T10:49:44.457
> 
> 标签：jquery, html

我有以下 HTML

```
//banner + page title for the About Us page..
<div id="pageSpecificBanners"><h2 class="page-Title">about us</h2></div>

//banner + page title for the Practices page..
<div id="pageSpecificBanners"><h2 class="page-Title">practices</h2></div> 
```

我将如何获取 jquery 中每个页面的 h2 标签的值...

因此，如果 h2 标记的值等于“关于我们”，我想将另一个标记附加到“pageSpecificBanners”div，如下所示：

```
$('div#PageSpecificBanners').append('<h2 class="printOnlyPage-Title">about us</h2>'); 
```

然后同样如果 H2 标签的值等于“practices”，我想将另一个标签附加到“pageSpecifiBanner”div，如下所示：

```
$('div#PageSpecificBanners').append('<h2 class="printOnlyPage-Title2">practices'); 
```

本质上我想添加额外的 h2 标签用于打印目的......

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:53:35.827

```
var value = $("#pageSpecificBanners h2").html();

if(value == "about me")
    $('div#PageSpecificBanners')
        .append('<h2 class="printOnlyPage-Title">about us</h2>');
else if(h2 == "practices")
    $('div#PageSpecificBanners')
        .append('<h2 class="printOnlyPage-Title2">practices'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:53:17.277

试试这个：

```
var h2 = $('<h2 class="printOnlyPage-Title"></h2>').text($('div#PageSpecificBanners h2').text());
$('div#PageSpecificBanners').append(h2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:58:37.130

除了页面标题之外，添加一个额外的类，而不是检查文本：

```
<div id="pageSpecificBanners"><h2 class="page-Title about-us">about us</h2></div> 
```

代码变成了

```
if($("#pageSpecificBanners .page-Title").hasclass("about-us")){
    $('div#PageSpecificBanners').append('<h2 class="printOnlyPage-Title">about us</h2>');
} 
```

同样的做法。我会避免比较内部文本 - 如果文本更改，您需要记住要修复的所有内容。

# javascript - 我只在 Chrome 中不断收到以下错误：Uncaught TypeError: Cannot read property 'value' of null

> ID：12619670
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:06.573
> 
> 标签：javascript, html, typeerror

Line: 670 which is `startdate.value = hiddenstart.value;`
But I am getting an unaught TypeError:
`Cannot read property 'value' of null in the javascript console.`
问题是这只发生在 Chrome 中，没有其他浏览器。

有人可以看看，让我知道是否有什么我可以改变来解决这个问题。

```
<script language="Javascript">
   function calcEndDate(cal) {
   var startdate = document.getElementById("<?php echo columnnames($value); ?>_0");
   var hiddenstart = document.getElementById("hiddenstart");
   startdate.value = hiddenstart.value;
   var date = cal.date;
   var time = date.getTime();
   var hiddenend = document.getElementById("hiddenend");
   var date2 = new Date(time);
   hiddenend.value = date2.print("%d-%b-%Y 23:59");
   var enddate = document.getElementById("<?php echo columnnames($value); ?>_1");
   enddate.value = hiddenend.value;
   return true;
}

function calcUpdateEndDate() {
  var enddate = document.getElementById("<?php echo columnnames($value); ?>_1");
  var hiddenend = document.getElementById("hiddenend");
  enddate.value = hiddenend.value;
}
</script>
<table cellpadding="0" cellspacing="3" border="0">
<tr>
<td><input type="text" class="standardfield_date_srch" name="<?php echo   columnnames($value); ?>_0" value="<?php echo $dateoutput0 ?>"></td>
<td><img src="/images/icons/calendar.png" id="<?php echo columnnames($value); ?>0" style="cursor: pointer;" title="Date selector"></td>
<td><input type="hidden" class="standardfield_date_srch" name="hiddenstart" value="             <?php echo date("d-M-Y",time()) ?> 00:00"> 
    <script language="javascript">Calendar.setup({    inputField:"hiddenstart",button:"<?php echo columnnames($value); ?>0",align:"Ll00", ifFormat:"%d-%b-%Y %H:%M", showsTime: true, onUpdate : calcEndDate});</script>
</td>
</tr>
<tr>
  <td><input type="text" class="standardfield_date_srch" name="<?php echo columnnames($value); ?>_1" value="<?php echo $dateoutput1 ?>"></td>
    <td><img src="/images/icons/calendar.png" id="<?php echo columnnames($value); ?>1" style="cursor: pointer;" title="Date selector" >
    <td><input readonly type="hidden" class="standardfield_date_srch" name="hiddenend"> 
    <script language="javascript">Calendar.setup({ inputField:"hiddenend",button:"<?php echo columnnames($value); ?>1",align:"Ll00", ifFormat:"%d-%b-%Y %H:%M",showsTime:true, onUpdate : calcUpdateEndDate});</script>
</td>
</tr>
</table> 
```

给我一些提示或指导我哪里错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:00:26.907

您正在尝试通过 id 访问隐藏字段，但由于没有设置 id`hiddenstart`并且`hiddenend`为空。

```
<input type="hidden" class="standardfield_date_srch" name="hiddenstart" id="hiddenstart" value="<?php echo date("d-M-Y",time()) ?> 00:00" />
<input type="hidden" class="standardfield_date_srch" name="hiddenend" id="hiddenend" /> 
```

# c# - 如何对 BaseForm 类中的特定表单执行操作？

> ID：12619674
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:21.793
> 
> 标签：c#, winforms

我想让我的程序知道哪个`form`被打开，然后为此做一些特定的操作`form`。表单在带有概览的主窗口中打开，用户可以单击图像打开新表单。对于我要打开的表单，这个主窗口不是我的 BaseForm。

要检查`form`打开的内容，我尝试了以下代码：

```
bool thisOne;
bool theOtherOne;

private void FormCheck()
{
    foreach (Form form in Application.OpenForms)
    {
        if (form is frmRectangle)
        {
            thisOne = true;
            theOtherOne = false;
            break;
        }

        if (form is frmCircular)
        {
            theOtherOne = true;
            thisOne = false;
            break;
        }
    }
} 
```

我将 form-related 设置`booleans`为 true，所以我可以在另一个函数中使用它们，如下所示：

```
private void ActionTime()
{
    if (thisOne)
        Debug.WriteLine("ThisOne is open");
        //Do some stuff for the ThisOne form
    if (theOtherOne)
        Debug.WriteLine("TheOtherOne is open");
        //Do some stuff for TheOtherOne form
} 
```

ActionTime 由 a 调用`ClickEvent`，但该动作从未发生......我猜它出了点问题`foreach-loop`。

# java - Java - 编写双向控制台窗口

> ID：12619676
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:24.733
> 
> 标签：java, console

我有兴趣在 Java 中创建基于文本的游戏，并且想知道如何复制通用服务器控制台（例如：minecraft-server 中的 nogui 服务器模式） - 因为底部总是有一行用于输入的控制台，它上面的所有其他内容都是可以异步写入的输出。

我该如何开始呢？我不熟悉有关此类东西的术语以及开始使用的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:26:58.947

你应该看看[Java curses library](http://sourceforge.net/projects/javacurses/)。我没有使用它，但它看起来像你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:05:31.767

这个库可能很有帮助：我创建它是为了用 Java 实现一个小型 Rogelike 游戏：

*   [https://github.com/mikera/swing-console](https://github.com/mikera/swing-console)

它使用 Swing 创建模拟控制台样式的窗口。

# c# - 如何在 C# .Net Windows 应用程序中清除所有主要浏览器（Mozilla、Safari 和 Chrome）的历史记录、Cookie 和缓存？

> ID：12619677
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:25.920
> 
> 标签：c#, .net

> **可能重复：**
> [如何使用 JavaScript 或 Java 清除浏览器（IE、Firefox、Opera、Chrome）历史记录，但浏览器本身除外？](https://stackoverflow.com/questions/2190808/how-to-clear-browsers-ie-firefox-opera-chrome-history-using-javascript-or-j)

是否有任何代码可以清除主要浏览器（如 C# 中的 Mozilla、Safari 和 chrome）中的所有浏览器历史记录、cookie 和缓存。网络 Windows 应用程序 ??

我只想制作一个任何人都可以删除这些东西而不是手动删除的工具。

我怎样才能做到这一点 ？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:58:07.503

找出那些浏览器保存这些文件的位置，然后使用命名空间中的`File`或`Directory`类型`System.IO`来删除\取消它们。例如 Firefox 将它们保存在：

```
%APPDATA%\Mozilla\Firefox\Profiles 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:02:10.197

您不能在 .net 或 javascript 中执行此操作。每个浏览器都以不同的方式在不同的位置保存其浏览器历史记录。浏览器将其历史记录存储在自己的文件中。

# sql-server - 使用 SSIS 将数据从 sql server 导出到 excel

> ID：12619679
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:29.107
> 
> 标签：sql-server, visual-studio-2005, export-to-excel, ssis

首先，我将解释我的要求，然后我将解释我到目前为止所做的事情以及我需要的所有帮助......

我必须将数据从 sql server 导出到 excel 表。excel 工作表就像一个标准**模板**。如果我运行我的项目，来自 SQL Server 的数据应该插入到一个新的 excel 文件中，该文件应该使用该模板，并且应该**创建并保存**到一个新位置。此外，通常我们将使用第一行作为标题。但在我的要求中，模板将有**两三行 header**。因此，数据应该从第三/第四个空行自动插入。

我已经将数据从 sql server 数据库导出到普通的 excel 表，第一行作为标题。我还完成了将不同表中的数据导出到同一个 excel 文件的不同工作表中。

任何机构请帮助模板格式，在运行项目时创建新的 excel 文件以及作为标题的两三行。

我正在使用 SQL Server 2005 和 Visual Studio 2005。

请帮忙...提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:51:00.727

如果您要导出到 Excel 2007 或 2010，您可以使用[EPPLUS](http://epplus.codeplex.com/)来处理 Excel 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:43:20.070

[您可以使用SSRS](http://msdn.microsoft.com/en-us/library/ms159106.aspx)解决此问题。

创建报告的外观。然后将其部署在报告服务器 Web 上。然后创建一个订阅，您可以在其中将报告导出到 Excel 文件。您可以设置它必须运行的位置和时间。该报告可以看起来像您需要的那样。

# java - 毫秒后自动按回车键java

> ID：12619680
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:31.993
> 
> 标签：java, php, jar, key, enter

我已经编写了一个 php 代码并构建了一个 jar 文件。通过 php 我将参数发送到 jar 文件。在 jar 文件中，我基本上使用扫描仪读取参数 - nextLine。

我的问题是，我怎样才能实现这样的代码，就像一个`Enter`能够继续程序的关键？当我发送参数时，让我说 10 毫秒后，java 将自动按键。

感谢您的任何提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:00:55.570

机器人类可以在 java 中为您执行此操作[。](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)这是一个如何使用它的[例子。](http://www.java-tips.org/java-se-tips/java.awt/how-to-use-robot-class-in-java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:59:41.733

我会使用停止字符，而不是模拟按钮单击。附加一个通常在您的 php 生成的字符串中找不到的特殊字符，并让您的扫描仪逐个字符地读取它，直到找到特殊字符。

Java代码：

```
boolean found = false;
String parameter = "";
Scanner sc = new Scanner(System.in);
    while(!found){
       String input = sc.next();
       parameter += input + "\n";
       if(input.contains('<specialchar>')
            found = true;
    }
Thread.CurrentThread().wait(10);
//here goes the code to deal with finished input 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:13:34.880

根据我的理解，使用 getKeyCode() 检查 KeyEvent 或在 10 毫秒后直接将 KeyCode 作为硬编码传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:21:33.597

```
$('textarea').bind("enterKey",function(e){
 //do stuff here
}); 
```

# php - 在php中使用ajax过滤数组

> ID：12619681
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:33.707
> 
> 标签：php, ajax, jquery

我在这里阅读了类似的问题，但没有找到我的答案。实际上我有一个数据数组，我从我的控制器传递给我的视图文件。我正在遍历它以显示下表中的数据，如下所示：

AbcController（abcAction）：

```
$this->view->array = $array; 
```

它是相应的视图文件：abc.phtml：

```
<?php foreach($this->array as $object){ ?> *** table to display data*** <?php }?> 
```

我能够对回发进行排序，但我想通过 ajax 调用对这些数据进行排序。我已经在我的控制器中完成了排序逻辑。Ajax 调用应该返回这个排序后的数组，我将在表格中显示，就像我在上面的 phtml 文件中显示的那样。我在 ajax 中学到的东西，我无法实现它。任何人都可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:54:54.760

json_decode 和 json_encode。是我相信你所要求的。

# linux - select() 没有响应 /dev/input/mice 上的写入

> ID：12619683
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:54.010
> 
> 标签：linux, unix, io, linux-device-driver, device-driver

> **可能重复：**
> [select() 没有响应 /dev/input/mice 上的写入](https://stackoverflow.com/questions/12632630/select-isnt-responding-to-writing-on-dev-input-mice)

我正在编写一个通过`select()`键盘和鼠标设备文件进行监视的程序。它等待对这些文件的任何写操作（这应该在有击键或鼠标移动时发生），并且一旦有写操作，就会执行一些作业。但它不起作用。代码如下。有人能帮我吗？

```
#include<stdio.h>
#include<string.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fcntl.h>
#include<linux/input.h>
#include<linux/uinput.h>
#include<sys/time.h>
#include<unistd.h>

void main()
{
    int mouse_fd,kbd_fd,fd_max;
    struct input_event ev;
    fd_set rfs,wfs;

    if((mouse_fd=open("/dev/input/event3",O_WRONLY))==-1)
            {
                printf("opening mouse device file has failed \n");
            }
    else
            {
                printf("opening mouse device file has been successfull \n");
            }
    if((kbd_fd=open("/dev/input/event2",O_WRONLY))==-1)
            {
                printf("opening keyboard device file has failed \n");
            }
    else
        {
            printf("opening keyboard device file has been successfull \n");
        }

    if(mouse_fd>kbd_fd)
        {
            fd_max=mouse_fd;
        }
    else
        {
         fd_max=kbd_fd;
        }

    while(1)
    {
         FD_ZERO(&rfs);
             FD_ZERO(&wfs);
             FD_SET(mouse_fd,&rfs);
             FD_SET(kbd_fd,&rfs);
             FD_SET(mouse_fd,&wfs);
             FD_SET(kbd_fd,&wfs);
                 select((fd_max+1),&rfs,NULL,NULL,NULL);

        if(FD_ISSET(mouse_fd,&rfs))
            {
                printf("test mouse \n");
            }
        if(FD_ISSET(kbd_fd,&rfs))
            {
                printf("test keyboard \n");
                }

   }
} 
```

当我执行程序时，它会给出如下输出：

```
[root@localhost Project]# gcc select.c
[root@localhost Project]# ./a.out
opening mouse device file has been successfull 
opening keyboard device file has been successfull 
test keyboard 
test mouse 
test keyboard 
test mouse 
test keyboard 
test mouse 
test keyboard 
test mouse 
test keyboard 
test mouse 
```

虽然我没有按任何键或移动鼠标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:02:41.877

你正在打开我认为错误的文件

/dev/input/event3 - 键盘事件 /dev/input/event2 - 鼠标事件

检查 cat /dev/input/event3

# python - 描述符：通过 __getattribute()__ 访问属性的优先级

> ID：12619684
> 
> 赞同：7
> 
> 时间：2012-09-27T10:50:54.067
> 
> 标签：python, python-2.7

我不明白以下优先级在`__getattribute__()`特殊方法的上下文中意味着什么和`Descriptors`

[我在Core Python Programming](https://rads.stackoverflow.com/amzn/click/com/0132269937)`topic("Precedence") - under topic ("Desriptors")` 3次的书下读了这个，仍然无法通过它。任何人都可以解释这些优先级是什么，以及它们的用途是什么？

*   类属性
*   数据描述符
*   实例属性
*   非数据描述符
*   默认为`__getattr__()`

我还阅读了[python 文档](http://docs.python.org/reference/datamodel.html#more-attribute-access-for-new-style-classes)，在其中找到了以下语句：-

> 例如绑定，描述符调用的优先级取决于定义的描述符方法。描述符可以定义和`__get__()`的任意组合。如果未定义，则访问该属性将返回描述符对象本身，除非该对象的实例字典中有值。如果描述符定义和/或 ，它是一个数据描述符；如果两者都没有定义，则它是非数据描述符。通常，数据描述符定义了 and ，而非数据描述符只有 方法。`__set__()``__delete__()``__get__()``__set__()``__delete__()``__get__()``__set__()``__get__()`
> 
> `**__set__()**`带有和`**__get__()**`定义的数据描述符总是覆盖实例字典中的重新定义。相反，非数据描述符可以被实例覆盖。
> 
> Python 方法（包括`staticmethod()`和`classmethod()`）被实现为非数据描述符。因此，实例可以重新定义和覆盖方法。这允许单个实例获得与同一类的其他实例不同的行为。

任何人都可以举一个小例子来解释这`first paragraph`是什么意思吗？还有说 - 是什么意思`override a redefinition in an instance dictionary`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:15:16.390

假设你有一个类：

```
class C(object):
    dd = MyDataDescriptor()
    ndd = MyNonDataDescriptor()
    def __init__(self):
        self.__value = 1 
```

让我们首先看一下数据描述符。如果在你的代码中你这样做：

```
cobj = C()
cobj.dd 
```

根据上面的段落，当访问属性时，`cobj.__dict__`对象总是会被*覆盖*，即描述符对象的方法总是被使用而不是字典。唯一的例外发生在描述符对象未定义方法时。然后，如果对象中有键，则将读取其值，否则将返回描述符对象本身。`dd``__get__/__set__/__del__``__get__``dd``cobj.__dict__`

现在是非数据描述符。如果在您的代码中调用：

```
cobj.ndd = 2 
```

然后`cobj.__dict__` *隐藏*非数据描述符，并且`ndd`始终从`cobj.__dict__`对象中读取属性。所以如果你这样做：

```
cobj.ndd 
```

描述符的`__get__`方法不会被调用。但是，如果您从字典中删除该属性：

```
del cobj.ndd 
```

然后描述符又回来了，所以调用

```
cobj.ndd 
```

将调用`__get__`描述符上的方法。

# html - 未选中单选按钮时如何获得警报？

> ID：12619685
> 
> 赞同：0
> 
> 时间：2012-09-27T10:50:58.823
> 
> 标签：html, validation, radio-button

我有一个应用程序，其中有单选按钮。我能够在警报框中获取所有选中的单选按钮的状态。现在我想在单选按钮未选中时显示警报，说明某些错误或不能留空或其他内容。我在这里添加了我的代码

[http://jsfiddle.net/janakipriya/hRzZf/19/](http://jsfiddle.net/janakipriya/hRzZf/19/)。

当我单击保存按钮时，如果未选中任何单选按钮，它应该显示警报。任何人都可以帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:10:58.530

看到这个，[http://jsfiddle.net/hRzZf/24/](http://jsfiddle.net/hRzZf/24/)有假设。

# c++ - 在 linux 上用 C++ 创建一个 ramdisk

> ID：12619686
> 
> 赞同：6
> 
> 时间：2012-09-27T10:51:05.350
> 
> 标签：c++, linux, creation, ramdisk

我需要使用*c++*制作一个 ramfs 并将其挂载到 linux 中的目录。我想让它像一个用户（不`sudo`）。

我需要在我创建的文件上调用一个应用程序，而且它会经常调用。将其写入硬盘非常慢。

我发现只是：

```
system("mkdir /mnt/ram");
system("mount -t ramfs -o size=20m ramfs /mnt/ram"); 
```

但这不好。我想成为一个普通用户，并且`mount`可以像 root 一样调用命令。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:58:46.740

对于用户空间 ramfs 解决方案，您可以使用[python-fuse-ramfs](https://github.com/tylerflint/python-fuse-ramfs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:01:03.157

我检查是否`/tmp`是 ramfs，但它不是。它在 HDD 上创建文件。但是当我运行`df -h`它时输出：

```
rootfs                       25G  9,4G   15G  40% /
devtmpfs                    1,9G     0  1,9G   0% /dev
tmpfs                       1,9G  1,6G  347M  83% /dev/shm
tmpfs                       1,9G  1,3M  1,9G   1% /run
/dev/mapper/vg_micro-root    25G  9,4G   15G  40% /
tmpfs                       1,9G     0  1,9G   0% /sys/fs/cgroup
tmpfs                       1,9G     0  1,9G   0% /media
/dev/mapper/vg_micro-stack  289G  191M  274G   1% /stack
/dev/mapper/vg_micro-home   322G   40G  266G  14% /home
/dev/sda2                   485M   89M  371M  20% /boot
/dev/sda1                   200M   19M  182M  10% /boot/efi 
```

这意味着( `tmpfs`ramdisks) 是：`/dev/shm`、`/run`和. 但其中只有一个是用于在进程之间使用文件进行通信的临时 ramdisk。[这](http://www.cyberciti.biz/tips/what-is-devshm-and-its-practical-usage.html)是描述和用法。唯一的问题是它[不会动态增长](http://www.thegeekstuff.com/2008/11/overview-of-ramfs-and-tmpfs-on-linux/)，但就我的目的而言，它就足够了（20MB - 1GB）。`/sys/fs/cgroup``/media``/dev/shm``tmpfs`

# c# - 带有特殊字符的 SQLite 查询 (ščćž)

> ID：12619687
> 
> 赞同：3
> 
> 时间：2012-09-27T10:51:08.960
> 
> 标签：c#, windows, sqlite, wpfdatagrid

我正在创建 c# wpf 应用程序，并且正在为我的数据使用 SQLite 数据库（sqlite3.dll 库）。我来自斯洛文尼亚，所以我需要存储包含 ščćžđ 等字符的字符串。当我的查询如下所示时，我可以成功存储我的数据并设置我的 dataGrid itemsSource：

```
List<Odgovor> list = AppData.DBObject.Query<Odgovor>("select * from Odgovor");
            ObservableCollection<Odgovor> odgovorList = new ObservableCollection<Odgovor>(list);
            this.dataGridOdgovor.ItemsSource = odgovorList; 
```

当我查询时它是成功的

```
"select * from Odgovor where PersonName = \"Nick\""; 
```

但是当我做这个查询时我没有得到任何结果（并且数据在我的数据库中，所以它是 SQLite 编码问题）。

```
"select * from Odgovor where PersonName = \"Saša\""; 
```

到目前为止我无法找到解决方案。我找不到 sqlite 如何替换特殊字符，以便我可以替换代码中的每个特殊字符......但我相信有更漂亮的解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:57:02.640

1）尝试使用参数而不是文字。数据库连接器应确保正确的字符编码。

请参阅此链接：[使用 C# 在 SQLite 中添加参数](https://stackoverflow.com/questions/809246/adding-parameters-in-sqlite-with-c-sharp)

2）您也可以尝试这里显示的编码thechnique：

[http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/c1d98352-25a5-4ec4-8637-339fcee3715c/](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/c1d98352-25a5-4ec4-8637-339fcee3715c/)

# linux - 通过 Putty 的 SSH 出现“没有这样的文件或目录”

> ID：12619689
> 
> 赞同：0
> 
> 时间：2012-09-27T10:51:30.257
> 
> 标签：linux, ssh, putty

我正在尝试通过 Putty 访问 Linux 服务器，但由于某种原因，在成功登录后它只是抛出一个“/bin/bash 没有这样的文件或目录”，然后 Putty 关闭。

.bashrc 的内容：

```
# /etc/bashrc

# System wide functions and aliases
# Environment stuff goes in /etc/profile

# By default, we want this to get set.
# Even for non-interactive, non-login shells.
if [ $UID -gt 99 ] && [ "`id -gn`" = "`id -un`" ]; then
    umask 002
else
    umask 022
fi

# are we an interactive shell?
if [ "$PS1" ]; then
    case $TERM in
    xterm*)
        if [ -e /etc/sysconfig/bash-prompt-xterm ]; then
            PROMPT_COMMAND=/etc/sysconfig/bash-prompt-xterm
        else
            PROMPT_COMMAND='echo -ne "\033]0;${USER}@${HOSTNAME%%.*}:${PWD/#$HOME/~}"; echo -ne "\007"'
        fi
        ;;
    screen)
        if [ -e /etc/sysconfig/bash-prompt-screen ]; then
            PROMPT_COMMAND=/etc/sysconfig/bash-prompt-screen
        else
        PROMPT_COMMAND='echo -ne "\033_${USER}@${HOSTNAME%%.*}:${PWD/#$HOME/~}"; echo -ne "\033\\"'
        fi
        ;;
    *)
        [ -e /etc/sysconfig/bash-prompt-default ] && PROMPT_COMMAND=/etc/sysconfig/bash-prompt-default
        ;;
    esac
    # Turn on checkwinsize
    shopt -s checkwinsize
    [ "$PS1" = "\\s-\\v\\\$ " ] && PS1="[\u@\h \W]\\$ "
fi

if ! shopt -q login_shell ; then # We're not a login shell
    # Need to redefine pathmunge, it get's undefined at the end of /etc/profile
    pathmunge () {
        if ! echo $PATH | /bin/egrep -q "(^|:)$1($|:)" ; then
            if [ "$2" = "after" ] ; then
                PATH=$PATH:$1
            else
                PATH=$1:$PATH
            fi
        fi
    }

    # Only display echos from profile.d scripts if we are no login shell
    # and interactive - otherwise just process them to set envvars
    for i in /etc/profile.d/*.sh; do
        if [ -r "$i" ]; then
            if [ "$PS1" ]; then
                . $i
            else
                . $i >/dev/null 2>&1
            fi
        fi
    done

    unset i
    unset pathmunge
fi
# vim:ts=4:sw=4 
```

这可能是什么原因造成的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:55:13.593

Well`bash`很可能位于这个 linux 机器上的不同位置`/bin/bash`

我发现在不同的盒子上都是这种情况，并且我已经将我`.profile`的主目录中的脚本更改为不直接执行 bash，这可能是您的解决方案。因此，当您登录时，您会停留在 bourne shell 中，然后只有在您明确键入`bash`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:36:25.920

检查您`/etc/ssh/sshd_config` 以确保您没有`chroot`设置目录。如果这样做，您将需要在该目录中**创建**一个 bin 目录，`chroot`然后将必要的二进制文件复制或链接到该目录中。

或者您可以随时在配置中注释掉该行。

无论哪种方式，**重新启动 sshd 和 test**。

# c++ - 来自另一个进程的用户模式回调，没有额外的线程

> ID：12619695
> 
> 赞同：1
> 
> 时间：2012-09-27T10:51:46.517
> 
> 标签：c++, c, winapi

我想知道是否有人熟悉用户模式下的同步机制，应用程序可以通过该机制注册一个“回调”函数，当另一个应用程序发出信号时将调用该函数...... **我不介意回调在任意线程中.**

假设我有很多并行的“工人”进程，并且想要通知他们发生了变化（不需要有效载荷的数据），每个进程都必须进行一些内部更新。

解决这个问题的直接方法是在每个线程中创建另一个线程，并有一个无限循环等待全局事件并在之后立即调用回调函数。为了发出这个信号，一个进程只需要发出这个全局事件的信号。

问题是我在这个项目中会有很多并行进程，我不想为了实现这个而将 thread*nProcesses 添加到系统中，即使它们大部分都被暂停了。

我为此找到的当前“解决方法”是保留我自己的“虚拟”注册表项，并且每个进程都将“注册注册通知回调”，当一个应用程序想要通知其他应用程序时，它只会触发对该键的写入。 .. 并且 windows 将回调注册到此通知的每个进程。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:07:47.377

不会污染注册表的更好的解决方案是使用共享管道。所有工作人员都可以连接到命名管道服务器，并进行异步读取。当服务器想要踢出工人时，它只写一个字节。这会触发工作人员的完成例程。[基本示例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365601%28v=vs.85%29.aspx)

不过，此通知与大多数其他 Windows 通知具有相同的缺点。如果您的所有工作线程都在运行工作代码，那么您的通知就没有可以到达的线程——而且您也没有为此目的创建一个特殊的线程。唯一的解决方案是`CreateRemoteThread`，但这是一个非常大的锤子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:16:41.300

谢谢大家的有用的想法，

最终，我不小心遇到了[RegisterWaitForSingleObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685061%28v=vs.85%29.aspx)，它似乎就是这样做的。

我仍在考虑@MSalters 关于在给定时间没有足够的空闲工作线程的评论，因为我假设这个回调机制依赖于大多数 Win32API 所做的相同回调机制

# javascript - JavaScript 闭包中的垃圾收集

> ID：12619701
> 
> 赞同：8
> 
> 时间：2012-09-27T10:52:08.543
> 
> 标签：javascript, garbage-collection, closures

我需要一些帮助来了解它是如何工作的（或者没有，就此而言）。

1.  在网页中，我为节点创建了一个单击事件侦听器。
2.  在侦听器中，我创建了某个随机类的实例，它将节点设置为自身内部的属性。因此，如果`var classInstance`是实例，我可以访问节点，例如`classInstance.rootNode`.
3.  当监听器触发时，我设置了一个 ajax 请求，保持`classInstance`关闭并将 ajax 响应传递给`classInstance`并使用它来修改`rootNode`' 的样式或内容或其他任何东西。

我的问题是，一旦我完成了`classInstance`，假设没有其他引用它并且它本身在它自己的闭包中没有任何其他内容，垃圾收集器会处理它吗？如果没有，我如何标记它以进行处置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T11:15:07.973

为了回应@Beetroot-Beetroot 的疑虑（诚然，我也有），我做了更多的挖掘工作。我设置了[这个小提琴](http://jsfiddle.net/TGwQa/show/)，并使用了[chrome 开发工具的时间线](https://developers.google.com/chrome-developer-tools/docs/timeline)和[这篇文章](http://zetafleet.com/blog/google-chromes-heap-profiler-and-memory-timeline)作为指导。在小提琴中，两个几乎相同的处理程序创建了一个带有 2 个日期对象的闭包。第一个仅引用`a`，第二个引用都`a`和`b`。尽管在这两种情况下都只能`a`真正暴露（硬编码值），但第一个闭包使用的内存要少得多。这是否取决于 JIC（即时编译）或 V8 的 JS 优化魔法，我不能肯定地说。但从我读过的内容来看，我会说是 V8 的 GC`b`在`tst`函数返回，在第二种情况下它不能返回（返回时`bar`引用）。我觉得这并不是那么古怪，而且我一点也不惊讶发现 FF 甚至 IE 也能以类似的方式工作。刚刚添加了这个，也许是无关紧要的，为了完整性而更新，因为我觉得谷歌开发工具文档的链接似乎是一种*附加值*。`b``tst2`

 ** * *

它有点取决于，作为一个简单的经验法则：只要你不能再引用`classInstance`变量，它就应该被 GC'ed，不管它自己的循环引用。我已经测试了很多结构，类似于您在此处描述的结构。也许[值得一看，](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)
我发现闭包和内存泄漏并不那么常见或容易得到（至少，现在不是了）。

但正如公认的答案所说：几乎不可能知道什么时候会泄漏什么代码。
再次阅读您的问题，我会说：不，您不会泄漏内存：该`classInstance`变量不是在全局范围内创建的，而是被传递给各种函数（因此是各种范围）。每次函数返回时，这些作用域都会分解。`classInstance`如果已将其传递给另一个函数/范围，则不会被 GC。但是一旦引用的最后一个函数`classInstance`返回，该对象就会被标记为 GC。当然它可能是一个循环引用，但它是一个除了它自己的范围之外不能从任何地方访问的引用。
您也不能真正将其称为闭包：当存在某种形式的*暴露时，就会发生闭包*到外部范围，这在您的示例中没有发生。

我在解释这样的事情时很垃圾，但只是回顾一下：

```
var foo = (function()
{
    var a, b, c, d;
    return function()
    {
        return a;
    }
})(); 
```

GC 将释放 mem`b`和引用：它们已经超出范围，无法访问它们`c`......`d`

```
var foo = (function()
{
    var a, b, c, d;
    return function()
    {
        a.getB = function()
        {
            return b;
        }
        a.getSelf = function()
        {
            return a;//or return this;
        }
        return a;
    }
})();
//some code
foo = new Date();// 
```

在这种情况下，`b`由于显而易见的原因，也不会被 GC 处理。`foo`暴露`a`和`b`，其中`a`是一个包含循环引用的对象。虽然一出，就`foo = new Date()`失去`foo`了任何参考`a`。当然，`a`仍然引用自己，但`a`不再*暴露*：它可以引用任何它非常喜欢的东西。大多数浏览器不会在意并且会 GC`a`和`b`. 事实上，我已经检查过 Chrome、FF*和*IE8 都完美地 GC 上面的代码......那么不用担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:55:52.170

我不是这个问题的专家，但我很确定 GC*不会*处理它。事实上，它可能永远不会，因为您已经在事件侦听器和 DOM 节点之间创建了一个循环引用。要允许它被垃圾收集，您应该将这些引用（事件侦听器和/或 rootNode）中的一个或两个设置为 undefined 或 null。

不过，如果您要创建许多这样的类实例，或者如果它可以在页面的生命周期内创建多次，我只会担心这一点。否则这是一个不必要的优化。*

# android - 执行 Android Multipart POST 需要哪些外部 JARS？

> ID：12619704
> 
> 赞同：0
> 
> 时间：2012-09-27T10:52:17.903
> 
> 标签：android

我正在尝试使用以下代码进行 Android Multipart POST

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(urlString);

        File file = new File(pic);

        Log.d(TAG, "UPLOAD: setting up multipart entity");

        MultipartEntity mpEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        Log.d(TAG, "UPLOAD: file length = " + file.length());
        Log.d(TAG, "UPLOAD: file exist = " + file.exists());

        try {
            mpEntity.addPart("datafile", new FileBody(file, "application/octet"));
            mpEntity.addPart("id", new StringBody("1"));
        } catch (UnsupportedEncodingException e1) {
            Log.d(TAG, "UPLOAD: UnsupportedEncodingException");
            e1.printStackTrace();
        }

        httppost.setEntity(mpEntity);
        Log.d(TAG, "UPLOAD: executing request: " + httppost.getRequestLine());
        Log.d(TAG, "UPLOAD: request: " + httppost.getEntity().getContentType().toString());

        HttpResponse response;
        try {
            Log.d(TAG, "UPLOAD: about to execute");
            response = httpclient.execute(httppost);
            Log.d(TAG, "UPLOAD: executed");
            HttpEntity resEntity = response.getEntity();
            Log.d(TAG, "UPLOAD: respose code: " + response.getStatusLine().toString());
            if (resEntity != null) {
                Log.d(TAG, "UPLOAD: " + EntityUtils.toString(resEntity));
            }
            if (resEntity != null) {
                resEntity.consumeContent();
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

这会因“java.lang.noclassdeffounderror org.apache.http.entity.mime.multipartentity”而崩溃

```
 MultipartEntity mpEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE); 
```

我猜这与我正在使用的外部罐子有关。我的项目中有一个 Libs 文件夹，并且在我的项目构建路径中引用了以下文件。

httpclient-4.2.jar、httpcore-4.2.jar 和 httpmime-4.2.jar

这些是正确的版本吗？或者我需要更多的 JARS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:02:05.587

在您的 Android 项目中，在项目的根目录下创建一个名为 libs 的目录（在 src/、res/ 等旁边）

找到要使用的库的 JAR 文件并将其复制到 libs/ 目录中。

[设置项目以使用库：](http://developer.android.com/sdk/compatibility-library.html#SettingUp)

[更多参考这里：](http://android-developers.blogspot.in/2011/10/changes-to-library-projects-in-android.html)

# html - 在css3中创建一个箭头

> ID：12619707
> 
> 赞同：0
> 
> 时间：2012-09-27T10:52:31.770
> 
> 标签：html, css, pseudo-class

我知道如何使用 psedo 类在 div 外创建箭头，但我需要在 div 内创建一个箭头，如下所示

![在此处输入图像描述](../Images/3e53a434d3906227b762e889b39334b0.png)

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T10:54:36.077

看看那里我认为： [http ://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T11:03:08.370

无需使用额外的元素，这可以完全使用 CSS3 完成：

```
background-color: gray;
background-image: 
   linear-gradient(135deg, transparent 75%, #000 75%), /*right side of triangle*/
   linear-gradient(45deg, transparent 75%, #000 75%)   /*left side of triangle*/;
background-position: 30px 0, 0 0;
background-repeat: no-repeat;
background-size: 30px 30px; 
```

演示（带有供应商前缀：http: [//jsfiddle.net/rLZkf/1/](http://jsfiddle.net/rLZkf/1/)）。

## 这个三角形技术的解释

如下图所示，CSS^([使用](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient#Gradient_at_a_45_degree_angle))简单的语法支持线性颜色渐变。

![](../Images/f57ef63f65826bf4fd3ab379c5048e81.png)

稍加想象，您可以在上图中看到一个三角形。虽然颜色在对角线上混合。因此，我们设置了明确的颜色停止位置。当这些位置相等时，不再有视觉混合，你会得到一个实心三角形。

是时候介绍一个三角形了：

```
background-image: linear-gradient(45deg, transparent 50%, black 50%); 
```

由于 45° 角，渐变从左下角开始，到右上角结束。颜色停止位置定义为50%，所以三角形的左下部分是透明的，另一半是黑色的。要获得不同的三角形，请使用 135° 的角度。这是两个角度的图像：

[![](../Images/a3617006a9917b1f60f927785def908a.png)](http://jsfiddle.net/KL78L/)

至此，我们知道如何创建一个矩形三角形。为了更进一步，我们需要能够创建一个三角形，其中斜边垂直或水平放置。为了实现这一点，我们连接了两个三角形。CSS3 引入了对[多种背景](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multiple_backgrounds)的支持。该特征用于构造三角形。

```
/* Create triangles */
background-image: 
   linear-gradient(135deg, transparent 75%, #000 75%), /*right side of triangle*/
   linear-gradient(45deg, transparent 75%, #000 75%)   /*left side of triangle*/;
/* Move one of the triangles to the right */
background-position: 30px 0, 0 0;
/* Don't repeat the background image (remove this to see what would happen) */
background-repeat: no-repeat;
/* Define the size of the triangle */
background-size: 30px 30px; 
```

在前面的 CSS 代码中，可以看到我使用`75%`的是颜色停止位置（而不是`50%`）。这个选择无关紧要，三角形的最终形状由渐变的颜色停止位置的值`background-position`和决定`background-size`。

**注意：我在解释中省略了供应商前缀。要使用此技术，您必须添加供应商前缀（如[演示](http://jsfiddle.net/rLZkf/1/)中所示）。

## 相关文件

*   [多个 CSS 背景](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multiple_backgrounds)
*   [`linear-gradient`](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)
*   [`background-position`](https://developer.mozilla.org/en-US/docs/CSS/background-position)
*   [`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)
*   [`background-repeat`](https://developer.mozilla.org/en-US/docs/CSS/background-repeat)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:00:54.573

…………………………………………………………………………………………

现在习惯了

```
after:  pseudo-class 
```

像这样

```
.some{
width:100px;
  height:100px;
  background:red;
position:relative;
  overflow:hidden;
}

.some:after{
content:'';
  position:absolute;
  left:10px;
  top:-11px;
z-index:0;
  width:25px;
  height:25px;
  background:green;
  transform:rotate(45deg);
  -ms-transform:rotate(45deg); /* IE 9 */
-moz-transform:rotate(45deg); /* Firefox */
-webkit-transform:rotate(45deg); /* Safari and Chrome */
-o-transform:rotate(45deg); /* Opera */
} 
```

***[现场演示](http://tinkerbin.com/tKiPi5md)***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T13:28:35.040

最短且最兼容浏览器的解决方案：

CSS：

```
​div{
    position:relative;
    height: 200px;
    width: 200px;
    background-color: gray;
}
div::after{
    content: '';
    border: solid 15px transparent;
    border-top-color:black;
    position:absolute;
    top:0;
    left: 30px;
} 
```

演示：http:
[//jsfiddle.net/7bP9q/](http://jsfiddle.net/7bP9q/)

# database - passportjs 和 passportlocal 添加用户“错误：无法将用户序列化到会话中”

> ID：12619708
> 
> 赞同：3
> 
> 时间：2012-09-27T10:52:33.937
> 
> 标签：database, node.js, authentication, express, passport.js

我已经按照这里的代码 - > [https://github.com/jaredhanson/passport-local/tree/master/examples/express3](https://github.com/jaredhanson/passport-local/tree/master/examples/express3)为用户添加本地身份验证。

问题是当我尝试添加用户时，

所以我创建了这条路线

```
app.get('/signup', function(req,res){
  res.render('/signup');
});

app.post('/signup', function(req,res){
  var body = req.body;
  users.push(body);
  res.redirect('/');
}); 
```

然后页面是表单

```
form(method='POST', action='/signup')
 input(type='text', name='username', placeholder='username')
 input(type='text', name='password', placeholder='password')
 button.btn Register 
```

虚拟数据库 这是示例中的数据库

```
users = [
  {id:1, username: 'test', password:'papapa'}
]; 
```

因此，当我通过表单发送信息时，一切正常，但是当我尝试使用新创建的用户登录时，告诉我“错误：无法将用户序列化到会话中”

serializeUser 是这个

```
passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(id, done) {
  findById(id, function (err, user) {
    done(err, user);
  });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:08:21.820

The user being pushed in the POST /signup route will not have an ID, which the examples serialization code expects.

Change it to something like this, and it should work.

```
app.post('/signup', function(req,res){
  var body = req.body;
  body.id = users.length;
  users.push(body);
  res.redirect('/');
}); 
```

(Note that this is an example only, and not recommended for "real" apps.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:12:19.773

我猜您缺少会话序列化程序。查看[https://github.com/jaredhanson/passport](https://github.com/jaredhanson/passport)的“会话”部分。

基本上，您需要两个函数，将当前用户保存到会话中 (passport.serializeUser) 并将其读回 (passport.deserializeUser)。

# java - 为什么今天的日期显示为之前的日期？

> ID：12619716
> 
> 赞同：2
> 
> 时间：2012-09-27T10:53:11.597
> 
> 标签：java, date

为什么今天的日期显示为之前的日期？

```
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

public class Test {

    public static void main(String args[]) throws ParseException {

        Date date = new Date();

        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

        List currentObject = new ArrayList();

        currentObject.add("2012-09-27");
        Date ExpDate = dateFormat.parse((String) currentObject.get(0));

        if (ExpDate.before(date)) {
            System.out.println("true");
        }

        else {
            System.out.println("false");
        }
    }

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:56:11.267

```
Date date = new Date(); 
```

也会产生时间，但这

```
currentObject.add("2012-09-27");
dateFormat.parse((String) currentObject.get(0)); 
```

将默认为`00:00:00`，因为您`dateFormat`排除了时间，从而导致时间部分设置为`0h`。

所以它是正确的：

```
ExpDate: 2012-09-27 00:00:00 
```

*早*于

```
date: 2012-09-27 <some time later than midnight> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:00:10.510

当你说

`Date date = new Date();`

您正在为创建的瞬间创建一个 Date 对象，即 2012 年 9 月 27 日 11:59:01.01。

这是在您之前创建的日期之后，没有指定**时间**组件，因此默认为 00:00:00.000。

# c# - 如何取消和回滚工作流的一部分

> ID：12619717
> 
> 赞同：1
> 
> 时间：2012-09-27T10:53:15.497
> 
> 标签：c#, workflow, workflow-foundation-4

我有一个运行时间很长的工作流程，可以在视频处理设备之间移动视频文件，然后将文件状态报告给用于驱动 UI 的数据库

有时，用户按下 UI 上的按钮以将文件“接受”到视频存储服务器中。这涉及将文件从一台服务器复制到另一台服务器。]

他们询问是否可以取消此活动。

我查看了 wf4 文档，但看不到回滚部分工作流程的方法。

这可能吗？我应该使用什么技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:45:11.880

这是恢复工作的两个基本内置活动。

1.  ACID 事务的 TransactionScope
2.  长期工作的有偿活动。

使用 Compensable 活动，您可以将活动添加到补偿处理程序以撤消之前完成的工作。补偿活动可用于触发补偿。如果没有补偿，您将在工作流结束时自动获得确认处理程序，或者在您使用 Conform 活动时获得确认处理程序。

有关更多详细信息，请参阅 Matt Milner 撰写[的 A Developer's Introduction to Windows Workflow Foundation (WF) in .NET 4](http://msdn.microsoft.com/en-us/library/ee342461.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:56:54.717

不确定我是否完全理解您的情况，但我认为您需要在异步线程上运行传输过程，不时检查“取消”变量以执行回滚。可以在 UI 的主线程上修改此变量。

当然，这将允许您在转移之间取消，而不是在一次转移的中间取消。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:47:03.503

好的，首先让我们说“回滚”已经上传的内容的处理必须手动完成，所以无论你在哪里存储这些块，当它们取消时你需要手动清理它们。

现在，就工作流程本身而言，我认为您可以这样设置`FlowChart`：

![流程图](../Images/2223db7ded014e87e984993da1e35b18.png)

![过程循环第 1 部分](../Images/8327f3d31deb31ae20e01379604f8524.png)

![处理循环第 2 部分](../Images/c6725014c563229bfc21fbe10ca19db6.png)

好吧，让我们分解这个工作流程。整个服务应该与某个客户端密钥相关联，这样您就可以为`Start`每个客户端启动一次服务，以降低启动成本。

接下来，当所述客户想要开始传输时，您将调用`BeginTransfer`它将进入传输循环。传输循环已设置，因此您可以在必要时通过调用在块之间取消`CancelTransfer`。

在这个模型中，同一个分支也用于**完成**传输，因为它脱离了循环，所以当你完成传输块时，只需调用`CancelTransfer`（如果你不喜欢这样，只需设置一个看起来完全相同的不同分支）。

最后，当您处于流程循环中时，您可以`SoftExit`关闭整个工作流程并将其关闭，以便在需要维护**或**客户端完成连接时需要调用`SoftExit`以处理它时可以轻柔地杀死它。

# bash - bash中的多行正则表达式匹配

> ID：12619720
> 
> 赞同：16
> 
> 时间：2012-09-27T10:53:23.760
> 
> 标签：bash, pattern-matching

我想用 bash 做一些多行匹配`=~`

```
#!/bin/bash
str='foo = 1 2 3
bar = what about 42?
boo = more words
'
re='bar = (.*)'
if [[ "$str" =~ $re ]]; then
        echo "${BASH_REMATCH[1]}"
else
        echo no match
fi 
```

快到了，但如果我使用`^`or `$`，它将不匹配，如果我不使用它们，`.`也会吃换行符。

编辑：

抱歉，后面的值`=`可能是多字值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T11:07:55.980

我可能是错的，但是从[这里](http://tldp.org/LDP/abs/html/x17000.html)快速阅读后，尤其是页面末尾的注释 2，bash 有时可以在与点运算符匹配时包含换行符。因此，一个快速的解决方案是：

```
#!/bin/bash
str='foo = 1
bar = 2
boo = 3
'
re='bar = ([^\
]*)'
if [[ "$str" =~ $re ]]; then
        echo "${BASH_REMATCH[1]}"
else
        echo no match
fi 
```

请注意，我现在要求它匹配除换行符之外的任何内容。希望这会有所帮助=)

编辑：另外，如果我理解正确， ^ 或 $ 实际上将匹配字符串的开始或结束（分别），而不是行。如果其他人可以确认这一点会更好，但确实如此，并且您确实想逐行匹配，您需要编写一个 while 循环来单独读取每一行。

# android - Android：如何向许多活动发送通知

> ID：12619724
> 
> 赞同：0
> 
> 时间：2012-09-27T10:53:32.737
> 
> 标签：android, android-activity, notifications, message, observer-pattern

在我的 Application 类中，我有一个长时间运行的函数（例如下载新数据）。一旦操作完成，我想通知几个相关的活动来刷新他们的 UI。在 Android 中实现这一目标的最佳方法是什么（相当于 iOS 中的 postNotification）？

```
public class MyApplication extends Application{
    public void onCreate() {
        downloadDataInBackground(); // call operationDone when finished
    }

    private void operationDone(){
        sendMessageToAllRelatedActivities();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:55:08.473

您可以使用：广播接收器。请参阅以下链接：

[http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T16:21:35.260

我认为您应该使用观察者设计模式来通知某个状态已更改

[观察者](http://www.vogella.com/tutorials/DesignPatternObserver/article.html)

# iphone - iOS 6.0 Storyboard：设置静态单元格被选中

> ID：12619734
> 
> 赞同：0
> 
> 时间：2012-09-27T10:54:05.697
> 
> 标签：iphone, ios, uitableview, storyboard, ios6

我在 UITableViewController 场景中创建了 5 个静态单元格。一切正常，但我无法设置选定的特定单元格！如果它是原型单元格，那么它很简单，但我如何设置静态单元格？以下代码引发 BAD 内存访问异常！我是根据[关于苹果线程的讨论](https://devforums.apple.com/message/505098)完成的，但不确定出了什么问题！有人可以帮忙吗。

```
- (void)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    [super tableView:tableView cellForRowAtIndexPath:indexPath];

    if(indexPath.section == _rating)
        [tableView cellForRowAtIndexPath:indexPath].accessoryType =UITableViewCellAccessoryCheckmark;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:33:50.660

修复了这个。我必须返回 UITableViewCell 返回类型并且必须使用如下方法。它是递归调用方法，因此失败了。

```
- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [super tableView:tableView cellForRowAtIndexPath:indexPath];

    if(indexPath.section == _rating)
       cell.accessoryType = UITableViewCellAccessoryCheckmark;

    return cell;
 } 
```

# ruby-on-rails - Rails has_many 关系：看看 object_ids

> ID：12619738
> 
> 赞同：1
> 
> 时间：2012-09-27T10:54:32.640
> 
> 标签：ruby-on-rails, has-many, ruby-on-rails-2, objectid

Rails 2.3.14 中发生了一些奇怪的事情。任何想法为什么会发生以下情况？

## 例子

假设我们有像这样的类

```
class Article < ActiveRecord::Base
   has_many :prices
end

class Price < ActiveRecord::Base
end 
```

然后在`irb`会话中发生以下情况。

```
>> a = Article.first
=> #<Article id: 980190962>
>> a.prices.first.object_id
=> 97498070
>> a.prices.first.object_id
=> 97470500
>> a.prices.first.object_id
=> 97451010
>> a.valid?
=> true
>> a.prices.first.object_id
=> 97374790
>> a.prices.first.object_id
=> 97374790 
```

所以起初`object_id`每次访问记录时都会发生变化（是的，它总是相同的）。稍后调用`#valid?`此行为后停止。相反，一切都很好。每次调用都会得到相同的对象。

## 为什么这很重要？

假设您将验证添加到`Price`

```
class Price < ActiveRecord::Base
  validates_presence_of :amount
end 
```

然后你想改变一篇文章的价格。

```
>> a = Article.first
=> #<Article id: 980190962>
>> p = a.prices.first
=> #<Price id: 280438907, amount: 1.0, article_id: 980190962>
>> p.amount = nil # oops, accidentally we assigned nil
=> nil
>> p.valid?
=> false
>> a.valid?
=> true 
```

那是什么？价格无效，但文章无效？这不应该发生，因为默认情况下`:validate`-option`has_many`设置为`true`. 这是因为不断变化`object_id`的 s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:06:10.863

每个新的上下文（请求/响应）都会重新生成对象 ID。当您运行查询`a.prices.first.object_id`时，它每次都会点击查询以获取第一个价格，并且每次点击都会生成新的对象 ID。

但是在第二种情况下，您已将第一个价格提取到实例变量中并对其进行处理，因此没有新的请求/响应将进入数据库，因此它提供了相同的对象 IDS。

# javascript - 我可以在不检查 jQuery 是否已完全加载的情况下构建 jQuery 原型函数吗？

> ID：12619751
> 
> 赞同：1
> 
> 时间：2012-09-27T10:55:16.680
> 
> 标签：javascript, jquery

我可以用这种方式创建一个 jQuery 原型吗：

```
<script 
   src="/Scripts/jquery/jquery-1.8.2.min.js" 
   type="text/javascript">
</script>

<script src="/Scripts/common/layout/jquery.fn.buildTableOfContent.js"></script> 
```

当 buildTableOfContents.js 文件看起来像这样时：

```
$.fn.buildTableOfContent = function () {
    "use strict";
    var h2 = this.find('h2');
    if (h2.length > 0) {
    ..... 
```

我担心的是原型函数构建是否依赖于完全加载的 jQuery，并且像这样的文件会在 jQuery 完全加载后始终执行 buildTableOfContents 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:58:02.703

是的，您的代码需要`$`定义，因此需要加载 jQuery。是的，将 jQuery 包含在您的插件包含之前可以保证 jQuery 在您的插件创建时可用。

到达脚本块后，浏览器将停止页面的任何进一步渲染，下载外部文档，执行其中的代码，然后继续渲染页面的其余部分。这就是为什么您要在关闭正文之前放置脚本块（以便页面的其余部分将呈现而不管阻塞请求）。

# ios - XCode：不使用核心数据的原因？

> ID：12619753
> 
> 赞同：0
> 
> 时间：2012-09-27T10:55:34.157
> 
> 标签：ios, core-data, libraries

我是一名新的 iPhone 开发人员，我在教育领域整合了一个 iOS 开发人员团队。首先，我感谢您的帮助。

这是我的问题：首席开发人员告诉项目（iOS 5），他们不会使用 Core Data 来处理应用程序的数据库，但他们将使用自己的 SQLite 库。首席开发人员告诉我，Core Data 不适合该项目，因为他们正在处理的数据......没有更多细节

由于 Core Data 使用 SQLite，（他们创建的库也是如此），你有什么想法为什么 Core Data 可能是一个问题（一般来说）

如果你有任何线索，我真的很感谢你。

**编辑 ：**

我刚刚了解到领导正在创建一个 sqlite 数据库，我们将在应用程序中使用它。并且字段包含很多html（很多特殊字符，如\或&或<），我们将在一些UIWebViews中显示它。当他说那些特殊字符可能会导致核心数据出错时，他是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:40:49.943

我能想到的唯一原因是跨平台可移植性。如果您使用手动生成的模式，甚至可能提供通用库代码，那么该数据库模式/库可以在非 Apple 平台上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:07:38.340

很难猜测其他人的原因，但是...... Core Data 的目的是对象持久性。**它可以**使用数据库作为存储机制这一事实是一个实现细节。对于本质上专门面向对象的问题，它工作得很好。

如果您正在处理的问题更适合关于行、列和表的解决方案，那么它不一定适合。

我喜欢使用对象，并且对其他系统中的对象/关系映射有很多经验，所以我倾向于支持核心数据。具有纯数据库背景的人可能有不同的看法。

# configuration - Log4j 使用属性文件的不同日志级别的不同附加程序

> ID：12619754
> 
> 赞同：32
> 
> 时间：2012-09-27T10:55:34.650
> 
> 标签：configuration, log4j, appender

由于 log4j 的官方文档是一个[断开的链接](http://logging.apache.org/log4j/docs/documentation.html)，并且入门指南对我没有帮助，我想知道如何为同一个记录器使用两个具有不同日志级别的附加程序，使用一个`.properties`文件而不是一个文件`.xml`。

例如，像这样：

```
log4j.rootLogger=debug,  APPENDER_FILE, APPENDER_STDOUT 
```

我正在使用两个不同的附加程序进行日志记录，但在相同的日志级别 ( `DEBUG`)。我想为 使用一个`INFO`日志级别`APPENDER_STDOUT`，`DEBUG`为`APPENDER_FILE`.

我的问题与[此](https://stackoverflow.com/questions/751431/how-can-i-direct-log4j-output-so-that-different-log-levels-go-to-different-appen)类似，但与那个问题不同，我使用的是`log4j.properties`文件，而不是 xml 文件。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-27T10:59:44.163

您需要将*记录器*设置为两个级别中更详细的级别（调试），然后在附加程序上设置一个阈值，*告诉*它只在 INFO 及以上显示消息

```
log4j.appender.APPENDER_STDOUT.Threshold=INFO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-05T12:57:24.427

此外，如果要在包级别指定附加程序，可以使用：

```
log4j.logger.[package]=[Level], [Appender] 
```

例子：

```
log4j.logger.org.apache.cxf=INFO, MyAppender 
```

有关更多详细信息，请查看：[https ://stackoverflow.com/a/19795886/679240](https://stackoverflow.com/a/19795886/679240)

# php - Google GCM 服务器返回未经授权的错误 401

> ID：12619759
> 
> 赞同：30
> 
> 时间：2012-09-27T10:56:06.383
> 
> 标签：php, android, json, google-cloud-messaging

我正在使用 GCM 服务从服务器推送信息。如果我使用浏览器密钥，它会将成功消息显示为：**{"multicast_id":4849013215736515938,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0: 1348742583011905%2adac3a0f9fd7ecd"}]}** 但我没有在设备上收到任何通知。如果我使用服务器密钥，它会显示**Unauthorized Error 401**。我的代码如下所示：

```
$apiKey = "xxxxx";
$registrationIDs = array("xxxxxxxx");
$message = "testing Process";
$url = 'https://android.googleapis.com/gcm/send';
$fields = array(
        'registration_ids'  => $registrationIDs,
        'data'              => array("message"=>$message),
        );
$headers = array( 
        'Authorization: key=' . $apiKey,
        'Content-Type: application/json'
        );
$ch = curl_init();
curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0); 
curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode($fields) );

$result = curl_exec($ch);
if(curl_errno($ch)){ echo 'Curl error: ' . curl_error($ch); }
curl_close($ch);
echo $result; 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-03T09:00:58.293

您是否将服务器的 IP 列入白名单？默认情况下，这对于浏览器密钥不是必需的，但对于服务器密钥是必需的。

你可以在这里查看：

https://code.google.com/apis/console/#project:[您的项目编号]:access

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-11T18:17:57.097

另一个答案已经建议将 IP 地址列入白名单，这似乎很明显。为我解决的问题是将我的**IPv6 地址**列入白名单。那是关键！我希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-26T13:29:12.397

我尝试了这个线程中的所有内容，但仍然没有运气。

所以我检查了启用的 API（**APIs and Auth -> APIs, Enabled APIs**），并意识到我没有`Google Cloud Messaging for Chrome`启用`Google Cloud Messaging for Android`。一旦我启用后者，它就立即起作用。

仔细检查您是否启用了正确的 API！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-27T16:09:05.580

正如许多人所写，您必须将您的服务器 IPV4 和 IPV6 列入白名单。如果您只想要 IPV4，请将其添加到您的 curl php init 中：

```
curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-09T18:50:49.487

使用浏览器密钥使用选项创建新的浏览器密钥并在您的代码中使用此密钥。 [https://code.google.com/apis/console/?pli=1#project:42053154xxxx:access](https://code.google.com/apis/console/?pli=1#project:42053154xxxx:access)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-05T02:31:48.767

我曾经把

```
$apiKey = "xxxxx" 
```

就像我放到Android客户端应用程序中的项目编号（项目ID）一样，但我在服务器中出错了必须是来自谷歌云控制台的appkey，（您在其中激活**Google Cloud Messaging for Android**）

```
 ProjectXXX -> APIs & auth -> Registered Apps -> Web App -> Server Key
 -> Api key 
```

*就我而言，我在平台上有默认项目“服务帐户项目”：“Web”，但`Hosted Application section`没有任何关于任何 api 密钥的证据。但是当我创建新的名为“我的应用程序” ，`Web Apps`其中包含 4 个部分`OAuth 2.0 Client ID`、、**服务器密钥**时，我终于找到了 api 密钥；-)`Certificate`**`Browser Key`***

 **可能只有我不知道，但我相信这个答案也可能对某些人有所帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-21T15:20:18.157

对我来说，问题是你必须启用 api。设置 API 是不够的。检查适用于 Android 的 Google Cloud Messaging 是否出现在 APIs-> enabled APIs 中的已启用 APIs 上。

如果它没有单击 APIS 中的 API 库选项卡并启用它。\

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-31T10:19:08.433

问题是：我使用了 2 台服务器，1 台登台，另一台是生产服务器。对于使用数字海洋托管的登台服务器，我在**密钥中输入了 inet 地址，以获取服务器应用程序**允许的 IP 地址，它工作得很好。

但是，当我从生产服务器更改为我的 inet 地址时，它失败了。相反，我必须使用 inet6 addr: /64 Scope:Global 才能工作。如果遇到同样的问题，要获取该值，只需输入**ifconfig**，然后找到上面的条目。在允许的 IP 地址中输入该值，它将正常工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-27T10:58:23.853

如果我没记错的话，您的 APIKEY 需要进行 base64 编码。

也尝试 var_dump($results) 看看你是否得到信息。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-13T10:52:15.707

查看代码，我发现这是来自在线某处发布的 php-gcm 示例。它非常好，我可以向您保证，浏览器密钥和列入白名单的 ip（不是 IPV6 或 bas64 apikey）都可以工作。

没有显示消息的原因是因为您使用的发送通知功能`'data' => array("message"=>$message)` 针对“消息”键，这是您必须传递给待处理意图的内容，即

```
notification.setLatestEventInfo(context, title, message, intent); 
```

这将使意图能够读取包含在此键下的消息。消息本身是从下面粘贴的 GCMIntentService 方法中获取的：

```
 @Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = intent.getExtras().getString("message");
    Log.d(TAG, "The intent contains: " + intent.getExtras());
    displayMessage(context, message);
    // notifies user
    generateNotification(context, message);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-07T11:25:29.647

您必须有与默认项目不同的项目。创建一个项目，然后创建一个密钥。不要使用默认项目。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-17T00:45:17.800

遇到这个麻烦，我正在使用 GCM（谷歌云消息传递）。但是在 2016 年 9 月之后，GCM 上的服务器密钥将无法使用，您必须使用 FCM（firebase 云消息传递）。仅在 Firebase 控制台中使用“设置”面板的“云消息”选项卡创建新的服务器密钥。我去了firebase控制台console.firebase.google.com（我还没有使用它），它要求我导入我的项目。GCM 控制台上突然出现了这个新的服务器密钥。如果使用 GCM，请使用您在此处看到的“旧密钥”。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-08-17T18:55:41.447

[**确保您启用了 API 调查密钥！**](http://support.apmetrix.com/hc/en-us/articles/200839259-Creating-your-Android-GCM-Credentials)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-02-23T20:58:57.050

我们正在寻找解决方案。更具体地说，添加此 curl 选项：`curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 );`**

# safari - XMLHttpRequest 在 Safari 中无法正常工作（但适用于 Chrome）

> ID：12619763
> 
> 赞同：2
> 
> 时间：2012-09-27T10:56:14.380
> 
> 标签：safari, xmlhttprequest

在创建显示 WebGL 画布的网页后，我有以下代码来加载文件：

```
// Load ccconnect.js file
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
        if(xmlhttp.readyState == 4){
            eval.call( Window, xmlhttp.response );
        }
};
xmlhttp.open("GET","../ccconnect.js",true);
xmlhttp.send(null); 
```

它在 Chrome 中运行良好，但 Safari 显示错误消息：

ReferenceError：找不到变量：窗口

就行了`eval.call(...)`。当`ccconnect.js`我在调试时将鼠标悬停在`response`同一行上的“”上时会显示代码，因此它似乎已经检索到它。知道有什么问题吗？我正在使用 Safari 5.1.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:14:32.647

两者都是全局对象`window`，`Window`其他浏览器都可以理解。

但是当我签入 safari 时，它不理解变量`Window`。所以我的建议是替换`Window`为`window`.

# android - 在 android 中设置服务器并从中获取提要

> ID：12619765
> 
> 赞同：-1
> 
> 时间：2012-09-27T10:56:16.650
> 
> 标签：android, web-services

这可能不是我应该在这里问的问题类型，但我没有其他地方可去。我想制作一个从网络服务器获取提要并显示在应用程序中的 android 应用程序。这将是一种报纸应用程序。我已经完成了我的工作：我知道 android 应用程序开发：已经制作了一些应用程序。另外，我对 UI 有一个想法：一个带有提要的列表视图，然后在选择一个元素时，我将打开另一个带有完整提要的活动。我想知道的是：

1.  如何为此设置服务器？
2.  如何请求？
3.  我可以设置免费服务器吗？

我不想使用 GCM，因为我认为它不允许发送图片。此外，它还允许发送小数据。另外，我不知道我可能需要为此创建的第 3 方服务器。

我想从服务器发布文本和照片（合并后发布，总共大约 10 个帖子）。请不要关闭不是一个问题。任何链接，教程将不胜感激。对于服务器端编码，我知道 php、.net。我从来没有为服务器编写过java代码，但我可以学习它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:10:05.997

请按照以下步骤完成您的项目。

1.  设置任何 php 或 Java 或 .Net 服务器（如果您了解这些 Web 技术中的任何一种）
2.  设置服务器后，您需要制作 Web 服务，该服务将作为中介在您的服务器和移动设备之间传输数据。
3.  Web 服务响应将采用 JSON 或 XML
4.  根据您的需要生成响应并在 android 端解析它们。
5.  在列表视图中显示:) :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:12:54.750

您可以将 JBOSS 用于您的服务器，并使用 Webservices 做一个 Java Server。

在您的网络服务中，您将拥有一个获取所有提要的服务，也许还有另一个请求完整提要的服务......

您在 Android 应用程序和服务器之间的“语言”，您可以将 XML 与 SOAP（Android 的 ksoap2）一起使用，或者您可以尝试 JSON（我从未使用过，但我会因为我们需要在我的服务中使用）。

您可以尝试找到另一个免费的服务器端，但我认为 SOAP 在大多数服务器中对于与您的应用程序“对话”很重要。

我希望对你有所帮助。

[]s 贝尔坦

# eclipse - Eclipse + GWT + spring + maven：classnotfoundexception

> ID：12619766
> 
> 赞同：0
> 
> 时间：2012-09-27T10:56:22.437
> 
> 标签：eclipse, spring, gwt, maven

我的设置有一个奇怪的问题，我不明白。我正在开发一个在 shell 中运行良好的 maven GWT 项目（即 mvn gwt:run 正在按预期工作）。

但是，当我尝试在 Eclipse 中运行它（安装了 m2e 和 gwt 插件）时，我得到了一个 classnotfoundexception。该类是实体类，在构建实体管理器时发生异常。我检查了该类是否在persistence.xml 中声明，并且在pom.xml 或eclipse 构建路径中找不到任何排除项。

最重要的是，它适用于从事完全相同项目的其他人。

我的猜测是我在 Eclipse 中有一个配置错误，但我没有做任何事情。

有任何想法吗？

Eclipse 4.2
GWT 2.4
Maven 3.0.3
Spring 3.0.5

```
[WARN] Failed startup of context com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload@57790a{/,C:\Users\gere\Documents\netlight-workspace\NET2\target}
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManager' defined in ServletContext resource [/WEB-INF/database.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: netlight_db] class or package not found
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:222)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: netlight_db] class or package not found
at org.hibernate.ejb.Ejb3Configuration.addNamedAnnotatedClasses(Ejb3Configuration.java:1386)
at org.hibernate.ejb.Ejb3Configuration.addClassesToSessionFactory(Ejb3Configuration.java:1159)
at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:1004)
at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:689)
at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:308)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
... 30 more
Caused by: java.lang.ClassNotFoundException: se.netlight.projectplusgui.server.dbo.BusinessArea
at java.lang.ClassLoader.findClass(ClassLoader.java:358)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:352)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.hibernate.util.ReflectHelper.classForName(ReflectHelper.java:170)
at org.hibernate.ejb.Ejb3Configuration.classForName(Ejb3Configuration.java:1302)
at org.hibernate.ejb.Ejb3Configuration.addNamedAnnotatedClasses(Ejb3Configuration.java:1374)
... 38 more
[WARN] Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManager' defined in ServletContext resource [/WEB-INF/database.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: netlight_db] class or package not found:
java.lang.ClassNotFoundException: se.netlight.projectplusgui.server.dbo.BusinessArea
at java.lang.ClassLoader.findClass(ClassLoader.java:358)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:352)
at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.hibernate.util.ReflectHelper.classForName(ReflectHelper.java:170)
at org.hibernate.ejb.Ejb3Configuration.classForName(Ejb3Configuration.java:1302)
at org.hibernate.ejb.Ejb3Configuration.addNamedAnnotatedClasses(Ejb3Configuration.java:1374)
at org.hibernate.ejb.Ejb3Configuration.addClassesToSessionFactory(Ejb3Configuration.java:1159)
at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:1004)
at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:689)
at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:308)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:222)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:07:40.703

它可能是 GWT-Eclipse 的类加载。默认情况下，从 Eclipse 运行 GWT 应用程序时，lib 文件夹中的所有 jar 都将添加到正在运行的应用程序类路径中。此外，当 Eclipse-GWT 遇到不在该类路径中的任何类时，它会搜索系统类路径。如果找到该类，则相应的 jar 也会添加到正在运行的应用程序类路径中。这将记录在控制台中。

通常这没问题，但是当您搜索类路径时它确实会导致问题。除非 Eclipse 将 jar 添加到正在运行的类路径中，否则不会找到类。您可以破解一些东西，但它并不理想（请参阅[此问题的答案](https://stackoverflow.com/questions/7442391/gwt-web-app-vs-system-classpath-for-dynamic-loaded-classes)）。

我猜想使用 Maven，所有 Maven 依赖 jar 都被添加到系统类路径中。当与 Spring 和 JPA 结合使用时，就会进行大量的类路径搜索。

这并不能解释为什么它可以在其他人的机器上工作 - 除非他们在他们的 web 应用程序 lib 文件夹中有额外的 jars。

至于如何“正确”修复它，我不确定。我自己也处于相同的位置 - 我有一个可以工作的应用程序，而另一个以非常相似的方式配置的应用程序却没有。这也是我发现这个问题的原因！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:23:36.170

1) 尝试执行`mvn clean install`然后启动托管模式。如果它有效，这意味着需要将一些类/文件复制到目标中才能使您的项目工作。

2) 如果您尝试使用 Google GWT Webapp Launch，请检查您的启动文件夹是否有参数。您应该尝试将其与 maven 的目标设置、带/不带版本 id 的工件等对齐

3）检查你的项目名称，看看你是否已经将带有versionid后缀的maven项目导入到你的项目中。这可能会导致一些类路径问题。

# algorithm - 快速遍历大型二进制文件的算法

> ID：12619769
> 
> 赞同：2
> 
> 时间：2012-09-27T10:56:37.353
> 
> 标签：algorithm, large-files, binary-search

我有一个涉及读取大文件的问题要解决，我对如何处理它有一个大致的了解，但希望看到它可能有更好的方法。

问题如下：我有几个巨大的磁盘文件（`64GB`每个）都充满了`2.5KB`每个记录（大约`25,000,000`记录总数）。除其他字段外，每条记录都有一个**时间戳**和一个指示时间戳是否有效的**isValid标志。**当用户输入时间跨度时，我需要返回时间戳在指定范围内的所有记录。

数据的布局是这样的，对于标记为“有效”的所有记录，时间戳单调增加。根本不应考虑无效记录。所以，这就是文件通常的样子（尽管范围要大得多）：

```
a[0]  = { Time=11, IsValid = true };
a[1]  = { Time=12, IsValid = true };
a[2]  = { Time=13, IsValid = true };
a[3]  = { Time=401, IsValid = false }; // <-- should be ignored
a[4]  = { Time=570, IsValid = false }; // <-- should be ignored
a[5]  = { Time=16, IsValid = true }; 

a[6]  = { Time=23, IsValid = true };  // <-- time-to-index offset changed 
a[7]  = { Time=24, IsValid = true };
a[8]  = { Time=25, IsValid = true };
a[9]  = { Time=26, IsValid = true };

a[10] = { Time=40, IsValid = true };  // <-- time-to-index offset changed 
a[11] = { Time=41, IsValid = true };
a[12] = { Time=700, IsValid = false };  // <-- should be ignored 
a[13] = { Time=43, IsValid = true }; 
```

如果时间戳和计数器之间的偏移量是恒定的，则查找第一条记录将是一个`O(1)`操作（我会简单地跳转到索引）。既然不是，我正在寻找一种不同的方法来（快速）找到这些信息。

一种方法可能是修改后的二进制搜索，但我不完全确定如何处理更大的无效记录块。我想我也可以创建一个“索引”来加快查找速度，但是由于会有很多这样的大文件，并且提取的数据大小会比整个文件小得多，我不想遍历这些文件中的每一个，逐条记录，生成索引。我在想二进制搜索是否也会在*构建*索引时有所帮助。

更不用说我不确定索引的最佳结构是什么。平衡二叉树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:31:28.477

您可以使用**修改后的二进制搜索**。这个想法是进行通常的二进制搜索以找出下限和上限，然后返回有效的条目之间的中间值。

修改在当前条目是否无效的部分。在这种情况下，您必须找出两个端点，您有一个有效的条目。例如，如果中点为 3，

```
a[0]  = { Time=11, IsValid = true };
a[1]  = { Time=12, IsValid = true };
a[2]  = { Time=401, IsValid = false };
a[3]  = { Time=570, IsValid = false }; // <-- Mid point.
a[4]  = { Time=571, IsValid = false };
a[5]  = { Time=16, IsValid = true }; 
a[6]  = { Time=23, IsValid = true }; 
```

在上述情况下，算法将返回两个点 a[1] 和 a[5]。现在算法将决定二进制搜索下半部分或上半部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:20:51.180

您可能会在二进制搜索中带来一些随机性。实际上，随机算法对于大型数据集表现良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:00:37.330

在这种情况下，使用别人的数据库代码开始看起来是个好主意，

无论如何，您需要摸索直到找到有效数据的开头，然后再阅读直到结束，

首先进行射击并相应地移动标记，与正常的二分搜索相同，除非您遇到无效记录 开始搜索有效记录 只需从猜测中向前读取就可以了

可能值得对文件运行维护任务以用有效时间戳替换无效时间戳，或者维护外部索引，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:31:38.237

听起来确实像修改后的二进制搜索可能是一个很好的解决方案。如果大块无效记录是一个问题，您可以通过跳过大小呈指数增长的块来处理它们，例如 1,2,4,8,.... 如果这使您超出当前括号的末尾，请退回到括号的末尾并以 1,2,4,8,... 的步长向后跳，以找到合理靠近中心的有效记录。

# intellij-idea - 在 IntelliJ 中运行 ScalaTest 会从类路径中删除除了 idea_rt.jar 之外的所有内容

> ID：12619771
> 
> 赞同：2
> 
> 时间：2012-09-27T10:56:41.330
> 
> 标签：intellij-idea, scalatest

我正在尝试从 IntelliJ 运行 ScalaTest 测试用例

我指定了在运行/调试配置对话框中使用的类路径，这似乎工作正常。

但是，如果我尝试使用来询问这个类路径，`System.getProperty("java.class.path")` 我只会得到`idea_rt.jar`

除非我在集成测试中尝试这样做，否则这不会是问题：

```
val execArgs = Array("java", 
    "-classpath", 
    System.getProperty("java.class.path"), 
    mainClass, 
    args)

val process = Runtime.getRuntime.exec(execArgs) 
```

而且，当然，我`mainClass`的没有找到。

我的配置。

*   scalatest_2.9.2-1.8.RC1
*   IntelliJ IDEA 11.1.3
*   scala-library-2.9.2
*   scala 插件版本 0.5.977

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:07:51.137

尝试编辑`bin/idea.properties`，或者`Info.plist`如果您在 Mac 上，请将其设置为`true`：

```
#---------------------------------------------------------------------
# Configure if a special launcher should be used when running processes from within IDE.
# Using Launcher enables "soft exit" and "thread dump" features
#---------------------------------------------------------------------
idea.no.launcher=true 
```

# .net - 检测屏幕保护程序何时不再显示

> ID：12619772
> 
> 赞同：2
> 
> 时间：2012-09-27T10:56:48.677
> 
> 标签：.net, screensaver, lockscreen

我想确定计算机何时停止显示屏幕保护程序。我的意思不是显示用户的桌面时，因为有时在 2 个事件之间会有一个锁定屏幕。

作为一点背景，我有一个警报应用程序。我希望能够通过移动鼠标或按任意键来使警报静音。

简历上没有密码，这很容易。但是，在锁定屏幕的情况下，我的应用程序直到用户输入密码后才开始接收输入 - 这意味着在他们尝试登录时会发出警报。

有什么方法可以检测锁屏桌面何时显示并处理这种情况？我知道跨桌面的交互受到严重限制，但是否可以检测到（或者它是否在显示屏幕保护程序的同时创建，在这种情况下，我正在尝试错误的方法）？

如果有人能指出一个好的教程/文章或分享任何经验，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:59:53.137

您可以轮询正在运行的进程列表，并检查任何进程的进程名称是否以 .scr 结尾 - 如果列表中存在 .scr，则屏幕保护程序正在运行。如果您上次检查时有一个，而现在没有 - 屏幕保护程序已停止。

# java - surefire-report 将输入数据添加到报告中

> ID：12619778
> 
> 赞同：1
> 
> 时间：2012-09-27T10:57:06.773
> 
> 标签：java, maven, maven-surefire-plugin

我正在尝试使用这个出色的 maven 插件来生成测试报告。我遇到的问题是我正在使用`Parameterized`该类来添加输入。所以现在我的报告看起来像这样：

```
testAuth[0] 0.411
testAuth[1] 0.353
testAuth[2] 0.385
testAuth[3] 0.388
testAuth[4] 0.514 
```

相反，我希望显示输入数据。有没有办法做到这一点？

这是屏幕截图

![在此处输入图像描述](../Images/4607e42da7eca619784cc58348d455ed.png)

# javascript - 网页“google-code-prettify”中代码片段的语法突出显示不适用于 aspx 和 html 代码

> ID：12619782
> 
> 赞同：1
> 
> 时间：2012-09-27T10:57:21.987
> 
> 标签：javascript, syntax-highlighting, google-code-prettify

我在html的标题中添加了以下几行

```
<link href="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css" rel="stylesheet" type="text/css" />
<script src="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js" type="text/javascript"></script> 
```

在 html 中，我想突出显示一些 html 代码：

```
<body onload="prettyPrint()">
    <pre class="prettyprint lang-html">

           <input type="button" value="HELLO"/>

</pre>
</body> 
```

但我不能高亮 html 代码：当前副本：http: [//jsfiddle.net/jTYQk/](http://jsfiddle.net/jTYQk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:10:22.103

pre 元素不会阻止浏览器呈现内部元素。[http://www.htmlcodetutorial.com/linepar/_PRE.html](http://www.htmlcodetutorial.com/linepar/_PRE.html)

通过将 < 更改为`&lt;`和 > 更改为`&gt;`，您将使其正确呈现。查看[http://jsfiddle.net/jTYQk/1/](http://jsfiddle.net/jTYQk/1/)以获取示例。

或者

您也可以将代码包装在 `<xmp></xmp>`. [在http://jsfiddle.net/jTYQk/2/](http://jsfiddle.net/jTYQk/2/)上查看。

但是，不建议这样做，因为 xmp 已被标记为过时。请参阅[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/xmp](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/xmp)

# orm - 通过在多个表/模型中划分用户来处理角色

> ID：12619785
> 
> 赞同：1
> 
> 时间：2012-09-27T10:57:33.400
> 
> 标签：orm, relational-database

我的应用程序有几种具有不同属性集的用户，例如：客户和员工。一个用户可能属于这些角色中的一个以上。所以我决定让我的数据库有这个（简化的例子）结构：

```
users (contains the fields applicable to all different kinds of users)
  id
  username
  email

customers (contains fields applicable to customer role)
  id
  user_id
  shipping_address

employees (contains fields applicable to employee role)
  id
  user_id
  salary 
```

问题 1：这是处理具有许多不同属性的用户角色的好方法吗？实际上，我有六个角色，包含 7-20 个属性。有些角色甚至不是传统的角色，而是像额外的属性一样无聊。如果用户决定使用 Facebook 帐户登录，则 Facebook_account 表适用。

问题 2：当使用 ORM 时，在我的 Eloquent 案例中，让角色模型（客户）扩展用户模型是否有意义？当我获取客户对象时，我真的希望将所有用户 och 客户属性放在一起，而不必手动合并它们。

# objective-c - 在 iOS 6 上使用自动布局在 ScrollView 中嵌入 ImageView

> ID：12619786
> 
> 赞同：20
> 
> 时间：2012-09-27T10:57:35.710
> 
> 标签：objective-c, uiscrollview, uiimageview, ios6, autolayout

我正在尝试使用具有自动布局的新 iOS 6 SDK 制作非常简单的元素。我有一个 ImageView 并将其嵌入到 ScrollView 中。（一切都使用 Interface Builder 构建）。.png 文件已设置，imageView 模式设置为“左上角”。

执行：

```
#import "ImaginariumViewController.h"

@interface ImaginariumViewController ()
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@end

@implementation ImaginariumViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.scrollView.contentSize = self.imageView.image.size;
    self.imageView.frame =
    CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height);
}

@end 
```

当我运行应用程序时，图像不会滚动。在关闭自动布局（使用支柱和弹簧）的情况下做同样的事情，我正在滚动。我想问题出在约束上。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-29T12:41:38.220

我刚刚在更新的教程中遇到了同样的问题。我尝试以编程方式删除约束、诅咒并将我的头撞到墙上——没有运气。

然而，大约 5 分钟前，我尝试了一些解决了我遇到的另一个问题的方法，并且，ta da！UIScrollView 又开始工作了！解决方案是将设置 UIScrollView contentSize 属性的旧代码移动到 viewDidAppear 的实现中，而不是 viewDidLoad：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.theScroller.contentSize=CGSizeMake(200.0,2000.0);
} 
```

我希望这可以帮助其他人遇到自动布局出现的一些头痛问题。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-13T22:32:26.233

自动布局一开始可能会让人很困惑。您实际上不想在任何地方设置滚动视图的 contentSize 。使用纯自动布局方法，滚动视图设置自己的内容大小。请参阅有关自动布局的部分和`UIScrollView`iOS [6 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)：

> 滚动视图的子视图上的约束必须导致要填充的大小，然后将其解释为滚动视图的内容大小。（这不应与用于自动布局的 intrinsicContentSize 方法混淆。）

请注意，这意味着对滚动视图的子视图的约束必须设置明确的宽度和高度，并且不能使用根据滚动视图的各个方面而变化的宽度。

这里的第二个错误是您将框架设置为`UIImageView`图像的大小。使用自动布局，这也是不必要的。`UIImageView`实际上有一个`intrinsicContentSize`是底层图像的大小。（要更改这一点，您应该设置具有高优先级的宽度和高度约束）这意味着使用自动布局将图像放置在滚动视图中并让它滚动正确的代码应该如下：

```
** nothing at all!!! ** 
```

但是您仍然需要注意一些事情，这可能会导致您的图像看起来不滚动，并且提示在上述发布说明中：

> 请注意，您可以通过在视图和滚动视图的子树之外的视图（例如滚动视图的超级视图）之间创建约束，使滚动视图的子视图看起来浮动（不滚动）在其他滚动内容之上。

即，如果您在界面构建器中设置约束并将图像视图约束到层次结构中滚动视图上方的视图，它将影响视图的滚动显示方式。疯狂的！

快乐的编码...

# java - Axis2：找不到 XmlSchema 类

> ID：12619787
> 
> 赞同：3
> 
> 时间：2012-09-27T10:57:58.333
> 
> 标签：java, classpath, axis2

我正在尝试使用 WSDL2Java 生成 Java 类。我运行最简单的示例并得到错误。

```
$ jar tvf XmlSchema-1.4.7.jar | grep org/apache/ws/commons/schema/XmlSchema.class
 14803 Wed Sep 22 17:28:44 CEST 2010 org/apache/ws/commons/schema/XmlSchema.class
$ ./bin/wsdl2java.sh -classpath $(echo lib/*.jar | tr ' ' ';') -uri HelloWorld.wsdl
 Using AXIS2_HOME: /C/Documents and Settings/ixos/axis2-1.6.2
 Using JAVA_HOME:  /C/Program Files/Java/jdk1.7.0_07/
Retrieving document at 'samples/wsdl/Axis2SampleDocLit.wsdl'.
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/ws/commons/schema/XmlSchema
        at org.apache.axis2.description.WSDLToAxisServiceBuilder.<init>(WSDLToAxisServiceBuilder.java:103)
        at org.apache.axis2.description.WSDL11ToAxisServiceBuilder.<init>(WSDL11ToAxisServiceBuilder.java:226)
        at org.apache.axis2.description.WSDL11ToAllAxisServicesBuilder.<init>(WSDL11ToAllAxisServicesBuilder.java:63)
        at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.<init>(CodeGenerationEngine.java:166)
        at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35)
        at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)
Caused by: java.lang.ClassNotFoundException: org.apache.ws.commons.schema.XmlSchema
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 6 more 
```

图书馆在路上，现在我被困住了，不知道下一步该做什么。谷歌一点帮助都没有……

**类路径**

```
lib/XmlSchema-1.4.7.jar;lib/activation-1.1.jar;lib/antlr-2.7.7.jar;lib/apache-mime4j-core-0.7.2.jar;lib/axiom-api-1.2.13.jar;lib/axiom-dom-1.2.13.jar;lib/axiom-
impl-1.2.13.jar;lib/axis2-adb-1.6.2.jar;lib/axis2-adb-codegen-1.6.2.jar;lib/axis2-ant-plugin-1.6.2.jar;lib/axis2-clustering-1.6.2.jar;lib/axis2-codegen-1.6.2.ja
r;lib/axis2-corba-1.6.2.jar;lib/axis2-fastinfoset-1.6.2.jar;lib/axis2-java2wsdl-1.6.2.jar;lib/axis2-jaxbri-1.6.2.jar;lib/axis2-jaxws-1.6.2.jar;lib/axis2-jibx-1.
6.2.jar;lib/axis2-json-1.6.2.jar;lib/axis2-kernel-1.6.2.jar;lib/axis2-metadata-1.6.2.jar;lib/axis2-mtompolicy-1.6.2.jar;lib/axis2-saaj-1.6.2.jar;lib/axis2-soapm
onitor-servlet-1.6.2.jar;lib/axis2-spring-1.6.2.jar;lib/axis2-transport-http-1.6.2.jar;lib/axis2-transport-local-1.6.2.jar;lib/axis2-xmlbeans-1.6.2.jar;lib/bcel
-5.1.jar;lib/commons-cli-1.2.jar;lib/commons-codec-1.3.jar;lib/commons-fileupload-1.2.jar;lib/commons-httpclient-3.1.jar;lib/commons-io-1.4.jar;lib/commons-logg
ing-1.1.1.jar;lib/geronimo-annotation_1.0_spec-1.1.jar;lib/geronimo-jaxws_2.2_spec-1.0.jar;lib/geronimo-jta_1.1_spec-1.1.jar;lib/geronimo-saaj_1.3_spec-1.0.1.ja
r;lib/geronimo-stax-api_1.0_spec-1.0.1.jar;lib/geronimo-ws-metadata_2.0_spec-1.1.2.jar;lib/httpcore-4.0.jar;lib/jalopy-1.5rc3.jar;lib/jaxb-api-2.1.jar;lib/jaxb-
impl-2.1.7.jar;lib/jaxb-xjc-2.1.7.jar;lib/jaxen-1.1.1.jar;lib/jaxws-tools-2.1.3.jar;lib/jettison-1.0-RC2.jar;lib/jibx-bind-1.2.jar;lib/jibx-run-1.2.jar;lib/jsr3
11-api-1.0.jar;lib/juli-6.0.16.jar;lib/log4j-1.2.15.jar;lib/mail-1.4.jar;lib/mex-1.6.2-impl.jar;lib/neethi-3.0.2.jar;lib/regexp-1.2.jar;lib/tribes-6.0.16.jar;li
b/woden-api-1.0M9.jar;lib/woden-impl-commons-1.0M9.jar;lib/woden-impl-dom-1.0M9.jar;lib/wsdl4j-1.6.2.jar;lib/wstx-asl-3.2.9.jar;lib/xalan-2.7.0.jar;lib/xml-reso
lver-1.2.jar;lib/xmlbeans-2.3.0.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:00:22.593

问题出在您的 jdk (1.7) 上：axis2 无法与之相处。下载jdk 1.6库并在你的eclipse中链接，然后重试。

# c# - WMP 声音在其他计算机上不起作用

> ID：12619793
> 
> 赞同：0
> 
> 时间：2012-09-27T10:58:19.733
> 
> 标签：c#, winforms, audio, windows-media-player, wmplib

我的项目是构建一个简单的游戏，现在我只制作了`Form1`带有 5 个按钮的主菜单。按钮上有一个`MouseClick`和`MouseEnter`，我有一个使用 WMP 方法（使用 WMPLib 和 axWMPLib）的背景音乐曲目。

我的问题是当我`bin/debug`把它放在一个`rar`文件上并把它交给我的朋友时，他们说他们听不到声音。我通过 WMP 版本 11 制作了该项目，所以我问他们的 WMP 版本是否为 11，他们说是的。我不知道为什么我在我的电脑上听到声音而他们却没有。

我试图给他们文件夹：

*   `bin\Release`
*   `bin\Debug`
*   `x86\Release`
*   `x86\Debug`

但他们仍然说他们听不到他们所有人的任何声音。

**编辑**

我所有的声音都在一个名为“声音”的文件夹中。我找到了一些细节，发现您需要将这些 WMP 声音嵌入到“资源”中。

那么我该怎么做，以及`Form1`加载时如何调用它们。不，以下代码不起作用：

```
BackGround.URL = Properties.Resources.Invincible; 
```

它说我无法转换`System.IO.UnmanagedMemoryStream`为`String`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:30:57.080

真诚地我不推荐你使用*WMP*，所以看看[SoundPlayer](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)类。但是我认为问题在于您没有为文件提供正确的位置。所以你可以做的是在你的应用程序文件夹中找到你的文件，获取它的位置并创建音乐文件的位置。

所以试试：

```
string musicName = Application.StartupPath + "music.mp3"; 
```

或者，如果您在应用程序路径中有*Sounds文件夹，请使用：*

```
string musicName = Application.StartupPath + "\\Sounds\\music.mp3"; 
```

否则，如果您在应用程序资源中插入音乐文件：

```
BackGround.URL = Properties.Resources.Invincible; 
```

不起作用，因为`BackGround.URL`它是字符串类型，而`Properties.Resources.Invincible`音乐文件流是。

我不知道是否使用*WMP*可以设置流从它可以播放文件的位置。尽管`SoundPlayer`我之前链接的类包含一个可以设置输入流的属性。你可以这样做：

```
SoundPlayer mySoundPlayer = new SoundPlayer();
mySoundPlayer.Stream = Properties.Resources.Invincible;
mySoundPlayer.Load();
mySounPlayer.Play(); //plays the Properties.Resources.Invincible sound 
```

# javascript - Javascript将元素放在坐标/百分比上

> ID：12619794
> 
> 赞同：0
> 
> 时间：2012-09-27T10:58:20.213
> 
> 标签：javascript, html, css, cordova

我正在开发一个智能手机应用程序，我试图在图像上放置一个“注释”或“标记”。我还没有一个潜在的解决方案，我是从这个类的东西开始的。

我正在使用[http://www.icenium.com/](http://www.icenium.com/)进行应用分发。

是否可以点击/单击某处并添加一个元素（div）以始终使用javascript在图像上的该点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:23:12.087

我想这一切都取决于元素的相对和绝对定位。然后你需要遍历所有图像并获取图像宽度和高度的变量，然后找到图像的顶部位置。然后，当您单击按钮时，您可以使用所有这些来定位您的“注释”。

这是 JS Fiddle，它应该更好地解释 - [http://jsfiddle.net/davemcmillan/6cEEy/](http://jsfiddle.net/davemcmillan/6cEEy/)

如果图像需要在图像标签中，则为宽度和高度。

干杯，

戴夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:23:20.143

如果我理解正确，您希望将某种工具提示放置在用户单击的确切位置。下面是一个如何使用 jQuery 做到这一点的简单示例：http: [//jsfiddle.net/QDJGc/](http://jsfiddle.net/QDJGc/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:09:27.877

Here's some code:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
        <script language="JavaScript">
            function point_it(event){
                pos_x = event.offsetX?(event.offsetX):event.pageX-document.getElementById("pointer_div").offsetLeft;
                pos_y = event.offsetY?(event.offsetY):event.pageY-document.getElementById("pointer_div").offsetTop;
                document.getElementById("imgcr").style.left = (pos_x-7)+"px" ;
                document.getElementById("imgcr").style.top = (pos_y-8)+"px" ;
                document.getElementById("imgcr").style.visibility = "visible" ;
                document.pointform.form_x.value = pos_x;
                document.pointform.form_y.value = pos_y;
            }
        </script>
  </head>
  <body>
    <form name="pointform" method="post">
        <div id="pointer_div" onclick="point_it(event)" style = "background-image:url('http://www.woofers.net/communities/6/004/008/640/226/images/4555331877.jpg');width:500px;height:333px;">
        <img src="http://galeriejeanclaudebergeron.ca/images/redDot.png" id="imgcr" style="position:relative;visibility:hidden;z-index:2;"></div>
        You pointed on x = <input type="text" name="form_x" size="4" /> - y = <input type="text" name="form_y" size="4" />
    </form>
  </body>
</html> 
```

Copy paste this into a new file and open it on your browser. In this example I move a div to the position, but you'll have to clone it if you want multiple points

Try it on [jsfiddle](http://jsfiddle.net/J7RCA/2/)

# jsp - 使用 servlet 将响应发送回发送者

> ID：12619796
> 
> 赞同：0
> 
> 时间：2012-09-27T10:58:26.890
> 
> 标签：jsp, servlets, servlet-filters

我有一个场景，各种 JSP 访问同一个 servlet。该 servlet 有一个过滤器，用于检查条件。基于该条件，必须将响应发送回请求来自的 jsp。servlet 必须执行相同的功能，而与发送请求的源无关。我如何编写通用代码以将响应重定向回源 jsp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:02:23.013

将 jsp 的名称作为请求参数传递给 servlet。

```
request.setParameter("param", "123.jsp"); (in jsp)
request.getParameter("param"); (in servlet) 
```

# perl - perl 中的内存管理

> ID：12619797
> 
> 赞同：5
> 
> 时间：2012-09-27T10:58:28.087
> 
> 标签：perl, memory-management, perl-module, perl-data-structures

我遇到了一个在 perl 中处理内存的奇怪问题。我正在一个使用相当大的哈希结构的 perl 应用程序中工作。我正在分配 has ref 来回对象。但最后似乎即使我正在释放对象和哈希，内存使用量也保持不变。

这是问题的一个示例：

```
 my $hash = {};
 .............
 this ds gets populated with a lot of data ...
 .......
 {
      my $obj = new Class("data"=>$hash);
 .......
 .......
 ......

 }

 #even undefing the $hash
 undef $hash;

 # I can expect some improvement in Memory Utilization, but its not happening 
```

我想我犯了一些非常基本的错误。有人可以建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T11:06:14.220

您无法真正将内存返回给操作系统。Perl 通常会保留它以便以后重新分配它，尽管它偶尔会进行垃圾收集。

请参阅[http://learn.perl.org/faq/perlfaq3.html#How-can-I-free-an-array-or-hash-so-my-program-shrinks-](http://learn.perl.org/faq/perlfaq3.html#How-can-I-free-an-array-or-hash-so-my-program-shrinks-)

和

[http://clokwork.net/2012/02/12/memory-management-in-perl/](http://clokwork.net/2012/02/12/memory-management-in-perl/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T13:10:53.300

一般来说，Perl 内存管理会做您需要做的事情，您不必担心。例如，为程序的其余部分分配大量内存有什么害处？可能没有。如果您的操作系统有内存不足的危险，Perl*将释放它。*

假设您有一些特殊情况，例如在后台不断运行的脚本，但偶尔需要执行内存密集型任务。您可以通过将其分成两个脚本来解决这个问题：background.pl 和 memory-intensive-task.pl。background.pl 将在需要时执行 memory-intensive-task.pl。当这个程序完成并退出时，内存将被释放。

# actionscript-3 - AS3，比较两个函数

> ID：12619801
> 
> 赞同：1
> 
> 时间：2012-09-27T10:58:44.527
> 
> 标签：actionscript-3

[这个问题](https://stackoverflow.com/questions/12543910/as3-compare-two-functions)没有帮助。

我正在将函数推送到一个数组上，该数组是一个回调列表，我可能想删除一个特定的函数。

我希望能够遍历数组并删除特定函数。像这样的东西：

```
 public function clearCallback(callName:String = null, callback:Function = null) :void{
        if(callName == null){
            //remove all callbacks
            this.callbackFuncs = {};
        }
        else if(this.callbackFuncs.hasOwnProperty(callName)){
            if(callback == null){
                //remove all callbacks for this API call
                this.callbackFuncs[callName] = [];
            }
            else{
                //remove specific callback function
                for(var i:Number = 0, iLen:Number = (this.callbackFuncs[callName] as Array).length; i < iLen; i ++){
                    if(this.callbackFuncs[callName][i] == callback){
                        this.callbackFuncs[callName][i] = null;
                    }
                }
            }
        }
    } 
```

这是我遇到问题的评论`//remove specific callback function`，我如何比较两个功能？

在上面的代码中，`callName`不是函数名，而是注册回调的 API 调用的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:42:12.833

您没有删除回调，只是将其设置为 null，请尝试以下操作：

```
public function clearCallback(callName:String = null, callback:Function = null) :void{
    if(callName == null){
        //remove all callbacks
        this.callbackFuncs = {};
    }
    else if(this.callbackFuncs.hasOwnProperty(callName)){
        if(callback == null){
            //remove all callbacks for this API call
            this.callbackFuncs[callName] = [];
        }
        else{
            //remove specific callback function
            for(var i:Number = (this.callbackFuncs[callName] as Array).length-1; i >=0; i --){
                if(this.callbackFuncs[callName][i] == callback){
                    this.callbackFuncs[callName].splice(i,1);
                }
            }
        }
    }
} 
```

希望有帮助。

# javascript - 在发送之前修改 jQuery 请求标头

> ID：12619805
> 
> 赞同：2
> 
> 时间：2012-09-27T10:59:05.087
> 
> 标签：javascript, jquery, ajax

我有一个单页 js 应用程序，我正在向包含日志的服务器发送自定义标头，但我需要控制这些标头的大小，因为我的服务器不会接受大于 8k 的请求。

到目前为止，我的解决方案是拦截来自我的应用程序的所有传出 ajax 请求。

我正在使用[jQuery Global Ajax Events](http://docs.jquery.com/Ajax_Events)，特别`ajaxSend`是拦截所有请求。我不能使用`beforeSend`，因为那是本地事件。

我似乎无法访问回调中的请求标头。如果它太大，我需要阅读所有请求的标头并减少日志标头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:01:40.737

您想`beforeSend`在发送请求之前使用它来修改请求。这一切都包含在您链接到的文档中。

全局`ajaxSend`事件不会帮助您篡改请求。您可以获得的最接近 global 的是 call [`ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)，传递一个`beforeSend`选项作为所有后续 ajax 调用的默认值。

* * *

似乎没有从`XMLHttpRequest`对象获取请求标头的简单方法。但是，由于我假设您正在自己设置日志记录标头，因此您可以挂钩这些标头的设置，并存储对它们的可访问引用：

```
XMLHttpRequest.prototype.readableHeaders = {};
XMLHttpRequest.prototype.proxiedSetRequestHeader = XMLHttpRequest.prototype.setRequestHeader;
XMLHttpRequest.prototype.setRequestHeader = function(header, value) {
    this.proxiedSetRequestHeader(header, value);
    this.readableHeaders[header] = value;
}; 
```

通过这种方式，您应该能够直接检查`jqXHR.readableHeaders`对象中的特定日志记录头 in ，并在需要时再次`beforeSend`调用以截断字符串。`setRequestHeader`

要检索标头，您需要从 jqXHR 对象访问 XMLHttpRequest 的底层实例。使用`xhr()`函数检索实例。

```
$.ajaxSetup({
  beforeSend: function (jqXHR, settings) {
    console.log( settings.xhr().readableHeaders );
  }
}); 
```

# jobs - 春季批| 在工作中优雅地终止工作

> ID：12619811
> 
> 赞同：5
> 
> 时间：2012-09-27T10:59:13.243
> 
> 标签：jobs, spring-batch

在启动工作之后，在之前的工作中——在某些情况下，我们希望优雅地终止工作（即根本不运行工作，但既不抱怨，也不例外）。当前执行此操作的方法看起来像调用 jobExecution.stop - 但是，这会导致 JobInteruptedException 进一步导致 logger.error 调用。

还有其他更好的程序化替代方案（无需人工干预）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:54:16.523

您可以阅读：

*   [5.3.3 节配置停止](http://docs.spring.io/spring-batch/reference/html/configureStep.html#configuringForStop)和
*   [第 5.3.4 节。程序化流程决策](http://docs.spring.io/spring-batch/reference/html/configureStep.html#programmaticFlowDecisions)。

只需根据条件为您的第一步引入一个**结束元素：**

> 'end' 元素指示 Job 以 COMPLETED 的 BatchStatus 停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-16T12:00:15.767

我解决了在我的“作业前”侦听器中添加标志 boolean **executeTheJob**的问题，当我不想执行作业时将其设置为 false。

然后我在我的**firstStep**中使用以下配置处理它：

```
<step id="firstStep" >
    <tasklet ref="myFirstTasklet"/>
    <stop on="STOPPED" restart="firstStep" />
    <next on="COMPLETED" to="nextStep"/>
</step> 
```

在我的第一个 tasklet 开始时，我有这个：

```
if (executeTheJob == false) {
    contribution.setExitStatus(ExitStatus.STOPPED);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T10:12:03.300

stop() 指令只有在事务提交成功时才会被激活。如果你所有的块都回滚你的工作不会停止。

我做了这个解决方法：创建一个 ChunkListener 并在方法中`afterChunkError(ChunkContext chunkCtx)`放置：

```
StepExecution stepExecution = chunkCtx.getStepContext().getStepExecution();
JobExecution jobExecution = jobExplorer.getJobExecution(stepExecution.getJobExecutionId());

if (jobExecution.getStatus().equals(BatchStatus.STOPPING)) {
    stepExecution.setTerminateOnly();
} 
```

这将强制`"controlled"`停止。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-15T22:44:58.393

不要调用`stop()`作业执行，而是尝试通过[JobOperator](http://docs.spring.io/spring-batch/reference/htmlsingle#JobOperator)发出信号，如[停止作业中所示](http://docs.spring.io/spring-batch/trunk/reference/htmlsingle#stoppingAJob)

# java - 如何在 DWR 中设置 ajaxFilter？

> ID：12619815
> 
> 赞同：0
> 
> 时间：2012-09-27T10:59:22.953
> 
> 标签：java, dwr

我创建了一个 DWR ajaxfilter，但不确定如何使用 Spring 对其进行配置。DWR 版本是 2.0.1，我希望将其配置为全局过滤器，因此当会话过期时，我可以在客户端捕获此异常。

包 com.gbtags;

导入 org.directwebremoting.AjaxFilter；导入 org.directwebremoting.AjaxFilterChain；导入 org.directwebremoting.WebContextFactory；导入 org.directwebremoting.extend.LoginRequiredException；

导入java.lang.reflect.Method；

public class DWRSessionFilter 实现 AjaxFilter { public Object doFilter(Object obj, Method method, Object[] params, AjaxFilterChain chain) throws Exception {

```
 //Check if session has timedout/invalidated
    if( WebContextFactory.get().getSession( false ) == null ) {
        System.out.println("session expired");
        //Throw an exception
        throw new LoginRequiredException( "This operation requires login." );

    }        

    return chain.doFilter(obj, method, params);
} 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T07:14:31.107

将过滤器添加到 dwr.xml 如下：

# java - 标签之间的java xml解析

> ID：12619816
> 
> 赞同：0
> 
> 时间：2012-09-27T10:59:30.957
> 
> 标签：java, xml, parsing

我想做的是通过java解析xml。例如，我只想要每个标签中的一段文本。

xml 示例

```
<data>\nSome Text :\n\MY Spectre around me night and day. Some More: Like a wild beast
guards my way.</data>

<data>\nSome Text :\n\Cruelty has a human heart. Some More: And Jealousy a human face
</data> 
```

到目前为止我有这个

```
NodeList ageList = firstItemElement.getElementsByTagName("data");
Element ageElement =(Element)ageList.item(0);
NodeList textAgeList = ageElement.getChildNodes();
out.write("Data : " + ((Node)textAgeList.item(0)).getNodeValue().trim()); 
```

我试图只得到“一些更多：.....”部分我不想要整个标签也我试图摆脱所有\n

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:08:11.753

如果您不限于标准 DOM API，您可以尝试使用包装标准 DOM 的[jOOX](http://code.google.com/p/joox/)。然后，您的示例将转换为：

```
// Use jOOX's jquery-like API to find elements and their text content
for (String string : $(firstItemElement).find("data").texts()) {

  // Use standard String methods to replace content
  System.out.println(string.replace("\\n", ""));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:07:38.237

我将获取所有元素文本并使用正则表达式来捕获相关部分。

# c# - 你能指定一个 tcp 套接字连接来使用代理吗？

> ID：12619818
> 
> 赞同：0
> 
> 时间：2012-09-27T10:59:37.303
> 
> 标签：c#, tcpsocket

为这个问题的简短道歉......我确信这是一个简单的是/否类型的场景，只是我无法确定是/否。

您可以以**编程**方式为 tcp 套接字连接指定代理吗？还是它使用系统代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:01:45.790

当然可以：不是连接到服务器，而是连接到代理。您将不得不使用代理协议而不是服务器协议来传输数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:01:43.897

这取决于应用程序和您的系统。如果您有像 Proxify 这样的代理，那么您可以指定让所有连接都使用该代理。

否则，应用程序需要能够使用代理，然后您需要告诉它使用代理。

需要为小型 TCP 客户端程序提供代理地址，并对其进行编码以使用代理协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:03:32.047

不，代理有一个地址，您可以连接到该地址并向其发送信息。接收信息的代理随后会将其发送到其他地方。该系统只是连接到一个网络位置，该位置上的程序是否表现得像一个它不知道的代理。

# google-maps - 批量加载谷歌地图markerclusterer

> ID：12619824
> 
> 赞同：0
> 
> 时间：2012-09-27T10:59:52.527
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, markerclusterer

我使用 Google Maps Marker Clusterer 构建我的 Google Maps，它适用于较小的数据集（最多几千个）。

尽管当数据集非常大时，即 10K，浏览器会立即报告脚本没有响应，用户必须选择让脚本运行。我知道一个 js 文件需要做很多处理。有没有办法批量加载结果，这样脚本就不会被数据淹没并返回无响应？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:28:14.550

将您的数组分成更小的块，使用 setTimeout 将这些块添加到 MarkerClusterer 中。

# iphone - 自定义 TableViewCell imageView 框架

> ID：12619827
> 
> 赞同：0
> 
> 时间：2012-09-27T10:59:58.443
> 
> 标签：iphone, objective-c, ios, uitableview

我的自定义 TableViewCell 在情节提要中定义了一个带有 frame(195, 16; 95,25) 的 imageView

![在此处输入图像描述](../Images/06f22ffc94bfb96070e8ec3189971d1b.png)

但是当我尝试在运行时访问框架时，它会为所有出口返回 (0, 58, 0, 0)，不仅是 imageView，还有 UILabels。

```
//CustomTableViewCell subclass
- (void)layoutSubviews{
    [super layoutSubviews];
    NSLog(@"%@", self.fiveStartForeground);
} 
```

这来自控制台：

```
2012-09-27 18:57:46.563 200Pomodoros[11395:c07] <UIImageView: 0x7599640; frame = (0 58; 0 0); clipsToBounds = YES; opaque = NO; autoresize = TM+BM; layer = <CALayer: 0x759a0d0>> 
```

但过了一会儿，它又恢复正常了：

```
2012-09-27 18:58:48.025 200Pomodoros[11395:c07] <UIImageView: 0x7599640; frame = (195.5 16; 94.5 25); clipsToBounds = YES; opaque = NO; autoresize = TM+BM; layer = <CALayer: 0x759a0d0>> 
```

我需要更改图像框架（宽度）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

所以它看起来像是一个 5 开始评级的事情。但是我得到的框架是错误的。(0, 58, 0, 0)...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:25:25.233

这是适用于 iOS6 的愚蠢的自动布局...禁用它，你就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:02:35.697

会不会是第一次 UI 没有完全设置好，所以你要求它的值太快了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:26:27.720

你可以使用喜欢..

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"Cell";

    CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

    cell = [[[CustomCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];

}
    cell.YourImageView.frame = CGRectMake(195.5, 16, 94.5, 25); // Or what you want to set 
```

我希望这对你有用..

# javascript - 余烬视图在 mouseDown 上重复

> ID：12619829
> 
> 赞同：1
> 
> 时间：2012-09-27T11:00:06.753
> 
> 标签：javascript, ember.js

我正在使用 Ember 制作一个网络应用程序，您可以在其中查看体育比赛的不同结果。锦标赛视图由具有 2 个插槽的预赛组成，它们都具有“运动员”属性。当你点击一个位置时，运动员进入第二轮。

这是我的看法：

```
App.SlotView = Em.View.extend({
    heat:null,
    athlete:null,
    tagName:"span",
    mouseDown : function(){

            //Here's the problem: "this" isn't the original slot, but a new slot which has the original slot in its _context. I'm fixing the error with this:
            var target = this._context ? this._context : this;

            //Move the athlete forward etc...
            //....

}}) 
```

以下是我创建新插槽的方法：

```
//Inside a loop
slot = App.SlotView.create({
        athlete:seed,
        heat:heat,
        round:1,
        classNames:['slot-view']
    });
//slot is added to a heatview, which is added to App.round1heats 
```

这是模板

```
 <script type="text/x-handlebars">

<div class="row span2">
  {{#each App.round1heats}}
    {{#view App.HeatView class="clearfix heat round1"}}

      {{#each slots}}
        <div class="athlete">
        {{#view App.SlotView}}
          {{athlete.name}}
        {{/view}}
        </div>
      {{/each}}

    {{/view}}
  {{/each}}
</div>
</script> 
```

还有一个问题是我无法通过 mouseDown 函数中的“this”或“this._context”访问视图元素。element 和 elementId -properties 在两者中都未定义。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:52:29.880

从您的问题中，我只了解了您遇到的一个问题，即从`mouseDown`函数内部访问元素和 elementId。

尝试`this.get('element')`并`this.get('elementId')`

# iphone - 仅加载纹理图像的一部分

> ID：12619844
> 
> 赞同：0
> 
> 时间：2012-09-27T11:00:56.423
> 
> 标签：iphone, opengl-es, opengl-es-2.0

我想通过使用纹理精灵/图集为我的游戏中的一些角色设置动画。

基本思想是始终只加载大图集图像的一部分，即现在应该用作角色纹理的部分。这可能吗？还是我的思维过程错了？

以下是我加载整个纹理的代码。使用 row 和 col 参数，我想指定现在要用作我的纹理的图集的哪一部分。

```
- (GLuint) loadTexture:(NSString*)fileName row:(int)row col:(int)col
{
    NSLog(@"Loading image %@", fileName);
    NSLog(@"Texture Part: %d, %d", row, col);
    CGImageRef spriteImage = [UIImage imageNamed:fileName].CGImage;
    if (!spriteImage) {
        NSLog(@"Failed to load image %@", fileName);
        exit(1);
    }

    size_t img_width = CGImageGetWidth(spriteImage);
    size_t img_height = CGImageGetHeight(spriteImage);

    GLubyte * spriteData = (GLubyte *) calloc(img_width * img_height * 4, sizeof(GLubyte));

    CGContextRef spriteContext = CGBitmapContextCreate(spriteData, img_width, img_height, 8, img_width*4, 
                                                   CGImageGetColorSpace(spriteImage), kCGImageAlphaPremultipliedLast);        

    CGContextDrawImage(spriteContext, CGRectMake(0, 0, img_width, img_height), spriteImage);

    CGContextRelease(spriteContext);

    GLuint texName;
    glGenTextures(1, &texName);
    glBindTexture(GL_TEXTURE_2D, texName);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, img_width, img_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, spriteData);

    free(spriteData);        
    NSLog(@"Texture successfully loaded!");

    return texName; 
} 
```

现在我只能用这段代码加载整个图像，所以我只能使用原始图像而不是它的一小部分来显示动画的一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:28:49.880

[markturnip](https://stackoverflow.com/a/12620035/617579)是正确的，但您也可以尝试保持纹理坐标相同并在着色器中使用 textureOffset 来读取正确的列和行。

[http://www.khronos.org/opengles/sdk/docs/manglsl/xhtml/textureOffset.xml](http://www.khronos.org/opengles/sdk/docs/manglsl/xhtml/textureOffset.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:11:49.067

观看并查看 71Squared 的一些示例： [http ://www.71squared.com/2009/04/iphone-game-programming-tutorial-5-animation-class/](http://www.71squared.com/2009/04/iphone-game-programming-tutorial-5-animation-class/)

加载整个纹理是正确的，但是在绘制时，您会将纹理顶点设置为所需列和行的顶点。

举个简单的例子：

```
GLfloat textureVertices[] = {
    1.0f, 0.0f, //br
    0.0f, 0.0f, //bl
    1.0f, 1.0f, //tr
    0.0f, 1.0f, //tl
};
glVertexAttribPointer(attributeTextureCoord, 2, GL_FLOAT, 0, 0, textureVertices); 
```

# ajax - IndexedDB 的 Json 字符编码

> ID：12619846
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:01:22.373
> 
> 标签：ajax, json, html, asp-classic, indexeddb

这是我的 ASP 网络服务，它查询数据库并提供 Json 文件/对象：

```
<!--#include file="JSON_2.0.4.asp"-->
<!--#include file="JSON_UTIL_0.1.1.asp"-->
<%
Response.CodePage = 28591 
Response.CharSet = "ISO-8859-1"

'response.write("ç ã â é À á") -> characters are written correctly with or without the two lines above but not the json feed

Set Connection = Server.CreateObject("ADODB.Connection")
Set Recordset = Server.CreateObject("ADODB.Recordset")  
Connection.Open "Provider=sqloledb;SERVER=localhost;DATABASE=DB;UID=user;PWD=PASS;" 
QueryToJSON(Connection,"select field1, field2, field3, field4, FROM table").flush
%> 
```

响应文本：

> [{"col1":"value1","col2":"value1","col3":"value1"}, {"col1":"value2","col2":"value2","col3":"value2 "}, {"col1":"value3","col2":"value3","col3":"value3"}]

响应 json 未正确编码替换标点符号“\u00E9”，并在值的中间和末尾添加了大量空格。当我直接在浏览器中打开这个文件时，除了被替换的字符外，它看起来还不错，但是当我将它作为 xmlhttp.responseText 提供给 IndexedDB 时，它出现在 console.log 中，有很多空格和换行符抛出一个“ DataError：提供给操作的数据不符合要求。” 错误。我认为空格和换行符可能是由替换字符引起的，例如“\n”

更新：

我已经尝试**`"xhr.setRequestHeader( "Content-Type", "application/json", "Charset=ISO-8859-1");"`**在我的 ajax 请求中使用，但它也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:21:17.240

刚刚想通了！对数据库的查询正在检索末尾带有空格的字段，这些字段在程序运行时以某种方式递增，只需将查询行更改为：

```
 QueryToJSON(Connection,"select rtrim(field1) field1, rtrim(field2) field2, rtrim(field3) field3, rtrim(field4) field4 FROM table").flush 
```

现在响应很干净并且已经接受了正确的字符集。

# iphone - 当 URL 字符串带有空格参数时，找不到 NSURL？

> ID：12619847
> 
> 赞同：0
> 
> 时间：2012-09-27T11:01:22.500
> 
> 标签：iphone, objective-c, nsstring, nsurl

我使用了 UserName=raj 和 pwd=space，但是 NSURL 中没有使用该 url 字符串。

```
NSString *urlstr = [NSString stringWithFormat:@"http://www.test.com/data/image/sd.php?Uname=raj&password=Space"];

NSURL *Url =  [NSURL URLWithString:urlstr]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:56:27.387

如果您从文本字段中获取值，请尝试以下操作：

```
NSString *urlstr = [NSString stringWithFormat:@"http://www.test.com/data/image/sd.php?Uname=%@&password=%@",[usernameField.text stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding],[passwordField.text stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:10:23.167

尝试这个 ：-

```
NSString *urlstr = [NSString stringWithFormat:@"http://www.test.com/data/image/sd.php?Uname=raj&password=Space"];
NSURL *url = [[NSURL alloc] initWithString:
[urlstr stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:11:30.637

```
NSURL *url = [NSURL URLWithString:@"http://www.test.com/data/image/sd.php?Uname=raj&password=Space"]; 
```

# c# - c#如何计算每个列表框项的值？

> ID：12619854
> 
> 赞同：0
> 
> 时间：2012-09-27T11:01:38.523
> 
> 标签：c#, textbox, listbox, count

在我的 form1 中，我有一个包含项目列表的列表框，将它们称为表单。在同一个表单上，我有 12 个文本框，每个表单最多可以分配 12 个报告，这些报告将显示在文本框中。

我如何浏览每个列表框项目（表单），根据文本框检查已分配给它的报告数量，并在列表框中的 homeform 旁边显示计数。

我已经编写了下面的方法，一旦我的表单加载，它就会被调用，但是我正在使用数据库来计算计数，但是计数让我总计而不是每个计数，有没有办法改进这个或更好的解决方案？

```
 public void countValues()
    {
        int count = 0;

        foreach (var s in listBox1.Items)
        {
            var forms = s;

            var HomeForms = (FormItems)forms;

            foreach (DataSet1.xAnalysisUsageRow anuse in myDataSet.xAnalysisUsage)
            {
                var defNull = anuse.Isxanu_DefaultNull();
                if (!defNull)
                {
                    if (HomeForms.types.xlib_ID == anuse.xanu_Use)
                    {
                        count++;

                        var id = HomeForms.types.xlib_ID;
                        var library = myDataSet.xspGetAnalysisUsageTypes.FindByxlib_ID(id);
                        var libName = library.xlib_Desc;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:22:43.270

您可以在后端代码中使用 .length，返回列表中的项目数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:13:39.967

我认为你的 count 变量应该在第一个 foreach 循环下初始化。

# java - 多台服务器加密解密

> ID：12619862
> 
> 赞同：1
> 
> 时间：2012-09-27T11:02:01.157
> 
> 标签：java, public-key-encryption

我们有涉及多台服务器的系统设置。例如，当用户登录到应用程序时，访问管理服务器执行身份验证部分，成功登录后，它会将 HTTP 请求转发到 Web 服务器，然后再将其转发到应用程序服务器。

现在的需求是，在认证过程中`AM server`，我们需要在cookies中写入一些数据，将这些cookies添加到被转发到应用服务器的HTTP请求中。部署在 App Server 上的应用程序将读取这些 cookie 并使用该值。

我已经成功完成并测试了这一点。但实际上 cookie 中的数据需要采用加密格式。因此，AM 服务器应该加密数据，而 App 服务器应该解密数据以使用它。我`JCEKS keystore`在 AM 服务器上创建了一个，使用 keytool 命令向它添加了一个加密密钥。然后在我在 AM 服务器上编写的自定义类中，我使用 Cipher 通过`AES-128`算法加密数据。这已成功完成。
我还在`JCEKS keystor`我的应用服务器上创建了另一个，使用 keytool 命令添加了一个加密密钥。然后我从 AM 服务器导出证书`keystore`并将其导入到`keystore`App 服务器中，该服务器`TrustedCert`在 App 服务器的`keystore`. 但是，当我也使用 Cipher 和 AES-128 解密 App 服务器上的数据时，我得到了异常：

```
javax.crypto.BadPaddingException: Given final block not properly padded 
```

我的密钥库设置中一定遗漏了一些东西。请提供一些有关如何执行此操作的指导。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:16:00.240

我得到了解决方案。我做错的是我在两个密钥库中都生成了加密密钥。正确的方法是在一个密钥库中生成一个密钥并将其导出-导入到另一个密钥库。我无法使用 keytool 做到这一点，所以我使用了 keytool IUI，很棒的工具！！！

# c# - Linq 计数（条件）未按预期工作

> ID：12619864
> 
> 赞同：2
> 
> 时间：2012-09-27T11:02:03.603
> 
> 标签：c#, linq-to-sql

在以下 Linq 查询中，生成的 SQL 忽略 Count() 中的 c.val != null 检查

```
from t1 in table1
join t2 in table2 on t1.col1 equals t2.col1
where t1.col1 = 123 && t3.Count(c => c.val != null && c.col1 == t1.col1) == 0
select new {t1.col1, t2.col2, t1.col2} 
```

它被翻译成

```
SELECT [t0].[col1], [t1].[col2], [t0].[col2]
FROM [t1] AS [t0]
INNER JOIN [t2] AS [t1] ON [t0].[col1] = [t1].[col1]
WHERE ([t0].[col1] = @p0) AND (((
    SELECT COUNT(*)
    FROM [t3] AS [t2]
    WHERE [t2].[col1] = [t0].[col1]
    )) = @p1) 
```

而当只写以下内容时

```
t.Count(c => c.ID != null && t.No > 10) 
```

它被翻译成

```
SELECT COUNT(*) AS [value]
FROM [t] AS [t0]
WHERE ([t0].[ID] IS NOT NULL) AND ([t0].[No] > @p0) 
```

这里它没有跳过 c.ID != null 检查。为什么会出现这种行为？在 where 子句中使用 Count 是否有任何限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:22:07.857

这是因为优化。在 sql is null=null false 中，这解释了为什么您不需要在第一个表达式中进行额外的 is null 检查（Linq 中的智能重写）。第二个表达式的转换不使用 == ，因此使用了不同的优化。在这种情况下，解析器没有看到 ([t0].[ID] IS NOT NULL) 没有在 de sql 表达式中添加任何值。

# virtualization - 任何可以将物理分区用作虚拟硬盘的虚拟PC软件？

> ID：12619869
> 
> 赞同：1
> 
> 时间：2012-09-27T11:02:16.257
> 
> 标签：virtualization, virtualenv, virtual-machine, virtualhost, vmware-server

我需要知道是否有任何适用于 Windows 的 pc 虚拟化软件，它能够为虚拟机使用物理分区或驱动器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:06:21.943

VMware Workstation 是该市场的领先产品[http://www.vmware.com/products/workstation/overview.html](http://www.vmware.com/products/workstation/overview.html)

# api - 2Checkout API - 定期付款是否有与之关联的定期 ID？

> ID：12619870
> 
> 赞同：3
> 
> 时间：2012-09-27T11:02:17.843
> 
> 标签：api, recurring, 2checkout

我们通常对 2Checkouts URL 进行“sale/detail_sale”API 调用，以获取特定交易/销售的详细信息。

假设销售是经常性的。该特定交易/销售是否具有与之关联的 recurring_id（或 subscription_id）。

就像在 PayPal 中一样：如果交易是循环类型的，那么它有一个相关的订阅 ID（如 I-XXXXXXXXXX）。与该订阅相关的所有事务都将具有相同的订阅 ID，但它们的事务 ID 不同。订阅 ID 的作用类似于父 ID。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T18:48:35.863

2Checkout 经常性销售没有任何额外的经常性标识符。所有 2Checkout 销售都有一个 sale_id、invoice_id 和至少一个 lineitem_id。经常性销售会在每个经常性分期付款中创建一张新发票，因此[sales/detail_sale](https://www.2checkout.com/documentation/api/sales-detail_sale/) API 调用可能会返回多张发票。所以 sale_id 可以有很多 invoice_id，每个 invoice_id 可以有很多 linitems_id。

如果您需要停止销售的定期计费，您需要停止每个活动的定期行项目的定期计费。lineitem_id 在定期销售的每张新发票上都会更改，因此在进行[stop_lineitem_recurring](https://www.2checkout.com/documentation/api/sales-stop_lineitem_recurring/)调用时，有必要使用最近开票的发票中的 lineitem_ids，如[2checkout-php-library](https://github.com/craigchristenson/2checkout-php)中所示。

# mysql - 将 .sql 文件导入 MySQL 是否会覆盖现有数据库或附加到它？

> ID：12619871
> 
> 赞同：30
> 
> 时间：2012-09-27T11:02:21.027
> 
> 标签：mysql

在某些情况下，我不得不执行 mysqldump 来生成 .sql 文件。在对 MySQL 数据库进行一些更改以进行测试和开发后，我想将其恢复到以前的状态。所以我导入了 .sql 文件。过去我删除了数据库并重新创建了它，然后进行了导入。那有必要吗？从 .sql 文件导入会覆盖并完全重新创建数据库及其表，还是附加到它？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-27T11:03:19.153

追加到它，除非导入文件专门以不同方式处理表。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-27T11:05:49.647

这取决于 SQL 文件包含哪些命令。感兴趣的命令是：

```
DROP DATABASE xxx;            # will delete the whole database
DROP TABLE xxx;               # unconditionally deletes a table
CREATE TABLE [IF NOT EXISTS]  # if IF NOT EXISTS adds the table, does nothing if exists
                              # otherwise, it adds the table, gives an error if it exists 
```

# javascript - HTML5 块级元素在带有 HTML5Shiv 或 Modernizr 的 IE 中失败

> ID：12619875
> 
> 赞同：4
> 
> 时间：2012-09-27T11:02:38.543
> 
> 标签：javascript, html, internet-explorer-8, html5shiv

我有 HTML5Shiv/Modernizr（我都尝试过以防万一），以及分配`display: block`给 HTML5 元素的 normalize`section`和`article`.

在 IE8 中，`display: block`似乎没有正确分配给 HTML5 元素。

我已经在 J​​avaScript 上做了一个测试控制台日志以确保它被调用，并且还尝试在达到选择器限制的情况下删除一些 CSS，并移动/重新排序 CSS 和 JS。

还有其他问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:16:13.087

问题解决了。

结果发现其中一个导航元素有一个奇怪的属性 xmlns="http://www.w3.org/1999/html" 分配给它，它完全抛出了 html5 shiv 脚本并阻止它处理该行以下的任何内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T11:21:46.780

正如 Fabrizio 所说，唯一真正的问题可能是您没有在任何其他脚本或 HTML 之前加载 modenizr。它应该加载在头部，而您的其他脚本应该在页脚中。

也许下载样板框架只是为了看看它应该如何完成 - [http://html5boilerplate.com](http://html5boilerplate.com)

问候，

戴夫

# java - Spring MVC 表单动作元素中不显示静态常量的值

> ID：12619878
> 
> 赞同：4
> 
> 时间：2012-09-27T11:02:46.073
> 
> 标签：java, spring, jsp, spring-mvc

我有我的`Utility`类的静态导入：

```
<%@ page import="static com.groupgti.webclient.util.MappingUtils.*" %> 
```

我在这个类中有一些常量：

```
public static final String HTM = ".htm";

public static final String SECURE_REQUEST_MAPPING = "/secure/";

public static final String CANDIDATE_DETAILS_DATA_FORM_MAPPING = "assessments/candidate-details-data"; 
```

我有一个 Spring MVC 表单：

```
<form:form cssClass="springForm"
        action="${pageContext.servletContext.contextPath}<%=SECURE_REQUEST_MAPPING + CANDIDATE_DETAILS_DATA_FORM_MAPPING + HTM%>"
        commandName="assessments/candidate-details-request">
</form:form> 
```

为什么当我这样使用时：

```
<a href="${pageContext.servletContext.contextPath}<%=SECURE_REQUEST_MAPPING + CANDIDATE_DETAILS_DATA_FORM_MAPPING + HTM%>">
   some text
</a> 
```

属性值`href`生成正确，在 spring 表单`action`属性中 HTML 代码是这样的：`/webclient<%=SECURE_REQUEST_MAPPING + CANDIDATE_DETAILS_DATA_FORM_MAPPING + HTM%>`. 未显示这些常数的值。为什么会这样，我应该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:39:09.737

由于在工作中我们不允许在 JSP 中内联 Java，所以我使用自定义标签在 JSP 中“导入”静态最终类字段。`UseConstantsTag`它使用 Spring Framework 的 utils 和通用支持从废弃的 Jakarta 'unstandard' custom tag library API略微修改。（目前我什至找不到原始代码；这里是[原始 API 文档](http://jakarta.apache.org/taglibs/sandbox/doc/unstandard-doc/javadoc/org/apache/taglibs/unstandard/UseConstantsTag.html)。）

这个标签基本上暴露了所有静态最终字段（通过反射），`Map`它们可以很容易地在 JSP 中使用。**[看看这个 gist 中的完整代码](https://gist.github.com/3793543)**，本质是：

```
/**
 * Tag that exposes all of the public constants in a class as a map stored in
 * a scoped attribute. The scope may be specified, but defaults to page scope.
 * <p/>
 * Based on abandoned project taglibs-unstandard, specifically
 * {@code org.apache.taglibs.unstandard.UseConstantsTag}. Uses Spring's TagUtils
 * and ClassUtils instead of utils bundled in taglibs-unstandard, plus it
 * supports generics.
 * 
 * @see http://jakarta.apache.org/taglibs/unstandard
 */
public class UseConstantsTag extends TagSupport {
  private static final long serialVersionUID = 1L;

  /**
   * The fully qualified name of the Java class for which constants are to be
   * exposed.
   */
  private String className;

  /**
   * The scope in which the exposed map will be stored.
   */
  private String scope = TagUtils.SCOPE_PAGE;

  /**
   * The name of the scoped attribute in which the constants will be stored.
   */
  private String var;

  /**
   * Construct an instance of this class.
   */
  public UseConstantsTag() {
  }

  /**
   * Retrieve the name of the class for which constants are to be exposed.
   * 
   * @return The fully qualified class name.
   */
  public String getClassName() {
    return className;
  }

  /**
   * Set the name of the class for which constants are to be exposed.
   * 
   * @param className The fully qualified class name.
   */
  public void setClassName(final String className) {
    this.className = className;
  }

  /**
   * Retrieve the scope in which the exposed map will be stored.
   * 
   * @return The name of the scope.
   */
  public String getScope() {
    return scope;
  }

  /**
   * Set the scope in which the exposed map will be stored.
   * 
   * @param scope The name of the scope.
   */
  public void setScope(final String scope) {
    Assert.notNull(scope, "Scope cannot be null");
    this.scope = scope;
  }

  /**
   * Retrieve the variable name in which the exposed map will be stored.
   * 
   * @return The name of the variable.
   */
  public String getVar() {
    return var;
  }

  /**
   * Set the variable name in which the exposed map will be stored.
   * 
   * @param var The name of the variable.
   */
  public void setVar(final String var) {
    this.var = var;
  }

  /**
   * Expose the constants for a class as a scoped attribute.
   * 
   * @return A constant that identifies what the container should do next.
   * 
   * @throws JspException if a fatal error occurs.
   */
  @Override
  public int doStartTag() throws JspException {
    if (className != null && var != null) {
      Map<String, Object> constants;
      try {
        constants = ClassReflectionUtils.getClassConstants(className);
      } catch (final ClassNotFoundException e) {
        throw new JspTagException("Class not found: " + className, e);
      } catch (final IllegalArgumentException e) {
        throw new JspTagException("Illegal argument: " + className, e);
      } catch (final IllegalAccessException e) {
        throw new JspTagException("Illegal access: " + className, e);
      }
      if (!constants.isEmpty()) {
        pageContext.setAttribute(var, constants, TagUtils.getScope(scope));
      }
    }

    return SKIP_BODY;
  }

  /**
   * Free up any resources being used by this tag handler.
   */
  @Override
  public void release() {
    super.release();
    className = null;
    scope = null;
    var = null;
  }

} 
```

和

```
/**
 * Utility class for working with Class instances.
 */
final class ClassReflectionUtils {

  /**
   * Private constructor to prevent instantiation of this class.
   */
  private ClassReflectionUtils() {
  }

  /**
   * Creates and returns a map of the names of public static final constants to
   * their values, for the specified class.
   * 
   * @param className The fully qualified name of the class for which the
   *                  constants should be determined
   * 
   * @return {@code Map<String, Object>} from constant names to values
   * @throws ClassNotFoundException
   * @throws IllegalAccessException
   * @throws IllegalArgumentException
   */
  public static Map<String, Object> getClassConstants(final String className)
      throws ClassNotFoundException, IllegalArgumentException,
      IllegalAccessException {
    final Map<String, Object> constants = new HashMap<String, Object>();
    final Class<?> clazz = ClassUtils.forName(className,
        ClassUtils.getDefaultClassLoader());

    for (final Field field : clazz.getFields()) {
      final int modifiers = field.getModifiers();
      if (Modifier.isPublic(modifiers) && Modifier.isStatic(modifiers)
          && Modifier.isFinal(modifiers)) {
        // null as argument because it's ignored when field is static
        final Object value = field.get(null);
        if (value != null) {
          constants.put(field.getName(), value);
        }
      }
    }
    return constants;
  }

} 
```

标签定义：

```
<tag>
    <name>useConstants</name>
    <tag-class>com.github.xaerxess.UseConstantsTag</tag-class>
    <body-content>empty</body-content>

    <display-name>useConstants</display-name>

    <description>
    Exposes all of the public constants in a class as a map stored in
    a scoped attribute. The scope may be specified, but defaults to page
    scope.
     </description>

    <variable>
        <name-from-attribute>var</name-from-attribute>
        <variable-class>java.lang.Object</variable-class>
        <declare>true</declare>
        <scope>AT_BEGIN</scope>
        <description>The name of the attribute into which the map will be stored.</description>
    </variable>

    <attribute>
        <name>var</name>
        <required>yes</required>
        <rtexprvalue>no</rtexprvalue>
        <description>Name of the scoped attribute into which the map will be stored.</description>
    </attribute>

    <attribute>
        <name>className</name>
        <required>yes</required>
        <rtexprvalue>no</rtexprvalue>
        <description>Fully qualified name of the class from which constants will be extracted.</description>
    </attribute>

    <attribute>
        <name>scope</name>
        <required>no</required>
        <rtexprvalue>no</rtexprvalue>
        <description>Scope into which to store the map. Default is page scope.</description>
    </attribute>

    <example>
To expose all of the constants in the Integer class:
<![CDATA[<un:useConstants var="const" className="java.lang.Integer" />]]> 
    </example>
</tag> 
```

像这样使用它：

```
<custom:useConstants var="MappingUtils" 
    className="com.groupgti.webclient.util.MappingUtils" scope="application" /> 
```

接着：

```
<p>My const: ${MappingUtils.SECURE_REQUEST_MAPPING}</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:35:39.997

JSP 允许您`<%= ... %>`在自定义标记（例如 ）的属性中使用 scriptlet 表达式 ( ) `<form:form>`，但它必须是属性的唯一内容。因此，您不能`<%= ... %>`在自定义标签的属性中将表达式与 EL 表达式或纯文本混合。

但是，您可以在常规 HTML 标记的属性中使用任何内容，因为这些标记对于 JSP 没有特殊含义，这就是它与`<a>`.

一种可能的解决方案是将 scriptlet 表达式的结果放入请求属性中并在 EL 表达式中使用它：

```
<c:set var = "url" 
    value = "<%=SECURE_REQUEST_MAPPING + CANDIDATE_DETAILS_DATA_FORM_MAPPING + HTM%>" />
<form:form action="${pageContext.servletContext.contextPath}${url}" ...>
    ...
</form:form> 
```

或者，您可以选择在没有 EL 的情况下使用 scriptlet，例如，通过定义一个在您的 : 中附加上下文路径的方法`MappingUtils`：

```
... <%= url(...) %> ... 
```

请注意，由于历史原因（EL 表达式被设计为替换 scriptlet）JSP 没有提供混合 EL 和 scriptlet 的优雅方法，因此这类问题几乎是意料之中的。

# html - 来自html的iphone语音输出

> ID：12619879
> 
> 赞同：0
> 
> 时间：2012-09-27T11:02:46.547
> 
> 标签：html, accessibility, speech

我已经用谷歌搜索了很多次，并使用了许多关键字，但无法找到一个明显的样本来帮助我。

我有一个网页可以缩小以在屏幕缩小时删除按钮上的文本标签。我已经包含了“应该”出现在语音输出中的标题属性，因此该站点仍然可以访问，但是我的测试人员告诉我它不起作用。

我需要的是一个不会显示在任何浏览器上的属性或标签，但 iphone 的网站功能说正确的话。可用性网站建议标题，但它不适用于 iphone。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:03:04.253

忽略可用性网站。`title`不应使用该属性。浏览器不会以相同的方式实现 title 属性，因此辅助技术制造商会以不同的方式处理它。

我的问题是当按钮缩小时如何删除文本？根据您的喜好，您可以将文本包装在 a 中`span`并使用Jon 谈到的[剪切技术。](http://snook.ca/archives/html_and_css/hiding-content-for-accessibility)

# javascript - 如何减少我的 javascripts 的加载时间？

> ID：12619880
> 
> 赞同：3
> 
> 时间：2012-09-27T11:02:52.623
> 
> 标签：javascript

我的页面上有以下代码：

```
<script src="/Scripts/common/layout/addAccessControls.js"></script>
<script src="/Scripts/common/layout/addAjaxControls.js"></script>
<script src="/Scripts/common/layout/addBodyControls.js"></script>
<script src="/Scripts/common/layout/addContentControls.js"></script>
<script src="/Scripts/common/layout/addThemeControls.js"></script>
<script src="/Scripts/common/layout/hashClick.js"></script>
<script src="/Scripts/common/layout/setSideBar.js"></script> 
```

所有脚本将一个接一个地加载是否正确？如果是这样，有没有一种方法可以一次进行多个负载？

只是为了稍微澄清一下这个问题。我可以缩小这些并连接它们，也许它们已经被模拟和连接了:-) 我很想知道的是给定这些确切文件的加载过程。是不是一个接一个的文件。浏览器是否对并行加载做任何事情。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:05:57.907

嗯，第一个问题是脚本是一个接一个地加载的。第二个问题是请求的数量。请求越多，花费的时间就越长。

最简单的方法是将服务器端的文件连接到一个`.js`文件中，这样您就只剩下一个请求了。这将加快速度。

如果您另外缩小脚本，这也会加快速度。

根据您在服务器端使用的框架，有多种解决方案来解决此问题。例如，对于 Node.js，您可以使用[Piler](https://github.com/epeli/piler)在运行时执行此操作。

或者，当然，您始终可以手动执行此操作，分别通过构建作业。

PS：当然，您可以使用其他机制来加载脚本文件，例如动态添加脚本标签，这将允许您并行加载。有关详细信息，请参阅[http://blogs.msdn.com/b/kristoffer/archive/2006/12/22/loading-javascript-files-in-parallel.aspx](http://blogs.msdn.com/b/kristoffer/archive/2006/12/22/loading-javascript-files-in-parallel.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T11:13:50.083

您可以使用`async`命令（HTML5）：

```
<script async src="slow.js"></script> 
```

动态脚本加载：

```
var script = document.createElement("script");
script.async = false;
script.src = url;
document.head.appendChild(script); 
```

[HTML5 异步脚本](http://ie.microsoft.com/testdrive/Performance/AsyncScripts/Default.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:04:32.323

是的，它们将一个接一个地**加载和执行**。而你无法改变这一点。

但是，如果您关心性能，您可能会很高兴得知**下载**过程是不同的，并且可能会被浏览器并行化。

您可以通过打开[Chrome Developer Tools 的网络选项卡](https://developers.google.com/chrome-developer-tools/docs/network)在 Chrome 中查看它。

如果您想减少总时间，最好的解决方案是将所有文件连接成一个（并尽可能缩小它们，但重要的操作是连接）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T11:06:19.527

[您可以使用这样](http://robertnyman.com/2010/01/19/tools-for-concatenating-and-minifying-css-and-javascript-files-in-different-development-environments/)的工具连接和缩小它们。如果您有 Mac，甚至还有一个很棒的应用程序可以自动执行此过程，称为[CodeKit](http://incident57.com/codekit/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T11:13:59.293

这是脚本阻塞。它是一个浏览器功能。不同的浏览器并行下载不同数量的文件。脚本将依次加载和执行。您可以阅读 Steve Souders 和 Nicolas Zakas 的这些文章。这可以帮助你。

[http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/](http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/) http://www.nczonline.net/blog/2009/06/23/loading-javascript-without-阻塞/

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T11:09:08.533

您可以在将文件推送到生产环境时合并文件以获得单个文件[并最小化它们]...这样您将保存请求手动检查和中间的所有步骤...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T11:07:09.807

根据浏览器和正在下载的其他文件（例如图像）的数量，您可能会按照放置顺序同时下载多个 JavaScript 文件。

您可以通过使用 Firebug 或 Chrome 的开发者工具看到这种情况。您会注意到您的浏览器总是会加载多个文件，但同时下载的最大数量因浏览器和使用的版本而异。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-27T11:07:15.587

如果您的问题与标题有关（*如何减少我的 javascripts 的加载时间？*），一个好的方法是

*   检查代码，在必要时删除和优化
*   连接所有文件（按加载顺序）
*   缩小代码
*   使用 gzip 压缩提供单个文件
*   利用缓存来避免不必要的请求

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-27T11:07:35.763

根据浏览器的不同，将并行加载不同数量的文件。它们应该并行执行，但为了获得最佳结果，请将事件处理程序附加到页面，例如`onload`.

如果文件不通过减少服务器往返而改变，则连接文件将缩短加载时间。您还可以尝试使用缓存清单或使用 AJAX 延迟加载第三级脚本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-27T11:07:38.490

您可以尝试使用这种技术，以适合您现有的代码...

```
1\. Use minify version of JS code
2\. Add only one external JS file (copy all content to one)
3\. Use cookie less domain 
```

# javascript - 当 Eric Hynds 的带有 JQuery Multiselect UI 的选择框动态更新时，自动选择第一个选项

> ID：12619888
> 
> 赞同：11
> 
> 时间：2012-09-27T11:03:39.707
> 
> 标签：javascript, jquery, jquery-ui, server-sent-events

[我使用http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)的 JQuery UI 多选插件将元素动态附加到选择框

```
//Make filter cars multiselect
$("#cars_filter").multiselect({noneSelectedText:'Select cars'});

function populateCarfilter(){
    var opts="<option value=''>Select cars</option>";
    $.each(markers, function(idx, mar){
      if(mar.getVisible() && mar.get("car"))
     opts+="<option value='" + mar.get("id") + "'>" + mar.get("driver") + " - " + mar.get("car") + "</option>";
    });

    if($("#cars_filter").html()!=opts){
      var id = $("#cars_filter").val()
      $("#cars_filter").html(opts);
      $("#cars_filter").val(id);
      $("#cars_filter").multiselect('refresh');
    }    
}

populateCarfilter(); //This gets called every 2 secs automatically by SSE (server sent events) 
```

现在，我面临一个奇怪的问题。每次更新选择框时，都会自动选择选择框中的第一个选项。有什么办法可以解决这个问题？

谢谢你

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-27T11:18:43.090

浏览器将自动选择第一个选项，除非您将多个属性添加到元素。

看看你的jQuery MultiSelect UI Widget javascript源文件，他们实现了以下

```
// browsers automatically select the first option
// by default with single selects
if( isSelected && !o.multiple ){
    labelClasses.push( 'ui-state-active' );
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:25:57.843

并且您始终可以通过循环遍历元素并将值设置为未选中来确保它可以正常工作，例如：

```
 click: function(event, ui){

 if(!ui.checked) 
 {   $.each( $('#select2 option'),function(i2, element2)
       {
                if( $(element2).val() === ui.value )
                {
                   if( $(element2).is(':selected') ) { 
             $(element2).attr('selected',false); 
                }
                     $(element2).remove().appendTo('#select1');
                    }        
        });
 } 
```

}

这只是在您动态更新并希望确保如此的情况下......在我的情况下，我正在更新/将元素从一个下拉列表传递到另一个下拉列表并且两者都具有 multiple='multiple' 属性，所以我需要确保在单击一个被删除时，然后将其附加到底层选择但仍然始终选择第一个选项..希望它可以帮助某人在路上..这是一个不错的插件

# algorithm - RANSAC算法参数设置

> ID：12619894
> 
> 赞同：2
> 
> 时间：2012-09-27T11:03:58.263
> 
> 标签：algorithm, math, computer-vision, ransac

RANSAC算法已广泛应用于计算机视觉等工程领域。但是，如果我理解得很好，使用该算法时需要设置两个参数：一个与迭代次数有关，另一个与估计模型的阈值有关。以线性线估计问题为例：

![在此处输入图像描述](../Images/6a3ba3af5e9a286e2050b2358565643b.png)

图片中的蓝点代表离群点，而红点代表离群点。

迭代次数表明我们应该尝试多少次才能找到正确的线模型。我们尝试的越多，就越有可能获得正确的模型。但是，消耗时间也会增加。此外，迭代次数还与数据集中异常值的百分比有关。存在的异常值越少，我们可以预期的迭代就越少。

模型的阈值取决于手头的问题。如果设置得太严格，可以拟合模型的数据将变得无用，从而导致估计不准确。此外，严格的模型阈值也可能导致错误的模型。如果设置得太松，异常值可能会发挥作用。

暂时我对这两个参数的设置方案如下： 1）迭代次数：开始时粗略估计异常值的百分比，如果百分比高，则​​需要更多的迭代；否则，迭代次数设置相对较低。2）模型阈值：一开始设置一个比较大的阈值保持，然后根据它们与模型的接近程度给内点一个权重。如果异常值碰巧变成了异常值，它们不会显着影响模型估计。我想知道 RANSAC 参数设置是否存在其他解决方案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:19:36.473

阅读[http://www.robots.ox.ac.uk/~vgg/publications/2000/Torr00/torr00.pdf](http://www.robots.ox.ac.uk/~vgg/publications/2000/Torr00/torr00.pdf)

# mysql - 使用 10 000 个值填充 MySQL 数据库

> ID：12619906
> 
> 赞同：1
> 
> 时间：2012-09-27T11:04:37.310
> 
> 标签：mysql, sql, batch-file

我想创建一个简单的程序，它将用一些随机值填充 MySQL 数据库表 10 000 次。我想用两个引擎 InnoDB（它是标准的面向行的引擎）和 InfiniDB（指定的面向列的引擎）来测试在表中插入和读取的速度。知道怎么做吗？这是我的数据库中的一个表的示例：

```
CREATE  TABLE IF NOT EXISTS `mydb`.`tblVariable` (
  `idtblVariable` INT NOT NULL ,
   `name` VARCHAR(20) NULL ,
   `station_id` INT NULL ,  
   `description` VARCHAR(100) NULL ,
   `id_history` INT NOT NULL DEFAULT 0 ,
   `type` ENUM('Analog','Digital') NOT NULL
) 
```

所以要解释一下..对于 idtblVariable，它将是从 1 到 10 000 的数字，随机名称可以是：PT1，...，PT10000 描述例如将是：a，a，a，a，10 000 次等. 客户端是程序，插入和读取是用C#的形式，经典的应用程序。这可以在批处理程序中完成吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:19:40.647

这是填充从 1 到 10000 的数字的另一个技巧。如果您创建一个临时表或表变量并用 0 到 9 的数字填充它，如下所示：

```
CREATE TABLE TEMP 
(Digit int);
INSERT INTO Temp VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9); 
```

然后你可以像这样生成从 1 到 10000 的数字：

```
INSERT INTO tblVariable (idtblVariable) 
SELECT id
FROM
(
SELECT t4.digit * 1000 + t3.digit * 100 + t2.digit * 10 + t1.digit + 1 AS id
FROM         TEMP AS t1
  CROSS JOIN TEMP AS t2
  CROSS JOIN TEMP AS t3
  CROSS JOIN TEMP AS t4
) t 
```

## [SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/4e85e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:09:55.997

这可以通过存储过程来完成，例如：

```
CREATE DEFINER = `root`@`localhost` PROCEDURE `NewProc`()
BEGIN
 #Routine body goes here...
DECLARE counter INT;
DECLARE i INT;

SET i = 0;
SET counter = 10000;

WHILE i < counter DO
    INSERT INTO tblVariable (idtblVariable, name, /*Other fields*/) 
    VALUES (i, CONCAT('PT',i), /*Other values*/);
    SET i = i + 1;
END WHILE;

END; 
```

如果您遇到 MySQL 权限问题， 您可以删除/更新部分`DEFINER =`根localhost。**更新**：然后，在创建存储过程之后，您可以像这样调用该过程：`@`

 **```
CALL NewProc; 
```**

# android - 是否可以在没有 PHP 的情况下将我的 android 应用程序连接到 mysql 数据库？

> ID：12619909
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:04:46.250
> 
> 标签：android, mysql

是否可以在没有 PHP 的情况下将我的 android 应用程序连接到 mysql 数据库？如果可能的话，连接到 mysql db 的替代方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:18:40.423

```
Yes, You can. 
```

您必须为 mysql 添加一个 jar 库。然后将连接到 mysql 服务器的 java 代码。

```
import java.sql.DriverManager;

import android.database.SQLException;

import com.mysql.jdbc.Connection;
import com.mysql.jdbc.ResultSet;
import com.mysql.jdbc.Statement;

    public class SQLConnection {
        public static Connection conn = null;
        static void setConnection(String user,String pass,String urlServer,String dBase){   

              try
              {
                  String userName = user;
                  String password = pass;
                  String url = "jdbc:mysql://"+urlServer+"/"+dBase;

                  Class.forName ("com.mysql.jdbc.Driver").newInstance ();
                  conn = DriverManager.getConnection (url, userName, password);
                  System.out.println ("Database connection established");
              }
              catch (Exception e)
              {
                  System.err.println (e.getMessage());
              }
              finally
              {
              }

        }
        public static Connection getConnection(){
        return conn;
        }

    } 
```

# c# - 从 MSTest 测试生成可运行的 exe

> ID：12619911
> 
> 赞同：2
> 
> 时间：2012-09-27T11:04:58.200
> 
> 标签：c#, .net, visual-studio-2010, unit-testing, mstest

我在 Visual Studio 测试项目中有一个 [TestMethod]。如果我构建项目，我会得到一个 dll。我不想从 Visual Studio 用户界面运行测试。

1.  有什么方法可以生成测试项目的 exe，以便我可以从命令提示符运行测试？

2.  如果我将项目类型从类库更改为控制台应用程序，那么它需要一个 Main 函数。有什么方法可以从 Main() 调用 TestMethod

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:15:28.657

您可以通过菜单在 Visual Studio 中运行单元测试：Test -> Run -> ...

两个选项： - 当前上下文中的测试 - 所有测试

上下文可以是项目级别、类级别或方法级别。取决于您将标记放在测试类中的位置，或者您是否在解决方案资源管理器中选择了类/文件/项目。

您可以使用热键组合 CTRL + R、T 在当前上下文中运行测试，或使用 CTRL + R、A 运行所有测试。

编辑：参考评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:57:54.200

您应该已经有一个可执行测试的 EXE - mstest.exe。如果你需要在 Visual Studio 之外运行测试——并且你没有使用某种已经可以为你执行此操作的构建自动化解决方案——那么你可以调用 mstest.exe 并让它执行你的测试。

[http://msdn.microsoft.com/en-us/library/ms182489(VS.100).aspx](http://msdn.microsoft.com/en-us/library/ms182489(VS.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:12:51.783

我认为您想要的是某种用于测试自动化的软件。我的公司使用[Jenkins](http://jenkins-ci.org/)。效果非常好，您也可以将它与源代码控制软件一起使用，以便在有人签入时运行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:22:14.050

您可能想要利用 TFS - Microsoft Team Foundation Server，一个独立的服务器端应用程序系统来构建项目并在其中运行测试。

您也可以在 Visual Studio 中运行它们（菜单测试 -> 运行 -> ...）。

# html - CSS：正确限制表格中两个图像的大小

> ID：12619912
> 
> 赞同：0
> 
> 时间：2012-09-27T11:04:57.897
> 
> 标签：html, css, cross-browser, image-resizing

我有一个简单的 HTML/CSS 任务。我有一个页面，其中连续显示两个相同大小的图像。请参阅[此页面](https://octonus.graphicon.ru/GMLePublish/HDRTools/Public/sample.htm)。我需要调整图像的显示大小以满足*所有*这些标准：

1.  图像必须在浏览器窗口中一起完全可见，即包含 div/table 的大小仅限于客户区的大小
2.  图像不放大，保留纵横比
3.  图像水平居中，它们之间有恒定的空间
4.  至少在 IE9、Chrome 和 Safari 中有效

我在 CSS 方面不是很有经验，所以我最多可以击败 4 的 2 个标准。

我当前使用的示例页面满足 3、4 和部分 1（仅限制宽度）。我让示例尽可能靠近我的问题，留下所有相关的主 CSS 文件并自动生成 ASP.NET 容器。

图像应该保留在`input`tag 中，而不是在 中`img`，这是可取的，尽管不是至关重要的。您能否建议满足所有条件的样式属性的适当组合？

**更新：**

具有宽松标准 1 的解决方案，其中允许图像的高度超过客户区域的高度，也将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:33:13.257

明白了，但我使用图像作为背景而不是`<img>`. 希望这不是问题。

随着`background-size:contain;`背景图像的缩放，同时保留图像的原始比例/纵横比。FF4+、IE9+、Chrome1+（带有供应商前缀）、Opera10+ 和 Safari 3+（[源代码](http://www.css3.info/preview/background-size/)）支持它。

* * *

`height:100%;`您的第一个要求的主要问题是：“containig div/table 的大小仅限于客户区的大小”，除非父容器也设置了高度，否则您无法设置。

在您的页面中，我看到您有一个具有动态高度的页眉和页脚，因此您需要一些 jQuery 来调整容器的高度。但让我们先看看如何仅使用 CSS 来实现，然后我们将添加页眉和页脚。

* * *

**[演示](http://jsfiddle.net/gionaf/uuFNb/)**（尝试调整窗口大小）

HTML：

```
<html>
<body>
<div id="body">
    <div>
        <div class="left"></div>
    </div>
    <div>
        <div class="right"></div>
    </div>
</div>
</body>
</html>​ 
```

CSS：

```
html, body, #body {
    width:100%;
    height:100%;
}
#body, #body > div {
    overflow:hidden;
}
#body > div {
    box-sizing:border-box;
    width:50%;
    height:100%;
    float:left;
    padding:10px; /* or whatever you need */
}
#body > div > div {
    margin:0 auto;
    height:100%;
    width:100%;
    background-repeat:no-repeat;
    background-position:top center;
    -webkit-background-size:contain; /* Chrome1+, Safari 3+ */
    background-size:contain; /* FF4+, IE9+, Chrome3+, Opera10+, Safari 3+ */
}
#body > div > div.left {
    background-image:url(/* your left image url */);
    max-width:417px; /* the real image width */
    max-height:512px;; /* the real image height */
}
#body > div > div.right {
    background-image:url(/* your right image url */);
    max-width:417px; /* the real image width */
    max-height:512px;; /* the real image height */
}​ 
```

* * *

让我们添加页眉和页脚。我们必须`height:100%;`从#body 中删除，并根据以下结果计算其高度：窗口高度 - 页眉高度 - 页脚高度。

**[演示](http://jsfiddle.net/gionaf/Dx3VG/)**（调整窗口大小）

HTML：

```
<html>
<body>
<header>I'm a header</header>
<div id="body">
    <div>
        <div class="left"></div>
    </div>
    <div>
        <div class="right"></div>
    </div>
</div>
<footer>I'm a footer</footer>
</body>
</html>​ 
```

CSS：

```
html, body {
    width:100%;
    height:100%;
}
header, footer {
    background:grey;
}
#body {
    height:400px; /* fallback no javascript */
}
#body, #body > div {
    overflow:hidden;
}
#body > div {
    box-sizing:border-box;
    width:50%;
    height:100%;
    float:left;
    padding:10px; /* or whatever you need */
}
#body > div > div {
    margin:0 auto;
    height:100%;
    width:100%;
    background-repeat:no-repeat;
    background-position:top center;
    -webkit-background-size:contain; /* Chrome1+, Safari 3+ */
    background-size:contain; /* FF4+, IE9+, Chrome3+, Opera10+, Safari 3+ */
}
#body > div > div.left {
    background-image:url(/* your left image url */);
    max-width:417px; /* the real image width */
    max-height:512px;; /* the real image height */
}
#body > div > div.right {
    background-image:url(/* your right image url */);
    max-width:417px; /* the real image width */
    max-height:512px;; /* the real image height */
}​ 
```

jQuery：

```
function calcHeight(){
    var docHeight = $(document).height();
    var headHeight = $('header').outerHeight();
    var footHeight = $('footer').outerHeight();
    var bodyHeight =  docHeight - ( headHeight + footHeight);
    $('#body').height(bodyHeight);
}
calcHeight(); /* called first time on page load */
$(window).on('resize',calcHeight());​/* do the math again when window's resized */ 
```

我认为这很简单。我这样写是为了让它易于理解，但当然你可以压缩更多。

我已经使用`outerHeight`页脚和页眉来包含可能的边距。

如果您不想包含 jQuery 库，那么肯定有一种纯 JavaScript 方法来获得它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T11:13:26.260

为了保持纵横比只在css中定义宽度，它会自动调整高度以保持纵横比。

# symfony - 选择多个进入 Symfony2 FORM

> ID：12619917
> 
> 赞同：1
> 
> 时间：2012-09-27T11:05:17.137
> 
> 标签：symfony

我有这种情况

`EntityA`相关`EntityB`成**一对多的**方式。我已经创建了一个表单，`EntityB`并且我想选择（带有复选框）一些`EntityA`元素。

我怎样才能做到这一点？

更新

```
public function viewAction()
{
    $id_struttura = 9;
    $channel_rates = $this->getDoctrine()->getRepository('SestanteChannelManagerBundle:StrutturaCanaleTariffa')->findByStruttura($id_struttura);
    $list = array();
    foreach ($channel_rates as $channel_rate) {
        $list[$channel_rate->getId()] = $channel_rate->getNomeCameraTariffa();
    }
    $view = new View();
    $view->addChannelRate($channel_rates);
    $form = $this->createForm(new ViewType(), $view);
    $request = $this->getRequest();
    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        if ($form->isValid()) {
            $dateRange = new DateRange($date_from, $date_to);
            $channelDisp = $this->get('channel_dispatcher');
            $inventories = $channelDisp->queryAvailabilityRates($dateRange, $channelRateList);
            return $this->render('SestanteCDTestBundle:Main:view_result.html.twig', array('inventories' => $inventories));
        }
    }
    return $this->render('SestanteCDTestBundle:Main:view.html.twig', array('form' => $form->createView()));
} 
```

这是我的实体

```
<?php

namespace Sestante\CDTestBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;

class View
{
    protected $channel_rate;

    function __construct()
    {
        $this->channel_rate = new ArrayCollection();
    }

    /**
     * @return the $date_from
     */
    public function getDateFrom() {
        return $this->date_from;
    }

    /**
     * @return the $date_to
     */
    public function getDateTo() {
        return $this->date_to;
    }

    /**
     * @return the $channel_rate
     */
    public function getChannelRate() {
        return $this->channel_rate;
    }

    /**
     * @param field_type $date_from
     */
    public function setDateFrom($date_from) {
        $this->date_from = $date_from;
    }

    /**
     * @param field_type $date_to
     */
    public function setDateTo($date_to) {
        $this->date_to = $date_to;
    }

    /**
     * @param field_type $channel_rate
     */
    public function addChannelRate($channel_rate) {
          $this->channel_rate[] = $channel_rate;
    }
} 
```

这是我的表格

```
<?php

namespace Sestante\CDTestBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class ViewType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('date_from', 'date', array('widget' => 'single_text','format' => 'yyyy-MM-dd'));
        $builder->add('date_to', 'date', array('widget' => 'single_text','format' => 'yyyy-MM-dd'));
        $builder->add('channel_rate', 'entity', array('class'=>'SestanteChannelManagerBundle:StrutturaCanaleTariffa', 'multiple'=>true, 'expanded'=>true));
    }

    public function getName()
    {
        return 'view';
    }
} 
```

如果我添加这样的语句（到实体中）一切正常：

```
foreach ($channel_rate as $ch)
{
$this->channel_rate[] = $ch;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:24:08.860

在您的表单`buildForm`方法中：

```
$builder->add('entitya', 'entity', array(
    'class'     => 'YourAwesomeBundle:EntityA',
    'expanded'  => true,
    'multiple'  => true
)); 
```

如[参考](http://symfony.com/doc/2.0/reference/forms/types/entity.html)中所述。

编辑查看您的代码：

```
/**
 * @param field_type $channel_rate
 */
public function addChannelRate($channel_rate) {
      $this->channel_rate[] = $ch;
} 
```

`$ch`在这个方法中没有定义，你需要写`$this->channel_rate[] = $channel_rate.

无论如何，提供一个`setChannelRate`方法，如：

```
/**
 * @param ArrayCollection $rates
 */
public function setChannelRate($rates) {
      $this->channel_rate = $rates;
} 
```

并重试。

# javascript - Knockoutjs 在命名空间视图模型中启用绑定

> ID：12619919
> 
> 赞同：0
> 
> 时间：2012-09-27T11:05:34.480
> 
> 标签：javascript, knockout.js

我在使启用绑定工作时遇到问题，我认为问题出在我实现视图模型的方式上。我没有将视图模型创建为函数，而是将它们命名为间距，以便我可以从可互换的局部视图动态构建它们。

请参阅此小提琴以获取示例[http://jsfiddle.net/tgriley1/4G6wj/2/](http://jsfiddle.net/tgriley1/4G6wj/2/)

有任何想法吗？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:12:23.057

在您的绑定中，您不应将“vm”作为名称的一部分。

我已经在[http://jsfiddle.net/photo_tom/4G6wj/3/更新了你的小提琴](http://jsfiddle.net/photo_tom/4G6wj/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:12:47.453

只是一个猜测（我没有运行代码）：

当您将数据绑定到多个值时（通过使用 组合它们`&&`），您需要调用访问器函数而不是访问值本身。

所以基本上：

`data-bind="enable: foo() && bar()"`

代替

`data-bind="enable: foo && bar"`

# c - 夹板试图告诉我什么？

> ID：12619931
> 
> 赞同：0
> 
> 时间：2012-09-27T11:06:02.047
> 
> 标签：c

我写了一个简单的代码（下面是它的一部分）并使用夹板检查任何警告。但斯普林特在抱怨。我可能缺少什么问题？

**夹板警告**

```
malloctest.c:24:3: Return value (type char *) ignored: gets(p)
  Result returned by function call is not used. If this is intended, can cast
  result to (void) to eliminate message. (Use -retvalother to inhibit warning) 
```

**代码部分**

```
p= (char*)malloc(BUFFER*sizeof(char));

    if(p==NULL)
        {
            printf("the memory could not be allocated");
        }
    else
    {
        gets(p);  //line 24
        printf("the name entered is \n%s\n",p);
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:09:35.330

[`gets()`](http://en.cppreference.com/w/c/io/gets)返回 a`char*`以指示成功或失败，代码会忽略它，因此会发出警告。

但是，`gets()`没有办法防止缓冲区溢出。相反，您可以使用[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)格式`"%Ns"`说明符（或者[`fgets()`](http://en.cppreference.com/w/c/io/fgets)如果字符串可以包含空格）：

```
if (1 == scanf("%9s", p)) /* if BUFFER(_SIZE ?) was 10.
                             The 'N' in the format specifier
                             must be 1 less than size of
                             the buffer to allow for null
                             terminator. */
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:46:04.873

你应该避免使用`gets()`，**永远！**

`gets()`是一个非常不安全的函数，因为它不检查缓冲区的长度，这可能导致潜在的缓冲区溢出。

```
#include <stdio.h>
int main(void) {
  char buffer[10];
  gets(buffer);
  puts(buffer);
  return 0;
} 
```

例如，如果您输入`0123456789 10 11 12 13` ，那么您有一个**大**问题。

最好[`fgets()`](http://en.cppreference.com/w/c/io/fgets)改用：

```
#include <stdio.h>
int main(void) {
  char buffer[10];
  fgets(buffer, sizeof buffer, stdin);
  puts(buffer);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:06:54.140

[gets(p)](http://www.cplusplus.com/reference/clibrary/cstdio/gets/)有一个您没有存储的 char* 返回值。这不是一个真正的问题，但夹板只是提醒你这一点。

# delphi - 为什么此代码中对 ShBrowseForFolder 的第二次调用失败？

> ID：12619937
> 
> 赞同：2
> 
> 时间：2012-09-27T11:06:21.457
> 
> 标签：delphi

下面用于调用 ShBrowseForFolder 的包装代码只工作一次：如果我第二次调用 Execute 方法，则对话框不会出现在“PtrIDL := ShBrowseForFolder(BrowseInfo);”上 称呼。任何人都可以看到有什么问题吗？

```
unit ShBrowseU;
(* Wrapper for ShBrowseForFolder
 *  22/01/2004
 *
 * Changes JD 6-7-2012:
 * - Inherit from TComponent
 * - Published properties
 * Changes JD 27-9-2012:
 * - Coinitialize call only once
 * Todo:
 * - Make UNCFolder, FolderCheck, Options and SelIconIndex published properties
 * - Catch Left/Top input < 0
 * - Component needs icon
 *)

interface

uses
  Windows, Messages, SysUtils, Classes, Dialogs, ShlObj ;

type
  TFolderCheck = function(Sender : TObject; Folder : string) : boolean of object;

  TShBrowseOption = (sboBrowseForComputer, sboBrowseForPrinter,
                     sboBrowseIncludeFiles, sboBrowseIncludeURLs,
                     sboDontGoBelowDomain, sboEditBox, sboNewDialogStyle,
                     sboNoNewFolderButton, sboReturnFSAncestors,
                     sboReturnOnlyFSDirs, sboShareable, sboStatusText,
                     sboUAHint, sboUseNewUI, sboValidate);
  TShBrowseOptions = set of TShBrowseOption;

  TShBrowse = class(TComponent)
  private
    FBrowseWinHnd : THandle;
    FCaption : string;
    FFolder : string;
    FFolderCheck : TFolderCheck;
    FInitFolder : string;
    FLeft : integer;
    FOptions : TShBrowseOptions;
    FSelIconIndex : integer;
    FTop : integer;
    FUserMessage : string;
    WinFlags : DWord;
    FCoInitialized: Boolean;
    procedure Callback(Handle : THandle; MsgId : integer; lParam : DWord);
    function GetUNCFolder : string;
    function IdFromPIdL(PtrIdL : PItemIdList; FreeMem : boolean) : string;
    procedure SetOptions(AValue : TShBrowseOptions);
  protected
    property BrowseWinHnd : THandle read FBrowseWinHnd write FBrowseWinHnd;
  published
    property Caption : string read FCaption write FCaption;
    property InitFolder : string read FInitFolder write FInitFolder;
    property Left : integer read FLeft write FLeft; // both Left & Top must be > 0 to position window
    property Top : integer read FTop write FTop;
    property UserMessage : string read FUserMessage write FUserMessage;
  public
    constructor Create(AOwner: TComponent); override;
    function Execute : boolean;
    property Folder : string read FFolder;
    property UNCFolder : string read GetUNCFolder;
    property FolderCheck : TFolderCheck write FFolderCheck;
    property Options : TShBrowseOptions read FOptions write SetOptions;
    property SelIconIndex : integer read FSelIconIndex;
  end;

implementation

uses
  ActiveX;

const
  BIF_RETURNONLYFSDIRS    = $00000001;
  BIF_DONTGOBELOWDOMAIN   = $00000002;
  BIF_STATUSTEXT          = $00000004;
  BIF_RETURNFSANCESTORS   = $00000008;
  BIF_EDITBOX             = $00000010;
  BIF_VALIDATE            = $00000020;
  BIF_NEWDIALOGSTYLE      = $00000040;
  BIF_USENEWUI            = $00000040;
  BIF_BROWSEINCLUDEURLS   = $00000080;
  BIF_NONEWFOLDERBUTTON   = 0;
  BIF_UAHINT              = 0;
  BIF_BROWSEFORCOMPUTER   = $00001000;
  BIF_BROWSEFORPRINTER    = $00002000;
  BIF_BROWSEINCLUDEFILES  = $00004000;
  BIF_SHAREABLE           = $00008000;
  BFFM_VALIDATEFAILED     = 3;

  ShBrowseOptionArray : array[TShBrowseOption] of DWord =
                    (BIF_BROWSEFORCOMPUTER, BIF_BROWSEFORPRINTER,
                     BIF_BROWSEINCLUDEFILES, BIF_BROWSEINCLUDEURLS,
                     BIF_DONTGOBELOWDOMAIN, BIF_EDITBOX, BIF_NEWDIALOGSTYLE,
                     BIF_NONEWFOLDERBUTTON, BIF_RETURNFSANCESTORS,
                     BIF_RETURNONLYFSDIRS, BIF_SHAREABLE, BIF_STATUSTEXT,
                     BIF_UAHINT, BIF_USENEWUI, BIF_VALIDATE);

function ShBFFCallback(hWnd : THandle; uMsg : integer;
                       lParam, lpData : DWord) : integer; stdcall;
{connects the ShBFF callback general function to the
 Delphi method which handles it}
begin
  TShBrowse(lpData).Callback(hWnd, uMsg, lParam); // calls object's method
  Result := 0;
end;

constructor TShBrowse.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  Caption := 'Browse for folder';  // default
  UserMessage := 'Select folder';  // default
end;

procedure TShBrowse.Callback(Handle : THandle; MsgId : integer; lParam : DWord);
{Delphi method which handles the ShBFF callback}
var
  WorkArea, WindowSize : TRect;
  BFFWidth, BFFHeight : integer;
  SelOK : boolean;
begin
  FBrowseWinHnd := Handle;
  case MsgId of
    BFFM_INITIALIZED :
        begin
          if (FLeft = 0) or (FTop = 0) then begin
            {center the browse window on screen}
            GetWindowRect(FBrowseWinHnd, WindowSize);  // get ShBFF window size
            with WindowSize do begin
              BFFWidth := Right - Left;
              BFFHeight := Bottom - Top;
            end;
            SystemParametersInfo(SPI_GETWORKAREA, 0, @WorkArea, 0); // get screen size
            with WorkArea do begin  // calculate ShBFF window position
              FLeft := (Right - Left - BFFWidth) div 2;
              FTop := (Bottom - Top - BFFHeight) div 2;
            end;
          end;
          {set browse window position}
          // SetWindowPos(FBrowseWinHnd, HWND_TOP, FLeft, FTop, 0, 0, SWP_NOSIZE);
          SetWindowPos(FBrowseWinHnd, HWND_TOPMOST, FLeft, FTop, 0, 0, SWP_NOSIZE);  // Always on top
          if (FCaption <> '') then
            {set Caption}
            SendMessage(FBrowseWinHnd, WM_SETTEXT, 0, integer(PChar(FCaption)));
          if (FInitFolder <> '') then
            {set initial folder}
            SendMessage(FBrowseWinHnd, BFFM_SETSELECTION, integer(LongBool(true)),
                        integer(PChar(FInitFolder)));
        end;
    BFFM_SELCHANGED :
        begin
          if Assigned(FFolderCheck) then
            {get folder and check for validity}
            if (lParam <> 0) then begin
              FFolder := IdFromPIdL(PItemIdList(lParam), false);
              {check folder ....}
              SelOK := FFolderCheck(Self, FFolder);
              {... en/disable OK button}
              SendMessage(Handle, BFFM_ENABLEOK, 0, integer(SelOK));
            end; {if (lParam <> nil)}
          {end; if Assigned(FFolderCheck)}
        end;
  {  BFFM_IUNKNOWN :;
    BFFM_VALIDATEFAILED :;  }
  end;
end;

procedure TShBrowse.SetOptions(AValue : TShBrowseOptions);
var
  I : TShBrowseOption;
begin
  if (AValue <> FOptions) then begin
    FOptions := AValue;
    WinFlags := 0;
    for I := Low(TShBrowseOption) to High(TShBrowseOption) do
      if I in AValue then
        WinFlags := WinFlags or ShBrowseOptionArray[I];
  end;
end;

function TShBrowse.Execute : boolean;
// Called to display the ShBFF window and return the selected folder
var
  BrowseInfo : TBrowseInfo;
  IconIndex  : integer;
  PtrIDL     : PItemIdList;     // Item identifier list
begin
  FillChar(BrowseInfo, SizeOf(TBrowseInfo), #0);
  IconIndex := 0;
  with BrowseInfo do begin
    hwndOwner := Self.FBrowseWinHnd;
    PIDLRoot  := nil;
    pszDisplayName := nil;
    lpszTitle := PChar(FUserMessage);
    ulFlags   := WinFlags;
    lpfn      := @ShBFFCallback;
    lParam    := integer(Self); // this object's reference
    iImage    := IconIndex;
  end;

//  if not FCoInitialized then FCoInitialized := Succeeded(CoInitializeEx(nil,COINIT_APARTMENTTHREADED));

  PtrIDL := ShBrowseForFolder(BrowseInfo);
  if PtrIDL = nil then
    Result := false
  else begin
    FSelIconIndex := BrowseInfo.iImage;
    FFolder := IdFromPIdL(PtrIDL, true);   // This clears memory again
    Result := true;
  end; {if PtrIDL = nil else}
end;

function TShBrowse.IdFromPIdL(PtrIdL : PItemIdList; FreeMem : boolean) : string;
var
  AMalloc : IMalloc;
begin
  Result := '';
  SetLength(Result, MAX_PATH);
  SHGetPathFromIDList(PtrIDL, PChar(Result));
  Result := trim(Result);
  Result := string(PChar(Result));
  // When a PIDL is passed via BFFM_SELCHANGED and that selection is OK'ed
  // then the PIDL memory is the same as that returned by ShBrowseForFolder.
  // This leads to the assumption that ShBFF frees the memory for the PIDL
  // passed by BFFM_SELCHANGED if that selection is NOT OK'ed. Hence one
  // should free memory ONLY when ShBFF returns, NOT for BFF_SELCHANGED
  if FreeMem then begin
    {free PIDL memory ...}
    ShGetMalloc(AMalloc);
    AMalloc.Free(PtrIDL);
  end;
end;

function TShBrowse.GetUNCFolder : string;
  function GetErrorStr(Error : integer) : string;
  begin
    Result := 'Unknown Error : ' + IntToStr(Error); // default
    case Error of
      ERROR_BAD_DEVICE :         Result := 'Invalid path';
      ERROR_CONNECTION_UNAVAIL : Result := 'No connection';
      ERROR_EXTENDED_ERROR :     Result := 'Network error';
      ERROR_MORE_DATA :          Result := 'Buffer too small';
      ERROR_NOT_SUPPORTED :      Result := 'UNC name not supported';
      ERROR_NO_NET_OR_BAD_PATH : Result := 'Unrecognised path';
      ERROR_NO_NETWORK :         Result := 'Network unavailable';
      ERROR_NOT_CONNECTED :      Result := 'Not connected';
    end;
  end;

var
  LenResult  : Cardinal;
  Error      : integer;
  PtrUNCInfo : PUniversalNameInfo;

begin
  {note that both the PChar _and_ the characters it
   points to are placed in UNCInfo by WNetGetUniversalName
   on return, hence the extra allocation for PtrUNCInfo}
  LenResult := 4 + MAX_PATH; // "4 +" for storage for lpUniversalName == @path
  SetLength(Result, LenResult);
  PtrUNCInfo := AllocMem(LenResult);
  // bh, 13-8-2012, PAnsiChar replaced by PWideChar
  Error := WNetGetUniversalName(PWideChar(FFolder), UNIVERSAL_NAME_INFO_LEVEL,
                                PtrUNCInfo, LenResult);
  if Error = NO_ERROR then begin
    Result := string(PtrUNCInfo^.lpUniversalName);
    SetLength(Result, Length(Result));
    end
  else
    Result := GetErrorStr(Error);
end;

end. 
```

请注意，我注释掉了 CoInitializeEx 调用，但这并没有什么区别。

这是 XE2 代码，Win7 64 位下的 Win32 测试应用程序。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:25:01.020

这里有很多看起来很奇怪的代码，但我不会尝试深入。我会说 FBrowseWinHnd 输入错误。它是`HWND`。`THandle`您在本单元中没有任何s。他们都应该是`HWND`。

错误在这里：

```
with BrowseInfo do begin
  hwndOwner := Self.FBrowseWinHnd;//oops, this is wrong 
```

该集合是对话框的所有者窗口，它是上次显示对话框时代表对话框的窗口句柄。这就是为什么它只在第二次询问时失败。

显然这是错误的。只需删除这行代码并将其保留`hwndOwner`为 0。如果要为对话框指定所有者，请更改签名`Execute`以接收所有者窗口句柄，然后将其传递给对话框。

* * *

如何调试一次成功，然后再次调用失败的 API 调用？第一步是查看参数的值，看看它们是否因一次调用而异。确实正是这样做是我发现问题的方式。

# android - 使用 sqlite 数据库将事件添加到用户日历。

> ID：12619938
> 
> 赞同：0
> 
> 时间：2012-09-27T11:06:22.613
> 
> 标签：android, events, calendar, sqlite

任何人都可以提供一个教程或示例，说明如何使用 sqlite 数据库将事件添加到数据库并反过来将它们添加到用户日历中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:41:33.060

一些数据库教程在这里[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

您可以通过内容提供者将事件添加到日历中。但它从 api 级别 14 开始可用。这里是教程[http://developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html)

在较旧的 android 版本中，您可以使用意图打开日历。它不会将事件插入日历，但会打开日历应用程序并填写一些字段。[http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert](http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert)

# smtp - Transport.connect，sendMessage，关闭每个 SMTP 邮件？

> ID：12619942
> 
> 赞同：0
> 
> 时间：2012-09-27T11:06:36.357
> 
> 标签：smtp, jakarta-mail

我的网络应用程序向登录的用户发送电子邮件。它始终使用相同的设置：

mail.smtp.host=...

邮件.smtp.user=...

邮件.smtp.密码=...

我很困惑是否应该为每条消息执行连接-发送-关闭：

```
t.connect(host, username, password);
t.sendMessage(...);
t.close(); 
```

...或者我应该只连接一次，然后继续发送不同的消息：

```
t.connect(host, username, password);
t.sendMessage(...);
t.sendMessage(...);
t.sendMessage(...);
t.sendMessage(...);
t.close(); 
```

...因为主机，用户名，密码不要改变。

什么是正确的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:06:03.833

每个连接发送多条消息会更有效率，但您需要准备好处理过程中任何时候的故障，包括连接故障。这可能会使您的错误处理代码更加复杂。

# java - 是否可以使用 JAXB 生成小写 Java 枚举常量？

> ID：12619946
> 
> 赞同：4
> 
> 时间：2012-09-27T11:06:53.123
> 
> 标签：java, xsd, jaxb

以下 xsd 架构的一部分：

```
 <xs:simpleType name="Component">
    <xs:enumeration value="Common"/>
    </xs:simpleType> 
```

创建带有一个常量的 java 枚举 - `Component.COMMON`。是否可以使用 JAXB 生成具有小写常量（例如 Component.common）的枚举？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:06:27.690

是的，它应该基于实现类型安全枚举（例如整数值）的相同技术。

[这个链接](http://documentation.progress.com/output/Iona/artix/5.5/jaxws_pguide/JAXWSCustomTypeMappingEnum.html)应该有帮助。

在您的情况下，它应该如下所示：

```
<xs:simpleType name="Component" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"> 
    <xs:restriction base="xs:string">
        <xs:enumeration value="Common">
            <xs:annotation>
              <xs:appinfo>
                <jaxb:typesafeEnumMember name="common" />
              </xs:appinfo>
            </xs:annotation>                
        </xs:enumeration>           
    </xs:restriction>
</xs:simpleType> 
```

你得到这个：

```
@XmlType(name = "Component")
@XmlEnum
public enum Component {

    @XmlEnumValue("Common")
    common("Common");
    private final String value;

    Component(String v) {
        value = v;
    }

    public String value() {
        return value;
    }

    public static Component fromValue(String v) {
        for (Component c: Component.values()) {
            if (c.value.equals(v)) {
                return c;
            }
        }
        throw new IllegalArgumentException(v);
    }

} 
```

# ruby-on-rails-3 - 索引丰富文档时出现Tika异常错误rails 3

> ID：12619949
> 
> 赞同：0
> 
> 时间：2012-09-27T11:07:00.297
> 
> 标签：ruby-on-rails-3, sunspot-solr, apache-tika

好吧，我只是在使用 sunspot_cell 实现富文档中的全文搜索。我正在使用回形针进行附件。

我已经完成了所有必需的配置，并将所有 *.jar 文件包含在 solr/lib 目录中。但它无法索引文档。**我收到以下 Tika 异常错误：**

```
RSolr::Error::Http (RSolr::Error::Http - 500 Internal Server Error
Error:     org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.pdf.PDFParser@17fc44f
org.apache.solr.common.SolrException: org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.pdf.PDFParser@17fc44f
    at org.apache.solr.handler.extraction.ExtractingDocumentLoader.load(ExtractingDocumentLoader.java:219)
    at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:58)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:241)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1372)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:356)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:252)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212) 
```

**我的 Gemfile 看起来像**：

```
gem 'sunspot', :git => "git://github.com/sunspot/sunspot.git"
gem 'sunspot_rails', :git => "git://github.com/sunspot/sunspot.git", :require =>  "sunspot_rails"
gem 'sunspot_test'
gem 'sunspot_cell', :git => 'git://github.com/zheileman/sunspot_cell.git'

group :development, :test do
  gem 'sunspot_cell_jars', :git => 'https://github.com/mrcsparker/sunspot_cell_jars.git'
  gem 'sunspot_solr', :git => "git://github.com/sunspot/sunspot.git", :require => "sunspot_solr"
  gem 'progress_bar'
end 
```

对此的任何解决方案。

问候， 卡兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:24:07.690

好吧，这似乎不合逻辑，但不知何故我能够找到解决方案。

只需尝试使用 Web-rick 运行您的开发服务器，而不是任何其他 eg:thin 它将开始工作。:)

# c# - 如何使用二进制搜索来搜索列表中大于 C# 4.0 特定值的第一项

> ID：12619950
> 
> 赞同：0
> 
> 时间：2012-09-27T11:07:04.637
> 
> 标签：c#, c#-4.0, binary-search

事实上，对于我的情况，有两个条件

```
class A
{
    double value;
    public double Value{get;set;}
}

A[] arr = {....} 

double val; 
```

我想在 arr 中搜索这个 val，但 val 可能不在列表中而不是 A[i].Value > val && val < A[i+1].Value

在某些情况下，我需要 A[i]。在其他条件下我需要 A[i+1] 我尝试像 arr.ToList().BinarySearch(A, Acomparer) 但我不能这个数组有大约 550 个元素我正在尝试优化这个搜索

感谢提前帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:12:07.103

与基于对象比较对象[`Array.BinarySearch`](http://msdn.microsoft.com/en-us/library/system.array.binarysearch.aspx)的自定义一起使用：[`IComparer<A>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)`Value`

```
public class MyComparer : IComparer<A>
{
    public int Compare(A x, A y)
    {
        return x.Value.CompareTo(y.Value);
    }
} 
```

接着：

```
var index = Array.BinarySearch(arr, val, new MyComparer());
if (index >= 0) {
    // val found at index
}
else {
    // ~index is "i + 1" in your example
} 
```

# android - Android：监控应用程序的数据流量使用情况

> ID：12619958
> 
> 赞同：0
> 
> 时间：2012-09-27T11:07:33.327
> 
> 标签：android, data-transfer, network-traffic

好的，我知道这个问题并不直接（我更喜欢问的那种问题），但是这里有：任何人都可以指出一个好的方向来学习如何监控应用程序生成的数据流量吗？我需要做的非常详细，以便我可以准确地看到在 f.ex 时在设备之间传输了多少数据。单击应用程序中的“更新”按钮，将行更新到远程数据库/从远程数据库更新。

我是否应该在我正在监控的应用程序中实现监控，或者作为一个单独的应用程序，我可以告诉它来监控那个确切的应用程序的数据流量，我不确定。两种方式都很有趣。

提前感谢所有提示/提示/帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:54:02.990

> 任何人都可以为学习如何监控应用程序生成的数据流量指明一个好的方向吗？

如果您的意思是在开发时，您可以使用 DDMS 中的 Network Statistics 选项卡。请注意，如果您在 Eclipse 的 DDMS 透视图中没有看到此选项卡，则需要打开该视图（Window > Show View > Other > Android > Network Statistics）。

如果您的意思是在运行时，[您可以使用`TrafficStats`](http://developer.android.com/reference/android/net/TrafficStats.html). 它可能不适用于所有设备，仅仅是因为测量每个应用程序（或更准确地说，每个 UID）的流量数据并不是普遍可用的，即使在具有`TrafficStats`该类的设备上也是如此，但它是城里唯一的游戏。

# java - 单击另一个单元格时更改单元格背景

> ID：12619965
> 
> 赞同：0
> 
> 时间：2012-09-27T11:07:50.887
> 
> 标签：java, swing, background, jpanel, mouselistener

我正在尝试构建一个 9x9 数独游戏。对于 UI 部分，我想在单击时更改单元格的背景，并在单击任何其他单元格时恢复正常。下面是我的单元格类。

```
 import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;
    import javax.swing.border.BevelBorder;

    public class Cell extends JPanel implements MouseListener{

    Cell[][] cell;
    private int x;//x pos;
    private int y;//y pos;
    private int num=0;
    private JLabel lnum;
    private Color bg;
    private static int xpos=-1;
    private static int ypos=-1;
    private static Color back;
    public Cell(Cell[][] cell,int x, int y)
    {
        this.cell=cell;
        this.x=x;
        this.y=y;
        x+=1; y+=1;
        setBorder(BorderFactory.createLineBorder(Color.yellow));
        if((x%6>=1&&x%6<=3)&&(y%6==0||y%6>3)||(y%6>=1&&y%6<=3)&&(x%6==0||x%6>3))
            bg=Color.BLUE;
        else
            bg=Color.BLACK;
        setBackground(bg);
        setPreferredSize(new Dimension(50,50));
        lnum=new JLabel(String.valueOf(num),null,JLabel.CENTER);
        lnum.setForeground(Color.green);
        add(lnum,SwingConstants.CENTER);
        addMouseListener(this);
    }

    @Override
    public void mouseClicked(MouseEvent e) {

        if(xpos!=-1)
        {
        cell[xpos][ypos].setBackground(back);
        cell[xpos][ypos].setBorder(BorderFactory.createLineBorder(Color.yellow));
        }
        xpos=x;
        ypos=y; 
        back=bg;
        setBackground(Color.LIGHT_GRAY);
        setBorder(BorderFactory.createBevelBorder(BevelBorder.LOWERED,
                                                        Color.cyan,Color.BLUE));
    }

    @Override
    public void mousePressed(MouseEvent e) {

    }

    @Override
    public void mouseReleased(MouseEvent e) {
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        if(x!=xpos&&y!=ypos)
        {
        setBackground(Color.WHITE);
        setBorder(BorderFactory.createLineBorder(Color.RED));
        }
    }

    @Override
    public void mouseExited(MouseEvent e) {
        if(x!=xpos&&y!=ypos)
        {
        setBackground(bg);
        setBorder(BorderFactory.createLineBorder(Color.yellow));
        }
    }

} 
```

但是，在单击一个单元格然后再单击另一个单元格后恢复为正常背景颜色和单元格边框不起作用。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:04:03.400

您最好使用一个`AbstractButton`，例如[`JButton`](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)，它为每个受支持的外观和感觉都包含此功能。您可以使用下面列出的按钮相关键覆盖默认值`UIManager.put()`，如下[所示](https://stackoverflow.com/a/10686898/230513)。这[`CellTest`](https://stackoverflow.com/a/4151403/230513)也可能暗示一些想法。右键单击以查看上下文菜单，然后单击选项卡以查看焦点侦听器的工作方式。

```
按钮.背景
按钮边框
Button.darkShadow
Button.defaultButtonFollowsFocus
Button.disabledText
按钮字体
按钮.前景
按钮高亮
Button.light
按钮边距
Button.opaque
按钮选择
按钮阴影
Button.textIconGap
Button.textShiftOffset

```

# string - MATLAB 字符串中的换行符

> ID：12619968
> 
> 赞同：13
> 
> 时间：2012-09-27T11:07:56.057
> 
> 标签：string, matlab, line-breaks

我正在编写一个代码，我在其中要求用户输入。然而，通知用户的字符串有点长，当我使用代码时，它都写在命令窗口的一行中。我想让它分布在多条线上。我的代码是：

```
n = input(['The matrix is diagonally dominant.  Please choose which method you wish to'...
        ' use: 1 (Gaussian elimination), 2 (Jacobi iterations),'...
        ' 3 (Gauss-Seidel iterations).  If you enter any other number'...
        ' Gaussian elimination will automatically be used: ']); 
```

如果更可取，我希望将其显示为 4 行，如代码所示。我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-27T11:13:36.813

使用 sprintf 和 \n （换行符）

```
n = input(sprintf(['The matrix is diagonally dominant.  Please choose which method you wish to\n'...
    ' use: 1 (Gaussian elimination), 2 (Jacobi iterations),\n'...
    ' 3 (Gauss-Seidel iterations).  If you enter any other number\n'...
    ' Gaussian elimination will automatically be used: '])); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T11:12:17.383

用作`\n`中断字符，例如：

```
n = input(sprintf('blablabla\nblablabla\n')) 
```

# sql - 你能给每个case语句一个列别名吗？SQL, pl/sql

> ID：12619970
> 
> 赞同：1
> 
> 时间：2012-09-27T11:08:09.477
> 
> 标签：sql, plsql, case, alias

我正在尝试进行查询，它计算一列中按比例、完整和随机结果的数量，并将它们显示在 3 个单独的列中。

到目前为止，我正在尝试：

```
SELECT ot.ort_method,
CASE ot.ort_method
  WHEN 'PRORATE' THEN '1' AS 'Pro_Rata'
  WHEN 'COMPLETE' THEN '2' AS 'Complete'
  WHEN 'RANDOM' THEN '3' AS 'Random'
END
FROM orders o, order_tranches ot
WHERE o.ord_deal_code = 'EM0004357P'; 
```

这是行不通的。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:15:48.153

样本数据 ：

```
with t1 as(
  select 'EM0004357P' ord_deal_code, 'PRORATE' ort_method from dual union all
  select 'EM0004357P' ord_deal_code, 'COMPLETE' ort_method from dual union all
  select 'EM0004357P' ord_deal_code, 'PRORATE' ort_method from dual union all
  select 'EM0004357P' ord_deal_code, 'RANDOM' ort_method from dual union all
  select 'EM0004357P' ord_deal_code, 'RANDOM' ort_method from dual
 ) 
```

询问：

```
SELECT count(decode(o.ort_method, 'PRORATE', 1)) as prorate
     , count(decode(o.ort_method, 'COMPLETE', 1)) as complete
     , count(decode(o.ort_method, 'RANDOM', 1)) as random
FROM t1 o
WHERE o.ord_deal_code = 'EM0004357P'; 
```

结果：

```
 Prorate  complete  random 
   2         1        2 
```

# javascript - Google Maps API v3 Second Map Resize and Center

> ID：12619973
> 
> 赞同：1
> 
> 时间：2012-09-27T11:08:13.720
> 
> 标签：javascript, wordpress, google-maps, google-maps-api-3

我忘记了 wordpress 上的嵌入地图，并移至谷歌地图 api v3。所以，我正在使用这个：

```
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script> 
```

这个功能：

```
function initialize() {

//replace 0's on next line with latitude and longitude numbers from earlier on in tutorial.
var myLatlng = new google.maps.LatLng(40.654372, -7.914174);
var myLatlng1 = new google.maps.LatLng(30.654372, -6.914174);
    var myOptions = {
      zoom: 16,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var myOptions1 = {
      zoom: 16,
      center: myLatlng1,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

//here's where we call the marker.
//getElementById must be the same as the id you gave for the container of the map
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var map1 = new google.maps.Map(document.getElementById("map_canvas1"), myOptions1);
 //google.maps.event.trigger(map1, 'resize');
 //map1.setCenter(myLatlng1);

        var marker = new google.maps.Marker({
      position: myLatlng,
      title:"ADD TITLE OF YOUR MARKER HERE"
  });

        var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '<\/div>'+
    '<h2 id="firstHeading" class="firstHeading">ADD TITLE HERE<\/h2>'+
    '<div id="bodyContent">'+
    '<p style="font-size:1em">ADD DESCRIPTION HERE<\/p>'+
    '<\/div>'+
    '<\/div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
});      

  // To add the marker to the map, call setMap();
  marker.setMap(map);  
  }

  function loadScript() {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.google.com/maps/api/js?sensor=false&callback=initialize";
    document.body.appendChild(script);
  }

  window.onload = loadScript; 
```

如您所见，声明了两个地图。我的网站，我使用水平选项卡在显示地图之间交替。

问题是我在此处的其他主题中发现的问题，但那里给出的解决方案似乎不起作用。正如您在我评论的行中看到的：

```
//google.maps.event.trigger(map1, 'resize'); 
```

//map1.setCenter(myLatlng1);

此代码无法使第二张地图居中。地图无法正确放置在 div 上，中心图标位于左下角，这是常见问题。

我想您已经知道问题所在，但是如果您需要图片，我会毫无问题地提供它们。

标签代码在 wordpress 上的外观：

```
 [wptabs type="accordion" mode="horizontal"]

[wptabtitle] Portugal[/wptabtitle] [wptabcontent]

<div id="map_canvas" style="width: 100%; height: 300px; border: 1px solid;"></div>
[/wptabcontent]

[wptabtitle] Brasil[/wptabtitle] [wptabcontent]

<div id="map_canvas1" style="width: 100%; height: 300px; border: 1px solid;"></div>

[/wptabcontent]

[/wptabs] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:13:22.760

好的，这个插件似乎使用了[jQuery UI](http://jqueryui.com)，那么你可以这样做：

```
$('#tabs').bind('tabsshow', function(event, ui) {
    if (ui.panel.id == "tab-map-2") {
        google.maps.event.trigger(map1, 'resize');
        map1.setCenter(myLatlng1);
    }
}); 
```

**#tabs**在div ID 之外并且**tab-map-2**是第二张地图的选项卡面板 ID。

希望这可以帮助。

# android - 使用 apache ant 构建时找不到属性“hardwareAccelerated”的资源标识符

> ID：12619974
> 
> 赞同：6
> 
> 时间：2012-09-27T11:08:15.890
> 
> 标签：android, ant, android-manifest

我的应用程序针对 android API 级别 7 (2.1) 并且在 Eclipse 下都可以正常工作（结果 APK 在 2.1 设备上也可以正常工作）。我尝试使用 apache ant 构建应用程序并收到此错误。针对相同问题的所有解决方案都告诉我必须设置另一个目标 API 级别。

我想简单地忽略清单中的这个属性 - 正如我发现的那样，在旧设备中它只是被忽略而没有任何错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:16:30.450

我认为 API 级别低于 11 的硬件加速是不可能的。[查看此处](https://developer.appcelerator.com/question/128042/android-30-hardware-acceleration)了解更多信息。

您最好的选择是简单地从清单中删除硬件加速属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-15T14:05:23.910

我宣布

```
 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="21" /> 
```

在清单文件中。它解决了我的问题。希望对其他人有所帮助。

# javascript - 下拉列表不显示以前的值

> ID：12619976
> 
> 赞同：0
> 
> 时间：2012-09-27T11:08:18.713
> 
> 标签：javascript, asp.net

我有一个带有自动回发假的 asp.net 下拉列表控件。我已经编写了 js 代码来在下拉值更改时显示确认消息。

```
function ConfirmAbsent(ddlPresence) {
        if (ddlPresence != null) {
            var myValue = ddlPresence.options[ddlPresence.selectedIndex].text;
            var blnAbsent = confirm("This will mark as "+ myValue +". Please confirm clicking OK.");

            if (blnAbsent) {
                return true;
            }
            else {
                return false;
            }
        }
    } 
```

并将此属性添加到下拉列表中，如下所示

```
ddlUserPresence.Attributes.Add("onchange", "if (!ConfirmAbsent(" + ddlUserPresence.ClientID
                    + ")) return; else __doPostBack('"
                    + ddlUserPresence.UniqueID + "', '');"); 
```

当我单击确定按钮时，它回发页面正常工作，但是当我单击取消按钮时，它没有显示以前的值，而是显示当前值。

因此，当我单击取消按钮时，它应该向我显示以前的值。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:11:47.460

`return false`如果你想阻止事件，你应该从事件处理程序中：

```
ddlUserPresence.Attributes.Add("onchange", "return(ConfirmAbsent(" + ddlUserPresence.ClientID +"));"); 
```

您还传递了 ClientID，`DropDownList`但您没有使用它来查找控件。所以你应该使用`document.GetElementById`.

```
function ConfirmAbsent(ddlPresenceID) {
    var ddlPresence = document.GetElementById(ddlPresenceID);
    if (ddlPresence != null) { 
```

请注意，您可以使用[`defaultValue`](http://www.w3schools.com/jsref/prop_text_defaultvalue.asp)获取在服务器端为 TextBoxes 设置的初始值。

# java - 使用 Web 界面或任何可视化工具运行 Selenium WebDriver 测试

> ID：12619977
> 
> 赞同：1
> 
> 时间：2012-09-27T11:08:20.400
> 
> 标签：java, testing, selenium, webdriver, automated-tests

我有一组用 Java 编写的 Selenium WebDriver 测试。

是否有带有 Web 界面的框架，我可以在其中运行它们？

此 Web 界面应显示所有测试的列表、运行一项或所有测试的能力并显示其运行结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:59:52.900

**简化：**

您可以使用**Jenkins** (CI Tools) **>** Work with **ANT** (BUILD.xml) **>** Running with **TestNG Framework >** Incorporate with your **WebDriver Script**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:20:27.257

每个人都说没有现成的“网络界面”，但这是 CI（持续集成）服务器和软件做得很好的事情。

例如，TeamCity 可以完全满足您的需求，但仅靠 Selenium 和您的测试框架（NUnit、Junit 等）就没有任何东西可供您使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:40:26.037

嗯。不能肯定地说网络界面，但在我看来，你应该在`@Category`注释方向上进行更深入的调查。对于我的项目，我使用 Maven 构建管理器。并且使用@Category 表示法，您可以向 Maven 显示构建中应该包含哪些类别的测试以及应该排除哪些类别。

这是我在项目中使用的结构示例：

```
 rms-web pom:

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.11</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.maven.surefire</groupId>
                        <artifactId>surefire-junit47</artifactId>
                        <version>2.12</version>
                    </dependency>
                </dependencies>
                                <configuration>
                    <!--<includes>-->
                        <!--<include>**/*.class</include>-->
                    <!--</includes>-->
                    <excludedGroups>com.exadel.rms.selenium.SeleniumTests</excludedGroups>

                </configuration>

            </plugin>

PassTest.java
package com.exadel.rms.selenium;

import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertTrue;

/**
 * Created with IntelliJ IDEA.
 * User: ypolshchykau
 * Date: 8/28/12
 * Time: 8:38 PM
 * To change this template use File | Settings | File Templates.
 */
public class PassTest {

    @Test
    public void pass() throws IOException, InterruptedException {
        assertTrue(true);
    }
}

SeleniumTests.java

package com.exadel.rms.selenium;

/**
 * Created with IntelliJ IDEA.
 * User: ypolshchykau
 * Date: 8/27/12
 * Time: 6:49 PM
 * To change this template use File | Settings | File Templates.
 */
public class SeleniumTests {
}

LoginPageTestSuite.java
package com.exadel.rms.selenium;

import org.junit.Assert;
import org.junit.Test;
import org.junit.experimental.categories.Category;
import org.openqa.selenium.By;

import java.io.IOException;

@Category(SeleniumTests.class)
public class LoginPageTestSuite extends BaseSeleniumTest {

    @Test
    public void pressLoginButton() throws IOException, InterruptedException {
        doLogout();
        fluentWait(By.cssSelector(propertyKeysLoader("login.loginbutton"))).click();

        Assert.assertTrue(fluentWait(By.cssSelector(propertyKeysLoader("login.validator.invalidautentication"))).getText().trim().equals("Invalid authentication"));
    }
…..........
} 
```

我用 Maven 检查了我的测试类别，内容如下：

```
mvn -Dmaven.buildNumber.docheck=false -Dmaven.buildNumber.doUpdate=false clean test 
```

![行家检查](../Images/3d354982004e0c0504024af397f54d81.png)

假设您可以[在此处](http://linsolas.free.fr/wordpress/index.php/2011/02/how-to-categorize-junit-tests-with-maven/)[获得](http://johndobie.blogspot.com/2012/04/unit-and-integration-tests-with-maven.html) 有关 maven [surefire 插件](http://maven.apache.org/plugins/maven-surefire-plugin/examples/junit.html)的其他信息， 希望这对您有所帮助）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:43:41.550

您可以通过使用带有 TestNG 框架的 Ant (build.xml) 来制作测试套件。build.xml 由 Ant 以两种方式运行： 1\. 使用 IDE（例如 Eclipse） 2\. 从命令提示符

# c# - 在运行时更改背景后未加载 wpf 样式

> ID：12619978
> 
> 赞同：0
> 
> 时间：2012-09-27T11:08:29.783
> 
> 标签：c#, wpf, xaml

我在一个网格中有两个网格。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid x:Name="grid1" MouseLeftButtonDown="Grid_MouseLeftButtonDown" Grid.Column="0">
        <TextBlock  FontSize="50" Text="1" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
    <Grid x:Name="grid2"  MouseLeftButtonDown="Grid_MouseLeftButtonDown" Grid.Column="1">
        <TextBlock FontSize="50" Text="2" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
</Grid> 
```

我正在使用这种方法在运行时向网格添加样式。

```
private void StyleGrid()
{
    var converter = new System.Windows.Media.BrushConverter();

    Style myS = new System.Windows.Style();

    Setter setter1 = new Setter();
    setter1.Property = Grid.BackgroundProperty;
    setter1.Value = (Brush)converter.ConvertFromString("#3F3F46");
    myS.Setters.Add(setter1);

    Setter setter = new Setter();
    setter.Property = Grid.BackgroundProperty;
    setter.Value = (Brush)converter.ConvertFromString("#54545C");

    Trigger trigger = new Trigger();
    trigger.Property = Grid.IsMouseOverProperty;
    trigger.Value = true;
    trigger.Setters.Add(setter);
    myS.Triggers.Add(trigger);

    grid1.Style = myS;
    grid2.Style = myS;
} 
```

我在 InitializeComponent 方法之后调用此方法。一切正常。

这是网格的 MouseLeftButtonDown 事件。

```
 private void Grid_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    Grid senderGr = sender as Grid;

    StyleGrid();
    var converter = new System.Windows.Media.BrushConverter();

    var brush = (Brush)converter.ConvertFromString("#007ACC");

    senderGr.Background = brush;
} 
```

此方法必须更改发送方网格的背景颜色，并且必须更改其他网格的样式。但它并没有改变风格。

如果您有 Microsoft 帐户，您可以从 SkyDrive 下载和测试项目。谢谢。 [https://skydrive.live.com/redir?resid=89FD450CC0CC74DA!168](https://skydrive.live.com/redir?resid=89FD450CC0CC74DA!168)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:33:38.447

直接设置背景将始终覆盖定义的样式。WPF 使用设置顺序来确定依赖属性的实际值（请参阅[http://msdn.microsoft.com/en-us/library/ms743230.aspx](http://msdn.microsoft.com/en-us/library/ms743230.aspx "依赖属性值优先级")）

要获得结果，只需清除 StyleGrid() 方法中的设置值：

```
private void StyleGrid()
{
    grid1.ClearValue(Grid.BackgroundProperty);
    grid2.ClearValue(Grid.BackgroundProperty);
... 
```

# perl - perl 中的 HTML::TreeBuilder->new_from_url() 不起作用

> ID：12619981
> 
> 赞同：0
> 
> 时间：2012-09-27T11:08:42.337
> 
> 标签：perl, html-tree

使用 HTML::TreeBuilder->new_from_url() 想去一个网站说[https://abc.com/index.html](https://abc.com/index.html)并想从那个 html 页面显示一些值。

[https://abc.com/index.html](https://abc.com/index.html) 要求用户认证（test/test123 是用户名和密码）。我使用了以下代码：文件名：finaldisplay.pl

```
 #!/usr/bin/perl

   use HTML::TreeBuilder;
   use HTML::Entities;

   my $url = "http://test:test123@abc.com:8080/index.html";
   my $tree = HTML::TreeBuilder->new_from_url($url);

   $tree->elementify;

   for my $post( $tree->look_down( _tag => q{tr}, 'class' => 'row-odd'  ) ) {

my $disk_value;
my $name = $post->look_down( _tag => q{td}, 'class' => 'stats_left');
    my $data = $name->as_trimmed_text;

 if($data =~ /Home Directory/){
$disk_value =   $post->look_down( _tag => q{td}, 'class' => 'stats_right' )->as_trimmed_text;
print STDERR "$data : $disk_value\n";
}
elsif($data =~ /Disk Space Usage/){
$disk_value = $post->look_down( _tag => q{td}, 'class' => 'stats_right' );
$disk_value = ($disk_value->content_list)[0];

$disk_value  = encode_entities($disk_value);

 print STDERR "$data : $disk_value\n";
}

}

for my $post( $tree->look_down( _tag => q{tr}, 'class' => 'row-even'  ) ) {

my ($disk_value, $disk);

my $name = $post->look_down( _tag => q{td}, 'class' => 'stats_left');
     my $data = $name->as_trimmed_text;

    if($data =~ /Main Domain/){
$disk = $post->look_down( _tag => q{td}, 'class' => 'stats_right' );
$disk_value = $post->look_down( _tag => q{b})->as_trimmed_text;
print STDERR "$data : $disk_value\n";
} 

 } 
```

当我从命令行运行文件时出现错误“无法在 @INC 中找到 auto/HTML/TreeBuilder/new_from_ur.al（@INC 包含：C:/Per l/lib C:/Perl/site/lib。）在 finaldisplay.pl 第 8 行"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:18:05.330

首先检查模块的最新版本`HTML::TreeBuilder`。尝试从`cpan`.

`cpan -i HTML::TreeBuilder`

# java - 使用 Apache Tika 从存档中提取文件名

> ID：12619983
> 
> 赞同：0
> 
> 时间：2012-09-27T11:08:49.517
> 
> 标签：java, apache, parsing, apache-tika

我希望 Tika 只输出存档中文件的名称（如果输入文件是存档），如果输入文件不是存档，则像往常一样输出文件内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:36:48.780

我扩展了 ParsingEmbeddedDocumentExtractor 类

```
class CustomParsingEmbeddedDocumentExtractor extends ParsingEmbeddedDocumentExtractor {
  public CustomParsingEmbeddedDocumentExtractor(ParseContext context) {
    super(context);
  }

  public void parseEmbedded(
        InputStream stream, ContentHandler handler, Metadata metadata, boolean outputHtml)
        throws SAXException, IOException {

    String name = metadata.get(Metadata.RESOURCE_NAME_KEY);
    if (name != null && name.length() > 0 ) {
        handler.startElement(XHTML, "h1", "h1", new AttributesImpl());
        char[] chars = name.toCharArray();
        handler.characters(chars, 0, chars.length);
        handler.endElement(XHTML, "h1", "h1");
    }

    //Removed the parsing logic here.. We just want the file names..

  }
} 
```

并在执行之前将其设置为 ParseContext 变量`someparser.parse()`

```
context.set(EmbeddedDocumentExtractor.class, new CustomParsingEmbeddedDocumentExtractor(this.context)); 
```

这仅适用于 zip、tar 和 jar。这对我足够了。

# java - 写入 jfloat 数组时在 0x00000010 (code=1) 处获取“致命信号 11 (SIGSEGV)”

> ID：12619984
> 
> 赞同：5
> 
> 时间：2012-09-27T11:08:51.580
> 
> 标签：java, android, arrays, android-ndk

我目前正在使用 ndk 实现一个 android 功能。我在java中声明了这个函数

```
public static native void calculate(float[] rgb,float factor); 
```

然后，我编写了 C 函数：

```
JNIEXPORT void JNICALL Java_<package>_calculate(
       JNIEnv * env,
       jobject object,
       jfloatArray rgbObject,
       jfloat factor){
   jfloat* rgb = (*env)->GetFloatArrayElements(env,rgbObject,0);
   if(rgb==NULL) return;

   rgb[0]=5; // Test, crash!

   (*env)->ReleaseFloatArrayElements(env,rgb,rgbObject,0);
   } 
```

但是，每次我尝试使用数组和一些值调用函数时，我都会收到 logcat 消息：

*A/libc(16064)：致命信号 11 (SIGSEGV) 位于 0x00000010 (code=1)*

之后，应用程序崩溃。我发现它总是在写入浮点值时发生。阅读不会导致崩溃。

我有什么问题吗？不能写数组值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:34:50.903

我找到了解决方案！出于某种原因，该函数是用一个空值作为数组调用的。但是， rgb==NULL 检查没有触发（我不知道是什么原因）。我通过在获取值之前添加第二次检查来解决问题

```
JNIEXPORT void JNICALL Java_<package>_calculate(
       JNIEnv * env,
       jobject object,
       jfloatArray rgbObject,
       jfloat factor){
   if(rgbObject==NULL) return; // Check if incomming array is NULL-Pointer
   jfloat* rgb = (*env)->GetFloatArrayElements(env,rgbObject,0);
   if(rgb==NULL) return;

   rgb[0]=5; // Test, crash!

   (*env)->ReleaseFloatArrayElements(env,rgb,rgbObject,0);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:19:06.353

我在使用 时遇到了同样的问题`Android NDK`，我试图释放用 编写的函数内的内存`C`，但最终得到了`SIGSEGV`错误。我所做的技巧是在我的 C 代码中创建一个处理内存的函数，并`Java`在我完成 Java 中的特定操作后直接从 调用此方法。我在 C 中调用了该函数，以清理内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-12T08:47:51.470

我和你有同样的问题，终于解决了。

我认为问题在于您的 java 代码中没有为 jni 初始化 rgbObject。

i just add rgbObject =new int[5] in my code and then it is OK.

you can also do as TSGames said.

i think my is better.

# heroku - 配置 Spring TextEncryptor 以在 Heroku 上使用的正确方法是什么

> ID：12619986
> 
> 赞同：8
> 
> 时间：2012-09-27T11:09:14.623
> 
> 标签：heroku, spring-security

我有一个这样定义的spring TextEncryptor

```
<bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors"
                                                  factory-method="text">
        <constructor-arg value="${security.encryptPassword}" />
        <constructor-arg value="${security.encryptSalt}" />
</bean> 
```

哪个是这些属性

```
security.encryptPassword=47582920264f212c566d5e5a6d
security.encryptSalt=39783e315e6a207e733d6f4141 
```

这在我的本地环境中运行良好。当我部署到 Heroku 我得到

```
java.lang.IllegalArgumentException: Unable to initialize due to invalid secret key
at org.springframework.security.crypto.encrypt.CipherUtils.initCipher(CipherUtils.java:110)
at org.springframework.security.crypto.encrypt.AesBytesEncryptor.encrypt(AesBytesEncryptor.java:65)
at org.springframework.security.crypto.encrypt.HexEncodingTextEncryptor.encrypt(HexEncodingTextEncryptor.java:36)
...
Caused by: java.security.InvalidKeyException: Illegal key size
at javax.crypto.Cipher.checkCryptoPerm(Cipher.java:972)
at javax.crypto.Cipher.implInit(Cipher.java:738)
at javax.crypto.Cipher.chooseProvider(Cipher.java:797)
at javax.crypto.Cipher.init(Cipher.java:1276)
at javax.crypto.Cipher.init(Cipher.java:1215)
at org.springframework.security.crypto.encrypt.CipherUtils.initCipher(CipherUtils.java:105)
... 53 more 
```

所以我尝试了一些较小的键，但我总是遇到同样的问题。在 Heroku 上使用的正确密钥大小是多少？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-14T07:11:36.037

我的回答有点晚了，但我写它是为了帮助有需要的人。默认情况下，spring security 使用 256 位密钥进行加密。默认情况下，JDK 不允许这样做，它仅支持最多 128 位密钥。

要解决此问题，您需要从 oracle下载**local_policy.jar**和**US_export_policy.jar jar（** [Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files 7 下载](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)）并将它们替换到 jdk_path/jre/lib/security/ 中。确保重新启动应用程序服务器以使更改生效。

另外，我不会将密钥放在属性文件中。相反，我建议您将其放在密钥库中。如果您需要帮助，请告诉我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T15:36:07.867

所以我想我已经得出结论 Heroku 不支持 256 位 AEP，这是 spring-security 中的库存 TextEncoders 使用的。

相反，我使用[Java Simplified Encryption](http://www.jasypt.org/)库中的 BasicTextEncryptor 作为替代后端，并实现了 TextEncryptor 接口。

它不太安全，但它有效。它没有提供加盐机制，尽管我认为图书馆的其他地方对此有规定。

如果有人对如何让股票加密器在 heroku 上工作有任何想法，那么我认为这仍然是可取的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-07T17:45:37.607

您还可以执行以下操作。尽管这似乎已经停止在 Java 8 的最新版本上工作。

```
 Field field = Class.forName("javax.crypto.JceSecurity").getDeclaredField("isRestricted");
    if (Boolean.TRUE.equals(field.get(null))) {
        if (Modifier.isFinal(field.getModifiers())) {
            Field modifiers = Field.class.getDeclaredField("modifiers");
            modifiers.setAccessible(true);
            modifiers.setInt(field, field.getModifiers() & ~Modifier.FINAL);
        }
        field.setAccessible(true);
        field.setBoolean(null, false); // isRestricted = false;
        field.setAccessible(false);
    }
    textEncryptor = Encryptors.text(key, salt); 
```

# iphone - 单击按钮时在另一个请求中传递 json 响应参数

> ID：12619989
> 
> 赞同：0
> 
> 时间：2012-09-27T11:09:36.427
> 
> 标签：iphone, objective-c

我有一个 NSDictionary json 响应对象，它在调用服务 URL 后打印。

```
Looks like this:

{
geofenceType="a";
resourceType="b";
requestType="c";
monitoringType="d";
},
{
geofenceType="a1";
resourcetype="b1";
requestType="c1";
monitoringType="d1";
}, ...and so on for different users. 
```

现在我在 tableViewController 中每个用户前面都有一个按钮，按下按钮时，我需要调用另一个服务 URL，该 URL 将 geofenceType 和该用户的 requestType 作为参数。你能帮助我如何传递参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:20:08.683

首先给每个单元格按钮（当在 cellForRowATIndexPath 中创建时）应该分配一个标签。应该是 indexPath.row。从您的回复看来，您有字典数组。在数据源方法中设置数组。

然后在按钮选择器中..

用这个

```
NSDictionary *dict = [yourArray objectAtIndex:sender.tag]; 
```

最后

```
NSLog(@"[dict valueForKey:@"geofenceType"]"); 
```

应该给你想要的价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:21:12.983

您可以通过多种方式执行此操作，最简单的一种是在 cellForRow 方法中分配 button.tag 属性：

```
 - (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    myButton.tag = indexPath.row;
//other code
} 
```

然后，在按钮处理程序中，您可以像这样获取您的项目：

```
-(void)btnClicked:(id)sender {
    UIButton * btn = (UIButton)sender;
    yourItemForRow = [myDataArray objectAtIndex:btn.tag];

    //use yourItemForRow
} 
```

# java - Java方法定义问题

> ID：12619990
> 
> 赞同：1
> 
> 时间：2012-09-27T11:09:44.467
> 
> 标签：java, methods

该方法定义如下：

```
public static void checkNotNull<T extends Throwable>(Object value, String name, Class<T> exceptionClass) 
{

} 
```

然后编译器抛出一些错误：

**此行有多个标记

```
- void is an invalid type for the variable checkNotNull
- Duplicate field ValidationUtility.value
- Syntax error on token ">", Identifier expected after this token
- The type Class is not generic; it cannot be parameterized with 
 arguments <T>
- The type Class is not visible
- Duplicate field ValidationUtility.exceptionClass
- T cannot be resolved to a type
- Syntax error, insert ";" to complete FieldDeclaration
- Duplicate field ValidationUtility.String** 
```

有什么问题吗？请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:16:33.910

`void checkNotNull<T extends Throwable>(...,Class<T> exceptionClass)`是错误的语法。它应该是`<T extends Throwable>void checkNotNull(...,Class<T> exceptionClass)`

```
public static <T extends Throwable> void checkNotNull(Object value, String name, 
                                                      Class<T> exceptionClass) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:15:49.557

`<T extends Throwable>`在作废之前声明。

```
public static <T extends Throwable> void checkNotNull(Object value, String name,
Class<T> exceptionClass) {} 
```

可以参考[泛型教程](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)

[JLS#8.4。方法声明](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)

```
MethodHeader:
     MethodModifiersopt TypeParametersopt Result MethodDeclarator Throwsopt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:15:55.643

```
public static <T extends Throwable> void checkNotNull(Object value, String name, Class<T> exceptionClass) 
{

} 
```

# java - 在没有源代码的情况下序列化为 JSON 时更改属性名称

> ID：12619991
> 
> 赞同：1
> 
> 时间：2012-09-27T11:09:51.400
> 
> 标签：java, json, serialization

在进行名称更改，排除等压缩时需要将java对象序列化为JSON。对象使用jar中的类，源代码不可用。

浏览了许多库（[Jackson](http://jackson.codehaus.org/)，[Gson](http://code.google.com/p/google-gson/)），但没有找到解决这个特定问题的方法。它们中的大多数都是基于注释的，因为我没有源代码，所以我不能使用它们。

解决此问题的一种方法是，使用反射并递归遍历对象，直到找到应替换的属性名称或在序列化 JSON 中排除对象。

需要解决这个问题。如果它已经实施和测试，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:01:35.657

您还可以查看 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。

您可以使用非常简洁的代码重命名和过滤：

```
// renames all "fieldOfName" to "toName", excludes from serialization 
// and deserialization fields named "fieldNamed" and declared in DefinedInClass
// and uses fields with all visibility (protected, private, etc)

Genson genson = new Genson.Builder().rename("fieldOfName", "toName")
                                    .exclude("fieldNamed", DefinedInClass.class)
                                    .setFieldFilter(VisibilityFilter.ALL)
                                    .create();

genson.serialize(myObject); 
```

*   如果您想做一些更复杂的过滤（例如基于注释），您可以实现[BeanMutatorAccessorResolver](http://genson.googlecode.com/git/javadoc/com/owlike/genson/reflect/BeanMutatorAccessorResolver.html)或扩展[BaseResolver](http://genson.googlecode.com/git/javadoc/com/owlike/genson/reflect/BeanMutatorAccessorResolver.BaseResolver.html)。

*   对于属性重命名，您可以实现[PropertyNameResolver](http://genson.googlecode.com/git/javadoc/com/owlike/genson/reflect/PropertyNameResolver.html)并拥有完全控制权。

*   最后，如果您想根据修饰符过滤字段、方法或构造函数，您可以定义自己的[VisiblityFilter](http://genson.googlecode.com/git/javadoc/com/owlike/genson/reflect/VisibilityFilter.html)。

*   关于过滤/重命名的性能应该没有问题，因为每个类只执行一次然后缓存。

要开始使用 Genson，您可以查看[入门指南](http://code.google.com/p/genson/wiki/GettingStarted)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:13:54.363

找到了问题的解决方案。

Google gson 有一个名为[GsonBuilder](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html)的类，它具有[排除策略](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html#setExclusionStrategies%28com.google.gson.ExclusionStrategy...%29)和[命名策略](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html#setFieldNamingStrategy%28com.google.gson.FieldNamingStrategy%29)的方法。

使用这两种方法实现了一个自定义解决方案，其中所有映射和排除规则都使用 xml 存储并在序列化和反序列化时使用。

完美运行，但不确定相同的性能。

# vb.net - VB.NET z-order（具有所有权的订购表格）

> ID：12619998
> 
> 赞同：0
> 
> 时间：2012-09-27T11:10:06.707
> 
> 标签：vb.net

从我的表单中打开几个“拥有”表单时，我遇到了一些情况。

```
 Dim f As New ownedform
            With f
                .Owner = Me
                .Show()
            End With 
```

这行得通。但我有一个问题。
我可以通过按“所有者”或“拥有”表单上的某个按钮以某种方式使“所有者”表单成为顶层并弹出“拥有”表单吗？

我尝试了一个最简单的“.BringToFront”，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:17:08.017

BringToFront 仅用于设置 z-order 的控件。

但你可以做到。首先在form1中写下这段代码

```
 Me.Hide()
    Dim frm As New form2

    frm .ShowDialog() 
```

* * *

把这段代码写成form2

```
 Me.Hide()
    Dim frm As New form1
    frm .ShowDialog() 
```

* * *