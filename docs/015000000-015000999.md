# StackOverflow 问答 15000000-15000999

# android - 当我的应用程序未在后台运行时停止服务

> ID：15000000
> 
> 赞同：0
> 
> 时间：2013-02-21T10:32:35.187
> 
> 标签：android, service, alarmmanager

我想使用 alarmManager/Service 在后台每 10 分钟检查一次新消息（我已经编写了相同的代码）但是因为即使应用程序处于活动状态或已死，服务也会运行。如果应用程序没有运行，我希望服务停止在后台。我该怎么做？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:49:01.617

在活动的 onPause 状态下停止服务。

有关服务的更多详细信息，请访问[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)。

对于 AlarmManager，请访问[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)了解更多详情。在那里您可以找到取消方法来删除任何符合您意图的警报。

# java - Java Swing 功能区菜单

> ID：15000009
> 
> 赞同：-4
> 
> 时间：2013-02-21T10:33:02.630
> 
> 标签：java, swing, ribbon

在不使用任何第三方软件或代码的情况下，您将如何在 Java 中实现功能区菜单？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:42:25.473

查看[Flamingo JRibbonComponent](http://java.dzone.com/articles/flamingo-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:40:32.843

我会使用 Swing 创建一个选项卡式窗格，每个选项卡都包含一系列按钮或其他 Swing 组件。

然后开始处理选项卡式窗格的外观，将其调整为您所追求的。例如[http://zzhelev.blogspot.com.au/2007/07/creating-custom-ui-delegate-for.html](http://zzhelev.blogspot.com.au/2007/07/creating-custom-ui-delegate-for.html)

# wix - 如何将 Wix 3.0 项目（带引导程序）移植到 Wix 3.7

> ID：15000020
> 
> 赞同：1
> 
> 时间：2013-02-21T10:33:31.493
> 
> 标签：wix, upgrade, wix3, wix3.7

我继承了一个使用 Wix 3.0 的安装项目。出于编程原因，我们必须切换到 VS2012，因此也必须切换到 Wix 3.7。

在阅读有关 Wix 3.7 的信息时，我发现 3.7 提供项目类型“Setup project”和项目类型“Bootstrapper project”。

我的第一个问题是：我是否像以前一样制作一个安装项目和一个引导程序项目并将其组合起来，或者只是一个引导程序项目。

使用 Wix 3.0，引导程序的东西位于 wixproj 文件中：

```
<ItemGroup>
  <BootstrapperFile Include="Microsoft.Net.Framework.3.5.SP1">
    <ProductName>Microsoft .NET Framework 3.5 SP1</ProductName>
  </BootstrapperFile>
  <BootstrapperFile Include="Microsoft.Windows.Installer.3.1">
    <ProductName>Windows Installer 3.1</ProductName>
  </BootstrapperFile>
</ItemGroup>

<Target Name="AfterBuild">
  <GenerateBootstrapper Condition=" '$(Platform)' == 'x86' " ApplicationName="$(ProductName)" BootstrapperItems="@(BootstrapperFile)" ComponentsLocation="HomeSite" CopyComponents="True" OutputPath="$(TargetDir)%(CultureGroup.OutputFolder)" Culture="%(CultureGroup.Identity)" FallbackCulture="en-us" Path="$(WindowsSDKPath)" />
  <GenerateBootstrapper Condition=" '$(Platform)' == 'x64' " ApplicationName="$(ProductName) (x64)" BootstrapperItems="@(BootstrapperFile)" ComponentsLocation="HomeSite" CopyComponents="True" OutputPath="$(TargetDir)%(CultureGroup.OutputFolder)" Culture="%(CultureGroup.Identity)" FallbackCulture="en-us" Path="$(WindowsSDKPath)" />
</Target> 
```

这还有可能吗？在这里我必须从 .Net 3.5SP1 更改为 .Net 4.5

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T16:17:16.397

首先，您可以只使用 WiX Toolset 3.7 并在您的 WiX 文件上运行 wixcop 来升级它们。

* * *

如果您想使用新的 WiX 引导程序...

您需要两种项目类型。“安装”项目会创建一个 .msi 文件。“Bootstrapper”项目会创建一个 .exe 文件。

从安装项目中删除 Visual Studio Bootstrapper 项和 GenerateBootstrapper 任务。在引导程序的链中创建相应的 ExePackage 或 PackageGroupRef 元素。PackageGroup 大致对应于 Visual Studio Bootstrapper 包，但“语法”不同。要重新创建 Visual Studio Bootstrapper 包，请参阅下面的文件`C:\Program Files (x86)\Microsoft Visual Studio 8\SDK\v2.0\Bootstrapper\Packages`或等效文件。

对于 Microsoft .NET 框架，WixNetfxExtension 扩展定义了您[可以引用](http://wix.sourceforge.net/manual-wix3/install_dotnet.htm)的包组。

# python - 如何在Django中比较浮点值

> ID：15000021
> 
> 赞同：0
> 
> 时间：2013-02-21T10:33:31.767
> 
> 标签：python, django, floating-point, compare

嗨，我需要比较我正在使用以下代码的项目中的浮点值

```
 if style_score.style_quiz_score ==float(17.40): 
```

但它不适用于此但是当我将值从 17.40 更改为 17 时它工作正常，请告诉我如何比较浮点值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:40:58.110

那是因为舍入错误。永远不要将浮点数与 比较`==`，始终使用此模板：

```
def floats_are_the_same(a,b): return abs(a-b) < 1e-6

if floats_are_the_same(value, 17.4):
    .... 
```

即检查该值是否*接近*某个期望值。这是因为浮点算术几乎总是有舍入误差：

```
>>> 17.1 + 0.3
17.400000000000002 
```

另请参阅：[在 Python 中比较浮点数是否相等的最佳方法是什么？](https://stackoverflow.com/questions/5595425/what-is-the-best-way-to-compare-floats-for-almost-equality-in-python)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:41:37.843

在 python（或任何依赖于浮点的底层硬件表示的语言）中比较浮点数总是一件棘手的事情。最好的方法是定义一个容差，在这个容差内你会认为两个数字相等（比如，`10^-6`），然后检查数字之间的绝对差是否小于你的容差。

代码：

```
TOLERANCE=10**-6

def are_floats_equal(a,b):
  return abs(a-b) <= TOLERANCE 
```

PS：如果你真的很想用浮点数进行精确的、任意精度的计算，请使用[十进制模块](http://docs.python.org/2/library/decimal.html)。顺便说一句，该页面有一些关于常规浮动失败点的好例子。但是，请注意，这比使用常规浮点数要慢得多，所以除非你真的需要它，否则不要这样做。

# objective-c - 在 NSScrollView (Mac OS X) 中加载和显示图像时需要的特定行为

> ID：15000023
> 
> 赞同：0
> 
> 时间：2013-02-21T10:33:36.093
> 
> 标签：objective-c, nsview, nsscrollview

我对 Objective-C 非常缺乏经验，而且还很陌生，我想问一个有条理的问题。我想做的是：

1.  加载用户提供的图像以显示在屏幕上。用户应该能够缩放。所以对我来说最好使用 NSScrollView 来绘制图像。我对行为有其他要求
2.  加载图像时，它应该适合 NSScrollView 而不会在任一方向上拉伸。
3.  当用户现在更改 NSScrollView 的大小（通过更改窗口的大小）时，应该适当地调整图像的大小。
4.  如果用户在某些时候缩放图像，则在更改 NSScrollView 的大小时不应调整其大小。如果图像被缩放以适应 NSScrollView（意味着加载时），则应在更改 NSScrollView 的大小时再次调整其大小。我认为这与 Apple 的预览应用程序中的行为相同。

我想这对于有经验的程序员来说很容易实现，但我有一些问题。这是我尝试过的。

我通过加载图像

```
[[NSImage alloc] initWithContentsOfFile:imagePathStr]; 
```

单击按钮。我还可以通过在绘制之前更改图像的大小来显示它以很好地适应（加载时）到 NSScrollView 中。但是我无法在调整大小或缩放时获得正确的行为（我使用 NSScrollView biuld-in 缩放功能）。有人可以提供某种需要执行以实现我想要的关键点的列表吗？还是有人宁愿看到我的显式代码来告诉我我做错了什么？

# asp.net - ASP.NET：找不到 Json 获取 404

> ID：15000026
> 
> 赞同：0
> 
> 时间：2013-02-21T10:33:42.197
> 
> 标签：asp.net, json, jquery-plugins, grid

我正在尝试运行[EditableGrid](http://www.editablegrid.net/en)提供的示例程序之一，以使用 asp.net 在我的 localhost 上运行。这是加载json数据的例子。它抛出一个异常说：

```
GET http://localhost:60218/grid.json?22895 404 (Not Found) 
```

这是它发生的行：

```
editableGrid.loadJSON("grid.json"); 
```

JSON 文件也放置在我的解决方案层次结构中。我是可编辑网格的新手，所以不知道这里出了什么问题？我也碰巧在可编辑网格上找不到任何帮助或没有帮助，我应该将它用于网格吗？还是我应该研究其他插件？其他 JQGrid...或多或少类似于 editablegrid..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:26:32.353

我认为原因很清楚——EditableGrid 是在 php 下运行的！

如果您希望将 php 与 asp.net 混合使用，可以尝试，但不适用于 Visual Studio 用于测试和调试的小型 Web 服务器。

# python - 当我将参数传递给 Django shell 时如何将参数传递给 python 脚本

> ID：15000030
> 
> 赞同：1
> 
> 时间：2013-02-21T10:33:51.353
> 
> 标签：python, django, ubuntu

所以我有一个集成测试，可以一起测试我的应用程序的多个组件，整个端到端测试。我需要将它通过管道传输到 Django shell 以便能够访问模型等。但我还需要将参数传递给脚本。这就是我正在做的事情：

```
venv/bin/python src/manage.py shell < src/integration_tests/endtoend.py 
```

但我想做的是：

```
venv/bin/python src/manage.py shell < src/integration_tests/endtoend.py -o 2 
```

如果我这样做，它会引发异常：

```
Usage: src/manage.py shell [options] 

Runs a Python interactive interpreter. Tries to use IPython, if it's available.

src/manage.py: error: no such option: -o 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:45:52.790

您需要编写一个接受参数并输出脚本的 Python 脚本，以便将其通过管道传输到 manage.py。

```
python src/integration_tests/endtoend.py -o 2 | python src/manage.py shell 
```

我很确定我不会那样做，但这就是传递命令行参数所需要做的。

其他选项是环境变量和配置文件。

# asp.net-mvc - MVC 将表单发送到页面进行测试

> ID：15000036
> 
> 赞同：1
> 
> 时间：2013-02-21T10:34:15.817
> 
> 标签：asp.net-mvc, asp.net-mvc-3, actionresult

我正在使用 MVC 并有一个`test.cshtml`包含表单的视图 ()。有没有办法将它发送到另一个视图`page.cshtml`而不是相同的 [http] 控制器进行测试`ActionResult test()`？

我正在尝试在更新 db.xml 之前验证所有表单字段值是否正确。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:25:21.120

在你看来

```
@using (Html.BeginForm("Add", "Weight", FormMethod.Post))    
//where "Add" is the Action name and Weight is the controller (WeightController) -> http://foo/Weight
{
......
} 
```

带模型

```
public class WeightModel
{
    [Required] public string Description { get; set; }
    [Required] public int Weight { get; set; }
    public string Notes { get; set; }
} 
```

在你的控制器中

```
 [HttpPost]
    public ActionResult Add(WeightModel model)
    {
        if (!ModelState.IsValid) //framwork will validate based on attributes on model
        {
            return View("Index", model);
        }
        else
        {
            //save to db
            return RedirectToAction("Added");
        }
    } 
```

# php - 通过三元表达式设置不为空时的值

> ID：15000038
> 
> 赞同：4
> 
> 时间：2013-02-21T10:34:24.083
> 
> 标签：php, ternary-operator

我有一个非常简短的问题要问你：

我从 Excel 工作表中读取数据并希望将其转换为 assoc 数组。但有时某些单元格中没有给出值。因此，如果发生这种情况，我想将数组的值设置为 0。

现在我用三元运算符这样做，我很高兴今天发现：

```
(isset($excel->sheet[0]['cells'][$row][$value]) ? $excel->sheet[0]['cells'][$row][$value] : 0) 
```

在这种情况下，有什么办法可以缩短 repitition 吗？它有效，但不是那么漂亮:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:44:06.690

虽然不推荐这样做，但我会采用以下方式（PHP 5.3）：

```
(@$excel->sheet[0]['cells'][$row][$value] ? : 0); 
```

错误抑制运算符是一团糟，但在这种情况下，您唯一抑制的是关于未定义变量的众所周知的通知。

另一种选择（如[Álvaro G. Vicario](https://stackoverflow.com/users/13508/lvaro-g-vicario)所述）可以是简单的转换为`int`（如`NULL`转换为`0`）：

```
(int)@$excel->sheet[0]['cells'][$row][$value]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:59:38.083

另一种选择是创建一个函数来检查此类变量的存在——也许它有点过度设计、过度杀伤或太多——：

```
function iset($array, $output) {
    $args = func_get_args();
    $val = $array;
    for ($i = 1; $i < count($args) - 1; $i++) {
        if (!isset($val[func_get_arg($i)])) {
            return func_get_arg(func_num_args() - 1);
        }
        $val = $val[func_get_arg($i)];
    }
    return $val;
} 
```

然后像这样使用函数：

```
$var = iset($excel->sheet, 0, 'cells', $row, $value, "DEFAULT_VALUE"); 
```

# php - 电子邮件退回处理程序使用哪种设计模式？

> ID：15000039
> 
> 赞同：0
> 
> 时间：2013-02-21T10:34:25.737
> 
> 标签：php, oop, design-patterns

我编写了一个电子邮件退回处理程序类（在 PHP 中），它最初仅用于解析格式良好的符合 RFC 的电子邮件退回消息。但是，随着时间的推移，我不断添加越来越多的方法来处理不合规的退回邮件，您可以说这是一种不同的退回“类型”。然后，为了响应客户的请求，我添加了对 ARF 消息的支持，这是第三种退回类型。而且，当然，现在有不合规的 ARF 消息在四处飘荡，所以我也必须为此添加一个解析器。

因此，现在该类处理四种反弹类型：

1.  符合 RFC
2.  不符合 RFC
3.  符合 ARF 标准
4.  ARF 不合规

拥有多种类型的消息意味着我必须将“文本嗅探器”放入初始化函数中，该函数调用适当的内部解析函数，整理结果并返回它。这部分很重要，因为需要一个公共方法来接收任何电子邮件文本并返回格式化数组（is_a_bounce=yes/no、is_an_ARF=yes/no、RFC 代码、被拒绝的收件人电子邮件地址），如下所示：

```
$arrayResult = $bounceHandler->parse($raw_email_text); 
```

问题，这个类很乱/人满为患，我想将它重构为更正式和正确的 OOP 设计模式。

*   你会推荐哪种设计模式？
*   任何 PHP 示例或文章/博客？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:11:51.783

看起来您本质上是在描述一个类，该类抽象了如何处理反弹，并具有不同的实现来处理不同的反弹。这与桥接设计模式的描述相匹配。

本质上，您将拥有一个提供接口的抽象类（在本例中为函数 parse($raw_email_text) ）并决定在“嗅探”消息后使用哪个 Handler 实现。

您可以为处理程序实现创建一个接口，允许您在需要新功能时扩展可用的替代实现。您还可以确保抽象实现相同的接口，允许用户在知道消息类型的情况下使用实现而不是抽象。

# perl - 使用“last”关键字终止循环时不会重新初始化哈希值

> ID：15000043
> 
> 赞同：0
> 
> 时间：2013-02-21T10:34:36.247
> 
> 标签：perl, perl-data-structures

考虑以下嵌套循环：

```
my %deleted_documents_names = map { $_ => 1 }
                $self->{MANUAL}->get_deleted_documents();

while($sth->fetch){
  .....
  .....
  .....
  while(my ($key, $value) = each(%deleted_documents_names)){
        {
         if($document_name eq $key){
              $del_status=1;
              last;
         }
        }
  if($del_status==1){next;} 
  .....
  .....
  .....
  .....
} 
```

现在，我举一个示例，其中三个值（A，B，C）将与两个值（B，C）进行比较。

```
First scan:
A compared to B
A compared to C

Second scan:
B compared to B 
Loop is terminated.

Third scan:
C is compared with C. 
```

在这种情况下，应首先将 C 与 B 进行比较，作为第一个值，但此比较被跳过，它仅从发现相等的元素之后的下一个元素开始扫描。如果我删除最后一个终止条件并让循环运行总扫描次数，那么它工作得很好，但我需要找出为什么在这种情况下，$key 指的是下一个比较值而不是第一个值一次循环在使用 last 关键字终止后重新启动。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:51:05.357

采用

```
keys %deleted_documents_names ; # Reset the "each" iterator. 
```

见[键](http://p3rl.org/keys)。

但是，你为什么要遍历哈希？你为什么不只是

```
if (exists $deleted_documents_names{$document_name}) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T10:53:41.093

`each()` is a function that returns key-value pairs from a hash until it reaches the end. It is not aware of the scope it was called in, and doesn't know anything about your while loop logic. [See the documentation here](http://perldoc.perl.org/functions/each.html).

It can be reset by calling `keys %hash` or `values %hash`.

**Update:** however, as Choroba points out, you don't really need this loop. Your loop and accompanying logic could be replaced by this:

```
next if (exists $deleted_documents_names{$document_name}); 
```

(Hashes are designed with a structure that allows a key to be quickly found. In fact, this structure is what gives them the name "hashes". So doing it this way will be much more efficient than looping through all elements and testing each one).

# javascript - Ebay 自定义列表标题

> ID：15000044
> 
> 赞同：0
> 
> 时间：2013-02-21T10:34:38.350
> 
> 标签：javascript, html, ebay-api

我一直在使用自定义标题的 ebay 商店，我正在使用 javascript 修改现有标题，所以我的最终产品应该看起来像这样：[http](http://stores.ebay.com/coastnationalsales) : //stores.ebay.com/coastnationalsales 我已经完成了这个任务，但现在我的客户希望商店出现在这样的每个项目下：[http](http://www.ebay.com/itm/iLuv-iEP322-City-Lights-Explosive-Bass-In-Earphones-Headphones-/330863436337) ://www.ebay.com/itm/iLuv-iEP322-City-Lights-Explosive-Bass-In-Earphones-Headphones-/330863436337 我一直在研究几个类似的 ebay 商店，它们都有一个 iframe，包含商店。有两种可能的解决方案：创建这样一个系统，将每个列出的项目保存在我们自己的数据库中，并使用 iframe 作为描述添加，或者使用现有的。我检查了几家 ebay 商店，它们都有相同的 iframe 源：

*   [http://vi.raptor.ebaydesc.com/ws/eBayISAPI.dll?ViewItemDescV4&item=370762312858&t=0&tid=10&category=40177&seller=us_micro&excSoj=1&rptdesc=1&excTrk=1&tto=3500&lsite=0](http://vi.raptor.ebaydesc.com/ws/eBayISAPI.dll?ViewItemDescV4&item=370762312858&t=0&tid=10&category=40177&seller=us_micro&excSoj=1&rptdesc=1&excTrk=1&tto=3500&lsite=0)
*   [http://vi.raptor.ebaydesc.com/ws/eBayISAPI.dll?ViewItemDescV4&item=330872380297&t=0&tid=10&category=10976&seller=pompeii3&excSoj=1&rptdesc=1&excTrk=1&tto=3500&lsite=0](http://vi.raptor.ebaydesc.com/ws/eBayISAPI.dll?ViewItemDescV4&item=330872380297&t=0&tid=10&category=10976&seller=pompeii3&excSoj=1&rptdesc=1&excTrk=1&tto=3500&lsite=0)
*   [http://vi.sandbox.ebaydesc.com/ws/eBayISAPI.dll?ViewItemDescV4&sd=1&item=110109067274&bv=safari&t=1352025083000&vct=1&nv=2&js=-1&ssid=0&category=98624&ds=0&seller=testuser_kjo&caz.html](http://vi.sandbox.ebaydesc.com/ws/eBayISAPI.dll?ViewItemDescV4&sd=1&item=110109067274&bv=safari&t=1352025083000&vct=1&nv=2&js=-1&ssid=0&category=98624&ds=0&seller=testuser_kjo&caz.html)
*   [http://vi.raptor.ebaydesc.co.uk/ws/eBayISAPI.dll?ViewItemDescV4&item=370760386229&t=1355740747000&tid=310&category=57920&seller=rococlothing&excSoj=1&rptdesc=1&excTrk=1&tto=3500&lsite=3](http://vi.raptor.ebaydesc.co.uk/ws/eBayISAPI.dll?ViewItemDescV4&item=370760386229&t=1355740747000&tid=310&category=57920&seller=rococlothing&excSoj=1&rptdesc=1&excTrk=1&tto=3500&lsite=3)
*   [...]

这告诉我，他们都是同一家公司的客户，创建了这样的列表系统，或者它是某种默认的 ebay 功能，我找不到。

如何创建此类商品详情页眉？我对任何想法持开放态度 - html + iframe、javascript、...

先感谢您。

**PS**当我在列出的项目中包含标题时，它包含默认标题而不是我的自定义标题，因此默认情况下不包含我所做的javascript修改...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:59:12.887

您必须将店铺标题包含在列表中，并且您可以在 ebay 帐户设置中停用默认店铺标题。

# ios - lldb 调试 (lldb) 外壳 malloc_history 1545 0x2ffcc000

> ID：15000045
> 
> 赞同：0
> 
> 时间：2013-02-21T10:34:39.750
> 
> 标签：ios, xcode, lldb

我正在使用 xcode 4.6：我想使用 lldb 进行调试：

IFC_findComments:foreignId:offset:source:noCache:] [第5669行]:IFC_findCommentsXXXX 2013-02-21 18:26:06.478 myshine[1545:707] -[AppDelegate applicationDidReceiveMemoryWarning:] [第467行]:applicationDidReceiveMemoryWarning

myshine(1545,0x2ffcc000) malloc: *** 对象 0x8e4a14 错误：已释放对象的校验和不正确 - 对象可能在被释放后被修改。***在 malloc_error_break 中设置断点进行调试

```
(lldb)  malloc_history 1545 0x2ffcc000
(lldb) shell malloc_history 1545 0x2ffcc000 
```

(lldb)

但是如果我输入 shell malloc_history 1545 0x2ffcc000 什么都看不到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:47:57.923

malloc_history 和 shell 都不是有效的 LLDB 命令。我很惊讶 LLDB 至少没有抱怨这一点。

# ruby-on-rails - 如何为 current_user 获取用户角色的 slug

> ID：15000050
> 
> 赞同：0
> 
> 时间：2013-02-21T10:35:01.173
> 
> 标签：ruby-on-rails, ruby, authentication, devise, roles

我使用 devise gem 进行基于角色的身份验证；所有用户都可以有很多角色，我怎样才能只检索 current_user 的用户角色 slug？

现在在我的 User.rb 模型中，我创建了一个名为 get_role 的方法

用户.rb

```
def get_role
  roles.each { |role| role.slug.downcase }
end 
```

我在这样的视图中调用此方法

```
current_user.get_role 
```

它返回这个：

```
[#<Role id: 3, name: "Seller", created_at: "2013-01-10 21:04:46", updated_at: "2013-01-10 21:04:46", slug: "Venditore">] 
```

为什么在该方法中调用 each 块？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:37:37.880

使用`map`( [doc for map method](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map) ) 而不是`each`( [doc for each method](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each) ):

```
def get_role
  roles.map { |role| role.slug.downcase }
end 
```

当您使用`each`返回值迭代集合时，将是集合本身。`each`迭代器用于对每个元素做一些事情。它的属性允许您编写`each`方法调用链：

```
workers.each{ |w| w.take_a_break }.each{ |w| w.just_joke_go_to_work } 
```

不是很聪明的例子，因为我们可能会这样做：

```
workers.each{ |w| w.take_a_break; w.just_joke_go_to_work } 
```

但只是作为一个例子。

# interop - 在 C# 中使用本机 C++（使用 /CLR 编译）：为什么它假装可以工作？

> ID：15000051
> 
> 赞同：0
> 
> 时间：2013-02-21T10:35:05.923
> 
> 标签：interop, c++-cli

我有一段“普通”C++ 代码，我正试图让 C# 客户端可以使用它。我已经用 /CLR 成功编译了这个。我现在知道这还不够：我必须引入托管包装类（“ref”）以使代码可以从托管代码中调用。这个问题是关于在我介绍 ref 类*之前发生的事情。*

我发现在 C# 项目中可以看到原生 C++ 类，并且我可以编写

```
MyNativeClass mnc = new MyNativeClass(); 
```

...尽管编译器拒绝了对实例调用方法的任何尝试。我发现，当我运行 C# 代码时，从未调用过 MyNativeClass 构造函数——事实上，实例化 mnc 的尝试似乎根本没有产生任何代码，因此完成而没有错误。

C# 是如何解释我项目中的本机类型的？为什么编译器显然允许我实例化一个实例？为什么方法与类型本身不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:56:04.860

您犯了两个错误以使此代码正常工作。首先是您声明了 C++ 类*public*，如下所示：

```
 public class MyNativeClass {}; 
```

这不是 C++ 中有意义的语法，但 C++/CLI 编译器允许。省略*public*会在您的 C# 代码中产生一条错误消息，CS0122：“Foo is inaccessible due to its protection level”。

第二个错误是你编译你的本地 C++ 类时使用 /clr 有效。效果很好，任何符合 C++03 的代码都可以编译为 IL，并通过抖动实时编译为机器代码，就像托管代码一样。并且执行也很好。但是这样做效率不高，您失去了使用编译时优化器来生成最佳代码的优势。它仍然得到优化，但现在由于抖动，它没有像 C++ 代码优化器那样出色的工作时间。您可以通过将 C++ 代码移动到单独的源代码文件中来避免这种情况，这样您就可以在 /clr 不生效的情况下对其进行编译。或者通过使用源代码中管理的#pragma。

无论如何，您最终得到的是一个程序集，其中确实包含任何托管编译器都可以看到的 MyNativeClass 声明。通过在程序集上运行 ildasm.exe，您可以自己看到一些东西。您会看到它被嵌入为*值类型*类型。只是一个没有构造函数和方法的字节块。从托管的角度来看，这对于 C++ 对象来说是一个不错的匹配，只是可以存储在任何可以存储值类型的地方的字节。在 C# 中声明该类型的变量有效，但没有做任何有用的事情，它只是创建所有字节设置为 0 的 blob。此声明的唯一可能用途是您可以声明指向该类的类型化指针并传递它周围，​​仅此而已。

# gwt - 使用 Spring 登录 GWT - URL 问题

> ID：15000056
> 
> 赞同：0
> 
> 时间：2013-02-21T10:35:22.797
> 
> 标签：gwt, login, spring-security

我正在尝试解决 GWT 中的 URL 登录问题。我们正在使用弹簧安全性。问题是一切都在开发模式下工作，但在构建为 WAR 的 tomcat 中却失败了。

application-context-security.xml 设置：

```
<form-login authentication-success-handler-ref="mySuccessHandler" authentication-failure-handler-ref="myFailureHandler" login-processing-url="/login" /> 
```

我有我自己的 login.html 文件有 si HTML 表单元素`<form action="/login">`

我有两个 Spring 处理程序，它们重定向到 Login.html 或 MyApplication.html（内容、服务）取决于用户是否进行身份验证。

如果我将我的应用程序打包到 vsp.war (localhost:8080/vsp/) 并运行它，它会转到 Login.html，这是正确的。但是，无论我是否进行身份验证，它总是以 404 状态进入 localhost:8080/login。

我最终的 WAR 结构是：

*   登录
    *   login.nocache.js
*   VSSP
    *   vsp.nocache.js
*   登录.html
*   我的应用程序.html

我有两个用于登录和其余应用程序（服务）的模块。

失败认证处理方法示例：

```
@Override
public void onAuthenticationFailure(HttpServletRequest request,
        HttpServletResponse response, AuthenticationException exception)
        throws IOException, ServletException {

    // always send HTTP 403
    response.setStatus(HttpServletResponse.SC_FORBIDDEN);
    final StringBuilder URL = new StringBuilder("Login.html?");
    if(!GWT.isProdMode()) {
        URL.append("gwt.codesvr=127.0.0.1:9997&");
    }
    URL.append("error=true");
    response.sendRedirect(URL.toString());

} 
```

任何人都可以帮助我在哪里做错了吗？问题是如果必须有 /Login.html 或 Login.html ot /login 或其他不同的东西，我不理解这些 URL。

任何帮助将不胜感激。

问候卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:09:00.750

问题解决了。我已经使用 /login 来进行 Spring 安全登录，还使用 ​​Login.gwt.xml、Login.java 来处理 GWT 部件。正确的 URL 存在问题。当我将 Spring 安全登录更改为不同的 (/differLogin) 时，everythinkg 在托管和 Web 模式下都可以正常工作。

# c# - 通过控制器上的基类属性传递派生类

> ID：15000058
> 
> 赞同：0
> 
> 时间：2013-02-21T10:35:35.463
> 
> 标签：c#, asp.net-mvc-3, inheritance, asp.net-mvc-4, polymorphism

我正在一个 ASP.NET MVC 4 Web 应用程序中构建一个向导式的多步骤过程。我使用 TempData 来保留前面步骤中的信息，因为向导不是严格线性的——用户在第一页上的选择实际上导致他们看到第三页的三个选项之一。我通过使用他们的选择将三个派生类之一分配给第三页的视图模型上的基类属性来实现这一点。然后页面本身使用自定义模型绑定器允许我使用`@Html.EditorFor(m => m.BaseContainer)`并让它显示正确的模板供用户填写。我的问题是当第三页返回时，控制器方法当然需要一个基类对象，这意味着当我将它保存在 TempData 中时，它只保存基类属性。

我可以按照以下方式进行一系列检查`if (viewModel.BaseContainer is DerivedClass1)`，但这似乎是一种黑客行为。使用基类的整个抽象点是控制器不需要知道此时它是哪一个。有没有更优雅的方法来保存对象而不丢失派生类的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:45:15.843

几个月前我们解决了同样的问题。我们为向导中的每个步骤使用较小的视图模型来解决它，然后，在成功验证后，我们将值复制到一个大视图模型中（包含向导中所有内容的属性）。然后我们将这个大视图模型存储进去`TempData`并进行下一步。

如果您在从基类派生时添加新属性，那么您正在扩展其接口，您可以为每个派生类中的新属性创建额外的接口，但这听起来不是一个简单的解决方案。

# c# - 创建选项卡项目的副本

> ID：15000059
> 
> 赞同：1
> 
> 时间：2013-02-21T10:35:40.707
> 
> 标签：c#, wpf, xaml, listview, tabs

我在 xaml 文件中有一个`TabControl`和一个`TabItem`包含`ListView`. 我想使用相同的`ListView`架构动态添加新选项卡。

我试着这样做：

```
ListView newList = new ListView();
newList = my_xaml_listview; 
```

然后我尝试将其插入新的`TabItem`. 问题是这段代码返回给我一个对我原来的引用`ListView`。

如何创建具有相同`ListView`架构（相同列、颜色等）的新副本并将其添加到新副本中`TabItem`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:10:47.240

正如我在评论中提到的，当涉及到颜色/边距/尺寸时，您可以使用 a`Style`作为我相信您已经拥有的资源。

对于列，您将执行完全相同的操作，但将 a`GridView`作为资源并在`ListView`您创建的每个列之间共享。

```
<Window.Resources>
    <GridView x:Key="MyViewGrid">
        <GridViewColumn Header="Column 1" Width="100" />
        <GridViewColumn Header="Column 2" Width="100" />
    </GridView>
</Window.Resources>
<ListView View="{DynamicResource MyViewGrid}" /> 
```

..并在代码中：

```
myNewListBox.View = (GridView)Resources["MyViewGrid"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:39:54.967

看看这个[Iclonable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)

试试这个[Iclonable 样本](http://csharp.2000things.com/2010/11/07/143-an-example-of-implementing-icloneable-for-deep-copies/)

# clickonce - 嵌入清单后无法签署引导程序可执行文件 (setup.exe)

> ID：15000061
> 
> 赞同：3
> 
> 时间：2013-02-21T10:35:45.260
> 
> 标签：clickonce, signing, bootstrapper, signtool, mt

我们正在使用 Nant 准备使用 Clickonce 设置我们的软件。

使用 signtool 对 dll(s) 和 exe(s) 进行签名。

**标志工具命令**：`signtool sign /f ${certFile} /p ${certFilePwd} {path of setup.exe}`

使用**Mt.exe**将清单嵌入 exe 文件中。

**山命令**：`mt -manifest {manifest file} -outputresource:{filepath};#1`

我们有两个exe文件。一个是我们的 app.exe，第二个是 setup.exe（由 clickonce 创建的引导程序）

app.exe 在嵌入清单后签名没有问题。

**但是在嵌入清单后**签名 setup.exe给出以下错误：

`SignTool Error: SignedCode::Sign returned error: 0x80070057\. The parameter is incorrect.`

清单文件包含：

```
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
    <ms_asmv2:trustInfo xmlns:ms_asmv2="urn:schemas-microsoft-com:asm.v2">
        <ms_asmv2:security>
            <ms_asmv2:requestedPrivileges>
                <ms_asmv2:requestedExecutionLevel level="asInvoker" 
                           uiAccess="false"></ms_asmv2:requestedExecutionLevel>
            </ms_asmv2:requestedPrivileges>
        </ms_asmv2:security>
    </ms_asmv2:trustInfo>
</assembly> 
```

如果我在嵌入清单之前签名没有错误，但它不能工作，因为任何文件都需要在更改后辞职。

我还尝试了以下步骤：

1.  登录 setup.exe
2.  嵌入清单
3.  退出 setup.exe（此步骤中的错误与上述相同）

有没有解决这个问题的方法/解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T16:25:24.573

我找不到可以引用的来源，但我不久前遇到了类似的问题，您无法签署之前已签名的 setup.exe。您可以从头开始生成引导程序（[请参阅 MSDN](http://msdn.microsoft.com/en-us/library/vstudio/ms164294.aspx)），应用您的清单，然后对其进行签名（第一次！）它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-02T07:36:25.810

# 结论

> 有时，**混淆器工具**会生成**不可签名的**文件。这意味着，对于我尝试过的任何事情， *signtool都会返回错误 0x80070057。*
> 
> 我还注意到“无效”文件上的**版本**和**语言**属性为空白，请参阅[![第一个 DLL 有效，而第二个 DLL 无效](../Images/98ccde7d7f81cb851dd5ba285eb3329f.png)](https://i.stack.imgur.com/9FJ18.png)
> 
> 所以，我的结论是，这是**文件本身**的问题，而不是签名工具或签名服务器的问题。

# 我是如何得出这个结论的

## 我尝试了所有建议的答案：

*   在这个页面
*   [signtool 无法使用时间戳对 SHA2 和 SHA1 进行双重签名](https://stackoverflow.com/questions/18542160/signtool-failing-to-dual-sign-sha2-and-sha1-with-timestamps)
*   [如何正确地对带有时间戳的代码进行双重签名？](https://stackoverflow.com/questions/20601575/how-does-one-correctly-dual-sign-code-with-a-timestamp)

## 我尝试了多个标志服务器：

*   [http://timestamp.digicert.com](http://timestamp.digicert.com)
*   [http://tsa.starfieldtech.com](http://tsa.starfieldtech.com)
*   [http://timestamp.verisign.com](http://timestamp.verisign.com)
*   [http://timestamp.globalsign.com](http://timestamp.globalsign.com)
*   [http://sha256timestamp.ws.symantec.com](http://sha256timestamp.ws.symantec.com)
*   [http://timestamp.comodoca.com](http://timestamp.comodoca.com)
*   [http://timestamp.geotrust.com](http://timestamp.geotrust.com)

# php - PHP - imagettftext 不工作并且安装了 GD

> ID：15000063
> 
> 赞同：9
> 
> 时间：2013-02-21T10:35:56.847
> 
> 标签：php, image, gd, imagettftext

我仍在寻找这个问题的答案已经很长时间了。我找到的所有解决方案都围绕着捕捉字体名称，但我很确定这不是我的问题。

**好像安装了GD**

```
array(11) {
  ["GD Version"]=>
  string(27) "bundled (**2.0.34 compatible**)"
  ["FreeType Support"]=>
  bool(false)
  ["T1Lib Support"]=>
  bool(false)
  ["GIF Read Support"]=>
  bool(true)
  ["GIF Create Support"]=>
  bool(true)
  ["JPEG Support"]=>
  bool(true)
  ["PNG Support"]=>
  bool(true)
  ["WBMP Support"]=>
  bool(true)
  ["XPM Support"]=>
  bool(true)
  ["XBM Support"]=>
  bool(true)
  ["JIS-mapped Japanese Font Support"]=>
  bool(false)
} 
```

上面你可以看到我的GD支持。我的 PHP 版本是 5.3，我在 Linux 上运行。

我尝试了来自不同网站的几个不同的代码示例，但没有一个有效。ImageString 对我有用，但我需要让**imagettftext**工作..

这是我现在尝试的最后一个代码-

```
<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);

// Set the content-type
header('Content-Type: image/png');

// Create the image
$im = imagecreatetruecolor(400, 100) or die("Can't create image!");

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = 'Testing';
// Replace path by your own font path
$font = 'arial.ttf';

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, 'arial.ttf', $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, 'arial.ttf', $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im);
?> 
```

**结果：** [http ://www.7679679.com/app/test-ansi.php](http://www.7679679.com/app/test-ansi.php)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-21T11:52:00.777

有同样的问题，安装了 FreeType，解决方案是

```
 $font = "./Arial.ttf"; // <--- put ./ in front of filename 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-21T10:40:41.457

请注意，您没有安装 Free Type：

```
["FreeType Support"]=>
  bool(false) 
```

**该函数需要 GD 库和 » FreeType 库。**

您需要先安装 Free Type 库，然后才能使用此功能。

尝试安装这些包：s **freetype, freetype-devel**

如果您编译了 PHP，您可以确保在编译期间添加了启用的 freetype：

```
--with-freetype-dir=/usr/include/freetype2/ --with-freetype 
```

或者，如果您使用诸如 YUM 或 APT-GET 之类的东西，那么安装这些库应该非常简单，并且可以通过 google 快速搜索让您入门。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-15T07:22:30.087

好吧，我也有问题

```
$font='arial.tff'; 
```

我认为您应该提供**$font**的绝对路径，例如

```
$font="c:/windows/fonts/arial.ttf"; 
```

我假设您是 Windows 用户。并**删除**

```
header('Content-Type:image/png'); 
```

得到真正的错误

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-12T14:20:54.193

我用这个解决方案解决了这个问题：

```
$fontfile= __DIR__.'/Fontname.ttf'; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-03T10:14:21.840

Andrew 是对的，[imagettftext 的 php 手册](http://php.net/manual/en/function.imagettftext.php)指出 FreeType 需要使用`imagettftext`,`imagettfbox`等。大多数人 GD 开发包会自动安装 FreeType：

费多拉/红帽：

```
yum install gd gd-devel php-gd 
```

Debian/Ubuntu：

```
apt-get install php5-gd libgd2-xpm libgd2-xpm-dev 
```

此错误可能在您的日志中：

```
PHP Fatal error:  Call to undefined function imageTTFText() 
```

# ruby-on-rails - Rails 中的活动记录

> ID：15000071
> 
> 赞同：0
> 
> 时间：2013-02-21T10:36:24.400
> 
> 标签：ruby-on-rails

有没有办法使用活动记录将记录从文件插入数据库？

假设我有一个`test.txt`包含以下内容的文件：

```
1,20,sonal
3,34,Ram 
```

我有一个包含`students`字段`roll_nu`、`marks`和的表`name`。

我想使用活动记录将文件记录存储在表中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:41:52.543

这是一个简单的 CSV 文件，因此您可以：

```
CSV.parse('path/to/your/file.csv') do |row|
  Student.create(roll_nu: row[0], marks: row[1], name: row[2])
end 
```

# ember.js - 尝试使用已在使用的 id 注册视图

> ID：15000073
> 
> 赞同：10
> 
> 时间：2013-02-21T10:36:31.030
> 
> 标签：ember.js

由于这个[提交](https://github.com/emberjs/ember.js/commit/04df12c25fe3c9afb21b5e055e74d58ce3339f2f)，我们不能用一个 ID 注册一个视图两次。这似乎合乎逻辑。但是我遇到了一个问题。

**路由器**

```
App.Router.map(function() {
    this.resource('contact', { path: '/contacts/:contact_id' });
});

App.ContactShowRoute = Ember.Route.extend({}); 
```

**看法**

```
App.ContactShowView = Em.View.extend({
   elementId: "page-show-contact"
}); 
```

考虑到我已经在**App.ContactShowRoute**路线上。我想**transitionTo()**相同的路线但具有不同的上下文。

我希望 emberjs 销毁视图然后再次创建它，但我收到以下错误：

```
Uncaught Error: assertion failed: Attempted to register a view with an id already in use: page-show-contact 
```

我不想两次实例化具有相同 ID 的视图。我只想让 ember 破坏实际的，然后创建一个新的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:56:22.763

It seems to be a bug in the current version. Maybe you should open a ticket. Until this is fixed, this might help:

```
App.ContactShowRoute = Ember.Route.extend({

   renderTemplate : function(controller, model) {
    if(this.lastRenderedTemplate == this.routeName) 
       return; 
    return this._super();
   }
}); 
```

# mysql - MySQL 不同的函数

> ID：15000075
> 
> 赞同：-2
> 
> 时间：2013-02-21T10:36:34.780
> 
> 标签：mysql, distinct

我有一个包含电子邮件、名字和姓氏列的客户订单表。我想给所有购买过的人发电子邮件。我认为使用：

```
SELECT DISTINCT email, firstname, surname FROM ... 
```

将努力返回所有唯一的电子邮件地址和名字和姓氏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:45:10.657

```
SELECT 
contact_email, firstname, surname
FROM
customer_details
GROUP BY contact_email 
```

哈哈，改用 GROUP BY :)

# java - 如何使用 JAXB 获取 xml 属性

> ID：15000086
> 
> 赞同：6
> 
> 时间：2013-02-21T10:36:57.250
> 
> 标签：java, xml-parsing, jaxb

这是我的xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <organization>
      <bank>
        <description>aaa</description>
        <externalkey>123</externalkey>
        <property name="pName" value="1234567890" />
      </bank>
   </organization> 
```

我为这个xml使用了JAXB和unmarshall，我可以获得描述和externalkey。但我无法获得具有价值的属性名称。

*   这是我用于解组的 java 类：

    ```
    JAXBContext jb = JAXBContext.newInstance(Organization.class);
    Unmarshaller um = jb.createUnmarshaller();
    Organization org = (Organization) um.unmarshal(new File("\\upload\\bank999999.xml"));
    System.out.println(org.getBank().getDescription());
    System.out.println(org.getBank().getExternalkey()); 
    ```

*   组织.java

    ```
    @XmlRootElement
    public class Organization {
    Bank bank = new Bank();

    public Bank getBank() {
      return bank;
    }

    public void setBank(Bank bank) {
     this.bank = bank;
    }
    } 
    ```

*   银行.java

    ```
    @XmlRootElement
    public class Bank {
     private String description;
     private String externalkey;
     private String property;

    //..GETTER and SETTER
    } 
    ```

    如何获取属性名称和值？感谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T10:52:20.873

**银行**

您需要将`property`属性从 a更改`String`为域对象。

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Bank {
    private String description;
    private String externalkey;
    private Property property;
} 
```

**财产**

然后你的`Property`对象看起来像：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Property {

    @XmlAttribute
    private String name;

    @XmlAtrribute
    private String value;

} 
```

# php - PHP - Paypal IPN 集成问题

> ID：15000094
> 
> 赞同：0
> 
> 时间：2013-02-21T10:37:33.900
> 
> 标签：php, paypal, paypal-ipn

页面上有paypal按钮。有 2 个带有 paypal 按钮的自定义字段。我在 ipn.php 页面上收到 IPN 响应。我从贝宝网站得到了这个代码。

当我使用沙盒进行测试时，付款是从买家账户中扣除并存入商家账户的。但是数据没有插入到我在下面的代码最后提到的数据库表中。我也尝试在名为“custom”的单个变量中发送两个变量值，但仍然没有运气。请检查我的代码，让我知道我做错了什么。请帮助我，因为我在过去 2 天都在挣扎。

```
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
      $myPost[$keyval[0]] = urldecode($keyval[1]);
}

$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
$get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
    $value = urlencode(stripslashes($value)); 
} else {
    $value = urlencode($value);
}
$req .= "&$key=$value";
}

$ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

if( !($res = curl_exec($ch)) ) {
// error_log("Got " . curl_error($ch) . " when processing IPN data");
curl_close($ch);
exit;
}
curl_close($ch);

if (strcmp ($res, "VERIFIED") == 0) {
$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];
$custom_memname = $_POST['custom_memname']; // This is 1st custom variable
$custom_mempass = $_POST['custom_mempass']; // This is 2nd custom variable

$str_query_insert="insert into t_fmember(memberid,password) values('" .$custom_memname."','".$custom_mempass."')";  
ExecuteQuery($str_query_insert);
} 
```

* * *

我在我的 ipn.php 页面上添加了这段代码并使用了 IPN 模拟器，但还没有得到任何响应。

```
$post_data_string = serialize($_POST);
mail('mymail@yahoo.com', 'PayPal IPN', $post_data_string); 
```

如果可能，请进一步提供帮助。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T10:47:13.213

您需要使用位于[http://developer.paypal.com](http://developer.paypal.com)的 PayPal 沙盒 IPN 模拟器来测试沙盒模式下的 IPN 通知。

# java - 包装外观模式

> ID：15000095
> 
> 赞同：5
> 
> 时间：2013-02-21T10:37:33.460
> 
> 标签：java, design-patterns

我正在研究设计模式的问题——过去我在某些系统中使用过外观和适配器模式。

现在我找到[了包装外观模式](http://www.cs.wustl.edu/~schmidt/PDF/wrapper-facade.pdf)。如果我理解正确（我只有一个模糊的想法），包装外观是外观和适配器模式的组合。

现在我有一些问题：

*   我通常什么时候使用包装外观模式？
*   有谁知道描述包装外观模式的书（最好是用java中的例子）？
*   谁能给我一个例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T11:22:50.367

那篇论文中的关键总结句是：

> Facades 将复杂的类关系隐藏在更简单的 API 后面，而 Wrapper Facades 将复杂的函数和数据结构关系隐藏在更丰富的类 API 后面。

解释： Wrapper Facade 属于原生、非 OOP API 和代码之上的 OOP 层。这种模式与一般的 Java 开发不太相关；它的示例是具有很多`native`方法的类，例如`java.io`流实现或抽象窗口工具包 (AWT)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:11:40.210

从您提供的链接中，我不确定我能分辨出 a`Facade`和 a之间的区别`Wrapper Facade`-它们似乎做同样的事情：为一组不同的低级功能/功能提供简化的接口。

因此，我不确定这个“包装外观”是否使用了适配器模式——为什么需要它？如果外观的唯一目的是为客户端提供简化的 API，那么它不需要将一件事*适应*另一件事。

同样，如果客户端需要特定的接口，那么 a`Adaptor`将是可行的方法，并且不需要 a`Facade`

同样，这一切都假设我已经正确阅读了该链接:-)

# razor - 使用 Webmatrix 和 Razor 的 Websecurity 注销链接

> ID：15000097
> 
> 赞同：1
> 
> 时间：2013-02-21T10:37:35.257
> 
> 标签：razor, security, webmatrix

我正在创建一个主要基于 WebMatrix 2 提供的模板的应用程序。

一切都很好，尽管我在标题中创建“注销”链接时遇到了一些问题。

目前我有以下链接：

```
<a href="~/account/logout.cshtml">Sign Out</a> 
```

反过来，它指向此页面：

```
@{
    WebSecurity.RequireAuthenticatedUser();

    if (IsPost) {
        // Verify the request was submitted by the user
        AntiForgery.Validate();

        // Log out of the current user context
        WebSecurity.Logout();

        // Redirect back to the return URL or homepage
        var returnUrl = Request.QueryString["ReturnUrl"];
        Context.RedirectLocal(returnUrl);
    } else {
        Response.Redirect("~/");
    }
} 
```

但是当我点击这个链接时，它什么也没做，我仍然登录。我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:44:04.787

问题是，默认情况下，注销链接是（并且应该是）经过验证的 POST 请求，这是为了防止通过将用户重定向到注销页面来将用户注销的 XSS 攻击。

感谢这段代码：

```
if (IsPost) {
    // Verify the request was submitted by the user
    AntiForgery.Validate(); 
```

..您将需要创建一个用于注销的表单，如下所示：

```
<form method="post" action="~/account/logout.cshtml">
    @AntiForgery.GetHtml()
    <input type="submit" value="Logout" />
</form> 
```

当然，您可以使用 JavaScript 让普通链接提交该表单，从而使它看起来像最终用户的普通链接，只有他们受到保护！

# currency - 货币符号是否有 ISO 标准？

> ID：15000102
> 
> 赞同：4
> 
> 时间：2013-02-21T10:37:59.030
> 
> 标签：currency, iso

我需要知道货币符号的iso标准吗？iso-4217 似乎没有涵盖这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:42:14.050

ISO 仅涵盖 3 个字母的货币代码，而不是扩展符号。

如果你想拥有所有的符号，那么你可以在这里查看：[http ://www.xe.com/symbols.php](http://www.xe.com/symbols.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:45:56.270

不确定货币符号是否有 ISO 标准，例如 £、$ 等。ISO-4217 是关于 EUR、USD、GBP 等的。我想这是标准，因为它在货币的显示方式上更加一致并更好地区分货币。

虽然不是标准，但这可能会有所帮助：[http ://www.xe.com/symbols.php](http://www.xe.com/symbols.php)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-05-02T04:40:52.760

您可以从以下链接下载带有 Unicode 字体的新 ISO 代码和符号：

[https://drive.google.com/file/d/0B5DVIZeIMrCQMGRYT3NFd05CSGM/edit?usp=sharing](https://drive.google.com/file/d/0B5DVIZeIMrCQMGRYT3NFd05CSGM/edit?usp=sharing)

# c# - 来自 XNA 的 SoundEffect 继续循环，即使 if 条件明确禁止它

> ID：15000104
> 
> 赞同：0
> 
> 时间：2013-02-21T10:38:06.217
> 
> 标签：c#, windows-phone-7, xna

```
private void updateDisplay(Object displayBlock)
    {
        TimeSpan ts = timeWatch.Elapsed;

        if (stopRing == true)
        {
            stopRing = true;
            Thread.Sleep(1000);
            stopRing = false;
        }

        if (ts.Minutes == 0 && ts.Seconds == 10 && ts.Milliseconds <= 100 && stopRing == false)
        {
            stopRing = true;
            btnSound_Click_1(null, null);
        }

        TextBlock db = (TextBlock)displayBlock;
        db.Dispatcher.BeginInvoke(delegate() { db.Text = String.Format("{0:00}:{1:00}", ts.Minutes, ts.Seconds); });

    } 
```

编辑： if(stopRing == true) 的原因是因为将来，我想在下面的函数中添加更多条件，以便它在一段时间后再次响铃，例如：

```
if (ts.Minutes == 0 && ts.Seconds == 10 && ts.Milliseconds <= 100 && stopRing == false || ts.Minutes == 0 && ts.Seconds == 20 && ts.Milliseconds <= 100 && stopRing == false) 
```

但为了让调试过程更简单，我只设置了 if 条件，以便在 ts.Seconds = 10 时它只响一次。当我按下重置按钮，并且 ts.Seconds 再次从 0 变为 10 时，它应该只响一次，但此时它响了好多次，出乎意料。

我的音效代码是：

```
private void btnSound_Click_1(object sender, RoutedEventArgs e)
    {
       Stream stream = TitleContainer.OpenStream("sounds/Ding.wav");
       SoundEffect effect = SoundEffect.FromStream(stream);
       FrameworkDispatcher.Update();

       effect.Play();
    } 
```

更新显示函数被调用：

```
timer = new Timer(new TimerCallback(updateDisplay), textblockTimer, 0, 100); 
```

发生的情况是，如果我将 TimerCallBack 周期切换到较低的值（例如这里看到的 100），SoundEffect 将播放多次，非常快。如果我将 TimerCallBack 增加到更高的值，例如 500，SoundEffect 将播放 2-3 次，有时很快有时会有大约 200 毫秒的延迟。

我的想法已经用完了......我不知道当我将布尔值指定为真时如何播放声音，从而阻止它执行。任何帮助都感激不尽。

（stopRing 定义在代码之上）

编辑：还有几件事要补充：第一轮，SoundEffect 通常播放得很好（只有一次）。但是如果我按下重置按钮并再试一次，大多数情况下 SoundEffect 会播放多次，有时还可以。

这是我的重置按钮代码：

```
 private void btnReset_Click(object sender, RoutedEventArgs e)
    {
        timeWatch.Stop();
        timeWatch.Reset();
        paused = true;
        btnStartStop.Content = "Start";
        textblockTimer.Text = "00:00";
    } 
```

和我的开始/停止按钮：

```
private void btnStartStop_Click(object sender, RoutedEventArgs e)
    {
        if (paused == true)
        {
            timeWatch.Start();
            timer = new Timer(new TimerCallback(updateDisplay), textblockTimer, 0, 100);
            paused = false;
            btnStartStop.Content = "Pause";
        }
        else
        {
            timeWatch.Stop();
            paused = true;
            btnStartStop.Content = "Start";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:50:56.033

有几件事只是在您的代码中尖叫“逻辑错误”：

*   第二个`if`in`updateDisplay`检查 的值`stopRing`，但`stopRing`此时始终为 false（如果在调用方法时为 true，则前一个代码块将其设置为 false）
*   您将`updateDisplay`函数设置为每 100 毫秒调用一次，但它包含`Thread.Sleep`1000 毫秒。

在这一点上，我不确定究竟是什么导致了您所看到的行为，但这应该为您提供一些调查途径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:53:42.243

我发现了问题，当我按下重置按钮重新校准计时器时，我需要调用 timer.Dispose() 方法，这样之前的计时器实例就不会干扰新的计时器。

解决了！

那么这是什么意思？这意味着我不必再使用 stopRing 布尔值（不是说它有帮助），从而产生更清晰的代码。

谢谢大家的帮助！

# java - 如何检查批处理是否在java代码中运行？

> ID：15000105
> 
> 赞同：0
> 
> 时间：2013-02-21T10:38:08.397
> 
> 标签：java, jakarta-ee

我认为可以检查批处理是否在 Java 代码的核心中运行。但我不知道怎么做。

`pid`没有批号可以查吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:45:50.073

您需要使批处理状态可用于以编程方式查询。一些选项包括：

*   在批处理中每个子任务的开始和完成时将条目写入日志文件或数据库
*   在完成每个子任务时更新数据库中的进度/状态条目
*   更新内存字段中的进度/状态条目并通过 JMX 提供

# obsolete - 过时和废弃代码之间的区别

> ID：15000106
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:38:09.820
> 
> 标签：obsolete

术语“过时代码”和“废弃代码”有什么区别？如果存在差异，哪些方法可以减少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:54:56.800

就我个人而言，我会说过时的代码是存在但不再使用的方法。例如不推荐使用的方法/函数。我将浪费代码定义为仅具有减慢应用程序速度的功能的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:58:05.863

**过时的代码：**

过去可能有用但不再使用的代码，例如使用已弃用协议的代码。

**废物代码：**

从未听说过这个术语，但我想 - 可能会或可能不会执行的代码可以在不改变应用程序工作方式的情况下删除。我想这将包括过时的代码。

以上任何一个都可以从单个语句到整个库。

# mysql - 如何在这种情况下加入 3 个表？

> ID：15000109
> 
> 赞同：0
> 
> 时间：2013-02-21T10:38:24.100
> 
> 标签：mysql, sql

我有 3 个表`product`：`customer`和`transaction`。

产品：

```
id_product    price
    1         1000
    2         2000 
```

顾客：

```
id_customer    name
    1          Tom
    2          Jack 
```

交易：

```
id_transaction    id_product     id_customer    qty    date
    1                 1              1           10    2013-02-21
    2                 2              1           50    2013-02-21
    3                 1              2           15    2013-02-21 
```

我想达到这个结果：

```
id_customer      name      total_transaction      purchase_qty      subtotal
    1            Tom             2                     60            110000
    2            Jack            1                     15             15000 
```

如何使用 MySQL 中的查询获得该结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:51:28.503

```
SELECT  t.id_customer, c.name, 
        COUNT(t.id_customer) AS total_transaction, 
        SUM(t.qty) as purchase_qty
FROM transaction t
INNER JOIN customer c
ON t.id_customer = c.id_customer
GROUP BY t.id_customer,c.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:48:42.390

```
SELECT cs.id_customer, cs.name, COUNT(tr.transaction) AS total_transaction, SUM(tr.qty) as purchase_qty, SUM(tr.qty*pr.prize)
FROM customer AS cs
LEFT JOIN transaction AS tr ON tr.id_customer = cs.id_customer
LEFT JOIN product AS pr ON pr.id_product = tr.id_product
GROUP BY cs.id_customer 
```

我想你是一个完全的初学者，所以我为你做了这个。下次，如果您有任何自己的想法，请提供给我们，这样我们就不必为您编写整个查询。表现出一些努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:48:42.707

```
SELECT c.id_customer, c.name, count(t.id_transaction) AS total_transaction
FORM Customer c INNER JOIN Transaction T
 ON C.id_customer = T.id_customer
GROUP BY c.id_customer 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-21T10:44:15.170

您需要一个`group by`声明，因为您想汇总给定客户的结果：

```
SELECT id_customer, name, count(id_transaction) AS total_transaction
FORM Customer, Transaction
WHERE Transaction.id_customer = Customer.id_customer
GROUP BY id_customer 
```

这并不能解决您的全部问题，但您已经明白了。

# excel - SharePoint 2010：以编辑模式打开 Excel 文件的链接

> ID：15000110
> 
> 赞同：1
> 
> 时间：2013-02-21T10:38:27.113
> 
> 标签：excel, sharepoint, sharepoint-2010, editmode

我有一个带有按钮的应用程序。此按钮指的是我在 SharePoint 上的 Excel 文档。但是，它将下载文件，这意味着它是只读的。现在，SharePoint 中有一个选项可以在编辑模式下打开文件，我希望我的按钮也可以这样做 - 如何使用链接`href`链接到文件并在编辑模式下打开它？

![在此处输入图像描述](../Images/36fffc2af068920fe589c99640b5e04b.png)

如何使用 SharePoint 外部的按钮执行与“在 Microsoft Excel 中编辑”相同的操作？就像一个指向文件的链接，它将在编辑模式下打开它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-18T17:39:44.977

这不是“在 Microsoft Excel 中编辑”选项，而是“签出”选项。

要“在 Microsoft Excel 中编辑”，解决方案非常简单。在 Workbook_Open 中只做 ActiveWorkbook.LockServerFile。该命令的文档说它锁定了工作簿，但在这种情况下，它的作用完全相反，它只是执行编辑栏问题。

```
Private Sub Workbook_Open()

'The following command is equivalent to hitting the "Edit" bar 
'that comes up when you open an Excel file by clicking on it in SharePoint,
'which is equivalent to "Edit in Microsoft Excel" (not CheckOut)

ActiveWorkbook.LockServerFile

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:56:38.580

该`Workbooks`对象具有您需要的功能：CanCheckOut 确保它可用，CheckOut 用于打开文件进行编辑

此代码将获取文件的名称（如`http://server:port/PathToFile/myExcelFile.xlsx`）并在可能的情况下打开它

```
Sub UseCanCheckOut(docCheckOut As String)
    ' Determine if workbook can be checked out.
    If Workbooks.CanCheckOut(Filename:=docCheckOut) = True Then
        Workbooks.CheckOut (Filename:=docCheckOut)
    Else
        MsgBox "You are unable to check out this document at this time."
    End If
End Sub 
```

网页的vbscript：

```
set objExcel = CreateObject("Excel.Application")
drPath = "server\file"
if (objExcel.Workbooks.CanCheckOut(drPath) = True) then
    objExcel.Application.Workbooks.CheckOut drPath //note - may need to open first
    objExcel.Application.Workbooks.Open drPath
else
    msgbox("Unable to checkout SharePoint file: " & file.name & ". Please contact an administrator.")
end if 
```

[在此页面](http://www.tcscblog.com/2011/02/03/building-hyperlinks-to-open-documents-in-edit-mode/)上也进行了更详细的讨论，但这远远超出了我的知识范围

# java - 如何最好地编译 gnu.mail.providers

> ID：15000118
> 
> 赞同：0
> 
> 时间：2013-02-21T10:38:58.360
> 
> 标签：java, api, version-control, open-source, gnu

我有兴趣使用[此处](http://www.gnu.org/software/classpathx/javamail/javadoc/gnu/mail/providers/nntp/NNTPFolder.html)的 Javadoc 文档分叉[gnu.mail.providers.nntp.NNTPFolder](http://cvs.savannah.gnu.org/viewvc/mail/source/gnu/mail/providers/nntp/NNTPFolder.java?root=classpathx&view=log) ，但不太了解依赖关系。显然，这些是：

> GNU JavaMail 的当前稳定版本是 1.1.2 版，可在此处获得。
> 
> 您还需要当前版本的 GNU JAF 和 GNU inetlib 来构建它。

[http://www.gnu.org/software/classpathx/javamail/](http://www.gnu.org/software/classpathx/javamail/)

我需要下载什么来构建 gnu.mail.providers？我当然可以很容易地检查代码，但我不喜欢编译大量的 API。（是的，不需要多次编译大多数类。）

1.) 我需要下载什么 JAR？

2.) 我需要签出多少源代码？

3.）我可以立即将其签入 github，因为许可样板在代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:11:32.953

以下是 JAR：

```
thufir@dur:~/NetBeansProjects/gnu_cvs/dist$ 
thufir@dur:~/NetBeansProjects/gnu_cvs/dist$ ll lib/
total 416
drwxrwxr-x 2 thufir thufir   4096 Feb 22 21:16 ./
drwxrwxr-x 6 thufir thufir   4096 Feb 22 21:16 ../
-rw-rw-r-- 1 thufir thufir  33542 Feb 22 21:16 activation.jar
-rw-rw-r-- 1 thufir thufir 180559 Feb 22 21:16 gnumail.jar
-rw-rw-r-- 1 thufir thufir 194251 Feb 22 21:16 inetlib.jar
thufir@dur:~/NetBeansProjects/gnu_cvs/dist$ 
thufir@dur:~/NetBeansProjects/gnu_cvs/dist$ ll
total 608
drwxrwxr-x 6 thufir thufir   4096 Feb 22 21:16 ./
drwxrwxr-x 5 thufir thufir   4096 Feb 22 21:36 ../
drwxrwxr-x 3 thufir thufir   4096 Feb 22 21:16 gnu/
-rw-rw-r-- 1 thufir thufir 593467 Feb 22 21:16 gnu_cvs.jar
drwxrwxr-x 3 thufir thufir   4096 Feb 22 21:16 javax/
drwxrwxr-x 2 thufir thufir   4096 Feb 22 21:16 lib/
drwxrwxr-x 2 thufir thufir   4096 Feb 22 21:16 META-INF/
-rw-rw-r-- 1 thufir thufir   1322 Feb 22 21:16 README.TXT
thufir@dur:~/NetBeansProjects/gnu_cvs/dist$ 
```

它是否正确运行还有待观察。我想它必须被编译才能编译，`gnumail-providers.jar`但乍一看似乎可以正常工作。我按照以下方式检查了代码：

> [或者，您可以在此处](https://savannah.gnu.org/cvs/?group_id=139)通过 CVS模块邮件检索当前源。

[http://www.gnu.org/software/classpathx/javamail/](http://www.gnu.org/software/classpathx/javamail/)

# android - Spinner 的自定义 ArrayAdapter：下拉视图无法正常工作

> ID：15000120
> 
> 赞同：1
> 
> 时间：2013-02-21T10:38:59.687
> 
> 标签：android, custom-controls, spinner, adapter

我`ArrayAdapter`为`Spinner`. 不同之处在于，它显示来自`ArrayList`复杂类的图像而不是纯文本。到目前为止它有效。图像和单选按钮将根据需要显示。问题是，下拉视图的行为不正确：它不会在单击时关闭，并且只有单选按钮是可单击的，而不是整个视图。

有人知道出了什么问题吗？我是否必须`listener`在`adapter`?

这是该`getDropDownView`方法的代码：

```
@Override
    public View getDropDownView(int position, View convertView,
                                ViewGroup parent) {

        LayoutInflater inflater=(LayoutInflater) ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        LinearLayout view=(LinearLayout)inflater.inflate(R.layout.spinnerimageitem, null);

        ImageView iv=(ImageView)view.getChildAt(0);
        RadioButton rb=(RadioButton)view.getChildAt(1);

        int iImageID=ctx.getResources().getIdentifier(
                "f_"+funcs.get(position).getBitmapSetup(), 
                "drawable", ctx.getPackageName());  
        if(loco.getFunction(iIndex).equals(funcs.get(position)))
            rb.setChecked(true);
        iv.setImageResource(iImageID);
        return(view);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T10:42:14.097

在单选按钮的布局中设置`android:focusable="false"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T14:00:10.007

我遇到过同样的问题。对于以后会遇到此问题的人，我找到了解决方案之一。

```
public class MyActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Spinner spinner = (Spinner)findViewById(R.id.spinner);
    ArrayList<String> items = new ArrayList<String>();
    for (int i=1; i<6; i++) items.add("Spinner item "+i);
    spinner.setAdapter(new SpinnerAdapter(this,R.layout.spinner_item_list,items));
}

public class SpinnerAdapter extends ArrayAdapter<String> {
    private ArrayList<Boolean> mChecked;
    private ArrayList<String> mValues;
    private Context mContext;
    public SpinnerAdapter(Context context, int resourceId, ArrayList<String> values) {
        super(context, resourceId, values);
        mValues = values;
        mContext = context;
        mChecked = new ArrayList<Boolean>();
        for (int i=0; i<mValues.size(); i++){
            mChecked.add(false);
        }
    }
    @Override
    public View getDropDownView(int position, View convertView,ViewGroup parent) {
            View row= View.inflate(mContext,R.layout.spinner_item_list, null);
            TextView label=(TextView)row.findViewById(R.id.textView);
            label.setText(mValues.get(position));
            RadioButton rb = (RadioButton)row.findViewById(R.id.radioButton);
            rb.setFocusable(false);
            rb.setClickable(false);
            rb.setChecked(mChecked.get(position));
            return row;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = View.inflate(mContext,R.layout.spinner_item_top, null);
        TextView label=(TextView)row.findViewById(R.id.textView);
        label.setText(mValues.get(position));
        for(int i=0; i<mChecked.size(); i++){
            mChecked.set(i,(i==position));
        }
        return row;
    }
}
} 
```

spinner_item_list.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"                     xmlns:android="http://schemas.android.com/apk/res/android">
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="New Text"
        android:id="@+id/textView" android:layout_centerVertical="true"/>
<RadioButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/radioButton" android:layout_alignParentRight="true"     android:checked="false"/>
 </RelativeLayout> 
```

spinner_item_top.xml

```
<?xml version="1.0" encoding="utf-8"?>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="New Text"
    xmlns:android="http://schemas.android.com/apk/res/android"     android:id="@+id/textView"></TextView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:54:38.373

你试过这样吗：

```
@Override
public View getDropDownView(int position, View convertView,
                            ViewGroup parent) {
    View view = convertView;
    if(view == null){
        LayoutInflater inflater=(LayoutInflater)
                   tx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view=(LinearLayout)inflater.inflate(R.layout.spinnerimageitem, null);
    }
     /// your code ....
     return view;
 } 
```

# codeigniter - Codeigniter 双语 form_error 信息

> ID：15000121
> 
> 赞同：0
> 
> 时间：2013-02-21T10:39:00.723
> 
> 标签：codeigniter

我正在使用 codeigniter（英语和法语）开发双语网站

**我想用两种语言显示验证错误**

当有错误我得到这个

用英语讲

**密码字段是必需的**

法语

**Mot de passe 字段是必需的。**

但我想要法语的所有完整信息

喜欢

**Le champ Mot de passe est requis**

…………

我已经为法语和英语创建了语言文件夹

# python - 如何将变量值与数组进行比较

> ID：15000126
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:39:18.613
> 
> 标签：python, arrays, compare

在 Python 中，如何比较两个浮点变量值以确保它们是否在一定的公差范围内？

例如：

```
variable = 17.40
array = [14.40, 14.12, 45.50] 
```

我需要将变量值与数组元素进行比较，以查看哪一个足够接近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:44:50.133

从你也问的[这个问题。](https://stackoverflow.com/questions/15000021/how-to-compare-float-value-in-in-django)这是一段代码，它将检查您的变量是否在数组中（除非这不是您将变量值与数组元素进行比较的意思）：

```
TOLERANCE=10**-6

def are_floats_equal(a,b):
  return abs(a-b) <= TOLERANCE

def float_in_array(number, array):
  return True in [are_floats_equal(number, a) for a in array] 
```

编辑。这样做可能会更有效一些（虽然不太简洁），因为我们只在数组上循环一次：

```
def float_in_array(number, array):
  for a in array:
    if are_floats_equal(number, a):
      return True
  return False 
```

# jquery - 使用jQuery以随机顺序显示具有不同图像的相同类

> ID：15000129
> 
> 赞同：0
> 
> 时间：2013-02-21T10:39:22.377
> 
> 标签：jquery, image, class, random

这是我的 HTML

```
<div id="abc">
    <div class="asd">image1</div>
    <div class="asd">image2</div>
    <div class="asd">image3</div>
    <div class="asd">image4</div>
    <div class="asd">image5</div>
</div> 
```

我想在每次刷新时随机显示图像。这怎么可能使用Jquery？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:49:20.637

创建随机数字段并将它们像 ID 一样添加到 div，然后将图像添加到 div

```
var NumbOfDivs = x
var number = Math.floor(Math.random() * NumbOfDivs );
var fieldID = [];

if(fieldID.contains(number)){
}
else{fieldID.push(number)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:53:54.007

你可以使用这个简单的插件：[http ://css-tricks.com/snippets/jquery/shuffle-dom-elements/](http://css-tricks.com/snippets/jquery/shuffle-dom-elements/)

```
(function($){

    $.fn.shuffle = function() {

        var allElems = this.get(),
            getRandom = function(max) {
                return Math.floor(Math.random() * max);
            },
            shuffled = $.map(allElems, function(){
                var random = getRandom(allElems.length),
                    randEl = $(allElems[random]).clone(true)[0];
                allElems.splice(random, 1);
                return randEl;
           });

        this.each(function(i){
            $(this).replaceWith($(shuffled[i]));
        });

        return $(shuffled);

    };

})(jQuery); 
```

在您的情况下，您会像这样使用它：

```
$('#abc > div').shuffle(); 
```

# java - HashMap 更改值引用

> ID：15000130
> 
> 赞同：0
> 
> 时间：2013-02-21T10:39:23.433
> 
> 标签：java, reference, hashmap

我对 HashMap 有疑问。当插入新的键值对时，它会更改存储为值的引用。

我使用 HashMap 来更快地访问以非常分层的结构存储的对象。插入第一对时，其地址与原始地址相同。添加另一对后，HashMap 中存储的地址发生了变化。因此我无法通过 HashMap 获取原始对象。

为什么会这样？

这是我如何构造 HashMap 的代码。在第二种方法中，在第一个 for 循环中发生上述情况。

```
private Map<String, Parameter> createRefMap(Settings settings) {
    Map<String, Parameter> result = new HashMap<String, Parameter>();
    for (ParameterList parameterList : settings.getParameterList()) {
        result.putAll(createRefMap(parameterList, "SETTINGS"));
    }

    return result;
}

private Map<String, Parameter> createRefMap(ParameterList parameterList, String preLevel) {
    Map<String, Parameter> result = new HashMap<String, Parameter>();
    String level = preLevel + "/" + parameterList.getName();

    for (Parameter parameter : parameterList.getParameter()) {
        result.put(level + "/" + parameter.getName(), parameter);
    }

    for (ParameterList innerParameterList : parameterList.getParameterList()) {
        result.putAll(createRefMap(innerParameterList, level));
    }

    return result;
} 
```

这就是我所说的

```
this.actRefMap = createRefMap(this.actAppSettings); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:26:32.697

如果我理解正确，如果您执行以下操作：

```
System.out.println(thing1.toString());
myMap.put(key1, thing1);
myMap.put(key2, thing2);
System.out.println(thing1.toString()); 
```

第二个 println 会以某种方式打印出来自不同对象的结果？它是任何特定的对象，还是随机的一个？您所说的问题是不可能的；它会破坏数量惊人的 Java 程序。

您的部分断言是“地址”发生了变化；我不确定你的意思。在许多调试器中可见的对象 ID？物理内存地址？同样，如果发生上述任何一种情况，Map 就会被破坏。

如果您的实际问题是对thing1 的其他引用不再具有映射中引用的内容，那么您正在某处更改对thing1 的外部引用。

# module - 如何在 modules.zendframework.com 上发布 Zend Framework 2 模块？

> ID：15000131
> 
> 赞同：-2
> 
> 时间：2013-02-21T10:39:27.233
> 
> 标签：module, zend-framework2

[modules.zendframework.com](http://modules.zendframework.com/)是 Zend Framework 2 的“App Store”/“Market Place”，已经提供了 200 多个模块供下载。我想，发布我的模块所需的一切都有一个 GitHub 帐户。但现在我不知道如何在那里“上传”/“共享”我的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:35:39.477

目前仅支持在 GitHub 中发布的模块

# css - DIV @100% 余数可变宽度

> ID：15000133
> 
> 赞同：0
> 
> 时间：2013-02-21T10:39:30.557
> 
> 标签：css, html, variable-width

我有一个可扩展的菜单，它从一个细左手栏弹出（打开人和关闭菜单类型）

大多数时间，它将占用大约 50px，除非它打开时，大约 250。

我希望我的#content div 是余数的 100%。因此，当菜单打开时，它的 100% 页面 - 50px 然后 100% 页面 -250px。

Bellow 是我的 HTML，我需要哪些基本的 CSS 来实现这一点？

**请注意**，我已将 exra 行放入，以分离包装器内部的 2div

```
 <div class="wrapper"> 
```

.

```
 <div class="sidebar" id="sidebar">
<a href="#" onclick="return showOrHide('menulink');"><div class="logo"></div></a>
<ul id="menulink">
    <li>
        <a href="#">Campaigns</a>
        <ul class="submenu">
            <li><a href="http://insideclients.co.uk/Summary.aspx">Summary Sheet</a></li>
            <li><a href="http://insideclients.co.uk/Clients.aspx">Add New Client</a></li>
            <li><a href="http://insideclients.co.uk/Search.aspx">Search Historic</a></li>                
        </ul>
    </li>
    <li>
        <a href="#">Transactions</a>
        <ul class="submenu">
            <li><a href="http://insideclients.co.uk/Links.aspx">Record Transaction</a></li>
            <li><a href="http://insideclients.co.uk/LinksSummary.aspx">Transaction Sheet</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Production</a>
        <ul class="submenu">
            <li><a href="http://insideclients.co.uk/ProductionHandover.aspx">Create Handover</a></li>
            <li><a href="http://insideclients.co.uk/ProductionHandoverSearch.aspx">Handover Sheets</a></li>
            <li><a href="http://insideclients.co.uk/ProductionHandoverSummary.aspx">Production Overview</a></li>                
        </ul>
    </li>
    <li>
        <a href="#">Reporting</a>           
        <ul class="submenu">
            <li><a href="http://insideclients.co.uk/SummaryAltView.aspx">Transaction Report</a></li>
            <li><a href="http://insideclients.co.uk/LinksSummary.aspx?CampaignID=95">View Team Costs</a></li>
        </ul>
    <li>
        <a href="#">Admin</a>           
        <ul class="submenu">
            <li><a href="http://insideclients.co.uk/Users.aspx">Manage Users</a></li>
            <li><a href="#">Log Out</a></li>
        </ul>
    </li>
</ul>
 </div> 
```

.

```
 <div class="content">
<p>CONTENT HERE</p>
 </div> 
```

.

```
 </div> 
```

救命图...

菜单已关闭

```
|---------------------------------------------------------------------|
|                    THIS IS THE #WRAPPER DIV @100%                   |
||----| |------------------------------------------------------------||
||    | |                                                            ||
||    | |                                                            ||
||THIS| |          THIS IS THE #CONTENT DIV                          ||
||IS  | |          @100%                                             ||
||THE | |                                                            ||
||SIDE| |                                                            ||
||-BAR| |                                                            ||
||DIV | |                                                            ||
||@   | |                                                            ||
||20px| |                                                            ||
||    | |                                                            ||
||    | |                                                            ||
||    | |                                                            ||
||    | |                                                            ||
||----| |------------------------------------------------------------||
|                                                                     |
|---------------------------------------------------------------------| 
```

菜单打开

```
|---------------------------------------------------------------------|
|                    THIS IS THE #WRAPPER DIV @100%                   |
||--------------| |--------------------------------------------------||
||              | |                                                  ||
||              | |                                                  ||
||THIS          | |          THIS IS THE #CONTENT DIV                ||
||IS            | |          @100%                                   ||
||THE           | |                                                  ||
||SIDE          | |                                                  ||
||-BAR          | |                                                  ||
||DIV           | |                                                  ||
||@             | |                                                  ||
||250           | |                                                  ||
||px            | |                                                  ||
||              | |                                                  ||
||              | |                                                  ||
||              | |                                                  ||
||--------------| |--------------------------------------------------||
|                                                                     |
|---------------------------------------------------------------------| 
```

**这是我一直在测试的代码**

```
function menushow()
{
screen_width = $(window).width() ; // returns width of browser viewport
//alert($(document).width()); // returns width of HTML document

//calculate content div width
cont_div_width = screen_width - 250; 
```

("#content").css("width",cont_div_width+"px");

```
}

function menuhide()
{

screen_width = $(window).width() ; // returns width of browser viewport
//alert($(document).width()); // returns width of HTML document

//calculate content div width
cont_div_width = screen_width - 50; 
```

("#content").css("width",cont_div_width+"px"); }

在哪里

```
<a href="#" onclick="menuhide"><div id="logo" class="logo"></div></a> 
```

和

```
<a href="#" onclick="menushow"><div id="logo" class="logo"></div></a> 
```

和

```
<div id="content" class="content"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:53:16.420

为什么不使用屏幕/文档宽度属性？

使用 jquery [http://api.jquery.com/width/](http://api.jquery.com/width/)

```
function menushow()
{
    screen_width = $(window).width() ; // returns width of browser viewport
    //alert($(document).width()); // returns width of HTML document

    //calculate content div width
    cont_div_width = screen_width - 250;

   ("#idofcontent_div").css("width",cont_div_width+"px");

}

function menuhide()
{

    screen_width = $(window).width() ; // returns width of browser viewport
    //alert($(document).width()); // returns width of HTML document

    //calculate content div width
    cont_div_width = screen_width - 50;

   ("#idofcontent_div").css("width",cont_div_width+"px");
} 
```

相似的东西。希望这对你有帮助

或使用 javascript [http://www.w3schools.com/jsref/prop_screen_width.asp](http://www.w3schools.com/jsref/prop_screen_width.asp)

```
<script>
screen_width = screen.width;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:18:04.193

采用

```
<script language="JavaScript">
onload=function(){
var login=document.getElementById('logo');
var target=document.getElementById('content');
login.onclick=function(){
target.style.paddingLeft=target.style.paddingLeft=='260px'?'75px':'260px';
}
}
</script> 
```

其中**logo**是您单击的 div 的 id，而**content**是目标 - 您希望更改样式的 div...

需要注意的一件事是你的 CSS 应该有开始填充

```
.content {
padding-left: 75px; 
} 
```

否则它将最初加载为 0px 填充，然后更改为您单击的宽度，然后返回到未单击的...下面的示例

```
0px -> 260px -> 75px -> 260px -> 75px -> 260px -> 75px -> 260px -> 75px -> 
```

等等等等...

# xml - 如何在 .ts 文件中定义空白字符串？

> ID：15000138
> 
> 赞同：0
> 
> 时间：2013-02-21T10:39:51.113
> 
> 标签：xml, qt, resources, translation

我需要在我的翻译文件中定义空白字符串。或者至少是空格。是否可以？
我已经尝试过`&#160; &nbsp; &#xa0;`等。它没有帮助。

UPD。我尝试了更多不同的空间。并发现符号“零宽度非细木工” -`&#8204;`有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:45:40.960

“零宽度非细木工” -`&#8204;`

# java - java中的事件处理和java中actionPerformed方法的执行

> ID：15000143
> 
> 赞同：1
> 
> 时间：2013-02-21T10:40:00.260
> 
> 标签：java, swing, user-interface, event-handling

我在java中为simpleGUI编写了一个小代码。

```
package guidemo1;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;

public class GuiDemo1 implements ActionListener{
 JButton button;
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        GuiDemo1 gui=new GuiDemo1();
        gui.go();
    }

    public void go()
    {
        JFrame frame=new JFrame();
        button=new JButton();
        frame.getContentPane().add(button);
        button.addActionListener(this);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 200);
        frame.setVisible(true);

    }
    @Override
    public void actionPerformed(ActionEvent e) {
        //throw new UnsupportedOperationException("Not supported yet.");
        button.setText("I've been clicked");
    }
} 
```

我是 JAVA 的新手。我对这个程序有几个问题。

有人可以解释如何在没有任何调用的情况下执行 actionPerformed 方法吗？

在这里，我在 go() 方法中定义了本地框架对象，我们在 actionPerformed 中使用按钮，这是另一种方法。这怎么可能？按钮不是嵌入框架上吗？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:43:26.923

你的类实现`ActionListener`了，所以你必须定义`actionPerformed`方法。您还调用`button.addActionListener(this)`which 将当前对象注册为按钮按下的侦听器。

当一个按钮按下事件被触发时，所有的监听器都会被通知，包括你注册为监听器的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T10:46:27.823

欢迎来到事件驱动的环境。

在这种环境中，您注册“侦听器”，等待某些事情发生，然后通过定义明确的接口结构向您报告。

基本上，正在发生的事情是，您将自己注册为按钮上可能发生的操作事件的相关方。您已经通过实现`ActionListener`接口来完成此操作。这允许按钮在将来某个时间执行操作时回调您的`actionPerformed`方法。

这通常称为观察者模式。

您可能会发现[编写事件侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)很有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:50:32.243

至于第二个问题，Java 是一种参考语言。所有对象都驻留在堆上，只要有人持有对它们的引用，它们就一直存在。

在 Swing 中，情况稍微复杂一些。Swing 库包含对所有 GUI 元素（例如 JFrame 和 JButton）的引用，因此即使您不再保留对它们的引用，它们也不会被删除。

至于第一个问题，看看主线程做了什么——它创建了一个新对象 GuiDemo1，调用了创建 JFrame 的 go() 方法，并显示了该帧。有一个特殊的 Swing 线程，即事件调度线程，它在后台等待 GUI 中的事件发生。显示帧启动 EDT，然后渲染帧并休眠。主线程，完成了 main 方法中的所有工作，然后 DIES。

现在您已经显示了一个 JFrame 并且 Event Dispatch Thread 正在休眠。EDT 现在正在等待用户与 JFrame 的交互（事件）——Swing 是事件驱动的。每次与框架交互时，Swing 都会为其创建一个事件并唤醒 EDT 以处理该事件。例如，如果您单击一个按钮，EDT 将唤醒，为按钮“单击”设置动画并调用所有动作侦听器。那是您的方法 actionPerformed 被调用的时候。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T10:56:08.633

> 有人可以解释如何在没有任何调用的情况下执行 actionPerformed 方法吗？

GUI 框架 Swing 在后台运行动作处理代码。每当按下按钮或用户以其他方式与 GUI 交互时，Swing 都会通过多个`Listener`界面之一通知您的应用程序。为了接收这些事件，您的类需要实现正确的`Listener`接口并在它感兴趣的每个组件上注册为侦听器。

您的类实现`ActionListener`接口并调用`addActionListener`以将自身注册到按钮。当一个按钮被点击时，Swing 将尝试`ActionListener`通过调用他们的`actionPerformed`方法来通知所有注册的s。“魔法”就是这样发生的。

> 在这里，我在 go() 方法中定义了本地框架对象，我们在 actionPerformed 中使用按钮，这是另一种方法。这怎么可能？按钮不是嵌入框架上吗？

您`add`是框架内容窗格的按钮 - 这会将按钮放在*布局*中的框架内，而不是在您的*代码*中。因为您`button`通过放置在任何方法之外来声明为实例变量`JButton button;`，所以仍然可以从`static`该类中的任何（非）方法访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T19:28:12.803

*   实现 ActionListener

*   将 ActionListener 添加到您的界面

*   将 actionPerformed 方法添加到您的类

*   设置一个计时器并在你的课堂上启动它

那会做到的

# c# - 分区创建日期？

> ID：15000144
> 
> 赞同：0
> 
> 时间：2013-02-21T10:40:02.930
> 
> 标签：c#, .net, winapi, wmi

我需要编写 ac# 函数，它需要一个驱动器号（如`C:\`）并告诉我何时创建分区`C:\`（即格式化）。

有没有办法（通过 WMI，或通过 Win32，或通过 .NET）获取文件系统的创建日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:44:55.210

您可以使用 WMI 来完成。看看 [Win32_DiskPartition](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394135%28v=vs.85%29.aspx)

也许你也可以使用 [Win32_DiskDrive](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx)

# c# - c# 这些参数传递给 c++ dll 函数是否正确？

> ID：15000145
> 
> 赞同：0
> 
> 时间：2013-02-21T10:40:02.993
> 
> 标签：c#, c++, pointers, dll, parameters

嗨，我有一个第三方 dll，它的功能向 dvr 发出请求...我尝试了一些功能，但我得到了错误的结果...我不知道是我错了还是 dll 有问题..来自 dll 文档：

```
int WINAPI tvcc_get_rec_days(int server_handle,struct Camera *video_camera,char **days,int
 *size); 
```

char **days 应该是一个未分配的字符指针数组，它将包含天列表 int *size 将是数组的长度

我像这样在c#中声明了这个函数

```
[DllImport(lib, EntryPoint = "@tvcc_get_rec_days$qqsip6Camerappcpi")]
static public extern int tvcc_get_rec_days(int server_handle,ref Camera video_camera,ref char*[]  days,ref int size); 
```

现在如果我这样调用函数：

```
static char*[] days;
static int size;
int returnvalue = GamsSdk.tvcc_get_rec_days(sh2,ref cameras[1],ref days,ref size); 
```

我得到正确的返回值（函数运行良好），大小为 104，但天数不是 104 数组！days.length 始终 = 1 但如果我尝试读取第一个单元格会出现空异常...我在几天内尝试了各种修改，有时如果我打印单元格我会得到 0 或奇怪的符号...我也认为我get 是数组的地址，但无论如何我不知道如何得到它......
知道吗？

# path - 引用当前wix-library（wixlib）的文件夹

> ID：15000149
> 
> 赞同：0
> 
> 时间：2013-02-21T10:40:20.267
> 
> 标签：path, wix, wixlib

我如何定义相对于我目前所在的“wix-library”项目的 File/@Source？

如果我使用：

```
<File Id="f1" Source=".\bla"/> 
```

然后 ”。” 指调用“Windows Installer Package”项目的根目录，因此不能使用！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T10:57:29.273

变量`$(sys.CURRENTDIR)`位于当前目录..:)

`<File Id="f1" Source="$(sys.CURRENTDIR)\bla"/>`

# javascript - 跳过 HTML 母版页 (.net) 中的一些 css 文件：可能吗？

> ID：15000157
> 
> 赞同：2
> 
> 时间：2013-02-21T10:40:45.480
> 
> 标签：javascript, html, .net, css

我有一个链接了 6 个 css 文件的站点，但是在一个页面中我只需要使用 3 个 css 文件。我的开发人员在.net 中使用母版页，所以他们不想改变它。所以，我的问题是：有什么办法可以跳过几个链接的 css 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:46:58.063

它不是很“优雅”，但您可以使用 jQuery 脚本来操作和删除链接：

```
<script type="text/javascript">
        $(document).ready(function () {
           $("link[type='text/css']").remove();
        });
    </script> 
```

您可以使用 jQuery 选择器来优化搜索。IE

```
 $("link[href='Styles/Site.css']").remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:09:57.170

另一个解决方案（不需要 jQuery）是向母版页添加一个配置属性，如下所示：

站点.Master.cs

```
private bool _IncludeOtherCss = true;
public bool IncludeOtherCss {
 get { return _IncludeOtherCss; }
 set { _IncludeOtherCss = value; } 
} 
```

Site.Master（头部）

```
<%if (IncludeOtherCss)
  { %>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
  <%} %> 
```

其他页面：

```
 protected void Page_Init(object sender, EventArgs e)
        {
            (Master as SiteMaster).IncludeOtherCss = false;
        } 
```

# objective-c - 转换uibutton的正确方法

> ID：15000158
> 
> 赞同：2
> 
> 时间：2013-02-21T10:40:49.203
> 
> 标签：objective-c, rotation, cgaffinetransform

当我进行转换时 UIButton 背景图像显示参差不齐的一面

![在此处输入图像描述](../Images/21f7f670bb9c63754fe665c76ee58865.png)

我的代码在这里：

```
int r = arc4random() % 20 - 10;
avatarImgBtn.transform = CGAffineTransformMakeRotation(degreesToRadian(r));
titleImgBtn.transform = CGAffineTransformMakeRotation(degreesToRadian(r));
title.transform = CGAffineTransformMakeRotation(degreesToRadian(r));

avatarImgBtn.layer.borderWidth = 3;
avatarImgBtn.layer.borderColor = [UIColor clearColor].CGColor;
avatarImgBtn.layer.shouldRasterize = YES; 
```

我怎样才能做到正确。请帮我。提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:51:22.340

两种简单的抗锯齿方法：

1.  如果图像是严格的矩形，则为按钮添加一个透明的 1px 边框。 `avatarImgBtn.layer.borderWidth = 1;`

    `avatarImgBtn.layer.borderColor = [UIColor clearColor].CGColor;`

2.  编辑图像并在其周围添加 1px 的透明像素。

# c# - 我可以创建一个带有正斜杠作为名称一部分的元素吗

> ID：15000160
> 
> 赞同：1
> 
> 时间：2013-02-21T10:40:56.257
> 
> 标签：c#, .net, xml, xml-serialization

我可以创建一个带有正斜杠作为名称一部分的元素吗？

```
<Data>
<DataRow>
<Orange/Apple> fruit </Orange/Apple>
</DataRow>
</Data> 
```

对我来说似乎无效，但只想确认。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:00:40.137

> 我可以创建一个带有正斜杠作为名称一部分的元素吗？

不，根据W3.org 网站上发布[的语法，它不是名称中的有效字符。](http://www.w3.org/TR/2008/REC-xml-20081126/#NT-Name)

> 十六进制值 0x20 不能包含在名称中

`0x20`是空格字符，您会看到它不在有效的 NameChars 列表中。它被视为空白，除非它是值的一部分。

# javascript - 如何获取元素的所有CSS

> ID：15000163
> 
> 赞同：27
> 
> 时间：2013-02-21T10:41:17.043
> 
> 标签：javascript, css, dom

我今天一直在测试 Javascript CSS 函数，并注意到当使用 .style.cssText 时，它只会给我用 JS 设置的 CSS。

相反，我想获取元素的所有 CSS，所以我猜测我做错了什么，或者可能需要另一个函数，比如 getComputedStyle，但是对于整个 CSS 而不是单个属性值，但我在搜索时找不到我需要的东西。

所以我的问题是如何从代码的最后部分获取完整的 CSS，例如：

```
background-color: #ffcccc; font-family:"Helvetica Neue", Arial, "Lucida Grande", sans-serif; font-size: 13px; color: #ff0000; 
```

而不是输出的当前较短的CSS？

```
<html>
<head>

<style type="text/css" media="screen">
    .MyDiv001 {
        background-color: #ffcccc;
        font-family:"Helvetica Neue", Arial, "Lucida Grande", sans-serif;
    }
    .MyDiv002 {
        background-color: #ccffcc;
        font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
    }
</style>

</head>

<body>

<div id="MyDiv001" class="MyDiv001">This is MyDiv001</div>
<div id="MyDiv002" class="MyDiv002">This is MyDiv002</div>
<br /><hr><br />

<script type="text/javascript">

// Select the MyDiv001 element
var MyDiv001 = document.getElementById("MyDiv001"); // Select MyDiv001

// Set some style property values for MyDiv001
MyDiv001.style.setProperty("font-size", "13px", null);
MyDiv001.style.setProperty("color", "#ff0000", null);

// Get the Computed Style for MyDiv001
var MyDiv001Style = window.getComputedStyle(MyDiv001);

// Show the MyDiv001 style property values
document.write( "MyDiv001 background-color = " + MyDiv001Style.getPropertyValue("background-color") + "<br />");
document.write( "MyDiv001 font-family = " + MyDiv001Style.getPropertyValue("font-family") + "<br />");
document.write( "MyDiv001 font-size = " + MyDiv001Style.getPropertyValue("font-size") + "<br /><br />");

// Select the MyDiv002 element
var MyDiv002 = document.getElementById("MyDiv002"); // Select MyDiv002

// Set some style property values for MyDiv002
MyDiv002.style.setProperty("font-size", "16px", null);
MyDiv002.style.setProperty("color", "#0000ff", null);

// Get the Computed Style for MyDiv002
var MyDiv002Style = window.getComputedStyle(MyDiv002); 

// Show the MyDiv002 style property values
document.write( "MyDiv002 background-color = " + MyDiv002Style.getPropertyValue("background-color") + "<br />");
document.write( "MyDiv002 font-family = " + MyDiv002Style.getPropertyValue("font-family") + "<br />");
document.write( "MyDiv002 font-size = " + MyDiv002Style.getPropertyValue("font-size") + "<br /><br />");

// Not what i was expecting
document.write( "MyDiv001 CSS = " + MyDiv001.style.cssText+ "<br />"); // How do i get the full css?
document.write( "MyDiv002 CSS = " + MyDiv002.style.cssText+ "<br />"); // How do i get the full css?

</script>

</body>
</html> 
```

编辑 - 如果可能，我想要一个使用常规 Javascript 的答案，希望是我的代码的固定版本以及它不返回完整 CSS 的原因，谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-21T20:15:53.923

`MyDiv001.style.cssText`将仅返回由`style`属性或属性设置的内联样式。

您可以使用[getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)来获取应用于元素的所有样式。您可以遍历返回的对象以转储所有样式。

```
function dumpCSSText(element){
  var s = '';
  var o = getComputedStyle(element);
  for(var i = 0; i < o.length; i++){
    s+=o[i] + ':' + o.getPropertyValue(o[i])+';';
  }
  return s;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-05-17T11:51:29.530

请注意，`getComputedStyle`字面上会返回*计算*值。表示相对单位，例如`em`将作为计算`px`值返回（如`computed`浏览器开发工具的选项卡中所示）。

根据您想要的结果，这可能会使它作为一个可行的解决方案完全失效。不过，其他答案（包括已接受的答案）并未完全提及。

没有足够的代表发表评论，因此这个单独的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-12T08:29:57.090

现在是 2020 年，我们终于可以做到了

`getComputedStyle(element).cssText`

例子：

`newElement.style.cssText = getComputedStyle(element).cssText`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T15:40:15.487

让 divStyle1 = document.body.style.cssText; 警报（divStyle1）；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-29T05:42:47.540

`getComputedStyle`这是用于获取给定 css 元素选择器的所有或过滤样式的util 函数。

```
// Select the MyDiv001 element
var MyDiv001 = document.getElementById("MyDiv001"); // Select MyDiv001

// Set some style property values for MyDiv001
MyDiv001.style.setProperty("font-size", "44px", null);
MyDiv001.style.setProperty("color", "rgb(255, 255, 0)", null);

// Get the Computed Style for MyDiv001
var MyDiv001Style = window.getComputedStyle(MyDiv001);

// Show the MyDiv001 style property values
console.log( "MyDiv001 background-color = " + MyDiv001Style.getPropertyValue("background-color") + "<br />");
console.log( "MyDiv001 font-family = " + MyDiv001Style.getPropertyValue("font-family") + "<br />");
console.log( "MyDiv001 font-size = " + MyDiv001Style.getPropertyValue("font-size") + "<br /><br />");

const cssText = (cssSelector, stylesArr = null) => {
  const ele = document.querySelector(cssSelector);
  return Object.entries(getComputedStyle(ele))
    .filter(([k]) => stylesArr?.includes(k) ?? true)
    .map(([k, v]) => `${k}:${v}`)
    .join(";");
};

const myCssText = cssText("#MyDiv001", [
  "backgroundColor",
  "fontFamily",
  "fontSize",
  "color",
]);
console.log({myCssText});

const allCssText = cssText("#MyDiv001");
console.log({allCssText});
```

```
 .MyDiv001 {
        background-color: #ffcccc;
        font-family:"Helvetica Neue", Arial, "Lucida Grande", sans-serif;
    }
    .MyDiv002 {
        background-color: #ccffcc;
        font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
    }
```

```
<div id="MyDiv001" class="MyDiv001">This is MyDiv001</div>
<div id="MyDiv002" class="MyDiv002">This is MyDiv002</div>
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-02-20T15:09:25.057

**为什么不只是**

```
`
const elt = document.querySelector("element");

function test(){
    console.dir(getComputedStyle(elt, null));
}

test();
` 
```

# php - 用PHP GD（imagecopymerge）及时合并大量图片

> ID：15000164
> 
> 赞同：0
> 
> 时间：2013-02-21T10:41:18.500
> 
> 标签：php, image

所以，我需要将一些图像（ 36 或 48 ）图像合并到另一个图像（![在此处输入图像描述](../Images/5776ae0ee385b94c327fd389a7fbaba2.png)）；

其分辨率为 4800x4800 像素。所以每个方格将有 695x695；我目前想出了这个解决方案：

```
$i = 1;
        $x = 140; $y = 140;
        foreach($files as $file):
            if($i > 1) $template = 'test.png'; 
            else $template = 'templates/24x24-TEMPLATE.png';
            $this->save_image($file,'templates/temp.jpg');
            $src = imagecreatefromjpeg('templates/temp.jpg');
            $src2 = imagecreatetruecolor(695,695);
            imagecopyresampled($src2, $src, 0, 0, 0, 0, 695, 695, 612, 612);
            imagejpeg($src2,'templates/temp.jpg');
            imagedestroy($src2);
            $src = imagecreatefromjpeg('templates/temp.jpg');
            $dest = imagecreatefrompng($template);
            imagealphablending($dest, false);
            imagesavealpha($dest, true);
            imagealphablending($src, false);
            imagesavealpha($src, true);
            imagecopymerge($dest, $src, $x, $y, 0, 0, 695, 695, 100); //have to play with these numbers for it to work for you, etc.
            imagepng($dest,'test.png');
            /* Destroy the images to free up space */
            imagedestroy($dest);
            imagedestroy($src);
            $x = $x + 695 + 65;
            if($i % 6 == 0):
                $y = $y + 695 + 65;
                $x = 140;
            endif;
            $i++;
        endforeach; 
```

女巫下载要放在方块上的文件，将其与方块合并，并对所有图像执行此操作，直到所有方块都被填满。但是该代码，对于 20 张图像，最多需要 5 分钟！我需要一些可以在 30 秒内运行的东西来用图像填充正方形，然后生成单个文件 PDF。

有没有办法改善这一点？或者有没有其他方法可以更快更好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:55:46.427

我认为“在一个好时机”你的意思是快速有效。

那么答案可能是在 PHP 之外进行。即使数据大部分保存在使用 GD 扩展的自定义数据结构中，PHP 代码中仍然存在大量开销。有[很多工具可以合并图像](https://stackoverflow.com/questions/4968702/looking-for-a-good-image-sprite-generator-tool)以生成 CSS 精灵——但它们并不都提供对图像布局的控制。您可以使用 GD 和 C 编写自己的代码。

但是为什么要打扰呢？如果您最终希望输出为 PDF，为什么不直接将单个图像写入 PDF？

# c# - 如何更改日期的分隔符？

> ID：15000172
> 
> 赞同：0
> 
> 时间：2013-02-21T10:41:42.350
> 
> 标签：c#, asp.net, date, windows-server-2008

当我尝试从服务器发送日期时出现错误，因为它有下一个表单：

```
2013/02/21 
```

当我从客户端发送日期时，它发送没有问题，因为它具有下一种形式：

```
2013-02-21 
```

我需要更改服务器属性或代码中的分隔符，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:43:12.263

如果您使用发送日期，`ToString`则可以指定格式：

```
string str  = yourDateObject.ToString("yyyy-MM-dd"); 
```

# javascript - JQuery/Knockout 自动完成脚本

> ID：15000177
> 
> 赞同：1
> 
> 时间：2013-02-21T10:41:53.590
> 
> 标签：javascript, jquery, knockout.js

我正在尝试查找资源，以便根据提供的邮政编码自动填充位置。

例如，当用户输入 4 位邮政编码时，自动完成功能启动并以下面的格式显示所有匹配的位置。邮政编码、郊区、州，例如 1234、abcSuburb、abcState。

我肯定会在[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)上查看 jquery 自动完成功能。但是，该列表似乎仅包含精确搜索的项目。我的要求是根据搜索到的项目获取额外的 item_details。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:52:18.907

您应该查看 Twitter 的[Typeahead.js](http://twitter.github.com/typeahead.js/)。他们最近开源了这个，并在 twitter.com 上进行了实战测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:31:48.100

我创建了一个 KO Combo，它可以支持这一点。

```
Live example 
```

[http://jsfiddle.net/JD49k/6/](http://jsfiddle.net/JD49k/6/)

回购 [https://github.com/AndersMalmgren/Knockout.Combobox](https://github.com/AndersMalmgren/Knockout.Combobox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-19T07:17:59.680

使用 Ko.bindingHandlers 创建易于实现和使用的自定义函数

```
<input id="ainput" class="form-control" data-bind="jqAuto: actualValue, jqAutoOnChange: autoChange, jqAutoQuery: autoQuery, jqAutoSourceLabel: 'Description', jqAutoSourceInputValue: 'Name', jqAutoSourceValue: 'Id'" /> 
```

在这里[小提琴](https://jsfiddle.net/RaviMakwana/qkw2x0bd/29/)检查工作演示。

# mysql - Mysql Round(x,d) 表中的小数点

> ID：15000181
> 
> 赞同：0
> 
> 时间：2013-02-21T10:42:04.877
> 
> 标签：mysql

例如，我有一个下表

```
 x double
 d tinyint 
```

对于不同的值，我想呈现不同的精度，例如

```
select round(x,d); 
```

有人对此有很好的解决方案吗？存储过程或与精度有关的东西保存在与值相同的表中。

* * *

请注意，如果 round(X, D) 中的 D 是一列，您将不会得到预期的结果。

如果您尝试以下操作：

```
USE test;
DROP TABLE IF EXISTS test_tbl;
CREATE TABLE test_tbl (x double, d tinyint) ENGINE MyISAM;
INSERT IGNORE INTO test_tbl (x,d) VALUES (1.12,3),(1.1234,3);
SELECT x,d,round(x,3),round(x,d) FROM test_tbl; 
```

结果将是：

```
x      d  round(x,3)  round(x,d)
1.12   3  1.120       1.12
1.1234 3  1.123       1.123 
```

注意第一轮（x，d）不是1.120，它会显示为1.12！

* * *

### 更新的解决方案

如果您定义如下所述的函数，您将获得预期的结果。

```
DELIMITER $$
DROP FUNCTION IF EXISTS StrRound;
CREATE FUNCTION StrRound(x double, d tinyint) RETURNS varchar(16) DETERMINISTIC COMMENT 'Returns string where x is rounded to d decimals (d from -6 to 6)'
BEGIN
  DECLARE s varchar(16);
  IF d=0 THEN SET s=cast(round(x, 0) as char);
  ELSEIF d=1 THEN SET s=cast(round(x, 1) as char);
  ELSEIF d=2 THEN SET s=cast(round(x, 2) as char);
  ELSEIF d=3 THEN SET s=cast(round(x, 3) as char);
  ELSEIF d=4 THEN SET s=cast(round(x, 4) as char);
  ELSEIF d=5 THEN SET s=cast(round(x, 5) as char);
  ELSEIF d=6 THEN SET s=cast(round(x, 6) as char);
  ELSEIF d=-1 THEN SET s=cast(round(x, -1) as char);
  ELSEIF d=-2 THEN SET s=cast(round(x, -2) as char);
  ELSEIF d=-3 THEN SET s=cast(round(x, -3) as char);
  ELSEIF d=-4 THEN SET s=cast(round(x, -4) as char);
  ELSEIF d=-5 THEN SET s=cast(round(x, -5) as char);
  ELSEIF d=-6 THEN SET s=cast(round(x, -6) as char);
  ELSE SET s=cast(x as char);
  END IF;
  RETURN s;  
END;$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:52:02.573

根据 MySQL 手册：“返回类型与第一个参数的类型相同” ROUND 的行为也取决于 MySQL 版本

当我在 MySQL 5.5.30 上运行您的示例时，所有尾随零都被删除：

```
x      d  round(x,3)  round(x,d)
1.12   3  1.12        1.12
1.1234 3  1.123       1.123 
```

所以你得到的可能是结果渲染问题。不知道为什么行为不同，因为两种类型都应该是浮点数（round（x，3）和round（x，d））。

无论如何，您可以使用 FORMAT 函数强制尾随零的数量：

```
SELECT x,d,FORMAT(round(x,3),3),FORMAT(round(x,d),d) FROM test_tbl; 
```

[http://sqlfiddle.com/#!2/5b125/3](http://sqlfiddle.com/#!2/5b125/3)

# php - PHP LDAP 多上下文身份验证

> ID：15000183
> 
> 赞同：0
> 
> 时间：2013-02-21T10:42:05.890
> 
> 标签：php, ldap

早上好，

我有一个提供 LDAP 身份验证（下面的代码）的 php 脚本，但是我需要对多个上下文进行身份验证。

我不确定解决此问题的最佳方法，并想知道是否有人可能有任何指示/建议。

亲切的问候，本

```
$username = $_POST["username"];
$password = $_POST["password"];

//$ipaddressreceived = $_POST["ipaddress"];
$ldapcontext = "ou=Staff, ou=Users,o=ABC";
$ldapconn = ldap_connect("IPADDRESS");  // must be a valid LDAP server!
$ldaprdn = "cn=$username,$ldapcontext";

function authenticate($username, $password) {

        global $ldapconn;
        global $username;
        global $password;
        global $ldaprdn;
        // Prevent null binding
        if ($username === NULL || $password === NULL) { return false; } 
        if (empty($username) || empty($password)) { return false; }

        // Bind as the user        
        $ldapbind = ldap_bind($ldapconn, $ldaprdn, $password);;
        if ($ldapbind) { $ret = true;
        } else {
            $ret = false;
        }

        return $ret;
    }

$authUser=authenticate($username, $password);

if ($authUser == true) {

    session_start();
    $_SESSION["username"]=$username;

    $ldapfields = array("cn", "givenname", "sn", "mail");

    $ldapsearch=ldap_search($ldapconn, "$ldapcontext", "cn=$username", "$ldapfields");  
    $info = ldap_get_entries($ldapconn, $ldapsearch);

    $givenname =  $info["sn"][0];

    $_SESSION["givenname"]=$givenname;

    $login_message = "LOGIN SUCCESSFUL";

    header("Location: index.php");
    exit;

    } else
    {
    $login_message = "Login Failed";

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:20:58.283

命名上下文由服务器在根 DSE 中发布（尽管此信息可能受到保护）。考虑从根 DSE 请求`namingContexts`多值属性。

### 也可以看看

*   [根 DSE](http://www.ldapguru.info/ldap/the-root-dse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:49:45.980

据我了解您的问题，您希望能够`jondoe`从 context`ou=Staff,ou=Users,o=ABC`以及`janedoe`从 context进行身份验证`ou=Externals,ou=Others,o=ABC`。

在我看来，只要用户名在整个 LDAP 中是唯一的，就有两种可能的方法。

首先，您可以将所有可能的上下文添加到数组中`$contexts`，然后遍历这些上下文以找到匹配的用户。

其次，您使用两步方法，在整个 LDAP 中通过用户名搜索用户，然后使用返回`dn`的用户名对 LDAP 进行身份验证。

您还可以通过提供多个搜索库并在搜索用户的步骤中迭代这些方法来组合这两种方法`dn`。找到用户后，您就可以使用`dn`和 密码对其进行身份验证。

[您可以在https://github.com/heiglandreas/authLdap/blob/master/ldap.php#L222](https://github.com/heiglandreas/authLdap/blob/master/ldap.php#L222)找到示例实现。

# android - 将视频/音频文件从 android 应用程序发送到 wcf 服务

> ID：15000187
> 
> 赞同：0
> 
> 时间：2013-02-21T10:42:22.227
> 
> 标签：android, wcf, file-upload, video-streaming

我尝试将视频文件从 android 发送到 wcf 服务。视频文件成功上传，两端大小相同，但问题是无法打开。当我尝试通过（vlc 播放器）打开时，它会显示一些错误，例如“ **vlc 不支持视频/音频格式 undf。** ”

**下面是我的安卓代码**

```
 package com.example.filedemo;

import java.io.File;
import java.io.IOException;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.entity.mime.content.StringBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Environment;
import android.util.Log;

public class HttpUpload {

    public static String res;
    public static String response;
    public void myUploadedfile() {
        HttpClient httpClient = new DefaultHttpClient();

        HttpPost postRequest = new HttpPost(
                "http://10.160.0.18:85/Service.svc/UploadFile?fileName=vd.mp4");
        /* ResponseHandler<String> responseHandler = new BasicResponseHandler(); */

        // Indicate that this information comes in parts (text and file)
        MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);

        try {

            // Create a JSON object to be used in the StringBody
            JSONObject jsonObj = new JSONObject();

            // Add some values
            jsonObj.put("filename", "vd.mp4");

            // Add the JSON "part"
            reqEntity.addPart("entity", new StringBody(jsonObj.toString()));
        } catch (JSONException e) {
            Log.v("App", e.getMessage());
        } catch (UnsupportedEncodingException e) {
            Log.v("App", e.getMessage());
        }

        FileBody fileBody = new FileBody(new File(
                Environment.getExternalStorageDirectory(), "vd.mp4"));// ,"application/octet-stream");
        reqEntity.addPart("file", fileBody);

        try {
            postRequest.setEntity(reqEntity);

            // Execute the request "POST"
            HttpResponse httpResp = httpClient.execute(postRequest);

            /*HttpResponse response = null;*/
            // Check the status code, in this case "created"

            Log.v("App", "Created");
            /*if (((HttpResponse) response).getStatusLine().getStatusCode() == HttpStatus.SC_CREATED)
            {

            }*/
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

**wcf 代码**

```
FileStream fileToupload = new FileStream("D:\\vd.mp4", FileMode.Create, FileAccess.Write);

    byte[] bytearray = new byte[10000];
    int bytesRead, totalBytesRead = 0;
    do
    {
    bytesRead = mystream.Read(bytearray, 0, bytearray.Length);
    totalBytesRead += bytesRead;
    } while (bytesRead > 0);

    fileToupload.Write(bytearray, 0, bytearray.Length);
    fileToupload.Close();
    fileToupload.Dispose();
    return "success"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:21:24.723

在文件正文中设置正确的 mime 类型并重试，例如：

```
new FileBody(new File(imagePath),"video/mp4") 
```

# c# - 更改绑定中的默认千位和小数点分隔符

> ID：15000191
> 
> 赞同：8
> 
> 时间：2013-02-21T10:42:29.547
> 
> 标签：c#, wpf, xaml, string-formatting

假设我有一个号码**1234567.89**。该数字显示在 WPF TextBlock 中。我正在尝试将`StringFormat`属性应用于属性，`Text`以便数字显示如下：

```
1.234.567,89 
```

如您所见，千位和小数点分隔符与不变的区域性规范相反。

我尝试为 设置许多组合`StringFormat`，但没有成功。这是我想出的最新的：

```
Text="{Binding SomeBinding, StringFormat={}{0:#'.'##0','00}}" 
```

但是输出不正确。此外，使用`N2`或改变文化不是一种选择。如果可能的话，我想避免使用转换器。

那么，有没有办法通过 XAML 更改默认分隔符？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T10:57:12.690

你不必*改变*文化。只需[`String.Format`](http://msdn.microsoft.com/en-us/library/1ksz8yb7.aspx)与指定的文化一起使用（de-DE 应该没问题）：

```
string output = String.Format(new CultureInfo("de-DE"), "{0:N}", yourDoubleValue); 
```

输出：`9.164,32`

如果您想在 XAML 中执行此操作，您可以尝试：

```
Text="{Binding SomeBinding, StringFormat={}{0:N}, ConverterCulture=de-DE}" 
```

# windows - 在 Windows 7/8 中读取设备管理器的属性字段

> ID：15000196
> 
> 赞同：6
> 
> 时间：2013-02-21T10:42:34.970
> 
> 标签：windows, c#-4.0, windows-7, device-manager

我正在开发一个提供字段详细信息的 Windows 应用程序 --> X。

X 在哪里 -->

右键单击我的电脑 >

```
 Properties >

          Device Manager > (select any Item - Say KeyBoard) >

                   Click it > standard PS/2 KeyBoard >

                                double Click standard PS/2 KeyBoard >

                                           click the Details Tab > 
```

在属性下有各种字段，如显示名称、问题代码、父兄弟姐妹等，等等？

我想得到他们的价值观。我可以为此使用哪个 Windows API。我正在为 Windows 7 和 Windows 8 执行此操作。我希望 API 保持不变。另外我有 64 位机器。对于我想从设备管理器了解其详细信息的任何设备，这必须是正确的。

另外，我只想进行所有操作-读取和不设置（写入），所以我认为违反管理员权限不会有任何问题。请建议。！我添加了快照以供参考！例如，我想知道 HID USB 投诉鼠标的当前状态（D0（活动）或 D2（睡眠））。

![显示 HID 兼容鼠标的 Powerdata 字段的图像](../Images/7cec861822a1656ef82ee41e145027db.png)

![显示 D0 的 HID 投诉鼠标的电源状态的图像 - 活动](../Images/0ee1b5c8f5b97127f23990554088c906.png)

我需要获取此电源状态 D0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-25T15:25:24.250

The question is tagged with C#, though the actual question asks for any Window API. With the Win32 API the information can be retrieved with [SetupDiGetDeviceRegistryProperty()](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551967%28v=vs.85%29.aspx). The steps would be:

1.  Get a device info set for the devices you're interested in via [SetupDiGetClassDevs()](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069%28v=vs.85%29.aspx).
2.  Iterate through the device infos via [SetupDiEnumDeviceInfo()](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551010%28v=vs.85%29.aspx).
3.  Get the properties via calls to SetupDiGetDeviceRegistryProperty().
4.  Destroy the device info set via [SetupDiDestroyDeviceInfoList()](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550996%28v=vs.85%29.aspx).

According to the documentation the API is available on Windows 2000 and later.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T05:05:50.103

It's quite easy to get the hardware information using [ManagementObjectCollection](http://msdn.microsoft.com/en-us/library/kedstsy5%28v=vs.71%29.aspx).

For instance to get all properties and values from the PC processor

```
var win32DeviceClassName = "win32_processor";
            var query = string.Format("select * from {0}", win32DeviceClassName);

            using (var searcher = new ManagementObjectSearcher(query))
            {
                ManagementObjectCollection  objectCollection = searcher.Get();

                foreach (ManagementBaseObject managementBaseObject in objectCollection)
                {
                    foreach (PropertyData propertyData in managementBaseObject.Properties)
                    {
                        Console.WriteLine("Property:  {0}, Value: {1}", propertyData.Name, propertyData.Value);
                    }
                }

            } 
```

The full list of WIN32 class name is available at [http://msdn.microsoft.com/en-us/library/aa394084%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa394084%28v=VS.85%29.aspx)

Cheers.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T04:19:19.727

使用 PowerShell 执行此操作将是最轻松的时间（我认为）。如果您正在编写一些 C# 代码，您可以使用 System.Management.Automation 命名空间中的类型执行 PS 脚本，例如 PowerShell（链接：http: [//msdn.microsoft.com/en-us/library/system.management。 automation.powershell(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.management.automation.powershell(v=vs.85).aspx)），但我会使用 PS 控制台开始您的测试。

您应该首先（使用 PowerShell）使用此命令探索环境中的 WMI 对象

```
Get-WmiObject -List -namespace root\CIMV2 
```

然后，一旦您确定了要查找的类，就可以使用以下命令检索该类的详细信息：

```
Get-WmiObject -namespace root\CIMV2 -class Win32_USBControllerDevice 
```

拥有该内容后，您必须解析文本。

**更新：**尝试使用此命令获取 PC 上鼠标驱动程序的“状态”、“状态”和“已启动”属性：

```
gwmi Win32_SystemDriver | where {$_.DisplayName -like "*Mouse*"} 
```

# oracle - Oracle：分区数 2^n

> ID：15000197
> 
> 赞同：0
> 
> 时间：2013-02-21T10:42:36.330
> 
> 标签：oracle, hash, partitioning

有人可以解释一下为什么使用哈希分区时分区数应该是 2、4、8、16 .. 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:53:17.033

也许以下内容会对您有所帮助：

[http://jonathanlewis.wordpress.com/2009/09/21/hash-partitions-2/](http://jonathanlewis.wordpress.com/2009/09/21/hash-partitions-2/)

# webdriver - 使用 webdriver 在网格中未打开多个 chrome 实例

> ID：15000198
> 
> 赞同：0
> 
> 时间：2013-02-21T10:42:48.237
> 
> 标签：webdriver, testng, selenium-grid

要使用 testng 和 selenium 网格运行并行测试，我确实遵循了步骤。

1）注册枢纽和电网：-

```
java -jar selenium-server-standalone-2.26.0.jar -role hub
java -jar selenium-server-standalone-2.26.0.jar -role node -  
Dwebdriver.chrome.driver="C:\D\chromedriver.exe" -hub 
http://localhost:4444/grid/register -browser  browserName=chrome,version=24,maxInstances=15,platform=WINDOWS 
```

2)Java 代码提供能力和实例化RemoteWebDriver。

```
 DesiredCapabilities capability=null;
    capability= DesiredCapabilities.chrome();
    capability.setBrowserName("chrome");
    capability.setVersion("24");
    capability.setPlatform(org.openqa.selenium.Platform.WINDOWS);
    driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability);
    driver.get(browsingUrl); 
```

3)Suite.xml

```
 <suite name="testapp" parallel="tests" > 
```

```
<test verbose="2" name="testapp" annotations="JDK">
    <classes>
        <class name="com.testapp" />
    </classes>
</test> 
```

```
 <profile>
      <id>testapp</id>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.6</version>
            <configuration>
                <testFailureIgnore>true</testFailureIgnore>
                <parallel>tests</parallel>
                   <threadCount>10</threadCount> 
                  <suiteXmlFiles>                          
                      <suiteXmlFile>target/test-classes/Suite.xml</suiteXmlFile>                     
                  </suiteXmlFiles>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile> 
```

运行maven测试

```
 mvn test -Ptestapp 
```

呼叫中心配置

```
http://localhost:4444/grid/console?config=true&configDebug=true 
```

告诉我有 15 个 chrome 实例可用，但运行 mvn 命令只打开了一个 chrome 实例。如果我做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:31:06.563

在您的 Suite.xml 中，您配置了属性`parallel = tests`。但实际上您在 xml 文件中只有一个`test`标签。因此，没有机会启动两个 chrome 实例。

有关并行性的更多信息，请参阅此处的 Testng 文档[。](http://testng.org/doc/documentation-main.html#parallel-tests)

**编辑：**

```
 <suite name="testapp" parallel="classes" >
    <test verbose="2" name="testapp" annotations="JDK">
      <classes>
        <class name="com.testapp"/>
        <class name="com.testapp"/>
      </classes>
    </test>
  </suite> 
```

通过上面的 XML 文件，`@Test`类中存在的方法`com.testapp`将在两个不同的线程中运行（即并行模式）。

如果要以并行模式运行单个`@Test`方法，则将 XML 文件`parallel`属性配置为`methods`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:34:44.447

在 testng 中，对于 parallel 属性，parallel = "methods" 表示所有带有@Test 注解的方法都是并行运行的。

parallel = "tests" 的意思是，如果你有

```
<test name = "P1">
   <classes>....</classes>
</test>
<test name = "P2">
   <classes>....</classes>
</test> 
```

P1 和 P2 将并行运行。如果两个测试中的类相同，则可能会发生相同的方法开始并行运行。

此外，pom 部分具有

```
<parallel>tests</parallel>
<threadCount>10</threadCount> 
```

将始终被您在 testng.xml 中指定的内容覆盖。所以你的surefire部分不需要包含该数据，因为如果你指定一个xml，它将采用你在xml中指定的内容，如果xml没有为并行指定任何值，那么默认值false将覆盖您在 pom.xml 中指定的内容。

# java - 将文件移动到 Android 库时，findViewById 返回 null

> ID：15000199
> 
> 赞同：3
> 
> 时间：2013-02-21T10:42:55.023
> 
> 标签：java, android, intellij-idea, android-library

在我的`Intellij`IDE 中，我有 2 个 Android 模块：A，它是一个库（用作 a `jar`）和 B，一个依赖于 A 的普通 android 模块。

在项目 A 中，我有`SomeActivity.java`, some_ `layout.xml`（还有一个`VideoView`带有`id`: some_view 的）。早些时候我将这些模块合并为一个时，以下逻辑没有问题：

```
public class SomeActivity extends RoboActivity
{
    VideoView view;
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.some_layout);
        view = (VideoView) findViewById(R.id.some_view);
    }
    ...
} 
```

但现在`findViewById`返回 null。

请注意，项目 B 不会覆盖`some_layout.xml`

我使用`guice3`with`roboguice 2.0`和注入视图以`NullPointerException`. 情况与`guice2`Injecting `roboguice 1.1.2` by tag 相同。

为什么当我将文件移动到外部库模块时`findViewById`返回？`null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:48:46.877

Android 仍然不支持将资源导出到 jar 的项目/库。

唯一的解决方案是将其用作项目并检查 Android 项目属性框“是库”并将其添加到您要使用的其他项目（是 Android 项目属性）。

# python - Matplotlib 绘图未显示为非 root 用户

> ID：15000202
> 
> 赞同：0
> 
> 时间：2013-02-21T10:43:03.130
> 
> 标签：python, matplotlib

知道这是一个问题，问了 100 次，但没有任何解决方案可以帮助我。

试图制作一个简单的情节：

```
import matplotlib.pyplot as p 
p.plot(range(20), range(20))
p.show() 
```

我在 ~/.matplotlib/matplotlibrc 中使用了几个后端，例如 GTK，GTKAgg，Qt4Agg，gdk，agg，svg，kairo，...），通过添加行

```
backend: <backend> 
```

但是当我尝试绘图时没有任何反应。没有错误信息，什么都没有。我使用了标准控制台 python2.7 和 IPython 控制台。

我正在使用带有 Gnome 桌面的 CentOS。Matplotlib 是 1.2.0。

你有什么想法？

注意：我意识到这只是非 root 用户的问题。

# autohotkey - Windows中的键绑定Wacom数位板控制面板

> ID：15000203
> 
> 赞同：1
> 
> 时间：2013-02-21T10:43:02.223
> 
> 标签：autohotkey, wacom

我正在寻找有关在 Win 7 中更改 wacom 数位板控制面板选项的任何帮助。

**我需要做什么；**
我拥有一台 Wacom 数位板，我希望更改其中一个选项，“Tip Feel”。
此选项控制笔的工作方式，设置为“软”它使笔需要的压力更小，并且就像毡尖或软刷一样。设置为“牢固”会使笔需要很大的压力，感觉就像一支非常硬的铅笔或技术笔。

*最终，我会将 3 个键绑定到三种不同的“尖端感觉”——柔软、中等和牢固*

下面是控制面板界面，我感兴趣的选项以红色突出显示

[http://www.fuzzypiglet.com/crap/cp.jpg](http://www.fuzzypiglet.com/crap/cp.jpg)

**从技术上讲，这意味着；**
1\. 打开控制面板
2\. 在顶部选择几个选项（Tablet - Intuos4 L），（工具 - 握笔），（应用程序 - Painter 12 x64）
3\. 将笔尖感觉滑块更改为“软”（7 步选项所以可能是数字“1”）
4\. 关闭控制面板并恢复 Painter 应用程序

这个软件是否适合我想做的事情？除了一点html之外，我根本没有编程经验。

# oracle - 在 oracle 上跟踪成员更改历史记录

> ID：15000205
> 
> 赞同：1
> 
> 时间：2013-02-21T10:43:07.287
> 
> 标签：oracle, recursion

我试图编写查询来跟踪成员更改历史记录，但我现在遇到了问题。这是我在下面使用的表格，

```
CURRENT_NO、NEW_MEMBER_NO、OLD_MEMBER_NO、SEQ_NO
---------- ------------- ------------- ------
 M002 M001 M000 1  
 M002 M002 M001 1  
            M100 M004 1  
            M100 M005 1  
            M101 M100 1  
            M201 M200 1
            M200 M201 2

```

我想要做的是跟踪 member_no 更改历史记录并将 CURRENT_NO 列更新为 currnet 成员编号。

这是我想要的结果

```
CURRENT_NO、NEW_MEMBER_NO、OLD_MEMBER_NO、SEQ_NO
---------- ------------- ------------- ------
 M002 M001 M000 1
 M002 M002 M001 1

 M101 M100 M004 1
 M101 M100 M005 1
 M101 M101 M100 1

 M200 M201 M200 1
 M200 M200 M201 2

```

在第一行使用 OLD_MEMBER_NO，我搜索 NEW_MEMBER_NO，如果找到它，则将第一行的 CURRENT_NO 更新为第二行的 NEW_MEMBER_NO。

CURRENT_NO 列显示当前成员没有每一行。

1）成员 M000 更改为 M001，从 M001 更改为 M002，所以现在 CURRENT_NO 列在两行上都是 M002
2）它有时是复杂的。M004 和 M005 -> M100 -> M101
这种改变是可能的。对于这种情况，CURRENT_NO 都是 M101。
3) M200 -> M201，然后再次从M201变为M200。更大的 SEQ_NO 是新的。所以对于这种情况，CURRENT_NO 是 M200。

我尝试使用像 belo 之类的查询,,....

```
更新
       （选择 A.MBR_# 作为 MBR_#，
              b.NEW_MBR_# 作为 B_NEW_MBR_#,
              B.OLD_MBR_# AS B_OLD_MBR_#,
              A.NEW_MBR_# 作为 A_NEW_MBR_#,
              A.OLD_MBR_# AS A_OLD_MBR_#  
         从 BI_MEMBER_HISTORY A，
              BI_MEMBER_HISTORY B  
        其中 B.OLD_MBR_# = A.NEW_MBR_#
       )
SET MBR_# = B_NEW_MBR_#；

```

问题是
1) 有时有超过 2 个更改。
2）和上面的例子3..这让我写查询很复杂..我知道我的查询有问题。

我尝试使用带有游标或递归查询的过程，但我不知道如何处理它。
谁能给我一个线索？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:19:12.940

根据您的要求，您可以使用如下查询找到每行的当前编号：

```
SQL> WITH DATA AS (
  2  SELECT 'M001' new_no, 'M000' old_no, 1 seq FROM dual
  3  UNION ALL SELECT 'M002', 'M001', 1 FROM dual
  4  UNION ALL SELECT 'M100', 'M004', 1 FROM dual
  5  UNION ALL SELECT 'M100', 'M005', 1 FROM dual
  6  UNION ALL SELECT 'M101', 'M100', 1 FROM dual
  7  UNION ALL SELECT 'M201', 'M200', 1 FROM dual
  8  UNION ALL SELECT 'M200', 'M201', 2 FROM dual
  9  )
 10  SELECT root old_no,
 11         MAX(new_no)
 12            KEEP (DENSE_RANK FIRST ORDER BY seq DESC, lvl DESC) current_no
 13    FROM (SELECT connect_by_root(old_no) root,
 14                 level lvl, new_no, old_no, seq
 15            FROM DATA
 16          CONNECT BY NOCYCLE PRIOR new_no = old_no)
 17   GROUP BY root;

OLD_NO CURRENT_NO
------ ----------
M000   M002
M001   M002
M004   M101
M005   M101
M100   M101
M200   M200
M201   M200 
```

内部查询为每个子项构建所有子项的列表，`old_no`并使用 跟踪根[`CONNECT_BY_ROOT`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/operators004.htm#i1035022)。

外部查询在所有后代中从每个根`level desc`的最后一个沿袭序列 ( ) 中选择该沿袭 ( ) 的最后一个孩子。`seq desc`

您可以将此查询的结果合并到您的表中：

```
MERGE INTO (your_table) t
     USING (above_query) q
        ON (t.old_no = q.old_no)
    WHEN MATCHED THEN UPDATE SET t.current_no = q.current_no; 
```

# ruby-on-rails - Ruby on Rails 锁定 Sqlite 数据库

> ID：15000206
> 
> 赞同：1
> 
> 时间：2013-02-21T10:43:07.917
> 
> 标签：ruby-on-rails, ruby, sqlite

我想知道`lock`传递给查询语句的参数是否实际上会锁定记录并避免并发读取。

前任： `Query.where(:id => 1, :lock => true)`

这是否保证在我释放锁之前没有其他人会读取此记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:36:28.527

的概念`locking`适用于`update`，而不是`read`。当一条记录被锁定时，通常可以查看该记录；更重要的问题是当记录被锁定时是否任何人都可以更新记录。

您提到的语法将`lock`在表中按名称查找字段。

对于[使用 rails 的悲观锁定](http://guides.rubyonrails.org/active_record_querying.html#pessimistic-locking)，语法如下：

```
Query.where(:id => 1 ).lock( true ) 
```

正如我在上面链接的 Rails 指南文档中所解释的：

> 悲观锁定使用底层数据库提供的锁定机制。

因此建议查看数据库文档，了解该数据库提供了什么样的锁定机制。

在多个`rails console`会话中使用锁定功能，我能够从一个窗口更新记录，而同一记录被另一个窗口锁定。

所以看起来我的sqlite数据库版本不支持锁定。

# azure - 遵循 Windows Azure 文档时 IP 限制不起作用

> ID：15000210
> 
> 赞同：2
> 
> 时间：2013-02-21T10:43:28.737
> 
> 标签：azure, azure-web-roles, ip-restrictions

我想尝试限制对基于 IP 的“云服务”的 webrole 的访问。[这篇文章](http://msdn.microsoft.com/nl-nl/library/windowsazure/jj154098.aspx)中有一个很好的文档，但是当我按照它进行部署时，我得到了一个错误。

我得到的错误是：
`Recycling (Role has encountered an error and has stopped. Application startup task failed with exit code 1`

这是错误的一部分

`%windir%\system32\inetsrv\AppCmd.exe unlock config -section:system.webServer/security/ipSecurity`

所以我认为命令是错误的，我在 Windows 2012 操作系统上运行*Webrole*。

当只添加*web.config*部分时，没有任何变化并且它不起作用

```
<system.webServer>
    <security>
        <!—Unlisted IP addresses are denied access–&gt;
        <ipSecurity allowUnlisted=”false”&gt;
        <!—The following IP addresses are granted access–&gt;
            <add allowed=”true” ipAddress=”192.168.100.1” subnetMask=”255.255.0.0″ />
           <add allowed=”true” ipAddress=”192.168.100.2″ subnetMask=”255.255.0.0″ />
        </ipSecurity>
    </security>
</system.webServer> 
```

有没有人有这方面的经验，谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:54:22.200

如果您通过 RDP 登录到任何正在运行的 Windows azure 云服务实例并以提升的权限启动命令行，您可以在启动脚本中使用这些命令之前对其进行测试。这样，您可能会收到正确的错误消息。

我在我的一个 Azure 实例上进行了尝试，我注意到：

```
%windir%\system32\inetsrv\AppCmd.exe unlock config - section:system.webServer/security/ipSecurity 
```

永不退出，但

```
%windir%\system32\inetsrv\AppCmd.exe unlock config /section:system.webServer/security/ipSecurity 
```

成功了。

# grep - 海量文件中的 Grep 搜索和替换

> ID：15000211
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:43:35.490
> 
> 标签：grep

即使有很多 grep 问题和答案，这些都没有回答，我需要帮助。我需要做

```
Title-BEX-override-8>" 
```

成为的表达

```
Title-BEX>" 
```

`Title-BEX`和之间的任何字母或单词`>"`都应终止。我需要一个精确的 grep 表达式。

一些可选的答案可能与此有关：我想做的是精简多个文件。并且更喜欢在 Mac 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:48:27.420

grep 无法进行文本替换。

尝试`sed`

```
sed 's/Title-BEX-override-8/Title-BEX/g' file 
```

-i 选项可以让您“就地”完成。但我不知道您在 mac 上的 sed 是否有相应的选项 .. :(

# jquery - 处理性能 - fadeTo() vs css opacity

> ID：15000212
> 
> 赞同：2
> 
> 时间：2013-02-21T10:43:45.013
> 
> 标签：jquery, html, css

我已经尝试了由这些功能动画的重复事件：

1.  jquery动画效果：`fadeTo(1000,1);`
2.  `$('#foo').on('click', function(){ $('#bar').css({"opacity":1});`

当我一次又一次地重复切换事件时，似乎事件变得越来越慢。

我也查看了 Chrome 中的任务管理器，但是很难看到 GPU 消耗不同。

你知道哪一个执行得更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:50:31.420

在刚刚运行 jsPerf 之后，正如我所怀疑的那样，这似乎`fadeTo`明显**变慢**了。

事实上，对我来说，它**慢了 56%**：

这是我创建的测试，您可以自己运行：http: [//jsperf.com/fadeto-vs-css-opacity](http://jsperf.com/fadeto-vs-css-opacity)

![在此处输入图像描述](../Images/b3dd3b3a7a89dfea1af15358686f302d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:51:10.393

.css 方法消耗的 GPU 比 fadeTo 少得多

# ios6 - 使用标签栏控制器在 iOS6 设备上忽略 ShouldAutorotateToInterfaceOrientation

> ID：15000216
> 
> 赞同：0
> 
> 时间：2013-02-21T10:44:02.603
> 
> 标签：ios6, xamarin.ios, screen-rotation

我有一个使用 6.1 SDK 的 Monotouch 6.0.10 iPhone 应用程序，但针对 iOS 4.0 及更高版本，我尝试使用 ShouldAutorotateToInterfaceOrientation 仅将其中一个视图强制为纵向，但未成功。我意识到它现在已被弃用，但仍然需要支持 iOS4/iOS5 设备。

为了尝试隔离问题，我编写了一个最小的测试应用程序。它没有 XIB，并且有一个带有一个选项卡的 UITabBarController。该选项卡有一个 UINavigationController 并且 UINavigationController 有一个 UIViewController（带有一个 hello world 按钮可以单击）。

在 AppDelegate 我有：

```
tabController = new TabController();
window.RootViewController = tabController; 
```

在 UITabBarController 和 UINavigationController 我有：

```
public override bool ShouldAutorotateToInterfaceOrientation(UIInterfaceOrientation toInterfaceOrientation)
    {
        return true;
    } 
```

在 UIViewController 我有：

```
public override bool ShouldAutorotateToInterfaceOrientation(UIInterfaceOrientation toInterfaceOrientation)
{
    if ( toInterfaceOrientation == UIInterfaceOrientation.Portrait )
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

好吧，至少在 iOS 6.1 设备上，那些 ShouldAutorotateToInterfaceOrientation 似乎完全被忽略了。没有达到断点，如果我在每种情况下都强制它们返回 false，旋转仍然会发生。

我的理解是，ShouldAutomaticallyForwardRotationMethods 默认为 true，因此似乎无法提供解决方案。除了 Glen Schmidt 的建议外，没有运气梳理了论坛：[iOS 6 轮换：supportedInterfaceOrientations 不起作用？](https://stackoverflow.com/questions/12410031/ios-6-rotations-supportedinterfaceorientations-doesnt-work)但不幸的是，我不知道如何将其转换为 MonoTouch：

引用

```
If you want to replicate the pre-iOS 6 behaviour where all the views in the navigation stack / tab bar have to agree on an allowable set of orientations, put this in your subclass of UITabBarController or UINavigationController:

- (NSUInteger)supportedInterfaceOrientations
{
    NSUInteger orientations = [super supportedInterfaceOrientations];

    for (UIViewController *controller in self.viewControllers)
        orientations = orientations & [controller supportedInterfaceOrientations];

    return orientations;
} 
```

取消报价

我也明白我什至不能希望通过 ShouldAutoRotate/SupportedInterfaceOrientations 为我的 iOS6 用户解决它，因为这会导致 iOS4/IOS5 旋转失败。

任何建议都非常感谢！

账单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:31:34.617

经过一番折腾，找到了一个可行的解决方案。有人可能会对此进行改进。

问题

我的应用基于 SDK 6.1，面向 iOS4、iOS5 和 iOS6 设备。它需要允许所有屏幕旋转，除了必须固定为纵向的屏幕。该应用程序有一个 UITabBarController，大多数选项卡都有一个 UINavigationController，下面有堆叠的视图。

解决方案

对于 iOS4/iOS5 用户，关键是应用程序的根视图控制器（在我的例子中是标签栏控制器）中已弃用的 ShouldAutorotateToInterfaceOrientation() 方法。该方法不会在任何其他视图控制器中自动调用，但根视图控制器当然可以调用当前视图控制器中的同名方法。

对于 iOS6 用户，关键是应用程序根视图控制器中的 ShouldAutorotate() / GetSupportedInterfaceOrientations()。同样，这些方法不会在任何其他视图控制器中自动调用，但根视图控制器可以调用当前视图控制器中的同名方法。

对于我在原始帖子中描述的简单测试应用程序：

在 AppDelegate/FinishedLaunching 中：

```
window.RootViewController = tabController; 
```

在 AppDelegate 中：

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations (UIApplication application, UIWindow forWindow)
{
    return UIInterfaceOrientationMask.All;
} 
```

在 TabController 中：

```
public override bool ShouldAutorotateToInterfaceOrientation(UIInterfaceOrientation toInterfaceOrientation)  // iOS4/iOS5 only
{
    try
    {
        UINavigationController navController = (UINavigationController)SelectedViewController;
        UIViewController targetController = navController.ViewControllers[0];
        if ( targetController.Title == "Greetings")
        {
            if ( toInterfaceOrientation == UIInterfaceOrientation.Portrait )
            {
                return true;
            }
            else
            {
                return false;
            }
        }
    }
    catch
    {
        return true;
    }
    return true;
}

public override bool ShouldAutorotate() // iOS6+ only
{
    return true;
}

public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations()  // iOS6+ only
{
    try
    {
        UINavigationController navController = (UINavigationController)SelectedViewController;
        UIViewController targetController = navController.ViewControllers[0];
        return targetController.GetSupportedInterfaceOrientations();
    }
    catch
    {
        return UIInterfaceOrientationMask.All;
    }
    return UIInterfaceOrientationMask.All;
} 
```

在需要纵向的视图控制器中：

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations()  // iOS6+ only
{
    return UIInterfaceOrientationMask.Portrait;
} 
```

我的实际应用程序需要一些更精细但沿线相同的东西。例如在标签栏控制器中：

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations()
{
    try
    {
        UINavigationController navController = (UINavigationController)SelectedViewController;
        if ( navController.Title == "Tracking" )        // Are we on the Tracking tab?
        {
            // Yes. Looking for RedLaser's BarcodePickerController
            UIViewController targetController = navController.ViewControllers[1];       // BarcodePicker would be second on nav stack
            string controllerType = targetController.GetType().Name;

            if ( controllerType == "BarcodePickerController" )                          // Is this BarcodePicker?   
            {
                return UIInterfaceOrientationMask.Portrait;                             // Yes, force portrait orientation                          
            }
        }
        else
        {
            return UIInterfaceOrientationMask.All;                                      // No, allow any orientation
        }
    }
    catch
    {
        return UIInterfaceOrientationMask.All;                                          // Not BarcodePicker, allow any orientation
    }
    return UIInterfaceOrientationMask.All;
} 
```

# sql - 如何获取单行表单组

> ID：15000217
> 
> 赞同：1
> 
> 时间：2013-02-21T10:44:04.423
> 
> 标签：sql, oracle, plsql

![图片](../Images/dc25ef91c8d8739391ce134e15195a7f.png)

我想要一个能给我想要的输出的查询，我正在使用以下查询

```
select table1.name1,table2.address 
from table1 join table2 
   on(table1.key=table2.key); 
```

它给了我结果加入螺母后，每个键只需要一行。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:53:23.090

如果允许任何组合但每个键只有一行，请尝试以下操作：

```
select table1.name1, MAX(table2.address) address
from table1
    join table2
       on table1.key=table2.key
group by table1.name1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:53:27.160

试试这样

```
select *
from (select table2.address,
      rank() over ( partition by table1.name1 order by table1.key) rn
      from table1 join table2 on(table1.key=table2.key))
where rn = 1 
```

# android - 当在 FrameLayout 中查看时，layout_marginLeft 在 Android API < 11 上正常工作

> ID：15000225
> 
> 赞同：3
> 
> 时间：2013-02-21T10:44:12.913
> 
> 标签：android, android-framelayout

当我`layout_marginLeft`从代码中使用或设置左边距时，它的工作方式为`layout_marginRight`. 当我在 Android API < 11 的布局的根 中或根中放置`View`时，会出现这种行为。`layout_marginLeft``FrameLayout`

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="50dp"
                android:background="#77cc99"
        >
    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:background="#eebbaa">
        <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Hello World, MyActivity"
                />
        </FrameLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T11:05:58.650

默认情况下`android:layout_gravity`，属性设置为“左” `FrameLayout`。如果你想使用`android:layout_marginLeft`你应该改变它：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:layout_marginLeft="50dp"
    android:background="#77cc99"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:layout_marginLeft="50dp"
        android:background="#eebbaa" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Hello World, MyActivity" />    
    </FrameLayout>
</FrameLayout> 
```

# ruby-on-rails - psql 错误：关系已经存在

> ID：15000227
> 
> 赞同：6
> 
> 时间：2013-02-21T10:44:24.320
> 
> 标签：ruby-on-rails, postgresql, capistrano

我正在使用 postgres 编写一个 rails 项目，并且服务器中有一些数据。我想将数据从远程端转储到本地，所以我编写了脚本来执行它，但是出现了一些错误。

这是转储脚本：

```
run "PGPASSWORD='#{remote_settings['password']}' 
pg_dump -U #{remote_settings["username"]} #{"-h '#{remote_settings["host"]}'" 
if remote_settings["host"]} 
'#{remote_settings["database"]}' > #{remote_sql_file_path}" 
```

有一些代码可以传输..

```
Transport codes 
```

这是恢复脚本：

```
run_locally "PGPASSWORD='#{local_settings['password']}' psql -U 
#{local_settings["username"]} -d #{local_settings["database"]} 
-f #{local_sql_file_path}" 
```

我成功获取了数据文件，但是当运行****restore 脚本时出现一些错误***：

```
psql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:46: ERROR:  relation        "refinery_images" already exists
psql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:49: ERROR:  role "ib5k" does not exist
psql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:60: ERROR:  relation "refinery_images_id_seq" already exists
psql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:63: ERROR:  role "ib5k" does not exist
psql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:83: ERROR:  relation "refinery_page_part_translations" already exists
psql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:86: ERROR:  role "ib5k" does not exist
...
sql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:525: ERROR:  duplicate key  value violates unique constraint "refinery_images_pkey"
DETAIL:  Key (id)=(1) already exists.
CONTEXT:  COPY refinery_images, line 2: ""
psql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:547: ERROR:  duplicate key value violates unique constraint "refinery_page_part_translations_pkey"
DETAIL:  Key (id)=(1) already exists.
CONTEXT:  COPY refinery_page_part_translations, line 8: ""
psql:tmp/production-ib5k_production-2013-02-21_18:42:09.sql:569: ERROR:  duplicate key value violates unique constraint "refinery_page_parts_pkey"
DETAIL:  Key (id)=(1) already exists.
CONTEXT:  COPY refinery_page_parts, line 8: ""
... 
```

并且本地的数据库不会更新。我想知道怎么解决？添加一些论据？先感谢您。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-21T11:38:46.960

您可以对[pg_dump](http://www.postgresql.org/docs/9.2/static/app-pgdump.html)`-c`使用or`--clean`参数。该参数将在运行命令创建它们之前删除现有的数据库对象。

另一种方法是在恢复之前自己放下这些对象。（可能使用`drop schema`或`drop database`。）

谨慎使用。

# php - 导入 sql 文件时出现数据库错误

> ID：15000228
> 
> 赞同：0
> 
> 时间：2013-02-21T10:44:26.903
> 
> 标签：php, mysql

我准备了一个 sql 文件，并将包含在文件中，如下所示。

```
INSERT INTO `wp_options` (`option_name`, `option_value`, `autoload`)
VALUES('siteurl','http://localhost/TantraProjects/Ranjit/nt_plugin','yes'),
('blogname','NT PLUGIN','yes'),
('blogdescription','Just another WordPress site','yes'),
('users_can_register','0','yes'),
('admin_email','ranjit.pradhan@nettantra.com','yes'),
('start_of_week','1','yes'),
('use_balanceTags','0','yes'),
('use_smilies','1','yes'),
('require_name_email','1','yes'),
('comments_notify','1','yes'),
('posts_per_rss','10','yes'),
('rss_use_excerpt','0','yes'),
('mailserver_url','mail.example.com','yes'),
('mailserver_login','login@example.com','yes'),
('mailserver_pass','password','yes'),
('mailserver_port','110','yes'),
('default_category','1','yes'),
('default_comment_status','open','yes'),
('default_ping_status','open','yes'),
('default_pingback_flag','1','yes'),
('posts_per_page','10','yes'),
('date_format','F j, Y','yes'),
('time_format','g:i a','yes'),
('links_updated_date_format','F j, Y g:i a','yes'),
('links_recently_updated_prepend','<em>','yes'),
('links_recently_updated_append','</em>','yes'),
('links_recently_updated_time','120','yes'),
('comment_moderation','0','yes'),
('moderation_notify','1','yes'),
('permalink_structure','','yes'),
('gzipcompression','0','yes'),
('hack_file','0','yes'),
('blog_charset','UTF-8','yes'),
('moderation_keys','','no'),
('active_plugins','a:1:{i:0;s:40:\"option-url-changes/option-url-change.php\";}','yes'),
('home','http://localhost/TantraProjects/Ranjit/nt_plugin','yes'),
('category_base','','yes'),('ping_sites','http://rpc.pingomatic.com/','yes'),
('advanced_edit','0','yes'),('comment_max_links','2','yes'),('gmt_offset','0','yes'),
('default_email_category','1','yes'),('recently_edited','','no'),
('template','twentyeleven','yes'),('stylesheet','twentyeleven','yes'),
('comment_whitelist','1','yes'),('blacklist_keys','','no'),
('comment_registration','0','yes'),('html_type','text/html','yes'),
('use_trackback','0','yes'),('default_role','subscriber','yes'),
('db_version','22441','yes'),('uploads_use_yearmonth_folders','1','yes'),
('upload_path','','yes'),('blog_public','1','yes'),('default_link_category','2','yes'),
('show_on_front','posts','yes'),('tag_base','','yes'),('show_avatars','1','yes'),
('avatar_rating','G','yes'),('upload_url_path','','yes'),
('thumbnail_size_w','150','yes'),
('thumbnail_size_h','150','yes'),('thumbnail_crop','1','yes'),
('medium_size_w','300','yes'),('medium_size_h','300','yes'),
('avatar_default','mystery','yes'),('large_size_w','1024','yes'),
('large_size_h','1024','yes'),('image_default_link_type','file','yes'),
('image_default_size','','yes'),('image_default_align','','yes'),
('close_comments_for_old_posts','0','yes'),('close_comments_days_old','14','yes'),
('thread_comments','1','yes'),('thread_comments_depth','5','yes'),
('page_comments','0','yes'),('comments_per_page','50','yes'),
('default_comments_page','newest','yes'),('comment_order','asc','yes'),
('sticky_posts','a:0:{}','yes'),
('widget_categories','a:2:{i:2;a:4:{s:5:\"title\";s:0:\"\";s:5:\"count\";i:0;s:12:\"hierarchical\";i:0;s:8:\"dropdown\";i:0;}s:12:\"_multiwidget\";i:1;}','yes'),
('widget_text','a:0:{}','yes'),
('widget_rss','a:0:{}','yes'),
('uninstall_plugins','a:0:{}','no'),
('timezone_string','','yes'),
('page_for_posts','0','yes') 
```

当我导入此文件时，它会显示如下所示的错误消息。

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1

INSERT INTO `wp_options` (`option_name`, `option_value`, `autoload`)
VALUES('siteurl','http://localhost/TantraProjects/Ranjit/nt_plugin','yes'),
('blogname','NT PLUGIN','yes'),
('blogdescription','Just another WordPress site','yes'),
('users_can_register','0','yes'),
('admin_email','ranjit.pradhan@nettantra.com','yes'),
('start_of_week','1','yes'),
('use_balanceTags','0','yes'),
('use_smilies','1','yes'),
('require_name_email','1','yes'),
('comments_notify','1','yes'),
('posts_per_rss','10','yes'),
('rss_use_excerpt','0','yes'),
('mailserver_url','mail.example.com','yes'),
('mailserver_login','login@example.com','yes'),
('mailserver_pass','password','yes'),
('mailserver_port','110','yes'),
('default_category','1','yes'),
('default_comment_status','open','yes'),
('default_ping_status','open','yes'),
('default_pingback_flag','1','yes'),
('posts_per_page','10','yes'),
('date_format','F j, Y','yes'),
('time_format','g:i a','yes'),
('links_updated_date_format','F j, Y g:i a','yes'),
('links_recently_updated_prepen[...] 
```

我在这里做错了什么，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:23:50.083

您的查询工作正常。您的查询没有问题。

我用这个结构创建了一个测试表

如果不存在则创建表`wp_options`（ `option_name`varchar(250) NOT NULL, `option_value`varchar(250) NOT NULL, `autoload`varchar(250) NOT NULL, `id`int(11) NOT NULL AUTO_INCREMENT, PRIMARY KEY ( `id`) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 AUTO_INCREMENT=88 ;

并尝试添加运行您的插入查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:51:45.487

你是如何导入文件的？

您还没有指定要导入哪个数据库

```
USE Databasename;

INSERT INTO ... 
```

# php - 在 PHP 中寻找一些 REGEX 帮助

> ID：15000230
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:44:34.413
> 
> 标签：php, regex

我有一个字符串：

```
[COLOR=gray]A bunch of text.[/COLOR] 
```

我想写一个`preg_replace`删除和之间的所有东西`"[COLOR=gray]"`——`"[/COLOR]"`如果也可以删除这些标签，那就太好了，否则我可以在之后做一个简单的替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:49:41.657

```
$str  = 'dfgdfg[COLOR=gray]A bunch of text.[/COLOR]dfgdfgdfgfg';

$str1 = preg_replace('/\[COLOR=gray\].*\[\/COLOR\]/',"",$str);

echo $str1; 
```

或者

如果颜色并不总是灰色

```
$str  = 'dfgdfg[COLOR=gray]A bunch of text.[/COLOR]dfgdfgdfgfg';

$str1 = preg_replace('/\[COLOR=\w+\].*\[\/COLOR\]/',"",$str);

echo $str1; 
```

# javascript - 网格中的模板行

> ID：15000231
> 
> 赞同：0
> 
> 时间：2013-02-21T10:44:43.803
> 
> 标签：javascript, jquery, jqgrid

这可以更改 jqGrid 的行模板吗？例如，我们有四列，我想得到类似的东西：

![在此处输入图像描述](../Images/25a2e2abb3ecb5572335ef4889c4a996.png)

如果这是不可能的，您可以为这项任务推荐其他免费组件吗？如果这个组件有分页、搜索、排序功能会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:00:04.513

对不起，但很不清楚你的意思。你的意思是哪个“模板行”？jqGrid 使用 HTML`<table>`作为网格的基础，每一行数据都将表示为一个`<tr>`元素。

因此，如果您有一些具有 4 列的数据库表，并且您希望将数据库中的一行显示为 HTML 页面上的两行，您可以在 2 列而不是 4 列中为 jqGrid 提供数据，但行数是两倍。

我不明白您希望如何解释此类网格中的排序和搜索，但是如果您将使用`datatype: "json"`or`datatype: "xml"`然后您的服务器代码将负责数据的排序和搜索，因此您通常可以在这种情况下实现您的自定义行为。

# html - 2“样式”内联css img标签？

> ID：15000239
> 
> 赞同：5
> 
> 时间：2013-02-21T10:45:08.453
> 
> 标签：html, css

我有以下标签

```
<img src="http://img705.imageshack.us/img705/119/original120x75.png"style="height:100px;" 
style="width:100px;" alt="25"/> 
```

我在里面放了两个倾斜的 CSS 命令

```
style="width:100px;"
style="height:100px;" 
```

由于某种原因，图片的高度为 100 像素，但没有宽度。我认为这是因为你不能在同一个标​​签中连续写两个。如果这是真的，有没有办法同时分配高度和宽度？我已经在我的外部 CSS 上分配了不同的图像大小，我认为您不能在外部 CSS 的标签属性中添加`img`属性。`div`谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T10:46:25.860

您不需要 2 个样式属性 - 只需使用一个：

```
<img src="http://img705.imageshack.us/img705/119/original120x75.png" 
                                     style="height:100px;width:100px;" alt="25"/> 
```

但是，请考虑改用 CSS 类：

CSS：

```
.100pxSquare
{
  width: 100px;
  height: 100px;
} 
```

HTML：

```
<img src="http://img705.imageshack.us/img705/119/original120x75.png" 
                                          class="100pxSquare" alt="25"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T10:49:12.603

不要使用多个样式属性。只需在 style 属性中使用`;` It is a block of inline CSS 来分隔样式，因此可以将其视为在单独的样式表中处理 CSS。

所以在这种情况下： `style="height:100px;width:100px;"`

您可以将它用于任何 CSS 样式，因此如果您想将文本的颜色更改为白色： `style="height:100px;width:100px;color:#ffffff"`等等。

然而，谨慎使用内联 CSS 是值得的，因为它会使代码在未来变得更难管理。使用外部样式表可能是一个更好的选择。这实际上取决于您的要求。内联 CSS 确实可以加快编码速度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T10:52:19.690

你应该使用：

```
<img src="http://img705.imageshack.us/img705/119/original120x75.png" style="height:100px;width:100px;" alt="25"/> 
```

那应该工作！

如果你想创建类，那么：

```
.size {
width:100px;
height:100px;
} 
```

然后像这样应用它：

```
<img src="http://img705.imageshack.us/img705/119/original120x75.png" class="size" alt="25"/> 
```

通过创建一个类，您可以在多个地方使用它。

如果您只想在一个地方使用，请使用内联 CSS。内联 CSS 也会覆盖其他 CSS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-18T05:33:46.450

**如果使用你使用的内联 CSS**

```
<img src="http://img705.imageshack.us/img705/119/original120x75.png" style="height:100px;width:100px;" alt="705"/> 
```

否则，您可以使用与单独的 css 文件（样式化您的网站）相关的类属性，就像 **在 CSS 文件中一样**

```
.imgSize {height:100px;width:100px;} 
```

**在 HTML 文件中**

```
<img src="http://img705.imageshack.us/img705/119/original120x75.png" style="height:100px;width:100px;" alt="705"/> 
```

# hadoop - 如何创建从 hive 表到关系数据库的数据管道

> ID：15000245
> 
> 赞同：0
> 
> 时间：2013-02-21T10:45:26.847
> 
> 标签：hadoop, hive, pipeline, sqoop, oozie

背景 ：

我有一个包含日志信息的 Hive 表“日志”。该表每小时都​​会加载新的日志数据。我想对过去 2 天的日志进行一些快速分析，所以我想将最近 48 小时的数据提取到我的关系数据库中。

为了解决上述问题，我创建了一个由 HIVE SQL 查询加载的临时配置表。将新数据加载到临时表后，我使用 sqoop Query 将新日志加载到关系数据库中。

问题是 sqoop 正在将数据加载到 BATCH 中的关系数据库中。因此，在任何特定时间，我只有特定小时的部分日志。

这会导致错误的分析输出。

问题：

1）。如何使这个 Sqoop 数据加载具有事务性，即要么导出所有记录，要么不导出任何记录。

2）。在 Hive 表 -> 暂存表 -> 关系表的整个过程中构建这个数据管道的最佳方法是什么。

技术细节：

Hadoop 版本 1.0.4
Hive- 0.9.0
Sqoop - 1.4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:28:59.233

您应该能够`sqoop`通过使用名为`--staging-table`. 它的作用基本上是充当用于暂存导出数据的辅助表。暂存数据最终在单个事务中移动到目标表。因此，通过这样做，您不应该遇到部分数据的一致性问题。

（来源：[Sqoop 文档](http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html#_syntax_3)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T18:47:19.347

Hive 和 Hadoop 是非常棒的技术，可以让您的分析在 MapReduce 任务中运行，通过利用多个节点非常快速地执行分析。

使用它对您有利。首先对 Hive 表进行分区。我猜您将所有日志存储在一个 Hive 表中。因此，当您运行查询并且您有一个

SQL .... WHERE LOG_DATA > '17/10/2013 00:00:00'

然后，您可以有效地查询到目前为止收集**的所有数据。**相反，如果您使用分区 - 假设您每天可以在查询中定义一个

其中 p_date=20131017 或 p_date=20131016

Hive 已分区，现在只知道读取这两个文件所以假设您每天有 10 GB 的日志 - 那么在一个体面的 Hadoop 集群中，一个 HIVE QUERY 应该在几秒钟内成功

# android - Android 2.2 上的 Cookie 在 WebView 中不可用

> ID：15000247
> 
> 赞同：0
> 
> 时间：2013-02-21T10:45:30.637
> 
> 标签：android, cookies, webview, cookiemanager

我制作了一个最低要求 API 8 的 Android 应用程序。用户在我的后端使用 cookie 进行身份验证。这适用于所有具有 api 级别 9 或更高级别的设备。Cookie 使用 CookieManager 保存：

```
CookieManager cManager = CookieManager.getInstance();
CookieSyncManager.createInstance(LauncherApplication.getAppContext());
cManager.setAcceptCookie(true);
cManager.setCookie(".xxxxxxxx.xx", "MobileGuid=" + guid);
CookieSyncManager.getInstance().sync(); 
```

我检查此 Cookie 是否也可用于 CookieManager：

```
public static boolean hasCookie(){
    CookieManager cManager = CookieManager.getInstance();
    String cookieString = cManager.getCookie(".xxxxxxx.xx");
    if(cookieString != null && cookieString.contains("MobileGuid")){
        return true;
    }
    return false;
} 
```

这总是返回 true，但如果 Android 版本高于 2.2，则 Cookie 仅在 WebView 中可用。（我用phpinfo检查了这个）

我的 WebView 配置如下所示：

```
String databasePath = LauncherApplication.getAppContext().getApplicationContext().getDir("database",
            Context.MODE_PRIVATE).getPath();

    WebSettings mainWebSettings = mainWebView.getSettings();
    mainWebSettings.setJavaScriptEnabled(true);
    mainWebSettings.setAppCacheEnabled(true);
    mainWebSettings.setDatabaseEnabled(true);
    mainWebSettings.setDomStorageEnabled(true);
    mainWebSettings.setDatabasePath(databasePath); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T17:18:46.253

当你调用 cManager.setCookie() 时，尝试传递

```
cManager.setCookie("a.xxxxxxxx.xx", "MobileGuid=" + guid + "; domain=xxxxxxx.xx"); 
```

所以我在第一个参数（字面意思是字符'a'）中添加了一个“a”，并添加`"domain=xxxxxxx.xx"`到 cookie 本身。

您编写的代码似乎都是正确的，而 API 9 设备不发送 cookie 而 API 14 设备发送了类似的问题。恐怕我不知道它为什么会起作用，但这是唯一对我有帮助的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T17:06:50.360

就像 Hylianpuffball 的答案一样，这个想法是在您的域名下方添加一个字符。我认为 CookieManager 正在寻找类似 .domain.com 的内容，并且完成了某种子字符串来获取域名。

只需添加一个点或任何字符，它就会起作用

# ios - 何时以及如何使子 UIViewController 无效

> ID：15000248
> 
> 赞同：1
> 
> 时间：2013-02-21T10:45:35.140
> 
> 标签：ios, objective-c, uiviewcontroller, childviewcontroller

我正在使用以下代码将子视图控制器添加到我的主视图控制器：

```
HPSPhotoLibraryOverlayController* controller = [[HPSPhotoLibraryOverlayController alloc] init];

[self.view addSubview:controller.view];

[self addChildViewController:controller];
[controller didMoveToParentViewController:self]; 
```

子视图控制器正在控制的视图包含一个按钮，当点击该按钮时，应从主视图控制器中删除子视图和子视图控制器。

按下按钮时运行的子视图控制器中的方法如下所示：

```
-(void)photoLibraryCloseButtonTapped:(id)sender
{
   [self.view removeFromSuperview];

   [(HPSFormController*)_parentController photoLibraryRequestingClose];
} 
```

然后主视图控制器中将关闭子视图控制器的方法如下所示：

```
-(void)photoLibraryRequestingClose
{
    UIViewController* controllerToRemove;
    for (UIViewController* controller in self.childViewControllers) {
        if ([controller isKindOfClass:[HPSPhotoLibraryOverlayController class]])
        {
            [controller removeFromParentViewController];
            controllerToRemove = controller;
        }

    }

    if (controllerToRemove)
    {
        controllerToRemove = nil;
    }

} 
```

这段代码一切正常。但是，在我看来，子视图控制器被设置为零，而子视图控制器的 -(void)photoLibraryCloseButtonTapped:(id)sender 方法仍在运行（即 -(void)photoLibraryRequestingClose 方法尚未返回，但是我正在取消调用 photoLibraryRequestingClose 的子视图控制器。

我正在使用 ARC。

为什么这行得通，我是否应该以不同的方式管理子视图控制器的删除，记住触发子控制器删除的按钮是由子视图控制器管理的。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:53:53.137

请查看 Apples View Controller Programming Guide about [Implementing a Custom Container View Controller](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW12)特别是清单 14-2：

```
- (void) hideContentController: (UIViewController*) content
{
   [content willMoveToParentViewController:nil];
   [content.view removeFromSuperview];
   [content removeFromParentViewController];
} 
```

回答您的问题，您应该像这样更改代码：

```
- (void)photoLibraryCloseButtonTapped:(id)sender
{
   [(HPSFormController*)_parentController photoLibraryControllerRequestingClose:self];
}

- (void)photoLibraryControllerRequestingClose:(UIViewController *)childController
{
   [childController willMoveToParentViewController:nil];
   [childController.view removeFromSuperview];
   [childController removeFromParentViewController];
} 
```

# forms - 如何以编程方式在 Dijit 对话框中制作和显示表单？

> ID：15000249
> 
> 赞同：9
> 
> 时间：2013-02-21T10:45:36.327
> 
> 标签：forms, dojo, dialog

我一直试图弄清楚如何使用 Dojo 1.7 在 Dialog 内创建和显示表单。

我希望我的对话框看起来像这样：

![在此处输入图像描述](../Images/3eb0c65c636fdc42af40ce350044cd16.png)

我见过的所有样本都使用标记，但没有使用 AMD

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-21T11:06:06.923

当您创建一个对话框时，您可以使用一个小部件（例如一个表单）作为内容。因此，例如，您可以这样做：

```
require([
    "dijit/Dialog", 
    "dijit/form/Form", 
    "dijit/form/TextBox", 
    "dijit/form/Button", 
    "dojo/domReady!" 
], function(Dialog, Form, TextBox, Button) 
{
    var form = new Form();

    new TextBox({
        placeHolder: "Name"
    }).placeAt(form.containerNode);

    new Button({
      label: "OK"
    }).placeAt(form.containerNode);

    var dia = new Dialog({
        content: form,
        title: "Dialog with form",
        style: "width: 300px; height: 300px;"
    });
    form.startup();
    dia.show();
});//~require 
```

`require()`由道场提供。它加载依赖项（表单、对话框等），然后运行创建小部件的给定函数。但是，由于我们`domReady!`在依赖项中包含了，Dojo 确保 DOM 已完全加载并首先准备好。

因为我也有`dia.show()`那个功能，所以一旦打开页面，对话框就会真正显示出来。假设您想在单击页面上的某个按钮时显示对话框：

```
require([
    "dijit/Dialog", 
    "dijit/form/Form", 
    "dijit/form/TextBox", 
    "dijit/form/Button",
    "dojo/on",      // Added this!
    "dojo/domReady!" 
], function(Dialog, Form, TextBox, Button, onEvent) 
{
    // ... as above, we create the dialog and form when the page loads
    // but it remains hidden until we call dia.show() ...
    form.startup();
    // dia.show();  Commented out this!

    onEvent(document.getElementById("someButtonOnYourPage"), "click", 
        function()
        {
            dia.show();
        });
});//~require 
```

# ms-word - redactor.js 文字标记

> ID：15000250
> 
> 赞同：0
> 
> 时间：2013-02-21T10:45:42.243
> 
> 标签：ms-word, redactor

我将 redactor.js 实现为所见即所得的编辑器（随 Statamic CMS 一起安装）。我还激活了清理功能。但是当我检查所有的Word代码时，从word中粘贴东西时会保留大量的代码浪费。以为我们不再是90年代了。

有没有人也有这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T13:48:01.587

您可以使用回调函数`pasteBeforeCallback`：

```
function cleanWordPaste( in_word_text ) {
    var tmp = document.createElement("DIV");
    tmp.innerHTML = in_word_text;
    var newString = tmp.textContent||tmp.innerText;

    newString  = newString.replace(/\n\n/g, "<br />").replace(/.*<!--.*-->/g,"");

    for ( i=0; i<10; i++ ) {
        if ( newString.substr(0,6)=="<br />" ) { 
        newString = newString.replace("<br />", ""); 
    }

    return newString;
}

$('#redactor').redactor({
    pasteBeforeCallback: function(html)
    {
        return cleanWordPaste(html);
    }
}); 
```

# r - 使用时间在 ggplot2 中添加 vline

> ID：15000257
> 
> 赞同：2
> 
> 时间：2013-02-21T10:46:12.867
> 
> 标签：r, ggplot2

我在将垂直线添加到 gplot2 图形时遇到了一些问题。

下面列出了我的示例数据框。

```
set.seed(1234)
df <- data.frame(Date=seq(as.POSIXct("05:00", format="%H:%M"), 
                          as.POSIXct("23:00", format="%H:%M"), by="hours"))
df$Counts <- sample(19)
df <- df[-c(4,7,17,18),]

# generate the groups automatically and plot
idx <- c(1, diff(df$Date))
i2 <- c(1,which(idx != 1), nrow(df)+1)
df$grp <- rep(1:length(diff(i2)), diff(i2))
g <- ggplot(df, aes(x=Date, y=Counts)) + geom_line(aes(group = grp)) + 
  geom_point() 
```

似乎有很多关于堆栈溢出和网络的讨论，通常是关于在时间序列上使用 vlines。我已经尝试过纠正我的代码，但到目前为止我运气不佳。

例如，我想在 21 日下午 2 点画一条垂直线。

```
g1 <- g + geom_vline(xintercept=as.numeric(as.Date("2013-02-21 14:00:00"))) 
```

谁能告诉我如何让这个工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T10:48:38.240

您必须替换`as.Date()`为，`as.POSIXct()`因为您还需要时间而不仅仅是日期（函数`as.Date()`仅代表日期部分）。

```
g + geom_vline(xintercept=as.numeric(as.POSIXct("2013-02-21 14:00:00"))) 
```

通过查看这两种情况，您可以看到差异：

```
 as.Date("2013-02-21 14:00:00")
[1] "2013-02-21"

 as.POSIXct("2013-02-21 14:00:00")
[1] "2013-02-21 14:00:00 EET" 
```

# c++ - BOOST_FOREACH 与 for 循环

> ID：15000259
> 
> 赞同：19
> 
> 时间：2013-02-21T10:46:23.550
> 
> 标签：c++, boost, for-loop, boost-foreach

我想听听您关于`BOOST_FOREACH`.

我已经阅读了它，就性能而言，它并不是一个非常重的标题。

此外，它强制使用“break”和“continue”语句，因为您不能真正拥有由布尔值驱动的退出条件，而且我一直被告知应尽可能避免使用“break”和“continue”。

当然，优点是您不直接处理迭代器，这简化了迭代容器的任务。

你怎么看待这件事？

你认为如果使用它应该被系统地采用以保证项目中的同质性，还是只在某些情况下才推荐使用它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-21T10:51:12.490

我会说基于 C++ 范围的循环取代了它。这相当于[这个 BOOST_FOREACH 示例](http://www.boost.org/doc/libs/1_53_0/doc/html/foreach.html)：

```
std::string hello( "Hello, world!" );
for (auto c : hello)
{
  std::cout << c;
} 
```

我从来没有发现我需要在 ++03 中使用它。

**请注意**，在复制元素昂贵的容器上或在通用上下文中使用基于范围的循环时，最好使用`const&`这些元素：

```
SomeContainerType<SomeType> v = ....;
for (const auto& elem : v)
{
  std::cout << elem << " ";
} 
```

同样，如果您需要修改容器的元素，则使用非常量 & ( `auto& elem : v`)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-21T10:54:40.310

In programming, clarity is trump. I've always used boost foreach in C++03, found it much more readable than the hand-written loop, the header size won't kill you. As @juanchopanza rightly noted, of course, this question is obsolete in C++11.

Your concerns with break and continue are unfounded and probably counterproductive. With the traditionally long for-loop headers of C++03, people tend to *not* read the loop header and to overlook any condition variables that hide in the loop header. Better make your intent explicit with break and continue.

If you have decided to use boost foreach, use it systematically. It is supposed to be used to replace the bread-and-butter loops, after all.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-27T18:54:02.700

我刚刚用一个简单的 for 循环替换了 BOOST_FOREACH 的使用，并获得了 50% 的加速，所以我会说它绝对不是最好的使用方法。您也不会得到有时您实际需要的循环计数器（例如“i”）。就我个人而言，我不是 YMMV 的粉丝，如果它更适合你的风格的话。

顺便说一句 - “沉重的标题”不会​​影响程序的性能，只会影响编译时间。

# asp.net - 通过 asp.net 应用程序启用 process.start 需要哪些权限？

> ID：15000265
> 
> 赞同：3
> 
> 时间：2013-02-21T10:46:51.757
> 
> 标签：asp.net, permissions, process.start

我有一个 asp.net 应用程序，它使用 process.start 来调用可执行文件（Graphviz）。在我的开发环境中一切正常，但是当我进入生产环境时，我无法让该过程运行。这是详细信息。

我创建了这个简单的子来显示问题。

```
 Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

    Dim ProcessInfo As ProcessStartInfo
    ProcessInfo = New ProcessStartInfo

    'ProcessInfo.Domain = "xxxxxxx"
    ProcessInfo.UserName = "xxxxxx"
    Dim PwdString As String = "xxxxxxx"
    Dim newPass As System.Security.SecureString
    newPass = New System.Security.SecureString
    For Each c As Char In PwdString
        newPass.AppendChar(c)
    Next c
    ProcessInfo.Password = newPass

    'ProcessInfo.FileName = """C:\Windows\System32\Notepad.exe"""
    'ProcessInfo.FileName = """C:\Test.bat"""
    ProcessInfo.FileName = """C:\Program Files (x86)\Graphviz2.30\bin\dot.exe"""
    ProcessInfo.Arguments = " -Kdot -Tsvg C:\Test.dot -pC:\Test.svg"
    ProcessInfo.RedirectStandardOutput = True
    ProcessInfo.UseShellExecute = False
    ProcessInfo.CreateNoWindow = True

    Dim Process As Process
    Process = New Process
    Process.StartInfo = ProcessInfo
    Process.Start()

    'Wait until the process passes back an exit code 
    Process.WaitForExit()

    Try
        Dim ProcessResults As String = Process.StandardOutput.ReadToEnd
        Output.Text = ProcessResults
    Catch ex As Exception
        Output.Text = ex.ToString
    End Try

End Sub 
```

这里有三种情况。首先，我正在测试只是启动记事本。- 开发工作 - 生产工作（这是我可以在生产中工作的唯一案例）

其次，我创建了一个简单的批处理文件，可以在记事本中打开一个文档。（记事本 c:\test.dot）

*   开发工作
*   生产不工作

第三，我正在调用 Graphviz 的 dot.exe。这就是我试图在另一个页面上工作的内容。

*   开发工作
*   生产不工作

在生产不起作用的所有情况下，我都可以重现此行为 - 如果我将 impersonate = true 添加到我的 web.config，那么我不会收到任何错误。页面就像成功一样运行。

*   如果我不添加模拟配置，而是将凭据添加到 ProcessInfo 对象，那么页面将再次运行而不会出现错误。但是，该过程并未在生产中开始。

*   如果我不添加模拟或 ProcessInfo 凭据，则会收到错误消息。这是错误输出。

> 访问被拒绝
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
Exception Details: System.ComponentModel.Win32Exception: Access is
denied

Source Error:    
Line 36:         Process = New Process
Line 37:         Process.StartInfo = ProcessInfo
Line 38:         Process.Start()
Line 39:
Line 40:         'Wait until the process passes back an exit code

Source File:  C:\Inetpub\vhosts\leapfrogbi.com\httpdocs\test\ProcessStart.aspx.vb Line:  38 

Stack Trace:    
[Win32Exception (0x80004005): Access is denied]   
System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo) +2161
System.Diagnostics.Process.Start() +150   
Test_ProcessStart.Page_Load(Object sender, EventArgs e) in C:\Inetpub\vhosts\leapfrogbi.com\httpdocs\test\ProcessStart.aspx.vb:38
System.Web.UI.Control.OnLoad(EventArgs e) +91   
System.Web.UI.Control.LoadRecursive() +74   
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

我尝试了各种与安全相关的设置。目前，我的应用程序池以本地管理员身份运行。我还尝试将每个人都添加到管理员组中，以查看安全性是否是根本问题。

另外，我正在使用 Plesk 来管理我的域。我已经广泛搜索了可能会影响这种情况的任何选项，但尚未找到。同样，当简单地调用启动记事本时，进程启动确实在生产中起作用。如果没有更详细的日志，很难缩小范围。

提前感谢您提供的任何帮助。这让我发疯了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:54:12.730

找到运行站点的池，并查看正在运行的用户。

如果您不能这样做，您可以运行此代码来查看您的池正在运行的用户：

```
var user = System.Security.Principal.WindowsIdentity.GetCurrent().User;
var userName = user.Translate(typeof(System.Security.Principal.NTAccount)); 
```

**然后授予该用户运行这些文件的权限**。

参考：[如何找出我的 ASP.NET 代码在哪个帐户下运行？](https://stackoverflow.com/questions/275824/how-to-find-out-which-account-my-asp-net-code-is-running-under)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T03:04:04.773

我不使用进程，使用 shell 并且它运行成功。

1.  创建一个包含您的命令的批处理文件。不要将批处理保存在系统文件夹中。

2.  在 IIS 中，打开运行网站的应用程序池的设置对话框。将进程池的 ID 设置为“localsystem”。

3.  使用 shell("path\batchfile") 执行批处理文件。

# c# - 带有 InterSystems Caché ODBMS 后端的 MVC

> ID：15000267
> 
> 赞同：1
> 
> 时间：2013-02-21T10:47:00.107
> 
> 标签：c#, asp.net-mvc-4, intersystems-cache

我一直在研究使用 MVC C# 前端到 Caché 数据库后端。环顾了一段时间后，我无法找到将两者连接在一起的有效方法（通过 .edmx 模型生成）。我知道我需要 Visual Studio 2012 的数据库驱动程序来执行此操作，但我不知道在哪里可以找到它。

我一直在使用 MVC 技术开发一些应用程序，并希望继续效仿，而不是诉诸于使用基于 .csp 的技术。

希望有人可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:58:45.787

查看 .NET文档的**缓存托管提供程序：**

[http://docs.intersystems.com/cache20121/csp/docbook/DocBook.UI.Page.cls?KEY=GBMP](http://docs.intersystems.com/cache20121/csp/docbook/DocBook.UI.Page.cls?KEY=GBMP)

托管提供程序功能特别允许您从 .NET 程序中访问缓存数据。它不会像使用 .NET 实体框架来进行数据访问那样好，而且你必须对 InterSystems 的代码示例持保留态度，因为它们非常简单，但这应该是你的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-16T09:27:29.707

您可以使用像 Entity Framework 或 NHibernate 这样的 ORM 框架来访问 Intersystems Cache，以便可以在数据层中很好地分离数据库。我设法使 NHibernate 与 Intersystems Cache 一起工作。如果您有兴趣，请看[这里。](https://gaogang.wordpress.com/2014/10/16/using-nhibernate-with-intersystems-cache-database/)

# sas - 以数字格式读取 sas xpt 文件的问题

> ID：15000269
> 
> 赞同：0
> 
> 时间：2013-02-21T10:47:09.437
> 
> 标签：sas

我们读取 SAS xpt 文件以在 .net 中加载数据。一切正常，但最近我们遇到了一个问题，客户将日期作为数值存储在列中，并在文件标题中提供了格式。SAS 查看器可以使用给定的格式正确显示该数据，但我们必须在我们的程序中将这些数据加载到 .net 中，并且我们不需要 SAS。

我最近发现您可以将 SaS LocalProvider 与 OLEDB 一起使用，但事实证明它不支持数字格式。所以我们最终会在列中得到错误的数据，其中数据存储为具有为其提供格式的数值。

任何人都可以通过一些代码示例帮助我理解和解决问题。我在 .Net 中四处寻找代码示例，但到目前为止还没有解决这个问题。

提前致谢。

问候，

纳西尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:00:46.733

SAS 日期值存储为自 1960 年 1 月 1 日以来的天数。

```
122
123  data _null_;
124  x=today();
125  put x=;
126  run;

x=19410 
```

例如，今天（2013 年 2 月 21 日）是自 1960 年 1 月 1 日以来的 19410 天。假设您知道您自己的软件的日期格式（可能是自某个其他日期以来的某些天数），您可以自行执行转换。

如果相关，SAS 日期时间值是 # of seconds since 1/1/1960 00:00:00 。

```
128  data _null_;
129  x=datetime();
130  put x=;
131  run;

x=1677052885.5
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds 
```

同样，这是截至 2013 年 2 月 21 日 08:00 的时间。

# iphone - connectionDidFinishLoading 后收到的 NSURLConnection 数据

> ID：15000271
> 
> 赞同：0
> 
> 时间：2013-02-21T10:47:15.803
> 
> 标签：iphone, ios, objective-c, nsurlconnection, nsurlconnectiondelegate

我有一个关于 NSURLConnection 的问题：我想下载一张图片：

```
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:urlRequest delegate:self]; 
```

（正确）调用的第一个代表是

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

在这被调用一次之后：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

并立即：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

到这里为止一切都是正确的，但是在再次触发 connectionDidFinishLoading 后，同一连接的 didReceiveData 委托，我通过以下方式识别连接：

```
NSString * connectionKey = [[[connection originalRequest] URL] absoluteString]; 
```

这可能吗？

更新，更多信息：

我的应用程序触发了许多同时连接，并且我将任何连接的信息存储在字典中，当调用委托时，我使用密钥检索连接信息： NSString * connectionKey = [[[connection originalRequest] URL] absoluteString]; 对于 99% 的连接，一切都很好，但对于一个（每次都一样！）连接我有这种行为

* * *

这里是完整的实现：

```
 - (void)downloadFileFromUrl:(NSURL *)url
                     inPath:(NSString *)completeFilePath
          dataReceivedBlock:(void (^)(long long byteDownloaded ,long long totalByte))dataReceivedBlock
                   endBlock:(void (^)(NSString * downloadPath, NSDictionary * responseHeaders))endBlock
                  failBlock:(void (^)(NSString * downloadPath, NSDictionary * responseHeaders, NSError * error))failBlock
{
    //save the connection infos       
NSMutableDictionary * requestData = [[NSMutableDictionary alloc] init];
if(dataReceivedBlock)
[requestData setObject:[dataReceivedBlock copy] forKey:@"dataReceivedBlock"];
if(endBlock)
[requestData setObject:[endBlock copy] forKey:@"endBlock"];
if(failBlock)
[requestData setObject:[failBlock copy] forKey:@"failBlock"];

        [requestData setObject:[NSNumber numberWithBool:YES] forKey:@"usingBlock"];
        [requestData setObject: completeFilePath forKey:@"downloadDestinationPath"];

    //delete the file if already on fs
    if([[NSFileManager defaultManager] fileExistsAtPath: completeFilePath])
        [[NSFileManager defaultManager] removeItemAtPath:completeFilePath error:nil];

    // Create the request.
    NSURLRequest * urlRequest = [NSURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageAllowed timeoutInterval:TIME_OUT];
    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
    if (!theConnection)
    {
        // Inform the user that the connection failed.
        failBlock(completeFilePath,nil,[NSError errorWithDomain:@"Connection fail" code:0 userInfo:nil]);
    }

    //add connection infos to the requests dictionary
    NSString * connectionKey = [[[theConnection originalRequest] URL] absoluteString];
    [self.requests setObject:requestData forKey:connectionKey];
} 
```

这是一个委托示例：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection

{

NSString * connectionKey = [[[connection originalRequest] URL] absoluteString];
NSMutableDictionary * requestData = [self.requests objectForKey:connectionKey];
NSFileHandle *file = [requestData objectForKey:@"fileHandle"];
[file closeFile];

//se la richiesta usa o no block
BOOL usingBlock = [[requestData objectForKey:@"usingBlock"] boolValue];
if(usingBlock)
{
    __block void (^endBlock)(NSString * , NSDictionary *) = [requestData objectForKey:@"endBlock"];
    if(endBlock)
        endBlock([requestData objectForKey:@"downloadDestinationPath"],[requestData objectForKey:@"responseHeaders"]);
}
else
    [self.delegate downloadEnded:[requestData objectForKey:@"responseHeaders"]];

//elimino dati richiesta
[self.requests removeObjectForKey:[NSString stringWithFormat:@"%@",connectionKey]];

//Inibisco standby
[UIApplication sharedApplication].idleTimerDisabled = NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:04:18.803

不可能。它必须是不同的连接回调。

确保每个连接使用唯一的委托，或同一委托中的唯一交换机分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:09:40.103

显然解决方案非常简单 -_- 错误在连接密钥标识符中：

```
NSString * connectionKey = [[[connection originalRequest] URL] absoluteString]; 
```

我的假设是密钥是唯一的，但是如果我在同一个 url 为同一个文件进行 x 个并行下载，则假设是错误的；）

# silverlight - 是否可以在 wpf（Windows 手机）的 ui 线程上进行同步网络调用

> ID：15000274
> 
> 赞同：1
> 
> 时间：2013-02-21T10:47:24.727
> 
> 标签：silverlight, networking, httpwebrequest, windows-phone-8, webclient

是否可以在 WPF（Windows Phone 8）中的 UI 线程上进行同步网络调用。（我知道这是缺点，但我仍然需要这个功能来使它与一些移植的代码一起工作）尝试使用[autoresetevent](http://dotnet.dzone.com/news/adding-synchronous-methods)方法。由于死锁，它阻塞了 ui 线程并且应用程序永远挂起。

甚至尝试使用 webclient。UI线程仍然被阻塞并且应用程序永远挂起。

任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:57:09.187

This is a very bad idea - I've found that doing this by accident will actually lead to a complete deadlock of your UI. You need to use an asynchronous method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:39:35.080

来自异步网络操作的回调在 UI 线程上排队。如果您阻止线程等待它，回调将永远不会到达，因为它正在等待访问同一个线程。

不过，您确实有另一个选择……如果您已经移植了代码，那么您将不得不对其进行更改以支持异步操作。

# android - Android: linear layout issue

> ID：15000287
> 
> 赞同：1
> 
> 时间：2013-02-21T10:47:58.150
> 
> 标签：android, android-linearlayout

I am facing hardtime with linear layout, in my linear layout i have two images these images are in opposite ends, but when iam changing the screen orientation the cancel button is comming in the middle

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"          
            android:src="@drawable/askabud" />
        <ImageView
            android:id="@+id/fbcancel"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"         
            android:paddingLeft="200dp"
            android:src="@drawable/fbcancel" />
         <Spinner
            android:id="@+id/quesspinner"
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:drawSelectorOnTop="true"
            android:entries="@array/fblist"
            android:visibility="gone" />

 </LinearLayout> 
```

not sure where iam going wrong. Any help is appreciated.

here is my complete xml file

```
<?xml version="1.0" encoding="utf-8"?>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="#FFFFFF" >
        <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"          
            android:src="@drawable/askabud" />
        <ImageView
            android:id="@+id/fbcancel"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"         
            android:paddingLeft="200dp"
            android:src="@drawable/fbcancel" />
         <Spinner
            android:id="@+id/quesspinner"
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:drawSelectorOnTop="true"
            android:entries="@array/fblist"
            android:visibility="gone" />

 </LinearLayout>

        <View
            android:layout_width="wrap_content"
            android:layout_height="0.7dip"
            android:background="#3b5998" />

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="165dp"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/autodelete"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignRight="@+id/fbshare"
                android:src="@drawable/autodelete" />

            <Spinner
                android:id="@+id/spinner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/autodelete"
                android:layout_alignTop="@+id/autodelete" 
                android:visibility="gone"
                android:entries="@array/fblist" />

            <EditText
                android:id="@+id/fbedittext"
                android:layout_width="wrap_content"
                android:layout_height="135dp"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="16dp"
                android:layout_toLeftOf="@+id/fbshare"
                android:background="@drawable/roundcorners"
                android:ems="10"
                android:hint="@string/fbhint"
                android:windowSoftInputMode="stateHidden"
                android:textSize="14sp" />

            <ImageView
                android:id="@+id/fbshare"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignTop="@+id/fbedittext"
                android:layout_marginRight="15dp"
                android:layout_marginLeft="5dp"
                android:paddingRight="5dp"
                android:src="@drawable/newfb1" />

            <ImageView
                android:id="@+id/fbpeople"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/autodelete"
                android:layout_alignLeft="@+id/fbshare"
                android:layout_marginBottom="18dp"
                android:src="@drawable/people2" />

        </RelativeLayout>

        <TextView
            android:id="@+id/placeName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="gone"
            android:paddingTop="15dp"
            android:paddingLeft="10dp" 
            android:textColor="#000000"
            android:textStyle="bold"  />

        <TextView
            android:id="@+id/placeAddress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="gone"
            android:paddingTop="10dp"
            android:paddingLeft="10dp"
            android:textColor="#000000" 
            android:textStyle="bold" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:paddingTop="5dp"
            android:text="@string/fbtext"
            android:textColor="#000000"
            android:paddingLeft="10dp"
            android:paddingBottom="10dp" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:00:01.240

> but when iam changing the screen orientation the cancel button is comming in the middle

This is a little bit vague explanation of what is happening.

I'm guessing switching from landscape to portrait?

You aren't explaining how you want it to look and how it looks now. (In portrait and landscape). There don't seem to be an error, so if you want us to help you without us having to recreate all your code and strings and values.

Have you tried changing the paddingLeft of your cancelButton. It seems in portrait mode, it can be possible there isn't enough space to put those two imageviews next to each other, effectively pushing the other bottom and 200dp away from the left side.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:05:04.147

**Edit**:

Try this

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

  <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_gravity="left"    >
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"  
            android:src="@drawable/ic_launcher" />
        </LinearLayout>
        <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
         android:gravity="right"
         >
        <ImageView
            android:id="@+id/fbcancel"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"         
            android:src="@drawable/ic_launcher" />
        </LinearLayout>
         <Spinner
            android:id="@+id/quesspinner"
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:drawSelectorOnTop="true"
            android:visibility="gone" />

 </LinearLayout> 
```

## According to your requirement it will work...

Try to design separately for the land scape mode. You can do that by creating the file of same name in the directory res/layout-land. If you don't have a separate design for the Land scape than fix your Screen orientation to Potrait mode. You can do that in Activity level as well as in Application level. To set the fixed orientation use `android:screenOrientation="portrait"`

# css - 有没有办法在 SASS 样式表中组合和优化选择器？

> ID：15000290
> 
> 赞同：6
> 
> 时间：2013-02-21T10:48:00.607
> 
> 标签：css, sass, compass-sass

是否有任何好的做法或工具来合并相似的选择器和优化 SCSS 源？

例如有这个：

```
#left .menu 
{
     //Content a 
}

#left .menu span
{
     //Content b 
}

#left .menu 
{
     //Content c 
} 
```

变成这样：

```
#left .menu 
{
     //Content a
     //Content c 

     span
     {
          //Content b 
     }

} 
```

手动执行此操作很乏味，尤其是对于结构可能不那么明显的较大样式表。人们可以花更多的精力来编写更精简和更清洁的 SCSS，但它应该是一些整洁的 SCSS 工具，或者我是否缺少最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:18:15.693

我同意@cimmanon 对你的问题的评论，但如果你必须，试试[这个 css2sass 转换器](https://css2sass.herokuapp.com/)。

我给它的输入：

```
#left .menu 
{
     //Content a 
}

#left .menu span
{ 
     //Content b 
}

#left .menu 
{
     //Content c 
} 
```

输出：

```
#left .menu {
  //Content a
  span {
    //Content b

  }
  //Content c
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-17T11:11:53.223

[`sass-convert`](http://sass-lang.com/docs/yardoc/)应该满足您的需求：

$ sass-convert --to scss your-example.css

```
#left .menu {
  //Content a
  span {
    //Content b

 }
 //Content c
} 
```

# c# - 在 .net 和 c# 中动态调整图像大小

> ID：15000292
> 
> 赞同：2
> 
> 时间：2013-02-21T10:48:04.887
> 
> 标签：c#, .net, image, stream, image-resizing

我正在寻找一种方法来调整图像大小而不将它们保存在服务器上。我发现的方法包括控制器文件等。

有没有办法从流中获取图像，调整大小并将其添加到响应中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-30T14:39:42.057

查看[ImageResizer](http://imageresizing.net) - 它是专为此目的而设计的一套 NuGet 包。

它在丹麦经营 eBay、MSN Olympics 和其他一些大型网站。

动态图像处理可以安全有效地完成，但代码量不够。它[比看起来更棘手](http://www.nathanaeljones.com/blog/2009/20-image-resizing-pitfalls)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:35:17.250

我不推荐这个，但你可以做下一件事：

```
using (Image img = Image.FromStream(originalImage))
{
    using (Bitmap bitmap = new Bitmap(img, width, height))
    {
        bitmap.Save(outputStream, ImageFormat.Jpeg);
    }
} 
```

请注意，这可能会导致 OutOfMemoryException。

# cucumber - DatabaseCleaner 策略事务不起作用

> ID：15000297
> 
> 赞同：1
> 
> 时间：2013-02-21T10:48:37.963
> 
> 标签：cucumber, capybara, database-cleaner

在我的 env.rb 中

```
Before do
    DatabaseCleaner.strategy = :transaction
end 
```

还在我的 shared_steps.rb 中创建了一个钩子

```
Before('@database_cleaner_before') do
  DatabaseCleaner.start
end

After('@database_cleaner_after') do
    DatabaseCleaner.clean
end 
```

在我的功能文件中

```
@database_cleaner_after @database_cleaner_before
Scenario: I can sign up with a new valid "Email" and "Username"
      When I enter a new valid "Email"
      And I enter a new "Username"
      And I enter a "Password"
      And I click on the "Sign up" button
      Then I should see a message with word "Signed Up" and "Successfully" 
```

我正在使用宝石：

```
Capybara 2.0.2
cucumber 1.2.1
database_cleaner 0.9.1
selenium-webdriver 2.30.0
cucumber-rails 1.3.0
Rails 3.1.0 
```

在我的 database.rb 中

```
require 'active_record'
class ActiveRecord::Base
  mattr_accessor :shared_connection
  @@shared_connection = nil

  def self.connection
    @@shared_connection || retrieve_connection
  end
end
ActiveRecord::Base.shared_connection = ActiveRecord::Base.connection 
```

DatabaseCleaner.strategy = :trancation 工作正常（从数据库中删除所有记录）但 DatabaseCleaner.strategy = :transaction 没有回滚我的数据库记录，为什么？我错过了什么吗？

# linux - Make：找不到命令，但命令存在？

> ID：15000303
> 
> 赞同：1
> 
> 时间：2013-02-21T10:48:42.680
> 
> 标签：linux, path, makefile, slackware

所以我有一个使用`arm-eabi-none-xxx`命令的 make 文件，但是当我运行 make 时，出现“找不到命令”错误：

```
bash-4.2$ make
arm-none-eabi-as -I source/ source/mailbox.s -o build/mailbox.o
make: arm-none-eabi-as: Command not found
make: *** [build/mailbox.o] Error 127 
```

奇怪的是，该命令是否存在并且在我的路径中（以下与 makefile 位于同一目录中）：

```
bash-4.2$ arm-none-eabi-as --version
GNU assembler (Sourcery G++ Lite 2008q3-66) 2.18.50.20080215
This assembler was configured for a target of `arm-none-eabi'. 
```

我可以运行 make 正在运行的命令：

```
bash-4.2$ arm-none-eabi-as -I source/ source/mailbox.s -o build/mailbox.o
bash-4.2$ ls build/
README  mailbox.o 
```

所以。我读到如果`./`在当前路径中，make 使用 shell 来执行命令，所以我试过了，但没有用。最初我根本无法运行`arm-none-eabi-as`，因为它是 32 位二进制文​​件，并且我在 64 位系统（Slackware 14.0）上运行，[但我按照此处的说明安装了 32 位库](http://alien.slackbook.org/dokuwiki/doku.php?id=slackware%3amultilib)等。

所以问题是……我犯了什么愚蠢的小学生错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-24T15:34:00.027

您是以 sudo 还是 root 身份运行“make”的？在那种情况下，它对我不起作用。我必须做的是 mkdir 一个“build”文件夹，然后简单地运行“make”。有效。

# jsf-2 - a4j:commandLink 第一次不起作用

> ID：15000305
> 
> 赞同：0
> 
> 时间：2013-02-21T10:48:50.717
> 
> 标签：jsf-2, richfaces

我有一个丰富的：tabPanel，我可以在其中动态添加和删除选项卡

```
<rich:tabPanel id="tabsPanel" switchType="client"  activeItem="#{tabsBean.activeTab}"   itemChangeListener="#{tabsBean.tabChange()}" >  
    <c:forEach var="tab" items="#{tabsBean.tabs}" >
            <rich:tab name="#{tab.name}" onheaderclick="switchTab('#{tab.name}');" >
                    <f:facet name="header">
                         <h:panelGrid columns="2">
                             <h:outputText value="#{tab.name}" />
                                <h:graphicImage value="#{pathImmagini.pathImmagineElimina}" 
                                                style="width:12px; height:12px;" 
                                                onclick="myFunc('#{tab.name}'); Event.stop(event);"/>
                         </h:panelGrid>
                     </f:facet>
                    <h:form id="#{tab.name}" >
                                    <ui:include src="#{tab.pathComponent}" />
                            </h:form>
            </rich:tab>
    </c:forEach> 
 </rich:tabPanel> 
```

每个选项卡都有一个组件 *.xhtml (tab.pathComponent) ，在这些组件中，我有很多 a4j:commandlink 在第一次不起作用。

这是我的组件之一（tab.pathComponent）

```
<rich:toolbar height="30" >
    <a4j:commandLink action="#{tab.setNewObject('Nuovo Cliente')}"                         render="pannelloDatiCliente" execute="@this"  >
        <h:graphicImage value="#{pathImmagini.pathImmagineAggiungiSoggetto}"/>
    </a4j:commandLink>                      
</rich:toolbar> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:31:51.310

您能否提供有关您的 xhtml 的更多信息。通常由于页面或 UI 的部分渲染而发生第二次点击问题。仅用这部分代码无法说明问题。

# python - 强制使用python exe启动python脚本来解析参数

> ID：15000311
> 
> 赞同：2
> 
> 时间：2013-02-21T10:49:14.313
> 
> 标签：python

我无法启动 python 脚本并获取我发送到脚本的参数。

![在此处输入图像描述](../Images/d5673719987d37065fe2794f72fa124e.png)

如您所见，如果我使用 python 命令启动以下测试脚本，它可以工作，如果不是，那么不会将任何参数传递给脚本：/

```
import optparse
import sys

oOptParse = optparse.OptionParser()

oOptParse.add_option("--arg", dest="arg", help="Test param")
oOptParse.set_default("arg", None)

if len(sys.argv) == 1:
    oOptParse.print_help( )
    sys.exit( 1 )
aOptions = oOptParse.parse_args( )
oOptions =  aOptions[0]

print (oOptions.arg) 
```

你知道可能是什么问题吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:57:23.950

将shebang放在python文件的开头：

```
#!/usr/bin/env python 
```

通过以下方式使文件可执行：

```
chmod +x test.py 
```

然后输入：

```
./test.py --arg hello 
```

在 Windows 系统下，您可以在 Cygwin 下进行上述操作，或者通过以下方式将扩展名 .py 关联到 Python：

```
C:\> assoc .py=Python.File
C:\> ftype Python.File=C:\Path\to\python.exe "%1" %* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:12:32.487

找到了我的答案。

这是注册表设置的问题，以下键

```
HKEY_CLASSES_ROOT\py_auto_file\shell\open\command 
```

被设置为

```
"C:\Python26\python.exe" "%1" 
```

但应该是

```
"C:\Python26\python.exe" "%1" %* 
```

# javascript - 以灰度呈现html页面

> ID：15000313
> 
> 赞同：1
> 
> 时间：2013-02-21T10:49:26.730
> 
> 标签：javascript, grayscale

我正在寻找让我的页面以灰度显示的最简单方法。

我找到了插件（[http://james.padolsey.com/demos/grayscale/](http://james.padolsey.com/demos/grayscale/)），但它有一些缺点，例如。它不能很好地处理背景图像。

您知道此工具的任何替代方案或更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:57:41.910

您可以尝试使用过滤器：http: [//www.html5rocks.com/en/tutorials/filters/understanding-css/](http://www.html5rocks.com/en/tutorials/filters/understanding-css/)

但这可能不适用于所有浏览器，当然不适用于旧浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:57:50.700

如果你想要一个跨浏览器的解决方案，你可能不得不依赖 javascript

这是[我得到的一些解决方案，作为对我的一个问题的回答](https://stackoverflow.com/a/12685978/1223744)：

*   [灰度.js](http://james.padolsey.com/demos/grayscale/)
*   [jQuery GreyScale 插件](https://github.com/Prydie/jQuery-GreyScale-Plugin)
*   [悬浮液](http://www.iliasiovis.com/hoverizr/)
*   [用画布做（教程）](http://www.ajaxblender.com/howto-convert-image-to-grayscale-using-javascript.html)

我使用了*Grayscale.js*，它对我来说没问题，但你可以尝试其他三个。

# android - 将文件从 web 服务下载到 android 设备上的特定位置

> ID：15000316
> 
> 赞同：1
> 
> 时间：2013-02-21T10:49:47.093
> 
> 标签：android

IDE Eclipse 使用模拟器

我正在从网络服务下载文件。我没有问题将文件保存到 SD 卡。然后可以通过文件管理器访问它。

但是，如果没有可用的 SD 卡，我想将文件保存到内部存储上的“下载”。我似乎无法将文件下载到“下载”，就像您从浏览器下载一样。

但是，我可以设法将文件保存在内部存储的应用程序目录中。例如数据/数据/com.example.appname/files/。

问题是这只能通过应用程序访问。

我需要文件可供用户在下载后查看/打开。

这可能吗？或者用户是否必须拥有 SDCARD？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:54:44.460

这也取决于设备+提供商，有些被锁定，所以人们根本无法访问他们的内部存储。

因此，如果您想迎合没有 SD 卡的人，请保存在应用程序目录中。如果他们没有 root 访问权限，他们将无法访问。你对此无能为力。

这是很正常的行为。

最佳做法是警告用户他们的选择：保存在 SD 卡或内部存储上。如果你愿意，还可以提及后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:29:12.323

找到下载文件夹使用：

[http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String)](http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String))

```
File downloadFolder = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS); 
```

但就像其他人提到的那样，如果 SD 卡不存在，那么您无能为力，只需向用户发出警告即可。

在我发布的链接上有关于如何检查目录是否存在以及它的可用性的很好的例子。

# jquery - Html/Css 在一个 div 中垂直居中一个 div

> ID：15000317
> 
> 赞同：0
> 
> 时间：2013-02-21T10:49:50.990
> 
> 标签：jquery, html, css, alignment

大家好，这是我的问题：

我有一个 html/css 网站，我有几个父子 div。我需要制作一个脚本（Jquery？）来查找父级和子级 div 的高度，并添加必要的 css 以使子级在父级中居中...

```
<div class="parent">
 <div class="child">
 </div>
</div>
.....
<div class="parent">
 <div class="child">
 </div>
</div>
....
<div class="parent">
 <div class="child">
 </div>
</div>

<SCRIPT>
???
</SCRIPT> 
```

谢谢大家...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:00:04.313

使用 jQuery：

`**[LIVE DEMO](http://jsbin.com/ujobaw/8/edit)**`

```
$('.parent').each(function(){

  var $pa = $(this);
  var $ch = $pa.find('.child');
  var paH = $pa.innerHeight();
  var chH = $ch.innerHeight();

  $ch.css({marginTop: (paH-chH)/2});

}); 
```

如果您的内部有图像，`.child`我建议您为该图像分配一个`height=""`属性，或者将 JS 放在一个函数中并调用它`$(window).load(function(){ /*here*/ });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:56:14.290

如果我理解 ui 认为你可以用这个 css 做到这一点：

```
.parent {
  height: auto;
  overflow: hidden; /* This actually makes height auto */
  padding: 10px 0; /* exmaple of 10px up and down that will actully center it with some space IF space is needed*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:56:43.153

这里不需要使用 jQuery，您可以使用`overflow:auto`组合 with `margin`，如下面的链接所示。

**[工作小提琴](http://jsbin.com/axikuz/1/edit)**

```
.parent{overflow:auto;width:100px;height:100px;background-color:green;margin-bottom:10px;}
.child{width:50px;height:50px;background-color:blue;margin:25px;} 
```

您还可以在此处用百分比替换像素。

这也可以使用`float`or`display`属性而不是`overflow:auto`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:58:52.707

另一种方法是将`display`父 div 的属性设置为`table-cell`. 这是代码：

```
<div style="display:table-cell; height:200px; border:1px solid red; vertical-align:middle; align: center;">
    <div style="height:100px; border:1px solid blue;">The content</div>
</div> 
```

这就是它的样子：

[http://screencast.com/t/6kB9ec1uV](http://screencast.com/t/6kB9ec1uV)

您不需要脚本，除非您除了将子 div 居中之外还想做其他事情。祝你有美好的一天 ！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T11:08:58.070

你可以试试这个 jQuery 代码：

```
$(document).ready(function () {
  var childHeight  = $('.child').css('margin-top', function() {
    var childHeight = $(this).height();
    var parentHeight = $(this).parent().height();
    return ((parentHeight - childHeight) / 2);
  });
}); 
```

基本上，在加载文档后，您检索所有具有*子*类和相对父
类的 DOM 元素的高度， 您需要它来计算子 obj 的**margin-top**值。

# c++ - ATL Dialog WindowProc 期间的 NULL 指针

> ID：15000318
> 
> 赞同：1
> 
> 时间：2013-02-21T10:49:56.470
> 
> 标签：c++, windows, atl

我不熟悉 ATL/Win32 UI 编程，我正在尝试修复关闭 ATL 对话框时发生的访问冲突。

主窗口有以下消息映射：

```
 BEGIN_MSG_MAP(CMyWindow)
        MESSAGE_HANDLER(WM_CLOSE, OnClose)
        MESSAGE_HANDLER(WM_DESTROY, OnDestroy)
        COMMAND_ID_HANDLER(ID_POPUP_EXIT, OnExit)
        COMMAND_ID_HANDLER(ID_POPUP_LOGON, OnLogon)
        COMMAND_ID_HANDLER(ID_POPUP_LOGOFF, OnLogoff)
        COMMAND_ID_HANDLER(ID_POPUP_HELP, OnHelp)
        COMMAND_ID_HANDLER(ID_POPUP_ABOUT, OnAbout)     
        COMMAND_ID_HANDLER(ID_POPUP_DATANETSETTINGS, OnConfigure)
        COMMAND_ID_HANDLER(ID_POPUP_TRANSFERSTATUS, OnTransferStatus)
        // etc... 
```

OnTransferStatus 启动一个模态对话框：

```
LRESULT OnTransferStatus(WORD /*wNotifyCode*/, WORD wID, HWND /*hWndCtl*/, BOOL& /*bHandled*/)
{
    HWND hc;
    hc = FindWindow(NULL, L"MyApp Transfer Status");
    if(hc)
    {
        ::ShowWindow(hc, SW_RESTORE);
        ::SetForegroundWindow(hc);
    }
    else
    {
        CStatusPopup dlg; 
        dlg.DoModal(); // <-- Here 
```

这`CStatusPopup`只是其中之一：`class CStatusPopup : public CAxDialogImpl<CStatusPopup>{...}`

当我关闭 StatusPopup 窗口时，我最终出现在弹出窗口消息映射中，并且此函数运行：

```
LRESULT OnClose(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled) 
{
    EndDialog(IDCANCEL);
    return 0;
} 
```

EndDialog 应该干净地关闭对话窗口。但是，我似乎将 NULL hwnd 传递给对话框的 WindowProc。这发生在阻塞 DoModal 调用下的 ATL/Win32 代码深处。谁能建议我如何调试通过 NULL hwnd 的消息来自何处？

崩溃在这里：

```
00000000`001de6f0 00000000`7741c3c1 : 00000000`00000000 00000000`00000000 00000000`0081d1d0 00000000`00000001 : MyApp_Tray!ATL::CWindowImplBaseT<WTL::CEditT<ATL::CWindow>,ATL::CWinTraits<1442840576,0> >::WindowProc+0x81 [c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlwin.h @ 3503]
00000000`001de790 00000000`7741a01b : 00000000`00000000 00000000`00330d20 00000000`00000000 00000000`00000000 : user32!UserCallWinProcCheckWow+0x1ad
00000000`001de850 00000000`7741a061 : 00000000`00000014 00000000`77412094 00000000`0081d1f8 0000002c`00000001 : user32!DispatchClientMessage+0xc3
00000000`001de8b0 00000000`776af5e5 : 00000000`00000000 00000000`00000000 00000000`776836a8 00000000`00000001 : user32!_fnDWORD+0x2d
00000000`001de910 00000000`7740f5ba : 00000000`7742762b 00000000`000202cc 00000000`0081d1d0 00000000`00000001 : ntdll!KiUserCallbackDispatcherContinue (TrapFrame @ 00000000`001de7d8)
00000000`001de998 00000000`7742762b : 00000000`000202cc 00000000`0081d1d0 00000000`00000001 00000000`00000001 : user32!ZwUserDestroyWindow+0xa
00000000`001de9a0 00000000`774274a5 : 00000000`000202cc 00000001`3f99b800 00000000`00000001 00000000`000202cc : user32!DialogBox2+0x2ec
00000000`001dea30 00000000`7742751a : 00000001`3fce5f00 00000000`000202cc 00000001`3f99b800 00000001`3f99b800 : user32!InternalDialogBox+0x135
00000000`001dea90 00000000`77427558 : 00000000`00000000 00000001`3f980000 00000001`3fce5f00 00000000`000202cc : user32!DialogBoxIndirectParamAorW+0x58
00000000`001dead0 00000001`3f9a3d0b : 00000000`00000004 00000000`00000070 ffffffff`ffffffff 00000000`001dec30 : user32!DialogBoxIndirectParamW+0x18
00000000`001deb10 00000001`3f99aca2 : 00000000`00008026 00000000`001dec20 00000000`001dec90 00000000`00008026 : MyApp_Tray!ATL::AtlAxDialogCreateT<wchar_t const * __ptr64,ATL::_AtlDialogBoxIndirectParamHelper,&DialogBoxIndirectParamW>+0xbb [c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlhost.h @ 2714]
00000000`001deb60 00000001`3f995b03 : 00000000`00000000 00000000`001df270 00000000`001dec90 00000000`001df270 : MyApp_Tray!ATL::CAxDialogImpl<CStatusPopup,ATL::CWindow>::DoModal+0x82 [c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlwin.h @ 4055]
00000000`001deb90 00000001`3f9ade73 : 00000000`00000000 00000000`001df270 00000000`001df168 000007ff`fffdd000 : MyApp_Tray!CDataNetWindow::ProcessWindowMessage+0x293 [d:\buildroot\26\datanow\datanow_features_fr1\sources\orca\datanet_tray\mainwnd.h @ 40]
00000000`001df000 00000000`7741c3c1 : 00000000`00000000 00000000`00000000 00000000`001df2e0 00000000`00000001 : MyApp_Tray!ATL::CWindowImplBaseT<WTL::CEditT<ATL::CWindow>,ATL::CWinTraits<1442840576,0> >::WindowProc+0x83 [c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\atlwin.h @ 3508]
00000000`001df0a0 00000000`7741c60a : 00000000`001df2d0 00000000`00330fe0 00000000`01dae740 00000000`0083bf10 : user32!UserCallWinProcCheckWow+0x1ad
00000000`001df160 00000001`3f998236 : 00000001`3f9bada0 00000001`3f9bada0 00000000`00330fe0 00000000`00000000 : user32!DispatchMessageWorker+0x3b5
00000000`001df1e0 00000001`3f9b22b6 : 00000000`00000001 00000000`00000000 00000000`00000000 00000000`776fdffa : MyApp_Tray!wWinMain+0x886 [d:\buildroot\26\datanow\datanow_features_fr1\sources\orca\datanet_tray\tray.cpp @ 356]
00000000`001df8b0 00000000`76f9f34d : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : MyApp_Tray!__tmainCRTStartup+0x166 [f:\dd\vctools\crt_bld\self_64_amd64\crt\src\crtexe.c @ 547]
00000000`001df960 00000000`77692ca1 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : kernel32!BaseThreadInitThunk+0xd
00000000`001df990 00000000`00000000 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!RtlUserThreadStart+0x1d 
```

这是因为在此 ATL 代码中 hwnd 为 NULL 引起的：

```
template <class TBase, class TWinTraits>
LRESULT CALLBACK CWindowImplBaseT< TBase, TWinTraits >::WindowProc(
    _In_ HWND hWnd,
    _In_ UINT uMsg,
    _In_ WPARAM wParam,
    _In_ LPARAM lParam)
{
    CWindowImplBaseT< TBase, TWinTraits >* pThis = (CWindowImplBaseT< TBase, TWinTraits >*)hWnd;
    // set a ptr to this message and save the old value
    _ATL_MSG msg(pThis->m_hWnd, uMsg, wParam, lParam);
    const _ATL_MSG* pOldMsg = pThis->m_pCurrentMsg;
    pThis->m_pCurrentMsg = &msg;
    // pass to the message map to process
    LRESULT lRes = 0;
    BOOL bRet = pThis->ProcessWindowMessage(pThis->m_hWnd, uMsg, wParam, lParam, lRes, 0); 
```

# c# - OnActionExecuting 导致处理会话超时的无限重定向

> ID：15000322
> 
> 赞同：2
> 
> 时间：2013-02-21T10:50:08.810
> 
> 标签：c#, asp.net, asp.net-mvc-3

如果用户会话超时，我正在尝试在我的 BaseController 中使用 OnActionExecuting 来处理重定向到登录屏幕。但是，即使在我登录之前，它也会导致无限重定向-任何人都可以建议如何解决这个问题吗？

所以在我的基本控制器中，我有以下内容：

```
 protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (SessionManager.Instance().GetUser() == null) 
        {
            filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary {
                    { "Controller", "Home" },
                    { "Action", "LogOn" }
            });
        }

        base.OnActionExecuting(filterContext);
    } 
```

所以基本上我有一个可以获取/设置用户等的会话管理器类 - 我知道问题在于 GetUser 也将为空，因为它仅在验证 LogOn 后使用我的 SetUser 方法设置。

但不是让我的其他控制器中的每个方法都进行如下检查：

```
public ActionResult SomeOtherMethod()
{
     if(SessionManager.Instance().GetUser() != null)
     {

             //Go Do Useful View stuff

     }
     else
     {
          //Redirect To Logon
     }

} 
```

我想在基本控制器中使用 OnActionExcuting。但是因为它在 LogOn 页面上运行（因为它应该）我得到无限重定向，因为 GetUser 将始终为空？

有没有更好的方法来做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:15:44.593

也许你可以尝试这样的事情：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    string controllerName = filterContext.Controller.GetType().Name;
    string actionName = filterContext.ActionDescriptor.ActionName;

    if (SessionManager.Instance().GetUser() == null ) 
    {
        if(!controllerName.Equals(typeof(HomeController).Name,StringComparison.InvariantCultureIgnoreCase)
        || !actionName .Equals("LogOn",StringComparison.InvariantCultureIgnoreCase)))
        filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary {
                { "Controller", "Home" },
                { "Action", "LogOn" }
        });
    }

    base.OnActionExecuting(filterContext);
} 
```

# ios - 从 Flickr/Facebook 注销 - iOS

> ID：15000326
> 
> 赞同：0
> 
> 时间：2013-02-21T10:50:23.403
> 
> 标签：ios, social-networking

我登录这些社交网站不是使用 safari，而是使用`UIWebView`应用程序内部。但是一旦登录，我就无法将它们注销。（尝试使用 fb SDK 和 ObjectiveFlickr，但他们的注销方法也无济于事。）

我尝试删除“login.yahoo.com”和“facebook.com”的 cookie，但没有帮助。我希望出现登录屏幕，但不是那样，而是直接要求身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T10:03:47.900

来自`Facebook`：

```
//make access token nil here
//clear cache from webview
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies])
{
    NSString* domainName = [cookie domain];
    NSRange domainRange = [domainName rangeOfString:@"facebook"];
    if(domainRange.length > 0)
    {
        [storage deleteCookie:cookie];
    }
} 
```

来自`Flickr`：

```
//make access token nil here
//clear cache from webview
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies])
{
    NSString* domainName = [cookie domain];
    NSRange domainRange = [domainName rangeOfString:@"flickr"];
    if(domainRange.length > 0)
    {
        [storage deleteCookie:cookie];
    }
} 
```

# regex - 获取符合特定标准的值的平均值（模式匹配）

> ID：15000333
> 
> 赞同：0
> 
> 时间：2013-02-21T10:50:40.353
> 
> 标签：regex, r

我之前问过这个问题，得到的答复为我解决了这个问题。我有一个看起来像这样的数据框：

```
id                              weekdays              halflife
241732222300860000  Friday, Aug 31, 2012, 22    0.4166666667
241689170123309000  Friday, Aug 31, 2012, 19    0.3833333333
241686878137512000  Friday, Aug 31, 2012, 19    0.4
241651117396738000  Friday, Aug 31, 2012, 16    1.5666666667
241635163505820000  Friday, Aug 31, 2012, 15    0.95
241633401382265000  Friday, Aug 31, 2012, 15    2.3666666667 
```

我想获得周一创建的物品的平均半衰期，然后是周二......等等。（我的日期范围跨越 6 个月）。

要获取我使用的日期值`strptime`和`difftime`. 另外，我用 找到了最大半衰期，`max(df$halflife)`我怎样才能找到它对应的 id？

可重现的代码：

```
structure(list(id = c(241732222300860416, 241689170123309056, 
241686878137511936, 241651117396738048, 241635163505819648, 241633401382264832
), weekdays = c("Friday, Aug 31, 2012, 22", "Friday, Aug 31, 2012, 19", 
"Friday, Aug 31, 2012, 19", "Friday, Aug 31, 2012, 16", "Friday, Aug 31, 2012, 15", 
"Friday, Aug 31, 2012, 15"), halflife = structure(c(0.416666666666667, 
0.383333333333333, 0.4, 1.56666666666667, 0.95, 2.36666666666667
), class = "difftime", units = "mins")), .Names = c("id", 
"weekdays", "halflife"), row.names = c(NA, 6L), class = "data.frame") 
```

所以现在，我有一个平均半衰期值所有星期一，星期二......等。如何获得这些工作日内所有时间的平均值，即：所有星期一上午 9 点、上午 10 点、上午 11 点等创建的所有项目的平均半衰期。然后是周二上午 9 点、10 点、11 点……等等。weekdays 列中的日期经过格式化，以便逗号后的最后一个数字是它的创建时间。我对正则表达式和模式匹配真的很糟糕，这就是我问这个后续问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:21:18.243

使用基本软件包，您可以执行以下操作。

```
> mydf
            id                 weekdays       halflife
1 2.417322e+17 Friday, Aug 31, 2012, 22 0.4166667 mins
2 2.416892e+17 Friday, Aug 31, 2012, 19 0.3833333 mins
3 2.416869e+17 Friday, Aug 31, 2012, 19 0.4000000 mins
4 2.416511e+17 Friday, Aug 31, 2012, 16 1.5666667 mins
5 2.416352e+17 Friday, Aug 31, 2012, 15 0.9500000 mins
6 2.416334e+17 Friday, Aug 31, 2012, 15 2.3666667 mins 
```

我们可以不使用正则表达式，而是`strsplit`在 的每个元素上`weekdays`使用`unlist`结果，然后以 4 列格式返回，`matrix`然后`cbind`使用`mydf`.

```
> mydf2 <- cbind(mydf, matrix(unlist(sapply(mydf$weekdays, strsplit, split=',')), byrow=TRUE, ncol=4, dimnames=list(1:nrow(mydf), c('Weekday', 'Day', 'Year', 'Hour'))))
> mydf2
            id                 weekdays       halflife Weekday     Day  Year Hour
1 2.417322e+17 Friday, Aug 31, 2012, 22 0.4166667 mins  Friday  Aug 31  2012   22
2 2.416892e+17 Friday, Aug 31, 2012, 19 0.3833333 mins  Friday  Aug 31  2012   19
3 2.416869e+17 Friday, Aug 31, 2012, 19 0.4000000 mins  Friday  Aug 31  2012   19
4 2.416511e+17 Friday, Aug 31, 2012, 16 1.5666667 mins  Friday  Aug 31  2012   16
5 2.416352e+17 Friday, Aug 31, 2012, 15 0.9500000 mins  Friday  Aug 31  2012   15
6 2.416334e+17 Friday, Aug 31, 2012, 15 2.3666667 mins  Friday  Aug 31  2012   15 
```

现在我们已经适当地拆分了工作日列，我们可以使用`aggregate`函数来计算`mean`所需的分组列。

```
> aggregate(halflife ~ Weekday, data=mydf2, FUN = mean)
  Weekday  halflife
1  Friday 1.013889 
```

如果你想分组`Weekday`，`Hour`那么

```
> aggregate(halflife ~ Weekday + Hour, data=mydf2, FUN = mean)
  Weekday Hour   halflife
1  Friday   15 1.6583333 
2  Friday   16 1.5666667 
3  Friday   19 0.3916667 
4  Friday   22 0.4166667 
```

因此，`aggregate`这里函数的第一个参数是一个论坛对象，它支持一~一、一~多、多~一和多~多关系。查看`?aggregate`示例以了解如何使用它。

我将给出一个简单的例子来说明多对多的关系。

```
> set.seed(12345)
> mydf2 <- cbind(mydf2, newvar = rnorm(nrow(mydf2)))
> mydf2
            id                 weekdays       halflife Weekday     Day  Year Hour     newvar
1 2.417322e+17 Friday, Aug 31, 2012, 22 0.4166667 mins  Friday  Aug 31  2012   22  0.5855288
2 2.416892e+17 Friday, Aug 31, 2012, 19 0.3833333 mins  Friday  Aug 31  2012   19  0.7094660
3 2.416869e+17 Friday, Aug 31, 2012, 19 0.4000000 mins  Friday  Aug 31  2012   19 -0.1093033
4 2.416511e+17 Friday, Aug 31, 2012, 16 1.5666667 mins  Friday  Aug 31  2012   16 -0.4534972
5 2.416352e+17 Friday, Aug 31, 2012, 15 0.9500000 mins  Friday  Aug 31  2012   15  0.6058875
6 2.416334e+17 Friday, Aug 31, 2012, 15 2.3666667 mins  Friday  Aug 31  2012   15 -1.8179560
> aggregate(cbind(newvar,halflife) ~ Weekday + Hour, data=mydf2, FUN = mean)
  Weekday Hour     newvar  halflife
1  Friday   15 -0.6060343 1.6583333
2  Friday   16 -0.4534972 1.5666667
3  Friday   19  0.3000814 0.3916667
4  Friday   22  0.5855288 0.4166667 
```

# jaydata - 当顺序添加操作不起作用时的 Jaydata

> ID：15000334
> 
> 赞同：0
> 
> 时间：2013-02-21T10:50:50.373
> 
> 标签：jaydata

我正在使用 Jaydata 和它的 Indexeddbprovider，我在添加场景时遇到了问题。

当有多个添加时，只有第一个有效！

```
$data.Entity.extend("Person", {
   Id: { type: "int", key: true, computed: false },
   Task: { type: String, required: true, maxLength: 200 },
   DueDate: { type: Date },
   Completed: { type: Boolean },
   University: { type: "int"},
   Degree: { type: "int" }
 });

  $data.EntityContext.extend("ClientDatabase", {
        People: { type: $data.EntitySet, elementType: Person }
  });

  var db = new ClientDatabase({
        provider: 'indexedDb', databaseName: 'ClientDB', version: 1
  });

var newEntity = {
    Id: 1,
    Task: 'task1',
    DueDate: new Date(),
    Completed: false,
    University: 1,
    Degree: 1
};

 var newEntity2 = {
    Id: 4,
    Task: 'task4',
    DueDate: new Date(),
    Completed: false,
    University: 4
    Degree: 4
};

add(db, newEntity, entity1AddedSuccessfully);

function entity1AddedSuccessfully(){
  add(db, newEntity2);
}

function add(db, entity, callback){
    db.onReady({
        success: function () {
            db["_People"].add(entity);
            db.saveChanges(function () {
                if (callback !== undefined) {
                    callback(entity);
                }
            });
        }
    });
 } 
```

问题是在这种情况下，newEntity 只是添加到 ClientDB 并且没有 newEntity2！

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:11:41.117

我对代码做了很多更改，您可以在[JSFiddle](http://jsfiddle.net/JayData/EpMEK/)上查看。

重要的事情：

*   使用类型化的 db.People 集合来查询和插入记录（不是 db["_People"]）
*   使用类型化实体 - new Person()
*   如果您使用自动生成的 ID，最好不要手动设置它:)
*   在我修改了以上所有这些之后，您的逻辑将相同的 newEntity 传递给回调，所以我有 3 条记录而不是 2 条。我通过删除回调函数定义简化了代码

如果您想实现此行为，请查看 JSFiddle 代码并分享您的反馈

```
 $data.Entity.extend("Person", {
   Id: { type: "int", key: true, computed: true },
   Task: { type: String, required: true, maxLength: 200 },
   DueDate: { type: Date },
   Completed: { type: Boolean },
   University: { type: "int"},
   Degree: { type: "int" }
 });

$data.EntityContext.extend("ClientDatabase", {
    People: { type: $data.EntitySet, elementType: Person }
});

var db = new ClientDatabase({
    provider: 'indexedDb', databaseName: 'ClientDB', version: 1
});

db.onReady(function(){
    var newEntity = new Person( {
        Task: 'task1',
        DueDate: new Date(),
        Completed: false,
        University: 1,
        Degree: 1
    });

     var newEntity2 = new Person({
        Task: 'task4',
        DueDate: new Date(),
        Completed: false,
        University: 4,
        Degree: 4
    });

    db.People.add(newEntity);
    db.saveChanges(function() {
        db.People.add(newEntity2);
        db.saveChanges(function() {alert(newEntity2.Id);});
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:08:24.090

恐怕你把它弄混了一点。$data.Entity 和 $data.EntityContext 用于模型定义

```
var db = new ClientDatabase(...) 
```

db 是一个数据库上下文，它没有 EntityContext 方法或属性

所以你的代码应该是这样的：

```
db.onReady()

db.People.add(entity)

db.saveChanges(...) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-29T03:16:36.653

我希望这对某人有所帮助……它对我有用…… [http://jaydata.org/forum/viewtopic.php?f=3&t=184](http://jaydata.org/forum/viewtopic.php?f=3&t=184)

# android - 如何在android中打开和关闭Flash LED？

> ID：15000336
> 
> 赞同：0
> 
> 时间：2013-02-21T10:51:04.230
> 
> 标签：android, flash, camera, led

我想以编程方式打开和关闭 Android 手机的 LED 或闪光灯，但在三星 Google Nexus 中，闪光灯没有打开。我使用了很多方法，但不能得到好的结果。

```
 Camera mycam = Camera.open();
                 Parameters p = mycam.getParameters();
                 p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                 mycam.setParameters(p); 
```

我使用这些代码并给予所有许可，但问题是相同的，它不适用于三星 google nexus。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:00:26.770

你可以试试这个，它可能对你有帮助：

```
private void flashOn() {
        camera = Camera.open();
        Parameters params = camera.getParameters();
        // Build.MODEL.equals("GT-P1000")
        if (Build.MANUFACTURER.equalsIgnoreCase("SAMSUNG")
                || Build.MANUFACTURER.equalsIgnoreCase("LG"))
            params.setFlashMode(Parameters.FLASH_MODE_ON);
        else
            params.setFlashMode(Parameters.FLASH_MODE_TORCH);
        camera.setParameters(params);
        camera.startPreview();
        camera.autoFocus(new AutoFocusCallback() {
            public void onAutoFocus(boolean success, Camera camera) {
            }
        });
    }

    private void flashOff() {
        if (camera != null) {
            camera.stopPreview();
            camera.release();
        }
    } 
```

并将其添加到您的清单文件中：

```
<permission
        android:name="android.permission.FLASHLIGHT"
        android:permissionGroup="android.permission-group.HARDWARE_CONTROLS"
        android:protectionLevel="normal" />

    <uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />
    <uses-feature android:name="android.hardware.camera.flash" /> 
```

# vba - List Hyperlinks in Excel

> ID：15000338
> 
> 赞同：0
> 
> 时间：2013-02-21T10:51:06.567
> 
> 标签：vba, excel

I ahve an Excel work book containing a large number of sheets. Each sheet has between 1 and 12 Hyperlinks to different documents on a website. These dicuments are updated from time to time. I would like a macro that lists all the Hyperlinks in a new sheet but also lists the sheet name next to each link. I have the following that lists the Hyperlinks and the cell ref

```
Sub CopyHyperLinks()  
  Dim rCell As Range 
  Dim ws As Worksheet 
  Dim Lhyper As Long                  
  On Error Resume Next 
  Application.DisplayAlerts = False 
  Sheets("Hypers").Delete 
  On Error Goto 0 
  Application.DisplayAlerts = True 
  Sheets.Add().Name = "Hypers" 

  For Each ws In Worksheets
    If ws.Name <> "Hypers" Then 
      For Lhyper = 1 To ws.UsedRange.Hyperlinks.Count  
        ws.Hyperlinks(Lhyper).Range.Copy 
        With Sheets("Hypers").Cells(Rows.Count, 1).End(x1Up)  
          .Offset(1, 0).PasteSpecial
          .Offset(1, 1) = ws.Hyperlinks(Lhyper).Range.Address 
        End
        Application.CutCopyMode = False 
       Next Lhyper 
     End If 
  Next ws 
End Sub 
```

How can i modify this to show the sheet name instead of the cell ref. is it also possible to then check that these Hyperlinks are valid destinations?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:04:57.950

You can get the name of the worksheet of the hyperlink with this line:

```
ws.Hyperlinks(Lhyper)..Range.Worksheet.Name 
```

Here's is your reworked code (it contained some other syntactical errors that I corrected):

```
Sub CopyHyperLinks()
    Dim rCell As Range
    Dim ws As Worksheet
    Dim Lhyper As Long
    Dim rngLink As Range

    Application.DisplayAlerts = False

    On Error Resume Next
    Sheets("Hypers").Delete

    On Error GoTo 0
    Application.DisplayAlerts = True

    Sheets.Add().Name = "Hypers"

    For Each ws In Worksheets
        If ws.Name <> "Hypers" Then
            For Lhyper = 1 To ws.UsedRange.Hyperlinks.Count
                Set rngLink = ws.Hyperlinks(Lhyper).Range
                rngLink.Copy
                With Sheets("Hypers").Cells(Rows.Count, 1).End(xlUp)
                    .Offset(1, 0).PasteSpecial
                    .Offset(1, 1) = rngLink.Address
                    .Offset(1, 2) = rngLink.Worksheet.Name
                    .Offset(1, 3) = CheckHyperlink(ws.Hyperlinks(Lhyper).Address)
                End With
                Application.CutCopyMode = False
            Next Lhyper
        End If
    Next ws
End Sub 
```

If you want to verify the links, include the code [from this answer](https://stackoverflow.com/questions/1118221/sort-dead-hyperlinks-in-excel-with-vba). Include this line in your code:

```
.Offset(1, 3) = CheckHyperlink(ws.Hyperlinks(Lhyper).Address) 
```

and also this routine:

```
Public Function CheckHyperlink(ByVal strUrl As String) As Boolean

    Dim oHttp As New MSXML2.XMLHTTP30

    On Error GoTo ErrorHandler
    oHttp.Open "HEAD", strUrl, False
    oHttp.send

    If Not oHttp.Status = 200 Then CheckHyperlink = False Else CheckHyperlink = True

    Exit Function

ErrorHandler:
    CheckHyperlink = False
End Function 
```

You need to include a reference to the "Microsoft XML" library in your VBA project.

# javascript - 如何使用 CSS、HTML 和一些 Javascript 显示二叉搜索树？

> ID：15000341
> 
> 赞同：7
> 
> 时间：2013-02-21T10:51:11.703
> 
> 标签：javascript, html, css, binary-search-tree

我想使用 CSS 和 HTML 在屏幕上“绘制”树，而不是以任何方式或数据结构表示它......

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-06-27T10:26:18.787

使用css无限二叉树和单层树

演示：http: [//jsfiddle.net/Limitlessisa/5Lhb0ron/](http://jsfiddle.net/Limitlessisa/5Lhb0ron/)

html:

```
<div class="tree">

        <ul>
            <li>
                <div><input type="checkbox"> Main <br/> <button> Test Btn </button></div>
                <ul>
                    <li>
                        <div><input type="checkbox"> Sub-1</div>
                    </li>
                    <li>
                        <div><input type="checkbox"> Sub-2</div>
                        <ul>
                            <li>
                                <div><input type="checkbox"> Sub-2-1</div>
                            </li>
                            <li>
                                <div><input type="checkbox"> Sub-2-2</div>
                            </li>
                        </ul>  
                    </li>
                </ul>

            </li>
        </ul>

    </div> 
```

CSS：

```
<style>
.tree ul {
    padding-top: 20px; position: relative;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}

.tree li {
    float: left; text-align: center;
    list-style-type: none;
    position: relative;
    padding: 20px 5px 0 5px;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}

.tree li::before, .tree li::after{
    content: '';
    position: absolute; top: 0; right: 50%;
    border-top: 1px solid #ccc;
    width: 50%; height: 20px;
}
.tree li::after{
    right: auto; left: 50%;
    border-left: 1px solid #ccc;
}

.tree li:only-child::after, .tree li:only-child::before {
    display: none;
}

.tree li:only-child{ padding-top: 0;}

.tree li:first-child::before, .tree li:last-child::after{
    border: 0 none;
}
.tree li:last-child::before{
    border-right: 1px solid #ccc;
    border-radius: 0 5px 0 0;
    -webkit-border-radius: 0 5px 0 0;
    -moz-border-radius: 0 5px 0 0;
}
.tree li:first-child::after{
    border-radius: 5px 0 0 0;
    -webkit-border-radius: 5px 0 0 0;
    -moz-border-radius: 5px 0 0 0;
}
.tree ul ul::before{
    content: '';
    position: absolute; top: 0; left: 50%;
    border-left: 1px solid #ccc;
    width: 0; height: 20px;
}
.tree li div{
    border: 1px solid #ccc;
    padding: 5px 10px;
    text-decoration: none;
    color: #666;
    font-family: arial, verdana, tahoma;
    font-size: 11px;
    display: inline-block;

    border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}
.tree li div:hover, .tree li div:hover+ul li div {
    background: #c8e4f8; color: #000; border: 1px solid #94a0b4;
}
.tree li div:hover+ul li::after, 
.tree li div:hover+ul li::before, 
.tree li div:hover+ul::before, 
.tree li div:hover+ul ul::before{
    border-color:  #94a0b4;
}

</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:23:54.477

使用 HTML 和 CSS 创建树状结构的一种**非常简单**`<div>`的方法是嵌套s
每个`div`代表一个节点，并且内部可以有多个节点：

```
<div> //root
    <div> //child 1
        <div> //child 1.1
            <div></div> //child 1.1.1
            <div></div> //child 1.1.2
            <div></div> //child 1.1.3
        </div>
        <div></div> //child 1.2
    </div>
    <div></div> //child 2
</div> 
```

然后您可以将 a 添加`margin-top`到所有 div 中，以便它们出现在其父 div 下。

一个 JSFiddle：http: [//jsfiddle.net/VxRmc/](http://jsfiddle.net/VxRmc/)

我为每个 div 添加了百分比宽度。如果您知道一个节点有多少个子节点，则可以计算宽度。或者您可以使用固定宽度...

是的，它不是一棵美丽的树，但它再简单不过了。

# html - CSS 悬停不适用于先例元素

> ID：15000342
> 
> 赞同：0
> 
> 时间：2013-02-21T10:51:12.233
> 
> 标签：html, css, web, hover

我想在元素悬停时更改另一个元素属性。到目前为止，我想出了以下 CSS：

```
#test3:hover #test4
{
background-color: red;
}

<div id="test3">three</div>
<div id="test4">four</div> 
```

但是，这是行不通的。这可能吗？你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:54:52.133

```
#test3:hover #test4 
```

这意味着，定位一个元素`test4`，它是 的子元素`test3`。您想要`+` [兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)：

```
#test3:hover + #test4
{
background-color: red;
} 
```

[浏览器兼容性表](http://reference.sitepoint.com/css/adjacentsiblingselector#compatibilitysection)

# mfc - 寻址到通过 CDatabase::ExecuteSQL 创建的临时表

> ID：15000350
> 
> 赞同：1
> 
> 时间：2013-02-21T10:51:33.683
> 
> 标签：mfc, odbc, informix

考虑以下代码并建议，为什么我不能解决当前会话中创建的临时表。

```
CDatabase cdb;
CString csConnectionString = "Dsn=prm2;Driver={INFORMIX 3.34 32 BIT};Host=10.XXX.XXX.XXX;Server=SRVNAME;Service=turbo;Protocol=olsoctcp;Database=DBNAME;Uid=user;Pwd=password";
cdb.OpenEx(csConnectionString, CDatabase::noOdbcDialog);
cdb.ExecuteSQL(CString("Set Isolation to Dirty Read"));
...
CString csStatement1 = "SELECT serno FROM TABLE1 into temp ttt_1;"
CString csStatement2 = "DROP TABLE ttt_1";

cdb.ExecuteSQL(csStatement1); // point1
cdb.ExecuteSQL(csStatement2); // point2
...
cdb.Close(); 
```

在*第 1*点，一切都很好。在*第 2 点*我有：

> 指定的表 (ttt_1) 不在数据库中。State:S0002,Native:-206,Origin:[Informix][Informix ODBC Driver][Informix]

我试图将用户名指定为前缀（如`user.ttt_1`或`"user".ttt_1`）；我试图在*csStatement1*的相应语句中创建永久表，并且每次它在*point2*失败。但是当我尝试在*csStatement1*中创建相同的临时表两次时，我收到了临时表已经存在于会话中的消息。

请告知：出了什么问题，我该如何处理创建的临时表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:03:46.853

这与[ODBC 自动提交模式](http://msdn.microsoft.com/en-us/library/ms131281.aspx)有关。默认情况下，ODBC 使用连接期间定义的选项，并且根据[connectionstrings.com](http://www.connectionstrings.com/informix)，Informix 的默认设置是`commitretain=false`.

您有两个选择：通过连接字符串 ( `commitretain=true`) 或（更好的选择）通过 ODBC 设置它。对于要保留临时表的一组语句，通过 SqlSetConnectAttr 激活手动提交模式，然后执行一些语句，然后调用 SqlEndTran。请注意，在手动模式下您不需要调用`BEGIN TRANSACTION`，因为它会自动启动（行为类似于 Oracle）

请注意，ODBC 应用程序不应使用 Transact-SQL 事务语句，例如 BEGIN TRANSACTION、COMMIT TRANSACTION 或 ROLLBACK TRANSACTION，而应使用 ODBC 命令。

# ios5 - iOS 使用 Button 的图像背景

> ID：15000351
> 
> 赞同：0
> 
> 时间：2013-02-21T10:51:39.297
> 
> 标签：ios5

我有透明部分的图像背景，我去使用没有
透明部分的按钮，如果可能的话，使用界面生成器

![在此处输入图像描述](../Images/975b814a7078bad7dfbc1dec1787ca97.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:54:55.353

```
btnImage = [UIImage imageNamed:@"image.png"];
[btn setBackgroundImage:btnImage forState:UIControlStateNormal];
[btn setTitle:@"Title" forState:UIControlStateNormal]; 
```

or you can directly set background image from your xib by changing it into `custom` type.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:09:01.117

By the sounds of it you are possibly using the UIButtonTypeRoundedRect style, but UIButtonTypeCustom may be more suitable. You can change this within Interface Builder's inspector window. still i refer this link [http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

# c# - 如何在asp.net中使用ajax将控件的值从一个页面传递到另一个页面

> ID：15000353
> 
> 赞同：1
> 
> 时间：2013-02-21T10:51:43.020
> 
> 标签：c#, asp.net, ajax

我正在尝试使用 c# 在 asp.net 中使用 ajax 将控件的值（例如文本框）从一个页面传递到另一个页面。

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:59:05.957

```
<input type="text" id="txt">
<input type="Submit" id="btn">

<script>
$(document).ready(function()({
           $("#btn").click(function() {
                  Var textData = $("#txt").val();
                  $.ajax({
                      url:"Home/Index/" //In case of MVC.
                      type:'get'
                      data:{data:textData}
                      success: function() { 
                           Your code..........
                     }
               });
}); 
```

# sharepoint - SharePoint 2010 访问被拒绝从代码隐藏创建新网站

> ID：15000358
> 
> 赞同：0
> 
> 时间：2013-02-21T10:51:50.137
> 
> 标签：sharepoint, access-denied, elevated-privileges

我有一个共享点问题。我在列表上有一个事件处理程序，每当有人在列表中添加新项目时，我想创建一个包含所需详细信息的新网站。当不是网站集管理员的不同用户添加该项目时，就会出现问题。在`Web.Webs.Add()`我得到错误的方法上：

```
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)). 
```

请注意，我正在使用`SPSecurity.RunWithElevatedPrivileges`委托。

这是一个代码示例：

```
public override void ItemAdded(SPItemEventProperties properties)
{
    SPSecurity.RunWithElevatedPrivileges(delegate()
    {
            string url = "the url";
            if (Array.IndexOf(properties.Web.Webs.Names, url) >= 0)
            {
              properties.Web.Webs.Delete(url);
            }
            SPWeb newWeb = properties.Web.Webs.Add(url, "title", "description", properties.Web.Language, "STS#1", false, false);
    });
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:03:31.730

我知道了。问题是我打电话的网络没有提升，所以我做了这样的事情：

```
 public override void ItemAdded(SPItemEventProperties properties)
        {
            SPWeb web = properties.Web;
            SPListItem currentItem= properties.ListItem;

            SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                using (SPSite site = new SPSite(web.Site.ID))
                {
                    using (SPWeb elevWeb = site.OpenWeb(web.ID))
                    {
                        SPList elevList = ListUtils.GetList(elevWeb, "list");
                        SPListItem elevItem = elevList.Items[currentItem.UniqueId];
                        elevWeb.AllowUnsafeUpdates = true;
                        string url = "the url";
                        if (Array.IndexOf(elevWeb.Webs.Names, url) >= 0)
                        {
                            elevWeb.Webs.Delete(url);
                        }
                        SPWeb newWeb = elevWeb.Webs.Add(url, "title", "description", elevWeb.Language, "STS#1", false, false);
                    }
                }
            });
        } 
```

# c# - Windows 8 特定文件类型上下文菜单关联

> ID：15000359
> 
> 赞同：0
> 
> 时间：2013-02-21T10:51:58.810
> 
> 标签：c#, windows-8, registry, contextmenu, file-type

需要将项目添加到特定文件类型的上下文菜单。在 Windows 7 和以前的版本中，通过添加

```
HKEY_CLASSES_ROOT\<extension>\shell\<commandname>\command 
```

键值为

```
@="<path_to_app> \"%1\"" 
```

注册。在 Windows 8 中不起作用。即使在删除了相应类型的 PersistentHandler 键之后： ![注册表截图](../Images/255a6941507a959454a7b21ca03e10fb.png)

有趣的是，如果 shell/command 键写在`HKEY_CLASSES_ROOT\*\`部分中，上下文菜单项会按预期出现在所有文件的菜单中，但如果我需要将我的应用程序添加到仅 2-3 个文件类型而不破坏任何现有关联，那将是一个巨大的开销. 我`Microsoft.Win32.Registry.ClassesRoot`在 C# 中使用来实现此逻辑，但问题绝对不在代码中，因为 a) 它适用于 Windows 7 b) 在 Windows 8 中使用管理员权限进行手动编辑不会添加所需的关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:59:14.227

您一定已经注意到原来那里没有“shell”键，即使 .avi 文件肯定有一个打开上下文菜单项。有一个额外的间接级别，请注意 .avi 键的默认值。这是与 .avi 文件扩展名关联的 ProgId。

按照 WMP11.AssocFile.AVI 键查找 shell 命令，在此处添加命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:00:26.960

“HKEY_CLASSES_ROOT\SystemFileAssociations\video”是具有非 WMP 默认媒体播放器的系统中 .avi 文件的“真实”子树。我感兴趣的 .mkv 文件类型还创建了另一个子树 - “mkv_auto_file”。不知道为什么这样做以及记录在哪里，但我的问题已经解决了。感谢汉斯的指导。

# sql-server-2008 - SQL Server 分区性能问题

> ID：15000360
> 
> 赞同：0
> 
> 时间：2013-02-21T10:51:59.543
> 
> 标签：sql-server-2008, indexing, partitioning

我有以下情况：

```
TableA (ID GUID, Type INT) : +60M rows
TableB (ID GUID) : +5M rows 
```

TableA 有一个关于 ID 和类型 TableB 的索引，主键是 ID

我需要改进以下查询：

```
SELECT * FROM TableA A
INNER JOIN TableB B
   ON A.ID = B.ID AND A.Type = 5 
```

查询大约需要 30 秒才能完成。

我们已经尝试在***Type列上对******TableA***进行分区，但查询执行时间保持不变。甚至执行计划还是一样的。据我了解分区表应该大大提高性能？

 *我是否必须调整查询以使用分区从而提高性能？我的索引错了吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:33:40.943

您是认为分区是一种在按下时可以提高性能的神奇开关的人之一。分区主要*会降低*性能并在一些狭窄的情况下有所帮助。它主要是用于批量加载和数据归档/删除的管理功能。

分区会*带来严重的*后果，如果没有正确的理解、计划和测试，就无法做到。

创建正确的索引（在您的情况下`A(Type, ID)`将是一个好的开始。或者`A(ID) WHERE Type = 5`（过滤索引））。*

# asp.net-mvc - 用于 asp.net mvc 的 Html.RadioButtonFor

> ID：15000368
> 
> 赞同：1
> 
> 时间：2013-02-21T10:52:15.923
> 
> 标签：asp.net-mvc

我想调查一下我的产品的服务。

```
1   Was the product or service provided in a timely manner? 
    - Very Satisfied
    - Satisfied
    - Neutral
2   Was the product or service complete and accurate? 
    - Very Satisfied
    - Satisfied
    - Neutral 
```

数据取自数据库，每个选项都用作单选按钮。我在我的 asp.net 项目视图中循环数据：

```
 <%      
   foreach (var serviceQ in _question)
   {
  %>
      <%:Html.RadioButtonFor(model => model.Option, serviceQ.Option1)%>
      <%:Html.LabelFor(m => m.Option1) %>
      <%:serviceQ.Option1 %>
      <%:Html.ValidationMessageFor(model =>model.Option1) %>

      <%:Html.RadioButtonFor(model => model.Option, serviceQ.Option2)%>
      <%:Html.LabelFor(m => m.Option2) %>
      <%:serviceQ.Option2 %>
      <%:Html.ValidationMessageFor(model =>model.Option2) %>

  <%
   }
  %> 
```

但问题是我这样做我所有的单选按钮都具有相同的名称。

我试过`foreach`块：

```
<%:Html.RadioButtonFor(model => model.Option + serviceQ.ID, serviceQ.Option1)%>
<%:Html.RadioButtonFor(model => model.Option + serviceQ.ID, serviceQ.Option2)%> 
```

然后得到一个错误：`Templates can be used only with field access, property access, single-dimension array index, or single-parameter custom indexer expressions.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:22:22.640

看[HtmlHelper.RadioButton Method(String, Object)](http://msdn.microsoft.com/en-us/library/gg568843%28v=vs.111%29.aspx)

```
public IHtmlString RadioButton(
    string name,
    Object value
) 
```

你会得到这样的东西：

```
<%:Html.RadioButton(model.Option + serviceQ.ID, serviceQ.Option1)%> 
```

# php - php排序数组

> ID：15000375
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:52:23.927
> 
> 标签：php, arrays, sorting

我有这个数组：

```
$user_data = array();
while($row=mysql_fetch_array($result))
{
$user_data[$row['id_user']]['id_user'] = $row['id_user'];
$user_data[$row['id_user']]['firstname'] = $row['firstname'];
$user_data[$row['id_user']]['lastname'] = $row['lastname'];
$user_data[$row['id_user']]['avatar'] = $row['avatar'];
} 
```

例如，我想使用 php（不是 sql 或 Jquery）按名字对其进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:58:30.540

看看[文档](http://php.net/manual/fr/function.sort.php)。

您应该使用`SORT_STRING`标志按名字排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:58:48.307

您可能想要使用的是 php 的 uasort 函数。它允许您指定将在排序过程中使用的自己的比较函数。

PHP 文档：[uasort](http://www.php.net/manual/en/function.uasort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:59:42.180

在数据库查询中按名字对其进行排序：

```
...
ORDER BY firstname 
```

毕竟，检索数据的是数据库。当您可以在第一步中完成时，再做处理数据的工作是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:01:53.173

手册`array_multisort`有一个完全适用于这个用例的例子[**：**](http://de.php.net/array-multisort#example-4796)

> ```
> $data[] = array('volume' => 67, 'edition' => 2);
> $data[] = array('volume' => 86, 'edition' => 1);
> $data[] = array('volume' => 85, 'edition' => 6);
> $data[] = array('volume' => 98, 'edition' => 2);
> $data[] = array('volume' => 86, 'edition' => 6);
> $data[] = array('volume' => 67, 'edition' => 7);
> 
> // Obtain a list of columns
> foreach ($data as $key => $row) {
>     $volume[$key]  = $row['volume'];
>     $edition[$key] = $row['edition'];
> }
> 
> // Sort the data with volume descending, edition ascending
> // Add $data as the last parameter, to sort by the common key
> array_multisort($volume, SORT_DESC, $edition, SORT_ASC, $data); 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T11:40:17.707

在while循环之后添加这个并尝试：

```
$sort = array();
foreach($user_data as $k=>$v) {
    $sort['firstname'][$k] = $v['firstname'];
}

array_multisort($sort['firstname'], SORT_DESC, $user_data);

echo "<pre>";
print_r($user_data); 
```

未经测试，如果您遇到任何问题，请在此处发表评论。

# php - MySQL查询在循环中输出更多结果

> ID：15000376
> 
> 赞同：0
> 
> 时间：2013-02-21T10:52:50.203
> 
> 标签：php, mysql, joomla

我正在使用使用 Joomla 框架的 sql 查询，它几乎是在循环结果。

这是语法，它输出的结果几乎是预期的三倍。

```
->select(array('a.virtuemart_custom_id', 'a.virtuemart_product_id', 'b.virtuemart_custom_id', 'b.value'))
->from('#__virtuemart_product_customfields AS a')
->join('INNER', '#__virtuemart_product_custom_plg_param AS b ON (a.virtuemart_custom_id = b.virtuemart_custom_id)')
->where('a.virtuemart_product_id='.$this->product->virtuemart_product_id)
->order('b.virtuemart_custom_id ASC'); 
```

从 phpMyAdmin，它应该只保留 7 个结果。

![在此处输入图像描述](../Images/cd62a362bfb9c13a58d141a5ce33a06a.png)

我的 SQL 错了吗？为什么输出和循环？

我的结果输出：

数组（[0] => stdClass 对象（[virtuemart_custom_id] => 38 [virtuemart_product_id] => 20 [value] => |2300cc|）[1](https://i.stack.imgur.com/XDROU.png)39 [virtuemart_product_id] => 20 [价值] => |4| ) [30] => stdClass 对象 ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [value] => |2| ) [31] => stdClass 对象 ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [value] => |4| ) [32] => stdClass Object ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [value] => |2 Berth| ) [33] => stdClass Object ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [value] => |2| ) [34] => stdClass 对象 ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [value] => |4| ) [35] => stdClass 对象 ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [value] => |6 Berth| ) [36] => stdClass 对象 ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [value] => |2| ) [37] => stdClass 对象 ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [value] => |2| ) [38] => stdClass 对象 ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [值] => |4| ) [39] => 标准类对象 ( [virtuemart_custom_id] => 39 [virtuemart_product_id] => 20 [值] => |3| ) [40] => 标准类对象 ( [virtuemart_custom_id] = > 40 [virtuemart_product_id] => 20 [value] => |Coachbuilt| ) [41] => stdClass Object ([virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] => |Low Profile| ) [42] => stdClass 对象 ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] => |Coachbuilt| ) [43] => stdClass 对象 ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] = > |Coachbuilt| ) [44] => |低调| ) [51] => stdClass Object ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] => |Panel Van| ) [52] => stdClass Object ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [值] => |Coachbuilt| ) [53] => stdClass 对象 ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [值] => |Coachbuilt| ) [54] => stdClass 对象 ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] => |Panel Van| ) [55] => stdClass Object ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] => |Low Profile| ) [ 56] => stdClass 对象 ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] => |Panel Van| ) [57] => stdClass 对象 ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [价值] => |低调| ) [58] => stdClass 对象 ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] => |Coachbuilt| ) [59] => stdClass 对象 ( [virtuemart_custom_id] => 40 [virtuemart_product_id] => 20 [value] => |Coachbuilt| ) [60] => stdClass Object ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [value] => |0| ) [61] => stdClass Object ( [virtuemart_custom_id] = > 41 [virtuemart_product_id] => 20 [value] => |0| ) [62] => stdClass 对象 ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [value] => |0| ) [63] = > stdClass 对象 ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [value] => |0| ) [64] => stdClass 对象 ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [value] => |0| ) [65] => 41 [virtuemart_product_id] => 20 [值] => |0| ) [73] => stdClass 对象 ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [value] => |0| ) [74] => stdClass 对象 ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [值] => |20994| ) [75] => stdClass 对象 ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [值] => |0| ) [76] => stdClass 对象 ( [virtuemart_custom_id] = > 41 [virtuemart_product_id] => 20 [value] => |0| ) [77] => stdClass 对象 ([virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [value] => |0| ) [78] = > stdClass 对象 ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [value] => |0| ) [79] => stdClass 对象 ( [virtuemart_custom_id] => 41 [virtuemart_product_id] => 20 [value] => |0| ) [80] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2013)| ) [81] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2012)| ) [82] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2013)| ) [83] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2013)| ) [84] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [ value] => |NEW (2012)| ) [85] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2013)| ) [86] => stdClass 对象( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [值] => |新 (2012)| ) [87] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |X111 2233| ) [88] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2013)| ) [89] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2013)| ) [90] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2012)| ) [91] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |YX59 AZL| ) [92] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [value] => |NEW (2013)| ) [93] => stdClass 对象 ( [virtuemart_custom_id] => 42 [virtuemart_product_id] => 20 [价值] => |新 (2013)| ) [94] => stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [95] => stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [96] => stdClass Object ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [97] => stdClass Object ( [virtuemart_custom_id] = > 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [98] => stdClass Object ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [99] = > stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [100] => stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |手册| ) [101] => stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [102] => stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [103] => stdClass Object ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [104] => stdClass Object ( [virtuemart_custom_id] = > 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [105] => stdClass Object ([virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual|) [106] = > stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [107] => stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |手册| ) [108] => stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [109] => stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [110] => stdClass Object ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [111] => stdClass Object ( [virtuemart_custom_id] = > 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [112] => stdClass Object ([virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual|) [113] = > stdClass 对象 ( [virtuemart_custom_id] => 43 [virtuemart_product_id] => 20 [value] => |Manual| ) [114] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |L19' 8| ) [115] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |20'7"| ) [116] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [值] => |L23'3"| ) [117] => stdClass 对象 ([virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [值] => |L20'8| ) [118] = > stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |L21'7"| ) [119] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value ] => |L25'7| ) [120] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |L24'7| ) [121] => stdClass 对象 ( [virtuemart_custom_id ] => 44 [virtuemart_product_id] => 20 [值] => |L22'8| ) [122] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |20'3| ) [123] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] = > 20 [值] => |18'6| ) [124] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [值] => |L23'4| ) [125] => stdClass对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |20'8| ) [126] => stdClass Object ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |L17'9| ) [127] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |L23'7| ) [128] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [值] => |L19'8| ) [129] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |23'7"| ) [130] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [值] => |L24'7"| ) [131] => stdClass 对象 ([virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [值] => |L17'9| ) [132] = > stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |L20'11| ) [133] => stdClass 对象 ( [virtuemart_custom_id] => 44 [virtuemart_product_id] => 20 [value] => |L19'8| ) )

# jquery - jQuery .each 函数破坏代码

> ID：15000377
> 
> 赞同：0
> 
> 时间：2013-02-21T10:52:53.273
> 
> 标签：jquery, loops

我有一个简单的表单验证脚本，它遍历我的输入，检查 ID 是否在数组中，如果是，则验证框中是否输入了某些内容。但是由于某种原因，代码的 .each 部分正在破坏它。

我的代码：

```
function ValForm() {
    var validate = ['name', 'addr1', 'city', 'county', 'pcode'];
    var regpcode = '/^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/i';
    var fail = false;
    $('#summary-wrap input').each(function() {
        var id = $(this).attr('id');
        if($.inArray(id, validate)) {
            if(id == 'pcode' && !regpcode.test(this.value)) {
                fail = true;
            } else if(this.value.length < 2) {
                fail = true;
            }
        }
    });
    if(fail) {
        alert('Please complete all required fields before continuing.');
        $(this).focus();
        return false;
    }
    return true;
} 
```

如果我输入无效数据，表单仍然会提交。即使我设置了fail = true，或者将所有返回值都设置为false，表单仍然提交。这是我的表格：

```
 <form name="delivery" action="knee-icepack.php" method="post" onsubmit="return ValForm();">
            <label for="name">Name <span class="req">*</span>:</label><input type="text" name="name" id="name" required="required" />
            <br clear="all" />
            <label for="addr1">Address Line 1 <span class="req">*</span>:</label><input type="text" name="addr1" id="addr1" required="required" />
            <br clear="all" />
            <label for="addr2">Address Line 2:</label><input type="text" name="addr2" id="addr2" />
            <br clear="all" />
            <label for="city">Town / City <span class="req">*</span>:</label><input type="text" name="city" id="city" required="required" />
            <br clear="all" />
            <label for="county">County <span class="req">*</span>:</label><input type="text" name="county" id="county" required="required" />
            <br clear="all" />
            <label for="pcode">Post Code <span class="req">*</span>:</label><input type="text" name="pcode" id="pcode" required="required" />
            <br clear="all" />
            <input type="submit" id="submit" value="Proceed to Payment" />
            <input type="hidden" name="deliveryDetailsSubmitted" value="1" />
            <img src="images/paypal.jpg" align="right" />
            <br clear="all" />
            <span class="small"><span class="req">*</span> required field.</span>
        </form> 
```

但是，如果我从 ValForm 函数中删除 .each 循环，它会在我设置 fail = true 时停止提交表单。我可以在循环中没有代码，它仍然无法工作。到底是怎么回事？这一直让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:13:53.703

您的正则表达式定义是错误的。目前这只是一个字符串。代替：

```
var regpcode = '/^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/i'; 
```

你应该有（使用正则表达式文字，没有换行`'`字符）

```
var regpcode = /^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/i; 
```

或（调用正则表达式对象的构造函数）

```
var regpcode =  new RegExp('/^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/i'); 
```

更多细节[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

目前您的代码在这方面失败了：`!regpcode.test(this.value)` 使用您的代码，regpcode 是一个字符串，而不是一个正则表达式。并且没有方法测试。

# sencha-touch - Sencha touch 2，嵌套列表

> ID：15000378
> 
> 赞同：0
> 
> 时间：2013-02-21T10:52:54.913
> 
> 标签：sencha-touch

我的观点 ProvaincePanel.js

```
Ext.define('MyApp.view.ProvaincePanel', {
    extend: 'Ext.dataview.NestedList',
    alias : 'widget.provaincePanel',

    config: {
     store : 'Provainces',
     title: 'Select your Provaince',
        displayField: 'text',

     detailCard: {
            html: 'You can see detail information here!'
        } 

    } 
}); 
```

我的商店 Provainces.js

```
Ext.define('MyApp.store.Provainces', {
    extend: 'Ext.data.TreeStore',

    config: {
        model: 'MyApp.model.Provaince',
        proxy: {
            type: 'ajax',
            url: 'http://127.0.0.1/pbesse-test/list-provainces3.php',
        }
    }    

}); 
```

我的模型 Provaince.js

```
Ext.define('MyApp.model.Provaince', {
    extend: 'Ext.data.Model',
    config: {
        fields: [{
            name: 'text',
            type: 'string'
        }]
    }
}); 
```

我的控制器 TheWorld.js

```
Ext.define('MyApp.controller.TheWorld', {
    extend : 'Ext.app.Controller',

    config: {
        profile: Ext.os.deviceType.toLowerCase(),
        stores : ['Provainces'],
        models : ['Provaince'],
        refs: {
            myContainer: 'provaincePanel'
        },
        control: {
            'provaincePanel': {
                activate: 'onActivate',
                leafitemtap: 'onDetailDisplay'
            }
        }   
    },

    onActivate: function() {
        console.log('Main container is active');
    },

    onDetailDisplay: function(nestedList, list, index, target, record) {
        var detailCard = nestedList.getDetailCard();
        detailCard.setHtml('Here is the detail information for ' + 
        record.get('text'));
    },

    onItemTap: function(view, list, index, target, record, event) {
        console.log('Item was tapped on the Data View');

        console.log(view, list, index, target, record, event);
        if(event.target.type == "button"){
            Ext.Msg.alert('You clicked on the Button ...', 
            'The country code selected is: ' + event.target.name);
        }
        else {
            Ext.Msg.alert('You clicked on the Row ...', 
            'The country code selected is: ' + record.get('code'));
        }
        //return false;
    },

    init: function() {
        console.log('Controller initialized');
    },    
}); 
```

list-provainces3.php 文件包含

```
<?php

    @mysql_connect('127.0.0.1','root','') or die(mysql_error());
    @mysql_select_db('pbesse_test');
    $node = $_GET['node'];

    $node = explode('%2F', $node);

    if(count($node) == 1) 
    {
        $sql = "SELECT * FROM provainces";

        $req = mysql_query($sql) or die(mysql_error());

        $data = array();

        while($res = mysql_fetch_array($req)){
            $tmp = array();
            $tmp['id'] = "root/".$res['id'];
            $tmp['text'] = utf8_encode($res['libelle']);
            $tmp['leaf'] = false;
            $tmp['cls'] = 'folder';
            $data[] = $tmp;
        }
    }
    if(count($node) == 2){
        $sql = "SELECT * FROM chateaux where id_provaince = ". $node[1];

        $req = mysql_query($sql) or die(mysql_error());

        $data = array();

        while($res = mysql_fetch_array($req)){
            $tmp = array();
            $tmp['id'] = "root/".$res['id_provaince']."/".$res['title'];
            $tmp['text'] = utf8_encode($res['libelle']);
            $tmp['leaf'] = false;
            $tmp['cls'] = 'folder';
            $data[] = $tmp;
        }
    }
    header('Content-Type: application/json, charset=UTF-8');
    echo str_replace('\\','' , json_encode($data));

    exit;
?> 
```

当我执行应用程序时，我有一个国家列表，但是当我点击一个国家名称时，它会显示一条加载消息和应用程序错误

# video - 选择 Youtube Data API 的版本

> ID：15000379
> 
> 赞同：2
> 
> 时间：2013-02-21T10:52:58.450
> 
> 标签：video, youtube, youtube-api

我正在开发一个项目，我应该直接从 youtube 上传和搜索视频。我开始搜索并了解使用 youtube 数据 API。现在有两个版本。v3.0 处于实验阶段，v2.0 是旧版本。

我将第一次使用这个。我很困惑...

1.  我应该使用 2.0 版还是 3.0 版？
2.  与其他相比，我为什么要选择它？
3.  开发复杂度有区别吗？

请建议！谢谢所有回答的人。（我正在使用php / mysql）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T08:30:13.790

出于几个原因，我个人建议使用版本 3。

*   Youtube 正在发生变化，就像所有平台一样，随着平台的变化，API 也会发生变化。使用不同的实体，并为这些实体创建不同的方法。YouTube 想到的一个很好的例子是您查找频道上传视频的方式。YouTube 转而使用上传播放列表（与任何其他播放列表一样处理），新的 API 反映了这一变化。版本 3 只是摆脱了一些旧的做事方式。
*   另一个重大变化是 YouTube 希望处理频道的方式。频道越来越多地围绕他们的 ID（与您的 G+ 帐户相关联），而不是围绕用户名，v3 API 也反映了这一点。
*   第 3 版的使用时间会更长（因为我确信 v2 会在某个时候被淘汰，就像 v1 一样）。
*   版本 3 比版本 2（文档和实际端点）干净得多。这是一个非常容易提出的论点，只需查看以下两个文档页面。如果您不能立即告诉版本 3 更易于导航，那您一定是疯了！

> 版本 3：[https ://developers.google.com/youtube/v3/docs/](https://developers.google.com/youtube/v3/docs/)
> 
> 版本 2：[https ://developers.google.com/youtube/2.0/reference](https://developers.google.com/youtube/2.0/reference)

可以说 v3 仍处于试验阶段是一个有效的论据，但我已经在生产环境中使用它几个月了，到目前为止我对它非常满意。我不希望 YouTube 在这一点上做出任何巨大的、彻底的改变。

# asp.net-mvc - 如何在 Asp.net MVC3 Web 应用程序中从 web.config 读取 ConnectionString？

> ID：15000380
> 
> 赞同：3
> 
> 时间：2013-02-21T10:53:06.123
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis, connection-string

我正在使用 Asp.net Razor MVC3。我创建了一个 App_Code 文件夹并创建了一个类，我想在其中从 web.config 读取连接字符串并使用该类处理数据库。我正在写`System.Configuration`这个 app_code 类，但它没有显示我`ConfigurationManager`的`Configuration`类。它像这样显示 ![在此处输入图像描述](../Images/308f107f72cc21bf8581a48065a1e203.png) 而不是如果我在任何控制器中编写同一行，那么它将显示`System.Configuration.ConfigurationManager`并且在控制器中我可以从 web.config 读取连接字符串，但在 app_code 中我不能。

请给我解决方案如何读取 app_code 类中的连接字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T11:08:19.073

Include a reference to System.Web.Configuration:

```
using System.Web.Configuration; 
```

Then, in your code, access it like this:

```
WebConfigurationManager.ConnectionStrings["ConnectionStringName"].ConnectionString; 
```

Example Class:

```
using System.Web.Configuration;

namespace MyWebApp.App_Code
{
    public class TestClass
    {
        public void TestMethod()
        {
            var connStr = WebConfigurationManager.ConnectionStrings["ConnectionStringName"].ConnectionString;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-13T18:28:23.407

如果您收到有关“当前上下文中不存在 ConfigurationManager”的错误消息，您需要安装 dll 程序集，以便`using System.Configuration`在控制器中包含该语句。

您可以在[https://www.nuget.org/packages/System.Configuration.ConfigurationManager/](https://www.nuget.org/packages/System.Configuration.ConfigurationManager/)的 Nuget 库中找到它，或者在 Visual Studio 中添加程序集引用。

之后，您可以编写`string MyString = ConfigurationManager.ConnectionStrings["ConnectionStringName"].ConnectionString;`（注意那段代码末尾的单数形式）。

或者，如果您还没有为 System.Configuration 编写 using 语句，您将编写相同的内容，但在前面加上`string MyString = System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionStringName"].ConnectionString;`

# mysql - 基于 Id 和 unixtimestamp 的差异表

> ID：15000382
> 
> 赞同：0
> 
> 时间：2013-02-21T10:53:09.360
> 
> 标签：mysql, unix-timestamp

我的表如下所示：

```
unix_timestap   ID  value
1351058019      1   500
1351058029      1   505
1351058039      9   105
1351058049      9   200
1351076620      1   520 
```

我希望能够生成一个新列，其中包含当前值和第一个可用“过去”值之间每个 ID 的值之间的差异。过去我的意思是 unixtimestamp 没有按顺序排列在原始表中。

输出将是：

```
unix_timestap   ID  value    difference
1351058019      1   500      0
1351058029      1   505      5
1351058039      9   105      0
1351058049      9   200      95
1351076620      1   520      15 
```

如果不存在先前的 unix_timestamp，则该值应为零。

一个提示/提示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:20:53.313

如果仍然需要解决方案

```
select
  t3.unix_timestamp, t3.id, t3.value, ifnull(t3.value - t5.value, 0) as diff
from test1 t3
  join (
        SELECT t1.unix_timestamp, t1.id, max(t2.unix_timestamp) as old_stamp
        FROM `test1` t1
          left join test1 t2 on t1.id = t2.id and t1.unix_timestamp > t2.unix_timestamp
        group by t1.unix_timestamp, t1.id) as t4
  on t3.unix_timestamp = t4.unix_timestamp and t3.id = t4.id
left join test1 t5 on t4.old_stamp = t5.unix_timestamp and t4.id = t5.id 
```

# hadoop - 如何防止hadoop损坏.gz文件

> ID：15000385
> 
> 赞同：1
> 
> 时间：2013-02-21T10:53:18.173
> 
> 标签：hadoop, mapreduce

我正在使用以下简单代码将文件上传到 hdfs。

```
FileSystem hdfs = FileSystem.get(config);
hdfs.copyFromLocalFile(src, dst); 
```

这些文件由 webserver java 组件生成，并由 .gz 格式的 logback 旋转和关闭。我注意到有时 .gz 文件已损坏。

```
 > gunzip logfile.log_2013_02_20_07.close.gz 
 gzip: logfile.log_2013_02_20_07.close.gz: unexpected end of file 
```

但是以下命令确实向我显示了文件的内容

```
> hadoop fs -text /input/2013/02/20/logfile.log_2013_02_20_07.close.gz 
```

拥有这样的文件的影响是相当灾难的——因为一整天的聚合失败，并且在这种情况下，几个从节点被标记为黑名单。

在这种情况下我该怎么办？hadoop copyFromLocalFile() 实用程序会损坏文件吗？有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:04:32.403

它不应该这样做 - 此错误通常与 GZip 文件相关联，这些文件在最初写入本地磁盘时尚未关闭，或者在完成写入之前被复制到 HDFS。

您应该能够通过在原始文件和 HDFS 中运行 md5sum 来检查 - 如果它们匹配，则原始文件已损坏：

```
hadoop fs -cat /input/2013/02/20/logfile.log_2013_02_20_07.close.gz | md5sum
md5sum /path/to/local/logfile.log_2013_02_20_07.close.gz 
```

如果它们不匹配，他们会检查两个文件的时间戳——HDFS 中的一个应该在本地文件系统之后修改。

# jquery - 带有标签的jQuery下拉控件

> ID：15000389
> 
> 赞同：6
> 
> 时间：2013-02-21T10:53:25.330
> 
> 标签：jquery

有谁知道用于下拉列表的好的 Jquery 插件控件。用户应该能够从下拉列表中选择多个值，并且这些选择的值应该在同一控件中显示为标签。

请参阅附图以供参考。![在此处输入图像描述](../Images/9a979d899b273f769ee9b226796d1749.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:00:44.647

我建议您使用 [http://xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/) 或 [http://textextjs.com/](http://textextjs.com/)

它们都非常好，很容易集成到项目中。

# shell - ssh 的 shell 脚本

> ID：15000391
> 
> 赞同：0
> 
> 时间：2013-02-21T10:53:27.887
> 
> 标签：shell, ssh

谁能帮我创建一个shell脚本。我的脚本是这样的。我是 shell 脚本的初学者。

!/bin/bash
ssh user@server
mkdir test

“实际上我想做的是，登录到我的服务器，然后在服务器中创建目录后从那里注销，方法是在我的本地机器上运行一个 shell 脚本。但是在执行第一个命令后，它会要求输入密码用于SSH并登录到服务器。剩余的代码将不会在服务器中执行。当我通过键入CTRL + D退出服务器时，remianing代码将在我的本地机器上执行。我应该怎么做才能执行
剩余的代码在服务器中并自动退出服务器。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:52:37.150

您必须将要在远程服务器上执行的命令与`ssh`调用放在同一行。例如：

```
ssh user@server "mkdir test" 
```

如果要运行多个命令，请用分号分隔它们。例如：

```
ssh user@server "cd /tmp/ ; mkdir test ; echo 'Done'" 
```

或者你可以复制一个脚本然后启动它。例如：

```
scp remote.sh user@server:/tmp/remote.sh
ssh user@server "/tmp/remote.sh" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:00:42.420

您可以使用名为 Fabric 的 Python 模块。Fabric 是一个很棒的模块，它可以满足您的需求。您需要安装 python 并向其添加 Fabric 模块。

看看[官方网站](http://docs.fabfile.org/en/1.5/)。

# asp.net-mvc-4 - 如何在剑道（可拖动）窗口前面显示剑道 UI 菜单

> ID：15000394
> 
> 赞同：3
> 
> 时间：2013-02-21T10:53:32.887
> 
> 标签：asp.net-mvc-4, window, kendo-ui

我想在我的 asp.net mvc4 web 应用程序的每个页面顶部使用一个菜单栏和 Kendo UI。我的一个网页是 Kendo UI 的多个可拖动窗口的组合。当一个窗口放置在菜单正下方时，菜单在窗口后面打开。我已将窗口设置为非模式，但它仍然无法正常工作。这在带有剃刀的 Kendo UI ASP.NET mvc 4 中是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T08:44:58.293

您需要对菜单应用更高的 z-index。如果使用 Razor，以下应该可以工作：

```
@(Html.Kendo().Menu()
      .HtmlAttributes(new { style = "position: relative; z-index: 11000" })
) 
```

这是一个现场演示：http: [//jsbin.com/uwujih/1/edit](http://jsbin.com/uwujih/1/edit)

# php - 使用 PHP Mysql 进行会话处理

> ID：15000396
> 
> 赞同：0
> 
> 时间：2013-02-21T10:53:34.447
> 
> 标签：php, session

使用 PHP Mysql 进行会话处理？

如果我在数据库中维护会话处理......

```
1) logged in 
2) save session id in database
3) when logged out session id deleted from db or flag changes
4) but I want to kill session when browser closed without logout 
```

那么我如何处理第四个条件。有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:30:21.337

您可以使用 onunload 浏览器事件执行逻辑，但这需要非常好的逻辑，因为您无法确定用户何时离开您的网页以从数据库中删除会话：

[检查这个答案](https://stackoverflow.com/questions/3581179/on-browser-close-event)，唯一的方法是使用 javascript 和 ajax 调用您的网站，然后使用 php 脚本执行查询，您将删除会话 ID，

# jquery - 我的拖放列表的滑块

> ID：15000397
> 
> 赞同：0
> 
> 时间：2013-02-21T10:53:34.537
> 
> 标签：jquery

我有以下内容：http: [//jsfiddle.net/FCKvk/](http://jsfiddle.net/FCKvk/)

当您从另一个列表中的一个列表中提取图像时，它会超出 div 的高度，我不希望这样！

当一张列表中的图片超过 4 张时，我想获得这样的信息：

[http://jqueryui.com/slider/#side-scroll](http://jqueryui.com/slider/#side-scroll)

```
$(function(){
    $( "#sortable1, #sortable2" ).sortable({
        connectWith: ".connectedSortable"
    }).disableSelection();
}); 
```

怎么做到呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:04:48.787

添加`white-space: nowrap`到容器中：

```
#sortable1, #sortable2 { 
    list-style-type: none; 
    margin: 0; 
    padding: 0 0 2.5em; 
    margin-right: 10px; 
    white-space: nowrap;
} 
```

[jsfiddle](http://jsfiddle.net/JLFzD/)

# bash - cron 作业不适用于 xwindow

> ID：15000398
> 
> 赞同：0
> 
> 时间：2013-02-21T10:53:36.617
> 
> 标签：bash, cron, crontab

我在 crontab */1 * * * * xeyes 中有以下行

它没有显示任何 xwindow 但相反 */1 * * * * touch somefile.txt 工作正常

试图在谷歌上搜索，但没有得到任何具体答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:00:55.703

如果您运行的命令使用它，您必须告诉 cron 在哪里可以找到 X 服务器。

所以使用：`env DISPLAY=:0.0 xeyes`或`export DISPLAY=:0.0; xeyes`。

一些 cron 实现（Debian、Ubuntu、...）允许在 cron 文件中简单地设置环境。

```
DISPLAY=:0.0
# m h  dom mon dow   command
*/1 * * * * xeyes 
```

# java - 如何在插件操作类中获取当前文件名

> ID：15000404
> 
> 赞同：2
> 
> 时间：2013-02-21T10:53:56.827
> 
> 标签：java, plugins, intellij-idea, intellij-plugin

在 IntelliJ IDEA 插件操作类中，我想获取用户当前正在查看的 Java 类文件名。我怎么会得到那个？

在 IntelliJ IDEA 中，如果我们单击`Analyse -> Inspect Code`，它将显示一个选择范围的窗口，其中还会显示当前文件名。与该视图类似，我想在插件操作类中获取当前文件名。我怎么能那样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T21:22:34.667

```
 public class MyAction extends AnAction {
    public void actionPerformed(AnActionEvent e) {
      VirtualFile vFile = e.getData(PlatformDataKeys.VIRTUAL_FILE);
      String fileName = vFile != null ? vFile.getName() : null;
    } 
  } 
```

# entity-framework - HasPrecision(9,6) 不知道实体框架配置

> ID：15000407
> 
> 赞同：0
> 
> 时间：2013-02-21T10:54:09.513
> 
> 标签：entity-framework, ef-code-first

有人可以告诉我为什么我不能在我的 ef 代码优先模型中的属性上使用 .HasPrecision() 方法。下面的例子

```
public class Location
{
    public double Lat { get; set; }
    public double Long { get; set; }   
}

using System.Data.Entity.ModelConfiguration;
public class LocationConfiguration : EntityTypeConfiguration<Location>
{
    public LocationConfiguration()
    {

        Property(x => x.Long).HasPrecision(9,6);
        Property(x => x.Lat).HasPrecision(9,6);

    }
} 
```

在上面的示例中，配置方法“HasPrecision(9,6)”是未知的，我似乎不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:30:19.197

您的`Lat`and`Long`有 type `double`，但是`HasPrecision`用于`decimal`属性。您想将它们作为十进制类型还是二进制浮点类型保存在数据库中？如果是前者，请更改属性类型。如果是后者，你可以摆脱`HasPrecision`.

# php - AsyncHttpClient not passing the value to php

> ID：15000412
> 
> 赞同：0
> 
> 时间：2013-02-21T10:54:26.360
> 
> 标签：php, android, mysql, android-async-http, getmethod

Hi i am using php to connect my android app to mysql but the get method is not passing the value to the php file.

This is my code.

```
private void executeAjaxRequest(){

       String url = mDataUrl+"?request="+mRequest+"&outlet_id="+mOutletID;
       Log.v("url",url);
      System.out.println("This is StoreActivity " +url);

       AsyncHttpClient httpclient = new AsyncHttpClient();
       httpclient.get(url, new AsyncHttpResponseHandler() {
         @Override
         public void onSuccess(String response) {
            setOutletData(response);
            Log.i("TAG",response);
         }
       });
     } 
```

It should pass the outletid and mrequest to the php file to get the data from the database.

Can you tell me where i am going wrong.

```
error_reporting(0);

    //$url = $_GET['url'];
    $mR = $_GET["mRequest"];
    $mOid = $_GET["mOutletID"];
    //$mloc = $_GET['mLocation'];
    //connect to the db
    //echo $mOid;
    $user = "root";
    $pswd = "";
    $db = "recommendations_db";
    $host = "localhost";
    $conn = mysql_connect($host, $user, $pswd);
    mysql_select_db($db);
    //if($mR == 'outlets' && $mloc = 'all'){
    $query = "SELECT outlet_id,outlet_name,outlet_location,outlet_image FROM outlets WHERE outlet_id = '$mOid'";
    $result = mysql_query($query) or die("Unable to execute query because : " . mysql_error());
    //echo $result ." ". $mOid;
    while($row = mysql_fetch_assoc($result))
    {
      $query2 = "SELECT a.item_id,a.item_name,a.item_image FROM items a,outlets b,recommendations c WHERE a.item_id = c.item_id AND b.outlet_id = c.outlet_id AND b.outlet_id = ".$row['outlet_id'];
       $row['recommended_products']=array();

        $result2 = mysql_query($query2) or die("Unable to execute query because : " . mysql_error());
        //echo $row;
        while($row2 = mysql_fetch_assoc($result2)){
            $row['recommended_products'][]=$row2;
            //echo $row;
        }

      $output[] = $row; 
    }
    print( json_encode($output) );
    mysql_close($conn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:32:43.470

你能在你的服务器上检索`request`and吗？`outletid`如果请求确实是 SQL 请求，则应该对它进行 url 编码，以避免使用一些潜在的“危险”字符截断 URL。

您应该覆盖方法`onFailure`from `AsyncHttpResponseHandler`以处理任何可能的错误。您还可以尝试使用`RequestParams`而不是将参数及其值放在 URL 中。你可以像这样使用它们：

```
 RequestParams params = new RequestParams();
    params.put("request", "mRequest");
    params.put("outlet_id", "mOutletID");
    AsyncHttpClient client = new AsyncHttpClient();
    client.get("URL", params, new AsyncHttpResponseHandler() {

        @Override
        public void onFailure(Throwable arg0, String arg1) {
            // Handle the error
        }

        @Override
        public void onSuccess(String arg0) {
            // Do stuff with the result
        }
    }); 
```

# java - JComboBox 中的 setSelectedItem 什么都不做

> ID：15000415
> 
> 赞同：0
> 
> 时间：2013-02-21T10:54:33.833
> 
> 标签：java, swing, user-interface, jcombobox

我的代码很简单............我希望当我按下按钮时将面板中所有标签的文本设置为“”（无）/正在工作/所有组合框的值为 1。//这是不工作。它仅将第一个 7 组合框设置`ArrayList amout`为值 1，其他组合框不会更改其值！

我没有做`modelcombobox!!`也许这就是原因！不知道，我是初学者

我的代码

```
 public class Bill extends JPanel {
 private JComboBox amount1=new JComboBox(new String[]{"-1","0","1", "2", "3", "4", "5",  "6", "7","8","9"});
    private JComboBox amount2=new JComboBox(new String[]{"-1","0","1", "2", "3", "4", "5", "6", "7","8","9"});
   .........some other labels, combobox......

    static ArrayList<JLabel> product=new ArrayList<JLabel>();
    static ArrayList<JComboBox> amout=new ArrayList<JComboBox>();
    static ArrayList<JLabel> pprice=new ArrayList<JLabel>();
    static ArrayList<JLabel> prprice=new ArrayList<JLabel>();

    .......ArrayList to hold labels and combobox.....

     private JButton jbtView = new JButton("STAMPAJ RACUN"); 
       //conctructor

     public Bill(){

              product.add(product1);
      product.add(product2);
      product.add(product3);
      product.add(product4);
      product.add(product5);
      product.add(product6);
      product.add(product7);

      pprice.add(jlb1);
      pprice.add(jlb3);
      pprice.add(jlb5);
      pprice.add(jlb7);
      pprice.add(jlb9);
      pprice.add(jlb11);
      pprice.add(jlb13);

      amout.add(amount1);
      amout.add(amount2);
      amout.add(amount3);
      amout.add(amount4);
      amout.add(amount5);
      amout.add(amount6);
      amout.add(amount7);

      prprice.add(jlb2);
      prprice.add(jlb4);
      prprice.add(jlb6);
      prprice.add(jlb8);

    ......add all labels, bomboboxes to ArrayList , make panels......//all works
      jbtView.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                 for (int j=0;j<Application.manu.size();j++){                    
                     if ((product.get(0).getText()).equals(Application.manu.get(j).getName()))//this is working
                        Application.manu.get(j).setCol(kol+Application.manu.get(j).getCol());//this is working

                       }

                 for (int j=0;j<prprice.size();j++){
                     prprice.get(j).setText("0.0");
                 }//this is working-set labels to ""

                  for (int i=0;i<product.size();i++){

                      product.get(i).setText("");//this is working-set labels to ""
                  }
                  for (int j=0;j<prprice.size();j++){
                         pprice.get(j).setText("");
                     }//this is working-set labels to ""

                  for (int j=0;j<amout.size();j++){

                          amout.get(j).setSelectedItem("1");//only first combobox set to value "1", others doesn't change

                        } 
                      UKUPNO.setText("0.0"); // doesn't set to "0.0", doesn't change 
```

有谁知道原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:58:16.370

尽管您没有向我们展示构造函数，但问题很清楚。您忘记将所有数量组合框添加到`amout`数组列表中。

如果这不是问题，请检查按下按钮时是否有任何异常。

# java - 访问struts 2 param标签内的请求属性？

> ID：15000418
> 
> 赞同：0
> 
> 时间：2013-02-21T10:54:39.050
> 
> 标签：java, jsp, struts2

我想访问`param`标签中的请求属性（名为“msg_key”）值。它返回空

```
 var message='<s:url attributes..><s:param name="msg_key" value="#request['msg_key']" /></s:url>'; 
```

虽然在属性标签中同样的工作

```
 var message1='<s:property  value="#request['msg_key']" />'; 
```

我没有得到如何访问参数标签内的请求属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:22:32.137

你可以这样做：

```
var message = '<s:url attributes../>'+'?'+ '<s:property  value="#request['msg_key']" />'; 
```

或者：

```
<s:url var="test" attributes..>
    <s:param name="msg_key" value="#request['msg_key']" />
</s:url>
var message = '<s:property value="#test"/>' 
```

# java - Using Eclipses Progress Monitor Window in a standalone Application

> ID：15000429
> 
> 赞同：0
> 
> 时间：2013-02-21T10:54:59.207
> 
> 标签：java, swt, jface, progressmonitor

I'm writing an SWT/JFace application and was wondering if it is possible to use the Progress Monitor Window from Eclipse in my standalone application. For clarification: I'm speaking of this:

![Progress Window](../Images/657f1bf9d3174b739804f9fcb5763706.png)

and not the `ProgressMonitorDialog`.

If this is not easily achievable, what would be an easy way to implement this for my own?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:00:30.513

I think this dialog is org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog

Although you won't be able to use it directly, you could download the source from Eclipse.org or via the Source link on this page:

[http://javasourcecode.org/html/open-source/eclipse/eclipse-3.5.2/org/eclipse/ui/internal/progress/ProgressMonitorJobsDialog.html](http://javasourcecode.org/html/open-source/eclipse/eclipse-3.5.2/org/eclipse/ui/internal/progress/ProgressMonitorJobsDialog.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:03:12.300

你可以尝试使用这个：

```
Dialog.getBlockedHandler().showBlocked(IProgressMonitor, IStatus, String) 
```

我过去用它来表明我的工作需要等待另一个工作完成。

# objective-c - How execute function on fixed time on mac os x?

> ID：15000430
> 
> 赞同：0
> 
> 时间：2013-02-21T10:55:03.033
> 
> 标签：objective-c, macos

I write a simple application for mac osx that works with system time to calculate some data, i want to run an specific routine every time clock come to 12:00
Is there any system api for this?
How i do this?

actually i have a status bar item in my app that show current day in month in any selected calendar like gregorian and islamic, and i want to this value will be sync with system time

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T17:44:40.303

如果您的例程是以下方法`- routine:(NSTimer *)timer`：`object`

```
NSTimeInterval now = [NSDate timeIntervalSinceReferenceDate]; // Current time
NSTimeInterval then = ((int)now + 86400) % 86400; // Next 12am
NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:then];
NSTimer *timer = [[NSTimer alloc] initWithFireDate:date interval:86400 target:object @selector(routine:) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

# php - Enable clean urls through htaccess - modrewrite in Drupal

> ID：15000431
> 
> 赞同：0
> 
> 时间：2013-02-21T10:55:13.090
> 
> 标签：php, drupal

I'm trying to set up a Drupal installation to be able to have clean urls. I have searched for the .htaccess-file in the root-folder, but haven't found it. In the phpinfo-file I created, I see under Loaded Modules mod_rewrite, so it is enabled on the server. I created a .htaccess-file which contained a simple

```
RewriteEngine On 
```

But when I ran the test under Configuration -> Search and metadata -> Clean URLs, it still failed. I then uploaded a .htaccess-file a friend sent me from a Drupal installation, but the test still failed.

What now?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:13:32.020

`.htaccess`for Drupal*比*单行复杂得多，我建议您下载 Drupal 的新副本并将文件`.htaccess`从根文件夹中取出并使用它。如果你找不到它，我建议打开隐藏文件，根据你的操作系统，有不同的方法可以做到这一点。

为了快速修复，添加这些行应该对您的问题进行排序：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^ index.php [L] 
```

# java - 使用变量调用 onclick 函数

> ID：15000434
> 
> 赞同：0
> 
> 时间：2013-02-21T10:55:21.570
> 
> 标签：java, javascript, html, jsp, onclick

```
...
<%
ArrayList<String[]> list = new ArrayList<String[]>();
int i = 0;
while (result.next()){...

%>
 ...

<input type="button" value="drehen"
 onclick="tauscheBild(**list, i**);">
         </div>
... 
```

我在调用 onclick 函数时尝试使用我的 Java 变量。我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:57:38.010

试试这个

```
onclick="tauscheBild('<%=VAR1%>', '<%=VAR2%>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:42:22.083

您需要在 JSP 中使用表达式标签。在这里找到您需要的信息。 [http://docs.oracle.com/javaee/5/tutorial/doc/bnaov.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnaov.html)

# iphone - 如何实现shutterstock Tiker？

> ID：15000436
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:55:36.423
> 
> 标签：iphone, ticker

我已经尝试过[MKTikcerView](http://www.cocoacontrols.com/platforms/ios/controls/mktickerview)、[DMScrollingTicker](http://www.cocoacontrols.com/controls/dmscrollingticker)并且还制作了[自定义 TickerView](https://stackoverflow.com/questions/14658616/subsequent-instances-of-a-uiview-subclass-causing-display-error)但是，我对此并不满意。所有这些在结束字符串时都显示空白。它们没有连续的对象显示。我也使用 UITableView 通过将其转换为水平来显示ticker 对象。但也有一个问题是某些单元格显示空白。

主要目标是，我想要一个像 iphone 中的下拉式快门库存这样的股票视图。它具有连续和更新的对象以及非常平滑的滚动。

截图如下：

![在此处输入图像描述](../Images/c87b0556618521d8ddeaf07ff61c9b18.png)

请任何人帮助我！谢谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:54:16.047

我在显示视图对象的自定义tickerView 中添加了一些改进。这里是文件： [StockTicker.h](http://pastebin.com/download.php?i=pXgx0vdg)和[StockTicker.m](http://pastebin.com/download.php?i=zsgTFc1d)。通过使用这些文件，您可以创建在tickerView 上显示的连续对象，并且可以轻松更新数据。您可以像使用 UITableView 一样使用这些文件。它有它的代表来传递 numberOfView 以显示在代码和视图上，该视图将显示在特定索引处。

将其代表用作：

```
#pragma mark- UITickerView delegate method

- (NSInteger)numberOfRowsintickerView:(StockTiker *)tickerView
{
        return [objectArray count];
}

- (id)tickerView:(StockTiker*)tickerView cellForRowAtIndex:(int)index
{
        return [objectArray objectAtIndex:index];
} 
```

这里 objectArray 是 UILabel 的数组。

您可以下载[SampleProject](https://github.com/ipreencekmr/REPOSITORY)。

# ipad - How to view Chrome browsing history on ipad?

> ID：15000437
> 
> 赞同：0
> 
> 时间：2013-02-21T10:55:42.003
> 
> 标签：ipad, google-chrome, google-chrome-extension, browser-history

I'm not sure which StackExchange site does this question belong to, so asking here.

**Update:**

There is no item 'History' in 'Chrome menu' as suggested here:

[http://support.google.com/chrome/bin/answer.py?hl=en-GB&answer=95589](http://support.google.com/chrome/bin/answer.py?hl=en-GB&answer=95589)

**Update-2**

It could possibly be done through extensions as suggested here:

["Your browsing history" on Google Chrome extension](https://stackoverflow.com/questions/6602489/your-browsing-history-on-google-chrome-extension?rq=1)

but Chrome web store seems to be unavailable for ipad.

# c# - I cannot navigate to the else part of if--else loop in my selenium webdriver script

> ID：15000439
> 
> 赞同：-2
> 
> 时间：2013-02-21T10:55:51.150
> 
> 标签：c#, selenium-webdriver, if-statement

I have a selenium Webdriver script that has if else loops. When I execute the script, the code always stops at the first if condition and does not move to the else part at all. And then i get an Exception as the if condition is false. Is there any way out to work around the looping part in selenium web driver? I am using C# for coding. Thanks in Advance.

Following is the looping structure i have used in my script:

```
 if (driver.FindElement(By.Id("ctl00_ContentMain_Label_Error")).Text.Contains("The username is already registered with Current Brand"))
{
    //take a screen shot
}

else if (driver.FindElement(By.Id("ctl00_Label_WelcomeMessage")).Text == "You are not currently signed in")
{
    //take a screen shot
}
else if (driver.FindElement(By.Id("ctl00_ContentLeftNav_UserNavBar_MenuItemLogOut")).Text == "Log Out")
{

//take a screenshot
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:25:12.630

实际上，在发布的代码中，您尝试比较从中检索到的文本`driver.FindElement(By.Id("ctl00_Label_WelcomeMessage")).Text`和您的`own text`.

您从代码中获得的文本返回一个`String`数据类型。因此，您可以使用字符串操作概念来比较字符串数据类型。使用`equals`,`equalsIgnoreCase`等`contains`...

**尝试这个：**

```
 else if (driver.FindElement(By.Id("ctl00_Label_WelcomeMessage")).Text.equals("You are not currently signed in"))
{
//take a screen shot
} 
```

代替

```
else if (driver.FindElement(By.Id("ctl00_Label_WelcomeMessage")).Text == "You are not currently signed in")
{
//take a screen shot
} 
```

# mysql - 如何计算存储过程的结果

> ID：15000443
> 
> 赞同：0
> 
> 时间：2013-02-21T10:56:05.263
> 
> 标签：mysql

该程序运行正常。我需要的是对程序的结果进行行计数。

```
DROP PROCEDURE `tradematch`//
CREATE DEFINER=`root`@`localhost` PROCEDURE `tradematch`(IN `pid` INT)
BEGIN 
SELECT p.company_name,p.company_info,pc.contact_address,pc.mobilenumber,p.idprofile,b.businesstype 
FROM profile p,profile_contact pc,businesstypelkp b 
WHERE p.idprofile=pc.idprofile_contact 
AND p.business_type=b.idbusinessTypeLKP 
AND p.idprofile not in (SELECT p.idprofile FROM profile p WHERE FIND_IN_SET(idprofile,(select Group_Concat(member_list) as group_members from groupmemberlkp where profile_id=pid))) AND FIND_IN_SET(idprofile,(SELECT group_concat(p.profileid) from products_profile p where FIND_IN_SET(product_id,(SELECT group_concat(product_id) FROM `rawmaterial_profile` WHERE profileid=pid))AND p.profileid!=pid));
END// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:07:38.403

您可以使用`OUT`参数和 SQL_CALC_FOUND_ROWS <--> FOUND_ROWS() 组合。[你可以在这里](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_found-rows)阅读更多关于它的信息。

```
DROP PROCEDURE `tradematch`//
CREATE DEFINER=`root`@`localhost` PROCEDURE `tradematch`(IN `pid` INT, OUT result INT)
BEGIN 
SELECT SQL_CALC_FOUND_ROWS p.company_name,p.company_info,pc.contact_address,pc.mobilenumber,p.idprofile,b.businesstype 
FROM profile p,profile_contact pc,businesstypelkp b 
WHERE p.idprofile=pc.idprofile_contact 
AND p.business_type=b.idbusinessTypeLKP 
AND p.idprofile not in (SELECT p.idprofile FROM profile p WHERE FIND_IN_SET(idprofile,(select Group_Concat(member_list) as group_members from groupmemberlkp where profile_id=pid))) AND FIND_IN_SET(idprofile,(SELECT group_concat(p.profileid) from products_profile p where FIND_IN_SET(product_id,(SELECT group_concat(product_id) FROM `rawmaterial_profile` WHERE profileid=pid))AND p.profileid!=pid));

SET result:=FOUND_ROWS();

END// 
```

然后当你执行查询时：

```
CALL yourProcedure(yourId, @whatever);
SELECT @whatever; 
```

通过这种方式，该过程显示结果，并且第二次`SELECT`获得行数。如果您不需要显示查询结果，那么问题是，您是否需要存储过程。

# php - 视觉跟踪路由类似于“yougetsignal.com”，如何按需/定期更新 div

> ID：15000445
> 
> 赞同：0
> 
> 时间：2013-02-21T10:56:12.647
> 
> 标签：php, javascript, ajax, traceroute

这是我在论坛上的第一个问题，我认为 ;-)。我会尽量清楚地回答这个问题。

我正在尝试构建一个类似于 kirk ouimet 在 yougetsignal.com 上的可视化跟踪路由。

它实际上已经在使用 bash (traceroute,ping,host,) php/javascript，但是我在使用 Javascript/AJAX 时遇到了一些问题。

Kirk 定期或通过跟踪右侧的某种 ajax 中断更新跟踪的主机列表。我只知道如何用一个单一的 Javascript xmlhttp-call 一次性完成，然后将一个表回显到一个标准的 w3school-livesearch-DIV 中。

[http://www.yougetsignal.com/tools/visual-tracert/](http://www.yougetsignal.com/tools/visual-tracert/)

我也不知道他是否使用像 linux 的“traceroute”这样的 cmd-line-tool 来执行 traceroute。我的工作正常，首先是跟踪路由，然后使用“主机”进行反向查找，然后再次 ping 列表中的所有主机以获取 rrt。

有没有办法轮询 txt 文件（跟踪），然后根据需要将输出回显到 DIV？

我很感激任何提示。

斯特凡

ps：google-maps 绘图工作正常，它是关于根据用户（和我）的需求更新跟踪主机的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:47:39.983

使用 jQuery 进行 ajax 调用可以做什么：

```
setInterval(function () {
    $('#yourdiv').load('http://domain.com/yourfile');
}, 30000); 
```

此代码将每 30 秒将预生成的 html 内容加载到指定的 div 容器中。如果您不加载临时生成的 html/php 内容，您可以构建一个 API，然后每次将动态返回的数据添加到 DOM 上。

```
setInterval(function () {
    $.getJSON('yourAPIUrl', function (data) {
        $.each(data, function (item) {
            // do something with the retrieved data, add it to the DOM for example
        }
    });
}, 30000); 
```

# c# - Web API + PowerPivot with dynamic entities

> ID：15000453
> 
> 赞同：1
> 
> 时间：2013-02-21T10:56:56.543
> 
> 标签：c#, asp.net-web-api, odata, powerpivot

Since ASP.Net 2012.2 was released I have been attempting to create a Web API which returns OData which in turn can be consumed by PowerPivot. I have this working with a predefined model.

However I have a scenario whereby I will not know the number of properties prior to the request being made. What I would like to do is be able to execute a stored procedure to get a DataTable and be able to return the contents of this DataTable as odata.

My initial attempts with returning an `IQueryable<DataRow>` ended up with the following response.

```
Response, Status=406 (NotAcceptable), Method=GET, Url=http://localhost:43438/odata/Products, Message='Content-type='none', content-length=unknown' 
```

I have since attempted to use `ExpandoObject` to create a dynamic object to represent the contents of the DataTable however this also gives the response above.

Is there a feasible way to use a dynamic number of properties and serialize this to OData?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T20:17:58.490

您应该构建 EDM 模型并添加 OData 路由。有关公开 odata 服务的 3 个步骤，请参阅此[博客文章](http://blogs.msdn.com/b/webdev/archive/2013/01/29/getting-started-with-asp-net-webapi-odata-in-3-simple-steps.aspx)。

# ruby - Key check in ruby whether the enter key is char or digit

> ID：15000456
> 
> 赞同：1
> 
> 时间：2013-02-21T10:57:07.283
> 
> 标签：ruby, for-loop, key, conditional-statements, do-while

I have a program in ruby which asks to enter a number. When I enter a char, I want to terminate the loop and show sum of all entered integers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:21:25.813

您可以通过以下方式检查输入的内容是否为数字：

```
i = gets.chomp  # Reading input
return unless i =~ /\d/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:03:33.767

实现这一目标的最紧凑的方法是这样的：

```
numeric = true if Integer(key) rescue false 
```

然后检查`numeric`变量。

如果您愿意，我可以解释该行中究竟发生了什么，但您可以先尝试自己实现。

# facebook - Using Facebook/Gmail Login? Can I access profile details?

> ID：15000458
> 
> 赞同：1
> 
> 时间：2013-02-21T10:57:09.593
> 
> 标签：facebook, api

If i get someone to login to my website/mobileApp using Facebook can I access his profile details? How?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:13:59.517

是的，你可以。您只需要请求权限：

例如，对于 Facebook，使用 jQuery 你可以这样做：

1- 在 facebook 开发者处创建一个应用程序并获取他的 id ( [http://developers.facebook.com/](http://developers.facebook.com/) )。

2-调用 facebook Javascript SDK：

```
<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js"></script>
<script>
   window.fbAsyncInit = function() {
      FB.init({
          appId: 'YOUR_APP_ID', 
          status: true, 
          cookie: true, 
          xfbml: true
      });
    };
</script> 
```

3-调用facebook登录功能：

```
<div id="myFbloginBt">Login with facebook</div>
<script>
$(document).ready(function(){
   $("#myFbloginBt").click(function(){
      loginFacebook();
   });
});

function loginFacebook(){

    FB.login(function(response) {
        if (response.authResponse){
            //Get logged user info
            FB.api('/me', function (response) {
                    alert(response.email);
            });
        }
        else{
            alert("Please accept the permissions");
        }
    }, { scope: 'email'});
}
</script> 
```

范围是您想要访问并需要许可的东西。您可以在此处查看所有范围变量：http: [//developers.facebook.com/docs/reference/login/#permissions](http://developers.facebook.com/docs/reference/login/#permissions)

# panda3d - 如何更改 Panda3D 中的窗口大小？

> ID：15000460
> 
> 赞同：7
> 
> 时间：2013-02-21T10:57:14.353
> 
> 标签：panda3d

**Panda3D**程序以特定窗口大小打开。**我在GraphicsWindow**中找不到任何设置或更改窗口大小的调用。

如何更改窗口大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T03:44:28.973

您可以在[Config.prc](http://www.panda3d.org/manual/index.php/Configuring_Panda)文件中更改初始窗口大小，或者您可以在主 python 文件中添加以下代码：

```
from panda3d.core import loadPrcFileData 

loadPrcFileData('', 'win-size 1024 768') 
```

如果您想在运行时更改窗口大小，以下代码应该可以解决问题：

```
w, h = 1024, 768 

props = WindowProperties() 
props.setSize(w, h) 

base.win.requestProperties(props) 
```

希望能帮助到你。

# ruby - 如何在启用 env 和警告的情况下运行 Ruby 脚本？

> ID：15000461
> 
> 赞同：5
> 
> 时间：2013-02-21T10:57:15.390
> 
> 标签：ruby, warnings

我更喜欢使用 hash bang line 调用 Ruby 脚本，`#!/bin/env ruby`这允许我使用本地 Ruby 安装，而不会与系统 Ruby 安装冲突。但是如何在 Linux 系统上启用警告呢？我的测试脚本：

```
#!/usr/bin/env ruby -w

FOO 
```

在 Mac 上我得到：

```
maasha@mel:~$ ./test.rb
./test.rb:3: warning: possibly useless use of a constant in void context
./test.rb:3:in `<main>': uninitialized constant FOO (NameError) 
```

在 Linux 上，我得到：

```
maasha@orsted:~$ ./test.rb
/usr/bin/env: ruby -w: No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-27T16:03:49.977

`#!/usr/bin/env RUBYOPT=-w ruby`

正如[这个答案](https://stackoverflow.com/a/33902713/776723)、[这个答案](https://superuser.com/a/280937/175529)和其他地方所建议的那样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-03T00:51:02.493

我的第一个答案不适用于所有系统，所以这里有另一种方法：让你的第一个非评论行

```
$VERBOSE = true 
```

这就是`-w`开关的作用。来自[http://linux.die.net/man/1/ruby](http://linux.die.net/man/1/ruby)：

> -v'
> 
> --verbose' 启用详细模式。Ruby 将在开始时打印其版本，并将变量 $VERBOSE 设置为 true。如果此变量为真，某些方法会打印额外的消息。如果给出了这个开关，并且没有其他开关存在，Ruby 会在打印其版本后退出。
> 
> -w' 启用详细模式而不在开头打印版本消息。它将 $VERBOSE 变量设置为 true。

# asp.net - 使用 system.windows.forms 参考未显示 asp.net 4.0

> ID：15000470
> 
> 赞同：1
> 
> 时间：2013-02-21T10:57:49.127
> 
> 标签：asp.net, reference, shared-libraries

我正在尝试添加对问题中所述库的引用。但它在库参考的“windows”部分引发错误。谁能帮我。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:01:11.943

第 1 步：转到“解决方案资源管理器”

第2步：右键单击“添加参考”

第 3 步：在“.net”选项卡中搜索“System.Windows.dll”或“System.Windows.Forms.dll”的参考（不知道哪个存在，但我更喜欢后者）和添加它。

这应该可以解决您的问题。

# android - 排序时如何在Android中添加标题栏？

> ID：15000474
> 
> 赞同：0
> 
> 时间：2013-02-21T10:57:56.200
> 
> 标签：android, sorting, spinner

这是我的代码：

```
public class MainActivity extends Activity {
    Spinner spin;
    TextView tex;
    String[] country = {"A", "Afghanistan", "Albania", "Etc"};// A to Z country names
    String[] code = {"+93", "+91", "Etc"}; // A to Z country Code

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        spin = (Spinner)findViewById(R.id.spinner1);
        tex = (TextView)findViewById(R.id.tex);

        ArrayAdapter aa1 = new ArrayAdapter(this, android.R.layout.simple_spinner_item, country);
        aa1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spin.setPrompt("Select the Country");
        spin.setAdapter(aa1);
        spin.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                tex.setText(code[arg2]);
                // tex.setText(country[arg2]);
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
            }
        });
    }
} 
```

我想在微调器上按字母顺序显示国家/地区列表。在此之前它应该显示 A、B、C 到 Z。但是这个 A 到 Z 在微调器列表中必须是不可选择的模式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:25:29.690

您必须创建扩展 ArrayAdapter 的自定义适配器。

这可能很容易，例如：

```
 // the get view on your adapter
getView(LayoutInflater, etc, etc){
   convertView = super.getView(inflater, etc, etc);
   if(getItem(position).equals("A") || getItem(position).equals("B") || // etc, or create some clever way to go through a ArrayList with just the letters ){
      convertView. // set not clickable stuff
     }
} 
```

但我认为 Spinner 仍然会在用户单击时关闭列表。也许您必须覆盖微调器 OnItemClick 以获得连贯的行为。

# php - 如何收集设计横幅的代码

> ID：15000475
> 
> 赞同：0
> 
> 时间：2013-02-21T10:57:58.370
> 
> 标签：php, html, mysql

我有一个简单的表单，它为用户网站设计一个横幅它有配色方案、链接和链接颜色水平横幅或垂直横幅等用户通过从下拉框中选择值来选择他想要的横幅并提交存储在 mysql 数据库中的数据现在我想要的是收集这些数据并将其发送给用户，以便在他的网站上显示横幅现在如何制作该 HTML 代码包我知道如何通过电子邮件从 PHP 发送它但问题是如何制作的html代码包然后发送给他

任何文章都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:43:57.380

您可以使用一些 HTML 模板作为横幅。它将根据用户设置的值而变化。

# oracle - Oracle 数据库设计视图或表？

> ID：15000476
> 
> 赞同：0
> 
> 时间：2013-02-21T10:58:02.283
> 
> 标签：oracle, database-design, view

我是数据库设计的新手，在尝试设计数据库时遇到了问题。这是我的系统：有 3 个不同的软件（SW_A、SW_B、SW_C）和 500-600 个用户。每个用户都可以使用任何软件并做一些工作。每件作品大约会被发送到数据库。每分钟 6 次。（用户和软件随机）我想要一个数据库来保存与软件相关的所有用户操作以进行存档，并且还想跟踪与这些软件相关的所有用户的即时操作。（仅针对每个软件的不同用户的最新操作）

所以我设计了某事。像那样：

表：SW_X_DATA_ARCHIVE

列 ：

*   用户身份
*   数据_日期
*   SW_A_ActionID

表：SW_X_INSTANT_DATA

列：

*   用户身份
*   数据_日期
*   SW_X_ActionID

当新数据到来时，如果该 UserID 存在，它会更新 INSTANT_DATA 表的相关行，如果不存在则插入带有 UserID 和数据的新行。然后将相同的数据插入到 DATA_ARCHIVE 表中。

问题是：这种工作有更好的方法吗？意见也许？ *（我读过一些关于物化视图的文章，但不知道如何在这里使用它。）* 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:21:21.413

`Only the latest action for distinct users for each software`

您的 INSTANT 表应该在 (USERID,SOFTWAREID) 上有一个唯一的复合键，这样就不可能有超过一行与用户对软件的使用有关。

ARCHIVE 表不需要这样的唯一键或约束。

`insert`如果 (USERID, SOFTWARE) 的行不存在，或者`update`该行已经存在，您将进入 INSTANT。

通常，插入/更新触发器将放置在 INSTANT 表上，以便在 INSTANT 发生更改时将一行插入 ARCHIVE。

编辑：或者，您可以维护一个表，并拥有一个视图，该视图仅选择每个用户每个软件的最新操作。您需要为每个操作加上时间戳，并在 (USERID,SOFTWAREID) 上放置一个复合索引（非唯一）。采用哪种方法的决定可能基于相对性能。如果经常需要最新操作信息，我倾向于使用触发器。

# excel - Word 中链接的 Excel 对象/范围的动态范围

> ID：15000478
> 
> 赞同：0
> 
> 时间：2013-02-21T10:58:06.573
> 
> 标签：excel, ms-word, pivot-table

我有一个 Excel 数据透视表链接我的 Word 报告。当获得更多数据时，数据透视表会增长。但是，当数据透视表大小发生变化时，它不会反映在 Word 文件中。word 文件始终显示原始选定范围。所以我必须手动更新链接范围。

有没有办法解决这个问题或只是努力？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:52:05.040

以下是我解决此问题的解决方案。1\. 为数据透视表创建一个命名范围。2.将Word文件中的Linked Range绝对地址改为Named Range

=================

注意1：可以通过Excel“偏移”功能为数据透视表创建命名范围。但是，当同一张表中有更多数据时，偏移功能并不完美。所以我为此创建了自己的 Excel 函数。

```
Function PVRange1(Sheet_Name, Pivot_Name) As Range
'Returns a Range object that represents the range containing the entire PivotTable report, but doesn’t include page fields.
'
Dim pvt As PivotTable

Set pvt = Worksheets(Sheet_Name).PivotTables(Pivot_Name)
Set PVRange1 = pvt.TableRange1

End Function

Function PVRange2(Sheet_Name, Pivot_Name) As Range
'Returns a Range object that represents the range containing the entire PivotTable    report, including page fields.

Dim pvt As PivotTable

Set pvt = Worksheets(Sheet_Name).PivotTables(Pivot_Name)
Set PVRange2 = pvt.TableRange2

End Function 
```

# ios - 与 ECSlidingController 一起使用时阴影不可见

> ID：15000480
> 
> 赞同：1
> 
> 时间：2013-02-21T10:58:11.637
> 
> 标签：ios

我`ECSlidingController`在我的 iOS 应用程序中使用。我已经检查了要求和演示。ECSlidingController 按我想要的方式工作，但仍然无法为视图添加任何阴影。

这是我所做的，这是基本视图控制器（`DetailViewController`是一个 UIViewController），它将触发滑动视图及其名称`DetailContextViewController`（左或右根本不重要）：

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    self.view.layer.shadowOpacity = 0.75f;
    self.view.layer.shadowRadius = 10.0f;
    self.view.layer.shadowColor = [UIColor blackColor].CGColor;

    if (![self.slidingViewController.underRightViewController isKindOfClass:[DetailContextViewController class]]) {
        self.slidingViewController.underRightViewController  = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailAbout"];
    }
} 
```

这是 DetailContextViewController（这也是一个 UIViewController）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.peekLeftAmount = 40.0f;
    [self.slidingViewController setAnchorLeftPeekAmount:self.peekLeftAmount];
    self.slidingViewController.underRightWidthLayout = ECVariableRevealWidth;
} 
```

我已经添加`QuartCore.h`并检查了 TabBar 的属性，即剪辑子视图是`false`. 我也尝试过使用阴影`TableView`，所以用 self.tableView.layer 更改了 self.view.layer 并且无法再次设置阴影。

有什么不对的吗？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:00:16.373

我不知道你在哪里设置`topViewController`，但你需要将阴影参数设置为你的`topViewController`. 例如：

```
self.slidingViewController.topViewController = newTopViewController;
newTopViewController.view.layer.shadowOpacity = 0.75f;
newTopViewController.view.layer.shadowRadius = 10.0f;
newTopViewController.view.layer.shadowColor = [UIColor blackColor].CGColor; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T03:19:08.997

```
 self.slidingViewController.topViewController = newTopViewController;
    self.slidingViewController.topViewController.view.layer.shadowOpacity = 0.75f;
    self.slidingViewController.topViewController.view.layer.shadowRadius = 10.0f;
    self.slidingViewController.topViewController.view.layer.shadowColor = [UIColor blackColor].CGColor; 
```

这样会更好。有时，newTopViewController 是 UINavigationController。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T18:39:35.583

问题可能是topViewController 是一个UINavigationController。我遇到了同样的问题，并通过将阴影添加到 UINavigationController 视图而不是 UIViewController 视图来修复它。例如，而不是：

```
self.view.layer.shadowOpacity = 0.75f;
self.view.layer.shadowRadius = 10.0f;
self.view.layer.shadowColor = [UIColor blackColor].CGColor; 
```

改为这样做：

```
self.navigationController.view.layer.shadowOpacity = 0.75f;
self.navigationController.view.layer.shadowRadius = 10.0f;
self.navigationController.view.layer.shadowColor = [UIColor blackColor].CGColor; 
```

与创建自己的阴影层相比，这非常简单，而且我没有看到任何性能问题。

# java - 我如何能够使用带有 Pcap.LOOP_INFINITE 参数的 pcap.loop() 将捕获的数据包打印到 JTextArea 中？

> ID：15000485
> 
> 赞同：0
> 
> 时间：2013-02-21T10:58:22.390
> 
> 标签：java, swing, pcap, libpcap, jnetpcap

我`JNetPcap`对它很陌生，我仍在寻找解决方法，我正在尝试为我的项目构建一个数据包嗅探器，最近我正在尝试通过将我`JTextArea`的信息附加到 a 中来打印数据包信息`pcap.loop()`使用，但是当我使用特定整数值设置第一个参数时，假设 5`pcap.loop()`输出已捕获的 5 个数据包，现在我想要的是连续捕获并输出数据包，直到我按下按钮停止。下面的语法显示了数据包处理程序。

```
PcapPacketHandler<String> jpacketHandler = new PcapPacketHandler<String>() {  

  public void nextPacket(PcapPacket packet, String user) {  

   // System.out.printf is included to check if my code works in a non GUI fashion
   System.out.printf("Received packet at %s caplen=%-4d len=%-4d %s\n",  
                     new Date(packet.getCaptureHeader().timestampInMillis()),   
                     packet.getCaptureHeader().caplen(),  // Length actually captured  
                     packet.getCaptureHeader().wirelen(), // Original length   
                     user                                 // User supplied object  
                      );
                     Date a = new Date(packet.getCaptureHeader().timestampInMillis());
                      int b = packet.getCaptureHeader().caplen();
                      int c = packet.getCaptureHeader().wirelen();
                      String d = user;

                      pcktTextArea.append("Received packet at " + a + " caplen=" + Integer.toString(b) + " len=" + Integer.toString(b) + user + "\n" );
                      pcktTextArea.setForeground(Color.red);
                      pcktTextArea.setFont(font);
                    }  
                }; 
```

现在这里是我的 pcktTextArea，我用它`append`来打印出 textarea 中的信息：

```
 pcktTextArea.append("Received packet at " + a + " caplen=" + Integer.toString(b) + " len=" + Integer.toString(b) + user + "\n" );
   pcktTextArea.setForeground(Color.red);
   pcktTextArea.setFont(font); 
```

最后`Pcap.loop`，我遇到了麻烦，如果我用 let say 5 替换它，它确实会打印在其中，`JTextArea`但是当我放置`Pcap.LOOP_INFINTE`它时，它只通过控制台打印信息，而不是在 GUI JTextArea 中打印信息：

```
 int i = Pcap.LOOP_INFINITE;

    pcap.loop(i , jpacketHandler, " ");  

    /*************************************************************************** 
     * Last thing to do is close the pcap handle 
     **************************************************************************/  
    pcap.close(); 
```

是因为它必须在将信息打印到 Textarea 之前完成循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:30:40.693

我假设您在线程中运行代码。用于 `SwingUtilities.invokeAndWait`调用`pcktTextArea.append()`代码

# objective-c - 在视图控制器之间传递数据

> ID：15000486
> 
> 赞同：0
> 
> 时间：2013-02-21T10:58:21.893
> 
> 标签：objective-c, uiviewcontroller

我对 Objective C 和 xCode 还很陌生，所以请原谅我。

我在故事板中设置了两个视图控制器，我使用以下代码移动到另一个：

```
UIStoryboard * storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController * viewController = [storyBoard instantiateViewControllerWithIdentifier:@"stageOne"];
[self presentViewController:viewController animated:YES completion:nil]; 
```

现在这很好用，尽管在控制第二个视图控制器的类中我有一个属性设置，我试图将数据发送到。我正在尝试以下操作：

```
UIStoryboard * storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController * viewController = [storyBoard instantiateViewControllerWithIdentifier:@"stageOne"];
viewController.forename = @"Hello World";
[self presentViewController:viewController animated:YES completion:nil]; 
```

虽然这不起作用，我得到的只是一个错误“在'UIViewController'类型的对象上找不到属性'名字'”。

感谢您提供任何帮助，如果您能给我一些示例代码，那将是非常棒的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:02:30.010

基本上，为了在 2 个控制器之间传递数据，您可以使用 2 种设计模式：[委托](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW20)或[观察者。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW20)

在您的情况下，您使用委托。`forename`您的头文件中有名称的公共财产吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:09:13.910

您的代码的问题是您访问尚未在内存中创建的 uicontrols。您必须像这样更改语句的执行顺序...

```
UIStoryboard * storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
holidayQuestion * viewController = [storyBoard instantiateViewControllerWithIdentifier:@"stageOne"];

[self presentViewController:viewController animated:YES completion:nil];
viewController.forename = @"Hello World"; 
```

# highstock - HighStock - 缺少 yAxis 刻度和平面值标签

> ID：15000489
> 
> 赞同：0
> 
> 时间：2013-02-21T10:58:25.720
> 
> 标签：highstock

当我尝试使用 HighStock 图表显示平面值时，Y 轴上的刻度和标签会消失，如以下链接所示：

[http://jsfiddle.net/garlam/VmwAQ/](http://jsfiddle.net/garlam/VmwAQ/)

```
$(function() {
var chart = new Highcharts.StockChart({

    chart: {
        renderTo: 'container'
    },

    rangeSelector: {
        selected: 1
    },

    yAxis: {
        title: {
            text: 'test-values'
        }
    },

    series: [{
        name: 'test',
        data: [ { x: 1361443380000, y: 10}, { x: 1361443410000, y: 10}, { x: 1361443440000, y:10}, {x:1361443470000, y:10} ]
    }]
});
}); 
```

我想避免设置 y 轴最小值

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:55:21.007

您可以设置最小值/最大值

```
yAxis: {
        min:0,
        max:20,
        title: {
            text: 'test-values'
        }
    }, 
```

# java - Spring Roo 1.23 和 TIMESTAMP 字段

> ID：15000492
> 
> 赞同：0
> 
> 时间：2013-02-21T10:58:31.417
> 
> 标签：java, spring, javabeans, spring-roo

我正在使用 spring、hibernate 和 dbms oracle。

我在使用 spring roo v1.23 时遇到了下一个问题：

当我使用**时间戳进行****数据库逆向工程**数据库管理方面时，字段正在生成**日历**类型。在此之后，我需要手动在**日期类型上配置我的 bean。**roo 1.22 版根据需要生成**日期**类型。

 ******是否可以让 spring roo 1.23 为时间戳字段工作为 1.22 ？******

# jquery - jQuery的内部列表条件

> ID：15000493
> 
> 赞同：0
> 
> 时间：2013-02-21T10:58:33.080
> 
> 标签：jquery, conditional-statements, meta

`META`如果标签的内容包含在单词列表中，我正在尝试构建一个触发特定事件的 jQuery 函数。

我试过了：

```
<meta name="sun" content="a" >

<script>

$('meta[name=sun]').each(function(){
    var metacontent = $(this).attr("content");
    var list = ["a","b","c"];

if(metacontent.match(list)) { //that is wrong I guess
    console.log("hi");

}
});
</script> 
```

你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:01:52.483

你可以试试 jQuery 实用函数 $.inArray

```
if($.inArray(metacontent, list) >= 0) {
..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:02:25.327

```
function checkMeta(name, list) {
    var metacontent = $('meta[name="' + name + '"]').attr('content');

    return ($.inArray(metacontent, list) >= 0);
}

$(document).ready(function() {
    var list = ["a","b","c"];

    console.log(checkMeta('sun', list));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:06:08.153

您可以尝试以下代码：

```
<meta name="sun" content="a" >

<script>

$('meta[name="sun"]').each(function(){
    var metacontent = $(this).attr("content");
    var list = ["a","b","c"];

$.each(list, function(index, elem){
var matches = metacontent.match(/elem/g);

if(matches.length > 0){
  //it contains a list character
}else{
  //no list character found inside the metacontent
}
});

});
</script> 
```

# ember.js - 我怎样才能得到我以前的路线？

> ID：15000494
> 
> 赞同：18
> 
> 时间：2013-02-21T10:58:36.233
> 
> 标签：ember.js, ember-router

如何在当前控制器中获取以前的路由器。

```
App.MyController = Em.ObjectController.extend({
    next:function() { // This is my action helper in HBS
        this.transitionTo('nextPage');
    },
    back:function() { // This is my action helper in HBS
        // Here I need to dynamically identify my previous route.
        // How can I get my previous route.
    }
}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-21T17:15:36.670

再次检查路由器对象后，我看不到任何可以让您获取最后一条路由的属性。在前 4 中，最后一条路线有一个属性，但它是一个难以使用的属性。

因此，我的解决方案与前 4 中的解决方案相同：我将创建自己的 mixin 来处理您导航到的路线，并且从该路线列表中，您可以获得您想要的任何路线：当前路线，最后一个，等等……

jsFiddle在这里：http: [//jsfiddle.net/sMtNG/](http://jsfiddle.net/sMtNG/)

**米信**

首先要做的是创建允许我们将路由推送到`HistoryController`. 我们可以通过创建一个`setupController`方法来做到这一点，当然每次您进入路线时都会调用该方法。

```
App.HistoryMixin = Ember.Mixin.create({
    setupController: function() {
        this.controllerFor('history').pushObject(this.get('routeName'));
    }
}); 
```

我们正在将路线推入`HistoryController`.

**历史控制器**

由于我们目前正在将其推`routeName`入一个不存在的`HistoryController`，我们需要继续创建它，这绝对没有什么特别的。

```
App.HistoryController = Ember.ArrayController.extend(); 
```

**索引控制器**

由于`HistoryController`存储了我们导航到的路由列表，我们需要它可以在其他控制器上访问，例如`IndexController`，因此我们将使用`needs`它来指定应该在哪个控制器中访问它。

```
App.ApplicationController = Ember.Controller.extend({
    needs: ['history']    
}); 
```

**实现 Mixin**

我们现在拥有了跟踪路由所需的一切，因此我们将指定我们的路由需要实现这个 mixin。

```
App.CatRoute = Ember.Route.extend(App.HistoryMixin); 
```

**模板**

最后但同样重要的是，现在我们有了`HistoryController`可以`IndexController`访问的路由，并且 mixin 将每个访问的路由推送到 中`HistoryController`，我们可以使用应用程序视图输出路由列表，并指定最后一个路由。当然，在您的情况下，您将需要最后一条路线减一，但是我做所有事情都没有意义！

```
<h1>Routes History ({{controllers.history.length}})</h1>
<ul>
    <li>Last Route: {{controllers.history.lastObject}}</li>
    {{#each controllers.history}}
        <li>{{this}}</li>
    {{/each}}
</ul> 
```

我希望这能让你走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-02T16:49:50.833

当前的解决方案感觉就像是在摇尾巴。

简单的解决方案是`window.history.back()`

Ember 不跟踪路由器历史记录，因为它是多余的。默认情况下，所有浏览器都已处理此问题。

# php - 在 AJAX 成功时将 JSON 对象发送到 PHP

> ID：15000496
> 
> 赞同：1
> 
> 时间：2013-02-21T10:58:46.950
> 
> 标签：php, ajax, json, codeigniter, associative-array

在我的`Controller`我有一个数组`$data`，其 var dump 如下：

```
array
  'urls' =>
    array
      0 =>
        array
          'link_id' => string '1' (length=1)
          'link_name' => string 'http://www.nytimes.com' (length=22)
  'words' =>
    array
      0 =>
        array
          'keyword_id' => string '1' (length=1)
          'keyword' => string 'republican' (length=10) 
```

### 数组结构：

$ data 将只有`urls`，`words`但它们可以有多个值。两者都不会具有相同的基数。

然后我将其编码为`echo json_encode($data);`in`displayData`并将其发送到 ajax。`displayData`不需要 POST 数据。中发出的ajax请求`View`如下：

```
$.ajax({
    url:"http://localhost/codeigniter/SiteController3/displayData",
    success: function(response){
        alert(response);
        $("#user_data").html(response);
    },
    dataType:"json"
}) 
```

*   我想**`response`**在我的“视图”中访问，以便我可以执行`json_decode($response, true)`并获取关联数组。
*   有一段代码通过在数组上循环以表格格式呈现这些数据。在此代码之前，我想获取关联数组。
*   我尝试使用`$.getJSON`而不是`$.ajax`但没有解决方案。也尝试过`$.each`功能，但在警报时只得到`undefined`. 哪个 `JSON.stringify`警报显示 JSON 但无法将其发送到 PHP 代码。

**编辑：**

## *@fragmentedreality 的回答*

使用答案解决了内容类型的不一致。**但是，我****如何访问在 AJAX 成功时收到的响应，其中有一大块用于以表格格式显示数据的 PHP 代码？`html body``View`**

## 解决方案：

在下面检查我的[答案](https://stackoverflow.com/questions/15000496/send-json-object-to-php-on-ajax-success/15007999#15007999)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:38:28.087

添加

```
header('content-type: application/json'); 
```

到您的控制器（在 之前`echo`）为您的应用程序的响应设置正确的 mime 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:58:48.437

最后我放弃了这种`JSON`方法。`displayData`我在 的方法中添加了以下行`Controller`：

```
$this->load->view('data_processing', $data); 
```

The `data_processing.php` is a new `View` that generates the HTML table I wanted to display. The response of this `View` is loaded in my original `View` by the following AJAX request:

```
$.ajax
({
    url: "http://localhost/codeigniter/SiteController3/displayData",
}).done(function(data)
    {
         console.log(data);
         $('#user_data').html(data); 
    } 
```

# c# - 使用 C# 在两台 PC 之间流式传输数据，无需 IP 网络

> ID：15000500
> 
> 赞同：2
> 
> 时间：2013-02-21T10:58:57.837
> 
> 标签：c#, windows, usb, firewire

对于我正在做的一个项目，我需要在*不使用 IP 网络的情况下将*数据从一台 Windows 计算机流式传输到另一台计算机（例如，包括交叉链接的以太网电缆）。

流应用程序应该用 C# 编写，但如果需要，我可能会使用 C# 包装器。

我考虑过 USB 连接电缆和 Firewire，但到目前为止，我还没有找到任何驱动程序来通过它们发送自定义数据。

以前有人尝试过吗，或者知道要走哪条路？任何建议将不胜感激！

**编辑**连接速度最好接近快速以太网（100Mbps）。对于提到的电缆，这应该没有问题（USB 2.0 是 480Mbps，Firewire800 是 800Mbps）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:42:55.900

我选择了不同的方法，但对于那些感兴趣的人，我可以分享我的研究结果。我找到了 3 种不同成本水平的潜在解决方案。

1.  *使用 USB 连接电缆*。这需要一根 USB 2.0 桥接/链接电缆（15 - 40 美元，取决于质量）和标准 Windows 驱动程序的包装。这个包装器可以使用[LibUsbDotNet](http://libusbdotnet.sourceforge.net)来实现。

2.  *使用火线*。这需要标准的 FireWire 电缆。应该实现一个自定义驱动程序，为此我发现只有一个名为[FireAPI](http://www.unibrain.com/products/driverapi/fireapi.html)的 SDK 。API 是*非常*低级的，必须深入了解 FireWire。此 SDK 的许可费为 450 美元。

3.  *使用反射记忆*。这需要两个定制的 PCI 卡和相应的电线。PCI 卡将自动将预定义的 RAM 内存区域相互复制，延迟非常低。这种方法绝对是最简单的，但也是最昂贵的。我发现的最便宜的变体，由[Dolphinics](http://www.dolphinics.com/products/embedded-system-reflective-memory.html)提供，整个解决方案的成本仍然约为 1.500 美元。

# c# - 如何查找对象的哪个属性引发了异常 C#

> ID：15000508
> 
> 赞同：0
> 
> 时间：2013-02-21T10:59:10.840
> 
> 标签：c#, .net, exception, .net-4.0

有没有办法找出对象的哪个属性引发了异常。我有一个具有 3 个属性的类。我想向用户发出一条消息，说明类中的特定属性是错误的。

```
public class Numbers
{
    public string Num1 { get; set; }
    public string Num2 { get; set; }
    public string Num3 { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var numbers = new Numbers() { Num1 = "22", Num2 = "err", Num3 = "33" };
        // Call an extension method which tries convert to Int
        var num = numbers.Num1.StringToInt();
         num = numbers.Num2.StringToInt();
         num = numbers.Num3.StringToInt();

        Console.WriteLine(num);
        Console.ReadLine();
    }
}

public static class SampleExtension
{
    static StackTrace stackTrace = new StackTrace(true);

    // Extension method that converts string to Int
    public static int StringToInt(this string number)
    {
        try
        {
            // Intentionally used 'Convert' instead of 'TryParse' to raise an exception
            return Convert.ToInt32(number);
        }
        catch (Exception ex)
        {
            // Show a msg to the user that Numbers.Num2 is wrong. "Input string not in correct format"
            var msg = stackTrace.GetFrame(1).GetMethod().ToString();
            msg = ex.Message;
            msg += ex.StackTrace;
            throw;
        }
    }
} 
```

我正在使用扩展方法将 sting 转换为 int。我正在寻找一种方法来捕获扩展方法本身中的错误属性。我正在使用**.Net 框架 4.0**。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:02:40.447

我会`Int32.TryParse`改用，然后您可以显式处理解析失败。

```
public static int StringToInt(this string number)
        {
            try
            {
                int result;
                if (!Int32.TryParse(number, out result))
                {
                    // handle the parse failure
                }
                return result;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:35:39.810

为什么不在调用期间简单地向方法提供所有需要的数据呢？示意图（您可以扩展它）：

```
public static int ToInt(string number, string info)
{
    try
    {
        // ...
    }
    catch(Exception e)
    {
        MessageBox.Show(info);
    }
}

// and usage
string str1 = "123";
int n = ToInt(str1, "Trying to parsing str1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:37:20.750

# 笔记

### 我基于 .NET 4.5 回答了这个问题，因为这个问题没有针对特定框架版本的标签。我将答案留在这里，因为它可能对使用 .NET 4.5 的未来访问者有用。

我想说您的代码示例非常难看，因为您可以通过使用来克服这个问题`int.TryParse`，但是我猜您想展示一个通用案例（错误的选择）并且您只想知道扩展方法的调用者名称：**查看`[CallerMemeberNameAttribute]`.NET Framework 4.5版本中引入的：**

*   [http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute.aspx)

例如，在扩展或常规方法中，执行以下操作：

```
public void Method([CallerMemberName] string callerName)
{
} 
```

CLR 将使用调用者的名称设置输入参数！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:22:42.393

```
public static int StringToInt(this Numbers number,
 Expression<Func<Numbers, string>> prop)
{
    try
    {
        return Convert.ToInt32(prop.Compile()(number));
    }
    catch (Exception ex)
    {
        var expression = (MemberExpression)prop.Body;
        string name = expression.Member.Name;
        throw new MissingMemberException(string.Format("Invalid member {0}", name));
    }
} 
```

并称之为：

```
var num = numbers.StringToInt(p=>p.Num1); 
```

# asp.net-mvc - ASP.NET MVC & IE9 输入类型号

> ID：15000515
> 
> 赞同：0
> 
> 时间：2013-02-21T10:59:36.790
> 
> 标签：asp.net-mvc, internet-explorer

我目前使用输入类型编号，但由于 ie9 不支持这种类型，有没有人有任何好的选择（和示例）？如果有帮助，我正在使用 ASP.NET MVC4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:21:20.730

[jQuery UI Spinner Widget](http://jqueryui.com/spinner/)是一种替代方法。您可以将其与 Modernizr 结合使用，仅将 jQuery UI Spinner Widget 与本机不支持数字作为输入类型的浏览器一起使用

```
<script>
    $(function () {
        if (!Modernizr.inputtypes.number) {
            $("input[type=number]").spinner();
        };
    });
</script> 
```

看看这个[使用 Modernizr 的 jsFiddle 演示](http://jsfiddle.net/vf4aR/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:13:23.727

是的，基本上给你的输入字段一个类为 jqNos

并使用此脚本：

```
<script language="javascript" type="text/javascript">

$(".jqNos").each(function () {
    $(this).keypress(function (e) {
        var code = $.browser.mozilla ? e.charCode : e.keyCode;
        if (((code >= 48) && (code <= 57)) || code == 0) {
            return true;
        }
        else {
            return false;
        }
    })
});
</script> 
```

此脚本将只允许文本框中的数字。

# ios - 处理带有内容的文件

> ID：15000519
> 
> 赞同：1
> 
> 时间：2013-02-21T10:59:47.570
> 
> 标签：ios, uti

我想让用户有机会将数据导入我的应用程序。该应用程序使用核心数据，我的想法是用户准备一个文本文件并将其作为电子邮件发送。在“打开方式...”对话框中，我喜欢列出我的应用程序。

该文件将是一个文本文件，但内容必须遵循某些规则，以便我能够提取填充核心数据实体所需的数据。

我必须为此定义一个自定义 UTI 吗？（我不想为每个文本文件列出我的应用程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:06:01.023

是的，您可以为您的格式定义 UTI 以及 MIME 类型。给它一个唯一的文件扩展名，它以纯文本编码的事实并不重要（HTML、XML 等都属于这一类）。

您没有指定文本格式的复杂程度，但如果它很复杂，那么您可能需要考虑使用语言解析器工具来处理它，利用 bison/flex (yacc/lex) 或 ANTLR。

# ruby - RailsApp 到（某种）独立？

> ID：15000522
> 
> 赞同：0
> 
> 时间：2013-02-21T10:59:58.490
> 
> 标签：ruby, ruby-on-rails-3.2, shoes

我做了第一个小型 Rails-App。我想过在朋友的电脑上纯粹在本地运行它（它是为了跟踪他的学生付款，针对不同的学校）。

有没有机会做一个小的 Ruby 程序：

1.  启动内部 Rails-Server
2.  （可选：打开标准浏览器）
3.  在关机时保存数据库的副本（以防崩溃）

一般问题：这甚至可能（不学习 c）吗？

我下载了“SHOES”——这是第一个似乎适合我的任务的“工具”。任何链接，线索或教程将不胜感激，在此先感谢。

**更新：** 我在开发时使用了 WEBrick，我也会在“部署”中使用它。我的问题背后的问题：我想在一个不太喜欢电脑的朋友电脑上运行它，所以使用 pc-console 不是首选。

# r - 如何在同一页面上绘制网格图？

> ID：15000525
> 
> 赞同：2
> 
> 时间：2013-02-21T11:00:03.747
> 
> 标签：r, plot, treemap, r-grid

我正在使用一个包 ( `treemap`)，它使用`grid`包来生成树形图。但是，我想将其中几个树形图绘制在一起，为这些图添加[不同的配色方案](https://stackoverflow.com/questions/14223520/treemap-package-in-r-use-different-palettes-for-first-index-parameter-and-shade)。`tmPlot`函数使用`grid.newpage`函数，它清除图形窗口。我还没有找到像保存`grid.newpage`对象那样保存对象的方法`ggplot2`。有没有办法将多个`grid.newpage`对象绘制到同一个窗口？

```
## Example

library(treemap)

# load Gross national income data
data(GNI2010)

size <- aggregate(GNI ~ continent, GNI2010, sum)
size <- size[with(size, order(GNI, decreasing = T)),]

cont <- size$continent

widths <- c(sum(size[c(1,3,5),]$GNI),
sum(size$GNI) - sum(size[c(1,3,5),]$GNI))

heights <- c(sum(size[c(1,2),]$GNI),
sum(size[c(3,4),]$GNI),
sum(size[c(5,6),]$GNI))

palettes <- c("Greens", "Blues", "Reds", "Oranges", "Purples", "Greys")

i <- 1 # This is to be replaced by for loop

x <- subset(GNI2010, continent == cont[i], cex = 5)

# create treemap

layout(matrix(1:6, 3, byrow = TRUE), widths = widths, heights = heights)
x1 <- tmPlot(x,
index=c("iso3"),
vSize="population",
vColor="GNI",
type="value", title = "", 
position.legend = "none",
palette = palettes[i])
grid.text(cont[i], 0.5, 0.5, gp=gpar(fontsize=20, font = 2, col = "white"))

## x1 is does not make a plot as such and tmPlot overwrites layout 
```

我知道我根据 GNI 总和缩放地块的解决方案是不正确的。一旦我弄清楚如何在同一个窗口中绘制这些树状图，我稍后可能会提出另一个问题。

**编辑：**我认为这个问题的答案是“**不**”。目前，您无法按名称保存 grid.newpage 对象，也无法将其中几个对象保存在一个页面上，因为该功能“擦除当前设备或移动到新页面”，如[描述](http://stat.ethz.ch/R-manual/R-devel/library/grid/html/grid.newpage.html)中所述。但是，可以找到解决方法。`tmPlot`包目前（截至 2013 年 3 月 23 日）`viewport`不支持 s，但开发版本支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:12:54.000

谢谢你的问题。tmPlot 的输出确实不是保存的图。

在下一次更新中，我将添加参数 vp，通过该参数可以指定要绘制的视口。只有在未指定时，才会调用 grid.newpage。

[更新：您可以在https://github.com/mtennekes/treemap](https://github.com/mtennekes/treemap)检查和测试开发版本

以 Bryan Hanson 为例：

```
vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y)
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
tmPlot(GNI2010,
  index="continent",
  vSize="population",
  vColor="GNI",
  type="value",
  vp = vplayout(1,1))
tmPlot(GNI2010,
  index=c("continent", "iso3"),
  vSize="population",
  vColor="GNI",
  type="value",
  vp = vplayout(1,2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:38:13.387

这是一种对任何网格图形都非常灵活的方法：

```
vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y)
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
print(a, vp = vplayout(1,1))
print(b, vp = vplayout(1,2)) 
```

您保存的绘图对象在哪里`a`以及在哪里。`b`因此，提前单独测试每个图，将它们保存为`a, b, ...`然后按上面的方法绘制它们。

哦，如果`tmPlot`总是这样，`grid.newpage`那么检查它是否有一个`new.page`可以设置为的 has 参数`FALSE`，或者复制该函数并注释掉`newpage`.

# unix - 使用 awk 查找一个字符串并将其附加到下一行

> ID：15000530
> 
> 赞同：4
> 
> 时间：2013-02-21T11:00:29.280
> 
> 标签：unix, sed, awk

输入文件：

```
DAN|a@gmail.com,c@yahoo.co.in,abc@gmail.com  
NAB|a@gmail.com  
PAT|a@gmail.com  
DAN|y@gmail.com  
NAB|y@yahoo.in  
PAT|z@redhat.com,abc@gmail.com  
DAN|y@gmail.com,abc@gmail.com  
NAB|b@yahoo.co.in  
PAT|c@uix.xo.in  
DAN|y@gmail.com  
NAB|b@yahoo.co.in  
PAT|c@uix.xo.in 
```

考虑第一行，有多个记录是“，”分隔的。查找 ',' 分隔的记录。如果在第一行找到'，'分隔记录，则将其放入下一行并附加'DAN |'，无论开头的字符串是什么，都应该附加。所以输出应该是：

```
DAN|a@gmail.com  
DAN|c@yahoo.co.in     
DAN|abc@gmail.com  
NAB|a@gmail.com  
PAT|a@gmail.com  
DAN|y@gmail.com  
NAB|y@yahoo.in  
PAT|z@redhat.com  
PAT|abc@gmail.com  
DAN|y@gmail.com  
DAN|abc@gmail.com  
NAB|b@yahoo.co.in  
PAT|c@uix.xo.in  
DAN|y@gmail.com  
NAB|b@yahoo.co.in  
PAT|c@uix.xo.in 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:12:04.657

这是使用 的一种方式`awk`，使用两个分隔符：

```
awk -F "[|,]" '{ for (i=2;i<=NF;i++) print $1 "|" $i }' file 
```

这是使用单个分隔符的另一种方式：

```
awk -F, '{ for (i=1;i<=NF;i++) print (i>1 ? substr($0,0,4) : "") $i }' file 
```

结果：

```
DAN|a@gmail.com
DAN|c@yahoo.co.in
DAN|abc@gmail.com  
NAB|a@gmail.com  
PAT|a@gmail.com  
DAN|y@gmail.com  
NAB|y@yahoo.in  
PAT|z@redhat.com
PAT|abc@gmail.com  
DAN|y@gmail.com
DAN|abc@gmail.com  
NAB|b@yahoo.co.in  
PAT|c@uix.xo.in  
DAN|y@gmail.com  
NAB|b@yahoo.co.in  
PAT|c@uix.xo.in 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:26:02.130

另一个：

```
awk -F'[|,]' '{gsub(/,/,RS $1 "|")}1' file 
```

# arrays - 将字符串数组传递给 COM 对象

> ID：15000531
> 
> 赞同：0
> 
> 时间：2013-02-21T11:00:29.663
> 
> 标签：arrays, vb.net, com, bstr

我放弃了寻找适合以下方法的数据类型：

1.  我有需要“BSTR 字符串向量”的 COM 对象方法（如 COM 文档所述）。

它完美地工作于：a）python（一切都来自python BTW）

```
Visum.Net.Zones.GetmultipleAttributes(["No","Name","XCoord","YCoord","Name","SHAREPRTORIG","SHAREPRTDEST"]) 
```

b) VBS：

```
Visum.Net.Zones.GetmultipleAttributes(Array("No","Name","XCoord","YCoord","Name","SHAREPRTORIG","SHAREPRTDEST")) 
```

c) 但 VB 无能为力（引发“CComBaseContainer::GetMultipleAttributes failed”错误）

它尝试`Out=Visum.Net.Zones.GetmultipleAttributes(In)`了以下数据类型的这种方法，每次都出现相同的错误：

```
Dim Out As Object
Dim In As New List(Of String)
Dim In(2) As String
In.toArray() 
```

我怎样才能满足这种方法？

PS。从文档中引用：

> GetMultipleAttributes ( [in] VARIANT AttrIDs, [out, retval] VARIANT *value)
> 返回容器所有网络对象的多个属性值。必须将属性 ID 指定为 BSTR 字符串的向量。返回值包含一个由所有对象和指定属性的值组成的 VARIANT 值矩阵。矩阵的行以标准顺序（按它们的键排序）对应于网络对象。列对应于指定顺序的属性。参数 [in] VARIANT AttrIDs Vectorof 属性 ID，如 ATTRIBUTE.XLS 中所示。[out, retval] VARIANT *value 容器中所有网络对象的这些属性的值矩阵

在此先感谢 i2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:40:11.063

如果这在 VBS 中有效：

```
Visum.Net.Zones.GetmultipleAttributes(Array("No","Name","XCoord","YCoord","Name","SHAREPRTORIG","SHAREPRTDEST")) 
```

这应该在 VB.NET 中工作：

```
Dim a() As String= New String() {"No", "Name", "XCoord","YCoord","Name","SHAREPRTORIG","SHAREPRTDEST"}

Visum.Net.Zones.GetmultipleAttributes(a) 'you might need a() instead 
```

请看一下这个问题以进行澄清：[VB.NET 中 Array() 的等效项？](https://stackoverflow.com/questions/241758/equivalent-of-array-in-vb-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:43:15.913

以下终于奏效了，但不要问我为什么：

```
 Dim In() As Object = {"No","Name","XCoord","YCoord","Name","SHAREPRTORIG","SHAREPRTDEST"}
    Dim VisumOut(,) As Object
    VisumOut = Visum.Net.Zones.GetMultipleAttributes(In) 
```

经过百万次的尝试，它终于好了。如果您知道这是为什么，请给我们正确的答案。

Powodzenia，拉法乌！

# android - 如何在其 onClick 上更改自定义适配器中的按钮背景？

> ID：15000532
> 
> 赞同：1
> 
> 时间：2013-02-21T11:00:30.253
> 
> 标签：android, android-listview, custom-adapter

我正在尝试更改自定义适配器单击中按钮的 UI，我能够对特定按钮单击事件执行功能操作。但是当我尝试更改任何 Button 的 UI 时，它会反映到最后添加的 Button。我也尝试使用 setTag() 选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T10:14:57.180

利用`V.setBackgroundResource(R.drawable.drawableName);`

它对我有用，其中`drawable`名称是可绘制文件夹中的背景资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:15:21.737

我自己找到了答案。当在自定义适配器中使用任何 Inflator 和 Holder 时，您需要为每一行（数据）创建新的 Object，以便您可以访问属于其系列的任何项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:52:47.697

您可以像这样在 onClick 事件中设置按钮的背景：

```
btn.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                     v.setBackgroundDrawable(drawable);
                }
            }); 
```

# fancybox - fancybox 2 打破了我的响应式布局

> ID：15000536
> 
> 赞同：0
> 
> 时间：2013-02-21T11:00:36.353
> 
> 标签：fancybox, responsive-design

这是我的页面：[http ://emresanli.com/sungerbob/](http://emresanli.com/sungerbob/)

一切正常，直到打开一个fancybox iframe。如您所见，响应式布局正在打滑。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:29:08.253

在您的 CSS“style.css”文件中，从以下位置更改：

```
body {
    background: #fef752 url(images/bg.jpg) no-repeat fixed center center;
    color: #666;
    font: 85%/140% Arial, Helvetica, sans-serif;
    width: 1000px;
    max-width: 96%;
    margin: 0 auto;
    cursor: url(images/spongebob.gif), auto;
} 
```

对此：

```
body {
    background: #fef752 url(images/bg.jpg) no-repeat fixed center center;
    color: #666;
    font: 85%/140% Arial, Helvetica, sans-serif;
    cursor: url(images/spongebob.gif), auto;
} 
```

# java - 用java格式化：混合文本和图片

> ID：15000537
> 
> 赞同：1
> 
> 时间：2013-02-21T11:00:39.533
> 
> 标签：java, drawing, format

我有一段文字，我想为用户注释。不幸的是，我什至不知道从哪里开始。我的算法在字符串上给出一个范围作为输出。我要的是这样的：

![例子](../Images/252da06cac2258ed1174c755d4860869.png)

我需要两种方法来标记字符（蓝线，红线），也许还可以反转字符（给字符一个不同的背景），或者让它们变胖。特别困难的是将图片（这里用两个黑点表示）与字符对齐。由于字符应该在 Courier New 中，我可以知道在哪里放置偏移量，但我似乎做不到。

最后，我必须在 X 个字符之后应用一个中断并开始一个新行，就像在图片中一样。我还没有找到任何示例如何使用 java 来解决这个问题。使用 python 我可以使用 ImageDraw，但我无法使用 java。

是否可以在屏幕上的画布中显示此内容并将其导出为 svg 或 pdf？我不知道有任何图书馆可以做到这一点。因此，我也很乐意通过这种方式收到一些建议/示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:25:43.383

关键是处理[FontMetrics](http://docs.oracle.com/javase/7/docs/api/java/awt/FontMetrics.html) API。你能做的最好的就是查看这个[参考文档](http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html)。

这是演示此用法的示例代码。它根据一系列字符在“Hello world”文本周围绘制红线和蓝线。

文本位于 JLabel 中，但您可以在任何组件上调整绘制方法（但您必须调用`graphics.drawChars`才能绘制文本。）

（代码不是很好，但演示了FontMetrics的用法）

```
package com.example.swing;

import javax.swing.*;
import java.awt.*;

public class DemoFontMetrics {

    public static void main(String[] args){
        JFrame frame = new JFrame();
        DecoratedLabel label = new DecoratedLabel("hello world !",new int[]{2,4}, new int[]{6,9});
        JPanel textContainer = new JPanel(new FlowLayout());
        textContainer.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
        textContainer.add(label);
        frame.getContentPane().add(textContainer);
        frame.pack();
        frame.setVisible(true);
    }

    private static class DecoratedLabel extends JLabel{

        int startBlue;
        int endBlue;
        int startRed;
        int endRed;

        private DecoratedLabel(String text, int[] blueRange, int[] redRange) {
            super(text);
            startBlue = blueRange[0];
            endBlue = blueRange[1];
            startRed = redRange[0];
            endRed = redRange[1];
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);   //draw text

            //set line with : 3
            Stroke stroke = new BasicStroke(3f);
            ((Graphics2D)g).setStroke(stroke);

            FontMetrics fm = g.getFontMetrics();
            int h = fm.getHeight();

            //compute blue line coordonate
            fm.stringWidth(getText().substring(0,startBlue));
            int x1 = fm.stringWidth(getText().substring(0, startBlue));
            int x2 = fm.stringWidth(getText().substring(0, endBlue));
            g.setColor(Color.BLUE);
            g.drawLine(x1,0,x2,0);// draw blue line

            //compute red line coordonates
            int x3 = fm.stringWidth(getText().substring(0,startRed));
            int x4 = fm.stringWidth(getText().substring(0, endRed));
            g.setColor(Color.RED);
            g.drawLine(x3,h-1,x4,h-1); // draw redline

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T06:42:33.957

如果文本显示通过`JTextPane`您可以方便地定义一个自定义[`HighlightPainter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Highlighter.HighlightPainter.html)，在文本上方或下方绘制线条。

然后，您可以通过调用以编程方式向文本窗格添加高亮：

```
textPane.getHighlighter().addHighlight(startPos, endPos, 
        myLineHighlightPainter); 
```

* * *

图像也可以通过以下方式轻松添加到窗格中：

```
textPane.setIcon(myImageIcon); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:05:05.213

您可以直接创建 svg，例如： http: [//xmlgraphics.apache.org/batik/](http://xmlgraphics.apache.org/batik/)这是一种基于 xml 的矢量图形格式。

编辑：您可以在 java 中显示 svg，您可以从 java 创建 pdf。您可以将其发布在网络上（只需 svg）。

# android - 从字符串数组将数据添加到列表视图

> ID：15000542
> 
> 赞同：-3
> 
> 时间：2013-02-21T11:00:52.250
> 
> 标签：android, android-listview, arrays, dynamic-list

我正在尝试使用 arrayAdapter 创建一个 4 列列表视图，并在 populateList() 中手动添加值

```
 private void populateList()
                         {

              list = new ArrayList<HashMap<String,String>>();

        HashMap<String,String> temp1 = new HashMap<String,String>();
            temp1.put(FIRST_COLUMN,"Diaries");
            temp1.put(SECOND_COLUMN, "Products");
            temp1.put(THIRD_COLUMN, "Rs. 400");
            temp1.put(FOURTH_COLUMN, "ggg Unit");
        list.add(temp1);

        HashMap<String,String> temp2 = new HashMap<String,String>();
            temp2.put(FIRST_COLUMN,"Note Books");
            temp2.put(SECOND_COLUMN, "Products");
            temp2.put(THIRD_COLUMN, "Rs. 600");
            temp2.put(FOURTH_COLUMN, "hhh Unit");
        list.add(temp2);

                    } 
```

**我的问题是我想从二维数组动态添加列表项怎么可能？？？项目计数与字符串数组的大小相同？？IE; 安装的**

```
 HashMap<String,String> temp1 = new HashMap<String,String>();

            temp1.put(FIRST_COLUMN,"Diaries");
            temp1.put(SECOND_COLUMN, "Products");
            temp1.put(THIRD_COLUMN, "Rs. 400");
            temp1.put(FOURTH_COLUMN, "ggg Unit"); 
```

**我想显示**

```
 temp1.put(FIRST_COLUMN,"myArry[i][j]");
            temp1.put(SECOND_COLUMN, "myArry[i][j]");
            temp1.put(THIRD_COLUMN, "myArry[i][j]");
            temp1.put(FOURTH_COLUMN, "myArry[i][j]"); 
```

**在 for 循环中，** 我的 doubut 也是如何动态创建 hashmap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:10:05.193

我不太明白你到底想要什么，但你可以试试这个：-

```
List<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();
HashMap<String,String> temp = null;

for(int i=0;i<2;i++){
    temp = new HashMap<String,String>();
    for(int j=0;j<4;j++){
    temp.put(String.valueOf(j), myArr[i][j]);
    }
list.add(temp);
} 
```

**注意：-**而不是`FIRST_COLUMN`, `SECOND_COLUMN`，您必须`1,2,3..`使用`HashMap`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:14:37.047

尝试这样的事情。

```
HashMap<String,String> temp1 = null;
for (int i = 0; i < myArry.length; i++) {
temp1 = new HashMap<String, String>();
temp1.put(FIRST_COLUMN, myArry[i][0]);
temp1.put(SECOND_COLUMN, myArry[i][1]);
temp1.put(THIRD_COLUMN, myArry[i][2]);
temp1.put(FOURTH_COLUMN, myArry[i][3]);
list.add(temp1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:14:39.467

在您的代码中，我看不到列表视图的创建。您需要在 xml 中创建一个列表视图并使用适配器填充数据

# c - 如何以字节为单位获取字符串大小？

> ID：15000544
> 
> 赞同：33
> 
> 时间：2013-02-21T11:00:56.387
> 
> 标签：c, sizeof, arrays

正如标题所暗示的，我的问题是如何在`C`. `sizeof`如果我在没有它的函数中声明它（字符串）是否很好用`malloc`？或者，如果我已将其声明为指针？如果我用 初始化它`malloc`怎么办？我想要一个详尽的答复。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-21T11:04:20.793

您可以使用[strlen](http://www.cplusplus.com/reference/cstring/strlen/)。大小由终止的空字符确定，因此传递的字符串应该是有效的。

如果您想获取包含您的字符串的内存缓冲区的大小，并且您有指向它的指针：

*   如果它是动态数组（使用 malloc 创建），则无法获取它的大小，因为编译器不知道指针指向什么。（[检查这个](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)）
*   如果它是静态数组，你可以使用`sizeof`它来获取它的大小。

如果您对动态数组和静态数组之间的区别感到困惑，请检查[此](https://stackoverflow.com/questions/2672085/c-static-array-vs-dynamic-array)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-21T11:03:58.450

用于[`strlen`](http://www.cplusplus.com/reference/cstring/strlen/)获取以**null 结尾的字符串**的长度。

`sizeof`**返回数组**的长度而不是字符串。如果它是一个指针 ( `char *s`)，而不是一个数组 ( `char s[]`)，它将不起作用，因为它将返回指针的大小（在 32 位系统上通常为 4 个字节）。我相信数组将作为指针传递或返回，因此您将失去`sizeof`用于检查数组大小的能力。

因此，**只有当字符串跨越整个数组**（例如`char s[] = "stuff"`）时，使用`sizeof`静态**定义**的数组才会返回您想要的（并且更快，因为它不需要循环查找空终止符）（如果最后一个字符是一个空终止符，您需要减去 1)。如果它不跨越整个数组，它不会返回你想要的。

所有这一切的替代方法实际上是存储字符串的大小。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-21T11:13:19.890

虽然`sizeof`适用于这种特定类型的字符串：

```
char str[] = "content";
int charcount = sizeof str - 1; // -1 to exclude terminating '\0' 
```

如果`str`是指针（`sizeof`返回指针的大小，通常为 4 或 8）或具有指定长度的数组（`sizeof`将返回与指定长度匹配的字节数，对于 char 类型是相同的），则它不起作用。

只需使用`strlen()`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-05T05:53:42.033

如果您使用`sizeof()`then a `char *str`and`char str[]`将返回不同的答案。`char str[]`将返回字符串的长度（包括字符串终止符），同时`char *str`将返回指针的大小（因编译器而异）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-30T03:42:54.917

我喜欢使用：

```
(strlen(string) + 1 ) * sizeof(char) 
```

这将为您提供以字节为单位的缓冲区大小。您可以将其与 snprintf() 一起使用可能会有所帮助：

```
const char* message = "%s, World!";
char* string = (char*)malloc((strlen(message)+1))*sizeof(char));
snprintf(string, (strlen(message)+1))*sizeof(char), message, "Hello"); 
```

干杯! 功能：`size_t strlen (const char *s)`

# msbuild - 通过 MSBUILD 运行 SingleFile Generator

> ID：15000547
> 
> 赞同：2
> 
> 时间：2013-02-21T11:01:02.533
> 
> 标签：msbuild, customtool

我使用 IVsSingleFileGenerator 创建了一个自定义工具（SingleFile 生成器）。它将“xyz.Resx”文件作为输入并生成“xyz.Designer.resx.cs”文件。该文件可以在通过 IDE 构建/保存应用程序时生成。

问题是，我已经为任何 .Resx 文件提供了自定义工具属性，并通过 MSBUILD 构建了应用程序。现在我无法构建/生成“Designer.resx.cs”文件。

如何准备自定义任务以通过 MSBUILD 运行此自定义工具。请帮助做同样的事情。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:35:28.023

我认为您不能从 MsBuild 运行 CustomTool。由于您是编写该工具的人，我肯定会建议创建 msbuild 任务并开始使用它。以下是一些如何做到这一点的想法：

[http://msdn.microsoft.com/en-us/library/t9883dzc.aspx](http://msdn.microsoft.com/en-us/library/t9883dzc.aspx) [http://blogs.msdn.com/b/msbuild/archive/2006/01/21/515834.aspx](http://blogs.msdn.com/b/msbuild/archive/2006/01/21/515834.aspx)

另一种方法是编写可执行文件，但这会降低效率。这是从 msbuild 调用可执行文件的方式

```
<Target Name="your-target-name" AfterTargets="the-starting-point-of-your-target">
    <Exec Command="your_exutable-here  parameters_here" WorkingDirectory="your_working_folder" />
  </Target> 
```

第三种方法是编写内联 msbuild 任务 [http://blogs.clariusconsulting.net/kzu/writing-inline-msbuild-tasks-in-c-for-one-liners/](http://blogs.clariusconsulting.net/kzu/writing-inline-msbuild-tasks-in-c-for-one-liners/)

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:54:07.830

我对您正在使用的这个自定义工具 IVsSingleFileGenerator 知之甚少。要在 MSBuild 中执行它，您可能需要它们给出的相同目标，以从 .resx 文件生成 resx.cs 文件。或者您可以在您的 MSBuild 脚本中添加此工具的命令行调用并尝试它。

# nhibernate - 在 Fluent NHibernate 中将字段共享为复合键和外键

> ID：15000548
> 
> 赞同：3
> 
> 时间：2013-02-21T11:01:05.620
> 
> 标签：nhibernate, fluent-nhibernate-mapping

请考虑以下映射代码：

```
public sealed class BankMapping : ClassMap<Bank>
{
    public BankMapping()
    {
        CompositeId()
            .KeyProperty(x => x.SerialNumber, "SerialBankRef")
            .KeyProperty(x => x.FinancialPeriodId, "FinancialPeriodRef");
        Map(x => x.Code);
        Map(x => x.Title);
        Map(x => x.Comment);
        Map(x => x.IsActive);            
        HasMany(x => x.BankBranchs).KeyColumns.Add(new[] { "SerialBankRef", "FinancialPeriodRef" });

    }
} 
```

`BankBranch`映射代码是：

```
public sealed class BankBranchMapping : ClassMap<BankBranch>
{
    public BankBranchMapping()
    {
       CompositeId()
            .KeyProperty(x => x.FinancialPeriodId, "FinancialPeriodRef")
            .KeyProperty(x => x.SerialNumber, "SerialNumber");
        Map(x => x.Code);
        Map(x => x.Title);
        Map(x => x.Comment);
        Map(x => x.IsActive);
        Map(x => x.Address);
        Map(x => x.Fax);
        Map(x => x.Telephone);
        References(x => x.Bank).Columns(new[] { "SerialBankRef", "FinancialPeriodRef" });
    }
} 
```

正如您所看到的，该`FinancialPeriodRef`字段在映射中充当外键和复合键的一部分，`BankBranch`NHibernate 正确构建 DB，一切似乎都很好，直到我尝试在`BankBranch`表中插入记录。

该错误`System.IndexOutOfRangeException : Invalid index 10 for this SqlParameterCollection with Count=10.`表明我在`FinancialPeriodRef`FK 和 PK 出现时两次映射了一个字段 ( )，我不知道如何解决该问题。

我需要作为主键`FinancialPeriodRef`的`BankBranch`一部分，而它绝对等于`FinancialPeriodRef`from `Bank`。

我需要这个字段来建立唯一约束，并且复合键的好处也是必不可少的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-14T08:47:44.147

您需要使用 KeyReference 而不是 KeyProperty 来描述复合外键。

```
public BankBranchMapping()
{
    CompositeId()
        .KeyReference(x => x.FinancialPeriodId, "FinancialPeriodRef")
        .KeyReference(x => x.SerialNumber, "SerialNumber");
    ...
} 
```

我遇到了和你完全相同的问题，大约一个小时后，我看到了这篇文章：[https](https://stackoverflow.com/a/7997225/569662) ://stackoverflow.com/a/7997225/569662 ，它指出了我的正确。

# url - 标头中的 og:url 标记与 html 中的 rel='canonical' 链接不是同一个 URL

> ID：15000549
> 
> 赞同：1
> 
> 时间：2013-02-21T11:01:07.623
> 
> 标签：url, facebook-opengraph, web-crawler, canonical-link

这是页面：[https](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmacondo.tw%2F%23%21%2Fbook%2F50fa1589425b0dc41a000002) ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmacondo.tw%2F%23%21%2Fbook%2F50fa1589425b0dc41a000002 。

我收到警告“标头中的 og:url 标记与 html 中的 rel='canonical' 链接不同的 URL”。但是，“确切地查看我们的抓取工具为您的 URL 看到的内容”表明它们是相同的。

# qt - Qt Creator 标记文件

> ID：15000550
> 
> 赞同：3
> 
> 时间：2013-02-21T11:01:07.473
> 
> 标签：qt, vim, qt-creator, ctags

我使用 vim 进行 C++ 代码编辑。但是它的代码补全不是很好（虽然我试过很多插件，比如OmniCppComplete）。Qt Creator 代码补全很棒，而且它还有 vim 风格的编辑功能，对我来说已经足够完整了。唯一对我不利的是，我不能在 Qt Creator 中使用 ctags 功能（尽管 Qt Creator 具有转到类定义的功能，但解析源代码需要更多时间）。

是否可以在伪 vim 模式下创建源代码标记文件并在 Qt Creator 中使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T09:07:30.930

Vim 中的 C++ 代码完成实际上更胜一筹。我将概述您必须采取的步骤才能使其正常工作。但是，我不会在这里详细介绍（例如构建庞大的开源代码库、克隆存储库、为 Vim 安装插件等），因为否则值得为新手编写一个大型教程。因此，假设您是一个非常了解和准备充分的软件开发人员，那么您将获得一个流利的指南：

1.  获取并安装[clang_complete](https://github.com/Rip-Rip/clang_complete)（Vim 插件）；

2.  获取并安装[neocomplcache](https://github.com/Shougo/neocomplcache)（Vim 插件）；

3.  如果您在 Unix 上，那么您很幸运，因为您可能已经在系统上安装了[LLVM](http://llvm.org/)和[Clang](http://clang.llvm.org/)，或者您必须使用包管理器并使用单个命令安装它们。如果是这样，那么您可以立即跳到最后一步（＃7）。

    如果你在 Windows 上，那么你就没有那么幸运了，但从实际的角度来看，这实际上更好 - 你将拥有自己构建巨大的东西并让事情无论如何都能正常工作的丰富经验。:)

    所以，如果你在 Windows 上（我可以看到使用 Qt Creator），那么你可能已经在你的系统上安装了 MinGW。如果不是这种情况，那么我强烈建议您安装最新的[MinGW-w64](http://mingw-w64.sourceforge.net/)。幸运的是，您不必自己编译它，因为[rubenvb](https://stackoverflow.com/users/256138/rubenvb)已经在两种变体中构建了 MinGW-w64 工具链：[针对 64 位 Windows（又名 x64）](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/rubenvb/gcc-4.7-release/)和[针对 32 位 Windows（又名 x86）](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/gcc-4.7-release/)。只需根据您的操作系统下载一个。**注意**：这些链接指向 MinGW-w64 的最新（在撰写此答案时）稳定版本，即基于 GCC 4.7.2。**重要提示**：确保 MinGW-w64 在`%PATH%`环境变量中。

4.  另一个需要的软件是[CMake](http://cmake.org/cmake/resources/software.html)（一种流行的构建系统）。同样，如果您在 Unix 上，它可能已经安装。如果您使用的是 Windows，则只需下载并安装它。**重要提示**：确保 CMake 在`%PATH%`环境变量中。

5.  我们需要的最后一件事是[Python](http://www.python.org/download/)。再一次，如果您在 Unix 上，那么它已经安装在您的系统上。否则，你已经知道该怎么做了。:) 官方有 2 个 Python 版本：2.7.3 和 3.xx - 你绝对应该下载并安装这两个版本。Python 是任何开发人员机器上必不可少的软件。**重要提示**：确保 Python 2.7.3（不是 3.xx！）在`%PATH%`环境变量中。

6.  现在我们已经安装了 MinGW-w64、CMake、Python，我们已经准备好构建 LLVM 和 Clang。为了减轻痛苦，请转到我的[Out-of-Source Builders](https://bitbucket.org/Haroogan/out-of-source-builders)项目并向下滚动到**Guide: Build 64-bit LLVM and Clang for Windows (64-bit) Using MinGW-w64**。如果你使用的是 32 位 Windows，请不要注意标题中的**64 位**（没关系），只需按照那里的说明进行操作即可。等待大约一个小时，直到 LLVM 和 Clang 构建完成。

7.  我们差不多完成了，剩下的就是正确配置 Vim。在这里，我将简单地提供最有可能满足您需求的配置。

配置`neocomplcache`：

* * *

```
let g:neocomplcache_enable_at_startup            = 1
let g:neocomplcache_enable_smart_case            = 1
let g:neocomplcache_enable_camel_case_completion = 1
let g:neocomplcache_enable_underbar_completion   = 1
let g:neocomplcache_min_syntax_length            = 2

if !exists('g:neocomplcache_force_omni_patterns')
  let g:neocomplcache_force_omni_patterns = {}
endif

let g:neocomplcache_force_overwrite_completefunc = 1

let g:neocomplcache_force_omni_patterns.c      = '[^.[:digit:] *\t]\%(\.\|->\)'
let g:neocomplcache_force_omni_patterns.cpp    = '[^.[:digit:] *\t]\%(\.\|->\)'
    \ . '\|\h\w*::'
let g:neocomplcache_force_omni_patterns.objc   = '[^.[:digit:] *\t]\%(\.\|->\)'
    \ . '\|\h\w*::'
let g:neocomplcache_force_omni_patterns.objcpp = '[^.[:digit:] *\t]\%(\.\|->\)'
    \ . '\|\h\w*::'

inoremap <expr> <Tab>   pumvisible() ? "\<C-n>" : "\<Tab>"
inoremap <expr> <S-Tab> pumvisible() ? "\<C-p>" : "\<S-Tab>" 
```

配置`clang_complete`：

* * *

```
let g:clang_use_library      = 1
let g:clang_auto_select      = 0
let g:clang_complete_auto    = 0
let g:clang_complete_copen   = 1
let g:clang_complete_macros  = 1
let g:clang_complete_patters = 1

let g:clang_library_path = 'D:/Toolchains/x64/LLVM/3.3/bin'

let g:clang_auto_user_options = 'path, .clang_complete' 
```

有关这两个插件的更多信息，请使用 Vim 的帮助文档：`:h clang_complete`和`:h neocomplcache`. 有很多选项可以调整，尤其是在`neocomplcache`. 从我的角度来看，这两个插件对于任何使用 Vim 的 C++ 开发人员来说都是**必须的。**

**注意**：如果您不知道如何完成此处列出的某些步骤，您将不得不在 StackOverflow 上提出其他问题或在其他地方查看此答案开头所述的原因。

我希望这会有所帮助，并且从现在开始，您会在开发工作中更加青睐 Vim。:)

# mysql - MySQL原始查询：使用@var

> ID：15000553
> 
> 赞同：0
> 
> 时间：2013-02-21T11:01:14.033
> 
> 标签：mysql, var

我正在尝试使用定义为@var 的常量前缀重命名表列表：

```
SET @p='newprefix_';
RENAME TABLE `oldprefix_tablename1` TO CONCAT(@p, 'tablename1');
RENAME TABLE `oldprefix_tablename2` TO CONCAT(@p, 'tablename2'); 
```

这种语法是错误的，但我看到：

```
SELECT  CONCAT(@p, 'tablename'); //outputs newprefix_tablename 
```

在这里使用的正确方法/语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:20:07.950

您不能按照您尝试的方式直接执行此操作。正如手册所说（[http://dev.mysql.com/doc/refman/5.1/en/user-variables.html](http://dev.mysql.com/doc/refman/5.1/en/user-variables.html)）

> 用户变量旨在提供数据值。它们不能直接在 SQL 语句中用作标识符或标识符的一部分，例如在需要表或数据库名称的上下文中，或用作保留字（如 SELECT）。

您必须使用准备好的语句：

```
SET @p = 'newprefix_';
SET @s = CONCAT('RENAME TABLE `oldprefix_tablename1` to ', @p, 'tablename1');
PREPARE stmt FROM @s;
EXECUTE stmt; 
```

# javascript - JSON数组到车把

> ID：15000554
> 
> 赞同：5
> 
> 时间：2013-02-21T11:01:24.557
> 
> 标签：javascript, jquery, json, backbone.js, handlebars.js

我有一个 json 对象作为

```
[ "id", "birthday", "companymsgsthisperiod", "companythisperiodend", "cust_attr_boolean", "subscribed", "testgroup", "usermsgsthisperiod", "userthisperiodend" ] 
```

现在我想使用把手将这种类型的 json 对象添加到文件中

```
<div>/*json*/</div> 
```

谁能帮我度过难关？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T11:05:21.643

你有一个数组。我从[文档](http://handlebarsjs.com/)中猜想您可以使用**each**块助手

```
<div>
  {{#each dataArray}}
  <div>{{this}}</div>
  {{/each}}
</div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-27T10:49:22.950

最后它可能会满足您的需求。

[![tryhandlebarsjs.com - 截图](../Images/5d46d2343b23396b190faad6e9780ced.png)](https://i.stack.imgur.com/2nDT1.png)

# sql - 返回 SQL 结果集中的外部文件

> ID：15000555
> 
> 赞同：1
> 
> 时间：2013-02-21T11:01:28.270
> 
> 标签：sql, sql-server, tsql, blob

我需要开发一个 Web 服务来使一些文件在外部网站上可用。这些文件在文件服务器上保存和更新，它们的 UNC 路径在数据库中。Web 服务将托管在我们的 DMZ 中的服务器上，并且可以访问数据库但不能访问文件共享。

我看到的选项是：

1.  将文档上传到 Web 服务器。如果没有 LAN 访问，这很困难。
2.  编写一个附加过程将文件上传到数据库并从那里提供它们。这会导致到处都有额外的工作，但可能是可以接受的。
3.  找到某种方法让存储过程从网络共享中读取文件并将它们返回到 Web 服务可能使用的结果集中。

有谁知道我该如何选择选项3？我怀疑我需要将它上传到一个 blob 中并在 web 服务中读取它，但是是否可以仅使用 SQL 将文件加载到 blob 中？

更新：我找到[了这个](https://www.simple-talk.com/sql/t-sql-programming/reading-and-writing-files-in-sql-server-using-t-sql/ "这")并复制了 ufsReadfileAsString 函数。我不断收到“打开文件时出错”错误，我认为这可能与用户权限有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-17T07:44:32.863

终于，将近四年后，我重新审视了它。事实证明这真的很简单！

```
declare @myFile varchar(max)

select @myFile = BulkColumn
from openrowset(bulk'C:\Path\To\File\Test.txt', single_blob) x;

select @myFile 
```

美中不足的地方显然是文件权限，但是一旦你对它进行了排序，这就很好用了。

# iphone - 黄瓜：如何从键盘输入文本到文本字段？

> ID：15000562
> 
> 赞同：2
> 
> 时间：2013-02-21T11:01:52.577
> 
> 标签：iphone, cucumber, calabash

我正在使用 type_into_keyboard("abc") 从键盘将文本输入名为“用户名”的文本字段，但它不起作用。

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T08:08:37.650

利用

```
Then I enter "abd" into the "username" input field 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T10:52:13.710

首先，您需要将此自定义函数添加到“_steps.rb”文件中

```
Then /^I enter constant text "([^\"]*)" to text field number (\d+)$/ do |texts,index|

    index = index.to_i
    screenshot_and_raise "Index should be positive (was: #{index})" if (index<=0)
    clearTextfield(index-1)
    enterDataToTextfieldNum(texts, index-1)
    sleep(STEP_PAUSE)
end

def enterDataToTextfieldNum(text, index)
  index = index.to_i
  text = text.to_s
  if index>=0
        sleep(0.2)
        touch("textField index:#{index}")
        sleep(0.4)
        await_keyboard
        sleep(0.2)
        keyboard_enter_text("#{text}")
        sleep(0.2)
        done
        sleep(0.3)
  end
end

def clearTextfield(index)
    index = index.to_i

    if query("textField index:#{index}",:text).first
      length=query("textField index:#{index}",:text).first.length
    else
      length=0
    end
    if (index>=0)&&(length>0)
        touch("textField index:#{index}")
        await_keyboard
      for i in 0..length-1
        keyboard_enter_char("Delete",false)
      end
    end
end 
```

然后你可以在葫芦特性文件中调用它

```
Then I enter constant text "Old road" to text field number 3 
```

在这里，我使用了 textfileld 编号，但如果您愿意，可以编辑它以使用文本字段名称。如果您需要帮助，请告诉我。谢谢。

# ruby - 在参数声明中使用参数值

> ID：15000564
> 
> 赞同：1
> 
> 时间：2013-02-21T11:01:54.670
> 
> 标签：ruby, thor

我希望根据先前声明的参数的值指定参数的默认值。在此示例中，`handlerSendPort`默认值应为`handlerRecvPort + 1`

```
require "thor/group"  
module Noov
  class App < Thor::Group
    include Thor::Actions

    argument :name, type: :string, desc: "The name of the project to create"
    argument :handlerRecvPort, type: :numeric, desc: "The 0MQ recv port number on the handler side (random if not specified)", optional: true, default: rand(2**16-1024)+1024+1
    argument :handlerSendPort, type: :numeric, desc: "The 0MQ send port number on the handler side (recv port + 1 if not specified)", optional: true, default: handlerRecvPort+1
    argument :handlerUUID, type: :string, desc: "The mongrel2 server UUID (project name if not specified)", optional: true, default: name
    desc "Creates a project directory for a new website. Fully equipped to support BDD with Cucumber"

  end
end 
```

这失败了：

`undefined local variable or method`Noov::App:Class (NameError) 的 handlerRecvPort'`

我意识到参数值在类评估的上下文中不可用（尽管我希望有一些超魔来使其工作），那么此时我如何访问参数值？

# php - 如何定义 $_SERVER['DOCUMENT_ROOT']

> ID：15000566
> 
> 赞同：1
> 
> 时间：2013-02-21T11:01:56.517
> 
> 标签：php, linux, apache

我正在尝试在运行 Apache2 和 PHP5 的 Linux 上安装 PHP 应用程序。

我注意到，每当我尝试访问应用程序（例如，点击`index.php`文件）时，浏览器都会返回一个空白页面。运行 a`phpinfo()`工作正常。

通过测试，我意识到问题出在应用程序的代码中，它丢失了这样的行：

`require_once($_SERVER['DOCUMENT_ROOT'] . '/202-config/functions.php');`

如果我将其更改为`require_once('./202-config/functions.php');`，则应用程序运行正常（至少应用程序的那部分。

如果我运行`print_r($_SERVER)`,`DOCUMENT_ROOT`显示为空。

我的问题是：由于我不想遍历此应用程序中的所有代码并替换这些`require_once`语句，有没有办法定义 DOCUMENT_ROOT 的值？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T11:06:47.043

从[文档](http://www.php.net/manual/en/reserved.variables.server.php)：

> 此数组中的条目由 Web 服务器创建。**无法**保证每个 Web 服务器都会提供其中任何一个；

此外，如果您从命令行运行脚本，它可能不会被设置。

解决方法是显式设置：

```
if (!isset($_SERVER['DOCUMENT_ROOT']) || empty($_SERVER['DOCUMENT_ROOT']))
    $_SERVER['DOCUMENT_ROOT'] = __DIR__; //or dirname(__FILE__) for older php verstions 
```

**注意：**您使用`$_SERVER['DOCUMENT_ROOT']`包含脚本。所以最好依赖常量[`__DIR__`](http://php.net/manual/en/language.constants.predefined.php)而[`__FILE__`](http://php.net/manual/en/language.constants.predefined.php)不是`$_SERVER`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:04:27.977

您是否已`DocumentRoot "/var/www"`在 Apache-Virtualhost-Config 中设置？在 CLI 中，此字段为空。在这种情况下，您可以手动设置此值：

```
if ($_SERVER['DOCUMENT_ROOT'] == '') {
  $_SERVER['DOCUMENT_ROOT'] = __DIR__;
} 
```

或 PHP < 5.2

```
if ($_SERVER['DOCUMENT_ROOT'] == '') {
  $_SERVER['DOCUMENT_ROOT'] = dirname(__FILE__);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:08:33.177

You also could do something like this:

```
if (empty($_SERVER['DOCUMENT_ROOT'])) {
$_SERVER['DOCUMENT_ROOT'] = './';
} 
```

But this is not a nice way

# c# - 在实体框架中更新记录的最佳做法是什么？

> ID：15000568
> 
> 赞同：3
> 
> 时间：2013-02-21T11:02:04.213
> 
> 标签：c#, entity-framework-4.1, repository-pattern

我需要使用实体框架 4.1（POCO）单击一次按钮更新 100 条记录。我需要将修改后的记录保存在数据库中而不进行数据库往返（以避免性能问题）。

我已经看到了一些分离和附加的解决方案。

附加时出现错误 ***IEntityChangeTracker 的多个实例无法引用实体对象***

所以先尝试分离，得到新的错误 ***The object cannot be detached because it is not attach to the ObjectStateManager***

我正在使用存储库模式来获取实体列表并传递给 UI 层以在网格中进行绑定。

在按钮单击中，我将这些实体传回 DB 层以进行更新。

**它工作正常，选择实体并执行 context.applychanges。由于性能问题，我需要避免这种往返。**

```
 public void Update(OPRPortCall portCall)
    {
        using (VMEntities context = new VMEntities())
        {
            context.Detach(portCall); //The object cannot be detached because it is not attached to the ObjectStateManager.
            context.AttachTo("OPRPortCalls", portCall); //An entity object cannot be referenced by multiple instances of IEntityChangeTracker
            context.ObjectStateManager.ChangeObjectState(portCall, EntityState.Modified);

            context.SaveChanges();
        }
    } 
```

建议我对此的任何解决方案。

克里斯托弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:29:42.250

从技术上讲，您可以通过首先测试对象是否已附加来解决此问题：

```
public void Update(OPRPortCall portCall)
{
    using (VMEntities context = new VMEntities())
    {
        ObjectStateEntry ose;
        this.ObjectStateManager.TryGetObjectStateEntry(portCall, out ose);
        if (ose == null)
        {
            context.OPRPortCalls.Attach(portCall);
        }
        context.ObjectStateManager.ChangeObjectState(portCall, EntityState.Modified);

        context.SaveChanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:31:40.293

您可以仅分离从上下文中检索到的实体，在您的示例中创建上下文（此时没有实体），然后尝试分离。

对于第二个问题，我认为您有另一个已附加实体的上下文，因此您不能将实体附加到第二个上下文。

对于这个问题（附加/分离），避免创建多个上下文并只使用一个上下文（也许您可以将它作为函数的参数传递或将其设置为私有类变量）。

对于更新 100 个实体的具体问题，您可以： 1\. 如果您可以为所有实体更新同一列（将值传递给它并执行 UPDATE 语句），则创建一个存储过程 2\. 更新所有实体，然后调用 SubmitChages()此命令 EF 执行 UPDATE TABLE 100 次 3\. 对数据库执行自定义查询命令，例如“UPDATE TABLE SET ...”

我希望这会有所帮助。

# javascript - 禁用页面滚动直到页面加载 - JQuery

> ID：15000569
> 
> 赞同：2
> 
> 时间：2013-02-21T11:02:05.820
> 
> 标签：javascript, jquery

我为客户网站构建了一个视差滚动介绍 - 该网站包含许多高分辨率图像 - 所以我创建了一个快速加载器，它使用全屏高 z-index div 将屏幕空白，然后使用 setTimeout 方法淡入文档准备好后 4 秒的页面（不确定这是否是最好的方法，但它适用于我尝试过的每个测试）。

我想禁用滚动以防止用户在动画出现之前滚动动画 - 谁能推荐一个好的跨浏览器方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:37:39.487

如果你想在加载所有图像时淡入，你可以试试这个

```
var images = $('img');
var images_nbr = images.length;

images.load(function() {
    images_nbr--;

    if (images_nbr == 0) {
        $('body').css('overflow','auto');
        $('...').fadeIn();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:07:07.963

Set

```
#mydiv {
    overflow:hidden 
} 
```

in your parent div in CSS. Then, in your document, add this...

```
$('#mydiv').css('overflow', 'auto'); 
```

...in the function that fades in your content.

Thus, on load the page will be unscrollable, but when you fade in, the overflow property will be overwritten and allow the content to scroll.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:07:28.887

```
.scrolldiv{
overflow:hidden;
}

$(window).load(function(){
   $(".scrolldiv").css("overflow","auto");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:08:46.790

You can try like, initially add the below css on body

```
body {overflow:hidden;} 
```

and after your setInterval function complete execution (whatever your loading function) just remove the style from body, like

```
$('body').css('overflow','auto'); 
```

# android - android中的Arrayindexoutofbound错误，如何在插入数据库时 解决这个问题？

> ID：15000571
> 
> 赞同：0
> 
> 时间：2013-02-21T11:02:21.263
> 
> 标签：android, performance, android-sqlite

```
public void fetchcontent() throws IOException
            {
                    this.open();
                    ContentValues values = new ContentValues();
                    String csvFilename = "/mnt/sdcard/content.csv";
                   // ArrayList<String> al=new ArrayList();
                    CSVReader csvReader = new CSVReader(new FileReader(csvFilename));
                    String row[] = null;
                    while((row = csvReader.readNext()) != null) {
                       st1 = row[0];
                       st2= row[1];
                       st3= row[2];
                       st4= row[3];
                       st5= row[4];
                       values.put(DatabaseHandler.Column1,st1);
                       values.put(DatabaseHandler.Column2,st2);
                       values.put(DatabaseHandler.Column3,st3);
                       values.put(DatabaseHandler.Column4,st4);
                       values.put(DatabaseHandler.Column5,st5);
                      database.insert(DatabaseHandler.Table_Name, null, values);
                       }
                    csvReader.close(); 
                MainActivity.tt1.append("\ncontent table created");
            } 
```

这是我在我创建的表中插入的代码，它给出了 java lang arrayindexoutofbound 异常错误我如何删除它请帮助我的 logcat 显示这个

```
02-21 16:27:54.308: E/AndroidRuntime(12511): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.webdata/com.example.webdata.MainActivity}: java.lang.ArrayIndexOutOfBoundsException: length=3; index=3 
```

好的，正如你们中的一些人提到的那样，我确实删除了 st4 和 st5 语句，它工作了一段时间，但现在我得到了索引 2 的相同错误，现在我的数组长度是 2，但你们之前都建议它是 3，什么这里错了，我错过了什么吗？？/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:06:41.267

```
st4= row[3]; 
```

不起作用，因为数组行的长度为 3。

大多数人都告诉您完全删除使用第 3 和第 4 字段，但是如果您想使用默认值，那么您应该为此添加一个检查，如果没有相应的数据，则在数据库中插入空数据。

像这样的东西：

```
if (row[3] != null) {
    st3 = row[3];
} else {
    st3 = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:03:48.303

这表明您的 CSV 文件：`/mnt/sdcard/content.csv`或 CSV 文件中的至少一行只有三列。

请参阅：`java.lang.ArrayIndexOutOfBoundsException: length=3; index=3`表示数组中只有 3 个项目，并且您尝试 tio 访问索引 3 处的项目（最大值为 2）

不试一下：

```
st4= row[3];
st5= row[4]; 
```

和

```
values.put(DatabaseHandler.Column4,st4);
values.put(DatabaseHandler.Column5,st5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:05:01.837

```
java.lang.ArrayIndexOutOfBoundsException: length=3; index=3*emphasized text* 
```

异常表示数组包含 3 个元素，但您尝试访问 5 个元素。

# ruby-on-rails - rails 与复数、可能、外键的关联

> ID：15000572
> 
> 赞同：0
> 
> 时间：2013-02-21T11:02:21.640
> 
> 标签：ruby-on-rails

例如，我有 2 名玩家的游戏，未来会同时进行不止一款游戏。我需要创建关联，让我有机会简单地调用 user.games，它将返回涉及该用户的所有游戏，如 first_user_id 或 second_user_id。

桌面游戏桌 first_user_id second_user_id

表用户id

模型用户 has_name ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:03:43.177

我认为你要求的是：

```
class Game < ActiveRecord::Base
  has_one :first_user, foreign_key: :first_user_id, class_name: 'User'
  has_one :second_user, foreign_key: :second_user_id, class_name: 'User'
end

class User < ActiveRecord::Base
  has_many :first_user_games, foreign_key: :first_user_id, class_name: 'Game'
  has_many :second_user_games, foreign_key: :second_user_id, class_name: 'Game'

  def games
    first_user_games + second_user_games
  end
end 
```

我认为这可能是一个不好的迹象，表明你需要这个，而且会很痛苦。相反，您可以只添加一个 UserGames 表和 UserGame 连接模型，在 UserGame 上放置一个名为“player_number”的列，然后`has_many :games, through: :user_games`在 User 上执行以获取所有游戏，而不考虑玩家编号，然后根据需要使用查询、过滤、范围等只找到玩家是特定数量的游戏。以下是与连接模型中列的范围/条件相关的一些问题`has_many ..., through: ...`，以防您希望能够访问用户中的游戏列表，其中玩家是特定玩家#：

*   [Rails 通过复杂的 has_many 和 has_many](https://stackoverflow.com/questions/14989680/rails-complex-has-many-and-has-many-through)
*   [范围与加入：has_many：通过关联](https://stackoverflow.com/questions/5856838/scope-with-join-on-has-many-through-association)

# visual-studio - 在 Visual Studio 加载项中添加新的项模板参数

> ID：15000575
> 
> 赞同：1
> 
> 时间：2013-02-21T11:02:32.923
> 
> 标签：visual-studio, templates, parameters

我想为 Visual Studio 2012 创建新的加载项，为项目模板添加新参数。这个想法是在类、接口和其他现有模板中使用新参数。问题是新参数不是静态的。我需要查询 LDAP 和 WMI。有人知道该怎么做吗？

# css-transitions - ul 的 CSS 高度过渡不起作用

> ID：15000576
> 
> 赞同：0
> 
> 时间：2013-02-21T11:02:36.490
> 
> 标签：css-transitions, css

我有以下CSS：

```
#cssmenu .has-sub .has-sub:hover > ul {
  height: 76px;
}
#cssmenu .has-sub .has-sub ul {
  height: 0px;
  overflow: hidden;
  position: inherit;
  left: -1px;
  top: -1px;
  background-color: #999;
  transition: height 2s;
  -moz-transition: height 2s; /* Firefox 4 */
  -webkit-transition: height 2s; /* Safari and Chrome */
  -o-transition: height 2s; /* Opera */
} 
```

使用这个 html：

```
<div id="cssmenu">
  <ul>
    <li class="active has-sub"><a href="#"><span>Products</span></a>
      <ul>
        <li class="has-sub"><a href="#"><span>Product 1</span></a>
          <ul>
            <li><a href="#"><span>Sub Product</span></a></li>
            <li class="last"><a href="#"><span>Sub Product</span></a></li>
          </ul>
        </li>
        <li class="has-sub"><a href="#"><span>Product 2</span></a>
           <ul>
            <li><a href="#"><span>Sub Product</span></a></li>
            <li class="last"><a href="#"><span>Sub Product</span></a></li>
          </ul>
        </li>
        <li class="has-sub"><a href="#"><span>Product 3</span></a>
          <ul>
            <li><a href="#"><span>Sub Product</span></a></li>
            <li class="last"><a href="#"><span>Sub Product</span></a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</div> 
```

当我将鼠标移到产品 1 上时，我会：

![在此处输入图像描述](../Images/5b54e4fa553a9b940e0eb0ca1a24047f.png)

![在此处输入图像描述](../Images/fbe60451125efb1c272ad361e8f134f9.png)

过渡只是不起作用。我哪里出错了？

[整个页面都可以在这里找到](http://pusit.dyndns.org/test/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:12:20.530

不要隐藏您要转换的孩子 ul。将其设置为 display:block （它的高度无论如何都是 0px 所以你看不到它）。

```
 #cssmenu .has-sub ul ul {
    display: block;
  } 
```

一个更整洁的方法是使用您的原始 ul 选择器更具体，并且只隐藏父 UL，而不是隐藏所有 UL 并将子切换回 display: 块。不过，您需要添加另一个类来使用这种方法：

```
 #cssmenu .top-sub-menu > ul {
    display: none;
  } 
```

# c - c 应用程序中的变量和函数命名约定

> ID：15000577
> 
> 赞同：0
> 
> 时间：2013-02-21T11:02:39.720
> 
> 标签：c, coding-style

我使用 vs 2010 制作了一个 C 应用程序，并遵循带有下划线的小写字母作为应用程序中变量和函数的命名约定。我被要求在整个申请中遵循骆驼案。我想问一下这是否是 c 中命名约定的正确方法，如果是，那么是否有任何工具可以将现有 c 应用程序中的所有变量和函数转换为驼峰式大小写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:09:40.733

编码标准因公司而异。大多数成熟的公司都有一个，并且可能有一些旧代码在某个地方不遵循它。

只要编码风格一致，那么您就知道在您的应用程序中检查车门是否打开的函数的名称，无论它是否被调用`car_door_open`，`CarDoorOpen`都`cardoorisopen`无关紧要。关键是一致性。

我不知道有什么工具可以重命名代码中的所有标识符，但现代 IDE 有一个“重命名此标识符”，这对这类事情非常有帮助。

# python-3.x - Python3从线程类到进程

> ID：15000583
> 
> 赞同：0
> 
> 时间：2013-02-21T11:02:57.457
> 
> 标签：python-3.x, multiprocessing

我有一些独立的线程，如果我可以将它们放入 Process 中，它们可能会获得一些速度。

我将类 x(Thread): 与 def run(self): 更改为类 x(Process)... 但进程似乎没有调用 run()。

设置流程的正确语法是什么？

```
def __init()__:
    Process.__init()__(self, Target=self.run, args=(self,)): ??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:19:55.203

您可能只是缺少调用`instance.start()`where`instance`是您之前设置为`class x`.

如果您提供更多（代码）上下文，则更容易回答。据我所知，您正在混合两种不同的方式来设置和启动新线程或进程。这不一定是坏事，可能是故意的。但如果不是，那么您输入的内容超出了您的需要。

一种方法是：

```
p = Process(target=f, args=('bob',))
p.start()
p.join() 
```

具有`f`任何功能。第一行设置一个新`Process`实例，第二行分叉并因此启动（子）进程，并`p.join()`等待它完成。这是[文档的确切示例](http://docs.python.org/3.2/library/multiprocessing.html#the-process-class)

在第二个用例中，您从 子类化`class Process`，然后`target`在调用构造函数时通常不指定 a 。`run`是实际调用方法时作为分叉调用的默认`process.start()`方法。

```
class MySubProcess(multiprocessing.Process):
    def __init__(self, *args, **kwargs):
        super().__init__(self)
        # some more specific setup for your class using args/kwargs
    def run(self):
        # here's the code that is going to be run as a forked process
        pass 
```

然后运行

```
p = MySubProcess(any_args_here)
p.start()
p.join() 
```

如果您不需要任何参数，则无需`__init__`为您的子类定义构造函数。

这两种方法都允许在 threading.Thread 和 multiprocessing.Process 数据类型之间切换，只需很少的代码更改。当然，数据共享的工作方式发生了变化，线程和进程的通信也不同。

# ruby-on-rails-3 - 找不到链接（Capybara::ElementNotFound）

> ID：15000584
> 
> 赞同：2
> 
> 时间：2013-02-21T11:02:58.870
> 
> 标签：ruby-on-rails-3, cucumber, saas

我有问题：

```
When I follow "Find Movies With Same Director"                         #   
features/step_definitions/web_steps.rb:56
Unable to find link "Find Movies With Same Director" (Capybara::ElementNotFound) 
```

在 web_steps.rb 中：

```
When /^(?:|I )follow "([^"]*)"$/ do |link|
  click_link(link)
end 
```

在我的路线中：

```
find_movies_with_same_director_movie GET    /movies/:id/find_movies_with_same_director(.:format) {:action=>"find_movies_with_same_director", :controller=>"movies"}
                              movies GET    /movies(.:format) 
```

在我看来show.html.haml：

```
%br
= link_to 'Find Movies With Same Director',  find_movies_with_same_director_movie_path(@movie) 
```

在控制器 movies_controller.rb 中：

```
def find_movies_with_same_director
  # some code
end 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:25:59.947

感谢 Sevenseacat 的提示：save_and_open_page

我有场景：

```
Scenario: find movie with same director
Given I am on the details page for "Star Wars"
When  I follow "Find Movies With Same Director" 
```

一步：鉴于我在“星球大战”的详细信息页面上，我有错误：

```
when /^the details page for "(.*)"$/       
  movies_path(Movie.find_by_title($1)) 
```

正确的道路：

```
when /^the details page for "(.*)"$/       
  movie_path(Movie.find_by_title($1)) 
```

# javascript - 有什么方法可以创建一个扩展数组的对象？

> ID：15000587
> 
> 赞同：0
> 
> 时间：2013-02-21T11:03:08.510
> 
> 标签：javascript

我在 javascript 中创建了一个词法分析器，现在我使用数组来描述一系列项目，我现在看到使用自己的 Range 对象，这样我就可以正确区分“数组”和“范围数组”一种读起来很好的方式。

那么有什么方法可以创建一个非常跨浏览器兼容的 Array 对象的子类？

或者只是使用数组的更好/更简单的方法，对于“范围数组”，我只是用我自己选择的属性标记数组？

就像是：

```
var myRange = [1,2,3];
myrange.isRangeObj = true;

//i would then use if(myRange.isRangeObj) to do specific range operations.
//However i still think myRange instanceof Range reads better 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:24:35.313

在 javascript 中使用组合来创建一个扩展数组的对象：

```
function Range(arr) {
  this.arr = arr;
}

var myRange = new Range([1, 2, 3]);

if (myRange instanceof Range) {
    doSomethingWithRange(myRange.arr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:40:36.957

你可以使用这个：

```
Array.prototype.isRangeObj = false; 
```

因此，您创建的所有数组都将具有该属性`isRangeObj`

# php - 按钮提交后重定向到另一个页面

> ID：15000591
> 
> 赞同：1
> 
> 时间：2013-02-21T11:03:25.923
> 
> 标签：php, redirect

我正在构建一个显示详细信息的应用程序（admin.php）。用户单击编辑（edit.php），他被重定向到另一个页面以编辑他的详细信息。编辑完成后，值会更新，我想再次重定向到显示详细信息的上一页。所有操作都按需要执行，但是当我尝试在“提交”内重定向到上一页时，它不会发生。

管理员.php

```
 $event_id = $_SESSION['fedit'];
    if($_GET['edit'])
    {
     $url = "edit.php?event_id=". $event_id;  
     header("Location: $url");
    } 
```

编辑.php

```
 if($_GET["Submit"])
              {
                 $val=$_GET['event'];
                 $remail=$_GET['email'];
                $rname = $_GET['ename'];
                $sqt=mysql_query("UPDATE users SET NAME='$rname',EMAIL='$remail' WHERE EID ='$val'");
                $page= "admin.php";
                header("Location: $page");
             } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:16:22.150

我不知道您将此代码放在页面上的哪个位置，但是如果在该**标头（位置：“”）**之前以某种方式发送了 http 标头输出，那么它将无法正常工作。尝试其他人的建议，但如果一切都失败了，你可能想使用 JS。

```
echo "<script>window.location.assign("admin.php")</script>"; 
```

用那个代替

```
header("Location: $page"); 
```

我猜它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:07:03.137

添加`action='edit.php' method='get'`到您的表单标签。并在 edit.php 页面中放置提交后的其余代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:07:07.663

最好这样做：

```
if ($_GET["Submit"]) {
   ...

   // Clean any output
   ob_clean();
   header("Location: $page");

   // Exit the PHP process 
   exit;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:20:19.080

从您发布的不完整代码中很难判断您在做什么。
但是，看起来不是重定向而是表单提交被破坏了。您的代码中还有 2 个严重缺陷：

*   任何编辑都必须使用 POST 方法完成，而不是 GET
*   您必须正确格式化您的 SQL 查询。

无论如何，这里有一个这样的应用程序示例（虽然只编辑一个字段。您可以轻松添加更多），它可以工作。

```
<?  
mysql_connect(); 
mysql_select_db("new"); 
$table = "test"; 
if($_SERVER['REQUEST_METHOD']=='POST') { //form handler part: 
  $name = mysql_real_escape_string($_POST['name']); 
  if ($id = intval($_POST['id'])) { 
    $query="UPDATE $table SET name='$name' WHERE id=$id"; 
  } else { 
    $query="INSERT INTO $table SET name='$name'"; 
  } 
  mysql_query($query) or trigger_error(mysql_error()." in ".$query); 
  header("Location: http://".$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']);  
  exit;  
}  
if (!isset($_GET['id'])) { //listing part: 
  $LIST=array(); 
  $query="SELECT * FROM $table";  
  $res=mysql_query($query); 
  while($row=mysql_fetch_assoc($res)) $LIST[]=$row; 
  include 'list.php'; 
} else { // form displaying part: 
  if ($id=intval($_GET['id'])) { 
    $query="SELECT * FROM $table WHERE id=$id";  
    $res=mysql_query($query); 
    $row=mysql_fetch_assoc($res); 
    foreach ($row as $k => $v) $row[$k]=htmlspecialchars($v); 
  } else { 
    $row['name']=''; 
    $row['id']=0; 
  } 
  include 'form.php'; 
}  
?> 
```

你还需要 2 个模板来保存你的 HTML

表单.php

```
<form method="POST">
<input type="text" name="name" value="<?=$row['name']?>"><br>
<input type="hidden" name="id" value="<?=$row['id']?>">
<input type="submit"><br>
<a href="?">Return to the list</a>
</form> 
```

列表.php

```
<a href="?id=0">Add item</a>
<? foreach ($LIST as $row): ?>
<li><a href="?id=<?=$row['id']?>"><?=$row['name']?></a>
<? endforeach ?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-21T11:07:56.937

Actually, that is not going to work, isnce your edit.php will never reach its if statement, as you are not sending $_GET["submit"]. You need to do the following (send the submit variable by setting it to any value)

admin.php

```
 $event_id = $_SESSION['fedit'];
 if($_GET['edit'])
 {
   $url = "edit.php?event_id=". $event_id . "&submit=1";
   header("Location: $url");
 } 
```

edit.php

```
if($_GET["Submit"])
{
   $val=$_GET['event'];
   $remail=$_GET['email'];
   $rname = $_GET['ename'];
   $sqt=mysql_query("UPDATE users SET NAME='$rname',EMAIL='$remail' WHERE EID ='$val'");
   header("Location: admin.php");
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T11:06:41.487

使用 `header("Location : ". $page);` 而不是`header("Location: $page");`

```
 if($_GET["Submit"])
          {
             $val=$_GET['event'];
             $remail=$_GET['email'];
            $rname = $_GET['ename'];
            $sqt=mysql_query("UPDATE users SET NAME='$rname',EMAIL='$remail' WHERE EID ='$val'");
            $page= "admin.php";
            header("Location : ". $page);
         } 
```

# extjs - Sencha ExtJS 空网格行

> ID：15000592
> 
> 赞同：0
> 
> 时间：2013-02-21T11:03:30.293
> 
> 标签：extjs

我已经按照这些示例设置了一个 MVC 风格的应用程序，该应用程序带有一个网格，该网格从商店中的一个数组中获取其数据。

渲染网格时，会显示列，但行是空的。存储数据数组中的空行数始终与记录数一样多，但字段为空白。

这是我的看法

```
Ext.define('MyLodge.view.content.MemberGrid', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.membergrid',

    initComponent: function(){

        var store = Ext.create('MyLodge.store.Members');

        Ext.apply(this, {
            height: this.height,
            store: store,
            stripeRows: true,
            columnLines: true,
            columns: [{
                id       :'name',
                text   : 'Name',
                flex: 1,
                sortable : true,
                dataIndex: 'name'
            },{
                text   : 'E-Mail',
                width    : 150,
                sortable : true,
                dataIndex: 'email'
            },{
                text   : 'Href',
                width    : 200,
                sortable : true,
                dataIndex: 'href'
            }]
        });

        this.callParent(arguments);
    }
}); 
```

这是我的模型：

```
Ext.define('MyLodge.model.Member', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'name'},
        {name: 'email'},
        {name: 'href'}
    ]
}); 
```

这是我的商店：

```
Ext.define('MyLodge.store.Members', {
    extend: 'Ext.data.ArrayStore',
    model: 'MyLodge.model.Member',
    data: [
           {name: 'Kevin Lippiatt', email: 'kevin@email.com', href: 'http://blah.com/kevin'},
           {name: 'Phillip Morris', email: 'phill@yahoo.co.uk', href: 'http://blah.com/phillip'},
           {name: 'A N Other', email: 'email@domain.com', href: 'http://blah.com/other'}
    ]
}); 
```

我在网格中得到三个空白行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:10:46.163

`Ext.data.Store`您的商店应该从不扩展`ArrayStore`

这是一个小提琴：

[http://jsfiddle.net/yVmQd/223/](http://jsfiddle.net/yVmQd/223/)

# xpath - 在过滤器中介器中使用 XPath 函数

> ID：15000596
> 
> 赞同：0
> 
> 时间：2013-02-21T11:03:42.993
> 
> 标签：xpath, wso2, wso2esb, synapse

在代理的 inSequence 中，我在[filter mediator](http://docs.wso2.org/wiki/display/ESB451/Filter+Mediator)中使用 xpath 查询进行过滤。但我想使用 XPath 函数，如`exists()`or `count()`。但这不起作用，并且总是会产生异常。这是我的例子：

```
<filter xpath="count($body/myElement)>2">
 <drop/>
</filter> 
```

我总是得到例外：

```
ERROR - FilterMediator Error evaluating XPath expression : n:exists($body/avintis:Exception)
        org.jaxen.UnresolvableException: No Such Function exists 
```

我怎样才能使这些功能起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:27:52.287

您可以将 xpath 函数与过滤器调解器一起使用来修改突触段，如下所示。

```
<filter xpath="fn:exists($body/myElement)">
 <drop/>
</filter> 
```

您可以参考示例 156：服务集成，并在 [1] 中指定可用的接收序列以获取更多示例。

```
 <filter xpath="fn:number(get-property('SIMPLE_SER_AMT')) > fn:number(get-property('SECURE_SER_AMT'))"> 
```

[1]。[http://wso2.org/project/esb/java/4.0.3/docs/samples/proxy_samples.html](http://wso2.org/project/esb/java/4.0.3/docs/samples/proxy_samples.html)

谢谢你，达沙纳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T13:46:20.650

对于那些想知道如何使用 fn:count 的人，您可以尝试：

```
<property name="itemCount" expression="fn:count(//*[local-name()='item'])"/>
<filter xpath="fn:number(get-property('itemCount')) > fn:number(0)"> 
```

这对我有用。

# internationalization - 无法覆盖 Play 2.0.4 中的默认消息

> ID：15000597
> 
> 赞同：1
> 
> 时间：2013-02-21T11:03:45.937
> 
> 标签：internationalization, playframework-2.0, overriding, message, default

我正在覆盖文件 /conf/messages 中的默认播放消息

```
error.required=Dieses Feld ist erforderlich 
```

这适用于我的本地机器，但不适用于开发服务器。我通过“播放阶段”部署应用程序，然后同步它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:16:00.227

将其保存为`messages.en`或更好`messages.de`，并将主要语言切换为 Deutsch in`application.conf`

# jquery - 对 TD 中的多个值求和

> ID：15000604
> 
> 赞同：0
> 
> 时间：2013-02-21T11:04:04.320
> 
> 标签：jquery, sum

我想获得一些值的总数和平均值，但我已经坚持启动 jQuery。这是因为我想要的值在同一张表中。

有人可以帮我从这个开始吗？

我的例子：http: [//jsbin.com/inapey/2/edit](http://jsbin.com/inapey/2/edit)

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:11:12.920

```
$(document).ready(function(){
  var total = 0;
  $('#ritten tr .single_ride').each(function() {
  var ritkm = $(this).html();
  total = total + parseInt(ritkm);
  });
   alert(total);  
}); 
````

# scheme - 浅平方案

> ID：15000606
> 
> 赞同：4
> 
> 时间：2013-02-21T11:04:15.180
> 
> 标签：scheme

有做“浅平”的功能吗？我的意思是，就像函数 flatten 但列表中的每个表达式只有一个 ()

例如：

```
 (shallow flat '((1) (2) ( ( 4 5) 6))) 
```

返回

```
'(1 2 (4 5) 6)) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:06:36.607

```
(apply append '((1) (2) ((4 5) 6)))   ;=> (1 2 (4 5) 6))
(apply append '((1) (2) (((4) 5) 6))) ;=> (1 2 ((4) 5) 6) 
```

你可以把它变成一个程序，即：

```
(define (shallow-flatten lst)
  (apply append lst)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:46:17.493

正如克里斯建议的那样，您可以使用 SRFI 1 的[concatenate](http://docs.racket-lang.org/srfi-std/srfi-1.html?q=concatenate#concatenate)：

```
(require srfi/1) ; import the library, this is Racket's syntax
(concatenate '((1) (2) ((4 5) 6))) 
```

或者，在 Racket 中，您可以使用[append*](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._append%2a%29%29)，检查它是否在您的解释器中可用：

```
(append* '((1) (2) ((4 5) 6))) 
```

无论哪种方式，结果都符合预期，没有必要通过定义一个已经存在的过程来重新发明轮子：

```
=> '(1 2 (4 5) 6) 
```

# browser - 为什么 Photoshop 设计显示的字体比真实浏览器中的要小？

> ID：15000614
> 
> 赞同：2
> 
> 时间：2013-02-21T11:04:41.010
> 
> 标签：browser, photoshop, font-size, dpi

我们已经获得了 Photoshop 为网站创建的规范。它为不同的项目（以磅为单位）提供特定的基于像素的面板宽度和各种字体大小。

例如，数据网格中的文本是 12pt Verdana。网格为 765px 宽。

当在浏览器（Chrome 或 IE）中以 100% 渲染时，网格为 765 像素，如预期的那样，但字体看起来比设计大（在浏览器中大约大 20-25%）。

我们怀疑 Photoshop 中的 DPI 设置可能是一个原因，但如果有的话，它们应该会产生相反的效果（Photoshop 文档设置为 72DPI，Windows/浏览器渲染为 96DPI）。

对我们忽略的内容有什么建议吗？应该以 96DPI 创作 Photoshop 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:08:03.437

Here is another discussion about pt vs px in photoshop and how you can change to px instead. Maybe it helps :)

[https://stackoverflow.com/questions/3868627/photoshop-pt-size-conversion-to-web](https://stackoverflow.com/questions/3868627/photoshop-pt-size-conversion-to-web)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-21T11:00:01.173

确保您的 Photoshop 文档设置为 72ppi，然后它将匹配浏览器大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-17T08:58:44.803

在 CS2 下，它是一个简单的过程，进入编辑菜单 -> 首选项子菜单 -> 单位和标尺，然后将单位类型更改为像素。

# ruby-on-rails - 使用 ruby 更改文件扩展名

> ID：15000615
> 
> 赞同：11
> 
> 时间：2013-02-21T11:04:41.847
> 
> 标签：ruby-on-rails, ruby, rubygems

我有一个远程文件夹中的 .eml 文件列表说

```
\\abcremote\pickup 
```

我想重命名所有文件

```
xyz.eml to xyz.html 
```

你们能帮我用红宝石做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-21T11:49:10.707

稍微改进一下之前的答案：

```
require 'fileutils'
Dir.glob('/path_to_file_directory/*.eml').each do |f|
    FileUtils.mv f, "#{File.dirname(f)}/#{File.basename(f,'.*')}.html"
end 
```

将为您提供不带扩展名的`File.basename(f,'.*')`名称，否则文件将最终成为 file_name.eml.html 而不是 file_name.html

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-21T20:43:28.643

Rake 提供了一个简单的命令来更改扩展名：

```
require 'rake'
p 'xyz.eml'.ext('html') # -> xyz.html 
```

再次改进以前的答案：

```
require 'rake'
require 'fileutils'
Dir.glob('/path_to_file_directory/*.eml').each do |filename|
    FileUtils.mv( filename, filename.ext("html"))
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-16T11:20:01.233

[Pathname](https://ruby-doc.org/stdlib-2.5.0/libdoc/pathname/rdoc/Pathname.html)具有[`sub_ext()`](https://ruby-doc.org/stdlib-2.5.0/libdoc/pathname/rdoc/Pathname.html#method-i-sub_ext)替换扩展名的方法，以及[`glob()`](https://ruby-doc.org/stdlib-2.5.0/libdoc/pathname/rdoc/Pathname.html#method-c-glob)and [`rename()`](https://ruby-doc.org/stdlib-2.5.0/libdoc/pathname/rdoc/Pathname.html#method-i-rename)，允许更紧凑地重写接受的答案：

```
require 'pathname'
Pathname.glob('/path_to_file_directory/*.eml').each do |p|
    p.rename p.sub_ext(".html")
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-08T23:09:21.887

更简单

```
'abc . . def.mp3'.sub /\.[^\.]+$/, '.opus' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T11:24:08.933

只要您有权访问该文件夹位置，您就应该能够使用`Dir.glob`和`FileUtils.mv`

```
Pathname.glob('path/to/directory/*.eml').each do |f|
  FileUtils.mv f, "#{f.dirname}/#{f.basename}.html"
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-21T20:21:46.987

一种方法是使用 net-sftp 库：以下方法将使用所需的文件扩展名重命名所有文件，这也将确保其他格式不受影响。

1.  dir =“路径/到/远程/目录”
2.  实际_ext =“.eml”
3.  想要的_ext =“.html”

```
require 'net/sftp'
  def add_file_extension(dir, actual_ext, desired_ext)
    Net::SFTP.start(@host, @username, @password) do |sftp|
      sftp.dir.foreach(dir) do |file|
        if file.name.include? actual_ext
          sftp.rename("#{dir}/#{file.name}", "#{dir}/#{file.name.slice! actual_ext}#{desired_ext}")
        else
          raise "I cannot rename files other than which are in #{actual_ext} format"
        end
      end
    end
  end
```

# codeigniter - 如何通过一个功能显示不同的页面，在菜单中应该如何声明链接？

> ID：15000618
> 
> 赞同：1
> 
> 时间：2013-02-21T11:04:59.937
> 
> 标签：codeigniter, menu

headerview.php

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title><?php echo $title; ?></title>
    </head>
    <body>
        <div id="topmenu">
            <ul>
                <li><a href="What Should I write Here ?">Home</a></li>
                <li><a href="What Should I write Here ?">About Us</a></li>
                <li><a href="What Should I write Here ?">Contact Us</a></li>
            </ul>    
        </div> 
```

页脚视图.php

```
</body>
</html> 
```

控制器/main.php

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class main extends CI_Controller {
 function index(){
     $this->load->view('headerview');
     $this->load->view('homeview');
     $this->load->view('footerview');
  } 

}
?> 
```

如何通过一个函数显示 view/about_us_view.php、view/contact.php 等页面？

-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:47:16.697

我假设你所有的视图页面都在根视图文件夹中

控制器

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class Main extends CI_Controller {

 function index($page = 'homeview')
{

    if ( ! file_exists('application/views/'.$page.'.php')){

        show_404();
    }
    else{

    $this->load->view('headerview');
    $this->load->view( $page);
    $this->load->view('footerview');
        }

}

} 
```

标题

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title><?php echo $title; ?></title>
    </head>
    <body>
        <div id="topmenu">
            <ul>
                <li><a href="<?php echo base_url('index.php/main');?>">HOME</a></li>
                <li><a href="<?php echo base_url('index.php/main/index/about_us_view');?>">About Us</a></li>
                <li><?php echo base_url('index.php/main/index/contact');?>">Contact Us</a></li>
            </ul>    
        </div> 
```

下面给出了基本的 url 模式

```
http://example.com/[controller-class]/[controller-method]/[arguments] 
```

在 index 函数中，我们将页面名称作为参数传递

查看联系页面

```
<?php echo base_url('index.php/main/index/contact');?> 
```

这里

控制器：主

方法：索引

论据：接触

还会在 config/autoload.php 中自动加载 url 帮助程序。

```
$autoload['helper'] = array('url'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T12:14:35.710

您需要执行以下操作：

headerview.php

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title><?php echo $title; ?></title>
    </head>
    <body> 
```

主页视图.php

```
<?php $this->load->view('headerview'); ?>
<div id="topmenu">
            <ul>
                <li><a href="What Should I write Here ?">Home</a></li>
                <li><a href="What Should I write Here ?">About Us</a></li>
                <li><a href="What Should I write Here ?">Contact Us</a></li>
            </ul>    
        </div>  
<?php $this->load->view('footerview'); ?> 
```

和footerview.php

```
</body>
</html> 
```

和控制器

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class main extends CI_Controller {
 function index(){
     $this->load->view('homeview');
  } 
}
?> 
```

# javascript - 为什么全局“窗口”对象具有多级访问权限

> ID：15000622
> 
> 赞同：2
> 
> 时间：2013-02-21T11:05:08.200
> 
> 标签：javascript

我正在玩寻找东西的窗口对象。我注意到，全局窗口对象被复制到多个级别。

尝试：

```
console.log(window); // returns global window object
console.log(window.window); // returns global window object
console.log(window.window.window); // returns global window object
console.log(window.window.window.window); // returns global window object 
console.log(window.window.window.window.window); // returns global window object

console.log(window === window.window); // returns true
console.log(window.window.window === window.window.window.window); // returns true

window.zombie = "Zombie!";

console.log(window.zombie === window.window.zombie); // returns true 
```

我们有什么办法可以利用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T11:06:21.850

它不是真正的多级，您只需要一个属性指向自身，然后就可以进行递归。

例如：

```
var zombie = {
    fred: 'Hello'
};

zombie.zombie = zombie; 
```

你现在可以疯狂地做：

```
alert(zombie.zombie.zombie.zombie.fred); 
```

至于为什么存在这种情况的具体细节`window`，请参阅 Kevin Brydons 的回答。这对于第一级是有意义的，但其余的只是自我引用的副产品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T11:08:13.300

Mozilla have done a concise explanation of the `.window` property

[https://developer.mozilla.org/en-US/docs/DOM/window.window](https://developer.mozilla.org/en-US/docs/DOM/window.window)

And excerpt :

> The point of having the window property refer to the object itself was (probably) to make it easy to refer to the global object (otherwise you'd have to do a manual var window = this; assignment at the top of your script)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T11:08:28.480

> The point of having the window property refer to the object itself was (probably) to make it easy to refer to the global object (otherwise you'd have to do a manual var window = this; assignment at the top of your script).
> 
> Another reason is that without this property you wouldn't be able to write, for example, "window.open('[http://google.com/](http://google.com/)')" - you'd have to just use "open('[http://google.com/](http://google.com/)')" instead.
> 
> Yet another reason to use this property is for libraries which wish to offer OOP-versions and non-OOP versions (especially JavaScript modules). If, for example, we refer to "this.window.location.href", a JavaScript module could define a property called "window" inside of a class it defined (since no global "window" variable exists for it by default) which, could be created, for example, after passing in a window object to the module class' constructor. Thus, "this.window" inside of its functions would refer to that window object. In the non-namespaced version, "this.window" would simply refer back to "window", and also be able to get the document location without trouble. Another advantage is that the objects of such a class (even if the class were defined outside of a module) could change their reference to the window at will, as they would not be able to do if they had hard-coded a reference to "window" (yet the default in the class could still be set as the current window object).

[source](https://developer.mozilla.org/en-US/docs/DOM/window.window)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T11:06:18.667

来自[MDN](https://developer.mozilla.org/en-US/docs/DOM/window)：

> window.window ：返回对当前窗口的引用。

这个简单的引用使对象循环。

# python - 粉碎回收站 - Python

> ID：15000625
> 
> 赞同：0
> 
> 时间：2013-02-21T11:05:21.630
> 
> 标签：python, windows, recycle-bin, shred

我正在使用 Python 2.7 为 Windows 32 开发文件粉碎机。所需功能之一是能够切碎所有回收站内容。

至于其他文件，在回收站之外，我们实现了一个“粉碎”功能，用垃圾覆盖文件内容，并删除文件。

但是，为了在回收站内容上使用这个“粉碎”功能，我们考虑使用[这个库](https://winshell.readthedocs.org/en/latest/recycle-bin.html)。使用这个库，我们可以先取消删除该项目（恢复它），然后再粉碎它。但是，这种方法不适合，因为：

1.  这可能会使将粉碎回收站内容的用户感到困惑，因为他可能会在粉碎时看到回收内容再次出现在文件系统中。

2.  Windows 将显示“Resotring”对话框，同时取消删除功能正在运行。这是不可取的。

关于如何实施回收站碎纸机有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:45:39.103

您可以使用 Pywin32 中的 shell 模块来获取真实路径：

```
from win32com.shell import shell, shellcon
idl = shell.SHGetSpecialFolderLocation(0, shellcon.CSIDL_BITBUCKET)
d = shell.SHGetDesktopFolder()
sf = d.BindToObject(idl, None, shell.IID_IShellFolder)

for i in sf:
    print sf.GetDisplayNameOf(i, shellcon.SHGDN_NORMAL)
    print sf.GetDisplayNameOf(i, shellcon.SHGDN_FORPARSING) 
```

# memory - Tizen 模拟器没有在 mac 上运行

> ID：15000628
> 
> 赞同：5
> 
> 时间：2013-02-21T11:05:29.927
> 
> 标签：memory, mobile, shared-memory, tizen, tizen-emulator

我在创建和启动 Tizen 模拟器时遇到问题。我收到以下错误“无法启动此 VM。共享内存不足。”

![在此处输入图像描述](../Images/cc362e50cbd77dcdec31f42de916e75c.png)

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T10:13:40.827

从 tizen 线程[https://bugs.tizen.org/jira/browse/TSDK-8](https://bugs.tizen.org/jira/browse/TSDK-8)，使用这些命令来修改系统控制变量，这对我来说很好。

```
sudo sysctl -w kern.sysv.shmmax=1610612736
sudo sysctl -w kern.sysv.shmall=393216
sudo sysctl -w kern.sysv.shmmin=1
sudo sysctl -w kern.sysv.shmmni=32
sudo sysctl -w kern.sysv.shmseg=8
sudo sysctl -w kern.maxprocperuid=512
sudo sysctl -w kern.maxproc=2048 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T19:31:12.513

重新启动我的 MacBook Pro 并再次运行模拟器解决了我使用 Tizen 2.0.0 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:10:31.167

尝试禁用以下加速选项的机器人，看看它是否有效：

![在此处输入图像描述](../Images/d5930a70c5a7ed8c3d8c44406f5177d4.png)

如果模拟器启动，则交替禁用它们并查看哪些选项可能正在执行此操作。

# python - 检查变量值是否在数组中 Django

> ID：15000629
> 
> 赞同：0
> 
> 时间：2013-02-21T11:05:31.063
> 
> 标签：python, django, arrays, compare

嗨，谁能告诉我如何检查变量值是否在数组中，或者不像我有

```
variable = 17.40
array = [14.40,14.12,45.50.....] 
```

需要检查变量值是否存在

编辑我尝试了以下但它不起作用

```
scoremx = [19,18,17]
style_score=score.objects.get(user_id=request.user.id)
if style_score.style_quiz_score in scoremx: 

it goes in else cxondition but it has the 19 value in database 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:21:58.350

尝试这个：

```
if int(style_score.style_quiz_score) in scoremx:
    pass 
```

您无法比较 int 和 float。你应该这样做：

```
if 17 <= style_score.style_quiz_score < 20:
   pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:06:41.380

```
if variable in array:
    #do something 
```

# java - 简单的 hello world 应用程序 - Cucumber

> ID：15000632
> 
> 赞同：4
> 
> 时间：2013-02-21T11:05:34.293
> 
> 标签：java, cucumber

我刚刚发现了 Cucumber，它似乎更倾向于行为驱动测试？或不？

另外，我得到了这个示例代码：

```
public class HelloStepdefs {
    private Hello hello;
    private String hi;

    @Given("^I have a hello app with \"([^\"]*)\"$")
    public void I_have_a_hello_app_with(String greeting) {
        hello = new Hello(greeting);
    }

    @When("^I ask it to say hi$")
    public void I_ask_it_to_say_hi() {
        hi = hello.sayHi();
    }

    @Then("^it should answer with \"([^\"]*)\"$")
    public void it_should_answer_with(String expectedHi) {
        assertEquals(expectedHi, hi);
    }
} 
```

根据我的理解，这个类会因为`@Given`注解而启动Hello类，那么如果被注解的方法`@When`被执行，它会调用带有`@Then`注解的方法吗？

无论如何，Cucumber 似乎很有趣，但是，它如何与现有的设计模式以及现有的框架（如 Spring 等）一起工作。

此外，在处理面向数据库的设计时如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:47:39.307

[cucumber](http://cukes.info/)确实是一个 BDD 工具，它起源于 ruby​​ 社区。 [cucumber-jvm](https://github.com/cucumber/cucumber-jvm)是 java 实现。

关于[Given/When/Then](https://github.com/cucumber/cucumber/wiki/Given-When-Then)，这些是特征文件中各个步骤的别名，而 ruby​​ 不区分它们。但它们很有价值，因为它们为编写、实施或阅读功能的各种利益相关者提供了上下文。

在与 spring 的集成方面，[cuke4duke](https://github.com/cucumber/cuke4duke/wiki/Spring)可能符合要求。

# autocompletetextview - 关于 Autocomplete TextView 的查询

> ID：15000635
> 
> 赞同：1
> 
> 时间：2013-02-21T11:05:44.717
> 
> 标签：autocompletetextview

我正在使用一个使用字符串数组列表的 AutocompleteTextView。我的要求是，我需要将与 arraylist 匹配的字符串数与在 AutocompleteTextView 小部件中输入的字符数相匹配。请建议如何实现此功能。

问候，维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T11:29:12.173

好吧，您手头有一个 ArrayList，您可以在其中搜索以键入的字母开头的单词。使用以下方法。

```
autocompletetextview.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // set count to zero here

            }

            @Override
            public void afterTextChanged(Editable s) {

                // Do your search here

            }
        }); 
```

当您在视图中键入时，您将获得参数“s”中的文本。然后`element.startsWith(s)`用于 ArrayList 的每个元素。如果为真，则增加计数。

# asp.net - SharePoint 开发工具

> ID：15000636
> 
> 赞同：0
> 
> 时间：2013-02-21T11:05:45.813
> 
> 标签：asp.net, .net, sharepoint

我来自 asp.net 背景，我正在使用 Visual Studio 和 TFS 来构建 Web 应用程序。现在我想开始一个新的 SharePoint 项目，那么如果我需要编写一些代码来扩展 SharePoint 或开发 Web 部件，需要哪些开发工具？最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T07:32:23.767

除了[肖恩](https://stackoverflow.com/users/1812512/sean)的回答：

您可以下载 Visual Studio "CKSDev" 的插件，这是开发过程中非常有用的工具。这将允许您在每次更改代码或/和 aspx/ascx 文件时发布 DLL 和资源，而无需编译和安装包。

如果不是 VS 的标准模板，您就可以开始开发了。

以下是在 SharePoint 下开发时有用的一些工具列表：

1.  **RR CAML Query Helper** - 帮助构建 CAML 查询
2.  **SharePoint 列表项编辑工具**- 帮助编辑列表中的项目（高级用法）
3.  **ULS Deobfuscator** - 有助于查看日志
4.  **ULS 查看器**- 有助于查看日志
5.  **Sharepoint Manager 2010** - 帮助探索您的场和 SharePoint 的所有信息（非常有用）
6.  **SPFeature Explorer** - 探索农场上安装的特征
7.  **Chris O Brien SP 部署向导**- 用于导出、导入整个站点或特定资源的 Hekps。
8.  **托管元数据导出器**- 如果您使用 MMS 服务应用程序，这对于导出数据以使其在其他 MMS 上可用或创建备份非常有用。

希望能帮助到你，

安德鲁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:39:29.953

Visual Studio 2010 和 2012 都带有用于 SharePoint 开发的内置项目模板，并且全部用 .Net 编写，因此就您的 IDE 而言，这就是您真正需要的一切。

但是，您将需要可以从 SharePoint 服务器复制的 SharePoint DLL，或者您可以在本地安装 SharePoint。有关如何在 Windows 7 上执行此操作的说明，请参阅这篇文章：http: [//blogs.msdn.com/b/johnwpowell/archive/2009/11/24/how-to-install-sharepoint-2010-on-windows -7.aspx](http://blogs.msdn.com/b/johnwpowell/archive/2009/11/24/how-to-install-sharepoint-2010-on-windows-7.aspx)（本文还链接到完整的 MSDN 帖子，如果您遇到困难，其中包含所有详细说明）

# jquery - 检索 svg g 的子元素

> ID：15000643
> 
> 赞同：1
> 
> 时间：2013-02-21T11:06:02.797
> 
> 标签：jquery, svg

我正在尝试检索 svg g 元素的值。下面是我的代码

```
<div id="chart">
    <svg width="1386" height="186">
    <g transform="translate(0,0)">    
    <g><circle class="node highlight" r="17.603478526018918" style="fill: #008000;" cx="521.2058097619438" cy="67.43023189750437"></circle>
    </g>
    <g><text class="label highlight" dx="22.603478526018918" dy=".35em" transform="translate(521.2058097619438,67.43023189750437)">CNN</text>
    </g>
    </g>
    </svg>
</div> 
```

在上述情况下，我想访问第三个“g”元素值，即“CNN”。我如何使用 jQuery 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:13:01.090

尝试这个：

```
console.log($('#chart').find('g').eq(2).text()); 
```

或者这样：

```
console.log($('#chart').find('text').eq(0).text()); 
```

甚至更好：

```
$('#chart g').find('text').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:14:43.743

```
s = '<div id="chart"><svg width="1386" height="186"><g transform="translate(0,0)"><g><circle class="node highlight" r="17.603478526018918" style="fill: #008000;" cx="521.2058097619438" cy="67.43023189750437"></circle></g><g><text class="label highlight" dx="22.603478526018918" dy=".35em" transform="translate(521.2058097619438,67.43023189750437)">CNN</text></g></g></svg></div>'

$('g:nth-of-type(2)',$(s)) 
```

# jquery - 显示 jQuery 验证错误的备用元素

> ID：15000644
> 
> 赞同：1
> 
> 时间：2013-02-21T11:06:02.983
> 
> 标签：jquery, jquery-validate

如何在一个单独的元素（例如：）中显示所有验证错误，`div`而不是使用附加到每个元素的标签？

目前我有以下代码将所有错误绑定到`div`表单下方的另一个元素。

```
$('#myForm').validate({
        rules:{
            txtName:{
                required:true,
                minlength:5,
                maxlength:100
            },
            selGroups:{
                required:true
            },
            txtDate:{
                required:true
            }
        },
        submitHandler:function () {
            return false;
        },
        messages:{
            txtHolidayName:"Please enter the Name (5 - 100 chars)",
            selGroups:"Please select the Group",
            txtHolidayDate:"Please select the date"
        },
        errorPlacement:function (error, element) {
            error.appendTo($('#errorContainer'));
        },
        invalidHandler:function (form, validator) {
            var errors = validator.numberOfInvalids();
            if (errors)
                $('#errorContainer').fadeIn();
        }
    }); 
```

我已经部分实现了这一点，但是在`div`所有验证成功后隐藏包含所有错误的元素时遇到了麻烦。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:28:06.590

使用**errorLabelContainer**设置，它也可以很好地与 wrapper 设置一起使用

```
$("form").validate({
errorLabelContainer: "#messageBox",
wrapper: "li",
}); 
```

确保你有相应的html

```
<ul id="messageBox"></ul>
<form>
 <input name="fname" id="fname" class="required">
 <input type="submit" />
</form> 
```

# testing - Selenium IDE - 输出中的脚本执行时间

> ID：15000648
> 
> 赞同：2
> 
> 时间：2013-02-21T11:06:15.727
> 
> 标签：testing, selenium, selenium-ide

你知道如何在 Selenium IDE 中查看脚本执行时间吗？我应该使用什么样的命令或选项？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-08T22:34:44.757

我想知道同样的事情，这就是我想出的。

```
storeEval | new Date().getTime() | startTime

// The rest of your code here

storeEval | new Date().getTime() | endTime
storeEval | (${endTime} - ${startTime}) / 1000 | scriptExecutionTime 
echo      | ${scriptExecutionTime} seconds | 
```

# c# - javascript不更新变量

> ID：15000649
> 
> 赞同：0
> 
> 时间：2013-02-21T11:06:16.560
> 
> 标签：c#, javascript, asp.net

我有一个 asp.net 应用程序，我正在尝试创建一个与系统一起运行的进度条，我正在使用 Java 脚本来进行更新进度，并想知道我将如何更新`var update = 0;`，这`$("#progressbar").progressbar('value', update);`在下面的代码中没有使用 for 循环，因为我已经准备好使用 for 循环和布尔值，系统会抛出一个长时间运行的程序的错误。其余的 java 脚本代码很糟糕，我想将其更新为 60；

**被调用的 JavaScript**

```
 $.updateProgressbar = function () {
        //Calling PageMethod for current progress
        PageMethods.OperationProgress(function (result) {

            //Updating progress
            $("#progressbar").progressbar('value', result.progress)
            //If operation is complete
            if (result.progress == 100) {
                //Enable button
                $("#Confirm_btn").attr('disabled', '');
            }
            //If not
            else {
                //Reset timer
                setTimeout($.updateProgressbar, 10);
            }
        });
    };

    $(document).ready(function () {
        //Progressbar initialization
        $("#progressbar").progressbar({ value: 0 });
        //Button click event
        $("#Confirm_btn").click(function (e) {

            e.preventDefault();

            //Disabling button
            $('#error').text("");
            $("#Confirm_btn").attr('disabled', 'disabled');

            var update = 0;

            //Making sure that progress indicate 0
            $("#progressbar").progressbar('value', update);
            //Call PageMethod which triggers long running operation
            PageMethods.Operation(function (result) {
                if (result) {
                    //Updating progress
                    $("#progressbar").progressbar('value', result.progress)
                    //Setting the timer
                    setTimeout($.updateProgressbar, 5);
                }
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:13:46.543

可以用来`setInterval`重复调用一个函数，这样这个函数就可以触发一个ajax函数或者简单的更新progresBar。这不会阻止您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:14:09.767

PageMethods.OperationProgress 似乎没有在回调函数中返回正确的结果对象。这就是为什么您的应用程序无休止地运行以及为什么您的进度条没有更新的原因

# .net - 对 ClickOnce 安装运行预安装操作

> ID：15000657
> 
> 赞同：1
> 
> 时间：2013-02-21T11:06:46.993
> 
> 标签：.net, excel, vsto, clickonce, comaddin

我们有一个部署为 ClickOnce 的 VSTO Excel COM-AddIn。

`IAddInPostDeploymentAction`这通过在清单中实现和绑定它来使用安装后操作`<vstav3:postActions>`。

但是，我们现在还需要一个预安装操作（读取注册表并禁用现有的插件）。

ClickOnce 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:57:17.720

做到这一点的唯一方法是创建一个先决条件来完成您想要完成的工作，并将其部署为先决条件。ClickOnce 本身不提供执行预安装命令的方法。

在创建设置和部署包后，您可以使用 Bootstrapper Manifest Generator 创建一个先决条件包，以执行您需要完成的任何命令。

# sql-server-2005 - 按月计算周

> ID：15000658
> 
> 赞同：0
> 
> 时间：2013-02-21T11:06:47.757
> 
> 标签：sql-server-2005

如何使用 select 语句从星期一开始按月获取星期几？

例如，'2013-01-06' = 星期日。

这应该在第 1 周内。

请协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:14:33.647

尝试这个

```
SET DATEFIRST 1
select DATEPART( wk, '2-21-2013') -DATEPART( wk, '2-1-2013')+1  FROM table; 
```

这样做的方式是在第一部分中添加日期，并在该月的第一天减去它+1

编辑

假设您单独的月、日、年值在 varchar 中

```
Select CAST(year + '-' + month + '-' + date AS DATETIME) - 
CAST(year + '-' + month + '-01' AS DATETIME) + 1 From table 
```

[小提琴](http://sqlfiddle.com/#!6/189a3/1157)

# download - 是否可以从视频中下载自动字幕？

> ID：15000659
> 
> 赞同：11
> 
> 时间：2013-02-21T11:06:58.543
> 
> 标签：download, extract, captions, srt

我的目标是从一组 youtube 视频中下载自动字幕。（我只是想根据查询获取视频信息和视频字幕）我读到的第一件事是，如果您不是所有者，则无法下载字幕。但我不想要所有者上传的字幕，我只需要自动的。

为此，我看到了一些解决方案，其中大多数带有外部应用程序。其中之一是通过以下 URL： http: [//video.google.com/timedtext](http://video.google.com/timedtext?type=track&v=3wszM2SA12E&name=Automatic&lang=en) ?type=track&v=3wszM2SA12E&name=Automatic&lang=en 问题是：

1.  这不是访问 youtube 数据的最佳方式。
2.  它不适用于每个视频。

Youtube API 是否提供访问此信息的方法？

先感谢您！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-18T06:43:58.127

您可以在我为能够编辑 YouTube 的自动字幕而创建的网站上为几乎所有公开可见的 YouTube 视频下载自动字幕。

转到此页面 www.diycaptions.com，然后将视频的 URL 粘贴到页面上的第二个输入框中，这将带您进入转录板。在该页面上，您将看到以 .srt 格式或纯文本格式 (.txt) 为您指定的视频下载自动字幕的链接。

如果您想更正它们，您可以使用我网站上的编辑器非常轻松地进行更正。只需将 YouTube URL 粘贴到页面上的第一个输入框中，您将被带到一个集成编辑器，您可以在其中轻松地使文本准确并适合上传到 YouTube 或第三方字幕网站，如 www.amara.org或 www.dotsub.com。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-08-19T13:09:10.850

是的（截至目前）。有一个名为 youtube-dl 的工具。它支持许多可以单独检查的选项。举个例子：

`>youtube-dl https://www.youtube.com/watch?v=YOUR_VIDEO_HASH --write-auto-sub --sub-lang en`

这将下载视频以及自动生成的英文字幕。

# iphone - 在 iOS 设备中出现键盘后，PhoneGap 页面向上滚动，导致 PhoneGap 页面损坏

> ID：15000660
> 
> 赞同：6
> 
> 时间：2013-02-21T11:06:59.483
> 
> 标签：iphone, ios, cordova, layout, iphone-softkeyboard

我正在尝试为 iOS 设备使用 PhoneGap 开发聊天应用程序。该应用程序有一个显示登录用户的标题，一个用户可以在其中编写文本消息的页脚，以及一个放置在正文中的列表视图，它将显示消息。

我更新到最新版本的 JQueryMobile (1.3.0) 但问题仍然出现在应用程序中。我附上了一张快照，显示了布局是如何损坏的。( [http://i.stack.imgur.com/RsLfT.png](http://i.stack.imgur.com/RsLfT.png) )

我尝试了几种解决方案，例如使页面不可滚动（将 UIWebViewBounce 设置为 false）且不可扩展（user-scalable=no）和其他用户界面更改，但问题并未解决。

有谁知道如何解决这个问题？（就像软键盘出现后的刷新一样）

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:46:58.763

为了临时解决此问题（因为它在显示键盘时显示中断），您可以在配置文件 (config.xml) 中将“KeyboardShrinksView”设置为“true”或添加它：

```
<widget>
  ...
  <preference name="KeyboardShrinksView" value="true" />

  <plugins>... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T11:03:22.743

现在你可以添加一个：

```
document.body.scrollTop = 0; 
```

每当输入字段收到模糊事件时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-19T12:24:07.773

我在使用 twitter bootstrap 3 时遇到了同样的问题。

添加：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

为我解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T06:25:06.690

我已联系 PhoneGap 支持人员，他们告知预计将在 PhoneGap 2.6 版本中针对此问题进行适当修复

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T23:27:30.493

我使用 css 和包装器修复了它

```
/*Phone < 5:*/
 @media screen and (device-aspect-ratio: 2/3) {
  .content {
   height: 416px !important;
 }
}

 /*iPhone 5:*/
@media screen and (device-aspect-ratio: 40/71) {
  .content {
    height: 504px !important;
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-09T13:35:40.163

**键盘弹出时屏幕高度发生变化**

`window.innerHeight`当键盘弹出时，cordova/phonegap 应用程序的屏幕高度或值会减小，这会重新调整内部内容的大小，并使您的屏幕看起来已损坏。

使用 Javascript、On`deviceready`或 Application`initialize`将设备屏幕高度设置为您的包装器/容器元素。

```
 $('#container').height(window.innerHeight);  // jQuery 
```

# facebook - Git Heroku Permission Denied Public Key（添加公钥后）

> ID：15000662
> 
> 赞同：8
> 
> 时间：2013-02-21T11:07:03.280
> 
> 标签：facebook, git, heroku, github, heroku-toolbelt

我在 Windows 7 64 位。我正在使用最新的 Heroku Toolbelt 和 GitHub Windows App（两天前下载）。两天前一切都很完美。我安装了 PHP 和 Apache，突然 Heroku 给了我

```
Permission denied (publickey).
fatal: Could not read from remote repository.
Please make sure you have the correct access rights
and the repository exists 
```

我已经重复执行了这两个命令。

```
heroku keys:clear
heroku keys:add 
```

我已经删除了我的密钥并重新制作了它们。我已经用其他应用程序（puttygen）生成了一些。我已经通过命令行和网络界面上传了它们。我什至让 GitHub Windows 应用程序生成了一个新密钥，然后我上传了那个。我不能`git push`或`git clone`来自heroku。我什至尝试在本地创建一个新的 git repo 并将 heroku 添加为远程，然后从那里推送。一点运气都没有。

我已经阅读了数十篇 stackoverflow 帖子并尝试了提供的每一个解决方案。没有任何帮助。

**编辑：** 我不知道这是否重要，但我正在制作一个 Facebook 应用程序并通过[heroku 的帮助页面](https://devcenter.heroku.com/articles/facebook#working-locally)工作。我已经从顶部重新启动并努力工作，但我无法通过`git clone`命令。我还从头开始重新安装了 heroku 工具带。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-27T14:54:34.037

我遇到了类似的事情 - 相同的错误消息，来自非常相似的设置（最新的 heroku 工具带，安装了 Github Windows 客户端）

我认为这是 git 对您的公钥文件名称的假设。Github 的 Windows 客户端在您的 $HOME/.ssh 目录中创建 github_rsa 和 github_rsa.pub。如果您在 ~/.ssh 目录中只看到这些，请尝试使用 ssh-keygen 而不是 Github 客户端创建一个具有标准名称 (id_rsa.pub) 的新目录。

我能够按照这些步骤解决这个问题。

*使用 ssh-keygen*创建一个新的公钥：

```
$ ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
... 
```

此时，我的 .ssh 目录中现在有了 id_rsa 和 id_rsa.pub 以及 github 键。

然后重新上传：

```
$ heroku keys:add ~/.ssh/id_rsa.pub
Uploading ssh public key... 
```

（来自[http://www.whatibroke.com/?p=284](http://www.whatibroke.com/?p=284)通过[git push heroku master 权限被拒绝（公钥）。致命：远程端意外挂断](https://stackoverflow.com/questions/12206779/git-push-heroku-master-permission-denied-publickey-fatal-the-remote-end-hung)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:06:29.777

这就是我解决问题的方法：

我已经安装了 heroku 工具并用来`heroku keys:remove` 删除这台 PC 的旧密钥，然后：

1.
添加`C:\Program Files (x86)\Git\bin`到`%PATH%`这个答案中 [https://stackoverflow.com/a/6318188/521088](https://stackoverflow.com/a/6318188/521088)
（所以heroku key：add可以使用ssh-keygen）

2.`heroku keys:add`

**完毕！**

# c++ - wire.h extern twowire object error

> ID：15000670
> 
> 赞同：0
> 
> 时间：2013-02-21T11:07:19.910
> 
> 标签：c++, c, eclipse, optimization, arduino

i use eclipse to make projects for arduino.I included "Wire.h" to a new class and at the arduinocore library project i get error at the Wire.h header. the error is at the line 76 at the end which is:

```
extern TwoWire Wire; 
```

and it says

> Description Resource Path Location Type The type 'TwoWire' must implement the inherited pure virtual method 'Print::write' Wire.h /ArduinoCore/src line 76 Code Analysis Problem

i give you the .cpp and header file they are the same as inside the arduino ide. What can i do to fix this?

```
#ifndef TwoWire_h
#define TwoWire_h

#include <inttypes.h>
    #include "Stream.h"

    #define BUFFER_LENGTH 32

    class TwoWire : public Stream
    {
      private:
        static uint8_t rxBuffer[];
        static uint8_t rxBufferIndex;
        static uint8_t rxBufferLength;

        static uint8_t txAddress;
        static uint8_t txBuffer[];
        static uint8_t txBufferIndex;
        static uint8_t txBufferLength;

        static uint8_t transmitting;
        static void (*user_onRequest)(void);
        static void (*user_onReceive)(int);
        static void onRequestService(void);
        static void onReceiveService(uint8_t*, int);
      public:
        TwoWire();
        void begin();
        void begin(uint8_t);
        void begin(int);
        void beginTransmission(uint8_t);
        void beginTransmission(int);
        uint8_t endTransmission(void);
        uint8_t endTransmission(uint8_t);
        uint8_t requestFrom(uint8_t, uint8_t);
        uint8_t requestFrom(uint8_t, uint8_t, uint8_t);
        uint8_t requestFrom(int, int);
        uint8_t requestFrom(int, int, int);
        virtual size_t write(uint8_t);
        virtual size_t write(const uint8_t *, size_t);
        virtual int available(void);
        virtual int read(void);
        virtual int peek(void);
        virtual void flush(void);
        void onReceive( void (*)(int) );
        void onRequest( void (*)(void) );

        inline size_t write(unsigned long n) { return write((uint8_t)n); }
        inline size_t write(long n) { return write((uint8_t)n); }
        inline size_t write(unsigned int n) { return write((uint8_t)n); }
        inline size_t write(int n) { return write((uint8_t)n); }
        using Print::write;
    };

    extern TwoWire Wire;

    #endif 
```

and the .cpp file:

```
extern "C" {
  #include <stdlib.h>
  #include <string.h>
  #include <inttypes.h>
  #include "twi.h"
}

#include "Wire.h"

// Initialize Class Variables //////////////////////////////////////////////////

uint8_t TwoWire::rxBuffer[BUFFER_LENGTH];
uint8_t TwoWire::rxBufferIndex = 0;
uint8_t TwoWire::rxBufferLength = 0;

uint8_t TwoWire::txAddress = 0;
uint8_t TwoWire::txBuffer[BUFFER_LENGTH];
uint8_t TwoWire::txBufferIndex = 0;
uint8_t TwoWire::txBufferLength = 0;

uint8_t TwoWire::transmitting = 0;
void (*TwoWire::user_onRequest)(void);
void (*TwoWire::user_onReceive)(int);

// Constructors ////////////////////////////////////////////////////////////////

TwoWire::TwoWire()
{
}

// Public Methods //////////////////////////////////////////////////////////////

void TwoWire::begin(void)
{
  rxBufferIndex = 0;
  rxBufferLength = 0;

  txBufferIndex = 0;
  txBufferLength = 0;

  twi_init();
}

void TwoWire::begin(uint8_t address)
{
  twi_setAddress(address);
  twi_attachSlaveTxEvent(onRequestService);
  twi_attachSlaveRxEvent(onReceiveService);
  begin();
}

void TwoWire::begin(int address)
{
  begin((uint8_t)address);
}

uint8_t TwoWire::requestFrom(uint8_t address, uint8_t quantity, uint8_t sendStop)
{
  // clamp to buffer length
  if(quantity > BUFFER_LENGTH){
    quantity = BUFFER_LENGTH;
  }
  // perform blocking read into buffer
  uint8_t read = twi_readFrom(address, rxBuffer, quantity, sendStop);
  // set rx buffer iterator vars
  rxBufferIndex = 0;
  rxBufferLength = read;

  return read;
}

uint8_t TwoWire::requestFrom(uint8_t address, uint8_t quantity)
{
  return requestFrom((uint8_t)address, (uint8_t)quantity, (uint8_t)true);
}

uint8_t TwoWire::requestFrom(int address, int quantity)
{
  return requestFrom((uint8_t)address, (uint8_t)quantity, (uint8_t)true);
}

uint8_t TwoWire::requestFrom(int address, int quantity, int sendStop)
{
  return requestFrom((uint8_t)address, (uint8_t)quantity, (uint8_t)sendStop);
}

void TwoWire::beginTransmission(uint8_t address)
{
  // indicate that we are transmitting
  transmitting = 1;
  // set address of targeted slave
  txAddress = address;
  // reset tx buffer iterator vars
  txBufferIndex = 0;
  txBufferLength = 0;
}

void TwoWire::beginTransmission(int address)
{
  beginTransmission((uint8_t)address);
}

//
//  Originally, 'endTransmission' was an f(void) function.
//  It has been modified to take one parameter indicating
//  whether or not a STOP should be performed on the bus.
//  Calling endTransmission(false) allows a sketch to 
//  perform a repeated start. 
//
//  WARNING: Nothing in the library keeps track of whether
//  the bus tenure has been properly ended with a STOP. It
//  is very possible to leave the bus in a hung state if
//  no call to endTransmission(true) is made. Some I2C
//  devices will behave oddly if they do not see a STOP.
//
uint8_t TwoWire::endTransmission(uint8_t sendStop)
{
  // transmit buffer (blocking)
  int8_t ret = twi_writeTo(txAddress, txBuffer, txBufferLength, 1, sendStop);
  // reset tx buffer iterator vars
  txBufferIndex = 0;
  txBufferLength = 0;
  // indicate that we are done transmitting
  transmitting = 0;
  return ret;
}

//  This provides backwards compatibility with the original
//  definition, and expected behaviour, of endTransmission
//
uint8_t TwoWire::endTransmission(void)
{
  return endTransmission(true);
}

// must be called in:
// slave tx event callback
// or after beginTransmission(address)
size_t TwoWire::write(uint8_t data)
{
  if(transmitting){
  // in master transmitter mode
    // don't bother if buffer is full
    if(txBufferLength >= BUFFER_LENGTH){
      setWriteError();
      return 0;
    }
    // put byte in tx buffer
    txBuffer[txBufferIndex] = data;
    ++txBufferIndex;
    // update amount in buffer   
    txBufferLength = txBufferIndex;
  }else{
  // in slave send mode
    // reply to master
    twi_transmit(&data, 1);
  }
  return 1;
}

// must be called in:
// slave tx event callback
// or after beginTransmission(address)
size_t TwoWire::write(const uint8_t *data, size_t quantity)
{
  if(transmitting){
  // in master transmitter mode
    for(size_t i = 0; i < quantity; ++i){
      write(data[i]);
    }
  }else{
  // in slave send mode
    // reply to master
    twi_transmit(data, quantity);
  }
  return quantity;
}

// must be called in:
// slave rx event callback
// or after requestFrom(address, numBytes)
int TwoWire::available(void)
{
  return rxBufferLength - rxBufferIndex;
}

// must be called in:
// slave rx event callback
// or after requestFrom(address, numBytes)
int TwoWire::read(void)
{
  int value = -1;

  // get each successive byte on each call
  if(rxBufferIndex < rxBufferLength){
    value = rxBuffer[rxBufferIndex];
    ++rxBufferIndex;
  }

  return value;
}

// must be called in:
// slave rx event callback
// or after requestFrom(address, numBytes)
int TwoWire::peek(void)
{
  int value = -1;

  if(rxBufferIndex < rxBufferLength){
    value = rxBuffer[rxBufferIndex];
  }

  return value;
}

void TwoWire::flush(void)
{
  // XXX: to be implemented.
}

// behind the scenes function that is called when data is received
void TwoWire::onReceiveService(uint8_t* inBytes, int numBytes)
{
  // don't bother if user hasn't registered a callback
  if(!user_onReceive){
    return;
  }
  // don't bother if rx buffer is in use by a master requestFrom() op
  // i know this drops data, but it allows for slight stupidity
  // meaning, they may not have read all the master requestFrom() data yet
  if(rxBufferIndex < rxBufferLength){
    return;
  }
  // copy twi rx buffer into local read buffer
  // this enables new reads to happen in parallel
  for(uint8_t i = 0; i < numBytes; ++i){
    rxBuffer[i] = inBytes[i];    
  }
  // set rx iterator vars
  rxBufferIndex = 0;
  rxBufferLength = numBytes;
  // alert user program
  user_onReceive(numBytes);
}

// behind the scenes function that is called when data is requested
void TwoWire::onRequestService(void)
{
  // don't bother if user hasn't registered a callback
  if(!user_onRequest){
    return;
  }
  // reset tx buffer iterator vars
  // !!! this will kill any pending pre-master sendTo() activity
  txBufferIndex = 0;
  txBufferLength = 0;
  // alert user program
  user_onRequest();
}

// sets function called on slave write
void TwoWire::onReceive( void (*function)(int) )
{
  user_onReceive = function;
}

// sets function called on slave read
void TwoWire::onRequest( void (*function)(void) )
{
  user_onRequest = function;
}

// Preinstantiate Objects //////////////////////////////////////////////////////

TwoWire Wire = TwoWire(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T22:11:41.270

这对你来说可能有点晚了，但是......我也使用 Eclipse 来完成我所有的 Arduino 开发，我已经看到了这个错误。这是因为 Eclipse 针对您的项目代码运行自己的 C++ 代码分析工具。（除了 G++ 工具链之外。） Eclipse 有时会遇到困难，或者过于热衷于发现错误，即使 GNU 编译器编译代码并生成您的库就好了。

查看项目属性、C/C++ 常规部分和代码分析选项卡。在 Syntax and Symantic 列表中，最后一项检查称为“Abstract Class cannot be Instantiated”。取消选中此项，禁用检查。然后点击应用。

最后，右键单击您的项目，然后对它选择“运行 C/C++ 代码分析”，这将清除错误 - 不再有红色 X。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T13:35:35.687

**问题：**我遇到了类似的问题，使用神奇的 Netbeans IDE，编译错误是：

```
C:\Arduino\libraries\Wire\Wire.h:76: error: **cannot declare variable 'Wire' to be of *abstract type* 'TwoWire'**
C:\Arduino\libraries\Wire\Wire.h:31: note:   because the following virtual functions are pure within 'TwoWire':
c:/Arduino/hardware/arduino/cores/arduino/Print.h:48: note:     virtual size_t Print::write(uint8_t) 
```

感谢 StackOverFlow 上的某个人，我了解到，如果虚拟函数原型与派生类中该函数的覆盖版本不匹配，编译器会抱怨。

**解决方案：**在 Print.h 的第 48 行，我从以下位置删除了**= 0**：

*   `virtual size_t write(uint8_t) = 0;`
*   `virtual size_t write(uint8_t);`

顺便说一句，使用 Netbeans 作为 IDE 为 Arduino 开发软件的建议使设置变得有点复杂……但由于 Arduino 和 Netbeans，开发大型复杂软件变得容易！

[http://leepike.wordpress.com/source-code/atomled-hs/makefile/](http://leepike.wordpress.com/source-code/atomled-hs/makefile/)

[http://playground.arduino.cc/Code/Netbeans](http://playground.arduino.cc/Code/Netbeans)

# javascript - 否则，如果忽略

> ID：15000676
> 
> 赞同：0
> 
> 时间：2013-02-21T11:07:41.753
> 
> 标签：javascript, function, if-statement

我有一个 if else 语句：

```
<script>
function myFunction()
{
var x="";
var myProb = Math.round(Math.random() * 1);
if (myProb<0.3)
  {
  x="Good morning";
  }
else if (myProb<0.6)
  {
  x="Good day";
  }
else
  {
  x="Good evening";
  }
document.getElementById("demo").innerHTML=x;
}
</script> 
```

“if”和“else”位被执行，但“else if”位被完全忽略。“美好的一天”永远不会发生！

为什么是这样？我只是看不出我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T11:09:46.463

`myProb`只会是`0`or `1`，所以`else if`永远不会是满足的条件。

* * *

`0`我的假设是你想要和之间的小数位`1`。在这种情况下删除`Math.Round()`：

```
var myProb = Math.random(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T11:11:18.273

由于 Math.round，结果`Math.round(Math.random() * 1)`只能是 0 或 1，因此为什么你永远不会进入中间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T11:09:46.413

`Math.round(Math.random() * 1);`只能产生 0 或 1。0 表示“早安”，1 表示“晚安”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T11:10:11.430

在您的代码中

```
if (myProb<0.3)
  {
  x="Good morning";
  } 
```

之前是真的

```
else if (myProb<0.6)
  {
  x="Good day";
  } 
```

并`math.round`产生 0 或 1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T11:12:17.333

尝试

```
Math.round(Math.random() * 100) / 100 
```

要不就

```
Math.random() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T11:12:47.403

稍微改变你的函数以将 myProb 作为参数给出：

```
function myFunction(myProb)
{
var x="";
if (myProb<0.3)
  {
  x="Good morning";
  }
else if (myProb<0.6)
  {
  x="Good day";
  }
else
  {
  x="Good evening";
  }
console.log(x);
}

myFunction(0.4) 
```

在 Chrome 中执行此操作会打印`Good day`到控制台。您的问题似乎是您正在四舍五入 value `Math.random()`。像这样分离代码可以更清楚地说明错误所在。

# php - 从 Curl Response(a rest api) 获取特定的 xml 标签

> ID：15000678
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:07:49.227
> 
> 标签：php, xml, api, rest, curl

我得到这样的卷曲响应，

```
<result>
<term>ve</term>
<rhymes>
mckie, mcnee, mcphee, mcphie, mcree, mcvea, moree, mt, musee, nabil, mckey, mcghie, mcghee, macphee, magee, marie, marquee, marquis, mc, mcbee, mccree, mcfee, mcgee, nestle, ot, partee, se
</rhymes>
</result> 
```

我需要`<rhymes>`从 curl 响应中获取一串数组的结果。

请帮我整理一下

## 我把完整的脚本放在这里，请有人检查......

```
$request =  'http://www.stands4.com/services/v2/rhymes.php'; 
    // The request parameters 
    $uid = '2634'; 
    $tokenid = 'kqjhvZfLrUQdrOCB'; 
     echo $term = "a"; 
     echo strlen($term);
    // urlencode and concatenate the POST arguments 
    $postargs = 'uid='.$uid.'&tokenid='.$tokenid.'&term='.$term;
// build request format
$session = curl_init($request);
// Tell curl to use HTTP POST
curl_setopt ($session, CURLOPT_POST, true); 
// Tell curl that this is the body of the POST
curl_setopt ($session, CURLOPT_POSTFIELDS, $postargs); 
// Tell curl not to return headers, but do return the response
curl_setopt($session, CURLOPT_HEADER, false); 
curl_setopt($session, CURLOPT_RETURNTRANSFER,1);
$response = curl_exec($session);
$rhymes_xml = simplexml_load_string($response);

$rhymes = (string) $rhymes_xml->rhymes; //extract the string from the XML

$rhymes_array = explode(', ',$rhymes);
print_r($rhymes_array); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:15:30.527

[使用SimpleXML](http://www.php.net/manual/en/book.simplexml.php)很简单：

```
<?php
$curl_results = //get the xml with CURL...

$rhymes_xml = simplexml_load_string($curl_results); //turn it into an XML object

$rhymes = (string) $rhymes_xml->rhymes; //extract the string from the XML

$rhymes_array = explode(', ',$rhymes); //pop the result into an array 
```

所以`print_r($rhymes_array)`看起来像这样：

```
Array
(
    [0] => mckie
    [1] => mcnee
    [2] => mcphee
    [3] => mcphie
    [4] => mcree
    [5] => mcvea
    [6] => moree
    [7] => mt
    [8] => musee
    [9] => nabil
    [10] => mckey
    [11] => mcghie
    [12] => mcghee
    [13] => macphee
    [14] => magee
    [15] => marie
    [16] => marquee
    [17] => marquis
    [18] => mc
    [19] => mcbee
    [20] => mccree
    [21] => mcfee
    [22] => mcgee
    [23] => nestle
    [24] => ot
    [25] => partee
    [26] => se

) 
```

**回应您的编辑：**

代码看起来有点乱......如果你真的需要使用 CURL（这在某些情况下可能会有所帮助），如果你把它变成一个函数，它可能看起来更漂亮：

```
 function getUrl($url, $method='', $vars='') {
    $ch = curl_init();
    if ($method == 'post') {
      curl_setopt($ch, CURLOPT_POST, 1);
      curl_setopt($ch, CURLOPT_POSTFIELDS, $vars);
    }
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

    $buffer = curl_exec($ch);
    curl_close($ch);
    return $buffer;
  }

  //and also put the retrieving in a function:
  function getRhymes($term) {
    $url = 'http://www.stands4.com/services/v2/rhymes.php'; 
    $payload = array(
       'uid' => '2634',
       'tokenid' => 'kqjhvZfLrUQdrOCB',
       'term' => $term
    );

    $response = getUrl($url, 'post', $payload);

    $rhymes_xml = simplexml_load_string($response);
    $rhymes = (string) $rhymes_xml->rhymes; //extract the string from the XML
    return explode(', ',$rhymes);
  }

  // so now you can simply get the rhymes with:
  $rhymes = getRhymes('ve');
  echo "The following rhymes with 've': <br />" . implode(', ', $rhymes); 
```

这是工作示例：[http ://codepad.viper-7.com/qumUr6](http://codepad.viper-7.com/qumUr6)

CURL 非常强大，但大多数时候您实际上并不需要它的强大功能，因此您可能想要使用更轻量级的东西，例如[file_get_contents();](http://www.php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:20:44.670

像这样

```
$str = '<result>
<term>ve</term>
<rhymes>
mckie, mcnee, mcphee, mcphie, mcree, mcvea, moree, mt, musee, nabil, mckey, mcghie, mcghee, macphee, magee, marie, marquee, marquis, mc, mcbee, mccree, mcfee, mcgee, nestle, ot, partee, se
</rhymes>
</result>';
$xml = simplexml_load_string($str);
echo $xml->rhymes; 
```

此外，您可以使用 simplexml_load_file('Here url you need') 而不是 simplexml_load_string 和 curl

# css - div 在另一个 div 中不可见

> ID：15000682
> 
> 赞同：1
> 
> 时间：2013-02-21T11:08:03.740
> 
> 标签：css

我试图在我的网站上获得一些 CSS3 效果我试图做的是：

**HTML**

```
<link rel="stylesheet" type="text/css" href="animate.css">
<div class="header">

<div class="header_box1">
<div class="small_header_box">2222222222 </div>
<div class="small_header_box"> 2222222222</div>
<div class="small_header_box">2222222222 </div>
<div class="small_header_box">2222222222 </div>
</div>

<div class="header_box2">
<div class="small_header_box"> 3333333333</div>
<div class="small_header_box"> 3333333333</div>
<div class="small_header_box"> 3333333333</div>
<div class="small_header_box"> 3333333333</div>
</div>

<div class="header_box3">
<div class="small_header_box"> aaaaaaaaa</div>
<div class="small_header_box"> aaaaaaaaa</div>
<div class="small_header_box"> aaaaaaaaa</div>
<div class="small_header_box"> aaaaaaaaa</div>
</div>
</div> 
```

**CSS**

```
.header_box1{
 background-color: red;  
}

.header_box2{
 background-color: skyblue;  
}

.header_box3{
 background-color: yellow;  
}
.small_header_box{
 background-color: green;  
   width: 50px;  
    height: 50px; 

    float: left;
}

.header {  
    width: 1000px;  
    height: 300px;  
    margin: 25px auto;  
    overflow: hidden;  
    position: relative;  
    border: 1px solid #000;  
    margin: 25px auto;    

    background-color: #222;  

  -webkit-border-radius: 5px;  
  border-radius: 5px;  

  -webkit-box-shadow: inset 0px 2px 2px rgba(0, 0, 0, .5), 0px 1px 0px rgba(250, 250, 250, .2);  
  box-shadow: inset 0px 2px 2px rgba(0, 0, 0, .5), 0px 1px 0px rgba(250, 250, 250, .2);  
}  

   .header div {  
    position: absolute;  
    font-family: Tahoma, Arial, sans-serif;  
    width: 100%;  
    height: 100%;  
    margin: 0;  
    line-height: 50px;  
    text-align: center;  
    color: #fff;  
  text-shadow: 1px 1px 0px #000000;  
  filter: dropshadow(color=#000000, offx=1, offy=1);  

   transform:translateX(100%);  
}  

@keyframes left-one {  
    0%  {  
        transform:translateX(100%);  
    }  
    3% {  
        transform:translateX(0);  
    }  
    30% {  
        transform:translateX(0);  
    }  
    31% {  
        transform:translateX(-100%);  
    }  
    99%{  
        transform:translateX(-100%);  
    }  
    100%{  
        transform:translateX(-100%);  
    }  
}  
@keyframes left-two {  
    0% {  
        transform:translateX(100%);  
    }  
    33% {  
        transform:translateX(100%);  
    }  
    34% {  
        transform:translateX(0);          
    }  
    66% {  
        transform:translateX(0);          
    }  
    67%{  
        transform:translateX(-100%);  
    }  
    100%{  
        transform:translateX(-100%);  
    }  
} 
@keyframes left-three {  
    0% {  
        transform:translateX(100%);  
    }  
    67% {  
        transform:translateX(100%);  
    }  
    68% {  
        transform:translateX(0);          
    }  
    98% {  
        transform:translateX(0);          
    }  
    99%{  
        transform:translateX(-100%);  
    }  
    100%{  
        transform:translateX(-100%);  
    }  
}  

.header div:nth-child(1) {  
    animation: left-one 15s ease infinite;  
}  
.header div:nth-child(2) {  
    animation: left-two 15s ease infinite;  
}  
.header div:nth-child(3) {  
    animation: left-three 15s ease infinite;  
} 
```

我想要做的是三个 div 在一个不间断的动画中，每个 div 都包含四个不同的潜水。这里发生的情况是，三个 div 确实有动画效果，但**header_box(x)** div 中的四个 div 不可见。一个 div 获取所有可用空间，其余三个 div 不可见。我应该怎么做才能看到 Header_box1、Header_box2、Header_box3 中的所有四个 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:42:42.343

你需要

*   为 div设置一个`height`，300px 中的 4 个 div = 每个 div 75px；
*   删除`position: absolute;`，否则它们将始终从 0px 开始，即使 height: 75px;
*   remove `float: left;`，那是没用的（并被 覆盖`position: absolute;`）
*   `height: 100%;` 从规则中删除`.header div`，否则将“赢得”违反`.small_header_box`规则。

当然还有其他问题，但是作为从您的代码开始的概念证明（并且不了解您要实现的确切目标），请看一下：

[http://jsfiddle.net/nuUm6/](http://jsfiddle.net/nuUm6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:23:23.970

对于带有 class 的 div `small_header_box`，不采用 and ，而是`width:50px`采用and from 。如果您更改为更具体的内容，您的问题将得到解决。`height:50px``width:100%``height:100%``.header div``.header div`

```
<div class="header">
 <div class="firstLevel header_box1">
  <div class="small_header_box"></div>
  ... 
 </div>
 ....
</div> 
```

在CSS中

```
.header .firstLevel{
    position: absolute;  
    font-family: Tahoma, Arial, sans-serif;  
    width: 100%;  
    height: 100%;  
    margin: 0;  
    line-height: 50px;  
    text-align: center;  
    color: #fff;  
    text-shadow: 1px 1px 0px #000000;  
    filter: dropshadow(color=#000000, offx=1, offy=1);  
    transform:translateX(100%);
    -webkit-transform:translateX(100%);
} 
```

`header_box1`此外，您在,2 &3内只有浮动元素。为了让容器填充适当的空间，您可能需要添加一个清除浮动的空元素。

```
<div class="clearFl"></div> 
```

和CSS

```
.clear{
 clear:both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:28:42.867

我不确定你到底想做什么，但我认为你的这部分代码“搞砸了”。

```
.header div {  
position: absolute;  
font-family: Tahoma, Arial, sans-serif;  
width: 100%;  
height: 100%;  
margin: 0;  
line-height: 50px;  
text-align: center;  
color: #fff;
text-shadow: 1px 1px 0px #000000;
filter: dropshadow(color=#000000, offx=1, offy=1);
transform:translateX(100%);
} 
```

通过这个，你的目标是所有跟随父级的 .header 类的 div，其中包括“小标题框”。看看那部分。

# c++ - Crypto++ encrypt and decrypt in two different c++ programs

> ID：15000688
> 
> 赞同：1
> 
> 时间：2013-02-21T11:08:33.047
> 
> 标签：c++, aes, crypto++, cbc-mode

I am writing a code to encrypt and decrypt with crypto++ library .I found a code to encrypt and decrypt which is shown below.The code works OK as one program.but when I divide into two c++ programs (One for encryption and another for decryption) the decryption pargram gives me error

> `terminate called after throwing an instance of 'CryptoPP::InvalidCiphertext' what(): StreamTransformationFilter: ciphertext length is not a multiple of block size`

The ciphertext I get after encryption is

```
���z=(f�����P%���2��W3�p�H�����^��@C��#������bp���nx�� 
```

which I transfer into the decryption code. What am I doing wrong?

my first program for encryption is

```
#include <iostream>
#include <iomanip>
#include <cryptopp/hex.h>
#include <cryptopp/sha.h>
#include <cryptopp/base64.h>
#include <iostream>
#include <string>
#include "crypto++/modes.h"
#include "crypto++/aes.h"
#include "crypto++/filters.h"

int main(int argc, char* argv[]) {

    //
    // Key and IV setup
    //AES encryption uses a secret key of a variable length (128-bit, 196-bit or 256-
    //bit). This key is secretly exchanged between two parties before communication
    //begins. DEFAULT_KEYLENGTH= 16 bytes
    byte key[ CryptoPP::AES::DEFAULT_KEYLENGTH ], iv[ CryptoPP::AES::BLOCKSIZE ];
    memset( key, 0x00, CryptoPP::AES::DEFAULT_KEYLENGTH );
    memset( iv, 0x00, CryptoPP::AES::BLOCKSIZE );

    //
    // String and Sink setup
    //
    std::string plaintext = "Now is the time for all good men to come to the aide...";
    std::string ciphertext;
    std::string decryptedtext;

    //
    // Dump Plain Text
    //
    std::cout << "Plain Text (" << plaintext.size() << " bytes)" << std::endl;
    std::cout << plaintext;
    std::cout << std::endl << std::endl;

    //
    // Create Cipher Text
    //
    CryptoPP::AES::Encryption aesEncryption(key, CryptoPP::AES::DEFAULT_KEYLENGTH);
    CryptoPP::CBC_Mode_ExternalCipher::Encryption cbcEncryption( aesEncryption, iv );

    CryptoPP::StreamTransformationFilter stfEncryptor(cbcEncryption, new CryptoPP::StringSink( ciphertext ) );
    stfEncryptor.Put( reinterpret_cast<const unsigned char*>( plaintext.c_str() ), plaintext.length() + 1 );
    stfEncryptor.MessageEnd();

    //
    // Dump Cipher Text
    //
    std::cout << "Cipher Text (" << ciphertext.size() << " bytes)" << std::endl;

    for( int i = 0; i < ciphertext.size(); i++ ) {

        std::cout << "0x" << std::hex << (0xFF & static_cast<byte>(ciphertext[i])) << " ";
    }

    std::cout << std::endl << std::endl;

    /////////////////////////////////////////////////////////////////////////

    return 0;
} 
```

I am sending the ciphertext using URL eg. [https://xxx.xxx.xx.xx/_SERVER_TEST.fcgi](https://xxx.xxx.xx.xx/_SERVER_TEST.fcgi)?���z=(f�����P%���2��W3�p�H�����^��@C��#������bp���nx��

and on the other side I an trying to decript my ciphertext . but the URL dont understand the cipher.

my second program Decryption is

```
#include <iostream>
#include <iomanip>
#include <cryptopp/hex.h>
#include <cryptopp/sha.h>
#include <cryptopp/base64.h>
#include <iostream>
#include <string>
#include "crypto++/modes.h"
#include "crypto++/aes.h"
#include "crypto++/filters.h"

int main(int argc, char* argv[]) {

    //
    // Key and IV setup
    //AES encryption uses a secret key of a variable length (128-bit, 196-bit or 256-
    //bit). This key is secretly exchanged between two parties before communication
    //begins. DEFAULT_KEYLENGTH= 16 bytes
    byte key[ CryptoPP::AES::DEFAULT_KEYLENGTH ], iv[ CryptoPP::AES::BLOCKSIZE ];
    memset( key, 0x00, CryptoPP::AES::DEFAULT_KEYLENGTH );
    memset( iv, 0x00, CryptoPP::AES::BLOCKSIZE );

    std::string ciphertext;
    std::string decryptedtext;

    //
    // Decrypt
    //
    CryptoPP::AES::Decryption aesDecryption(key, CryptoPP::AES::DEFAULT_KEYLENGTH);
    CryptoPP::CBC_Mode_ExternalCipher::Decryption cbcDecryption( aesDecryption, iv );

    CryptoPP::StreamTransformationFilter stfDecryptor(cbcDecryption, new CryptoPP::StringSink( decryptedtext ) );
    stfDecryptor.Put( reinterpret_cast<const unsigned char*>( ciphertext.c_str() ), ciphertext.size() );
    stfDecryptor.MessageEnd();

    //
    // Dump Decrypted Text
    //
    std::cout << "Decrypted Text: " << std::endl;
    std::cout << decryptedtext;
    std::cout << std::endl << std::endl;

    /////////////////////////////////////////////////////////////////////////

    return 0;
} 
```

# javascript - javascript中的构造函数

> ID：15000692
> 
> 赞同：0
> 
> 时间：2013-02-21T11:08:47.513
> 
> 标签：javascript

如何在 JavaScript 中声明参数化构造函数？它是如何在 JavaScript 中实现的？

```
 public class A()
    {
     //variable declaration
     public A()
     {
      //do something
     }

     public A(int a)
     {
      //do something
     }

     public A(int a,int b)
     {
      //do something
     }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:10:59.613

javascript中的任何函数都可以是构造函数

```
function A(paramA, paramB) {
    this.paramA = paramA;
    this.paramB = paramB;

    //do something
}

A.prototype.method1 = function(){
    console.log(this)
    console.log('Inside method 1' + this.paramA)
}

var a = new A(1, {name: 'Name'});
console.log(a.paramA);
console.log(a.paramB.name)
a.method1() 
```

所有实例变量都可以使用`this.<variable-name>=<value>;`.
可以使用`prototype`构造函数的属性创建实例方法`function`。

您可以阅读有关构造函数的更多信息
[简单的“类”实例化](http://ejohn.org/blog/simple-class-instantiation/)
[简单的 JavaScript 继承](http://ejohn.org/blog/simple-javascript-inheritance/)

您还可以使用检查参数是否存在

```
if(paramB == undefined) {
    //do something if paramB is not defined
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:12:28.393

JavaScript 不支持基于参数定义的重载。

编写一个函数并检查收到了哪些参数。

```
function A(a, b) {
    if (typeof a === "undefined") {
        // ...
    } else if (typeof b === "undefined") {
        // ...
    } else {
        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:27:27.563

```
var Class = function(methods) {   
    var klass = function() {    
        this.initialize.apply(this, arguments);          
    };  

    for (var property in methods) { 
       klass.prototype[property] = methods[property];
    }

    if (!klass.prototype.initialize) klass.prototype.initialize = function(){};      

    return klass;    
};
var Person = Class({ 
    initialize: function(name, age) {
        this.name = name;
        this.age  = age;
    },
    initialize: function(name, age, gender) {
        this.name = name;
        this.age  = age;
        this.gender = gender;
    }
}); 

var alice = new Person('Alice', 26);
var rizwan = new Person('riz', 26, 'm');
alert(alice.name + ' - alice'); //displays "Alice"
alert(rizwan.age + ' - rizwan'); //displays "26" 
```

[http://jsfiddle.net/5NPpR/](http://jsfiddle.net/5NPpR/) [http://www.htmlgoodies.com/html5/tutorials/create-an-object-oriented-javascript-class-constructor.html#fbid=OJ1MheBA5Xa](http://www.htmlgoodies.com/html5/tutorials/create-an-object-oriented-javascript-class-constructor.html#fbid=OJ1MheBA5Xa)

# google-drive-api - What APIs / parameters do the "Recent" and "Activity" tabs in Drive use?

> ID：15000697
> 
> 赞同：1
> 
> 时间：2013-02-21T11:09:03.833
> 
> 标签：google-drive-api

How do I generate the equivalent query using the API?

# jquery - jQuery droppable hover event not firing on first attempt

> ID：15000698
> 
> 赞同：1
> 
> 时间：2013-02-21T11:09:07.420
> 
> 标签：jquery, droppable

I'm having an issue where droppable areas are not accepting draggable items on the first attempt. Subsequent attempts seem to work just fine.

Please see this code - [http://jsfiddle.net/grimmus/Pp9Qf/](http://jsfiddle.net/grimmus/Pp9Qf/)

```
//binding droppable property to generated columns
$("#contents").delegate('li', 'mouseover', function () {
    $(this).droppable({
        activeClass: "ui-state-active",
        hoverClass: "ui-state-hover",
        accept: ".ui-draggable",
        drop: function (event, ui) {
            $("<span></span>").text(ui.draggable.text()).appendTo(this);
        }
    });
}); 
```

You create a panel by selecting a number from the dropdown in the right area and pressing add.

The boxes in the created panel are all droppable. Then, choose employee from the 'select a model' dropdown.

The droppable areas should display a dashed border when an acceptable drag item hovers over it. This doesnt seem to happen the first time i try. If i redrag the item again the hover class appears and the item is accepted.

Any ideas what might be going wrong ? Seems something isn't getting initialized properly

Tested in Chrome and Firefox.

Thanks

# redirect - redirect 301 opencart not working

> ID：15000700
> 
> 赞同：0
> 
> 时间：2013-02-21T11:09:12.473
> 
> 标签：redirect, categories, opencart

Redirect 301 categories and products not working

Hello

i try many 301 redirect codes to redirect old categories and products links that indexing in google to the new seo url

but not redirect !!!

the old category like that [http://www.example.com/index.php?route=](http://www.example.com/index.php?route=) ... ry&path=65

the new [http://www.example.com/science-books](http://www.example.com/science-books)

help me please

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T05:57:24.337

谷歌需要一些时间来索引新的 URL。它可能从几天到几周不等。

重定向可能不是一个好主意。请耐心等待您的新 URL 将被编入索引。

# android - Recycling views inside a horizontal scrollview android

> ID：15000702
> 
> 赞同：0
> 
> 时间：2013-02-21T11:09:31.003
> 
> 标签：android, listview, garbage-collection, horizontalscrollview

I'm making an app with fairly complex UI. Its comparable to a horizontal list view that expands to a viewpager on being clicked. Presently, I've implemented this using the most basic approach. I simply inflate views inside a `horizontalScrollView` and inflate another subview with animation whenever user taps on any parent view.

This works perfectly fine and gives it a look of horizontal **expandable** listview. However, I feel this approach is highly inefficient since I keep on getting GC warnings almost every few seconds thereby reducing performance. And in this approach I'm not even recyling views like `listview` does.

My questions are:

*   Is there any other efficient way of doing this ?
*   How could I recycle views in my existing code like listview does?

Thanks!

(Please don't recommend using Gallery. My view is fairly complex)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:19:15.703

> 还有其他有效的方法吗？

使用`ViewPager`或开源`HorizontalListView`，两者都使用适配器模式。

# java - 字符串之间的间距

> ID：15000703
> 
> 赞同：-4
> 
> 时间：2013-02-21T11:09:32.263
> 
> 标签：java

我有一个字符串`Week3`，我需要在数字之后有空格`week`，`3`星期文本后面的数字可以是任何东西，我需要那个数字的星期空间。例如：第 3 周

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:17:02.683

你也可以做

```
 str=str.replaceAll("(?i)(?<=week)(?=\\d)"," "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:14:48.153

```
public static void main(String[] args) {
    String str = "Week3";
    String result = "";
    for(int i=0; i< str.length(); i++){
        if(Character.isDigit(str.charAt(i)))
            result = result + " ";
        result= result + String.valueOf(str.charAt(i));
    }
    System.out.println(result);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:22:51.077

如果你的情况真的这么简单，那就没必要花哨了。做就是了：

```
String newString = "Week " + oldString.substring(4); 
```

# php - 创建一个唯一且看似随机的 5 个字符的字符串

> ID：15000704
> 
> 赞同：6
> 
> 时间：2013-02-21T11:09:35.937
> 
> 标签：php, mysql, unique, uniqueidentifier

我正在尝试创建一个简短的 5 或 6 个字符的邀请码，该邀请码将在我的网站上创建“组”时生成。组信息存储在组表中。希望加入群组的用户必须有一个邀请码——他们不需要知道其他任何信息。

显然，我需要邀请码是唯一的，并且我希望在没有双重检查的情况下生成唯一的字符串，但是找出代码很困难。我一直在阅读数十个 SO 问题和答案。这就是我想出的：

当将组信息（例如名称）插入组表时，该行自然会被赋予一个唯一的、自动递增的 id。

> 1）抓住那个ID
> 
> 2) 将其添加到 1234
> 
> 3) 将团队名称从 base36 转换为 base10 后，只需将值放在一起即可。“纽约洋基队”是 base10（3994055806027582482648）[1263399405580602758248264820130221060827]）
> 
> 4) 转换为基数 36
> 
> 5）将代码插入数据库

这保证对每个组都是独一无二的，对吧？碰撞几率为零？我这样说是因为它根本不是随机的。我从一些独特的东西开始，并保持它的独特性，从不引入随机数据。

我有几个问题，因为组名是可重复的，我如何在创建/插入时获取行 ID？这行不通，但这是我所在的位置：

```
$query = "SELECT id FROM groups WHERE gname = :gname";
...
$uid = $result + '1234';
$hex = md5(":gname NOW()" . uniqid("$uid", true));
base_convert($hex, 10, 36);
intval($str, 36);

$query = "INSERT..."; 
```

独特、简短但不可预测，没有所有正确的部分，用户无法使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:01:43.980

这里描述了[如何获取最后插入的 auto_increment 值](https://stackoverflow.com/questions/1685860/php-how-to-get-last-inserted-id-of-a-table)。

获得 ID 后，您需要使用带有密钥的对称密钥加密，例如 AES。它保证是唯一的（因为它可以转换回原始明文 - 这称为解密）。

您可以调整块大小以获得所需的长度（以位为单位）。使用 base64，长度将是 4 的倍数（因为 8 位字符被编码为三元组，导致 base64 中的 4 个字符块）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:24:15.003

```
$query = "INSERT INTO groups (gname, gadmin) VALUES (:gname, :gadmin)";
    $query_params = array( ':gname' => $trimmed['gname']
                           ':gadmin' => $userid );

    try {
        $stmt = $db->prepare($query);
        $result = $stmt->execute($query_params);
        $gid = $db->lastInsertId();
    }
    catch(PDOException $ex) {
        die("Failed to run query: " . $ex->getMessage());
    }

    // Use this library: https://github.com/ivanakimov/hashids.php
    $hashids = new Hashids\Hashids('this is my constant salt', 5,
                'abcdefghijklmnpqrstuvwxyz0123456789');

    $hash = $hashids->encrypt($gid);

    $query = "UPDATE groups SET invite = '$hash' WHERE id = '$gid'";
    ... 
```

有问题的图书馆负责处理繁重的工作。它本身实际上并没有散列。它加密输入；因为我的行 ID 是唯一的，所以加密的结果也是如此。我不需要解密“哈希”，但该选项存在。我不能严格定义长度，但我可以设置一个最小值并有增长的空间。此外，如您所见，它还允许我定义一个“字母表”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:46:21.277

为什么不连接创建组的人的 IP 地址或用户 ID，以及包括毫秒在内的时间，然后是 MD5 或 SHA-256 以生成您发布的字符串？这肯定是不可预测和不重复的。

# iphone - SUP 个性化参数中的可选输入值 (iOS)

> ID：15000711
> 
> 赞同：0
> 
> 时间：2013-02-21T11:09:49.107
> 
> 标签：iphone, parameters, nullable, sup

我正在用 SUP 创建一个 iPhone 应用程序。我使用 SAP 作为我的数据源。在我的 MBO 中，我创建了一些个性化参数而不是任何同步参数。其中一些是可选输入。例如，我有一个用于批准采购订单的 MBO。我可以在有或没有评论的情况下批准它们。这里评论字段个性化参数是 Nullable（可选）参数，PO_Num 参数不是 NUllable。我的问题是当我批准带有评论的采购订单时，我的评论字段没有输入到服务器。但是批准很好。我有这个问题其他 MBO 也是。我确定我正在从我的应用程序中设置评论个性化参数。这个问题只发生在 iOS 中。因为我的 android 同事在 android 中使用相同的 MBO。他没有这样的问题。我使用的是 SUP 2.1 .3.

我是 SUP 的新手 任何帮助都是可观的 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:43:40.963

我无法对您的问题发表评论，因为没有足够的声誉发表评论。

如果您使用的是 SUP，那么您将使用[http://sdn.sap.com](http://sdn.sap.com)论坛来获取移动问题和答案。我也对 SUP 相关的问题使用了相同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:20:09.437

您必须为每个 MBO 输入提供一个默认值。否则，您的 MBO 请求将不会按照您的想法处理。当您希望评论 PP 为空时。在 Xcode 上工作时显式保存它。

# ios - Adobe Air 到 iOS 蓝牙连接与多个设备

> ID：15000716
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:09:57.943
> 
> 标签：ios, air, bluetooth

是否有任何 AIR 到 iOS 应用程序，使用蓝牙（不是点对点）连接到多个 iOS 设备？单个设备必须能够连接多个设备。有没有这方面的例子或教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:46:01.283

据我所知，Adobe AIR 不支持此功能，因此您必须依赖[本机扩展](http://www.adobe.com/devnet/air/native-extensions-for-air.html)。AirNativeiOS [-Bluetooth](https://github.com/jamieowen/AirNativeiOS-Bluetooth)扩展似乎符合要求。

# scala - 自主 AKKA 演员主动呼叫接收

> ID：15000717
> 
> 赞同：1
> 
> 时间：2013-02-21T11:10:01.440
> 
> 标签：scala, dependency-injection, akka, actor

我想用 akka 2.1 实现高级通信模式。然而，akka 似乎在一个关键方面与 Scala 的演员不同。scala 的 actor 允许我主动调用“receive”并提供部分函数，​​akka 的 actor 采用好莱坞“不要打电话给我们，我们会打电话给你”的原则，让你只静态定义一个接收函数。

在 scala 的演员中，我可以有这样的模式：

```
class MyActor extends Actor{

  override def act(){
    val x = expensiveFunc()
    friend ! x
    val y = receive {
      case Answer(a) => println(a)
    }
  }

} 
```

在这里，我明确地拨打接收电话。这样做的原因是我需要每个执行 SPMD 程序并在执行中的特定点进行通信的自治参与者。是否可以以有意义的方式使用 AKKA 来模拟这种模式？

* * *

**编辑** 我想全面了解我的问题是公平的。

我需要使用演员创建一个 SPMD 程序。这意味着我需要能够为演员定义行为，这不仅是**反应**性的，即我需要能够像在旧的 scala 演员中那样实现**act() 。**此外，我需要像在旧的 scala 演员中那样显式调用**receive(p:PartialFunction[T,U]) 。**

如果我能做到以上两件事，我将能够将我的 SPMD 程序从老演员移植到 akka 演员。然而，我怀疑由于AKKA 似乎采用的好莱坞模式（ [http://en.wikipedia.org/wiki/Hollywood_principle](http://en.wikipedia.org/wiki/Hollywood_principle) ），不可能实现行为方法。

**EDIT2** 我相信主动接收问题可以通过成为/不成为这样的方式来解决：

```
 import context._
  def receive(p:PartialFunction[Any,Unit]){
    become(p)
    receive()
    unbecome()
  } 
```

但是，这要求允许嵌套调用接收。我有机会通过简单地发送如下消息来模拟**act方法：**

```
case class Act(b: ()=> Unit) extends Serializable 
```

然后封装了我希望我的演员执行的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:44:53.433

Akka actor 是事件驱动的。每当消息准备好从actor邮箱中消费时，actor中receive中定义的部分函数就会调用传入的消息。

换句话说，“receive”不是命令式构造，您不能调用它来等待下一条消息。您想要的可以通过正常的消息传递来实现。请求者 Actor 将数据发送给 worker Actor，后者执行代价高昂的操作，然后发回回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:06:42.153

您可以使用 Stash 对邮箱进行一些控制：

[http://doc.akka.io/docs/akka/2.1.0/scala/actors.html#Stash](http://doc.akka.io/docs/akka/2.1.0/scala/actors.html#Stash)

# java - Tomcat 错误，未使用端口

> ID：15000718
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:10:03.560
> 
> 标签：java, tomcat

本地主机上的 Tomcat v7.0 服务器所需的几个端口（8080、8009）已在使用中。服务器可能已经在另一个进程中运行，或者系统进程可能正在使用该端口。要启动此服务器，您需要停止其他进程或更改端口号。

我尝试了以下方法：

*   杀死javaw.exe，找不到这样的进程
*   在 /bin 中运行 shutdown.bat
*   我在 cmd 中运行 netstat -aon，没有显示使用 8090,8009 的进程

请帮我解决这个问题。

我正在考虑更改端口号，如果可能并且是正确的方法，我应该更改什么。

如果没有，请提供必要的建议

我尝试更改端口号。现在我收到以下错误 ::Could not publish server configuration for Tomcat v7.0 Server at localhost.Multiple Contexts 的路径为“/WebPro2”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:16:22.723

1.  运行`netstat`检查端口`8080`，不行`8090`。
2.  运行`ps -ef|grep -i tomcat`看看你的服务器是否有正在运行的进程。
3.  `conf/server.xml`如果端口号是 ，请检查您的 tomcat 主目录`8080`。
4.  验证环境`$JAVA_HOME`或`$JRE_HOME`和`$CATALINA_HOME`是否正确。然后尝试重启tomcat。

# cookies - yii cookie 设置 httpOnly

> ID：15000721
> 
> 赞同：1
> 
> 时间：2013-02-21T11:10:20.290
> 
> 标签：cookies, yii, components, config, httponly

在yii中默认选项CHttpCookie->httpOnly设置为false，整个应用配置过程中设置默认httpOnly=true吗？

PS Transfer 选项不提供，不想进入第三方扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:27:57.380

一点也不。`CHttpCookie`在 Yii 中直接在其构造函数中使用，即：`$cookie = new CHttpCookie //...`. 所以没有办法注入参数。[您可以按照此处](http://www.yiiframework.com/forum/index.php/topic/12849-chttpcookie-httponly/)所述设置每个组件，但它仍然不是全局设置。

但是你可以扩展`CHttpRequest`和覆盖`addCookie`并`removeCookie`强制`httpOnly`在那里。要简单地创建您自己的`HttpRequest`类，从它扩展`CHttpRequest`并定义它，组件使用如下：

```
// .. other components
'request' => [
                'class' => 'HttpRequest',
// optional:
//              'enableCsrfValidation' => true,
//              'enableCookieValidation' => true,
          ],
// .. other components 
```

（我使用 php 5.4 数组表示法，对你来说应该不是问题吗？:)）其他方法是克隆框架 git repo 并将其设置为 true...

# php - PHP只上传jpg格式

> ID：15000724
> 
> 赞同：0
> 
> 时间：2013-02-21T11:10:33.353
> 
> 标签：php

在 MrCode 的带领下，我能够检测到为什么我的上传没有通过其他图片格式。下面是 createThumbs 函数，那么我如何使它适用于其他扩展。

```
<?php
function createThumbs( $pathToImages, $pathToThumbs, $thumbWidth ) 
{
 // open the directory
$dir = opendir( $pathToImages );

// loop through it, looking for any/all JPG files:
while (false !== ($fname = readdir( $dir ))) {
// parse path for the extension
$info = pathinfo($pathToImages . $fname);
// continue only if this is a JPEG image
if ( strtolower($info['extension']) == 'jpg' ) 
{
  // load image and get image size
  $img = imagecreatefromjpeg( "{$pathToImages}{$fname}" );
  $width = imagesx( $img );
  $height = imagesy( $img );

  // calculate thumbnail size
  $new_width = $thumbWidth;
  $new_height = floor( $height * ( $thumbWidth / $width ) );

  // create a new tempopary image
  $tmp_img = imagecreatetruecolor( $new_width, $new_height );

  // copy and resize old image into new image 
  imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width,   $height );

  // save thumbnail into a file
  imagejpeg( $tmp_img, "{$pathToThumbs}{$fname}" );
}
}
// close the directory
closedir( $dir );
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:16:47.590

我认为问题出在你的循环中

```
foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){ 
```

应该写成

```
foreach($_FILES['files'] as $key => $file){ 
```

因为第一个只会第一次运行，而第一个`file`可能会有一个`jpeg`图像，所以它是第一次运行。

# jquery - 计算 div 的总高度

> ID：15000727
> 
> 赞同：0
> 
> 时间：2013-02-21T11:10:42.870
> 
> 标签：jquery, slider

我想在我的网站上制作一个简单的垂直滑块。有了这个简单的代码

```
$('.down').click(function(){
    $('#container_slider_youtube').animate({ marginTop: '-=410px'}, 1000);
});

$('.up').click(function(){
    $('#container_slider_youtube').animate({ marginTop: '+=410px'}, 1000);
}); 
```

我可以上下滑动装有所有东西的容器，效果很好。但是我遇到的一个问题是，您可以一直按向上或向下按钮，这会完全弄乱 div 的位置。那么解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:37:36.727

可能最好不要依赖相对值，而是计算新的静态值以分配给`.animate()`.

此外，对于这样的应用程序，我发现使用 CSS`position`而`top`不是依赖`margin`. 一些（较旧的）浏览器似乎讨厌用一千个地狱之火燃烧的负边距。

```
// example
var container = $('#container_slider_youtube'),
    parent = container.parent(),
    step = 410
    ;
$('.down').click(function () {

    var currentTop = container.css('top'),
        newTop = Math.max(0, currentTop - step)
        ;

    container.animate({ marginTop : newTop }, 1000);

}); 
```

您可以针对`.up`点击进行调整。确保您考虑了容器父级的高度（`.height()`最有可能使用）。

如果你打算走 CSS`position`路线，请确保容器父级*至少* `position:relative`是，并且容器*至少*也是相同的。我个人将容器设置为`position:absolute`.

# java - 在 Java 中获取（十进制）浮点数的 IEEE 754（单精度）表示

> ID：15000728
> 
> 赞同：2
> 
> 时间：2013-02-21T11:10:44.623
> 
> 标签：java, bit, ieee-754

我确定我缺少一些东西。我使用这段代码：

```
int bitsVal = Float.floatToIntBits(f);
String bitsString = Integer.toString(bitsVal, 2); 
```

这似乎适用于正数。我的意思是，字符串必须用零填充以获得整个 32 位表示，但除此之外，没关系。

例如 f=2.085 我得到：

```
bitsString=100 0000 0000 0101 0111 0000 1010 0100 
```

（为了清楚起见，我自己添加了空格，它们实际上并不存在）

那里只有 31 个 1 和 0，因为第一位是符号位，在这种情况下为 0，所以如果我只是用 0 填充它直到我得到 32 个元素就可以了。

f=0.85 也是如此，它给出：

```
bitsString=11 1101 1010 1110 0001 0100 0111 1011 
```

这也很好，因为前 2 个丢失的位是 0（同样是符号），又是 0，因为归一化指数的二进制表示是 01111011。

但是对于负值，我得到了非常奇怪的值。据我了解，如果 f 的给定正值给出 0xxxxxx 的 IEEE 754（单精度）表示（0 后跟 31 位用于归一化指数和尾数），则负 f 将返回相同的序列，除了第一位左侧从 0 变为 1。

但是使用上面的代码，对于 f=-0.85 我得到

```
bitsString = -100 0010 0101 0001 1110 1011 1000 0101 
```

其中，除了应该是“1”（我猜）的“-”（减号）之外，它的值很奇怪。

所以我的问题是，有没有办法使用 Java API 来获取给定浮点数的 IEEE 754（单精度）位序列（除了滚动我自己的，我已经这样做了）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:16:18.167

问题是`int`在 Java 中是签名的。当您这样做时，`Integer.toString(bitsVal, 2);`您*没有*显示 的​​文字位`bitsVal`，而是显示这些位表示的有符号整数的以二为底的表示（即`Integer.toString((int)0xFFFFFFFF, 2)`会产生`-1`）。

但是`Integer.toBinaryString(bitsVal)`将该值视为一个*无符号*的32 位整数，因此应该产生您所追求的结果（`Integer.toBinaryString((int)0xFFFFFFFF)`将产生一个 32 个 1 的字符串）。

# javascript - 狭窄文本区域中的向上和向下键

> ID：15000731
> 
> 赞同：2
> 
> 时间：2013-02-21T11:10:50.313
> 
> 标签：javascript, html, css

我有这个 jsbin：[http](http://jsbin.com/ezuzan/2)
://jsbin.com/ezuzan/2 HTML：

```
<div>
    <textarea>press up and down</textarea>
</div> 
```

CSS：

```
div {
  height: 20px;
  overflow: hidden;
}

textarea {
  height: 30px;
  font-size: 30px
} 
```

当我专注于文本区域并上下按下时，文本会移动。如何在不改变 div 和 textarea 的高度的情况下防止它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T11:15:17.027

为您的文本区域添加`overflow:hidden`样式

> 文本区域{
> 高度：30px；
> 字体大小：30px；
> 溢出：隐藏；
> }

# facebook - Facebook Like Box 插件在网页测试中不起作用

> ID：15000735
> 
> 赞同：2
> 
> 时间：2013-02-21T11:11:02.567
> 
> 标签：facebook, plugins, facebook-social-plugins

我刚刚从[https://developers.facebook.com/docs/reference/plugins/like-box/复制并粘贴了代码](https://developers.facebook.com/docs/reference/plugins/like-box/)

这是一个测试页面： http: [//net-gal.com/fbTest.html](http://net-gal.com/fbTest.html)

我在 Mac/Firefox 和 Safari 以及 pc/IE 中查看过该页面，该插件放置了很多空白区域，但没有 Facebook 提要。

如何让我的 Facebook 提要出现在页面上？

在正文标签下：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

在页面中显示：

```
<div class="fb-like-box" data-href="http://www.facebook.com/ginger.lindbergh" data-width="292" data-show-faces="true" data-stream="true" data-header="true"></div> 
```

我添加了另一个使用 facebook 开发人员页面 ID 工作的测试页面。见测试页面：net-gal.com/fbTest2.html

代码改为：data-href="http://www.facebook.com/platform"

所以看起来插件正在工作，但不是我的 Facebook 页面的链接。是我的 Facebook 安全设置吗？我检查过，它们看起来很好。我还用我的数字 id 链接替换了我的文本链接，结果是一样的；没有饲料。我向我的页面添加了一个新的状态更新，但这也没有改变它。但是我已经消除了实际的插件；它确实有效。

我很茫然; 任何人都可以告诉我我需要做什么来获取此代码以拉起我的 facebook like 框吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T12:46:34.423

我认为问题出在代码生成器上。我也面临同样的问题。这就是我为解决它所做的：

更改以下行：

```
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; 
```

至：

```
js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-24T02:56:24.790

答案比这里大家说的要简单。您需要做的就是在线上传您的 HTML 文件并在线测试，这样就可以了。

这不适用于您的本地计算机。我希望这有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-22T10:56:32.810

您必须拥有**Facebook 粉丝页面**才能使用 Like Box 社交插件。Like Box 插件不会显示您的墙，因为您的帐户只是个人资料。尝试使用任何粉丝页面，它会正常工作。

例如，替换：[https ://www.facebook.com/ginger.lindbergh](https://www.facebook.com/ginger.lindbergh)

与： http: [//www.facebook.com/AxtraRD](http://www.facebook.com/AxtraRD)

此外，您可以将您的 Facebook 个人资料转换为粉丝专页。此处描述的步骤如下：[https ://www.facebook.com/help/116067818477568/](https://www.facebook.com/help/116067818477568/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-30T14:07:48.170

从此改行：

```
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; 
```

对此：

```
js.src = "**http:**//connect.facebook.net/en_US/all.js#xfbml=1"; 
```

并在线上传！这解决了我的问题...

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-08-12T15:19:52.430

它在本地不起作用

您需要在 Web 服务器上发布以对其进行测试

# objective-c - Cocoa : Image Well - 自定义 NSImageView 类不显示图像？

> ID：15000736
> 
> 赞同：1
> 
> 时间：2013-02-21T11:11:08.190
> 
> 标签：objective-c, cocoa, nsimage, nsimageview

我通过界面生成器添加了一个 imagewell，设置了一个图像，然后运行，一切都很好。（显示图像）。

但是，如果我将自定义类更改为我自己的一个（NSImageView 子类），则不再显示图像。这是一个没有添加任何内容的裸类。为什么这不起作用？

然后我尝试在 initWithFrame 方法中手动设置图像：

```
 [self setImage:[NSImage imageNamed:@"image.png"]];
    [self setImageAlignment:NSImageAlignCenter];

    NSLog(@"image is valid? %@", [[self image] isValid] ? @"yes" : @"no"); 
```

但这也不起作用。没有错误，只是没有显示图像。

关于我的错误可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:13:52.370

确保在 drawRect 方法中调用 super drawRect。

```
 - (void)drawRect:(NSRect)dirtyRect
 {
     [super drawRect:dirtyRect];
     // Drawing code here.
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:13:58.430

在 XIB 中再次检查绑定，可能您可能需要再次将 ImageView 与您的新“SubClassImageView”链接

希望能解决问题....

# c# - 如何使用打开的文件选择器保存 facebook、skydrive 和本地路径？

> ID：15000739
> 
> 赞同：0
> 
> 时间：2013-02-21T11:11:15.213
> 
> 标签：c#, image, path, microsoft-metro, filepicker

```
var filePicker = new FileOpenPicker();
filePicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
filePicker.ViewMode = PickerViewMode.Thumbnail;
filePicker.FileTypeFilter.Clear();
filePicker.FileTypeFilter.Add(".jpg");
filePicker.FileTypeFilter.Add(".jpeg");
filePicker.FileTypeFilter.Add(".png");

var files = await filePicker.PickMultipleFilesAsync();

if (files != null)
{
    foreach (var file in files)
    {
        using (IRandomAccessStream fileStream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read))
        {
            BitmapImage bitmapImage = new BitmapImage();
            bitmapImage.SetSource(fileStream);
            images.Add(bitmapImage);
        }
    }
}
flpView.ItemsSource = images;
loadTimer(); 
```

上面的代码正在运行。我可以从本地和 facebook 等中选择多张照片。还将所选图像添加到翻转视图，但我想存储来自本地、skydrive 和 facebook 图像的图像路径。我想要这个，因为当应用程序启动时，翻转视图应该自动填充路径中的图像。当没有找到路径时，应该在设置魅力中进行更改。这就是想法。但我认为不需要整合 facebook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:01:19.413

使用选择器打开文件时，您得到的是存储文件，而不是传统文件。不同之处在于存储文件不需要有与之关联的路径。

Windows.Storage.AccessCache 提供缓存存储项目以供将来使用的方法。

[http://blogs.msdn.com/b/wsdevsol/archive/2012/12/05/stray-from-the-path-stick-to-the-storagefile.aspx](http://blogs.msdn.com/b/wsdevsol/archive/2012/12/05/stray-from-the-path-stick-to-the-storagefile.aspx) 提供了更多信息。

# zend-framework - zend setquery 为 2 个不同的查询返回相同的结果

> ID：15000742
> 
> 赞同：0
> 
> 时间：2013-02-21T11:11:18.730
> 
> 标签：zend-framework, gmail, google-api, google-calendar-api, gdata

我使用以下代码从谷歌日历中检索事件。

```
$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $gcal);
            $gcal = new Zend_Gdata_Calendar($client);
            $query = $gcal->newEventQuery();
            $query->setUser('default');
            $query->setVisibility('private');
            $query->setProjection('basic');
            $query->setStartMin($date);
            $query->setStartMax($newdate);
            $query->setQuery(''.$key->name.'@email.com'); 
```

当`$key->name` 给出 2 个不同的字符串时。例如`george.s`和`george.r`...查询。`returns the same info`它只发生在这个查询上。其他工作正常`no events assigned to george.s`。并且在 george.s 的信息中显示的 george.r 中显示了相同的信息。

我使用此代码来检索分配有特定人员的事件。这就是我将电子邮件作为查询的原因。

请告诉我我在这里做错了什么？

# hadoop - 如何在hadoop中添加另一个文件系统

> ID：15000746
> 
> 赞同：0
> 
> 时间：2013-02-21T11:11:29.517
> 
> 标签：hadoop, filesystems

我打算`org.apache.hadoop.fs`在 Hadoop 下添加一个文件系统，比如“我的云”，类似于 KFS 或 S3，它们已经存在于`org.apache.hadoop.fs`. 我想问一下，我为“我的云”编写我的文件系统并将包添加到 fs 下，但是我如何告诉`core-site.xml`或其他配置文件使用“我的云”文件系统。我需要在哪里进行更改以使“我的云”文件系统成为 Hadoop 的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:43:45.263

这实际上非常简单：

```
<property>
    <name>fs.mycloud.impl</name>
    <value>com.yourcompany.yourpackage.MyCloudFileSystem</value>
</property> 
```

现在您可以使用类似的 URL 引用该文件系统上的文件`mycloud://authority/path/to/file`，并且您将开始看到类似 MYCLOUD_BYTES_WRITTEN 的计数器。

# php - sf guard 不显示 sf_guard_user 的权限

> ID：15000749
> 
> 赞同：1
> 
> 时间：2013-02-21T11:11:34.843
> 
> 标签：php, symfony1, sfguard

我和 Symfony 合作了几个星期，我不太了解 sfPlugin，我正在编写一个不是我编写的代码，但无论如何我必须在不重新安装的情况下修复它。

**问题**：

我在 中添加了权限“perm_segreteria” `sf_guard_permission`，但没有以`sf_guard_user`.

我必须做什么/检查以显示`sf_guard_user`新权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:48:49.823

也许您只需在模块的生成器中添加权限小部件。

您可以尝试检查 *plugins/sfGuardPlugin/modules/sfGuardUser/config/generator.yml*
是否在*form - display*下设置**了 sf_guard_user_permission_list**。

 *如果这是您的问题，您必须在您的 symfony 应用程序中覆盖插件模块
（以确保在其他人更新插件时不会丢失您的更改）；
基本上在您的应用程序文件夹中添加一个名为*sfGuardUser/config/generator.yml*
的文件夹结构， 然后将旧*generator.yml*的内容复制到您的文件夹中并进行更改。*

# python - 带有误差线的最佳拟合梯度中的不确定性

> ID：15000750
> 
> 赞同：1
> 
> 时间：2013-02-21T11:11:37.443
> 
> 标签：python, scipy

我想获得最适合我的数据的梯度，我已经能够使用 scipy.stats.linregress 做到这一点。

但是是否有一个等效的误差考虑到数据上的误差线？

谢谢！

# javascript - 即时将第二个 onSelectRow 处理程序绑定到 jqGrid

> ID：15000755
> 
> 赞同：0
> 
> 时间：2013-02-21T11:11:47.640
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-plugins, jqgrid

我有几个包含 jqGrid 的页面，所有这些页面都定义了默认的 onSelectRowEventHandler 函数。

在其中一些页面上，我想放入部分视图 ( `@Html.Partial("SpecialGridScripts");`) 并在文档就绪处理程序中，将第二个事件处理程序绑定到 selectrow。当用户选择一行时，原始事件处理程序和自定义事件处理程序都应该触发。

到目前为止我尝试过的（不起作用）：

```
$(document).ready(function () {

    jQuery.extend(jQuery.jgrid.defaults, {

        onSelectAll: function (ids, selected) {
            $(this).triggerHandler("selectAll.jqGrid", [ids, selected]);
        },
        onSelectRow: function (id, selected) {
            $(this).triggerHandler("selectRow.jqGrid", [id, selected]);
        },

    });

    $('#myGrid').bind('selectRow.jqGrid', function (event, id, selected) {
        UpdateVisibility();
    });

}); 
```

[基于这个 jqgrid 多事件处理程序示例](http://craigcav.wordpress.com/2012/05/19/binding-multiple-event-handlers-to-jqgrid/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:43:57.830

我自己解决了这个问题：

```
$(document).ready(function () {

    jQuery.extend(jQuery.jgrid.defaults, {
    onSelectAll: function (ids, selected) {
        $(this).triggerHandler("selectAll.jqGrid", [ids, selected]);
    },
    onSelectRow: function (id, selected) {
        $(this).triggerHandler("selectRow.jqGrid", [id, selected]);
    },

});

$('#myGrid').on('jqGridSelectRow jqGridSelectAll', function (event, id, selected) {
        UpdateVisibility();
    }); 
```

});

对于 jqGrid 版本 > 4.3.2，它使用 jQuery 事件，因此我可以将它动态绑定到 jqGridSelectRow 和 jqGridSelectAll。我认为我发布的链接中的解决方案仅适用于 jqGrid < 4.3.2 版。

# facebook - 如何使用图形 API 获取 Facebook 照片的评论？

> ID：15000757
> 
> 赞同：2
> 
> 时间：2013-02-21T11:11:52.927
> 
> 标签：facebook, facebook-php-sdk

我想要做的是在我的网站上显示所有带有评论和喜欢的用户图像。我可以成功获取所有图像但无法获得评论。

```
$facebook = new Facebook($config);
$user = $facebook->getUser();
if($user)
{
  $photo = $facebook->api("/".231321313."?fields=comments,likes", array("access_token" => $facebook->getAccessToken());
  var_dump($photo);
} 
```

其中**231321313**是我的照片 ID，请帮助我被困在这里。

**结果：**我只得到照片细节而不是评论..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:25:09.623

[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)
告诉我照片评论可以在 /PHOTO_ID/comments 中找到

所以应该是这样的：

```
$photo_comments = $facebook->api("/". $photo->id ."/comments", array("access_token" => $facebook->getAccessToken()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T21:16:07.227

我认为您需要使用 FQL 查询来获取评论，并为该`object_id`字段提供照片的对象 ID。[https://developers.facebook.com/docs/reference/fql/comment/](https://developers.facebook.com/docs/reference/fql/comment/)

请注意以下部分，因为它是相关的，您可能不会喜欢它：

> […] 对于照片和相册，必须从照片和相册 FQL 表中查询 object_id。请注意，在照片和相册表中，object_id 与 pid 和aid 是不同的字段。

# ruby-on-rails - geocoder gem 的 country_code 列表

> ID：15000758
> 
> 赞同：3
> 
> 时间：2013-02-21T11:11:54.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-geocoder

我正在使用[地理编码](https://github.com/alexreisner/geocoder)器来检测国家用户。

在我的应用程序上，我需要检测国家用户。我做了类似的东西：

```
c = request.location.country_code
  case c
    when 'US'
     I18n.locale = :en
    when 'ES'
     I18n.locale = :es
    else
     locale ||= I18n.default_locale
   end 
```

**我的问题是在哪里可以找到`country_code`我的其他语言的列表？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:50:10.453

检查您正在使用的提供程序的文档。例如，Google 返回 ISO 3166-1 代码。

[http://www.iso.org/iso/iso-3166-1_decoding_table.html](http://www.iso.org/iso/iso-3166-1_decoding_table.html)

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T15:22:15.923

上面列出的表格不再可用。

请参阅此以供参考。

[http://labs.apnic.net/dists/regiontablecc.html](http://labs.apnic.net/dists/regiontablecc.html)

# iphone - 使用 FMDB 插入表失败

> ID：15000759
> 
> 赞同：0
> 
> 时间：2013-02-21T11:11:57.450
> 
> 标签：iphone, ios, sqlite, fmdb

我正在尝试在应用程序 didFinishLaunchingWithOptions 的 AppDelegate 中的数据库中插入一些值，但是每次插入数据失败时。

**代码**

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0];
NSString *path = [docsPath stringByAppendingPathComponent:@"db.sqlite"];
FMDatabase *database = [FMDatabase databaseWithPath:path];
[database open];
FMResultSet *results = [database executeQuery:@"select * from settings"];
if(results == nil)
{
 NSLog(@"Creating DB");
 [database beginTransaction];
 [database executeUpdate:@"create table settings(id int primary key, defaultaction text, beepsound text, vibrateeffect text, level text)"];
 NSString *query = [NSString stringWithFormat:@"insert into settings(id,defaultaction,beepsound,vibrateeffect,level) values (%d, '%@', '%@','%@','%@',)",11,@"auto", @"YES", @"YES", @"HIGH"];
 NSLog(@" %@",path);
 BOOL y= [database executeUpdate:query];
 if (!y)
 {
 NSLog(@"insert failed!!");
 }

 [database commit];
 [database close];

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:55:30.713

我认为问题出在您的插入查询代码中

```
NSString *query = [NSString stringWithFormat:@"insert into settings(id,defaultaction,beepsound,vibrateeffect,level) values (%d, '%@', '%@','%@','%@',)",11,@"auto", @"YES", @"YES", @"HIGH"]; 
```

您又添加了一个，最后在 values() 检查并删除最后一个，它肯定会起作用

```
NSString *query = [NSString stringWithFormat:@"insert into settings(id,defaultaction,beepsound,vibrateeffect,level) values (%d, '%@', '%@','%@','%@')",11,@"auto", @"YES", @"YES", @"HIGH"]; 
```

试试这个查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T07:06:31.677

```
NSString *query = @"INSERT into settings(id,defaultaction,beepsound,vibrateeffect,level) 
VALUES (%@, %@, %@,%@,%@)";

BOOL y = [database executeUpdate:query, [NSNumber numberWithInt:11],@"auto", @"YES", @"YES", @"HIGH"]; 
```

尝试将您的查询更改为上述查询，如果表创建成功，它将确定工作。

祝你好运。

# php - 无法运行 PHP，找不到 libcurl

> ID：15000761
> 
> 赞同：0
> 
> 时间：2013-02-21T11:12:00.927
> 
> 标签：php, libcurl

我无法正确配置 PHP。

运行`php -I`给出以下输出：

> php：加载共享库时出错：libcurl.so.3：错误的 ELF 类：ELFCLASS32

这是 strace 命令的输出，我在其中分离了最后的问题区域..

```
$ strace php -i
execve("/usr/bin/php", ["php", "-i"], [/* 38 vars */]) = 0
brk(0)                                  = 0x1e54f000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x2b676cd36000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x2b676cd37000
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY)      = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=167969, ...}) = 0
mmap(NULL, 167969, PROT_READ, MAP_PRIVATE, 3, 0) = 0x2b676cd38000
close(3)                                = 0
open("/lib64/libcrypt.so.1", O_RDONLY)  = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\360\t`\377=\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=48600, ...}) = 0
mmap(0x3dff600000, 2322880, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x3dff600000
mprotect(0x3dff609000, 2093056, PROT_NONE) = 0
mmap(0x3dff808000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x8000) = 0x3dff808000
mmap(0x3dff80a000, 184768, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x3dff80a000
close(3)                                = 0
open("/usr/lib64/libaspell.so.15", O_RDONLY) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0p\300\2\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=836408, ...}) = 0
mmap(NULL, 2963928, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x2b676cd62000
mprotect(0x2b676ce27000, 2097152, PROT_NONE) = 0
mmap(0x2b676d027000, 28672, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0xc5000) = 0x2b676d027000
mmap(0x2b676d02e000, 31192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x2b676d02e000
close(3)                                = 0
open("/usr/lib64/libpspell.so.15", O_RDONLY) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0p\4\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=3888, ...}) = 0
mmap(NULL, 2099280, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x2b676d036000
mprotect(0x2b676d037000, 2093056, PROT_NONE) = 0
mmap(0x2b676d236000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0) = 0x2b676d236000
close(3)                                = 0
open("/usr/local/gmp/lib/libgmp.so.3", O_RDONLY) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\300\232\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=399787, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x2b676d237000
mmap(NULL, 2438464, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x2b676d238000
mprotect(0x2b676d28a000, 2097152, PROT_NONE) = 0
mmap(0x2b676d48a000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x52000) = 0x2b676d48a000
close(3)                                = 0
open("/lib64/libdb-4.3.so", O_RDONLY)   = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\20\26\242\4>\0\0\0"..., 832) = 832
lseek(3, 985404, SEEK_SET)              = 985404
read(3, "\4\0\0\0\20\0\0\0\1\0\0\0GNU\0\0\0\0\0\2\0\0\0\4\0\0\0\24\0\0\0", 32) = 32
fstat(3, {st_mode=S_IFREG|0755, st_size=1008656, ...}) = 0
mmap(0x3e04a00000, 3102392, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x3e04a00000
mprotect(0x3e04af1000, 2097152, PROT_NONE) = 0
mmap(0x3e04cf1000, 20480, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0xf1000) = 0x3e04cf1000
close(3)                                = 0

open("/lib64/tls/x86_64/libcurl.so.3", O_RDONLY) = -1 ENOENT (No such file or directory)
stat("/lib64/tls/x86_64", 0x7fff993b0d80) = -1 ENOENT (No such file or directory)
open("/lib64/tls/libcurl.so.3", O_RDONLY) = -1 ENOENT (No such file or directory)
stat("/lib64/tls", 0x7fff993b0d80)      = -1 ENOENT (No such file or directory)
open("/lib64/x86_64/libcurl.so.3", O_RDONLY) = -1 ENOENT (No such file or directory)
stat("/lib64/x86_64", 0x7fff993b0d80)   = -1 ENOENT (No such file or directory)
open("/lib64/libcurl.so.3", O_RDONLY)   = 3
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0\350\3\0\0004\0\0\0"..., 832) = 832
close(3)                                = 0
stat("/lib64", {st_mode=S_IFDIR|0755, st_size=12288, ...}) = 0
open("/usr/lib64/tls/x86_64/libcurl.so.3", O_RDONLY) = -1 ENOENT (No such file or directory)
stat("/usr/lib64/tls/x86_64", 0x7fff993b0d80) = -1 ENOENT (No such file or directory)
open("/usr/lib64/tls/libcurl.so.3", O_RDONLY) = -1 ENOENT (No such file or directory)
stat("/usr/lib64/tls", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
open("/usr/lib64/x86_64/libcurl.so.3", O_RDONLY) = -1 ENOENT (No such file or directory)
stat("/usr/lib64/x86_64", 0x7fff993b0d80) = -1 ENOENT (No such file or directory)
open("/usr/lib64/libcurl.so.3", O_RDONLY) = 3
read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0\3\0\1\0\0\0\350\3\0\0004\0\0\0"..., 832) = 832
close(3)                                = 0
stat("/usr/lib64", {st_mode=S_IFDIR|0755, st_size=81920, ...}) = 0
writev(2, [{"php", 3}, {": ", 2}, {"error while loading shared libra"..., 36}, {": ", 2}, {"libcurl.so.3", 12}, {": ", 2}, {"wrong ELF class: ELFCLASS32", 27}, {"", 0}, {"", 0}, {"\n", 1}], 10php: error while loading shared libraries: libcurl.so.3: wrong ELF class: ELFCLASS32
) = 85
exit_group(127)                         = ? 
```

我无法理解它是否能够找到 libcurl 为什么它仍然给出错误。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:21:43.890

是否安装了 libcurl？如果您使用的是基于 Debian 的发行版，请尝试：

```
apt-get install php5-curl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:28:33.807

这似乎是因为 libcurl 已针对错误的体系结构进行编译。

# c# - 在 ASP.NET MVC3 中哪个 Grid/Table 会更适合和更容易实现？

> ID：15000764
> 
> 赞同：0
> 
> 时间：2013-02-21T11:12:04.887
> 
> 标签：c#, jquery, asp.net-mvc-3

我是 ASP.NET MVC3 的新手。我在我的项目中使用了 WebGrid 和 TableSorter。但他们在某些地方缺乏。所以我想知道是否有更好的网格/表格具有以下设施（当然是免费版本）：

> 1) 单列和多列排序。
> 
> 2）通过Ajax进行排序和分页。
> 
> 3) 过滤
> 
> 4）子网格（可选）
> 
> 5）轻量级和更少的编码
> 
> 6) CRUD 操作

我正在使用列表从表/网格中的模型获取数据，我必须显示超过 1000 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:13:45.107

我在 MVC 3 和 razor 中使用 jqgrid 已经有一段时间了。它是一个非常灵活和强大的工具，并且具有您正在寻找的功能。您将在其[页面](http://www.trirand.com/blog/)上找到更多信息。

# c++ - 是否可以在 Windows 系统范围内动态更改插入符号（文本光标）？

> ID：15000766
> 
> 赞同：2
> 
> 时间：2013-02-21T11:12:08.010
> 
> 标签：c++, window, caret

我想在窗口中动态更改插入符号（文本光标）并且独立于应用程序（系统范围）。

我的意思是这个：

![在此处输入图像描述](../Images/877e131c6962613b1ab4bf9357bfa8f4.png)

但我不知道是否可以制作这样的实用工具。

只有我在谷歌发现是调整注册表来更改插入符号。

但是一旦在注册表中更改，我必须重新启动计算机。

我不想重新启动计算机以更改插入符号。

是否可以在不重新启动的情况下更改 Windows 中的插入符号符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T04:46:27.153

如果您使用的是delphi，这是可能的。

```
function GetCaretPosition(var APoint: TPoint): Boolean;
var w: HWND;
  aID, mID: DWORD;
begin
  Result:= False;
  w:= GetForegroundWindow;
  if w <> 0 then
  begin
    aID:= GetWindowThreadProcessId(w, nil);
    mID:= GetCurrentThreadid;
    if aID <> mID then
    begin
      if AttachThreadInput(mID, aID, True) then
      begin
        w:= GetFocus;
        if w <> 0 then
        begin
          Result:= GetCaretPos(APoint);
          ClientToScreen(w, APoint);
        end;
        AttachThreadInput(mID, aID, False);
      end;
    end;
  end;
end;

//Small demo: set cursor to active caret position
procedure TForm1.Button1Click(Sender: TObject);
begin
ListBox1.Items.Clear();
end;

procedure TForm1.Timer1Timer(Sender: TObject);
var
  Pt: TPoint;
begin
  if GetCaretPosition(Pt) then
  begin
    ListBox1.Items.Add(Format('Caret position %d %d', [Pt.x, Pt.y]));
//    SetCursorPos(Pt.X, Pt.Y);
  end;
end;

end. 
```

# c# - WinRT C#：无法将 UnhandledException 保存到存储

> ID：15000769
> 
> 赞同：4
> 
> 时间：2013-02-21T11:12:18.700
> 
> 标签：c#, winrt-xaml

我正在开发 WinRT。如果抛出未处理的异常，我想将消息文本写入存储。我在“App.xaml.cs”中添加了一个事件处理程序，请参阅代码。

异常被捕获，但文件写入的最后一行再次崩溃->“异常”！

为什么？任何想法？

```
 public App()
 {
    this.InitializeComponent();
    this.Suspending += OnSuspending;
    this.UnhandledException += App_UnhandledException;
 }

 async void App_UnhandledException(object sender, UnhandledExceptionEventArgs e)
 {
    StorageFolder folder = Windows.Storage.ApplicationData.Current.LocalFolder; 
    StorageFile file= await folder.CreateFileAsync("crash.log",CreationCollisionOption.OpenIfExists);

    await FileIO.AppendTextAsync(file, e.Message);  // <----- crash again -----
 } 
```

谢谢

晴天

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-30T22:05:05.343

我一直在想同样的事情，并且在搜索的早期就偶然发现了这一点。我想出了一个方法，希望这对其他人也有用。

问题是`await`返回对 UI 线程的控制和应用程序的崩溃。您需要延期，但没有真正的方法可以得到延期。

我的解决方案是改用设置存储。我假设大多数想要这样做的人都想做一些 LittleWatson 风格的事情，所以这里有一些从[http://blogs.msdn.com/b/andypennell/archive/2010/11/01/error-reporting-on修改的代码-windows-phone-7.aspx](http://blogs.msdn.com/b/andypennell/archive/2010/11/01/error-reporting-on-windows-phone-7.aspx)为您提供方便：

```
namespace YourApp
{
    using Windows.Storage;
    using Windows.UI.Popups;
    using System;
    using System.Collections.Generic;
    using System.Text;
    using System.Threading.Tasks;

    public class LittleWatson
    {
        private const string settingname = "LittleWatsonDetails";
        private const string email = "mailto:?to=you@example.com&subject=YourApp auto-generated problem report&body=";
        private const string extra = "extra", message = "message", stacktrace = "stacktrace";

        internal static void ReportException(Exception ex, string extraData)
        {
            ApplicationData.Current.LocalSettings.CreateContainer(settingname, Windows.Storage.ApplicationDataCreateDisposition.Always);
            var exceptionValues = ApplicationData.Current.LocalSettings.Containers[settingname].Values;

            exceptionValues[extra] = extraData;
            exceptionValues[message] = ex.Message;
            exceptionValues[stacktrace] = ex.StackTrace;
        }

        internal async static Task CheckForPreviousException()
        {
            var container = ApplicationData.Current.LocalSettings.Containers;
            try
            {
                var exceptionValues = container[settingname].Values;
                string extraData = exceptionValues[extra] as string;
                string messageData = exceptionValues[message] as string;
                string stacktraceData = exceptionValues[stacktrace] as string;

                var sb = new StringBuilder();
                sb.AppendLine(extraData);
                sb.AppendLine(messageData);
                sb.AppendLine(stacktraceData);

                string contents = sb.ToString();

                SafeDeleteLog();

                if (stacktraceData != null && stacktraceData.Length > 0)
                {
                    var dialog = new MessageDialog("A problem occured the last time you ran this application. Would you like to report it so that we can fix the error?", "Error Report")
                    {
                        CancelCommandIndex = 1,
                        DefaultCommandIndex = 0
                    };

                    dialog.Commands.Add(new UICommand("Send", async delegate
                    {
                        var mailToSend = email.ToString();
                        mailToSend += contents;
                        var mailto = new Uri(mailToSend);
                        await Windows.System.Launcher.LaunchUriAsync(mailto);
                    }));
                    dialog.Commands.Add(new UICommand("Cancel"));

                    await dialog.ShowAsync();
                }
            }
            catch (KeyNotFoundException)
            {
                // KeyNotFoundException will fire if we've not ever had crash data. No worries!
            }
        }

        private static void SafeDeleteLog()
        {
            ApplicationData.Current.LocalSettings.CreateContainer(settingname, Windows.Storage.ApplicationDataCreateDisposition.Always);
            var exceptionValues = ApplicationData.Current.LocalSettings.Containers[settingname].Values;

            exceptionValues[extra] = string.Empty;
            exceptionValues[message] = string.Empty;
            exceptionValues[stacktrace] = string.Empty;
        }
    }
} 
```

要实现它，您需要按照上面的链接执行相同的操作，但要确保数据在此处，以防 url 出现故障：

`App.xaml.cs`构造函数（在调用之前`this.InitializeComponent()`）：

```
this.UnhandledException += (s, e) => LittleWatson.ReportException(e.Exception, "extra message goes here"); 
```

显然，如果您已经有一个 UnhandledException 方法，您可以在其中抛出对 LittleWatson 的调用。

如果您使用的是 Windows 8.1，您也可以添加 NavigationFailed 调用。这需要在实际页面中（通常是 MainPage.xaml.cs 或任何第一次打开的页面）：

`xx.xaml.cs`构造函数（任何给定页面）：

```
rootFrame.NavigationFailed += (s, e) => LittleWatson.ReportException(e.Exception, "extra message goes here"); 
```

最后，您需要询问用户是否要在应用重新打开时发送电子邮件。在您应用的默认 Page 的构造函数中（默认：App.xaml.cs 初始化的页面）：

```
this.Loaded += async (s, e) => await LittleWatson.CheckForPreviousException(); 
```

或者，如果您已经使用了 OnLoad 方法，请添加对它的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T21:21:03.350

在这种情况下，`await`可以粗略地翻译为“在另一个线程上完成这项工作，并在等待它完成的同时继续你正在做的事情”。鉴于您的应用程序正在*崩溃*，您可能不希望它继续这样做，直到您完成记录问题。在这种情况下，我建议同步运行您的文件 IO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T08:11:09.770

对于最初的问题来说，这可能来得太晚了，但是......

正如@Hans Passant 建议的那样，避免`await`（即`FileIO.AppendTextAsync()`同步运行），也得到@Jon 的支持，我会选择这个而不是*LittleWatson*相对过于繁重的代码。由于该应用程序无论如何都处于某种错误处理状态（这应该很少发生），我不会将同步引起的任何阻塞（由于删除等待）作为主要缺点。

将同步选项放在一边，以下`await`实现对我有用：

更改`await FileIO.AppendTextAsync(file, e.Message);`为：

```
Task task = LogErrorMessage(file, e.Message)
task.Wait(2000); // adjust the ms value as appropriate 
```

...

```
private async Task LogErrorMessage(StorageFile file, string errorMessage)
{
    await FileIO.AppendTextAsync(file, errorMessage); // this shouldn't crash in App_UnhandledException as it did before
} 
```

# wpf - 将 TabControl 绑定到具有不同内容的 ObservableCollection

> ID：15000771
> 
> 赞同：0
> 
> 时间：2013-02-21T11:12:23.403
> 
> 标签：wpf, binding, observablecollection, tabcontrol

'正在尝试创建 w 主窗口，它将有一个包含多个项目的选项卡控件（每个项目仅按需显示）......假设我们有我想要的 A 类型项目、B 类型项目和 C 类型项目（使用 MVVM 模式) 拥有一个可观察的对象集合，这些对象代表我的 tabitems 并且与我的 userscontrols 相关（每个 tabitem 都是一个 usercontrol）...问题是我不知道该怎么做。

我有一个 tabItemViewModelBase 类：

```
 public class TabItemViewModelBase : ViewModelBase
    {

        //Fields : 
        RelayCommand _closeCommand;

        //Constructor:
        public TabViewModel(string header)
        {
            this.Header = header;
        }

} 
```

在我的主窗口数据上下文中，我有一个此类的可观察集合：

```
 //Propriétés
        ObservableCollection<TabViewModel> _tabItems; 
```

在我的 MainWindow 中，我有 TabControl 项的以下标记

```
 <TabControl Padding="0" ItemsSource="{Binding Path=Workspaces}">
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Header}"/>
                </DataTemplate>
            </TabControl.ItemTemplate>
            <TabControl.ContentTemplate>
                <DataTemplate>
                    **<view:ClientView/>**
                </DataTemplate>
            </TabControl.ContentTemplate>

        </TabControl> 
```

但正如您所见，所有项目都附加到 ClientView 用户控件，并且我正在使用 tabviewitem 来创建我的项目，我需要一个属性或一种方法来为 observablecollection 的每个元素指定内容表单...

（我有一个 ClientListingViewModel 类和 ClientCreationViewModel 类），我不能同时使用它们，因为我不知道如何为它们中的每一个指定视图！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:37:33.217

要指定针对特定视图模型的视图，您可以在数据模板中执行此操作。

首先，您需要向视图和视图模型命名空间添加命名空间引用。我已经包含了一个使用 Window 的示例，但它也适用于 UserControls。

```
<Window ...
        xmlns:v="clr-namespace:PutYourViewNamespaceHere"
        xmlns:vm="clr-namespace:PutYourViewModelNamespaceHere"> 
```

接下来，您需要在容器的资源部分定义数据模板。在下面的示例中，我使用 ClientListingView 作为 ClientListingViewModel 的数据模板

```
<Window.Resources>
     <DataTemplate DataType="{x:Type vm:ClientListingViewModel">
          <v:ClientListingView />
     </DataTemplate>
     <DataTemplate DataType="{x:Type vm:ClientCreationViewModel">
          <v:ClientCreationView />
     </DataTemplate>
</Window.Resources> 
```

# android - 如何在android中添加一个计数器，每当我按下一个按钮时，计数器都会增加一个

> ID：15000772
> 
> 赞同：0
> 
> 时间：2013-02-21T11:12:25.820
> 
> 标签：android, counter

好心，我正在保存内部文件，然后分别使用文件输入/输出流读取它。我想在保存期间添加一个计数器，每次我按下保存时，计数器都会增加一。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:14:14.883

使用活动级别计数器并增加其值。如果您需要保留它，请执行 onPause 并使用共享首选项在 onResumt 上检索它。

# asp.net - sql to linq asp.net 关系

> ID：15000775
> 
> 赞同：0
> 
> 时间：2013-02-21T11:12:30.983
> 
> 标签：asp.net, linq-to-sql, relation

我在我的 asp .net 项目中生成了我的 dbml 类。

我有一个名为recepies 的表和一个名为components 的表。

```
List<recepy> prods = db.recepies.Where(p => p.EndProd_id == id).ToList(); 
```

这是我用来从数据库中获取记录的行。我得到了我想要的记录，所以这个命令工作得很好。

现在我想输入我的属性。输入我的属性没有问题，除非我想使用链接到另一个表的属性。在我的“recepies”表中，我使用了组件表中的 ID。当我查看我的 dbml 时，链接是存在的。

通常我应该能够通过线路获得财产

```
recepy.components.Id 
```

除了“组件”不作为属性存在...我做错了什么？

提前致谢！

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:18:53.070

自己找到了答案。。

事实证明，该表也需要一个主键。在我的桌子上不是这样。

# asp.net-mvc-3 - JQgrid排序MVC3

> ID：15000777
> 
> 赞同：1
> 
> 时间：2013-02-21T11:12:44.910
> 
> 标签：asp.net-mvc-3, razor, jqgrid

在我的 CS 页面中，我有以下代码

```
 public JsonResult DynamicGridData(string sidx, string sord, int page, int rows)
    {

        Employee _emp = new Employee();

        List<Employee> _lstemp = _emp.GetallEmp();
        int pageIndex = Convert.ToInt32(page) - 1;
        int pageSize = rows;
        int totalRecords = _lstemp.Count();
        int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);

        var jsonData = new
        {
            total = totalPages,
            page,
            records = totalRecords,
            rows = (
                from emp in _lstemp
                select new
                {
                    i = emp.ID,
                    cell = new string[] { emp.ID.ToString(), emp.FirstName.ToString(), emp.LastName.ToString(),emp.Age.ToString(),emp.State.ToString(),emp.Country.ToString() }
                }).ToArray()
        };
        return Json(jsonData);
    } 
```

我的模型是

```
 public class Employee
{
    public int ID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
    public string State { get; set; }
    public string Country { get; set; }

    public List<Employee> GetallEmp()
    {
        List<Employee> list = new List<Employee>()
        {
            new Employee{ID=1,FirstName="Asish",LastName="Nehra",Age=25,State="A",Country="India"},
            new Employee{ID=2,FirstName="Nsish",LastName="Oehra",Age=35,State="B",Country="Sri Lanka"},
            new Employee{ID=3,FirstName="Psish",LastName="Lehra",Age=26,State="C",Country="Bangladesh"},
            new Employee{ID=4,FirstName="Jsish",LastName="Hehra",Age=25,State="D",Country="Australia"},
            new Employee{ID=5,FirstName="Usish",LastName="Tehra",Age=85,State="E",Country="Kenya"},
            new Employee{ID=6,FirstName="Rsish",LastName="Lehra",Age=15,State="F",Country="India"},
            new Employee{ID=7,FirstName="Isish",LastName="Eehra",Age=5,State="G",Country="Pakistan"},
             new Employee{ID=8,FirstName="Asish",LastName="Nehra",Age=25,State="A",Country="India"},
            new Employee{ID=9,FirstName="Nsish",LastName="Oehra",Age=35,State="B",Country="Sri Lanka"},
            new Employee{ID=10,FirstName="Psish",LastName="Lehra",Age=26,State="C",Country="Bangladesh"},
            new Employee{ID=11,FirstName="Jsish",LastName="Hehra",Age=25,State="D",Country="Australia"},
            new Employee{ID=12,FirstName="Usish",LastName="Tehra",Age=85,State="E",Country="Kenya"},
            new Employee{ID=13,FirstName="Rsish",LastName="Lehra",Age=15,State="F",Country="India"},
            new Employee{ID=14,FirstName="Isish",LastName="Eehra",Age=5,State="G",Country="Pakistan"},
             new Employee{ID=15,FirstName="Asish",LastName="Nehra",Age=25,State="A",Country="India"},
            new Employee{ID=16,FirstName="Nsish",LastName="Oehra",Age=35,State="B",Country="Sri Lanka"},
            new Employee{ID=17,FirstName="Psish",LastName="Lehra",Age=26,State="C",Country="Bangladesh"},
            new Employee{ID=18,FirstName="Jsish",LastName="Hehra",Age=25,State="D",Country="Australia"},
            new Employee{ID=19,FirstName="Usish",LastName="Tehra",Age=85,State="E",Country="Kenya"},
            new Employee{ID=20,FirstName="Rsish",LastName="Lehra",Age=15,State="F",Country="India"},
            new Employee{ID=21,FirstName="Isish",LastName="Eehra",Age=5,State="G",Country="Pakistan"},

        };
        return list;
    }
} 
```

在我的 Cshtml 页面中

```
<script type="text/javascript">
jQuery(document).ready(function () {

    jQuery("#list").jqGrid({
        url: '/Home/DynamicGridData/',
        datatype: 'json',
        mtype: 'POST',
        colNames: ['ID', 'FirstName', 'LastName', 'Age', 'State', 'Country'],
        colModel: [
  { name: 'ID', index: 'ID', width: 40, align: 'left' },
  { name: 'FirstName', index: 'FirstName', width: 80, align: 'left' },
  { name: 'LastName', index: 'LastName', width: 80, align: 'left' },
  { name: 'Age', index: 'Age', width: 80, align: 'left' },
  { name: 'State', index: 'State', width: 80, align: 'left' },
  { name: 'Country', index: 'Country', width: 80, align: 'left' }],
        pager: jQuery('#pager'), 
        rowNum: 10,
        rowList: [10, 20, 30],
        sortname: 'ID, FirstName, LastName, Age, State, Country',
        sortorder: "Asc",
        viewrecords: true,
        imgpath: '/content/images',
        autowidth: true,
        width: '100%',
        height: '100%',
        multiselect: false,
        caption: "Grid example",
        loadComplete: function() {
        //jQuery("#myGridID").trigger("reloadGrid"); // Call to fix client-side sorting
    }
    });

    //jQuery("#list").jqGrid('navGrid', '#pager', { add: true, edit: true, del: true });
    jQuery("#list").jqGrid('navGrid', '#pager', { edit: false, add: false, del: false }, {}, {}, {}, { multipleSearch: true, multipleGroup: true, showQuery: true });

}); 
</script> 
```

我如何对所有列进行排序..我只想通过将所有字段设置为 sortable:true 来对所有字段进行排序

**编辑**格式`<script>`不正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:18:30.233

在您的控制器中，您将需要使用 an`OrderBy`然后使用`sidx, sord`网格传递给您的控制器的值。我还在下面的示例中包括了分页，因此您的网格只能显示数据集中的一页行。

```
List pagedQuery =  _lstemp.AsQueryable().OrderBy(sidx + " " + sord).Skip((page - 1) * rows).Take(rows); 
```

在您的`colModel`（jqGrid 设置）中，您将使用属性 par 设置要排序的每一列

`sortable: false,`或者`sortable: true`

如果您希望所有内容都可以排序，则可以使用

```
$.extend($.jgrid.defaults, {sortable: true}); 
```

您将能够检查您的 POST 以查看 jqGrid 告诉控制器要排序的列以及方向。

**注意：**`OrderBy`对于这种特定的语法，您将需要 System.Linq.Dynamic dll 。此 dll 可用：

*   作为一个[nuget 包](https://www.nuget.org/packages/System.Linq.Dynamic/)
*   在[项目页面](https://github.com/kahanu/System.Linq.Dynamic)

# object - 具有统一 3d 限制的随机范围

> ID：15000778
> 
> 赞同：0
> 
> 时间：2013-02-21T11:12:45.447
> 
> 标签：object, random, range, unity3d, union

我在更新函数中在c#中声明了一个vector3的变量

```
 Vector3 position = new Vector3(Random.Range(x, y), 0, 0); 
```

对于 x 和 y，我需要 5-10 和 20-25 的值。

所以值应该是 5, 6, 7, 8, 9, 10, 20, 21, 22, 23, 24, 25

通常我曾经给

```
 Random.Range(-0F,-2F); 
```

但在这里是不可能的。我不知道如何解决这个问题。

任何联合功能都可以统一吗？

或任何其他方法???

等待温和的想法和适当的答复。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:09:02.750

制作一个数字数组`5, 6, 7, 8, 9, 10, 20, 21, 22, 23, 24, 25`

然后从数组中随机选择一个数字。

```
void Awake()
{
   int[] array = {5, 6, 7, 8, 9, 10, 20, 21, 22, 23, 24};

   int randNum = Random.Range(0, array.Length);
} 
```

编辑：我看到您将数字作为一组，但如果您只需要一组 x 和一组 y。然后

```
Vector3 position = new Vector3(Random.Range(5,11), Random.Range(10, 26), z); 
```

注意最后一个数字是 n+1，因为 Random.Range 是独占的。

**EDIT2：**使用我的课程，它将允许您通过 3 个范围并随机返回一个数字。

```
using UnityEngine;
using System.Collections;

public class RandomSetGenerator
{   
    public static int generateFromRange(int range1Start, int range1Stop, int range2Start, int range2Stop, int range3Start, int range3Stop)
    {
        List<Integer> randomList = new List<Integer>();

        randomList = addToRandomList(randomList, range1Start, range1Stop);
        randomList = addToRandomList(randomList, range2Start, range2Stop);
        randomList = addToRandomList(randomList, range3Start, range3Stop);

        return randomList[Random.Range(0, randomList.Count)];
    }

    private static List<Integer> addToRandomList(List<Integer> randomList, int startRange, int endRange)
    {
        for(int i = startRange; i <= endRange; i++)
            randomList.Add(i);

        return randomList;
    }   
} 
```

# javascript - 在选择中启用禁用选项

> ID：15000781
> 
> 赞同：2
> 
> 时间：2013-02-21T11:12:53.207
> 
> 标签：javascript, jquery

我有两个选择字段。用于最小点和最大点。范围是 5000 到 50000，我想要达到的是在 maxpoint 选择框中我想显示大于 min points 选择值的值。

例如，如果我从 minpoint 选择字段中选择 15000，那么在我的 maxpoint 选择框中，我想隐藏/禁用前两个选项（5000 和 10000），因为它们小于 15000。

Baiscally 启用和禁用基于 minpoints 的 maxpoints。

HTML 看起来像这样

```
<select class="pointSelect" tabindex="2" id="minPoints" name="minPoints">
<option value="0" selected="selected">Min</option>
<option value="5000">5000</option>
<option value="10000">10000</option>
<option value="15000">15000</option>
<option value="20000">20000</option>
<option value="25000">25000</option>
<option value="30000">30000</option>
<option value="40000">40000</option>
<option value="50000">50000</option>
</select>
<select class="pointSelect" tabindex="3" id="maxPoints" name="maxPoints">
<option value="50000" selected="selected">Max</option>
<option value="5000">5000</option>
<option value="10000">10000</option>
<option value="15000">15000</option>
<option value="20000">20000</option>
<option value="25000">25000</option>
<option value="30000">30000</option>
<option value="40000">40000</option>
<option value="50000">50000</option>
</select> 
```

我正在尝试这样的事情，但还没有达到标准

```
 $('#minPoints').change(function(){
    var index = $(this).find('option:selected').index();
    $('maxPoints').find('option').lt(index).attr('disabled','disabled');
    $('maxPoints').find('option').gt(index).removeAttr('disabled');
    }); 
```

有人可以指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:25:13.707

您可以根据索引有选择地显示和隐藏选项：

```
$('#minPoints').change(function () {
    var index = $(this).find('option:selected').index();
    $('#maxPoints').find('option:lt(' + index + ')').hide();
    $('#maxPoints').find('option:gt(' + index + ')').show();
});

$('#maxPoints').change(function () {
    var index = $(this).find('option:selected').index();
    $('#minPoints').find('option:gt(' + index + ')').hide();
    $('#minPoints').find('option:lt(' + index + ')').show();
}); 
```

[jsfiddle](http://jsfiddle.net/AbUwH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:32:18.873

您宁愿使用`lt`或`gt`这样-

```
$("#maxPoints").find("option:lt("+index+")").attr("disabled","disabled");
$("#maxPoints").find("option:gt("+index+")").removeAttr("disabled"); 
```

工作小提琴：[这里](http://jsfiddle.net/7nmrk/2/)

# c# - SQL 选择查询中的“=”错误附近的语法不正确

> ID：15000783
> 
> 赞同：0
> 
> 时间：2013-02-21T11:12:58.500
> 
> 标签：c#, sql, sql-server

错误文本：`Incorrect syntax near '='.`

我的代码中有什么错误？我如何正确选择此代码以确定是否找到

这是我所有的代码，请检查一下

它检查我的值并更新一些它或插入

sssssssssssssssssssssssssssssssssssssssssssssssss

```
 //Test For Insert Duplicate Row
                        int tst = 0;

                        SqlCommand cmd = new SqlCommand("Select Count(*) From Product Where ProdCode=@CodeVar And ProdName= @NameVar And BuyPrice=@PriceVar",conn);
                        cmd.Parameters.Add("@CodeVar", SqlDbType.Int).Value = Convert.ToDouble(dataGridView1.Rows[x].Cells[1].Value);
                        cmd.Parameters.Add("@NameVar", SqlDbType.NVarChar).Value = dataGridView1.Rows[x].Cells[2].Value;
                        cmd.Parameters.Add("@PriceVar", SqlDbType.Money).Value = Convert.ToDouble(dataGridView1.Rows[x].Cells[4].Value);
                        cmd.CommandType = CommandType.Text;
                        conn.Open();
                       SqlDataReader reader= cmd.ExecuteReader();
                        if(reader.Read())
                        {

                            if (Convert.ToInt16(reader[0]) > 0)
                            {
                                tst = 1;
                            }
                        }
                        reader.Close();
                        conn.Close();
                        // Test For Same Row But Anthor Code
                        cmd.CommandText = "Select Count(*) From Product Where ProdName=@PName And BuyPrice=@BPrice And Not ProdCode  = @Pcode And ProdCode BETWEEN @SCode And @SCode+2000";
                        cmd.CommandType = CommandType.Text;
                        cmd.Parameters.Add("@PName",SqlDbType.NVarChar).Value = dataGridView1.Rows[x].Cells[2].Value ;
                        cmd.Parameters.Add("@BPrice", SqlDbType.Money).Value = Convert.ToDouble(dataGridView1.Rows[x].Cells[5].Value);
                        cmd.Parameters.Add("@Pcode",SqlDbType.Int).Value =  Convert.ToInt32(dataGridView1.Rows[x].Cells[1].Value);
                        cmd.Parameters.Add("@SCode", SqlDbType.Decimal).Value = Convert.ToDecimal(label10.Text);
                        cmd.CommandType = CommandType.Text;
                        conn.Open();
                      reader = cmd.ExecuteReader();
                        if(reader.Read())
                        {
                            if(Convert.ToInt16(reader[0])>0)
                            {
                                tst = 2;
                            }

                        }
                        reader.Close();
                        conn.Close();
                        cmd.CommandText = "Select Count(*) From Product Where ProdCode = @CodeVar1 ";
                        cmd.Parameters.Add("@CodeVar1", SqlDbType.Int).Value = Convert.ToInt32(dataGridView1.Rows[x].Cells[1].Value);
                        cmd.CommandType = CommandType.Text;
                        conn.Open();
                         reader= cmd.ExecuteReader();
                        if (reader.Read())
                        {

                            if (Convert.ToInt16(reader[0]) > 0 && tst == 0)
                            {
                                MessageBox.Show("الأكواد باللون الأحمر خاصة احد الأصناف ..!");
                                dataGridView1.Rows[x].Cells[1].Style = redcell;
                                return;
                            }
                        }
                        reader.Close();
                        conn.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:14:48.703

您应该尝试`ProdCode Not = @Pcode`用`ProdCode != @Pcode`or`ProdCode <> @Pcode`或替换`Not ProdCode = @Pcode`。

所有在 TSQL 中都应该是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:15:11.253

改变

```
and ProdCode Not = @Pcode 
```

至

```
and not ProdCode = @Pcode 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:15:26.787

您需要将`ProdCode Not = @Pcode`sql 命令中的`ProdCode <> @Pcode`

# php - TYPO3 无法写入 MySQL 数据库

> ID：15000786
> 
> 赞同：0
> 
> 时间：2013-02-21T11:13:03.603
> 
> 标签：php, mysql, typo3

TYPO3 安装后无法在自己的表中插入数据，但没有抱怨，例如通过安装工具创建的管理员用户以 完成`User created!`，但`be_users`表保持为空。

服务器正在使用：

*   Debian 6.0.6
*   TYPO3 6.0.2
*   PHP 版本 5.3.19-1~dotdeb.0
*   mysql Ver 14.14 发行版 5.5.28

**编辑：**到目前为止我尝试过的内容：

**1.**使用 MySQL Workbench 插入和typo3 数据库用户正在工作。赠款：

`GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, TRIGGER ON `typo3`.* TO 'typo3_user'@'localhost'`

**2.**我体验了这种`commit`行为并在 中添加了两行`Installer.php`，但没有成功：

```
// added
$autoCommitOffResult = $GLOBALS['TYPO3_DB']->sql_query('SET SESSION autocommit = 0;');

// the original non-working insert
$result = $GLOBALS['TYPO3_DB']->exec_INSERTquery('be_users', $insertFields);

// added
$GLOBALS['TYPO3_DB']->sql_query('commit;'); 
```

**3.**我删除了严格的`sql_mode`.

**4.**在非常相似的服务器上再次安装 Typo3 成功。

有什么进一步的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:54:18.363

在不起作用的行周围尝试以下操作（之前 2 行，下面 4 行）：

```
$GLOBALS['TYPO3_DB']->debugOutput = true;
$GLOBALS['TYPO3_DB']->store_lastBuiltQuery = true;

// Now the line which should insert the BE User:
// the original non-working insert
$result = $GLOBALS['TYPO3_DB']->exec_INSERTquery('be_users', $insertFields);

// Now print out the "insert_id" (uid autoincrement value) and query which has been executed:
echo $GLOBALS['TYPO3_DB']->sql_insert_id();
echo "<br />\n";
echo $GLOBALS['TYPO3_DB']->debug_lastBuiltQuery;
exit(); 
```

然后尝试将此查询复制并粘贴到 mysql shell。与任何问题一样，请确保您使用相同的服务器、数据库等。

出口注意没有其他代码会在创建后直接删除新用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:01:46.977

你`commit`在交易吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T11:55:23.780

MySQL 的默认引擎是 InnoDB。将 Typo3 表的引擎更改为 MyISAM 可以解决问题：

```
ALTER TABLE be_users ENGINE = MyISAM;
... 
```

# c# - 使用 Dispose 从目标 (SUT) 继承单元测试

> ID：15000788
> 
> 赞同：0
> 
> 时间：2013-02-21T11:13:09.657
> 
> 标签：c#, unit-testing, dispose, ambiguous

我发现如果你继承一个类，测试一个类要容易得多。考虑这个seudo示例：

```
 public class Bizz
  {
    public void Do()
    {
      var obj = ExtenOutOfTest();
      someList.Add(obj);
    }

    protected List<ISomeObejct> someList = new ISomeObejct<ISomeObejct>();

    protected virtual ISomeObejct ExtenOutOfTest()
    {
     //return real obejct 
    }
  } 
```

测试看起来像这样：

```
 [TestClass]
  public class BizzTest : Bizz
  {
    private ISomeObejct _fakedObj;

    protected override ISomeObejct ExtenOutOfTest()
    {
      return _fakedObj;
    }

    [TestMethod]
    public void Test_Do_Add()
    {
      _fakedObj = new Fake<ISomeObejct>().FakedObject; 

      Assert.IsFalse(someList.Any());
      base.Do(); //<-- target
      Assert.IsTrue(someList.Any());
    }
  } 
```

现在我有能力隔离我的测试，*并且*我的 Bizz 对象不会公开任何其他方法，除了应该公开的方法。

这种单元测试方式是不好的做法吗？

当我修改我的`Bizz`类以实现 IDisposable 时，我无法再运行我的测试：

```
~Bizz(){Dispose(false);}

public void Dispose()
{
  Dispose(true);
}

private void Dispose(bool disposing)
{
  if(!disposing) return;
  //do cleanup resources
} 
```

在向我显示它失败之前它甚至不会启动： *单元测试适配器抛出异常：找到模糊匹配。*

我试图制作`Dispose`虚拟然后在测试类中覆盖它 - 但它没有用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T09:14:22.953

使用如[http://msdn.microsoft.com/en-us/library/fs2xkftw(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/fs2xkftw%28v=vs.100%29.aspx)中所述的标准处置模式可以解决问题。也就是说，替换`private void Dispose(bool disposing)...`为`protected void Dispose(bool disposing)...`。

问题与 MSTest（我测试了 Visual Studio 2010 和 2013）确实在每次测试后对测试类调用 dispose 的事实有关。为此，MSTest 查询所有`public void Dispose`函数，但不幸的是忽略了参数，这是区分您的两个变体的函数签名的一部分。因此，MSTest 与`Ambiguous match found`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:03:53.617

失败的原因对我来说仍然是个谜。但这似乎是固定的：

```
void IDisposable.Dispose()
{
  GC.SuppressFinalize(this);
  Dispose(true);
}

private void Dispose(bool disposing)
{
   //actual cleanup omitted
} 
```

请注意，该接口现在已显式实现 + 实际的清理方法已设为`Dispose(bool disposing)`私有。

# php - 用 PHP 处理 Jquery Post

> ID：15000789
> 
> 赞同：0
> 
> 时间：2013-02-21T11:13:12.710
> 
> 标签：php, jquery, forms

我已经在这几个小时了，我完全不知所措....我已经尽我所能，但问题是我对 Jquery 不是很熟悉，这是我第一次曾经使用过它.... 基本上，我试图将表单数据传递给 php 脚本，然后返回一个包含网页源代码的变量。

这是jQuery：

```
 $("button").click(function(){
hi = $("#domain").serialize();
var page;
    $.ajax({
    type: "POST",
    url: "webcrawler.php",
    data: hi,
    //dataType: "text",
    success: function(data){
    page = data;
    document.write(page);
    }
  });

  }); 
```

这是它引用的html：

```
 <div id="contact_form">
      <form name="contact" action="">
      <fieldset>
      <label for="domain" id="domain_label">Name</label>  
      <input type="text" name="domain" id="domain" size="30" value="" class="text-input" />

      <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
      </fieldset>
      </form>
      </div> 
```

这是处理它的PHP：

```
 $search = $_POST["domain"];

      if(!$fp = fopen($search,"r" )) {

      return false;

      } 

      fopen($search,"r" );
      $data = "";

      while(!feof($fp)) { 

      $data .= fgets($fp, 1024);

      }

      fclose($fp); 

  return $data;

      ?> 
```

我认为变量 $search 是空白的，但那是因为我没有用 jquery 正确发送它或用 php 正确接收它吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:20:04.487

那么，当您使用 jQuery 序列化表单数据时，您应该序列化`<form>`，而不是`<input>`字段。

所以试试这个：

```
$("button").click(function() {
    var formData = $('form[name="contact"]').serialize();
    var page;

    $.ajax({
        type: "POST",
        url: "webcrawler.php",
        data: formData,
        success: function(data) {
            page = data;
            document.write(page);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:50:17.063

看到你必须做几件事：

```
$("form[id='contact_form']").submit(function (e) {//<---instead click submit form
    e.preventDefault(); //<----------------you have to stop the submit for ajax
    Data = $(this).serialize(); //<----------$(this) is form here to serialize
    var page;
    $.ajax({
       type: "POST",
       url: "webcrawler.php",
       data: Data,
       success: function (data) {
          page = data;
          document.write(page);
       }
   });

}); 
```

就像在评论中一样：

1.  `Submit form`反而`button click`
2.  `Stop the form submission`否则页面将被刷新。
3.  `$(this).serialize()`在这里序列化表单，因为这里`$(this)`是表单本身。

# android - C++库交叉编译

> ID：15000790
> 
> 赞同：2
> 
> 时间：2013-02-21T11:13:13.240
> 
> 标签：android, android-ndk

我想将一个 c++ 库交叉编译到 android 平台，这个库依赖于其他库（这些库还包含在 android 平台中）。

实际上，我已经下载了 android 源代码（android 4.1），我也有库源代码，我只是不知道如何交叉编译这个库及其依赖项？如果有人能告诉我正确的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:03:56.893

我相信最简单的方法是使用最新的 Android NDK 设置[独立工具链](http://www.kandroid.org/ndk/docs/STANDALONE-TOOLCHAIN.html)，并使用该工具链构建您的库及其所有依赖项。这是一个例子：[http ://trac.osgeo.org/gdal/wiki/BuildingForAndroid](http://trac.osgeo.org/gdal/wiki/BuildingForAndroid)

# jquery - jQuery UI 使用 ajax 自动完成，源是使用 foreach 从文本文件生成的

> ID：15000791
> 
> 赞同：3
> 
> 时间：2013-02-21T11:13:20.443
> 
> 标签：jquery, jquery-ui, foreach, jquery-ui-autocomplete

我做了很多搜索，得到了很多与我的案例类似的结果，如下所示：

*   [Jquery UI 自动完成 ajax 未填充下拉框](https://stackoverflow.com/questions/9481972/jquery-ui-autocomplete-ajax-is-not-populating-dropdown-box)
*   [带有ajax请求的jQuery UI GET自动完成源](https://stackoverflow.com/questions/4619184/jquery-ui-get-autocomplete-source-with-ajax-request)
*   [带有 json 和 ajax 的 JQuery UI 自动完成](https://stackoverflow.com/questions/11852282/jquery-ui-autocomplete-with-json-and-ajax)

数据源来自文本文件，格式如下：

```
postcode,suburb,state,lat,lon
200,AUSTRALIAN NATIONAL UNIVERSITY,ACT,-35.277272,149.117136
221,BARTON,ACT,-35.201372,149.095065
800,DARWIN,NT,-12.801028,130.955789
801,DARWIN,NT,-12.801028,130.955789
804,PARAP,NT,-12.432181,130.84331
810,ALAWA,NT,-12.378451,130.877014
810,BRINKIN,NT,-12.367769,130.869808
810,CASUARINA,NT,-12.376597,130.850489
810,JINGILI,NT,-12.385761,130.873726
810,LEE POINT,NT,-12.360865,130.891349 
```

我试图作为自动完成字段源包含的数据是每行的第一个和第二个（邮政编码和郊区）字段。但是邮政编码和郊区过滤器与州。例如，ACT 是所有邮政编码的活动状态，郊区是自动完成的来源。我曾经`array_unique()`删除重复的数据。

```
//take area from state
function take_area(){
    global $wpdb;
    $uploads = wp_upload_dir();
    $upload = $uploads[baseurl];
    $file = $upload.'/csv/suburb_and_area.txt';
    $f = fopen($file, 'r');
    $state = $_POST['state'];
    $counter = 0;
    while($line = fgets($f, 4096)){
        $details = explode(',', $line); 
        $counter++;
        if(trim($details[2]) == $state){
            $state_arr[$counter] = $details[1];
        }
    }
    $option = '';
    if($state!=''){
        $c=0;
        $area_of_state = array_unique($state_arr);
        foreach($area_of_state as $area){
            if($c>0){$option .= ', ';}
            $option .= '"'.$area.'"';
            $c++;
        }
    }
    echo $option;
} 
```

和 JavaScript：

```
 $("#state").change(function(){
    var state = $('#state :selected').attr('data-value');
    if(!state){
        state = $('#state').val();
    }
    $.ajax({
        url:"<?php bloginfo('wpurl'); ?>/wp-admin/admin-ajax.php", 
        type:'POST',
        data:'action=take_area_from_state&state=' + state,
        success:function(results){
            if(results!=0){
                $("#area").removeAttr("disabled"); 
                $("#area").empty();
                var source = [results];
                $("#area").autocomplete({source: source});
            }else{
                $("#area").attr("disabled", "disabled"); 
            }
        }
    });

}); 
```

和回应

```
"AUSTRALIAN NATIONAL UNIVERSITY", "BARTON", "HMAS CRESWELL", "JERVIS BAY", "CANBERRA", "DEAKIN", "DEAKIN WEST", "DUNTROON", "HARMAN", "HMAS HARMAN", "PARKES", "PARLIAMENT HOUSE", "RUSSELL", "YARRALUMLA", "ACTON", "BLACK MOUNTAIN", "AINSLIE", "DICKSON", "DOWNER", "HACKETT", "LYNEHAM", "O'CONNOR", "WATSON", "FORREST", "GRIFFITH", "MANUKA", "RED HILL", "CAUSEWAY", "KINGSTON", "NARRABUNDAH", "CURTIN", "GARRAN", "HUGHES", "CHIFLEY", "LYONS", "O'MALLEY", "PHILLIP", "SWINGER HILL", "WODEN", "FARRER", "ISAACS", "MAWSON", "PEARCE", "TORRENS", "CIVIC SQUARE", "CANBERRA INTERNATIONAL AIRPORT", "FYSHWICK", "MAJURA", "PIALLIGO", "SYMONSTON", "CHAPMAN", "DUFFY", "FISHER", "HOLDER", "MOUNT STROMLO", "PIERCES CREEK", "RIVETT", "STIRLING", "URIARRA", "URIARRA FOREST", "WARAMANGA", "WESTON", "WESTON CREEK", "BRADDON", "CAMPBELL", "REID", "TURNER", "ARANDA", "COOK", "HAWKER", "JAMISON CENTRE", "MACQUARIE", "PAGE", "SCULLIN", "WEETANGERA", "CHARNWOOD", "DUNLOP", "FLOREY", "FLYNN", "FRASER", "HIGGINS", "HOLT", "KIPPAX", "LATHAM", "MACGREGOR", "MELBA", "SPENCE", "BELCONNEN", "BRUCE", "EVATT", "GIRALANG", "KALEEN", "LAWSON", "MCKELLAR", "UNIVERSITY OF CANBERRA", "HALL", "HUME", "KOWEN FOREST", "OAKS ESTATE", "THARWA", "TOP NAAS", "GREENWAY", "TUGGERANONG", "KAMBAH", "ERINDALE CENTRE", "OXLEY", "WANNIASSA", "FADDEN", "GOWRIE", "MACARTHUR", "MONASH", "BONYTHON", "CALWELL", "CHISHOLM", "GILMORE", "ISABELLA PLAINS", "RICHARDSON", "THEODORE", "BANKS", "CONDER", "GORDON", "CRACE", "MITCHELL", "GUNGAHLIN", "FRANKLIN", "GINNINDERRA VILLAGE", "NGUNNAWAL", "NICHOLLS", "PALMERSTON", "AMAROO", "BONNER", "FORDE", "HARRISON" 
```

数据显示如下： ![在此处输入图像描述](../Images/863c0a5c2ca9ddae866cdbbd24142d1d.png)

我知道我的代码做错了，但我想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:08:43.350

我认为你需要使用类似的东西

$(函数(){

```
var src = [];

$('#area').autocomplete({
    minLength: 0,
    source: function( request, response ) {
        response(src)
    }
});

$("#state").change(function(){
    var state = $('#state :selected').attr('data-value');
    if(!state){
        state = $('#state').val();
    }
    $.ajax({
        url:"<?php bloginfo('wpurl'); ?>/wp-admin/admin-ajax.php", 
        type:'POST',
        data:'action=take_area_from_state&state=' + state,
        success:function(results){
            if(results!=0){
                $("#area").removeAttr("disabled"); 
                src = $.map(results.split(','), function(v, i){ <----- Convert the string result into an array of objects
                    return {
                        label: v,
                        varlue: v
                    };
                });
            }else{
                $("#area").attr("disabled", "disabled"); 
            }
        }
    });

}); 
```

});

同样，我不确定您来自服务器的响应数据。回调中的`result`对象`success`应该是对象数组，例如`[{label: '<text-to-appear-in-the-dropdown>', value: '<value>'}, {...}, {...}, ...]`

技术演示：[Fiddle](http://jsfiddle.net/DEHne/)（它不使用基于 ajax 的源代码）

如果您的 ajax 查询返回一个数组，那么您可以创建 src 数组，如下所示。

```
var result = ["AUSTRALIAN NATIONAL UNIVERSITY", "BARTON", "HMAS CRESWELL", "JERVIS BAY", "CANBERRA", "DEAKIN", "DEAKIN WEST", "DUNTROON", "HARMAN", "HMAS HARMAN", "PARKES", "PARLIAMENT HOUSE", "RUSSELL", "YARRALUMLA", "ACTON", "BLACK MOUNTAIN", "AINSLIE", "DICKSON", "DOWNER", "HACKETT", "LYNEHAM", "O'CONNOR", "WATSON", "FORREST", "GRIFFITH", "MANUKA", "RED HILL", "CAUSEWAY", "KINGSTON", "NARRABUNDAH", "CURTIN", "GARRAN", "HUGHES", "CHIFLEY", "LYONS", "O'MALLEY", "PHILLIP", "SWINGER HILL", "WODEN", "FARRER", "ISAACS", "MAWSON", "PEARCE", "TORRENS", "CIVIC SQUARE", "CANBERRA INTERNATIONAL AIRPORT", "FYSHWICK", "MAJURA", "PIALLIGO", "SYMONSTON", "CHAPMAN", "DUFFY", "FISHER", "HOLDER", "MOUNT STROMLO", "PIERCES CREEK", "RIVETT", "STIRLING", "URIARRA", "URIARRA FOREST", "WARAMANGA", "WESTON", "WESTON CREEK", "BRADDON", "CAMPBELL", "REID", "TURNER", "ARANDA", "COOK", "HAWKER", "JAMISON CENTRE", "MACQUARIE", "PAGE", "SCULLIN", "WEETANGERA", "CHARNWOOD", "DUNLOP", "FLOREY", "FLYNN", "FRASER", "HIGGINS", "HOLT", "KIPPAX", "LATHAM", "MACGREGOR", "MELBA", "SPENCE", "BELCONNEN", "BRUCE", "EVATT", "GIRALANG", "KALEEN", "LAWSON", "MCKELLAR", "UNIVERSITY OF CANBERRA", "HALL", "HUME", "KOWEN FOREST", "OAKS ESTATE", "THARWA", "TOP NAAS", "GREENWAY", "TUGGERANONG", "KAMBAH", "ERINDALE CENTRE", "OXLEY", "WANNIASSA", "FADDEN", "GOWRIE", "MACARTHUR", "MONASH", "BONYTHON", "CALWELL", "CHISHOLM", "GILMORE", "ISABELLA PLAINS", "RICHARDSON", "THEODORE", "BANKS", "CONDER", "GORDON", "CRACE", "MITCHELL", "GUNGAHLIN", "FRANKLIN", "GINNINDERRA VILLAGE", "NGUNNAWAL", "NICHOLLS", "PALMERSTON", "AMAROO", "BONNER", "FORDE", "HARRISON"]

src = $.map(result, function(val){
    return {label: val, value: val};
}); 
```

[另一个](http://jsfiddle.net/DEHne/1/)支持查询参数的示例

# c# - 为什么我的查询没有返回任何内容

> ID：15000795
> 
> 赞同：0
> 
> 时间：2013-02-21T11:13:25.897
> 
> 标签：c#, linq

我正在编写一个 LINQ 查询来根据用户输入和选择过滤记录。某些输入可能不是来自用户。所以我需要根据给定的输入进行过滤。我尝试只为 5 个可选输入中的 1 个赋值。但是查询没有返回任何内容。请帮我找到正确的查询。看到查询后，您可以更好地理解。

**代码**

```
var model = (from items in Db.Items
             where ((items.ItemNo == null || 
                     items.ItemNo == String.Empty) ||
                    ((items.ItemNo.CompareTo(DD.FromItemNo) >= 0) &&
                     (items.ItemNo.CompareTo(DD.ToItemNo) <= 0))) &&
                   (items.InfoTypeId == 0 ||
                    (items.InfoTypeId == DD.InfoType)) &&
                   (items.CreatedOn == null ||
                    (items.CreatedOn >= DD.Start &&
                     items.CreatedOn <= DD.End)) &&
                   (items.StatusId == 0 ||
                    (items.StatusId == DD.Status)) &&
                   (items.LocationId == 0 ||
                    (items.LocationId == DD.Location)) &&
                   (items.CollectionId == 0 ||
                   (items.CollectionId == DD.Collection))
             select new ViewModel()
             {
                 Itemid = items.Id,
                 INo = items.ItemNo,
                 BTags = (from asd in Db.BibContents
                          where asd.BibId == items.BibId &&
                                asd.TagNo == "245" &&
                                asd.Sfld == "a"
                          select asd.Value).FirstOrDefault(),
                 Sid = (from stat in Db.ItemStatus1
                        where stat.Id == items.StatusId 
                        select stat.Description).FirstOrDefault(),

                 Option = DD.Option,
                 CurrItemNo = DD.ItemNumber
             }).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:53:28.587

您必须检查`DD`for `null`s 或`0`s 的值，而不是s 的值`items`：

```
var model = (from items in Db.Items
    where 
    (
       (DD.ItemNo == null || DD.ItemNo == String.Empty) 
       || (items.ItemNo.CompareTo(DD.FromItemNo) >= 0 && items.ItemNo.CompareTo(DD.ToItemNo) <= 0)
    ) 
    && (DD.InfoTypeId == 0 || (items.InfoTypeId == DD.InfoType)) 
    && (DD.CreatedOn == null || (items.CreatedOn >= DD.Start && items.CreatedOn <= DD.End)) 
    && (DD.StatusId == 0 || (items.StatusId == DD.Status))
    && (DD.LocationId == 0 || (items.LocationId == DD.Location)) 
    && (DD.CollectionId == 0 || (items.CollectionId == DD.Collection))
    select ... 
```

# php - 媒体维基 AWC 论坛

> ID：15000800
> 
> 赞同：0
> 
> 时间：2013-02-21T11:13:45.497
> 
> 标签：php, mediawiki

我在 mediawiki 中使用名为[AWC 论坛的论坛扩展](http://www.mediawiki.org/wiki/Extension%3aAWC%27s_Forum)

我需要每天通过电子邮件获取今天帖子的摘要。

谁能为此建议php的结构应该如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:29:14.693

我曾经想过使用它，但我改用了[Disqus Widget](http://www.mediawikiwidgets.org/DISQUS)。您可以从那里处理所有事情，但我不知道这是否涵盖了您的目标。

# javascript - Backbone 中 Twig 样式模板的 Javascript 实现

> ID：15000802
> 
> 赞同：7
> 
> 时间：2013-02-21T11:13:46.583
> 
> 标签：javascript, backbone.js, twig

我之前在 Backbone 应用程序中使用过 Backbone 的下划线模板、Mustache 模板和 d Jquery 模板，但是我正在构建一个框架，其中 PHP 和 Javascript 都使用相同的模板并决定使用[Twig 模板格式](http://twig.sensiolabs.org/)。

在 PHP 中一切正常，但是我现在使用 JS 并找到了[一些](https://github.com/justjohn/twig.js/)用于 javascript的[不同](http://jmsyst.com/libs/twig.js)Twig 库。

我想知道是否有人曾经将树枝模板与骨干应用程序集成在一起，并且可以为我节省大量时间来建议他们使用哪个库。

非常感谢。

# php - 使用 PHP 更新 MySQL 记录 - SQL 有效，php 端无效

> ID：15000806
> 
> 赞同：0
> 
> 时间：2013-02-21T11:13:52.403
> 
> 标签：php, html, mysql, sql

我一直在 phpmyadmin 中测试我的 sql，我知道 sql 工作正常，但是当我通过表单按钮调用它时，它什么也没做。谁能告诉我我做错了什么。

这是主表单页面中的 php：

```
<?php
    echo 
    "<table border='1'>
    <tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Hometown</th>
<th>Job</th>
<th>health</th>
<th>damage</th>
</tr>";

while($row = mysql_fetch_row($result)) {

    echo '<tr>';
    foreach($row as $cell) {

        echo "\n<td>$cell</td>";
    }

    echo '<td><form method="POST" action="attack.php">
    <input name="update" type="button" value="Update Record" />
    <input type="hidden" name="'.$row[1].'" /></form></td></tr>';
    echo "\n\n";
    echo "test";

 }
?>

<?php
require_once('config.php');

$sqltest = $sqltest - 5;
    $id = floor($_GET['id']);

if($id > 0)
{
$sql1="UPDATE ajax_demo SET Health = Health - Damage";
$result=mysql_query($sql1);
mysql_close();
}
?> 
```

显然我会在 sql 字符串中添加 nito 变量，但出于测试目的，我将其保留。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:16:32.963

使用这个查询

```
$sql1="UPDATE ajax_demo SET `Health` = `Health` - `Damage`"; // it will set the actual computed value. 
```

如果你使用

```
`Health` = 'Health - Damage' // it will set text Health - Damage not the computed value 
```

# hibernate - Hibernate 中 @Lob 注释的目标是什么？为什么只映射到字符串是不够的？

> ID：15000808
> 
> 赞同：1
> 
> 时间：2013-02-21T11:13:54.693
> 
> 标签：hibernate, orm, mapping, blob

在我的数据库中，我有一些用 BLOB 或 CLOB 类型映射的列。

当映射这样一个字段时，hibernate 建议：

```
@Lob
public String getBlobField() { ... } 
```

为什么我们需要@Lob 注解？

# javascript - 从表中添加/删除行

> ID：15000812
> 
> 赞同：0
> 
> 时间：2013-02-21T11:14:08.393
> 
> 标签：javascript, jquery, twitter-bootstrap, datatables

我在这里在 Twitter Bootstrap 中创建了一个表

我希望能够用它做两件事

1.  按删除图标删除行 - 将删除该行

2.  通过将文本（名称）添加到输入字段然后按“添加新行”来添加新名称

**演示**- [http://jsfiddle.net/qxdz4/2/](http://jsfiddle.net/qxdz4/2/)

寻找一种使用 JavaScript / jQuery 的方法

我的代码

```
<div class="input-prepend input-append"><span class="add-on"><i class="icon-picture"></i></span>

<input class="span2"
id="appendedInputButton" type="text" placeholder="Add New Name Here">
<button class="btn" type="button">Add New Row</button>
</div>
<table id="users" class="table table-bordered table-condensed">
<tr>
    <th>name</th>
    <th></th>
</tr>
<tr>
    <td><a href="#" data-pk="1">Mike</a>

    </td>
    <td class="taskOptions"> <a href="#deleteProject" rel="tooltip" data-toggle="modal" class="tip-top"
        data-original-title="Delete Row"><i class="icon-remove"></i></a>

    </td>
</tr>
<tr>
    <td><a href="#" data-pk="2">John</a>

    </td>
    <td class="taskOptions"> <a href="#deleteProject" rel="tooltip" data-toggle="modal" class="tip-top"
        data-original-title="Delete Row"><i class="icon-remove"></i></a>

    </td>
</tr>
<tr>
    <td><a href="#" data-pk="3">Mary</a>

    </td>
    <td class="taskOptions"> <a href="#deleteProject" rel="tooltip" data-toggle="modal" class="tip-top"
        data-original-title="Delete Row"><i class="icon-remove"></i></a>

    </td>
</tr>
</table> 
```

### 笔记

*   单击删除按钮应删除该行
*   键入输入字段并按“添加新行”按钮应在表格末尾添加一个新行并填写名称

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:21:39.370

您可以通过执行以下操作轻松删除该行：

```
$('td.taskOptions a.tip-top').on('click', function(e) {  
    e.preventDefault();
    $(this).tooltip('hide');
    $(this).parents('tr').remove();
}); 
```

同样，添加新行可以如下完成：

```
$('button.btn').click(function(e) {  

    e.preventDefault();
    var the_name = $.trim($('#appendedInputButton').val());

    var new_row = $('<tr>\
                         <td>\
                             <a href="#" data-pk="1">'+the_name+'</a>\
                         </td>\
                         <td class="taskOptions">\
                             <a href="#deleteProject" rel="tooltip" data-toggle="modal" class="tip-top" data-original-title="Delete Row"><i class="icon-remove"></i></a>\
                         </td>\
                      </tr>');
    new_row.appendTo($('#users'));
}); 
```

请注意，可能值得为按钮添加更具体的类名（单击以添加行时）以避免任何混淆。ID 也可以。

我已经用附加功能更新了你的 jsFiddle。你可以[**在这里**](http://jsfiddle.net/qxdz4/5/)看到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:26:52.027

不知道怎么获取每一行的pk数据（data-pk）属性。这取决于你在**文件上。准备好**

```
$('[rel=tooltip]').tooltip();
function bindCloseButtons(){
    $("#users td.taskOptions a").click(function(e){
        $(this).parent().parent().remove();
    });
}

function addTableRow(name , pk){

    // name column
    var row = $("<tr></tr>");
    row.append('<td><a href="#" data-pk="'+pk+'">'+name+'</a></td>');

    // close button
    var btnClose = $('<td class="taskOptions"> <a href="#deleteProject" rel="tooltip" data-toggle="modal" class="tip-top" data-original-title="Delete Row"><i class="icon-remove"></i></a></td>');

    row.append(btnClose);

    $("#users").append(row);
    bindCloseButtons();
    $('[rel=tooltip]').tooltip();
}

$("#addNew").click(function(e){
    var name = $("#appendedInputButton").val();
    var pk = 1; // TODO: set your pk here 
    addTableRow(name, pk);

});

bindCloseButtons(); 
```

这是一个小提琴：http: [//jsfiddle.net/qxdz4/16/](http://jsfiddle.net/qxdz4/16/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:51:29.867

首先你创建一个方法`AddmultipleInput()`

在函数内部，

```
 .AddMultipleInput = function (btnAddId, btnDelId, inputContainerIdPrefix, inputContainerCss, firstChildInputIdPrefix) {
    if ($('.' + inputContainerCss).length < 2) {
        $('#' + btnDelId).attr('disabled', 'disabled');
    }

    $('#' + btnAddId).click(function () {
        var num = $('.' + inputContainerCss).length; // how many "duplicatable" input fields we currently have
        var newNum = new Number(num + 1);   // the numeric ID of the new input field being added

        // create the new element via clone(), and manipulate it's ID using newNum value
        var newElem = $('#' + inputContainerIdPrefix + num).clone().attr('id', inputContainerIdPrefix + newNum);

        newElem.children().each(function () {
            var idPrefix = $(this).attr('id').substring(0, $(this).attr('id').length - 1);
            var namePrefix = $(this).attr('name').substring(0, $(this).attr('name').length - 1);
            $(this).attr('id', idPrefix + newNum).attr('name', namePrefix + newNum);
        })

        // insert the new element after the last "duplicatable" input field
        $('#' + inputContainerIdPrefix + num).after(newElem);

        // enable the "remove" button
         $('#' + btnDelId).attr('disabled', '');

        // business rule: you can only add 5 names
        if (newNum == 5)
            $('#' + btnAddId).attr('disabled', 'disabled');

});

    $('#' + btnDelId).click(function () {
        var num = $('.' + inputContainerCss).length;

        $('#' + inputContainerIdPrefix + num).remove();
        $('#' + btnAddId).attr('disabled', '');
        if (num == 2)
            $('#' + btnDelId).attr('disabled', 'disabled');
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:20:14.520

```
$('.icon-remove').live('click',function(){
    $(this).parent('tr').remove();
}); 
```

如果您使用的是 jQuery 1.7 或更高版本，请`.on`使用`.live`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T11:21:41.803

向您的删除链接添加一个类（如删除行）并使用以下内容：

```
$(document).on("click",".delete-row",function(ev) {
    ev.preventDefault();
    $(this).tooltip('hide');
    $(this).parents("tr").first().remove();
}); 
```

注意：“$(this).tooltip('destroy');” 会比“隐藏”更好，但你的小提琴引导版本还不支持销毁。此外，如果需要，您可以将 $("#users") 而不是 $(document) 设置为此事件的处理程序，只要删除行按钮是处理程序的子级，事件就会被正确委派。

要添加一行，BenM 的答案应该可以完美运行。

PS：

.parents(selector) 函数在 DOM 树上向上移动不止一层，而 .parent() 在 DOM 树上向上移动一层。

.parents(selector) 函数选择与选择器匹配的所有父级，因此如果发生更改，您最终会将表格放在表格中（我不小心），您应该使用 .first()，确保不会删除错误的行.

编辑：正如 BenM 所提到的，以前的代码不适用于新行，忘记了问题的添加部分，新代码应该可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T11:21:59.483

我建议你使用以下 jQuery 函数：

`on()`, `click()`, `remove()`,`append()`

请对此进行研究，同时查看 jQuery 选择器以了解如何选择正确的行。

# r - 使用带有 cURL、RCurl 和 httr 的 cookie 发布请求

> ID：15000815
> 
> 赞同：4
> 
> 时间：2013-02-21T11:14:17.250
> 
> 标签：r, curl, libcurl, rcurl, httr

在 Windows cURL 中，我可以发布与此类似的 Web 请求：

```
curl  --dump-header cook.txt ^
  --data "RURL=http=//www.example.com/r&user=bob&password=hello" ^
  --user-agent  "Mozilla/5.0"  ^
  http://www.example.com/login 
```

我得到`type cook.txt`类似这样的回应：

```
HTTP/1.1 302 Found                                                 
Date: Thu, ******
Server: Microsoft-IIS/6.0                                          
SERVER: ******                                                  
X-Powered-By: ASP.NET                                              
X-AspNet-Version: 1.1.4322                                         
Location: ******
Set-Cookie: Cookie1=; domain=******; expires=****** ******
******
******
Cache-Control: private                                             
Content-Type: text/html; charset=iso-8859-1                        
Content-Length: 189 
```

我可以手动读取 cookie 行，例如：（`Set-Cookie: AuthCode=ABC...`我当然可以编写脚本）。所以我可以`AuthCode`用于后续请求。

我正在尝试在 R 中使用 RCurl 和/或 httr 做同样的事情（仍然不知道哪个更适合我的任务）。

当我尝试：

```
library(httr)

POST("http://www.example.com/login",
     body= list(RURL="http=//www.example.com/r",
                user="bob", password="hello"),
     user_agent("Mozilla/5.0")) 
```

我收到类似这样的回复：

```
Response [http://www.example.com/error]
  Status: 411
  Content-type: text/html
<h1>Length Required</h1> 
```

总的来说，我知道 411 错误，我可以尝试修复该请求；但我没有在 cURL 中得到它，所以我对 POST 命令做错了。

你能帮我把我的 cURL 命令翻译成 RCurl 和/或 httr 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:02:36.283

`httr` automatically preserves cookies across calls to the same site, as illustrated by these two calls to [http://httpbin.org](http://httpbin.org)

```
GET("http://httpbin.org/cookies/set?a=1")
# Response [http://httpbin.org/cookies]
#   Status: 200
#   Content-type: application/json
# {
#    "cookies": {
#     "a": "1"
#   }
# } 

GET("http://httpbin.org/cookies")
# Response [http://httpbin.org/cookies]
#   Status: 200
#   Content-type: application/json
# {
#   "cookies": {
#     "a": "1"
#   }
# } 
```

Perhaps the problem is that you're sending your data as `application/x-www-form-urlencoded`, but the default in httr is `multipart/form-data`, so use `multipart = FALSE` in your `POST` call.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:49:16.803

根据 Juba 的建议，这是一个有效的 RCurl 模板。

该代码模拟浏览器行为，因为它：

1.  在登录屏幕上检索 cookie 和
2.  在包含实际数据的以下页面请求中重用它们。

```
### RCurl login and browse private pages ###

library("RCurl")

loginurl ="http=//www.*****"
mainurl  ="http=//www.*****"
agent    ="Mozilla/5.0"

#User account data and other login pars
pars=list(
     RURL="http=//www.*****",
     Username="*****",
     Password="*****"
)

#RCurl pars     
curl = getCurlHandle()
curlSetOpt(cookiejar="cookiesk.txt",  useragent = agent, followlocation = TRUE, curl=curl)
#or simply
#curlSetOpt(cookiejar="", useragent = agent, followlocation = TRUE, curl=curl)

#post login form
web=postForm(loginurl, .params = pars, curl=curl)

#go to main url with real data
web=getURL(mainurl, curl=curl)

#parse/print content of web
#..... etc. etc.

#This has the side effect of saving cookie data to the cookiejar file 
rm(curl)
gc() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:19:14.243

这是一种创建发布请求、保留和重用生成的 cookie 的`RCurl`方法，例如在需要身份验证时获取网页：

```
library(RCurl)
curl <- getCurlHandle()
curlSetOpt(cookiejar="/tmp/cookies.txt", curl=curl)
postForm("http://example.com/login", login="mylogin", passwd="mypasswd", curl=curl)
getURL("http://example.com/anotherpage", curl=curl) 
```

# android - 如何从android中的服务器下载zip？

> ID：15000816
> 
> 赞同：0
> 
> 时间：2013-02-21T11:14:20.743
> 
> 标签：android

```
 download.java
    -----------
    import java.io.BufferedInputStream;
    import java.io.ByteArrayInputStream;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.net.HttpURLConnection;
    import java.net.URL;
    import java.net.URLConnection;
    import java.util.HashMap;
    import java.util.zip.ZipEntry;
    import java.util.zip.ZipInputStream;
    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;
    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.util.EntityUtils;
    import org.json.JSONArray;
    import org.json.JSONException;
    import org.json.JSONObject;
    import org.w3c.dom.Document;
    import org.w3c.dom.Element;
    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;
    import android.app.Activity;
    import android.app.Dialog;
    import android.app.ListActivity;
    import android.app.ProgressDialog;
    import android.content.Context;
    import android.content.Intent;
    import android.graphics.Bitmap;
    import android.graphics.BitmapFactory;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.os.Environment;
    import android.os.Handler;
    import android.os.Message;
    import android.sax.StartElementListener;
    import android.util.Base64;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.view.LayoutInflater.Filter;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.view.ViewGroup;
    import android.widget.BaseAdapter;
    import android.widget.Button;
    import android.widget.Filterable;
    import android.widget.GridView;
    import android.widget.ImageView;
    import android.widget.TableLayout;
    import android.widget.TextView;

    public class MainActivity extends ListActivity  
    {
        static Handler handler,handler2;
        Thread thread;
        static Thread thread2;
        TableLayout tablLayout;
        private static EfficientAdapter adap;
        ProgressDialog pd;
        public DBHelper db;
        GridView gridview;
        int total_row=0;
        public  final int DIALOG_DOWNLOAD_PROGRESS = 0;
        private ProgressDialog mProgressDialog;
        String FILE_NAME="";
        static int Current_position=0;

        private static String url = "d:/reader/shelf.json";

        JSONArray contacts = null;

        @Override
        protected void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.listview);

            db = new DBHelper(this);

            gridview = (GridView) findViewById(R.id.MyGrid);

            total_row=db.CountRow();
            db.GetData();

            thread2 = new Thread()
            {
                @Override
                public void run() 
                {
                    handler2.sendEmptyMessage(0);
                }
            };

            handler2 = new Handler() 
            {
                @Override
                public void handleMessage(Message msg)
                {

                    FILE_NAME=Static_class.Select_URL.substring(Static_class.Select_URL.lastIndexOf('/') + 1);
                    Log.w("File Name....",""+FILE_NAME);
                    Log.w("url....",""+Static_class.Select_URL);

                    startDownload();
                }
            };

            handler = new Handler()
            {
                @Override
                public void handleMessage(Message msg) {
                    switch (msg.what) {
                    case 1:
                        pd = ProgressDialog.show(MainActivity.this, null,
                                "Please Wait...", true, false);
                        pd.setCancelable(false);
                        break;
                    case 2:
                        pd.dismiss();
                        break;
                    case 3:
                        Display_magazine();
                        break;
                    }

                }
            };
            thread = new Thread() {
                @Override
                public void run() {
                    try {
                        handler.sendEmptyMessage(1);

                        JSONParser jParser = new JSONParser();

                        JSONObject json = jParser.getJSONFromUrl(url);  
                        contacts = json.getJSONArray("Magazine");

                        Static_class.Magazine_total =contacts.length();

                        Static_class.name = new String[Static_class.Magazine_total];
                        Static_class.title = new String[Static_class.Magazine_total];
                        Static_class.info = new String[Static_class.Magazine_total];
                        Static_class.date = new String[Static_class.Magazine_total];
                        Static_class.cover_image = new Bitmap[Static_class.Magazine_total];
                        Static_class.url = new String[Static_class.Magazine_total];
                        Static_class.id = new String[Static_class.Magazine_total];
                        Static_class.Button_text = new String[Static_class.Magazine_total];

                        // looping through All Contacts
                        for(int i = 0; i < contacts.length(); i++)
                        {
                            JSONObject c = contacts.getJSONObject(i);

                            Static_class.name[i]=c.getString("name");
                            Static_class.title[i]=c.getString("title");
                            Static_class.info[i]=c.getString("info");
                            Static_class.date[i]=c.getString("date");
                            Static_class.cover_image[i]=getBitmapFromURL(c.getString("cover"));
                            Static_class.url[i]=c.getString("url");
                            Static_class.id[i]=c.getString("product_id");                           
                            Static_class.Button_text[i]="Read";

                            int temp=0;
                            String temp_url="";
                            for (int j=0;j<total_row;j++)
                            {
                                if(Static_class.id[i].equals(Static_class.Stored_id[j]))
                                {
                                    temp=1; 
                                    temp_url=""+Static_class.Stored_url[j];
                                }                           
                            }
                            if(temp == 1)
                            {   
                                Static_class.Button_text[i]="Read";
                                Static_class.url[i]=temp_url;
                            }
                            else
                            {
                                Static_class.Button_text[i]="Download";
                            }
                        }

                        handler.sendEmptyMessage(2);
                        handler.sendEmptyMessage(3);

                    }
                    catch (Exception e)
                    {
                        handler.sendEmptyMessage(2);
                        e.printStackTrace();
                    }
                }

            };
            thread.start();

        }
        public Bitmap getBitmapFromURL(String src) 
        {
            try {
                URL url = new URL(src);
                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.setDoInput(true);
                connection.connect();
                InputStream input = connection.getInputStream();
                Bitmap myBitmap = BitmapFactory.decodeStream(input);
                return myBitmap;
            }
            catch (IOException e)
            {
                e.printStackTrace();
                return null;
            }
        }

        public void Display_magazine()
        {
            adap = new EfficientAdapter(this);
            setListAdapter(adap);

        }

        public void Show_magazine()
        {
        //  Intent go = new Intent(this,Display.class);
        //  startActivity(go);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu)
        {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        public static class EfficientAdapter extends BaseAdapter implements
        Filterable {
    private LayoutInflater mInflater;
    private Context context;

    public EfficientAdapter(Context context) {

        mInflater = LayoutInflater.from(context);
        this.context = context;
    }

            @Override
            public View getView(final int position, View convertView,
                    ViewGroup parent) {

                ViewHolder holder;

                if (convertView == null) {
                    convertView = mInflater.inflate(
                            R.layout.adaptercontrol, null);

                    holder = new ViewHolder();
                    holder.txt_info = (TextView) convertView
                            .findViewById(R.id.textView_info);
                    holder.txt_title = (TextView) convertView
                            .findViewById(R.id.textView_title);
                    holder.txt_remove = (TextView) convertView
                    .findViewById(R.id.textView_remove);
                    holder.image = (ImageView) convertView
                    .findViewById(R.id.image);
                    holder.read = (Button) convertView
                    .findViewById(R.id.button_download);

                    holder.read.setOnClickListener(new OnClickListener() 
                    {

                        @Override
                        public void onClick(View v) 
                        {
                            Current_position=position;
                            if (Static_class.Button_text[position].equals("Download"))
                            {

                                Static_class.Select_URL=Static_class.url[position];                     

                                if (Static_class.First_Time_Thread == 0)
                                {
                                    thread2.start();
                                    Static_class.First_Time_Thread=1;
                                }
                                else
                                {
                                    thread2.run();
                                }
                            }
                            else
                            {

                            }
                        }
                    });

                    holder.txt_remove.setOnClickListener(new OnClickListener() 
                    {
                        private int pos = position;
                        @Override
                        public void onClick(View v) 
                        {

                        }
                    });

                    // holder.next_image.setOnClickListener(new OnClickListener() {
                    // private int pos = position;
                    //
                    // public void onClick(View v) {
                    // Toast.makeText(context, "Click-" + String.valueOf(pos),
                    // Toast.LENGTH_SHORT).show();
                    // }
                    // });

                    convertView.setTag(holder);
                } else {

                    holder = (ViewHolder) convertView.getTag();
                }

                holder.image.setImageBitmap(Static_class.cover_image[position]);
                holder.txt_info.setText("" + Static_class.info[position]);
                holder.txt_title.setText("" + Static_class.title[position]);
                holder.read.setText(""+ Static_class.Button_text[position]);

                return convertView;
            }

    static class ViewHolder 
    {
        TextView txt_title,txt_info,txt_remove;
        ImageView image;
        Button read;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public int getCount() {
        return Static_class.Magazine_total;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public android.widget.Filter getFilter() {
        // TODO Auto-generated method stub
        return null;
    }
    }

         private void delete_file()
            {        
                File file = new File("/sdcard/"+FILE_NAME);
            //  String temp_name=Static_class.url[Current_position].replace(".hpub","");
    //          db.Insert(Static_class.id[Current_position],"file://"+Environment.getExternalStorageDirectory()+"/LivingNow/"+temp_name+"/index.html");
                db.GetData();
                db.Insert(Static_class.name[Current_position], Static_class.title[Current_position], Static_class.info[Current_position], Static_class.date[Current_position], Static_class.cover_image[Current_position],Static_class.url[Current_position],Static_class.id[Current_position]);
                total_row=db.CountRow();
                Static_class.Button_text[Current_position]="Read";          
                boolean deleted = file.delete();

                Intent call = new Intent(this,MainActivity.class);
                startActivity(call);
                System.exit(0);
            }

         private void Decompress() 
         {
                String zipFile = Environment.getExternalStorageDirectory() + "/"+FILE_NAME; 
                String unzipLocation = Environment.getExternalStorageDirectory() + "/reader/"+FILE_NAME; 
                Decompress d = new Decompress(zipFile, unzipLocation); 
                d.unzip();  
         }

         public void startDownload() 
         {
                new DownloadFileAsync().execute(Static_class.Select_URL);
         }

            @Override
            protected Dialog onCreateDialog(int id) 
            {
                switch (id) {
                case DIALOG_DOWNLOAD_PROGRESS:
                    mProgressDialog = new ProgressDialog(this);
                    mProgressDialog.setMessage("Downloading Magazine..");
                    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                    mProgressDialog.setCancelable(false);
                    mProgressDialog.show();
                    return mProgressDialog;
                default:
                    return null;
                }
            }

        class DownloadFileAsync extends AsyncTask<String, String, String> {

            @Override
            protected void onPreExecute() 
            {

                super.onPreExecute();
                showDialog(DIALOG_DOWNLOAD_PROGRESS);
            }

            @Override
            protected String doInBackground(String... aurl) {
                int count;

            try {

            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();
            //Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/"+FILE_NAME);

            byte data[] = new byte[4096];

            long total = 0;

                while ((count = input.read(data)) != -1)
                {
                    total += count;
                    publishProgress(""+(int)((total*100)/lenghtOfFile));
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
            } catch (Exception e) {}
            return null;

            }
            protected void onProgressUpdate(String... progress)
            {
            //   Log.d("ANDRO_ASYNC",progress[0]);
                 mProgressDialog.setProgress(Integer.parseInt(progress[0]));
            }

            @Override
            protected void onPostExecute(String unused) 
            {
                Decompress();
                dismissDialog(DIALOG_DOWNLOAD_PROGRESS);        
            }       
        }

        public class Decompress { 
              private String _zipFile; 
              private String _location; 

              public Decompress(String zipFile, String location) { 
                _zipFile = zipFile; 
                _location = location; 

                _dirChecker(""); 
              } 

              public void unzip() { 
                try  { 
                  FileInputStream fin = new FileInputStream(_zipFile); 
                  ZipInputStream zin = new ZipInputStream(fin); 
                  ZipEntry ze = null; 

                  while ((ze = zin.getNextEntry()) != null) 
                  { 
                    Log.v("Decompress", "Unzipping " + ze.getName());

                    if(ze.isDirectory()) 
                    { 
                      _dirChecker(ze.getName()); 
                    }
                    else 
                    { 
                      FileOutputStream fout = new FileOutputStream(_location + ze.getName()); 

    //                for (int c = zin.read(); c != -1; c = zin.read()) 
    //                { 
    //                  fout.write(c); 
    //                } 

                      byte[] buffer = new byte[4096]; 
                      for (int c = zin.read(buffer); c != -1; c = zin.read(buffer)) 
                      {
                          fout.write(buffer, 0, c); 
                      }
                      zin.closeEntry(); 
                      fout.close(); 
                    } 

                  } 
                  zin.close(); 
                  delete_file();
                } catch(Exception e) { 
                  Log.e("Decompress", "unzip", e); 
                } 

              } 

              private void _dirChecker(String dir)
              { 
                File f = new File(_location + dir); 

                if(!f.isDirectory()) { 
                  f.mkdirs(); 
                } 
              } 
            } 
    }

log cat
-------
 02-21 16:20:29.155: E/Decompress(846): java.io.FileNotFoundException: /mnt/sdcard/reader.zip (Permission denied)
    02-21 16:20:29.155: E/Decompress(846):  at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
    02-21 16:20:29.155: E/Decompress(846):  at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
    02-21 16:20:29.155: E/Decompress(846):  at java.io.FileInputStream.<init>(FileInputStream.java:80)
    02-21 16:20:29.155: E/Decompress(846):  at java.io.FileInputStream.<init>(FileInputStream.java:132)
    02-21 16:20:29.155: E/Decompress(846):  at com.reader.MainActivity$Decompress.unzip(MainActivity.java:588)
    02-21 16:20:29.155: E/Decompress(846):  at com.reader.MainActivity.Decompress(MainActivity.java:493)
    02-21 16:20:29.155: E/Decompress(846):  at com.reader.MainActivity.access$1(MainActivity.java:488)
    02-21 16:20:29.155: E/Decompress(846):  at com.reader.MainActivity$DownloadFileAsync.onPostExecute(MainActivity.java:570)
    02-21 16:20:29.155: E/Decompress(846):  at com.reader.MainActivity$DownloadFileAsync.onPostExecute(MainActivity.java:1)
    02-21 16:20:29.155: E/Decompress(846):  at android.os.AsyncTask.finish(AsyncTask.java:417)
    02-21 16:20:29.155: E/Decompress(846):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
    02-21 16:20:29.155: E/Decompress(846):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
    02-21 16:20:29.155: E/Decompress(846):  at android.os.Handler.dispatchMessage(Handler.java:99)
    02-21 16:20:29.155: E/Decompress(846):  at android.os.Looper.loop(Looper.java:123)
    02-21 16:20:29.155: E/Decompress(846):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    02-21 16:20:29.155: E/Decompress(846):  at java.lang.reflect.Method.invokeNative(Native Method)
    02-21 16:20:29.155: E/Decompress(846):  at java.lang.reflect.Method.invoke(Method.java:507)
    02-21 16:20:29.155: E/Decompress(846):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    02-21 16:20:29.155: E/Decompress(846):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    02-21 16:20:29.155: E/Decompress(846):  at dalvik.system.NativeStart.main(Native Method) 
```

当我按下下载按钮时，我想从路径下载一个 zip，然后什么都没有进行，只会翻转进度条并返回主页。在 logcat 中显示解压功能错误。请为此提供适当的解决方案。android 平台中的新版本。谢谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:57:38.710

快速回答：Logcat 为您提供解决方案

02-21 16:20:29.155: E/Decompress(846): java.io.FileNotFoundException: /mnt/sdcard/reader.zip（权限被拒绝）

确保您在 AndroidManifest 文件中拥有所有必需的权限。

也许下面的链接会帮助你（例如）：

[java.io.FileNotFoundException (Permission denied) 尝试写入 Android sdcard 时](https://stackoverflow.com/questions/4823992/java-io-filenotfoundexception-permission-denied-when-trying-to-write-to-the-an)

[java.io.FileNotFoundException：即使我在 AndroidManifest 中设置了权限，访问也被拒绝](https://stackoverflow.com/questions/12865267/java-io-filenotfoundexception-access-denied-even-though-ive-putted-permissions)

# android - 视图从屏幕的一端移动到另一端

> ID：15000818
> 
> 赞同：0
> 
> 时间：2013-02-21T11:14:36.980
> 
> 标签：android

我需要创建一个从屏幕一端移动到屏幕底部的另一端的视图。意味着像**在新频道中的快闪新闻在底部连续移动。**类似的概念是我想要的。我不知道要使用什么*小部件*。我尝试了**翻转**器，但只有 1 个文本视图被另一个替换。我需要它从一端移动到另一端并更改内容。任何人都可以帮忙吗？

我尝试使用 marquee 使用下面提到的答案..但它仍然没有移动..

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     t = (TextView) findViewById(R.id.label); 
      t.setSelected(true);
} 
```

//xml

```
LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
 >

<TextView
android:id="@+id/label"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:ellipsize="marquee"
android:text="@string/hello_world"
android:marqueeRepeatLimit="marquee_forever"
 android:singleLine="true"
/> 
```

**有效。问题实际上是我给了一个非常小的字符串（你好世界）现在我给了一个新的长字符串。所以它起作用了**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:45:15.023

看看吧：

xml文件：

```
<TextView

android:id="@+id/myTextView"

android:ellipsize="marquee" 

android:singleLine="true"/> 
```

在代码中：

```
tv = (TextView) findViewById(R.id.myTextView);

tv.setSelected(true); 
```

在这里你必须把 textview 作为单行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:31:28.673

你可以这样做。

xml 为`TextView`

```
<TextView
    android:id="@+id/label"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:singleLine="true" /> 
```

代码`TextView`

如果你想做一个股票行情

```
textView.setSelected(true); 
```

如果你想阻止它

```
textView.setSelected(false); 
```

************* **编辑**** ***** ********

 ***我假设您正在扩展您的活动`ListActivity`。在您的`onListItemClick`

```
public void onListItemClick(ListView parent, View row, int position, long id) {

    TextView textViewOne =   (TextView)row.findViewById(R.id.text_view);
    textViewOne.setSelected(true);
    for (int i = 0; i < parent.getChildCount(); i++) {
        if(i!=position){
            View view = (View) parent.getChildAt(i).findViewById(R.id.view);

            textViewOne = (TextView)view.findViewById(R.id.text_view);
            textViewOne.setSelected(false);

        }
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:17:43.020

我不完全理解您想要实现的目标，但显然您有两种选择：

创建自己的视图：http: [//developer.android.com/training/custom-views/index.html](http://developer.android.com/training/custom-views/index.html)

或创建一些动画并使用现有视图：http: [//developer.android.com/training/animation/index.html](http://developer.android.com/training/animation/index.html)***

# mysql - 如何计算mysql中的字段值

> ID：15000824
> 
> 赞同：0
> 
> 时间：2013-02-21T11:14:45.943
> 
> 标签：mysql, sql, count

我的桌子——

```
pid     id  subject section
1        1  7            0
2        1  12           0
3        1  13           1
4        1  13           2
5        1  13           3
6        1  14           3
7        1  14           4
8        2  15           1
9        2  16           1 
```

得到的结果——

```
id subject total
1    7      1
1    12     1
1    13     3
1    14     2 
```

我的查询 -

```
SELECT DISTINCT(SUBJECT), count(section)
FROM mytable
GROUP BY section
WHERE id = 1 
```

但这是抛出一个错误，让我知道我做错了什么

错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE id = 1' at line 4: SELECT DISTINCT(SUBJECT), count(section) FROM mytable GROUP BY section WHERE id = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:22:36.157

语法错误是由于放错了`WHERE`子句。它需要先去*。* `GROUP BY`此外：

*   您正在按要汇总的列进行分组。
*   您不必要地使用 DISTINCT。

查询应该在这一行：

```
SELECT SUBJECT, count(section)
FROM mytable
WHERE id = 1
GROUP BY SUBJECT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:16:23.843

您需要这样做，`group by` `subject`因为这是独特的价值。在该组中，您要计算 的出现次数`section`。

```
SELECT 1 as id, subject, count(section) as total
FROM mytable
WHERE id = 1
GROUP BY subject 
```

而且由于该`id`列不在组中，您可以选择该静态值，也可以将其替换为聚合函数`min(id) as id`，例如`1 as id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:16:41.380

您想按主题而不是按部分分组。而且你不需要不同的——它与 GROUP BY 是多余的。

```
SELECT id, subject, count(section)
   FROM mytable
   WHERE id = 1
   GROUP BY id, subject 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:22:56.917

```
SELECT SUBJECT, count(section)
FROM mytable
WHERE id = 1
GROUP BY SUBJECT 
```

# html - 如何在不使用 CSS 3 功能的情况下实现这两个列流式布局，在第一列上有额外的宽度限制？

> ID：15000832
> 
> 赞同：0
> 
> 时间：2013-02-21T11:15:14.617
> 
> 标签：html, css

这是布局：

![流体-流体布局](../Images/e2966a978ea11be75b4605bf3b73dd99.png)

它本质上是一个两列流体-流体布局，第一列的规格是：

```
width: 30%;
min-width: 200px;
max-width: 300px; 
```

列的高度应该是同步的，但不是一个恒定值。

作为记录，我尝试使用表格和表格单元显示，但 Firefox、Safari 和 Chrome 忽略了表格单元的最大宽度，因此该解决方案不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:43:10.040

以下是我制定的解决方案。[在我的测试服务器上](http://colemantest.com/test/twoColumn.html)看到它。

因为您想同时使用像素值*和*百分比，所以您固有地将百分比限制在您使用像素值定义的范围内。例如，这意味着当左列最小（200px）时，这等于 30% 并强制剩余的 70% 为 466px。这只是同时使用像素值和百分比的限制......但这是我在不使用 Javascript 的情况下得到的最好的。

希望这可以帮助！

```
<head>
  <title>twoColumn</title>
  <style type="text/css">

    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    div.wrap {
      background-color: yellow; /* for illustration's sake */
      margin: 0 auto; /* to center it all, for illustration's sake */
      min-width: 700px;
      max-width: 1000px;
      overflow: hidden; /* to hide the overrun from the 3000px of faux-column padding*/
    }

    div.column1 {
      background-color: blue; /* for illustration's sake */
      width: 30%;
      max-width: 300px;
      min-width: 200px;
      float: left;
      margin: 0 -30% -3000px 0; /* to offset the faux-column padding */
      padding-bottom: 3000px; /* to create a faux-column appearance after the left column's content */
    }

    div.column2 {
      float: right;
      width: 70%;
    }

    .clear {
      clear: both;
    }

  </style>
</head>

<body>
  <div class="wrap">

      <div class="column1">
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1<br />
        column1
      </div> <!-- end .column1 -->

      <div class="column2">
        column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 column2 colunn2
      </div> <!-- end column 2 -->

      <div class="clear"></div>

  </div> <!-- end .wrap -->
</body> 
```

# asterisk - 如果 A 呼叫 B 并且 B 转发给 C，C 会知道呼叫是通过 B 路由的吗

> ID：15000834
> 
> 赞同：1
> 
> 时间：2013-02-21T11:15:18.160
> 
> 标签：asterisk, gsm

正如标题所述，这是关于 GSM 呼叫转移的。

当邮件被转发时，它的标题显示它已被转发。转接gsm电话时也一样吗？

更具体地说，如果我将电话设置为将呼叫转移到星号服务器，以防我不接听。我在那台服务器上会有两个电话号码吗？那既是原始呼叫者又是一个转发者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:50:52.403

您的星号框是否使用 DSS1？DSS1 允许您获取重定向号码（在您的情况下为 GSM 用户号码）。

# iphone - 我正在尝试通过 twitter oauth 在 twitter 上发布图片，但它给出了错误 http 500

> ID：15000839
> 
> 赞同：-2
> 
> 时间：2013-02-21T11:15:31.147
> 
> 标签：iphone, ios, objective-c, xcode, ipad

```
NSURL *finalURL = [NSURL URLWithString:@"https://api.twitter.com/1.1/statuses/update_with_media.json"];
if (!finalURL) {
    return nil;
}

OAMutableURLRequest *theRequest =  [[[OAMutableURLRequest alloc]
                                                          initWithURL:finalURL
                                                             consumer:self.consumer 
                                                                token:_accessToken 
                                                                realm:nil                       
                                                    signatureProvider:nil] autorelease];
NSData *imageData = UIImagePNGRepresentation(image);
[theRequest setHTTPMethod:@"POST"];
[theRequest setTimeoutInterval:120];
[theRequest setHTTPShouldHandleCookies:NO];

[theRequest setValue:_clientName    forHTTPHeaderField:@"X-Twitter-Client"];
[theRequest setValue:_clientVersion forHTTPHeaderField:@"X-Twitter-Client-Version"];
[theRequest setValue:_clientURL     forHTTPHeaderField:@"X-Twitter-Client-URL"];
NSString *boundary = @"--0246824681357ACXZabcxyz";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[theRequest setValue:contentType forHTTPHeaderField:@"content-type"];

 NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"status\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"%@",status] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
// media 
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"media[]\"; filename=\"1.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
//[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData  dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
//
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[theRequest prepare];
[theRequest setHTTPBody:body];

MGTwitterHTTPURLConnection *connection;
connection = [[MGTwitterHTTPURLConnection alloc] initWithRequest:theRequest
                                                        delegate:self
                                                     requestType:requestType
                                                    responseType:responseType];
if (!connection) {
    return nil;
} else {
    [_connections setObject:connection forKey:[connection identifier]];
    [connection release];
}
return [connection identifier]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:12:49.980

```
//Shearing picture on twitter with Oauth without any third party api.
OAToken *token = [[OAToken alloc] initWithKey:OauthAccessToken secret:OauthAccessSecrateKey]; //Set user Oauth access token and secrate key
OAConsumer *consumer = [[OAConsumer alloc] initWithKey:ConsumerToken secret:ConsumerSecrateKey]; // Application cosumer token and secrate key

// Url for upload pictures
NSURL *finalURL = [NSURL URLWithString:@"https://upload.twitter.com/1/statuses/update_with_media.json"];

OAMutableURLRequest *theRequest = [[OAMutableURLRequest alloc] initWithURL:finalURL
                                                                   consumer:consumer
                                                                      token:token
                                                                      realm: nil
                                                          signatureProvider:nil];

[theRequest setHTTPMethod:@"POST"];
[theRequest setTimeoutInterval:120];
[theRequest setHTTPShouldHandleCookies:NO];

// Set headers for client information, for tracking purposes at Twitter.(This is optional)
[theRequest setValue:@"HomeShowAppIphone" forHTTPHeaderField:@"X-Twitter-Client"];
[theRequest setValue:@"1.0" forHTTPHeaderField:@"X-Twitter-Client-Version"];
[theRequest setValue:@"http://www.homeshowapp.com/" forHTTPHeaderField:@"X-Twitter-Client-URL"];

NSString *boundary = @"--0246824681357ACXZabcxyz"; // example taken and implemented.
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[theRequest setValue:contentType forHTTPHeaderField:@"content-type"];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"status\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"%@",@"latest upload"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"media[]\"; filename=\"1.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:UIImageJPEGRepresentation([UIImage imageNamed:@"box.png"], 0.5)]];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[theRequest prepare];

NSString *oAuthHeader = [theRequest valueForHTTPHeaderField:@"Authorization"];
[theRequest setHTTPBody:body];

NSHTTPURLResponse *response = nil;
NSError *error = nil;

NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest
                                             returningResponse:&response                            
                                                         error:&error];
NSString *responseString = [[NSString alloc] initWithData:responseData                                
                                                 encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:21:42.373

[https://api.twitter.com/1.1/statuses/update_with_media.json](https://api.twitter.com/1.1/statuses/update_with_media.json) 将此网址更改为 [https://upload.twitter.com/1.1/statuses/update_with_media.json](https://upload.twitter.com/1.1/statuses/update_with_media.json) 然后尝试它可能会工作

# android - Android EditText 上下文菜单样式

> ID：15000840
> 
> 赞同：1
> 
> 时间：2013-02-21T11:15:34.877
> 
> 标签：android, dialog, android-edittext, android-contextmenu

我在我的应用程序中使用我自己的风格。

```
<style name="My" parent="android:Theme">
        <item name="android:textColor">?android:attr/textColorPrimary</item>
        <item name="android:textColorPrimary">@color/color_text_default</item>
        <item name="android:textColorSecondary">@color/text_hint</item>
        <item name="android:windowBackground">@color/color_bg_window</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:listViewStyle">@style/My.ListView</item>
        <item name="android:listSeparatorTextViewStyle">@style/My.ListSeparator</item>
        <item name="android:checkboxStyle">@style/My.Checkbox</item>
        <item name="android:radioButtonStyle">@style/My.RadioButton</item>
        <item name="android:colorBackground">@color/color_bg_window</item>
        <item name="android:colorForeground">@color/color_bg_window</item>
        <item name="android:colorForegroundInverse">@color/color_bg_window</item>
</style> 
```

应用程序看起来不错，但在具有 Android 2 EditText 上下文菜单的设备上看起来很糟糕（文本不可见）！

![在此处输入图像描述](../Images/0a24e6b59e3292df2f61a2cc5d3fddc8.png)

我知道，我可以使用带有默认设备主题的 ContextThemeWrapper 更改对话框样式，但我不能将包装的上下文传递给 EditText 上下文菜单！

如何更改此对话框样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:12:24.427

您可以制作自己的活动，该活动将显示为弹出窗口，您可以自定义您的弹出活动。只需将活动主题更改为清单中的弹出窗口即可。

```
<activity android:name=".DisplayNotesPopup"
                  android:label="@string/app_name"
                  android:screenOrientation="portrait"
                  android:windowSoftInputMode="adjustPan"
                  android:theme="@android:style/Theme.Dialog">

        </activity> 
```

您可以将此活动自定义为弹出窗口，并且可以对其进行任何操作。我希望这可以解决您的问题

# iphone - 滑块在 Iphone SDK 的表视图中重新加载

> ID：15000842
> 
> 赞同：0
> 
> 时间：2013-02-21T11:15:37.237
> 
> 标签：iphone, ios, xcode, uitableview, uislider

在我的应用程序中，我在表格视图中添加了一个滑块，即每一行都包含一个滑块，它也可以正常工作。

但是当我滚动表格视图时，滑块会重新加载，即每个都显示我的起始位置而不是滑块值。

```
//My code is as follow for slider in table cell:

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     NSString *CellIdentifier=[NSString stringWithFormat:@"CellIdentifier%d",indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];

        return cell;
    }

    UISlider*  theSlider =  [[[UISlider alloc] initWithFrame:CGRectMake(174,12,120,23)] autorelease];
        theSlider.maximumValue=99;
        theSlider.minimumValue=0;
        [cell addSubview:theSlider];

return cell;
} 
```

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:25:44.387

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

 NSString *CellIdentifier=[NSString stringWithFormat:@"CellIdentifier%d",indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier]; UISlider*  theSlider =  [[[UISlider alloc] initWithFrame:CGRectMake(174,12,120,23)] autorelease];
    theSlider.maximumValue=99;
    theSlider.minimumValue=0;
    [cell addSubview:theSlider];
}  return cell; 
```

这样，只有当单元格为 nil 时才会创建滑块，即创建单元格。并使用[tableView:willDisplayCell:forRowAtIndexPath:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDelegate)方法设置滑块值，如 slider.value = yourvalue;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:20:17.520

您需要存储滑块视图的值并将滑块视图的值设置为`cellForRowAtIndexPath` `slider.value = yourvalue;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:22:54.100

问题是，`cellForRowAtIndexPath`它不仅被调用一次，而且每次 tableView 需要渲染该单元格时......所以你必须确保只`theSlider`调用第一次初始化......

最好的方法是定义一个自定义`UITableViewCell`并放置一个可以存储的属性`theSlider`，然后在`cellForRowAtIndexPath`调用时检查它是否已经初始化，请参阅：

```
// If the slider is not yet initialized, then do it
if(cell.theSlider == nil)
{
    // Init...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T11:29:51.313

这真是从“ `cellForRowAtIndexPath`”法。每次滚动时，每个单元格都会获取`nil`并重新初始化它。更好的是，您可以尝试创建自定义单元格类（通过创建 的子类`UITableViewCell`）以及条件“if `(cell == nil)`”中的定义滑块。

# php - 如果 SMTP 登录失败，PHP Mailer 必须显示错误？

> ID：15000843
> 
> 赞同：0
> 
> 时间：2013-02-21T11:15:43.813
> 
> 标签：php, phpmailer

我已经设置：

```
$mail->IsSmtp();
$mail->SMTPAuth = true;
$mail->Host = 'my.host.net';
/*
here I didn't writed my login and password

*/ 
```

我不知道我使用smtp邮件发送时是否需要登录名和密码，但是没有错误，可能是因为我的主机不需要登录名和密码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:21:35.023

是的，可能是服务器不需要登录名或密码。

# java - 使用 BLOB 对象将图像插入 SQL 表时出现异常

> ID：15000846
> 
> 赞同：0
> 
> 时间：2013-02-21T11:15:51.410
> 
> 标签：java, swing, io, inputstream, fileinputstream

我在以下代码中遇到异常

```
PreparedStatement pstmt;
Connection conn = DriverManager.getConnection(
   "jdbc:jtds:sqlserver://Irfan:1433/Pictures", "sa", "ent@");      

java.sql.Blob bl=GetBolbDataFromDB();
InputStream fs = bl.getBinaryStream();
len = bl.length() ;

query = ("insert into NewPics2 VALUES(?,?,?,?)");
pstmt = conn.prepareStatement(query);
pstmt.setString(1, model);
pstmt.setString(2, catid);
pstmt.setString(3, ornid);
**pstmt.setBinaryStream(4, fs);** 
```

完整的堆栈跟踪如下

```
Exception in thread "AWT-EventQueue-0" java.lang.AbstractMethodError: net.sourceforge.jtds.jdbc.JtdsPreparedStatement.setBinaryStream(ILjava/io/InputStream;)V
at jewelleryerpapplication.GUI.Orders.CheckPrice.GetPicInfo(CheckPrice.java:1157)
at jewelleryerpapplication.GUI.Orders.CheckPrice.txtModelNoKeyPressed(CheckPrice.java:2300)
at jewelleryerpapplication.GUI.Orders.CheckPrice.access$1500(CheckPrice.java:37)
at jewelleryerpapplication.GUI.Orders.CheckPrice$18.keyPressed(CheckPrice.java:702)
at java.awt.Component.processKeyEvent(Component.java:6463)
at javax.swing.JComponent.processKeyEvent(JComponent.java:2829)
at java.awt.Component.processEvent(Component.java:6282)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1908) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:22:05.610

简单地说，您的 jdbc 驱动程序没有实现最新版本的 jdbc：它没有方法 setBinaryStream()。这意味着你不能使用它。您可以尝试 setBlob() 与完全读取的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:24:44.877

从堆栈跟踪来看，您调用的方法似乎是抽象的。根据文档， [JtdsPreparedStatement.setBinaryStream()](http://jtds.sourceforge.net/doc/net/sourceforge/jtds/jdbc/JtdsPreparedStatement.html#setBinaryStream%28int,%20java.io.InputStream,%20int%29)采用三个参数：索引、流和长度。

尝试添加一个`int`作为长度参数：`pstmt.setBinaryStream(4, fs);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:25:07.517

尝试转换

```
java.sql.Blob bl=GetBlobDataFromDB();
String fs = bl.getBytes(); 
```

# android - 无法在 Android 中使用陀螺仪

> ID：15000848
> 
> 赞同：0
> 
> 时间：2013-02-21T11:15:57.037
> 
> 标签：android, android-sensors, gyroscope

我正在尝试在 Android 中使用陀螺仪。
这是我的代码

```
`//on the onCreate method
sensor = (SensorManager) getSystemService(SENSOR_SERVICE);

//the on onSensorChanged method
@Override
public void onSensorChanged(SensorEvent event) {
        Sensor sensor = event.sensor;
        if(sensor.getType() == Sensor.TYPE_GYROSCOPE){
            Log.i("test", "TYPE_GYROSCOPE event");
                }
}

//the onResume method
protected void onResume(){
        super.onResume();
        Sensor Accel = sensor.getDefaultSensor(Sensor.TYPE_GYROSCOPE);
        sensor.registerListener((SensorEventListener) this, Accel, SensorManager.SENSOR_DELAY_FASTEST);
}` 
```

`但它不起作用，它永远不会进入 Sensor.TYPE_GYROSCOPE 条件。`

# ruby-on-rails - 动态访问命名范围

> ID：15000854
> 
> 赞同：1
> 
> 时间：2013-02-21T11:16:10.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord, named-scope, named-scopes

如果我有 3 个命名范围，例如

```
class Foo

scope :test1, ...
scope :test2, ...
scope :test3, ... 
```

还有一个功能

```
def x(variable)

end 
```

其中变量是一个字符串（“test1”，“test2”或“test3”）

如何仅通过知道该变量的值来访问命名范围？

就像是`Foo.variable`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:17:45.483

你会打电话给`Foo.public_send(variable)`.

# javascript - jQuery 1.7.2 AJAX 调用抛出 NS_ERROR_XPC_NOT_ENOUGH_ARGS 错误

> ID：15000855
> 
> 赞同：2
> 
> 时间：2013-02-21T11:16:12.353
> 
> 标签：javascript, jquery, ajax, object, jquery-1.7

我对 jQuery 1.7.2 和`ajax`函数有疑问，因为当我调用下面的代码时，我在 Firefox Firebug 控制台中收到以下错误：

> NS_ERROR_XPC_NOT_ENOUGH_ARGS：没有足够的参数 [nsIDOMLocation.replace]

```
 var weights= new Object();

    // weight is then manipulated in here

    $.ajax(
        {
            url: '/admin/countries/index.php',
            data: ({action: 'sort', cid: cid, weights: weights}),
            dataType: 'json',
            success: function(data){                    
                alert('suck-sess');
                                    // do stuff in here
            },
            error: function (request, status, error) {
                alert(request.responseText);
            }
        }
    ) 
```

我什至不确定它是否成功发出请求，因为当我`$_REQUEST["action"]`在我的`index.php`PHP 中转储它时它是空白的，而它显然应该是“排序”的。

当我执行代码时，我没有收到成功或错误警报，所以我看不到错误来自哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:21:39.917

```
NS_ERROR_XPC_NOT_ENOUGH_ARGS: Not enough arguments [nsIDOMLocation.replace] 
```

这是基于 gecko 的浏览器 (firefox) 引发的内部错误。我认为这与您的代码无关。在我看来更像是一个浏览器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:17:46.530

事实证明，权重是问题所在，您可以看到它被定义为一个 JavaScript 对象，但是我不得不使用`JSON.stringify(weights)`它作为 JSON 编码的字符串传递它。

# php - php循环遍历json数组

> ID：15000874
> 
> 赞同：4
> 
> 时间：2013-02-21T11:17:01.260
> 
> 标签：php, arrays, json, loops, foreach

我有一个这样的json字符串：

```
$fields_string = '
{"fields":
   {"customers":[{"name":"john","id":"d1"},
                 {"name":"mike","id":"d2"},
                 {"name":"andrew","id":"d3"},
                 {"name":"peter","id":"d4"}]
   }
}' 
```

如何打印每个名称？稍后我将在 html 选择选项中使用它们，我知道该怎么做。但我无法把绳子拿出来。这是我尝试过的东西：

```
$obj = json_decode($fields_string);
$fields_detail = $obj-?{"fields"}->{"customers"}; 
```

此时，我可以通过 打印客户数组`echo json_encode($fields_detail)`，但在此之前，我想使用`foreach`. 我试了几次，都不行。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T11:19:19.317

客户是一个对象数组，因此迭代每个对象并读取属性应该可以工作。

```
foreach ($fields_detail as $customer) {
  echo $customer->name;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T11:21:04.800

像这样的东西：

```
$data = json_decode($fields_string, true); // return array not object
foreach($data['fields']['customers'] as $key => $customer) {
 echo $customer['name']; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:29:25.297

通过以下方式访问名称`fields->customers`：

```
$obj = json_decode($fields_string);

foreach($obj->fields->customers as $customer)
{
    echo $customer->name . "\n";
} 
```

[演示](http://codepad.org/xWaARRjV)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:23:05.953

```
foreach($obj->fields->customers as $fields)
echo $fields->name; 
```

# google-reseller-api - 在沙盒中创建客户我总是收到 500。Google Reseller API

> ID：15000876
> 
> 赞同：0
> 
> 时间：2013-02-21T11:17:04.813
> 
> 标签：google-reseller-api

我已经验证了我的请求，并尝试在沙盒中创建客户，但我总是收到错误 500。

这是请求：

```
 self.cred =  OAuth2Credentials(access_token = access_token, client_id = client_id,
                            client_secret = client_secret, refresh_token = refresh_token,
                            token_expiry = None, token_uri ="https://accounts.google.com/o/oauth2/token",
                            user_agent = None, id_token = None)

  self.client = httplib2.Http()
  self.cred.refresh(self.client)
  self.client = self.cred.authorize(self.client)
  payload = {
      "kind": "reseller#customer",
      "customerId": "example.com",
      "customerDomain": "example.com",
      "postalAddress": {
        "kind": "customers#address",
        "contactName": "John Doe",
        "organizationName": "Example Inc",
        "locality": "Mountain View",
        "region": "California",
        "postalCode": "94043",
        "countryCode": "US",
        "addressLine1": "1600 Amphitheatre Parkway",
        "addressLine2": "Mountain View",
        "addressLine3": "California"
      },
      "phoneNumber": "+1 650-253-0000",
      "alternateEmail": "alternateEmail@google.com"
    }
  paytext = json.dumps(payload)
  da = self.client.request(method = 'POST', uri = "https://www.googleapis.com/apps/reseller/v1sandbox/customers/", body =paytext) 
```

这是错误：

({'status': '500', 'content-length': '52', 'x-xss-protection': '1; mode=block', 'x-content-type-options': 'nosniff', 'expires'：'Thu，2013 年 2 月 21 日 11:09:51 GMT'，'server'：'GSE'，'-content-encoding'：'gzip'，'cache-control'：'private，max-age= 0'，'日期'：'星期四，2013 年 2 月 21 日 11:09:51 GMT'，'x-frame-options'：'SAMEORIGIN'，'content-type'：'application/json; charset=UTF-8' }, '{\n "error": {\n "code": 500,\n "message": null\n }\n}\n')

有没有其他方法可以做到这一点？

编辑：

我也尝试过这个发现：

```
from apiclient.discovery import build
import httplib2
http = httplib2.Http()
from oauth2client.client import OAuth2Credentials
cred =  OAuth2Credentials(access_token = access_token, client_id = client_id,
                                client_secret = client_secret, refresh_token = refresh_token,
                                token_expiry = None, token_uri ="https://accounts.google.com/o/oauth2/token" ,
                                user_agent = None, id_token = None)
client = httplib2.Http()
cred.refresh(client)
client = cred.authorize(client)
api = build(serviceName='reseller',version='v1sandbox',http=client)
api.customers().insert(body=payload).execute() 
```

而且也有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:52:37.080

我相信您的问题与问题跟踪器中的这个最近的错误有关。

[http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3346](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3346)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T20:53:30.867

我认为他们已经修复了他们的错误，尽管它似乎没有被标记为已修复。我们能够创建一个沙盒客户。这是 Ruby 中的要点： `def self.create response = client.execute( :api_method => service.customers.insert, :body_object => { :customerDomain => domain, :alternateEmail => alternate_email, :postalAddress => { :contactName => contact_name, :organizationName => organization_name, :countryCode => two_letter_country_code, :region => region, :addressLine1 => street_address, :locality => city, :postalCode => zip } }, :authorization => authorization ) GoogleCustomer.new(response.data) end`

这似乎是创建客户所需的最少信息。

这假设您已经处理了授权。需要注意的一件事：如果您使用的是服务帐户，则需要模拟一个有权创建客户的用户。

# android - 标题中的 2 行

> ID：15000877
> 
> 赞同：0
> 
> 时间：2013-02-21T11:17:07.167
> 
> 标签：android, header, screen, android-actionbar

我可以在操作栏中的标题附近做一个标题和一个微调器，但是

-1。我该怎么做 - 标题中的 2 行（收件箱）和一个微调器（xyz.xyz@android.com）：

![在此处输入图像描述](../Images/593351a6ac24aa7a52aec441b008cc28.png)

-2。标题附近有一个地方，但按钮在屏幕底部。如果我在 xml "IfRoom" 中做，android 会决定哪个按钮靠近标题，哪个按钮在底部。

-3。这 - 2 行和标题中的字体（星期四，6 月 21 日）

![在此处输入图像描述](../Images/40c43e0e4f40060a9424d5bba9c90860.png)

# iphone - Siri SDK 可用吗？

> ID：15000880
> 
> 赞同：0
> 
> 时间：2013-02-21T11:17:16.690
> 
> 标签：iphone, ios, api, siri

由于一些谣言，我正在寻找 Siri API 以将其集成到我的应用程序中。所以，请帮助我。这个谣言是真的还是只是谣言。是否有任何可信赖的 API 可以提供 Siri 等服务功能。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:24:35.107

Siri SDK 尚未提供。不过，这将是一个非常好的补充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-22T18:38:57.983

iOS 10 终于发布了 SiriKit！

然而，作为一个非常新的特性，只有大约 7 种应用程序可以使用 API。

我有一个关于如何使用 SiriKit 创建一个简单的消息应用程序的 YouTube 视频：[https ://www.youtube.com/watch?v=OknS0zecnFU](https://www.youtube.com/watch?v=OknS0zecnFU)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T16:17:25.950

谣言继续说它即将到来，现在 iWatch 增加了燃料。

虽然目前还没有 Siri SDK，但 Nuance 确实有一个（Dragon Mobile）。他们是 Dragon NaturallySpeaking 背后的人，甚至可能是 Siri 背后的人。

这是[他们的 SDK 的链接，以及](http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=home)[将其放入 IOS 应用程序](http://www.raywenderlich.com/60870/building-ios-app-like-siri)的非常完整的教程

还有其他几个语音识别库，包括[openears](http://www.politepix.com/openears/)等免费的。

# jquery - jQuery datepicker inline-format 输出长日期

> ID：15000882
> 
> 赞同：0
> 
> 时间：2013-02-21T11:17:22.937
> 
> 标签：jquery, jquery-ui-datepicker

**html**

```
<div id="expire"></div>
<input type="hidden" name="expire"> 
```

**jQuery**

```
$("#expire").datepicker({
        altFormat: "YY-MM-DD",
        dateFormat: "YY-MM-DD",
        onSelect: function(){
            var dateObject = $(this).datepicker('getDate');
            $('input[name=expire]').val(dateObject); 
        }
    }); 
```

当使用上面我的日期选择器是内联的，当我点击一个日期时，隐藏字段的值最终像

> 2013 年 2 月 16 日星期六 00:00:00 GMT+0000（GMT 标准时间）

有没有办法改变它所以它就像这样

> 2013-02-16

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:25:40.977

```
var d  = new Date(dateObject);

var curr_date = d.getDate();
var curr_month = d.getMonth() + 1; //Months are zero based
var curr_year = d.getFullYear();
var fulldate = curr_date + "-" + curr_month + "-" + curr_year
 $('input[name=expire]').val(fulldate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:22:53.400

**答案是**

```
$("#expire").datepicker({
        onSelect: function(){
            var dateObject = $.datepicker.formatDate("yy-mm-dd", $(this).datepicker("getDate"));
            $('input[name=expire]').val(dateObject); 
        }
    }); 
```

# python - Python：如果__name__ == main，如何在里面插入return？

> ID：15000883
> 
> 赞同：5
> 
> 时间：2013-02-21T11:17:23.320
> 
> 标签：python, function, return

这给出了错误：

```
if __name__=="__main__":
    box = Myfunc()
    box.do(1)
    if box.loop() <> Drh.DrhOk:
        return 
    else:
      ...
      ... 
```

SyntaxError: 'return' 外部函数

我如何返回`if __name__=="__main__":`块？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-21T11:19:50.087

你没有。您的`__main__`块应始终为：

```
if __name__ == "__main__":
    main() 
```

将代码放入`main()`函数中可确保它是可测试的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T11:20:25.850

你不想返回，你可能想停止执行。使用[sys.exit()](http://docs.python.org/2/library/sys.html#sys.exit)

# php - RegEx 仅匹配不以引号开头的字符串

> ID：15000884
> 
> 赞同：2
> 
> 时间：2013-02-21T11:17:23.820
> 
> 标签：php, regex, string

我有字符串列表（在 PHP 中）：

a2c

bdR

dDv

“ddv

啊啊啊

“啊啊啊

什么是正则表达式只匹配不以引号开头的字符串？在这个例子中，有四个这样的字符串。所以，我只需要匹配四个字符串（计算它们）。对于这个列表，我正在使用循环，但我现在只需要 RegEx。谢谢！

我试过了

```
[^"]([a-zA-Z0-9]*)* 
```

但它仍然匹配所有字符串，即使是那些以引号开头的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:19:13.040

您缺少字符串 anchor 的开头`^`，这意味着您的表达式将匹配一个字符串，如果它出现*在其中的任何位置*。显然，序列“非引号后跟任何内容，包括字符串结尾”出现在所有示例输入中。

这个表达式将匹配你想要的：

```
^[^"] 
```

它只匹配第一个字符不是双引号的任何输入。没有必要打扰其余的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:30:12.713

尝试一下：

```
^[^"](.*)/gm 
```

（如果变量中有多个字符串。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:31:51.867

```
$strigs_arr       = array();
foreach($strings as $str){
   //$str         = '"aaa';
   preg_match('/^(?P<string>[^"].*)/',$str,$match);

   $strigs_arr[]  = $match['string'];
}
echo "<pre>";
print_r($strigs_arr); 
```

# regex - 在 VIM 模式后添加换行符

> ID：15000886
> 
> 赞同：27
> 
> 时间：2013-02-21T11:17:36.910
> 
> 标签：regex, vim, replace, vi, substitution

我有一个 css 文件，我想在每个`}`.

我怎样才能在 Vim 中做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-21T11:20:14.037

替换会很好地工作。

```
:%s/}/\0\r/g 
```

替换`}`为整个匹配项`\0`和换行符`\r`。
或者

```
:%s/}/&\r/g 
```

Where `&`also is an alternative for the entire match,虽然在我看来有点滑稽。Vim 高尔夫球手喜欢它，因为它为他们节省了击键 :)

`\0`或者`&`在替换部分的替换中充当特殊字符。在替换期间，匹配的整个字符串替换替换中的`\0`或`&`字符。

我们可以通过更复杂的搜索和替换来证明这一点——

```
Which witch is which? 
```

应用替换 -

```
:s/[wW][ih][ti]ch/The \0/g 
```

给 -

```
The Which The witch is The which? 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T11:21:08.793

答案是`:%s/}/}\r/`我猜。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-14T03:45:22.053

```
:%s/pre/cur\r/g 
```

`%`: 对整个缓冲区进行操作。

`pre`（以前的模式）：将要更改的模式。

`cur`（当前模式）：将更改以前的模式。

`\r`： 新队。

`g`: 对一行中的每个匹配项重复（默认只替换第一个）。

# java - 使用 Jersey 和 Tomcat 在 java 中访问 Web 服务时出现 404

> ID：15000894
> 
> 赞同：0
> 
> 时间：2013-02-21T11:18:00.430
> 
> 标签：java, jersey, tomcat7

我是网络服务的新手。我正在使用球衣和 Tomcat。我有一个写成 Webservice 的简单方法；

```
package ex.ws;

@Path("/Example")
public class Example {

  @GET
  @Produces({"application/plain"})
  @Path("/test")
  public String test()   
  {    
    System.out.println("called");  
    return "sdasd";   
  }     
} 
```

我的 web.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>Tenant Manager</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>TMWS</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>ex.ws</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>TMWS</servlet-name>
    <url-pattern>/services</url-pattern>
  </servlet-mapping>
</web-app> 
```

我正在访问我机器中托管的 Web 服务

```
http://myhost1:8080/tm/services/Example/test 
```

在 ie 中，但我得到了 404 异常。我的项目名称是 tm。

服务器启动没有任何错误。我也从我包含的示例 jsp 页面中收到欢迎消息。

我的 struts.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
  <constant name="struts.devMode" value="true" />
  <constant name="struts.ognl.allowStaticMethodAccess" value="true" />
  <constant name="struts.action.excludePattern" value="/services/.*" />
  <include file="struts-default.xml" />
</struts> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:35:16.520

尝试使用`@WebServlet`而不是`@Path`. 不确定，但这应该可以。

# php - Zend_Controller_Router_Exception: 路由默认没有定义

> ID：15000900
> 
> 赞同：1
> 
> 时间：2013-02-21T11:18:14.617
> 
> 标签：php, zend-framework, url, zend-route, zend-view

在我的带有多个模块的应用程序中，我有一个发送电子邮件的方法，文本使用 url 视图帮助器来构建链接。如果我通过浏览器执行此方法一切正常，但如果我通过 shell 通过 cron 运行此方法，我会收到此错误：

```
Fatal error: Uncaught exception 'Zend_Controller_Router_Exception' with message 'Route default is not defined' in /path/ZendFramework-1.12.1/library/Zend/Controller/Router/Rewrite.php on line 318

Zend_Controller_Router_Exception: Route default is not defined in /path/ZendFramework-1.12.1/library/Zend/Controller/Router/Rewrite.php on line 318 
```

浏览网页我发现了这个解决方案：[http ://www.dragonbe.com/2012/11/route-default-is-not-defined.html](http://www.dragonbe.com/2012/11/route-default-is-not-defined.html)

如果我按照我在博客中所说的那样做，错误不会再发生，但是此时生成的链接和'缺少协议和主机名，给我写了一个仅指向控制器和动作的链接，例如“/controller/action/foo /酒吧”

你可以帮帮我吗？

谢谢

* * *

**编辑**

这就是我运行 cron 作业的方式：

结构体：

```
app/
app/application
.. stuff ...
app/scripts/
app/scripts//bootstrap.php
app/scripts//cronjobs.php 
```

应用程序/脚本//bootstrap.php

```
<?php
// Define path to application directory
define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application/'));

// Ensure library/ is on include_path
set_include_path(
    implode(PATH_SEPARATOR,
        array(
            realpath(APPLICATION_PATH . '/../library'),
            get_include_path())));

if (isset($zendOptions)) {

    // using Zend_Console_Getopt to parse environment to load
    require_once 'Zend/Console/Getopt.php';

    try {
        $getOpt = new Zend_Console_Getopt($zendOptions);
        $getOpt->parse();
    } catch (Zend_Console_Getopt_Exception $e) {
        echo $e->getMessage() . PHP_EOL;
        echo $e->getUsageMessage();
        exit(1);
    }

    if ($getOpt->getOption('h')) {
        echo $getOpt->getUsageMessage();
        exit(0);
    }
    // Define application environment
    define('APPLICATION_ENV',
    $getOpt->getOption('e') ? $getOpt->getOption('e') : 'production');
} else {
    // Define application environment using getenv
    define('APPLICATION_ENV',
    getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production');
}

// define APPLICATION_BOOTSTRAP if not defined
if (!defined('APPLICATION_BOOTSTRAP')) {
    define('APPLICATION_BOOTSTRAP', true);
}

// Define standard config file
define('APPLICATION_CONFIG', APPLICATION_PATH . '/configs/application.ini');

/** Zend_Application */
require_once 'Zend/Application.php';

// Init a Zend_Application
$zendApplication = new Zend_Application(APPLICATION_ENV, APPLICATION_CONFIG);
if (APPLICATION_BOOTSTRAP) {
    $zendApplication->bootstrap();
} 
```

应用程序/脚本/cronjobs.php

```
<?php
// define options for script
$zendOptions = array(
    'environment|e=w' => 'Environment to use as specified in application.ini (default production)',
    'test|t' => 'test cron',
    'help|h' => 'Show program usage');

// bootstrap application object (default true, put to false
// if you need to bootstrap only single resources
define('APPLICATION_BOOTSTRAP', true);

// parse the options and bootstrap application if required
require_once realpath(dirname(__FILE__) . '/bootstrap.php');

/* start your script here, you'll have the following vars: */
/* @var $zendApplication Zend_Application initialized Zend_Application object */
/* @var $getOpt Zend_Console_Getopt a getopt parsed object */

error_reporting(E_ALL);

if ($getOpt->getOption('t')) {

    $vhUrl = new Zend_View_Helper_Url();
    $url = $vhUrl->url(array('controller' => 'foo', 'action' => 'bar'));
    Zend_Debug::dump($url);
} 
```

调试打印 '/foo/bar'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:09:50.530

**我找到了解决方案**

应用程序.ini

```
[production]
baseUrl = mydomain.com

[development : production]
baseUrl = mydomain.dev

[testing : production]
baseUrl = mydomain.test 
```

引导程序.php

```
/**
 * Default Routes
 */
protected function _initDefaultRoutes()
{
    $frontController = Zend_Controller_Front::getInstance();
    $frontController->getRouter()->addDefaultRoutes();
    $options = $this->getOptions();
    $frontController->setBaseUrl('http://' . $options['baseUrl']);
} 
```

现在开始工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:19:25.903

默认情况下，助手`Zend_View_Helper_Url`使用`Zend_Controller_Router_Rewrite`不包括主机名和协议（请参阅 参考资料`Zend_Controller_Router_Rewrite::assemble`）。

但是，如果您想在`$_SERVER['HTTP_HOST']`从 cli 执行脚本时通过，可以使用以下结构来完成：

```
HTTP_HOST=example.com php /path/to/cronjob.php 
```

稍后，如果你想获取你当前的服务器 url，你可以使用`Zend_View_Helper_ServerUrl`

例子：

```
<?php
// cronjob.php
$serverUrl = new Zend_View_Helper_ServerUrl();
var_dump($serverUrl->serverUrl()); 
```

// 输出：`string(18) "http://example.com"`

# algorithm - 一个数除以另一个数多少次，剩下多少？

> ID：15000901
> 
> 赞同：1
> 
> 时间：2013-02-21T11:18:25.077
> 
> 标签：algorithm, delphi, integer

我需要 Delphi 中的一种算法来为指定的整数值生成分区。

示例：对于 13，如果将 5 指定为分区的最大值，它将给出 5、5、3；如果将 4 指定为最大分区值，则结果应为 4、4、4、1，依此类推。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T11:40:21.420

`div`使用和解决问题很简单`mod`。这是一个我认为不需要进一步解释的示例程序：

```
program IntegerPartitions;
{$APPTYPE CONSOLE}

function Partitions(const Total, Part: Integer): TArray<Integer>;
var
  Count: Integer;
  Rem: Integer;
  i: Integer;
begin
  Assert(Total>0);
  Assert(Part>0);

  Count := Total div Part;
  Rem := Total mod Part;
  if Rem=0 then
    SetLength(Result, Count)
  else
    SetLength(Result, Count+1);
  for i := 0 to Count-1 do
    Result[i] := Part;
  if Rem<>0 then
    Result[Count] := Rem;
end;

var
  Value: Integer;

begin
  for Value in Partitions(13, 5) do
    Writeln(Value);
  Readln;
end. 
```

# css - ie8 定位和 z-index 错误

> ID：15000902
> 
> 赞同：0
> 
> 时间：2013-02-21T11:18:26.777
> 
> 标签：css, internet-explorer-8, z-index, css-position

我有一个内容框，我想在其中显示 2 个背景图像和内容覆盖。以下代码在 ff、chrome 和 ie9 中工作，但在兼容 ie9 和 ie8 时不工作。

```
#content {
background-color: #dcdde1;
position: relative;
min-height: 347px;
}

#content_box {
z-index: 3;
position: absolute;
top: 0;
left: 0;
width: 848px;
padding: 20px;
}

#content_background_top {
background-image: url('../img/content_background_top.png');
background-repeat: repeat-x;
position: absolute;
height: 146px;
width: 888px;
top: 0;
left: 0;
z-index: 2;
}

#content_background_bottom {
background-image: url('../img/content_background_bottom.png');
background-repeat: repeat-x;
position: absolute;
height: 215px;
width: 888px;
bottom: 0;
left: 0;
z-index: 1;
}

<div id="content">
    <div id="content_background_top"></div>
    <div id="content_background_bottom"></div>
    <div id="content_box">
        <?php echo $this->Session->flash(); ?>
        <?php echo $this->fetch('content'); ?>
    </div>
</div> 
```

请帮忙，让它工作非常重要

问候M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:22:28.437

等一下。尝试：

```
#content {
background-color: #dcdde1;
position: relative;
min-height: 347px;
height: 347px;
} 
```

如果这不起作用，您可能需要 clearfix。

# report - Cognos 10.1 如何控制报表输出？

> ID：15000903
> 
> 赞同：0
> 
> 时间：2013-02-21T11:18:26.800
> 
> 标签：report, cognos, cognos-8, cognos-bi

目前我正在使用 Cognos 10.1 报表工作室。

要求是输出应该是这样一种方式，即交叉表应该以默认大小出现在所有页面中，即使输出不同。**所有页面的交叉表大小应相同，但字体大小可能不同。**

例如：Crosstab 将***产品线排成一行；列中的产品；对角线的收入***。页面集已应用于基于产品线的交叉表。即每个产品线将出现在一个单独的页面中。

* * *

每个产品线的产品数量不同。交叉表在所有页面中的大小应相同，但字体大小可能不同。

* * *

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T17:06:35.623

您需要在结果集中为每个行/列组合强制一行。通过针对两个查询外部连接您的结果集来做到这一点：一个不同的行值，一个不同的列。接下来你必须给每个单元格一个固定的宽度，这样它就不会在 HTML 中动态格式化。

# html - IOS不透明度过渡不是很好的效果

> ID：15000906
> 
> 赞同：0
> 
> 时间：2013-02-21T11:18:39.917
> 
> 标签：html, ios, css, uiwebview, webkit

使用 CSS 和 JS 为 UIWebView 制作一些简单的动画；使用 Chrome 进行测试和调试；对于使用这种风格的动画：

```
-webkit-transition: opacity 1s ease-out; 
```

将不透明度设置为 0 到 1；一切看起来都很好，除了动画的最终状态，当最后一个动画元素 () 出现时，页面上的随机文本块变得更粗。已经尝试过不同的解决方案：

```
-webkit-backface-visibility: hidden;
-webkit-perspective: 1;
-webkit-font-smoothing: antialiased;
opacity: 0.999; 
```

没有什么帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:15:13.217

在阅读了有关动画问题的其他讨论后，尝试使用以下解决方案：

```
.flick-fix
{
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
} 
```

但是这个类应该应用于行为看起来很奇怪的元素，而不是动画对象；

# c# - 单元测试数据访问层的方法

> ID：15000908
> 
> 赞同：20
> 
> 时间：2013-02-21T11:18:52.617
> 
> 标签：c#, unit-testing, testing, persistence, data-access-layer

我一直在尝试寻找一种有效的方法来在 C# 中对我的数据访问层进行单元测试。我是一名初级 Java 开发人员，只使用 C# 大约 6 个月，过去我使用一个名为 DBUnit 的库来针对已知状态数据库进行测试。我还没有找到可以使用的类似活动库，最接近的似乎是 nDBUnit，但它已经有一段时间没有活动了。

关于 C# 中的方式和原因似乎有很多相互矛盾的方法。理想情况下，我想使用模拟测试数据访问层，而无需连接到数据库，然后在单独的一组测试中对存储过程进行单元测试。

在我正在处理的系统中，数据访问层是使用 ADO.net（不使用实体框架）来调用 SQL Server 上的存储过程。

以下是我必须使用的示例代码；要走模拟路径，我必须能够模拟 SqlCommand（使用 IDbCommand）和/或模拟 SqlConnection。

所以我的问题是什么似乎是最好的方法（如果有这样的事情）来做到这一点？到目前为止，唯一的方法是制作传递给构造函数的 Proxy 对象，以便它可以返回模拟的 Sql* 对象进行测试。

我还没有机会查看所有可用的 C# 模拟库。

```
public class CustomerRepository : ICustomerRepository
{
   private string connectionString;

   public CustomerRepository (string connectionString)
   {
     this.connectionString = connectionString;
   }

   public int Create(Customer customer)
   {

     SqlParameter paramOutId = new SqlParameter("@out_id", SqlDbType.Int);
     paramOutId.Direction = ParameterDirection.Output;
     List<SqlParameter> sqlParams = new List<SqlParameter>()
     {
       paramOutId,
       new SqlParameter("@name", customer.Name)
     }

     SqlConnection connection = GetConnection();
     try
     {
       SqlCommand command = new SqlCommand("store_proc_name", connection);

       command.CommandType = CommandType.StoredProcedure;

       command.Parameters.AddRange(sqlParams.ToArray());

       int results = command.ExecuteNonQuery();

       return (int) paramOutId.Value;
     }
     finally
     {
       CloseConnection(connection);
     }

   }

} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-24T06:40:22.597

不幸的是，您找不到将数据库置于已知状态并允许您针对数据库运行 CustomerRepository 以测试 CustomerRepository 的工具。但是，答案不是开始使用模拟来模拟所有的 ADO 调用。通过这样做，您最终会创建一个不真正测试任何逻辑的单元测试：它只是测试代码是否按照您认为应该编写的方式编写。

假设我最终编写了一个 SQL INSERT 作为在 SQL 数据库中创建客户的命令。现在假设我们正在进行更改，以便客户表具有不同的字段（这会破坏我们的 INSERT 命令），现在我们应该使用存储过程来创建客户。使用模拟的测试仍然可以通过，即使它正在测试的实现现在已经被破坏了。此外，如果您将实现修复为使用存储过程，您的单元测试现在将失败。如果单元测试在应该失败时继续通过，但在您修复系统时会失败，那么单元测试的意义何在？

有关一些可能的替代方案，请参阅[此问题](https://stackoverflow.com/questions/780614/dbunit-net-alternatives)。看起来标记的答案实际上是最终使用 IKVM 在 C# 中使用 DBUnit。

因此，可能还有其他途径可以继续探索，但模拟 ADO 调用只会导致脆弱的测试，而这些测试并不能真正测试任何重要的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T05:15:35.437

这一层的工作是将代码连接到数据库。它必须封装有关数据库连接和语法的知识。通常将领域语言映射到数据库语言。我将单元测试的这一部分视为集成测试，因此我测试数据库模式是否与真实数据库或测试数据库等效。更多关于[这里](http://www.slideshare.net/toddanglin/building-a-testable-data-access-layer)的主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-06T14:31:32.943

要测试 DataAccess Layer，您将需要一个更复杂的结构。

DataAccess Layer 将从 Repository 对象调用引用。Repo 对象将通过 UnitOfWork 设计模式从 Entity Framework DbSets 调用引用。

数据访问层 (TOP)
|
工作单位
|
存储库模式类
|
英孚语境
|
实际数据库

设置结构后，您将模拟存储库类。例如，项目将被插入到数据库中，而不是进入模拟对象。稍后您将针对您的模拟对象断言以查看是否插入了项目。

请看一下[实现存储库和工作单元模式](http://www.asp.net/mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-01T08:28:52.147

为了编写单元测试用例，您将不得不使用 DB 接口方法并模拟这些接口方法。我们不能模拟预定义的类，因此您将不得不使用接口。如果您认为您需要任何应该属于预定义类的命令或数据读取器实例，请编写一个接口方法，在其中对接口实例进行类型转换，将其更改为类类型，使用类属性并再次返回接口实例。例如，如果您需要 oracleCommand，请创建 IDBCommand 并将 IDBCommand 传递给您的接口并更改类型，使用它并返回它。

防爆代码，

```
 public interface IDbConnectionFactory
    {
        IDbConnection GetConnection();
        IDbCommand BindByName(IDbCommand dbCommand);
    }

public class DbConnectionFactory : IDbConnectionFactory
{

    public IDbConnection GetConnection()
    {
        try
        {
            var connection = new SQLConnection();

            var connection = connection.CreateConnection();
            if (connection != null)
            {
                connection.ConnectionString = _connectionString;
                return connection;
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
        return null;
    }

    public IDbCommand BindByName(IDbCommand dbCommand)
    {
        var command = (SQLCommand)dbCommand;
        command.BindByName = true;
        return command;
    }
} 
```

//现在写你的数据库测试用例

```
public void CustomerRepository_Create_Returns_Int()
{

    var customer = new Customer(); //Initialise values of customer here
    var _refCustomerRepository = new CustomerRepository();
    var _mockDBConnection = new Mock<IDbConnection>();

    var _mockDBCommand = new Mock<IDbCommand>();

    var _mockDBConnectionFactory = new Mock<IDbConnectionFactory>();

    _mockDBConnectionFactory.Setup(c =>
        c.GetConnection()).Returns(_mockDBConnection.Object);

    _mockDBConnection.Setup(m => 
        m.CreateCommand()).Returns(_mockDBCommand.Object);

    // for out value. Rename "@out_id" to "out_id". 
    _mockDBCommand.Setup(m => m.Parameters.Add(ParameterDirection.Output));
    // Rename ur paramter from "@name" to "name", it'll work
    _mockDBCommand.Setup(m => m.Parameters.Add("name"));

    _mockDBCommand.Setup(m => m.Parameters.AddRange(5));

    _mockDBCommand.Setup(m => m.ExecuteNonQuery()).Returns(1);

    var result = _refCustomerRepository.Create(saveCustomerSettings);

    //  Assert your result here

} 
```

// 用于测试执行阅读器

```
var _mockDataReader = new Mock<IDataReader>();

    _mockDataReader.SetupSequence(_ => _.Read())
                      .Returns(true)
                      .Returns(false);

// Do this for all columns that a query/SP returns 
   _mockDataReader.Setup(x => x["COLUMN_NAME"]).Returns("RETURN_VALUE");
   _mockDataReader.Setup(x => x["COLUMN_NAME"]).Returns("RETURN_VALUE"); 
   _mockDataReader.Setup(x => x["COLUMN_NAME"]).Returns("RETURN_VALUE"); 
```

例如，如果返回具有 FIRST_NAME、LAST_NAME、EMAIL 等属性的客户

```
 _mockDataReader.Setup(x => 
            x["FIRST_NAME"]).Returns("giveAnyValueYouWantThisColumnToReturn");
   _mockDataReader.Setup(x => 
            x["LAST_NAME"]).Returns("giveAnyValueYouWantThisColumnToReturn"); 
   _mockDataReader.Setup(x => 
            x["EMAIL"]).Returns("giveAnyValueYouWantThisColumnToReturn"); 
```

# java - 带有 AsyncTask 的 Android GridView 适配器

> ID：15000909
> 
> 赞同：0
> 
> 时间：2013-02-21T11:18:57.697
> 
> 标签：java, android, gridview, android-asynctask, android-lazyadapter

我从网络解析 XML，我想把这些数据放到 GridView 的其他活动中，你能帮帮我吗？

**我的第一个活动：**

```
public class HomeScreenActivity extends Activity {
    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.imageButton:
            Intent intent = new Intent(this, TopArtistsScreen.class);
            intent.putExtra("username", username);
            new DownloadXmlTask(this, HomeScreenActivity.this)
                    .execute("URL");
            startActivity(intent);
} 
```

**我的异步任务**

```
public class DownloadXmlTask extends AsyncTask<String, Void, List<Artist>> {
    @Override
    protected void onPostExecute(List<Artist> result) {
        progressDialog.dismiss();
        gridView.setAdapter(new TopArtistsImageAdapter(context, result));
} 
```

**TopArtistsImageAdapter**

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    if(convertView==null) {
        view = inflater.inflate(R.layout.items, null);
    }
    TextView textView = (TextView) view.findViewById(R.id.grid_item_name);
    ImageView imageView = (ImageView) view.findViewById(R.id.grid_item_image);
    textView.setText(artistsList.get(position).getName());
    imageLoader.DisplayImage(artistsList.get(position).getImage(), imageView);
    return view;
} 
```

PS我应该在下载所有信息后开始另一个活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:24:46.063

只有在下载所有信息后，我才应该开始另一个活动 => 进行如下更改：

1）仅在单击按钮时执行您的 AsyncTask

```
new DownloadXmlTask(this, HomeScreenActivity.this).execute("URL"); 
```

2) 在 AsyncTask 的 onPostExecute() 方法中启动 Activity：

```
Intent intent = new Intent(HomeScreenActivity.this, TopArtistsScreen.class);
intent.putExtra("username", username);
startActivity(intent); 
```

# .net - 搜索具有特定要求的 Windows 窗体 DataGrid（包括商业）

> ID：15000912
> 
> 赞同：2
> 
> 时间：2013-02-21T11:19:05.847
> 
> 标签：.net, winforms, gridview, datagrid

我知道，有很多这样的问题，但我有一些特殊要求，我希望网格能够满足这些要求。没有必要满足所有要求，但至少有一些会很好（按优先级排序）：

1.  连接到自定义数据源（最好通过一些简单的接口而不是可查询的）
2.  内置分页
3.  内置过滤
4.  内置分组
5.  内置排序
6.  通过接口公开的分页和过滤（即 LoadPage(limit, offset, sort,...) - 你知道，我的意思）。

有这样的事情吗？我检查了 PFGrid（无分页）、DevExpress（实现起来太复杂）、默认 DataGridView（慢、无分页、无分组）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:51:41.203

Infragistics 或 Telerik 提供的网格都符合您的所有要求，尽管我不完全确定最后一个。

Telerik：[http ://www.telerik.com/products/winforms/gridview.aspx](http://www.telerik.com/products/winforms/gridview.aspx)

基础设施：http : [//www.infragistics.com/products/windows-forms/grid/](http://www.infragistics.com/products/windows-forms/grid/)

# html - 将锚点向右对齐

> ID：15000913
> 
> 赞同：3
> 
> 时间：2013-02-21T11:19:06.763
> 
> 标签：html, css

考虑以下：

```
<a>a</a><a>b</a> 
```

如何将第二个锚点 (b) 向右对齐？

**PS：**浮动在这种情况下是一种滥用。它不是为此而设计的，它会导致一些问题，所以我需要其他更合理的解决方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-01-02T09:54:10.843

**只需这样做：**

```
style="float:right" 
```

**喜欢：**

```
<div>
   <a href="#Equipment" class="ui-btn ui-shadow ui-corner-all ui-btn-inline ui-mini">Equipment</a>
   <a href="#Model" class="ui-btn ui-shadow ui-corner-all ui-btn-inline ui-mini" style="float:right">Model</a>
</div> 
```

[http://jsfiddle.net/umerqureshi/0jx7kf1L/](http://jsfiddle.net/umerqureshi/0jx7kf1L/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-21T11:25:38.717

你需要单独的容器。

```
<p>
    <span>
        <a>Left</a>
    </span>
    <span class="align-right">
        <a>Right</a>
    </span>
</p> 
```

```
p {font-size:0; /* Fixes inline block spacing */  }
span { width:50%; display:inline-block; }
span.align-right { text-align:right; }

span a { font-size:16px; } 
```

[JSFiddle 示例](http://jsfiddle.net/xEVdM/2/)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-21T11:28:26.147

试试这个 CSS，

**使用 CSS3 nth-child()**

```
a:nth-child(2) {
   display: inline-block;
   text-align: right;
   width: 100%;
} 
```

演示：http: [//jsbin.com/opexim/3/edit](http://jsbin.com/opexim/3/edit)

注意：nth-​​child 是 CSS3，不能在 IE6、7 和 8 等旧浏览器上运行

**支持旧浏览器**

设置`class`为第二个`<a>`锚元素并应用 CSS。

```
<a>a</a><a class="right">b</a>

a.right {
   display: inline-block;
   text-align: right;
   width: 100%;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T11:22:01.363

也许你可以做这样的事情：`<a>a</a><a class="right">b</a>`

像这样的CSS：

```
a.right {
    position: absolute;
    right: 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-17T07:32:44.597

Try and use *[:nth-child()](https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child)*:

```
a:nth-child(2) {
   display: inline-block;
   text-align: right;
   width: 100%;
} 
```

I don’t know if this works for the older browsers.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T11:38:42.650

将 a`class`或分配`id`给包含锚点的 'b' 并给`margin-left:100%`它。

例如：

```
.second{margin-left:100%;} 
```

**要不然**

```
a:nth-child(2){margin-left:100%;} 
```

**要不然**

你也可以像下面提到的那样做：

**css**

```
a:nth-child(1){display:inline-block;width:50%;text-align:left;float:left;}
a:nth-child(2), .second{display:inline-block;width:50%;text-align:right;} 
```

**[工作小提琴](http://jsbin.com/ojasik/1/edit)**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T11:22:59.397

你可以试试下面的代码：

```
<a>a</a><a align="right">b</a>

  <a>a</a><a style="text-align:right">b</a> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-30T14:23:47.277

```
<div class="mydiv">
    <a class ="mylink"> test </a>
</div> 
```

```
.mydiv {
    text-align: left;
} 
```

`algin`您必须为“div”的“a”标签输入您的样式。

# php - 如何在 Symfony 1.4 Propel 中制定 SELECT CASE 标准

> ID：15000914
> 
> 赞同：0
> 
> 时间：2013-02-21T11:19:09.903
> 
> 标签：php, symfony-1.4, criteria, propel

我正在寻找一种在 Symfony 1.4 中基于此 SQL 制作标准的方法：

```
SELECT item.position, 
CASE 
    WHEN item.position = 1 THEN item.position + 1
    WHEN item.position = 2 THEN item.position - 1
    ELSE item.position
END AS new_position
FROM item ORDER BY new_position ASC 
```

我试图使用[这篇文章](https://stackoverflow.com/questions/7860871/propel-pseudo-column-sorting)中的示例，
但它没有帮助

make 很重要`$criteria`，因为它稍后会传递给渲染项目列表和排序项目的插件`$criteria`。

`WHEN`条件只是示例，我将使用更复杂的条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:43:50.537

您可以在 Query.php 类中使用 php 开关来构建条件（由于您的问题显示了简化的示例，因此您的条件所需的开关可能要复杂得多）：

```
//in YourModelQuery.php
public function addMyItemPositionCriteria($itemPosition) {
    //TODO: validate $itemPosition values as needed
    switch ($itemPosition) {
        case 1:
            return $this->add([$criteria see http://api.propelorm.org/1.6.8/ browse propel.runtime.query Criteria and ModelCriteria classes ]);
            break;
        case 2:
            return $this->add([$criteria here]);
            break;
        }
} 
```

或者您可以类似地在您的 ModelPeer.php 类（或没有函数调用的操作类）中构建一个 $criteria 对象：

```
// in MyObjectPeerClass.php
public static function addMyItemPositionCriteria($itemPosition) {
    //TODO: validate $itemPosition values as needed
    $criteria = new Criteria;
    switch ($itemPosition) {
        case 1:
            return $criteria->add([$criteria see http://api.propelorm.org/1.6.8/ browse propel.runtime.query Criteria and ModelCriteria classes ]);
            break;
        case 2:
            return $criteria->add([$criteria here]);
            break;
        }
} 
```

然后，您可以使用此标准：

```
//depending on context
// in ModelQuery.php call 
    $this->addMyItemPostion($itemPosition);
// call to model query
    ModelQuery::create()->addMyItemPosition($itemPosition)->find();
//in action or somewhere else (adding to previously defined $criteria)
    $new_criteria = MyObjectPeerClass::addMyItemPosition($itemPosition);
    $criteria->add($new_criteria); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-16T13:07:45.033

您可以使用语句“withColumn”，然后自定义您的查询

->withColumn("CASE WHEN CLIENTE_ID = {$cliente->getId()} THEN 'Pontos Pessoais' ELSE 'Pontos de Equipe' END", 'descricao')

# java - Apache Tika 从哪里获得“计数”？

> ID：15000918
> 
> 赞同：0
> 
> 时间：2013-02-21T11:19:15.167
> 
> 标签：java, pdf, apache-tika

`Office.PARAGRAPH_COUNT`如果我有以下代码可以从 PDF中读取段落数 ( )：

```
TikaInputStream pdfStream = TikaInputStream.get(new File("some-doc.pdf"));

ContentHandler handler = new DefaultContentHandler();
Metadata pdfMeta = new Metadata();
ParseContext pc = new ParseContext();

Parser parser = TikaConfig.getDefaultConfig().getParser();

parser.parse(pdfStream, handler, pdfMeta, pc);

int pdfParagraphCount = pdfMeta.getInt(Office.PARAGRAPH_COUNT); 
```

Tika 是否获得`pdfParagraphCount`：

*   只需查询 PDF 的元数据以获取计数？或通过
*   在解析器读取整个 PDF 时应用一些“段落计数”算法？

如果是前者，保存计数的元数据字段是否可写？意思是，**会不会是错的？**任何带有 iText 或 PDFbox 的小丑都可以操纵该字段并使其不正确吗？

有什么方法可以让 Tika 在阅读 PDF 文件时计算段落（正确地，通过应用某种算法或策略）？

本质上，我需要 PDF 中的段落数，并且我需要它非常准确，没有机会或损坏/不正确的可写元数据字段（因为我自己不生成原始 PDF）。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:42:36.457

Tika 将文档本身的元数据返回给您。它不计算任何元数据，你得到的只是那里的东西。（Tika 有时会做一些工作来规范文件格式之间的事情，以便元数据在不同文档类型之间保持一致，但这主要只是映射到标准元数据方案）。

不过，您也有点不走运，*我需要它完全准确*，这将是 PDF 等文件格式的问题。PDF 不是基于行/段落的文件格式。当然，您可以生成一个 PDF，其中所有内容都相对定位在行和段落中，但您也可以构建一个 PDF，其中每个字符一次一个地绝对放置在页面上。Tika（以及下面的 Apache PDFBox）将尽最大努力将其转回有用的文本块，但如果有人真的想惹你生气，他们可以生成一个基本上不可能自动分类为段落的 PDF……

# angularjs - AngularJS 和 Firebase 身份验证

> ID：15000919
> 
> 赞同：4
> 
> 时间：2013-02-21T11:19:18.420
> 
> 标签：angularjs, firebase, firebase-security, angularjs-authentication

我想使用 Firebase 后端向我的 AngularJS 应用程序添加身份验证机制。要求很简单：

*   经过身份验证的用户应该能够访问任何页面。
*   如果未经身份验证的用户访问`/some_page`（除 之外的任何页面`/login`），他们应该被重定向到`/login`. 一旦他们输入正确的凭据，他们应该被重定向回`/other_page`.

[此处](http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application)描述的可能解决方案做出以下假设：

> 我的解决方案假定以下服务器端行为：对于每个 /resources/* 调用，如果用户未授权，则响应 401 状态

但是，我不确定在使用 Firebase 作为后端时是否可以强制执行此行为。

任何实现此类 AngularJS+Firebase 集成的帮助和/或示例将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:52:00.003

[一种解决方案是使用$route](http://docs.angularjs.org/api/ng.%24route)服务在客户端进行路由。

当用户通过 Firebase 进行身份验证时，在客户端上保存一些记录，例如在本地存储、一些无所不包的控制器或您自己的 Angular[服务](http://docs.angularjs.org/guide/dev_guide.services)（我的首选选项）中。

在您的路由控制器中，如果用户已通过身份验证，则重定向到`/some_page`，否则重定向到`/login`并跟踪用户打算去的[$location 。](http://docs.angularjs.org/api/ng.%24location)

另一方面，如果您想使用您的服务器进行路由，您可以通过[让您的服务器生成 Firebase auth tokens](https://www.firebase.com/docs/security/custom-login.html)来使用您链接到的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T14:39:04.700

我最近有同样的要求，偶然发现了这篇博文。 [http://www.42id.com/articles/firebase-authentication-and-angular-js/](http://www.42id.com/articles/firebase-authentication-and-angular-js/)

它解释了如何设置与 Firebase 交互的 Angular JS 应用程序。还包括使用 Firebase API 针对 Google+ 和 Github 等 OAuth 提供者进行身份验证的方法、基于身份验证状态的路由、在 Firebase 上存储用户配置文件信息以及在 Firebase 上设置安全规则以保护用户数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T20:01:34.390

如果您使用 Firebase 简单登录（而不是在您自己的服务器上生成身份验证令牌），您可以在此处查看如何在客户端检测您的登录状态： [登录后显示文本](https://stackoverflow.com/questions/14935130/displaying-text-after-login)

# actionscript-3 - 独立流式传输音频和视频 as3

> ID：15000922
> 
> 赞同：0
> 
> 时间：2013-02-21T11:19:38.637
> 
> 标签：actionscript-3, flash, stream

我有这两个功能。正如您所看到的，第一个正在流式传输视频（女巫正在循环），第二个正在流式传输音频（女巫也正在循环）。所以我需要在视频播放音频时开始运行并独立循环，因为我的音频长度大于视频的长度。任何想法我怎么能做到这一点。请使用代码。

```
function NCListener(e:NetStatusEvent){

    if (e.info.code == "NetStream.Play.Stop") {

        ns.play("http://media.easyads.bg/ads/display_ads_richmedia/video/avon/maria_ilieva/video_2.flv");
        shaker(null);
        }
    };

var sound:Sound = new Sound();
var soundChannel:SoundChannel= new SoundChannel();

sound.addEventListener(Event.COMPLETE, onSoundLoadComplete  );

function onSoundLoadComplete(e:Event):void{
    sound.removeEventListener(Event.COMPLETE, onSoundLoadComplete);
    soundChannel = sound.play(0, 9999);
    soundChannel.addEventListener(Event.SOUND_COMPLETE, onSoundChannelSoundComplete);
}

function onSoundChannelSoundComplete(e:Event):void{
    e.currentTarget.removeEventListener(Event.SOUND_COMPLETE, onSoundChannelSoundComplete);
    soundChannel = sound.play(0, 9999);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:08:20.840

首先，你不需要 `soundChannel.addEventListener(Event.SOUND_COMPLETE, onSoundChannelSoundComplete);`

它在声音完成运行时触发，但由于它正在循环播放，因此无需再次播放。

首先，你需要移动线路

```
soundChannel = sound.play(0, 9999); 
```

并将其放在您的`ns.play`. 因此，声音将在您的视频开始时立即开始。然后，为了防止它在视频开始时再次循环，只需检查 soundChannel 是否存在：

```
if (soundChannel == null)
    soundChannel = sound.play(0, 9999); 
```

请注意，之后**没有办法**让您的声音与您的视频保持同步，这完全取决于 flashplayer 的意愿。

# sql - Sybase SQL select 语句按 ID 折叠和压缩行

> ID：15000924
> 
> 赞同：1
> 
> 时间：2013-02-21T11:19:44.213
> 
> 标签：sql, sql-update, sybase, sql-insert

我需要帮助使用 Sybase 构建 SQL 语句以折叠由三列（ID、Name 和 DEPT）链接的行。我有一张桌子`TABLE1`：

```
ID    NAME     DEPT     CAT
1     ghi                P
1               CV       G
2     abc                P
2               IT       G
2               HC       G
3     def                P
3     jkl                P
3               ENT      G
3               MC       G 
```

CAT 列表示类别。P列表示人。G 列表示组。

`ID`可以是个人（姓名）以及组（部门）。

如果 ID(1) 与人员(NAME) 以及组(DEPT) 相关联，那么我想更新人员(NAME) 行以具有 DEPT 名称，然后删除组(DEPT) 行。如果 ID(2) 与一个人(NAME) 和多个 DEPT(group) 相关联，那么我希望该 NAME 有两行。如果 ID(3) 包含两个不同的 NAME 和两个不同的 DEPT，那么我希望每个 NAME 和 DEPT 有单独的行，如下所示：

以下是我想要的预期输出：

```
 ID    NAME     DEPT     CAT
    1     ghi       CV       P
    2     abc       IT       P
    2     abc       HC       P
    3     def       ENT      P
    3     def       MC       P
    3     jkl       ENT      P
    3     jkl       MC       P 
```

我想要一个 SQL 语句，它从`TABLE1`. 是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:10:32.310

这可能对你有用。

```
SELECT t1.ID, t1.NAME, t2.DEPT, t1.CAT 
FROM TABLE1 AS t1
     INNER JOIN TABLE1 AS t2 ON (t1.ID = t2.ID)
WHERE t2.DEPT IS NOT NULL AND t1.NAME IS NOT NULL 
```

# testing - [Gherkin/Specflow]：如何编写具有复杂类型的场景大纲

> ID：15000926
> 
> 赞同：3
> 
> 时间：2013-02-21T11:19:49.170
> 
> 标签：testing, bdd, specflow, gherkin

我在编写测试场景检查将添加到数据库的站点的有效性时遇到问题。任何人都可以为我提供一个示例，说明如何正确编写它。不知怎的，我觉得“场景大纲”不是正确的方法......

'stations' 和 'new_stations' 是复杂类型，我希望拥有已经定义的 'stations' 并检查是否可以添加每个 'new_stations'。

```
Scenario Outline: 
    Given We have <stations>
    And We are trying to add a station of the <new_stations> having the same id, the same name or the same code
    Then we should not be able to add it

# <stations>
        | Id | Code | Name     | Validity                      |
        | 1  | 1    | City 1   | from 2013-01-01 to 2013-04-01 |
        | 2  | 2    | City 2   | from 2013-03-15 to 2013-05-01 | 

# <new_stations>
        | Id | Code | Name   | Validity                      |
        | 1  | 234  | City 4 | from 2013-03-01 to 2013-07-01 |
        | 3  | 5    | City 1 | from 2013-03-01 to 2013-07-01 |
        | 4  | 2    | City 3 | from 2012-03-15 to 2013-07-15 | 
```

所以不应该添加任何“new_stations”

*   Id 1 因为它的 Id 不是唯一的
*   Id 3 因为它的名字不是唯一的
*   Id 4 因为它的代码不是唯一的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:46:42.857

我想你可能混淆了你的许多。

[场景大纲](https://github.com/cucumber/cucumber/wiki/Scenario-Outlines)用于描述相同的场景，但以参数化的方式，以便依次注入值。这看起来像您拥有的第二张桌子

但是您的示例看起来像您需要一次为已知站点注入多行数据，因此它将变为（见[表格](http://cukes.info/step-definitions.html)）

```
Scenario Outline: 
  Given We have 
    | Id | Code | Name     | Validity                      |
    | 1  | 1    | City 1   | from 2013-01-01 to 2013-04-01 |
    | 2  | 2    | City 2   | from 2013-03-15 to 2013-05-01 | 
  And We are trying to add a station <Id>, <Code>, <Name>, <Validity> 
  Then we should not be able to add it

Examples:
    | Id | Code | Name   | Validity                      |
    | 1  | 234  | City 4 | from 2013-03-01 to 2013-07-01 |
    | 3  | 5    | City 1 | from 2013-03-01 to 2013-07-01 |
    | 4  | 2    | City 3 | from 2012-03-15 to 2013-07-15 | 
```

# android - 在哪里以 xml 形式存储静态字符串数据？

> ID：15000931
> 
> 赞同：0
> 
> 时间：2013-02-21T11:20:02.247
> 
> 标签：android, coding-style

我在我的 android 应用程序中有一个静态字符串，它是 xml 格式的。我想将文件存储在某个变量中。一种方法是将其存储在 res/string.xml 文件夹中。但是当我这样做时，我得到了这个错误

```
The processing instruction target matching "[xX][mM][lL]" is not allowed. 
```

另一种方法是使用该 xml 字符串初始化字符串变量。但是，我想，这不是一个好方法。

我的 xml 字符串如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<DumpStudentData xmlns="http://www.milpahost.com/">
<objUserRequest>
<CourseId xmlns="http://schemas.datacontract.org/2004/07/Microsoft.Milpa.Server.WcfService.BusinessObjects">6</CourseId>
<MachineId xmlns="http://schemas.datacontract.org/2004/07/Microsoft.Milpa.Server.WcfService.BusinessObjects">8qK6HM8LuAXq8bLROSsVjZ5u8Adn3IvvvLXDDe85Rq3Zi1hIQZZY8o6eyJPCYIgqdDRgRgqbK6RAdtJ3GXU73Q==</MachineId>
<ProviderId xmlns="http://schemas.datacontract.org/2004/07/Microsoft.Milpa.Server.WcfService.BusinessObjects">6</ProviderId>
<StudentId xmlns="http://schemas.datacontract.org/2004/07/Microsoft.Milpa.Server.WcfService.BusinessObjects">13</StudentId>
<UserLiveInternalId xmlns="http://schemas.datacontract.org/2004/07/Microsoft.Milpa.Server.WcfService.BusinessObjects">t=EwCgAa49BAAUdcc7Ta21slZda8sE9GInYkjRfuqAAFJh913naiYqRXhwp4INykAokezK77PZMZbccki2rUVcGM6iApglemodzHEo7Tg3aOAOfWbK2upbG3bPEvHi0DmlfDrMSUhTG7/z6QEIgkCMIlObhixIKLAxnBYQOf/kCNeV4nWWJRf4/hWiiEyogswdnkyRPmxepJXB5yS0R39xA2YAAAiYaPHDKmep4/AAkG1tI4kB7hTQjTlcGCSdQurmtw2yuGNZiQzP+QkoYW43rd0Z5EFAMJfHEwjQOIlvSC8qBiU6S7nGkl9gAhdKMwRi6t2PE/0ROkJrmLUZ5B8/v3pcYhNEA1/plZ7vx/+olxRzvqwH8LG3ygO7zpx7CxChtodm1uLDA1wQEpE3LyqxfyQgWauj3vYXdzPjyF7xsIHeytrWUisUhrB7jw7sMVQv+X14Fw8GXYrfxli5E/lWIx1UADS1ak53BdVk/aov1aBHLOMo0QhzvIfT8dxThBOEpQSjx76PElodDmN43r/A0jer5Jepsl3/RnXs98v4MAE=&amp;p=</UserLiveInternalId>
<UserLiveLoginId xmlns="http://schemas.datacontract.org/2004/07/Microsoft.Milpa.Server.WcfService.BusinessObjects">pengalaus66@hotmail-int.com</UserLiveLoginId>
</objUserRequest>
<listOfDumps><ContentDump><ContentId>1</ContentId><XmlContent>&lt;DoubtsStore xmlns="http://www.milpahost.com/DoubtsStore.xsd" /&gt;</XmlContent></ContentDump><ContentDump><ContentId>2</ContentId><XmlContent>&lt;AssessmentProficiency xmlns="http://www.milpahost.com/AssessmentProficiency.xsd"&gt; 
```

如何将此字符串存储为常量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:40:45.973

您是否尝试将字符串包含在 CDATA 中？

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="string_name">
<![CDATA[

    <?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope>
       ....
    </soap:Envelope>

]]>        
    </string>

</resources> 
```

# java - 如何在运行时将参数传递给进程

> ID：15000932
> 
> 赞同：2
> 
> 时间：2013-02-21T11:20:02.413
> 
> 标签：java, parameters, process, runtime.exec

我有从控制台获取输入的 C 代码，

```
main() {

 int value;
 printf("Enter a value");
 scanf("%d", &value);
 printf("the value is, %d", value);
 return;
} 
```

现在我编译并创建一个 .exe 文件。（比如说test.exe）

之后，我想从 java 代码中调用该可执行文件。

所以，我用

```
public class JavaTest {
static String s=null;
public static void main(String[] args) throws java.io.IOException, java.lang.InterruptedException {

    java.lang.Runtime rt = java.lang.Runtime.getRuntime();

    System.out.println("start");
    java.lang.Process p = rt.exec("test.exe");

    BufferedReader stdInput = new BufferedReader(new 
            InputStreamReader(p.getInputStream()));

    while ((s = stdInput.readLine()) != null) {
        System.out.println(s);
    }

    p.waitFor();

    System.out.println("done.");
 }
} 
```

显然，这是行不通的。我的问题是，如何在运行时将整数传递给进程？我不想将它作为命令行参数传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:24:07.577

在使用 Process 的 inputStream 之前使用 outputStream。将整数写入 output.Stream

# database - 程序使用什么来存储数据？（他们使用已知的数据库系统吗？）

> ID：15000934
> 
> 赞同：1
> 
> 时间：2013-02-21T11:20:07.827
> 
> 标签：database, storage

我在想——让我们来看看任何类型的电脑游戏，或者任何一般的程序。（Chrome、Skype、魔兽……）他们需要保存一些用户希望他们保存的东西。他们是如何做到的呢？他们是将其保存在一个简单的文本文件中，还是他们自己打包一个数据库系统（如 MySQL，...）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:27:09.097

这真的取决于你的需求。如果您只需要存储一些键值对，应用程序可以使用一个简单的文本文件（例如 *.ini 文件），但这是一个所有人都可以读取的纯文本文件。

应用程序当然也可以使用 MySql、MS SQL 等数据库。但是，如果您想分发您的应用程序，因为它们在服务器上作为单独的服务运行并且需要单独安装，这些都不是很方便。然后，还有像 Sqlite 这样的数据库，它也是一个 SQL 数据库，但它将所有内容都存储在一个文件中。您的应用程序只需要一种与此文件交互的方法。

另一种方法是序列化/反序列化包含您要存储的数据的对象。

还有其他存储数据的方法，例如 NoSQL 数据库。我个人还没有使用其中之一，但这里列出了其中的一些：http: [//nosql-database.org/](http://nosql-database.org/)

也可以使用 XML。

应用程序可以通过多种方式存储其数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:47:13.177

程序存储数据的方式实际上是没有尽头的。奥托：

*   自制存档格式：每个游戏公司似乎都有一些自己的（暴雪 MoPaQ，
*   XML 文件：通常用于简单的配置（Apple 的 plist 文件、Windows 应用程序配置、Skype 的用户首选项，...）
*   SQLite数据库：通常用于较大量的个人数据（Firefox：书签、历史等；iOS个人信息数据库等）
*   “在云端”在别人的数据库中（基本上所有的网络应用程序）
*   纯文本或简单文本格式（Windows .ini/.inf、Java MANIFEST.MF、YAML 等）
*   ...

一个程序可能会使用多种方法，具体取决于它们存储的内容。没有统一的解决方案，也没有适合每项任务的解决方案，因为每个系统都有权衡（人类可读性与打包效率，随机访问与顺序归档等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:27:28.067

很多程序使用 Sqlite 来存储数据（[http://www.sqlite.org](http://www.sqlite.org)）。Sqlite 是一个非常紧凑的跨平台 SQL 数据库。许多程序确实使用文本文件。

# c - 使用 Xlib func 在 GtkDrawingArea 上绘图

> ID：15000945
> 
> 赞同：0
> 
> 时间：2013-02-21T11:20:20.527
> 
> 标签：c, gtk, drawing, xlib, gdk

我有个问题。

我需要使用函数 Xlib（XDrawLine 等）在小部件类型 GtkDrawingArea 上绘制。

为什么？

我使用这个库，它用 Xlib 绘制。而且我需要在渲染函数drawSome（...）中传递任何参数（Display、Window、GC）。一切都很好。我获取这些参数（通过 gdk_x11_... ()、GdkDrawable、GdkGC）并使用获取的参数调用 drawSome (...)。

但是有问题 - 绘图并不总是完成。最大化窗口、拖动、调整 DrawingArea 大小等时不显示图像。仅在对顶部窗口进行异常操作时才显示图像。

然后我测试了函数 XDrawPoint/Line/Rectangle - 同样的问题。如果我们使用 gdk_draw_rectangle (...) - 一切正常。

下面是代码：

```
...
GtkDrawingArea* area;
...
int main (int argc, char *argv[])
{
   ...
   area=GTK_DRAWING_AREA(gtk_builder_get_object(builder,"area"));
   gtk_widget_realize (GTK_WIDGET(area));
   ...
   g_signal_connect (G_OBJECT(area), "expose_event", G_CALLBACK(expose_event_callback), NULL);
   ...
}
...
gboolean expose_event_callback (GtkWidget *widget, GdkEventExpose *event, gpointer data)
{
   Display *dpy = gdk_x11_drawable_get_xdisplay(widget->window);
   Window win =gdk_x11_drawable_get_xid(widget->window);
   GC gc = DefaultGC(dpy, DefaultScreen(dpy));

   //draw image on (0,0) in widget DrawingArea and a small black rectangle over image
   drawSome(dpy, win, gc, ...);
   XFillRectangle(dpy, win, gc, 0, 0, 10, 10);

   return FALSE;
}
... 
```

图像和一个黑色的小矩形仅在一种情况下显示：如果窗口移动到桌面之外并返回桌面 - 图像就会出现。在其他情况下，它不会显示。印象是另一个函数擦除了 DrawingArea。

谁能告诉我是什么问题？

我将感激不尽！

而且...对不起英语这么差！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-16T16:31:23.447

我认为您需要做的就是添加 XFlush(dpy); 在 XFillRectangle 命令之后。我写了一个简短的例程，它似乎工作。

```
#include <X11/Xlib.h> //-lX11
#include <gtk/gtk.h> //$$(pkg-config --cflags --libs gtk+-3.0) 
#include <gdk/gdkx.h>
void DrawOnWidget(GtkWidget *widget)
{
    GdkDisplay *gdk_dis = gdk_display_get_default();
    Display *dis = gdk_x11_display_get_xdisplay (gdk_dis);    
    GC gc = DefaultGC(dis, DefaultScreen(dis));
    GdkWindow *gdk_window = gtk_widget_get_window(widget);
    Window win = gdk_x11_window_get_xid(gdk_window);
    unsigned long valuemask = GCForeground;
    XGCValues vColor;
    vColor.foreground = 0x000000FF;
    XChangeGC(dis, gc, valuemask, &vColor);
    XFillRectangle(dis, win, gc, 0, 0, 100, 100);
    XFlush(dis);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:26:54.647

您将需要使用这些函数[X Window System Interaction](http://developer.gnome.org/gdk/stable/gdk-X-Window-System-Interaction.html)但请注意，但可能存在其他陷阱。我认为您还需要使用[gtk_widget_set_double_buffered为您的 GtkDrawingArea 禁用双缓冲](http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-set-double-buffered)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-17T20:42:08.927

这是我对这个问题的第二个答案......我的第一个答案可能解决了原始问题，所以我保持不变。虽然，当我第一次发现这个线程时我正在寻找的更通用的解决方案没有得到解决，但我决定也发布一个更通用的解决方案。

简而言之，我创建了一个 gtk 图像小部件，它可以独立显示或附加到其他小部件（如按钮）。然后我将图像小部件发送到绘图功能。在绘图函数中，所有的 xlib 参数都被查询，以便创建一个像素图作为 xlib 可绘制对象，这是所有 xlib 绘图的呈现位置。然后创建 GdkPixbuf，并将 Pixmap 像素复制到 GdkPixbuf，然后将其设置为图像小部件......

有一些注释行可用于更改行为，解释将留给读者确定。

应该注意的是，虽然使用 xlib 是可能的；cairo 似乎实施起来不那么繁琐。

```
#include <gtk/gtk.h> //$$(pkg-config --cflags --libs gtk+-3.0)
#include <gdk/gdkx.h>
#include <X11/Xlib.h> //-lX11

void DrawOnWidget(GtkWidget *widget, int width, int height)
{    
    GdkDisplay *gdk_dis = gdk_display_get_default();
    Display *dis = gdk_x11_display_get_xdisplay (gdk_dis);    
    GC gc = DefaultGC(dis, DefaultScreen(dis));

    GdkWindow *gdk_window = gtk_widget_get_window(widget);
    Window win = gdk_x11_window_get_xid(gdk_window);

    GdkPixbuf *pb = gdk_pixbuf_new(GDK_COLORSPACE_RGB, true, 8, width, height);
    //GdkPixbuf *pb = gtk_image_get_pixbuf((GtkImage *) widget);
    char *data = (char *) gdk_pixbuf_read_pixels((const GdkPixbuf *) pb); //RGB(A)
    //int width = gdk_pixbuf_get_width(pb);
    //int height = gdk_pixbuf_get_height(pb);
    int pb_depth = gdk_pixbuf_get_n_channels(pb);

    int depth  = DefaultDepth(dis, DefaultScreen(dis)) / 8;
    Pixmap pm = XCreatePixmap(dis, win, width, height, depth * 8);          

    unsigned long valuemask = GCForeground;
    XGCValues vColor;
    vColor.foreground = 0x00FF0000;
    XChangeGC(dis, gc, valuemask, &vColor);
    XFillRectangle(dis, pm, gc, 0, 0, width, height);
    XFlush(dis);

    XImage *ximage = XGetImage(dis, pm, 0, 0, width, height, AllPlanes, ZPixmap); //BGRX
    for(int i=0, j=0; i<width*height*pb_depth; i+=pb_depth, j+=4)
    {
        data[i+0] = ximage->data[j+2];
        data[i+1] = ximage->data[j+1];
        data[i+2] = ximage->data[j+0];
        if(pb_depth == 4) data[i+3] = 255;
    }

    gtk_image_set_from_pixbuf((GtkImage *) widget, pb);
    XFreePixmap(dis, pm);
    g_object_unref(pb);
    return;
}
static void destroy( GtkWidget *widget, gpointer data )
{
    gtk_main_quit();
}
static void test( GtkWidget *widget, gpointer data )
{
    DrawOnWidget((GtkWidget *) data, 200, 200);
}
void GTK_Win()
{
    GtkWidget *window, *grid;
    GtkWidget *button_Exit, *button_Test;    

    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    g_signal_connect (window, "destroy", G_CALLBACK (destroy), NULL);

    grid = gtk_grid_new ();
    gtk_container_add (GTK_CONTAINER (window), grid);

    button_Exit = gtk_button_new_with_label ("x");
    g_signal_connect (button_Exit, "clicked", G_CALLBACK (destroy), NULL);

    //GdkPixbuf *pixbuf = gdk_pixbuf_new(GDK_COLORSPACE_RGB, true, 8, 200, 200);
    //GtkWidget *image = gtk_image_new_from_pixbuf(pixbuf);  

    GtkWidget *image = gtk_image_new();

    button_Test = gtk_button_new_with_label ("Test");
    g_signal_connect (button_Test, "clicked", G_CALLBACK (test), image);
    //gtk_button_set_image((GtkButton *) button_Test, image);

    gtk_grid_attach (GTK_GRID (grid), button_Exit, 0, 0, 1, 1);
    gtk_grid_attach (GTK_GRID (grid), button_Test, 0, 1, 1, 1);
    gtk_grid_attach (GTK_GRID (grid), image, 0, 2, 1, 1);

    gtk_widget_show_all (window);
    gtk_main();   
}
int main(int argc, char** argv)
{
    gtk_init (&argc, &argv);  
    GTK_Win();
    return 0;
} 
```

# mysql - MySQL 查询 - 避免重复输入

> ID：15000947
> 
> 赞同：0
> 
> 时间：2013-02-21T11:20:30.460
> 
> 标签：mysql, database

用户数据库的用户名带有“？” 以名字结尾。例如用户名：“Alex？” 我没有删除它，而是尝试替换这个“？” 用“2”避免重复条目。问题是，即使最后有 2 个，仍然有重复的条目。我需要一个查询，它会自动将 2 更改为 3、4、5、6、7、8 或 9，直到不再存在重复条目。直到现在我都是手动执行此操作，但老实说，我更改了 200 多行，我猜有 1000 多行。

一些想法？

我使用的查询：

```
UPDATE `userdatabase`
SET `username` = replace(`username`, "?","2") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:42:39.313

i am not familiar mysql update syntax in detail, but if table "userdatabase" have unique id column may be possible something like that

```
replace(username, "?", (select count(*) from userdatabase db where db.username = username and db.id < id)) 
```

# string - 从单元格中获取字符串并使用它引用另一个工作表

> ID：15000950
> 
> 赞同：1
> 
> 时间：2013-02-21T11:20:41.907
> 
> 标签：string, excel

假设我在 excel 中使用 sheet2，我希望从另一张表中获取数据，比如 sheet1。所以现在我在 Sheet2 中写以下

```
='Sheet1'!A1 
```

然而，字符串`Sheet1`被写入特定单元格中`Sheet2`，例如`A2`。

我想知道是否可以编写如下内容：

```
='A2'!A1 
```

这将具有与以下相同的功能：

```
='Sheet1'!A1 
```

`sheet1`即从单元格中获取字符串`sheet2`并使用它来引用单元格`sheet1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:23:02.773

是的，使用以下`INDIRECT`功能：

```
=间接（A2＆“！A1”）

```

# android - 无法通过网络摄像头启动模拟器的前置摄像头显示错误。！

> ID：15000956
> 
> 赞同：0
> 
> 时间：2013-02-21T11:21:07.793
> 
> 标签：android, android-widget

在模拟器中单击“相机”图标时，会出现对话框，然后我单击“确定”，它显示错误：-“不幸的是，相机已停止”。

[在这里找到快照..！](https://picasaweb.google.com/114026936707194331750/February212013?authkey=Gv1sRgCK3EyMO6qeGzZg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:07:43.463

你在模拟器中运行的是哪个版本的android？任何高于 4.0 的版本都允许您将网络摄像头用作模拟器的摄像头。查看[这篇](https://stackoverflow.com/questions/3284583/camera-on-android-eclipse-emulator/8443673#8443673)文章了解更多详情。

# c++ - 使用 std::string 键从 boost::unordered::unordered_map 恢复值时出错

> ID：15000959
> 
> 赞同：0
> 
> 时间：2013-02-21T11:21:11.817
> 
> 标签：c++, boost, boost-regex, boost-unordered

我将我从正则表达式匹配中获得的结果存储在 unordered_map 中。std::cout 子匹配 m[1].str() 和 m[2].str() 正确显示对键值。

尽管当我将它们存储在 unordered_map 中时，我总是会收到一个异常报告，报告找不到密钥。这是代码：

```
boost::unordered::unordered_map<std::string, std::string>
loadConfigFile(std::string pathToConfFile) throw(std::string){
    std::fstream fs;
    fs.open(pathToConfFile.c_str());
    if(!fs)
        throw std::string("Cannot read config file.");

    boost::unordered::unordered_map<std::string, std::string> variables;

    while(!fs.eof())
    {
        std::string line;
        std::getline(fs, line);
        //std::cout << line << std::endl;
        boost::regex e("^(.+)\\s*=\\s*(.+)");
        boost::smatch m; //This creates a boost::match_results
        if(boost::regex_match(line, m, e)){
            std::cout << m[1].str() << " " << m[2].str() << std::endl;
            variables[m[1].str()] = m[2].str();
        }
    }
    std::cout << variables.at(std::string("DEPOT_PATH")) << std::endl; //Here I get the exception

    return variables;
} 
```

DEPOT_PATH 是配置文件中“变量”的名称。std::cout << m[1].str() 完美显示它，但在 unordered_map 中找不到。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:28:45.933

最有可能的是，您放入无序映射中的键包含空格（在输出时您看不到），因此以后找不到。

在您的 regex`^(.+)\\s*=\\s*(.+)`中，第一个`(.+)`将贪婪地匹配尽可能多的字符，包括前导和尾随空格。以下`\\s*`它将始终匹配一个空字符串。为防止这种情况，您可以`(\\S+)`仅使用非空白，或使用非贪婪`(.+?)`。

顺便说一句，`while (!fs.eof())`是错误的。改为使用`while (std::getline(fs, line)) {...}`。

# javascript - Javascript 工具提示定位

> ID：15000960
> 
> 赞同：0
> 
> 时间：2013-02-21T11:21:12.123
> 
> 标签：javascript, tooltip

我在我的网站上集成了一个工具提示。我面临着从顶部定位的问题。

下面是我使用的脚本。

```
var tooltip = function () {
var id = 'tt';
var top = 12;
var left = 3;
var maxw = 300;
var speed = 10;
var timer = 20;
var endalpha = 95;
var alpha = 0;
var tt, t, c, b, h;
var ie = document.all ? true : false;
return {
    show: function (v, w) {
        //debugger
        if (tt == null) {
            tt = document.createElement('div');
            tt.setAttribute('id', id);
            t = document.createElement('div');
            t.setAttribute('id', id + 'top');
            c = document.createElement('div');
            c.setAttribute('id', id + 'cont');
            b = document.createElement('div');
            b.setAttribute('id', id + 'bot');
            tt.appendChild(t);
            tt.appendChild(c);
            tt.appendChild(b);
            document.body.appendChild(tt);
            tt.style.opacity = 0;
            tt.style.filter = 'alpha(opacity=0)';
            document.onmousemove = this.pos;
        }
        tt.style.display = 'block';
        var imagethemefolder;
        if (window.theForm.ctl00$ddlSiteSkin) {
            imagethemefolder = window.theForm.ctl00$ddlSiteSkin.value;
        }
        else {
            imagethemefolder = window.parent.theForm.ctl00$ddlSiteSkin.value;
        }
        if (v == 'Save') {
            v = '<img src="../Styles/Themes/' + imagethemefolder + '/Images/saveTooltip.png" class="ttImgPlacement" alt="" /><b class="ttTitle">Save</b><span class="ttContent">Select this option to Save the Records in database</span></strong>'
        }

        c.innerHTML = v;
        //tt.style.width = w ? w + 'px' : 'auto';
        if (!w && ie) {
            t.style.display = 'none';
            b.style.display = 'none';
            //tt.style.width = tt.offsetWidth;
            t.style.display = 'block';
            b.style.display = 'block';
        }
        //if (tt.offsetWidth > maxw) {
        tt.style.width = maxw + 'px'
        //}
        h = parseInt(tt.offsetHeight) + top;
        clearInterval(tt.timer);
        tt.timer = setInterval(function () { tooltip.fade(1) }, timer);
    },
    pos: function (e) {
        //debugger
        var u = ie ? event.clientY + document.documentElement.scrollTop : e.pageY;
        var l = ie ? event.clientX + document.documentElement.scrollLeft : e.pageX;

        if (ie) {
            if ((event.screenY - event.offsetY) > 100) {
                var ci = Math.ceil(event.screenY - event.offsetY);
                if (GetRadWindow()) {
                    //var height = document.parentWindow.GetRadWindow().get_height()
                    ci = 60;
                }

                var restval = ci % 100;
                restval = restval.roundTo(10) / 20;
                if (restval >= 1) {
                    restval = restval - 1;
                }
                ci = ci.roundToLess(100);
                tt.style.top = (ci + (20 * restval)) + 'px';

            }
            else {
                tt.style.top = 50 + 'px';
            }
        }
        else if (navigator.userAgent.indexOf('Firefox') != -1) {
            //debugger
            if ((e.screenY - e.layerY) > 100) {
                var ci = Math.ceil(e.screenY - e.layerY);
                if (GetRadWindow()) {
                    ci = 60;
                }
                var restval = ci % 100;
                restval = restval.roundTo(10) / 20;
                if (restval >= 1) {
                    restval = restval - 1;
                }
                ci = ci.roundToLess(100);
                tt.style.top = (ci + (20 * restval)) + 'px';
            }
            else {
                tt.style.top = 50 + 'px';
            }
        }
        else {
            if ((e.screenY) > 100) {
                //debugger
                var ci = Math.ceil(e.screenY);
                if (GetRadWindow()) {
                    //debugger                   
                    ci = 80;
                }
                var restval = ci % 100;
                restval = restval.roundTo(10) / 20;
                if (restval >= 2) {
                    restval = restval - 2;
                }
                ci = ci.roundToLess(100);
                tt.style.top = (ci + (20 * restval)) + 'px';
            }
            else {
                tt.style.top = 50 + 'px';
            }
        }

        //tt.style.top = ie ? (event.screenY - event.offsetY - top) + 'px' : (e.screenY - (e.layerY - top + 5)) + 'px';

        if (l > (document.documentElement.offsetWidth - 305)) {
            tt.style.left = (l + left - 300) + 'px';
        }
        else {
            tt.style.left = (l + left) + 'px';
        }
    },
    fade: function (d) {
        var a = alpha;
        if ((a != endalpha && d == 1) || (a != 0 && d == -1)) {
            var i = speed;
            if (endalpha - a < speed && d == 1) {
                i = endalpha - a;
            } else if (alpha < speed && d == -1) {
                i = a;
            }
            alpha = a + (i * d);
            tt.style.opacity = alpha * .01;
            tt.style.filter = 'alpha(opacity=' + alpha + ')';
        } else {
            clearInterval(tt.timer);
            if (d == -1) { tt.style.display = 'none' }
        }
    },
    hide: function () {
        clearInterval(tt.timer);
        tt.timer = setInterval(function () { tooltip.fade(-1) }, timer);
    }
};} (); 
```

我对此做了很多排列和组合，并使它几乎可以正常工作。唯一的问题是顶部位置没有在浏览器中正确显示。

我只为那部分感到震惊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T06:31:26.140

您可以使用以下脚本。

```
<script type="text/javascript">
$(document).ready(function() {
$('#id').qtip({
        content: 'New Request Alt+N',
        position: {
            corner: {
                target: 'topRight',
                tooltip: 'bottomLeft'
            }
        },
        show: 'mouseover',
        hide: 'mouseout',
        style: {
            background: '#A2D959',
            color: 'black',`enter code here`
            textAlign: 'center',
            border: {
                radius: 4,
                color: '#A2D959'
            },
            tip: 'bottomLeft'
        }
    });
});
</script> 
```

更多详情： [http ://codersshop.blogspot.in/2013/06/tooltip-implementation-you-can-download.html](http://codersshop.blogspot.in/2013/06/tooltip-implementation-you-can-download.html)

# android - 在Android中处理多个通知

> ID：15000963
> 
> 赞同：0
> 
> 时间：2013-02-21T11:21:18.390
> 
> 标签：android, android-layout, notifications

我有`ArrayList`从数据库中查询的对象，并且我想通知我的所有对象以在用户触摸通知时将其删除。

我将我的对象的每个 id 放入意图并开始意图删除它，但问题是当我触摸通知时，第一项的 id 是正确的，但其他的不是它仍然是第一个 id。

这是代码

```
for(int i=0;i<listItem.size();i++){
        String message = "Remove \""+listItem.get(i).getName()+"\" "+listItem.get(i).getID();
        intent.putExtra("id", listItem.get(i).getID());
        String s = intent.getExtras().getString("ID");
        Toast.makeText(getApplicationContext(),"id : "+s, Toast.LENGTH_SHORT).show();
        Notification notification = new Notification(R.drawable.icon_noti,message,new Date().getTime());
        PendingIntent pI = PendingIntent.getActivity(getApplicationContext(), 1, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        notification.flags = Notification.FLAG_AUTO_CANCEL;
        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        notification.setLatestEventInfo(getApplicationContext(), message, "Touch to remove" , pI);
        notification.sound = soundUri;
        notificationManager.notify(i,notification);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:23:57.483

发生这种情况是因为当你打电话

```
PendingIntent pI = PendingIntent.getActivity(getApplicationContext(), 1, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

您提供了一个值为“1”的静态请求 ID，因此该方法`PendingIntent`每次都返回相同的值。要为每个项目创建不同`PendingIntents`的项目，请为每个呼叫提供唯一的请求 ID。希望这可以帮助。

# ios - 关闭弹出框时禁用 UIBarButtonItem

> ID：15000969
> 
> 赞同：0
> 
> 时间：2013-02-21T11:21:25.040
> 
> 标签：ios, objective-c, ipad

我是 iOS 开发的新手，我试图在点击 barButtomItem 时显示一个弹出框。到目前为止，我有这个：

```
-(IBAction)shareButtonPressed :(id)sender{    
    UIViewController *popoverViewController = [[UIViewController alloc] initWithNibName:@"ShareOptionsViewController" bundle:nil];
    popoverViewController.contentSizeForViewInPopover = CGSizeMake(319, 422);

    self.popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverViewController];
    [self.popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny  animated:NO];
} 
```

此代码有效，当我点击正确的按钮时，会显示弹出框。问题是当显示 popOver 时，如果我再次点击该按钮，应用程序就会崩溃。我知道是因为它试图分配一个已经创建的变量。我认为解决方案应该是在弹出框加载时禁用按钮，但我不知道如何在弹出框被解除后再次激活。

我对吗？popOver 关闭时如何启用按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:38:23.763

首先，您应该禁用 shareButtonPressed 方法中的按钮。

```
-(IBAction)shareButtonPressed :(id)sender{    
UIViewController *popoverViewController = [[UIViewController alloc] initWithNibName:@"ShareOptionsViewController" bundle:nil];
popoverViewController.contentSizeForViewInPopover = CGSizeMake(319, 422);

self.popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverViewController];
[self.myButton setEnabled:NO];
[self.popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny  animated:NO];
} 
```

然后你让你的视图控制器符合 UIPopoverControllerDelegate 协议。之后，您实现 popoverControllerDidDismissPopover 方法。

```
-(void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
if (!self.myButton.enabled) // Just to make sure the button is disabled.
    [self.myButton setEnabled:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:27:24.167

只需检查实例是否已经创建。

```
-(IBAction)shareButtonPressed:(id)sender
{
    if (self.popoverController == nil) {
        self.popoverController = alloc/init...;
        [_popoverController present...];
    } else {
        if (self.popoverController.popoverVisible)
            [self.popoverController dismissPopoverAnimated:YES];
        self.popoverController = nil;
    }
} 
```

有可能会在动画完成之前被垃圾收集，从而产生无效的用户体验。然后，如果可能的话，我会在 viewDidLoad 或 contructor 等中预先创建实例，然后根据需要显示和关闭，检查可见属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:31:46.990

看看这个“事件-->责任”列表：

1) 按下按钮 --> MainViewController - IBAction

2) 显示弹出框 --> MainViewController - IBAction

3) 按钮禁用 --> MainViewController - IBAction

4) Popover dissmis --> popoverDelegate - popoverControllerDidDismissPopover

5) 按钮启用 --> popoverDelegate - popoverControllerDidDismissPopover

因此，如果您的弹出框的委托是 MainViewController，您将可以访问该按钮，如果它是一个不同的类，您可能必须设置一个协议才能重新启用该按钮。

如果您需要任何进一步的解释，请告诉我...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:34:35.317

您可以检测弹出框是否显示和关闭：

```
- (IBAction)shareButtonPressed :(id)sender{
    if (self.popoverController) {
        [self.popoverController dismissPopoverAnimated:YES];
        self.popoverController = nil;
    } else {
        UIViewController *popoverViewController = [[UIViewController alloc] initWithNibName:@"ShareOptionsViewController" bundle:nil];
        popoverViewController.contentSizeForViewInPopover = CGSizeMake(319, 422);

        self.popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverViewController];
        [self.popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny  animated:NO];
    }
} 
```

或者如果您只想禁用该按钮：

```
- (IBAction)shareButtonPressed :(id)sender{
    ...
    UIButton *button = (UIButton *)sender;
    button.enabled = NO;
} 
```

但在这种情况下，您必须检测用户何时关闭`popOver`以再次启用该按钮。您可以在课堂上采用`UIPopoverController`委托（[参见文档）来做到这一点](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverControllerDelegate_protocol/Reference/Reference.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T11:35:15.733

只需像这样修改您的代码...

```
-(IBAction)shareButtonPressed :(id)sender{    
        UIViewController *popoverViewController = [[UIViewController alloc] initWithNibName:@"ShareOptionsViewController" bundle:nil];
        popoverViewController.contentSizeForViewInPopover = CGSizeMake(319, 422);

         if(self.popoverController)
          {
            [self.popovercontroller dismissPopoverAnimated:YES];
            self.popovercontroller = nil;
           }   
        self.popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverViewController];
        [self.popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny  animated:NO];
    } 
```

# ruby-on-rails - 使用 Omniauth 进行设计。无法进行身份验证，因为“凭据无效”。”

> ID：15000978
> 
> 赞同：2
> 
> 时间：2013-02-21T11:21:44.263
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, omniauth

我在将 Devise 与 Omniauth 提供程序集成时遇到问题。我在外部服务器上设置了 Doorkeeper，但是当它返回到我使用 pow 设置的本地应用程序时，它返回了无效的凭据。

为了调试，我现在决定只关注 twitter 身份验证——这在我的本地 rails 应用程序中似乎也失败了。

我一直在关注这个 railscast：[http:](http://railscasts.com/episodes/235-devise-and-omniauth-revised) //railscasts.com/episodes/235-devise-and-omniauth-revised （仍然没有运气） - 因为我试图与 twitter 集成但仍然没有运气。

我创建了一个 Omniauth 初始化程序：

> Rails.application.config.middleware.use OmniAuth::Builder do provider :twitter, "my twitter app id", "My Twitter secret" end

在我的设计初始化程序中：

> config.omniauth :twitter, ENV["TWITTER_CONSUMER_KEY"], ENV["TWITTER_CONSUMER_SECRET"]

我已经告诉配置的设备

> :omniauthable

我的应用程序成功进入 twitter 进行身份验证，但是当它返回时.. 我的本地应用程序上的日志如下：

> OmniauthCallbacksController#failure 处理为 HTML 参数：{"oauth_token"=>"A VALID AUTH TOKEN", "oauth_verifier"=>"A VALID TOKEN"} 重定向到我的本地 URL

有人对为什么会发生这种情况有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:01:15.397

确保在您的设计设置结束时有一个范围

`config.omniauth :twitter, 'ID', 'SECRET', {:scope => 'offline_access,email'}`

# inno-setup - 开始菜单文件夹作为子目录 - Inno Setup

> ID：15000979
> 
> 赞同：5
> 
> 时间：2013-02-21T11:21:44.710
> 
> 标签：inno-setup

我想在开始菜单中为我的程序添加一个快捷方式，如下所示：

```
MyAppPublisher\MyAppName\MyAppName 
```

我的脚本中有这个：

```
DefaultGroupName={#MyAppPublisher}
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}" 
```

但开始菜单文件夹始终是：

```
MyAppName\MyAppName 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T13:19:34.023

`Name`就像在部分条目的参数中指定此路径一样简单[`[Icons]`](http://jrsoftware.org/ishelp/topic_iconssection.htm)。您当前的脚本会创建一个快捷方式，例如`MyAppPublisher\MyAppName`，这将满足您的需要：

```
#define MyAppName "MyAppName"
#define MyAppExeName "MyProg.exe"
#define MyAppPublisher "MyAppPublisher"

[Setup]
AppName={#MyAppName}
AppVersion=1.5
DefaultDirName={pf}\My Program
DefaultGroupName={#MyAppPublisher}
OutputDir=userdocs:Inno Setup Examples Output

[Files]
Source: "{#MyAppExeName}"; DestDir: "{app}"

[Icons]
; notice the full path to the created shortcut, {group} is taken from the Select
; Start Menu Folder page edit box (if shown), which is by default taken from the
; DefaultGroupName directive value; this start menu folder path is then followed
; by the tail of the shortcut path
Name: "{group}\{#MyAppName}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T15:22:52.790

如果您希望组位于子文件夹中，则需要指定子文件夹。

最好的方法是将其附加到`DefaultGroupName`指令的末尾，这将在设置向导中显示正确的信息，并允许用户根据需要将其完全更改为单个文件夹或其他位置。

```
DefaultGroupName={#MyAppPublisher}\{#MyAppName} 
```

请注意，Windows 8 中的开始菜单不是分层的，因此无论如何都不会看到任何嵌套。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:33:15.617

找到了，我在问题中建议的脚本是正确的，出于某种原因，我需要为脚本生成一个新的 GUID 才能使更改生效

# android - Google Maps V2 上的 setContentView 错误

> ID：15000980
> 
> 赞同：1
> 
> 时间：2013-02-21T11:21:49.520
> 
> 标签：android, maps

我正在尝试在我的 android 应用程序中添加地图。我遵循了所有必要的先决条件。

所以我做了一个简单的活动来测试它。

```
public class SpaineMapActivity extends Activity {
    static final LatLng HAMBURG = new LatLng(53.558, 9.927);
    private GoogleMap map;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));
        map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
    }
} 
```

并使用 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

它工作正常。没问题。但是当我尝试将它集成到我的其他应用程序时，当然会加载所有库。但即使只是在 setContentView() 部分，我已经得到了错误。两种布局都是一样的。

```
public class act_map extends FragmentActivity {
    static final LatLng HAMBURG = new LatLng(53.558, 9.927);
    private GoogleMap map;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lyt_map);

        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
        .getMap();
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));
        map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
    }
} 
```

我收到此错误

```
02-21 19:19:25.650: E/AndroidRuntime(23097): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
02-21 19:19:25.650: E/AndroidRuntime(23097):    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:269)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:257)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.app.Activity.setContentView(Activity.java:1867)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at dev.foogle.act_map.onCreate(act_map.java:21)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.app.Activity.performCreate(Activity.java:5008)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2215)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.app.ActivityThread.access$600(ActivityThread.java:145)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1211)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.os.Looper.loop(Looper.java:137)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at android.app.ActivityThread.main(ActivityThread.java:4978)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at java.lang.reflect.Method.invoke(Method.java:511)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
02-21 19:19:25.650: E/AndroidRuntime(23097):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:59:23.167

> 当然加载了所有库

您的错误表明在您的项目中找不到 Play Services 库项目的 JAR。确保您已将 Play Services 库项目附加到您的新应用程序（例如，通过 Eclipse 中的项目 > 属性 > Android）。

# c# - 单击 Cellcontent 后将数据行加载到文本框中

> ID：15000982
> 
> 赞同：0
> 
> 时间：2013-02-21T11:21:56.637
> 
> 标签：c#, winforms, datagridview

我有一个问题，我已经搜索了几个小时没有运气。

我想要实现的是以下。单击 a 中的单元格后`datagridview`，我希望另一个选项卡显示并将行*（客户编号支付金额等数据）*加载到几个`textboxes`. 有人对此功能有一些例子或一些好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:55:53.697

根据您的信息建议下一种方法：

为 datagridview 事件创建一个事件处理程序`CellDoubleClick`（考虑使用 DoubleClick - 你可以使用你想要的）

```
this.datagridview1.CellDoubleClick += dataGridView1_CellDoubleClick; 
```

然后创建一个附加功能

```
void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
    //here we write code for copying rowdata in your textboxes
    DataGridViewRow dgvr = this.dataGridView1.CurrentRow;
    //if datagridview have a predefined columns then using those objects as:
    this.textboxCustomer.text = dgvr.Cells[this.datagridview1_ColCustomer.Name].Value.ToString();
    this.textboxPay.text = dgvr.Cells[this.datagridview1_ColPay.Name].Value.ToString();
} 
```

# html - 固定页眉和页脚

> ID：15000985
> 
> 赞同：0
> 
> 时间：2013-02-21T11:21:59.297
> 
> 标签：html, css

我试图让固定的页眉和页脚始终在屏幕/页面的底部可见。

如果标题不固定，下面的主要代码可以正常工作。如果在 css 中启用这个小部分，页脚就会搞砸。如果我不这样做，那么标题就不会得到修复。

```
/*
width: 100%;
position: fixed;
top: 0px;
z-index: 1;
*/ 
```

有没有机会帮助修改模式？

示例看起来： [1](https://stackoverflow.com/questions/643879/css-to-make-html-page-footer-stay-at-bottom-of-the-page-with-a-minimum-height)、[2](http://www.lwis.net/journal/2008/02/08/pure-css-sticky-footer/)、[3](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)和其他一些。

提前致谢

CSS：

```
*
{
    margin: 0px;
    padding: 0px;
}
html, body
{
    height: 100%;
    font-family: Verdana,Geneva,'DejaVu Sans',sans-serif;
    font-size: 12px;
    color: #333333;
    background: #BABABA;
}
#container 
{
    min-height: 100%;
    position: relative;
}
#header
{
    display: block;
    /*
    width: 100%;
    position: fixed;
    top: 0px;
    z-index: 1;
    */
    padding: 10px 10px 11px 10px;
    color: #FFFFFF;
    background: #000000;
}
#body
{
    display: block;
    margin-top: 40px;
    padding: 10px;
    padding-bottom: 40px;
    /*background: #ff0000;*/
}
#footer
{
    display: block;
    position: absolute;
    bottom: 0px;
    width: 100%;
    height: 20px;
    border-top: 1px solid #EEEEEE;
    padding: 9px 0px 3px 0px;
    text-align: center;
    font-size: 10px;
    text-align: center;
    color: #777777;
    background: #000000;
} 
```

HTML：

```
<div id="container">
    <div id="header">
        HEADER
    </div>
    <div id="body">
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
        <p>Hello</p><br />
    </div>
    <div id="footer">
        FOOTER
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:31:25.250

所以，你不希望你的页脚被固定，但它不接触屏幕底部？

如果这是你的问题，你应该这样做：

```
#header{
    height: 40px;
}

#container{
    padding-top: 40px;
} 
```

如果您希望页脚显示在页面底部，您只需将其位置设置为固定

```
#footer{
    position: fixed;
} 
```

# java - 通过序列化复制多维数组

> ID：15000988
> 
> 赞同：0
> 
> 时间：2013-02-21T11:22:03.973
> 
> 标签：java, multidimensional-array, deep-copy

我打算使用以下类通过序列化复制一个三维数组：

```
public class Serializer {

    public byte[] serialize(Object obj) throws IOException {
        ByteArrayOutputStream b = new ByteArrayOutputStream();
        ObjectOutputStream o = new ObjectOutputStream(b);
        o.writeObject(obj);
        return b.toByteArray();
    }

    public Object deserialize(byte[] bytes) throws IOException,
            ClassNotFoundException {
        ByteArrayInputStream b = new ByteArrayInputStream(bytes);
        ObjectInputStream o = new ObjectInputStream(b);
        return o.readObject();
    }
} 
```

然后，在我的主要代码中，我写了这个：

```
int array[][][] = new int[param][][];
Serializer s = new Serializer();
byte [] b = s.serialize(array);
Object arrayCopy = s.deserialize(b); 
```

但是，我确实在最后一行收到一条错误消息：“未处理的异常类型 ClassNotFoundException”

另外，我不知道如何将 Object arrayCopy 转换为 int[param][][]，这是我的最终目标。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:10:41.653

> 但是，我确实在最后一行收到一条错误消息：“未处理的异常类型 ClassNotFoundException”

您的`deserialize`方法会引发两个已检查异常（IOException、ClassNotFoundException），必须在使用 try-catch 块调用代码时对其进行处理。

> 另外，我不知道如何将 Object arrayCopy 转换为 int[param][][]，这是我的最终目标

您可以通过在表达式的 RHS 前面加上所需类型 (int[][][]) 来转换对象。请注意，在您的情况下，这是一个*不安全*的强制转换，因为您真的不知道从该`deserialize`方法返回的对象的类型。

结合异常处理和强制转换，您的主代码应该如下所示：

```
try {
    int array[][][] = new int[param][][];
    Serializer s = new Serializer();
    byte [] b = s.serialize(array);
    Object arrayCopy = (int[][][]) s.deserialize(b);
} catch(IOException ioe) {
    // ... handle this
} catch(ClassNotFoundException cnfe) {
    // ... handle this
} 
```

* * *

## 安全（呃）铸造

如果您想避免不安全的强制转换，您可以使用泛型来指示`deserialize`方法的预期返回类型。您还需要在方法本身内进行验证，反序列化对象实际上是所需的类类型。像这样的东西：

```
public class Serializer {

    public <T> byte[] serialize(T obj) throws IOException {
        ByteArrayOutputStream b = new ByteArrayOutputStream();
        ObjectOutputStream o = new ObjectOutputStream(b);
        o.writeObject(obj);
        return b.toByteArray();
    }

    public <T> T deserialize(Class<T> clazz, byte[] bytes) throws IOException,
            ClassNotFoundException {
        ByteArrayInputStream b = new ByteArrayInputStream(bytes);
        ObjectInputStream o = new ObjectInputStream(b);
        final Object raw = o.readObject();
        if (raw.getClass().isAssignableFrom(clazz))
            return clazz.cast(raw);
        else
            throw new IllegalArgumentException(
                    "Byte data does not represent a class of type " + clazz);
    }
} 
```

请注意，该方法的更改`deserialize`是：

*   添加（方法级别）泛型参数`T`
*   添加一个附加参数 ( `Class<T>`)，表示要返回的预期类型
*   在方法中添加验证以确认反序列化的对象实际上是所需类的实例
*   添加非法参数异常，在反序列化对象实际上***不是***所需类的实例的情况下

如果您使用这些修改，您还应该在主代码中处理`IllegalArgumentException`.