# StackOverflow 问答 15185000-15185999

# sql-server - 在哪里可以找到 SQL Server ScriptDom 解析器生成的 T-SQL Dom？

> ID：15185003
> 
> 赞同：4
> 
> 时间：2013-03-03T11:05:58.860
> 
> 标签：sql-server, tsql, parsing, dom, sql-server-data-tools

我正在使用*Microsoft.SqlServer.TransactSql.ScriptDom*库。我找到了导航可以从 TSqlFragment 获得的所有令牌的方法：

```
TSql100Parser parser = new TSql100Parser(false);

TSqlFragment fragment;

using (StreamReader sr = new StreamReader(myStream))
{
    fragment = parser.Parse(sr, out parseErrors);
}

foreach (TSqlParserToken token in fragment.ScriptTokenStream)
{
    ...
} 
```

我还找到了 TSqlFragmentVisitor 类，所以我想 ScriptDom 库从可以导航的 TSqlFragment 生成 T-SQL DOM。但是我找不到这样做的方法...

你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-03T15:03:30.210

如果您的目标是分析解析器获得的结果语法树，您可以参考[此](http://blogs.msdn.com/b/arvindsh/archive/2013/04/04/using-the-transactsql-scriptdom-parser-to-get-statement-counts.aspx)链接。当您获得解析树的根节点时，`fragment = parser.Parse(sr, out parseErrors)`您可以使用访问者来导航树，方法是扩展`TSqlFragmentVisitor`链接中显示的类。有关 ScriptDom 可用类的完整参考，您可以[在此处查看](http://technet.microsoft.com/en-us/library/microsoft.sqlserver.transactsql.scriptdom.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T14:54:57.193

我被引导到 GitHub 上 Gert Drapers 分享的一些项目：

[https://github.com/gertd/sqlscriptdom](https://github.com/gertd/sqlscriptdom)

这里有一个关于如何通过访客导航片段的示例。

问候。

# c++ - 如何在 Python + SWIG 中接收引用和指针参数？

> ID：15185010
> 
> 赞同：8
> 
> 时间：2013-03-03T11:06:44.040
> 
> 标签：c++, python, swig

我有一个 C++ 函数，其中给出了两个参数，如下例所示。

```
void func(int& n, char** data)
{
  *data = other_func1(); // returns a char array
  n = other_func2(); // returns the length of the array
} 
```

我可以在 C 或 C++ 中轻松使用此函数，但我不知道如何从使用 SWIG 生成的 Python 模块中调用它。我想我将不得不编写另一个返回例如 std::pair 的 C++ 函数。但如果可能的话，我想知道 Python 方面的解决方法。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T08:35:07.113

对于相当多的情况（例如`int *n`），编写以下内容就足够了：

```
%apply int *OUTPUT { int *n }; 
```

它使用 SWIG 为输出参数提供的一些默认类型映射。（也有类似的 INOUT 和 INPUT）。

在这种情况下，虽然我们不完全匹配任何预定义的情况，所以我们需要手动做同样的事情。这基本上是每个参数两个类型映射 - 一个输入类型映射，它为实际函数调用创建一些临时的东西，并使用它而不是一些真实的输入，以及一个将结果从临时返回到 Python 的 argout。在 Python 的情况下，使用元组返回多个参数是有意义的。

一个例子：

```
%module test

%typemap(in,numinputs=0) int& n (int temp) "$1 = &temp;"
%typemap(in,numinputs=0) char **data (char *temp) "$1 = &temp;"

%typemap(argout) char **data {
  %append_output(PyString_FromString(*$1));
}

%typemap(argout) int& n {
  %append_output(PyInt_FromLong(*$1));
}

%inline %{
  void foo(int& n, char **data) {
    static char str[] = "Hello world";
    *data = str;
    n = sizeof str;
  }
%} 
```

注意事项：

临时变量 ( `int temp`, `char *temp`) 会自动重命名，从而停止明显的名称冲突。是一个 SWIG 宏，它扩展为在 Python`%append_output`的元组后面添加一些东西。`$result`如果您的函数`foo`是动态分配的内存，您需要处理它。如果 in 类型映射需要动态分配内存，则 freearg 类型映射通常很有用。

这足以让我像这样编译和运行它：

```
import test

len,str = test.foo()

print len
print str 
```

# mongodb - windows中的mongodb fork

> ID：15185012
> 
> 赞同：24
> 
> 时间：2013-03-03T11:07:20.703
> 
> 标签：mongodb

我在教程中看到他们`--fork`用作 mongod 的参数。但是当我尝试这样做时，它会显示 unknown option `--fork`。那么如何`--fork`在windows上使用mongodb呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-09-07T21:13:22.320

您可以在命令之前写入`start /b`（/b - 表示在没有新 cmd 窗口的情况下执行）`mongod`。它将`mongod`异步启动您的命令并释放控制台提示符。因此，具有类似的效果，如`fork`.

它可以在 .bat 脚本中使用，例如，启动副本集：

> 开始 /b mongod --replSet m101 --logpath "1.log" --dbpath data\rs1 --port 27017 --smallfiles
> 
> 开始 /b mongod --replSet m101 --logpath "2.log" --dbpath data\rs2 --port 27018 --smallfiles
> 
> 开始 /b mongod --replSet m101 --logpath "3.log" --dbpath data\rs3 --port 27019 --smallfiles
> 
> ...

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-03T11:20:16.183

`--fork`实际上是 Linux 命令而不是 Windows 或`mongod`命令。我不相信 Windows 上也存在同样的情况。

Linux 在这里有两个原语，`fork`但是`exec`Windows 真正有的是`createProcess`有效的`fork`-and- `exec`。

设置服务并在`fork`模式下运行它是不一样的，服务更像是一个`init.d`脚本，但这是目前唯一的方法。

Cygwin 可以非常缓慢地在 Windows 上模拟 fork，如下所述：[Windows 与 fork() 最接近的是什么？](https://stackoverflow.com/questions/985281/what-is-the-closest-thing-windows-has-to-fork)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-27T15:49:01.050

**该`--fork`选项不适用于 MongoDB for Windows 用户**，您必须在不同窗口中执行每个 mongod 命令：

```
mongod --replSet m101 --logpath "1.log" --dbpath /data/rs1 --port 27017 --smallfiles --oplogSize 64  

mongod --replSet m101 --logpath "2.log" --dbpath /data/rs2 --port 27018 --smallfiles --oplogSize 64 

mongod --replSet m101 --logpath "3.log" --dbpath /data/rs3 --port 27019 --smallfiles --oplogSize 64 
```

用于类 Unix 平台的 MongoDB 选项**--fork**

> 为将进程运行到后台的 mongod 启用守护程序模式。这是生产和类似生产环境中的正常操作模式，但可能不适合测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T11:14:39.253

Windows 不支持`fork`类似 Unix 的机制，Windows 上最接近的等价物是将 mongod 作为服务运行，如[Mongo 手册中所述](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#mongodb-as-a-windows-service)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-17T07:10:06.160

在**Windows**中，没有**fork**命令起作用，因为可以使用以下命令将 mongodb 用作服务：启动服务

```
net start mongodb 
```

停止服务：打开 cmd 并使用以下命令

```
net stop mongodb 
```

[![在此处输入图像描述](../Images/4691e35bb33f11ae0faf6237c68cd46e.png)](https://i.stack.imgur.com/goblM.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-26T01:35:40.183

命令 --fork 仅适用于 Linux/Unix。如果您需要 --fork 在后台运行 mongod，在 Windows 上可以通过将 mongod 作为服务安装来实现。

使用 mongod --install 选项安装 mongodb 服务时，需要 --dbpath 和 --logpath。就我而言，我需要使用管理员命令控制台来安装该服务。

例如：

```
mongod --dbpath=C:\mongodb\data --logpath=C:\mongodb\data\log\service.log --install 
```

然后浏览日志文件以查看服务名称和其他信息，包括任何可能的错误。

```
2014-06-25T18:21:14.245-0700 Trying to install Windows service 'MongoDB'
2014-06-25T18:21:14.253-0700 Service 'MongoDB' (MongoDB) installed with command line 'C:\mongodb-win32-x86_64-2008plus-2.6.1\bin\mongod.exe --dbpath=C:\mongodb\data --logpath=C:\mongodb\data\log\service.log --service'
2014-06-25T18:21:14.254-0700 Service can be started from the command line with 'net start MongoDB' 
```

默认服务名称是“MongoDB”。您可以在安装服务时使用 --serviceName 选项命名服务名称。

然后使用 net use 启动服务。

```
net use MongoDB 
```

注意安装服务时，--dbpath 和--log 最好使用绝对路径。否则服务可能无法启动。此处讨论了详细信息：[无法将 MongoDB 作为服务启动](https://stackoverflow.com/questions/4661670/cannot-start-mongodb-as-a-service)

# maven - Maven 发布目标绑定

> ID：15185021
> 
> 赞同：0
> 
> 时间：2013-03-03T11:08:02.107
> 
> 标签：maven, release, maven-release-plugin

我想写一个 redmine 插件来更新一些项目发布时的版本。为了避免手动步骤，我想绑定到一些发布插件执行目标。通常，我需要在选择版本号时创建一个新版本，在选择新版本之前关闭以前的版本，等等......

现在，我知道发布阶段不是典型生命周期的一部分，但我怀疑它们可以像其他阶段（如集成前测试或集成后测试）一样“挂钩”。

这是我尝试过的：

```
<execution>
    <id>prepare-release-test</id>
    <phase>maven-release-plugin:prepare</phase>
    <goals>
        <goal>list-issues</goal>
        <goal>list-versions</goal>
        <goal>list-users</goal>
        <goal>list-projects</goal>
    </goals> 
```

```
<execution> 
    <id>prepare-test</id>
    <phase>maven-release-plugin:2.0:prepare</phase>
    <goals>
        <goal>list-issues</goal>
        <goal>list-versions</goal>
        <goal>list-users</goal>
        <goal>list-projects</goal>
    </goals> 
```

但这些都没有奏效。当绑定到测试阶段时，它定义有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:42:54.513

> 我知道发布阶段不是典型生命周期的一部分，但我怀疑它们可以像其他阶段一样被“挂钩”。

它们不是“阶段”。它们是“目标”，它们像阶段的唯一方式是您可以将它们的名称传递给 maven 执行。您不能像将目标绑定到阶段那样将目标绑定到其他目标。通常，您解决此问题的方法是定义一个您[手动或自动激活](http://www.sonatype.com/books/mvnref-book/reference/profiles-sect-activation.html)的配置文件，该配置文件会[修改默认的生命周期绑定](http://www.sonatype.com/books/mvnref-book/reference/profiles-sect-maven-profiles.html#profiles-sect-overriding-pom)。如果你想全力以赴，你也可以[定义自己的生命周期](http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-plugins-lifecycle.html#writing-plugins-sect-custom-lifecycle)，但这似乎有点过头了。但是，在发布插件的特定情况下，您还可以选择使用[`preparationGoals`](http://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#preparationGoals)和[`goals`](http://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html#goals)属性来分别自定义在`release:prepare`和期间发生的事情`release:perform`。

# arrays - 井字游戏使用类和动态分配数组的问题

> ID：15185022
> 
> 赞同：0
> 
> 时间：2013-03-03T11:08:03.593
> 
> 标签：arrays, class, multidimensional-array, dynamic-data, tic-tac-toe

上周我做了一个作业，我们必须使用 3*3 棋盘编写井字游戏。现在，我正在尝试自己做同样的游戏，但玩家可以自定义棋盘大小。

我询问用户希望的行数和列数，我正确地创建了游戏板并使用我的 << 重载函数打印了这个游戏板。一切似乎都还好。但是当我尝试做一个动作（在棋盘上放置一个标记）时，用户传递的 x 和 y 坐标与我们在屏幕上看到的不匹配。

我不知道错误是来自我的 SetPosition() 还是 AtPosition()。这是我第一次处理这种数组，所以希望有人能帮助我。（对不起，我的英语不好）

那里有我的驱动程序文件和我的 GameBoard.h 和 .cpp 如果您需要更多信息，请询问我。

```
 #include "GameBoard.h"
    #include <iostream> /*cout, cin*/
    #include <stdlib.h> /* rand, srand */
    #include <time.h>   /* time        */

    using namespace std;

    // ************Prototypes*************
    int RandomInt(int low, int high); // generate a random number
    // ***********************************

    int main(void)
    {
        // *************Variables************
        int x_size;                 // the user decide of the size of the board
        int y_size;                 // the user decide of the size of the board
        int x_player;               // the user x-coordinate
        int y_player;               // the user y-coordinate
        int ID_player = 1;          // player ID
        int x_computer;             // the computer x-coordinate
        int y_computer;             // the computer y-coordinate 
        int ID_computer = 2;        // computer ID  
        int keepplaying = 0;        // use this for game loop until we do not have the check win function
        // **********************************
        srand(time(0));

        // ask to the user which size he wants to use
        cout << "Welcome to my Tic Tae Toe Game!" << endl;
        cout << "What size do you want?" << endl;
        cout << "Insert number of rows" << endl;
        cin >> x_size;
        cout << "Insert number of columns" << endl;
        cin >> y_size;

        cout << "This is the GameBoard we are using" << endl;

        // create the GameBoard    
        Board myBoard(x_size, y_size);
        // set all the array to 0
        myBoard.ResetBoard();
        // prints the 2D array
        cout << myBoard << endl;

        cout << "You are the player 1 and you play against the computer (number 2). Good Luck!" << endl;

        do
        {

            // ask to the user the coordinates in which he wants to place the mark
            do
            {
                cout << "Player 1 turn! " << endl;
                cout << "Insert x coordinate: ";
                cin >> x_player ;
                cout << "Insert y coordinate: ";
                cin >> y_player ;
            }
            while( (x_player < 0 || x_player > x_size) || (y_player < 0 || y_player > y_size) || myBoard.AtPosition(x_player, y_player) != 0 );
            // while the cell is not available or the coordinates are not valide
            myBoard.SetPosition(x_player, y_player , ID_player); // the mark has been placed

            // print the move
            cout << myBoard << endl; 
            cout << "End of turn!" << endl;

            // The computer place a mark: the x and y coordinates are randomly generated
            cout << "Computer Turn:" << endl;
            do
            {
                x_computer = RandomInt(0,x_size);
                y_computer = RandomInt(0,y_size);
            }while(myBoard.AtPosition(x_computer, y_computer) != 0);
            myBoard.SetPosition(x_computer, y_computer, ID_computer);
            cout << myBoard << endl; 

        }while(keepplaying != 1) ;         

        //return 0;
    }

    // This function create a random number
    int RandomInt(int low, int high)
    {
      int number = rand() % (high - low + 1) + low;
      return number;
    } 
```

这是 main.cpp，它会询问用户的数据，然后调用在我的类 Board 中声明和定义的函数

```
 #include <iostream> /*cout, cin, ostream*/

    class Board
    {
        public:
       /* Board()
        { 
            x = 3;
            y = 3;
            //player_ID = 1;
            //computer_ID = 2;

        }*/
        Board(int x_, int y_); // non-default constructor

        void SetPosition(int x, int y, int player);     // Place a mark
        int AtPosition(int x, int y);                   // return the ID of the cell
        void ResetBoard(void);                        // set all the array to be 0

        friend std::ostream& operator<<(std::ostream &os, const Board &rhs); // overload the << operator

        private:    
        int x;                              // x-coordinates
        int y;                              // y-coordinates
        int *board;                    // contains the board in a 2D array (3*3 gameboard)

        int player_ID;                         // player ID 
        int computer_ID;                        // computer ID

    }; 
```

你有我班级的头文件

```
 #include "GameBoard.h"

    // non-default constructor
    Board::Board(int x_, int y_)
    {
        x = x_;
        y = y_;    
        board = new int[x*y];
    }
    // Goes through the board array and set all the ID to 0
    void Board::ResetBoard()
    {
        for(int i = 0; i < x*y; i++)
        {
            board[i] = 0;      
        }
    }

    // returns the ID of the passed cell
    int Board::AtPosition(int x, int y)
    {
       return board[x*y];
    }

    // put a mark in the cell and return true
    void Board::SetPosition(int x, int y, int player_ID)
    {
        board[x*y +x] = player_ID;
        //value = pd[row * 4 + column];
    }

    std::ostream& operator<<(std::ostream &os, const Board &rhs)
    {
      for (int i = 0; i < rhs.x*rhs.y; i++)
      {

        if(i % rhs.y == 0)
        {
          os << std::endl;
        }
        os << rhs.board[i]; 

      }   
        return os;
    } 
```

我希望一切都清楚并得到很好的评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:25:28.003

所以在你的`Board`课上你有：

```
// returns the ID of the passed cell
int Board::AtPosition(int x, int y)
{
   return board[x*y];
}

// put a mark in the cell and return true
void Board::SetPosition(int x, int y, int player_ID)
{
    board[x*y +x] = player_ID;
    //value = pd[row * 4 + column];
} 
```

因此，您正在使用`x`和`y`作为参数名称，这些名称隐藏了 x 和 y 类成员。你需要考虑你想要做什么。对于 3 x 3 阵列，您有：

```
0 1 2
3 4 5
6 7 8 
```

在您的代码中，您似乎打算使用 x 作为列号和 y 作为行号（但不一致，所以我不能确定）。因此，对于 x=1 和 y=2，您的指数为 5。那么您如何计算呢？你有：

```
board[x*y +x] = player_ID; 
```

你需要（类似）：

```
board[this->x*y +x] = player_ID; 
```

而且`AtPosition`你还需要：

```
return board[this->x*y +x]; 
```

但我建议重新命名你的变量以避免阴影。也许成员 vars 最好称为`xsize`/`ysize`或`xlen`/ `ylen`。

您还`operator<<`拥有：

```
if(i % rhs.y == 0)
{
    os << std::endl;
}
os << rhs.board[i]; 
```

我认为需要：

```
if(i % rhs.x == 0)
{
    os << std::endl;
}
os << rhs.board[i]; 
```

（因为我猜`rhs.x`是宽度，但如果不是，你有其他代码是错误的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T05:20:55.407

首先，这个类的功能都搞砸了。如果要在内存中动态创建板，则可以直接访问它。当您调用 std::ostream 函数时，您只需创建一个名为 show 的函数。这里有一些代码可以帮助解释得更清楚一些。

# 包括“GameBoard.h”#include“Player.h”

```
 int main() {    GameBoard* board = new GameBoard;    board->show();    Player* player = new Player(board);//passing a pointer to a pointer this is called    //dynamic passing which allows a class to manipulate another with a class    int* row = new int;    int* col = new int;    row = 1 , col = 1; //the middle spot on 3x3 board    player->setPiece(row,col);//now the player class would control the rest    delete col; delete row; delete player;//delete all but the board    board->show();//the players piece would still be there this is what dynamic pass-    //ing can do    delete board;    return 0; } 
```

如果操作正确，玩家将使用指向棋盘的指针在其自己的类中控制和操作棋盘。这称为数据抽象，并允许在类和 show 函数中使用 cout，不要引用 ostream。这是一种糟糕的编程习惯，可能会导致整个程序出现严重错误。相信我，我也学得很辛苦，哈哈。无论如何练习这些材料，你将成为编写几乎任何程序的天才。永远记住，这是 OOP（面向对象编程）而不是 PP（过程编程）。

# vba - 在 MS Access 中设置全局变量

> ID：15185023
> 
> 赞同：1
> 
> 时间：2013-03-03T11:08:30.590
> 
> 标签：vba, ms-access, global-variables

我已经在互联网上搜索了几个小时，但还没有弄清楚我做错了什么。我创建了一个登录表单，其中有一个用于用户名的组合框和一个用于密码的文本框。我需要保存用户名以备将来使用，因此我创建了一个新模块并在其中创建了一个名称的全局变量：

> 选项比较数据库
> 
> 选项显式
> 
> 公共名称作为字符串

我正在尝试将私有子中的值设置到此变量中，如下所示：

> 名称 = Me.cmbClient.Value

但我不断收到此错误“运行时错误'2135'：此属性是只读的，无法设置”我不知道我做错了什么。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T11:18:27.633

名称是 VBA 中的保留字。

# c++ - 直接和二进制插入排序

> ID：15185033
> 
> 赞同：0
> 
> 时间：2013-03-03T11:09:26.243
> 
> 标签：c++, sorting, data-structures, binary-search

您好，我被要求通过使用二进制搜索而不是线性来改进插入排序。问题是，由于**数据比较**，现在最好的情况是 O(n log n) 而不是 O(n)，这使得程序在某些情况下即使不慢也相等。这是我的二进制插入排序代码：

```
void InsertionSort(int data[], int size)
{
    int index = -1;
    for(int i = 1,temp,j;i<size;i++)
    {
        temp = data[i];//DM O(N)
        int high = i,low = 0,mid;//DM O(N)
        while(low <= high)//DC O(nlogn)
        {
            mid = (low + high) /2;
            if(temp < data[mid])
            {
                high = mid - 1;
                index = mid;
            }

            else if (temp > data[mid])
            {
                low = mid + 1;      
            }

            else if(data[mid] == temp)
            {
                index = mid;
                break; 
            } 

        }
        for(j = i;j > index;j--)
        {
            data[j] = data[j-1];//DC Worst Case O(n*n) but the exact is summation of n(n+1) / 2 nad best case o(1)
        }
        data[j] = temp;//DM O(n)
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:23:48.137

您可以从偏向于最佳情况的阶段开始您的二分搜索。不是直接去`(low+high)/2`，而是从位置开始`i-1`，然后`i-2`，然后`i-4`，`i-8`， ... `i-16`，`i-32`直到找到更小的元素，或者直到`i-whatever`低于`low`。然后继续进行普通的二分查找。

请注意，这种优化是有代价的。最好的情况——排序或几乎排序的数据——需要 O(N) 时间，但相对于简单的二进制搜索版本，平均情况和最坏情况会慢一些。

```
void InsertionSort (int data[], int size)
{
    int i, j, high, low, mid, hop;
    int temp;

    for (i=1; i<size; i++)
    {
        temp = data[i];

        high = i;
        low = 0;
        hop = 1;

        do
        {
            mid = high - hop;
            hop <<= 1;

            if (temp < data[mid])
                high = mid;
            else
                low = mid + 1;
        }
        while (low+hop <= high);

        while (low != high)
        {
            mid = (low + high) / 2;

            if (temp < data[mid])
                high = mid;
            else
                low = mid + 1;
        }

        for(j=i; j>low; j--)
            data[j] = data[j-1];

        data[j] = temp;
    }   
} 
```

另请注意，`high`是分配的`mid`，而不是`mid+1`。where 的情况与 where`temp==data[mid]`的情况完全相同`temp>data[mid]`。这是为了保持插入排序的良好性质：它是一种[稳定的排序](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)。不过，对普通整数进行排序没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-14T04:35:11.523

这是我的二进制插入排序与普通插入排序的比较。我的基准时间是决定性的。二进制版本更快。

```
#include <iostream>

#define NB_VALUE 1000
#define VALUE_RANGE 200

class Profiler
{

    std::chrono::time_point<std::chrono::high_resolution_clock> initTime;
    const char *m_name;
    public:
    Profiler(const char *name = nullptr): initTime(std::chrono::high_resolution_clock::now()), m_name(name){}
    ~Profiler()
    {
        if(m_name)
             std::cout << m_name << " ";
        auto begin = std::chrono::time_point_cast<std::chrono::microseconds>(initTime).time_since_epoch();
        auto now = std::chrono::time_point_cast<std::chrono::microseconds>(std::chrono::high_resolution_clock::now()).time_since_epoch();

        auto duration = now - begin;
        double millisecond = duration.count() * 0.001;
        std::cout << millisecond << " ms\n";
    }
};

template <class T>
void swap(T &t1, T &t2)
{
    T tmp = t1;
    t1 = t2;
    t2 = tmp;
}

template<class T>
int binaryFindIndexOfSmallestBiggerOrEqual(T array[], unsigned int begin, unsigned int end, T value)
{
      int delta = end - begin;
      if(delta < 0)
           return -1;

    if(delta == 0)
    {
          if(array[end] > value)
                return end;
             else
                return -1;
    }

    int midIndex = begin + delta / 2;

    if(  array[midIndex] < value )
    {
           return binaryFindIndexOfSmallestBiggerOrEqual(array, midIndex+1, end, value);
    }
    else
    {
        if(midIndex == 0 || array[midIndex -1] <= value)
            return midIndex;
        else
            return binaryFindIndexOfSmallestBiggerOrEqual(array, begin, midIndex - 1, value);
    }   
}

template <class T>
void binaryInsertionSort(T array[], unsigned int begin, unsigned int end)
{
    if(end <= begin)
        return;

    int sortedUpTo = begin;
    int insertionIndex;
    while(sortedUpTo < end)
    {
        if(array[sortedUpTo] < array[sortedUpTo + 1])
            insertionIndex = -1; 
        else
             insertionIndex = binaryFindIndexOfSmallestBiggerOrEqual(array, begin, sortedUpTo, array[sortedUpTo + 1]);

        if(insertionIndex != -1)
        {
            T tmp = array[sortedUpTo + 1];
            memmove(array + (insertionIndex + 1), array + (insertionIndex), sizeof(T)*(sortedUpTo - insertionIndex + 1));
            array[insertionIndex] = tmp;
        }
        ++sortedUpTo;
    }
}   

template <class T>
void insertionSort(T array[], unsigned int begin, unsigned int end)
{
    for (int i = begin + 1; i <= end; ++i)
    {
        for (int j = i; j > begin + 1; --j)
        {
            if (array[j - 1] > array[j])
                swap(array[j - 1], array[j]);
            else
                break;
        }
    }
}

int main(int argc, char **argv)
{
     int arrayToSort[NB_VALUE];

//******** RANDOM CASE *********
    for (int i = 0; i < NB_VALUE; ++i)
      arrayToSort[i] = rand() % (VALUE_RANGE + 1) * 2 - VALUE_RANGE;

    Profiler *p = new Profiler();
    binaryInsertionSort(arrayToSort, 0, NB_VALUE - 1);
    delete p;
    //Timer : 0.119ms

    for (int i = 0; i < NB_VALUE; ++i)
    arrayToSort[i] = rand() % (VALUE_RANGE + 1) * 2 - VALUE_RANGE;

    p = new Profiler();
    insertionSort(arrayToSort, 0, NB_VALUE - 1);
    delete p;
    //Timer : 1 989ms

//********* ALREADY SORTED CASE ************
   for (int i = 0; i < NB_VALUE; ++i)
    arrayToSort[i] = i;

    p = new Profiler();
    binaryInsertionSort(arrayToSort, 0, NB_VALUE - 1);
    delete p;
    //Timer : 0.003ms

    for (int i = 0; i < NB_VALUE; ++i)
    arrayToSort[i] = i;

    p = new Profiler();
    insertionSort(arrayToSort, 0, NB_VALUE - 1);
    delete p;
    //Timer : 0.004ms

//********* REVERSED ORDER CASE ************
   for (int i = 0; i < NB_VALUE; ++i)
    arrayToSort[i] = NB_VALUE - 1;

    p = new Profiler();
    binaryInsertionSort(arrayToSort, 0, NB_VALUE - 1);
    delete p;
    //Timer : 0.046ms

    for (int i = 0; i < NB_VALUE; ++i)
    arrayToSort[i] = NB_VALUE - i;

    p = new Profiler();
    insertionSort(arrayToSort, 0, NB_VALUE - 1);
    delete p;
    //Timer : 3 878ms

    return 1;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T14:50:02.030

您还可以替换最后一个 else :`else if(data[mid] == temp)`用 simple `else` ，因为如果前两个不正确，很明显这是正确的......

# backbone.js - 如何使用 Backbone 和 CoffeeScript 将新项目呈现到集合中？

> ID：15185036
> 
> 赞同：0
> 
> 时间：2013-03-03T11:09:46.300
> 
> 标签：backbone.js

我有一个小表单来添加一个项目，以及一个列出所有项目的集合视图。但是，我没有看到在哪里/如何为新项目调用渲染：

表单视图：

```
类 FastTodo.Views.AddTodoItem 扩展 Backbone.View

  模板：JST['todo_items/add_item']

  埃尔：'#main'

  事件：
    “提交”：“添加项目”

  添加项目：（事件）->
    event.preventDefault()
    @collection.create 任务：$('#task').val()

  渲染：->
    $(@el).html @template()

  初始化：->
    @collection = new FastTodo.Collections.TodoItems()
    @使成为（）

```

收藏视图：

```
类 FastTodo.Views.TodoItemsIndex 扩展 Backbone.View

  模板：JST['todo_items/index']

  渲染：->
    console.log("渲染")

  renderOne：（项目）->
    控制台日志（项目）

  初始化：->
    @collection = new FastTodo.Collections.TodoItems()
    @collection.bind '重置'，=>
      @使成为（）
    @collection.on 'add', (item) =>
      console.log('添加')
      @renderOne（项目）
    @collection.fetch()

```

我希望控制台中的输出显示一个新项目。但是，我看到：

![控制台输出添加新的主干视图](../Images/43f37c8b49bc07d32430b5c9d1aa57f9.png)

如何在集合中呈现新项目？（或者显示 renderOne 被触发了？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:10:50.740

您`AddTodoItem`和您`TodoItemsIndex`需要共享完全相同的集合实例。这是骨干的设计。因此，您的路由器应该创建集合的单个实例，并将其在选项对象中传递给两个视图的构造函数。然后事件将正常流动，视图将保持同步。为了解决您的评论，不要将集合从一个视图传递到另一个视图，应通过共享模型/集合和路由器级别的代码来处理单独视图的连接。

您还可以为您的应用程序拥有一个全局命名空间和一个共享集合，就像[在此处的 TodoMVC 示例项目](https://github.com/addyosmani/todomvc/blob/gh-pages/architecture-examples/backbone/js/views/app.js)中所做的那样，但我个人更喜欢独立模块，而不是依赖于共享全局变量的所有内容。

另一种要考虑的方法是[此处描述的调解器模式](http://addyosmani.github.com/backbone-fundamentals/#triggering-updates-in-other-views)，尽管我认为共享集合在您的情况下更简单且完全足够。

# java - Java 正则表达式代码标题

> ID：15185039
> 
> 赞同：0
> 
> 时间：2013-03-03T11:10:10.540
> 
> 标签：java, regex

我需要在 html 标记的标题上添加“Java RegEx”，但它不起作用。为什么？

```
Pattern.compile("\\<td class=\"codeTitle\">(.*)\\</td>");

Matcher m = p.matcher("<td class="codeTitle">Java RegEx</td>"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T11:18:13.450

您需要打电话`m.find()`检查是否找到任何匹配项。如果找到匹配项，您可以使用 访问它们`m.group(1)`。

此外，我认为您忘记转义主题字符串。

```
Pattern.compile("<td class=\"codeTitle\">(.*?)</td>"); //lazy matching is better in matching html tags

Matcher m = p.matcher("<td class=\"codeTitle\">Java RegEx</td>"); // you didn't escape that

if(m.find()){
  //do something with m.group(1) which contains "Java Regex"
}
else {
  //no matches found
} 
```

# mysql - 如何将 LEFT 连接中的 RIGHT 表限制为单行（优先选择特定行）？

> ID：15185043
> 
> 赞同：0
> 
> 时间：2013-03-03T11:11:48.227
> 
> 标签：mysql, sql, greatest-n-per-group

如果有人可以提供帮助，将不胜感激。

问题是我似乎无法引用子查询之外的任何内容！？

```
SELECT * FROM currentcalls AS c
LEFT JOIN custprices ON c.rateid = custprices.rateid
LEFT JOIN (SELECT * FROM costprices 
    WHERE costprices.ratetype = custprices.ratetype
      AND (costprices.providerid = c.providerid OR costprices.providerid=0)
    ORDER BY costprices.providerid DESC LIMIT 1) AS new1 ON new1.ratetype = custprices.ratetype 
```

3 表：

```
currentcalls (rateid, providerid)
custprices (rateid, ratetype)
costprices (ratetype,providerid) 
```

我们想要来自 currentcalls 的所有行，以及来自 cust 和 cost 价格的单行。rateid 有一个唯一的行，所以 custprices 很好。

不幸的是，特定providerid 的costprice 可能不存在（在这种情况下我想使用providerid=0），或者如果它确实存在，那么我不想要providerid=0 结果。无论哪种方式，我都不希望返回多行（来自 costprice）。

**SAMPLE DATA**（pricing_information 代表我要选择的多个字段）

```
currentcalls (rateid, providerid)
              345       2
custprices (rateid, ratetype)
              345     123
costprices (ratetype,providerid, pricing_information)
              123       0           ????A
              123       1           ????B
              123       2           ????C
              123       3           ????D 
```

我希望结果是：

```
rateid,providerid,rateid,ratetype,ratetype,providerid,pricing_information
  345      2       345     123     123       2           ??????C 
```

如果 providerid 不存在，那么结果应该是

```
 345      2       345     123     123       0           ??????A 
```

（对于当前调用表中的每一行，应该只有 1 个 custprices 实例，这很容易，因为 ID 是唯一的，但问题是只获得了 1 个定价信息实例，与 providerid 和 ratetype 相关）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:01:23.493

试试这个，

```
SELECT  c.rateid, 
        c.providerid, 
        new1.ratetype, 
        new1.pricing_information
FROM    currentcalls AS c
        LEFT JOIN custprices d
            ON c.rateid = d.rateid
        LEFT JOIN 
        (
            SELECT  a.*
            FROM    costprices a
                    INNER JOIN
                    (
                        SELECT  ratetype, MAX(x.providerid) min_provid
                        FROM    costprices x
                                INNER JOIN currentcalls y
                                  ON x.providerid IN (y.providerid, 0)
                    ) b ON  a.ratetype = b.ratetype AND
                            a.providerid = b.min_provid
        ) AS new1 ON new1.ratetype = d.ratetype; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/64e35/9)
*   [SQLFiddle 演示（*不存在*）](http://www.sqlfiddle.com/#!2/e88a2/1)

# reference - Lua 中对对象的“引用”是什么样的？

> ID：15185045
> 
> 赞同：0
> 
> 时间：2013-03-03T11:12:00.883
> 
> 标签：reference, lua

每个对象都有一个可以关联变量的引用，对吗？

这些参考资料是什么样的？这是你做 print(table1) 时得到的吗？

0x100108fb0 例如？

如果是这样，是否有一个函数可以显示字符串和数字等更原始类型的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T11:59:30.283

不要混淆对象、引用和变量。

引用[Lua 5.2 参考手册](http://www.lua.org/manual/5.2/manual.html#2.1)：

> 表、函数、线程​​和（完整的）用户数据值都是对象：变量实际上并不包含这些值，只是对它们的引用。

因此，如果变量的值是类型`nil`或数字，则该变量实际上包含它，而不是仅引用它。此类型不涉及参考。我不知道为什么参考手册的上述引用中省略了字符串；也许是因为字符串是不可变的，对于 Lua 程序员来说，变量是否包含字符串引用或值都没有区别。但是，从技术上讲——从 C 的角度来看——字符串是从变量引用的，而不是包含的。

引用只是一个指针，即被引用对象在内存中的地址。当打印为十六进制数字时，它真的“看起来”像`0x100108fb0`.

> 如果是这样，是否有一个函数可以显示字符串和数字等更原始类型的引用？

正如我所写，对于后者，根本没有任何参考资料。对于字符串，无法在普通 Lua 中打印地址，但无论如何您都不需要知道它。

您可能还想阅读《[Lua](http://www.lua.org/manual/5.2/manual.html#2.1)参考手册中的编程》的相应部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:40:34.123

> Each object has a reference with which a variable can be associated with, correct?

No. Lua represents values as tagged unions (type, value). For variables representing `number`, `bool` or `nil`, the value is stored directly in the union. For `string`, `table`, `function`, `userdata` and `thread`, the value is a pointer (reference), or set of pointers that correlates to the memory location of the object's header.

> What do these references look like?

As Oberon said, the reference points to a spot in memory, when represented in hex looks like 0x0..

> If so, is there a function that can show the reference of the more primitive types like string and number?

`number`, `bool` or `nil`, don't have any reference. For strings, there is no standard way to print their addresses in Lua. For `table`, `function` and `thread` you can use print(). Not sure about userdata, this you may need to define yourself.

Many of the implementation details of these types are covered in plain language in [this article](http://www.jucs.org/jucs_11_7/the_implementation_of_lua/jucs_11_7_1159_1176_defigueiredo.html).

# mit-scratch - 如何在 Scratch 中确定另一个精灵的方向

> ID：15185050
> 
> 赞同：5
> 
> 时间：2013-03-03T11:12:12.253
> 
> 标签：mit-scratch

我正在为 MIT Scratch 中的教育编写一个简单的游戏，并且想让一个精灵*转向*另一个精灵（想象一艘外星飞船跟随我们的英雄船）。我可以很容易地让外星飞船*指向*英雄：

```
point towards 'hero' 
```

但我真正想做的是像这样更渐进的事情：

```
if alien direction (in degrees) > direction of hero: turn -2 degrees
if alien direction (in degrees) < direction of hero: turn 2 degrees 
```

那么我如何确定“英雄的方向”呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T14:10:41.663

不幸的是，似乎没有内置的方法可以得到这个，所以需要一些三角函数。要计算从精灵 1 到精灵 2 的方向，您可以计算 x 和 y 中从 1 到 2 的位移，然后使用该`atan`函数找到所需的角度：

![计算与另一个精灵的角度的脚本](../Images/38dbf0e2a32544fb1cbe8c1641b47fc1.png)

由于您实际上想要相对于外星飞船所面对方向的方向，因此使用矢量积（也称为叉积）可能会更好：

![在此处输入图像描述](../Images/45840a55a87c1109672d1313c9680b72.png)

这里的截图来自[这个 Scratch 项目](http://beta.scratch.mit.edu/projects/10068436/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T14:03:08.230

使用指向作为找出的方法：

```
set temp to direction
point towards hero
if temp > direction
   set direction to temp-2
else if temp < direction
   set direction to temp-2
else
   set direction to temp 
```

# c# - 在 C# 应用程序中导入和调用 COM dll

> ID：15185052
> 
> 赞同：2
> 
> 时间：2013-03-03T11:12:19.910
> 
> 标签：c#, dll, com, atl

请帮助在 C# 应用程序中使用 ATL COM DLL 方法

在 ATLLib.idl

```
...
interface IATLLibMain : IUnknown{
    [helpstring("method hello")] HRESULT hello([out,retval] BSTR* res);
};
... 
```

在 ATLLibMain.cpp（ATL`SimpleObject`类）中

```
STDMETHODIMP CATLLibMain::hello(BSTR* res)
{
    *res = SysAllocString(L"Hello world!!!");
    return S_OK;
} 
```

我已经编译并注册了 COM。在 C# 项目中，添加了对 ATLLib.dll 的引用并尝试这样的调用方法

```
IATLLibMain atllib = new ATLLibMainClass();
Console.WriteLine(atllib.hello()); 
```

VS给出错误

> `System.Runtime.InteropServices.COMException`ATLLibTest.exe中出现未处理的类型异常。
> 
> 由于以下错误 80040154，检索具有 CLSID {...} 的组件的 COM 类工厂失败。

在线的

```
IATLLibMain atllib = new ATLLibMainClass(); 
```

请显示在 C# 应用程序中使用 ATL DLL 的任何项目示例或帮助修复此错误？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:50:55.163

您的 C# 代码似乎在 64 位模式下运行，它无法加载 32 位非托管代码。

*将 C# 应用程序的Platform Target*从*Any CPU*更改为*x86*。

*此外，使用32 位版本的 regsvr32*注册库（请参阅[在 64 位 Windows 上运行 Regsvr32.exe 时出现错误消息](http://support.microsoft.com/kb/282747)）：

```
%windir%\SysWoW64\regsvr32.exe C:\path\to\library.dll 
```

# php - 我应该使用哪种 RDBMS 或数据结构？

> ID：15185053
> 
> 赞同：0
> 
> 时间：2013-03-03T11:12:20.280
> 
> 标签：php, database, data-structures, find, rdbms

出于性能原因，我想建立针的索引。

二进制文件中有数百个带有非常随机字符的针。

我需要将干草堆与数百根针头进行比较。如果找到匹配模式，则需要返回针内容。

例如

```
$haystack = "£$%^&DFFFD$%^&*("

Needles:
    1 | £"$£AAAA"£$
    2 | ((*BHJJ£$£$
    3 | ^&DFFFD$
    4 | &&&&&HUIH"£$% 
```

它应该从 ID 3返回 ^& **DFFFD $%**

我应该使用哪种 RDBMS 或数据结构？

这个项目将在 PHP 中完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:17:36.643

我会用散列来链接针头。

当我得到一个干草堆时，我创建了一个所有可能的针头列表，计算它的哈希值并将其与已经计算的针头哈希值进行比较。

# javascript - 使用 jQuery 显示和隐藏元素

> ID：15185054
> 
> 赞同：4
> 
> 时间：2013-03-03T11:12:26.690
> 
> 标签：javascript, jquery, show-hide

我目前正在做这个：

```
<div id='container'>

<div id="box1">
<h1>Share it!</h1>
</div>    

<div class="box" style="visibility: hidden">
<a href="#" class="bt btleft">Facebook Button here</a>
<a href="#" class="bt btright">Twitter Button here</a>
</div>
</div> 
```

```
$("#container").hover(function () {
   $("#container div").css("visibility","visible");
},
function () {
   $("#container div").css("visibility","hidden");
}); 
```

[http://jsfiddle.net/L9USt/3/](http://jsfiddle.net/L9USt/3/)

我想要实现的是类似于网站[Mashable](http://mashable.com)

我想要实现的是当我将鼠标悬停在“分享它！”这个词上时，它会自动隐藏并显示链接（在相同的确切位置）。我在这里卡了一段时间，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T11:20:27.870

对您的 HTML 进行一些更改，您可能会发现这很有用。只需使用 jQuery 的[.hover](http://api.jquery.com/hover/)功能来切换状态。

**HTML**

```
<div class="social">
     <h1>Share this</h1>

    <div class="networks">
        <p>Twitter</p>
        <p>Facebook</p>
    </div>
</div> 
```

**CSS**

```
.networks {
    display:none;
} 
```

**JS**

```
$(".social").hover(function() {
    $("h1", this).hide();
    $(".networks", this).fadeIn();
}, function() {
    $(".networks", this).hide();
    $("h1", this).fadeIn();
}); 
```

`fadeIn()`只是添加了一个很好的褪色效果，你也可以在`.show()`那里使用。

[JSfiddle](http://jsfiddle.net/ppksR/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:29:23.193

使用在父项中动态加载内容的 html 函数。示例：http: [//jsfiddle.net/slown1/TqGFQ/](http://jsfiddle.net/slown1/TqGFQ/)

这是解决方案：

**HTML：**

```
<div id='container' style="border:1px solid red;">
    <h1>Share it!</h1>
</div> 
```

**JS：**

```
$("#container").hover(function () {
    $("#container").html("<a href='#' "+
     "class='bt btleft'>"+"Facebook Button here</a><a href='#'" +
     "class='bt btright'>Twitter Button here</a>'");
    },
      function () {
          $("#container").html("<h1>Share it!</h1>");
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:17:20.390

您需要在悬停时隐藏 box1 并在悬停时显示

```
 $("#container").hover(function () {
        $('#box1').hide();
        $('.box').show();     
   },
  function () {
       $('.box').hide();     
       $('#box1').show();
   }); 
```

和你的 html

```
<div id="box1">
<h1>Share it!</h1>
</div>    

<div class="box" style="display:none">
<a href="#" class="bt btleft">Facebook Button here</a>
<a href="#" class="bt btright">Twitter Button here</a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T14:02:59.687

这对你有用吗？我认为它很简单，适合你

[http://jsfiddle.net/mztcn/](http://jsfiddle.net/mztcn/)

```
$("#container").hover(function () {
    $(".box").css("visibility", "visible");
}, function () {
    $(".box").css("visibility", "hidden");
}); 
```

# javascript - 使用 Facebook graph api 来自 homefeed 的“LIKE”帖子

> ID：15185057
> 
> 赞同：0
> 
> 时间：2013-03-03T11:12:52.707
> 
> 标签：javascript, facebook, facebook-graph-api

因此，我正在尝试使用 FB Graph API，并制作了这个仅显示您的家庭提要的小测试站点。我还添加了一个点赞按钮，这样你就可以喜欢提要中的项目，就像在 FB 上一样。

现在，我有一个问题。因为在[API 文档](http://developers.facebook.com/docs/reference/api/publishing/)中它说您应该发布到：

```
https://graph.facebook.com/OBJECT_ID/likes 
```

其中“OBJECT_ID”是对象的 ID。这在有对象（图片、共享故事等）的任何地方都很有效，但并不总是有对象。最常见的没有对象的项目可能是纯文本状态更新。因此，如果我尝试运行此代码：

```
function fbLike(id) {
  console.log(id);
  FB.api('/'+ id +'/likes', 'post', function(response) {
    if (!response || response.error) {
      alert('Error occured. ID: ' + id);
    } else {
      alert('Great! It worked. ID: ' + id);
    }
   });
} 
```

在没有 object_id 的地方，我收到错误消息：

```
'Error occured. ID: undefined' 
```

这很明显，因为没有 OBJECT_ID。所以，我所做的是在我的代码中进行 if/else 检查以查看是否存在 OBJECT_ID。如果没有，我将使用 POST_ID (response.data[i].id)。然而，这在控制台中给了我一个错误：

```
SyntaxError: At least one digit must occur after a decimal point 
```

如果您不知道，帖子的 ID 看起来像这样：1796252809_3826036908205（而 OBJECT_ID 看起来像这样：545978668769904）。

所以，我很好奇如何解决这个问题。如何对没有 object_id 的纯文本（正常）状态更新点赞？我知道这是可能的，因为我可以登录 FB 的网站并喜欢那里完全相同的状态。

总结：我怎样才能给一个普通的帖子点赞？

希望有人知道如何解决这个问题！:)

真诚的，亚历山大。

**编辑 1：** 当我尝试单击类似按钮时，控制台中会显示语法错误。但是 fbLike 函数没有运行，因为那时我会在控制台中返回 id 以及带有错误或成功消息的警报消息。这就是我设置喜欢按钮的方式：

```
var facebook_footer = '<button onClick="fbLike('+object_id+')"> Like </button>';
and
var facebook_footer = '<button onClick="fbLike('+post_id+')"> Like </button>'; 
```

（我将它们作为变量保存在 for 循环中，然后使用 .innerHTML 将它们打印到 div 中）

post_id 是帖子的 id (xxxxxxxxxxx_xxxxxxxxxxx)，object_id 是对象的 id（存在的地方） (xxxxxxxxx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:52:32.653

Looks like *some* type conversion is going wrong *somewhere*.

I would guess that the POST_ID semantics that includes an underscore could be causing this. You're probably only interested in posting the second half of such an identifier, which reflects the actual OBJECT_ID of the post.

When you fall back to the POST_ID, try this on your variable (supposing it is a string) before posting:

```
// Filter out non-significant portion of POST_ID
// (ie. keep only what's after the last underscore, if any)
id = id.split('_').slice(-1)[0] 
```

# jquery - 为什么在此示例中不会触发 on change？

> ID：15185058
> 
> 赞同：0
> 
> 时间：2013-03-03T11:13:41.193
> 
> 标签：jquery, select

对 start() 的调用应该会触发更改

[http://jsfiddle.net/txqed/2/](http://jsfiddle.net/txqed/2/)

```
$(function () {
    $('#ddlTo').on("change", function () {
        $("#div1").html($(this).val());
    })

    start();
});

function start() {
    $('#ddlTo').val("master");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:19:16.673

你的问题并不完全清楚，但我猜你想在初始化选择的值时触发 change 事件。

这应该符合您的期望：

```
$('#ddlTo').val("master").change(); 
```

[更改事件仅在用户启动更改时触发](https://stackoverflow.com/questions/4672505/why-does-the-jquery-change-event-not-trigger-when-i-set-the-value-of-a-select-us)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T11:24:23.547

正如 alnorth29 指出的那样，您的问题尚不清楚，但也许这就是您想要的：

[http://jsfiddle.net/txqed/3/](http://jsfiddle.net/txqed/3/)

```
$('#ddlTo').on("change", function() {
    $("#div1").html($(this).val());
    start();
}); 
```

基本上在显示用户选择的值后将选择框改回“主”。

**编辑：**我误解了你的问题。正如评论中指出的那样，这种行为不是很合乎逻辑。

# android - 当运行太多 AsyncTask 时，Android 如何停止/取消 AsyncTask？

> ID：15185063
> 
> 赞同：0
> 
> 时间：2013-03-03T11:14:42.920
> 
> 标签：android, android-asynctask

我正在开发实时消息应用程序。我已经编写了处理接收传入消息的部分。当我收到一条消息时，我将插入记录`SQ-LITE`并触发回调以通知 UI 的 update( `ListView`)。在回调中，我实现了一些更新 UI 的东西。我正在使用光标适配器。在回调中，我将启动一个`AsyncTask`，在后台，我将查询数据库以获取聊天记录。在 中`onPostExecute`，我将使用从后台查询并分配给适配器并更新 UI 的游标。

所以我的问题是：如果传入的消息很多，会触发很多`AsyncTask`s，更新UI很多次。所以它会`ListView`非常“滞后”，甚至用户也无能为力。如何停止/取消`AsyncTask`并仅处理最新的，因为我将在数据库中获取所有聊天记录，这意味着对数据库中聊天记录的最新查询应该是正确的。
任何人都可以建议如何阻止`AsyncTask`或任何其他想法来处理这个案例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:52:32.377

创建 AsyncTask 时（或在 onPreExecute() 方法中）将它们放入列表中，并在完成时将它们从列表中删除（在 onPostExecute() 方法中）。这样，您的列表将包含所有当前的、未完成的 AsyncTask，因此当您需要停止所有任务时，只需遍历列表并停止每个任务，除了最后添加的任务。

# c# - 添加没有任何参数的构造函数有什么好处吗？

> ID：15185064
> 
> 赞同：3
> 
> 时间：2013-03-03T11:14:57.833
> 
> 标签：c#, constructor

我是 C# 新手，正在阅读有关[MSDN 上的关键字](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.80%29.aspx)[的文章`virtual`](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.80%29.aspx)。在他们的示例代码中，他们创建了以下类：

```
public class Dimensions
{
    protected double x, y;

    public Dimensions()
    {
    }

    public Dimensions(double x, double y)
    {
        this.x = x;
        this.y = y;
    }

    public virtual double Area()
    {
        return x * y;
    }
} 
```

他们为什么要添加第一个构造函数（不需要任何参数的构造函数）？我知道这两个双精度值`x`并`y`默认为 0，因此添加此构造函数不会受到伤害。但是我现在已经多次看到这一点，因此想知道总是添加这样的构造函数背后是否有任何特殊原因？我应该总是这样做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T11:17:51.313

默认情况下，一个类包含一个默认构造函数。当您添加参数化构造函数时，`default provided`构造函数不再存在。

因此，如果您需要一个无参数构造函数，则需要在添加参数化构造函数后手动添加它。

所以，完全回答你的问题。不，您不必添加默认构造函数。但在这种情况下，该类的作者允许创建一个新`Dimensions`对象，其中的值默认为`0`.

* * *

作为弗拉德关于序列化的回答的旁注：

如果您只需要一个无参数构造函数来进行序列化，那么很高兴知道您*可以*将构造函数标记为`private`（或`protected`）构造函数。序列化（或者，在这种情况下，反序列化）可以访问`private`构造函数，而业务逻辑不能。这样您就不必“污染”您的业务逻辑接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T11:19:23.450

你应该*总是*这样做吗？当然不。如果没有这样的构造函数有效的情况，则不应包含无参数构造函数。

因此，如果您可以设置合理的默认值，并且这看起来很有用，那么请继续创建它。但是，如果没有，*请忽略它*，以强制客户端提供适当的参数。

请注意，有一些外部因素可能需要无参数构造函数。例如，许多类型的序列化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T11:21:22.693

在某些情况下仍然需要没有参数的构造函数（默认构造函数）。其中一种情况是[序列化](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)。

[在此处](https://stackoverflow.com/questions/267724/why-xml-serializable-class-need-a-parameterless-constructor)阅读说明

> 在对象的反序列化过程中，负责反序列化对象的类创建序列化类的实例，然后仅在获取要填充的实例后才继续填充序列化的字段和属性。
> 
> 如果需要，您可以将构造函数设为私有或内部，只要它无参数即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T11:19:51.137

当您第一次创建对象（例如 - 序列化）时，您可能不知道这些值是什么或无法设置它们。如果您创建重载构造函数，则不会为您隐式创建默认构造函数 - 因此您需要自己创建它。请参阅： [我们是否应该始终在类中包含默认构造函数？](https://stackoverflow.com/questions/3692042/should-we-always-include-a-default-constructor-in-the-class)

# windows-8 - 现代 UI 自定义 AppBar 按钮

> ID：15185065
> 
> 赞同：2
> 
> 时间：2013-03-03T11:15:00.680
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winjs, appbar

我正在开发我的第一个 Windows 8 现代应用程序，我似乎很难找到正确的文档来制作与默认按钮不同的应用程序栏按钮。

我正在尝试做的是类似于 Microsoft Solitaire Collection 中的应用栏，如下所示：http: [//www.windows8core.com/wp-content/uploads/2012/08/2b1.png](http://www.windows8core.com/wp-content/uploads/2012/08/2b1.png)

有三点需要注意：

1.  自定义图标（熊，在第一个）
2.  它不像图标下方带有文本的默认按钮
3.  它是矩形的，在填充和全屏横向模式下，宽度与应用程序的宽度成正比。（在固定模式下，按钮只会消失，但对于我的应用程序，如果可能的话，我希望在固定模式下“仅图标”）。

我从使用开始，因为从语义上讲它们是按钮，而且`<button>`似乎只属于应用栏。`<button>``<hr>`

我是在`data-win-options`属性中设置参数还是在 JavaScript 中完成？

我使用的是 JavaScript/HTML5，而不是 C++/C#/VB。[这是我读过的有关应用栏的 MSDN 文章。](http://msdn.microsoft.com/en-us/library/windows/apps/hh465309.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:46:19.983

如果这是一个上层 AppBar，通常用于导航，您实际上可以通过在 data-win-options 中指定“layout”属性来提供自定义 UI，其值为“custom”，[如此处所述](http://msdn.microsoft.com/en-us/library/windows/apps/hh780658.aspx)。

您可能还想阅读[样式应用栏](http://msdn.microsoft.com/en-us/library/windows/apps/jj839733.aspx)。

最后但同样重要的是，请查看[HTML AppBar 控件示例](http://code.msdn.microsoft.com/windowsapps/App-bar-sample-a57eeae9)，其中说明了自定义布局的使用等。

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T19:35:48.260

我建议您在自定义应用栏图标时要小心。严重偏离设计原则可能会使您的应用程序不那么受欢迎。UI 测试表明用户喜欢标准 UI 的一致性。我已经看到它做得非常有品位和有效（就像在 Nook 应用程序中一样），但我也看到它做得很差（没有提到名字:) 玩得开心。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-09T07:39:48.317

在这种情况下，只需编辑控件的模板，删除椭圆的边框或将其替换为矩形。对于彩色背景，更改包含模板中控件的网格的背景颜色并修改网格的大小。

对于那个熊图标，你可以这样做

```
<AppBarButton.Icon>
        <BitmapIcon UriSource="ms-appx:///Images/Bear.png" />
</AppBarButton.Icon> 
```

如果你想要布局感知 appbar 使用 CommandBar 或使用 AppBar，你必须以编程方式处理应用程序大小的变化。

见这里 - [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj662742.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj662742.aspx)

我在我的应用程序中做了同样的事情。

# php - 模型中的 YII 子目录

> ID：15185070
> 
> 赞同：0
> 
> 时间：2013-03-03T11:16:05.790
> 
> 标签：php, yii

我在“模型”中有一个名为“国家”的子目录，其中有
例如 USA.php，现在当我尝试这样做时，`$country = new USA();`我得到了

> 包括（USA.php）：未能打开流：没有这样的文件或目录

虽然当 USA.php 文件直接位于 Models/ 下时，它工作得很好。

# ios6 - 带有地理标签的 RSS 提要

> ID：15185071
> 
> 赞同：0
> 
> 时间：2013-03-03T11:16:28.393
> 
> 标签：ios6, rss, xcode4.5, georss

我希望使用 Geotags 使用 RSS 提要更新我的应用程序，但找不到任何示例或参考资料。

是否有人与我可以用来帮助我将其放在一起的示例或参考材料有任何链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:54:03.190

您应该查看此 wiki **[http://georss.org/Main_Page](http://georss.org/Main_Page)**，专门针对该主题。但是，您必须记住，并非所有提要都带有地理数据，实际上根本没有很多。我希望这将有所帮助。

# git - 撤消 git 中单个文件的未暂存修改

> ID：15185072
> 
> 赞同：3
> 
> 时间：2013-03-03T11:16:48.737
> 
> 标签：git

如何撤消对单个文件的未暂存修改？未分阶段，我的意思`git add`是自上次结帐以来尚未执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T11:25:55.323

就像我之前已经在评论中发布的一样，

```
git checkout <filename> 
```

就是你要找的。

有关更多信息，请参阅[http://githowto.com/undoing_staged_changes](http://githowto.com/undoing_staged_changes)，这是一个不错的 git 教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T11:24:31.700

这是您要退出的命令`local unstaged changes`。

**警告**：文件中的任何本地更改都将丢失，文件将被替换为来自`HEAD`.

```
git checkout -- filename 
```

# ios - iOS - Diceroll 增加一个对象的频率

> ID：15185073
> 
> 赞同：0
> 
> 时间：2013-03-03T11:17:17.070
> 
> 标签：ios, xcode, cocos2d-iphone

在我的应用程序中，当敌人被杀死时会掉落弹药。此代码有 4 种不同类型的弹药`int diceRoll = arc4random() % 3; //0 to 3`现在每种弹药类型的生成频率为 25%。是否有可能使例如弹药类型 2 变得更频繁？例如高达 40%，所以其他弹药类型将是 20%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:28:17.093

你有没有尝试过：

```
int spaceSet = pow(10, 3); //range of 1000, the bigger the more noticible it gets 
int diceRoll = arc4random() % (spaceSet - 1);
if(diceRoll < (2 * (spaceSet / 10)))
    diceRoll = 0;
else if(diceRoll < (4 * (spaceSet / 10)))
    diceRoll = 1;
else if(diceRoll < (7 * (spaceSet / 10)))
    diceRoll = 2;
else
    diceRoll = 3; 
```

增加随机数的集合并进行划分似乎是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:06:56.253

小心...int diceRoll = arc4random() % 3 给出 3 个不同的值：0 到 2，如下所示：

```
int i, diceRoll;
for (i=1;i<20;i++){
    diceRoll = arc4random() % 3;
    NSLog(@"Roll %i",diceRoll);
} 
```

“%”表示“除以的余数”，没有余数3。

# java - 使用 Objectify 的 Google 应用引擎或查询 ID

> ID：15185076
> 
> 赞同：1
> 
> 时间：2013-03-03T11:17:30.767
> 
> 标签：java, google-cloud-datastore, objectify

您好，我正在将 objectify 与 google 应用引擎一起使用。我已经看到我可以做这样的事情

```
List<Car> cars = ofy().load().type(Car.class).filter("year in", yearList).list(); 
```

这实现了 OR QUERY 结果但是，当我尝试按 id 查询（设置为 Long 类型）时，我得到一个异常，并且只允许通过 Long 或 String 值进行过滤。更详细

```
java.lang.IllegalArgumentException: Id filter values must be Long or String 
```

是否可以通过 id 过滤进行 OR QUERY？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T18:18:01.977

查询多个 id 时使用 ..

```
ofy().load().type(Car.class).ids(IDs); 
```

...其中 IDs 是您的 ID 列表。

# php - 在 PHP 代码中添加随机数以创建和显示随机图像

> ID：15185078
> 
> 赞同：-3
> 
> 时间：2013-03-03T11:17:48.273
> 
> 标签：php, caching, random, captcha

我有这样的 php 代码：

```
imagejpeg($img, "mydir/captcha.jpg", 100); 
```

我想在验证码前面添加一个随机数，所以 captcha.jpg 变成像 captcha3432.jpg 和下一次 captcha9787.jpg。

和

```
$number2= rand(555511, 99879); 
```

如何在验证码前面添加**$number2**，例如 > **captcha** **$number2.jpg**

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:19:13.957

```
imagejpeg($img, "mydir/captcha".$number2.".jpg", 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:19:38.477

`imagejpeg($img, "mydir/captcha{$number2}.jpg", 100);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:20:39.087

你几乎回答了你自己的问题。使用双引号时，您可以解析字符串中的变量，就像这样。请注意，此行为不适用于单引号。

```
$number2 = rand(555511, 99879);
imagejpeg($img, "mydir/captcha$number2.jpg", 100); 
```

# java - JJOE64 GraphView 库

> ID：15185086
> 
> 赞同：0
> 
> 时间：2013-03-03T11:18:40.260
> 
> 标签：java, android, android-graphview

嗨，我正在尝试使用 JJOE64 的 GraphView 库，我使用 eclipse“添加外部档案”在我的项目中导入了 .jar 文件。

我创建了一个新的 GrapVew 对象

```
package com.example.graphtest;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import com.jjoe64.graphview.*;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    GraphView Grafico = new LineGraphView(this, "GraphTest");

} 
```

我玩了这个应用程序看看会发生什么，我得到了这个致命错误

```
03-03 15:22:11.863: E/Trace(1048): error opening trace file: No such file or directory (2)
03-03 15:22:12.063: D/AndroidRuntime(1048): Shutting down VM
03-03 15:22:12.083: W/dalvikvm(1048): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-03 15:22:12.093: E/AndroidRuntime(1048): FATAL EXCEPTION: main
03-03 15:22:12.093: E/AndroidRuntime(1048): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.graphdraw/com.example.graphdraw.MainActivity}: java.lang.NullPointerException
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.os.Looper.loop(Looper.java:137)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at java.lang.reflect.Method.invokeNative(Native Method)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at java.lang.reflect.Method.invoke(Method.java:511)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at dalvik.system.NativeStart.main(Native Method)
03-03 15:22:12.093: E/AndroidRuntime(1048): Caused by: java.lang.NullPointerException
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.content.ContextWrapper.getResources(ContextWrapper.java:89)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.view.ContextThemeWrapper.getResources(ContextThemeWrapper.java:78)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.view.View.<init>(View.java:3226)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.view.ViewGroup.<init>(ViewGroup.java:420)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.widget.LinearLayout.<init>(LinearLayout.java:168)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at com.jjoe64.graphview.GraphView.<init>(GraphView.java:258)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at com.jjoe64.graphview.LineGraphView.<init>(LineGraphView.java:20)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at com.example.graphdraw.MainActivity.<init>(MainActivity.java:27)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at java.lang.Class.newInstanceImpl(Native Method)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at java.lang.Class.newInstance(Class.java:1319)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-03 15:22:12.093: E/AndroidRuntime(1048):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-03 15:22:12.093: E/AndroidRuntime(1048):     ... 11 more
03-03 15:22:15.763: I/Process(1048): Sending signal. PID: 1048 SIG: 9 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:47:57.287

`Context`可以从方法`Activity`开始`onCreate()`。如果您将 初始化`GraphView`为一个字段，您的代码将失败，因为`Context`尚不可用（您永远不应该像使用 那样进行初始化`Views`）`GraphView`。所以而不是：

```
GraphView Grafico = new LineGraphView(this, "GraphTest"); 
```

做这个：

```
GraphView Grafico;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Grafico = new LineGraphView(this, "GraphTest"); 
} 
```

`GraphView`此外，您应该通过直接使用项目或直接在`libs`文件夹中使用 jar来添加库（请参阅[此答案](https://stackoverflow.com/questions/15155383/how-to-integrate-graphview-into-my-project/15156331#15156331)）。

# css - Css 图像拼图 - 跨浏览器兼容性

> ID：15185095
> 
> 赞同：0
> 
> 时间：2013-03-03T11:19:29.610
> 
> 标签：css

我正在用 css 制作图像拼图，但我遇到了浏览器问题。图像如下所示： ![在此处输入图像描述](../Images/846bb490a4e076e4535139cc5bf7da1c.png)

我的css代码是这样的：

```
 .Image-collector{position:relative;width:204px;height:204px;margin:0px;padding:0px;
      border-radius:0px;border:0;display:inline-block;}  
     .Image-collector img{position:relative;margin:-2px -4px 0px 0px;
      padding:0px; display:inline- block;border-radius:0px;border:0;horizontal-align:none;}  

     .Image-collector1{position:relative;width:204px;height:204px;margin:0px;padding:0px;
      border-radius:0px;border:0;display:inline-block;}  
     .Image-collector1 img{position:relative;margin:-2px -2.5px 0px 0px;
      padding:0px;display:inline-block;border-radius:0px;border:0;horizontal-align:none;}

     .Image-collector2{position:relative;width:204px;height:204px;margin:0px;padding:0px;
      border-radius:0px;border:0;display:inline-block;}  
     .Image-collector2 img{position:relative;margin:-1px -2px 0px 0px;
      padding:0px;display:inline-block;border-radius:0px;border:0;horizontal-align:none;} 
```

那么我怎样才能使这个工作跨浏览器呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:28:07.063

由于您使用的是`display:inline-block`，请确保您的元素之间没有任何空格。元素也`inline-block`受`vertical-align`自身和`text-align`父母的影响。

如果您不想删除空格`font-size`，则会影响布局。

删除空格并仍然具有换行行为的解决方法是添加一个`:after`带有空格的元素：

```
.Image-collector:after{ content:' '; font-size:0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:41:53.150

![在此处输入图像描述](../Images/3fe3ae9f3b34a5a63f6055d231c25963.png)

```
 .Image-collector{position:relative;width:204px;height:204px;margin:0px;padding:0px;
  border-radius:0px;border:0;display:inline-block;}  
 .Image-collector img{position:relative;margin:1px 2px 0px 0px;
  padding:0px; display:inline- block;border-radius:0px;border:0;
  horizontal-align:none;float:left;}  

 .Image-collector1{position:relative;width:204px;height:204px;margin:0px;padding:0px;
  border-radius:0px;border:0;display:inline-block;}  
 .Image-collector1 img{position:relative;margin:1px 1px 0px 0px;
  padding:0px;display:inline-block;border-radius:0px;border:0;
  horizontal-align:none;float:left;}

 .Image-collector2{position:relative;width:204px;height:204px;margin:0px;padding:0px;
  border-radius:0px;border:0;display:inline-block;}  
 .Image-collector2 img{position:relative;margin:0px 0px 0px 0px;
  padding:0px;display:inline-block;border-radius:0px;border:0;
  horizontal-align:none;float:left;} 
```

最后一张图片不需要边距损坏，就像我开始的那样。我只在代码中添加了 - “float:left” 以使其工作。

# android - 防止启动器/主要活动被另一个应用程序启动

> ID：15185102
> 
> 赞同：2
> 
> 时间：2013-03-03T11:20:15.470
> 
> 标签：android, android-intent, launcher

作为标题，我有一个只希望用户从主屏幕或历史菜单启动的应用程序。我们可以检测该应用程序是否由任何其他应用程序启动吗？

我已经尝试过 intent.getFlags() 方法，但不幸的是，调用者应用程序似乎也可以将标志值设置为所需的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:41:53.677

您无法检测到，但您可以做的是在清单中使用`<permission />`标签设置特殊权限，并`android:permission`在所需活动中设置属性。这样，它将仅适用于具有您签名的应用程序。以下是详细的[安全提示](http://developer.android.com/training/articles/security-tips.html)。

# php - 注释查询正在执行

> ID：15185107
> 
> 赞同：-2
> 
> 时间：2013-03-03T11:20:39.670
> 
> 标签：php, mysql

我刚刚在我的 mysql 慢日志中注意到，即使由于这些查询导致服务器负载过重而我已评论但不再使用的查询仍在执行。我无法相信评论的查询将被执行

我有这个我过去使用过的 mysql 查询

```
 //$query="SELECT * FROM tableA where col='p' order by rand() LIMIT 3"; 
```

tableA 有 2000 万个数据，所以你可以想象 rand() 会是什么情况，所以我删除了，但 mysql 慢日志一次又一次地抛出这个查询需要 45 秒等。

据我所知，未执行注释的 php 和 mysql 查询，但在我的情况下，它正在执行我只有一个地方有相同的代码，我通过删除代码进行检查，在这种情况下，如果我再次添加，慢日志将不会记录该延迟该查询和评论将开始进入慢日志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:50:11.400

以防万一，请确保您在`<?php ?>`标签内发表评论

```
<?php

    //$query="SELECT * FROM tableA where col='p' order by rand() LIMIT 3";

?> 
```

或类似的东西：

```
<?php

    /*
     *
     *$query="SELECT * FROM tableA where col='p' order by rand() LIMIT 3";
     *
     */

?> 
```

如果在此之后，代码仍在执行，则意味着错误不在这行代码中。也许其他地方也有类似的行，或者新代码正在复制相同的错误。

# arrays - Magento API V2 - WSDL 和关联多数组

> ID：15185108
> 
> 赞同：1
> 
> 时间：2013-03-03T11:20:51.437
> 
> 标签：arrays, web-services, api, magento, wsdl

我扩展了 Magento V2 API，因此创建了一个 wsdl.xml。我的网络服务返回一个关联多数组。我google了一下，发现了两个复杂类型的定义：

```
<complexType name="associativeMultiArray">
    <all>
        <element name="associativeArray" type="typens:associativeArray" minOccurs="0" />
    </all>
</complexType>
<complexType name="stringArray">
    <all>
        <element name="multi_data" type="typens:associativeMultiArray" minOccurs="0" />
    </all>
</complexType>

<message name="methodResponse">
    <part name="result" type="typens:stringArray" />
</message> 
```

另一个：

```
<complexType name="associativeMultiArray">
    <complexContent>
        <restriction base="soapenc:Array">
            <attribute ref="soapenc:arrayType" wsdl:arrayType="typens:associativeMultiEntity[]"/>
        </restriction>
    </complexContent>
</complexType>

<complexType name="associativeMultiEntity">
    <all>
        <element name="key" type="xsd:string"/>
        <element name="value" type="typens:ArrayOfString"/>
    </all>
</complexType>

<complexType name="ArrayOfString">
    <complexContent>
        <restriction base="soapenc:Array">
            <attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:string[]"/>
        </restriction>
    </complexContent>
</complexType>

<message name="methodResponse">
    <part name="result" type="typens:associativeMultiArray" />
</message> 
```

问题是，这两个都不起作用。如果我在查询后输出结果，我得到：

```
Array
(
    [0] => stdClass Object
    (
    )
) 
```

`array('test)`我返回or没关系`array('key'=>'value')`，它总是相同的输出。基本上我有两个问题：

*   是`ArrayOfString`,`associativeArray`和`associativeMultiArray`以下声明：`<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:Magento"> <import namespace="http://schemas.xmlsoap.org/soap/encoding/" schemaLocation="http://schemas.xmlsoap.org/soap/encoding/"/>`?
*   如果我有非常复杂的数组结构，例如 10 维关联数组，是否必须在 wsdl.xml 中声明每个维度？我该如何处理？它是如何工作的？为什么上述声明不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:55:14.580

这不是该问题的确切解决方案，但我找到了另一种解决方法：只需将数组序列化为 JSON`json_encode`并使用`json_decode`. 有了这个，数组可以是任何复杂的。Returntype 然后`xsd:string`在 wsdl 中。

# spring-mvc - spring mvc模板项目maven插件错误

> ID：15185109
> 
> 赞同：4
> 
> 时间：2013-03-03T11:20:59.933
> 
> 标签：spring-mvc, maven-plugin

在我的 Eclipse 中，我创建了一个新项目，即 New -> Other-> Spring -> Spring Template Project -> Spring MVC Project。

在 pom 我得到以下错误：

在这一行找到多个注释：-生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile（执行：默认-编译，阶段：编译）-CoreException：可以不计算构建计划：插件 org.apache.maven.plugins:maven-compiler-plugin:2.5.1 或其依赖项之一无法解析：无法读取 org.apache.maven.plugins:maven-compiler 的工件描述符-plugin:jar:2.5.1: ArtifactResolutionException: 传输 org.apache.maven.plugins:maven-compiler-plugin:pom:2.5.1 失败
repo.maven.apache.org/maven2 缓存在本地存储库中，直到中央的更新间隔过去或强制更新后才会重新尝试解析。原始错误：无法将工件 org.apache.maven.plugins:maven-compiler-plugin:pom:2.5.1 从/到中央 repo.maven.apache.org/maven2): null 到 repo.maven.apache.org /maven2/org/apache/maven/plugins/maven-compiler-plugin/2.5.1/maven-compiler-plugin-2.5.1.pom - 生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven -compiler-plugin:2.5.1:testCompile（执行：default-testCompile，阶段：test-compile） -CoreException：无法计算构建计划：插件 org.apache.maven.plugins:maven-compiler-plugin:2.5.1或其依赖项之一无法解析：

我确实删除了存储库文件夹和 Maven -> 更新项目。但没有任何效果。

错误来自以下标签：

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-02T02:50:16.143

如果其他人也有这个问题，在我的情况下通过选择 Maven -> Update Project 解决了这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T20:01:59.780

我遇到了同样的问题。我有一堆公司项目，我们有自己的内部 maven repo 和 settings.xml。

但是当我想创建一个通用项目时，它向我抛出了这些错误。我在 Mac 上工作，所以在 eclipse > 首选项 > maven > 用户设置中，我将路径更改为指向 /usr/local/apache-maven/apache-maven-3.2.1/conf/settings.xml 这是全局路径指向 ~/.m2/settings.xml 这是我们本地公司的基础。

更改设置，然后右键单击项目并执行“Maven -> 更新项目”

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:26:46.253

我发现问题出在 settings.xml 的配置中

当我连接到我公司的网络并更新我公司存储库的 settings.xml 时，它似乎可以工作。我可以问一下标签的默认配置是什么，在这种情况下我可以让我的示例应用程序（不是特定于公司，而是）运行。在我的 settings.xml 中，我更新了以下标签：

```
<server>
    <id>myID</id>
    <username>myuser</username>
    <password>myPassword</password>
</server>
<mirrors>
    <mirror>
        <id>mirrorId</id>
        <mirrorOf>repositoryId</mirrorOf>
        <name>Human Readable Name for this Mirror.</name>
        <url>http://my.repository.com/repo/path</url>
    </mirror>
</mirrors>
<profile>
    <id>nexus</id>
    <repositories>
        <repository>
            <id>central</id>
            <url>http://central</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>central</id>
            <url>http://central</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>
</profile>
</profiles> 
```

上述用于运行/创建 Web 应用程序的标签的默认配置是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-01T20:26:23.907

它通过进行项目更新来工作：右键单击项目-->Maven-->

# javascript - 移除鼠标滚轮滚动

> ID：15185111
> 
> 赞同：2
> 
> 时间：2013-03-03T11:21:10.630
> 
> 标签：javascript, jquery, html, css

我有一个高度的 div，`overflow-x: hidden`所以我可以看到垂直滚动条。现在，当我用鼠标滚轮滚动整个页面时，如果我的光标位于该 div 的顶部，它将开始滚动 div 而不是页面。是否可以删除此特定 div 上的鼠标滚动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T11:27:11.543

我不知道该 div 中的内容有多重要，但另一种解决方案可能是使您的指针对 div 没有影响`pointer-events:none`。更多解释[在这里](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:39:31.050

我认为您可以实现与此类似的唯一方法是捕获该特定 div 的 mouseover 事件并禁用整个页面的滚轮，然后在 mouseout 时再次启用它。在这篇文章中，您可以看到如何禁用整个页面的滚轮：[如何暂时禁用滚动？](https://stackoverflow.com/questions/4770025/how-to-disable-scrolling-temporarily)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:23:44.480

不，因为用户希望能够使用鼠标滚轮滚动可滚动区域，并且用户通过将鼠标指针移到其上来选择可滚动区域。

您可以通过设置禁用滚动，`overflow-y: hidden`但这会导致滚动条消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T11:26:20.263

我相信您可以将处理程序添加到

```
onmousewheel 
```

防止它滚动的事件（这被列为 HTML5，因此在旧浏览器中可能不起作用）。这里有完整的活动列表：http: [//www.w3schools.com/tags/ref_eventattributes.asp](http://www.w3schools.com/tags/ref_eventattributes.asp)

# java - Java 套接字 - 关闭与服务器套接字的 telnet 客户端连接

> ID：15185112
> 
> 赞同：1
> 
> 时间：2013-03-03T11:21:16.607
> 
> 标签：java, sockets, telnet, serversocket

我用 Java 创建了一个服务器套接字，它接受来自 telnet 客户端的连接，并与客户端成功通信，但是当关闭服务器上客户端的套接字时，客户端上的终端没有注册套接字的关闭，也没有显示“与主机的连接丢失”消息，这就是我想要的。

服务器套接字必须能够处理多个客户端，所以我不能简单地停止并重新启动它，否则所有活动的客户端都会失去与服务器的连接。

也许我做错了……？有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:37:08.150

啊，愚蠢的错误！我丢失了对客户端套接字的引用，因此在尝试关闭它时，抛出了一个异常，但被抑制了......只需关闭套接字即可关闭客户端的 telnet 会话。

# c++ - OpenGL中多个纹理的问题

> ID：15185121
> 
> 赞同：0
> 
> 时间：2013-03-03T11:21:58.463
> 
> 标签：c++, opengl, glut, textures

我正在尝试编写一个用于将对象加载到我的程序中的类/问题是 OpenGL 仅加载所有对象的最后一个纹理。

这是代码：

game.cpp 类：

```
object =  new Object("table.obj", "wood.bmp",0); // a new object - obj file, texture and 
object1 = new Object("aa.obj", "cloth.bmp",1);   // texture number

object->draw();
object1->draw(); 
```

对象类：

```
AUX_RGBImageRec *texture;

 Object::Object(char* filename, char* texname, int num) {
 tex_num = num;
 is_loaded = false;
.... some vertex stuff here
texture = auxDIBImageLoadA(texname);
}

 void Object::draw() {
if(!is_loaded) {
     loadTexture();
     is_loaded = true;
 }
 ... vertex stuff again
 void Object::loadTexture() {
    GLuint *tex = new GLuint[10];
 unsigned int names[10];
 glGenTextures(1, tex);
 glBindTexture(GL_TEXTURE_2D, tex[tex_num]);
 cout << tex_num << endl;
// glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
 glTexImage2D(GL_TEXTURE_2D, 0, 3,
         texture->sizeX,
         texture->sizeY,
         0, GL_RGB, GL_UNSIGNED_BYTE,
         texture->data);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
 // free memory
 delete tex;
 cout << tex_num << endl;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:45:30.343

为什么要动态分配纹理 ID 变量？为什么在需要时删除它`loadTexture`，以便在绘制时实际参考纹理？OpenGL 不会神奇地将纹理与几何本身关联起来。

以下变化：

```
- Object::Object(char* filename, char* texname, int num) {
+ Object::Object(char* filename, char* texfilename) {

-     tex_num = num;
     is_loaded = false;
    .... some vertex stuff here
-    texture = auxDIBImageLoadA(texname);
+    loadTexture(texfilename);

}

class Object {
/*...*/
+     GLuint texID;
}

void Object::draw() {
-if(!is_loaded) {
-     loadTexture();
-     is_loaded = true;
- }

+  glBindTexure(GL_TEXTURE_2D, texID);
+  draw_geometry();
}

- void Object::loadTexture() {
+ void Object::loadTexture(char const * const texfilename) {

 -    GLuint *tex = new GLuint[10];
 -    unsigned int names[10];
 -    glGenTextures(1, tex);
 -    glBindTexture(GL_TEXTURE_2D, tex[tex_num]);
 -    cout << tex_num << endl;

 +    glGenTexture(1, &texID);
 +    glBindTexture(GL_TEXTURE_2D, texID);
 +    cout << texID << endl;

 +    // Image is a yet to implement class offering image loading
 +    // in a RAII fashion.
 +    Image img = Image::fromFile(texfilename);

 -   // glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
 -    glTexImage2D(GL_TEXTURE_2D, 0, 3,
 -            texture->sizeX,
 -            texture->sizeY,
 -            0, GL_RGB, GL_UNSIGNED_BYTE,
 -            texture->data);

 +   glPixelStorei(GL_UNPACK_ALIGNMENT, img.alignment());
 +    glTexImage2D(GL_TEXTURE_2D, 0,
 +            img.glinternalformat(), // don't use a channel count here!
 +            img.width(),
 +            img.height(),
 +            0,
 +            img.glformat(),
 +            img.gltype(),
 +            img.data() );

     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

-     // free memory
-     delete tex;
-     cout << tex_num << endl;
+     cout << texID << endl;

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:41:20.893

现在你的第一个 draw() 调用加载了你的纹理，你只需要在每次绘制之前调用 glBindTexture(GL_TEXTURE_2D, your_generated_buffer) 。

```
void      Object::draw()
{
       if(!is_loaded)
       {
            loadTexture();
            is_loaded = true;
       }
       glBindTexture(GL_TEXTURE_2D, this->texture_buffer);
       // Your vertex things..
} 
```

例如，如果 this->texture_buffer 代表您生成的纹理缓冲区，顺便说一句，您正在做的事情很奇怪，您正在分配一个 GLuint* 数组？我宁愿向你推荐这个：

```
void Object::loadTexture()
{
     glGenTextures(1, &this->texture_buffer);
     glBindTexture(GL_TEXTURE_2D, this->texture_buffer);
     glTexImage2D(GL_TEXTURE_2D, 0, 3,
                  texture->sizeX,
                  texture->sizeY,
                  0, GL_RGB, GL_UNSIGNED_BYTE,
                  texture->data);
     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
} 
```

希望这可以帮助 ：）

PS：如果你想知道为什么只应用最后一个纹理，那是因为 OpenGL 的工作方式是，他画你想让他画的东西，这要归功于当前激活的纹理、灯光……以及你最后一次调用到 object1->draw()，调用最后一个 loadtexture()，它通过调用 glBindTexture() 激活你的最后一个纹理。

# mongodb - Mongo 作为事件触发器

> ID：15185122
> 
> 赞同：0
> 
> 时间：2013-03-03T11:22:16.297
> 
> 标签：mongodb, triggers, command, queue, timed

我有这种感觉，通过使用 mongo 的服务器端 javascript 功能，mongoDB 也可以用作事件触发系统。

例如

```
 db.system.js.save(
    {
        _id : "timer",
        value : function timer(interval,times,fun){ var s=new Date(); var e=new Date(); var cnt=0; while(cnt<times){ print("audit: "+cnt); eval(fun()); cnt++; s=new Date(); while(e-s < interval){e=new Date();}}};
    }
db.testcol.save({a:timer(1000,3,function(){print(Date() + "Message");})}) 
```

> 输出 =========

```
审核：0
2013 年 3 月 3 日星期日 16:29:46 GMT+0530 (IST)消息
审核：1
2013 年 3 月 3 日星期日 16:29:47 GMT+0530 (IST) 消息
审计：2
2013 年 3 月 3 日星期日 16:29:48 GMT+0530 (IST) 消息

```

没有探索这一切的可能性，但只是这个想法带来了以下 1) 触发事件系统，特定集合充当延迟命令队列。2）延迟/定时持久性

这个还有什么用处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:26:09.023

不，MongoDB 没有触发器：[https ://jira.mongodb.org/browse/SERVER-124](https://jira.mongodb.org/browse/SERVER-124)

触发某些事情的方式不是一种健康的方式，甚至不确定将输出到集合本身的内容，可能是函数的对象或空值。

此外，我相信这只会在控制台中起作用，而永远不会在客户端程序中起作用，除非你使用`eval`（也许，甚至不确定），而且，我什至不需要解释为什么这是不好的。

您可以只使用活动记录（或类似的东西）来完成此操作。

# ios - 错误按钮上的 iOS 标题

> ID：15185123
> 
> 赞同：1
> 
> 时间：2013-03-03T11:22:46.620
> 
> 标签：ios, cocoa-touch, cocoa, uibutton, cgrect

我有一个很奇怪的问题。在一个视图中，我有三个按钮，每个按钮都有一个图像和一个标题。第一个按钮OK，第二个只显示一个图像，第三个显示正确的图像，但标题来自`Button 2`. 如下所示：

```
------------
I  Image 1 I
I  Title 1 I
------------

------------
I  Image 2 I
I          I
------------

------------
I  Image 3 I
I  Title 2 I
------------ 
```

我找不到是什么原因造成的。

我有一个 UIButton 子类，它有一个自定义的 init 方法，如下所示：

```
- (id)initWithFrame:(CGRect)frame withImage:(UIImage *)image andTitle:(NSString *)title
{

    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.backgroundColor = [UIColor clearColor];

        UIImageView *icon = [[UIImageView alloc] initWithImage:image];
        icon.backgroundColor = [UIColor clearColor];
        CGRect iconFrame = icon.frame;
        iconFrame.origin.x = frame.size.width / 2 - iconFrame.size.width / 2;
        iconFrame.origin.y = 5;
        iconFrame.size.height = frame.size.height / 2.5;
        icon.frame = iconFrame;

        [self addSubview:icon];

        UILabel *titleLabel = [[UILabel alloc] initWithFrame:frame];
        titleLabel.textAlignment = NSTextAlignmentCenter;
        titleLabel.font = [UIFont fontWithName:@"TisaMobiPro" size:14];
        [titleLabel setText:title];
        titleLabel.textColor = [UIColor colorWithRed:1.000 green:1.000 blue:1.000 alpha:0.5];
        titleLabel.backgroundColor = [UIColor clearColor];

        CGRect titleFrame = titleLabel.frame;
        titleFrame.origin.y = icon.frame.origin.y + icon.frame.size.height;
        titleFrame.size.height = frame.size.height / 2;
        titleLabel.frame = titleFrame;
        [self addSubview:titleLabel];
    }
    return self;
} 
```

我添加这样的按钮：

```
int numberOfButtons = 3;

CGRect mentionRect = CGRectMake(0, 10,self.menuContainer.frame.size.width / numberOfButtons, self.menuContainer.frame.size.height - 10);
self.mentionButton = [[CustomBarButton alloc] initWithFrame:mentionRect withImage:[UIImage imageNamed:@"Images/Mentions.png"] andTitle:@"Mention"];
[self.menuContainer addSubview:self.mentionButton];

CGRect hashRect = CGRectMake(mentionRect.origin.x + mentionRect.size.width, 10,self.menuContainer.frame.size.width / numberOfButtons, self.menuContainer.frame.size.height - 10);
self.hashtagButton = [[CustomBarButton alloc] initWithFrame:hashRect withImage:[UIImage imageNamed:@"Images/HashTagIcon.png"] andTitle:@"Hashtag"];
[self.menuContainer addSubview:self.hashtagButton];

CGRect photoRect = CGRectMake(hashRect.origin.x + hashRect.size.width, 10, self.menuContainer.frame.size.width / numberOfButtons, self.menuContainer.frame.size.height - 10);
self.photoButton = [[CustomBarButton alloc] initWithFrame:photoRect withImage:[UIImage imageNamed:@"Images/CameraIcon.png"] andTitle:@"Photo"];
[self.menuContainer addSubview:self.photoButton]; 
```

谁能找到造成这种情况的原因，或者对我能做些什么来解决它有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:36:24.647

检查框架设置`UILabel *titleLabel = [[UILabel alloc] initWithFrame:frame];`。您不应将 frame 设置为`frame`init 方法中的输入参数。尝试设置一个静态框架，然后根据您的要求进行修改，以将其放置在该视图中您需要的任何位置。基本上你的`origin.x`价值出了问题，这就是为什么你得到奇怪的输出。

# xcode - 如何从 NSMutableDictionary 获取所有键值？

> ID：15185124
> 
> 赞同：0
> 
> 时间：2013-03-03T11:22:58.383
> 
> 标签：xcode, get, key, nsmutabledictionary

我如何从中获取所有值`NSMutableDictionary`，但仅用于`key @"Column1"`或如何获取键的索引行？我尝试`[dict objectForKey: @"Column1"];`，但我只得到最后的价值`key (user3)`。

示例表：

```
Column1 --  Column2

user1   --  20
user2   --  30
user3   --  50 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:03:14.790

我会使用快速枚举：

```
for (NSMutableDictionary *thisDict in array) {
    NSLog(@"Result for Column1 is %@", [thisDict objectForKey:@"Column1"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:59:19.400

我解决了。

结果是

```
for (int i = 0; i < [array count]; i++){
   NSLog(@"Result for Column1 is %@", [[array objectAtIndex:i]objectForKey:@"Column1"]);
} 
```

# android - Android TCP 服务器客户端

> ID：15185126
> 
> 赞同：0
> 
> 时间：2013-03-03T11:23:00.913
> 
> 标签：android, tcp, client-server

我创建了一个 TCP 服务器（PC）-客户端（Android）应用程序。我将客户端连接到服务器，但是当我重新启动我的 android 应用程序时，我无法建立连接。如何处理这个问题，以便当我重新启动 android 应用程序时，它会连接到服务器的端口？服务器是 VB.net 和客户端 java for android

```
 Sub Main()
    Dim serverSocket As New TcpListener(8888)
    Dim requestCount As Integer
    Dim clientSocket As TcpClient
    serverSocket.Start()
    msg("Server Started")
    clientSocket = serverSocket.AcceptTcpClient()
    msg("Accept connection from client")
    requestCount = 0
    Dim flag As Boolean = True

    While (flag = True)
        Try
            requestCount = requestCount + 1
            Dim networkStream As NetworkStream = _
                    clientSocket.GetStream()
            Dim bytesFrom(10024) As Byte
            networkStream.Read(bytesFrom, 0, CInt(clientSocket.ReceiveBufferSize))
            Dim dataFromClient As String = _
                    System.Text.Encoding.ASCII.GetString(bytesFrom)
            msg("Data from client -  " + dataFromClient)
            Dim serverResponse As String = _
                "Server response " + Convert.ToString(requestCount)
            Dim sendBytes As [Byte]() = _
                Encoding.ASCII.GetBytes(serverResponse)
            networkStream.Write(sendBytes, 0, sendBytes.Length)
            networkStream.Flush()
            msg(serverResponse)
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
    End While

    clientSocket.Close()
    serverSocket.Stop()
    msg("exit")
    Console.ReadLine()
End Sub

Sub msg(ByVal mesg As String)
    mesg.Trim()
    Console.WriteLine(" >> " + mesg)
End Sub

public class connectTask extends AsyncTask<String, String, TCPClient> {

    @Override
    protected TCPClient doInBackground(String... message) {

        // we create a TCPClient object and
        mTcpClient = new TCPClient(new TCPClient.OnMessageReceived() {
            @Override
            // here the messageReceived method is implemented
            public void messageReceived(String message) {
                // this method calls the onProgressUpdate
                publishProgress(message);
            }
        });
        mTcpClient.run();
        return null;
    }

public class TCPClient {
private String serverMessage;
public static final String SERVERIP = "192.168.1.65"; //your computer IP address
public static final int SERVERPORT = 4444;
private OnMessageReceived mMessageListener = null;
private boolean mRun = false;

PrintWriter out;
BufferedReader in;

/**
 *  Constructor of the class. OnMessagedReceived listens for the messages received from server
 */
public TCPClient(OnMessageReceived listener) {
    mMessageListener = listener;
}

/**
 * Sends the message entered by client to the server
 * @param message text entered by client
 */
public void sendMessage(String message){
    if (out != null && !out.checkError()) {
        out.println(message);
        out.flush();
    }
}

public void stopClient(){
    mRun = false;
}

public void run() {

    mRun = true;

    try {
        //here you must put your computer's IP address.
        InetAddress serverAddr = InetAddress.getByName(SERVERIP);

        Log.e("TCP Client", "C: Connecting...");

        //create a socket to make the connection with the server
        Socket socket = new Socket(serverAddr, SERVERPORT);

        try {

            //send the message to the server
            out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);

            Log.e("TCP Client", "C: Sent.");

           //receive the message which the server sends back
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

            //in this while the client listens for the messages sent by the server
            while (mRun) {
                serverMessage = in.readLine();

                if (serverMessage != null && mMessageListener != null) {
                    //call the method messageReceived from MyActivity class
                    mMessageListener.messageReceived(serverMessage);
                }
                serverMessage = null;

            }

            Log.e("RESPONSE FROM SERVER", "S: Received Message: '" + serverMessage + "'");

        } catch (Exception e) {

            Log.e("TCP", "S: Error", e);

        } finally {
            //the socket must be closed. It is not possible to reconnect to this socket
            // after it is closed, which means a new socket instance has to be created.
            socket.close();
            Log.e("Socket","Closed");
        }

    } catch (Exception e) {

        Log.e("TCP", "C: Error", e);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T12:01:58.690

TCP 可能是最常用的协议，仅仅是因为它被用于许多应用程序，例如 HTTP、POP、SMTP 等。TCP 是一种协议，可保证接收者将准确接收发送者发送的内容 - 不会出现错误，它将按照正确的顺序，一切都会正常工作。

```
 try {
        Socket s = new Socket("http://helloandroid.com&quot",80);
} catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
} catch (IOException e) {
        // TODO Auto-generated catch block
       e.printStackTrace();
} 
```

这是一个简单的客户端 TCP 请求。如果连接建立成功，您可以获得通信所需的进程。

现在让我们看一下服务器端示例：

```
try {
    Boolean end = false;
    ServerSocket ss = new ServerSocket(12345);
    while(!end){
            //Server is waiting for client here, if needed
            Socket s = ss.accept();
            BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
            PrintWriter output = new PrintWriter(s.getOutputStream(),true); //Autoflush
            String st = input.readLine();
            Log.d("Tcp Example", "From client: "+st);
            output.println("Good bye and thanks for all the fish :)");
            s.close();
            if ( STOPPING conditions){ end = true; }
    }
ss.close();

} catch (UnknownHostException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

最后看到客户端：

```
 try {
    Socket s = new Socket("localhost",12345);

    //outgoing stream redirect to socket
    OutputStream out = s.getOutputStream();

    PrintWriter output = new PrintWriter(out);
    output.println("Hello Android!");
    BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));

    //read line(s)
    String st = input.readLine();
    . . .
    //Close connection
    s.close();

} catch (UnknownHostException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

而已。希望你发现这会有所帮助。

# visual-studio-2010 - Cmake 生成不正确的配置

> ID：15185127
> 
> 赞同：2
> 
> 时间：2013-03-03T11:23:07.630
> 
> 标签：visual-studio-2010, visual-studio, cmake

我使用 CMake，在我的一台机器上，这一代似乎很混乱。当我在 Visual Studio 2010 中打开项目属性时，调试配置似乎是一个版本：`_DEBUG`未定义，启用优化，链接运行时是版本一（`/MT`而不是`/MTd`），等等...

问题是它会阻止正确构建项目，具体取决于使用 CMake 编译的 dll ......例如，如果 dll 的某些部分仅存在于调试构建中。我正在使用 CMake 2.8.10.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:38:35.840

尝试删除生成的文件并再次运行 cmake。当 MSVS 正在运行并且您使用 CMake 重新生成项目时，有时会发生这种情况。一些设置仍然保留在 MSVS 中，但其他设置会重新生成，所以最后你会一团糟。

# c# - CSS 在 Awesomium 中的功能不一致

> ID：15185129
> 
> 赞同：2
> 
> 时间：2013-03-03T11:23:15.613
> 
> 标签：c#, jquery, css, wpf, awesomium

我正在使用 Awesomium 1.6.5 来呈现我的应用程序的大部分用户界面，并注意到 CSS 加载中的一些不一致。第一次打开窗口时，CSS 将正常运行并加载样式。

然而，过了那一点，样式是否适用似乎是随机的。左侧的窗口显示样式正常运行，右侧的窗口显示样式失败。

![CSS 不一致](../Images/b9587c0fc950e723f81fa7c5c653aede.png)

由于这些按钮是 jQuery UI（1.10.1 和 jQuery 1.9.1），我的第一个想法是创建这些按钮的 JavaScript 没有被执行，所以我将它从页面的 HTML 内部移动到应用程序，确保在用户看到页面之前执行 JavaScript。

这没有任何区别，问题仍然存在。

所有 CSS（我的样式表和 jQuery UI 的样式表）在`WebCore`初始化时通过加载`WebCoreConfig.CustomCSS`，然后传递给`WebCore`. 正在呈现的页面在其 HTML 中确实有一些样式（使用`<style>`标签）。

设置窗口类是一个单例，它处理实际 WPF 窗口的实例化和管理，每次`SettingsWindow.Show()`调用该方法时，都会关闭 WPF 窗口的先前实例（与 Awesomium 一起`WebControl`）并创建一个新实例。创建此实例后，将执行相应的 JavaScript。这是`Initialise()`功能：

```
// Host is an instance of AwesomiumHost, a WPF window containing an Awesomium
// WebControl control.
public static void Initialise()
{
    if (Host != null)
    {
        Host.webControl.Close();
        Host.Close();
    }

    Host = new AwesomiumHost(Resources.Markup.SettingsPage)
    {
        Width = 810,
        Height = 640,
        Title = "Settings"
    };

    var webControl = Host.webControl;

    webControl.ExecuteJavascript(Markup.jQuery);
    webControl.ExecuteJavascript(Markup.Cufon);
    webControl.ExecuteJavascript(Markup.CufonOpenSans);
    webControl.ExecuteJavascript(
        "Cufon.replace('.title, .section-hdr', { "
            + "color: '-linear-gradient(#555, #222)'"
        + " }); "
        + "Cufon.replace('.text');"
    );
    webControl.ExecuteJavascript("$(function() {"
        + "$( '#host-choice' ).buttonset();"
        + "$( '#backup-choice' ).buttonset();"
    + "});");
    webControl.ExecuteJavascript(
        "Cufon.replace('.title', { "
            + "color: '-linear-gradient(#555, #222)'"
        + " }); "
        + "Cufon.replace('.text');"
    );
    webControl.ExecuteJavascript(@"
    $(function() {
        $( '#host-choice' ).buttonset(); // Where jQuery should create the buttons
        $( '#backup-choice' ).buttonset();
    });");

    webControl.LoadCompleted += (s, e) =>
        webControl.ExecuteJavascript(
        "$('#x').click();");
    // Sets the state of the "No" button (shown in image) to "pressed."
} 
```

所以我问，为什么按钮加载不一致，可以做些什么来解决这个问题？

# iphone - 在 XCode 4.6 上为 iOS5 创建项目

> ID：15185130
> 
> 赞同：5
> 
> 时间：2013-03-03T11:23:38.290
> 
> 标签：iphone, ios, xcode

请告诉我，如何在我的 XCode 4.6 中为 iOS5 + 创建项目，其中所有构建为 iOS6 +

我更改部署目标

![在此处输入图像描述](../Images/31d5015b59c5c56f837e710a10cd62b7.png)

以及如何更改基础SDK？或者也许我无法改变它？

![在此处输入图像描述](../Images/60c94f292fd2b77aeb284054baf62191.png)

我必须做什么，如果我尝试使用只能在 iOS 6+ 中使用的方法，我的 XCode 会向我显示警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T11:35:15.077

> 首先你应该明白一些事情。**部署目标**是您的应用支持的最低操作系统版本。如果您设置为 iOS 5.0，则可以确保它支持 iOS 5.0 及更高版本。 **Base SDK**是用于编译您的应用程序的 SDK。始终使用可用的最新 SDK。
> 
> 如果要创建支持 iOS5.0 及以上的应用，请将部署目标设置为 5.0。然后使用可用的最新 SDK。原因是如果您将基础 SDK 更改为较低版本，您的应用程序可能不支持 ios6，因为某些方法在 iOS6 中已弃用。如果你用最新的 SDK 编译它，它会显示警告。您可以通过安装不同的模拟器来测试您的应用程序，以检查它是否正常工作。主要是您需要处理**方向**问题，因为两者都不同。

您可以使用**条件编译**。记住不要使用**自动布局**和**属性**字符串。ios5不支持哪个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:42:47.350

对于您的第一个问题，据我所知，后续版本也将支持 ios 5 api。您应该将目标设置为 ios 5.0（通过您的项目目标设置），以确保不使用任何 ios6 方法（否则编译错误将阻止您构建它）。

为了支持新功能并检查 ios6 在设备上是否可用，您有两种方法：

1.  在编译期间（因此您仍然可以使用较低的目标和更新的目标一起构建您的应用程序）使用以下宏

> ```
> #if __IPHONE_OS_VERSION_MIN_REQUIRED > __IPHONE_6_0
>  // Your ios6 code goes here
> #endif 
> ```

2：在运行时：`[[[UIDevice currentDevice] systemVersion] floatValue] > 6.0`

# c++ - 在 C++ 中访问类字段

> ID：15185131
> 
> 赞同：0
> 
> 时间：2013-03-03T11:23:43.993
> 
> 标签：c++, class, this, field

我无法访问以下 C++ 代码中的 class'es 字段：

```
class Human
{
     string address;
 public:
     void setAddress( string address )
     {
         this.address = address;
     }
}; 
```

此代码将导致错误“错误 C2228：'.address' 左侧必须具有类/结构/联合”。正确的做法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T11:24:20.487

`this`是指向您当前实例的指针，因此您应该使用`->`而不是点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:32:13.173

```
 class Human
{
     string m_address;
 public:
     void setAddress( string address )
     {
         m_address = address;
     }
}; 
```

与 JavaScript 不同，您不需要使用“this”。这里通常给函数参数一个不同的名称以避免歧义

# c# - bltoolkit sql 查询明确设置

> ID：15185133
> 
> 赞同：1
> 
> 时间：2013-03-03T11:23:57.930
> 
> 标签：c#, .net, mapping, bltoolkit

有什么方法可以从 bltoolkit 获取 SQL 查询结果？我需要明确设置查询..

例如：

```
SELECT * FROM table 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:10:45.157

是的。DbManager 类包含一些适当的方法：ExecuteList、ExecuteReader、ExecuteObject、ExecuteDataTable、SetSpCommand 等。参见：[http ://bltoolkit.net/Doc.Data.ashx](http://bltoolkit.net/Doc.Data.ashx)

样本：

```
[MapField("PersonID", "ID")]
public class Person
{
    public int    ID;

    public string LastName;
    public string FirstName;
    public string MiddleName;
    public Gender Gender;
}

IList<Person> GetPersonListSqlText()
{
    using (DbManager db = new DbManager())
    {
        return db
            .SetCommand("SELECT * FROM Person")
            .ExecuteList<Person>();
    }
} 
```

# php - PHP正则表达式查找具有多个值的字符串

> ID：15185134
> 
> 赞同：0
> 
> 时间：2013-03-03T11:24:04.700
> 
> 标签：php, regex

我的问题与这个字符串有关：`Mage::helper('catalog/image')->init($product, 'image', $image->getFile())->resize(265)`

我试图找到一种方法来找到这个字符串。但是...在字符串中是：$product、image 和 265 变量。所以我需要找到像这样的字符串：
`Mage::helper('catalog/image')->init($product, 'image', $image->getFile())->resize(265)` `Mage::helper('catalog/image')->init($product, 'thumb', $image->getFile())->resize(75)` `Mage::helper('catalog/image')->init($image, 'mini', $image->getFile())->resize(25)` 等......

现在我有这个，但它只是在文件中搜索`Mage::helper('catalog`

```
function listFolderFiles($dir){
    $ffs = scandir($dir);
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..'){
            if(is_dir($dir.'/'.$ff)) listFolderFiles($dir.'/'.$ff);
            if(strpos($ff, '.phtml')!==false){
                $contents = file_get_contents($dir.'/'.$ff);
                $pattern = preg_quote("Mage::helper('catalog", "/");
                $pattern = "/^.*$pattern.*\$/m";
                if(preg_match_all($pattern, $contents, $matches)){
                   echo "Found matches in: ".$dir.'/'.$ff."\n";
                }
                else{
                   echo "No matches found in: ".$dir.'/'.$ff."\n";
                }
            }
        }
    }
}

listFolderFiles('../app/design'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:21:13.277

没有明显的需要`"/^.*$pattern.*\$/m"`,`preg_match_all`或`$matches`

```
$pattern = "/Mage::helper\('catalog\/image'\)->init\([^)]+?image->getFile\(\)\)->resize\(\d+\)/";
if ( preg_match($pattern, $contents) ) {
    // do stuff
} 
```

这将匹配任何包含 的字符串`"Mage::helper('catalog/image')->init(Ximage->getFile())->resize(Y)"`，
其中`X`一个或多个字符不是`)`，并且`Y`是一个或多个数字。

# javascript - 使用 javascript 加载 XSL 文件

> ID：15185136
> 
> 赞同：2
> 
> 时间：2013-03-03T11:24:07.533
> 
> 标签：javascript, xml, html, xslt

我正在构建一个 Web 应用程序，它将用 ascii 编写的数学方程转换为 MathML 格式，然后将 MathML 格式转换为 OMML 格式。为此，我找到了一个使用***XSLTProcessor***将 MathML 转换为 OMML 的 xsl 文件。在我的脚本中，我设法构建了 MathML 文件并加载它，并对其进行转换，我在加载 xsl 文件时遇到了严重问题：

```
 var xsltProcessor=new XSLTProcessor();
    xsltProcessor.importStylesheet("MML2OMML.XSL"); 
```

该应用程序只是一个客户端，它将用于个人用户，因此没有服务器。所以知道chrome有权限问题：

> Access-Control-Allow-Origin 不允许 Origin null。

***我了解到，除非我将FileReader***与***HTML5***一起使用，否则我无法从本地文件系统加载 xsl 文件，但这需要我使用表单输入，我不想要这个。

所以我尝试使用***XMLHttpRequest***将文件放在我的公用文件夹中，使用以下代码：

```
 var request = new XMLHttpRequest();
    var url = "http://dl.dropbox.com/u/27440550/MML2OMML.XSL";
    request.open("GET",url,true);
    request.send();
    console.log(request.responseXML); 
```

我仍然有同样的错误

> Access-Control-Allow-Origin 不允许 Origin null。

Chrome检测到被访问的文件是本地文件时，不是会产生这个错误吗？为什么他认为文件在公共存储（Dropbox）上时是本地的？

已经两天了，我正在寻找答案，我真的很沮丧。有人可以为我提供解决方案吗？谢谢：）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:55:43.850

如果您从 file:/// 将应用程序作为离线应用程序运行，那么 XSLT 文件是否在线并不重要；两个来源都必须一致，并且对于您的应用程序，它仍然是“null”，因此您将无法获取该 XSLT 文件。如果应用程序确实只是客户端，请将该 XSLT 文件作为客户端在获取应用程序时下载的数据的一部分包含在内，并将其存储为 base64 编码文本，以便您可以使用 Javascript 解压缩并注入它，或者让它坐下来在与您的 index.html 相同的目录中，然后使您生成的 XML 将样式表作为相对链接加载。

# javascript - d3js时间格式

> ID：15185149
> 
> 赞同：0
> 
> 时间：2013-03-03T11:25:35.853
> 
> 标签：javascript, graph, d3.js

我是 d3 的新手，所以很抱歉这个问题有一个明显的答案。我正在尝试创建一个简单的路径，并将输入作为类似的 json 文件

```
 var data = [{"date":"2012-10-22","debit":"150.00"},
                {"date":"2012-10-29","debit":"1650.00"}, ..... 
```

然后我试着做一个规模

```
 var x = d3.time.scale()
            .domain(d3.extent(data, function(d) { return (d.date); }))
            .range([0, w]); 
```

d3.extend 返回正确的值，但是当我将它输入到行和路径中时，我得到 NaN。以下是我的代码

```
 var margin = {top: 20, right: 50, bottom: 30, left: 50},
        w = 600 - margin.left - margin.right,
        h = 400 - margin.top - margin.bottom,
        barPadding = 3,

    var debitMax = d3.max(data, function (d) { return + d.debit;});
    var x = d3.time.scale()
            .domain(d3.extent(data, function(d) { return (d.date); }))
            .range([0, w]);
    var y = d3.scale.linear()
            .domain([0, debitMax])
            .range([h, 0]);

    var valueline = d3.svg.line()
            .x(function(d) { return x((d.date)); })
            .y(function(d) { return y(d.debit); })
            .interpolate("basis");

    var svgContainer = d3.select("div").append("svg")
            .attr("width", w + margin.left + margin.right)
            .attr("height", h + margin.top + margin.bottom)

    var debitPath = svgContainer
            .append("path")
            .attr("d", valueline(data)); 
```

这就是我在萤火虫上得到的

```
 Error: Problem parsing d="MNaN,318.181818 .......... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:31:48.410

JSON 中的日期实际上并不是 Javascript 可以以合理的方式处理的东西——您需要将其解析为日期对象。d3 为此提供了各种功能（请参阅[文档](https://github.com/mbostock/d3/wiki/Time-Formatting)）。在你的情况下，你需要类似的东西

```
var parseDate = d3.time.format("%Y-%m-%d").parse;
...
.domain(d3.extent(data, function(d) { return parseDate(d.date); }))
...
.x(function(d) { return x(parseDate(d.date)); }) 
```

# php - homebrew-php 中缺少 PHP53 或 PHP54

> ID：15185152
> 
> 赞同：12
> 
> 时间：2013-03-03T11:26:00.110
> 
> 标签：php, composer-php, homebrew

用这个命令

```
$ brew install josegonzalez/php/composer 
```

我收到这条消息

```
Missing PHP53 or PHP54 from homebrew-php. Please install one or the other before continuing
Error: An unsatisfied requirement failed this build. 
```

我有带有 MAMP 的 MacOsX 10.7。有人能帮我吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-24T09:14:59.963

如果你已经安装了 php，你可以`--ignore-dependencies`在例子中通过参数忽略依赖：

```
brew install composer --ignore-dependencies 
```

或者，如果您没有 php，则必须先通过以下方式安装：

```
brew install php55 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-26T11:07:21.743

我使用 OSX 10.9 并使用 XAMPP。

我也有这个问题。

但是我使用brew install php，然后成功安装composer。

```
brew install php54 
```

* * *

**更新**

或者

```
brew install php55 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-09T15:17:45.983

你看到这个警告了吗？

> 警告：未安装开发者工具。
> 安装命令行工具：xcode-select --install

如果是这样，它可能会解决您的问题：

```
xcode-select --install
brew install php55
brew install composer 
```

它对我有用。警告，xcode-select 安装需要很长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T08:24:04.310

我在通过 Homebrew 将 PHP 从 5.4.14 升级到 5.4.16 时遇到了这个问题`brew intsall php-cs-fixer`（如果你已经是最新的，可以尝试重新安装）并在我的 PATH 环境变量中删除了多个 PHP 路径。不确定哪个位为我修复了它，但它现在可以正常工作。

还建议我尝试`brew install --env-std php-cs-fixer`Homebrew IRC 频道，它对我不起作用，但可能对其他人有用。

希望对遇到同样问题的人有所帮助！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-29T16:59:29.593

我遇到了同样的问题，我建议手动安装它：

```
$ curl -s https://getcomposer.org/installer | php

$ php composer.phar 
```

# sql-server - 如何加快 SQL Server 中的 select 语句

> ID：15185156
> 
> 赞同：2
> 
> 时间：2013-03-03T11:26:13.480
> 
> 标签：sql-server, visual-studio-2010, sql-server-2008, datagridview

我有一个非常简单的 select 语句，简单到：

```
SELECT * FROM vContacts 
```

vContacts 是从 tblContacts 表创建的视图，其中只有 218 条记录。
当我使用上述选择查询时，它需要整个 9.89 秒！填充DataGridView！
我在我的表格上使用`View`，`DataGridview`因为名称应该是波斯语而不是英语，并且所有字段都存在，没有别的）。
当我尝试在`Visual Studios 2010`built-in 中执行 view 语句时`SQL Designer`，速度非常快！但在我的 Windows 窗体上需要 10 秒！

更准确地说：

这是视图声明：

```
SELECT ID, Name, Tel, Mobile, Address, Description
FROM  dbo.tblTel 
```

我使用这种方法来检索整个表

```
public static DataTable GetTable(string tableName, string conncetionString, bool structureOnly = false)
        {
            DataTable table = new DataTable();
            string query = structureOnly ? string.Format("SELECT * FROM {0} WHERE 1=0", tableName) : string.Format("SELECT * FROM {0} ", tableName);
            SqlConnection connection = new SqlConnection(conncetionString);
            connection.Open();
            SqlCommand command = new SqlCommand(query, connection);
            SqlDataAdapter reader = new SqlDataAdapter(command);
            reader.Fill(table);
            connection.Close();
            return table;
        } 
```

并像这样使用它：

```
dataGridView.DataSource = DBAPI.GetTable(vContacts,DBAPI.ConnectionString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:29:17.807

如果您在 SQL 设计器中执行查询，您将在计算第一行后立即看到它们，尽管查询本身可能需要数小时才能完成。

当您执行 C# 代码时，在查询完成之前不会重新绘制网格（即显示值）。

我不太确定内置的 SQL 设计器，但是如果您在 SSMS 中执行查询，您会在右下角看到总执行时间。此外，尽管计时器仍在计时并且取消按钮（带有红点）处于活动状态，您仍会看到结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:34:02.863

I Found The problem.It was caused by the `DataGridView` Component.
`DotnetBars DataGridViewX` has some terrible issues in this regard , Since when i tried using the ordinary `DataGridView` it took less than a second ( couple of milliseconds actually) to show ALL records while the `DotnetBar's DataGridViewX` took a whole 10 seconds to show only 218 records !!! So as a rule of thumb, I should never ever use 3rd Party controls specially the DotnetBars!

# django - Django No Pet 匹配给定的查询

> ID：15185161
> 
> 赞同：2
> 
> 时间：2013-03-03T11:27:06.190
> 
> 标签：django

我有一个简单的宠物应用程序。

该应用程序显示所有宠物商店，当您点击宠物商店时。你会看到所有的宠物名字，图片。

问题是在我创建了第一个宠物和其他宠物之后。该模板不会更新新的宠物。所以，它只显示第一个宠物。

所以当我删除第一个宠物时。它显示未找到页面 (404)，即使 . 我在商店中添加了新宠物。

我尝试在模板中使用 for 循环，但它显示一个错误，我无法对其进行迭代，一位朋友告诉我，当您只呈现单个数据时不要使用 for 循环。

如何在商店展示更多宠物？

我认为问题出在我的animal.html 也是我的views.py

我的动物.html

```
 {% if pet %}
 <li>Pet = {{ pet.animal }}</li>
 <li>description = {{pet.description}} </li>

 <img src="{{ pet.image.url }}">
 {% endif %} 
```

我的商店.html

```
 Sydney's Pet Store
 {% if store %}
 <ul>
    {% for a in store %}
    <li><a href ="{% url world:brazil a.id %}">{{ a.name }}</li>
    {% endfor %}

 </ul>
 {% endif %} 
```

我的观点.py

```
 from pet.models import Store , Pet
 from django.shortcuts import render_to_response ,get_object_or_404

 def index(request):
    store = Store.objects.all()
    return render_to_response ('store.html',{'store':store})

 def brazil(request , animal_id):
    pet = get_object_or_404(Pet, pk=animal_id)
    return render_to_response ('animal.html',{'pet':pet}) 
```

我的模型.py

```
 from django.db import models

 class Store(models.Model):
    name = models.CharField(max_length = 20)
    number = models.BigIntegerField()
    address =models.CharField(max_length = 20)
    def __unicode__(self):
    return self.name

 class Pet(models.Model):
    animal = models.CharField(max_length =20)
    description = models.TextField()
    owner = models.ForeignKey(Store)
    image = models.FileField(upload_to="images/")

    def __unicode__(self):
        return self.animal 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:33:54.900

如果要显示超过 1 个数据，则必须使用过滤器而不是 get_object_or_404。如果您只想显示 1 个数据，您将使用 get_object_or_404。

```
def brazil(request , owner_id):
    pets = Pet.objects.filter(owner_id=owner_id)
    return render_to_response ('animal.html',{'pets':pets})

{% if pets %}
 <ul>
    {% for pet in pets %}
    <li>
        Pet = {{ pet.animal }}<br/>
        description = {{pet.description}}<br/> 
        <img src="{{ pet.image.url }}">
    </li>
    {% endfor %}

 </ul>
 {% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:36:24.020

在您的视图中创建一个查询集（类似） -

```
 def brazil(request , animal_id):
    pets = Pet.objects.all()
    return render_to_response ('animal.html',{'pets':pets}) 
```

然后在您的模板中迭代它 -

```
{% for pet in pets %}
 <li>Pet = {{ pet.animal }}</li>
 <li>description = {{pet.description}} </li>
 <img src="{{ pet.image.url }}">
{% endfor %} 
```

查看查询[集文档](https://docs.djangoproject.com/en/1.5/topics/db/queries/)，了解如何将所需的对象传递给模板

# javascript - JavaScript 运行时错误：无法获取未定义或空引用的属性“removeChild”

> ID：15185165
> 
> 赞同：2
> 
> 时间：2013-03-03T11:27:11.820
> 
> 标签：javascript, gridview, windows-store-apps, bing-maps

我正在为 Windows 8 应用程序使用网格应用程序模板，并在默认模板的最后一个视图之后添加了一个新视图。

这是我推送新视图的代码：

```
function ShowOnMap() {
    //"shows" the selected shop on a map
    //TODO use google geocoding because bing maps don't support greek streets (except big ones)
    var splitAddress = address.split(": ");
    nav.navigate("/pages/mapsDetails/bingMaps.html", { address: splitAddress[1] });
} 
```

这是我的新视图的 html 代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>map</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <script type="text/javascript" src="ms-appx:///Bing.Maps.JavaScript//js/veapicore.js"></script>
    <script type="text/javascript" src="ms-appx:///Bing.Maps.JavaScript//js/veapiModules.js"></script>

    <script src="/pages/mapsDetails/bingMaps.js"></script>
</head>
<body>
    <div class="map fragment">
        <header aria-label="Header content" role="banner">
            <button id="buttonBack" class="win-backbutton" aria-label="Back" disabled type="button"></button>
            <h1 class="titlearea win-type-ellipsis"><span class="pagetitle">Αναπαράσταση στον χάρτη</span></h1>
        </header>
        <section aria-label="Main content" role="main">
            <div id="content" style="display: -ms-grid; -ms-grid-rows: 1fr 1fr; -ms-grid-columns: 100% 0%; height: 90%; overflow: hidden;">
                <div id="leftContainer" style="-ms-grid-column: 1; -ms-grid-row: 1; -ms-grid-row-span: 2;">
                    <div id="myMap" style="position: relative; width: 100%; height:90%; "></div>
                </div>
                <div id="rightContainer" style="-ms-grid-column: 2; -ms-grid-row: 1;"></div>
            </div>
        </section>
    </div>
</body>
</html> 
```

这是我的 JavaScript 代码：

```
// For an introduction to the Page Control template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232511
var map, geoLocationProvider, gpsLayer, addressForGeocoding, searchManager;

(function () {
    "use strict";

    WinJS.UI.Pages.define("/pages/mapsDetails/bingMaps.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.
        ready: function (element, options) {
            //i only get the city because greek addresses not supported by bing maps only major ones...s
            //TODO use google geocoding service.
            var city = options.address.split(",");
            addressForGeocoding = city[city.length - 1];
            Microsoft.Maps.loadModule('Microsoft.Maps.Map', { callback: initMap });
        },
    });
})();

function initMap() {
    //initilize a map and a searchManager
    try {
        var mapOptions =
        {
            credentials: "MYKEY",
            zoom: 2
        };

        map = new Microsoft.Maps.Map(document.getElementById("myMap"), mapOptions);

        gpsLayer = new Microsoft.Maps.EntityCollection();
        map.entities.push(gpsLayer);

        if (!searchManager) {
            map.addComponent('searchManager', new Microsoft.Maps.Search.SearchManager(map));
            searchManager = map.getComponent('searchManager');
        }

        if (searchManager) {
            geocodeRequest();
        }
        else {
            Microsoft.Maps.loadModule('Microsoft.Maps.Search', { callback: geocodeRequest });
        }
    }
    catch (e) {
        var md = new Windows.UI.Popups.MessageDialog(e.message);
        md.showAsync();
    }
}

function geocodeRequest() {
    // geocode api request
    // var where = greekToGreeklish(addressForGeocoding); //thats the right one but crashes the app when address is in Greece
    var where = 'Volos';
    var userData = { name: 'Maps Test User', id: '' };
    var request =
    {
         where: where,
         count: 2,
         bounds: map.getBounds(),
         callback: onGeocodeSuccess,
         errorCallback: onGeocodeFailed,
         userData: userData
    };
    searchManager.geocode(request);
}

function onGeocodeSuccess(result, userData){
    // geocode api request success callback
    if (result) {
         map.entities.clear();
         var MM = Microsoft.Maps;
         var topResult = result.results && result.results[0];
         if (topResult){
            var pushpin = new MM.Pushpin(topResult.location, null);
            map.setView({ center: topResult.location, zoom: 10 });
            map.entities.push(pushpin);
         }
    }
}

function onGeocodeFailed(result, userData){
    // geocode api request failure callback
    var md = new Windows.UI.Popups.MessageDialog("Geocode failed");
    md.showAsync();
}

function greekToGreeklish(transormString){
    //convert greek characters to english
    transormString = transormString.replace("ς", "s");
    transormString = transormString.replace("ε", "e");
    transormString = transormString.replace("Ε", "e");
    transormString = transormString.replace("έ", "e");
    transormString = transormString.replace("E", "e");
    transormString = transormString.replace("ρ", "r");
    transormString = transormString.replace("Ρ", "r");
    transormString = transormString.replace("τ", "t");
    transormString = transormString.replace("Τ", "t");
    transormString = transormString.replace("υ", "i");
    transormString = transormString.replace("Y", "u");
    transormString = transormString.replace("ύ", "u");
    transormString = transormString.replace("Ύ", "u");
    transormString = transormString.replace("θ", "th");
    transormString = transormString.replace("Θ", "th");
    transormString = transormString.replace("ι", "i");
    transormString = transormString.replace("É", "e");
    transormString = transormString.replace("Ί", "i");
    transormString = transormString.replace("ί", "i");
    transormString = transormString.replace("ο", "o");
    transormString = transormString.replace("ό", "o");
    transormString = transormString.replace("Ο", "o");
    transormString = transormString.replace("Ο", "o");
    transormString = transormString.replace("π", "p");
    transormString = transormString.replace("Π", "p");
    transormString = transormString.replace("α", "a");
    transormString = transormString.replace("ά", "a");
    transormString = transormString.replace("Α", "a");
    transormString = transormString.replace("Ά", "a");
    transormString = transormString.replace("σ", "s");
    transormString = transormString.replace("Σ", "s");
    transormString = transormString.replace("δ", "d");
    transormString = transormString.replace("Δ", "d");
    transormString = transormString.replace("Φ", "f");
    transormString = transormString.replace("φ", "f");
    transormString = transormString.replace("γ", "g");
    transormString = transormString.replace("Γ", "g");
    transormString = transormString.replace("η", "i");
    transormString = transormString.replace("ή", "i");
    transormString = transormString.replace("H", "i");
    transormString = transormString.replace("Ή", "i");
    transormString = transormString.replace("ξ", "ks");
    transormString = transormString.replace("Ξ", "ks");
    transormString = transormString.replace("κ", "k");
    transormString = transormString.replace("Κ", "k");
    transormString = transormString.replace("λ", "l");
    transormString = transormString.replace("Λ", "l");
    transormString = transormString.replace("ζ", "z");
    transormString = transormString.replace("Ζ", "z");
    transormString = transormString.replace("χ", "ch");
    transormString = transormString.replace("Χ", "CH");
    transormString = transormString.replace("Ψ", "ps");
    transormString = transormString.replace("ψ", "ps");
    transormString = transormString.replace("ω", "o");
    transormString = transormString.replace("ώ", "o");
    transormString = transormString.replace("ω", "o");
    transormString = transormString.replace("ω", "o");
    transormString = transormString.replace("Β", "b");
    transormString = transormString.replace("β", "b");
    transormString = transormString.replace("ν", "n");
    transormString = transormString.replace("N", "n");
    transormString = transormString.replace("μ", "m");
    transormString = transormString.replace("Μ", "m");
    transormString = transormString.replace("Ί", "i");
    transormString = transormString.replace("σ", "s");
    transormString = transormString.replace("ς", "s");
    transormString = transormString.replace("ρ", "r");
    transormString = transormString.replace("Ρ", "r");
    transormString = transormString.replace("ε", "e");
    transormString = transormString.replace("λ", "l");
    transormString = transormString.replace("ς", "s");
    transormString = transormString.replace("ό", "o");
    return transormString;

} 
```

**例外**

```
Unhandled exception at line 1, column 204138 in ms-appx://a4614649-5225-4e7c-80f5-362bb99b91ff/Bing.Maps.JavaScript//js/veapicore.js

0x800a138f - JavaScript runtime error: Unable to get property 'removeChild' of undefined or null reference 
```

**这是控制台**

```
'WWAHost.exe' (Script): Loaded 'Script Code (MSAppHost/1.0)'. 
Exception was thrown at line 1, column 3756 in ms-appx://a4614649-5225-4e7c-80f5-362bb99b91ff/Bing.Maps.JavaScript//js/veapicore.js
0x800a139e - JavaScript runtime error: SyntaxError
Exception was thrown at line 1, column 3756 in ms-appx://a4614649-5225-4e7c-80f5-362bb99b91ff/Bing.Maps.JavaScript//js/veapicore.js
0x800a139e - JavaScript runtime error: SyntaxError
Exception was thrown at line 1, column 45932 in ms-appx://a4614649-5225-4e7c-80f5-362bb99b91ff/Bing.Maps.JavaScript//js/veapicore.js
0x8000ffff - JavaScript runtime error: Unexpected call to method or property access.
Exception was thrown at line 1, column 3756 in ms-appx://a4614649-5225-4e7c-80f5-362bb99b91ff/Bing.Maps.JavaScript//js/veapicore.js
0x800a139e - JavaScript runtime error: SyntaxError
Exception was thrown at line 1, column 3756 in ms-appx://a4614649-5225-4e7c-80f5-362bb99b91ff/Bing.Maps.JavaScript//js/veapicore.js
0x800a139e - JavaScript runtime error: SyntaxError
Unhandled exception at line 1, column 204138 in ms-appx://a4614649-5225-4e7c-80f5-362bb99b91ff/Bing.Maps.JavaScript//js/veapicore.js
0x800a138f - JavaScript runtime error: Unable to get property 'removeChild' of undefined or null reference
The program '[4060] WWAHost.exe' has exited with code -1 (0xffffffff). 
```

**当我按下后退按钮时，如何修复该崩溃。它应该可以在没有任何代码的情况下运行良好，我只是推送和弹出视图......**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T04:01:05.027

我得到了同样的错误。它大约有 10% 的时间发生。当你得到一个异常时，它是一条指向 veapicore.js 的单行

```
v.parentNode.removeChild(v); //where parentNode is null which when it causes the problem 
```

然后，当您查看 a what is v 时，您会看到它`NavBar_ModeSelectorControl`是 BingMaps 的控制面板。我的解决方法是不使用控制面板，这个错误就消失了。创建没有控制面板的地图：

```
Microsoft.Maps.loadModule('Microsoft.Maps.Map', {
            callback: function () {
                try {
                    var mapDiv = document.getElementById("mapdiv");
                    var mapOptions =
                    {
                        credentials: BING_MAP_KEY,
                        mapTypeId: Microsoft.Maps.MapTypeId.birdseye,
                        showDashboard: false //<--- disables the control panel
                    };
                    BingMap.Map = new Microsoft.Maps.Map(mapDiv, mapOptions);
                }
                //... 
```

我也在等待官方解决这个问题。

# symfony - symfony 2 表单中的复选框

> ID：15185167
> 
> 赞同：4
> 
> 时间：2013-03-03T11:27:27.937
> 
> 标签：symfony, symfony-2.1

我在控制器中定义了一个表单，如下所示：

```
$addForm = $this->createFormBuilder()
            ->add('userIds', 'collection', array(
                'type' => 'checkbox',
                'allow_add' => true,
                'options' => array(
                    'required' => false
                )
            ))
            ->add('userId', 'hidden')
            ->getForm(); 
```

在视图中，我正在显示一个带有批量删除选项的数据网格。我正在使用 knp paginator 进行分页。我在视图中手动渲染字段，如下所示：

```
//Inside loop
 {%for items in pagination %}
<input type="checkbox" name="form[userIds][]" class="ids" value="{{items.id}}"/>
 {%endfor%} 
```

我在发布请求后在控制器中获取数据，如下所示：

```
 var_dump($data['userIds']); 
```

当用户选择假设三个复选框时，我得到如下输出：

```
array (size=4)
0 => boolean true
1 => boolean true
2 => boolean true
3 => boolean true 
```

这些值应该包含像 1,5,6,7 这样的用户 ID，但我只得到布尔值。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:39:55.687

考虑使用[实体字段类型](http://symfony.com/doc/2.1/reference/forms/types/entity.html)：使用`expanded`和`multiple`属性进行调整，您将获得一个复选框列表，这些复选框将在提交时绑定到您的模型架构。

# imap - imap_search "FROM" 问题

> ID：15185168
> 
> 赞同：0
> 
> 时间：2013-03-03T11:27:31.713
> 
> 标签：imap, search

我尝试按以下标准进行搜索：

```
imap_search($this->box, 'FROM "@avito.ru"'); 
```

我遇到了这样的问题：

```
2013/03/03 11:24:23 [error] 12481#0: *102 FastCGI sent in stderr: "PHP message: PHP Notice:  Unknown: NOT IMPLEMENTED (errflg=2) in Unknown on line 0" while reading upstream, client: 9*.2*6.1*9.18*, server: 1*6.1*.1*8.*3, request: "GET /testmail.php HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "r*****ger.ru" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:10:18.107

您应该做的是检查它是 IMAP 问题还是 PHP 问题。尝试使用 telnet 手动连接到 IMAP 服务器（或者，如果服务器使用 SSL 并且您在 Windows 上，则需要像我的[IMAPTalk](http://gigi.nullneuron.net/comp/imaptalk.php)客户端这样的东西）。

登录并选择文件夹（如果您在登录窗口中提供凭据和文件夹名称，则在 IMAPTalk 中自动完成），然后输入您的搜索命令，例如：

```
01 SEARCH FROM "@avito.ru" 
```

看看有什么反应。如果此时出现错误，您就知道这是 IMAP 服务器的问题。

我还建议尝试不带引号的查询，即

```
01 SEARCH FROM @avito.ru 
```

# c# - 仅当列表视图中的选定行具有元素 C# 时才在列表视图中启用上下文菜单项

> ID：15185177
> 
> 赞同：1
> 
> 时间：2013-03-03T11:28:14.773
> 
> 标签：c#, winforms, listview, windows-forms-designer, contextmenustrip

假设我有一个包含项目的列表视图

```
apple
banana
beans 
```

我将 contextmenustrip 附加到列表视图，例如添加 contextmenustrip 项

我希望仅当我单击列表视图中的项目而不是空列表中的任何位置时才启用添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:35:36.667

只需拦截组件的`Opening`事件`ContextMenuStrip`（在上下文菜单实际出现之前发生）并执行以下操作：

```
public partial class Form1 : Form {

    public Form1() {
        this.InitializeComponent();

        this.contextMenuStrip1.Opening += this.contextMenuStrip1_Opening;
    }

    private void contextMenuStrip1_Opening(object sender, CancelEventArgs e) {
        this.itemAdd.Enabled = this.listView1.SelectedItems.Count > 0;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T15:18:19.707

`ContextMenuStrip`除非您从控件中选择了至少一项，否则这是另一种完全阻止控件出现的方法`ListView`：

这种方法还拦截`Opening`了`ContextMenuStrip`.

```
private void contextMenuStrip1_Opening(object sender, CancelEventArgs e) 
{
     e.Cancel = this.listView1.SelectedItems.Count <= 0;
} 
```

# git - 无法在 XCode 4.6 中拍摄快照或使用 git

> ID：15185187
> 
> 赞同：2
> 
> 时间：2013-03-03T11:30:05.750
> 
> 标签：git, snapshot, xcode4.6

升级到 Xcode 4.6 后，每当我尝试创建快照或使用 Git 时，都会出现此弹出窗口。

> 请告诉我你是谁。
> 
> 跑
> 
> git config --global user.email "you@example.com"
> 
> git config --global user.name "你的名字"
> 
> 设置您帐户的默认身份。
> 
> 省略 --global 以仅在此存储库中设置身份。
> 
> 致命：无法自动检测电子邮件地址（得到 'Faisal@(null).(none)'）

我一般是 Git 和版本控制的新手，所以我希望有人能解释这意味着什么，为什么它突然开始出现，以及如何修复它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T11:35:19.460

在终端中运行这些命令：

```
git config --global user.email "you@example.com"
git config --global user.name "Your Name" 
```

替换`you@example.com`为您的电子邮件地址和`Your Name`您的姓名。这些信息将告诉 Git 你是谁，以及如何标记你所做的提交。如果 Git 没有这些信息，它将无法提交。

# git - 获取 Git 存储库的远程 URL

> ID：15185194
> 
> 赞同：1
> 
> 时间：2013-03-03T11:31:24.670
> 
> 标签：git, scripting

背景：我正在 FreePascal 中开发一个 (FreePascal :) ) 更新工具。其中一项功能是从远程 hg、svn 和 git 存储库下载/更新源代码。吉特纽布。添加了脚本等标签，因为我正在调用 git 命令，而不是使用库。

如何使用 git repo 获取目录的远程 URL？做 git ls-remote -h 似乎从 git://gitorious.org/fg/fgdata 输出到 stderr 和很多其他数据

我只是对 git://gitorious.org/fg/fgdata 部分感兴趣。

有没有比解析输出更容易（阅读：由 git 管道支持）的方法来获取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T11:34:08.830

默认情况下，初始远程 repo 的存储方式就像`origin`未明确指定一样。假设您的远程仓库的名称没有更改，这应该显示远程仓库的 URL `origin`：

```
git config remote.origin.url 
```

# javascript - 导航到 Javascript 对象中的上一项和下一项

> ID：15185199
> 
> 赞同：12
> 
> 时间：2013-03-03T11:32:17.963
> 
> 标签：javascript, javascript-objects

我想在给定对象项的情况下向上和向下导航 JavaScript 对象。一个示例对象：

```
var items = {
   "5" : ["name", "link2"],
   "8" : ["name 2", "link 2"],
   "11" : ["name 3", "link 3"]
} 
```

现在，鉴于我有 item `items["8"]`。我想分别获得上一个和下一个项目。

```
getItemBefore = function(index) {
    // index holds 8
    // should return "5"
}

getItemAfter = function(index) {
    // index hold 8
    // should return 11
} 
```

我怎样才能得到这些物品？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T11:55:09.690

The keys that an object holds can be retrieved as an array with `Object.keys(<var>)`. The order of the keys in the array is arbitrary; you need to sort them before indexing. An option is the built-in `sort()` method for arrays, which is especially useful because custom comparison functions can be provided (see below). Default order is alphabetical.

Once you get the ordered array, you only need to look up where your item is in the array and return the next and previous elements from it:

```
var keys = Object.keys(items).sort();
var loc = keys.indexOf(item); 
```

Given that `loc > -1` (that is, the item exists):

*   Previous item: `items[keys[loc-1]]`, but check that `loc > 0` (it's not the first one).
*   Next item: `items[keys[loc+1]]`, but check that `loc < keys.length` (it's not the last one).

`Object.keys` is compatible with Javascript 1.85+; [here](http://tokenposts.blogspot.com.au/2012/04/javascript-objectkeys-browser.html) is a workaround for older browsers.

## Alternative orderings

### Numerical

If you want the keys to have a numerical order, use this comparison function:

```
var keys = Object.keys(items).sort( function(a,b) {
    return b - a;
}); 
```

### Creation (or Modification) Time

If you want to work with creation order instead of alphanumeric, the items must hold their creation time. Something like:

```
<value>.index = Date.getTime();
items['<item>'] = <value>; 
```

Then, the `sort()` method needs the following comparison function:

```
var keys = Object.keys(items).sort( function(a,b) {
    return b.index - a.index;
}); 
```

This can be easily extended to last modification ordering or similar.

### Creation Order

Notice that the former solution only works if the items are created more than 1 ms apart, which would be suitable for user actions. If the items are added faster, use this instead of the timestamp:

```
<value>.index = Object.keys(items).length; 
```

Or, alternatively, keep an external counter with the number of items in the object.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-12T16:18:15.153

此答案基于[@lemonzi](https://stackoverflow.com/users/1729279/lemonzi)的答案，请参阅[**他的答案**](https://stackoverflow.com/a/15185372/3407923)以获取更详细的解释。

我只是想为每个为此苦苦挣扎的人添加一个工作示例：

```
var items = {
  "5": ["name", "link2"],
  "8": ["name 2", "link 2"],
  "11": ["name 3", "link 3"]
};

var getItem = function(key, i) {
  var keys = Object.keys(items).sort(function(a,b){return a-b;});
  var index = keys.indexOf(key);
  if ((i==-1 && index>0) || (i==1 && index<keys.length-1)) {index = index+i;}
  return items[keys[index]];
}

console.log(getItem("8",-1));
console.log(getItem("8",+1));
```

**jsfiddle：[https ://jsfiddle.net/p09yL01f/3/](https://jsfiddle.net/p09yL01f/3/)**

*   这样，您只需要一个功能即可更改项目。
*   对`.sort(function(a,b){return a-b;})` [数组 numeric 进行排序](http://www.w3schools.com/jsref/jsref_sort.asp)。
*   检查该`if ((i==-1 && index>0) || (i==1 && index<keys.length-1)) {`项目是否不是数组中的第一个或最后一个索引，如果是，则返回索引本身。

* * *

如果要在项目是第一个或最后一个时显示消息，请改用：

```
if ((i==-1 && index>0) || (i==1 && index<keys.length-1)) {return items[keys[index+i]];}
else {return (i==1?"last":"first")+" item";} 
```

```
var items = {
  "5": ["name", "link2"],
  "8": ["name 2", "link 2"],
  "11": ["name 3", "link 3"]
};

var getItem = function(key, i) {
  var keys = Object.keys(items).sort(function(a,b){return a-b;});
  var index = keys.indexOf(key);
  if ((i==-1 && index>0) || (i==1 && index<keys.length-1)) {return items[keys[index+i]];}
  else {return (i==1?"last":"first")+" item";}
}

console.log(getItem("5",-1));
console.log(getItem("11",+1));
```

**jsfiddle：[https ://jsfiddle.net/p09yL01f/4/](https://jsfiddle.net/p09yL01f/4/)**

*   这`(i==1?"last":"first")`被称为[三元运算符](https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)，请阅读它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T11:48:32.713

This is a bit tricky, because technically according to the ECMAScript specifications, the order of properties in an object is implementation specific. That means there's no guarantee in the language that your properties will be in the same order each time you access them. If you're relying on that, there's a potential there could be a problem.

See this [bug in Chrome](https://code.google.com/p/chromium/issues/detail?id=883). It states that Chrome doesn't promise to return your keys in any particular order, and it's been marked "WONTFIX" for 4-5 years now. That means that you can't rely on that behavior in Chrome, and here's [another post](https://stackoverflow.com/questions/9942132/order-of-iteration-differs-in-ie9) indicating that now IE9 has the same "issue".

So, I would recommend that you create your own object to manage your keys, and use a JavaScript object behind the scenes to store your keys.

Here's something I threw together, it doesn't support deletes and it has no bounds checking, but it should serve your purposes. [Fiddle here](http://jsfiddle.net/g7Lu6/2/).

```
function orderedObject()
{
     this.keys = [];
     this.keyIndex = {};
     this.store = {};
}

orderedObject.prototype.addItem = function(key,value)
{
     this.keyIndex[key] = this.keys.length;
     this.keys.push(key);
     this.store[key] = value;
}

orderedObject.prototype.getItem = function(key)
{
     return this.store[key];
}

orderedObject.prototype.getKeyBefore = function(key)
{
     return this.keys[this.keyIndex[key] - 1];
}

orderedObject.prototype.getKeyAfter = function(key)
{
     return this.keys[this.keyIndex[key] + 1];
}

var testObject = new orderedObject();

testObject.addItem("5" , ["name", "link2"]);
testObject.addItem("8" , ["name 2", "link 2"]);
testObject.addItem("11" , ["name 3", "link 3"]);

console.log(testObject.getKeyBefore("8"))
console.log(testObject.getKeyAfter("8")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T12:32:15.777

对象数组在这里更合适吗？下面的示例可以包装在一个对象中并制作 nextItem() 和 prevItem() 方法。有了这个，您可能还需要一些边界检查。

```
var items = [];
items[0] = {index : '5', name : 'name', link : 'link2'};
items[1] = {index : '8', name : 'name 2', link : 'link 2'};
items[2] = {index : '11', name : 'name 3', link : 'link 3'};

//then access them like this
var nextItem = function (index) {
    var i = 0,
    max = items.length;

    for (i; i < max; i += 1) {
        if (items[i].index === index) {
            return items[i + 1];
        }
    }
    return 'not found';
};

var prevItem = function (index) {
    var i = 0,
    max = items.length;

    for(i; i < max; i += 1) {
        if (items[i].index === index) {
            return items[i - 1];
        }
    }
    return 'not found';
};

//the nextItem object after 5 is shown in the console. 
console.dir(nextItem('5')); 
```

# java - Android 应用程序 - 读取所有 mp3 标签

> ID：15185202
> 
> 赞同：2
> 
> 时间：2013-03-03T11:32:40.050
> 
> 标签：java, android, tags, mp3

正如我在 MediaMetadataRetriever API 中看到的那样，公共标签有常量。在我的应用程序中，我想阅读所有 mp3 标签。为了做到这一点，我使用 jid3lib。当我尝试在没有与 android （我的计算机上的 MP3 文件）任何连接的情况下读取标签时，我成功了，但是当我尝试在模拟器上读取 MP3 文件时，我的应用程序崩溃了。

我将一些音乐文件推送到模拟器中，并且成功读取了这些文件名，但是当应用程序试图获取标签时它崩溃了。

我想知道我是否必须在清单中声明任何 android 权限？或者在本地计算机和android中读取文件之间可能存在差异？因为我使用相同的逻辑来读取计算机上的 MP3 文件并且它可以工作。

**编辑：下面评论中的代码以获得更好的可读性**

```
File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC); 
File[] songs = path.listFiles(); 
for (int i=0; i<songs.length; i++){ 
   try { 
      MusicFile song = new MusicFile(songs[i]); 
      Log.d("VanVan", song.getArtist()); 
   } catch (TagException e) { 
      e.printStackTrace(); 
   } catch (Exception e) { 
      e.printStackTrace(); 
   } 
} 
```

# javascript - Javascript：在 Appcelerator Titanium 中使用 require

> ID：15185203
> 
> 赞同：-3
> 
> 时间：2013-03-03T11:32:41.827
> 
> 标签：javascript, titanium, appcelerator, titanium-mobile

我对javascript很陌生，我正在努力解决一个简单的问题。我必须将代码拆分为单独的文件。例如，我有一个名为 Database.js 的文件。在该文件中，我有以下几行：

```
function Database(){
    //someStuff
    this.fetchAll = function(){
        //some stuff
        return something;
    }
} 
```

现在我想使用文件 app.js 中的 Database.js 代码。所以我在 app.js 中编写了以下代码：

```
var Database = require('Database');
var myDB = new Database();
var result = myDB.fetchAll(); 
```

但是，我得到了错误`Script Error = '[object Database]' is not a constructor (evaluating 'new Database()') at app.js (line 3).`

我的错误是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:01:29.987

在开始开发之前，您需要彻底了解[Titanium 中的 CommonJS 模块](https://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium)。那么它对你来说会更简单。另请参阅[require函数](http://docs.appcelerator.com/titanium/latest/#!/api/Global-method-require)

让我们来看看你的错误。`[ERROR] [object Database]' is not a constructor (evaluating 'new Database()') at app.js (line 3)`表示您创建的模块不是构造函数。您的构造函数可能不会返回任何值。**阅读[CommonJS 模块的简单用法](https://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium#CommonJSModulesinTitanium-SimpleUsage)**。我相信它会解决你的问题。

还有一种替代方法，您可以在 app.js 中包含 Database.js 文件。你不需要返回任何东西，也不需要使用 require 函数。您只需要使用[include 方法](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium-method-include)。只需`Ti.include('Database.js');`在 app.js 中编写，您就可以访问 Database.js 文件中的所有全局变量和函数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-21T12:29:12.897

这个问题很老了，但还没有回答。因此，我将为访问这里的任何人提供答案。

您必须将您的功能导出为全局。为此，您将其声明如下

```
exports.fetchAll = function Database(){
  //some stuff
  return something;
}; 
```

您还可以声明该函数，以便在文件中全局和本地使用它

```
var fetchAll = function Database(){
  //some stuff
  return something;
};
exports.fetchAll = fetchAll; 
```

然后假设文件名是Database并且它与app.js在同一个文件夹中，你可以使用它如下

```
var Database = require('Database');
var result = Database.fetchAll(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:38:33.890

**编辑：这个答案是 javascript 通用的，它不面向 Appacelerator Titanium。**

* * *

没有这样的`include`或`require`在javascript中。另一方面，您可以执行以下操作之一

**在脚本之前包含一个脚本标记以包含 Database.js**

```
<script type="text/javascript" src="Database.js" > 
```

或者

**动态添加**

```
function loadScript(url, callback)
{
    // adding the script tag to the head as suggested before
   var head = document.getElementsByTagName('head')[0];
   var script = document.createElement('script');
   script.type = 'text/javascript';
   script.src = url;

   // then bind the event to the callback function 
   // there are several events for cross browser compatibility
   script.onreadystatechange = callback;
   script.onload = callback;

   // fire the loading
   head.appendChild(script);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-23T17:32:14.207

这里只是一个快速的猜测。如果你使用 CommonJS，那么你必须告诉模块外应该有什么可用。您布置数据库“对象”的方式需要添加：

```
module.exports = Database; 
```

在你的模块中的某个地方。我总是把它们放在最后——但不确定这是一个要求。

您还可以通过指定使单个函数在模块外部可用：

```
exports.getMyDatabase = getMyDatabase; 
```

其中“getMyDatabase”是您在模块中指定的函数。我使用这种方式从外部“隐藏”某些功能的某些实现细节，并且只提供我希望开发人员能够调用的功能;-)

/约翰

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T11:48:24.113

The problem seemed to be the usage of the variable name 'Database'. Maybe there is somewhere a name collusion.

I am sorry that I did not know that the usage of require is not a basic concept of js.

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-03-03T11:35:54.327

我认为这是 require js 的正确用法：

```
require(["Database"], function() {
    var myDB = new Database();
    var result = myDB.fetchAll();
}); 
```

[http://requirejs.org/docs/jquery.html](http://requirejs.org/docs/jquery.html)

# objective-c - 如果 UIImage 未从 url 加载

> ID：15185204
> 
> 赞同：0
> 
> 时间：2013-03-03T11:32:56.530
> 
> 标签：objective-c, uiimage

如果图像未从 url 加载，我如何将本地 image.png 添加到单元格？

```
- (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";
    DetailCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSURL* url = [NSURL URLWithString:[arrayOfImages objectAtIndex:indexPath.row]];
    NSURLRequest* request = [NSURLRequest requestWithURL:url];
    [NSURLConnection sendAsynchronousRequest:request
                                       queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse * response,
                                               NSData * imagedata,
                                               NSError * error) {
                               if (!error){
                                   UIImage* image = [[UIImage alloc] initWithData:imagedata];
                                   cell.flowerImage.image = image;
                               }                     
    }];

    return cell;
} 
```

`arrayOfImages`- 我从 json 解析的 url 字符串数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:36:36.330

您可以对照 nil 检查图像以验证图像 url。

```
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse * response,
                                           NSData * imagedata,
                                           NSError * error) {
                           if (!error){
                               UIImage* image = [[UIImage alloc] initWithData:imagedata];
                               if(!image) {
                                  cell.flowerImage.image = [UIImage imageNamed:@"localImage"]; //local bundle image.
                               } else
                                   cell.flowerImage.image = image;
                           } else {
                               cell.flowerImage.image = [UIImage imageNamed:@"localImage"];//local bundle image.
                           }
}]; 
```

# google-chrome-extension - chrome.experimental.notification（丰富的通知）和外部 URL

> ID：15185206
> 
> 赞同：1
> 
> 时间：2013-03-03T11:33:06.600
> 
> 标签：google-chrome-extension, notifications

我正在尝试使用以下内容打开丰富的通知：

```
var options = {
    templateType: "basic",
    title: "John Doe",
    message: "Lorem ipsum",
    iconUrl: "https://www.MyExternalURL.com/image.jpg"
};

chrome.experimental.notification.create("notifyId", options, function(id) {
    console.log("Succesfully created notification");
}); 
```

但由于某种原因，这不起作用，但如果我用以下内容替换选项：

```
var options = {
    templateType: "basic",
    title: request.name,
    message: request.message,
    iconUrl: chrome.runtime.getURL("/images/cat.png"),
}; 
```

并且通知工作得很好。

这是我的清单文件中的重要内容

```
{
"manifest_version": 2,
"name": ...,
"description": ...,
"version": ...,
"icons": { 
    ...
},
"content_scripts": [
    ...
],
"background": {
    "scripts": ["background.js"]
},
"permissions": [
    "tabs", 
    "experimental"
],
"web_accessible_resources": [
    "https://www.MyExternalURL.com/*"
] 
```

}

我应该如何使用外部图像作为 iconURL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:13:53.433

脚本和对象资源只能从扩展包中加载，不能从整个网络加载。这可确保您的扩展程序仅执行您特别批准的代码，从而防止活跃的网络攻击者恶意重定向您对资源的请求。

因此，您的代码不适用于加载外部 JPEG Icon `iconUrl: "https://www.MyExternalURL.com/image.jpg"`。

而是从[https://www.MyExternalURL.com/image.jpg](https://www.MyExternalURL.com/image.jpg)下载文件并将其内联，如方法 2 所示。

此外，**`web_accessible_resources`**它不接受任何带有 HTTP URL(S) 的内容，它只接受一个字符串数组，指定预期在网页上下文中可用的打包资源的路径（相对于包根）。

# 参考

*   [CSP](https://developer.chrome.com/extensions/contentSecurityPolicy.html#resourceLoading)
*   [网络可访问资源](https://developer.chrome.com/extensions/manifest.html#web_accessible_resources)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T08:22:19.113

通过 Ajax 获取外部图像的 blob，应用转换它的数据 URI。

```
var options = {
    type: "basic",
    title: "TITLE",
    message: "MESSAGE"
};

var xhr = new XMLHttpRequest();
xhr.open("GET", "https://www.MyExternalURL.com/image.jpg");
xhr.responseType = "blob";
xhr.onload = function(){
        var blob = this.response;
        options.iconUrl = window.URL.createObjectURL(blob);
        chrome.notifications.create("notifyId", options, function(notId){});
    };
xhr.send(null); 
```

# algorithm - 在斐波那契堆中实现合并

> ID：15185208
> 
> 赞同：1
> 
> 时间：2013-03-03T11:33:08.037
> 
> 标签：algorithm, tree, fibonacci-heap

*[Introduction to Algorithms 中](http://mitpress.mit.edu/books/introduction-algorithms)*的伪代码指出：

```
for each node w in the root list of H
  link trees of the same degree 
```

但是如何有效地实现*每个根节点*部分呢？原始根在整个合并过程中与其他相同程度的根相连，很难通过根节点的循环列表。如何确定是否检查了每个根节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:45:20.137

您可以执行此操作的一种简单方法是使用三步过程：

1.  断开循环链接，使列表现在只是一个普通的双向链表。
2.  遍历双向链表并处理每棵树。这很棘手，因为正如您所提到的，每个节点上的 forward 和 next 指针可能会在迭代期间发生变化。
3.  关闭循环。

以下是您可以如何执行每个步骤：

断开循环链接：

```
rootList->prev->next = NULL;
rootList->prev = NULL; 
```

遍历双向链表。

```
Node* current = rootList;
while (current != NULL) {
    /* Cache the next node to visit so that even if the list changes, we can still
     * remember where to go next.
     */
    Node* next = current->next;

    /* ... main Fibonacci heap logic ... */

    current = next;
} 
```

修复双向链表：

```
Node* curr = rootList;
if (curr != NULL) { // If list is empty, no processing necessary.
    while (curr->next != NULL) {
        curr = curr->next;
    }
    curr->next = rootList;
    rootList->prev = curr;
} 
```

希望这可以帮助！

# html - 防止用户干扰 html5 老虎机游戏

> ID：15185211
> 
> 赞同：1
> 
> 时间：2013-03-03T11:33:58.863
> 
> 标签：html, fraud-prevention

我在简单的 html5 老虎机上工作，现在我正在寻找防止用户不良行为的方法，例如中间人并向服务器发送不良请求并获取作弊点。在此类游戏上实施欺诈机制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:39:27.253

您应该在服务器上做出插槽决定，然后将其显示给用户。

潜在的解决方案：当用户按下“Spin”时，向服务器发送一个请求，然后服务器可以返回 X 个介于 0 和 Y 之间的随机数，其中 X 是老虎机中的项目数，Y 是每个插槽的选择数。您还将返回一个“win”布尔值。然后您所要做的就是显示与数字相对应的插槽，并根据布尔值告诉它们是否赢/输。

发送的所有初始“旋转”请求都是表示用户想要旋转老虎机，但没有关于他们是赢还是输的信息。

# c++ - tcsetattr() 失败

> ID：15185213
> 
> 赞同：2
> 
> 时间：2013-03-03T11:34:04.623
> 
> 标签：c++, termios

> &"警告：GDB：设置控制终端失败：设备的 ioctl 不合适\n"

```
 bool rs485::rs485ConfigPort()
    {
        termios portSettings;

        memset(&portSettings, 0, sizeof(portSettings));

        portSettings.c_cflag |= (CLOCAL | CREAD);

        cfsetispeed(&portSettings, B57600);

        portSettings.c_cflag &= ~PARENB;

        portSettings.c_cflag |= CS8;

        portSettings.c_cflag &= ~CSIZE;

        portSettings.c_cflag &= ~CSTOPB; //stop bit = 1

        //cfmakeraw(&portSettings);

        if (tcsetattr(fd, TCSANOW, &portSettings))
        {
            emit logMessage("Can not adjust port settings");

            close(fd);
            return false;
        }

        tcflush(fd, TCIFLUSH);
        return true;
    } 
```

我发现了问题，这是因为 tcsetattr() 返回输入/输出错误。设备以写入权限打开。和...当我做 dmesg | grep ttyS0 或 S1-3，我什么都没有收到！有时还会出现错误“没有这样的设备”。

任何人都可以帮助解决这个问题？

# c++ - PreProcessor：在编译时存储字符串数组

> ID：15185215
> 
> 赞同：0
> 
> 时间：2013-03-03T11:34:11.723
> 
> 标签：c++, c-preprocessor

我在编译时需要一个字符串容器，它应该在运行时是可迭代的。但是，我真的需要一个宏，以便生成一些函数（想不出用命名空间级别的模板化代码来做到这一点的方法）。

但是在下面的代码中，我得到'错误：'class LaLaLa'中的'sequence'没有命名类型'，这发生在ASSIGN宏中（我认为）。有人可以帮我吗？

```
#define CREATE_FUNCTION(r, data, i, elem) // creates a function with name 'do_something_with_##elem()'

#define ASSIGN(r, data, i, elem) data::sequence[i] = elem;

#define TO_ARRAY(name, _seq)                                          \
    BOOST_PP_SEQ_FOR_EACH(CREATE_FUNCTION, _, _seq)                   \
    class name                                                        \
    {                                                                 \
    public:                                                           \
        static constexpr std::size_t size = BOOST_PP_SEQ_SIZE(_seq);  \
        static std::string sequence[size];                            \
    };                                                                \
    BOOST_PP_SEQ_FOR_EACH_I(ASSIGN, name, _seq)

TO_ARRAY(LaLaLa, (x)(y)(z)(a)) 
```

然后我想像这样使用它：

```
do_something_with_x();
do_something_with_z();
std::vector<std::string> use_strings;
for(size_t i = 0; i < LaLaLa::size; ++i)
{
   use_strings.push_back(LaLaLa::sequence[i]);
}
// use_strings == {"x", "y", "z", "a"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:19:40.580

问题不在于预处理器——在类定义之后直接使用序列是问题所在。（需要在函数或类似的东西中完成）

# asp.net - asp.net中的自动更新表

> ID：15185216
> 
> 赞同：1
> 
> 时间：2013-03-03T11:34:12.503
> 
> 标签：asp.net

我有个问题。我试图在网站上制作一张桌子。每次用户添加记录时，它都会显示在网站上。用户可以在表上添加更多记录。我的问题是如何让表格自动显示记录而不将数据保存到数据库中并检索它以显示在网站表格上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:28:31.280

您可以 利用`gridview`和`datatable`。 最初，您可以创建一个并将其绑定 在下一次 用户添加一些数据时，在 更新数据中添加一个新行。 并再次绑定.`viewstate`
`datatable``gridview`
`datatable``viewstate`
`data-table`
`viewstate`
`gridview`

## 编辑 1

将数据添加到数据表

```
DataTable dt=new DataTable();
dt.column.Add("Name",typeof(string));
dt.column.Add("Age",typeof(int));

DataRow dr=dt.NewRow();
dr["Name"]="Mohammad"; // or dr[0]="Mohammad";
dr["Age"]=24; // or dr[1]=24;
dt.add.rows(dr);

dr=dt.NewRow();
dr["Name"]="Shahnawaz"; // or dr[0]="Shahnawaz";
dr["Age"]=24; // or dr[1]=24;
dt.add.rows(dr);

GridView1.DataSource=dt;
GridView1.DataBind(); 
```

将您的数据表存储在视图状态

```
ViewState["dataTable"] = dt; 
```

现在假设您有文本框 t1 和 t2

```
Datatable dt=ViewState["dataTable"] as DataTable;
dr=dt.NewRow();
dr["Name"]=t1.text; // or dr[0]="Shahnawaz";
dr["Age"]=t2.text; // or dr[1]=24;
dt.add.rows(dr); 
```

再次绑定到gridview

```
GridView1.DataSource=dt;
GridView1.DataBind(); 
```

并将数据表保持在视图状态

```
ViewState["dataTable"] = dt; 
```

# c++ - tcp 和 udp echoclient 服务器使用 select

> ID：15185222
> 
> 赞同：0
> 
> 时间：2013-03-03T11:35:06.613
> 
> 标签：c++, sockets, tcp, network-programming, udp

here is code snippet for tcp and udp echoclient server using select.i had done with poll and got a good clarity but when coming to select it had described in the book ie in the below code snippet we should take **(maxpl+2)** i did不明白，首先为什么我们要使用 max(tcp_sfd,udp_sfd)？

```
 fd_set fdvar; 
 FD_ZERO(&fdvar); 
 FD_SET(tcp_sfd,&fdvar); 
 FD_SET(udp_sfd,&fdvar); 
 int maxpl = max(tcp_sfd,udp_sfd); 
 cout << "Waiting for a client...\n";

 if(select(maxpl+2 ,&fdvar,NULL,NULL,NULL)==-1) 
 { 
      perror("error in select"); 
  } 
 if(FD_ISSET(udp_sfd,&fdvar)) 
 { 
      // UDP 
  } 
  else 
  { 
      //TCP 
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:49:19.983

关于这里显示的代码，`maxpl+2`是错误的，应该是`maxpl+1`，虽然使用`maxpl+2`是无害的。

`select`需要它的 1\. 参数比您在任何一个中的最大文件描述符的 tne 值大`fd_set`1。- 因为这就是 select 文档所说的必须是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:56:19.600

从手册页：

nfds 参数指定要测试的描述符范围。应在每组中检查第一个 nfds 描述符；也就是说，应检查描述符集中从零到 nfds-1 的描述符。

select 的第一个参数应该是其中所有 fd 的最大值加一个。

# .htaccess - Htaccess：重写规则问题

> ID：15185223
> 
> 赞同：1
> 
> 时间：2013-03-03T11:35:11.060
> 
> 标签：.htaccess, mod-rewrite

我在 .htaccess 文件中跟踪代码。该文件位于子文件夹中，例如 /content/。

```
 RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d 
    RewriteRule ^([^/]+)(/([^/]+))?(/(edit)+)(/([^/]+))?/?$ edit.php?category=$1&slug=$3&edit=$5&password=$7 [L]
    RewriteRule ^([^/]+)(/([^/]+)?/?)$ content.php?category=$1&slug=$3 [L] 
```

我期待上面的代码会重写，

1.  mydomain.com/content/text1/text2/edit/my_password 到 mydomain.com/content/edit.php?category=text1&slug=text2&password=my_password
2.  mydomain.com/content/text1/text2 到 mydomain.com/content/content.php?category=text1&slug=text2
3.  mydomain.com/content/text1 到 mydomain.com/content/content.php?category=text1
4.  mydomain.com/content/ 到 mydomain.com/content/content.php

上面的代码正确重写，但它破坏了资产网址。[例如，它将http://mydomain.com/content/js/tms.js](http://mydomain.com/content/js/tms.js)重写为其他内容，css 文件也是如此。我的资产文件夹是 /img、/css、/js。

如果我评论 `RewriteRule ^([^/]+)(/([^/]+))?(/(edit)+)(/([^/]+))?/?$ edit.php?category=$1&slug=$3&edit=$5&password=$7 [L]` 行它适用于资产

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:07:48.697

条件`RewriteCond %{REQUEST_FILENAME} -d`意味着“请求是针对现有目录的”。如果您`!`在前面添加一个，`-d`它会将其更改为“请求不是针对现有目录”。

尝试：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/([^/]+)(/edit)+/([^/]+?)/?$ edit.php?category=$1&slug=$2&password=$4 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/([^/]+?)/?$ content.php?category=$1&slug=$2 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+?)/?$ content.php?category=$1 [L] 
```

# sql - 尝试使用 SQL Server 获取所有 xml 节点，我做错了什么？

> ID：15185228
> 
> 赞同：1
> 
> 时间：2013-03-03T11:35:46.087
> 
> 标签：sql, sql-server, xml, xquery-sql

我在 MyColumn 列的表格单元格中有以下 xml：

```
<BSDL xmlns="..." xmlns:i="...">
  <dateTime>2012-12-30T00:00:00Z</dateTime>
  <dateTime>2013-01-07T00:00:00Z</dateTime>
  <dateTime>2013-01-14T00:00:00Z</dateTime>
  <dateTime>2013-01-21T00:00:00Z</dateTime>
  <dateTime>2013-01-29T00:00:00Z</dateTime>
  <dateTime>2013-02-05T00:00:00Z</dateTime>
  <dateTime>2013-02-12T00:00:00Z</dateTime>
  <dateTime>2013-02-19T00:00:00Z</dateTime>
  <dateTime>2013-03-22T00:00:00Z</dateTime>
  <dateTime>2013-03-29T00:00:00Z</dateTime>
  <dateTime>2013-04-19T00:00:00Z</dateTime>
</BSDL> 
```

我只是尝试使用以下方法查询它（获取所有 xml 节点）：

```
SELECT BSDL.item.value('(dateTime)[1]', 'datetime')
    from [MyTable]
    CROSS APPLY [MyColumn].nodes ('//BSDL') BSDL(item) 
```

它不会产生任何结果，尽管 my `MyColumn`in`MyTable`对于每一行都有与上面相同数量的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:54:58.063

由于只有一个`<BSDL>`节点 - 您的调用`//BSDL`选择该单个节点，然后`item.value('(dateTime)[1]', 'datetime')`返回第一`<dateTime>`个子节点。

您需要将 XQuery 更改为（使用`xmlns=....`您在此处的示例中提到的命名空间）：

```
;WITH XMLNAMESPACES('.....' as ns)
SELECT 
    item.value('.', 'datetime')
from 
    dbo.MyTable
CROSS APPLY 
    MyColumn.nodes ('/ns:BSDL/ns:dateTime') BSDL(item) 
```

您需要获取所有`<dateTime>`节点的列表`<BSDL>`- 然后您将获得**所有**节点，并且可以一一检查它们。

# javascript - 如何通过mac上的命令行使用javascript窗口设置打开一个新的chrome窗口

> ID：15185229
> 
> 赞同：0
> 
> 时间：2013-03-03T11:35:48.730
> 
> 标签：javascript, macos, google-chrome, command-line

如何从终端打开一个新的 chrome 窗口，其属性类似于调用 Javascript 函数`window.open('http://www.example.com', '_blank', 'toolbar=0,location=0,menubar=0');`

原因是因为我想使用 Automator 创建一个停靠图标，该图标在特定 url 上启动一个新的 chrome 窗口，没有选项卡、工具栏等。

更新：

事实证明，答案是在**应用程序模式下**运行 chrome 。在 Windows 中，您可以转到`Tools > Create application shortcuts`，但在 Mac 上则不行。

在终端中运行以下命令。 `/Applications/Google\ Chrome.app/ --args --app=http://example.com`

还有一篇 lifehacker 文章做了同样的事情，并简化了使用 sh 脚本制作图标的过程。

[http://lifehacker.com/5611711/create-application-shortcuts-in-google-chrome-for-mac-with-a-shell-script](http://lifehacker.com/5611711/create-application-shortcuts-in-google-chrome-for-mac-with-a-shell-script)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:49:38.430

如果我说 Chrome 有 Kiosk 模式会有帮助吗？

[http://think2loud.com/868-google-chrome-full-screen-kiosk-mode/](http://think2loud.com/868-google-chrome-full-screen-kiosk-mode/)

# mongodb - mongos 上的 MongoDB 错误：位置选项太多

> ID：15185238
> 
> 赞同：3
> 
> 时间：2013-03-03T11:36:49.797
> 
> 标签：mongodb

我正在尝试运行一个批处理脚本，这应该是我在 mongodb 上的第一个分片。它在这一行显示以下错误：

```
D:\mongodb-win32-x86_64-2.2.3\bin>mongos --configdb localhost:26050, localhost:26051, localhost:26052  --logappend --logpath log.mongos0

error command line: too many positional options
use --help for help 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T11:47:59.833

The "too many positional operators" error means you have a mismatch in the number of command line parameters and values provided.

Specifically, the spaces between names of config servers are being interpreted as different (unknown) parameters.

Corrected command line:

```
mongos --configdb localhost:26050,localhost:26051,localhost:26052 --logappend --logpath log.mongos0 
```

# php - 使用自定义数字符号重新加载 url

> ID：15185246
> 
> 赞同：0
> 
> 时间：2013-03-03T11:37:59.710
> 
> 标签：php, html, url, redirect, mobile

我们正在制作一个包含桌面和移动部分的网站

但我们希望对它们都使用相同的 URL，并取决于正确的 html/css 中的用户代理加载

对于桌面部分，我们使用 Ember 及其路由功能

例如：[http ://domain.com/#!/newsitems/news-item-1](http://domain.com/#!/newsitems/news-item-1)

对于我们的移动部分，我们不想使用 JS 进行路由，而是手动刷新页面（因此我们的移动网站可以在尽可能多的不同设备上运行）

所以如果我想制作一个重定向到“news-item-1”的按钮

```
<a href="#!/newsitems/news-item-1">link</a> 
```

不会重新加载我的页面，因为它识别出它的数字符号。是否有可能我可以刷新页面但仍保留 url。

我们将捕获 php 中的 URL，然后显示正确的 html/css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:12:13.137

URL 的“片段”永远不会传递给服务器，它会被浏览器剥离以供自己使用。因此，无法直接在 PHP 中读取它。

相反，您可以做的是：对于非 JS 情况，HTML 应该包含一个普通的 URL，例如`<a href="/foo">...`. 然后 JS 可以通过添加 #! 酌情将链接动态更改为`<a href="#!/foo">...`

这种一般的想法，即您首先编写简单的代码并在其上添加丰富的功能，而不是将它们嵌入到代码中，被称为“渐进式增强”。它可以被视为“优雅降级”问题的解决方案，这是您在支持尽可能多的平台时试图实现的目标。

# objective-c - TableView 的 reloadData 未加载 cellForRowAtIndexPath 或行数

> ID：15185248
> 
> 赞同：0
> 
> 时间：2013-03-03T11:38:32.583
> 
> 标签：objective-c, xcode, uitableview, reloaddata

我正在尝试（徒劳）`MasterViewController`从另一个 View Controller重新加载 tableView `SitesViewController`。我在以下代码中使用此代码`SitesViewController`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSInteger row = [[self tableView].indexPathForSelectedRow row];

    //NSArray *appcell = [sitesMenu objectForKey:@"Table"];

    NSLog(@"AppCell %@", sitesMenu);

    NSDictionary *entry = [sitesMenu objectAtIndex:row];

    self.siteid = [entry objectForKey:@"SITEID"];

    NSLog(@" sample SiteView %@", siteid);

    NDSClassMasterViewController *detailControllerTwo = [[NDSClassMasterViewController alloc] init];
    detailControllerTwo.globalid = siteid;

    NSLog(@"message %@", detailControllerTwo.globalid);

    [detailControllerTwo fetchTweets];

    dispatch_async(dispatch_get_main_queue(), ^{
        [detailControllerTwo.tableView reloadData];
        NSLog(@"%@", detailControllerTwo);
    });
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
} 
```

以及我正在调用的方法的代码：

```
- (void)fetchTweets
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        NSString *siteurl = [[NSString alloc] initWithFormat:@"http://adhoc.nyxtek.co.za/spfjsonws/default2.aspx?siteid=%@", globalid];
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: siteurl]];

        NSError* error;

        menuItems = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];

        NSLog(@"%@", menuItems);

        dispatch_async(dispatch_get_main_queue(), ^{

            [self.tableView reloadData];
        });
    });
} 
```

我什至在 SiteViewController didSelectRow 方法中添加了重新加载代码。

我已经读过我应该为它添加一个属性并合成，但我已经尝试过了，但不确定如何为 UITableView 添加一个属性以引用现有的。

fetchTweets 代码运行，但 TableView 不会重新加载。

任何援助将不胜感激。

编辑

这是我在单元格中加载项目的 TableView 代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    //NSString *name = [[[menuItems objectForKey:@"Table"] objectAtIndex:0] objectForKey:@"MENUID"];
    NSDictionary *tweet = [[menuItems objectForKey:@"Table"] objectAtIndex:indexPath.row];
    //NSLog(@"%@", tweet);

    NSString *text = [tweet objectForKey:@"MENUDESC"];
    NSString *name = [tweet objectForKey:@"MENUDESC"];
    NSLog(@"TEST 1%@", text);
    cell.textLabel.text = text;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:56:59.573

为什么不简单地在视图控制器中编写一个包含重新加载数据的代码的函数，而不是通过属性公开表视图？

EG 而不是：

```
 [detailControllerTwo.tableView reloadData]; 
```

在 MasterViewController 中声明一个方法，如下所示：

```
- (void) updateTable
{
    // tableView is declared as an IBOutlet
    [tableView reloadData];
} 
```

然后你可以调用它：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [detailControllerTwo updateTable];
    NSLog(@"%@", detailControllerTwo);
}); 
```

# python - Numpy 数组作为具有非唯一属性的向量

> ID：15185250
> 
> 赞同：0
> 
> 时间：2013-03-03T11:38:40.503
> 
> 标签：python, multidimensional-array, numpy

我有一组我想用 numpy 处理的数据。可以将数据视为空间中的一组点，并带有我想作为对象处理的附加属性变量。根据一组数据，向量的长度可能为 1、2 或 3，但对于给定数据集中的所有点，其长度相同。属性对象是一个自定义类，对于任何两个给定点都可能相同。

因此，将此数据视为一个随机示例（C 和 H 表示包含碳或氢的原子属性的对象......或只是一些随机对象）。这些不会通过文件读取，而是由算法创建。这里的 C 对象可能相同，也可能不同（例如同位素）。

```
Example 3D data set (just abstract representation)
C 1 2 3
C 3 4 5
H 1 1 4 
```

我想要一个包含所有原子位置的 numpy 数组，这样我就可以执行 numpy 操作，如矢量操作和翻译函数`def translate(data,vec):return data + vec`。我还想并行处理属性对象。一种选择是为两者设置**两个单独的数组**，但如果我删除一个元素，我也必须显式删除属性数组值。这可能很难处理。

我考虑过使用`numpy.recarray`

```
x = np.array([(1.0,2,3, "C"), (3.0,2,3, "H")], dtype=[('x', "float64" ),('y',"float6 
```

4"),('z',"float64"), ('type', object)])

但似乎`shape`这个数组的 是`(2,)`，这意味着每条记录都是独立处理的。此外，我似乎无法理解如何让矢量操作与这种类型一起工作：

```
def translate(data,vec):return data + vec
translate(x,np.array([1,2,3]))
...
TypeError: unsupported operand type(s) for +: 'numpy.ndarray' and 'numpy.ndarray' 
```

我`numpy.recarray`应该使用什么？有没有更好的方法以更简单的方式处理这个问题，例如我有一个单独的点数值矩阵和一个平行`object`数组，如果元素被删除（`np.delete`），它们会链接起来？我还简要地考虑过编写一个 extends 的数组对象`ndarray`，但我觉得这可能是不必要的并且可能是灾难性的。

任何想法或建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:16:57.827

如果将元组作为字段的 dtype 传递，recarray 的字段可以是 ndarray `(name, type, shape)`：

```
In [9]:

import numpy as np

x = np.array([((1.0,2,3), "C"), ((3.0,2,3), "H")], dtype=[('xyz', "float64", (3,)), ('type', object)])

In [11]:

np.delete(x, 0)

Out[11]:

array([([3.0, 2.0, 3.0], 'H')], 
      dtype=[('xyz', '<f8', (3,)), ('type', 'O')])

In [12]:

x["xyz"]

Out[12]:

array([[ 1.,  2.,  3.],
       [ 3.,  2.,  3.]])

In [14]:

x["xyz"] + (10, 20, 30)

Out[14]:

array([[ 11.,  22.,  33.],
       [ 13.,  22.,  33.]]) 
```

对于您的翻译功能：

```
def translate(data,vec):
    tmp = data.copy()
    tmp["xyz"] += vect
    return tmp 
```

如果你想要更灵活的功能，你可以考虑使用`Pandas.DataFrame`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:56:59.620

如果您正在处理原子集合，您可以考虑使用Atomic [Simulation Environment (ASE)中的](https://wiki.fysik.dtu.dk/ase/)[Atoms 类](https://wiki.fysik.dtu.dk/ase/ase/atoms.html#module-atoms)。它存储原子类型、位置并具有类似列表的方法来操作它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:00:51.487

一种快速而肮脏的方法是将最后（或实际上任何）列设置为对标签字典的数字查找：

```
>>> import numpy
>>> labels = ['H', 'C', 'O']
>>> labels_refs = dict(zip(labels, numpy.arange(len(labels), dtype='float64')))
>>> reverse_labels_refs = dict(zip(numpy.arange(len(labels), dtype='float64'), labels))
>>> x = numpy.array([
...     [1.0,2,3, labels_refs['C']], 
...     [3.0,2,3, labels_refs['H']],
...     [2.0,2,3, labels_refs['C']]])
>>> x
array([[ 1.,  2.,  3.,  1.],
       [ 3.,  2.,  3.,  0.],
       [ 2.,  2.,  3.,  1.]])
>>> extract_refs = numpy.vectorize(
...         lambda label_ref: reverse_labels_refs[label_ref])
>>> labels = extract_refs(x[:, -1]) # Turn the last column back into labels
>>> labels
array(['C', 'H', 'C'], 
      dtype='|S8') 
```

您还可以通过标签查找行（例如）：

```
>>> x[numpy.where(x[:,-1] == labels_refs['C']), :-1]
array([[[ 1.,  2.,  3.],
        [ 2.,  2.,  3.]]]) 
```

# ruby-on-rails - Rails in production + Heroku

> ID：15185252
> 
> 赞同：1
> 
> 时间：2013-03-03T11:38:48.513
> 
> 标签：ruby-on-rails, heroku

When I enter in console:

```
git push heroku master 
```

I get:

```
 Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
       Would have removed sass-rails (3.2.6)
       Would have removed sass (3.2.5)
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       Asset precompilation completed (13.99s)
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker

-----> Compiled slug size: 12.0MB
-----> Launching... done, v7
       http://chernobylmusic.herokuapp.com deployed to Heroku 
```

Running:

```
heroku run rake db:migrate 
```

The result is:

```
Running `rake db:migrate` attached to terminal... up, run.5186
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7) 
```

and the migrations are applied.

When I visit my page on Heroku, I see `We're sorry, but something went wrong.`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T11:40:18.960

运行`heroku logs`并查看错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:18:30.260

错误日志说

```
PG::Error: ERROR:  relation "events" does not exist 
```

这意味着您没有创建数据库，甚至没有运行迁移。检查您的 Gemfile 中是否有 pg gem。如果没有添加`gem 'pg'`到您的 Gemfile 的生产块中，因为 Heroku 在 postgres 上运行。

然后做一个

```
git push heroku master 
```

thn

```
heroku run rake db:create 
```

thn

```
heroku run rake db:migrate 
```

它应该工作。

# c# - C# using memory mapped files

> ID：15185254
> 
> 赞同：1
> 
> 时间：2013-03-03T11:38:57.123
> 
> 标签：c#, memory-management, shared-memory

I was wondering, that what file extension do those memory mapped files have. Are they .dll's or something like that. Another thing is that can I use such a file, if I don't know its contents.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T11:42:15.043

> 内存映射文件有什么文件扩展名？

内存映射文件可以有任何文件扩展名。您可以为任何文件创建文件映射。

> 如果我不知道它的内容，我可以使用这样的文件吗？

是的，您可以在不知道其内容的情况下为任何文件创建文件映射。

* * *

这些答案是如此琐碎，以至于我怀疑您并不完全了解内存映射文件是什么以及它们为何有用。我怀疑您应该问的问题是：*什么是内存映射文件？*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T11:43:17.713

引用自[MSDN](http://msdn.microsoft.com/en-us/library/dd997372.aspx)

> 内存映射文件包含虚拟内存中文件的内容。文件和内存空间之间的这种映射使包括多个进程的应用程序能够通过直接读取和写入内存来修改文件。从 .NET Framework 4 开始，您可以使用托管代码访问内存映射文件，其方式与本机 Windows 函数访问内存映射文件的方式相同，如 MSDN 库中的在 Win32 中管理内存映射文件中所述。
> 
> 有两种类型的内存映射文件：

*   > 持久化内存映射文件 持久化文件是与磁盘上的源文件相关联的内存映射文件。当最后一个进程完成对文件的处理后，数据将保存到磁盘上的源文件中。这些内存映射文件适用于处理非常大的源文件。

*   > 非持久化内存映射文件
    > 
    > 非持久文件是与磁盘上的文件无关的内存映射文件。当最后一个进程完成对文件的处理时，数据会丢失，文件会被垃圾回收器回收。这些文件适用于为进程间通信 (IPC) 创建共享内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:42:26.150

内存映射文件是操作系统提供的一种技术，它允许您访问*任何给定文件*，就好像它是一块内存一样。操作系统只是将其*映射*到您的进程可用的操作内存的一部分。

不多也不少。因此，重新考虑文件的扩展名和对其内容的了解是无关紧要的。但是，人们会期望您知道您正在尝试使用的文件中的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-02T22:56:59.063

“内存映射文件”的起源来自 OS/2（Windows NT 的前身），它被称为“全局共享内存段”，实际上这是一个更准确的术语。

这些用于跨应用程序共享内存中的数据。此类数据可以在所有与其挂钩的应用程序上保存到磁盘，也已退出（持久性）......有时需要，有时不需要。

对于那些谈论将文件读入内存的人，是的，你可以这样做，但你为什么要这样做？您是否需要重新读取同一个文件？如果是这样，请获取您需要的内容并加载一些变量（例如配置文件）。

此功能真正用于共享不断修改（由一个或多个应用程序）并由一个或多个应用程序读取的数据。比使用数据库、读/写磁盘文件等更容易、更快捷。

# php - When I update an sql table row with a content "=" there runs an error

> ID：15185259
> 
> 赞同：1
> 
> 时间：2013-03-03T11:39:33.193
> 
> 标签：php, sql, equals, sign

I want to run this:

```
UPDATE users SET about="$about" ; 
```

but when my `$about` contains `=`, the script makes a mistake and do something like this:

```
$about="<img src=somevalue.jpg />"; 
```

The script adds this in the database:

```
<img src 
```

and nothing more.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:44:09.853

尝试使用双单引号。

```
$about = '<img src=somevalue.jpg />';
$query = "UPDATE users SET about='$about'"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:44:48.427

This is called 'sql injection'. You have to take care of that anyway, so google it.

You have to escape all input you want to use inside statements, anything can happen otherwise. Best is not to use statements constructed by simply including variable content, but use a better engine. Take a look at `PDO` and the way it works. You "prepare" a statement and hand over parameters as an array. PDO takes care to cleanly escape as required. *Much* safer that way.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:52:01.793

The issue is with putting quotes around string. I'm not very familiar with how php replaces variables in strings but you can try following for MS SQL server:

`Set about ="'$about'"`

# google-analytics - How to get “Visitors Flow” data from Google Analytics GAPI API?

> ID：15185260
> 
> 赞同：2
> 
> 时间：2013-03-03T11:39:40.993
> 
> 标签：google-analytics, google-api, google-analytics-api

In Google Analytics there is a verry nice "visitor flow" page that clearly contains and keeps track of what path a visitor has taken on the site. Is it possible to get that data from the API? I know that you can use "custom variables" to give the users a unique ID and i do that already but what im after is to be able to use the data already collected without custom variables. I have got the following at the moment:

```
$ga->requestReportData(56786432, array('networkLocation', 'date', 'hour', 'nextPagePath', 'previousPagePath'), array('avgTimeOnSite', 'visits','pageviews'), array('-date', '-hour'), null, null, null, 1, 100); 
```

This gives me visit "sessions" with date and hour and i think this is a start but how to continue from here? Is it possible?

EDIT I have now added nextPagePath and previousPagePath as new dimentions and pageviews as a metric. This gives somewhat of the path that the visitor went through the site. If the visitor went the path **A->B->C->exit** this gives me the result:

```
pageviews:1 previous:(entrence) next: :A
pageviews:1 previous:B next: :C
pageviews:1 previous:A next: :B 
```

The above result is indeed correct but if the visitor went backwards and forwards on the site multiple times crossing from A->B and A->C multiple times its not possible for me to track when he went to B and when he went to C

```
pageviews:1 previous:(entrence) next: :A
pageviews:2 previous:A next: :C
pageviews:5 previous:A next: :B
pageviews:2 previous:C next: :A
pageviews4 previous:B next: :C 
```

If its possible i need to get a result for each new page the visitor got to in the right order.

I saw this question already but it didnt get me any closer to my answer: [Get Google Analytics "Visitors Flow" data from API](https://stackoverflow.com/questions/12502062/get-google-analytics-visitors-flow-data-from-api)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T14:03:03.823

我目前[在使用 Android SDK 时遇到了类似的问题](https://stackoverflow.com/questions/16553782/how-to-extract-engagement-flow-data-using-google-analytics-reporting-api)，我遇到了你的问题和[这个](https://stackoverflow.com/questions/12502062/get-google-analytics-visitors-flow-data-from-api)问题。您当然[可以从 Google Analytics Reporting API 中获取流量数据，并对其进行任何类型的分析](https://stackoverflow.com/a/16566884/564709)。挑战在于，您可能必须使用[核心报告库](https://developers.google.com/analytics/devguides/reporting/core/v3/gdataLibraries)之一对结果进行分页才能访问所有结果。

关于您关于跟踪后退/前进导航运动的问题，作为一个单独的问题提出可能会很好。如果可能的话，您可能必须以某种方式使用[ga.js](https://developers.google.com/analytics/devguides/collection/gajs/)包在您的页面上添加一些自定义 javascript，但我不是如何做到这一点的专家。

注意：我不是律师，但我认为尝试跟踪应用程序中的个人用户可能违反[Google Analytics 服务条款。](http://www.google.com/analytics/terms/us.html)如果我错了，那将是令人愉快的，我想自己开始做！

# javascript - 单击更改无线电输入值

> ID：15185262
> 
> 赞同：0
> 
> 时间：2013-03-03T11:39:45.280
> 
> 标签：javascript, jquery

我有一些无线电输入，它们的值`<a class="green none" href=""`在其中。我也有一个部分，一个精确的`div`类名`toggleclass`，当单击该 div 时，我需要`none`将其从类属性中删除。

的HTML

```
<ul class="ulitems">
    <li><input class="liitems" type="radio" name="items" value="<a class="green none" href="http://www.google.com" title="Google" target="_blank">Google</a>"></li>
    <li><input class="liitems" type="radio" name="items" value="<a class="green none" href="http://www.yahoo.com" title="Yahoo" target="_blank">Yahoo</a>"></li>
    <li><input class="liitems" type="radio" name="items" value="<a class="green none" href="http://www.bing.com" title="Bing" target="_blank">Bing</a>"></li>
    <li><input class="liitems" type="radio" name="items" value="<a class="green none" href="http://www.facebook.com" title="Facebook" target="_blank">Facebook</a>"></li>
    <li><input class="liitems" type="radio" name="items" value="<a class="green none" href="http://www.twitter.com" title="Twitter" target="_blank">Twitter</a>"></li>
</ul> 
```

我尝试过的一些 JavaScript

```
$('.toggleclass').on("click",function() {
    $('.ulitems').find(' none').remove();
}); 
```

还，

```
$('.toggleclass').on("click",function() {  
$('.liitems').attr("value").remove(' none');
}); 
```

并且，

```
$('.toggleclass').on("click",function() {
    $('.liitems').attr("value").find('class="green none"').replaceWith('class="green"');
}); 
```

但是，这似乎根本不起作用。你能指导我吗？

**确切地说，我需要保存 HTML 值，`a class="green none" href=""...`在这种情况下，使用单选提交。而且，当用户单击按钮时，我想为用户提供删除`none`该类的选项（如果无法删除，则为删除整个类属性）。`none`**

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:52:33.107

You can try this: [**fiddle**](http://jsfiddle.net/C7eqt/)

```
$('.toggleclass').on("click", function () {
    alert($('.liitems').val().replace('none',''));
}); 
```

replace `alert();` with this one: [**checkout updated fiddle**](http://jsfiddle.net/C7eqt/1/)

```
$('.toggleclass').on("click", function () {
    $('.liitems').val($('.liitems').val().replace('none', ' '));
}); 
```

# string - “&”字符的DOS解决方法？

> ID：15185264
> 
> 赞同：1
> 
> 时间：2013-03-03T11:40:10.490
> 
> 标签：string, command-line, batch-file, dos

DOS 似乎不能很好地处理字符串中的“&”字符。我正在尝试解析 url，其中许多都有一个或多个 &。如果我这样做：

```
 set var = "http://finance.yahoo.com/mbview/threadview/?v=m&bn=2"
    echo %var%
    pause 
```

我明白了

> ECHO 关闭。按任意键继续 。. .

删除 & 字符可以纠正这个问题，这将是一个合适的解决方法，但我需要在代码中执行此操作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:50:42.803

使用延迟扩展时不需要转义 & 符号

```
setlocal EnableDelayedExpansion
set "var=http://finance.yahoo.com/mbview/threadview/?v=m&bn=2"
Echo !var! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:46:57.257

If it is Windows Command line that must be what you are looking for.

```
set "var=http://finance.yahoo.com/mbview/threadview/?v=m^&bn=2"
echo %var%
pause 
```

watch **^&** in code

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:51:19.813

删除 和 之间的`var`空格`=`：

```
set var="http://finance.yahoo.com/mbview/threadview/?v=m&bn=2"
echo %var%
pause 
```

# php - PHP：在发布多部分/表单数据时将字符串解析为数组

> ID：15185267
> 
> 赞同：1
> 
> 时间：2013-03-03T11:40:54.003
> 
> 标签：php, curl

在 firefox http headers 插件中，我记录了标题和发布内容。

**标题在下面**

```
Content-Type: multipart/form-data; boundary=---------------------------2794991859960663061251376577 
```

**帖子内容如下**

```
-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="action"\r\n
\r\n
post\r\n 
-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="_wp_http_referer"\r\n
\r\n
/submit/\r\n
-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="cat"\r\n
\r\n
62\r\n
-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="post_title"\r\n
\r\n 
```

**我转换成如下所示的卷曲。**

```
$fields = '-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="action"\r\n
\r\n
post\r\n
-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="_wpnonce"\r\n
\r\n
c9aa342328\r\n
-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="_wp_http_referer"\r\n
\r\n
/submit/\r\n
-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="cat"\r\n
\r\n
62\r\n
-----------------------------2794991859960663061251376577\r\n
Content-Disposition: form-data; name="post_title"\r\n
\r\n';
    curl_setopt($ch,CURLOPT_URL, $url); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.A.B.C Safari/525.13");

    curl_setopt($ch, CURLOPT_HTTPHEADER, array(

        'Content-Type: multipart/form-data; boundary=---------------------------2794991859960663061251376577',

    ));

    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch,CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($ch,CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($ch,CURLOPT_POST, 1);
    curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
    $result = curl_exec($ch); 
    $last = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
    $info = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    return array($result,$last,$info);
    curl_close($ch); 
```

**但是当我发现 http 标头时，它只发送 text/html**

```
HTTP/1.1 200 OK Transfer-Encoding: chunked Date: Sun, 03 Mar 2013 11:38:01 GMT Server: LiteSpeed Connection: close X-Powered-By: PHP/5.2.17 X-Pingback: http://domain.com/xmlrpc.php Content-Type: text/html; charset=UTF-8 Expires: Wed, 11 Jan 1984 05:00:00 GMT Cache-Control: no-cache, must-revalidate, max-age=0 Pragma: no-cache Vary: User-Agent 
```

我检查了 php.net 它说 `If value is an array, the Content-Type header will be set to multipart/form-data.`

现在如何将 $fields 转换为数组？这样数据将以 multipart/form-data 格式发送。

# php - 将项目总计添加到 PayPal 的订单摘要中，以进行完整的购物车付款

> ID：15185271
> 
> 赞同：1
> 
> 时间：2013-03-03T11:41:16.813
> 
> 标签：php, paypal

我有自己的购物车和一切设置，我只需要为我的网站用户提供一个“立即付款”按钮，我只是打算将整个购物车的总金额发送到 payPal，就是这样，不需要其他集成。因此，我网站上的客户已经查看了他们的订单，检查了单个商品的数量和运费等，现在只需向 PayPal 提供他们将确认和支付的总金额。

我的“立即付款”按钮的代码如下（`$overall_total`已经在我的 php 代码中的某处计算过）：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
   <input type="hidden" name="cmd" value="_s-xclick">
   <input type="hidden" name="hosted_button_id" value="JRECLRTYAJDKY">
   <input type="hidden" name="amount" value="<?php echo $overall_total;?>">
   <input type="hidden" name="item_total" value="<?php echo $overall_total;?>">
   <input type="hidden" name="item_name" value="Your Shopping order">
   <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
   <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

用户在点击“立即付款”时提交此表单，然后他们来到下一页。但是即使我包含了`amount`和`item_total`变量，下一页给了我一个`item_total`0.00。此外，我不想显示任何`Quantity`或`Item price`显示，因为我只是为客户实施聚合购物车付款，并且他们在付款之前已经查看了每件商品的费用。这就是我得到的： ![在此处输入图像描述](../Images/089f1eda6618f46a42b632e97784127d.png)

我怎样才能摆脱`Quantity`和`Item price`，并`$overall_total`在 PayPal 摘要的总价格中计算出我计算的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:03:20.793

没有`item_total`或任何总数，因为每个按钮一次处理一个项目

`$overall_total`必须是带有“.”的英文格式。作为小数分隔符

问题可能是`cmd`参数..改用：

```
<input type="hidden" name="cmd" value="_xclick"> 
```

您还需要指定：

```
<input type="hidden" name="business" value="yourBusiness@yourBusiness.tld"> 
```

* * *

看这个更完整的例子：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value="yourBusiness@yourBusiness.tld">

    <input type="hidden" name="lc" value="US">
    <input type="hidden" name="amount" value="10.10">
    <input type="hidden" name="currency_code" value="USD">

    <input type="hidden" name="item_name" value="Item bought desc">

    <input type="hidden" name="button_subtype" value="services">
    <input type="hidden" name="no_note" value="0">

    <input type="hidden" name="bn" value="PP-BuyNowBF:btn_paynow_SM.gif:NonHostedGuest">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">

</form> 
```

也看看：

*   购物车参数的文档：[PayPal Payments Standard 的 HTML 表单基础知识](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_formbasics)
*   购物车按钮生成器：[创建 PayPal 支付按钮](https://www.paypal.com/cgi-bin/webscr?cmd=_button-designer&factory_type=buynow)

* * *

关于“数量”问题，遗憾的是您无法隐藏它......如果这对您来说是一个重要问题，您可以尝试使用 ExpressCheckout（使用 php），它非常可定制且不难实现

希望能有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:46:52.607

解决 Qty:1 问题的简单“立即付款”按钮的最直接方法是实施“购物车上传”，这是 99% 的购物车实施标准的方式。请参阅：[PayPal 的购物车上传文档](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/cart_upload)

如果您是可以处理 API 调用的程序员，我建议您使用 Express Checkout（可能使用 SOLUTIONTYPE=Sole）而不是像购物车上传这样的标准表单帖子。EC 是一个更强大的编程接口，本质上是标准的免费升级，适用于所有 PayPal 卖家账户。

# android - android意图传递空值

> ID：15185279
> 
> 赞同：0
> 
> 时间：2013-03-03T11:42:09.097
> 
> 标签：android, android-intent

我完全坚持解决我的问题。我已经尝试了所有可能的方法来完成它，但徒劳无功。请任何人看看下面的代码并帮助我......我是android / java环境的新手。

我有活动 A，我从那里触发活动 B 以获得结果。活动 B 是用户必须填写的表单，并且必须通过按表单上的“保存按钮”来提交它。表单中的数据存储在数据库中（工作正常），活动 B 使用字符串（由用户提供）返回活动 A

当它返回 Activity A 时，应该使用该字符串的值更新列表视图。

这是我的代码：

从 A 开始意图：

```
 Intent ccard_intent= new Intent(this, create_ccard.class);
 startActivityForResult(ccard_intent,start_activity_for_ccard);
break; 
```

上面的代码工作正常。活动 B 开始（其中有一个由用户填写的表格）

在活动 B 中，用户填写表单后，他按下保存按钮。这些条目存储在 Db 中，它会提示用户为该特定条目指定一个名称。我已经为此目的使用了警报对话框。现在请注意，数据库中的条目具有用户在 alertdialog 中提供的名称（字符串），现在我希望将相同的字符串传递给活动 A：

点击保存按钮后我的代码：

```
case R.id.Ccard_save_btn:

     //do operations 

 CcardString =myobj.toString();

AlertDialog.Builder save_btn_builder = new AlertDialog.Builder(this);
save_btn_builder.setTitle("Enter the Card Name");
final EditText input= new EditText(this);
  save_btn_builder.setView(input);

  save_btn_builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

        Card_name=input.getText().toString();
        myDatabse mydb = new myDatabse(getBaseContext());
        mydb.open();
          mydb.insertCard(Card_name, type, CcardString);

          mydb.close();

    //i have intent declared at the begining along with along with Card_name

        i.putExtra("card_name", Card_name);

        setResult(Activity.RESULT_OK);

        finish();
    }
});

  save_btn_builder.show(); 
```

现在，意图成功返回到活动 A，但“card_name”中的值为空！我不知道为什么？？？

现在我的 onActivityResult 代码是：

```
 protected void onActvityResult(int requestCode, int resultCode, Intent data){

    super.onActivityResult(requestCode, resultCode, data);

Log.d("activity ccards", "in on activity resume");
    if(requestCode == 788 && resultCode== RESULT_OK){
 new_ccard = data.getStringExtra("card_name");
     ccards_arraylist.add(new_ccard);

    adapter3.notifyDataSetChanged();

    //adapter3 is the adapter for the listview
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:31:05.513

您从未为变量输入设置值。那么将如何：

```
Card_name=input.getText().toString(); 
```

返回一个值？

你可以尝试这样的事情：

```
input.addTextChangedListener(new TextWatcher()
{

    public void afterTextChanged(Editable s)
    {

    }

    public void beforeTextChanged(CharSequence s, int start,
    int count, int after)
    {

    }

    public void onTextChanged(CharSequence s, int start,
    int before, int count)
    {
        Card_name=input.getText().toString();
    }
}); 
```

您必须拥有 textWatcher 才能获取更改后的文本值。否则它将为空。

# php - bindParam 和 execute(array) 有什么区别？

> ID：15185282
> 
> 赞同：3
> 
> 时间：2013-03-03T11:42:29.660
> 
> 标签：php, pdo

```
$stmt = $this->_db->prepare("SELECT userid FROM users WHERE login = ? AND md5pass = ?");
#$stmt->bindParam(1, $login, PDO::PARAM_INT);
#$stmt->bindParam(2, $pass, PDO::PARAM_STR);
$stmt->execute(array($login,$pass));
$res = $stmt->fetch(PDO::FETCH_NUM); 
```

将变量传输到预先准备好的语句 bindParam 或执行（数组），哪种方式更好？两者都有效，但有什么区别？只有 PDO::PARAM 检查？对于 SELECT，我认为数组就足够了，对于 INSERT，我应该使用 bindParam。我对吗？谢谢大家。刚学=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T11:57:49.887

您可以添加数据类型，并且使用`bindParam`绑定参数也很重要，您可以[**通过引用**](http://php.net/manual/en/pdostatement.bindparam.php)绑定变量。

# html - 有效的 HTML 标记名称字符

> ID：15185290
> 
> 赞同：13
> 
> 时间：2013-03-03T11:43:04.390
> 
> 标签：html, tags, html4

我在找出 HTML 标记的有效字符时遇到问题。

在这个（[符号 (@) 是一个有效的 HTML/XML 标记字符吗？](https://stackoverflow.com/questions/7065693/is-the-at-sign-a-valid-html-xml-tag-character/7066512#7066512)）答案中说：

> 再看一下XML规范：
> 
> 一个标签包括：
> 
> '<' 名称（S 属性）* S? '>' 名称包括：
> 
> NameStartChar (NameChar)* NameStartChar 包括：
> 
> “：” | [AZ] | "_" | [az] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF] NameChar 包括：
> 
> 名称开始字符 | "-" | “。” | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040] @ 符号是 U+0040
> 
> 因此@ 符号在 NameChar 或 NameStartChar 中无效，因此在 Name 中无效。

但是在 HTML 语法页面（[http://www.w3.org/TR/html-markup/syntax.html#tag-name](http://www.w3.org/TR/html-markup/syntax.html#tag-name)）上，它只说：

> 标签名称在元素开始标签和结束标签中使用，以给出元素的名称。HTML 元素的名称都只使用 0-9、a-z 和 A-Z 范围内的字符。

HTML 标记名称中的有效字符是什么？HTML4、XHTML 和 HTML5 之间有区别吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-03T11:54:18.940

HTML 文档必须符合 HTML 规范。XML 文档必须符合 XML 规范。XHTML 文档必须符合 XML 和 HTML 规范。

因此，对于 XHTML 文档，您必须从两个规范中获取有效字符的交集。由于 XHTML 基于 XML，因此规范不能允许 XML 中禁止使用的字符。因此，XHTML 中允许的字符始终是 XML 中的字符的子集。所以允许的字符是来自 XHTML 规范的字符。

# shell - Unix shell 位选择

> ID：15185291
> 
> 赞同：0
> 
> 时间：2013-03-03T11:43:08.837
> 
> 标签：shell, binary

如何从 shell 计算位选择？

假设我有类似的东西：`i[m:l]`

`i`是一个整数，`m`是位选择的 MSB 部分，是位选择`l`的 LSB 部分，例如：

*   `250[1:0]`- 将返回“250”的 2 个 LSB 位，答案为“2”
*   `250[7:2]`- 将返回“250”的 6 个 MSB 位，答案将是“62”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:59:10.773

不确定它的可移植性如何，但 Bash 和 KSH 至少支持按位运算（左移和右移、按位与和或）和求幂。所以你可以直接使用它们来做位掩码。

```
#! /bin/sh

extract_bits() {
    msb=$1 ; lsb=$2 ; num=$3
    # Number of bits required
    len=$(( $msb + 1 - $lsb ))
    # Bitmask == 2^len - 1
    mask=$(( 2 ** $len - 1 ))
    # Left-shift mask, bitand, right-shift result
    echo $(( ( num & ( $mask << $lsb ) ) >> $lsb ))
}

extract_bits 1 0 250
extract_bits 7 2 250 
```

（至于在 shell 脚本中执行此操作是否是一个好主意，好吧，我不相信。）

# c# - 为什么在 C# 中读取的原始磁盘从稍微偏移的偏移中读取？

> ID：15185295
> 
> 赞同：6
> 
> 时间：2013-03-03T11:43:32.327
> 
> 标签：c#, winapi, deviceiocontrol

我正在尝试读取原始磁盘。我已成功打开驱动器并获得有效句柄（**CreateFile**），将该句柄的偏移量设置为零（**SetFilePointerEx**）并将数据读取到缓冲区`Byte[]`（**ReadFile**）。到目前为止，一切都很好。但是由于某些未知原因，当我将缓冲区（实际上花了我一段时间才弄清楚）与第 3 方实用程序（*磁盘调查*器）显示的内容进行比较时。它不包含引导信息（跳转指令），但正确的磁盘数据，但从偏移量**85** = **0x55**开始。所以在卷引导信息中间的某个地方。

这是为什么？有什么东西，我失踪了（显然我是）？

系统：Windows 8（在 VmWare 工作站中）

代码：

```
// moves the pointer to a given offset
Int64 offset = 0; 
Int64 newOffset;
Int32 bufferSize = (Int32) clusterSizeInBytes; 
SetFilePointerEx(driveHandle.Handle, offset, out newOffset, WinMoveMethod.Begin);
Int32 error = Marshal.GetLastWin32Error();

// reads the raw buffer
Int32 numberOfBytesRead;
rawData = new Byte[bufferSize];
Boolean result = ReadFile(driveHandle.Handle, rawData, bufferSize, 
                          out numberOfBytesRead, IntPtr.Zero); 
```

CreateFile（其他地方）

```
driveHandle = CreateFile("\\.\PhysicalDrive1", WinFileAccessMode.GenericRead, 
           WinFileSharedAccess.All, IntPtr.Zero, WinFileMode.OpenExisting,
           WinFileAttribute.None, IntPtr.Zero); 
```

PInvoke 方法：

```
[DllImport("kernel32.dll", SetLastError = true)]
public static extern Boolean SetFilePointerEx(
    [In] SafeFileHandle fileHandle, 
    [In] Int64 distanceToMove,
    [Out] out Int64 newOffset, 
    [In] WinMoveMethod moveMethod);

[DllImport("kernel32", SetLastError = true)]
public extern static Boolean ReadFile(
    [In] SafeFileHandle handle, 
    [Out] Byte[] buffer,
    [In] Int32 numBytesToRead, 
    [Out] out Int32 numBytesRead, 
    [In] IntPtr overlapped); 
```

枚举：

```
public enum WinMoveMethod : uint
{   
    Begin   = 0,
    Current = 1,
    End     = 2
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:24:02.007

找不到使用命名空间“DiskLib”的库。我现在无法测试或完全上传，即使我不再知道是谁编写了那段代码，但您可能会发现有趣的行是

```
public class DiskStream : Stream
{
    public const int DEFAULT_SECTOR_SIZE = 512;
    private const int BUFFER_SIZE = 4096;

    private string diskID;
    private DiskInfo diskInfo;
    private FileAccess desiredAccess;
    private SafeFileHandle fileHandle;

    public DiskInfo DiskInfo
    {
        get { return this.diskInfo; }
    }
    public uint SectorSize
    {
        get { return this.diskInfo.BytesPerSector; }
    }

    public DiskStream(string diskID, FileAccess desiredAccess)
    {
        this.diskID = diskID;
        this.diskInfo = new DiskInfo(diskID);
        this.desiredAccess = desiredAccess;

        // if desiredAccess is Write or Read/Write
        //   find volumes on this disk
        //   lock the volumes using FSCTL_LOCK_VOLUME
        //     unlock the volumes on Close() or in destructor

        this.fileHandle = this.openFile(diskID, desiredAccess);
    }

    private SafeFileHandle openFile(string id, FileAccess desiredAccess)
    {
        uint access;
        switch (desiredAccess)
        {
            case FileAccess.Read:
                access = DeviceIO.GENERIC_READ;
                break;
            case FileAccess.Write:
                access = DeviceIO.GENERIC_WRITE;
                break;
            case FileAccess.ReadWrite:
                access = DeviceIO.GENERIC_READ | DeviceIO.GENERIC_WRITE;
                break;
            default:
                access = DeviceIO.GENERIC_READ;
                break;
        }

        SafeFileHandle ptr = DeviceIO.CreateFile(
            id,
            access,
            DeviceIO.FILE_SHARE_READ,
            IntPtr.Zero,
            DeviceIO.OPEN_EXISTING,
            DeviceIO.FILE_FLAG_NO_BUFFERING | DeviceIO.FILE_FLAG_WRITE_THROUGH,
            IntPtr.Zero);

        if (ptr.IsInvalid)
        {
            Marshal.ThrowExceptionForHR(Marshal.GetHRForLastWin32Error());
        }

        return ptr;
    }

    public override bool CanRead
    {
        get
        {
            return (this.desiredAccess == FileAccess.Read || this.desiredAccess == FileAccess.ReadWrite) ? true : false;
        }
    }
    public override bool CanWrite
    {
        get
        {
            return (this.desiredAccess == FileAccess.Write || this.desiredAccess == FileAccess.ReadWrite) ? true : false;
        }
    }
    public override bool CanSeek
    {
        get
        {
            return true;
        }
    }
    public override long Length {
      get { return (long)this.Length; }
    }

    public ulong LengthU
    {
        get { return this.diskInfo.Size; }
    }

    public override long Position {
      get {
        return (long)PositionU;
      }
      set {
        PositionU = (ulong)value;
      }
    }

    public ulong PositionU
    {
        get
        {
            ulong n = 0;
            if (!DeviceIO.SetFilePointerEx(this.fileHandle, 0, out n, (uint)SeekOrigin.Current))
                Marshal.ThrowExceptionForHR(Marshal.GetHRForLastWin32Error());
            return n;
        }
        set
        {
            if (value > (this.LengthU - 1))
                throw new EndOfStreamException("Cannot set position beyond the end of the disk.");

            ulong n = 0;
            if (!DeviceIO.SetFilePointerEx(this.fileHandle, value, out n, (uint)SeekOrigin.Begin))
                Marshal.ThrowExceptionForHR(Marshal.GetHRForLastWin32Error());
        }
    }

    public override void Flush()
    {
        // not required, since FILE_FLAG_WRITE_THROUGH and FILE_FLAG_NO_BUFFERING are used
        //if (!Unmanaged.FlushFileBuffers(this.fileHandle))
        //    Marshal.ThrowExceptionForHR(Marshal.GetHRForLastWin32Error());
    }
    public override void Close()
    {
      if (this.fileHandle != null) {
        DeviceIO.CloseHandle(this.fileHandle);
        this.fileHandle.SetHandleAsInvalid();
        this.fileHandle = null;
      }
      base.Close();
    }

    public override void SetLength(long value)
    {
        throw new NotSupportedException("Setting the length is not supported with DiskStream objects.");
    }
    public override int Read(byte[] buffer, int offset, int count) {
      return (int)Read(buffer, (uint)offset, (uint)count);
    }

    public unsafe uint Read(byte[] buffer, uint offset, uint count)
    {
        uint n = 0;
        fixed (byte* p = buffer)
        {
            if (!DeviceIO.ReadFile(this.fileHandle, p + offset, count, &n, IntPtr.Zero))
                Marshal.ThrowExceptionForHR(Marshal.GetHRForLastWin32Error());
        }
        return n;
    }
    public override void Write(byte[] buffer, int offset, int count) {
      Write(buffer, (uint)offset, (uint)count);
    }
    public unsafe void Write(byte[] buffer, uint offset, uint count)
    {
        uint n = 0;
        fixed (byte* p = buffer)
        {
            if (!DeviceIO.WriteFile(this.fileHandle, p + offset, count, &n, IntPtr.Zero))
                Marshal.ThrowExceptionForHR(Marshal.GetHRForLastWin32Error());
        }
    }
    public override long Seek(long offset, SeekOrigin origin) {
      return (long)SeekU((ulong)offset, origin);
    }
    public ulong SeekU(ulong offset, SeekOrigin origin)
    {
        ulong n = 0;
        if (!DeviceIO.SetFilePointerEx(this.fileHandle, offset, out n, (uint)origin))
            Marshal.ThrowExceptionForHR(Marshal.GetHRForLastWin32Error());
        return n;
    }

    public uint ReadSector(DiskSector sector)
    {
        return this.Read(sector.Data, 0, sector.SectorSize);
    }
    public void WriteSector(DiskSector sector)
    {
        this.Write(sector.Data, 0, sector.SectorSize);
    }
    public void SeekSector(DiskSector sector)
    {
        this.Seek(sector.Offset, SeekOrigin.Begin);
    }
} 
```

DeviceIO 类是 Win32 API 的 ap/invoke 样板。

DiskInfo 类是 WMI`Win32_DiskDrive`和`Win32_DiskPartition`类的包装器。

我曾经使用该库来克隆磁盘（在 Win7 上）。希望这有助于找到解决方案。

出于完整性和细节考虑，DeviceIO 类始终使用*无符号整数*：

```
/// <summary>
/// P/Invoke wrappers around Win32 functions and constants.
/// </summary>
internal partial class DeviceIO
{

    #region Constants used in unmanaged functions

    public const uint FILE_SHARE_READ = 0x00000001;
    public const uint FILE_SHARE_WRITE = 0x00000002;
    public const uint FILE_SHARE_DELETE = 0x00000004;
    public const uint OPEN_EXISTING = 3;

    public const uint GENERIC_READ = (0x80000000);
    public const uint GENERIC_WRITE = (0x40000000);

    public const uint FILE_FLAG_NO_BUFFERING = 0x20000000;
    public const uint FILE_FLAG_WRITE_THROUGH = 0x80000000;
    public const uint FILE_READ_ATTRIBUTES = (0x0080);
    public const uint FILE_WRITE_ATTRIBUTES = 0x0100;
    public const uint ERROR_INSUFFICIENT_BUFFER = 122;

    #endregion

    #region Unamanged function declarations

    [DllImport("kernel32.dll", SetLastError = true)]
    public static unsafe extern SafeFileHandle CreateFile(
        string FileName,
        uint DesiredAccess,
        uint ShareMode,
        IntPtr SecurityAttributes,
        uint CreationDisposition,
        uint FlagsAndAttributes,
        IntPtr hTemplateFile);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool CloseHandle(SafeFileHandle hHandle);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool DeviceIoControl(
        SafeFileHandle hDevice,
        uint dwIoControlCode,
        IntPtr lpInBuffer,
        uint nInBufferSize,
        [Out] IntPtr lpOutBuffer,
        uint nOutBufferSize,
        ref uint lpBytesReturned,
        IntPtr lpOverlapped);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern unsafe bool WriteFile(
        SafeFileHandle hFile,
        byte* pBuffer,
        uint NumberOfBytesToWrite,
        uint* pNumberOfBytesWritten,
        IntPtr Overlapped);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern unsafe bool ReadFile(
        SafeFileHandle hFile,
        byte* pBuffer,
        uint NumberOfBytesToRead,
        uint* pNumberOfBytesRead,
        IntPtr Overlapped);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool SetFilePointerEx(
        SafeFileHandle hFile,
        ulong liDistanceToMove,
        out ulong lpNewFilePointer,
        uint dwMoveMethod);

    [DllImport("kernel32.dll")]
    public static extern bool FlushFileBuffers(
        SafeFileHandle hFile);

    #endregion

} 
```

# javascript - JSON 文件中的缺失值

> ID：15185298
> 
> 赞同：1
> 
> 时间：2013-03-03T11:44:29.090
> 
> 标签：javascript, json

代码创建如下：

```
function create_story_json_file()
{
//Update the last edited page:

    img_dataURLs[current_page]= drawing_plate.toDataURL("image/png");
    create_display_img_url(current_page);

    var page_num= total_page_num;                               //Story total page number
    var page_cont= new Array();
    var page_view= new Array();

    //Page View:( as the pages is clicked, the page views have to be shown. 
        page_view= display_img_dataURL;

    var img_data_URL;           //if it's a variable only, you have to assign the first value in the declaration, or the tag would disappear. 
    var stamp_arr= new Array();
    var rec_arr= new Array();
    var background_msc; 

//For each Story:   
    alert("total_page_num :"+ total_page_num );
    for(var p_number=0 ; p_number < total_page_num ; p_number++)
    {
        img_data_URL= img_dataURLs[p_number];

    //Stamp
        stamp_arr= [];                                          //reset.    
        var stamp_arr_for_current_page= stamp_for_all_pages[ p_number ].arr;
        for(var stamp_num= 0; stamp_num < stamp_arr_for_current_page.length ; stamp_num++)
        {
            stamp_arr.push( stamp_arr_for_current_page[stamp_num].get_stmp_json_obj );

        }
        alert("stamp_arr.length is:" + stamp_arr.length);
    //Rec:
        rec_arr= [];
        var rec_objs_at_certain_page= records_pages_arr[ p_number ].rec_objs;
        for(var rec_num= 0; rec_num <  rec_objs_at_certain_page.length; rec_num++)
        {
            rec_arr.push( rec_objs_at_certain_page[ rec_num ].get_rec_json_obj );               //check if rec_objs_at_certain_page[ rec_num ] is a rec_object! 
        }
        alert("rec_arr length is: " + rec_arr.length);
    //Background_music:
        var bgr_msc_in_certain_page= back_ground_music_arr[ p_number ];
        alert ("bgr_msc_in_certain_page.created" + bgr_msc_in_certain_page.created);
        background_msc= bgr_msc_in_certain_page.get_bgr_msc_json_obj;

        var page_content_json_obj= {
            img_data_url: img_data_URL,
            stamp:stamp_arr,
            record: rec_arr,
            bgr_msc:  background_msc
        }

        page_cont.push(page_content_json_obj); 

    }

        var story_json_obj= {

        page_number: page_num, 
        page_content: page_cont,
                    page_img_view: page_view

        }

    //Change to JSON String and write it to the file.   
    story_json_str= JSON.stringify(story_json_obj);
} 
```

我很困惑为什么结果 JSON string: **story_json_str**会是：

```
{"page_number":1,
"page_content":[{"img_data_url":"data:image/base64......lots of      character"}]} 
```

仅此而已，“page_content”中的“stamp”、“record”和“bgr_msc”在哪里？
为什么“page_img_view”也会消失？
他们为什么会错过？

**请解释并更正代码。**

Ps：我在Android系统上工作，通过HTML5的特性将JSON字符串存储到一个文件中。我没有调试平台可以使用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:06:22.353

我最终找到了错误。

```
background_msc= bgr_msc_in_certain_page.get_bgr_msc_json_obj; 
```

由于`get_bgr_msc_json_obj`是类中的函数，我需要编写 `get_bgr_msc_json_obj()`. 缺少括号将不会调用该函数。

这两种仪器：`get_rec_json_obj`并`get_stmp_json_obj`犯同样的错误。
多么愚蠢的错误。

# java - JAX-RS jersey ExceptionMappers User-Defined Exception

> ID：15185299
> 
> 赞同：38
> 
> 时间：2013-03-03T11:44:37.983
> 
> 标签：java, web-services, rest, jersey, jax-rs

I am new to this, trying to achieve reading some docs but its not working, please bear with me.

I have created a `UserNotFoundMapper` using `ExceptionMappers` like this:

```
public class UserNotFoundMapper implements ExceptionMapper<UserNotFoundException> {

@Override
public Response toResponse(UserNotFoundException ex) {
    return Response.status(404).entity(ex.getMessage()).type("text/plain").build();
}

} 
```

This in my service:

```
@GET
@Path("/user")
public Response getUser(@QueryParam("id") String id) throws UserNotFoundException{
    //Some user validation code with DB hit, if not found then
    throw new UserNotFoundException();
} 
```

The `UserNotFoundException` is an `User-Defined` Exception.

I tried this:

```
public class UserNotFoundException extends Exception {
       //SOME block of code 
} 
```

But when I invoke the service, the `UserDefinedExceptionMapper` is not getting invoked. It seems I might be missing something in the `UserDefinedException`. How to define this exception then?

Please let me know how to define the `UserNotFoundException`.

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-03T12:25:37.763

您需要使用 注释您的异常映射器[`@Provider`](http://docs.oracle.com/javaee/6/api/javax/ws/rs/ext/Provider.html)，否则它将永远不会注册到 JAX-RS 运行时。

```
@Provider
public class UserNotFoundMapper implements
        ExceptionMapper<UserNotFoundException> {
    @Override
    public Response toResponse(UserNotFoundException ex) {
        return Response.status(404).entity(ex.getMessage()).type("text/plain")
                .build();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-13T18:08:22.267

创建 API 时我通常做的是创建我自己的从[RuntimeException](https://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)扩展的异常，因此我不必捕获我的异常。

这是一个例子：

**注意**：我将 JAX-RS 与泽西岛一起使用

**首先**：创建我自己的从 RuntimeException 扩展的异常。

```
public class ExceptionName extends RuntimeException {

private int code;
private String message;

public int getCode(){
    return code;
}

public String getMessage(){
    return message;
}

public ExceptionName(int code, String message) {
    this.code = code;
    this.message = message;
}

} 
```

还要实现一个[ExceptionMapper](https://docs.oracle.com/javaee/7/api/javax/ws/rs/ext/ExceptionMapper.html)

```
@Provider
public class ExceptionName implements ExceptionMapper<ExceptionName>{

    @Override
    public Response toResponse(ExceptionName exception) {
        return Response.status(exception.getCode()).entity(exception.getMessage()).build();
    }

} 
```

每次我想抛出异常时，我都会在任何地方这样做，异常映射器将负责向使用 API 的客户端返回响应

```
throw new ExceptionName(500,"there was an error with something here"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T12:25:51.210

一个小评论，尝试使用 Response.Status.NOT_FOUND 而不是使用 404 等。代码将更易读，更不容易出现拼写错误，“text/plain”也是如此。下面是处理您提到的异常的代码。 **哦，还有一件事记得在你的界面中注释你的方法 @Produces(MediaType.TEXT_PLAIN)**

```
    公共类 UserNotFoundException 扩展异常 {
        //...
    }

    公共类 UserServiceImpl 实现 UserService {

        @覆盖
        公共响应 getUser(@QueryParam("id") String id) {
            最终响应响应；
            尝试{
                // 调用用户方法
                //如果一切正常
                response = Response.status(Response.Status.OK).entity(whateverYouWant).type(MediaType.TEXT_PLAIN).build();
            } 捕捉（UserNotFoundException ex）{         
                response = new UserNotFoundMapper().toResponse(ex);
            }

            返回响应；
        }
    }

    在客户幻灯片中，您可以检查

    public static boolean isUserExists(final Response serverResp) {
        return serverResp != null && serverResp.getStatus() == Response.Status.NOT_FOUND.getStatusCode();
    }

```

# jsf - Tomcat 7.0.37 JSF app deployment ClassNotFound FacesServlet

> ID：15185300
> 
> 赞同：2
> 
> 时间：2013-03-03T11:44:38.013
> 
> 标签：jsf, maven, tomcat7, classnotfound

```
Mar 03, 2013 12:09:05 PM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet Faces Servlet as unavailable
Mar 03, 2013 12:09:05 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /mavenproject1 threw load() exception
java.lang.ClassNotFoundException: javax.faces.webapp.FacesServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:527)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:509)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:137)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1144)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1088)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5033)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5317)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

When I'm trying to deploy an application with Faces Servlet, I get this stacktrace. This would mean there's no FacesServlet available, but this is clearly not the case since these libraries are available in the WAR.

*   jsf-api-2.2.0-m09.jar
*   jsf-impl-2.2.0-m09.jar
*   javaee-web-api-6.0.jar

I don't have a clue in what might be wrong. As stated in the title, I am running on Tomcat 7.0.37.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:21:01.273

问题很可能与`javaee-web-api-6.0.jar`. 这个 jar 包含`javax.servlet.*`类。当 Tomcat 在这个 jar 中找到它们时，它会阻止 jar 进行类加载。这意味着根本无法加载此 jar 中的任何类！包括`javax.faces.webapp.FacesServlet`其中的内容。请参阅 servlet 规范 (3.0)，第 10.7.2 节：

> 容器用来在 WAR 中加载 servlet 的类加载器必须允许开发人员按照使用 getResource 的正常 Java SE 语义加载 WAR 中的库 JAR 中包含的任何资源。**如 Java EE 许可协议中所述，不属于 Java EE 产品的 servlet 容器不应允许应用程序覆盖 Java SE 平台类，例如 Java SE 所做的 java.* 和 javax.* 命名空间中的类不允许修改。容器不应允许应用程序覆盖或访问容器的实现类**. 还建议实现应用程序类加载器，以便优先加载 WAR 中打包的类和资源，而不是驻留在容器范围的库 JAR 中的类和资源。实现还必须保证对于部署在容器中的每个 Web 应用程序，对 Thread.currentThread.getContextClassLoader() 的调用必须返回实现本节中指定的协定的 ClassLoader 实例。此外，ClassLoader 实例必须是每个部署的 Web 应用程序的单独实例。在向 Web 应用程序进行任何回调（包括侦听器回调）之前，容器需要如上所述设置线程上下文 ClassLoader，并在回调返回后将其设置回原始 ClassLoader。

清理你的依赖！

# android - Inaccurate GPS location

> ID：15185307
> 
> 赞同：1
> 
> 时间：2013-03-03T11:46:08.783
> 
> 标签：android, gps

I am reading my coordinates every 20 seconds or 10 meters an displaying them with a Toast. At the same time I read the GPS values from the notifications panel in the system bar. The values are not the same.

Altitude is in my program always around 560 metres and in the notifications panel 430 (430 is correct). I get similar errors with lat. and long. The error is not due to difference in time. The Toast shows the values onLocationChange. I used the code based on [this project](http://hejp.co.uk/android/android-gps-example/) and rely only on the GPS sensor.

Why is this so? Does anybody know why I'm getting different values?

# google-visualization - 如何更改谷歌图表中注释文本的颜色

> ID：15185308
> 
> 赞同：14
> 
> 时间：2013-03-03T11:46:18.787
> 
> 标签：google-visualization

如何更改 Google Chart Tools LineChart 中注释文本的颜色？

这是一个例子

```
google.load('visualization', '1', {packages: ['corechart']});
google.setOnLoadCallback(drawChart);

function drawChart() {
    var data = new google.visualization.DataTable();      
    data.addColumn('date', 'Date');
    data.addColumn('number', 'Sales');
    data.addColumn({id: 'title', label: 'Title', type: 'string', role: 'annotation'});
    data.addRows([
        [new Date(2012, 3, 5), 80, null],
        [new Date(2012, 3, 12), 120, 'New Product'],
        [new Date(2012, 3, 19), 80, null],
        [new Date(2012, 3, 26), 65, null],
        [new Date(2012, 4, 2), 70, null],
    ]);

    var options = {
        title: 'Sales by Week',
        displayAnnotations: true,
        hAxis: {title: 'Date', 
                titleTextStyle: {color: 'grey'}},
        colors: ['#f07f09']
      };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);      
} 
```

我希望线条为橙色，注释文本为灰色。当前注释文本为橙色。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-12-22T21:26:33.073

不需要额外的样式数据列和管道代码来为每一行填充丑陋的（甚至上面不完整的）格式化字符串。如果您想为不同的数据点使用不同的注释颜色，请仅使用单独的样式列。

有一个全局设置，`annotations.textStyle`在[https://developers.google.com/chart/interactive/docs/gallery/linechart中搜索](https://developers.google.com/chart/interactive/docs/gallery/linechart)

```
var options = {
  annotations: {
    textStyle: {
      fontName: 'Times-Roman',
      fontSize: 18,
      bold: true,
      italic: true,
      // The color of the text.
      color: '#871b47',
      // The color of the text outline.
      auraColor: '#d799ae',
      // The transparency of the text.
      opacity: 0.8
    }
  }
}; 
```

这是您案例的概念代码（注意不同的初始化`google.charts`，非常重要）：

```
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

google.charts.load('current', { 'packages': ['corechart', 'line', 'bar'] });
google.charts.setOnLoadCallback(drawChart);

function drawChart() {
  var data = new google.visualization.DataTable();      
  data.addColumn('date', 'Date');
  data.addColumn('number', 'Sales');
  data.addColumn({id: 'title', label: 'Title', type: 'string', role: 'annotation'});
  data.addRows([
    [new Date(2012, 3, 5), 80, null],
    [new Date(2012, 3, 12), 120, 'New Product'],
    [new Date(2012, 3, 19), 80, null],
    [new Date(2012, 3, 26), 65, null],
    [new Date(2012, 4, 2), 70, null],
  ]);

  var options = {
    chart: {
      title: 'Sales by Week'
    },
    hAxis: {
      title: 'Date', 
      titleTextStyle: {color: 'grey'}
    },
    annotations: {
      textStyle: {
        color: 'grey',
      }
    }
    colors: ['#f07f09']
  };

  var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
  chart.draw(data, options); 
```

}

您还可以更改注释的其他文本格式，例如粗体、斜体、字体类型等。以下是大部分文本配置为粗体的示例：

```
 var options = {
                  chart: {
                   title: title
                  },
                  hAxis: {
                    textStyle: {
                      bold: true
                    }
                  },
                  vAxis: {
                    format: 'decimal',
                    textStyle: {
                      bold: true
                    }
                  },
                  legendTextStyle: {
                    bold: true
                  },
                  titleTextStyle: {
                    bold: true
                  },
                  width: chart_width,
                  //theme: 'material',  // material theme decreases the color contrast and sets the black color items (all text) to 171,171,171 grey -> washed out
                  annotations: {
                    alwaysOutside: true,
                    highContrast: true,  // default is true, but be sure
                    textStyle: {
                      bold: true
                    }
                  }
                }; 
```

更多带有源代码链接的示例：[https ://mrcsabatoth.github.io/GoogleChartsTalk/](https://mrcsabatoth.github.io/GoogleChartsTalk/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-28T20:45:19.893

其实你可以。注释的颜色与线条颜色相同。只需在要进行注释的位置放置一个点，然后将点的颜色设置为所需的注释颜色即可。

```
data.addColumn({type: 'string', role: 'style'});
data.addColumn({type:'string', role:'annotation'}); 
```

然后当你添加数据

```
'point { size: 14; shape-type: circle; fill-color: #63A74A','Your annotation' 
```

[请参阅http://www.marketvolume.com/stocks/stochasticsmomentumindex.asp?s=SPY&t=spdr-sp-500](http://www.marketvolume.com/stocks/stochasticsmomentumindex.asp?s=SPY&t=spdr-s-p-500)上的示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T06:33:45.510

如果您的注释不是“感人”，即。您要注释的点不相邻，您可以添加第二行并将注释添加到该行。

在下面的 JSON 示例中，我有一个日期和一个“总余额”，以及一个“Ann”行。

```
"cols":[
      {
         "id":"date",
         "label":"date",
         "type":"date",
         "p":{
            "role":"domain"
         }
      },
      {
         "id":"total-balance",
         "label":"Total balance",
         "type":"number",
         "p":{
            "role":"data"
         }
      },
      {
         "id":"ann",
         "label":"Ann",
         "type":"number",
         "p":{
            "role":"data"
         }
      },
      {
         "type":"string",
         "p":{
            "role":"annotation"
         }
      },
      {
         "type":"string",
         "p":{
            "role":"annotationText"
         }
      }
   ], 
```

注释位于“Ann”列之后，因此将添加到“Ann”数据点。

在我的 JSON 中，总是填写日期和“总余额”。“安”和注释通常是空的：

```
 "rows":[
  {
     "c":[
        {
           "v":"Date(2013, 0, 1)"
        },
        {
           "v":1000
        },
        {
           "v":null
        },
        {
           "v":null
        },
        {
           "v":null
        }
     ]
  },
  {
     "c":[
        {
           "v":"Date(2013, 0, 8)"
        },
        {
           "v":1001
        },
        {
           "v":null
        },
        {
           "v":null
        },
        {
           "v":null
        }
     ]
  }, 
```

当我需要注释时，“Ann”单元格获得与总余额相同的值，并添加注释：

```
{
     "c":[
        {
           "v":"Date(2013, 1, 26)"
        },
        {
           "v":2000
        },
        {
           "v":2000
        },
        {
           "v":"Something!"
        },
        {
           "v":"Something happened here!"
        }
     ]
  }, 
```

在您的 GChart 配置中，您现在可以设置两种颜色。一个用于正常线，一个用于“安”。

```
colors: ['black','red'] 
```

如果您没有“接触”注释，​​GCharts 将不会在它们之间画线，并且这些点将保持“不可见”，而注释显示在正确的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T02:34:45.907

简短回答：不，您不能通过标准选项更改文本颜色（您可以编写一些内容以在 SVG 中找到该文本并使用 javascript 更改其颜色，但这超出了我的水平）。

您可以在此处查看 ASGallant 在 Google Groups 上的回答，并在[此处查看](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/ccLfHm-EhFU)[他](http://jsfiddle.net/NpUzn/)的示例。

```
// code borrowed from Google visualization API playground, slightly modified here

google.load('visualization', '1', {packages: ['corechart']});
google.setOnLoadCallback(drawVisualization);

function drawVisualization() {
    // Create and populate the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'x');
    data.addColumn({type: 'string', role: 'annotation'});
    data.addColumn({type: 'string', role: 'annotationText'});
    data.addColumn('number', 'Cats');
    data.addColumn('number', 'Blanket 1');
    data.addColumn('number', 'Blanket 2');
    data.addRow(["A", null, null, 1, 1, 0.5]);
    data.addRow(["B", null, null, 2, 0.5, 1]);
    data.addRow(["C", null, null, 4, 1, 0.5]);
    data.addRow(["D", null, null, 8, 0.5, 1]);
    data.addRow(["E", 'foo', 'foo text', 7, 1, 0.5]);
    data.addRow(["F", null, null, 7, 0.5, 1]);
    data.addRow(["G", null, null, 8, 1, 0.5]);
    data.addRow(["H", null, null, 4, 0.5, 1]);
    data.addRow(["I", null, null, 2, 1, 0.5]);
    data.addRow(["J", null, null, 3.5, 0.5, 1]);
    data.addRow(["K", null, null, 3, 1, 0.5]);
    data.addRow(["L", null, null, 3.5, 0.5, 1]);
    data.addRow(["M", null, null, 1, 1, 0.5]);
    data.addRow(["N", null, null, 1, 0.5, 1]);

    // Create and draw the visualization.
    var chart = new google.visualization.LineChart(document.getElementById('visualization'));
    chart.draw(data, {
        annotation: {
            1: {
                style: 'line'
            }
        },
        curveType: "function",
        width: 500,
        height: 400,
        vAxis: {
            maxValue: 10
        }
    });
} 
```

您可以做的最好的事情是更改线条的样式，但看起来您目前无法更改线条的颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-17T14:57:18.250

是否使用 'style' 选项对其进行了更新，其中可以添加一个新列 {"type":"string","role":"style"} 并且在每一行中我们都会有 {"v":"point {size : 4; 填充颜色: #3366cc;}"}? 这允许注释与点/标记具有相同的颜色（可以为每个点更改），但不允许它是粗体的。要尝试的数据示例之一是，

```
var data =new google.visualization.DataTable(
{
"cols":[
{"label":"Log GDP Per-Capita ","type":"number"},
{"label":"New Chart",
"type":"number"},
{"type":"string","role":"annotation"},
{"type":"string","role":"style"}
],
"rows":[
{"c":[{"v":10.21932},{"v":12.3199676},{"v":"ABW"},{"v":"point {size: 4; fill-color: #3366cc;}"}]},
{"c":[{"v":10.68416},{"v":8.4347518},{"v":"ARE"},{"v":"point {size: 4; fill-color: #3366cc;}"}]},
{"c":[{"v":9.634226},{"v":12.0774068},{"v":"ATG"},{"v":"point {size: 4; fill-color: #3366cc;}"}]},
{"c":[{"v":10.83869},{"v":1.8545959},{"v":"AUS"},{"v":"point {size: 4; fill-color: #3366cc;}"}]},
{"c":[{"v":10.7687},{"v":7.4919999},{"v":"AUT"},{"v":"point {size: 4; fill-color: #3366cc;}"}]}
]
}
); 
```

# python - wxPython: Stuck in .MainLoop()

> ID：15185311
> 
> 赞同：0
> 
> 时间：2013-03-03T11:47:01.777
> 
> 标签：python, wxpython

I am not an experienced programmer. This is probably a simple problem to solve.

I have a function that is supposed to run every two minutes. This function is inside a simple wxPython system tray program. The problem is that I do not know how to run the function because wxPython never leave .MainLoop(). Where should I put the function?

Here is the code: (I have left out the function and import because it is not relevant.)

```
TRAY_TOOLTIP = 'System Tray Demo'
TRAY_ICON = 'star.png'

def create_menu_item(menu, label, func):
    item = wx.MenuItem(menu, -1, label)
    menu.Bind(wx.EVT_MENU, func, id=item.GetId())
    menu.AppendItem(item)
    return item

class TaskBarIcon(wx.TaskBarIcon):
    def __init__(self):
        super(TaskBarIcon, self).__init__()
        self.set_icon(TRAY_ICON)
        self.Bind(wx.EVT_TASKBAR_LEFT_DOWN, self.on_left_down)
    def CreatePopupMenu(self):
        menu = wx.Menu()
        create_menu_item(menu, 'Say Hello', self.on_hello)
        menu.AppendSeparator()
        create_menu_item(menu, 'Exit', self.on_exit)
        return menu
    def set_icon(self, path):
        icon = wx.IconFromBitmap(wx.Bitmap(path))
        self.SetIcon(icon, TRAY_TOOLTIP)
    def on_left_down(self, event):
        print 'Tray icon was left-clicked.'
        MailCheck()
    def on_hello(self, event):
        print 'Hello, world!'
    def on_exit(self, event):
        wx.CallAfter(self.Destroy)

def main():    
    app = wx.PySimpleApp()
    TaskBarIcon()
    app.MainLoop()

    #This is my function I want to run
    #But MainLoop() never ends. Where should I put MainCheck() ?
    MailCheck()       

if __name__=='__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:39:18.253

wxPython 与大多数 GUI 框架一样，使用事件驱动的编程模型。这意味着您的程序的某些部分是响应可能源自用户的操作（例如按键、菜单选择等）系统或可能源自其他程序的操作而运行的。其余时间它位于 MainLoop 中，等待其中一件事情发生。

对于像您这样的情况，有 wx.Timer 类可以触发一次事件，或者可能在 N 毫秒后定期触发。如果您为计时器事件绑定事件处理程序，则该处理程序将在计时器到期时被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:15:21.713

我从未使用过 wxPython，但您可以使用 Python 标准库的 threading-module。

一个最小的例子：

```
import threading

def work(): 
    threading.Timer(0.25, work).start()
    print "stackoverflow"

work() 
```

看看这个线程（示例来自那里）：[定期在线程中实时执行函数，每 N 秒](https://stackoverflow.com/questions/11488877/execute-function-in-thread-every-n-seconds)

# java - how to count with database statement by using netbeans

> ID：15185313
> 
> 赞同：0
> 
> 时间：2013-03-03T11:47:20.050
> 
> 标签：java, database, netbeans

I'm trying to count the input and match it with the data field in database then count the status and display the number of books that the input had borrowed.

```
 Statement statement = conn.createStatement();

        String sql = "SELECT COUNT(jtfMemberID.getText()) as num FROM LOAN WHERE LOAN_STATUS='BORROWED'";

        ResultSet rs1 = statement.executeQuery(sql); 
        int personCount = 0; 

        if(rs1.next()) { 
            personCount = rs1.getInt("num");
            jlbBookBorrow.setText(rs1.getString(personCount));
        }else{
            jlbBookBorrow.setText("0");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:08:08.340

文本`jtfMemberID.getText()`将在您的`SQL` `String`. 您需要将其提取出来：

```
String sql = "SELECT COUNT(" + jtfMemberID.getText() + ") as num FROM LOAN WHERE LOAN_STATUS='BORROWED'"; 
```

此外，为了防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击，请考虑使用[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)。

# mysql - How to add additional column in select when using *?

> ID：15185317
> 
> 赞同：0
> 
> 时间：2013-03-03T11:48:02.957
> 
> 标签：mysql, sql

I have

```
select * from table where id = 3; 
```

but I would like to also make a transformation on one column, so something like this:

```
select replace(aaa, 'a', 'b'), * from table where id = 3; 
```

but this does not work. Anybody knows ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:49:10.100

原因是因为`asterisk` `*`在替换操作之后，尝试交换它，它会正常工作，

```
select  *, 
        replace(aaa, 'a', 'b')  
from    `table` 
where   id = 3; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T11:54:02.580

This should work:

```
select replace(aaa, 'a', 'b'), t.* from table t where id = 3; 
```

# css - css height percentage issue

> ID：15185318
> 
> 赞同：1
> 
> 时间：2013-03-03T11:48:08.920
> 
> 标签：css

I have a block level element containing 25 floated blocks, I set the `width:20%` and `height: 20%`

depending on the height there is sometimes a gap, but width is always correct.

```
#grid{
  width: 880px;
  height: 333px; 
  background: blue;
}
#grid a{
  display: block;
  float: left;
  width: 20%;
  height: 20%;
  background: red
} 
```

please see [http://jsfiddle.net/wVC5j/](http://jsfiddle.net/wVC5j/)

how can i I ensure the gap at the bottom doesn't exist?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:47:33.333

我似乎已经使用`20.15%`高度而不是仅仅 20 解决了这个问题。
这有时会导致一些溢出，但根据我的测试，当高度改变时没有出现蓝色。

[http://jsfiddle.net/wVC5j/3/](http://jsfiddle.net/wVC5j/3/)

# mongodb - MongoDB：Mongo DB 集合的旧记录中没有必要的键

> ID：15185321
> 
> 赞同：0
> 
> 时间：2013-03-03T11:48:40.230
> 
> 标签：mongodb

这些是我的 Mongo DB 员工 Collection 中存在的 3 个示例记录。

如果您能观察到，下面显示的记录之一中缺少一个名为“**国家”的字段。**

```
db.employees.find().pretty()

{
        "_id" : ObjectId("513331a227a414395af00904"),
        "name" : "Ravi",
        "age" : "21",
        "dept" : "DEV",
        "country" : "IND"
}

{
        "_id" : ObjectId("513331e627a414395af00905"),
        "name" : "Pavan",
        "age" : "23",
        "dept" : "DEV"
}

{
        "_id" : ObjectId("513331e627a414395af00907"),
        "name" : "Saagy",
        "age" : "22",
        "dept" : "DEV",
        "country" : "US"
} 
```

我正在研究现有的 Mongo DB，其中某些键可能不存在于集合中的旧记录中，如上面的记录所示。

现在使用下面的代码，我只得到一条记录作为响应，因为另一条记录中不存在国家键。

```
 DBCollection mycollection = db.getCollection("employees");
    BasicDBObject query = new BasicDBObject();
    query.put("dept", "DEV");
    query.put("country", "IND");

    DBCursor cursor = mycollection.find(query);

    while (cursor.hasNext()) 
    {
    System.out.println(cursor.next());
    } 
```

我的要求是，如果国家/地区关键字不存在，那么它应该被视为 IND，并且也应该包含在响应中。

这可能吗 ？？

请告诉我 。

**更新部分**

我试过使用 $exists ，但我得到一个异常

```
public class Test {

    public static void main(String args[]) throws UnknownHostException {
        Mongo mongo = new Mongo();
        DB db = mongo.getDB("test");
        DBCollection mycollection = db.getCollection("employees");

        BasicDBObject query = new BasicDBObject();
        query.put("dept", "DEV");
        query.put("country", "IND");
        DBObject subquery = new BasicDBObject("country", new BasicDBObject("$exists", false));

        DBCursor cursor = mycollection.find(query,subquery);

        while (cursor.hasNext()) 
        {
        System.out.println(cursor.next());
        }

    }

Exception in thread "main" com.mongodb.MongoException: Unsupported projection option: $exists
    at com.mongodb.MongoException.parse(MongoException.java:82)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:314)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:295)
    at com.mongodb.DBCursor._check(DBCursor.java:368)
    at com.mongodb.DBCursor._hasNext(DBCursor.java:459)
    at com.mongodb.DBCursor.hasNext(DBCursor.java:484)
    at com.Test.main(Test.java:26) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:54:59.497

您可以结合使用 $or 和 $exists 来解决此问题。这应该是正确的：

```
public class Test {

public static void main(String args[]) throws UnknownHostException {
    Mongo mongo = new Mongo();
    DB db = mongo.getDB("test");
    DBCollection mycollection = db.getCollection("employees");

    DBObject clause1 = new BasicDBObject("country", "IND");  
    DBObject clause2 = new BasicDBObject("$exists", false);    
    BasicDBList or = new BasicDBList();
    or.add(clause1);
    or.add(clause2);

    BasicDBObject query = new BasicDBObject();
    query.put("dept", "DEV");
    query.put("$or", or);

    DBCursor cursor = mycollection.find(query);

    while (cursor.hasNext()) 
    {
    System.out.println(cursor.next());
    }

} 
```

# c# - 如何使用 EF 在某些条件下执行删除行？

> ID：15185322
> 
> 赞同：3
> 
> 时间：2013-03-03T11:48:47.143
> 
> 标签：c#, sql, entity-framework, tsql

在 ADO.NET 中我可以使用`delete`语句

从 SQL 表中删除一些行。

实体框架中的等价物是什么？

我怎样才能达到同样的结果？

使用空对象进行更新是不一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:01:58.577

回复告诉你，你需要先将对象（严格来说键就足够了，但是你需要手动做一些工作）到内存中并将它们标记为删除，最后调用`SaveChanges`. 虽然这是“正常”的方法，但有很多扩展、帮助程序……允许您执行批量删除、批量更新和其他有用的操作。

您可以检查[EntityFramework.Extended](http://nuget.org/packages/EntityFramework.Extended/)（也在[GitHub 上](https://github.com/loresoft/EntityFramework.Extended)）或[Entity Framework Extensions](http://efe.codeplex.com/)（也有来源）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:56:45.480

您需要先检索要删除的对象。例如 ：

```
 // Assuming ID is primary key in `Customer` entity
 Customer cust = (from c in context.Customers where c.ID = "1" select c); 
```

然后使用删除对象`DataContext.entity.DeleteObject`

```
 context.Customers.DeleteObject(cust);
 context.SaveChanges(); 
```

更多：[数据上下文](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:57:11.270

首先你需要从你的数据库实体创建实例，然后你应该选择你想要的对象，然后删除它：

```
TestEntities db = new TestEntities();
Test ts = (from rows in db.Tests
           where rows.ID == 1
           select rows).FirstOrDefault();
if (ts != null)
{
     db.Tests.DeleteObject(ts);
     db.SaveChanges();
} 
```

更新 ：

如果您的结果集是一个列表，我的意思是您可以使用多个记录：

```
List<Test> lst = (from rows in db.Tests select rows).ToList();
foreach (Test item in lst)
{ 
     db.Tests.DeleteObject(item);
}
db.SaveChanges(); 
```

# c# - How to get amount of 1s from 64 bit number

> ID：15185324
> 
> 赞同：0
> 
> 时间：2013-03-03T11:49:02.317
> 
> 标签：c#, bit, ulong

> Possible duplicate: [Count number of bits in a 64-bit (long, big) integer?](https://stackoverflow.com/q/2709430/800214)

For an image comparison algorithm I get a 64bit number as result. The amount of 1s in the number (ulong) (101011011100...) tells me how similar two images are, so I need to count them. How would I best do this in C#? I'd like to use this in a WinRT & Windows Phone App, so I'm also looking for a low-cost method.

EDIT: As I have to count the bits for a large number of Images, I'm wondering if the lookup-table-approach might be best. But I'm not really sure how that works...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:57:50.030

Sean Eron Anderson的[Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel)有这个技巧，其中包括：

> 计数位设置，并行
> 
> ```
> unsigned int v; // count bits set in this (32-bit value)
> unsigned int c; // store the total here
> static const int S[] = {1, 2, 4, 8, 16}; // Magic Binary Numbers
> static const int B[] = {0x55555555, 0x33333333, 0x0F0F0F0F, 0x00FF00FF, 0x0000FFFF};
> 
> c = v - ((v >> 1) & B[0]);
> c = ((c >> S[1]) & B[1]) + (c & B[1]);
> c = ((c >> S[2]) + c) & B[2];
> c = ((c >> S[3]) + c) & B[3];
> c = ((c >> S[4]) + c) & B[4]; 
> ```
> 
> B数组，表示为二进制，是：
> 
> ```
> B[0] = 0x55555555 = 01010101 01010101 01010101 01010101
> B[1] = 0x33333333 = 00110011 00110011 00110011 00110011
> B[2] = 0x0F0F0F0F = 00001111 00001111 00001111 00001111
> B[3] = 0x00FF00FF = 00000000 11111111 00000000 11111111
> B[4] = 0x0000FFFF = 00000000 00000000 11111111 11111111 
> ```
> 
> 我们可以通过继续使用二进制幻数 B 和 S 的模式来调整更大整数大小的方法。如果有 k 位，那么我们需要数组 S 和 B 是 ceil(lg(k)) 个元素长，并且我们必须为 c 计算与 S 或 B 长的相同数量的表达式。对于 32 位 v，使用 16 次操作。对 32 位整数 v 中的位数进行计数的最佳方法如下：
> 
> ```
> v = v - ((v >> 1) & 0x55555555);                    // reuse input as temporary
> v = (v & 0x33333333) + ((v >> 2) & 0x33333333);     // temp
> c = ((v + (v >> 4) & 0xF0F0F0F) * 0x1010101) >> 24; // count 
> ```
> 
> 最好的位计数方法只需要 12 次操作，这与查找表方法相同，但避免了表的内存和潜在的缓存未命中。它是上述纯并行方法和使用乘法的早期方法（在使用 64 位指令计数位的部分）之间的混合，尽管它不使用 64 位指令。字节中设置的位计数是并行完成的，并且通过乘以 0x1010101 并右移 24 位来计算字节中设置的位的总和。
> 
> 将最佳位计数方法推广到位宽高达 128 的整数（由类型 T 参数化）是这样的：
> 
> ```
> v = v - ((v >> 1) & (T)~(T)0/3);                           // temp
> v = (v & (T)~(T)0/15*3) + ((v >> 2) & (T)~(T)0/15*3);      // temp
> v = (v + (v >> 4)) & (T)~(T)0/255*15;                      // temp
> c = (T)(v * ((T)~(T)0/255)) >> (sizeof(T) - 1) * CHAR_BIT; // count 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:54:28.243

Something along these lines would do (note that this isn't tested code, I just wrote it here, so it may and probably will require tweaking).

```
int numberOfOnes = 0;
for (int i = 63; i >= 0; i--)
{
    if ((yourUInt64 >> i) & 1 == 1) numberOfOnes++;
    else continue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:00:46.983

选项 1 - 如果 64 位结果 < 2^63，则迭代次数更少：

```
byte numOfOnes;
while (result != 0)
{
    numOfOnes += (result & 0x1);
    result = (result >> 1);
}

return numOfOnes; 
```

选项 2 - 交互次数恒定 - 可以使用循环展开：

```
byte NumOfOnes;

for (int i = 0; i < 64; i++)
{
    numOfOnes += (result & 0x1);
    result = (result >> 1);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T12:00:28.840

这是 BitCount 的 32 位版本，您可以通过再右移 32 位轻松地将其扩展到 64 位版本，这将非常有效。

```
int bitCount(int x) {
/* first let res = x&0xAAAAAAAA >> 1 + x&55555555
 * after that the (2k)th and (2k+1)th bits of the res
 * will be the number of 1s that contained by the (2k)th 
 * and (2k+1)th bits of x
 * we can use a similar way to caculate the number of 1s
 * that contained by the (4k)th and (4k+1)th and (4k+2)th 
 * and (4k+3)th bits of x, so as 8, 16, 32
 */ 
    int varA = (85 << 8) | 85;
    varA = (varA << 16) | varA;
    int res = ((x>>1) & varA) + (x & varA);

    varA = (51 << 8) | 51;
    varA = (varA << 16) | varA;
    res = ((res>>2) & varA) + (res & varA);

    varA = (15 << 8) | 15;
    varA = (varA << 16) | varA;
    res = ((res>>4) & varA) + (res & varA);

    varA = (255 << 16) | 255;
    res = ((res>>8) & varA) + (res & varA);

    varA = (255 << 8) | 255;
    res = ((res>>16) & varA) + (res & varA);
    return res;
} 
```

# android - 计数 listView 项目错误

> ID：15185334
> 
> 赞同：1
> 
> 时间：2013-03-03T11:50:37.417
> 
> 标签：android, listview, counting

我正在尝试计算 listView 项目。我使用这段代码：

```
int count=0;
ListView listView = (ListView) findViewById(R.id.listView1);
 for(int i = 0; i  <= listView.getLastVisiblePosition(); i++)
         {
             if(listView.getChildAt(i)!= null)
             {
                 count++;  
             }
         }

Toast.makeText(getApplicationContext(), String.valueOf(count), Toast.LENGTH_SHORT).show(); 
```

为什么 COUNT 变量值总是 0，当 listView 显示一些记录时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:33:11.910

如果您正在寻找所有 ListView 项目的计数，您可以使用此调用（确保设置了适配器）：

```
listView.getCount(); 
```

如果你想要的是可见项目的数量，试试这个（仅适用于可见的 ListView）：

```
listView.getLastVisiblePosition()-listView.getFirstVisiblePosition(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:21:51.437

让我解释一下原因..你刚刚得到这样的列表视图

```
ListView listView = (ListView) findViewById(R.id.listView1); 
```

所以listview没有元素，然后你试图通过使用 `listView.getLastVisiblePosition()`它来获取最后一个可见位置总是返回零，因为你的listview还没有与任何适配器绑定，即你的listview在你获得最后一个可见位置时是空的到`place this code after binding Adapter to the listview`

```
for(int i = 0; i  <= listView.getLastVisiblePosition(); i++)
         {
             if(listView.getChildAt(i)!= null)
             {
                 count++;  
             }
         } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T09:44:54.833

使用这个。它可以帮助我

```
String CountListRowNo= String.valueOf(+ListviewObj.getAdapter().getCount()); 
```

# java - 在 Java 中，如何检测字符串是否为 unicode 转义

> ID：15185338
> 
> 赞同：0
> 
> 时间：2013-03-03T11:50:58.537
> 
> 标签：java, unicode, properties

我有一个属性文件，它的键值中可能/可能不包含 unicode 转义字符。请参阅下面的示例。我的工作是确保如果属性文件中的值包含非 ascii 字符，那么它应该是 unicode 转义的。因此，在下面的示例中，第一个条目是可以的，所有像第二个条目一样的条目都应该被删除并转换为像第一个条目一样。

`##sample.properties
escaped=cari\u00F1o
nonescaped=cariño
normal=darling`

从本质上讲，我的问题是如何在 Java 中区分**cari\u00F1o**和**cariño**，因为就 Java 而言，它将它们视为相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:10:16.167

Java 中的属性文件**必须**以 ISO-8859-1 字符集保存，Java 才能正确读取它们。这意味着可以使用西欧语言中的特殊字符而不转义它们。如果不转义它们，就不可能使用来自其他语言的字符，例如来自复活节欧洲、俄罗斯或中国的字符。

因此，只有少数非 ascii 字符*可以*出现在属性文件中而不会被转义。

要检测字符是否被转义，您需要直接打开属性文件，而不是通过 Properties 类。当您通过它加载文件时，Properties 类会为您完成所有转义。您应该使用 File 类或通过 System.getResourceAsStream 作为 InputStream 打开它们。一旦你这样做了，你可以一次扫描输入流一个字节，并确保所有字节都在 0x20-0x7E 范围内加上新行 \r 和 \n 这是你在属性文件中期望[的字符的 ASCII 范围](http://ostermiller.org/calc/ascii.html).

我建议您的翻译人员不要尝试直接编写属性文件。他们应该为您提供您转换为属性文件的电子表格等文档。或者他们可以使用[诸如 Attesoro](http://attesoro.org/)（我编写的）之类的翻译编辑器来让他们保存正确转义的属性文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:09:57.150

您可以简单地使用该`native2ascii`工具，它完全执行此转换（它将所有非 ASCII 字符转换为转义符，但保持现有转义符不变）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:20:16.657

您的问题是 Java`Properties`类*解码*属性文件，假设 ISO-8859-1 编码，并*解析*转义的 unicode 字符。

所以从某种角度`Properties`来看，这两个字符串确实是一样的。

我相信如果您需要区分这两者，您将*需要编写自己的 parser*。

它实际上是您默认不需要关心的功能。让我印象最奇怪的一件事是（唯一的）编码是 ISO-8859-1，可能是出于历史原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T12:24:12.343

库[ICU4J](http://site.icu-project.org/home/why-use-icu4j)似乎是您正在寻找的。请参阅[规范化](http://userguide.icu-project.org/transforms/normalization)页面。

# java - Java 2d 在 netbeans 中为导入的图像设置动画

> ID：15185347
> 
> 赞同：0
> 
> 时间：2013-03-03T11:52:00.653
> 
> 标签：java, animation

嗨，我只想问如何将导入的（jpg）图像从左到右或自下而上移动。我是 Java 2d 的初学者。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:55:15.203

您将动画识别为“帧之间的差异”，并且帧以特定帧速率显示。

所以你要做的是实现一个计时器，重新计算应该绘制什么（以及如何和在哪里）并重新绘制你的画布。这一遍又一遍。

一些简化的伪代码可能如下所示：

```
while(true){
    myImage.setX(myImage.getX() +1); /* change the x-position to x+1 */
    myImage.setY(myImage.getY() +1); /* change the y-position to y+1 */
    myCanvas.paint(); /* redraw your canvas */
    sleep(1/framerate); /* wait for 1/framerate seconds */ 
} 
```

您应该将其放入线程中，以便您的 UI 保持响应。

顺便说一句：它不依赖于您使用的 IDE（Netbeans）。

# android - Setting images in gridview to transparent

> ID：15185349
> 
> 赞同：0
> 
> 时间：2013-03-03T11:52:13.713
> 
> 标签：android, gridview, imageview

So I have images in gridview. These images are shown in an activity. When one of the images is clicked, new activity is started with this image. In this activity, If user inputs correct answer, new activity is started that indicates the answer is correct. After user inputs correct answer, I want to set this image more transparent with a check mark in gridwiew. If the user clicks again to this correct view, I want to show same activity which indicates it was solved correct. How can I do that?

Here is my activity which contains grid view:

```
public class LogoSelectionActivity extends Activity {
.
.
 gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

             Intent intent = new Intent(LogoSelectionActivity.this, LogoActivity.class);
             intent.putExtra ("clicked_position", position);
             startActivity(intent);
} 
```

Here is my activity where user enter inputs:

```
public class LogoActivity extends Activity{

EditText text;
Button check;
Boolean a;
int id;
Names name;
@Override

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_logo);
    check = (Button) findViewById(R.id.Check_button);
    text = (EditText) findViewById(R.id.editText1);
    ImageView view = (ImageView)findViewById(R.id.imageView1);
    final ImageView incorrect = (ImageView)findViewById(R.id.incorrect);
    switch (getIntent().getIntExtra ("clicked_position", -1))
    {
      case 0:
        view.setImageResource(R.drawable.adese);
        id = R.drawable.adese;
        break;
      case 1:
         view.setImageResource(R.drawable.birvar);
         id = R.drawable.birvar;
         break;
      case 2:
         view.setImageResource(R.drawable.agaoglu);
         break;
      case 3:
          view.setImageResource(R.drawable.akinsoft);
          break;
      default:
         view.setImageResource(R.drawable.afra);
         id = R.drawable.afra;
    }
    name = Names.forDrawable(id);
    check.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            a=name.isCorrect(text.getText().toString());
            if(a==true){
            Intent intent = new Intent(LogoActivity.this, CorrectActivity.class);
            startActivity(intent);
            }
            else{
                incorrect.setVisibility(0);
                incorrect.setVisibility(4);
            }
        }
        });
    }
} 
```

I hope I could explain my intention clearly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:36:03.237

有很多方法可以做到这一点。因为这不是问题，所以这是您在项目中想要的功能。

根据我的逻辑，我给你一个解决方案。

脚步：

1.  在网格视图中创建一个静态数组，其项目长度为默认值为 0。

    ```
     static int[] items = {0,0,0,...}; 
    ```

2.  现在`getView`根据数组中的位置使用值检查网格视图的方法，如果它是 0，那么它看起来像正常，否则它看起来会不同（这里你想要透明的复选框，你可以通过在上面添加一个图像来获得它。）

    ```
    If(items[position] == 0){

    }else{

    } 
    ```

3.  现在，当用户点击任何图像并导航到其他屏幕（假设活动 B）时，该时间从该数组传递该位置的值并检查活动 B 的`OnCreate()`。

    ```
    gridview.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

         Intent intent = new Intent(LogoSelectionActivity.this, LogoActivity.class);
         intent.putExtra ("clicked_position", position);
         intent.putExtra ("answered_or_not", items[position]);

         startActivity(intent);
    } 
    ```

4.  如果回答意味着它的值是否为 1，则相应地显示其他情况。

5.  当用户给出答案未回答的问题时，在该数组中将其值设为 1。

我希望它会帮助你，如果有任何问题。

# c# - Install app which uses .dll with IExpress Wizard

> ID：15185350
> 
> 赞同：0
> 
> 时间：2013-03-03T11:52:27.597
> 
> 标签：c#, .net, iexpress

I have two applications which will be installed by a single executable. The problem I'm facing is that one of them uses a .dll. And whenever the IExpress package tries to run the first executable it says that the .dll could not be found, even tough I added the .dll inside and outside the package.

There is any way to make it work with IExpress, which has the required characteristics?

There is any alternative to my problem, as a similar software, for instance?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T06:59:13.863

这听起来与这个问题有点相似：

[Iexpress 正在提取到 %temp% 文件夹...如何防止这种情况发生？](https://stackoverflow.com/questions/19047030/iexpress-is-extracting-to-temp-folder-how-do-i-prevent-this)

正如我在回答中提到的，检查：（1）是否启用了长文件名（LFN）支持？(2)`.dll`实际在档案中吗？

如果检查这些事情不能解决它，我会使用[进程监视器](http://technet.microsoft.com/en-ca/sysinternals/bb896645.aspx)来查看可执行文件正在搜索哪些目录来定位`.dll`文件。理想情况下，它应该在提取目录（例如`%temp%\IXP000.TMP`）中查找，因为这是可执行文件运行时的*当前目录。*

当然，还有其他几个可以代替 IExpress 的实用程序：[7-Zip](http://www.7-zip.org/)、[Inno Setup](http://www.jrsoftware.org/isinfo.php)、[NSIS](http://nsis.sourceforge.net/)、[WinRAR](http://www.rarlab.com/)、[WiX——](http://wixtoolset.org/)仅举几例。

# google-webfonts - Locally installed Google Web fonts appear blurred in Firefox and Chrome

> ID：15185353
> 
> 赞同：2
> 
> 时间：2013-03-03T11:52:32.903
> 
> 标签：google-webfonts

I recently started using the Open Sans Google webfont for my website. Things went well until I installed the Open Sans font onto my computer in the local font dir (Windows XP). Then all of a sudden and only on my computer and in Firefox and Chrome (latest versions running on Windows XP) the Open Sans font started to appear blurred. I thought it had something to do with my site but looking at the Google Web font site, that particular font looked blurred too. Strangely enough IE8 did not suffer from this problem. I removed the Open Sans font from my Windows font directory and the fonts became crystal clear again on my computer and in all browsers. Is there a way to keep the Open Sans font installed on my PC (easy if you want to create mockups using that font,....) without ending up with a blurred font in FF and Chrome for any site using Open Sans?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-23T11:26:08.223

有同样的问题并通过安装 Microsoft 的 Cleartype 调整来修复它。必须安装[powertoy](http://www.microsoft.com/typography/ClearTypePowerToy.mspx)，因为网络版本不适合我

# c# - Child nodes of an element in XML

> ID：15185356
> 
> 赞同：3
> 
> 时间：2013-03-03T11:52:52.373
> 
> 标签：c#, xml

I am trying to write an application that reads each one of the elements but if the element has subelements to read them too.I will give you an example with XML file that I have

XML:

```
<fci>
    <dog_breeds>

        <dog_breed standart_number="SN207" group="GR9" section="S9.8">
            <name>Пекинез</name>
            <country country_code="CHN" capital="Beijing" official_language="Chinesse" time_zone = "UTC/GMT +8 hours"  currency="Chinese Yuan">
                <country_name>Китай</country_name>
                <country_continent>Азия</country_continent>
                <country_government_type>Комунистически щат</country_government_type>
            </country>
            <year_of_establishment>1904</year_of_establishment>
            <head>
                Голяма, пропорционално по-широка, отколкото дълбока.
                Череп: Широк, широк и плосък между очите; не купловиден; широк между ушите.
                Стоп: Ясно изразен.
            </head>
            <teeth>
                Равни устни, без да се показват зъбите или езика. Здравата долна челюсът е от съществено значение.
            </teeth>
            <ears>
                Със сърцевидна форма, поставени на нивото на черепа, носени плътно по главата и недостигащи под линията на муцуната. Дълъг пищен украсяващ косъм.
            </ears>
            <eyes>
                Големи, ясни, кръгли, тъмни и сияещи. Без видими очни проблеми.
            </eyes>
            <tail>
                Високо поставена, носи се плътно прилепнала, леко извита върху едната от двете страни на гърба. Дълъг украсяващ косъм.
            </tail>
            <colors>
                <primary_color> Всички цветове и петна се допустими и еднакво ценени, с изключение на албинизъм или чевенокафяв цвят</primary_color>
                <secondary_color> Всички цветове и петна се допустими и еднакво ценени, с изключение на албинизъм или чевенокафяв цвят</secondary_color>
                <prefered_color> Всички цветове и петна се допустими и еднакво ценени, с изключение на албинизъм или чевенокафяв цвят</prefered_color>
            </colors>
            <fur>
                Косъм: Козината е дълга, права, с обилна грива, простираща се извън холката, образуваща пелерина около шията. Груб покривен косъм с дебел, по-мек подкосъм. Украсяващ косъм по ушите, задната страна на крайниците, опашката и пръстите.Дължината и количеството на козината не трябва да помрачават очертанията на тялото.
            </fur>
            <image>https://skydrive.live.com/redir?resid=6F26B1E0D6CF648E!291</image>
            <size>
                <males_size>При тази порода единствено теглото се взима под внимание</males_size>
                <females_size></females_size>
            </size>
            <weight>
                <males_weight>5 кг</males_weight>
                <females_weight>5.4 кг</females_weight>
            </weight>
        </dog_breed>
</fci> 
```

As you can see I have elements like country that have subelements(country_name,country_continent,country_government_type) where the actual information stands.So I am trying to read each one of them but it doesn't happen the way I want it to be. Here is my Sample code:

```
XmlDocument xdoc = new XmlDocument();
xdoc.Load("D:....\\ASP_fifth_xml_file.xml");
XmlNodeList elementsList = xdoc.GetElementsByTagName("country");

    for (int i = 0; i < elementsList.Count; i++)
    {
        foreach (XmlElement element in elementsList[i].ChildNodes)
        {

            richTextOutput_TextBox.Text += element.Name +":"+ element.InnerText+"\n";
            if (element.HasChildNodes)
            {
                foreach (XmlElement subEl in element.ChildNodes)
                {
                    richTextOutput_TextBox.Text += subEl.Name + ":" + subEl.InnerText + "\n";
                }
            }

        }
        richTextOutput_TextBox.Text += "\n \n \n";
    } 
```

When I try to run it it gives me an exception on the line where `foreach (XmlElement subEl in element.ChildNodes)` stands. It says:

> Unable to cast object of type 'System.Xml.XmlText' to type 'System.Xml.XmlElement'.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:09:34.843

将 XmlElment 更改为 XmlNode 将解决该问题。在您的情况下，由于您只有一个具有特定标签名称的元素，因此变量 elementsList 将是单个节点，不需要 for 循环。

```
 XmlDocument xdoc = new XmlDocument();
        xdoc.Load("D:....\\ASP_fifth_xml_file.xml");
        XmlNode node = xdoc.SelectSingleNode("//country");
        foreach (XmlNode element in node.ChildNodes)
        {
            richTextOutput_TextBox.Text += element.Name + ":" + element.InnerText + "\n";
            if (element.HasChildNodes)
            {
                foreach (XmlNode subEl in element.ChildNodes)
                {
                    richTextOutput_TextBox.Text += subEl.Name + ":" + subEl.InnerText + "\n";
                }
            }

            richTextOutput_TextBox.Text += "\n \n \n";
        } 
```

如果问题仍然存在，请尝试使用隐式类型变量（var）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T07:27:44.733

您的 ChildNodes 包括文本节点。如果您想忽略它们，请使用 OfType<XmlElement>()

```
foreach (XmlNode subEl in element.ChildNodes.OfType<XmlElement>()){...} 
```

# paypal - paypal个人信用卡支付解决方法

> ID：15185357
> 
> 赞同：0
> 
> 时间：2013-03-03T11:52:52.910
> 
> 标签：paypal, paypal-adaptive-payments

我们在欧洲，实际上，不允许客人向朋友付款（使用信用卡/借记卡）。我们正在寻找一种替代方法来避免贝宝注册（我们知道这种支付类型的限制[https://www.x.com/developers/paypal/guest-payments](https://www.x.com/developers/paypal/guest-payments)）。

我们正在考虑下一个解决方法：（使用链式支付）：

```
 [fee 1]                             [fee 2]
Guest   ------------>   Primary receiver  -------------> Secondary receiver
(credit card)          (business account)                 (personal account) 
```

所以主要收款人没有收到任何钱，将所有收款人的钱转移到次要收款人。

问题是，当您创建接收者列表时，您必须指定 Primary 和 Secondary 接收者的数量，如果我们将 feePayer 设置为 SECONDARYONLY，我们不知道确切的数量，因为我们不知道费用的数量（fee 1 + 费用 2)。

我们已经看到“Payments Details API 操作”，尝试从 PayKey 获取费用，然后完成 payrequest 消息，但消息中没有返回此信息。

有任何想法吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:54:20.913

在链式付款中，主要收款人收到付款的总金额。一旦主要收到付款，那么最多可以在其他收件人之间分配总额。

对于此示例，消费者支付了 100.00 美元：

主要收款人收到 100.00 美元

主要收款人然后自动将资金转发到：

*   第二收款人 1 $50.00
*   第二接收者 2 $30.00
*   第二接收者 3 $20.00

只要辅助接收者的总金额不超过主要接收者的金额，这很好。这也应该解决费用问题，因为拥有所有资金的二级接收者负责两笔交易的费用。

您在交易前不知道费用金额是正确的。这是在付款时由 PayPal 计算的，并且无法在付款前查看可能的费用。如果您是收款账户的所有者，您可以执行计算，因为您已经知道收取的费率。

如果您有任何问题，请告诉我。

# w3c - How to get some information from Set in w3c validator

> ID：15185358
> 
> 赞同：2
> 
> 时间：2013-03-03T11:53:04.233
> 
> 标签：w3c, w3c-validation, java

How I can get some information (column, line, message) at this code?

```
String xhtml = "<html><body><p>Hello, world!<p></body></html>";
ValidationResponse response = new ValidatorBuilder().html().validate(xhtml);
if (!response.valid()) 
{
    Set<Defect> errors = response.errors();
    //... what write at this place?
    System.out.println(errors[0].column() + " " + errors[0].source());
} 
```

I tried to write as:

```
String xhtml = "<html><body><p>Hello, world!<p></body></html>";
ValidationResponse response = new ValidatorBuilder().html().validate(xhtml);
 if (!response.valid()) 
 {
     Set<Defect> errors = response.errors();
     Defect[] errorsArray = (Defect[]) errors.toArray();
     System.out.println(errorsArray[0].column() + " " + errorsArray[0].source());
 } 
```

But get exception:

> Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Lcom.rexsl.w3c.Defect; at HTMLValidator.main(HTMLValidator.java:17)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T17:53:38.997

`toArray()`返回一个`Object[]`。如果你想要一个`Defect[]`，你应该使用重载版本：

```
String xhtml = "<html><body><p>Hello, world!<p></body></html>";
ValidationResponse response = new ValidatorBuilder().html().validate(xhtml);
if (!response.valid()) 
{
    Set<Defect> errors = response.errors();
    Defect[] errorsArray = errors.toArray(new Defect[errors.size()]);
    System.out.println(errorsArray[0].column() + " " + errorsArray[0].source());
} 
```

# java - ServletRequest.getRequestDispatcher() 用于不存在的文件/资源

> ID：15185359
> 
> 赞同：2
> 
> 时间：2013-03-03T11:53:18.877
> 
> 标签：java, servlets, tomcat7, servlet-3.0, requestdispatcher

目前我正在准备 Java EE Web 组件开发人员考试。

在考试学习指南和 Servlet API Java 文档中，我发现了该方法

`ServletRequest.getRequestDispatcher()`

返回

> **如果 servlet 容器不能返回 RequestDispatcher，则为 null**。

当我用不存在的静态文件尝试它时，我实际上得到了非空值。并转发导致 404 发送给客户端。对于不存在的 servlet 也有同样的效果。我使用 Apache Tomcat 7.0。

这是否意味着这种行为没有定义并且由实施者选择？他们（Java 文档作者）所说的“servlet 容器不能返回 RequestDispatcher”是什么意思？我试图在 JSR 规范中寻找它，但无法找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:18:29.820

这就是 Servlet 3.0 规范对调度程序行为的规定：

> getRequestDispatcher 方法接受一个 String 参数来描述 ServletContext 范围内的路径。此路径必须相对于 ServletContext 的根目录并以“/”开头，或者为空。该方法使用路径查找 servlet，使用第 12 章“将请求映射到 Servlet”中的 servlet 路径匹配规则，用 RequestDispatcher 对象包装它，并返回结果对象。**如果无法根据给定路径解析任何 servlet，则提供一个返回该路径内容的 RequestDispatcher。**

如果无法为调度路径找到匹配的 servlet，它没有提到返回 null。相反，它声明将找到在调度路径中找到的“内容”，我将其翻译为意味着实现可以简单地允许容器*绝对*解析路径（在您的场景中会产生 404）。

不过，就 Javadoc 而言，它似乎记录了最广泛的用例，也就是说，如果容器由于任何原因无法创建调度程序，那么它将返回一个空对象（而不是引发异常）。这可能是由于实现中的技术问题，或者可能实际上是有效的（例如，JAX-RS 实现可以访问某种级别的 Servlet 基础结构，但不能使用 servlet 上下文或调度程序）。

# python - Django on Heroku - browser emulator with javascript plugin

> ID：15185360
> 
> 赞同：1
> 
> 时间：2013-03-03T11:53:28.097
> 
> 标签：python, django, heroku

I'm writing a project in **Django** which is to run on **Heroku** PaaS. Within my code base, I would like to be able to perform some tests on links, ex.: **open them in a browser**.

What's most important to me is that I need to execute the **javascript**.

Are there any emulators of browser in Python which supports javascript emulation (I know mechanize doesn't, I tried splinter and spynner - but I have some difficulties in using them on heroku, to use splinter I'd need PyQt, to use spynner I'd need firefox - and I don't know how to install them - I guess it is not possible, is it?).

Of course I'm not fixed on Python. I mean, I've thought about another possibility - to write a Perl script (I have already written a script which does what I want it to do) and execute it from Python (I know how to do that) - but I don't know if it's possible to run Perl script from a Python code on Heroku.

Can anybody help me please?

Regards, Natalia

# sql - Sum and subtract operations in select query with multiple joins

> ID：15185361
> 
> 赞同：0
> 
> 时间：2013-03-03T11:53:30.423
> 
> 标签：sql, stored-procedures

I have following tables:

TABLE `ITEMS` Contains

```
ITEM_ID ITEM
-------------------
1       Food
2       Medical
3       Shopping
4       Others 
```

TABLE `EXPENSE_DURATION` Contains

```
E_ID    NAME    FROM_DATE               TO_DATE
----------------------------------------------------------------
1   FEB_2012    1-Feb-2013 12:00:00 AM  28-Feb-2013 12:00:00 AM
2   MAR_2012    1-Mar-2013 12:00:00 AM  31-Mar-2013 12:00:00 AM 
```

TABLE `AMOUNT_FOR_EXPENSE` Contains

```
AFE_ID  E_ID    ITEM_LIST   AMOUNT
------------------------------------
1       1       1,2,3,4     5000
2       2       1,2,3,4     6000 
```

TABLE `EXPENSE` Contains

```
EXPENSE_ID  E_ID    ITEM_ID     DATE                    AMOUNT
---------------------------------------------------------------------
1          1        1           1-Feb-2013 12:00:00 AM  250
2          1        2           1-Feb-2013 12:00:00 AM  450
3          1        3           1-Feb-2013 12:00:00 AM  300
4          1        4           1-Feb-2013 12:00:00 AM  100
5          1        1           2-Feb-2013 12:00:00 AM  4500
6          1        2           2-Feb-2013 12:00:00 AM  3500
7          1        3           2-Feb-2013 12:00:00 AM  2000
8          1        4           2-Feb-2013 12:00:00 AM  1500 
```

Now I want to make one stored Procedure that gives me `expense_summary`. I am passing Just `E_ID` as parameter to this stored procedure.

As a result I need one table contains respective summary.

Example: E_ID=1

Result:

```
TOTAL_OUT   TOTAL_IN    SUMMARY (IN-OUT)
12600       5000        -7600 
```

I know only

```
SELECT SUM(AMOUNT) FROM EXPENSE WHERE E_ID=1 
```

Result > 12600

And

```
SELECT AMOUNT FROM AMOUNT_FOR_EXPENSE WHERE E_ID=1 
```

Result > 5000

I Know this two separate queries but I don’t know how to **merge** them and how to perform **subtraction** in **select query** with **joins**.

Please help to make select query / stored procedure so that I can generate result as I need.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T13:05:15.270

您可以使用以下查询来获取结果：

```
select e.e_id, 
  e.Total_out, 
  a.amount Total_in,
  (e.Total_out - a.amount) * -1 Summary
from
(
  select sum(amount) Total_out,
    e_id
  from expense
  group by e_id
) e
left join AMOUNT_FOR_EXPENSE a
  on e.e_id = a.e_id
where e.e_id = 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!6/00140/1)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-03T12:18:41.983

尝试这个

```
 SELECT SUM(AMOUNT),AMOUNT FROM EXPENSE ,AMOUNT_FOR_EXPENSE  WHERE E_ID=1 
```

# c# - 没有重复的随机字符串

> ID：15185369
> 
> 赞同：5
> 
> 时间：2013-03-03T11:54:55.143
> 
> 标签：c#, random, no-duplicates

我正在尝试生成一个没有重复字符的 16 个字符的随机字符串。我认为这不应该太难，但我被困住了。

我正在使用 2 种方法，一种用于生成密钥，另一种用于删除重复字符。在 main 中，我创建了一个 while 循环以确保生成的字符串长度为 16 个字符。

我的逻辑有问题，因为它只会生成带有重复项的 16 字符字符串。就是做不好。

编码：

```
public string RemoveDuplicates(string s)
{
    string newString = string.Empty;
    List<char> found = new List<char>();
    foreach (char c in s)
    {
        if (found.Contains(c))
            continue;

        newString += c.ToString();
        found.Add(c);
    }
    return newString;
}

public static string GetUniqueKey(int maxSize)
{
    char[] chars = new char[62];
    chars =
    "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".ToCharArray();
    byte[] data = new byte[1];
    RNGCryptoServiceProvider crypto = new RNGCryptoServiceProvider();
    crypto.GetNonZeroBytes(data);
    data = new byte[maxSize];
    crypto.GetNonZeroBytes(data);
    StringBuilder result = new StringBuilder(maxSize);
    foreach (byte b in data)
    {
        result.Append(chars[b % (chars.Length)]);

    }
    return result.ToString();
}

string builder = "";

do
{                       

    builder = GetUniqueKey(16);
    RemoveDuplicates(builder);

    lblDir.Text = builder;
    Application.DoEvents();

} while (builder.Length != 16); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T11:59:31.773

考虑实施[洗牌算法](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，您将使用独特的字符对字符串进行洗牌，然后只拾取前 16 个字符。

您可以就地执行此操作，方法是分配`StringBuffer`将包含您的初始数据（“abc ....”）的单个，并使用 Durstenfeld 的算法版本来改变您的缓冲区，而不是返回前 16 个字符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-03T12:00:43.177

有很多算法可以解决这个问题。

一个简单的方法是：

1.  用可用的字符填充一个字符数组。
2.  随机排列数组。
3.  取前 N 个项目（其中 N 是您需要的字符数）。

示例代码：

```
using System;

namespace ConsoleApplication2
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".ToCharArray();
            Random rng = new Random();

            for (int i = 0; i < 10; ++i)
            {
                string randomString = RandomString(16, chars, rng);
                Console.WriteLine(randomString);
            }
        }

        public static string RandomString(int n, char[] chars, Random rng)
        {
            Shuffle(chars, rng);
            return new string(chars, 0, n);
        }

        public static void Shuffle(char[] array, Random rng)
        {
            for (int n = array.Length; n > 1; )
            {
                int k = rng.Next(n);
                --n;
                char temp = array[n];
                array[n] = array[k];
                array[k] = temp;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-03T12:12:37.323

```
const string chars = 
               "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
var r = new Random();
var s = new string(chars.OrderBy(x => r.Next()).Take(16).ToArray()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-17T06:36:53.900

我正在使用 GUID 生成方法，它本身会生成随机字符串，如果开头出现数字，您可以对其进行修改，使用下面给出的代码：

```
string guid = System.Guid.NewGuid().ToString("N");
            while (char.IsDigit(guid[0]))
                guid = System.Guid.NewGuid().ToString("N"); 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-06T02:45:23.777

看看这是否有帮助：

```
 RandomString()
    {
        string randomStr = Guid.NewGuid().ToString();
        randomStr = randomStr.Replace("-", "").Substring(0, 16);   
        Console.WriteLine(randomStr);
    } 
```

这将返回字母数字字符串。

# php - PHP: including file written in Bengali does not show text while writing directly in the main page does show up

> ID：15185373
> 
> 赞同：0
> 
> 时间：2013-03-03T11:55:18.747
> 
> 标签：php, unicode, multilingual

For index.php, Doctype and HTML tags are as follows:

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
  'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' > 
```

Meta tag is:

```
<meta  charset="utf-8"/> 
```

If I write Bengali (i.e. Bangla) language in the webpage, I can view it well. But if I write the Bengali text in a PHP file and then include it in index.php, only `?` marks are shown.

What is the way to display it properly while including another PHP file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:17:11.697

将 PHP 文件保存为不带**BOM 签名的****UTF-8**，您可以使用 notepad2 或其他支持编码的文本编辑器。

# android - Issue with form upload in StageWebView / WebView on Android

> ID：15185374
> 
> 赞同：0
> 
> 时间：2013-03-03T11:55:23.157
> 
> 标签：android, actionscript-3, browser, air

since several days, I try to find the reason, why my App cannot open camera roll on android.

I have written down an App, which shows via StageWebView PHP generated remote sites. Everything is cool so far. But if I try to upload a file via form, the camera roll doesnt open at Android. On iOS it works perfectly!

The form in my php looks like this:

```
<form action="" method="post" enctype="multipart/form-data">
<input name="file" type="file" />
<input name="submit" type="submit" value="submit />
</form> 
```

On iOS: The touch at "Select file" opens camera roll to select an image.

On Android: Nothing happens...

BTW: I tested the WebView component @ Android SDK, the same issue. Anyone any idea?

PS: I found the solution for Android SDK at [Android WebView File Upload](https://stackoverflow.com/questions/11724129/android-webview-file-upload)

**But still missing the solution for Adobe Air StageWebView....**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-29T12:45:35.723

实际上，问题在于文件上传组件在 Android webviews 中不再工作了！无论您使用 Adob​​e Air 还是本机应用程序，单击它时它都不会执行任何操作。谷歌在 Android 4.2 中[故意](https://code.google.com/p/android/issues/detail?id=62220)阻止了它。

我最近花了很多时间来解决这个问题。我的解决方案是使用上周发布的这个 ANE，它取代了 StageWebView 并支持输入类型文件很好（在 android 和 IOS 上测试）：[https ://github.com/myflashlab/webView-ANE](https://github.com/myflashlab/webView-ANE)

希望这可以帮助！

# c++ - TCP Winsock：接受多个连接/客户端

> ID：15185380
> 
> 赞同：2
> 
> 时间：2013-03-03T11:56:08.487
> 
> 标签：c++, sockets, winapi, tcp, winsock2

我试图增加客户端，并将其发送给每个客户端。但它只适用于一个，在一个客户端连接服务器后，它对传入的连接毫无用处。

```
while(true)
{
    if(Sub = accept(Socket, (sockaddr*)&IncomingAddress, &AddressLen))
    {
        for(int i = 0; i < MaxUsers; i++)
        {
            if(!ClientAddress[i].sin_family)
            {
                ClientAddress[i] = IncomingAddress;
                char Version[128], Dir[256], Path[256], URL[128], Message[256];
                GetCurrentDirectory(256, Dir);
                sprintf(Path, "%s\\Version.ini", Dir);
                GetPrivateProfileString("Default", "Version", "1.0.0.0", Version, 128, Path);
                GetPrivateProfileString("Default", "URL", "", URL, 128, Path);
                GetPrivateProfileString("Default", "Message", "", Message, 256, Path);
                send(Sub, Version, 128, 0);
                send(Sub, Message, 256, 0);
                break;
            }
        }
        continue;

    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T12:27:11.347

当然不能接受新客户端，因为服务器处理刚刚接受的客户端，即服务器正忙。

解决方案很简单：为每个接受的客户端创建一个新线程并在那里处理客户端会话。只需使用`_beginthreadex()`（`#include <process.h>`）：

```
unsigned __stdcall ClientSession(void *data)
{
    SOCKET client_socket = (SOCKET)data;
    // Process the client.
}

int _tmain(int argc, _TCHAR* argv[])
{
    ...

    SOCKET client_socket;
    while ((client_socket = accept(server_socket, NULL, NULL))) {
        // Create a new thread for the accepted client (also pass the accepted client socket).
        unsigned threadID;
        HANDLE hThread = (HANDLE)_beginthreadex(NULL, 0, &ClientSession, (void*)client_socket, 0, &threadID);
    }
} 
```

顺便说一句，`send()/recv()`函数**不能保证**一次调用就可以发送/接收**所有数据。**有关这些函数的返回值，请参阅文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T12:20:22.093

接受套接字后，为客户端请求创建单独的线程。然后继续等待新的接受。

例如：

```
 ...
    while (1)
    {
        AcceptSocket = SOCKET_ERROR;

        while (AcceptSocket == SOCKET_ERROR )
        {
            AcceptSocket = accept( m_socket, NULL, NULL );
        }

        printf( "Client Connected.\n");

        DWORD dwThreadId;
        CreateThread (NULL, 0, ProcessClient, (LPVOID) AcceptSocket, 0, &dwThreadId);
    }
    ... 
```

ProcessClient 函数可能是这样的：

```
DWORD WINAPI ProcessClient (LPVOID lpParameter)
{
    SOCKET AcceptSocket = (SOCKET) lpParameter;

    // Send and receive data.
    int bytesSent;
    int bytesRecv = SOCKET_ERROR;
    char sendbuf[2000]="";
    char recvbuf[2000]="";

    char timebuf[128];

    sprintf(sendbuf, "Hello, it's a test server at %s:%d (commands: 1, 2, exit)\n", ipaddr, port);
    bytesSent = send( AcceptSocket, sendbuf, strlen(sendbuf), 0);

    if (bytesSent == SOCKET_ERROR)
    {
        printf( "Error at send hello: %ld\n", WSAGetLastError());
        goto fin;
    }

    while (1)
    {
        _strtime( timebuf );
        ZeroMemory (recvbuf, sizeof(recvbuf));

        bytesRecv = recv( AcceptSocket, recvbuf, 32, 0);
        printf( "%s Client said: %s\n", timebuf, recvbuf);

        if (strcmp(recvbuf, "1") == 0)
        {
            sprintf(sendbuf, "You typed ONE\n");
            //printf("Sent '%s'\n", sendbuf);
            bytesSent = send( AcceptSocket, sendbuf, strlen(sendbuf), 0);

            if (bytesSent == SOCKET_ERROR)
            {
                printf( "Error at send: %ld\n", WSAGetLastError());
                goto fin;
            }
        }
        else if (strcmp(recvbuf, "2") == 0)
        {
            sprintf(sendbuf, "You typed TWO\n");
            //printf("Sent '%s'\n", sendbuf);
            bytesSent = send( AcceptSocket, sendbuf, strlen(sendbuf), 0);

            if (bytesSent == SOCKET_ERROR)
            {
                printf( "Error at send: %ld\n", WSAGetLastError());
                goto fin;
            }
        }
        else if (strcmp(recvbuf, "exit") == 0)
        {
            printf( "Client has logged out\n", WSAGetLastError());
            goto fin;
        }
        else
        {
            sprintf(sendbuf, "unknown command\n");
            //printf("Sent '%s'\n", sendbuf);
            bytesSent = send( AcceptSocket, sendbuf, strlen(sendbuf), 0);

            if (bytesSent == SOCKET_ERROR)
            {
                printf( "Error at send: %ld\n", WSAGetLastError());
                goto fin;
            }
        }
    }

fin:
    printf("Client processed\n");

    closesocket(AcceptSocket);
    return 0;
} 
```

# java - Android 上的 Google Places API：没有主机路由

> ID：15185387
> 
> 赞同：1
> 
> 时间：2013-03-03T11:57:02.963
> 
> 标签：java, android, google-places-api

我在我的应用程序中使用 google places api 来显示附近的食物位置。

我正在使用以下代码：

```
public class Background extends AsyncTask<String, Integer, String> {

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
    }

    @Override
    protected String doInBackground(String... params) {
        pfr = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        lctn = "location=" + latitude + "," + longitude;
        key = "&key=my key";
        type = "&types=" + pfr.getString("type", "food");
        radius = "&radius=" + pfr.getString("radius", "500");
        sensor = "&sensor=false";
        StringBuilder requesturl = new StringBuilder(googlegives);
        requesturl.append(lctn);
        requesturl.append(radius);
        requesturl.append(type);
        requesturl.append(key);
        requesturl.append(sensor);
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet req = new HttpGet(requesturl.toString());
        Log.d("create", "0");
        try {
            HttpResponse res = client.execute(req);
            HttpEntity jsonentity = res.getEntity();
            String data = EntityUtils.toString(jsonentity);
            JSONObject jsonobj = new JSONObject(data);
            JSONArray resarray = jsonobj.getJSONArray("results");
            if (resarray.length() == 0) {
                Toast.makeText(getApplicationContext(), "nothing found",
                    Toast.LENGTH_LONG).show();
            } else {
                int len = resarray.length();
                for (int j = 0; j < len; j++) {
                    lon = resarray.getJSONObject(j).getJSONObject("geometry")
                            .getJSONObject("location").getDouble("lng");
                    lat = resarray.getJSONObject(j).getJSONObject("geometry")
                            .getJSONObject("location").getDouble("lat");
                    LatLng latLng = new LatLng(lat, lon);
                    googleMap.addMarker(new MarkerOptions()
                            .position(latLng)
                            .title(
                                resarray.getJSONObject(j).getJSONObject("name")
                                        .toString())
                            .snippet(
                                resarray.getJSONObject(j)
                                        .getJSONObject("formatted_address")
                                        .toString()));
                }
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

获取纬度和经度作为获取用户当前位置的全局变量，在我的手机上运行此应用程序时出现在 log cat 中

```
03-03 16:52:37.859: W/System.err(4780): java.net.SocketException: No route to host
03-03 16:52:37.906: W/System.err(4780):     at org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
03-03 16:52:37.906: W/System.err(4780):     at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:357)
03-03 16:52:37.906: W/System.err(4780):     at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:204)
03-03 16:52:37.914: W/System.err(4780):     at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
03-03 16:52:37.914: W/System.err(4780):     at java.net.Socket.connect(Socket.java:1002)
03-03 16:52:37.914: W/System.err(4780):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
03-03 16:52:37.914: W/System.err(4780):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
03-03 16:52:37.914: W/System.err(4780):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-03 16:52:37.914: W/System.err(4780):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-03 16:52:37.914: W/System.err(4780):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
03-03 16:52:37.914: W/System.err(4780):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-03 16:52:37.914: W/System.err(4780):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-03 16:52:37.921: W/System.err(4780):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-03 16:52:37.921: W/System.err(4780):     at com.abhishekbietcs.locomap.Mapme$Background.doInBackground(Mapme.java:258)
03-03 16:52:37.921: W/System.err(4780):     at com.abhishekbietcs.locomap.Mapme$Background.doInBackground(Mapme.java:1)
03-03 16:52:37.921: W/System.err(4780):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-03 16:52:37.921: W/System.err(4780):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
03-03 16:52:37.921: W/System.err(4780):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
03-03 16:52:37.921: W/System.err(4780):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-03 16:52:37.921: W/System.err(4780):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-03 16:52:37.921: W/System.err(4780):     at java.lang.Thread.run(Thread.java:1019) 
```

为什么会抛出这个异常？我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:59:47.990

> java.net.SocketException：没有到主机的路由。

当没有路由连接到主机时会发生此异常。

我在这里发现了你的问题。

**key = "&key=我的钥匙";**

将此替换为

```
String APIKEY="AIzaSyDcLMS0IKQL3N76rO-aD2thfO46r96OCQI";
key = "&key=" + APIKEY; 
```

你做了错误的链接。

你的链接：

[https://maps.googleapis.com/maps/api/place/nearbysearch/output?jsonlocation=25.4509294,78.630043&radius=15000&types=food&key=key&sensor=false](https://maps.googleapis.com/maps/api/place/nearbysearch/output?jsonlocation=25.4509294,78.630043&radius=15000&types=food&key=key&sensor=false)

链接必须像：

```
String url = https://maps.googleapis.com/maps/api/place/search/json?location=25.4509294,78.630043&radius=15000&types=food&key=AIzaSyDcLMS0IKQL3N76rO-aD2thfO46r96OCQI&sensor=false 
```

要获取 JSON，您可以使用我的代码。

```
String data = getUrlContents(url); //Calling method 
```

方法的定义。

```
private String getUrlContents(String Url) 
{
    StringBuilder content = new StringBuilder();
    try {
        URL url = new URL(Url);
        URLConnection urlConnection = url.openConnection();
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()), 8);
        String line;
        while ((line = bufferedReader.readLine()) != null) 
        {
            content.append(line + "\n");
        }
        bufferedReader.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    return content.toString();
} 
```

# php - 使用两个表在一个屏幕上显示 SQL 数据

> ID：15185388
> 
> 赞同：0
> 
> 时间：2013-03-03T11:57:09.713
> 
> 标签：php

我仍在努力在一个屏幕上显示来自两个不同表的数据。这些表都包含一个通用字段名称，我想要的只是过滤该字段名称，并能够根据它们共享的该字段名称更改和显示该行或多行的详细信息。

这两个表是：

成员和接受者

在成员中它有一个主键 member_id 并且它是唯一的。然后在收件人中，我创建了一个 member_id 字段，该字段也需要链接到成员表唯一的 member_id。

以下代码从成员表中调用信息

```
<?php
$con = mysql_connect("localhost", "****", "****");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("stingin_epanic", $con);

$result = mysql_query("SELECT * FROM members WHERE member_msisdn='$slusername'");
echo "<table border='1'>
    <tr>
    <th>Membership</th>
    <th>Number</th>
    <th>Registration Date</th>
    <th>End Date</th>
    <th>Copy of ID</th>
    </tr>";
while ($row = mysql_fetch_array($result)) {
    echo "<td><center>" . $row['member_id'] . "</td>";
    echo "<td><font color=blue>" . $row['member_msisdn'] . "</td>";
    echo "<td><center>" . $row['asdate'] . "</td>";
    echo "<td><center>" . $row['aedate'] . "</td>";
    echo "<td><center>" . $row['attid'] . "</td>";
    echo "</tr>";
}

echo "</table>";

mysql_close($con);
?> 
```

这很好用，给了我我需要的东西。我在这里也调用 member_id 来显示主键。

在同一页面上，我尝试使用以下代码从另一个表中调用与成员相关的信息。请注意，信息应该链接到第一个代码的member_id

```
<?php
$con = mysql_connect("localhost", "****", "****");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("stingin_epanic", $con);

$result = mysql_query("SELECT * FROM members a INNER JOIN recipients b ON member_id = member_id WHERE member_msisdn=$slusername");
echo "<table border='1'>
    <tr>
    <th>Name</th>
    <th>Number</th>
    </tr>";

while ($row = mysql_fetch_array($result)) {
    echo "<td><font color=blue>" . $row['recipient_name'] . "</td>";
    echo "<td>" . $row['recipient_msisdn'] . "</td>";
    echo "</tr>";

    echo "<td><font color=blue>" . $row['recipient_name'] . "</td>";
    echo "<td>" . $row['recipient_msisdn'] . "</td>";
    echo "</tr>";
}

echo "</table>";

mysql_close($con);
?> 
```

使用第二个代码我没有得到任何结果，因为它没有调用任何信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:04:52.053

1.  使用 mysqli 代替 mysql 函数
2.  在您的 SQL 查询中使用别名。

改变这个

```
"SELECT * FROM members a INNER JOIN recipients b ON member_id = member_id WHERE member_msisdn=$slusername" 
```

在这

```
"SELECT * FROM members a INNER JOIN recipients b ON a.member_id = b.member_id WHERE member_msisdn=$slusername" 
```

也许这会有所帮助。

# java - android中带有图像和文本的ListView

> ID：15185390
> 
> 赞同：0
> 
> 时间：2013-03-03T11:57:17.123
> 
> 标签：java, android

我正在尝试在android的每个条目中实现一个带有图像和文本的列表视图

但是我收到一条消息：“您的应用程序必须停止...”

这是我的主要活动：

```
package com.example.temp;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity
{

 EditText edittext;
 ListView listview;

 String[] text = { "One", "Two", "Three", "Four", "Five", "Six", "Seven",
   "Eight", "Nine", "Ten" };

 int[] image = { R.drawable.logo, R.drawable.logo, R.drawable.logo,
   R.drawable.logo, R.drawable.logo, R.drawable.logo, R.drawable.logo,
   R.drawable.logo, R.drawable.logo, R.drawable.logo };

 int textlength = 0;

 ArrayList<String> text_sort = new ArrayList<String>();
 ArrayList<Integer> image_sort = new ArrayList<Integer>();

 public void onCreate(Bundle savedInstanceState)
 {

  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

  listview = (ListView) findViewById(R.id.ListView01);
  listview.setAdapter(new MyCustomAdapter(text, image));

  edittext.addTextChangedListener(new TextWatcher()
  {

   public void afterTextChanged(Editable s)
   {

   }

   public void beforeTextChanged(CharSequence s, int start,
    int count, int after)
   {

   }

   public void onTextChanged(CharSequence s, int start,
    int before, int count)
   {

    textlength = edittext.getText().length();
    text_sort.clear();
    image_sort.clear();

    for (int i = 0; i < text.length; i++)
    {
     if (textlength <= text[i].length())
     {
      if (edittext.getText().toString().
   equalsIgnoreCase((String) text[i].subSequence(0, textlength)))
      {
       text_sort.add(text[i]);
       image_sort.add(image[i]);
      }
     }
    }

    listview.setAdapter(new MyCustomAdapter
     (text_sort, image_sort));

   }
  });
 }

 class MyCustomAdapter extends BaseAdapter
 {

  String[] data_text;
  int[] data_image;

  MyCustomAdapter()
  {

  }

  MyCustomAdapter(String[] text, int[] image)
  {
   data_text = text;
   data_image = image;
  }

  MyCustomAdapter(ArrayList<String> text, ArrayList<Integer> image)
  { 

   data_text = new String[text.size()];
   data_image = new int[image.size()];

   for(int i=0;i<text.size();i++)
   {
    data_text[i] = text.get(i);
    data_image[i] = image.get(i);
   }

  }

  public int getCount()
  {
   return data_text.length;
  }

  public String getItem(int position)
  {
   return null;
  }

  public long getItemId(int position)
  {
   return position;
  }

  public View getView(int position, View convertView, ViewGroup parent)
  {

   LayoutInflater inflater = getLayoutInflater();
   View row;

   row = inflater.inflate(R.layout.listview, parent, false);

   TextView textview = (TextView) row.findViewById(R.id.TextView01);
   ImageView imageview = (ImageView) row
     .findViewById(R.id.ImageView01);

   textview.setText(data_text[position]);
   imageview.setImageResource(data_image[position]);

   return (row);

  }
 }

} 
```

这是我的 listview.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relative"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/ImageView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:src="@drawable/logo" />

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/ImageView01"
            android:layout_centerHorizontal="true"
            android:singleLine="true"
            android:text="Israel News"
            android:textSize="18sp"
            android:textStyle="bold" />

    </RelativeLayout> 
```

这里是我的activity_main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
                android:layout_height="fill_parent">

                <EditText android:id="@+id/EditText01"
                             android:layout_height="wrap_content"
                                android:layout_width="fill_parent"
                                  android:hint="Search">                               
                </EditText>

                <ListView android:id="@+id/ListView01"
                                android:layout_height="wrap_content"
                                android:layout_width="fill_parent">
                 </ListView>

</LinearLayout> 
```

这是logcat：

```
03-03 11:47:02.053: E/AndroidRuntime(770): FATAL EXCEPTION: main
03-03 11:47:02.053: E/AndroidRuntime(770): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.temp/com.example.temp.MainActivity}: java.lang.NullPointerException
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.os.Looper.loop(Looper.java:137)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-03 11:47:02.053: E/AndroidRuntime(770):  at java.lang.reflect.Method.invokeNative(Native Method)
03-03 11:47:02.053: E/AndroidRuntime(770):  at java.lang.reflect.Method.invoke(Method.java:511)
03-03 11:47:02.053: E/AndroidRuntime(770):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-03 11:47:02.053: E/AndroidRuntime(770):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-03 11:47:02.053: E/AndroidRuntime(770):  at dalvik.system.NativeStart.main(Native Method)
03-03 11:47:02.053: E/AndroidRuntime(770): Caused by: java.lang.NullPointerException
03-03 11:47:02.053: E/AndroidRuntime(770):  at com.example.temp.MainActivity.onCreate(MainActivity.java:45)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.app.Activity.performCreate(Activity.java:5104)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-03 11:47:02.053: E/AndroidRuntime(770):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-03 11:47:02.053: E/AndroidRuntime(770):  ... 11 more 
```

我真的不知道是什么问题。。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:05:16.937

您的 edittext 为空，因为您没有得到 Edit 文本，

像这样获取 EditText 在将 TextChangedListener 添加到您的edittext之前添加此行

```
editext=(EditText)findViewById(R.id.EditText01); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T12:05:53.370

您在 MainActivity 的第 45 行使用未初始化的属性 edittext。在第 45 行之前添加此行：

```
edittext = (EditText) findViewById(R.id.EditText01); 
```

性能提示：检查 ViewHolder 模式以使您的列表滚动更顺畅：[http ://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:20:24.980

您未初始化的编辑文本。默认情况下，在 java 中，如果您声明任何变量，并且如果您没有初始化任何东西，它将具有一些预定义的值。默认情况下，在 java 中，如果您不分配任何对象，它将具有空值。如果你想使用该对象来调用函数/访问它的数据成员，它会抛出 NULLPOINTER EXCEPTION。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T12:08:27.730

您已将 edittext 声明为 EditText 但尚未对其进行初始化。当您尝试对其执行 addWatcher 时，您实际上是在 null 上执行它。试试这个：

```
edittext = new EditText(this); 
```

或者

```
edittext = (EditText) findByViewId(R.id.EditText01); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-03T12:02:39.523

你得到一个空点异常。尝试调试它并检查第 45 行或空指针的位置。

# c++ - g++ 和 VS2012 中的正则表达式

> ID：15185397
> 
> 赞同：1
> 
> 时间：2013-03-03T11:58:11.763
> 
> 标签：c++, regex, visual-studio-2012, g++

```
#include <iostream>
#include <string>
#include <regex>

using namespace std;

void Test(const char* str, const char* regExpression)
{
    regex rx(regExpression);
    bool match = regex_match(str, rx);
    bool search = regex_search(str, rx);

    cout << "String: " << str << "  expression: " << regExpression <<
        "   match: " << (match ? "yes" : "no ") <<
        "   search: " << (search ? "yes" : "no ")  << endl;
}

int main()
{
    Test("a", "a");
    Test("a", "abc");
    return 0;
} 
```

在 g++ 中的结果：

```
String: a  expression: a   match: yes   search: no 
String: a  expression: abc   match: no    search: no 
```

VS2012 中的结果：

```
String: a  expression: a   match: yes   search: yes
String: a  expression: abc   match: no    search: no 
```

什么是正确的结果？另外，regex_match 和 regex_search 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:05:30.390

VS2012的结果是对的。`_match`检查您的字符串是否与表达式匹配，`_search`检查您的字符串的某些子字符串是否与表达式匹配。

也不匹配表达式`"a"`的任何子字符串。`"a"``"abc"`

（我找不到相关的 SO 问题，但已知 gcc 的（而不是 libstdc++ 的）正则表达式实现是错误且不完整的。）

# magento - 使用 XML 连接表并在 Magento Grid 中显示数据

> ID：15185398
> 
> 赞同：0
> 
> 时间：2013-03-03T11:58:18.043
> 
> 标签：magento

我正在尝试通过添加列来显示数据来自定义 Magento 销售/订单/网格

Customer_Id Billing_Address Shipping_Address

我在之前的帖子之后创建了一个模块

我现在正在尝试加入这些表，但无法弄清楚如何使用 XML 来做到这一点。

```
<gridcontrol>
    <grids>
        <sales_order_grid>
            <!-- remove order id -->
            <shipping_address>
                <add>
                    <header>Shipping Address</header>
                    <!-- join shipping address from sales/order table -->
                    <join table="sales_flat_order_address" condition="sales_flat_order_address.entity_id={{table}}.street" field="street"/>
                </add>
                <after>status</after>
            </shipping_address>
            <billing_address>
                <add>
                    <header>Billing Address</header>
                    <!-- join shipping address from sales/order table -->
                    <join table="sales_flat_order_address" condition="sales_flat_order_address.entity_id={{table}}.street" field="street"/>
                </add>
                <after>status</after>
            </billing_address>
            <customer_id>
                <add>
                    <header>Customer Id</header>
                    <!-- join shipping address from sales/order table -->
                    <join table="sales_flat_order" condition="main_table.cutomer_id={{table}}.customer_id" field="customer_id"/>
                </add>
                <after>status</after>
            </customer_id>            
        </sales_order_grid>
    </grids>
</gridcontrol> 
```

我的网格中显示了新的列，但是有空的，所以我知道我做错了，我认为这很简单。如果有人能告诉我如何使用这种方法加入正确的表格，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T10:24:53.270

你为什么不尝试做，_prepareCollection()

```
$collection->getSelect()->columns(array('filename' => new Zend_Db_Expr ("(SELECT 
filename FROM table_name WHERE customer_id =e.entity_id)")));
        $this->setCollection($collection); 
```

# php - jquery标记它发送内容

> ID：15185402
> 
> 赞同：-1
> 
> 时间：2013-03-03T11:58:34.490
> 
> 标签：php, jquery, sql, tags

我试试这个 jquery 标签[http://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)

我的代码：

```
<ul id="myTags"></ul> 
<textarea id="tagsend" style="display:none" rows="30" cols="30" name="tags"></textarea> 
```

并提交 btn：

```
<input name="invia" type="submit" class="sendnewsbtn" value="Invia" onclick="document.getElementById('tagsend').innerHTML = getElementById('myTags').innerHTML";> 
```

在 submit.php 上：

```
$taginput = $_POST["tags"];
 $tagarray = explode(",",$taginput);
    for($i=0;$i<count($tagarray);$i++){
         $usetag = mysql_real_escape_string(stripslashes(ltrim(rtrim($tagarray[$i]))));
         if($usetag == "") continue;
                 $querytag = "INSERT INTO tags (link_id,tag) VALUES ('$rowid','$usetag')";
                      mysql_query($querytag);
                } 
```

mysql表上记录的结果是：`<li class="tagit-choice ui-widget-content ui-state`

而不是发送的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:03:43.723

您在这里有无效的标记：

```
<input name="invia" type="submit" class="sendnewsbtn" value="Invia"
       onclick="document.getElementById('tagsend').innerHTML =
       getElementById('myTags').innerHTML";>
   // ^--missing document here------------^----';' outside here 
```

试试这个：

```
 <input name="invia" type="submit" class="sendnewsbtn" value="Invia"
       onclick="document.getElementById('tagsend').innerHTML =
       document.getElementById('myTags').innerHTML;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:15:22.783

如果你使用 jQuery 你可以改变这个

```
<input name="invia" type="submit" class="sendnewsbtn" value="Invia" 
    onclick="document.getElementById('tagsend').innerHTML = getElementById('myTags').innerHTML";> 
```

在这

```
<input name="invia" type="submit" class="sendnewsbtn" value="Invia"
    onclick="$('textarea#tagsend').html($('#myTags').html())"> 
```

# c# - Html Agility Pack SelectSingleNode 在迭代中总是给出相同的结果？

> ID：15185404
> 
> 赞同：18
> 
> 时间：2013-03-03T11:58:46.753
> 
> 标签：c#, html, html-agility-pack, selectsinglenode

我想要集合中的节点，但是通过迭代 SelectSingleNode 我不断得到相同的对象，只是 node.Id 正在改变......我尝试的是读出给定站点的 webresponse 并捕获一些信息，如值、链接......特殊定义的元素。

```
int offSet = 0;
string address = "http://www.testsite.de/ergebnisliste.html?offset=" + offSet;

HtmlWeb web = new HtmlWeb();
//web.OverrideEncoding = Encoding.UTF8;
HtmlDocument doc = web.Load(address);

HtmlNodeCollection collection = doc.DocumentNode.SelectNodes("//div[@itemtype='http://schema.org/Posting']");

foreach (HtmlNode node in collection) {
    string id = HttpUtility.HtmlDecode(node.Id);
    string cpname = HttpUtility.HtmlDecode(node.SelectSingleNode("//span[@itemprop='name']").InnerText);
    string cptitle = HttpUtility.HtmlDecode(node.SelectSingleNode("//span[@itemprop='title']").InnerText);
    string cpaddress = HttpUtility.HtmlDecode(node.SelectSingleNode("//span[@itemprop='addressLocality']").InnerText);
    string date = HttpUtility.HtmlDecode(node.SelectSingleNode("//div[@itemprop='datePosted']").InnerText);
    string link = "http://www.testsite.de" + HttpUtility.HtmlDecode(node.SelectSingleNode("//div[@class='h3 title']//a[@href]").GetAttributeValue("href", "default"));               
} 
```

这是例如 1 次迭代：

```
<div id="66666" itemtype="http://schema.org/Posting">   
<div>
    <a>
        <img />
    </a>
</div>
<div>
    <div class="h3 title">
        <a href="/test.html"  title="Test">
            <span itemprop="title">Test</span>
        </a>
    </div>
    <div>
        <span itemprop="name">TestName</span>       
    </div>
</div>
<div>
    <div>
        <div>
            <div>
                <span itemprop="address">Test</span>
            </div>
            <span>                     
                <a>
                    <span><!-- --></span>
                    <span></span>
                </a>
            </span>         
        </div>
    </div>      
    <div itemprop="date">
        <time datetime="2013-03-01">01.03.13</time>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-03T12:43:44.907

通过写作

`node.SelectSingleNode("//span[@itemprop='name']").InnerText`

就像你在写

`doc.DocumentNode.SelectSingleNode("//span[@itemprop='name']").InnerText`

要做你想做的事，你应该这样写：`node.SelectSingleNode(".//span[@itemprop='name']").InnerText`.

这个`.`点/句号告诉在当前节点上进行搜索，`node`而不是在`doc`

# netlogo - Netlogo 代理错误

> ID：15185405
> 
> 赞同：1
> 
> 时间：2013-03-03T11:59:10.587
> 
> 标签：netlogo

我正在实施一个演讲厅的疏散模拟。我有两种类型的学生坐在桌子上和额外的学生在课堂内随机分配。所以我创建了**两个滑块**以便将学生分配到所需的数量。滑块被命名为**extrastudents**和**standarstudents**。当模拟开始时，我希望所有学生（包括桌子和临时学生）都去最近的出口（我有两个出口）。所以我只为坐下的学生实施了这个：

```
ask standarstudents  [
ifelse pycor > 0
[ set target one-of nexits]
[ set target one-of sexits]
face target
] 
```

Nexits 是北出口。Sexits是南出口。

问题是我得到了这个错误，我可以继续：

ASK 期望输入是一个代理或代理集，但得到了数字 3。观察者运行 ASK 时出错。（数字 3 来自用户选择的滑块）由按钮“设置”调用的过程 SETUP 调用

org.nlogo.nvm.ArgumentTypeException：ASK 预期输入是代理或代理集，但得到了数字 3。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:57:00.653

好吧，如果您有名为和的*滑块*，那么这两个变量是代表您想要的每种学生数量的*数值，***而不是**学生本身。就像错误消息说的那样，原语与代表“你在*问谁”的代理集一起工作。*`extrastudents``standarstudents`***`ask`***

 ****你真的创造了你的学生吗？将滑块放在界面上本身不会做任何事情。我建议将您的滑块重命名为类似的名称`num-extrastudents`，`num-standarstudents`然后使用这样的代码来初始化您的人口：

```
breed [ extrastudents extrastudent ]
breed [ standarstudents standarstudent ]

to setup
  create-standarstudents num-standarstudents
  create-extrastudents num-extrastudents
end 
```

然后，您发布的代码将起作用，因为`extrastudents`并且`standarstudents`将是海龟的*品种*，因此是代理集。****

# excel - 刷新后如何保持网页导入数据的新结构？

> ID：15185413
> 
> 赞同：0
> 
> 时间：2013-03-03T11:59:54.763
> 
> 标签：excel, web

我正在创建一个 Excel 数据库。我想从公司网站导入公司所有员工的姓名、电子邮件和职位。我选择 Data->From Web 并选择整个页面，因为这是唯一的可能性。

该页面没有显示包含数据的表格；只是一长串员工的照片，旁边有姓名、电子邮件和工作职位

我将数据导入我的 Excel 电子表格：格式非常糟糕。所以我开始剪切和粘贴，为“名称”创建一个列，一个为“电子邮件”，同样为“工作职位”。所有其他信息都被手动取消。

我想刷新保持这种新格式的数据。不幸的是，每次我使用“全部刷新”按钮刷新导入的数据时，它们都会返回到原始格式。

刷新后如何保持我的网络导入数据的新格式？

我感谢大家的支持！

氪，一

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:51:33.743

我已经整理了一个示例，该示例将从您指定的页面中提取名称和标题，并将它们放入工作表 1。

代码只有在底层 html 的布局保持不变的情况下才能工作。它不支持更新现有列表（在再次阅读列表之前删除了工作表 1 上的任何内容）

要使用此代码，您必须将其放置在新的代码模块（而不是工作表或工作簿部分）中，您可以从代码编辑器或通过 Excel 主窗口中的宏菜单运行它。

```
' Note: This code requires the following references to be loaded.
' Microsoft HTML Object Library (mshtml.tlb)
' Microsoft Internet Controls (ieframe.dll)
' To add a reference
' In the VBA Code Editor, in the Tools Menu click the References item
' Scroll through the list and ensure that the references are selected
' Press OK and your done.

Sub Scrape()
Dim Browser As InternetExplorer
Dim Document As HTMLDocument
Dim Element As IHTMLElement
Dim Elements As IHTMLElementCollection
Dim empName As String
Dim empTitle As String

Dim Sheet As Worksheet

    Set Sheet = ThisWorkbook.ActiveSheet

    Sheet.UsedRange.ClearContents ' Nuke the old list

    Set Browser = New InternetExplorer

    Browser.navigate "http://www.hsbc.com/about-hsbc/leadership"

    Do While Browser.Busy And Not Browser.readyState = READYSTATE_COMPLETE
        DoEvents
    Loop

    Set Document = Browser.Document

    Set Elements = Document.getElementsByClassName("profile-col1")

    For Each Element In Elements
        empName = Trim(Element.Children(1).Children(0).innerText)
        empTitle = Trim(Element.Children(1).Children(1).innerText)
        Sheet.Range("A1:B1").Insert xlShiftDown
        Sheet.Cells(1, 1).Value = empName
        Sheet.Cells(1, 2).Value = empTitle
        'Debug.Print "[  name] " & empName
        'Debug.Print "[ title] " & empTitle
    Next Element

    Set Browser = Nothing
    Set Elements = Nothing

End Sub 
```

# java - 从特定文件夹动态加载类

> ID：15185415
> 
> 赞同：-2
> 
> 时间：2013-03-03T12:00:03.990
> 
> 标签：java, jakarta-ee

我有一个要求，我必须根据输入动态加载 java 程序。所有 java 类文件都放在文件夹中：C://Users/me/workspace/File/bin/Encrypt/。该文件夹中有3个类文件：Class1.class、Class2.class、Class3.class

为了在运行时获取它们，我使用以下代码：

```
 package First;

  import java.io.File;
  import java.net.MalformedURLException;
  import java.net.URL;
  import java.net.URLClassLoader;

  public class Main 
  {

public static void main(String[] args) {

            // Say Class.class is the input file to be picked up.
    String abc = "Class1.class";    

   try { 
  File file = new File("C:\\Users\\me\\workspace\\File\\bin\\Encrypt"); 

    //convert the file to URL format
    URL url = file.toURI().toURL(); 
    URL[] urls = new URL[]{url}; 

       //load this folder into Class loader
    ClassLoader cl = new URLClassLoader(urls); 
    Class  cls = cl.loadClass(abc);

    System.out.println("cls.getName() = " + cls.getName());

    cls.encrypt();              

            } 
        catch ( ClassNotFoundException | MalformedURLException e) {
            e.printStackTrace();
            }
}
   } 
```

我在这里面临以下问题：

1.  上面的代码显示错误：.NoClassDefFoundError: Class1?? 在路径中使用了所有类型的 - / ,\ ,//,\。
2.  我如何在 Class1 文件中调用方法 sum() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:14:55.537

因为你拥有`...\bin\Encrypt`的是你的课程所在的文件夹，我敢打赌你的课程的包是`Encrypt`. 在这种情况下`abc`应该是

```
String abc = "Enrcypt.Class1"; 
```

如果这些类在默认包中，这意味着它们没有包声明而不是使用

```
String abc = "Class1"; 
```

另请注意，类名称中不需要扩展`.class`名。

要调用以这种方式加载的类的方法，您应该参考[java refelction api](http://docs.oracle.com/javase/tutorial/reflect/index.html)。

首先使用[getMethod从](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)[Class中获取](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)[Method](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html)对象 `cl`

而不是使用该方法对象的方法[调用](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)来调用该函数。如果要调用的方法不是静态的，则需要提供动态加载的类的实例，如果它是静态的，则只需传递 null。

# c - 对 malloc 和 free 行为感到困惑

> ID：15185416
> 
> 赞同：5
> 
> 时间：2013-03-03T12:00:23.233
> 
> 标签：c, malloc, free

我对`free()`C 中关于数据结构的用法感到困惑。

如果我有以下数据结构：

```
struct Person {
    char *name;
    int age;
    float weight;
    float height;
}; 
```

我通过 为结构分配内存`malloc()`，同样：`struct Person *me = malloc(sizeof(struct Person));`

在我完成使用我的结构之后（就在结束程序之前），我继续释放分配的内存，如下所示：

```
free(person_pointer->name);
free(person_pointer); 
```

据我所知，释放`name`指针指向的内存是必要的，因为如果我只释放`person_pointer` *我只释放分配用于存储数据结构及其成员* **的内存，而不释放结构的指针成员指向的内存.**

然而，在我的实现中， [valgrind](http://valgrind.org/)似乎表明第一个`free()`是无效的。

所以我的问题归结为：**当我通过指针释放结构占用的内存时，我是否应该抢先释放成员指针指向的内存？**

编辑：这是我的整个代码：

```
#include <stdio.h>
#include <stdlib.h>

struct Person {
    char *name;
    int age;
    float weight;
    float height;
};

int main(int argc, char **argv)
{
    struct Person *me = malloc(sizeof(struct Person));
    me->name = "Fotis";
    me->age = 20;
    me->height = 1.75;
    me->weight = 75;

    printf("My name is %s and I am %d years old.\n", me->name, me->age);
    printf("I am %f meters tall and I weight %f kgs\n", me->height, me->weight);

    free(me->name);
    free(me);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T12:09:19.040

```
me->name = "Fotis";

/* ... */

free(me->name); 
```

规则是：

```
1 malloc = 1 free 
```

你没有使用`malloc`on `me->name`，所以你不必使用`free`它。

顺便说一句，`me->name`应该是`const char *`类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:09:35.257

当你这样做

```
 me->name = "Fotis"; 
```

该`name`指针不是由 malloc 分配的，它指向一个堆栈变量，该变量在编译时存储在二进制文件的字符串表中，因此您无法释放它。

经验法则是：只释放你分配的东西。

但是，您无法更新此只读字符串。

如果你做了类似的事情：

```
me->name = strdup("Fotis"); 
```

由于 strdup 执行 malloc（参见手册），因此您必须释放它，并且可以在创建字符串后更新它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:10:22.813

Yes you have to free all the memory of pointers inside the structure if you allocated them.

Also make sure you free the members before you free the structure.

A simple way to remember is free them in the reverse order in which you have allocated.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T12:14:24.653

The problem is that you didn't actually malloc'ed the char * name inside your structure.

```
struct Person *me = malloc(sizeof(struct Person));
me->name = strdup("Fotis");
...
free(me->name);
free(me);
return (0); 
```

When you write this

```
me->name = "Fotis"; 
```

You don't actually malloc, the pointer name points to a stack variable of type `const char *`, wich is not malloc'ed.

# php - 安装 Joomla 的问题

> ID：15185419
> 
> 赞同：0
> 
> 时间：2013-03-03T12:00:29.463
> 
> 标签：php, joomla

在尝试运行 joomla 网站时，我给出了以下严格标准错误的长列表（该列表长约一百行：

```
Strict Standards: Non-static method JLoader::import() should not be called statically in C:\xampp\htdocs\website\libraries\joomla\import.php on line 29 
```

在 php.ini 中，error_reporting 设置为 E_ALL & ~E_NOTICE，这没有帮助。

Joomla 版本非常过时 - 1.5.18 和 php 版本是 5.4.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:26:29.833

Joomla 1.5 支持 PHP 4，它会在 php 5.3+ 中出现大量严格的错误。如上所述，您可以简单地更改错误报告级别以不显示它们，您可以将 php 的一两个版本返回到 5.2.x，或者您可以迁移到当前支持的 Joomla 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:14:40.780

在 Joomla 的 configuration.php 文件中，将 $error_reporting 值更改为 6135。

如果这没有帮助，您可以将这些行添加到您的 .htaccess 文件中：

```
php_flag display_startup_errors off
php_flag display_errors off
php_flag html_errors off
php_value docref_root 0
php_value docref_ext 0 
```

但我不推荐这种方法，因为它完全隐藏了错误

# delphi - 在 SuperObject 中使用 Result arg

> ID：15185421
> 
> 赞同：2
> 
> 时间：2013-03-03T12:00:41.957
> 
> 标签：delphi, superobject

我在我的一个项目中使用这个超级对象单元作为 rpc 协议，在一个远程调用过程中（签名有一个 var Result arg）我想知道如何使用那个 arg...

没有文档吗？谢谢。

```
program test_rpc;

{$IFDEF FPC}
  {$MODE OBJFPC}{$H+}
{$ELSE}
  {$APPTYPE CONSOLE}
{$ENDIF}

uses
  SysUtils, superobject;

procedure controler_method1(const This, Params: ISuperObject; var Result: ISuperObject);
var
  i: Integer;
begin
  write('action called with params ');
  writeln(Params.AsString);

  try
    // How do i use Result arg to return a value ? as if it were a function returning string
    Result
  except
    exit;
  end;
end;

var
  s: ISuperObject;
begin
  s := TSuperObject.Create;
  s.M['controler.action1'] := @controler_method1;
  try
    s['controler.action1("HHAHAH")'];
  finally
    s := nil;
    writeln('Press enter ...');
    readln;
  end;
end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:47:37.450

`controler_method1`调用时，`var`参数`Result`为`nil`。要将某些内容返回给调用者，您需要分配给`Result`.

```
Result := TSuperObject.Create; 
```

那是一个空的超级对象。您现在可以以正常方式使用您喜欢的任何值填充它。

这是一个简单的演示：

```
program test_rpc;

{$IFDEF FPC}
  {$MODE OBJFPC}{$H+}
{$ELSE}
  {$APPTYPE CONSOLE}
{$ENDIF}

uses
  SysUtils,
  superobject in 'superobject.pas';

procedure controler_method1(const This, Params: ISuperObject;
    var Result: ISuperObject);
begin
  Result := TSuperObject.Create('Foo');
end;

var
  s: ISuperObject;
begin
  s := TSuperObject.Create;
  s.M['controler.action1'] := controler_method1;
  Writeln(s['controler.action1("HHAHAH")'].AsString);
  Readln;
end. 
```

# mysql - wpdb更新查询不起作用

> ID：15185425
> 
> 赞同：5
> 
> 时间：2013-03-03T12:00:57.090
> 
> 标签：mysql, sql-update, wordpress

我制作了一个电子邮件脚本，一旦 wp_mail 有结果就应该更新。由于某种原因，我的价值不会更新。我错过了什么吗？我正在接收邮件，所以 wp_mail 可以工作。

干杯!

```
$email_result = wp_mail( $to, $subject, $message, $headers );

if( $email_result ){//wp_mail() processed the request successfully
    global $wpdb;
    $table_name = $wpdb->prefix . "wpsc_coupon_codes";
    $coupon_id = $ereminder->ID;

$ereminders = $wpdb->query( $wpdb->prepare("
    UPDATE *
    FROM $table_name
    SET reminder = 1
    WHERE ID = $coupon_id
") );

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-17T09:33:39.767

尝试这个：

```
$wpdb->update( $table_name, array( 'reminder' => 1),array('ID'=>$coupon_id)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T12:02:11.323

尝试这个

```
UPDATE  $table_name
SET reminer = 1
WHERE ID = $coupon_id 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T12:48:30.473

您可以更改而不是 (UPDATE * FROM)

```
$ereminders = $wpdb->query($wpdb->prepare("UPDATE $table_name SET reminer='1' WHERE ID=$coupon_id")); 
```

并且不使用休息。

谢谢你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-09T08:46:16.777

我们可以`$wpdb->update`像这样使用：

```
 global $wpdb;
 $table_name = $wpdb->prefix.'your_table_name';
 $data_update = array('row_name_1' => $row_data_1 ,'row_name_2' => $row_data_2);
 $data_where = array('row_name' => $row_data);
 $wpdb->update($table_name , $data_update, $data_where); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-28T11:23:37.320

我的工作示例：

```
$result = $wpdb->update(
    $wpdb->prefix .'sae_calendar', 
    array( 
        'year' => $year,
        'quarter' => $quarter,
        'start_date' => $start_date,
        'end_date' => $end_date,
        'reservation_start_date' => $reservation_start_date,
        'reservation_end_date' => $reservation_end_date 
    ), 
    array(
        "id" => $id
    ) 
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-10T01:52:47.020

```
UPDATE $table_name
SET reminder = 1
WHERE ID = $coupon_id 
```

另外，改变：

```
$coupon_id = $ereminder->ID; 
```

至

```
$coupon_id = $ereminder->id; 
```

资料来源：[使用 $wpdb 更新查询 - Wordpress 教程](http://www.syntaxxx.com/using-wpdb-and-the-wordpress-database-functions/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-30T08:13:08.720

```
<?php 
  global $wpdb;
    if(isset($_POST['progress'])){
    $table=t_test;
    $data=array('client_development'=>$_POST['Progress']);
    $where=array('p_id'=>$_SESSION['id']);
    $format=("%d");
    $whereFormat=("%d");
    $result4=$wpdb->UPDATE($table,$data,$where,$format,$whereFormat);
  }
?>
<form method="post">
  <input type="text" name="Progress">
  <input type="submit" name="progress" value="Prog%">
</form>
<?php 
if(isset($_POST['progress'])){
$table=t_test;
    $data=array('client_development'=>$_POST['Progress']);
    $where=array('p_id'=>$_SESSION['id']);
    $format=("%d");
    $whereFormat=("%d");
    $result4=$wpdb->UPDATE($table,$data,$where,$format,$whereFormat);
}
?>
<form method="post">
  <input type="text" name="Progress">
  <input type="submit" name="progress" value="Prog%">
</form> 
```

# nginx - 多行配置的 nginx/haproxy 性能

> ID：15185426
> 
> 赞同：0
> 
> 时间：2013-03-03T12:01:14.827
> 
> 标签：nginx, haproxy

我正计划构建一个可以以编程方式设置子服务器并使用 nginx/ha 将它们沙箱化的环境。首先，我会确保`*.example.com`指向 nginx/ha。然后，例如，我会将 app 设置`x`为仅提供服务`x.example.com`，然后允许 app`x`与 app 的特定方法对话`y`，我将添加以下配置：

```
server { 
    server_name x.example.com;

    location /y/allowed/method/ {
        proxy_pass y.example.com;
    }
} 
```

（以及相应的 haproxy 配置，如果我要使用 ha）

我的问题是，我可以在给定的 nginx 或 haproxy 实例中包含多少这样的服务器和位置，同时仍保持高性能？我知道我可以将访问限制上移一层到应用程序本身，尽管我更喜欢在网络层

编辑：答案在下面的评论中。本质上，如果配置可以放入 RAM，则性能不会受到影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:50:51.523

您应该生成具有许多服务器块（每个域一个）的 nginx 配置，如下所示：

```
server { 
    server_name x.example.com;

    location /y/allowed/method/ {
        proxy_pass y;
    }
} 
```

参考：

*   [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)
*   [http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)

# c# - $.ajax 调用后恢复表单提交

> ID：15185431
> 
> 赞同：0
> 
> 时间：2013-03-03T12:02:00.583
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, jquery

jQuery ajax 调用后如何恢复/停止表单提交？我有 MVC 应用程序，我正在调用一个操作`json`，如果结果为假，我想停止表单提交，如果结果为真，我想恢复。

**查询：**

```
 $("#formElem").submit(function (e) {
        e.preventDefault();
        $.ajax({
            url: '@Url.Action("Check", "TimeRanges")',
            type: "GET",
            data: {startRange: $('#SelectedStartTimeRange').val() , endRange: $('#SelectedEndTimeRange').val()},
            aync: false,
            dataType: 'json',
            success: function (data) {
                if(data == false) {
                    $("#rangeexist").html('Error');
                    return false;
                } else {
                    return true;
                }
            }
        });
    }); 
```

**行动**

```
public JsonResult Check(string startRange, string endRange)
{
    var result = false;
    if (!String.IsNullOrEmpty(startRange) && !String.IsNullOrEmpty(endRange))
    {
        TimeSpan spanStart;
        TimeSpan.TryParse(startRange, out spanStart);

        TimeSpan spanEnd;
        TimeSpan.TryParse(endRange, out spanEnd);

        var timeRangExisted = _repo.All().Where(x => x.TimeFrom.Equals(spanStart) && x.TimeTo.Equals(spanEnd)).ToList();
        if (!timeRangExisted.Any())
            result = true;
    }

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:05:11.710

```
var ajaxSent = false;
$("#formElem").submit(function (e) {
    if ( !ajaxSent )
     e.preventDefault();
    $.ajax({
        url: '@Url.Action("Check", "TimeRanges")',
        type: "GET",
        data: {startRange: $('#SelectedStartTimeRange').val() , endRange: $('#SelectedEndTimeRange').val()},
        aync: false,
        dataType: 'json',
        success: function (data) {
            if(data == false) {
                $("#rangeexist").html('Error');
                ajaxSent = true;
                $("#formElem").submit(); // something like that ....
                return false;
            } else {
                return true;
            }
        }
    });
}); 
```

# javascript - 新标签中的魔术链接

> ID：15185433
> 
> 赞同：1
> 
> 时间：2013-03-03T12:02:04.363
> 
> 标签：javascript, jquery, hyperlink, get

我有一个魔术链接* 可以向我的网站添加网址

```
javascript:document.location='http://domain.com/add.php?u='+escape(window.location); 
```

是否可以在新选项卡中添加链接？喜欢 ...

```
javascript:window.open('http://domain.com/add.php?u='+escape(window.location));
// this code opens the magic link in a new tab but the current page shows [object Window] 
```

*只需将以下魔术链接复制到浏览器的地址栏中。如果您想将 URL 发布到 domain.com，请在视频页面的地址栏中单击此链接

提前致谢！

**编辑：**这个视频更好地描述了我的意思
[http://www.youtube.com/watch?v=h39NqC47Oag](http://www.youtube.com/watch?v=h39NqC47Oag)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:26:49.963

您可以使用它来打开一个新窗口-

```
function open_url(){
var URL = 'http://domain.com/add.php?u='+escape(window.location);
window.open(URL,"_blank","toolbar=yes, location=no, directories=no, status=no, 
    menubar=yes, scrollbars=yes, resizable=yes, copyhistory=no, width='624',height='566',
    left=20, top=50'");
} 
```

我没有检查，但您可能会发现一些提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:48:42.000

在谷歌浏览器中，您的展位链接对我来说可以正常工作。然后我在 Firefox 中进行了测试，我进入`[object window]`了原始选项卡，但链接在新选项卡中正确打开。我想您正在使用 IE（我无法测试它，我在 Linux 上），其中可能没有打开第二个选项卡。

问题是它`window.open(...)`返回一个`window`对象，并且浏览器尝试在屏幕中“显示”该对象（就像您执行时一样`alert(window)`）。

**解决方案**：您必须*收集*窗口对象，因此浏览器不会尝试在屏幕上显示它：

```
javascript:var o = window.open('http://google.com?u='+escape(window.location)); 
```

（请注意`var o =`开头的）

# python - Python中的逻辑优先级

> ID：15185437
> 
> 赞同：0
> 
> 时间：2013-03-03T12:02:35.883
> 
> 标签：python, syntax, python-2.7, logical-operators

我有一个关于 python 优先级的问题。我有以下代码：

```
def gcdIter(a, b):
   ans = min(a,b)
   while ((a%ans is not 0) and (b%ans is not 0)):
       ans -= 1
   return ans 
```

我的问题是关于 while 逻辑语句。我添加了几个括号只是为了确保表达式会按照我的想法进行评估，但不是。在两个表达式都为真之前，while 循环被中断。我错了吗？

我找到了一种不使用两个表达式来做同样事情的方法，在：

```
def gcdIter(a, b):
   ans = min(a,b)
   while ((a%ans + b%ans is not 0)) :
       ans -= 1
   return ans 
```

但我仍然想知道为什么第一个代码没有按照我认为的方式运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T12:04:34.937

不要使用身份测试 (`is`或`is not`) 来测试数值相等性。使用`==`或`!=`代替。

```
while a%ans != 0 and b%ans != 0: 
```

`is`测试对象身份（两个运算符是同一个 python 对象），这与测试值是否*相等*不同。

由于`0`也在`False`布尔上下文中考虑，因此在这种情况下您甚至可以省略`!=`：

```
while a % ans and b % ans: 
```

该[`fractions`模块](http://docs.python.org/2/library/fractions.html#fractions.gcd)已经具有`gcd()`正确实现最大公约数算法的功能：

```
from fractions import gcd

print gcd(a, b) 
```

它使用[欧几里得算法](http://en.wikipedia.org/wiki/Euclidean_algorithm)，python 风格：

```
def gcd(a, b):
    """Calculate the Greatest Common Divisor of a and b.

    Unless b==0, the result will have the same sign as b (so that when
    b is divided by it, the result comes out positive).
    """
    while b:
        a, b = b, a%b
    return a 
```

# ios - 适用于 3.5 英寸屏幕尺寸的 iOS 应用程序

> ID：15185440
> 
> 赞同：1
> 
> 时间：2013-03-03T12:03:18.093
> 
> 标签：ios, retina-display, autolayout, iphone-5

我正在为 iPhone 制作一个新应用程序，由于所有图形工作都是为 3.5" 支持完成的，我不想为新的 4" 屏幕更改它。问题是当我在 4" 模拟器中运行它时，它会自动拉伸内容以匹配 4" 大小。我想知道如何强制它像 iPhone 5 上的旧应用程序一样垂直居中应用程序？

我还配置了我的 xib 和视图：

```
Size = Retina 3.5"
Deployment = iOS 5.0
Use Autolayout = Unchecked 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:03:56.620

通过从项目中删除 default-568h@2x.png（参考和文件）。并从模拟器中删除应用程序并执行“清理”然后“构建”它会起作用。但是会出现删除图像的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:21:11.237

这在最新版本的 Xcode 中是不可能的。
创建的每个新应用程序都会自动有一个 default-568h@2x.png 以启用宽屏设备支持。你不能禁用它。

但是可以使用旧版本的 Xcode（大约 4.4）创建一个新项目，它不会生成此图像，因此不会有用于此目标的宽屏设备。

# wordpress - WordPress。在自定义分类时重写 url

> ID：15185441
> 
> 赞同：0
> 
> 时间：2013-03-03T12:03:34.877
> 
> 标签：wordpress, .htaccess, url-rewriting, custom-taxonomy

这是一个wordpress网站。我正在使用一个名为*media tags*的插件。此插件创建一个名为“媒体标签”的自定义分类法来显示已标记的媒体。这些页面的 url 当前是 domain/blog/media-tags/results

我*只想在 media-tags page 上删除**博客*部分。所以我最终得到：

 *domain.com/media-tags/results

但是标准的博客文章、类别和标签仍然保留了 url 的*博客*部分：

domain.com/blog/cat/post-title, domain.com/blog/cat, domain.com/tag/post-tag

请问这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:16:26.827

我假设您只需要 .htaccess 文件的片段。

```
RewriteEngine on

# condition to avoid recursion:
RewriteCond %{REQUEST_FILENAME} !blog
# your rewrite rule:
RewriteRule media-tags blog/media-tags 
```

当服务器收到一个请求时，`domain.com/media-tags/results`它会将目标 URL 重写为`domain.com/blog/media-tags/results`.

我想您还必须配置您的插件以将 URL 指向服务器的根目录。从[`Media Tags`插件主页](http://www.codehooligans.com/projects/wordpress/media-tags/)：

> 您还可以将此“/media-tags/”URL 参数更改为您喜欢的内容，例如“/gallery/”。为此，请登录 wp-admin 并转到“设置”下的“永久链接”页面。在页面底部，您将看到 Media-Tag 的输入字段。只需输入您的偏好并更新页面。*

# actionscript-3 - 如何从动作脚本事件中返回变量？加载 XML 文件

> ID：15185445
> 
> 赞同：0
> 
> 时间：2013-03-03T12:04:03.350
> 
> 标签：actionscript-3, apache-flex

我正在尝试从我的资产文件夹中加载一个 xml 文件。

我写了这个函数：

```
 public static function loadXML(i_fileURL:String):XML // i want to return the actual loaded xml here
    {
        var xml:XML;
        var ldr:URLLoader = new URLLoader();
        var request:URLRequest = new URLRequest(i_fileURL);
         ldr.addEventListener(Event.COMPLETE, onXMLLoad);
         ldr.load(request);
                     //how can i return the loaded xml?
    }

        public static function onXMLLoad(e:Event):void
    {
        var ldr:URLLoader = URLLoader(e.target);
        var myxml:XML = new XML(ldr.data);
        trace(myxml.toXMLString());
                   //how can i return myxml to loadXML function?

    } 
```

有不同的方法可以做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:27:48.173

您可以执行类似 promise 或 future 的操作，在其中返回空 XML，然后在调用返回时使用实际 XML 填充它。由于您使用的是 Flex，因此您可以访问数据绑定，这应该可以让这种方法正常工作。

请注意，您确实不应该为此使用静态方法，并且您的 onXMLLoad 成员没有理由暴露。更新后的代码可能如下所示：

```
包服务{
    公共类 XMLLoader {
        //注意这个变量的存在意味着你需要
        //每次调用时创建一个新的类实例。
        受保护的 var 未来：XML；
        受保护的var _url：字符串；
        公共函数 loadXML(url:String):XML {
            _url = 网址；
            var request:URLRequest = new URLRequest(url);
            var loader:URLLoader = new URLLoader();
            loader.addEventListener(Event.Complete, onLoad);
            loader.addEventListener(IoErrorEvent.IO_Error, onFail);
            loader.addEventListener(SecurityErrorEvent.Security_Error, onFail);
            未来 = ;
            返回未来；
        }
        受保护的函数 onLoad(e:Event):void {
            var loader:URLLoader = e.currentTarget as URLLoader;
            var data:XML = loader.data 作为 XML；
            如果（数据）{
               //你失去了原来的根节点，因为你想要数据
               //绑定以触发您返回的未来对象。
               未来.setChildren(data.children());
            }
        }
        受保护的功能 onFail(e:Event):void {
            //Security 和 IOerrors 都有一个 text 属性，但是它们
            //不能都被转换成同一个东西。
            trace('加载失败', _url, e[text]);
        }
    }
}

```

使用此方法需要注意的一件事是，您需要保留对实例的引用，直到数据更新，否则它可能会在填充未来之前被垃圾收集。因此，您最好遵循让您的实例分派一个自定义事件来承载它正在检索的数据的传统方法。如果您想要一个示例，请回帖，我可以为您提供一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:30:09.287

由于 URLLoader 是异步的，因此创建静态加载器函数并不安全，因为在多次调用期间很容易混淆返回的数据。即使您尝试使用`Event.OPEN`和一个 URL 向量来跟踪哪些已完成的数据应属于每个 URL 来完成您想要的操作，异步也以先到先得的方式工作，因此不会可以使文件 URL 和返回的数据保持一致。

我建议您创建一个`XMLLoader`使用 custom 的类的实例`XMLLoaderEvent`，这将返回 xml 数据和关联的文件 URL。以下代码未经测试，但除了可能的拼写错误外，它应该可以按预期工作。

**用例**

```
var xmlLoader:XMLLoader = new XMLLoader();
xmlLoader.addEventListener(XMLLoaderEvent.COMPLETE, xmlLoadCompleteEventHandler);
xmlLoader.load("myXMLFile.xml");

function xmlLoadCompleteEventHandler(event:XMLLoaderEvent):void
{
    xmlLoader.removeEventListener(XMLLoaderEvent.COMPLETE, xmlLoadCompleteEventHandler);

    trace(event.type, event.fileURL, event.xml);
} 
```

**XMLLoader.as**

```
package
{
    //Imports
    import flash.events.EventDispatcher;
    import flash.events.Event;
    import flash.net.URLLoader;
    import flash.net.URLRequest;

    //Class
    public class XMLLoader extends EventDispatcher
    {
        //Properties
        private var loader:URLLoader;
        private var fileURL:String;

        //Constructor
        public function XMLLoader():void
        {
            loader = new URLLoader();
            loader.addEventListener(Event.COMPLETE, loadCompleteEventHandler);
        }

        //Load
        public function load(fileURL:String):void
        {
            this.fileURL = fileURL;

            loader.load(new URLRequest(fileURL));            
        }

        //Load Complete Event Hanlder
        private function loadCompleteEventHandler(event:Event):void
        {
            loader.removeEventListener(Event.COMPLETE, loadCompleteEventHandler);

            dispatchEvent(new XMLLoaderEvent(XMLLoaderEvent.COMPLETE, fileURL, XML(loader.data)));
        }
    }
} 
```

**XMLLoaderEvent.as**

```
package
{
    //Imports
    import flash.events.Event;

    //Class
    public class XMLLoaderEvent extends Event
    {
        //Constants
        public static const COMPLETE:String = "complete";

        //Properties
        public var xml:XML;
        public var fileURL:String;

        //Constructor
        public function XMLLoaderEvent(type:String, fileURL:String = null, xml:XML = null) 
        {
            super(type);

            this.xml = xml;
            this.fileURL = fileURL;
        }

        //Clone
        public override function clone():Event
        {
            return new XMLLoaderEvent(type, fileURL, xml);
        }

        //To String
        public override function toString():String
        {
            return formatToString("XMLLoaderEvent", "type", "fileURL", "xml");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:25:23.073

你不能。因为xml加载请求是异步的。你打电话的时候`loadXML`，`onXMLLoad`还没到。所以这样的工作不可能异步返回。当然你可以等待函数处理`while`循环使用，但这种方法不好。因为要充分利用cpu资源，大材小用。您必须在`onXMLLoad`功能中进行下一步处理。这是最合适的。or xml 变量声明为全局变量，如果 xml 不为 null，则使用`ENTER_FRAME`or`TimerEvent`作为继续操作的方式。

# css - 无法更改单选按钮的字体大小

> ID：15185449
> 
> 赞同：1
> 
> 时间：2013-03-03T12:04:52.537
> 
> 标签：css, radio-button

我想减小单选按钮中的字体大小，因为它们在移动应用程序上占用了太多空间。我试图做内联样式，但没有奏效。我正在使用 jquery mobile 1.3，当我使用 jquery mobile 1.2 时，更改字体大小没有问题。任何帮助，将不胜感激。

```
<div data-type="horizontal">
                <fieldset class="ui-grid-a">
                    <legend>I am a </legend>
                    <div class="ui-block-a">
                         <input type="radio" name="rad-User-Type-1" id="rad-User-Type-1" value="driver" checked="checked" data-theme="c" />
                         <label for="rad-User-Type-1"style="font-size:12px" >Driver</label>
                    </div>
                    <div class="ui-block-b">
                         <input type="radio" name="rad-User-Type-1" id="rad-User-Type-2" value="passenger"  data-theme="c"/>
                         <label for="rad-User-Type-2" style="font-size:12px">Passenger</label>
                    </div>                    
                </fieldset>

            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:56:39.213

您可以使用 Firebug ( [http://getfirebug.com/](http://getfirebug.com/) ) 检查样式并实时查看/编辑样式以找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T01:45:27.660

```
.ui-radio-on .ui-btn-text, .ui-radio-off .ui-btn-text{
    font-size:13px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:06:08.877

尝试改变：

```
<label for="rad-User-Type-1"style="font-size:12px" >Driver</label> 
```

至：

```
<label for="rad-User-Type-1"style="font-size:12px !important" >Driver</label> 
```

让我们知道？

# android - 在 Traceview 中将结果过滤到时间范围

> ID：15185453
> 
> 赞同：1
> 
> 时间：2013-03-03T12:05:17.417
> 
> 标签：android, debugging, profiling

是否有可能将显示的分析结果限制在 Android SDK Traceview 中的指定时间范围内，以便我可以在狭窄的时间段内查看方法中的相对时间花费？是否有任何其他 Android .trace 文件查看器可以做到这一点？

我需要这个，因为我的应用程序（一个 OpenGL 游戏）的整体性能非常好，但是在更新循环中有明显的打嗝，我找不到导致它们的原因。

# php - 如何从 php 文件中的 url 获取 JSON 数据。

> ID：15185457
> 
> 赞同：0
> 
> 时间：2013-03-03T12:06:02.777
> 
> 标签：php, ajax, getjson

您好朋友请帮我解决以下问题

1.  如何在 JSON 中传递数据以及如何使用以下代码在 php 中获取 JSON 数据

    例如： `$.getJSON("url",function(data) { alert(data); });`

php 文件:::::

```
<?php    how to get JSON data here?     ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:32:10.950

下面是一个示例服务器端代码，即 php 代码（您要求使用 php）

这包括从 sql 获取数据并将其编码为 JSON 格式并将其返回给客户端。

**testAJAX_getJson.php**文件内容

 **```
 $con =
 mysql_connect("localhost","peter","abc123");
 if (!$con)   {   die('Could not
 connect: ' . mysql_error());   }

 mysql_select_db("my_db", $con);

 $result = mysql_query("SELECT * FROM
 Persons");

 while($row =
 mysql_fetch_array($result))   {  
 $data[] = $row;   }

 echo json_encode($data); 
```**

# composer-php - 如何获取所有已安装软件包的列表以及作曲家中的版本？

> ID：15185459
> 
> 赞同：325
> 
> 时间：2013-03-03T12:06:09.717
> 
> 标签：composer-php

我一直在我的本地机器上使用 Symfony 2.1 开发一个项目。我已经将它上传到我的服务器，但是当我尝试使用 Composer 安装供应商包时，我遇到了很多依赖错误。大概这与刚刚发布的最新版本的 Symfony 和我的`composer.json`文件没有指定确切的版本号有关。

有什么方法可以快速显示本地机器上所有内容的版本号？

这是我的 composer.json 文件（直到几天前还可以正常工作）：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "sonata-project/admin-bundle": "*",
        "sonata-project/cache-bundle": "dev-master",
        "sonata-project/doctrine-orm-admin-bundle": "dev-master",
        "stof/doctrine-extensions-bundle": "1.1.x-dev",
        "sonata-project/user-bundle": "dev-master",
        "sonata-project/easy-extends-bundle": "dev-master",
        "friendsofsymfony/user-bundle": "2.0.x-dev",
        "friendsofsymfony/jsrouting-bundle": "*",
        "liip/imagine-bundle": "*",
        "simplethings/form-extra-bundle": "dev-master",
        "antimattr/google-bundle": "dev-master",
        "doctrine/doctrine-fixtures-bundle": "dev-master",
        "genemu/form-bundle": "2.1.*",
        "behat/behat":                  "2.4.*@stable",
        "behat/mink":                   "1.4.*@stable",
        "behat/symfony2-extension":     "*@stable",
        "behat/mink-extension":         "*@stable",
        "behat/mink-selenium2-driver":  "*@stable",
        "behat/mink-browserkit-driver":  "*",
        "liip/functional-test-bundle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    },
    "config": {
        "bin-dir": "bin/"
    }
} 
```

* * *

## 回答 #1

> 赞同：653
> 
> 时间：2013-03-03T13:29:21.050

您可以运行`composer show -i`（的缩写`--installed`）。

在最新版本中，只需使用`composer show`.

这些`-i`选项已被弃用。

您还可以使用`global`作曲家的安装：`composer global show`

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2015-01-03T11:01:08.577

列出全局安装的作曲家包：

```
composer global show -i 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-04-12T08:24:32.213

列出已安装的依赖项：

*   平坦的：`composer show -i`
*   树：`composer show -i -t`

`-i`的缩写`--installed`。

`-t`的缩写`--tree`。

参考：[https ://getcomposer.org/doc/03-cli.md#show](https://getcomposer.org/doc/03-cli.md#show)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-06-18T12:47:34.193

如果您只想检查一个版本，您可以这样做

```
composer show -- twig/twig 
```

请注意，现在默认情况下仅显示已安装的软件包，并且已弃用已安装选项。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-04-22T08:21:58.357

此命令的行为已修改，因此您不必传递`-i`选项：

```
[10:19:05] coil@coil:~/workspace/api$ composer show -i
You are using the deprecated option "installed". 
Only installed packages are shown by default now. 
The --all option can be used to show all packages. 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-05-09T18:31:19.917

上面伊万的回答很好：

`composer global show -i`

添加信息：如果您收到类似以下的消息：

`Composer could not find a composer.json file in ~/.composer`

...您可能还没有安装任何软件包。如果是这样，您可以忽略包含以下内容的消息的下一部分：

`... please create a composer.json file ...`

...因为一旦你安装了一个包，消息就会消失。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-03T12:30:17.603

如果你想安装 Symfony2.2，你可以在你`composer.json` [的 Symfony 博客上](http://symfony.com/blog/symfony-2-2-0#upgrading)看到完整的变化。

只需根据该更新您的文件并在`composer update`此之后运行。这将在您的项目中安装所有新的依赖项和 Symfony2.2。

* * *

如果您不想更新到 Symfony2.2，但有依赖错误，您应该发布这些，以便我们进一步帮助您。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-25T15:59:31.820

使用 composer-runtime-api 2.0+ 有一个`InstalledVersions`带有一些静态方法的新类，可以以编程方式查看事物。

例如：

```
// To list all packages (`string[]`)
\Composer\InstalledVersions::getInstalledPackages();

// To list every details of every packages
\Composer\InstalledVersions::getAllRawData(); 
```

更多信息：[https ://getcomposer.org/doc/07-runtime.md#installed-versions](https://getcomposer.org/doc/07-runtime.md#installed-versions)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-20T19:17:38.990

有没有办法通过 $event->getComposer()->getRepositoryManager()->getAllPackages()

# vb.net - vb xor 校验和

> ID：15185461
> 
> 赞同：1
> 
> 时间：2013-03-03T12:06:12.533
> 
> 标签：vb.net, checksum, xor

这个问题可能已经被问过了，但是关于 SO 的任何内容实际上都没有给我我需要的答案。

我正在尝试对其他人的 vb.NET 代码进行逆向工程，但我对 a`Xor`在这里所做的事情感到困惑。这是被解析的soap请求正文的1行（某些值已被遮盖，因此校验和在这种情况下可能不起作用）：

```
<HD>CHANGEDTHIS01,W-A,0,7753.2018E,1122.6674N, 0.00,1,CID_V_01*3B</HD> 
```

这是检查它的vb代码片段

```
LastStar = strValues(CheckLoop).IndexOf("*")
StrLen = strValues(CheckLoop).Length
TransCheckSum = Val("&h" + strValues(CheckLoop).Substring(LastStar + 1, (StrLen - (LastStar + 1))))

CheckSum = 0
For CheckString = 0 To LastStar - 1
    CheckSum = CheckSum Xor Asc(strValues(CheckLoop)(CheckString))
Next '

If CheckSum <> TransCheckSum Then
    'error with the checksum
    ... 
```

好的，我明白了`For`。我只需要解释 Xor 在做什么以及如何将其用于校验和。

谢谢。

PS：作为奖励，如果有人可以提供ac#翻译，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:39:01.167

使用`Xor`一个简单的算法来计算校验和。[这个想法与计算奇偶校验位](http://en.wikipedia.org/wiki/Parity_bit)时的想法相同，但是跨字节计算了八个位。CRC 和 MD5 等更高级的算法通常用于计算要求更高的应用程序的校验和。

C# 代码如下所示：

```
string value = strValues[checkLoop];

int lastStar = value.IndexOf("*");
int transCheckSum = Convert.ToByte(value.Substring(lastStar + 1, 2), 16);

int checkSum = 0;
for (int checkString = 4; checkString < lastStar; checkString++) {
  checkSum ^= (int)value[checkString];
}

if (checkSum != transCheckSum) {
  // error with the checksum
} 
```

我对代码进行了一些调整以适应到 C# 的转换，以及一些有意义的事情。我声明了使用的变量，并对局部变量使用骆驼大小写而不是帕斯卡大小写。我对字符串使用局部变量，而不是每次都从集合中获取它。

VB`Val`方法在找到无法识别的字符时停止解析，因此使用框架方法我假设校验和的长度是两个字符，以便它可以解析字符串`"3B"`而不是`"3B</HD>"`.

循环从第四个字符开始，跳过第一个字符，`"<HD>"`从逻辑上讲，它不应该是计算校验和的数据的一部分。

在 C# 中，您不需要`Asc`获取字符代码的函数，只需`char`将`int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:23:37.710

该代码基本上是获取字符值并执行 Xor 以检查完整性，您在此页面的奇偶校验部分中有一个很好的操作说明：[http ://www.cs.umd.edu/类/sum2003/cmsc311/Notes/BitOp/xor.html](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/xor.html)

# java - 制作呼叫按钮

> ID：15185463
> 
> 赞同：0
> 
> 时间：2013-03-03T12:06:34.027
> 
> 标签：java, android, android-activity, phone-call

我正在尝试向我的应用程序添加多个按钮，因此如果您单击一个按钮，您会自动呼叫某个人，但现在我被困在呼叫操作上，当单击按钮时如何拨打电话？我的活动有以下代码，名为 telefoonnummers.java：

```
package com.example.rome;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.widget.EditText;
import android.widget.Button;
import android.view.View;
import android.widget.Toast;

public class Telefoonnummers extends Activity {

Button mHALbellen;
Button mWITbellen;
Button mWDGbellen;
Button mVlierbellen;
Button mHotelbellen;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_telefoonnummers);
    mHALbellen = (Button) findViewById(R.id.button1);
    mWITbellen = (Button) findViewById(R.id.button3);
    mWDGbellen = (Button) findViewById(R.id.button4);
    mVlierbellen = (Button) findViewById(R.id.button5);
    mHotelbellen = (Button) findViewById(R.id.button6);
    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_telefoonnummers, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public void vanHalbellen(View view){
    if (view == mHALbellen){
        //WHICH CODE SHOULD BE HERE TO MAKE A PHONECALL WHEN THE BUTTON  mHALBELLEN IS PRESSED??
            }
        }
} 
```

请各位帮忙看看？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T12:08:34.153

将以下权限添加到您的清单中：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

然后在单击按钮时执行此 Intent：

```
String uri = "tel: phone_number_here";
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse(uri));
startActivity(intent); 
```

您也可以使用`Intent.ACTION_DIAL`代替`Intent.ACTION_CALL`. 这显示了已输入号码的拨号器，但允许用户决定是否实际拨打电话。`ACTION_DIAL`不需要`CALL_PHONE`许可。

# wpf - 在 Textblock xaml 中显示带有字符串的文本

> ID：15185465
> 
> 赞同：0
> 
> 时间：2013-03-03T12:06:49.747
> 
> 标签：wpf, vb.net, xaml

我有一个文本块，我想显示一个带有定义字符串的文本。怎么做？

文本块：

```
 <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Padding="6" VerticalAlignment="Center" Margin="45,0,0,0" Height="30" Width="386" Text="My Program ver. Version"/> 
```

我的字符串：

```
Public Version As String = "1.0a" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T12:22:08.723

您可以使用[StringFormat](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)。

```
<TextBlock Text="{Binding Path=Version, StringFormat=My Program ver. {0}}" /> 
```

在您的代码中，您必须更改`Version`为属性（此属性应该是`ReadOnly`因为它在运行时不会更改）并`DataContext`在构造函数中分配：

```
Class MainWindow 

    Public Sub New()
        InitializeComponent()
        Me.DataContext = Me
    End Sub

    ReadOnly Property Version As String
        Get
            Return "1.0a"
        End Get
    End Property
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:30:32.317

如果您希望您的 TextBlock 每次有新版本时都更新版本号，
您可以在 C# 中这样做。您可能很容易找到如何在 VB 中编写它。

这将在您每次发布程序的新版本时更新您的 TextBlock。

在 XAML 中，您将 TextBlock 文本绑定到“版本”：

```
<TextBlock Text="{Binding Version, Mode=OneWay}" />` 
```

然后在代码隐藏或视图模型中，您可以使用 XAML TextBlock 中的 Binding 属性：

```
 public string Version
    {
        get
        {
          return String.Format("VERSION: {0}",DeploymentInfo.Version.ToString());
        }
    } 
```

然后，您需要在项目中添加对***“System.Deployment”***的引用。

这仅在您完成项目的“发布”时才有效。当您启动调试器时，您可能只会看到版本号：0.0.0.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:21:32.150

在 XAML 文件中：

首先，您应该命名您的 TextBlock，例如我给出`tbWithNoName`的。

```
<TextBlock x:Name="tbWithNoName" HorizontalAlignment="Left" TextWrapping="Wrap" Padding="6" VerticalAlignment="Center" Margin="45,0,0,0" Height="30" Width="386" Text="My Program ver. Version"/> 
```

然后在 Window 对象上添加 Loaded 调用。

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
        Loaded="Window_Loaded"> 
```

将 Window_Loaded 函数插入到您的 vb 文件中。

```
Private Sub Window_Loaded(sender As Object, e As RoutedEventArgs)
    tbWithNoName.Text = tbWithNoName.Text + " " + Version
End Sub 
```

这将在加载窗口时更改 TextBlock 的文本

# c# - 获取编码为字符串的条形码

> ID：15185469
> 
> 赞同：0
> 
> 时间：2013-03-03T12:07:39.777
> 
> 标签：c#, asp.net, barcode

我正在创建一个需要编码条形码文本的 Web 应用程序 (ASP.NET C#)。

示例：EAN13 编号：460650003296。输出编码条形码为：Y(6A65AA*KNMTQT( 这就是我需要的值。

我曾尝试使用 BarCodeLib，它可以很好地生成条形码图像，但我找不到任何方法来获取编码文本，我也尝试过 KA Barcode，但结果相同。

有没有人对这个库有任何经验，是否可以从它们那里获取编码文本，或者其他一些建议我如何获取编码值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:27:40.143

我对您正在使用的这个库没有任何经验。但是，我的公司创建了一个 Web 应用程序，该应用程序使用不同的商业库来读取和写入一维条码（包括 EAN13）。

我们使用以下 2 个教程启动了我们的 Web 应用程序：

[读取条码](http://www.leadtools.com/help/leadtools/v18/dh/to/leadtools.topics.barcode~ba.topics.readingbarcodes.html)

[编写条形码](http://www.leadtools.com/help/leadtools/v18/dh/to/leadtools.topics.barcode~ba.topics.writingbarcodes.html)

您可以使用此电子邮件从他们的支持团队获取更多详细信息：

support@leadtools.com

# c++ - 未定义符号，使用指针 C++ 访问成员函数

> ID：15185473
> 
> 赞同：1
> 
> 时间：2013-03-03T12:08:19.647
> 
> 标签：c++, pointers, dll, member-function-pointers

我想从 lib 中的一个类中使用指针访问我的主类的成员函数。

我可以访问我的主类中的公共变量。但是当我尝试访问成员函数（公共）时，我有这个错误：

```
./Panda: symbol lookup error: libkoala.so: undefined symbol: _ZNK5Panda6getLOLEv 
```

我真的不知道为什么，也许我没有理解c ++中的概念......

我的主要课程：

```
class           Panda
{
protected:
  IAssistant*   (*external_creator)();
  IAssistant*   lib;
  void*         dlhandle;

  int           lol;
public:

  int           hello;

  Panda();
  ~Panda();

  int           getLOL() const;
};

Panda::Panda()
{
  if ((dlhandle = dlopen("libkoala.so", RTLD_LAZY)) == NULL)
    exit(-1);
  if ((external_creator = reinterpret_cast<IAssistant* (*)()>(dlsym(dlhandle, "create_assistant"))) == NULL)
    exit(-1);
  lib = external_creator();
  lol = 69;
  hello = 42;
  lib->do_something(this);
}

Panda::~Panda(){
}

int                     Panda::getLOL() const
{
  return lol;
} 
```

界面如下所示：

```
class IAssistant
{
public:
  virtual void do_something(Panda *) = 0;
}; 
```

我的库上的课程：

```
class Koala : public IAssistant
{
public:
  void do_something(Panda *);
};

void Koala::do_something(Panda * ptr)
{
  std::cout << ptr->hello; <========= work perfectly 
  std::cout << ptr->getLOL(); <====== doesn't work
}

extern "C"
{
        IAssistant* create_assistant()
        {
                return new Koala();
        }
} 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:55:28.567

好的，问题出在编译期间。添加标志 -rdynamic 后，代码可以完美运行。

# mysql - MySQL：有点复杂的查询返回错误的计数结果

> ID：15185477
> 
> 赞同：1
> 
> 时间：2013-03-03T12:08:28.083
> 
> 标签：mysql

有这三个表：

```
posts
posts_replies
likes 
```

这个查询几乎可以很好地返回我的数据，但由于某种原因，帖子的回复计数不准确。

```
SELECT posts.title, posts.num, posts.status, posts.category, posts.content, posts.member_num, COUNT( posts_replies.post_num ) AS count, COUNT( likes.comment_num ) AS likes_count
FROM posts_replies
INNER JOIN posts ON ( posts_replies.post_num = posts.num )
LEFT JOIN likes ON ( likes.comment_num = posts_replies.num )
WHERE posts.status =1
AND posts.access = 'Public'
GROUP BY posts.num
ORDER BY count DESC
LIMIT 50 
```

这是我正在使用的计数：**COUNT(posts_replies.post_num) AS count**

对此有何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:02:15.527

对于链接到该回复的每个赞，您的查询将对每个回复计数一次。

为了只计算每个回复一次，请替换

```
COUNT( posts_replies.post_num ) AS count 
```

和

```
COUNT(DISTINCT posts_replies.num ) AS count 
```

# php - 在这个例子中如何使用 MySQL 而不是 XML。

> ID：15185479
> 
> 赞同：0
> 
> 时间：2013-03-03T12:08:45.410
> 
> 标签：php, mysql, xml

我正在寻找有关如何为我们公司的电话预订系统创建“Ajax 自动建议”脚本的教程。我在汽车转售公司为我的叔叔工作，我真的需要为我的老板编写这个脚本。我对 HTML、CSS 有很好的了解，并且对 PHP 和 MYSQL 有平均的了解。我实际上已经创建了一个搜索系统，但是我发现了这个

[http://www.w3schools.com/php/php_ajax_livesearch.asp](http://www.w3schools.com/php/php_ajax_livesearch.asp) 关于如何创建实时搜索的教程。唯一的问题是，他们使用 XML，这对我来说完全是中文。所以，我不想使用 XML 来存储电话簿的数据，而是使用 mysql。

这可能吗？如果是这样，任何链接/建议都会非常好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:27:07.523

在你可以走路之前不要尝试跑步：首先，编写一个简单的搜索表单并提交，它会运行一些`SQL`以找到正确的结果。

完成后，“实时搜索”所需要的只是 JavaScript，它会在您键入时悄悄提交表单并以适当的方式显示前几个结果。

您可能还想查看一个自动完成插件，例如这个：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)同样，首先编写代码来搜索您的数据库，然后对其进行调整以适应 JavaScript 的需要。

# vb.net - 程序执行完成时导致VB进程不结束的表单

> ID：15185484
> 
> 赞同：0
> 
> 时间：2013-03-03T12:09:34.903
> 
> 标签：vb.net, forms, process

我有一个看起来工作正常的小型 VB 项目，除非我在某个函数中显示任何形式。

在下面的代码中，`form_progress`显示了（然后在函数的后面隐藏），但是当执行完成时进程不会结束（所有表单都关闭），因此除非我手动结束它，否则我会陷入调试。请注意，如果我注释掉`form_progress.Show()`，一旦所有表格都关闭，流程就会按预期结束。

起初我专注于`form_progress`表单的问题，但事实并非如此——我在这一点上显示的任何表单都会导致这个问题。没有抛出错误，所以我不知道在哪里看。如果有人有任何建议我会appriciate它。谢谢。

```
Public Sub complete_action(folder As String, rename As Boolean, include_sub_folders As Boolean)

    Dim dir As DirectoryInfo            ' The directory that they user selected as an object
    Dim output As String                ' The output to be placed in the log

    ' Set 'output' to be an empty string (to avoid errors)
    output = ""

    Try

        form_progress.Show()

        ' Set the DirectoryInfo object from the users selected directory name
        dir = New DirectoryInfo(folder)

        If include_sub_folders Then
            output = recursive_loop(dir, rename, output)
        Else
            output = loop_folder(dir, folder, rename)
        End If

        ' Write the log file
        write_text.Log_File.write_to_file(output)

        form_progress.Hide()

    Catch oError As Exception
        functions.error_handler(oError, "Error when looping through files", "complete_action")
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:13:53.370

尝试使用 form_progress.Close() 而不是 Hide()。

# ios - 如何处理IOS上的statusBar按下事件？

> ID：15185491
> 
> 赞同：0
> 
> 时间：2013-03-03T12:10:09.503
> 
> 标签：ios, statusbar

为了在我按下状态栏时让我的 tableView 向上滚动，我将我的表格视图定义为：

```
myTableView.scrollsToTop = YES; 
```

和其他观点：

```
otherTableView.scrollsToTop = NO; 
```

问题是我有涉及许多可滚动视图的屏幕，这个解决方案不适用于这个特定的屏幕.....此外，我想让一些视图在按下状态栏时消失，我想知道是否有处理此类事件的方法？

提前感谢

# java - 如何从 SQLite 随机将文本设置为按钮而不重复？

> ID：15185495
> 
> 赞同：2
> 
> 时间：2013-03-03T12:10:25.950
> 
> 标签：java, android, android-sqlite

我有一个导入到资产的数据库，我从中读取并随机将文本设置为按钮和 texview，代码如下：

```
mDbHelper.open();  

            Cursor c = mDbHelper.getTestData();

            List<Answer> labels = new ArrayList<Answer>();

            labels.add(new Answer(c.getString(2), true));
            labels.add(new Answer(c.getString(3), false));
            labels.add(new Answer(c.getString(4), false));
            labels.add(new Answer(c.getString(5), false));

            Collections.shuffle(labels);

question.setText(c.getString(1));

        bOdgovor1.setText(labels.get(0).option);
        bOdgovor1.setTag(labels.get(0));
        bOdgovor1.setOnClickListener(clickListener);

        bOdgovor2.setText(labels.get(1).option);
        bOdgovor2.setTag(labels.get(1));
        bOdgovor2.setOnClickListener(clickListener);

        bOdgovor3.setText(labels.get(2).option);
        bOdgovor3.setTag(labels.get(2));
        bOdgovor3.setOnClickListener(clickListener);

        bOdgovor4.setText(labels.get(3).option);
        bOdgovor4.setTag(labels.get(3));
        bOdgovor4.setOnClickListener(clickListener); 
```

这是我的 db TestAdapter 代码：

```
public Cursor getTestData()
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanja ORDER BY RANDOM() LIMIT 1";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     } 
```

在为按钮设置问题时，它非常有效，但问题会重复。如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:35:35.967

还有更多方法可以解决您的问题：

1.  在开头执行sql语句（无限制）并在正确回答问题时移动到光标的下一个条目
2.  缓冲已经回答的问题

第二种方法可以如下进行：

首先，更改您的方法和 sql，包括 where 子句：

```
public Cursor getTestData(String whereClause)
 {;
     try
     {
         String sql ="SELECT * FROM tblPitanja WHERE 1 = 1 " + whereClause + " ORDER BY RANDOM() LIMIT 1";
         [...] 
```

其次，在你的游戏课中缓冲已经回答的问题：

将 LinkedList 添加到您的游戏类

```
LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>(); 
```

将已回答的问题添加到 LinkedList：

```
Cursor c = mDbHelper.getTestData(generateWhereClause());
mAnsweredQuestions.add(c.getLong(0));
List<Answer> labels = new ArrayList<Answer>();
[...] 
```

添加一个生成 where 子句的函数：

```
private String generateWhereClause(){
    StringBuilder result = new StringBuilder();
    for (Long l : mAnsweredQuestions){
         result.append(" AND " + YOURID + " <> " + l);
    }
    return result.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:51:47.023

您可以将 Cursor 对象保存到 ArrayList 中，然后使用 contains 来确定是否已经问过该问题。（注：包含使用equals方法）

```
public class YourClass {
     java.util.ArrayList<Long> cursorList = new java.util.ArrayList<Long>();
     public void YourMethod {

         Cursor c = mDbHelper.getTestData();
         long l = c.getLong(0);

         while(cursorList.contains(l))
         {
              Cursor c = mDbHelper.getTestData();
              l = c.getLong(0);
         }

         cursorList.add(l);

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:30:13.297

对于这个问题，您最好维护您提出的问题（对象或 ID）列表。在向用户显示任何问题之前，请检查当前问题是否在您的数组列表中。如果当前 qus 在 arraylist 中，那么您可以调用 getTestData()，否则您可以显示问题并将 id 或 qus 对象添加到数组列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T12:31:03.143

解决方案取决于您的应用程序逻辑。一种可能的解决方案是从您的查询中删除“LIMIT 1”并加载所有随机排序的问题。

如果您的应用程序执行诸如“显示我以前从未见过的下一个随机问题”之类的操作，则您必须保留已访问问题的列表（在内存中或 DB 中 - 再次取决于您的应用程序逻辑。对于 DB 解决方案很简单将*访问*列添加到您的数据库中。

# cxf - cxf 服务中的请求数

> ID：15185497
> 
> 赞同：1
> 
> 时间：2013-03-03T12:10:31.407
> 
> 标签：cxf, mule

我使用骡 CE 3.3.0。我的项目有以下内容：

```
<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
xmlns:mule-ss="http://www.mulesoft.org/schema/mule/spring-security"
xmlns:ss="http://www.springframework.org/schema/security"
xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.mulesoft.org/schema/mule/spring-security http://www.mulesoft.org/schema/mule/spring-security/3.3/mule-spring-security.xsd 
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd ">

<global-property name="allowed" value="192.168.3.76,192.168.3.74,192.168.3.75" />

<configuration>
    <expression-language>
        <global-functions>
            def parseIp(fullIp) {
            return fullIp.substring(fullIp.indexOf('/') + 1, fullIp.indexOf(':'))
            }
    </global-functions>
    </expression-language>
</configuration>

<http:connector name="httpConnector" doc:name="HTTP\HTTPS">
    <service-overrides sessionHandler="org.mule.session.NullSessionHandler" />
</http:connector>

<mule-ss:security-manager>
    <mule-ss:delegate-security-provider
        name="memory-dao" delegate-ref="authenticationManager" />
</mule-ss:security-manager>
<spring:beans>
    <ss:authentication-manager
        xmlns:ss="http://www.springframework.org/schema/security" alias="authenticationManager">
        <ss:authentication-provider>
            <ss:user-service id="userService">
                <ss:user name="weather" password="weather" authorities="ROLE_ADMIN" />
            </ss:user-service>
        </ss:authentication-provider>
    </ss:authentication-manager>
</spring:beans>

<flow name="OML_News" doc:name="OML_News">
    <http:inbound-endpoint host="localhost" port="9091"
        path="iran/oml_news" exchange-pattern="request-response" doc:name="HTTP">
    <mule-ss:http-security-filter realm="mule-realm" />
    </http:inbound-endpoint>
    <expression-filter
        expression="#['${allowed}'.contains(parseIp(message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']))]"
        doc:name="Expression" />        

    <cxf:proxy-service 
        service="Weather"
        wsdlLocation="http://wsf.cdyne.com/WeatherWS/Weather.asmx?wsdl"
        namespace="http://ws.cdyne.com/WeatherWS/"
        validationEnabled="true" doc:name="SOAP">
    </cxf:proxy-service>

    <copy-properties propertyName="SOAPAction" doc:name="Property" />

    <cxf:proxy-client doc:name="SOAP" />

    <outbound-endpoint 
        address="http://wsf.cdyne.com/WeatherWS/Weather.asmx"
        exchange-pattern="request-response" doc:name="Generic">
    </outbound-endpoint>

</flow> 
```

我启动了一个 cxf 服务。有一些客户在我的 cxf 服务中使用 wsdl 地址，他们实现了 Web 服务。现在我希望可以确定有多少用户正在使用我的 wsdl 地址，以及每个用户有多少请求发送到我的服务器？事实上，我想创建一个报告系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:50:22.213

有几种方法可以做到这一点，例如，您可以在 http 入站端点之后添加窃听，并调用在数据库中收集统计信息的自定义组件，或者更优雅地调用执行此操作的流。

```
<http:inbound-endpoint address="http://yourendpointaddress:8080/path" />
<wire-tap>
    <vm:outbound-endpoint path="stats" />
</wire-tap> 
```

接着

```
<flow name="statsFlow">
    <vm:inbound-endpoint path="stats" />
    <!-- gather stats from the headers -->
    <jdbc:outbound-endpoint queryKey="insertStatsIntoDB" />
</flow> 
```

这应该在不影响性能的情况下收集统计信息。

# javascript - WebKit 相当于 Firefox 的“moz-chunked-arraybuffer”xhr responseType

> ID：15185499
> 
> 赞同：21
> 
> 时间：2013-03-03T12:11:07.887
> 
> 标签：javascript, html, google-chrome, webkit, web-audio-api

我想读取一个 MP3 流（从 icecast 读取 ICY 元数据，然后将二进制 MP3 数据传递给 Web Audio Api）。

Firefox 有一个“moz-chunked-arraybuffer”xhr responseType 来读取进度数据，但我找不到 webkit / chrome 的任何等价物。

* * *

编辑 2014/02/03：

Chrome 已经开始实现 xhr.responseType "stream"

“解析”位于 Chrome 中（带有 --enable-experimental-webkit-features 标志），但 xhr.response 结果对象（流）尚不能直接在 Javascript 中使用：[https ://code.google.com/ p/chromium/issues/detail?id=240603](https://code.google.com/p/chromium/issues/detail?id=240603)

* * *

编辑 2014/07/10：

该规范现已开发：[https ://github.com/whatwg/streams](https://github.com/whatwg/streams)

Chromium 开发者计划“在不等待标准化完成的情况下做一些原型”

* * *

编辑 2015/01/22：

[Streams API](https://streams.spec.whatwg.org/)不会在 XHR 中实现（它只是用于原型设计）。[它最终将](https://github.com/slightlyoff/ServiceWorker/issues/533)在[Fetch API](https://fetch.spec.whatwg.org/)实现中实现，该实现最近在 Chrome 中发布（在实验标志后面）。

* * *

编辑 2015/01/30：Fetch API 有[发货意图](https://groups.google.com/a/chromium.org/forum/#!msg/blink-dev/qwRO52vsQlU/CPLC4G6oG9IJ)！Streams API 被宣布为“即将到来的集成”，它就在这里！

* * *

编辑 2015/04/15 ：

\o/ 荣耀！Fetch API 现在登陆 Chrome 42（当前稳定版本：http: [//googlechromereleases.blogspot.fr/2015/04/stable-channel-update_14.html](http://googlechromereleases.blogspot.fr/2015/04/stable-channel-update_14.html)）。42 不仅是对生命、宇宙和一切的答案，也是对“我如何像流一样消费“AJAX 请求”这个问题的答案：

[https://github.com/GoogleChrome/samples/blob/gh-pages/fetch-api/fetch-response-stream.html](https://github.com/GoogleChrome/samples/blob/gh-pages/fetch-api/fetch-response-stream.html)

故事的结局 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:02:50.930

我的猜测是 WebKit 会得到[https://dvcs.w3.org/hg/streams-api/raw-file/tip/Overview.htm](https://dvcs.w3.org/hg/streams-api/raw-file/tip/Overview.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:43:52.077

很抱歉成为坏消息的承担者，但据我所知，目前还没有 webkit 等价物。最初 chunked-arraybuffer 响应类型源于与您类似的问题：

[http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/0924.html](http://lists.w3.org/Archives/Public/public-webapps/2011JulSep/0924.html)

此外，MDN 将 responseType 列为仅在 Firefox 中可用：

[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:49:01.213

我认为您的问题的解决方案是没有看到 html5 的完整 AudioContext 对象。

[http://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

您可以解码音频数据： decodeAudioData() 您可以通过 AudioBuffer 播放音乐，该 AudioBuffer 可以通过网络套接字将音乐流式传输给您，或者只是分块的 http 流式传输。

当你想播放一首歌时，你只需调用 playSound()

所以真正的答案是使用 AudioContext 你会很成功

# asp.net-mvc - 我可以为多个模型类设置一个连接字符串吗？

> ID：15185501
> 
> 赞同：0
> 
> 时间：2013-03-03T12:11:19.920
> 
> 标签：asp.net-mvc, connection-string

据我了解，连接字符串仅附加到一个类。但是如果我有很多 Model 类怎么办？我可以将一个连接字符串用于多个类吗？

这是我的 UserModel.cs 文件的简单版本：

```
public class UserModel
{
    public int Id { get; set; }
    public string Email { get; set; }
}

public class UserTable : DbContext
{    
    public UserModel GetByEmail(string Email)
    {    
        return this.Database.SqlQuery<UserModel>("SELECT * FROM Users WHERE Email=@Email", new SqlParameter("Email", Email)).SingleOrDefault();    
    }
} 
```

这是连接字符串：

```
<connectionStrings>
    <add name="UserModel"
         connectionString="Server=.\SQLEXPRESS;Database=MyDatabase;User Id=MyUser;Password=MyPassword;"
         providerName="System.Data.SqlClient" />
</connectionStrings> 
```

现在假设我想添加一个名为 DataTable 的新模型类，它也从 DbContext 派生为用户表。我需要一个同名的连接字符串还是可以使用已经定义的连接字符串？处理多个模型类和连接字符串的常规方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:10:52.227

DbContext 类使用 ConnectionString 来建立与数据库的连接。

您通常有多个由 DbContext 公开的模型类。

可以有多个 DbContext 对象使用相同的连接字符串值连接到数据库。通过这种方式，您可以根据需要将模型的各个部分分成单独的上下文（例如，如果您正在创建访问不同表但为应用程序提供类似服务的单独程序集）。

需要注意的一点是，EF 至少达到 5.0，您不能将代码优先迁移与多个 DbContext 一起使用，一个会覆盖另一个的更改。对此的解决方案是创建一个仅用于迁移过程的聚合 DbContext。

我已经在我构建的应用程序中完成了这项工作。我使用了 Unity IoC 容器，并构建了一个插件接口，允许我将我的 ConnectionStringName 传递到我分离的 DbContexts 中。其中一个程序集中的插件示例是：

```
public class Bootstrapper : IBootstrapper
{
    public void Bootstrap(IUnityContainer container, string connectionStringName)
    {
        container.RegisterType<ISQService, SQService>();
        container.RegisterType<ISQEntities, SQEntities>(
            new HierarchicalLifetimeManager(), new InjectionConstructor(connectionStringName));
        container.RegisterType<IController, SQController>("SQ");
    }
} 
```

我的 global.asax 引用了下面的引导程序类：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        ModelBinders.Binders[typeof(DataTable)] = new DataTableModelBinder();
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        Bootstrapper.Initialise();
    }

    protected void Application_End()
    {
        Bootstrapper.Dispose();
    } 
```

**引导程序**

```
public static class Bootstrapper
{
    private static IUnityContainer container;

    public static void Initialise()
    {
        container = BuildUnityContainer();
        DependencyResolver.SetResolver(new UnityDependencyResolver(container));
    }

    public static void Dispose()
    {
        container.Dispose();                
    }

    private static void RegisterPlugins(IUnityContainer theContainer, string wildcard, string connectionStringName)
    {
        var pluginBootStrappers = from Assembly assembly in wildcard.LoadAssemblies()
                                  from type in assembly.GetExportedTypes()
                                  where typeof(IBootstrapper).IsAssignableFrom(type)
                                  select (IBootstrapper)Activator.CreateInstance(type);

        pluginBootStrappers.ToList().ForEach(b => b.Bootstrap(theContainer, connectionStringName));
    }

    private static IUnityContainer BuildUnityContainer()
    {
        var theContainer = new UnityContainer();
        const string ConnectionStringName = "MyDb";

        RegisterPlugins(theContainer, "MyApp.Systems.*.dll", ConnectionStringName);

        // Register Application Specific objects
        theContainer.RegisterType<IMyEntities, MyEntities>(
            new HierarchicalLifetimeManager(), 
            new InjectionConstructor(ConnectionStringName));

        theContainer.RegisterType<IAimaService, AimaService>();

        var factory = new UnityControllerFactory(theContainer);
        ControllerBuilder.Current.SetControllerFactory(factory);

        return theContainer;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:16:31.573

连接字符串定义了连接数据库所需的参数。

也许我认为您正在谈论或混淆 SQL 查询与连接字符串。

是的，一个 SQL 查询可以在任何给定时间查询多个表。也许您可以查看谷歌上的“SQL 查询语句”以获取深入信息。

# delphi - 如何在 FMX2 中直接访问 TBitmap 像素（TBitmap.ScanLine 替换）？

> ID：15185502
> 
> 赞同：4
> 
> 时间：2013-03-03T12:11:44.263
> 
> 标签：delphi, firemonkey, firemonkey-fm2

该类在 FMX (FireMonkey) 中[`FMX.Types.TBitmap`](http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.Types.TBitmap)具有该[`ScanLine`](http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.Types.TBitmap.ScanLine)属性，但似乎该属性已被删除，并且在 FMX2 (FireMonkey FM2) 中缺失。

有什么解决方法吗？我们应该如何`TBitmap`直接在 FMX2 中访问内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T12:18:20.240

对于直接访问，您应该使用该[`Map`](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Types.TBitmap.Map)方法。该文档包含许多示例，例如[FMX.AlphaColorToScanline](http://docwiki.embarcadero.com/CodeExamples/XE3/en/FMX.AlphaColorToScanline_%28Delphi%29)：

```
function TForm1.TestAlphaColorToScanline(ABitmap: TBitmap;
  start, count: integer): TBitmap;
var
  bitdata1, bitdata2: TBitmapData;
begin
  Result := TBitmap.Create(Round(ABitmap.Width), Round(count));
  if (ABitmap.Map(TMapAccess.maRead, bitdata1) and
    Result.Map(TMapAccess.maWrite, bitdata2)) then
  begin
    try
      AlphaColorToScanline(@PAlphaColorArray(bitdata1.Data)
        [start * (bitdata1.Pitch div GetPixelFormatBytes(ABitmap.PixelFormat))],
        bitdata2.Data, Round(Result.Height * Result.Width),
        ABitmap.PixelFormat);
    finally
      ABitmap.Unmap(bitdata1);
      Result.Unmap(bitdata2);
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T02:58:33.897

这是 C++Builder 的示例（当前文档完全缺少此类）：

```
int X, Y;
TBitmapData bm;

// get bitmap data access !
if ( Image1->Bitmap->Map(TMapAccess::maReadWrite, bm) )
{
    unsigned int* data = (unsigned int*)bm.Data;

    // i.e. clear data with alpha color
    memset(data, 0,
    Image1->Width * Image1->Height * sizeof(unsigned int));

    // test direct pixel access here
    for (X = 20; X <= 200; X++)
    {
        for (Y = 10; Y <= 100; Y++)
        {
            //MyBitmap->Pixels[X][Y] = claLime;  // does not work anymore !
            bm.SetPixel(X, Y, claLime);
        }
    }

    // now write back the result !
    Image1->Bitmap->Unmap(bm);
}
else
{
    MessageDlg("Could not map the image data for direct access.",
    TMsgDlgType::mtWarning, TMsgDlgButtons() << TMsgDlgBtn::mbOK, 0);
} 
```

# mysql - 如何构建这个复杂的 sql？

> ID：15185504
> 
> 赞同：0
> 
> 时间：2013-03-03T12:12:21.473
> 
> 标签：mysql, sql, join

我有 2 张桌子

T1

```
ID | Name | IMAGE
------------------------
1    Peter  pic_111.jpg
2    Mark   pic222.jpg 
```

T2

```
ID1 | ID2 | message | timestamp 
```

如果彼得给马克发消息，彼得是ID1，马克是ID2，如果马克给彼得发消息，马克是ID1，彼得是ID2，

我想从 T1 中为 ID1 和 ID2 选择图像

从 mark 到某人或从某人到 Mark 的 `select ID1,ID2, message from T2 where ID1=2 OR ID2=2`所有消息返回所有从 mark 发送或发送到 mark 的消息

如何在此查询中包含 ID1 和 ID2 的图片？

`select ID1, ID2, message, image from T1, T2 where ID1=2 OR ID2=2 T1.ID=ID1`将是错误的，因为我需要 UID1 和 uid2 的图像...

因此，可以显示结束标记消息或标记已发送消息的人的图片...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:15:08.290

您需要加入`T1`两次才能获得`ID`每个发件人的相应信息`T2`。

```
SELECT  a.*,
        b.Image as ID1IMAGE, -- alias is needed to avoid ambiguous columns
        c.Image as ID2Image
FROM    T2 a
        INNER JOIN T1 b
            ON a.ID1 = b.ID
        INNER JOIN T1 c
            ON a.ID2 = c.ID
WHERE   2 IN (a.ID1, a.ID2)   -- the condition can be done like this. 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:24:29.470

您可以像这样在 SQL 中使用子查询

从 T1 中选择图像，其中 id 在（选择 ID1，ID2，来自 T2 的消息，其中 ID1=2 或 ID2=2）

我不确定在 where 之后使用 in 但您可以尝试使用 IN,ANY,ALL...

# javascript - 使用一个 CSS 选择网页外观而无需重新加载

> ID：15185511
> 
> 赞同：1
> 
> 时间：2013-03-03T12:12:48.930
> 
> 标签：javascript, html, css, less

### 问题

我需要重新设计现有 Web 应用程序的 CSS 结构。它支持“品牌”——它有 5 种不同的外观。每个用户都有一个指定的品牌，具体取决于他们工作的公司。

目前我们有一堆复杂的 CSS 文件，它们早已失控。一个典型的网页包括 4 个样式表，模板系统决定哪些。这意味着需要重新加载页面才能切换品牌。

一个新的 CSS 系统应该：

1.  基于 CSS 脚本，最好是 LESS 或 SaSS。
2.  在目标环境中只使用一个样式表。
3.  允许品牌在不重新加载页面的情况下进行 e̲a̲s̲i̲l̲y̲ 切换。

### 我的想法

在 CSS 脚本的帮助下，定义通用和基于品牌的规则：

```
p {
    /* general settings */
}

#brand1 p {
    /* include/redefine general settings, add some for brand1 */
}

#brand2 p {
    /* include/redefine general settings, add some for brand2 */
} 
```

`<div>`为整个主体创建一个外部并`id`使用 JavaScript 将其切换为`brand1`,`brand2`等。这样我不需要以任何方式编写 CSS 脚本，只需使用一行 JavaScript 切换所有元素的“上下文”。

我是一名 CSS 初学者，所以我想避免做一些完全错误的事情。请评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:29:27.173

我这样做：

### HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <title>Themed Website</title>            
    </head>
    <body>
        <div class="wrap">
            <div class="side">
                <ul>
                    <li><a href="#">Link 1</a></li>
                    <li><a href="#">Link 2</a></li>
                    <li><a href="#" class="active">Link 3</a></li>
                    <li><a href="#">Link 4</a></li>
                    <li><a href="#">Link 5</a></li>
                </ul>
            </div>
            <div class="main">
                <h1>Welcome</h1>
                <h2>A Paragraph</h2>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse.
                </p>
                <h2>A List</h2>
                <ul>
                    <li>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                    </li>
                    <li>
                        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>
                    </li>
                    <li>
                        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse.</p>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

### CSS

```
body {font-family: segoe ui; background: #fff;}
body .wrap {width: 90%; margin: auto; overflow: hidden;}
body .wrap .side {width: 25%; float: left;}
body .wrap .side ul {margin: 0; padding: 0; list-style: none;}
body .wrap .side ul li {margin: 0; padding: 0; list-style: none;}
body .wrap .side ul li a {text-decoration: none; padding: 5px; display: block;}
body .wrap .side ul li a:hover {background: #ccc; color: #0ff;}
body .wrap .side ul li a.active {background: #0fc; color: #000;}
body .wrap .main {width: 75%; float: right; background: #0fc;}
body .wrap .main h1 {margin: 0; padding: 0 10px 10px;}
body .wrap .main h2 {margin: 0; padding: 10px;}
body .wrap .main p {margin: 0 10px 5px; text-align: justify;}
body .wrap .main ul {margin: 0 10px 10px;} 
```

### 主题化

现在我们的工作将是识别主题组件。在这里，使用基本布局，我们只能主题化无序列表的颜色和列表样式。让我们先单独了解这些样式。作为初学者的教程，让我们只关注前景色和背景色，而不是布局。

让我们将第一个类命名`.light`为，相同的 CSS 将是：

```
.light {color: #333; background: #f5f5f5;}
.light .wrap .side ul li a {color: #666; background: #eee;}
.light .wrap .side ul li a:hover {color: #333; background: #ddd;}
.light .wrap .side ul li a.active {color: #333; background: #0ff;}
.light .wrap .main {background: #0ff;}
.light .wrap .main h1 {color: #333;}
.light .wrap .main h2 {color: #666; background: #0fc;}
.light .wrap .main p {color: #093;}
.light .wrap .main ul li p {color: #09c;} 
```

### JavaScript

现在要更改代码，我们需要添加三个链接或按钮来处理主题更改。所以，在 HTML 中，让我们添加这三个链接：

* * *

### HTML

```
<div class="wrap themelinks">
    <h4>Change Themes:</h4>
    <a href="" class="theme">No Theme</a>
    <a href="light" class="theme">Light</a>
    <a href="grayscale" class="theme">Grayscale</a>
</div> 
```

### CSS

```
.wrap.themelinks {background: #fff; border-radius: 10px; clear: both; overflow: hidden; margin-top: 25px;}
.wrap.themelinks h4 {margin: 0; padding: 10px;}
.wrap.themelinks .theme {margin: 0 10px 10px; padding: 3px 5px; display: inline-block; background: #eee; border-radius: 5px; text-decoration: none; color: #f90}
.wrap.themelinks .theme:hover {background: #f90; color: #fff;} 
```

### jQuery

```
$(document).ready(function(){
    $(".theme").click(function(){
        var theClass = $(this).attr("href");
        $("body").removeAttr("class").addClass(theClass);
        return false;
    });
}); 
```

### 演示

您可以查看[jsBin](http://jsbin.com/welcome/21192)中的工作演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:24:13.390

对于一个元素，我会这样做：

```
div {
    /* general settings */
}

div.band1 {
    /* include general settings, add some for brand1 */

    /* redefine general settings, add some for brand1 */
    font-weight: bold !important;
}

div.band2 {
    /* ... */
} 
```

更多元素（[演示](http://jsbin.com/edukaj/1/)）：

```
h1{
  font-weight: bold;
  color:green;
}
.band1 h1{
  background-color:red;
  color: white;
}
.band2 h1{
 background-color:yellow;
}
.band1 .head2{
  background-color:red;
}
.band2 .head2{
 background-color:yellow;
}
.band1 #text{
  background-color:red;
}
.band2 #text{
 background-color:yellow;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:18:40.620

`class`创建一个单一的、无品牌的样式表，用于定义页面的总体布局，然后定义因元素而异的品牌特定规则，`<body>`例如：

```
/* Layout area */
#header {
    height: 50px;
    margin: 0.2em; }

etc...

/* Brand A rules */
.brandA #header {
    background-image: url("brandALogo.png"); }
.brandA #footer {
    background-color: purple; }

/* Brand B rules */
.brandB #header {
    background-image: url("brandBLogo.png"); }
.brandB #footer {
    background-color: orange; } 
```

...所以你不需要重新定义任何东西。

然后用一个简单的脚本客户端将`class`属性更改`<body>`为“ `brandA`”或“ `brandB`”。

我建议不要使用该`id`属性，因为作为身份属性，它在文档中应该是静态且不变的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T12:28:36.633

独立定义布局，然后定义所有相同的东西，比如说形状和整体用户体验......然后为最后的触摸使用更深的选择器，如下所示：

每个品牌的页面样式应该有一个额外的外部选择器，例如连接到页面外部包装器的 id，因此对于开始事物外部包装器（或主体，altoho，我不推荐这样做）应该是 id="default"。 ..默认在css中应该没有任何引用，然后应该在css中选择所有其他品牌，以便body具有id =“brand1”或“brand2”等。

在 Interaction 中，您只需执行以下操作即可更改品牌：

```
$(wrapper selector).attr('id', 'brandX'); 
```

发生的事情是 - css 重新渲染页面以容纳其他更深的选择器，因为添加了一个外部 DOM 容器，因此比默认容器更重要。

以这种方式更改选择器使您能够根据自己的喜好微调页面，假设 css3 和任何 DOM 操作 js 引擎都是您的全部专业知识：D

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-03T12:20:48.943

您还可以动态加载 css（例如，如果您想根据某些参数生成 css）。用这行代码来做：

```
$('head').append('<link rel="stylesheet" href="style2.css" type="text/css" />'); 
```

另一个好处是用户不需要下载他不想要的所有品牌的所有样式表

# ajax - 当 ajax 发布成功时，我想刷新一个特定的 在页面中

> ID：15185515
> 
> 赞同：0
> 
> 时间：2013-03-03T12:13:30.523
> 
> 标签：ajax, html, jquery

我想在 ajax 成功时刷新一个特定的 div，我使用下面的代码，但整个页面都被刷新了。

```
<script type="text/javascript">
$('#post_submit').click(function() {
  var form_data = {
    csrfsecurity: $("input[name=csrfsecurity]").val(),
    post_text: $('#post_text').val()    
  };

  $.ajax({
    url: "<?php echo site_url('/post_status'); ?>",
    type: 'POST',
    data: form_data,
    success: function(response){
      $(".home_user_feeds").html("markUpCreatedUsingResponseFromServer");
    }
    return false;
  });
  return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:17:31.557

`return false`您在块内有一个额外的内容，`$.ajax`这很可能会导致错误，因此您的表单不会通过 ajax 提交。如果你删除它，你不应该有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:19:22.737

从 $.ajax 函数中删除 return false 。它是一个语法错误。$.ajax 函数只需要一个 json 对象作为参数。“return false”不能是 json 对象的一部分。您应该在测试期间始终保持 JavaScript 控制台打开 - 在 Chrome 中按 Ctrl-Shift-J 并选择控制台以查看任何 JS 错误。

还建议您使用`<input type=button>`代替`<input type=submit>`或`<button></button>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:18:17.163

使用`submit`表单的事件并`return false`从 ajax 回调中删除：

```
$('#myFormId').on('submit', function() {

    var form_data = {
        csrfsecurity: $("input[name=csrfsecurity]").val(),
        post_text: $('#post_text').val()    
    };

    $.ajax({
        url: "<?php echo site_url('/post_status'); ?>",
        type: 'POST',
        data: form_data,
        success: function(response){
            $(".home_user_feeds").html("markUpCreatedUsingResponseFromServer");
        }
    });
    return false;
}); 
```

# objective-c - 应用程序进入后台后，NSString 假定随机值

> ID：15185517
> 
> 赞同：1
> 
> 时间：2013-03-03T12:13:41.077
> 
> 标签：objective-c, memory-management

我有一个带有 ARC 的 ios 窗口应用程序我有一个全局标题，用于存储游戏的实际语言

```
//in Global.h
NSString *language;
NSDictionary *dict;

//in viewDidLoad i have
language=@"en"; 
```

应用程序进入后台后，当我重新激活应用程序时，我放了一个

```
NSLog(@"%@",language); // and the result is "<" 
```

其他 NSDictionary 是正确的。为什么？我怎样才能摆脱这个错误？谢谢

# python - Heroku Python：设置和获取 cookie 的正确方法是什么？

> ID：15185519
> 
> 赞同：0
> 
> 时间：2013-03-03T12:13:56.787
> 
> 标签：python, cookies, heroku, localhost

我见过很多设置方法：

```
# store in a cookie
cookie = Cookie.SimpleCookie()
cookie['lat'] = lat
cookie['lon'] = lon
# expires in one hour
cookie['lat']['expires'] = time.time() + 1 * 24 * 3600 
cookie['lon']['expires'] = time.time() + 1 * 24 * 3600 
print cookie 
```

并检查：

```
cookie = Cookie.SimpleCookie()
cookie.load(os.environ.get('HTTP_COOKIE'))
lat = float(cookie['lat'].value)
lon = float(cookie['lon'].value) 
```

但他们似乎都没有在我的本地主机上工作。这是我的代码的功能还是在本地主机上。我以前没有做过很多带 cookie 的开发工作，而且我真的不知道存储用户登录数据和我的应用程序数据等内容的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:08:26.827

您将 os.environ 与当前请求的环境混淆了。它们是完全不同的东西。os environ 对于您的机器来说是本地的，它与网络服务器无关。

对于您正在寻找的环境，当它处理请求时，您需要位于 Web 服务器内部。

也许这会有所帮助：[http ://en.wikipedia.org/wiki/Http_request#Technical_overview](http://en.wikipedia.org/wiki/Http_request#Technical_overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:59:53.960

通过 url 重定向解决了这个问题：

```
from flask import make_response, redirect, url_for

response = make_response(redirect('/'))

lat = request.form['lat']
lon = request.form['lon']
response.set_cookie('lat', lat)
response.set_cookie('lon', lon)

return response 
```

这是获取cookie的方法：

```
lat = float(request.cookies['lat'])
lon = float(request.cookies['lon']) 
```

# facebook - 如何获取 Facebook UID 的事件？

> ID：15185521
> 
> 赞同：0
> 
> 时间：2013-03-03T12:14:06.723
> 
> 标签：facebook, events, search

我正在开发一个带有`PHP Facebook SDK`. 我通过图表获取一个地方的所有事件，并通过代码在网站上显示它们：

```
$evt=$facebook->api('/search?fields=name,description,location,start_time,end_time&q='.urlencode($var[0]).'+'.$_GET['tipo'].'&type=event&limit=500&since=today&until='.$dq); 
```

这可行，但我有这个问题：在网站上，我还通过 Facebook 登录获得了网络用户的 Facebook ID，并将其 id 存储到我的`MySQL`Database table 中`pnota_USERS`。

要获取存储在我的数据库中的 Facebook ID 的所有事件，我使用以下代码：

```
$db_host=modGoogleResHelper::db_host($params);
$db_pass=modGoogleResHelper::db_pass($params);
$db_user=modGoogleResHelper::db_user($params);
$db_name=modGoogleResHelper::db_name($params);

$db=mysql_connect($db_host,$db_user,$db_pass) or die("errore nella connessione al database");

mysql_select_db(db_name);
$query="select * from pnota_users where facebook_id<>'' or facebook_id<>null";
$riga="";
$ret=mysql_query($query,$db);
if(mysql_affected_rows()>0){
while($row=mysql_fetch_array($ret))
{
$riga.=$row['facebook_id'].";";
}
mysql_free_result($ret);
}
$query="";
$rrx=explode(";",$riga);

foreach($rrx as $kkx)
{
if($kkx!="")
{
$zzz= $facebook->api('/'.$kkx.'/events', 'get', array("fields"=>"id, owner, name,location"));
print_r($zzz);
$fql = "SELECT name, location, start_time,end_time,eid FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid =".$kkx.") and start_time >='".$today."' and start_time<='".$tomorrow."' order by start_time desc" ;
$ret_objxx = $facebook->api(array(
'method'    =>'fql.query',
'req_perms' => 'friends_events,publish_stream,read_friendlists,email,user_events,manage_friendlists,rsvp_event,manage_notifications,user_online_presence',
'query'     => $fql) );

foreach($ret_objxx as $keyxx)
    {
$item=array("eid" => keyxx[eid],"name"=>'.',"start_time"=>$keyxx[start_time],"end_time"=>$keyxx[end_time],"timezone"=>'-',"location"=>$keyxx[location]);
array_push($events,$item);
    }
    }
    } 
```

此 FQL 没有显示结果。我尝试将查询 FQL 直接放到 Graph API Explorer 中：在 Graph API Explorer 中，如果我在右上角选择，应用程序 Graph API Explorer 会显示结果。如果我在右上角的 Graph API Explorer 中选择，`iprimanota`作为我的应用程序名称的应用程序 Graph API Explorer 不会向我显示结果。

我的问题是这样的：

我使用了错误的许可

# shell - 在 Capistrano 中处理输入提示的正确方法？

> ID：15185530
> 
> 赞同：2
> 
> 时间：2013-03-03T12:15:11.560
> 
> 标签：shell, automation, capistrano, apt-get

处理由我通过 Capistrano 运行的命令触发的输入提示的正确方法是什么？

一个例子是`iptables-persistent`我使用`aptitude`. 尽管有`--no-gui`标志，但仍会出现提示，要求我确认我希望如何配置。

有没有办法通过命令行传递参数来避免这样的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T01:24:40.080

我发现并能够从以下位置实现这个非常有用的 handle_command_with_input 方法：

[https://github.com/nesquena/cap-recipes/blob/master/lib/cap_recipes/tasks/utilities.rb](https://github.com/nesquena/cap-recipes/blob/master/lib/cap_recipes/tasks/utilities.rb)

```
def handle_command_with_input(local_run_method, shell_command, input_query, response=nil)
send(local_run_method, shell_command, {:pty => true}) do |channel, stream, data|
  if data =~ input_query
    if response
      logger.info "#{data} #{"*"*(rand(10)+5)}", channel[:host]
      channel.send_data "#{response}\n"
    else
      logger.info data, channel[:host]
      response = ::Capistrano::CLI.password_prompt "#{data}"
      channel.send_data "#{response}\n"
    end
  else
    logger.info data, channel[:host]
  end
end
end 
```

没有一个代码是我的。格拉西亚斯·内斯奎纳。

# c# - 使用 NewtonSoft 将 JSON 反序列化为 .net 对象 - 数组

> ID：15185534
> 
> 赞同：2
> 
> 时间：2013-03-03T12:15:30.873
> 
> 标签：c#, asp.net, arrays, json, json.net

```
{
  "albums": [
    {
      "name": "Muse",
      "permalink": "Muse",
      "cover_image_url": "http://image.kazaa.com/images/69/01672812 1569/Yaron_Herman_Trio/Muse/Yaron_Herman_Trio-Muse_1.jpg",
      "id": 93098,
      "artist_nam e": "Yaron Herman Trio"
    }, 
```

}

如何获取“专辑”中包含的“名称”的值？请帮忙！有什么具体的方法可以做到吗？查看了 api 并尝试了但仍停留在检索值上！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:20:44.653

只是将您的 json 反序列化到您的对象中。

使用`JsonConvert.DeserializeObject<objectType>(jsonString);`

例如; 你有一堂课

```
Public class Album
{
public string name {get;set;}
public string permalink {get;set;},
public string cover_image_url {get;set;}
public int id {get;set;}
public string artist_name{get;set}
} 
```

另一个班级

```
public class Albums
{
List<Album> albums{get;set;}
} 
```

然后只需使用

```
 var albums=JsonConvert.DeserializeObject<Albums>(jsonString); 
```

现在专辑包含专辑对象的列表，因此现在您可以从那里获取任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T15:53:05.460

确保您的集合变量被声明为公共的。例如：

```
public class Albums
{
   public List<Album> albums{get;set;}
} 
```

# sql-server-2008 - Concat 导致单个字符串在存储过程中返回空值

> ID：15185536
> 
> 赞同：-1
> 
> 时间：2013-03-03T12:15:49.783
> 
> 标签：sql-server-2008, tsql, concatenation

在我的存储过程中，我将结果连接成一个字符串，例如：

```
Problem1|Problem2|Problem3 
```

当我尝试存储在变量`@display`中时，它返回 null。当我运行查询而不将其存储到变量时，它会返回结果。不知道为什么它返回null？

```
declare @display nvarchar(500)

select 
@display =  @display + gp2.ProblemDesc  + '|' 
from (SELECT gp.GrantProblemID, gp.ProblemDesc, gps.GrantProblemStatus, row_number() over (partition by gp.grantproblemid order by p.periodid desc) ranking from MergedProgressReport.dbo.[PeriodAgencyGrantProblems] pagp 
inner join MergedProgressReport.dbo.PeriodAgencyGrants pag on pag.PeriodAgencyGrantsID = pagp.PeriodAgencyGrantID and pag.GrantNumber =  '2011UMWX0001'
inner join MergedProgressReport.dbo.periodagencyinfo pai on pag.PeriodAgencyInfoID = pai.PeriodAgencyInfoID  inner join MergedProgressReport.dbo.Periods p on p.PeriodID = pai.PeriodID  
inner join MergedProgressReport.dbo.GrantProblemStatus gps on pagp.GrantProblemStatusID = gps.GrantProblemStatusID inner join MergedProgressReport.dbo.GrantProblems gp on pagp.GrantProblemID = gp.GrantProblemID and gp.GrantProblemAreaID = 7) xx
right join MergedProgressReport.dbo.GrantProblems gp2 on xx.GrantProblemID = gp2.GrantProblemID and xx.ranking = 1 where gp2.GrantProblemAreaID = 7

Select @display 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:26:12.717

试试这个。可能您需要初始化变量。

```
declare @display nvarchar(500)
set @display = '' 
```

简而言之，您`set`在声明变量后编写查询之前缺少该语句。

# jquery - 悬停点的浮动半径

> ID：15185537
> 
> 赞同：1
> 
> 时间：2013-03-03T12:15:55.310
> 
> 标签：jquery, flot

Flot 显示当悬停在数据点上时，会显示该点的透明扩展。例如看看这里：

[http://jsfiddle.net/subhaze/UtcBK/embedded/result/](http://jsfiddle.net/subhaze/UtcBK/embedded/result/)

是否可以修改此悬停效果？我不希望它的半径那么大。

```
Thanks! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T17:13:08.577

我也有同样的问题。我检查了 Ryley 提到的 drawPointHighlight 函数，发现 Flot 使用以下公式计算半径：

```
var pointRadius = series.points.radius + series.points.lineWidth / 2; 
```

为了能够控制半径而无需编辑插件本身，您可以在选项中指定半径（为了清楚起见，我删除了其他选项）：

```
var plot = $.plot($("#placeholder"),[d], {
           series: {
               points: { radius: 1 }
           }
         }); 
```

然而，这意味着您将控制点本身的大小。希望这有帮助。

[http://jsfiddle.net/neQUt/](http://jsfiddle.net/neQUt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T12:44:22.107

更改点系列的半径，这也会影响悬停本身的半径。

像这样的东西：

点：{半径：1}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T17:16:16.547

你无法控制这一点，除非你愿意编辑 flot 的源代码。Flot 0.7 中的相关区域是函数`drawPointHighlight`。您可能想要更改`radius`变量...

# c# - 如何通过单击按钮 C# 在窗口窗体应用程序中播放音乐

> ID：15185538
> 
> 赞同：0
> 
> 时间：2013-03-03T12:16:14.540
> 
> 标签：c#

我想创建一个按钮，当用户单击按钮时，应用程序可以播放音乐（以嵌入式方式或外部方式播放都可以）我只是c＃的菜鸟，只知道如何创建按钮任何人都知道如何编码吗？

我找到了一种运行 wav 文件的方法

```
My.Computer.Audio.Play("wave.wav", AudioPlayMode.WaitToComplete) 
```

但是，我已将 Microsoft.VisualBasic.dll 和“Microsoft.DirectX.AudioVideoPlayback.dll 添加到引用中，MY 仍未定义。

这是我的按钮功能

```
private void musicbutton_Click(object sender, EventArgs e)
{

    {
        SoundPlayer snd = null;

            Stream str = Properties.Resources.mysong;
            snd = new SoundPlayer(str);
            snd.Play();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:19:38.013

```
SoundPlayer snd = null;

private void musicbutton_Click(object sender, EventArgs e) {
    Stream str = Properties.Resources.mySoundFile;
    snd = new SoundPlayer(str);
    snd.Play();
} 
```

将 wav 文件导入您的项目资源！

# c# - 在 C# 中获取数组边界外的索引

> ID：15185540
> 
> 赞同：0
> 
> 时间：2013-03-03T12:16:31.910
> 
> 标签：c#

该程序应该显示目录的路径和目录（如果存在），那么它还应该显示内部具有以下扩展名的文件（即 .doc、.pdf、.jpg、.jpeg）但我收到错误

> *指数数组的边界之外。

在这行代码上

```
string directoryPath = args[0]; 
```

这是主函数中的代码

```
 class Program
    {
        static void Main(string[] args)
        {

                string directoryPath = args[0];
                string[] filesList, filesListTmp;
                IFileOperation[] opList = { new FileProcNameAfter10(),
                                            new FileProcEnc(),
                                            new FileProcByExt("jpeg"),
                                            new FileProcByExt("jpg"),
                                            new FileProcByExt("doc"),
                                            new FileProcByExt("pdf"),
                                            new FileProcByExt("djvu")
                                            };
                if (Directory.Exists(directoryPath))
                {
                    filesList = Directory.GetFiles(directoryPath);
                    while (true)
                    {
                        Thread.Sleep(500);
                        filesListTmp = Directory.GetFiles(directoryPath);
                        foreach (var elem in Enumerable.Except<string>(filesListTmp, filesList))
                        {
                            Console.WriteLine(elem);
                            foreach (var op in opList)
                            {
                                if (op.Accept(elem)) op.Process(elem);
                            }
                        }
                        filesList = filesListTmp;
                        if (Console.KeyAvailable == true && Console.ReadKey(true).Key == ConsoleKey.Escape) break;
                    }
                }
                else
                {
                    Console.WriteLine("There is no such directory.");

                }

        }
    } 
```

我该如何处理这个错误，它似乎很常见，但它以不同的方式发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:31:27.370

您需要在运行程序时将必要的参数传递给程序。您可以通过从命令行运行程序来执行此操作，或者在运行 Visual Studio 时执行以下操作：

1.  右键单击项目
2.  特性
3.  调试标签
4.  在开始选项 -> 命令行参数下输入参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:35:16.200

您可能希望从命令行将参数传递到程序中。

像这样：

`> yourProgram.exe directoryName`

另外，为了避免代码中出现此类问题，

```
if(args.Length > 0){
  string directoryPath = args[0];
}else{
  //print a help message and exit, or do something like set the 
  //default directoryPath to current directory
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:39:27.893

您希望用户在程序启动时或启动程序时输入路径吗？如果是第一个，那么您应该添加一个 Console.Read() 方法来询问路径。

如果是后者，则需要在启动程序时将路径作为参数传递。您还应该在读取 args 数组之前对其进行检查，以检查它是否包含数据并且该数据是有效路径。

就像是：

```
 if(args.Length > 0 && Directory.Exists(args[0]))
 {
   // Do Something.
 } 
```

# heroku - Heroku 流星/陨石部署

> ID：15185545
> 
> 赞同：0
> 
> 时间：2013-03-03T12:17:20.683
> 
> 标签：heroku, meteor, meteorite

我有一个在版本控制下使用陨石创建的流星项目，我正在尝试使用 heroku buildpack [oortcloud/heroku-buildpack-meteorite](https://github.com/oortcloud/heroku-buildpack-meteorite)将其部署到 Heroku，但出现此错误：

```
!     Heroku push rejected, no Cedar-supported app detected 
```

是构建包有问题还是我的应用程序需要额外配置？，这是我第一次将应用程序部署到heroku，所以我不太熟悉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T13:17:48.953

正如我在问题中提到的，我对 Heroku 很陌生，这次我犯了一个愚蠢的错误。
在 buildpackage 文档中它说你只需要使用`heroku create --stack cedar --buildpack https://github.com/oortcloud/heroku-buildpack-meteorite.git`command 然后`git push`. 我没有意识到该命令在 heroku 中创建了一个新应用程序，而我已经创建了我的应用程序。

所以解决方案是：

```
heroku config:add BUILDPACK_URL=https://github.com/oortcloud/heroku-buildpack-meteorite.git 
```

# imagemapster - ImageMapster，演示，示例

> ID：15185550
> 
> 赞同：0
> 
> 时间：2013-03-03T12:18:16.357
> 
> 标签：imagemapster

我找到了这个 ImageMapster

我想重建类似于[USA MAP Demo的代码](http://www.outsharked.com/imagemapster/default.aspx?demos.html#usa)

我不明白如何定义区域？

我找到了这个，但我不明白源代码：

我怎样才能得到坐标？哪个程序为我提供了这些功能？ [JSFiddle](http://jsfiddle.net/juvyh/)

coords="259,256,275,257,298,258,296,275,296,288,296,289,299,292,301,293,302,293,302,291,303,293,305,293 ,305,291,307,293,306,295,309,296,311,296,314,296,316,298,317,296,320,297,322,299,323,299,323,301,324 ,302,326,300,327,300,329,300,329,302,333,304,334,303,335,300,336,300,337,302,340,302,343,303,345,304 ，347,303,347,301,350,301,351,302,353,300,354,300,355,302,358,302,359,300,360,300,362,302,364,304,366,304,368,305,370,307,372,305,374,306,374,314,374,321,375,329,376,331,377,334,378,338,381,341,381,344,382,344,381,350,379,354,380,356,380,358,380,363,378,365,379,368,374,369,367,372,366,374,364,375,362,376,362,377,358,380,356,382,352,385,347,386,343,389,342,390,338,392,335,393,332,397,329,397,329,398,330,400,329,404,329,407,328,410,327,413,328,415,329,420,329,425,331,426,330,428,328,429,324,426,320,425,319,425,317,425,314,423,310,422,304,419,302，417,302,412,299,411,299,409,299,409,299,406,299,406,298,405,299,402,298,400,296,399,293,396,290,392,287,389,287,388,284,379,283,376,282,374,282,374,278,370,275,368,275,367,274,365,269,365,263,364,261,362,258,364,255,365,254,367,253,370,250,374,248,376,246,375,245,374,243,374,241,372,241,372,239,371,236,369,230,363,229,360,229,354,227,350,226,347,224,347,224,345,221,344,219,342,214,337,213,335,210,332,209,329,207,327,206,327,205,323,211,324,232,326,253,327,254,310,257,270,259,256,260,256" >224,345,221,344,219,342,214,337,213,335,210,332,209,329,207,327,206,327,205,323,211,324,232,326,253,327,254,310,257,202,259,2224,345,221,344,219,342,214,337,213,335,210,332,209,329,207,327,206,327,205,323,211,324,232,326,253,327,254,310,257,202,259,2

```
<area href="#" state="NH" full="New Hampshire" shape="rect" coords="512,29,586,44">
<area href="#" state="VT" full="Vermont" shape="rect" coords="543,49,586,62">
<area href="#" state="MA" full="Massachusetts" shape="rect" coords="515,68,585,80">
<area href="#" state="RI" full="Rhode Island" shape="rect" coords="650,149,711,161">
<area href="#" state="CT" full="Connecticut" shape="rect" coords="655,167,711,179">
<area href="#" state="NJ" full="New Jersey" shape="rect" coords="656,185,711,198">
<area href="#" state="DE" full="Delaware" shape="rect" coords="665,204,711,216">
<area href="#" state="MD" full="Maryland" shape="rect" coords="667,223,711,235">
<area href="#" state="DC" full="District of Columbia" shape="rect" coords="654,239,711,252">
<area href="#" state="WV" full="West Virginia" shape="rect" coords="649,257,711,270">
<area href="#" state="SC" full="South Carolina" shape="poly" coords="551,314,551,314,548,314,548,312,547,310,545,308,544,308,542,304,540,299,537,299,536,297,535,295,533,293,532,293,530,290,528,289,524,287,524,287,523,284,522,284,520,280,518,280,515,278,513,277,513,276,5 
```

等等..

啊，你必须定义所有像素，对吧？你会建议哪个程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:11:05.783

在“如何制作图像映射”下查看此处：

[http://www.outsharked.com/imagemapster/default.aspx?faq.html](http://www.outsharked.com/imagemapster/default.aspx?faq.html)

这是我所知道的最简单的方法：

[http://www.image-mapper.com/](http://www.image-mapper.com/)

已经有很多图像地图由常见的东西组成，比如你可以用谷歌轻松找到的地理地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:43:44.327

有很多程序可以生成图像映射。例如，quantum gis（带有 html imagemap 插件）（[http://www.qgis.org](http://www.qgis.org)）可以免费导出 imagemap。如果您的图像地图是平面图、艺术图纸等，请尝试使用 mapedit ( [http://www.boutell.com/mapedit/](http://www.boutell.com/mapedit/) )，价格约为 15 美元。

# css - 有没有办法将边框插入到对象的高度？

> ID：15185561
> 
> 赞同：0
> 
> 时间：2013-03-03T12:18:56.717
> 
> 标签：css, object, height, border

我正在开发一个使用网站控制机器的项目，我目前正在研究 css 样式表。我现在有这个脚本：

```
 <html>
    <head>
        <title>Machine overview V1</title>
        <meta charset="utf-8"/>
</head>
<body>
    <header>
<h1>Machine overview</h1>
</header>
    <section>
</section>
    <footer>
</footer>
</body>
</html> 
```

现在让我们说：

```
header{height:15%;width:100%;}
section{height:80%;width:100%;}
footer{height:5%;width:100%;} 
```

但是当你添加一个

```
border:1px solid black; 
```

对于这些属性中的任何一个，它都会弄乱以 % 为单位的高度，
这基本上会弄乱页面的整个布局。
我不能强制 npx 中的高度，因为它必须使用不同的分辨率看起来不错。
**有没有办法将边框插入到对象的高度？**
就像您可以插入 box-shadow 一样...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:21:50.413

您想将容器设置为`box-sizing:border-box;`

```
.borderInside {
  box-sizing:border-box;
  -moz-box-sizing:border-box;
  -webkit-box-sizing:border-box;
  border:1px solid red;
} 
```

# macos - /usr/bin/ssh-copy-id: line 1: ucgi:: command not found

> ID：15185566
> 
> 赞同：6
> 
> 时间：2013-03-03T12:19:58.497
> 
> 标签：macos, ssh, chmod

我按照[http://www.devthought.com/2009/09/19/get-ssh-copy-id-in-mac-os-x/](http://www.devthought.com/2009/09/19/get-ssh-copy-id-in-mac-os-x/)上的说明让 ssh-copy-id 在我的 mac 上工作. 现在我在运行时遇到错误：`ssh-copy-id`

```
/usr/bin/ssh-copy-id: line 1: ucgi:: command not found
stat: script:: stat: No such file or directory
stat: No: stat: No such file or directory
stat: such: stat: No such file or directory
stat: file: stat: No such file or directory
stat: or: stat: No such file or directory
stat: directory: stat: No such file or directory 
```

我尝试按照此处的说明进行操作：[https](https://github.com/beautifulcode/ssh-copy-id-for-OSX) ://github.com/beautifulcode/ssh-copy-id-for-OSX但每次运行时都会`ssh-copy-id`遇到相同的错误。如何解决我的情况并开始`ssh-copy-id`正常工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-18T10:54:31.770

恕我直言，就像您在 Mac 上一样，最简单的方法是使用 brew。

```
brew install ssh-copy-id 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-03T12:25:57.127

使用以下命令

```
sudo curl https://raw.githubusercontent.com/beautifulcode/ssh-copy-id-for-OSX/master/ssh-copy-id.sh -o /usr/local/bin/ssh-copy-id
sudo chmod +x /usr/bin/ssh-copy-id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T12:25:06.660

第一个链接中引用的存储库已损坏。

尝试以这种方式安装它：

```
sudo curl https://raw.github.com/beautifulcode/ssh-copy-id-for-OSX/master/ssh-copy-id.sh -o /usr/local/bin/ssh-copy-id
sudo chmod +x /usr/local/bin/ssh-copy-id 
```

# c# - 鼠标悬停帮助提示和控件正面的动态无效凭据通知

> ID：15185567
> 
> 赞同：-1
> 
> 时间：2013-03-03T12:20:11.660
> 
> 标签：c#, hover

我是 C# 表单编程的初学者。我有两个问题

1.  当用户将鼠标移至控件时，如何显示帮助片段，并且当用户将鼠标移开时片段会立即消失。我不确定这种控件的技术名称是什么，无论是悬停还是什么。

2.我不希望用户在按下提交按钮时知道无效的登录凭据。它应该是动态的，如果文本框中的输入错误，文本框前面会有一个红色的通知，说输入无效。当然，如果用户输入正确，它应该消失。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:32:31.493

对于问题 1，您需要一个工具提示。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip(v=vs.71).aspx)

对于问题 2，您应该查找文本框的 key_press 事件。虽然如果用户名/密码组合不正确，您使用它来动态更新用户，这不是一个好主意。

例如，如果您使用它来验证用户名中所需的最少字符数，那么这没关系。

# shell - Mongodb shell mongo：每个套接字地址（协议/网络地址/端口）通常只允许使用一次。对于套接字：0.0.0.0:27017

> ID：15185572
> 
> 赞同：14
> 
> 时间：2013-03-03T12:20:37.950
> 
> 标签：shell, mongodb, powershell

前两天还好好的，现在`mongod`不行了。甚至`echo ps -A | grep mongo`什么也没打印，但它警告错误：“每个套接字地址只使用一次”。怎么杀那个？我也尝试过使用不同的随机端口。他们怎么会失败呢？

```
D:\mongodb-win32-x86_64-2.2.3\bin>mongod
mongod --help for help and startup options
Sun Mar 03 18:10:03 [initandlisten] MongoDB starting : pid=6292 port=27017 dbpat
h=\data\db\ 64-bit host=Sadaf
Sun Mar 03 18:10:03 [initandlisten] db version v2.2.3, pdfile version 4.5
Sun Mar 03 18:10:03 [initandlisten] git version: f570771a5d8a3846eb7586eaffcf4c2
f4a96bf08
Sun Mar 03 18:10:03 [initandlisten] build info: windows sys.getwindowsversion(ma
jor=6, minor=1, build=7601, platform=2, service_pack='Service Pack 1') BOOST_LIB
_VERSION=1_49
Sun Mar 03 18:10:03 [initandlisten] options: {}
Sun Mar 03 18:10:03 [initandlisten] journal dir=/data/db/journal
Sun Mar 03 18:10:03 [initandlisten] recover : no journal files present, no recov
ery needed
Sun Mar 03 18:10:04 [initandlisten] ERROR: listen(): bind() failed errno:10048 O
nly one usage of each socket address (protocol/network address/port) is normally
 permitted. for socket: 0.0.0.0:27017
Sun Mar 03 18:10:04 [websvr] ERROR: listen(): bind() failed errno:10048 Only one
 usage of each socket address (protocol/network address/port) is normally permit
ted. for socket: 0.0.0.0:28017
Sun Mar 03 18:10:04 [initandlisten] now exiting
Sun Mar 03 18:10:04 dbexit:
Sun Mar 03 18:10:04 [initandlisten] shutdown: going to close listening sockets..
.
Sun Mar 03 18:10:04 [initandlisten] shutdown: going to flush diaglog...
Sun Mar 03 18:10:04 [initandlisten] shutdown: going to close sockets...
Sun Mar 03 18:10:04 [initandlisten] shutdown: waiting for fs preallocator...
Sun Mar 03 18:10:04 [initandlisten] shutdown: lock for final commit...
Sun Mar 03 18:10:04 [initandlisten] shutdown: final commit...
Sun Mar 03 18:10:04 [initandlisten] shutdown: closing all files...
Sun Mar 03 18:10:04 [initandlisten] closeAllFiles() finished
Sun Mar 03 18:10:04 [initandlisten] journalCleanup...
Sun Mar 03 18:10:04 [initandlisten] removeJournalFiles
Sun Mar 03 18:10:04 [initandlisten] shutdown: removing fs lock...
Sun Mar 03 18:10:04 dbexit: really exiting now

D:\mongodb-win32-x86_64-2.2.3\bin>echo ps -A | grep mongo

D:\mongodb-win32-x86_64-2.2.3\bin> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-04-18T09:47:01.213

在命令提示符中键入以下命令

```
netstat -a -n -o | find "27017" 
```

这将列出所有使用端口“27017”的进程以及 PID。

使用“27017”找到 PID。例如，如果 PID 是 10580，杀死它

```
taskkill /f /pid 10580 
```

现在开始mongo。希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-27T17:19:09.957

尝试在不同的端口上启动 mongo：http: [//docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--port](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--port)

要确定您可以使用哪个端口，请执行 Sriukanth Venugopalan 提到的命令，它将列出当前正在使用的端口。

问候， 莫西

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-05T10:35:56.670

1.  `Administrator`在模式下打开命令提示符
2.  跑`net stop MongoDB`

# java - 在 C# 中使用 Java 类时找不到类异常

> ID：15185576
> 
> 赞同：0
> 
> 时间：2013-03-03T12:20:51.430
> 
> 标签：java, .net, deserialization, classnotfoundexception, ikvm

我通过为此类制作 a将 a 转换**`java's class`**为**`dll`**using ，然后我用来进行转换操作。此操作成功完成，没有错误或警告。然后我将带有和（DLL）的（DLL）添加到我的项目中。然后我重建了项目，到目前为止没有错误，没有警告，没有发生崩溃。但是当我试图从它的类型中反序列化一个对象的数组列表时，我得到一个例外是：。代码是：**`IKVM`****`jar file`****`IKVM`**`'IKVM.GNU.Classpath.dll'``'IKVM.Runtime.dll'`**`java.lang.ClassNotFoundException: "MyClass" not found in java.lang.ClassLoader... my deserliazation`**

```
 object deserializedObject = null;               
 java.io.ObjectInputStream ina = new java.io.ObjectInputStream(new java.io.FileInputStream(@"D:\130043674485690000.txt"));
 deserializedObject = ina.readObject();
 ina.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:54:35.777

第一：您应该为新项目使用当前版本的 IKVM。文件名表明您使用的是非常旧的 IKVM 版本。

第二：您需要使用 IKVM 中的所有 dll。如果一切正常，那么您可以删除一些未使用的 dll。

第三：如果您确实静态引用了 dll/jar 文件的类，那么您需要动态加载它。有关详细信息，请参阅[wiki](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Convert_a_jar_file_to_a_dll_and_use_it_as_library)。

# c++ - 对 std::pair 的向量进行排序

> ID：15185579
> 
> 赞同：1
> 
> 时间：2013-03-03T12:21:08.507
> 
> 标签：c++, sorting, vector, struct

我需要为向量排序定义一个比较器函数：

```
 class Sched
    {
    public:
    struct Op
    {
      // some data
    };
    typedef std::pair<Op*,Clk> OpSchedule;
    void genSched() { std::sort(m_mappedOp.begin(),m_mappedOp.end(),cmp)}

    private:
    std::vector<OpSchedule> m_mappedOp;
    bool cmp(const OpSchedule& l,const OpSchedule& r)
    {
      return l.second< r.second;
    } 
```

我得到编译错误：

```
function call missing argument list; use '&Sched::cmp' to create a pointer to member. 
```

有人可以建议如何解决这个问题以及错误的原因是什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T12:23:08.370

`cmp`是非`static`成员函数。必须在某个对象上调用它。要获得指向该成员函数的指针，您需要按照错误所述执行操作`&Sched::cmp`，但是您需要将其绑定到某些类型为`Sched`^(†</sup> 的对象。)

但是，没有理由不这样做`cmp`，`static`所以只需将其更改为：

```
static bool cmp(const OpSchedule& l,const OpSchedule& r)
{
  return l.second < r.second;
} 
```

然后你可以像现在一样通过它。

^(† 您可以使用`std::bind(&Sched::cmp, this, std::placeholders::_1, std::placeholders::_2)`, 将成员函数绑定到`this`.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:37:23.050

另一种选择是在类之外和类的命名空间内创建 cmp 函数，以便

```
 void genSched() 
    { 
       using namespace <classNmaespace>;
       std::sort(m_mappedOp.begin(),m_mappedOp.end(),cmp)
    } 
```

# ruby-on-rails-3 - LAMP 和 Ruby on Rails 可以在同一个 VPS 服务器上同时运行吗

> ID：15185585
> 
> 赞同：0
> 
> 时间：2013-03-03T12:21:33.623
> 
> 标签：ruby-on-rails-3, apache

现在，我有一个 LAMP 并在 VPS (512M) 上很好地运行了一个 codeigniter 网站。我想在 Rails 上构建另一个站点。我该怎么办？有没有推荐的教程？恐怕记忆太紧了。因为我的vps现在只有大约256M内存！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:23:27.830

您可以使用乘客运行。它将编译一个 apache 模块，然后您可以使用它来运行 Rails 网站。您还可以使用任何其他方法，例如 Unicorn。512M 的 RAM 不是很多，但对于较小的 Rails 应用程序来说应该足够了，特别是如果您稍微调整一下设置。我曾经有一个 512M VPS，但由于 VPS 内存不足，我偶尔会遇到崩溃，所以要小心这个。与 apache 相比，使用小型 VPS nginx 可能是更好的选择。

# jquery - 当上下文为 jQuery 实例时的 jQuery 上下文

> ID：15185586
> 
> 赞同：0
> 
> 时间：2013-03-03T12:21:35.997
> 
> 标签：jquery

当我像往常一样调用 $ 函数时只传递了选择器：

```
 $("p"); 
```

正如预期的那样，返回用 fn.prototype 方法包装的 jQuery 对象。该对象也是具有一个属性的 Array - 选择器上下文。

但是，当我改变上下文时：

```
$("p",document.getElementsByTagName("h1")[0]); 
```

jQuery返回空数组？这是为什么 ？**我想在选择器上下文**不是**文件**时发生的事情，但我不明白。

答案在这一行吗？

```
context = context instanceof jQuery ? context[0] : context; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:26:40.153

你在做什么相当于

```
$("h1:first").find("p"); 
```

这将找到 H1 标签内的所有 P 对象。由于没有找到任何对象，您将看到返回一个空数组。jQuery 在找不到指定选择器的对象时总是返回一个空数组

# c++ - BOOST 共享指针导致冗余引用删除

> ID：15185591
> 
> 赞同：0
> 
> 时间：2013-03-03T12:22:14.200
> 
> 标签：c++, pointers, boost

我有以下应用程序结构：

```
/// CLASS VIEW3D.h
class View3D;
typedef boost::shared_ptr<View3D>     ViewSP;
class View3D
{

public:
   View3D(void);

    };

/// CLASS SCREENQUAD.h

 class ScreenQuad
{
public:
    ScreenQuad(ViewSP view);

    ~ScreenQuad(void);
    protected:
    ViewSP _viewSP;

};
/// CLASS VIEW3D.cpp
  View3D::Init(ViewSP view)

{

    _screenQuadSP=new ScreenQuad(view);

} 
```

/// 类 SCREENQUAD.cpp

```
 ScreenQuad::ScreenQuad(ViewSP view):

    _viewSP(view)           
{
    assert(_viewSP);

} 
```

现在，我将类的引用以共享指针的形式传递给`A`类`B`，并将其保存在全局变量`A_SP`中。当应用程序关闭时，我得到了这个：

```
HEAP:   Free Heap block 2837920 modified at 2837b5c after it was freed 
```

调试执行后我发现类`A`析构函数被调用后，当类的析构函数`B`被执行时，它会再次被调用。所以我的猜测是boost试图释放封装在指针地址处的内存`_A_ref`。只是要注意：销毁的顺序是`A`先类，然后是`B`类。

我该如何解决？不应该`shared_ptr`保持引用计数并且不触发已经释放的对象的析构函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:41:06.347

您的代码仍然太不完整，无法显示问题，但我可以想到一些导致此类错误的常见原因。

*   您在某处明确`delete`您的 View3D 实例。不要那样做，`shared_ptr`意志。如果您不再需要该对象，则可以调用`ptr.reset()`，这将减少其引用计数并在适当时将其删除。（这会在 a 被销毁时自动发生`shared_ptr`，例如在您的`ScreenQuad`析构函数中；在这种情况下，无需显式执行此操作。）

*   您不小心为同一个对象创建了多个引用计数器。应该只有一个位置可以`shared_ptr`从`View3D*`原始指针创建一个，即在创建对象的同一位置。在其他任何地方，您都必须从其他共享（或弱）指针创建共享指针。否则，您最终会得到多个引用计数器，并且每个引用计数器最终都会尝试删除该对象，即使它已经被释放。

*   `shared_ptr`您在堆栈上创建了一个对象。`delete`本质上，这与调用堆栈分配的对象是相同的问题。

这可能会帮助您自己找到错误，否则您确实需要发布更多代码 - 据我所知，到目前为止您显示的代码段中没有发生任何这种情况。

# sqlalchemy - SQLAlchemy：值错误

> ID：15185600
> 
> 赞同：1
> 
> 时间：2013-03-03T12:23:49.117
> 
> 标签：sqlalchemy

我有这些表：1）用户

```
class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key = True)
    fname = Column(String(45))
    lname = Column(String(45))
    mail = Column(String(45))
    password = Column(String(45))

    courses = relationship("Course", secondary=user_course, backref="users")
    universities = relationship("University", secondary=user_university, backref="users")

    def add_university(self, university):
        universities = self.universities
        universities.append(university)
        self.universities = universities

    def add_course(self, course):
        courses = self.courses
        courses.append(course)
        self.courses = courses 
```

2) 大学

```
class University(Base):
    __tablename__ = 'universities'
    id = Column(Integer, primary_key=True)
    date = Column(DateTime)
    name = Column(String(45)) 
```

3) 课程

```
class Course(Event):
    __tablename__ = 'courses'
    id = Column(Integer, ForeignKey('events.id'), primary_key=True)
    name = Column(String(45))
    year = Column(Integer)

    __mapper_args__ = {
        'polymorphic_identity':'course',
    }

    events = relationship("Event", secondary=course_event, backref="courses") 
```

因此，多对多与用户课程和用户大学以及多对多与课程事件（当然是父级）。

当我尝试使用在用户中定义的方法添加大学时，它可以工作，但是当我尝试添加课程时，出现此错误：

回溯（最近一次通话最后）：

```
 File "/Users/arnoutaertgeerts/Documents/Eclips/SlideTalk 2.0/test_SQL.py", line 473, in <module>
    arnout.add_course(Analyse)
  File "/Users/arnoutaertgeerts/Documents/Eclips/SlideTalk 2.0/test_SQL.py", line 101, in add_course
    courses.append(course)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/collections.py", line 1046, in append
    item = __set(self, item, _sa_initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/collections.py", line 1021, in __set
    item = getattr(executor, 'fire_append_event')(item, _sa_initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/collections.py", line 714, in fire_append_event
    item, initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/attributes.py", line 800, in fire_append_event
    value = fn(state, value, initiator or self)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/attributes.py", line 1026, in emit_backref_from_collection_append_event
    passive=PASSIVE_NO_FETCH)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/attributes.py", line 854, in append
    collection.append_with_event(value, initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/collections.py", line 655, in append_with_event
    getattr(self._data(), '_sa_appender')(item, _sa_initiator=initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/collections.py", line 1046, in append
    item = __set(self, item, _sa_initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/collections.py", line 1021, in __set
    item = getattr(executor, 'fire_append_event')(item, _sa_initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/collections.py", line 714, in fire_append_event
    item, initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/attributes.py", line 800, in fire_append_event
    value = fn(state, value, initiator or self)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/attributes.py", line 1020, in emit_backref_from_collection_append_event
    _acceptable_key_err(state, initiator)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/SQLAlchemy-0.7.9-py2.7.egg/sqlalchemy/orm/attributes.py", line 982, in _acceptable_key_err
    manager_of_class(initiator.class_)[initiator.key])) 
```

**ValueError：对象与 User.courses 类型的属性不相关**

但是，如果我停止让课程从 Event 继承，它确实有效！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:32:32.100

问题解决了！这是票：[http ://sqlalchemy.org/trac/ticket/2674](http://sqlalchemy.org/trac/ticket/2674)

# c# - 如何自动创建图片框？

> ID：15185602
> 
> 赞同：0
> 
> 时间：2013-03-03T12:24:02.523
> 
> 标签：c#, winforms, picturebox

我想自动创建一个`PictureBox`. 如何在代码中更改：

```
private void button1_Click(object sender, EventArgs e)
{
    PictureBox[] box = new PictureBox[textBox1.Text.Length];
    for(int j=0;j<textBox1.Text.Length;j++)
    box[0] = pictureBox1;
    box[1] = pictureBox2;
    box[2] = pictureBox3;
    for (int i = 0; i < textBox1.Text.Length; ++i) 
    box[i].Image = Image.FromFile(string.Format(@"c:\obrazki\{0}.jpg",textBox1.Text[i]));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:09:38.370

您可能应该使用 FlowLayoutPanel 控件来保存您的 PictureBox 控件。然后代码看起来像这样：

```
void button1_Click(object sender, EventArgs e) {
  while (flowLayoutPanel1.Controls.Count > 0) {
    flowLayoutPanel1.Controls[0].Dispose();
  }

  for (int i = 0; i < textBox1.Text.Length; ++i) {
    PictureBox pb = new PictureBox();
    pb.Image = Image.FromFile(string.Format(@"c:\obrazki\{0}.jpg",textBox1.Text[i]));
    flowLayoutPanel1.Controls.Add(pb);
  }
} 
```

# linux - 查找第一次登录的用户的 shell 脚本

> ID：15185606
> 
> 赞同：0
> 
> 时间：2013-03-03T12:24:17.303
> 
> 标签：linux, shell

我是 Linux 操作系统的新手 我正在学习使用 Shell 脚本执行一些命令 我想查看哪个用户第一次登录。我应该插入什么来获取第一次登录的用户。我知道是谁，但这不是我想要的。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:49:34.100

如果你想从当前登录的用户中找到最先登录的用户，你可以这样做：

```
 who | awk '{print $3 " " $4 " "$1}' | sort | head -1 
```

基本上，取 的输出`who`，按登录时间排序，得到第一行。

# visual-c++ - VC表单应用程序中的变量继承

> ID：15185609
> 
> 赞同：0
> 
> 时间：2013-03-03T12:25:01.220
> 
> 标签：visual-c++, c++-cli

我需要一些关于 VC 表单应用程序中的变量继承的帮助！我有这个代码：

```
string ks;          
ifstream sfile(ks);

if (sfile)
{
    PatInfo ^ form = gcnew PatInfo;
    form->ShowDialog();

}                                           
else 
{
    MessageBox::Show( "Please try again.");
} 
```

我想将 ks 字符串传递给 PatInfo 表单。怎么做到呢？

# java - 我可以在不了解 Android 操作系统组件的情况下仅使用 LIBGDX 开发 Android 应用程序吗？

> ID：15185610
> 
> 赞同：3
> 
> 时间：2013-03-03T12:25:02.943
> 
> 标签：java, android, mobile, libgdx

我正计划为 Android 市场开发一款游戏，虽然我对 Java 和桌面游戏非常有经验，但我几乎没有使用 Android 的经验。我听说过 LibGDX，它可以让我将我的游戏分发到 Android，除了编写桌面游戏的代码之外，几乎不需要额外的工作。

这似乎好得令人难以置信，有人可以告诉我在我开始我的项目之前是否有任何我不知道的使用 LibGDX 的缺点（可能是它的错误、使过程复杂化或任何东西）？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T13:08:53.383

我发现 Libgdx 是一个很棒的工具，可以快速开发 Android 游戏。这适用于一个简单的事实，即与每次我想运行或调试我的应用程序时都需要将我的 APK 安装到 Android 设备（或启动模拟器）相反，我可以简单地在窗口中运行应用程序我的开发电脑。

对于 Android SDK 知识有限的人，Libgdx 将帮助您入门。但是，最终您至少需要对 Android SDK 有所了解，才能开发出稳定且质量足以在 Play 商店中发布的应用程序。需要记住的一些事项：

1.  Android 设备上的硬件（例如，GPU）不如您的开发机器上的硬件强大。因此，在您的开发机器上运行良好的要求苛刻的图形渲染对于典型的 Android 设备来说可能太多了，并且陷入不可接受的 FPS。在开发过程中，您至少应该定期将您的游戏上传到 Android 设备以查看它的渲染效果。

2.  当今市场上有数百种 Android 设备，您需要找到一种方法来测试您的游戏，以确保您的游戏与您所针对的设备/操作系统版本兼容。（Google 建议在 Android 市场上发布测试版是实现此目的的好方法）。

3.  在某些时候，您可能希望添加 Android 风格的设置和其他 GUI 风格，使您的游戏符合 Android 的预定义风格约定。（这使您的游戏看起来像一个 Android 应用程序，并且使用 Android 已经为您提供的 GUI API 和样式最终可以节省您的时间）。

4.  Android 和纯 Java 之间在为性能优化设置代码样式方面存在显着差异（例如，如何迭代数组，是否使用 getter/setter 或直接访问字段）。[http://developer.android.com/training/articles/perf-tips.html](http://developer.android.com/training/articles/perf-tips.html)会给你一个概述。

# sql-server - 通过 CREATE TRIGGER 自动将更新的列复制到另一列

> ID：15185611
> 
> 赞同：0
> 
> 时间：2013-03-03T12:25:03.090
> 
> 标签：sql-server

我正在使用 SQL Server。

有一个包含一些列的表：`column1, column2, ...`

用户有权访问`column1`，他可以更新它的内容。

现在我想创建一个触发器来自动复制 to 的新`column1`内容`column2`。

例如

```
set column2 = column1 AFTER UPDATE of (column1) 
```

我使用以下代码在表上创建了一个触发器：

```
CREATE TRIGGER [dbo].[mytrigger]
ON [dbo].[mytable]
AFTER UPDATE
AS
   IF UPDATE(userName)
   BEGIN
      SET NOCOUNT ON;

      -- HERE I SHOULD WRITE A CODE TO COPY NEW DATA OF COLUMN1 TO COLUMN2 !! :-??

   END 
```

我应该使用什么代码而不是注释？

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:46:52.270

您可以使用下面的查询。它使用`INSERTED`表来避免替换所有行

```
UPDATE mytable
SET mytable.column2 = i.column1
FROM mytable
INNER JOIN INSERTED i
ON i.idcolumn=mytable.idcolumn 
```

# parsing - Xtext 中的语法错误

> ID：15185612
> 
> 赞同：4
> 
> 时间：2013-03-03T12:25:03.107
> 
> 标签：parsing, xtext

我有语法规则

```
factoid:
Element Place
; 
```

这取决于另一个规则：

```
Place:
name = ('sea' | 'air')
; 
```

factoid 规则似乎包含与 Place 相关的识别错误：

> 此行有多个标记 - 不能在规则内两次更改类型 - 当“当前”已创建时，不允许未分配的规则调用。

我不知道这是什么意思。有人可以解释这是什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T19:19:50.623

我认为*Element*规则会生成一个对象。由于没有分配，因此成为*当前*分配。*对Place*的第二个未分配规则调用也将返回一个对象。但是当前指针已经包含*Element*类型的类，也不能包含*Place*类。因此，您可以尝试将*Place分配给**factoid*的成员，这里称为*location*：

```
factoid:
 item=Element location=Place
; 
```

我不确定是否需要将*元素*分配给*项目*。如果 Element 未分配给成员，那么我希望该*位置*将成为*Element*或类似的成员。

# c# - 通过将元素添加到列表中的子/父关系

> ID：15185625
> 
> 赞同：0
> 
> 时间：2013-03-03T12:26:54.760
> 
> 标签：c#, .net, events

我必须实现一个具有父字段和子字段的类。问题是通过添加一个孩子，它必须立即保持对它的父母的引用。我实现了它，它似乎工作，但我不太确定我是否做对了。任何建议都会很有用！

```
namespace DocumentToDocument
{
  public class MyEventArgs<T>: EventArgs
  {
    public T D;
  }

  public class MyList<T> : List<T>
  {
    public event EventHandler OnAdd;

    public new void Add(T item)
    {
      if (null != OnAdd)
      {
        var m = new MyEventArgs<Document> {D = item as Document};

        OnAdd(this, m);
      }
      base.Add(item);
    }
   }

   public class Document
   {
     public Document()
     {
       Children = new MyList<Document>();
       Children.OnAdd += new EventHandler(Children_OnAdd);
     }

     public string Name;

     public Document Parent;

     public MyList<Document> Children;

     public void Children_OnAdd(object sender, EventArgs e)
     {
      ((MyEventArgs<Document>) e).D.Parent = this;
     }
   }

   class Program
   {
     private static void Main(string[] args)
     {
       var d = new Document {Name = "I am a parent"};

       var dd = new Document {Name = "I am a child"};

       d.Children.Add(dd);
     }
   }
 } 
```

# javascript - 尝试检索不存在的数组条目后javascript var的状态？

> ID：15185628
> 
> 赞同：0
> 
> 时间：2013-03-03T12:27:17.010
> 
> 标签：javascript, arrays, key

假设我有一个 Javascript 数组，并且一些条目定义如下：

```
arr["rrr"]=1;
arr["ee"]=2;
arr["qqq"]=22;
... 
```

假设有人尝试检索一个不存在的键的条目，例如：

```
var retr = arr["ppp"]; 
```

`retr`var的状态是什么？是它`null`还是`undefined`别的什么？如何检查数组是否不包含所提供密钥的有效条目？Javascript 中的正确测试是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T12:33:31.470

结果未定义。要测试你只需要这样做：

```
if ("ppp" in arr) {
  // do something
} else {
 // do something else
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:38:05.413

缺少键返回的值是`undefined`。您可以像这样测试密钥是否存在：

```
var a = [];
a.hasOwnProperty('k'); // false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:30:27.607

未定义数组键的返回值为`undefined`。正确的测试是

```
var retr = arr["ppp"];
if(retr!=undefined){
  //retr has some value
}
else{
  //retr is undefined
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T12:33:23.683

我尝试了您在 Firebug 中编写的代码。当我尝试访问不存在密钥的条目时

```
var retr=arr["ppp"]; 
```

它返回空值。因此，retr 等于 null。

```
retr==null; //true
typeof retr=="undefined"; //true 
```

# javascript - 等待页面完成加载然后随机等待显示 DIV

> ID：15185632
> 
> 赞同：0
> 
> 时间：2013-03-03T12:27:47.407
> 
> 标签：javascript

我想向我的用户显示像时事通讯注册表单这样的弹出窗口。我想使用 Javascript 等待页面完成加载，并在随机等待（至少 10 秒！）后阅读以显示 div。如果可能的话，还有另一个小的改进？（仅当添加 onmouseclick 隐藏 div 不太难的情况下？）

非常感谢

更新让它在 10 秒后等待并加载。需要添加随机等待

```
<body onLoad='setTimeout("showIt()", 10000);'>
    <body onLoad='setTimeout("showIt()", 10000);'>

    <script type="text/javascript">
        function showIt() {
          document.getElementById("myDiv").style.display = "block";
        }
    // 1000 = 1 sec | 60000 is 1 minute
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:40:19.850

我认为这会起作用：

```
<script type="text/javascript">
    function showIt() {
      document.getElementById("myDiv").style.display = "block";

      setTimeout(closeIt, 10000);
    }

    function closeIt(){
       document.getElementById("myDiv").style.display = "none";
    }
</script> 
```

编辑：

```
<div id='myDiv' onclick='closeIt()'></div> 
```

编辑：

```
<script>
    if (window.addEventListener) {
        window.addEventListener('load', callback, false);
    } else if (window.attachEvent) {
        window.attachEvent('onload', callback);
    }

    function callback(){
        setTimeout(showIt, (parseInt(Math.random()*(60000 - 10000)) + 10000));
    }
</script> 
```

# jquery - 如何检查是否加载了 jQuery 验证引擎？

> ID：15185634
> 
> 赞同：8
> 
> 时间：2013-03-03T12:27:54.737
> 
> 标签：jquery, jquery-validation-engine

我正在尝试使用这个验证器：http: [//posabsolute.github.com/jQuery-Validation-Engine/](http://posabsolute.github.com/jQuery-Validation-Engine/) 我只在页面有表单时加载它。但我有几页有 2 个表单，都用 ajax 加载。所以，我需要在加载之前检查每个表单：验证器是否加载。我怎样才能检查这个？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-03T12:31:25.383

您可以检查是否存在`$.validator`：

```
if ($.validator) {
    // $.validator is defined
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:31:39.043

该插件添加了一个`validationPlugin`函数`jQuery.fn`，所以只需检查它是否存在；

```
if (typeof jQuery.fn.validationPlugin === "function") {
    // It's loaded
} else {
    // It's not.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-05T22:41:07.097

这适用于 ValidationEngine 2.6.2：

```
if (typeof jQuery.fn.validationEngine === "function") {
    // It's loaded
} else {
    // It's not.
} 
```

# constants - 如何链接到 JavaDoc 中的所有类常量

> ID：15185635
> 
> 赞同：0
> 
> 时间：2013-03-03T12:27:54.877
> 
> 标签：constants, javadoc

我经常觉得我想在 JavaDoc 中引用 @see Class#{all_constants} 。有什么办法吗？例如，如果我想提供对 bitflag 可能值的引用怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T21:36:00.160

不幸的是，我还没有找到一个标准的方法来做到这一点。您当然可以创建一个相对 HREF，如下所示：

```
<a href="../../constant-values.html#my.package.MyClass">MyClass constants</a>

<a href="../../../../constant-values.html#my.deeply.nested.package.MyClass">MyClass constants</a> 
```

问题是，重构时使用它并不安全。相对路径必须根据包名中的符号数量进行调整，并且完全限定的类名必须是锚点的一部分。它非常容易出错，并且不太可能被任何 IDE 支持。我很高兴发现有更好的答案，但这就是我现在所拥有的。

# android - 将 View 的顶部与 RelativeLayout 中另一个视图的底部对齐

> ID：15185636
> 
> 赞同：9
> 
> 时间：2013-03-03T12:28:15.703
> 
> 标签：android, android-layout

如何将一个`View`的顶部与另一个`View`的底部对齐？我需要两个视图，一个在另一个之上。我用一个简单的 s 实现了正确的垂直位置`android:layout_below="id_of_the_top_view"`，但我无法`View`水平对齐 s 。我想要类似的东西`android:layout_alignTopToBottomOf="id_of_the_top_view"`，或者一般来说可以让我将`View`中心（水平或垂直）与另一个`View`中心对齐的东西。

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<!-- center picker @ minutes -->
<NumberPicker
    android:id="@+id/npicker_minutes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp" />

<!-- left picker @ hours -->
<NumberPicker
    android:id="@+id/npicker_hours"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@id/npicker_minutes" />

<!-- right picker @ seconds -->
<NumberPicker
    android:id="@+id/npicker_seconds"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_toRightOf="@id/npicker_minutes" />

<TextView
    android:id="@+id/tv_minutes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@id/npicker_minutes"
    android:layout_marginTop="20dp"
    android:paddingBottom="15dp"
    android:text="@string/minutes_short" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/npicker_hours"
    android:layout_toLeftOf="@id/tv_minutes"
    android:layout_marginTop="20dp"
    android:paddingBottom="15dp"
    android:text="@string/hours_short" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/npicker_seconds"
    android:layout_toRightOf="@id/tv_minutes"
    android:layout_marginTop="20dp"
    android:paddingBottom="15dp"
    android:text="@string/seconds_short" />

</RelativeLayout> 
```

我得到的是这样的： ![在此处输入图像描述](../Images/4c8ce845c0600e473c3d4940d2817202.png)

而我需要实现的是三个`TextView`s（“hh”、“mm”和“ss”）分别放置在一个数字选择器下方，其`TextView`水平中心与`NumberPicker`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T13:05:28.210

您需要将此行添加到您的 TextViews：

```
android:layout_alignLeft="@id/npicker_minutes"
android:layout_alignRight="@id/npicker_minutes"
android:gravity="center_horizontal" 
```

完整的代码示例：

```
<!-- center picker @ minutes -->

<NumberPicker
    android:id="@+id/npicker_minutes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp" />

<!-- left picker @ hours -->

<NumberPicker
    android:id="@+id/npicker_hours"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@id/npicker_minutes" />

<!-- right picker @ seconds -->

<NumberPicker
    android:id="@+id/npicker_seconds"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_toRightOf="@id/npicker_minutes" />

<TextView
    android:id="@+id/tv_minutes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/npicker_minutes"
    android:layout_alignRight="@id/npicker_minutes"
    android:gravity="center_horizontal"
    android:layout_below="@id/npicker_minutes"
    android:layout_marginTop="20dp"
    android:paddingBottom="15dp"
    android:text="@string/minutes_short" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/npicker_hours"
    android:layout_alignRight="@+id/npicker_hours"
    android:gravity="center_horizontal"
    android:layout_below="@id/npicker_hours"
    android:layout_marginTop="20dp"
    android:paddingBottom="15dp"
    android:text="@string/hours_short" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/npicker_seconds"
    android:layout_alignRight="@id/npicker_seconds"
    android:gravity="center_horizontal"
    android:layout_below="@id/npicker_seconds"
    android:layout_marginTop="20dp"
    android:paddingBottom="15dp"
    android:text="@string/seconds_short" /> 
```

另一种方法是使用树形线性布局，每个内部都有一个 NumberPicker 和一个 TextView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-28T04:25:08.527

就我而言，我使用 android:layout_above

```
 <androidx.core.widget.NestedScrollView
        android:id="@+id/nestedScrollView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/layout_bottom"
        > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:42:17.947

您可以使用以下属性来对齐第一个和第三个文本视图：

```
 android:layout_alignLeft="@+id/your_first_number_picker" //your first text view

 android:layout_alignRight="@+id/your_third_number_picker" //your third text view 
```

# java - JPA - 在一个事务中删除之前更新不起作用

> ID：15185637
> 
> 赞同：0
> 
> 时间：2013-03-03T12:28:19.147
> 
> 标签：java, jpa, eclipselink

我在数据库中有 2 个表：

*   ads - 代表用户定义的广告
*   ad_categories - 表示广告的类别

每个广告必须完全属于一个类别，因此在 ads 表中我定义了一个指向 ad_categories 的外键，其中 ON UPDATE NO ACTION ON DELETE NO ACTION。

在我的应用程序中，用户必须能够删除任何类别，但如果该类别包含广告，则必须在删除类别之前将它们移动到另一个类别。

```
em.getTransaction().begin();
// get currentNode
AdCategories currentNode = em.find(AdCategories.class, currentNodeId);
// get ads
List<Ads> resultList = em.createQuery("SELECT a from Ads a WHERE a.adCategoryId = :categoryId").setParameter("categoryId", currentNode).getResultList();
// get their new location
AdCategories newLocation = em.find(AdCategories.class, newLocationId);
// set their new location
for(Ads a: resultList)
    a.setAdCategoryId(newLocation);
em.remove(currentNode);
em.getTransaction().commit(); 
```

我预计，受影响的广告将更改 ad_category_id，然后将删除空类别。但受影响的广告也被删除了！！

我在 EclipseLink 中启用了 FINEST 级别的日志记录，发现当事务提交时，首先将 UPDATE 查询发送到数据库，这会更改受影响广告的 ad_category_id，然后删除类别，但删除是级联广告！我不明白为什么，因为广告应该在删除之前更新 ad_category_ids 。

我知道，一种简单的解决方法是在删除类别之前调用`em.flush()`，但我认为这不是最佳解决方案。我想，我需要了解这种行为。

我将 EclipseLink 与 NetBeans 和 PostgreSQL 一起使用。

表定义：

**广告类别**

```
@Entity
@Table(name = "ad_categories")
@XmlRootElement
@NamedQueries({
@NamedQuery(name = "AdCategories.findAll", query = "SELECT a FROM AdCategories a"),
@NamedQuery(name = "AdCategories.findById", query = "SELECT a FROM AdCategories a WHERE a.id = :id"),
@NamedQuery(name = "AdCategories.findByParentId", query = "SELECT a FROM AdCategories a WHERE a.parentId = :parentId"),
@NamedQuery(name = "AdCategories.findByCategoryOrder", query = "SELECT a FROM AdCategories a WHERE a.categoryOrder = :categoryOrder"),
@NamedQuery(name = "AdCategories.findByCategoryDepth", query = "SELECT a FROM AdCategories a WHERE a.categoryDepth = :categoryDepth"),
@NamedQuery(name = "AdCategories.findByName", query = "SELECT a FROM AdCategories a WHERE a.name = :name"),
@NamedQuery(name = "AdCategories.findByGrandParentId", query = "SELECT a FROM AdCategories a WHERE a.grandParentId = :grandParentId"),
@NamedQuery(name = "AdCategories.findByParentName", query = "SELECT a FROM AdCategories a WHERE a.parentName = :parentName"),
@NamedQuery(name = "AdCategories.findByGrandParentName", query = "SELECT a FROM AdCategories a WHERE a.grandParentName = :grandParentName")})
public class AdCategories implements Serializable {
@OneToMany(cascade = CascadeType.ALL, mappedBy = "adCategoryId")
private Collection<Ads> adsCollection;
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "id")
private Integer id;
@Basic(optional = false)
@Column(name = "parent_id")
private int parentId;
@Basic(optional = false)
@Column(name = "category_order")
private short categoryOrder;
@Basic(optional = false)
@Column(name = "category_depth")
private short categoryDepth;
@Basic(optional = false)
@Column(name = "name")
private String name;
@Column(name = "grand_parent_id")
private Integer grandParentId;
@Column(name = "parent_name")
private String parentName;
@Column(name = "grand_parent_name")
private String grandParentName;
... 
```

**广告**

```
@Entity
@Table(name = "ads")
@XmlRootElement
@NamedQueries({
@NamedQuery(name = "Ads.findAll", query = "SELECT a FROM Ads a"),
@NamedQuery(name = "Ads.findByAdId", query = "SELECT a FROM Ads a WHERE a.adId = :adId"),
@NamedQuery(name = "Ads.findByName", query = "SELECT a FROM Ads a WHERE a.name = :name"),
@NamedQuery(name = "Ads.findByDescriptionShort", query = "SELECT a FROM Ads a WHERE a.descriptionShort = :descriptionShort"),
@NamedQuery(name = "Ads.findByDescriptionLong", query = "SELECT a FROM Ads a WHERE a.descriptionLong = :descriptionLong")})
public class Ads implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "ad_id")
private Integer adId;
@Basic(optional = false)
@Column(name = "name")
private String name;
@Basic(optional = false)
@Column(name = "description_short")
private String descriptionShort;
@Basic(optional = false)
@Column(name = "description_long")
private String descriptionLong;
@JoinColumn(name = "ad_category_id", referencedColumnName = "id")
@ManyToOne(optional = false)
private AdCategories adCategoryId;
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:00:21.533

如果您在 中的广告集合上声明类型为 REMOVE（或 ALL）的级联`AdCategory`，您会告诉 JPA：当我调用`remove()`时`AdCategory`，也会调用`remove()`此集合中的所有广告。这就是 JPA 所做的。

您有一个双向关联，您有责任确保关联的双方处于一致状态。因此，如果您更改广告的类别，您还应该将该广告从其类别中的广告集中删除，并且您还应该将该广告添加到其新类别中。在所有情况下都不是绝对强制性的，但在你的情况下，它是。

另外，你的命名真的很糟糕。的实例`AdCategories`是*单个*类别。所以实体应该命名为`AdCategory`. 同为`Ads`，应命名为`Ad`。该字段`adCategoryId`不包含类别 ID，而是包含类别。它应该被命名`adCategory`为`category`而不是`adCategoryId`。为什么命名该字段`adId`？它是类 Ad 中的 ID，所以它显然已经是一个 Ad 的 ID。因此它应该被命名为`id`。`descriptionLong`应该命名为`longDescription`. 这可能看起来像细节，但这些细节使代码看起来很好并且可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:00:37.353

这里的问题是您定义了一个双向关系，需要手动管理（JPA 提供者不会为您做）。在您的调用代码中，您从广告的角度断开了广告与其类别之间的联系。

```
for(Ads a: resultList)
    a.setAdCategoryId(newLocation); 
```

但是，您的类别仍然保留一组它认为与其相关的广告，当您删除它时，这些广告也会被删除（因为 CascadeType.ALL 注释）。有两种方法可以解决此问题。

### 保持双向关系

如果你真的需要，你可以离开双向关系，但是当你想打破它时，你必须适当地解除双方的关系。完全从“拥有”方面管理关系是正常的，所以我会做这样的事情：

```
public class Ads implements Serializable {
    public void setAdCategoryId(AdCategories category) {
        this.category.removeAd(this);
        this.category = category;
        this.category.addAd(this);
    }
} 
```

*非常粗糙的伪代码，你需要充实它*

### 删除双向关系

一个类别真的需要维护所有使用它的广告的列表吗？从概念上讲，我认为不应该。随着时间的推移，该列表会变得非常大，您始终可以动态查询它，而不是将其存储在每个类别中。但这是您必须从业务角度做出的决定。

# objective-c - 基于 NSTableViewCell 的上下文菜单

> ID：15185645
> 
> 赞同：9
> 
> 时间：2013-03-03T12:28:46.960
> 
> 标签：objective-c, cocoa, contextmenu, nstableview, nstableviewcell

我想将上下文菜单放在`NSTableView`. 这部分完成了。我想做的是根据右键单击单元格的内容显示不同的菜单条目，并且不显示特定列的上下文菜单。

这是：

第 0 列和第 1 列没有上下文菜单

所有其他单元格应该有这样的上下文菜单：

第一项：“删除”samerow.column1.value
第二项：“保存”samecolumn.headertext

-编辑-

右边的一个是上下文菜单对于任何给定单元格的外观。

![在此处输入图像描述](../Images/c93b68590e11e68220e73e32aa68450d.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-06T20:39:30.527

有一个代表！- 无需子类

在 IB 中，如果您将一个`NSTableView`拖到您的窗口/视图上，您​​会注意到`menu`表格有一个出口。

所以实现上下文菜单的一个非常简单的方法是将该出口连接到存根菜单并将菜单的委托出口连接到实现`NSMenuDelegate`协议方法的对象`- (void)menuNeedsUpdate:(NSMenu *)menu`

![界面生成器屏幕截图](../Images/c542d5a1d7b4840433c2f1794f2d3642.png)

通常，菜单的委托是为表提供数据源/委托的同一对象，但它也可能是拥有表的视图控制器。

[查看文档](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSMenuDelegate_Protocol/Reference/Reference.html)以获取有关此的更多信息

你可以在协议中做很多聪明的事情，但一个非常简单的实现可能如下所示

```
#pragma mark tableview menu delegates

- (void)menuNeedsUpdate:(NSMenu *)menu
{
NSInteger clickedrow = [mytable clickedRow];
NSInteger clickedcol = [mytable clickedColumn];

if (clickedrow > -1 && clickedcol > -1) {

   //construct a menu based on column and row   
   NSMenu *newmenu = [self constructMenuForRow:clickedrow andColumn:clickedcol];

   //strip all the existing stuff       
   [menu removeAllItems];

   //then repopulate with the menu that you just created        
   NSArray *itemarr = [NSArray arrayWithArray:[newmenu itemArray]];
   for(NSMenuItem *item in itemarr)
   {
      [newmenu removeItem:[item retain]];
      [menu addItem:item];
      [item release];
   }        
}

} 
```

然后是构建菜单的方法。

```
-(NSMenu *)constructMenuForRow:(int)row andColumn:(int)col
{

    NSMenu *contextMenu = [[[NSMenu alloc] initWithTitle:@"Context"] autorelease];

NSString *title1 = [NSString stringWithFormat:@"Delete %@",[self titleForRow:row]]; 

NSMenuItem *item1 = [[[NSMenuItem alloc] initWithTitle:title1 action:@selector(deleteObject:) keyEquivalent:@""] autorelease];
    [contextMenu addItem:item1];
    //
NSString *title2 = [NSString stringWithFormat:@"Save %@",[self titleForColumn:col]];    

NSMenuItem *item2 = [[[NSMenuItem alloc] initWithTitle:title1 action:@selector(saveObject:) keyEquivalent:@""] autorelease];
    [contextMenu addItem:item2];

return contextMenu;
} 
```

您选择如何实施`titleForRow:`，`titleForColumn:`取决于您。

请注意，它`NSMenuItem`提供了`representedObject`允许您将任意对象绑定到菜单项的属性，从而将信息发送到您的方法（例如`deleteObject:`）

**编辑**

注意 -`- (void)menuNeedsUpdate:(NSMenu *)menu`在您的`NSDocument`子类中实现将停止出现在 10.8 中的标题栏中的 Autosave/Versions 菜单。

它仍然可以在 10.7 中使用，所以请看图。在任何情况下，菜单委托都需要不是您的`NSDocument`子类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T07:18:45.390

编辑：比以下方法更好的方法是使用委托，如接受的答案所示。

你可以继承你的 UITableView 并实现`menuForEvent:`方法：

```
-(NSMenu *)menuForEvent:(NSEvent *)event{
    if (event.type==NSRightMouseDown) {
        if (self.selectedColumn == 0 || self.selectedColumn ==1) {
            return nil;
        }else {
            //create NSMenu programmatically or get a IBOutlet from one created in IB
            NSMenu *menu=[[NSMenu alloc] initWithTitle:@"Custom"];

            //code to set the menu items

            //Instead of the following line get the value from your datasource array/dictionary
            //I used this as I don't know how you have implemented your datasource, but this will also work
            NSString *deleteValue = [[self preparedCellAtColumn:1 row:self.selectedRow] title]; 

            NSString *deleteString = [NSString stringWithFormat:@"Delete %@",deleteValue];
            NSMenuItem *deleteItem = [[NSMenuItem alloc] initWithTitle:deleteString action:@selector(deleteAction:) keyEquivalent:@""];
            [menu addItem:deleteItem];

            //save item
            //similarly 
            [menu addItem:saveItem];

            return menu;
        }
    }
    return nil;
} 
```

那应该这样做。我还没有尝试过代码。但这应该给你一个想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-08T07:59:29.523

我还尝试了 Warren Burton 发布的解决方案，效果很好。但就我而言，我必须在菜单项中添加以下内容：

```
[item1 setTarget:self];
[item2 setTarget:self]; 
```

不明确设置目标会导致上下文菜单保持禁用状态。

干杯!

亚历克斯

PS：我会将此作为评论发布，但我没有足够的声誉来做到这一点:(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-20T12:06:58.530

[沃伦伯顿](https://stackoverflow.com/users/408390/warren-burton)的答案是正确的。对于那些在 Swift 中工作的人，下面的示例片段可能会为您节省从 Objective C 翻译的工作。在我的例子中，我将上下文菜单添加到 NSOutlineView 而不是 NSTableView 中的单元格。在此示例中，菜单构造函数查看项目并根据项目类型和状态提供不同的选项。委托（在 IB 中设置）是管理 NSOutlineView 的 ViewController。

```
 func menuNeedsUpdate(menu: NSMenu) {
    // get the row/column from the NSTableView (or a subclasse, as here, an NSOutlineView)
    let row = outlineView.clickedRow
    let col = outlineView.clickedColumn
    if row < 0 || col < 0 {
        return
    }
    let newItems = constructMenuForRow(row, andColumn: col)
    menu.removeAllItems()
    for item in newItems {
        menu.addItem(item)
        // target this object for handling the actions
        item.target = self
    }
}

func constructMenuForRow(row: Int, andColumn column: Int) -> [NSMenuItem]
{
    let menuItemSeparator = NSMenuItem.separatorItem()
    let menuItemRefresh = NSMenuItem(title: "Refresh", action: #selector(refresh), keyEquivalent: "")
    let item = outlineView.itemAtRow(row)
    if let block = item as? Block {
        let menuItem1 = NSMenuItem(title: "Delete \(block.name)", action: #selector(deleteBlock), keyEquivalent: "")
        let menuItem2 = NSMenuItem(title: "New List", action: #selector(addList), keyEquivalent: "")
        return [menuItem1, menuItem2, menuItemSeparator, menuItemRefresh]
    }
    if let field = item as? Field {
        let menuItem1 = NSMenuItem(title: "Delete \(field.name)", action: #selector(deleteField), keyEquivalent: "")
        let menuItem2 = NSMenuItem(title: "New Field", action: #selector(addField), keyEquivalent: "")
        return [menuItem1, menuItem2, menuItemSeparator, menuItemRefresh]
    }
    return [NSMenuItem]()
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T10:33:19.170

正如 TheGoonie 提到的，我也得到了相同的体验——上下文菜单项仍处于禁用状态。但是，禁用项目的原因是“自动启用项目”属性。

关闭“自动启用项目”属性。或以编程方式将其设置为 NO。

```
[mTableViewMenu setAutoenablesItems:NO]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-12T15:20:03.143

这是一个在视图控制器中以编程方式设置 NSOutlineView 的示例。这是启动和运行上下文菜单所需的所有管道。不需要子类化。

我之前曾将 NSOutlineView 子类化以覆盖菜单（对于事件：NSEvent），但在 Graham 的回答和 Warren 的回答的帮助下进行[了](https://stackoverflow.com/questions/12494489/nstableview-right-clicked-row-index)[更](https://stackoverflow.com/users/295396/graham-miln)简单的[设置](https://stackoverflow.com/users/408390/warren-burton)。

```
class OutlineViewController: NSViewController 
{
    // ...
    var outlineView: NSOutlineView!
    var contextMenu: NSMenu! 

    override func viewDidLoad()
    {
        // ...
        outlineView = NSOutlineView()
        contextMenu = NSMenu()
        contextMenu.delegate = self
        outlineView.menu = contextMenu
    }
}

extension OutlineViewController: NSMenuDelegate
{
    func menuNeedsUpdate(_ menu: NSMenu) {

        // clickedRow catches the right-click here 
        print("menuNeedsUpdate called. Clicked Row: \(outlineView.clickedRow)")

        // ... Flesh out the context menu here
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-14T10:16:31.933

`NSMenu`这是我发现的自定义/动态最简单的方法**，它还保留了系统外观**（蓝色选择边框）。子类化`NSTableView`并将您的菜单设置在`menu(for:)`.

重要的部分是*在表视图上设置菜单*，但从它的*调用中**返回菜单`super`*。

```
override func menu(for event: NSEvent) -> NSMenu? {
    let point = convert(event.locationInWindow, from: nil)
    let clickedRow = self.row(at: point)
    var menuRows = selectedRowIndexes

    // The blue selection box should always reflect the
    // returned row indexes.
    if menuRows.isEmpty || !menuRows.contains(clickedRow) {
        menuRows = [clickedRow]
    }

    // Build your custom menu based on the menuRows indexes
    self.menu = <#myMenu#>

    return super.menu(for: event)
} 
```

# c# - 仅在延迟时间后执行方法

> ID：15185647
> 
> 赞同：4
> 
> 时间：2013-03-03T12:28:59.610
> 
> 标签：c#, .net, wpf, windows-phone-7, windows-phone

我使用此方法每 60 秒调用另一个方法：

```
Timer updateTimer = new Timer(testt, null, 
                              new TimeSpan(0, 0, 0, 0, 1), new TimeSpan(0, 0, 60)); 
```

延迟1毫秒后可以只调用一次这个方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T12:37:20.530

假设这是 a `System.Threading.Timer`，来自[构造函数](http://msdn.microsoft.com/en-GB/library/ah1h85ch.aspx)的最终参数的文档：

> *period*
> 调用回调引用的方法之间的时间间隔。指定负一 (-1) 毫秒以禁用周期性信号。

所以：

```
Timer updateTimer = new Timer(testt, null,
                              TimeSpan.FromMilliseconds(1),   // Delay by 1ms
                              TimeSpan.FromMilliseconds(-1)); // Never repeat 
```

1ms的延迟真的有用吗？为什么不立即执行呢？如果您真的只是想在线程池线程上执行它，那么有更好的方法来实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T13:11:41.473

```
System.Timers.Timer aTimer = new System.Timers.Timer(10000);
// Hook up the Elapsed event for the timer.
aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
// Set the Interval to 60 seconds (60000 milliseconds).
aTimer.Interval = 60000;
//for enabling for disabling the timer.
aTimer.Enabled = true;
private void OnTimedEvent(object source, ElapsedEventArgs e)
{
     //disable the timer
    aTimer.Enabled = false;
    Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
 } 
```

# javascript - 一周的第一天 - Date.js 中的星期一

> ID：15185649
> 
> 赞同：1
> 
> 时间：2013-03-03T12:29:08.310
> 
> 标签：javascript, datejs

我对 Date.js 库有一些问题。我使用俄罗斯文化设置。一周的第一天由 1 设置。这意味着，我的一周应该是从周一到周日。星期一应该是我打电话时的返回值： Date.getDayNumberFromName('понедельник'); //星期一，它应该返回 0 和 Date.getDayNumberFromName('воскресенье'); //星期天，它应该返回 6

当然，它应该是所有周计算的实际值。例如，今天（3 月 3 日，星期日），此代码：Date.monday()，应返回 2 月 25 日。但事实并非如此。为什么？我应该怎么做才能改变全局“firstDayOfWeek”？

更新：小提琴有一些问题。我在自己的主机上做了例子：http: [//sulla.ru/lab/](http://sulla.ru/lab/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:53:03.410

我调试了这个几乎死了的库（死了，因为上次更新大约是 4 年前），我发现了 bug。计算移位的 sdf 函数是这样的：

```
var sdf = function (n) {
    return function () {
    var t = $D.today(), shift = n - t.getDay();
        if (n === 0 && $C.firstDayOfWeek === 1 && t.getDay() !== 0) {
            shift = shift + 7;
        }
        return t.addDays(shift);
    };
}; 
```

我已将其更改为：

```
var sdf = function (n) {
    return function () {
        var t = $D.today(), shift = n - t.getDay();

        if (n === 0 && $C.firstDayOfWeek === 1 && t.getDay() !== 0) {
            shift = shift + 7;
        } else if (t.getDay() === 0 && n !== 0) {
            shift = shift - 7;
        }
        return t.addDays(shift);
    };
}; 
```

显然，它解决了我的问题。我已经为这个问题制作了错误票，并发送了答案。

# android - 并非所有表都在 SQLite 数据库中创建

> ID：15185653
> 
> 赞同：1
> 
> 时间：2013-03-03T12:29:32.357
> 
> 标签：android, sql, sqlite

我有以下问题：每次我想访问 Logcat 中的“Stores”表时，我都会看到以下错误消息：

```
10-24 15:09:06.955: E/SQLiteLog(20264): (1) no such table: Stores 
```

但是当我删除数据库并再次创建所有表时，在 Logcat 中创建时没有看到任何错误。当我尝试访问或写入“类别”表时，我没有任何错误，只有“商店”。当我后来在 sqlitestudio 中浏览 SQLite 数据库时，我只看到带有我插入的值的表类别，坚果没有其他，结果也缺少“OpeningHours”。我是否有可能在尚未创建这些表时尝试访问这些表？

这就是我的创建代码：

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(context.getString(R.string.sql_create));
} 
```

这就是 SQL 代码

```
 <string name="sql_create">
CREATE  TABLE IF NOT EXISTS `Categories` (

  `idCategories` INTEGER  NOT NULL ,

  `name` TEXT,

  PRIMARY KEY (`idCategories`) );

CREATE  TABLE IF NOT EXISTS `Stores` (

  `idStores` INTEGER NOT NULL ,

  `name` TEXT NOT NULL ,

  `locationAdress` TEXT  ,

  `locationLongitude` INTEGER ,

  `locationLatitude` INTEGER ,

  `category` INTEGER  NOT NULL ,

  `telephoneNumerber` TEXT  ,

  PRIMARY KEY (`idStores`) );

CREATE  TABLE IF NOT EXISTS `OpeningHours` (

  `idOpeningHours` INTEGER  NOT NULL ,

  `store` INTEGER  NOT NULL ,

  `day` INTEGER ,

  `forenoon` TEXT  ,

  `afternoon` TEXT  ,

  PRIMARY KEY (`idOpeningHours`) );
    </string> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:36:36.730

Android`execSQL`执行单个语句： http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String))

这意味着您只创建一个表 -`OpeningHours`这是 SQL 脚本中的最后一条语句。您需要在一次`execSQL`调用中分离每个创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:37:38.843

尝试仅使用所有线程中的一个 SQLiteDatabase 实例。这样可以避免访问 SQLite 数据库的许多问题。

# servlets - 让浏览器搜索/提交与实际服务页 面相关的资源，而不是原始请求的资源？

> ID：15185654
> 
> 赞同：0
> 
> 时间：2013-03-03T12:29:32.783
> 
> 标签：servlets, browser, struts2

我有一个场景，我需要将来自 struts 2 动作的请求转发到不是 Struts 2 的遗留动作类。这是我的流程

```
JSP(serverd from struts 2 action under customer namespace)--->Action1(Struts 2 action under customer namespace)--->Action2(Non Struts 2 Action)--->ResultJSP. 
```

这是我的结果注释，它实际上将请求转发给遗留操作

```
@Result(name = "displayCustomer",location = "legacyAction.do", type = "dispatcher") 
```

我可以正确地看到我的 ResultJSP。但问题是浏览器正在寻找包含在该jsp 中的所有资源，如图像、命名空间下的javascript 文件，即客户（这是第一个操作命名空间，也是触发请求的JSP 页面的命名空间）。浏览器的默认行为是否会在触发请求的路径下查找页面资源（并提交表单）（假设路径是相对的）？

有没有一种方法可以让浏览器查找相对于实际页面路径而不是原始请求路径的资源？

可能是查询不是很清楚，但我尽力用文字表达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:00:06.380

我将尝试总结我们在评论中讨论的内容。首先，一定要了解客户端在服务器端做了什么。对于文档相关链接，浏览器会根据您在地址栏中看到的内容进行查找。这是一个[长答案](https://stackoverflow.com/questions/3655316/browser-cant-access-find-relative-resources-like-css-images-and-links-when-cal/3658735#3658735)，描述了在 jsp 中创建链接的各种方法。其次，您可以通过多种方式指示浏览器更改位置，例如发送重定向。但是对于重定向（`302`http 状态码），浏览器会发出 GET 请求。这对您不利，因为您正在执行 POST 并希望参数也被重定向。但是可以使用状态码代替`302`状态码。`307`这个很棘手，[我之前发布的链接](https://stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get)，虽然关于 .net（只是在谷歌上搜索重定向时弹出的第一个），但更详细地描述了这些状态代码，并且还提到了不使用 302 或 307 进行重定向的解决方案。这可以通过一些客户端 javascript 来完成。基本上，您不会转发到您的第二个操作，而是会返回一个带有表单和 javascript 的虚拟 jsp，它会在页面加载时立即将此表单提交给第二个操作。

现在说了这么多，对我来说 js/image 文件使用相对于你的 servlet 路径的链接似乎很奇怪。我会让这些相对于您的站点根目录。你可以把它们放在那里。如果您无法更改的某些遗留操作正在使用其他位置，您可以使用类似`UrlRewriteFilter`

# jsf-2 - JSF 中的验证组

> ID：15185658
> 
> 赞同：1
> 
> 时间：2013-03-03T12:29:52.277
> 
> 标签：jsf-2

我有两组，`inputText`每组都有自己的`commandbutton`

如何自己验证`commandbutton`每个*命令*按钮不会影响另一个组

```
 <h:form xmlns:p="http://primefaces.org/ui"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:bizbiz="http://java.sun.com/jsf/composite/util">  

    <h:head>
        <title>#{msg.Maintitle}</title>
    </h:head>

    <h:body dir="#{msg.orientation}">
        <!--        <h:form>
                    <p:panelGrid columns="3">

                        <bizbiz:loginPage/>
                        <bizbiz:signUp/>
                        <bizbiz:languageBar/>           
                    </p:panelGrid>
                </h:form>-->
        <h:form>
            <p:panelGrid id="SignUpMainPanel">
                <p:row>
                    <p:column>
                        <h:outputLabel value="#{signup_msg.firstname}"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <p:inputText value="#{AccountInfo.firstName}"  required="true"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel value="#{signup_msg.lastname}" />
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <p:inputText value="#{AccountInfo.lastName}" required="true" />
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel value="#{signup_msg.companyname}"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <p:inputText value="#{AccountInfo.companyName}" required="true" />
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel value="#{signup_msg.position}"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <p:inputText value="#{AccountInfo.position}"  required="true"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel value="#{signup_msg.mobileemail}"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <p:inputText value="#{AccountInfo.bizBizNetId}" required="true"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel value="#{signup_msg.password}"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <p:password value="#{AccountInfo.password}" required="true"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel value="#{signup_msg.retype}"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <p:inputText required="true"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel value="#{signup_msg.termandcondition}"/>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <p:commandButton value="#{signup_msg.SignUp}" action="#{loginManagedBean.nextPage()}" ajax="false" process="@form" />
                    </p:column>
                </p:row>
            </p:panelGrid>
        </h:form>

        <h:form>
            <p:panelGrid id="mainContainer">  

                <p:row>
                    <p:column>
                        <h:outputLabel  value="#{login_msg.userName}: "  />  
                    </p:column>

                    <p:column>
                        <p:inputText  value="#{loginManagedBean.userName}"  id="username" label="username" required="true" />  
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel  value="#{login_msg.Password}: " />  
                    </p:column>

                    <p:column>
                        <p:password   value="#{loginManagedBean.password}" id="password" label="Surname" />  
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        #{login_msg.remmember}  <p:selectBooleanCheckbox id="rememberMe" value="#{loginManagedBean.remmember}" /> 
                    </p:column>
                    <p:column>
                        <!--                        <p:message/> -->
                    </p:column>

                </p:row>

                <p:row>
                    <p:column>
                    </p:column>

                    <p:column>
                        <p:commandButton  value="#{login_msg.Login}" action="#{loginManagedBean.nextPage()}" ajax="false" process="@form" id="persianButtom"  icon="ui-icon-check" style="margin:0"/>  
                    </p:column>

                </p:row>

            </p:panelGrid>  
        </h:form>
    </h:body>

</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:23:44.053

`p:panelGrid`以不同的形式包括每一个怎么样。像这样的东西：

```
<h:form>
  <p:panelGrid id="panel1" columns="1">
    <p:inputText value="#{AccountInfo.firstName}"  required="true"/>
    <p:inputText value="#{AccountInfo.lastName}"  required="true"/> 
    <p:commandButton value="Sign Up" action="#{signUpManagedBean.signUp()}" ajax="false" />
  </p:panelGrid>
</h:form>

<h:form>
  <p:panelGrid id="panel2" columns="1">
    <p:inputText value="#{UserInfo.userName}"  required="true"/>
    <p:inputText value="#{UserInfo.password}"  required="true"/> 
    <p:commandButton value="Login" action="#{signUpManagedBean.login()}" ajax="false" />
  </p:panelGrid>
</h:form> 
```

# css - 固定项目在滚动时跳跃 - 仅在 MacOS Safari 中

> ID：15185659
> 
> 赞同：3
> 
> 时间：2013-03-03T12:29:54.263
> 
> 标签：css, macos, safari

我有一个网页，其样式为 div 内的固定侧边菜单，具有以下 css 样式：

```
div#sidemenu
{
  top: 120px; left: 800px;
  width: 135px; 
  height: 560px;
  background-image: url(img/bg.png);
  position: fixed;  
  z-index: 30;
} 
```

div很简单：

```
<div id="sidemenu">
<ul>
<li>link1</li>
...
<li>linkn</li>
</ul>
</div> 
```

当您向下滚动页面时，它应该保持固定。

它适用于 Windows 和 MacOS 上的所有非 Safari 浏览器（IE、FF、OP），甚至适用于 Windows 版本的 Safari，但不适用于 MacOS Safari。

**在 MacOS Safari 中，它保持固定，但在滚动时会上下跳跃/颤抖/颤抖。**

我针对这个问题研究了一段时间，比较了 css 的能力，降低了 z-index 并尝试修复底部。似乎没有任何效果。

有没有人也经历过这样的事情？并且：你能解决它吗？

附加信息：

*   bg 图像是带有透明胶片的 png
*   bg 图像的大小与容器 div 一样完美

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-26T01:18:34.013

我在跳跃 bg 图像方面也有类似的经历，一种似乎是跨浏览器的解决方法是在包装 div 中添加一个 div。重要的是给新的 div 一个高度，否则移动 safari 可能会在滚动时调整它。

```
<div id="sidemenu">
<div id="bg"></div>
<ul>
<li>link1</li>
...
<li>linkn</li>
</ul>
</div>
div#sidemenu
{
  top: 120px; left: 800px;
  width: 135px; 
  height: 560px;
  position: fixed;  
  z-index: 30;
}

#bg {
    z-index: -1;
    position: fixed;
    top: 0;
    left: 0;
    right:0;
    height: 500px;
    background-image: url(img/bg.png);
    background-position: 0 0;
} 
```

# macos - 使用 Homebrew 在 OS X 上更新 OpenSSL

> ID：15185661
> 
> 赞同：87
> 
> 时间：2013-03-03T12:30:17.533
> 
> 标签：macos, svn, openssl, homebrew

我正在使用 MacOS X 10.7.5，由于[握手失败](https://stackoverflow.com/questions/7363259/osx10-7-ssl-handshake-failed)，我需要更新的 OpenSSL 版本。互联网上有几个教程，我尝试了以下方法：

```
brew install openssl
brew link openssl --force 
```

然而，它不起作用：

```
openssl version
OpenSSL 0.9.8r 8 Feb 2011

brew unlink openssl && brew link openssl --force
Unlinking /usr/local/Cellar/openssl/1.0.1e... 1139 links removed
Linking /usr/local/Cellar/openssl/1.0.1e... 1139 symlinks created 
```

SVN 问题也没有解决。有任何想法吗？我宁愿不尝试 MacPorts 方式，因为它可能会干扰 Homebrew。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-06-21T09:23:39.777

如果您正在使用 Homebrew */usr/local/bin*应该已经位于`$PATH`或至少位于*/usr/bin*之前。如果您现在`brew link --force openssl`在终端窗口中运行，请打开一个新窗口并`which openssl`在其中运行。它现在应该显示`openssl`在*/usr/local/bin*下。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-11-12T21:48:11.993

用brew在mac上安装了openssl，但`/usr/local/bin`在其他brew安装的bin所在的位置没有找到。在这里找到我新鲜的 openssl：

`/usr/local/opt/openssl/bin/openssl`

像这样运行它：

`/usr/local/opt/openssl/bin/openssl version`

我不想更新 OS X openssl，而某些操作系统的东西或其他 3rd 方应用程序可能依赖于旧版本。

我也不介意更长的路`openssl`

在这里为所有正在寻找 brew 安装的 openssl 位置的 Google 员工写这篇文章。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-03-26T15:17:07.277

在终端中，运行：

```
export PATH=/usr/local/bin:$PATH
brew link --force openssl 
```

如果收到警告，您可能必须先取消链接 openssl：`brew unlink openssl`

这可以确保我们为这种情况链接正确的 openssl。（并且不会与 .profile 混淆）

向@Olaf 的回答和@Felipe 的评论致敬。有些人——比如我自己——可能有一些非常混乱的 PATH 变量。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-18T18:41:51.857

我遇到了这个问题，发现新版本的安装`openssl`确实有效，但我`PATH`的设置不正确——我`$PATH`的 brew 路径之前放置了端口路径，所以它总是找到旧版本的`openssl`.

`brew`对我来说，解决方法是将(/usr/local/bin)的路径放在我的`$PATH`.

要找出您从哪里加载`openssl`，请运行`which openssl`并记下输出。它将是您运行时系统使用的版本的位置`openssl`。`brew`它将位于“/usr/local/bin”路径之外的某个位置。更改您的`$PATH`，关闭该终端选项卡并打开一个新选项卡，然后运行`which openssl`​​. 您现在应该看到不同的路径，可能在 /usr/local/bin 下。现在运行`openssl version`，您应该会看到您安装的新版本“OpenSSL 1.0.1e 2013 年 2 月 11 日”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-05T21:00:22.423

为了回答您有关更新 openssl 的问题，我按照以下步骤成功将我的 Mac 上找到的版本更新到最新的 openssl 版本 1.0.1e。

我按照此处找到的步骤操作：http: [//foodpicky.com/?p=99](http://foodpicky.com/?p=99)

当您到达终端命令**make**和**make install**的步骤时，请务必使用**sudo make**和**sudo make install**（我必须一步一步完成两次，因为我没有 sudo 并且没有更新）。

希望这可以帮助

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-09T22:00:25.790

我在 OSX10.11 上运行 php56 的本地服务器上安装一些 Wordpress 插件时遇到问题。他们通过 SSL 连接外部 API 失败。

安装 openSSL 并没有解决我的问题。但后来我发现 CURL 也需要重新安装。

这解决了我使用 Homebrew 的问题。

```
brew rm curl && brew install curl --with-openssl

brew uninstall php56 && brew install php56 --with-homebrew-curl --with-openssl 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-07T03:32:53.403

在 mac OS X Yosemite 上，使用 brew 安装后，将其放入

> /usr/local/opt/openssl/bin/openssl

但是在尝试链接时不断收到错误“链接仅桶装 openssl 意味着您最终可能会链接到不安全的链接”

所以我只是通过像这样提供完整路径来链接它

```
ln -s /usr/local/opt/openssl/bin/openssl /usr/local/bin/openssl 
```

所以现在当我做

`$ openssl version -a`

它显示版本 OpenSSL 1.0.2o。

所以我想它奏效了！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-29T07:36:27.090

尝试：

```
mkdir homebrew && curl -L https://github.com/Homebrew/brew/tarball/master | tar xz --strip 1 -C homebrew 
```

之后尝试：

```
brew install homebrew/portable-ruby/portable-openssl 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-30T20:13:11.130

在 OSX Big Sur 上，我有一个非常令人沮丧的错误经历，因为所有解决方案都依赖于使用`brew install`. 但是运行`brew install`总是返回一个错误，例如：

```
Error: 
  homebrew-core is a shallow clone.
To `brew update`, first run:
  git -C /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core fetch --unshallow
This command may take a few minutes to run due to the large size of the repository.
This restriction has been made on GitHub's request because updating shallow
clones is an extremely expensive operation due to the tree layout and traffic of
Homebrew/homebrew-core and Homebrew/homebrew-cask. We don't do this for you
automatically to avoid repeatedly performing an expensive unshallow operation in
CI systems (which should instead be fixed to not use shallow clones). Sorry for
the inconvenience! 
```

但我无法运行该命令，因为 git 失败了：

```
% git -C /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core fetch --unshallow
dyld: Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib
  Referenced from: /usr/local/libexec/git-core/git-remote-https
  Reason: image not found 
```

最后，解决方案是**重新安装**git。

```
brew reinstall git 
```

然后根据需要更新符号链接：

```
brew link --overwrite git 
```

* * *

## 回答 #10

> 赞同：-8
> 
> 时间：2016-10-13T13:05:09.317

1.  安装端口：`https://guide.macports.org/`
2.  安装或升级 openssl 包：`sudo port install openssl`或`sudo port upgrade openssl`
3.  就是这样，运行`openssl version`看看结果。

# zend-framework2 - 如何在 Zend\Form 占位符属性中使用 HTML 标签

> ID：15185665
> 
> 赞同：0
> 
> 时间：2013-03-03T12:30:29.257
> 
> 标签：zend-framework2

我`Zend\Form`用来生成我的表格。我有一个**文本区域**，我想在其中显示一些默认文本。目前，我有这样的：

```
$this->add(array(                                                        
    'type' => 'textarea',                                                
    'name' => 'dialog',
    'options' => array(                                                  
        'label' => 'Dialog',                                             
    ),
    'attributes' => array(
        'placeholder' => 'Person1: Hello!<br />Person2: Hi!',                                               
    ),                                                                   
)); 
```

但是，这会导致`<br />`被转义到`&lt;br /&gt;`.

有没有办法通过在占位符中嵌入 HTML 标签`Zend\Form`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:35:26.667

你不能也不应该。请看[官方规格](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-placeholder-attribute)：

> **占位符**属性表示一个简短的提示（一个单词或短语），用于在控件没有值时帮助用户输入数据。提示可以是示例值或预期格式的简要描述。如果指定，该属性**的值必须不包含 U+000A LINE FEED (LF) 或 U+000D CARRIAGE RETURN (CR) 字符**。

如果您绝对必须模仿这种行为，请通过 JavaScript 进行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T19:35:54.627

作为参考，在 ZF1 中，您可以在 textarea 中创建一个带有默认文本的元素：

```
 $this->createElement(
        'textarea',
        'content', 
        array(
            'label' => 'Address', 
            'rows' => '3', 
            'value' => 'default value'
        )
    ); 
```

对于 ZF2，我建议查看以下文档：

[文本区域文档](http://framework.zend.com/apidoc/2.1/classes/Zend.Form.Element.Textarea.html)

您与 for 元素一起使用的库组件是，

```
class Element implements
    ElementAttributeRemovalInterface,
    ElementInterface,
    InitializableInterface 
```

可在库中的 \Zend\Form\Element 中找到。您可以在课程中看到有多种方法可以自定义表单元素，其中包括 ::setValue()，您可以使用这些方法在表单元素上设置值。

我相信这是您正在寻找的，即如果您想要做的只是使用默认文本，那么您不需要在占位符属性中使用 html 标记。

# algorithm - 求解 T(n) = 4T(n/2)+n²

> ID：15185666
> 
> 赞同：5
> 
> 时间：2013-03-03T12:30:45.180
> 
> 标签：algorithm, complexity-theory, recurrence

我正在尝试使用替换方法解决重复问题。递归关系为：

> T(n) = 4T(n/2)+n ²

我的猜测是 T(n) 是 Θ(nlogn) （由于主定理，我对此很确定），为了找到一个上限，我使用归纳法。我试图证明 T(n)<=cn ² logn，但这不起作用。

我得到了 T(n)<=cn ² logn+n ²。然后我试图证明，如果 T(n)<=c [1] n ² logn-c [2] n ²，那么它也是 O(n ² logn)，但这也没有用，我得到了 T(n) <=c [1] n ² log(n/2)-c [2] n ² +n ² `。

我该如何解决这种复发？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T12:48:41.383

```
T(n) = 4T(n/2) + n 2 
     = n 2 + 4[4T(n/4) + n²/4]
     = 2n 2 + 16T(n/4)
     = ...
     = k⋅n 2 + 4 k T(n/2 k )
     = ...

```

到达时该过程停止。 ⇒ ⇒`2^k``n`
`k = log[2]n`
`T(n) = O(n²logn)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T12:49:55.963

![递归调用示意图](../Images/6d54f14d6c701a9aeda2fb8f9df29197.png)

您可以以非递归形式重写您的方程式

![T(n) 的非递归形式](../Images/4022c5799233d9402d030085d6441310.png)

您的递归方程非常简单：每次展开 T(n/2) 时，只会出现一个新项。因此，在非递归形式中，您将获得二次项的总和。你只需要证明 A(n) 是`log(n)`（我把它留给你作为一个简单的练习）。

# jquery - jQuery动态表单字段数组

> ID：15185674
> 
> 赞同：0
> 
> 时间：2013-03-03T12:31:34.223
> 
> 标签：jquery, arrays

我有一个 html 表单。一个条目可以使用不同的值多次添加，并以数组的形式命名（如`fieldname[]`）。单击 [+] 按钮使用 [-] 按钮创建新字段，单击将删除该条目。

```
<table cellpadding="0" cellspacing="0">
<tr>
<td>Item</td>
<td id="resource">
<input id="item" name="item[]" type="text" value="">
</td>
<td>
<img id="addScnt" alt="[+]">&nbsp;</td>
</tr>
<br>
<button id="go">go</button>
</table>

jQuery(document).ready(function($){
    var scntDiv = $('#resource');
    var i = $('#resource p').size() + 1;
    var name = $('#resource p');
    $('#addScnt').live('click', function() {
        $('<tr><td class="" id=""><input id="item" name="item[]" type="text" value=""><img id="remScnt" alt="[-]"></td></tr>').appendTo(scntDiv);
        i++;
        return false;
    });
    $('#remScnt').live('click', function() {
        if( i > 1 ) {
                $(this).parent().parent().remove();
                i--;
        }
        return false;
    });
}); 
```

这是**[小提琴](http://jsfiddle.net/hjNdb/1/)**

我想要的是，当我单击 go 按钮时，应该使用输入元素创建一个数组，从索引 0 开始，作为第一个条目的值。此外，应该使用相同的值为行指定 id（0 表示第一行，1 表示第二行，等等）。我在 CSS 上定义了一些 id，如果分配了 id，它可能会改变颜色。数组最终可能会收到警报（我想将它与 ajax 一起使用，以逐个传递值）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:43:12.250

这是一个例子：http: [//jsfiddle.net/hjNdb/2/](http://jsfiddle.net/hjNdb/2/)

```
$(function () {
    var scntDiv = $('#resource');
    var i = $('#resource p').size() + 1;
    var name = $('#resource p');
    $('#addScnt').live('click', function () {
        var id = $('input').length; // Id attribution
        $('<tr><td class=""><input id="item' + id + '" name="item[]" type="text" value=""><img id="remScnt" alt="[-]"></td></tr>').appendTo(scntDiv);
        i++;
        return false;
    });
    $('#remScnt').live('click', function () {
        if (i > 1) {
            $(this).parent().parent().remove();
            i--;
        }
        return false;
    });

    //Array construction
    $('#go').click(function () {
        var myArray = [];
        $('input').each(function () {
            myArray.push($(this).val());
        });
        alert(myArray)
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:51:27.157

`table`您应该在not in 中添加行，`td`因此首先您必须对其进行编码`proper format`

它应该是这样的：

```
<table cellspacing="0" cellpadding="0" id="table">
<tbody>
   <tr>
      <td>Item</td>
      <td id="resource">
          <input type="text" value="" name="item[]" id="item" class="">
      </td>
      <td>
          <img alt="[+]" id="addScnt" class="add">&nbsp;</td>
   </tr>
   <tr>
      <td>Item</td>
      <td id="" class=""><input type="text" value="" name="item[]" id="item"></td>
      <td><img alt="[-]" id="remScnt" class="minus"></td>
   </tr>
</tbody>
</table> 
```

而对于按钮`go`

代码是

```
$('#go').live('click',function(){
    $('input[name="item[]"]').each(function(){
    alert($(this).val());//code what you want on click of button
    });
}); 
```

检查小提琴[http://jsfiddle.net/hjNdb/5/](http://jsfiddle.net/hjNdb/5/)

# math - 计算3d旋转后的y距离？

> ID：15185676
> 
> 赞同：0
> 
> 时间：2013-03-03T12:31:35.717
> 
> 标签：math, 3d

我先说我数学很差，

在将包含该圆的图像在 3d 中旋转 45 度后，我试图计算圆与屏幕中心之间的距离，

（物体的y距离随着图像的旋转而变化）

![图片](../Images/b0f61d16175ed36411d2fb1d19acd8ce.png)

我希望我说得足够清楚，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:01:49.717

忽略透视，到屏幕中心的距离遵循余弦。高度将是：

```
rotatedY = cos(angle) * originalY; 
```

代入 45 度导致

```
rotatedY = cos(45) * originalY = 0.707 * originalY; 
```

那么怎么样，圆总是在原始未旋转 Y 值高度的 70% 处。

我可以问你想做什么吗？也许我可以给你一个更好的答案。

# regex - 用于处理子域并删除 www 的正则表达式

> ID：15185681
> 
> 赞同：0
> 
> 时间：2013-03-03T12:31:55.800
> 
> 标签：regex, mod-rewrite

以下内容对我有用（删除 www），但我注意到开始弄乱子域，因为它不够具体

```
RewriteCond %{HTTP_HOST} !^site.com$ [NC]
RewriteRule ^(.*)$ http://site.com/$1 [R,L] 
```

所以我加了

```
 RewriteCond %{HTTP_HOST} !^hotels$ [NC]
    RewriteRule ^(.*)$ http://hotels.site.com/$1 [R,L] 
```

显然不正确（根本不需要第二部分） - 然后我明白我需要在第一部分中转义 url 中的点（句点），但现在也让它更具体，它不需要匹配 www.hotels。 site.com - 在这种情况下，我仍然想删除 www，但我想重定向到子域。所以简而言之，我总是想删除 www 并保持子域正常工作。

```
RewriteCond %{HTTP_HOST} !^www\.site\.com$ [NC] 
```

所以最后一行非常具体，应该只匹配 www.site.com

那为什么不呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:33:37.743

`^www\.site\.com$`只会完全匹配`www.site.com`。

`^hotels$`只会完全匹配`hotels`- 也许您的意思是`^hotels`which 匹配以 . 开头的任何内容`hotels`。

我发现您的要求难以理解，但如果您只想删除`www`您可以使用

```
RewriteCond %{HTTP_HOST} ^www\.(.+) [NC]
RewriteRule ^.*$ http://%1/$0 [R,L] 
```

# sql - 设计数据库表结构

> ID：15185684
> 
> 赞同：-1
> 
> 时间：2013-03-03T12:32:04.427
> 
> 标签：sql, database, database-design, data-structures, data-modeling

我正在使用关系数据库编写应用程序。我有必须保存在数据库中的**文档实体。**该文档只是具有许多行和列的大表：

![文件结构](../Images/1e9c36107a8b0114f6503320b639abd9.png)

但问题是许多行和列可能会因情况而异。每个文档都可以有自己的一组行和列。偶数行和列可以改变。因此，我不能只`DOCUMENT`在数据库中创建单个表。在这种情况下，我将不得不使用[DDL](http://en.wikipedia.org/wiki/Data_definition_language)不断更改表的结构。

我需要想出灵活和适应性强的数据库结构。因此，用户只有数据操作权（[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete) -操作）可以使用这个数据库方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:47:07.627

*文件中*有什么？他们的本质是什么？

您是否需要对各个属性进行排序/过滤/计数/等？

您可以将文档存储在一个文本字段中并使用全文搜索来搜索它们。

或者您可以将它们存储在 Solr/Lucene 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:31:12.907

我想到的一件事如下：您为每个属性创建一个表`document`。像名字，创建日期或其他任何东西。

对于所有可能发生变化的事情，您创建另一个表，您可以在其中插入数据，这确实存在。像这样：

```
document_id paramater_name string_value    int_value date_value
----------- -------------- --------------- --------- -----------
      1987         comment     "cool doc."
      1987        due_date                            12/24/2014
     20124        old_name         abc.txt
     20124            cost                      1.99 
```

但可以肯定的是，这是很多工作！

# matlab - 对单位使用 sqrt 函数时出错

> ID：15185685
> 
> 赞同：3
> 
> 时间：2013-03-03T12:32:07.577
> 
> 标签：matlab

我正在执行此代码，其中包含以下代码行：

```
sf_den=sqrt(sf_den+a*b); 
```

但是我收到以下错误，我不知道为什么

```
Undefined function or method 'sqrt' for input arguments of type 'uint8'. 
```

a 的值为 0，b 的值为 <171x210x3 uint8>
我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T12:33:32.160

将数据转换**为**受支持的类型`sqrt`。例如：

```
sf_den = sqrt(double(sf_den + a*b)); 
```

# php - PHP `-l` 标志未发现错误

> ID：15185690
> 
> 赞同：1
> 
> 时间：2013-03-03T12:32:30.107
> 
> 标签：php

为什么 PHP`-l`开关在`test.html`.

```
$ cat test.html 
<?php
error_reporting(E_ALL);
echo "Hello, world!";

sdfsdfsdfsdf

?>
$ php -dhtml_errors=0 -ddisplay_errors=On -l test.html 
No syntax errors detected in test.html
$ php test.html 
Hello, world!PHP Notice:  Use of undefined constant sdfsdfsdfsdf - assumed 'sdfsdfsdfsdf' in test.html on line 7
$ 
```

也没有发现其他类型的错误，例如未定义的函数、`require_once()`不存在的文件、数组声明中的语法错误等。为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:47:06.610

> `-l`仅语法检查（lint）

`-l`执行静态语法检查。代码从未真正执行过。而且在您的代码中没有语法错误。

文件末尾的乱码被视为常量（因为它是常量的有效名称），未定义的常量评估为它们的字符串表示（并导致 E_NOTICE）。由于它是文件中的最后一条语句，因此缺少的分号也不会导致语法错误。

由于 PHP 是一种动态语言，因此如果不执行代码就无法检测到未定义的常量——`define()`毕竟它只是一个普通函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T12:37:05.693

这些不是语法错误，而是运行时错误。-l 仅对文件进行 lints。

# c++ - 线程同步没有得到预期的输出

> ID：15185692
> 
> 赞同：1
> 
> 时间：2013-03-03T12:32:35.487
> 
> 标签：c++, multithreading, pthreads

我没有得到任何输出，但我期待输出，因为下面的*THREAD1 THREAD2*是代码..

```
#include<iostream>
#include<pthread.h>

using namespace std;

void* fun(void *arg)
{
   char *msg;
   msg = (char*)arg;
   cout<<msg<<endl;
}

int main()
{

   pthread_t t1,t2;

   t1 = pthread_create(&t1,NULL,fun,(void*)"THREAD1");
   t2 = pthread_create(&t2,NULL,fun,(void*)"THREAD2");

   pthread_join(t1,NULL);
   pthread_join(t2,NULL);
  // sleep (2);
   return 0;
} 
```

我将上面的代码更改为

```
 pthread_create(&t1,NULL,fun,(void*)"THREAD1");
   pthread_create(&t2,NULL,fun,(void*)"THREAD2"); 
```

现在我得到*THREAD2 THREAD1*但我需要*THREAD1 THREAD2*

现在我将代码更改为 >

```
pthread_create(&t1,NULL,fun,(void*)"THREAD1");
pthread_join(t1,NULL);    

pthread_create(&t2,NULL,fun,(void*)"THREAD2");
pthread_join(t2,NULL); 
```

现在我的结果是正确的*THREAD1 THREAD2*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:38:25.863

```
t1 = pthread_create(&t1,NULL,fun,(void*)"THREAD1"); 
```

这不好。`pthread_create`返回一个整数返回码，而不是`pthread_t`. 您正在用不应该存在的东西覆盖`t1`and ，随后的调用可能会崩溃或产生其他不可预测的结果。`t2``pthread_join`

```
int rc1 = pthread_create(...);
if (rc1 != 0) { 
  // handle error
} 
```

还需要按照您定义的方式`fun`返回*某些内容。*或者将其返回类型更改为 void。

# symfony - 如何在 Symfony 2.1 上的 EmbeddedForm 上级联客户端验证

> ID：15185694
> 
> 赞同：1
> 
> 时间：2013-03-03T12:32:44.340
> 
> 标签：symfony, symfony-2.1, cascade, client-side-validation

我有 2 个用 buildForm 构建的表单。

这是`Score`buildForm：

```
public function buildForm(FormBuilderInterface $builder, array $options){
    $builder->add('mesPoints','integer',array('required' => true))
            ->add('pointsAdversaire','integer',array('required' => true));
} 
```

这是`Combat`buildForm：

```
public function buildForm(FormBuilderInterface $builder, array $options){
    $builder->add('tour','integer')
            ->add('score',new CompetitionCombatScoreType(),array('required' => false));
} 
```

当我创建一个`Score`时，如果我不填写`mesPoints`并且`pointsAdversaire`我有一个弹出窗口，表明我必须填写这两个字段。

当我`Score`从 a创建 a 时`Combat`，我只有教义例外。

如果我对`Score`模型有限制并且我`'cascade_validation' => true`对`Combat`buildForm有限制`DefaultOptions`，则页面会重新加载并告诉我必须填写该字段。

但是我无法获得与直接创建分数时相同的结果：使用来自客户端验证的弹出窗口。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T03:21:51.197

第一种情况由客户端原生 HTML5 字段验证管理 - 输入具有`required`属性。

在第二种情况下，您标记`score`为不需要，因此子输入没有`required`属性，这就是客户端验证`score`以空值通过的原因。

# objective-c - 截屏时质量下降

> ID：15185698
> 
> 赞同：1
> 
> 时间：2013-03-03T12:33:10.457
> 
> 标签：objective-c, uiview

我正在使用以下代码捕获应用程序当前显示的屏幕的一部分：

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *sourceImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIGraphicsBeginImageContext(CGSizeMake(320, 320));
[sourceImage drawAtPoint:CGPointMake(0, -45)];
UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

问题是，与原始屏幕相比，结果降低了质量。如何防止质量损失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T12:38:05.803

给你信息。

```
// Create a graphics context with the target size
// On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
// On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
CGSize imageSize = [[UIScreen mainScreen] bounds].size;
if (NULL != UIGraphicsBeginImageContextWithOptions)
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
else
    UIGraphicsBeginImageContext(imageSize);

CGContextRef context = UIGraphicsGetCurrentContext(); 
```

# c++ - 在 C++ 中存储常量

> ID：15185699
> 
> 赞同：2
> 
> 时间：2013-03-03T12:33:14.073
> 
> 标签：c++, string, global-variables, constants

我想将我的程序的目录结构存储为常量字符串的结构，但 C++ 不允许我以任何直观的方式进行操作。

所以这不起作用：

```
struct DirStructure {
    static const std::string entities = "./entities";
    static const std::string scripts = "./scripts";
} 
```

这也不是：

```
struct DirStructure {
    static const std::string entities() const = { return "./entities"; }
    static const std::string scripts() const { return "./scripts"; }
} 
```

（实际上它没有 const，但我不太喜欢它）。

这有效：

```
namespace DirStructure {
    static const std::string entities = "./entities";
    static const std::string scripts = "./scripts";
} 
```

但它还有其他一些问题。

处理此类问题的标准方法是什么（假设我宁愿避免`#define MY_SCRIPTS_DIR_PATH "./scripts"`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:41:23.187

想到了三种方法。前两个类似于你的方法，后者是我可能使用的更典型的方法

## #1 - 匿名命名空间 + 内联`constexpr`函数

出于我的目的，这解决了除 1 个问题之外的所有问题：

```
#include <string>

namespace DirStructure {
    namespace {
        inline constexpr char const* const entities() { return "./entities"; }
    }
};

int main()
{
    std::string e = DirStructure::entities();
} 
```

剩下的一个问题是字符串文字不能包含嵌入的 NUL 字符（这在文件路径的情况下不是问题）。

## #2 - 聚合初始化

另一种方法可能是

```
#include <string>

struct DirStructure
{
    std::string entities, scripts;
};

inline static const DirStructure& Config()
{
    static DirStructure _s = { "./entities", "./scripts" };
    return _s;
}

int main()
{
    std::string e = Config().entities;
} 
```

## #3 - 富有表现力的类型

通常我自己实际***使用***的类似于：

```
#include <string>
#include <map>
#include <boost/filesystem.hpp>

int main()
{
    const std::map<std::string, boost::filesystem::path> DirStructure = { 
        { "entities", "./entities" },  
        { "scripts", "./scripts" } 
    };
    auto const& e = DirStructure.at("entities");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T12:39:43.520

您的第一个版本应该可以正常工作，只需稍作调整。您应该将您的声明与您的定义分开。

```
# Declaration in dirstructure.h
struct DirStructure {
    static const std::string entities;
    static const std::string scripts;
}

# Definition in dirstructure.cpp
const std::string DirStructure::entities("./entities");
const std::string DirStructure::scripts("./scripts"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:39:58.060

> source.cpp:4:54：错误：非文字类型的静态数据成员“const string DirStructure::entities”的类内初始化
> 
> source.cpp:4:54：错误：静态成员“DirStructure::entities”的非常量类内初始化无效
> 
> source.cpp:4:54：错误：（需要类外初始化）

`g++`告诉您需要进行类外初始化，因此：

```
struct DirStructure {
    static const std::string entities;
    static const std::string scripts;
}

const std::string DirStructure::entities = "blah";
const std::string DirStructure::scripts = "blah2"; 
```

作品。但我也更喜欢命名空间之一。

# haskell - 将高阶函数提升到 monad

> ID：15185701
> 
> 赞同：5
> 
> 时间：2013-03-03T12:33:26.100
> 
> 标签：haskell, functional-programming, monads

假设我有一个高阶函数，它使用从函数参数中检索到的值执行一些计算。

```
f :: a -> (b -> c) -> d 
```

其中 a,b,c,d 是一些具体类型。

然后我有这种类型的功能

```
g :: b -> m c 
```

其中 m 是一些单子。

现在有一种方法可以将 g 与 f 一起使用。那就是把 f 变成一个函数，它产生`m d`而不是`d`使用 g 作为它的第二个参数？

一个具体的例子是 m 是 IO monad，f 是一个函数，计算从其函数参数中检索到的 n 个数字的总和，而 g 从标准输入中读取一个数字。

```
f n g = sum $ map g (1..n)
g :: Int -> IO Int
g _ = readLn 
```

我知道有一些函数可以将标准输入转换为惰性列表，这可以解决这个问题，但我的实际情况并不是那么简单。

假设我有一个在图上做某事的算法。该算法使用功能参数来确定节点的邻居。这样我就可以有多个图的实现。

现在我想将此算法与非确定性图（List monad）或不完全已知的图（Maybe monad）一起使用。我知道我可以重写算法以使用单子，然后将身份单子用于基本情况，但这是唯一的方法吗？我认为在没有单子的情况下编写算法会更容易。

这种行为可能吗？我找不到不应该这样做的原因，但我无法找到解决方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T12:46:17.907

所以你想例如派生`mapM`given `map`。那就是你有一个简单的`map`：

```
map  :: (a -> b) -> [a] -> [b] 
```

并且您想将其用作[`map`单子结构](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#g:4)

```
mapM :: Monad m => (a -> m b) -> [a] -> m [b] 
```

我们可以通过映射 IO 操作，然后对它们进行排序来计算`mapM`，`map`因此：

```
mapM f xs = sequence (map f xs) 
```

现在我们有了更一般的形式，我们可以通过在[Identity monad](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Data-Functor-Identity.html#t%3aIdentity)`map`中运行来返回。然后经典在身份单子中。`mapM``map``mapM`

```
> let g :: Int -> Identity Int
      g a = return (a^2) 
```

在哪里：

```
> runIdentity $ mapM g [1..10]
[1,4,9,16,25,36,49,64,81,100] 
```

所以是的，你需要将你的高阶函数泛化到正确的水平——无论是单子、函子还是应用程序，然后你可以自由地替换其他计算概念，包括恒等式。

您可以通过转换函数的 AST 将任何纯函数机械地重写为其一元函数：

*   将结果值包装在`return`
*   识别新的单子子表达式，并绑定它们。
*   用一元绑定替换变量绑定；或者，如果适用：
*   用 monad 中的应用程序替换应用程序（要小心）

例如

```
map f []     = []
map f (x:xs) = f x : map f xs 
```

To（应用风格）

```
mapM f []     = return []
mapM f (x:xs) = (:) <$> f x <*> mapM' f xs 
```

或不太清楚，并确定评估顺序：

```
mapM f []     = return []
mapM f (x:xs) = do
    v  <- f x
    vs <- mapM f xs
    return (v:vs) 
```

我们可以为 map 使用应用程序，因为不需要单子绑定来将结果从一步传递到下一步。不是这样`foldl`：

```
foldl        :: (a -> b -> a) -> a -> [b] -> a
foldl f z0 xs0 = lgo z0 xs0
     where
        lgo z []     =  z
        lgo z (x:xs) = lgo (f z x) xs

foldlM :: Monad m => (a -> b -> m a) -> a -> [b] -> m a
foldlM f z0 xs0 = lgo z0 xs0
     where
        lgo z []     = return z
        lgo z (x:xs) = do
            v <- f z x
            lgo v xs 
```

# java - DAO 和服务层的设计模式

> ID：15185705
> 
> 赞同：1
> 
> 时间：2013-03-03T12:33:35.333
> 
> 标签：java, spring, hibernate, design-patterns, jpa-2.0

我对 DAO 和服务层模式有疑问，我将 Spring 3 和 Hibernate 4 用于小型应用程序。

关于我的申请的小描述

我有一个小型应用程序，其中员工和部门数据以 JSF 形式显示。

部门数据使用主数据表以表格形式显示，相关员工数据也使用数据表以表格形式显示，这是明细（主-明细）方案。单击主数据表中的按钮后，将显示一个弹出窗口，可以在其中输入有关部门的详细信息并将数据保留在数据库表中（删除和更新的情况相同）

我的设计如下

**DAO 层**

```
public interface GenericDAO<T> {
    public void create(T entity);
    public void update(T entity);
    public void delete(T entity);
}

public interface DepartmentDAO extends GenericDAO<Department>
--methods for getting Department list and others
  public void findDepartment(DepartmentData data);
  -----

 public interface EmployeeDAO extends GenericDAO<Employee>
 --methods for getting Employeelist and others
 --- 
```

**服务层**

```
public interface DepartmentService {
 public void findDepartment(DepartmentData data);
 -- other methods
 }

@Transactional
@Named
public class DepartmentServiceImpl implements DepartmentService {

@Inject
DepartmentDAO departmentDAO;

-- implementation of methods
}

public interface EmployeeService {
 public void findEmployees(EmployeeData data);
 -- other methods
 }

@Transactional
@Named
public class EmployeeServiceImpl implements EmployeeService {

@Inject
EmployeeDAO employeeDAO;

-- implementation of methods
} 
```

我的问题是我应该为 Department 和 Employee 使用一个单一的服务接口或类，因为我为我的 JSF 表单使用一个 ManagedBean，还是应该为 Department 和 Employee 使用单独的接口和类？使用@Transactional 在一个服务实现类中拥有所有DAO 方法，在数据库事务时会不会有任何性能问题？是否建议使用类似于 GenericDAO 的通用服务接口？

任何帮助是非常可观的？

更新 1

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd"
>   
    <context:component-scan base-package="net.test" />
    <!-- Data Source Declaration -->    
    <bean id="DataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/myDS"/>     
</bean>
    <bean
        class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />
    <bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator" />
    <!-- JPA Entity Manager Factory -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="packagesToScan" value="net.test.entity" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="false" />
                <property name="databasePlatform" value="${jdbc.dialectClass}" />
            </bean>
        </property>
    </bean>
    <bean id="defaultLobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler" />
    <!-- Session Factory Declaration -->
    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.test.entity.Employee</value>
                <value>net.test.entity.Department</value>

            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.query.factory_class">org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory
                </prop>
            </props>
        </property>
    </bean> 
    <tx:annotation-driven transaction-manager="txManager" />
    <tx:annotation-driven transaction-manager="transactionManager" />   
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>
    <!-- <tx:annotation-driven transaction-manager="txManager"/> -->
    <context:annotation-config />
    <bean id="hibernateStatisticsMBean" class="org.hibernate.jmx.StatisticsService">
        <property name="statisticsEnabled" value="true" />
        <property name="sessionFactory" value="#{entityManagerFactory.sessionFactory}" />
    </bean>
    <bean name="ehCacheManagerMBean"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" />
    <bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true" />
    </bean>
    <bean id="jmxExporter" class="org.springframework.jmx.export.MBeanExporter"
        lazy-init="false">
        <property name="server" ref="mbeanServer" />
        <property name="registrationBehaviorName" value="REGISTRATION_REPLACE_EXISTING" />
        <property name="beans">
            <map>
                <entry key="SpringBeans:name=hibernateStatisticsMBean"
                    value-ref="hibernateStatisticsMBean" />
                <entry key="SpringBeans:name=ehCacheManagerMBean" value-ref="ehCacheManagerMBean" />
            </map>
        </property>
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:02:27.223

要真正回答这个问题，我们需要有关如何配置 @Transactional 语义的详细信息。例如，每个 DAO 最终会在单独的事务中运行，还是会在 Java 级别急切地连接在一起而在数据库级别延迟连接等等。

假设只有一个数据库的“通用”配置，并且连接被懒惰地重用，因为服务加入了共享请求级事务；无论您使用一项还是两项服务，我都不会担心。

从性能的角度来看，对数据库的往返次数、数据库请求的工作负载以及事务在数据库级别保持多长时间会产生很大影响。让一个或两个 Java 对象加入一个 Java 级别的事务，该事务可能会或可能不会由数据库连接（更不用说事务）支持，这不会使性能数字相形见绌。您可能会发现序列化多个单独的请求会增加延迟，在这种情况下，可能需要组合、批处理或缓存某些查询。最好从单个 DAO 中完成；但是，只有在您遇到测量的性能问题时才这样做。

团队约定和传达设计/域模型的意图在这里将变得更加重要。因此，我认为您是最适合回答您自己的问题的人，即是否使用一项或两项服务。

# c - LZ78 算法 - 填充字典后覆盖字典？

> ID：15185706
> 
> 赞同：0
> 
> 时间：2013-03-03T12:34:02.760
> 
> 标签：c, compression

我对 LZ78 算法的实现方法有疑问 - 在将字典填充到第一个索引后是否有可能添加新的“关键字”？看我的代码：

```
//adding new word to dictionary
int dodaj(unsigned char *dop )
{
  int i;
  slownik[ adresy[ilosc]*257 ] = dop[0];
  for(i=1;i<dop[0]+1;i++)
    slownik[ adresy[ilosc]*257+i ] = dop[i];
  ilosc++;
  if( ilosc>ROZMIAR-1 ) przesun();
}

//move location in dictionary, if full
int przesun()
{
  int i,b;
  b = adresy[0];
  for( i=0; i<ROZMIAR-1; i++ )
  {
    adresy[i] = adresy[i+1];
  }
  adresy[ ROZMIAR-1] = b;
  ilosc--;
} 
```

在我的代码中，填充字典后，所有出现都被移动-1，最后一个被覆盖。你们有任何想法如何修改此代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:09:28.640

这个循环，如果我们从`adresy`包含开始`a, b, c, d`，`ROZMIAR=4`将导致：

对于（我=0；我

`adresy`包含`b, b, b, b`.

我怀疑你想从顶部开始走下来？

我必须注意，我不完全理解您的代码，并且我发现很难阅读变量看起来像名称的代码，但我无法理解它们的含义。

# php - GitHub 访问令牌 POST 错误（需要 Cookie）

> ID：15185707
> 
> 赞同：0
> 
> 时间：2013-03-03T12:34:10.077
> 
> 标签：php, cookies, oauth-2.0, access-token, github-api

我有一个 PHP 应用程序，我正在尝试与 GitHub 集成。从身份验证中获取代码并尝试将其与 access_token 交换后，出现以下错误

```
Cookies must be enabled to use GitHub. 
```

我正在使用 cURL 库来执行我的请求。我设置的标题是

*   内容长度：{length}
*   接受：应用程序/json
*   用户代理：我的应用

可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T13:34:01.143

利用

```
/* cURL will start a new cookie session and ignore any previous cookies */
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
/* this is the name of the file where cURL should save cookie information */
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt'); 
// could be empty, but cause problems on some hosts 
```

# html - 里面 标签，验证错误

> ID：15185709
> 
> 赞同：3
> 
> 时间：2013-03-03T12:34:23.173
> 
> 标签：html, validation

有验证错误，不知道为什么会发生，有人可以帮我解决它吗？

第 317 行，第 26 列：在此上下文中，元素 h3 不允许作为元素 span 的子元素。（抑制来自该子树的更多错误。）

```
<h3 class="menuHT"><span class="sdt_link">Home</span></h3> 
```

元素跨度的内容模型：短语内容。

```
<ul id="sdt_menu" class="sdt_menu">
    <li>
     <a href="home.html">
      <img src="images/imagesPop/2.jpg" alt=" Woman with child walking up the hill">
      <span class="sdt_active"></span>
      <span class="sdt_wrap">
       <h3 class="menuHT"><span class="sdt_link">Home</span></h3>
       <h6 class="menuHB"><span class="sdt_descr">Main page</span></h6>
      </span>
     </a>
    </li>
    <li>
     <a href="about.html">
      <img src="images/imagesPop/6.jpg" alt="The old image of Lulworth tower">
      <span class="sdt_active"></span>
      <span class="sdt_wrap">
       <h4 class="menuHT"><span class="sdt_link">About</span></h4>
       <h6 class="menuHB"><span class="sdt_descr">General Info.</span></h6>
      </span>
     </a>
     <div class="sdt_box">
      <a href="home.html">blablabla</a>
      <a href="home.html#AboutSection">Shopping Cart</a>
      <a href="#">Interactive Maps</a>
     </div>
    </li>
    <li>
     <a href="attractions.html">
      <img src="images/imagesPop/1.jpg" alt="The rock arc know as Durdle Door">
      <span class="sdt_active"></span>
      <span class="sdt_wrap">
       <h4 class="menuHT"><span class="sdt_link">Attractions</span></h4>
       <h6 class="menuHB"><span class="sdt_descr">Place to visit</span></h6>
      </span>
     </a>
     <div class="sdt_box">
       <a href="#">Websites</a>
       <a href="#">Illustrations</a>
       <a href="#">Photography</a>
     </div>
    </li>
    <li>
     <a href="gallery.html">
      <img src="images/imagesPop/3.jpg" alt="Human taking photo (front view of how he do it)">
      <span class="sdt_active"></span>
      <span class="sdt_wrap">
       <h4 class="menuHT"><span class="sdt_link">Gallery</span></h4>
       <h6 class="menuHB"><span class="sdt_descr">Slide shows</span></h6>
      </span>
     </a>
    </li>
    <li>
     <a href="directions.html">
      <img src="images/imagesPop/5.jpg" alt="Path which dissapear at the end">
      <span class="sdt_active"></span>
      <span class="sdt_wrap">
       <h4 class="menuHT"><span class="sdt_link">Location</span></h4>
       <h6 class="menuHB"><span class="sdt_descr">Travel Info.</span></h6>
      </span>
     </a>
    </li>
    <li>
     <a href="accommodation.html">
      <img src="images/imagesPop/4.jpg" alt="Old fashion house (in Lulworth village)">
      <span class="sdt_active"></span>
      <span class="sdt_wrap">
       <h4 class="menuHT"><span class="sdt_link">Accommodation</span></h4>
       <h6 class="menuHB"><span class="sdt_descr">Hotel, flats</span></h6>
      </span>
     </a>

    </li>
   </ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T12:43:36.803

`h3`是 - 像所有标题元素一样 - 块级元素。`span`另一边是一个内联元素。而且您不能将块元素放在内联元素中。请注意，验证器并不关心实际样式，而是关心是 a 的子项`display`这一事实。`h3``span`

修复它的方法是不在这个地方使用标题标签。无论如何，它们对于菜单来说在语义上是错误的！忽略语义的另一种选择是制作`.sdt_wrap`a`div`而不是 a`span`

![对于 lulz](../Images/5746266a4b5c740d37bb3875499389b3.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T12:40:22.757

你会有类似的东西：

```
<span>
    <h3 class="menuHT"><span class="sdt_link">Home</span></h3>
</span> 
```

您需要删除`<span>`外部而`<h3>`不是内部。

* * *

正如猜测的那样，你有这个：

```
 <span class="sdt_wrap">
   <h3 class="menuHT"><span class="sdt_link">Home</span></h3>
   <h6 class="menuHB"><span class="sdt_descr">Main page</span></h6>
  </span> 
```

将此替换为：

```
 <div class="sdt_wrap">
   <h3 class="menuHT"><span class="sdt_link">Home</span></h3>
   <h6 class="menuHB"><span class="sdt_descr">Main page</span></h6>
  </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-05T15:56:20.803

OP 收到消息*“元素跨度的内容模型：短语内容”。*来自 W3C 验证器，这是一个 HTML5 错误，但上面的答案涉及影响早期版本 HTML 的内联元素内的块级元素问题。

**在 HTML5 中将块级元素放入内联元素中实际上是可以的，但前提是父元素的内容模型**允许它们。在 <span> 的情况下，这是**短语 content**，它不包括标题等块级元素。

请参阅此处的**3.2.4.1.5 短语内容**以获取 HTML5 中 <span> 中允许的元素列表 [http://www.w3.org/html/wg/drafts/html/master/single-page.html#phrasing-内容-1](http://www.w3.org/html/wg/drafts/html/master/single-page.html#phrasing-content-1)

另请参阅此线程： [验证错误：ul not allowed as child of element span](https://stackoverflow.com/questions/15823032/validation-error-ul-not-allowed-as-child-of-element-span)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T12:39:24.190

错误的意思是那`h3`是`span`. 检查您的`span`外部`h3`，而不是内部。否则，这段特定的代码是好的和有效的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T12:40:48.017

这就是问题（其中一个实例），

```
<span class="sdt_wrap">
    <h3 class="menuHT"><span class="sdt_link">Home</span></h3>
    <h6 class="menuHB"><span class="sdt_descr">Main page</span></h6>
</span> 
```

要修复它，您需要制作`.sdt_wrap`a`<div>`而不是 a`<span>`或使您的标题内联。理想情况下，第一个选项，

```
<div class="sdt_wrap">
    <h3 class="menuHT"><span class="sdt_link">Home</span></h3>
    <h6 class="menuHB"><span class="sdt_descr">Main page</span></h6>
</div> 
```

**解释**

在 HTML 中，不允许在`display:block;`元素 (like `<h3>`) 中包含`display:inline;`元素 (like `<span>`)。这是无效的 HTML 的原因是在内联中包含块元素是没有意义的。块元素通常会中断页面​​流并进入新行，而内联元素则不会。

# iphone - UITableView & UIScrollview 停止 cocos2d 动画

> ID：15185720
> 
> 赞同：3
> 
> 时间：2013-03-03T12:35:57.913
> 
> 标签：iphone, ios, objective-c, uitableview, cocos2d-iphone

我有`UITableView`，它显示在我的 Layer `[[CCDirector sharedDirector].view addSubview:myTableView] 前面，并占据了屏幕的一部分。

一切正常：它检测到触摸。*但是*在 tableView 的滚动动画期间，所有 cocos2d 都会冻结，直到 tableView 结束此滚动。（在冻结下，我的意思是所有节点的动作都暂停）。

问题是：这种冻结的原因是什么，我该如何避免？

* * *

```
-(void) mainLoop:(id)sender
{
if (dispatch_semaphore_wait(frameRenderingSemaphore, DISPATCH_TIME_NOW) != 0)
{
    return;
}

if (self.useCocoaFriendlyRendering)
{
    dispatch_sync(frameRenderingDispatchQueue, ^{ // HERE dispatch_async make black screen, i shows everything but still bad performance.
        CCGLView *openGLview = (CCGLView*)[self view];
        [EAGLContext setCurrentContext:openGLview.context];
        [self drawScene];
        dispatch_semaphore_signal(frameRenderingSemaphore);
    });
}
else
{
    CCGLView *openGLview = (CCGLView*)[self view];
    [EAGLContext setCurrentContext:openGLview.context];
    [self drawScene];
    dispatch_semaphore_signal(frameRenderingSemaphore);
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T12:51:09.467

原因是因为 UIKit 视图没有设计为与其他视图协作。它们用于用户交互，因此滚动停止更新其他视图通常无关紧要。在用户界面驱动的应用程序中，这很有意义，因为您希望对具有用户焦点并需要大量资源来制作动画（即滚动）的视图提供最佳响应和感觉。

正确解决此问题的唯一方法是`CCDirectorDisplayLink`使用信号量改进 cocos2d 渲染循环：

```
-(void) mainLoop:(id)sender
{
    if (dispatch_semaphore_wait(frameRenderingSemaphore, DISPATCH_TIME_NOW) != 0)
    {
        return;
    }

    if (useCocoaFriendlyRendering)
    {
        dispatch_async(frameRenderingDispatchQueue, ^{
            [EAGLContext setCurrentContext:openGLView_.context];
            [self drawScene];
            dispatch_semaphore_signal(frameRenderingSemaphore);
        });
    }
    else
    {
        [EAGLContext setCurrentContext:openGLView_.context];
        [self drawScene];
        dispatch_semaphore_signal(frameRenderingSemaphore);
    }
} 
```

这段代码将 cocos2d drawscene 方法放在它自己的调度队列中。我曾经明白它做了什么，但我不记得了，所以与其错误地解释它的作用或它为什么起作用，我希望有人可以在评论中填写它。:)

注意：可能不需要每次都调用最后一个调度信号量，但我这样做是因为切换 cocoaFriendlyRendering 标志可能会导致 semaphore_wait 无限期等待（冻结渲染）。所以我只是每次都发出信号。

我更新`CCDirectorDisplayLink`如下（`CCDirectorIOS`有 cocoaFriendlyRendering BOOL）：

```
@interface CCDirectorDisplayLink : CCDirectorIOS
{
    id displayLink;
    dispatch_semaphore_t frameRenderingSemaphore;
    dispatch_queue_t frameRenderingDispatchQueue;
}
-(void) mainLoop:(id)sender;
@end 
```

在 startAnimation 中创建信号量和调度队列：

```
- (void) startAnimation
{
        ...
    displayLink = [NSClassFromString(@"CADisplayLink") displayLinkWithTarget:self selector:@selector(mainLoop:)];
    [displayLink setFrameInterval:frameInterval];
    [displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];

    frameRenderingSemaphore = dispatch_semaphore_create(1);
    frameRenderingDispatchQueue = dispatch_queue_create("render", DISPATCH_QUEUE_SERIAL);
} 
```

并在 dealloc 中发布：

```
-(void) dealloc
{
    dispatch_release(frameRenderingDispatchQueue);
    dispatch_release(frameRenderingSemaphore);
    [displayLink release];
    [super dealloc];
} 
```

这样可以防止滚动视图阻塞 cocos2d 框架绘制。我添加了`cocoaFriendlyRendering`BOOL（我假设您知道如何添加 BOOL 属性），因此我可以仅对使用滚动视图的场景启用此行为。我认为这可能会更好地提高性能并防止游戏过程中出现任何奇怪的问题，但这可能不是必需的。

此代码适用于 cocos2d 1.0.1，可能需要稍作调整才能与 cocos2d 2.x 一起使用，例如 EAGLView -> CCGLView、EAGLContext -> CCGLContext。

[其他解决方案围绕计时器](https://stackoverflow.com/questions/5133731/how-to-make-ui-responsive-all-the-time-and-do-background-updating)和/或降低帧速率 (animationInterval) 和/或更改显示链接对象的运行循环模式。它们并不能很好地工作，滚动可能不流畅或滚动可能突然停止。我尝试了所有这些解决方案，因为我不想弄乱 cocos2d 的渲染循环 - 但信号量是唯一完美工作的解决方案，使 UIKit 滚动与 cocos2d 合作（反之亦然）。

**更新：**

我忘了提，我创建了一个 UIScrollView 的子类来处理 cocoaFriendlyRendering（初始化时是，dealloc 时否），更重要的是，它覆盖了触摸事件，以便根据需要将它们转发到 cocos2d（只要滚动视图不滚动） .

这些是覆盖的触摸方法：

```
-(void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    if (self.dragging)
        [super touchesBegan:touches withEvent:event];
    else
        [[CCDirector sharedDirector].openGLView touchesBegan:touches withEvent:event];
}

-(void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{
    if (self.dragging)
        [super touchesMoved:touches withEvent:event];
    else
        [[CCDirector sharedDirector].openGLView touchesMoved:touches withEvent:event];
}

-(void) touchesCancelled:(NSSet*)touches withEvent:(UIEvent*)event
{
    [super touchesCancelled:touches withEvent:event];
    [[CCDirector sharedDirector].openGLView touchesCancelled:touches withEvent:event];
}

-(void) touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event
{
    [super touchesEnded:touches withEvent:event];
    [[CCDirector sharedDirector].openGLView touchesEnded:touches withEvent:event];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-14T10:20:46.990

进入 CCDirector.m 或 CCDirectorIOS.m 文件并找到这一行：

```
[displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

将其更改为：

```
[displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes]; 
```

# vb.net - VB.NET 修剪接收到的串行数据

> ID：15185723
> 
> 赞同：1
> 
> 时间：2013-03-03T12:36:29.357
> 
> 标签：vb.net, serial-port, arduino

我正在尝试使用 VB.NET 与微控制器（Arduino）进行通信。我以某种方式能够在两者之间建立联系。然而，当我测试从微控制器接收和打印数据时，它有时会切断字符串。有时它会显示一个 (?) 符号，由于未知字符，我理解该符号。但是我设法将我的字符编码与串行端口对象一起设置。这是我的代码片段（我的类中串行端口对象的声明）

```
Public Function setSerialPortObjectParams(ByVal params As Collection)
    With Me.sp
        .Close()
        .PortName = params("port")
        .BaudRate = params("baud")
        .ReadTimeout = If(params.Contains("readTimeout"), params("readTimeout"), 500)
        .WriteTimeout = If(params.Contains("writeTimeout"), params("writeTimeout"), 500)
        .ReadTimeout = If(params.Contains("readTimeout"), params("readTimeout"), 500)
        .DataBits = If(params.Contains("bits"), params("bits"), 8)
        .Parity = If(params.Contains("parity"), params("parity"), Parity.None)
        .StopBits = If(params.Contains("stopBits"), params("stopBits"), StopBits.One)
        .Handshake = If(params.Contains("handShake"), params("handShake"), Handshake.None)
        .Encoding = If(params.Contains("encoding"), params("encoding"), System.Text.Encoding.UTF8)
    End With

    Return Me
End Function 
```

这是屏幕截图。 ![截屏](../Images/233abaa0d4e7df6c314e21a8baaa22b5.png)

正如您从图像中看到的，当我单击“LED ON”按钮时，它会假设向微控制器发送“on”命令，然后从那里将接收到的“on”字符串串行打印回应用。但是，那里的某处发生了字符串修剪，我不知道是什么原因造成的？

提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:12:29.560

我会认真考虑使用firmata 来简化与来自vb.net 的arduino 的通信。去[这里](http://www.acraigie.com/programming/firmatavb/default.html)获取一个 .net 兼容的包装器。该站点的下载部分也有示例代码，因此您不必从头开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T18:01:12.600

我写的这段代码可能会有所帮助，我知道是 2 或 3 年后，但对于新人可能会有所帮助.....

检查端口是否可用。请确保 arduino 已连接到该端口....

```
Imports Firmata.FirmataVB
Imports Firmata.DigitalPinControl

Public Class Form1
    Dim intensity, timerpwrpin, pin, change As Integer
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim pantallas As String
        'It validate if they are 3 monitors connected to the system if less or more than 3 the program closes automaticaly.
        pantallas = Screen.AllScreens.Count.ToString()

        If pantallas = 3 Then
            'screen form 1 = center of the screen
            Show()
            Location = Screen.AllScreens(0).Bounds.Location + New Point(0, 0)
        End If

        FirmataVB1.COMPortName = "COM6"  '' Specify the COM port of our board
        FirmataVB1.Baud = "57600"  '' Specify the port speed
        FirmataVB1.Connect() '' is connected to the board
        intensity = 0 ' pwr variation variable from 0 to 255 where 0 = off and 255 max power.
        change = 0 ' change 1 increase pwr or 0 decrease
        timerpwrpin = 0
    End Sub
    Private Sub Form1_FormClosed(sender As Object, e As FormClosedEventArgs) Handles Me.FormClosed
        FirmataVB1.Disconnect() '' will close the ports when closing the program
    End Sub
    Sub pinarduino(sensornumber, pulseorpwr, onoff, valpwr)
        FirmataVB1.PinMode(sensornumber, pulseorpwr) 'where 3 - is the transition mode PWM and 1 just pulse
        If pulseorpwr = 1 Then
            FirmataVB1.DigitalWrite(sensornumber, onoff) ' where valuenumber  in the arduino board  1  output on 0 the output off
        End If
        If pulseorpwr = 3 Then
            FirmataVB1.AnalogWrite(sensornumber, valpwr) ' where valuenumber  in the arduino board  1  output on 0 the output off
        End If
    End Sub
    Sub clean()
        For i = 2 To 13
            pinarduino(i, 0, 0, 0)
        Next
    End Sub

    Private Sub btndigitalpulse_Click(sender As Object, e As EventArgs) Handles btndigitalpulse.Click
        pinarduino(pin, 1, 1, 0) '/pinarduino(sensornumber, pulseorpwr, onoff, valpwr)
        '/pinarduino(pinnumber, modepulse, onoff, na in this case)
        TrackBar1.Value = 255
        chklst.SetItemCheckState(pin - 2, CheckState.Checked)
    End Sub
    Private Sub btnpwrtest_Click(sender As Object, e As EventArgs) Handles btnpwrtest.Click
        pinarduino(pin, 3, 1, 0)

        Select Case pin
            Case 1
                'does not exist
            Case 2
                'does not exist
            Case 3
                chb3.Checked = True
                Timer1.Start()
            Case 4
                'does not exist
            Case 5
                Timer1.Start()
                chb5.Checked = True
            Case 6
                Timer1.Start()
                chb6.Checked = True
            Case 7
                'does not exist
            Case 8
                'does not exist
            Case 9
                Timer1.Start()
                chb9.Checked = True
            Case 10
                Timer1.Start()
                chb10.Checked = True
            Case 11
                Timer1.Start()
                chb11.Checked = True
            Case 12
                'does not exist
            Case 13
                'does not exist
        End Select
    End Sub
    Private Sub btnstoptest_Click(sender As Object, e As EventArgs) Handles btnstoptest.Click
        Timer1.Stop()
        pinarduino(pin, 1, 0, 0)
        TrackBar1.Value = 0
    End Sub
    Private Sub TrackBar1_Scroll(sender As Object, e As EventArgs) Handles TrackBar1.Click
        pinarduino(pin, 3, 1, TrackBar1.Value)
    End Sub

    Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
        'FirmataVB1.AnalogWrite(timerpwrpin, i) ' where intensity - is a value from 0 to 255

        If change = 0 Then
            intensity = intensity + 1
            If intensity = 255 Then change = 1
        End If

        If change = 1 Then
            intensity = intensity - 1
            If intensity = 0 Then change = 0
        End If

        FirmataVB1.AnalogWrite(pin, intensity) ' where intensity - is a value from 0 to 255
        TrackBar1.Value = intensity

    End Sub

    Private Sub RadioButton2_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton2.CheckedChanged
        pin = 2
        btnpwrtest.Enabled = False
    End Sub

    Private Sub RadioButton3_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton3.CheckedChanged
        pin = 3
        btnpwrtest.Enabled = True
    End Sub

    Private Sub RadioButton4_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton4.CheckedChanged
        pin = 4
        btnpwrtest.Enabled = False
    End Sub

    Private Sub RadioButton5_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton5.CheckedChanged
        pin = 5
        btnpwrtest.Enabled = True
    End Sub

    Private Sub RadioButton6_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton6.CheckedChanged
        pin = 6
        btnpwrtest.Enabled = True
    End Sub

    Private Sub RadioButton7_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton7.CheckedChanged
        pin = 7
        btnpwrtest.Enabled = False
    End Sub

    Private Sub RadioButton8_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton8.CheckedChanged
        pin = 8
        btnpwrtest.Enabled = False
    End Sub

    Private Sub RadioButton9_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton9.CheckedChanged
        pin = 9
        btnpwrtest.Enabled = True
    End Sub

    Private Sub RadioButton10_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton10.CheckedChanged
        pin = 10
        btnpwrtest.Enabled = True
    End Sub

    Private Sub RadioButton11_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton11.CheckedChanged
        pin = 11
        btnpwrtest.Enabled = True
    End Sub

    Private Sub RadioButton12_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton12.CheckedChanged
        pin = 12
        btnpwrtest.Enabled = False
    End Sub

    Private Sub RadioButton13_CheckedChanged(sender As Object, e As EventArgs) Handles RadioButton13.CheckedChanged
        pin = 13
        btnpwrtest.Enabled = False
    End Sub

    Private Sub Btnstopall_Click(sender As Object, e As EventArgs) Handles Btnstopall.Click
        clean()
    End Sub

    Private Sub btnexit_Click(sender As Object, e As EventArgs) Handles btnexit.Click
        Close()
    End Sub
End Class 
```

还有表格......

```
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Partial Class Form1
    Inherits System.Windows.Forms.Form

    'Form overrides dispose to clean up the component list.
    <System.Diagnostics.DebuggerNonUserCode()> _
    Protected Overrides Sub Dispose(ByVal disposing As Boolean)
        Try
            If disposing AndAlso components IsNot Nothing Then
                components.Dispose()
            End If
        Finally
            MyBase.Dispose(disposing)
        End Try
    End Sub

    'Required by the Windows Form Designer
    Private components As System.ComponentModel.IContainer

    'NOTE: The following procedure is required by the Windows Form Designer
    'It can be modified using the Windows Form Designer.  
    'Do not modify it using the code editor.
    <System.Diagnostics.DebuggerStepThrough()> _
    Private Sub InitializeComponent()
        Me.components = New System.ComponentModel.Container()
        Me.FirmataVB1 = New Firmata.FirmataVB(Me.components)
        Me.Timer1 = New System.Windows.Forms.Timer(Me.components)
        Me.btnplayvideo = New System.Windows.Forms.Button()
        Me.Panel1 = New System.Windows.Forms.Panel()
        Me.Btnstopall = New System.Windows.Forms.Button()
        Me.RadioButton13 = New System.Windows.Forms.RadioButton()
        Me.Label2 = New System.Windows.Forms.Label()
        Me.Label1 = New System.Windows.Forms.Label()
        Me.chklst = New System.Windows.Forms.CheckedListBox()
        Me.RadioButton12 = New System.Windows.Forms.RadioButton()
        Me.RadioButton11 = New System.Windows.Forms.RadioButton()
        Me.RadioButton10 = New System.Windows.Forms.RadioButton()
        Me.RadioButton9 = New System.Windows.Forms.RadioButton()
        Me.RadioButton8 = New System.Windows.Forms.RadioButton()
        Me.RadioButton7 = New System.Windows.Forms.RadioButton()
        Me.RadioButton6 = New System.Windows.Forms.RadioButton()
        Me.RadioButton5 = New System.Windows.Forms.RadioButton()
        Me.RadioButton4 = New System.Windows.Forms.RadioButton()
        Me.RadioButton3 = New System.Windows.Forms.RadioButton()
        Me.RadioButton2 = New System.Windows.Forms.RadioButton()
        Me.btnstoptest = New System.Windows.Forms.Button()
        Me.TrackBar1 = New System.Windows.Forms.TrackBar()
        Me.btnpwrtest = New System.Windows.Forms.Button()
        Me.btndigitalpulse = New System.Windows.Forms.Button()
        Me.btnstopvideo = New System.Windows.Forms.Button()
        Me.btnexit = New System.Windows.Forms.Button()
        Me.Label3 = New System.Windows.Forms.Label()
        Me.chb3 = New System.Windows.Forms.CheckBox()
        Me.chb5 = New System.Windows.Forms.CheckBox()
        Me.chb6 = New System.Windows.Forms.CheckBox()
        Me.chb11 = New System.Windows.Forms.CheckBox()
        Me.chb10 = New System.Windows.Forms.CheckBox()
        Me.chb9 = New System.Windows.Forms.CheckBox()
        Me.Panel1.SuspendLayout()
        CType(Me.TrackBar1, System.ComponentModel.ISupportInitialize).BeginInit()
        Me.SuspendLayout()
        '
        'FirmataVB1
        '
        Me.FirmataVB1.Baud = 115200
        Me.FirmataVB1.BoardType = Firmata.FirmataVB.Board.DUEMILANOVE
        Me.FirmataVB1.COMPortName = "COM6"
        Me.FirmataVB1.WithAnalogReceiveEvents = True
        Me.FirmataVB1.WithDigitalReceiveEvents = True
        Me.FirmataVB1.WithVersionReceieveEvents = True
        '
        'Timer1
        '
        Me.Timer1.Interval = 1
        '
        'btnplayvideo
        '
        Me.btnplayvideo.Location = New System.Drawing.Point(552, 371)
        Me.btnplayvideo.Name = "btnplayvideo"
        Me.btnplayvideo.Size = New System.Drawing.Size(75, 39)
        Me.btnplayvideo.TabIndex = 5
        Me.btnplayvideo.Text = "Play Video"
        Me.btnplayvideo.UseVisualStyleBackColor = True
        '
        'Panel1
        '
        Me.Panel1.Controls.Add(Me.chb11)
        Me.Panel1.Controls.Add(Me.chb10)
        Me.Panel1.Controls.Add(Me.chb9)
        Me.Panel1.Controls.Add(Me.chb6)
        Me.Panel1.Controls.Add(Me.chb5)
        Me.Panel1.Controls.Add(Me.chb3)
        Me.Panel1.Controls.Add(Me.Label3)
        Me.Panel1.Controls.Add(Me.Btnstopall)
        Me.Panel1.Controls.Add(Me.RadioButton13)
        Me.Panel1.Controls.Add(Me.Label2)
        Me.Panel1.Controls.Add(Me.Label1)
        Me.Panel1.Controls.Add(Me.chklst)
        Me.Panel1.Controls.Add(Me.RadioButton12)
        Me.Panel1.Controls.Add(Me.RadioButton11)
        Me.Panel1.Controls.Add(Me.RadioButton10)
        Me.Panel1.Controls.Add(Me.RadioButton9)
        Me.Panel1.Controls.Add(Me.RadioButton8)
        Me.Panel1.Controls.Add(Me.RadioButton7)
        Me.Panel1.Controls.Add(Me.RadioButton6)
        Me.Panel1.Controls.Add(Me.RadioButton5)
        Me.Panel1.Controls.Add(Me.RadioButton4)
        Me.Panel1.Controls.Add(Me.RadioButton3)
        Me.Panel1.Controls.Add(Me.RadioButton2)
        Me.Panel1.Controls.Add(Me.btnstoptest)
        Me.Panel1.Controls.Add(Me.TrackBar1)
        Me.Panel1.Controls.Add(Me.btnpwrtest)
        Me.Panel1.Controls.Add(Me.btndigitalpulse)
        Me.Panel1.Location = New System.Drawing.Point(12, 12)
        Me.Panel1.Name = "Panel1"
        Me.Panel1.Size = New System.Drawing.Size(822, 291)
        Me.Panel1.TabIndex = 33
        '
        'Btnstopall
        '
        Me.Btnstopall.Location = New System.Drawing.Point(683, 68)
        Me.Btnstopall.Name = "Btnstopall"
        Me.Btnstopall.Size = New System.Drawing.Size(75, 39)
        Me.Btnstopall.TabIndex = 52
        Me.Btnstopall.Text = "Stop All"
        Me.Btnstopall.UseVisualStyleBackColor = True
        '
        'RadioButton13
        '
        Me.RadioButton13.AutoSize = True
        Me.RadioButton13.Location = New System.Drawing.Point(23, 256)
        Me.RadioButton13.Name = "RadioButton13"
        Me.RadioButton13.Size = New System.Drawing.Size(37, 17)
        Me.RadioButton13.TabIndex = 51
        Me.RadioButton13.TabStop = True
        Me.RadioButton13.Text = "13"
        Me.RadioButton13.UseVisualStyleBackColor = True
        '
        'Label2
        '
        Me.Label2.AutoSize = True
        Me.Label2.Location = New System.Drawing.Point(121, 57)
        Me.Label2.Name = "Label2"
        Me.Label2.Size = New System.Drawing.Size(79, 13)
        Me.Label2.TabIndex = 50
        Me.Label2.Text = "CHECKED PIN"
        '
        'Label1
        '
        Me.Label1.AutoSize = True
        Me.Label1.Location = New System.Drawing.Point(19, 57)
        Me.Label1.Name = "Label1"
        Me.Label1.Size = New System.Drawing.Size(75, 13)
        Me.Label1.TabIndex = 49
        Me.Label1.Text = "PIN NUMBER"
        '
        'chklst
        '
        Me.chklst.BackColor = System.Drawing.SystemColors.Control
        Me.chklst.Enabled = False
        Me.chklst.FormattingEnabled = True
        Me.chklst.Items.AddRange(New Object() {"2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13"})
        Me.chklst.Location = New System.Drawing.Point(124, 90)
        Me.chklst.Name = "chklst"
        Me.chklst.Size = New System.Drawing.Size(56, 184)
        Me.chklst.TabIndex = 48
        '
        'RadioButton12
        '
        Me.RadioButton12.AutoSize = True
        Me.RadioButton12.Location = New System.Drawing.Point(22, 241)
        Me.RadioButton12.Name = "RadioButton12"
        Me.RadioButton12.Size = New System.Drawing.Size(37, 17)
        Me.RadioButton12.TabIndex = 47
        Me.RadioButton12.Text = "12"
        Me.RadioButton12.UseVisualStyleBackColor = True
        '
        'RadioButton11
        '
        Me.RadioButton11.AutoSize = True
        Me.RadioButton11.Location = New System.Drawing.Point(22, 226)
        Me.RadioButton11.Name = "RadioButton11"
        Me.RadioButton11.Size = New System.Drawing.Size(37, 17)
        Me.RadioButton11.TabIndex = 46
        Me.RadioButton11.Text = "11"
        Me.RadioButton11.UseVisualStyleBackColor = True
        '
        'RadioButton10
        '
        Me.RadioButton10.AutoSize = True
        Me.RadioButton10.Location = New System.Drawing.Point(22, 211)
        Me.RadioButton10.Name = "RadioButton10"
        Me.RadioButton10.Size = New System.Drawing.Size(37, 17)
        Me.RadioButton10.TabIndex = 45
        Me.RadioButton10.Text = "10"
        Me.RadioButton10.UseVisualStyleBackColor = True
        '
        'RadioButton9
        '
        Me.RadioButton9.AutoSize = True
        Me.RadioButton9.Location = New System.Drawing.Point(22, 196)
        Me.RadioButton9.Name = "RadioButton9"
        Me.RadioButton9.Size = New System.Drawing.Size(31, 17)
        Me.RadioButton9.TabIndex = 44
        Me.RadioButton9.Text = "9"
        Me.RadioButton9.UseVisualStyleBackColor = True
        '
        'RadioButton8
        '
        Me.RadioButton8.AutoSize = True
        Me.RadioButton8.Location = New System.Drawing.Point(22, 181)
        Me.RadioButton8.Name = "RadioButton8"
        Me.RadioButton8.Size = New System.Drawing.Size(31, 17)
        Me.RadioButton8.TabIndex = 43
        Me.RadioButton8.Text = "8"
        Me.RadioButton8.UseVisualStyleBackColor = True
        '
        'RadioButton7
        '
        Me.RadioButton7.AutoSize = True
        Me.RadioButton7.Location = New System.Drawing.Point(22, 166)
        Me.RadioButton7.Name = "RadioButton7"
        Me.RadioButton7.Size = New System.Drawing.Size(31, 17)
        Me.RadioButton7.TabIndex = 42
        Me.RadioButton7.Text = "7"
        Me.RadioButton7.UseVisualStyleBackColor = True
        '
        'RadioButton6
        '
        Me.RadioButton6.AutoSize = True
        Me.RadioButton6.Checked = True
        Me.RadioButton6.Location = New System.Drawing.Point(22, 150)
        Me.RadioButton6.Name = "RadioButton6"
        Me.RadioButton6.Size = New System.Drawing.Size(31, 17)
        Me.RadioButton6.TabIndex = 41
        Me.RadioButton6.TabStop = True
        Me.RadioButton6.Text = "6"
        Me.RadioButton6.UseVisualStyleBackColor = True
        '
        'RadioButton5
        '
        Me.RadioButton5.AutoSize = True
        Me.RadioButton5.Location = New System.Drawing.Point(22, 135)
        Me.RadioButton5.Name = "RadioButton5"
        Me.RadioButton5.Size = New System.Drawing.Size(31, 17)
        Me.RadioButton5.TabIndex = 40
        Me.RadioButton5.Text = "5"
        Me.RadioButton5.UseVisualStyleBackColor = True
        '
        'RadioButton4
        '
        Me.RadioButton4.AutoSize = True
        Me.RadioButton4.Location = New System.Drawing.Point(22, 120)
        Me.RadioButton4.Name = "RadioButton4"
        Me.RadioButton4.Size = New System.Drawing.Size(31, 17)
        Me.RadioButton4.TabIndex = 39
        Me.RadioButton4.Text = "4"
        Me.RadioButton4.UseVisualStyleBackColor = True
        '
        'RadioButton3
        '
        Me.RadioButton3.AutoSize = True
        Me.RadioButton3.Location = New System.Drawing.Point(22, 105)
        Me.RadioButton3.Name = "RadioButton3"
        Me.RadioButton3.Size = New System.Drawing.Size(31, 17)
        Me.RadioButton3.TabIndex = 38
        Me.RadioButton3.Text = "3"
        Me.RadioButton3.UseVisualStyleBackColor = True
        '
        'RadioButton2
        '
        Me.RadioButton2.AutoSize = True
        Me.RadioButton2.Location = New System.Drawing.Point(22, 90)
        Me.RadioButton2.Name = "RadioButton2"
        Me.RadioButton2.Size = New System.Drawing.Size(31, 17)
        Me.RadioButton2.TabIndex = 37
        Me.RadioButton2.Text = "2"
        Me.RadioButton2.UseVisualStyleBackColor = True
        '
        'btnstoptest
        '
        Me.btnstoptest.Location = New System.Drawing.Point(727, 9)
        Me.btnstoptest.Name = "btnstoptest"
        Me.btnstoptest.Size = New System.Drawing.Size(75, 39)
        Me.btnstoptest.TabIndex = 36
        Me.btnstoptest.Text = "Stop Pin"
        Me.btnstoptest.UseVisualStyleBackColor = True
        '
        'TrackBar1
        '
        Me.TrackBar1.Location = New System.Drawing.Point(7, 9)
        Me.TrackBar1.Maximum = 255
        Me.TrackBar1.Name = "TrackBar1"
        Me.TrackBar1.Size = New System.Drawing.Size(504, 45)
        Me.TrackBar1.TabIndex = 35
        Me.TrackBar1.TickFrequency = 5
        '
        'btnpwrtest
        '
        Me.btnpwrtest.Location = New System.Drawing.Point(633, 9)
        Me.btnpwrtest.Name = "btnpwrtest"
        Me.btnpwrtest.Size = New System.Drawing.Size(75, 39)
        Me.btnpwrtest.TabIndex = 34
        Me.btnpwrtest.Text = "PWR TEST"
        Me.btnpwrtest.UseVisualStyleBackColor = True
        '
        'btndigitalpulse
        '
        Me.btndigitalpulse.Location = New System.Drawing.Point(540, 9)
        Me.btndigitalpulse.Name = "btndigitalpulse"
        Me.btndigitalpulse.Size = New System.Drawing.Size(75, 39)
        Me.btndigitalpulse.TabIndex = 33
        Me.btndigitalpulse.Text = "I/O Pulse"
        Me.btndigitalpulse.UseVisualStyleBackColor = True
        '
        'btnstopvideo
        '
        Me.btnstopvideo.Location = New System.Drawing.Point(645, 371)
        Me.btnstopvideo.Name = "btnstopvideo"
        Me.btnstopvideo.Size = New System.Drawing.Size(75, 39)
        Me.btnstopvideo.TabIndex = 34
        Me.btnstopvideo.Text = "Stop Video"
        Me.btnstopvideo.UseVisualStyleBackColor = True
        '
        'btnexit
        '
        Me.btnexit.Location = New System.Drawing.Point(739, 371)
        Me.btnexit.Name = "btnexit"
        Me.btnexit.Size = New System.Drawing.Size(75, 39)
        Me.btnexit.TabIndex = 35
        Me.btnexit.Text = "Exit"
        Me.btnexit.UseVisualStyleBackColor = True
        '
        'Label3
        '
        Me.Label3.AutoSize = True
        Me.Label3.Location = New System.Drawing.Point(222, 57)
        Me.Label3.Name = "Label3"
        Me.Label3.Size = New System.Drawing.Size(87, 13)
        Me.Label3.TabIndex = 53
        Me.Label3.Text = "CHECKED PWR"
        '
        'chb3
        '
        Me.chb3.AutoSize = True
        Me.chb3.Enabled = False
        Me.chb3.Location = New System.Drawing.Point(225, 105)
        Me.chb3.Name = "chb3"
        Me.chb3.Size = New System.Drawing.Size(32, 17)
        Me.chb3.TabIndex = 54
        Me.chb3.Text = "3"
        Me.chb3.UseVisualStyleBackColor = True
        '
        'chb5
        '
        Me.chb5.AutoSize = True
        Me.chb5.Enabled = False
        Me.chb5.Location = New System.Drawing.Point(225, 135)
        Me.chb5.Name = "chb5"
        Me.chb5.Size = New System.Drawing.Size(32, 17)
        Me.chb5.TabIndex = 55
        Me.chb5.Text = "5"
        Me.chb5.UseVisualStyleBackColor = True
        '
        'chb6
        '
        Me.chb6.AutoSize = True
        Me.chb6.Enabled = False
        Me.chb6.Location = New System.Drawing.Point(225, 150)
        Me.chb6.Name = "chb6"
        Me.chb6.Size = New System.Drawing.Size(32, 17)
        Me.chb6.TabIndex = 56
        Me.chb6.Text = "6"
        Me.chb6.UseVisualStyleBackColor = True
        '
        'chb11
        '
        Me.chb11.AutoSize = True
        Me.chb11.Enabled = False
        Me.chb11.Location = New System.Drawing.Point(226, 228)
        Me.chb11.Name = "chb11"
        Me.chb11.Size = New System.Drawing.Size(38, 17)
        Me.chb11.TabIndex = 59
        Me.chb11.Text = "11"
        Me.chb11.UseVisualStyleBackColor = True
        '
        'chb10
        '
        Me.chb10.AutoSize = True
        Me.chb10.Enabled = False
        Me.chb10.Location = New System.Drawing.Point(226, 213)
        Me.chb10.Name = "chb10"
        Me.chb10.Size = New System.Drawing.Size(38, 17)
        Me.chb10.TabIndex = 58
        Me.chb10.Text = "10"
        Me.chb10.UseVisualStyleBackColor = True
        '
        'chb9
        '
        Me.chb9.AutoSize = True
        Me.chb9.Enabled = False
        Me.chb9.Location = New System.Drawing.Point(225, 196)
        Me.chb9.Name = "chb9"
        Me.chb9.Size = New System.Drawing.Size(32, 17)
        Me.chb9.TabIndex = 57
        Me.chb9.Text = "9"
        Me.chb9.UseVisualStyleBackColor = True
        '
        'Form1
        '
        Me.AutoScaleDimensions = New System.Drawing.SizeF(6.0!, 13.0!)
        Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
        Me.ClientSize = New System.Drawing.Size(1904, 1042)
        Me.Controls.Add(Me.btnexit)
        Me.Controls.Add(Me.btnstopvideo)
        Me.Controls.Add(Me.Panel1)
        Me.Controls.Add(Me.btnplayvideo)
        Me.MaximizeBox = False
        Me.MinimizeBox = False
        Me.Name = "Form1"
        Me.ShowIcon = False
        Me.Text = "Emir"
        Me.WindowState = System.Windows.Forms.FormWindowState.Maximized
        Me.Panel1.ResumeLayout(False)
        Me.Panel1.PerformLayout()
        CType(Me.TrackBar1, System.ComponentModel.ISupportInitialize).EndInit()
        Me.ResumeLayout(False)

    End Sub
    Friend WithEvents FirmataVB1 As Firmata.FirmataVB
    Friend WithEvents Timer1 As System.Windows.Forms.Timer
    Friend WithEvents btnplayvideo As System.Windows.Forms.Button
    Friend WithEvents Panel1 As System.Windows.Forms.Panel
    Friend WithEvents Btnstopall As System.Windows.Forms.Button
    Friend WithEvents RadioButton13 As System.Windows.Forms.RadioButton
    Friend WithEvents Label2 As System.Windows.Forms.Label
    Friend WithEvents Label1 As System.Windows.Forms.Label
    Friend WithEvents chklst As System.Windows.Forms.CheckedListBox
    Friend WithEvents RadioButton12 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton11 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton10 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton9 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton8 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton7 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton6 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton5 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton4 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton3 As System.Windows.Forms.RadioButton
    Friend WithEvents RadioButton2 As System.Windows.Forms.RadioButton
    Friend WithEvents btnstoptest As System.Windows.Forms.Button
    Friend WithEvents TrackBar1 As System.Windows.Forms.TrackBar
    Friend WithEvents btnpwrtest As System.Windows.Forms.Button
    Friend WithEvents btndigitalpulse As System.Windows.Forms.Button
    Friend WithEvents btnstopvideo As System.Windows.Forms.Button
    Friend WithEvents btnexit As System.Windows.Forms.Button
    Friend WithEvents chb11 As System.Windows.Forms.CheckBox
    Friend WithEvents chb10 As System.Windows.Forms.CheckBox
    Friend WithEvents chb9 As System.Windows.Forms.CheckBox
    Friend WithEvents chb6 As System.Windows.Forms.CheckBox
    Friend WithEvents chb5 As System.Windows.Forms.CheckBox
    Friend WithEvents chb3 As System.Windows.Forms.CheckBox
    Friend WithEvents Label3 As System.Windows.Forms.Label

End Class 
```

# c# - 在 Visual Studio 2012 中调试 .NET Framework 源代码？

> ID：15185725
> 
> 赞同：45
> 
> 时间：2013-03-03T12:36:41.580
> 
> 标签：c#, asp.net, .net, visual-studio, visual-studio-2012

我正在使用 Visual Studio 2012。我想调试 .NET Framework 源代码。我已经尝试了几乎所有的选项，但我仍然得到`There is source code available for Current Location`. 符号已成功加载。我已经尝试加载 Microsoft Symbol Server 并尝试了这个 url [http://referencesource.microsoft.com/symbols](http://referencesource.microsoft.com/symbols)。但我仍然无法调试。我已经尝试了这些链接， http: [//blogs.msdn.com/b/sburke/archive/2008/01/16/configuring-visual-studio-to-debug-net-framework-source-code.aspx](http://blogs.msdn.com/b/sburke/archive/2008/01/16/configuring-visual-studio-to-debug-net-framework-source-code.aspx)和[http： //msdn.microsoft.com/en-us/library/cc667410.aspx](http://msdn.microsoft.com/en-us/library/cc667410.aspx)

也跟着这个，[http://blogs.msdn.com/b/dotnet/archive/2012/08/15/announcing-the-release-of-net-framework-4-5-rtm-product-and-source-代码.aspx](http://blogs.msdn.com/b/dotnet/archive/2012/08/15/announcing-the-release-of-net-framework-4-5-rtm-product-and-source-code.aspx)

有人可以在 VS 2012 中调试 .NET Framework 源代码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T04:26:01.503

此功能在 VS2010 SP1 中被破坏，它也可能在 VS2012 中被破坏。或者，Microsoft 可能会为最新的 .NET Framework 版本发布不正确的 PDB 文件（以前发生过这种情况）。尝试替代解决方案。我正在使用 .NET Reflector VSPro - 它允许反编译程序集，在调试期间加载反编译的符号，并为这些反编译的程序集使用完整的调试功能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-26T15:35:28.563

调试 .NET Framework 源代码被破坏了很长时间。请参阅 VisualStudio UserVoice 上的相关建议[允许开发人员单步执行 .NET Framework 源](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/4083118-allow-developers-to-step-through-net-framework-sources)。好消息：终于修好了！请参阅 Microsoft 的以下博客文章：

[**.NET 参考源的新外观**](http://blogs.msdn.com/b/dotnet/archive/2014/02/24/a-new-look-for-net-reference-source.aspx)

简而言之：

*   用于浏览资源的新 Web 界面：[http ://referencesource-beta.microsoft.com/](http://referencesource-beta.microsoft.com/)
*   所有资源，包括项目文件，都可以直接下载：[http](http://referencesource-beta.microsoft.com/download.html) ://referencesource-beta.microsoft.com/download.html（虽然不可编译）
*   F12 导航有一个新的扩展：http: [//visualstudiogallery.msdn.microsoft.com/f89b27c5-7d7b-4059-adde-7ccc709fa86e](http://visualstudiogallery.msdn.microsoft.com/f89b27c5-7d7b-4059-adde-7ccc709fa86e)
*   源代码始终是最新的，调试不会被补丁和更新破坏。

它目前是“测试版”。最终它将取代[http://referencesource.microsoft.com/](http://referencesource.microsoft.com/)。微软还承诺添加更多程序集的来源。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-17T19:22:17.833

在 VS 2008 中，我能够调试 .Net 源代码，但在 VS2012 中，我安装了 .NET Reflector（VS 扩展），因此它会自动反编译并允许调试任何 .Net 代码。

另一个开源工具是 ilspy.net ，它将反编译的程序集保存为 C# 项目，您可以使用调试工具。

还有一些适用于 Windows 的调试工具，它们是 SDK 的一部分，但我没有尝试过：http: [//msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-18T19:44:55.100

这是一篇很好的文章，描述了如何配置 VS 符号服务器和 dotPeek 1.2 以从 VisualStudio 调试反编译代码：http: [//blog.jetbrains.com/dotnet/2014/04/09/introducing-dotpeek-1-2-early- access-program](http://blog.jetbrains.com/dotnet/2014/04/09/introducing-dotpeek-1-2-early-access-program) 如果调试框架或其他编译代码是您的日常工作，我建议您从您使用的程序集中重建解决方案，这将节省调试器附加期间符号加载的时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-19T06:48:37.863

1) PDB 文件不是最新的。尝试取消选中工具->选项->调试->常规->“要求源文件与原始版本完全匹配”

2）您通过将它的 dll 添加到您的引用而不是将项目添加为引用来引用您的另一个项目。尝试删除引用添加从“项目”选项卡添加对项目的新引用

你可以搜索[谷歌](https://www.google.com/search?q=There%20is%20no%20Source%20code%20available%20for%20the%20current%20location%20#asp.net)。它提供的不仅仅是答案

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-22T12:24:20.160

[过去，按照](http://www.symbolsource.org/Public/Home/VisualStudio)SymbolSource 的建议，我很幸运。

如果您将它与 Resharper 结合使用，您将能够按住 CTRL 键单击整个框架。

然而，MS 不发布其所有版本的二进制文件的代码由来已久[。](http://social.msdn.microsoft.com/Forums/en-US/refsourceserver/thread/7e8d73c8-30a2-4f8c-8a36-5dd8c6526f9f)这就是为什么调试经常不起作用的原因。

尽管如此，Resharper 在下载源代码方面似乎更灵活一些，如果不能，它会给你反汇编的源代码，但无法调试。请注意，JetBrains 将反编译源的调试视为[dotPeek](http://youtrack.jetbrains.com/issue/DOTP-176)（Re# 附带的反编译器）的关键功能，因此在不久的将来可能会实现。

# audio - 声音加法合成 - 任何谐波幅度

> ID：15185730
> 
> 赞同：1
> 
> 时间：2013-03-03T12:37:22.810
> 
> 标签：audio, instruments, synthesis, spectrum

我有用 C# 编写的音乐合成的工作解决方案。现在，如果基于幅度谱的收集来实施另一种仪器，我将面临问题。我找到了这个网站，我在哪里可以看到所有和声部分 (1-10) [http://elektronicka-hudba.telotone.cz/clanky/metody-zvukove-syntezy/](http://elektronicka-hudba.telotone.cz/clanky/metody-zvukove-syntezy/)用于钢琴、人声、电子管、小提琴，但我会喜欢添加更多不同的乐器，例如鼓、吉他等。我在互联网上浏览了数百页，但没有成功。你知道任何其他乐器的谐波幅度吗？

**编辑：**

没有人知道乐器的任何谐波（幅度谱 1-10）吗？

非常感谢

赫米扎克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:26:59.657

乐器木材最重要的方面之一是部分组件的强度如何随时间变化。它们还会根据音符的幅度和其他因素而变化。换句话说，分音的幅度之间没有简单的关系。我没有阅读您发送的链接（尽管我掩盖了其中一些用英文翻译的内容），但我相信这只是作为“稳态”笔记的非常粗略的例子，即所谓的初始瞬态已通过。

其他因素也会影响乐器，例如高度灵活的人声（例如，尖叫会产生比轻歌声更高的泛音）和鼓，它们具有“失调”的分音，因此无法使用你现在的模型。

换句话说，是的，您也许可以找到这些信息，但听起来不像人声或吉他，也绝对不是鼓。

如果你坚持这种合成方法，确实是一个好玩的地方，你可能需要对你感兴趣的乐器进行自己的分析。你可以找到样本库，自己分析音符。您还可以在书籍中找到比在互联网上更好的信息。例如，我相信[声音科学](https://rads.stackoverflow.com/amzn/click/com/0805385657)有一些图表等，您可以使用它们来得出至少一些您感兴趣的信息。

您还可以查看有关该主题的其他书籍，例如真正的经典著作《[计算机音乐》。](https://rads.stackoverflow.com/amzn/click/com/0028646827)这也将为您提供其他合成模式的一些想法，这些模式可能更忠实地再现您感兴趣的乐器。您可以以非常便宜的价格获得这两本书的旧版本，我怀疑您会错过很多。

# entity-framework-5 - 我需要先在实体框架代码中使用 sql_variant

> ID：15185734
> 
> 赞同：1
> 
> 时间：2013-03-03T12:37:58.793
> 
> 标签：entity-framework-5, sql-variant

我必须在数据库中定义动态参数值，以便通过这些参数在 C# 中调用我的方法。顺便说一句，我只使用简单的变量，例如 int、bool、string、datetime.... 但不幸的是，我无法从 sql_variant 字段中获取值到我的模型中的对象。

我使用 EF 代码 First 5 和 SQL 2008 Server

# php - 如何控制网站组件显示？

> ID：15185742
> 
> 赞同：0
> 
> 时间：2013-03-03T12:38:50.210
> 
> 标签：php, javascript, jquery, css, html

我正在使用由 PHP 开发的购物车。我想知道如何控制 Web 组件的显示或隐藏。表头下方显示 xx Hour xx Min xx Sec，当时间倒计时时，显示一些东西。当时间结束时，隐藏一些东西（我不知道它是否被删除或隐藏）并显示其他内容。英语不是我的母语。可能我表达的不够清楚。对此感到抱歉。使用 php 在服务器端归档这个函数，或者使用 js 或类似的东西在浏览器端归档这个函数？请给我一些建议。希望得到您的回复。提前致谢。

# python - While 循环单行

> ID：15185746
> 
> 赞同：7
> 
> 时间：2013-03-03T12:39:08.997
> 
> 标签：python, while-loop

是否有可能纯粹在一行上有一个 python while 循环，我试过这个：

```
while n<1000:if n%3==0 or n%5==0:rn+=n 
```

但它会产生一条错误消息：`Invalid Syntax`at the `if`statement

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T12:47:54.580

在 python 中使用[复合语句](https://docs.python.org/2/reference/compound_stmts.html)（需要套件的语句，缩进块），并且该块*仅包含[简单语句](https://docs.python.org/2/reference/simple_stmts.html)*时，您可以删除换行符，并用分号分隔简单语句。

但是，这不*支持*复合语句。

所以：

```
if expression: print "something" 
```

有效，但是

```
while expression: if expression: print "something" 
```

不是*因为*`while`and`if`语句都是复合的。

对于您的*具体*示例，您可以用[条件表达式](http://docs.python.org/2/reference/expressions.html#conditional-expressions)`if expression: assignment`替换部分，因此使用表达式而不是复杂语句：

```
while expression: target = true_expression if test_expression else false_expression 
```

一般地，或`while n<1000: rn += n if not (n % 3 and n % 5) else 0`具体地。

不过，从风格的角度来看，您通常希望将那一行留在它自己的位置上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T12:48:10.980

在您的示例中，您尝试将两级块/缩进折叠成一行，这是不允许的。您只能使用简单的语句来执行此操作，而不是循环、if 语句、函数定义等。也就是说，对于您的示例，有一个使用三元运算符的解决方法：

```
while n < 1000: rn += n if (n % 3 == 0 or n % 5 == 0) else 0 
```

读作“如果条件成立，则将 n 添加到 rn，否则添加 0”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:54:25.417

可以做类似的事情：

```
rn = 100
for n in range(10): rn += n if (n%3==0 or n%5==0) else 0 
```

# linux - 如果一台计算机更改了我们发送数据的 IP 地址，TCP/IP 应该怎么做？

> ID：15185749
> 
> 赞同：1
> 
> 时间：2013-03-03T12:39:27.357
> 
> 标签：linux, sockets, tcp-ip

当我们正在向其发送数据的计算机突然更改其 IP 地址时，TCP/IP 协议栈的标准行为是什么？发生这种情况时，我们系统中的 ARP 表已经过期，但是这个 IP 的条目没有超时？

有没有办法发现新的 IP-mac 映射，或者我们只是删除排队的数据并返回错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T14:01:17.723

假设 A 和 B 之间有一个 TCP 连接。A 的 IP 地址突然改变。

从 B 的角度来看，发生的事情很简单：B 继续将其数据发送到 A 的旧 IP 地址。有两种可能：

*   如果 A 的旧 IP 地址现在未被使用，那么这些数据包将无处可去。它们掉在地板上。B 没有得到任何确认。最终，B 决定连接超时。从B的角度来看，这与A的网络连接完全消失或A崩溃或断电等情况没有区别......
*   如果 A 的旧 IP 地址已被另一台机器（例如 C）占用，那么 B 发送给 C 的数据包对 C 没有任何意义。它们不会启动新的 TCP 连接（它们没有`SYN`标志设置）并且它们与 C 已知的任何现有 TCP 连接都不匹配。C 将响应`RST`数据包，B 将立即在套接字上返回“对等连接重置”错误。

无论哪种方式，TCP 连接都已断开且无法恢复。此外，A或B绝对无能为力。A 根本无法使用其旧 IP 地址接收（或发送）任何更多流量。不可能在此 TCP 连接上实现任何进一步的通信。

从A的角度来看，它有点不同。更改 A 的 IP 地址后，它最终会出现这样一种情况，即它有一个绑定到本地 IP 地址和端口的套接字，而该本地系统上不再存在。这通常是不允许的（您不能调用`bind()`绑定到不是系统有效本地 IP 地址的 IP 地址），但无论如何它已经通过了。TCP/IP 标准没有说明在这种情况下应该做什么，但实际行为是 A 会立即使套接字无效并立即向应用程序返回某种错误。

总结：A检测到问题并立即断开连接，而B可能需要一些时间才能检测到问题并返回错误。

至于 ARP 表，我不确定您为什么要提出这个问题，因为它位于较低层（数据链路层），与 IP（更不用说 TCP）层发生的事情没有太大关系. 但是，是的，与 A 位于同一本地网络（例如本地路由器）上的节点的 ARP 表现在有一个陈旧的 A 旧 IP 地址条目。他们很快就会为 A 的新 IP 地址获得一个新的有效条目（他们第一次尝试向该 IP 地址发送数据包时），所以这不是问题。陈旧的条目可能会导致旧 IP 地址的流量被错误地定向到 A，但如果其他一些节点获取 A 的旧 IP 地址，那么免费 ARP 也会处理这个问题。

最后，问题“有没有办法发现新的 IP-mac 映射，或者我们只是删除排队的数据并返回错误？” 没有意义。当然有一种方法可以发现新的 IP-mac 映射：它称为 ARP。这是 ARP 的唯一功能。但它与排队数据无关，这是一个仅在协议栈上具有两层或多层含义的概念。

在评论中，您澄清说您正在谈论 A 和 B 彼此位于同一本地网络上的情况，但这对答案没有任何影响。无论 A 和 B 在同一个本地网络上还是在远程网络上，都是一样的。

# javascript - 为什么我不能在 javascript / nodeJS 中使用“名称”作为静态属性

> ID：15185751
> 
> 赞同：2
> 
> 时间：2013-03-03T12:39:39.027
> 
> 标签：javascript, node.js, naming, static-variables

我无法弄清楚这一点，但也许任何人都可以帮助我：当我定义一个 javascript 类并尝试添加一个静态属性“name”时，之后我不能使用“name”。

```
var MyClass = function() {
  this.name = 'This is an instance of MyClass';
  this.anyName = 'This has nothing to do with it';
}

// static attributes
MyClass.name = 'Why is this not possible?';
MyClass.anyName = 'This works fine!';

var a = new MyClass();
console.log(a.name);
console.log(a.anyName);
console.log(MyClass.name);
console.log(MyClass.anyName); 
```

我希望它输出所有 4 个字符串。但它只会输出：

```
This is an instance of MyClass
This has nothing to do with it

This works fine! 
```

它不接受静态属性“name”，但为什么呢？任何想法/提示？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T12:53:18.587

函数对象的 name 属性是**只读的**，对其的赋值将被忽略。

# ios - 如何以编程方式更改和动画 NSLayoutConstraints？

> ID：15185757
> 
> 赞同：0
> 
> 时间：2013-03-03T12:40:22.117
> 
> 标签：ios, core-animation, nslayoutconstraint

我正在以编程方式通过 NSLayout 约束定义一个复杂的布局。现在我发现自己需要为其中一个元素设置动画。

我需要动画视图 crossFadeControlView 改变它的高度。这显然意味着另一个需要动态收缩。那可能吗？

如果不是……我有什么选择？

以下是我的限制条件：

```
 [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[clipGrid]    [sceneLaunchView(==117)][meter(==9)][tempoControl(==58)]|" options:0 metrics:nil views:views]];
    [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[tracksView][meter(==9)][tempoControl(==58)]|" options:0 metrics:nil views:views]];
    [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[crossFadeControlView]|" options:0 metrics:nil views:views]];
    [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[clipGrid]-3-[tracksView(==143)][crossFadeControlView]|" options:0 metrics:nil views:views]];
    [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[sceneLaunchView]-3-[tracksView][crossFadeControlView]|" options:0 metrics:nil views:views]];
    [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[tempoControl][crossFadeControlView]|" options:0 metrics:nil views:views]];
    [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[meter][crossFadeControlView]|" options:0 metrics:nil views:views]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:20:35.247

当然，你可以这样做。很难从你的约束中分辨出什么在哪里，但是例如，如果你改变 crossFadeView 的高度，clipGrid 将自动缩小，因为它没有明确的高度设置，而轨道视图将保持它的高度，因为它确实有一个定义的高度. screenLaunchView、tempoControl 和 Meter 也会出于同样的原因自动缩小。

要更改 crossFadeView 的高度，您必须为其创建高度约束，然后更改该约束的常量值。我通常在我的动画块上方执行此操作，然后在动画块的超级视图上调用 layoutSubviews。

# android - 从android活动捕获图像并返回调用捕获图像的同一活动

> ID：15185762
> 
> 赞同：0
> 
> 时间：2013-03-03T12:41:04.357
> 
> 标签：android

我是 android 新手。我正在 android 中开发一个调查应用程序，这将有助于进行调查。在这个应用程序中，我有一个字段可以为那些进行调查的人拍照。我面临的问题是当我单击按钮捕获图像时，图像被成功捕获并保存，但我正在完成某些字段未填写的调查。有什么方法可以让我从调用捕获的位置返回到同一个字段给出了图像..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:59:43.773

当您捕获图像时，您会得到一个`Bitmap`实现接口的对象，该`Parcelable`接口可以放在`Bundle`' `Activity`s`Intent`中。

您可以调用“捕获” `Activity`，[`startActivityForResult()`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)并在拍照后将其返回给调用`Intent`者`Bundle``Activity`

为了更清楚，您可以查看[本](http://developer.android.com/training/camera/photobasics.html)教程，尤其是[这个](http://developer.android.com/training/camera/photobasics.html#TaskPhotoView)片段

# python - 变形模板/图像匹配

> ID：15185764
> 
> 赞同：1
> 
> 时间：2013-03-03T12:41:24.143
> 
> 标签：python, image, opencv, numpy, comparison

好吧，我一直想知道在图像/模板中查找*变形子图像的好方法是什么。*目前我正在使用 cv2.matchTemplate，它有时会起作用，它取决于给定的容差级别和背景“噪音”：其他对象可能相似，因此如果容差返回结果是高。

当前的算法是这样的（伪）/只返回一个匹配项（多匹配项类似——这是这个问题的实际情况）：

```
haystack = im.read("stack.bmp")
image = Image.open("im.bmp")
MATCH = []
PIL_rotateImage for 0 to 360: # You get the point..
    image = np.array(rotatedImage)
    result = cv2.matchTemplate(image, haystack, algorithm) #algorithm: CCOEFF_NORMED
    resultMax = result.max()
    y,x = np.unravel_index(result.argmax(), result.shape)
    MATCH.append([resultMax, (x,y)])

Best_match = sorted(MATCH, key=itemgetter(0))[0] 
if Best_match[0] < minval: return False
*.....* 
```

假设您有一个包含变形（部分和/或旋转）子图像的模板，它是完全相同的图像（对于人眼）：

1.  物体可以旋转
2.  对象可以是部分的（但在可容忍的水平 - 例如：60%）
3.  颜色并不总是相同的，而是相似的。（有一个比较颜色的算法）
4.  对象并不总是在那里...
5.  物体可能有点变形：一些像素可能“错位”
6.  有些东西可能会被遗忘：但总的来说：变形。

我也尝试过迭代列表，但这显然很慢，我这样做的方式只是检查一些第一个/最后一个或中心像素是否相同.. <- 当然不适用于查找部分，或旋转的物体。

一个小图片（例子）来支持我的写作，帮助你理解：只是一个例子！

![](../Images/53ef8933ff245efc78a940410774c788.png)

**问**：有没有人有任何提示、伪代码或实际代码如何解决这个问题？可以让我开始的东西，因为我经常迷路。

# jquery - 在 ipod touch 上添加/删除类需要三秒钟

> ID：15185766
> 
> 赞同：0
> 
> 时间：2013-03-03T12:41:40.163
> 
> 标签：jquery, iphone

我有一个包含各种输入的表格。其中一些输入最初是隐藏的，因为它们的父 div 带有`display:None`.

然后我通过 jQuery 删除隐藏的类。在我的电脑上，之前隐藏的 div 会瞬间出现。在 iPod Touch 上，它需要整整三秒钟。它有大约 100 个复选标记输入以及 CSS 格式。输入还附加到各种事件侦听器。再次隐藏除法同样慢（未显示此代码。）

有什么建议么？

CSS：

```
.hidden: {display:None} 
```

html（简体）：

```
<div id = "expand"></div>
<div class = "hidden" id = "city_div">
   some city <input type="checkbox">
   ...
</div> 
```

脚本：

```
$("[id = expand]").live('click', function() {
    $("[id = city_div]").removeClass("hidden");
}); 
```

编辑：我最初写的是 iPhone，但它是一个 iPod Touch。更正了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:42:37.790

代替

```
$("[id = expand]").live('click', function() {
    $("[id = city_div]").removeClass("hidden");
}); 
```

和

```
$("#expand").live('click', function() {
    $("#city_div").removeClass("hidden");
}); 
```

它应该快得多。您的选择器正在寻找所有元素，而不是让 jQuery 简单地调用`document.getElementById`.

如果绑定处理程序时存在#expand 元素，请使用

```
$("#expand").on('click', function() {
    $("#city_div").removeClass("hidden");
}); 
```

顺便说一句，一定要使用最新版本的 jQuery。

* * *

编辑：如果您似乎有多个具有给定 id 的元素，请**更改它！**它是无效的，会导致错误并阻止优化。使用类，`$('.classname')`因为它让 jQuery 使用本机和快速`getElementsByClassName`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:12:18.630

我想知道这样访问隐藏的父级是否会提高性能？

```
$(".your-new-class").live('click', function() {
    $(this).parent().removeClass("hidden");
}); 
```

这假设隐藏项是可点击子项的直接父项。

# mysql - mySql - 如何使用条件计数进行选择，一个表上的 X 项与另一个表中的记录相关

> ID：15185768
> 
> 赞同：0
> 
> 时间：2013-03-03T12:41:45.873
> 
> 标签：mysql, sql

我有两个表：articles 和 article_comments（article_comments 有一个 article_id fk...） 我需要选择只有 1 条评论仅与它们相关的文章详细信息（或任何其他固定数字，1 仅作为示例）

我尝试了这样的事情并得到了一个错误：

```
SELECT *
FROM articles a, article_comments ac
WHERE a.article_id = ac.article_id
AND COUNT(ac.article_id) = 1
GROUP BY ac.article_id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:43:15.407

你的答案是`HAVING count(ac.article) = 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:44:24.950

```
SELECT  a.*
FROM    articles a
        INNER JOIN
        (
            SELECT  article_id, COUNT(*) totalComments
            FROM    article_comments 
            GROUP   BY article_id
            HAVING  COUNT(*) = 1  -- change the value here
        ) b     ON a.article_id = b.article_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:45:41.960

```
SELECT
 a.article_id,
 count(c.article_id)
FROM
 articles a
JOIN
 article_comments c ON c.article_id = a.article_id
GROUP BY 1
HAVING count(c.article_id) = 1; 
```

# php - PHPMailer 附件错误

> ID：15185775
> 
> 赞同：1
> 
> 时间：2013-03-03T12:43:00.303
> 
> 标签：php, pdf, smtp, attachment, phpmailer

我正在尝试通过 PHPMailer - [http://phpmailer.worxware.com/](http://phpmailer.worxware.com/)发送带有附件的电子邮件。

`$ mail-> AddAttachment ($ file, basename ($ file), "base64", mime_content_type ($ file));`

附件总是正常的，有时会损坏（例如，从 300 kb 大小到只有 72 Kb）。具体来说，我尝试 PDF 文件。

谢谢你

我使用 SMTP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:17:53.230

在我的情况下，我直接提供了 pdf 的路径它对我来说很好。

```
 $mail->AddAttachment('PDF FILE PATH'); 
```

请参考此链接[Send File Attachment from Form Using phpMailer and PHP](https://stackoverflow.com/questions/11764156/send-file-attachment-from-form-using-phpmailer-and-php)

[http://www.ustrem.org/en/articles/send-mail-using-phpmailer-en/](http://www.ustrem.org/en/articles/send-mail-using-phpmailer-en/)

# php - 如何用php数组替换javascript数组？

> ID：15185776
> 
> 赞同：0
> 
> 时间：2013-03-03T12:43:02.393
> 
> 标签：php, javascript, arrays

我有这个 javascript 数组

```
 <script>
$(function() {
 var foo= [ "one",
            "two",
            "three",
            "one",
            "final"];
</script> 
```

现在，我正在尝试`foo`用 PHP 数组替换 。

```
<?php $array = array("sky","mac","rain","bob","sep","ion"); ?> 
```

现在，**我试过了**

```
<script>
    $(function() {
     var foo= [<?php array("sky","mac","rain","bob","sep","ion"); ?> ];
    </script> 
```

但是，它似乎不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T12:49:08.700

在 PHP 中，您可以使用该方法[`json_encode()`](http://php.net/manual/en/function.json-encode.php)将大多数 PHP 数组转换为 JSON，这是 JavaScript 中的合法对象。

```
<?php $array = array("sky","mac","rain","bob","sep","ion"); ?>

<script>
// ...
var foo = <?php echo json_encode( $array ); ?>;
// ...
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:44:27.607

```
var foo= ['<?php print implode("','", array("sky","mac","rain","bob","sep","ion")); ?>']; 
```

# php - HybridAuth“Tiny Social Hub”示例重定向到 /hybridauth/?hauth.start=Facebook&hauth.time

> ID：15185778
> 
> 赞同：2
> 
> 时间：2013-03-03T12:43:11.097
> 
> 标签：php, facebook, oauth-2.0, hybridauth

我试图弄清楚 HybridAuth 是如何工作的。我已经按照说明将它安装在我的服务器上，为 Facebook、Google 等添加了我的开发人员密钥，但是当我转到“Tiny Social Hub”示例时：

```
www.mysite.org/inc/examples/social_hub/login.php 
```

并单击“使用 Facebook 登录”，我被重定向到：

```
www.mysite.org/inc/hybridauth/?hauth.start=Facebook&hauth.time=1362314218 
```

与“使用 Google 登录”类似：

```
www.mysite.org/inc/hybridauth/?hauth.start=Google&hauth.time=1362314279 
```

我只看到其中的直接清单`/inc/hybridauth/`包括：

```
index.php
config.php
Hybrid/ 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:35:24.513

我能够解决这个问题。对于可能遇到此问题的任何人，该修复基于对[Hybrid auth with Yii 导致重定向循环](https://stackoverflow.com/questions/13024803/hybrid-auth-with-yii-causing-a-redirect-loop "Yii 的混合身份验证导致重定向循环")问题的响应，特别是以下几点：

> 您在配置文件“hybridauth.php”中的base_url 应设置为“/hauth/endpoint”，即它必须指向端点。如果您已通过 .htaccess 删除了 index.php，请使用“/index.php/hauth/endpoint”。

我需要从以下位置调整我的基本网址：

```
"base_url" => "http://mysite.org/inc/hybridauth/" 
```

至：

```
"base_url" => "http://mysite.org/inc/hybridauth/index.php" 
```

我的猜测是第一个 url 在大多数情况下都可以使用，因为 index.php 通常是默认目录页面。而我已将 Apache 配置为在我的服务器上使用 home.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T04:02:21.607

假设您使用的是 Apache，另一种解决方案是告诉它将 index.php 识别为索引文件。

在相关的 /etc/(httpd|apache2)/sites.enabled/ 或 httpd.conf 文件中添加以下内容

> > DirectoryIndex index.php

或者，假设 apache 被配置为允许 .htaccess 文件，只需创建一个 .htaccess 文件并将上面的行放在那里。

# c# - 在 opensuse 和 CentOS 中无法远程访问 Mono HTTPListener

> ID：15185783
> 
> 赞同：0
> 
> 时间：2013-03-03T12:43:40.923
> 
> 标签：c#, ubuntu, mono, centos, httplistener

我正在使用 vmware 测试 linux 版本。

[我从这里](http://msdn.microsoft.com/zh-cn/library/system.net.httplistener%28v=vs.80%29.aspx)运行一个简单的示例

```
 // This example requires the System and System.Net namespaces.
public static void SimpleListenerExample(string[] prefixes)
{
    // Create a listener.
    HttpListener listener = new HttpListener();
    // Add the prefixes.
    foreach (string s in prefixes)
    {
        listener.Prefixes.Add(s);
    }
    listener.Start();
    Console.WriteLine("Listening...");
    // Note: The GetContext method blocks while waiting for a request. 
    HttpListenerContext context = listener.GetContext();
    HttpListenerRequest request = context.Request;
    // Obtain a response object.
    HttpListenerResponse response = context.Response;
    // Construct a response.
    string responseString = "<HTML><BODY> Hello world!</BODY></HTML>";
    byte[] buffer = System.Text.Encoding.UTF8.GetBytes(responseString);
    // Get a response stream and write the response to it.
    response.ContentLength64 = buffer.Length;
    System.IO.Stream output = response.OutputStream;
    output.Write(buffer,0,buffer.Length);
    // You must close the output stream.
    output.Close();
    listener.Stop();
} 
```

并且`prefixes`是`http://192.168.10.132:8080/`。

它在 ubuntu 中运行良好，无论是在本地来宾中还是在远程主机中。

在opensue和CentOS的guest中也可以本地访问，但是在host中打不开，等了很久，没有反应，然后就超时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:18:04.600

我想通了，这是因为默认情况下启用了防火墙。我需要允许我使用的端口。

# c# - 在运行时的性能方面什么更好：显式转换或'as'/'is 语法

> ID：15185785
> 
> 赞同：1
> 
> 时间：2013-03-03T12:43:51.457
> 
> 标签：c#, .net, c#-4.0

执行显式转换和使用 as/is 语法有什么区别？

```
// explicit casting
var castedObj = (ICar)originalObj;

// 'as' casting
var obj2 = originalObj as ICar; 
```

我的假设是，在使用 as/is 时创建 msil 代码时正在优化使用显式转换，这需要影响性能的运行时检查。

我对么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:51:25.620

性能应该与您的选择无关：

*   如果您知道它是`ICar`，请使用演员表。

*   如果您不知道，请使用“as”并测试结果是否为空。

使用任何表达您的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:46:32.270

强制转换也需要运行时检查，所以差别很小。

返回 null 或强制转换的`as`对象，因此它可能具有分配引用的微小额外开销 [编辑：但似乎不是；请参阅下面链接的博客]

（如果编译器在编译时知道类型，它将优化转换，但它也会优化`as`转换。此外，如果转换失败，它会生成一个非常慢的异常，但如果你期望的话并不重要演员总是成功的。）

从技术上讲，对于铸件，产生的 IL 是（例如铸件`object`到`string`）：

```
castclass string 
```

对于一个`as`：

```
isinst string 
```

请参阅以下博客文章，其中有人做了一些详细的时间安排（并发现这`isinst`稍微快了一点，但不是你关心的任何数量）：

[http://m3mia.blogspot.co.uk/2007/11/comparing-isinst-to-castclass.html](http://m3mia.blogspot.co.uk/2007/11/comparing-isinst-to-castclass.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:48:48.563

您为什么不对此进行分析并亲自查看？

但是要考虑的重要一点是，在您的第一个实例中，如果它不是 ICar，它将引发异常。您可以将其包装在 try/catch 块中并处理异常，但使用“as”关键字可能会更快，如果 originalobj 不是 ICar，它将为 obj2 分配 null，然后您可以简单地进行 null 检查而不是依赖关于计算成本更高的异常处理。

然而，在今天的机器上，性能上的差异可以忽略不计。

# clojure - 以下流程的更好成语

> ID：15185786
> 
> 赞同：0
> 
> 时间：2013-03-03T12:43:58.240
> 
> 标签：clojure

我有一段代码如下 -

```
 (future
          (
            (comp
             (fn [data]
               (service/parse srv data))
             (fn []
               (service/fetch srv))
            ))) 
```

基本上有两个函数`fetch`，`parse`我以后必须调用它们。的结果`fetch`由`parse`函数使用。不知何故，上面的内容似乎很冗长，因为我必须创建匿名函数以便我可以`comp`使用它们，然后使用额外的 () 来执行 comped 函数。

有没有更好的方法来实现上述目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:11:27.933

我假设`srv`在 Var 中定义了一些 url 或其他对象？从您的代码中不清楚。无论如何，等价的：

```
(future
  (let [data (service/fetch srv)]
    (service/parse srv data))) 
```

或者干脆

```
(future
  (service/parse srv (service/fetch srv))) 
```

我希望您可以重构`parse`，因此它不依赖于`srv`，但我没有足够的信息来确定您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:03:33.353

```
(future
    (->> (service/fetch srv)
         (service/parse srv))) 
```

# cuda - CUDA ILP、指令获取、流水线和分支

> ID：15185788
> 
> 赞同：1
> 
> 时间：2013-03-03T12:44:03.203
> 
> 标签：cuda

我正在 CUDA Kepler GTX680 上编写体积光线投射算法。该算法是寄存器密集型的，这会导致高寄存器溢出或最大占用率的 50%。提高吞吐量的推荐方法是对指令进行排序以支持指令级并行性。

为了实现架构的最大吞吐量，各种管道必须保持忙碌。算术单元的管道长度为 cca。22 条指令，因此为了实现它们的全部吞吐量，必须在每个时钟周期安排一个新的算术运算。我希望交换 warp（由于其不满足的数据依赖性而停用一个 warp 并激活另一个准备好运行的 warp）不会触及算术单元管道。因此，我假设 CUDA 架构通过交换多个扭曲有效地隐藏了一些指令依赖关系，就像它隐藏内存延迟一样。这个假设正确吗？

指令获取和解码是否流水线化？管道有多长？我想如果当前的warp由于不满足的数据依赖性而被换出，那么指令管道会被刷新，因此交换warp并不是完全免费的，对吧？分支如何影响指令处理？我想分支指令必须停止指令流水线，直到评估分支条件，这似乎使谓词评估比分支更便宜。是这样吗？

Kepler GK104/110 架构的指令缓存有多大，它是如何组织的？可能对于一个复杂的内核来说，取指令的速度可能是瓶颈吗？

我将感谢任何可以阐明我提到的任何领域的参考资料。NVidia 制作了大量的 PowerPoint 要点演示，但这些仅作为口头演示的补充有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:22:29.717

最好每个问题问一个问题。

> 因此，我假设 CUDA 架构通过交换多个扭曲有效地隐藏了一些指令依赖关系，就像它隐藏内存延迟一样。这个假设正确吗？

是的，机器隐藏任何类型延迟的主要机制是让多个 Warp 准备好执行，无论是来自相同的还是不同的块。

> 因此交换warp并不是完全免费的，对吧？（将多个问题合并为一个）

不，交换经线是零成本。第一点（延迟隐藏）取决于此。从[这里](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#hardware-multithreading)的 C 编程指南：

> 由多处理器处理的每个 warp 的执行上下文（程序计数器、寄存器等）在 warp 的整个生命周期内都在芯片上维护。因此，从一个执行上下文切换到另一个执行上下文没有成本，并且在每个指令发出时间，warp 调度程序都会选择一个线程准备好执行其下一条指令的线程（warp 的活动线程）并将指令发布给这些线程.

对于一般的架构理解，我推荐 Fermi[白皮书](http://www.nvidia.com/object/IO_86775.html)、Kepler GK104 (GTX680)[白皮书](http://international.download.nvidia.com/webassets/en_US/pdf/GeForce-GTX-680-Whitepaper-FINAL.pdf)和 Kepler GK110[白皮书](http://www.nvidia.com/content/PDF/kepler/NVIDIA-Kepler-GK110-Architecture-Whitepaper.pdf)。

# content-management-system - 我应该继续开发我的网站还是继续做其他事情？

> ID：15185792
> 
> 赞同：0
> 
> 时间：2013-03-03T12:44:41.873
> 
> 标签：content-management-system

所以在过去的一年左右的时间里，我一直在为我的一个朋友投入大量时间在jungleemporium.com 上。它有一个我（几乎）从头开始构建的购物车，所以我一直将它作为学习 PHP/SQL 的机会。

我有点觉得我已经到了一个地步，无论如何，我都会觉得还有更多事情要做。我喜欢做这些项目，但我不一定想重新发明轮子。

所以我认为我应该继续学习 Joomla 之类的东西，但我仍然喜欢我的 FTP 文件夹与一些臃肿的 CMS 相比的精简程度，以及我如何知道这个特定的代码输入/输出。

那么最好的做法是什么？继续从头开始建设或加入主要的 CMS 潮流。如果有，是哪个？WordPress、Joomla、Drupal？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:52:08.297

我觉得在进入主要 CMS 之前通过从头开始构建一些东西来练习和更好地理解编码是件好事。

但是，如果您觉得自己厌倦了自己制作所有东西，那么我建议您使用 Joomla，因为它在自定义和改进方面比 Wordpress 有更多的可能性。

# asp.net-mvc - 验证摘要和 AJAX 请求

> ID：15185793
> 
> 赞同：1
> 
> 时间：2013-03-03T12:44:42.630
> 
> 标签：asp.net-mvc, jquery-validate, unobtrusive-validation

我正在编写一个 jQuery 插件，它允许我们轻松地“hijax”一个标准的 HTML 表单，通过 AJAX 而不是标准的 POST 提交它。

插件需要处理的一件事是验证错误，在 ASP.NET MVC 的情况下，服务器上的 ModelState 错误。

我编写了一个动作过滤器，它拦截 AJAX 请求并将 Modelstate 错误作为 JSON 返回。这适用于字段错误（即那些在表单上有输入的错误）​​：

```
$.ajax({
    url: this.action,
    type: "POST",
    data: $(this).serialize(),
    statusCode: {
        400: function (xhr, textStatus, errorThrown) {
            var errors = $.parseJSON(xhr.responseText);
            validator.showErrors(errors);
        }
    },
    success: function (response) {
        window.location.href = "/login/success";
    }
}); 
```

jQuery Validate函数查找与错误键匹配的`showErrors`输入元素。`name`

由于 ASP.NET MVC 中的标准约定是在您想要提供“摘要”错误时执行以下操作：

```
ModelState.AddModelError("", "Error without a key"); 
```

这会导致 jQuery validate 抛出异常。

到目前为止我想出的最好的解决方案是在我的表单上创建一个隐藏的输入：

```
<input type="hidden" name="summary" disabled/> <!-- prevent it from being submitted -->
@Html.ValidationMessage("summary") 
```

然后在我想显示“摘要”错误时在服务器上执行以下命令：

```
ModelState.AddModelError("summary", "Summary error"); 
```

这并不理想，因为它不能很好地处理多个错误。一个更好的解决方案是挂钩不显眼的验证插件如何处理摘要错误，但我不知道该怎么做。

# c++ - C++ 使用比较器对字符串向量的向量进行排序。请帮我理解

> ID：15185797
> 
> 赞同：3
> 
> 时间：2013-03-03T12:45:35.653
> 
> 标签：c++

我正在尝试对字符串向量的向量进行排序，但我不明白如何创建比较器函数。

我看到了这个线程，但无法在我的情况下实现： [sorting vector of strings of strings in C++](https://stackoverflow.com/questions/7114442/sorting-vector-of-vector-of-strings-in-c)

所以我有一个字符串向量的向量，如下所示：
hello, world, 1, 3, 4, 7, 2, 1
world, hello, 1, 4, 8, 4 ,2, 1
phone, mouse, 2, 3 , 5, 2, 1, 4

我需要按我的用户指定的列对这个向量字符串向量进行排序。我的用户可以指定多个列进行排序。假设第 3 列和第 5 列。第 3(1,1,2) 列的第 1 行和第 2 行具有相同的值，那么我们必须按第 5 列排序。为了不使事情复杂化，这都是按升序排列的。

当你将它传递给比较器函数时，我不明白它是如何工作的概念。我的函数如何在这些线程中的人发布的示例中循环？

无论如何提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T15:35:39.570

您可以只使用`std::sort`对向量进行排序，并定义一个**自定义比较器函子**（即具有重载的类`operator()`）。

您可以将排序列的索引存储在 a 中`std::vector`（这将是自定义比较器对象的“状态”的一部分），并比较索引存储在该向量中的列中的字符串。

您开始比较“排序列”向量中第一个索引中指定的列的值；如果它们相同，则继续比较向量中下一个索引中指定的列的值，等等。这可以在比较器重载`for`主体内的循环内完成。`operator()`

以以下代码为例（使用 g++ (GCC) 4.7.2 编译）：

```
#include <algorithm>
#include <iostream>
#include <string>
#include <vector>
using namespace std;

vector<vector<string>> BuildTestData()
{   
    vector<string> r1 = {"hello", "world", "1", "3", "4", "7", "2", "1"};
    vector<string> r2 = {"world", "hello", "1", "4", "8", "4", "2", "1"};
    vector<string> r3 = {"phone", "mouse", "2", "3", "5", "2", "1", "4"};

    return vector<vector<string>>{r1, r2, r3};
}

void PrintData(const vector<vector<string>> & v)
{
    for (size_t r = 0; r < v.size(); r++)
    {
        for (size_t c = 0; c < v[r].size(); c++)
            cout << v[r][c] << ' ';
        cout << '\n';
    }
}

class StringListComparator
{
public:
    explicit StringListComparator(vector<int> sortColumns)
        : m_sortColumns( move(sortColumns) )
    {
    }

    bool operator()(const vector<string>& lhs, const vector<string>& rhs) const
    {   
        // For each sorting column:
        for (size_t i = 0; i < m_sortColumns.size(); i++)
        {
            // Comparison with current column
            const int currentColumn = m_sortColumns[i];

            if (lhs[currentColumn] < rhs[currentColumn])
                return true;

            if (lhs[currentColumn] > rhs[currentColumn])
                return false;

            // lhs[currentColumn] == rhs[currentColumn],
            // so check with next sorting column
        }

        return false;
    }

private:
    vector<int> m_sortColumns;
};

int main()
{
    auto v = BuildTestData();
    cout << "Before sorting:\n";    
    PrintData(v);

    vector<int> sortColumns = {5, 7}; // indexes are 0-based

    sort(v.begin(), v.end(), StringListComparator(sortColumns));

    cout << "\nAfter sort:\n";
    PrintData(v);
} 
```

样品运行：

> ```
> Before sorting:
> hello world 1 3 4 7 2 1
> world hello 1 4 8 4 2 1
> phone mouse 2 3 5 2 1 4
> 
> After sort:
> phone mouse 2 3 5 2 1 4
> world hello 1 4 8 4 2 1
> hello world 1 3 4 7 2 1 
> ```

# java - LibGDX - 向上滑动或向右滑动等？

> ID：15185799
> 
> 赞同：11
> 
> 时间：2013-03-03T12:45:48.173
> 
> 标签：java, android, touch, libgdx, swipe

[触摸区 http://imageshack.us/a/img836/2909/swipe1.png](http://imageshack.us/a/img836/2909/swipe1.png)

在绿色区域中，用户可以向上、向右、向下、向左滑动。我现在如何获得例如向上滑动？或向下滑动？或向右滑动或向左滑动？例如如何获取字符串 -> input = getSwiped(); -> 输入然后向上，或向右，或向下，或向左

用户可以触摸两个按钮。1 或 2。1 代表鸭子，2 代表跳跃。

我想同时检查这个输入。用户可以同时触摸和向上滑动。

我知道有一个 GestureDetector。我查看了代码，但不知道如何使用滑动部分。

我知道一点如何检查按钮。问题只在这里 -> 如何同时检查输入以及如何向上滑动或向右滑动等。

我搜索了一个如何检查多点触控：

```
for (int i = 0; i < 10; i++) {
    if (Gdx.input.isTouched(i) == false) continue;
    float x = Gdx.input.getX(i);
    float y = Gdx.graphics.getHeight() - Gdx.input.getY(i) - 1;
    //...
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-01-10T06:52:09.597

[这](http://truongtx.me/2013/04/27/simple-swipe-gesture-detection-for-libgdx/)解释了一种很好的方法来实现一个系统来检测滑动的方向。我将其发布在这里，因为该文章将来可能会丢失：

创建一个类名 SimpleDirectionGestureDetector

```
public class SimpleDirectionGestureDetector extends GestureDetector {
public interface DirectionListener {
    void onLeft();

    void onRight();

    void onUp();

    void onDown();
}

public SimpleDirectionGestureDetector(DirectionListener directionListener) {
    super(new DirectionGestureListener(directionListener));
}

private static class DirectionGestureListener extends GestureAdapter{
    DirectionListener directionListener;

    public DirectionGestureListener(DirectionListener directionListener){
        this.directionListener = directionListener;
    }

    @Override
    public boolean fling(float velocityX, float velocityY, int button) {
        if(Math.abs(velocityX)>Math.abs(velocityY)){
            if(velocityX>0){
                    directionListener.onRight();
            }else{
                    directionListener.onLeft();
            }
        }else{
            if(velocityY>0){
                    directionListener.onDown();
            }else{                                  
                    directionListener.onUp();
            }
        }
        return super.fling(velocityX, velocityY, button);
    }

}

} 
```

在 LibGdx 应用程序的 create() 函数中，将其用于激活游戏的手势处理：

```
Gdx.input.setInputProcessor(new SimpleDirectionGestureDetector(new SimpleDirectionGestureDetector.DirectionListener() {

@Override
public void onUp() {

}

@Override
public void onRight() {

}

@Override
public void onLeft() {

}

@Override
public void onDown() {

}
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-11T08:32:36.443

我做了一个简单的类来识别滑动的方向

```
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.input.GestureDetector;
import com.badlogic.gdx.math.Vector2; 
```

/** * 由 ROHIT 于 2018 年 3 月 11 日创建。*/

```
public class swipelistener  {

public boolean isswipright(){
    if(Gdx.input.isTouched()&&Gdx.input.getDeltaX()>0)
        return true;
    return false;
}

public boolean isswipleft(){
    if(Gdx.input.isTouched()&&Gdx.input.getDeltaX()<0)
        return true;
    return false;
}

public boolean isswipup(){
    if(Gdx.input.isTouched()&&Gdx.input.getDeltaY()>0)
        return true;
    return false;
}

public boolean isswipdown(){
    if(Gdx.input.isTouched()&&Gdx.input.getDeltaX()<0)
        return true;
    return false;
}

} 
```

上述所有代码都使用 libGDX`Gdx.input.getDeltaX()`并`Gdx.input.getDeltaY()`获得方向的相对变化。

希望这会有所帮助。

# c++ - 'cout' 未在此范围内声明

> ID：15185801
> 
> 赞同：81
> 
> 时间：2013-03-03T12:46:03.620
> 
> 标签：c++, iostream, cout

我有一个 C++ 程序：

**测试.cpp**

```
#include<iostream>

int main()
{
    char t = 'f';
    char *t1;
    char **t2;
    cout<<t;    //this causes an error, cout was not declared in this scope
    return 0;
} 
```

我得到**错误**：

> 'cout' 未在此范围内声明

为什么？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-03T14:08:35.477

将以下代码放在前面`int main()`：

```
using namespace std; 
```

而且您将能够使用`cout`.

例如：

```
#include<iostream>
using namespace std;
int main(){
    char t = 'f';
    char *t1;
    char **t2;
    cout<<t;        
    return 0;
} 
```

现在花点时间阅读一下 cout 是什么以及这里发生了什么：[http ://www.cplusplus.com/reference/iostream/cout/](http://www.cplusplus.com/reference/iostream/cout/)

* * *

此外，虽然它可以快速完成并且有效，但这并不是一个`using namespace std;`在代码顶部简单添加的好建议。有关详细的正确方法，请阅读此[相关 SO 问题](https://stackoverflow.com/q/1452721/1835769)的答案。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-03-03T12:47:29.887

使用`std::cout`, 因为`cout`是在命名空间中定义的`std`。或者，添加`using std::cout;`指令。

# css - 使用属性选择器来设置网页样式

> ID：15185803
> 
> 赞同：0
> 
> 时间：2013-03-03T12:46:20.490
> 
> 标签：css, css-selectors

我发现使用 css 属性选择器来设置网页样式非常有用，因为对我来说，它似乎比我使用`class=""`or时更快（编写/阅读代码） `id=""`。

使用属性选择器来设置网页样式是一种好习惯吗？而且，这是否适用于旧版浏览器？

**HTML：**

```
<div data-header></div> 
```

**CSS：**

```
div[data-header] {
  /* style here */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:53:20.327

使用属性的一个问题是，它们总是与一种 html 元素相关联。所以在上面的例子中，`data-header`只能应用于 div 。如果你想将相同的样式应用于`<p>`标签，例如。你将不得不再次编写样式：

```
p[data-header] 
```

并且由于您谈论的唯一优势是它需要更少的打字..那么这是一个微不足道的优势（即我们不是在谈论更少的处理或渲染时间或增加的可维护性等）

我建议您考虑[面向对象 CSS](https://github.com/stubbornella/oocss/wiki) (OOCCSS) 的原则：它具有以下关键原则：

*一个物体无论放在哪里都应该是一样的。因此，不要使用 .myObject h2 {...} 设置特定 h2 的样式，而是创建并应用一个描述相关 h2 的类，例如 h2 class="category"。*

这使您的 css 更可重用.. css 管理不善的一个常见问题是您很容易得到数千行 css.. 其中大部分是多余的。

有关 OOCCSS 如何使 css 更可重用的具体示例。请参阅此[答案](https://stackoverflow.com/a/15044367/766570)

**重要更新：我上面所说的拥有比属性更可重用的类是不正确的（见下面的讨论）..所以请忽略它。**

既然这么说..我仍然会避免只使用属性来设置我的html的样式..如果您使用css属性的唯一原因与它的设计用途不同

（一般来说，对你的代码太聪明并不是一个好主意。虽然它可以节省你的时间等等。它可能会使以后使用你的代码的人感到困惑。总是以来自世界各地的其他人的态度编码世界可能会掌握您的代码..因此可读性胜过更少的代码等..尤其是当绝对没有其他优势（例如处理时间等）时。

例如（我什至没有做任何研究就这么说..我只是依靠我使用 css 的 10 多年经验）..如果我在你的代码中看到这个

```
<div data-header> 
```

我不知道这个数据头是唯一的选择器还是可以出现在其他地方..但是如果我看到这个：

```
<div class="data-header"> 
```

然后我可以立即得出结论（无需查看代码中的其他任何地方）这*不是*一个独特的选择器..而且我很可能会看到同一页面中的其他元素，甚至是应用了相同类的其他页面..（即与使用`<div id="data-header">`.. 不同，后者是唯一的）

假设我是 javascript/jQuery 的人，而你只是设计师..这是你提供的一条不言而喻的信息，只是因为你使用 CSS 的设计方式。但是，如果开始变得聪明并以自己的方式使用 CSS 属性..那么这就是麻烦的秘诀（请参阅我的问题[在这里](https://stackoverflow.com/questions/6101991/how-to-use-html-5-caption-tag-for-images-rather-than-tables)和我在它下面发表的评论.. 获得对每个人都意味着 x 的东西并制作这意味着你只为你）。

# java - 对象检测/跟踪

> ID：15185806
> 
> 赞同：-2
> 
> 时间：2013-03-03T12:46:31.383
> 
> 标签：java, opencv, javacv

我想用 Java 编写一个程序以具有*“对象检测和跟踪”*功能，我已经搜索过，发现有可以做到这一点的库。像 OpenCV 一样，如果有人需要在 Java 中使用它，需要使用 JavaCV 包装器...，但我没有找到任何好的教程来学习如何使用 OpenCV 和 JavaCV，如果使用这些库我们需要什么。如果有人知道这一点，可以建议我在哪里可以找到这些教程。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:54:52.823

这里有一个很好的“快速入门”教程：

[https://code.google.com/p/javacv/](https://code.google.com/p/javacv/)

请注意，Java 库只是 C++ 库的包装器，因此一旦您启动并运行 Java 库，您可以在 C++ 教程中找到所需的任何功能

# .net - 如何从 .NET 中的 USB 设备读取串行数据？

> ID：15185815
> 
> 赞同：-1
> 
> 时间：2013-03-03T12:47:35.767
> 
> 标签：.net, gps, usb, device

我有一个插入 USB 端口的 Garmin GPS 天线。我想在我的.NET 代码（即以编程方式）中读取它的纬度和经度。有谁知道如何做到这一点？

非常感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:06:25.557

[根据您提供的信息，可能值得查看https://www8.garmin.com/support/commProtocol.html](https://www8.garmin.com/support/commProtocol.html)上的 Garmin SDK

我不确定您的特定设备是否像 USB 串行适配器一样工作，因此您是否能够以这种方式读取带有坐标的 NEMA 数据字符串，或者协议是否更复杂，上次我连接 GPS 时使用的是 raw串行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:03:28.297

基本上，您必须在文档中查找信息，例如您的 Garmin GPS 天线以哪种格式进行通信，以及您必须对天线开始搜索 GPS 信号做些什么。

如果没有任何文档，则很难像您想要的那样创建某事。
如果有的话，我会使用[ICSharpCode Usb Library](http://www.icsharpcode.net/OpenSource/SharpUSBLib/default.aspx)或[LibUsbDotNet](http://sourceforge.net/projects/libusbdotnet/)或[csharp-usb-hid-driver](https://code.google.com/p/csharp-usb-hid-driver/)开始编码，它们是为一些低级 I/O 操作而设计的。

此外，channel9 上有一个[很好](http://channel9.msdn.com/coding4fun/articles/Is-that-you-Writing-Better-Software-for-Cool-USB-Hardware)的教程l，这可能对您的项目非常有帮助

# php - 如何使用 Plupload 创建新画廊并同时上传文件？

> ID：15185820
> 
> 赞同：0
> 
> 时间：2013-03-03T12:48:07.780
> 
> 标签：php, jquery, wordpress, plupload

我正在使用 Plupload 为 Wordpress 创建一个图库插件，但遇到了一个小问题。

我的计划是让用户输入新画廊的名称并将文件放入容器中进行上传。（没有按钮开始上传。）

我的“问题”是如果用户将 5 个文件放入容器中，Plupload 会触发`upload.php`5 次。

我目前的“解决方案”是检查是否`gallery_id`为空。如果为空`gallery_name`且不为空，则表示用户正在创建一个新图库。

但由于这 5 次都是相同的，因此`addNewGAllery()`被触发 5 次。

什么是只创建一次新画廊，然后将所有 5 个图像添加到此的最佳方法 - 无需先创建画廊，然后添加文件？

```
var sim_gal_data = JSON.parse(JSON.stringify(sim_gal_data_arr));

//JS code
var uploader = new plupload.Uploader({
    runtimes : 'gears,html5,flash,silverlight,browserplus',
    browse_button : 'btn-file-browse',
    container : 'drag-drop-container',
    drop_element : 'drag-drop-container',
    max_file_size : sim_gal_data['max_file_size'],
    url : sim_gal_data['upload_url'],
    multi_selection : true,
    multiple_queues: true,
    flash_swf_url : sim_gal_data['plupload_url']+'plupload.flash.swf',
    silverlight_xap_url : sim_gal_data['plupload_url']+'plupload.silverlight.xap',
    filters : [
      {title : "Image files", extensions : "jpg,gif,png"}
    ],
    multipart_params: {
      gallery_name : ''
    },
    init : {
      FilesAdded: function(up, files) {

        // Don't initiate upload if there is no gallery name
        if(jQuery('#image-upload .gallery-name').val().length > 0){
          if(files.length > 0) {

            // Get gallery name
            uploader.settings.multipart_params['gallery_name'] = jQuery('#image-upload .gallery-name').val();

            // Create list of files being uploaded
            jQuery.each(files, function(i, file) {
                jQuery('#filelist').append(
                    '<div id="' + file.id + '" class="file_upload">' +
                      '<div class="file_name">' + file.name + ' (' + plupload.formatSize(file.size) + ')</div>' +
                      '<label class="file_progress"><b></b></label>' +
                     '</div>'
                );
            });

            // Ready set go!
            up.refresh();
            up.start();
          }
        } else {
          // Remove files from upload list
          up.splice(0);
        }
      }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:13:56.723

定义画廊 id 参数

```
multipart_params: {
  gallery_name : '',
  gallery_id: ''
}, 
```

在第一次上传`gallery_id`是空的，所以你创建画廊。然后发回一个带有新的响应对象`gallery_id`

```
//upload.php
die(json_encode(array(
    'success': 1,
    'gallery_id': $gallery_id
))); 
```

捕获响应并更新 plupload 设置

```
FileUploaded: function(up, file, response) {
    var res = jQuery.parseJSON(response.response);
    if (res.success) {
        up.settings.multipart_params['gallery_id'] = res.gallery_id;
    }
} 
```

# python - pip 可以与 Visual Studio 中的 Python 工具一起使用吗？

> ID：15185827
> 
> 赞同：62
> 
> 时间：2013-03-03T12:48:40.933
> 
> 标签：python, visual-studio, pip, ptvs

我正在与一些同学合作构建一个 python 应用程序，并希望使用 Visual Studio intelli-sense 的“训练轮”。他们在 mac 和 linux 上使用 python，因此理想情况下，我们的源代码控制 repo 将仅包含`*.py`我们编写的源文件，以及`requirements.txt`pip 依赖项的导出（使用该`pip freeze`方法）。

我希望能够创建一个新的 Visual Studio 项目，然后能够在该项目中运行以下命令（例如）：

```
pip install boto
pip install fabric
pip install cuisine
pip freeze > requirements.txt 
```

之后，能够编写一些引用这些库的代码，并能够在 Visual Studio 中运行它。

有没有办法做到这一点？Visual Studio 中的 Python 甚至能够以 pip 中可用的格式处理模块，还是 VS 中使用的所有 Python 库都必须针对 Windows 进行预编译？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2015-09-13T02:31:15.647

是的！转到`Tools`-> `Python Tools`-> `Python Environments`。

这将打开一个新窗格，您可以从菜单中选择`pip`（VS 2015）或`Packages`（VS 2017）（`Overview`默认情况下），然后您可以输入您的模块并双击安装。

[![在此处输入图像描述](../Images/089287e39078ff730d50b348820fb695.png)](https://i.stack.imgur.com/Luz7E.png)

某些软件包具有复杂的依赖关系，您可能需要从以下链接手动安装它们：

*   `numpy` [http://sourceforge.net/projects/numpy/files/NumPy/](http://sourceforge.net/projects/numpy/files/NumPy/)
*   `scipy` [http://sourceforge.net/projects/scipy/files/scipy/](http://sourceforge.net/projects/scipy/files/scipy/)
*   `Matplotlib` [http://matplotlib.org/downloads.html](http://matplotlib.org/downloads.html)
*   `Pandas` [http://pandas.pydata.org/getpandas.html](http://pandas.pydata.org/getpandas.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-07-07T17:16:20.130

在 VS 2017 上，切换到“解决方案资源管理器”并右键单击，如图所示：

[![在此处输入图像描述](../Images/350809e8b68ade06ef4b2a8b9a436c13.png)](https://i.stack.imgur.com/bVjLn.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-03T13:05:51.997

是的，您可以，这是从这里获取的简单指南[https://zignar.net/2012/06/17/install-python-on-windows/](https://zignar.net/2012/06/17/install-python-on-windows/)

在安装 Pip 之前，您需要 setuptools 或分发。如果您使用的是 Python3，则必须使用分发，因为 setuptools 不支持 Python 3.x

要安装分发，请在此处下载设置文件[https://pypi.python.org/pypi/distribute/0.6.27](https://pypi.python.org/pypi/distribute/0.6.27)并使用 python 调用它。

python.exe C:\Path\to\distribute_setup.py

现在已经安装了distribute，也可以安装Pip。在此处下载 get-pip.py [https://raw.github.com/pypa/pip/master/contrib/get-pip.py](https://raw.github.com/pypa/pip/master/contrib/get-pip.py)并以与调用distribute_setup相同的方式调用它：

python.exe c:\Path\to\get-pip.py

之后安装 Pip。但您可能还想将 C:\Python32\Scripts 添加到路径系统变量（参见步骤 1）。因此，您可以从任何位置执行 pip.exe。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-07T02:18:43.510

从提到 Visual Studio 开始，听起来您正在使用 Visual Studio 的 Python 工具。如果是这样，那么[对 pip、easy_install 和 virtualenv](https://pytools.codeplex.com/wikipage?title=Python%20Environments)的支持是 PTVS 2.0 beta 中的新功能之一 -[获取](https://pytools.codeplex.com/releases/view/103101)并尝试一下。将解释器引用添加到项目后，您将在解决方案资源管理器的该解释器的上下文菜单中找到安装包的命令。

这样，您也不必自己设置 pip，因为 PTVS 会在您第一次尝试安装软件包时为您完成。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-27T09:30:39.423

当您使用 Visual Studio 安装 Python 支持时，可以在中找到 PIP 可执行文件 `C:\Program Files (x86)\Microsoft Visual Studio\Shared\Python36_64\Scripts` 如果它不存在，请在命令提示符处键入以下内容以找出 Python 安装位置 `py --location` 然后将位置添加到路径，或者使用完整路径运行 pip电源外壳 `. "C:\Program Files (x86)\Microsoft Visual Studio\Shared\Python36_64\Scripts\pip.exe" install pillow`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-29T04:39:44.750

您可以像这样设置 pip 的路径：

```
Open cmd prompt 
```

跑`set PATH="C:\Program Files (x86)\Microsoft Visual Studio\Shared\Python36_64"`

# http - 当我尝试来自 Erlang 的 HTTP 请求时，Nginx 为索引文件返回 404

> ID：15185829
> 
> 赞同：0
> 
> 时间：2013-03-03T12:48:42.227
> 
> 标签：http, configuration, nginx, erlang

使用来自 erlang 站点的这个简单[urlget](http://www.erlang.org/article/8)模块的更新版本，我似乎无法从运行 nginx 的 HTTP 服务器请求现有文件。

```
> urlget:direct("http://clientsideweb.net/index.html"). 
Here connect:"clientsideweb.net" 80
{ok,{"http://clientsideweb.net/index.html",
     {"HTTP/1.1",404,"Not Found"},
     [{"Connection","close"},
      {"Content-Length","168"},
      {"Content-Type","text/html"},
      {"Date","Sun, 03 Mar 2013 12:18:05 GMT"},
      {"Server","nginx/1.2.5"}],
     "<html>\r\n<head><title>404 Not Found</title></head>\r\n<body bgcolor=\"white\">\r\n<center><h1>404 Not Found</h1></center>\r\n<hr><center>nginx/1.2.5</center>\r\n</body>\r\n</html>\r\n"}} 
```

如果您手动浏览到该地址，您将正常获得 index.html 文件。我想也许 nginx 可能有一些基于 http 标头限制的内置安全配置？有谁肯定知道吗？我尝试添加类似 chrome 的 User Agent 标头字符串，但它返回了 404，并附有关于“填充以禁用 MSIE 和 Chrome 友好错误页面”的附加注释

# javascript - javascript对象中的范围

> ID：15185837
> 
> 赞同：2
> 
> 时间：2013-03-03T12:50:12.240
> 
> 标签：javascript, function, object, scope

这是我的代码：

```
var Test = (function () {
    function Test() {
        this.sum = n;

        this.calculate();
    }

    Test.prototype.calculate = function() {
        n = 5;
        return n;
    }
    return Test;
})();

var mytest = new Test(); 
```

你能解释一下为什么 n 是未定义的吗？我认为 return n 应该有所帮助，但我错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:47:22.613

您的构造函数似乎有一个错误。`n`您在分配它之前正在阅读。

也许这会更清楚：

```
function Test() { this.sum = this.calculate(); } 
```

然后完全摆脱`n`价值。

```
Test.prototype.calculate = function() { return 5; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:48:03.893

这里我试着解释一下。

```
function Test() {
    this.sum = n; // assign undefined to this.sum

    this.calculate(); // n = 5, but doesn't affect this.sum as undefined is already passed to sum
} 
```

正确的行为（你想要的）

```
function Test() {

    this.calculate(); 
    this.sum = n; 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:42:24.713

不知道你想做什么，但试试这个：

```
var Test = (function () {
    function Test() {
        this.sum = this.calculate();
    }

    Test.prototype.calculate = function() {
        var n = 5;
        return n;
    }
    return Test;
})();

var mytest = new Test();
alert(mytest.sum); // 5 
```

回答你的问题 -`n`因为`undefined`它在你试图做的时候没有价值`this.sum = n;`。`this.calculate()`如果您首先调用然后尝试分配它可能会起作用`this.sum = n;`。但即使在这种情况下，这也是非常错误的，因为您将变量泄漏`n`到全局命名空间（当您没有使用 显式初始化变量时`var`，它会泄漏到全局命名空间 - `window`）。所以为了说明我的意思 - 这可以工作：

```
var Test = (function () {
    function Test() {
        this.calculate();

        this.sum = n; // n is global now, hence accessible anywhere and is defined by this moment
    }

    Test.prototype.calculate = function() {
        n = 5; // not initialized with var so it leaks to global scope - gets accessible through window.n
        return n; // has no sense, since you do not use returned value anywhere
    }
    return Test;
})();

var mytest = new Test(); 
```

# jquery - 完成后再次启动jquery动画

> ID：15185839
> 
> 赞同：0
> 
> 时间：2013-03-03T12:50:33.673
> 
> 标签：jquery, replay

我是 JQuery 新手，目前无法解决这个问题。我在单击链接时创建了一小段动画。但是，当我再次单击链接时，动画不会重播。我需要刷新页面才能使其正常工作。

这是完整的代码。当有人点击时，我正在尝试制作一系列动画。

这是更新的代码

```
$(document).ready(function(){
   $("#start").one('click',function(){
      $("#mailer").animate({left:'300px',top:'55px'}, 2000);
      $("#ms-server1").delay(2000).fadeIn();
      $("#mail").delay(2000).animate({left:'800px',top:'200px'}, 2000);
      $("#mail1").delay(2000).animate({left:'550px',top:'240px'}, 2000);
      $("#man-opn").delay(6000).fadeIn();
      $("#woman-opn").delay(4000).fadeIn();
      $("#opnstat1").delay(6500).fadeIn();
      $("#opnstat2").delay(4500).fadeIn();
      $("#lnk").delay(8500).fadeIn();
      $("#click-info").delay(9000).animate({left:'300px',top:'60px'}, 5000);
      $("#clickstat1").delay(11500).fadeIn(function(){
         $("#ms-server1").hide();
      });
   });
}); 
```

当有人再次单击链接 ID #start 时，我希望重播整个动画/功能。

抱歉之前未完成的代码非常感谢任何帮助..再次感谢

[http://jsfiddle.net/gopakumar/tgz5y/1/](http://jsfiddle.net/gopakumar/tgz5y/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:51:54.737

每次要执行此动画时，都必须重置 div 的位置。我已将此添加到您的 JSFiddle：

[工作演示](http://jsfiddle.net/tgz5y/4/)

```
$(document).ready(function(){
    var start= $("#start");
    $("#start").click(function(){

        if (!start.hasClass('started')){
            start.addClass('started');
            $('#mailer,#mail,#mail1').css({"left":"9px","top":"52px","display":"none"});
            $("#mailer").css('display','block').animate({left:'300px',top:'55px'}, 2000);
            $("#ms-server1").delay(2000).fadeIn();
            $("#mail").css('display','block').delay(2000).animate({left:'300px',top:'200px'}, 2000);
            $("#mail1").css('display','block').delay(2000).animate({left:'350px',top:'240px'}, 2000,
            function(){
                start.removeClass('started');
            });
        }
   });
}); 
```

我删除了最后几个动画（它们仍然在小提琴中，只是不在 SO 上），因为它们占用了大量空间 - 并且没有为解决方案做出贡献。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:14:49.150

这可以使用递归轻松完成。

```
$(document).ready (function() {
  $('#link1').one('click',function() {
    function goAgain() {
      $('#image1').animate({left:'200px', top:'300px'}, 2000);
      goAgain();
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:02:07.443

在您的情况下， .one() 导致了您的问题，您只需将其设为 .on() ，每次点击都会执行动画。

如果你想要连续动画：

这个无限动画有两个很好的解决方案：

1 - 在javascript中使用设置间隔：

```
setInterval(function,millisec) 
```

您只需将其设置为每次完成时重复，因此在您的情况下毫秒为 2000 并且功能是您的 jquery 动画。

2 - 使用 css3 动画：

我在这里得到了文章[http://metaphorical-lab.com/blog/?p=302](http://metaphorical-lab.com/blog/?p=302)并且示例在顶部的左侧边栏周围浮动：D

# c++ - 替换对 shared_ptr 中对象的所有引用

> ID：15185842
> 
> 赞同：3
> 
> 时间：2013-03-03T12:50:49.100
> 
> 标签：c++, shared-ptr

是否可以替换 shared_ptr 的多个实例引用的对象？也许我不是很清楚，所以我举个例子：

```
shared_ptr<Base> a = new Derived1();
auto b = a;
auto c = b;

// This function replaces the object where a, b, and c point to.
magic(a, new Derived2()); 
```

我调查了 shared_ptr 的成员函数（重置和交换），但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:58:18.770

添加一个额外的间接层：

```
shared_ptr<unique_ptr<Base>> a = unique_ptr<Base>(new Derived1());
auto b = a;
auto c = b;

// This modifies the `unique_ptr` that `a` `b` and `c` point to
// to point to a new Derived2.
*a = unique_ptr<Base>(new Derived2()); 
```

# wix - WiX 升级后的加热错误

> ID：15185843
> 
> 赞同：2
> 
> 时间：2013-03-03T12:50:54.067
> 
> 标签：wix, wix3.5, tfsbuild, wix3.7

我将 WiX 从 3.5 版升级到 3.7 版，现在在安装程序的预构建步骤中遇到错误。

有问题的预构建步骤是`"%wix%\bin\heat.exe" dir "$(OutDir)_PublishedWebsites\Application Files" -dr INSTALL_LOCATION -cg SourceComponentGroup -ag -var var.SourcePath -out "$(ProjectDir)HeatFile.Generated.wxs"`

现在这会导致我们的 Team Build 失败并出现错误`C:\Program Files (x86)\MSBuild\Microsoft\WiX\v3.x\wix2010.targets (816): The command ""%wix%\bin\heat.exe" dir "C:\Builds\12\TFS\Wix 3.7 Test Build\Binaries\_PublishedWebsites\Application Files" -dr INSTALL_LOCATION -cg SourceComponentGroup -ag -var var.SourcePath -out "C:\TFS\WiX3.7\Install\HeatFile.Generated.wxs"" exited with code 3`

我无法弄清楚导致此错误的原因会发生什么变化，除非我无法找到的热量发生了变化。

**编辑：**

在 Rob 在下面的评论中提到详细构建后，我查看并发现在“构建前的环境”中发现 WIX 属性设置为`WIX = C:\Program Files (x86)\Windows Installer XML v3.5\`，但是当我通过控制面板查看系统环境变量中的相同属性时，我看到 WIX 设置为`C:\Program Files (x86)\WiX Toolset v3.7\`.

MSBuild 配置中的某个地方是否会设置此项？

**编辑2：**

我还在我们的 .wixproj 文件中发现了这一点：

```
<ProductVersion>3.5</ProductVersion>
<ProjectGuid>{GUID}</ProjectGuid>
<SchemaVersion>2.0</SchemaVersion>
<OutputName>Install</OutputName>
<OutputType>Package</OutputType>
<WixTargetsPath Condition=" '$(WixTargetsPath)' == '' AND '$(MSBuildExtensionsPath32)' != '' ">$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
<WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath> 
```

这里有什么需要改变的吗（例如产品版本）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:52:36.783

我做了两件事似乎已经解决了我的问题，所以我不能确定确切的解决方案是什么，但这就是我所做的。

1.  我重新启动了构建服务器。尽管它显示了正确的环境变量，并从命令行返回了正确的值，但我还是重启了以防万一。
2.  我将预构建事件更改为使用`$(WIX)`而不是`%WIX%`

构建现在正确运行事件并成功。我对 IIS 网站有不同的问题，但如果需要，我会提出一个新问题。

# sql-server-2008 - “获取在预期条件的上下文中指定的非布尔类型的表达式”我的查询错误？

> ID：15185844
> 
> 赞同：0
> 
> 时间：2013-03-03T12:50:54.753
> 
> 标签：sql-server-2008, tsql, stored-procedures, dynamic

当我将此查询传递给执行动态 sql 的 proc 时出现错误：

```
"select @display =  @display + gp2.ProblemDesc  + ''|' '
from (SELECT gp.GrantProblemID, gp.ProblemDesc, gps.GrantProblemStatus, row_number() over (partition by gp.grantproblemid order by p.periodid desc) ranking 
from MergedProgressReport.dbo.[PeriodAgencyGrantProblems] pagp    
inner join MergedProgressReport.dbo.PeriodAgencyGrants pag on pag.PeriodAgencyGrantsID = pagp.PeriodAgencyGrantID 
and pag.GrantNumber =  ''2011UMWX0001''   
inner join MergedProgressReport.dbo.periodagencyinfo pai on pag.PeriodAgencyInfoID = pai.PeriodAgencyInfoID   
inner join MergedProgressReport.dbo.Periods p on p.PeriodID = pai.PeriodID   
inner join MergedProgressReport.dbo.GrantProblemStatus gps on pagp.GrantProblemStatusID = gps.GrantProblemStatusID  
inner join MergedProgressReport.dbo.GrantProblems gp on pagp.GrantProblemID = gp.GrantProblemID 
and gp.GrantProblemAreaID = 7) xx right join MergedProgressReport.dbo.GrantProblems gp2 on xx.GrantProblemID = gp2.GrantProblemID and xx.ranking = 1 
where gp2.GrantProblemAreaID = 7 " 
```

我的过程：

```
CREATE proc [dbo].[Review_Get_PrePopValue](@sqlQuery nvarchar(500), @display nvarchar(200) OUTPUT)
as

EXEC sp_executesql @sqlQuery,   
      N'@display varchar(200) output', 
      @display = @display output 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:33:37.037

我的错误，我的参数@sqlQuery nvarchar(500) 太小，它截断了我的 proc 中的 sql 语句。只需将其调整为 3000。

# php - codeigniter batch_update-insert 确认

> ID：15185846
> 
> 赞同：0
> 
> 时间：2013-03-03T12:51:02.807
> 
> 标签：php, mysql, codeigniter

我有这个功能可以执行以下操作

```
function save($owner,$data){
///$owner='00002';$data=[['type1','value1'],['type','value2']];
///check if this $data is already in database, if +ve and != then update else insert
        $sel='';$rs=[];$ins=FALSE;$up=FALSE;$end=[];

        $this->db->select('id,type,value')->where('owner',$owner)

        //building WHERE statment
        foreach(array_keys($data)as $k)
            $sel.="type='$k' OR ";

        $this->db->where("(".trim($sel,' OR ').")");

        $r=$this->db->get('settings');

        if($r->num_rows() > 0)//building reference array
            foreach($r->result() as $r)$rs[$r->type]=$r;

        foreach($data as $t=>$v)
        {
            if(isset($rs[$t])){//case input already in db-->update
                if(!$v || $v!=$rs[$t]->value)$up[]=['id'=>$rs[$t]->id,'value'=>$v,'archived'=>0];
            }else{//case not-->insert
                if($v)$ins[]=['type'=>$t,'value'=>$v,'owner'=>$owner];
            }   
        }

        $this->db->insert_batch('settings',$ins);
        $this->db->update_batch('settings',$up,'id');
    } 
```

现在我如何确认 insert_batch 和 update_patch 都有效以及如何返回更新了多少字段.. 我尝试使用 db->affected_rows() 但由于我使用 2 个语句，因此它的返回不准确。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:02:07.177

为它创建一个变量怎么样？

```
private $inserted_num_rows;
private $updated_num_rows; 
```

然后存储到受影响的行

```
$this->db->insert_batch('settings',$ins);
$this->inserted_num_rows = $this->db->affected_rows();

$this->db->update_batch('settings',$up,'id');
$this->updated_num_rows = $this->db->affected_rows(); 
```

然后只需创建一个`getter`返回数据

```
function get_inserted_num_rows()
{
   return $this->inserted_num_rows;
} 
```

和

```
function get_updated_num_rows()
{
   return $this->updated_num_rows;
} 
```

# database - 如何收集 2 个一对多的关系来创建一个运行总计？

> ID：15185847
> 
> 赞同：0
> 
> 时间：2013-03-03T12:51:04.777
> 
> 标签：database, ms-access, ms-access-2010

从我上面的图表中，我需要将库存量合计为我需要的 ![关系](../Images/8d38b7e4de57fd0b5ee82be480b22d3a.png)

*   某辆自行车的销售总额
*   为某辆自行车生产的总和

然后将总数存储在“InStock”中

我试图创建查询，但它们似乎都没有按我的意愿工作。请问有人可以帮我吗？这应该相当简单！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:23:33.297

您应该有一个库存表 BikeInfo 是一个 Part Production 和 Sales 仅在他们添加和删除库存方面有影响。

就像报废、库存对账或供应一样，将自行车标记为已售出，这样您就不会再次出售它，或者因为您有足够的“库存”而不再费心制造

问自己这个问题，你将如何记录回报。你可以有 BikesReturned 表。现在您的库存已生产 - 已售出 + 已退货...接下来是 BikesWeCannotFindInStock 表和 BikesWeDoNotKNowWhereThisCameFrom 表:) 或者您可以更改 BikesSold 中的 TotalSold...

我在这种系统上做了很多，你不想走这些路线，相信我。

PS你会遇到类似的问题，试图将bikeinfo中的成本与bikesold中的售价联系起来。一个的多少取决于成本是成本还是价格或价值。三个不同的数字...

要获取架构中的当前位置，不记得 Access 是否允许您进行嵌套连接

创建一个名为 say QProduction 的查询

```
Select BikeID,Sum(Built) as Produced From Production Group By BikeID 
```

另一个叫 qSales

```
Select BikeID, Sum(TotalSold) as Sold From BikesSold Group By BikeID 
```

然后它只是几个外连接说

```
Select b.BikeName,p.Produced, s.Sold (p.Produced - s.Sold) as [In Stock] 
From BikeInfo b
left join qProduction p On p.BikeID = b.ID
Left Join qSales s on s.BikeID = b.ID 
```

未经测试，可能是错字，但这个想法是合理的。

设计的一个大问题是，如果在录制或制作过程中出现问题，您不知道您的库存是什么，而协调它的唯一方法是创建一个虚拟的生产或销售记录。

编辑更新查询

```
Select b.ID, (p.Produced - s.Sold) as [In Stock] 
From BikeInfo b
left join qProduction p On p.BikeID = b.ID
Left Join qSales s on s.BikeID = b.ID 
```

并称之为 qInStock

然后

```
Update BikeInfo b
Set b.InStock = q.[In Stock]
inner join qInStock q On q.ID = b.ID 
```

应该做的工作

该死的复杂，打赌你希望你有一个股票表。

# c# - 一对一/一对多

> ID：15185853
> 
> 赞同：1
> 
> 时间：2013-03-03T12:51:37.917
> 
> 标签：c#, entity-framework, one-to-many, one-to-one

我有一个与 Service 模型一对一关系的 Transaction 模型，然后 Service 模型有许多 ServiceAddons。

```
public class Transaction 
{
   public int TransactionId {get;set;}
   public string Username {get;set;}
   public Service OccasionService {get;set;}
}

public class Service 
{  
   [Key]
   public int TransactionId {get;set;}
   public Transaction Transaction { get; set; }
   public virtual IList<ServiceAddon> ServiceAddons { get; set; }
}

public class ServiceAddon
{
    public int ServiceAddonId { get; set; }
    public int TransactionId { get; set; }
    public int AddonId { get; set; }
    public decimal AddonPrice { get; set; }
    public virtual Addon Addon { get; set; }
} 
```

现在包管理器控制台告诉我 OccasionServiceId 在 ServiceAddon 中不存在，所以我为它更改了 TransactionId，程序已编译但现在它显示 Invalid column OccasionServiceId。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:05:16.953

您需要指定`ForeignKey`s，尝试这样的事情。我已经为不清楚的位添加了评论。

```
public class Transaction 
{
    [Key]
    public int TransactionId {get;set;}
    public string Username {get;set;}

    // Whatever the column is
    public int OccasionServiceId {get;set;}

    [ForeignKey("OccasionServiceId")] // What on Transaction points to Service's Key
    public Service OccasionService {get;set;}
}

public class Service 
{  
    // Ideally this would be called ServiceId instead?
    [Key]
    public int TransactionId {get;set;}

    // If this uses TransactionId then are you sure you don't need a Key that is ServiceId
    public Transaction Transaction { get; set; }

    [ForeignKey("TransactionId")] // What on ServiceAddon points at Service's Key
    public virtual ICollection<ServiceAddon> ServiceAddons { get; set; }
}

public class ServiceAddon
{
    [Key]
    public int ServiceAddonId { get; set; }

    // Don't you need a ServiceId here?

    public int TransactionId { get; set; }
    public int AddonId { get; set; }
    public decimal AddonPrice { get; set; }
    public virtual Addon Addon { get; set; }
} 
```

如果我成功了，我的模型会是这样的：

```
public class Transaction 
{
    [Key]
    public int TransactionId {get;set;}
    public string Username {get;set;}
    public int ServiceId {get;set;}

    [ForeignKey("ServiceId")]
    public Service Service {get;set;}
}

public class Service 
{  
    [Key]
    public int ServiceId {get;set;}
    public int TransactionId {get;set;}

    [ForeignKey("TransactionId")
    public Transaction Transaction { get; set; }

    [ForeignKey("TransactionId")] // What on ServiceAddon points at Service's Key
    public virtual ICollection<ServiceAddon> ServiceAddons { get; set; }
}

public class ServiceAddon
{
    [Key]
    public int ServiceAddonId { get; set; }
    public int ServiceId {get;set;}

    [ForeignKey("ServiceId")]
    public Service Service {get;set;}
} 
```

# concurrency - tbb 并发哈希映射：如何比较和设置

> ID：15185856
> 
> 赞同：2
> 
> 时间：2013-03-03T12:51:51.870
> 
> 标签：concurrency, hashmap, tbb

我需要以 CAS 方式更新 TBB 提供的 concurrent_hash_map 中的内容。也就是说，如果键已经存在，我会查看与键对应的值并在原子操作中更新值（如果值同时由于另一个线程做同样的事情而发生变化，我的操作应该会失败）。

换句话说，我为 insert 方法提供了一个“预期值”，它仅在当前值与预期值匹配时才更新该值。

在 TBB 的 concurrent_hash_map 中是否有实现这一点的方法？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T21:19:38.217

给定类型 Key 和 T，下面的代码实现了目标，假设类型 T 是支持 tbb::atomic 的类型。

```
class AtomicValue {
    mutable tbb::atomic<T> content;
public:
    AtomicValue() {}
    AtomicValue( T value ) {content=value;}
    bool cas( T value, T comparand ) const {
        return content.compare_and_swap(value,comparand)==comparand;
    }
};

typedef tbb::concurrent_hash_map<Key,AtomicValue> table;

bool update( table& x, Key key, T value, T comparand ) {
    table::const_accessor a;
    if( !x.insert(a,table::value_type(key,value) ) ) {
        // value is already there
        return a->second.cas(value,comparand);
    }
    return true;
} 
```

棘手的部分是使用 const_accessor 进行更新。使用常规访问器将序列化更新。但是 const_accessor 允许多个线程同时访问同一个表条目。它被称为“const_accessor”，因为通常的用例涉及读取值。但是这里的代码使用 CAS 来仲裁更新。包装类“AtomicValue”允许对 const 对象执行 CAS。

类似的解决方案应该适用于 tbb::concurrent_unordered_map，如果非阻塞是关键标准，这可能会更好，因为 concurrent_unordered_map 具有非阻塞实现。

更好的是，如果您拥有最新的 TBB**和**支持 constexpr 的 C++11 特性和默认/删除的成员函数的编译器，则以下内容应该可以工作：

```
 typedef tbb::concurrent_unordered_map<Key,tbb::atomic<T> > table;

bool update( table& x, Key key, T value, T comparand ) {
    auto p = x.insert(table::value_type(key,value) );
    if( !p.second ) {
        // value is already there
        return p.first->second.compare_and_swap(value,comparand) == comparand;
    }
    return true;
} 
```

当使用“g++ -std=c++0x”编译时，它对我使用 gcc 4.7 有效。

# c++ - C++ 中的模幂运算

> ID：15185857
> 
> 赞同：0
> 
> 时间：2013-03-03T12:52:06.553
> 
> 标签：c++, modulo, exponentiation

我的模幂运算代码有问题，尽管在使用两种不同的伪代码源时写了三遍，但我无法发现问题。我已经阅读了有关 SE 上 C++ 中的模幂运算的其他问题，但这对我没有帮助。这是我的最后一个代码，用我认为更简单但不太理想的方式编写：

```
#include<iostream>
using namespace std;

// base ^ exponent mod modulus 
unsigned mulmod1(unsigned base, unsigned exponent, unsigned modulus) {
    int result = 1;
    while(exponent > 0){
        if(exponent % 2 == 1)
            result = (result * base) % modulus;
        exponent >>= 1;
        base = (base * base) % modulus;
    }
  return result;
}

int main(){

//9688563^45896 mod 71 = 30
//12^53 mod 7 = 3

cout<<mulmod1(9688563,45896 ,71)<<"\n";   //gives 10 instead of 30
cout<<mulmod1(12,53,7)<<"\n";             //gives correct answer 3

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T12:55:19.387

清理函数的输入`mulmod1`！`unsigned`不能坚持`9688563*9688563`。如果你做对了，你“只”需要一个可以保存`modulus * modulus`（当然还有你的输入数字）的数据类型来正确执行模幂运算。

# jquery - 按元素 ID + 元素类选择两次会产生相同的元素

> ID：15185862
> 
> 赞同：10
> 
> 时间：2013-03-03T12:52:43.017
> 
> 标签：jquery, html, jquery-selectors

为什么jQuery在这里两次返回相同的元素？

多次检查HTML，只有一个`<div>`带有`id="3"`and `class="password_field_real"`。

这是获取所有元素的结果`class="password_field_real"`：

```
> $(".password_field_real")

[
    <div class="password_field_real" id="2" style="display: none;"></div>, 
    <div class="password_field_real" id="3" style="display: none;"></div>,
    <div class="password_field_real" id="7" style="display: none;"></div>,
] 
```

但是，当我尝试获取`class="password_field_real"`and时`id="3"`，我得到了两个 div 的列表，它们是相同的！

```
> $("#3.password_field_real")

[
    <div class="password_field_real" id="3" style="display: none;"></div>,  
    <div class="password_field_real" id="3" style="display: none;"></div>
] 
```

这不是其他两个 div 的情况：

```
> $("#7.password_field_real")

[
    <div class="password_field_real" id="7" style="display: none;"></div>
] 
```

为什么会发生这种情况？

*** 更新 ***

在 jsFiddle 中[复制了这个](http://jsfiddle.net/SdfCC/ "转载")

***更新#2 ***

如果使用非数字 ID，一切[正常](http://jsfiddle.net/Fmfjn/)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T14:39:08.417

首先，an`id`在页面上必须是唯一的。这就是它背后的想法。

您的问题是您使用了无效的 ID 选择器（根据[HTML4](http://www.w3.org/TR/html4/types.html)）：

> 1.  ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

在其他文档类型中存在不同的限制，但您始终需要至少一个字母。由于您只使用数字，因此它是无效的。当您使用非数字 ID 一切正常时，这可能就是解释。jQuery 的行为仍然有点奇怪。

在您的 ID 前面至少加上一个字母`[A-Za-z]`，或者更好的是，使其具有描述性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T15:55:23.797

永远不要多次使用同一个 id，id 必须是唯一的

```
alert( $("#3").length ); // will just return 1 not 8 
```

这个非常愚蠢的代码只是选择你的好代码，但永远不要使用它，会导致世界末日

```
alert( $("#3").find("#3").filter(".password_field_real").attr("class") ); 
```

如果您需要每个子“div”和“a”的当前 ID，请尝试使用数据 - 为什么不使用这样的代码

```
$(".password_entry").each(function(){
    var $t = $(this);
    var currentId = $t.attr("id");
    $t.find("div,a").data("id",currentId);
}); 
```

现在您可以使用 .data("id") 从所有子“div”和“a”中提取当前 id

例如：

```
$(".password_field_mask").click(function(){ alert( $(this).data("id") ); }); 
```

# .net - 拍摄 ReplaySubject 的快照 缓冲

> ID：15185863
> 
> 赞同：2
> 
> 时间：2013-03-03T12:53:09.800
> 
> 标签：.net, system.reactive

我有一个大的 ReplaySubject，它允许订阅者正常接收重播缓冲区和未来的通知。此外，我希望能够获取当前缓冲区的“快照”并将其作为列表同步返回，而无需订阅。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:03:52.573

您可以不只是订阅，接收项目，然后取消订阅吗？

```
public static List<T> Snapshot<T>(ReplaySubject<T> subject)
{
    List<T> snapshot = new List<T>();
    using (subject.Subscribe(item => snapshot.Add(item))
    {
        // Deliberately empty; subscribing will add everything to the list.
    }
    return snapshot;
} 
```

当然，这是假设订阅 a`ReplaySubject<T>`会同步调用元素处理程序。你想检查一下，但这就是我所期望的。

您还应该考虑是否要以某种方式处理错误/完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:33:07.280

**只是因为@PaulBetts**说只有一种方法可以做到:)

注意：我不推荐这种方式；使用 Skeet 的方法，你以后会感谢自己的。

所以 all 的神奇之处在于它将通过internal`ReplaySubject<T>`接收到的任何值排队。因此，我们可以编写一个包装器，在重播主题的私有细节中摆弄以获取该信息：`OnNext``Queue<TimeInterval<T>>`

```
public class FixedReplaySubject<T> : ISubject<T>
{
    private ReplaySubject<T> _inner;
    private Func<Queue<TimeInterval<T>>> _snapshotGetter;

    public FixedReplaySubject(ReplaySubject<T> source)
    {
        _inner = source;
        var expr = Expression.Lambda(
            typeof(Func<Queue<TimeInterval<T>>>), 
            Expression.Field(
                Expression.Constant(source), 
                source.GetType()
                    .GetField("_queue", BindingFlags.NonPublic|BindingFlags.Instance)));
        _snapshotGetter = (Func<Queue<TimeInterval<T>>>)expr.Compile();
    }

    public IEnumerable<TimeInterval<T>> Snapshot()
    {
        return _snapshotGetter();
    }

    public IDisposable Subscribe(IObserver<T> observer)
    {
        return _inner.Subscribe(observer);
    }
    public void OnNext(T value)
    {
        _inner.OnNext(value);
    }
    public void OnCompleted()
    {
        _inner.OnCompleted();
    }
    public void OnError(Exception error)
    {
        _inner.OnError(error);
    }
    public void Dispose()
    {
        _inner.Dispose();
    }
} 
```

试验台：

```
void Main()
{
    var src = new ReplaySubject<int>();
    src.OnNext(1);
    src.OnNext(2);
    src.OnNext(3);
    src.OnNext(4);
    src.OnNext(5);
    src.OnNext(6);
    var heh = new FixedReplaySubject<int>(src);
    heh.Snapshot().Dump();
} 
```

结果：（`TimeInterval<T>`只是价值+它进来的时间）

```
1 00:00:00.0010265 
2 00:00:00.0010278 
3 00:00:00.0010278 
4 00:00:00.0010282 
5 00:00:00.0010282 
6 00:00:00.0010286 
```

# python - 使用 QTableWidget 获取用户输入

> ID：15185868
> 
> 赞同：0
> 
> 时间：2013-03-03T12:53:48.963
> 
> 标签：python, mysql, sqlalchemy, pyqt4

谁能提供一个快速教程，告诉我如何设置一个 QTablewidget 用户可以输入大量数据（记录），然后我如何将这些数据转储到数据库中？

我是python的初学者，这样的例子会让我很生气。我正在考虑使用 PyQt、SqlAlchemy 和 MySql。我宁愿不使用 Camelot，因为作为初学者，我喜欢弄脏我的手。我之所以选择 MySql 而不是 SQLite，是因为在我的 sql 中，我有一种独立的方式来查看我的应用程序插入的记录，这与我所理解的 SQLite 不同，但是我愿意接受建议。

我已经在网上搜索了几天（每次只有几个小时），但找不到任何好的老师。

我希望你能帮忙。

干杯，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:59:48.977

您真的不需要针对此特定任务的教程。只要确保了解如何做你想做的每一个单独的部分，你就可以弄清楚如何混合一切。

如果你还没有，你应该阅读[sqlalchemy 教程](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html)。我将教你如何使用数据库的基础知识。如果您想要一种查看数据库内容的方法，也有一些用于 sqlite 的方法，例如[sqliteman](http://sqliteman.com/)。如果您只是想玩弄数据库，我建议您使用不需要您管理服务器守护程序的 sqlite。

您还应该学习操作[QTableWidget](http://pyqt.sourceforge.net/Docs/PyQt4/qtablewidget.html)。如果文档不够，您需要示例，请记住 pyqt 代码是直接从 C++ 代码翻译而来的，因此任何 C++ 示例都适用于您（只要您调整语法）。事实上，PyQt 文档中的示例没有翻译。您可以查看此问题以获取更多详细信息：[Translate C++/Qt4 examples to PyQt4](https://stackoverflow.com/questions/11657861/translate-c-qt4-examples-to-pyqt4)。

一旦你了解了两者，你就会很容易地了解如何在同一个程序中使用它们。

# java - JSF 项目可以在不使用 Servlet 的情况下运行吗？

> ID：15185870
> 
> 赞同：3
> 
> 时间：2013-03-03T12:54:21.203
> 
> 标签：java, jsf, jakarta-ee, servlets

我是 JSF 的新手，我有一个问题：

据我所知，Servlet 是用于获取 HTML 请求和提供 HTML 响应的类。如：

> HttpServletRequest 请求，HttpServletResponse 响应

但是在一个典型的 JSF 项目中，我根本没有看到使用这些类，而我看到的只是托管 bean 和 Facelet 页面。

但是在 web.xml 我看到：

```
<servlet>
   <servlet-name>Faces Servlet</servlet-name>
   <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
   <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
   <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

据我所知，构建 JSF 项目还需要 JSTL.jar。

这些课程也是如此

> HttpServletRequest 请求，HttpServletResponse 响应

还在 JSF 项目中使用？如果有怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:06:03.510

`javax.servlet.http.HttpServlet`用来。它由`FacesServlet`（意味着它是一个`javax.servlet.http.HttpServlet`）扩展。JSF`FacesServlet`加载视图、构建组件树、处理事件并呈现响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T16:48:36.337

正如其他人所指出的，JSF 本身的实现与 Servlet 技术有着重要的联系。Faces Servlet 本身就是一个 Servlet。

请注意，您显示的 web.xml 中的映射对于在 Java EE 6（特别是 Servlet 3）容器上运行的 JSF 2.1 实现是可选的。在这种情况下，扩展`.jsf`和`.faces`路径`faces\*`会自动映射到 Faces Servlet，从而映射到您的页面。

JSF 本身确实尝试从 Servlet 技术中抽象出来。例如，[ExternalContext](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html)类型从“其包含的应用程序环境的性质”中抽象出来。实际上，这意味着它与 Servlet 和 Portlet 兼容。但是，当前版本至少需要这两种环境中的一种。

从理论上讲，有人可以将 JSF 实现移植到非 Servlet 和非 Portlet 环境中，但据我所知，目前还没有人这样做过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T12:56:04.057

之所以使用它们，是因为 JSF 本身是由一个名为`javax.faces.webapp.FacesServlet`. 也就是说，当有人调用您的视图时，他们最终会调用 中定义的`javax.faces.webapp.FacesServlet`servlet，然后此 servlet 将执行所有呈现您的 XML 页面的神奇 JSF 内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T13:20:03.983

根据 JSF 实现，可能不使用 Servlet 就可以运行。虽然 JSF 标准要求实现者提供基于 Servlet 的实现以实现可移植性，但它允许实现者支持调用 JSF 生命周期的其他方式。[（在标准](http://download.oracle.com/otndocs/jcp/jsf-2.0-fr-full-oth-JSpec/)第 11.1.1 节中说明）

但是我不知道实际上有任何实现确实提供了这种可能性。

# c++ - wxWidgets 关于追加 menuItems

> ID：15185871
> 
> 赞同：0
> 
> 时间：2013-03-03T12:54:21.767
> 
> 标签：c++, wxwidgets, codeblocks

我是 wxWidgets 的新手。我的 wxWidgets 版本：wxWidgets-2.8.12，代码块：12.11，在 minGW 中。

我的代码是：

```
item=new wxMenuItem(settings,id,wxT("showTip"),wxT(""),wxITEM_CHECK );
item->Check(true);
settings->Append(item);/* after Append to 'settings', item->IsChecked()==false. */ 
```

首先，我创建一个 menuItem 并将检查状态设置为“true”。然后添加到菜单中。奇怪的事情发生了，检查状态变为“假”。请告诉我为什么？

顺便说一句，这是我对这个问题的测试代码。

```
wxMenu *settings=new wxMenu;
wxMenuItem *item=new wxMenuItem(settings,menuID_MENU,wxT("test menu"),wxT("help message"),wxITEM_CHECK);
item->Check(true);
bool check_status=item->IsChecked();
settings->Append(item);
bool check_status_after=item->IsChecked();

if(check_status!=check_status_after)
    wxLogMessage(wxT("not equal")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:06:29.290

我无法真正说出为什么以这种方式实现它，但[文档](http://docs.wxwidgets.org/trunk/classwx_menu_item.html#afcfbb12e302c0528e55efcb1c6f5f7fc)表明`Check`“仅当该项目已附加到菜单时才有效”。

在内部（在 Windows 上），`IsChecked`将检查它是否附加到菜单；如果是这样，它`Checked`会从中获取状态，否则它将返回它自己存储的标志的值。这就是为什么当您`Append`使用该项目时结果会发生变化。

交换`Check`和`Append`线应该是一个简单的解决方法。

# regex - 正则表达式脸书网址

> ID：15185873
> 
> 赞同：-1
> 
> 时间：2013-03-03T12:54:29.517
> 
> 标签：regex

我尝试从 facebook mobile 抓取个人资料 facebook。我使用这个正则表达式：

> href=[\'"]?([^\'" >]+)

结果 ：

> href="/bookmarks/get.php?partial=1&refid=8 href="/krakiun?refid=8 href="/home.php?refid=8 href="/messages/?ref=bookmark&refid=8 href=" /places/nearbyfriends.php?ref=bookmark&refid=8 href="/events/?ref=bookmark&refid=8 href="/friends/?ref=bookmark&refid=8 href="/sblocconet?refid=60 href="/protrucchicom ?refid=60 href="/profile.php?id=133284666701857&refid=60 href="/profile.php?id=324052547642490&refid=60 href="/profile.php?id=426388387443355&refid=60 href="/groups/149801558421820 ?ref=bookmark&refid=60 href="/groups/297121487026176?ref=bookmark&refid=60 href="/bookmarks/get.php?bookmarktype=group&refid=60 href="# href="/pages?ref=bookmark&refid=60 href ="/appcenter/?ref=书签&refid=60 href="/buddylist.php?ref=bookmark&refid=60 href="/findfriends/browser/?ref=bookmark&fb_ref=tn&refid=60 href="/home.php?sk=photodash&ref=bookmark&refid=60 href=" /apps/cupidcom?fb_source=bookmark&ref=bookmark&app_id=277669328975&refid=60 href="/bookmarks/get.php?bookmarktype=app&refid=60 href="/home.php?sk=fl_1852388924315&ref=bookmark&refid=60 href="/bookmarks/ get.php?bookmarktype=friend_list&refid=60 href="/home.php?sk=fl_1960883876621&ref=bookmark&refid=60 href="/help/?refid=8 href="/settings/?refid=8 href="/policies/ ?refid=8 href="/bugnub/?refid=8 href="/logout.php?h=AffXaycUfvR1ir-V&t=1362313180&refid=8 href="/language.php?refid=8 href="https://www .facebook.com/?m2w&refid=8 href="#partial-side-menu href="/friends/requests.php?refid=8 href="/daniel.mihalcea.58?fref=m_jewel&refid=8 href="/daniel.mihalcea.58? fref=m_jewel&refid=8 href="/sandra.bira.3?fref=m_jewel&refid=8 href="/sandra.bira.3?fref=m_jewel&refid=8 href="/ayda.ringelberg?fref=m_jewel&refid=8 href= "/ayda.ringelberg?fref=m_jewel&refid=8 href="/ayda.and.jacco.PR?refid=8 href="/friends/requests.php?v=all-requests&refid=8 href="/messages/? refid=8 href="/messages/compose/?refid=8 href="/messages/read/?tid=id.473135699369224 href="/messages/read/?tid=id.276586722374866 href="/messages/read /?tid=id.411179178903782 href="/messages/read/?tid=lVO86WNhFDuKhNa9YeWyjg href="/messages/read/?tid=X6Q0PlBMpsp6324Vj5W1SA href="/messages/read/?tid=id.123727074422514 href="/messages/?refid=8 href="/notifications.php?refid=8 href="/krakiun? v=approval&highlight=500002920037309&ref=m_notif¬if_t=photo_tag&actorid=100000828157260#500002920037309 href="/photo.php?fbid=491923467540375&id=100001681789779&set=a.347981525267904.89812.100001681789779&ref=m_notif¬if_t=backdated_content&actorid=100001681789779 href="/krakiun?v=approval&highlight=491923467540375&ref= m_notif¬if_t=photo_tag&actorid=100001681789779#491923467540375 href="/sblocconet?ref=m_notif¬if_t=page_new_likes&actorid=100000960089496 href="/sblocconet?sk=messages_inbox&ref=m_notif¬if_t=bpage_new_bactorid=125839484261145 href="/notifications.php?more&refid=8 href="/search/?query=krakiun&search=people&o=2048&ssid=420259245&refid=46 href="/search/?query=krakiun&search=page&o=65&ssid=420259245&refid=46 href="/search/?query=krakiun&search=event&o=4&ssid=420259245&refid=46 href="/search/?query=krakiun&search=group&o=69&ssid=420259245&refid=46 href="/krakiun?slog=420259245&seq=2109322985&rk=0&st= self&fbtype=2048&refid=46 href="/bogdan.krakiun?slog=420259245&seq=2109322985&rk=1&st=user&fbtype=2048&refid=46 href="/a/mobile/friends/add_friend.php?id=100005027372212&hf=search&gfid&=AQAid=46 href="/a/mobile/friends/add_friend.php?id=100005027372212&hf=search&gfid&=AQALGuxrty ="/copilau.krakiun?slog=420259245&seq=2109322985&rk=2&st=user&fbtype=2048&refid=46 href="/a/mobile/friends/add_friend.php?id=100002482301062&hf=search&gfid=AQB1qH2svv9ZAuBY&refid=46 href="/viktor.krakiun?slog=420259245&seq=21093&22985&rk= 2048&refid=46 href="/a/mobile/friends/add_friend.php?id=100003653628437&hf=search&gfid=AQBxpBokNInneuaI&refid=46 href="/iokeni.krakiun?slog=420259245&seq=2109322985&rk=4&st=user&fbtype=2048 href=" /search/?query=krakiun&search=object&ssid=420259245&s=5&refid=46 href="/search/?query=krakiun&search=friends&ssid=420259245&refid=46 href="/search/?query=krakiun&search=everyone&ssid=420259245&refid=46 href=" #/a/mobile/friends/add_friend.php?id=100002482301062&hf=search&gfid=AQB1qH2svv9ZAuBY&refid=46 href="/viktor.krakiun?slog=420259245&seq=2109322985&rk=3&st=user&fbtype=2048&refid=46 href="mobile/friend/a /add_friend.php?id=100003653628437&hf=search&gfid=AQBxpBokNInneuaI&refid=46 href="/iokeni.krakiun?slog=420259245&seq=2109322985&rk=4&st=user&fbtype=2048&refid=46 href="/objectsid=46 href="/objectsid=20259&search=20259&search 5&refid=46 href="/search/?query=krakiun&search=friends&ssid=420259245&refid=46 href="/search/?query=krakiun&search=everyone&ssid=420259245&refid=46 href="#/a/mobile/friends/add_friend.php?id=100002482301062&hf=search&gfid=AQB1qH2svv9ZAuBY&refid=46 href="/viktor.krakiun?slog=420259245&seq=2109322985&rk=3&st=user&fbtype=2048&refid=46 href="mobile/friend/a /add_friend.php?id=100003653628437&hf=search&gfid=AQBxpBokNInneuaI&refid=46 href="/iokeni.krakiun?slog=420259245&seq=2109322985&rk=4&st=user&fbtype=2048&refid=46 href="/objectsid=46 href="/objectsid=20259&search=20259&search 5&refid=46 href="/search/?query=krakiun&search=friends&ssid=420259245&refid=46 href="/search/?query=krakiun&search=everyone&ssid=420259245&refid=46 href="#krakiun?slog=420259245&seq=2109322985&rk=3&st=user&fbtype=2048&refid=46 href="/a/mobile/friends/add_friend.php?id=100003653628437&hf=search&gfid=AQBxpBokNInneuaI&refid=46eqlog="/iokeni.9245s? 2109322985&rk=4&st=user&fbtype=2048&refid=46 href="/search/?query=krakiun&search=object&ssid=420259245&s=5&refid=46 href="/search/?query=krakiun&search=friends&ssid=420259245&refid=46 href="/search/?查询=krakiun&search=所有人&ssid=420259245&refid=46 href="#krakiun?slog=420259245&seq=2109322985&rk=3&st=user&fbtype=2048&refid=46 href="/a/mobile/friends/add_friend.php?id=100003653628437&hf=search&gfid=AQBxpBokNInneuaI&refid=46eqlog="/iokeni.9245s? 2109322985&rk=4&st=user&fbtype=2048&refid=46 href="/search/?query=krakiun&search=object&ssid=420259245&s=5&refid=46 href="/search/?query=krakiun&search=friends&ssid=420259245&refid=46 href="/search/?查询=krakiun&search=所有人&ssid=420259245&refid=46 href="#seq=2109322985&rk=4&st=user&fbtype=2048&refid=46 href="/search/?query=krakiun&search=object&ssid=420259245&s=5&refid=46 href="/search/?query=krakiun&search=friends&ssid=420259245&refid=46 href="/search /?query=krakiun&search=everyone&ssid=420259245&refid=46 href="#seq=2109322985&rk=4&st=user&fbtype=2048&refid=46 href="/search/?query=krakiun&search=object&ssid=420259245&s=5&refid=46 href="/search/?query=krakiun&search=friends&ssid=420259245&refid=46 href="/search /?query=krakiun&search=everyone&ssid=420259245&refid=46 href="#

工作蝙蝠从页面中提取所有网址，蝙蝠我只需要个人资料链接：

> href="/bogdan.krakiun?slog=420259245&seq=2109322985&rk=1&st=user&fbtype=2048&refid=46 href="/copilau.krakiun?slog=420259245&seq=2109322985&rk=2&st=user&fbtype=2048&refid=46 href="/krakitor? slog=420259245&seq=2109322985&rk=3&st=user&fbtype=2048&refid=46 href="/iokeni.krakiun?slog=420259245&seq=2109322985&rk=4&st=user&fbtype=2048&refid=46

我使用正则表达式 whit ubotstudio，请帮我修改这个正则表达式，因为我无法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:19:04.403

只匹配包含`?slog=`

```
href=[\'"]?([^\'" >?]+\?slog=[^\'" >]+) 
```

# playframework-2.0 - Play Framework 2.0 中类似 JSF 的渲染属性

> ID：15185876
> 
> 赞同：0
> 
> 时间：2013-03-03T12:54:35.837
> 
> 标签：playframework-2.0

在播放框架中是否存在类似于 JSF 中呈现的属性的东西？

我有一个表格：

```
 @checkbox(parametersForm("checkDuplicates"), '_label -> "Check duplicates")
    @checkbox(parametersForm("checkDuplicatesCaseSensitive"), '_label -> "Case-sensitive check duplicates") 
```

我有 bean 用两个布尔变量“checkDuplicates”和“checkDuplicatesCaseSensitive”发布这个参数：

```
@(parametersForm: Form[ImportController.ImportParameters]) 
```

仅当检查重复项时，用户才可以看到区分大小写的复选框时，我想获得结果。

我知道我可以使用简单的 java 脚本来做到这一点，但我很感兴趣的是这种嵌入式机制存在（显示/隐藏字段取决于其他字段）。我怀疑在输入中设置隐藏值是可能的

```
 'hidden -> @parametersForm.get.checkDuplicates==true 
```

但我是scala的新手，因此我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:16:14.847

你可以用`@if - else`条件包装你的领域

```
@if(parametersForm.get("checkDuplicates").value==true) {
    @checkbox(parametersForm("someAlt"), '_label -> "Some alt")
} 
```

# python - 所有精灵都移动到相同的坐标？

> ID：15185877
> 
> 赞同：0
> 
> 时间：2013-03-03T12:54:52.113
> 
> 标签：python, pygame

下面的代码基本上是我了解 Sprites 和 Groups 的测试。它应该创建 10 个`Ball`类的实例，然后随机定位和移动每个实例，并在屏幕上反弹它们。问题是，虽然它们都是独立定位的，但由于某种原因，它们似乎都在循环过程中继承了相同的坐标，因此似乎只有 1 个球在弹跳。

```
import pygame, sys, random

pygame.init()

size = width, height = 640, 400
screen = pygame.display.set_mode(size)

class Ball(pygame.sprite.Sprite):
    image = pygame.image.load('assets/ball.gif').convert()
    rect = image.get_rect()
    max_speed = 2
    speed = 0
    direction = [1, 1]

    def randomize(self):
        random.seed()
        self.rect.x = random.random() * width
        self.rect.y = random.random() * height
        self.speed = random.random() * self.max_speed
        print ('%s %s %s') % (self.rect.x, self.rect.y, self.speed)

    def update(self):
        if self.rect.left < 0:
            self.direction[0] =  1
        if self.rect.right > width:
            self.direction[0] = -1
        if self.rect.top < 0:
            self.direction[1] =  1
        if self.rect.bottom > height:
            self.direction[1] = -1

        self.rect.x += self.speed * self.direction[0]
        self.rect.y += self.speed * self.direction[1]

layers = pygame.sprite.LayeredUpdates()
black = 0, 0, 0
clock = pygame.time.Clock()

for i in range(0,10):
    ball = Ball()
    ball.randomize()
    layers.add(ball)

while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT: sys.exit()

    screen.fill(black)
    layers.update()
    layers.draw(screen)
    pygame.display.flip()
    clock.tick(30) 
```

以下是来自的输出`Ball.randomize()`：

```
454 317 0.268577946144
560 175 0.777246064841
446 161 1.71602882781
337 221 0.298744471713
9 122 1.19615176471
304 351 1.45267115709
255 397 0.478593408657
135 213 1.04660721161
96 26 0.758952705602
389 106 0.954778970584 
```

我假设我不了解 pygame.image 是如何工作的，并且 Ball.image 实际上是所有实例共享的同一个对象，但是我真的不知道如何证明它，也不知道如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T13:12:10.097

你是对的， Ball.image 在所有实例中共享。所有其他变量也是如此，包括 rect 等，因为您是在类范围内创建它们的——这与 pygame.

向您的类添加一个`__init__`魔术方法，类似于以下内容：

```
def __init__(self):
    self.rect = Ball.image.get_rect()
    self.speed = 0
    self.direction = [1, 1] 
```

并在类范围内删除相应的分配。

# c++ - 反转数组中的元素的 C++ 程序

> ID：15185880
> 
> 赞同：0
> 
> 时间：2013-03-03T12:55:11.787
> 
> 标签：c++, arrays, algorithm

我编写了这段代码来尝试反转给定数组中的元素：

```
#include <iostream>
using namespace std;
int main(int argc, char **argv)
{
    int numbers[6] = {1, 5, 9, 10, 12, 18};
    int b = 0;
    int a = 5;
    for (int i = 0; i < 3; ++i)
        {
            b = numbers[i];
            numbers[i] = numbers[a-i];
            numbers[a-i] = b;
        }
    for(int c = 0; c < 6; ++c)
        cout << *(numbers) << endl;

    return 0;
    } 
```

它应该打印出 18, 12, 10, 9, 5, 1 但是当我运行程序时它只打印出 18, 18, 18, 18, 18, 18 我哪里出错了？我猜这是第一个 for 循环中的问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T12:57:31.880

改变`cout << *(numbers) << endl;`

到 `cout << numbers[c] << endl;`

* * *

加上使用头文件中的标准`reverse`算法：`<algorithm>`

```
 std::reverse(numbers, numbers+6); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T12:57:10.933

这是第二个 for 循环，您忘记添加 c。

```
for(int c = 0; c < 6; ++c)
    cout << *(numbers + c) << endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:05:30.997

你可以试试这个：

```
for(int i = 0; i < ARRAY_SIZE; ++i) {
    //a^=b^=a^=b; //SWAP a with b
    numbers[i] ^= numbers[ARRAY_SIZE-i] ^= numbers[i] ^= numbers[ARRAY_SIZE-i];
} 
```

它将反转数组中的所有元素。:)

# php - JQuery 与 GetElementById

> ID：15185881
> 
> 赞同：0
> 
> 时间：2013-03-03T12:55:14.627
> 
> 标签：php, javascript, jquery

从昨天开始，我一直在尝试做某事，但我真的被困住了。这是目前“有效”的方法：

```
<h1 onclick="functionToggle(<?php echo "'".$base."'" ?>)"> <?php  echo $base ?></h1> 
```

哪个回声：

```
<h1 onclick="functionToggle('helpers')"> helpers</h1> 
```

我有一个像这样的 div：

```
<div id="helpers" class="hidden">
    <div class="fichier">audio_extensions March 02 2013 23:35:36.</div>
    <div class="fichier">ebook_extensions March 02 2013 19:42:55.</div>
    <div class="fichier">movie_extensions March 02 2013 20:28:01.</div>
    <div class="fichier">zip_extensions March 02 2013 19:50:21</div>
</div> 
```

问题是：有了这个函数，在 JS 中：

```
<script>
    function functionToggle(elem){
        etat=document.getElementById(elem).style.display;
        if(etat=="none"){
            document.getElementById(elem).style.display="block";
        }
        else{
            document.getElementById(elem).style.display="none";
        }
    }

 </script> 
```

这行得通。我只是想知道如何用 JQuery 做到这一点？我尝试过这样的事情：

```
<script>
    function functionToggle(elem){
        $("#elem").toggle();
    }
 </script> 
```

和许多其他组合，但它不起作用。我没有任何错误，它根本不起作用。

如果你有解决方案:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:57:11.113

```
$("#elem").toggle(); // which find the element with id "elem" 
```

应该

```
$("#"+elem).toggle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:57:33.247

您将字符串传递`#elem`给 jQuery。你需要通过`"#" + elem`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T12:59:13.190

您需要传递元素的实际 id。

```
<script>
    function functionToggle(elem) {
       $('#' + elem).toggle();
    }
</script> 
```

# google-maps-api-3 - Google Maps V3 地图始终居中且不允许缩放的问题

> ID：15185892
> 
> 赞同：1
> 
> 时间：2013-03-03T12:56:09.727
> 
> 标签：google-maps-api-3

我的 Google Maps v3 代码有问题。它一直以一个点为中心，根本不会让我缩放或真正玩地图。即使您单击地图上的某个绘图点，它也会快速调整到地图的中心。所以基本上你可以缩放或使用地图上的绘图点。我在这里先向您的帮助表示感谢。

网站： [有问题的网站](http://tinyurl.com/bg57ozm)

代码：

```
$(document).ready(function(e) {
   initialize(); 
});

var map = null;
var markersArray = [];
var markers = [];
var openedInfoWindow ="";
var geocoder = new google.maps.Geocoder();

 function initialize() {

    var mapOptions = {
      center: new google.maps.LatLng(-34.397, 150.644),
      zoom: 8,
      zoomControl: true,
      zoomControlOptions: {
        style: google.maps.ZoomControlStyle.SMALL
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("mapInfoManual"),
        mapOptions);

    addMarker();      
  }

 function addMarker() {

    var bounds = new google.maps.LatLngBounds();
    for(i=0; i<markersArray.length; i++)
    {
        CodeAddress(markersArray[i]['address']);
    }
    setInterval(function()
    {

      for(i=0; i<markers.length; i++)
      {
          var point = new google.maps.LatLng(markers[i]['lat'], markers[i]      ['lng']);

          var marker = new google.maps.Marker({
              position: point,
              map: map
          });
          bounds.extend(point);

          openInfoWindow(marker,markersArray[i]['address'])         
      }
      map.fitBounds(bounds);

      },1000);

}

// Address To Marker
function CodeAddress(address)
{

geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
    lat = results[0].geometry.location.lat();
    lng = results[0].geometry.location.lng();
    markers.push({
                    'lat':lat,
                    'lng':lng,
                    'address':address
                });

} 

});   
}

//Info Window
function openInfoWindow(marker,content)
{

var infowindow = new google.maps.InfoWindow({
    content: '<div><p style=" color: #000000; font-size: 11px;">'+content+'</p>          </div>'
});

google.maps.event.addListener(marker, 'click', function() {

    if(openedInfoWindow !="")
    {
        openedInfoWindow.close()
    }

    infowindow.open(map,marker);
    openedInfoWindow = infowindow;
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:01:14.607

这是问题所在：

```
setInterval(function()
{
  ...
  map.fitBounds(bounds);

},1000); 
```

您每秒都在添加新标记，然后告诉地图适合它们的界限。这将重置缩放级别和视口。也许您打算`setTimeout`改用？

# windows-phone-7 - Windows Phone 中的列表选择器性能问题

> ID：15185894
> 
> 赞同：2
> 
> 时间：2013-03-03T12:56:31.480
> 
> 标签：windows-phone-7, listpicker

我在用 c#.net 开发的 windows phone 应用程序中使用了以下列表选择器。但是当我点击列表选择器时，加载项目需要时间，并且在 fulltemplatemode 中选择项目后，返回页面需要时间.

```
<tool:ListPicker x:Name="lstPckrCntrlFilterPlaces" SelectionMode="Single" ItemTemplate="{StaticResource ListPickerItemTemplate}" FullModeItemTemplate="{StaticResource ListPickerFullModeItemTemplate}"  SelectionChanged="lstBoxCntrlFilterPlaces_SelectionChanged_1"  Header="Filter"  FullModeHeader="Filter" CacheMode="BitmapCache"/> 
```

有什么建议可以改进解决这个性能问题吗？

# amazon-s3 - s3backer 上的 zerofree，节省云端空间

> ID：15185898
> 
> 赞同：0
> 
> 时间：2013-03-03T12:56:55.457
> 
> 标签：amazon-s3, cloud

我已经安装了一个 s3backer 分区，以通过 amazon s3 服务将数据保存在云上。作为标准的文件系统行为，删除的文件只是与 fs 断开链接，而底层块保持不变。这会导致亚马逊上的块不会被删除，因此如果被擦除，使用的空间也会被计费。为了防止这种情况，我可以使用 zerofree 实用程序强制在文件系统中未使用的块上写入零。这会导致 s3backer 删除云中未使用的块。

问题是 zerofree 实用程序需要安装一个只读分区，以防止我在使用分区时节省空间。

您知道在 rw 挂载分区上是否还有其他选项可以执行此操作？像文件系统安装选项或其他解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:47:06.640

以前没有好的答案，但现在可能有。但是，链条中有几个环节必须满足……

首先：您需要一个支持`TRIM`块设备命令的 Linux 内核（在 2.6.28 中添加）和一个支持它的文件系统（Linux 3.7 或更高版本中的 XFS、ext4、btrfs）。该命令最初旨在通知 SSD 设备它们可以回收的块，该命令告诉块设备使用它的文件系统不再需要一个块。一些（但不是全部）文件系统，当一个文件被删除时，会通过`TRIM`.

链中的下一个链接是[这个内核补丁](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=dfaa2ef68e80c378e610e3c8c536f1c239e8d3ef)，在环回挂载的情况下，它使用环回文件上的选项将`TRIM`块设备命令转换为一个。显然，这在 3.2 版中进入了 Linux。`fallocate()``FALLOC_FL_PUNCH_HOLE`

链中的下一个环节是支持将`fallocate()`系统调用传递给 FUSE 中的用户代码，这是在 FUSE 版本 2.9.2 中添加的。

链中的最后一个环节是对`fallocate()`s3backer 中的 FUSE 的支持。我已经开始看这个了，但它还没有完成。

因此，总结所有要求（按分层顺序）：

*   支持“上层”文件系统`TRIM`（例如，ext4 或 Linux >= 3.7 中的 btrfs）
*   Linux kernel >= 3.2 `TRIM`on loopback mounts
*   FUSE 版本 >= 2.9.2 支持`fallocate()`
*   glibc 版本 >= 2.18 包含定义`FALLOC_FL_PUNCH_HOLE`常量的标头
*   更新版本的 s3backer 支持`fallocate()`

实施和测试后，我将向[s3backer 邮件列表发送一些内容。](http://groups.google.com/group/s3backer-devel)

# javascript - JSON：解析数组的名称（不是值）

> ID：15185906
> 
> 赞同：0
> 
> 时间：2013-03-03T12:57:40.073
> 
> 标签：javascript, arrays, json, parsing

我有一个从 api 解析的 json 数组：

![在此处输入图像描述](../Images/ea95c97c20e13bcb35d9639680f18b18.png)

我想解析**pageid**。

我可以这样做`console.log(parsed_json["query"]["pages"]["42743"]["pageid"])`，但每次**页面下的“42743”**发生变化。

我如何解析页面下的名称以便我可以使用：

```
console.log(parsed_json["query"]["pages"][" >> ID << "]["pageid"]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:01:02.590

假设`pages`对象永远只有一个可枚举的键，你可以这样做；

```
var pages = parsed_json.query.pages;
var page;

for (var x in pages) {
    if (pages.hasOwnProperty(x)) {
        page = x;
    }
}

// use pages[page].pageid; 
```

...这会枚举属性，并记录最后枚举的属性。`break`在第一个或任何你需要的地方。为了笑，这在 ES5 中可能更干净：

```
var pages = parsed_json.query.pages;
var page = Object.keys(pages)[0];

// use pages[page].pageid; 
```

# android - PreviewCallback 中的 TimerTask 崩溃

> ID：15185907
> 
> 赞同：-1
> 
> 时间：2013-03-03T12:57:50.573
> 
> 标签：android, callback, qr-code, timertask

我正在使用一个`TimerTask()`应用`previewCallback`程序。但是，它停止工作。我是 Android 开发的新手，我不知道问题出在哪里或在哪里。我试图在 5 秒后响应相机预览。我在不使用计时器的情况下在函数中尝试了相同的代码行，它`if( isQrCodeScanned )`可以`phoneCamera.autoFocus(autoFocusCallback);`工作。 `onClick()`当我点击按钮时，相机预览被重新激活。但是，对于`TimerTask()`，它崩溃了。

```
private Timer timer;
.
.
.
timer.schedule( new TimerTask()
           {

            @Override
            public void run()
            {

               if( isQrCodeScanned )
               { 
                  isQrCodeScanned = false;
                  isPreviewing = true;                      
                  qrCodeText.setText( "Waiting for a QR Code..." );

                  phoneCamera.setPreviewCallback(previewCallback);
                  phoneCamera.startPreview();
                  phoneCamera.autoFocus(autoFocusCallback);
               }

            }}, ACTIVATE_LIMIT); 
```

谢谢您的帮助！

日志猫：

```
03-03 13:04:42.927: W/Vold(29): No UMS switch available
03-03 13:04:44.357: E/Zygote(33): setreuid() failed. errno: 2
03-03 13:04:45.137: W/MediaProfiles(33): could not find media config xml file
03-03 13:04:50.137: E/Zygote(33): setreuid() failed. errno: 17
03-03 13:04:51.037: E/BatteryService(59): usbOnlinePath not found
03-03 13:04:51.037: E/BatteryService(59): batteryVoltagePath not found
03-03 13:04:51.037: E/BatteryService(59): batteryTemperaturePath not found
03-03 13:04:51.056: E/SurfaceFlinger(59): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
03-03 13:04:51.557: W/zipro(69): Unable to open zip '/data/local/bootanimation.zip': No such file or directory
03-03 13:04:51.557: W/zipro(69): Unable to open zip '/system/media/bootanimation.zip': No such file or directory
03-03 13:04:52.457: W/PackageManager(59): Running ENG build: no pre-dexopt!
03-03 13:04:54.607: W/PackageParser(59): No actions in intent filter at /data/app/ApiDemos.apk Binary XML file line #1841
03-03 13:04:54.617: W/PackageParser(59): No actions in intent filter at /data/app/ApiDemos.apk Binary XML file line #1847
03-03 13:04:54.627: W/PackageManager(59): Package com.example.android.apis desires unavailable shared library com.example.will.never.exist; ignoring!
03-03 13:04:54.678: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.mail in package com.android.contacts
03-03 13:04:54.678: W/PackageManager(59): Unknown permission android.permission.ADD_SYSTEM_SERVICE in package com.android.phone
03-03 13:04:54.678: W/PackageManager(59): Not granting permission android.permission.SEND_DOWNLOAD_COMPLETED_INTENTS to package com.android.browser (protectionLevel=2 flags=0x1be45)
03-03 13:04:54.678: W/PackageManager(59): Unknown permission com.google.android.gm.permission.WRITE_GMAIL in package com.android.settings
03-03 13:04:54.678: W/PackageManager(59): Unknown permission com.google.android.gm.permission.READ_GMAIL in package com.android.settings
03-03 13:04:54.678: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.settings
03-03 13:04:54.689: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.providers.contacts
03-03 13:04:54.689: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.cp in package com.android.providers.contacts
03-03 13:04:54.689: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.ACCESS_GOOGLE_PASSWORD in package com.android.development
03-03 13:04:54.689: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.development
03-03 13:04:54.689: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.ALL_SERVICES in package com.android.development
03-03 13:04:54.689: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.YouTubeUser in package com.android.development
03-03 13:04:55.407: E/EventHub(59): could not get driver version for /dev/input/mouse0, Not a typewriter
03-03 13:04:55.407: E/EventHub(59): could not get driver version for /dev/input/mice, Not a typewriter
03-03 13:04:56.017: E/System(59): Failure starting core service
03-03 13:04:56.017: E/System(59): java.lang.SecurityException
03-03 13:04:56.017: E/System(59):   at android.os.BinderProxy.transact(Native Method)
03-03 13:04:56.017: E/System(59):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
03-03 13:04:56.017: E/System(59):   at android.os.ServiceManager.addService(ServiceManager.java:72)
03-03 13:04:56.017: E/System(59):   at com.android.server.ServerThread.run(SystemServer.java:184)
03-03 13:04:56.557: W/AudioPolicyManagerBase(34): setPhoneState() setting same state 0
03-03 13:04:56.577: E/SoundPool(59): error loading /system/media/audio/ui/Effect_Tick.ogg
03-03 13:04:56.577: W/AudioService(59): Soundpool could not load file: /system/media/audio/ui/Effect_Tick.ogg
03-03 13:04:56.577: E/SoundPool(59): error loading /system/media/audio/ui/KeypressStandard.ogg
03-03 13:04:56.577: E/SoundPool(59): error loading /system/media/audio/ui/KeypressSpacebar.ogg
03-03 13:04:56.577: W/AudioService(59): Soundpool could not load file: /system/media/audio/ui/KeypressSpacebar.ogg
03-03 13:04:56.577: E/SoundPool(59): error loading /system/media/audio/ui/KeypressDelete.ogg
03-03 13:04:56.577: W/AudioService(59): Soundpool could not load file: /system/media/audio/ui/KeypressDelete.ogg
03-03 13:04:56.577: E/SoundPool(59): error loading /system/media/audio/ui/KeypressReturn.ogg
03-03 13:04:56.577: W/AudioService(59): Soundpool could not load file: /system/media/audio/ui/KeypressReturn.ogg
03-03 13:04:56.587: W/HeadsetObserver(59): This kernel does not have wired headset support
03-03 13:04:56.587: W/DockObserver(59): This kernel does not have dock station support
03-03 13:04:56.697: W/DevicePolicyManagerService(59): failed parsing /data/system/device_policies.xml java.io.FileNotFoundException: /data/system/device_policies.xml (No such file or directory)
03-03 13:04:56.947: W/StatusBar(59): No icon ID for slot ime
03-03 13:04:57.327: W/RecognitionManagerService(59): no available voice recognition services found
03-03 13:04:57.498: E/ThrottleService(59): Could not open GPS configuration file /etc/gps.conf
03-03 13:04:57.637: W/GpsLocationProvider(59): Could not open GPS configuration file /etc/gps.conf
03-03 13:04:57.727: W/ActivityManager(59): Unable to start service Intent { act=@0 }: not found
03-03 13:04:57.727: W/ActivityManager(59): Unable to start service Intent { act=@0 }: not found
03-03 13:04:58.607: E/logwrapper(148): executing /system/bin/tc failed: No such file or directory
03-03 13:04:58.647: E/logwrapper(149): executing /system/bin/tc failed: No such file or directory
03-03 13:04:58.757: E/logwrapper(150): executing /system/bin/tc failed: No such file or directory
03-03 13:05:01.617: W/ActivityManager(59): Unable to start service Intent { act=com.android.ussd.IExtendedNetworkService }: not found
03-03 13:05:00.774: W/SystemClock(112): Unable to set rtc to 1362315900: Invalid argument
03-03 13:05:05.370: E/HierarchicalStateMachine(59): TetherMaster - unhandledMessage: msg.what=3
03-03 13:05:14.851: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.mail in package com.android.contacts
03-03 13:05:14.851: W/PackageManager(59): Unknown permission android.permission.ADD_SYSTEM_SERVICE in package com.android.phone
03-03 13:05:14.851: W/PackageManager(59): Not granting permission android.permission.SEND_DOWNLOAD_COMPLETED_INTENTS to package com.android.browser (protectionLevel=2 flags=0x1be45)
03-03 13:05:14.860: W/PackageManager(59): Unknown permission com.google.android.gm.permission.WRITE_GMAIL in package com.android.settings
03-03 13:05:14.870: W/PackageManager(59): Unknown permission com.google.android.gm.permission.READ_GMAIL in package com.android.settings
03-03 13:05:14.870: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.settings
03-03 13:05:14.870: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.providers.contacts
03-03 13:05:14.870: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.cp in package com.android.providers.contacts
03-03 13:05:14.870: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.ACCESS_GOOGLE_PASSWORD in package com.android.development
03-03 13:05:14.881: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH in package com.android.development
03-03 13:05:14.881: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.ALL_SERVICES in package com.android.development
03-03 13:05:14.881: W/PackageManager(59): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.YouTubeUser in package com.android.development
03-03 13:05:17.520: W/RecognitionManagerService(59): no available voice recognition services found 
```

这是错误代码的全部部分`previewCallback`：

```
PreviewCallback previewCallback = new PreviewCallback()
    {
        public void onPreviewFrame( byte[] data, Camera camera )
        {
            .
            .
            .

            if( scanResult != 0 )
            {
                isPreviewing = false;
                phoneCamera.setPreviewCallback( null );
                phoneCamera.stopPreview();

                SymbolSet qrCodeContent = scanner.getResults();

                for( Symbol symbol : qrCodeContent )
                {
                    qrCodeText.setText("QR CODE CONTAINS: " + symbol.getData() );
                    isQrCodeScanned = true;
                }

                timer.schedule( new TimerTask()
                                {

                                    @Override
                                    public void run()
                                    {
                                        // TODO Auto-generated method stub

                                        if( isQrCodeScanned )
                                        {

                                            isQrCodeScanned = false;
                                            isPreviewing = true;

                                            qrCodeText.setText( "Waiting for a QR Code..." );

                                            phoneCamera.setPreviewCallback(previewCallback);
                                            phoneCamera.startPreview();
                                            phoneCamera.autoFocus(autoFocusCallback);
                                        }

                                    }

                                }, ACTIVATE_LIMIT);

            }

        }

    }; // End of previewCallback 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:38:47.667

A TimerTask runs on a separate thread and can't change things in the UI-thread. Maybe it would work if you'd run the code on the ui thread? For example:

```
timer.schedule( new TimerTask() {
    @Override
    public void run() {
        if( isQrCodeScanned ) { 
            isQrCodeScanned = false;
            isPreviewing = true;                      
            runOnUiThread(new Runnable() {
                public void run() {
                    qrCodeText.setText( "Waiting for a QR Code..." );
                    phoneCamera.setPreviewCallback(previewCallback);
                    phoneCamera.startPreview();
                    phoneCamera.autoFocus(autoFocusCallback);
                }
           });
       }
   }
}, ACTIVATE_LIMIT); 
```

Haven't tested this. Hope it helps.

Cheers, Martijn.

# cryptography - 数字签名使用-不可否认

> ID：15185908
> 
> 赞同：-1
> 
> 时间：2013-03-03T12:57:53.940
> 
> 标签：cryptography

如果单独的数字签名不能提供不可否认性并且需要第三方来提供，这意味着单独的数字签名是没有价值的。我对吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:10:53.750

这取决于所讨论的协议和签名方案是否在没有第三方的情况下提供不可否认性。
例如，在简单的公钥/私钥数字签名设置中，公钥足以让任何人验证给定方是否拥有私钥来创建数字签名。
那么问题就变成了如何保证签署方是当时唯一可以访问私钥的一方。

# jquery - 使用 jquery 删除父 li 文本

> ID：15185909
> 
> 赞同：2
> 
> 时间：2013-03-03T12:58:05.410
> 
> 标签：jquery

我有这个 html 代码：

```
<div class="menu">
    <p class="menutext">
        <li class="pagenav">test
            <ul>
                <li class="page_item page-item-190 current_page_item">
                    <a href="http://test.com/">test2</a>
                </li>
            </ul>
        </li>
    </p>
</div> 
```

我将`test`在这一行删除：

```
<li class="pagenav">test 
```

我怎么能用jquery做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T13:10:22.567

你可以试试这段代码：

```
var cachedChildren = $('.pagenav').children();
$('.pagenav').empty().append(cachedChildren); 
```

这将缓存所有子 DOM 元素，清空容器，然后附加缓存的 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:10:14.213

将“测试”包装成这样的跨度

```
<li class="pagenav"><span class="mytext">test</span> 
```

和链接：

```
<a href="http://test.com/" class="update">test2</a> 
```

然后，您可以通过执行以下操作删除测试值：

```
$('.update').on('click', function(e) {
    e.preventDefault();
    $(this).closest('.pagenav').find('.mytext').empty();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:13:58.653

试试这个 ：

```
$('.pagenav').html($('.pagenav').children()); 
```

小提琴[http://jsfiddle.net/Fy4mJ/](http://jsfiddle.net/Fy4mJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T13:17:52.370

在不接触 中的其他元素的情况`.pagenav`下，只针对文本，执行以下操作：

```
$('.pagenav').contents().filter(function() {
    return this.nodeType == 3;
}).remove(); 
```

[**小提琴**](http://jsfiddle.net/adeneo/XNbF9/)

# jquery - 如何修复由 jQuery FlexSlider 引起的水平滚动条？

> ID：15185911
> 
> 赞同：3
> 
> 时间：2013-03-03T12:58:25.140
> 
> 标签：jquery, css, web, horizontal-scrolling, flexslider

jQuery FlexSlider 在这里导致水平滚动条：http://abhinavsood.com/labs/grab/[我](http://abhinavsood.com/labs/grab/) 已经尝试过`overflow-x: hidden`flex-container 但它似乎没有解决它。

任何人都可以看看并提出修复建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T13:11:39.147

实际上是你的`.flex-direction-nav .flex-next`锚造成了它。

我通过应用它来修复`right: 0;`它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T13:08:28.900

```
.flex-direction-nav .flex-next {
background-position: 100% 0;
right: -36px;
}

.flex-direction-nav .flex-prev {
left: -36px;
} 
```

删除`left`and `right -36px`，我在您的页面上看不到任何箭头，因此您可能可以删除`flex-direction-nav`div中的那些元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T08:44:56.947

我通过编辑以下两件事来管理它：

在 style.css 添加第 329 行

```
overflow:hidden !important;

.flexslider .slides > li {
position:relative;
overflow:hidden !important;
} 
```

在 372 到 385

```
bottom:10px; left: 10px;overflow: hidden;

.flexslider.position-caption-bottom-left .flex-caption{
bottom:10px;
left: 10px;
overflow: hidden;
text-align:left;

}
.flexslider.position-caption-bottom-right .flex-caption {
bottom:10px;
left: 10px;
overflow: hidden;
text-align:right;
}
.flexslider.position-caption-bottom-centered .flex-caption {
bottom:10px;
left: 10px;
overflow: hidden;
text-align:center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T08:51:47.317

我设法解决此问题的唯一方法是在选项中添加：

```
useCSS: false 
```

例如：

```
 $('.flexslider').flexslider({
    animation: "slide",
    useCSS: false
  }); 
```

因为当它设置为 true 时，元素 ul.slides 变为 1000% 宽并导致浏览器生成水平滚动条。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-15T14:43:03.810

试试这个：

```
.flex-direction-nav .flex-prev {
left: 0 !important;}

.flex-direction-nav .flex-next {
right: 0 !important;} 
```

为我工作！;)

# c++ - 结构化对象的高性能装饰器模式

> ID：15185913
> 
> 赞同：3
> 
> 时间：2013-03-03T12:58:36.777
> 
> 标签：c++, performance, oop, design-patterns, decorator

想象一下，我有一个大型数据结构，比如说一个巨大的`vector`，它的创建不受我的控制（即我不能修改它的静态类型），其中包含 class 的对象`InitialFunctionality`。在 C++ 中：

```
class InitialFunctionality
{
 public:
 void iCanDoThis();
}

hugeVector vector<InitialFunctionality>; // <- lots of elements inside! :) 
```

我的目标是以尽可能低的性能影响**动态**扩展`InitialFunctionality`对象的功能，比方说：`hugeVector`

```
class ExtraFunctionality: public InitialFunctionality
{
 public:
 int iOfferThisToo;
} 
```

著名的[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)非常适用于非结构化对象。您可以使用它来动态扩展`InitialFunctionality`类中对象的功能，然后愉快地传递它们。

但是如何在`hugeVector`不改变其顺序且对性能影响最小的情况下扩展对象呢？例如，由于它的大小，复制向量是不行的。

我正在考虑为向量使用某种[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)，它保留对原始对象的引用`hugeVector`并根据需要懒惰地转换包含的对象（即，当访问适应的向量元素时）。然而，除了`iOfferThisToo`任何方法都需要的转换本身（即初始化）之外，这需要保留一个缓存以检查对象是否已经转换。这样的缓存可能非常昂贵。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-03T13:48:54.423

如果您没有添加额外的成员，您应该能够执行以下操作：

```
class myInternalFunctionality : public InternalFunctionality {
public:
    //new features
    void ICanDoThis();

private:
    // disable all ctors
}; 
```

然后重铸指向向量中的 InternalFunctionality 的指针。

```
myInternalFunctionality* myInternalPtr = &hugeVector[i];
myInternalPtr->ICanDoThis(); 
```

既然你是，我认为你遇到了一些麻烦。

# c# - C# 语言的 JIT 汇编程序

> ID：15185914
> 
> 赞同：4
> 
> 时间：2013-03-03T12:58:46.940
> 
> 标签：c#, assembly, jit, fasm

我正在编写一个内存编辑库，我有兴趣在 C# 中动态编写 asm 代码。我特别喜欢 FASM，所以我找到了一个名为 Fasm_managed 的​​库，它可以即时组装我的 x86 asm 代码。现在，我遇到了一个问题，我也需要汇编 x64 代码，但不幸的是，这个库不支持它。

有谁知道一个好的 C# JIT 汇编程序库，它可以编译 x86/x64 asm 代码（理想情况下是 FASM 语法）？:)

我正在寻找的一个很好的例子是库[AsmJit](http://code.google.com/p/asmjit/)（但这个仅适用于 C/C++）。

多谢你们。

# mysql - 4 表深度mysql查找

> ID：15185915
> 
> 赞同：0
> 
> 时间：2013-03-03T12:59:12.303
> 
> 标签：mysql, database, join

我有 4 个表 - 公司、项目、工人、任务每个公司有几个项目，每个项目有几个工人，每个工人有几个任务。

在任务表中，有一个“estimated_cost”字段。我想查看所有公司的列表，但我希望它按其中估计成本最高的任务的估计成本排序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:09:36.567

我使用 MSSQL 而不是 MySQL，所以语法可能不是 100%……但试试这个。

```
SELECT company.name, MAX(estimated_cost) AS HighestCost
FROM companies 
INNER JOIN projects ON projects.companyid = projects.id
INNER JOIN workers ON workers.projectid = workers.id
INNER JOIN tasks ON tasks.workerid = tasks.id
GROUP BY company.name
ORDER BY HighestCost DESC 
```

# java - JDBC 驱动程序和 Tomcat 的问题

> ID：15185917
> 
> 赞同：0
> 
> 时间：2013-03-03T12:59:16.127
> 
> 标签：java, mysql, rest, servlets

尝试从 servlet 设置数据库连接时遇到一些问题。

我有以下类处理 servlet 中的数据库连接，但我不断收到 NullPointerException `Class.forName()`。

数据库实用程序类：

```
public class Database {

    private static Connection connection = null;

    /**
     * 
     * @return
     */
    public static Connection getConnection(){
        if(connection!=null){
            return connection;
        } else {
            try {
                Properties db_properties = new Properties();
                InputStream inStream = Database.class.getClassLoader().getResourceAsStream("/db.properties");
                db_properties.load(inStream);
                //String dbDriver = db_properties.getProperty("driver").trim();
                String url = db_properties.getProperty("url").trim();
                String dbUser = db_properties.getProperty("user").trim();
                String dbPass = db_properties.getProperty("pass").trim();
                Class.forName("com.mysql.jdbc.Driver");
                connection = DriverManager.getConnection(url,dbUser,dbPass);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        return connection;
    }
} 
```

使用以下属性文件（我尝试对驱动程序进行硬编码，但仍然出现相同的错误！）：

```
driver=com.mysql.jdbc.Driver
url=jdbc:mysql://localhost:8889/gymbuddy
user=Mathan
pass=PYCCmcPDAFSj7N9B 
```

我得到以下堆栈跟踪：

```
SEVERE: Allocate exception for servlet BuddyController
java.lang.NullPointerException
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:171)
    at com.mathanv.gb.util.Database.getConnection(Database.java:35)
    at com.mathanv.gb.dao.BuddyDao.<init>(BuddyDao.java:35)
    at com.mathanv.gb.controller.BuddyController.<init>(BuddyController.java:29)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:357)
    at java.lang.Class.newInstance(Class.java:310)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

我正在尝试从 Android 客户端发送发布请求。HTTPpost 请求似乎有效！但是获得连接给了我上述异常！帮助！

以下是我的 Servlet 布局：

![小服务程序布局](../Images/6704404f382f608995d46e8c45722d47.png)

如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:15:45.503

获得该异常的唯一方法是传递`null`给 Class.forName() 或者使用损坏的 JVM。您显示的代码不会引发该异常。仔细检查你的结果。在最坏的情况下，你应该得到一个`ClassNotFoundException`. 也许您已经更新了代码但还没有编译和重新部署它，所以您仍然看到旧代码在服务器中运行的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:26:04.013

您确定当您在代码中硬编码驱动程序名称时，您也会收到相同的错误。当您将 null 作为参数传递时，Class.forName() 会引发空指针异常。我认为在第一种情况下未加载属性文件并且驱动程序名称返回 null。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T13:08:04.600

如果您在更多位置有 mysql 驱动程序，则会发生这种情况。

尝试寻找其他位置。或者从 lib 文件夹中删除 i。如果像我说的那样，问题应该得到解决。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T13:24:44.447

立即删除您的代码并立即`DataSource`在 Tomcat 中使用。您的代码远非高质量。

# ruby-on-rails - find、where 和 find_by_id 有什么区别？

> ID：15185919
> 
> 赞同：47
> 
> 时间：2013-03-03T12:59:55.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`find`和`where`和有什么区别`find_by_id`？当您尝试查找给定 ID 的用户时，它们都会起作用。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-03T13:02:44.423

区别在于找到记录或未找到记录时返回的内容。考虑以下示例：

```
>> User.create name: 'THE USER' # creates a user with id = 1
>> User.find(1) # returns the user
>> User.find_by_id(1) # returns the user
>> User.where(id: 1).first # returns the user 
```

如您所见，可以使用 3 种方法中的任何一种来获取现有用户。using 的最大区别`where`是您可以链接命令（当然，无需`first`先调用。）

让我们看看您何时尝试查找不存在的记录

```
>> User.find(2) # raises an exception
>> User.find_by_id(2) # nil
>> User.where(id: 2).first # nil 
```

所以在这里，很明显，当您使用`find`搜索不存在的记录时，您会遇到异常。该例外是`ActiveRecord::RecordNotFound`在生产环境中呈现 404。

希望这可以帮助！

**更新**

Rails 4 使用以下语法`find_by`

```
>> User.find_by(id: 1)  # returns nil if there's no user with an id of 1
>> User.find_by!(id: 1) # raises ActiveRecord::RecordNotFound when no record is found 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-04T09:16:56.343

**find** => 如果系统中存在给定的primary_key(id)，则返回单个记录，否则会出错。

```
Model.find(required_id_value) 
```

**find_by** => 这将返回取决于给定属性的单个记录，如果数据库中不存在该属性的值，它将返回 nil。

```
Model.find_by_name("your name") 
```

这里的 name 是属性，它必须存在于您的 Modal 中。

**where** => 这将返回一个包含零个或多个记录的活动记录关系，您首先需要使用它来仅返回一条记录，或者在零记录返回的情况下返回 nil。

```
Model.where(id: id_value).first 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:03:37.147

`find`=> 这用于查找行`id`。这将返回单个记录。

```
YourModel.find(2)
Address.find(1) 
```

`find_by`=> 这用于通过记录的任何属性获取行。如果条件匹配，这将返回第一个匹配记录。

```
YourModel.find_by_attrname("value")
Address.find_by_street_name_and_city("Andheri", "Newyork")
Addess.find_by_id(4) 
```

`where`=> 这用于根据条件获取活动记录以返回活动记录关系（即）可能是零个或多个记录。

```
YourModel.where(:attrname => "something")
Address.where(:city => "Newyork") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-28T10:02:33.507

对我来说很简单......

'Find' 结果返回单个对象给您，但 'Where' 返回 Array 给您，因此您需要添加 .each 以从该数组中获取每个对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-07T21:23:37.633

没什么大不了的，但是当您尝试检索 1+ 条记录然后您需要更新每条记录并且您想使用 时，还有另一个区别`find`，因为查询的结果是. 但是，如果您尝试在 find 中使用结果，则会出现错误。`where``find_each``where``where``ActiveRecord::Relation``find_each`

```
Profile.find([1, 2, 3]).find_each { |e| puts e.id }
=> NoMethodError (undefined method `find_each' for 
 <Array:0x0000555e923d3f38>)

Profile.where(id: [1, 2, 3]).find_each { |e| puts e.id }
=> 1
=> 2
=> 3 
```

# python - 在 django 查询中获取多个月的记录

> ID：15185921
> 
> 赞同：0
> 
> 时间：2013-03-03T13:00:29.440
> 
> 标签：python, django, django-models, django-views

如何过滤多个月的对象？

我试过这个东西，但没有运气

```
 Sample.objects.filter(date__year=2013, 
                        date__month__in=[2, 7, 9, 12]) 
```

好像我尝试多个 ID 的以下将起作用

```
 Sample.objects.filter(id__in=[1,4,8]) 
```

如何在 django 查询中过滤多个月的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:11:47.543

抱歉，没有查找（`__month`已经是查找，您无法链接它们），但您可以使用`Q`对象执行此操作：

```
from django.db.models import Q

def month_in(months, field='date'):
    q = Q()
    for m in months:
       q |= Q(**{field + '__month': m})
    return q

Sample.objects.filter(month_in([2, 7, 9, 12]), date__year=2013) 
```

或者可能会带来年份：

```
def month_in(year, months, field='date'):
    q = Q(**{field + '__year': year})
    for m in months:
       q |= Q(**{field + '__month': m})
    return q

Sample.objects.filter(month_in(2013, [2, 7, 9, 12])) 
```

然后你可以做类似的事情

```
Sample.objects.filter(month_in(2013, [2, 7, 9, 12]) | month_in(2012, [9, 11])) 
```

# meteor - 来自 Handlebars 块助手的 Meteor.call

> ID：15185923
> 
> 赞同：4
> 
> 时间：2013-03-03T13:00:50.597
> 
> 标签：meteor

我正在尝试`Meteor.call`在 Handlebars 块助手中使用一个函数

```
Handlebars.registerHelper('get_handle', function(profileId, name) {
  Meteor.call("getProfileLink", profileId, function(error, result) {
    if (error) {
      return new Handlebars.SafeString('<a href="#">' + name + '</a>');
    } else {
      return new Handlebars.SafeString('<a href="http://twitter.com/' + result + '">' + name + '</a>');
    }
  });
}); 
```

我看到`console.log(result)`正在返回结果，但没有呈现来自此帮助程序的 HTML。但是，当我将相同的`Handlebars.SafeString`返回值放在 中时`Meteor.call`，它工作正常。我在这里做错了什么？`Meteor.call`或者在 Handlebars 块中使用 a 是不正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:40:50.463

在上面的范例中，您不能在把手块中使用 Meteor.call，主要是因为 javascript 的异步设计，当从服务器接收到值时，返回值已经返回。

`Session`但是，您可以使用变量传递它：

```
Handlebars.registerHelper('get_handle', profileId, name,  function() {
    return new Handlebars.SafeString(Session.get("get_handle" + profileId + "_" + name));

});

//In a meteor.startup or a template.render
Meteor.call("getProfileLink", profileId, name, function(error, result) {
    if (error) {
       Session.set("get_handle" + profileId + "_" + name, '<a href="#">' + name + '</a>');
    } else {
       Session.set("get_handle" + profileId + "_" + name, '<a href="http://twitter.com/' + result + '">' + name + '</a>');
    }
}); 
```

当您可以在一个批量请求中请求数据时，还要小心尝试`Meteor.call`为每个 profileId 和 name 使用 have so many （如果您在某种列表或其他东西中使用它）。

**哈克方式**

您仍然可以按照您的意愿进行操作，但我建议您不要这样做。我认为它有点低效。

```
Handlebars.registerHelper('get_handle', profileId, name,  function() {
    if(Session.get("get_handle" + profileId + "_" + name)) {
        return new Handlebars.SafeString(Session.get("get_handle" + profileId + "_" + name));
    }
    else
    {
        Meteor.call("getProfileLink", profileId, name, function(error, result) {
            if (error) {
                Session.set("get_handle" + profileId + "_" + name, '<a href="#">' + name + '</a>');
            } else {
                Session.set("get_handle" + profileId + "_" + name, '<a href="http://twitter.com/' + result + '">' + name + '</a>');
            }
        });
        return "Loading..."
     }
}); 
```

# php - 按日期查找记录sql Server

> ID：15185926
> 
> 赞同：0
> 
> 时间：2013-03-03T13:01:06.540
> 
> 标签：php, sql-server-2005, datetime

我有一个表产品（prodID,stock,createdDate 类型 DATETIME ）

想从表中查找当前日期的所有记录

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:03:53.650

这四舍五入到当前日期：

```
...
WHERE createdDate >= dateadd(dd, datediff(dd, 0, GetDate()), 0) 
```

*   `GetDate`返回当前日期时间
*   `datediff(dd, 0, GetDate()), 0)`返回从第一个日期到现在的天数
*   `dateadd(dd`广告...这些天到第一个日期，所以我们得到当前日期没有时间

# javascript - Breeze.js EntityManager 未检测到更改

> ID：15185929
> 
> 赞同：1
> 
> 时间：2013-03-03T13:01:28.317
> 
> 标签：javascript, mvvm, knockout.js, breeze

我的视图模型如下，使用 knockout.js 绑定到我的页面。Episodes 是一个实体数组，每个实体都有一个布尔属性“ListenedTo”，绑定到我页面上的复选框。

```
function episodesViewModel() {

    this.episodes = ko.observableArray();

    this.sync = function () {
        repository.populateEpisodes(this);
    }

    this.save = function () {
        repository.saveChanges();
    }

    //this.episodes.subscribe(function (episodes) {
    //    ko.utils.arrayForEach(episodes, function (episode) {
    //        episode.ListenedTo.subscribe(function () {
    //            window.repository.saveChanges();
    //        });
    //    });
    //});

    // perform an initial sync
    this.sync();   
} 
```

存储库对象只是底层 Breeze 调用的包装器。

如果我将 save() 绑定到单击按钮，一切都会按预期工作，微风看到有更改并回调服务器。如果我取消注释创建对 ListenedTo 更改的订阅的行（并且无需单击按钮即可保存），则会发生奇怪的事情。

页面加载并填充后，第一次单击复选框会按预期自动调用微风 saveChanges()。即使 viewmodel 中的值符合预期并且与复选框匹配，但微风 hasChanges() 返回 false 并且不进行服务器调用。再次单击它，hasChanges 现在为 true，并进行了服务器调用！？就像 Breeze 落后并且没有将更改注册到视图模型上的实体。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T03:29:43.843

天啊。你的代码有大麻烦！在深入研究细节之前，跳出页面的是您可能会在`episodes`每次数组更改时重复地向数组中的每一集添加订阅。哎呀！

## 事件传播延迟

在我继续我的疑虑之前，我想承认您的具体经验，即您的听众何时触发与`manager.hasChanges`. 那是真的。KO 订阅在`EntityManager`听说更改之前就被触发了……这就是它报告错误的原因。变化的消息还没有到经理听到。

我也注意到了这一点。事实上，如果您查看*TodoSample*中的[viewModel.js](http://www.breezejs.com/samples/todo-knockout)，您会发现我们通过添加一个`setTimeout`来解决它，让 Breeze 有机会听到更改：

```
// 使用 Breeze PropertyChanged 事件监听变化
item.entityAspect.propertyChanged.subscribe(function () {
    if (suspendItemSave) { return; }
    // 给 EntityManager 时间来听到变化
    setTimeout(saveIfModified, 0);

    函数 saveIfModified() {
        if (item.entityAspect.entityState.isModified()) {
                数据服务.saveChanges();
        }
    }
});

```

我希望我知道另一种方式。那只是KO和Breeze之间的时间问题。我们还没有弄清楚如何巧妙地处理它。不确定我们能否做到。

## 模型规则还是视图规则？

让我们备份。**无论它出现在什么视图中，都**应该`episode`在其`listenedTo`属性更改时保存吗？ 如果您的回答是“是”，那么您有一个真正属于该模型的应用程序业务规则，并且您确实需要监听情节变化的东西。

 **但是如果答案是“否”......如果保存应该由“复选框”触发，而不是对对象的更改，那么这是一个 UI 规则......一个视图规则......你应该使用 KO听**checkbox**，而不是 episode 属性。

## 实体更改时保存

让我们来看第一种情况，并断言您的应用程序规则如下：“*总是在`listenedTo`更改时保存，无论是什么原因导致它更改*”。

我知道在[TodoSample](http://www.breezejs.com/samples/todo-knockout)中，我们演示了一种直接监听实体以更改其一个属性（其任何属性）的方法。这很强大，而且很直观。

我开始相信这不是最安全的方法。在具有共享同一实体的多个 ViewModel 的应用程序中，它可能会导致内存泄漏。这个“待办事项”应用程序只有一个屏幕，因此不必担心。但在更大的应用程序中......我会担心。

所以我建议不要监听`Episode`属性的变化。而是**听`EntityManager`！** 查看最近发布的[Breeze SPA 模板中](http://www.breezejs.com/spa-template)*datacontext.js*的这个片段。

```
功能 configureManagerToSaveModifiedItemImmediately() {
    manager.entityChanged.subscribe(entityStateChanged);

    功能实体状态改变（参数）{
        如果（args.entityAction === 微风.EntityAction.EntityStateChange）{
            var 实体 = args.entity;
            if (entity.entityAspect.entityState.isModified()) {
                保存实体（实体）；
            }
        }
    }
}   

```

注意它如何监听 EntityManager 缓存的任何实体的状态变化。它只对转换到“已修改”状态感兴趣。检测到时，它会保存实体。

现在这对你来说可能太宽泛了。但是您可以想象注册额外的过滤逻辑来满足您的应用程序的特定需求。

## 保存队列

与自动保存有关的新问题。无论您如何触发保存，这个问题都很重要。

用户可以很快点击。她一定会比处理请求更快地触发保存请求。Breeze（默认情况下）`EntityManager`在等待服务器从挂起的保存操作返回结果时不会再次保存。它会抛出异常。

它必须等待，因为它无法将实体的状态从已更改更改为未更改，直到它知道保存是否成功。如果保存失败，您希望将实体保持在“未保存”状态。

*查看datacontext.js*顶部的`manager.enableSaveQueuing(true)`. 这**不是**微风的原生功能。这是插件的一个功能，*Scripts/breeze.savequeuing.js* 你会想要加载这个插件。[在Breeze SPA 模板](http://www.breezejs.com/spa-template)的文章中阅读它

## 为什么这么复杂

你可能认为**Breeze这个东西非常复杂**。实际上，引入复杂功能的不是 Breeze。您希望在实体更改其状态时触发保存，这会增加复杂性。

我并不是说你这样做是错误的。我的意思是，这种方法是 Breeze 提供的一个机会，在实施过程中需要小心谨慎。

如果没有 Breeze，您将完全无法跟踪实体状态。因此，您唯一真正安全的选择是根据对复选框的更改来触发保存……在这种情况下，所做的工作并不比将 KO 绑定到复选框更复杂。

嗯......好吧......由于您绊倒的Breeze / KO时间问题，它有点复杂，这需要`setTimeout`开局。但我希望你能明白我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:48:50.410

没有更多信息很难知道（例如，使用了哪些其他框架，什么触发了 VM 实例化代码，KO.ApplyBind 在哪里） 在创建 VM 时您的视图是否正确构建？

我现在使用 Durandal，它首先创建 VM，然后是视图。尝试在 Durandal 的激活事件期间创建额外的订阅（或更早，如您的实例化代码），导致 KO 视图/viewModel 订阅被处置，因为它们被发现是无效的。我必须在 Durandal 之后的 viewAttached 事件中创建订阅

稍后尝试将您的订阅放在工作流程中。**

# wpf - 条件 XAML 绑定

> ID：15185931
> 
> 赞同：1
> 
> 时间：2013-03-03T13:02:00.397
> 
> 标签：wpf, xaml, binding, conditional-statements

我想创建一个类似于 Microsoft Outlook 的窗口标题。

为此，我创建了以下绑定：

```
<MultiBinding StringFormat="{}{0} - Message ({1})}">
    <Binding ElementName="txtSubject" Path="Text" />
    <Binding ElementName="biSendAsHtml">****</Binding>
</MultiBinding> 
```

现在我想知道如何使第二个绑定有条件。比如当`biSendAsHtml.IsChecked`equals`true`显示*HTML* else 显示*Plain Text*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:16:08.973

我不确定您如何认为 sa_ddam213 的答案很优雅，这很可怕。转换器，如建议的 RV1987，是正确的方法，但您可以更聪明。

创建一个转换器，它接受一个布尔值并将其转换为转换器定义中定义的选项。

```
public class BoolToObjectConverter : IValueConverter
{
    public object TrueValue { get; set; }
    public object FalseValue { get; set; }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return Convert.ToBoolean(value) ? TrueValue : FalseValue;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

定义转换器：

```
<local:BoolToObjectConverter x:Key="SendAsHtmlBoolToTextConverter"
                             TrueValue="HTML"
                             FalseValue="Plain Text"/> 
```

并使用它：

```
<MultiBinding StringFormat="{}{0} - Message ({1})}">
    <Binding ElementName="txtSubject" Path="Text" />
    <Binding ElementName="biSendAsHtml" Path="IsChecked"
             Converter="{StaticResource SendAsHtmlBoolToTextConverter}"/>
</MultiBinding> 
```

如果您愿意，您甚至可以制作 TrueValue 和 FalseValue DependencyProperties 来支持绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T15:11:28.847

创建一个[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)并在您的第二个绑定中使用它 -

```
public class MyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, 
                            System.Globalization.CultureInfo culture)
    {
        return (bool)value ? "HTML" : "Your Text";
    }

    public object ConvertBack(object value, Type targetType, object parameter, 
                               System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

这是你的 XAML -

```
<MultiBinding StringFormat="{}{0} - Message ({1})}">
    <Binding ElementName="txtSubject" Path="Text" />
    <Binding ElementName="biSendAsHtml" Path="IsChecked"
             Converter="{StaticResource Myconverter}"/>
</MultiBinding> 
```

# c++ - C++ Xcode，如何包含和声明我的对象

> ID：15185932
> 
> 赞同：0
> 
> 时间：2013-03-03T13:02:01.923
> 
> 标签：c++, xcode, cocos2d-x

我编辑了我的原始消息，以完全按原样包含我的代码。很抱歉给您带来麻烦。

这是我尝试使用指向我添加到项目中的类的指针的地方：

```
#ifndef MYAPP_DivGameLayer_h
#define MYAPP_DivGameLayer_h

// When you import this file, you import all the cocos2d classes
#include "cocos2d.h"
#include "Box2D.h"
#include "DivBall.h"    

#define PTM_RATIO 32
#define GRAVITY -10.0f
#define VELOCITY_ITERS 8
#define POSITION_ITERS 1
#define BALLS_COUNT 2

class DivGameLayer : public cocos2d::CCLayer {

public:

    ~DivGameLayer();
    DivGameLayer();

    // returns a Scene that contains the layer as the only child
    static cocos2d::CCScene* scene();

    // functions for handling user input touches    
    virtual void ccTouchesEnded(cocos2d::CCSet* touches, cocos2d::CCEvent* event);

    // game update loop function
    void update(float dt);

private:

    // CONSTANTS
    float SCREEN_WIDTH;
    float SCREEN_HEIGHT;

    b2World* world;                 // the game's world
    DivBall* balls;                 // balls
    int next;                       // pointer to next ball

    // initialize the game's world
    void initWorld();

    // initialize balls
    void initBalls();
};
#endif 
```

这是我的 DivBall 头文件：

```
#ifndef MYAPP_DivBall_h
#define MYAPP_DivBall_h

#include "DivGameLayer.h"

#define PATH "ball.png"
#define DENSITY 0.25f
#define FRICTION 0.1f
#define RESTITUTION 0.7f

class DivBall : public cocos2d::CCSprite {

public:

    ~DivBall();
    DivBall(DivGameLayer layer, b2World* world, cocos2d::CCPoint location, float Vx, float Vy, float omega);

private:

    DivBall();    
    b2Body* body;

};

#endif 
```

这是 DivBall.cpp：

```
#include "DivBall.h"
#include "SimpleAudioEngine.h"

using namespace cocos2d;
using namespace CocosDenshion;

// defualt CTOR
DivBall::DivBall()
{

}

// CTOR
DivBall::DivBall(DivGameLayer layer, b2World* world, CCPoint location, float Vx, float Vy, float omega)
{
    CCSprite *sprite = CCSprite::create(PATH);
    sprite->setPosition( CCPointMake(location.x, location.y) );
    layer->addChild(sprite);

    // Define the dynamic body.
    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position.Set(location.x/PTM_RATIO, location.y/PTM_RATIO);
    bodyDef.userData = sprite;
    b2Body *body = world->CreateBody(&bodyDef);

    // Define a circle shape for our dynamic body.
    b2CircleShape circle;
    circle.m_radius = (sprite->getContentSize().width/2.0f)/PTM_RATIO;

    // Define the dynamic body fixture.
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &circle;
    fixtureDef.density =  DENSITY;
    fixtureDef.friction = FRICTION;
    fixtureDef.restitution = RESTITUTION;
    body->CreateFixture(&fixtureDef);

    // set velocity
    body->SetLinearVelocity(b2Vec2(Vx/PTM_RATIO, Vy/PTM_RATIO));
    body->SetAngularVelocity(omega);
}

// DCTOR
DivBall::~DivBall()
{
        // nothing...
} 
```

我在 GameLayer 中得到一个编译错误：未知类型名称 Ball。

抱歉不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:12:52.393

> 我创建了自己的一些类，比如 foo

不，你没有。您只创建了一个头文件和一个实现文件。正如您在评论中提到的：

> foo.h 中什么都没有我只是添加了文件： foo.h 和 foo.cpp

好吧，那么编译器会告诉你`foo`是一个未知的类型名称，这是有道理的，因为你还没有定义任何名为 的类型`foo`。你的`foo.h`标题是空的。只需向该标头添加一个名为的类型`foo`，例如：

```
class foo
{
    // Whatever...
}; 
```

**编辑：**

更新后，现在更清楚问题所在了。在你的`DivGameLayer`类的定义中，你声明了一个 type 的成员变量`DivBall*`。但是，在定义`DivBall.h`的标头中不包含标头`DivGameLayer`。因此，在处理该类定义时，类型`DivBall`是未知的。

您应该为它添加一个前向声明：

```
class DivBall; // <== ADD THIS

class DivGameLayer : public cocos2d::CCLayer 
{
    ...
}; 
```

# android - 收到短信后删除到收件箱

> ID：15185939
> 
> 赞同：2
> 
> 时间：2013-03-03T13:02:30.247
> 
> 标签：android

首先，我想澄清一下，这个问题不是任何其他问题的重复，原因如下：

我想在短信**到达收件箱**而**不是在到达收件箱之前**删除短信，因为如果我想在到达收件箱之前删除短信，我将不得不使用所谓的`BroadcastReceiver`并将其设置`priority`为`1000`（这是*最大值*）。但是，如果有另一个应用程序使用相同的优先级怎么办？Android 会任意选择其中一个，换句话说，不能保证是我的应用程序会处理收到的 SMS，因为移动设备上可能有另一个应用程序具有相同的优先级。因此，我想收听收件箱，一旦收到，我会检查其特征并将其删除。

PS：我有在到达收件箱**之前**处理短信的经验，我现在的问题是**一旦到达**收件箱就处理短信，这是我感兴趣的。

感谢您的支持！

# wordpress - 摘录 Wordpress 帖子中的帖子

> ID：15185940
> 
> 赞同：0
> 
> 时间：2013-03-03T13:02:35.373
> 
> 标签：wordpress, blogs

我有以下代码，但似乎阅读更多链接不起作用，请有人介意协助，我激活了函数文件中的摘录：

查询下面的帖子：-

```
<?php $the_query = new WP_Query( 'showposts=5' ); ?>
<?php while ($the_query -> have_posts()) : $the_query -> the_post(); ?>
<li><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></li>
<?php the_excerpt('Read more...'); ?>
<a href="<?php echo get_permalink(); ?>"> Read More...</a>
<?php endwhile;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:22:36.623

一个一直很好地服务于我的项目的简单解决方案是声明一个简单的函数，`functions.php`如下所示：

```
add_filter('excerpt_more', 'new_excerpt_more');
function new_excerpt_more($more) {
    global $post;
    return '… <a href="'. get_permalink($post->ID) . '">' . 'Read More ...' . '</a>';
} 
```

然后在需要的地方调用摘录：

```
<?php the_excerpt(); ?> 
```

希望这会有所帮助，WP codex 在摘录[http://codex.wordpress.org/Excerpt上也有一些很棒的文档](http://codex.wordpress.org/Excerpt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:34:45.700

您可以使用此编辑器按钮：

![在此处输入图像描述](../Images/0bbf039fa61a97e78340ae16f93e698c.png)

拆分内容：

![在此处输入图像描述](../Images/e667e5da2cf400727eb354ed4e0a8946.png)

或者

![在此处输入图像描述](../Images/0b03035e3b93b2d6bbad41921110d850.png)

然后它将在您的概览页面上显示如下：

![在此处输入图像描述](../Images/41a5e8c5e6a0ee0e023424952ba0450c.png)

在默认主题二十十二中，您使用以下代码：

```
<?php the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentytwelve' ) ); ?> 
```

显示`Continue reading`链接。

因此，在您的情况下，您可以使用：

```
<?php the_content("Read more ...");?> 
```

# c - C 源文件不会在 XCode 中构建到 .o 中

> ID：15185942
> 
> 赞同：0
> 
> 时间：2013-03-03T13:02:53.810
> 
> 标签：c, xcode, gcc

现在我收到的这个警告已经出现了，但我似乎仍然无法解决这个问题..

> [WARN] 没有规则为架构 i386 处理 sourcecode.c 类型的文件“dns.c”

我已经在某处的 XCode IDE 中触及了一些类似的属性，但是我如何再次修复这个问题.. 对于所有其他来源，生成 .o 代码没有问题..

谢谢..

# salesforce - 如何在 Visualforce 中设置两个 pageblock-Elements 并行？

> ID：15185944
> 
> 赞同：3
> 
> 时间：2013-03-03T13:03:21.007
> 
> 标签：salesforce, apex-code, visualforce

我想设置两个与 Visualforce 平行的页面块元素。我怎样才能做到这一点？

```
<apex:page>

<apex:pageblock title="titleA" id="blockA">

</apex:pageblock>

<apex:pageblock title="titleB" id="blockB">

</apex:pageblock>

</apex:page> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:23:11.510

这真的是一个 CSS 问题，我会说，关于浮动 div 彼此相邻，使用 CSS 进行页面布局等。[它被问过很多次了。](https://stackoverflow.com/search?q=div%20next%20to%20each%20other)将它们包装成一个`<apex:outputPanel>`，玩 float:right 等，你应该很高兴。

如果您想要一个纯 Visualforce 解决方案并且对 CSS 不满意，您可以将它们呈现为表格。[不过，关于如何不将表格用于布局](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)，存在整个哲学辩论；）

[`<apex:panelGrid>`](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_panelGrid.htm)在这种情况下应该是最简单的使用。

```
<apex:page>
    <apex:panelGrid columns="2">
        <apex:pageblock title="titleA" id="blockA">
        </apex:pageblock>
        <apex:pageblock title="titleB" id="blockB">
        </apex:pageblock>
    </apex:panelGrid>
</apex:page> 
```

# javascript - 如何为 javascript 库创建参考？

> ID：15185948
> 
> 赞同：1
> 
> 时间：2013-03-03T13:03:38.070
> 
> 标签：javascript, libraries

我创建了一个基于插件的 Web 应用程序，每个插件都是一个完全独立的 Web 项目，我在主机应用程序中创建了自己的 javascript 库，应该在每个插件中使用，所以我想为我的 javascript 库创建一个引用在每个插件项目中使用，以便在开发时在 Visual Studio 环境中获得智能感知。

是否有任何最佳实践可用于此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:41:45.307

您可以在 Visual Studio 上使用 Reference 标签。有四种使用模式：

1-引用另一个javascript文件使用

```
/// <reference path="someFolder/someScriptFile.js" /> 
```

2- 对 Web 服务的引用

```
/// <reference path="somepath/WCFService.svc" />
/// <reference path="somepath/asmxService.asmx" /> 
```

3- 参考 ta 网页

```
/// <reference path="somepath/default.aspx" /> 
```

4- 对嵌入式资源的引用

```
/// <reference name="resource-name" />
/// <reference name="resource-name" assembly="assembly-name" /> 
```

**注意**：您可以使用应用程序相对路径 (~/folder/file) 使您的引用更加健壮

希望能帮助到你。

**更新：**您可以在 .html、.aspx、.cshtml 和 .js 文件中使用它。

**Update2：**如果路径不在您的项目中，您可以在 Visual Studio 中将现有文件添加为 LinkedItem **（添加为链接）**并将 LinkItem 路径添加到引用标记的路径中。

# sql - 您可以将变量传递给 SQL 中的 VALUE 吗？

> ID：15185952
> 
> 赞同：0
> 
> 时间：2013-03-03T13:03:53.167
> 
> 标签：sql

我只是想知道是否可以将变量传递给查询的 VALUE 参数。基本上我的表单有一个列表框，用户在其中输入属于某部电影的演员姓名，然后将该列表存储在数据库中，以便在拉回记录时重新显示它 - 这是我现有的代码。

```
Private Sub btnAddSubject_Click()

Dim s As String
Dim db As DAO.Database
Set db = CurrentDb

s = lstItems.RowSource & txtItems & ";"

lstItems.RowSource = s

db.Execute "INSERT INTO Cast_and_Crew (Name) VALUES ('@s')" 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:06:05.647

您可以通过连接创建字符串：

```
db.Execute "INSERT INTO Cast_and_Crew (Name) VALUES ('" & s & "')" 
```

# windows - 在 Mingw Nvidia SDK 上编译 OpenCL

> ID：15185955
> 
> 赞同：13
> 
> 时间：2013-03-03T13:04:28.347
> 
> 标签：windows, mingw, opencl, gpu, nvidia

是否可以使用 Mingw 和 Nvidia SDK 编译 OpenCL？

我知道它没有得到官方支持，但这没有任何意义。这些库不是作为静态链接库提供的吗？我的意思是一旦用任何可能的编译器编译并成功链接，应该是什么问题？

我设法编译并成功地将我的代码链接到英伟达 SDK 提供的 OpenCL 库，但是可执行文件会引发分段错误，`clGetPlatformIDs`这是我代码中的第一个 OpenCL 调用。

这是我的编译命令

```
x86_64-w64-mingw32-g++ -std=c++11 File.cpp \
-L"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\lib\x64" \
-I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" \
-gcoff -lOpenCL -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32 -ladvapi32 \
-lshell32 -lole32 -loleaut32 \
-luuid -lodbc32 -lodbccp32 -luser32 -lgdi32 -lmingwex -m64 \
-DWIN32 -D_DEBUG -D_CONSOLE 
```

请注意，这些库取自示例 OpenCL 代码的 .sln 文件。

我尝试了这些库的各种组合，但似乎没有任何效果。

还有一种方法可以使用 Mingw 进行编译并使用其他东西进行链接吗？我不确定其他可能是什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-29T16:55:00.713

我们已经能够通过使用 MinGW reimp 和 dlltool 实用程序为“OpenCL.dll”DLL 创建一个导入库“libOpenCL.a”来做到这一点。以下是我们遵循的步骤：

*   第 1 步：确保已安装 mingw-utils（用于 reimp 和 dlltool）。如果你不这样做，在 MinGW 提示符下，输入：

    mingw-get 安装 mingw-utils

*   步骤 2：接下来，键入以下命令：

    重装 OpenCL.lib

这应该会产生一个 OpenCL.def 和 libOpenCL.a 文件。如果结果类似于“无效或损坏的导入库”，则替代步骤 2 应该可以工作。

*   替代步骤 2：将 dlltool 与您可以在此处找到的 .def 文件一起使用： http: [//pastebin.com/f2ac38b2f](http://pastebin.com/f2ac38b2f)。命令变为：

    dlltool -l libOpenCL.a -d OpenCL.def -A -k

您现在可以链接到新创建的 libOpenCL.a。如果您仍然看到缺少符号，请将它们添加到 .def 文件并重复 dlltool 命令。

由于以下帖子中的信息，我们能够让这一切正常工作，以供参考：

1.  [http://oscarbg.blogspot.com/2009/12/opencl-with-mingw.html](http://oscarbg.blogspot.com/2009/12/opencl-with-mingw.html)
2.  [http://www.mingw.org/wiki/CreateImportLibraries](http://www.mingw.org/wiki/CreateImportLibraries)（我只能粘贴 2 个链接）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T10:22:53.287

OpenCL 库只是 OpenCL.dll 的存根。因此，我建议使用动态加载技术。它会简单地解决你所有的问题。或者你真的需要一些 OpenCL 的 nVIDIA 调整吗？

它不仅在运行时更安全，而且更容易编译，因为您不需要链接器或定义，也不需要任何东西。只需将一个简单的 cpp/hpp 文件添加到您的项目中。

一个非常好的使用是[CLEW](https://code.google.com/p/clew/source/browse/#git/include)。但是我不完全同意该库，因为 C++ 包装器已损坏。所以也许你需要一些调整。此外，我通常禁用“atexit”代码，因为它可能会出现问题。

# search - OpenERP v7 自定义搜索过滤器

> ID：15185956
> 
> 赞同：1
> 
> 时间：2013-03-03T13:04:29.123
> 
> 标签：search, openerp

我想在产品搜索屏幕上有一组自定义的文本框和下拉菜单，人们可以在其中选择或输入过滤器值并点击搜索。下面的网格将显示符合要求标准的产品。

如何在 openerp 中实现这一点？

这是我尝试过的：

```
 <record id="product_search_form_view_custom" model="ir.ui.view">
        <field name="name">product_search_form_view_custom</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="product.product_search_form_view" />
        <field name="arch" type="xml">
               <field name="name" position="after">
                    <field name="product_type"/>
                </field>                   
        </field>
    </record> 
```

但它并没有真正出现在产品搜索屏幕的任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T10:55:07.627

搜索屏幕可以做的事情非常有限。您可以添加`filters`或 可以根据值搜索的字段。休息在“高级搜索”中。

# windows - MongoDB 复制崩溃并且不会再次启动

> ID：15185958
> 
> 赞同：2
> 
> 时间：2013-03-03T13:04:36.307
> 
> 标签：windows, mongodb

在对在 Windows Server 2008 R2 上运行的 MongoDB 2.2.3 分片执行插入操作期间，分片中的一个复制因日志文件而崩溃，如下所示。

由于问题似乎源于缺少页面文件，我尝试将其大小从 8gb 增加到 15gb，但这并没有改变我无法开始复制的情况。

这是一个已知的错误吗？有解决办法吗？

如果需要任何其他信息，请发表评论。

**崩溃期间的日志**

```
Wed Feb 27 09:02:03 [initandlisten] connection accepted from 192.168.159.29:53112 #16840 (14 connections now open)
Wed Feb 27 09:02:21 [conn16839] end connection 192.168.159.26:63150 (13 connections now open)
Wed Feb 27 09:02:21 [initandlisten] connection accepted from 192.168.159.26:63153 #16841 (14 connections now open)
Wed Feb 27 09:02:28 [repl writer worker 1] VirtualProtect for E:/MongoDB/data/api.62 chunk 8245 failed with errno:1455 The paging file is too small for this operation to complete. (chunk size is 67108864, address is 80d4000000) in mongo::makeChunkWritable, terminating
Wed Feb 27 09:02:28 [repl writer worker 1]  api.commhistory Fatal Assertion 16362
Wed Feb 27 09:02:33 [conn16840] end connection 192.168.159.29:53112 (13 connections now open)
Wed Feb 27 09:02:33 [initandlisten] connection accepted from 192.168.159.29:62053 #16842 (14 connections now open) 
```

**我试图重新启动它，但是，大约 20 秒后它再次崩溃并出现以下日志**

```
Wed Feb 27 09:22:35 [rsBackgroundSync] replSet syncing to: MASB-MGO-MGO01:27017
Wed Feb 27 09:22:35 [rsSync] replSet still syncing, not yet to minValid optime 512dcba3:c
Wed Feb 27 09:22:36 [rsSyncNotifier] replset setting oplog notifier to MASB-MGO-MGO01:27017
Wed Feb 27 09:22:37 [rsHealthPoll] couldn't connect to MASB-MGO-RPL02:27017: couldn't connect to server MASB-MGO-RPL02:27017
Wed Feb 27 09:22:41 [rsHealthPoll] couldn't connect to MASB-MGO-RPL02:27017: couldn't connect to server MASB-MGO-RPL02:27017
Wed Feb 27 09:22:45 [rsHealthPoll] couldn't connect to MASB-MGO-RPL02:27017: couldn't connect to server MASB-MGO-RPL02:27017
Wed Feb 27 09:22:46 [repl writer worker 1] VirtualProtect for E:/MongoDB/data/api.68 chunk 10164 failed with errno:1455 The paging file is too small for this operation to complete. (chunk size is 67108864, address is 9ed0000000) in mongo::makeChunkWritable, terminating
Wed Feb 27 09:22:46 [repl writer worker 1]  api.commhistory Fatal Assertion 16362
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\util\stacktrace.cpp(182)                           mongo::printStackTrace+0x3e
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\util\assert_util.cpp(126)                          mongo::fassertFailed+0x43
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\util\mmap_win.cpp(264)                             mongo::makeChunkWritable+0x342
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\util\mmap.h(274)                                   mongo::MemoryMappedFile::makeWritable+0x56
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\dur_commitjob.cpp(93)                           mongo::dur::DurableImpl::declareWriteIntent+0x5f
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\dur.cpp(239)                                    mongo::dur::DurableImpl::writingAtOffset+0x18
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\btree.cpp(406)                                  mongo::BucketBasics<mongo::BtreeData_V1>::basicInsert+0xcd
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\btree.cpp(1309)                                 mongo::BtreeBucket<mongo::BtreeData_V1>::insertHere+0xa0
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\index_insertion_continuation.h(66)              mongo::IndexInsertionContinuationImpl<mongo::BtreeData_V1>::doIndexInsertionWrites+0xda
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\index_update.cpp(146)                           mongo::indexRecordUsingTwoSteps+0x77a
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\pdfile.cpp(1546)                                mongo::DataFileMgr::insert+0x845
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\pdfile.cpp(1273)                                mongo::DataFileMgr::insertWithObjMod+0x48
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\ops\update.cpp(203)                             mongo::_updateObjects+0x4c2
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\oplog.cpp(780)                                  mongo::applyOperation_inlock+0x507
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\repl\rs_sync.cpp(84)                            mongo::replset::SyncTail::syncApply+0x245
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\db\repl\rs_sync.cpp(121)                           mongo::replset::multiSyncApply+0x65
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\mongo\util\concurrency\thread_pool.cpp(66)               mongo::threadpool::Worker::loop+0x94
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  ...\src\third_party\boost\libs\thread\src\win32\thread.cpp(180)  boost::`anonymous namespace'::thread_start_function+0x21
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(314)      _callthreadstartex+0x17
Wed Feb 27 09:22:48 [repl writer worker 1] mongod.exe  f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(292)      _threadstartex+0x7f
Wed Feb 27 09:22:48 [repl writer worker 1] 

***aborting after fassert() failure

Wed Feb 27 09:23:44 [initandlisten] connection accepted from 192.168.159.26:64223 #17 (14 connections now open)
Wed Feb 27 09:23:44 [conn3] end connection 192.168.159.24:5105 (13 connections now open)
Wed Feb 27 09:23:44 [conn10] end connection 192.168.159.25:51584 (12 connections now open)
Wed Feb 27 09:23:44 [conn11] end connection 192.168.159.22:50242 (11 connections now open)
Wed Feb 27 09:23:44 [conn15] end connection 192.168.159.26:64205 (10 connections now open)
Wed Feb 27 09:23:44 [initandlisten] connection accepted from 192.168.159.25:51595 #18 (11 connections now open)
Wed Feb 27 09:23:44 [conn5] end connection 192.168.159.23:54657 (9 connections now open)
Wed Feb 27 09:23:44 [initandlisten] connection accepted from 192.168.159.24:5118 #19 (11 connections now open)
Wed Feb 27 09:23:44 [initandlisten] connection accepted from 192.168.159.23:54671 #20 (12 connections now open)
Wed Feb 27 09:23:44 [initandlisten] connection accepted from 192.168.159.22:50255 #21 (13 connections now open)
Wed Feb 27 09:23:44 [initandlisten] connection accepted from 192.168.159.26:64230 #22 (14 connections now open)
Wed Feb 27 09:23:44 [initandlisten] connection accepted from 192.168.159.26:64237 #23 (15 connections now open)
Wed Feb 27 09:23:44 [initandlisten] connection accepted from 192.168.159.25:51602 #24 (16 connections now open)
Wed Feb 27 09:23:44 [rsHealthPoll] couldn't connect to MASB-MGO-RPL02:27017: couldn't connect to server MASB-MGO-RPL02:27017 
```

**复制服务器信息**

```
 Operating System
        Microsoft Windows Server 2008 R2 Standard 64-bit SP1
    CPU
        Intel Xeon E5 @ 2.60GHz
        Sandy Bridge-EP/EX 32nm Technology
        Intel Xeon E5 @ 2.60GHz
        Sandy Bridge-EP/EX 32nm Technology
        Intel Xeon E5 @ 2.60GHz
        Sandy Bridge-EP/EX 32nm Technology
        Intel Xeon E5 @ 2.60GHz
        Sandy Bridge-EP/EX 32nm Technology
    RAM
        8.00 GB EDO (3-3-3-?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T13:39:31.883

事实证明，这确实是由于页面文件太小而发生的。尽管将它从 8gb 增加到 15gb 并没有帮助，但将它增加到 30gb 使 MongoDB 可以正常备份。

MongoDB 不接受 DOUBLING 虚拟内存大小的事实在我看来仍然很奇怪。

所以...如果您遇到这种错误，请尝试不断增加您的虚拟内存，这应该会有所帮助。

# c - 没有全局变量的链表

> ID：15185959
> 
> 赞同：2
> 
> 时间：2013-03-03T13:04:58.580
> 
> 标签：c, linked-list

一段时间以来，我一直在尝试在 C 中创建一个链表，并且也设法做到了。现在我试图将我的全局指针/变量替换为本地指针/变量，以便在函数之间传递我的结构。问题是，我对这个主题阅读得越多，对它进行的实验越多，我收到的错误和爆炸就越多。

由于我的代码有点长（100 行），我将尝试解释它在做什么以及如何做。

我已经宣布了一个结构：

```
struct node {
    char Name[21];
    struct node *Next;
}; 
```

我还在任何函数之前宣布了一个指向我的结构的指针：

```
struct node *global; 
```

*global 不是全局指针吗？

现在我有三个函数，其中包含处理我的链表的新指针：

```
void add(void); //add nodes to list with *global, *pointer and *last
    struct node *pointer *last;
void print(void); //print node inside the list with *global and *pointer
    struct node *pointer;
void quit(void); //free malloc'd list using *global and *pointer
    struct node *pointer; 
```

对我来说很明显，我没有以任何方式将我的结构从一个函数传递到另一个函数。我只是将全局 *global 分配给函数内的本地指针，它工作正常，但不是我想要学习的。

我一直在寻找我的问题的答案，但显然我在 C 的基础知识中遗漏了一些巨大的东西。

那么，我到底应该在这里做什么？我该如何移动

```
struct node *global; 
```

在我的函数中，例如，我可以在我的主函数中创建一个链接列表，它将从中传递给函数添加、打印和退出。我如何从这些函数中返回这个列表？

另外，原始结构应该在代码的开头还是我必须在每个函数中再次创建它以避免全局指针/变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:20:11.143

> struct node* global 是一个全局指针，不是吗？

是的，指针在整个程序中都可用。

> 如何移动 struct node *global;
> 
> 在我的函数中，例如，我可以在我的主函数中创建一个链接列表，它将从中传递给函数添加、打印和退出。我如何从这些函数中返回这个列表？

您必须使用两星指针，这是描述它的伪代码

```
struct listNode {                                      
   char data;
   struct listNode *nextPtr; // pointer to next node
};

void insert(**localptr,char item);
void remove(**localptr,char item);

int main()
{
 listnode * startptr;
 ..
 insert(&startptr,'a');
 ..
 ..
 remove(&startptr,'b');
 ..

} 
```

在您的 insert()/remove() 实现中，您必须获取起始地址并在列表中导航，并在找到节点后备份下一个和上一个指针，添加或删除节点，然后恢复上一个和下一个指针，

在上面的代码中，这里在 main() 中本地创建了一个起始指针，并将地址传递给 insert()/remove() 中的双星指针，从而消除了对全局指针的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:13:56.607

基本思想是，您将所有全局指针作为参数传递给您的函数。例如，`add`变成

```
void add(node *ptr, node *last); 
```

对所有函数执行此操作，直到没有全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T13:20:50.317

尝试为您的链表定义另一个结构，如下所示：

```
struct node
{
     type value;
     node * next;
}
struct linkedList
{
    node * first;
}

void add(linkedlist a,type data){
 node * newNode ;
 newNode->value = data;
 newNode->next = a->first;
 a->first = newNode;
} 
```

等等...

然后使用链表

```
 void main()
 {
    linkedlist a;
    type x= somevalue;
    add(a,somevalue);

} 
```

# c - 打开和关闭大量文件时打开的文件过多

> ID：15185971
> 
> 赞同：2
> 
> 时间：2013-03-03T13:05:57.613
> 
> 标签：c

我正在运行一些代码，它打开多个文件以读取数据，对其进行处理，然后通过实验工具关闭文件。每次完成大量处理时，工具都会更改一些参数，然后使用更新的参数再次运行相同的代码。

当我运行少量实验时没有问题，当程序退出时，所有内存都被释放。但是，如果我尝试运行大量实验，代码总是在调用处理代码大约 1000 次后崩溃。我已经检查了我打开的每个文件在系统的每个单独部分中都`fopen`使用关闭`fclose`，但问题仍然存在，Valgrind 输出

```
==11892== Warning: invalid file descriptor 1030 in syscall open()
==11892== Warning: invalid file descriptor 1030 in syscall dup()
Could not access specified file: Too many open files 
```

经过大约 1000 次迭代，并`perror`给出“打开的文件太多”错误。为了打开更多文件，我必须做些什么来重置文件描述符计数？

编辑：在运行时查看`lsof -p`输出，似乎正在打开的文件类型是`DIR`. 我正在访问的文件位于不同的目录中。我目前正在使用`fopen("path/to/directory/file.txt", "w")`. 我需要做些什么来释放我使用的文件描述符吗？

这是输出的摘录`lsof`：

```
lt-launch 12101 michal   25r   DIR    8,1     4096 3537225 /directory/reference/20
lt-launch 12101 michal   26r   DIR    8,1     4096 3537238 /directory/reference/21
lt-launch 12101 michal   27r   DIR    8,1     4096 3537251 /directory/reference/22 
```

edit2：违规代码如下：

```
FILE *fp;

printf("Retrieving event data from file %s\n", filename);

if ((fp = fopen(filename, "r")) == NULL){
perror("Could not access specified file");
exit(1);
}

char* line = malloc(MAX_LINE_LENGTH);
char* lref = line;
double_arr* event_times = init_double_arr(DEFAULT_ARR_SIZE);

// Get data from file...

if (i == 0){// we found no events in the given interval
free_double_arr(event_times);
free(lref);
fclose(fp);
return NULL;
}
event_times->data = realloc(event_times->data, i * sizeof(double));
event_times->len = i;
fclose(fp);
free(lref);

return event_times; 
```

编辑3：虽然这点是程序崩溃的地方，但原因实际上是在代码的其他地方打开了错误的目录。请参阅下面的答案以了解问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T13:34:34.370

如果打开的文件太多，处理后不要关闭文件...

您发布的代码会关闭所有代码路径上的文件（直接`exit`ing 时除外，但这没关系），所以..我看到两种可能的情况：

*   您未发布的代码中有一个提前返回，它不会关闭文件
*   您使用其他一些代码破坏了内存，覆盖了`fp`并且因为您没有真正关闭它 - 您可以通过检查`fclose`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:48:19.870

该程序在尝试打开文件时崩溃，但问题的根源在其他地方。每个实验打开的文件都在新目录中，并且每个文件都是使用一些错误的代码创建的，该代码调用`opendir()`然后用于`free()`释放分配给`DIR`产生的指针的内存。更改`free()`呼叫以`dirclose()`解决问题。

# php - 如何用 php 绘制金字塔？

> ID：15185973
> 
> 赞同：0
> 
> 时间：2013-03-03T13:06:15.827
> 
> 标签：php

我可以使用 ASCII 艺术金字塔绘制金字塔，代码如下：

```
<center>
<?php 

$number = 10;

for($i=0;$i<$number;$i++)
{
    for($a=0;$a<$number-$i;$a++)
    {
        echo $i;
    }
    echo '<br/>';
}
?>
</center> 
```

但是如果我设置`$number`为大于 9 的值（例如 10），这将不再起作用，因为 10 是由两个字符组成的。因此，如果该数字由两个字符组成，并且本来要打印`n`几次，则应该只打印 n/2 次。

但是我不知道该怎么做，你能帮我写吗？

样本输出：

![金字塔](../Images/705b4c1f3d84fd232873a50c41934a52.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:16:52.693

```
<style type="text/css">
    div {
        width: 20px;
        display: inline-block;
    }
</style>

<center>
    <?php

    $number = 20;

    for ($i = 0; $i < $number; $i++) {
        for ($a = 0; $a < $number - $i; $a++) {
            echo '<div>' . $i . '</div>';
        }
        echo '<br/>';
    }
    ?>
</center> 
```

或者

```
<center>
    <?php

    $number = 20;

    for ($i = 0; $i < $number; $i++) {
        if ($i > 9) {
            $j = $i + round($i / 2);
        } else {
            $j = $i;
        }
        for ($a = 0; $a < $number - $j; $a++) {
            echo $i;
        }
        echo '<br/>';
    }
    ?>
</center> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-26T03:30:52.900

我只是在练习 PHP，为了扩展我的 PHP 知识，我来到这里发现了这个问题。虽然是1年前。但我找到了一个解决方案。所以，我认为解决这个问题会很容易。

```
for ($row=0; $row <= 9; $row++) {

for ($space=1; $space <= $row; $space++) {      
    echo "&nbsp;";
}

for ($col=$row; $col < 10; $col++) { 
    echo $row . " ";
}
echo "<br>"; 
```

}

### 输出是

![在此处输入图像描述](../Images/cd2e06e46f98764fb62dd32dcbebb82f.png)

# java - 允许特殊字符的正则表达式

> ID：15185975
> 
> 赞同：0
> 
> 时间：2013-03-03T13:06:28.120
> 
> 标签：java, regex

我正在使用以下模式来匹配我的字符串：

> [a-zA-Z0-9]*

即使我传递 String `*$#`，它也会被正则表达式匹配。有人可以解释我做错了什么或为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:08:53.393

您应该使用`^`（字符串的开头）和`$`（字符串的结尾）。

所以，正则表达式将是

```
^[a-zA-Z0-9]*$ 
```

* * *

`[a-zA-Z0-9]*`如果您使用method..Using将匹配字符串中的**任何位置**，并将匹配从开始到结束的整个输入`find``^``$`

如果您使用`matches`不需要的方法`^`，`$`因为它会尝试匹配整个字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T13:08:48.713

`[a-zA-Z0-9]*`表示 0 个或多个这些字符中的任何一个。如果您使用的是[Matcher.find()](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)，它会在任何地方/任何地方找到它，因为它可以匹配字符串中的任何地方。

# java - 删除列表中的所有 10，并在 JAVA 中将相同数量的 0 添加到列表末尾

> ID：15185981
> 
> 赞同：1
> 
> 时间：2013-03-03T13:07:49.653
> 
> 标签：java

我已经完成了大部分工作。任何人都给我一个小提示，告诉我如何在列表中找到 10 的数量。例如。输入将是

> [10,4,6,10,6,7]

输出必须是

> [4,6,6,7,0,0]

```
import java.util.ArrayList;
import java.util.List;

public class prob64 {
   public static List output;
   public static void getVal(List ll)
   {
       int count=0;
       List ll1=new ArrayList();
       for(int i=0;i<ll.size();i++)
       {
           if((int)ll.get(i)!=10)
           {
               ll1.add(ll.get(i));
           }
           if((int)ll.get(i)==10)
           {
               count++;
           }
       }
       if(count>0)
       {
          ll1.add(8);
       }   
       output=ll1;
       System.out.println(output);
   }

   public static void main(String[] args) {
        List<Integer> ll=new ArrayList();
        ll.add(10);
        ll.add(1);
        ll.add(10);
        ll.add(2);
        prob64.getVal(ll);
   }
} 
```

我得到的当前输出是`[1,2,0]`. 我应该得到`[1,2,0,0]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:15:02.993

`List.remove(Object)`删除第一个匹配元素。它还返回一个布尔值，指示是否确实完成了删除，所以这应该有效：

```
while(ll.remove(10)) {
  ll.add(0);
} 
```

也就是只要找到10s要去掉，就加0s。请注意，`List.add`在列表末尾添加元素，这是您的要求（如果我是正确的）。

我想这是一种学习练习，但我建议您为变量找到更好的名称（`ll`&`ll1`不会使您的函数易于阅读）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T13:17:54.813

您在循环结束时仅添加一个零（以防找到*10*）。您应该计算*10*的数量，然后*添加与该数字一样多的零*。您的程序应如下所示：

```
int count=0;
List ll1=new ArrayList();
for(int i=0;i<ll.size();i++)
{
    if((int)ll.get(i)!=10)
       ll1.add(ll.get(i));
    else
       count++;
}

for(int j=0; j<count;j++)
    ll1.add(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:10:25.177

如果`count`是要添加的 10 的数量，请使用：

```
for(int j=0; j<count;j++){
    ll1.add(8); // or ll1.add(0); ???
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T12:25:44.480

其他人在上面提到的几点要补充

1.  我看不出有什么理由必须将输出 List 定义为**static**。当您将某些东西（变量/函数）定义为静态时，它们归类而不是对象所有，并且不使用实例函数更改它们也是一种很好的编程习惯。我的意思是，如果您只想打印，则没有需要该输出实例变量。可以直接打印ll1。
2.  请在您的代码中使用泛型。当您知道列表中的所有内容都是整数时，请指定它 - 即使在函数**getVal** () 中也是如此。我不知道您的代码是如何编译的，但您**不能将 Object 转换为 int**。

    ```
    (int)ll.get(i)!=10 
    ```

    此代码将失败。尝试使用**整数**而不是 int。

3.  您的问题陈述阅读用 0 替换所有 10。那你为什么要加8呢。一定是

    ```
    ll1.add(0); 
    ```

    正如其他人指定的那样，您需要添加 0 与您的计数一样多。所以需要另一个循环。休息一切看起来不错。

# c# - AT 命令与发送方发送短信

> ID：15185983
> 
> 赞同：0
> 
> 时间：2013-03-03T13:08:06.860
> 
> 标签：c#, sms

有没有办法向 SMSC 建议发件人的姓名/短信号码？stackoverflow 中有人说无法设置发件人号码/姓名。但是我仍然可以使用 AT 命令向 SMSC 建议我要使用的号码/名称吗？我知道有一些短信网关允许选择发件人的姓名。例如。短信.aruba.it

```
this.serialPort.WriteLine("AT" + (char)(13));
Thread.Sleep(4);
this.serialPort.WriteLine("AT+CMGF=1" + (char)(13));
**this.SerialPort.Writeline("AT TO SUGGEST SENDER NAME/NUMBER")**
Thread.Sleep(5);
this.serialPort.WriteLine("AT+CMGS=\"" + cellNo + "\"");
Thread.Sleep(10);
this.serialPort.WriteLine(">" + messages + (char)(26)); 
```

# c# - 在 C# 中创建泛型接口实例的方法

> ID：15185985
> 
> 赞同：1
> 
> 时间：2013-03-03T13:08:19.123
> 
> 标签：c#, .net, generics, reflection, interface

我已经把自己编码到一个角落里，希望你能帮助我再次把我挖出来。在正确的方向。

所以，我实现了一个小的 SQLite 包装器，我希望解决方案是通用的（不是我们所有人）。之后，我现在意识到这些类和接口的使用不是很直观，也不是通用的。

让我们从底部开始向上工作。我创建了一个名为的类`DataRow`，它作为我的表行的基类。类`DataRow`本身只有一个属性`Id`（因为所有行都需要一个）。这导致以下定义：`class DataRow { public int Id { get; set; } }`

使用这个`DataRow`类，是每个表。对于数据库表，我创建了一个通用接口和一个通用基类。定义如下所示：

```
internal interface ITable<T>
    where T : DataRow, new()
{
    T Select(int id);
    List<T> Select(List<int> ids);
    int Insert(T t);
    void Update(T t);
    bool Delete(int id);
}

public class Table<T> : ITable<T>
    where T : DataRow, new()
{
    // Commented out to protect you from a minor case of serious brain damage.
} 
```

此设置允许我创建简洁的定义。事实上，它们往往是相当史诗般的，真的。自豪地说。

```
public class Car : DataRow
{
    public decimal ParkingTicketDebt { get; set; }
    public DateTime WhenWifeWillAllowReplacement { get; set; }
    public bool CanTransformIntoSomethingAwesome { get; set; }
}

public class Cars : Table<Car> {
    // Yep, that's all. You can go home now, folks. There's nothing here. Nothing at all. Especially not a great treasure of gold. Whops... I mean... there's really not. Not that I'm aware of, anyway... I mean, there could be. Not that I wouldn't say if I had any information on this great trasure of gold that might exist. But I know nothing of such an item. I really don't, so you can stop thinking about this great treasure of gold. Since I don't know anything about it, the chance that it even exist is extremely low. Miniscule. I mean, you would probably not find anything, not even if you digged for, like, a really long time. Seven years or something. Oookay. Slowly fading away...
} 
```

您可能注意到也可能没有注意到，我使用类类型名称`Cars`来确定数据库中表的名称。同样，我正在对其进行反思`Car`并使用其公共属性名称和类型来获取/设置数据库中的值。是的，我知道我正在编写实体框架的精简版本。这听起来既愚蠢又非常耗时。

无论如何，这里有一个 class 的使用示例`Cars`，我必须提醒你，我为之感到自豪：

```
new Cars().Delete(3497); // Note that I have a great number of (expensive) cars. 
```

不错，嗯？一个小问题。这意味着我必须编写强类型代码，具体到数据库中存在的表的数量。而且我不喜欢特定的代码。我喜欢通用代码。

你可能会开始争辩说我做得过火了。那么让我告诉你这个。你说得对，我是矫枉过正！我故意用火焰喷射被坦克碾过的死人。七次。

所以我开始尝试了一下，想出了这个微妙的解决方案：

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
[WebMethod(EnableSession = true)]
public int CreateEmptyRow(string tableName)
{
    var tableType = Type.GetType(tableName);
    if (tableType == null)
        throw new TypeLoadException("Dumbass. That table doesn't exist");

    var instance = Activator.CreateInstance(tableType) as ITable<dynamic>;
    if (instance == null)
        throw new TypeLoadException("Idiot. That type isn't a table");

    return instance.Insert(new DataRow());
} 
```

请注意，如果您不知道为什么有人要创建一个空行，我真的可以理解。

那么这有什么问题呢？嗯，它不编译，一方面。这是错误：`There is no implicit reference conversion from 'dynamic' to 'DataRow'`。在谷歌上搜索[几乎没有结果](http://www.google.com/search?q=%22There%20is%20no%20implicit%20reference%20conversion%20from%20dynamic%22)。

问题很明显`Activator.CreateInstance(tableType) as ITable<dynamic>`。我已经尝试过类似`Activator.CreateInstance(tableType) as ITable<Table<DataRow>>`的尝试，这给了我这个错误：`The type 'DataRow' must be convertible to 'DataRow'`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:20:43.160

因此，正如我在评论中所写，我添加了一个额外的非通用接口：

```
 interface ITable
{
    DataRow Select(int id);
    IEnumerable<DataRow> Select(List<int> ids);
    int Insert(DataRow t);
    void Update(DataRow t);

}
interface ITable<T>  where T : DataRow, new()
{
    T Select(int id);
    List<T> Select(List<int> ids);
    int Insert(T t);
    void Update(T t);
    bool Delete(int id);
}

class Table<T> : ITable<T>, ITable where T : DataRow, new()
{

    public T Select(int id)
    {
        return new T();
    }

    public List<T> Select(List<int> ids)
    {
        return new List<T>();
    }

    public int Insert(T t)
    {
        return 1;
    }

    public void Update(T t)
    {
    }

    public bool Delete(int id)
    {
        return true;
    }

    DataRow ITable.Select(int id)
    {
        return this.Select(id);
    }

    IEnumerable<DataRow> ITable.Select(List<int> ids)
    {
        return this.Select(ids);
    }

    public int Insert(DataRow t)
    {
        return this.Insert(t);
    }

    public void Update(DataRow t)
    {
        this.Update(t);
    }
} 
```

这就是我实现`CreateEmptyRow`\`Select`方法的方式：

```
 public static int CreateEmptyRow(string tableName)
    {
        var tableType = Type.GetType(tableName);
        if (tableType == null)
            throw new TypeLoadException("Dumbass. That table doesn't exist");

        var instance = Activator.CreateInstance(tableType) as ITable;
        if (instance == null)
            throw new TypeLoadException("Idiot. That type isn't a table");

        return instance.Insert(new DataRow());
    }
    public static List<DataRow> Select(List<int> ids, string tableName)
    {
        var tableType = Type.GetType(tableName);
        if (tableType == null)
            throw new TypeLoadException("Dumbass. That table doesn't exist");

        var instance = Activator.CreateInstance(tableType) as ITable;
        if (instance == null)
            throw new TypeLoadException("Idiot. That type isn't a table");

        return instance.Select(ids).ToList();
    } 
```

请注意，如果您想要这样的通用解决方案，则 select 方法（例如）只能返回一个`IEnumerable`\ `List`of `DataRow`，这可以通过使用提供的`Cast`扩展方法来解决：

```
var myList = Select(null, "Cars").Cast<Car>(); 
```

注意：您可能知道，要`Cars`通过名称实例化类，您还需要提供命名空间，我在这里跳过了，并且可能`Table<T>`该类也应该是抽象的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:35:50.107

一个问题是您试图将 a 插入`DataRow`到需要 的某个子类的表中`DataRow`，因此即使您可以编译它，您仍然会在运行时遇到异常。

您需要找到通用行类型以插入并插入该类型的新实例：

```
object instance = Activator.CreateInstance(tableType);
var tableInterface = tableType.GetInterfaces().FirstOrDefault(it => it.IsGenericType && it.GetGenericTypeDefinition() == typeof(ITable<>));
if(tableInterface == null) throw new ArgumentException("Type is not a table type");

var rowType = tableInterface.GetGenericArguments()[0];
var newRow = Activator.CreateInstance(rowType);

MethodInfo insertMethod = tableInterface.GetMethod("Insert");
return (int)insertMethod.Invoke(instance, new object[] { newRow }); 
```

但是，您似乎可以使您的`CreateEmptyRow`方法在表和行类型中通用，并完全避免反射：

```
public int CreateEmptyRow<TTable, TRow>() 
    where TRow : DataRow, new()
    where TTable : ITable<TRow>, new()
{
    var table = new TTable();
    return table.Insert(new TRow());
} 
```

# c# - In Code first INSERT 语句与 FOREIGN KEY 约束冲突

> ID：15185991
> 
> 赞同：3
> 
> 时间：2013-03-03T13:09:25.127
> 
> 标签：c#, sql, database, code-first

我刚开始使用代码优先方法来创建数据库。我有以下 3 个表：

```
public partial class AccountHolder
{
    public int AccountHolderId { get; set; }

    public virtual List<Address> Address { get; set; }
}

public partial class Nominee
{
    public int NomineeId { get; set; }

    public virtual List<Address> Address { get; set; }
}

public partial class Address
{
    public int AddressId { get; set; }

    public int AccountHolderId { get; set; }
    public AccountHolder AccountHolder { get; set; }

    public int NomineeId { get; set; }
    public Nominee Nominee { get; set; }
} 
```

这里`AccountHolder`和`Nominee`两者都`1 to *`与地址有关系。我用于此的流畅 API 代码是：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Address>().HasRequired(p => p.AccountHolder)
                                      .WithMany(p => p.Address)
                                      .HasForeignKey(p => p.AccountHolderId)
                                      .WillCascadeOnDelete(false);
        modelBuilder.Entity<Address>().HasRequired(p => p.Nominee) 
                                      .WithMany(p => p.Address)
                                      .HasForeignKey(p => p.NomineeId)
                                      .WillCascadeOnDelete(false);
    } 
```

现在我的问题是，每当我尝试在 AccountHolder 或 Nominee 中插入数据时，我都会遇到此异常：

*在 AccountHolder 插入的情况下*

> {"INSERT 语句与 FOREIGN KEY 约束 \"FK_dbo.Addresses_dbo.Nominees_NomineeId\" 冲突。冲突发生在数据库 \"CodeFirst.BankContext\"、表 \"dbo.Nominees\"、列 'NomineeId' 中。\r \n语句已终止。"}

*在被提名人插入的情况下*

> {"INSERT 语句与 FOREIGN KEY 约束 \"FK_dbo.Addresses_dbo.AccountHolders_AccountHolderId\" 冲突。冲突发生在数据库 \"CodeFirst.BankContext\"、表 \"dbo.AccountHolders\"、列 'AccountHolderId' 中。\r \n语句已终止。"}

谁能告诉我如何解决这个问题以及我在这里缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T13:14:28.253

您尝试插入 Nominee 中不存在的地址 Nominees_NomineeId。您应该首先创建 Nominee 实例，然后填充值并创建地址并填充值，最后创建 AccountHolder 实例。然后保存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:18:17.580

在您的表 dbo.AccountHolders 和 dbo.Nominees 中，它具有对另一个表的外键引用。FK 的工作方式是它不能在该列中具有不在引用表的主键列中的值。

如果您有 SQL Server Management Studio，请打开它并使用 sp_help 'dbo.dbo.Nominees'。查看 FK 在哪一列，以及它引用哪个表的哪一列。您正在插入一些错误数据。对 sp_help 'dbo.dbo.AccountHolders' 执行相同操作。

希望这可以帮助。

# android - Facebook android SDK 无法在低于 4.0 的 Android 平台版本上运行

> ID：15185997
> 
> 赞同：1
> 
> 时间：2013-03-03T13:10:01.523
> 
> 标签：android, facebook, android-facebook

我们使用 Facebook 的 Android SDK 创建了多个 Android 应用程序。它在 4.0 及以上平台上运行良好，但在以下任何平台上都无法运行（我们检查了 2.3 和 3.0）。甚至 Facebook Android SDK 3.0 也无法在 Android 2.3 和 3.0 上运行。

以下为说明： 1：点击Activity上的登录按钮。这会打开 FBDialog 进行身份验证。2：输入凭据 3：然后按回车/登录。4：相同的页面重新加载。

请让我知道是否有人面临同样的问题？

# mysql - 重启应用程序后Mysql编码中断

> ID：15185998
> 
> 赞同：0
> 
> 时间：2013-03-03T13:10:11.930
> 
> 标签：mysql, jsf-2, openshift

当我使用命令重新启动 openshift 应用程序时，`ctl_app restart`我的数据库编码中断。例如，在数据库中重新启动之前，我有文本“jabłko”，但重新启动后它是“jab?ko”。我该如何解决？应用程序是使用 jsf2 + mysql 创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:29:03.233

我已经修好了。我需要做的就是将 mysql 服务器编码更改为 utf8，方法是将其添加到 my.conf。

```
character-set-server=utf8
collation-server=utf8_unicode_ci 
```

到`mysqld`节