# StackOverflow 问答 14920000-14920999

# matlab - MATLAB：无限级数之和，具有斐波那契系数

> ID：14920008
> 
> 赞同：0
> 
> 时间：2013-02-17T10:12:44.363
> 
> 标签：matlab, fibonacci

我需要找到 f(x)，它是以下无限级数的总和：

f(x) = sum {C_{n}*x^{n}} ; 总和从 n = 0 到 Inf

C[n] 是修改后的斐波那契数列，使得 C[0] = 2、C[1] = 3 和 C[n] = C[n-1] + C[n-2]。

对于这样的 f(x)，它会收敛到 [0,1) 中 x 的自然数，我需要找到这些自然数。怎么办？

我最初通过首先定义一个长度为 1000 的向量 C 来尝试它，然后为该系列尝试 symsum，MATLAB 抛出以下错误：函数 'subsindex' 未针对 MuPAD 符号对象实现。

然后我使用'for'循环在C[n]和x的术语中定义了一个符号f。然后在 x 上运行一个循环以发现自然数。

这种方法的挑战在于，它取决于术语的数量和我选择的精度。此外，.. 这变得非常苛刻。

# c# - windows phone 市场的“Rate It”链接

> ID：14920010
> 
> 赞同：3
> 
> 时间：2013-02-17T10:13:10.480
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-store-apps

我正在介绍一个来自 WP7(c#+xna) 游戏的链接（按钮），它需要直接转到人们可以对其进行评分的 GAME RATE 屏幕。但我不确定在哪里可以找到。请让我知道我在 WP 市场的哪里可以找到我的游戏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T10:20:49.043

使用[`MarketplaceReviewTask`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394030%28v=vs.105%29.aspx)：

```
MarketplaceReviewTask marketplaceReviewTask = new MarketplaceReviewTask();

marketplaceReviewTask.Show(); 
```

# sql - SQL表结构——如何设计？

> ID：14920014
> 
> 赞同：1
> 
> 时间：2013-02-17T10:13:46.643
> 
> 标签：sql, database-design

我们目前在我们的系统中有一个设置层次结构，它允许为单个用户保存设置，一个设置组（每个用户可以绑定到一个单独的设置组，但是设置组在一个嵌套集中，所以我们向上查询树检查从父设置组继承的值）或客户级别设置（每个用户可以绑定到一个客户）。

目前我们有三个表来存储每个级别的设置值：

*   `user_setting_values`
*   `setting_group_setting_values`
*   `customer_setting_values`

管理层（也是最初编写系统的那个家伙）要求我将这些表合并到一个包含所有设置的表中。除了“把它们都放在一张桌子上是有意义的”之外，他还没有提出一个特别好的论据来做这件事。

这是个好主意吗？优缺点都有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:10:46.663

**优点：**更少的表缺点
**：**避免空值总是一个好主意，合并不同的级别通常会导致空值

如果合并到一张表中，则通常有两种实现解决方案

1.  如果每个级别的设置类型相同，则使用类型列，值反映与哪个级别数据相关，例如用户、组或客户。

2.  如果每个级别的设置类型不同，则扩展列数

Null 用于指示给定列的 N/A 值

如果设置是类型是/否，则将值存储为布尔值可能会很方便。

# android - 如何清除android缓存onCreate

> ID：14920015
> 
> 赞同：2
> 
> 时间：2013-02-17T10:13:49.167
> 
> 标签：android, caching, feed

我是 Android 开发的新手，我已经开始创建这个应用程序，我在其中读取 XML 提要并列出内容。但即使提要发生变化，我仍然会显示相同的数据。尽管一夜之间缓存似乎自行清除。我想在每次启动我的应用程序时强制阅读提要。我尝试了此处描述的方法[如何清除缓存 Android](https://stackoverflow.com/questions/6898090/how-to-clear-cache-android)，但没有帮助。

我的猜测是我必须在我的主要活动中执行 onCreate （至少这是我迄今为止尝试过的）。

谁能指出我正确的方向？

提前致谢 ：-）

以下是一些代码片段。

从我的活动：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list_game);
    deleteCache(this);
    new ReadLeagueXml().execute();
} 
```

deleteCache 是我链接到的另一个线程的方法。

然后在我的 doInBackground 我有

```
InputStream inputStream = new URL(xmlURL).openStream();

if (inputStream != null) {
    list = parse(inputStream);
} 
```

最后在我的 onPostExecute 中：

```
ListView matchListView = (ListView)findViewById(R.id.match_list);
List<String> matchArray = new ArrayList<String>();
for (int i = 0; i < matches.size(); i++) {
    matchArray.add(matches.get(i).HomeTeam + " - " + matches.get(i).AwayTeam);
}
matchArray.toArray();
matchesArrayAdapter = new MatchListAdapter(ListGameActivity.this, matches);
matchListView.setAdapter(matchesArrayAdapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:49:27.833

您的代码似乎非常好。您也不需要“清除缓存”。

现在回到问题，如果我正确理解您的问题，Feed 没有得到刷新。这是因为您在 上下载新数据`onCreate()`。因此，当您第一次启动应用程序时，数据会被下载。然后用户转到另一个应用程序（请记住，Android 不会关闭您的活动，它只会暂停它）。所以当用户回来时，如果应用程序没有关闭，Android 会恢复它！所以你`onCreate()`不会再被召唤。

简而言之，更新`onResume()`每次向用户显示您的活动时调用的数据。每次用户打开应用程序时，移动`new ReadLeagueXml().execute();`到并下载新数据。`onResume()`

您可能想在[此处查看 Android 活动生命周期](http://developer.android.com/reference/android/app/Activity.html)

# scala - Scala 和 Casbah - 错误：Option[com.mongodb.DBObject] 不带参数

> ID：14920018
> 
> 赞同：2
> 
> 时间：2013-02-17T10:14:04.630
> 
> 标签：scala, casbah

我正在尝试获取文档并获取它的属性。当我使用 findOne 方法时，我希望得到 MongoDBObject，但我收到了 Option[com.mongodb.DBObject]。如何从中获取属性？是否有可能得到 MongoDBObject 而不是这个？

```
scala> var col = MongoClient()("test")("counters")
col: com.mongodb.casbah.MongoCollection = MongoCollection({ "_id" : "some" , "value" : 0})

scala> var doc = col.findOne()
doc: Option[com.mongodb.DBObject] = Some({ "_id" : "some" , "value" : 0})

scala> doc("_id")
<console>:13: error: Option[com.mongodb.DBObject] does not take parameters
              doc("_id")
                 ^
scala> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:23:13.523

Casbah API 不知道您的数据库的内容，并且无法确定您要求的记录确实存在。在 Java 中，这样的方法将简单地返回可以是`null`. 在 Scala 中不鼓励这样做，以支持更安全的`Option[T]`类型。这样你就不得不处理对象不存在的情况。你有几种语法（从最差到最好：

### 当您确定对象存在时 - 否则将引发异常

```
col.findOne().get 
```

### 当您要处理这两种情况时：

```
col.findOne() match {
  case Some(r) => //r is your record
  case None => //record didn't exist
} 
```

### 当您想对您的记录执行某些操作时（单子风格）

```
col.findOne().map(r => r("_id")).foreach(println) 
```

仅当找到此类记录时，上面的代码才会打印该`_id`列 - 否则不执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:20:11.343

您得到一个 Option[DBObject] 是因为您尝试查找的对象可能不在数据库中。

您可以使用构造来处理它`match`：

```
col.findOne() match{
  case Some(doc) => doc("id")
  case None => // not found
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T10:20:24.917

你得到一个`Option[DBObject]`, 因为可能没有找到，并且通常你希望避免在 scala （和任何其他函数式语言）中返回 null 。有几种方法可以对结果采取行动。为了简单地获得结果，您可以调用，如果您从查询中`get`获得，这将引发异常。`None`然后是`getOrElse`，您可以使用它来获取必须传递给调用的结果或默认值。然后是`orNull`，如果没有，它会返回结果或 null。`foreach`如果您只使用结果来创建副作用，您也可以使用，或者`map`，如果您想获得某个值，然后例如调用`getOrElse`结果选项。

# c# - Web服务内委托异步函数中的会话变量

> ID：14920025
> 
> 赞同：2
> 
> 时间：2013-02-17T10:15:26.967
> 
> 标签：c#, asp.net, web-services, asynchronous, delegates

我正在用 ASP.NET 4.5 开发我的应用程序。我创建了一个委托函数，如下所示：

```
private delegate void CounterDelegate(List<int> temp, int id);
private CounterDelegate sfd;

public Foo(){
  sfd = new CounterDelegate(this.Counter);
} 
```

我这样调用函数：

```
 sfd.BeginInvoke(temp, id, null, null); 
```

目标是在异步函数中以异步方式运行“计数器”函数。这种方式效果很好。该函数是从 Web 服务中的函数调用的。我的问题是 Sessions。

我的功能：

```
[WebMethod(EnableSession = true)]
public  void Counter(List<int> temp, int id)
{
   if (Session["user"] == null)
   {
      // do something
   }
} 
```

问题是 Session 等于 null 并且当我尝试像这样初始化它时：

```
 Session["user"] = new List<int>(); 
```

我得到**NullReferenceException 未被用户代码** 异常处理。我确实尝试将其放入 try catch 并在 catch 块中对其进行初始化，问题是此后我无法继续运行代码，因为它离开了函数。

无论如何初始化和使会话变量可用，就好像我会在 web 服务中的常规非异步函数中完成它一样？

# actionscript-3 - AS3 从蓝图创建新实例

> ID：14920028
> 
> 赞同：1
> 
> 时间：2013-02-17T10:15:57.633
> 
> 标签：actionscript-3, class

我正在学习课程的运作方式，这非常复杂。我需要一个正确创建对象的示例。假设我的库中有一个 MovieClip 蓝图。它可以用作创建许多实例的示例，这些实例的名称可以进一步用作代码中的对象以更改其属性。所以假装我有一个蓝图“AppleBP”。我将它设置为 Apple 类（假设它创建了一个文件 Apple.as？）。我需要一个代码来创建（例如通过按下按钮）一个实例 Apple01，它会出现在屏幕上的随机位置（只是为了知道它与其他位置不同，我知道如何随机化位置）。然后制作 Apple02、Apple03、Apple04 和 Apple05。如果很难将名称设置为“Apple”+ N，则它'

所以现在我尝试了

```
var Apple01:Apple = new Apple();
Apple01.visible = true; //just in case I can't see it
Apple01.x = 100;
Apple01.y = 100;
TextField01.text = "blahblah"; //to see if code actually works 
```

苹果不会出现，文字会出现。那么，如果创建一个作为 MovieClip 蓝图的新类还不够，我还缺少什么？以及如何为每个新实例选择新名称，以便它具有变量 String 而不是纯名称？（这样我就可以根据它的顺序将名称更改为文本+数字）

添加：

```
package  {
import flash.display.Scene;
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.events.KeyboardEvent;
import flash.events.Event;
import flash.events.*;
import flash.display.*;

public class MyFirstClass extends MovieClip{ 

        //var N:int;
        var n:int;
        var existingApples:int = 0;
        var apples:Array = new Array();     

    public function MyFirstClass():void{
        MakeNewApple();
        MakeNewApple();
        MakeNewApple();
        MakeNewApple();
        MakeNewApple();

        //apple4.x = 5;
        //apple4.y = 5;

        var draggableApple:Apple = apples[0] ;
        draggableApple.addEventListener(MouseEvent.MOUSE_DOWN, draggableApple.onMouseDown) ;
        draggableApple.addEventListener(MouseEvent.MOUSE_UP, draggableApple.onMouseUp) ;
        info01.text = "Did it";
    }
    public function MakeNewApple():void{
        if(existingApples < 5){
        n = existingApples;
        var apple:Apple = new Apple();
        stage.addChild(apple);
        apple.x = (Math.random()*600+100);
        apple.y = (Math.random()*400+100);
        apple.name = "apple" + n;

        apples.push(apple.name);
        existingApples++;
        trace(existingApples);
        trace(apples);
        }
    }
}
} 
```

苹果.as：

```
package  {
import flash.display.MovieClip;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.events.KeyboardEvent;
import flash.events.*;
import flash.display.*;

public class Apple extends MovieClip{

    public function Apple() {

    }

    public function onMouseDown(e:MouseEvent):void{
        this.startDrag();
    }
    public function onMouseUp(e:MouseEvent):void{
        this.stopDrag();

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:29:08.347

这是评论的例子：

```
package 
{
    import flash.display.Scene;
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Main extends Sprite 
    {

        public function Main():void {   

            var apples:Array = new Array() ; // Declare and array
            for (var i:int = 0 ; i < 10 ; i++) { //Let's make 10 apples
                var apple:Apple = new Apple() ; //Create an apple
                apple.x = Math.ceil(Math.random() * stage.stageWidth)  ; //Assign random x
                apple.y = Math.ceil(Math.random() * stage.stageHeight) ; //Assign random y
                stage.addChild(apple) ; //Add it to stage, so we can see them
                apples.push(apple) ; //Push into array
            }
            //EDITED
            var draggableApple:Apple = apples[0] ;
            draggableApple.addEventListener(MouseEvent.MOUSE_DOWN, draggableApple.onMouseDown) ;
            draggableApple.addEventListener(MouseEvent.MOUSE_UP, draggableApple.onMouseUp) ;

        }

    }

} 
```

和 Apple.as

```
package {
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;

public class Apple extends MovieClip {

    public function Apple() {
        this.graphics.lineStyle(2) ;
        this.graphics.beginFill(0x00FF40) ;
        this.graphics.drawCircle(0, 0, 20) ;
        this.graphics.endFill() ;

        //addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown) ;
        //addEventListener(MouseEvent.MOUSE_UP, onMouseUp) ;
    }

    public function onMouseDown(event:MouseEvent):void {
        this.startDrag() ;
    }

    public function onMouseUp(event:MouseEvent):void {
        this.stopDrag() ;
    }
}
} 
```

*   此外，所有变量的名称必须以小写字母开头。我的变量
*   类名必须实现 CamelCaseClass
*   常量名只包含大写字母和下划线。MY_CONSTANT

# robotlegs - 事件重复

> ID：14920032
> 
> 赞同：1
> 
> 时间：2013-02-17T10:16:30.563
> 
> 标签：robotlegs

在我的 Robotlegs 应用程序中，服务结果通常必须保存在模型中。这将创建具有相同有效负载类型的事件对：

1.  将数据从服务传送到命令，
2.  将数据从模型传送到中介

我想知道如何命名这些事件。想象一下我有一个服务：

```
FooService.getProducts() 
```

然后我有一个模型：

```
BarModel.setProducts()
BarModel.getProducts() 
```

在检索产品集合后，为**服务**调度的事件命名的最佳方法是什么？

在调用**模型**后命名由模型调度的事件的最佳方法是什么？`BarModel.setProducts()`

或者也许我应该使用具有两种不同类型的单个事件：

```
public class ProductEvent extends Event
{
    public const SERVICE_PRODUCT_CHANGE:String = 'serviceProductChange';
    public const MODEL_PRODUCT_CHANGE:String = 'modelProductChange';
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:03:36.447

对于服务，我喜欢指示成功或失败的事件/信号，因为服务经常与由于各种原因而容易失败的外部资源联系。

`MyServiceLoadSuccess`和`MyServiceLoadFailure`

我认为，即使您的服务悄然失败，成功的想法对服务也是有意义的。

对于模型，他们往往需要知道如何转换数据，他们也可能会失败，但实际上他们正在做出决策，然后为视图或其他模型准备数据，并且通常只是发送更新。

`MyModelUpdate`

显然，您的具体情况对您选择的语义很重要，但我发现这是一种有用的模式，并且通常适用于各种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:07:21.847

我制定了自己的命名方案来回答我的问题。

首先，最常使用事件在参与者之间传播数据：

*   服务 > 模型
*   模型 > 调解员
*   调解员>模型

其次，不同的事件携带不同的数据类型。第三，相同的数据通常必须传递两次：服务>模型>中介。

基于此，我决定将我的活动命名为：

```
<class>Event_<payload> 
```

where`class`是调度事件的类的`payload`名称，并且是更改的公共属性的名称。例如：

*   ProductServiceEvent_products
*   ProductModelEvent_products
*   ProductViewEvent_products

每个事件只有一种类型，称为`CHANGE`。

# android - 改变文本android的可见性

> ID：14920033
> 
> 赞同：0
> 
> 时间：2013-02-17T10:16:30.380
> 
> 标签：android

嗨，我有两个 textView，我最初将其可见性设置为消失，然后进行动画处理并变为可见。现在我想再次使隐形但由于某种原因它们仍在屏幕上显示有人不知道为什么吗？

在我的 onCreate() 中，我使视图消失了

```
register = (TextView)findViewById(R.id.register);
        register.setVisibility(View.GONE);
        forgotpassword = (TextView)findViewById(R.id.forgotpw);
        forgotpassword.setVisibility(View.GONE); 
```

然后我让它可见

```
public void run() 
            {
               animations();
               loginForm.setVisibility(View.VISIBLE);
               register.setVisibility(View.VISIBLE);
               forgotpassword.setVisibility(View.VISIBLE);
            } 
```

然后当用户按下按钮时，我希望文本视图变得不可见，以便它们保留其布局但它们在屏幕上保持可见

```
signInBtn = (Button) findViewById(R.id.signin);
        signInBtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                signInProcess();
            }
        });

 public void signInProcess() { 

     register.setVisibility(View.INVISIBLE);
     forgotpassword.setVisibility(View.INVISIBLE);
     setuploader.setVisibility(View.VISIBLE); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:36:42.060

在 Android 中，当您为某些东西设置动画时，它只是在其他地方绘制。实际元素不会移动。因此，当您制作动画时，`signInBtn`它会在其他地方绘制，但实际按钮并未从原始位置移动。因此，当您单击按钮时，不会调用单击处理程序。

为避免在动画中设置此设置`fillAfter = True`，以便在动画结束时实际移动按钮。

此外，在 Android 中为视图设置动画后，请确保`View.clearAnimation()`在尝试更改其可见性之前调用。

# objective-c - 在 ARC 项目中使用非 ARC 静态库？

> ID：14920034
> 
> 赞同：0
> 
> 时间：2013-02-17T10:16:34.000
> 
> 标签：objective-c, xcode, cocoa, automatic-ref-counting

好的，这几乎就是我想要做的。

*   我有一个充满函数的巨大静态库，它必须是 NON-ARC（因为错误）。
*   现在我的应用程序*必须*启用 ARC。
*   但是：当我尝试编译我的应用程序时，它会抛出与我使用 NON-arc 库相关的所有错误。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:22:41.990

将 ARC 与 MRC 结合起来根本不是问题。事实上，你每天都在这样做，因为许多系统框架还没有使用 ARC 实现。

那么，你的错误是什么？

# iphone - iPhone应用程序中的工具栏

> ID：14920035
> 
> 赞同：2
> 
> 时间：2013-02-17T10:16:42.903
> 
> 标签：iphone, user-experience

我目前正在开发一个 iphone 应用程序，其中有一个包含 Web 视图的屏幕。我想知道在哪里放置工具栏（后退、前进和刷新按钮），我知道出于一致性原因我必须保留导航栏，并且我的应用程序中始终显示标签栏。我不想将工具栏放在导航栏下方，以免为网页内容腾出空间。我可以在导航栏中包含我的工具栏控件（后退、前进和刷新按钮）还是违反 iOS 指南？这里最好的用户体验是什么？

提前致谢。此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:13:28.073

将工具栏放在屏幕底部。在导航栏上有浏览器控件不会是一个很好的用户体验，因为很容易将导航栏“返回”与浏览器“返回”混淆，并且通常没有足够的 rooom。

如果你这样做了，你会成为一个很好的伙伴——这就是 Facebook iPhone 应用程序（以及许多其他应用程序）所做的事情。

注意：iPad Facebook 应用程序确实在导航栏的 RHS 上放置了一些浏览器控件，因为有足够的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:01:52.197

您应该使用工具栏，但`controller.hidesBottomBarWhenPushed = YES`在 Web 视图控制器上进行设置，以便您的标签栏在 Web 视图中不可见。

您可能还应该使用[https://github.com/samvermette/SVWebViewController](https://github.com/samvermette/SVWebViewController)并为自己节省大量时间；）

# c++ - CUDA 内核与 Julia 集的 CPU 版本相比性能缓慢

> ID：14920038
> 
> 赞同：2
> 
> 时间：2013-02-17T10:16:56.840
> 
> 标签：c++, cuda

我正在从“CUDA by example”[一书中](https://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0)学习 CUDA 。在第 4 章中，有一个生成 Julia 分形的演示。该展示展示了 CPU 和 GPU 版本。我决定添加一个时间来查看这两种情况的执行速度和令我惊讶的是，CPU 版本的执行速度比 GPU 快 3 倍。

**CPU Julia 生成总时间：**

745 毫秒。

**GPU Julia 生成总时间：**

2456 毫秒。

那么发生了什么 ？很明显，至少从 CUDA 内核代码来看，执行是并行的，因为分布在 1000 个块中，每个块计算 1000x1000 分辨率最终图像的像素。

下面是实现的源代码：

```
 #define N 10
 #define DIM 1000
 typedef unsigned char byte;

struct cuComplex {
   float   r;
   float   i;
   __host__ __device__ cuComplex( float a, float b ) : r(a), i(b)  {}
   __host__  __device__ float magnitude2( void ) {
          return r * r + i * i;
   }
   __host__ __device__ cuComplex operator*(const cuComplex& a) {
        return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i);
   }
    __host__ __device__ cuComplex operator+(const cuComplex& a) {
        return cuComplex(r+a.r, i+a.i);
   }
};

 __device__ int juliaGPU(int x , int y){
    const float scale =1.3;
    float jx = scale * (float)(DIM/2 -x)/(DIM/2);
    float jy=  scale *(float)(DIM/2 -y)/(DIM/2);

    cuComplex c(-0.8 ,0.156);
    cuComplex a(jx ,jy);
    int i = 0;
    for(i=0; i <200;i++){
        a = a * a +c;
        if(a.magnitude2() >1000){

            return 0;
        }
    }
    return 1;

 }

 __global__ void kernelGPU(byte *ptr){
    int x = blockIdx.x;
    int y = blockIdx.y;
    int offset =x + y * gridDim.x;

    int juliaValue =juliaGPU(x , y);
    ptr[offset * 4 + 0]=255 * juliaValue;
    ptr[offset * 4 + 1]=0;
    ptr[offset * 4 + 2]=0;
    ptr[offset * 4 + 3]=255 ;
}

 struct DataBlock {
    unsigned char   *dev_bitmap;
};
 void juliaGPUTestSample(){
 DataBlock   data;
CPUBitmap bitmap(DIM,DIM);
byte *dev_bitmap; //memory on GPU 
HANDLE_ERROR(cudaMalloc((void**)&dev_bitmap , bitmap.image_size()) );
data.dev_bitmap =dev_bitmap;
dim3 grid(DIM,DIM);
int starTime=glutGet(GLUT_ELAPSED_TIME);

kernelGPU<<<grid ,1 >>>(dev_bitmap);
HANDLE_ERROR(cudaMemcpy(bitmap.get_ptr() , dev_bitmap ,bitmap.image_size() ,cudaMemcpyDeviceToHost ) );
int endTime=glutGet(GLUT_ELAPSED_TIME)-starTime;
printf("Total time %d\n:" ,endTime);
HANDLE_ERROR(cudaFree(dev_bitmap));

bitmap.display_and_exit();
 }

 int main(void){
juliaGPUTestSample();
return 1;

 } 
```

**这是CPU版本：**

/// “cuComplex” 结构与上面的相同。

```
int julia (int x , int y){

const float scale = 1.3;
float jx = scale * (float)(DIM/2 -x)/(DIM/2);
float jy = scale * (float)(DIM/2 -y)/(DIM/2);

cuComplex c(-0.8 ,0.156);
cuComplex a(jx ,jy);

int i = 0;
for(i=0; i <200;i++){

    a = a * a +c;
    if(a.magnitude2() >1000){

        return 0;
    }
}

return 1;

}

void kernel(unsigned char *ptr){

for(int y = 0 ; y <DIM ;++y){
    for(int x = 0 ; x <DIM ; ++x){
        int offset =x + y * DIM;
        int juliaValue = julia(x , y);

        ptr[offset * 4 + 0 ] = juliaValue * 125;
        ptr[offset * 4 + 1 ] = juliaValue * x;
        ptr[offset * 4 + 2 ] = juliaValue * y;
        ptr[offset * 4 + 3 ] = 255 ;
    }
}

}
void juliaCPUTestSample(){

CPUBitmap bitmap(DIM ,DIM);
unsigned char *ptr = bitmap.get_ptr();
int starTime=glutGet(GLUT_ELAPSED_TIME);

kernel(ptr);

int endTime=glutGet(GLUT_ELAPSED_TIME)-starTime;
printf("Total time %d\n:" ,endTime);
bitmap.display_and_exit();

} 
```

**更新系统配置：**

视窗 7 64 位

CPU - Intel i7 -3770CPU 3.40GHz ,16GB RAM

GPU - 英伟达 Quadro 4000

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T23:11:22.637

其他人已经[注意到了这一点](https://stackoverflow.com/questions/14602900/gpu-gives-no-performance-improvement-in-julia-set-computation/14604750#14604750)。

首先，在谈到 CPU 和 GPU 之间的性能比较时，最好提及系统配置，包括硬件平台和软件。例如，我在一台配备核心 i7 2.60GHz 四核 CPU 和 quadro1000M GPU、运行 RHEL 6.2 和 cuda 5.0 的 HP 笔记本电脑上运行您的代码，我的 GPU 得分为 438，CPU 得分为 441。

其次，更重要的是，那本书中的 julia 示例是一个相对较早的 CUDA 编码示例，因此它并不是真正面向最大性能，而是为了说明到目前为止已经讨论过的概念。该书和其他各种 CUDA 教程材料首先介绍了在**块级别**使用 CUDA 进行并行编程。这一点的迹象在这里：

```
kernelGPU<<<grid ,1 >>>(dev_bitmap); 
```

内核启动参数`<<<grid, 1>>>`表明将启动一个包含一定数量（`grid`，在本例中为 100 万个总块）块的网格，每个块*都有一个线程*。这立即降低了 Fermi 级 GPU 的功率，例如，与启动每个线程块具有完整线程的网格相比，降低了 1/32 倍。Fermi 级 GPU 中的每个 SM 都有 32 个线程处理器，所有处理器都同步执行。如果您启动一个只有 16 个线程的块，那么 16 个线程处理器将执行您的代码，而其他 16 个线程处理器将什么都不做（即没有任何用处）。因此，仅包含 1 个线程的线程块将仅使用 32 个线程处理器中的 1 个，其他 31 个处于*空闲状态*。

因此，这个特定的代码示例没有经过精心设计以利用 GPU 的完全并行能力。鉴于书中对CUDA概念的阐述相对较早，这是可以理解的；我不相信作者的意图是让这些代码进行基准测试或用作如何在 GPU 上编写快速代码的合法表示。

考虑到这个 1/32 的因素，在您的系统上 CPU 的速度只有 3 倍，而在我的系统上 CPU 和 GPU 具有相当的吞吐量（这些都不是特别高性能的 CUDA GPU，很可能）我认为它以相当不错的方式显示了 GPU。GPU 正在与大约 97% 的功能未使用的情况下进行战斗。

# c++ - Windows C++：获取驱动程序设备 ID

> ID：14920042
> 
> 赞同：1
> 
> 时间：2013-02-17T10:17:29.803
> 
> 标签：c++, windows, driver, device-driver

我正在编写一个应该检查驱动程序设备 ID 的 C++ 程序。

我的输入是应该出现在设备管理器中的驱动程序名称。

我试着谷歌，我想：

*   我可以使用此示例代码[http://msdn.microsoft.com/en-us/library/ms682619%28VS.85%29.aspx获取驱动程序指针](http://msdn.microsoft.com/en-us/library/ms682619%28VS.85%29.aspx)

*   我应该使用 IRP_MN_QUERY_ID 函数来获取设备 ID - [http://msdn.microsoft.com/en-us/library/windows/hardware/ff551679(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551679(v=vs.85).aspx)。

但是，我找不到任何示例或代码片段来说明如何实际执行它，以及这两个函数如何连接？

我在驱动程序方面没有经验，将非常感谢示例代码...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T08:50:51.980

在 Windows 上没有设备 ID（如 name =)）。设备按硬件 ID 和兼容 ID 匹配。从此 ids 系统生成实例 id - 唯一标识总线上特定端口上的设备。[通过使用 IoGetDeviceProperty 函数（ http://msdn.microsoft.com/en-us/library/windows/hardware/ff549203(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549203(v=vs.85).aspx)），您可以在不发送 IRP 的情况下获取硬件/兼容 ID ，它` s 比汇总您自己的 IRP 更容易。

# c++ - 对象的 C++ 向量，创建空对象时的内存使用

> ID：14920048
> 
> 赞同：0
> 
> 时间：2013-02-17T10:18:36.360
> 
> 标签：c++

C ++ Vector - 它的一部分指向相同的地址

嗨，我的主题可能令人困惑。

就这样吧。

我有一个矢量图

```
struct node{
int nodeid;
vector<string> data;
vector<fTable> fdata;
}

struct fTable{
int index;
int key;
}

vector<node> myNode; 
```

就像在某些功能上...

```
void chord::someFunc(int nodeid)
{
    node myTempNode;
    vector<string> data1;
    vector<fTable> fdata1;

    myTempNode.nodeid = nodeid
    myTempNode.data = data1;
    myTempNode.fTable = ftable1;

myNode.push_back(myTempNode);
myTempNode.clear();
} 
```

我将创建 10000 个对象，此时，我只获得了 nodeid 的值。

但是对于数据和 fTable，我设置为一些空字符串向量和空 fTable 向量，但我想知道我是否创建了 10000 个对象并做同样的事情。

我是在创建 10000 个空字符串和 fTable 向量吗

有没有办法可以将所有这些对象指向相同的字符串向量（空值）和 fTable 向量（空值），这样我就可以节省一些记忆。考虑到我将或可能创建 10000 个节点左右。内存消耗对我来说是一个问题。

**感谢所有帮助。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:34:23.717

不，因为向量是空的，所以它们不会占用太多空间，也不会创建字符串或 fTable 对象。

提供您有限的 C++ 知识，我会远离指针并坚持价值观。

您不需要执行任何（立即）以下操作，节点的构造函数会处理这些。这只是用空向量覆盖空向量。

```
node myTempNode;
vector<string> data1;
vector<fTable> fdata1;

myTempNode.data = data1;
myTempNode.fTable = ftable1; 
```

如果你给你的节点一个这样的构造函数：

```
struct node{
    int node(int id) : nodeid(id) {}
    int nodeid;
    vector<string> data;
    vector<fTable> fdata;
} 
```

那么你只需要写：

```
myNode.push_back( node(nodeid) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:33:52.683

是的，然后使用指针向量，即

```
struct node {
    node(int nid) : nodeid(nid), data(0), fdata(0) { }
    int nodeid;
    vector<string *> data;
    vector<fTable *> fdata;
} 
```

但是要注意内存管理：现在当一个节点被删除时，data和fdata指向的字符串和fTable并没有被删除。如果这些数据一旦分配就应该归一个节点所有，添加一个析构函数：

```
struct node {
    node(int nid) : nodeid(nid), data(0), fdata(0) { }
    ~node() {
        for (auto i = data.begin(); i != data.end(); ++i)
            delete *i;
        for (auto i = fdata.begin(); i != fdata.end(); ++i)
            delete *i;
    }
    int nodeid;
    vector<string *> data;
    vector<fTable *> fdata;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:37:36.383

创建向量并不总是创建它的数据：向量的数据是在需要时分配的，因此没有数据的向量可能会占用`sizeof(std:vector<...>)`字节（如果保留大小为 0），而有数据的向量将实际占用`sizeof(vector<...>) + n * sizeof(data)`，其中 n是向量中保留项目的数量。在我的实现中，向量的大小为 28 个字节。

*第一种方法*：向量作为字段。具有向量字段的优点是它们不是动态分配的，从而使您免于大量`new/delete`手动调用：它更安全。

*第二种方法*：您也可以使用指针，如您所说：

```
struct node
{
    int nodeid;
    vector<string>* data; // pointer
    vector<fTable>* fdata; // pointer
}; 
```

您可以将它们设置为 0（空），以保存向量的大小减去每个节点的指针大小。当您需要一个节点有一个向量时，只需`new`一个向量，并设置适当的指针。但是，这种方法最终会比以前占用更多的空间，因为它也会占用指针的大小。并且您将必须管理删除（可以使用节点析构函数来完成，但在节点销毁之前释放向量的效率可能较低）。

*结论*：我建议你估计你的数据占用的总大小（例如：10000 * ...），看看你是否必须使用特定的模型（即先测量）。就个人而言，我建议你采取第一个（没有指针）。

我还建议您为节点使用一个（或两个）构造函数，以获得更好的代码。

# java - 使用正则表达式从字符串中删除一些额外的文本

> ID：14920050
> 
> 赞同：0
> 
> 时间：2013-02-17T10:18:42.397
> 
> 标签：java, regex, sms, masking

我正在构建 SMS 网关，如果 SMS 消息在将其保存到数据库之前有任何凭据信息（例如密码），我想在其中屏蔽它。

这是代码：

```
String message = "Your password is [MASK:1234]!";

boolean bMasked = message.matches("(\\[MASK:)*(\\])");
String plainText = message.replaceAll(..., "");
String withStars = message.replaceAll("...", "*");

System.out.println("bMasked: " + bMasked);
System.out.println("plainText: " + plainText);
System.out.println("withStars:  " + withStar); 
```

我对正则表达式的了解很差，所以如果可能的话，我需要你的帮助才能获得以下输出：

```
bMasked: true
plainText: Your password is 1234!
withStars: Your password is ****! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:30:06.910

```
String message = "Your password is [MASK:1234]!";

boolean bMasked = message.matches(".*\\[MASK:[^\\]]*\\].*");
String plainText = message.replaceAll("\\[MASK:([^\\]]*)\\]", "$1");
String withStars = message.replaceAll("\\[MASK:[^\\]]*\\]", "******");

System.out.println("bMasked: " + bMasked);
System.out.println("plainText: " + plainText);
System.out.println("withStars:  " + withStars); 
```

给你：

```
bMasked: true
plainText: Your password is 1234!
withStars:  Your password is ******! 
```

# ajax - Ember - 中止 ajax 请求

> ID：14920052
> 
> 赞同：2
> 
> 时间：2013-02-17T10:19:03.250
> 
> 标签：ajax, xmlhttprequest, ember.js, ember-data

我想知道如何中止请求。

例如，我发出`App.MyModel.find()`，后来我想在它从服务器返回之前取消/中止它。我会期待这样的事情：

```
var res = App.MyModel.find();   //request sent to server
res.abort();                    // abort the request before completion 
```

但这不起作用 - 返回的对象是 a`promise`并且既没有`abort`也没有`cancel`方法。

### 澄清

我正在寻找如何[`abort`](http://www.w3.org/TR/XMLHttpRequest/#the-abort%28%29-method)在底层`XMLHttpRequest`对象上调用该方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-02T23:15:52.560

对于那些想知道如何做到这一点的人，这里是我取消 jquery ajax 请求的方法。

首先，我在我的应用商店中定义了一个新方法，它将在我的自定义 RESTAdapter 上调用 cancelQuery。

```
App.Store = DS.Store.extend({
  cancelQuery: function(type){
    var adapter = this.adapterFor(this.modelFor(type).modelName);
    if(typeof adapter.cancelQuery === 'function'){
      adapter.cancelQuery();
    }
  }
}); 
```

在我的自定义 RESTAdapter 中，我定义了这个新函数并像这样覆盖 ajaxOptions：

```
App.YOURMODELAdapter = DS.RESTAdapter.extend({
  jqXHRs: [],
  ajaxOptions: function(url, type, hash) {
    // Get default AjaxOptions
    var ajaxOptions = this._super(url, type, hash);

    // If the function was defined in the DS.RESTAdapter object,
    // we must call it in out new beforeSend hook.
    var defaultBeforeSend = function(){};
    if(typeof ajaxOptions.beforeSend === 'function'){
      defaultBeforeSend = ajaxOptions.beforeSend;
    }
    ajaxOptions.beforeSend = function(jqXHR, settings){
      defaultBeforeSend(jqXHR, settings);
      this.jqXHRs.push(jqXHR); // Keep the jqXHR somewhere.
      var lastInsertIndex = this.jqXHRs.length - 1;
      jqXHR.always(function(){
        // Destroy the jqXHRs because the call is finished and 
        // we don't need it anymore.
        this.jqXHRs.splice(lastInsertIndex,1);
      });
    };

    return ajaxOptions;
  },
  // The function we call from the store.
  cancelQuery: function(){
    for(var i = 0; i < this.jqXHRs.length; i++){
      this.jqXHRs[i].abort();
    }
  }
}); 
```

现在，您可以`cancelQuery`在控制器的上下文中调用。

```
this.store.cancelQuery('yourmodel'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:33:22.227

我相信，当你打电话时`App.MyModel.find()`，它会返回你 a `RecordArray`，而不是 a `promise`。

通过查看 RESTAdapter 的 ember-data 源代码，我认为没有办法在您的`XMLHttpRequest`对象上调用 abort。

您可以实现自己的 RESTAdapter：

```
var myRESTAdapter = DS.Adapter.create({
  find: function (store, type, id) {
    var req = $.ajax({
      url:      type.url,
      dataType: 'jsonp',
      context:  store,
      success:  function(response){
        this.load(type, id, response.data);
      }
    });
    req.abort();
  },
  findAll: function(store, type) {
    var req = $.ajax({
      url:      type.url,
      dataType: 'jsonp',
      context:  store,
      success:  function(response){
        this.loadMany(type, response.data);
      }
    });
    req.abort();
  }
}); 
```

`XMLHttpRequest`并在对象中调用 abort 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T10:29:17.183

Http是请求-响应交互。请求一旦发送，就无法取消。你可以通过一些方式忽略服务器的响应；

# php - 如何获取 Safari 的“阅读器模式”等内容新闻

> ID：14920053
> 
> 赞同：1
> 
> 时间：2013-02-17T10:19:08.330
> 
> 标签：php

Safari 有一个**“阅读器模式”**，它可以从网站中删除除文本之外的所有内容。

现在我需要从站点获取 HTML 源代码，然后使用**PHP**获取真实的内容新闻，例如 Safari 的“阅读器模式” ！你能帮助我吗？？:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T21:11:05.933

有人指出，简单地发布另一个帖子的链接并不是很有帮助，所以我正在更新。从那以后，我开始使用 Arc90 可读性的 PHP 端口，它工作得非常好。

这是 Readability.js 的 PHP 端口的链接：http: [//www.keyvan.net/2010/08/php-readability/](http://www.keyvan.net/2010/08/php-readability/)

下面是一个简单的实现示例：

```
$url = 'http://';
$html = file_get_contents($url);

if (function_exists('tidy_parse_string')) {
    $tidy = tidy_parse_string($html, array(), 'UTF8');
    $tidy->cleanRepair();
    $html = $tidy->value;
}

// give it to Readability
$readability = new Readability($html, $url);
// echo $readability->html;
// echo htmlspecialchars($tidy($readability->html, true));

// print debug output?
// useful to compare against Arc90's original JS version -
// simply click the bookmarklet with FireBug's console window open
$readability->debug = false;
// convert links to footnotes?
$readability->convertLinksToFootnotes = false;

$readability->lightClean = false;
// $readability->revertForcedParagraphElements = false;

// process it
$result = $readability->init();
// store reference to dom content processed by Readability
$content = $readability->getContent();

echo '<h1>'.$readability->getTitle()->textContent.'</h1>';
echo $content->innerHTML; 
```

## 在上面展开

如果你想打开这个工作的页面数量，我发现你可以在传递给 Readability 之前 curl 并为 html 定义用户代理，你会得到更好的结果。加入一些重定向跟踪，它甚至更好。

这是我使用的函数，而不是 file_get_contents：

```
function getData($url) {
    $url = str_replace('&amp;', '&', urldecode(trim($url)) );
    $timeout = 5;
    $cookie = tempnam('/tmp', 'CURLCOOKIE');
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; rv:1.7.3) Gecko/20041001 Firefox/0.10.1');
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_ENCODING, '');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_AUTOREFERER, true);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
    $content = curl_exec($ch);
    curl_close ($ch);
    return $content;
} 
```

执行：

```
$url = 'http://';
//$html = file_get_contents($url);
$html = getData($url);

if (function_exists('tidy_parse_string')) {
    $tidy = tidy_parse_string($html, array(), 'UTF8');
    $tidy->cleanRepair();
    $html = $tidy->value;
}

$readability = new Readability($html, $url);

//... 
```

# regex - 函数中的 Vim 转义字符

> ID：14920054
> 
> 赞同：0
> 
> 时间：2013-02-17T10:19:11.993
> 
> 标签：regex, vim

如何转义正则表达式`\([''"]\)\(.\{-}\)\1`并`*test` 在以下函数中

```
:%s/.*/\=substitute(submatch(0),"\([''"]\)\(.\{-}\)\1","*test","g")/ 
```

第一个正则表达式匹配每行引号之间的任何内容，并将其替换为与同一行的第二个正则表达式匹配的内容

谢谢，最好的

编辑：示例：

```
select "foo" as subject from table where [subject_test]=true
union
select "bar" as subject from table where [subject_test]=true 
```

应该成为

```
select "foo" as subject from table where [subject_foo]=true
union
select "bar" as subject from table where [subject_bar]=true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:44:55.163

不知道我是否正确理解了你的问题。

使用该功能`substitute()`时，除了使用 eg 时，还有其他模式规则`:s///`。
看到这个：[:h 替代（）](http://vimdoc.sourceforge.net/htmldoc/eval.html#substitute%28%29)
其中的一些部分：

> ...
> 但是与 {pat} 的匹配**总是像设置了 'magic' 选项**并且 'cpoptions' 为空（使脚本可移植）一样。'ignorecase' 仍然是相关的。不使用'smartcase'。
> ...
> 请注意，{sub} 中的某些代码具有特殊含义|sub-replace-special|。例如，要将某些内容替换为“\n”（两个字符），请使用“\\n”或“\n”。

不清楚如何使用特殊的正则表达式代码，但如果您对模式字符串使用双引号，它们应该与双反斜杠一起使用，`"\\"`表示字符`\`，并且与`'\'`. **这些在使用函数**替代（）
时应该是等价的： 而我最喜欢的是使用（“非常神奇”），所以我不必反斜杠一些正则表达式： **`'\([a-z]\)'`
`"\\([a-z]\\)"`
`\v`
`"\\v([a-z])"`**

 **你的例子应该是（**我没有考虑你的模式是否正确**）

```
substitute(submatch(0), '\v([''"])(.{-})\1', "*test", "g")
Or:
substitute(submatch(0), "\\v(['\"])(.{-})\\1", "*test", "g") 
```

棘手的部分是，在函数替代（）中，您将模式用作字符串，这不是在例如命令行中通常使用模式时的情况`:s///`。

* * *

**编辑（再次由于 OP 的评论）：**
不能说我理解你的例子的使用，但我忍不住尝试用你问题中的 ex 命令修复它（我正在尝试同时了解VIM）。这是一个有效的命令，并给出了你想要的结果，但同样，我不明白它的用途是什么。
但似乎问题真的是要学习如何在字符串中转义正则表达式。
如果“字符串”总是在要替换的内容之前（并且`test`每个“”只替换一个）：

```
:%s/\v"([^"]+)".*_\zstest/\1/g 
```

**解释**

*   `\zs`=开始比赛，`\v`=使用“非常神奇”
*   `"([^"]+)"`“匹配”除`"`（最少 1 个）和之间`"`的所有字符（ `"`
    “真正的匹配”尚未开始，但括号中的匹配将作为子匹配编号 1）
*   `.*`直到下一个表达式的所有字符：
*   `_\zstest`"match" `_test`，但`\zs`在此之后开始“真正的匹配”，所以只有`test`那个会被替换。
*   `/\1/`替换为子匹配号 1

**已更改**这不是“安全的”，我添加了一些更长的匹配项（来自**@Kent**的回答），并确保仅处理了已`"<any characters>"`处理的行。
如果“字符串”可以在替换之前或之后

```
:g/\v"[^"]+"/y w | s/\v\[\w*_\zstest\ze\]/\=matchstr(@w, '\v"\zs[^"]+\ze"')/g 
```

**解释**

*   `\v`=“非常神奇”
*   `g/\v"[^"]+"`使用具有`"<some text>"`
*   `/y w`将线路拉到 reg。`w`（而不是使用 getline()）
*   `|`再有一个命令
*   `\zs`= 开始匹配，`\ze`= 结束匹配（比使用前瞻等更快）
*   `\w`与使用相同`[0-9A-Za-z_]`
*   `\[\w*_\zstest\ze\]`"match" `[<almost any characters>_test]`，但要替换的“真正匹配”是`test`因为`\zs`and`\ze`
*   `matchstr(str, match)`返回`match`in`str`
*   `matchstr(@w, '\v"\zs[^"]+\ze"')`获取行间`"`和`"`行间的字符（使用 reg `w`）
*   ...并用它来替换匹配的`test`
*   `/g``[<almost any characters>_test]`为该行中所有出现的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:54:56.230

你可以吗？

```
%s/\[.\{-}_\zstest\ze\]/\=split(getline('.'), '"')[1]/ 
```

这也有效（以您的示例为例），并且简单明了：

```
%s/\[subject_test\]/\="[subject_".split(getline("."),'"')[1]."]"/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:44:12.357

为了转义在替代函数中使用的字符，我使用`escape()`

```
Escape the characters in {chars} that occur in {string} with a backslash.

Example: 
     :echo escape('c:\program files\vim', ' \')  
Results in:  
    c:\\program\ files\\vim 
```

例如，您可以使用`escape('\([''"]\)\(.\{-}\)\1','\')`.
这将扩展为：`\\(['"]\\)\\(.\\{-}\\)\\1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T17:05:09.693

在 VimL 中，单引号字符串不会插入反斜杠，而双引号字符串会。

`:echo '\'`因此，请注意和之间的区别`:echo "\\"`。在您的示例中，您使用了双引号，并且由于您没有关闭魔法，因此您有很多转义要做。看`:help magic`......自从我发现了`\v`，人们告诉我，我在身边更愉快。**

# java - 用于运行/停止程序的 for 循环

> ID：14920055
> 
> 赞同：0
> 
> 时间：2013-02-17T10:19:12.107
> 
> 标签：java, for-loop, char, compare

我正在编写一个比较两个整数的程序，我希望程序运行直到用户感到疲倦并想要退出，为此用户将输入 q 退出。我想编写一个while循环来比较两个字符，一个是用户输入的字符，另一个是分配给它的'q'。但是，当我输入 q 时，我的程序崩溃了，为什么会这样，我该如何解决

```
import java.io.IOException;
import java.util.Scanner;

public class numComp {

public static void main(String[] args) {

    Scanner in = new Scanner(System.in);
    int a, b; 
    char key  = 'q';
    System.out.println("enter 'q' to quit program and any other key to start it");

    char btn = 0;
    try {
        btn = (char) System.in.read();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    while (btn != key){
    System.out.println("enter two numbers to compare them");
    System.out.println("please enter first number:");
    a = in.nextInt();
    System.out.println("please enter second number:");
    b = in.nextInt();

    if (a==b)
        System.out.println("the numbers you entered are the same");
    else if (a>b)
        System.out.println("your first number is greater then your second number by "+ (a-b));
    else
        System.out.println("your first number is smaller then your second number by "+ (b-a));
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:23:29.687

你的循环应该是这样的：

```
try{  
    btn = (char) System.in.read();
    while (btn != key){
    System.out.println("enter two numbers to compare them");
    System.out.println("please enter first number:");
    a = in.nextInt();
    System.out.println("please enter second number:");
    b = in.nextInt();

   if (a==b)
      System.out.println("the numbers you entered are the same");
  else if (a>b)
      System.out.println("your first number is greater then your second number by "+ (a-b));
  else
     System.out.println("your first number is smaller then your second number by "+ (b-a));

   System.out.println("enter 'q' to quit program and any other key to start it again");
   btn = (char) System.in.read();
  } // END OF WHILE LOOP
} catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
} 
```

`while`另请注意，您需要在循环结束之前再次从用户那里获取输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:24:06.897

那是因为在 while 循环中，您正在扫描整数，但“q”是一个字符。您需要让用户有机会在 while 循环中`btn` **阅读**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:23:09.280

`btn`检查时需要更改。您只在循环之前设置一次，并且永远不会更新。

例外是因为

```
a = in.nextInt(); 
```

`int`当您输入 a 时，您尝试阅读`char`。

您需要在循环末尾添加如下内容：

```
btn = (char) System.in.read(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T10:35:11.737

这是简化的程序。

```
public static void main(String[] args){
    // Scanner
    Scanner s = new Scanner(System.in);
    // Enter the program
    System.out.println("enter 'q' to quit program and any other key to start it");
    int a, b;
    try {
        char key;
        while ((key = s.next().charAt(0))!='q'){
            System.out.println("enter two numbers to compare them");
            System.out.println("please enter first number:");
            a = s.nextInt();
            System.out.println("please enter second number:");
            b = s.nextInt();

            if (a==b)
                System.out.println("the numbers you entered are the same");
            else if (a>b)
                System.out.println("your first number is greater then your second number by "+ (a-b));
            else
                System.out.println("your first number is smaller then your second number by "+ (b-a));
        }
    } catch (Exception e){ e.printStackTrace(); }
} 
```

# python - 为什么在 tornado.gen 中使用生成器？

> ID：14920057
> 
> 赞同：0
> 
> 时间：2013-02-17T10:19:15.183
> 
> 标签：python, generator, tornado

抱歉这个愚蠢的问题，我想了解在龙卷风中使用生成器替换回调的原因，生成器如何在非阻塞操作中有用？

我认为生成器仅在返回大量项目时才有用，因此为了节省内存，我们避免使用迭代器并逐个生成一个元素，那么如果只有一个元素要返回，非阻塞调用的好处在哪里（例如 http回复）？

如果我有这个简单的例子：

```
class GenAsyncHandler(tornado.web.RequestHandler):
@tornado.web.asynchronous
@tornado.gen.engine
def get(self):
    http_client = tornado.httpclient.AsyncHTTPClient()
    response = yield tornado.gen.Task(http_client.fetch, "http://www.google.fr")
    self.write(str(response))
    self.finish() 
```

结果是：

```
HTTPResponse(code=200,request_time=0.4440000057220459,buffer=<_io.BytesIO object at 0x000000000316A728>,_body=None,time_info={},request=,effective_url='http://www.google.fr',headers={'X-Xss-Protection': '1; mode=block', 'Set-Cookie': 'PREF=ID=6e27eda171946585:FF=0:TM=1361200384:LM=1361200384:S=7VncGsz1u8j_UL1a; expires=Wed, 18-Feb-2015 15:13:04 GMT; path=/; domain=.google.fr,NID=67=qv6MUCQCGJ5mnofKWdySxo8NoThLfCr9oFlme8S95w2CNqQe__tW6ql3RzqItvfbFxzxCYLZ0OINzFvE7mIDJbXOjjhld0ahQrxfzizkdNhymcI9oAGK0dotqDHwhtR2; expires=Tue, 20-Aug-2013 15:13:04 GMT; path=/; domain=.google.fr; HttpOnly', 'Expires': '-1', 'Server': 'gws', 'Connection': 'close', 'Cache-Control': 'private, max-age=0', 'Date': 'Mon, 18 Feb 2013 15:13:04 GMT', 'P3p': 'CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."', 'Content-Type': 'text/html; charset=ISO-8859-1', 'X-Frame-Options': 'SAMEORIGIN'},error=None) 
```

这个结果是否被拆分为“暂停”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:37:13.157

不，您的结果不是因为它只会在您调用 flush 时发送。

使用生成器，您不需要创建另一个函数，例如，如果您有一个表单，然后想将它异步保存在您的数据库中，您不需要传递它以在您的视图中呈现它。

```
@web.asynchronous
@gen.engine
def post(self):
    form = inscription.Particulier(TornadoDict(self))
    form.application = self.application
    if form.validate():
        password = passwords.encode(self.get_argument('password'),
                                   self.get_argument('email'))
        values = (self.get_argument('email'),
                  password,
                  self.get_argument('nom'),
                  self.get_argument('prenom'),
                  self.get_argument('adresse'),
                  self.get_argument('ville'),
                  self.get_argument('telephone'),
                  self.request.remote_ip,)
        cursor = yield momoko.Op(self.db.execute,
                    sql.INSERT_PROFILE_PARTICULIER,
                    (values))
        result = cursor.fetchone()[0]
        if result[0] == 'ok':
            form[result[0]].errors.append(result[1])
            self.render('inscription/particulier.html', form=form)
        else:
            self.redirect('/app')
    else:
        self.render('inscription/particulier.html', form=form) 
```

# c# - 通过 Youtube API V3 发送视频分享消息

> ID：14920069
> 
> 赞同：1
> 
> 时间：2013-02-17T10:21:09.800
> 
> 标签：c#, youtube-api, youtube-channels, youtube.net-api

有谁知道如何在新的 Youtube API V3 中发送视频共享消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:25:27.703

看起来消息传递系统还没有在 v3 中实现。Google 仍在开发 YouTube API 的第 3 版，因此目前尚未包含所有功能。它仍然存在于 v2 中。

看看这里：[https ://developers.google.com/youtube/v3/](https://developers.google.com/youtube/v3/)

# c# - System.Timers.Timer 启用和 GarbageCollector

> ID：14920070
> 
> 赞同：2
> 
> 时间：2013-02-17T10:21:11.027
> 
> 标签：c#, .net, timer, garbage-collection

在我的项目中，我创建了 `System.Timers.Timer`对象，并且间隔设置为 10 分钟。每 10 分钟，我就会收到经过的事件。在这个事件处理程序中，我正在执行一些代码。

在执行此代码之前，我将`Enabled`属性设置为等于，`false`因为如果处理程序的执行时间比下一个时间间隔长，则另一个线程执行 elapsed 事件。

这里的问题是事件突然`Elapsed`停止。

我已经阅读了一些文章并怀疑将启用属性设置为 false 垃圾收集器的时刻会释放计时器对象。

如果正确，请告诉我解决方案。

下面是示例代码：

```
public class Timer1
{
    private static System.Timers.Timer aTimer;

    public static void Main()
    {
        // Create a timer with a ten second interval.
        aTimer = new System.Timers.Timer(10000);

        // Hook up the Elapsed event for the timer.
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

        // Set the Interval to 10min.
        aTimer.Interval = 600000;
        aTimer.Enabled = true;

        Console.WriteLine("Press the Enter key to exit the program.");
        Console.ReadLine();
    }

    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        aTimer.Enabled = false;

        // excutes some code

        aTimer.Enabled = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:29:49.943

由于您的类中有一个字段指向您的计时器对象，因此 GC 不会收集计时器对象。

但是您的代码可能会引发异常，这可能会阻止该`Enabled`属性再次变为真。为了防止这一点，你应该使用一个`finally`块：

```
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    aTimer.Enabled = false;
    try
    {
        // excutes some code
    }
    catch(Exception ex)
    {
        // log the exception and possibly rethrow it
        // Attention: never swallow exceptions!
    }
    finally
    {
        aTimer.Enabled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:31:18.350

您可以设置同步对象，在这种情况下，经过的只会发生在该对象的所有者线程上，没有并发。此处发布了一个类似的问题： [Do C# Timers elapse on a separate thread？](https://stackoverflow.com/questions/1435876/do-c-sharp-timers-elapse-on-a-separate-thread)

# c# - 剪贴板查看器：WM_DRAWCLIPBOARD 有时会触发多次

> ID：14920072
> 
> 赞同：0
> 
> 时间：2013-02-17T10:21:20.683
> 
> 标签：c#, clipboard, clipboardmanager

我以标准建议的方式创建了一个剪贴板查看器，如下所示编辑 WndProc。

```
 case WM_DRAWCLIPBOARD:

                Logger.Main.LogMessage("Draw Clipboard event");
                if (OnClipboardChanged != null) {
                    OnClipboardChanged(this, new ViewChangeEventArgs());
                }
                WindowAPI.SendMessage(NextClipboardViewer, m.Msg, m.WParam, m.LParam);
                break;

            case WM_CHANGECBCHAIN:

                Logger.Main.LogMessage("Change CB Chain");
                if (m.WParam == NextClipboardViewer) {
                    NextClipboardViewer = m.LParam;
                }
                else {
                    WindowAPI.SendMessage(NextClipboardViewer, m.Msg, m.WParam, m.LParam);
                }
                break; 
```

当剪贴板中有新数据可用时，我的应用程序只需要得到通知。一切正常，消息被正确检测到。

有时（这很难重现）我会收到大量 WM_DRAWCLIPBOARD 生成的事件，这些事件使用相同的时间戳生成，与剪贴板中的相同数据相关联。知道什么可能导致这种情况吗？有关如何获取有关这些消息的更多信息的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-29T14:29:26.693

您需要创建一个全局来存储您上次读取的剪贴板数据。然后，在您的情况下 WM_DRAWCLIPBOARD: 方法，与上次读取相比，仅在数据不同时处理。

# angularjs - 将 HTML 更改绑定到模型

> ID：14920078
> 
> 赞同：0
> 
> 时间：2013-02-17T10:22:17.597
> 
> 标签：angularjs

我有一个包含导航菜单结构的数据结构。

```
function linksRarrange($scope, linksData) {
    $scope.links = [
        {
            text: 'Menu Item 1',
            url: '#',
            submenu: []
        }, {
            text: 'Menu Item 2',
            url: '#',
            submenu: [
                {
                    text: 'Sub-menu Item 3',
                    url: '#',
                    submenu: []
                }, {
                    text: 'Sub-menu Item 4',
                    url: '#',
                    submenu: [
                        {
                            text: 'Sub-sub-menu Item 5',
                            url: '#',
                            submenu: [
                                {
                                    text: 'Sub-sub-menu Item 6',
                                    url: '#',
                                    submenu: []
                                }
...

    ];
} 
```

我正在使用 jQuery UI 重新排列它们。问题是我不确定在这种情况下如何使用 2 路绑定，以便`links`在更改时更新对象。

这是 HTML：

```
<div class="nav-manage clearfix" ng-app="linksManager">

    <div
        class="links-arrange"
        ng-controller="linksRarrange"
        ng-init="submenu = links;"
    >
        <ul
            class="ng-list-level"
            model-subset="submenu"
            ui-jq="sortable"
            ng-include="'inner-list.html'"
        ></ul>
    </div>

    <script type="text/ng-template" id="inner-list.html">

        <li ui-jq="droppable" ng-repeat="link in submenu">
            <a href="{{link.url}}">{{link.text}}</a>
            <ul
                class="ng-list-level"
                ng-class="{'empty hidden': !link.submenu.length}"
                ui-jq="sortable"
                ng-init="submenu = link.submenu;"
                ng-include="'inner-list.html'"
            ></ul>
        </li>

    </script> 
```

这是 jQuery UI 直通：

```
linksManager.value('ui.config', {
    jq: {
        sortable: {
            connectWith: '.ng-list-level',
            dropOnEmpty: true,
            placeholder: 'sortable-nav-items-placeholder'
        },
        droppable: {
            tolerance: 'touch',
            over: function () {
                $(this).children('ul.hidden').removeClass('hidden');
            },
            out: function () {
                $(this).children('ul.empty').addClass('hidden');
            },
            drop: function () {
                $(this).children('ul.empty').removeClass('empty');
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:41:57.733

我自己有点 Angular 新手，但是嘿，让我们一起学习吧。

好好看看[AngularUI 的 Sortable Directive](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/sortable/sortable.js)，它实际上只是 jQueryUI 可排序插件的 AngularJS 包装器。

我还发现[这篇类似教程的文章](http://css.dzone.com/articles/drag-and-drop-angularjs-using)涵盖了相同的主题（使用 jQueryUI 的带角度的可排序插件，并让绑定工作）。

Basically, in your directive's linking function, you use `scope.$watch` to keep an eye on changes to your model, and you use `scope.$apply` to update your model when the elements are sorted via the plugin.

# python - 如何创建 sqlalchemy 到 json

> ID：14920080
> 
> 赞同：8
> 
> 时间：2013-02-17T10:22:26.597
> 
> 标签：python, json, sqlalchemy

我有一个 sqlalchemy 结果

```
labels = session.query(
         LabelsData, 
         LabelsData.id, 
         LabelsData.name, 
         LabelsData.color
         ).filter(LabelsData.deleted==False).all() 
```

我想将此结果转换为 JSON，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-18T03:24:17.177

看起来您的`LabelsData`对象是 SQLAlchemy 模型。在将其转储到 JSON 之前，您需要对其进行序列化。这是一个简短的示例，它从对象中提取所有列`LabelsData`并将查询结果转换为 JSON：

```
from json import dumps
from sqlalchemy.orm import class_mapper

def serialize(model):
  """Transforms a model into a dictionary which can be dumped to JSON."""
  # first we get the names of all the columns on your model
  columns = [c.key for c in class_mapper(model.__class__).columns]
  # then we return their values in a dict
  return dict((c, getattr(model, c)) for c in columns)

# we can then use this for your particular example
serialized_labels = [
  serialize(label)
  for label in session.query(LabelsData).filter(LabelsData.deleted == False)
]
your_json = dumps(serialized_labels) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T03:49:33.240

```
from collections import OrderedDict

class DictSerializable(object):
    def _asdict(self):
        result = OrderedDict()
        for key in self.__mapper__.c.keys():
            result[key] = getattr(self, key)
        return result 
```

从[这里开始](http://piotr.banaszkiewicz.org/blog/2012/06/30/serialize-sqlalchemy-results-into-json/)，似乎需要[simplejson](http://github.com/simplejson/simplejson)。希望有帮助...

更新：再看一眼，它是一本字典，您**可以**通过 python 中的任何 json 模块转储它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-26T04:27:52.080

看起来 sqlalchemy 已经有一个 [http://docs.sqlalchemy.org/en/latest/core/serializer.html](http://docs.sqlalchemy.org/en/latest/core/serializer.html)

```
from sqlalchemy.ext.serializer import loads, dumps
metadata = MetaData(bind=some_engine)
Session = scoped_session(sessionmaker())

# ... define mappers

query = Session.query(MyClass).filter(MyClass.somedata=='foo').order_by(MyClass.sortkey)

# pickle the query
serialized = dumps(query)

# unpickle.  Pass in metadata + scoped_session
query2 = loads(serialized, metadata, Session)

print query2.all() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-29T00:37:06.243

这篇博文提供了我所采用的解决方案：http: [//blogs.gnome.org/danni/2013/03/07/generating-json-from-sqlalchemy-objects/](http://blogs.gnome.org/danni/2013/03/07/generating-json-from-sqlalchemy-objects/)

使用的策略是将 .todict 方法直接包含到 Base mixin 中，该方法迭代父类的 sqlalchemy 列。

或者，如果您尝试通过网络对数据进行序列化但不一定需要它[作为](https://stackoverflow.com/a/19602809/837575)[json](https://stackoverflow.com/users/260242/nande) .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-04T14:29:47.707

我添加了这个anwser，因为它是@mekarpeles 和@hd1 的混合体。我的意思是我没有修改对象的 sqlalchemy 层次结构，只是委托给一个简单的[JSONEncoder](https://docs.python.org/3/library/json.html)：

```
# given that you have 
Base = declarative_base()

class SqlAlchemyModelEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, Base):
            result = OrderedDict()
            for key in obj.__mapper__.c.keys():
                result[key] = getattr(obj, key)
            return result
        return json.JSONEncoder.default(self, obj) 
```

如果您的模型使用不可序列化的类（例如日期时间），则必须将它们添加到 Encoder ：

```
if isinstance(obj, datetime):
    return obj.isoformat() 
```

然后我将它与 jinja2 上下文过滤器一起使用：

```
@contextfilter
def tojson(ctx, model, *elements, **kw):
    return json.dumps(model, cls=SqlAlchemyModelEncoder) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-22T19:45:29.150

[https://github.com/TaylorHere/PythonSerializer](https://github.com/TaylorHere/PythonSerializer)
上面的链接可以帮助你，它是一个小脚本，可以简单地将 sql 查询结果序列化为 list 或 dict ，就像这样：

```
#Useage with flask and SQLalchemy
from serializer import serializer
def my_location():
    if request.method == 'GET':
        user = db_session.query(User).filter(
        User.openid == session['user_id']).first()
        addresses = user.addresses
        return jsonify({'data': serializer(addresses.instance, 'sqlalchemy')}) 
```

# java - Maven GPG 插件未签名源和 javadoc jar

> ID：14920081
> 
> 赞同：6
> 
> 时间：2013-02-17T10:22:31.170
> 
> 标签：java, maven, pom.xml, gnupg, sonatype

我正在尝试使用 Maven 将我的项目的工件发布到 Sonatype。我正在使用 Maven GPG 插件对工件进行签名，但它没有对 Sonatype 所需的源代码和 javadoc jar（只是主 jar）进行签名。以下是我认为 pom.xml 的相关部分：

```
<plugins>
    ...
    <plugin>
        <artifactId>maven-source-plugin</artifactId>
            <executions>
                <execution>
                    <id>attach-sources</id>
                    <phase>install</phase>
                    <goals>
                        <goal>jar-no-fork</goal>
                    </goals>
                </execution>
            </executions>
    </plugin>
    <plugin>
        <artifactId>maven-javadoc-plugin</artifactId>
        <executions>
            <execution>
                <id>attach-javadocs</id>
                <phase>install</phase>
                <goals>
                    <goal>jar</goal>
                </goals>
                </execution>
        </executions>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-gpg-plugin</artifactId>
        <executions>
            <execution>
                <id>sign-artifacts</id>
                <phase>verify</phase>
                <goals>
                    <goal>sign</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
    ...
</plugins> 
```

有没有办法告诉它也签署这些其他罐子？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T19:58:50.453

这些对 pom 的更改解决了这个问题：

```
<plugins>
    ...
    <plugin>
        <artifactId>maven-source-plugin</artifactId>
            <executions>
                <execution>
                    <id>attach-sources</id>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
    </plugin>
    <plugin>
        <artifactId>maven-javadoc-plugin</artifactId>
        <executions>
            <execution>
                <id>attach-javadocs</id>
                <goals>
                    <goal>jar</goal>
                </goals>
                </execution>
        </executions>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-gpg-plugin</artifactId>
        <version>1.4</version>
        <executions>
            <execution>
                <id>sign-artifacts</id>
                <phase>verify</phase>
                <goals>
                    <goal>sign</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
    ...
</plugins> 
```

# c# - XML 读取子节点

> ID：14920082
> 
> 赞同：7
> 
> 时间：2013-02-17T10:22:35.613
> 
> 标签：c#, xml

我有一个 XML 文档，我正在尝试获取一个名为的元素的子节点`Unit`

我的 XML Doc 的布局如下：

```
<Unit>
    <id>3</id>
    <name>System Information</name>
    <description>null</description>
    ... other ...
</Unit> 
```

这是我用来尝试阅读它们的代码。

```
public void Load()
{
    FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read);
    XmlDocument xmldoc = new XmlDocument();
    XmlNodeList xmlnode;

    xmldoc.Load(fs);
    xmlnode = xmldoc.GetElementsByTagName("Units");

    for (int i = 0; i < xmlnode.Count; i++)
    {
        string str = string.Format("ID: {0}\r\nName:{0}", xmlnode[i].ChildNodes.Item(0).InnerText, xmlnode[i].ChildNodes.Item(1).InnerText);
        MessageBox.Show(str);
    }
} 
```

但问题是，当我尝试获取它们时，它不是获取项目 0 或项目 1，而是显示所有项目而不是我选择的项目。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T10:27:06.660

正如我从您的 xml 和代码中看到的那样。你有错误：

```
 xmlnode = xmldoc.GetElementsByTagName("Units"); 
```

改变它：

```
 xmlnode = xmldoc.GetElementsByTagName("Unit"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-17T10:38:38.317

使用 Linq to Xml，您可以轻松地将 xml 解析为（匿名）强类型对象：

```
public void Load()
{
    FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read);

    var xdoc = XDocument.Load(fs);
    var units = from u in xdoc.Descendants("Unit")
                select new {
                   Id = (int)u.Element("id"),
                   Name = (string)u.Element("name")
                };

    foreach(var unit in units)
    {
       // thanks God for IntelliSense!
       MessageBox.Show(String.Format("ID:{0}\r\nName:{1}", unit.Id, unit.Name));
    }
} 
```

好吧，实际上如果您只需要在消息框中显示这些值，您甚至可以将所有代码写在一行中。但我更喜欢第一种方法，当检索数据并显示它们时是分开的（最好是在单独的方法中）：

```
XDocument.Load(filePath)
         .Descendants("Unit")
         .Select(u => String.Format("Id:{0}\nName:{1}", (int)u.Element("id"), (string)u.Element("name"))
         .ToList()
         .ForEach(MessageBox.Show); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-17T10:28:34.467

您在元素名称中有错字：应该是`Unit`而不是`Units`.

但是，您是否尝试过使用 LINQ to XML 而不是`XmlDocument`?

```
public void Load()
{
    var doc = XDocument.Load(filePath);

    foreach(var unit in doc.Descendants("Unit"))
    {
        string str = string.Format("ID: {0}\r\nName:{0}", unit.Element("id").Value, unit.Element("name").Value);
        MessageBox.Show(str);
    }
} 
```

# android - Android 自定义主题不适用于 ExpandableListView

> ID：14920085
> 
> 赞同：1
> 
> 时间：2013-02-17T10:23:03.493
> 
> 标签：android, android-theme

我创建了一个自定义样式

 ````
<style name="PrivatStyle" parent="Theme.Sherlock">

    <item name="android:textColor">@color/default_text_color</item>
    <item name="android:textAppearance">@style/MyTextAppearance</item>
    <item name="android:buttonStyle">@style/MyButtonStyle</item>
    <item name="android:editTextStyle">@style/MyEditTextStyle</item>
    <item name="android:imageButtonStyle">@style/MyImageButtonStyle</item>
    <item name="android:textViewStyle">@style/MyTextViewStyle</item>
    <item name="android:expandableListViewStyle">@style/MyExpandableListViewStyle</item>
    <item name="android:listViewStyle">@style/MyListViewStyle</item>

</style>

<style name="MyTextAppearance" parent="@android:style/TextAppearance">
    <item name="android:textColor">@color/default_text_color</item>
</style>

<style name="MyButtonStyle" parent="@android:style/Widget.Button">
    <item name="android:textColor">@color/default_text_color</item>
</style>

<style name="MyEditTextStyle" parent="@android:style/Widget.EditText">
    <item name="android:textColor">@color/default_text_color</item>
</style>

<style name="MyExpandableListViewStyle" parent="@android:style/Widget.ExpandableListView">
    <item name="android:textColor">@color/default_text_color</item>
</style>

<style name="MyListViewStyle" parent="@android:style/Widget.ListView">
    <item name="android:textColor">@color/default_text_color</item>
</style>

<style name="MyImageButtonStyle" parent="@android:style/Widget.ImageButton">
    <item name="android:textColor">@color/default_text_color</item>
</style>

<style name="MyTextViewStyle" parent="@android:style/Widget.TextView">
    <item name="android:textColor">@color/default_text_color</item>
</style> 
```` 

在 manifest 中所有活动的样式都设置为这个

它适用于 TextView、Button、ListView、EditText，但不适用于 ExpandableListView。

ExpandableListView 是来自 group.xml 和 child.xml 的自定义布局。

如果在 group.xml 和 child.xml 中设置样式 - 一切正常。

# android - 尝试计算自定义组件中的文本宽度时出现 NullPointerException

> ID：14920088
> 
> 赞同：1
> 
> 时间：2013-02-17T10:23:14.223
> 
> 标签：android, custom-controls

我有一个扩展的自定义控件`RelativeLayout`。里面我有一个`ImageButton`和一个`TextView`。这是代码的一部分：

```
 public CustomImageButton(Context context) {
            super(context);
            ((Activity)getContext()).getLayoutInflater().inflate(R.layout.custom_image_button, this);
            this.setClickable(false);
            setupViewItems();
        }

        public CustomImageButton(Context context, AttributeSet attrs) {
            super(context, attrs);
            ((Activity)getContext()).getLayoutInflater().inflate(R.layout.custom_image_button, this);
            this.setClickable(false);
            TypedArray attributes = context.obtainStyledAttributes(attrs, R.styleable.CustomImageButton);
            setAttributes(attributes);
            setupViewItems();
            attributes.recycle();
        }
    private void setupViewItems() {
            final ImageButton imageButton = (ImageButton) findViewById(R.id.image_button);
            final TextView textView = (TextView) findViewById(R.id.text_view);

            final String text = this.text;
            final int paddingTopPercentage = this.textTopPadding;
            final int textAlignment = this.textAlignment;

            textView.setText(text);
            textView.setTextSize(this.textSize);
            textView.setTextColor(this.textColor);

            ViewTreeObserver vto = imageButton.getViewTreeObserver();
            vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                public boolean onPreDraw() {
                    int imageHeight = imageButton.getMeasuredHeight();
                    int imageWidth = imageButton.getMeasuredWidth();

                    boolean isTextInCorrectSize = true;
                    int textWidth = 0;
                    do {

                        if (!isTextInCorrectSize)
                            textView.setTextSize(textView.getTextSize() - 1f);

                        Rect bounds = new Rect();
                        Paint textPaint = textView.getPaint();
// BUG HERE - I GET A NULL POINTER EXCEPTION WHEN RUNNING getTextBounds function
                        textPaint.getTextBounds(text, 0, text.length(), bounds);
                        //int textHeight = bounds.height();
                        textWidth = bounds.width();
                        isTextInCorrectSize = (imageWidth - textWidth) > 0; 

                    }while(!isTextInCorrectSize);

                    //DOING SOME STUFF HERE
                    return true;
                }
            });
        } 
```

我不知道它是否相关，但是在应用程序的某些部分中，此控件直接添加到布局 xml 中，有时我需要以编程方式添加组件（因此有 2 个不同的构造函数）。如果自定义组件是通过布局 xml 添加的 - 那么我没有任何问题，但是当我通过代码添加自定义组件时，我在执行 getTextBounds 函数时得到 NullPointerException（参见上面的代码）。当我调试和评估所有参数和调用该函数的 textView 时 - 没有什么是空的。关于为什么以及如何克服这个问题的任何想法？
谢谢

**编辑：**这是堆栈跟踪：

```
'java.lang.NullPointerException' with message 'null'. Stack trace:
        com.company.product.ui.views.CustomImageButton$1.onPreDraw(CustomImageButton.java:155)
        android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:571)
        android.view.ViewRoot.performTraversals(ViewRoot.java:1259)
        android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
        android.os.Handler.dispatchMessage(Handler.java:99)
        android.os.Looper.loop(Looper.java:123)
        android.app.ActivityThread.main(ActivityThread.java:3687)
        java.lang.reflect.Method.invokeNative(Native Method)
        java.lang.reflect.Method.invoke(Method.java:507)
        com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
        com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
        dalvik.system.NativeStart.main(Native Method)

    *****************
    ****** GMT Time: 17 Feb 2013 13:09:36 GMT
    ****** Application name: AppName
    ****** User agent: (Android 2.3.3)
    ******************************
    ****** Exception type: java.lang.NullPointerException
    ****** Exception message: null
    ****** Trace trace:
        com.company.product.ui.views.CustomImageButton$1.onPreDraw(CustomImageButton.java:155)
        android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:571)
        android.view.ViewRoot.performTraversals(ViewRoot.java:1259)
        android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
        android.os.Handler.dispatchMessage(Handler.java:99)
        android.os.Looper.loop(Looper.java:123)
        android.app.ActivityThread.main(ActivityThread.java:3687)
        java.lang.reflect.Method.invokeNative(Native Method)
        java.lang.reflect.Method.invoke(Method.java:507)
        com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
        com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
        dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:39:30.263

问题在于您在类的构造函数（您调用`setupViewItems()`）中检索 TextView 的大小（边界），这是您无法做到的，因为 Android 尚未绘制它并因此确定了大小。[相反，您必须通过覆盖View.onSizeChanged()](http://developer.android.com/reference/android/view/View.html#onSizeChanged%28int,%20int,%20int,%20int%29)方法来调整/检索视图项的大小 。即使是第一次调整 View 的大小，Android 也会调用此方法。

# c# - 填充序列化字典

> ID：14920090
> 
> 赞同：0
> 
> 时间：2013-02-17T10:23:25.927
> 
> 标签：c#, dictionary, xml-serialization

希望我可以在将字典序列化为 Xml 文件时寻求一些帮助。

我从数据库中提取数据，它显示如下，并希望在 Xml 文件中。

![在此处输入图像描述](../Images/e625698cb2b2213681a5dde36fcb4d62.png)

这是我打算序列化的类（对象）以及将列表序列化为的方法。

```
public class Product
{
    static public void SerializeToXMLCollection(List<Product> products)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(List<Product>));
        string path = string.Concat(Environment.CurrentDirectory, "../../Products.xml");
        TextWriter textWriter = new StreamWriter(path);
        serializer.Serialize(textWriter, products);
        textWriter.Close();
    }

    public Guid guid
    {
        get;
        set;
    }

    public Dictionary<string, List<string>> MyDictionary
    {
        get;
        set;
    } 
```

这是查询以及我用来添加每个 Product 实例的列表

```
List<Product> products = new List<Product>();

while (dbread.Read())
        {

            Product p = new Product();

            string code = (string)dbread["ProdId"];
            string Subject = (string)dbread["Subject"];
            string GeneralSubject = (string)dbread["GeneralSubject"];
            p.guid = Guid.NewGuid();

            if (dict.ContainsKey(code))
            {
                dict[code].Add(Subject);

            }
            else
            {

                dict.Add(code, new List<string> { Subject, GeneralSubject});

            }
            //I assign the dict object to myDictionary in the Product class
            p.MyDictionary = dict;
            //now I add the entire object to List<Product> products so as to serialize this list   
            products.Add(p); 
```

最后我尝试序列化列表

```
Product.SerializeToXMLCollection(products); 
```

但我得到一个 InvalidOPerationException。

我怎样才能序列化这个对象？我认为问题可能是该对象包含字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:33:24.997

我相信 DataContractSerializer 支持 Dictionary 对象。我什至记得在某些时候使用过它，但似乎找不到我自己的任何例子。

但是这里的官方文档页面上有一些示例：http: [//msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)

否则，您可能需要使用支持 XML 序列化的替换 Dictionary 类，例如[http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)

# struts2-jquery - 需要在Struts2框架中实现jquery

> ID：14920094
> 
> 赞同：0
> 
> 时间：2013-02-17T10:24:26.597
> 
> 标签：struts2-jquery

我需要在 Struts2 框架中实现 jquery（比如在搜索框中自动完成），所以我想知道哪种方法是为 struts2 实现使用 jquery 插件的最佳方法，或者只是在 struts 2 中添加 jquery？有什么好的教程可以开始吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:07:16.507

我会推荐这个插件，因为它提供的不仅仅是 jQuery - 它为您提供了为您完成大部分工作的 JSP 标签。
[这](http://struts2-jquery-plugin.109969.n3.nabble.com/working-example-for-struts2-jquery-td3470518.html)有一个简单的示例可以帮助您入门。还有一个[展示柜](http://struts2-jquery-plugin.109969.n3.nabble.com/working-example-for-struts2-jquery-td3470518.html)，为所有各种标签提供示例代码。

# javascript - 带有延迟的javascript自定义对话框

> ID：14920095
> 
> 赞同：-3
> 
> 时间：2013-02-17T10:24:31.217
> 
> 标签：javascript

我想弹出一个对话框，5 秒后，我希望页面重定向到 google.com 。因此，我需要一个延迟功能，但 settimeout() 不起作用。这是代码。如何在重定向之前延迟 5 秒...顺便说一下，我正在使用某人的 javascript 代码来显示哪个效果很好。

```
<a href="javascript:showDialog('Error','You have encountered a critical error.','error',10);setTimeout(window.location.href ='http://google.com', 5000);">Error</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:28:26.260

`setTimeout`有效，只是没有正确使用。尝试这样的事情：

**JavaScript**

```
function clickHandle() {
   showDialog('Error','You have encountered a critical error.','error',10);
   setTimeout(function () {
      window.location.href ='http://google.com';
   }, 5000);
} 
```

**HTML**

```
<a href="clickHandle()">Error</a> 
```

的第一个参数`setTimeout`是要执行的代码（例如要评估的字符串），但更好的做法是避免`eval`并使用回调（如我的示例中所示）。

将点击处理程序直接放在 HTML 中并不是一个好主意。我建议你使用`onclick`例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:30:53.783

您必须将重定向放在一个函数中

```
setTimeout(function(){
    window.location.href ='http://google.com';
}, 5000); 
```

# gwt - GWT 代码拆分。拆分文件未及时加载

> ID：14920098
> 
> 赞同：0
> 
> 时间：2013-02-17T10:24:55.363
> 
> 标签：gwt, split

我有个问题。在大型 GWT(2.4)-app 中，我决定使用 gwt-code-splitting。GWT-compiller 为一个小的 js-parts 裁剪了应用程序。

但是，当我想加载一些模块时

```
final Module form = ModuleFactory.getInstance().getModule(modumesName); 
```

/ *** /

```
private Module module = null;

public Module getModule(String moduleName){
 if (moduleName.equals("M1")) {
 GWT.runAsync(new RunAsyncCallback() {      
        @Override
        public void onSuccess() {
            module = GWT.create(M1.class);
        }

        @Override
        public void onFailure(Throwable arg0) {
            Window.alert("not load M1");
        }
    });
  }
return module;
} 
```

M1扩展模块

当我第一次调用创建小部件 M1 时，出现 js 错误

“未捕获的 com.google.gwt.event.shared.UmbrellaException：捕获到一个或多个异常，请参阅 UmbrellaException#getCauses 中的完整集”

但是，在其他时间，我得到了我的模块 M1。在我看到的开发工具中，加载了拆分部分。

```
public class CreateModuleWidget extends Composite{
     private static final Binder binder = GWT.create(Binder.class);
     interface Binder extends UiBinder<Widget, CreateModuleWidget> {}

     public CreateModuleWidget() {
           /*initparams**/ 
     }

     @UiHandler("createButt")
     void onCreateClick(ClickEvent event) {
          String modumesName = "M1";
          final WidgetDialog dialog = new WidgetDialog(moduleName, true);
          final Module form = ModuleFactory.getInstance().getModule(modumesName);
          dialog.setDialogWidget(form);
          dialog.show();
     }
}

public class ModuleFactory{
    private Module form = null;

private static ModuleFactory instance = null;

public static ModuleFactory getInstance(){
    if(instance == null){
        instance = new ModuleFactory();
    }
    return instance;
}
    public Module getModule(String moduleName){
        if (moduleName.equals("M1")) {
           GWT.runAsync(new RunAsyncCallback() {        
        @Override
        public void onSuccess() {
            module = GWT.create(M1.class);
        }

        @Override
        public void onFailure(Throwable arg0) {
            Window.alert("not load M1");
        }
    });
          }
    return module;
   }
 } 
```

未捕获的 com.google.gwt.event.shared.UmbrellaException：捕获到一个或多个异常，请参阅 UmbrellaException#getCauses BDC16B1A93B4190A8C1DD66EEF9838B8.cache.html:1435 中的完整集（匿名函数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:48:10.487

嗯，你知道，它被调用`runAsync`是有原因的：它是**一个**同步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:41:45.247

通常我这样做是作为 MVC 的一部分。

控制器检查它需要的模块是否为空，如果是，则加载它，然后在获得所需代码后继续查看。

```
Module module;

   if (module==null){

          //You could display a waiting message in a dialog

          GWT.runAsync(new RunAsyncCallback() {  
           ...
          　　public void onSuccess() {
                　　module = GWT.create(M1.class);
                　　showXYZView();
           　　}
　　　　　});

    }else{
          showXYZView();
    } 
```

# python - IOError：文件名、文件夹名或卷名语法错误

> ID：14920099
> 
> 赞同：0
> 
> 时间：2013-02-17T10:24:56.287
> 
> 标签：python, ioerror

我在执行代码时遇到问题，就像

```
Transmission calls TorrentToMedia.bat F:/Downloaded/_automated/test/complete/tv My.Very.Legal.Download.S01E01.720p.HDTV.x264-FiHTV 
```

然后传递给python脚本，

```
TorrentToMedia.py F:/Downloaded/_automated/test/complete/tv My.Very.Legal.Download.S01E01.720p.HDTV.x264-FiHTV 
```

调试日志：

```
C:\Windows\system32>python C:\Downloaders\nzbToMedia\torrenttomedia.py F:\Downlo
aded_automated\test\complete\tv 8.Out.Of.10.Cats.S15E05.720p.HDTV.x264-TLA
03:35:25|INFO TorrentToMedia V4.3
03:35:25|INFO Script called from Transmission
03:35:25|INFO Loading config from C:\Downloaders\nzbToMedia\autoProcessMedia.cfg
03:35:25|INFO Found torrent directory F:\Downloaded_automated\test\complete\tv\8.Out.Of.10.Cats.S15E05.720p.HDTV.x264-TLA in category directory F:\Downloaded_automated\test\complete\tv
03:35:25|INFO Determined Category to be: tv
03:35:25|INFO Found media files
03:35:25|INFO Creating hardlink for files from F:\Downloaded_automated\test\complete\tv\8.Out.Of.10.Cats.S15E05.720p.HDTV.x264-TLA to F:/Downloaded/_automated/test/process/tv\8.Out.Of.10.Cats.S15E05.720p.HDTV.x264-TLA.
Traceback (most recent call last):
File "C:\Downloaders\nzbToMedia\torrenttomedia.py", line 186, in 
linktastic.link(source, target)
File "C:\Downloaders\nzbToMedia\linktastic.py", line 65, in link
_link_windows(src, dest)
File "C:\Downloaders\nzbToMedia\linktastic.py", line 41, in _link_windows
raise IOError(err.output.decode('utf-8'))
IOError: Filename, foldername or volumename syntax is wrong. 
```

现在我得到的错误是当我打电话时`linktastic.link(source, target)`

TorrentTomMedia.py

```
#!/usr/bin/env python

import autoProcessMovie
import autoProcessTV
import sys, os, ConfigParser, shutil
import logging, logging.config
import linktastic

from nzbToMediaEnv import *

Logger = logging.getLogger()
logFile = os.path.join(os.path.dirname(sys.argv[0]), "postprocess.log")
logging.config.fileConfig(os.path.join(os.path.dirname(sys.argv[0]), "logger.conf"))
fileHandler = logging.FileHandler(logFile, encoding='utf-8', delay=True)
fileHandler.formatter = logging.Formatter('%(asctime)s|%(levelname)-7.7s %(message)s', '%H:%M:%S')
fileHandler.level = logging.DEBUG
Logger.addHandler(fileHandler)

def removeEmptyFolders(path):
    if not os.path.isdir(path):
        return

    # remove empty subfolders
    files = os.listdir(path)
    if len(files):
        for f in files:
            fullpath = os.path.join(path, f)
            if os.path.isdir(fullpath):
                removeEmptyFolders(fullpath)

    # if folder empty, delete it
    files = os.listdir(path)
    if len(files) == 0:
        Logger.info("Removing empty folder: %s", path)
        os.rmdir(path)

Logger.info("TorrentToMedia %s", VERSION)

if len(sys.argv) == 3:
    # I've now merged Transmission and uTorrent into on "universal" solution. 
    # We will use paramters,
    # %D (from uTorrent) or %TR_TORRENT_DIR% (from Transmission) as torrent directory
    # %N (from uTorrent) or %TR_TORRENT_NAME% (from Transmission) as torrent name
    # and parse the directory tree to match categorys (tv, movie).
    # So in uTorrent use, python C:/path/to/nzbToMedia/TorrentToMedia.py %D %N
    # and with Transmission use the included TorrentToMedia.sh (for linux) or TorrentToMedia.bat (for Windows)
    # script files to launch TorrentToMedia.py

    Directory = sys.argv[1]
    Name = sys.argv[2]
    Logger.info("Script called from Transmission")
    Category = '' #We dont have a category, we will determine it later.

else:
    # We dont know which client the call is comeing from, aborting
    Logger.error("Cant load variables, aborting.")
    sys.exit(-1)

Logger.debug("Received Directory: %s", Directory)
Logger.debug("Received Torrent Name: %s", Name)

status = 0
packed = 0
root = 0
video = 0

config = ConfigParser.ConfigParser()
configFilename = os.path.join(os.path.dirname(sys.argv[0]), "autoProcessMedia.cfg")

Logger.info("Loading config from %s", configFilename)

if not os.path.isfile(configFilename):
    Logger.error("You need an autoProcessMedia.cfg file - did you rename and edit the .sample?")
    sys.exit(-1)

config.read(configFilename)

TV_Cat = config.get("SickBeard", "category")
TV_dest = config.get("SickBeard", "destination")
Movie_dest = config.get("CouchPotato", "destination")
Movie_Cat = config.get("CouchPotato", "category")
useLink = int(config.get("Torrent", "uselink"))
extractionTool = config.get("Torrent", "extractiontool")

DirBase = os.path.split(os.path.normpath(Directory)) #Test for blackhole sub-directory.
if DirBase[1] == Name:
    Logger.info("Files appear to be in their own directory")
    DirBase2 = os.path.split(os.path.normpath(DirBase[0]))
    if DirBase2[1] == Movie_Cat or DirBase2[1] == TV_Cat:
        if not Category:
            Logger.info("Determined Category to be: %s", DirBase2[1])
            Category = DirBase2[1]

elif DirBase[1] == Movie_Cat or DirBase[1] == TV_Cat:
    if os.path.isdir(os.path.join(Directory, Name)):
        Logger.info("Found torrent directory %s in category directory %s", os.path.join(Directory, Name), Directory)
        Directory = os.path.join(Directory, Name)
    else:
        Logger.info("The directory passed is the root directory for category %s", DirBase[1])
        Logger.warn("You should change settings to download torrents to their own directory")
        Logger.info("We will try and determine which files to process, individually")
        root = 1
    if not Category:
        Logger.info("Determined Category to be: %s", DirBase[1])
        Category = DirBase[1]

else: # no category found in directory. For Utorrent we can do a recursive scan.
    Logger.info("The directory passed does not appear to include a category or the torrent name")
    Logger.warn("You should change settings to download torrents to their own directory")
    Logger.info("We will try and determine which files to process, individually")
    root = 1

if Category == Movie_Cat:
    destination = os.path.join(Movie_dest, Name)
elif Category == TV_Cat:
    destination = os.path.join(TV_dest, Name)
else:
    Logger.info("Category of %s does not match either %s or %s: Exiting", Category, Movie_Cat, TV_Cat)
    sys.exit(-1)

# Check if destination directory exists
if not os.path.isdir(destination):
        os.mkdir(destination)
        Logger.debug("Creating destination directory %s", destination)
    else:
        Logger.debug("Destination directory already exists, %s", destination)

test = ['.zip', '.rar', '.7z', '.gz', '.bz', '.tar', '.arj']
test2 = ['.mkv', '.avi', '.divx', '.xvid', '.mov', '.wmv', '.mp4', '.mpg', '.mpeg']
Logger.debug("Scanning files in directory: %s", Directory)
f = [filenames for dirpath, dirnames, filenames in os.walk(Directory)]
if root == 1:
    Logger.debug("Looking for %s in filenames", Name)
    for file in f[1]:
        if (Name in file) or (file in Name):
            if os.path.splitext(file)[1] in test:
                Logger.info("Found a packed file %s", file)
                packed = 1
                break
            elif os.path.splitext(file)[1] in test2:
                Logger.info("Found a video file %s", file)
                video = 1
                break
            else:
                continue
else:
    ext = [os.path.splitext(file)[1] for file in f[1]]
    if set(ext).intersection(set(test)):
        Logger.info("Found compressed archives, extracting")
        packed = 1
    ## Check that files actully is .mkv / .avi etc, and not packed files or anything else
    elif set(ext).intersection(set(test2)):
        Logger.info("Found media files")
        video = 1
    else:
        Logger.debug("Found files with extensions %s.", ext)
        Logger.debug("Looking for extensions %s or %s.", test, test2)
        Logger.info("Didn't find any compressed archives or media files to process, exiting")
        sys.exit(-1)

if useLink == 0 and packed == 0 and video == 1: ## copy
    if root == 0: #move all files in tier own directory 
        Logger.info("Copying all files from %s to %s.", Directory, destination)
        shutil.copytree(Directory.lower(), destination.lower())
    else: #we only want to move files matching the torrent name when root directory is used.
        for dirpath, dirnames, filenames in os.walk(Directory):
            for file in filenames:
                if (Name in file) or (file in Name):
                    pass
                else:
                    continue #ignore the other files
                source = os.path.join(dirpath, file)
                target = os.path.join(destination, file)
                Logger.info("Copying files that match the torrent name %s from %s to %s.", Name, Directory, file, destination, file)
                shutil.copy(source, target)

elif useLink == 1 and packed == 0 and video == 1: ## hardlink
    for dirpath, dirnames, filenames in os.walk(Directory):
        for file in filenames:
            if root == 1: #we only want to move files matching the torrent name when root directory is used.
                if (Name in file) or (file in Name):
                    pass
                else:
                    continue #ignore the other files
            source = os.path.join(dirpath, file)
            target = os.path.join(destination, file)
            Logger.info("Creating hardlink for files from %s to %s.", source, target)
            linktastic.link(source, target)

elif packed == 1: ## unpack
    ## Using Windows?
    if os.name == 'nt':
        cmd_7zip = [extractionTool, 'x -y']
        ext_7zip = [".rar",".zip",".tar.gz","tgz",".tar.bz2",".tbz",".tar.lzma",".tlz",".7z",".xz"]
        EXTRACT_COMMANDS = dict.fromkeys(ext_7zip, cmd_7zip)
        Logger.info("We are using Windows")

    ## Using linux?
    elif os.name == 'posix':
        required_cmds=["unrar", "unzip", "tar", "unxz", "unlzma", "7zr"]
        EXTRACT_COMMANDS = {
        ".rar": ["unrar", "x -o+ -y"],
        ".zip": ["unzip", ""],
        ".tar.gz": ["tar", "xzf"],
        ".tgz": ["tar", "xzf"],
        ".tar.bz2": ["tar", "xjf"],
        ".tbz": ["tar", "xjf"],
        ".tar.lzma": ["tar", "--lzma xf"],
        ".tlz": ["tar", "--lzma xf"],
        ".txz": ["tar", "--xz xf"],
        ".7z": ["7zr", "x"],
        }
        Logger.info("We are using *nix")

    ## Need to add a check for which commands that can be utilized in *nix systems..
    else:
        Logger.error("Unknown OS, exiting")

    files = [ f for f in os.listdir(Directory) if os.path.isfile(os.path.join(Directory,f)) ]
    for f in files:
        if root == 1: #we only want to move files matching the torrent name when root directory is used.
            if (Name in file) or (file in Name):
                pass
            else:
                continue #ignore the other files
        ext = os.path.splitext(f)
        fp = os.path.join(Directory, os.path.normpath(f))
        if ext[1] in (".gz", ".bz2", ".lzma"):
        ## Check if this is a tar
            if os.path.splitext(ext[0])[1] == ".tar":
                cmd = EXTRACT_COMMANDS[".tar" + ext[1]]
        else:
            if ext[1] in EXTRACT_COMMANDS:
                cmd = EXTRACT_COMMANDS[ext[1]]
            else:
                Logger.debug("Unknown file type: %s", ext[1])
                continue

        ## Create destination folder
        if not os.path.exists(destination):
            try:
                os.makedirs(destination)
            except Exception, e:
                Logger.error("Not possible to create destination folder: %s", e)
                continue

        Logger.info("Extracting to %s", destination)

        ## Running..
        Logger.info("Extracting %s %s %s %s", cmd[0], cmd[1], fp, destination)
        pwd = os.getcwd() # Get our Present Working Directory
        os.chdir(destination) #not all unpack commands accept full paths, so just extract into this directory.
        if os.name == 'nt': #Windows needs quotes around directory structure
            try:
                run = "\"" + cmd[0] + "\" " + cmd[1] + " \"" + fp + "\"" #windows needs quotes around directories.
                res = call(run)
                if res == 0:
                    status = 0
                    Logger.info("Extraction was successful for %s to %s", fp, destination)
                else:
                    Logger.info("Extraction failed for %s. 7zip result was %s", fp, res)
            except:
                Logger.error("Extraction failed for %s. Could not call command %s %s", fp, run)
        else:
            try:
                if cmd[1] == "": #if calling unzip, we dont want to pass the ""
                    res = call([cmd[0], fp])
                else:
                    res = call([cmd[0], cmd[1], fp])
                if res == 0:
                    status = 0
                    Logger.info("Extraction was successful for %s to %s", fp, destination)
                else:
                    Logger.error("Extraction failed for %s. 7zip result was %s", fp, res)
            except:
                Logger.error("Extraction failed for %s. Could not call command %s %s %s %s", fp, cmd[0], cmd[1], fp)    
        os.chdir(pwd) # Go back to our Original Working Directory

for dirpath, dirnames, filenames in os.walk(destination): #flatten out the directory to make postprocessing easier.
    if dirpath == destination:
        continue #no need to try and move files in the root destination directory.
    for filename in filenames:
        try:
            shutil.move(os.path.join(dirpath, filename), destination)
        except OSError:
            Logger.info("Could not flatten %s", os.path.join(dirpath, filename))
removeEmptyFolders(destination) #cleanup empty directories.

status = int(status)
if status == 0:
    Logger.info("calling autoProcess script for successful download")
else:
    Logger.info("calling autoProcess script for failed download")
## Now we pass off to CouchPotato or SickBeard.
old_stdout = sys.stdout #backup the default stdout
sys.stdout = Logger.info #Capture the print from the autoProcess scripts.
if Category == Movie_Cat:  
    autoProcessMovie.process(destination, Name, status)
elif Category == TV_Cat:
    autoProcessTV.processEpisode(destination, Name, status)
sys.stdout = old_stdout #reset our stdout 
```

linktastic.py

```
# Linktastic Module
# - A python2/3 compatible module that can create hardlinks/symlinks on windows-based systems
#
# Linktastic is distributed under the MIT License.  The follow are the terms and conditions of using Linktastic.
#
# The MIT License (MIT)
#  Copyright (c) 2012 Solipsis Development
#
# Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
# associated documentation files (the "Software"), to deal in the Software without restriction,
# including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
# and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,
# subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all copies or substantial
# portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
# LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
# IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
# WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
# SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

import subprocess
from subprocess import CalledProcessError
import os

# Prevent spaces from messing with us!
def _escape_param(param):
    return '"%s"' % param

# Private function to create link on nt-based systems
def _link_windows(src, dest):
    try:
        subprocess.check_output(
            ['cmd', '/C', 'mklink', '/H', _escape_param(dest), _escape_param(src)],
            stderr=subprocess.STDOUT)
    except CalledProcessError as err:
        raise IOError(err.output.decode('utf-8'))

    # TODO, find out what kind of messages Windows sends us from mklink
    # print(stdout)
    # assume if they ret-coded 0 we're good

def _symlink_windows(src, dest):
    try:
        subprocess.check_output(
            ['cmd', '/C', 'mklink', _escape_param(dest), _escape_param(src)],
            stderr=subprocess.STDOUT)
    except CalledProcessError as err:
        raise IOError(err.output.decode('utf-8'))

    # TODO, find out what kind of messages Windows sends us from mklink
    # print(stdout)
    # assume if they ret-coded 0 we're good

# Create a hard link to src named as dest
# This version of link, unlike os.link, supports nt systems as well
def link(src, dest):
    if os.name == 'nt':
        _link_windows(src, dest)
    else:
        os.link(src, dest)

# Create a symlink to src named as dest, but don't fail if you're on nt
def symlink(src, dest):
    if os.name == 'nt':
        _symlink_windows(src, dest)
    else:
        os.symlink(src, dest) 
```

您可以在此处查看 linktastic 库和 TorrentToMedia.py，[https://github.com/jkaberg/nzbToMedia](https://github.com/jkaberg/nzbToMedia)

真的很感谢一些输入和帮助，已经在这几个小时没有得到任何进一步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:33:35.727

看起来这是个问题：

```
03:35:25|INFO Creating hardlink for files from       
F:\Downloaded_automated\test\complete\tv\8.Out.Of.10.Cats.S15E05.720p.HDTV.x264-TLA to    
F:/Downloaded/_automated/test/process/tv\8.Out.Of.10.Cats.S15E05.720p.HDTV.x264-TLA. 
```

注意最后一条路径是如何混合正斜杠和反斜杠的。

顺便说一句，10 只猫中有 8 只 FTW ;-)

# memory - 三维结构的内存分配

> ID：14920105
> 
> 赞同：1
> 
> 时间：2013-02-17T10:25:55.710
> 
> 标签：memory, structure

在下面的代码中，我想在结构中包含第三个维度。结构基因型和其余标识符已经定义。这没有问题：

```
struct genotype ** populationrows = (struct genotype **) calloc(MAXGENS, sizeof(struct genotype *));

  for (k=0; k< MAXGENS; k++) {

    populationrows[k]= (struct genotype *) calloc (POPSIZE, sizeof (struct genotype));  

    for (j=0; j<2; j++) {
      for (i=0; i<3; i++) { 
        populationrows[k][j].fitness = 0;
        populationrows[k][j].rfitness = 0;
        populationrows[k][j].cfitness = 0;
        populationrows[k][j].lower[i] = 1.0;
        populationrows[k][j].upper[i]= 2.0;
        populationrows[k][j].gene[i] = 3.0;
        printf(" populationrows[%u][%u].gene[%u]=%25lf \n", k,j,i,populationrows[k][j].gene[i]); 
      }
    }   
  } 
```

对于第三个维度，我尝试了以下方法：

struct genotype * ** populationrows = (struct genotype * **) calloc(numFiles, sizeof(struct genotype * *));

对于 (w=0; w< numFiles; w++){

populationrows[w]= (struct genotype **) calloc (MAXGENS, sizeof (struct genotype *));

```
for (k=0; k<MAXGENS; k++) {    
  for (j=0; j<2; j++) {
    for (i=0; i<3; i++) {   
      populationrows[w][k][j].fitness = 0;
      populationrows[w][k][j].rfitness = 0;
      populationrows[w][k][j].cfitness = 0;
      populationrows[w][k][j].lower[i] = 1.0;
      populationrows[w][k][j].upper[i]= 2.0;
      populationrows[w][k][j].gene[i] = 3.0;
      printf(" populationrows[%u][%u][%u].gene[%u]=%25lf \n", w,k,j,i,populationrows[w][k][j].gene[i]); 
    }
  }     
 }  
} 
```

但这给了我一个分段错误。

您介意告诉我如何避免这种分段错误吗？任何帮助将不胜感激。

提前感谢您的回复！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:58:18.760

我假设它是C。

最好使用平面数组，而不是指向数据指针的指针数组。像这样的东西：

```
int n_w = 42, n_k = 23, n_j = 423; // size of dimensions

struct genotype * population = (struct genotype *) calloc(n_w * n_k * n_j, sizeof(struct genotype)); 
```

你得到元素 (10, 11, 12) 然后：

```
population[10 * n_k * n_j + 11 * n_j + 12].fitness = 0; 
```

如果将其放入函数中，它会变得很漂亮：

```
int n_w = 42, n_k = 23, n_j = 423; // size of dimensions

struct genotype * create_array() {
    return (struct genotype *) calloc(n_w * n_k * n_j, sizeof(struct genotype));
}

struct genotype * get_element(int w, int k, int j) {
    return &population[w * n_k * n_j + k * n_j + j];
}

// ...

struct genotype * population = create_array();

get_element(10, 11, 12)->fitness = 0; 
```

# c++ - ifstream 不会打开文件

> ID：14920106
> 
> 赞同：3
> 
> 时间：2013-02-17T10:25:56.703
> 
> 标签：c++, ifstream

我正在尝试打开一个文件，以便从中读取。

```
#include <iostream>
#include <fstream>
#include <cstdlib>
using namespace std;

ifstream input_file("blah.txt", ios::in);
ofstream output_file("output.txt", ios::out);

Bank::Bank(void){
    input_file.open("blah.txt");
    if(!input_file){
        cerr << "Error" << endl;
        exit(1);
    }
    else{
        cout << "good 2 go" << endl;
    }
} 
```

这是我用于读取名为 blah.txt 的文件的代码，我在终端得到的输出是“错误”。我正在使用 Linux Mint 14 和 gVim，所以当我输入 :pwd 命令时，我知道我在目录 /mnt/share 中。从终端检查，文件 blah.txt 位于同一目录中。我唯一能想到的是隐藏文件扩展名。为什么我打不开文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T10:40:33.730

那是因为您打开“blah.txt”两次。

第一次：

`ifstream input_file("blah.txt", ios::in)`

第二次：

`input_file.open("blah.txt")`

删除第二个应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:31:11.473

这

```
ifstream input_file("blah.txt", ios::in); 
```

[应该打开文件](http://www.cplusplus.com/reference/fstream/ifstream/ifstream/)：

> 此外，当使用第二个构造函数版本时，流与物理文件相关联，就好像调用了具有相同参数的成员函数 open。

这

```
input_file.open("blah.txt"); 
```

[应该失败](http://www.cplusplus.com/reference/fstream/ifstream/open/)：

> 如果对象已经有一个关联的文件（打开），则函数失败。

请阅读文档。

# .net - NHibernate 中的延迟初始化

> ID：14920107
> 
> 赞同：4
> 
> 时间：2013-02-17T10:26:03.507
> 
> 标签：.net, linq, nhibernate, lazy-initialization

如果一个实体与另一个实体的关系映射为 Lazy=False，但是对于某个函数，我需要将它们全部 Lazily 获取，这可以在运行时执行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:06:24.110

不，你不能。正如评论者指出的那样，您可以将其映射为惰性并急切地获取，但不能反过来。

`Fetch`即在 LINQ 中，您可以使用/ `FetchMany`/ `ThenFetch`/急切地获取关系`ThenFetchMany`：

```
session.Query<Parent>()
    .Where(x => x.Name == "Ruba")
    .FetchMany(x => x.Children)
    .ThenFetch(x => x.SomethingMore); 
```

# c# - 两个 64 位数字的乘法

> ID：14920109
> 
> 赞同：2
> 
> 时间：2013-02-17T10:26:13.430
> 
> 标签：c#

如何在 C# 中将两个 64 位十进制数相乘而不会溢出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T10:31:47.260

如果您需要 64 个*十进制*数字，并且它们是整数，则可以使用`System.Numerics.BigInteger`struct（需要对`System.Numerics.dll`汇编的引用）。

```
BigInteger firstNumber = BigInteger.Parse("63518439492097324687235465876298368764576527346564625480");
BigInteger secondNumber = BigInteger.Parse("84890247648975285765484902890273086475254764765147643611");
BigInteger product = firstNumber * secondNumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:31:45.460

你总是可以用来存储两个数字`decimal`相乘的结果。`long`

```
long bigNumber = 12345678L;
long anotherBigNumber = 23456789L;
decimal result = bigNumber * anotherBigNumber; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:02:38.977

我认为您可以计算任何数字（只要您愿意），如果首先将该数字转换为字符串（所以两个单独的字符串），而不是获取最后一个数字（字符）并将其与来自另一个字符的每个数字相乘（就像你在学校学到的一样）等等，然后你把它加到你的最终分数上（也作为一个字符串）。我知道这是可以做到的，一开始这将是非常困难的逻辑，但是一旦你创建了这个函数，你就可以乘以你想要的任何数字:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T11:30:34.690

如果它们是整数，请使用 System.Numerics 中的 BigInteger 类（参考 System.Numerics.dll！）

如果没有，Codeplex 中有一个 BigRational 类。它本来应该在 System.Numerics 中，但它被踢了。链接： [http ://bcl.codeplex.com/releases/view/42782](http://bcl.codeplex.com/releases/view/42782)

# c++ - 打印出表格列名

> ID：14920115
> 
> 赞同：0
> 
> 时间：2013-02-17T10:27:17.183
> 
> 标签：c++, sqlite, callback, tablecolumn

我目前有这个功能来打印我的表格的每一行

```
static int callback(void *NotUsed, int argc, char **argv, char **szColName)
{
    for(int i = 0; i < argc; i++)
    {
        cout.width(17); cout << left << argv[i];
    }

    std::cout << "\n";

    return 0;
} 
```

如何打印出 szColName，使其仅在顶部出现一次，而不是多次出现？试过这个：

```
static int callback(void *NotUsed, int argc, char **argv, char **szColName)
{
    int n = sizeof(szColName) / sizeof(szColName[0]);
    for (int i = 0; i < n; i++)
    {
        cout.width(17); cout << left << szColName[i];
    }
    printf("\n");
    for(int i = 0; i < argc; i++)
    {
        cout.width(17); cout << left << argv[i];
    }

    std::cout << "\n";

    return 0;
} 
```

但它每次在输出行值后输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:36:41.733

您可能想要声明一个`static bool`内部回调来记录它是否已经打印出列名。或者，如果您希望能够重置它...

如：

```
static bool firstline = true;

static int callback(void *NotUsed, int argc, char **argv, char **szColName)
{
if (firstline){
    int n = sizeof(szColName) / sizeof(szColName[0]);//this is incorrect but fixing
                                                 // it requires changing the prototype. 
                                                  //See the comments below
    for (int i = 0; i < n; i++)
    {
        cout.width(17); cout << szColName[i] << left;
    }
    printf("\n");
    firstline=false;
}
for(int i = 0; i < argc; i++)
{
    cout.width(17); cout << argv[i] << left;
}

std::cout << "\n";

return 0;
}
int main(){
    for(int x=0;x<10;++x)callback( ... , ... , ... ); // give whatever argument you need to give

    firstline = true;  //reset the variable so that next time you call it, the col names will appear
    for(int x=0;x<10;++x)callback(...,...,...);// now the col names will appear again.
} 
```

* * *

我假设您提供的内容会正确打印出行和列名。我只添加了一个变量来检查是否需要打印列名。

# sql - 如果与 ODBC 连接，MS Access 是否支持“CASE WHEN”子句？

> ID：14920116
> 
> 赞同：14
> 
> 时间：2013-02-17T10:27:32.653
> 
> 标签：sql, database, ms-access, odbc

`CASE WHEN`MS Access 的ODBC 支持子句吗？是否有其他不支持该`CASE WHEN`子句的数据库？我在使用 ODBC 连接到 MS Access 时尝试了以下查询，但出现异常。

`SELECT (CASE WHEN (AGE > 10) THEN 1 ELSE 0 END) FROM demo`

`[Microsoft][ODBC Microsoft Access Driver] Syntax error (missing operator) in query expression '(CASE WHEN (AGE > 10) THEN 1 ELSE 0 END)'`

我试图找到一种通用方法，该方法适用于大多数数据库，在与 ODBC 连接时使用比较表达式生成（计算）新的“布尔列”。实际上，MS Access 支持在 SELECT 子句中进行比较，但对于其他一些数据库，则需要 CASE 子句。对于 MS Access，SQL 可以是

`SELECT AGE > 10 FROM demo`

但在其他情况下，它必须是

`SELECT (CASE WHEN (AGE > 10) THEN 1 ELSE 0 END) FROM demo`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-17T16:52:31.953

由于您使用 Access 来编写查询，因此您必须坚持使用 Access 的 SQL 版本。

要在几个不同的返回值之间进行选择，请使用 switch() 函数。因此，要稍微翻译和扩展您的示例：

```
select switch(
  age > 40, 4,
  age > 25, 3,
  age > 20, 2,
  age > 10, 1,
  true, 0
) from demo 
```

“真”情况是默认情况。如果您没有它并且其他情况都不匹配，则该函数将返回 null。

[Office 网站](http://office.microsoft.com/en-001/access-help/switch-function-HA001228918.aspx?CTT=5&origin=HA010131676)有这方面的文档，但它们的示例语法是 VBA，它也是错误的。我已就此向他们提供反馈，但您应该按照上面的示例进行操作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-22T12:26:11.850

您可以使用`IIF`下一个示例中的语句：

```
SELECT
   IIF(test_expression, value_if_true, value_if_false) AS FIELD_NAME
FROM
   TABLE_NAME 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-18T22:23:53.203

我不得不使用多个 IIF 语句在 ACCESS SQL 中创建类似的结果。

```
IIf([refi type] Like "FHA ST*","F",IIf([refi type]="VA IRRL","V")) 
```

所有剩余的将保持为 Null。

# php - 组合数组php

> ID：14920117
> 
> 赞同：0
> 
> 时间：2013-02-17T10:27:37.293
> 
> 标签：php, arrays, codeigniter

在我的输出代码中是：

```
Array ( 
    [0] => 53,67,70
    [1] => 48 
    [2] => 11,22,13 
); 
```

我希望输出为：**array(11,22,13,48,53,67,70)**

```
 $result = $this->db->get_where('table',array('mainpage'=>$mp'));
    $data = array();
    $out = array();
    foreach($result->result() as $row){
        $dv = json_decode($row->subpage);
        $out = array_merge($dv, $out);
    }
    return    $out; 
```

在我的数据库表行是：（json数据）

**第 1 行：** ["11,22,13"]
**第 2 行：** ["48"]
**第 3 行：** ["53,67,70"]

必须如何将输出的 php 代码固定为`array(11,22,13,48,53,67,70)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:29:35.460

```
$result = $this->db->get_where('table',array('mainpage'=>$mp));
$data = array();
$out = array();

foreach($result->result() as $row){
        $dv = json_decode($row->subpage);

        $flat = array();

        foreach ( $dv as $item ) {
            $flat = array_merge( $flat, explode( ',', $item ) );
        }

        $out = array_merge( $out, $flat );
}

return $out; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:32:50.080

```
$array = array (array (53, 67, 70), array (48), array (11, 22, 13));
$combined_array = call_user_func_array ('array_merge', $array); 
```

# php - PHP：对象 A 扩展对象 B，它们是否共享构造函数？

> ID：14920119
> 
> 赞同：1
> 
> 时间：2013-02-17T10:27:44.720
> 
> 标签：php, inheritance

在PHP中，当Object B扩展Object A时，为什么Object的B实例化不会自动触发`__construct()`in Object A？

奇怪的是，我在对象 B 的构造函数中有两个重复对象 A 的整个构造函数。我犯错了吗？还是滥用继承？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:30:28.803

如果您不实现新的 __construct 方法，则会自动调用类 A 的构造函数。如果你想在 B 中创建一个新的构造函数并从 A 类中调用旧的构造函数，你必须调用`parent::__construct(yourparams,...)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T10:31:57.097

您不必复制代码。

如果 B 的构造函数没有定义，那么它将采用 A 的构造函数。

如果是，那么您需要将构造调用链接回 A，就像这样。

```
class A {

    function __construct(...) {
        //do something
    }
}

class B extends A {

    function __construct(...) {
        parent::__construct(...);
        //do something more
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T10:31:59.657

如果子类没有显式构造函数，则隐式运行超类构造函数。

如果子类确实有显式构造函数，那么它会覆盖超类中的构造函数，因此您可以在必要时完全更改子类实例化行为。

如果您想向子类添加额外的实例化行为，但仍想保留超类行为，那么您应该执行以下操作：

```
public function __construct ($arg) {
    parent::__construct ($arg);
    // Additional construction logic goes here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T10:35:44.997

您需要从子类的构造函数调用 parent::__construct()，因为父构造函数没有被隐式调用。

看看这个

[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

# url-rewriting - URL 重写所需的一组棘手的重定向

> ID：14920137
> 
> 赞同：2
> 
> 时间：2013-02-17T10:30:09.363
> 
> 标签：url-rewriting

如果我有一个网站，比如我的[http://www.website.com](http://www.website.com)，将流量重定向到一个`default.aspx`页面但没有在 url 中显示的最佳方式是什么？

因此，如果用户访问[http://mywebsite.com](http://mywebsite.com)，他们会被重定向到 [http://mywebsite.com/default.aspx?lid=1234](http://mywebsite.com/default.aspx?lid=1234)，但会显示为：

```
http://mywebsite.com?lid=1234 
```

当我的网站上线时（显然该网站不是[http://mywebsite.com](http://mywebsite.com)，但主 url 不相关）我希望能够给他们上面的 url。

目前有点棘手，当我们给他们 URL 时，它没有参数 lid，但现在系统需要它。

我通过设置为更高的默认页面并拥有代码将[http://mywebsite.com](http://mywebsite.com)更改为[http://mywebsite.com/default.aspx?lid1234](http://mywebsite.com/default.aspx?lid1234)`index.html``http-equiv="refresh" content="0;URL=default.aspx?lid=1234"`

那行得通。

如果我随后应用标准重写规则来删除 default.aspx，如下所示：http: [//kitsula.com/Article/URL-Rewriter-Remove-default.aspx-from-the-URL](http://kitsula.com/Article/URL-Rewriter-Remove-default.aspx-from-the-URL)

它几乎可以工作。重定向到[http://mywebsite.com/?lid=1234](http://mywebsite.com/?lid=1234)

我怎样才能摆脱`/`之后`.com`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:28:41.163

当一次重写应该可以解决问题时，您似乎正在执行 2 次重定向。

```
<rule name="test" stopProcessing="true">
    <match url="^/?$" />
    <action type="Rewrite" url="default.aspx?lid=1234" />
</rule> 
```

如果用户来了，`http://www.website.com`或者`http://www.website.com/`url 将被重写为`http://mywebsite.com/default.aspx?lid=1234`. （但在用户的浏览器中，显示的 url 将保持不变）

# php - AngularJS 将数据发布到 php mysql 插入

> ID：14920147
> 
> 赞同：0
> 
> 时间：2013-02-17T10:31:37.630
> 
> 标签：php, mysql, json, angularjs

我正在编写一个网络应用程序，它成功地允许我登录 Facebook（我正在使用 Phonegap 和 Phonegap Facebook 插件）。然后我想存储登录的用户名和 ID。作为一个简单的测试开始，我想让下面的控制器运行收集 ID，在 xcode 控制台中显示它以确认它在那里，然后将其发送到下面的 php 代码，然后存储在 mysql 表中。我似乎无法让它工作，我认为这可能是我在 $http.post 中的 {} 中的数据格式，但它有点超出我目前的知识来弄清楚这一点。有任何想法吗？

```
function FacebookCtrl($scope) {
    FB.api('/me', function(response) {
       var fbid=response.id;
       console.log('Testing, ' + fbid + '.');
       $http.post('http://somedomain.co.uk/php/users.php', {uid: fbid})
       console.log('Complete');
    });
} 
```

接收端的php代码为：

```
<?php
    $data = file_get_contents("php://input");
    $objData = json_decode($data);

    $uid = $objData->uid;

    try {
        include 'database.php';
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $conn->prepare('INSERT INTO Userdata (oauth_uid) VALUES (:userid)');
    $stmt->execute(array(
            ':userid' => $uid,
    ));
    } catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage();
    }
?> 
```

相同的 php 代码适用于我的另一个控制器，但不同之处在于另一个控制器捕获从表单传递的数据，因此 http.post 如下所示：

```
$http.post('http://somedomain.co.uk/php/submitdata.php', {Position1: $scope.position1} 
```

捕获此数据的 php 中的代码是：

```
$Position1 = $objData->Position1->Name; 
```

由于代码都在另一个控制器上运行，我假设问题在于我如何格式化我在 {} 之间传递的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:51:09.177

尝试定义成功\错误回调

```
$http.post("http://somedomain.co.uk/php/users.php", {uid: fbid})
    .success(function(data, status, headers, config) {
        $scope.data = data;
    }).error(function(data, status, headers, config) {
        $scope.status = status;
    }); 
```

那它会说什么呢？

# scala - 如何在选择子句中编写嵌套查询

> ID：14920153
> 
> 赞同：11
> 
> 时间：2013-02-17T10:32:46.443
> 
> 标签：scala, scalaquery, slick

我正在尝试使用 SLICK 1.0.0 生成此 SQL：

```
 select
    cat.categoryId,
    cat.title,
    (
      select
        count(product.productId)
      from
        products product
        right join products_categories productCategory on productCategory.productId = product.productId
        right join categories c on c.categoryId = productCategory.categoryId
      where
        c.leftValue >= cat.leftValue and
        c.rightValue <= cat.rightValue
    ) as productCount
from
    categories cat
where
    cat.parentCategoryId = 2; 
```

我最成功的尝试是（我删除了“joins”部分，所以它更具可读性）：

```
def subQuery(c: CategoriesTable.type) = (for {
        p <- ProductsTable

      } yield(p.id.count))
      for {
        c <- CategoriesTable
        if (c.parentId === 2)
      } yield(c.id, c.title, (subQuery(c).asColumn)) 
```

这会在子查询中产生缺少括号的 SQL：

```
 select 
    x2.categoryId, 
    x2.title, 
    select count(x3.productId) from products x3 
   from 
    categories x2 
   where x2.parentCategoryId = 2 
```

这显然是无效的 SQL 任何想法如何让 SLICK 将这些括号放在正确的位置？或者也许有不同的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T21:08:29.290

我从未使用过 Slick 或 ScalaQuery，因此找出如何实现这一点是一次冒险。Slick 是非常可扩展的，但是关于扩展的文档有点棘手。它可能已经存在，但这是我想出的。如果我做错了什么，请纠正我。

首先，我们需要创建一个自定义驱动程序。我将其扩展`H2Driver`为能够轻松测试。

```
trait CustomDriver extends H2Driver {

  // make sure we create our query builder
  override def createQueryBuilder(input: QueryBuilderInput): QueryBuilder = 
    new QueryBuilder(input)

  // extend the H2 query builder
  class QueryBuilder(input: QueryBuilderInput) extends super.QueryBuilder(input) {

    // we override the expr method in order to support the 'As' function
    override def expr(n: Node, skipParens: Boolean = false) = n match {

      // if we match our function we simply build the appropriate query
      case CustomDriver.As(column, LiteralNode(name: String)) =>
        b"("
        super.expr(column, skipParens)
        b") as ${name}"

      // we don't know how to handle this, so let super hanle it
      case _ => super.expr(n, skipParens)
    }
  }
}

object CustomDriver extends CustomDriver {
  // simply define 'As' as a function symbol
  val As = new FunctionSymbol("As")

  // we override SimpleSql to add an extra implicit
  trait SimpleQL extends super.SimpleQL {

    // This is the part that makes it easy to use on queries. It's an enrichment class.
    implicit class RichQuery[T: TypeMapper](q: Query[Column[T], T]) {

      // here we redirect our as call to the As method we defined in our custom driver
      def as(name: String) = 
        CustomDriver.As.column[T](Node(q.unpackable.value), name)
    }
  }

  // we need to override simple to use our version
  override val simple: SimpleQL = new SimpleQL {}
} 
```

为了使用它，我们需要导入特定的东西：

```
import CustomDriver.simple._
import Database.threadLocalSession 
```

然后，要使用它，您可以执行以下操作（我在示例中使用了官方 Slick 文档中的表格）。

```
// first create a function to create a count query
def countCoffees(supID: Column[Int]) =
  for {
    c <- Coffees
    if (c.supID === supID)
  } yield (c.length)

// create the query to combine name and count
val coffeesPerSupplier = 
  for {
    s <- Suppliers
  } yield (s.name, countCoffees(s.id) as "test")

// print out the name and count
coffeesPerSupplier foreach { case (name, count) =>
  println(s"$name has $count type(s) of coffee")
} 
```

结果是这样的：

```
Acme, Inc. has 2 type(s) of coffee
Superior Coffee has 2 type(s) of coffee
The High Ground has 1 type(s) of coffee 
```

# gnome - 无法在 Gjs 中创建 GArray

> ID：14920159
> 
> 赞同：1
> 
> 时间：2013-02-17T10:33:35.757
> 
> 标签：gnome, gnome-shell, gjs, gnome-keyring-daemon

我尝试创建一个 GArray 但我总是遇到同样的错误：

> 常量 GLib = 进口.gi.GLib;
> 
> var garray = new GLib.Array(true, true, 1); // 无法构造盒装类型 Array，因为它没有零参数，只能包装现有的
> 
> var garray = new GLib.Array(); // 无法构造盒装类型 Array，因为它没有零参数，只能包装现有的

我需要一个 GArray 才能在 GnomeKeyring.item_create_sync 方法中使用它：

> GnomeKeyring.item_create_sync("login", 4, "name", new GLib.Array(true, true, 1) "pass", true);

我尝试了其他类型的数组而不是 GArray，这是错误

*   `[]`-> 对象 0xb5d120d0 不是 (null) 的子类，它是一个数组
*   `new Array()`-> 对象 0xb5e12138 不是 (null) 的子类，它是一个数组
*   `{}`-> 对象 0xb5d0b1b0 不是 (null) 的子类，它是一个对象
*   `5`-> 未处理的 GType GArray 从 Number 中解包 GArgument
*   `"5"`-> 参数“属性”的预期类型接口，但类型为“字符串”

如果有人有解决`GArray`方案`GnomeKeyring.item_create_sync`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T01:05:24.837

阅读`/usr/share/gir-1.0/GnomeKeyring-1.0.gir`并搜索`function name="item_create_sync"`。你在那里有所有必需的参数，在我看来你需要一个简单的列表。GnomeObjectIntrospection 将在需要时将其转换为 GArray。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T11:48:53.843

GNOME Shell 的追溯将在可能和需要的情况下自行在 JS 和 GNOME 类型之间进行转换。如果您在 JS 空间中创建一个数组并将其传递给需要 GArray 的函数，如果您将该数组作为参数传递，Shell 将进行转换。

唯一未转换的对象是其类存在于一个空间中但不存在于另一个空间中的对象。与 GNOME 文件对象一样，因为 JS 没有本机文件处理程序。您可以使用文件流`.toString()`上的方法将其内容作为字符串获取，或者调用读取方法以将二进制值作为整数数组获取。

# java - Android Socket 致命错误

> ID：14920163
> 
> 赞同：0
> 
> 时间：2013-02-17T10:33:55.073
> 
> 标签：java, android, sockets, networking, illegalstateexception

我的问题与这个问题非常相似，但我还没有创建任何输出流

[致命异常主要android](https://stackoverflow.com/questions/12447851/fatal-exception-main-android)

```
 // Try to connect

    try {

        // Check the network state
        ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();

        // If there is conection, try to create a socket with remote server
        if (networkInfo.isConnected()) {
            InetAddress address = InetAddress
                    .getByName(serverAdressTextField.getText().toString());
            Socket serverConnection = new Socket(address, PORT);

            // Write message of success
            //TODO Implement the rest of login function
            Toast.makeText(this, "Connected", Toast.LENGTH_SHORT).show();
        } else {

            // Say user that there is no internet

            Toast.makeText(this, "No connection", Toast.LENGTH_SHORT)
                    .show();
        }

    // Catch unknown host and prompt error
    } catch (UnknownHostException e) {

        Toast.makeText(this, "Server is not reached", Toast.LENGTH_SHORT)
                .show();
        return;

    // Prompt IO exception
    } catch (IOException e) {

        Toast.makeText(this, "I/O Error", Toast.LENGTH_SHORT).show();
        return;

    // Any other exception, not good
    } catch (Exception e) {

        Toast.makeText(this, "Unknown Error", Toast.LENGTH_SHORT).show();
        return;

    } 
```

它抛出 IllegalStateException 并且如果没有被捕获，它会给出

```
 02-17 05:29:59.655: E/AndroidRuntime(18470): FATAL EXCEPTION: main
    02-17 05:29:59.655: E/AndroidRuntime(18470): java.lang.IllegalStateException: Could not         execute method of the activity
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.view.View$1.onClick(View.java:3591)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.view.View.performClick(View.java:4084)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.view.View$PerformClick.run(View.java:16966)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.os.Handler.handleCallback(Handler.java:615)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.os.Handler.dispatchMessage(Handler.java:92)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.os.Looper.loop(Looper.java:137)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.app.ActivityThread.main(ActivityThread.java:4745)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at java.lang.reflect.Method.invokeNative(Native Method)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at java.lang.reflect.Method.invoke(Method.java:511)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at dalvik.system.NativeStart.main(Native Method)
    02-17 05:29:59.655: E/AndroidRuntime(18470): Caused by: java.lang.reflect.InvocationTargetException
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at java.lang.reflect.Method.invokeNative(Native Method)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at java.lang.reflect.Method.invoke(Method.java:511)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.view.View$1.onClick(View.java:3586)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    ... 11 more
    02-17 05:29:59.655: E/AndroidRuntime(18470): Caused by: android.os.NetworkOnMainThreadException
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at libcore.io.IoBridge.connect(IoBridge.java:112)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at java.net.Socket.startupSocket(Socket.java:566)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at java.net.Socket.<init>(Socket.java:225)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    at com.snivik.morze.LoginWindow.connectToServer(LoginWindow.java:62)
    02-17 05:29:59.655: E/AndroidRuntime(18470):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:44:04.450

你的问题是你显然试图在主线程中打开一个套接字，这就是你得到`android.os.NetworkOnMainThreadException`.

所有网络都必须在后台线程中完成。

# java - 如何 JUnit 测试迭代器

> ID：14920164
> 
> 赞同：12
> 
> 时间：2013-02-17T10:34:00.580
> 
> 标签：java, unit-testing, testing, junit

例如，我如何测试：

```
ArrayList<String> list = new ArrayList<String>();
list.iterator(); 
```

如何测试这个“ `iterator()`”方法？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-17T11:06:38.137

我能想到的几个测试是：

*   在空集合上测试 hasNext（返回 false）
*   在空集合上测试 next()（抛出异常）
*   在包含一项的集合上测试 hasNext（多次返回 true）
*   在一个包含一个项目的集合上测试 hasNext/next：hasNext 返回 true，next 返回项目，hasNext 返回 false，两次
*   在该集合上测试删除：检查大小为 0 之后
*   再次测试删除：异常
*   使用包含多个项目的集合进行最终测试，确保迭代器以正确的顺序遍历每个项目（如果有的话）
*   从集合中删除所有元素：集合现在是空的

您还可以查看[openJDK 中使用的测试](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/00cd9dc3c2b5/test/java/util/Collection/IteratorAtEnd.java)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:17:54.010

你没有。

来自 oracle 和 sun 的人已经这样做了。

如果您创建自己的迭代器实现，那么您必须实现 AFAIR 2 方法，并且您必须检查它们是否遵守合同。

现在这意味着：返回底层集合的下一个元素或抛出异常并告知是否有后续元素。只需在迭代器上调用这些方法并断言结果。

# image - 无法打开文件进行输出（Matlab）

> ID：14920169
> 
> 赞同：0
> 
> 时间：2013-02-17T10:34:34.573
> 
> 标签：image, file, matlab, permissions, binary

我在matlab中遇到问题，问题描述如下：

当我尝试读取图像（我有几张图像）并将它们写入特定文件夹时，matlab 会触发错误提示

```
 Error using ==> imwrite at 394
Can't open file "\Temp\\inim735282.4716703009300000.jpg" for writing.
You may not have write permission. 
```

我可以知道为什么会这样吗？

这是发生问题的代码

```
mkdir('.\Temp');
temp_name =  sprintf('%.16f',now);
corner_file = ['\Temp\corners', temp_name,'.in'];
image_file = ['\Temp\inim', temp_name,'.jpg'];
out_file = ['\Temp\out', temp_name,'.desc'];
out_imname = ['\Temp\out', temp_name,'.desc.jpg']; 
```

我试图通过省略来改变它

```
mkdir('.\Temp'); 
```

此外，我通过这样做将文件夹中的路径指向文件夹

```
binary_path = 'C:\Users\cool\Documents\MATLAB\Experment\experiments\bag_of_words\Temp'; 
```

读写文件夹。

有人可以帮我解决这个问题吗？

感谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:52:15.753

以管理员权限打开 MatLAB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:26:55.407

几点建议：

1.  要生成临时输出名称，请使用命令[`tempname`](http://www.mathworks.com/help/matlab/ref/tempname.html)。

    ```
    temp_name = tempname(); 
    ```

2.  要连接路径和文件名，请使用[`fullfile`](http://www.mathworks.com/help/matlab/ref/fullfile.html).

    ```
    conrner_file = fullfile( '\', 'Temp', 'corners', [temp_name, '.in'] ); 
    ```

3.  您应该注意不要混合 '\Temp' 和 '.\Temp'：因为第一个是**绝对**路径，而第二个是 .\Temp 的**相对**路径`cwd`。

**编辑：** 怎么样：

```
temp_name = tempname(); % temp name + folder name in TEMP
corner_file = [ temp_name,'.in'];
image_file = [ temp_name,'.jpg'];
out_file = [temp_name,'.desc'];
out_imname = [temp_name,'.desc.jpg']; 
```

它现在工作了吗？

# ios - 从 UIBezierPath 圆角矩形后面裁剪锐边

> ID：14920172
> 
> 赞同：2
> 
> 时间：2013-02-17T10:35:02.357
> 
> 标签：ios, objective-c, xcode, core-graphics, uibezierpath

我正在通过 UIBezierPaths 从头开始​​创建一个表格，并让各个单元格填充不同的颜色。

![截图1.png](../Images/581e73b733abee2abce1d09b6e926607.png)

这是我正在构建的自定义对象，它包含在子类 UIView 中。

目前，我正在按以下顺序构建它：

1.  “单元格”填充颜色
2.  列线
3.  行线
4.  外箱（圆角矩形）

如图所示，我无法摆脱橙色圆角矩形外单元格填充的尖角。

谁能指出我摆脱这些的正确方向？

干杯! :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:41:41.383

在绘图代码的开头，您应该使用它的`addClip`方法将外部圆角矩形路径添加到剪切路径。这样就不会画出这条路径之外的任何东西。

# ruby-on-rails - 如何根据设计中的模型类型进行重定向？

> ID：14920173
> 
> 赞同：0
> 
> 时间：2013-02-17T10:35:06.207
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2

我正在开发一个新的 rails 3 应用程序。在这个应用程序中，我有 2 种不同类型的资源（**管理员**和**车库**），它们都有不同的视图和 2 个使用设计的不同登录屏幕。管理员可以创建车库并生成车库密码，车库管理员可以使用该密码登录应用程序。到目前为止，我能够实现这一点。

我在上述实现中面临的一个问题是，车库管理员一旦登录，就能够通过更改浏览器中的 url 来查看管理部分，并且可以像管理员用户一样进行更改。

现在我要实现的是为两个模型提供一个登录/登录表单，当有人登录时，根据他们的模型类型，他们应该被重定向到各自的视图。另外，我想限制除 admin 之外的所有用户使用 admin 部分。

我应该用什么方法来实现这一点。我正在使用设计进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:44:17.293

`resource`是您的模型之一的实例：

```
def after_sign_in_path_for(resource) 
  return admin_route_path  if resource.is_a?(Admin)
  return garage_route_path if resource.is_a?(Garage)
end 
```

`resource`是此处型号名称的符号：

```
def after_sign_out_path_for(resource)
  return "/admin" if resource == :admin
  return "/"      if resource == :garage
end 
```

平时进去`application_controller.rb`

* * *

> 我在上述实现中面临的一个问题是，车库管理员一旦登录，就能够通过更改浏览器中的 url 来查看管理部分，并且可以像管理员用户一样进行更改。

至于这个，这是一个授权问题，而不是一个身份验证问题。尽管您可以在设计中做一些简单的事情来管理它，例如管理标志或类似性质的东西，以便您可以区分两者。仅仅重定向并不能完全解决这个问题。

看看cancan，声明式授权，我相信还有很多其他的。

# javascript - 更改默认数组类型 getter Javascript

> ID：14920176
> 
> 赞同：0
> 
> 时间：2013-02-17T10:35:53.963
> 
> 标签：javascript, oop

我发现没有办法做到这一点。不过，谢谢大家！ [在javascript中，我可以覆盖括号以访问字符串中的字符吗？](https://stackoverflow.com/questions/255041/in-javascript-can-i-override-the-brackets-to-access-characters-in-a-string)

我有这样的事情：

```
function f() {
    var list = [{name: 'test'}, {name: 'test2'}];
} 
```

我想从函数内部的那个列表中获取属性，我认为有一些方法可以覆盖默认 []，但我真的不知道要查找什么。

```
f[0] // {name: 'test'}
f['test2'] // {name: 'test2'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:45:23.597

除非您做两件事之一，否则您的`list`变量将是私有的。`f()`

*首先*，您可以尝试从那里返回`list`，`f()`这样您就可以到达您需要的属性。

```
function f() {
    var list = [{name: 'test'}, {name: 'test2'}];
    return list;
}

var f = f();
f[0] // {name: 'test'};
f['test'] // will return undefined; we'll come back to this 
```

*其次*，我认为这个选项可能是您在用“oop”标记问题时正在寻找的，您可以创建`f()`一个构造函数：

```
function f() {
    this.list = [{name: 'test'}, {name: 'test2'}];
}

var f1 = new f();
f1['list'][0] // {name: 'test'};
f1.list[0] // will also return {name: 'test'};
f1.list['test'] // still will return undefined... 
```

...

您无法使用`['test']`or访问值的`['test2']`原因是因为它们是您的值，而通常这些值是我们想要使用键（在本例中为`['name']`or `.name`）在对象中访问的值。所以你可能想要的是这样的：

```
f1.list[0].name // will return 'test'
f1.list[1].name // will return 'test2' 
```

希望这能消除混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:57:35.020

只需使用对象而不是数组：

```
var byname = {
    "test": {name: 'test'},
    "test2": {name: 'test2'}
};
// bracket notation:
byname["test2"] // {name: 'test2'}
// dot notation:
byname.test // {name: 'test'} 
```

既然你说你永远不会通过索引访问结构，那么使用无序键值映射结构就可以了。为了节省输入，您也可以从数组动态创建该对象：

```
var list = [{name: 'test'}, {name: 'test2'}];

var byname = {};
for (var i=0; i<list.length; i++)
    byname[list[i].name] = list[i]; 
```

# c++ - OpenCV 中的 Floodfill 函数

> ID：14920179
> 
> 赞同：2
> 
> 时间：2013-02-17T10:36:09.413
> 
> 标签：c++, opencv, colors, image-segmentation, flood-fill

[Floodfill函数文档中](https://docs.opencv.org/4.5.1/d7/d1b/group__imgproc__misc.html#ga366aae45a6c1289b341d140839f18717)给出的浮动范围和固定范围是什么意思？

我对如下所示的灰度图像使用了填充功能。图像具有三个不同强度的区域。

![输入图像](../Images/51f0a4901bf321444e8ee9241741404d.png)

1.  外矩形 = 170
2.  内椭圆 = 175
3.  内部矩形 = 180

我想将 170 和 175 的区域一起作为单个连接的组件和 180 的区域作为单独的组件进行泛洪填充。

我从这里修改了 [代码](http://nghiaho.com/?p=1102)，功能如下：

```
 #include <iostream>
#include <vector>

#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

void FindBlobs(const cv::Mat &binary, std::vector < std::vector<cv::Point2i> > &blobs);

int main(int argc, char **argv)
{
    cv::Mat img = cv::imread("blob.png", 0); // force greyscale

    if(!img.data) {
        std::cout << "File not found" << std::endl;
        return -1;
    }

    cv::namedWindow("binary");
    cv::namedWindow("labelled");

    cv::Mat output = cv::Mat::zeros(img.size(), CV_8UC3);

    cv::Mat binary=img.clone();
    std::vector < std::vector<cv::Point2i > > blobs;

    FindBlobs(binary, blobs);

    // Randomy color the blobs
    for(size_t i=0; i < blobs.size(); i++) {
        unsigned char r = 255 * (rand()/(1.0 + RAND_MAX));
        unsigned char g = 255 * (rand()/(1.0 + RAND_MAX));
        unsigned char b = 255 * (rand()/(1.0 + RAND_MAX));

        for(size_t j=0; j < blobs[i].size(); j++) {
            int x = blobs[i][j].x;
            int y = blobs[i][j].y;

            output.at<cv::Vec3b>(y,x)[0] = b;
            output.at<cv::Vec3b>(y,x)[1] = g;
            output.at<cv::Vec3b>(y,x)[2] = r;
        }
    }

    cv::imshow("binary", img);
    cv::imshow("labelled", output);
    cv::waitKey(0);

    return 0;
}

void FindBlobs(const cv::Mat &binary, std::vector < std::vector<cv::Point2i> > &blobs)
{
    blobs.clear();

    cv::Mat label_image;
    binary.convertTo(label_image, CV_32FC1); 

    int label_count = 2; 

    for(int y=0; y < binary.rows; y++) {
    {
     for(int x=0; x < binary.cols; x++) {
         {   if((int)label_image.at<float>(y,x) < 150) {  //start labelling only when pixel > 150
             {
         continue;
             }

            cv::Rect rect;
            cv::floodFill(label_image, cv::Point(x,y), cv::Scalar(label_count), &rect, cv::Scalar(0), cv::Scalar(6), 4+CV_FLOODFILL_FIXED_RANGE);

            std::vector <cv::Point2i> blob;

            for(int i=rect.y; i < (rect.y+rect.height); i++) {
            {   for(int j=rect.x; j < (rect.x+rect.width); j++) {
                {   if((int)label_image.at<float>(i,j) != label_count) {
                    {    continue;
                    }

                    blob.push_back(cv::Point2i(j,i));
                }
            }

            blobs.push_back(blob);

            label_count++;
        }
    }
} 
```

我使用标志 CV_FLOODFILL_FIXED_RANGE 使用了固定范围（**我使用的方式是否正确？？**）

我指定**loDiff=0 和 upDiff=6**。

我**预计** 当种子变为 170 时，170-0 到 170+6 范围内的所有点，即**170 到 176**（**外矩形和内椭圆**）都被相同的标签填充，并且由于内矩形是 180，它会有不同的标签。

但是我得到如下输出： -

![在此处输入图像描述](../Images/32f9ea33a924d27461839014f2ee0cf3.png)

**外矩形和内椭圆没有相同的标签**。可能是什么错误？

预期 o/p ：内椭圆也是橙色（与外矩形相同）

# cocos2d-iphone - CCLabelTTF 颜色 - 渐变可能吗？

> ID：14920183
> 
> 赞同：0
> 
> 时间：2013-02-17T10:36:37.523
> 
> 标签：cocos2d-iphone

我使用代码在我的游戏中创建标签：

```
 CCLabelTTF *label = [[CCLabelTTF alloc] initWithString:@"COMBO x1" dimensions:CGSizeMake(200,100)
                                                             alignment:UITextAlignmentCenter fontName:@"Helvetica" fontSize:HD_TEXT(25.0f)];
                label.color = ccc3(255,0,0);
                [self addChild:label z:0 tag:44]; 
```

这给了我一个红色标签。但我想要一个渐变色标签。可以使用 CCLabelTTF 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:36:18.060

不，请改用位图字体。Glyph Designer 使您能够为字符创建渐变和阴影。

Hiero 也可以做到这一点，但我不推荐这个工具，它充满了错误并且用户界面很糟糕。

# android - 检索 android:entries 的参数

> ID：14920188
> 
> 赞同：0
> 
> 时间：2013-02-17T10:36:47.707
> 
> 标签：android

我正在对类进行子`Spinner`类化，我需要通过 .xml 文件获取 xml 文件中指定的对象`android:entries`。我怎样才能做到这一点？

```
<com.myapp.MySpinner
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:entries="@array/myarray"/> 
```

所以我需要`entries`参数中指定的数组或resourceid，这样我就可以自己获取它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:37:17.033

您需要覆盖参数的构造函数`Spinner`并从`AttributeSet`参数中检索条目。

```
public class MySpinner extends Spinner {
    public MySpinner(Context context, AttributeSet attrs) {
        super(context, attrs);

        if (attrs != null) {
            final int[] ids = {android.R.attr.entries};
            final TypedArray array = context.obtainStyledAttributes(attrs, ids);
            final int entriesId = array.getResourceId(0, 0);

            if (entriesId > 0) {
                final Resources resources = context.getResources();
                final String[] entries = resources.getStringArray(entriesId);

                if (entries != null) {
                    // do whatever you want here
                }
            }
        }
    }
} 
```

# javascript - 用js构建锚点

> ID：14920193
> 
> 赞同：-1
> 
> 时间：2013-02-17T10:37:01.657
> 
> 标签：javascript, html, dom

我正在尝试使用 JavaScript 构建以下 HTML：

```
<td> <a data-toggle="modal" class="btn" href="sales.asp?origen=NY&number=036529" data-target="#myModal">View Sale</a> </td> 
```

我正在尝试使用以下代码构建它，但出现错误：

```
document.write("<td> <a data-toggle='modal' class='btn' href=....... 
```

有谁知道该怎么做？

我的脚本就是这个，我想添加一个按钮来打开一个模式窗口，该窗口显示一个页面，该页面的参数取自“for”

```
<script>
   if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
 }
  else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
  xmlhttp.open("GET","xml/xml_compras.asp?origen=granada",false);
  xmlhttp.send();
  xmlDoc=xmlhttp.responseXML; 

 document.write("<table class='table table-striped table-condensed table-bordered' id='example'>");
document.write("<thead>");
  document.write("<tr class='odd gradeX'>");
  document.write("<th>Albaran</th>");
    document.write("<th>Proveedor</th>");
    document.write("<th>F. Albaran</th>");
    document.write("<th>F. Servicio</th>");
    document.write("<th>Articulo</th>");
    document.write("<th>Cantidad</th>");
    document.write("<th class='hidden-phone'>Precio</th>");
    document.write("<th class='hidden-phone'>Importe</th>");
    document.write("<th>Alb. Venta</th>");
 document.write("</tr>");
 document.write(" </thead>");
var x=xmlDoc.getElementsByTagName("item");

for (i=0;i<x.length;i++)
{ 
document.write("<tr>");
document.write("<td>");  document.write(x[i].getElementsByTagName("numeroAlbaran")[0].childNodes[0].nodeValue);  document.write("</td>");
document.write("<td>");  document.write(x[i].getElementsByTagName("proveedor")[0].childNodes[0].nodeValue);  document.write("</td>");
document.write("<td>");  document.write(x[i].getElementsByTagName("fechaAlbaran")[0].childNodes[0].nodeValue);  document.write("</td>");
document.write("<td>");  document.write(x[i].getElementsByTagName("fechaServicio")[0].childNodes[0].nodeValue);  document.write("</td>");
document.write("<td>");  document.write(x[i].getElementsByTagName("articulo")[0].childNodes[0].nodeValue);  document.write("</td>");
document.write("<td>");  document.write(x[i].getElementsByTagName("cantidad")[0].childNodes[0].nodeValue);  document.write("</td>");
document.write("<td class='hidden-phone'>");     document.write(x[i].getElementsByTagName("precio")[0].childNodes[0].nodeValue);      document.write("</td>");
 document.write("<td class='hidden-phone'>");    document.write(x[i].getElementsByTagName("importe")[0].childNodes[0].nodeValue);    document.write("</td>");
 document.write("<td>");  document.write(x[i].getElementsByTagName("albaranVenta")[0].childNodes[0].nodeValue);  document.write("</td>");
var url = document.write(x[i].getElementsByTagName("importe")[0].childNodes[0].nodeValue);
 //alert(url);
 document.write("<td> <a data-toggle='modal' class='btn' href="'+url+'"> data-target='#myModal'>click me</a> </td>")

document.write("</tr>");
}
document.write("</table>");
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:54:03.110

使用带有 DOM API 的 vanilla JavaScript：

```
// creating the desired elements
var td = document.createElement('td');
var a = document.createElement('a');

// applying attributes
a.setAttribute('data-toggle', 'modal');
a.setAttribute('data-target', '#myModal');
a.setAttribute('class', 'btn');
a.setAttribute('href', 'sales.asp?origen=NY&number=036529');

// textContent is preferred to innerHTML of innerText due consistency issues
a.textContent = 'View Sale';

// injecting the anchor into the table cell
td.appendChild(a);

// placing all of this into the DOM
document.getElementsByTagName('body')[0].appendChild(td); 
```

* * *

[[![jsfiddle-图标](../Images/4f01ed4444d75d3eb784278efe5ac723.png)] **jsFiddle 上的演示**](https://i.stack.imgur.com/XcOfc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:03:10.960

正如其他人所说`document.write()`，将覆盖您页面的其余部分。更重要的是，即使它确实有效，它如何知道将表格单元格放在哪里？

反而：

1.  在文档上创建元素。

    ```
    var td = document.createElement('td'); 
    ```

2.  它尚未正确添加到 DOM 中，但没关系。接下来我们需要创建内容，即进入单元格内的链接。您可以以与 类似的方式执行此操作，`<td>`但无论是在编写方面还是在代码性能方面，将其添加`innerHTML`到`td`. 像这样：

    ```
    td.innerHTML = '<a data-toggle="modal" class="btn" href="sales.asp?origen=NY&number=036529" data-target="#myModal">View Sale</a>' 
    ```

3.  最后，添加`td`到文档中您希望它出现的位置。

    ```
    // `table` should be the table you want to add the cell to
    // for example, if your table has the id 'table'...
    var table = document.getElementById('table'); // will get table

    table.appendChild(td); // will append `td`, your cell and link to the table 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:25:38.870

这是我想要的正确方法，所以我创建表并插入一个带有链接的按钮，该链接由数组的元素组成：

```
 <script>
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
 }
  else
 {// code for IE6, IE5
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","xml/xmlBuys.asp?origen=NY",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table class='table table-striped table-condensed table-bordered' id='example'>");
document.write("<thead>");
  document.write("<tr class='odd gradeX'>");

    document.write("<th>Button</th>");
 document.write("</tr>");
 document.write(" </thead>");
 var x=xmlDoc.getElementsByTagName("item");

 for (i=0;i<x.length;i++)
 { 
 document.write("<tr>");

 document.write("<td> <a data-toggle='modal' class='btn' href='sales.asp?origen=NY&number="); document.write(x[i].getElementsByTagName("numSale")[0].childNodes[0].nodeValue); document.write("' data-target='#myModal'>  View Sale  </a> ");                document.write("</td>");

 document.write("</tr>");
 }
document.write("</table>");  
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T10:49:46.667

在 jQuery 中，您可以创建指向 google 的链接并将其附加到 id 为“content”的元素，如下所示：

```
 $("<a/>",{"href":"http://www.google.com"}).text("Google").appendTo("#content"); 
```

JSFiddle 在这里：http: [//jsfiddle.net/AstFZ/](http://jsfiddle.net/AstFZ/)

# mysql - 跳过多个表mysql查询中的内部连接

> ID：14920194
> 
> 赞同：0
> 
> 时间：2013-02-17T10:37:05.807
> 
> 标签：mysql, sql

我构建了一个大型脚本，其中有几个内部连接作为“条件”（而不是使用 WHERE 子句）。作为示例：

```
SELECT T1.*
FROM Table1 T1
    INNER JOIN Table2 T2
        ON T1.id = T2.id
    INNER JOIN Table3 T3
        ON T2.id = T3.id
    INNER JOIN Table4 T4
        ON T1.id = T4.id 
```

ETC...

在某些情况下，我需要跳过一个或几个内部连接。到现在为止，我不得不复制脚本，用我不需要的连接注释掉那些行。是否有任何方法可以使用变量或 IF 子句来跳过连接，或者至少是“全选”方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:12:37.190

假设 php：

```
$SQL = "
SELECT T1.*
FROM Table1 T1
    INNER JOIN Table2 T2
        ON T1.id = T2.id" . ($variable1 == x ? " OR TRUE=TRUE" : "") . "
    INNER JOIN Table3 T3
        ON T2.id = T3.id" . ($variable2 == y ? " OR TRUE=TRUE" : "") . "
    INNER JOIN Table4 T4
        ON T1.id = T4.id" . ($variable3 == z ? " OR TRUE=TRUE" : "") 
```

但我确定您应该动态构建查询：

```
$SQL = "
SELECT T1.*
FROM Table1 T1";

if ($variable1 == x) {
    $SQL .= " INNER JOIN Table2 T2 ON T1.id = T2.id";
}

if ($variable2 == y) {
    $SQL .= " INNER JOIN Table3 T3 ON T2.id = T3.id";
}

if ($variable3 == z) {
    $SQL .= " INNER JOIN Table4 T4 ON T3.id = T4.id";
} 
```

等与您的所有加入。

# computer-architecture - 负载需要对齐网络吗？

> ID：14920195
> 
> 赞同：0
> 
> 时间：2013-02-17T10:37:05.967
> 
> 标签：computer-architecture, addressing

**我在阅读有关计算机体系结构中的内存寻址的**一些内容时遇到了这一行-“无论如何，负载都需要对齐网络” ，但不明白它的含义。有谁知道这可能意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T22:52:32.960

对齐网络实际上只是一个移位器。高速缓存（或存储器）读取接口通常是最宽的单个加载（不包括，例如，加载多字指令）的宽度。例如，一个简单的 32 位处理器通常具有 32 位宽的读取接口（不包括奇偶校验位或 ECC 位）。

当较小的值被加载到寄存器中时，它被放置在寄存器的最小有效部分。除非该值恰好位于更广泛值的最不重要部分，否则有必要移动该值。（该值也是零或符号扩展，删除读取的值的任何更多有效位。）

# java - 带有活动和杜松子酒的 gwt mvp 模式

> ID：14920196
> 
> 赞同：1
> 
> 时间：2013-02-17T10:37:09.677
> 
> 标签：java, gwt, gwt-mvp

我是 GWT MVP 的新手。我已经阅读了 Google 网站上提供的 MVP 文档，并在其他网站上进行了搜索。但是我对 MVP、activities 和 gin 感到困惑。你能不能给我推荐一些好的网站，这些网站已经通过完整的例子提供了很好的解释。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:08:33.103

我有一个使用 GIN 与活动和 MVP 的简单示例，以 Maven 原型的形式（但代码应该足够简单，您可以在不使用 Maven/原型的情况下阅读它）：[https ://github.com/ tbroyer/gwt-maven-archetypes/tree/master/guice-rf-activities/src/main/resources/archetype-resources/__rootArtifactId__-client/src/main/java](https://github.com/tbroyer/gwt-maven-archetypes/tree/master/guice-rf-activities/src/main/resources/archetype-resources/__rootArtifactId__-client/src/main/java)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T10:58:11.167

GIN 是 Google 自主开发的依赖注入框架[GUICE](http://code.google.com/p/google-guice/)的一个主要基于 GWT 的版本。

但是因为 GWT 应用程序运行在浏览器 JavaScript 引擎之上而不是在 JVM 之上，所以 GIN 中没有一些 GUICE 功能。

[你可以在这里](http://www.canoo.com/blog/2011/04/05/gwt-dependency-injection-recipes-using-gin/)找到明确的解释

GWT 官方网站本身记录了`GIN Tutorial`

下面的链接会将您重定向到 GIN 的入门教程

[http://code.google.com/p/google-gin/wiki/GinTutorial](http://code.google.com/p/google-gin/wiki/GinTutorial)

您可以在下面的链接中找到与同一示例相关的示例代码

[http://code.google.com/p/google-gin/source/browse/#svn%2Ftags%2F2.0.0%2Fsamples](http://code.google.com/p/google-gin/source/browse/#svn%2Ftags%2F2.0.0%2Fsamples)

# java - 如何在java中使用查询字符串发送超过255个字节的字符串

> ID：14920200
> 
> 赞同：0
> 
> 时间：2013-02-17T10:37:37.053
> 
> 标签：java, javascript, jsp

我想在 JAVA 中将超过 255 个字节的字符串从一个页面发送到另一个页面，（即 var a="abcd......(8000 character)" 现在我想将此变量传递给查询字符串，但它给出了错误。

那么我怎样才能将这些数据传递到下一页。

请给出一些解决方案

我正在使用 json 如下：

```
xmlHTTP=new XMLHttpRequest();
var url="path of jsp page?data=xyz"
xmlHTTP.open("POST",url,true);
xmlHTTP.send(null); 
```

这里 data=xyz 并且我想使用查询字符串发送超过 80000 个 xyz 数据替换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T10:41:16.190

使用 POST 而不是 GET。查询字符串的长度是有限的，您对此无能为力。如果要发送大量数据，请使用 POST 而不是 GET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:15:43.990

在 JSP 中，您可以使用 request.setattribute() 进行设置和 request.getattribute() 用于在目标中获取它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:41:36.967

将您的 HTML 表单类型更改为“发布”

如果你使用 JSON，这可能对 JSON POST 请求有帮助

[使用 JSON POST 请求](https://stackoverflow.com/questions/11456771/using-json-post-request)

# mule - Mule ESB - 如何使用 POST 方法创建 HTTP 请求（一起发送参数）

> ID：14920203
> 
> 赞同：2
> 
> 时间：2013-02-17T10:38:17.803
> 
> 标签：mule, mule-studio

简短：我想使用 POST 方法将几个参数（如 user=admin、key=12345678）发布到 PHP 页面（如 localhost/post-debug.php）。该脚本将读取 $_POST 值并执行任何操作。

我的问题是：

**1.我怎样才能让下面的例子工作？**

**2\. 如何从 JSON 编码的有效负载创建带有 POST 参数的地图有效负载并将其发送到 PHP 脚本？**

下面是我试图运行的一个孤立案例（参数是从 HTTP 端点“读取”的）。我直接从浏览器调用以下 URL：

`http://localhost:8081/httpPost?user=admin&key=12345678`

![骡流](../Images/37544e3eb7d53afe5a735623992a8072.png)

底层 XML：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <flow name="httpPostTestFlow1" doc:name="httpPostTestFlow1">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="httpPost" doc:name="HTTP"/>
            <http:body-to-parameter-map-transformer doc:name="Body to Parameter Map"/>

        <echo-component doc:name="Echo"/>
        <http:outbound-endpoint exchange-pattern="request-response" host="localhost/post-debug.php" port="80"  contentType="application/x-www-form-urlencoded" doc:name="HTTP" />
    </flow>
</mule> 
```

我正在使用 MuleStudio 1.3.2，Mule ESB v.3.3。

我已经审查了许多类似的问题，但没有一个让我走上正轨。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T17:37:19.060

这是问题 2 的解决方案（回答问题 1 无济于事）：

```
<flow name="httpPostTestFlow1">
    <http:inbound-endpoint exchange-pattern="request-response"
        host="localhost" port="8081" path="httpPost" />
    <json:json-to-object-transformer
        returnClass="java.util.Map" />
    <http:outbound-endpoint exchange-pattern="request-response"
        host="localhost" port="80" path="post-debug.php" method="POST"
        contentType="application/x-www-form-urlencoded" />
    <copy-properties propertyName="*" />
</flow> 
```

我使用以下方法检查它是否正常工作：

```
curl -H "Content-Type: application/json" -d '{"param1":"value1","param2":"value2"}' http://localhost:8081/httpPost 
```

请注意，我使用`copy-properties`将来自 PHP 脚本调用的所有响应标头传播回原始调用者。如果您不在乎，请删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:59:23.540

您是否尝试过像这样配置出站端点：

```
<http:outbound-endpoint exchange-pattern="request-response" host="localhost" port="80" path="post-debug.php" contentType="application/x-www-form-urlencoded" doc:name="HTTP" method="POST"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T23:10:21.273

问题有点老了，但只是遇到了同样的问题。我永远无法让**“body-to-parameter-map-transformer”**工作，所以我加入了一个自定义的 java 组件。它将 URLEncoded 参数字符串解析为 HashMap。基于此设置您的变量。

```
import java.util.HashMap;
import java.util.Iterator;

import org.json.JSONException;
import org.json.JSONObject;

public class ParseParams {

    public static HashMap<String, String> jsonToMap(String t) throws JSONException {

        HashMap<String, String> map = new HashMap<String, String>();
        JSONObject jObject = new JSONObject(t);
        Iterator<?> keys = jObject.keys();

        while( keys.hasNext() ){
            String key = (String)keys.next();
            String value = jObject.getString(key); 
            map.put(key, value);

        }

        return map;

    }

} 
```

# matlab - 有没有办法执行do-while？

> ID：14920206
> 
> 赞同：16
> 
> 时间：2013-02-17T10:38:43.560
> 
> 标签：matlab, loops, do-while

我打算`do-while`在 MATLAB 中使用循环。
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-17T10:56:01.767

```
while(true)

%code

    if condition==false
        break; 
    end 
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-16T09:28:08.480

Here's another option in MATLAB (more close to a `do-while` syntax):

```
do = true;
while(do || condition)
    % things to do...
    do = false;
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-16T09:18:48.543

至少，[八度](https://www.gnu.org/software/octave/doc/interpreter/The-do_002duntil-Statement.html)有`do-until`。此示例创建一个`fib`包含斐波那契数列的前十个元素的变量。

```
fib = ones (1, 10);
i = 2;
do
  i++;
  fib (i) = fib (i-1) + fib (i-2);
until (i == 10) 
```

当然，与`do-while`.

# css - 是否可以使用带有内联样式的 last-child 而不是在 CSS 文件中？

> ID：14920210
> 
> 赞同：0
> 
> 时间：2013-02-17T10:38:50.267
> 
> 标签：css, xslt, css-selectors

我在 XSLT 文件中设置元素的样式，因此所有样式都在此处完成。我想从最后一个列表元素中删除边框底部，但不知道如何在 XSLT 中应用它。这是我的代码：

```
 <xsl:element name="div">
                <xsl:attribute name="style">
                    <xsl:text>width:120px; margin:0 auto; padding: 0; border: 1px solid black; border-radius: 15px;padding-bottom: 20px; background: #6A819E; margin-top: 20px;</xsl:text>
                </xsl:attribute>
                <xsl:element name="ul">
                    <xsl:attribute name="style">
                        <xsl:text>width:120px; margin:0 auto; padding: 0; background: #6A819E;</xsl:text>
                    </xsl:attribute>
                    <xsl:for-each select="flights/flight"> 
                        <xsl:apply-templates select="route" />
                    </xsl:for-each> 
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:element>
</xsl:template>

<xsl:template match="route">
    <xsl:element name="li">
        <xsl:attribute name="style">
            <xsl:text>list-style-type:none; width:120px; margin:0 auto;  margin-top: 20px; border-bottom: 1px solid black; text-align:center; background: #6A819E;</xsl:text>
            <xsl:if test="position() = last()">border: none;</xsl:if>
        </xsl:attribute>
        <a><xsl:attribute name="href">map.php?a=<xsl:value-of select="from/latitude" />&amp;b=<xsl:value-of select="from/longitude" />&amp;c=<xsl:value-of select="to/latitude" />&amp;d=<xsl:value-of select="to/longitude" />&amp;e=<xsl:value-of select="routename" /></xsl:attribute><xsl:attribute name="style">
                <xsl:text> text-decoration:none; color:black;</xsl:text>
            </xsl:attribute>
            <xsl:value-of select="routename" />
        </a>
    </xsl:element> 
```

您可以在列表样式中看到我最后应用了最后一个孩子，我现在这是错误的，但我想不出另一种方法来做到这一点。我还可以问，这是对 XSLT 文件应用样式的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:44:10.010

您应该尝试以下方法：

```
 <xsl:attribute name="style">
        <xsl:text>list-style-type:none; width:120px; margin:0 auto;  margin-top: 20px; border-bottom: 1px solid black; text-align:center;</xsl:text>
        <xsl:if test="position() = last()">border: none;</xsl:if>
 </xsl:attribute> 
```

您还可以使用 CSS 类而不是使用内联样式。在这种情况下，您应该能够使用 CSS 中的最后一个子选择器（但是，IE7、IE8 不支持此选择器（[http://caniuse.com/#search=%3Alast-child](http://caniuse.com/#search=%3Alast-child)）。

更新1：如果有文本节点插入路由元素，上述方法将不起作用，因此另一种方法是为最后一个元素使用不同的模板。

```
<xsl:template match="route[last()]">
    <!-- Special behavior for last element -->
</xsl:template> 
```

更新 2：使用 if 语句同时忽略与路由不同的所有节点的另一个选项是：

```
<xsl:if test="not(following-sibling::route)">border:none;</xsl:if> 
```

# java - Eclipse，无法解决

> ID：14920211
> 
> 赞同：1
> 
> 时间：2013-02-17T10:38:54.350
> 
> 标签：java, eclipse, debugging

这是一本关于应用程序开发的教科书。

```
import java.awt.TextField;

public class ESA
{
    public void init()
    {
        TextField abc = new TextField();
    }
    public void doSomething()
    {
        abc.setText("Hello World");
    }
} 
```

问题是：代码中有一个错误，应该有办法用 Eclipse 解决它。教科书没有给出解决方案。

在我看来，问题是“abc.setText” Eclipse 有 6 个快速修复，但它们都不起作用。

有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T10:39:52.790

该`TextField`变量`abc`在方法的范围内不可用，`doSomething`因为它是在本地定义的`init`。它既可以声明为类成员变量，也可以传递给方法。你可以添加

```
private TextField abc; 
```

并更换

```
TextField abc = new TextField(); 
```

和

```
abc = new TextField(); 
```

[了解实例和类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:01:54.747

```
import java.awt.TextField;

public class ESA
{
    private TextField abc;
    public void init()
    {
       abc = new TextField();
    }
    public void doSomething()
    {
        abc.setText("Hello World");
    }
} 
```

这应该有效。在您的代码`abc`中无法访问。`doSomething()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T18:45:36.107

我遇到这个问题是因为我研究了同样的问题，也许是同一本教科书。

所以这就是为什么我想回答这个问题，即使它已经两岁了。

“……应该有办法用Eclipse解决。教科书上没有给出解决方案。”

这里最简单的方法是“重构”。右键单击“abc”，然后选择“重构”并在子菜单中“将局部变量转换为字段”。

代码中所有需要的更改都将由 Eclipse 自己完成。生成的代码与其他解决方案中已发布的代码相同。

# playframework-2.0 - 播放表单：从安全操作映射 request.user？

> ID：14920214
> 
> 赞同：0
> 
> 时间：2013-02-17T10:39:11.343
> 
> 标签：playframework-2.0, securesocial

当我使用 Play Forms 将请求映射到对象时，我希望能够接触到用户。为了让事情变得更简单，我还使用了 SecureSocial 框架，`request.user`securesocial.core.SocialUser 也是如此。

下面的代码是有问题的，因为映射的`doc`对象是一个不可变的案例类，所以我不能重新分配`lender`。如果可能的话，我宁愿保持不变性。

我是 Scala 菜鸟，所以不知道如何继续。

```
def create = SecuredAction() { implicit request =>
    models.Lendable.form.bindFromRequest.fold(
        errors => {
            BadRequest(errors.errorsAsJson)
        },
        doc => AsyncResult {
            // TODO: set the lender without mutating a val
            doc.lender = models.User.fromSocialUser(request.user)

            collection.insert(doc.copy()).map(_ => Ok)
        })
} 
```

感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:39:57.310

你可以这样：

```
doc => AsyncResult {
     val toInsert = doc.copy(lender = models.User.fromSecureUser(request.user))
     collection.insert(toInsert).map(_ => Ok)
} 
```

# php - PHP致命错误：无法访问空属性

> ID：14920216
> 
> 赞同：64
> 
> 时间：2013-02-17T10:39:20.860
> 
> 标签：php, fatal-error

我是新手`php`，我已经执行了下面的代码。

```
<?php
class my_class{

    var $my_value = array();
    function my_class ($value){
        $this->my_value[] = $value;
    }
    function set_value ($value){
    // Error occurred from here as Undefined variable: my_value
        $this->$my_value = $value;

    }

}

$a = new my_class ('a');
$a->my_value[] = 'b';
$a->set_value ('c');
$a->my_class('d');

foreach ($a->my_value as &$value) {
    echo $value;
}

?> 
```

我得到了以下错误。可能是什么错误？

```
Notice: Undefined variable: my_value in C:\xampp\htdocs\MyTestPages\f.php on line 15

Fatal error: Cannot access empty property in C:\xampp\htdocs\MyTestPages\f.php on line 15 
```

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-02-17T10:41:02.613

您以错误的方式访问该物业。使用该`$this->$my_value = ..`语法，您可以使用 $my_value 中的值名称设置属性。你想要的是`$this->my_value = ..`

```
$var = "my_value";
$this->$var = "test"; 
```

是相同的

```
$this->my_value = "test"; 
```

要从您的示例中修复一些问题，下面的代码是一种更好的方法

```
class my_class {

    public  $my_value = array();

    function __construct ($value) {
        $this->my_value[] = $value;
    }

    function set_value ($value) {
        if (!is_array($value)) {
            throw new Exception("Illegal argument");
        }

        $this->my_value = $value;
    }

    function add_value($value) {
        $this->my_value = $value;
    }
}

$a = new my_class ('a');
$a->my_value[] = 'b';
$a->add_value('c');
$a->set_value(array('d')); 
```

这确保了 my_value 在您调用 set_value 时不会将其类型更改为字符串或其他内容。但是您仍然可以直接设置 my_value 的值，因为它是公开的。最后一步是，将 my_value 设为私有，并且只能通过 getter/setter 方法访问 my_value

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-17T10:41:53.987

首先，不要使用 var 声明变量，但是

```
public $my_value; 
```

然后你可以使用它访问它

```
$this->my_value; 
```

并不是

```
$this->$my_value; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-17T10:41:14.167

要访问类中的变量，您必须使用`$this->myVar`而不是`$this->$myvar`.

而且，您应该使用访问标识符来声明一个变量，而不是`var`.

[请在此处](http://www.php.net/manual/en/language.oop5.basic.php)阅读文档。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-17T10:51:19.137

正如我在您的代码中看到的那样，您似乎正在关注有关基于 PHP4 的 PHP 中 OOP 的旧文档/教程（OOP 不受支持，但以某种方式适应以简单的方式使用），因为 PHP5 添加了官方支持并且符号已经从原来的样子改变了。

请在此处查看此代码审查：

```
<?php
class my_class{

    public $my_value = array();

    function __construct( $value ) { // the constructor name is __construct instead of the class name
        $this->my_value[] = $value;
    }
    function set_value ($value){
    // Error occurred from here as Undefined variable: my_value
        $this->my_value = $value; // remove the $ sign
    }

}

$a = new my_class ('a');
$a->my_value[] = 'b';
$a->set_value ('c'); // your array variable here will be replaced by a simple string 
// $a->my_class('d'); // you can call this if you mean calling the contructor 

// at this stage you can't loop on the variable since it have been replaced by a simple string ('c')
foreach ($a->my_value as &$value) { // look for foreach samples to know how to use it well
    echo $value;
}

?> 
```

我希望它有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T10:46:41.143

有趣的：

1.  你声明了一个数组 `var $my_value = array();`
2.  将价值推入其中 `$a->my_value[] = 'b';`
3.  将字符串分配给变量。（所以它不再是数组）`$a->set_value ('c');`
4.  试图将一个值推送到数组中，该值不再存在。（这是字符串）`$a->my_class('d');`

你`foreach`不会再工作了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-30T10:41:37.193

这样您就可以创建一个具有自定义属性名称的新对象。

```
$my_property = 'foo';
$value = 'bar';
$a = (object) array($my_property => $value); 
```

现在你可以像这样到达它：

```
echo $a->foo;  //returns bar 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-21T21:21:32.317

我意识到这个答案不是对 OP 描述的问题的直接回应，但我发现这个问题是由于搜索相同的错误消息。我认为值得在这里发布我的经验，以防万一有人对同样的事情感到困惑......

`for`由于关联数组上的循环格式不正确，您可能会遇到相关错误。出于头脑清醒，我在`for`声明中使用 -> 而不是 => ：

```
 foreach ($object->someArray as $key->$val) {
            // do something
        } 
```

当然，我应该有：

```
 foreach ($object->someArray as $key=>$val) {
            // do something
        } 
```

起初我很困惑，认为报告的错误是指 someArray 属性！

# .net - UTF-8 原始字符？到普通字符串

> ID：14920217
> 
> 赞同：0
> 
> 时间：2013-02-17T10:39:41.913
> 
> 标签：.net, vb.net, encoding, utf-8

我想将 utf-8（或 unicode）文本解码为普通字符串。

例如，我想将 "\uc778\uc0b0\uc544\uc5f0\uc2dc\uba58\ud2b8, \uce58\uba74\uc5f4\uad6c\uc804\uc0c9\uc81c" 类型的字符串转换为可读文本。

我在 system.text.utf8encoding text.encoding.utf8.getstring() 上苦苦挣扎，但它不起作用......

我该如何解决这个问题？看来解决方案会很简单......如果可能的话，如果你在VB.Net中编写代码会很棒

感谢您的意见！

* * *

感谢回复。

我想我没有把我的观点写清楚。

问题是我想转换“\uc885\ud569\uc9c4\ub8cc\uc2e4 \uacac\ud559 / \uce58\uacfc\uc758\uc0ac\uc724\ub9ac \ud1a0\ub860”（unicode'code'，而不是'字符') 到一个可读的字符串，例如，“가나다라”。或者中文什么的。

而且，我需要 .NET 代码来做到这一点。

试过了

```
theString = Convert.toString("\uc885\ud569"); 
```

试过了

```
Dim utf8Encoding As New System.Text.UTF8Encoding
Dim encodedString() As Byte
encodedString = utf8Encoding.GetBytes(encodedString) ..... 
```

还有一些，但没有任何东西可以将“\uc885\ud569”转换为“가나”。（这是一个例子。我知道每个 '\u????' 代码都匹配一个字符，例如 '가'）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:53:48.973

我想我终于明白问题所在了。类似的字符串与**C# 中**`"\uc778\uc0b0"`的字符串完全相同（它是 UTF-16，而不是 UTF-8）。但是 VB.NET 不理解这样的转义序列。`"인산"`

 **我认为这里最好的选择是直接编写 Koren 字符，比如`"인산"`有效的 VB.NET 代码。

如果你真的需要使用类似 C# 的转义序列，[你可以使用`Regex.Unescape()`](https://stackoverflow.com/a/5095260/41071)：

```
Dim escaped = "\uc778\uc0b0\uc544\uc5f0\uc2dc\uba58\ud2b8, \uce58\uba74\uc5f4\uad6c\uc804\uc0c9\uc81c"
Dim unescaped = Regex.Unescape(escaped) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:42:51.040

你不需要做任何事情来转换它。

文字是中文字符（或类似的亚洲字符）

我猜只是输出它。为我工作。

我只是`Console.WriteLine()`从 linqpad 做了一个。

每个 \uXXXX 都是特定字符的 unicode 值。**

# axapta - Dynamics AX 2012 Form\Datasource\Links 和参考数据源

> ID：14920220
> 
> 赞同：0
> 
> 时间：2013-02-17T10:40:15.353
> 
> 标签：axapta, microsoft-dynamics, dynamics-ax-2012

在 MicroSoft Dynamcis AX 2012 中，我对Form 的 DataSource 节点下的那些**链接**和**引用数据源感到非常困惑。**

他们在那里做什么？他们如何到达那里？

![在此处输入图像描述](../Images/e37879e8e16c94a8989b27ee03374db2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T13:42:33.637

看看 MSDN 对它们的评价：http: [//msdn.microsoft.com/en-us/library/gg845085.aspx](http://msdn.microsoft.com/en-us/library/gg845085.aspx)

当您的数据源中有外键字段时，基本上会使用参考数据源。您可以使用参考数据源中的字段而不是代理键值来显示更有意义的字段，而不是在表单上显示表的外键值。

我经常使用它们作为比简单显示方法更好的选择。SQL 连接记录并提供所有需要的字段，而不必执行所有这些显示方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:49:33.977

它们的另一个好处是您不必添加大量数据源以供参考使用，也不必担心意外删除/插入/更新该表中的值（当您忘记更改 AllowEdit/AllowDelete/AllowCreate 和/ 或覆盖 write() 方法）

# flash - 在 flash builder 4.7 上-如何让我的文件从网址而不是从 file://

> ID：14920221
> 
> 赞同：1
> 
> 时间：2013-02-17T10:40:16.477
> 
> 标签：flash, flash-builder, flashbuilder4

我需要从包含的 HTML 访问一些服务，例如 facebook，我一直被阻止，因为我在本地运行东西......我需要做什么才能让在调试项目时启动的网页运行来自[http://www.something.com](http://www.something.com)？

# javascript - While循环和innerHTML

> ID：14920224
> 
> 赞同：0
> 
> 时间：2013-02-17T10:40:27.850
> 
> 标签：javascript

我不确定我的 while 循环或代码的 innerHTML 部分是否有问题，但是当单击提交按钮时，我无法在 div 标签中显示下拉列表。任何人都可以看到它有什么问题。

```
<html>
<head>
<script type="text/javascript">

function getvalue() {
 number = document.getnumber.input.value;
 document.getElementById("result").value = number; 
} 
</script>

</head>
<body>

<script>
function generatedropdown() {
html = '<select name="select" id="i">';
while (i < number)  {            
html+='<option>Test 1</option>';
html+='<option>Test 2</option>';
html+='<option>Test 3</option>';
html+='<option>Test 4</option>';
html+='<option>Test 5</option>';        
i++;
}
html+='</select>';
document.getElementById("my-output").innerHTML = html;
}
</script>

<form name="getnumber">
Input number: <input type="text" name="input">
<input type="button" value="Next" onClick="getvalue()">
</form>

<form id="showlists">
Number entered: <input type="text" id="result" readonly="readonly">     
<input type="button" value="Show lists" onClick="generatedropdown()">
<div id="my-output">Generated List:</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T10:45:22.923

几个问题：

*   您从未为 设置初始值`i`，因此代码将引发错误，因为您正在尝试读取从未设置或声明的全局值。

*   你依赖于`getvalue`被调用来初始化`number`，我不会指望它。

*   您依赖于隐式字符串-> 数字转换，我不建议这样做；用于`parseInt`解析用户提供的数字。

*   （可选）您的循环正是该`for`构造的设计目的，而不是`while`（尽管`while`如果您初始化了它会起作用`i`）。

*   [*你正在成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)牺牲品，因为你从来没有声明你的变量。

我建议阅读关于 JavaScript 的良好入门或教程，以掌握基础知识。

这是一个*最小的*更新：

```
function generatedropdown() {
    // Declare your variables
    var html, i, number;

    // Get the number, and convert it from a decimal string
    // to a number explicitly rather than relying on implicit
    // coercion
    number = parseInt(document.getvalue.input.value, 10);

    // Probably bail if it's not a number
    if (isNaN(number)) {
        return;
    }

    // (Optional, but you were doing it) Show the number
    document.getElementById("result").value = number;

    // Build your HTML
    html = '<select name="select" id="i">';

    // This is exactly what `for` loops are for
    for (i = 0; i < number; ++i) {
        html+='<option>Test 1</option>';
        html+='<option>Test 2</option>';
        html+='<option>Test 3</option>';
        html+='<option>Test 4</option>';
        html+='<option>Test 5</option>';        
    }
    html+='</select>';
    document.getElementById("my-output").innerHTML = html;
} 
```

# hadoop - 如何防止hadoop作业在损坏的输入文件上失败

> ID：14920236
> 
> 赞同：8
> 
> 时间：2013-02-17T10:41:33.463
> 
> 标签：hadoop, mapreduce, cascading

我在许多输入文件上运行 hadoop 作业。但是，如果其中一个文件损坏，整个工作就会失败。

我怎样才能让工作忽略损坏的文件？也许为我写一些计数器/错误日志，但**不会**让整个工作失败

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T14:07:06.910

这取决于你的工作失败的地方——如果一行损坏，并且在你的 map 方法中的某个地方抛出了一个异常，那么你应该能够用 try / catch 包装你的 map 方法的主体并记录错误：

```
protected void map(LongWritable key, Text value, Context context) {
  try {
    // parse value to a long
    int val = Integer.parseInt(value.toString());

    // do something with key and val..
  } catch (NumberFormatException nfe) {
    // log error and continue
  }
} 
```

但是如果错误是由 InputFormat 的 RecordReader 引发的，那么您需要修改 mappers`run(..)`方法 - 默认实现如下：

```
public void run(Context context) {
  setup(context);
  while (context.nextKeyValue()) {
    map(context.getCurrentKey(), context.getCurrentValue(), context);
  }
  cleanup(context);
} 
```

因此，您可以修改它以尝试捕获`context.nextKeyValue()`调用中的异常，但您必须小心忽略阅读器抛出的任何错误 - 例如，IOExeption 可能无法通过忽略错误来“跳过”。

如果您已经编写了自己的 InputFormat / RecordReader，并且您有一个表示记录失败但允许您跳过并继续解析的特定异常，那么这样的事情可能会起作用：

```
public void run(Context context) {
  setup(context);
  while (true) {
    try {
      if (!context.nextKeyValue()) { 
        break;
      } else {
        map(context.getCurrentKey(), context.getCurrentValue(), context);
      }
    } catch (SkippableRecordException sre) {
      // log error
    }

  }
  cleanup(context);
} 
```

但只是为了重新迭代-您的 RecordReader 必须能够在错误时恢复，否则上述代码可能会将您送入无限循环。

对于您的特定情况-如果您只想在第一次失败时忽略文件，那么您可以将 run 方法更新为更简单的方法：

```
public void run(Context context) {
  setup(context);
  try {
    while (context.nextKeyValue()) {
      map(context.getCurrentKey(), context.getCurrentValue(), context);
    }
    cleanup(context);
  } catch (Exception e) {
    // log error
  }
} 
```

最后的一些警告：

*   您需要确保不是您的映射器代码导致引发异常，否则您将因错误原因忽略文件
*   非 GZip 压缩的 GZip 压缩文件实际上会在记录读取器的初始化中失败 - 所以上面不会捕获这种类型或错误（您需要编写自己的记录读取器实现）。对于在记录读取器创建期间引发的任何文件错误都是如此

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:30:23.437

这就是*故障陷阱*在级联中的用途：

> 每当操作失败并抛出异常时，如果存在关联的陷阱，则将有问题的 Tuple 保存到陷阱 Tap 指定的资源中。这允许作业继续处理而不会丢失任何数据。

这基本上可以让您的工作继续进行，并让您稍后检查损坏的文件

如果您对流定义语句中的级联有点熟悉：

```
 new FlowDef().addTrap( String branchName, Tap trap ); 
```

[失败陷阱](http://docs.cascading.org/cascading/2.1/userguide/htmlsingle/#N21383)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:15:23.223

还有另一种可能的方式。您可以使用`mapred.max.map.failures.percent`配置选项。当然，这种解决这个问题的方法也可以隐藏在地图阶段发生的一些其他问题。

# python - 带有包含文件的 f2py

> ID：14920244
> 
> 赞同：1
> 
> 时间：2013-02-17T10:42:17.913
> 
> 标签：python, fortran, f2py

我正在编译一个名为 prog.f 的 fortran 程序。它包含一个名为 test.inc 的包含文件。下面成功运行并显示我的包含文件已找到。我生成了一个 prog.so 文件。

```
f2py -c prog.f -m prog 
```

但是，当我从 python 调用此模块时，我收到此错误消息：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import prog
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: ./prog.so: undefined symbol: unknown_function_ 
```

我怀疑与我的编译参数有关，但我对 Fortran 不太熟悉。我还需要包含我的包含文件吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:05:08.177

是的，您需要包含文件。它可能很简单：

```
f2py -c include_file.f prog.f -m prog 
```

虽然我没有测试过。或者，您可能需要使用 fortran`include`语句将其包含`include_file`到`prog`... 此外，如果您更熟悉 C，我所知道的几乎所有 fortran 编译器都使用`prog.F`应该由`cpp`. 因此，您可能也可以通过这种方式包含您的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-05T12:19:37.243

我也遇到了这个问题，并且能够找到其他讨论，简单地说当前的 f2py 不支持文件的预处理，例如#include 语句和条件编译。 [https://groups.google.com/forum/#!topic/f2py-dev/aW65sEoSdG8](https://groups.google.com/forum/#!topic/f2py-dev/aW65sEoSdG8)

[http://mail.scipy.org/pipermail/numpy-discussion/2009-November/046381.html](http://mail.scipy.org/pipermail/numpy-discussion/2009-November/046381.html)

两种解决方案： 最简单：如果您使用 gfortran 编译代码，请将任何 .f90 或 .f 文件重命名为 .F90 或 .F。使用大写字母键 gfortran 自动使用预处理器（即使您没有指定）。

第二：使用您的 Fortran 编译器预处理文件并将结果保存为中间 Fortran 代码以发送到 f2py。

```
gfortran -E -D<Defines-for-compiler> file.f -cpp  -o outdir/file.f 
```

其中 -E 是告诉 gfortran 仅预处理文件的命令（可能因编译器而异），而 -D 选项用于定义要在预处理期间使用的任何值。

必须将文件保存到另一个目录（或完全更改名称）以避免覆盖原始 .f 文件。

# php - 将多个变量与每个变量之间的空格回显到回显的表格单元格中

> ID：14920250
> 
> 赞同：0
> 
> 时间：2013-02-17T10:42:41.190
> 
> 标签：php, echo

```
 <?php if(isset($_SESSION['guest2First']))
echo '<tr><td>';
echo '<input type="text" name="guest2Ticket" id="guest2Ticket" onblur="isTicketNumber(this)"  size ="22"/>';
echo '</td><td>';
echo $first["guest2First"] , ' ', $middle["guest2Middle"] , ' ',$last["guest2Last"];
echo '</td></tr>'?> 
```

我有一个表单，它使用 $_SESSION 变量来使用上面的代码填写一些内容。

我需要做的是

1.  检查是否设置了变量
2.  如果它回显出一个包含两个单元格的新表格行
3.  在第一个单元格中回显一个输入框
4.  **在第二个单元格中回显 3 个变量，每个变量之间有一个空格**

除了 4 号外，一切似乎都运行良好。第二个单元格中没有任何内容。

我确定

```
echo $first["guest2First"] , ' ', $middle["guest2Middle"] , ' ',$last["guest2Last"]; 
```

是问题所在。**如何修复此语法以达到我想要的结果？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:05:59.787

这里有几个更好的语法选项：

```
<?php if(isset($_SESSION['guest2First'])){

$name = $_SESSION["guest2First"].
        (isset($_SESSION["guest2Middle"])?' '.$_SESSION["guest2Middle"]:null).
        (isset($_SESSION["guest2Last"])?' '.$_SESSION["guest2Last"]:null);
?>
<tr>
    <td><input type="text" name="guest2Ticket" id="guest2Ticket" onblur="isTicketNumber(this);" size ="22"/></td>
    <td><?php echo $name;?></td>
</tr>
<?php }?> 
```

或者

```
<?php 
if(isset($_SESSION['guest2First'])){
    echo '<tr>',
         '<td><input type="text" name="guest2Ticket" id="guest2Ticket" onblur="isTicketNumber(this);" size ="22"/></td>',
         '<td>'.$name.'</td>',
         '</tr>';
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:07:12.657

我认为您混合了 var 名称并表示 $_SESSION，而不是 $first、$middle、$last

```
<?php if(isset($_SESSION['guest2First']))
echo '<tr><td>';
echo '<input type="text" name="guest2Ticket" id="guest2Ticket" onblur="isTicketNumber(this)"  size ="22"/>';
echo '</td><td>';
echo $_SESSION["guest2First"] , ' ', $_SESSION["guest2Middle"] , ' ',$_SESSION["guest2Last"];
echo '</td></tr>'?> 
```

# iphone - 自定义 Segue 推送奇怪的行为

> ID：14920254
> 
> 赞同：2
> 
> 时间：2013-02-17T10:43:06.677
> 
> 标签：iphone, sdk, uigesturerecognizer, uistoryboard

我正在尝试一个简单的项目（故事板），用户从右向左滑动以进入下一个视图，依此类推，然后用户从左向右滑动。我想实现跟随滑动的过渡（L--> R 或 R--> L）。

我发现了这个：

```
-(void)perform {

    UIViewController *sourceViewController = (UIViewController*)[self sourceViewController];
    UIViewController *destinationController = (UIViewController*)[self destinationViewController];

    CATransition* transition = [CATransition animation];
    transition.duration = .25;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade
    transition.subtype = kCATransitionFromLeft; //kCATransitionFromLeft, kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromBottom

    [sourceViewController.navigationController.view.layer addAnimation:transition
                                                                forKey:kCATransition];

    [sourceViewController.navigationController pushViewController:destinationController animated:NO];

} 
```

但这似乎并没有做应该做的事情。

**解释：**

当我在横向（我的项目只在横向工作）并且主页按钮在左侧时，动画来自顶部！当我在横向并且主页按钮在右侧时，动画来自底部！！！

虽然我已经指定它是从左边开始的。另一件事是，当我使用不同的风景（左侧或右侧的主页按钮）时，它会改变方向。

任何想法为什么会发生这种情况？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:13:57.483

好的，这就是我的做法，虽然非常不正统。

我检查了 iPad 的方向，然后不是向左或向右，我实际上是在顶部/底部……好吧，我就是这样做的，虽然非常不正统。

我检查了 iPad 的方向，然后我实际上不是向左或向右，而是在顶部/底部......

```
if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft)
{
      //Landscape Left

//.......
       transition.subtype = kCATransitionFromTop;

}
else if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeRight)
{
      //Landscape Right

//......
       transition.subtype = kCATransitionFromBottom;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:33:20.863

您的视图在导航控制器中吗？您是否尝试过简单地使用带有“推送”风格的 segue？

在您的滑动手势识别器中，只需调用：

```
[self performSegueWithIdentifier:@"NextScreenIdentifier" sender:sender]; 
```

你应该得到正确的行为（左->右/右->左转换）。

# mysql - MySQL 查询 - 检索具有最新时间戳值的所有设备信息

> ID：14920255
> 
> 赞同：1
> 
> 时间：2013-02-17T10:43:19.453
> 
> 标签：mysql, sql, phpmyadmin

我有以下两个表：

`devices`：

![在此处输入图像描述](../Images/a10fbbbb2554a3fae522185c2c07114f.png)

`tracking`：

![在此处输入图像描述](../Images/94903135e2b1ad2dc6ac53bd2a71a377.png)

我需要构建一个 MySQL 查询，它将返回所有具有最新纬度和经度的设备。可以通过仅获取具有最新时间戳值的每个设备的跟踪行来挑选最新的行。我无法自己构建此查询。请帮忙。

**输出列：** devices.Name、devices.IMEI、tracking.latitude、tracking.longitude

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T10:46:41.073

从跟踪中获取顶级数据

```
select *
from   tracking join (select imei, max(ctimestamp) as maxtime
                      from tracking
                      group by imei) as sub
       on sub.imei = tracking.imei
          and sub.ctimestamp = tracking.timestamp 
```

您当然可以加入设备表并自己打印名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T11:00:59.743

应该这样做，使用左连接来确保没有更新的行；

```
SELECT d.name, d.IMEI, t.latitude, t.longitude
FROM devices d
JOIN tracking t 
    ON d.IMEI=t.IMEI
LEFT JOIN tracking t2
     ON d.IMEI=t2.IMEI
    AND t2.ctimestamp>t.ctimestamp
WHERE t2.IMEI IS NULL 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/4353b/1)。

# python - 将txt导入字典会导致python崩溃？

> ID：14920259
> 
> 赞同：0
> 
> 时间：2013-02-17T10:43:36.993
> 
> 标签：python, dictionary, crash

我已经关注了这个线程的第一个答案：

[Python - 文件到字典？](https://stackoverflow.com/questions/4803999/python-file-to-dictionary)

每当我尝试运行脚本时，Python 就会关闭。一切，甚至我没有处理的其他脚本。

这是我写的，几乎是一样的：

```
 d = {}
with open("C:\Users\Owatch\Documents\Python\FunStuff\nsed.txt") as f:
    for line in f:
        (key, val) = line.split()
        d[int(key)] = val

print(d) 
```

我唯一改变的是文件位置，因为我理解我要包括在内以修复关于找不到文件的错误

阐述：

这是我应该使用的代码：

```
d = {}
with open("file.txt") as f:
    for line in f:
       (key, val) = line.split()
       d[int(key)] = val 
```

这就是我所做的，添加一个文件路径代替 file.txt，并让它在完成后立即或应该打印字典 d。

```
d = {}
with open("C:\Users\Owatch\Documents\Python\Unisung Net Send\nsed.txt") as f:
    for line in f:
        (key, val) = line.split()
        d[int(key)] = val

print(d) 
```

问题是我什至无法运行它，因为 Python 崩溃了，我正在运行版本：3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:02:26.223

改变

```
open("C:\Users\Owatch\Documents\Python\FunStuff\nsed.txt") 
```

到

```
open(r"C:\Users\Owatch\Documents\Python\FunStuff\nsed.txt") 
```

否则“\nsed”将被视为换行符加上“sed”。

更新：

从您的输入文件中，问题是：

```
d[int(key)] = val 
```

因为您的第一列是字母，而不是整数。将其更改为：

```
d[key] = val 
```

或者：（如果您更喜欢数字键）

```
d[ord(key) - ord('a')] = val 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:02:17.933

使用`r''`原始字符串文字来防止 Python 解释`\n`为换行符：

```
with open(r"C:\Users\Owatch\Documents\Python\Unisung Net Send\nsed.txt") as f: 
```

或使用双反斜杠：

```
with open("C:\\Users\\Owatch\\Documents\\Python\\Unisung Net Send\\nsed.txt") as f: 
```

或正斜杠：

```
with open(r"C:/Users/Owatch/Documents/Python/Unisung Net Send/nsed.txt") as f: 
```

所有三个版本都在 Windows 上有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:17:59.453

将 d[int(key)] 更改为 d[ord(key)]

# c++ - 翻转图像以获得镜像效果

> ID：14920264
> 
> 赞同：16
> 
> 时间：2013-02-17T10:44:37.510
> 
> 标签：c++, opencv, image-processing

我正在做一个需要翻转帧的视频处理项目。我尝试使用 cvFlip 但似乎没有沿 y 轴翻转（x 轴工作......）并导致分段错误。还有其他选择吗？？

```
cv::Mat dst=src;      //src= source image from cam
cv::flip(dst, dst, 1);     //segmentation fault shown

imshow("flipped",dst); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T11:47:50.293

```
cv::Mat src=imload("bla.png");
cv::Mat dst;               // dst must be a different Mat
cv::flip(src, dst, 1);     // because you can't flip in-place (leads to segfault) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-17T10:47:26.020

使用[`cv::flip`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#flip)并传递`1`为`flipcode`.

使用示例代码查看您的编辑，您无法原地翻转。您需要一个单独的目的地`cv::Mat`：

```
cv::Mat dst;
cv::flip(src, dst, 1);
imshow("flipped",dst); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-28T21:38:29.737

关键是创建`dst`完全一样的`src`：

```
cv::Mat dst = cv::Mat(src.rows, src.cols, CV_8UC3);
cv::flip(src, dst, 1);

imshow("flipped", dst); 
```

# ruby-on-rails - Ruby on Rails - 编辑不起作用

> ID：14920266
> 
> 赞同：0
> 
> 时间：2013-02-17T10:44:48.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, edit, updates

尝试更新我在 Ruby on Rails 项目中发布的帖子，但没有任何反应。这真的很烦人，因为我没有收到任何错误并且似乎无法弄清楚我做错了什么。

我认为它以前有效，但是自从我第一次编写不同的操作以来，我已经在我的“提要”模型中添加了多个内容，例如展示次数和标签。不知道这是否影响了我的更新操作...

我的控制器如下所示：

```
 def edit
    @feed = Feed.find(params[:id])
  end

  def update
   @feed = Feed.find(params[:id])
    respond_to do |format|
     if @feed.update_attributes(params[:feed])
      format.html { redirect_to @feed, notice: 'Feed was successfully updated.' }
      format.json { head :no_content }
     else
      format.html { render action: "edit" }
      format.json { render json: @feed.errors, status: :unprocessable_entity }
     end
    end
  end 
```

我的提要模型如下所示：

```
 attr_accessible :content, :tag_list, :guid, :language, :location, :published_at, :summary, :url, :title, :user_id, :thumbnail_url, :url_to_feed, :type_of_feed
  has_many :impressions, :as=>:impressionable
  validates_length_of :tag_list, :maximum => 10
  acts_as_taggable 
```

我的观点是这样的：

```
 <h1>Editing feed</h1>

  <%= render 'form' %>
  <%= link_to 'Show', @feed %> |
  <%= link_to 'Back', feeds_path %>

  ____________________ form

  <%= form_for(@feed) do |f| %>
   <% if @feed.errors.any? %>
   <div id="error_explanation">
   <h2><%= pluralize(@feed.errors.count, "error") %> prohibited this feed from being saved:</h2>
   <ul>
     <% @feed.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
     <% end %>
   </ul>
    </div>
  <% end %>

 <div class="field">
  <%= f.label :title %><br />
  <%= f.text_field :title %>
 </div>
 <div class="field">
  <%= f.label :content %><br />
  <%= f.text_area :content %>
 </div>
  <div class="field">
  <%= f.label :location %><br />
  <%= f.text_field :location %>
  </div>
 <div class="field">
  <%= f.label :language %><br />
  <%= f.text_field :language %>
 </div>

  <div class="field">
<%= f.label :tag_list, "Tags (seperated by spaces)" %><br />
<%= f.text_field :tag_list %>
  </div>

  <div class="actions">
   <%= f.submit %>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:04:52.803

日志条目

```
Started PUT "/feeds/1" for 127.0.0.1 at 2013-02-17 12:27:36 +0100 Processing by FeedsController#show as HTML 
```

说，PUT 请求（发送您的表单数据）正在由 FeedsController#show 处理，但它必须由 FeedsController#update 处理。所以你的路线似乎是错误的。查看[Rails 路由指南](http://guides.rubyonrails.org/routing.html)。

我会使用提要资源，因为它会自动创建正确的路线：

```
resources :feeds 
```

# java - Java ClassNotFoundException html 错误

> ID：14920270
> 
> 赞同：0
> 
> 时间：2013-02-17T10:45:27.633
> 
> 标签：java, html, applet, awt, runtime-error

我再次需要你的帮助。我最近开始使用 Java 进行编程，并且正在尝试创建我的第一个小程序。我只是使用最基本的代码：

```
package firstofthings;

import java.awt.*;
import java.applet.*;

public class FirstApplet extends Applet {
    public void paint(Graphics g) {
        g.drawString("This is my first Java applet!", 20, 30);
    }
} 
```

（大括号放在正确的位置，由于某种原因不会出现在正确的位置）

我对html相当精通，我认为是这个容器中的代码是错误的，所以如果你能指出我正确的方向，那就太酷了。

```
<!DOCTYPE html>
<html>
    <head>
        <title>FirstApplet</title>
    </head>
    <body>
        <applet
          codebase="."
          code="FirstApplet.class"
          name="FirstApplet"
          width="640"
          height="480"
          hspace="0"
          vspace="0"
          align="middle"
        >
        </applet>
    <body>
<html> 
```

我拿走了标签，否则它不会显示，所以这里是我得到的错误的详细信息

```
ClassNotFoundExeption

Java Plug-in 10.5.1.255
Using JRE version 1.7.0_11-b21 Java HotSpot(TM) Client VM
User home directory = C:\Users\Owner
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
---------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:07:56.943

如果`firstapplet.html`（上面看到的 HTML 的名称）实际上位于：

[http://our.com/applet/firstapplet.html](http://our.com/applet/firstapplet.html)

然后小程序类（从松散的类文件中加载）必须位于：

[http://our.com/applet/firstofthings/FirstApplet.class](http://our.com/applet/firstofthings/FirstApplet.class)

如果类在 Jar 中（强烈推荐）或代码库设置不同，它会改变。

# android - 启动 avd android api 级别 17

> ID：14920271
> 
> 赞同：-1
> 
> 时间：2013-02-17T10:45:42.263
> 
> 标签：android

我试图在 api 级别 17 上启动 avd，它需要太多时间我已经等了 2 个小时，但它仍在工作。我唯一能看到的是屏幕上的“Android”准备标志我选择了CPU/ABI：ARM（armeabi-v7a）目标：Android 4.2（API LEVEL 17）内存选项：Ram：512 VM堆：64内部存储：200 mib SD card : 100mib 是不是因为我的笔记本启动太慢了？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:49:59.453

您的 AVD 速度慢的原因可能有很多。这主要与您的开发机器速度有关，但您可以进行一些优化。AVD 需要提供具有完整系统映像的仿真器。模拟器虚拟化了一个完整的设备：硬件、内核、低级系统库和应用程序框架。虽然英特尔 x86 图像要好得多，但谷歌确实在 r17 开发者工具的发布中做了一些改进。

看：

*   [如何加速 Android 仿真？](https://stackoverflow.com/questions/1924920/how-to-speed-up-android-emulation)

*   [http://www.nuxeo.com/blog/development/2011/10/speeding-up-the-android-emulator/](http://www.nuxeo.com/blog/development/2011/10/speeding-up-the-android-emulator/)

*   [http://droidtutorials.blogspot.in/2010/02/how-to-speed-up-avd.html](http://droidtutorials.blogspot.in/2010/02/how-to-speed-up-avd.html)

*   [http://software.intel.com/en-us/articles/installing-the-intel-atom-tm-android-x86-emulator-image-add-on-from-the-android-sdk-manager/](http://software.intel.com/en-us/articles/installing-the-intel-atom-tm-android-x86-emulator-image-add-on-from-the-android-sdk-manager/)

*   [http://android-developers.blogspot.in/2012/04/faster-emulator-with-better-hardware.html](http://android-developers.blogspot.in/2012/04/faster-emulator-with-better-hardware.html)

# python - 生成由 N=100 个二维样本组成的数据集

> ID：14920272
> 
> 赞同：8
> 
> 时间：2013-02-17T10:45:48.667
> 
> 标签：python, matrix, dataset, covariance, gaussian

如何生成由从**二维高斯分布**`N = 100`中提取的二维样本组成的数据集，均值`x = (x1,x2)T ∈ R2`

 **```
µ = (1,1)T 
```

和协方差矩阵

```
Σ = (0.3 0.2 
     0.2 0.2) 
```

我听说你可以使用*Matlab*函数`randn`，但不知道如何在 Python 中实现它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T13:14:43.133

只是为了详细说明@EamonNerbonne 的答案：以下使用 协方差矩阵的[Cholesky 分解](http://en.wikipedia.org/wiki/Cholesky_decomposition#Monte_Carlo_simulation)从不相关的正态分布随机变量生成相关变量。

```
import numpy as np
import matplotlib.pyplot as plt
linalg = np.linalg

N = 1000
mean = [1,1]
cov = [[0.3, 0.2],[0.2, 0.2]]
data = np.random.multivariate_normal(mean, cov, N)
L = linalg.cholesky(cov)
# print(L.shape)
# (2, 2)
uncorrelated = np.random.standard_normal((2,N))
data2 = np.dot(L,uncorrelated) + np.array(mean).reshape(2,1)
# print(data2.shape)
# (2, 1000)
plt.scatter(data2[0,:], data2[1,:], c='green')    
plt.scatter(data[:,0], data[:,1], c='yellow')
plt.show() 
```

![在此处输入图像描述](../Images/c6a589aabb35d2b5e98955403b374b95.png)

黄点是由 生成的`np.random.multivariate_normal`。绿点是通过将正态分布点乘以 Cholesky 分解矩阵生成的`L`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T11:00:14.023

您正在寻找[numpy.random.multivariate_normal](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.multivariate_normal.html)

**代码**

```
>>> import numpy
>>> print numpy.random.multivariate_normal([1,1], [[0.3, 0.2],[0.2, 0.2]], 100)
[[ 0.02999043  0.09590078]
 [ 1.35743021  1.08199363]
 [ 1.15721179  0.87750625]
 [ 0.96879114  0.94503228]
 [ 1.23989167  1.13473083]
 [ 1.55917608  0.81530847]
 [ 0.89985651  0.7071519 ]
 [ 0.37494324  0.739433  ]
 [ 1.45121732  1.17168444]
 [ 0.69680785  1.2727178 ]
 [ 0.35600769  0.46569276]
 [ 2.14187488  1.8758589 ]
 [ 1.59276393  1.54971412]
 [ 1.71227009  1.63429704]
 [ 1.05013136  1.1669758 ]
 [ 1.34344004  1.37369725]
 [ 1.82975724  1.49866636]
 [ 0.80553877  1.26753018]
 [ 1.74331784  1.27211784]
 [ 1.23044292  1.18110192]
 [ 1.07675493  1.05940509]
 [ 0.15495771  0.64536509]
 [ 0.77409745  1.0174171 ]
 [ 1.20062726  1.3870498 ]
 [ 0.39619719  0.77919884]
 [ 0.87209168  1.00248145]
 [ 1.32273339  1.54428262]
 [ 2.11848535  1.44338789]
 [ 1.45226461  1.42061198]
 [ 0.33775737  0.24968543]
 [ 1.06982557  0.64674411]
 [ 0.92113229  1.0583153 ]
 [ 0.54987592  0.73198037]
 [ 1.06559727  0.77891362]
 [ 0.84371805  0.72957046]
 [ 1.83614557  1.40582746]
 [ 0.53146009  0.72294094]
 [ 0.98927818  0.73732053]
 [ 1.03984002  0.89426628]
 [ 0.38142362  0.32471126]
 [ 1.44464929  1.15407227]
 [-0.22601279  0.21045592]
 [-0.01995875  0.45051782]
 [ 0.58779449  0.44486237]
 [ 1.31335981  0.92875936]
 [ 0.42200098  0.6942829 ]
 [ 0.10714426  0.11083002]
 [ 1.44997839  1.19052704]
 [ 0.78630506  0.45877582]
 [ 1.63432202  1.95066539]
 [ 0.56680926  0.92203111]
 [ 0.08841491  0.62890576]
 [ 1.4703602   1.4924649 ]
 [ 1.01118864  1.44749407]
 [ 1.19936276  1.02534702]
 [ 0.67893239  0.8482461 ]
 [ 0.71537211  0.53279103]
 [ 1.08031573  1.00779064]
 [ 0.66412568  0.57121041]
 [ 0.96098528  0.72318386]
 [ 0.7690299   0.76058713]
 [ 0.77466896  0.77559282]
 [ 0.47906664  0.58602633]
 [ 0.52481326  0.78486453]
 [-0.40240438  0.17374116]
 [ 0.75730444  0.22365892]
 [ 0.67811008  1.17730408]
 [ 1.62245699  1.71775386]
 [ 1.12317847  1.04252136]
 [-0.06461117  0.23557416]
 [ 0.46299482  0.51585414]
 [ 0.88125676  1.23284201]
 [ 0.57920534  0.63765861]
 [ 0.88239858  1.32092112]
 [ 0.63500551  0.94788141]
 [ 1.76588148  1.63856465]
 [ 0.65026599  0.6899672 ]
 [ 0.06854287  0.29712499]
 [ 0.61575737  0.87526625]
 [ 0.30057552  0.54475194]
 [ 0.66578769  0.21034844]
 [ 0.94670438  0.7699764 ]
 [ 0.39870371  0.91681577]
 [ 1.37531351  1.62337899]
 [ 1.92350877  1.34382017]
 [ 0.56631877  0.77456137]
 [ 1.18702642  0.63700271]
 [ 0.74002244  1.04535471]
 [ 0.3272063   0.75097037]
 [ 1.57583435  1.55809705]
 [ 0.44325124  0.39620769]
 [ 0.59762516  0.58304621]
 [ 0.72253698  0.68302097]
 [ 0.93459597  1.01101948]
 [ 0.50139577  0.52500942]
 [ 0.84696441  0.68679341]
 [ 0.63483432  0.22205385]
 [ 1.43642478  1.34724612]
 [ 1.58663111  1.49941374]
 [ 0.73832806  0.95690866]]
>>> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T12:00:12.363

尽管 numpy 有方便的实用函数，但您始终可以“重新缩放”多个独立的正态分布变量以匹配给定的协方差矩阵。因此，如果您可以生成一个列向量`x`（或在矩阵中分组的许多向量），其中每个元素都是正态分布的，并且您按 matrix 进行缩放`M`，结果将具有 covariance `M M^T`。相反，如果您将协方差分解`C`为形式`M M^T`，那么即使没有 numpy 提供的实用函数（只需将您的一堆正态分布向量乘以`M`），生成这样的分布也非常简单。

这可能不是您要*直接*寻找的答案，但请牢记这一点很有用，例如：

*   如果您发现自己缩放随机生成的结果，则可以将缩放与初始协方差结合起来
*   如果您需要将代码移植到不直接支持这种实用方法的库，那么您自己很容易实现。**

# solr - 如何与 Solr 进行单词一致性？

> ID：14920273
> 
> 赞同：0
> 
> 时间：2013-02-17T10:46:06.540
> 
> 标签：solr, lucene, hit-highlighting

我想用 Solr 创建一个单词索引命中列表，它给出了给定单词的**所有出现**和上下文。

一个英文例子：

```
...bla bla1 <b>dog</b> bla bla 1...
...bla bla2 <b>dog</b> bla bla 2...
...bla bla3 <b>dogs</b> bla bla 3
...bla bla4 <b>dogging</b> bla bla 4...
...bla bla5 <b>dog</b> bla bla 5... 
```

能够自定义上下文的大小非常重要。（有时超过 1 句话。）

**我的问题**：我怎么能用 Solr 做到这一点？

Lucene 4.1 能够做到这一点，例如使用 FastVectorHighlighter：

```
 //indexing
    FieldType offsetsType = new FieldType(TextField.TYPE_STORED);
    offsetsType.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
    offsetsType.setStored(true);
    offsetsType.setIndexed(true);   
    offsetsType.setStoreTermVectors(true);
    offsetsType.setStoreTermVectorOffsets(true);
    offsetsType.setStoreTermVectorPositions(true);
    offsetsType.setStoreTermVectorPayloads(true);

    doc.add(new Field("content", fileContent, offsetsType));

    //searching
    IndexReader reader = DirectoryReader.open(FSDirectory.open(new File(indexPath)));
    IndexSearcher searcher = new IndexSearcher(reader);
    Analyzer analyzer = StandardAnalyzer(Version.LUCENE_41);
    QueryParser parser = new QueryParser(Version.LUCENE_41, "content", analyzer);
    Query query = parser.parse("dog");
    TopDocs results = searcher.search(query, 10);

    for (int i = 0; i < results.scoreDocs.length; i++) {
            int id = results.scoreDocs[i].doc;
            Document doc = searcher.doc(id);
            FastVectorHighlighter h = new FastVectorHighlighter();
            String[] hs = h.getBestFragments(h.getFieldQuery(query), reader, id, "content", contextSize, 10000);
            if (hs != null)
                    for(String f : hs)
                        System.out.println(" highlight: " + f);
    } 
```

但是我怎么能要求 Solr 也这样做呢？

我的试验是这样的（solrconfig.xml）：

```
<fragmentsBuilder name="colored" class="org.apache.solr.highlight.ScoreOrderFragmentsBuilder">
 <lst name="defaults">
 <str name="hl.tag.pre"><![CDATA[
      <b style="background:yellow">,<b style="background:lawgreen">,
      <b style="background:aquamarine">,<b style="background:magenta">,
      <b style="background:palegreen">,<b style="background:coral">,
      <b style="background:wheat">,<b style="background:khaki">,
      <b style="background:lime">,<b style="background:deepskyblue">]]></str>
 <str name="hl.tag.post"><![CDATA[</b>]]></str>
 </lst>
</fragmentsBuilder>

<requestHandler name="drupal" class="solr.SearchHandler" default="true">
...
<str name="hl">true</str>
<str name="hl.fl">content</str>
<int name="hl.snippets">5000</int>
<int name="hl.fragsize">300</int>
<str name="hl.simple.pre"><![CDATA[ <b style="background:yellow"><i> ]]></str>
<str name="hl.simple.post"><![CDATA[ </i></b> ]]></str>
<str name="hl.mergeContiguous">true</str>
<str name="hl.fragListBuilder">single</str>
<str name="hl.useFastVectorHighlighter">true</str> 
```

但它总是给出一个很好的片段（对于每个文档），但并非所有出现。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:22:20.440

你能试试看你`hl.fragsize=100`得到`hl.mergeContiguous=false`多少碎片吗？

（在 solrconfig.xml 中的 SearchHandler 中直接添加参数之前，您可以通过在查询中指定所有参数来尝试各种选项。一旦找到一组您满意的参数，请使用 solrconfig 中的参数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T20:00:00.843

我刚刚贡献了一个可能感兴趣的补丁[http://issues.apache.org/jira/i#browse/LUCENE-5317 。](http://issues.apache.org/jira/i#browse/LUCENE-5317)Solr 包装器正在开发中。

# asp.net - 使用 ajax AutoCompleteExtender 进行验证

> ID：14920281
> 
> 赞同：6
> 
> 时间：2013-02-17T10:47:24.540
> 
> 标签：asp.net, ajax, sql-server-2008

当此人开始在 List 中输入City name Appear 时，我有一个`TextBox`with 。这工作正常，但现在我想验证他们是否只输入 a并且不从列表中选择一个，它验证 City Is Not Exist在数据库中。我想在最终提交之前使用 Ajax 验证它并且不使用.`AutoCompleteExtender``TextBox``textbox``PostBack``form`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:48:55.470

添加具有以下内容的新 js 文件并将其添加引用添加到 ToolkitScriptManager 的`Scrips`集合：

```
Type.registerNamespace('Sjax');

Sjax.XMLHttpSyncExecutor = function () {
    Sjax.XMLHttpSyncExecutor.initializeBase(this);

    this._started = false;
    this._responseAvailable = false;
    this._onReceiveHandler = null;
    this._xmlHttpRequest = null;

    this.get_aborted = function () {
        //Parameter validation code removed here...
        return false;
    }

    this.get_responseAvailable = function () {
        //Parameter validation code removed here...
        return this._responseAvailable;
    }

    this.get_responseData = function () {
        //Parameter validation code removed here...
        return this._xmlHttpRequest.responseText;
    }

    this.get_started = function () {
        //Parameter validation code removed here...
        return this._started;
    }

    this.get_statusCode = function () {
        //Parameter validation code removed here...
        return this._xmlHttpRequest.status;
    }

    this.get_statusText = function () {
        //Parameter validation code removed here...
        return this._xmlHttpRequest.statusText;
    }

    this.get_xml = function () {
        //Code removed
    }

    this.executeRequest = function () {
        //Parameter validation code removed here...
        var webRequest = this.get_webRequest();

        if (webRequest === null) {
            throw Error.invalidOperation(Sys.Res.nullWebRequest);
        }

        var body = webRequest.get_body();
        var headers = webRequest.get_headers();
        var verb = webRequest.get_httpVerb();

        var xmlHttpRequest = new XMLHttpRequest();
        this._onReceiveHandler = Function.createCallback(this._onReadyStateChange, { sender: this });
        this._started = true;
        xmlHttpRequest.onreadystatechange = this._onReceiveHandler;
        xmlHttpRequest.open(verb, webRequest.getResolvedUrl(), false); // False to call Synchronously

        if (headers) {
            for (var header in headers) {
                var val = headers[header];

                if (typeof (val) !== "function") {
                    xmlHttpRequest.setRequestHeader(header, val);
                }
            }
        }

        if (verb.toLowerCase() === "post") {
            if ((headers === null) || !headers['Content-Type']) {
                xmlHttpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            }

            if (!body) {
                body = '';
            }
        }

        this._started = true;
        this._xmlHttpRequest = xmlHttpRequest;
        xmlHttpRequest.send(body);
    }

    this.getAllResponseHeaders = function () {
        //Parameter validation code removed here...
        return this._xmlHttpRequest.getAllResponseHeaders();
    }

    this.getResponseHeader = function (header) {
        //Parameter validation code removed here...
        return this._xmlHttpRequest.getResponseHeader(header);
    }

    this._onReadyStateChange = function (e, args) {
        var executor = args.sender;

        if (executor._xmlHttpRequest && executor._xmlHttpRequest.readyState === 4) {
            //Validation code removed here...

            executor._responseAvailable = true;

            executor._xmlHttpRequest.onreadystatechange = Function.emptyMethod;
            executor._onReceiveHandler = null;

            executor._started = false;

            var webRequest = executor.get_webRequest();
            webRequest.completed(Sys.EventArgs.Empty);

            //Once the completed callback handler has processed the data it needs from the XML HTTP request we can clean up
            executor._xmlHttpRequest = null;
        }
    }

}

Sjax.XMLHttpSyncExecutor.registerClass('Sjax.XMLHttpSyncExecutor', Sys.Net.WebRequestExecutor); 
```

在一个页面上：

```
 <ajaxToolkit:ToolkitScriptManager runat="server" ID="ScriptManager1">
      <Scripts>
           <asp:ScriptReference Path="~/XMLHttpSyncExecutor.js"  />
      </Scripts>
 </ajaxToolkit:ToolkitScriptManager> 
```

然后，为目标 TextBox 添加 CustomValidator 并使用以下函数进行客户端验证：

```
 <asp:TextBox runat="server" ID="myTextBox" Width="300" autocomplete="off" />
 <asp:CustomValidator runat="server" ID="myTbCustomValidator" ControlToValidate="myTextBox"
      Text="*" Display="Dynamic" ValidateEmptyText="false" ClientValidationFunction="validateTextBox"
      OnServerValidate="ValidateTextBox" />

 function validateTextBox(sender, args) {
      if (args.Value.length > 0) {

           var extender = $find("AutoCompleteEx"); // AutoComplete extender's BehaviorID

           if (extender._completionListElement) {
                var children = extender._completionListElement.childNodes;
                var length = extender._completionListElement.childNodes.length;
                for (var i = 0; i < length; i++) {
                     if (children[i].innerHTML == args.Value) {
                          args.IsValid = true;
                          return;
                     }
                }
           }

           var request = new Sys.Net.WebRequest();

           request.set_url('<%= ResolveClientUrl("~/AutoComplete/AutoComplete.asmx/Validate")  %>');
           var body = Sys.Serialization.JavaScriptSerializer.serialize({ value: args.Value });
           request.set_body(body);
           request.set_httpVerb("POST");
           request.get_headers()["Content-Type"] = "application/json; encoding=utf-8";
           request.add_completed(function (eventArgs) {
                var result = Sys.Serialization.JavaScriptSerializer.deserialize(eventArgs.get_responseData());
                args.IsValid = result.d;
           });
           var executor = new Sjax.XMLHttpSyncExecutor();
           request.set_executor(executor);
           request.invoke();
      }
 } 
```

上面代码的主要思想是首先检查建议的项目是否输入文本，如果没有任何一致性，则对 Web 服务的 Validate 方法或页面方法进行同步 AJAX 调用。该方法应该有这样的签名：`public bool Validate(string value)`

此处采用 XMLHttpSyncExecutor 的 PS 代码：[使用同步 ASP.Net AJAX Web 服务调用和 Scriptaculous 来测试您的 JavaScript](http://www.ridgway.co.za/archive/2007/10/30/using-synchronous-asp.net-ajax-web-service-calls-and-scriptaculous-to.aspx)

# lisp - Lisp：读取包含 url 的文件

> ID：14920285
> 
> 赞同：1
> 
> 时间：2013-02-17T10:48:35.630
> 
> 标签：lisp, common-lisp

我是 Lisp 新手，有一个非常基本的问题。

我正在处理一个包含列表的列表。

```
(defvar *stationen* nil)

(defun make-station (name uri)
  (list :name name :uri uri))

(defun save-db ()
  (with-open-file (out "list.txt"
                       :direction :output
                       :if-exists :supersede)
    (with-standard-io-syntax
      (princ *stationen* out))))

(defun load-db ()
  (with-open-file (in "list.txt")
    (with-standard-io-syntax
      (setf *stationen* (READ in)))))

(load-db) 
```

数据包含一个 uri `http://www....`。好吧，当我尝试阅读该列表时，出现以下错误：

```
The name "HTTP" does not designate any package.
[Condition of type SB-KERNEL:SIMPLE-PACKAGE-ERROR] 
```

我可以猜到为什么会发生这种情况（Lisp 试图将“http”解释为一个包，对吧？）。但是我怎样才能将我的 uri 保存到文件中并再次读取它，而 Lisp 不会抛出这个错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:55:01.697

备择方案：

1.  只需将其写为字符串即可。
2.  使用 READ-CHAR、READ-LINE 或 READ-SEQUENCE
3.  高级：使用自定义阅读器宏进行读写

顺便说一句，请发布格式化的 Lisp 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:33:40.577

或者，您可以使用 PRINT 而不是 PRINC 来写出 URL。

# android - 两个列表视图下的TextView

> ID：14920286
> 
> 赞同：-1
> 
> 时间：2013-02-17T10:48:53.793
> 
> 标签：android, android-layout

我已经尝试过在 stackoverflow 上针对相同问题提出的各种解决方案，但对我来说没有任何效果。我想在两个列表视图下显示两个文本视图。我的代码是这个

```
<LinearLayout
....>
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="2" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="2" >

        <ListView
            android:id="@+id/lv1InBS"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ListView>

        <ListView
            android:id="@+id/lv2InBS"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ListView>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="2" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:text="TextView"
            android:textColor="#800000"
            android:typeface="serif" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:text="TextView"
            android:textColor="#800000"
            android:typeface="serif" />
    </LinearLayout>
</LinearLayout> 
```

……

请帮忙。我一直在努力纠正它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:04:52.297

好的，您应该尝试这种方法，

首先采用垂直方向的简单线性布局，然后以您想要的方式在屏幕上添加两个列表视图和两个文本视图，然后转到图形编辑器并选择第一个组件，列表视图或文本视图，然后单击分发重量图形编辑器上部面板上给出的均匀按钮。

这肯定会奏效。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/welcome"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:text="@string/hello_world" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >
</ListView>

<ListView
    android:id="@+id/listView2"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >
</ListView>

<TextView
    android:id="@+id/welcome"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:text="@string/hello_world" />

<TextView
    android:id="@+id/welcome"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:text="@string/hello_world" /> 
```

将此添加到您的 xml 中并查看一下，因为它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:04:52.330

好的，这是一种方法，通过结合android视图的**Weight**属性和**Horizo​​ntal/Vertical LinearLayouts**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/ListView01"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" >
        </ListView>

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" >

        </ListView>

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    </LinearLayout>

</LinearLayout> 
```

*   第一个 Horizo​​ntal Linearlayout 充当两个平行行的容器。
*   在每一行内有两个垂直布局（通过使用相等的权重和 *layout_width="0"*），布局会将屏幕分成两半。
*   在每个 LinearLayout 内有一个 listView 项（高度设置为 0，权重设置为 1）和一个 textview 项，其中包含您想要的任何值。

# sitecore - MSDN like API for sitecore

> ID：14920287
> 
> 赞同：1
> 
> 时间：2013-02-17T10:49:26.447
> 
> 标签：sitecore, sitecore6

对 sitecore 世界来说很安静，还没有遇到任何看起来像 MSDN 的在线 API。如果有任何此类资源用于站点核心开发，有人可以请教吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T07:56:55.347

API 文档存在于 SDN 站点上，例如 Database.GetItem 记录在[http://sdn.sitecore.net/doc/api%205.0/Sitecore.Data.Database.GetItem.html](http://sdn.sitecore.net/doc/api%205.0/Sitecore.Data.Database.GetItem.html)

诚然，它是 5.0 API 文档，但内核 API 方法不会经常更改。

* * *

尝试访问以下 Sitecore 官方网站之一：

*   [学习 Sitecore](https://www.sitecore.net/)
*   [Sitecore 文档](https://doc.sitecore.net/)
*   [Sitecore 社区](https://community.sitecore.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T02:52:23.487

您可以将 API 参考下载为 .chm 帮助文件，您可以像浏览 MSDN 一样离线浏览它。

[Sitecore CMS 6 API 参考](http://sdn.sitecore.net/Reference/Sitecore%206/Sitecore_6_API_Reference.aspx)

您需要取消阻止文件才能查看内容：右键单击 > 属性 > 取消阻止

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:06:19.037

没有像 MSDN 这样的在线 API。但是您可以登录[sdn.sitecore.net](http://sdn.sitecore.net)并在那里找到很多文档。

# tomcat - 运行多个 Tomcat 7 实例

> ID：14920297
> 
> 赞同：0
> 
> 时间：2013-02-17T10:51:33.060
> 
> 标签：tomcat, tomcat7, catalina

我正在尝试在同一台服务器上运行多个 tomcat 7 实例。但是，它似乎不起作用

我已将新实例设置为端口 8180

CATALINA_HOME="/usr/share/apache-tomcat-7.0.35" CATALINA_BASE="/srv/tomcat/spock" 导出 CATALINA_HOME CATALINA_BASE

$CATALINA_HOME/bin/catalina.sh 启动

我去的时候：

wget 本地主机：8180

它失败了，这意味着服务没有正确启动。

有谁知道我做错了什么？

# ios - 使用自动布局、网格视图等有什么意义？

> ID：14920302
> 
> 赞同：-5
> 
> 时间：2013-02-17T10:52:39.353
> 
> 标签：ios, macos, autolayout

据我所知，只有 iOS 6 和 OS X 10.8 支持自动布局。有很多人的设备运行 iOS 5（感谢上帝为 6.0 发布了越狱，所以人们会更新到新版本）和 OS X 10.7。那么，如果我们丢掉一大堆用户或者需要通过变通方法（手动布局、单独的 XIB、SMGridView、SVPullToRefresh）来支持他们，那么现在使用新功能有什么意义呢？

另外，我现在在哪里可以找到 iOS/OS X 发行版（就像在[Android 网站](http://developer.android.com/about/dashboards/index.html)上所做的那样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:18:16.680

您是正确的，在大多数情况下，您希望定位尽可能低的 iOS 版本（在合理的意义上），这仍然允许您开发出色的应用程序并允许您获得最多的下载量。

话虽如此，iOS6 确实提供了很多增强功能 - 流布局等。如果这些增强功能不值得采用变通方法，那么您最好的选择是针对较低版本的 iOS 并放弃这些新功能。

所以我想简而言之，我建议在这个时间点上最好针对 iOS 5 之类的东西而不用担心自动布局。

您问题的第二部分 - iOS Distribution stats - 我认为 Apple Developer 官方网站中不存在任何此类指标。您最好的选择可能是搜索一些流行应用程序的开发人员发布的统计信息 - 这是一个示例：[http ://david-smith.org/iosversionstats/](http://david-smith.org/iosversionstats/)

# android - 如何在android中的触摸事件上获取图像的点（或像素）颜色

> ID：14920303
> 
> 赞同：14
> 
> 时间：2013-02-17T10:52:52.033
> 
> 标签：android, image, colors, imageview, pixel

我想获取我将在 Android 中触摸图像的点或像素的颜色。我在网上搜索了很多，但一无所获。请任何人帮助我。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-17T11:54:54.583

试试这个：

```
final Bitmap bitmap = ((BitmapDrawable)imageView.getDrawable()).getBitmap();
imageView.setOnTouchListener(new OnTouchListener(){
        @Override
        public boolean onTouch(View v, MotionEvent event){
        int x = (int)event.getX();
        int y = (int)event.getY();
        int pixel = bitmap.getPixel(x,y);

        //then do what you want with the pixel data, e.g
        int redValue = Color.red(pixel);
        int blueValue = Color.blue(pixel);
        int greenValue = Color.green(pixel);        
        return false;
        }
   }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T12:10:52.090

您可以计算被点击的像素的图像坐标并从图像数据中读取像素，例如

```
Bitmap.getPixel(xcord,ycord) 
```

# php - 无法获取url中的查询值

> ID：14920305
> 
> 赞同：1
> 
> 时间：2013-02-17T10:53:11.093
> 
> 标签：php, string, get

我为不同的文章创建了一个评论框。

数据库名称是 test

```
**INSERT INTO `test`.`test` (`id`, `name`, `email`, `comment`, `timestamp`, `articleid`)** 
```

和注释文件名是 formcode.php 和代码是

```
**<form method='post'>
        NAME: <input type='text' name='name' id='name' /><br />

        Email: <input type='text' name='email' id='email' /><br />

        Comment:<br />
        <textarea name='comment' id='comment' /></textarea><br />

        <input type='hidden' name='articleid' id='articleid' value='<?php echo $_GET["id"]; ?>' />

        <input type='submit' value='Submit' />  
    </form>** 
```

并且必须归档一个是 manage_comments.php 代码在这里

```
**<?php
if( $_POST )
{
    $con = mysql_connect("localhost","asim","1234");

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("test", $con);

    $users_name = $_POST['name'];
    $users_email = $_POST['email'];
    $users_comment = $_POST['comment'];

    $users_name = htmlspecialchars($users_name);
    $users_email = htmlspecialchars($users_email);
    $users_comment = htmlspecialchars($users_comment);

    $articleid = $_GET['id'];
    echo $id; 
    if( ! is_numeric($articleid) )
        die('invalid article id');

    $query = "
 INSERT INTO `test`.`test` (`id`, `name`, `email`,
        `comment`, `timestamp`, `articleid`) VALUES (NULL, '$users_name',
        '$users_email','$users_comment',
        CURRENT_TIMESTAMP, '$articleid');";

    mysql_query($query);

    echo "<h2>Thank you for your Comment!</h2>";

    mysql_close($con);
}
?>** 
```

和其他文件是 display_comments.php 和代码是

```
**<?php

$con = mysql_connect("localhost","asim","1234");

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("test", $con);

$article_id = $_GET['id'];

if( ! is_numeric($article_id) )
    die('invalid article id');

$query = "SELECT * FROM `test` WHERE `articleid` =$article_id LIMIT 0 , 30";

$comments = mysql_query($query);

echo "<h1>User Comments</h1>";

while($row = mysql_fetch_array($comments, MYSQL_ASSOC))
{
    $name = $row['name'];
    $email = $row['email'];
    $comment = $row['comment'];
    $timestamp = $row['timestamp'];

    echo "  <div style='margin:30px 0px;'>
            Name: $name<br />
            Email: $email<br />
            Comment: $comment<br />
            Timestamp: $timestamp
        </div>";
}

mysql_close($con);

?>** 
```

我有不同的文章。但我无法获取 url paht 中的查询值是

例如路径是

```
**http://localhost/mysite-Copy/category/Article/money1.php** 
```

但它没有为文章ID设置查询值有什么问题请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:07:37.290

使用`$_POST['articleid']`而不是`$_GET['id']`. 因为表单方法是`'post'`. 例如，还添加`?id=12`到文章 id 12 的 url。

# jquery - jqgrid v4.4.4 - `{dataUrl:}` 在单一/高级搜索中被忽略，但在搜索工具栏/表单编辑中正确读取。错误或配置错误？

> ID：14920306
> 
> 赞同：0
> 
> 时间：2013-02-17T10:53:15.560
> 
> 标签：jquery, jqgrid

*   jQuery：v1.9.1
*   jqgrid：v4.4.4

我已使用通过属性从服务器检索到的数据成功填充了*搜索工具栏*和*表单编辑中的下拉列表，但是**高级搜索*表单`dataUrl`中的同一列不会出现相同的预期列表。

 *`jqgrid`有人可以用v4.4.4确认这个问题吗？我配置错了`jqgrid`吗？任何建议都会有所帮助！:-)

在下面的代码中：

*   `searchoptions:{dataUrl:}`*在单一/高级搜索*中被忽略
**   `searchoptions:{dataUrl:}`在*搜索工具栏中正确读取**   `editoptions:{dataUrl:}`*在编辑表单*中正确读取*

 **这是网格配置：

```
jQuery.extend(jQuery.jgrid.search, {recreateForm: true});

$("#school").jqGrid({
    height: 'auto',
    url: "lib/CSchoolAjax.php",
    datatype: "json",
    colNames: ['ID', 'Location'],
    colModel: [{
        name: 'school_id',
        index: 'school_id',
        width: 30,
        fixed: true,
        align: "center",
        search:false,
        hidden: false
        },{
            name: 'location',
            index: 'location',
            width: 80,
            align: "center",
            editable: true,
            edittype: 'select',
            editoptions: {
                dataUrl: "lib/CSchoolAjaxLocation.php",
                sopt: ['eq']
            },
            stype: "select",
            searchoptions: {
                dataUrl: "lib/CSchoolAjaxLocation.php",
                sopt: ['eq']
            }
        }
    ],
    sortable: true,
    rowNum: 5,
    rowList: [5, 10, 20, 30, 40, 50],
    autowidth: true,
    rownumbers: true,
    pager: '#pager_school',
    sortname: 'school_id',
    viewrecords: true,
    sortorder: "desc",
    multiselect: false,
    caption: "Schools",
    editurl: 'lib/CSchoolAjax.php',
    hiddengrid:true,
    autoencode: true
})
.navGrid('#pager_school', {
    edit: true,
    add: false,
    del: false,
    search:true
    },{
        width: 'auto'
    },{},{},{
        width: 'auto',
        multipleSearch:true,
        multipleGroup:false,
        //recreateForm: true,
        closeOnEscape: true
    },{
        closeOnEscape:true
})
.jqGrid('navButtonAdd', '#pager_school', {
    caption: "",
    title: "Select/Reorder Columns",
    buttonicon: "ui-icon-calculator",
    onClickButton: function () {
        $("#school").jqGrid('columnChooser');
    }
})
.jqGrid('navButtonAdd', "#pager_school", {
    caption: "Search",
    title: "Toggle Search Toolbar",
    buttonicon: 'ui-icon-search',
    onClickButton: function () {
        $("#school").filterToolbar({
            searchOnEnter: false,
            stringResult: true,
            defaultSearch: 'cn'
        });
    }
})
.trigger('reloadGrid'); 
```

脚本“CSchoolAjaxLocation.php”返回

```
<select>
<option value=“1”&gt;Location One</option>
<option value=“2”&gt;Location Two</option>
..
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:26:19.000

*单字段和高级搜索*[`ajaxSelectOptions`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)需要明确定义该属性。***

# php - jQuery Fileupload 和写入文件名做 MySQL 数据库

> ID：14920317
> 
> 赞同：1
> 
> 时间：2013-02-17T10:54:32.520
> 
> 标签：php, jquery, mysql

我正在尝试使用 jQuery 创建一个文件上传器，它上传一个文件，用时间戳重命名它并将其注册到数据库中。基本上，它将带​​有表单的文件发送到服务器，第二个脚本将其重命名并将文件移动到正确的目录。这没有任何问题。问题是，我还想发送应该创建此数据库条目的表名。

所以 index.php 包含以下形式：

```
<div id="uploaderMain">
        <p>Upload Your Files</p>
        <form method="post" enctype="multipart/form-data"  action="./upload.php">
            <input type="file" name="images" id="images" />
            <input type="hidden" name="List" id="List" value="<?php echo $DBTable; ?>" />
            <button type="submit" id="btn">Upload Files!</button>
        </form>

    <div id="response"></div>
        <ul id="image-list">
        </ul>
    </div> 
```

jQuery 代码如下所示：

```
$.ajax({
    url: "./uploader/upload.php",
    type: "POST",
    data: formdata,
    processData: false,
    contentType: false,
    success: function (res) {
        document.getElementById("response").innerHTML = res;
        }
      }); 
```

upload.php 看起来像这样：

```
 <?php
//include db configuration file

include_once('../../db.php');

$List = $_POST['List'];

// get the time stamp for the uploaded file
date_default_timezone_set('EST');
$date = new DateTime();
$date = $date->getTimestamp();
// echo $date;

foreach ($_FILES["images"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $name = $_FILES["images"]["name"][$key];
        // store the file name and the file ending in 2 variables
        $fileEnding = substr($name, -4,4);
        $fileName = substr($name, 0, (strlen($name)-4));
        $uploadName =  $fileName."_".$date.$fileEnding;
        move_uploaded_file( $_FILES["images"]["tmp_name"][$key], "./uploads/" . $uploadName);
    }
} 
```

之后我想写入数据库。问题是，$_POST['LIST'] 语句没有提供我的 DBTable 名称。

谁能给我一个提示？

干杯丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:20:09.507

如果`List`控件有任何值，您可以从浏览器中检查源代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:02:55.403

我认为您需要将其添加到您的 jQuery 代码中：

```
formdata.append('List', '[your value]'); 
```

请注意：在 PHP 中，所有文件都将进入 $_FILES。其他所有内容都将进入 $_POST。

如果这不起作用，请确保您还有以下代码：

```
var formdata = new FormData();          
jQuery.each($('input[type="file"]')[0].files, function(i, file) {
    formdata.append(i, file);
}); 
```

# jquery - jQuery输出到控制台2个变量的总和

> ID：14920322
> 
> 赞同：3
> 
> 时间：2013-02-17T10:55:05.573
> 
> 标签：jquery, jquery-plugins

以下代码跟踪用户遍历表单完成了多少次点击或选项卡，并添加了行为分数：

```
$(function() {
    $.fn.clickCount = function() {
        var clickCount = 0;
        var clickBehaviour = 0;

        return {
            increment: function() {
                clickCount++;
            },
            behaviour: function() {
                clickBehaviour -= 5;
            },
            print: function() {
                console.log('Click count:' + clickCount);
                console.log('Click behaviour:' + clickBehaviour);
            }
        };
    };

    $.fn.tabCount = function() {
        var tabCount = 0;
        var tabBehaviour = 0;

        return {
            increment: function() {
                tabCount++;
            },
            behaviour: function() {
                tabBehaviour += 5;
            },
            print: function() {
                console.log('Tab count:' + tabCount);
                console.log('Tab behaviour:' + tabBehaviour);
            }
        };
    };

    var $input = $('input, select, textarea');
    var c = $.fn.clickCount();
    var t = $.fn.tabCount();

    $input.mousedown(function() {
        c.increment();
        c.behaviour();
        c.print();
    });

    $input.keydown(function(e) {
        var keyCode = e.keyCode || e.which;

        if (e.keyCode === 9) {
            $(this).each(function() {
                t.increment();
                t.behaviour();
                t.print();
            });
        };
    });
}); 
```

我现在希望能够将 和 的值相加，`clickBehaviour`并`tabBehaviour`在每次单击时将其输出到控制台或`tab`

我已经尝试过了，但由于我对 JavaScript 的了解有限，我不断返回`NaN`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T11:12:10.557

您可以简单地`getBehaviour()`为每个插件添加一个方法，如下所示：

```
$.fn.clickCount = function() {
    var clickCount = 0;
    var clickBehaviour = 0;

    return {
        increment: function() {
            clickCount++;
        },
        behaviour: function() {
            clickBehaviour -= 5;
        },
        getBehaviour: function(){
            return clickBehaviour;
        }
        print: function() {
            console.log('Click count:' + clickCount);
            console.log('Click behaviour:' + clickBehaviour);
        }
    };
}; 
```

并使用以下代码打印：

```
function printSum() {
    console.log('Sum:' + (c.getBehaviour() + t.getBehaviour()));
}
printSum(); 
```

这是jsfiddle。[http://jsfiddle.net/FYAzw/](http://jsfiddle.net/FYAzw/)

# c# - 如何将 Aspnet_User 加入我的自定义用户

> ID：14920327
> 
> 赞同：1
> 
> 时间：2013-02-17T10:55:49.060
> 
> 标签：c#, entity-framework, entity-framework-5

我有一个`User`模型对象，当我得到这个对象时我不想`aspnet_User`用它来获取对象以获取其他数据（`usename`等）

```
public class User
    {
        public Guid UserId_fk { get; set; }
        public int UserId { get; set; }
        public string FirstName { get; set; }

        public virtual AspnetUsers AspnetUsers { get; set; } 

    }

public class AspnetUsers
    {
        public Guid ApplicationId { get; set; }
        public Guid UserId { get; set; }
        public string UserName { get; set; }
        public string LoweredUserName { get; set; }
        public string MobileAlias { get; set; }
        public bool IsAnonymous { get; set; }
        public DateTime LastActivityDate { get; set; }

    } 
```

在数据库`UserId_fk` 中是`FK to aspnet_Users.UserId`. 如何映射这个？

# python - 在 Django 中更改管理模板

> ID：14920332
> 
> 赞同：0
> 
> 时间：2013-02-17T10:56:56.197
> 
> 标签：python, django

我有下一个简单的模型：

```
class Reseller(models.Model):
    type = models.CharField(
        max_length=32,
        choices=(
            ('active', 'active'),
            ('inactive', 'inactive')))
    first_name = models.CharField(max_length=64, verbose_name='First Name')
    last_name = models.CharField(max_length=64, verbose_name='Last Name')
    email = models.CharField(max_length=64, verbose_name='E-mail')
    password = models.CharField(max_length=64, blank=True, editable=False) 
```

我已经为这个模型自动生成了 CRUD 的管理部分。我想在更新页面添加“重新发送密码”按钮（基本上将新凭据发送给经销商），但我不知道如何。我知道扩展功能，但我不知道如何正确应用它。单击此页面后最好转到同一页面，但添加某种提示“新密码已发送”。

另外我不知道如何在 Django 管理员中处理这个新按钮操作。任何代码片段都会很有用。谢谢

**更新** 我创建`change_form.html`并扩展了原始模板

```
{% extends "admin/change_form.html" %}

{% load i18n %}

{% block object-tools %}
{% if change %}
  <ul class="object-tools">
  <li><a href="reset_password/">Reset Password</a></li>
  </ul>

{% endif %}
{% endblock %} 
```

但是我不知道如何处理这个 HTTP 请求。另外我怎样才能传递任何参数？我应该创建一个表单而不是按钮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:14:41.217

您可能需要编写管理操作，查看[django 文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/actions/)了解更多详细信息。

**更新**：您应该创建类似这样的内容，您将获得一个可以从经销商列表页面应用于一个或多个选定经销商的操作。你最终会得到这样的东西： ![](../Images/9589b317f93aaeed73f884ee176db718.png)

```
from django.contrib import admin
from myapp.models import Reseller

class ResellerAdmin(admin.ModelAdmin):
    ...

    actions = ['reset_password']

    def reset_password(self, request, queryset):
        for obj in queryset:
            obj.password = genereate_new_passwd()
            sender.send(obj.email, obj.password)
            obj.save()
        self.message_user(request, "Passwords were resets for selected resellers successfully.")

    reset_password.short_description = "Resend Passwords for selected resellers"

admin.site.register(Reseller, ResellerAdmin) 
```

**更新 2：** 要在模型更改页面中提供自定义操作，您需要自定义 ResellerAdmin change_view() 并提供带有一些自定义操作的自定义模板。

```
from django.contrib import admin
from myapp.models import Reseller

change_form_template = 'admin/myapp/extras/reseller_change_form.html'

class ResellerAdmin(admin.ModelAdmin):

    def change_view(self, request, object_id, form_url='', extra_context=None):
        if(comming from new action)
            # intercept the request post here, if it comes from your new button, do reset password
        else: 
            return super(ResellerAdmin, self).change_view(request, object_id,
               form_url, extra_context=extra_context) 
```

另一种方法是通过添加布尔字段来自定义表单，并在 save_model() 检查是否为 True，然后重置密码并保存，否则只需保存对象。在这种情况下，您不必提供自定义模板。

```
class ResellerAdmin(admin.ModelAdmin):
    def save_model(self, request, obj, form, change):
        if change and form.is_reset:
             #do reset password and send
        obj.save()

    def get_form(self, request, obj=None, **kwargs):
        form = super(ResellerAdmin, self).get_form(request, obj, **kwargs)
        form.fields['is_reset'] = form.BooleanField()
        return form 
```

上面的代码并不完整，只是为了展示这个想法，更多关于自定义 ModelAdmin 的细节可以在[这里找到](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)

# ios - 以编程方式选择表格视图单元格：selectRowAtIndexPath vs setSelected

> ID：14920337
> 
> 赞同：8
> 
> 时间：2013-02-17T10:57:26.303
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我经常需要将表格视图单元格设置为使用以下代码的初始选定状态：

```
[self.tableView selectRowAtIndexPath:indexPath 
   animated:NO scrollPosition:UITableViewScrollPositionNone];
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
[cell setSelected:YES];
cell.accessoryType = UITableViewCellAccessoryCheckmark; 
```

我同时使用`selectRowAtIndexPath:indexPath`and `setSelected:YES`，因为我不完全理解这两种方式中的哪一种是以编程方式选择单元格的首选方式。

我应该使用哪一种陈述，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T11:51:38.940

我相信您要使用的方法是`selectRowAtIndexPath:animated:scrollPosition:`. 通常，您应该将单元状态的管理留给表格视图。在选择的情况下，它存储并维护一组选定的索引路径，因此在为它重用不同的单元格后，正确的行将保持选中状态。也不需要调用这两种方法，它只是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-28T20:23:01.680

就我而言

```
let indexPath = IndexPath(item: viewModel.item, section: viewModel.section)

self.categoryCollectionView.selectItem(at: indexPath, animated: true, scrollPosition: UICollectionView.ScrollPosition.centeredHorizontally)

if let cell = self.categoryCollectionView.dequeueReusableCell(withReuseIdentifier: SubcategoryCollectionViewCell.identifier, for: indexPath) as? SubcategoryCollectionViewCell {
    //...//
} 
```

# delphi - Delphi - 从任务栏菜单关闭应用程序时指针操作无效

> ID：14920341
> 
> 赞同：3
> 
> 时间：2013-02-17T10:57:55.557
> 
> 标签：delphi, delphi-xe

我有一个应用程序将所有动态创建的数据模块加载到 TList 中。应用程序在 windows XP 操作系统下运行。从应用程序关闭按钮关闭应用程序时，代码会正确执行。但是当从任务栏菜单关闭应用程序时，会引发无效指针操作。当以不同的方式关闭应用程序时，相同的代码表现不同。

负责销毁数据模块的代码

```
 for iPos := 0 to FDatamodules.Count - 1 do //FDataModules is of type TList
    if FDatamodules.Items[iPos] <> nil then 
      TDatamodule(FDatamodules.Items[iPos]).Free; 
```

和堆栈

```
:7c812a6b kernel32.RaiseException + 0x52
System.TObject.FreeInstance
System.ErrorAt(2,$4A7FEFC)
System.Error(reInvalidPtr)
System.TObject.FreeInstance
System._ClassDestroy(???)
Classes.TDataModule.Destroy
System.TObject.Free
RBAFORM.TRBABaseForm.Destroy 
```

LE：似乎从任务栏菜单关闭应用程序正在向应用程序发送 HALT(0) 并且数据模块被释放。在下图中：左边是正常关闭操作的堆栈，右边是从任务栏菜单关闭应用程序的堆栈。

![在此处输入图像描述](../Images/ca82f0339b98ea3a01ca993c09133357.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T11:15:55.863

这似乎是一个双重释放问题（就像 LU 对您的问题发表的评论），这意味着您不止一次释放数据模块的实例。

当您创建`Create(nil)`不属于任何人的实例时，您可以安全地调用`Free`它。（另见[组件构造函数中 nil owner 的含义是什么](https://stackoverflow.com/questions/5420260/what-is-the-meaning-of-nil-owner-in-component-constructor/5420728#5420728)）

如果您使用`Create(Form1)`（非 nil 参数）创建它，那么您不再有责任调用`Free`. `Form1`在本例中释放时会自动释放。

要确定发生了什么，您应该在 FullDebugMode 或类似的内存调试器中使用 FastMM。内存调试器应该能够发现问题并为您提供更多有用的信息。

# python - NameError：未定义名称“yearout”

> ID：14920342
> 
> 赞同：0
> 
> 时间：2013-02-17T10:58:07.583
> 
> 标签：python

请告诉我出了什么问题，以及需要改进的其他方式

```
def finalcalc(y, d, m):
    end = (y + d + m) % 7
    return end
def monthlook(m):
    if m == 1:
        monthout = 6
    elif m == 2:
        monthout = 2
    elif m == 3:
        monthout = 2
    elif m == 4:
        monthout = 5
    elif m == 5:
        monthout = 0
    elif m == 6:
        monthout = 3
    elif m == 7:
        monthout = 5
    elif m == 8:
        monthout = 1
    elif m == 9:
        monthout = 4
    elif m == 10:
        monthout = 6
    elif m == 11:
        monthout = 2
    elif m == 12:
        monthout = 4
print(finalcalc(yearout, dayout, monthout))    
def daysimp(d):
    dayout = d % 7
    monthlook(monthin)
def yearc(y):
    y = y % 100
    yearout = y + (y // 4)
    yearrem = y % 4
    if yearrem >= 2:
        yearout += 1
    yearout = yearout % 7
    daysimp(dayin)
dayin = int(input("What day in the Month?"))
monthin = int(input("What Month Number? - Eg. January is 1"))
yearin = int(input("What Year?"))
yearc(yearin) 
```

错误说：“NameError: name 'yearout' is not defined”- 请给我解决方案和您发现的任何其他问题的答案，以及可以简化和/或改进的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:59:54.597

`yearout``yearc` *是仅*在函数中定义的名称；当您调用`finalcalc()`该名称时，该名称不可见，并且您收到错误消息。

`dayout`和有同样的问题`monthout`。

您需要在调用之前确定值是什么`yearout`，`dayout`并且`monthout`应该*是*`finalcalc()`。也许您想将这些名称设置为其他函数的结果？然后需要使用这些函数`return`来使调用者可以使用这些值。

例如，更改`yearc`函数以返回新`yearout`值：

```
def yearc(y):
    y = y % 100
    yearout = y + (y // 4)
    yearrem = y % 4
    if yearrem >= 2:
        yearout += 1
    yearout = yearout % 7
    return yearout 
```

然后将该函数的结果存储在一个新名称中：

```
yearout = yearc(yearin) 
```

并对其他名称和功能执行相同的操作。

您真的很想再次阅读[有关函数的 Python 教程](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:02:55.073

与其从其他方法顺序调用方法，不如从每个方法返回值，然后调用下一个方法来获取下一个值。

由于您似乎想将在这三个方法中计算的值传递给您的`finalcalc`方法，因此您需要更改方法以返回这些值 - `yearout`、`dayout`和`monthout`，并将返回值存储在某个变量中。然后您可以将这些返回值用作`finalcalc`方法的参数：

```
yearout = yearc(yearin)
monthout = monthlook(monthin)
daysout = daysimp(dayin)

print(finalcalc(yearout, dayout, monthout)) 
```

您的方法`daysimp`可以简单地更改为：

```
def daysimp(d):
    return d % 7 
```

同样修改其他2个方法。

# javascript - 不确定为什么方法会吐出它吐出的东西

> ID：14920345
> 
> 赞同：1
> 
> 时间：2013-02-17T10:58:36.163
> 
> 标签：javascript, object, methods, constructor, prototype

这似乎是一个愚蠢的问题，但是......
如果我们有一个构造函数：

```
function Candy(name) {
    this.name = name;
} 
```

我们扩展这个对象 Candy 的原型：

```
Candy.prototype.printName = function(name) {
    console.log(this.name);
}; 
```

然后我们从 Candy 构造函数创建一个新对象，并为这个新对象运行继承的方法：

```
var chocolate = new Candy("chocolate");
chocolate.printName(); 
```

至于为什么我们得到巧克力作为输出，这不是我的想法。
当我们从构造函数创建巧克力对象时，我们本质上是这样做的：

```
var chocolate = new Candy();
chocolate.name = name; 
```

如果是这样，为什么当我们运行时：

```
chocolate.printName(); 
```

有一个空白的论点，它吐出：“巧克力”？
巧克力不就是我们用 Candy 构造器构建的对象的名称吗？
例如，巧克力不是我们指定的巧克力名称参数，而是名称。既然我们传递了一个空的参数字段，为什么我们会得到“巧克力”而不是名字呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:24:39.970

`name`方法中的参数`printName`从不使用。要使用您指定的签名调用该方法，您可以这样做：

```
chocolate.printName("Fudge"); 
```

这会将字符串`"Fudge"`作为参数发送到方法中`name`，但参数被忽略，它仍然会打印出您为对象指定的名称。

Javascript 允许您使用任意数量的参数调用任何函数。如果你使用的参数太少，剩下的参数只会有值`undefined`，如果你使用太多的参数，它们会在`arguments`集合中，但不会放在参数变量中。

因此，如果您调用`chocolate.printName();`，参数`name`将具有值`undefined`。如果您调用`chocolate.printName(1,2,3)`，参数`name`将具有值`1`，而其他值将在函数内部作为`arguments[1]`和可用`arguments[2]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:23:36.977

我不确定您到底在寻找什么，但是如果您添加以下`prototype`功能

```
Candy.prototype.compare = function (obj) {
  console.log(this === obj);
}

var chocolate = new Candy(); 
```

并称它为，

```
chocolate.compare(chocolate); 
```

它将打印真实。因此，当您分配值时

```
chocolate.name = name; // Asuming name = 'chocolate' 
```

`chocolate.printName();`将始终打印 的值`name`，即巧克力

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:21:01.850

因为你这样做：

```
var chocolate = new Candy("chocolate"); // "chocolate" is your argument here 
```

在你的 Candy 构造函数中，参数被获取并分配给`this.name`......

```
function Candy(name) {
   this.name = name; // name is "chocolate" if we use the above
} 
```

然后该`printname`方法将仅返回“chocolate”，因为它只是`this.name`从 Candy 对象中记录，您将其定义为传递给`Candy()`构造函数的任何参数。

希望这是有道理的。

# mysql - 这是将数据从一个表复制到另一个表的好方法吗？

> ID：14920346
> 
> 赞同：1
> 
> 时间：2013-02-17T10:58:40.670
> 
> 标签：mysql, sql

我有两个表，links1 和 links2。Links1 有几百万行，包含以下列：ID、URL、UTitle 和 UDesc。URL 列包含来自网络的 url，而 UTitle 和 UDesc 列是空的。

Links2 也有几百万行，包含以下列：ID、URL、标题和描述。URL 列有 url，但大多数与 links1 中的不同。标题和描述列用每行中 url 的标题和 meta:description 填充。我现在正在尝试比较这两个表，并且当 link2 中的一个 url 对应于 links1 中的 url 时，我想将 title 和 description（在 links2 中）中的数据复制到 UTitle 和 UDesc（在 links1 中）。

我还是 Mysql 的新手，所以我不确定以下是最快/最好的方法。如果有更好/更快的方法，我将不胜感激。

```
UPDATE links1
INNER JOIN links2 ON (URL.value = URL.value)
SET links1.UTitle = links2.title, links1.UDesc = links2.description 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:06:18.980

这是一个查询更快的方法，但是您的查询有误。这是更正后的版本：

```
UPDATE links1
INNER JOIN links2 ON (links1.URL = links2.URL)
SET links1.UTitle = links2.title, links1.UDesc = links2.description 
```

# c++ - 为什么用 A{8} 初始化的对象不能作为参数传递？

> ID：14920351
> 
> 赞同：2
> 
> 时间：2013-02-17T10:59:37.887
> 
> 标签：c++, types, c++11, initialization, initializer-list

以下代码使用 VC++ Nov 2012 CTP 编译。

```
#include <iostream>

using namespace std;

struct A
{
    A(int n)
    {
        cout << n << endl;
    }
};

void f(A)
{}

int main()
{
    A {8}; // OK. A::A(8); is called;

    cout << typeid(decltype(A {8})).name() << endl; // Output 'struct A'

    f(A {8}); // error C2275: 'A' : illegal use of this type as an expression    
} 
```

Q1：为什么是 f(A {8})；不合法？

Q2：为什么 A {8} 不被视为 A 的实例？

**更新：**

**这个问题似乎是 VC++ Nov 2012 CTP 的一个错误。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:13:05.800

{8} 是一个带有扩展初始化列表的声明。你不能在 C++11 之前使用扩展初始化列表。但是您可以只调用构造函数。

使用 C++11，您的代码是正确的。

# php - 如何在 Doctrine 1.2 中为映射表设置关系？

> ID：14920352
> 
> 赞同：0
> 
> 时间：2013-02-17T10:59:44.183
> 
> 标签：php, activerecord, doctrine, doctrine-1.2

表：

```
tbl_user(id, name)
tbl_group(id, name);
tbl_user_group(user_id, group_id); 
```

如果所有三个类都生成了**User,Group,UserGroup**。我应该如何设置用户或组中的关系，以便它们通过 user_group 表映射？

我正在使用 Doctrine 1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:29:47.033

由您来定义它们的关联，纯粹是因为只有您知道您希望您的应用程序如何工作。一个用户可以有多个组吗？只有一个？如果删除一个组，是否会删除所有关联的用户？这些是你需要问自己的问题。

如果您遵循[Doctrine 的](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/defining-models.html#join-table-associations)多对多关系文档中的示例（恰好涵盖了您需要的内容），您将到达那里。

# awk - awk 性能和 CPU 运行时间

> ID：14920353
> 
> 赞同：1
> 
> 时间：2013-02-17T10:59:49.790
> 
> 标签：awk, cut

我有一个包含数百万行和数千列/字段的输入文件。谁能向我解释一下，为什么下面两种产生相同输出的 awk 方法在 CPU 运行时间方面差异如此之大？

175.0 秒：

```
awk 'BEGIN{FS=":| "}NR>1{field1=$1;field2=$2;$1="";$2="";print field1":"field2,field1":"field2,field2,$0}' file_in > file_out 
```

19.7 秒：

```
cat file_in | awk 'BEGIN{FS=":"}NR>1{print $1,$2}' | awk '{print $1":"$2,$1":"$2,$0}' | cut -d " " -f 3 --complement > file_out 
```

这是一个 file_in 的第 2 行和第 3 行，只有数百列/字段（行之间没有换行符）：

```
1:1000071 C T 1 0 0 1 0 0
1:1000759 C T 1 0 0 0 1 0 
```

以下是 file_out 的相应行：

```
1:1000071 1:1000071 1000071 C T 1 0 0 1 0 0
1:1000759 1:1000759 1000759 C T 1 0 0 0 1 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T11:05:51.503

这两个陈述：

```
$1="";$2="" 
```

导致 awk 重新编译每条记录两次。鉴于每行有数百万行和数千个字段，我预计这会产生影响。

如果您向我们展示几行具有代表性的示例输入和预期输出，我们可以向您展示如何简洁有效地完成它。

看起来你所做的只是转换这样的行：

```
1:1000071 C T 1 0 ...
1:1000759 C T 1 0 ... 
```

像这样的行：

```
1:1000071 1:1000071 1000071 C T 1 0 ...
1:1000759 1:1000759 1000759 C T 1 0 ... 
```

如果是这样，您需要做的就是：

```
awk '{x=$1; sub(/[^:]+:/,x" "x" ")}1' file 
```

或者因为这是单行的简单替换，甚至 sed 也可以处理它：

```
sed 's/\([^:]*:\)\([^ ]*\)/\1\2 \1\2 \2/' file 
```

看：

```
$ cat file
1:1000071 C T 1 0 ...
1:1000759 C T 1 0 ...

$ awk '{x=$1; sub(/[^:]+:/,x" "x" ")}1' file
1:1000071 1:1000071 1000071 C T 1 0 ...
1:1000759 1:1000759 1000759 C T 1 0 ...

$ sed 's/\([^:]*:\)\([^ ]*\)/\1\2 \1\2 \2/' file
1:1000071 1:1000071 1000071 C T 1 0 ...
1:1000759 1:1000759 1000759 C T 1 0 ... 
```

啊，但我看到你提到你的示例输入来自第 2 行，所以我猜你有一个标题行或要跳过的内容。那将是：

```
awk 'NR>1{x=$1; sub(/[^:]+:/,x" "x" ");print}' file

sed -n '2,$s/\([^:]*:\)\([^ ]*\)/\1\2 \1\2 \2/p' file 
```

最后 - 如果您的行都以“1：”开头，如示例输入中所示，这是一个替代 awk 解决方案可能会更有效：

```
awk 'NR>1{print $1, $1, substr($0,3)}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:32:35.390

这仍然是最快的解决方案：

```
 cat file_in | awk 'BEGIN{FS=":"}NR>1{print $1,$2}' | awk '{print $1":"$2,$1":"$2,$0}' | cut -d " " -f 3 --complement > file_out 
```

# java - GWT - 方法的同步返回

> ID：14920355
> 
> 赞同：0
> 
> 时间：2013-02-17T11:00:01.847
> 
> 标签：java, gwt, rpc, gwt-rpc, synchronous

好的，GWT 中没有同步调用。

但如果我有这样的事情：

```
class XXX {
    Config c=new Config();
    c.doSomething();
} 
```

和类配置

```
public class Config {

    private static HashMap<String,String> map;

    public Config(){
        final ServerProxyAsync serverProxy= GWT.create(ServerProxy.class);
        serverProxy.getParameters(new AsyncCallback<HashMap<String,String>>() {
            @Override
            public void onFailure(Throwable caught) {
                System.out.println("getParameters: FAILED!");
                map=null;
            }

            @Override
            public void onSuccess(HashMap<String, String> result) {
                System.out.println("getParameters: OK!");
                map=result; 
                 // RETURN NOW!!!!

            }

        });
    } 
```

如果异步调用没有终止我不能做`doSomething()`，因为有时在地图初始化之前调用该方法。有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:22:43.013

`doSomething()`进去怎么样`onSuccess()`？

你不能使用`synchronous call in GWT.`即使你以某种方式使它不是一个好习惯

当你需要这个时，你必须在`onSuccess();`你的 RPC 调用中做这些事情。

因此，最好的办法是简单地使用异步方法并通过提供的回调继续执行。您最终将获得更好的用户体验，以及更专业的
应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:09:34.577

只需扩展您的`Config`课程以获取 a`Runnable`或 a `Callback`。像这样的东西：

```
public class Config {

    private static HashMap<String,String> map;

    private final Runnable callback;

    public Config(Runnable callback){
        this.run = run;
        final ServerProxyAsync serverProxy= GWT.create(ServerProxy.class);
        serverProxy.getParameters(new AsyncCallback<HashMap<String,String>>() {
            @Override
            public void onFailure(Throwable caught) {
                System.out.println("getParameters: FAILED!");
                map=null;
            }

            @Override
            public void onSuccess(HashMap<String, String> result) {
                System.out.println("getParameters: OK!");
                map=result; 
                callback.run();
            }
        });
    }
} 
```

然后你可以像这样使用它：

```
class XXX {
   final Runnable callback = new Runnable() {
       @Override
       public void run() {
           dosomething1();
       } 
    };
    Config c=new Config(callback);
} 
```

# java - 摆动计时器未启动

> ID：14920359
> 
> 赞同：4
> 
> 时间：2013-02-17T11:00:35.577
> 
> 标签：java, swing

我正在尝试使用 Swing Timer 重复打印一个语句，但该语句没有被打印出来！

我犯了什么错误？

```
 import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import javax.swing.Timer;

    public class SwingTimer implements ActionListener {

        Timer timer;

        public static void main(String[] args) {
            SwingTimer obj = new SwingTimer();
            obj.create();
        }

        public void create() {
            timer = new Timer(1000, this);
            timer.setInitialDelay(0);
            timer.start();
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("Hello using Timer");
        }    
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:07:48.753

javax.swing.Timer 可能作为守护线程启动：它不会让 jvm 保持活动状态，您的 main 结束，jvm 退出。它将计时器事件发布到 GUI 事件队列中，该队列在第一个对话框或框架可见时启动。

如果您根本不需要窗口系统，您必须创建一个 JFrame 并使其可见或使用[java.util.Timer 。](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)

下面的代码展示了如何使用[`java.util.Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)：

```
import java.util.Timer;
import java.util.TimerTask;

public class TimerDemo extends TimerTask {

   private long time = System.currentTimeMillis();

   @Override public void run() {
      long elapsed = System.currentTimeMillis() - time;
      System.err.println( elapsed );
      time = System.currentTimeMillis();
   }

   public static void main( String[] args ) throws Exception {
      Timer t = new Timer( "My 100 ms Timer", true );
      t.schedule( new TimerDemo(), 0, 100 );
      Thread.sleep( 1000 );              // wait 1 seconde before terminating
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T11:09:19.067

`javax.swing.Timer`仅应在使用 Swing 应用程序时使用。目前您的 main`Thread`正在退出，因为`Timer`使用了 daemon `Thread`。作为一种解决方法，您可以这样做：

```
public static void main(String[] args) {

   SwingTimer obj = new SwingTimer();
   obj.create();
   JOptionPane.showMessageDialog(null, "Timer Running - Click OK to end");
} 
```

非 UI 应用程序的替代方法是使用[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)

# html - 如何删除使用 \n 添加的多余空间

> ID：14920360
> 
> 赞同：1
> 
> 时间：2013-02-17T11:00:36.643
> 
> 标签：html, css

`<fieldset>`在以下示例中，如何删除 ' 之间的空格？这是一个[JSFiddle](http://jsfiddle.net/2rFpP/)。

![一个](../Images/f8fa9e3d9f3b733c0647f3928878b0b2.png)

**HTML**

```
<!-- Displays bad, but HTML looks good -->
<fieldset>test</fieldset>
<fieldset>test</fieldset>

<!-- Displays good, but HTML looks bad -->
<fieldset>test</fieldset><fieldset>test</fieldset> 
```

**CSS**

```
*
{
    margin: 0;
    padding: 0;
}

fieldset
{
    background-color: red;
    display: inline-block;
} 
```

我希望能够`<fieldset>`在 HTML 代码中的 ' 之间留出空格，因为它们的内容很长。但我需要它们彼此相邻显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:04:48.710

最好的解决方案是删除`inline-block`（或`inline`）标签之间的任何空格。

您可以使用注释以获得更好的可读性：

```
<fieldset>test</fieldset><!--
--><fieldset>test</fieldset> 
```

没有可以 100% 可靠的 CSS 解决方案。

编辑：似乎不是这样，但一些模板引擎提供了这种行为，比如 twig 的[`spaceless`](http://twig.sensiolabs.org/doc/tags/spaceless.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:08:01.260

**[演示](http://jsfiddle.net/2rFpP/6/)**

怎么样`float: left;`：

**CSS：**

```
fieldset {
    background-color: red;
    float: left;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T11:06:55.967

另一种解决方案是将字段集放在 DIV 容器中，并使用该容器的 CSS 将字体大小设置为 0。然后，当然，将字段集的字体大小设置回您需要的任何值。

在父容器上将字体大小设置为 0 基本上会删除该容器的内联块元素之间的空白。

# python - 终止后从 tcpdump 子进程获取包统计信息

> ID：14920361
> 
> 赞同：2
> 
> 时间：2013-02-17T11:00:37.017
> 
> 标签：python, subprocess, tcpdump

我`subprocess.Popen`用来执行 tcpdump，它可以在我的代码中正确收集包信息。
之后，我想用另一个线程杀死 tcpdump `os.kill(pid, signal.SIGKILL)`，然后记录相关的数据包统计信息。

一般来说，我想在 bash 中运行 tcpdump 时获取统计信息：

*   捕获的数据包
*   过滤器收到的数据包
*   内核丢弃的数据包

我尝试了以下格式的cmd：

```
proc=subprocess.Popen(shlex.split(tcpdump_cmd), 
                      stdouot=subprocess.PIPE, 
                      stderr=subprocess.PIPE) 
```

`proc.pid`但是，杀死by后我没有得到统计数据`proc.stdout/stderr.readline()`。
我也尝试使用：

```
fcntl.fcntl(fd.fileno().fcntl.F_SETFL,
            (fcntl.fcntl(fd.fileno.F_GETFL) | os.O_NDELAY | os.O_NONBLOCK)) 
```

他们都不能像我预期的那样输出统计数据。此外，我尝试了`shell=True`, 和`shell=false`- 相同的结果。

有没有办法我可以做到这一点？谢谢！

PS 我发现有一些与 tcpdump 相关的主题，不幸的是，据我所知，我没有发现他们可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:20:32.350

你是如何杀死进程的？

如果这是一个 UN*X，那么：

*   如果你用 SIGKILL 杀死它，那将立即终止 tcpdump 并且没有机会打印统计信息，因此将没有统计信息可供读取；
*   如果你用 SIGTERM 或 SIGINT 杀死它，它会向它发送一个它捕获的信号，所以它会在终止之前打印统计信息。

如果这是 Windows（因此您使用的是 WinDump），您可能无法终止它以使其有机会打印统计信息。

# winapi - 何时绘制（和隐藏）所有者绘制菜单栏的下划线

> ID：14920364
> 
> 赞同：2
> 
> 时间：2013-02-17T11:01:27.300
> 
> 标签：winapi, menu

在下面的帖子中

[Owner-Draw 菜单项的菜单加速键（下划线）](https://stackoverflow.com/questions/14861937/menu-accelerator-keys-underline-for-owner-draw-menu-items)

我问了一个关于“如何”在用户使用`Alt`键导航系统菜单时绘制下划线的问题，如果菜单栏是所有者绘制的。完成了（谢谢`Hans Passant`）。

但现在出现了另一个问题：“何时”绘制（和隐藏）下划线。

`Alt`关闭后，将生成`WM_DRAWITEM`消息（针对所有项目），然后生成消息`WM_SYSCOMMAND with wParam == SC_KEYMENU`，最后`WM_DRAWITEM`针对所选项目生成消息。

请参阅最后的消息列表。

由于在 WM_SYSCOMMAND 之后，没有其他项目的 WM_DRAWITEM，我必须使用`WM_SYSKEYDOWN with VK_MENU`来指示用户正在使用该键来导航系统菜单。所以我得到了以下代码：（这`byKey`是一个静态布尔变量）

```
 case WM_SYSKEYDOWN:
    {
        if (wParam == VK_MENU)
            byKey = true;
        return DefWindowProc(hwnd, msg, wParam, lParam);
    }

    case WM_EXITMENULOOP:
    {
        if (wParam == 0)
            byKey = false;
        return DefWindowProc(hwnd, msg, wParam, lParam);
    } 
```

我的问题是：***有没有更好的方法来知道“何时”绘制（和隐藏）下划线？***

```
<00686> 000B0444 P WM_SYSKEYDOWN nVirtKey:VK_MENU cRepeat:1 ScanCode:38 fExtended:0 fAltDown:1 fRepeat:0 fUp:0 [wParam:00000012 lParam:20380001]
<00687> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EF080 [wParam:00000000 lParam:003EF080]
<00688> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
<00689> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EF080 [wParam:00000000 lParam:003EF080]
<00690> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
<00691> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EF080 [wParam:00000000 lParam:003EF080]
<00692> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
<00693> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EF080 [wParam:00000000 lParam:003EF080]
<00694> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
<00695> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EF080 [wParam:00000000 lParam:003EF080]
<00696> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
<00697> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EF080 [wParam:00000000 lParam:003EF080]
<00698> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
<00699> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EF080 [wParam:00000000 lParam:003EF080]
<00700> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
<00701> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EF080 [wParam:00000000 lParam:003EF080]
<00702> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
....
<00708> 000B0444 P WM_SYSKEYUP nVirtKey:VK_MENU cRepeat:1 ScanCode:38 fExtended:0 fAltDown:0 fRepeat:1 fUp:1 [wParam:00000012 lParam:C0380001]
<00709> 000B0444 S WM_SYSCOMMAND uCmdType:SC_KEYMENU xPos:0 yPos:0 (used mnemonic) [wParam:0000F100 lParam:00000000]
<00710> 000B0444 S WM_ENTERMENULOOP fIsTrackPopupMenu:False [wParam:00000000 lParam:00000000]
<00711> 000B0444 R WM_ENTERMENULOOP lResult:00000000
....

<00714> 000B0444 S WM_INITMENU hmenuInit:01B10471 [wParam:01B10471 lParam:00000000]
<00715> 000B0444 R WM_INITMENU lResult:00000000
    <00716> 000B0444 S WM_DRAWITEM idCtl:0 lpdis:003EECE8 [wParam:00000000 lParam:003EECE8]
<00717> 000B0444 R WM_DRAWITEM fProcessed:True [lResult:00000001]
<00718> 000B0444 S WM_MENUSELECT uItem:0 fuFlags:MF_POPUP | MF_HILITE | MF_OWNERDRAW hmenu:01B10471 [wParam:01900000 lParam:01B10471]
<00719> 000B0444 R WM_MENUSELECT lResult:00000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:07:08.677

您的`WM_DRAWITEM`消息包含一个指向`DRAWITEMSTRUCT`. 在该结构中，如果应隐藏下划线，`ODS_NOACCEL`将设置标志。`itemState`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:18:57.740

查看消息`WM_UPDATEUISTATE`（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646361%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646361%28v=vs.85%29.aspx)）。

它的实现可能如下所示：

```
DWORD dwUiState = 0;  // current control state, usually a member in per-control struct.

switch(uMsg) {
   case WM_UPDATEUISTATE:
      switch(LOWORD(wParam)) {
         case UIS_INITIALIZE:  dwUiState = HIWORD(wParam); break;
         case UIS_CLEAR:       dwUiState &= ~HIWORD(wParam); break;
         case UIS_SET:         dwUiState |= HIWORD(wParam); break;
      }
      InvalidateRect(hWnd, NULL, TRUE);
      break;

   // ... handling of other messages
} 
```

而在`WM_PAINT`，你应该画下划线的时候`!(dwUiState & UISF_HIDEACCEL)`。

# design-patterns - 状态模式中的最大状态数

> ID：14920366
> 
> 赞同：2
> 
> 时间：2013-02-17T11:01:35.220
> 
> 标签：design-patterns, max, composite, state-pattern

我正在尝试使用状态模式，但我有一个问题。状态模式是否仅针对具有以下状态数量的情况而设计：

TCPState：1- TCPEstablished 2- TCPLisenting 3- TCPClosed 等。

或者它可以用于具有数百个状态的情况，例如员工考勤系统中的员工，其中员工将具有多个组件的复合状态，例如他的余额中的年假数，他应该补偿的小时数月，一个状态来表示他的小时工资率取决于本月的工作量等。每个员工可以具有多个属性的组合，最终被认为是具有某种行为的状态。

在这种情况下会有数百个状态对象，这样做正确吗？您将如何管理状态对象命名？以及如果例如三分之一的州对某种方法共享某种行为，而另一季度对某种方法共享另一种行为等，您会怎么做。即并非所有州在所有方法中都具有独特的行为。我不认为复制实现并将其粘贴到对这种通用方法具有相同行为的所有状态中是明智的！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:02:09.427

没有定义“状态”类的最大数量，但是如果您为每个“状态”实现一个“状态”类，您可能最终会出现大量代码重复，这本身就是一个问题。

请注意，作为*分配值组合的*“状态”与状态模式中的*“状态”类*不同，状态模式是一组抽象方法的实现。如果你问我用词不当，“状态”最好在模式中称为“行为”。

如果您可以在一组有限的“状态”类中捕获行为（即，如果它可以用有限数量的代码行构建，那么可能是的）那么您可以应用状态模式。正如您已经提到的，您可以通过维护多个活动状态来多次应用状态模式。

# c# - MSDTC 事务管理器无法从源事务管理器中提取事务

> ID：14920378
> 
> 赞同：1
> 
> 时间：2013-02-17T11:03:10.447
> 
> 标签：c#, asp.net, database, sql-server-2008

我有以下代码使用`transactionScope`

```
using (TransactionScope scope = new TransactionScope())
{
    MamConfiguration oldConfiguration;
    int oldTestId;
    using (mamdbEntities = new MaMDBEntities())
    {
        oldConfiguration = GetOldTestId(item.TestID);
        if (oldConfiguration == null)
        {
            ...

            ConvertToEfAndSave(item, oldTestId, oldConfiguration.CreatedDate);
            if(!item.UserMessage.IsErrorOccur)
            {
                scope.Complete();
            }
        } 
```

交易失败并出现以下错误：

```
17 Feb 2013 09:34:01,359||[15]||ERROR||MamInfrastructure.Logger.Log4NetLogger||Faild Update configuration to DB
System.Transactions.TransactionManagerCommunicationException: Communication with the underlying transaction manager has failed. ---> System.Runtime.InteropServices.COMException: The MSDTC transaction manager was unable to pull the transaction from the source transaction manager due to communication problems. Possible causes are: a firewall is present and it doesn't have an exception for the MSDTC process, the two machines cannot find each other by their NetBIOS names, or the support for network transactions is not enabled for one of the two transaction managers. (Exception from HRESULT: 0x8004D02B)
   at System.Transactions.Oletx.IDtcProxyShimFactory.ReceiveTransaction(UInt32 propgationTokenSize, Byte[] propgationToken, IntPtr managedIdentifier, Guid& transactionIdentifier, OletxTransactionIsolationLevel& isolationLevel, ITransactionShim& transactionShim)
   at System.Transactions.TransactionInterop.GetOletxTransactionFromTransmitterPropigationToken(Byte[] propagationToken)
   --- End of inner exception stack trace ---
   at System.Transactions.TransactionInterop.GetOletxTransactionFromTransmitterPropigationToken(Byte[] propagationToken)
   at System.Transactions.TransactionStatePSPEOperation.PSPEPromote(InternalTransaction tx)
   at System.Transactions.TransactionStateDelegatedBase.EnterState(InternalTransaction tx)
   at System.Transactions.EnlistableStates.Promote(InternalTransaction tx)
   at System.Transactions.Transaction.Promote()
   at System.Transactions.TransactionInterop.ConvertToOletxTransaction(Transaction transaction)
   at System.Transactions.TransactionInterop.GetExportCookie(Transaction transaction, Byte[] whereabouts)
   at System.Data.SqlClient.SqlInternalConnection.EnlistNonNull(Transaction tx)
   at System.Data.ProviderBase.DbConnectionInternal.ActivateConnection(Transaction transaction)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at Conduit.Mam.MaMDBEntityFramework.MamConfigurationBlDal.DeleteOldConfigurationTestId(Int32 testId) in d:\Builds\TFS\10\281\Sources\Server\MamAdmin\Dev\Admin 1.5\MaMDBEntityFramework\MamConfigurationBlDal.cs:line 135
   at Conduit.Mam.MaMDBEntityFramework.MamConfigurationBlDal.Save(MamConfigurationBL item) in d:\Builds\TFS\10\281\Sources\Server\MamAdmin\Dev\Admin 1.5\MaMDBEntityFramework\MamConfigurationBlDal.cs:line 77
   at Conduit.Mam.BL.SaveTestToDB.UpdateConfiguration(ABTest configuration, Boolean isProduction, Int32 testID) in d:\Builds\TFS\10\281\Sources\Server\MamAdmin\Dev\Admin 1.5\MaMBL\SaveTestToDB.cs:line 70
   at Conduit.Mam.Admin.Controllers.HomeController.Update(String expression, Boolean isProductionMode, Int32 testId) in d:\Builds\TFS\10\281\Sources\Server\MamAdmin\Dev\Admin 1.5\MAMAdmin\Controllers\HomeController.cs:line 114 
```

怎么可能是一个`MSDTC`？我的交易未分发

# ruby-on-rails - Rails 3.2 中的单元测试

> ID：14920380
> 
> 赞同：1
> 
> 时间：2013-02-17T11:03:13.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, rubymine

我从 Rails 3.2 开始，我有一些关于单元测试的问题。我不了解 minitest 框架和测试单元框架。它们是两个独立的东西还是 minitest 是测试单元的扩展？我应该使用哪个？我正在使用 Rubymine，在尝试运行单元测试时遇到了一些奇怪的错误。最后我添加了 gem 'test-unit' 然后它突然工作了，但我不明白为什么。

这是我的一些 gem 文件：

```
gem 'test-unit'

group :test do
  if RUBY_PLATFORM =~ /(win32|w32)/
    gem "win32console", '1.3.0'
  end
  gem "minitest"
  gem "minitest-reporters", '>= 0.5.0'
end 
```

这是 test_helper

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'
require 'minitest/reporters'
MiniTest::Reporters.use!

class ActiveSupport::TestCase
  # Setup all fixtures in test/fixtures/*.(yml|csv) for all tests in alphabetical order.
  #
  # Note: You'll currently still have to declare fixtures explicitly in integration tests
  # -- they do not yet inherit this setting
  fixtures :all

  # Add more helper methods to be used by all tests here...
end 
```

有人可以解释这一切是什么吗？

# python - 时间段后停止代码

> ID：14920384
> 
> 赞同：55
> 
> 时间：2013-02-17T11:03:27.277
> 
> 标签：python

我想打电话`foo(n)`但如果它运行超过 10 秒就停止它。有什么好方法可以做到这一点？

我可以看到，理论上我可以修改`foo`自己以定期检查它已经运行了多长时间，但我不希望这样做。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-17T12:01:24.813

干得好：

```
import multiprocessing
import time

# Your foo function
def foo(n):
    for i in range(10000 * n):
        print "Tick"
        time.sleep(1)

if __name__ == '__main__':
    # Start foo as a process
    p = multiprocessing.Process(target=foo, name="Foo", args=(10,))
    p.start()

    # Wait 10 seconds for foo
    time.sleep(10)

    # Terminate foo
    p.terminate()

    # Cleanup
    p.join() 
```

这将等待 10 秒，`foo`然后将其杀死。

**更新**

仅当进程正在运行时才终止该进程。

```
# If thread is active
if p.is_alive():
    print "foo is running... let's kill it..."

    # Terminate foo
    p.terminate() 
```

**更新 2：推荐**

`join`与 一起使用`timeout`。如果`foo`在超时之前完成，则 main 可以继续。

```
# Wait a maximum of 10 seconds for foo
# Usage: join([timeout in seconds])
p.join(10)

# If thread is active
if p.is_alive():
    print "foo is running... let's kill it..."

    # Terminate foo
    p.terminate()
    p.join() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T20:57:18.757

```
import signal

#Sets an handler function, you can comment it if you don't need it.
signal.signal(signal.SIGALRM,handler_function) 

#Sets an alarm in 10 seconds
#If uncaught will terminate your process.
signal.alarm(10) 
```

超时不是很精确，但如果您不需要极高的精度，可以这样做。

另一种方法是使用*资源*模块，并设置最大 CPU 时间。

# java - （非静态方法 Change(String,String,String) 不能从静态上下文中引用

> ID：14920386
> 
> 赞同：0
> 
> 时间：2013-02-17T11:03:38.450
> 
> 标签：java, methods

我已经搜索过，但不明白如何将以前的答案与我自己的代码结合起来。我有一个任务是为学校的“银行/奖学金”系统创建一个程序草案。这里我们需要创建很多不同的方法，这些方法应该被调用而不是直接进行更改。

问题是，我和其他一些人不断收到该主题中的错误消息，但我不知道如何解决它。如果有人能为我解释如何以及为什么要更改我的一种方法，我将非常感激，然后我假设我将能够自己重写所有其他方法。到目前为止，这是我的代码：

班级地址

```
public class Address {

public String street, zip, post;

public Address (String street, String zip, String post) {

    this.street = street;
    this.zip = zip;
    this.post = post;
}

// these are setters (mutators)
public void setStreet (String street) {
    this.street = street; }

public void setZip (String zip) {
    this.zip = zip; }

public void setPost (String post) {
    this.post = post; }

// these are getters
public String getStreet () {
    return this.street; }

public String getZip () {
    return zip; }

public String getPost () {
    return post; }

// methods
//public Address Change(Address newAddress) {
//return newAddress;
//}

// output
public String toString() {
    return (street + ", " + zip + ", "+ post); }

} 
```

类客户

```
import java.text.DecimalFormat;

public class Customer {

DecimalFormat twoD = new DecimalFormat("0.00");
Address address = new Address("Vik ", "6393 ", "Tomrefjord");

public String name, campus, newCampus, newAddress;
public double loan, increase,decrease,regMaster;
public boolean finished;

public Customer (String name,Address address, String campus, double loan, boolean finished) {
    this.name = name;
    this.campus = campus;
    this.loan = loan;
    this.address = address;
    this.finished = finished;
}

// these are setters
public void setName (String name) {
    this.name = name; }

public void setCampus (String campus) {
    this.campus = campus; }

public void setLoan (double loan) {
    this.loan = loan; }

public void setFinished (boolean finished) {
    this.finished = finished; }

// these are getters
public String getName () {
    return name; }

public String getCampus () {
    return campus; }

public double getLoan () {
    return loan; }

// methods
public void RegMaster () {
this.loan = loan * 0.90;}

//public void changeAddress (Address newAddress) {
//Address.Change(newAddress); }

public double decreaseLoan (double currentBalance, double decrease) {
currentBalance = currentBalance - decrease;
return currentBalance; }

public double getNewLoan (double currentBalance, double newLoan) {
    newLoan = currentBalance + newLoan;
    return newLoan; }

public String getNewCampus (String newCampus) {
    campus = newCampus;
    return campus; }    

public static boolean Ended () {
    return  true; } 

// output
public String toString() {
        return (name + "\t\n" + address + "\t\n" + campus + "\t\n" + twoD.format(loan) + "\t\n" + finished); }

} 
```

类 TestCustomer

```
import java.util.Scanner;

public class TestCustomer {

public static void main (String[] args) {

    String student, school, answer, street, zip, post;
    double balance, master;
    boolean finished = false;
    double done = 0; //this is for the loop

    Scanner scan = new Scanner(System.in);

    // a new student receives a loan
    System.out.println("Write your name");
    student = scan.nextLine();
    System.out.println("Enter your street name and number");
    street = scan.nextLine();
    System.out.println("What is your zip code?");
    zip = scan.nextLine();
    System.out.println("What is your post area?");
    post = scan.nextLine();
    System.out.println("Where do you study?");
    school = scan.nextLine();
    System.out.println("Input your current loan");
    balance = scan.nextDouble();

    Address residence = new Address(street, zip, post);
    Customer customer = new Customer(student, residence, school, balance, finished);
    while(done < 1) { //the variable done will have the value 0 until you are finished.
    // change address
    System.out.println("Do you wish to change your address? (yes/no)");
    answer = scan.nextLine();
    if (answer.equalsIgnoreCase("yes")) { //this made it case-insensitive, and now it is not skipping anymore...
        System.out.println("Write your street name and house number");
                street = scan.nextLine();
                System.out.println("Write your zip code");
                zip = scan.nextLine();
                System.out.println("Write your post area");
                post = scan.nextLine();
                //Address newAddress = new Address(street, zip, post);
                //residence = Customer.changeAddress(newAddress);
    }

    // increase the loan
    System.out.println("Do you want to increase your loan? (yes/no)");
    answer = scan.nextLine();
                if (answer.equalsIgnoreCase("yes")) {
                System.out.println("How much do you need?");
                double increaseLoan = scan.nextDouble();
                //customer.balance = getNewLoan(customer.balance, moreLoan);
            }

    // decrease the loan
    System.out.println("Do you want to make a downpayment on your loan?");
    answer = scan.nextLine();
                if (answer.equalsIgnoreCase("yes")) {
                    System.out.println("How much do you intend to pay?");
                    double downpayment = scan.nextDouble();
                    //customer.balance = decreaseLoan(customer.balance, downpayment);
                }

    // change school
    System.out.println("Do you study at the same school? (yes/no");
    answer = scan.nextLine();
                if (answer.equalsIgnoreCase("no")) {
                System.out.println("Write the name of the new school");
                school = scan.nextLine(); }
                //school.getNewCampus(customer.campus);

    // master check
    System.out.println("Have you finished your master? (yes/no)");
    answer = scan.nextLine();
                if (answer.equalsIgnoreCase("yes")) {
                customer.finished = Customer.Ended() ; //this will set finished to true, using the method like intended
                //customer.balance = Customer.RegMaster();      // dont know how to invoke it... me neither -_-
                }
            System.out.println("Are you done? yes/no");
            answer = scan.nextLine();
                        if (answer.equalsIgnoreCase("yes")) {
                    done = 1; } // this adds 1 to the variable done, thus ending the loop.
            }
            // output
            System.out.println("");
            System.out.println("The data we have so far is:");
            System.out.println(customer);

}} 
```

这是我所有的三个课程。一些功能被注释掉了，其他的只是不能正常工作（代码也有点乱，我昨天来回改变以试图让它工作）。任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:47:00.530

好的，根据您的评论，您的问题来自（有帮助的）注释掉的行

```
//public void changeAddress (Address newAddress) {
//Address.Change(newAddress); } 
```

这是因为您`Customer`没有“拥有” `Address`，您需要一个地址实例而不是`String`：

```
private Address address;

public Customer (final Address address) {
    this.address = address;
} 
```

为了清楚起见，我已经编辑了其他变量。顺便说一句，我会使用[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)而不是一个巨大的构造器。
现在你有`Address`一个`Customer`：

```
public void changeAddress (Some parameters to change) {
  address.setStuff();
} 
```

我建议您阅读有关和变量之间差异的[链接。](http://www.geom.uiuc.edu/~daeron/docs/javaguide/java/anatomy/static.html)`static``instance`

# visual-studio-2010 - 在 VS2010 调试器可视化器中显示带有嵌入空值的字符串

> ID：14920387
> 
> 赞同：2
> 
> 时间：2013-02-17T11:03:42.470
> 
> 标签：visual-studio-2010, visual-c++, debuggervisualizer

在 Visual Studio 2010 中，我试图在各种原生 C++ 调试器可视化工具组件中显示带有嵌入空值的字符串（char* 和 wchar_t*），例如数据提示区域（观察窗口、预览）和放大镜访问的扩展区域玻璃（字符串视图）。例如，我想显示一个 BSTR（嵌入在 ATL::CComBSTR 中）及其所有内容，即使字符串中有空字符。默认情况下，将指针设置为`,s8`、`,s`或`,su`会将字符串视为以空值结尾的字符串，这不是所需的行为。这个问题特别适用于 VS2010，而不是 2012、2008 或以前的版本。

有什么聪明的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T14:15:02.057

> 有什么聪明的主意吗？

假设您知道数据何时更改，并且您有自己的结构包装 BSTR，您可以将第二个仅用于调试的字符串向量（或带有一些分隔符替换空值的单个字符串）添加到与您保持同步的结构中包含嵌入空值的字符串，然后将向量可视化。它并不漂亮，但它允许您调试代码。

# python - 根据主机名/域安装 Bottle.py 应用程序？

> ID：14920388
> 
> 赞同：2
> 
> 时间：2013-02-17T11:04:02.880
> 
> 标签：python, routing, bottle

由于 bottle.py 为其应用程序执行基于 URL 前缀的路由，我想知道 bottle.py 是否可以支持基于域的应用程序。

我在邮件列表中发现了[一个丑陋的黑客](http://permalink.gmane.org/gmane.comp.python.bottle.general/730)，但它似乎不适用于

*   默认主机名故障回复
*   通配符主机名，例如 *.mysite.com
*   多个主机名的一条路线（这对本地开发工作很有用，例如 mysite.com 和 mysite.com.localhost 都可以工作）

而且我不想弄乱 nginx 或其他基于 Web 服务器的 URL 重写

有人对 Bottle.py 应用程序有更优雅的解决方案吗？

# php - 从表格中选择特定单元格

> ID：14920390
> 
> 赞同：1
> 
> 时间：2013-02-17T11:04:17.123
> 
> 标签：php, mysql

我知道我在这里想念的东西一定很愚蠢。我有一张桌子，所有的计算都很好。我被困在这里：

在 while 循环之后，我可以回显 ttl_sold 和除“余额”之外的所有其他信息。

在 while 循环中，这些都很好，我得到了结果：

```
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql); ?>

<?php
$sum = $sum + $rows['total'];
$ttlsold = $ttlsold + $rows['quantity'];
?>

<?php

$sum = 0;
$ttlsold = 0;

while($rows=mysql_fetch_array($result)){ 
```

ttl_sold 是 12，当我回显“余额”时，我得到 -12。我确实尝试将其包含在循环内部和外部，但仍然没有运气！

```
<?php
$balance = "SELECT stock FROM tbl_name WHERE id = 1";
$balance = $balance - $ttl_sold;
?>

<table width="1000" border="1" cellspacing="0" cellpadding="3">
<tr>
<td width="100"><?php echo $balance; ?></td> 
```

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:08:04.643

尝试这个，

```
$query = "SELECT stock FROM tbl_name WHERE id = 1";
$result = mysql_query($query);
while ($row = mysql_fetch_assoc($result))
{
    $balance = $row['stock'];
    $balance = $balance - $ttl_sold;
} 
```

*   [mysql_query](http://php.net/manual/en/function.mysql-query.php)

下面的文章讨论`SQL Injection`但它介绍了如何使用新的 PHP 扩展，例如`PDO`和`MySQLi`.

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:13:02.607

你正在做这样的事情：

```
$balance = "SELECT stock FROM tbl_name WHERE id = 1" - 12;
// PHP makes:
$balance = (int) "SELECT stock FROM tbl_name WHERE id = 1" - 12;
// And moreover:
$balance = 0 - 12;
$balance = -12; 
```

您必须先执行此查询，对于 MySQL，您可以使用[PDO](http://php.net/manual/en/book.pdo.php "PDO")或[MySQLi](http://php.net/manual/en/book.mysqli.php "MySQLi")。

# objective-c - Cocos2d / CCDrawNode - 如何画一条线？

> ID：14920392
> 
> 赞同：3
> 
> 时间：2013-02-17T11:04:29.143
> 
> 标签：objective-c, xcode, cocos2d-iphone, opengl-es-2.0

我看到有绘制圆圈、多边形、点和线段的功能。我没有看到用于绘制 AB 线（具有给定厚度）的方法，例如 ccDrawLine() （似乎已被弃用）。

我需要在连接的节点之间绘制一个“网络”。我有绘制网络的代码，但是 ccDrawLine 似乎不支持别名或不透明度，如 CCDrawNode。它也没有人工干预，似乎不支持批处理。

有什么建议吗？我需要做大量的数学运算才能在点之间以直角绘制一个 2 三多边形矩形吗？

**更新：** 根据下面的评论......我知道如何用厚度 2 做 0,0 到 10,0 的“线”，我必须在 {0,0.5}、{10、 0.5}, {10,-0.5}, {0,-0.5}...我可以计算出顺时针三角形的点来轻松地制作多边形。因此，我什至可以轻松地进行水平/垂直。但是您如何在 {4,5}、{10,7} 之间做到这一点？你会做一个普通的矩形并对其应用变换矩阵吗？还是您仍然会预先计算每 4 个点，然后从中制作 2 个三角形？

**更新：** 也许使用缩放的“线”精灵会更好？！例如：[https ://stackoverflow.com/a/8760462/224707](https://stackoverflow.com/a/8760462/224707)

**更新：** 丝带怎么样？那行得通吗？例如：[https ://stackoverflow.com/a/8178729/224707](https://stackoverflow.com/a/8178729/224707)

不确定功能区是否适用于点的“网络”......

**澄清：** 想象一下这张图片，但有直线，没有交叉点......像这样的东西：（ [来源：][[relenet.com](http://relenet.com/images/social-network_illu_farbig.png)][）][![](../Images/b56d9930a610ec20c1e3ee4cb1ad5098.png)](https://i.stack.imgur.com/bAMnF.png)

**更新：** 显然，我在论坛上的帖子确实在昨晚之前就在它下架之前... [http://www.cocos2d-iphone.org/forum/topic/224498](http://www.cocos2d-iphone.org/forum/topic/224498)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:38:08.747

一条线是一段。你可以从这里拿走... ;)

**更新：**

CCDrawNode 可以[绘制线段](http://www.cocos2d-swift.org/docs/api/Classes/CCDrawNode.html#//api/name/drawSegmentFrom:to:radius:color:)。线段是具有定义起点和终点的线。

# c++ - std::remove 导致编译错误

> ID：14920397
> 
> 赞同：2
> 
> 时间：2013-02-17T11:05:10.647
> 
> 标签：c++, linux, vector, std, stl-algorithm

我正在尝试使用问题的答案[并](https://stackoverflow.com/questions/3385229/c-erase-vector-element-by-value-rather-than-by-position)得到奇怪的错误 -

> /usr/include/c++/4.6/bits/stl_algo.h:162: 错误: '__first.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* 与 _Iterator = User* 中的 'operator==' 不匹配， _Container = std::vector, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = User& == __val'</p>

我正在使用 Linux（Ubuntu 64 位），也许这是个问题。提前致谢。

更新：我使用 remove() 的代码：

```
myVec.erase(std::remove(myVec.begin(), myVec.end(), vecMember), myVec.end()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T11:07:56.277

std::remove 调用`operator==`，你需要为你重载它`User type`：

假设您按名称比较用户：

```
bool operator==(const User& lhs, const User& rhs)
{
   return lhs.name == rhs.name;
} 
```

如果您仔细阅读，编译器消息会告诉您究竟缺少什么。

或者，如果您使用 C++11，则将[std::remove_if与 lambda 一起使用](http://en.cppreference.com/w/cpp/algorithm/remove)

```
myVec.erase(std::remove(myVec.begin(), myVec.end(), 
            [](const User& u){ return u.name == "name"; }), vec.end()); 
```

# php - codeigniter 将数据传递给嵌套视图

> ID：14920398
> 
> 赞同：0
> 
> 时间：2013-02-17T11:05:19.037
> 
> 标签：php, codeigniter, views

我已经对这个主题进行了很多研究，但我找不到如何做到这一点。我正在尝试将数据添加到`$data`从另一个视图的控制器调用的视图中的参数。但是，我添加到`subview`via 的任何数据`subcontroller`都不能被`subview`. 但是，当我尝试通过客户端视图将数据传递给子视图时，它工作得很好。SO上的大多数修复似乎只引用了调用`$key in $data['key']`而不是$data，所以这在这里似乎并不相关......

我有两节课：

*   welcome.php - 一个页面
*   welcomemenu.php - 一组用于加载到welcome.php 中的控件

这是我的客户端控制器（它所在的页面，`welcome.php`），它将子视图的返回值存储`$welcomemenu`在它自己的 $data 数组中......：

```
<?php

class Welcome extends CI_Controller {

    function __construct() {
        parent::__construct();      
    }

    function index() {
        //echo 'this is the Welcome index function';
        $data['clienttestdata'] = 'data from welcome.php!';
        $data['welcomemenu'] = $this->load->view('welcome/welcomemenu', $data, true);

        $this->load->helper('url');
        $this->load->view('templates/header');
        $this->load->view('pages/welcome', $data);
        $this->load->view('templates/footer');

    }
} 
```

这是客户端视图（“welcome_view.php” - 看起来很简单。$welcomemenu var 是我放置组件类返回的地方......）：

```
 <section id="allWelcomeContent" class="mainBody">
        <header id="mainPageHdr" class=mainPageHdr>
            <!-- other stuff from my header -->
        </header>
        <!-- this is where i want to put the welcome menu... -->
        <section id="mainWelcomeContent" class="mainContent">
            <div>
                <?php echo $welcomemenu;?>
            </div>
        </section>
    </section> 
```

这是我的子组件的控制器`welcomemenu.php`：

```
<?php

class Welcomemenu extends CI_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function index() {
        $data['menu_items'] = array('About', 'Portfolio', 'Resume', 'Fun', 'Blog'); 
        $data['testdata'] = 'data from welcomemenu.php!';

        $this->load->view('welcome/welcomemenu', $data);
    }
} 
```

最后：这是应该从自己的控制器获取数据的子视图，但不能，即使它可以从调用客户端获取数据（即，$clienttestdata 显示得很好，但 $testdata 没有）！

```
<section>
<!-- TODO:  make this element repeatable so content can load from controller and/or model. -->
<div id="divMenuItems">
    <?php echo $clienttestdata;?>
    <?php echo $testdata;?>
</div>
</section> 
```

我仍然找不到任何合适的解决方案。如果有人那么请给我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:15:50.673

当您在 Welcome/index 方法中包含 Welcomemenu 部分时，您必须记住该视图不会通过其自己的控制器。相反，它的内容作为字符串返回并存储为参数。它通过您发送给它的参数获取所有自己的参数`$data`：

```
$data['welcomemenu'] = $this->load->view('welcome/welcomemenu', $data, true); 
```

因此，此视图将可以访问`$data`到目前为止的所有内容 - 没有通过 Welcomemenu 控制器添加任何额外内容。因此，在上述情况下，它将具有：

```
array
(
   'clienttestdata' => 'data from welcome.php!'
) 
```

如果你添加你需要的参数`$data`（as `$data['testdata']`），你的子视图就会有它需要的东西。

# javascript - 剑道数据即气泡图 - xField 和 yField 数据

> ID：14920399
> 
> 赞同：0
> 
> 时间：2013-02-17T11:05:21.897
> 
> 标签：javascript, kendo-ui

在气泡图的所有演示中，我只能看到用于 xField 和 yField 的数字数据。是否可以使用字符串字段？当我尝试字符串时没有出现。

（使用java脚本版本）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:01:17.713

x 和 y 轴只能是数字。在将字符串输入图表之前，使用 parseFloat js 函数将字符串转换为整数。

# css-float - 将所有浮动项目放在一行中

> ID：14920400
> 
> 赞同：0
> 
> 时间：2013-02-17T11:05:25.937
> 
> 标签：css-float, row, css

我的小提琴：

[http://jsfiddle.net/trK7C/](http://jsfiddle.net/trK7C/)

HTML：

```
<div class="itemsContainer">
    <div class="image">
      <img src="http://www.itsalif.info/blogfiles/video-play/vthumb.jpg"/>
    </div>
</div>
<div class="itemsContainer">
    <div class="image">
      <img src="http://www.itsalif.info/blogfiles/video-play/vthumb.jpg"/>
    </div>
</div>
<div class="itemsContainer">
    <div class="image">
      <img src="http://www.itsalif.info/blogfiles/video-play/vthumb.jpg"/>
    </div>
</div>
<div class="clear"> 
```

CSS：

```
.itemsContainer {
  float: left;
  width : 300px;
  height : 300px;
  margin-left : 2px;
  border : 1px solid black;
  position : relative;
}

.image {
  width : 300px;
  height : 175px;
  margin-bottom : -115px;
  z-index : -1; 
  border : 1px solid green;
}

.image img {
      width : 300px;
  height : 175px;

} 
```

第三项浮动到页面的下一行

如何在没有水平滚动条的情况下将第三个项目放在同一行中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:14:52.153

[http://jsfiddle.net/trK7C/4/](http://jsfiddle.net/trK7C/4/)

将 float:left 更改为 display:inline-block 并将其全部包装在一个宽度足以容纳它的容器中。

```
#container {
    width:940px;
}
.itemsContainer {
    display:inline-block;
    width : 300px;
    height : 300px;
    margin-left : 2px;
    border : 1px solid black;
    position : relative;
}

<div id="container"> <!-- holds all the html in the fiddle --> 
```

# html - 如何用 HTML 和 CSS 模拟 \hfill？

> ID：14920401
> 
> 赞同：17
> 
> 时间：2013-02-17T11:05:41.300
> 
> 标签：html, css

考虑一个像这样的简单网页：

```
<!DOCTYPE html>
<html><head><title>Test!</title></head>
<body>
<p>a b c</p>
</body></html> 
```

我希望将*abc*格式化为就像我`a\hfill b\hfill c`在 TeX 中编写的一样。这是：a在左边，然后b居中，然后c在右边；都在同一条线上。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T14:03:39.730

您将如何处理这在很大程度上取决于您希望此处实际内容时的间距如何。这些技术适用于任何标签，为了简单起见，我在这里选择了一个列表。如果您正在使用`p`and `span`，则`ul`用`p`and`li`替换`span`。

```
<ul>
    <li>a</li>
    <li>b</li>
    <li>c</li>
</ul> 
```

所有这 3 种技术都可以在不修改源顺序的情况下工作。浮点数*可以*完成这项工作，但您必须将 c 放在 b 之前才能正常工作。

* * *

该技术使用 flexbox 并假设包含 a、b 和 c 的元素刚好足够容纳它们并且它们之间的空间相等（如果 a 大于 b，则 b 不会居中）。Flexbox 有很多选项来确定有关换行的行为，但默认情况下根本不换行。

[http://jsfiddle.net/4g8NY/1/](http://jsfiddle.net/4g8NY/1/)（不包括前缀）

```
ul {
    display: flex;
    justify-content: space-between;
} 
```

Flexbox 目前还没有得到非常广泛的支持，因为 IE10 是第一个支持它的 IE 版本。 [http://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)

* * *

您可以将`display: table`族与文本对齐一起使用，以产生元素以所需方式分布的错觉，但它们的容器占据了其父级宽度的 33%。在此示例中，无论实际内容如何，​​ b 都应保持完全居中。您的元素也具有相同的高度，无论如何都将被迫出现在同一行。

与其他技术不同，这假设永远只有 3 个元素。每次添加元素时，您都需要修改列宽并修改哪些列应该具有哪种对齐方式。

[http://jsfiddle.net/4g8NY/2/](http://jsfiddle.net/4g8NY/2/)

```
ul {
    display: table;
    width: 100%;
}

li {
    display: table-cell;
    width: 33%;
}

li:nth-child(2) {
    text-align: center;
}

li:last-child {
    text-align: right;
} 
```

对这种技术的支持非常好，因为我们所有的属性都在 IE8 中可用（IE8 是我的官方截止，IE7 和更早版本不被认为是“支持的浏览器”）。

* * *

第三种技术涉及使用伪元素作为父元素的最后一行，以便我们可以证明 a、b 和 c 的合理性。如果元素不适合在同一行，则无法防止使用此技术进行换行。

与其他技术不同，不需要额外的标记。它可能只是`p`您在示例代码中已有的标签。

[http://jsfiddle.net/4g8NY/3/](http://jsfiddle.net/4g8NY/3/)

```
ul {
    text-align: justify;
}

ul:after {
    content: " ";
    display: inline-block;
    width: 100%;
}

li {
    display: inline; /* if you're using an element that's already `inline` like a span, you don't need this */
} 
```

与上述技术类似，它适用于 IE8 或更高版本。

# android - Android UI 线程在简单的客户端/服务器架构中冻结等待套接字

> ID：14920407
> 
> 赞同：0
> 
> 时间：2013-02-17T11:05:59.367
> 
> 标签：android, sockets, client-server, freeze

我认为这是一个很常见的问题，但我仍然没有找到满意的答案，所以我要问自己。

这是一段代码：

```
// this is insine OnClickView
TextView status = (TextView) findViewById(R.id.status);
status.setText("Trying to connect to the server...");
try {
    // this opens a socket and send a login request to the server.
    int result = CommunicationManager.login(String email, String password);
    switch (result) {
    case CommunicationManager.SUCCESS:
        // login ok, go on with next screen
        break;
    case CommunicationManager.WRONG_EMAIL:
        status.setTextColor(Color.RED);
        status.setText("Wrong Email!");
        break;
    case CommunicationManager.WRONG_PASSWORD:
        status.setTextColor(Color.RED);
        status.setText("Wrong Password!");
        break;
    }
} catch (CommunicationException e) {
    status.setTextColor(Color.RED);
    status.setText("Unable to estabilish a connection!");
} catch (ProtocolException e) {
    status.setTextColor(Color.RED);
    status.setText("Protocol error!");
} 
```

**这就是我想要实现的目标：**

1.  用户点击发送按钮；
2.  status textview 显示“正在尝试连接到服务器...”；
3.  UI“等待”通信结束；
4.  status textview 相应地显示结果。

但是，当用户单击“发送”按钮时，**UI 会冻结**（*奇怪*的是在状态文本出现之前），直到通信完成（我尝试连接到未知主机）。一个快速的解决方法是设置套接字超时，但我不喜欢这种解决方案：UI 仍然冻结，应该设置哪个超时？

我的第一个想法显然是 Thread ，但是正如您所见，**我需要返回一个 value**，这在线程环境中没有多大意义，因为线程独立且异步运行。

所以我需要的绝对是 UI 等待服务执行但没有冻结。顺便说一句，在我看来，等待返回值意味着 UI***必须***等待任务结束，我只是不会让它冻结。

我遇到了 AsyncTask，但我看到了两个主要缺点：

1.  在我看来，这与 UI 耦合太紧密了；
2.  如果我想使用 Integer、String 和 Boolean 参数执行服务怎么办？我应该延长`AsyncTask<Object, Void, Void>`吗？

两者都导致不可扩展性。

我能做些什么来实现我的目标？请注意，对服务的另一个请求将是对尚未准备好的内容的请求，因此我应该每隔几次（假设十分钟）自动重复请求。所以可能我需要一些我可以使用的东西`TimerTask`，但我仍然需要在每次执行该服务时向 UI 返回一个值（这样我可以更新状态文本并让用户知道发生了什么）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T11:36:47.480

这是通过外部通信（即 HTTP 调用）处理时的典型用例。

最好的方法是使用 AsyncTask。为您解答您对 AsyncTask 的担忧。

> 在我看来，这与 UI 耦合太紧密了；

在这里，良好的代码设计将发挥作用。您可以编写自己的回调机制来摆脱紧密耦合。示例如下。

为 WS 调用所需的请求和响应创建版本。它可以是非常简单的原始类型或复杂类型参数。

```
class Result{
    //Define more para. 
```

}

```
class Request{
    //Deinf more para.
} 
```

写在回调接口下面。

```
public interface MyCallBack {
     public void onComplete(Result result);} 
```

在构造函数中创建 AsyncTask 并获取上面的 Interface 对象，相同的对象可以返回 Result 对象。

```
 class LongRunningTask extends AsyncTask<Request, Integer, Long>{
    private MyCallBack callback;
    public LongRunningTask(MyCallBack callback) {
        super();
        this.callback = callback;
    }
    @Override
    protected Long doInBackground(Request... params) {
        // Perform your back ground task.
        return null;
    }
    @Override
    protected void onPostExecute(Long result) {
        super.onPostExecute(result);            
        callback.onComplete(new Result()); //Here result is dummy but in real it should be contructred from doInBackground() method
    }
} 
```

现在是实现接口和调用 asynctask 的最后一个重要部分。我正在尝试重用您的代码以提高清晰度。

```
public class MainActivity extends Activity implements MyCallBack{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView status = (TextView) findViewById(R.id.status);
    status.setText("Trying to connect to the server...");
}

private void onClick(){
    //Similer to CommunicationManager.login(String email, String password); in your code.
    LongRunningTask longRunningTask = new LongRunningTask(this);
    longRunningTask.execute(new Request());
}

@Override
public void onComplete(Result result) {     
    try {

        int result = result.getStatus 
        switch (result) {
        case CommunicationManager.SUCCESS:
            // login ok, go on with next screen
            break;
        case CommunicationManager.WRONG_EMAIL:
            status.setTextColor(Color.RED);
            status.setText("Wrong Email!");
            break;
        case CommunicationManager.WRONG_PASSWORD:
            status.setTextColor(Color.RED);
            status.setText("Wrong Password!");
            break;
        }
    } catch (CommunicationException e) {
        status.setTextColor(Color.RED);
        status.setText("Unable to estabilish a connection!");
    } catch (ProtocolException e) {
        status.setTextColor(Color.RED);
        status.setText("Protocol error!");
    }
} 
```

> 如果我想使用 Integer、String 和 Boolean 参数执行服务怎么办？我应该扩展 AsyncTask 吗？

第一个参数是任何用户定义的参数。如果您需要传递多个参数，然后将它们放入实体的形式（即 - 类）。此外，您可以在 AsyncTask 的构造函数中传递初始配置参数，即 - 通信 URL。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:08:29.550

使用多线程，在不同的线程中进行所有通信

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:42:09.200

使用工作线程或 AsyncTask 执行长时间运行的操作。

此外，从 Android Honeycomb 开始，如果您在 UI 线程上执行网络操作，系统会抛出异常。

# ios - 使用 AlAssetsLibrary 读取 iphone 相机胶卷时出现内存问题

> ID：14920408
> 
> 赞同：0
> 
> 时间：2013-02-17T11:06:10.237
> 
> 标签：ios, objective-c, alassetslibrary, alasset

我正在尝试从 iphone 相机胶卷中获取最后一张照片。我使用以下代码：

```
UIImage* __block image = [[UIImage alloc] init];
ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];

[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup* group, BOOL* stop) {

    [group setAssetsFilter:[ALAssetsFilter allPhotos]];

    if ([group numberOfAssets] > 0) {
        [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:[group numberOfAssets]-1] options:NSEnumerationConcurrent usingBlock:^(ALAsset* alAsset, NSUInteger index, BOOL* innerStop) {
            if (alAsset) {
                ALAssetRepresentation* rawImage = [alAsset defaultRepresentation];
                image = [UIImage imageWithCGImage:[rawImage fullScreenImage]];
                [self doTheJobWithImage:image];
                // Inside doTheJobWithImage: a segue is also performed at the end
            }
        }];
    }
} failureBlock:^(NSError* error) {
    NSLog(@"Error: %@", [error localizedDescription]);
}]; 
```

它可以工作，但有缺陷（我正在使用 Instruments and Zombies 来调试它）：

*   它似乎阅读了相机胶卷中的每一张照片。那么，第一个问题：不枚举AssetsAtIndexes：只检索指定的图像（atIndexes）？我的代码有什么问题？
*   加上之前的问题，当相机胶卷中有很多照片时，内存就会成为问题。如果太多，或者如果它有效，我的应用程序崩溃，似乎检索到的图像永远不会被释放，所以我第二次或第三次调用此代码时，由于内存泄漏，它无论如何都会崩溃。所以第二个问题：如何在调用 doTheJobWithImage: 后强制我的代码释放所有内容？

我正在使用 xcode 4.6、ios 6 和 ARC。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:35:19.813

几个小时后，我发现这里的代码没有问题。这是提取相机胶卷中最后一张照片的正确代码（如果有人需要它）。问题在 doTheJobWithImage: 里面，我解决了它替换

```
[self doTheJobWithImage:image]; 
```

并将生成的图像存储在其他地方，然后在完成图片枚举后执行 doTheJobWithImage: 。这样说以防万一其他人感兴趣。

# vb.net - 尝试将 PHP 代码转换为 VB.net

> ID：14920423
> 
> 赞同：0
> 
> 时间：2013-02-17T11:07:56.477
> 
> 标签：vb.net

我的 PHP 代码是

```
$geourl = 'http://maps.google.com/maps/geo?key=' . $google_apikey . 
    '&output=json'. '&q=' . urlencode($_GET['url'] . ', USA').'&gl=us'; 
```

我的 ASPX 代码看起来像这样

```
Dim google_apikey As String="sdasdasd"    
Dim geourl As String= "http://maps.google.com/maps/geo?key=" & google_apikey & _
   "&output=json" & "&q=" & urlencode(request.QueryString("pc")& ", USA")"&gl=us" 
```

我得到的错误是**编译器错误消息：BC30205：预期语句结束。**

**而不是句点 (.) 我使用了 & 在 vb.net 中是否有效，上面的字符串 urlencode 有什么问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:09:59.410

认为你在最后错过了一个连接器。应该是：

```
Dim geourl As String= "http://maps.google.com/maps/geo?key=" & google_apikey & _
     "&output=json" & "&q=" & UrlEncode(request.QueryString("pc")& ", USA") & _
     "&gl=us" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:11:37.943

我建议您使用该`String.Format`方法使您的代码更具可读性：

```
Dim google_apikey As String="sdasdasd"    
Dim geourl As String = String.Format("http://maps.google.com/maps/geo?key={0}&output=json&q={1},USA&gl=us", UrlEncode(google_apikey), UrlEncode(Request.QueryString("pc"))) 
```

# mysql - 嵌套 SQL 查询不起作用

> ID：14920429
> 
> 赞同：0
> 
> 时间：2013-02-17T11:08:06.133
> 
> 标签：mysql, sql, nested

我正在尝试运行以下 sql 查询：

```
select *
from fblikes
order by likes desc (select * from fblikes order by id asc limit 0,4) 
```

它给出了以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '(select * from fblikes order by id asc limit 0,4) LIMIT 0, 30' 附近使用正确的语法

我想要实现的是查询应该通过'id'（升序）选择前5个条目，并且在这5个条目中它应该通过'likes'（降序）对它们进行排序。

我不擅长嵌套查询。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:09:27.820

```
select * 
from 
(
   select * 
   from fblikes 
   order by id asc 
   limit 0,4
) AS Sub
order by likes desc ; 
```

# android - 类似 Toast 的可点击替代方案来替代 NO-GUI 应用程序的启动意图？

> ID：14920430
> 
> 赞同：0
> 
> 时间：2013-02-17T11:08:11.360
> 
> 标签：android

对于我的生活，我无法弄清楚这一点。我开始做的是有一个可点击的 Toast 消息来启动一个意图。谷歌搜索后，我发现吐司无法点击。我以为我可以使用 PopupWindow 来实现相同的目的，但我的问题是我的应用程序没有视图，并且 PopupWindows 需要根视图。

```
public class MyApp extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    //Call an Android api method here

    Toast toast=Toast.makeText(this, "Hello", 3000);
    finish();
    }
} 
```

该应用程序只是调用一个 Android api，然后显示一个 Toast。根本没有图形用户界面。所以我的问题是，我可以用什么来替换这个 toast，以便我可以有一个可点击的对话框/弹出窗口来启动一个 Intent？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:10:29.033

这是 Android [Dialogs的完美案例](http://developer.android.com/guide/topics/ui/dialogs.html)

就像@ρяσѕρєя K 提到的那样，您可以使用`postDelayed`回调在指定时间后取消对话框，而无需用户干预。

另一种方法是使用 Toast 和自定义视图。

```
LayoutInflater inflater = getLayoutInflater();
View layout = inflater.inflate(R.layout.custom_toast,
                               (ViewGroup) findViewById(R.id.toast_layout_root));

Toast toast = new Toast(getApplicationContext());
toast.setView(layout); 
```

如果您因为没有先调用而遇到任何问题`setContentView`，您可以使用空白布局调用它。并在您的清单中将您的活动主题设置为`android:theme="@android:style/Theme.NoDisplay"`.

这将本质上创建一个透明的活动。所以看起来你的对话框是在用户之前的活动上

# c# - 检查表单是否已显示的正确方法？

> ID：14920434
> 
> 赞同：12
> 
> 时间：2013-02-17T11:08:33.623
> 
> 标签：c#, .net, winforms

我创建了一个任务管理应用程序，我想实现 2 位用户聊天特定任务的能力。

在`Form1`我有一个计时器，用于检查数据库是否发送了任何新消息。找到新消息后，会出现显示该消息的聊天表单。

到目前为止，一切都按预期工作，但我只有一个问题。

**问题：** 第一次找到新消息后，会出现聊天窗口，但是当找到另一条新消息时，会出现另一个窗口，并且对于每条新消息，我都会创建一个新的聊天窗口实例。

我正在使用的代码：

```
 List<string> tasksToDiscuss = checkForTasksToDiscuss(fullname);

        if (tasksToDiscuss.Count > 0) { 
 // open the chat window directly minimized
 Form14 frm14 = new Form14();
 frm14.get_from = fullname;
 frm14.get_to = tasksToDiscuss[1];
 frm14.get_task_id = int.Parse(tasksToDiscuss[3]);
 // set message as read
 if (setMessageAsRead(tasksToDiscuss[1], fullname, int.Parse(tasksToDiscuss[3])))
                    {
                        // now show the chat window minimized
                        frm14.Show();
                    }

 } 
```

我试图替换该行
`frm14.Show();`：`frm14.ShowDialog();`

我注意到当收到新消息时，会显示聊天窗口（form14），当收到来自同一用户的另一条消息时，没有出现新的聊天窗口，但问题是我关闭聊天窗口后，它没有即使我收到新消息也不会出现。

我想做的是将聊天窗口（Form14.Text）更改为用户全名，下次收到消息时，我检查特定窗口是否已经打开，然后不要打开它，否则我会显示使用`.Show()`方法形成表格。

**如果收到新消息并且它已经打开，这是使窗口不出现的正确方法吗？以及如何根据文本（标题栏文本）检查窗口是否打开？**

感谢您花时间阅读我的问题。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-17T11:18:47.253

`Form14`首先，您每次收到新消息时都会创建一个新实例。

其次`Show`，`ShowDialog`做两件非常不同的事情：

[Show](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.show.aspx)只显示表单，而[ShowDialog](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)将表单显示为模式对话框。这意味着用户在关闭表单之前不能做任何其他事情。

您需要有一个表单实例，并且可以使用该`Visible`属性来确定它是否显示。所以你会有：

```
private Form14 frm14; 
```

然后在构造函数中：

```
frm14 = new Form14(); 
```

然后在您的代码中：

```
if (!frm14.Visible)
{
    // Add the message
    frm14.Show();
} else{
    // Top
    frm14.BringToFront();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T11:16:08.123

尝试使 form14 成为 form1 的成员。当您收到一条新消息时，请检查 forom14 的 Visible 属性以了解它是否已经显示。

# javascript - 在同一页面上有两个 jQuery 日期选择器

> ID：14920435
> 
> 赞同：2
> 
> 时间：2013-02-17T11:08:42.997
> 
> 标签：javascript, jquery, datepicker, datetimepicker, timepicker

我正在使用 Timepicker（[此处](http://trentrichardson.com/examples/timepicker/)是 jQuery UI 的扩展 Datepicker ）。我的代码：

```
$('.one').datepicker({
    dateFormat: "d"
});
$('.two').timepicker({
    timeFormat: "hh"
}); 
```

当我单击字段 .two 时，Firebug 向我显示一个错误：

> 解析日期字符串时出错：位置 2 出现意外文字
> 
> 日期字符串 = 10
> 
> 日期格式 = mm/dd/yy
> 
> timepicker.js（第 1911 行）

一切似乎都很好，但我想知道为什么会出现这个错误，我怎样才能让它消失？

编辑：实际上我的代码如下所示：

```
$('.one').datepicker({
    dateFormat: "d m y"
});
$('.two').timepicker({
    timeFormat: "hh mm"
}); 
```

EDIT2：http: [//jsfiddle.net/r9bCk/](http://jsfiddle.net/r9bCk/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T11:50:21.120

Gury，尝试从[这里](https://raw.github.com/trentrichardson/jQuery-Timepicker-Addon/v1.1.0/jquery-ui-timepicker-addon.js)包含插件 v.1.1.0 ，希望它能解决错误。我用的是同一个版本。显然，新版本中存在错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T11:57:12.693

错误来自时间选择器插件本身。它在示例链接中。见 $('#basic_example_2').timepicker(); 选择之后。

![在此处输入图像描述](../Images/37d68ccc6c082fa62e622c4c7f8777d1.png)

按照 AsemRadhwi 的建议使用以前的稳定版本

# python - Pymacs - 无法调用使用 pymacs-eval 获得的方法

> ID：14920436
> 
> 赞同：1
> 
> 时间：2013-02-17T11:08:53.050
> 
> 标签：python, emacs, pymacs

[Pymacs 0.25 手册在第 3.4.2 节](http://pymacs.progiciels-bpi.ca/pymacs.html#id22)中有以下片段

```
(pymacs-exec "import re")
(setq matcher (pymacs-eval "re.compile('PATTERN').match"))
(pymacs-call matcher "PATTERN123") 
```

在带有 Python 2.7.3 的 Ubuntu 12.04（32 位）上的 Emacs24.2 中，前两条语句执行良好，但第三条语句抛出以下错误：

```
pymacs-report-error: Python: Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/Pymacs.py", line 268, in loop
    value = eval(text)
  File "<string>", line 1
    (lambda (&rest arguments) (pymacs-apply (quote (pymacs-python . 5)) arguments))(".") 
```

我对 Elisp 了解不多，但是 lambda 语句本身在 Cx Ce 的评估中没有任何错误，所以我不知道出了什么问题。此外，查看 Pymacs.py，看起来代码正在尝试直接评估 elisp 代码。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:27:21.647

由于该`pymacs-call`语句返回一个 lambda 函数，因此调用它`(funcall matcher "PATTERN123")`可以按预期工作。手册中的示例代码可能是错误的。

# forms - 如何将表格中的一行发送到struts动作中？

> ID：14920437
> 
> 赞同：0
> 
> 时间：2013-02-17T11:08:58.307
> 
> 标签：forms, struts2

我已经使用 struts 迭代器标记显示了一个表。现在每一行最后都有一个编辑链接。当单击编辑按钮时，我需要能够将该行发送到操作中。

但我无法理解如何做到这一点。我有

```
<s:form action="/execute" id="frm" name="frm" method="POST">
    <table style="width: 800px; ">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>        
                <th>Actions </th>      
            </tr>
        </thead>
        <s:iterator value="listToIterate" var="row" status="stat" begin="0" >
            <tbody>    

                <tr>    
                    <td><s:property value="ID"  /></td>
                    <td><s:property value="Name"  /></td>               
                    <td><s:a href="#" onclick="document.forms['frm'].submit();">
                            edit<s:param name="Name" value="%{#row[2]}"/></s:a></td>        
                    </tr>       
                </tbody>    
        </s:iterator>
    </table>
</s:form> 
```

使用 param 标记我想将该行设置为参数，以便我可以在我的操作中检索它。我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:29:37.490

假设您的表单正确显示 id ......然后将您的 s:a 替换为以下表单：

```
<s:a namespace="/yournamespace" action="the-edit-action">
   edit<s:param name="ID" value="ID"/>
</s:a> 
```

我宁愿把ID叫做id。the-edit-action 将需要一个 getter 和 setter 来获取 id。

# solr - Solr：发布的文件数不等于 maxDoc

> ID：14920439
> 
> 赞同：4
> 
> 时间：2013-02-17T11:09:11.113
> 
> 标签：solr, indexing

如果这个问题已经在某个地方得到回答，我提前道歉 - 我找不到它。

我对 Solr 比较陌生，并且一直按照[教程](http://lucene.apache.org/solr/4_1_0/tutorial.html)给出的说明使用默认的 SimplePostTool 从命令行索引我的数据。我目前在测试中使用 Solr 4.0。

首先，我通过查询删除索引中的所有内容。然后我将 SimplePostTool 指向几个目录并索引数万个文件。就我而言，目前，每个 XML 文件都是一个单独的文档。一些文档可能具有相同的 uniqueKey ID。如果重要的话，XML 文档的大小范围为 4-60kB。

SimplePostTool 完成后返回，并表示已索引 26,541 个文件。然后我查看 Admin collection1 页面，看到 Num Docs = 20,985 和 Max Doc = 22,921。

我看过[其他帖子](http://lucene.472066.n3.nabble.com/numDocs-and-maxDoc-td484902.html)讨论 Num Docs 和 Max Doc 之间的差异（我觉得我充分理解覆盖行为）。我的问题是为什么 SimplePostTool 报告的索引文档数量与 Solr 管理页面给出的 Max Doc 不匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-01T22:00:36.977

您有不同数量的 numDocs 和 maxDoc 的原因：

numDocs 表示索引中可搜索文档的数量（并且将大于 XML 文件的数量，因为某些文件包含多个文件）。maxDoc 可能更大，因为 maxDoc 计数包括尚未从索引中删除的逻辑删除文档。您可以根据需要一遍又一遍地重新发布示例 XML 文件，并且 numDocs 永远不会增加，因为新文档将不断替换旧文档。来自：[Solr 官方教程](http://lucene.apache.org/solr/4_4_0/tutorial.html)。这适用于旧版本。

您可以通过优化索引来删除逻辑删除的文件->

# php - php用引号将查询发送到数据库不起作用

> ID：14920443
> 
> 赞同：0
> 
> 时间：2013-02-17T11:09:40.673
> 
> 标签：php, input, double-quotes, quote

我有一个如下的mysql查询

```
mysql_query("select * from user where name='$name' LIMIT 1"); 
```

如果假设我来自客户端的输入是“John”，我的查询中将会出现 MySQL 错误。防止这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:12:40.203

尝试：

```
$query = sprintf("select * from user where name='%s', mysql_real_escape_string($name));
$result = mysql_query($query); 
```

确保 $name 包含您认为它所做的事情（回显它以确认）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:13:20.450

首先，不推荐使用 mysql_* 函数，您应该使用 PDO 或 mysqli_ 代替。这两个库实现了准备好的语句，它们会自动转义您的输入。

如果要改用 mysql_*，则必须调用`mysql_real_escape_string`传递的 var

```
mysql_query("select * from user where name='" . mysql_real_escape_string($name) . "' LIMIT 1"); 
```

# jquery - 在本地主机上的 Rails 中非常慢的文件上传

> ID：14920448
> 
> 赞同：1
> 
> 时间：2013-02-17T11:10:12.727
> 
> 标签：jquery, ruby-on-rails, ruby, file-upload

我使用carrierwave和jQuery文件上传。我尝试在本地主机上上传文件。Rails 基准测试表明总时间为几毫秒：

![在此处输入图像描述](../Images/e075881cc9853421bebce7c79185b41c.png)

但在所有浏览器中，这一次都成长为令人难以置信的价值！这是来自 chrome 的示例：

![在此处输入图像描述](../Images/18199748b04576bd5a2b02c4c99d34da.png)

文件大小约为 1MB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-18T08:43:10.303

您可以创建一个中间件并将其插入到 Rack 之前，例如：

```
class MultipartBufferSetter

  def initialize(app)
    @app = app
  end

  def call(env)
    env.merge!(Rack::RACK_MULTIPART_BUFFER_SIZE => 100*1024*1024)
    @app.call(env)
  end

end 
```

接着：

```
config.middleware.insert_before "Rack::Runtime", "MultipartBufferSetter" 
```

[你可以在这里](https://github.com/rack/rack/issues/1075)找到更多信息

希望它有效

# java - Java中的对象数组有默认值吗？

> ID：14920450
> 
> 赞同：6
> 
> 时间：2013-02-17T11:10:25.540
> 
> 标签：java, arrays

如果我构造：

```
Object[][] guy = new Object[5][4]; 
```

我的数组中的点有默认值吗？它们是空的吗？

有没有办法为数组中的每个点分配默认值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T11:12:13.800

是的，新数组中的字段是用`null`Java 初始化的。

您可以使用该方法[`Arrays.fill()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#fill%28java.lang.Object%5B%5D,%20java.lang.Object%29)用特定值填充数组中的所有字段。

如果您有长度很短的数组，并且您静态知道要放置什么，则可以使用[数组初始化器](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)：

```
Object[][] guy = { { obj1, obj2, null, obj3 }, { ... }, ... }; 
```

为此，您必须输入包含所有字段（在您的情况下为 20）的完整数组，因此如果您想在每个地方放置相同的值，`fill()`可能更方便。

顺便说一句，原始类型的数组。使用 0 和`false`布尔数组的各种变体进行初始化（只要您不使用初始化程序）。数组初始化的规则与字段的初始化相同，可以[在](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)Java 语言规范中找到。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-17T11:19:25.823

现有的答案都是正确的，但是在您的特定示例中需要添加一点。尽管引用数组默认为空，但多维数组隐含地创建了第一个维度。

例如，在您的情况下，第一个维度不会为空，但实际上会指向另一个数组：

```
Object[][] guy = new Object[5][4];
System.out.println(guy[0]);
--> Output will be [Ljava.lang.Object;@5e743399 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T11:12:36.630

[所有变量/字段都在 Java 中初始化。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)

咨询[http://docs.oracle.com/javase/specs/](http://docs.oracle.com/javase/specs/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T11:13:14.867

在 Java 中，对象初始化采用默认值“null”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T11:16:42.883

原始类型由默认值初始化，引用类型未初始化（因此它们为空）

尝试运行代码片段，看看会发生什么 public class ArraysSample {

```
/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    Object[][] objAr = new Object[4][5];
    for (Object[] objects : objAr) {
        for (Object object : objects) {
            System.out.print(object + "\t");
        }
        System.out.println();
    }

    int[][] primitievArray = new int[4][5];
    for (int[] is : primitievArray) {
        for (int i : is) {
            System.out.print(i + "\t");
        }
        System.out.println();
    }

} 
```

}

* * *

null null null null null null null null null
null null null null null
null null
null null null
0 0 0 0 0 0 0 0
0 0 0 0 0 0
0 0
0 0 0 0

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-17T11:14:58.123

是的，您可以进行默认分配，例如：

代替：

```
char[][] c = new char[5][4]; 
```

你可以：

```
char[][] c = {{'a','b','c','x','B'}, {'A','Z','w','Z','S'},
{'A','Z','w','Z','S'},{'A','Z','w','Z','S'}}; 
```

# c++ - 将 ifstream 转换为 bool 和使用 ifstream::is_open() 之间的区别

> ID：14920457
> 
> 赞同：7
> 
> 时间：2013-02-17T11:11:11.347
> 
> 标签：c++, casting, fstream, ifstream, ofstream

也许是一个愚蠢的问题，但我需要一个明确的答案。这些函数的返回是否有任何区别

```
int FileExists(const std::string& filename)
{
  ifstream file(filename.c_str());
  return !!file;
}

int FileExists(const std::string& filename)
{
  ifstream file(filename.c_str());
  return file.is_open();
} 
```

所以换句话说，我的问题是：强制转换`fstream`是否`bool`给出与 完全相同的结果`fstream::is_open()`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T11:13:31.793

No.`is_open`仅检查是否存在关联文件，而强制转换`bool`也检查文件是否准备好进行 I/O 操作（例如，流处于良好状态）（C++11 起）。

### [`is_open`](http://en.cppreference.com/w/cpp/io/basic_ifstream/is_open)

> 检查文件流是否有关联文件。

### [`std::basic_ios::operator bool`](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)

> 如果流没有发生错误并且准备好 I/O 操作，则返回 true。具体来说，返回`!fail()`.

# jquery - JQuery UI dialog confirmation pass variable and actions

> ID：14920458
> 
> 赞同：0
> 
> 时间：2013-02-17T11:11:11.723
> 
> 标签：jquery, jquery-ui

I'd like to pass a variable to a **Jquery Ui dialog** confirmation box to do something when press YES and only close the dialog when press No. Now I have this code

```
$("#confirmDialog" ).dialog({
resizable: false,
autoOpen: false,
modal: true,
buttons: {
    'OK': function() {
        $( this ).dialog( "close" );
        },
    'Cancel': function() {
        $( this ).dialog( "close" );
        }
    }
 });

$(".confirm").click(function(){

var myHref = $(this).attr("href");

   $("#confirmDialog").dialog( "open" ).html ( "Confirm?" )
   $("#confirmDialog").on( "dialogclose", function( event, ui ) { window.location = myHref } );
   return false;
}); 
```

For now I found only the function on("dialogclose") and nothing else. How can I set the ui dialog to do something when the user press YES? I tried to pass the variable as well but without success

```
$(".confirm").click(function(){    
$("#confirmDialog").attr(myHref).dialog( "open" ).html ( "Confirm?" )
return false;
}); 

$("#confirmDialog" ).dialog({
resizable: false,
autoOpen: false,
modal: true,
buttons: {
    'OK': function() {
        window.location.href = myHref;
        $( this ).dialog( "close" );
        },
    'Cancel': function() {
        $( this ).dialog( "close" );
        }
    }
     }); 
```

or

```
$("#confirmDialog").dialog( "open" ).html ( "Confirm?" )
$("#confirmDialog").on( "OK", function( event, ui ) { window.location = myHref } ); 
```

how can I do this? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:50:49.283

You could write it so your ok button click (inside the dialog), calls a function which uses the variable you want to set. You then set that variable inside the link click event, then display the dialog for confirmation.

For example:

```
 var $dialog = $( '#dialog-confirm' );
var $button = $('#linkButton');
var link = '';

// init dialog

$dialog.dialog({
  resizable: false,
  height:340,
  modal: true,
  autoOpen: false,
  buttons: {
    Ok: function() {
      doSomething(); // reference your function here
      $( this ).dialog( "close" );
    },
    Cancel: function() {
      $( this ).dialog( "close" );
    }
  }
});

// bind event

$button.on('click', function(e){
  e.preventDefault();
  link = $(this).attr('href');
  $dialog.dialog('open');
});

function doSomething(){
  window.location = link;
} 
```

Working example here: [http://jsbin.com/azezal/2/](http://jsbin.com/azezal/2/)

Code view here: [http://jsbin.com/azezal/2/edit](http://jsbin.com/azezal/2/edit)

# android - 将 ViewPager 作为一行放置在 ListView 中

> ID：14920459
> 
> 赞同：16
> 
> 时间：2013-02-17T11:11:32.653
> 
> 标签：android, android-layout, listview, android-fragments, android-widget

我尝试将 ViewPager 用作 ListView 中的一行，但得到一个奇怪的行为 - 只有第一行有效，但是当我滚动列表时它消失了。当我滚动一个空行时，突然正在查看上面的行。似乎 Android 创建了一个寻呼机并将其用于所有行。

这是我在启动应用程序时看到的：

![截屏](../Images/cf0c2decdfc5987400919e78efe864f4.png)

这是我的行布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/white"
    android:orientation="vertical"
    android:paddingBottom="2dp" >

    <TextView
        android:id="@+id/textViewFriendName"
        style="@style/TextStyle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/myFriendsBg"
        android:paddingBottom="5dp"
        android:paddingTop="5dp"
        android:text="TextView" />

    <View style="@style/DividerHorizontalStyle_gray" />

        <android.support.v4.view.ViewPager
            android:id="@+id/pagerMyFriendHabits"
            android:layout_width="match_parent"
            android:layout_height="@dimen/DefaultImageHeight" />

    <View style="@style/DividerHorizontalStyle" />

</LinearLayout> 
```

这是我的列表适配器：

```
public class MyFriendsAdapter extends BaseAdapter implements OnClickListener {

    private ArrayList<UiD_UserFriend> mItems;
    private Context mContext;
    private FragmentManager mFragmentManager;

    public MyFriendsAdapter(Context context, ArrayList<UiD_UserFriend> items, FragmentManager fragmentManager) {
        mContext = context;
        mItems = items;
        mFragmentManager = fragmentManager;
    }

    @Override
    public int getCount() {
        return mItems.size();
    }

    @Override
    public Object getItem(int position) {
        return mItems.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View currentView, ViewGroup viewGroup) {
        Holder holder = null;
        if (currentView == null) {
            currentView = View.inflate(mContext, R.layout.view_list_item_myfriends, null);
            holder = new Holder();
            holder.textViewUserName = (TextView) currentView.findViewById(R.id.textViewFriendName);
            holder.mMyFriendspager = (ViewPager) currentView.findViewById(R.id.pagerMyFriendHabits);
            currentView.setTag(holder);
        } else {
            holder = (Holder) currentView.getTag();
        }

        holder.textViewUserName.setText(mItems.get(position).getmName());
        MyFriendPagerAdapter tempMyFriendPagerAdapter = new MyFriendPagerAdapter(mFragmentManager, mItems.get(position).getFriendHabits());
        holder.mMyFriendspager.setAdapter(tempMyFriendPagerAdapter);

        return currentView;
    }

    class Holder {
        TextView textViewUserName;
        ViewPager mMyFriendspager;
    }
} 
```

这是我的寻呼机适配器：

```
public class MyFriendPagerAdapter extends FragmentPagerAdapter {

    private ArrayList<UiD_Habit> mHabits;

    public MyFriendPagerAdapter(FragmentManager fm, ArrayList<UiD_Habit> habits) {
        super(fm);
        mHabits = habits;
    }

    @Override
    public Fragment getItem(int index) {
        return new FragmentMyFriendPage(mHabits.get(index));
    }

    @Override
    public int getCount() {
        return mHabits.size();
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-25T16:09:30.797

每当您需要动态添加寻呼机时，您需要为每个寻呼机设置一个 ID，使用`ViewPager.setId()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-09T14:27:18.503

我创建了示例应用程序

带有片段的 ViewPager 示例：[https ://dl.dropboxusercontent.com/u/20178650/builds/listviewwithviewpager.zip](https://dl.dropboxusercontent.com/u/20178650/builds/listviewwithviewpager.zip)

但是有一个很大的缺点。所有单元格都存储在内存中，应用程序可能会因内存不足而崩溃，无论您是否有很多单元格

编辑：

经验上已经找到了。如果在 ViewPager 中使用简单的视图而不是片段。我可以正确编写适配器，而不会被内存击中

带视图的示例 ViewPager：[https ://dl.dropboxusercontent.com/u/20178650/builds/listviewwithviewpager_v2.zip](https://dl.dropboxusercontent.com/u/20178650/builds/listviewwithviewpager_v2.zip)

我希望有人能帮帮忙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-11T17:09:41.143

```
 /// <summary>
    /// To Improve ListView Memory Optimization 
    /// </summary>
    public class ViewPageHolder : Java.Lang.Object
    {
        public TextView _firstTextView{ get; set; }
        public ViewPager _ViewPager { get; set; }
        public CirclePageIndicator _CirclePageIndicator { get; set; }
    }
Queue<int> _pagerId= new Queue<int>(Enumerable.Range(10, 100));//To set a Unique Id to View Pager to avoid ListView Recycle memory issue

public override View GetView(int position, Android.Views.View convertView, Android.Views.ViewGroup parent)
        {
            View view = convertView;
            ViewPageHolder ViewPageHolder = null;

        if (view != null)
        {
            ViewPageHolder = view.Tag as ViewPageHolder ;
        }
        if (ViewPageHolder == null)
        {
            ViewPageHolder = new ViewPageHolder ();
            view = Context.LayoutInflater.Inflate(Resource.Layout.SystemListLayout, null);
            ViewPageHolder .SystemNameTextView = view.FindViewById<TextView>(Resource.Id.SystemNameTextView);
            //View Pager
            ViewPageHolder._ViewPager = view.FindViewById<ViewPager>(Resource.Id.viewPager);
            //Circle Pager Indicator
            ViewPageHolder.CirclePageIndicator = view.FindViewById<CirclePageIndicator>(Resource.Id.viewPageIndicator);
            ViewPageHolder._ViewPager.Id = _pagerId.Dequeue();
            ViewPageHolder._ViewPager.Adapter = new ZoneRenameViewPagerFragmentAdapter(fm, Context, List.ElementAt(position).Zones.ToList(), ((BaseActivity)Context).IsTablet);
            ViewPageHolder.CirclePageIndicator.SetViewPager(ZoneRenameHolder.ZoneRenameViewPager);
            view.Tag = ZoneRenameHolder;
        }
        return view;
    } 
```

1.  使用支架
2.  使用标签
3.  生成唯一 ID

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-05-05T08:07:56.377

我遇到了完全相同的问题。解决方案：

1.  使用支架
2.  使用标签
3.  生成唯一 ID

我解决了这个问题。如果有人需要代码请ping我。

# php - 如何减少通过简单的评论/评论系统发布的垃圾邮件？

> ID：14920465
> 
> 赞同：0
> 
> 时间：2013-02-17T11:12:34.177
> 
> 标签：php, regex

我知道我要问的问题有数百个例子。但他们都没有像通缉一样为我工作。

所以，我有一个文本区域，人们可以在其中添加评论/评论。但是评论框不断收到垃圾邮件。

我想正则表达式可能是阻止垃圾邮件发送者的最有效方法，但我对 Regex 很讨厌。

有没有其他方法可以阻止垃圾邮件？

编辑：垃圾邮件发送者不断发布类似的内容：

> Brianna 找工作 Lolita Pics 如果她在镜子前他妈的会更好！看到自己得到 f#@$ 更性感。只是想着就
> 欲罢不能

（剧透，轻微审查以避免在工作中引起人们的问题）

所以我想阻止字符串中的每个超链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:51:04.507

这里的答案很好，但有时愚弄机器人是一个很好的第一步。

绝大多数机器人只是阅读源代码，并将用垃圾填入他们可以找到的所有输入字段，发送请求，然后希望它有效。他们非常愚蠢，所以这样的事情可能会愚弄大多数机器人：

```
<p style="display:none">Screen readers: Use the next textarea (the first is used to confuse spam bots).</p>
<textarea name="comment" style="display:none"></textarea>
<textarea name="real_comment"></textarea> 
```

然后在你的脚本中：

```
if (isset($_POST['comment']) && strlen($_POST['comment']) > 0) {
    die('Bots begone!');
}
$comment = $_POST['real_comment']; 
```

换句话说，`textarea`在 HTML 中放置一个虚拟对象，使用 CSS 将其隐藏，然后等待机器人填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:19:09.653

有许多不同的方法可以摆脱垃圾邮件：

1.  **Captcha** - 例如[ReCaptcha](http://www.google.com/recaptcha)，但现在你可以以不到 3 美元的价格购买大约 1000 个重写的验证码。
2.  **用您的语言询问最知名的事实**- 您可以向用户询问他们知道的一些事实，但垃圾邮件发送者不会。
3.  **反垃圾邮件过滤器**- 例如[Sblam！](http://sblam.com/en.html)、[Akismet](http://akismet.com/)或其他反垃圾邮件服务。我认为它最适合你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T11:20:09.533

很多 Captcha 现在是 bot 可解决的，如果你想避免 Captcha，那么一个快速的建议是使用简单的文本陷阱。

在您的文本区域下，添加一个问题，例如；

> “一周有多少天？”

然后再添加一个文本框，对比一下这个说；

> 7或7等

如果测试失败，则拒绝该条目...

随着时间的推移，您可能需要改变您的问题，甚至列出不同的问题，但这是一种简单易行的实施方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T11:20:33.203

做你想做的最简单的方法是搜索字符串`http://`

以下 if 语句允许最多 3 个链接`$text`

```
if (substr_count($text,"http://") > 3) 
```

但这并不是一个足够的检查，因为有很多垃圾邮件，根本不包含任何链接 - 只是垃圾。

所以你要做的第二件事，是一个带有“坏话”的黑名单

```
 $lower = strtolower($text);
    foreach ($blockword as $word) {
            if (strpos($lower, strtolower($word))>0) {
                    //handle spam here..
            }
    } 
```

毕竟，您必须维护一个不断增长的单词列表，并且仍然必须删除大量垃圾邮件..

因此，您可以选择添加一个带有随机值的不可见字段，这些值存储在会话中并检查该值是否正确提交

```
$_SESSION["random_secret"] = //create random string.. 
```

然后检查

```
if ($_POST["secret"] == $_SESSION["random_secret"]) 
```

通过此检查，您可以摆脱很多自动垃圾邮件（但仍然不是全部）

所以毕竟你最终得到了验证码

# php - 自定义 XML RS 提要

> ID：14920469
> 
> 赞同：0
> 
> 时间：2013-02-17T11:13:04.350
> 
> 标签：php, xml, rss, mysqli

在过去的 6 周里，我一直在用 php 和 mysqli 开发一个自定义社交网络。无论如何，今天我决定为博客系统创建一个提要。我已经使用 w3 提要验证服务检查了我的脚本，它运行良好！问题是页面上没有显示任何提要，这是我的脚本.....>

```
<?php include"php_includes/db_conx.php"; ?>
<?php header('Content-type: text/xml'); ?>
<?php echo '<?xml version="1.0" encoding="iso-8859-1"?>';
?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
<title>Birdbooks Blog Feed</title>
<description>Birdbook is a Social Network with Birders in mind</description>
<link>http://www.birdbook.org.uk/</link> <copyright> copyright 2013 Birdbook Social Network</copyright>
<atom:link href="http://www.birdbook.org.uk/feed/" rel="self" type="application/rss+xml" />
<?php $query = "SELECT * FROM 'blog' ORDER BY 'delimiter' DESC LIMIT 0,15";
$results = $db_conx->query($query);
$number = $results->num_rows;
for ($i = 1; $i <= $number; $i++) {
    $row = $results->fetch_assoc();
    $title = $row['blogtitle'];
    $description = $row['description'];
    $link = $row['linklabel'];
    $date = date("r", $row['lastmodified']);
?>
<item>
<title><?php echo $title; ?></title>
<description><?php echo $description; ?></description>
<link><?php echo $link; ?></link>
<pubDate><?php echo $date; ?></pubDate>
<guid><?php echo $link; ?></guid>
</item>
<?php } ?>
</channel>
</rss><?php $db->close(); ?> 
```

有人有任何想法吗？非常感谢.. Phillip Dews

# php - 自定义二进制数据的 cURL POST（不是表单内容）

> ID：14920475
> 
> 赞同：3
> 
> 时间：2013-02-17T11:13:28.423
> 
> 标签：php, post, curl, http-post

以下代码段成功发送 POST 请求但未在 $sendStream 中发送数据的问题（流有效且包含数据 - 已验证）：

```
curl_setopt($request, CURLOPT_HTTPHEADER, array('Content-type: application/x-rethync-request'));
curl_setopt($request, CURLOPT_HEADER, true);
curl_setopt($request, CURLOPT_RETURNTRANSFER, true);
curl_setopt($request, CURLOPT_INFILE, $sendStream);
curl_setopt($request, CURLOPT_INFILESIZE, stream_length($sendStream));
curl_setopt($request, CURLOPT_CUSTOMREQUEST, "POST");

$response = curl_exec($request); 
```

我可能已经在 SO 上阅读了所有与 cURL POST 相关的帖子，但没有运气。为什么没有公布数据？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T11:13:28.423

丢失的部分是

```
 curl_setopt($request, CURLOPT_UPLOAD, 1); 
```

PHP 文档简要地提到了这个选项，没有任何建议应该设置该选项。尽管通过 CURLOPT_INFILE 指定了 cURL，但至少有一些（如果不是全部）版本不会发布数据，除非还设置了 CURLOPT_UPLOAD。

注意：当您使用此方法发送数据时，响应头将包含`HTTP/1.1 100 Continue`第一个，然后是`HTTP/1.1 200 OK`等等。因此，当您解析响应标头时，请注意前 100 个 Continue 响应（您需要将其剥离）。

# ios - 在 cocos2d 中用颜色填充一个圆圈

> ID：14920478
> 
> 赞同：2
> 
> 时间：2013-02-17T11:13:34.960
> 
> 标签：ios, objective-c, iphone, cocos2d-iphone

我使用 cocos2d，我画这样的圆圈

```
- (void)draw:(Ball*)ball {
    glLineWidth(1);
    ccDrawColor4F(255 / 255.0f, 0 / 255.0f, 0 / 255.0f, 200 / 255.0f);
    ccDrawCircle(ball._center, ball._radius, CC_DEGREES_TO_RADIANS(ball._angle), ball._segments, NO);
    ball._center = CGPointMake(ball._center.x + ball._directionX, ball._center.y + ball._directionY);
} 
```

这是球的一种状态，我增加中心以便它可以移动。这会产生红色边框圆圈，但我想用颜色和 alpha 填充圆圈。

我还尝试子类化 CCSprite 类并调用

```
self.color = ccc3(200 / 255.0f, 0 / 255.0f, 0 / 255.0f); 
```

在 init 方法中，但同样只有圆圈的边框有颜色。

所以我的问题是如何用颜色填充一个圆圈，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:30:01.033

谢谢你们！我没想过要更改 cocos2d 代码来完成我的工作，我不知道这是否正确，但它对我有用！

正如雷切尔·加伦所说。我去了 CCDrawingPrimatives.m 并改变了

```
glDrawArrays(GL_LINE_STRIP 0, (GLsizei) segs+additionalSegment); 
```

到

```
glDrawArrays(GL_TRIANGLE_FAN, 0, (GLsizei) segs+additionalSegment); 
```

它奏效了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T12:05:57.817

设置不透明度试试这个

来自[http://www.cocos2d-x.org/boards/6/topics/5868](http://www.cocos2d-x.org/boards/6/topics/5868)

```
void CMySprite::draw()
{
// is_shadow is true if this sprite is to be considered like a shadow sprite, false otherwise.@
if (is_shadow)
{
ccBlendFunc    blend;
// Change the default blending factors to this one.
blend.src = GL_SRC_ALPHA;
blend.dst = GL_ONE;
setBlendFunc( blend );
// Change the blending equation to thi in order to subtract from the values already written in the frame buffer
// the ones of the sprite.
glBlendEquationOES(GL_FUNC_REVERSE_SUBTRACT_OES);
}

CCSprite::draw();

if (is_shadow)
{
 // The default blending function of cocos2d-x is GL_FUNC_ADD.
glBlendEquationOES(GL_FUNC_ADD_OES);        
}
} 
```

# c++ - 使用基于 WM_POINTER 的触摸进行两指平移

> ID：14920479
> 
> 赞同：1
> 
> 时间：2013-02-17T11:13:49.737
> 
> 标签：c++, windows-8, touch, multi-touch

我正在使用 WM_POINTER 触摸机制（和上下文交互回调）在 Windows 8、c++ 上工作。我的问题是 - 如何区分缩放操作和两指平移操作？

谢谢，雅科邦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:32:58.770

AFAIK，如果您使用这种低级机制，您需要自己做“数学”。您需要分别检测每个指针（每个指针都有一个 id）并找出它们彼此之间的关系。在计算距离、增量等之后，您可以对用户的手势做出假设。

WM_GESTURE 使您能够检测更高级别的触摸事件（缩放、平移）并为您进行计算：http: [//msdn.microsoft.com/en-us/library/dd353242 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/dd353242(VS.85).aspx)

据我所知，WM_GESTURE 和 WM_TOUCH 是互斥的。

# css - css 标题布局宽度 3 div

> ID：14920480
> 
> 赞同：0
> 
> 时间：2013-02-17T11:13:54.163
> 
> 标签：css

我正在尝试创建一个带有 3 个 div 的标题：一个左对齐，一个右对齐，另一个居中。![在此处输入图像描述](../Images/056a1b182a4c18096ef1aba8eeeb8074.png)

例如，页面为 1200 像素，黑色、红色和黄色矩形为 960 像素并在页面中居中。黑色矩形中的元素被添加到左侧，yywo 矩形中的元素被添加到右侧，红色 tectangle 中的元素居中。

这是网站标题的一个很好的一般案例研究

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:18:58.807

这将解决您的问题

```
<div class="header" style="width:1200px;">
<div style="width:40%;float:left;" class='black-one'>
    <div style='float:left;'>Some content</div>
    <div style="clear:both"></div>
</div>
<div style="width:20%;float:left;" class='red-one'>
    <div style="margin:10px auto;text-align:center">Some content</div>
    <div style="clear:both"></div>
</div>
<div style="width:40%;float:left;" class='yellow-one'>
<div style='float:right;text-align:right;'>Some content</div>
        <div style="clear:both"></div>
</div>
<div style="clear:both"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:18:21.333

不久前我写了一篇关于此的文章，这是我的代码...

```
<div id="mainContent">

  <div id="col1">

    Column 1

  </div>

  <div id="col2">

    Column 2

  </div>

  <div id="col3">

    Column 3

  </div>

  <div id="clearance" style="clear:both;"></div>

</div> 
```

这是它的CSS....

```
#mainContent {

    width: 1000px;

    margin-right: auto;

    margin-left: auto;

    text-align: center;

}

#col1 {

    margin: 10px;

    float: left;

    width: 300px;

}

#col2 {

    margin: 10px;

    float: left;

    width: 300px;

}

#col3 {

    margin: 10px;

    float: left;

    width: 300px;

} 
```

希望这会有所帮助……菲利普·杜斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:28:31.280

试试这个..

```
<style>
.header { margin: 0px auto; width: 1200px; }
.floatt { float: left; margin-right: 5px;}
.black-one { width: 40%;}
.red-one { width: 20%;}
.yellow-one { width: 40%;}
.clear { clear: both;}
</style>

<div class="header">
<div class='black-one floatt'>
Some content
</div>
<div class='red-one floatt'>
Some content
</div>
<div class='yellow-one floatt'>
Some content
</div>
<div class="clear"></div>
</div> 
```

# java - AsyncTask 有错误 - 初学者

> ID：14920483
> 
> 赞同：3
> 
> 时间：2013-02-17T11:14:07.010
> 
> 标签：java, android, android-asynctask

最终，我希望此方法在文本文档中查找一些值并返回真实的用户名和密码。但是我在实现 AsyncTask 时遇到了一些问题。我试图按照[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)上的指南进行操作，但没有成功。

我在 doInBackground 方法的返回类型中遇到的错误是“返回类型与 AsyncTask.doInBackground(String[]) 不兼容”

```
 private class AuthenticateUser extends AsyncTask<String, Integer, Boolean>
    {
        String user;
        String pass;

        protected void onPreExecute(String uname, String passwd)
        {
            user = uname;
            pass = passwd;
        }

        protected boolean doInBackground(String... strings)
        {
            return true;
        }

        protected boolean onPostExecute(boolean v)
        {
            return v;
        }
    } 
```

我知道这根本不是验证用户的好方法。我只是想弄清楚这一点。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T11:28:09.020

这里的问题是 AsyncTask 扩展是通用的，需要三种类型：`AsyncTask<Params, Progress, Result>`可能是 Void 或类，但不是原始数据类型。

所以发生的事情是你告诉编译器 doInBackground 返回一个原始布尔值，但它期待一个布尔类的实例。因此您会收到“返回类型不兼容”错误。

只需更改`protected boolean doInBackground(String... strings)`为`protected Boolean doInBackground(String... strings)`，您应该会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:23:57.717

```
 new AuthenticateUser().execute(username, password); 
```

.

```
 private class AuthenticateUser extends AsyncTask<String, Void, Boolean>
    {
        String user;
        String pass;

        protected Boolean doInBackground(String... strings)
        {
            this.user = strings[0];
            this.pass = strings[1];

            //authen
            return true;
        }

        protected void onPostExecute(Boolean result)
        {
             //do stuff when successfully authenticated 
        }
    } 
```

# android - 来自 GridView 的带有 ImageView 的新活动

> ID：14920484
> 
> 赞同：0
> 
> 时间：2013-02-17T11:14:15.100
> 
> 标签：android

我正在尝试在新活动的 ImageView 中显示图像，但我遇到了问题。新活动已打开，我可以在 toast 消息中看到图像的路径，但仍然看不到图像！有什么问题？

MainActivity 类的一部分：

```
 gridview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView parent, View v, int position, long id) {

            String[] projection = {MediaStore.Images.Media.DATA};
            cursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null, null, null);
            int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToPosition(position);
            String imagePath = cursor.getString(columnIndex);

            // Sending image id to FullScreenActivity
            Intent i = new Intent(getApplicationContext(), FullImageActivity.class);

            i.putExtra("image", imagePath);

            //Toast.makeText(MainActivity.this, "" + imagePath, Toast.LENGTH_SHORT).show();

            startActivity(i);
        }
    }); 
```

全活动类：

```
public class FullImageActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_image);

    // get intent data
    Intent i = getIntent();

    // Selected image id
    //int id = i.getExtras().getInt("image");
    //ImageAdapter imageAdapter = new ImageAdapter(this);
    String imageId = i.getExtras().getString("image");

    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
    imageView.setImageURI(Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, "" + imageId));
    //imageView.setImageResource(imageAdapter.mThumbIds[position]);

    Toast.makeText(FullImageActivity.this, "" + imageId, Toast.LENGTH_LONG).show();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:25:54.887

试试这个。

***FullActivity.java***

```
Bitmap bitmap =BitmapFactory.decodeFile(imageId);
imageView.setImageBitmap(bitmap); 
```

请让我知道这对你有没有用..

快乐编码:)

# jquery - Firefox中未返回fineuploader json响应

> ID：14920486
> 
> 赞同：2
> 
> 时间：2013-02-17T11:14:42.337
> 
> 标签：jquery, json, file-upload, asp.net-web-api

我正在使用[Fineuploader](https://github.com/valums/file-uploader)将图像上传到 ASP.NET 4.5 Web API 控制器。控制器被击中并上传图像。我从 API 控制器收到 200 响应。我在成功上传后显示缩略图，并且 Amazon S3 中的位置的文件名应该在 JSON 响应中返回。当我在 Chrome 或 IE10 中尝试此操作时，它工作正常。当我在 Firefox 中尝试此操作时，`responseJson`返回的是一个空对象，显示为失败。我正在使用 jQuery 1.8.2 和 Fineuploader 3.2。因为未定义，我实际上会`undefined`显示在屏幕上。`responseJson.message`这是js代码：

```
(function ($) {
  $('#file-uploader').fineUploader({
    multiple: false,
    request: {
      endpoint: '/api/post-logo',
      forceMultipart: false
    },
    // other setup options removed for brevity
  }).on('complete', function (event, id, fileName, responseJson) {
    if (responseJson.success) {
      // for now, to illustrate the issue
      alert(responseJson.savefilename);
    } else {
      $('#file-uploader').after("<span class='field-validation-error'>" + responseJson.message + "</span>");
    }
  });
})(jQuery); 
```

返回的响应是`application/json`。我需要做什么才能在 Firefox 中正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T11:35:20.943

FF 和 Chrome 的区别在于`Accept`发送的请求标头。只需使用 FireBug 和 Chrome 开发人员工具栏来比较 2 个浏览器之间的结果：

法郎：

```
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

铬合金：

```
Accept: */* 
```

因此，您可以看到 FF 没有发送正确的`Accept`标头，并且 Web API 的内容协商机制只是退回到`text/xml`（因为这是客户端请求的）。

幸运的是，该插件允许您使用该`customHeader`属性覆盖请求标头并将其强制为预期的类型（`application/json`在您的情况下）：

```
request: {
    endpoint: '/api/post-logo',
    forceMultipart: false,
    customHeaders: { Accept: 'application/json' }
}, 
```

# ruby-on-rails - 如何根据用户的当地时间显示不同的时间？

> ID：14920491
> 
> 赞同：1
> 
> 时间：2013-02-17T11:15:44.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization

我确实有这样的设置

**配置/应用程序.rb**

```
config.time_zone = 'London'
config.active_record.default_timezone = :utc 
```

所有时间都将保存为伦敦当地时间。
但是，我的应用程序将在世界各地使用，因此我想显示他们的当地时间。

我怎样才能使它成为可能？

PS 我看过这个，但它似乎只有当用户是 Rails 应用程序的成员时才有效。
除非看到的人注册并设置他的当地时间，否则它不会知道他们的当地时间。

没有任何技术可以获取访问者PC的时区并用它计算UTC时间吗？

[http://railscasts.com/episodes/106-time-zones-revised?autoplay=true](http://railscasts.com/episodes/106-time-zones-revised?autoplay=true)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T02:25:06.230

您可以使用 javascript 根据用户的本地时区转换时间。这是我所做的：

在 ApplicationHelper.rb 中，添加一个生成将在客户端浏览器上调用 javascript 的 html 的方法：

```
def localize(time)
    "<script type='text/javascript'>localize(#{time.tv_sec * 1000});</script>".html_safe
end 
```

添加将处理时间并显示其字符串格式的 javascript 函数（使用浏览器的时区）

```
function localize(millisec)
{
  var d = new Date(millisec);
  document.write(d.toString());
} 
```

然后在你的视图中，当你需要显示时间时，调用辅助方法：

```
<span><%= localize(@my_record.time) %></span> 
```

# android - 用于嵌套 json 的 POJO

> ID：14920495
> 
> 赞同：2
> 
> 时间：2013-02-17T11:15:58.287
> 
> 标签：android, json, gson

我是 JSON 新手，在为跟随的 JSON 输入创建 POJO 时遇到问题。

```
 [
    {
"score":1,
"popularity":3,
"name":"Brad Pitt",
"id":287,
"biography":"test",
"url":"http://www.themoviedb.org/person/287",
"profile":[
    {
        "image":{
            "type":"profile",
            "size":"thumb",
            "height":68,
            "width":45,
            "url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w45/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg",
            "id":"4ea5cb8c2c0588394800006f"
        }
    },
    {
        "image":{
            "type":"profile",
            "size":"profile",
            "height":281,
            "width":185,
            "url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w185/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg",
            "id":"4ea5cb8c2c0588394800006f"
        }
    },
    {
        "image":{
            "type":"profile",
            "size":"h632",
            "height":632,
            "width":416,
            "url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/h632/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg",
            "id":"4ea5cb8c2c0588394800006f"
        }
    },
    {
        "image":{
            "type":"profile",
            "size":"original",
            "height":1969,
            "width":1295,
            "url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/original/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg",
            "id":"4ea5cb8c2c0588394800006f"
        }
    }
],
"version":685,
"last_modified_at":"2013-02-16 07:11:15 UTC"
  }
  ] 
```

我已经创建了三个 POJO，其中一个是主要人员类，这个也包含配置文件对象。配置文件对象返回图像列表。:

```
 public class Person implements Serializable {

  private static final long serialVersionUID = 6794898677027141412L;

  public String biography;
  public String id;
  public String last_modified_at;
  public String name;
  public String popularity;
  public String score;
  public String url;
  public String version;
  public ArrayList<Profile> profile;

  //getters and setters
    }

    public class Profile implements Serializable {

  private static final long serialVersionUID = -6482559829789740926L;

  public ArrayList<Image> image;

    }

    public class Image implements Serializable {

    private static final long serialVersionUID = -2428562977284114465L;

    public String type;
    public String url;
    public String size;
    public int width;
    public int height;
    } 
```

检索我正在使用 gson 的数据：

```
 Gson gson = new Gson();
  Type collectionType = new TypeToken<List<Person>>(){}.getType();
  List<Person> details = gson.fromJson(json, collectionType); 
```

当我运行它时，我得到了：

```
 02-17 11:04:50.531: E/AndroidRuntime(405): Caused by:  com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 3 
```

更新的图像 POJO：

```
public class Image implements Serializable {

private static final long serialVersionUID = -2428562977284114465L;
private Object image;

public class ImageInner {

    public static final String SIZE_ORIGINAL = "original";
    public static final String SIZE_MID = "mid";
    public static final String SIZE_COVER = "cover";
    public static final String SIZE_THUMB = "thumb";
    public static final String TYPE_PROFILE = "profile";
    public static final String TYPE_POSTER = "poster";
    public String type;
    public String url;
    public String size;
    public int width;
    public int height;

}
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:00:52.323

您的代码实际上*非常*接近，但有两个错误：

1) 您收到的错误告诉您，在 JSON 的最开始，它期望一个数组 ( `[`) 的开头，但是却得到了一个对象 ( `{`) 的开头。您发布的 JSON*不是*您提供给 Gson 的内容（见下文）。

2）当您更正上述内容时，您的`Person`POJO 中有一个小问题：

```
public ArrayList<Profile> profile; 
```

应该：

```
public ArrayList<Image> profile; 
```

您实际上不需要您的`Profile`课程；`profile`JSON*中是*一个数组。按原样，您将收到另一个类似于您现在收到的错误，因为它需要一个 ArrayList`Profile`对象：`"profile":[{"image":[{imageobject},...]},{"image":[{imageobject},...]}]`

如果您修复第二个问题并为 Gson 提供您发布的 JSON，它会完美运行。您已经发布了一组`Person`对象，但您在代码中实际拥有的 (in `json`) 要么只是一个对象……要么是一个包含您发布的数组的对象。下面的小例子完美地工作（在更正你的`Person`课程之后）：

```
public class App
{
        static String json = "[{\"score\":1,\"popularity\":3,\"name\":\"Brad Pitt\",\"id\":287," +
        "\"biography\":\"test\",\"url\":\"http://www.themoviedb.org/person/287\",\"profile\":" +
        "[{\"image\":{\"type\":\"profile\",\"size\":\"thumb\",\"height\":68,\"width\":45,\"url\":" +
        "\"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w45/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg\"," +
        "\"id\":\"4ea5cb8c2c0588394800006f\"}},{\"image\":{\"type\":\"profile\",\"size\":\"profile\"," +
        "\"height\":281,\"width\":185,\"url\":\"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w185/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg\"," +
        "\"id\":\"4ea5cb8c2c0588394800006f\"}},{\"image\":{\"type\":\"profile\",\"size\":\"h632\",\"height\":632,\"width\":416,"+
        "\"url\":\"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/h632/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg\"," +
        "\"id\":\"4ea5cb8c2c0588394800006f\"}},{\"image\":{\"type\":\"profile\",\"size\":\"original\",\"height\":1969," +
        "\"width\":1295,\"url\":\"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/original/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg\"," +
        "\"id\":\"4ea5cb8c2c0588394800006f\"}}],\"version\":685,\"last_modified_at\":\"2013-02-16 07:11:15 UTC\"" +
        "}]";

    public static void main(String[] args)
    {

        Gson gson = new Gson();
        Type collectionType = new TypeToken<List<Person>>(){}.getType();
        List<Person> details = gson.fromJson(json, collectionType);
    }
} 
```

**编辑添加：**您实际上正在进行一些 Gson 正在为您处理的类型转换......但您可能并不真正想要。例如，在您的 JSON`score`中是一个，`int`但在您的 POJO 中，您已将其设为`String`. Gson 默默地进行转换。

此外，像我上面所做的那样简单地创建一个 SSCCE ( [http://sscce.org/ ) 可以帮助您调试这些问题。](http://sscce.org/)

# jquery - 获取 jquery select2 插件以处理附加表单

> ID：14920497
> 
> 赞同：0
> 
> 时间：2013-02-17T11:16:12.747
> 
> 标签：jquery, jquery-select2

我正在使用带有 ajax 调用的 select2 插件来获取使用隐藏字段的选择框。在我的页面上，我有一个添加按钮，可将另一个选择框添加到页面中。我试图让 select2 插件在这个插入的字段上工作。我也尝试过“开”的方法..

```
$('.selectcateg').on('load',function(){
   $('.selectcateg).select2({
   minimumInputLength: 2,
   ajax: {
      url: "../../../datafeeds/categorylist.php",
      dataType: 'json',
      data: function (term, page) {
      return {
          q: term
      };
   },
     results: function (data, page) {
        return { results: data };
     }
   }
});
}); 
```

但是这样即使在最初加载的字段上也会停止工作。如果我删除“打开”功能，它不适用于添加的内容。

这是我用来附加到我的表单的基本代码..

```
$('#catgeoryform').append('<input type="hidden" name="category[]" class="selectcateg">'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:11:05.353

所以我认为经过不同的尝试 5 小时后，我已经让它工作了。

我不得不对事件使用回调来触发选择插件。我相信有一种更简单的方法可以解决这个问题，但它可以工作，所以我很高兴。

我向上滑动添加按钮，附加信息，向下滑动新输入框，然后调用函数..

并将 select2 框添加到隐藏的输入中。

# xcode - UIWebView 从 iOS6 中的 UITableView 传递时不加载内容，但在 iOS5 中完美运行

> ID：14920499
> 
> 赞同：1
> 
> 时间：2013-02-17T11:16:34.340
> 
> 标签：xcode, uitableview, ios5, ios6, uiwebview

首先，我要感谢您阅读本文并在您知道答案的情况下帮助我，我对 iOS 有点陌生，有一个问题让我发疯。

我有一个在 iOS5 中完美运行的应用程序，它有一个 UITableVIewController，单击一行会将您带到带有 UIWebView 的 UIView。这个想法是，要加载的网页的 URL 是通过这种方式从 UITableViewController 传递的。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{  
    if (([[segue identifier] isEqualToString:@"ViewWeb"])) {

      WebViewController *detailViewController = [segue destinationViewController];
      detailViewController.title=parameter;

       detailViewController.detailItem = parameterURL;
     }
} 
```

然后在 WebViewController 我使用以下代码。我在 .h 中声明所有内容：

```
#import <UIKit/UIKit.h>

@interface WebViewController : UIViewController <UIWebViewDelegate>{
   IBOutlet UIWebView *webView;
   NSString *detailItem;
}

@property(strong,nonatomic) IBOutlet UIWebView *webView;
@property (strong, nonatomic) NSString *detailItem;

@end 
```

在我的 .m 中，我使用以下代码加载 URL：

```
@interface WebViewController ()

@end

@implementation WebViewController

@synthesize webView;
@synthesize detailItem;

- (void)viewDidLoad
{
[super viewDidLoad];

//Create a URL object.
NSURL *url = [NSURL URLWithString:detailItem];

//URL Requst Object
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[webView loadRequest:requestObj];

} 
```

这在 iOS5 模拟器中运行良好，但在 iOS6 中，UIWebWiew 保持空白且无法加载。我已阅读此解决方案[UIWebView not loading URL when URL is passed from UITableView](https://stackoverflow.com/questions/2465370/uiwebview-not-loading-url-when-url-is-passed-from-uitableview)但将代码放在 (void)viewWillAppear:(BOOL)animated 中并不能解决问题。如果我对 URL 进行硬编码，它工作得非常好，所以我完全不知道如何解决这个问题。

提前非常感谢你，我知道这里的每个人都很忙，而且伟大的人会花几分钟时间来帮助我，这真是太棒了。

# ruby-on-rails - 在 Rails 中寻找传递给方法的选项

> ID：14920500
> 
> 赞同：1
> 
> 时间：2013-02-17T11:16:42.413
> 
> 标签：ruby-on-rails, ruby

您应该如何找到可以传递给 Rails 方法的不同选项？例如，我想知道我可以传递给`validates`. 我在文档中找不到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:48:37.067

如您所知，不可能在签名中记录哈希选项，因此您必须依赖文档的质量或阅读源代码。

在这种情况下，[文档](http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates)显示了一些几乎涵盖所有默认验证器的示例。请注意，它不能记录所有可用的，因为它们可以动态扩展。

```
>> ActiveModel::EachValidator.descendants
=> [Paperclip::Validators::AttachmentSizeValidator, ActiveModel::Validations::WithValidator, ActiveModel::Validations::ExclusionValidator, ActiveRecord::Validations::AssociatedValidator, ActiveModel::Validations::ConfirmationValidator, ActiveModel::Validations::PresenceValidator, ActiveModel::Validations::FormatValidator, Paperclip::Validators::AttachmentContentTypeValidator, Paperclip::Validators::AttachmentPresenceValidator, ActiveRecord::Validations::UniquenessValidator, ActiveModel::BlockValidator, ActiveModel::Validations::NumericalityValidator, ActiveModel::Validations::AcceptanceValidator, ActiveModel::Validations::InclusionValidator, ActiveModel::Validations::LengthValidator] 
```

或者：

```
ActiveModel::EachValidator.descendants.map { |klass| klass.name.split("::").last.sub(/Validator$/, '').underscore }
 => ["attachment_size", "with", "exclusion", "associated", "confirmation", "presence", "format", "attachment_content_type", "attachment_presence", "uniqueness", "block", "numericality", "acceptance", "inclusion", "length"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:42:08.973

api dock 很有用，它还显示了源代码[http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T12:54:34.047

起点始终是官方 Rails 文档。例如，这里是该[`validates`](http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates)方法的文档。

但是，请记住，Rails 是一个不断发展的框架。不幸的是，这意味着并非所有方法都有完整的文档记录，有时您需要直接深入研究源代码以了解方法的工作原理。

# c++ - 应该使用哪种数据结构 multimap、boost::bimap、multiset 或任何其他

> ID：14920502
> 
> 赞同：2
> 
> 时间：2013-02-17T11:17:22.343
> 
> 标签：c++, boost, stl, bimap

在我的程序中有一些用户和他们的客户。我有用户及其关联客户的列表。

例子

```
U1 -> c1, c2, c3, c5, c8, c10, c12
U2 -> c3, c5, c13, c8, c12, c14
U3 -> C2, C5, c8, c11, c12, c14
..
...
....
.....
and many more. 
```

一些客户端在用户列表中很常见。

我想对用户进行反向层次结构的客户端。如果任何客户端有任何更新，那么它只会发送给与客户端关联的那些用户。

请建议我应该使用哪种数据结构 map、multimap、boost::bimap、multiset

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:27:53.253

也许这是 Boost.Bimap 的一个用例，其中两个键都是多集，bimap 中的条目表示用户和客户端之间的单个连接。所以对于以下设置

```
U1 -> C1 C2 C3
U2 -> C4 C1
U3 -> C5 C1 
```

您将有条目`(U1, C1)`, `(U1, C2)`, `(U1, C3)`, `(U2, C4)`, `(U2, C1)`,`(U3, C5)`和`(U3, C1)`.

您可以按顺序遍历这两个键，即`U1, U1, U1, U2, U3`在左侧和`C1, C1, C1, C2, C3, C4, C5`右侧。（注意双方如何包含重复的条目！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:26:19.553

正如 Ivaylo Strandjev 所说，您需要 bi* *multi* *map，实际上有一个。你需要的是

```
boost::bimap<multiset_of<User>, multiset_of<Client>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:21:55.563

实际上，您在这里需要的是一个双多图，我相信在 boost 中没有实现这样的东西。我的建议是你有一个`map<int, vector<int> > user_clients`（这里当然 map 也可能是`unordered_map`）和另一个 map: `map<int, vector<int> > client_users`。您必须使它们保持同步。可能为您创建一个包装类是最好的选择。

# vb.net - Visual Basic 2010 - 创建一个类，用户可以在其中输入变量，然后将其保存以供以后在表中引用

> ID：14920505
> 
> 赞同：0
> 
> 时间：2013-02-17T11:18:05.207
> 
> 标签：vb.net, visual-studio-2010, class

对我来说不幸的是，我在 Visual Basic 2010 上带来的这本书没有涵盖这一点，我在其他任何地方都找不到这个问题的解决方案。

作为我课程的一部分，我需要创建一个程序，并且在该程序中我需要使用 2 个类。

课程非常相似，所以如果我可以做一个，我可以做另一个。我有一个表格，里面有很多数据输入框，比如你在线填写信息时。您的姓名、地址等都在不同的框中，然后单击“保存”就完成了。

我想将输入的所有不同变量保存到一个类中，因为我将保存多个变量，我认为我需要一个数据库，然后每次输入新客户端时，客户端 ID 都需要增加一个， 0001、0002 等。然后我想查看并能够在单独的表单上对表中的条目进行排序。

任何人都可以提供一步一步的指南来做这样的事情。

如果您不能使用代码并尝试解释它，那将对我有很大帮助。我了解编码和东西，因此您无需解释 for 循环和迭代以及代码的含义。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:06:17.277

顺便说一句，您不要将变量保存到类中，而是构建您的类以执行这些功能。

所以也许你的课程结构可能是......

```
Class MyClass

  Private mFileName as string
  Private mVariables as Dictionary(of TKey, TValue)

  'filename property 
  Property Filename() as string

  'variables collection as key value/pairs
  Property Variables as Dictionary(of TKey, TValue)

  'property accessor for single key/value from collection like Variables(2)
  Property VariableX(Index as integer) as string

  'function to load saved data from xml file
  Function LoadMySavedXmlData(Filename) as Dictionary(of TKey, TValue)

  'subroutine to save variables data as xml file
  Sub SaveMyXmlData(Filename as string, Data as Dictionary(of TKey, TValue))

End Class 
```

然后你的xml文件可能结构如下

```
<?xml version="1.0"?>
<MySavedData>
  <Filename>Bobs_Prefs.Xml</Filename>
  <Data>
    <Variable1>
      <Key>Name</Key>
      <Value>Bob Johnson</Value>
    </Variable1>
    <Variable2>
      <Key>Telephone</Key>
      <Value>0123 456 7896</Value>
    </Variable2>
    <Variable3>
      <Key>Car</Key>
      <Value>Chrysler</Value>
    </Variable3>
  </Data>
</MySavedData> 
```

通过使用 XML 文件，不必局限于预定义的字段名称或字段类型，用户可以根据他/她的变量类型键入数字或字符串，例如颜色可以是字符串，如 'RED' 或 HEX像'FF0000'

这将比涉足 SQL 简单得多，并且通过在加载和保存时询问文件名，您可以保存/加载特定的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:26:26.277

你需要做什么：

1.  创建一个包含您想要保留的所有信息的成员的类。

2.  每当用户添加新信息时，创建一个上述对象，用输入的信息填充它并将这些对象保存在您的程序中（例如数组，列表等）这应该注意输入数据并终身维护它们应用程序的跨度。

3.  但是您还需要将其保存到数据库中。我会为此使用一个单独的对象，一个负责将数据保存在数据库中以解耦组件的对象。在这种情况下，新对象将具有一个方法，该方法将第 1 点提到的对象之一作为输入参数，并将信息保存到数据库中。此外，您可以使用一些编辑功能，它的作用几乎相同，但不是插入，而是执行编辑。同一个对象将有一个额外的方法，用于从数据库加载所有信息并填充列表 - 在第 2 点提到 - 您保留在应用程序中 如果需要，您还可以使用删除功能扩展此对象。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:26:53.170

您的类需要包含与您正在输入的字段相关的公共属性。

所以你会有一个名为 say 的类`Person`。

例如，在此类中，您将为要存储的每个项目添加公共属性；

*   姓名
*   地址
*   电话号码
*   等等等等

然后，您还将为要存储的每个项目添加变量到 class `Constructor`。构造函数是`New`Sub。这将允许您创建一个新的 Person 类，并传入变量；

```
Dim MyNewPerson As New Person(txtName.Text, txtaddress.Text, txtTelephoneno.Text, etc, etc) 
```

如果你有很多这样的对象，那么你应该使用类似 List 的东西，你可以使用类似的东西来创建它；

```
Dim MyPersonList As New List(Of Person) 
```

然后你可以简单地从上面添加你的 MyNewPerson 对象，比如：

```
MyPersonList.Add(MyNewPerson) 
```

关于将其添加到数据库中，这是一个更大的主题，在这里我建议首先查看实体框架代码，因为这是微软推荐的数据访问框架；

[http://msdn.microsoft.com/en-gb/data/ef.aspx](http://msdn.microsoft.com/en-gb/data/ef.aspx)

# coldfusion - ColdFusion cfoutput 查询组

> ID：14920506
> 
> 赞同：1
> 
> 时间：2013-02-17T11:18:08.640
> 
> 标签：coldfusion

请参考此页面： [http](http://allblacks.01dev.co.nz/templates/super14/textobjects/SRMatchDayList.cfm) ://allblacks.01dev.co.nz/templates/super14/textobjects/SRMatchDayList.cfm 查询转储包含在那里。我继承了这段代码，如果可能的话，我更愿意使用它。

以下代码按周输出固定装置。

```
<table cellspacing="0" cellpadding="0" border="0" align="center" width="530">
    <tr bgcolor="#797979">
        <th align="left"><p>&nbsp;<b>Date</b></p></td>
        <th align="left"><p><b>Game</b></p></td>
        <th align="left"><p><b>Venue</b></p></td>
        <th align="left"><p><b>Time (NZ)</b></p></td>
        <th align="center"><p><b>Result</b>&nbsp;</p></td>
    </tr>

    <cfset iWeekCounter = 0>
    <cfif not attributes.useSegmentTitle and attributes.sortDirection is "desc">
        <cfset qSegments = oSeries.getSegmentInfo(seriesID=attributes.seriesID)>
        <cfset iWeekCounter = qSegments.recordcount + 1>
    </cfif>

    <cfoutput query="qSeriesEvents" group="segmentID">
        <cfif attributes.sortDirection is "desc">
            <cfset iWeekCounter = iWeekCounter-1>
        <cfelse>
            <cfset iWeekCounter = iWeekCounter+1>
        </cfif>
        <tr>
            <td colspan="5"><p><br><strong>
                <cfif attributes.useSegmentTitle>
                    #qSeriesEvents.segment#
                <cfelse>
                    Week #iWeekCounter#
                </cfif>
            </strong></p></td>
        </tr>
        <cfoutput>
            <cfif textObjectCount gt 0>
                <tr>
                    <td><p>&nbsp;#DateFormat(eventDateTime, "dd mmm")#</p></td>
                    <td><p><a href="/index.cfm?layout=#attributes.eventLayout#&event=#eventID#">#event#</a></p></td>
                    <td><p>#location#</p></td>
                    <td><p><cfif showTimeField is 1>#lcase(timeFormat(dateadd('h',iTimeOffset,eventDateTime),"h:mm tt"))#</cfif></p></td>
                    <td align="center" valign="top"><p><cfif isDate(eventDateTime) AND dateDiff("n",eventDateTime, now())>#oEvent.getTeamResult(eventID, homeTeamID)#-#oEvent.getTeamResult(eventID, awayTeamID)#</cfif>&nbsp;</p></td>
                </tr>
                <tr><td colspan="5"><div style="height:1px; padding:0px; margin0px; font-size:0; border-bottom: 1px solid ##999"></div></td></tr>
            </cfif>
        </cfoutput>
    </cfoutput>
</table> 
```

但是，请注意上述 URL 中的第 3 - 18 周，它们没有任何数据。如果没有数据，我不想显示周线。如果可能，如何使用此查询输出“group =”设置来完成此操作？

来自网站的 SQL

```
SELECT tObj.textObjectCount, events.*, venues.venue, venues.location, DATENAME(wk, events.eventDateTime - 1) AS EventWeek, s.segment 
FROM events join segments s on s.segmentID = events.segmentID 
 LEFT OUTER JOIN (
  SELECT LUTextObjectEvent.eventID, COUNT(*) AS textObjectCount 
  FROM  LUTextObjectEvent 
   INNER JOIN textObjects ON LUTextObjectEvent.textObjectID = textObjects.textObjectID 
   GROUP BY LUTextObjectEvent.eventID
  ) tObj 
  ON events.eventID = tObj.eventID 
 LEFT OUTER JOIN venues ON events.venueID = venues.venueID 
WHERE (events.eventID IN (
 SELECT eventID 
 FROM events
 WHERE segmentID IN (
  SELECT segmentID 
  FROM segments 
  WHERE seriesID IN (?))
 )
) 
ORDER BY s.segmentID asc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:45:06.237

您正在使用 a `LEFT OUTER JOIN`，这意味着您将为每个事件/片段创建一个记录。将它们更改为内部连接，您应该会得到想要的结果

```
SELECT tObj.textObjectCount, events.*, venues.venue, venues.location, DATENAME(wk, events.eventDateTime - 1) AS EventWeek, s.segment 
FROM events join segments s on s.segmentID = events.segmentID 
 INNER JOIN (
  SELECT LUTextObjectEvent.eventID, COUNT(*) AS textObjectCount 
  FROM  LUTextObjectEvent 
   INNER JOIN textObjects ON LUTextObjectEvent.textObjectID = textObjects.textObjectID 
   GROUP BY LUTextObjectEvent.eventID
  ) tObj 
  ON events.eventID = tObj.eventID 
 INNER JOIN JOIN venues ON events.venueID = venues.venueID 
WHERE (events.eventID IN (
 SELECT eventID 
 FROM events
 WHERE segmentID IN (
  SELECT segmentID 
  FROM segments 
  WHERE seriesID IN (?)))) 
ORDER BY s.segmentID asc 
```

# eclipse - Netbeans：括号中的 TAB 行为

> ID：14920509
> 
> 赞同：2
> 
> 时间：2013-02-17T11:18:36.240
> 
> 标签：eclipse, netbeans, tabs, brackets

有什么方法可以让 Netbeans 在按下 Tab 时退出括号，就像 Eclipse 一样？

在 Eclipse 中，您可以在按 Tab 时光标移动到的位置看到一条绿线，它位于 if 条件、方法参数等之后。

不幸的是，我还没有找到一种方法来教 Netbeans 做同样的事情。

更具体地说：例如，在编写 if 语句时，您编写“if”，然后打开括号。Netbeans 和 Eclipse 都会自动添加右括号。所以现在你在括号内并且可以定义条件。现在，在 Eclipse 中，当光标在括号内时按 Tab 键会将光标移到括号后面。这就是我想用 Netbeans 完成的。

# java - 在java中使用字节

> ID：14920515
> 
> 赞同：0
> 
> 时间：2013-02-17T11:19:00.470
> 
> 标签：java, casting, type-conversion, byte

java中的代码是怎么写的

```
 for (int a=0; a < 256; a++) {
        sta[a] = (byte)a;
    System.out.println(a);
    } 
```

如果一个字节为 127，则在最大值时打印 0 到 255。

如何使用 "& oxff" 将 int 转换为无符号字节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T11:23:15.480

您正在将整数变量 a 转换为存储在数组中的字节变量。但是，您要打印的变量仍然是整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:25:33.577

字节的宽度是 8 位，而整数是 32 位。例如，您可以转换

```
int a = 23;
byte b = (byte)a; 
```

# android - 在 Canvas 上绘制 listView - setAdapter 导致 NullPointerException

> ID：14920517
> 
> 赞同：1
> 
> 时间：2013-02-17T11:19:11.757
> 
> 标签：android, android-listview, nullpointerexception

我一直在尝试在 Canvas 上绘制 ListView，当我尝试将适配器设置为该 listView 时，我得到了 NullPointerException。我检查了它，初始化后似乎 listView 为空，我不知道为什么。

这是代码：

```
public class Testing extends Activity {
    MySurface ms;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ms = new MySurface(this);
        setContentView(ms);

        String[] stuffArray = {"stuff1", "stuff2"};
        ListView listView = (ListView) findViewById(R.id.lvListView);   // after this listView is null
        ArrayAdapter<String> listViewAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, stuffArray);

        //listView.setAdapter(listViewAdapter);     // This line crashes program
    }

    @Override
    protected void onResume() {
        super.onResume();
        ms.resume();
    }

    @Override
    protected void onPause() {
        super.onPause();
        ms.pause();
    }

    public class MySurface extends SurfaceView implements Runnable {
        SurfaceHolder holder;
        Thread t = null;
        volatile boolean isRunning = false;

        public MySurface(Context context) {
            super(context);
            holder = getHolder();
        }

        public void pause(){
            isRunning = false;
            while(true) {
                try {
                    t.join();
                    break;
                } catch (InterruptedException e) { }
            }
        }

        public void resume(){
            isRunning = true;
            t = new Thread(this);
            t.start();
        }

        public void run() {
            LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View v = li.inflate(R.layout.testing, null);
            v.measure(MeasureSpec.getSize(v.getMeasuredWidth()), MeasureSpec.getSize(v.getMeasuredHeight()));
            v.layout(0, 0, 0, 0);

            while(isRunning){
                if(!holder.getSurface().isValid()) continue;

                Canvas canvas = holder.lockCanvas();
                canvas.translate(50, 50);
                v.draw(canvas);

                holder.unlockCanvasAndPost(canvas);
            }
        }
    }
} 
```

以及 testing.xml 布局的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="List of stuff:" />

    <ListView
        android:id="@+id/lvListView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

LogCat 窗口抛出：

```
02-17 12:14:56.359: E/AndroidRuntime(9226): FATAL EXCEPTION: main
02-17 12:14:56.359: E/AndroidRuntime(9226): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testing/com.example.testing.Testing}: java.lang.NullPointerException
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.os.Looper.loop(Looper.java:123)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.app.ActivityThread.main(ActivityThread.java:3687)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at java.lang.reflect.Method.invokeNative(Native Method)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at java.lang.reflect.Method.invoke(Method.java:507)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at dalvik.system.NativeStart.main(Native Method)
02-17 12:14:56.359: E/AndroidRuntime(9226): Caused by: java.lang.NullPointerException
02-17 12:14:56.359: E/AndroidRuntime(9226):     at com.example.testing.Testing.onCreate(Testing.java:30)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-17 12:14:56.359: E/AndroidRuntime(9226):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
02-17 12:14:56.359: E/AndroidRuntime(9226):     ... 11 more
02-17 12:14:56.369: E/(160): Dumpstate > /data/log/dumpstate_app_error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:50:28.347

好的，我明白了。看来android找不到R.id.lvListView（在testing.xml中定义），因为testing.xml没有设置为应用程序的视图，它只是在画布上绘制。这样 listView 保持为空，当我尝试为其设置适配器时，抛出了 NullPointerException。

我是这样做的：

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ms = new MySurface(this);

        RelativeLayout layout = new RelativeLayout(this);
        layout.addView(ms);

        LayoutInflater inflater = LayoutInflater.from(this);
        inflater.inflate(R.layout.testing, layout);
        setContentView(layout);
    } 
```

它工作顺利，我可以使用 findViewById() 方法获取布局组件。

无论如何感谢您的承诺！

# java - Android MediaPlayer 无法正常工作

> ID：14920519
> 
> 赞同：0
> 
> 时间：2013-02-17T11:19:30.047
> 
> 标签：java, android, audio, media-player

我写了一个应用程序，当我按下按钮时应该播放声音。但是声音大约每四次点击播放一次，而不是完整的长度。

```
@Override
public void onClick(View v) {
    if (v == bplus) {
        vib.vibrate(100);

        MediaPlayer mp = MediaPlayer.create(getBaseContext(), R.raw.beep);

        mp.start();

        mp.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                // TODO Auto-generated method stub
                mp.release();
            }

        });

        counter++;
    } 
```

当我在 mp.start() 之前使用 mp.prepare() 时，声音仍然不规则，我得到了这个：

```
 02-16 23:19:41.761: E/MediaPlayer(750): prepareAsync called in state 8
02-16 23:19:41.761: W/System.err(750): java.lang.IllegalStateException
02-16 23:19:41.771: W/System.err(750):  at android.media.MediaPlayer.prepare(Native Method)
02-16 23:19:41.781: W/System.err(750):  at de.christianschmitz.counter.Starter.onClick(Starter.java:100)
02-16 23:19:41.791: W/System.err(750):  at android.view.View.performClick(View.java:3480)
02-16 23:19:41.791: W/System.err(750):  at android.view.View$PerformClick.run(View.java:13983)
02-16 23:19:41.801: W/System.err(750):  at android.os.Handler.handleCallback(Handler.java:605)
02-16 23:19:41.801: W/System.err(750):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-16 23:19:41.811: W/System.err(750):  at android.os.Looper.loop(Looper.java:137)
02-16 23:19:41.811: W/System.err(750):  at android.app.ActivityThread.main(ActivityThread.java:4340)
02-16 23:19:41.821: W/System.err(750):  at java.lang.reflect.Method.invokeNative(Native Method)
02-16 23:19:41.831: W/System.err(750):  at java.lang.reflect.Method.invoke(Method.java:511)
02-16 23:19:41.831: W/System.err(750):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-16 23:19:41.841: W/System.err(750):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-16 23:19:41.851: W/System.err(750):  at dalvik.system.NativeStart.main(Native Method)
02-16 23:19:41.851: E/MediaPlayer(750): error (-19, 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:40:32.797

您必须了解有关`MediaPlayer`状态图的更多信息

![在此处输入图像描述](../Images/b566743f4bb13384c61562b10f5bdfc7.png)

[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

# java - 8 谜题：可解性和最短解

> ID：14920520
> 
> 赞同：8
> 
> 时间：2013-02-17T11:19:37.310
> 
> 标签：java, algorithm, artificial-intelligence, sliding-tile-puzzle

我使用广度优先搜索构建了一个 8 谜题求解器。我现在想修改代码以使用启发式方法。如果有人能回答以下两个问题，我将不胜感激：

**可解性**

我们如何决定一个 8 谜题是否可解？（给定一个起始状态和一个目标状态）这是维基百科所说的：

> 不变量是所有16个方格排列的奇偶性加上右下角空方格的出租车距离（行数加列数）的奇偶性。

不幸的是，我无法理解那是什么意思。理解起来有点复杂。有人可以用更简单的语言解释吗？

**最短的解决方案**

给定一个启发式，是否保证使用 A* 算法给出最短的解决方案？更具体地说，打开列表中的第一个节点是否总是有一个深度（或如此胖的移动次数），它是打开列表中所有节点的深度中的最小值？

启发式是否应该满足某些条件才能使上述陈述为真？

*编辑：*一个可接受的启发式方法如何总是提供最佳解决方案？**我们如何测试启发式是否可以接受**？

 **我将使用[此处列出的启发式方法](http://heuristicswiki.wikispaces.com/N+-+Puzzle)

```
Manhattan Distance 
Linear Conflict 
Pattern Database 
Misplaced Tiles
Nilsson's Sequence Score 
N-MaxSwap X-Y 
Tiles out of row and column 
```

* * *

来自 Eyal Schneider 的澄清：

![在此处输入图像描述](../Images/b250463db20a01733b36a8dec9a08d9b.png) ![在此处输入图像描述](../Images/a7fab76992f41d3a214909ca177b09f5.png) ![在此处输入图像描述](../Images/2b65a0c95e6cf4915c66e86a3ce894ff.png)

* * *

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T12:00:15.450

我将仅提及可解决性问题。需要一些排列背景。

排列是对有序集合的重新排序。例如，2134 是列表 1234 的重新排序，其中 1 和 2 交换位置。排列具有奇偶性；它是指反转次数的奇偶性。例如，在以下排列中，您可以看到恰好存在 3 个反转 (23,24,34)：

```
1234
1432 
```

这意味着排列具有奇校验。以下排列具有偶校验 (12, 34)：

```
1234
2143 
```

自然，身份排列（保持项目顺序）具有偶数奇偶性。

15个拼图（或8个拼图）中的任何状态都可以看作是最终状态的排列，如果我们将其视为行的串联，从第一行开始。请注意，每个合法移动都会改变排列的奇偶性（因为我们交换了两个元素，并且涉及它们之间的项目的反转数量必须是偶数）。因此，如果你知道空方格必须经过偶数步才能到达其最终状态，那么排列也一定是偶数。否则，您将以最终状态的奇怪排列结束，这必然与它不同。与空方格的奇数步数相同。

根据您提供的 Wikipedia 链接，上述标准对于解决给定的谜题是足够且必要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T11:32:33.930

如果您的启发式**总是低估**实际成本（在您的情况下，需要移动到解决方案的实际数量），则**A* 算法**可以**保证**找到*（如果有多个相等的短解决方案，则为一个）最短解决方案。*

 **但是在飞行中，我无法为您的问题想出一个好的启发式方法。这需要一些思考才能找到这样的启发式方法。

使用 A* 的真正艺术是找到一个总是低估实际成本但尽可能少的启发式算法以加快搜索速度。

* * *

这种启发式的第一个想法：

1.  在我脑海中突然出现的一个非常实用但有效的启发式方法是空场到最终目的地的曼哈顿距离。
2.  每个字段到其最终目的地的曼哈顿距离之和除以可以在一次移动中改变位置的最大字段数。（我认为这是一个很好的启发式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-02T17:12:07.077

对于任何出现的人，我将尝试解释 OP 如何获得值对以及他如何确定突出显示的值对，即反转，因为我花了几个小时才弄清楚。首先是对。首先取目标状态并将其想象为一维数组（例如 A）[1,2,3,8,0,4,7,5]。该数组中的每个值在表中都有自己的列（一直向下，这是该对的第一个值。）然后在数组中向右移动 1 个值（i + 1）并一直移动再次下降，第二对值。例如（状态 A）：第一列，第二个值将从 [2,3,8,0,4,7,5] 开始下降。第二列，将开始 [3,8,0,4,7,5] 等。

现在好了。对于 2 对值中的每一个，在开始状态中找到它们的**INDEX位置。**如果左**INDEX** > 右**INDEX**那么它是一个反转（突出显示）。前四对状态 A 是：(1,2),(1,3),(1,8),(1,0)
1 在索引 3
2 在索引 0
3 > 0 所以反转。

1 是 3
3 是 2
3 > 2 所以反转

1 是 3
8 是 1
3 > 2 所以反转

1 是 3
0 是 7
3 < 7 所以**没有反转**

对每一对执行此操作并计算总反转。如果都是偶数或都是奇数（曼哈顿距离的空白点和总反转），那么它是可以解决的。希望这可以帮助！****

# c++ - CUDA 内核调用中的隐式构造函数

> ID：14920526
> 
> 赞同：2
> 
> 时间：2013-02-17T11:21:35.790
> 
> 标签：c++, cuda

我正在尝试将一些 POD 传递给一个内核，该内核具有一些非 POD 作为参数，并且具有非显式构造函数。其背后的想法是：在主机上分配一些内存，将内存传递给内核，并将内存封装在对象中，而无需用户显式执行该步骤。

构造函数被标记为 __device__ 代码，但是在传递参数时没有调用它们，我不知道为什么。

我的问题与我应该如何做这件事并没有真正的关系，而是试图了解幕后发生的事情。

这是一个示例（我使用的是具有 2.1 能力的 GPU 的 CUDA 5，因此是 printf）。

```
#include <stdio.h>

struct Test {
    __device__ Test() {
        printf("Default\n"),
        _n = 0;
    }
    __device__ Test(int n) {
        printf("Construct %d\n", n);
        _n = n;
    }
    __device__ Test(const Test &t) {
        printf("Copy constr %d\n", t._n);
        _n = t._n;
    }
    __device__ Test &operator=(const Test &t) {
        printf("Assignment %d\n", t._n);
        _n = t._n;
        return *this;
    }
    __device__ int calc() const {
        printf("Calculating %d\n", threadIdx.x + 10 * _n);
        return threadIdx.x + 10 * _n;
    }
    int _n;
};

__global__ void dosome(Test a, Test b) {
    printf("Kernel data %d %d\n", a._n, b._n);
    a.calc();
    b.calc();
}

int main(int argc, char **argv) {
    dosome<<<1, 2>>>(2, 3);
    cudaError_t cudaerr = cudaDeviceSynchronize();
    if (cudaerr != cudaSuccess)
        printf("kernel launch failed with error:\n\t%s\n",cudaGetErrorString(cudaerr));
    return 0;
} 
```

编辑：忘了说，没有构造函数消息被打印，但 calc 和内核消息是。

EDIT2：是否保证 CUDA在将它复制到设备上*之前会初始化一个 Test 对象？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T13:45:13.583

您必须像普通方法一样查看构造函数。如果你用 来限定它`__host__`，那么你就可以称它为主机端。如果你用 来限定它`__device__`，你就可以称之为设备端。如果你同时满足它，你就可以在两边都调用它。

当您这样做时，会发生`dosome<<<1, 2>>>(2, 3);`两个对象是隐式构造的（因为您的构造函数不是`explicit`，所以也许这也让您感到困惑）主机端，然后`memcpy`'d 到设备。该过程不涉及复制构造函数。

让我们来说明一下：

```
 __global__ void dosome(Test a, Test b) {
        a.calc();
        b.calc();
    }

    int main(int argc, char **argv) {
        dosome<<<1, 2>>>(2, 3); // Constructors must be at least __host__
        return 0;
    }

// Outputs:
Construct 2 (from the host side)
Construct 3 (from the host side) 
```

现在，如果您将内核更改为`int`s 而不是`Test`：

```
__global__ void dosome(int arga, int argb) {
    // Constructors must be at least __device__
    Test a(arga);
    Test b(argb);
    a.calc();
    b.calc();
}

int main(int argc, char **argv) {
    dosome<<<1, 2>>>(2, 3);
    return 0;
}

// Outputs:
Construct 2 (from the device side)
Construct 3 (from the device side) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T12:28:44.103

好的，如果我将 __host__ 和 __device__ 限定符添加到构造函数中，我发现它可以工作（调用构造函数）。对象的构造函数发生在主机端，然后它们被复制到设备（堆栈？）。这就是为什么没有调用构造函数的原因：它们是设备代码（但是在主机端调用了什么？！？）

在构造函数中同时使用 __host__ 和 __device__ 可以毫无问题地使用该类。

编辑：不过，我不确定构造是否总是在复制到设备之前发生。

# xslt - 基于 XML 的过滤和排序表

> ID：14920531
> 
> 赞同：0
> 
> 时间：2013-02-17T11:22:58.050
> 
> 标签：xslt, xslt-1.0

我是 xslt 的新手，已经做了一些研究，读了一本简短的书，看了很多例子，但恐怕我就是不明白。我以前只做过简单的程序编码，我想我错过了一些东西。我了解一个非常基本的示例，但是当我尝试转换自己的数据时，我完全迷失了。呜呜呜。知道我不这样做真是令人沮丧！我真的觉得自己像个黑客:(

无论如何，我从 MS Word 中的表中生成了以下 XML。给出了每个单元格的表 ID 以及行和列 ID，因此可以了解事物之间的关系。

现在我想在选择列表中显示数据，并且基本上想要： 1\. 过滤数据，例如 [Name='p_fld_parent_ref' 和 Value='RM12']。具有匹配“行”的数据（即具有匹配 RowID 的所有节点）是我想要的。2\. 我还想对名称为 [p_fld_date_received] 的列（单元格）上的过滤数据进行排序。我专门包含了一个@dateSerial 属性，以使排序更容易。

在示例数据中，我应该得到任何“行”的数据，其父引用为“RM12”，按接收日期排序。我想使用 [p_fld_quantity_available] 单元格中的数据。

我在这上面浪费了大约 3 天时间，却一无所获。通常你开始有所收获，但使用 xslt 我一无所获。奇怪的。

这是我的数据的一个“行”（抱歉，我粘贴了 XML，但不知道如何格式化以供阅读 - 有人可以让我知道如何以正确的格式显示它吗？谢谢。）：

```
<Root><Data><Element><Name>p_fld_ref</Name><Key>SKU1</Key><KeyType>P</KeyType><ID>1</ID><Value>SKU1</Value><Description>Ref</Description><Required>True</Required><dataType>SKUn</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>1</ColumnID></Element><Element><Name>p_fld_parent_ref</Name><Key>SKU1</Key><KeyType>F</KeyType><ID>2</ID><Value>RM12</Value><Description>Parent Ref</Description><Required>True</Required><dataType>CPLn,RMn</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>2</ColumnID></Element><Element><Name>p_fld_item_no</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>3</ID><Value>ZRMH06</Value><Description>Item Code</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>3</ColumnID></Element><Element><Name>p_fld_type</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>4</ID><Value>RM</Value><Description>Type</Description><Required>True</Required><dataType>CA or RM</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>4</ColumnID></Element><Element><Name>p_fld_serial_no</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>5</ID><Value>120201</Value><Description>Serial No.</Description><Required>True</Required><dataType>Number</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>5</ColumnID></Element><Element><Name>p_fld_name_1</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>6</ID><Value>Product Name 1</Value><Description>Name 1</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>6</ColumnID></Element><Element><Name>p_fld_name_2</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>7</ID><Value>Product Name 1 Lang 2</Value><Description>Name 2</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>7</ColumnID></Element><Element><Name>p_fld_location</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>8</ID><Value/><Description>Location</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>8</ColumnID></Element><Element><Name>p_fld_receipt_no</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>9</ID><Value/><Description>Receipt No.</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>9</ColumnID></Element><Element><Name>p_fld_supplier</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>10</ID><Value/><Description>Supplier</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>10</ColumnID></Element><Element><Name>p_fld_supplier_ref</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>11</ID><Value/><Description>Supplier Ref</Description><Required>True</Required><dataType>Sn</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>11</ColumnID></Element><Element><Name>p_fld_supplier_batchno</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>12</ID><Value/><Description>Supplier Batch No.</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>12</ColumnID></Element><Element><Name>p_fld_supplier_coa</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>13</ID><Value/><Description>CoA Number</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>13</ColumnID></Element><Element><Name>p_fld_box_sample</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>14</ID><Value/><Description>Box to sample</Description><Required>True</Required><dataType>Text</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>14</ColumnID></Element><Element><Name>p_fld_number_boxes</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>15</ID><Value/><Description>Number of Containers</Description><Required>True</Required><dataType>Number</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>15</ColumnID></Element><Element><Name>p_fld_quantity_total</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>16</ID><Value/><Description>Total Quantity</Description><Required>True</Required><dataType>Number</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>16</ColumnID></Element><Element><Name>p_fld_date_received</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>17</ID><Value dateSerial="20130217000000">17-Feb-2013</Value><Description>Date Received</Description><Required>True</Required><dataType>Date</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>17</ColumnID></Element><Element><Name>p_fld_date_retest</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>18</ID><Value dateSerial="20140217000000">17-Feb-2014</Value><Description>Re-Test Date</Description><Required>True</Required><dataType>Date</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>18</ColumnID></Element><Element><Name>p_fld_date_expire</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>19</ID><Value dateSerial="20160217000000">17-Feb-2016</Value><Description>Expiry Date</Description><Required>True</Required><dataType>Date</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>19</ColumnID></Element><Element><Name>p_fld_date_released</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>20</ID><Value dateSerial="20130217000000">17-Feb-2013</Value><Description>Release Date</Description><Required>True</Required><dataType>Date</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>20</ColumnID></Element><Element><Name>p_fld_quantity_reserved</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>21</ID><Value>20000</Value><Description>Reserved Quantity</Description><Required>True</Required><dataType>Number</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>21</ColumnID></Element><Element><Name>p_fld_quantity_used</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>22</ID><Value>0</Value><Description>Used Quantity</Description><Required>True</Required><dataType>Number</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>22</ColumnID></Element><Element><Name>p_fld_quantity_available</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>23</ID><Value>20000</Value><Description>Available Quantity</Description><Required>True</Required><dataType>Number</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>23</ColumnID></Element><Element><Name>p_fld_status</Name><Key>SKU1</Key><KeyType>D</KeyType><ID>24</ID><Value/><Description>Status</Description><Required>True</Required><dataType>Q, R or X</dataType><parmType>1</parmType><TableID>6</TableID><RowID>3</RowID><ColumnID>24</ColumnID></Element></Root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:20:37.197

假设每一行都由一个`<Data>`元素表示（顺便说一下，您`<Data>`在此示例中缺少元素的结束标记），这应该执行过滤/排序部分：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="Root">
    <Root>
      <xsl:apply-templates
          select="Data[Element[Name='p_fld_parent_ref']/Value='RM12']">
        <xsl:sort select="Element[Name='p_fld_date_received]/Value/@dateSerial" />
      </xsl:apply-templates>
    </Root>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

您需要定义一个模板来定义您希望如何呈现元素，并且可能不是像我在上面所做`<Data>`的那样简单地重新创建元素。`Root`如果您只想输出文本，那么简单的事情可能会奏效：

```
<xsl:template match="Data">
  <xsl:text>Item no.:</xsl:text>
  <xsl:value-of select="Element[Name='p_fld_item_no']/Value" />
  <xsl:text> Quantity available:</xsl:text>
  <xsl:value-of select="Element[Name='p_fld_quantity_available']/Value" />
  <xsl:text>&#10;</xsl:text><!-- New line -->
</xsl:template> 
```

这不是一个完整的解决方案，但希望它能为您提供足够的指导来找出其余的。

# android - 如何在android中向scrollview添加多个按钮

> ID：14920535
> 
> 赞同：3
> 
> 时间：2013-02-17T11:23:15.097
> 
> 标签：android, button, scrollview

我想实现这个功能：动态添加多个按钮到scrollview，如果scrollview超过一定高度，就会自动显示滚动条。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T11:35:31.757

检查以下代码片段：

```
// Find the ScrollView 
ScrollView scrollView = (ScrollView) findViewById(R.id.scrollView1);

// Create a LinearLayout element
LinearLayout linearLayout = new LinearLayout(this);
linearLayout.setOrientation(LinearLayout.VERTICAL);

// Add Buttons
Button button = new Button(this);
button.setText("Some text");
linearLayout.addView(button);

// Add the LinearLayout element to the ScrollView
scrollView.addView(linearLayout); 
```

引自[How do I add elements dynamic to a view created with XML](https://stackoverflow.com/q/6369062/488434)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T11:35:13.133

例如在滚动视图中放置一个**线性****布局**，然后**将按钮添加到线性布局**。问题解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-16T15:31:11.123

这是 Xamarin C# 的示例。

```
<ContentPage.Content>
    <ScrollView x:Name="ScrollLogonID"                     
        BackgroundColor="Transparent"
        HorizontalOptions="FillAndExpand" Opacity="0.85">
        <StackLayout Opacity="0.85">
            <StackLayout 
                x:Name="LogoID" 
                BackgroundColor="Transparent"
                VerticalOptions="Start" 
                Opacity="0.65"
                HorizontalOptions="FillAndExpand">
                    <!--- place the button here -->
            </StackLayout> 
        </StackLayout> 
    </ScrollView>
</ContentPage.Content>
<!--
/*
C# Code snippet
*/-->
    Xamarin.Forms.Button btnEnter = new Xamarin.Forms.Button {
        Text = "Entrar",
        HorizontalOptions = LayoutOptions.FillAndExpand,                
        FontSize = 18,
        HeightRequest = 26,
        TextColor = Color.LightGray,
        BackgroundColor = Color.DarkRed
    };

    StackLayout stkButton = new StackLayout{ Children = { btnEnter }};
    this.FindByName<StackLayout>("LogonID").Children.Add(stkButton); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T11:35:10.480

由于滚动视图只能托管一个直接子级。您可以添加 a并`linearLayout`以`ScrollView`编程方式向其中添加按钮`LinearLayout`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-19T10:57:17.423

这是我在布局文件中的示例：

```
 <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/scrollView" >

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

                <Button
                    android:layout_width="fill_parent"
                    android:layout_height="120dp"
                    android:id="@+id/button4" />

                <Button
                    android:layout_width="fill_parent"
                    android:layout_height="120dp"
                    android:id="@+id/button" />

                <Button
                    android:layout_width="fill_parent"
                    android:layout_height="120dp"
                    android:id="@+id/button9" />

                <Button
                    android:layout_width="fill_parent"
                    android:layout_height="120dp"
                    android:id="@+id/button10" />
            </LinearLayout>
   </ScrollView> 
```

# ios - 有没有办法将 PFFile（图像）传递给另一个控制器并在不查询新控制器中的数据库的情况下显示它？

> ID：14920536
> 
> 赞同：2
> 
> 时间：2013-02-17T11:23:16.077
> 
> 标签：ios, parsing, uiviewcontroller, uitableview, pushviewcontroller

这是我在 Parse 论坛上提出的一个问题，过去 3 天我没有收到他们的任何回复。因此我在这里发帖。

你好，

我有一个 PFQueryTableViewController 并且表格有带有图像和不同标签的自定义单元格。此表在选择行时导航到另一个 DetailViewController。DetailViewController 需要在其视图中显示图像，我们从查询中获取到 PFQueryTableViewController 中的 Parse 数据库。我如何做到这一点？

**表视图控制器.M**

```
@interface TableViewController ()

@end

NSMutableArray* detailObjects;
DetObj* clickedObj;

@implementation TableViewController

- (void)objectsDidLoad:(NSError *)error {
    [super objectsDidLoad:error];

    // This method is called every time objects are loaded from Parse via the PFQuery

    for (PFObject* object in self.objects)
    {
        DetailObj* obj = [[DetailObj alloc ] init ];
        [obj setDetName:[object objectForKey:@"detName"]];
        [mov setDetImage:[object objectForKey:@"detImage"]];
        [detailObjects addObject:obj];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object
{
    static NSString *CellIdentifier = @"upCell";

    customBigTableCell *cell = (customBigTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[customBigTableCell alloc] init];
    }

    cell.name.text = [object objectForKey:@"detName"];
    cell.image.file = [object objectForKey:@"detImage"];

    //this is essential for loading the image from the database
    [cell.image loadInBackground];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [super tableView:tableView didSelectRowAtIndexPath:indexPath];

    UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];

    newDetailController* newController = [storyboard instantiateViewControllerWithIdentifier:@"Detail"];

    clickedObj = [[DetObj alloc] init];

    NSIndexPath* path = [self.tableView indexPathForSelectedRow];

    clickedObj = [detailObjects objectAtIndex:path.row];

    [newController setDetInfo:clickedObj];

    [[self navigationController] pushViewController:newController animated:YES];
} 
```

我已尝试在 DetailViewController 中使用如下所述的 PFImageView。detailInfo 是从前面的 PFQueryTableViewController 传递过来的对象。

**newDetailController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    PFImageView* detImage = [[PFImageView alloc] initWithFrame:CGRectMake(300,0,320,150)];

    PFFile* file = detailInfo.fullImage.file;

    detImage.file = file;

    [detImage loadInBackground];

    [self.view addSubview:detImage];

} 
```

但我有这个错误。

`reason: '-[PFFile file]: unrecognized selector sent to instance`

我不想再次查询数据库来获取我在前一个控制器中已经获得的信息。

谢谢安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:06:10.573

我采用了不同的方法，它对我很有效。但是感谢 Eddie 告诉我有关 NSCache 及其用法的信息。

我存储与对象关联的 PFFile 的 URL，然后将 URL 传递给下一个控制器。然后我使用以下代码显示图像`-(void)viewDidLoad()`

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    NSData *imageData = [NSData dataWithContentsOfURL: imgURL];

    dispatch_async(dispatch_get_main_queue(), ^{
        // Update the UI
        self.upImage.image = [UIImage imageWithData:imageData];
    });
}); 
```

感谢这个线程[Create UIIMAGE with URL in iOS](https://stackoverflow.com/questions/7694215/create-a-uiimage-with-a-url-in-ios)

再次感谢。安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:33:28.750

在 PFQueryTableViewController 中获得 PFFile 后，您应该将该图像保存到图像缓存中。它可以存储在文件系统或内存中。如果将 NSCache 放在内存中，最好使用它，因为它会在需要时自动释放内存。然后在您的 DetailViewController 中获取图像。您可以使用 parseId 作为图像键。

要专门回答您的问题，您不能传递 PFFile，因为它不能保证保留在内存或存储中。我相信它实际上可能在某些条件下执行，但不能保证。每次需要PFFile时，都应该通过parseId得到一个PFObject，然后下载PFFile。这算作两个请求。然而，Parse 足够聪明，它保留了自己的缓存——但没有指定生命周期，也没有保证。最好的办法是使用文件系统、内存或核心数据来持久化数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T01:27:58.993

我最近做了这样的事情。

```
ParseTableViewController.m

//----- CREATE SUBVIEW HERE -----//
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath {
[super tableView:tableView didSelectRowAtIndexPath:indexPath];
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
PFObject *passObj = [self.objects objectAtIndex:indexPath.row];
HouseDataViewController *detailViewController = [[HouseDataViewController alloc] init];
[detailViewController setReceiveObj:passObj];
[self.navigationController pushViewController:detailViewController animated:YES];
} 
```

DetailViewController.h

```
// include this to receive the object passed from the PFTableViewController
@property (nonatomic, strong) PFObject *ReceiveObj; 
```

并在 DetailViewController.m

```
-(void)viewDidLoad {
if (self.ReceiveObj){

// House Image
    PFImageView *houseView = [[PFImageView alloc] init];
    houseView.frame = CGRectMake(border, y, 280, 196);
    houseView.image = [UIImage imageNamed:@"big_frame.png"];     // placeholder image
    houseView.file = (PFFile *)[detail objectForKey:@"house_picture"];
    //[houseView loadInBackground];
    [scrollView addSubview:houseView];
    [houseView loadInBackground:^(UIImage *image, NSError *error) {
        if (!error) {
            // do code here
        } else {
            // ... error
        }
    }];

  }

} 
```

# ruby-on-rails - 需要将 Postgres (== String) 的布尔值转换为 Ruby 布尔值

> ID：14920537
> 
> 赞同：1
> 
> 时间：2013-02-17T11:23:21.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, ruby-on-rails-3.2, rails-activerecord

我正在使用带有 Rails 的 Postgres。有一个带有子选择的查询，它返回一个布尔值，但 Postgres 总是返回一个类似`'t'`or的字符串`'f'`。但在生成的 JSON 中，我需要一个真正的布尔值。

这是我的查询：

```
SELECT
  *,
  EXISTS (
    SELECT TRUE
    FROM measurement
    JOIN experiment ON measurement.experiment_id = experiment.id
    JOIN location ON experiment.location_id = location.id
    WHERE location.map_id = map.id
    LIMIT 1
  ) AS measurements_exist
FROM "map" 
```

不管我使用`THEN true`or `THEN 1`or `THEN 'true'`，我都会得到一个字符串。所以我的 JSON 响应总是这样：

```
[
  {"id":8, ..., "measurements_exist":"f"},
  {"id":9, ..., "measurements_exist":"t"}
] 
```

但它应该（！）看起来像这样：

```
[
  {"id":8, ..., "measurements_exist":false},
  {"id":9, ..., "measurements_exist":true}
] 
```

有什么办法可以让这个工作正常吗？

谢谢！

* * *

## 解决方案：

只需给相应的模型（此处：）`Map`一个属性访问器，用于`value_as_boolean`转换值。因此，每次控制器尝试访问该值时，它都会自动使用属性访问器方法。

控制器代码：

```
class MapsController < ApplicationController
  def index
    select = ["*"]
    select.push(measurements_exist) # This will just insert the string returned by the 'measurements_exist' method
    maps = Map.select(select) # Results in 'SELECT *, EXISTS (...) AS measurements_exist FROM "map"'
    render json: maps
  end

  private

  def measurements_exist
    "EXISTS (
      SELECT TRUE
      FROM measurement
      JOIN experiment ON measurement.experiment_id = experiment.id
      JOIN location ON experiment.location_id = location.id
      WHERE location.map_id = map.id
      LIMIT 1
    ) AS measurements_exist"
  end
end 
```

型号代码：

```
class Map < ActiveRecord::Base
  def measurements_exist
    ActiveRecord::ConnectionAdapters::Column.value_to_boolean(self[:measurements_exist])
  end
end 
```

生成的 JSON：

```
[
  {"id":7, ..., "measurements_exist":false},
  {"id":6, ..., "measurements_exist":true}
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T12:43:19.510

ActiveRecord 有一个称为[`ActiveRecord::ConnectionAdapters::Column.value_to_boolean`](http://rdoc.info/gems/activerecord/ActiveRecord/ConnectionAdapters/Column.value_to_boolean)它的方法，它在内部使用将任何类似 true 的值转换为 Ruby`true`值。

您可以在代码中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:23:23.577

当您从 Rails 查询模型时，它的布尔字段会自动转换为 true/false，因为 DB 适配器可以从模式中确定字段的类型。如果您从 db 中选择自定义布尔字段 - 适配器对此一无所知，因此它返回字符串“t”或“f”，您需要手动转换它。

获得预期布尔值的方法之一：

1.  在 DBMS 端使用提供的 SQL 查询创建视图（例如，参见[CREATE VIEW ...](http://www.postgresql.org/docs/8.1/static/sql-createview.html) PostgreSQL 语句）。视图字段具有类型，因此布尔字段将在您的应用程序中自动转换。假设它叫`map_with_measurements`.

2.  创建模型`MapWithMeasurement`并将其放置在`models/map_with_measurement.rb`. `class MapWithMeasurement < ActiveRecord::Base; end`

3.  使用`MapWithMeasurement.find_all`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T01:21:00.587

你可以使用wannabe_bool gem。 [https://github.com/prodis/wannabe_bool](https://github.com/prodis/wannabe_bool)

这个 gem 实现了`#to_b`String、Integer、Symbol 和 NilClass 类的方法。

```
class Map < ActiveRecord::Base
  def measurements_exist
    self[:measurements_exist].to_b
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-25T21:47:30.717

这是另一个解决方案：

```
boolean = (value_from_postgres =~ /^t$/i) == 0 
```

将 't' 的 value_from_postgres 转换为布尔值 true 或将 'f' 转换为布尔值 false

```
$irb
2.2.1 :001 > value_from_postgres = 't'
 => "t" 
2.2.1 :002 > (value_from_postgres =~ /^t$/i) == 0
 => true 
2.2.1 :003 > value_from_postgres = 'f'
 => "f" 
2.2.1 :004 > (value_from_postgres =~ /^t$/i) == 0
 => false 
```

如果您期望字符串“true”或“false”，则可以修改此行中的正则表达式以匹配 /^true$/i。这比使用三元或 gem 更灵活，因为您可以编写它来将匹配到任何正则表达式转换为布尔值 true。

使用三元，它看起来像：

```
boolean = value_from_postgres.eql?('t') ? true : false 
```

# javascript - 编写使用库的客户端 api

> ID：14920538
> 
> 赞同：0
> 
> 时间：2013-02-17T11:23:34.093
> 
> 标签：javascript, jquery, api, rest, client

我已经编写了一个 api 的服务器端，它通过 json 使用 REST 通过 codeigniter 提供 html。我正在研究如何使用 javascript 编写客户端 api，通过 api 从服务器获取数据，将其呈现在 dom 中并将事件绑定到它。

我在客户端需要的一件事是 jquery。现在我想知道如果客户端已经在使用另一个版本的 jquery 会发生什么，这与我需要的版本冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:31:48.663

通过在加载 jquery 版本后立即将 jQuery.noConflict() 分配给变量，可以同时使用多个版本的 jquery。然后只需使用该变量作为对所需版本的引用。

# c# - '' 类型的值不能添加到 '' 类型的集合或字典中

> ID：14920543
> 
> 赞同：5
> 
> 时间：2013-02-17T11:24:32.017
> 
> 标签：c#, xaml, visual-studio-2012, windows-phone-8

我有附加属性`InteractionService.Triggers`，它是类型`TriggersCollection`，它派生自`List<ITrigger>`. 所以我在 XAML 中放入了一些触发对象，每个对象都实现了 interface `ITrigger`。它工作正常，并且构建时没有任何错误。但是，当我将此库从 Silverlight 5 移植到 Windows Phone 8 并尝试将其用于上述场景时，Visual Studio 2012 用蓝线在此 XAML 下划线，并告知存在此类错误。当我编译项目时，错误从 VS2012 中的 XAML 消失，直到下次编辑此 XAML 文件。我该如何解决这个问题？或者这是带有 WP8 SDK 的 VS2012 的错误？这种情况有什么解决方法吗？

XAML 的片段（由 VS2012+WP8SDK 下划线，但不是由 VS2010+SL5 下划线）：

```
<deToolkit:InteractionService.Triggers>
   <deToolkit:EventTrigger EnterEvent="Loaded">
       <deToolkit:CommandSetter Command="{Binding LoadCommand}" />
   </deToolkit:EventTrigger>
</deToolkit:InteractionService.Triggers> 
```

触发器集合：

```
public class TriggersCollection : List<ITrigger> { } 
```

EventTrigger 类的头文件：

```
public class EventTrigger : TriggerBase 
```

TriggerBase 类的头文件：

```
public class TriggerBase : DependencyObject, ITrigger 
```

InteractionService 类的片段：

```
public sealed class InteractionService : DependencyObject
{
    #region [ADP] Triggers : TriggersCollection (Triggers applied to control)

    public static void SetTriggers(DependencyObject element, TriggersCollection value)
    {
        element.SetValue(TriggersProperty, value);
    }

    public static TriggersCollection GetTriggers(DependencyObject element)
    {
        var triggers = (TriggersCollection)element.GetValue(TriggersProperty);
        if (triggers == null)
        {
            var collection = new TriggersCollection();

            if (!DesignerProperties.IsInDesignTool)
            {
                // -- some code --
            }

            SetTriggers(element, collection);
            return collection;
        }
        return triggers;
    }

    public static readonly DependencyProperty TriggersProperty =
        DependencyProperty.RegisterAttached("Triggers", typeof(TriggersCollection), typeof(InteractionService), null);

    #endregion Triggers
} 
```

错误：

> 无法将“EventTrigger”类型的值添加到“TriggersCollection”类型的集合或字典中。

有时会引发另一个错误：

> 值“EventTrigger”不是“ITrigger”类型，不能在此通用集合中使用。参数名称：值

# java - 正则表达式拆分 (...,...)

> ID：14920545
> 
> 赞同：0
> 
> 时间：2013-02-17T11:25:18.177
> 
> 标签：java, regex

我是正则表达式的新手。如何从以下行拆分点数据：

> ((X1,Y1),(X2,Y2),(X3,Y3))

拆分为：

```
(X1,Y1)
(X2,Y2)
(X3,Y3) 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:32:51.347

好吧，当引入嵌套括号时，使用正则表达式从括号或括号中提取内容可能很快就会变得复杂。但仍然在您当前的情况下，您似乎可以使用[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)and [`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)class 获得结果（不要尝试[`split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)，因为它会稍微复杂一些）：

```
String str = "((X1,Y1),(X2,Y2),(X3,Y3))";

// The below pattern will fail with nested brackets - (X1, (X2, Y2)). 
// But again, that doesn't seem to be the case here.    
Matcher matcher = Pattern.compile("[(][^()]*[)]").matcher(str);

while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:45:39.837

这是另一个答案的替代方法，它查找模式的`(XXX,YYY)`类型：

```
String s = "((X1,Y1),(X2,Y2),(X3,Y3))";
Matcher m = Pattern.compile("(\\(\\w+,\\w+\\))").matcher(s);
while(m.find()) {
    System.out.println(m.group());
} 
```

# php - 按用户 ID 对 SQL 查询进行分组

> ID：14920551
> 
> 赞同：0
> 
> 时间：2013-02-17T11:26:03.940
> 
> 标签：php, mysql

我有一个`orders`包含以下列的表格：

```
-userid
-orderid (primary key)
-date
-name
-qty 
```

因此，我想在摘要页面的表格中显示所有订单并将它们分组在每个用户 ID 下。所以它会像

```
Userid: 0001
| Orderid | Name   | QTY |
|  1001   | Item A | 10  |
|  1002   | Item B | 5   |

Userid: 0003
| Orderid | Name   | QTY |
|  1003   | Item C | 6   |
|  1004   | Item C | 7   | 
```

到目前为止，我已经进行了实验并得到了：

1.  在单个表格中显示按用户 ID 排序的所有项目
2.  使用 GROUP BY 用户 ID，我设法创建了与不同用户 ID 一样多的表

但我似乎无法将两者结合到预期的结果中，并且非常感谢一些关于我做错了什么的建议。

在此先感谢，我希望我的解释是有道理的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:50:41.693

我认为您需要在 PHP 中执行此操作

查询

```
select * from orders order by userid, orderid 
```

在 PHP 中类似这样的伪代码

```
$this_user_id=0;

for (each order line)
{
get fields from db result;
if ($this_user_id!=$userid)
{
$this_user_id=$orderid// save change of userid flag
print user heading;
}

print order lines;
} 
```

# jquery - 为什么 django 坚持使用 jQuery 1.4？

> ID：14920554
> 
> 赞同：0
> 
> 时间：2013-02-17T11:26:12.277
> 
> 标签：jquery, django, django-admin

我有以下问题。
django 管理插件经常包含他们自己的 jquery 版本，并且不可能一起使用它们。
例如：django-markitup 和 django-sortable。有没有办法解决这个问题？我是否需要重写插件才能使用 noConflict？

我明白为什么开发人员要插入最新的 jquery 版本，但为什么 Django 坚持使用 jQuery 1.4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:29:27.750

这不是什么大问题，因为 django 的捆绑 jquery 是命名空间的：

> 为了避免与用户提供的脚本或库发生冲突，Django 的 jQuery（版本 1.4.2）命名为 django.jQuery。如果您想在您自己的管理 JavaScript 中使用 jQuery 而不包含第二个副本，您可以在更改列表上使用 django.jQuery 对象并添加/编辑视图。

以上取自[管理文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#jquery)。

# c# - 在 Mono 2.6（.Net 3.5）中将项目列表从树父级传递到其叶子的最有效的 GC 方法是什么？

> ID：14920555
> 
> 赞同：0
> 
> 时间：2013-02-17T11:26:13.473
> 
> 标签：c#, .net-3.5, mono, unity3d

所以我们有一个基于这样的类的树（伪代码）：

```
class TreeItem {
    private TreeItem parent;
    private List<TreeItem> leaves;
   public void Filter(List<Target> targets) { /* filter given list and pass to all leaves */ }
} 
```

这让 GC 真的哭了——它偶尔会下降，FPS 会下降到 15，它会过滤掉大约 2.5 兆的垃圾。

我们在每一帧都调用该函数，这是我们无法避免的。我们真的不想调用`GC.collect`每一帧/每一`N`帧。

我们传递给孩子的列表是通过 LINQ 表达式生成`.ToList()`的，最后（传递过滤掉的 IEnumerator（意味着链接到原始集合的部分）会使性能下降得更低）。

在我们的`Filter`函数中，我们不修改给定的集合 - 只是过滤它。

所以我的问题是：如何保持至少相同的过滤性能并摆脱 GC 丢弃我们的 fps？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:39:00.663

您没有确切说明什么类型的对象占用了所有内存，但是从您提到的 ToList() 听起来您正在创建许多 List 实例，以及在 LINQ 中可能的中间对象。

要减少 GC 压力，您需要减少分配量。您不应在每个 Filter() 中分配新的 List 实例。也许您甚至不应该使用 List，而是使用其他一些 O(1) 的数据结构进行删除。或者，不要从列表中删除元素，而只是用一些占位符替换应该删除的元素（null 可能会这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:39:31.023

您可能需要考虑分别处理每个目标：

```
public void Filter(Target target) 
```

这样，就不需要分配任何东西。而且您正在多次调用`MoveNext()`和`Current`多次调用`Filter()`，因此忽略 GC 时的性能也可能不会受到影响。（虽然它可以`MoveNext()`并且`Current`可以内联，但递归调用`Filter()`can't。）

# r - R中的标量场可视化

> ID：14920556
> 
> 赞同：0
> 
> 时间：2013-02-17T11:26:12.817
> 
> 标签：r, visualization

我有一个有 3 列的表

```
x y f
-101.0  -101.0  0.0172654144157
... 
```

`x`并且`y`是坐标。`f`是价值。我想制作一张 2d 图片，其中`x`和`y`是坐标并且`f`是颜色。但我需要这张图不是一些彩色的点，而是一个连续的时间表。请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:13:51.683

如果您有一个包含数据的常规网格，有几种简单的方法可以做到这一点。尝试：

```
require(ggplot2)
require(lattice)

# make some data
s = 100
i = 0.5
x0 <- 27
y0 <- 34
df <- expand.grid(x=seq(0,s,i), y=seq(0,s,i))
df <- transform(df, f = cos( 10*pi * sqrt((x - x0)^2 + (y-y0)^2)))

# try as points
ggplot(df,aes(x,y,color=f)) + geom_point()

# or as tile
ggplot(df,aes(x,y,fill=f)) + geom_tile()

# or even easier with lattice
levelplot(f ~ x * y, df) 
```

输出示例：

![在此处输入图像描述](../Images/73618729c69a5fae17cd685fa29a622d.png)

![在此处输入图像描述](../Images/fdb12d17164609968faedc98a21cc034.png)

# jquery - 通过此功能选择最后生成的选项卡，jQuery Ui Tabs

> ID：14920560
> 
> 赞同：0
> 
> 时间：2013-02-17T11:26:34.487
> 
> 标签：jquery, jquery-ui

我有这个函数来生成 JQuery UI Tabs 。我想将其修改为生成最后一个选项卡时，将其设置为打开的选项卡，请帮助我..我完全混淆了...谢谢

```
function addTab(title,content,Refrence) {
            $("#tabs").show();
                        $("#tabs").tabs();
            var btnCloseTab = document.createElement('span');
            $(btnCloseTab).addClass('ui-icon ui-icon-close');
            $(btnCloseTab).attr('role', 'presentation');
            $(btnCloseTab).click(function () {
                $(this).parent().remove();
                var contentId = $(this).parent().find('a').attr('href');
                var contentIndex = contentId.substring(contentId.indexOf('-') + 1);
                for (var i = 0; i <= tabRefrenceArray.length; i++) {
                    if (Refrence == tabRefrenceArray[i]) {
                        tabRefrenceArray.splice(i, 1);
                    }
                    $(contentId).remove();
                }
            });
            var tabIndex = 1;
            if ($('#ulTab li:last').length > 0) {
                var liId = $('ul li a:last').attr('id');
                tabIndex = parseInt(liId.substring(2)) + 1;
            }
            var tabHeader = $('<li id="li-'+tabIndex+'" class="liTab"><a id="A-' + tabIndex + '" href="#tabs-' + tabIndex + '">' + title + '</a>');
            $(tabHeader).append(btnCloseTab);
            $(tabHeader).append('</li>');
            $("#ulTab").append(tabHeader);
            var tabContent = $('<div id="tabs-' + tabIndex + '">' + content + '</div>');
            $("#tabs").append(tabContent);
            $("#tabs").tabs("refresh");

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:50:10.007

之后

```
$("#tabs").tabs("refresh"); 
```

做一个

```
$("#tabs").tabs('option', 'active', -1); //  Activate the last one 
```

# haskell - 如何无痛地序列化 little-endian POD？

> ID：14920566
> 
> 赞同：5
> 
> 时间：2013-02-17T11:27:31.950
> 
> 标签：haskell, serialization

假设我有以下类型：

```
data WaveFormatChunk = WaveFormatChunk { 
    compression :: Word16,
    channels :: Word16,
    sampleRate :: Word32,
    averageBps :: Word32,
    blockAlign :: Word16,
    significantBits :: Word16
    } deriving (Show) 
```

有没有办法将所有这些全部转储到一个 ByteString （或类似的结构）中（以 ye olde C 结构的方式）？如果没有，我必须编写一个函数，将它们分别放入一个列表中，是否至少有一些函数可以使将值粘贴到 Word8 列表中变得容易？像 putWordBBxe 之类的东西，除了字节字符串或列表（尽管我很可能严重错误，因为我还没有正确读入 Monads，在我看来 Get/Put 主要用于流）。

Data.Binary 并不是我正在寻找的东西，它似乎更适合将数据转储到磁盘上，而不是将其存储为具有特定（和“错误”）字节序的特定格式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T12:46:44.063

[Data.Binary](http://hackage.haskell.org/package/binary-0.4.1)将允许您使用明确[的小端运算符](http://hackage.haskell.org/packages/archive/binary/0.4.1/doc/html/Data-Binary-Put.html#5)将结构序列化为字节串。

```
{-# OPTIONS_GHC -funbox-strict-fields #-}
{-# LANGUAGE RecordWildCards #-}

import Data.Binary
import Data.Binary.Put

import qualified Data.ByteString.Char8 as C
import qualified Data.ByteString.Lazy  as L

data WaveFormatChunk =
        WaveFormatChunk { 
            compression     :: !Word16,
            channels        :: !Word16,
            sampleRate      :: !Word32,
            averageBps      :: !Word32,
            blockAlign      :: !Word16,
            significantBits :: !Word16
        } 

instance Binary WaveFormatChunk where
    put (WaveFormatChunk{..}) = do
        putWord16le compression 
        putWord16le channels
        putWord32le sampleRate
        putWord32le averageBps
        putWord16le blockAlign
        putWord16le significantBits

    get = undefined

main = C.putStr $ C.concat $ L.toChunks $ encode test
  where
    test = WaveFormatChunk {
            compression     = 0xcafe
          , channels        = 0xface
          , sampleRate      = 0xdeadbeef
          , averageBps      = 0xf01dab1e
          , blockAlign      = 0x5566
          , significantBits = 0xb01d
          } 
```

将产生：

```
 $ ./A | od -x
 0000000 cafe face beef dead ab1e f01d 5566 b01d 
```

因此，您可以对表示进行精确的字节级控制。如果您对流媒体不感兴趣，您也可以从谷物包中获得相同的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T14:12:16.817

还有另一种完全不同的方法。`ByteString`您可以定义一个包装器，而不是拥有这样的结构：

```
import Data.ByteString (ByteString)

newtype WaveFormatChunk =
    WaveFormatChunk {
      getWaveFormatChunk :: ByteString
    } 
```

将其写入文件很简单。要修改这样的结构，您可以使用镜头：

```
data Compression = {- ... -}

compression :: Lens' WaveFormatChunk Compression 
```

或者，如果您愿意：

```
compression :: Lens' WaveFormatChunk Word16 
```

镜头就像单个字节组的安全解释器。但是，存在三个问题：首先，您应该为此使用一个测试框架，因为很容易弄错镜头。其次，每次更改都需要 ByteString 的新副本。根据您的操作，这可能比您原来的方法更慢或更快。

我个人的建议是使用常规的高级 Haskell 数据类型并使用适当的序列化。正如其他人指出的那样，这些实例很容易编写。

# c++ - 在初始化时强制赋值运算符而不是复制构造函数？

> ID：14920568
> 
> 赞同：0
> 
> 时间：2013-02-17T11:27:51.000
> 
> 标签：c++, operator-overloading, copy-constructor

我正在用 C++ 组合我自己的（愚蠢的）标量/列表/哈希（perl-like..）东西。

我遇到了必须将标量取消引用到列表中的问题，并且在尝试初始化时它不起作用。

`List`几个默认构造函数，其中 5 个范围从`List()`到`List(Scalar, Scalar, Scalar, Scalar)`.

```
List stuff(1, 2, 3);
Scalar aref = stuff; // List overloads the (Scalar) cast operator

// the following line is the unwanted thing..
List failist = aref; // uses List::List(Scalar), so same as `List failist(aref);`

// however, these work
List thisworks;
thisworks = aref;
thisworks.operator=(aref); 
```

列表标题：

```
class List : public Thing {
    std::vector<Scalar> stuff;
public:
    List();
    List(Scalar s1); // this gets called because initialization
    List(Scalar s1, Scalar s2);
    List(Scalar s1, Scalar s2, Scalar s3);
    List(Scalar s1, Scalar s2, Scalar s3, Scalar s4);
    List &operator=(const Scalar &other); // but i want this

    /* some getters/setters cut away */

    operator Scalar();
}; 
```

我真的很想用`List mylist = listreference;`，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:55:37.810

我想知道您是否不想`List myList = scalar`调用构造函数，那么为什么首先要有它？

无论如何，将其明确表示为：

```
explicit List(Scalar s1);. 
```

这样，您将使编译器在线吐出错误：

```
List myList = scalar; //error 
```

然后您将有机会通过以下方式纠正自己：

```
List myList(scalar); //ok 
```

或者，

```
List myList; 
myList = scalar; //ok 
```

请注意，您不能进行`List myList = scalar`调用`List& operator=(Scalar const&)`，但是您可以根据其他方式实现一个，或者根据某些常用`init`功能实现两者，以避免代码重复。后一种方法更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:44:34.360

你不能这样做。`List mylist = listreference;`表示：使用复制构造函数创建 List 类型的 mylist 对象。所以你有2个选择：

1.  通过 operator= 实现复制构造函数
2.  用两行代码来做：`List mylist = listreference; mylist = listreference;`

# c# - 从 silverlight 排队 WCF 调用

> ID：14920575
> 
> 赞同：2
> 
> 时间：2013-02-17T11:28:14.750
> 
> 标签：c#, silverlight, asynchronous, queue

在我的 Silverlight 用户控件中，我正在侦听来自应用程序的事件并调用 WCF 服务来执行某些操作

```
void SelectedCustomerEvent(string customer)
{
//.......

_wcfserviceagent.GetCustomer(customer, callback);
}

  void callback(ObservableCollection<CustomerType> customer)
{

//do some action

} 
```

在某些情况下，执行某些操作时会多次触发事件。问题是回调不一定按照调用 WCF 服务的顺序调用。

无论如何要确保调用和回调总是按顺序调用？

理想情况下，我希望以这样一种方式执行，即对于事件，它将调用服务和回调，并且介于两者之间的任何其他调用都将排队。当然，我不能阻塞 UI 线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:40:05.177

确保对 WCF 服务的调用顺序的唯一方法是在客户端上实现您自己的队列。

例如：

```
Queue<string> _customersQueue = new Queue<string>();
bool _fetching;
void SelectedCustomerEvent(string customer)
{
    _customersQueue.Enqueue(customer);
    //.......
    if (!_fetching)
    {
        DoFetchCustomer(_customersQueue.Dequeue());
    }
}

void DoFetchCustomer(string customer)
{
    _fetching = true;
    _wcfserviceagent.GetCustomer(customer, callback);
}

void callback(ObservableCollection<CustomerType> customer)
{
    _fetching = false;
    //do some action
    if (_customersQueue.Count > 0)
    {
        DoFetchCustomer(_customersQueue.Dequeue());
    }
} 
```

# mvp - 模型检查数据还是演示者做的？

> ID：14920578
> 
> 赞同：0
> 
> 时间：2013-02-17T11:28:53.020
> 
> 标签：mvp

我对MVP有疑问。如果演示者向模型发送数据请求。模型检查这些数据还是演示者必须这样做？例如：数据是否正常等。谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:44:45.470

我认为您可以采用几种方法来验证您的数据：域对象或服务。

你的模型就是你的领域。在域驱动开发中，您的域应该知道如何验证自己。因此，您可能对模型中的任一类都有一个标准的 Validate 方法。但是，如果您需要进行数据库调用来进行验证，这可能会有些棘手，尽管您可能需要将相关数据传递给您的验证方法，或者在必要时提供一个委托来获取数据。

或者，您可以稍后将所有验证放入服务中，您的演示者将调用它来检索和保存模型。这将导致所谓的反模式“贫血域”。但是，如果这最适合您的应用程序和架构，那么它可能是正确的选择。

我会告诫不要让演示者这样做。这并不是真正的工作，它不会像模型和服务那样被重用。

# php - 多个文件上传只显示最后上传的文件

> ID：14920579
> 
> 赞同：0
> 
> 时间：2013-02-17T11:28:59.800
> 
> 标签：php, codeigniter, file-upload, upload

我正在尝试构建一些应用程序，但对使用 ci 上传的代码感到沮丧，我使用了`multi_upload`. 我赢了上传一些文件并通过电子邮件发送，但是在 CI 上`file_path`必须上传到服务器根目录，所以我尝试上传并找到`file_path`.

这是我的控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

 class Upload extends CI_Controller {

function index()
{    
    $this->load->view('upload_form');
}

function do_upload()
{

    $config['upload_path'] = './uploads/'; // server directory
    $config['allowed_types'] = 'gif|jpg|png'; // by extension, will check for whether it is an image
    $config['max_size']    = '1000'; // in kb
    $config['max_width']  = '1024';
    $config['max_height']  = '768';

    $this->load->library('upload', $config);
    $this->load->library('Multi_upload');

    $files = $this->multi_upload->go_upload();

    if ( $files )        
    {
        $error = array('error' => $this->upload->display_errors());
        $this->load->view('upload_form', $error);
    }    
    else
    {

        $data = array(
                'upload_data' =>$this->upload->data()

        );
        $this->load->view('upload_success', $data);
    }
}    
}
?> 
```

我的`upload_form`：

```
 <?php if (isset($error)) echo $error;?>
 <form action="http://localhost/hemmmm/index.php/upload/do_upload" method="post" accept-charset="utf-8" enctype="multipart/form-data">
 <input type="file" name="userfile[]" size="20" class="multi"  
  data-ajax="false"><br /><br />

  <input type="submit" value="upload" /> 
```

我的succes_form：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?>
  <html>
   <head>
  <title>Upload Form</title>
     </head>
  <body>

    <h3>Your file was successfully uploaded!</h3>

  <ul>

   <?php foreach ($upload_data as $item => $value):?>
   <li><?php echo $item;?>: <?php echo $value;?></li>
    <?php endforeach; ?>
</ul>

 <p><?php echo anchor('upload', 'Upload More Files!'); ?></p>

</body>
</html> 
```

我的 multi_upload 库：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

/**

    * This library assumes that you have already loaded the default CI Upload Library seperately
    * 
    * Functions is based upon CI_Upload, Feel free to modify this 
    *   library to function as an extension to CI_Upload
    * 
    * Library modified by: Alvin Mites
    * http://www.mitesdesign.com
    * 
    */

class Multi_upload  {
    function Multi_upload () {
//      $CI =& get_instance();
    }

    /**
     * Perform multiple file uploads
     * Based upon JQuery Multiple Upload Class
     * see http://www.fyneworks.com/jquery/multiple-file-upload/
     */ 
    function go_upload($field = 'userfile') {
        $CI =& get_instance(); 
        // Is $_FILES[$field] set? If not, no reason to continue.
        if ( ! isset($_FILES[$field]['name'][0]))
        {
            $CI->upload->set_error('upload_no_file_selected');
            return FALSE;
        } else
        {
            $num_files = count($_FILES[$field]['name']) -1;
            $file_list = array();
            $error_hold = array();
            $error_upload = FALSE;
        }

        // Is the upload path valid?
        if ( ! $CI->upload->validate_upload_path())
        {
            // errors will already be set by validate_upload_path() so just return FALSE
            return FALSE;
        }

        for ($i=0; $i < $num_files; $i++) {

//            $fname = $_FILES[$field]['name'][$i];
//            echo "$fname\n\n<br><br>\n\n";

            $error_hold[$i] = FALSE;

            // Was the file able to be uploaded? If not, determine the reason why.
            if ( ! is_uploaded_file($_FILES[$field]['tmp_name'][$i]))
            {
                $error = ( ! isset($_FILES[$field]['error'][$i])) ? 4 : $_FILES[$field]['error'][$i];

                switch($error)
                {
                    case 1:  // UPLOAD_ERR_INI_SIZE
                        $error_hold[$i] = 'upload_file_exceeds_limit';
                        break;
                    case 2: // UPLOAD_ERR_FORM_SIZE
                        $error_hold[$i] = 'upload_file_exceeds_form_limit';
                        break;
                    case 3: // UPLOAD_ERR_PARTIAL
                       $error_hold[$i] = 'upload_file_partial';
                        break;
                    case 4: // UPLOAD_ERR_NO_FILE
                       $error_hold[$i] = 'upload_no_file_selected';
                        break;
                    case 6: // UPLOAD_ERR_NO_TMP_DIR
                        $error_hold[$i] = 'upload_no_temp_directory';
                        break;
                    case 7: // UPLOAD_ERR_CANT_WRITE
                        $error_hold[$i] = 'upload_unable_to_write_file';
                        break;
                    case 8: // UPLOAD_ERR_EXTENSION
                        $error_hold[$i] = 'upload_stopped_by_extension';
                        break;
                    default :
                        $error_hold[$i] = 'upload_no_file_selected';
                        break;
                }

                return FALSE;
            }

            // Set the uploaded data as class variables
            $CI->upload->file_temp = $_FILES[$field]['tmp_name'][$i];              
             $CI->upload->file_name = $this->_prep_filename($_FILES[$field]['name'][$i]);  
            $CI->upload->file_size = $_FILES[$field]['size'][$i];        
            $CI->upload->file_type = preg_replace("/^(.+?);.*$/", "\\1", $_FILES[$field]['type'][$i]);
            $CI->upload->file_type = strtolower($CI->upload->file_type);
            $CI->upload->file_ext  = $CI->upload->get_extension($_FILES[$field]['name'][$i]);

            // Convert the file size to kilobytes
            if ($CI->upload->file_size > 0)
            {
                $CI->upload->file_size = round($CI->upload->file_size/1024, 2);
            }

            // Is the file type allowed to be uploaded?
            if ( ! $CI->upload->is_allowed_filetype())
            {
                $error_hold[$i] = 'upload_invalid_filetype';
            }

            // Is the file size within the allowed maximum?
            if ( ! $CI->upload->is_allowed_filesize())
            {
                $error_hold[$i] = 'upload_invalid_filesize';
            }

            // Are the image dimensions within the allowed size?
            // Note: This can fail if the server has an open_basdir restriction.
            if ( ! $CI->upload->is_allowed_dimensions())
            {
                $error_hold[$i] = 'upload_invalid_dimensions';
            }

            // Sanitize the file name for security
            $CI->upload->file_name = $CI->upload->clean_file_name($CI->upload->file_name);

            // Remove white spaces in the name
            if ($CI->upload->remove_spaces == TRUE)
            {
                $CI->upload->file_name = preg_replace("/\s+/", "_", $CI->upload->file_name);
            }

            /*
             * Validate the file name
             * This function appends an number onto the end of
             * the file if one with the same name already exists.
             * If it returns false there was a problem.
             */
            $CI->upload->orig_name = $CI->upload->file_name;

            if ($CI->upload->overwrite == FALSE)
            {
                $CI->upload->file_name = $CI->upload->set_filename($CI->upload->upload_path, $CI->upload->file_name);

                if ($CI->upload->file_name === FALSE)
                {
                    $error_hold[$i] = TRUE;
                }
            }

            /*
             * Move the file to the final destination
             * To deal with different server configurations
             * we'll attempt to use copy() first.  If that fails
             * we'll use move_uploaded_file().  One of the two should
             * reliably work in most environments
             */
            if ( ! @copy($CI->upload->file_temp,     $CI->upload->upload_path.$CI->upload->file_name))
            {
                if ( ! @move_uploaded_file($CI->upload->file_temp, $CI->upload->upload_path.$CI->upload->file_name))
                {
                     $error_hold[$i] = 'upload_destination_error';
                }
            }

            /*
             * Run the file through the XSS hacking filter
             * This helps prevent malicious code from being
             * embedded within a file.  Scripts can easily
             * be disguised as images or other file types.
             */
            if ($CI->upload->xss_clean == TRUE)
            {
                $CI->upload->do_xss_clean();
            }

            if ($error_hold[$i]) {
                $error_upload = TRUE;

//                echo $error_hold[$i];
            } else {
                if ($imageVar = $this->multiple_image_properties($CI->upload->upload_path.$CI->upload->file_name)) {

                    $file_list[] = array(
                            'name' => $CI->upload->file_name,
                            'file' => $CI->upload->upload_path.$CI->upload->file_name,
                            'size' => $CI->upload->file_size,
                            'ext' => $CI->upload->file_ext,
                            'image_type' => $imageVar->image_type,
                            'height' => $imageVar->height,
                            'width' => $imageVar->width
                            );
                } else {
                    $file_list[] = array(
                            'name' => $CI->upload->file_name,
                            'file' => $CI->upload->upload_path.$CI->upload->file_name,
                            'size' => $CI->upload->file_size,
                            'type' => $CI->upload->file_type,
                            'ext' => $CI->upload->file_ext,
                            );
                }
            }

// For debugging
/*            
            if (strlen($error_hold[$i]) > 1) {
                    print_r($error_hold);
            }
*/            
        } // end for loop

// Add error display for individual files        
        if ($error_upload) {
            $this->set_error($error_hold);
            return FALSE;
        } else {
            return $file_list;
        }    
    }

    // --------------------------------------------------------------------

    /**
     * Set Image Properties
     *
     * Uses GD to determine the width/height/type of image
     *
     * @access    public
     * @param    string
     * @return    void
     */    
    function multiple_image_properties($path = '')
    {
        $CI =& get_instance(); 
        if ( ! $CI->upload->is_image())
        {
            return false;
        }

        if (function_exists('getimagesize'))
        {
            if (FALSE !== ($D = @getimagesize($path)))
            {    
                $types = array(1 => 'gif', 2 => 'jpeg', 3 => 'png');

                $image->width       = $D['0'];
                $image->height      = $D['1'];
                $image->image_type        = ( ! isset($types[$D['2']])) ? 'unknown' : $types[$D['2']];

                return $image;
            }
        }
    }

    // --------------------------------------------------------------------

    /**
     * Set an error message
     *
     * @access    public
     * @param    string
     * @return    void
     */    
    function set_error($msg)
    {
        $CI =& get_instance();    
        $CI->lang->load('upload');

        if (is_array($msg))
        {
            foreach ($msg as $val)
            {
                $msg = ($CI->lang->line($val) == FALSE) ? $val : $CI->lang->line($val);                
                $this->error_msg[] = $msg;
                log_message('error', $msg);
            }        
        }
        else
        {
            $msg = ($CI->lang->line($msg) == FALSE) ? $msg : $CI->lang->line($msg);
            $this->error_msg[] = $msg;
            log_message('error', $msg);
        }
    }

    // --------------------------------------------------------------------
 protected function _prep_filename($filename) {

        $CI = & get_instance();

        if (strpos($filename, '.') === FALSE OR $CI->upload->allowed_types == '*') {
            return $filename;
        }

        $parts = explode('.', $filename);
        $ext = array_pop($parts);
        $filename = array_shift($parts);

        foreach ($parts as $part) {
            if (!in_array(strtolower($part), $CI->upload->allowed_types) OR $CI->upload->mimes_types(strtolower($part)) === FALSE) {
                $filename .= '.' . $part . '_';
            } else {
                $filename .= '.' . $part;
            }
        }

        $filename .= '.' . $ext;

        return $filename;
    }  

    }
?> 
```

当我尝试上传一个文件时它可以工作并且我有很好的解释`upload_data` 但是当我尝试上传多个文件时它可以工作文件已上传，但只显示有关最后一个文件上传的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:22:57.883

每次从外观处理图像时，$file_list 数组都会被覆盖。尝试在填充时使用 $i 变量增加它。

```
$file_list[$i] = array 
```

# java - java字符串数组特定单词打印出来

> ID：14920580
> 
> 赞同：0
> 
> 时间：2013-02-17T11:28:59.557
> 
> 标签：java

java新手，试图弄清楚如何打印出字符串数组中的特定单词。例如

```
String[] myArray = {"bread", "milk", "sugar", "coffee"} 
```

我只想打印出数组的第二个值（我们说`milk`，我知道数组索引开始于，`0`但对于这个例子，我们将使用这个）。任何想法如何做到这一点。我尝试了 for 循环，但似乎无法让它运行，所以如果你们有一个例子，将不胜感激。

我不能完全使用索引号打印出来。我将给出一个更详细的方法来说明我希望它如何工作......假设我有两个数组 String[] Array1 = {"bread", "milk", "sugar", "coffee"} String[] Array2 = {"butter", "tea", "spoon", "cup"} 所以如果我提示数组 1 中的任何条目，例如面包（我希望它打印出类似黄油的东西）所以对于 array1 中的每个值我想它返回array2中相同索引处的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:45:28.850

只需使用

```
System.out.println(myArray[1]); 
```

## [www.ideone.com 上的演示](http://ideone.com/4qtrT9)

* * *

如果要比较，请使用

```
if (myArray[1].equals("milk")) {
    // your code
} 
```

* * *

如果要在 for 循环中进行比较，请使用下面

```
String[] myArray = {"bread", "milk", "sugar", "coffee"};
for (int i=0;i<myArray.length;i++) {
    if (myArray[i].equals("milk")) {
        // your code here....
    }
} 
```

## [forloop的演示](http://ideone.com/nz4hOc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:41:08.463

```
String[] myArray = {"bread", "milk", "sugar", "coffee"}
for(int i=0;i<myArray.length;i++){
    if(myArray[i].equals("milk")){
       System.out.println(myArray[i]); //Matching the string and printing.
    }
}
System.out.println(myArray[1]); //printing the 2nd element if you don't care about the value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:35:46.160

您可以使用索引直接访问数组的任何元素。你不需要一个循环。

例如，如果要访问第二个元素，则必须编写：

```
yourArray[1]
// remember for accessing using index
// always use (index - 1) in this case for 2nd element (2-1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T11:32:06.357

如果您只需要打印一个元素，则不需要任何循环：

```
System.out.println(myArray[1]); // prints milk, since indices start at 0 
```

阅读[有关数组的 Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)（或任何 Java 入门书籍）。

# c# - 使用 installshield 创建安装文件时 Windows 窗体的 Microsoft Access 数据库的位置

> ID：14920581
> 
> 赞同：4
> 
> 时间：2013-02-17T11:29:04.263
> 
> 标签：c#, winforms, database-connection, connection-string

我开发了使用 Microsoft Access 数据库的 windows 窗体。

在开发过程中，我将数据库文件放在项目的根文件夹中。

当我通过 Visual Studio 运行应用程序时，它运行良好，但是当我创建安装文件并将其安装到我的系统中时，出现以下错误。

当我创建安装文件时，我的数据库位置是

```
Data Source=|DataDirectory|\Database.accdb 
```

我该如何解决这个问题？

**错误**

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.NullReferenceException: Object reference not set to an instance of an object.
   at Purchase_Management.Form1..ctor() in c:\Users\Amrit\Documents\Visual Studio 2012\Projects\Purchase Management\Purchase Management\Purchase Management System.cs:line 19
   at Purchase_Management.Main_Window.button1_Click(Object sender, EventArgs e) in c:\Users\Amrit\Documents\Visual Studio 2012\Projects\Purchase Management\Purchase Management\Main Window.cs:line 27
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18033 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
Purchase Management
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Program%20Files%20(x86)/Amrit%20Creations/aDesigns/Purchase%20Management/obj/Release/Purchase%20Management.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18037 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18022 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18033 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Configuration
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.17929 built by: FX45RTMREL
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.18033 built by: FX45RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

![在此处输入图像描述](../Images/f235d53db0a71f56d71b0fecb28c9f26.png)

![在此处输入图像描述](../Images/07142d43106b622b75964a21e3126454.png)

![在此处输入图像描述](../Images/736143ab300a784dbc1613cb4f64bc4a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:57:26.410

我想，这个错误与`connectionString`你的数据库无关，我说，因为如果那个错误是关于它的，`database path`它应该像这张图片

![在此处输入图像描述](../Images/7a56f5600f7ba59a7dc22777a71d0153.png)

如果那个错误就像那个图像。尝试将您的数据库和应用程序放在同一个文件夹中。

好的，我发现了，您显然将数据库放置在错误的位置..尝试将该数据库移动到`bin`文件夹中

# memory-leaks - HighCharts XAxis 对数型

> ID：14920587
> 
> 赞同：0
> 
> 时间：2013-02-17T11:29:35.713
> 
> 标签：memory-leaks, highcharts

我有一个具体的查询。

以下是我的 highcharts 脚本。当我运行这个脚本时，我遇到了内存泄漏问题。也许有人可以帮忙。我需要以指数比例显示 x 轴，例如

```
100,000
1,000,000
10,000,000 
```

等等。

```
var chart = new Highcharts.Chart({
            chart: {
                renderTo: 'dvCon'
            },
            title: {
                text: 'Construction: Duration vs Productive Hours'
            },
            xAxis: [{
                type: 'logarithmic',
                title: {
                    text: 'Construction Hours'
                }
            }],
            yAxis: [{
                labels: {
                    formatter: function () {
                        return this.value;
                    },
                    style: {}
                },
                showEmpty: true,
                title: {
                    text: 'Duration',
                    style: {}
                }
            }, ],
            tooltip: {
                formatter: function () {
                    return '' + this.x + ': ' + this.y;
                }
            },
            legend: {
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom',
                backgroundColor: '#FFFFFF'
            },
            series: [{
                name: 'Other Projects',
                type: 'scatter',
                data: [[560000, 13], [185250, 11], [3625788, 23], [1648510, 21], [265000, 14], [13000000, 43], [28000000, 34], [1567000, 19], [1190000, 20], [21000000, 31], [7000000, 33], [3805200, 30], [17000000, 29], [1503267, 21], [11332332, 29], [1485067, 20], [5000000, 30], [5400000, 22], [13000000, 23], [3810000, 26], [810000, 18], [27528218, 26], [377319, 14], [840000, 22], [550000, 13], [2643142, 26], [412800, 13], [2500000, 22], [4510000, 19], [523116, 15], [17600000, 28], [2500000, 21], [21000000, 29], [3500000, 17], [620000, 15], [163000000, 46], [134000000, 41], [45000000, 39], [13677454, 31], [167000000, 52], [47000000, 33], [49000000, 38], [31000000, 38]]
            },
            {
                name: 'User Data',
                type: 'scatter',
                data: [[40050000, 35]]
            }]
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:14:10.910

代码工作正常，除了`,`yAxis 对象之后的附加部分。

jsFiddle > [http://jsfiddle.net/SSCEk/](http://jsfiddle.net/SSCEk/)

也许问题发生在特定版本的 highcharts、jquery 或浏览器上？

# caching - 如何在 linux 的客户端禁用 CIFS (samba) 中的缓存

> ID：14920591
> 
> 赞同：6
> 
> 时间：2013-02-17T11:29:44.040
> 
> 标签：caching, embedded-linux, samba, cifs

开发了一个应用程序，可以在具有 2.6.10 内核的目标上运行。windows机器上的共享文件夹通过命令挂载：

```
mount -t cifs -o username=xxx,password=xxx,forcedirectio //192.168.170.67/57 /fsRecord 
```

正如您从命令选项中可以理解的那样`forcedirectio`，我想在客户端禁用缓存。但我不能。

目标上的可用 RAM 量为 40 MB。当我复制一个大小约为 10MB 的文件时，可用 RAM 大小减少到 30MB。

内核 2.6.10 使用 cifs.1.28。我还将 oplockEnabled 设置为 0（在源代码和 /proc/fs/cifs/OplockEnabled 中）。但它并没有停止缓存。如何真正禁用 cifs 客户端上的缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-04T06:07:06.840

也许为时已晚，但在 Arch 中，我通过以下方式实现了这一点：

```
/etc/modprobe.d/cifs.conf
-------------------------
# Disable caching and the CIFS oplog for stable NTFS network shares
options cifs enable_oplocks=0

install cifs /sbin/modprobe --ignore-install cifs $CMDLINE_OPTS && echo 0 > /proc/fs/cifs/LinuxExtensionsEnabled && echo 0 > /proc/fs/cifs/LookupCacheEnabled
remove cifs /sbin/modprobe -r cifs 
```

这是一个方便的函数来确定有效的模块选项。

```
# Shamelessly ripped the Kernel_Modules ArchWiki entry:
# https://wiki.archlinux.org/index.php?title=Kernel_modules&oldid=286087#Bash_function_to_list_module_parameters 

function aa_mod_parameters ()
{
    N=/dev/null;
    C=`tput op` O=$(echo -en "\n`tput setaf 2`>>> `tput op`");
    for mod in $(cat /proc/modules|cut -d" " -f1);
    do
        md=/sys/module/$mod/parameters;
        [[ ! -d $md ]] && continue;
        m=$mod;
        d=`modinfo -d $m 2>$N | tr "\n" "\t"`;
        echo -en "$O$m$C";
        [[ ${#d} -gt 0 ]] && echo -n " - $d";
        echo;
        for mc in $(cd $md; echo *);
        do
            de=`modinfo -p $mod 2>$N | grep ^$mc 2>$N|sed "s/^$mc=//" 2>$N`;
            echo -en "\t$mc=`cat $md/$mc 2>$N`";
            [[ ${#de} -gt 1 ]] && echo -en " - $de";
            echo;
        done;
    done
} 
```

有关 modprobe.d 语法的更多信息，请参阅`man 5 modprobe.d`。

此外，CIFS 挂载尊重一个`cache`选项。根据[mount.cifs 手册](http://linux.die.net/man/8/mount.cifs)，设置`cache=none`应该禁用缓存，而默认是`cache=strict`.

# java - Java 加密/解密从 PHP 到 Java 的数据，IllegalBlockSizeException

> ID：14920603
> 
> 赞同：2
> 
> 时间：2013-02-17T11:31:40.940
> 
> 标签：java, php, aes, encryption

我正在尝试从 PHP 中读取 base64 编码和 AES 128 位加密字符串，但我收到了 IllegalBlockSizeException。

PHP加密：

```
encrypt("My f awesome test !");

function encrypt($string){
    $td = mcrypt_module_open('rijndael-128', '', 'cbc', "1cc251f602cf49f2");

    mcrypt_generic_init($td, "f931c96c4a4e7e47", "1cc251f602cf49f2");
    $enc = mcrypt_generic($td, $string);

    mcrypt_generic_deinit($td);
    mcrypt_module_close($td);

    return base64_encode($enc);
} 
```

返回值为：

> McBeY73GQ5fawxIunVKpqUupipeRlt9ntyMRzjbPfTI=

现在我想用 Java 阅读它：

```
static public String decrypt(String data) throws Exception {
   data = new String( Base64.decode(data, Base64.NO_WRAP) );

   byte[] keyByte = "f931c96c4a4e7e47".getBytes("UTF-8");
   byte[] ivByte = "1cc251f602cf49f2".getBytes("UTF-8");

   Key key = new SecretKeySpec(keyByte, "AES");
   IvParameterSpec iv = new IvParameterSpec(ivByte);
   Cipher c = Cipher.getInstance("AES/CBC/NoPadding");
   c.init(Cipher.DECRYPT_MODE, key, iv);
   byte[] bval = c.doFinal( data.getBytes("UTF-8") );

   return new String( bval );
} 
```

我得到一个例外：

> javax.crypto.IllegalBlockSizeException：数据未对齐块大小

这可能是由填充引起的？

**编辑**

![在此处输入图像描述](../Images/6e9f0a74d785d72d4c4d1e9600aad759.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:27:22.147

您的错误是由明文与字符串之间的转换引起的。无论如何都没有必要 - 只需使用字节数组：

```
byte[] data = Base64
    .decodeBase64("McBeY73GQ5fawxIunVKpqUupipeRlt9ntyMRzjbPfTI=");
byte[] keyByte = "f931c96c4a4e7e47".getBytes("UTF-8");
byte[] ivByte = "1cc251f602cf49f2".getBytes("UTF-8");

Key key = new SecretKeySpec(keyByte, "AES");
IvParameterSpec iv = new IvParameterSpec(ivByte);
Cipher c = Cipher.getInstance("AES/CBC/NoPadding");
c.init(Cipher.DECRYPT_MODE, key, iv);
byte[] bval = c.doFinal(data);

System.out.println(new String(bval)); // Prints My f awesome test ! 
```

我建议您在加密中使用填充，否则您将无法处理任意大小的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:43:37.747

调用 doFinal() 时抛出的 IllegalBlockSizeException 如果：“密码是块密码，未请求填充（仅在加密模式下），并且此密码处理的数据的总输入长度不是块大小的倍数；或者如果此加密算法无法处理所提供的输入数据。” - [http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html#doFinal%28%29](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html#doFinal%28%29)。所以它要么是错误的输入数据，要么是块大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T00:51:20.430

这是加密/解密的工作版本

[https://github.com/chaudhuri-ab/CrossPlatformCiphers](https://github.com/chaudhuri-ab/CrossPlatformCiphers)

希望这对某人有所帮助，因为我花了一段时间来处理平台之间的小细节。

# windows - 无法在 Windows 7 上运行 IIS Express 8

> ID：14920605
> 
> 赞同：5
> 
> 时间：2013-02-17T11:31:52.893
> 
> 标签：windows, iis, iis-express

当我尝试 `iisexpress.exe /trace:error` 在 Windows 7 上使用以下命令运行 IIS Express 8 时，出现以下错误行：

```
"C:\Program Files (x86)\IIS Express>iisexpress.exe/trace:error
Starting IIS Express ...
Failed while trying to preload CLR version v4.0\.  hr = 80131700
Failed to initialize the W3WP_HOST  hr = 80131700
Process Model Shutdown called
Unable to start iisexpress." 
```

如何在我的 Windows 上运行 IIS？

# google-apps-script - CalendarEventSeries，缺少 setRecurrence() 方法？

> ID：14920613
> 
> 赞同：2
> 
> 时间：2013-02-17T11:33:49.350
> 
> 标签：google-apps-script

谷歌脚本文档状态 CalendarEventSeries 应该至少有**两个**方法`setRecurrence()`。当我尝试使用它时：

```
setRecurrence(new Date(), CalendarApp.newRecurrence().addYearlyRule().interval(1)); 
```

我收到此错误：

> 找不到方法（类）setRecurrence（对象，$Proxy754）。（第 60 行，文件“同步”）。

该方法肯定会被调用`CalendarEventSeries`。如何解决该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:01:45.087

您展示的示例适用于[全天事件](https://developers.google.com/apps-script/class_calendareventseries?hl=fr-FR#setRecurrence)（仅指定第一次发生的日期），您是应用于此类事件还是“正常”事件？

在最后一种情况下，您应该为第一次出现提供 2 个日期（开始和结束）。

上面的链接显示了非常清楚的文档......

这是一个“端到端”示例，展示了它是如何工作的，第一个函数创建一个从今天开始每年重复的事件，第二个函数将这个重复更改为每天，从今天开始......

它使用您的默认日历

```
function createTestSerie(){
  var cal = CalendarApp.getDefaultCalendar()
  if (cal) {
  var title = 'Test Event';
  var desc = 'Created using Google Apps Script';
  var loc = 'Here, there and everywhere...';
  var recur = CalendarApp.newRecurrence().addYearlyRule().interval(1)
  var start = new Date();
  var end = new Date(start.valueOf()+3600*1000);

  var event = cal.createEventSeries(title, start, end,recur,{description:desc,location:loc});// event will be every year and last 1 hour
  }   
}

function modifyRecurrence(){
  var cal = CalendarApp.getDefaultCalendar()
  if (cal) {
  var start = new Date();
  var end = new Date(start.getTime()+3600*1000*2);
  var events = cal.getEvents(new Date("February 16, 2013 08:00:00 PDT"), new Date("February 19, 2013 08:00:00 PDT"))
    for(i in events){
     if(events[i].getTitle()=='Test Event'){
       var recur = CalendarApp.newRecurrence().addDailyRule().interval(1)
       var eventId = events[i].getId()
       cal.getEventSeriesById(eventId).setRecurrence(recur, start, end);// now events will be lasting 2 hours evey day starting today
       }
   }
   }
} 
```

**根据您的评论进行编辑：** 它对 allDayEvents 的工作方式完全相同，这是一个修改后的示例代码：

```
function createAllDaySerie(){
  var cal = CalendarApp.getDefaultCalendar()
  if (cal) {
  var title = 'All Day Test Event';
  var start = new Date();
  var desc = 'Created using Google Apps Script';
  var loc = 'home';
  var recur = CalendarApp.newRecurrence().addYearlyRule().interval(4)
  var start = new Date();
  var event = cal.createAllDayEventSeries(title, start,recur,{description:desc,location:loc});// event will be every 4 years starting today
  }   
}

function modifyAllDayRecurrence(){
  var cal = CalendarApp.getDefaultCalendar()
  if (cal) {
  var start = new Date("February 19, 2010 08:00:00 PDT");// here you can choose any date you like that will be the new start date.
  var events = cal.getEvents(new Date("February 16, 2013 08:00:00 PDT"), new Date("February 22, 2013 08:00:00 PDT"))
    for(i in events){
     if(events[i].getTitle()=='All Day Test Event'){
       var recur = CalendarApp.newRecurrence().addYearlyRule().interval(1)
       var eventId = events[i].getId()
       cal.getEventSeriesById(eventId).setRecurrence(recur, start);// now events will occur once a year starting on february 19, 2010 (see screen capture below)
       }
   }
   }
} 
```

![在此处输入图像描述](../Images/886f5cd15f3959e2bc17cf9788a52d4b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:31:59.220

我们有我的问题的解决方案。API 文档中有一个错误。那里写着：

```
method setRecurrence(startDate, recurrence)
Changes the recurrence rules of this series to a new rule, and to an all day event. 
```

但实际上方法 setRecurrence() 将这些参数颠倒过来：

```
method setRecurrence(recurrence, startDate) 
```

非常感谢 Serge 的帮助，这很重要！不幸的是，没有声誉 15 我无法给你任何积分:(

# sql - 重新排序 SQL Server 数据库中的项目

> ID：14920614
> 
> 赞同：0
> 
> 时间：2013-02-17T11:33:56.660
> 
> 标签：sql, sql-server, algorithm, stored-procedures

在数据库中，我有一个带有两列（Position，CarName）的表汽车，例如：

```
1 | BMW
2 | Mercedes
3 | Honda
4 | Toyota 
```

可以修改表格，因此添加新行“Audi”应位于顶部并重新排序表格，如：

```
1 | Audi
2 | BMW
3 | Mercedes
4 | Honda
5 | Toyota 
```

删除“本田”后：

```
1 | BMW
2 | Mercedes
3 | Toyota 
```

将“Honda”行移至顶部（第 1 位）后：

```
1 | Honda
2 | BMW
3 | Mercedes
4 | Toyota 
```

将“BMW”移动到第二个位置后：

```
1 | Mercedes
2 | BMW
3 | Honda
4 | Toyota 
```

在 SQL Server 中最好和正确的方法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:37:43.123

订单数据存储在数据库表中完全取决于数据库引擎。你无法预测。

您可以更改的是数据在您的选择查询中返回给您之前的排序方式。您可以`order by`为此使用一个子句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T11:38:26.970

不要那样做——让 SQL Server 处理您的 Identity 列。如果您想要这样的东西，请使用以下 SQL 创建一个视图`ROW_NUMBER()`：

```
SELECT Row_Number() Over (Order By CarName) Rn, CarName
FROM YourTable
ORDER By CarName 
```

这是一个[SQL Fiddle](http://sqlfiddle.com/#!3/2fca5/1)演示。

希望这可以帮助。

# javascript - 为什么这会返回“未定义”？

> ID：14920616
> 
> 赞同：0
> 
> 时间：2013-02-17T11:34:02.507
> 
> 标签：javascript, macos, node.js, readline

我正在学习一些节点核心模块，并且我已经编写了一个小命令行工具来测试`readline`模块，但是在我的`console.log()`输出中，我也在`undefined`它下面收到：/

这是我的代码..

```
var rl = require('readline');

var prompts = rl.createInterface(process.stdin, process.stdout);

prompts.question("What is your favourite Star Wars movie? ", function (movie) {

    var message = '';

    if (movie = 1) {
        message = console.log("Really!!?!?? Episode" + movie + " ??!?!!?!?!, Jar Jar Binks was a total dick!");
    } else if (movie > 3) {
        message = console.log("They were great movies!");
    } else {
        message = console.log("Get out...");
    }

  console.log(message);

  prompts.close();
}); 
```

这就是我在控制台中看到的内容..

```
What is your favourite Star Wars movie? 1
Really!!?!?? Episode1 ??!?!!?!?!, Jar Jar Binks was a total dick!
undefined 
```

我为什么要回来`undefined`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T11:35:48.807

> 我为什么要回来`undefined`？

因为`console.log`没有返回值，所以你分配`undefined`给`message`.

由于您`message`稍后输出，只需`console.log`从您设置消息的行中删除调用。例如，改变

```
message = console.log("Really!!?!?? Episode" + movie + " ??!?!!?!?!, Jar Jar Binks was a total dick!"); 
```

到

```
message = "Really!!?!?? Episode" + movie + " ??!?!!?!?!, Jar Jar Binks was a total dick!"; 
```

* * *

旁注：你的线

```
if (movie = 1) { 
```

**将**数字分配`1`给`movie`然后测试结果 ( `1`) 以查看它是否真实。所以无论你输入什么，它总是会使用那个分支。你可能的意思是：

```
if (movie == 1) { 
```

...虽然我建议*不要*依赖用户提供的输入的隐式类型强制，所以我会把它放在回调的顶部附近：

```
movie = parseInt(movie, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:35:47.377

`console.log`不返回值，所以结果是`undefined`.

注意：比较是用 完成的`==`，例如：`movie == 1`。

# php - Preg_replace for /* ... */

> ID：14920619
> 
> 赞同：0
> 
> 时间：2013-02-17T11:34:37.523
> 
> 标签：php, preg-replace

我正在尝试为我的自定义模板系统创建一个结果 preg_replace 函数。

我尝试了以下方法：

```
// Outcomment
$pattern[] = "//*(.*?)/*/is";
$replace[] = "";

$content = preg_replace($pattern, $replace, $content); 
```

但我不确定我是否完全理解 preg_replace 的工作方式。

我正在尝试这样做，以便删除`/*`和之间的所有内容。`*/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:44:36.117

试试这个：

```
$str = "Hello my name /* some comment */ is PHP /* and this comment*/ " ;       
$clean = preg_replace("/\/\*(.*?)\*\//", "", $str) ;

echo $clean ; //Outputs Hello my name is PHP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:41:45.327

首先，即使不考虑转义，你`/*`在表达式的两端都有，所以最后的那个是错误的。

其次，`/`和`*`都是正则表达式的特殊字符，需要用前面的反斜杠进行转义。

所以你的表达最终会是这样的：

```
"/\/\*(.*?)\*\//is" 
```

希望有帮助。

最后，请注意，如果您的评论被允许嵌套，则此表达式将失败——即评论中的评论。这将使匹配变得更加困难*。*

# iphone - 二进制表达式（'double'和'double'）objective-c问题的无效操作数

> ID：14920621
> 
> 赞同：-4
> 
> 时间：2013-02-17T11:35:03.890
> 
> 标签：iphone, ios, objective-c

二进制表达式（'double'和'double'）objective-c问题的无效操作数

```
-(double)performOperationWith:(double *)operand1 
                         And:(double *)operand2 {

    double result = 0.0;

    result = operand1 + operand2;

    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T11:38:15.457

它们是指针，因此您应该取消引用它们：

```
result = *operand1 + *operand2; 
```

或者更改函数参数：

```
-(double)performOperationWith:(double )operand1 And:(double )operand2 {...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T11:38:06.297

只需删除`*`：

```
-(double)performOperationWith:(double)operand1  And:(double)operand2 {
    double result = 0.0;
    result = operand1 + operand2;
    return result;
} 
```

# vb.net - Powerpoint 修改图表图例宽度

> ID：14920626
> 
> 赞同：2
> 
> 时间：2013-02-17T11:35:37.350
> 
> 标签：vb.net, excel, interop, powerpoint

我正在使用 VB.net 在 Powerpoint 中创建图表并且有一个小问题：客户希望图例大于原始设计。这对互操作有可能吗？

我有一个基本上这样的结构：

```
Dim TargetChartas Microsoft.Office.Interop.PowerPoint.Chart
TargetChart.HasLegend=true

With TargetChart.Legend
                .Position = Microsoft.Office.Interop.PowerPoint.XlLegendPosition.xlLegendPositionTop
                .Format.TextFrame2.TextRange.Font.Bold = Microsoft.Office.Core.MsoTriState.msoCTrue
                .Format.Line.Visible = Microsoft.Office.Core.MsoTriState.msoCTrue
End Width 
```

但我找不到宽度属性——就像任何正常的形状一样。

你有任何想法如何做到这一点？

我添加了 excel 标签，因为图表基本上是 excel 图表。

Argh：我需要更多的茶。我刚刚意识到 Office 2010 有一个 width 属性，而 2007 没有。所以我只需要检查PowerPoint版本......哦，快乐......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:17:14.767

Powerpoint 2010 及更高版本有一个 width 属性，所以它在那里工作。width 和 left 属性有些奇怪，它们似乎与图表有关。所以期待一些实验。

如果您必须支持 Office 2007，您可以查看应用程序版本：Chart.application.version 14.0 是 Office 2010。我将其转换为数字并检查它是否大于 14。

# xaml - ListViewItems 动画不再起作用

> ID：14920628
> 
> 赞同：1
> 
> 时间：2013-02-17T11:35:42.700
> 
> 标签：xaml, listview, animation, windows-runtime

在使用 Picker 选择一些图片后，我的 XAML 中有一个 ListView，其中包含多个缩略图。我的问题是，我已经更改了下面的项目面板模板，现在添加删除项目的动画根本不起作用。这些项目只是弹出或消失......

这是我的 ListView 的样子：

```
<ListView x:Name="ThumbnailsListView"
          ItemTemplate="{StaticResource ImageTemplate}"
          ItemsSource="{Binding Images}"
          SelectionMode="Multiple"
          SelectionChanged="OnThumbnailsSelectionChanged">
          <ListView.ItemsPanel>
              <ItemsPanelTemplate>
                  <WrapGrid Orientation="Horizontal" >
                      <WrapGrid.ChildrenTransitions>
                          <TransitionCollection>
                              <ContentThemeTransition/>
                          </TransitionCollection>
                       </WrapGrid.ChildrenTransitions>
                   </WrapGrid>
              </ItemsPanelTemplate>
          </ListView.ItemsPanel>
</ListView> 
```

有什么问题？如果我用`ItemsPanelTemplate`动画剪掉部分是可以的，但视觉效果不是我们想要的。我希望这些项目水平填充面板，然后继续下一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:30:00.063

您需要在您的`ChildrenTransitions`集合中获得其他转换，例如`AddDeleteThemeTransition`.

# css - 如何：身高儿童给予相同身高父母......？

> ID：14920632
> 
> 赞同：1
> 
> 时间：2013-02-17T11:35:51.587
> 
> 标签：css

怎么做才能使 nav 的高度与 nav li a ... 的高度（填充）相同！？

```
nav {
    width: 100%;
}
nav ul {
    text-align: center;
    background-color: #000;
}
nav ul li {
    display: inline;
    margin-right: 0.8em;
    font-family:"courier new"; courier; sans-serif;
    font-size: 1.4em;
}
nav ul li a {
    outline: none;
    color: #fff;
    text-decoration: none;
    padding: 1em 0.5em;
}
nav ul li a:hover {
    outline: none;
    text-decoration:none;
    background-color: #bf2e1f;
} 
```

小提琴 > [http://jsfiddle.net/redfox52/HbrkA/](http://jsfiddle.net/redfox52/HbrkA/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:51:33.320

链接上的顶部/底部填充应为 0：

```
padding: 0 0.5em 
```

如果要为链接添加填充，请将它们设为块元素（[示例](http://jsfiddle.net/4NvDf/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:56:04.677

哎呀，当然...

导航{溢出：自动；}

`a`也可以解决问题... ...高度将遵循哪种填充（也是填充底部）`nav`... :)

谢谢大家帮助我！

# vim - xterm 中的光标颜色；相应地改变vim中的语法

> ID：14920634
> 
> 赞同：2
> 
> 时间：2013-02-17T11:36:04.077
> 
> 标签：vim, syntax, xterm

在 gnome-terminal 和 konsole 中，我的光标颜色会根据 vim 中选择的前景色而变化（如果我在红色文本上，我的光标是红色的）。在 xterm 中，我的光标始终是白色的。如何将 xterm 设置为与 gnome-terminal 或 konsole 相同的行为？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-01T23:53:09.540

实际上，xterm 的[手册](http://invisible-island.net/xterm/manpage/xterm.html)并没有那么简单，也没有适合这个特性的教程。引用手册：

> **cursorColor**（类**CursorColor**）
> 
> 指定用于文本光标的颜色。默认值为“XtDefaultForeground”。默认情况下，xterm 尝试保持此颜色与背景颜色不同，因为它通过填充文本单元格的背景来绘制光标。相同的限制适用于可能改变此颜色的控制序列。
> 
> 设置此资源会覆​​盖 xterm 对光标颜色的大部分调整。它仍然会使用反向视频来禁止某些情况，例如黑色背景上的黑色光标。

此外，可以特殊处理突出显示（引用命令行选项的描述）；

> **`-hm`**
> 
> 告诉 xterm 使用 highlightTextColor 和 highlightColor 覆盖选择中反转的前景色/背景色。它将 highlightColorMode 资源设置为“true”。

这暗示了几个案例：

*   可以使用命令行选项或资源*设置光标颜色。*如果以这种方式设置（除非被*动态颜色*转义序列覆盖以更改颜色），xterm 使用此颜色。
*   如果它不受约束，xterm 会尝试通过使用由“ANSI”控制序列为颜色 0-7 设置的前景色和背景色的相反颜色以及用于颜色 8-255 的非 ANSI 控件来保持光标可见。
*   有时，应用程序会将前景色和背景色设置为相同的值（xterm 也会尝试为这种情况选择合适的光标颜色）。
*   颜色可以单独设置以突出显示。

现在... xterm 基本上通过选择反转前景与背景的颜色使光标可见（除非被覆盖）。Gnome-terminal 做了类似的事情，但不是真的：它从调色板中选择相反的项目，这可以（现在阅读一个例子）使光标不那么明显，因为它使用的调色板不那么发光。（特别是，我注意到黄色文本的“反面”变成了暗橙色）。Konsole 的调色板通常提供更差的可见性（尽管黄色像 xterm 一样反转，红色文本在黑色背景下不明显）。

XTerm：

[![在此处输入图像描述](../Images/aca656a7d48082d8787a686e3afd2f18.png)](https://i.stack.imgur.com/1ApuR.png)

侏儒终端：

[![在此处输入图像描述](../Images/dd26d1b0c4b938b2a826fd6f258f71b9.png)](https://i.stack.imgur.com/nV5Fe.png)

康索莱

[![在此处输入图像描述](../Images/4a424e5a1697b0b0eacf53b40e28fa22.png)](https://i.stack.imgur.com/QKlk3.png)

简而言之：听起来好像 OP 的 xterm 配置为将光标颜色设置为特定值，而解决方法是消除该设置。但是文本上光标的外观*会*有所不同，除非对配置颜色（对于所有三个终端）给予一些注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-24T20:42:32.147

为确保光标颜色始终为前景颜色，请`.Xresources`为您自己或`/etc/X11/app-defaults/XTerm`整台机器添加此颜色。第二个位置可能因操作系统而异。

```
xterm*cursorColor:      *XtDefaultForeground 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T02:02:17.417

根据[Xterm Control Sequences](https://invisible-island.net/xterm/ctlseqs/ctlseqs.html)，您可以使用`Control Sequence Introducer`and `Operating System Command`, `CSI`/`OSC`简称。

有趣`OSC`：

```
OSC Ps ; Pt BEL
...
Ps = 1 2 ⇒  Change text cursor color to Pt. 
```

使用它`OSC`，我们可以将文本光标更改为任何所需的颜色，它接受颜色名称，例如`red`等`green`或类似的东西：`rgb:RR/GG/BB`请参阅[XParseColor](https://linux.die.net/man/3/xparsecolor)

有趣`CSI`：

```
CSI Ps SP q
          Set cursor style (DECSCUSR), VT520.
            Ps = 0  ⇒  blinking block.
            Ps = 1  ⇒  blinking block (default).
            Ps = 2  ⇒  steady block.
            Ps = 3  ⇒  blinking underline.
            Ps = 4  ⇒  steady underline.
            Ps = 5  ⇒  blinking bar, xterm.
            Ps = 6  ⇒  steady bar, xterm. 
```

现在使用 vim`t_SI`和`t_EI`这些`CSI`/`OSC`我们可以做这样的事情：

```
let &t_SI="\<Esc>[5 q\<Esc>]12;" . rgb_or_name_color . "\x7"
let &t_EI="\<Esc>[5 q\<Esc>]12;" . rgb_or_name_color_for_not_insert_mode . "\x7" 
```

这是一个函数，它解析当前配色方案`Cursor`和`Type` **hi**组的`guifg`（有用的`set termguicolors`）/`ctermfg`颜色，然后根据这些颜色设置`t_SI`和：`t_EI`

```
fun! UpdateTermCursor()
  if &term =~ "xterm\\|rxvt"
    fun! s:cologet(gr) 
      let cc = execute('hi ' . a:gr)
      let color = matchstr(cc, 'guifg=\zs[^ ]*')
      if color == 'bg'
        let color = matchstr(cc, 'guibg=\zs[^ ]*')
      endif
      if color == ''
        let color = matchstr(cc, 'ctermfg=\zs[^ ]*')
      endif
      if color[0] == '#'
        let color = 'rgb:' . substitute(color[1:-1], '..', '\0\/', 'g')[0:-2]
      endif
      return color
    endfun
    let cur = s:cologet('Cursor') 
    " You can change group, for example CursorLineNr, Special, NonText etc.
    let curb = s:cologet('Type')
    let &t_SI="\<Esc>[5 q\<Esc>]12;" . curb . "\x7"
    let &t_EI="\<Esc>[1 q\<Esc>]12;" . cur . "\x7"
    " Redraw 
    :call feedkeys("i\<C-O>:stopinsert\<CR>")
    " silent! exe ':redraw!'
    " :call feedkeys("i\<Esc>l")
    " Restore cursor to I when leaving vim
    augroup TermCursorLeave
      autocmd!
      autocmd VimLeave * silent !echo -ne "\e[5 q"
    augroup END
  endif
endfun 
```

使用更改颜色方案后`:colorscheme`，执行`:call UpdateTermCursor()`，这里是示例：

![vim 术语光标颜色](../Images/3c79d1b8db5ae6a18d97e99a963e64a3.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-13T08:01:49.260

根据 Xterm 的[手册](http://invisible-island.net/xterm/manpage/xterm.html)，它会自动高亮文本光标。Gnome-terminal 继承了 Xterm 的这一特性，这就是 vim 中光标颜色变化的原因。

在我的例子中，xterm 在光标高亮方面与 gnome-terminal 的工作方式相同。

您使用的是真正的 xterm，所以只是将 $TERM 设置为“xterm”的其他术语？

# ruby-on-rails-3 - 单一路由服务参数 :object_id 而不是 :id

> ID：14920636
> 
> 赞同：1
> 
> 时间：2013-02-17T11:36:17.150
> 
> 标签：ruby-on-rails-3, rails-routing

假设我有一个名为发票的对象。在`routes.rb`我有

```
resources :invoices do
  get "pay"
end 
```

当我跑步`rake routes`时，路线生成为

```
invoice_pay GET    /invoices/:invoice_id/pay(.:format) invoices#pay 
```

并且参数是`:invoices_id`而不是`:id`

如果我使用匹配语句：

```
match "invoices/:id/pay" => "invoices#pay", :via => :get 
```

我得到：

```
 GET    /invoices/:id/pay(.:format)         invoices#pay 
```

在我看来，路线应该是`pay_invoice_path(@invoice)`，但是，我还没有找到合适的文档。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:12:25.060

我想你想做的是

```
resources :invoices do
  get "pay", :on => :member
end 
```

看看指南： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# java - 设置gisgraphy地理编码器的问题

> ID：14920639
> 
> 赞同：1
> 
> 时间：2013-02-17T11:37:34.110
> 
> 标签：java, solr, geocoding, reverse-geocoding

我正在使用 Gisgraphy 构建离线地理编码器。我正在使用他们网站[http://www.gisgraphy.com/documentation/installation/index.htm](http://www.gisgraphy.com/documentation/installation/index.htm)上的说明。我遵循了所有步骤，但遇到了这些问题。“附加错误日志”。

> [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 15 日 17:21:24,795]（main，）：normalize_text 函数产生异常：我们认为该函数未创建：org.springframework.jdbc .UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 15 日 17:21： 24,806] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository. DatabaseHelper] [2013 年 2 月 15 日 17:21:24,807]（主）：将创建 normalize_text 函数 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 16 日 17:52:04,415]（主）： normalize_text 函数产生异常：我们认为该函数未创建：org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Cannot open connection; SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 17:52： 04,444]（主要，）：normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 17:52:04,444] (main,) ：将创建 normalize_text 函数 [INFO] [com.gisgraphy .domain.repository.DatabaseHelper] [2013 年 2 月 16 日 18:01:37,016]（主要，）：normalize_text 函数产生了异常：我们认为该函数未创建：org.springframework.jdbc.UncategorizedSQLException：休眠操作：不能打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com. gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 18:01:37,019] (main,) ： normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2 月 16 日2013 18:01:37,019] (main,) : 将创建 normalize_text 函数 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 16 日 21:00:07,242] (main,) : normalize_text 函数已生成异常：我们认为该函数未创建：org.springframework.jdbc.UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 21:00:07,245]（主要，）：normalize_text 不存在，尝试创建它 [INFO ] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 21:00:07,245] (main,) : 将创建 normalize_text 函数 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 16 日 21 ：02：13,228]（main，）：normalize_text函数产生异常：我们认为该函数未创建：org.springframework.jdbc.UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache。commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 21:02:13,231]（主要，）： normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 21:02:13,231] (main,) ：将创建 normalize_text 函数 [INFO] [com.gisgraphy .domain.repository.DatabaseHelper] [2013 年 2 月 16 日 21:03:04,803]（main，）：normalize_text 函数产生了异常：我们认为该函数未创建：org.springframework.jdbc.UncategorizedSQLException：休眠操作：不能打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码认证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 21:03： 04,806] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 21:03:04,807] (main,) : 将创建 normalize_text 函数[INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 21:03:56,037]（main，）：normalize_text 函数产生异常：我们认为该函数未创建：org.springframework.jdbc .UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 21:03： 56,040] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 21:03:56,040] (main,) : 将创建 normalize_text 函数[INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 16 日 21:41:57,801]（main，）：normalize_text 函数产生异常：我们认为该函数未创建：org.springframework.jdbc .UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 21:41： 57,803] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 21:41:57,804] (main,) : 将创建 normalize_text 函数[INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 16 日 22:37:28,677]（主要，）：normalize_text 函数产生了异常：我们认为该函数未创建：org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Cannot open connection; SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 22:37： 28,681] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 22:37:28,681] (main,) : 将创建 normalize_text 函数[信息] [com.gisgraphy.domain.repository。DatabaseHelper] [2013 年 2 月 16 日 22:54:51,368]（main，）：normalize_text 函数产生了异常：我们认为该函数未创建：org.springframework.jdbc.UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 22:54： 51,402] (main,) ： normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 22:54:51,404] (main,) ：将创建 normalize_text 函数 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 16 日 22:56:42,733] (main,)：normalize_text 函数产生异常：我们认为该函数未创建：org .springframework.jdbc.UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 22:56： 42,736] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com. gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 16 日 22:56:42,737] (main,) ：将创建 normalize_text 函数 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 16 日 23:04:54,523 ] (main,) : normalize_text function has generate an exception: 我们认为该函数没有创建：org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Cannot open connection; SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 16 日 23:04： 54, 527] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [16 Feb 2013 23:04:54,528] (main,) : 将创建 normalize_text 函数[INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 17 日 15:40:14,049]（main，）：normalize_text 函数产生异常：我们认为该函数未创建：org.springframework.jdbc .UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败 ) [错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 17 日 15:40:14,090] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain. repository.DatabaseHelper] [2013 年 2 月 17 日 15:40:14,090]（主）：将创建 normalize_text 函数 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 17 日 15:40:55,009]（主， ) : normalize_text 函数产生异常: 我们认为该函数没有创建: org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Cannot open connection; SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 17 日 15:40:55,012]（主要，）：normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [2013 年 2 月 17 日 15:40:55,013] (main,) ：将创建 normalize_text 函数 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper ] [2013 年 2 月 17 日 16:26:34,452]（main，）：normalize_text 函数产生了异常：我们认为该函数未创建：org.springframework.jdbc.UncategorizedSQLException：休眠操作：无法打开连接；SQL [???] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；无法创建 PoolableConnectionFactory（致命：用户的密码验证失败“ 无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码验证失败）；嵌套异常是 org.apache.commons.dbcp.SQLNestedException：无法创建 PoolableConnectionFactory（致命：用户“postgres”的密码身份验证失败）[错误] [com.gisgraphy.domain.repository.DatabaseInitializer] [2013 年 2 月 17 日 16:31： 32,450] (main,) : normalize_text 不存在，尝试创建它 [INFO] [com.gisgraphy.domain.repository.DatabaseHelper] [17 Feb 2013 16:31:32,451] (main,) : 将创建 normalize_text 函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:38:36.143

您的 jdbc.properties 文件中可能包含错误字符。转到 Windows 中的命令行并点击“type jdbc.properties”，确认您没有错位的换行符或空格等。我遇到了这个确切的问题，并且修复了它。

# java - 当第一个列表项无法访问时，GC 是否会收集链表？

> ID：14920642
> 
> 赞同：0
> 
> 时间：2013-02-17T11:38:02.050
> 
> 标签：java, android, garbage-collection, linked-list

我有一个[双向链接](http://en.wikipedia.org/wiki/Doubly_linked_list)的对象列表：

```
class MyObject {
  MyObject previousObject;
  MyObject nextObject;

  // Other fields and methods
} 
```

只有这样一个列表的*第一个*对象直接存储在应用程序中，其他对象通过这个第一个对象到达并在应用程序中临时使用（但没有永久引用保留在列表本身之外）。

当一个对象不再引用时，它会被垃圾收集器收集。

但是，我想知道是否仍然如此，因为（第一个）对象仍然被链接列表中的“下一个对象”引用？那么列表的其余部分呢，这些对象是否也被收集（即使被彼此引用）？

注意：我知道当我不再使用它时，我可以删除列表中的所有引用。但由于应用程序的性质，这很“困难”，并导致额外的（不必要的？）开销。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T11:40:31.460

GC 不使用引用计数，因此可以很好地处理循环依赖。您无需执行任何操作，当列表中的任何元素都无法访问时，整个列表将被垃圾回收。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:43:39.670

如果链接列表中的所有对象都没有连接到任何活动根，则将收集整个列表。请参阅[根是什么？](https://stackoverflow.com/questions/6366211/what-are-the-roots)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T11:47:40.833

关键点是 GC 的第一次扫描收集对所有**可达****对象*的***引用。然后它会**丢弃其他所有内容**。通过这种方式，它可以处理循环引用和巨大的自引用结构，如树，而无需额外的工作。

显然它比这复杂得多。

不过有趣的是-在您的情况下，列表中的第一项无法访问，但此外，如果第三项**可以**访问，那么如果它是`LinkedList`前两项，则将被丢弃。但是，以前的`ArrayList`元素可能会保留。

# javascript - 用jquery附加输入框，不遵守maxlength属性？

> ID：14920643
> 
> 赞同：0
> 
> 时间：2013-02-17T11:38:02.507
> 
> 标签：javascript, jquery, html, forms, validation

以下代码创建了一个我可以通过调试器查看的 maxLength 属性，但它实际上并没有将数据限制为长度？

```
var myRow = '<tr><td></td><td><input maxlength="128" class="myClass" type="text" name="myData[' + i + ']" /></td></tr>';

 $('#myTable tr:last').after(myRow); 
```

# cocoa - 添加 OCMock 后，单元测试总是“成功”

> ID：14920645
> 
> 赞同：5
> 
> 时间：2013-02-17T11:38:12.913
> 
> 标签：cocoa, unit-testing, frameworks, ocmock, sentestingkit

我想在我的 Cocoa 项目的单元测试中使用 OCMock。我已经下载了最新版本的 OCMock (2.0.1) 并将*OCMock.framework*复制到我的项目目录中。在 Xcode 中，我已将框架添加到单元测试目标的*链接*阶段。然后我添加了一些使用 OCMock 类的代码。

从那时起，所有单元测试都报告为“成功”——绿灯，没有错误或警告。即使在引入`STFail`调用之后，Xcode 仍声称“测试成功”。在任意测试方法中放置断点表明它们都没有被执行。

如果我使用 OCMock 注释掉代码，包括`import`指令，问题仍然存在。

`STFails`当我从链接阶段删除 OCMock 时，问题消失了 - 即，开始再次失败。

这类似于我之前问过的[另一个问题](https://stackoverflow.com/questions/11842417/unit-tests-always-successful)，但不完全相同：在这种情况下，日志导航器中的信息显示没有错误。什么可能导致这种行为？我可以做些什么来诊断这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:25:10.417

事实证明我[错过了框架的*复制文件*构建阶段](http://www.mulle-kybernetik.com/forum/viewtopic.php?f=4&t=271&sid=f524a0ce592892cbfb8fb9ae421add1c)，这显然可能导致[各种问题](https://stackoverflow.com/questions/14760435/adding-ocmock-causes-test-to-launch-main-app-instead-of-running-tests)。

这对我有用：

1.  将*Copy Files*阶段添加到单元测试目标的构建阶段。我将它定位在*运行脚本*阶段之前，使其成为倒数第二个。
2.  将*OCMock.framework*项从项目导航器拖到阶段以添加它；使用按钮添加它`+`在 Xcode 4.6 中不起作用（可能是因为框架是目录？）。
3.  将阶段的目标设置为“框架”。
4.  在单元测试目标的构建设置中，查找*Runpath Search Paths*并添加条目`@loader_path/../Frameworks`。

这样，单元测试可执行文件将能够在运行时找到框架。请注意，您还可以使用“产品目录”作为*复制文件*阶段的目标，在这种情况下，您可以跳过第四步。

# r - 广义帕累托分布 MLE R 代码

> ID：14920648
> 
> 赞同：1
> 
> 时间：2013-02-17T11:38:33.507
> 
> 标签：r, statistics

我编写了一个函数来计算广义帕累托分布的 MLE 估计值。当我将它与任何数据一起使用时，虽然我遇到了这样的错误

```
1: In log(beta * ksi) : NaNs produced
2: In nlm(loglik, theta, stepmax = 5000, iterlim = 1000) :
  NA/Inf replaced by maximum positive value 
```

我想知道是否有人可以发现我的代码有任何错误？

```
MLGPD<-function(data){
    xi0 <- 1
    beta0 <- 360
    theta <- c(xi0, beta0)
    excess <- data
    assign("tmp", excess)
    loglik <- function(theta){
        ksi <- theta[1]
        beta <- theta[2]
        y <- ((tmp - 0.1)/beta)
        f <- ((1/ksi)+1)*sum(log(1+y)) + length(tmp) * log(beta*ksi)
        f
    }
    fit <- nlm(loglik, theta, stepmax = 5000, iterlim= 1000)
    return(fit)
    par.ests <- fit$x
    return(par.ests)
}

#Checking our MLE algorithm works:

rgpd<-function(n,ksi, beta){
    10000+beta*(((1-runif(n, min=0, max=1))^-ksi)-1)
}

rgpd1 <- rgpd(100, 1, 2.5)

MLGPD(rgpd1) 
```

谢谢！

# c# - EF5 多对多连接表流式 API

> ID：14920649
> 
> 赞同：1
> 
> 时间：2013-02-17T11:38:35.250
> 
> 标签：c#, many-to-many, entity-framework-5, poco

我是否必须创建一个 POCO 类来表示多对多关系中的连接表？

这是我的场景：

```
public class Event 
{
    public int EventId { get; set; }
    public int OrganizerId { get; set; }
}

public class Person 
{
    public int PersonId { get; set; }
    ICollection<Event> Events { get; set; }
}

public class Company 
{
    public int CompanyId { get; set; }
    ICollection<Event> Events { get; set; }
} 
```

一个人或一个公司都可以组织一个活动，我想创建一个像这样的连接表

```
Table Events_People
PersonId
OrganizerId

Table Events_Companies
CompanyId
OrganizerId 
```

我知道如果我创建两个 POCO 类应该很容易做到，比如

```
public class EventPerson
{
    public int EventId { get; set; }
    public Person PersonId { get; set; }
} 
```

比使用 Fluent API 之类的

```
modelBuilder.Entity<Person>()
// PK
.HasKey(e => e.PersonId)
// FK
.HasMany(e => e.Events)
.WithRequired(e => e.PersonId); 
```

有没有办法避免两个 POCO 并直接告诉 API 创建连接表？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:32:50.860

您可以使用 EF yes 进行多对多操作。更大的问题是这是个好主意。例如，如果您这样做并且您需要或想要这样做，您可能会发现您遇到了级联删除问题。如果您最终与同一实体有 2 个必需的关系（不一定是您的特定示例代码）但更普遍地与您的问题匹配，那么除非您使用 WillCascadeOnDelete(false)，否则您可能会收到 EF 编译/运行时错误。以防万一人们认为，因此您可以这样做。当心。：-）

**但是你问你能告诉 EF 创建一个 Join**

您没有看到 EF 生成的连接表吗？我早就料到了。我很好奇为什么不。

您可以显式管理它：

```
HasMany(t => t.NavigationProperty1)
.WithMany(a => a.ReverseNavigationProperty)
.Map(c => c.ToTable("TheJoinTable"));

// rename keys as required, may not be required...
c.MapLeftKey("ColumnKeyName");
c.MapRightKey("ABetterName2"); 
```

顺便说一句，您建议的示例正是解决某些 CascadeOnDelete 问题所需的模式。

# mysql - MySQL：将两行合二为一

> ID：14920650
> 
> 赞同：2
> 
> 时间：2013-02-17T11:38:37.493
> 
> 标签：mysql, sql

用户表：

```
id  |   win  |   lose
0   |   1    |   2
1   |   2    |   8 
```

游戏桌：

```
id  |  user1  |  user2  |  data
0   |  0      |  1      |  'some text' 
```

DB 用于简单的多人游戏。我需要一个查询来获取**两个用户的用户 2、数据和输赢数据**。这在 MySQL 中可能吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T11:40:10.607

你必须两次这样`JOIN`的桌子：`users`

```
SELECT
  u1.win  AS win1,
  u1.lose AS lose1,
  u2.win  AS win2,
  u2.lose AS lose2,
  ...
FROM games g
INNER JOIN users u1 ON g.user1 = u1.id
INNER JOIN users u2 ON g.user2 = u2.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:46:17.327

您可以加入`users`表两次：

```
SELECT
    games.user2 AS user2_id
    games.data AS games_data
    user1.win AS user1_win,
    user1.lose AS user1_lose,
    user2.win AS user2_win,
    user2.lose AS user2_lose
FROM games
JOIN users AS user1 ON user1.id = games.user1
JOIN users AS user2 ON user2.id = games.user2
WHERE games.id = ... 
```

# javascript - 动态注入javascript并使用它

> ID：14920651
> 
> 赞同：0
> 
> 时间：2013-02-17T11:38:40.677
> 
> 标签：javascript

我还动态创建了一个使用这些变量的 javascript 文件：

```
 function callbackF(data){
          console.log(data.script);

          document.getElementsByTagName('head')[0].innerHTML=data.script;

        var script = document.createElement("script");
    script.setAttribute("src", "http://widget.example.com/sprk.1.0.2.js");
    script.setAttribute("type", "text/javascript");
    script.setAttribute("id", "grazit_script");
    document.getElementsByTagName('head')[0].appendChild(script);
        } 
```

这就是我的想法：

这是打印到控制台日志的内容：

```
<script type='text/javascript'>var dbnwid=16476; var dbnpid=23369; var dbnwebid=19720; var dbnlayout=21; var dbncolor='#000000'; var dbntitlefontsize='14'; var dbnbgcolortype=1; var dbnheader='You might enjoy reading:'; var dbnremindercolor=2; var dbn_protocol = (('https:' == document.location.protocol) ? 'https://' : 'http://'); </script> 
```

然后是脚本：

```
<script src="http://widget.example.com/sprk.1.0.2.js" type="text/javascript" id="grazit_script"></script> 
```

第二个脚本应该获取第二个脚本中的变量..但它没有..然后它抱怨为什么它没有得到这些变量

> 更新：以下两种方式都对我不起作用：

```
 eval(data.script);
           var ss= new Function(data.script)(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:46:37.540

因为脚本在加载时运行。添加`script`标签 using`innerHTML`不会运行标签内的代码。

# wordpress - Wordpress 博客缺少样式

> ID：14920652
> 
> 赞同：0
> 
> 时间：2013-02-17T11:38:42.820
> 
> 标签：wordpress

我有一个位于[http://air2airheatpumps.co.uk/wordpress](http://air2airheatpumps.co.uk/wordpress)的博客（请注意缺少 www。）

我已经通过 123 reg 控制面板安装了 wordpress，你会看到由于某种原因它缺少所有相关的样式，我检查了文件权限，重新上传了主题等，但由于某种原因它不会设置样式。数据库中的site_url 也是正确的。

我还使用 chrome 的检查器来检查任何错误，但看不到任何明显的东西。

有任何想法吗？

谢谢

马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:30:28.493

这些是处理此类问题时的一些一般准则：

*   使用浏览器的开发工具（Firebug、IE 开发工具栏或 Chrome 开发工具）检查最明显的错误（如错误的文件名）。没有理由不使用它们。
*   开发人员工具很可能会突出显示无法加载的文件。大多数情况下，这是由于 URL 不正确（如文件名拼写错误）造成的。
*   文件的`Content-Type`必须正确，否则浏览器可能会忽略文件的内容：
    *   `text/css`对于 CSS 文件
    *   `application/javascript`（文本/javascript 显然[已过时](https://stackoverflow.com/a/9664327/855532)）
*   使用开发人员工具检查服务器向浏览器发送的内容。
    *   例如，如果在加载 .css 文件时发送 HTML 代码，则可能存在将所有内容重定向到 .css 文件的重写规则`index.php`。

# c - zmq 中的订阅者信息

> ID：14920655
> 
> 赞同：0
> 
> 时间：2013-02-17T11:38:52.010
> 
> 标签：c, publish-subscribe, zeromq

我有一个简单的 ZMQ 3.2 发布者，它发送消息，并且有 N 个订阅者连接和断开与该发布者的连接。

发布者是否可以通过任何方式获得连接到它的订阅者的详细信息（IP、名称、类型...等）？

# android - 论据不适用

> ID：14920656
> 
> 赞同：0
> 
> 时间：2013-02-17T11:38:54.867
> 
> 标签：android, arguments

我的 DataDisplay.java 中有这一行来显示数据库中的数据，我将它显示到 TextView 中。但它有这个错误说“DBAdaptor 类型的方法 getAllDeals 不适用于参数（TextView、TextView、TextView、TextView、TextView、TextView、TableRow”。有人能解释一下为什么吗？

```
dbAdaptor.getAllDeals(idView, shopView, dealView, locationView, websiteView, categoryView, row ); 
```

这是我在 DBAdaptor 中的 getAllDeals 部分

```
public Cursor getAllDeals()
{
    return db.query(DATABASE_TABLE, new String [] {KEY_SHOP, KEY_DEAL, KEY_LOCATION, KEY_WEBSITE, 
            KEY_CATEGORY}, null, null, null, null, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:55:46.343

您需要将 db 适配器中的方法声明更改为：

```
getAllDeals(idView, shopView, dealView, locationView, websiteView, categoryView, row ); 
```

在您的情况下，方法声明和方法调用具有不同的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:41:31.617

您的方法没有任何参数。

从

```
public Cursor getAllDeals() 
```

至

```
public Cursor getAllDeals(TextView idView, TextView shopView, etc ...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:41:09.740

您需要在`getAllDeals()`函数中接受这些参数

# r - 使用 gridExtra 排列多个绘图

> ID：14920662
> 
> 赞同：7
> 
> 时间：2013-02-17T11:40:09.837
> 
> 标签：r, ggplot2, gridextra

我花了很多时间试图在一个图中拟合 11 个图表并使用它们进行排列，`gridExtra`但我失败了，所以我求助于你，希望你能提供帮助。

我有 11 种钻石分类（称它为）和`size1`其他 11 种分类（同一张图。我尝试按照其他帖子中的建议使用，但图例离右边很远，所有图表都向左挤压，你能帮我弄清楚必须如何指定图例的“宽度”吗？我找不到任何好的解释。非常感谢您的帮助，我真的很感激...`size2``size1``clarity``size2``gridExtra``gridExtra`

我一直试图找到一个很好的例子来重新创建我的数据框，但也失败了。我希望这个数据框有助于理解我正在尝试做的事情，我无法让它工作并且与我的相同，并且有些地块没有足够的数据，但重要的部分是使用图表的配置`gridExtra`（虽然如果您对其他部分有其他意见，请告诉我）：

```
library(ggplot2)
library(gridExtra)

df <- data.frame(price=matrix(sample(1:1000, 100, replace = TRUE), ncol = 1))

df$size1 = 1:nrow(df)
df$size1 = cut(df$size1, breaks=11)
df=df[sample(nrow(df)),]
df$size2 = 1:nrow(df)
df$size2 = cut(df$size2, breaks=11)
df=df[sample(nrow(df)),]
df$clarity = 1:nrow(df)
df$clarity = cut(df$clarity, breaks=6)

# Create one graph for each size1, plotting the median price vs. the size2 by clarity:
for (c in 1:length(table(df$size1))) {

  mydf = df[df$size1==names(table(df$size1))[c],]
  mydf = aggregate(mydf$price, by=list(mydf$size2, mydf$clarity),median);   
  names(mydf)[1] = 'size2'
  names(mydf)[2] = 'clarity'
  names(mydf)[3] = 'median_price'

  assign(paste("p", c, sep=""), qplot(data=mydf, x=as.numeric(mydf$size2), y=mydf$median_price, group=as.factor(mydf$clarity), geom="line", colour=as.factor(mydf$clarity), xlab = "number of samples", ylab = "median price", main = paste("region number is ",c, sep=''), plot.title=element_text(size=10)) + scale_colour_discrete(name = "clarity")  + theme_bw() + theme(axis.title.x=element_text(size = rel(0.8)), axis.title.y=element_text(size = rel(0.8)) , axis.text.x=element_text(size=8),axis.text.y=element_text(size=8) ))
  }

# Couldnt get some to work, so use:
p5=p4
p6=p4
p7=p4
p8=p4
p9=p4

# Use gridExtra to arrange the 11 plots:

g_legend<-function(a.gplot){
tmp <- ggplot_gtable(ggplot_build(a.gplot))
leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box")
legend <- tmp$grobs[[leg]]
return(legend)}

mylegend<-g_legend(p1)

grid.arrange(arrangeGrob(p1 + theme(legend.position="none"),
                     p2 + theme(legend.position="none"),
                     p3 + theme(legend.position="none"),
                     p4 + theme(legend.position="none"),
                     p5 + theme(legend.position="none"),
                     p6 + theme(legend.position="none"),
                     p7 + theme(legend.position="none"),
                     p8 + theme(legend.position="none"),
                     p9 + theme(legend.position="none"),
                     p10 + theme(legend.position="none"),
                     p11 + theme(legend.position="none"),
                     main ="Main title",
                     left = ""), mylegend, 
                    widths=unit.c(unit(1, "npc") - mylegend$width, mylegend$width), nrow=1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T12:54:20.007

我不得不`qplot`稍微更改循环调用（即将因素放入数据框中），因为它引发了大小不匹配的错误。我没有包括那一点，因为那部分显然在你的环境中工作，或者它是一个错误的粘贴。

尝试`widths`像这样调整单位：

```
widths=unit(c(1000,50),"pt") 
```

你会得到一些更接近你可能期望的东西：

而且，几个月后我现在可以粘贴代码了:-)

```
library(ggplot2)
library(gridExtra)

df <- data.frame(price=matrix(sample(1:1000, 100, replace = TRUE), ncol = 1))

df$size1 = 1:nrow(df)
df$size1 = cut(df$size1, breaks=11)
df=df[sample(nrow(df)),]
df$size2 = 1:nrow(df)
df$size2 = cut(df$size2, breaks=11)
df=df[sample(nrow(df)),]
df$clarity = 1:nrow(df)
df$clarity = cut(df$clarity, breaks=6)

# Create one graph for each size1, plotting the median price vs. the size2 by clarity:
for (c in 1:length(table(df$size1))) {

  mydf = df[df$size1==names(table(df$size1))[c],]
  mydf = aggregate(mydf$price, by=list(mydf$size2, mydf$clarity),median);   
  names(mydf)[1] = 'size2'
  names(mydf)[2] = 'clarity'
  names(mydf)[3] = 'median_price'
  mydf$clarity <- factor(mydf$clarity)

  assign(paste("p", c, sep=""), 
         qplot(data=mydf, 
               x=as.numeric(size2), 
               y=median_price, 
               group=clarity, 
               geom="line", colour=clarity, 
               xlab = "number of samples", 
               ylab = "median price", 
               main = paste("region number is ",c, sep=''), 
               plot.title=element_text(size=10)) + 
           scale_colour_discrete(name = "clarity") + 
           theme_bw() + theme(axis.title.x=element_text(size = rel(0.8)), 
                              axis.title.y=element_text(size = rel(0.8)), 
                              axis.text.x=element_text(size=8),
                              axis.text.y=element_text(size=8) ))
}

# Use gridExtra to arrange the 11 plots:

g_legend<-function(a.gplot){
  tmp <- ggplot_gtable(ggplot_build(a.gplot))
  leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box")
  legend <- tmp$grobs[[leg]]
  return(legend)}

mylegend<-g_legend(p1)

grid.arrange(arrangeGrob(p1 + theme(legend.position="none"),
                         p2 + theme(legend.position="none"),
                         p3 + theme(legend.position="none"),
                         p4 + theme(legend.position="none"),
                         p5 + theme(legend.position="none"),
                         p6 + theme(legend.position="none"),
                         p7 + theme(legend.position="none"),
                         p8 + theme(legend.position="none"),
                         p9 + theme(legend.position="none"),
                         p10 + theme(legend.position="none"),
                         p11 + theme(legend.position="none"),
                         top ="Main title",
                         left = ""), mylegend, 
             widths=unit(c(1000,50),"pt"), nrow=1) 
```

![在这里预览](../Images/e05dbece52c29d3d2a2e16905011bacc.png)

**编辑**（16/07/2015）：`gridExtra`>= 2.0.0，`main`参数已重命名`top`。

# git - Git 工作流程 - 在推送到公共仓库之前或之后合并主服务器？

> ID：14920665
> 
> 赞同：3
> 
> 时间：2013-02-17T11:40:24.233
> 
> 标签：git, workflow

这是我现在所拥有的：

```
1 Github remote (origin)
2 Heroku (staging and production) 
```

工作流程如下所示：

第一次（设置）：

```
1 - Fork public Github (upstream) into public Github <br>
2 - Clone from public Github into local 
```

开发工作流程：

```
1 - Checkout feature-branch from local master
2 - After all commits, squash them
3 - Push that branch (with one commit) into origin
4 - Do a pull request to public Github
5 - Merge into public Github master
6 - Do a pull of master into local
7 - Do a rebase here??
8 - Push local master into Heroku Staging (do testing...)
9 - Push local master into Heroku Production 
```

这是他们建议我做的，但我有一些疑问。在执行拉取请求并合并到公共 Github 主服务器（上游）之后，我将主服务器拉到本地，那么为什么在这里使用 rebase 有意义呢？在将功能分支推到原点之前，我不应该做 rebase 吗？

另一个疑问是，一旦我从上游 master 拉到本地分支，我不应该将该 master 推送到 origin（我的分叉存储库）吗？

**编辑**：在这里您可以以图表方式查看工作流程：[图表工作流程](http://oi49.tinypic.com/21ki2s8.jpg)

感谢您澄清这些疑问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:39:23.957

首先， git rebase 对于共享代码是危险的。变基实际上是历史重写，它也会改变提交哈希。这意味着 git 可能认为需要重新应用过去所做的提交（当您共享代码时），这最终可能会令人头疼。大多数时候我都避免变基。

我希望有 2 个不同的远程 url 作为来源。一个用于推送，一个用于获取。获取远程将是主存储库，推送远程将是分叉存储库。通过这种方式，您可以从主存储库中提取最新的 master，与 squash 分支合并，将 master 分支推送到分叉的存储库中，然后只请求拉取请求。

您可以像这样将 url 设置到主存储库：

`git remote set-url origin <main_repo_url_here>`

之后，仅为这样的推送设置分叉 url：

`git remote set-url --push origin <forked_personal_repo_url_here>`

您可以像这样检查结果：

`git remote -v`

# sql - 重新排列sql表中字段的顺序

> ID：14920668
> 
> 赞同：1
> 
> 时间：2013-02-17T11:40:35.720
> 
> 标签：sql, oracle10g

我的目标是更改当前模式为的表 course_info

course_info( course_no , course_name , course_prerequisite , cost )

进入

course_info( course_no , course_prerequisite , course_name , cost )

我按照链接 [如何移动 MySQL 表中的列？](https://stackoverflow.com/questions/6805426/how-to-move-columns-in-a-mysql-table)

语句抛出错误：

`alter table course_info modify course_prerequisite number(8) after course_name ;` 但它给了我错误

ORA-01735: 无效的 ALTER TABLE 选项

# html - 如何在标题包装器中制作 100% 宽度的导航

> ID：14920670
> 
> 赞同：1
> 
> 时间：2013-02-17T11:40:48.040
> 
> 标签：html, css, navigation

我正在尝试制作一个宽度为 100% 的导航栏，它在宽度也为 100% 的标题中平均分布。此外，每个`a`元素都有两个单词，它们彼此完全居中对齐。

我正在使用的 HTML 如下：

```
<div class="nav">
  <ul>
  <li><a href="#"><span style="font-family:sacramento; text-align: center;">Our</span><br> HOME</a></li>
  <li><a href="#"><span style="font-family:sacramento;text-align: center;">About</span><br> US</a></li>
 <li><a href="#"><span style="font-family:sacramento;text-align: center;">Client</span><br> WORKS</a></li>
 <li><a href="#"><span style="font-family:sacramento;text-align: center;">Contact</span><br> US</a></li>
 <li><a href="#"><span style="font-family:sacramento;text-align: center;">Our</span><br> VISION</a></li>
 <li><a href="#"><span style="font-family:sacramento;text-align: center;">Our</span><br> BIOS</a></li>
 </ul>
 </div><!--end of nav--> 
```

我正在使用的 CSS

```
.nav {
position: relative;
width: 100%;
text-align: center;
 }
 .nav ul {
margin: 0;
padding: 0;
 }
 .nav li {
margin: 25px 80px 10px 0;
padding: 0;
list-style: none;
display: inline-block;
text-align: center;
 }
 .nav a {
padding: 3px 12px;
text-decoration: none;
color: #999;
line-height: 100%;
font-family: actor;
font-size: 20px;
width: 10px;

   } 
```

我正在尝试制作的示例如下所示：

![](../Images/0c59e1650f16d4fb96659e4eebd40042.png)

**更新**

当我在 IE9 中尝试代码时，我得到了这个图像：

![](../Images/87c87085024ba658b0b1475670ab54f7.png)

请问我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:48:53.650

检查这个 JSfiddle：[JSfiddle 工作](http://jsfiddle.net/shail/VvgS2/)

在此处查看[结果 导航结果](http://jsfiddle.net/shail/VvgS2/show/)

使用这个 CSS

```
 .nav {
   position: relative;
   width: 100%;
    text-align: center;
      }
  .nav ul {
  margin: 0;
   padding: 0;
       }
     .nav li {
     margin: 0 5px 10px 0;
  padding: 5px 20px;
  list-style: none;
    display: inline-block;
    text-align: center;
      }
      .nav a {
       padding: 3px 2px;
       text-decoration: none;
       color: #999;
       line-height: 100%;
     font-family: actor;
       font-size: 15px;
       width: 10px;

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:52:09.977

要平均分配所有项目，请在列表项目上设置百分比宽度。你有六个项目，所以添加`width: 16%;`到`.nav li`规则中。

要居中对齐文本更改：

```
 .nav a {
padding: 3px 12px;
text-decoration: none;
color: #999;
line-height: 100%;
font-family: actor;
font-size: 15px;
width: 10px;

   } 
```

到（删除显式宽度并添加显示：块）：

```
 .nav a {
padding: 3px 12px;
text-decoration: none;
color: #999;
line-height: 100%;
font-family: actor;
font-size: 15px;
display: block;
   } 
```

最后`display: inline-block`从`.nav li`规则中删除并添加`float: left`. 您还应该`<div style="clear: both"></div>`在列表（标签）下方添加一个元素来“修复”页面流。

# c - C语言中是否有计算度数/弧度的函数？

> ID：14920675
> 
> 赞同：31
> 
> 时间：2013-02-17T11:41:13.613
> 
> 标签：c

我需要在 C 程序中计算一个角度。这是我需要转换为 C 的 JAVA 方法。

```
private static double calculateDirection(double x, double y)
{
    return Math.toDegrees(Math.atan2(y, x));
} 
```

C语言中是否有类似toDegrees的函数，所以我不必自己编写所有代码？谢谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-17T11:45:21.093

```
#include <math.h>

inline double to_degrees(double radians) {
    return radians * (180.0 / M_PI);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-17T11:44:03.580

没有必要使用这种方法。转换为度数非常简单：

```
double radians = 2.0;
double degrees = radians * 180.0 / M_PI; 
```

如果你愿意，可以把它变成一个函数。

`M_PI`是*`math.h`顺便定义的。

* * *

* 在大多数编译器中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-08T19:26:56.200

如果您的偏好只是复制/粘贴几个宏：

```
#include <math.h>
#define degToRad(angleInDegrees) ((angleInDegrees) * M_PI / 180.0)
#define radToDeg(angleInRadians) ((angleInRadians) * 180.0 / M_PI) 
```

如果您想省略`#include`，请将该行替换为从`math.h`标题中复制的该行：

```
#define M_PI   3.14159265358979323846264338327950288 
```

# php - 导航到 $_FILE 数组以获取具有不同名称的特定文件数组[]

> ID：14920678
> 
> 赞同：1
> 
> 时间：2013-02-17T11:41:52.390
> 
> 标签：php, arrays, codeigniter, file-io

### 概述

我有一个包含四个文件上传字段的多部分表单，其中三个是动态添加的（使用 JavaScript）。

```
<input type="file" name="OneCertificate" />

<input type="file" id="MultipleCertificate[1] "name="MultipleCertificate[]" />
<input type="file" id="MultipleCertificate[2] "name="MultipleCertificate[]" />
// more if Add button is pressed 
```

这是输出`var_dump($_FILES)`：

```
["OneCertificate"]=> array(5) {
        ["name"]=> string(6) "DE.pdf"
        ["type"]=> string(15) "application/pdf"
        ["tmp_name"]=> string(24) "C:\xampp\tmp\php37C2.tmp"
        ["error"]=> int(0)
        ["size"]=> int(103845)
}
// **Notice the attributes are all in their own arrays**
["MultipleCertificate"]=> array(5) { 
    ["name"]=> array(2) { [0]=> string(6) "DE.pdf" [1]=> string(6) "DE.pdf" } 
    ["type"]=> array(2) { [0]=> string(15) "application/pdf" [1]=> string(15) "application/pdf" } 
    ["tmp_name"]=> array(2) { [0]=> string(24) "C:\xampp\tmp\phpD941.tmp" [1]=> string(24) "C:\xampp\tmp\phpD942.tmp" } 
    ["error"]=> array(2) { [0]=> int(0) [1]=> int(0) } 
    ["size"]=> array(2) { [0]=> int(103845) [1]=> int(103845) } 
 }
 // and so on... 
```

以下是我上传每个文件的方式：

```
function upload_file($field_name)
{
    // timestamp name: http://stackoverflow.com/questions/7457152/did-not-select-a-file-to-upload-when-uploading-using-codeigniter
    $the_date= date('Y/n/j h:i:s');
    $replace = array(":"," ","/");
    $new_name = str_ireplace($replace, "-", $the_date);

    $config['upload_path'] = './uploads/';
    $config['file_name'] = $new_name;
    $config['allowed_types'] = 'pdf|jpg|jpeg|png';

    $this->load->library('upload');
    $this->upload->initialize($config);

    // Get OneCertificate the normal way since it will only have one file content
    if ( $field_name == 'OneCertificate' ) {
        if ( ! $this->upload->do_upload($field_name)) {
            return array('error' => $this->upload->display_errors());
        } else {
            $file_data = array('upload_data' => $this->upload->data());
        }
    // Method for MultipleCertificate
    } else {
        for ($i = 0; $i < count($_FILES[$field_name]['name']); $i++) {
            if ( ! $this->upload->do_upload($_FILES[$field_name]['name'][$i])) {
                $file_data = array('error' => $this->upload->display_errors());
            } else {
                $file_data = array('upload_data' => $this->upload->data());
            }
         } // END for loop  
    }

    return $file_data;
 } 
```

### 问题

我注意到`OneCertificate`作品的格式，因为**它的所有信息都在一个数组**中，而`MultipleCertificate`每个属性都在它自己的数组中。

第一个设法成功上传文件，但后者抛出**你没有选择要上传的文件。**

如何转换和/或检索`MultipleCertificate`into的形式`OneCertificate`？

**注意**：这是我需要的表格，因为我会将创建的数组分配给`$OneCertificate`数据库`$MultipleCertificate`插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:48:41.623

对于像我这样在如何`$_FILES`处理文件数组方面遇到问题的人，上面的[hohner](https://stackoverflow.com/users/427992/hohner)的评论解决了这个问题。

[这是答案的SO链接。](https://stackoverflow.com/a/1908577/1685185)

基本上我的“循环到数组的内部`$_FILE`数组”是这样的：

```
function do_upload($file_name)
{
    $this->load->library('upload');
    $this->total_count_of_files = count($_FILES[$file_name]['name']);

    // timestamp name: https://stackoverflow.com/questions/7457152/did-not-select-a-file-to-upload-when-uploading-using-codeigniter
    $date_timestamp = date('Y/M/j h:i:s');
    $replace = array(":"," ","/");
    $new_name = $file_name.'-'.$this->session->userdata('AccreditNo').'-'.str_ireplace($replace, '', $date_timestamp);

    for($i = 0; $i < $this->total_count_of_files; $i++) {
        // userfile is arbitrary, it will not reflect on the final array
        $_FILES['userfile']['name']     = $_FILES[$file_name]['name'][$i];
        $_FILES['userfile']['type']     = $_FILES[$file_name]['type'][$i];
        $_FILES['userfile']['tmp_name'] = $_FILES[$file_name]['tmp_name'][$i];
        $_FILES['userfile']['error']    = $_FILES[$file_name]['error'][$i];
        $_FILES['userfile']['size']     = $_FILES[$file_name]['size'][$i];

        $config['file_name']     = $new_name.'-'.$i;
        $config['upload_path']   = "./uploads/$file_name";
        $config['allowed_types'] = 'pdf|jpg|jpeg|png';
        $config['max_size']      = '0';

        $this->upload->initialize($config);

        if ( ! $this->upload->do_upload()) {
            $file_data = array('error' => $this->upload->display_errors());
        } else {
            $file_data = array("file_{$i}" => $this->upload->data());
        }
    }

    return $file_data;
} 
```

**文件数据现在将包含要插入数据库的一个文件的组合属性！**（在这种情况下我希望它如何）

# d - std.regex.regex() 不纯。为什么？

> ID：14920685
> 
> 赞同：2
> 
> 时间：2013-02-17T11:42:32.057
> 
> 标签：d, phobos

在 D 中 std.regex.regex() 不是纯的：

```
import std.regex;

pure void test() // test.d(5): Error: pure function 'test' cannot call impure function 'regex'
{
    auto r = regex(r"patern123", "g");
} 
```

为什么？

是吗

A. 没有足够的`pure`关键字被投入。

或者

B. 有更深层次的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:46:19.637

`std.regex`是一个模块，所以它不能被标记为纯的。

**A 的答案：将** 函数标记为`pure`不会使其纯粹。它只是告诉编译器你希望它是纯的，如果函数确实可以变成纯的，它就会完成这项工作。如果它不能是纯的，编译器将引发错误。这里就是这种情况 - test() 不能是 pure 因为`std.regex.regex()`is **not pure**。经验法则 - 纯函数不能调用不纯函数。

**对B的回答：** 是的，还有更深层次的原因，我相信你可能已经意识到了。作为提醒，请阅读[http://en.wikipedia.org/wiki/Pure_function](http://en.wikipedia.org/wiki/Pure_function)并问问自己您的函数是否`test()`满足这两个主要规则？为此，自然需要了解 std.regex.regex() 函数的语义......

也许你想问*为什么 std.regex.regex() 不纯？* 我认为马特已经回答了这个问题。- std.regex 模块确实维护了一些缓存，并对其进行了变异。

# hibernate - 有序多对多关联休眠映射

> ID：14920687
> 
> 赞同：1
> 
> 时间：2013-02-17T11:42:57.590
> 
> 标签：hibernate, orm, visual-paradigm

我正在使用“ORM Persistable”类型“A”和“B”在 Visual Paradigm 中创建一个类图，其中 A 包含 B 的有序列表。我正在尝试在类图中配置多对多关联，其中关联只能从 A->B 导航，并且列表中 B 实例的顺序由它们在运行时添加到列表中的顺序给出。当 Visual Paradigm 创建休眠映射文件时，这应该会在 ERD 中生成关联表“a2b”，其中包含字段“a_id”、“b_id”、“order_idx”，以及定义列表属性的类型“A”的休眠映射“bs”，其中列表索引是关联表的“order_idx”，如：

```
<class name="A" table="a"> 
  <id name="id" column="id" /> 
  <list name="bs" table="a2b"> 
  <key column="a_id" /> 
  <list-index column="order_idx" base="1" /> 
    <many-to-many class="B" column="b_id" /> 
  </list> 
</class> 
```

但我无法让它工作。Visual Paradigm 在关联表中为 A 类型和 B 类型创建索引列，并为 B 类型中的 A 实例创建一个列表（尽管关联在此方向上不可导航）。如果我尝试使用“order”属性为 A->B 创建关联类型，这也行不通（这很清楚，但我尝试了任何线索......）。此外，当我定义 ORM->Collection Type->List 时，我收到此错误消息：null (A->B) 有序关系未指定有序列。

如何在类图中的 Visual Paradigm 中定义这样的关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:22:56.997

我从 Visual Paradigm 得到了解决此问题的反馈：要在 java 类型“A”和“B”之间定义一个有序集合，从而在休眠映射中生成一个列表集合，必须执行以下步骤：

*   在类图中定义 ORM Persistable 类型 ![在此处输入图像描述](../Images/d91847da67d9db60303e75490246df90.png)

*   为这些类型创建 ERD 图，例如通过 Visual Paradigm 移动“右键单击结合鼠标拖动”。 ![在此处输入图像描述](../Images/63c2def79305e92bcbeab783890fef1e.png)

*   将“订单列”添加到从表“A”到表“A_B”的关联中。右键单击关联并选择“打开规范”。 ![在此处输入图像描述](../Images/e9273c0d0568497237653132a348b042.png)
*   然后单击复选框“Ordered”并选择具有订单索引的列。在此示例中，尚不存在此类列，因此我选择“创建列...” ![在此处输入图像描述](../Images/57d77b95965ded348f278e4657b199aa.png)
*   在此示例中，必须配置列名“Index”和数据类型 int(10)（因为该列之前不存在） ![在此处输入图像描述](../Images/7c35fd949674e016c21b4b3b48217aca.png)
*   这会产生如下所示的 ERD 图： ![在此处输入图像描述](../Images/74acc33d2c2a9261ba56f08d0146d784.png)
*   然后还配置从表“B”到要排序的表“A_B”的关联并使用相同的索引列。 ![在此处输入图像描述](../Images/7e8bdd0974f4d416c079bb2c3ba73d7a.png)
*   现在，有序多对多单向关联已完全配置，Visual Paradigm 能够创建上述问题中引用的休眠映射。Feine Sache :-)

* * *

# python - 引用导入变量名称的任何方式，如 HKEY_CLASSES_ROOT、HKEY_CURRENT_USER 等

> ID：14920688
> 
> 赞同：0
> 
> 时间：2013-02-17T11:43:05.777
> 
> 标签：python, python-3.x

我一直在研究这个函数来从 Windows 读取注册表值。它似乎非常冗长和重复。除了显式键入它们之外，我找不到引用从 winreg 导入的变量的方法。如果我能以某种方式引用它们，这可以被清理并大大缩短。建议？

```
from winreg import *
import winreg
from tkinter import *
from tkinter import messagebox

# to read the (Default) value of a key, put a '.' at the end of the KeyString!

def mymessagebox(messagestr):
    root=Tk()
    root.withdraw()
    messagebox.showwarning('Warning!', messagestr)

def ReadRegValue(KeyString):
    try:
        KeyRoot, KeyFolder = KeyString.split('\\',1)
        if KeyFolder == '.':
            KeyFolder = ''
            Key = ''
        else:
            try:
                KeyFolder, Key = KeyFolder.rsplit('\\',1)
                if Key == '.':
                    Key = ''
            except ValueError:
                Key = ''
        if Key == '':
            if KeyRoot == 'HKEY_CLASSES_ROOT':
                try:
                    keyhandle = winreg.ConnectRegistry(None, HKEY_CLASSES_ROOT)
                    keyvalue = winreg.QueryValue(keyhandle, KeyFolder)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(KeyFolder + ' not found in registry')
            elif KeyRoot == 'HKEY_CURRENT_USER':
                try:
                    keyhandle = winreg.ConnectRegistry(None, HKEY_CURRENT_USER)
                    keyvalue = winreg.QueryValue(keyhandle, KeyFolder)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(KeyFolder + ' not found in registry')
            elif KeyRoot == 'HKEY_LOCAL_MACHINE':
                try:
                    keyhandle = winreg.ConnectRegistry(None, HKEY_LOCAL_MACHINE)
                    keyvalue = winreg.QueryValue(keyhandle, KeyFolder)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(KeyFolder + ' not found in registry')
            elif KeyRoot == 'HKEY_USERS':
                try:
                    keyhandle = winreg.ConnectRegistry(None, HKEY_USERS)
                    keyvalue = winreg.QueryValue(keyhandle, KeyFolder)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(KeyFolder + ' not found in registry')
            elif KeyRoot == 'HKEY_PERFORMANCE_DATA':
                try:
                    keyhandle = winreg.ConnectRegistry(None, HKEY_PERFORMANCE_DATA)
                    keyvalue = winreg.QueryValue(keyhandle, KeyFolder)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(KeyFolder + ' not found in registry')
            elif KeyRoot == 'HKEY_CURRENT_CONFIG':
                try:
                    keyhandle = winreg.ConnectRegistry(None, HKEY_CURRENT_CONFIG)
                    keyvalue = winreg.QueryValue(keyhandle, KeyFolder)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(KeyFolder + ' not found in registry')
            elif KeyRoot == 'HKEY_DYN_DATA':
                try:
                    keyhandle = winreg.ConnectRegistry(None, HKEY_DYN_DATA)
                    keyvalue = winreg.QueryValue(keyhandle, KeyFolder)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(KeyFolder + ' not found in registry')
            else:
                mymessagebox(KeyRoot + ' is not a valid Key Root')
        else:
            if KeyRoot == 'HKEY_CLASSES_ROOT':
                try:
                    keyhandle = winreg.OpenKey(HKEY_CLASSES_ROOT, KeyFolder, 0, KEY_READ)
                    keyvalue, keytype = winreg.QueryValueEx(keyhandle, Key)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(Key + ' not found in registry')
            elif KeyRoot == 'HKEY_CURRENT_USER':
                try:
                    keyhandle = winreg.OpenKey(HKEY_CURRENT_USER, KeyFolder, 0, KEY_READ)
                    keyvalue, keytype = winreg.QueryValueEx(keyhandle, Key)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(Key + ' not found in registry')
            elif KeyRoot == 'HKEY_LOCAL_MACHINE':
                try:
                    keyhandle = winreg.OpenKey(HKEY_LOCAL_MACHINE, KeyFolder, 0, KEY_READ)
                    keyvalue, keytype = winreg.QueryValueEx(keyhandle, Key)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(Key + ' not found in registry')
            elif KeyRoot == 'HKEY_USERS':
                try:
                    keyhandle = winreg.OpenKey(HKEY_USERS, KeyFolder, 0, KEY_READ)
                    keyvalue, keytype = winreg.QueryValueEx(keyhandle, Key)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(Key + ' not found in registry')
            elif KeyRoot == 'HKEY_PERFORMANCE_DATA':
                try:
                    keyhandle = winreg.OpenKey(HKEY_PERFORMANCE_DATA, KeyFolder, 0, KEY_READ)
                    keyvalue, keytype = winreg.QueryValueEx(keyhandle, Key)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(Key + ' not found in registry')
            elif KeyRoot == 'HKEY_CURRENT_CONFIG':
                try:
                    keyhandle = winreg.OpenKey(HKEY_CURRENT_CONFIG, KeyFolder, 0, KEY_READ)
                    keyvalue, keytype = winreg.QueryValueEx(keyhandle, Key)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(Key + ' not found in registry')
            elif KeyRoot == 'HKEY_DYN_DATA':
                try:
                    keyhandle = winreg.OpenKey(HKEY_DYN_DATA, KeyFolder, 0, KEY_READ)
                    keyvalue, keytype = winreg.QueryValueEx(keyhandle, Key)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox(Key + ' not found in registry')
            else:
                mymessagebox(KeyRoot + ' is not a valid Key Root')
    except ValueError:
        mymessagebox('Your key string Must be in the format SOME_VALID_ROOT_KEY\folder\key .  To show a (Default) key value, put a "." at the end of your string.')
#
# Lets do some tests...
# 

results = ReadRegValue(r'HKEY_CLASSES_ROOT\.')
print (results) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:54:12.333

它确实非常重复。您可以使用`getattr()`来消除大部分重复：

```
root = getattr(winreg, KeyRoot, None)
if root is None or not KeyRoot.startswith('HKEY_'):
    mymessagebox('{} is not a valid Key Root'.format(KeyRoot))
    return

if not Key:
    try:
        keyhandle = winreg.ConnectRegistry(None, root)
        return winreg.QueryValue(keyhandle, KeyFolder)
    except FileNotFoundError:
        mymessagebox('{} not found in registry'.format(KeyFolder))
else:
    try:
        keyhandle = winreg.OpenKey(root, KeyFolder, 0, KEY_READ)
        return winreg.QueryValueEx(keyhandle, Key)[0]
    except FileNotFoundError:
        mymessagebox('{} not found in registry'.format(KeyFolder)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:54:53.770

为什么不使用字典？

```
hives = {
    'HKEY_CLASSES_ROOT': HKEY_CLASSES_ROOT,
    'HKEY_CURRENT_USER': HKEY_CURRENT_USER,
    'HKEY_LOCAL_MACHINE': HKEY_LOCAL_MACHINE
}

if key_root in hives:
    try:
        key_handle = winreg.ConnectRegistry(None, hives[key_root])
        key_value = winreg.QueryValue(key_handle, key_folder)
        return key_value
    except FileNotFoundError:
        mymessagebox(key_folder + ' not found in registry') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:48:29.580

版本后：

```
from winreg import *
import winreg
from tkinter import *
from tkinter import messagebox

# to read the (Default) value of a key, put a '.' at the end of the KeyString!

def mymessagebox(messagestr):
    root=Tk()
    root.withdraw()
    messagebox.showwarning('Warning!', messagestr)

def ReadRegValue(KeyString):
    validroots = {
    'HKEY_CLASSES_ROOT': HKEY_CLASSES_ROOT,
    'HKEY_CURRENT_USER':HKEY_CURRENT_USER,
    'HKEY_LOCAL_MACHINE': HKEY_LOCAL_MACHINE,
    'HKEY_USERS': HKEY_USERS,
    'HKEY_PERFORMANCE_DATA': HKEY_PERFORMANCE_DATA,
    'HKEY_CURRENT_CONFIG': HKEY_CURRENT_CONFIG,
    'HKEY_DYN_DATA': HKEY_DYN_DATA
}
    try:
        KeyRoot, KeyFolder = KeyString.split('\\',1)
        if KeyFolder == '.':
            KeyFolder = ''
            Key = ''
        else:
            try:
                KeyFolder, Key = KeyFolder.rsplit('\\',1)
                if Key == '.':
                    Key = ''
            except ValueError:
                Key = ''
        if KeyRoot in validroots:
            if Key == '':
                try:
                    keyhandle = winreg.ConnectRegistry(None, getattr(winreg, KeyRoot, None))
                    keyvalue = winreg.QueryValue(keyhandle, KeyFolder)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox('{} not found in registry'.format(KeyFolder))
            else:
                try:
                    keyhandle = winreg.OpenKey(getattr(winreg, KeyRoot, None), KeyFolder, 0, KEY_READ)
                    keyvalue, keytype = winreg.QueryValueEx(keyhandle, Key)
                    return keyvalue
                except FileNotFoundError:
                    mymessagebox('{} not found in registry'.format(Key))
        else:
            mymessagebox('{} is not a valid Key Root'.format(KeyRoot))
    except ValueError:
        mymessagebox('Your key string Must be in the format SOME_VALID_ROOT_KEY\folder\key .  To show a (Default) key value, put a "." at the end of your string.')
    return

#
# Lets do some tests...
# 
results = ReadRegValue(r'HKEY_CLASSES_ROOT\.')
print (results)
results = ReadRegValue(r'HKEY_CLASSES_ROOT\.7z\.')
print (results)
results = ReadRegValue(r'HKEY_CLASSES_ROOT\.ac3\PerceivedType')
print (results)
results = ReadRegValue(r'HKEY_LOCAL_MACHINE\HARDWARE\DESCRIPTION\System\CentralProcessor\1\ProcessorNameString')
print (results)
results = ReadRegValue(r'HKEY_CLASSES_ROOT\.')
print (results) 
```

# php - MySQL中的多个查询插入

> ID：14920689
> 
> 赞同：0
> 
> 时间：2013-02-17T11:43:09.260
> 
> 标签：php, mysql, insert, mysql-insert-id

我在尝试获取第一个 SQL 语句的结果值时遇到问题，因此我可以在第二个语句中使用 in。

我的第一句话是这样的：

```
$query = "SELECT restaurantid FROM restaurant WHERE username = '$_SESSION[username]'";
$result=mysql_query($query);

if(!$result)
{
 echo "Error: " . mysql_error() . "Query: " . $query;          
}

  while ($row = mysql_fetch_assoc($result)) {
echo $row['restaurantid'];
}

mysql_free_result($result); 
```

从我在浏览器上使用的检查器控制台，该语句在启动时返回一个“1”，这是我正在寻找的变量。

在我的最后一行（mysql_free_result ....）的正下方，我是我的第二个查询，如下所示：

```
$query = "INSERT INTO deal (dname, description, restaurantid) VALUES ('$name', '$desc', '$result')";
$add = mysql_query($query);
$num = mysql_numrows($add);

if($num != 0) {

echo "true";

} else {

echo "Error: " . mysql_error() . "Query: " . $query;

} 
```

但是，我的问题在于，每当我尝试执行此代码时，我的第二条语句似乎都没有从第一个查询中获取所需的先前结果值。只是希望有人能对我的情况有所了解。我是编码新手，我几乎已经正确了，所以所有的帮助和建议将不胜感激！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:50:47.330

首先，您不应该使用 Mysql，因为它已被[弃用](http://www.php.net/manual/en/intro.mysql.php)并且容易受到 SQL 注入的影响，请改用[Mysqli](http://www.php.net/manual/en/book.mysqli.php)。

```
$restaurantId = $row['restaurantid']; 
```

虽然使用 Mysql，但查询应该是这样的`"INSERT INTO deal (dname, description, restaurantid) VALUES ('$name', '$desc', '$restaurantId')"`

通过使用 Mysqli，它应该看起来像这样：

```
$stmt = $mysqli -> prepare("INSERT INTO deal (dname, description, restaurantid) VALUES (?,?,?)"

$stmt -> bind_param('ssi', $name, $desc, $restaurantId);
$stmt -> execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:47:00.630

您可以将查询合并为 1

```
INSERT INTO deal (dname, description, restaurantid) 
SELECT '$name', '$desc', restaurantid 
FROM restaurant 
WHERE username = '$_SESSION[username]' 
```

顺便说一句，这对 SQL 注入非常不利。[有关避免这种情况的提示，](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)请参见此处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T12:12:41.197

如果`$_SESSION[username]`是新插入的记录，可能你可以`mysql_insert_id();`在之后分配 restaurantid`mysql_query("INSERT INTO restaurant VALUES (some_values)")`

或者如果不是，

```
$result = mysql_query($sql) or die(mysql_error());

    while($rows = mysql_fetch_array($result))
    {
        $restaurantid = $rows['restaurantid'];

    } 
```

# python - 在 matplotlib 的条形图中使用负值

> ID：14920691
> 
> 赞同：3
> 
> 时间：2013-02-17T11:43:30.567
> 
> 标签：python, matplotlib, plot

从这个[例子](http://matplotlib.org/examples/pylab_examples/bar_stacked.html)开始，我想做一些非常相似但能够在代码中使用负值的变量，例如；

```
menMeans   = (-20, 35, -30, 35, -27)
womenMeans = (25, -32, 34, -20, 25) 
```

，尽管这与男人/女人的含义无关。但是当我这样做时，我在图中看不到任何与负值相关的内容。我也改变了 Y 比例；

```
plt.yticks(np.arange(-81,81,10)) 
```

但什么都没有。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T13:12:49.807

`y`我通过以下命令更改轴比例：

```
plt.ylim([-81,81]) 
```

这会将`y`轴刻度从 -81 设置为 81

对于`x`比例轴，这将是

```
plt.xlim([ xmin,xmax]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T12:29:18.203

在画廊示例中，您可以找到这行代码：

```
plt.bar(ind, womenMeans, width, color='y',bottom=menMeans, yerr=menStd) 
```

底部的值可以选择为负值，这样条形图从某个负值开始并且很`womenMeans`长。

x=5 处从 -200 到 20 的黄色条，宽度 = 10

将会：

```
plt.bar(5, 220,10, color='y',bottom=-200) 
```

# .net - Metro App 访问数据模板控件

> ID：14920695
> 
> 赞同：1
> 
> 时间：2013-02-17T11:43:44.760
> 
> 标签：.net, xaml, listbox, microsoft-metro, datatemplate

我有一个`ListBox`具有以下布局的控件，其中有一个自定义控件：

```
<ListBox x:Name="testList" ItemsSource="{Binding}" BorderBrush="{x:Null}" BorderThickness="0" Margin="0" Padding="0">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <controls:MyUserControl x:Name="testListItem"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我正在尝试`MyUserControl`像这样从代码隐藏访问：

```
testList.ItemContainerGenerator.ContainerFromItem(testList.SelectedItem); 
```

不幸的是，它总是返回 null。我在某处读过XAML 中的设置解决`VirtualizingStackPanel.IsVirtualized="False"`了这个问题。`ListBox`

但此属性在 Metro 中不可用。有人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:04:42.233

**已解决**遵循此方法：

[参考数据模板解决方案](https://stackoverflow.com/questions/12370081/accessing-combobox-inside-a-datatemplate-of-a-listbox-from-c-sharp-code-behind-i)

效果很好。享受！

# javascript - 如何在javascript中编写客户端api

> ID：14920698
> 
> 赞同：3
> 
> 时间：2013-02-17T11:43:54.887
> 
> 标签：javascript, api, event-handling, client

我已经编写了一个 api 的服务器端，它通过 json 使用 REST 通过 codeigniter 提供 html。我接下来要做的是用javascript编写一个客户端api，通过api从服务器获取数据，将其呈现在dom中并将事件绑定到它。然后这些事件将使用 api 获取新的 html 等。

现在我从哪里开始？我可以在我的 api 脚本中使用 jquery 并为每个触发的事件对 api 进行 ajax 调用吗？还是有更好的方法来做到这一点？是否有任何 js 库可以帮助我做到这一点？我已经查看了主干并需要机器人，我不确定这是否是这些库的正确目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-07T06:28:40.410

**使用 fetch 方法从客户端调用 Web API**

```
fetch('https://jsonplaceholder.typicode.com/todos')
 .then(response => response.json())
 .then(json => console.log(json))
```

# c# - 弹出窗口，如 Internet Explorer 收藏窗口

> ID：14920701
> 
> 赞同：2
> 
> 时间：2013-02-17T11:44:31.257
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我可能无法正确描述我的要求，但我会尽力而为。我想用 C# 在 ASP.Net 中开发一个 Web 应用程序。

该要求与弹出窗口完全相同：

当用户点击 IE-7 或 8 中的收藏按钮时，它会在页面上打开一个浮动窗口。当用户点击离开该弹出窗口时，窗口将消失或隐藏。有一个 pin 按钮，位于该弹出窗口的右侧角落。当用户单击该图钉时，它会粘住并且整个资源管理器包含将向右移动。

我不知道要使用哪个控件以及如何进行。因此，任何对此有任何想法的人都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:20:25.557

您是指在 IE 中单击收藏夹（星号）图标时出现的书签弹出窗口吗？

或者

出现在左侧的侧框？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:24:32.890

我不确定我是否正确理解了您的问题，但是，我猜您正在寻找的是所谓的“模态窗口”。您可以使用一些 css 和 javascript 构建自己的。如果你不想弄脏你的手，我建议你看看一些 jQuery 插件。我更喜欢的是[BlockUI](http://www.malsup.com/jquery/block/)，但如果你在 google 上搜索它，还有更多。你也可能想看看[这个列表](http://www.jquery4u.com/windows/14-jquery-modal-dialog-boxes/)。

# ruby-on-rails - 通过单击 ruby on rails 中的图像来传递参数

> ID：14920704
> 
> 赞同：0
> 
> 时间：2013-02-17T11:44:39.680
> 
> 标签：ruby-on-rails, ruby, image

我正在为黑客马拉松开发一个 ruby​​ on rails 应用程序，并且陷入了创建喜欢/不喜欢选项的部分。基本上，我有两张图片，点击其中一张时，某个字符串，可以说“a”应该传递到下一页。如果单击其他图像，则应通过“b”。我以前没有 ruby​​ on rails 经验。有人可以回答这个吗？我会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:50:57.547

这比 ruby​​ 更像是一个 HTML 问题。您可以使用 HTML 的 a 标签来实现这一点

```
<a id="like" href="http://somewhere.com/like?q=1"> </a> 
```

然后在 CSS 中，您可以设置它的样式，以便显示您想要的任何图像。

如果您想动态执行此操作，您可以使用 javascript 点击处理程序，然后向相应的控制器发出 get 请求

# cocos2d-iphone - 如何在 iphone 的 cocos2d 中水平翻转精灵

> ID：14920707
> 
> 赞同：5
> 
> 时间：2013-02-17T11:44:49.603
> 
> 标签：cocos2d-iphone

我只知道 CCNode 的旋转属性可能与它有关。但我想水平翻转精灵，而不是旋转。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-26T06:29:16.040

接受的答案是错误的（或过时的）。您实际应该使用的是：

```
sprite.flipX=YES; 
```

和

```
sprite.flipX=NO; 
```

扭转它

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-17T11:48:47.043

如果您的意思是要水平翻转 a `CCNode`，您只需执行以下操作：

```
sprite.scaleX *= -1; 
```

（或：）`sprite.scaleX = -sprite.scaleX`；如果你的精灵一开始就没有缩放，你可以简单地做：

```
sprite.scaleX = -1; 
```

该类`CCSprite`有一个`flipX`/`flipY`方法可以满足您的目的。但请记住以下[行为差异](https://github.com/cocos2d/cocos2d-objc/blob/v3.5.0/cocos2d/CCSprite.h)：

> @note 翻转不会翻转任何精灵的子精灵，也不会改变锚点。
> 
> 如果这是您想要的，您应该尝试反转 CCNode scaleX 属性：`sprite.scaleX *= -1.0;`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-25T11:49:18.883

你可以试试这个：

```
CCSprite* heroSprite = (CCSprite*) _character.children[0]; 
```

然后以 heroSprite 为例：

```
 heroSprite.flipX = YES; 
```

它适用于节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-26T16:12:49.943

在当前版本 cocos2d-js (3.8) 中：试试，

```
sprite.flippedX = true; //for flipping horizontally.
sprite.flippedY = true; //for flipping vertically. 
```

# c++ - 等待 atomic_bool

> ID：14920725
> 
> 赞同：9
> 
> 时间：2013-02-17T11:47:06.147
> 
> 标签：c++, multithreading, c++11, atomic

我有两个线程和一个由第二个线程设置的标志。我可以使用`atomic_bool`，但我希望能够等待* 在第一个线程上设置标志。我怎样才能做到这一点？

我猜我不能使用 a `condition_variable`，因为如果第二个线程`notify_one`在第一个线程开始等待之前调用，则线程不会唤醒。

此外，检查标志是否已经设置应该相当快。我想这应该很简单，但我只是卡住了，所以我在这里问。提前致谢。

*编辑：当然是阻止，而不是忙等待。抱歉，如果不清楚。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T12:29:30.780

在 cbreak 和 Ravadre（评论）的帮助下，我从这里得到：

```
int main()
{
    std::mutex m;
    std::condition_variable cv;

    std::thread t([&] {
            std::this_thread::sleep_for(std::chrono::seconds(1));
            std::unique_lock<std::mutex> lock(m);
            cv.wait(lock);
            std::cout << "Yay!\n";
    });

    cv.notify_one();
    t.join();
} 
```

通常根本不会终止，到这里：

```
int main()
{
    std::mutex m;
    std::condition_variable cv;
    bool flag = false;

    std::thread t([&] {
        std::this_thread::sleep_for(std::chrono::seconds(1));
        std::unique_lock<std::mutex> lock(m);
        cv.wait(lock, [&] { return flag; });
        std::cout << "Yay!\n";
    });

    {
        std::lock_guard<std::mutex> lock(m);
        flag = true;
    }

    cv.notify_one();
    t.join();
} 
```

这实际上完成了这项工作，但似乎仍然有很多不必要的开销。随意发布等效但性能更高（或更优雅）的答案，我很乐意接受。请只使用标准 C++11，如果没有，请解释为什么标准 C++11 不能这样做。

编辑：我还写了一个类 safe_flag 来封装它（再次感谢 cbreak）；随时提出任何改进建议。

```
class safe_flag
{
    mutable std::mutex m_;
    mutable std::condition_variable cv_;
    bool flag_;

public:
    safe_flag()
        : flag_(false)
    {}

    bool is_set() const
    {
        std::lock_guard<std::mutex> lock(m_);
        return flag_;
    }

    void set()
    {
        {
            std::lock_guard<std::mutex> lock(m_);
            flag_ = true;
        }
        cv_.notify_all();
    }

    void reset()
    {
        {
            std::lock_guard<std::mutex> lock(m_);
            flag_ = false;
        }
        cv_.notify_all();
    }

    void wait() const
    {
        std::unique_lock<std::mutex> lock(m_);
        cv_.wait(lock, [this] { return flag_; });
    }

    template <typename Rep, typename Period>
    bool wait_for(const std::chrono::duration<Rep, Period>& rel_time) const
    {
        std::unique_lock<std::mutex> lock(m_);
        return cv_.wait_for(lock, rel_time, [this] { return flag_; });
    }

    template <typename Rep, typename Period>
    bool wait_until(const std::chrono::duration<Rep, Period>& rel_time) const
    {
        std::unique_lock<std::mutex> lock(m_);
        return cv_.wait_until(lock, rel_time, [this] { return flag_; });
    }
}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T13:13:05.690

```
bool go = false;
std::mutex mtx;
std::condition_variable cnd;

// waiting thread:
std::unique_lock<std::mutex> lck(mtx);
while (!go)
    cnd.wait(lock);
// when we get here we know that go is true, and we have the lock

// signalling thread:
{
std::unique_lock<std::mutex> lck(mtx);
go = true;
cnd.notify_one();
}
// now we've released the lock, so the waiting thread will make progress 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T12:02:03.557

你的平台到底是什么？在我们使用的 posix 兼容平台上

```
 sem_t semaphore;
  sem_init( &semaphore , 0 , x ); 
```

得到一个初始值为 x 的信号量。然后与

```
 sem_wait(&semaphore ); sem_post(&semaphore); 
```

您可以同步两个线程。请记住声明`semaphore`为全局变量以确保两个线程都可以访问它（或通过任何其他实现相同的方式）。

长话短说，您可以：

```
sem_t semaphore;
sem_init(&semaphore, 0 , 0 );
void thread2(){
   sem_post(&semaphore);    //second thread --A
}
void thread1(){
    sem_wait(&semaphore);   // wait until thread2() executes line A
} 
```

在 Win32 上也应该有类似的实用程序来实现相同的功能。

# java - 主动拒绝连接

> ID：14920726
> 
> 赞同：1
> 
> 时间：2013-02-17T11:47:07.543
> 
> 标签：java, visual-studio, apache, tomcat, socketexception

我知道这个问题已经被问过好几次了，但我的情况有点奇怪。

我有一台机器监听 XXXX:8080，它充当负载均衡器并将请求重定向到另外两台机器，监听端口 8081。当我运行程序时，没有错误或错误；这是一个简单的应用程序。

当我试图测试它以进行负载测试时，问题就出现了。我正在通过 Visual Studio 2012 使用 Web 性能和负载测试，并且我已经正确记录了 WebTest 路由（据我所知）。但是，当我对超过 200 个用户进行负载测试时，生成的错误报告会显示此错误：

“无法建立连接，因为目标机器主动拒绝 XXXX:8080。”

奇怪的是，每次都会出现 1000 个这样的错误，不多不少。任何低于 200 个用户的东西，我都会遇到其他错误，我可以弄清楚，但这真的让我毛骨悚然。

我在它前面使用 Tomcat 和 Apache HTTPD 服务器。

帮助！

# iphone - 未调用 UIImagePickerController 委托方法（委托设置为 self）

> ID：14920731
> 
> 赞同：3
> 
> 时间：2013-02-17T11:47:45.160
> 
> 标签：iphone, ios, objective-c, uiimagepickercontroller

我有一个问题：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {} 
```

只被相机调用，而不是当我试图通过浏览用户的照片来选择图像时。

这是我的 UIImagePicker 委托的初始化代码：

```
-(void)viewDidLoad{

    [self initImagePicker];

}

-(void)initImagePicker{
    DLog(@"");

    self.imagePickerController.delegate = self;

}

- (void)setupImagePicker:(UIImagePickerControllerSourceType)sourceType
{
    self.imagePickerController.sourceType = sourceType;

    if (sourceType == UIImagePickerControllerSourceTypeCamera)
    {
        // user wants to use the camera interface
        //
        self.imagePickerController.showsCameraControls = NO;

        if ([[self.imagePickerController.cameraOverlayView subviews] count] == 0)
        {
            // setup our custom overlay view for the camera
            //
            // ensure that our custom view's frame fits within the parent frame
            CGRect overlayViewFrame = self.imagePickerController.cameraOverlayView.frame;

            CGRect newFrame = CGRectMake(0.0,CGRectGetHeight(overlayViewFrame)-15.0,CGRectGetWidth(overlayViewFrame),15.0);

            self.view.frame = newFrame;
            [self.imagePickerController.cameraOverlayView addSubview:self.view];
            [self.view bringSubviewToFront:self.view];
        }
    }
} 
```

然后在我的根类中，它是 UIImagePicker 类的委托，它是 UIImagePicker 的委托：

```
#pragma mark -
#pragma mark Toolbar Actions

- (void)showImagePicker:(UIImagePickerControllerSourceType)sourceType
{

    if (![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        // camera is not on this device, don't show the camera button
        NSMutableArray *toolbarItems = [NSMutableArray arrayWithCapacity:self.myToolbar.items.count];
        [toolbarItems addObjectsFromArray:self.myToolbar.items];
        [toolbarItems removeObjectAtIndex:2];
        [self.myToolbar setItems:toolbarItems animated:NO];
    }

    if ([UIImagePickerController isSourceTypeAvailable:sourceType])
    {

        self.overlayViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"OverlayViewController"];
        self.overlayViewController.delegate = self;

        self.overlayViewController.imagePickerController = [[UIImagePickerController alloc] init];
        [self.overlayViewController setupImagePicker:sourceType];
        [self presentModalViewController:self.overlayViewController.imagePickerController animated:YES];
    }
} 
```

我知道这是一个 SO 问题的很多代码，但是对于有实现这个类的经验的人来说，我做错了什么？

对我来说，这条线很奇怪：

```
 self.overlayViewController.imagePickerController = [[UIImagePickerController alloc] init]; 
```

我以前从未在所有者之外分配和初始化属性。是这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T12:04:29.603

我认为您设置代表太早了（`initImagePicker`在`viewDidLoad`）。`self.imagePickerController`那里可能为零。您应该在创建`UIImagePickerController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T12:04:36.033

找到了修复：

需要补充：

```
self.overlayViewController.imagePickerController.delegate = self.overlayViewController; 
```

后：

```
self.overlayViewController.imagePickerController = [[UIImagePickerController alloc] init]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T17:44:06.747

将 .h 文件中的 UIImagePickerDelegate 和 UINavigationControllerDelegate 设置为 @interface。

就像

```
@interface class : UIView <UIImagePickerDelegate , UINavigationControllerDelegate> 
```

使用 UIImagePickerController 对象设置自我委托，

```
imgPickerController.delegate = self; 
```

希望对你也有帮助。

# r - 从具有意外结果的二项式（K，p）中采样

> ID：14920734
> 
> 赞同：7
> 
> 时间：2013-02-17T11:48:21.683
> 
> 标签：r, distribution

在 的帮助文件中`rbinom`， size 参数是试验次数（包括零），但没有说明这是否也可以是向量。

使用此功能的正确方法是

```
table(rbinom(n = 1000, size = 1, prob = 0.2))

  0   1 
809 191 
```

但是这里发生了什么？

```
table(rbinom(n = 1000, size = 0:1, prob = 0.2))

  0   1 
894 106 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T11:52:56.830

大小参数的参数循环是主要原因。

因为`n`是 1000，`0:1`所以被回收，直到你得到 500`0`和 500 `1`（交替）。

所有 0 尺寸的都给出`0`：

```
 > rbinom(10,size=0,prob=0.2)  
     [1] 0 0 0 0 0 0 0 0 0 0 
```

导致 500`0`次 + 500 次伯努利试验，p=0.2，导致`1`1000 个元素中约有 100 个。

[你的结果对我来说似乎并不令人惊讶，但如果你不寻找它，参数回收可能会咬人，而且 - 虽然有理由将 0 次伯努利试验中的成功次数定义为 0 - 这似乎并不一开始也很明显。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T12:22:42.387

文档错误：

> 如果“大小”不是整数，则返回“NaN” **。**[我的重点]

你给它的整数不止一个，所以文档暗示你会得到`NaN`.

它令人困惑，因为它明确说明了其他参数可以是向量但不是`size`。我会向维护者提交一个文档错误，在这种情况下，这可能意味着主要的 R 错误跟踪器。

# django - ManyRelatedManager 对象不可迭代

> ID：14920735
> 
> 赞同：118
> 
> 时间：2013-02-17T11:48:33.543
> 
> 标签：django

尝试这样做：

```
wishList = WishList.objects.get(pk=20)
matches = [val for val in Store.attribute_answers.all() if val in wishList.attribute_answers] 
```

得到这个...

```
'ManyRelatedManager' object is not iterable 
```

这两个字段都是多对多的，那么如何做到这一点？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-02-17T12:17:15.123

尝试

```
matches = [val for val in Store.attribute_answers.all() if val in WishList.attribute_answers.all()] 
```

注意末尾的括号`WishList.attribute_answers.all()`。添加括号会调用该`all`函数以返回一个可迭代对象。

如果您包含括号，您的意思是“给我商店答案中的所有值，只要该值也在愿望清单答案中”。如果没有括号，您将要求商店答案中的所有值也在`all`函数中，这是没有意义的。all 函数不是可迭代的（它是一个返回可迭代的函数）

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-02-17T12:16:29.343

听起来你正在寻找类似的东西

```
Store.attribute_answers.all() 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2019-01-18T10:58:21.787

如果您在模板中执行此操作：

```
{% for room in study.room_choice.all %}
  {{ room }}
  {% empty %}
  empty list!
{% endfor %} 
```

更新

如果您有一个直通表，您可以像这样访问该表中的元素（如此[处](https://stackoverflow.com/questions/38358955/django-template-access-value-from-many-to-many-through-table/38359322)详述）（注意，您使用直通表名称，小写，后缀 _set）：

```
{% for roominfo in participant.roomchoicethru_set.all %}
  {{ roominfo.room}} {{ roominfo.telnumber}}
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2018-07-24T14:55:29.107

> > > **`all()`**

**对于在TL;DR**等问题中发现阅读代码的每个人

 **代替`query_set.many_to_many`

你应该使用 `query_set.many_to_many.all()`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-01-10T13:55:07.030

每当出现这个问题时，我都会不断提出这个问题。特别是在尝试实际迭代函数中的多态时。

作为模板，您可以：

```
array = many_to_many.all()
for x in many_to_many:
  function here 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-03-14T10:10:42.660

这里的 busines_type 是 profile 模型中的 foreign_key

```
pro = Profile.object.filter(user=myuser).first()
business_type = pro.business_type.all()
if business_type:
    b_type = ''
    for b in business_type:
        b_type += str(b.type)+' '
        a = b_type 
```**

# php - HTML 5 相机访问和使用 php 上传文件

> ID：14920737
> 
> 赞同：6
> 
> 时间：2013-02-17T11:48:40.667
> 
> 标签：php, html, file-upload, camera

我正在使用下面的代码来访问 html 5 相机并将图像上传到服务器。

HTML 代码

```
<form action="upload.php" method="post" enctype="multipart/form-data">
  <input type="file" name="image" accept="image/*" capture>
  <input type="submit" value="Upload">
</form> 
```

上传.php代码

```
<?php 
$target_path = "upload/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

问题是当我测试代码时，它显示“上传文件时出错，请重试！” . 谁能帮我找出问题所在？

下面的代码对我来说正常工作。

HTML 代码：

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
<input type="hidden" name="MAX_FILE_SIZE" value="100000" />
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

PHP代码与上面相同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T11:52:32.730

在第一种情况下，您的文件输入名称被命名为“图像”，而在第二种情况下被命名为“uploadedfile”。您的 PHP 期待“上传的文件”。

要解决此问题，您需要将代码（第一种情况）更改为：

```
<form action="upload.php" method="post" enctype="multipart/form-data">  
   <input type="file" name="uploadedfile" accept="image/*" capture>  
   <input type="submit" value="Upload">  
</form> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-27T11:34:29.543

如果你想使用 HTML5 和设备的摄像头，有一个 HTML5 功能可以做到这一点： 示例：

```
<input type="file" accept="image/*" capture="camera" /> 
```

从这里：[https ://coderwall.com/p/epwmoa](https://coderwall.com/p/epwmoa)

它正在适用于 Android 的 chrome（使用三星 Galaxy S2）。

# sql-server - 遍历选择结果

> ID：14920740
> 
> 赞同：1
> 
> 时间：2013-02-17T11:48:49.950
> 
> 标签：sql-server

我想用一个 select 语句在 SQLServer 中创建一个列表，然后使用这个 select 语句的结果来创建一组选择，例如，如果我有 3 个从我的第一个选择返回的值，我想运行一个 While 循环，该循环将运行 3 次并在每次交互中选择值。

这是我正在尝试做的一个例子：

我有一个选择语句：

```
Select ID
From T_1
Where T_1.somefield=1 
```

返回的语句应该是：

```
|1|
|2|
|4| 
```

由于我的 Where 条件，未显示 3。

我想迭代我的结果

```
set @myCount=select count(id) from -my result-
set @indexFlag=0;

while (@indexFlag<@myCount)
Begin

Select *
From T_2
Where T_2.field=...(1 - 1st loop, 2- 2nd loop, 4- 3rd loop)

@indexFlag=@indexFlag+1 
```

结尾

我不确定如何实现它，SQLSERVER 是否支持某种列表？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:55:56.827

我认为你应该为此使用连接。

```
select t_2.* from t_1 left join t_2 
on t_1.ID = t_2.ID
where t_1.some_field = 1 
```

这将返回一个表本身所需的所有行。然后在您的代码中处理此表以过滤所需的行。

# java - 这个 Eclipse 视图是如何制作的？

> ID：14920741
> 
> 赞同：6
> 
> 时间：2013-02-17T11:48:51.333
> 
> 标签：java, eclipse, eclipse-plugin

![Eclipse 插件视图](../Images/6cfe30a2cea6a7243e9ccfa9ef652e3a.png)

我正在为 Eclipse 开发一个插件，它将添加一个新的上下文菜单，单击时会弹出一个对话框，用户将能够从要安装的东西列表中进行选择。我希望我的对话框与附加的屏幕截图具有相同的外观和感觉（当您编辑新插件时来自 eclipse）。

所以我的问题是：知道这个界面是如何制作的吗？它是 HTML，如果是这样，如何做到这一点？或者这是自定义的 Swing 控件，还是类似的东西？我是 Java 新手，所以我可能无法正确提出问题，但我们将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T13:37:58.697

这个多页编辑器包含使用基于 SWT的[Eclipse Forms创建的元素。](http://www.eclipse.org/articles/Article-Forms/article.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T13:30:07.040

这个编辑器可能是使用 . 完成的`MultiPageEditorPart`，尽管我找不到确切的类。（*更新：* [找到了课程](http://www.java2s.com/Open-Source/Java/IDE-Eclipse/Eclipse-plug-in-development/org/eclipse/pde/internal/ui/editor/plugin/ManifestEditor.java.htm)，虽然我认为它不会有太大帮助......）

要自己制作这样的编辑器，您应该首先使用*带有多页编辑器*模板的插件创建一个*新插件项目。*也许本[教程](https://sites.google.com/site/eclipseplugindevelopment/11-editors)可以帮助您入门。

 *但是请注意，这将是一个*编辑器*（放置在 Eclipse 工作台的中心，用于编辑某些文件），既不是*视图*（放置在旁边，提供一些附加功能）也不是对话框。相反，您可能想要创建一个多页*向导*，每个选项卡都有一个页面。这将更符合 Eclipse 的一般外观。上面的链接也提供了一些提示。*

# c++ - 向量 零到字符串

> ID：14920744
> 
> 赞同：0
> 
> 时间：2013-02-17T11:48:56.677
> 
> 标签：c++, string, vector

我有一个

```
vector<char> sectionData; 
```

我想看看它的内容。我尝试以下

```
string sectionDataStr = string(sectionData.begin(),sectionData.end()); 
```

但是我只得到字符串中显示的部分sectionData，因为sectionData包含零。如果我想将整个数据读取到字符串中，我该怎么办？

**我不能使用 std::cout** 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:53:52.473

你的问题不存在。这是一个简单的演示：

```
#include <string>
#include <iostream>

int main()
{
    std::cout << std::string { 'a', '\0', 'b', '\0', 'c' } << std::endl;
} 
```

现在检查输出：

```
$ ./a.out | hexdump -C

00000000  61 00 62 00 63 0a 
```

```
##         a \0  b \0  c \n 
```

如您所见，一切都在那里。

* * *

或者（在您编辑之后）：

```
#include <cstdio>

std::fwrite(sectionDataStr.data(), sectionDataStr.size(), stdout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:34:21.823

您的问题不在于字符串，而在于输出。根据您使用的内容，输出例程可能会在字符串中的第一个 0 处停止。如果您不希望这样，那么您可能需要使用以下内容将缓冲区转换为输出：

```
std::replace( sectionData.begin(), sectionData.end(), '\0', ' ' ) 
```

# ruby-on-rails - 试图从数组中删除 - rails

> ID：14920747
> 
> 赞同：1
> 
> 时间：2013-02-17T11:49:08.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一组用户的 favourite_guidelines。在我的控制台中，它看起来像这样：

```
fg=User.first.favourite_guidelines
  User Load (73.9ms)  SELECT "users".* FROM "users" LIMIT 1
  FavouriteGuideline Load (0.2ms)  SELECT "favourite_guidelines".* FROM "favourite_guidelines" WHERE "favourite_guidelines"."user_id" = 11
 => [#<FavouriteGuideline id: 16, guideline_id: 24, user_id: 11, created_at: "2013-02-17 01:03:19", updated_at: "2013-02-17 01:03:19">, #<FavouriteGuideline id: 18, guideline_id: 23, user_id: 11, created_at: "2013-02-17 11:40:27", updated_at: "2013-02-17 11:40:27">] 
```

所以它包含两个指导方针。我希望能够删除某个 guideline_id 的值，以便用户最喜欢的指南将删除该收藏。目前我有：

```
User.first,favourite_guidelines.delete_if{|favourite| favourite["guideline_id"] == 24} 
```

这给了我：

```
.9.3p194 :066 > User.first.favourite_guidelines.delete_if{|favourite| favourite["guideline_id"] == 24}
  User Load (0.4ms)  SELECT "users".* FROM "users" LIMIT 1
  FavouriteGuideline Load (0.3ms)  SELECT "favourite_guidelines".* FROM "favourite_guidelines" WHERE "favourite_guidelines"."user_id" = 11
 => [#<FavouriteGuideline id: 18, guideline_id: 23, user_id: 11, created_at: "2013-02-17 11:40:27", updated_at: "2013-02-17 11:40:27">]' 
```

所以看起来它正在删除它，但显​​然没有保存，因为如果我这样做：

```
 1.9.3p194 :067 > User.first.favourite_guidelines
  User Load (0.4ms)  SELECT "users".* FROM "users" LIMIT 1
  FavouriteGuideline Load (0.4ms)  SELECT "favourite_guidelines".* FROM "favourite_guidelines" WHERE "favourite_guidelines"."user_id" = 11
 => [#<FavouriteGuideline id: 16, guideline_id: 24, user_id: 11, created_at: "2013-02-17 01:03:19", updated_at: "2013-02-17 01:03:19">, #<FavouriteGuideline id: 18, guideline_id: 23, user_id: 11, created_at: "2013-02-17 11:40:27", updated_at: "2013-02-17 11:40:27">] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:54:24.707

`delete_if`适用于返回记录的数组，但不适用于数据库。尝试：

```
User.first.favourite_guidelines.where(guideline_id: 24).destroy_all 
```

PS。你也可以看看[这里](https://stackoverflow.com/questions/4177686/how-do-you-delete-in-active-record)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T12:02:15.953

试试这个：

```
 User.first.favourite_guidelines.destroy( :guideline_id => 24) 
```

或者

```
 User.first.favourite_guidelines.where( :guideline_id => 24).destroy_all 
```

# android - 如何在我的 android 项目中启动 Quick office 应用程序？

> ID：14920749
> 
> 赞同：2
> 
> 时间：2013-02-17T11:49:23.213
> 
> 标签：android, skype

我想在我的 android 应用程序中启动 Quickoffice 应用程序以及如何获取它的包名称。

我使用此来源启动 Skype：

```
enter code here
PackageManager packageManager = getPackageManager();
            Intent skype = packageManager
                    .getLaunchIntentForPackage("com.skype.raider");

            startActivity(skype); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:52:49.073

从 google playstore 您可以获得所需的包名称

在这种情况下，QuickOfficePro 具有**com.qo.android.am3**

Google Play 商店将软件包名称列为其 URL 中的 id 参数`https://play.google.com/store/apps/details?id=com.qo.android.am3`

顺便说一句，确保您正确处理错误，以防用户没有您想要安装的应用程序。

Play Store 上也有几个版本的快速办公，它们都有不同的包名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:54:24.443

转到网络上的 Playstore。

找到您要打开的应用程序，请参阅 URL。有2个快捷办公应用 [https://play.google.com/store/apps/details?id=com.qo.android.am3](https://play.google.com/store/apps/details?id=com.qo.android.am3)

和

[https://play.google.com/store/apps/details?id=com.qo.android.tablet.am](https://play.google.com/store/apps/details?id=com.qo.android.tablet.am)

最后一部分是应用程序 ID。

# php - php mysql 导出excel

> ID：14920750
> 
> 赞同：0
> 
> 时间：2013-02-17T11:49:36.007
> 
> 标签：php, mysql

如果页面不包含任何其他内容，则此代码可以正常工作。当我添加一个 html 表单时，它只将 html 内容提供给 excel。我需要使用该表单来自定义查询。如何使此代码与 html 内容一起使用？

```
<?php
if (isset($_POST['excel'])){
mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("dbname") or die(mysql_error());
mysql_query("SET NAMES 'LATIN5'");
mysql_query("SET character_set_connection = 'LATIN5'");
mysql_query("SET character_set_client = 'LATIN5'");
mysql_query("SET character_set_results = 'LATIN5'");

$select = "query here";

$export = mysql_query ( $select ) or die ( "Sql error : " . mysql_error( ) );

$fields = mysql_num_fields ( $export );

for ( $i = 0; $i < $fields; $i++ )
{
    $header .= mysql_field_name( $export , $i ) . "\t";
}

while( $row = mysql_fetch_row( $export ) )
{
    $line = '';
    foreach( $row as $value )
    {                                            
        if ( ( !isset( $value ) ) || ( $value == "" ) )
        {
            $value = "\t";
        }
        else
        {
            $value = str_replace( '"' , '""' , $value );
            $value = '"' . $value . '"' . "\t";
        }
        $line .= $value;
    }
    $data .= trim( $line ) . "\n";
}
$data = str_replace( "\r" , "" , $data );

if ( $data == "" )
{
    $data = "\n(0) Records Found!\n";                        
}

header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=your_desired_name.xls");
header("Pragma: no-cache");
header("Expires: 0");
print "$header\n$data"; }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:58:29.630

正如评论中所提到的，将 HTML 和 CSV 结合起来是不可能的

但是，您似乎只在发布表单 ($_POST['excel']) 时才输出 CSV。您应该在输出 CSV 后“停止”PHP 脚本，如下所示：

```
if($_POST['excel']) {
    // query and output CSV 
    //...

    exit(); //done outputting csv
}

// regular HTML form here; will only be output if NO form is sent 
```

使用这种方法，您的脚本将：

*   如果在未发送表单的情况下访问，则输出 HTML 表单
*   如果表单已提交，则输出 CSV。

但是，您可以重新考虑将这两个功能放在同一个 PHP 脚本中。在另一个脚本（例如 download_csv.php）中输出 CSV 并将表单的“操作”设置到该位置可能是一种更好的方法；

```
<form action='download_csv.php'> 
```

[更新] 要根据表单输入输出 HTML 或 CSV，您可以考虑这样做：

```
if($_POST['excel']) {
    // query and output CSV 
    include 'csv-exporter.php';
    exit(); //done outputting csv
} else if ($_POST['html']) {
    // query and output HTML
    include 'html-exporter.php';
    exit(); //done outputting html
} 
```

但是，这样“查询”部分将被复制。在这种情况下，最好将查询和“格式化”部分分开。您可以通过将它们放在一个函数中并使用其结果来做到这一点，例如：

```
if($_POST['excel']) {
    outputCSV(getResultsFromDatabase());
    exit();
} else if ($_POST['html']{
    outputHtmlList(getResultsFromDatabase());
    exit();
} 
```

这些函数可以放在单独的文件中，并使用 PHP 的“包含”功能包含在内。

两者都只是为了说明所有目的，对于您的原始问题来说有点偏离主题。

# html - 位于右侧的样式下拉菜单

> ID：14920752
> 
> 赞同：0
> 
> 时间：2013-02-17T11:49:49.023
> 
> 标签：html, css, drop-down-menu

所以基本上，我正在研究一个在页面右上角有一个固定位置的 jquery 菜单。“导航”框将始终显示。单击时，它会展开以显示“应用程序、论坛、公会和项目”。单击子菜单时，它将展开并显示为应用程序。

[http://i46.tinypic.com/xp6gox.png](http://i46.tinypic.com/xp6gox.png)

我无法让 css 看起来像这张图片。一些细节是每个“框”中的 6px 填充，它们下方的 3px 底部边距，子菜单将具有灰色背景，每个框的宽度取决于其文本的宽度。

这是实际的 HTML/CSS www.jsfiddle.net/3HAKX/

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:30:43.757

CSS 将如下所示：

`www.jsfiddle.net/3HAKX/1/`

你也想要一个下拉菜单的 JS 脚本吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T12:49:52.070

我不知道我是否理解你的问题。但这里是我将如何完成的代码。

```
<ul id="accordion">
            <li>
                <a href="#recent" class="heading">Application</a>
                                <ul>
                    <li><a href="#">January 2009</a></li>
                    <li><a href="#">December 2008</a></li>
                    <li><a href="#">November 2008</a></li>
                    <li><a href="#">October 2008</a></li>
                    <li><a href="#">September 2008</a></li>
                </ul>
            </li>
            <li>
                <a href="#archive" class="heading">Forum</a>
                <ul>
                    <li><a href="#">January 2009</a></li>
                    <li><a href="#">December 2008</a></li>
                    <li><a href="#">November 2008</a></li>
                    <li><a href="#">October 2008</a></li>
                    <li><a href="#">September 2008</a></li>
                </ul>
            </li>
            <li>
                <a href="#archive" class="heading">Guilds</a>
                <ul>
                    <li><a href="#">January 2009</a></li>
                    <li><a href="#">December 2008</a></li>
                    <li><a href="#">November 2008</a></li>
                    <li><a href="#">October 2008</a></li>
                    <li><a href="#">September 2008</a></li>
                </ul>
            </li>
            <li>
                <a href="#archive" class="heading">Projects</a>
                <ul>
                    <li><a href="#">January 2009</a></li>
                    <li><a href="#">December 2008</a></li>
                    <li><a href="#">November 2008</a></li>
                    <li><a href="#">October 2008</a></li>
                    <li><a href="#">September 2008</a></li>
                </ul>
            </li> 
```

CSS

```
ul#accordion{
float:right;
}
ul#accordion, ul#accordion ul { list-style: none; margin: 0; }
ul#accordion a.heading { 
    color: black;
    display: block;
    font-size:16px;
    font-weight:bold;
    text-decoration: none;
    margin-right:30px;
}
ul#accordion li ul a { font-size:14px;color: black; text-decoration: none;}
ul#accordion li ul a:hover { text-decoration: underline; }

#accordion li ul { display: none; }
#accordion li.current ul { display: block; } 
```

JS

```
$(document).ready(function() {
    $('ul#accordion a.heading').click(function() {
        $(this).css('outline','none');
        if($(this).parent().hasClass('current')) {
            $(this).siblings('ul').slideUp('slow',function() {
                $(this).parent().removeClass('current');
            });
        } else {
            $('ul#accordion li.current ul').slideUp('slow',function() {
                $(this).parent().removeClass('current');
            });
            $(this).siblings('ul').slideToggle('slow',function() {
                $(this).parent().toggleClass('current');
            });
        }
        return false;
    });
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/SGDDB/5/)

# visual-studio-2012 - VS2012如何关闭测试部署

> ID：14920754
> 
> 赞同：8
> 
> 时间：2013-02-17T11:50:04.197
> 
> 标签：visual-studio-2012, resharper, mstest

我对这个 .\TestResults 和测试部署混乱感到非常恼火。现在我试图完全关闭它，但没有任何效果。从[这里](http://msdn.microsoft.com/en-us/library/ms182475%28v=vs.110%29.aspx)：

> 考虑直接在构建输出目录中运行单元测试，以便测试运行得更快。在您签入测试后，这在构建服务器上特别有用。 **为此，请将 .runsettings 文件添加到您的解决方案中，包括 False，然后在“测试”、“测试设置”菜单中选择该文件。****在根本不使用 DeploymentItemAttribute**的任何测试运行中都会出现相同的效果。 但是，如果您使用 .testsettings 文件，则无法避免使用部署文件夹，这是 Web 和负载测试、编码的 UI 测试以及将应用程序部署到远程计算机的任何测试所必需的。

1.  我试图创建一个只有 C# 单元测试项目的空解决方案，该项目包含单个单元测试文件，其中包含单行： `string text = File.ReadAllText("test.txt");`猜猜它在哪里查找这个文件？**C:\Code\TestDeployment\TestResults\iLonely_ILONELY-PC 2013-02-17 13_33_37\Out\test.txt**

2.  我尝试将 test.runsettings 文件添加到解决方案中，如此[处](http://msdn.microsoft.com/en-us/library/jj635153.aspx)所述：

    ```
     <!-- MSTest adapter -->
      <MSTest>
        <MapInconclusiveToFailed>True</MapInconclusiveToFailed>
        <CaptureTraceOutput>false</CaptureTraceOutput>
        <DeleteDeploymentDirectoryAfterTestRunIsComplete>False</DeleteDeploymentDirectoryAfterTestRunIsComplete>
        <DeploymentEnabled>False</DeploymentEnabled>
      </MSTest> 
    ```

    我通过测试-> 测试设置-> 选择测试设置文件选择它，运行测试...结果是一样的。

谁能解释我如何从 Output\bin{Configuration} 文件夹运行测试？

**重要提示：我没有 .testsettings 文件，我不使用 DeploymentItem 属性**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:26:36.363

我发现这是一个 ReSharper 问题。当我通过 VS runner 运行测试时，一切正常，它从 Output\bin{Configuration} 运行。当我通过 ReSharper runner 运行测试时，无论我做什么，它都会从部署目录运行。现在，问题是：如何控制 ReSharper 测试运行器的 MSTest 部署？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-16T22:44:32.037

关于如何控制 ReSharper 测试运行器的 MSTest 部署的后续问题，我遇到了同样的问题并解决了。

默认情况下，它不起作用，但您可以通过根据[这些](http://www.jetbrains.com/resharper/webhelp/Reference__Options__Tools__Unit_Testing__MSTest.html)说明将 ReSharper 指向您的 .testsettings 文件来使其工作。

# tomcat6 - 确保使用 JAX-RS、Tomcat 和 Guice 销毁资源

> ID：14920758
> 
> 赞同：0
> 
> 时间：2013-02-17T11:50:30.300
> 
> 标签：tomcat6, jax-rs, guice, guice-servlet

我有一个使用 Tomcat 6 提供的 JAX-RS 网络服务。我正在使用 Guice 注入我的资源并创建 Servlet。

我肯定有内存泄漏，我认为这是因为我没有处理请求的结束或应用程序的关闭。

如果我不断刷新针对该服务的请求，我可以看到 Tomcat 的内存使用量会攀升并且在我回收 Tomcat 之前不会减少。

我尝试过 RTFM，但我并没有探索生命周期。

我使用创建 Servlet

```
public class RadWebServiceServletConfig extends GuiceServletContextListener {
   @Override
   protected Injector getInjector() {
      return Guice.createInjector(new JerseyServletModule() {
         @Override
         protected void configureServlets() {
            // Must configure at least one JAX-RS resource or the 
            // server will fail to start.
            bind(Crags.class);
            bind(IDataFacade.class).to(DataFacade.class);
            bind(IRepository.class).to(Repository.class);
             //filter all requests to log
            filter("/*").through(LoggingFilter.class);

            // Route all requests through GuiceContainer
            Map<String, String> params = new HashMap<String, String>();
            params.put("com.sun.jersey.spi.container.ContainerRequestFilters",
                        "com.sun.jersey.api.container.filter.GZIPContentEncodingFilter");
            params.put("com.sun.jersey.spi.container.ContainerResponseFilters",
                    "com.sun.jersey.api.container.filter.GZIPContentEncodingFilter");
            serve("/*").with(GuiceContainer.class, params);
         }
      });
   }
} 
```

那我是不是很傻？我在哪里捕获请求或应用程序上下文的结束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:52:54.393

我建议切换到常规 servlet 并删除 guice-servlet 扩展，至少要找到它是否是原因。

附加的 Guice 库（例如 guice-servlet、guice-persist）相当有缺陷。

我不知道任何内存泄漏本身，但 guice-servlet 重新实现了整个 Servlet 基础结构，请参阅这些错误：[http://code.google.com/p/google-guice/issues/list? q=RequestDispatcher](http://code.google.com/p/google-guice/issues/list?q=RequestDispatcher)

它还使用 ThreadLocal，当有人提到内存泄漏时，应该立即怀疑，请参阅[http://code.google.com/p/google-guice/source/browse/extensions/servlet/src/com/google/inject/ servlet/GuiceFilter.java](http://code.google.com/p/google-guice/source/browse/extensions/servlet/src/com/google/inject/servlet/GuiceFilter.java)

# jquery - RequireJS order 插件开始以正确的顺序获取但不等待文件下载？

> ID：14920767
> 
> 赞同：1
> 
> 时间：2013-02-17T11:51:31.023
> 
> 标签：jquery, download, requirejs

我正在尝试在一个项目中实现 RequireJS，但在让它正常工作时遇到了一些问题。如果我理解正确（否则插件将毫无意义），订单插件会以正确的顺序下载脚本，并在执行下一个模型之前等待每个模型下载。例子：

```
requirejs.config({
    paths: {
        'jquery': 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min'
    }
});

require(['order!jquery', 'order!models/flyInModal'], function() {
    $('.fly-in-modal').flyInModal();
}); 
```

那应该首先从路径下载jquery，在jquery加载完成后，继续加载flyInModal.js。正确的？

到目前为止，这就是正在发生的事情：

1.  require.js 加载
2.  init-front.js 加载
3.  order.js 加载
4.  jquery*开始*加载
5.  flyInModal.js 加载
6.  jquery在flyInModal.js加载*后*完成加载，由于缺少jQuery而导致错误

chrome开发工具截图：http: [//i.imgur.com/pdpBbak.png](http://i.imgur.com/pdpBbak.png)

我是否误解了这一点，或者它现在是否正常工作？如果在继续之前不等待脚本完成加载，我发现 order.js 毫无意义。有些脚本比其他脚本具有更高的延迟，就是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:49:06.247

在 RequireJS 2.x`order`中已被弃用，取而代之的是`shim`- [http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

为什么要删除它的详细信息 - [https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim)

# ios - 在 xCode 中创建类似于太阳天气应用程序的动画渐变背景

> ID：14920768
> 
> 赞同：13
> 
> 时间：2013-02-17T11:51:31.400
> 
> 标签：ios, animation, background, gradient

尽管我以前曾问过这个问题，但我想再次与您联系，以澄清我想在您的帮助下完成什么。我想知道如何在 xCode 中创建一个 iOS 应用程序的背景，类似于 Solar 天气应用程序的背景（提供屏幕截图），它会随着时间的推移（在一个周期内）略有变化。如您所见，渐变非常平滑，显然包含两个以上的要点。任何有关示例或代码片段的帮助将不胜感激。再次感谢，本。

![截图 1](../Images/806e279660e7251046dee6513b118897.png) ![截图 2](../Images/fef63cfdb8940e0c484d246fb6f96371.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T12:14:58.033

我需要的是：

1.  将 a 添加`CAGradientLayer`到您的视图控制器（或自定义视图），例如：

    ```
    @property (nonatomic, retain) CAGradientLayer *gradient; 
    ```

2.  在您的视图控制器中，在 viewDidLoad 中，创建渐变层并将其添加到您的视图中：

    ```
    self.gradient = [CAGradientLayer layer];
    gradient.frame = self.view.bounds;
    gradient.colors = [NSArray arrayWithObjects:
                   (id)topColor.CGColor,
                   (id)bottomColor.CGColor,
                   nil];
    gradient.locations = [NSArray arrayWithObjects:
                      [NSNumber numberWithFloat:0.0f],
                      [NSNumber numberWithFloat:0.7],
                      nil];
    [self.view.layer addSublayer:self.gradient]; 
    ```

    3a。将 NSTimer 添加到您的控制器中，该控制器将`self.gradient`通过执行以下操作以适当的时间间隔更新：

    ```
     topColor = ...; bottomColor = ...;
      NSArray* newColors = [NSArray arrayWithObjects:
                     (id)topColor.CGColor,
                     (id)bottomColor.CGColor,
                     nil];
     [(CAGradientLayer *)self.layer setColors:newColors]; 
    ```

    这将允许您准确地决定在每个步骤中要用于渐变的颜色。否则，您可以尝试使用动画，如下所示：

    3b。像这样添加动画，

    ```
    - (void)animateLayer... {

      [UIView animateWithDuration:duration 
                            delay:0
                          options:UIViewAnimationOptionCurveEaseInOut
                       animations:^{
        [CATransaction begin];
        [CATransaction setAnimationDuration:duration];

          topColor = ...; bottomColor = ...;
          NSArray* newColors = [NSArray arrayWithObjects:
                     (id)topColor.CGColor,
                     (id)bottomColor.CGColor,
                     nil];
         [(CAGradientLayer *)self.layer setColors:newColors];

         [CATransaction commit];
      }
              completion:^(BOOL b) {
                  [self animateLayer..];
              }];
    } 
    ```

您也可以结合 3a 和 3b。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-21T12:50:39.163

Simple working example:

.h file

```
@property (strong, nonatomic) CAGradientLayer *gradient; 
```

.m file

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear: animated];

    self.gradient = [CAGradientLayer layer];
    self.gradient.frame = self.view.bounds;
    self.gradient.colors = @[(id)[UIColor purpleColor].CGColor,
                             (id)[UIColor redColor].CGColor];

    [self.view.layer insertSublayer:self.gradient atIndex:0];

    [self animateLayer];
}

-(void)animateLayer
{

    NSArray *fromColors = self.gradient.colors;
    NSArray *toColors = @[(id)[UIColor redColor].CGColor,
                          (id)[UIColor orangeColor].CGColor];

    [self.gradient setColors:toColors];

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"colors"];

    animation.fromValue             = fromColors;
    animation.toValue               = toColors;
    animation.duration              = 3.00;
    animation.removedOnCompletion   = YES;
    animation.fillMode              = kCAFillModeForwards;
    animation.timingFunction        = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    animation.delegate              = self;

    // Add the animation to our layer

    [self.gradient addAnimation:animation forKey:@"animateGradient"];
} 
```

You might want to implement an additional method to shift the colors, and then reanimate the changes. But this should help you get there.

# cakephp - 保存在表 HABTM 中创建的字段

> ID：14920772
> 
> 赞同：0
> 
> 时间：2013-02-17T11:51:40.460
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

如何在 CakePHP HABTM 表中保存元素的创建日期，我尝试使用 created 字段，这在其他表中是正常的，但这不起作用。我还尝试在我的控制器中保存一个 dateTime 这样做：

```
$data = array ('created' => date ('Y-m-d H:i:s "));
$this->model->UpdateAll($data,$conditions); 
```

但它不起作用，它有一个 sql 错误`H:I:S`

```
 MySQL server version for the right syntax to use near '12:56:32' 
```

有谁知道这样做的任何方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:57:51.343

您可以为连接表创建单独的模型。例如，如果您有一个模型 users 和一个模型帖子和用户 HABTM 帖子，那么您还有一个表 usersposts。您可以创建模型用户帖子，为用户模型分配一个新关系 hasMany userposts，最后从用户控制器调用：

`$data = array ('created' => date ('Y-m-d H:i:s'));
$this->User->UsersPosts->save($data);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:25:51.323

我在插入日期时找到了数据库中错误的解决方案：

```
$time = "'". date (' Y-m-d H: i: s '). "'";
$data = array ('created' => $time);
$this-> model-> UpdateAll ($ data, $ conditions); 
```

但我还没有找到表 HABTM 中自动完成创建字段的解决方案

# wpf - Caliburn.Micro，根据特定条件启用文本框（相当于按钮的 CanExecute）

> ID：14920774
> 
> 赞同：2
> 
> 时间：2013-02-17T11:51:48.887
> 
> 标签：wpf, mvvm, caliburn.micro

我已经尝试找到答案一段时间了，但是我可以使用带有内置约定的 Caliburn.Micro 启用/禁用文本框，还是需要为此功能进行自定义绑定？

对于一个名为“Run”的按钮，我可以有一个名为“CanRun”的布尔属性。但这似乎不适用于文本框。

# winforms - Visual Studio 2010 调整 winform 的大小

> ID：14920775
> 
> 赞同：0
> 
> 时间：2013-02-17T11:51:54.987
> 
> 标签：winforms, visual-studio-2010

我在一台分辨率为 1280x800 的笔记本电脑上开发。在我的 winforms 应用程序中，有些表单的高度大于 800。通常我连接 17 英寸或 19 英寸的液晶显示器，但如果没有，我打开一个 1280x1024 的表单，Visual Studio 2010 会自动调整我的笔记本电脑分辨率我的表单然后我在调整所有控件的大小时遇到​​了一些麻烦。

我想知道是否有避免这种行为的选项。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:51:59.787

您已经研究了[.DockStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.dockstyle.aspx)和[.AutoSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.autosize.aspx)行为

# appharbor - AppHarbor 附加组件 Yocto 到 Nano 升级

> ID：14920780
> 
> 赞同：0
> 
> 时间：2013-02-17T11:52:50.600
> 
> 标签：appharbor

是否可以将使用 Yocto Add-on 创建的 SQL Server 数据库升级到 Nano 计划而不会丢失数据或者它是一个新数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:06:32.797

您可以在 Nano 和 Yocto 计划之间自由切换，无需数据迁移。如果升级到专用数据库计划之一，则当前必须手动迁移数据。

# c - 在数组中搜索字符串并返回索引

> ID：14920781
> 
> 赞同：1
> 
> 时间：2013-02-17T11:52:56.533
> 
> 标签：c

我的代码有问题。输入要搜索的字符串后，程序崩溃。

我检查了我的代码，但我仍然无法弄清楚出了什么问题。

需要你的建议。

```
#include <stdio.h>
#include <string.h>

int findTarget(char *string, char *nameptr[], int num);
int main()
{
int index, index2;
int size;
char *nameptr[100];
char *string[100];

printf("Enter the number of names: ");
scanf("%d",&size);

for(index=0; index<size; index++)
{
    printf("Enter A Name: ");
    scanf("%s", &nameptr[index]);
}

printf("\nEnter a string to search:");
scanf("%s", &string);

index2 = findTarget(string[100], nameptr, size);

if ( index2 == -1 )
{
  printf("\nNo - no such name\n");
}
else
{
  printf("\nYes - matched index location at %d\n", index2);
 }
return 0; 
```

}

```
 int findTarget(char *string, char *nameptr[], int num)
 {
int i=0;

for ( i = 0 ; i < num ; i++ )
{

    if (strcmp(nameptr[i],string)==0)
    {
        return i;
        break;
    }
}

return -1; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:54:17.547

您从未将内存分配给`&nameptr[index]`，因此在其中使用它`scanf`是未定义的行为。`malloc`你应该尝试在调用之前做一个`scanf`。此外，您应该删除`&`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:57:15.313

你有一个数组`char*`，但是当你对它做 a`scanf`时，你实际上并没有分配一个缓冲区。

相反，您应该首先通过以下方式为缓冲区保留内存：

```
for(i=0; i<100; i++) {

    nameptr[i] = malloc(STRING_BUFFER_SIZE);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:58:37.360

您代码中的问题通常可以描述为“内存管理”：

*   您不为单个字符串分配内存
*   您正在将错误的地址传递给`scanf`
*   您的使用`scanf`允许缓冲区溢出
*   您声明`string`为 100 个字符串的数组，而不是单个字符串
*   您正在传递`string[100]`给搜索功能

要解决此问题，您需要使用动态分配单个字符串`malloc`。您可以使用临时缓冲区，然后使用 复制`strdup`，或预先分配 100 个字符，并将其限制`scanf`为。

这是您的程序需要更改的部分：

```
char *nameptr[100];
char string[100]; // The asterisk is gone

printf("Enter the number of names: ");
scanf("%d",&size);

for(index=0; index<size; index++) {
    char buf[100];
    printf("Enter A Name: ");
    scanf("%99s", buf); // Note the limit of 99
    buf[99] = '\0'; // Just to make sure it's terminated
    nameptr[index] = strdup(buf);
}

printf("\nEnter a string to search:");
scanf("%99s", string); // No ampersand

index2 = findTarget(string, nameptr, size); // string, not string[100]

for (index=0; index<size; index++) {
    free(names[i]);
} 
```

其余的只是“风格要点”：

*   搜索功能中不需要`break`after`return`
*   您不需要`i`在循环之前和循环*中*初始化
*   `\n`不鼓励在行首打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T14:09:35.807

好吧，崩溃的原因是因为您没有为字符串分配内存。

使用`char nameprt[100];`而不是`*char nameptr[100];`. 您声明的是一个指向字符的指针数组，而不是一个 100 个字符的数组。

在 scanf 中，您必须这样做`scanf("%s", nameptr);` 原因在于，scanf 需要一个指向数组的指针。`&`因此，如果变量已经是指针，则没有理由。

# java - Swing 在 invokeLater() 上不断产生线程

> ID：14920785
> 
> 赞同：0
> 
> 时间：2013-02-17T11:53:25.143
> 
> 标签：java, swing

我是 Java UI 和 Swing 的新手，我不明白为什么会这样。

```
public class ZAsciiMapWindow extends JFrame implements KeyListener, Runnable {

    ...

    // SWING STUFF
    private JTextArea displayArea = null;
    private JTextField typingArea = null;

    public ZAsciiMapWindow(final ZMap map, final ZHuman player) {
        super("ZAsciiMapWindow");
        this.map = map;
        this.player = player;
    }

    ...

    public void show() {
        try {
            UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
        } catch (UnsupportedLookAndFeelException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InstantiationException ex) {
            ex.printStackTrace();
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        }
        /* Turn off metal's use of bold fonts */
        UIManager.put("swing.boldMetal", Boolean.FALSE);

        //Schedule a job for event dispatch thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(this);
    }

    private void addComponentsToPane() {

        this.typingArea = new JTextField(20);
        this.typingArea.addKeyListener(this);
        this.typingArea.setFocusTraversalKeysEnabled(false);

        this.displayArea = new JTextArea();
        this.displayArea.setEditable(false);
        JScrollPane scrollPane = new JScrollPane(this.displayArea);
        scrollPane.setPreferredSize(new Dimension(375, 125));

        getContentPane().add(this.typingArea, BorderLayout.PAGE_START);
        getContentPane().add(scrollPane, BorderLayout.CENTER);
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private void createAndShowGUI() {
        //Create and set up the window.
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Set up the content pane.
        this.addComponentsToPane();

        //Display the window.
        this.pack();
        this.setVisible(true);
    }

    @Override
    public void run() {
        createAndShowGUI();
    }
} 
```

然后，当我`new ZAsciiMapWindow(x, y).show()`从 my调用时`main()`，它永远不会显示 JFrame。如果我调试我发现它一直`createAndShowGUI()`在调用无限。

为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:57:20.887

`javax.swing.SwingUtilities.invokeLater(this);`调用传递的 Runnable 的 run 方法。你的`run`方法是`createAndShowGUI();`，`this.setVisible(true);`我假设调用`this.show()`哪个调用，然后调用`javax.swing.SwingUtilities.invokeLater(this);`。

所以这种行为并不令人惊讶。

我会首先避免让一个类扩展 JFrame，实现 KeyListener 和 Runnable。

例如，在您的类中包含一个 JFrame 而不是直接扩展 JFrame 是一种很好的做法。

# javascript - 使用 JavaScript 或 jQuery 读取数组 JSON

> ID：14920789
> 
> 赞同：1
> 
> 时间：2013-02-17T11:53:59.500
> 
> 标签：javascript, arrays, json

我有下一个数组 json，我怎么读它？我已经试过了`document.write(arr)`，它可以工作，但如果我把`document.write(arr[0].Category)`它显示出来`undefined`，

```
var arr = [{"Category":
{"cell":{"question1":{"que1":"What is the cell?"},
"option1":{"op1":"The cell is the basic structural and functional unit",
"op2":"is a fictional supervillain in Dragon Ball"},"answer1":"opt1"}}},
{"Category":{"Mars":{"question1":{"que1":"How many moons does Mars?"},
"option1":{"op1":"5","op2":"2"},"answer1":"opt2"}}}] 
```

顺便说一下，数组很好，因为如果我这样做`document.write(arr)`，它会返回相同的数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:05:58.830

该代码确实有效。看：http: [//jsfiddle.net/5GTWp/](http://jsfiddle.net/5GTWp/)

```
console.log(arr[0].Category);
document.write(arr[0].Category.cell.question1.que1); 
```

记录对象，
写入：`What is the cell?`

```
document.write(arr[0].Category) 
```

写`[object Object]`，不是未定义。

问题不在给出的代码中。

编辑：更多信息。OP 在评论中添加了*“我需要说，que 数组是从 json 文件中提取的，我做了一个 var arr = JSON.stringify(arrjson)”*

如果您将 arr 设为字符串，它将无法正常工作。你给的例子！=你的问题。

```
document.write(arrjson[0].Category); 
```

是您正在寻找的对象。

# nhibernate - 使用 NHibernate 的每组身份

> ID：14920793
> 
> 赞同：0
> 
> 时间：2013-02-17T11:54:15.670
> 
> 标签：nhibernate, nhibernate-mapping

我正在使用 NHibernate 3.3.2（第一次）并且我正在尝试创建下表，以便 ID 是唯一的表/实体标识符，并且序列是每个组的唯一身份，在表示例 clubs 123 , 232 和 444 是组。

```
ID Club Sequence
1  123  1
2  123  2
3  232  1
4  232  2
5  444  1
6  123  3 
```

我希望插入仅与俱乐部类别一起使用，这两个身份都是自动的。

这可以做到吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:53:28.553

如果问题是这样的：

> 根据这种模式在 Sequence 列中生成值的最佳方法是什么？

那么这里有一些提示：

*   要让数据库生成序列列，我认为您需要查看基于触发器的解决方案。您所说的“组”对数据库没有任何意义，除非您创建一些（SQL-）代码来处理它。您可能想要创建一个存储过程来生成数字，然后是一个 INSERT 触发器。

*   可以告诉 NHibernate 忽略 INSERT 列，而只读回 DB 生成的值。请参阅NHibernate 参考中的[生成的属性](http://nhforge.org/doc/nh/en/index.html#mapping-generated)。

*   如果您删除 Id 列，您描述的结构类似于 NHibernate 中列表的映射将生成的结构。收藏始终归某物所有，因此如果您拥有 Club 拥有的收藏，这可能是一个解决方案。然后 Club 列将指向集合所有者，而 Sequence 将是列表中的索引。（我假设该表应该包含更多列，然后是列表中的元素。）

我认为您需要做的是考虑什么*对象模型*对您的问题有意义。然后设计表格以匹配它。NHibernate 擅长处理现有的遗留表模型，但如果您从头开始，则首先创建模型是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:24:51.577

如果执行插入，则可以在您的属性映射中指定一个生成最大序列的公式。或者，如果不存在，您可以更改您的实体以生成序列号。

# jquery - CodeIgniter、jQuery 加载和奇怪的 Google 内容索引

> ID：14920798
> 
> 赞同：1
> 
> 时间：2013-02-17T11:54:27.810
> 
> 标签：jquery, codeigniter, seo, indexing

我的网站的 Google 索引有一个奇怪的问题。这是所有搜索引擎的问题，但我将以谷歌为例。（该网站是保加利亚语）

该网站用于烹饪食谱。它是使用 CodeIgniter 构建的，它使用 jQuery 加载函数来加载食谱的注释。jQuery 加载调用不能通过 URL 请求直接访问的控制器函数，但仅当请求是 ajax 时才可访问。

如果您尝试直接访问获取评论功能（不是 ajax），您将被重定向到与 uri 段对应的配方（如果没有找到，则为主页）。

问题是，谷歌只索引我的 ajax 请求，而不是食谱的实际页面。

下面我放置代码和问题的链接。

域名是[http://www.gotvachnicata.com/](http://www.gotvachnicata.com/)，我们可以获取例如以下配方：[http ://www.gotvachnicata.com/potrebiteli/gotvachnicata/recepta/domashna-pica-sas-salam-i-lyuti -丘什基](http://www.gotvachnicata.com/potrebiteli/gotvachnicata/recepta/domashna-pica-sas-salam-i-lyuti-chushki)

我们有加载评论的ajax请求以下列方式执行：

```
$(document).ready(function(){
    $('.recipe-comments').load('http://www.gotvachnicata.com/process/get_recipe_comments/24');
}); 
```

最后一段是配方的 ID。如果您通过 ajax 请求此控制器功能，您将获得具有此 ID 的配方的注释，如果您尝试直接访问它，您将被重定向到具有此 ID 的配方。这是通过以下代码完成的。

```
if ($this->input->is_ajax_request()) {
         //Load the comments
    } else {
         //Redirect to the recipe    
} 
```

我已将我的站点地图提交给 Google。你可以在这里看到它：[http ://www.gotvachnicata.com/sitemaps/sitemap_recipes.xml](http://www.gotvachnicata.com/sitemaps/sitemap_recipes.xml)

如果这有什么不同，我也会使用结构化数据 ( [http://schema.org/ )。](http://schema.org/)

最后是实际问题 - 当我在谷歌搜索我的食谱时（搜索链接[http://bit.ly/XhNk3K](http://bit.ly/XhNk3K)）我收到以下链接显示在搜索结果中

[http://www.gotvachnicata.com/process/get_recipe_comments/24](http://www.gotvachnicata.com/process/get_recipe_comments/24)

代替

[http://www.gotvachnicata.com/potrebiteli/gotvachnicata/recepta/domashna-pica-sas-salam-i-lyuti-chushki](http://www.gotvachnicata.com/potrebiteli/gotvachnicata/recepta/domashna-pica-sas-salam-i-lyuti-chushki)

这适用于网站上的所有食谱。看起来谷歌索引 ajax 请求而不是实际页面。

我真的不知道它为什么这样做以及我需要更改什么来修复它。对我来说，SEO 对这个网站非常重要，我希望在 Google 中索引 SEO 友好的 URL。

# sass - Sass - 操纵继承的财产？

> ID：14920801
> 
> 赞同：41
> 
> 时间：2013-02-17T11:55:12.327
> 
> 标签：sass

在 Sass 中，是否可以操作给定元素已经继承的值？

我的目标是这样的：

```
body
  color: blue
  .warning
    color: red

strong
  color: darken(inherit,20) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-17T12:59:55.323

# 遗产

不，Sass 不“知道”从哪个选择器继承颜色。它必须知道那`strong`是 的后代`body`。对你我来说，这似乎是一个足够合理的假设，因为`strong`它不允许在身体之外，但是对于大多数选择器来说，这种假设是不能做出的。Sass 还必须知道其他祖先元素不会发生级联。

```
ul {
    color: red;
}

ol {
    color: blue;
}

li {
    // which color do I inherit from ????
} 
```

# 那么我可以指定要从*哪个选择器复制吗？*

Sass 也不授予以任何方式访问任何先前声明的变量的值。没有办法指定“比身体的颜色更暗”。CSS 规则不是对象或映射，不能以任何方式访问。您的案例可能很简单，但考虑一个更复杂的案例，如下所示：

```
.foo {
    background: mix(white, blue); // fallback for non-rgba browsers
    background: rgba(blue, .5);

    .baz & {
        background: yellow;
    }

    @media (min-width 30em) {
        background: orange;
    }

    @supports (flex-wrap: wrap) {
        background: red;
    }
}

.bar {
    // access which background color from .foo ????
} 
```

# 那么我*能做*什么呢？

你要么需要使用变量，要么它必须是 vanilla CSS 的一个特性才能做你想做的事情。

## 老式的 CSS

某些属性可能会产生使用浏览器支持*多年*的东西动态生成/继承的错觉：

```
ul.one {
  background: white;
}

ul.two {
  background: yellow;
}

ul {
  background: rgba(0, 120, 255, .2);
  padding: 1em;
}
```

```
<ul class="one">
  <li><ul>
    <li><ul>
      <li>Foo</li>
    </ul></li>
  </ul></li>
</ul>

<ul class="two">
  <li><ul>
    <li><ul>
      <li>Foo</li>
    </ul></li>
  </ul></li>
</ul>
```

## CSS 变量

生成 CSS 变量几乎与您能够操作继承的属性一样接近。浏览器支持还不完全存在（检查[caniuse](http://caniuse.com/#feat=css-variables)），但看起来像这样：

萨斯：

```
ul {
  --list-color: orange;
  --darker-color: darken(orange, 15%);
  color: var(--list-color);
}

ol {
  --list-color: green;
  --darker-color: darken(green, 10%);
  color: var(--list-color);
}

li {
  background: var(--darker-color);
} 
```

输出：

```
ul {
  --list-color: orange;
  --darker-color: #b37400;
  color: var(--list-color);
}

ol {
  --list-color: green;
  --darker-color: #004d00;
  color: var(--list-color);
}

li {
  background: var(--darker-color);
}
```

```
<ul>
  <li>Foo</li>
</ul>

<ol>
  <li>Bar</li>
</ol>
```

如果您使用的浏览器支持 CSS 变量，则结果应如下所示：

[![在此处输入图像描述](../Images/9ea58677bfef9aa9934bb367a7bd3ddd.png)](https://i.stack.imgur.com/lwGxQ.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-12T19:05:51.620

我正在寻找同样的东西，并遇到了这个。你的问题得到了回答，但并没有解决问题。

这是解决方案：[http ://codepen.io/monsto/pen/tiokl](http://codepen.io/monsto/pen/tiokl)

如果您的 HTML 是这样的：

```
 <div class="main">
      <header class="header">
        <div class="warning">
          <p><strong>Danger,</strong> Will Robinson!</p>
        </div>
      </header>
    </div> 
```

然后使用 SASS 你可以这样做：

```
$bg: #f88;

@mixin colorize {
  $bg: darken($bg,15%) !global; // !global flag required for 3.4 or later, remove if using 3.3 or older
  background: $bg;
}

.warning {
  background: $bg;
  p {
    @include colorize;
    strong {
      @include colorize;
    }
  }
} 
```

SASS 似乎不知道它的输出结果。因此，`inherit`对它没有任何意义。您基本上是在要求它在输出之前知道输出是什么。

但是，它确实知道它的变量，因为默认情况下，它们的范围很窄。从文档：

> 变量仅在定义它们的嵌套选择器级别内可用。如果它们是在任何嵌套选择器之外定义的，那么它们在任何地方都可用。

然后混入中的变量：

> 传递给 mixin 的内容块在定义块的范围内进行评估，而不是在 mixin 的范围内。

这允许上述 mixin 采用在父级别中定义的已知变量，并将其重新定义为当前级别并可供其子级使用。这就像`$x = $x + 1`在一个多嵌套循环中做

*[TBPH，这改变了我对 SASS 的看法。它显然比我想象的要程序化得多。]*

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-24T15:57:51.200

鉴于一个元素不能具有多个组合的相同属性，并且`inherit`无法知道当前呈现的状态是什么，您的选择是

1) 使用 SASS 变量自己跟踪过去的转换：[**Demo**](https://jsfiddle.net/0tt5gmoy/1/)

```
.parent {
  $firstTrans: translateX(50%);
  transform: $firstTrans;

  .child {
    /* Old followed by new */
    transform: $firstTrans rotate(10deg);
  }
} 
```

2）将转换应用到父级（如果需要，可能添加另一个容器）：[Demo](https://jsfiddle.net/0tt5gmoy/2/)

3) 使用 Javascript 将当前变换与您要添加的变换组合（这是确保删除应用于父级的变换的唯一方法）：[Demo](https://jsfiddle.net/0tt5gmoy/3/)

**注意**：由于[此元帖子，此答案来自合并帖子](https://meta.stackoverflow.com/q/312917/2065702)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-10T03:04:11.983

这个答案`darken`专门针对该功能：一种可能的替代方法是使用 CSS`brightness()`过滤器而不是 SASS（或 LESS）的`darken()`功能。您基本上需要将颜色包装在`span`标签内，这样过滤器就不会影响其他元素。

简单演示：

```
.red {color: red}
.blue {color: blue}
.green {color: green}

span {
  display: inline-block;
  padding: 1em;
}

.darken span {
  -webkit-filter: brightness(0.4);
  filter: brightness(0.4);
}
```

```
<span class="red">Red</span>
<span class="blue">Blue</span>
<span class="green">Green</span>

<div class="darken">
  <span class="red">Red</span>
  <span class="blue">Blue</span>
  <span class="green">Green</span>
</div>
```

jsFiddle：[https ://jsfiddle.net/azizn/hhorhz9s/](https://jsfiddle.net/azizn/hhorhz9s/)

您需要牢记浏览器兼容性，它应该适用于 IE Edge、最新的 Firefox 和 Chrome。有关更多信息，请参阅[caniuse](http://caniuse.com/#feat=css-filters)或[MDN](https://developer.mozilla.org/en/docs/Web/CSS/filter)。

在背景变暗的情况下，您可以使用具有不透明度的伪选择器或添加半透明的黑色 PNG 背景图像。

# autohotkey - 退出游戏的 AutoHotKey 基本脚本

> ID：14920802
> 
> 赞同：1
> 
> 时间：2013-02-17T11:55:12.677
> 
> 标签：autohotkey

我正在尝试创建一个简单的脚本来使用 F1 退出“流放之路”。为此，我必须在游戏中单击 ESC，然后在 964,440 位置单击鼠标。我尝试了几种方法来做到这一点，但没有运气。

信息：

```
Path of Exile ahk_class Direct3DWindowClass
On Screen:              964, 440
In Active Window:       964, 440 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:39:40.750

这是一种方法...

```
#ifWinActive, ahk_class Direct3DWindowClass
    F1::
        Send, {Esc}
        Sleep, 500
        Click, 964, 440
    Return
#ifWinActive 
```

这仅在您的程序处于活动状态时才有效。当您的程序处于活动状态时，该`F1`键将导致`Esc`按下 400 毫秒后，它将单击您的特定 X/Y 坐标。当您的程序未运行时，`F1`密钥将正常运行。

# jquery - 缓存为假时从缓存中获取数据

> ID：14920805
> 
> 赞同：0
> 
> 时间：2013-02-17T11:55:35.207
> 
> 标签：jquery, ajax

我正在使用以下代码自动登录到我的电子邮件帐户：

```
$.ajax({
   async: false,
   cache: false,
   type: 'POST',
   dataType: 'html',
   data: ({
       '_token': token_value,
       '_task': 'login',
       '_action': 'login',
       '_timezone': '2',
       '_dstactive': '0',
       '_url': '',
       '_user': _username,
       '_pass': _password
   }),
   url: 'https://mail.somesite.com/index.php',
   success: function (data) {
       //after login get the central email page where the email count is displayed
       $.ajax({
           async: false,
           cache: false,
           type: 'GET',
           dataType: 'html',
           url: 'https://mail.somesite.com/index.php?_task=mail',
           success: function(data1) {
               var descNode = document.createElement("div");
               descNode.innerHTML = data1;
               var unreadcount = descNode.getElementsByClassName("unreadcount");
            /*process unreadcount etc*/
         },
         error: function () {
            // something went wrong with the request
            error_occurred();
            return;
         }
      });
   },
   error: function () {
      // something went wrong with the request
      error_occurred();
      return;
   }
}) 
```

问题是，在获取一个具有“未读计数”类的对象以获取用户的未读电子邮件计数后，我得到了一个旧页面。

例如，如果我登录我的电子邮件帐户，看到我有 2 封电子邮件并运行此功能，我将被告知我有 2 封电子邮件。如果我从我的帐户注销，从另一个帐户向我的帐户发送一封电子邮件并重新运行此功能，它将找不到新的电子邮件（它仍然只会显示 2 封电子邮件）。我已经尝试查看 data1 的内容，`console.log()`并且我很确定该函数没有出错（因为 'unreadcount' 的值确实仍然是 2）。

当然，当我正常登录时，我可以看到我的帐户中有 3 封电子邮件。奇怪的是（？）登录后（即使我注销，在此之后）并运行上述功能，它会找到第三封电子邮件。

所有这些都让我得出结论，我被引导到一个缓存页面，但我在任何情况下都将缓存设置为 false。我怎样才能避免这种情况发生？

# javascript - 是否可以 onclick="history.clear();"

> ID：14920806
> 
> 赞同：12
> 
> 时间：2013-02-17T11:55:36.453
> 
> 标签：javascript, cordova, logout

我将在我的 PhoneGap 应用程序中实现**注销**按钮，它将用户返回到身份验证页面（清除字段）。对于按钮，我使用带有 onclick 事件的锚点：

```
<script type="text/javascript">
function doLogout() {
    var backlen = history.length;
    history.go(-backlen);
    window.location.replace("index.html");
}
</script>

<a data-role="none" href="#" onclick="doLogout"></a> 
```

但它不起作用，即它只是将我返回到已填写文件的身份验证页面，似乎只是退了一步。我不确定**history.clear()**，因为谷歌搜索它什么也没给我：

```
<a data-role="none" href="index.html" onclick="javascript:history.clear();"></a> 
```

谁能告诉我我的问题在哪里？如果有另一种解决方案来处理 PhoneGap 中的注销事件，我会遵循它。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-17T12:18:49.050

调用`history.go`将被忽略，因为您将比历史记录中的项目多退一步。该`length`属性具有包括当前项在内的项目数，因此如果历史记录中有四个项目，则只能返回三步。

要回到第一步，您将从长度中减去一个：

```
history.go(-(history.length - 1)); 
```

但是，如果您专门为该页面打开了一个新窗口，那只会将您带回您的起始页面。否则，它将带用户回到他使用该窗口访问的第一页。

* * *

对象没有`clear`方法`history`。

参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.history](https://developer.mozilla.org/en-US/docs/DOM/window.history)

浏览器历史属于用户，您不能从中删除任何内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-04T10:54:55.700

我从未开发过任何 PhoneGap，但在 Web 应用程序中，您可以使用下面的代码。

尝试`window.location.replace(url);`

重定向后没有办法去上一页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T12:00:59.280

如果使用`onclick`属性，引号中的内容是实际语句，而不仅仅是函数的名称。所以：

```
<a data-role="none" href="#" onclick="doLogout();"></a>
<!-- Note the (); ----------------------------^^^   --> 
```

另请注意，由于您没有采取任何措施来阻止跟随链接的默认操作，因此浏览器将跟随`href`，这会将`#`您带到当前页面的顶部。您可以通过添加以下内容来防止这种情况（如果您愿意）`return false;`：

```
<a data-role="none" href="#" onclick="doLogout(); return false;"></a> 
```

我无法理解您问题的第二部分，但我会注意到您不需要或不需要第二个示例中的`javascript:`on`onclick`属性。您仅在需要 URI 的地方使用该伪协议（例如，`href`锚点的 ）。属性的内容`onXYZ`始终是代码，而不是 URI。

最后：除非你在做一些样式，否则这两个链接都很难点击，什么是空的。:-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-22T15:49:19.783

使用：navigator.app.clearHistory();

# java - 是否有可能检测到孩子的父母转变？

> ID：14920818
> 
> 赞同：0
> 
> 时间：2013-02-17T11:56:46.420
> 
> 标签：java, javafx-2

javafx.scene.Group 的 javadoc 说：

> 应用于组的任何变换、效果或状态都将应用于该组的所有子项

但是是否有可能检测到应用于其子项中的组的变换？即，如果父组对其应用了转换，您可以收听子项的属性吗？我尝试听 layoutXProperty()、translateXProperty()、getTransforms()，但无法检测到那里的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:16:06.500

当您向节点添加变换时，该变换将通过内部场景图渲染机制传播到其所有子节点（如果适用，并且没有错误），并且无法在子节点中知道它。子节点的转换列表对应于应应用于该节点及其子节点的转换，并且由用户设置，并且此列表（或相应的属性）不会通知您有关从父节点完成的转换。

# mysql - 为什么我的查询不起作用

> ID：14920820
> 
> 赞同：0
> 
> 时间：2013-02-17T11:57:07.907
> 
> 标签：mysql, sql

我的工作是连接来自多个表的数据。其中一部分是在包含“联合”之前完成的。现在我必须从“migrated_loan_account”表中获取数据。所以我加入了它。但是当我添加该字段时，它不起作用。当我评论这 4 个字段时，它起作用了。我不明白该怎么做。谁能帮我解决这个问题？！下面是我的代码：

```
` SELECT -- office_info.office_ref_code AS old_office_code
                        -- , office_info.office_code
                        -- , office_info.office_name
                        -- , project_info.project_ref_code AS old_project_code
                        -- , project_info.project_code
                        -- , project_info.project_name
                        -- ,
                        IFNULL(group_info.group_reference_number, '') AS old_group_code
                        , IFNULL(RIGHT(group_info.group_code, 5), '') AS group_code
                        , IFNULL(group_info.group_name, '') AS group_name
                        , IFNULL(member_info.reference_no, '') AS old_member_code
                        , RIGHT(member_info.member_no, 5) AS member_code
                        , member_info.member_name
                        , IFNULL(savings_account.savings_balance,0) AS savings_balance
                        , la.account_ref_no AS old_loan_no
                        , la.account_no AS loan_no
                        , loan_status.name AS loan_status
                        , DATE(la.disbursement_date) AS disbursement_date
                        , IFNULL(la.disbursed_amount,0) AS disbursed_amount
                        , IFNULL(la.outstanding_balance,0) AS loan_due
                        , IFNULL(la.principal_outstanding,0) AS principal_outstanding
                        , IFNULL(la.interest_outstanding,0) AS interest_outstanding
                        , IFNULL(la.interest_realizable,0) AS interest_realizable
                        , IFNULL(la.overdue_amount,0) AS overdue_amount
                        , IFNULL(migrated_loan_account.outstanding_balance, 0) AS radar_loan_due
                        , IFNULL(migrated_loan_account.principal_outstanding, 0) AS radar_principal_outstanding
                        , IFNULL(migrated_loan_account.interest_realizable, 0) AS radar_interest_realizable
                        , IFNULL(migrated_loan_account.overdue_amount, 0) AS radar_overdue_amount

                  FROM member_info
                  INNER JOIN office_info ON
                  (office_info.id = member_info.branch_info_id)
                  INNER JOIN country_head_office ON
                  (country_head_office.id = office_info.country_head_office_id)
                  INNER JOIN country ON
                  (country.id = country_head_office.office_country_id)
                  INNER JOIN project_info ON
                  (project_info.id = member_info.project_info_id)
                  INNER JOIN country_program_info ON
                  (country_program_info.id = project_info.program_info_id)
                  INNER JOIN program_info ON
                  (program_info.id = country_program_info.program_info_id)
                  LEFT JOIN group_info ON
                  (group_info.id = member_info.group_info_id)
                  LEFT JOIN savings_account ON
                  (savings_account.member_info_id= member_info.id)
                  LEFT JOIN loan_account AS la ON
                  (la.member_id = member_info.id)
                  INNER JOIN
                  (
                      SELECT member_id, MAX(disbursement_date) AS max_date
                      FROM loan_account
                      GROUP BY member_id
                  ) mla ON la.member_id = mla.member_id AND la.disbursement_date = mla.max_date
                  LEFT JOIN loan_status ON
                  (loan_status.id = la.loan_status_id)
                  LEFT JOIN migrated_loan_account ON
                  (migrated_loan_account.loan_account_id = la.id)
                   WHERE   country.id = 1   AND 1=1  AND  project_info.id = 'BI0000000000000000000001'  AND  office_info.id = 'BI0000000000000000000363'  

                  UNION

                  SELECT -- office_info.office_ref_code AS old_office_code
                        -- , office_info.office_code
                        -- , office_info.office_name
                        -- , project_info.project_ref_code AS old_project_code
                        -- , project_info.project_code
                        -- , project_info.project_name
                        -- ,
                        IFNULL(group_info.group_reference_number, '') AS old_group_code
                        , IFNULL(RIGHT(group_info.group_code, 5), '') AS group_code
                        , IFNULL(group_info.group_name, '') AS group_name
                        , IFNULL(member_info.reference_no, '') AS old_member_code
                        , RIGHT(member_info.member_no, 5) AS member_code
                        , member_info.member_name
                        , IFNULL(savings_account.savings_balance,0) AS savings_balance
                        , 'NO LOAN' AS old_loan_no
                        , '' AS loan_no
                        , '' AS loan_status
                        , NULL AS disbursement_date
                        , 0 AS disbursed_amount
                        , 0 AS loan_due
                        , 0 AS principal_outstanding
                        , 0 AS interest_outstanding
                        , 0 AS interest_realizable
                        , 0 AS overdue_amount
                      FROM member_info
                      INNER JOIN office_info ON
                      (office_info.id = member_info.branch_info_id)
                      INNER JOIN country_head_office ON
                      (country_head_office.id = office_info.country_head_office_id)
                      INNER JOIN country ON
                      (country.id = country_head_office.office_country_id)
                      INNER JOIN project_info ON
                      (project_info.id = member_info.project_info_id)
                      INNER JOIN country_program_info ON
                      (country_program_info.id = project_info.program_info_id)
                      INNER JOIN program_info ON
                      (program_info.id = country_program_info.program_info_id)
                      LEFT JOIN group_info ON
                      (group_info.id = member_info.group_info_id)
                      LEFT JOIN savings_account ON
                      (savings_account.member_info_id= member_info.id)
                       WHERE   country.id = 1   AND 1=1  AND  project_info.id = 'BI0000000000000000000001'  AND  office_info.id = 'BI0000000000000000000363'   AND member_info.id NOT IN (SELECT loan_account.member_id FROM loan_account)
                  ORDER BY -- old_office_code, old_project_code,
                      old_group_code, old_member_code;
              ` 
```

当我评论以下字段时，它会起作用。请帮助快点...

```
/*, ifnull(migrated_loan_account.outstanding_balance, 0) as radar_loan_due
                    , ifnull(migrated_loan_account.principal_outstanding, 0) as radar_principal_outstanding
                    , ifnull(migrated_loan_account.interest_realizable, 0) as radar_interest_realizable
                    , ifnull(migrated_loan_account.overdue_amount, 0) as radar_overdue_amount*/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T12:00:15.263

如果您将这些字段注释掉，它会起作用吗？没有注释这些字段，您的`UNION`? 联合必须返回相同数量的列。

将以下内容添加到 UNION 的第二个查询中：

```
, 0 AS radar_loan_due
, 0 AS radar_principal_outstanding
, 0 AS radar_interest_realizable
, 0 AS radar_overdue_amount 
```

# php - 行插入两次，一次加载

> ID：14920830
> 
> 赞同：1
> 
> 时间：2013-02-17T11:57:58.983
> 
> 标签：php

我已经坚持了一段时间，无法弄清楚。

我使用此代码记录访问，并且每次加载页面时插入两行，1 个唯一行和 1 个非唯一行，这是怎么回事？

```
$check = mysql_query("SELECT ip FROM visits WHERE ip = '{$_SERVER['REMOTE_ADDR']}'");
$num= mysql_num_rows($check);
if ($num< 1){
mysql_query("INSERT INTO visits VALUES('','{$_SERVER['REMOTE_ADDR']}','1')");
}else{
mysql_query("INSERT INTO visits VALUES('','{$_SERVER['REMOTE_ADDR']}','0')");} 
```

我知道由于 ip 更改等原因，它不是计算访问次数的最佳脚本，但那是另一回事，只是想知道为什么这会在页面加载时插入两次

当我将代码移动到没有任何 HTML 的单独文件以使用假 IP 对其进行测试并且它可以工作时，页面上的哪种 html 可能会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:12:47.030

可能不是您问题的答案，但我认为您需要优化您的陈述。否则，您可能拥有数千条重复 ips 和 0 或 1 次访问的记录。

*   IP 地址 - varchar -(UNIQUE KEY)
*   参观次数。- 中等 -

然后你可以让它更容易（**更新**）：

```
$ip = $mysqli->real_escape_string($_SERVER['REMOTE_ADDR']) ;
$update = "INSERT INTO visits (ip, times_visited) VALUES ('{$ip}', 1)
ON DUPLICATE KEY UPDATE times_visited = times_visited+1 ; " ; 
```

# android - 执行查询的问题

> ID：14920836
> 
> 赞同：0
> 
> 时间：2013-02-17T11:59:13.780
> 
> 标签：android, sql, sqlite, android-sqlite

我使用以下查询在 Android SQLite 中创建了两个表：

```
public static final String TABLE_SEMESTER_CREATE = "CREATE TABLE "
        + SemesterTable.TABLE_NAME + " (" + SemesterTable.ID_PK
        + " INTEGER PRIMARY KEY AUTOINCREMENT, " + SemesterTable.TITLE
        + " TEXT," + SemesterTable.START_DATE + " TEXT, "
        + SemesterTable.END_DATE + " TEXT) ";

public static final String TABLE_COURSE_CREATE = "CREATE TABLE "
        + CourseTable.TABLE_NAME + " (" + CourseTable.ID_PK
        + " INTEGER PRIMARY KEY AUTOINCREMENT, " + CourseTable.COURSE_CODE
        + " TEXT, " + CourseTable.COURSE_NAME + " TEXT, "
        + CourseTable.LOCATION + " TEXT, " + CourseTable.SEMESTER_ID_FK
        + " INTEGER, " + "FOREIGN KEY (" + CourseTable.SEMESTER_ID_FK
        + ") REFERENCES " + SemesterTable.TABLE_NAME + " ("
        + SemesterTable.ID_PK + "));"; 
```

然后我在父表和子表中插入了一些数据。问题是当我执行查询时：

```
String query = "SELECT * FROM " + CourseTable.TABLE_NAME + " WHERE "
            + CourseTable.SEMESTER_ID_FK + " = 1;";
    database.rawQuery(query, null);; 
```

它不执行。你能帮我摆脱这个错误吗？我也试过了。

```
database.query(CourseTable.TABLE_NAME, CourseTable.allColumns,
    CourseTable.SEMESTER_ID_FK + " = ? ",
    new String[] { String.valueOf(semesterID) }, null, null, null); 
```

**但它也不起作用！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:19:36.697

**`;`**问题是不允许的字符。因此，像这样更正您的查询：

```
String query = "SELECT * FROM " + CourseTable.TABLE_NAME + " WHERE "
            + CourseTable.SEMESTER_ID_FK + " = ?";
database.rawQuery(query, new String[] {String.valueOf(1)}); 
```

现在它将起作用。我建议您使用**`?`**被称为 as**`placeholder`**并将替换为 value from**`String-array`**作为`rawQuery()`方法的第二个参数。

还要**`;`**从您的.**`TABLE_COURSE_CREATE`** `String`

**注意：**始终使用它，使用这种方法可以避免任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:35:41.850

两个技巧可以增加您获得有用答案的机会（或者更好的是，自己解决问题）：

1.  实际的错误信息是什么？SQLite 通常会告诉你为什么它不能运行你的查询。
2.  代替您在此处提供的（几乎难以辨认的）代码，您可以[记录](http://developer.android.com/tools/debugging/debugging-log.html)生成的 SQL 并在此处发布吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T12:04:54.647

你错过了一个等号吗？您的第一个查询正在评估为：

```
SELECT * FROM TABLE WHERE FIELD1 
```

改变这个：

```
"SELECT * FROM " + CourseTable.TABLE_NAME + 
" WHERE " + CourseTable.SEMESTER_ID_FK + "1;" 
```

到：

```
"SELECT * FROM " + CourseTable.TABLE_NAME + 
" WHERE " + CourseTable.SEMESTER_ID_FK + "=1;" 
```

# python - 在单元测试中比较 numpy 浮点数组

> ID：14920837
> 
> 赞同：13
> 
> 时间：2013-02-17T11:59:14.643
> 
> 标签：python, unit-testing, numpy, python-2.7

实现比较两个 numpy 浮点数组的单元测试的最佳方法是什么。

我试过 unittest.assertEqual() 但不适用于浮点数组，因为浮点数永远不会 100% 相等。我不能使用 assertAlmostEqual 因为它测试了 round(floats) 相等性......

有没有人实施过这样的事情

```
self.assertFloatArrayEqual(array1, array2, msg = "array are not equal") 
```

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-17T13:01:42.243

如果您仍然使用 numpy，为什么不使用 numpy 测试功能呢？

```
numpy.testing.assert_array_almost_equal 
```

和

```
numpy.testing.assert_array_almost_equal_nulp 
```

这些也处理 NaN 的精细，检查形状等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-17T12:22:13.103

尝试

```
self.assertTrue(numpy.allclose(array1, array2, rtol=1e-05, atol=1e-08)) 
```

numpy 模块中的`allclose`函数，检查两个数组是否相同~~机器精度~~给定的相对和绝对公差。`rtol`并且`atol`是具有上述默认值的可选参数。

感谢@DSM 纠正我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T12:04:11.463

有一个版本可以比较两个数组，当然这需要 numpy 数组的行为正确，即它们有一个 len() 并且它们允许方括号访问元素。现在，关于舍入误差，可以定义一个增量或范围，您可以使用它们，但我认为这不允许在数组上使用。

恐怕你得自己动手了。

# java - 与 JDBC 的连接返回 url 不能为空

> ID：14920844
> 
> 赞同：0
> 
> 时间：2013-02-17T12:00:04.497
> 
> 标签：java, jdbc, sqlexception

你好我有这个代码：

```
DatabaseManager.init("com.inet.tds.TdsDriver", "jdbc:inetdae:127.0.0.1?database=main", "username", "password", 10); 
```

链接到：

```
public static void init(String JDBCDriver, String parURL, String parUserName, String parPassWord, int maxConnections) throws ClassNotFoundException, SQLException {

    Class.forName(JDBCDriver);
    URL = parURL;
    userName = parUserName;
    passWord = parPassWord;
    openConnection();
} 
```

但是给了我这个错误：

> DatabaseManager.getConnection() : java.sql.SQLException: url 不能为空

通过 DatabaseManager.class 中的这个脚本：

```
import java.sql.*;

public class DatabaseManager {

    private static String URL;
    private static String userName;
    private static String passWord;
    private static Connection connection = null;
public DatabaseManager() {
}
public static void executeSQL(String query, int maxtries) {

    if(maxtries == 0) {
        System.out.println("SQL query failed!");
        System.out.println("Query: "+query);
        return;
    }

    try{
        Connection connection = DatabaseManager.getConnection();
        Statement sm = connection.createStatement();
        sm.execute(query);
        return;
    }
    catch(Exception e) {

        System.out.println("Exception in DatabaseManager.executeSQL: " + e);

        System.out.println("SQL connection lost! Tries left:"+(maxtries-1));
        executeSQL(query, maxtries-1);
        return;
    }

}
public static void flush() {

    userName = null;
    passWord = null;
    if (connection != null) {
        URL = null;
        try {
            connection.close();
        } catch (SQLException sqle) {
            //  a database error occured    
            System.out.println("DatabaseManager.flush() : " + sqle);    
        }
    }
    connection = null;
}
public static Connection getConnection() {

    try {
        if (connection!=null) {
            if (connection.isClosed())
                openConnection();
        } 
        else {
            openConnection();
        }
    } catch (SQLException e) {
            System.out.println("DatabaseManager.getConnection() : " + e);   
        return null;
    }
    return connection;
}
public static String getDriverVersion() {

    String version = "exception";
    try {
        version = ""+DriverManager.getDriver(URL).getMajorVersion();
        version += ".";
        version += DriverManager.getDriver(URL).getMinorVersion();

    } catch (SQLException e)
    {}

    return version;
}
public static void init(String JDBCDriver, String parURL, String parUserName, String parPassWord, int maxConnections) throws ClassNotFoundException, SQLException {

    Class.forName(JDBCDriver);
    URL = parURL;
    userName = parUserName;
    passWord = parPassWord;
    openConnection();
}
public static void openConnection() throws SQLException{

    connection = DriverManager.getConnection(URL, userName, passWord);
}
public static ResultSet readSQL(String query, int maxresults, int maxtries) {

    if(maxtries == 0) {
        System.out.println("SQL query failed!");
        System.out.println("Query: "+query);
        return null;
    }

    int pos = 0;
    try{
        Connection connection = DatabaseManager.getConnection();
        pos = 1;
        Statement sm = connection.createStatement();
        pos = 2;
        sm.setMaxRows(maxresults);
        pos = 3;
        ResultSet rs = sm.executeQuery(query);
        pos = 4;
        return rs;
    }
    catch(Exception e) {

        System.out.println("Exception in DatabaseManager.readSQL ("+pos+"): " + e);
        System.out.println("SQL connection lost! Tries left:"+(maxtries-1));
        return readSQL(query, maxresults, maxtries-1);
    }
}
} 
```

有谁知道为什么它告诉我 url 是空的？

如果您需要更多脚本，请告诉我！

# php - 当数据通过uri传递时是否可以缓存脚本？

> ID：14920848
> 
> 赞同：0
> 
> 时间：2013-02-17T12:00:23.933
> 
> 标签：php, api, caching

我想知道是否可以使用 PHP 的 APC 缓存一些通过 URI 传递给 php 脚本的数据。

如果可能，那么我想知道使用 APC 是否是我网站的最佳缓存解决方案。

我的网站主要从互联网上探索各种 API，例如 YouTube 和 Echonest，以获取有关音乐家的数据。当用户点击我网站上的艺术家时，艺术家的数据是从各种 API 新加载的。网站上有很长的艺术家名单，所以缓存他们是个好主意吗？目前我的网站真的很慢，因为每次用户点击新艺术家时，我都会不断地探索 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:31:33.067

除非您需要绝对实时并与您的各种数据提供者同步，否则缓存通常是加速您的网站的好主意。

APC 进行操作码缓存，也可用于数据缓存，因此它适用于缓存 api 响应和来自您的提供程序的数据（请参阅 APC 的 api 此处[http://www.php.net/manual/en/ref.apc .php](http://www.php.net/manual/en/ref.apc.php) )

然而，APC 在每个 Web 服务器上运行，因此如果您有一个具有多个 Web 服务器的 HA 设置，并且您需要所有 Web 服务器在缓存方面保持同步，那么您可能需要查看 memcache/redis 以进行集中缓存反而。

请注意，是否需要跨服务器同步完全取决于您的决定，并且取决于您的应用程序的性质；对此没有正确和错误的答案。仅供参考：同步缓存会产生 APC 没有的网络 io 成本。

在任何情况下，无论是使用 APC 还是 memcache/redis，缓存每个 URI 模式，还是从查询字符串参数中都可以。这些缓存基于键/值工作，因此您可以为您的键设计一个命名约定系统，以存储相关的数据片段。例如：

```
$key = sprintf("%s/%s/%s/%s", $provider_name, $api_endpoint, $param1, $param2);
apc_add($key, $the_data, 300); // cache for 5mns 
```

# wpf - 将 ViewModel 的属性绑定到 CurrentCell

> ID：14920853
> 
> 赞同：2
> 
> 时间：2013-02-17T12:01:21.333
> 
> 标签：wpf, mvvm, binding, datagrid

我用一个`WPF DataGrid`，

我想要（已编辑的单元格）`bind`的文本，其中`CurrentCell`包含我的属性`ViewModel`

**是否有可能做到这一点？**

**编辑：**

我尝试这种方式：

```
 <DataGrid CurrentCell="{Binding MyProp}"...../> 
```

我得到这个错误：

```
Value produced by BindingExpression is not valid for target property.; Value='<null>' BindingExpression:Path=MyProp; DataItem='MyViewModel' (HashCode=38365672); target element is 'DataGrid' (Name='CustomCmdDg'); target property is 'CurrentCell' (type 'DataGridCellInfo') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:12:10.140

我不确定我是否理解您的问题。但是您是否考虑过创建带有标签的 DataTemplate 并将其 content 属性绑定到 viewmodel 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:24:32.910

好的，它是这样成功的：

```
<DataGrid CurrentCell="{Binding MyProp, Mode=OneWayToSource}"...../> 
```

# ruby-on-rails - 如何安装 gem 'meta-where'？“捆绑安装”时出现错误

> ID：14920856
> 
> 赞同：0
> 
> 时间：2013-02-17T12:02:07.590
> 
> 标签：ruby-on-rails

我正在使用 Rails 3.2.9 版本

我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'
gem 'feedzirra'
gem "meta_where"

gem 'sqlite3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

我在捆绑安装时收到如下错误。如何安装 meta-where gem？

```
Bundler could not find compatible versions for gem "arel":
  In snapshot (Gemfile.lock):
    arel (3.0.2)

  In Gemfile:
    meta_where (~> 1.0.4) ruby depends on
      arel (~> 2.0.7) ruby

Running `bundle update` will rebuild your snapshot from scratch, using only
the gems in your Gemfile, which may resolve the conflict. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:08:13.047

Meta_where 适用于 rails 2 - 您正在使用 rails 3。

meta_where GitHub 页面[https://github.com/ernie/meta_where](https://github.com/ernie/meta_where)说你应该使用 squeel 而不是[https://github.com/ernie/squeel](https://github.com/ernie/squeel)

# blackberry - 黑莓应用程序未出现在设备或模拟器上

> ID：14920858
> 
> 赞同：1
> 
> 时间：2013-02-17T12:02:36.790
> 
> 标签：blackberry, blackberry-simulator

我一直在开发一个黑莓应用程序，它在模拟器和设备上都运行良好，但突然之间它不再出现在任何一个上。

“不在黑莓主屏幕上显示应用程序图标”未选中。启动第 7 层，IsSystemModule 为假。自第一次构建以来，这里没有任何变化。

我确实在模拟器控制台输出中看到“应用程序：未找到 MyApp 检查应用程序是否存在”，这是输出中对我的应用程序的唯一引用。

我已经清理了模拟器，并使用新生成的应用程序描述符文件创建了一个新项目，到目前为止没有任何变化。

模块文件和 .cod 文件出现在模拟器文件夹中，我尝试删除它们并重新安装。

我还能做些什么来调试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:01:40.750

可能的情况 -

*   您是否在正确的模拟器上进行调试？如果您在具有较低操作系统版本的模拟器上调试针对较高 SDK 版本编译的项目，则该应用将不会显示。
*   您的应用程序中是否有`main`方法？没有 main 方法的应用程序不会显示在应用程序抽屉中。

# c++ - 客户端到客户端套接字通信

> ID：14920863
> 
> 赞同：1
> 
> 时间：2013-02-17T12:03:08.340
> 
> 标签：c++, c, sockets, pthreads

我有一个客户端/服务器程序，它允许通过从服务器生成的线程为多个客户端提供服务。目前该程序仅与服务器通信，但是我现在想重新设计该程序，以便客户端可以与另一个客户端建立通信。在设计这个方面，我没有太多经验知道正确的方向是什么。最初我考虑通过服务器线程进行通信，但是我不确定如何通知该线程的客户端另一个客户端想要建立通信。

例如，我想从 cli A 到 cli N 进行通信：

```
Cli A <---> SerThread A <------> Main Thread <------> SerThread N <---> Cli N 
```

我不确定如何通知 Cli N 需要与 Cli A 通信。

在客户端从套接字读取之前，它不会知道另一个客户端想要与它通信。因此，如果 Cli N 处于等待用户输入直到它发送/接收它不会知道的状态。我需要一种方法来立即通知客户通信正在等待它。

我想得越多，我就越困惑，所以在我正确地尝试设计它之前，我可能需要一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T13:21:08.037

我强烈建议您阅读[Beej 的网络指南](http://www2.engr.arizona.edu/~prakash/reference/socket.pdf)，这是初学者的套接字编程圣经。那里有很多示例，并逐步解释了每个功能，因此如果您花一些时间，您将能够理解所有内容。该指南还包括一个客户端-服务器连接的工作示例，您可以实际查找您遇到的问题。我通过阅读本指南学到了这种东西！我希望它有帮助！=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:24:00.030

好吧，你可以让它像开关一样工作 :) 我假设你想通过服务器在 2 个客户端之间建立连接，对吧？如果是这样，您需要做的是给每个客户一个序列号。然后从客户端向服务器发送一个“请求”，其中包含您正在搜索的客户端的信息。意思是带有序列号的数据包。然后服务器可以将信息广播到连接的客户端列表。在客户端，由于服务器，客户端将收到序列号。如果客户端收到的序列号与自己的序列号匹配，则客户端将向服务器返回true。如果不是，它将发出假消息。然后，下次搜索该客户端时，服务器将已经知道它在哪里，并且它将仅将消息发送到该特定客户端。

# android - 在 Android 手机上使用 Fiddler 调试 HTTPS 请求/响应不起作用

> ID：14920868
> 
> 赞同：7
> 
> 时间：2013-02-17T12:03:41.633
> 
> 标签：android, web, https, fiddler, traffic

每次我尝试从特定主机调试 HTTPS 流量（在我的 android 手机上）时，我都会在提琴手检查器窗口中收到以下错误消息。

```
After the client received notice of the established CONNECT, it failed to send any data. 
```

你能告诉我，我做错了什么吗？我在我的三星 Galaxy s2 上调试网络请求。在网络会话窗口中，我可以看到所有请求。在检查器窗口中，我得到如下信息：

```
CONNECT example-site.com:443 HTTP/1.1
Host: example-site.com
User-Agent: Dalvik/1.6.0 (Linux; U; Android 4.0.4; GT-I9100 Build/IMM76L)
Connection: Keep-Alive
After the client received notice of the established CONNECT, it failed to send any data. 
```

响应如下所示：

```
HTTP/1.1 200 Connection Established
FiddlerGateway: Direct
StartTime: 12:39:43.452
Connection: close 
```

我成功安装了 decrpyt https 的提琴手根证书。从 pc chrome 浏览器调试相同的网络流量也可以正常工作（我可以详细查看请求/响应 SOAP/REST 正文）。pc和android的区别在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-22T09:57:58.460

我希望这个问题现在已经解决了，但是对于那些与 Chrome for Android 有类似问题的人（我*认为*这是这里的问题，因为 PC 上的 Chrome 被提到很好），有一个称为带宽管理的设置。

如果您启用了带宽管理，那么流量将通过 Google 代理服务器。您需要将其关闭。

启动 Chrome 并在设置中转到高级下的带宽管理。关闭预加载网页并减少数据使用。

# javascript - 如何在中心显示图像 - extjs 4

> ID：14920869
> 
> 赞同：1
> 
> 时间：2013-02-17T12:03:44.577
> 
> 标签：javascript, ajax, extjs, extjs4

```
win = Ext.create('widget.window', {
                title: 'View Image',
                closable: true,
                closeAction: 'hide',
                width: 600,
                minWidth: 350,
                height: 550,
                layout: {
                    type: 'border',
                    padding: 5
                        },
                items:[
                        listView, 
                    {                           
                    region: 'center',
                    //xtype: 'tabpanel',
                    minheight: 350,
                    items: [{
                        //title: 'Bogus Tab',
                        xtype : 'image',
                        id : 'displayimage',
                        width: 320,
                        height: 240,
                            }]
                    },
                    {
                    region: 'north',
                    margin : "5 0 5 0",
                    //xtype: 'tabpanel',
                    minheight: 350,
                    items: [dr]
                    }]

            }); 
```

![在此处输入图像描述](../Images/fb19fb1273171dbd79e7310f8ee51c2e.png)

## 问题

如何`displayimage`在窗口中心对齐？我试过了`align : 'center'`，但不起作用。请帮助这个愚蠢的问题，非常感谢！
除了使用边距或填充之外有任何想法。这种方法不好

## 最近更新

```
var Printtoolbar = Ext.create('Ext.toolbar.Toolbar',{
        items:[
        {text: 'Print',
        id: 'btnPrint',
        tooltip: 'Print This Image !',
        iconCls: 'print'
        }
        ]
    })
    var dr = Ext.create('Ext.FormPanel', {
        width:650,
        bodyPadding: '5px 5px 0',
        frame: true,
        layout: {
            type: 'vbox'
        },
        items: [{
                    xtype: 'container',
                    layout: {
                        type: 'hbox',
                        //align: 'stretch',
                        padding:'0 0 10 0'
                    },
                    defaults: {
                        flex: 1
                    },
                        items:[startdt,enddt]
                    },
                    {
                    xtype: 'container',
                    layout: {
                        type: 'hbox',
                        align: 'center',
                        padding:'0 0 10 0'
                            },//layout
                    defaults: {
                        flex: 1
                             },//default
                        items:[cmbVehicle,{
                            //able to add 1 more items beside combobox
                            }]//items
                    },//container
                    {
                            xtype: 'button',
                            id : 'btnShowImage',
                            text : 'Show Image On List',
                            scale   : 'large',
                            width : 200,
                            margin : '0 0 0 180',   
                    }
                ]
    });

var listView = Ext.create('Ext.grid.Panel', {
        region: 'west',
        id : 'imagelist',
        title: 'Select Image',
        width: 200,
        split: true,
        collapsible: true,
        floatable: false,
        title:'Select Image',
        store: ImgStore,
        multiSelect: false,
        viewConfig: {
            emptyText: 'No images to display'
        },

        columns: [
            {
            text: 'Date Time Uploaded',
            //xtype: 'datecolumn',
            //format: 'Y-m-d H:i:s',
            flex: 65,
            width: 100,
            dataIndex: 'PicUploadedDateTime'
        }]
    });
win = Ext.create('widget.window', {
            title: 'View Image',
            closable: true,
            style:{
                            'display': 'table-cell',
                            'vertical-align': 'middle'
                        },
            closeAction: 'hide',
            width: 600,
            minWidth: 350,
            height: 550,
            layout: {
                type: 'border',
                padding: 5
                    },
            items:[
                    listView, 
                {                           
                region: 'center',

                //xtype: 'tabpanel',
                minheight: 350,
                items: [Printtoolbar,{
                    //title: 'Bogus Tab',
                    xtype : 'image',
                    id : 'displayimage',
                    style: {
                                'display': 'block',
                                'margin': 'auto'
                            },
                    listeners: {
                        'render': function(img) {
                            img.up().setBodyStyle({
                                'display': 'table-cell',
                                'vertical-align': 'middle'
                                                });
                                                }
                                 },
                    width: 320,
                    height: 240,
                        }]
                },
                {
                region: 'north',
                margin : "5 0 5 0",
                //xtype: 'tabpanel',
                minheight: 350,
                items: [dr]
                }]

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:29:37.243

只需配置图像和面板的“样式”属性。图片：

```
{
    xtype : 'image',
    id : 'displayimage',
    width: 320,
    height: 240,
    style: {
        'display': 'block',
        'margin': 'auto'
    }
} 
```

控制板：

```
style:{
    'display': 'table-cell',
    'vertical-align': 'middle'
} 
```

您还可以在图像的“渲染”侦听器中设置面板样式：

```
Ext.getCmp('displayimage').on({
    'render': function(img) {
        img.up().setBodyStyle({
            'display': 'table-cell',
            'vertical-align': 'middle'
        });
     }
}); 
```

[**截屏**](http://my.jetscreenshot.com/6795/20130217-gg9z-32kb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T12:07:22.417

怎么样`pack:'center'`？

看到这个：[http ://dev.sencha.com/deploy/ext-3.3.1/examples/layout/hbox.html](http://dev.sencha.com/deploy/ext-3.3.1/examples/layout/hbox.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T17:02:24.157

至少在 ExtJs 4.2.x 中有一个问题，因此要在使用相应布局的容器中垂直和水平居中，您可以尝试：

```
layout: {
    type: 'vbox',
    align: 'center',
    pack: 'center',
}, 
```

或者：

```
layout: {
    type: 'hbox',
    align: 'middle',
    pack: 'center',
}, 
```

# jms - 独立客户端中的 JMS 连接

> ID：14920870
> 
> 赞同：1
> 
> 时间：2013-02-17T12:03:50.787
> 
> 标签：jms, activemq, message-queue, ibm-mq

我正在设计一个独立的应用程序（没有应用程序服务器），它将每 5 分钟调用两个计时器并发送（基于文件是否存在于导向器中）并从队列接收消息。此应用程序计划连续运行很长时间（年）......

现在我遇到了一个难题，是只创建一次 JMS 连接并一直使用它..还是每 5 分钟连接一次连接并关闭它们......（在执行业务逻辑之后）

对设计有任何建议会有帮助吗？如果我选择单一连接（并使用 JMS MessageListenr），如果队列管理器关闭并在一两天后出现会发生什么......

我尝试了一个带有 ActiveMQ 的示例......一旦我杀死了活动的 mq 代理和生产者......监听器线程（它只创建一次 conn 并使用 MessageListener）应用程序会在几分钟后自动结束

// 下面的监听器代码

```
 connectionFactory = new ActiveMQConnectionFactory(
            ActiveMQConnection.DEFAULT_USER,
             ActiveMQConnection.DEFAULT_PASSWORD,
            ActiveMQConnection.DEFAULT_BROKER_URL);
     connection = connectionFactory.createConnection();
     connection.start();
     session = connection.createSession(transacted, Session.AUTO_ACKNOWLEDGE);
     destination = session.createQueue("mmy first active mq queue");

    MessageConsumer consumer = session.createConsumer(destination);
    MyListener mylistener = new MyListener();
    consumer.setMessageListener(mylistener);
    connection.setExceptionListener(mylistener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:30:16.213

在 ActiveMQ 中，使用一个连接是可能的，并且可能是一个很好的解决方案，但当然这取决于应用程序。ActiveMQ 提供的库提供了可以在应用程序中使用的连接池机制。您使用 PooledConnectionFactory 而不是使用标准的 ActiveMQConnectionFactory，并且在幕后，您的应用程序使用的 Connection 实例是为您池化的。

每次你需要一个连接时，工厂可以从池中返回一个未使用的连接，并且每个连接都可以有一组会话也汇集在其中，进一步降低了启动连接和会话所需的分配量和线级聊天。

您可以探索一些有关该主题的有趣博客。

[在 ActiveMQ 中使用带有 Spring的 ActiveMQ 中的](http://activemq.apache.org/spring-support.html)[池连接](http://gnodet.blogspot.com/2006/12/over-past-weeks-i-spend-some-times-load.html)

寻找代码示例的另一个地方是 ActiveMQ 源本身，该模块有几个单元测试来显示池的运行情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:16:27.517

对于任何消息传递系统，您总是需要让程序在连接重试时超时以发出警报。例如，如果您的 QMgr 实际上关闭了一两天，您可能希望应用程序在连接丢失后的几分钟内记录该事件，而不是在没有警告的情况下阻止等待重新连接尝试两天。

鉴于该要求，首先要做的就是设计应用程序以遍历一个序列，该序列包括与消息传递引擎的连接尝试和异常处理。在该循环中，您可以假设存在连接并维护队列的句柄或根据需要打开和关闭队列。要么在这个内部循环中驱动轮询，要么在每次迭代中干净地退出，并让外部循环根据需要重新驱动连接。

只要外部循环到位，您的应用程序就可以连续运行，而不管消息引擎端的连接丢失。（我使用“消息引擎”来避免使用特定于供应商的术语，例如此回复的通用部分的队列管理器。）

如果您要使用 WebSphere MQ，则可以在应用程序运行时使用多实例 HA QMgr 执行升级 QMgr 之类的操作。该应用程序将无缝重新连接到 QMgr 的运行部分，无需更改代码，如果您需要两阶段提交，您可以使用 XA。如果重新连接轮询超过了您配置的阈值而没有找到实时 QMgr，则应用程序会收到一个错误代码，然后您可以使用该代码引发警报。

最后，应用程序是否应该每 5 分钟重新连接一次的问题对 WMQ QMgr 本身没有影响。即使您要使用 TLS 通道，QMgr 上的额外负载也可以忽略不计。主要考虑因素是频道启动时间，但 5 分钟轮询似乎不是一个可能的阻碍问题。其他交通工具可能有问题，也可能没有问题，但我没有资格与他们交谈。就 WebSphere MQ 而言，没有任何问题。即使是小型 QMgr 也可以处理数千个同时连接。reconnect-on-each-poll 方法确实具有在嘈杂的网络环境中抛出更少错误的优势。这是因为简单地获得连接并干净地退出比在不稳定的网络上保持连续连接更容易。因此，如果应用程序和服务器位于同一个数据中心，则任何一个选项都有效。如果它们通过 WAN 连接并受到防火墙超时和其他中断的影响，那么较短的连接往往会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T13:36:22.923

在我看来，单一连接将是一个非常糟糕的选择，原因很严重：

1.  特殊情况（断开连接、跌倒等）可能会导致您的听众跌倒（不再听）。

2.  Java 的内存消耗可能会达到不需要的水平。

3.  程序总是需要改变，所以使用一个连接不是那么动态的。

队列的最大优点是它得到的消息可以保留多久，所以如果你的程序可以以非同步方式工作，就没有理由继续连接。

# drupal-7 - drupal 7 电子邮件节点/任务列表

> ID：14920871
> 
> 赞同：0
> 
> 时间：2013-02-17T12:03:53.977
> 
> 标签：drupal-7

对drupal 7有点新，我对此感到很困惑。

我有内容类型任务，字段责任人是经过身份验证的用户列表中的实体。该系统仅供10~20人使用。

早上 8 点，我需要通过电子邮件将这些任务列表（节点：标题）发送给标记为对他们的任务负责的用户。

我正在敲打我的头，但似乎无法弄清楚如何去做。已经通过 Views、VBO、Rules 但没有运气。能够通过电子邮件与小组一起获得视图。（视图中的关系以加入用户到用户电子邮件的字段）。

任何帮助/指针表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:47:58.037

使用 Views UI 创建一个视图，该视图将接受用户 ID 作为上下文输入。

然后创建一个自定义模块。用 hook_menu 定义

1.  可以由 cron 调用的自定义 url
2.  运行代码的自定义回调函数

在您的回调函数中循环遍历每个用户并使用以下代码以编程方式调用相应的视图以将结果作为 html，

```
views_embed_view($name, $display_id = 'default' , $uid ); 
```

或使用以下命令将结果作为数组。

```
views_get_view_result(($name, $display_id = 'default' , $uid ); 
```

[使用drupal_mail()](http://api.drupal.org/api/drupal/includes!mail.inc/function/drupal_mail/7)将每个结果发送给相应的用户；

定义（在您的服务器上）一个计划操作的 cron 作业。让它每天早上八点运行，然后访问由您的自定义模块创建的菜单。

稍后为了提高性能和更好的邮件处理，您可以尝试将[Queue API](http://api.drupal.org/api/drupal/modules!system!system.queue.inc/group/queue/7)合并到核心中。在配置 cron 作业时还要注意服务器时区。它可能被设置为与预期不同的东西。

# c - 实现 C 预处理器

> ID：14920873
> 
> 赞同：1
> 
> 时间：2013-02-17T12:04:12.963
> 
> 标签：c, c-preprocessor

我正在实现一个 C 预处理器...

在 Wiki 上，我发现了它的以下功能......

*   三元组替换
*   线拼接
*   代币化
*   宏扩展和指令处理
*   文件包含

我的问题：

*   我缺少任何功能吗？
*   上述功能的正确执行顺序是什么？（即在今天的实际预处理器中做什么之前做了什么？）

如果有人知道任何关于它的标准文档，也请提及。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T12:06:50.217

标准文档是 C 标准！官方版本是非免费的，但您可以找到足够准确的草稿，例如[http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf) for C99。

感兴趣的章节是 5.1.1.2（翻译阶段）和 6.10（预处理指令）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T12:07:42.337

您可能想查看 gcc 文档以了解他们如何实现它： http: [//gcc.gnu.org/onlinedocs/cpp/](http://gcc.gnu.org/onlinedocs/cpp/)

您还可以查看 gcc 的源代码： [http ://www.gnu.org/software/gcc/releases.html](http://www.gnu.org/software/gcc/releases.html)

希望这可以帮助

# javascript - 如何使用 KeyUp 设置此输入框以加载 HTML5 音频源？

> ID：14920881
> 
> 赞同：0
> 
> 时间：2013-02-17T12:04:42.883
> 
> 标签：javascript, html

我已经分叉了我在这里找到的几个 JSFiddles 来提出以下两个脚本：

**[http://jsfiddle.net/M555r/](http://jsfiddle.net/M555r/)** - 带有按键输入框以加载新页面的 Javascript Web 浏览器

```
$('input#url').on('propertychange paste keyup',function(){
      var url = this.value;
        $('#frame').attr('src', "http://"+url);
        });
        $('input#url').keyup(); 
```

**[http://jsfiddle.net/Z3VrV/](http://jsfiddle.net/Z3VrV/)** - HTML5 音频播放器，带有悬停框以更改源

```
function changeAudio(song){
    audio = document.getElementById("sound1");
    audio.src = song;
    audio.load();
    audio.play();
}

$("#changemytune").mouseenter(function () {
    changeAudio("http://jeffrey-way.s3.amazonaws.com/zelda.ogg");
})

                .mouseleave(function () {
    changeAudio("http://www.jezra.net/audio/skye_boat_song.ogg");
}); 
```

以我有限的经验，我尝试将这两个例子结合起来，但没有成功。根据 iframe 示例，我想要实现的是一个音频播放器，您可以在其中输入源代码，并且播放器源代码会自动更新。

感谢您提供任何建议，特别是如果您可以向我展示 JSFiddle 中的工作示例。

谢谢！

编辑：我尝试过编写脚本，例如：

```
function changeAudio(song){
    audio = document.getElementById("sound1");
    audio.src = song;
    audio.load();
    audio.play();
}

$('input#url').on('propertychange paste keyup',function(){
    changeAudio(url);
})

});

$('input#url').keyup(); 
```

在我看来这是有道理的，但是我不确定正确的语法等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:31:03.110

把它放在一个答案中：

这是代码：

HTML：

```
<input type="text" id="url" name="url" value="" />

<br><br>

<audio id="sound1" preload="auto" src="http://www.jezra.net/audio/skye_boat_song.ogg" autoplay controls></audio>

    <div id="status">status</div> 
```

JS：

```
$('input#url').on('propertychange paste keyup',function(){

  var url = this.value;

   $("#status").html(url);
    changeAudio(url);
});

function changeAudio(song){
    audio = document.getElementById("sound1");
    audio.src = song;
    audio.load();
    audio.play();
} 
```

看[这里](http://jsfiddle.net/wMcXP/)

# php - 更改 $_SERVER['REQUEST_URI']

> ID：14920890
> 
> 赞同：1
> 
> 时间：2013-02-17T12:05:06.673
> 
> 标签：php, .htaccess, zend-framework, mod-rewrite

我试图在我的 RewriteRule 中构建一个`.htaccess`更漂亮的 URL，用于使用 Zend Framework 显示线程论坛。目标网址是：

```
/forum/display/thread/i/1 
```

我想要的是：

```
/forum/display/thread/1 
```

由于 Zend 框架从 URL 构建 GET 变量（在本例中从 开始`/thread/`），我的原始 URL 给了我一个 GET 变量`'i' = 1`，而第二个 URL 根本没有给我 GET 变量。

我想要的，要么是一种方式，`/1`进入一个 GET 变量尊重，可能会有更多（例如`/p/2`对于页码）或一种方式来重写 URL 使用`mod_rewrite`，以便`$_SERVER['REQUEST_URI']`设置为`/forum/display/thread/i/1`.

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:13:21.630

在您的引导程序中：

```
protected function _initRouter()  
{  
    $route = new Zend_Controller_Router_Route_Regex(  
        '/forum/display/thread/(.+?)',  
        array('controller' => 'forum', 'action' => 'display'),  
        array(1 => 'thread'),  
        '/forum/display/thread/%d'  
    );  
    $front->getRouter()->addRoute('routeName', $route);  
} 
```

代码未经测试，如有错误请发布:)

# directory - Google 云端硬盘根位置

> ID：14920894
> 
> 赞同：-1
> 
> 时间：2013-02-17T12:05:41.763
> 
> 标签：directory, root, google-drive-api

我想将我的 Google Drive 文件夹放在根目录 C:\

所以我想要位置 C:\Google Drive\

我该如何配置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:34:34.437

是的，这实际上很容易

1.  进入您的 Google 云端硬盘并选择退出您的 Google 云端硬盘
2.  现在将您的 Google 云端硬盘重新定位到您喜欢的任何位置。
3.  现在再次启动您的 Drive 程序。
4.  您将收到一条错误消息，即云端硬盘无法找到您的文件夹。
5.  单击错误消息
6.  单击定位文件夹，然后将您的驱动器文件夹定位到新位置，即您将驱动器移动到的位置。

走吧！

# java - 计算 sin 30 的值

> ID：14920899
> 
> 赞同：0
> 
> 时间：2013-02-17T12:06:19.517
> 
> 标签：java

我找不到 sin 30 的正确值，

```
 double degrees = 30.0;
 double radians = Math.toRadians(degrees);
 System.out.println(Math.sin(radians)); 
```

产生 .499999999 但与计算器匹配的确切值是 0.5

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:11:23.523

`Math.sin(..)`进行插值以获得良好的值，因此您不能期望得到准确的值作为结果。此外，在对 sin 值进行插值时，浮点/双精度运算的问题是另一个问题。

# php - PHP 致命错误：在 (...) 第 36 行调用未定义的方法 stdClass::num_rows()

> ID：14920900
> 
> 赞同：0
> 
> 时间：2013-02-17T12:06:32.030
> 
> 标签：php, codeigniter, activerecord, login-control

这是我的第一个问题。我是 PHP 和 CI 的新手，但我想学习 :)

首先我的模型：

> 类 Login_model 扩展 MY_Model {
> 
> ```
> protected $table   = 'users';
> protected $primary = 'user_id';
> 
> function __construct()
> {
> 
>     parent::__construct();
> }
> 
> public function validate()
> {
>     // Récupère le POST du login
>     $user_mail = $this->input->post('user_mail');
>     $password  = sha1($this->input->post('user_mail') . $this->input->post('password'));
> 
>     //Execution de la requete
> 
>     $query = $this->users_m->get(array('user_mail' => $user_mail));
>     // Verification qu'il existe un enregistrement
>     var_dump($query);
>     if($query->num_rows() == 1)
>     {
>         // If there is a user, then create session data
>         $row = $query->row();
>         $data = array(
>                 'userid' => $row->userid,
>                 'fname' => $row->fname,
>                 'lname' => $row->lname,
>                 'username' => $row->username,
>                 'validated' => true
>                 );
>             $this->session->set_userdata($data);
>             return true;
>             //      }
>             // Si le login ne se valide pas
>             // return false.
>             return false;
>         }
>     }
> } 
> ```

这个模型扩展了 My_model MY_MODEL.PHP

```
<?php

if (!defined('BASEPATH')) exit('No direct script access allowed');

/**
 * MY_Model
 */
class MY_Model extends CI_Model
{

  /**
   * Connexion à la BDD
   * 
   * @var object 
   */
  protected $link;

  /**
   * Groupe de connexion BDD
   * 
   * @var string 
   */
  protected $db_group = 'default';

  /**
   * Table de la BDD
   * 
   * @var string
   */
  protected $table = '';

  /**
   * Clé(s) primaire(s)
   * 
   * @var string/array
   */
  protected $primary = 'id';

  /**
   * Déclanche une exception
   * 
   * @var boolean
   */
  private $_throw_exception = TRUE;

  /**
   * Constructeur
   */
  public function __construct()
  {
    parent::__construct();

    if ($this->table != '')
    {
      $this->_set_link();
    }
  }

  /**
   * Connexion à la BDD
   */
  private function _set_link()
  {
    $this->link = $this->load->database($this->db_group, TRUE);
  }

  /**
   * Active la gestion des exceptions
   */
  public function enable_exception()
  {
    $this->_throw_exception = TRUE;
  }

  /**
   * Desactive la gestion des exceptions
   */
  public function disable_exception()
  {
    $this->_throw_exception = FALSE;
  }

  /**
   * Récupère un enregistrement unique
   * 
   * @param array $where
   * @return boolean
   * @throws Exception
   */
  public function get($where = array())
  {
    if (is_array($where) && $where)
    {
      foreach ($where as $key => $value)
      {
        $this->link->where($key, $value);
      }
    }

    $query = $this->link->get($this->table);

    /* Traitement de la requete */
    $data = FALSE;

    if (is_object($query))
    {
      if ($query->num_rows() == 1)
      {
        $result = $query->result();
        $data = $result[0];
      }
      else if ($this->_throw_exception)
      {
        throw new Exception($query->num_rows(), 11);
      }
    }
    else
    {
      throw new Exception($this->link->_error_number() . ":" . $this->link->_error_message(), 10);
    }
    return $data;
  }

  /**
   * Liste des enregistrements de la table
   * 
   * @param array $orders
   * @return array
   */
  public function get_all($where = array(), $orders = array(), $limit = NULL, $offset = NULL)
  {
    /* Conditions */
    if (is_array($where) && $where)
    {
      foreach ($where as $key => $value)
      {
        $this->link->where($key, $value);
      }
    }

    /* Tris */
    if (is_array($orders) && $orders)
    {
      foreach ($orders as $order)
      {
        $this->link->order_by("$this->table.$order");
      }
    }
    else if ($orders)
    {
      $this->link->order_by("$this->table.$orders");
    }
    else if (is_array($this->primary))
    {
      foreach ($this->primary as $order)
      {
        $this->link->order_by("$this->table.$order");
      }
    }
    else
    {
      $this->link->order_by("$this->table.$this->primary");
    }

    /* Requete */
    $query = $this->link->get($this->table, $limit, $offset);

    /* Traitement de la requete */
    $data = array();

    if (is_object($query))
    {
      if ($query->num_rows() > 0)
      {
        $data = $query->result();
      }
    }
    else if ($this->_throw_exception)
    {
      throw new Exception($this->link->_error_number() . ":" . $this->link->_error_message(), 10);
    }

    /* Retour */
    return $data;
  }

  /**
   * Nombre d'enregistrements de la table
   * 
   * @return integer
   */
  public function count($where = array())
  {
    if (is_array($where) && $where)
    {
      foreach ($where as $key => $value)
      {
        $this->link->where($key, $value);
      }
    }

    $this->link->from($this->table);

    return $this->link->count_all_results();
  }

  /**
   * Insertion dans la BDD
   * 
   * @param array $data
   * @return boolean
   * @throws Exception
   */
  public function insert($data = array())
  {
    $insert = FALSE;
    if ($this->link->insert($this->table, $data))
    {
      if (is_array($this->primary))
      {
        $insert = TRUE;
      }
      else if (isset($data[$this->primary]))
      {
        $insert = $data[$this->primary];
      }
      else
      {
        $insert = $this->link->insert_id();
      }
    }
    else if ($this->_throw_exception)
    {
      throw new Exception($this->link->_error_number() . ":" . $this->link->_error_message(), 20);
    }
    return $insert;
  }

  /**
   * Insertion de masse dans une base de donnée
   * 
   * @param array $data
   * @return boolean
   * @throws Exception
   */
  public function insert_batch($data)
  {
    $insert = FALSE;

    if ($this->link->insert_batch($this->table, $data))
    {
      $insert = TRUE;
    }
    else if ($this->_throw_exception)
    {
      throw new Exception($this->link->_error_number() . ":" . $this->link->_error_message(), 20);
    }

    return $insert;
  }

  /**
   * Mise à jour d'enregistrements de la BDD
   * 
   * @param array $data
   * @param array $where
   * @return boolean
   * @throws ExceptionModel
   */
  public function update($data = array(), $where = array())
  {
    $update = FALSE;

    if (is_array($where) && $where)
    {
      foreach ($where as $key => $value)
      {
        $this->link->where($key, $value);
      }
    }

    if ($this->link->update($this->table, $data))
    {
      $update = TRUE;
    }
    else if ($this->_throw_exception)
    {
      throw new Exception($this->link->_error_number() . ":" . $this->link->_error_message(), 30);
    }

    return $update;
  }

  /**
   * Suppression d'enregistrements de la BDD
   * 
   * @param array $where
   * @return boolean
   * @throws Exception
   */
  public function delete($where = array())
  {
    $delete = FALSE;

    if (is_array($where) && $where)
    {
      foreach ($where as $key => $value)
      {
        $this->link->where($key, $value);
      }
    }

    if ($this->link->delete($this->table))
    {
      $delete = TRUE;
    }
    else if ($this->_throw_exception)
    {
      throw new Exception($this->link->_error_number() . ":" . $this->link->_error_message(), 40);
    }

    return $delete;
  }

}

/* End of file MY_Model.php */
/* Location: ./application/core/MY_Model.php */ 
```

我有我的控制器：Accueil（将是默认路由）

login() 方法调用视图 login.php

ACCUEIL.PHP：

```
 <?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Accueil extends MY_Controller
{

    public function __construct()
    {
        parent::__construct();
        $this->load->model('users_model', 'users_m');
        $this->load->library('form_validation');
        $this->load->helper(array('form', 'url'));
        $this->load->library('template');
    }

    public function index($msg = NULL) //msg en cas d'erreur , NULL si pas d'erreur
    {
        $data['msg'] = $msg;
        $this->load->view('/login', $data);
    }

    public function login()
    {
        // Chargement du model de login
        $this->load->model('login_model');
        // Validation que l'user puisse se connecter
        $result = $this->login_model->validate();
        // Verification du résultat
        if (!$result)
        {
            // Pas de validation on renvoit vers l'index
            $msg = '<font color=red>Nom d\'utilisateur ou mot de passe incorrect(s).</font><br />';
            $this->index($msg);
        }
        else
        {
            // Si validation ok,
            // On l'envoit vers la partie "protégée"
            redirect('home');
        }
    }

} 
```

最后查看：LOGIN.PHP

```
 <!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>connexion</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="kliklipse">

        <!-- Le styles -->
        <link rel="stylesheet" href="<?php echo css_url('bootstrap.min'); ?>">
        <style>
            body {
                padding-top: 40px;
                padding-bottom: 40px;
                background-color: #f5f5f5;
            }

            .form-signin {
                max-width: 300px;
                padding: 19px 29px 29px;
                margin: 0 auto 20px;
                background-color: #fff;
                border: 1px solid #e5e5e5;
                -webkit-border-radius: 5px;
                -moz-border-radius: 5px;
                border-radius: 5px;
                -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
                -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
                box-shadow: 0 1px 2px rgba(0,0,0,.05);
            }
            .form-signin .form-signin-heading,
            .form-signin .checkbox {
                margin-bottom: 10px;
            }
            .form-signin input[type="text"],
            .form-signin input[type="password"] {
                font-size: 16px;
                height: auto;
                margin-bottom: 15px;
                padding: 7px 9px;
            }

        </style>
        <link rel="stylesheet" href="<?php echo css_url('bootstrap-responsive.min'); ?>"> 
        <link rel="stylesheet" href="<?php echo css_url('main'); ?>">  

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="../assets/js/html5shiv.js"></script>
        <![endif]-->

        <!-- Fav and touch icons -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
        <link rel="shortcut icon" href="../assets/ico/favicon.png">
    </head>

    <body>

        <div class="container">

            <form class="form-signin" action="<?php echo base_url();?>accueil/login" method="post" name="process">
                <h2 class="form-signin-heading">Identifiez vous</h2>
                <br />
                <?php if(! is_null($msg)) echo $msg;?> 
                <input type="text" name="user_mail" id="user_mail" class="input-block-level" placeholder="Adresse Email">
                <input type="password" name="password" id="password" class="input-block-level" placeholder="Mot de passe">
                <label class="checkbox">
                    <input type="checkbox" value="remember-me"> Se souvenir de moi
                </label>
                <button class="btn btn-large btn-primary" type="submit">Se connecter</button>
            </form>

        </div> <!-- /container -->

        <div id="footer">
            <div class="container-narrow">
                <p>&copy; Kliklipse 2013 <a href="<?php echo base_url(); ?>">Gestion des utilisateur & groupes</a></p>
            </div>
        </div>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

        <script src="<?php echo js_url('bootstrap.min'); ?>"></script>
        <script src="<?php echo js_url('sorttable'); ?>"></script>
        <script>var base_url = <?php echo base_url(); ?></script>

        <!-- {elapsed_time} seconds-->
    </body>
</html> 
```

我收到 num_rows() 的错误，它是一个未定义的方法......只是不知道为什么......

如果有任何问题，问我（对不起我的英语^^）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:00:11.037

`num_rows()`仅与 CI 的数据库对象资源（而不是结果）一起使用。而这`$query = $this->users_m->get(array('user_mail' => $user_mail));`看起来不像。

尝试这样的事情：

`$query = $this->db->get_where('table_name', array('user_mail' => $user_mail));`

然后你可以使用`$query->num_rows();`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:17:49.390

从您的问题中不清楚是哪个调用`num_rows()`导致了错误。但我会假设它来自您的登录模型，紧随其后的行`var_dump($query);`

在您的`My_model` `get`功能中，您具有以下内容：

```
if (is_object($query))
{
  if ($query->num_rows() == 1)
  {
    $result = $query->result();
    $data = $result[0];             <<<<<< NOTE THIS
  }
  else if ($this->_throw_exception)
  {
    throw new Exception($query->num_rows(), 11);
  }
} 
```

你`$data`从`get`.

此时`$data`是一个`$CI_result`对象，它没有`num_rows()`可用的方法，它是来自查询类的方法。

[CI 结果文档](http://ellislab.com/codeigniter/user-guide/database/results.html)

如果您要签入`My_model`num 行，则无需在登录模型中执行此操作。您现在可以直接调用这些方法，因为您已经完成了检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:37:39.623

我发现错误在哪里。

```
if ($query->num_rows() == 1) 
```

不是正确的语法

```
if ($query->num_rows == 1) 
```

是正确的。$query->num_rows 值为“1”

最后我选择的解决方案是：

我的 user_model.php （用于与用户进行数据库操作）

```
class Users_model extends MY_Model
{

    protected $table   = 'users';
    protected $primary = 'user_id';

    public function liste()
    {

        $this->link->select('user_id');
        $this->link->select('user_name');
        $this->link->select('user_mail');
        $this->link->select("GROUP_CONCAT(group_name ORDER BY group_name SEPARATOR '<br />') AS user_groups", FALSE);

        $this->link->join('groups_users', 'users_user_id=user_id', 'left');
        $this->link->join('groups', 'group_id=groups_group_id', 'left');

        $this->link->group_by('user_id');

        return parent::get_all(array(), array('user_name ASC'));
    }

    public function validate($mail, $password)
    {
        $pass_hashed = sha1($mail . $password);
        return parent::get(array('user_mail'     => $mail, 'user_password' => $pass_hashed));
    }

}
/* End of file users_model.php */

/* Location: ./application/models/users_model.php */ 
```

validate 方法更简单，我不做任何控制。只是 Db 操作。

现在我的控制器 accueil.php

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Accueil extends MY_Controller
{

    public function __construct()
    {
        parent::__construct();
        $this->load->model('users_model', 'users_m');        // Chargement model
        $this->load->library('form_validation');             // Librairie validation
        $this->load->helper(array('form', 'url'));           // helpers
        $this->load->library('template');                   // Librairie template
    }

    public function index($msg = NULL) //msg en cas d'erreur , NULL si pas d'erreur
    {
        $data['msg'] = $msg;
        $this->load->view('login', $data);
    }

public function login()
    {

        try
        {
            $user = $this->users_m->validate($this->input->post('user_mail'), $this->input->post('password'));

            $this->session->set_userdata(array(
                'user_id'   => $user->user_id,
                'user_mail' => $user->user_mail,
                'validated' => TRUE
            ));

            redirect('users');
        }
        catch (Exception $e)
        {
            // Pas de validation on renvoit vers l'index avec un message d'erreur
            $msg = '<font color=red>Nom d\'utilisateur ou mot de passe incorrect(s).</font><br />';
            $this->index($msg);
        }
    }

}

/* End of file accueil.php */
/* Location: ./application/controllers/accueil.php */ 
```

我的看法还是一样，没有变化。

我想我这次写得更正确了。

将数据库操作与控件分开。

随意发表评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-07T14:52:24.637

如果太难解决使用：

```
$count($query); 
```

反而

```
$query->num_rows(); 
```

：/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-21T12:03:12.650

如果缺少以下语句，有时会发生这种情况（即，尚未手动或自动加载 url 帮助程序） `$this->load->helper('url');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-22T07:58:08.520

代替

```
num_row() 
```

这样：

```
if(!empty($Variable))
............... 
```

# c# - 创建一个包含按钮的列表框，并定期选择一个按钮（一种轮播）

> ID：14920901
> 
> 赞同：0
> 
> 时间：2013-02-17T12:06:47.867
> 
> 标签：c#, listbox, carousel

我想创建一个包含按钮的列表框，每次选择一个按钮（动画）我的代码是这样的：

```
<UserControl x:Class="sa.UserControl2"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="108" d:DesignWidth="592" xmlns:my="clr-namespace:sa">

    <Grid Width="572">
        <ListBox  Name="ListBoxV"  ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                  Height="96" HorizontalAlignment="Left" VerticalAlignment="Top"
                  Width="572"
                  ItemsSource="{Binding ListItems}" >
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="Padding" Value="30 0 30 0" />
                </Style>
            </ListBox.ItemContainerStyle>

        </ListBox>
    </Grid>
</UserControl>

 public UserControl2()
    {
        InitializeComponent();

           List<Temp> ListItems = new List<Temp>();
            for (int i = 0; i < 20; i++)
            {
                ListItems.Add(new  Temp("a"+i));
            }

            ListBoxV.ItemsSource = ListItems;

            DispatcherTimer dt = new DispatcherTimer();

            dt.Tick += new EventHandler(dt_Tick);

            dt.Interval = TimeSpan.FromSeconds(2);

            dt.Start();
        }

        void dt_Tick(object sender, EventArgs e)
        {
            if ((ListBoxV.SelectedIndex + 1) < ListBoxV.Items.Count)
                ListBoxV.SelectedIndex = ListBoxV.SelectedIndex + 1;
            else
                ListBoxV.SelectedIndex = 0;
            ListBoxV.ScrollIntoView(ListBoxV.SelectedItem);
        }

        public class Temp
        {
               public Temp(string s)
               {Button b = new Button();
                b.Name=s;            }

        }
    } 
```

列表框不显示按钮，只有动画在为每个元素添加“sa.UserControl2.Temp”。

当显示列表的末尾时，它想回到列表的开头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:36:57.853

要在 ListBox 中显示按钮，您必须为其编写 ItemTemplate。它看起来像这样：

```
<ListBox  Name="ListBoxV"  ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                  Height="96" HorizontalAlignment="Left" VerticalAlignment="Top"
                  Width="572"
                  ItemsSource="{Binding ListItems}" >
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="Padding" Value="30 0 30 0" />
                </Style>
            </ListBox.ItemContainerStyle>
 <ListBox.ItemTempate>
     <DataTemplate>
          <Button Content="{Binding Property}"/>
     </DataTemplate>
 </ListBox.ItemTempate> 
```

接下来，您不需要将按钮添加到 ListBox 的项目集合中，字符串就可以了。因此，您的班级 Temp 需要更改为：

```
class Temp{
    string Property {get;set;}
    public Temp(string s){
        Property = s;
    }
} 
```

通过这些更改，您将拥有带有按钮的列表框。这些按钮将显示来自 Temp.Property 属性的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:44:03.940

你在这里有几个问题。我建议您阅读[DataTemplates](http://wpftutorial.net/DataTemplates.html)和[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)

首先，您用来填写 ListBox （或任何其他`ItemsControl`基于元素）的项目严格来说应该是数据项目。这些不能包含`Button`s 之类的东西。最好在 WPF 中保持应用程序逻辑和 UI 分离。

下面是一个带有 ItemTemplate 的 ListBox 示例：

```
<ListBox  Name="ListBoxV"  ScrollViewer.HorizontalScrollBarVisibility="Hidden"
          Height="96" HorizontalAlignment="Left" VerticalAlignment="Top"
          Width="572"
          ItemsSource="{Binding ListItems}" >
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="Padding" Value="30 0 30 0" />
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
       <DataTemplate>
           <Button Content="{Binding Property}"/>
       </DataTemplate>
</ListBox> 
```

数据项：

```
public class Temp
{
    string Property {get;set;}

    public Temp(string s)
    {
        Property = s;
    }
} 
```

另请注意，当您在类中更改这些属性时，为了支持 UI 上的更新`Temp`，它必须实现[`System.ComponentModel.INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。

然后，如果要在为每个项目单击按钮时执行操作，则必须使用[`ICommand`](http://wpftutorial.net/DelegateCommand.html)：

```
public class Temp
{
    string Property {get;set;}

    public Temp(string s)
    {
        Property = s;
        DoSomethingCommand = new DelegateCommand(x => DoSomething());
    }

    public DelegateCommand DoSomethingCommand {get;set;}

    private void DoSomething()
    {
        //DoSomething when the Button is Clicked!!
    }
} 
```

XAML：

```
<Button Content="{Binding Property}" Command="{Binding DoSomethingCommand}"/> 
```

# python - 与 numpy.timedelta64 的时间差（以秒为单位）

> ID：14920903
> 
> 赞同：52
> 
> 时间：2013-02-17T12:07:10.480
> 
> 标签：python, datetime, numpy

如何从 numpy.timedelta64 变量中获取以秒为单位的时差？

```
time1 = '2012-10-05 04:45:18'
time2 = '2012-10-05 04:44:13'
dt = np.datetime64(time1) - np.datetime64(time2)
print dt

0:01:05 
```

我想转换`dt`为以秒为单位表示时差的数字（int 或 float）。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-02-17T12:39:20.757

[要使用1.7 实验性日期时间 API](https://docs.scipy.org/doc/numpy/reference/arrays.datetime.html)`numpy.timedelta64()`从对象获取秒数：[`numpy`](https://docs.scipy.org/doc/numpy/reference/arrays.datetime.html)

```
seconds = dt / np.timedelta64(1, 's') 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-17T12:09:25.473

您可以通过“包装的”日期时间项访问它：

```
>>> dt.item().total_seconds()
65.0 
```

*解释*：这里`dt`是一个[数组标量](http://docs.scipy.org/doc/numpy/reference/arrays.scalars.html)in `numpy`，它是一个零秩数组或 0 维数组。所以你会发现`dt`这里也有 ndarray 拥有的所有方法，你可以做例如`dt.astype('float')`. 但它包装了一个 python 对象，在本例中是一个`datetime.timedelta`对象。

要获得原始标量，您可以使用`dt.item()`. 要索引数组标量，您可以使用 getitem 的有点奇怪的语法，使用一个空元组：

```
>>> dt[()]
array(datetime.timedelta(0, 65), dtype='timedelta64[s]') 
```

这应该适用于所有版本的 numpy，但如果您使用的是 numpy v1.7+，最好直接使用更新的 numpy datetime API，如[JF Sebastien](https://stackoverflow.com/a/14921192/674039)的回答中所述。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-05T18:06:10.157

您可以使用 np.astype 简单地将值转换为所需的时间单位，如示例所示：

```
timedelta = np.datetime64('2011-07-18')-np.datetime64('2011-07-16')
seconds = timedelta.astype('timedelta64[s]').astype(np.int32)
hours = timedelta.astype('timedelta64[h]').astype(np.int32) 
```

# javascript - 基于另一个字段禁用表单字段不起作用

> ID：14920904
> 
> 赞同：2
> 
> 时间：2013-02-17T12:07:21.137
> 
> 标签：javascript, jquery, html, forms

我有一个带有多项选择字段 A 的表单

```
<select multiple="multiple" name="A"></select> 
```

和一个布尔复选框 B

```
<input type="checkbox" name="B" /> 
```

如果选中字段 B，我想禁用字段 A。如果字段 B 未选中，我想再次重新启用字段 A。

我试过这个：

```
$('input[name="B"]').toggle(function() {
    $('select[name="A"]').addClass('uneditable-input').attr('disabled', 'disabled');
}, function() {
    $('select[name="A"]').removeClass('uneditable-input').removeAttr('disabled');
}); 
```

但是，这不起作用。相反，它使复选框从我的网页中消失。我怎样才能实现我上面描述的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:10:58.047

> 我怎样才能实现我上面描述的？

而不是`toggle`，用于[`click`](http://api.jquery.com/click)连接（单个）处理程序，然后在处理程序内检查`this.checked`是否`B`已检查。

```
$('input[name="B"]').click(function() {
    if (this.checked) {
        $('select[name="A"]').addClass('uneditable-input').attr('disabled', 'disabled');
    }
    else {
        $('select[name="A"]').removeClass('uneditable-input').removeAttr('disabled');
    }
}); 
```

# php - 通过 activeRecord 属性值在 gridView 中设置 imageUrl

> ID：14920908
> 
> 赞同：0
> 
> 时间：2013-02-17T12:07:49.433
> 
> 标签：php, gridview, yii

我正在尝试通过活动记录属性在我的 gridView 中动态设置图像的来源。我的情况是我想要一个开关按钮来忽略和不忽略一些用户信息。有两个不同的图像名称`accept1.png`，`accpt0.png`并且我的数据库中有一个名为 as 的属性，`is_ignored`它可以采用 和 之间的`0`值`1`。我想要做的是通过使用此属性在网格视图中设置图像按钮的来源。例如，如果`is_ignored`等于`0`显示`accept0.png`，如果它是`1`显示`accept1.png`。我想做这样的事情：

```
array(
                        'class' => 'CButtonColumn',
                        'template' => '{acceptStatus}',
                        'header' => Yii::t('app', 'Accept status'),
                        'buttons' => array(
                            'acceptStatus' => array(
                                'url' => "CController::createUrl('/mycontroller/myaction' , array('id'=>\$data->id,'f'=>'1'))",
                                'imageUrl' => "/themes/negin/images/accept\$data->is_ignored.png",
                            ),
                        )
                    ), 
```

对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:07:28.520

您必须了解这`$data`仅在小部件的运行时可用，因此您的代码必须经过评估

听起来你想要这个：

```
'url' => 'CController::createUrl("/mycontroller/myaction" , array("id"=>$data->id,"f"=>"1"))',
'imageUrl' => '"/themes/negin/images/accept".$data->is_ignored.".png"', 
```

# java - ACTION_MOVE 未报告正确的 Y 值

> ID：14920914
> 
> 赞同：2
> 
> 时间：2013-02-17T12:08:26.207
> 
> 标签：java, android, view, keyboard, touch

我有一个键盘视图，我需要跟踪`ACTION_MOVE`手指何时离开键盘视图。问题是，一旦它超出了它就会停止报告正确的值并在我的手指在键盘视图上方时`Y`继续报告最后一个值。`Y`

对于调试，我只添加了一个简单`onTouchListener`的，所以我知道服务的其余部分不会以任何方式干扰触摸事件。

```
setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.v("YBugDebug", "getRawY() = "+ event.getRawY()+"");
            return true;
        }
}); 
```

我已经调试了好几天了，不知道为什么。有什么建议么？我试过`getY()` `getRawY()`了，将监听器附加到根视图。

奇怪的是，`Y`当我的 ICS 设备处于横向状态时，Gingerbread 中的值会正确报告。如下所述，视图似乎没有响应悬停事件。

我尝试将其添加`onTouch`到根视图，但结果完全相同。`Y`为什么它可以检测到移动但不能检测到正确的轴，这真是令人难以置信。

这是问题的外观：

[![](../Images/780af35f0551666472de6427ab647bed.png)](https://i.stack.imgur.com/UCxPu.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:39:11.980

甚至在所有屏幕上都获得触摸的一种方法是使用 frameLayout 包装整个内容，并在其上使用 setOnTouchListener，同时为其 onTouch() 方法返回 false。

我很确定我已经阅读过类似的替代方法，但我不记得它是什么。也许使用您已经自动拥有的视图。也许 findViewById( R.id.content) 或 getRootView() ，但我不确定它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:45:16.577

我不是这方面的专家，但您是说 ACTION_MOVE 事件是在您的 KeyboardView 范围之外触发​​的吗？

# ruby-on-rails - 如何在不重新创建脚手架的情况下更改其名称？

> ID：14920915
> 
> 赞同：2
> 
> 时间：2013-02-17T12:08:27.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我创建了一个脚手架“示例”，并对其控制器和视图进行了许多更改。

现在我想将它重命名为“sample”，**有什么方法可以做到不破坏任何东西**吗？手动编辑控制器、模型、视图和迁移文件会很困难，所以我希望有一些东西可以缓解这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T12:47:01.053

目前是不可能的。

您将需要手动编辑现有控制器。[您可以使用RubyMine](http://www.jetbrains.com/ruby/)等高级 IDE来帮助您完成这项工作。

另外，我不建议您更改现有的脚手架。您可以创建一个新的，确保它正常工作，然后删除旧的。

小心不要重命名迁移或您的应用程序可能会中断。迁移一旦应用就不应更改，要更改架构，您应该创建新的迁移。

# grails - Grails 3 合一然后排序

> ID：14920920
> 
> 赞同：1
> 
> 时间：2013-02-17T12:09:04.030
> 
> 标签：grails

我不确定这是否可以做到，

我有 3 个带有当前日期标签的集合。我想按日期对所有收藏品进行排序并只返回一个收藏品。

我的收藏是图片、文字和视频。我可以拉出每个集合并自行按日期排序，但我想将它们全部合并，然后按日期排序。这可能吗。目前我正在使用一个单独的域来保持集合的顺序并按顺序逐个拉出每个对象，但这似乎是一种不好的做法。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:15:47.340

如果我理解正确，您可以尝试使用[sort()](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort%28groovy.lang.Closure%29)方法。def sortedCommon = (textCollection + videoCollection + pictureCollection).sort{it.date}

或者正如 Miguel Prz 所说：“构建一个继承模式：文本、视频和图片继承自 Item，并在此级别工作”。这是一个很好的建议。

# java - 如何通过 Maven 将“-J”选项传递给 javac？

> ID：14920921
> 
> 赞同：9
> 
> 时间：2013-02-17T12:09:19.087
> 
> 标签：java, maven, javac, maven-compiler-plugin

我有一个使用 Maven 构建的 Java 项目。我想向“javac”命令行添加选项——特别是，我想传递一些“-J”选项。

所以通常我会做这样的事情：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <compilerArgument>-J-Xdebug</compilerArgument>
        <compilerArgument>-J-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005</compilerArgument>
    </configuration>
</plugin> 
```

但是，当我尝试这个时，我得到了以下形式的错误：

```
[ERROR] Failure executing javac,  but could not parse the error:
javac: invalid flag: -J-Xdebug
Usage: javac <options> <source files>
use -help for a list of possible options 
```

经过仔细调查，似乎 maven-compiler-plugin 将所有编译器参数写入选项文件，并像“javac @optionfile”一样调用 javac。根据[http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html)上的 javac 官方文档：

> @argfiles 一个或多个列出选项和源文件的文件。这些文件中不允许使用 -J 选项。

所以看起来 maven-compiler-plugin 中的选项不起作用 - 它想使用 arg 文件，arg 文件不能包含我想要的选项。

我也看到了一些使用地图的建议——但是当我尝试它时，结果相似。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T12:18:49.710

编译器插件允许您[指定 jdk 的位置](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html)，因此您可以使用如下内容：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.0</version>
    <configuration>
      <verbose>true</verbose>
      <fork>true</fork>
      <executable><!-- path-to-javac-invoking-script --></executable>
      <compilerVersion>1.3</compilerVersion>
    </configuration>
  </plugin> 
```

并为它提供一个脚本/bat文件的路径，该文件将所有参数连同你的额外参数一起传递给真正的javac？

**编辑**-[最初的问题](http://jira.codehaus.org/browse/MCOMPILER-129)已在编译器插件 2.4+ 中得到修复，现在应该可以在没有我的解决方法的情况下使用

# ruby - 重构此代码以提高可读性

> ID：14920922
> 
> 赞同：0
> 
> 时间：2013-02-17T12:09:21.217
> 
> 标签：ruby, arrays

请看下面的代码

```
def test
  array = Array.new
  array2 = Array.new

  groups = [[424235, "goa", "italy"], [523436, "mumbai"], [342423, "africa", "goa"]]
  type = ["goa", "mumbai"]
  groups.each_with_index do |item,index|

       if item.include?(type[0]) == true
         array << index  << array2
        elsif item.include?(type[1]) == true
               array2 << index 
       else
         "nothing ;)"
       end

  end
  print array.each_slice(2).map { |a, b| [a, b.first] }
end
combine

#Output - [[0, 1], [2, 1]] 
```

看到代码的问题了吗？那就是我正在使用一堆 if 和 else 语句。如果`type`数组有超过 2 个条目怎么办。我不能继续写 if 和 elsif 语句。这就是我需要你帮助的地方。什么是更好的构建代码的方法？循环？如果是这样的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T13:15:49.673

这是我的代码。

```
def combinations(groups, types)
  array = Array.new(types.size) { Array.new([]) }
  groups.each_with_index do |item, index|
     types.each_with_index { |type, i| array[i] << index if item.include? type }
  end

  flat = array.inject { |acc, i| acc.product i }.flatten
  flat.each_slice(types.size).to_a
end 
```

示例测试用例

```
combinations([[424235, "goa", "italy"], [523436, "mumbai"], [342423, "africa", "goa"]], ["goa", "mumbai"]) 
```

输出 ：`[[0, 1], [2, 1]]`

```
combinations([[424235, "goa", "italy"], [523436, "mumbai"], [342423, "africa", "goa"]], ["goa", "africa"]) 
```

输出 ：`[[0, 2], [2, 2]]`

```
combinations([[424235, "goa", "italy"], [523436, "mumbai"], [342423, "africa", "goa"], [123, "india"]], ["goa", "mumbai", "india"]) 
```

输出 ：`[[0, 1, 3], [2, 1, 3]]`

```
combinations([[424235, "goa", "italy"], [523436, "mumbai"], [342423, "mumbai", "goa"], [123, "india"]], ["goa", "mumbai", "india", "italy"]) 
```

输出 ：`[[0, 1, 3, 0], [0, 2, 3, 0], [2, 1, 3, 0], [2, 2, 3, 0]]`

如果我正确理解了您的问题，那么这些应该是正确的。虽然我可能误会了你。如果我的问题错了，请告诉我，如果你能提供测试用例，那就太好了。

# php - 从 html 响应中替换字符串

> ID：14920925
> 
> 赞同：0
> 
> 时间：2013-02-17T12:09:54.003
> 
> 标签：php, html, string

我使用 curl 发布到支付网关 url，然后使用网关页面进行响应。网关页面无法正确呈现，因为页面中的样式表和脚本是相对于根目录的。

我正在尝试使用 php`str_replace`来更改 url，但它似乎不起作用

```
//make request to interswitch
        $url = "https://webpay.interswitchng.com/paydirect/pay";

        //open connection
        $ch = curl_init();

        //set the url, number of POST vars, POST data
        curl_setopt($ch,CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,2);
        curl_setopt($ch,CURLOPT_URL, $url);
        curl_setopt($ch,CURLOPT_POST, 1);
        curl_setopt($ch,CURLOPT_POSTFIELDS, $this->parameters);

        //execute post
        $result = curl_exec($ch);

        if(!curl_errno($ch)) {

           curl_close($ch);
           $result = str_replace('/paydirect','https://webpay.interswitchng.com/paydirect',$return);
           echo $result;

        }else {
            echo curl_errno($ch);
            curl_close($ch);
       } 
```

请指出我正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:13:55.127

替换对我来说看起来是正确的。页面的源代码看起来如何？您也可以尝试设置一个[基本标签](http://www.w3schools.com/tags/tag_base.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:18:27.873

你为什么不尝试添加这个选项

```
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true); 
```

# java - 多线程中的 for 循环无法正常工作

> ID：14920929
> 
> 赞同：-2
> 
> 时间：2013-02-17T12:11:07.080
> 
> 标签：java, multithreading

我创建新线程并启动它。它的运行方法有以下代码：

```
for (int a=0; a<10; a++) {
    System.out.println(a);
    Thread.sleep(10);
} 
```

我得到的是：

`0 0 1 1 2 0 2 3 1 0 3 4 2 1 0 4 5 3 2 1 0 5 6 4`

... 等等。为什么我不明白`1 2 3 4 5 6 7 8 9`？什么原因？

**编辑：**

线程代码：

```
private class WarpEnemyRnn implements Runnable {
    private WarpEnemy enemy;

    public WarpEnemyRnn(WarpEnemy enemy) {
        this.enemy = enemy;
    }

    @Override
    public void run() {
        try {
            for (int a=0; a<8; a++) {
                System.out.println(a);
                enemy.subOpacity();
                Thread.sleep(refreshRate);
            }
            Point2D warpPoint = enemy.warp();
            enemy.setX((int) warpPoint.getX());
            enemy.setY((int) warpPoint.getY());
            enemy.resetWarpCooldown();
            for (int a=0; a<8; a++) {
                enemy.addOpacity();
                Thread.sleep(refreshRate);
            }
        } catch (InterruptedException ex) {
            ex.printStackTrace();
        }
    }
} 
```

新线程在其他线程中创建，每 15 毫秒运行一次。只有在某些条件一致时才会创建它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T12:21:14.950

所有线程都打印到相同的标准输出。

每次你看到一个 0 打印出来就是一个新线程被创建的时候。

这是您的主题：

```
0   1   2     3       4         5           6  
  0   1     2       3         4           5    
          0     1       2         3           4
                  0       1         2
                            0         1
                                        0 
```

每个都按顺序打印数字。

注意 - 不能保证每个输出都分配给我指定的线程，这只是输出的一种可能对齐方式（例如，前两个线程的输出是可互换的），但时间表明这确实是正确的分配.

如果您想查看哪个线程打印什么，您可以为每个线程添加一个唯一 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:21:33.940

> 新线程在其他线程中创建，每 15 毫秒运行一次。只有在某些条件一致时才会创建它。

您尚未显示该代码，但我预计正在发生的事情是您正在创建和运行多个`WarpEnemyRnn`实例。您启动一个启动的条件可能需要一个警卫，以确定它是否*已经*启动了一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T12:26:58.453

相同的资源：`System.out`由所有线程共享。

如果您想看到正确的输出，则必须对其进行同步，**但这不是一个好习惯，因为它会降低并发性**。

```
private class WarpEnemyRnn implements Runnable {
    private WarpEnemy enemy;

    public WarpEnemyRnn(WarpEnemy enemy) {
        this.enemy = enemy;
    }

    @Override public void run() {
        try {
           synchronize( System.out) {           //<<<<<<< HERE IS THE SYNCHRO
              for (int a=0; a<8; a++) {
                 System.out.println(a);
              }
           }
           for (int a=0; a<8; a++) {
              enemy.subOpacity();
              Thread.sleep(8*refreshRate);
           }
           ... 
```

# android - Android resolution issue when showing images on different devices

> ID：14920930
> 
> 赞同：0
> 
> 时间：2013-02-17T12:11:11.113
> 
> 标签：android, image, resolution, image-size

I'm having a problem with image size showing on devices with different screen resolutions. So far, I noticed that the size is appropriate for 'smaller' devices - 240x320 , 320x400 , 400x800 (mostly, but not all of them)... but the problem occurs when I try it on, for instance, Galaxy S3 (which is 720x1300), even for some 400x800.

The problem is that the image which I wrap (and put dynamically on interface) won't show in original size. I went a step further - image is taken from server in exactly the size needed for particular device - I read the screen size and send it to server and the server returns the image with the needed size. After that I show it with the following code (must do it programmaticaly):

```
RelativeLayout rl = new RelativeLayout(context);
LinearLayout.LayoutParams rlLayoutParams = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
rlLayoutParams.gravity = Gravity.CENTER;
rl.setLayoutParams(rlLayoutParams);

ImageView imageMain = new ImageView(context);
RelativeLayout.LayoutParams imageLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
imageLayoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
imageMain.setLayoutParams(imageLayoutParams);

rl.addView(imageMain); 
```

As you can see, I also have to use Relative layout because other images (icons actualy) are put over the main one (like badges in corners) so the LinearLayout is of no use... Any chance that this might cause the problem? Or, is there any other parameter(s) that must be taken in consideration, besides the screen resolution (screen width and height)?

Any experience on this issue would be of great help so please advise if any ideas...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:21:12.703

Place your images in the drawable-nodpi folder....

# image-processing - 用于图像过滤的 3d CUDA 内核索引？

> ID：14920931
> 
> 赞同：3
> 
> 时间：2013-02-17T12:11:18.867
> 
> 标签：image-processing, cuda, filtering

我有一个图像特征矩阵**A 是为过滤填充的 n*m*31 矩阵**，我有**B 作为对象过滤器 k*l*31**。我想获得一个输出**矩阵 C is p*r*31 与图像 A 的大小没有 padding**。我尝试编写一个 CUDA 代码来在 A 上运行过滤器 B 并获得 C。

我假设 A 上的每个过滤操作和过滤器 B 都被一个线程块占用，因此每个线程块内都会有 k*l 操作。并且每个移位的过滤操作将在不同的线程块上完成。对于 A(0,0)，过滤将在 thread_block(0,0) 上，对于 A(0,1)，将在 thread_block(1,0) 上，依此类推。我也有第三个维度为 31。第三个维度的每个空间都将自行计算。因此，通过对矩阵进行正确的 3d 索引，我可能能够以非常并行的形式进行所有操作。

所以操作是

```
A n*m*31 X B k*l*31 = C p*r*31 
```

如何有效地为操作进行内核索引？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T21:22:11.920

这是我编写的一些代码，可以大致按照您的描述进行。

它创建一个 3D 数据集（称为，但它`cell`与您的数组相当`A`），用随机数据填充它，然后根据. 的数据大小大于（您称其为“填充”）的大小，以允许将函数传递到. 在我的例子中，函数 B 只是在 3D 立方体积中找到与 B 的大小相关的最小值（我称之为，创建一个 3D 区域x x ）并将结果存储在.`node``C``A``A``C``B``A``A``WSIZE``WSIZE``WSIZE``WSIZE``C`

此特定代码尝试通过将输入 A 的某个区域复制到每个块的共享内存中来利用数据重用。每个块计算多个输出点（即它多次计算 B 以填充 C 的区域），以利用 B 的相邻计算的数据重用机会。

这可能有助于您入门。您显然必须用您想要的 B 函数替换 B （我的最小查找代码）。此外，在我的情况下，您需要将 B 域从立方域修改为与您的 B 尺寸相对应的任何类型的矩形棱镜。这也会影响共享内存操作，因此您可能希望在第一次迭代中放弃共享内存，只是为了让事情在功能上正确，然后添加共享内存优化，看看您可以获得什么好处。

```
#include <stdio.h>
#include <stdlib.h>
// these are just for timing measurments
#include <time.h>
// Computes minimum in a 3D volume, at each output point
// To compile it with nvcc execute: nvcc -O2 -o grid3d grid3d.cu
//define the window size (cubic volume) and the data set size
#define WSIZE 6
#define DATAXSIZE 100
#define DATAYSIZE 100
#define DATAZSIZE 20
//define the chunk sizes that each threadblock will work on
#define BLKXSIZE 8
#define BLKYSIZE 8
#define BLKZSIZE 8

// for cuda error checking
#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            return 1; \
        } \
    } while (0)
// device function to compute 3D volume minimum at each output point
__global__ void cmp_win(int knode[][DATAYSIZE][DATAXSIZE], const int kcell[][DATAYSIZE+(WSIZE-1)][DATAXSIZE+(WSIZE-1)])
{
    __shared__ int smem[(BLKZSIZE + (WSIZE-1))][(BLKYSIZE + (WSIZE-1))][(BLKXSIZE + (WSIZE-1))];
    int tempnode, i, j, k;
    int idx = blockIdx.x*blockDim.x + threadIdx.x;
    int idy = blockIdx.y*blockDim.y + threadIdx.y;
    int idz = blockIdx.z*blockDim.z + threadIdx.z;
    if ((idx < (DATAXSIZE+WSIZE-1)) && (idy < (DATAYSIZE+WSIZE-1)) && (idz < (DATAZSIZE+WSIZE-1))){
      smem[threadIdx.z][threadIdx.y][threadIdx.x]=kcell[idz][idy][idx];
      if ((threadIdx.z > (BLKZSIZE - WSIZE)) && (idz < DATAZSIZE))
        smem[threadIdx.z + (WSIZE-1)][threadIdx.y][threadIdx.x] = kcell[idz + (WSIZE-1)][idy][idx];
      if ((threadIdx.y > (BLKYSIZE - WSIZE)) && (idy < DATAYSIZE))
        smem[threadIdx.z][threadIdx.y + (WSIZE-1)][threadIdx.x] = kcell[idz][idy+(WSIZE-1)][idx];
      if ((threadIdx.x > (BLKXSIZE - WSIZE)) && (idx < DATAXSIZE))
        smem[threadIdx.z][threadIdx.y][threadIdx.x + (WSIZE-1)] = kcell[idz][idy][idx+(WSIZE-1)];
      if ((threadIdx.z > (BLKZSIZE - WSIZE)) && (threadIdx.y > (BLKYSIZE - WSIZE)) && (idz < DATAZSIZE) && (idy < DATAYSIZE))
        smem[threadIdx.z + (WSIZE-1)][threadIdx.y + (WSIZE-1)][threadIdx.x] = kcell[idz+(WSIZE-1)][idy+(WSIZE-1)][idx];
      if ((threadIdx.z > (BLKZSIZE - WSIZE)) && (threadIdx.x > (BLKXSIZE - WSIZE)) && (idz < DATAZSIZE) && (idx < DATAXSIZE))
        smem[threadIdx.z + (WSIZE-1)][threadIdx.y][threadIdx.x + (WSIZE-1)] = kcell[idz+(WSIZE-1)][idy][idx+(WSIZE-1)];
      if ((threadIdx.y > (BLKYSIZE - WSIZE)) && (threadIdx.x > (BLKXSIZE - WSIZE)) && (idy < DATAYSIZE) && (idx < DATAXSIZE))
        smem[threadIdx.z][threadIdx.y + (WSIZE-1)][threadIdx.x + (WSIZE-1)] = kcell[idz][idy+(WSIZE-1)][idx+(WSIZE-1)];
      if ((threadIdx.z > (BLKZSIZE - WSIZE)) && (threadIdx.y > (BLKYSIZE - WSIZE)) && (threadIdx.x > (BLKXSIZE - WSIZE)) && (idz < DATAZSIZE) && (idy < DATAYSIZE) && (idx < DATAXSIZE))
        smem[threadIdx.z+(WSIZE-1)][threadIdx.y+(WSIZE-1)][threadIdx.x+(WSIZE-1)] = kcell[idz+(WSIZE-1)][idy+(WSIZE-1)][idx+(WSIZE-1)];
      }
    __syncthreads();
    if ((idx < DATAXSIZE) && (idy < DATAYSIZE) && (idz < DATAZSIZE)){
      tempnode = knode[idz][idy][idx];
      for (i=0; i<WSIZE; i++)
        for (j=0; j<WSIZE; j++)
          for (k=0; k<WSIZE; k++)
          if (smem[threadIdx.z + i][threadIdx.y + j][threadIdx.x + k] < tempnode)
            tempnode = smem[threadIdx.z + i][threadIdx.y + j][threadIdx.x + k];
      knode[idz][idy][idx] = tempnode;
      }
}

int main(int argc, char *argv[])
{
    typedef int cRarray[DATAYSIZE+WSIZE-1][DATAXSIZE+WSIZE-1];
    typedef int nRarray[DATAYSIZE][DATAXSIZE];
    int i, j, k, u, v, w, temphnode;
    const dim3 blockSize(BLKXSIZE, BLKYSIZE, BLKZSIZE);
    const dim3 gridSize(((DATAXSIZE+BLKXSIZE-1)/BLKXSIZE), ((DATAYSIZE+BLKYSIZE-1)/BLKYSIZE), ((DATAZSIZE+BLKZSIZE-1)/BLKZSIZE));
// these are just for timing
    clock_t t0, t1, t2, t3;
    double t1sum=0.0f;
    double t2sum=0.0f;
    double t3sum=0.0f;
// overall data set sizes
    const int nx = DATAXSIZE;
    const int ny = DATAYSIZE;
    const int nz = DATAZSIZE;
// window (cubic minimization volume) dimensions
    const int wx = WSIZE;
    const int wy = WSIZE;
    const int wz = WSIZE;
// pointers for data set storage via malloc
    nRarray *hnode; // storage for result computed on host
    nRarray *node, *d_node;  // storage for result computed on device
    cRarray *cell, *d_cell;  // storage for input
// start timing
    t0 = clock();
// allocate storage for data set
    if ((cell = (cRarray *)malloc(((nx+(wx-1))*(ny+(wy-1))*(nz+(wz-1)))*sizeof(int))) == 0) {fprintf(stderr,"malloc Fail \n"); return 1;}
    if ((node = (nRarray *)malloc((nx*ny*nz)*sizeof(int))) == 0) {fprintf(stderr,"malloc Fail \n"); return 1; }
    if ((hnode = (nRarray *)malloc((nx*ny*nz)*sizeof(int))) == 0) {fprintf(stderr, "malloc Fail \n"); return 1; }
// synthesize data
    for(i=0; i<(nz+(wz-1)); i++)
      for(j=0; j<(ny+(wy-1)); j++)
        for (k=0; k<(nx+(wx-1)); k++){
          cell[i][j][k] = rand(); // unless we use a seed this will produce the same sequence all the time
          if ((i<nz) && (j<ny) && (k<nx)) {
            node[i][j][k]  = RAND_MAX;
            hnode[i][j][k] = RAND_MAX;
            }
          }
    t1 = clock();
    t1sum = ((double)(t1-t0))/CLOCKS_PER_SEC;
    printf("Init took %3.2f seconds.  Begin compute\n", t1sum);
// allocate GPU device buffers
    cudaMalloc((void **) &d_cell, (((nx+(wx-1))*(ny+(wy-1))*(nz+(wz-1)))*sizeof(int)));
    cudaCheckErrors("Failed to allocate device buffer");
    cudaMalloc((void **) &d_node, ((nx*ny*nz)*sizeof(int)));
    cudaCheckErrors("Failed to allocate device buffer2");
// copy data to GPU
    cudaMemcpy(d_node, node, ((nx*ny*nz)*sizeof(int)), cudaMemcpyHostToDevice);
    cudaCheckErrors("CUDA memcpy failure");
    cudaMemcpy(d_cell, cell, (((nx+(wx-1))*(ny+(wy-1))*(nz+(wz-1)))*sizeof(int)), cudaMemcpyHostToDevice);
    cudaCheckErrors("CUDA memcpy2 failure");

    cmp_win<<<gridSize,blockSize>>>(d_node, d_cell);
    cudaCheckErrors("Kernel launch failure");
// copy output data back to host

    cudaMemcpy(node, d_node, ((nx*ny*nz)*sizeof(int)), cudaMemcpyDeviceToHost);
    cudaCheckErrors("CUDA memcpy3 failure");
    t2 = clock();
    t2sum = ((double)(t2-t1))/CLOCKS_PER_SEC;
    printf(" Device compute took %3.2f seconds.  Beginning host compute.\n", t2sum);
// now compute the same result on the host
    for (u=0; u<nz; u++)
      for (v=0; v<ny; v++)
        for (w=0; w<nx; w++){
          temphnode = hnode[u][v][w];
          for (i=0; i<wz; i++)
            for (j=0; j<wy; j++)
              for (k=0; k<wx; k++)
                if (temphnode > cell[i+u][j+v][k+w]) temphnode = cell[i+u][j+v][k+w];
          hnode[u][v][w] = temphnode;
          }
    t3 = clock();
    t3sum = ((double)(t3-t2))/CLOCKS_PER_SEC;
    printf(" Host compute took %3.2f seconds.  Comparing results.\n", t3sum);
// and compare for accuracy
    for (i=0; i<nz; i++)
      for (j=0; j<ny; j++)
        for (k=0; k<nx; k++)
          if (hnode[i][j][k] != node[i][j][k]) {
            printf("Mismatch at x= %d, y= %d, z= %d  Host= %d, Device = %d\n", i, j, k, hnode[i][j][k], node[i][j][k]);
            return 1;
            }
    printf("Results match!\n");
    free(cell);
    free(node);
    cudaFree(d_cell);
    cudaCheckErrors("cudaFree fail");
    cudaFree(d_node);
    cudaCheckErrors("cudaFree fail");
    return 0;
} 
```

# css - LESS CSS 用不同的前缀转义整个 CSS 规则？

> ID：14920935
> 
> 赞同：4
> 
> 时间：2013-02-17T12:11:34.180
> 
> 标签：css, variables, escaping, less

我如何逃避以下内容：

```
.prefix(@rule, @prop) {
  -webkit-@{rule}: @{prop};
  -moz-@{rule}: @{prop};
  -o-@{rule}: @{prop};
  -ms-@{rule}: @{prop};
  @{rule}: @{prop};
} 
```

我尝试了很多不同的方法，将它包装在 中`~"stuff"`，将变量包装在 中`@{var}`，反斜杠`-`'s ......没有成功！

**编辑：** Github 上有一个 pull req：[https ://github.com/cloudhead/less.js/pull/698](https://github.com/cloudhead/less.js/pull/698)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T19:15:10.537

## LESS 1.6+ 的更新

您的原始计划几乎适用[于 LESS 1.6 更新](https://github.com/less/less.js/blob/master/CHANGELOG.md)。这是所需的语法：

**较少的**

```
.prefix(@rule, @prop) {
  -webkit-@{rule}: @prop;
  -moz-@{rule}: @prop;
  -o-@{rule}: @prop;
  -ms-@{rule}: @prop;
  @{rule}: @prop;
}

.test {
  .prefix(box-sizing, border-box);
} 
```

**CSS 输出**

```
.test {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -o-box-sizing: border-box;
  -ms-box-sizing: border-box;
  box-sizing: border-box;
} 
```

**尽管如此**，我关于属性值的其他预处理的原始答案仍然成立。

## 原始答案（1.6 之前）

LESS 不允许动态属性（是的，我相信 SASS 允许）。

***然而***[，模式匹配](http://www.lesscss.org/#-pattern-matching-and-guard-expressions)需要用于 LESS 并不是一件坏事模式匹配可能需要*的差异，并在代码中适应这些差异。*

以下面为例。它需要两个变量，并且（目前）允许另外两个变量（这里是带有背景图像的渐变）。如果需要，它可以扩展以允许更多额外的变量。

注意每个嵌套的 mixin 如何期望将不同类型的东西传递给第二个和以后的变量，并且每个都可以以不同的方式预处理这些变量。下面的示例允许`opacity`作为十进制值或数字整数传递（尽管 的值`1`将假定十进制值`1.0`（即 100%） not `0.01`。它允许`padding`在`box-sizing`属性中，但对于非 mozilla 将其过滤掉浏览器（[根据此页面，其他浏览器不支持](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)）。因此，您可以看到通过每个属性可能需要的“思考”是有益的，因此必须为每个属性设置不同的模式匹配混合可能很有价值。

**较少的**

```
.prefix(@prop, @v1, @v2:~'', @v3:~'') {
  .prop(opacity) {
    @decValue: `(@{v1} > 1 ? @{v1}/100 : @{v1})`;
    @intValue: `(@{v1} <= 1 ? @{v1}*100 : @{v1})`;
    filter: alpha(opacity=@intValue);
    -webkit-opacity: @decValue;
    -moz-opacity: @decValue;
    opacity: @decValue;
  }
  .prop(boxSize) {
    @filteredSupport: ~`("@{v1}" == "padding" ? "border" : "@{v1}")`;
    -webkit-box-sizing: (~"@{filteredSupport}-box");
    -moz-box-sizing: (~"@{v1}-box"); 
    box-sizing: (~"@{filteredSupport}-box");
  }
  .prop(bkgGradient) {
    .filterFirstTwoArgs(@type, @color, @gradient) {
      background-color: @color; 
      background-image: ~"-webkit-@{type}-gradient(@{gradient})";
      background-image: ~"   -moz-@{type}-gradient(@{gradient})";
      background-image: ~"    -ms-@{type}-gradient(@{gradient})";
      background-image: ~"     -o-@{type}-gradient(@{gradient})";
      background-image: ~"        @{type}-gradient(@{gradient})";
    }
    .filterFirstTwoArgs(@v1, @v2, @v3);
  }
  .prop(@prop);
} 
```

**用它：**

```
.myClass {
  .prefix(opacity, 10);
  .prefix(boxSize, padding);
  .prefix(bkgGradient, linear, #F07575, "top, hsl(0, 80%, 70%), #bada55"); 
} 
```

**CSS 输出**

```
.myClass {
  filter: alpha(opacity=10);
  -webkit-opacity: 0.1;
  -moz-opacity: 0.1;
  opacity: 0.1;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: padding-box;
  box-sizing: border-box;
  background-color: #f07575;
  background-image: -webkit-linear-gradient(top, hsl(0, 80%, 70%), #bada55);
  background-image:    -moz-linear-gradient(top, hsl(0, 80%, 70%), #bada55);
  background-image:     -ms-linear-gradient(top, hsl(0, 80%, 70%), #bada55);
  background-image:      -o-linear-gradient(top, hsl(0, 80%, 70%), #bada55);
  background-image:         linear-gradient(top, hsl(0, 80%, 70%), #bada55);
} 
```

梯度输出示例取自[此处找到](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient#Browser_compatibility)的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T22:37:34.717

我只是想分享一个我刚刚尝试过并且有效的东西......将动态创建的供应商属性（使用字符串插值）注入另一个属性值。

```
.vendors(@property, @value) {
    -inj:~"ect; -webkit-@{property}: @{value}; -moz-@{property}: @{value}; -ms-@{property}: @{value}; -o-@{property}: @{value}; @{property}: @{value}";
} 
```

这是一个 hackish 解决方案，但编译成工作 css（前面有一个我们要注入的额外属性）......在[less2css.org上尝试过](http://less2css.org/)

我写了一些关于它回答这个问题的更多信息，这几乎是一个精确的复制：

[在 LESS 中的属性名称中使用变量（动态属性/属性名称插值）](https://stackoverflow.com/questions/14868042/using-an-argument-for-tag-name-in-less/15443008#15443008)

* * *

**编辑：** 我想出了一个更优雅的解决方案，我们将一个类的动态生成的属性注入到下一个类的名称中。[我在复制问题的答案中](https://stackoverflow.com/questions/14868042/using-an-argument-for-tag-name-in-less/15443008#15443008)展示了一个示例。这样我们就不会生成额外的不必要的属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-10T03:42:20.167

我只是想补充一点，您可以使用“减号”作为属性名称，解析器会忽略它，但会添加字符串的其余部分。这样你就不会得到一个空的`inject:;`或 inj 属性。它仍然很老套，但是嘿...... :)

```
.prefix(@property, @value) {
    -:~";-webkit-@{property}: @{value}; -moz-@{property}: @{value}; -ms-@{property}: @{value}; -o-@{property}: @{value}; @{property}: @{value}";
} 
```

**例子：**

```
.prefix(transition, "all .2s, color 0s"); 
```

**将输出：**

```
-webkit-transition: all .2s, color 0;
-moz-transition: all .2s, color 0;
-ms-transition: all .2s, color 0;
-o-transition: all .2s, color 0;
transition: all .2s, color 0; 
```

# java - 带有对象的休眠命名查询

> ID：14920937
> 
> 赞同：1
> 
> 时间：2013-02-17T12:11:47.843
> 
> 标签：java, hibernate, hibernate-mapping, named-query

我把它放在我的 District.hbm.xml 文件中

```
<sql-query name="getCarsPerDistrict">
    <return alias="district" class="java.lang.Object"/>
    <![CDATA[SELECT id, name, district_code, count(*) ....]]>
</sql-query> 
```

在我的 DaoImpl 中，我想像这样访问它：

```
List<Object[]> objects = (List<Object[]>)session.getNamedQuery("getCarsPerDistrict").list(); 
```

我需要以对象列表的形式访问它，否则我不知道如何处理*我的 District Object 中的 count() 字段。或者是否有可能将 count(* ) 映射到 java 中的变量？我收到此错误消息：`org.hibernate.MappingException: Unknown entity: java.lang.Object`

我的学区班是这样的：

```
private int id;
private String name;
private int district_code;
@Transient
private long carsQuantity; 
```

# python - 创建列表/节点类 Python

> ID：14920940
> 
> 赞同：3
> 
> 时间：2013-02-17T12:12:28.040
> 
> 标签：python

作为练习，我想创建自己的节点/列表类。无论如何，我不明白如何将节点添加到列表中......这是我的代码：

```
class Node:
    def __init__(self, value):
        self.element = value
        self.nextEl = None

    def getEl(self):
        return self.element

    def getNext():
        return self.nextEl

class List:
    def __init__(self, fnode):
        self.firstNode = fnode

    def add(self, newNode):

    def printList(self):
        temp = self.firstNode
        while (temp != None):
            print temp.element
            temp = temp.nextEl 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T12:14:52.917

您需要找到没有`.nextEl`指针的最后一个节点并将该节点添加到那里：

```
def add(self, newNode):
    node = self.firstNode
    while node.nextEl is not None:
        node = next.nextEl
    node.nextEl = newNode 
```

因为这必须遍历整个列表，所以大多数链表实现还保留对最后一个元素的引用：

```
class List(object):
    first = last = None

    def __init__(self, fnode):
        self.add(fnode)

    def add(self, newNode):
        if self.first is None:
            self.first = self.last = newNode
        else:
            self.last.nextEl = self.last = newNode 
```

因为 Python 从左到右分配给多个目标，`self.last.nextEl`所以设置为`newNode`before `self.last`。

关于您的代码的一些样式说明：

*   使用`is None`and`is not None`来测试一个标识符是否指向`None`（它是一个单例）。
*   Python 中不需要访问器；直接引用属性即可。
*   除非这是 Python 3，否则通过继承来使用新式类`object`：

    ```
    class Node(object):
        # ... 
    ```

# ruby-on-rails - 带有@javascript标签功能的黄瓜文件下载

> ID：14920942
> 
> 赞同：1
> 
> 时间：2013-02-17T12:12:38.203
> 
> 标签：ruby-on-rails, testing, cucumber, capybara

我正在使用 cucumber 来测试我的应用程序（在 Rails 中）。现在，我在测试下载文件时遇到问题。我正在使用主干，所以我在每个功能上都添加了@javascript 标签。我已经完成了stackoverflow中给出的解决方案，例如：[黄瓜测试文件下载](https://stackoverflow.com/questions/5255250/cucumber-test-file-download)，但它们在机架测试中。我想知道当我们在黄瓜中有@javascript时如何点击文件下载框？我试图验证响应标头，例如：`page.response_headers['Content-Type'].should == "text/csv"`但它表明它在 capybara 中不受支持。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:59:49.850

我假设您使用 Selenium 作为驱动程序，这是 @javascript 的默认驱动程序。

Selenium[不为此提供跨浏览器解决方案](http://code.google.com/p/selenium/issues/detail?id=95)。您想测试您的应用程序，而不是浏览器的本机下载窗口，因此您应该告诉浏览器自动保存下载的文件。

如果[您使用火狐](http://code.google.com/p/selenium/wiki/RubyBindings#Tweaking_Firefox_preferences)：

```
Capybara.register_driver :selenium do |app|
  profile = Selenium::WebDriver::Firefox::Profile.new
  profile['browser.download.dir'] = "/path-to-folder/webdriver-downloads"
  profile['browser.helperApps.neverAsk.saveToDisk'] = "application/pdf" # content-type of file that will be downloaded
  Capybara::Selenium::Driver.new(app, :browser => :firefox, profile: profile)
end 
```

如果[您使用谷歌浏览器](http://code.google.com/p/selenium/wiki/RubyBindings#Tweaking_profile_preferences)：

```
Capybara.register_driver :selenium do |app|
  profile = Selenium::WebDriver::Chrome::Profile.new
  profile['download.prompt_for_download'] = false
  profile['download.default_directory'] = "/path/to/dir"
  Capybara::Selenium::Driver.new(app, :browser => :chrome, profile: profile)
end 
```

然后单击链接（调用文件下载）并将文件保存到指定目录。

# django - 我怎么知道那天是否已经观看过视频文件？

> ID：14920946
> 
> 赞同：-1
> 
> 时间：2013-02-17T12:12:54.573
> 
> 标签：django, nginx

我有一个网上商店购买视频课程。现在，我认为，我需要添加一个约束：人们可以每天（24 小时）观看一次视频课程。我怎么知道那天是否已经观看过视频文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:57:01.223

创建一个新模型来映射用户和视频与观看视频的日期。然后您可以检查用户是否在当天观看了视频。

```
class VideoViewed(models.Model):
    user = models.ForeignKey(User)
    page = models.ForeignKey(Video)
    date = models.DateTimeField()
    manager = ResultManager() 
```

# html - Ember.js：获取评估 EmberJs.Handlebars 模板的 HTML 结果

> ID：14920948
> 
> 赞同：2
> 
> 时间：2013-02-17T12:13:05.640
> 
> 标签：html, ember.js, handlebars.js

我一直在寻找一段时间，是如何在评估模板时获取 HTML。

在 Handlebars 中，这是非常严格的：

```
var source   = $("#entry-template").html();
var template = Handlebars.compile(source);
var context = {title: "My New Post", body: "This is my first post!"}
var html    = template(context); 
```

但是，对于 Ember，情况有所不同，我想知道如何实现这一点。目前，我只能想到：

```
var template = App.MyView.create() ;
var html = template.?????????? 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:34:34.433

这个怎么样：

```
var view = App.MyView.create();
var $elem;
Ember.run(function() {
    $elem = $('<div>');
    view.appendTo($elem);
});
var html = $elem.html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T20:24:46.700

自从最初的答案以来，事情似乎发生了一些变化，Ember 不再支持创建没有父容器的视图（请参阅[https://gist.github.com/stefanpenner/5627411](https://gist.github.com/stefanpenner/5627411)），并且会抛出错误：`Using the defaultContainer is no longer supported. [defaultContainer#lookup]`.

要解决这个问题，有两个选项： `this.createChildView(viewClass, viewAttributes)` 或者 `this.container.lookup('view:view-class')`然后在视图上设置属性。

两者中，`createChildView`是最容易实施和更好的实践。

考虑到这一点，本的答案看起来更像：

```
var view = this.createChildView(App.MyView);
var $elem;
Ember.run(function() {
    $elem = $('<div>');
    view.appendTo($elem);
});
var html = $elem.html(); 
```

# windows - 我们可以从 Delphi 调用 Native Windows API 吗？

> ID：14920950
> 
> 赞同：7
> 
> 时间：2013-02-17T12:13:13.960
> 
> 标签：windows, delphi, winapi, delphi-7, system-calls

是否可以从 Delphi 应用程序中调用内核原生 API？喜欢`nt`和`zw`系统调用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T12:59:14.327

您确实可以从 Delphi 调用本机 API。

Delphi 不附带原生 API 的标头翻译。因此，您需要提供自己的翻译，或使用预先存在的翻译。例如。NT API 的 JEDI 翻译。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-17T14:08:35.357

正如 David Heffernan 所说，完全可以从用户模式使用 Native API，从而使用 Delphi。您将需要[Jedi Apilib](http://sourceforge.net/projects/jedi-apilib/)的 JwaNative 单元。

这是使用 Native API 枚举进程的小示例：（TProcessList 是 TObjectList 的后代，但相关部分是对 NtQuerySystemInformation 的调用）

```
function EnumProcesses: TProcessList;
var
  Current: PSystemProcesses;
  SystemProcesses : PSystemProcesses;
  dwSize: DWORD;
  nts: NTSTATUS;
begin
  Result := TProcessList.Create;

  dwSize := 200000;
  SystemProcesses := AllocMem(dwSize);

  nts := NtQuerySystemInformation(SystemProcessesAndThreadsInformation,
      SystemProcesses, dwSize, @dwSize);

  while nts = STATUS_INFO_LENGTH_MISMATCH do
  begin
    ReAllocMem(SystemProcesses, dwSize);
    nts := NtQuerySystemInformation(SystemProcessesAndThreadsInformation,
      SystemProcesses, dwSize, @dwSize);
  end;

  if nts = STATUS_SUCCESS then
  begin
    Current := SystemProcesses;
    while True do
    begin
      Result.Add(TProcess.Create(Current^));
      if Current^.NextEntryDelta = 0 then
        Break;

      Current := PSYSTEM_PROCESSES(DWORD_PTR(Current) + Current^.NextEntryDelta);
    end;
  end;

  FreeMem(SystemProcesses);
end; 
```

# apache - Symfony2：将 localhost/app_dev.php 重定向到 localhost/

> ID：14920952
> 
> 赞同：4
> 
> 时间：2013-02-17T12:13:19.390
> 
> 标签：apache, mod-rewrite, symfony

我正在本地开发一个网站/网络应用程序，其中包括许多 ajax 调用等......我的问题是每次我必须在 url 中包含 app_dev.php - 所以当我继续生产时，我需要搜索和替换这些网址..

有没有办法通过 apache 隐藏 app_dev.php ？我读了很多关于那个的问题，但没有解决方案对我有用。

我已经做的是添加这个：

```
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot "C:/wamp/www/web"
    DirectoryIndex app_dev.php
    ServerName dummy-host.example.com
    ServerAlias localhost
    ErrorLog "logs/dummy-host.example.com-error.log"
    CustomLog "logs/dummy-host.example.com-access.log" common
    <Directory "C:/wamp/www/web">
        AllowOverride All
        Allow from All
    </Directory>
</VirtualHost> 
```

到我的 httpd.conf 但它被完全忽略了......

我正在使用 WAMP 2.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:26:16.247

我将 web/.htaccess 更改为以下内容：

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    #<IfModule mod_vhost_alias.c>
    #    RewriteBase /
    #</IfModule>

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app_dev.php [QSA,L]
</IfModule> 
```

我在 httpd.conf 中添加了以下内容：

```
DocumentRoot "c:/wamp/www/web"
<Directory "c:/wamp/www/web"> 
```

和我的 httpd-vhosts.conf (C:\wamp\bin\apache\apache2.4.2\conf\extra) ：

```
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot "C:/wamp/www/web"
    DirectoryIndex app_dev.php
    ServerName localhost
    ServerAlias localhost
    ErrorLog "logs/dummy-host.example.com-error.log"
    CustomLog "logs/dummy-host.example.com-access.log" common
    <Directory "C:/wamp/www/web">
        AllowOverride All
        Allow from All
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:53:33.237

对于这个捆绑包，我会采用更一致的方法：

[FOSJsRoutingBundle](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle)

然后您可以按名称生成路由，`app_dev.php`添加只会在开发环境中发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-29T12:36:48.010

您似乎正在尝试为`Symfony`.

一个更简单的解决方案是只创建虚拟主机并告诉它不要使用它，`.htaccess`因为它`.htaccess`是导致您的虚拟主机设置被覆盖的文件。

记住`.htaccess`在您在`httpd.conf`or`httpd-vhosts.conf`文件中执行任何操作之后都会应用。

用于开发的虚拟主机`mysite.dev`

```
<VirtualHost *:80>
    ServerName mysite.dev
    ServerAlias www.mysite.dev
    DocumentRoot e:/testing/mysite/web
    <Directory  "e:/testing/mysite/web/">
        // disable the .htaccess in the web folder
        // from undoing the attempt to go straight to app_dev.php
        AllowOverride None

        Require local

        // this forces app_dev.php to be run
        <IfModule rewrite_module>
            Options -MultiViews
            RewriteEngine On
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteRule ^(.*)$ app_dev.php [QSA,L]
        </IfModule>
    </Directory>
    ErrorLog "D:/wamp/logs/mysite.dev.apache.error.log"
    CustomLog "D:/wamp/logs/mysite.dev.apache.access.log" combined
    php_value error_log "D:/wamp/logs/mysite.dev.php.error.log"
</VirtualHost> 
```

用于在 PROD 环境中进行测试的虚拟主机

```
<VirtualHost *:80>
    ServerName mysite.dev
    ServerAlias www.mysite.dev
    DocumentRoot e:/testing/mysite/web
    <Directory  "e:/testing/mysite/web/">

        AllowOverride All

        Require local

    </Directory>
    ErrorLog "D:/wamp/logs/mysite.prod.apache.error.log"
    CustomLog "D:/wamp/logs/mysite.prod.apache.access.log" combined
    php_value error_log "D:/wamp/logs/mysite.prod.php.error.log"
</VirtualHost> 
```

现在您可以保留`.htaccess`文件原样，因为当您将此站点移动到实时服务器时，它可能非常相关。

您也不需要`httpd.conf`从标准 WAMPServer 默认值修改默认文件中的任何内容。

# jquery - 将数组字符串项解析为 XML

> ID：14920960
> 
> 赞同：0
> 
> 时间：2013-02-17T12:14:03.077
> 
> 标签：jquery, arrays, string, parsexml

我正在尝试从数组项中解析 XML 字符串并遍历其项，但无法使其工作！这让我发疯，因为如果我将该字符串定义为“字符串”，它会完美运行......有什么帮助吗？我错过了什么？！

这是作为以下方式访问的数组字符串项的内容`theContent[1]`：

```
<?xml version="1.0" encoding="utf-8" ?>
<ROOT>

  <ITEM>
    <NAME>123</NAME>
  </ITEM>

  ...

</ROOT> 
```

这是读取项目的代码：

```
var xmlDOM = $.parseXML(theContent[1]);
var items = $(xmlDOM).find('ROOT ITEM');
$.each(items, function (key, val) {
  alert($(val).find('NAME').text());
}); 
```

正如我所说，如果我将 XML 定义为字符串（如下所示）它可以工作，但是当从该数组项字符串中提取 xml 时它拒绝工作！？

```
var theContent = '<?xml version="1.0" encoding="utf-8" ?><ROOT><ITEM><NAME>123</NAME>/ITEM> ... </ROOT>'; 
```

@亚历山大

“数组”是从一个 txt 文件加载的，它是这样的：

```
Some text...|<?xml version="1.0" encoding="utf-8" ?><ROOT><ITEM><NAME>123</NAME>/ITEM> ... </ROOT> 
```

我用 | 分割整个文本 char，使用第一个数组项作为文本，然后尝试将第二个数组项解析为 XML。正如我上面解释的那样，我无法读取子文本，但如果我调用`alert(typeOf(theContent[1]));`它，它会在解析为 XML 后返回`String`，它应该像我在代码中构建为字符串一样工作，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:45:31.287

好吧，我终于弄清楚了……这有点尴尬，但是很好，它有效。

源 txt 文件像任何代码文件一样具有换行符，因此，在尝试将字符串解析为 XML 之前，我必须遍历它删除任何“return”和“line”，现在它工作正常。所以，在 XML 解析之前的这段代码是这样的：

```
// 1st - split the string from the array by '\n'.
var theXML = theContent[1].split("\n");

// 2nd - replace any '\r' with nothing and store it in a new var (xmlString) 
//       that will later be parsed as XML.
var xmlString = "";
$.each(theXML, function (n, elem) {
  elem = elem.replace('\r', '');
  xmlString += elem;
});

// 3rd - now the new string (xmlString) as no '\r' and will be well parsed as XML.
//       the initial var (theXml) is replaced with the resulting parsed XML 
//       and items are accessible.
theXML = $.parseXML(xmlString);
var items = $(theXML).find('ROOT ITEM');
$.each(items, function (key, val) {
  alert($(val).find('NAME').text());
}); 
```

希望它可以帮助别人。

无论如何感谢您的关注亚历山大。

# c++ - 稀疏矩阵的乘法，链表

> ID：14920963
> 
> 赞同：0
> 
> 时间：2013-02-17T12:14:24.100
> 
> 标签：c++

我有 2 组排序的链表 A 和 B，我想得到 A * B 的乘积。对于 A，这很容易，因为它只是一个普通的嵌套 for 循环。乙呢？最初我想有 3 个嵌套的 for 循环，但由于我将使用指针，所以不可能使用 B[i][j]。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:07:10.763

我有点想办法做到这一点。

```
while (A != NULL)      //your first list
{                   
                       // store your row value and col in variables
   while (B != NULL)   // second list
   {
      if (colB == rowA) // you check if the b col is equals to a row, if yes you can
                        // start storing the values inside the 3rd link. 

    }

} 
```

# iphone - 检查 id NSNumber 是否为空

> ID：14920965
> 
> 赞同：0
> 
> 时间：2013-02-17T12:14:37.223
> 
> 标签：iphone, xcode

这是我的代码：

```
if (userLatPosition != nil) {
    CLLocation *userLocation = [[CLLocation alloc] initWithLatitude:[userLatPosition floatValue] longitude:[userLongPosition floatValue]];
    [self getLocationTextForUserIndex:j withLocation:userLocation];
} 
```

当它即将运行时，这就是我看到的 userLatPosition：

```
userLatPosition = (NSNumber *) 0x02ab6678 (null) 
```

有人会认为 if 语句应该是错误的，它会跳过 if 但由于某种原因它确实进入了 if 行......</p>

有人知道为什么吗？NSNumbers 中对 (null) 的正确检查是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:17:43.687

看起来`userLatPosition`是`NSNull`，不是`nil`。请注意，`NSNull`不等于`nil`，它是一个占位符，表示`nil`可以存储在容器中的值`NSDictionary`或`NSArray`，不接受`nil`值。

支票看起来像这样：

```
if(userLatPosition && userLatPosition != [NSNull null])
{
} 
```

另请参阅：[使用 NSNull](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NumbersandValues/Articles/Null.html)

# php - Preg_replace 在同一类中调用函数？

> ID：14920972
> 
> 赞同：1
> 
> 时间：2013-02-17T12:15:12.013
> 
> 标签：php, function, object, preg-replace

preg_replace 如何调用同一个类中的函数？

我尝试了以下方法：

```
<?php

defined('IN_SCRIPT') or exit;

class Templates {

    protected $db;

    function __construct(&$db) {
        $this->db = &$db;
        $settings = new Settings($this->db);
        $gamebase = new Gamebase($this->db);
        $this->theme = $settings->theme_id;
        $this->gameid = $gamebase->getId();
    }

    function get($template) {
        $query = $this->db->execute("
            SELECT `main_templates`.`content`
            FROM `main_templates`
            INNER JOIN `main_templates_group`
                ON `main_templates_group`.`id` = `main_templates`.`gid`
            INNER JOIN `main_themes`
                ON `main_themes`.`id` = `main_templates_group`.`tid`
            WHERE
                `main_themes`.`id` = '".$this->theme."'
            &&
                `main_templates`.`name` = '".$template."'
        ");
        while ($templates = mysql_fetch_array($query)) {
            $content = $templates['content'];

            // Outcomment
            $pattern[] = "/\/\*(.*?)\*\//is";
            $replace[] = "";

            // Call a template
            $pattern[] = "/\[template\](.*?)\[\/template\]/is";
            $replace[] = $this->get('header');

            $content = preg_replace($pattern, $replace, $content);
            return $content;
        }
    }
} 
```

但这只是出现以下错误：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, webmaster@site.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

一旦我对此发表评论：

```
// Call a template
$pattern[] = "/\[template\](.*?)\[\/template\]/is";
$replace[] = $this->get('header'); 
```

然后它工作。但我需要它来运行一个功能。

实际上我不需要它来运行带有`header`值的函数，我需要函数之间的`[template]`内容`[/template]`。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:33:48.710

我认为您的脚本可能正在进入无限循环。如果你查看你的 get 函数，你正在调用它：

```
$replace[] = $this->get('header'); 
```

因此，在接听电话的过程中，您正在拉入标题。然后，这将执行完全相同的功能，该功能将自己拉入标题，一遍又一遍，一遍又一遍。您可能希望在何时`$template`为“标题”时禁用此行：

```
while ($templates = mysql_fetch_array($query)) {   

   $content = $templates['content'];

   // If this is the header, stop here
   if ($template == 'header') 
      return $content;

   // Rest of loop...
} 
```

如果要执行正则表达式，请在 while 循环后添加：

```
if ($template == 'header') {
   $pattern = "/\[template\](.*?)\[\/template\]/is";
   $replace = 'WHATEVER YOU WANT TO REPLACE IT WITH';
   return preg_replace($pattern, $replace, $templates['content']);
} 
```

# java - LWJGL 允许负鼠标坐标（窗口外）

> ID：14920975
> 
> 赞同：0
> 
> 时间：2013-02-17T12:15:27.757
> 
> 标签：java, mouse, lwjgl, slick2d

我正在尝试使用 LWJGL [Mouse](http://www.lwjgl.org/javadoc/org/lwjgl/input/Mouse.html)类获取鼠标坐标。默认情况下，LWJGL 将值钳制为 [0, width] 和 [0, height]，因此坐标始终位于窗口内，即使鼠标移出窗口也是如此。

我尝试将[setClipMouseCoordinatesToWindow](http://www.lwjgl.org/javadoc/org/lwjgl/input/Mouse.html#setClipMouseCoordinatesToWindow%28boolean%29)设置为 false，但什么也没发生；鼠标仍然被夹在窗口上。我首先尝试在初始化期间将其设置为 false，然后每次调用 Mouse.getX() 或 getY()。都没有奏效。我知道有一个属性要设置，但它也不起作用，而且它似乎也已被弃用。

我只在我的更新方法（Slick2D 提供的那个）中调用鼠标函数。我不知道我做错了什么......我没有手动调用 Mouse.poll()，我认为 Slick2D 会处理这个问题，但我确实尝试手动调用它以防万一，但它没有无论如何都行不通。

编辑：我也尝试过`System.setProperty("org.lwjgl.input.Mouse.allowNegativeMouseCoords", "true");`，但它也没有工作，即使它似乎正是我需要的。

编辑：如果我按住鼠标按钮，这似乎有效，但由于某些 Windows 限制，否则无效。[来源](http://lwjgl.org/forum/index.php?topic=4291.msg23798#msg23798)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:59:20.797

`System.setProperty("org.lwjgl.input.Mouse.allowNegativeMouseCoords", "true");`

# ruby - 在 ruby 中捕获可选参数

> ID：14920976
> 
> 赞同：2
> 
> 时间：2013-02-17T12:15:30.077
> 
> 标签：ruby, regex

我想捕获一个强制参数和一个可选参数。

假设我有一个字符串

```
"X or Y" 
```

“或 Y”是可选的。

我可以

```
scan /(.*) (or (.*))?/ 
```

并接收一个大小为 3 的数组，其中还包括可选 catch 的结果。

如何编写扫描以仅接收 2 个 X 和 Y 可能性的数组？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:37:06.750

您可以将第二部分的外部组作为`non-capturing`组：

```
/(.*) (?:or (.*))?/ 
```

现在您的正则表达式中只有两个捕获组：

*   一个捕捉`X`部分。
*   另一个捕捉`Y`部分。

因此，您将收到仅包含这两个组的数组。因此你不会得到这个`or`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T12:54:05.720

在这种情况下，我需要相同的答案，我用谷歌搜索了很多以获得更好的解决方案，在玩弄了逻辑之后，我终于成功了。它在每种情况下都运行良好。URL 是否有一个或两个参数。甚至我们可以在 n 个参数中扩展它。很容易做到。

我的问题陈述是，我有两个差别很小的 URL。

第一个网址）。[https://thumbor-cdn1.abc.com/unsafe/700x0/filters:quality(90)/https://s3.amazonaws.com/abc/app_photos/images/1528/original/cover_daily-1.jpg](https://thumbor-cdn1.abc.com/unsafe/700x0/filters:quality(90)/https://s3.amazonaws.com/abc/app_photos/images/1528/original/cover_daily-1.jpg)

第二个网址）。[https://thumbor-cdn1.abc.com/unsafe/600x0/https://s3.amazonaws.com/abc/users/images/000/263/588/blurred_preview/263588-profile-image-HYU0HBxA5c.jpg](https://thumbor-cdn1.abc.com/unsafe/600x0/https://s3.amazonaws.com/abc/users/images/000/263/588/blurred_preview/263588-profile-image-HYU0HBxA5c.jpg)

您可以看到第一个 URL`700x0/filters:quality(90)`和第二个 URL 只有一个参数`600x0`

**正则表达式是**-`(http|https):\/\/thumbor-cdn1.abc.com\/unsafe\/((.*?)|\/(.*?))\/(http|https):\/\/s3.amazonaws.com\/(abc|xyz)`

**上面的 url 用于示例目的，对于您的情况，您可以使用有效的 url。** 谢谢！

# eclipse - 我希望新的 logcat 在 eclipse 中工作

> ID：14920978
> 
> 赞同：1
> 
> 时间：2013-02-17T12:15:33.767
> 
> 标签：eclipse, logcat, android-logcat, android-sdk-tools

由于我已将 eclipse、ADT 和所有内容更新到最新版本，因此 eclipse 中的新 logcat 不会显示我连接设备的日志。它只是显示`logcat read: Invalid argument`。然而，“ *Logcat (Deprecated)* ”一个完美地工作并显示我的日志。

我希望新的 logcat 工作。我认为 adb 无法处理与我的设备有超过 1 个并发连接的日志请求。**那么有什么方法可以**阻止已弃用的 logcat 工作，以便修复新的 logcat？

# memory - 本地内存，我是否假设正确的概念？

> ID：14920979
> 
> 赞同：2
> 
> 时间：2013-02-17T12:15:35.283
> 
> 标签：memory, opencl, gpu, local

我使用的是 HD5770，它有 10 个计算单元和 32k 的本地内存。

我的全局大小是 256 * 256，
我的本地大小是 256

每个工作组都需要使用 1k 的本地内存，我指定如下：

```
clSetKernelArg(predicate, param++, 1024, NULL); 
```

**首先：**这是分配本地内存的正确方法，还是我必须在设置内核参数时指定所有工作组一起使用的缓冲区的整个大小，然后根据本地 id 对该缓冲区进行索引？

**第二：**一个工作组会只在一个计算单元上执行吗？

**第三：**工作组结束后内存会被释放吗？（如果每个工作组使用 1k，则 32k 不足以满足 256 个工作组）

或者以更一般的方式：调度程序是否会注意不并行调度超过 32 个工作组？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:28:03.443

1) 这就是分配 1024 字节未初始化本地内存的方式，所以如果这是你想要的，那么是的，你做对了。您还可以像这样定义内核内部的内存：

```
__local float localBuffer[1024]; 
```

2）这是实现定义的，所以没有办法知道，你不能假设。通常一个工作组在超过 1 个计算单元上执行，但就像我说的，你永远不会真正知道。

3）内存将在下次使用时被覆盖，因此您不必担心释放它，特别是因为它未初始化并且您没有传递一些缓冲区。

希望这可以帮助

# c# - Access数据库连接第一次失败

> ID：14920981
> 
> 赞同：2
> 
> 时间：2013-02-17T12:16:05.377
> 
> 标签：c#, .net, winforms, ms-access

我有一个 C# 2010 WinForms 应用程序，在 .Net Framework 3.5 上运行。此应用程序在启动时会连接到与可执行文件位于同一文件夹中的 Access 2007 accdb 数据库。这是用于连接的代码：

> ```
>  public static OleDbConnection con = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=LineWatchManager.accdb;Persist Security Info=True;Jet OLEDB:Database Password=<password here>"); 
> ```

```
 public static void CreateConnection()
    {
        con.Open();
    } 
```

我遇到的问题是在客户端计算机（Windows 7）上，启动计算机后**第一次启动程序时，与数据库的连接总是失败。**之后，它连接没有任何问题。

我试图让程序在启动时尝试连接到数据库 3 次，但这无济于事，即使尝试之间有 500 毫秒。我的计算机（Windows 7 或 8）上没有这个问题。

经过大量的调试尝试和在线花费了很多时间，我找到的唯一相关文章是[this](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/026e09ba-e8f3-43cc-be0d-0a7d5f8ba723/) . 遗憾的是没有解决方案，但由于这发生在不使用 Access 的人身上，我猜它要么是 .Net 的错，要么是 C# 的错。任何帮助将不胜感激！

编辑：客户端没有运行完整版本的 Access，而是[运行此运行时](http://www.microsoft.com/en-us/download/details.aspx?id=4438)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:29:49.623

试试这个`connectionString`，注意`|DataDirectory|`这将是你的应用程序的默认路径。

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/LineWatchManager.accdb;Persist Security Info=True;Jet OLEDB:Database Password=<password here> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T12:30:34.237

使用它来创建连接：

public static OleDbConnection con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory| ...");

# html - 如何将html中的所有元素居中？

> ID：14920983
> 
> 赞同：0
> 
> 时间：2013-02-17T12:16:12.960
> 
> 标签：html, css, telerik

首先我检查过，这不是重复的。这里的条件与其他问题完全不同。请在回答之前阅读我的整个帖子。

我有一个宽度和高度未知的 ASP.NET 页面，我想将其中的所有元素居中。不管是内联还是阻塞。

该`<center>`标签可以满足需要，但已过时。并非在所有情况下都有效
。`text-align:center;`[内联]并非在所有条件下都有效
。`margin:auto;`[堵塞]

已经适用于所有网络浏览器的是以下代码：

```
<div style="float: left; position: relative; left: 50%;">
    <div style="float: left; position: relative; left: -50%;">
       my elements here
    </div>
</div> 
```

这段代码适用于所有条件，但它会导致 Rad Telerik Ajax 弹出窗口元素具有未知的弹出位置，该位置通常出现在页面外。

那么什么是**完全等同**于**`<center>`**适用于所有浏览器的标签？
**请不要发布我在这里提到的当前解决方案！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T12:25:26.490

AMAIK，如果不应用您所知道的所有方法，您将无法实现您正在寻找的东西。以电子邮件客户端为例，他们不了解我们已经拥有的许多新技术（甚至不了解外部样式表）。`<center>`因此，为旧的渲染引擎（包括浏览器）使用标签是一种常见的做法。

这是**回退**和**降级**的概念，但在**表现层**，不在**行为层**。换句话说，在您的设计中，重要的是让该*按钮*通过 ajax 将数据发送回服务器，如果浏览器不支持 ajax，则通过简单的 POST。但它可能集中在一个浏览器中，而不是在另一个浏览器中。

我建议你看看这个很棒的网站：

[http://dowebsitesneedtolookexactlythesameineverybrowser.com/](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)

顺便说一句，您是否尝试过强制将页面上的每个元素居中：

```
*
{
text-align: center !important;
margin: auto !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:34:09.430

正如verbumSapienti提到的：`margin: 0 auto`，但它需要一个宽度才能工作。

```
item{ width: 50%; margin: 0 auto;} 
```

# android - Android：活动结束时 MP3 不会停止

> ID：14920987
> 
> 赞同：0
> 
> 时间：2013-02-17T12:17:06.640
> 
> 标签：android, android-mediaplayer

我有一组 mp3 到一个数组中，我的应用程序可以正确播放它们。但是，当用户退出该活动时，活动会停止，但 mp3 会继续播放。

这是代码：最初我在一个数组中播放 mp3 文件：

```
 MediaPlayer mPlay = MediaPlayer.create(this, Audios[posicion]);
         mPlay.start(); 
```

当用户单击某个按钮时，活动结束但 MediaPlayer 不会停止：

```
 bFinalizar.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mPlay.stop();
                posicion=0;
                Listening2.this.finish();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:46:36.843

试试这个片段

> 尝试 {
> 
> mPlayer.stop();
> 
> mPlayer.release();
> 
> } 捕捉（异常前）{
> 
> ```
>  ex.printStackTrace() 
> ```
> 
> }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:18:40.373

尝试调用或调用您`mPlay.stop()`的活动。`onFinish()``onDestroy()`

# joomla2.5 - 在文章中调用一个动物园博客的最新帖子项

> ID：14920988
> 
> 赞同：0
> 
> 时间：2013-02-17T12:17:12.983
> 
> 标签：joomla2.5, blogs

如何在 joomla 文章中调用动物园博客的最新帖子。我使用的是 joomla2.5.9 版本，zoo 版本是 com_zoo_3.0.10。我想要代码。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:22:42.347

您不能直接将 zoo 对象与 joomla 文章一起使用，但您可以创建一个新模块来加载 zoo lastet 帖子并将其分配到文章页面中的位置。

# iphone - 使用大写字母对 NSArray 进行排序

> ID：14920990
> 
> 赞同：2
> 
> 时间：2013-02-17T12:17:18.860
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nsarray

我有一个`NSArray`看起来像这样的：

```
contactNamesArray = [[NSMutableArray alloc] initWithObjects:@"John Galt", @"Michael Wales", @"James Joyce", @"Shakespeare", nil]; 
```

从中，我想制作一个`NSArray`具有*所有相同值的*，但看起来像这样：

```
newContactNamesArray = [[NSMutableArray alloc] initWithObjects:@"john galt", @"michael wales", @"james joyce", @"shakespeare", nil]; 
```

我想这样做是因为我想在第二个数组中进行搜索，并且我想用普通字母替换其中的*每个大写*字母。

你如何在 Objective-C 中做这样的事情？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T12:25:20.297

您可以遍历一个数组，并通过调用将每个元素转换为小写

```
[element lowercaseString] 
```

在上面。但是，这对于实现不区分大小写的搜索来说是非常次优的：更好的方法是保持字符串原样，并`caseInsensitiveCompare`为您的搜索使用方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T12:29:13.880

你为什么要复制？您可以以不区分大小写的方式对 NSArray 进行排序：

```
NSArray *sortedContactNamesArray = [contactNamesArray sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

另外，请记住，它`sortedArrayUsingSelector`返回一个引用原始项目的数组，而不是它们的副本。

# css - 身体标签的 CSS 奇怪地影响了谷歌地图画布

> ID：14920993
> 
> 赞同：0
> 
> 时间：2013-02-17T12:17:31.273
> 
> 标签：css, google-maps

我有以下代码片段

```
<body onload="initialize()">
    <div id="map_canvas" style="width: 100%; height: 100%"></div>
</body> 
```

除非我添加以下 CSS 样式，否则该代码不会在屏幕上显示地图

```
<style type="text/css">
html {
    height: 100%
}
body {
    height: 100%;
    margin: 0;
    padding: 0
}
</style> 
```

我认为`style`for`map_canvas`标签足以显示地图，但显然是错误的。你能给我解释一下吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:25:31.980

当您对地图的高度使用百分比值时，该值只能在父元素（例如主体）也具有使用 CSS 设置的高度时计算（此行为可能因使用的 DOCTYPE 而异）

# padding - 高库存分组

> ID：14920994
> 
> 赞同：0
> 
> 时间：2013-02-17T12:17:33.600
> 
> 标签：padding, highstock

我想绘制如下图所示的股票：

![想要的](../Images/6b4a456b4b604dd7d89ebde4e99da9de.png)

如果我使用[这个](http://jsfiddle.net/67BkD/34/)解决方案：

```
plotOptions: {
    column: {           
        pointWidth: 20,
        groupPadding: 0.75
    }
} 
```

当整个容器变宽时，不同系列的列正在拉伸。有没有办法使组之间的距离仅可扩展（标记为红色）并保持一组中的两列始终接近？

![当前的](../Images/d3f2b0d8e825b51f0c4a194bb11db397.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:00:38.707

不支持 3d 图表，但您可以在这里投票：http: [//highcharts.uservoice.com/forums/55896-general/suggestions/889125-3d-charts](http://highcharts.uservoice.com/forums/55896-general/suggestions/889125-3d-charts)

# css - 应用了 CSS 比例变换的 Chrome 背景图像“流血”边缘

> ID：14920996
> 
> 赞同：7
> 
> 时间：2013-02-17T12:17:44.807
> 
> 标签：css, google-chrome, background, webkit, transform

在 Chrome 中对带有背景图像的元素应用了几次变换后，我看到了奇怪的行为。

我正在尝试构建一个在整个屏幕上具有背景的游戏，以及一个围绕该背景移动的缩放角色。角色有多个动画帧，我通过移动背景位置 x 或 y 来显示每一帧，其方式与常见的 CSS spriting 技术类似。

问题是我看到角色图像中相邻帧的上边缘或左边缘。现在，这只发生在某些规模上，但它清晰可见且令人分心。出于演示的目的，我使用的是带有两帧的 364x1328 图像。顶部框架包含一个黑框，其 364x664 边界中没有红色。底部框架为纯红色。选择边界的顶部框架显示在左侧的图像编辑器中，Chrome 的输出粘贴在右侧：

![左侧的帧边界 (364x664)，右侧的 Chrome 输出](../Images/5d062f95bbc71ce23cf1640e2a4d32d4.png)

在 Chrome 的输出中，您可以清楚地看到底部的红色边框。鉴于我的背景图像包含在 364x664 框中，我希望仅显示该框中可见的像素。换句话说，我想看看我在 处看到的`scale(1)`，但按比例缩小了。无论出于何种原因，Chrome 似乎都在对背景图像进行重新采样。

为了简化演示，我包含了一个 JS Fiddle：http: [//jsfiddle.net/CL5Gh/](http://jsfiddle.net/CL5Gh/)

```
<!DOCTYPE html>
<html>
<head>
<style>

#b
{
    -webkit-transform: scale(0.4775);
    -webkit-transform-origin: 0 0;
}

#d
{
    height: 664px;
    width: 364px;
    background-image: url(data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%01l%00%00%050%02%03%00%00%00%1A%F2%87%B5%00%00%00%2CtEXtCreation%20Time%00Sun%2017%20Feb%202013%2022%3A08%3A49%20%2B1000%FC%E8%C07%00%00%00%07tIME%07%DD%02%11%0B%1B%0B%C2%A0%3B8%00%00%00%09pHYs%00%00%1E%C1%00%00%1E%C1%01%C3iTS%00%00%00%04gAMA%00%00%B1%8F%0B%FCa%05%00%00%00%09PLTE%00%00%00%00%00%00%FF%00%00%3D%FB%DD-%00%00%00%01tRNS%00%40%E6%D8f%00%00%01%A4IDATx%DA%ED%CC1%0D%000%08%000%9EI%C4%24*11%C8%92%B5%02%1A%01%00%00%00%00%00%FC%E4%E45n%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%ED%06%00%00%00%00%00%DESs%DCn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%DB%EDv%BB%DDn%B7%7B%F3n%80%3C%CA%A7%B6%23%99%BC%00%00%00%00IEND%AEB%60%82);
    -webkit-transform: scale(0.4375);
}

</style>
</head>
<body>
  <div id="b">
    <div id="d">
    </div>
  </div>
</body>
</html> 
```

现在，我不确定这是否以某种方式依赖于视频卡或机器。在小提琴中，您将看到应用了两个比例变换。这是在模仿我的游戏中发生的事情。第一个是背景缩放，第二个是主角缩放。

我将不胜感激任何帮助。我考虑过用 50px 填充每一帧（多少才足够？）填充以消除问题，但这似乎非常糟糕，我想要一个真正的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:50:20.113

似乎是因为 CSS 转换可以在子像素位置进行插值，所以如果您的 element 的位置不适合像素，您会看到“dubstep 效果”（请参阅[​​ http://paulirish.com/2012/why-moving-带有翻译的元素比 posabs-topleft/ 更好](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)）。

由于`scale`无法用 CSS2 进行模拟（与`translate`文章中不同），恐怕没有解决方案。

除非特定的 CSS3 规则确实存在或将要存在，否则我正在寻找它。

编辑：`-webkit-backface-visibility: hidden;`在 Chromium 上做伎俩，不知道为什么......

# c++ - 即使锁定失败，带有 try_to_lock 的 unique_lock 是否应该拥有互斥锁？

> ID：14920997
> 
> 赞同：0
> 
> 时间：2013-02-17T12:17:46.457
> 
> 标签：c++, gcc, visual-studio-2012, mutex

以下代码使用 VS2012 Express 和 gcc 4.7.2 产生不同的输出，这是[ideone](http://ideone.com)使用的。作为记录，我尝试使用 MinGW 进行编译，但它没有实现 C++11 的 <mutex> ，如此[处](http://kbokonseriousstuff.blogspot.com.br/2011/08/c11-standard-library-threads-with-mingw.html)所述。

```
#include <mutex>
#include <iostream>

int main()
{
    std::mutex m;
    {
            std::unique_lock<std::mutex> l(m, std::try_to_lock);
            std::cout << (bool)l <<std::endl;
    }
    {
            m.lock();
            std::unique_lock<std::mutex> l(m, std::try_to_lock);
            std::cout << (bool)l <<std::endl;
    }
} 
```

在 Visual Studio 中，第二个测试打印 0，这意味着锁不拥有互斥锁，因为它已经被锁定。

使用 gcc，第二个测试打印 1，这意味着锁获得了互斥锁，即使已经锁定，如`std::adopt_lock`.

哪一个是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T12:24:23.637

该标准定义了该`std::unique_lock`构造函数：

> ```
> unique_lock(mutex_type& m, try_to_lock_t); 
> ```
> 
> *要求：*提供的 Mutex 类型应满足可锁定要求 (30.2.5.3)。如果 mutex_type 不是递归互斥锁**，则调用线程不拥有该互斥锁**。

因此，由于您违反了该调用的要求，因此行为未定义。（`std::mutex`不是递归的。）

# mysql - Mysql，只有第一个连接记录的左连接 - 按日期

> ID：14920998
> 
> 赞同：2
> 
> 时间：2013-02-17T12:18:14.143
> 
> 标签：mysql, sql, join, left-join

这个问题在历史上不是第一次提出，我仍然没有发现任何有用的东西。让我们假设用户（A、B、C）可以有更多的任务（清洁、维护、编程），并且任务可以有状态（开始、暂停、暂停、完成）。

```
SELECT username,tasks.id,subject,dateat,state FROM users
LEFT JOIN tasks ON tasks.owner_id = users.id
LEFT JOIN tasks_histories ON tasks_histories.task_id = tasks.id
ORDER BY username ASC, subject asc, dateat desc;
select * from tasks_histories; 
```

所以有多个任务状态，我只需要第一个，根据“dateat” - 也许我想要第一个或最后一个记录。我尝试使用`GROUP BY username,subject form`，但随后它不会观看 dateat 订购。

编辑：

假设A没有任务，B有两个任务：task1有一个状态，task2有3个状态。

所以这会返回它：

```
user  taskid  subject  dateat  state
A     null    null     null    null
B     9       task1    2011    5
B     10      task2    null    null
B     8       task3    2011    1
B     8       task3    2012    5
B     8       task3    2013    3 
```

但我想要它：

```
A     null    null     null    null
B     9       task1    2011    5
B     10      task2    null    null
B     8       task3    2011    1 
```

或者

```
A     null    null     null    null
B     9       task1    2011    5
B     10      task2    null    null
B     8       task3    2013    3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:21:54.027

假设该列`dateat`位于 table 上`tasks_histories`，下面的查询将返回基于 的最新任务的结果`dateat`。

```
SELECT  username,
        tasks.id,
        subject,
        dateat,
        STATE
FROM    users
        INNER JOIN tasks
            ON tasks.owner_id = users.id
        INNER JOIN tasks_histories
            ON tasks_histories.task_id = tasks.id
        INNER JOIN
        (
            SELECT  task_id, MAX(dateat) max_date
            FROM    tasks_histories
            GROUP   BY task_id
        ) a ON tasks_histories.task_id = a.task_id AND
                tasks_histories.dateat = a.max_date
ORDER   BY username ASC, subject ASC, dateat DESC; 
```

**更新 1**

```
SELECT  x.*, y.*
FROM    users x
        LEFT JOIN
        (
            SELECT  a.owner_id, a.subject,
                    b.dateat, b.state
            FROM    tasks a
                    INNER JOIN tasks_histories b
                        ON b.task_id = a.ID
                    INNER JOIN 
                    (
                        SELECT  task_id, MAX(dateat) max_date
                        FROM    tasks_histories
                        GROUP   BY task_id
                    ) c ON b.task_id = c.task_id AND
                            b.dateat = c.max_date
        ) y ON x.id = y.owner_id 
```