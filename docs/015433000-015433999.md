# StackOverflow 问答 15433000-15433999

# django - 使用 taggit django

> ID：15433006
> 
> 赞同：0
> 
> 时间：2013-03-15T12:51:52.997
> 
> 标签：django, django-taggit, django-tagging

我正在使用 django taggit 为所有出价添加标签。

我的出价模型如下：

```
class Bid(models.Model):
    tags = TaggableManager() 
```

如何从具有该标签的所有出价中删除特定标签？

我打算做以下事情：

假设我想从所有带有该标签的出价中删除标签“美味”：

```
bids = Bid.objects.filter(tags__name__in=["delicious"])
bids.tags.remove("delicious") 
```

这是正确的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:01:44.527

不，你不能这样做。在您的示例中，`bids`是一个查询集，并且属性`tags`在查询集上不可用。

`tags`您已经在 class 上定义了属性`Bid`，因此它可用于`Bid`. 但是，它在查询集上不可用。

为了在您的示例中的所有出价上删除标签*美味：*

```
for bid in bids:
    bid.tags.remove("delicious") 
```

# jquery - jquery在添加水银宝石后停止工作，在我的rails应用程序上

> ID：15433007
> 
> 赞同：0
> 
> 时间：2013-03-15T12:51:53.070
> 
> 标签：jquery, ruby-on-rails

错误是：TypeError: jQuery.browser is undefined

在我的 aplication.js 文件中有

```
 //= require jquery
   //= require jquery_ujs
   //= require mercury
   //= require_self 
```

我的宝石文件看起来像

```
gem 'rails', '3.2.12'
ruby "1.9.3"

gem 'pg'

group :assets do
  gem 'sass-rails'
end

gem 'jquery-rails'
gem 'jquery-ui-rails'
gem 'devise'
gem "paperclip"
gem 'uglifier'
gem 'coffee-rails'
gem "haml"
gem 'mercury-rails'

group :development do
    gem 'better_errors'
    gem 'binding_of_caller'
    gem 'meta_request'
end 
```

在我的mercury.html.erb中

```
<%= stylesheet_link_tag    'mercury' %>
<%= javascript_include_tag 'jquery-1.7', 'mercury' %> 
```

我现在有同样的问题，即使从 aplicarion.js 中删除 //=require 汞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:21:42.617

[$.browser 是未定义的错误](https://stackoverflow.com/questions/14524289/browser-is-undefined-error)

看来您的 jQuery 版本太新了。jQuery.browser 不再受支持。此外，即使在您删除“//=需要水银”行后问题仍然存在的原因是因为您需要重新启动服务器才能让资产管道完成其工作。

# excel - 单元格值增加时闪烁绿色，减少时闪烁红色

> ID：15433011
> 
> 赞同：1
> 
> 时间：2013-03-15T12:52:11.823
> 
> 标签：excel, colors, cells, vba

我的 excel 表中有一个提要，如果值分别向上或向下变化，我希望单元格闪烁绿色/红色。有人可以帮忙吗？谢谢。

```
Private Sub Worksheet_Change(ByVal Target As Range)
   Dim KeyCells As Range

   Set KeyCells = Range("B1:B27")

   If Not Application.Intersect(KeyCells, Range(Target.Address)) _
          Is Nothing Then

       Target.Interior.ColorIndex = 36

   End If
End Sub 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:18:25.940

正如 John Bustos 所说，您需要另一列容纳`previous value`单元格的。这个值是必要的，以便进行比较以辨别目标现在是更高还是更低。

为了实现flash，您需要在代码中设置暂停而不冻结主UI。此代码未经过测试或保证可以按您的意愿工作，但它应该是一个很好的起点。

**代码**

```
Private Sub Worksheet_Change(ByVal Target As Range)
   Dim KeyCells As Range
   Set KeyCells = Range("B1:B27")

   If Not Application.Intersect(KeyCells, Range(Target.Address)) _
          Is Nothing Then
        If Target.Value > Cells(Target.Row, 5).Value Then
            'flash green
            Target.Interior.ColorIndex = 10
            Pause 0.5
            Target.Interior.ColorIndex = 2
            Pause 0.5
            Target.Interior.ColorIndex = 10
        ElseIf Target.Value < Cells(Target.Row, 5).Value Then
            'flash red
            Target.Interior.ColorIndex = 3
            Pause 0.5
            Target.Interior.ColorIndex = 2
            Pause 0.5
            Target.Interior.ColorIndex = 3
        End If
        Cells(Target.Row, 5).Value = Target.Value
   End If
End Sub

'Pauses execution without holding up main UI thread
Public Function Pause(NumberOfSeconds As Variant)
    On Error GoTo Error_GoTo
    Dim PauseTime As Variant
    Dim Start As Variant

        PauseTime = NumberOfSeconds
        Start = Timer
        Do While Timer < Start + PauseTime
            DoEvents
        Loop

Exit_GoTo:
       On Error GoTo 0
       Exit Function
Error_GoTo:
       Debug.Print Err.Number, Err.Description, Erl
      GoTo Exit_GoTo
End Function 
```

打开 Visual Basic 编辑器 (VBE) 并双击 Sheet 1，然后粘贴上面的代码。现在，当您更改目标范围内`B1:B27`的值时，您会注意到一个值被放置在 column 中`E`。`5`您可以通过将in替换为`Cells(Target.Row, 5).Value`您想要的任何列来更改上面的代码。

现在随着值的增加或减少，单元格将闪烁以反映变化。

该`Pause`功能在[此 SO Post](https://stackoverflow.com/questions/6960434/timing-delays-in-vba)上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:31:20.183

......你不能真的让它闪烁，但你可以改变阴影......

我会这样做的方式是，在工作簿中未使用的某个地方创建一组单元格来存储单元格旧值（您可以在`Worksheet_Change`事件中设置这些单元格），然后只需创建一个条件格式规则让您的单元格将您的单元格值与辅助单元格的值进行比较 - 如果较大，阴影 = 绿色，如果较小，则 sahding = 红色。

希望这是有道理的。

# javascript - Firefox 附加组件从父窗口和 iframe 窗口播放视频

> ID：15433013
> 
> 赞同：0
> 
> 时间：2013-03-15T12:52:15.153
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在尝试制作我的第一个 Firefox 插件，但实现我想要的东西是如此痛苦，因为我找不到让它工作的方法。我想从这个页面播放所有 html5 视频：http: **[//www.html5rocks.com/en/tutorials/video/basics/](http://www.html5rocks.com/en/tutorials/video/basics/)**

我正在使用附加 SDK。在 main.js 中，我添加了以下代码以将后台脚本附加到活动标签页：

```
 var pageMod = require("page-mod");

  pageMod.PageMod({
    include: "*",
    contentScriptWhen: 'ready',
    contentScript: "var players = content.document.getElementsByTagName('video'); for(var i=0; i<players.length; i++)players[i].play();"
  }); 
```

当页面加载完成时，只有来自父页面的视频开始播放。页面加载完成后，如何让所有窗口、iframe、父级的所有视频播放？该页面是**[http://www.html5rocks.com/en/tutorials/video/basics/](http://www.html5rocks.com/en/tutorials/video/basics/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:31:04.640

必须设置 pagemod 以加载所有帧并将工作人员保存在数组中以供以后访问。

# iphone - 阻止来自iphone中特定号码的呼叫

> ID：15433015
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:52:19.643
> 
> 标签：iphone, ios, core-telephony

我想阻止来自特定电话号码的电话。这可能吗？我已经搜索并找到了这个链接：- [阻止电话帖子](https://stackoverflow.com/questions/884289/can-an-iphone-app-block-phone-calls)

但我不知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:54:41.963

确切而清晰的想法是

**除非您拥有越狱的 iOS 设备，否则**无法在 iOS 中阻止来自特定号码的呼叫。****

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:56:46.813

如果不通过越狱创建应用程序，或者至少使用私有库，您将无法做到这一点。在应用程序中使用私有库最终会导致您的 App Store 提交被拒绝。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:14:05.697

这是可能的....

**简短的回答：**直路不可能。这并不意味着没有其他方式。检查这个： [iPhone4 上的呼叫阻塞](http://tech.ruimaninfo.com/?p=83)。您必须遵循的只有一个条件：**根本没有 AppStore**。

**长答案：**在此处参考已接受的答案：[如何使用私有 API 来阻止 iOS 应用程序中的来电？](https://stackoverflow.com/questions/7326338/how-can-i-use-private-apis-to-block-incoming-calls-in-an-ios-application)**

# linux - Proftpd 使用用户定义的消息限制写入目录

> ID：15433031
> 
> 赞同：0
> 
> 时间：2013-03-15T12:53:06.850
> 
> 标签：linux, configuration, ftp-server

我试图在我的 proftpd 服务器上指定一个不允许用户将文件上传到特定目录的目录。在更新期间，我不希望将任何内容写入此目录，但更重要的是，我希望将有意义的消息返回给用户。我发现我可以在配置中定义它。

```
 <Directory /my/restricted/folder>
    <Limit ALL>
      DenyAll
    </Limit>

    <Limit READ>
      AllowAll
    </Limit>

  </Directory> 
```

但是是否也可以定义一个特定的错误消息来返回给用户。类似于“对不起，您目前无法上传到此目录。系统升级正在进行中”。

如果这是不可能的，当用户尝试在目录上上传时，谁能给我一个不同的想法来完成有意义的拒绝？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T21:01:53.327

不幸的是，Proftpd 本身并不提供此功能。您可以在每个维护窗口修改 Proftpd 配置以在欢迎消息中提供此信息并防止写入有问题的目录。

# java - 使用spring jdbc时将长（+20行sql）外部化的干净方法？

> ID：15433032
> 
> 赞同：21
> 
> 时间：2013-03-15T12:53:08.200
> 
> 标签：java, sql, spring-jdbc

我想将我的应用程序中的一些大型查询外部化到 properties\sql\xml 文件。但是我想知道是否有人对如何以干净的方式实现这一点有一些建议。大多数结果建议使用 ORM 框架，但由于某些数据限制，这并不适用。

我看了一下：[Java - 将 SQL 语句存储在外部文件中](https://stackoverflow.com/questions/1544335/java-storing-sql-statements-in-an-external-file)，但对一些查询执行这个属性名 .1、.2 等，这些查询每个都超过 20 行，看起来并不那么干净。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-10-02T00:41:23.593

您可以将查询放在 xml 文件中

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>
<entry key="getPersonById">
    <![CDATA[
        Select Name From Person 
        Where Id =?     
    ]]>

</entry>    
<entry key="getPersonBySSN">
    <![CDATA[

    ]]>
</entry>

</properties> 
```

在 Spring 应用程序上下文中，加载此 xml 文件

```
<bean id="queryProps" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="locations" value="classpath:/queries.xml" />
</bean> 
```

在你的 DAO 类中注入这个 bean

```
<bean id="myDAO" class="com.xyz.dao.MyDAOImpl">
  <property name="queryProps" ref="queryProps" />
</bean> 
```

在您的 DAO 类中定义 queryProps 并且不要忘记为此设置 setter 方法

```
 private Properties queryProps; 
```

现在您可以像这样在您的 DAO 中访问查询 -

```
 String query = queryProps.getProperty("getPersonById"); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-09T13:24:29.830

前段时间我遇到了同样的问题，并提出了 YAML。它支持多行字符串属性值，因此您可以在查询文件中编写如下内容：

```
selectSomething: >
  SELECT column1, column2 FROM SOMETHING

insertSomething: >
  INSERT INTO SOMETHING(column1, column2)
  VALUES(1, '1') 
```

在这里，`selectSomething`和`insertSomething`是查询名称。所以它真的很方便，并且包含很少的特殊字符。查询以空行分隔，每个查询文本必须缩进。请注意，查询绝对可以包含自己的缩进，因此以下内容完全有效：

```
anotherSelect: <
  SELECT column1 FROM SOMETHING
  WHERE column2 IN (
    SELECT * FROM SOMETHING_ELSE
  ) 
```

然后，您可以在 SnakeYAML 库的帮助下，使用以下代码将文件的内容读入哈希映射：

```
import org.apache.commons.io.FilenameUtils;
import org.apache.commons.io.FileUtils;
import java.io.FileReader;

import org.yaml.snakeyaml.Yaml;
import java.io.File;
import java.io.FileNotFoundException;

public class SQLReader {
  private Map<String, Map> sqlQueries = new HashMap<String, Map>();

  private SQLReader() {
    try {
      final File sqlYmlDir = new File("dir_with_yml_files");
      Collection<File> ymlFiles = FileUtils.listFiles(sqlYmlDir, new String[]{"yml"}, false);
      for (File f : ymlFiles) {
        final String fileName = FilenameUtils.getBaseName(f.getName());
        Map ymlQueries = (Map)new Yaml().load(new FileReader(f));
        sqlQueries.put(fileName, ymlQueries);
      }
    }
    catch (FileNotFoundException ex) {
      System.out.println("File not found!!!");
    }
  }
} 
```

在上面的示例中，创建了一个映射映射，将每个 YAML 文件映射到一个包含查询名称/字符串的映射。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-10T12:47:06.183

这是对[Pankaj 回答](https://stackoverflow.com/a/19128259/1793718)的补充。这个在属性 XML 中没有 CDATA 并使用自动装配。我必须将此添加为答案，因为如果我必须在评论部分执行此操作，我将无法格式化代码。

确保在 spring 应用程序上下文 xml 文件中有以下命名空间。

```
xmlns:util="http://www.springframework.org/schema/util 
```

将以下 bean 添加到 spring 应用程序上下文 xml

```
<util:properties id="sqls" location="classpath:oracle/sqls.xml" /> 
```

该文件的内容`sqls.xml`是

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <comment>Employee Queries</comment>
    <entry key="employee.insert">
        INSERT
        INTO EMPLOYEE
          (
            ID,
            NAME,
            AGE,
            DEPARTMENT
          )
        VALUES
          (
            EMPLOYEE_SEQ.NEXTVAL,
            ?,
            ?,
            ?
          )
    </entry>
</properties> 
```

自动装配属性如下

```
@Autowired
@Qualifier("sqls")
private Properties sqls; 
```

从属性获取 sql 查询的代码

```
String sql = sqls.getProperty("employee.insert"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T18:16:29.813

您可以通过在行尾放置 \ 来在属性文件中执行多行查询。例如

```
queries.myquery = select \
foo, bar \
from mytable \
where baz > 10 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-23T10:27:33.730

在[JdbcTestUtils](http://docs.spring.io/spring/docs/3.2.4.RELEASE/javadoc-api/org/springframework/test/jdbc/JdbcTestUtils.html "JdbcTestUtils") 和方法“executeSqlScript”和“readScript”中获取战利品。

# jquery-plugins - JQuery Vegas Overlay 模式不会显示

> ID：15433033
> 
> 赞同：0
> 
> 时间：2013-03-15T12:53:10.403
> 
> 标签：jquery-plugins, overlay

我是 vegas 插件的新手。我想我已经正确地遵循了指示。我的脚本在：

```
$.vegas('slideshow', {
  delay:5000,
  backgrounds:[
    { src:'img/dark1-500.jpg', fade:1500 },
    { src:'img/dark2-500.jpg', fade:1500 },
    { src:'img/dark3-500.jpg', fade:1500 },
    { src:'img/dark4-500.jpg', fade:1500 },
    ]
    })('overlay', {
      src:'img/01.png',
      opacity:0.5
}); 
```

我在 CSS 中也有这个：

```
.vegas-overlay {
   background:transparent url(img/01.png); 
   opacity:0.5;
   z-index:-1; 
} 
```

两个覆盖声明都需要在那里吗？一个踩另一个？

谢谢你的帮助。Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T10:15:39.867

我通过删除一个然后另一个声明来解决这个问题。

# asp.net-mvc - 在 ASP.Net MVC 4 中使用 Flash 制作 CSS 模板？

> ID：15433046
> 
> 赞同：0
> 
> 时间：2013-03-15T12:53:47.730
> 
> 标签：asp.net-mvc, html, flash

我想将此模板集成到我的 mvc 应用程序（Visual Studio）中：

[http://www.free-css.com/free-css-templates/page131/calliope#bookmarks](http://www.free-css.com/free-css-templates/page131/calliope#bookmarks)

我设法使整个索引页面完全像在现场演示中一样正确加载，并做我想做的事，唯一拒绝正常工作的是 flash 元素（在计时器上滚动不同项目的东西，并带有箭头）。

我得到的最远的是红色的 Cuber 标志出现，表明 Flash 正在加载，但这就是它的结尾。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:02:36.047

`Views`是的，因为你可以在你的, `Layout`,上编写一些网络标准`PartialViews`，你可以在客户端做任何你想做的事情。ASP.NET MVC 不会避免你写一些标签来在你的页面上添加 flash 组件，它会与浏览器一起工作。

# android - libGDX：吊绳

> ID：15433047
> 
> 赞同：2
> 
> 时间：2013-03-15T12:53:53.283
> 
> 标签：android, libgdx, game-engine

我是 android libGDX 游戏引擎的新手，并且搜索表单很多天来制作挂绳，

我还阅读了所有 Box2D 文档，有一个方法[ropJoint](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/physics/box2d/joints/RopeJoint.html)但没有给出足够的解释来使用它。

任何人都可以帮我做一根像这样的绳子吗？[Box2d 中的吊绳](http://www.emanueleferonato.com/2009/10/05/basic-box2d-rope/)

我还尝试为 android 搜索一些好的 libGDX 书籍，但找不到。

需要你的帮助，请帮个忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:34:35.160

只需在一个循环中创建一些矩形体（box2d 中的 setAsBox）并用旋转关节相互连接（在循环和内部循环调用初始化（..）之前制作一个 RevoluteJointDef）。

这是我的代码：

```
RevoluteJointDef jd = new RevoluteJointDef();
Body prevBody = startBody;
for(int i=0; i<ringCount; i++)
    {
        BodyDef bd = new BodyDef();
        bd.type = BodyType.DynamicBody;
        bd.angle = angle-MathUtils.PI/2;
        bd.position.set(position.x + i*MathUtils.cos(angle)*EACH_RING_DISTANCE, 
                        position.y + i*MathUtils.sin(angle)*EACH_RING_DISTANCE);
        Body body = world.createBody(bd);
        body.createFixture(eachRingFD);

        Vector2 anchor = new Vector2(bd.position.x - MathUtils.cos(angle)*EACH_RING_DISTANCE/2f, 
                                     bd.position.y - MathUtils.sin(angle)*EACH_RING_DISTANCE/2f);
        jd.initialize(prevBody, body, anchor);
        prevBody = body;
    }
//connect a hanging shape to rope here if exists 
```

# unit-testing - 如何将 std::cout 与 Eclipse CDT 的单元测试支持一起使用？

> ID：15433053
> 
> 赞同：1
> 
> 时间：2013-03-15T12:54:09.173
> 
> 标签：unit-testing, eclipse-cdt

如果我在 Eclipse CDT 的简单单元测试中使用 std::cout，我会收到错误消息：“XML 解析错误：prolog 中不允许内容。”

但是，如果我删除带有“cout”消息的行，那么测试会正确运行。我打印到终端的调试消息似乎干扰了单元测试输出，因此 Eclipse 中的“C/C++ 单元测试”窗口无法解析单元测试输出。

我的问题是，如果我的代码包含一些 cout 调试消息，如何在 Eclipse 的 CDT 中使用单元测试支持？单元测试输出是否可以发送到不同的位置（如临时文件），以便与打印到终端的 cout/debug/log 消息分开？

编辑：例如，如果我使用[http://www.boost.org/doc/libs/1_42_0/libs/test/doc/html/utf/user-guide/fixture/global.html](http://www.boost.org/doc/libs/1_42_0/libs/test/doc/html/utf/user-guide/fixture/global.html)中的示例 25 ：

```
#define BOOST_TEST_MODULE example
#include <boost/test/included/unit_test.hpp>
#include <iostream>

//____________________________________________________________________________//

struct MyConfig {
    MyConfig()   { std::cout << "global setup\n"; }
    ~MyConfig()  { std::cout << "global teardown\n"; }
};

//____________________________________________________________________________//

BOOST_GLOBAL_FIXTURE( MyConfig );

BOOST_AUTO_TEST_CASE( test_case )
{
    BOOST_CHECK( true );
}

//____________________________________________________________________________// 
```

然后我收到错误“XML 解析错误：prolog 中不允许内容”。在日食中。这似乎是由于 Eclipse 单元测试工具无法解析包含“全局设置”的输出。所以问题是：如何在让 Eclipse 的单元测试工具解析消息并显示单元测试结果的同时继续使用这个打印调试消息的示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T09:46:14.990

Eclipse CDT 和 Boost.Test 之间的通信是通过 std::cout 实现的，因此您的代码不应在那里输出任何其他内容。您应该改用 BOOST_MESSAGE 或打印到 std::cerr。

不幸的是，这是 Boost.Test 的一个限制，应该扩展它以实现您想要的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T11:37:59.263

我通过单元测试构建的 CDATA 标记有条件地将输出包装到 std::cout，克服了干扰测试运行的 XML 解析错误的类似问题：

```
#if defined(WRAP_XML_CDATA)
  output << "<![CDATA[";
#endif 
```

...

```
#if defined(WRAP_XML_CDATA)
  output << "]]>";
#endif 
```

这会停止将程序的输出解析为 XML。

# php - 警告：mysql_real_escape_string() [function.mysql-real-escape-string]：无法建立到服务器的链接

> ID：15433057
> 
> 赞同：-6
> 
> 时间：2013-03-15T12:54:15.660
> 
> 标签：php, mysql, linker-errors

在 Internet 网络服务器中执行我的 PHP 脚本时，我收到此警告消息，但在本地 wamp 中它正在运行而没有警告。是什么原因 ？

```
Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the server could not be established in /home/deport/public_html/abc/index.php on line 209 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:57:02.160

mysql_real_escape_string() 需要一个与 MySQL 服务器的活动连接，如果没有，它将使用 php.ini 配置中的默认数据启动一个。

在未连接到数据库之前不要使用此功能。

另外，不要使用 mysql_* 函数。它们已被弃用，将从 PHP 中删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T12:56:47.073

您需要首先与您的 MySQL 服务器建立有效连接。

`mysql_connect()`在使用这个功能之前做。

例子：

```
$connection = mysql_connect("host","user","pass");
mysql_select_db("dbname",$connection);
echo mysql_real_escape_string("string to be escaped",$connection); 
```

您应该真正使用 MySQLi 扩展而不是 PHP 中的标准 MySQL 扩展。

# linux - 如何检查 sed 命令是否替换了某些字符串？

> ID：15433058
> 
> 赞同：17
> 
> 时间：2013-03-15T12:54:28.500
> 
> 标签：linux, bash, shell, sed

如果旧字符串存在，则此命令用新字符串替换旧字符串。

```
sed "s/$OLD/$NEW/g" "$source_filename" > $dest_filename 
```

如何检查更换是否发生？（或者发生了多少次？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T12:57:46.587

[如果您需要计算替换， sed](/questions/tagged/sed "显示标记为“sed”的问题")不是正确的工具，[awk](/questions/tagged/awk "显示标记为“awk”的问题")将更适合您的需求：

```
awk -v OLD=foo -v NEW=bar '
    ($0 ~ OLD) {gsub(OLD, NEW); count++}1
    END{print count " substitutions occured."}
' "$source_filename" 
```

这个最新的解决方案只计算替换的行数。[下一个片段用perl](/questions/tagged/perl "显示标记为“perl”的问题")计算所有替换。这个的优点是比`awk`我们保持`sed`替换的语法更清晰：

```
OLD=foo NEW=bar perl -pe '
    $count += s/$ENV{OLD}/$ENV{NEW}/g;
    END{print "$count substitutions occured.\n"}
' "$source_filename" 
```

## 编辑

感谢[威廉](https://stackoverflow.com/users/2005672/william)发现了`$count += s///g`计算换人次数的诀窍（即使在同一行或不在同一行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:40:56.117

如果您可以免费选择其他工具，例如 awk（如 @sputnick 建议的那样），请使用其他工具。awk 可以计算模式匹配的次数。

sed 本身不能计算替换，特别是如果您使用`/g`标志。但是，如果您想坚持`sed`并了解更换时间，则有可能：

一种方法是

```
grep -o 'pattern'|wc -l file && sed 's/pattern/rep/g' oldfile > newfile 
```

你也可以用**tee来做**

```
cat file|tee >(grep -o 'pattern'|wc -l)|(sed 's/pattern/replace/g' >newfile) 
```

看这个小例子：

```
kent$  cat file
abababababa
aaaaaa
xaxaxa

kent$  cat file|tee >(grep -o 'a'|wc -l)|(sed 's/a/-/g' >newfile)
15

kent$  cat newfile                                               
-b-b-b-b-b-
------
x-x-x- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:42:04.173

这`awk`应该计算替换的总数而不是发生替换的行数：

```
awk 'END{print t, "substitutions"} {t+=gsub(old,new)}1' old="foo" new="bar" file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T04:21:51.510

这对我有用。

```
awk -v s="OLD" -v c="NEW" '{count+=gsub(s,c); }1
END{print count "numbers"}
' opfilename 
```

# version-control - 使用外部工具在 Visual SourceSafe 中进行 3 路合并

> ID：15433059
> 
> 赞同：3
> 
> 时间：2013-03-15T12:54:29.083
> 
> 标签：version-control, merge, visual-studio-2005, visual-sourcesafe

我已将 WinMerge 设置为 VSS 2005 的差异工具。但是 WinMerge[不支持 3 路合并](http://manual.winmerge.org/Faq.html)（参见 #1.4）。VSS 的文档说 VSS 支持 3 路合并：

> [如果 Visual SourceSafe 检测到你们中的两个人都修改了文件的同一部分，则必须使用三向合并技术](http://msdn.microsoft.com/en-us/library/ek8hk7e2%28v=vs.80%29.aspx)

我想推荐一个我可以使用的好（免费）工具，它可以保留进行 3 路合并的能力，并且比 VSS 自己的合并/差异工具更好。

**我需要知道如何将它与 VSS 集成，因此 VSS 在调用 diff/merge 操作时调用它。**

![在此处输入图像描述](../Images/09a1eab7ff8b2981697e984998cf1834.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:58:41.210

我推荐KDiff3：

[http://kdiff3.sourceforge.net/](http://kdiff3.sourceforge.net/)

***其他***

Meld 通常与 Linux 上的 Git 一起使用，并且有一个 Windows 版本：

[https://live.gnome.org/Meld/Windows](https://live.gnome.org/Meld/Windows)

我有一段时间没有使用它了，但是，我想很多 Windows 人会推荐 p4Merge

[http://www.perforce.com/downloads/complete_list#ntx86](http://www.perforce.com/downloads/complete_list#ntx86)

# jquery - 使用 jquery 在页面加载时突出显示 jquerytreeview 中的默认节点

> ID：15433063
> 
> 赞同：2
> 
> 时间：2013-03-15T12:54:43.470
> 
> 标签：jquery, treeview

我正在使用 jquery.treeview.js。我需要在页面加载时突出显示节点背景颜色。单击时，我可以突出显示背景颜色和字体等。

```
 $("a").css("backgroundColor", "");
    $("a").css("font-weight", "");
    $(this).css("backgroundColor", "grey");
    $(this).css("font-weight", "bold");
    $.cookie("url", $(this)); 
```

现在我将这个对象保存在一个 cookie 中，并且能够读取相同但无法应用 css，因为它说没有这样的属性。

```
 $.cookie("url").css("backgroundColor", "grey"); 
```

为什么我没有从 cookie 中获取 jQuery 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:10:20.190

如果您正在使用[此](https://github.com/carhartl/jquery-cookie)插件，请尝试设置`$.cookie.json = true;`：

```
$.cookie.json = true;
...
$.cookie("url", $(this));
...
$.cookie("url").css("backgroundColor", "grey"); 
```

如果这不起作用，您可以[在此处](http://www.terminally-incoherent.com/blog/2008/11/25/serializing-javascript-objects-into-cookies/)阅读有关使用 JavaScript 进行对象反序列化的信息。如果您确实需要对象序列化，请小心，如果您不需要序列化前后的确切对象，dgvid 的答案是更好的方法。仅当您使用新变量/函数/侦听器/...扩展对象时才会出现这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:10:57.243

您的代码不起作用，因为 cookie 包含字符串，仅此而已。您的节点（技术上是 jQuery 对象的实例）不是字符串。[将Javascript 对象序列化为 Cookie](http://www.terminally-incoherent.com/blog/2008/11/25/serializing-javascript-objects-into-cookies/)的文章对如何做你想做的事有一个很好的概述。

但是，对于您的特定需求，您可能可以做一些比该文章中描述的更简单的事情。如果您确定要突出显示的节点将*始终*具有非空 id，则可以将已经是字符串的 id 保存在 cookie 中。当您从 cookie 中返回 id 时，您可以将其用作选择器来获取您想要的对象。例如：

```
// Works only if `this` has id attribute set:
$.cookie("url", this.id);

// Later...
var id = $.cookie("url");
$("#" + id).css("backgroundColor", "grey"); 
```

# android - 在android hello world程序中单击按钮时出现IllegalStateException

> ID：15433064
> 
> 赞同：4
> 
> 时间：2013-03-15T12:54:43.587
> 
> 标签：android

我是 android 新手，我正在尝试实现 android google 开发人员网站上给出的 MyFirstApp，所以应用程序包含一个文本框和按钮，如果您在文本字段中输入任何文本并单击按钮，它会在屏幕上显示相同的内容，但有问题当我点击发送按钮时。请指导我如何解决这个问题。

以下例外：

```
<p>03-15 18:00:03.430: E/AndroidRuntime(592): FATAL EXCEPTION: main</p>
<p>03-15 18:00:03.430: E/AndroidRuntime(592): java.lang.IllegalStateException:Could not find a method MainActivity.sendMessage(View) in the activity class com.example.myfirstapp.DisplayMessageActivity for onClick handler on view class android.widget.Button</p>
<p>03-15 18:00:03.430: E/AndroidRuntime(592):   at android.view.View$1.onClick(View.java:3031)</p>
<p>03-15 18:00:03.430: E/AndroidRuntime(592):   at android.view.View.performClick(View.java:3511)</p> 
```

这里有两个活动：
1.DisplayMessageActivity 这是android清单文件中提到的活动。这个实现布局部分

```
 public class DisplayMessageActivity extends Activity {

        @Override
         protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);

        setContentView(R.layout.activity_display_message_1);

    }
       } 
```

2.MainActivity
这是一个activity实现sendmessage函数，当用户点击按钮时被调用。

```
 public class MainActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    /** Called when the user clicks the Send button */
    public void sendMessage(View view) {
        // Do something in response to button
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

} 
```

Android 清单 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="DisplayMessageActivity"
            android:label="@string/title_activity_display_message">
           <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> 
        </activity>
    </application>

</manifest> 
```

和布局xml文件：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" 
        android:onClick="sendMessage"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:05:06.450

**编辑：**

更改您的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
 <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_display_message">
           <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> 
        </activity>

<activity
            android:name=".DisplayMessageActivity" />
    </application>

</manifest> 
```

**显示消息活动**：

```
public class DisplayMessageActivity extends Activity {

        @Override
         protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);

    }
       } 
```

**主要活动**：

```
public class MainActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
  @Override
             protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_display_message_1);
}

    /** Called when the user clicks the Send button */
    public void sendMessage() {
        // Do something in response to button
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

} 
```

* * *

你的布局应该有一个生命周期方法`onCreate` 它应该有一个 onCreate 方法，你需要 `setContentview(R.layout.yourlayout)`为 MainActivity设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:01:03.923

您正在使用两次`setContentView()`。您只能使用一个`setContentView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:00:39.203

您的应用正在寻找未使用该`sendMessage()`方法的活动中的方法

```
java.lang.IllegalStateException:Could not find a method MainActivity.sendMessage(View) in the activity class com.example.myfirstapp.DisplayMessageActivity for onClick handler on view class android.widget.Button</p>
<p>03-15 18:00:03.430: E/AndroidRuntime(592): 
```

`activity_display_message_1`这是您声明按钮的 xml 布局名称吗？您必须将方法 sendMessage 也放在同一个活动中

编辑：完整解决方案

activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send"
        android:onClick="sendMessage" />
</LinearLayout> 
```

activity_display_message.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />
</LinearLayout> 
```

主要活动

```
public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
    @Override
         protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
}

    /** Called when the user clicks the Send button */
    public void sendMessage(View view) {
        // Do something in response to button
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }
} 
```

DisplayMessageActivity.java

```
 public class DisplayMessageActivity extends Activity {

    @Override
     protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_message_1);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);
} 
```

}

还更新您的清单文件，因为您已经反转了启动器

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
 <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_display_message">
           <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> 
        </activity>

<activity
            android:name=".DisplayMessageActivity" />
    </application>

</manifest> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-08T03:38:56.007

```
public void sendMessage(View view) {
    // Do something in response to button
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    this.startActivity(intent);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-20T17:54:38.343

//只需更改您的清单文件，它不会为 //sample 获取“DisplayMessageActivity”的路径，如下所示：

```
 android:name="com.example.checkproject.DisplayMessageActivity" 
```

或者

```
android:name =".DisplayMessageActivity" 
```

# delphi - 使用 ADO 和 delphi 复制 MSSQL 服务器数据库

> ID：15433066
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:54:47.627
> 
> 标签：delphi, ado

我需要将几行代码集成到我的应用程序中，这允许我将数据库从一个 MSSQL 服务器复制到另一个 MSSQL 服务器，代码头应该是这样的

过程 MoveDataBase (OldServername : String; newServerName : String ; Databasename : String); 开始

结尾;

任何短代码和快速工作的想法？无法使用 MS Explorer 复制数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:29:48.330

将数据库从一台服务器传输到另一台服务器的最简单（也许也是最愚蠢）的方法是： 1\. 使用 2\. 将物理 MDF 文件复制到目标服务器，
分离源服务器上的数据库。`sp_detach_db`
您也可以复制 LDF，但恕我直言，这不是必需的。
3\. 使用附加到目标服务器上的数据库`sp_attach_db`

如前所述，您还可以将 #1 和 #3 替换为 BACKUP/RESTORE。无论如何（我重复评论），您需要的不仅仅是服务器名称和数据库，例如登录凭据。

# saucelabs - 从结果页面中清除旧测试

> ID：15433073
> 
> 赞同：9
> 
> 时间：2013-03-15T12:55:07.760
> 
> 标签：saucelabs

如何从 Sauce Labs 的测试页面中清除旧测试？

我在尝试一些东西时有很多噪音，我想整理一下。

从长远来看，会有很多无趣的构建，我希望能够存档\删除它们，以便不难找到重要的测试运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-20T07:55:55.663

目前这在 Saucelabs 中是不可能的。请参阅此论坛帖子以供参考：http: [//support.saucelabs.com/entries/23076777-I-to-delete-seesions-](http://support.saucelabs.com/entries/23076777-I-to-delete-seesions-)

> 这些工作会无限期地保留在您的帐户中，因为我们发现用户更愿意保留这些记录以供将来参考（例如，以防以前发生的事情在未来开始失败）。

**更新** 与此同时，他们可以通过 REST API 删除作业和资源： [https ://docs.saucelabs.com/reference/rest-api/#delete-job](https://docs.saucelabs.com/reference/rest-api/#delete-job)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-17T08:40:57.033

要快速删除所有旧的 SauceLabs 作业，您可以使用以下命令行配方：

```
SUN=$SAUCE_USERNAME; SAK=$SAUCE_ACCESS_KEY
curl -u $SUN:$SAK https://saucelabs.com/rest/v1/$SUN/jobs?format=csv \
  | perl -wpe 's/\r$//' \
  | xargs -I{} curl -u $SUN:$SAK -X DELETE "https://saucelabs.com/rest/v1/$SUN/jobs/{}" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-30T00:17:11.057

Sauce Labs 最近（2014 年春季）添加了手动删除测试的功能。如果您进入测试详细信息页面，您会在屏幕右侧看到一个标有“删除”的红色大按钮。单击它将删除测试。

有一个功能请求允许您同时删除多个测试。

# windows - 无法让 git autocrlf=true 工作

> ID：15433075
> 
> 赞同：2
> 
> 时间：2013-03-15T12:55:24.997
> 
> 标签：windows, git, newline, core.autocrlf

好的，所以我已经阅读了有关此主题的所有主题，我的理解如下：

如果我在 Windows 中设置 core.autocrlf = true，git 应该在提交和推送时将我所有的 crlf 行结尾转换为 LF。

这就是我想要的，我的配置就是这样设置的。但是，当我签入带有 CRLF 结尾的文本文件时，我收到错误消息：

```
fatal: LF would be replaced by CRLF 
```

我不明白...当我提交时，不应该发生相反的情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:19:44.680

该消息具有误导性，但有道理：

1.  您签入文件，行尾规范化完成：`CRLF`替换为`LF`，`LF`保留为`LF`.
2.  稍后，您检查有问题的文件。现在 git 将“撤消”行结束规范化：`LF`将替换为`CRLF`.

在该过程结束时，`LF`您工作目录中的所有 s 都已替换为`CRLF`. 这就是 git 警告你的地方。

*注意*：我不建议使用`core.autocrlf`- 这是一个已被取代的旧设置。改为使用属性。见这里：[https ://stackoverflow.com/a/13154031/758345](https://stackoverflow.com/a/13154031/758345)

# ios - 将 UIScrollView 添加到 UIView 时无法滚动

> ID：15433077
> 
> 赞同：0
> 
> 时间：2013-03-15T12:55:28.097
> 
> 标签：ios, objective-c

我正在尝试向我的 UIView 添加一个滚动视图，并在其上放置一个标签、文本视图、图像，但滚动条没有显示并且我无法滚动。

```
 //faux view
UIView* fauxView = [[[UIView alloc] initWithFrame: CGRectMake(10, 10, 200, 200)]autorelease] ;
[self.bgView addSubview: fauxView];

//the new panel
self.bigPanelView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, self.bgView.frame.size.width, self.bgView.frame.size.height)]autorelease];
self.bigPanelView.center = CGPointMake( self.bgView.frame.size.width/2, self.bgView.frame.size.height/2);
self.bigPanelView.backgroundColor = self.initialBackgroundColor;

UIScrollView * scroll = [[UIScrollView alloc] initWithFrame:self.bigPanelView.bounds];
[scroll setContentSize:CGSizeMake(200, 200)];
[self.bigPanelView addSubview:scroll];
scroll.showsVerticalScrollIndicator = YES;

// add label

UILabel *lblTitle = [[[UILabel alloc] initWithFrame:CGRectMake(0, 25, self.bgView.frame.size.width, 46)]autorelease]; 
// If I change the 25 to 235 the label will come under the screen but still I cannot    scroll.
lblTitle.textAlignment = NSTextAlignmentCenter; // Align the label text in the center
lblTitle.backgroundColor = [UIColor clearColor];
lblTitle.text = self.initialTitle;
lblTitle.textColor = self.initialTitleColor;
lblTitle.font = [UIFont systemFontOfSize:31];
[scroll addSubview: lblTitle]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:58:09.253

您必须使滚动`contentSize`视图大于视图：

```
[scroll setContentSize:CGSizeMake(200, 200)]; 
```

需要是这样的：

```
[scroll setContentSize:CGSizeMake(400, 400)]; 
```

当然，无论您要放置滚动视图的内容的大小如何，这样，它都只会在需要时滚动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:57:27.397

对于滚动 - scrollView contentSize 应该大于 scrollView 框架。

# string - NSIS 用斜杠连接字符串

> ID：15433079
> 
> 赞同：1
> 
> 时间：2013-03-15T12:55:37.093
> 
> 标签：string, variables, nsis

我正在尝试使用此表达式构建一个字符串`bla://${foo}/bar`where `${foo} == "hostname"`。预期的结果是`bla://hostname/bar`，但我得到`http://${foo}/bar`了。所以我认为这种组合有一些特别之处，`/$`但我无法弄清楚。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:23:40.137

`/$`并不特殊，但不存在的定义最终为`${definename}`.

```
DetailPrint "${foo}" ; Prints ${foo}
!define foo example.com
DetailPrint "${foo}" ; Prints example.com 
```

所有定义都在编译时解析，如果用户可以在自定义页面上配置此主机名，则需要使用 NSIS 变量...

# java - 在java中将String转换为int

> ID：15433085
> 
> 赞同：-4
> 
> 时间：2013-03-15T12:55:51.260
> 
> 标签：java

我需要在java中将字符串转换为相应的int数组。我写了下面的代码，但它没有像我预期的那样工作。

```
 String temp= "abc1";
        int[] intArray = new int[temp.length()];
        for (int i = 0; i < temp.length(); i++) {
            intArray[i] = Integer.parseInt(temp[i]);
        } 
```

我编写了一个 rc4 加密程序，它将密钥和纯文本作为 int 数组。所以我需要在将用户指定的密钥传递给加密函数之前将其转换为 int 数组。这是在加密程序中使用密钥的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:00:39.180

使用它来获取 ASCII 码

```
intArray[i] = (int)temp.charAt(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:02:37.163

您可以将字符串转换为 charArray。遍历 charArray 可以转换为：

```
char[] c = inputString.toCharArray()
for(int i=0;i<c.length;i++)
     int n    = Integer.parseInt(c[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-03T21:41:55.000

如果您使用的是 Java8 或更高版本，那么它可能对您有所帮助

```
String temp="abc1";
int[] intArray =temp.chars().map(x->x-'0').toArray();
System.out.println(Arrays.toString(intArray )); 
```

int 数组将是 [49, 50, 51, 1]

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T13:29:16.427

我通过使用 byte 而不是 int 解决了这个问题。修改 rc4 以采用字节数组。使用将字符串转换为字节

```
 String Nkey = jTextField2.getText();
    jTextField3.setText(Nkey);
    int i;
    byte[] key = Nkey.getBytes(); 
```

# android - 用于生成 ListView 的 Android SimpleCursorAdapter

> ID：15433088
> 
> 赞同：0
> 
> 时间：2013-03-15T12:56:10.590
> 
> 标签：android

我在 android 中使用 ListView

我的数据来自数据库

我已经学习了 SimpleCursorAdapter，这是来自官方文档的代码

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
        R.layout.person_name_and_number, cursor, fromColumns, toViews, 0);
ListView listView = getListView();
listView.setAdapter(adapter); 
```

我所了解的所有事情也成功地创建了列表视图，但是有一个疑问，他们没有解释**构造函数中最后一个参数 0 的用途。**请告诉我最后一个论点在这里做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:58:55.447

SimpleCursorAdapter[文档](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#SimpleCursorAdapter%28android.content.Context,%20int,%20android.database.Cursor,%20java.lang.String%5B%5D,%20int%5B%5D,%20int%29)解释说，这些是用于确定适配器行为的标志：

> 用于确定适配器行为的标志，根据 CursorAdapter(Context, Cursor, int)。

有关更多信息，请参阅[CursorAdapter 文档](http://developer.android.com/reference/android/widget/CursorAdapter.html#CursorAdapter%28android.content.Context,%20android.database.Cursor,%20int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:10:58.347

来自光标的列表视图（没有加载器）

SimpleCursorAdapter 适配器 = 新的 SimpleCursorAdapter(

```
 this,                // The Activity context
    R.layout.list_item,  // Points to the XML for a list item
    cursor,              // Cursor that contains the data to display
    dataColumns,         // Bind the data in column "text_column"...
    viewIDs              // ...to the TextView with id "R.id.text_view"

    ); 
```

来自光标的列表视图（使用加载器）

将数据异步加载到容器（列表视图或片段）加载器是最好的方法。

```
// Initialize the adapter. Note that we pass a "null" Cursor as the
// third argument. We will pass the adapter a Cursor only when the
// data has finished loading for the first time (i.e. when the
// LoaderManager delivers the data to onLoadFinished). Also note
// that we have passed the "0" flag as the last argument. This
// prevents the adapter from registering a ContentObserver for the
// Cursor (the CursorLoader will do this for us!).
mAdapter = new SimpleCursorAdapter(this, R.layout.list_item,
    null, dataColumns, viewIDs, 0); 
```

以下 URL 描述了上述内容。 [http://www.androiddesignpatterns.com/2012/07/understanding-loadermanager.html](http://www.androiddesignpatterns.com/2012/07/understanding-loadermanager.html)

# c - 如何从未排序的数组中获取最小元素的索引？

> ID：15433092
> 
> 赞同：-2
> 
> 时间：2013-03-15T12:56:23.267
> 
> 标签：c, arrays

嗨，我知道如何在已排序的数组上执行此操作，但我不知道如何在 C 中未排序的数组上执行此操作？

```
int smallest_element_index(int work_array[], int max_j)
{
        int index = 0;
        int i;
        for( i = 1; i < max_j; i++)
        {
                if(work_array[i] < work_array[index])
                        index = i;
        }

        return index;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:39:41.167

这可以很好地从未排序的数组中找到最小的元素索引。

```
int smallest_element_index(int work_array[], int max_j)
{
        int index = 0;
        int i;
        for( i = 1; i < max_j; i++)
        {
                if(work_array[i] < work_array[index])
                        index = i;
        }

        return index;
} 
```

# c - 在 GCC 中使用多个头文件进行编译——未定义的对 ..math 的引用

> ID：15433100
> 
> 赞同：2
> 
> 时间：2013-03-15T12:56:47.650
> 
> 标签：c, gcc, compilation

我已经为此工作了一段时间。我有这些文件：

```
main.c
zSim.h 
zSim.c
zDynamicArray.h 
zDynamicArray.c
zOptions.h 
zOptions.c
zMain.h 
zMain.c 
```

所有文件和标题都位于同一文件夹中。

我的主要有以下内容：

```
#include "zDynamicArray.h"
#include "zOptions.h"
#include "zMain.h"
#include "zSim.h"
#include <stdio.h>
#include <math.h> 
```

我正在使用头卫。例如，这是来自我的 zSim.h 文件：

```
#ifndef SIM_H
#define SIM_H
#include "zDynamicArray.h"
#include "zOptions.h"

//This Header is accountable
//for all Simulation Related things. 

int Simulate(SIMOPT so,PRINTOPT po);

#endif 
```

这是我的 zSim.c 代码的一个片段（也许我在这里做错了什么？）：

```
#define M_PI 3.14159265358979323846
#include "zSim.h"
#include "zDynamicArray.h"
#include "zOptions.h"
#include <stdlib.h>
#include <stdio.h>
#include <math.h> 
```

我正在使用这个 gcc 命令进行编译：

```
gcc main.c zSim.c zOptions.c zDynamicArray.c zMain.c -o TEST 
```

我也用过：

```
cc -c main.c
cc -c zSim.c
cc -c ... etc
cc *.o -o TEST 
```

它们都会导致 math.h 库中任何内容的未定义引用。此外，当我使用该`gcc -I`命令时，数学仍然未定义。

如果我使用 编译`gcc main.c`，我的头文件中的任何内容都会得到未解析的引用。

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:00:59.263

尝试`-lm`在最后添加：`gcc -c main.c cc -c zSim.c cc -c ... etc cc *.o -o TEST -lm`

您必须使用 -lm 选项链接数学库。原因在这里解释：[为什么必须在 C 中链接数学库？](https://stackoverflow.com/questions/1033898/why-do-you-have-to-link-the-math-library-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:00:50.233

> 它们都会导致 math.h 库中任何内容的未定义引用

`math.h`只是包含原型和类型声明的头文件。创建可执行文件时，您还需要**链接数学库。**添加`-lm`到您的 gcc 调用中：

```
gcc main.c zSim.c zOptions.c zDynamicArray.c zMain.c -o TEST -lm 
```

另请参阅[对 `sin` 的未定义引用](https://stackoverflow.com/questions/5005363/undefined-reference-to-sin-in-c)。

# c# - 从 C# 到 C++/CLI 的代码转换错误

> ID：15433111
> 
> 赞同：1
> 
> 时间：2013-03-15T12:57:28.157
> 
> 标签：c#, c++-cli

我正在尝试将 C# 的简单代码转换为 C++/CLI，但是当我尝试构建转换后的代码时，我得到了这个错误：

```
1>------ Build started: Project: Compiler2, Configuration: Debug Win32 ------
1>  Source.cpp
1>Source.cpp(21): error C2143: syntax error : missing ';' before '^'
1>Source.cpp(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>Source.cpp(28): error C2143: syntax error : missing ';' before '^'
1>Source.cpp(28): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>Source.cpp(36): error C2143: syntax error : missing ';' before '^'
1>Source.cpp(36): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>Source.cpp(44): error C2143: syntax error : missing ';' before '^'
1>Source.cpp(44): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>Source.cpp(45): error C2143: syntax error : missing ';' before '^'
1>Source.cpp(45): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>Source.cpp(101): error C2146: syntax error : missing ';' before identifier 'Op'
1>Source.cpp(101): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

而且，我的代码是：

```
// AST.cs

using namespace System;

/* <stmt> := var <ident> = <expr>
    | <ident> = <expr>
    | for <ident> = <expr> to <expr> do <stmt> end
    | read_int <ident>
    | print <expr>
    | <stmt> ; <stmt>
  */
public ref class Stmt abstract
{
};

// var <ident> = <expr>
public ref class DeclareVar : Stmt
{
public:
    String^ Ident;
    Expr^ expr;
};

// print <expr>
public ref class Print : Stmt
{
public:
    Expr^ Expr;
};

// <ident> = <expr>
public ref class Assign : Stmt
{
public:
    String^ Ident;
    Expr^ Expr;
};

// for <ident> = <expr> to <expr> do <stmt> end
public ref class ForLoop : Stmt
{
public:
    String^ Ident;
    Expr^ From;
    Expr^ To;
    Stmt^ Body;
};

// read_int <ident>
public ref class ReadInt : Stmt
{
public:
    String^ Ident;
};

// <stmt> ; <stmt>
public ref class Sequence : Stmt
{
public:
    Stmt^ First;
    Stmt^ Second;
};

/* <expr> := <string>
 *  | <int>
 *  | <arith_expr>
 *  | <ident>
 */
public ref class Expr abstract
{
};

// <string> := " <string_elem>* "
public ref class StringLiteral : Expr
{
public:
    String^ Value;
};

// <int> := <digit>+
public ref class IntLiteral : Expr
{
public:
    int Value;
};

// <ident> := <char> <ident_rest>*
// <ident_rest> := <char> | <digit>
public ref class Variable : Expr
{
public:
    String^ Ident;
};

// <bin_expr> := <expr> <bin_op> <expr>
public ref class BinExpr : Expr
{
public:
    Expr^ Left;
    Expr^ Right;
    BinOp Op;
};

// <bin_op> := + | - | * | /
public enum class BinOp
{
    Add,
    Sub,
    Mul,
    Div
}; 
```

这段代码是从这段代码转换而来的：

```
// AST.cs

/* <stmt> := var <ident> = <expr>
    | <ident> = <expr>
    | for <ident> = <expr> to <expr> do <stmt> end
    | read_int <ident>
    | print <expr>
    | <stmt> ; <stmt>
  */
public abstract class Stmt
{
}

// var <ident> = <expr>
public class DeclareVar : Stmt
{
    public string Ident;
    public Expr Expr;
}

// print <expr>
public class Print : Stmt
{
    public Expr Expr;
}

// <ident> = <expr>
public class Assign : Stmt
{
    public string Ident;
    public Expr Expr;
}

// for <ident> = <expr> to <expr> do <stmt> end
public class ForLoop : Stmt
{
    public string Ident;
    public Expr From;
    public Expr To;
    public Stmt Body;
}

// read_int <ident>
public class ReadInt : Stmt
{
    public string Ident;
}

// <stmt> ; <stmt>
public class Sequence : Stmt
{
    public Stmt First;
    public Stmt Second;
}

/* <expr> := <string>
 *  | <int>
 *  | <arith_expr>
 *  | <ident>
 */
public abstract class Expr
{
}

// <string> := " <string_elem>* "
public class StringLiteral : Expr
{
    public string Value;
}

// <int> := <digit>+
public class IntLiteral : Expr
{
    public int Value;
}

// <ident> := <char> <ident_rest>*
// <ident_rest> := <char> | <digit>
public class Variable : Expr
{
    public string Ident;
}

// <bin_expr> := <expr> <bin_op> <expr>
public class BinExpr : Expr
{
    public Expr Left;
    public Expr Right;
    public BinOp Op;
}

// <bin_op> := + | - | * | /
public enum BinOp
{
    Add,
    Sub,
    Mul,
    Div
} 
```

好的，我该如何解决这个错误？？（因为，对我来说，代码是正确的......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:08:23.947

`Expr`并且`BinOp`在声明之前正在使用；在 C# 中不是问题，但在 C++ 中是一个问题

尝试这个

```
using namespace System;

/* <stmt> := var <ident> = <expr>
    | <ident> = <expr>
    | for <ident> = <expr> to <expr> do <stmt> end
    | read_int <ident>
    | print <expr>
    | <stmt> ; <stmt>
  */
public ref class Stmt abstract
{
};

/* <expr> := <string>
 *  | <int>
 *  | <arith_expr>
 *  | <ident>
 */
public ref class Expr abstract
{
};

// <bin_op> := + | - | * | /
public enum class BinOp
{
    Add,
    Sub,
    Mul,
    Div
};

// var <ident> = <expr>
public ref class DeclareVar : Stmt
{
public:
    String^ Ident;
    Expr^ expr;
};

// print <expr>
public ref class Print : Stmt
{
public:
    Expr^ Expr;
};

// <ident> = <expr>
public ref class Assign : Stmt
{
public:
    String^ Ident;
    Expr^ Expr;
};

// for <ident> = <expr> to <expr> do <stmt> end
public ref class ForLoop : Stmt
{
public:
    String^ Ident;
    Expr^ From;
    Expr^ To;
    Stmt^ Body;
};

// read_int <ident>
public ref class ReadInt : Stmt
{
public:
    String^ Ident;
};

// <stmt> ; <stmt>
public ref class Sequence : Stmt
{
public:
    Stmt^ First;
    Stmt^ Second;
};

// <string> := " <string_elem>* "
public ref class StringLiteral : Expr
{
public:
    String^ Value;
};

// <int> := <digit>+
public ref class IntLiteral : Expr
{
public:
    int Value;
};

// <ident> := <char> <ident_rest>*
// <ident_rest> := <char> | <digit>
public ref class Variable : Expr
{
public:
    String^ Ident;
};

// <bin_expr> := <expr> <bin_op> <expr>
public ref class BinExpr : Expr
{
public:
    Expr^ Left;
    Expr^ Right;
    BinOp Op;
}; 
```

# tsql - 删除属性 = 变量的节点

> ID：15433113
> 
> 赞同：1
> 
> 时间：2013-03-15T12:57:29.387
> 
> 标签：tsql, variables, xquery

我需要一些帮助 - 如何从属性等于 sql 变量的无类型 XML 字段中删除节点？

这是我尝试过的：

```
DECLARE @AttributeKey varchar(500) = 'TestColorBox1';

UPDATE
    Numbers
SET
    AttributeKeyValues.modify('delete (/attributes/attribute[@key="{sql:variable("@AttributeKey")"]}/*')
WHERE
    AccountId = 2000046

    SELECT * FROM Numbers 
```

附言。对不起，如果问题含糊不清，我昨天真的是从 xquery 开始的。我已经读到您将 sql 变量定义为

```
"sql:variable("@variableName")" 
```

错误：

```
 Msg 9303, Level 16, State 1, Line 6
    XQuery [Numbers.AttributeKeyValues.modify()]: Syntax error near '@', expected ']'. 
```

**更新：**

让它运行没有错误：仍然没有删除我需要删除的节点

```
DECLARE @AttributeKey varchar(500) = 'TestColorBox1';

UPDATE
    Numbers
SET
    AttributeKeyValues.modify('delete (/attributes/attribute[@key="{sql:variable(&quot;@AttributeKey&quot;)}"])')
WHERE
    AccountId = 2000046

    SELECT * FROM Numbers 
```

另一个更新：使用的 XML

```
<attributes>
  <attribute key="TestColorBox1">TEST1</attribute> <!-- Targeted Field -->
  <attribute key="test2345">TEST2</attribute>
  <attribute key="test23454">TEST3</attribute>
  <attribute key="test24568798">TEST4</attribute>
  <attribute key="TEST123214124124">TEST5</attribute>
</attributes> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:45:16.633

删除属性等于局部变量值的`attribute`节点`attributes``@key``@AttributeKey`

```
modify('delete /attributes/attribute[@key = sql:variable("@AttributeKey")]') 
```

# android - 在 Android webView 中获取 java.lang.NullPointerException

> ID：15433116
> 
> 赞同：0
> 
> 时间：2013-03-15T12:57:42.150
> 
> 标签：android

我正在开发一个应用程序，我在其中扫描 QR 码并使用它打开与之相关的 pdf。这是我的代码

```
if(uri.contains("abc"))
                {
    WebView webview= new WebView(getApplicationContext());

    webview.getSettings().setJavaScriptEnabled(true);
    webview.loadUrl("http://docs.google.com/gview?embedded=true&url=" + uri); 
```

但我的应用程序崩溃了，我得到了`java.lang.NullPointerException`。请帮我。每一个帮助将不胜感激。这是我的错误日志

```
03-15 18:26:03.150: I/Adreno200-EGLSUB(4541): <ConfigWindowMatch:2081>: Format RGBA_8888.
03-15 18:26:03.160: D/memalloc(4541): /dev/pmem: Mapped buffer base:0x519b7000 size:3010560 offset:2396160 fd:66
03-15 18:26:03.610: D/CameraConfigurationManager(4541): Default preview format: 17/yuv420sp
03-15 18:26:03.610: D/CameraConfigurationManager(4541): Screen resolution: Point(480, 320)
03-15 18:26:03.610: D/CameraConfigurationManager(4541): preview-size-values parameter: 640x480,640x368,512x288,384x288,352x288,320x240,176x144
03-15 18:26:03.610: D/CameraConfigurationManager(4541): Camera resolution: Point(512, 288)
03-15 18:26:03.620: D/CameraConfigurationManager(4541): Setting preview size: Point(512, 288)
03-15 18:26:03.780: D/CameraManager(4541): Calculated framing rect: Rect(60, 40 - 420, 280)
03-15 18:26:03.900: D/memalloc(4541): /dev/pmem: Mapped buffer base:0x51f16000 size:6184960 offset:5570560 fd:72
03-15 18:26:04.100: D/memalloc(4541): /dev/pmem: Mapped buffer base:0x525fc000 size:1843200 offset:1228800 fd:75
03-15 18:26:05.140: D/-heap(4541): GC_FOR_ALLOC freed 1322K, 22% free 6798K/8611K, paused 82ms
03-15 18:26:06.340: D/DecodeHandler(4541): Found barcode in 267 ms
03-15 18:26:06.360: D/-heap(4541): GC_FOR_ALLOC freed 1363K, 24% free 6817K/8867K, paused 19ms
03-15 18:26:06.380: D/CaptureActivityHandler(4541): Got decode succeeded message
03-15 18:26:06.530: D/MediaPlayer(4541): start() mUri is null
03-15 18:26:08.510: W/dalvikvm(4541): threadid=1: thread exiting with uncaught exception (group=0x40af39f0)
03-15 18:26:08.520: E/AndroidRuntime(4541): FATAL EXCEPTION: main
03-15 18:26:08.520: E/AndroidRuntime(4541): java.lang.NullPointerException
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.view.ViewConfiguration.get(ViewConfiguration.java:333)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.view.View.<init>(View.java:2711)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.view.View.<init>(View.java:2757)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.view.ViewGroup.<init>(ViewGroup.java:419)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.widget.AbsoluteLayout.<init>(AbsoluteLayout.java:52)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.webkit.WebView.<init>(WebView.java:1092)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.webkit.WebView.<init>(WebView.java:1075)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.webkit.WebView.<init>(WebView.java:1064)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.webkit.WebView.<init>(WebView.java:1054)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.webkit.WebView.<init>(WebView.java:1045)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at com.google.zxing.client.android.result.URIResultHandler.handleButtonPress(URIResultHandler.java:146)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at com.google.zxing.client.android.result.ResultButtonListener.onClick(ResultButtonListener.java:38)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.view.View.performClick(View.java:3528)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.view.View$PerformClick.run(View.java:14235)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.os.Handler.handleCallback(Handler.java:605)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.os.Looper.loop(Looper.java:137)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at java.lang.reflect.Method.invokeNative(Native Method)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at java.lang.reflect.Method.invoke(Method.java:511)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
03-15 18:26:08.520: E/AndroidRuntime(4541):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:05:06.153

您的 WebView 在空气中流动。在执行任何操作之前将其附加到视图层次结构或通过 xml 布局创建 webview。

# php - 项目菜单到模块

> ID：15433117
> 
> 赞同：0
> 
> 时间：2013-03-15T12:57:43.100
> 
> 标签：php, module, joomla1.5, menuitem

如何创建一个模块来显示在 joomla 1.5 的菜单项中显示的相同内容？我在 Joomla 1.5 中有一个带有就业组件的网站。该组件允许创建菜单项以显示特定类别的作业。我想在模块中显示此菜单项以按类别显示作业。该组件只有一个模块，它将所有就业类别混合在一个列表中。如何创建一个显示菜单项中显示的相同内容的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:19:33.887

您可以使用 {loadposition} 插件（Joomla 附带）将位置加载到模块中吗？或者在 extensions.joomla.org 上寻找一个允许您在其中加载另一个模块的模块

# jquery - 数据表汇总过滤后的数据

> ID：15433119
> 
> 赞同：4
> 
> 时间：2013-03-15T12:57:49.660
> 
> 标签：jquery, jquery-datatables

我在我的网站中使用数据表 jquery 插件。一切运作良好。

但是我试图通过使用插件脚本列过滤器来增强表格，然后我想总结页脚中的数据。我可以让过滤器正常工作。

数据表中用于汇总数据的示例仅适用于数据页面或整个数据集。

我找到了这个线程：[http](http://datatables.net/forums/discussion/2053/fnfootercallback-sum-column-after-filter/p1) ://datatables.net/forums/discussion/2053/fnfootercallback-sum-column-after-filter/p1寻找类似的解决方案。作者建议使用以下功能：

```
._('td:nth-child(4)', {"filter": "applied"}) 
```

这显然返回了过滤数据的对象。但是，一旦我有了这个，我不知道从哪里开始添加数据

目前我的数据表脚本（为了帖子而缩短）看起来像这样：

```
table.dataTable({...

    "fnFooterCallback": function ( nRow, aaData, iStart, iEnd, aiDisplay ) {

        /*
                     * Calculate the total sales for the table (ie inc. outside
                     * the pagination)
                     */
        var iTotalSales = 0;
        for ( var i=0 ; i<aaData.length ; i++ )
        {
            iTotalSales += aaData[i][2]*1;
        }

        /* Calculate the total sales on this page */
        var iPageSales = 0;
        for ( var i=iStart ; i<iEnd ; i++ )
        {
            iPageSales += aaData[ aiDisplay[i] ][2]*1;
        }

        /* Modify the footer row to match what we want */
        var secondRow = $(nRow).next()[0];
        var nCells = secondRow.getElementsByTagName('td');
        nCells[0].innerHTML = accounting.formatMoney(iPageSales, "£ ", 2) +
                ' Page Total ('+ accounting.formatMoney(iTotalSales, "£ ", 2) +' Total Sales)';
    }

})
        .columnFilter({
            aoColumns: [ { type: "date-range" },
                null,
                { type: "text"  },
                { type: "text"  },
                { type: "select"  },
                { type: "select"  }
            ]

        })
        ._('td:nth-child(4)', {"filter": "applied"}); 
```

我目前有一个如上所述的摘要，它显示页面上过滤的总数与表格的总数（所有数据不只是过滤）

我是 jquery 新手 - 我不确定从哪里开始操作在最终调用中创建的对象

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-16T16:29:17.380

当你运行时，`._('td:nth-child(4)', {"filter": "applied"})`你会得到一个该列值的数组返回给你。因此，如果您的表格在过滤后看起来像这样：

```
col 1 | col 2 | col 3 | col 4
foo   | blah  |   $18 |   154
bar   | blech |    $2 |   109 
```

...然后是以下命令

```
var col4 = $('#mytable').dataTable()._('td:nth-child(4)', {"filter": "applied"}) 
```

...会给你`col4 = [154, 109]`。从那里，您只需遍历 col4 以求和其值，然后手动将结果插入到适当位置的页脚行中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T18:38:31.117

在数据表 1.10 中，您可以使用 api 中的列方法。请注意，它仅在您调用 .DataTable 而不是 .dataTable 时才存在。因为我正在迁移旧的数据表代码，这让他们绊倒了一个小时。

下面的示例创建一个数据表，然后绑定一个在重新计算页脚时执行的函数。重新计算页脚时，该函数会在表中搜索包含成本的列。然后，它汇总此列中的值：

1.  数据表当前页的列中显示的数据。
2.  表中的所有数据列中。
3.  存在于满足筛选条件的行上的列中的数据。

所以看看变量`searchTotalData`:)

```
var dataTable = $('#csvtable').DataTable({
    'footerCallback': function(row, data, start, end, display){
        var api = this.api();
        var intval = function(i){
            //Excuse this ugliness, it comes from the datatables sample
            return typeof i === 'string' ? 
                i.replace(/[\$,]/g, '')*1 :
                typeof i === 'number' ? 
                    i : 0;
        };

        var costColumnIndex = $('th').filter(function(i){return $(this).text() == 'Cost';}).first().index();
        var totalData= api.column(costColumnIndex).data();
        var total = totalData.reduce(function(a ,b){ return intval(a) + intval(b); }, 0) .toFixed(2);
        var pageTotalData = api.column(costColumnIndex, {page: 'current'}).data();
        var pageTotal = pageTotalData.reduce(function(a,b){return intval(a) + intval(b);}, 0).toFixed(2);
        var searchTotalData = api.column(costColumnIndex, {'filter': 'applied'}).data();
        var searchTotal = searchTotalData.reduce(function(a,b){return intval(a) + intval(b);}, 0).toFixed(2);

        $('#cost').html('Approximate page total $' + pageTotal + ', search total $' + searchTotal + ', totally total $' + total);
    }   
}); 
```

# c# - 如何访问 Func 目标的值 ?

> ID：15433123
> 
> 赞同：3
> 
> 时间：2013-03-15T12:58:02.317
> 
> 标签：c#, linq

我有一个 C# 方法，声明如下：

```
public IEnumerable<ClientEntity> Search(Func<Client, bool> searchPredicate)
{
    // Uses the search searchPredicate to perform a search.
} 
```

这个方法被调用类似：

```
string searchCriteria = "My Search Criteria";
bool searchOnlyActive = false;
myClientService.Search(c => c.Name.Contains(searchCriteria) && (c.Active || !searchOnlyActive)); 
```

现在，如果我在该方法的开头抛出一个断点并查看即时窗口中的 searchPredicate 属性，当我键入 searchPredicate.Target 时，我会得到如下信息：

```
{MyNamespace.ClientsService.}
    searchCriteria: "My Search Criteria"
    searchOnlyActive: false 
```

我想要的是实际获得“我的搜索条件”值和显示在那里的错误值，就像调试器一样，但我没有设法，因为目标属性的类型类似于“<>c__DisplayClass2”我不知道那是从哪里来的。我知道它可以做到，因为调试器做到了，我只是不知道怎么做。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:14:30.620

`<>c__DisplayClass2`是编译器为获取捕获上下文而发明的类。你可以只使用反射：

```
object target = searchPredicate.Target;
if(target != null) {
    foreach(var field in target.GetType().GetFields()) {
        Console.WriteLine("{0}={1}", field.Name, field.GetValue(target));
    }
} 
```

输出：

```
searchCriteria=My Search Criteria
searchOnlyActive=False 
```

然而！除非您了解匿名方法和捕获的变量（以及如何根据编译器生成的上下文类来实现），否则我认为这不会满足您的要求；例如，可能没有上下文（a `Target`that is `null`），或多个嵌套上下文...

另外：如果这是您的意图，则表达式树`Expression<Func<Client,bool>>`的可检查性要高得多。

# javascript - 如何使用 jquery 停止事件传播

> ID：15433124
> 
> 赞同：1
> 
> 时间：2013-03-15T12:58:04.817
> 
> 标签：javascript, jquery

我正在使用 jquery 提交表单，并且在表单提交后似乎无法阻止页面重新加载。

我当前的代码如下所示：

HTML：

```
<form class="form-horizontal" method="post" action="#" name="basic_validate" id="basic_validate" />
  <div class="control-group">
    <label class="control-label">Image Path</label>
    <div class="controls">
      <input type="text" name="imagepath" id=imagepath />
    </div>
  </div>
  <div class="form-actions">
    <input type=button value="Send" id="sendemailbtn" class="btn btn-primary" />
  </div>
</form> 
```

jQuery：

```
$("#sendemailbtn").click(function(e) {
    e.preventDefault();
    $("#basic_validate").submit();

    if ($("#basic_validate").children('.control-group').hasClass('error')) {
        return false;
    } else {
        $.post('send_email.php', $("#basic_validate").serialize(), function(data) {

            // I see output on the server side but never hit this area after the submission,

            console.log(data);
        }, "json");
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:00:08.797

```
$("#basic_validate").submit(); 
```

是你的罪魁祸首。该行提交表单并重新加载页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:00:15.850

根据[`submit`文档](http://api.jquery.com/submit/)，

> [...] 我们可以通过在事件对象上调用 .preventDefault() 或从我们的处理程序返回 false 来取消提交操作。

由于`.preventDefault()`似乎不适合您，请尝试：

```
$("#basic_validate").submit(function(){

    if ($("#basic_validate").children('.control-group').hasClass('error')) {
        return false;
    }
    else {
        $.post('send_email.php', $("#basic_validate").serialize(), function(data) {

        // I see output on the server side but never hit this area after the submission,

            console.log(data);
        }, "json");                             
    }            
    return false;  //This prevents reloading
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:00:16.067

那是因为`.submit()`那样工作。如果您想使用 AJAX 提交表单，那么您想手动发出 AJAX 请求，[`$.post`](http://api.jquery.com/jQuery.post/)而无需`.submit()`：

```
$("#sendemailbtn").click(function (e) {
    e.preventDefault();
    if (!$("#basic_validate").children('.control-group').hasClass('error')) {
        $.post('send_email.php', $("#basic_validate").serialize(),
        function(data) {
            console.log(data);
        }, "json");                             
    }    
}); 
```

# symfony - Symfony 2 模型层在哪里放置业务逻辑？

> ID：15433125
> 
> 赞同：8
> 
> 时间：2013-03-15T12:58:07.700
> 
> 标签：symfony, model, symfony-2.2

我正在将我的旧代码库移动到 Symfony 2.2 框架。

在我的旧代码中，我的 Article 实体有一个方法**getUrl()**，它返回当前文章的 URL。

在 Symfony 中，我必须使用**路由器**服务来生成这样的 URL。

我无法从实体内部访问路由器，因为这是一种不好的做法，并且框架并不真正支持。

**我可以使用 Twig helper path()**从 Twig 模板本身调用路由器，并提供构造 URL 所需的所有参数（来自 Article 实例）。但是这种方法不是很好，因为如果我决定更改 URL 格式规则 - 我将不得不找到所有这些调用并重写它们（不是很**干燥**）。

我真的想在这里保存业务逻辑封装，而不是把所有的胆量都拉到视图层。

在这种情况下我应该如何进行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T13:16:32.293

在您的服务层中创建一个`ArticleManager`类，并在那里处理任何业务逻辑。您可以通过依赖注入将路由器传递给它。

对于您的示例，`ArticleManager`将有一个`getUrl(Article $article)`方法将使用路由器实例（您通过注入`__construct`或单独的 setter 方法）根据 的属性生成 Url`$article`并返回它。

此方法将确保您的业务逻辑不会污染视图或控制器层。

请务必阅读[服务容器文档](http://symfony.com/doc/current/book/service_container.html)。

# java - mysql jdbc通信异常

> ID：15433142
> 
> 赞同：1
> 
> 时间：2013-03-15T12:59:12.657
> 
> 标签：java, mysql, sockets, jdbc

我有一个 Java 应用程序，它最初从我的 MYSQL数据库**中读取 30 万条数据。**然后它使用带有**newFixedThreadPool size=20的****ExecutorService****调用 API**。从 API 获得响应后，它会将响应插入到我的数据库中。前 2000 行（附近）工作正常。之后我收到如下错误。

 ****> SQLError-com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：由于无法建立套接字的客户端部分，驱动程序无法创建连接。
> 
> 这通常是由操作系统强加的套接字数量限制引起的。此限制通常是可配置的。
> 
> 对于基于 Unix 的平台，请参阅“ulimit”命令的手册页。可能还需要重新配置内核或系统。
> 
> 对于基于 Windows 的平台，请参阅 Microsoft 知识库文章 196271 (Q196271)。

任何人都可以帮我解决这个问题吗？****

# c# - MVC4 无效的日期时间值

> ID：15433151
> 
> 赞同：2
> 
> 时间：2013-03-15T12:59:56.170
> 
> 标签：c#, jquery, asp.net-mvc

我几乎尝试了我在互联网上阅读的所有内容，在这个网站上（web.config 中的全球化文化，在我的模型中添加的 DisplayFormat，......）但我没有找到我的答案。

我的网络应用程序允许用户通过提供一些信息来创建人员。这些信息之一是开始日期，它是一个 DateTime 值。我正在使用 jQuery UI 日期选择器来允许通过日历选择日期。当我选择我的日期（实际上是一天大于 12 的日期）时，应用程序会向我显示一条验证错误消息。例如，如果我选择今天的日期，则会出现：值 '03/15/2013' 对于 StartDate 无效。

我的观点 ：

```
 @model BuSIMaterial.Models.Person

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Person</legend>

        <div class="editor-label">
            First name : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            Last name : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            National number : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.NumNat, new { maxlength = 11 })
            @Html.ValidationMessageFor(model => model.NumNat)
        </div>

        <div class="editor-label">
            Start date : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.StartDate, new {@class = "datepicker" })
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>

        <div class="editor-label">
            End date : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker" })
            @Html.ValidationMessageFor(model => model.EndDate)
        </div>

        <div class="editor-label">
            Distance House - Work (km) : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.HouseToWorkKilometers)
        </div>

        <div class="editor-label">
            Category : 
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one ...")
            @Html.ValidationMessageFor(model => model.Id_ProductPackageCategory) <a href = "../ProductPackageCategory/Create">Add a new category?</a>
        </div>

        <div class="editor-label">
            Upgrade? : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Upgrade)
            @Html.ValidationMessageFor(model => model.Upgrade)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")
    <script type="text/javascript">
        $(document).ready(function () {
            $(".datepicker").datepicker({

            });
        });
    </script>
} 
```

我的人模型中的开始日期：

```
[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.DateTime StartDate
    {
        get
        {
            return _StartDate;
        }
        set
        {
            OnStartDateChanging(value);
            ReportPropertyChanging("StartDate");
            _StartDate = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("StartDate");
            OnStartDateChanged();
        }
    }
    private global::System.DateTime _StartDate;
    partial void OnStartDateChanging(global::System.DateTime value);
    partial void OnStartDateChanged(); 
```

有没有人有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:22:32.920

首先，您似乎将原始实体传递给您的视图，这不是一个好主意。MVC 中的正确方法是创建一个**视图模型**，其中包含视图所需的所有信息，仅此而已。

现在解决您的问题：

> 当我选择我的日期（**实际上是一天大于 12 的日期**）时，应用程序会向我显示一条验证错误消息

这给我的印象是这是一个文化冲突问题，您的 MVC 应用程序期望日期`dd/mm/yyyy`为`mm/dd/yyyy`. MVC 中的默认模型绑定器将使用当前线程的区域性 -*如果您确定*线程使用正确的区域性，那么我的猜测是它不喜欢您只传递 a`Date`而不是 a的事实`DateTime`，虽然不太可能。

通常最好的方法是使用与文化无关的标准化日期格式，即[UTC 格式](http://en.wikipedia.org/wiki/ISO_8601)，这样可以避免任何转换问题。

# angularjs - 如何防止 ng-src 在数据到达之前加载图像？

> ID：15433153
> 
> 赞同：28
> 
> 时间：2013-03-15T13:00:08.977
> 
> 标签：angularjs

HTML：

```
 <img ng-src="{{plugins.filesPath.album_images.image}}{{album.cover_image}}" alt="{{album.title}}" /> 
```

运行应用程序时，它显示错误：

```
GET http://url.com/myApp/files/album_images/image/ 403 (Forbidden) 
```

“ [http://url.com/myApp/files/album_images/image/](http://url.com/myApp/files/album_images/image/) ” 是 {{plugins.filesPath.album_images.image}} 的值。

它显示错误，因为它会在所有数据到达之前加载图像..

如何防止控制台中出现此错误？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-07-02T10:34:59.380

尝试使用条件模式`condition && true || false`

因此修改`ng-src`属性如下：

```
<img ng-src="{{ album && plugins.filesPath.album_images.image + album.cover_image || '' }}" alt="{{album.title}}" /> 
```

通过此更改，`src`属性的内容在数据到达之前为空。

*来源：* [根据模型数据有条件地改变img src](https://stackoverflow.com/questions/13999659/conditionally-change-img-src-based-on-model-data/13999837#13999837)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-29T14:24:43.737

## 2015 年 3 月更新

使用 Angular 1.3.x 应该使大多数自定义数据检查过时，因为[$interpolate 现在包含一个标志“allOrNothing”](https://code.angularjs.org/1.3.0/docs/api/ng/service/$interpolate)，它将在实际解析表达式之前等待所有绑定不是未定义的东西。

所以在这种情况下，`ng-src`只会插入`src`一次属性`album_images.image` **并且** `album.cover_image`都准备好。尽管如此，根据您的设置，`album.title`可能还没有准备好，所以如果您想等待，您仍然可以使用该`isDataAvailable()`方法。

## 原答案：

既然有`ng-if`，可以试试

`<img ng-if="isDataAvailable()" ng-src="{{plugins.filesPath.album_images.image}}{{album.cover_image}}" alt="{{album.title}}" />`

```
$scope.isDataAvailable = function(){
    // do your data checks here and
    // return true;
} 
```

这样，图像只会在`isDataAvailable`返回后立即附加到 DOM，`true`然后`ng-src`才会启动并尝试获取文件。

不过，我很确定，`403 (Forbidden)`这与您服务器上的目录/文件访问限制有些相关。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T13:52:24.657

我相信 ng-src 等待它的值改变以将 src 值应用于元素。你有没有尝试改变

`<img ng-src="{{plugins.filesPath.album_images.image}}{{album.cover_image}}"`

至

`<img ng-src="{{plugins.filesPath.album_images.image + album.cover_image}}"`?

**编辑**-*修改后的答案*

由于 ng-src 等待 {{}} 中的信息改变，它无法知道它的每个方面是否都准备好了。我可以想到两种可能的解决方案：

a) 创建一个`url_when_ready()`函数，将字符串作为参数并将它们连接起来，仅在定义了所有字符串时才返回一个值。然后做

`ng-src="{{url_when_ready([plugins.filesPath.album_images.image, album.cover_image])}}`

b) 创建一个模型 $scope.album.cover_image_full 当 $scope.album.cover_image 准备好时更新，并将其用作 ng-src 值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T07:00:58.180

像其他人一样，您始终可以在图像完全加载到页面上之前显示加载标志。这是一个包含演示[的小提琴。](http://jsfiddle.net/mayankcpdixit/XPGXh/1)您可以在加载之前在背景中使用不同的图像`.css('background-image','url('+ url_link_var +')');`

这是完成并显示在[Fiddle](http://jsfiddle.net/mayankcpdixit/XPGXh/1/)中。

# asp.net-mvc - Url.Action 与 RouteValueDictionary 与协议

> ID：15433161
> 
> 赞同：17
> 
> 时间：2013-03-15T13:00:18.343
> 
> 标签：asp.net-mvc

看了一段时间，觉得自己很傻，想多看几眼。。

我需要生成一个完整的 URL，（例如`http://www.domain.com/controller/action?a=1&b=2`），通常我只是[`Url.Action`](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action(v=vs.108).aspx)通过指定协议来毫无问题地做到这一点：

```
var url = Url.Action("Action", "Controller", new { a = 1, b = 2 }, "http"); 
```

我已经开始整理一个返回 a 的类，`RouteValueDictionary`以使这些匿名对象消失。但是，我无法让它与助手一起工作。

```
var x = Url.Action("Action", "Controller", new RouteValueDictionary(new { a = 1, b = 2 }), "http");
// "http://127.0.0.1/Controller/Action?Count=2&Keys=System.Collections.Generic.Dictionary%602%2BKeyCollection%5BSystem.String%2CSystem.Object%5D&Values=System.Collections.Generic.Dictionary%602%2BValueCollection%5BSystem.String%2CSystem.Object%5D",

var y = Url.Action("Action", "Controller", new { a = 1, b = 2 }, "http");
// "http://127.0.0.1/Controller/Action?a=1&b=2" 
```

非常感谢任何导致 facepalm 的指针:)

**更新：**

最好澄清一下，在上面的示例中，我需要让 ' `X`' 变量正常工作，因为 RouteValueDictionary 是在代码的其他位置创建的。假设 RouteValueDictionary 是正确的。

我只是不明白为什么这适用于匿名对象，但是包裹在同一对象中的同一对象包裹在 a`RouteValueDictionary`中使助手吓坏了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T13:56:38.793

有趣的是，您的具体示例似乎与将“对象”作为属性而不是 RouteValueDictionary 的方法签名相匹配。因此，它只是 ToString() 输出类型名，而不是正确序列化 RouteValueDictionary

```
 var x = Url.Action("Index", "Home", new RouteValueDictionary(new { a = 1, b = 2 }), "http", string.Empty); 
```

注意最后的**“string.Empty”**。

这足以强制代码使用不同的重载，它接受 RouteValueDictionary 并因此正确序列化。

```
// http://localhost:55110/?a=1&b=2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T13:10:28.237

您正在使用的重载需要类型“object”作为您传递`RouteValueDictionary`. 出于某种原因，这导致了问题，可能与 .ToString() 有关？使用接受 a 的重载，`RouteValueDictionary`这应该可以工作。

要对此进行测试，请添加一个 hostName 参数来选择如下所示的重载：

![正确的过载](../Images/65fabf0a073d15d9f50f62f8e3dd6214.png)

**编辑**

您可以在您的项目中使用此扩展来将所需的重载添加到 Url.Action。在内部，它将解析并从请求中添加主机名。

```
public static string Action
    (this UrlHelper helper, string action, 
     string controller, RouteValueDictionary routeValues, string protocol)
{
     string hostName = helper.RequestContext.HttpContext.Request.Url.Host;
     return helper.Action(action, controller, routeValues, protocol, hostName);
} 
```

# mysql - IF 语句中变量附近的 SQL 语法错误

> ID：15433163
> 
> 赞同：0
> 
> 时间：2013-03-15T13:00:19.083
> 
> 标签：mysql, function, if-statement

我是 MySQL 新手，我得到：

> IF 语句的“IsTrue=1 THEN”附近的 SQL 语法错误

MySQL函数是这样的：

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` FUNCTION `GetABCD`(Var1 int, Var2 int,Var3 Int, IsTrue int) RETURNS decimal(24,14)
Return (

IF IsTrue=1 THEN

Select  sum(A) E from  e_pnfi 
where ID = (select ID from Main where  CenterID=Var1 
 and YourID=(Select YourID from year Where Year=Var2)) and res in (select highid from industry where mediumid=Var3)

ELSE

Select  sum(A) E from  e_pnfi 
where ID = (select ID from Main where  CenterID=Var1 
 and YourID=(Select YourID from year Where Year=Var2)) and res in (select highid from industry where highid=Var3)

END IF;

) 
```

我哪里错了？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:01:36.460

使用`BEGIN`和`END`声明，

```
DELIMITER $$
CREATE FUNCTION `GetABCD`(Var1 int, Var2 int,Var3 Int, IsTrue int) 
RETURNS decimal(24,14)
BEGIN

    DECLARE retVal DECIMAL(24,14);
    IF IsTrue=1 THEN

        SET retVal = 
            (
            SELECT  SUM(A) E 
            FROM    e_pnfi 
            WHERE   ID IN (SELECT ID FROM Main WHERE  CenterID = Var1) AND 
                    YourID IN (SELECT YourID FROM year WHERE Year = Var2) AND 
                    res IN (SELECT highid FROM industry WHERE mediumid = Var3)
        );

    ELSE

        SET retVal =
        (
            SELECT  sum(A) E 
            FROM  e_pnfi 
            WHERE   ID IN (SELECT ID FROM Main WHERE  CenterID = Var1) AND 
                    YourID IN (SELECT YourID FROM year WHERE Year = Var2) AND 
                    res in (SELECT highid FROM industry WHERE highid = Var3)
        );

    END IF;

    RETURN retVal;

END $$
DELIMITER ; 
```

# javascript - 检查所有在 wamp 中不起作用的复选框

> ID：15433164
> 
> 赞同：0
> 
> 时间：2013-03-15T13:00:19.710
> 
> 标签：javascript, html

我正在寻找检查所有复选框并找到答案，但是当我将代码从小提琴演示复制到普通的 html 页面并在 WAMP 服务器中执行代码时，它不起作用。

这是代码：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
     <head>
      <title> check all</title>
      <script type="text/javascript">

    $('.chk_boxes').click(function(){
    var chk = $(this).attr('checked')?true:false;
    $('.chk_boxes1').attr('checked',chk);
    });

    </script>

     </head>
     <body>

         <form>
           <table>
                 <tr class="table_head_seperator">
                    <td class="grid_info" width="32px" bgcolor="#f6f6f6"><input type="checkbox" class="chk_boxes1" name="to_delete[<?PHP echo $entry['id'] ?>]"  /></td>
                    <td class="grid_info" width="160px" bgcolor="#eeeeee"><span class="country_name">user name</span></td>

                    <td class="grid_info" width="130px" bgcolor="#eeeeee"><span class="country_name">date created</span></td>
                    <td class="grid_info" width="100px" bgcolor="#f6f6f6"><span class="country_name">username</span></td>
    </tr>
               <tr class="table_head_seperator">
                    <td class="grid_info" width="32px" bgcolor="#f6f6f6"><input type="checkbox" class="chk_boxes1" name="to_delete[<?PHP echo $entry['id'] ?>]"  /></td>
                    <td class="grid_info" width="160px" bgcolor="#eeeeee"><span class="country_name">user name</span></td>

                    <td class="grid_info" width="130px" bgcolor="#eeeeee"><span class="country_name">date created</span></td>
                    <td class="grid_info" width="100px" bgcolor="#f6f6f6"><span class="country_name">username</span></td>
    </tr><tr class="table_head_seperator">
                    <td class="grid_info" width="32px" bgcolor="#f6f6f6"><input type="checkbox" class="chk_boxes1" name="to_delete[<?PHP echo $entry['id'] ?>]"  /></td>
                    <td class="grid_info" width="160px" bgcolor="#eeeeee"><span class="country_name">user name</span></td>

                    <td class="grid_info" width="130px" bgcolor="#eeeeee"><span class="country_name">date created</span></td>
                    <td class="grid_info" width="100px" bgcolor="#f6f6f6"><span class="country_name">username</span></td>
    </tr>
             </table>

    <input type="checkbox" class="chk_boxes" label="check all"  />check all
    </form>
     </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:02:20.957

您需要包含一个 jquery 库才能使其正常工作

包括在之后`</title>`

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

例子：

```
<title> check all</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(e) {

$('.chk_boxes').on('click',function(){

    var chk = false;
    if($(this).is(':checked'))
    {
        chk = true;
    }
    $('.chk_boxes1').attr('checked',chk);
});

});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:11:23.917

这似乎更简单：

```
$('.chk_boxes').click(function(){
    $('.chk_boxes1').prop('checked',$(this).prop('checked'));
}); 
```

请注意， attr 与 prop 不同

编辑：现在您可能还想管理全部点击:(还增强了处理通过代码或其他方式设置的问题...使用更改而不是点击事件。

```
$('.chk_boxes').change(function () {
    $('.chk_boxes1').prop('checked', $(this).prop('checked'));
});
$('.chk_boxes1').change(function () {
        $('.chk_boxes').prop('checked', ($('.chk_boxes1').length == $('.chk_boxes1:checked').length) );
}); 
```

# snmp - 从 ObjectIdentifier [SharpSNMPLib] 获取 MibModule 对象或实体

> ID：15433165
> 
> 赞同：0
> 
> 时间：2013-03-15T13:00:25.553
> 
> 标签：snmp, mib, sharp-snmp

我做了一个 Walker 请求网络设备一些信息。

```
IPEndPoint receiver = new IPEndPoint(ip, 161);

IList<Variable> result = new List<Variable>();

WalkMode mode = WalkMode.WithinSubtree;

Messenger.Walk(VersionCode.V1, receiver, new OctetString(community), new ObjectIdentifier("1.3"), result, timeout, mode); 
```

该代码在您的设备上完美地返回了所有 OID，但我需要将这些名称转换为 OID。我看到了进行此翻译的示例，但它使用 MIB 的编译，我将从加载的 MibModule 方法 Parser.ParseToModules (...) 的列表中进行此翻译。

我如何链接这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:55:28.760

`var modules = Parser.ParseToModules(docs, out errors, out warnings); var assembler = new Assembler(); assembler.Assemble(modules);`

您可以使用`Assembler`类来进一步处理模块。`Assembler.Tree`将为您提供一棵树 ( `IObjectTree`)，可用于执行 OID/名称转换。

# java - Hibernate 找不到默认提供程序

> ID：15433167
> 
> 赞同：2
> 
> 时间：2013-03-15T13:00:33.003
> 
> 标签：java, hibernate, maven, bean-validation

得到错误：

```
org.hibernate.HibernateException: Error applying BeanValidation relational constraints
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:219)
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.integrate(BeanValidationIntegrator.java:126)
at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:301)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)

Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:208)
... 207 more
Caused by: org.hibernate.HibernateException: Unable to build the default ValidatorFactory
at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:524)
at org.hibernate.cfg.beanvalidation.TypeSafeActivator.applyDDL(TypeSafeActivator.java:119)
    ... 212 more
Caused by: javax.validation.ValidationException: Unable to find a default provider
at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:264)
at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:111)
at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:521) 
```

Hibernate 相关的 Maven 配置：

```
<dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.5.SP1</version>
        <scope>compile</scope>
        <exclusions> 
            <exclusion>
                <groupId>dom4j</groupId>
                <artifactId>dom4j</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>net.sourceforge.jtds</groupId>
        <artifactId>jtds</artifactId>
        <version>1.2.4</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
        <scope>compile</scope>
        <exclusions> 
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator-annotation-processor</artifactId>
        <version>4.3.1.Final</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.google.code.findbugs</groupId>
        <artifactId>jsr305</artifactId>
        <version>1.3.9</version>
        <scope>compile</scope>
    </dependency> 
```

我发现的建议是：

1.  使用休眠 4+
2.  用户休眠验证 4+
3.  添加休眠验证库
4.  添加 jsr305（imo 没关系）
5.  添加 javax 验证库
6.  添加休眠验证器注释处理器

我有这些，但仍然出现错误。

编辑：

展示我如何使用我的休眠模式。

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">net.sourceforge.jtds.jdbc.Driver</property>
        <property name="hibernate.connection.pool_size">5</property>
        <property name="show_sql">false</property>
        <property name="dialect">org.hibernate.dialect.SQLServerDialect</property>
        <property name="hibernate.current_session_context_class">thread</property>

        <mapping class="com.foo.bar.MyClass />
    </session-factory>
</hibernate-configuration> 
```

建造：

```
private static SessionFactory buildSessionFactory() {

    try {
        // Create the SessionFactory from hibernate.cfg.xml
        Configuration configuration = new Configuration();
        configuration.configure();

        configuration.setNamingStrategy(ImprovedNamingStrategy.INSTANCE); // also other configuration changes made here

        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();

        return configuration.buildSessionFactory(serviceRegistry); // this line gives the error

    } catch (Throwable ex) {
        // Make sure you log the exception, as it might be swallowed
        log.error("Initial SessionFactory creation failed.", ex);
        throw new ExceptionInInitializerError(ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:11:51.447

关于你的6点：

*   使用休眠 4+
*   用户休眠验证 4+

Hibernate Validator 4.x 是 Bean Validation 的参考实现。这是使用正确的版本。它集成在 Hibernate 4 中。所以版本看起来是正确的

*   添加休眠验证库

是的，这是必需的，您可以通过添加*hibernate-validator*依赖项来做到这一点。

*   添加 jsr305（imo 没关系）

不相关的。甚至不确定那是什么 JSR。

*   添加 javax 验证库

你明确地这样做，但它们也是对*hibernate-validator*的传递依赖，所以你可以得到它们。

*   添加休眠验证器注释处理器

不，不需要/不相关

那么为什么它不起作用呢？我认为要回答这个问题，我们需要更多信息。该异常表明*javax.validation.Validation*无法查看/加载 Hibernate Validator Bean Validation 提供程序。您是否在受限的课堂加载环境中工作？您如何使用所有这些依赖项？

# c# - 自定义404页面查找链接

> ID：15433171
> 
> 赞同：0
> 
> 时间：2013-03-15T13:00:41.960
> 
> 标签：c#, asp.net, http-status-code-404

我希望创建一个可以检索页面 URL 的 404 页面。我曾尝试使用 UrlReferer，但这返回了 null。如果我能找到 URL，我可以创建相关的重定向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:03:36.043

如果您在 web.config 中使用[响应重写](http://msdn.microsoft.com/en-us/library/system.web.configuration.customerrorssection.redirectmode.aspx)，您将位于正确的 URL 上：

```
<customErrors mode="On" redirectMode="ResponseRewrite" 
    defaultRedirect="~/content/Error.aspx"> 
```

# r - 在 R/R-Studio 中加载和保存单个对象到工作区

> ID：15433172
> 
> 赞同：8
> 
> 时间：2013-03-15T13:00:45.953
> 
> 标签：r

我喜欢使用工作空间的想法。到目前为止，我总是保存整个工作区并将它们完全加载到现有项目中。但很多时候我只需要来自指定工作区的单个对象。是否有可能从另一个工作区单独加载它们。

此外，有时将对象添加到已经存在的工作区会很好。想象一下，例如，您有五个巨大的脚本，它们分别具有巨大的工作区，并且您不想将它们混合在一起以将它们全部放在一个工作区中。因此，现在您只想将五个工作空间中每一个的干净结果存储到另一个干净的工作空间......

所以这些是基本任务：

```
# save entire workspace
save.image("mypath/myworkspace")

# load entire workspace
load ("mypath/myworkspace")

# save a single object (or several)
save (myobject,file="mypath/myworkspace")

# load a single object from an existing workspace
?

# add a single object to an existing workspace
? 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T21:42:35.337

RStudio 称您为`globalenv()`“工作区”

您可以将 .RData 文件加载到您的环境以外的环境中`globalenv()`

```
x <- 1; y <- 2 #First, create some objects
save.image()  # save workspace to disk
rm(list=ls()) # remove everything from workspace
tmp.env <- new.env() # create a temporary environment
load(".RData", envir=tmp.env) # load workspace into temporary environment
x <- get("x", pos=tmp.env) # get the objects you need into your globalenv()
#x <- tmp.env$x # equivalent to previous line
rm(tmp.env) # remove the temporary environment to free up memory 
```

一旦一个对象在你的`globalenv()`中，它将显示在 RStudio 的“工作区”选项卡中。

同样，您可以将对象分配到环境中。

```
tmp.env <- new.env()
load(".RData", envir=tmp.env) # load workspace into temporary environment
assign("z", 10, pos=tmp.env)
#tmp.env$z <- 10 # equivalent to previous line 
```

`tmp.env`现在，如果您知道`save`它们的位置，您可以保存所有对象。

```
save(list=ls(all.names=TRUE, pos=tmp.env), envir=tmp.env, file="test.RData")
rm(tmp.env) 
```

您已经有效地将对象 , 添加`z`到存储在 test.RData 中的工作区。

```
rm(list=ls(all.names=TRUE))
load("test.RData")

> ls()
[1] "x"       "y"       "z" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:42:01.790

`# load a single object from an existing workspace`

您无法从工作区恢复一个对象。因为`save.image(".Rdata")`只是一个简化的命令`save(list = ls(all=TRUE), file= ".RData")`。当您使用`load`命令时，您可以从该列表中恢复所有对象。

但是，您可以保存合并到列表中的几个对象，然后加载它们。例如：

```
library(ggplot2)
c <- ggplot(mtcars, aes(factor(cyl)))
d<-c + geom_bar(width=.5)  # create two graphs 
c<- c + geom_bar()
save(list=c("c","d"),file="myobjects") # save them (notice that objects are accessed as strings)
rm(list = ls()) # remove from the memory
load(file="myobjects") # load again 
```

你现在有你的对象（地块） c 和 d 回来了。这回答了你的最后一个问题。

现在，假设您已经有对象`c`并`d`在文件中`myobjects`，并且您想向该文件添加更多对象。不加载它是不可能的，因为`save`和`saveRDS`存储压缩的数据（如果`save`你得到 tar 包并且`saveRDS`你可以选择压缩方法）。如您所知，如果不解包，您无法将数据添加到已归档的文件中。我看到的唯一解决方案是这个。假设我们要添加`a`和`b`。`myobjects`

```
library(ggplot2)
a<-qplot(rnorm(100))
b<-qplot(rnorm(200))
list=ls()
list<-list[-which(list%in%c("a","b"))] # list all variables except the one you want to save
rm(list=list) # we're deleting all except a and b
load(file="myobjects") # loading or unpacking objects c and d
save(list=ls(),file="myobjects") # saving objects a,b,c,d in myobjects file 
```

这是一个粗略的解决方法，但是如果您考虑一下，在 R 中我们得到了数据或绘图对象（出于某种原因，我使用了 ggplot2 示例）。数据可以保存为`save.table`，图可以存储到 grobs 列表（包`gridExtra`），然后保存为`save`.

# android - 创建此类型的日期选择器

> ID：15433175
> 
> 赞同：0
> 
> 时间：2013-03-15T13:00:47.570
> 
> 标签：android, datepicker

[http://developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

我想在 android 中创建这种类型的日期选择器。请给点提示。我没有到达那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:10:01.707

在 Honeycomb 或更高版本中，您可以设置此类日期选择器。创建一个新的 Android 项目，目标为 Android 3.0。修改 main.xml 以添加 DatePicker：

```
<?xml version="1.0" encoding="UTF-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
   <TextView android:id="@+id/dateDisplay"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:paddingLeft="4dip"
       android:text="@string/hello"/>
      <Button android:id="@+id/pickDate"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:paddingLeft="4dip"
       android:text="@string/hello"/> 
```

**DatePickerExample.java**

```
 public class DatePickerExample extends Activity {
    private TextView mDateDisplay;
    private int mYear;
    private int mMonth;
    private int mDay;
    static final int DATE_DIALOG_ID = 1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.date_picker);
            mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
            Button pickDate = (Button) findViewById(R.id.pickDate);
            pickDate.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                            showDialog(DATE_DIALOG_ID);
                    }
            });
            final Calendar c = Calendar.getInstance();
            mYear = c.get(Calendar.YEAR);
            mMonth = c.get(Calendar.MONTH);
            mDay = c.get(Calendar.DAY_OF_MONTH);
            updateDisplay();
    }
    @Override
    protected Dialog onCreateDialog(int id) {
            switch (id) {
            case DATE_DIALOG_ID:
                    return new DatePickerDialog(this,
                            mDateSetListener,
                            mYear, mMonth, mDay);
            }
            return null;
    }
    protected void onPrepareDialog(int id, Dialog dialog) {
            switch (id) {
            case DATE_DIALOG_ID:
                    ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
                    break;
            }
    }   
    private void updateDisplay() {
            mDateDisplay.setText(
                    new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mMonth + 1).append("-")
                    .append(mDay).append("-")
                    .append(mYear).append(" "));
    }
    private DatePickerDialog.OnDateSetListener mDateSetListener =
            new DatePickerDialog.OnDateSetListener() {
            public void onDateSet(DatePicker view, int year, int monthOfYear,
                            int dayOfMonth) {
                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();
            }
    };} 
```

![在此处输入图像描述](../Images/86e9f01d8b6599e54f1c07d124f99fe1.png) ![在此处输入图像描述](../Images/86b3e2040a83a7eba234d6b966eaa060.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:04:02.053

您在问题中提供的链接已经有一个示例。如果你想要一个替代品试试这个。

```
public class pickerdate extends Activity {
/** Called when the activity is first created. */
  private TextView mDateDisplay;
    private Button mPickDate;
    private int mYear;
    private int mMonth;
    private int mDay;

    static final int DATE_DIALOG_ID = 0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
        mPickDate = (Button) findViewById(R.id.pickDate);

        mPickDate.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog(DATE_DIALOG_ID);
            }
        });

        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);

        updateDisplay();
    }
    private void updateDisplay() {
        mDateDisplay.setText(
            new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mMonth + 1).append("-")
                    .append(mDay).append("-")
                    .append(mYear).append(" "));
    }
    private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year, 
                                  int monthOfYear, int dayOfMonth) {
                mYear = year;
                mMonth = monthOfYear;
                mDay = dayOfMonth;
                updateDisplay();
            }
        };
        @Override
        protected Dialog onCreateDialog(int id) {
            switch (id) {
            case DATE_DIALOG_ID:
                return new DatePickerDialog(this,
                            mDateSetListener,
                            mYear, mMonth, mDay);
            }
            return null;
        }
  } 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical">
<TextView android:id="@+id/dateDisplay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""/>
<Button android:id="@+id/pickDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Date Picker"/> 
```

# jsf - 在将任何来源的句子复制粘贴到 JSF 文本框或文本区域时处理特殊字符

> ID：15433179
> 
> 赞同：1
> 
> 时间：2013-03-15T13:00:53.040
> 
> 标签：jsf, character-encoding, copy, paste

我在尝试将 word 或 Outlook 中的内容复制粘贴到 JSF textarea 时遇到一个问题。我在查看特定的 aphostrohe(') 时遇到问题。其他一些符号正在被替换。我在应用程序级别有 ISO-8859-1 的字符编码。我在文本区域所在的特定页面中包含了以下代码。符号仍然在那里。

我尝试添加以下编码以从 bean 级别对其进行编码。此代码进行编码，我可以在文本中看到撇号（'）。但是如果我插入相同的文本，其他一些符号就会被插入到数据库中。在hibernate中有什么需要改变的吗？

新字符串（text.getBytes（“ISO-8859-1”），“UTF-8”）。

请分享解决此问题的任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:59:29.883

> *我在应用程序级别有 ISO-8859-1 的字符编码。*

有你的问题。ISO-8859-1 未涵盖的任何字符都无法更改为 ISO-8859-1 涵盖的字符。至于您带引号的特殊情况，在维基百科中您可以找到[所有引号字符](http://en.wikipedia.org/wiki/Quotation_mark_glyphs#Quotation_marks_in_Unicode)的列表。`U+00FF`ISO-8859-1 不涵盖超出范围的那些。Outlook、Word 等 Microsoft 应用程序使用范围内的“弯引号”，因此在使用 ISO-8859-1 编码时`U+2xxx`会显示为[Mojibake 。](http://en.wikipedia.org/wiki/Mojibake)

ISO-8859-1 是史前时期的一种相当劣质的字符编码，[仅支持 255 个字符](http://en.wikipedia.org/wiki/ISO_8859-1#Codepage_layout)，绝对没有为统治世界做好准备。世界知道的字符比 ISO-8859-1 所能涵盖的要多得多*。*您应该使用基于 Unicode 的字符编码，例如 UTF-8。Unicode 定义并支持[超过 100 万个字符](http://en.wikipedia.org/wiki/UTF-8#Codepage_layout)。

您应该更改您的应用程序以使用 UTF-8 而不是 ISO-8859-1。请注意，JSF 2.x 默认已经支持并使用 UTF-8。因此，您的具体问题表明您正在使用 JSF 1.x，或者您已经手动更改了它。您不应该这样做并将所有内容都设置为 UTF-8，包括数据库表。可以在此博客中找到一些有用的提示：[Unicode - 如何正确使用字符？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T07:58:40.503

您需要在服务器端转换为 UNICODE，例如，如果您使用 glassfish 将参数编码 default-charset="UTF-8" 条目添加到 glassfish-web.xml。为我工作。

`<parameter-encoding default-charset="UTF-8" />`

# javascript - 在控制台使用 jQuery？

> ID：15433185
> 
> 赞同：5
> 
> 时间：2013-03-15T13:01:23.643
> 
> 标签：javascript, jquery, console, read-eval-print-loop

我正在学习有关 jQuery 的更多信息，并希望在 Chrome 中的 JavaScript 控制台上以交互方式使用它。那可能吗？我设想这样的事情，但它不起作用：

```
> use('jquery.js')
jquery loaded
> $("span").html("Hello World!") 
```

这将导致`"Hello World!"`在跨度标签之间插入并显示。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-15T13:08:56.783

没有“使用”，所以它当然行不通。

您可以将其附加到页面。

```
var scr = document.createElement("script");
scr.src = "http://code.jquery.com/jquery-1.9.1.min.js";
document.body.appendChild(scr); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-15T13:03:36.213

如果您在打开控制台的页面中包含 jQuery，您应该可以在控制台中自由使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T13:06:16.917

最简单的方法是编辑页面标题并添加一个`<script>`指向[jQuery](http://code.jquery.com/jquery-1.9.1.min.js)的标记。然后您将能够在控制台中执行代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T13:07:09.100

没关系。想通了 :-) 我创建了一个简单的 HTML 文件来加载 jQuery，然后进入控制台。这对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-18T06:22:32.280

如果您想从控制台频繁使用 jQuery，您可以轻松编写用户脚本。首先，如果您使用的是 Chrome，请安装 Tampermonkey；如果您使用的是 Firefox，请安装 Greasemonkey。用这样的使用函数编写一个简单的用户脚本：

```
var scripts = []
function use(libname){
var src;
if(scripts.indexOf(libname)==-1){
switch(libname.toLowerCase()){  
case "jquery":
src = "http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js";
break;
case "angularjs":
src = "http://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js";
break;
}
}else{
console.log("Library already in use.");
return;
}
if(src){
scripts.append(libname);
var script = document.createElement("script");
script.src = src;
document.body.appendChild(scr);
}else{
console.log("Invalid Library.");
return;
}
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-15T13:36:47.170

您可能想查看[http://jsfiddle.net/](http://jsfiddle.net/)或[http://codepen.io/pen/](http://codepen.io/pen/)

您仍然可以通过 chrome 控制台访问您创建的脚本，如果您有任何问题，将更容易与他人共享。

# jquery - jQuery 和 jQuery UI 升级打破了标签

> ID：15433186
> 
> 赞同：3
> 
> 时间：2013-03-15T13:01:31.850
> 
> 标签：jquery, jquery-ui, typo3, jquery-ui-tabs

我有一个使用 jQuery UI Tabs 小部件的网站，它适用于“ye old versions”，jQuery: 1.5.1, jQuery UI: 1.8.4。

对站点进行其他更改/升级，我想移动到这两个包的更新版本，通过逐步升级到每个包的“下一个主要版本”来实现它。无需更改我自己的几行 js 代码，我就可以使用 jQuery 1.8.3 和 jQuery UI 1.8.24，一切仍然正常。

将 jQuery 升级到 1.9.1，单击选项卡似乎会触发页面的重新加载，而不是切换选项卡。所有选项卡都是静态的，所以不应该有任何 ajax 问题。

页面的 URL（它是 Typo3 安装的一部分）具有以下格式：

```
https://server.some.where/?id=49&project_id=13&action_type=display 
```

单击选项卡时，会生成基本 href + #tab-X 的 HTTP GET：

```
https://server.some.where/#tabs-2 
```

由于早期版本的 jQuery 没有启动 HTTP GET，而是愉快地切换选项卡，所以我很难过。阅读相关 jQuery 版本的变更日志，我看不到任何匹配的内容，但那可能只是我...... :-)

升级 jQuery UI (1.9.2/1.10.2) 会产生另一个问题 - 所有选项卡都是从头开始打开的（所有 div 一个接一个地显示）。

相关HTML：

> ```
> <div id="display-tabs">
>   <ul class="tabs">
>     <li><a href="#tabs-1">...</a></li>
>     <li><a href="#tabs-2">...</a></li>
>     <li><a href="#tabs-3">...</a></li>
>   </ul>
>   <div id="tabs-1">...</div>
>   <div id="tabs-2">...</div>
>   <div id="tabs-3">...</div>
> </div> 
> ```

激活标签小部件非常简单：

> $('#display-tabs').tabs();

jQuery 是从 Google 获取的，看起来也不错：

> ```
> <link rel="stylesheet" media="screen" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/themes/smoothness/jquery-ui.css" />
> <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
> <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js"></script> 
> ```

我暂时在测试站点上消除了 jQuery 的大多数其他用途，但这些问题似乎仍然存在。欢迎任何想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:48:22.547

这个问题是一个已知的问题，但我花了一段时间来连接这些点并使用正确的搜索词 - 很抱歉！

简而言之，jQuery 1.9 及更高版本将`<base href="URL">`锚点的组合和链接`<a href="#tab-X">`视为**不是**页面本地的链接。这种行为可能比早期版本中发生的更正确，但这种变化破坏了许多建立在依赖基本标签的框架上的网站。我的本地解决方案是在定义选项卡的列表中提供完整链接，如下所示`//$HTTP_HOST/$REQUEST_URI#tab-X`：

有关此问题的更多信息：

*   [jQuery UI 错误 7822](http://bugs.jqueryui.com/ticket/7822)
*   [相当好的解释和一些解决方案](http://tjvantoll.com/2013/02/17/using-jquery-ui-tabs-with-the-base-tag/)

# internet-explorer - IF-MODIFIED-SINCE 与 UNLESS-MODIFIED-SINCE

> ID：15433187
> 
> 赞同：1
> 
> 时间：2013-03-15T13:01:34.940
> 
> 标签：internet-explorer, http, webserver

if-modified-since 和 unless-modified-since（http 标头）有什么区别？我们应该向它发送什么 Web 服务器响应？IE9 正在请求我们不熟悉的 unless-modified-since 标头。

我的大部分研究推动都指向 if-modified-since 标头。我的理解是 unless-modified-since 标头是 IE 特定的。

您可以访问此链接： http: [//imgur.com/am64WuG](http://imgur.com/am64WuG)查看请求标头的屏幕截图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:32:48.907

没有像`Unless-Modified-Since`[[list]](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)这样的 HTTP 标头。这甚至没有意义：为什么只有当资源与您已经知道的版本相同时才需要检索资源？

`If-Modified-Since`仅当浏览器已经知道的版本更新时才用于获取资源。如果它在给定时间后没有被修改，服务器将不会发送它，浏览器将从它的缓存中获取它。

另见`If-Match`和`If-None-Match`。这些是一对更灵活的标头，可用于指示服务器仅基于已存在、不存在或已存在一个或多个特定版本的资源的各种组合执行操作。它们基于资源的`ETag`而不是最后修改的时间戳。[这个问题](https://stackoverflow.com/questions/998791/if-modified-since-vs-if-none-match)有更多关于使用最后修改时间与 etag 的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-14T06:54:22.393

`Unless-Modified-Since`是在HTTP的[范围扩展/功能的](https://en.wikipedia.org/wiki/Byte_serving)[草案中提出的。](https://www.cs.cmu.edu/afs/cs.cmu.edu/academic/class/15847a-s96/web/draft-luotonen-http-url-byterange-02.txt)

根据草案，想法是客户端可以发送`Range`带有`Unless-Modified-Since`标头的请求，并且服务器/缓存将返回范围，除非文件自该日期起被修改，在这种情况下，服务器/缓存将返回整个文件. （这对于说恢复下载可能很有用 - 如果文件没有被修改，它可以继续，如果它会重新启动）

[`If-Range`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Range)是标准替代方案（它是相同的，但也会采用 ETags）。

[`If-Modified-Since`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Modified-Since)与完整请求相关。

[`If-Unmodified-Since`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Unmodified-Since)可以使请求失败，而不是在`If-Range`更改时返回完整文件（会这样做）

# string - \r\n、\r 和 \n 有什么区别？

> ID：15433188
> 
> 赞同：484
> 
> 时间：2013-03-15T13:01:36.040
> 
> 标签：string

和之间`\r\n`的字符串有什么区别？每个字符串如何影响字符串？`\r``\n`

我必须用 替换 和 的出现`\r\n`，`\r`但`\n`我不知道它们在字符串中有何不同...

我知道这`\r`就像按 Enter 并且`\n`是换行。

* * *

## 回答 #1

> 赞同：616
> 
> 时间：2013-03-15T13:03:15.927

*   **`\r`**= CR（回车）→ 在 X 之前的 Mac OS 中用作换行符
*   **`\n`**= LF (Line Feed) → 在 Unix/Mac OS X 中用作换行符
*   **`\r\n`**= CR + LF → 在 Windows 中用作换行符

* * *

## 回答 #2

> 赞同：245
> 
> 时间：2013-03-15T13:04:51.213

所有 3 个都代表一行的结束。但...

*   **`\r`（回车）** → 将光标移动到行首而不前进到下一行
*   **`\n`(换行)** → 将光标向下移动到下一行而不返回到行首*— 在 *nix 环境中`\n`移动到行首。*
*   **`\r\n`（行尾）** →`\r`和的组合`\n`

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-15T13:49:50.047

它们是正常的符号，如“a”或“ю”或任何其他符号。只是（不可见）字符串中的条目。\r 将光标移动到行首。\n 下降一行。

至于你的替换，你还没有指定你使用的语言，所以这里是草图：

`someString.replace("\r\n", "\n").replace("\r", "\n")`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-15T13:04:35.293

回车 ( `\r`) 使光标跳到第一列（行首），而换行符 ( `\n`) 跳到下一行*，也可能*跳到该行的开头。所以要确保在下一行中的第一个位置使用两者。

# c++ - 传递数组在 C++ 中不像在 Java 中那样工作

> ID：15433194
> 
> 赞同：0
> 
> 时间：2013-03-15T13:02:03.053
> 
> 标签：c++, arrays, function

我正在尝试学习来自 Java 的 C++，传递数组让我很困扰。我的主要代码中有这段代码：

```
int *newTry;
    bool won = false;
    while(!won && tries < maxTries){

        newTry = makeTry();

        printw("= %d =",newTry[3]); //seems to give me the 4th value okay...
        refresh();
        won = checkTry(newTry,correctSequence);
        printw("\n");

        tries++;
    } 
```

这些是困扰我的功能。

```
bool checkTry(int attempt[],int correct[])
{

    for(int i =0; i < columns; i++)
    {
        printw(" %d against %d\n", attempt[i],correct[i]); // not values from array!
        refresh();
        if (attempt[i] == correct[i])
        {
            refresh();
        }
   }
   return false; 
```

}

尝试[i] 调用给了我奇怪的价值，这甚至不是我期望或想要的。我猜它是某种指针值或其他东西，但我如何提取值？我已经用谷歌搜索了指针和东西，但是我的大脑并没有理解为什么我没有得到一个值。

完整代码如下。

```
<pre>
    #include <iostream>
    #include <cstdlib>
    #include <time.h>
    #include <ncurses.h>

using namespace std;
int numberOfColors, columns, maxTries;

void SetupGame()
{
    //asks some questions about the game setup.
    printw("How many colours do you want? \n[1-7]");
    refresh();
    numberOfColors = getch()-'0';
    printw("and how many columns?\n");
    refresh();
    columns= getch()-'0';;
    refresh();
    printw("and how many tries do you get?\n");
    refresh();
    maxTries= getch()-'0';;
    refresh();
}
int randomBetween(int min, int max)
{
    int random_integer;
    random_integer =  min + (rand() % (int)(max - min + 1));
    return random_integer;

}
int* randomizeSequence(int colours, int colus)
{
    int randomSequence [colus-1];
    for(int i =0; i < colus; i++)
    {
        randomSequence[i] = randomBetween(0,colours);
        printw("%d",randomSequence[i]);
        refresh();
    }
    printw("\n");
    return randomSequence;
}

void repeatWrite(string str, int times)
{
    const char * c = str.c_str();
    for(int i =0; i<times; i++)
    {
        printw(c);
    }
}
void printStart()
{
    printw (" ");
    repeatWrite("--", columns);
    printw ("\n");
    refresh();
    printw ("| ");
    repeatWrite("¤ ",columns);
    printw("|\n");
    refresh();
    printw(" ");
    repeatWrite("--", columns);
    printw("\n");
    refresh();

}
void printIntColour(int integer)
{
    // TODO (kristoffer#1#): define all colours

    init_pair(1,COLOR_BLACK,COLOR_GREEN);
    attron(COLOR_PAIR(1));
    printw("%d",integer);
    attroff(COLOR_PAIR(1));
}

int* makeTry()
{
    int trySequence[columns-1];
    printw("| ");
    repeatWrite("  ",columns);
    printw("|\r| ");
    noecho();

    for(int i =0; i < columns; i++)
    {
        trySequence[i] = getch()-'0';
        while(trySequence[i] > numberOfColors)
        {
            trySequence[i] = getch()-'0';
        }
        printIntColour(trySequence[i]);
        printw(" ");

    }
    printw("|");
    refresh();
    echo();
    return trySequence;
}
bool checkTry(int attempt[],int correct[])
{

        for(int i =0; i < columns; i++)
        {
            printw(" %d against %d\n", attempt[i],correct[i]);
            refresh();
            if (attempt[i] == correct[i])
            {
                refresh();
            }
       }
       return false;
}

int main(void)
{
    initscr();          //initiate screen from ncurses
    start_color();      //color mode on!

    srand((unsigned)time(0)); // sett the clock time as seed for the random function.

    numberOfColors = 7;
    columns =5;
    maxTries =12;

    int yes =1;
    printw ("Use standard settings 1/0? : \n");
    refresh();

    noecho();
    yes = getch()-'0';
    echo();
    refresh();

    if(yes ==0)
    {
        SetupGame();
    }
    printw("You chose %d colours %d columns %d maxtries\n" ,numberOfColors,columns,maxTries);

    refresh();
    int play =1;
    while(play==1 )
    {
        int *correctSequence = randomizeSequence(numberOfColors,columns);
        int tries = 0;
        printStart();
        bool won = false;
        while(!won && tries < maxTries){
            int *newTry;
            newTry = makeTry();

            printw("= %d =",newTry[3]);
            refresh();
            won = checkTry(newTry,correctSequence);
            printw("\n");

            tries++;
        }
        refresh();
        printw("\nplay again? 1/0\n");
        getch();
    }
    endwin();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:19:42.857

您不想在 makeTry 或 randomizeSequence 中返回数组。而是分配给堆：

```
int *trySequence = new int[columns - 1];
int *randomSequence = new int[colus - 1]; 
```

然后你可以把它当作一个普通的数组。通常从不返回数组，总是返回指针。数组将从堆栈中释放，通常，这意味着它们将一直工作，直到再次使用数组的旧内存空间（很可能在下一个函数调用上）。如果您在代码中的其他任何地方返回数组，请确保您也修复了它。

另外，我不确定您是否需要减去 1。数组的大小恰好是列 - 在第一种情况下为 1，但如果您希望大小与列数相同，则不需要减去 1（请注意，数组中的最后一个元素仍然是在这种情况下，在第 1 列）。因此，根据需要调整数组大小和访问它们的 for 循环（编译器通常不会检查用于访问数组的值是否在范围内）。

在一个不相关的修复中，将该 while 循环中的最后一行代码更改为：

```
play = getch() - '0'; 
```

否则，while 循环只是一个无限循环。最后一点：您可能需要检查所有输入以确保用户没有输入一些荒谬的内容。

# seo - 站长抓取旧网址

> ID：15433201
> 
> 赞同：-1
> 
> 时间：2013-03-15T13:02:21.200
> 
> 标签：seo, google-search-console

我们已于去年 2012 年 12 月更新了网站。之后，我们对所需页面进行了 301 重定向，并避免了旧站点中的一些页面到新站点。

例如：在旧网站中，我们有[http://www.mydomain.com/article/](http://www.mydomain.com/article/)，而在新网站中，我们将其删除。

新站点中的页面不存在/已删除，我们将其重定向到 404 页面。由于`Webmaster -> Crawler Errors -> Not Found`类别报告中的某个时间显示旧 URL 已被编入索引，并且它的**响应代码**是 404。此外，在“**链接自**”部分中显示引用此页面的内部站点链接，当我检查该链接的页面时，它没有找到。

我通过阅读此 google 链接[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=2409439](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=2409439)了解这些错误不会损害我们的 SEO，但我想知道这些错误的确切原因发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:04:30.937

您应该创建一个 XML 站点地图并将其呈现给 Google，以便它知道期望和查找哪些页面。您可以使用网络或其他工具生成这样的站点地图，并且可以通过网站管理员页面将其添加到 Google。

# command-line - 通过 Outlook 从命令行发送电子邮件而无需单击发送

> ID：15433202
> 
> 赞同：21
> 
> 时间：2013-03-15T13:02:24.710
> 
> 标签：command-line, automation, outlook

我需要通过命令行发送电子邮件，而无需任何人工交互来实现自动化。

我知道我们可以使用 mailto 命令，但它会编写电子邮件、主题、正文和所有内容，但除非我单击发送，否则它不会发送。

我在网上阅读我们可以使用 blat 但我不能使用除 Outlook 以外的任何东西。

这是已关闭的帖子，我找到[了指向 SOF 帖子的链接](https://stackoverflow.com/questions/248569/starting-outlook-and-having-an-email-pre-populated-from-command-line/248598?noredirect=1#comment21827342_248598)。

仅供参考：我正在研究一些用于发送电子邮件的 telnet 命令，但也没有成功。 [telnet 命令发送电子邮件](http://community.spiceworks.com/how_to/show/11-test-email-flow-using-smtp-commands)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-15T13:18:26.970

**选项 1**
您没有对您的环境说太多，但假设您有可用的环境，您可以使用 PowerShell 脚本；一个例子是[here](http://exchangeserverpro.com/powershell-how-to-send-email)。这个的本质是：

```
$smtp = New-Object Net.Mail.SmtpClient("ho-ex2010-caht1.exchangeserverpro.net")
$smtp.Send("reports@exchangeserverpro.net","administrator@exchangeserverpro.net","Test Email","This is a test") 
```

[然后，您可以按照此示例](http://technet.microsoft.com/en-us/library/ee176949.aspx#EBAA)从命令行启动脚本：

```
powershell.exe -noexit c:\scripts\test.ps1 
```

请注意，Windows 7 和 Windows Server 2008R2 上默认安装的 PowerShell 2.0 包含一个更简单的[`Send-MailMessage`](http://technet.microsoft.com/en-us/library/dd347693.aspx)命令，使事情变得更简单。

**选项 2**
如果您准备使用第三方软件，一个选项类似于[此 SendEmail 命令行工具](http://caspian.dotconf.net/menu/Software/SendEmail/)。不过，这取决于您的目标环境；如果您将批处理文件部署到多台机器上，那显然每次都需要包含（但不是正式安装）。

**选项 3**
您可以直接从 VBA 脚本驱动 Outlook，然后您将从批处理文件触发；这将让您使用 Outlook 本身发送电子邮件，这看起来最接近您想要的。这有两个部分；首先，找出发送电子邮件所需的 VBA 脚本。网上有很多这样的例子，包括来自微软的[这里](http://support.microsoft.com/kb/161088?wa=wsignin1.0)。这个的本质是：

```
Sub SendMessage(DisplayMsg As Boolean, Optional AttachmentPath)
    Dim objOutlook As Outlook.Application
    Dim objOutlookMsg As Outlook.MailItem
    Dim objOutlookRecip As Outlook.Recipient
    Dim objOutlookAttach As Outlook.Attachment

    Set objOutlook = CreateObject("Outlook.Application")
    Set objOutlookMsg  = objOutlook.CreateItem(olMailItem)

    With objOutlookMsg
        Set objOutlookRecip = .Recipients.Add("Nancy Davolio")
        objOutlookRecip.Type = olTo
        ' Set the Subject, Body, and Importance of the message.
        .Subject = "This is an Automation test with Microsoft Outlook"
        .Body = "This is the body of the message." &vbCrLf & vbCrLf
        .Importance = olImportanceHigh  'High importance

        If Not IsMissing(AttachmentPath) Then
            Set objOutlookAttach = .Attachments.Add(AttachmentPath)
        End If

        For Each ObjOutlookRecip In .Recipients
            objOutlookRecip.Resolve
        Next

        .Save
        .Send
    End With
    Set objOutlook = Nothing
End Sub 
```

`/autorun`然后，根据[此答案](https://stackoverflow.com/a/9261561/55487)从命令行使用参数启动 Outlook （根据需要更改路径/宏名）：

```
C:\Program Files\Microsoft Office\Office11\Outlook.exe" /autorun macroname 
```

**选项 4**
您可以使用与选项 3 相同的方法，但将 Outlook VBA 移动到 PowerShell 脚本（您可以从命令行运行）。[这里](http://blogs.msdn.com/b/jmanning/archive/2007/01/25/using-powershell-for-outlook-automation.aspx)的例子。这可能是最整洁的解决方案，IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-15T13:42:08.510

# 使用 VBScript 从命令行发送 SMS/文本消息！

如果 VBA 符合[VB 脚本](https://technet.microsoft.com/scriptcenter/dd940112.aspx)的规则，那么只需将其放入文本文件即可从命令行调用它 - 在这种情况下，无需专门打开 Outlook。

我需要从命令行向自己发送自动短信，所以我使用了下面的代码，这只是上面@Geoff[答案](https://stackoverflow.com/a/15433520/8112776)的压缩版本。

全球大多数手机运营商都会提供您手机号码的电子邮件地址“版本”。 **例如**，在加拿大使用*Rogers*或*Chatr Wireless*时，发送至***`<YourPhoneNumber>`* <code>@pcs.rogers.com**的电子邮件将立即以短信形式发送至您的 Rogers/Chatr 手机。

***** ^(您可能需要“授权”您手机上的第一条消息，并且一些运营商可能会为这些消息收取额外费用，尽管据我所知，所有加拿大运营商都免费提供这项鲜为人知的服务。查看您的运营商网站了解详情。)

网上有进一步的说明和各种**全球运营商的电子邮件到文本地址的汇编列表，**例如[this](https://www.techwyse.com/blog/online-innovation/send-sms-through-email-to-usa-and-canada/)和[this](https://20somethingfinance.com/how-to-send-text-messages-sms-via-email-for-free/)和[this](https://lifehacker.com/5506326/how-can-i-send-an-email-via-text-message)。

* * *

## 代码和说明

1.  复制下面的代码并粘贴到您喜欢的文本编辑器中的新文件中。
2.  使用带有`.VBS`扩展名的任何名称保存文件，例如`TextMyself.vbs`.

***就这样！***
只需双击该文件即可发送测试消息，或者使用[`START`](https://docs.microsoft.com/windows-server/administration/windows-commands/start).

```
Sub SendMessage()
    Const EmailToSMSAddy = "3215551212@pcs.rogers.com"
    Dim objOutlookRecip
    With CreateObject("Outlook.Application").CreateItem(0)
        Set objOutlookRecip = .Recipients.Add(EmailToSMSAddy)
        objOutlookRecip.Type = 1
        .Subject = "The computer needs your attention!"
        .Body = "Go see why Windows Command Line is texting you!"
        .Save
        .Send
    End With
End Sub 
```

* * *

## 示例批处理文件用法：

```
START x:\mypath\TextMyself.vbs 
```

当然，有无数种可能的方式可以对其进行调整和定制，以适应各种实际或创造性的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-24T07:17:45.210

使用 Powershell，您可以发送电子邮件并将其集成到 Bat 文件脚本中。但是您需要在您的机器上为此安装 Outlook。这对我在本地 PC 上有效，但在服务器上无效。在服务器上，每次使用此命令时都会要求我授予权限，而且在服务器上安装 Outlook 可能不是许多人的首选。这在本地 PC 上运行时效果很好

```
$Outlook = New-Object -ComObject Outlook.Application
$Mail = $Outlook.CreateItem(0)
$Mail.To = "xyz@mail.com"
$Mail.Subject = "Action"
$Mail.Body ="Pay rise please"
$Mail.Send() 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-01-05T19:35:23.467

您可以使用 cURL 和 CRON 在设定的时间运行 .php 文件。

这是 cURL 运行 .php 文件所需的示例：

```
curl http://localhost/myscript.php 
```

然后设置 CRON 作业以运行上述 cURL：

```
nano -w /var/spool/cron/root
or
crontab -e 
```

其次是：

```
01 * * * * /usr/bin/curl http://www.yoursite.com/script.php 
```

有关更多信息，请查看这篇文章： [https ://www.scalescale.com/tips/nginx/execute-php-scripts-automatically-using-cron-curl/](https://www.scalescale.com/tips/nginx/execute-php-scripts-automatically-using-cron-curl/)

有关 cURL 的更多信息： [PHP 中的 cURL 是什么？](https://stackoverflow.com/questions/3062324/what-is-curl-in-php)

有关 CRON 的更多信息：http: [//code.tutsplus.com/tutorials/scheduling-tasks-with-cron-jobs--net-8800](http://code.tutsplus.com/tutorials/scheduling-tasks-with-cron-jobs--net-8800)

此外，如果您想了解如何在托管服务器上设置 CRON 作业，只需咨询您的主机提供商，他们可能有一个用于在 c-panel 中设置它的 GUI（例如[http://godaddy. com](http://godaddy.com)或[http://1and1.com/](http://1and1.com/)）

注意：从技术上讲，我相信您可以设置一个 CRON 作业来直接运行 .php 文件，但我不确定。

祝自动运行 PHP 好运:-)

# unit-testing - Grails 单元测试和 cobertura xml 文件冲突（错误？）

> ID：15433204
> 
> 赞同：2
> 
> 时间：2013-03-15T13:02:27.130
> 
> 标签：unit-testing, grails, cobertura

要从 grails (2.1) 中的所有单元测试生成 xml 报告，您只需要 tu run `grails test-app`。此命令创建`\target\test-reports\TESTS-TestSuites.xml`文件。我为覆盖报告安装了 Cobertura 插件。默认情况下，cobertura 创建 html 报告，但我需要 jenkins 的 xml 报告。要获取 cobertura 的 XML 文件，您必须使用`-xml`选项，因此完整的命令如下所示`test-app -coverage -xml`：执行此命令后，`TESTS-TestSuites.xml`未创建文件，据我检查，`-xml`cobertura 的此选项会干扰`test-app`命令。

如何运行所有测试并为单元测试和 cobertura 覆盖生成 xml 文件？这是一个错误吗？

# ios - ios中Facebook SDK中的FBWebDialog和注销问题

> ID：15433227
> 
> 赞同：1
> 
> 时间：2013-03-15T13:03:16.467
> 
> 标签：ios, facebook

我在我的 iphone 应用程序中使用 Facebook SDK 3.2，我使用 FBLoginView 从 Facebook 登录和注销。和两个按钮：第一个在用户的墙上发布内容，第二个在朋友的墙上发布内容。在这两个中我都在使用 FBWebDialog。当用户启动应用程序登录页面打开（在 safari 中）并且一切正常。

但我面临以下问题：

1.  如果用户想使用另一个 facebook id 登录，则没有选项可以这样做，第一个用户必须从他在 safari 中的第一个 facebook 帐户注销，当他返回应用程序时，用户才会获得 Facebook 登录页面登录再次。

2.  当用户点击 FBLoginView 时，它将打开 safari，但在点击 loginView 后，如果用户想在不登录的情况下返回应用程序，则没有选项可以这样做。

3.  在发布操作时，我使用的是 FBWebDialog，如果我没有登录并尝试打开 FBWebDialog，那么在对话框中它会显示 Facebook 登录页面首先登录，但在输入 Facebook 的用户信息和密码后，它会显示一条消息“发生错误。请稍后再试。” 在对话框中，如果我们点击“确定”按钮，它会显示用户已登录，但不会显示共享内容的页面。真是奇怪的行为。

请帮忙！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:27:08.197

问题 #3 的解决方案：将带有您的 App-ID 的 @"app_id" 添加到 params 字典中：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"0123456789", @"app_id",
                               name, @"name",
                               caption, @"caption",
                               description, @"description",
                               link, @"link",
                               picture, @"picture",
                               nil]; 
```

# jquery - 排序项目时页面移动到屏幕顶部

> ID：15433232
> 
> 赞同：0
> 
> 时间：2013-03-15T13:03:23.460
> 
> 标签：jquery, html

我正在使用 jQuery 创建一个可排序的投资组合。

问题是; 每次我点击我的投资组合项目的过滤器时，页面都会滚动到顶部。

有没有办法防止这种情况？

可以在这里看到问题：http: [//alsite.com.br/flex/produtos.html](http://alsite.com.br/flex/produtos.html)

我的脚本：

```
<script type="text/javascript">
    $(document).ready(function(){
        var Portfolio = {
            sort: function(items) {
                items.show();
                $('#portfolio-content').find('div.portfolio-item').not(items).fadeOut(500);
            },
            showAll: function(items) {
                items.fadeIn(500);
            },
            doSort: function() {
                $('a', '#portfolio-sort').on('click', function() {

                    var $a = $(this);
                    if (!$a.is('#all')) {

                        var items = $('div[data-cat=' + $a.data('cat') + ']', '#portfolio-content');

                        Portfolio.sort(items);

                    } else {

                        Portfolio.showAll($('div.portfolio-item', '#portfolio-content'));

                    }

                });
            }
        };

        Portfolio.doSort();     

    });

</script> 
```

我的投资组合代码：

```
<div id="portfolio">
    <div id="portfolio-sort">
        <a href="#" id="all">TODOS</a>
        <a href="#" data-cat="a">ACM</a>
        <a href="#" data-cat="b">MDF</a>
        <a href="#" data-cat="c">AÇO INOX</a>
        <a href="#" data-cat="b">PVC ESPANDIDO</a>
        <a href="#" data-cat="c">AÇO GALVANIZADO</a>

    </div>
    <div id="portfolio-content">
        <div class="portfolio-item" data-cat="a">A</div>
        <div class="portfolio-item" data-cat="b">B</div>
        <div class="portfolio-item" data-cat="c">C</div>
        <div class="portfolio-item" data-cat="c">C</div>
        <div class="portfolio-item" data-cat="b">B</div>
        <div class="portfolio-item" data-cat="a">A</div>
        <div class="portfolio-item" data-cat="a">A</div>
        <div class="portfolio-item" data-cat="c">C</div>
        <div class="portfolio-item" data-cat="b">B</div>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:11:19.760

简单地改变：

```
$('a', '#portfolio-sort').on('click', function() { ... 
```

到：

```
$('a', '#portfolio-sort').on('click', function(e) { ... 
```

并添加：

```
e.preventDefault(); 
```

--

```
$('a', '#portfolio-sort').on('click', function() {
    e.preventDefault();

    ...
}); 
```

--

这可以防止链接充当链接（并将您带到`produtos.html#`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:11:21.623

您需要防止链接成为链接:)

```
$('a', '#portfolio-sort').on('click', function(e) {
    // stop being an link!
    e.preventDefault();

    var $a = $(this);

    if (!$a.is('#all')) {
        var items = $('div[data-cat=' + $a.data('cat') + ']', '#portfolio-content');

        Portfolio.sort(items);
    } else {
        Portfolio.showAll($('div.portfolio-item', '#portfolio-content'));
    }
}); 
```

更多信息：[点击](http://api.jquery.com/event.preventDefault/)

# maven - 如何使用不同的配置文件管理工件/Maven工件

> ID：15433238
> 
> 赞同：2
> 
> 时间：2013-03-15T13:03:41.963
> 
> 标签：maven, maven-3, artifactory, maven-profiles

我在理解如何管理使用不同配置文件生成的不同“jar”文件时遇到了一些问题。一个例子。我有一个项目：*my.project:sample:1.0* 我们使用两个配置文件：

1.  使用***Profile1***正在使用 java 7 和依赖项*other:project:1.0进行编译*
2.  使用***Profile2***是使用 java 6 编译并具有*不同的依赖项：project:3.0*

在本地环境中使用命令行很容易管理，但是我不知道如何在artifactory上存储和管理它。

我们有两个不同的项目，它们使用相同的库，但使用不同的配置文件生成：

1.  一个项目需要 *my.project:sample:1.0* - ***Profile1*** "
2.  另一个项目需要 *my.project:sample:1.0* - ***Profile2*** "

如何使用库和配置文件指定这些依赖关系？

澄清：生成的 Jar 使用工件存储，项目使用存储库解决依赖关系。我不能将该项目用作模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:09:00.333

您可以使用分类器来区分工件并在依赖项中重用分类器。

**定义分类器**

为此，您需要在 maven-jar-plugin 中定义分类器：

```
<profiles>
     <profile>
         <id>profile1</id>
         ...
         <build>
             <plugins>
                 <plugin>
                     <groupId>org.apache.maven.plugins</groupId>
                     <artifactId>maven-jar-plugin</artifactId>
                     <version>2.4</version>
                     <executions>
                       <execution>
                       <phase>package</phase>
                       <goals>
                         <goal>jar</goal>
                       </goals>
                       <configuration>
                          <classifier>jdk6</classifier>
                       </configuration>
                      </execution>
                     </executions>
                 <plugin>
             <plugins>
         </build>
     </profile>
     <profile>
         <id>profile2</id>
         ...
         <build>
             <plugins>
                 <plugin>
                     <groupId>org.apache.maven.plugins</groupId>
                     <artifactId>maven-jar-plugin</artifactId>
                     <version>2.4</version>
                     <executions>
                       <execution>
                       <phase>package</phase>
                       <goals>
                         <goal>jar</goal>
                       </goals>
                       <configuration>
                          <classifier>jdk7</classifier>
                       </configuration>
                      </execution>
                     </executions>
                 <plugin>
             <plugins>
         </build>
     </profile>
</profiles> 
```

**使用依赖的分类器**

非常简单：

```
<dependency>
    <groupId>myGroup</groupId>
    <artifactId>myArtifact</artifactId>
    <classifier>jdk6</classifier>
<dependency> 
```

# javascript - 使用用户定义的属性创建新的 javascript 对象

> ID：15433239
> 
> 赞同：1
> 
> 时间：2013-03-15T13:03:42.793
> 
> 标签：javascript, jquery

使用 Javascript 和 jquery 我想编写代码执行以下操作：当用户填写 html 表单时，会使用用户提供的属性自动创建一个新对象。我有一个构造函数

```
function object (prop1, prop2, prop3) {
        this.prop1 = prop1;
        this.prop2 = prop2;
        this.prop3 = prop3;
} 
```

我正在使用 jquery val() 获取用户输入，如下所示：

```
object.prop1 = $('input[name = "input1"]').val();
object.prop2 = $('input[name = "input2"]').val();
object.prop2 = $('input[name = "input3"]').val(); 
```

我想念的是我认为在构造函数和用户输入之间的某个地方。如果我想创建一个新对象，我会写

```
 apple = new object (prop1, prop2, prop3); 
```

我希望代码在每次用户填写表单时自动创建一个新对象。我试图用 for 循环来做，但我没有成功。我是一个初学者，所以我想我在这里遗漏了一些非常基本的东西。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:06:17.760

不需要构造函数

```
var obj = {};
object.prop1 = $('input[name = "input1"]').val();
object.prop2 = $('input[name = "input2"]').val();
object.prop2 = $('input[name = "input3"]').val();

//Use obj for further processing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:09:47.127

使用 jQuery 将 onsubmit 事件绑定到您的表单。

```
$("[name='FORM_NAME']").submit(function() {
  var newObj = new object();
  newObj.prop1 = $('input[name = "input1"]').val();
  newObj.prop2 = $('input[name = "input2"]').val();
  newObj.prop2 = $('input[name = "input3"]').val();
}); 
```

不完全确定您想在之后对对象做什么，但这会在提交函数的范围内创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:07:32.690

尝试：

```
var obj = {};

$("input").each(function() {
   var name = $(this).attr("name");
   obj.name = $(this).val();
}); 
```

然后通过以下方式访问：`obj.input1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:10:04.590

不知道你为什么要这样做，但你可以使用方括号表示法来实现它。

```
function x(a, b) {
    this[a] = a;
    this[b] = b;
    this.list = function() {
       for(var i in this) {
           console.log(i+': '+this[i]);
       }
    }
}
var l = new x('hello', 'world');
l.list(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T13:17:38.253

JavaScript 能够在 OOP 范式中工作。如果你真的需要一个自定义对象，你可以这样做：

```
var Apple = function Apple(p1, p2, p3) {
    this.p1 = p1;
    this.p2 = p2;
    this.p3 = p3;
};

//...
a = $('input[name = "input1"]').val();
b = $('input[name = "input2"]').val();
c = $('input[name = "input3"]').val();

var obj = new Apple(a,b,c); 
```

# sql-server - 报告服务无法在 win 8 上使用 IE10 或 Chrome

> ID：15433245
> 
> 赞同：1
> 
> 时间：2013-03-15T13:04:03.150
> 
> 标签：sql-server, reporting-services, reporting, internet-explorer-10

我们的 2008R2 SSRS 实现最近停止在 Windows 8 上使用 IE10 和 chrome。标题将显示，数据部分为空白。导出到 excel 功能仍然允许下载报告。在兼容模式下运行将使报告正确显示。有没有其他人遇到过这个问题？我在 MS 网站上找不到有关此问题的任何信息。有关如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:37:34.020

我们以前遇到过这个问题，Chrome 比 IE 更多，但这可能是同一个问题。

尝试查看这篇文章，看看它是否解决了您的问题，它对我们有用：

[报告不显示](http://grumpydba.blogspot.co.uk/2012/02/sql-2008-r2-report-doesnt-show-on.html)

需要注意的一件事（这让我大吃一惊）是，一旦您进行了更改以使其正常工作，您必须清除客户端上浏览器的缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T17:40:50.513

在页面顶部附近添加此元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
```

# hibernate - org.hibernate.ejb.Ejb3Configuration 在休眠中已弃用

> ID：15433248
> 
> 赞同：2
> 
> 时间：2013-03-15T13:04:09.353
> 
> 标签：hibernate

在我的 Web 应用程序中，我使用 Spring-Data 和 JPA/Hibernate。我的情况是我必须明智地创建单独的模式公司。所以我在登录时使用用户名、密码和公司代码。获取公司代码将有助于找出方案那家公司。我的数据库架构将根据登录的用户而改变，所以为了做到这一点，我已经编写了休眠拦截器，如[http://blog.krecan.net/2009/01/24/spring-managed-hibernate-interceptor所述-in-jpa](http://blog.krecan.net/2009/01/24/spring-managed-hibernate-interceptor-in-jpa)但由于它使用 org.hibernate.ejb.Ejb3Configuration 将被弃用，所以谁能告诉我其他替代方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:39:48.187

> `org.hibernate.cfg.Configuration`在此版本`org.hibernate.cfg.AnnotationConfiguration`中已弃用，现在已弃用一段时间。两者都将在 4.0.0 进入 Final 之前被删除。我们仍在计划替换的确切 `org.hibernate.ejb.Ejb3Configuration`外观，但同时它也已被弃用

（无论如何，推荐的构建方法`EntityManagerFactory`始终是通过`javax.persistence.Persistence`）。

我指[的是这篇博文](http://in.relation.to/Bloggers/HibernateCore400Alpha3Release)

# django - 对照 QuerySet 检查模型实例

> ID：15433251
> 
> 赞同：0
> 
> 时间：2013-03-15T13:04:17.447
> 
> 标签：django, validation, django-models, django-queryset, django-managers

有没有办法在 Django 中针对 QuerySet 验证模型实例，而无需访问数据库？我正在定义一组常见的 QuerySet 并为它们使用不同的模型管理器，我希望在我的模型上运行一个方法来检查它是否对该定义有效。这可能吗？

# python - 使用 PIL 在 App Engine 上绘制图像

> ID：15433252
> 
> 赞同：3
> 
> 时间：2013-03-15T13:04:21.273
> 
> 标签：python, google-app-engine, python-imaging-library

我已阅读主题“ [App Engine、PIL 和覆盖文本](https://stackoverflow.com/questions/12695480/app-engine-pil-and-overlaying-text)”。

下面的代码将显示损坏的图像，我应该如何纠正？

```
class TestImg(webapp2.RequestHandler):
    def get(self):
        text_img = Image.new('RGBA', (800,600), (0, 0, 0, 0))
        draw = ImageDraw.Draw(text_img)
        draw.text((0, 0), 'HELLO TEXT', font=ImageFont.load_default())
        self.response.headers['Content-Type'] = "image/png"
        self.response.write(draw) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T15:34:08.650

基于蒂姆霍夫曼所说的，你的课程看起来像这样：

```
import StringIO

class TestImg(webapp2.RequestHandler):
    def get(self):
        text_img = Image.new('RGBA', (800,600), (0, 0, 0, 0))
        draw = ImageDraw.Draw(text_img)
        draw.text((0, 0), 'HELLO TEXT', font=ImageFont.load_default())

        output = StringIO.StringIO()
        text_img.save(output, format="png")
        text_layer = output.getvalue()
        output.close()

        self.response.headers['Content-Type'] = 'image/png'
        self.response.write(text_layer) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:19:36.317

您拥有的绘图对象不能传递回浏览器，因为它不是 png 本身。

您需要调用 draw.save() 并将 StringIO 对象传递给它以将文件写入。（您还需要提供文件类型）。那时你会`self.response.write(the_stringio.getvalue())`

# marklogic - 更新托管文档而不更改版本

> ID：15433254
> 
> 赞同：1
> 
> 时间：2013-03-15T13:04:29.587
> 
> 标签：marklogic

我使用**图书馆服务 API**将文档插入到`MarkLogic`. 在某些情况下，我只需要保存所做的更改而不签入。这意味着将更改保存到当前版本本身而不增加版本号。在一些**CMIS**规范中看到了这样的工具，它提供了开箱即用的解决方案，用于签入具有相同版本的文档。**在**`MarkLogic`. _ _ 我能想到的替代选项是取消管理托管文档，使用**xdmp**功能执行更新和重新管理内容。但这会丢失以前的版本。还有其他替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:31:14.153

您是否尝试过简单地使用 xdmp 更新功能从而绕过 DLS？例如，您可以使用`xdmp:node-replace`来替换文档的根元素。文档说您“必须”使用 DLS 函数进行更新，但我认为这意味着非 DLS 更新不会由 DLS 管理。

咱们试试吧。

```
(: new managed document :)
import module namespace dls = "http://marklogic.com/xdmp/dls" 
  at "/MarkLogic/dls.xqy";
dls:document-insert-and-manage('test', true(), <test id="1"/>)
=> ()

import module namespace dls = "http://marklogic.com/xdmp/dls" 
  at "/MarkLogic/dls.xqy";

dls:document-is-managed('test'),
dls:document-history('test')
=>
true
<dls:document-history uri="test" xmlns:dls="http://marklogic.com/xdmp/dls">
  <dls:version>
    <dls:version-id>1</dls:version-id>
    <dls:document-uri>test</dls:document-uri>
    <dls:latest>true</dls:latest>
    <dls:created>2013-03-15T10:22:35.642645-07:00</dls:created>
    <dls:author>9712740001723797867</dls:author>
    <dls:annotation/>
    <dls:deleted>false</dls:deleted>
  </dls:version>
</dls:document-history> 
```

看起来挺好的。让我们尝试一个非托管更新。

```
xdmp:node-replace(doc('test')/test, <test id="2"/>)
=> ()

doc('test')
=> <test id="2"/>

import module namespace dls = "http://marklogic.com/xdmp/dls" 
  at "/MarkLogic/dls.xqy";

dls:document-is-managed('test'),
dls:document-history('test')
=>
true
<dls:document-history uri="test" xmlns:dls="http://marklogic.com/xdmp/dls">
  <dls:version>
    <dls:version-id>1</dls:version-id>
    <dls:document-uri>test</dls:document-uri>
    <dls:latest>true</dls:latest>
    <dls:created>2013-03-15T10:22:35.642645-07:00</dls:created>
    <dls:author>9712740001723797867</dls:author>
    <dls:annotation/>
    <dls:deleted>false</dls:deleted>
  </dls:version>
</dls:document-history> 
```

所以更新成功了，但文档历史记录仍然显示版本 1。这就是你想要的，对吧？

现在，我以管理员用户身份执行此操作。对于非管理员用户，您可能必须授予一些额外的权限 - 或者创建放大器可能更干净。这可以用来防止意外的非托管更新。

# macos - 将旧代码从 OS X 10.6 更新到 10.7

> ID：15433262
> 
> 赞同：6
> 
> 时间：2013-03-15T13:04:47.970
> 
> 标签：macos, automatic-ref-counting

我正在尝试更新**ODBCQueryTool**，使其在 10.7 下构建。它最初针对的是 10.6，在较新版本的 Xcode 中不直接支持。现在一个工作构建会很好，但理想情况下我想制作一个在 10.5 或更高版本上构建和运行的版本。

所以首先我下载并安装了 10.6 SDK。在那一点上，一些问题消失了，但我得到了一系列问题：

**ld：警告**： `directory not found for option` `'-F/Users/maury/Develop/odbckit/ODBCQueryTool/../ODBCKit/build/Release`'

```
Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_NSMutableOrderedSet", referenced from:
      objc-class-ref in libarclite_macosx.a(arclite.o) 
```

我在 Google 中找不到任何有用的东西。我的印象是 ARC 是 10.7 和更新版本的一部分，所以不清楚为什么我会得到这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-27T14:54:48.940

只是根据克里斯的帖子来回答这个问题：

在构建设置中，将“隐式链接 Objective-C 运行时支持”设置为 NO。

# javascript - 从列表中选择到其他列表的 HTML 代码不起作用

> ID：15433266
> 
> 赞同：0
> 
> 时间：2013-03-15T13:04:59.820
> 
> 标签：javascript, html

我对 html 的工作不多，但我需要有两个列表，我可以从一个列表中选择另一个列表。像 ：

![在此处输入图像描述](../Images/02cc0cc3ce776927871acfc3d6edef1e.png)

这是 html 代码，但从一个列表到另一个列表的选择不起作用：

```
<!DOCTYPE html>
<html>
<head>
<script>
$().ready(function() {  
   $('#add').click(function() {  
    return !$('#select1 option:selected').remove().appendTo('#select2');  
   });  
   $('#remove').click(function() {  
    return !$('#select2 option:selected').remove().appendTo('#select1');  
   });  
  });
</script>
<style type="text/css" media=screen>
a {  
   display: block;  
   border: 1px solid #aaa;  
   text-decoration: none;  
   background-color: #fafafa;  
   color: #123456;  
   margin: 2px;  
   clear:both;  
  }  
  div {  
   float:left;  
   text-align: center;  
   margin: 10px;  
  }  
  select {  
   width: 100px;  
   height: 80px;  
  } 
</style>
</head>
<body>

<div>  
  <select multiple id="select1">  
   <option value="1">Option 1</option>  
   <option value="2">Option 2</option>  
   <option value="3">Option 3</option>  
   <option value="4">Option 4</option>  
  </select>  
  <a href="#" id="add">add &gt;&gt;</a>  
 </div>  
 <div>  
  <select multiple id="select2"></select>  
  <a href="#" id="remove">&lt;&lt; remove</a>  
 </div>  

</body>
</html> 
```

我只是没有看到我的错误是什么。欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:06:14.887

使用 document.ready 。你放置了错误的代码

代替

```
$().ready(function() 
```

和

```
$(document).ready(function() 
```

试着放

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

你没有包含 jQuery 文件。

使用以下代码删除和附加选项。

```
$('#select1:selected').each(function(i, selected) {
    $("#select2").append('<option 
     value='+$(selected).val()+'>'+$(selected).text()+'</option>');

    $(this).remove();  
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-13T08:25:21.993

您可以在这里找到一个工作示例[http://www.bootply.com/126254](http://www.bootply.com/126254)

```
$('.add').click(function(){
    $('.all').prop("checked",false);
    var items = $("#list1 input:checked:not('.all')");
    var n = items.length;
  	if (n > 0) {
      items.each(function(idx,item){
        var choice = $(item);
        choice.prop("checked",false);
        choice.parent().appendTo("#list2");
      });
  	}
    else {
  		alert("Choose an item from list 1");
    }
});

$('.remove').click(function(){
    $('.all').prop("checked",false);
    var items = $("#list2 input:checked:not('.all')");
	items.each(function(idx,item){
      var choice = $(item);
      choice.prop("checked",false);
      choice.parent().appendTo("#list1");
    });
});

/* toggle all checkboxes in group */
$('.all').click(function(e){
	e.stopPropagation();
	var $this = $(this);
    if($this.is(":checked")) {
    	$this.parents('.list-group').find("[type=checkbox]").prop("checked",true);
    }
    else {
    	$this.parents('.list-group').find("[type=checkbox]").prop("checked",false);
        $this.prop("checked",false);
    }
});

$('[type=checkbox]').click(function(e){
  e.stopPropagation();
});

/* toggle checkbox when list group item is clicked */
$('.list-group a').click(function(e){

    e.stopPropagation();

  	var $this = $(this).find("[type=checkbox]");
    if($this.is(":checked")) {
    	$this.prop("checked",false);
    }
    else {
    	$this.prop("checked",true);
    }

    if ($this.hasClass("all")) {
    	$this.trigger('click');
    }
});
```

```
.v-center {
  min-height:200px;
  display: flex;
  justify-content:center;
  flex-flow: column wrap;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<div class="container">
  <div class="row">
        <div class="col-md-12 text-center"><h3>Pick List Example</h3></div>
  		<div class="col-sm-4 col-sm-offset-1">
          <div class="list-group" id="list1">
          <a href="#" class="list-group-item active">List 1 <input title="toggle all" type="checkbox" class="all pull-right"></a>
          <a href="#" class="list-group-item">Second item <input type="checkbox" class="pull-right"></a>
          <a href="#" class="list-group-item">Third item <input type="checkbox" class="pull-right"></a>
          <a href="#" class="list-group-item">More item <input type="checkbox" class="pull-right"></a>
          <a href="#" class="list-group-item">Another <input type="checkbox" class="pull-right"></a>
          </div>
        </div>
        <div class="col-md-2 v-center">
     		<button title="Send to list 2" class="btn btn-default center-block add"><i class="glyphicon glyphicon-chevron-right"></i></button>
            <button title="Send to list 1" class="btn btn-default center-block remove"><i class="glyphicon glyphicon-chevron-left"></i></button>
        </div>
        <div class="col-sm-4">
    	  <div class="list-group" id="list2">
          <a href="#" class="list-group-item active">List 2 <input title="toggle all" type="checkbox" class="all pull-right"></a>
          <a href="#" class="list-group-item">Alpha <input type="checkbox" class="pull-right"></a>
          <a href="#" class="list-group-item">Charlie <input type="checkbox" class="pull-right"></a>
          <a href="#" class="list-group-item">Bravo <input type="checkbox" class="pull-right"></a>
          </div>
        </div>
  </div>
</div>
```

# tomcat7 - 启动tomcat 7时出现java.util.concurrent.ExecutionException

> ID：15433269
> 
> 赞同：0
> 
> 时间：2013-03-15T13:05:02.160
> 
> 标签：tomcat7, java

怎么解决？？我安装了 Java 7，并且在启动具有我的应用程序的 tomcat 时发生了这种情况。我认为问题是基于我的应用程序。（
Tomcat 7之前运行成功。我安装了java 7并在出现此安装问题后卸载了java 6）

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/m.apus]]
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/m.apus]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: javax/ejb/FinderException
    at java.lang.Class.getDeclaredFields0(Native Method)org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 21 more 
```

*   编辑

在我安装 Java 7 之前发生了 LifecycleException。我认为这个异常不是基于此。但我不知道为什么会遇到这个异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:13:22.120

使用 Java EE 库，需要支持 EJB 的文件。您已经获得`java.lang.NoClassDefFoundError`了实现 Java EE 规范的库中的类。您需要的文件`javax.ejb.jar`来自版本 6 Java EE 默认参考实现。为您的 Java Web 应用程序提供 Java EE 库。最初 Tomcat 不支持 EJB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:15:18.540

Tomcat 7 不是（完整的）Java EE 容器。它“只是”一个 servlet/JSP 服务器。

如果您需要 EJB，则需要一个成熟的 Java EE 服务器，例如[Glassfish](http://glassfish.java.net/)或[JBoss](https://www.jboss.org/jbossas)

# ruby-on-rails - 如何使用 Rspec 测试控制器 - #show action

> ID：15433271
> 
> 赞同：7
> 
> 时间：2013-03-15T13:05:04.977
> 
> 标签：ruby-on-rails, unit-testing, testing, rspec, rspec-rails

我有一个`belongs_to`用户的批处理模型。用户应该只看到他们自己的 Batches 实例。

对于`index`行动，这是我所做的：

### `Batch#index`

```
context "GET index" do

  it "should get only users batches" do
    FactoryGirl.create(:batch)
    batch = FactoryGirl.create(:batch)
    batch2 = FactoryGirl.create(:batch)            
    subject.current_user.batches << batch
    get "index"
    assigns(:batches).should == subject.current_user.batches
    assigns(:batches).should_not include(batch2) 
  end

end 
```

对于`create`行动，这是我所做的：

### `Batch#create`

```
context "POST create" do

  it "should save a users batch into current_user" do
    batch = subject.current_user.batches.build(name: 'bla')
    put :create, batch
    subject.current_user.batches.should include(batch)
  end

  it "should save a batch from other user into current_user" do
    batch = subject.current_user.batches.build(name: 'bla')
    batch2 = FactoryGirl.create(:batch)
    put :create, batch
    subject.current_user.batches.should_not include(batch2)
  end

end 
```

但是，我不确定如何在操作中测试这种行为`show`。这是我正在做的事情：

### `Batch#show`

```
context "GET show/:id" do

  it "should show batches from user" do
    batch_params = FactoryGirl.build(:batch)
    batch = subject.current_user.batches.create(batch_params)
    get :show, id: batch.id
    response.should redirect_to(batch)
  end

  it "should not show batches from other users" do
    batch = subject.current_user.batches.create(name: 'bla')
    batch2 = FactoryGirl.create(:batch)
    get :show, id: batch2.id
    response.should redirect_to(:batches)
  end

end 
```

我遇到以下失败：

```
Failures:

  1) BatchesController GET show/:id should not show batches from other users
     Failure/Error: response.should redirect_to(:batches)
       Expected response to be a <:redirect>, but was <200>
     # ./spec/controllers/batches_controller_spec.rb:66:in `block (3 levels) in <top (required)>'

  2) BatchesController GET show/:id should show batches from user
     Failure/Error: batch = subject.current_user.batches.create(batch_params)
     NoMethodError:
       undefined method `stringify_keys' for #<Batch:0x00000005d0ef80>
     # ./spec/controllers/batches_controller_spec.rb:58:in `block (3 levels) in <top (required)>' 
```

我究竟做错了什么？我应该如何测试这种行为行为`view`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:19:10.143

```
get :show, id: batch.id 
```

不会重定向它会呈现显示，因此响应代码 200，可能是你可以检查

```
response.should render_template :show 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T13:35:44.463

第一个失败，“不应该显示来自其他用户的批次”，看起来它可能反映了您的控制器中的实际问题。您是否还在浏览器中对此进行了测试，以确认问题出在您的测试中而不是实际代码中？

在另一个测试中，我不太确定问题到底是什么，但我可能会像这样构建批处理：

```
batch = FactoryGirl.create(:batch, user: subject.current_user) 
```

试一试，看看它是否不能解决它。

# android - 经常切换ImageView位图时BitmapFactory.Options.inBitmap导致撕裂

> ID：15433276
> 
> 赞同：13
> 
> 时间：2013-03-15T13:05:12.673
> 
> 标签：android, bitmap, bitmapfactory, tearing

我遇到过一种情况，我必须在幻灯片中显示图像，并且切换图像的速度非常快。庞大的图像数量让我想将 JPEG 数据存储在内存中，并在我想显示它们时对其进行解码。为了简化垃圾收集器，我使用[BitmapFactory.Options.inBitmap](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inBitmap)来重用位图。

不幸的是，这会导致相当严重的撕裂，我尝试了不同的解决方案，例如同步、信号量、在 2-3 个位图之间交替，但是似乎没有一个可以解决问题。

我已经建立了一个示例项目，在 GitHub 上演示了这个问题；[https://github.com/Berglund/android-tearing-example](https://github.com/Berglund/android-tearing-example)

我有一个线程解码位图，将其设置在 UI 线程上，并休眠 5 毫秒：

```
Runnable runnable = new Runnable() {
@Override
public void run() {
        while(true) {
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inSampleSize = 1;

            if(bitmap != null) {
                options.inBitmap = bitmap;
            }

            bitmap = BitmapFactory.decodeResource(getResources(), images.get(position), options);

            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    imageView.setImageBitmap(bitmap);
                }
            });

            try {
                Thread.sleep(5);
            } catch (InterruptedException e) {}

            position++;
            if(position >= images.size())
                position = 0;
        }
    }
};
Thread t = new Thread(runnable);
t.start(); 
```

我的想法是 ImageView.setImageBitmap(Bitmap) 在下一个 vsync 上绘制位图，但是，当这种情况发生时，我们可能已经在解码下一个位图，因此，我们已经开始修改位图像素。我在思考正确的方向吗？

有人对从这里去哪里有任何提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T04:04:05.877

您应该使用 ImageView 的 onDraw() 方法，因为当视图需要在屏幕上绘制其内容时会调用该方法。

我创建了一个名为 MyImageView 的新类，它扩展了 ImageView 并覆盖了 onDraw() 方法，该方法将触发回调以让侦听器知道该视图已完成绘制

```
public class MyImageView extends ImageView {

    private OnDrawFinishedListener mDrawFinishedListener;

    public MyImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        if (mDrawFinishedListener != null) {
            mDrawFinishedListener.onOnDrawFinish();
        }
    }

    public void setOnDrawFinishedListener(OnDrawFinishedListener listener) {
        mDrawFinishedListener = listener;
    }

    public interface OnDrawFinishedListener {
        public void onOnDrawFinish();
    }

} 
```

在 MainActivity 中，定义 3 个位图：一个对 ImageView 用于绘制的位图的引用，一个用于解码，一个对回收用于下一次解码的位图的引用。我重用了 vminorov 答案中的同步块，但在代码注释中放置了不同的地方并有解释

```
public class MainActivity extends Activity {

    private Bitmap mDecodingBitmap;
    private Bitmap mShowingBitmap;
    private Bitmap mRecycledBitmap;

    private final Object lock = new Object();

    private volatile boolean ready = true;

    ArrayList<Integer> images = new ArrayList<Integer>();
    int position = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        images.add(R.drawable.black);
        images.add(R.drawable.blue);
        images.add(R.drawable.green);
        images.add(R.drawable.grey);
        images.add(R.drawable.orange);
        images.add(R.drawable.pink);
        images.add(R.drawable.red);
        images.add(R.drawable.white);
        images.add(R.drawable.yellow);

        final MyImageView imageView = (MyImageView) findViewById(R.id.image);
        imageView.setOnDrawFinishedListener(new OnDrawFinishedListener() {

            @Override
            public void onOnDrawFinish() {
                /*
                 * The ImageView has finished its drawing, now we can recycle
                 * the bitmap and use the new one for the next drawing
                 */
                mRecycledBitmap = mShowingBitmap;
                mShowingBitmap = null;
                synchronized (lock) {
                    ready = true;
                    lock.notifyAll();
                }
            }
        });

        final Button goButton = (Button) findViewById(R.id.button);

        goButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Runnable runnable = new Runnable() {
                    @Override
                    public void run() {
                        while (true) {
                            BitmapFactory.Options options = new BitmapFactory.Options();
                            options.inSampleSize = 1;

                            if (mDecodingBitmap != null) {
                                options.inBitmap = mDecodingBitmap;
                            }

                            mDecodingBitmap = BitmapFactory.decodeResource(
                                    getResources(), images.get(position),
                                    options);

                            /*
                             * If you want the images display in order and none
                             * of them is bypassed then you should stay here and
                             * wait until the ImageView finishes displaying the
                             * last bitmap, if not, remove synchronized block.
                             * 
                             * It's better if we put the lock here (after the
                             * decoding is done) so that the image is ready to
                             * pass to the ImageView when this thread resume.
                             */
                            synchronized (lock) {
                                while (!ready) {
                                    try {
                                        lock.wait();
                                    } catch (InterruptedException e) {
                                        e.printStackTrace();
                                    }
                                }
                                ready = false;
                            }

                            if (mShowingBitmap == null) {
                                mShowingBitmap = mDecodingBitmap;
                                mDecodingBitmap = mRecycledBitmap;
                            }

                            runOnUiThread(new Runnable() {
                                @Override
                                public void run() {
                                    if (mShowingBitmap != null) {
                                        imageView
                                                .setImageBitmap(mShowingBitmap);
                                        /*
                                         * At this point, nothing has been drawn
                                         * yet, only passing the data to the
                                         * ImageView and trigger the view to
                                         * invalidate
                                         */
                                    }
                                }
                            });

                            try {
                                Thread.sleep(5);
                            } catch (InterruptedException e) {
                            }

                            position++;
                            if (position >= images.size())
                                position = 0;
                        }
                    }
                };
                Thread t = new Thread(runnable);
                t.start();
            }
        });

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T15:32:38.183

您需要执行以下操作才能摆脱此问题。

1.  添加额外的位图以防止 ui 线程绘制位图而另一个线程正在修改它的情况。
2.  实现线程同步以防止后台线程尝试解码新位图但前一个位图未由 ui 线程显示的情况。

我已经稍微修改了你的代码，现在它对我来说很好用。

```
package com.example.TearingExample;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

import java.util.ArrayList;

public class MainActivity extends Activity {
    ArrayList<Integer> images = new ArrayList<Integer>();

    private Bitmap[] buffers = new Bitmap[2];
    private volatile Bitmap current;

    private final Object lock = new Object();
    private volatile boolean ready = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        images.add(R.drawable.black);
        images.add(R.drawable.blue);
        images.add(R.drawable.green);
        images.add(R.drawable.grey);
        images.add(R.drawable.orange);
        images.add(R.drawable.pink);
        images.add(R.drawable.red);
        images.add(R.drawable.white);
        images.add(R.drawable.yellow);

        final ImageView imageView = (ImageView) findViewById(R.id.image);
        final Button goButton = (Button) findViewById(R.id.button);

        goButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Runnable runnable = new Runnable() {
                    @Override
                    public void run() {
                        int position = 0;
                        int index = 0;

                        while (true) {
                            try {
                                synchronized (lock) {
                                    while (!ready) {
                                        lock.wait();
                                    }
                                    ready = false;
                                }

                                BitmapFactory.Options options = new BitmapFactory.Options();

                                options.inSampleSize = 1;
                                options.inBitmap = buffers[index];

                                buffers[index] = BitmapFactory.decodeResource(getResources(), images.get(position), options);
                                current = buffers[index];

                                runOnUiThread(new Runnable() {
                                    @Override
                                    public void run() {
                                        imageView.setImageBitmap(current);
                                        synchronized (lock) {
                                            ready = true;
                                            lock.notifyAll();
                                        }
                                    }
                                });

                                position = (position + 1) % images.size();
                                index = (index + 1) % buffers.length;

                                Thread.sleep(5);
                            } catch (InterruptedException ignore) {
                            }
                        }
                    }
                };
                Thread t = new Thread(runnable);
                t.start();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T04:09:23.210

作为当前方法的替代方法，您可能会考虑保留 JPEG 数据，但也为每个图像创建单独的位图，并使用`inPurgeable`和`inInputShareable`标志。这些标志在不由 Java 垃圾收集器直接管理的单独堆上为您的位图分配后备内存，并允许 Android 本身在没有空间时丢弃位图数据，并在需要时按需重新解码您的 JPEG . Android 拥有所有这些专用代码来管理位图数据，那么为什么不使用它呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:44:09.260

在 BM.decode(resource... 中是否涉及网络？

如果是，那么您需要优化网络连接上的前瞻连接和数据传输以及优化位图和内存的工作。这可能意味着使用您的连接协议（我猜是 http）擅长低延迟或异步传输。确保您传输的数据不超过您的需要？在创建优化对象以填充局部视图时，位图解码通常会丢弃 80% 的像素。

如果用于位图的数据已经是本地的并且不担心网络延迟，那么只需专注于保留集合类型 DStructure(listArray) 来保存 UI 将在页面转发、页面返回事件上交换的片段。

如果您的 jpegs（pngs 对于位图操作 IMO 是无损的）每个约为 100k，则您可以使用 std 适配器将它们加载到片段中。如果它们更大，那么您将不得不找出与解码一起使用的位图“压缩”选项，以免在片段数据结构上浪费大量内存。

如果您需要一个 theadpool 来优化位图创建，那么请这样做以消除该步骤涉及的任何延迟。

我不确定它是否有效，但如果你想变得更复杂，你可以考虑在与适配器协作的 listArray 下放置一个循环缓冲区或其他东西？

IMO - 一旦你有了结构，页面之间的事务切换应该非常快。我对内存中大约 6 张图片有直接的经验，每张图片的大小都在 200k 左右，并且在 page-fwd、page-back 处速度很快。

我使用[这个应用程序](https://github.com/jfeinstein10/SlidingMenu)作为框架，专注于“页面查看器”示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T01:55:39.743

它与图像缓存、asycTask 处理、网络后台下载等有关。请阅读此页面：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

如果您下载并查看该页面上的示例项目 bitmapfun，我相信它会解决您的所有问题。这是一个完美的样本。

# android - 尝试插入表时Android SQLite数据库错误

> ID：15433287
> 
> 赞同：3
> 
> 时间：2013-03-15T13:05:54.793
> 
> 标签：android, database, sqlite

在我的项目中，添加一个函数以将元素插入到类中的数据库中`public class DBHelper extends SQLiteOpenHelper`。该函数如下所示。

```
public void insertIntoDatabase(String field_one,String field_two){
    String sql = "INSERT INTO UserTable.NAME (COL_USERNAME, COL_PASSWORD) " +
            "VALUES (" + field_one + ", " + field_two + ")";
    db.execSQL(sql); 
```

在主要活动中读取名称和密码并调用函数插入数据库

```
DBHelper dbhelper;

dbhelper.insertIntoDatabase(rdname.getText().toString(), rdpwrd.getText().toString()); 
```

但是出现了错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:16:20.323

我非常推荐您使用`db.insert()`直接指定用于向表中插入新行的 SQLiteDatabase 的 API 方法。该解决方案更清洁。

```
public void insertIntoDatabase(String field_one, String field_two){
   ContentValues data = new ContentValues();
   data.put("COL_USERNAME", field_one);
   data.put("COL_PASSWORD", field_two);
   if (db == null) {
      // make sure that your db is properly initialised
   }
   db.insert("tablename", "nullColumnHack", data);
} 
```

**nullColumnHack**的解释：

 **> 如果您提供的值为空，则表示不知道列名并且无法插入空行。如果未设置为 null，则 nullColumnHack 参数提供可空列名称的名称，以便在您的值为空的情况下显式插入 NULL。

这意味着如果您传递空的 ContentValues ，`Android SQLite`您必须指定一列将分配给该列。`NULL`

如果您想使用您的方法，我建议您使用占位符。

```
String sql = "INSERT INTO UserTable.NAME (COL_USERNAME, COL_PASSWORD) " +
            "VALUES (?, ?)";
    db.execSQL(sql, new String[] {field_one, field_two}); 
```

**注意：**可能它不起作用，因为您没有使用**单引号**。

```
VALUES ("' + field_one + '", "' + field_two + '")" 
```

并确保给定的表名是正确的。我建议创建将保存表名和列名的静态变量。

```
public static final String TABLE_NAME = "Table";
String query = "insert into " + ClassName.TABLE_NAME + " values(?, ?)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:25:25.690

您的 sql 字符串不会将静态变量与 SQL 语句的其余部分分开。这应该解决它：

```
String sql = "INSERT INTO " + UserTable.NAME + "(" + COL_USERNAME + "," + COL_PASSWORD ") VALUES (" + ... 
```

只需确保 UserTable.NAME 是表名，并且它的字段名称与 COL_USERNAME 和 COL_PASSWORD 的值完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T18:24:59.680

```
String sql = "INSERT INTO UserTable.NAME (COL_USERNAME, COL_PASSWORD) " +
             "VALUES ("+'" + field_one + "', '" + field_two + "'+")"; 
```

列的值应该在`''`单引号字符串中......**

# asp.net - Microsoft 是否定期更新浏览器定义文件？

> ID：15433288
> 
> 赞同：2
> 
> 时间：2013-03-15T13:06:08.237
> 
> 标签：asp.net, .net, mobile, browser, asp.net-mvc-4

我一直在熟悉 MVC4 和自定义显示模式。一切看起来都很好，但是，假设我的想法是正确的`Request.Browser.IsMobileDevice`——`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\Browsers`有人知道微软是否定期更新这些（即每次从 Windows Update 更新 .NET 4.0 时）？

概括地说，Request.Browser.IsMobileDevice 非常有用。替代方案是（除了自定义显示模式）诸如 WURFL 之类的东西 - 但可能会占用更多资源，而且 WURFL 肯定会增加应用程序启动时间约 2.5 秒。

如果有人对此有任何想法，或者是否有任何类型的项目具有自定义/定期更新的浏览器定义，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:31:58.073

你真的应该考虑响应式网页设计。

每年市场上都会出现如此多的新设备，依靠 MS 来更新定义文件是可笑的。几年前我们犯了这个错误，很快意识到它是不可维护的。

看看 twitter boostrap 代替：

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

这是一个非常棒的 UI 框架，非常值得探索。

一旦你进入了响应式设计的思维方式，你就再也不会回去了——这确实是 Web UI 的未来。

# python - 在python中绘制动态图

> ID：15433289
> 
> 赞同：2
> 
> 时间：2013-03-15T13:06:13.317
> 
> 标签：python, drawing

我很难找到一个绘制**图形结构**（如树/状态机）的`python`代码示例，您可以**将数据输入/流式传输**到其中，以便绘制最新数据。

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:27:15.953

如果我理解正确，这段代码应该可以解决问题：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sys
import threading
import time

import networkx as nx # http://networkx.github.com/
import xdot # http://code.google.com/p/jrfonseca/wiki/XDot
import gtk

class MyClass(threading.Thread):

    def __init__(self):
        threading.Thread.__init__(self) 
        self.graph = nx.DiGraph(name="my_tree")
        self.xdot = xdot.DotWindow()
        self.xdot.connect('destroy', gtk.main_quit)

    def run(self):
        gtk.main()

    def add_node(self, parent, node):

        self.graph.add_edge(parent, node)
        self.xdot.set_dotcode(nx.to_agraph(self.graph).to_string())
        self.xdot.show_all()

def main(argv=None):

    gtk.gdk.threads_init()
    my_class = MyClass()
    my_class.start()

    my_class.add_node(1, 2)
    time.sleep(0.5)
    my_class.add_node(1, 3)
    time.sleep(0.3)
    my_class.add_node(2, 4)
    time.sleep(1.3)
    my_class.add_node(2, 5)
    my_class.add_node(1, 6)

if __name__ == "__main__":
    sys.exit(main()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:14:57.683

如果您要更新文件，然后定期从单独的进程中读取它，您可能需要考虑只编写一个简单的 Web 服务器并将您的浏览器用作 UI，然后使用 JSON，客户端定期请求数据。

你考虑过使用[IPython](http://ipython.org/)吗？[他们的 HTML Notebook 对使用matplotlib](http://matplotlib.org/)进行渲染有很好的支持。你可能仍然需要做一些 JavaScript 来获得你想要的东西，但是他们已经在那里做了很多工作，这些工作可以在开发者的 GitHub 帐户和其他东西上找到，但还没有在 master 中。

他们也有一个 Qt 控制台，它可能能够更好地执行您想要的操作。****

# java - 在 c++ 和 Java 之间使用共享对象的 SIGSEGV 错误

> ID：15433291
> 
> 赞同：2
> 
> 时间：2013-03-15T13:06:16.830
> 
> 标签：java, c++, android-ndk, java-native-interface, swig

几个星期以来我遇到了一个问题，我需要知道我的直觉是否正确。我的 Android 应用程序正在使用 c++ 库，并且每隔一段时间就会触发一次 SIGSEGV 错误。

我有一个用 C++ 编写的 NetworkThread，它从服务器接收更新对象。我有一个用 Java 编写的 WorkerThread，它询问 NetworkThread 是否每 0.5 秒有新的更新。

我使用 SWIG 生成的 JNI 包装器在 c++ 和 Java 之间进行通信。

在 NetworkThread 中，我们有一个`std::vector`包含所有新更新的内容。

WorkerThread (Java) 使用这一行来获取一个新的 Update 对象：

```
Update u = nwt.nextUpdate(); 
```

然后在 NetworkThread (c++) 中触发以下代码：

```
Update NetworkThread::nextUpdate() {
    pthread_mutex_lock(&nwt_mutex);
    pthread_mutex_lock(&inQ_mutex); // RACING CONDITION
    Update c = inQ.front();
    inQ.erase(inQ.begin());
    if (inQ.size() <= QUEUE_SIZE) {
        pthread_cond_broadcast(&inQ_threshold_cv);
    }
    pthread_mutex_unlock(&inQ_mutex);
    pthread_mutex_unlock(&nwt_mutex);
    return c;
} 
```

该行`Update c = inQ.front();`制作对象的浅表副本（更新不会覆盖 = 运算符）。我认为这很糟糕，因为 Update 包含对其他对象（和对象向量）的引用。

然后`inQ.erase(inQ.begin());`调用该行，从 std::vector 的文档中删除的元素被销毁。**这是否意味着此时对 c 中的对象和向量的引用不再有效？**

使用此 JNI 片段将 Update 对象发送回 Java 后：

```
 // Retrieve the current JNIEnv* with the cached JVM
    int status;
    JNIEnv* env;
    bool isAttached = false;

    status = gCachedJVM->GetEnv((void **) &env, JNI_VERSION_1_2);
    if(status < 0) {
        status = gCachedJVM->AttachCurrentThread(&env, NULL);
        if(status < 0) {
            return;
        }
        isAttached = true;
    }

    jmethodID update = env->GetMethodID(gClazzUpdateListenerWrapper, "update", "(J)V"); // J stands for Java long type

    // Call Java method update from jUpdateListener object
    env->CallVoidMethod(jUpdateListener, update, (jlong)(intptr_t)&u); // Pointer as agument, we'll build the Update object in Java

    if (isAttached) {
        gCachedJVM->DetachCurrentThread();
    } 
```

在这里，我向 Java 发送一个地址（长），然后像这样构建对象（我使用 SWIG 生成的默认构造函数）：

```
 Player p1;

public void update(long ptrUpdate) {
    final Update u = new Update(ptrUpdate, false);
            p1 = u.getEntity(0).toPlayer();
            ...
    } 
```

**像我一样这样做是不好的做法吗？**我认为用 long 这样做是不好的，但是如果地址已分配并且有效，那么应该没有任何问题吧？

无论如何，这似乎工作得很好，直到我收到一个 SIGSEGV 错误（没有更多信息），我怀疑这是因为我一直使用对已被销毁和收集的对象的引用。

# java - 主类 java.sql.SQLException 中的异常：超过锁定等待超时；尝试重启事务

> ID：15433297
> 
> 赞同：0
> 
> 时间：2013-03-15T13:06:30.213
> 
> 标签：java, mysql, exception

执行 java 程序时出现以下错误

```
 Exception in main class java.sql.SQLException: Lock wait timeout exceeded; try restarting transaction 
```

**程序：**

```
 String query = "select id from testtable where status=\"" + 1 + "\" limit 10";
                    PreparedStatement s = conn.prepareStatement(query);
                    ResultSet res = s.executeQuery();

                   while (res.next()) {

                        CId = res.getString(1);
                        System.out.println("cid:"+CId);

               String delquery = "delete from testtable2 where comid=\"" + CId + "\"";
                    PreparedStatement pre = conn.prepareStatement(delquery);
                    System.out.println("del:"+pre.executeUpdate());

            String delquery2 = "delete from testtable where id=\"" + CId + "\"";
                    PreparedStatement pre2 = conn.prepareStatement(delquery2);
                    pre2.executeUpdate();
} 
```

# iphone - 如何在 ObjectiveC 中发布（HTTP POST）压缩文件和参数？

> ID：15433300
> 
> 赞同：1
> 
> 时间：2013-03-15T13:06:40.633
> 
> 标签：iphone, web-services, file-upload, http-post, zipfile

我试图将 Zipfile 和一些参数发布到 Web 服务，但我得到响应“缺少电子书文件”，所以如何在 Objectivec 中发布 zip 文件和参数请帮助我

提前致谢

我试过这个：

```
 NSString *urlString1 = [NSString stringWithFormat:@"http://www.EbookFile.com/index.php?q=api/upload&APPkey=dfsfwerwe324342323432"];

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
                [request setURL:[NSURL URLWithString:urlString1]];
                [request setHTTPMethod:@"POST"];

                    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
                    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
                    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];
                    NSMutableData *body = [NSMutableData data];

                // Parameter 1

                [body appendData:[[NSString stringWithFormat:@"--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"uid\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[uid dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

                        // Parameter 2

                [body appendData:[[NSString stringWithFormat:@"--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"title\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[titleText.text dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

                // Parameter 3

                [body appendData:[[NSString stringWithFormat:@"--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"token\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[token dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

                // Parameter 4

                [body appendData:[[NSString stringWithFormat:@"--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"desc\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[descText.text dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

                // Parameter 5

                [body appendData:[[NSString stringWithFormat:@"--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"cat\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[CatId dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

        // ZIP File Post here

                int r = arc4random() % 8000000;
                NSString *RandomNumber = [NSString stringWithFormat:@"%d",r];
                NSString *file = [RandomNumber stringByAppendingString:@".zip"];

                NSData *Filedata = [NSData dataWithContentsOfURL:[NSURL fileURLWithPath:archivePath]]; // ZIP file convert to NAData here

                [body appendData:[[NSString stringWithFormat:@"Content-Disposition: attachment; name=\"file\"; filename=\"%@\"\r\n",file] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                [body appendData:Filedata];
                [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [request setHTTPBody:body];

                // pointers to some necessary objects
                NSHTTPURLResponse* response =[[NSHTTPURLResponse alloc] init];
                NSError* error = [[NSError alloc] init] ;

                // synchronous filling of data from HTTP POST response
                NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

                if (error)
                {
                }

 NSString *responseString = [[[NSString alloc] initWithBytes:[responseData bytes]
                                                                     length:[responseData length]
                                                                   encoding:NSUTF8StringEncoding] autorelease]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:12:13.833

尝试以这种方式发送文件您的文件

```
 NSUInteger length = [myData length];
    NSData *filedata;
         Byte *byteData = (Byte *)malloc(length);
        [data getBytes:byteData length:length];

       [postbody appendBytes:(const void *)byteData length:length]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:16:24.027

首先，有不同风格的 Web 服务，而且您还没有指定要处理的内容。它是基于 SOAP 的服务吗？休息？XML-RPC？为了便于讨论，我假设它是一个 RESTful 服务，因为现在大多数人似乎都会去那里。

我看到的问题是您试图将参数放在帖子的正文中。您必须检查您正在使用的特定 API 的文档，但通常参数是作为您发布到的 URL 中的查询参数提供的，或者在您在请求中发送的标头中指定。请求的正文应该是压缩数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:58:38.860

```
 NSString *urlString1 = [NSString stringWithFormat:@"http://www.efferwrwre.com/index.php?q=api/upload&key=f5746442fb9067b3fba83c3da0351f1f"];
    NSLog(@"URLSTribg : %@", urlString1);
    NSString *ww = [urlString1 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:ww]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];
    NSMutableData *body = [NSMutableData data];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"uid\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[uid dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"title\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[titleText.text dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"token\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[token dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"desc\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[descText.text dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"cat\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[CatId dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    int r = arc4random() % 8000000;
    NSString *RandomNumber = [NSString stringWithFormat:@"%d",r];
    NSString *file = [RandomNumber stringByAppendingString:@".zip"];

    NSData *Filedata = [NSData dataWithContentsOfURL:[NSURL fileURLWithPath:archivePath]];
    NSLog(@"file:%@",Filedata);

    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"file\"; filename=\"%@\"\r\n",file] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:Filedata];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];

 NSHTTPURLResponse* response =[[NSHTTPURLResponse alloc] init];
    NSError* error = [[NSError alloc] init] ;

    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    if (error)
    {

    }

    NSString *responseString = [[[NSString alloc] initWithBytes:[responseData bytes]
                                                         length:[responseData length]
                                                       encoding:NSUTF8StringEncoding] autorelease];
    NSLog(@"%@", responseString); 
```

# python - 将 Python 命令行输入转换为 Tkinter 打开文件对话框小部件

> ID：15433301
> 
> 赞同：0
> 
> 时间：2013-03-15T13:06:41.230
> 
> 标签：python, tkinter

我正在使用 Tkinter 将 GUI 添加到命令行 python 程序。到目前为止，我已经在我的 GUI 上的文本小部件中将现有程序作为子进程运行。原始文件的用法是：

Python [脚本] -i [文件路径]

我想知道是否可以更改“-i”参数，以便我可以用 Tkinter 打开文件对话框中的输入替换它。如果是这样，我们将非常感谢您朝正确的方向轻推！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-22T12:53:10.833

打开文件对话框返回一个字符串，如下所示： `C:/path/filename.cmd`. 使用以下代码行来检索它：

```
str = filedialog.askopenfilename() 
```

你对你是如何实现这个命令的还不够清楚。如果它被实现为一个文本字符串，例如你的程序被设置为写入一个`exe`文件，你所要做的就是将程序插入到字符串中，如下所示：

```
text = "Python [SCRIPT] " + str + " [PATH TO FILE]" 
```

否则，让 Python 代码使用包含此输入的字符串编写另一个 Python 代码并运行它。

# asp.net - 将自动完成扩展器的建议与文本框对齐

> ID：15433304
> 
> 赞同：0
> 
> 时间：2013-03-15T13:06:49.083
> 
> 标签：asp.net, autocompleteextender

我在 asp.net 中使用 autocompleteextender。当我输入关键字时，我得到的建议与文本框不一致。我希望它与我的文本框对齐。我该怎么做？

![在此处输入图像描述](../Images/8fb8ef76d0cd9c7375655abd77e2249b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:09:03.913

尝试摆弄 css，也许进入左侧的 -'s 以使其越过，否则我推荐[Jquery](http://jqueryui.com/autocomplete/)

# iphone - iPhone - 如何引用容器中的文本框

> ID：15433307
> 
> 赞同：2
> 
> 时间：2013-03-15T13:07:10.290
> 
> 标签：iphone, ios

我有一个 UIViewController，里面有一个 Container。Container 内的视图是一个带有静态表的 UITableViewController。它里面有两个文本框。我想以与父视图中相同的方式引用文本框。这意味着我想将父级设置为文本框的代表。有没有办法轻松做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:43:30.630

事实证明，我缺少的部分是使用 segue 设置对容器的视图控制器的引用（它需要是自定义的，并且在 .h 中定义了要引用的元素作为出口。

所以总结一下：

*   创建自定义视图控制器
*   将要引用的元素拖到该自定义视图控制器的 .h 文件中
*   使用 prepareForSegue 方法设置对容器视图控制器的引用
*   在您的 viewDidAppear 方法中设置委托，就像您在父视图控制器中设置项目一样。

# c# - 查找 Control() 不起作用

> ID：15433311
> 
> 赞同：3
> 
> 时间：2013-03-15T13:07:20.777
> 
> 标签：c#, asp.net

我在按钮单击事件中创建了 5 个文本框，当单击动态生成的按钮时，我必须获取文本框中的值。

```
protected void Button1_Click(object sender, EventArgs e)
 {
  for(int i=0;i<5;i++)
  {
   HtmlGenericControl tr = new HtmlGenericControl("tr");
   HtmlGenericControl td = new HtmlGenericControl("td");
   HtmlGenericControl tdbtn = new HtmlGenericControl("td");           
   TextBox txt=new TextBox();
   txt.ID="txt_"+i.ToString();
   td.Controls.Add(txt);  
   Button btn=new Button();
   btn.ID="btn_"+i.ToString();
   btn.Click+=new EventHandler(btnpay_Click);
   btn.Text="Pay";    
   tdbtn.Controls.Add(btn);        
   tr.Controls.Add(td);
   tr.Controls.Add(tdbtn);
   PlaceHolder1.Controls.Add(tr);
} 
```

}

但我无法在**btnpay_Click的文本框中获取值**

```
protected void btnpay_Click(object sender, EventArgs e)
    {

        Button btn = new Button();
        btn = sender as Button;
        string[] splitvaues = btn.ID.Split('_');
        string identity = splitvaues[1];
        TextBox txt = new TextBox();
        txt =PlaceHolder1.FindControl("txt_" + identity) as TextBox;

} 
```

任何人都可以告诉我解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T13:23:00.730

您的问题是[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)不会递归控制树。它只在容器的[ControlCollection中直接搜索控件。](http://msdn.microsoft.com/en-us/library/system.web.ui.controlcollection.aspx)

> 只有当控件直接包含在指定容器中时，此方法才会找到控件；也就是说，该方法不会在控件内的控件层次结构中进行搜索。

您需要编写一个递归 FindControl。就像是：

```
public static Control FindControlRecursive(this Control control, string id)
{
  if (control == null || control.ID == id) return control;

  foreach (var c in control.Controls)
  {
    var found = c.FindControlRecursive(id);
    if (found != null) return found;
  }

  return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:45:29.387

试试这个代码.....

```
protected void Page_Load(object sender, EventArgs e)
    {

        if (IsPostBack)
        {
            createcontrol();
        }
    }
private void createcontrol()
    {

        for (int i = 0; i < 5; i++)
        {
            HtmlGenericControl tr = new HtmlGenericControl("tr");
            HtmlGenericControl td = new HtmlGenericControl("td");
            HtmlGenericControl tdbtn = new HtmlGenericControl("td");
            TextBox txt = new TextBox();
            txt.ID = "txt_" + i.ToString();
            td.Controls.Add(txt);
            Button btn = new Button();
            btn.ID = "btn_" + i.ToString();
            btn.Click += new EventHandler(btnpay_Click);
            btn.Text = "Pay";
            tdbtn.Controls.Add(btn);
            tr.Controls.Add(td);
            tr.Controls.Add(tdbtn);
            plh1.Controls.Add(tr);
        }
    }
protected void btnpay_Click(object sender, EventArgs e)
    {

        Button btn = new Button();
        btn = sender as Button;
        string[] splitvaues = btn.ID.Split('_');
        string identity = splitvaues[1].ToString();
        TextBox txt = new TextBox();
        txt = plh1.FindControl("txt_" + identity) as TextBox;
        string q = txt.Text;

    }
 protected void Button1_Click(object sender, EventArgs e)
    {
        createcontrol();
} 
```

# kohana - kohana 3.3 获取数组中的下一个值

> ID：15433312
> 
> 赞同：0
> 
> 时间：2013-03-15T13:07:22.837
> 
> 标签：kohana, kohana-3.3

我有一个使用 kohana 3.3 从数据库调用的数组我已经将数据获取到视图中，我可以使用 print_r($variable) 获取它。我想根据数组中的数据创建一个 movenext、movefirst、moveprevious 和 movelast 按钮。

我的模型看起来像这样

```
 public function get_customer_list(){    
$cust_list= DB::select('*')->from('customers')
                    ->order_by('id','ASC') 
                    ->execute()
                    ->as_array();
//print_r($cust_list);                  
return $cust_list; 
```

我的控制器看起来像这样

```
 $id=@$_POST["id"];
    //echo $id;
$amend  = Model::factory('amendments')->get_customer_list(@$d);
$this->page_title = 'amending';
$this->content = View::factory('forms/amendment_next');
//$this->rightwidget =view::factory('rightwidget');
$this->amend = $amend;
$this->next = $id; 
```

我的观点看起来像这样

```
foreach ($amend[0] as $key=>$value){
        echo '<p><span>'.$key.'</span><input id="'.$next.'" class="contact" type="text" name="'.$key.'"value="'.$value.'" /></p>';          
                    }
<a href="#" id="getnext">Next Record</a>
<a href="javascript:void(0);" id="previous">Previous Record</a><button >Next Record</button><button>Last Record</button> 
```

我不介意使用链接或按钮

请帮助我在这里堆栈，我的大脑被锁定了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:59:31.133

在你看来试试这个，只需要一些 javascript 代码（我用过 jQuery）

---next() 示例---

```
$(document).ready(function (){
    var customers = <?php echo json_encode($amend) ?>;
    var count = 0;

    function nextItem(){
        if(count >= customers.length )return;
        console.log("customer:",customers[count]['id'],customers[count]['name']);
        count =++count;
    }
}) 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:07:00.270

您的控制器应如下所示：

```
$id=@$_POST["id"];
//echo $id;
$amend  = Model::factory('amendments')->get_customer_list(@$d);
$this->page_title = 'amending';
$inputArray = array('amend'=>$amend, 'id'=>$id);

$this->content = View::factory('forms/amendment_next',$inputArray);
//$this->rightwidget =view::factory('rightwidget'); 
```

您要么必须将要在视图中使用的变量作为关联数组直接传递给工厂，要么必须使它们对工厂全局可用。

您的视图应如下所示：

```
<? 
foreach ($amend[0] as $key=>$value){
        echo '<p><span>'.$key.'</span><input id="'.$next.'" class="contact" type="text" name="'.$key.'"value="'.$value.'" /></p>';          
}
?>
<a href="something.php?id=<? echo $id;?>" id="getnext">Next Record</a>
<a href="javascript:void(0);" id="previous">Previous Record</a><button >Next Record</button><button>Last Record</button> 
```

传递`$inputArray`给工厂后，变量`$amend`将被填充`$inputArray['amend']`并将`$id`被填充`$inputArray['id']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:59:42.047

我用你的例子来投射自己的问题。现在它在这里解决了控制器现在看起来像这样

```
 $id=@$_GET["id"];
$amend  = Model::factory('amendments')->get_customer_list(@$d);
$this->page_title = 'I&M CRB Online App amending';
$this->content = View::factory('forms/amendments');
//$this->rightwidget =view::factory('rightwidget');
$this->amend = $amend;
$this->next = $id; 
```

视图看起来像这样

```
 <?php 
if (!$next){
$next = "0";}

$nextid = $next+"1";
$previd=$next-"1";
?>
<a href="<?php echo HTTP_PATH; ?>/amend/getnext/?id=<? echo "0"; ?>">First Record </a> |
<a href="<?php echo HTTP_PATH; ?>/amend/getnext/?id=<? echo $previd;?>">Previous Record</a> |
<a href="<?php echo HTTP_PATH; ?>/amend/getnext/?id=<? echo $nextid;?>">move next</a> |
<a href="<?php echo HTTP_PATH; ?>/amend/last">Last Record</a> 
<?php
        foreach (@$amend[@$next] as $key=>$value){
        echo "<p><span>".$key."</span><input class='contact' type='text' name='".$key."'value='".$value."' /></p>"; 
}   

?> 
```

对于最后一条记录，我不得不使用不同的模型函数

```
public function get_last_customer(){    
    $last_customer= DB::select()->from('customers')
                        ->order_by('id','DESC')
                        ->limit(1)
                        ->execute()
                        ->as_array();
    return $last_customer; 
```

感谢大家对我的支持和回答。

# c++ - 从 HBITMAP 转换为 IWICBitmap

> ID：15433318
> 
> 赞同：0
> 
> 时间：2013-03-15T13:07:46.320
> 
> 标签：c++, visual-studio-2010, image, bitmap, wic

我正在尝试将 HBITMAP 转换为 IWICBitmap，但遇到了很多麻烦。我找到了这个功能：

```
CreateBitmapFromHBITMAP(); 
```

但我无法让它工作。这是我使用它的方式：

```
void camera_avtcam_ex_t::GrabAsyncFrame(ULONG frameId, IWICImagingFactory* pWicFactory, IWICBitmap** outputBitmap, bool* pAbort )
{

        QueueCamFrame();
        HBITMAP transferbitmap;
        GetFeatureAndRunAcquisitionStart(transferbitmap); //returns transferbitmap 
                                                          //as a valid HBITMAP
       //This HBITMAP works, I can save it to a file and/or print 
       //it to the screen and the image is displayed properly

        pWicFactory->CreateBitmapFromHBITMAP(transferbitmap, NULL, WICBitmapUseAlpha, outputBitmap);

} 
```

在函数中执行最后一行代码会导致***访问冲突错误。***

在调用这个`GrabAsyncFrame()`函数之前，我创建了它需要的参数，如下所示：

```
 ULONG frameId = 0;
        IWICImagingFactory* pWicFactory = NULL;
        IWICBitmap** outputBitmap = new IWICBitmap*;
        bool* pAbort = NULL;

        theCamera.GrabAsyncFrame(frameId, pWicFactory, outputBitmap, pAbort); 
```

我有点怀疑将 pWicFactory 设置为 NULL，然后很快就使用它。但我想不出任何其他方法来初始化 IWICImagingFactory 对象。

**所以我的问题是：** 下面发布了新问题。

编辑：如果我尝试使用`new`初始化 pWicFactory，我会收到一条消息说

> 错误：不允许抽象类类型“IWICImagingFactory”的对象。

编辑2：

在确认将 pWicFactory 设置为 NULL 是问题后，我现在需要知道如何正确初始化 IWICImagingFactory 对象指针。这就是我现在正在使用的：

```
 ULONG frameId = 0;
            IWICImagingFactory* pWicFactory = NULL;
/*new code*/CoCreateInstance(CLSID_WICImagingFactory, NULL, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&pWicFactory));
            IWICBitmap** outputBitmap = new IWICBitmap*;
            bool* pAbort = NULL;
            theCamera.GrabAsyncFrame(frameId, pWicFactory, outputBitmap, pAbort); 
```

**问题：** *如何正确初始化 IWICImagingFactory 对象指针？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:12:37.403

本声明

```
IWICImagingFactory* pWicFactory = NULL; 
```

是罪魁祸首。

您正在传递一个`NULL`指向该函数的指针，然后您尝试使用该函数，从而导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-20T15:25:24.893

除了空指针问题之外，您可能忘记先调用`CoInitialize`：

```
IWICImagingFactory* Factory; 
```

...

```
CoInitializeEx(NULL, COINIT_MULTITHREADED); // do this during program init / before CoCreateInstance

CoCreateInstance(CLSID_WICImagingFactory, nullptr, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&Factory));

// use factory..

CoUninitialize(); // do this before program exit. 
```

请注意，如果您将工厂指针保存在 a 中`ComPtr`（我推荐），则需要在取消初始化之前释放工厂接口。在这种情况下，您应该这样做：

```
ComPtr<IWICImagingFactory> Factory; 
```

...

```
CoInitializeEx(NULL, COINIT_MULTITHREADED); // do this during program init / before CoCreateInstance

CoCreateInstance(CLSID_WICImagingFactory, nullptr, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&Factory));

// use factory..

Factory.Reset(); // do this before CoUninitialize

CoUninitialize(); // do this before program exit. 
```

还请务必检查`HRESULT`返回的`CoInitialize`和`CoCreateInstance`（为简洁起见，此处省略）...

*编辑：我现在在评论中看到这确实是你的问题。不过，我会留下我的答案，以防其他人像我一样马虎。*

# jquery - 跨域jQuery AJAX文件上传

> ID：15433319
> 
> 赞同：5
> 
> 时间：2013-03-15T13:07:47.917
> 
> 标签：jquery, ajax, nginx, cross-domain

所以重点是我有一个子域，它是用于上传文件的 API 端点。但是，当我尝试使用 jQuery 将任何内容上传到该子域（来自主 www 域）时，我遇到了错误

> XMLHttpRequest 无法加载[http://1.storage.site.net/upload](http://1.storage.site.net/upload)。Access-Control-Allow-Origin 不允许来源[http://www.site.net 。](http://www.site.net)

我尝试了一切：nginx中的标头，源代码中的标头，我什至尝试将文件发送到存根文件

```
<?php

header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
header('Access-Control-Max-Age: 1000');
header('Content-type: application/json');
header('Access-Control-Allow-Headers: *');

echo json_encode(['lulz' => 123]); 
```

用两个词来说：没有任何作用。

但。我注意到小文件（~1MB）正确上传，文件稍大（比如5MB）——不（不允许来源）。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:18:18.820

我敢打赌，5MB 文件对于 Apache 的设置（或任何名称）来说太大了`max_request_body`，导致 PHP 脚本没有被执行，因此永远无法发送这些标头，这反过来又会产生误导性的跨域错误。

如果这个假设成立，您应该在浏览器的“网络”选项卡中看到更多详细信息 - 上传脚本应该返回某种错误条件。

要进行调试，您可以进行正常的基于表单的文件上传，对其进行测试并进行调整，直到它工作为止。

# python - webapp2请求参数/处理程序参数的自动转换？

> ID：15433320
> 
> 赞同：1
> 
> 时间：2013-03-15T13:07:51.580
> 
> 标签：python, google-app-engine, python-2.7, webapp2

我有以下路线和随附的处理程序：

```
Route(r'/book/<id:\d+>', handler='handlers.BookHandler') 

def show(self, id): 
        logging.info('in show book handler... %s', id) 
        book = Book.get_by_id(long(id)) 
        self.render_response('book/show.html', book=book) 
```

要从数据存储中检索这本书，我必须将 id 请求参数显式转换为 long。

我想知道 webapp2 是否支持自动转换？我的意思是在 show 方法中收到的 id 已经很长了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:41:27.647

它们将永远是字符串。即使正则表达式只允许数字。webapp2 不支持任何自动转换。

# java - joda-time-2.2 将 LocalDateTime 转换为 java.sql.Timestamp

> ID：15433324
> 
> 赞同：1
> 
> 时间：2013-03-15T13:08:12.950
> 
> 标签：java, timestamp, jodatime

我需要一个 java.sql.Timestamp，但是当我尝试从 LocalDateTime 转换时，它失败了，因为当输入字符串转换为 LocalDateTime 时，添加了字母“T”，如 2013-03-15T00:00:00.000。有任何想法吗？或者有没有更好的方法将字符串转换为时间戳？我只是想使用 joda 以防将来需要操纵时间。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T13:15:06.570

为什么你不能

```
LocalDateTime ldt  = LocalDateTime.now();
Timestamp ts = new Timestamp(ldt.toDate().getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T21:15:04.700

使用 Java 8 time API 的最佳方式：

```
 LocalDateTime ldt = timeStamp.toLocalDateTime();
  Timestamp ts = Timestamp.valueOf(dateTime); 
```

用于与您的模型一起使用的 JPA ( [https://weblogs.java.net/blog/montanajava/archive/2014/06/17/using-java-8-datetime-classes-jpa](https://weblogs.java.net/blog/montanajava/archive/2014/06/17/using-java-8-datetime-classes-jpa) )：

```
@Converter(autoApply = true)
public class LocalDateTimeConverter implements AttributeConverter<LocalDateTime, Timestamp> {
    @Override
    public Timestamp convertToDatabaseColumn(LocalDateTime ldt) {
        return Timestamp.valueOf(ldt);
    }

    @Override
    public LocalDateTime convertToEntityAttribute(Timestamp ts) {
        return ts.toLocalDateTime();
    }
} 
```

所以现在它是相对时区独立时间。此外，它很容易做到：

```
 LocalDate ld = ldt.toLocalDate();
  LocalTime lt = ldt.toLocalTime(); 
```

格式化：

```
 DateTimeFormatter DATE_TME_FORMATTER = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm")
 String str = ldt.format(DATE_TME_FORMATTER);
 ldt = LocalDateTime.parse(str, DATE_TME_FORMATTER); 
```

# powershell - 使用 powershell 将数组写入特定的 csv 列

> ID：15433332
> 
> 赞同：0
> 
> 时间：2013-03-15T13:08:29.790
> 
> 标签：powershell, csv

我有一个 csv 文件，其中包含大量数据，其中一列是“用户名”列。我创建了一个循环来查询 AD 并获取每个用户名，现在我需要将每个名称导出到 csv 中的特定列。使用以下命令导入 csv 后：

```
$data = Import-CSV .\data.csv 
```

并使用循环：

```
foreach($user in $data) 
```

我使用`get-aduser $user -server $server`和`if($? -eq $true){ $user = $user + "01" }`

我尝试使用 `$data.Username | Export-CSV .\data.csv`，`$data.Username | out-file .\data.csv` 但到目前为止都没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:53:53.380

您需要将所有信息保留在管道中，以便重新导出整个信息。

尝试这样的事情：

```
$data | Foreach {
 get-aduser $_.Username -server $server
 if($? -eq $true){ $_.Username = $_.Username + "01" }
} | export-csv .\data.csv 
```

# java - 用 Java 开发智能代码补全

> ID：15433337
> 
> 赞同：1
> 
> 时间：2013-03-15T13:08:46.820
> 
> 标签：java

我想知道是否有办法在 java swing 环境中编写自己的代码完成。我有一个程序，想在用户打字时为他提供提示。我已经通过弹出菜单给了他们一些提示。但是，问题是它在路上。它是一个菜单，所以感觉不像 eclipse 的代码补全那么可选。你知道比弹出菜单更好的方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:14:00.737

看看[RSyntaxTextArea](http://fifesoft.com/rsyntaxtextarea/)。它支持代码完成（使用 CTRL+SPACE）、语法高亮、行号、括号匹配......您期望从代码编辑器组件中获得的许多基本功能。

# python - 如何处理下载的 json 字符串？

> ID：15433341
> 
> 赞同：1
> 
> 时间：2013-03-15T13:08:47.853
> 
> 标签：python, tkinter

我有一个 json 字符串，我试图通过使用 tkinter GUI 窗口上的标签来打印每个部分（id、名称、链接等）。

数据：

```
{"id":"123456789","name":"John Smith","first_name":"John","last_name":"Smith","link":"http:\/\/www.facebook.com\/john.smith","username":"john.smith","gender":"male","locale":"en_GB"} 
```

代码：

```
URL = https://graph.facebook.com/ + user
info = urlopen(info).read()
json_format = infor.decode("utf-8") 
```

我的问题是如何将 json 数据的每个部分分配给一个变量，它可以打印在 tkinter 标签上吗？

提前致谢

编辑

试过这段代码：

```
jsonData = json.loads(json_format)
u_name = jsoninfo['username'] 
```

并收到以下错误消息

```
TypeError: string indices must be integers 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:13:14.977

您想使用[`json`](http://docs.python.org/2/library/json.html)标准模块：

```
>>> import json
>>> data = '{"id":"123456789","name":"John Smith","first_name":"John","last_name":"Smith","link":"http:\/\/www.facebook.com\/john.smith","username":"john.smith","gender":"male","locale":"en_GB"}'
>>> d = json.loads(data) 
```

这使您的数据可以作为常规字典使用：

```
>>> d
{u'username': u'john.smith', u'first_name': u'John', u'last_name': u'Smith', u'name': u'John Smith', u'locale': u'en_GB', u'gender': u'male', u'link': u'http://www.facebook.com/john.smith', u'id': u'123456789'}
>>> d['username']
u'john.smith' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:10:56.663

```
try:
    import simplejson as json
except ImportError: 
    import json

json_data = json.dumps(info)
# info here is json string or your variable json_format 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:14:03.280

您需要导入`json`库 - 它包含在标准库中，并加载 json。这会将 json 字符串转换为您可以使用的 Python 字典。

```
import json

py_dict= json.loads(json_string)
# work away 
```

# android - 如何在当前位置获取时间（来自互联网）

> ID：15433342
> 
> 赞同：1
> 
> 时间：2013-03-15T13:08:49.810
> 
> 标签：android, date, time

可能重复：

[从互联网安卓获取数据](https://stackoverflow.com/questions/9466342/get-data-from-the-internet-android)

大家好，我正在开发一个应用程序，它可以在当前位置实时获取。我的想法是从互联网上得到的，但我不知道如何得到它。我有当前位置的纬度和经度。

我的问题：

1.  如何获取当前位置的实时时间（经度和纬度可用）
2.  教程或源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:22:03.973

尝试这个。我从某个地方得到它

我认为直接从 android SDK 是不可能的。您可以从城市名称中获取时区，但不能从 lat/long 值（请参阅 [https://developer.android.com/reference/java/util/TimeZone.html](https://developer.android.com/reference/java/util/TimeZone.html) `setID() and getAvailableIDs()`）

您可以向 Web 服务发出请求，该服务将为您提供 lat/long 的时区。有关更多信息，请参阅[http://stackoverflow.com/questions/55901/web-service-current-time-zone-for-a-city](http://stackoverflow.com/questions/55901/web-service-current-time-zone-for-a-city) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-15T15:38:02.087

现在您可以获得当前位置的时间，但为此您必须设置系统的持久默认时区。`setTimeZone(String timeZone)`可以从中得到

```
Calendar calendar = Calendar.getInstance();
 long now = calendar.getTimeInMillis();
 TimeZone current = calendar.getTimeZone(); 
```

`setAutoTimeEnabled(boolean enabled)`

设置挂钟时间是否应与来自 NTP 的自动时间更新同步。

```
TimeManager timeManager = TimeManager.getInstance();
 // Use 24-hour time
 timeManager.setTimeFormat(TimeManager.FORMAT_24);

 // Set clock time to noon
 Calendar calendar = Calendar.getInstance();
 calendar.set(Calendar.MILLISECOND, 0);
 calendar.set(Calendar.SECOND, 0);
 calendar.set(Calendar.MINUTE, 0);
 calendar.set(Calendar.HOUR_OF_DAY, 12);
 long timeStamp = calendar.getTimeInMillis();
 timeManager.setTime(timeStamp); 
```

我正在寻找那种类型的答案，我阅读了您的答案，但不满意，而且有点旧。我找到了新的解决方案并分享它。:)

欲了解更多信息，请访问：[https ://developer.android.com/things/reference/com/google/android/things/device/TimeManager.html](https://developer.android.com/things/reference/com/google/android/things/device/TimeManager.html)

# android - 三星 Galaxy S4 声音和镜头功能

> ID：15433350
> 
> 赞同：1
> 
> 时间：2013-03-15T13:09:22.563
> 
> 标签：android, android-camera

使用**声音和镜头**：**聆听您的照片**功能：

> 您在三星 Galaxy S4 上拍摄的每张照片都可以带有声音。因此，现在您可以记住所说、播放和听到的内容，而不仅仅是它的样子。

现在，我想在我的 Android 应用程序中添加此功能，在该应用程序中我还从相机捕获图像，但现在我想像上述功能一样用声音进行捕获。而且，如果我能做到这一点，那么该文件将以哪种形式保存，它将是图像、闪存还是视频，以及该文件的扩展名是什么？

任何帮助都将是非常可观的。

# c# - 为什么 HttpWebResponse.ContentLength 突然返回 -1？

> ID：15433351
> 
> 赞同：1
> 
> 时间：2013-03-15T13:09:26.293
> 
> 标签：c#, .net, httpwebresponse, http-content-length

我们这里有一个特殊的问题。我们在客户端有一个代码，可以使用 HTTPWebResponse/HttpWebRequest 从 Web 服务器下载一些文件我们`HttpWebResponse.ContentLength`用来获取文件的大小......这些天它工作正常，但突然它开始给出 -1 但是当我们绕过它工作的服务器上的负载均衡器。任何人都可以给出一个公平的想法，说明为什么会发生这种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:14:04.357

来自 MSDN 关于该[`HttpWebResponse.ContentLength`属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.contentlength.aspx)的文档：

> 如果响应中未设置 Content-Length 标头，则 ContentLength 设置为值 -1。

简单地说——服务器没有发送`Content-Length`标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:13:58.173

`HttpWebResponse.ContentLength`只报告服务器在`Content-Length`标头中发送的内容。或者，如果服务器没有发送任何内容，它可能会报告 -1。

无论问题是什么，它都与服务器有关，而不是`HttpWebResponse`.

既然您说如果禁用负载平衡器问题就会消失，我怀疑至少有一个由负载平衡器激活的服务器没有设置标头。

# java - 一个亚马逊请求可以发送多少件商品？

> ID：15433355
> 
> 赞同：2
> 
> 时间：2013-03-15T13:09:43.810
> 
> 标签：java, amazon-web-services

我尝试在我的数据库中获取电影的[ASIN](http://en.wikipedia.org/wiki/Amazon_Standard_Identification_Number)，尝试通过[EAN](http://en.wikipedia.org/wiki/International_Article_Number_%28EAN%29)进行匹配。我创建了简单的 java 类来连接亚马逊：

```
AWSECommerceServiceservice = new AWSECommerceService();
service.setHandlerResolver(new AwsHandlerResolver(AMAZON_SECRET_KEY));
AWSECommerceServicePortType port = service.getAWSECommerceServicePortDE();
Holder<OperationRequest> operationrequest = new Holder<OperationRequest>();
failedItem = 0;
doneItem = 0;

ItemLookup lookup = new ItemLookup();
lookup.setAWSAccessKeyId(AMAZON_ACCESS_ID);
lookup.setAssociateTag(ASSOCIATE_TAG);
ItemLookupRequest request = new ItemLookupRequest();
request.getResponseGroup().add("ItemAttributes");
request.setSearchIndex("Video");

request.setIdType("EAN");
//Here iterates on my amazon-movies object
   for (AmazonSIdN i : amazonItems) {
        request.getItemId().add(i.getEan());
         if (request.getItemId().size() % 10 == 0) { //numbers of items in request
             LOG.info("Request size = " + request.getItemId().size());
              break;
           }
    }
Holder<List<Items>> items = new Holder<List<Items>>();
lookup.getRequest().add(request);

port.itemLookup(lookup.getMarketplaceDomain(), lookup.getAWSAccessKeyId(), 
lookup.getAssociateTag(),lookup.getXMLEscaping(), lookup.getValidate(),  
lookup.getShared(), lookup.getRequest(),operationrequest, items);

        List<Items> result = items.value;
        for (int k = 0; k < result.get(0).getItem().size(); ++k) {
            Item i = result.get(0).getItem().get(k);
            //do something with item

        } 
```

它正在工作，但有一件事对我来说真的很奇怪。在这一行时：

```
if (request.getItemId().size() % 10 == 0) { //numbers of items in request 
```

我使用 40 000 而不是 10 WS 返回：

```
The server sent HTTP status code 413: Request Entity Too Large 
```

这是可以理解的。但是，当我输入大于 10 的数字时，WS 不会返回任何错误，但结果没有项目：

![在此处输入图像描述](../Images/cb792916531286a182ba788c830439ff.png)

谁能告诉我我做错了什么或者我忘记设置了什么？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:35:01.030

我找到了答案，所以我把它放在这里也许有人将来会节省一些时间。在 Amazon [ItemLookup](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/ItemLookup.html)文档中写着：

ItemId - 一个或多个**（最多十个）**唯一标识项目的正整数。数字的含义由 IdType 指定。也就是说，如果 IdType 为 ASIN，则 ItemId 值为 ASIN。如果 ItemIdis 是 ASIN，则无法在请求中指定搜索索引。

类型：字符串

默认值：无

约束：必须是有效的项目 ID。对于多个 ID，请使用最多十个 ID 的逗号分隔列表。

# gdb - 软件中断异常还是未定义指令异常？

> ID：15433356
> 
> 赞同：4
> 
> 时间：2013-03-15T13:09:44.340
> 
> 标签：gdb, arm, jtag, bare-metal

我正在使用 JTAG 连接器和 gdb 在裸机 ARM（符合 v5TE）上运行程序。该程序以管理员模式从某个 SDRAM 运行，并且仅使用 arm 指令。

在某些时候会发生异常。使用 ctrl+CI 停止 gdb 可以看到 CPSR 指示未定义的异常模式，但是程序计数器指示软件中断异常 ( `0xffff0008`)。根据ARM ARM，当发生未定义的指令异常时，`PC_und`应该是`0xffff0004`或`0x00000004`。我的程序发生了什么，是否发生了 SWI 或未定义的指令异常？

编辑以使我的问题更清楚：

我的程序目的是测试定制板的硬件。当出现硬件问题时，RAM 中的程序可能会损坏（如下所示），这是产生异常的原因。当硬件正常时，测试软件运行没有问题。我的 RAM 地址范围从 0 到 0x40000000，程序加载在 0x1000 和 0x2000 之间。监督模式堆栈指针设置为 0xff0。中断向量仅包含断点。

```
(gdb) c
Continuing.
^C^C
Program received signal SIGTRAP, Trace/breakpoint trap.
0xffff0008 in ?? () 
```

未定义异常模式的寄存器：

```
(gdb) i r 
r0             0x52878  338040
r1             0x2020000    33685504
r2             0x2020000    33685504
r3             0x2020000    33685504
r4             0x2020000    33685504
r5             0x2020000    33685504
r6             0x2020000    33685504
r7             0x2020000    33685504
r8             0x2020000    33685504
r9             0x2020000    33685504
r10            0x2020000    33685504
r11            0x2020000    33685504
r12            0x2020000    33685504
sp             0x2020000    0x2020000
lr             0xffff0008   4294901768
pc             0xffff0008   0xffff0008
fps            0x0  0
cpsr           0x800000db   2147483867 
```

从管理员模式注册：

```
(gdb) set $cpsr=0xd3
(gdb) i r
r0             0x52878  338040
r1             0x2020000    33685504
r2             0x2020000    33685504
r3             0x2020000    33685504
r4             0x2020000    33685504
r5             0x2020000    33685504
r6             0x2020000    33685504
r7             0x2020000    33685504
r8             0x2020000    33685504
r9             0x2020000    33685504
r10            0x2020000    33685504
r11            0x2020000    33685504
r12            0x2020000    33685504
sp             0xff3ffffe   0xff3ffffe
lr             0x1020   4128
pc             0xffff0008   0xffff0008
fps            0x0  0
cpsr           0xd3 211 
```

这是 RAM 中的（损坏的）程序，位于主管链接寄存器指向的地址周围：

```
(gdb) x/5i 0x1020-8
0x1018 <_start+24>: bic r0, r0, #135168 ; 0x21000
0x101c <_start+28>: strbcs  r0, [r0], #1025
0x1020 <_start+32>: mcr 15, 0, r0, cr1, cr0, {0}
0x1024 <_start+36>: ldr r1, [pc, #120]  ; 0x10a4 <skip_intreg_reset+100>
0x1028 <_start+40>: ldr r2, [r1, #8]

(gdb) x/4w 0x1018
0x1018 <_start+24>: 0xe3c00a01  
0x101C <_start+28>: 0xfec00401
0x1020 <_start+32>: 0xee010f10  
0x1024 <_start+36>: 0xe59f1078 
```

从程序目标文件转储：

```
 18:   e3c00a01    bic r0, r0, #4096   ; 0x1000
  1c:   e3c00001    bic r0, r0, #1  ; 0x1
  20:   ee010f10    mcr 15, 0, r0, cr1, cr0, {0}
  24:   e59f1078    ldr r1, [pc, #120]  ; a4 <skip_intreg_reset+0x64>
  28:   e5912000    ldr r2, [r1] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:06:40.577

这是一个*社区维基*答案。

该问题是由两个不同的问题引起的：

*   正在初始化错误的向量表。ARM 具有可选择的高和低向量，高`0xffff0000`是默认值，而代码被初始化，就好像向量表在`0x00000000`. 高向量表包含以下指令（异常无限循环）：

> ```
> 0xffff0000: b 0xffff0020 
> 0xffff0004: b 0xffff0004 
> 0xffff0008: b 0xffff0008 
> 0xffff000c: b 0xffff000c 
> 0xffff0010: b 0xffff0010 
> 0xffff0014: b 0xffff0014 
> 0xffff0018: b 0xffff0018 
> 0xffff001c: b 0xffff001c 
> ```

*   板上的 SDRAM 问题导致 RAM 中的程序内容损坏并产生未定义的异常。之后程序停止响应，因为它处于无限循环中，并且 OP 停止了 gdb。当 gdb 以 停止时`ctrl+C`，使用的 JTAG 调试器 (peedi) 实际上会跳转到下一条指令，这就是为什么即使指示位于 的未定义异常`pc`也是如此。`0xffff0008``cpsr``0xffff0004`

# weblogic11g - 未找到 weblogic jms 连接工厂

> ID：15433362
> 
> 赞同：0
> 
> 时间：2013-03-15T13:10:01.557
> 
> 标签：weblogic11g

我有一个管理员和一个托管服务器。JMS 服务器以管理服务器为目标。包含队列和连接工厂的 JMS 模块同时针对管理服务器和托管服务器。当我的应用程序部署在管理服务器上时，一切正常。但是当部署在托管服务器上时，我得到以下异常

原因：javax.naming.NameNotFoundException：无法解析“CONNECTION_F”。解决 ''; 剩余名称“CONNECTION_F”

我可以从托管的 JNDI 树中看到 CONNECTION_F 不存在...我错过了什么吗？域上配置有问题？

我正在使用 Weblogic 11g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:45:19.590

请在托管服务器上配置您的 JMS 服务器。

# c# - 如何合并 XmlNodeList 数组

> ID：15433371
> 
> 赞同：0
> 
> 时间：2013-03-15T13:10:21.760
> 
> 标签：c#, xml, xmlnodelist

我有一个数组`XmlNodeList`。

我可以将它合并为一个`XmlNodeList`对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:19:44.680

一些伪代码。不知道方法调用是否正确，但方法应该有效

```
joined xmlNodeList
for XmlNodeList nl in array
    for Node n in nl
        joined.insert n 
```

# python - Python中的逐步回归

> ID：15433372
> 
> 赞同：30
> 
> 时间：2013-03-15T13:10:24.833
> 
> 标签：python, scipy, regression

如何在**python中执行****逐步回归**？SCIPY 中有用于 OLS 的方法，但我无法逐步进行。在这方面的任何帮助将是一个很大的帮助。谢谢。

 **编辑：我正在尝试建立一个线性回归模型。我有 5 个自变量并使用正向逐步回归，我的目标是选择变量，使我的模型具有最低的 p 值。以下链接解释了目标：

[https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CEAQFjAD&url=http%3A%2F%2Fbusiness.fullerton.edu%2Fisds%2Fjlawrence%2FStat-On- Line%2FExcel%2520Notes%2FExcel%2520Notes%2520-%2520STEPWISE%2520REGRESSION.doc&ei=YjKsUZzXHoPwrQfGs4GQCg&usg=AFQjCNGDaQ7qRhyBaQCmLeO4OD2RVkUhzw&bvm=bv.47244034,d.bmk](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CEAQFjAD&url=http%3A%2F%2Fbusiness.fullerton.edu%2Fisds%2Fjlawrence%2FStat-On-Line%2FExcel%2520Notes%2FExcel%2520Notes%2520-%2520STEPWISE%2520REGRESSION.doc&ei=YjKsUZzXHoPwrQfGs4GQCg&usg=AFQjCNGDaQ7qRhyBaQCmLeO4OD2RVkUhzw&bvm=bv.47244034,d.bmk)

再次感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-04-23T22:59:30.140

Trevor Smith 和我使用 statsmodels 为线性回归编写了一个小前向选择函数：http://planspace.org/20150423-forward_selection_with_statsmodels/[您](http://planspace.org/20150423-forward_selection_with_statsmodels/)可以轻松修改它以最小化 p 值，或仅使用 beta p 值进行选择多做一点工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-10-06T04:15:26.470

你可以试试 mlxtend，它有多种选择方法。

```
from mlxtend.feature_selection import SequentialFeatureSelector as sfs

clf = LinearRegression()

# Build step forward feature selection
sfs1 = sfs(clf,k_features = 10,forward=True,floating=False, scoring='r2',cv=5)

# Perform SFFS
sfs1 = sfs1.fit(X_train, y_train) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-07T10:55:16.260

You can make forward-backward selection based on `statsmodels.api.OLS` model, as shown [in this answer](https://datascience.stackexchange.com/a/24447/24162).

However, [this answer](https://stats.stackexchange.com/questions/20836/algorithms-for-automatic-model-selection/20856#20856) describes why you should not use stepwise selection for econometric models in the first place.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T08:37:07.180

Statsmodels has additional methods for regression: [http://statsmodels.sourceforge.net/devel/examples/generated/example_ols.html](http://statsmodels.sourceforge.net/devel/examples/generated/example_ols.html). I think it will help you to implement stepwise regression.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-19T18:00:08.707

我开发了这个存储库[https://github.com/xinhe97/StepwiseSelectionOLS](https://github.com/xinhe97/StepwiseSelectionOLS)

我的逐步选择类（最佳子集、前向逐步、后向逐步）与 sklearn 兼容。你可以用我的类来做 Pipeline 和 GridSearchCV。

我的代码的基本部分如下：

```
################### Criteria ###################
def processSubset(self, X,y,feature_index):
    # Fit model on feature_set and calculate rsq_adj
    regr = sm.OLS(y,X[:,feature_index]).fit()
    rsq_adj = regr.rsquared_adj
    bic = self.myBic(X.shape[0], regr.mse_resid, len(feature_index))
    rsq = regr.rsquared
    return {"model":regr, "rsq_adj":rsq_adj, "bic":bic, "rsq":rsq, "predictors_index":feature_index}

################### Forward Stepwise ###################
def forward(self,predictors_index,X,y):
    # Pull out predictors we still need to process
    remaining_predictors_index = [p for p in range(X.shape[1])
                            if p not in predictors_index]

    results = []
    for p in remaining_predictors_index:
        new_predictors_index = predictors_index+[p]
        new_predictors_index.sort()
        results.append(self.processSubset(X,y,new_predictors_index))
        # Wrap everything up in a nice dataframe
    models = pd.DataFrame(results)
    # Choose the model with the highest rsq_adj
    # best_model = models.loc[models['bic'].idxmin()]
    best_model = models.loc[models['rsq'].idxmax()]
    # Return the best model, along with model's other  information
    return best_model

def forwardK(self,X_est,y_est, fK):
    models_fwd = pd.DataFrame(columns=["model", "rsq_adj", "bic", "rsq", "predictors_index"])
    predictors_index = []

    M = min(fK,X_est.shape[1])

    for i in range(1,M+1):
        print(i)
        models_fwd.loc[i] = self.forward(predictors_index,X_est,y_est)
        predictors_index = models_fwd.loc[i,'predictors_index']

    print(models_fwd)
    # best_model_fwd = models_fwd.loc[models_fwd['bic'].idxmin(),'model']
    best_model_fwd = models_fwd.loc[models_fwd['rsq'].idxmax(),'model']
    # best_predictors = models_fwd.loc[models_fwd['bic'].idxmin(),'predictors_index']
    best_predictors = models_fwd.loc[models_fwd['rsq'].idxmax(),'predictors_index']
    return best_model_fwd, best_predictors 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-10T14:08:16.147

```
"""Importing the api class from statsmodels"""
import statsmodels.formula.api as sm

"""X_opt variable has all the columns of independent variables of matrix X 
in this case we have 5 independent variables"""
X_opt = X[:,[0,1,2,3,4]]

"""Running the OLS method on X_opt and storing results in regressor_OLS"""
regressor_OLS = sm.OLS(endog = y, exog = X_opt).fit()
regressor_OLS.summary() 
```

使用摘要方法，您可以在内核中检查变量的 p 值，写为 'P>|t|'。然后检查具有最高 p 值的变量。假设 x3 具有最高值，例如 0.956。然后从阵列中删除此列并重复所有步骤。

```
X_opt = X[:,[0,1,3,4]]
regressor_OLS = sm.OLS(endog = y, exog = X_opt).fit()
regressor_OLS.summary() 
```

重复这些方法，直到删除所有 p 值高于显着性值（例如 0.05）的列。最后，您的变量 X_opt 将具有 p 值小于显着性水平的所有最佳变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-27T03:13:05.180

这是我刚刚编写的一种方法，它使用了“统计学习简介”中描述的“混合选择”。作为输入，它需要：

*   lm，一个 statsmodels.OLS.fit(Y,X)，其中 X 是 n 个数组，其中 n 是数据点的数量，Y，其中 Y 是训练数据中的响应

*   curr_preds- 带有 ['const'] 的列表

*   potential_preds- 所有潜在预测变量的列表。还需要一个 pandas 数据框 X_mix，其中包含所有数据，包括“const”，以及与潜在预测变量对应的所有数据

*   托尔，可选。最大 pvalue，如果未指定，则为 .05

```
def mixed_selection (lm, curr_preds, potential_preds, tol = .05):
  while (len(potential_preds) > 0):
    index_best = -1 # this will record the index of the best predictor
    curr = -1 # this will record current index
    best_r_squared = lm.rsquared_adj # record the r squared of the current model
    # loop to determine if any of the predictors can better the r-squared  
    for pred in potential_preds:
      curr += 1 # increment current
      preds = curr_preds.copy() # grab the current predictors
      preds.append(pred)
      lm_new = sm.OLS(y, X_mix[preds]).fit() # create a model with the current predictors plus an addional potential predictor
      new_r_sq = lm_new.rsquared_adj # record r squared for new model
      if new_r_sq > best_r_squared:
        best_r_squared = new_r_sq
        index_best = curr

    if index_best != -1: # a potential predictor improved the r-squared; remove it from potential_preds and add it to current_preds
      curr_preds.append(potential_preds.pop(index_best))
    else: # none of the remaining potential predictors improved the adjust r-squared; exit loop
      break

    # fit a new lm using the new predictors, look at the p-values
    pvals = sm.OLS(y, X_mix[curr_preds]).fit().pvalues
    pval_too_big = []
    # make a list of all the p-values that are greater than the tolerance 
    for feat in pvals.index:
      if(pvals[feat] > tol and feat != 'const'): # if the pvalue is too large, add it to the list of big pvalues
        pval_too_big.append(feat)

    # now remove all the features from curr_preds that have a p-value that is too large
    for feat in pval_too_big:
      pop_index = curr_preds.index(feat)
      curr_preds.pop(pop_index) 
```**

# xcode - 如何在 xcode 上播放 hls 流

> ID：15433374
> 
> 赞同：0
> 
> 时间：2013-03-15T13:10:32.867
> 
> 标签：xcode, ios-simulator

我对 xcode 很陌生，我正在尝试执行将播放 hls url 的简单视频应用程序。

我用谷歌搜索，发现一个播放本地视频文件的。我试过它是否可以与 hls url (.m3u8) 一起使用，但它没有

这是我到目前为止的代码。

```
-(IBAction)playvideo {
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
pathForResource:@"http://mysite.com:1935/live/channel1/playlist.m3u8" ofType:@"mp4"]];
MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc]
initWithContentURL:url];
[self presentMoviePlayerViewControllerAnimated:playercontroller];
playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
[playercontroller.moviePlayer play];
playercontroller = nil;
} 
```

我收到这个错误。

```
VideoPlayTest[16276:c07] *** Terminating app due to uncaught exception     'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string     parameter' 
```

我在山狮上使用最新的 xcode。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:15:11.277

将您的网址更改为

```
NSURL *url = [NSURL URLWithString:@"http://mysite.com:1935/live/channel1/playlist.m3u8"]; 
```

您的另一个电话试图从应用程序包中提取视频，而不是 URL。

# java - 如何将 2013-03-13T20:59:31+0000 日期字符串解析为 Date

> ID：15433377
> 
> 赞同：25
> 
> 时间：2013-03-15T13:10:38.427
> 
> 标签：java, android, parsing, datetime-format

如何将此格式日期字符串**2013-03-13T20:59:31+0000**解析为 Date 对象？

我正在尝试这种方式，但它不起作用。

```
DateFormat df = new SimpleDateFormat("YYYY-MM-DDThh:mm:ssTZD");
Date result =  df.parse(time); 
```

我从第一行得到这个异常：

> java.lang.IllegalArgumentException：非法模式字符'T'

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-15T13:12:35.897

尝试：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'"); 
```

检查[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

具体来说：

```
 yyyy-MM-dd 1969-12-31
                 yyyy-MM-dd 1970-01-01
           yyyy-MM-dd HH:mm 1969-12-31 16:00
           yyyy-MM-dd HH:mm 1970-01-01 00:00
          yyyy-MM-dd HH:mmZ 1969-12-31 16:00-0800
          yyyy-MM-dd HH:mmZ 1970-01-01 00:00+0000
   yyyy-MM-dd HH:mm:ss.SSSZ 1969-12-31 16:00:00.000-0800
   yyyy-MM-dd HH:mm:ss.SSSZ 1970-01-01 00:00:00.000+0000
 yyyy-MM-dd'T'HH:mm:ss.SSSZ 1969-12-31T16:00:00.000-0800
 yyyy-MM-dd'T'HH:mm:ss.SSSZ 1970-01-01T00:00:00.000+0000 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-03-15T13:16:01.837

`DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ssZ");`

年份是小写的 y。输入中与日期无关的任何字符（如 'T'`2013-03-13T20:59:31+0000`应在`''`.

有关已定义模式字母的列表，请参阅[文档](https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html)

Parse 检查给定日期是否采用您指定的格式。要在检查后以特定格式打印日期，请参见下文：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ssZ");
Date result;
try {
    result = df.parse("2013-03-13T20:59:31+0000");
    System.out.println("date:"+result); //prints date in current locale
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    sdf.setTimeZone(TimeZone.getTimeZone("GMT"));
    System.out.println(sdf.format(result)); //prints date in the format sdf
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-10-25T21:54:15.807

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

**使用`java.time`现代日期时间 API 的解决方案：**您的输入字符串具有时区偏移，因此应将其解析为`OffsetDateTime`.

**演示：**

```
import java.time.OffsetDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("uuuu-MM-dd'T'HH:mm:ssxx", Locale.ENGLISH);
        OffsetDateTime odt = OffsetDateTime.parse("2013-03-13T20:59:31+0000", dtf);
        System.out.println(odt);
    }
} 
```

**输出：**

```
2013-03-13T20:59:31Z 
```

[`ONLINE DEMO`](https://ideone.com/gZDQLu)

`Z`输出中的 是零时区偏移的时[区指示符](https://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators)。它代表 Zulu 并指定`Etc/UTC`时区（时区偏移量为`+00:00`小时）。

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。检查[此答案](https://stackoverflow.com/a/67752047/10819573)和[此答案](https://stackoverflow.com/a/67505173/10819573)以了解如何将`java.time`API 与 JDBC 一起使用。

### 如果您需要`java.util.Date`：

可以[`Date#from`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#from-java.time.Instant-)用来获取 的实例`java.util.Date`，如下图：

```
Date date = Date.from(odt.toInstant()); 
```

* * *

^(* 如果您正在为一个 Android 项目工作，并且您的 Android API 级别仍然不符合 Java-8，请[通过 desugaring 检查可用的 Java 8+ API](https://developer.android.com/studio/write/java8-support-table)。请注意，Android 8.0 Oreo 已经提供[对`java.time`](https://developer.android.com/reference/java/time/package-summary).)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-15T13:13:07.403

请试试这个：

```
SimpleDateFormat formatDate;
formatDate= new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-08T12:05:01.093

对于**2017-02-08 06:23:35 +0000**这种日期格式，我使用以下格式：

```
SimpleDateFormat formatDate;
formatDate= new SimpleDateFormat("yyyy-MM-dd HH:mm:ss ZZZ"); 
```

它为我工作。其他答案对我不起作用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-02-19T19:29:36.760

## java.time

```
ZonedDateTime.parse("2020-05-08T11:12:13+0001", DateTimeFormatter.ofPattern("yyyy-MM-dd'T'HH:mm:ssZ")) 
```

我正在使用 java.time、现代 Java 日期和时间 API 及其`ZonedDateTime`类。A`ZonedDateTime`是带有时区的日期和时间。如果要在 Android Oreo（API 级别 26）之前使用 java.time，则需要[核心库 desugaring](https://developer.android.com/studio/write/java8-support-table)。

我`T`用单引号括起来，所以格式化程序知道它不是模式字母。问题中的`T`不带引号是您出现异常的原因，但格式模式字符串中也存在其他问题。`yyyy-MM-dd'T'HH:mm:ssZ`作品。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-22T08:59:38.580

它也可以提供帮助

```
LocalDateTime dateTime = LocalDateTime.parse(time, DateTimeFormatter.ofPattern("yyyy-MM-dd'T'HH:mm:ssZ")); 
```

# ruby - Ruby 对象模型 - 类的祖先

> ID：15433378
> 
> 赞同：21
> 
> 时间：2013-03-15T13:10:40.850
> 
> 标签：ruby

我正在研究“Metaprogramming Ruby”一书中的 Ruby 对象模型，并且我也理解类是对象的概念。

```
class A
end

A.ancestors # => [A, Object, Kernel, BasicObject]
A.class.ancestors # => [Class, Module, Object, Kernel, BasicObject] 
```

我感到困惑的是，当我最初在 irb 中尝试 A.ancestors 时，我期望在 A.class.ancestors 中得到的结果 - 我的思考过程是：因为 A 是一个类，而一个类是一个实例class Class，它的祖先是Class。但是Class似乎不是A的祖先。

有人可以在这里消除我的困惑吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-15T13:23:42.767

该类`A`是 的一个实例`Class`，您可以通过`A.class`

A 实例的类是`A`，您可以通过`a = A.new; a.class`

该方法`ancestors`显示该类的对象具有（或将具有）作为其继承的类层次结构。

您的示例中有两个*并行*的类层次结构模型，它们*只会*相互影响，因为 Ruby 将其类表示为对象以供您检查和修改。

根本没有理由需要 A.class.ancestors 和 A.ancestors 相交——除了 Ruby 也有一个具有简单根的深层类模型，所以在实践中这就是您将看到的。

事实上我找不到任何反例，即使 nil 这样做：

```
NilClass.ancestors
 => [NilClass, Object, Kernel, BasicObject]

NilClass.class.ancestors
 => [Class, Module, Object, Kernel, BasicObject] 
```

不过，这个更有启发性：

```
BasicObject.ancestors
 => [BasicObject]

BasicObject.class.ancestors
 => [Class, Module, Object, Kernel, BasicObject] 
```

# windows - 套接字编程更新：recv 返回 -1，错误 = 10053

> ID：15433380
> 
> 赞同：1
> 
> 时间：2013-03-15T13:10:44.737
> 
> 标签：windows, sockets, networking, tcp, recv

我正在 Windows 7 上实现一个 TCP/IP 应用程序，它围绕一个套接字 recv() 调用循环。对于少量数据（< 5 MB）它可以正常工作，但对于大数据（> 20 MB），recv 在两者之间失败。

**详细信息：**我的应用程序需要与运行的 HTTP 服务器通信，两者都在同一台机器上运行，在这个场景中，tcp 应用程序正在向 HTTP 服务器发送大量数据

它给出 error = 2，recv 返回 0。

**错误 2 表示 ENOENT，但它是什么意思？**. 有谁知道这是什么（关于套接字）以及我如何解决这个问题？

```
msgLen = recv(s,msg,BUFFER_SIZE,0);

if(msgLen > 0)
{
  // do processing
}
else
{
  printf("\n no data received .... msgLen=%d",msgLen);
  printf("\n no data received .... errno=%d",errno);
} 
```

**根据评论更新代码**

```
msgLen = recv(s,msg,BUFFER_SIZE,0);

if(msgLen > 0)
{
  // do processing
}
else if(msgLen == 0)
{
  printf("\n sender disconnected");
}
else
{
  printf("\n no data received .... msgLen=%d",msgLen);
  printf("\n no data received .... errno=%d",WSAGetLastError());
} 
```

我现在得到的错误是：

1.  首先recv=0多次，即sender断开；
2.  最后，recv 返回 -1，error = 10053。

我的 TCP/IP 应用程序正在向 HTTP 服务器发送数据。同样适用于小数据，但问题来自大量数据。HTTP 服务器超时了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:00:53.227

返回 0时`recv()`，表示对方正常断开连接（假设您请求的缓冲区大小不为 0）。 仅在返回(-1)`recv()`时提供错误代码。`SOCKET_ERROR`在 Windows 上，您必须使用`WSAGetLastError()`来获取错误代码，而不是`errno`，例如：

```
msgLen = recv(s,msg,BUFFER_SIZE,0);

if(msgLen > 0)
{
    // do processing
}
else if (msgLen == 0)
{
    printf("\n sender disconnected");
}
else
{
    printf("\n no data received .... error=%d",WSAGetLastError());
} 
```

另请记住，如果您使用的是非阻塞套接字，则错误代码可能是`WSAEWOULDBLOCK`，这不是致命错误。您可以使用`select()`检测套接字何时有数据，然后`recv()`再次尝试。

# c++ - pIter != cont.end() 在 for 循环中的性能

> ID：15433381
> 
> 赞同：23
> 
> 时间：2013-03-15T13:10:47.507
> 
> 标签：c++, performance, stl, compiler-optimization, temporary-objects

我最近正在阅读 Herb Sutter 的“Exceptional C++”，我对他在第 6 项 - 临时对象中给出的特定建议表示严重怀疑。

他提出在以下代码中查找不必要的临时对象：

```
string FindAddr(list<Employee> emps, string name) 
{
  for (list<Employee>::iterator i = emps.begin(); i != emps.end(); i++)
  {
    if( *i == name )
    {
      return i->addr;
    }
  }
  return "";
} 
```

作为示例之一，他建议`emps.end()`在循环之前预先计算 的值，因为每次迭代都会创建一个临时对象：

> 对于大多数容器（包括列表），调用 end() 返回一个必须构造和销毁的临时对象。因为值不会改变，所以在每次循环迭代中重新计算（以及重建和重新销毁）它既不必要地低效又不美观。该值应该只计算一次，存储在本地对象中并重复使用。

他建议替换为以下内容：

```
list<Employee>::const_iterator end(emps.end());
for (list<Employee>::const_iterator i = emps.begin(); i != end; ++i) 
```

对我来说，这是不必要的复杂化。即使有人用 compact 替换了丑陋的类型声明`auto`，他仍然得到两行代码而不是一行。更重要的是，他`end`在外部范围内有这个变量。

我确信现代编译器无论如何都会优化这段代码，因为我实际上`const_iterator`在这里使用并且很容易检查循环内容是否以某种方式访问​​容器。编译器在过去 13 年里变得更聪明了，对吧？

无论如何，在大多数情况下，我会更喜欢第一个版本`i != emps.end()`，我不太担心性能。但我想确定的是，这是否是一种我可以依靠编译器来优化的结构？

**更新**

感谢您对如何使这个无用的代码变得更好的建议。请注意，我的问题是关于编译器，而不是编程技术。目前唯一相关的答案来自[NPE](https://stackoverflow.com/a/15433591/261217)和[Ellioh](https://stackoverflow.com/a/15434092/261217)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T13:47:10.967

**UPD：**你所说的这本书已经出版于 1999 年，除非我弄错了。那是 14 年前的事了，在现代编程中，14 年是很多时间。许多在 1999 年很好且可靠的建议现在可能已经完全过时了。虽然我的回答是关于单一编译器和单一平台，但也有一个更普遍的想法。

关心额外的变量、重用琐碎方法的返回值和旧 C++ 的类似技巧是向 1990 年代 C++ 的倒退。像这样的普通方法`end()`应该被很好地内联，并且内联的结果应该作为调用它的代码的一部分进行优化。99% 的情况根本不需要手动操作，例如创建`end`变量。只有在以下情况下才应该这样做：

1.  你知道在一些你应该在代码上运行的编译器/平台上没有得到很好的优化。
2.  它已成为您程序中的瓶颈（“避免过早优化”）。

我查看了 64 位 g++ 生成的内容：

```
gcc version 4.6.3 20120918 (prerelease) (Ubuntu/Linaro 4.6.3-10ubuntu1) 
```

最初我认为对其进行优化应该没问题，两个版本之间应该没有区别。但看起来事情很奇怪：**您认为非最佳的版本实际上更好**。我认为，道德是：**没有理由尝试比编译器更聪明**。让我们看看这两个版本。

```
#include <list>

using namespace std;

int main() {
  list<char> l;
  l.push_back('a');

  for(list<char>::iterator i=l.begin(); i != l.end(); i++)
      ;

  return 0;
}

int main1() {
  list<char> l;
  l.push_back('a');
  list<char>::iterator e=l.end();
  for(list<char>::iterator i=l.begin(); i != e; i++)
      ;

  return 0;
} 
```

然后我们应该通过优化（我使用 64 位`g++`，你可以试试你的编译器）和反汇编来编译`main`它`main1`：

对于`main`：

```
(gdb) disas main
Dump of assembler code for function main():
   0x0000000000400650 <+0>: push   %rbx
   0x0000000000400651 <+1>: mov    $0x18,%edi
   0x0000000000400656 <+6>: sub    $0x20,%rsp
   0x000000000040065a <+10>:    lea    0x10(%rsp),%rbx
   0x000000000040065f <+15>:    mov    %rbx,0x10(%rsp)
   0x0000000000400664 <+20>:    mov    %rbx,0x18(%rsp)
   0x0000000000400669 <+25>:    callq  0x400630 <_Znwm@plt>
   0x000000000040066e <+30>:    cmp    $0xfffffffffffffff0,%rax
   0x0000000000400672 <+34>:    je     0x400678 <main()+40>
   0x0000000000400674 <+36>:    movb   $0x61,0x10(%rax)
   0x0000000000400678 <+40>:    mov    %rax,%rdi
   0x000000000040067b <+43>:    mov    %rbx,%rsi
   0x000000000040067e <+46>:    callq  0x400610 <_ZNSt8__detail15_List_node_base7_M_hookEPS0_@plt>
   0x0000000000400683 <+51>:    mov    0x10(%rsp),%rax
   0x0000000000400688 <+56>:    cmp    %rbx,%rax
   0x000000000040068b <+59>:    je     0x400698 <main()+72>
   0x000000000040068d <+61>:    nopl   (%rax)
   0x0000000000400690 <+64>:    mov    (%rax),%rax
   0x0000000000400693 <+67>:    cmp    %rbx,%rax
   0x0000000000400696 <+70>:    jne    0x400690 <main()+64>
   0x0000000000400698 <+72>:    mov    %rbx,%rdi
   0x000000000040069b <+75>:    callq  0x400840 <std::list<char, std::allocator<char> >::~list()>
   0x00000000004006a0 <+80>:    add    $0x20,%rsp
   0x00000000004006a4 <+84>:    xor    %eax,%eax
   0x00000000004006a6 <+86>:    pop    %rbx
   0x00000000004006a7 <+87>:    retq 
```

查看位于 0x0000000000400683-0x000000000040068b 的命令。那是循环体，它似乎被完美优化：

```
 0x0000000000400690 <+64>:    mov    (%rax),%rax
   0x0000000000400693 <+67>:    cmp    %rbx,%rax
   0x0000000000400696 <+70>:    jne    0x400690 <main()+64> 
```

对于`main1`：

```
(gdb) disas main1
Dump of assembler code for function main1():
   0x00000000004007b0 <+0>: push   %rbp
   0x00000000004007b1 <+1>: mov    $0x18,%edi
   0x00000000004007b6 <+6>: push   %rbx
   0x00000000004007b7 <+7>: sub    $0x18,%rsp
   0x00000000004007bb <+11>:    mov    %rsp,%rbx
   0x00000000004007be <+14>:    mov    %rsp,(%rsp)
   0x00000000004007c2 <+18>:    mov    %rsp,0x8(%rsp)
   0x00000000004007c7 <+23>:    callq  0x400630 <_Znwm@plt>
   0x00000000004007cc <+28>:    cmp    $0xfffffffffffffff0,%rax
   0x00000000004007d0 <+32>:    je     0x4007d6 <main1()+38>
   0x00000000004007d2 <+34>:    movb   $0x61,0x10(%rax)
   0x00000000004007d6 <+38>:    mov    %rax,%rdi
   0x00000000004007d9 <+41>:    mov    %rsp,%rsi
   0x00000000004007dc <+44>:    callq  0x400610 <_ZNSt8__detail15_List_node_base7_M_hookEPS0_@plt>
   0x00000000004007e1 <+49>:    mov    (%rsp),%rdi
   0x00000000004007e5 <+53>:    cmp    %rbx,%rdi
   0x00000000004007e8 <+56>:    je     0x400818 <main1()+104>
   0x00000000004007ea <+58>:    mov    %rdi,%rax
   0x00000000004007ed <+61>:    nopl   (%rax)
   0x00000000004007f0 <+64>:    mov    (%rax),%rax
   0x00000000004007f3 <+67>:    cmp    %rbx,%rax
   0x00000000004007f6 <+70>:    jne    0x4007f0 <main1()+64>
   0x00000000004007f8 <+72>:    mov    (%rdi),%rbp
   0x00000000004007fb <+75>:    callq  0x4005f0 <_ZdlPv@plt>
   0x0000000000400800 <+80>:    cmp    %rbx,%rbp
   0x0000000000400803 <+83>:    je     0x400818 <main1()+104>
   0x0000000000400805 <+85>:    nopl   (%rax)
   0x0000000000400808 <+88>:    mov    %rbp,%rdi
   0x000000000040080b <+91>:    mov    (%rdi),%rbp
   0x000000000040080e <+94>:    callq  0x4005f0 <_ZdlPv@plt>
   0x0000000000400813 <+99>:    cmp    %rbx,%rbp
   0x0000000000400816 <+102>:   jne    0x400808 <main1()+88>
   0x0000000000400818 <+104>:   add    $0x18,%rsp
   0x000000000040081c <+108>:   xor    %eax,%eax
   0x000000000040081e <+110>:   pop    %rbx
   0x000000000040081f <+111>:   pop    %rbp
   0x0000000000400820 <+112>:   retq 
```

循环的代码类似，它是：

```
 0x00000000004007f0 <+64>:    mov    (%rax),%rax
   0x00000000004007f3 <+67>:    cmp    %rbx,%rax
   0x00000000004007f6 <+70>:    jne    0x4007f0 <main1()+64> 
```

但是循环周围有很多额外的东西。显然，额外的代码使事情变得更糟。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T13:22:36.410

我已经使用`g++ 4.7.2`with编译了以下稍微有点 hacky 的代码`-O3 -std=c++11`，并为这两个函数获得了相同的程序集：

```
#include <list>
#include <string>

using namespace std;

struct Employee: public string { string addr; };

string FindAddr1(list<Employee> emps, string name)
{
  for (list<Employee>::const_iterator i = emps.begin(); i != emps.end(); i++)
  {
    if( *i == name )
    {
      return i->addr;
    }
  }
  return "";
}

string FindAddr2(list<Employee> emps, string name)
{
  list<Employee>::const_iterator end(emps.end());
  for (list<Employee>::const_iterator i = emps.begin(); i != end; i++)
  {
    if( *i == name )
    {
      return i->addr;
    }
  }
  return "";
} 
```

无论如何，我认为这两个版本之间的选择应该主要基于可读性。如果没有分析数据，像这样的微优化在我看来还为时过早。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T14:59:46.940

与普遍的看法相反，我认为 VC++ 和 gcc 在这方面没有任何区别。我对 g++ 4.7.2 和 MS C++ 17（又名 VC++ 2012）进行了快速检查。

在这两种情况下，我将生成的代码与问题中的代码（添加了标题等以使其编译）与以下代码进行了比较：

```
string FindAddr(list<Employee> emps, string name) 
{
    auto end = emps.end();
    for (list<Employee>::iterator i = emps.begin(); i != end; i++)
    {
        if( *i == name )
        {
            return i->addr;
        }
    }
    return "";
} 
```

在这两种情况下，两段代码的结果基本相同。VC++ 在代码中包含行号注释，由于额外的行而改变了，但这是唯一的区别。使用 g++，输出文件是相同的。

`std::vector`用而不是做同样的`std::list`事情，得到了几乎相同的结果——没有显着差异。出于某种原因，g++ 确实将一条指令的操作数顺序从`cmp esi, DWORD PTR [eax+4]`切换到`cmp DWORD PTR [eax+4], esi`，但是（再次）这完全无关紧要。

底线：不，您不太可能通过使用现代编译器手动将代码提升出循环来获得任何收益（至少在启用优化的情况下——我使用`/O2b2`的是 VC++ 和`/O3`g++；比较优化与关闭的优化似乎对我来说毫无意义）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-15T13:16:07.777

有几件事……首先是构建迭代器（在发布模式下，未经检查的分配器）的成本通常是最低的。它们通常是指针的包装器。使用检查的分配器（VS 中的默认值）您可能需要一些成本，但如果您真的需要性能，请在使用未检查的分配器测试重建后。

代码不必像您发布的那样丑陋：

```
for (list<Employee>::const_iterator it=emps.begin(), end=emps.end(); 
                                    it != end; ++it ) 
```

关于是否要使用一种或其他方法的主要决定应该是对容器应用哪些操作。如果容器可能正在改变它的大小，那么您可能希望`end`在每次迭代中重新计算迭代器。如果没有，您可以像上面的代码一样预先计算一次并重用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-15T13:20:12.960

如果您真的需要性能，您可以让闪亮的新 C++11 编译器为您编写它：

```
for (const auto &i : emps) {
    /* ... */
} 
```

是的，这是开玩笑的（有点）。Herb 在这里的例子现在已经过时了。但是由于你的编译器还不支持它，让我们来看看真正的问题：

> 这是一种我可以依靠编译器来优化的结构吗？

我的经验法则是编译器编写者比我聪明得多。我不能依赖编译器来优化任何一段代码，因为它可能会选择优化其他影响更大的*东西。***唯一确定的方法是在系统上****的**编译器上尝试这两种方法，看看会发生什么。检查您的探查器结果。如果调用到突出，请将其保存在单独的变量中。否则，不要担心。**`.end()`**

 *** * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-15T13:15:49.667

像向量这样的容器返回变量，该变量存储指向末尾的指针，在`end()`调用时进行优化。如果您编写了可以进行一些查找等操作的容器，`end()`请考虑编写

```
for (list<Employee>::const_iterator i = emps.begin(), end = emps.end(); i != end; ++i)
{
...
} 
```

为了速度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T13:25:43.050

# 使用[`std`算法](http://en.cppreference.com/w/cpp/algorithm)

他当然是对的；调用`end`可以实例化和销毁一个临时对象，这通常是不好的。

当然，编译器可以在很多情况下优化它。

有一个更好更健壮的解决方案：**封装你的循环**。

您给出的示例实际上是[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)，给或取返回值。许多其他循环也有`std`算法，或者至少有足够相似的东西可以适应——`transform_if`例如，我的实用程序库有一个实现。

因此，隐藏函数中的循环并使用`const&`to `end`。与您的示例相同的修复程序，但更清洁。**

# c# - 覆盖 WinForms MessageBox 控件

> ID：15433385
> 
> 赞同：5
> 
> 时间：2013-03-15T13:11:10.950
> 
> 标签：c#, winforms, dialog, overriding

总而言之，我知道对于广泛定制的对话框，我需要创建自己的表单和`ShowDialog()`. 但是，在我目前的情况下，我只想扩展 MessageBox 类，以促进`CustomMessageBox`能够显示由系统确定的不同图标。

我以前没有覆盖过这样的控制，我什至不知道从哪里开始。有人能指出我正确的方向吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:18:17.247

`MessageBox`实际上不是*控件*（不继承自`Control`），它只是一个类。

实际上，它甚至几乎是一个`static`类，因为没有定义公共/受保护的构造函数，只有`static`方法。它更像是一个工厂。

您可能应该编写自己的，因为它不可扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:18:23.567

不幸的是，您不能像那样自定义 MessageBox。你将不得不自己动手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T13:22:09.163

`MessageBox`除了更改可用的消息、标题和标准按钮之外，不支持自定义。如果您想要一个自定义消息框，您必须自己创建一个。请参阅[如何创建自定义 MessageBox？](https://stackoverflow.com/q/6932792/56778)例如。

# memory - 堆栈在 CPU 还是 RAM 中？

> ID：15433390
> 
> 赞同：25
> 
> 时间：2013-03-15T13:11:18.330
> 
> 标签：memory, stack, cpu, opcode, eip

我有几个关于堆栈的问题。

1.  堆栈在 CPU 还是 RAM 中？
2.  堆栈是运行 OPcode 的地方吗？
3.  EIP 在 CPU 还是 RAM 中？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-15T13:12:52.310

堆栈始终在 RAM 中。有一个堆栈指针保存在CPU 中的一个寄存器中，它指向堆栈的顶部，即堆栈顶部位置的地址。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-15T13:15:24.650

堆栈位于 RAM 中而不是 CPU 中。一个段专用于堆栈，如下图所示：

![在此处输入图像描述](../Images/49f808f317d36e4a3f5bfaac6f1f3378.png)

来自[维基](http://en.wikipedia.org/wiki/Data_segment)：

> 堆栈区包含程序堆栈，一个 LIFO 结构，通常位于内存的较高部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T13:27:58.093

你说的是哪个CPU？

1.  有些可能包含用于调用堆栈的内存，有些包含*可**用于*调用堆栈但需要操作系统实现调用堆栈管理代码的内存，还有一些根本不包含可写内存。例如，x86 架构倾向于在 CPU 中内置一个或多个[*代码缓存*和*数据缓存。*](http://en.wikipedia.org/wiki/CPU_cache)

2.  一些 CPU 或操作系统实现了使特定内存区域不可执行的操作。例如，为了防止基于堆栈的缓冲区溢出，许多操作系统使用[基于硬件和/或软件的数据执行预防](http://en.wikipedia.org/wiki/Data_Execution_Prevention)，这可能会阻止堆栈内存作为代码执行。有些*没有*；完全有可能使用 x86 CPU 数据缓存行来存储调用堆栈和要在*更快*的内存中执行的代码。

3.  [EIP](http://en.wikipedia.org/wiki/EIP_register#32-bit)听起来像是 IA32 CPU 架构的寄存器。如果您指的是 IA-32，那么是的，这是一个 CPU 操作，尽管许多操作系统会将其切换到 RAM 或从 RAM 切换以模拟多任务处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-19T20:35:33.693

In modern architectures stack is mapped in ram. Programming languages such ar C, C++, Pascal can allocate memory in ram, this is called Heap allocation, and other variables which live withing functions are stack allocated. This dictated processors and operating systems to consider stack mapped within ram segment. And for processors with Memory Management Unit this can be anywhere in the ram. However, intel 8080 had a state bit indicating when it reads/writes from stack, thus stack could be implemented physically isolated from RAM. It is not known to me if such machine was implemented, but think of the situation, what memory does a C pointer points to, Heap or Stack. Should Stack separation gain popularity we should have stack pointer and heap pointer in modern programming languages.

# google-analytics - 缺少分析事件标签

> ID：15433404
> 
> 赞同：0
> 
> 时间：2013-03-15T13:12:11.000
> 
> 标签：google-analytics

我在向 Google Analytics 发送事件时遇到问题。在某些情况下，事件标签为空。我可以在提琴手中看到标签。

类别和操作始终保存。似乎它恰好发生在以低数量发送的标签上。如果该标签的计数相对较低并且有很多其他流量，Google 分析是否存在忽略该标签的限制？我的网站流量很大，每天有数百万个事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:05:54.970

一旦数据点的数量超过某个阈值（取决于报告类型），GA 就会使用[采样数据](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1042498)来减少其服务器上的负载。

要查看是否对报告进行了抽样，请在界面右上角查找类似棋盘的图标。您可以单击此按钮访问滑块以增加样本中的数据量，但仅限于某个点。

检查您的报告是否正在被抽样。如果是这样，很可能是具有少量数据点的标签被完全忽略，因此在抽样报告中显示为零。

如果这确实是您的问题，您可以缩小日期范围，直到您不再看到采样图标。

# umbraco - jQueryUI 选项卡呈现但不工作

> ID：15433405
> 
> 赞同：0
> 
> 时间：2013-03-15T13:12:12.667
> 
> 标签：umbraco, jquery-ui-tabs

我正在使用 jQueryUI 选项卡作为 Umbraco 页面的一部分。这是该页面的核心 HTML：

```
<asp:Content ContentPlaceHolderID="body" ID="ContentBody" runat="server">
    <cc1:UmbracoPanel runat="server" Height="224px" Width="412px" hasMenu="false" meta:resourcekey="PageTitle">
        <div style="padding: 2px 15px 0px 15px">
            <div class="dashboardWrapper">
                <div id="tabs">
                    <ul>
                        <li><a href="#tabs-1">Nunc tincidunt</a></li>
                        <li><a href="#tabs-2">Proin dolor</a></li>
                        <li><a href="#tabs-3">Aenean lacinia</a></li>
                    </ul>
                    <div id="tabs-1">
                        <p>Tab 1</p>
                    </div>
                    <div id="tabs-2">
                        <p>Tab 2</p>
                    </div>
                    <div id="tabs-3">
                        <p>Tab 3</p>
                    </div>
                </div>
            </div>
        </div>
    </cc1:UmbracoPanel>
</asp:Content> 
```

虽然呈现了选项卡，但在选项卡 1 中可以看到所有选项卡的内容。单击其他选项卡时，例如选项卡 2 或 3，内容不会改变。好像单击选项卡什么都不做。

我已经仔细检查了 HTML，我不认为有任何问题，例如元素的`id`值`div`与相应`a`标签中的预期值不同，但我看不出有什么问题。

编辑啊，忘了jQuery :)

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <link rel="stylesheet" type="text/css" href="/umbraco_client/application/jquery/jquerytabs.css" />
    <script type="text/javascript" src="/umbraco_client/ui/jqueryui.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#tabs").tabs();
        })
    </script>
</asp:Content> 
```

# media-queries - Zurb Foundation：$column-gutter（网格）的媒体查询

> ID：15433408
> 
> 赞同：0
> 
> 时间：2013-03-15T13:12:20.187
> 
> 标签：media-queries, zurb-foundation, grid-layout

在 Foundation 框架中，有一个名为 的变量`$column-gutter`，它控制网格中列之间的间距。`$column-gutter`是否可以根据媒体查询状态有不同的值？我希望为我的桌面用户提供更宽的列间距，为移动用户提供更小的价值。

由于您无法在 SASS 的媒体查询中定位变量值，因此我想不出任何简单的方法，但也许您有不同的解决方案。作为一种解决方法，我尝试通过媒体查询定位我的 div 并覆盖填充属性，如下所示：

```
@media #{$small} { // This is for desktop
  .l-header, .l-menu, .l-submenu, .l-main, .l-footer {
    padding-left: 3em;
    padding-right: 3em;
  }
} 
```

但这并不是一个很好的解决方案，因为那时我无法最大化另一个网格元素内的嵌套网格元素（因为父 div 的填充）。希望你能理解我的问题。

# magento - Magento：在类别视图中的产品行之间添加静态块

> ID：15433410
> 
> 赞同：0
> 
> 时间：2013-03-15T13:12:31.890
> 
> 标签：magento, block, categories, product, php

我有包含 4 行产品的类别页面和每页 16 个产品的标准视图（4 行）。

我希望我的类别页面在第一行下显示一个静态块，在第三行产品下显示另一个静态块。

像这样：

## 第 1 行

## 静态块 1

## 第 2 行

## 第 3 行

## 静态块 2

## 第 4 行

我想我可以在 template/catalog/product/list.phtml 中做到这一点，但我不知道在哪里使用什么代码。

问候，瑞克！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:02:35.550

您将在 template/catalog/product/list.phtml 中找到这行代码

这作为每个产品的最后一条语句执行。

因此，您在此上方放置一个计数器，并在某些 if 条件下将您的代码放在 .phtml 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T02:43:54.983

假设您正在谈论网格视图，正如 Satish 所说：

```
/app/design/frontend/base/default/template/catalog/product/list.phtml:90 
```

`base``default`如果您使用的是主题，对您来说可能会有所不同，

```
<?php $rowCount = 0; ?>
<?php $i=0; foreach ($_productCollection as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>
      <?php  $rowCount++; ?>
      <?php if ($rowCount == 2 || $rowCount == 4): ?>
         <ul class="awesome-new-row"><li>ok then</li></ul>
      <?php endif; ?>

      <ul class="products-grid">
    <?php endif ?>
      <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
           <?php //LEFT OUT .. NORMAL CODE HERE ?>
      </li>
    <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
      </ul>
    <?php endif ?>
<?php endforeach ?> 
```

# llvm - LLVM 遍历 CFG

> ID：15433417
> 
> 赞同：4
> 
> 时间：2013-03-15T13:12:45.697
> 
> 标签：llvm

我想在函数的 CFG 上应用 DFS 遍历算法。因此，我需要 CFG 的内部表示。我需要定向边缘和斑点`MachineBasicBlock::const_succ_iterator`。`FunctionPass`有没有办法通过使用 a而不是 a来获得具有定向边缘的 CFG `MachineFunctionPass`？我想要这个的原因是我在使用`MachineFunctionPass`. 到目前为止，我已经编写了几个复杂的传递，但我无法运行`MachineFunctionPass`传递。

我发现：“A`MachineFunctionPass`是 LLVM 代码生成器的一部分，它在程序中每个 LLVM 函数的机器相关表示上执行。代码生成器传递是由`TargetMachine::addPassesToEmitFile`类似的例程专门注册和初始化的，因此它们通常不能从opt 或 bugpoint 命令。”...那么我该如何运行`MachineFunctionPass`？

当我尝试使用 opt a simple 运行时`MachineFunctionPass`，出现错误：

```
Pass 'mycfg' is not initialized.
Verify if there is a pass dependency cycle.
Required Passes:
opt: PassManager.cpp:638: void llvm::PMTopLevelManager::schedulePass(llvm::Pass*): Assertion `PI && "Expected required passes to be initialized"' failed. 
```

所以我必须初始化通行证。但是在我的所有其他通行证中，我没有进行任何初始化并且我不想使用`INITIALIZE_PASS`，因为我必须重新编译保持通行证注册的 llvm 文件......有没有办法继续使用`static RegisterPass`a `MachineFunctionPass`？我提到如果我更改为`FunctionPass`，我没有问题，所以确实可能是一个 opt 问题。

我已经开始了 CallGraph 的另一个通行证。我正在`CallGraph &CG = getAnalysis<CallGraph>();`有效地使用。这是获得CFG-s的类似方式吗？到目前为止我发现的`succ_iterator/succ_begin/succ_end`是来自`CFG.h`，但我认为我仍然必须以某种方式获得 CFG 分析。

先感谢您 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:46:43.723

我想你可能混淆了一些术语。每个函数中的基本块已经安排在一种 CFG 中，LLVM 为您提供了遍历它的工具。例如，请参阅[我对这个问题的回答](https://stackoverflow.com/questions/15367585/applying-a-pass-only-on-execution-paths)。

`MachineFunction`生活在不同的层次上，除非你正在做一些非常特别的事情，否则这不是你应该操作的层次。它太低级了，也太针对特定目标了。[这里](http://eli.thegreenplace.net/2012/11/24/life-of-an-instruction-in-llvm/)有一些级别的概述

# asp.net - 如何检查formview中的文本框是否为空

> ID：15433419
> 
> 赞同：1
> 
> 时间：2013-03-15T13:12:49.750
> 
> 标签：asp.net, events, textbox, formview

我有一个页面，我可以在其中创建可以登录该页面的用户。在我创建用户的页面上，有一个表单视图。在这个表单视图中有多个文本框和下拉列表。如何检查文本框是否为空？我试图用代码隐藏，但我无法从那里访问文本框......

这是我的代码：

```
<asp:FormView ID="fvBenutzer" runat="server" DefaultMode="Insert" DataKeyNames="BenutzerID" DataSourceID="SqlDataSource1">
            <InsertItemTemplate>
                Gruppe:
                <asp:TextBox ID="tbGruppe" runat="server" Text='<%# Bind("GruppenID") %>' /><br />
                Titel:
                <asp:TextBox ID="tbTitel" runat="server" Text='<%# Bind("Titel") %>' /><br />
                Bezeichnung:
                <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnBezeichnung" Text='<%# Bind("Bezeichnung")%>'>
                    <asp:ListItem Text="Mitarbeiter" Value="Mitarbeiter"></asp:ListItem>
                    <asp:ListItem Text="Praktikant" Value="Praktikant"></asp:ListItem>
                    <asp:ListItem Text="Azubi" Value="Azubi"></asp:ListItem>
                    <asp:ListItem Text="Umschüler" Value="Umschüler"></asp:ListItem>
                </asp:DropDownList><br />
                Vorname:
                <asp:TextBox runat="server" ID="tbVorname" Text='<%# Bind("Vorname")%>' /><br />
                Nachname:
                <asp:TextBox runat="server" ID="tbNachname" Text='<%# Bind("Nachname")%>' /><br />
                Geburtsdatum:
                <asp:TextBox runat="server" ID="tbGeburtsdatum" Text='<%# Bind("Geburtsdatum")%>' /><br />
                Geburtsort:
                <asp:TextBox runat="server" ID="tbGeburtsort" Text='<%# Bind("Geburtsort")%>' /><br />
                Nationalität:
                <asp:TextBox runat="server" ID="tbNationalitaet" Text='<%# Bind("Nationalität")%>' /><br />
                Straße:
                <asp:TextBox runat="server" ID="tbStraße" Text='<%# Bind("Straße")%>' /><br />
                Hausnummer:
                <asp:TextBox runat="server" ID="tbHausnummer" Text='<%# Bind("Hausnummer")%>' /><br />
                PLZ:
                <asp:TextBox runat="server" ID="tbPLZ" Text='<%# Bind("PLZ")%>' /><br />
                Ort:
                <asp:TextBox runat="server" ID="tbOrt" Text='<%# Bind("Ort")%>' /><br />
                Land:
                <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnLand" Text='<%# Bind("Land")%>'>

                </asp:DropDownList><br />
                Mobil:
                <asp:TextBox runat="server" ID="tbMobil" Text='<%# Bind("Mobil")%>' /><br />
                Fax:
                <asp:TextBox runat="server" ID="tbFax" Text='<%# Bind("Fax")%>' /><br />
                Festnetz:
                <asp:TextBox runat="server" ID="tbFestnetz" Text='<%# Bind("Festnetz")%>' /><br />
                Email:
                <asp:TextBox runat="server" ID="tbEmail" Text='<%# Bind("Email")%>' /><br />
                Homepage:
                <asp:TextBox runat="server" ID="tbBenutzerart" Text='<%# Bind("Homepage")%>' /><br />
                Benutzerart:
                <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnBenutzerart" Text='<%# Bind("Benutzerart")%>'>
                    <asp:ListItem Text="Mitarbeiter" Value="Mitarbeiter"></asp:ListItem>
                    <asp:ListItem Text="Geschäftsführung" Value="Geschäftsführung"></asp:ListItem>
                    <asp:ListItem Text="Führungskraft" Value="Führungskraft"></asp:ListItem>
                    <asp:ListItem Text="Administrator" Value="Administrator"></asp:ListItem>
                </asp:DropDownList><br />
                Urlaubstage:
                <asp:TextBox runat="server" ID="tbUrlaubstageInsgesamt" Text='<%# Bind("UrlaubstageInsgesamt")%>' /><br />
                Benutzername:
                <asp:TextBox runat="server" ID="tbBenutzername" Text='<%# Bind("Username")%>' /><br />
                Passwort:
                <asp:TextBox runat="server" ID="tbPasswort" Text='<%# Bind("UserPassword")%>' /><br />
                <br />
                <asp:Button ID="btnSpeichern" runat="server" CommandName="Insert" Text="Speichern" />
                <asp:Button ID="btnAbbrechen" Text="Abbrechen" runat="server" OnClick="btnAbbrechen_Click" />
            </InsertItemTemplate>
        </asp:FormView>
        <asp:SqlDataSource OnInserting="SqlDataSource1_Inserting" OnInserted="SqlDataSource1_Inserted" ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
            InsertCommand="INSERT INTO Benutzer (GruppenID, Titel, Bezeichnung, Vorname, Nachname, Geburtsdatum, Geburtsort, Nationalität, Straße, Hausnummer, PLZ, Ort, Land, Mobil, Fax, Festnetz, 
                           Email, Homepage, Benutzerart, UrlaubstageInsgesamt , UrlaubstageRest, Username, UserPassword)
                           VALUES (@GruppenID, @Titel, @Bezeichnung, @Vorname, @Nachname, @Geburtsdatum, @Geburtsort, @Nationalität, @Straße, @Hausnummer, @PLZ, @Ort, @Land, @Mobil, @Fax, @Festnetz, 
                           @Email, @Homepage, @Benutzerart, @UrlaubstageInsgesamt , @UrlaubstageInsgesamt, @Username, @UserPassword)"></asp:SqlDataSource> 
```

```
protected void SqlDataSource1_Inserting(object sender, SqlDataSourceCommandEventArgs e)
        {
            //Code to check textboxes goes here...
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:25:32.480

你有没有尝试过：

```
TextBox tb = (TextBox)fvBenutzer.FindControl("yourtextboxid");
string text = tb.Text; 
```

编辑：您可以在 FormView ItemInserting 事件中停止插入。例如：

```
protected void fvBenutzer_ItemInserting(object sender, FormViewInsertEventArgs e) 
{
    if(YourValidationCheck() == false)
        e.Cancel = true;
} 
```

不要忘记添加`oniteminserting="fvBenutzer_ItemInserting"`到 FormView 标记。

# php - Ajax 与 Jquery 和 CodeIgniter 框架

> ID：15433423
> 
> 赞同：0
> 
> 时间：2013-03-15T13:13:01.773
> 
> 标签：php, codeigniter, jquery

我有一个控制器，它在模型中发送两个函数的结果，如下所示：

```
$data['waiting'] = $this -> queue_model -> waiting();
$data['beingseen'] = $this -> queue_model -> beingseen();
$this -> load -> view('studentqueue/studentqueue', $data); 
```

在我看来，我有一个显示数据的 jquery 网格。当有一条新数据插入数据库时​​，我的老板需要该表自动更新日期，在这种情况下会影响查询结果。

我正在尝试遵循本[教程](http://kyleschaeffer.com/development/the-perfect-jquery-ajax-request/)

**但我对数据**到底是什么感到困惑。

在我发送 $data 的控制器中，它如何与 ajax 调用中的数据集成？

我在同一页面上有两个数据网格，它们都需要异步更新。

因此，只是为了绝对清楚问题是什么：

如何将我传递给视图的控制器数据集成到 ajax 调用中，以便更新我的表。-- 我有两个表，它们都有相同的类 id，但如果你愿意，可以使用不同的表 id。

我的表格的 html 是：

```
<?php echo anchor('staff_controller/index', 'Return');?>
    <p class='error'>
        <font color="#ff0000">
            <?php echo $this->session->flashdata('reports');?>
        </font>
    </p>

    <h3>Students Waiting</h3>
            <table id='waiting' class='display'>
                <thead>
                <tr>
                    <th>ID</th>                       
                    <th>A Number</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Time Waiting</th>
                    <th>Reason for visit</th>
                    <th>Comments</th>
                    <th>Aid Year</th>
                    <th>Staff Comments</th>
                    <th>Options</th>
                </tr>
            </thead>
            <tbody>

                <?php $options = array("" => "", 'start' => 'Start Session', 'stop' => 'Student Not Present', 'abandon' => 'End Session', );
                foreach ($waiting as $row) 
                { 
                    ?>                
                <tr>
                    <td><?php echo htmlspecialchars($row['id'], ENT_QUOTES, 'UTF-8'); ?></td>               
                    <td><?php echo anchor('studentqueue_controller/history/'.urlencode($row['anum']). '', htmlspecialchars($row['anum'], ENT_QUOTES, 'UTF-8'), 'target="_blank"'); ?></td>
                    <td><?php echo htmlspecialchars($row['first'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row['last'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row['SECOND'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row['reason'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row['studentcomments'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row['aidyear'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row['counselorcomments'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td>
                        <?php echo form_open('studentqueue_controller/counselorscreen/' .urlencode($row['id']). ''); ?>
                        <?php echo form_dropdown('options', $options, ""); ?>
                        <?php echo form_submit('submit', 'Submit'); ?>
                        <?php echo form_close(); ?>
                    </td>
                </tr>
                <?php
                 } ?>
            </tbody>    
        </table> 
```

### 被看见的学生

```
 <table id='beingseen' class='display'>
            <thead>
                <tr>
                    <th>ID</th>                       
                    <th>A Number</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Sign In Time</th>
                    <th>Staff Member</th>
                    <th>Start Time</th>
                    <th>Options</th>
                </tr>
            </thead>
            <tbody>
                <?php $options1 = array("" => "", 'continue' => 'Continue Session', 'terminate' => 'Terminate Session', );
                foreach ($beingseen as $row1) { ?>                 
                <tr>
                    <td><?php echo htmlspecialchars($row1['id'], ENT_QUOTES, 'UTF-8'); ?></td>              
                    <td><?php echo htmlspecialchars($row1['anum'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row1['first'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row1['last'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row1['signintime'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row1['fname'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td><?php echo htmlspecialchars($row1['starttime'], ENT_QUOTES, 'UTF-8'); ?></td>
                    <td>
                        <?php echo form_open('studentqueue_controller/counselorscreen/' .urlencode($row1['id']). ''); ?>
                        <?php echo form_dropdown('options', $options1, ""); ?>
                        <?php echo form_submit('submit', 'Submit'); ?>
                        <?php echo form_close(); ?>
                    </td>
                </tr>
                <?php } ?>
            </tbody>    
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:25:15.363

这是我的做法：

1.  页面加载请求加载视图的 CI 控制器

2.  View 包含将保存从 ajax 请求返回的数据的数据表（我们为此使用了很棒的 DataTables 插件/扩展）

3.  我的控制器中有一个单独的方法来处理对数据的 ajax 请求（get_table_data_xhr()）......这个方法不加载视图，它只是回显 Datatables 将用来填充表的 JSON 对象。对该方法的请求是在页面加载后发出的，然后在任何触发器上再次刷新数据。

以下是 DataTables 文档的链接：[http](http://www.datatables.net/) ://www.datatables.net/ 以下是使用此方法和 Ajax 请求作为数据源的示例：[http ://www.datatables.net/release-datatables/示例/data_sources/ajax.html](http://www.datatables.net/release-datatables/examples/data_sources/ajax.html)

更新：

这是我的一个 ajax 方法的片段，显示了它为 DataTables 插件返回 json 的内容/方式：

```
 ... // this is happening inside a loop that's assigning things to $data

            $data[] = array(
                'name' => $c->Name,
                'description' => $c->Description,
                'topics' => explode(';', $c->Topic__c),
                'start_date' => $c->StartDate,
                'end_date' => $c->EndDate,
                'sort_date' => $start_time->format('YmdH'),
                'dates' => $event_dates,
                'time' => $event_time,
                'delivery_method' => $c->Delivery_Method__c,
                'level' => $c->Levels__c,
                'url' => $c->Sign_Up_URL__c,
                'location' => $c->Location__c,
                'timezone' => $timezone
            );
        }
        $out['status'] = 'success';
        $out['data'] = $data;
    } else {
        $out['status'] = 'success';
        $out['data'] = array();
    }
}
header('Content-Type: application/json');
echo json_encode(array('aaData' => $out['data'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:30:04.343

我终于完成了申请的这一部分。我没有使用我自己的“更新”类型，而是继续使用 DataTables 更新。

我只是按照这个文档，一切都很好（大部分）。

这对我帮助很大：

[http://datatables.net/forums/discussion/14641/escaping-html-with-datatables](http://datatables.net/forums/discussion/14641/escaping-html-with-datatables)

希望有人能从我的错误中吸取教训。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:27:56.090

如果我理解正确，您正在查看此代码：

```
 url: 'http://kyleschaeffer.com/feed/',
 data: { postVar1: 'theValue1', postVar2: 'theValue2' }, 
```

想知道应该是什么数据？我认为您需要关注 URL 应该是什么。自从

```
 $data['waiting'] = $this -> queue_model -> waiting();
  $data['beingseen'] = $this -> queue_model -> beingseen(); 
```

可能在控制器内部更广泛的功能中。您需要创建一个函数，专门为新的更新请求返回这两条数据（例如：http://mydomain.com/mycontroller/myupdatefunction）。所以你想做一个 GET 请求，因为你没有发布数据，只是请求返回数据。也许[这个例子](https://stackoverflow.com/questions/9349284/why-ajax-get-request-failed)会有所帮助。

# java - 如何在其他计算机上运行java可执行文件

> ID：15433424
> 
> 赞同：2
> 
> 时间：2013-03-15T13:13:02.387
> 
> 标签：java, swing, jar, exe, executable-jar

我使用 Java Swings 制作了一个小型应用程序，然后使用 Netbeans 中的“clean and build”选项创建了项目的 jar 文件。然后，我使用软件“Launch4j”将该 .jar 文件转换为 .exe 文件，它在我的笔记本电脑上完美运行。但是，当我尝试在其他笔记本电脑上运行该 exe 文件时。它显示错误：找不到类 NewJframe.firstfile。（我也在另一台笔记本电脑上使用 MySql Connection 创建了数据库）。

请帮助我澄清为什么我会收到此错误。另外，我想知道在我用 .jar 文件制作的其他计算机上运行 .exe 文件的所有要求是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:19:01.123

我非常希望像 Launch4j 这样的东西能够满足您的所有包装要求；它是否为您提供了“包含所有依赖项”的选项，而您没有单击“是”来...？

听起来它已经打包了您的应用程序，但可能不是运行您的应用程序所需的 Java 运行时环境。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T13:24:22.157

尝试给他 JAR 文件，看看他是否可以运行它。如果他能，那就是 Launch4j 的问题，如果他不能，那就是 Java 的问题。

或者尝试使用 Excelsior JET 之类的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T13:24:41.400

> 找不到类 NewJframe.firstfile

Launch4J 仅将您的应用程序的主 JAR 文件捆绑在 .exe 中（或者即使您选择“不包装 JAR”，也不会捆绑） - 主要依赖的任何其他 JAR 必须存在于相同的相对位置，您可以不一定*只*复制.exe。

# excel - 在 Windows Phone 8 应用程序中创建和邮寄 Excel 电子表格

> ID：15433428
> 
> 赞同：0
> 
> 时间：2013-03-15T13:13:17.030
> 
> 标签：excel, windows-phone-8

我正在做包含数据列表的 WP，我正在尝试将这些数据添加到 Excel 工作表中。当我发送邮件时，这张表将附上我的邮件。我有一个 dll，但是当我生成 excel 表时这仍然给我错误，我按确定然后它会工作，但我对此不满意还有其他的吗我可以实现这种情况的选项..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:42:03.283

首先也是最重要的 - 您使用的是什么 DLL？你得到什么样的错误？

其次，如果您想通过电子邮件（作为附件）发送文档，您将无法使用开箱即用的[EmailComposeTask](http://msdn.microsoft.com/en-us/library/adevelop/hh394003%28v=vs.105%29.aspx)来执行此操作。相反，您可以使用[LiveMailMessage](http://windowsphonegeek.com/marketplace/components/livemailmessage)库：

```
MailMessage mailMessage = new MailMessage();
mailMessage.Email = "test@email.id";
mailMessage.Password = "somePassword";
mailMessage.AccountType = MailMessage.accountType.MicrosoftAccount;
mailMessage.To = "destination@email.id";
mailMessage.Subject = "Test Subject";
mailMessage.Body = "Test Body";
mailMessage.AddAttachement("/Path/to/Spreadsheet");
mailMessage.Send(); 
```

# css - 如何调整vaadin中按钮之间的间距？

> ID：15433429
> 
> 赞同：0
> 
> 时间：2013-03-15T13:13:18.513
> 
> 标签：css, sass, vaadin

我是 Vaadin 框架的新手。我现在正在尝试通过使用 Eclipse vaadin 插件在 Quciktickets 仪表板的首页上重建演示来学习它。现在我在我的主题中使用 css 来配置该页面的侧边栏部分。

我的问题是在边栏中添加按钮后，它们似乎彼此相距太远。那么我该如何解决呢？我试过使用填充，但这只会改变按钮块的大小，而我想改变块之间的间距。感谢任何关注或提示此类菜鸟问题的人。

代码定义`nativebutton`布局：

```
.sidebar .sidemenu .v-nativebutton {
-webkit-appearance: none;
display: block;
padding: 10px 14px 10px;
width: 100%;
border: none;
margin: 0;
/*position: relative;*/

border-top: 1px solid #4b4c4d;
border-top-color: rgba(255,255,255,.05);
border-bottom: 1px solid #353637;
border-bottom-color: rgba(0,0,0,.18);
background:transparent;
color: #888a8c;
font-weight: normal;
text-shadow: 0 1px  0 rgba(0,0,0,.5);
text-align:center;  
} 
```

# c# - 将控件值绑定到选定的数据网格值

> ID：15433432
> 
> 赞同：0
> 
> 时间：2013-03-15T13:13:29.423
> 
> 标签：c#, wpf, xaml, data-binding

在 WPF XAML 中，我试图将控件值绑定到数据网格单元格值，因此每当所选行发生更改时，控件文本值都会更改

我试图做类似的事情

```
<TextBlock Text="{Binding MyGrid.Row.cname}" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:16:24.247

你可以简单地使用`ElementBinding`例如

```
<DataGrid x:Name="grid" ItemsSource="..." />
<TextBlock Text="{Binding ElementName=grid, Path=SelectedItem.cname}" /> 
```

[您可以在此处](http://msdn.microsoft.com/de-de/library/ms752347.aspx#specifying_the_binding_source)找到更多信息。

# for-loop - 计算嵌套 for 循环的复杂度

> ID：15433435
> 
> 赞同：2
> 
> 时间：2013-03-15T13:13:34.100
> 
> 标签：for-loop, big-o, complexity-theory, nested-loops

我想计算这个嵌套 for 循环的复杂度：

```
s = 0;
for(i=1; i<=n; i*=2)
   for(j=1; j<=i; j*=2)
      s++; 
```

我使用什么策略来找出这段代码的大 O 复杂度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:26:52.180

外循环经过 1, 2, 4, 8, ... *n*，这需要 O(lg *n* ) 步，因为你只能加倍 O(lg *n* ) 次，直到你击中*n*。

内循环也是如此。它只上升到*i*，但是在外循环的最后一次迭代中，*i*达到了它的最大值，又是*n*，所以这也是 O(lg *n* )。

将其放在一起给出 O((lg *n* )²) 的上限，通常缩写为 O(lg² *n* )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:53:24.530

**自己获得答案的策略**

将不同的 n 值代入方程，并绘制循环最里面部分运行次数的图表：

```
s = 0;
for(i=1; i<=n; i*=2)
  for(j=1; j<=i; j*=2)
    s++; 
```

像这样的东西：

```
n     num_times_inner_loop_part_runs
1     1
2     3
3     3
4     6
5     6
6     6
7     6
8     10
9     10
...
15    10
16    15
...
31    15
32    21 
```

您可以使用如下程序获取这些数据点：

```
int n = 9;  //change this n
int counter = 0;
for(i=1; i<=n; i*=2){
  for(j=1; j<=i; j*=2){
    s++;
    counter++;
  }
}
cout << "counter is: " <<  counter << endl; 
```

在 X/Y 坐标平面上绘制`num_times_inner_loop_part`运行图，您会看到一条曲线。

命名最接近的曲线。在这种情况下，它是`X = (log(Y)^2)`

如果您绘制数据 和`X = (log(Y)^2)`，您会发现它们应该相互重叠。

因此，这个函数的复杂度`O((log(n))^2)`是`O(n)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T19:54:44.910

这段代码的时间分析：

![分析](../Images/55b4a72540c9c9863456899a7792d260.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T15:20:38.030

您的算法时间复杂度可以正式描述如下：

![在此处输入图像描述](../Images/b273d60f9b5b9092200a90ceb42bd4d6.png)

[本文档](http://faculty.kfupm.edu.sa/ics/jauhar/ics202/Unit03_ComplexityAnalysis1.ppt)（最后一张幻灯片）可能对您非常有用。

# android - Crouton + SlidingMenu 重叠

> ID：15433436
> 
> 赞同：8
> 
> 时间：2013-03-15T13:13:34.907
> 
> 标签：android, slidingmenu, crouton

我同时使用[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)和[Crouton](https://github.com/keyboardsurfer/Crouton)，但我发现滑动菜单与 crouton 通知重叠

![面包片和滑动菜单重叠](../Images/965f463d8dad05b1546c9e10b8270868.png)

我会在 github 上报告一个问题，但我不知道这个 bug 属于哪里。

Cyril Mottier 在他[关于布局内通知](http://android.cyrilmottier.com/?p=773)的 Prixing 文章中提到了 3 个上下文的存在，左侧菜单有自己的上下文。这样，通知与其余内容一起滑动。

![在此处输入图像描述](../Images/23e7c91bf19f3ea2c06cb2b19572e6df.png)

因为 SlidingMenu 和 Crouton 都使用 Activity 上下文，所以这可能根本无法修复。我们可以轻松调用

```
Crouton.cancelAllCroutons(); 
```

在显示 SlidingMenu 之前，但我喜欢 Prixing 的滑出功能。

希望图书馆作者可以声明该错误或对此有所了解。

谢谢！

编辑：

我通过创建对象并将其附加到活动来使用 SlidingMenu

```
private void configureSideMenu() {
   mSlidingMenu = new SlidingMenu(this);
   mSlidingMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
   mSlidingMenu.setFadeDegree(0.35f);
   mSlidingMenu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
   mSlidingMenu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
   mSlidingMenu.setMenu(R.layout.menu_frame);
   getSupportFragmentManager().beginTransaction().replace(R.id.menu_frame, new MySideMenuFragment()).commit();
 } 
```

还有Crouton，我想只有一种方法可以使用它

```
 Crouton.showText(this, R.string.error_not_logged_in, Style.ALERT); 
```

对于*这两种情况，这*是相同的 Activity

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T14:10:40.390

您可以轻松地将 a 附加`Crouton`到特定的`ViewGroup`.

您需要做的就是调用`Crouton.makeText(Activity, CharSequence, Style, ViewGroup)`,`Crouton.make(...)`或`Crouton.show(...)`.

然后创建`Crouton`的将附加到并在打开`ViewGroup`时与它的父级一起滑出。`SlidingMenu`

所以，当你`Crouton`从一个`Fragment`

```
Crouton.showText(this, R.string.error_not_logged_in, Style.ALERT, (ViewGroup) getView()); 
```

否则，您可以将其添加到任何`ViewGroup`（甚至通过资源 id），尽管我建议将`FrameLayout`其附加`Crouton`到。

# javascript - 仅将一些 CSS 样式从一个元素移动到另一个元素

> ID：15433437
> 
> 赞同：6
> 
> 时间：2013-03-15T13:13:37.147
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我创建了一个 jQuery 插件，它采用 HTML 表格，使其可排序，并修复页眉和页脚。有关示例，请参见[http://jsfiddle.net/aXDzz/ （单击创建以创建表）。](http://jsfiddle.net/aXDzz/)

效果很好，但最近需要在桌子周围添加一些填充或边距。这引起了一些问题。

我的插件基本上用`<table>`a替换了原来的，`<div>`其中包含一个`<table>`用于页眉的，一个`<div>`实习生包含一个`<table>`用于正文，一个`<table>`用于页脚。我的意图是让用户将 CSS 应用于原始表格，并且在使用我的插件时，CSS 会适当地转移。然而，如上所述，我将 a 包裹`<div>`在表格周围，以便现在应该将边距或填充应用于`<div>`而不是`<table>`.

所以，看起来我需要将任何适用于外部的 CSS 移动`<table>`到`<div>`诸如边距，但然后留下任何适用于内部的 CSS，`<table>`例如单独的行颜色。

我该怎么做？或者有没有更好的方法我应该实现这个？谢谢

PS。请随时批评我的插件，因为这是我的第一次尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:33:20.263

我尝试根据您的需要修改[此插件：](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element)

```
(function($){
    $.fn.copyStyle = function(jqCopyTo,styleStartsWith,overideStyle){
        var dom = this.get(0);
        var style;
        var returns = {};
        if(window.getComputedStyle){
            var camelize = function(a,b){
                return b.toUpperCase();
            };
            style = window.getComputedStyle(dom, null);
            for(var i = 0, l = style.length; i < l; i++){
                var prop = style[i];
                for(var m = 0; m < styleStartsWith.length; m++){
                    if(prop.lastIndexOf(styleStartsWith[m], 0) === 0)  {
                        var camel = prop.replace(/\-([a-z])/g, camelize);
                        var val = style.getPropertyValue(prop);
                        returns[camel] = val;
                        overideStyle==true ? $(this).css(prop,0):null;
                    }
                }
            };
        };
        if(style = dom.currentStyle){
            for(var prop in style){
                for(var m = 0; m < styleStartsWith.length; m++){
                    if(prop.lastIndexOf(styleStartsWith[m], 0) === 0) { 
                        returns[prop] = style[prop];
                        overideStyle==true ? $(this).css(prop,0):null;
                    }
                }
            };
        };
        //copy 
        $(jqCopyTo).css(returns);
        return this;
    }

})(jQuery); 
```

在这样的结构上：

```
#inner {
  margin:20px;
  padding:20px;
  background-color:#F00;
}
#wrapper {
  background-color:#f80;
} 
```

html:

```
<div id="wrapper">
    <div id="inner">
        Table Content
    </div>
</div> 
```

你可以像这样使用这个插件：

```
$("#inner").copyStyle("#wrapper",["margin","padding"],true); 
```

结果是内部 div 边距和填充被覆盖，并且样式被添加到 wrapper-div。您可以使用最后一个布尔指标处理覆盖行为。

[这是关于jsFiddle](http://jsfiddle.net/amNRX/10/)的完整示例。我不能保证它适用于所有浏览器（刚刚测试过 Firefox 和 ie9）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:49:34.703

我检查了您的代码，并尝试将保证金应用于您的表格：

```
.myTable {
    width:600px;
    matgin-left: 50px;
} 
```

然后我看到了问题所在。但是后来我查看了代码，并且您指定了固定宽度

```
<div style="width: 618px; overflow-y: auto; max-height: 300px;"><table id="myTable" class="myTable"> 
```

这似乎导致了问题。

看一眼：

```
width: 618px; 
```

如果我正确理解了这个问题，这算不上好。也许您可以尝试在插件中找到计算宽度的位置，然后将边距包含在计算宽度中。到目前为止我还没有找到。插件很长。。

当我放，例如 665px 时，它看起来有点好..

也许这就是解决方案。

# android - 当我在 EditText 中编辑数据时，BaseExpandableListAdapter 调用 getgroupview()

> ID：15433456
> 
> 赞同：4
> 
> 时间：2013-03-15T13:14:47.220
> 
> 标签：android

我正在使用 Android 中的 ExpandableListView。

我有一个夸大这个视图的对话框：

```
<ExpandableListView
    android:id="@+id/comments_list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/editTextNewComment"
    android:layout_alignParentLeft="true" >
</ExpandableListView>

<EditText
    android:id="@+id/editTextNewComment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/imageButtonPostNewComment"
    android:ems="10"
    android:singleLine="true" >

    <requestFocus />
</EditText> 
```

对于 getgroupview() 方法，我的 BaseExpandableListAdapter 看起来像这样：

```
 public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
        ViewGroup parent) {

    View row = convertView;
    ViewHolder holder = null;

    Log.d("LIST", "getGroupView() groupPosition " + groupPosition + "  isExpanded " + isExpanded + " row " + row);

    if(row==null) {
        LayoutInflater infl = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = infl.inflate(R.layout.list_item_comment,parent,false);
        holder = new ViewHolder(row);
        holder.imbutton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Integer pos = (Integer) v.getTag();
                //Do something
            }
        });
        row.setTag(holder);
    }
    else {
        holder = (ViewHolder) row.getTag();
    }
    holder.imbutton.setTag(Integer.valueOf(groupPosition));
    holder.header.setText(""+ (groupPosition+1) + " - " + comments[groupPosition].getOwner());
            //.... etc - setting all the textviews accordingly

    return row;
} 
```

对于我的问题：

当我在我的edittext中写东西时，getgroupview一直被调用！这是仅在编辑文本中添加一个字母的日志输出：

```
03-15 14:07:51.072: D/LIST(4176): getGroupView() groupPosition 0  isExpanded false row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.080: D/LIST(4176): getGroupView() groupPosition 1  isExpanded true row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.088: D/LIST(4176): getChildView()
03-15 14:07:51.096: D/LIST(4176): getGroupView() groupPosition 0  isExpanded false row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.104: D/LIST(4176): getGroupView() groupPosition 1  isExpanded true row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.111: D/LIST(4176): getChildView()
03-15 14:07:51.119: D/LIST(4176): getGroupView() groupPosition 0  isExpanded false row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.119: D/LIST(4176): getGroupView() groupPosition 1  isExpanded true row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.127: D/LIST(4176): getChildView()
03-15 14:07:51.135: D/LIST(4176): getGroupView() groupPosition 0  isExpanded false row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.135: D/LIST(4176): getGroupView() groupPosition 1  isExpanded true row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.143: D/LIST(4176): getChildView()
03-15 14:07:51.151: D/LIST(4176): getGroupView() groupPosition 0  isExpanded false row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.151: D/LIST(4176): getGroupView() groupPosition 1  isExpanded true row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.158: D/LIST(4176): getChildView()
03-15 14:07:51.205: D/LIST(4176): getGroupView() groupPosition 0  isExpanded false row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.205: D/LIST(4176): getGroupView() groupPosition 1  isExpanded true row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.213: D/LIST(4176): getChildView()
03-15 14:07:51.213: D/LIST(4176): getGroupView() groupPosition 0  isExpanded false row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.213: D/LIST(4176): getGroupView() groupPosition 1  isExpanded true row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.221: D/LIST(4176): getChildView()
03-15 14:07:51.221: D/LIST(4176): getGroupView() groupPosition 0  isExpanded false row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.221: D/LIST(4176): getGroupView() groupPosition 1  isExpanded true row android.widget.RelativeLayout{41a17d98 V.E..... ......I. 0,0-0,0}
03-15 14:07:51.229: D/LIST(4176): getChildView() 
```

对于输入的每个字母，getGroupView() 和 getChildView() 都会被调用多次。在上面的示例中，列表视图显然被重绘了八次（对于该示例，我在列表中有 2 个组视图和一个子视图。）

我错过了什么？当我在编辑文本中键入内容时，甚至不需要重绘列表视图。即使它被重绘，为什么会有八次调用不同的 getview 方法？

编辑：我现在看到，即使我折叠和/或展开组视图，也有很多调用 getgroupview 和 getchildview-methods。这是应该的吗？

EDIT2：现在在正常活动中使用带有edittext的列表进行了一些测试，似乎该列表没有那么频繁地重绘。所以问题似乎在于我在对话框中提出这个问题。看不出为什么它甚至需要重绘。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T13:26:55.603

您永远无法知道何时`getView`调用方法（对于 也是如此`getGroupView`）以及调用多少次。

但我确实看到了一些可以使其调用超过需要的东西：在您的布局中，您将`ExpandableListView`高度设置为**wrap_content**。我不认为这是一件好事：

你让他需要重绘它的孩子以知道它的大小以适应它的内容，而它不需要包装它的内容，因为它是一个可滚动的布局。

尝试将其设置为`0dip`，`layout_weight="1"`以便为您的文本视图留出空间：

```
<ExpandableListView
    android:id="@+id/comments_list"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:layout_above="@+id/editTextNewComment"
    android:layout_alignParentLeft="true" >
</ExpandableListView> 
```

# c++ - C++：添加两个多项式时出现数学错误

> ID：15433457
> 
> 赞同：0
> 
> 时间：2013-03-15T13:14:49.377
> 
> 标签：c++, operator-overloading, polynomial-math

我正在编写多项式类并重载了 + 运算符。前几天我问了一个关于实际超载过程的问题，得到了很好的回答。但是，我现在的问题是关于我的程序的实际功能。

我需要将两个用户输入的多项式加在一起。当一个多项式相加时，即使两个多项式大小不同，也只能相加。如果第一个输入的多项式大于第二个，我的程序可以正常运行，但如果第一个多项式小于第二个，我的程序会出错。更具体地说......我注意到它似乎留下了一个学期。最重要的是，它似乎将两个相似的项加在一起，然后用不同的指数打印出来。例如：2x^3 + 3x^3 = 5x^2。

作为参考，这是我之前关于这个程序的问题：[Overloading + operator with classes contains array pointers (C++)](https://stackoverflow.com/questions/15395924/overloading-operator-with-classes-containing-array-pointers-c/15395971?noredirect=1#comment21764261_15395971)

一些帮助将不胜感激。

我的代码：

```
#include<iostream>
#include<stdexcept>
using namespace std;

#ifndef POLYNOMIAL_H
#define POLYNOMIAL_H

class Polynomial 
{
      friend istream& operator>>(istream& in, Polynomial& p);
      friend ostream& operator<<(ostream& out, const Polynomial& p);
      public:
             Polynomial(int = 10);
             ~Polynomial();
             void assignExponent();
             Polynomial operator+(const Polynomial& other);

      private:
              int SIZE;
              int *exponents;
              int *polyPtr; 
};

#endif

//CONSTRUCTOR
Polynomial::Polynomial(int arraySize)
{
     if(arraySize > 0)
                  SIZE = arraySize;
     else
     {
         cout << "Array size must be greater than 0\. Program will now "
              << "Terminate..." << endl;

         system("pause");
         exit(0);
     }

     polyPtr = new int[SIZE]; 
     exponents = new int[SIZE];

     for(int i = 0; i<SIZE; i++)
             polyPtr[i] = 0;

     assignExponent();
};

//DESTRUCTOR
Polynomial::~Polynomial() 
{
     delete [] polyPtr;                         
};

//STREAM INSERTION
istream& operator>>(istream& in, Polynomial& p)
{
         for(int i = 0; i<p.SIZE; i++)
         {
               in >> p.polyPtr[i];         
         }

         return in;
};

//STREAM EXTRACTION
ostream& operator<<(ostream& out, const Polynomial& p)
{
         int exponent;
         for(int i = 0; i<p.SIZE; i++)
         {
               exponent = (p.SIZE - 1) - i;

               if(p.polyPtr[i] != 1)
               {  
                  if(exponent > 0 && exponent != 1)
                           out << p.polyPtr[i] << "x^" << exponent << " + ";  

                  if(exponent == 1)
                           out << p.polyPtr[i] << "x" << " + ";

                  if(exponent == 0)
                           out << p.polyPtr[i];  
               }

               //In order to not display coefficient if = 1
               else
               {
                   if(exponent > 0 && exponent != 1)
                           out << "x^" << exponent << " + ";  

                   if(exponent == 1)
                           out << "x" << " + ";

                   if(exponent == 0)
                           out << p.polyPtr[i];
               }    
         }       

         return out;
}; 

//Assigns a value for exponent
void Polynomial::assignExponent()
{
     for(int i = 0; i<SIZE; i++)
     {
             exponents[i] = (SIZE - 1) - i;        
     }
};

//OVERLOAD OF + OPERATOR
Polynomial Polynomial::operator+(const Polynomial& other)
{
         Polynomial sum(SIZE);
         int difference;

         //If the first polynomial is larger
         if (SIZE > other.SIZE)
         {
            difference = SIZE - other.SIZE;

            for(int i = 0; i<SIZE; i++)
            {
                 if(i - difference < 0)
                      sum.polyPtr[i] = polyPtr[i];

                 else
                 {
                     sum.polyPtr[i] = polyPtr[i] + 
                                  other.polyPtr[i - difference];  
                 }                            
            }         
         }

         //If the second polynomial is larger       **PROBLEM***************************************  
         if(other.SIZE > SIZE)
         {
            difference = other.SIZE - SIZE;

            for(int i = 0; i<other.SIZE; i++)
            {
                 if(i - difference < 0)
                      sum.polyPtr[i] = other.polyPtr[i];

                 else
                 {
                     sum.polyPtr[i] = other.polyPtr[i] + 
                                  polyPtr[i - difference];  
                 }                            
            }         
         }

         //If the polynomials are equal
         if(SIZE == other.SIZE)     
         {
                  for(int i = SIZE-1; i >= 0; i--)
                  {
                          sum.polyPtr[i] = polyPtr[i] + other.polyPtr[i];        
                  }   
         }

         return sum;
};

int main()
{
    int polySize;

    //User enters a size for the first & second polynomial
    cout << "Enter a size for the first polynomial: ";
    cin >> polySize;
    Polynomial pOne(polySize);

    cout << "\nEnter a size for the second polynomial: ";
    cin >> polySize;
    Polynomial pTwo(polySize);

    //User enters in values (Overload of >> operator
    cout << "\n\nEnter in values for the first polynomial, "
         << "in the format - (x x x x): " << endl;
    cin >> pOne;
    cout << "\nEnter in values for the second polynomial, "
         << "in the format - (x x x x): " << endl;
    cin >> pTwo;

    //Overload << operator for output
    cout << "\nPolynomial 1 is: " << pOne << endl
         << "Polynomial 2 is: " << pTwo << endl;

    Polynomial pThree = pOne + pTwo;

    cout << "\nAfter being added together, the new polynomial is: "
         << pThree << endl;

 system("pause");   
} 
```

输出窗口： ![在此处输入图像描述](../Images/d61657cf50398e06dc2a4ab7c86b43ab.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:37:29.497

的应该是两个多项式`SIZE`中的最大值：`sum``SIZE`

```
Polynomial Polynomial::operator+(const Polynomial& other)
{
         Polynomial sum( max(SIZE,other.SIZE) ); 
```

否则，您的新多项式仅与您正在对其进行操作的多项式一样大，并且您将在循环的下方写入未分配的内存：

```
for(int i = 0; i<other.SIZE; i++)
{
     if(i - difference < 0)
          sum.polyPtr[i] = other.polyPtr[i];

     else
     {
         sum.polyPtr[i] = other.polyPtr[i] + 
                      polyPtr[i - difference];  // i may be higher than SIZE, thus sum.polyPtr[i] invokes undefined behaviour.
     }                            
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T13:42:29.877

当前的第一个问题在这里：

```
 Polynomial sum(SIZE); 
```

更好的：

```
 Polynomial sum(std::max(SIZE, other.SIZE)); 
```

但我认为真正的问题是你需要简化你的设计。首先可以使用：

```
 private:
              int    SIZE;
              double *coef;
}; 
```

简单地保持 ax^n in 的系数`coef[n]=a`。现在很容易找出您需要添加的元素。

但更简单的可能是用于 `std::map<int,double> p;`存储所有内容。`p[n]=a;`

没有调试和优化，只是一个想法：

```
 private:
             std::map<int,double> p; 
}; 
```

忘记任何`new`,`delete`和索引超出范围。

+() 将类似于：

```
Polynomial Polynomial::operator+(const Polynomial& other)
{
   Polynomial sum;  // No SIZE more.
   sum.p= p;
   for (auto ax_n : other.p)
      sum.p[ax_n.first] += ax_n.second;
   return sum;
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T13:31:08.333

您的问题在于 sum(SIZE) 的构造

```
Polynomial Polynomial::operator+(const Polynomial& other)
{
         Polynomial sum(SIZE); 
```

如果您这样做，并且第一个多项式的大小仅为 2，则稍后在该方法中您将复制到不属于您的内存中：

```
 if(other.SIZE > SIZE)
     {
        difference = other.SIZE - SIZE; 
```

////这是您的问题 - 您的循环使用 other.SIZE，它大于 SIZE...

```
 for(int i = 0; i<other.SIZE; i++)
        {
             if(i - difference < 0)
                  sum.polyPtr[i] = other.polyPtr[i];

             else
             {
                 sum.polyPtr[i] = other.polyPtr[i] + 
                              polyPtr[i - difference];  
             }                            
        }         
     } 
```

发生错误是因为您使用`sum.polyPtr[i]`，当 SIZE < other.SIZE 发生时，它不存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T14:27:25.693

你的代码太复杂了。这样的事情做得很好：

```
#include <algorithm>
#include <iostream>
#include <vector>
#include <iterator>
#include <sstream>

// helper to read the input polynomials into a output-iterator
template<class OutIter>
void read_vector(std::istream& is, OutIter first)
{
        // helper type to iterate over the input coefficients
        typedef std::istream_iterator<
                typename OutIter::container_type::value_type> iter_t;
        // buffer to hold the input line
        std::string buffer;
        // read it
        std::getline(is, buffer);
        // create a string stream with which we tokenize the input
        std::istringstream iss(buffer);
        // read coefficients into output container
        std::copy(iter_t(iss), iter_t(), first);
}

int main()
{
        std::vector<double> p1, p2;

        // read input
        std::cout << "Enter coefficients of the first polynomial: ";
        read_vector(std::cin, std::back_inserter(p1));
        std::cout << "Enter coefficients of the second polynomial: ";
        read_vector(std::cin, std::back_inserter(p2));

        // check for errors
        if (p1.empty() || p2.empty())
        {
            std::cerr << "Error: polynomials must not be empty\n";
            return 1;
        }

        // initialize result polynomial to 0\. coefficients
        std::vector<double> p3(std::max(p1.size(), p2.size()), 0.);
        // copy first polynomial to the result, starting from the back
        std::copy(p1.rbegin(), p1.rend(), p3.rbegin());
        // add second polynomial, starting from the back
        std::transform(p2.rbegin(), p2.rend(), p3.rbegin(), p3.rbegin(),
                       std::plus<double>());

        // print result
        std::cout << "Sum: ";
        const size_t n = p3.size()-1;
        for (size_t i=0; i < n; ++i)
        {
                std::cout << std::showpos << p3[i] << "x^" << n-i;
        }
        std::cout << std::showpos << p3[n] << "\n";
} 
```

# objective-c - 将应用程序部署为临时（Urban Airship）时设备令牌为空

> ID：15433465
> 
> 赞同：1
> 
> 时间：2013-03-15T13:15:33.513
> 
> 标签：objective-c, push-notification, apple-push-notifications, urbanairship.com, devicetoken

**我在我的应用程序中实现了 Urban Airship 库，并且可以在开发模式下**成功地将推送通知发送到特定设备。启动后，我得到设备令牌并将其保存到 mysql 数据库中。但是，当我在 ad-hoc 模式下使用应用程序时，设备令牌始终是`(null).`

`APP_STORE_OR_AD_HOC_BUILD`设定为`YES`

并且生产和开发的APP Key和APP-Secret都是正确的。

任何想法如何在 ad-hoc/appstore 模式下获取设备令牌？

* * *

编辑：相同的问题已发布在[Urban Airship Forum](https://support.urbanairship.com/customer/en/portal/questions/883785-device-token-null-when-deploying-app-as-ad-hoc?new=883785)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T08:23:42.727

对我来说，同样的事情也发生了。我们为解决问题所做的只是重新创建了新的 adHoc 配置文件。然后我们收到警报，要求安装推送通知。它是 iOS 推送通知中的主要问题之一。我们必须在创建配置文件之前配置推送通知 SSL 证书。

# c# - 未能在 Visual Studio 中添加服务引用

> ID：15433466
> 
> 赞同：0
> 
> 时间：2013-03-15T13:15:33.337
> 
> 标签：c#, web-services, visual-studio-2008

我遇到了服务问题。

所以基本上我有一个网络项目，我想在其中添加一些对服务的外部引用，但是当我尝试添加它时，或者当我尝试发现（通过单击 GO）时，我得到一个错误：

```
The HTML document does not contain Web service discovery information.
Metadata contains a reference that cannot be resolved: 'http://webadress:port/wsdl/authentication-service.wsdl'.
The content type text/html of the response message does not match the content type of the binding (application/soap+xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 1024 bytes of the response were: '<?xml version="1.0" encoding="UTF-8"?>

<wsdl:definitions name="authentication-service"
   targetNamespace="http://www.alfresco.org/ws/service/authentication/1.0" 
   xmlns:apachesoap="http://xml.apache.org/xml-soap" 
   xmlns:auth="http://www.alfresco.org/ws/service/authentication/1.0" 
   xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
   xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" 
   xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <!-- ************************************** -->
   <!-- Copyright Alfresco Software, Inc. 2005 -->
   <!-- ************************************** -->
   <wsdl:types>
      <schema elementFormDefault="qualified" targetNamespace="http://www.alfresco.org/ws/service/authentication/1.0" xmlns="http://www.w3.org/2001/XMLSchema">
         <element name="startSession">
            <complexType>
               <sequence>
                  <element name="fa" type="xsd:string"/>
                  <element name="fp" type="xsd:string"/>
             '.
If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

基本上我不知道我应该知道什么，我怎样才能访问该服务，最好的方法是什么，为什么我不能在 VS 中引用该服务？

参考是这样的：（`http://webadress:port/wsdl/authentication-service.wsdl`它是外部服务，不是我的或任何东西）

当我在浏览器中打开这个 url 时，我确实得到了一个有效的 xml 来查看....

任何想法总是受欢迎的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:36:21.787

在添加外部 api 引用时，我曾经遇到过类似的问题，有时它可以使用[wsdl](http://msdn.microsoft.com/en-us/library/7h3ystb6%28v=vs.80%29.aspx)工具生成代理类。你可以试一试

# wpf - WPF Web 浏览器控件需要很长时间才能加载

> ID：15433470
> 
> 赞同：0
> 
> 时间：2013-03-15T13:15:44.647
> 
> 标签：wpf, wpf-controls, wpftoolkit, wpf-4.0

您好我正在开发一个 WPF 应用程序。Web 浏览器控件需要很长时间才能加载页面。有没有办法在页面加载之前显示一些文本。这 。[Documenttext](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext%28v=vs.90%29.aspx) is not available 在 WPF 中不可用。

1）有没有办法让网络浏览器控制更快。

2）有没有办法在页面加载之前显示一些文本。

我目前正在使用 Visual Studio 2010，我正在使用以下代码导航到页面

```
public Window3()
    {
        InitializeComponent();
        this.Loaded += new RoutedEventHandler(Window3_Loaded);
    }

    public void Window3_Loaded(object sender, RoutedEventArgs e)
    {

        webBrowser1.Navigate(new Uri("http://www.google.com")));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:22:44.617

您可以首先调用[NavigateToString](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.navigatetostring.aspx)并传入一些初始 HTML，或者只是[导航](http://msdn.microsoft.com/en-us/library/ee169602.aspx)到本地页面，然后尝试浏览其他站点。

就像是

```
webBrowser.NavigateToString(@"<html><body><h1>PageLoading</h1></body></html>"); 
```

或者

```
webBrowser.Navigate(@"/index.html"); 
```

# java - 带有 Jaxb2Marshaller 的 Spring MVC 在 2013 年日期失败

> ID：15433474
> 
> 赞同：2
> 
> 时间：2013-03-15T13:16:01.933
> 
> 标签：java, spring-mvc, jaxb2

我有一个 Spring MVC 项目，它通过 PUT 方法接受 XML 输入。XML 中的元素之一是`dateTime`. 我正在使用 a`Jaxb2Marshaller`将 XML 解组为 bean。我有一个针对在服务器上运行的 webapp 运行的单元测试。

当我使用一切正常发送时间戳`new GregorianCalendar(2012, 01, 02)`并且我的应用程序接收到对象时。

但是，如果我更新测试以使用`new GregorianCalendar(2013, 01, 02)`Object 中的该字段，则返回为`null`.

请注意，唯一的区别是年份，2012 年与 2013 年。我在应用程序日志、localhost 或 catalina.out 中没有看到任何错误消息。

想法？

编辑：附加信息...

我正在使用`DataTypeConverter`转换`dateTime`为`Calendar`。所以我的架构具有以下内容（我正在使用 XJC 将架构转换为 Java 类）。

```
<annotation><appinfo><jaxb:globalBinding>
      <jaxb:javaType name="java.util.Calendar" xmlType="dateTime"
          parseMethod="javax.xml.bind.DatatypeConverter.parseDate"
          printMethod="javax.xml.bind.DatatypeConverter.pringDate"/>
</jaxb:globalBinding></appinfo></annotation> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:05:27.213

所以我摆脱了到的映射`Calendar`并允许 XJC 生成带有`XMLGregorianCalendar`. 这似乎解决了这个问题。仍然看起来很奇怪，所以我对洞察力持开放态度。

# django - Django中的简单搜索引擎。在 html 内容中搜索

> ID：15433483
> 
> 赞同：0
> 
> 时间：2013-03-15T13:16:23.840
> 
> 标签：django

如何创建简单的搜索引擎？我有这样的事情：

```
def search(request):
    if 'search' in request.GET:
        term = request.GET['search']
        if len(term) > 3:
            d = Data.objects.filter(Q(content__contains=term) | Q(
                desc__contains=term))
            count = d.count()
            return render_to_response('search_result.html', {'d': d, 'count': count}, context_instance=RequestContext(request))
    return render_to_response('search_result.html', context_instance=RequestContext(request)) 
```

如果我在模型中搜索，这没关系，但我需要在 html 内容中搜索（我使用 django-chunks）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:23:46.960

Django 块数据也[存储](https://github.com/clintecker/django-chunks/blob/master/chunks/models.py.%20You%20can%20import%20it%20and%20query%20it.)在模型中。您可以像任何其他模型一样导入和过滤它

```
class Chunk(models.Model):
    """
    A Chunk is a piece of content associated
    with a unique key that can be inserted into
    any template with the use of a special template
    tag
    """
    key = models.CharField(_(u'Key'), help_text=_(u"A unique name for this chunk of content"), blank=False, max_length=255, unique=True)
    content = models.TextField(_(u'Content'), blank=True)
    description = models.CharField(_(u'Description'), blank=True, max_length=64, help_text=_(u"Short Description"))

    class Meta:
        verbose_name = _(u'chunk')
        verbose_name_plural = _(u'chunks')

    def __unicode__(self):
        return u"%s" % (self.key,) 
```

`contains`如果您的数据集非常小，这是一种查询的好方法。它只是发出一个`LIKE`查询，所以它不会很好地扩展。如果您将拥有大量数据，那么寻找专门为全文搜索创建的引擎将是一个好主意。

# prolog - 如何找出 Prolog 是否执行尾调用优化

> ID：15433488
> 
> 赞同：6
> 
> 时间：2013-03-15T13:16:37.397
> 
> 标签：prolog, tail-recursion, dcg, tail-call-optimization

[使用 SWI Prolog（Win x64）的开发版本，我为确定性词法分析器（托管在 github）](https://github.com/sebgod/goldparser-prolog)编写了 DCG 谓词（因此所有外部谓词都没有选择点）：

```
read_token(parser(Grammar, Tables),
       lexer(dfa-DFAIndex, last_accept-LastAccept, chars-Chars0),
       Token) -->
(   [Input],
    {
     dfa:current(Tables, DFAIndex, DFA),
     char_and_code(Input, Char, Code),
     dfa:find_edge(Tables, DFA, Code, TargetIndex)
    }
->  { table:item(dfa_table, Tables, TargetIndex, TargetDFA),
      dfa:accept(TargetDFA, Accept),
      atom_concat(Chars0, Char, Chars),
      NewState = lexer(dfa-TargetIndex,
                       last_accept-Accept,
                       chars-Chars)
    },
    read_token(parser(Grammar, Tables), NewState, Token)
;   {
     (   LastAccept \= none
     ->  Token = LastAccept-Chars0
     ;   (   ground(Input)
         ->  once(symbol:by_type_name(Tables, error, Index, _)),
             try_restore_input(Input, FailedInput, InputR),
             Input = [FailedInput | InputR],
             format(atom(Error), '~w', [FailedInput]),
             Token = Index-Error
         ;   once(symbol:by_type_name(Tables, eof, Index, _)),
             Token = Index-''
         )
     )
    }
). 
```

现在使用`(;)`了`->`很多，我想知道 SWI-Prolog 是否可以`read_token(parser(Grammar, Tables), NewState, Token)`使用 Tail-Call-Optimization 优化递归，或者我是否必须手动将谓词拆分为几个子句。我只是不知道如何找出解释器的作用，尤其是知道在运行调试器时 TCO 被禁用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T16:07:42.013

为了回答您的问题，我首先寻找可能会阻止最后通话优化的“琐碎”目标。如果发现一些：

```
     ; （接地（输入）
         -> 一次（符号：by_type_name（表，错误，索引，_）），
             try_restore_input（输入，失败输入，InputR），
             输入 = [失败输入 | 输入R]，
             格式（原子（错误），'〜w'，[FailedInput]），
             令牌 = 索引错误
         ; 一次（符号：by_type_name（表，eof，索引，_）），
             令牌 = 索引-''
         )

```

在这两种情况下，仅这些目标就可以防止 LCO。

现在，我遵守了您的规则并查看了扩展`listing`：

```
?- 列表（read_token）。
read_token（解析器（O，B），词法分析器（dfa-C，last_accept-T，chars-J），Q，A，S）：-
        ( A=[D|G],
            dfa：当前（B，C，E），
            char_and_code(D, K, F),
            dfa:find_edge(B, E, F, H),
            N=G
        -> 表：项目（dfa_table，B，H，I），
            dfa：接受（我，L），
            atom_concat(J, K, M),
            P=lexer(dfa-H, last_accept-L, chars-M),
            R=N,
            read_token（解析器（O，B），
                       磷，
                       问，
                       R,
                       S) %1：看起来不错！
        ; ( T\=无
            -> Q=TJ
            ; 地面(D)
            -> 一次（符号：按类型名称（B，错误，W，_）），
                try_restore_input(D, U, V),
                D=[U|V],
                格式（原子（X），'〜w'，[U]），
                Q=WX % 2：防止LCO
            ; 一次（符号：by_type_name（B，eof，W，_）），
                Q=W-'' % 3：防止LCO
            ),
            S=A     % 4：防止LCO
        ）。

```

广告 1）这是您最有可能正在寻找的递归案例。在这里，一切似乎都很好。

ad 2,3) 上面已经讨论过了，也许你想交换目标

广告 4) 这是 DCG 中精确、`{}//1`稳定的处理方式的效果。根据经验：实施者宁愿坚定不移，也不愿争取 LCO-ness。请参考：[DCG扩展：坚定不移？](https://stackoverflow.com/questions/13100364/dcg-expansion-is-steadfastness-ignored)

另请注意，这不仅仅是调用框架的简单重用。与垃圾收集有很多交互。为了克服 SWI 中的所有这些问题，需要一个额外的 GC 阶段。

有关更多信息，请参阅[Prolog 中 Precise Garbage Collection 中的微小基准](http://www.complang.tuwien.ac.at/ulrich/papers/PDF/#2008-ciclops)

所以最后回答你的问题：你的规则可能会优化；前提是在递归目标之前没有选择点。

* * *

对此也有真正的低级方法。我从不将它用于代码开发：`vm_list`. 该清单最终向您展示了 SWI 是否会考虑 LCO（前提是没有选择点）。

`i_call`并且`i_callm`永远不会执行 LCO。只会`i_depart`做。在：`142 i_depart(read_token/5)`

```
?- vm_list(read_token)。
==================================================== =======================
read_token/5
==================================================== =======================
   0 s_处女
   1 i_exit
--------------------------------------
第 1 条（（0x1cc4710））：
--------------------------------------
   0 h_functor（解析器/2）
   2 h_firstvar(5)
   4 h_firstvar(6)
   6 h_pop
   7 h_functor(lexer/3)
   9 h_functor((-)/2)
  11 h_const(dfa)
  13 h_firstvar(7)
  15 h_pop
  16 h_functor((-)/2)
  18 h_const(last_accept)
  20 h_firstvar(8)
  22 h_pop
  23 h_rfunctor((-)/2)
  25 h_const(字符)
  27 h_firstvar(9)
  29 h_pop
  30 i_enter
  31 c_ifthenelse(26,118)
  34 b_unify_var(3)
  36 h_list_ff(10,11)
  39 b_unify_exit
  40 b_var(6)
  42 b_var(7)
  44 b_firstvar(12)
  46 i_callm(dfa,dfa:当前/3)
  49 b_var(10)
  51 b_firstvar(13)
  53 b_firstvar(14)
  55 i_call(char_and_code/3)
  57 b_var(6)
  59 b_var(12)
  61 b_var(14)
  63 b_firstvar(15)
  65 i_callm(dfa,dfa:find_edge/4)
  68 b_unify_fv(16,11)
  71 c_cut(26)
  73 b_const（dfa_table）
  75 b_var(6)
  第77章（15）
  79 b_firstvar(17)
  81 i_callm（表，表：项目/4）
  第84章（17）
  86 b_firstvar(18)
  88 i_callm（dfa，dfa：接受/2）
  91 b_var(9)
  第93章（13）
  95 b_firstvar(19)
  97 i_call(atom_concat/3)
  99 b_unify_firstvar(20)
 101 b_functor（词法分析器/3）
 103 b_functor((-)/2)
 第105章
 第107章（15）
 第109章
 110 b_functor((-)/2)
 第112章
 第114章（18）
 第116章
 117 b_rfunctor((-)/2)
 第119章
 第121章（19）
 第123章
 第124章
 125 b_unify_fv（21,16）
 128 b_functor（解析器/2）
 第130章（5）
 第132章（6）
 第134章
 第135章（20）
 第137章
 第138章（21）
 第140章（4）
142 i_depart（读取令牌/5）
 144 c_var_n(22,2)
 147 c_var_n(24,2)
 150 c_jmp（152）
 152 c_ifthenelse（27,28）
 第155章（8）
 第157章
 159 i_call((\=)/2)
 第161章（27）
 第163章（2）
 165 h_functor((-)/2)
 第167章（8）
 第169章（9）
 第171章
 第172章
 第173章（10）
 175 c_var_n(22,2)
 178 c_var_n(24,2)
 第181章（101）
 183 c_ifthenelse（28,65）
 第186章（10）
 188 i_call（地面/1）
 第190章（28）
 192 b_functor((:)/2)
 第194章
 196 b_rfunctor（by_type_name/4）
 第198章（6）
 200 b_const（错误）
 第202章（22）
 第204章
 第205章
 206 i_call（一次/1）
 第208章（10）
 第210章（23）
 第212章（24）
 214 i_call（try_restore_input/3）
 第216章（10）
 第218章
 第219章（23）
 第221章（24）
 第223章
 第224章
 225 b_functor（原子/1）
 第227章（25）
 第229章
 第230章
 第232章
 第233章（23）
 第235章
 第236章
 237 i_call（格式/3）
 第239章（2）
 241 h_functor((-)/2)
 第243章（22）
 第245章（25）
 第247章
 第248章
 第249章（33）
 251 b_functor((:)/2)
 第253章
 255 b_rfunctor（by_type_name/4）
 第257章（6）
 第259章
 第261章（22）
 第263章
 第264章
 265 i_call（一次/1）
 第267章（2）
 第269章
 第271章（22）
 第273章
 第275章
 第276章
 第277章（10）
 第279章 (23,2)
 第282章（25）
 第284章 (4,3)
 第287章 (11,2)
 290 c_var_n(13,2)
 293 c_var_n(15,2)
 296 c_var_n(17,2)
 第299章（19,2）
 第302章（21）
 第304章

```

# ruby-on-rails - HATBM，如何写入查找表并仅写入关联表之一，而不是两者？

> ID：15433489
> 
> 赞同：0
> 
> 时间：2013-03-15T13:16:39.927
> 
> 标签：ruby-on-rails, has-and-belongs-to-many, lookup-tables

问题是：给定两个模型 A 和 B 在 HABTM 关联中，当我创建 A 的新实例时，如何指示 Rails 不写入 A、B 和 A_B，而只写入 A 和 A_B？

所以，更准确地说：我有两个相关的模型：气球和颜色

```
class Balloon < ActiveRecord::Base
  has_and_belongs_to_many :colors
end 
class Color < ActiveRecord::Base
  has_and_belongs_to_many :balloons
end 
```

_form.html.haml 包含：

```
 .field
    = f.label :color
    - Color.all.each{|c|
    = check_box_tag("color[]", c.name)
    = c.name
    -} 
```

和气球控制器：

```
 def create
    @balloon = Balloon.new(params[:balloon])
    params[:color].each do |col|
      @balloon.colors.build(:name=>col)
    end
    .... 
```

保存时，表中有以下记录：

```
sqlite> select * from balloons;
1|b1
2|b2
3|b3
4|b4

sqlite> select * from colors;
1|red
2|green
3|red
4|red
5|red

sqlite> select * from balloons_colors;
1|1
1|2
2|3
3|4
4|5 
```

问题是我不希望表 Colors 收到重复的记录，我希望负责关联的表 (balloons_colors) 每次添加气球时都会获得额外的记录。所以我想要类似的东西

```
sqlite> select * from colors;
1|red
2|green

sqlite> select * from balloons_colors;
1|1
1|2
2|1
3|1
4|1 
```

编辑：添加架构：

```
sqlite> .schema balloons_colors 
CREATE TABLE "balloons_colors" ("balloon_id" integer, "color_id" integer); 
```

该表是由以下迁移创建的

```
class BalloonsHaveAndBelongToManyColors < ActiveRecord::Migration
  def self.up
    create_table :balloons_colors, :id => false do |t|
      t.references :balloon, :color
    end
  end
.....
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:04:57.893

问题是你使用`build`on `@ballon.colors`。Build 实例化一种新颜色，而不是找到一种颜色。向集合中添加成员通常是这样完成的：

```
@color = Color.find(params[:color_id]) 
@balloon.colors << @color 
```

另一种方法是使用嵌套属性。

# macros - 如何在 SlickEdit 中创建一个宏，将光标下的文件名和行号复制到剪贴板？

> ID：15433490
> 
> 赞同：0
> 
> 时间：2013-03-15T13:16:54.383
> 
> 标签：macros, slickedit

如何在 SlickEdit 中创建一个宏，将光标下的文件名和行号复制到剪贴板？尝试将解决方案限制为 SlickEdit 版本 15.0.1.3 中包含的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:25:50.777

这里 ...

（有点反直觉，因为我认为我可以使用`copy_to_clipboard`，但这只是复制了你的光标所在的位置......但是看看我也看到定义的代码`push_clipboard`）

```
#include "slick.sh"
_command currpos_to_paste() name_info(',' VSARG2_MACRO )
{
  push_clipboard(p_buf_name':'p_line)
} 
```

ps 我认为您在 v15 中运行应该不会有任何问题，但我目前没有现成可用的

# c++ - Boost Graph read_graphml & 动态顶点属性

> ID：15433492
> 
> 赞同：1
> 
> 时间：2013-03-15T13:16:58.297
> 
> 标签：c++, boost, graph, boost-graph, graphml

我使用了 boost 图形库并从 graphml 中读取了一个图形，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"  
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns
   http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">
    <graph id="G" edgedefault="directed">
        <node id="A"/>
        <node id="B"/>
        <edge id="0" source="A" target="B">
    </graph>
</graphml> 
```

我有以下 C++ 函数：

```
using namespace boost;
typedef adjacency_list<vecS, vecS, directedS> BoostGraphType;
typedef dynamic_properties BoostDynamicProperties;

BoostGraphType& g = ...;
BoostDynamicProperties& dp = ...;
read_graphml(is, g, dp);

// get the property map for vertex indices
typedef property_map<BoostGraphType, vertex_index_t>::type IndexMap;
IndexMap index_map = get(vertex_index, g);

typedef graph_traits<BoostGraphType>::vertex_iterator vertex_iter;
for (auto vp = vertices(g); vp.first != vp.second; ++vp.first)
{
    size_t index = index_map[*vp.first];
    // How do I get the id of the node?
} 
```

我怎样才能提取每个节点的id，resp。关联 boost vertex_index 和“id”-graphml-tag？

或者，我如何识别或映射我的提升图结构中的顶点到我的 GraphML 文件中的顶点？

# .net - 清除 PIN 缓存智能卡

> ID：15433493
> 
> 赞同：3
> 
> 时间：2013-03-15T13:17:00.457
> 
> 标签：.net, vb.net, .net-4.0, smartcard

在 .net 中，我正在向 ssl 上的 Web 服务发出 Web 请求。对于密码学，我必须使用受 PIN 码保护的 USB 安全卡设备的证书

我进行网络请求的代码...

```
Dim lRequest As HttpWebRequest
lRequest = WebRequest.Create(lAddress)
lRequest.Method = "POST"
lRequest.KeepAlive = True
lRequest.ProtocolVersion = HttpVersion.Version11
lRequest.ContentType = "text/xml; charset=utf-8"
lRequest.ContentLength = lRequestContent.Length
lRequest.Headers.Add("SOAPAction", "")
lRequest.ClientCertificates.Add(gcert) 
```

并且在此之前为了使通话正常...

```
ServicePointManager.ServerCertificateValidationCallback = New RemoteCertificateValidationCallback(AddressOf ValidateServerCertificate)

Public Function ValidateServerCertificate(ByVal sender As Object, ByVal certificate As X509Certificate, ByVal chain As X509Chain, ByVal sslPolicyErrors As SslPolicyErrors) As Boolean
    Return True
End Function 
```

其中 gcert 是来自 Windows 个人商店的证书...

```
Public gcert As X509Certificate2

Dim store As New X509Store(StoreName.My, StoreLocation.CurrentUser)
store.Open(OpenFlags.ReadOnly Or OpenFlags.OpenExistingOnly)
... 
```

所有这一切都很好：当我发送我的 webRequest 时，系统会提示我输入 PIN，然后我会收到来自 Web 服务的响应。如果我正在拨打其他电话，我不会再次提示我输入 PIN，但所有电话都可以正常工作。

**但现在我的问题是：**我想清除 PIN 缓存，以便在每次调用时再次提示输入 PIN，或者如果我告诉我的程序这样做（例如“断开”按钮或 10 百万后超时）我无法成功重置 PIN，以便在下次通话时再次收到提示...

经过一些研究，我尝试了这个：

```
<DllImport("schannel.dll", SetLastError:=True)> _
Private Function SslEmptyCache(ByVal pszTargetName As IntPtr, ByVal dwFlags As UInt32) As Boolean
End Function

Public Function SslEmptyCache() As Boolean
    WriteTrace("> SslEmptyCache")

    Try

        Return SslEmptyCache(IntPtr.Zero, 0)

    Catch ex As Exception
        WriteTrace("Echec SslEmptyCache")
    End Try

    Return False

End Function 
```

和这个

```
ClearPINCache(gcert.PrivateKey)

Public Function ClearPINCache(ByVal key As RSACryptoServiceProvider) As Boolean

    Const PP_KEYEXCHANGE_PIN As UInt32 = 32
    Const PP_SIGNATURE_PIN As UInt32 = 33
    Dim bretval As Boolean = False

    Dim hProv As IntPtr = IntPtr.Zero

    If (CryptAcquireContext(hProv, key.CspKeyContainerInfo.KeyContainerName, key.CspKeyContainerInfo.ProviderName, CUInt(key.CspKeyContainerInfo.ProviderType), 0)) Then
        If ((CryptSetProvParam(hProv, PP_KEYEXCHANGE_PIN, Nothing, 0) = True) And (CryptSetProvParam(hProv, PP_SIGNATURE_PIN, Nothing, 0) = True)) Then
            bretval = True
        End If
    End If

    If (hProv <> IntPtr.Zero) Then
        CryptReleaseContext(hProv, 0)
        hProv = IntPtr.Zero
    End If

    Return bretval

End Function 
```

clearPINCahe 函数似乎什么也没做

SslEmptyCache 函数清除了一些东西，但在下一次调用后，我没有再次提示输入 PIN，但我收到此错误“请求已中止：无法创建 SSL/TLS 安全通道。” 就像我没有在通话中提供 clientCertificate

有人知道我缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T13:54:27.157

如果您使用的是网页而不是 Windows 窗体，也许您可​​以通过使用页眉来阻止页面缓存？

就像是

```
Response.Cache.SetCacheability(HttpCacheability.NoCache) 
```

# c# - 是否可以使用超链接按钮 xaml 页面的导航 uri 在 Windows 8 应用程序中导航页面？

> ID：15433495
> 
> 赞同：0
> 
> 时间：2013-03-15T13:17:13.573
> 
> 标签：c#, silverlight, xaml, windows-8, winrt-xaml

在 Windows 手机中，如果 `this.HyperLinkButton.NavigateUri = new Uri("PageName", UriKind.RelativeOrAbsolute);` 使用它会导航到相应的页面

但在**WinRT /Windows8**中，这会使应用程序崩溃。

我无法使用`this.Frame.Navigate(typeof(PageName)`，因为我正在创建一个 dll 并且找不到该页面，我拥有的唯一属性是包含此 dll 的项目中存在的导航 uri（即**pageName.xaml ）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:44:39.050

你可以这样做：

```
this.Frame.Navigate(Type.GetType("MyNameSpace.PageName", "MyAssembly"); 
```

页面名称没有“.xaml”。

问候

# reporting-services - SSRS 页脚，包含有关分章节的信息

> ID：15433497
> 
> 赞同：1
> 
> 时间：2013-03-15T13:17:24.013
> 
> 标签：reporting-services

由于参数的原因，我做了分成几个章节的报告。在参数中，我们键入本章最后一行的数字。所以它看起来像这样：

如果我们带入参数“100; 200; 400”，整体报告包含 1000 行，它将创建 4 个章节：1-100、101-200、201-400 和 401-1000。我使用此报告代码来执行此操作：

```
Dim ggg As Integer=0
Function Set_ggg(a as Integer) as integer
    ggg=ggg+a
    return ggg
End Function

Function Get_ggg() as Integer
    return ggg
End Function 

Function Null_ggg() as Integer
    ggg=0
    return ggg
End Function 

Function nGr(n as Integer) as Integer
    Dim prev as Integer
    Dim t as Integer
    Dim i As Integer
    Dim UsedN as Integer()={0}
    prev=0
    For i = 0 To Report.Parameters!N_Sprav.Value.GetUpperBound(0) 
        If prev<n and n<=Report.Parameters!N_Sprav.Value(i) Then  'and Array.IndexOf(UsedN, n)=-1 
            exit for
        Else 
            prev=Report.Parameters!N_Sprav.Value(i)
        End If
    Next 

    UsedN(UsedN.GetUpperBound(0))=n

    ReDim Preserve UsedN(UsedN.GetUpperBound(0)+1)
    if IsNothing(i) then
        i=0
    End if
    Return i
End Function 
```

现在我需要在每章后面加上必须显示行数和范围的表达式的页脚。对于前面的例子，它必须分别显示：从#1到#100的100行、从#101到#200的100行、从#201到400的200行和从#401到#1000的600行。

我以这种方式成功显示了行数：`CStr(Count(Fields!ID__з_п_ок.Value,"Gr1"))`

但是我不知道怎么做“从#到#”，这似乎很容易，但我找不到。

# jquery - jQuery同位素；在水平布局上集成循环/圆形功能？

> ID：15433498
> 
> 赞同：0
> 
> 时间：2013-03-15T13:17:33.257
> 
> 标签：jquery, jquery-isotope

我正在为希望以水平网格布局显示其内容的客户构建网站。因为我最熟悉脚本，所以我将使用 Isotope 来执行此操作。我已经多次使用它来进行垂直和水平布局。

我的问题是，因为我在这里或开发者的网站上找不到任何东西，有没有办法在滚动结束时添加内容循环的方式？

理想情况下，就像那些只是以圆周运动循环播放的幻灯片一样，当观众到达水平布局的末尾时，它会循环播放并从头开始。我目前不知道这样做的任何方法，添加自定义函数/脚本不是我的强项。

有没有人似乎或实现了 Isotope 的这个功能，或者他们可以为我指出一个好的方向？如果您有任何示例，或者可能有一些可以提供帮助的代码片段，那就太好了。

# service - 在 Java 上下文中从系统应用程序重新启动服务（在 init.rc 中声明）

> ID：15433504
> 
> 赞同：1
> 
> 时间：2013-03-15T13:17:46.200
> 
> 标签：service, android-source

我`init.rc`在我的平台上声明了一个始终运行的服务，以及一个持久（即始终运行）的 Android 系统应用程序（使用平台密钥签名），它们通过 TCP/IP 进行通信。

在某些时候，我想从应用程序重新启动服务，该应用程序在定义的系统 uid 下运行，但是不幸的是，它没有调用`start`或`stop`在控制台上的权限。

我希望应用程序重新启动服务，就像我在控制台中执行以下操作一样：

```
stop service
start service 
```

是否可以调用 android 框架来重新启动特定服务？

# multithreading - D 如何标记所有内容__gshared？

> ID：15433506
> 
> 赞同：1
> 
> 时间：2013-03-15T13:18:04.640
> 
> 标签：multithreading, concurrency, d, dmd

有没有办法`__gshared`用 DMD 标记所有对象？我正在开发一个游戏引擎，其中几乎所有内容都需要在线程之间共享，并且垃圾邮件`__gshared`或`shared`无处不在并不能减少它。

对于希望我不这样做的每个人：关键部分将是最小的，并减少到检查枚举是否设置为已加载（当然是互斥的）。所以并发不会给我带来任何好处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:32:21.400

您可以将所有变量放在一个块中并声明共享

```
__gshared{
   SharedClass instance;
   //...
} 
```

另请注意，共享类或结构中的所有字段都是共享的

但是我应该注意到，这种不便是设计使然，并且鼓励重组数据以最大程度地减少共享内容

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T05:08:37.633

__gshared 告诉垃圾收集器资源可以在外部代码中使用，因此您需要手动分配/释放它（因此您可以在任何线程中访问相同的资源），另一方面，shared 用于实际的多线程共享。

虽然我可能在某些细节上错了，但实际的想法是

# ruby-on-rails-3 - Rails 3：如何在没有 ID 的情况下获得自定义的 restful 成员路由

> ID：15433510
> 
> 赞同：7
> 
> 时间：2013-03-15T13:18:11.707
> 
> 标签：ruby-on-rails-3, routes

我正在做一个项目，用户可以通过一个简单的表单上传视频，另外还可以通过 FTP 上传到某个目录，然后只需从 FTP 目录中选择文件，而不是通过表单上传。

我得到了以下非常标准的 a 设置`videos_controller`：

```
# routes.rb
resources :videos

# new.html.rb
form_for(@video) do |f|
  ...
end 
```

控制器中的 restful 操作都正常工作，只是标准行为。上传有效，这不是问题。问题是如果我执行以下操作：

```
# routes.rb
resources :videos do
  member do
    post :from_ftp
  end
end

# new.html.rb
form_for(@video, :url => from_ftp_video_url) do |f|
  ...
end 
```

我收到错误：`No route matches {:action=>"from_ftp", :controller=>"videos"}`，因为生成的路线如下所示：

```
from_ftp_video POST   /videos/:id/from_ftp(.:format)        videos#from_ftp 
```

这似乎是对的，因为它是会员路线。但我不需要`:id`URL 的一部分，因为我正在创建一个新的 Video 对象，不是通过表单，而是通过使用 FTP 目录中的文件......所以它基本上是另一个`create`动作，这就是为什么我会喜欢将其作为 POST 请求...

那么我该如何以最好的方式解决这个问题呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-14T19:39:55.053

尽管选择的答案对于 Vapire 的情况是正确的，但它不一定回答标题问题。如果您因为不需要 ID 而来到这里寻找如何在没有 ID 的情况下获取成员操作，答案会有所不同。

假设您实施了设置`current_user`. 您只允许用户编辑他们自己的个人资料。在那种情况下`users/:id/edit`没有意义，因为 :id 是由 current_user 方法决定的。在这种情况下`/users/edit`更有意义。

您可以更改您的 routes.rb 文件以创建路径中没有 id 的成员操作。

...而不是这个...

```
resources :user 
```

...使用这个（注意多个资源）...

```
resource :user 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-15T16:43:45.323

理解成员和集合路由的方法是这样的：

*   **成员**路由对您拥有的对象执行某些操作。
*   **集合**路由对所有对象的集合做一些事情。

所以当我们考虑`create`路由是什么时，它是一个*集合*路由，因为它向集合添加了一个新对象！

所以你的`from_ftp`方法也应该是一个*集合*路线，因为它正在*添加到集合*中。

此外，您可能需要考虑是否可以在现有`create`方法中容纳 FTP 功能 - 它可能会更整洁。

# jquery - 使用jquery滑出div

> ID：15433522
> 
> 赞同：1
> 
> 时间：2013-03-15T13:18:46.107
> 
> 标签：jquery

[最近我找到了一个解决方案，可以在单击堆栈溢出答案](https://stackoverflow.com/questions/10422005/pull-out-div-from-right-of-screen/)时滑出 div 。

他们张贴了链接`jsfiddle.net/LU8En/`。

在 jsfiddle 答案中，他们使用了 jquery 1.7.2。它不适用于 jquery 1.9.1。不知道是什么原因..？任何的想法..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T13:23:08.900

试试这个： [小提琴](http://jsfiddle.net/yHPTv/577/)

```
$(function () {
  $("#clickme").click(function () {
    if($(this).parent().css("right") == "-280px"){
    $(this).parent().animate({right:'0px'}, {queue: false, duration: 500});
  }
  else {
    $(this).parent().animate({right:'-280px'}, {queue: false, duration: 500});
  }
  });
}); 
```

.toggle(function, function, ... ) 已从 1.9 版中删除

请参阅[jQuery Core 1.9 升级指南](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)

更好的方法：[示例 2](http://jsfiddle.net/yHPTv/579/)

```
$(function () {
   $("#clickme").click(function () {
       if($(this).parent().hasClass("popped")){
       $(this).parent().animate({right:'-280px'}, {queue: false, duration: 500}).removeClass("popped");
   }else {
       $(this).parent().animate({right: "0px" }, {queue: false, duration: 500}).addClass("popped");}
   });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T13:35:19.423

切换功能已从 1.9 jquery 中删除。

你可以试试这个：

[http://jsfiddle.net/LU8En/57/](http://jsfiddle.net/LU8En/57/)

```
 var test= true;

    $("#clickme").click(function () {
        if(test){
        $(this).parent().parent().animate({left:'0px'}, {queue: false, duration: 500});
    }
                        else{
        $(this).parent().parent().animate({left:'-280px'}, {queue: false, duration: 500});                
        }      
       test= !test; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T13:19:11.313

下面的样本可以帮助你。谢谢

## 从左侧滑出

```
<div id="slideout">
    <div id="slidecontent">
        Yar, there be dragonns herre!
    </div>
    <div id="clickme">
    </div>
</div>

#slideout {
    background: #666;
    position: absolute;
    width: 300px;
    height: 80px;
    top: 45%;
    left:-280px;
}

#clickme {
    float: right;
    height: 20px;
    width: 20px;
    background: #ff0000;
}

#slidecontent {
    float:left;
}

$(function () {
    $("#clickme").toggle(function () {
        $(this).parent().animate({left:'0px'}, {queue: false, duration: 500});
    }, function () {
        $(this).parent().animate({left:'-280px'}, {queue: false, duration: 500});
    });
}); 
```

## 从右侧滑出

```
<div id="slideout">
    <div id="slidecontent">
        Yar, there be dragonns herre!
    </div>
    <div id="clickme">
    </div>
</div>

body {
    overflow-x: hidden;
}
#slideout {
    background: #666;
    position: absolute;
    width: 280px;
    height: 80px;
    top: 45%;
    right:-280px;
    padding-left: 20px
}

#clickme {
    position: absolute;
    top: 0; left: 0;
    height: 20px;
    width: 20px;
    background: #ff0000;
}

#slidecontent {
    float:left;
}

$(function () {
    $("#clickme").toggle(function () {
        $(this).parent().animate({right:'0px'}, {queue: false, duration: 500});
    }, function () {
        $(this).parent().animate({right:'-280px'}, {queue: false, duration: 500});
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-09T06:52:38.590

试试这个脚本，它有助于以简单的方式创建滑出 div

```
 <script>
         $(function(){
             $('.slide-out-div').tabSlideOut({
                 tabHandle: '.handle',                              //class of the element that will be your tab
                 pathToTabImage: 'images/contact_tab.gif',          //path to the image for the tab *required*
                 imageHeight: '122px',                               //height of tab image *required*
                 imageWidth: '40px',                               //width of tab image *required*    
                 tabLocation: 'left',                               //side of screen where tab lives, top, right, bottom, or left
                 speed: 300,                                        //speed of animation
                 action: 'click',                                   //options: 'click' or 'hover', action to trigger animation
                 topPos: '200px',                                   //position from the top
                 fixedPosition: true,                               //options: true makes it stick(fixed position) on scroll
                 onLoadSlideOut: true
             });
         });

         </script>
   <div class="slide-out-div"> 
        <a class="handle" href=""></a>
        <h3>San Web Corner</h3>
        <p>San Web Corner is one of the simple tutorial blog consist various tips and codes</p>
    </div> 
```

# c# - 来自 HRESULT 的异常：初始化 MediaCapture 时出现 0xC00DABE8

> ID：15433523
> 
> 赞同：0
> 
> 时间：2013-03-15T13:18:53.907
> 
> 标签：c#, windows-runtime, media

我正在尝试从外部 USB 摄像头（C#，Windows 8）捕获流。以下代码：

```
DeviceInformationCollection devInfoCollection = await DeviceInformation.FindAllAsync(DeviceClass.VideoCapture);
MediaCaptureInitializationSettings settings = new Windows.Media.Capture.MediaCaptureInitializationSettings();
settings.VideoDeviceId = devInfoCollection[0].Id;
mediaCaptureMgr = new MediaCapture();
await mediaCaptureMgr.InitializeAsync(settings); 
```

在最后一行 (await mediaCaptureMgr.InitializeAsync(settings)) 被触发异常。变量设置不为空。设置：

> (VideoDeviceId ="\\?\USB#VID_05E3&PID_0510&MI_00#7&2D043328&0&0000#{e5323777-f976-4f5b-9b55-b94699c46e44}\GLOBAL")

异常文本：

```
Exception from HRESULT: 0xC00DABE8
Source  "mscorlib" 
```

好的。我试图这样做：

```
try
{
   mediaCaptureMgr = new MediaCapture();
   await mediaCaptureMgr.InitializeAsync();
   myCaptureElement.Source = mediaCaptureMgr;
   await mediaCaptureMgr.StartPreviewAsync();

}
catch (Exception ee)
{
   String s = ee.ToString();
} 
```

无论如何，在线上发生错误 (mediaCaptureMgr.InitializeAsync()) 在这种情况下：s="System.Exception: Exception from HRESULT: 0xC00DABE8\r\n at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\r\ n 在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification（任务任务）\r\n 在 System.Runtime.CompilerServices.TaskAwaiter.GetResult()\r\n 在 TestVideo.MainPage.d__0.MoveNext() 在 c:\Users \Admin\Documents\Visual Studio 2012\Projects\TestVideo\TestVideo\MainPage.xaml.cs:line 53"

异常相同：“HRESULT 异常：0xC00DABE8”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:38:21.650

请根据要求设置为视频或音频，`StreamingCaptureMode`如 `MediaCaptureInitializationSettings`

```
settings.StreamingCaptureMode = settings.StreamingCaptureMode.Video; 
```

我希望这能帮到您

# twitter-bootstrap - Styles.Render 中的 .less Bundle 在 .aspx 中不起作用

> ID：15433527
> 
> 赞同：1
> 
> 时间：2013-03-15T13:19:18.407
> 
> 标签：twitter-bootstrap, less, .aspxauth

我正在开发一个使用 .aspx 页面的项目，但无法在 BundleConfig 中正确引用 Styles.Render。我在捆绑配置中使用捆绑转换器和无点，这在我的普通 HTML 标头中工作得很好，但是在 .aspx 页面中它不能正确理解 .less 页面。我在控制台中收到此错误`Resource interpreted as Stylesheet but transferred with MIME type text/html: "http://localhost:58743/Account/Login?ReturnUrl=%2fContent%2fless%2fbootstrap.less"`。

# html - 需要帮助让侧边栏容器跨越页面的长度 (HTML5/CSS3)

> ID：15433528
> 
> 赞同：0
> 
> 时间：2013-03-15T13:19:23.187
> 
> 标签：html, css

[http://jsfiddle.net/3nAJ8/1/](http://jsfiddle.net/3nAJ8/1/)

如果您看到上面的示例，边栏不会一直向下延伸到页脚。这就是我希望它做的事情，无论右侧的主容器中有多少内容。

我在 CSS 中尝试过这样的事情 `aside { height: 100%; }`

但无济于事。

我希望有人能够帮助我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:22:03.193

您应该尝试以下几行：

```
bottom:0px;
float:bottom;
height: 100%;
top: ?? whatever you want! ; 
```

# image - 如何在鼠标悬停时更改图标

> ID：15433532
> 
> 赞同：0
> 
> 时间：2013-03-15T13:19:48.383
> 
> 标签：image, mouse

我刚刚在 html 上添加了这样的图像。

```
<img src="Your image address" width="500" height="500"> 
```

但是我想添加鼠标悬停意味着当鼠标光标出现在图像上时，图像应该改变，我在这里使用什么代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:05:58.437

文件层次结构：Vidzpra/index.html 和 Vidzpra/images 有两个图像 black.jpg 和 yellow.jpg 这是在鼠标悬停时更改图像的代码（带有内部 javascript 的 HTML）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>onMouserOver Img change</title>

<script>
    function changeImg(el){
        el.src  = "images/yellow.jpg";
    }

    function fixImg(el){
        el.src = "images/black.jpg";
    }

</script>
</head>

<body>
    <div>
        <img onmouseover="changeImg(this)" onmouseout="fixImg(this)" border="0" src="images/black.jpg" alt="" align="middle" >
    </div>
</body>

</html> 
```

# javascript - 用于 Google Map API V2 的 Javascript 上的全局变量

> ID：15433534
> 
> 赞同：0
> 
> 时间：2013-03-15T13:19:49.313
> 
> 标签：javascript, api, google-maps

我想创建一个 JavaScript 全局变量，其中包含我需要的一些值。我从 XML 文件中读取了一些值并将其用于显示 Google Map 的地图。我会将这些信息存储在一些变量中，并在用户要求时显示它们。

我有这个代码：

```
var tot_pts = new Array(); //global variable

if (GBrowserIsCompatible()) { 

  // Display the map, with some controls and set the initial location 
  ...

  // A function to create the marker and set up the event window
  function createMarker(point,train) {
    var marker = new GMarker(point);
    return marker;
  }

  request.open("GET", "example.xml", true);
  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      var xmlDoc = GXml.parse(request.responseText);
      //read value on XML
      tot_pts.push(new_path);

      //show all value on map
      for (var i = 0; i < tot_pts.length; i++) {
        point= [];
        point[0]=tot_pts[i].start;
        point[1]=tot_pts[i].end;
        map.addOverlay(new GPolyline(point,tot_pts[i].colour,3));
        marker = createMarker(tot_pts[i].start,tot_pts[i].train);
        map.addOverlay(marker);
        marker = createMarker(tot_pts[i].end,tot_pts[i].train);
        map.addOverlay(marker);
      }
    }//end of if request=4
  }// end of on ready...

  request.send(null);

}// end of compatible browser 
```

如果我将最后一个“for 循环”移到此代码中的另一个位置，则数组`tot_pts`为空。为什么会这样？我可以以某种方式改进我的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:33:16.410

request.readyState == 4 表示 XMLHttpRequest 的响应已准备好。因此，当您收到响应时，您的数组 tot_pts 在 step -> tot_pts.push(new_path); 处被推送了一些值（new_path）；在那之前，数组将显示为空，因为它没有明确设置值。

# c# - 您可以复制 Access“连续表格”的功能吗？

> ID：15433536
> 
> 赞同：1
> 
> 时间：2013-03-15T13:19:59.390
> 
> 标签：c#, asp.net

我的任务是将 Access 数据库“转换”为 C# 以供 Intranet 使用，所以我想我应该说这是 C#/ASP 或者它通常被称为。

我的一种形式是连续形式。在 Access 中，连续表单允许您在表单上放置一次控件，并且这些控件会针对数据集中的每条记录重复。例如，这允许您将复选框控件链接到是/否字段，并且该复选框将出现在您在表单上显示的每条记录上。

我什至不知道这是否可以做到，但到目前为止我所写的内容可能有 90% 来自我在这个网站上找到的建议/示例，所以我认为这是要问的地方。

那么，在 C# 中是否有等效的连续形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:27:19.420

听起来您可以使用[中继器控件](https://docs.microsoft.com/en-us/previous-versions/aspnet/x8f2zez5%28v%3dvs.100%29)。我会考虑从实体框架中获取您的数据。

> Repeater Web 服务器控件是一个数据绑定容器控件，可生成单个项目的列表。您可以使用模板定义网页上各个项目的布局。当页面运行时，控件会为数据源中的每个项目重复布局。您必须完成几个步骤才能将Repeater Web 服务器控件添加到Web 表单页面。以下过程描述了创建一个正常工作的Repeater 控件所必须执行的最少操作。

# sql-server-2005 - 从数据库检索日期时，索引超出了显示的数组范围

> ID：15433543
> 
> 赞同：0
> 
> 时间：2013-03-15T13:20:22.320
> 
> 标签：sql-server-2005, ado.net

```
dateTimePicker2.Value = Convert.ToDateTime((sdr[1]),   
                        CultureInfo.GetCultureInfo("hi-IN").DateTimeFormat); 
```

我正在从 SqlDataReader 中提取日期值，但读取它会导致错误：

> 指数数组的边界之外

```
cmd = new SqlCommand("Physio_cure_Search", con);
cmd.CommandType = CommandType.StoredProcedure;   
cmd.Parameters.Add("@RegisterNo", SqlDbType.VarChar).Value = txtsearch.Text;    
SqlDataReader sdr = cmd.ExecuteReader();    
while (sdr.Read())
{
    txtregistrationno.Text = sdr.GetString(0);
    //giving error on this line:    
    dateTimePicker2.Value = Convert.ToDateTime((sdr[1]), System.Globalization.CultureInfo.GetCultureInfo("hi-IN").DateTimeFormat);        
} 
```

这`sdr`是`SqlDataReader`sdr[1] 的实例，用于检索数据库值。如何解决这个问题？

```
ALTER procedure [dbo].[Physio_cure_Search]
@RegisterNo varchar(500)   
As
begin
    select Convert(varchar(100),DateOfBirth,103) as DateOfBirth 
    from Physio_cureTable

    select RegisterNo,RegistrationDate,Stimulation,PationName,DateOfBirth,ContactNo,Occupation,Age,
    Sex,Weight,Chief_Complain,Investigation_Result,PastHistoryAny,Physical_Examination,Ref_By_Doctor,Medications,Prognosis,Electro_Therapy,Neuro_Rehabilitation,Ortho_Rehabilitation,Cardio_Pulmonery_Rehabilitation,Sports_Rehabilitation 

    from Physio_cureTable where RegisterNo=@RegisterNo and Syncoperation <>'D'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:12:03.820

您有两个问题：您的存储过程返回 2 个结果集，而您正在对第一个结果集进行操作。其次，您的 C# 代码将不起作用。

1-**删除第一个结果集**： `select Convert(varchar(100),DateOfBirth,103) as DateOfBirth from Physio_cureTable`。这对您的 C# 代码毫无用处。

2-修改您的代码以**按列名显式检索值，而不是按数字索引**。

```
 while (sdr.Read())
 {
     txtReg.Text = sdr["RegisterNo"].ToString();
     dateTimePicker2.Value = 
         Convert.ToDateTime(sdr["RegistrationDate"].ToString(),   
                            CultureInfo.GetCultureInfo("hi-IN").DateTimeFormat);
 } 
```

3- 如果此存储过程仅由此调用代码使用，则从您的选择语句中删除所有未使用的列。

```
select  RegisterNo, RegistrationDate
from Physio_cureTable where RegisterNo=@RegisterNo and Syncoperation <>'D' 
```

# scala - Scala奇怪的映射函数行为

> ID：15433547
> 
> 赞同：3
> 
> 时间：2013-03-15T13:20:34.880
> 
> 标签：scala

为什么以下代码有效？

```
scala> List(1,2,3) map "somestring"
res0: List[Char] = List(o, m, e) 
```

它适用于 2.9 和 2.10。查看打字机：

```
[master●●] % scala -Xprint:typer -e 'List(1,2,3) map "somestring"'                                                                                ~/home/folone/backend
[[syntax trees at end of                     typer]] // scalacmd2632231162205778968.scala
package <empty> {
  object Main extends scala.AnyRef {
    def <init>(): Main.type = {
      Main.super.<init>();
      ()
    };
    def main(argv: Array[String]): Unit = {
      val args: Array[String] = argv;
      {
        final class $anon extends scala.AnyRef {
          def <init>(): anonymous class $anon = {
            $anon.super.<init>();
            ()
          };
          immutable.this.List.apply[Int](1, 2, 3).map[Char, List[Char]](scala.this.Predef.wrapString("somestring"))(immutable.this.List.canBuildFrom[Char])
        };
        {
          new $anon();
          ()
        }
      }
    }
  }
} 
```

看起来它被转换为[`WrappedString`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.WrappedString)具有 apply 方法的 。这解释了它是如何工作的，但没有解释 a 如何`WrappedString`被接受为类型参数`A => B`（如[scaladoc](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)中所指定）。有人可以解释一下，这是怎么发生的，好吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T13:27:45.783

通过`collection.Seq[Char]`, 这是 的子类型`PartialFunction[Int, Char]`, 是 的子类型`Int => Char`：

```
scala> implicitly[collection.immutable.WrappedString <:< (Int => Char)]
res0: <:<[scala.collection.immutable.WrappedString,Int => Char] = <function1> 
```

所以只有一个隐式转换发生——原始的`String => WrappedString`，因为我们把一个字符串当作一个函数来对待。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T13:27:53.330

因为`WrappedString`有作为超类型`(Int) => Char`：

[Scaladoc](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.WrappedString)并展开“线性超类型”部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T13:34:55.487

其他人已经明确表示您的 String 实现了一个接受 Int 并返回 char 的函数（即 Int=>Char 表示法）。这允许这样的代码：

```
scala> "Word".apply(3)
res3: Char = d 
```

扩展您的示例将使其更加清晰，也许：

```
List(1,2,3).map(index => "somestring".apply(index))
List(1,2,3).map(index => "somestring"(index)) //(shorter, Scala doesn't require the apply)
List(1,2,3).map("somestring"(_)) //(shorter, Scala doesn't require you to name the value passed in to map) 
List(1,2,3).map("somestring") //(shorter, Scala doesn't require you to explicitly pass the argmument if you give it a single-arg function) 
```

# asp.net - 使用 System.IO.directory.getfiles

> ID：15433555
> 
> 赞同：1
> 
> 时间：2013-03-15T13:20:56.517
> 
> 标签：asp.net, vb.net

我正在使用以下代码获取 pdf 列表并将它们放在一个数组中，然后我使用自动完成扩展器搜索它们。一切正常，但 System.IO.directory.getfiles 总是返回我不想要的文件的路径。

有任何想法吗。

```
 Public Shared Function GetCompletionList(ByVal prefixText As String, ByVal count As Integer, ByVal contextKey As String) As String()
    'Create array of movies   
    Dim files() As String = System.IO.Directory.GetFiles("c:\pdfs")

    ' Return matching movies   
    Return (
         From m In files
         Where m.Contains(prefixText)
         Select m).Take(count).ToArray()
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:24:50.107

尝试使用此 LINQ 从返回的完整文件名列表中删除路径

```
Dim files = Directory.GetFiles("c:\pdfs", "*.pdf").Select(Function(s) Path.GetFileName(s)) 
```

另请注意，如果您使用正确的重载，Directory.GetFiles 可能只检索 PDF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:25:21.420

所以你想要文件名而不是完整路径？！使用[`Path`类](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)：

```
Dim files() As String = System.IO.Directory.GetFiles("c:\pdfs")
Dim names = From path in files
            Let fileName = IO.Path.GetFileName(path)
            Where fileName.StartsWith(prefixText)
            Select fileName  Take count 
```

请注意，我使用`StartsWith`了而不是，`Contains`因为变量名`prefixText`表明这更合适。

# css - IE8 没有接收到我的@font-face

> ID：15433559
> 
> 赞同：0
> 
> 时间：2013-03-15T13:21:09.627
> 
> 标签：css, internet-explorer-8, font-face

我几乎完成了我的网站，但是 IE8 存在一个小问题……
我正在使用 FutureStd Medium 字体的@font-face，除了 IE8 之外的所有浏览器都设法解决了这个问题。

我已经尝试了互联网上所有给定的提示和技巧，但没有运气。

*   替换`'`为`"`
*   将包含的样式表放在`<body>`而不是`<head>`
*   让不同的生成器生成 .eot 文件

这是我的 CSS：

```
@font-face {
  font-family: "CustomFutura";
  src: url("fonts/FuturaStd-Medium.eot"); /* IE9 Compat Modes */
  src: url("fonts/FuturaStd-Medium.eot?#iefix") format("embedded-opentype"),
       url("fonts/FuturaStd-Medium.woff") format("woff"),
       url("fonts/FuturaStd-Medium.ttf")  format("truetype"),
       url("fonts/FuturaStd-Medium.svg#svgFontName") format("svg");
  font-weight: normal;
  font-style: normal;
} 
```

如果它可能有帮助，[这是该网站的链接](http://032.www.be.eurorscg.net/)......

我还能做些什么来让这个东西在 IE8 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:32:37.233

尝试以下操作：

```
@font-face
{
    font-family: 'CustomFutura';
    src: url('fonts/FuturaStd-Medium.eot');
    src: url('fonts/FuturaStd-Medium.eot?iefix') format('eot'), url('fonts/FuturaStd-Medium.woff') format('woff'), url('fonts/FuturaStd-Medium.ttf') format('truetype'), url('fonts/FuturaStd-Medium.svg#svgFontName') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# asp.net-mvc - 具有 XSS 漏洞的示例 Web 应用程序

> ID：15433561
> 
> 赞同：1
> 
> 时间：2013-03-15T13:21:24.870
> 
> 标签：asp.net-mvc, xss

我想做两件事：

1.  向我的同事演示 xss 漏洞并展示如何修复它们
2.  检查一些工具是否可以检测到漏洞

为此，我需要一个在 ASP.NET MVC 中具有最常见漏洞的示例 Web 应用程序。这样的示例站点是否已经存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:42:06.320

这是 CodeProject 文章 + 示例应用程序：

[http://www.codeproject.com/Articles/102284/SQL-Injection-and-Cross-Site-Scripting](http://www.codeproject.com/Articles/102284/SQL-Injection-and-Cross-Site-Scripting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T21:12:16.447

> 向我的同事演示 xss 漏洞并展示如何修复它们

试试这个：http: [//google-gruyere.appspot.com](http://google-gruyere.appspot.com)

我用它来向我的同事演示 xss 漏洞。;)

> 检查一些工具是否可以检测到漏洞

手动尝试。在向同事介绍 Google Gruyere 后，我们在 5 分钟内就发现了我们应用程序的 XSS 漏洞……

# php - 报价有问题

> ID：15433563
> 
> 赞同：0
> 
> 时间：2013-03-15T13:21:36.160
> 
> 标签：php

抱歉，我是新来的，在您询问之后，我添加了完整的代码：而且我知道我的代码很糟糕 :)

```
if ((($_FILES["image_name"]["type"] == "image/gif")
   ($_FILES["image_name"]["type"] == "image/jpeg")
   ($_FILES["image_name"]["type"] == "image/png")
   ($_FILES["image_name"]["type"] == "image/pjpeg")))
  {
  $year = date('y');
  $month = date('m');
  $date = date('d');
    if(file_exists('./uploads/'.$year)){ 
        if(file_exists('./uploads/'.$year.'/'.$month)){
            if(file_exists('./uploads/'.$year.'/'.$month.'/'.$date)){ 
                $target_path='./uploads/'.$year.'/'.$month.'/'.$date.'/'.$_FILES["image_name"][‌​"name"];
            }
            else{
                mkdir('./uploads/'.$year.'/'.$month.'/'.$date);
            }
        }
        else{
            mkdir('./uploads/'.$year.'/'.$month);
        }     
}
else{
    mkdir('./uploads/'.$year);
    mkdir('./uploads/'.$year.'/'.$month);
    mkdir('./uploads/'.$year.'/'.$month.'/'.$date);
}
  if ($_FILES['image_name']['error'] > 0)
    {
    echo 'Return Code: ' . $_FILES['image_name']['error'] . '<br />';
    }
    else
      {
      move_uploaded_file($_FILES['image_name']['tmp_name'],
      './uploads/'.$year.'/'.$month.'/'.$date.'/'.$_FILES['image_name']['name']);
      $target_path='./uploads/'.$year.'/'.$month.'/'.$date.'/'.$_FILES["image_name"][‌​"name"];
      }
  } 
```

**$target_path**变量应该像这样打印：

> 上传/13/03/15/image_name.jpg

但它打印：

> s/13/03/15/image_name.jpg

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:11:28.993

首先，关于文件上传的重要注意事项：`type`和`name`键使用不安全。这是因为它们是由客户端定义的，并且它们是将恶意代码注入您的站点的潜在机制。考虑一下如果我将文件名设置为`../../../../../index.php`，或者如果我将 MIME 类型设置为`image/gif`但上传了一个 PHP 文件会发生什么？

接下来，关于图片上传的一个重要说明：您不能信任客户端上传的图片数据。也可以在*看起来*像图像的东西中嵌入恶意代码。您需要从文件中复制像素数据并创建一个新的。这通常通过 GD 扩展来完成。

接下来，on `mkdir()`- 它有第三个参数，如果你传递`true`给第三个参数，它会递归地创建目录树，所以你不需要在单独的操作中创建每个级别。另请注意，（像许多事情一样）可能`mkdir()`会失败，如果发生这种情况它将返回`false`，您应该检查这一点。

现在，为了回答实际问题（暂时忽略前面提到的安全问题），我将如何简化您的代码：

```
// Configuration
$allowedTypes = array(
    "image/gif", "image/jpeg", "image/png", "image/pjpeg"
);
$baseDir = './uploads';

// Check file was uploaded successfully
if ($_FILES['image_name']['error'] > 0) {
    exit('Return Code: ' . $_FILES['image_name']['error'] . '<br />');
}

// Check file type
if (!in_array($_FILES["image_name"]["type"], $allowedTypes)) {
    exit('Invalid file type: ' . $_FILES['image_name']['type'] . '<br />');
}

// Check/create target directory
list($year, $month, $day) = explode('-', date('y-m-d'));
$targetDir = $baseDir . '/' . $year . '/' . $month . '/' . $day;
if (!is_dir($targetDir)) {
    if (!mkdir($targetDir, 0644, true)) {
        exit('Failed to create destination directory<br />');
    }
}

// Store the uploaded file permanently
$targetPath = $targetDir . '/' . .$_FILES['image_name']['name'];
if (!move_uploaded_file($_FILES['image_name']['tmp_name'], $targetPath)) {
    exit('Failed to move temporary file<br />');
} 
```

* * *

但是，我不会这样做。

文件上传是一项非常常见的任务，我使用的通用代码看起来像[这样](https://gist.github.com/DaveRandom/4708126)。看起来很复杂是不是？嗯，那是因为处理文件上传并不简单。然而，这种复杂性提供了一种很好的直接方法来解决我上面概述的安全问题。它内置了对图像的支持，包括以干净简单的方式调整大小的选项。

让我们看看我们如何在您的代码中使用它：

```
$baseDir = './uploads';

// Very simple autoloader for demo purposes
spl_autoload_register(function($class) {
    require strtolower(basename($class)).'.php';
});

// When you instantiate this the $_FILES superglobal is destroyed
// You must access all uploaded files via this API from this point onwards
$uploadManager = new \Upload\Manager;

// Fetches a FileCollection associated with the named form control
$control = $uploadManager->getControl('image_name');

// getControl returns NULL if there are no files associated with that name
if (!isset($control)) {
    exit('No file was uploaded in the image_name control');
}

// Check/create target directory
// You still need to do this, it's not magic ;-)
list($year, $month, $day) = explode('-', date('y-m-d'));
$targetDir = $baseDir . '/' . $year . '/' . $month . '/' . $day;
if (!is_dir($targetDir)) {
    if (!mkdir($targetDir, 0644, true)) {
        exit('Failed to create destination directory');
    }
}

// This also handles multiple uploads in a single control, so we need to loop
foreach ($control as $image) {
    // You need to determine a file name to use, most likely not from user
    // input. This is a high-entropy low collision-risk random approach.
    $targetFile = $targetDir . '/' . uniquid('upload-', true);

    try {
       $image->save($targetFile, true, IMAGETYPE_ORIGINAL);
    } catch (\Exception $e) {
       exit("Oh noes! Something went badly wrong: ".$e->getMessage());
    }
} 
```

这在后台做了很多事情来解决我之前概述的安全问题。它会自动检测图像是有效的、可识别的类型，并将正确的文件扩展名应用于保存的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:38:42.273

对潜在代码问题的一种快速回答：

```
else{
    mkdir('./uploads/'.$year.'/'.$month);
} 
```

这需要第二个 mkdir：

```
else{
    mkdir('./uploads/'.$year.'/'.$month);
    mkdir('./uploads/'.$year.'/'.$month.'/'.$date);
} 
```

但是，在那之后 - 您通过设置`$target_path`

我们需要看看在设置之后`$target_path`会发生什么，这样我们才能看到变量在生成和输出之间会发生什么。

在调试期间，我建议在设置后立即将其值快速输出到日志文件，以查看当时是否正常，但稍后会更改。

# testing - 使用通用测试的模块的 Erlang 测试（非导出/私有）功能

> ID：15433565
> 
> 赞同：9
> 
> 时间：2013-03-15T13:21:43.120
> 
> 标签：testing, erlang, erlang-otp, rebar, common-test

我在 Erlang 中有一个模块，它具有 Erlang 未导出的功能。如何使用通用测试框架测试/调用这些函数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T13:53:27.893

是不可能的。`-ifdef(TEST).`只有在编译测试时，您才能使用预处理器条件导出这些函数。

根据您的工具，您可能需要`TEST`在编译模块时显式提供该宏。您可以通过使用 {d,'TEST'} 编译器选项或 -DTEST 编译标志来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:04:48.497

Common Test 很棘手，但可以使用嵌入式[EUnit](http://erlang.org/doc/apps/eunit/chapter.html)测试用例来测试模块中的私有函数。然后，您可以使用 Common Test 测试公共接口。[Rebar](http://github.com/basho/rebar)将在您运行时自动发现嵌入式测试用例`rebar test`。

这是一个例子：

```
-module(example).

-export([public/1]).

-ifdef(TEST).
-include_lib("eunit/include/eunit.hrl").
-endif.

%% This function will be tested externally using Common Test
public(Foo) ->
    private(Foo + 42).

%% This function is not reachable to CT, so it will be tested using EUnit.
private(Bar) ->
    Bar * 2.

%%% Tests
-ifdef(TEST).

private_test() ->
    ?assertEqual(10, private(5)),
    ?assertEqual(0, private(0)).

-endif. 
```

附带说明一下，如果您在使用 EUnit 进行测试时需要模拟一个模块（或其中的一部分），您可能会喜欢[Meck 。](https://github.com/eproxus/meck)

有关 EUnit 的简要介绍，请参阅 Learn You Some Erlang[章节](http://learnyousomeerlang.com/eunit)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T02:28:36.363

您可以将私有函数放在它们自己的模块中，该模块会导出所有这些函数。原始模块可以导入它们并且它们将保持私有，您的测试框架可以直接调用导入私有模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T02:01:30.587

以防万一有人也遇到这种情况。包含 eunit.hrl 文件会定义 TEST，除非在包含之前定义了 NOTEST。-include_lib("eunit.hrl")。参考：[http ://www.erlang.org/download/eunit.hrl](http://www.erlang.org/download/eunit.hrl)

# java - Java 对任何对象数组进行排序

> ID：15433572
> 
> 赞同：0
> 
> 时间：2013-03-15T13:21:53.337
> 
> 标签：java, sorting, collections

我定义了一个抽象类如下：

```
public abstract class Move implements Comparable<Move> {
protected int cell;
protected int weight;       

public int getWeight()
{
    return this.weight;
}

public void setWeight(int value)
{
    this.weight = value;
}

protected Move(int cell)
{
    this.cell = cell;
    this.weight = 0;
}

protected Move(int cell, int weight)
{
    this.cell = cell;
    this.weight = weight;
}

@Override
public int compareTo(Move m) 
{
    return this.weight - m.weight;
} 
```

我还有另外 2 个类扩展了这个类（分类为 MoveLeft 和 MoveRight）。我将这两种类型的对象都添加到 Move 类型的 List 中，然后使用 Collections.sort 进行排序：

```
List<Move> moves = new ArrayList<Move>(someSize);
moves.add(new MoveLeft(cell1));
moves.add(new MoveRight(cell2));
moves.add(new MoveRight(cell3));
moves.add(new MoveLeft(cell4));
Collections.sort(moves); 
```

但是，列表是按单元格而不是按重量排序的。

不能在同一种类型中混合不同的子类实例吗？

注意：我在子类构造函数中为权重设置了一个唯一值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:43:05.763

这真的是一个很长的评论，而不是一个答案。

我写了一个简单的测试程序，它似乎排序正确。输出是`[Move [cell=10, weight=1], Move [cell=1, weight=100]]`，既不是我添加元素的顺序，也不是单元格升序，而是权重升序。

我注意到您有两个相同类型的构造函数参数。我建议非常仔细地检查他们没有被调换。如果这不是问题，我建议尝试修改我的测试程序，使其更类似于真实代码，直到它重现问题为止。这是我的测试程序：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Test {
  public static void main(String[] args) {
    List<Move> list = new ArrayList<Move>();
    list.add(new MoveRight(1, 100));
    list.add(new MoveLeft(10, 1));
    Collections.sort(list);
    System.out.println(list);
  }
}

abstract class Move implements Comparable<Move> {
  protected int cell;
  protected int weight;

  public int getWeight()
  {
    return this.weight;
  }

  public void setWeight(int value)
  {
    this.weight = value;
  }

  protected Move(int cell)
  {
    this.cell = cell;
    this.weight = 0;
  }

  protected Move(int cell, int weight)
  {
    this.cell = cell;
    this.weight = weight;
  }

  @Override
  public int compareTo(Move m)
  {
    return this.weight - m.weight;
  }

  @Override
  public String toString() {
    return "Move [cell=" + cell + ", weight=" + weight + "]";
  }
}

class MoveLeft extends Move {

  protected MoveLeft(int cell, int weight) {
    super(cell, weight);
  }

}

class MoveRight extends Move {

  protected MoveRight(int cell, int weight) {
    super(cell, weight);
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:30:29.730

您必须创建 Move 数组，并使用派生类将其向上转换为 Move 并像往常一样对其进行排序，然后您可以使用 istanceOf 和向下转换检查您的实际类。

# java - SimpleDateFormat 不适用于某些 android 版本

> ID：15433577
> 
> 赞同：0
> 
> 时间：2013-03-15T13:22:07.493
> 
> 标签：java, android, simpledateformat

我必须阅读以下格式的日期**Sat, 19 Jan 2013 00:00:00 +0100**。
我的格式化程序是

```
SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z"); 
```

当我想设置数据时：

```
try {
    myObject.setEndDate(format.parse(currentValue));
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

如果我在简单的 java 项目或我的*Nexus*和*Htc*上使用它，这非常有效，但是当我将调试器附加到*三星 s3*时，它会给出解析器异常。

我希望这适用于所有版本的 android 和手机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:25:19.280

```
SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss.SSSZ"); 
```

试试这个：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:04:19.693

在 catch 中打印`currentValue`, 和`Locale.getDefaultLocale()`。语言环境很可能会阻止解析 currentValue。

至少你可以在具有完全相同参数的 PC 上尝试代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:50:55.717

我通过在 try catch 中计算没有简单日期格式的日期来解决这个问题 当在某些手机上运行时，它没有进入 catch 并且格式运行良好，并且在其他手机上运行它进入 catch 但日期计算得很好。

```
 if(localName.equals("startDate") && currentValue!=null){

    try {
        myObject.setStartDate(format.parse(currentValue));
    } catch (ParseException e) {
        String  dates [] = currentValue.split(" ");
        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.DAY_OF_MONTH, Integer.parseInt(dates[1]));
        cal.set(Calendar.YEAR, Integer.parseInt(dates[3]));
        cal.set(Calendar.MONTH, StaticDataUtils.months.get(dates[2]));
        String hours [] = dates[4].split(":");
        cal.set(Calendar.HOUR_OF_DAY, Integer.parseInt(hours[0]));
        cal.set(Calendar.MINUTE, Integer.parseInt(hours[1]));
        myObject.setStartDate(cal.getTime());
        e.printStackTrace();
    } 
```

# sql - 使用多个日期列分组

> ID：15433580
> 
> 赞同：0
> 
> 时间：2013-03-15T13:22:16.443
> 
> 标签：sql, postgresql, group-by

我正在尝试报告电子邮件状态，我需要每月保存记录。

这是我的数据表结构：

```
sent_on date;  
sent boolean;   
open date;  
clicked date; 
```

我期望的最终输出是：

```
Month  | Year   | Sent Count | Open Count | Clicked Count 
```

我知道如果我发表个人声明，例如

```
Select MONTH(sent_on), YEAR(sent_on), count(sent_on) FROM my_table
WHERE sent = true;

Select MONTH(open), YEAR(open), count(open) FROM my_table;

Select MONTH(clicked ), YEAR(clicked ), count(clicked ) FROM my_table; 
```

你们能帮我解决这个问题并提供任何简单的想法吗？我确定我错过了一些东西。ps 在这里使用 sql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:39:35.580

[SQL小提琴](http://www.sqlfiddle.com/#!12/51d8b/5)

```
select
    date_trunc('month', d) "month",
    count(sent and sent_on = d or null) sent_on,
    count(open = d or null) open,
    count(clicked = d or null) clicked
from
    t
    inner join
    generate_series(
        (select least(min(sent_on), min(open), min(clicked)) from t),
        (select greatest(max(sent_on), max(open), max(clicked))from t)
        , '1 day'
    ) s(d) on s.d in (t.sent_on, t.open, t.clicked)
group by 1
order by 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:25:15.427

不一定是高性能代码：

```
SELECT m, y, sent_count, open_count, clicked_count
FROM
    (SELECT MONTH(sent_on) as m, YEAR(sent_on) as y
    FROM my_table
    WHERE sent = true
    GROUP BY MONTH(sent_on), YEAR(sent_on)
    UNION ALL
    SELECT MONTH(open), YEAR(open) 
    FROM my_table
    WHERE sent = true
    GROUP BY MONTH(open), YEAR(open)
    UNION ALL
    SELECT MONTH(open), YEAR(open) 
    FROM my_table
    WHERE sent = true
    GROUP BY MONTH(open), YEAR(open)) d
LEFT JOIN 
(Select MONTH(sent_on) as m , YEAR(sent_on) as y, count(sent_on)  sent_count
 FROM my_table 
 WHERE sent = true
 GROUP BY MONTH(sent_on), YEAR(sent_on)) s on (s.y=d.y and s.m=d.m)
LEFT JOIN 
(Select MONTH(open) as m , YEAR(open) as y, count(open)  open_count
 FROM my_table 
 WHERE sent = true
 GROUP BY MONTH(open), YEAR(open)) o on (o.y=d.y and o.m=d.m)
LEFT JOIN 
(Select MONTH(clicked) as m , YEAR(clicked) as y, count(clicked)  clicked_count
 FROM my_table 
 WHERE sent = true
 GROUP BY MONTH(clicked), YEAR(clicked)) c on (c.y=d.y and c.m=d.m); 
```

假定打开并单击已发送。

**更新**：为了性能，我们可以从以下查询开始：

```
Select MONTH(sent_on) sm, YEAR(sent_on) sy, 
       MONTH(OPEN) om, YEAR(OPEN) oy, 
       MONTH(clicked) cm, YEAR(clicked) cy, 
       count(sent_on) sent_cnt, count(clicked) clicked_cnt, count(open) open_cnt
FROM my_table
WHERE sent = true
GROUP BY MONTH(sent_on), YEAR(sent_on), 
       MONTH(OPEN), YEAR(OPEN), 
       MONTH(clicked), YEAR(clicked); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:47:51.043

取消透视日期，然后有条件地对结果进行分组：

```
SELECT
  MONTH(eventdate) AS Month,
  YEAR (eventdate) AS Year,
  COUNT(CASE eventkind WHEN 'sent_on' THEN 1 END) AS SentCount,
  COUNT(CASE eventkind WHEN 'open'    THEN 1 END) AS OpenCount,
  COUNT(CASE eventkind WHEN 'clicked' THEN 1 END) AS ClickedCount
FROM (
  SELECT
    x.eventkind,
    CASE x.eventkind
      WHEN 'sent_on' THEN sent_on
      WHEN 'open'    THEN open
      WHEN 'clicked' THEN clicked
    END AS eventdate
  FROM my_table AS t
  CROSS JOIN (VALUES ('sent_on', 'open', 'clicked')) AS x (eventkind)
  WHERE t.sent = true
) AS s
GROUP BY
  MONTH(eventdate),
  YEAR (eventdate)
; 
```

# scala - 多个隐式参数的Scala解析

> ID：15433582
> 
> 赞同：4
> 
> 时间：2013-03-15T13:22:18.470
> 
> 标签：scala, implicits

在尝试回答[这个问题](https://stackoverflow.com/questions/15431278/can-an-implicit-conversion-of-an-implicit-value-satisfy-an-implicit-parameter)时，我想出了以下代码：

```
 case class Monkey(bananas: Int) 
    case class Tree(rings: Int)
    case class Duck(quacks: Seq[String])

    implicit class IntLike(val x : Int) extends AnyVal

    implicit def monkey2Age(monkey: Monkey): IntLike = monkey.bananas / 1000
    implicit def tree2Age(tree: Tree): IntLike = tree.rings
    implicit def duck2Age(duck: Duck): IntLike = duck.quacks.size / 100000

    def purchaseCandles[A <% IntLike]()(implicit age : A) = {
      val asAge : IntLike = age
      println(s"I'm going to buy $asAge candles!")
    }              

    {
        implicit val guest = Tree(50)
        purchaseCandles()
    } 
```

请注意，这`IntLike`只是为了让我相信这不是关注的问题`Int`。

这似乎是一个相当标准的隐式使用，如果不好的话，我期待它能够愉快地工作。但是，在调用`purchaseCandles()`REPL 时会产生以下错误：

> 错误：不明确的隐式值：类型 => scala.collection.generic.CanBuildFrom[String,Char,String] 的对象 Predef 中的值 StringCanBuildFrom 和 Tree 类型的值 guest 都匹配预期的类型 A

我一辈子都看不到这是怎么回事。A 必然有一个 的视图边界`IntLike`，这是我刚刚发明的一种类型。REPL 确认没有可用的隐式视图：

> scala> 隐式[Tree => IntLike]
> 
> res14: 树 => IntLike = function1

但

> scala> 隐式[scala.collection.generic.CanBuildFrom[String, Char, String] => IntLike]
> 
> :18: 错误：scala.collection.generic.CanBuildFrom[String,Char,String] => IntLike 没有可用的隐式视图。

那么怎么可能`StringCanBuildFrom`是合适的类型呢？编译器是否能够解析多个依赖隐式，如果不能，为什么会显示这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:14:34.243

在尝试回答之前，这里首先是简化的情况。请注意，您在调用`purchaseCandles`类型时没有任何提示`A`，我认为这是问题的根源。

```
object Foo

def test[A <% Foo.type](implicit bar: A) {}

test 
```

错误：

```
<console>:10: error: ambiguous implicit values:
 both value StringCanBuildFrom in object Predef of type =>
     scala.collection.generic.CanBuildFrom[String,Char,String]
 and method conforms in object Predef of type [A]=> <:<[A,A]
 match expected type A
              test
              ^ 
```

* * *

这`StringCanBuildFrom`似乎更像是一个令人困惑的错误消息。如果您专注于`conforms`这里，这不起作用的原因可能会变得更加清楚：`Predef.conform`声明每当您要求隐式转换`A => A`时，这都是通过身份来保证的。这样一来，如果您有`def foo[B <% A](b: B)`，您始终可以`foo`使用 type 的值进行调用，`A`而无需定义任何类型的`A => A`.

* * *

您要求解析*未指定类型*的隐式参数以及从该*未指定类型*到`IntLike`. 我认为这超出了隐式解析算法的范围。错误消息仍然有些奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:32:47.527

仍然没有解释为什么它会失败——尽管如前所述，由于未定义的输入类型，我认为这对于隐式解析来说太过分了——但你可以让它像这样工作：

```
 implicit def findIntLike[A <% IntLike](x: A): IntLike = x
    def purchaseCandles()(implicit age: IntLike) = {
      println(s"I'm going to buy $age candles!")
    }              

    implicit val guest = Tree(50)
    purchaseCandles() 
```

# mysql - 运行查询后mysql结果不执行？

> ID：15433584
> 
> 赞同：0
> 
> 时间：2013-03-15T13:22:23.633
> 
> 标签：mysql

您好我这里有两个查询作为注册表的一部分运行，用户注册信息被分成两个表，ptb_users 和 ptb_stats。

两个查询都工作正常。但是，两个表都有一个自动增量列，在 ptb_users 中，列 user_id 设置为自动增量，并且在查询结束时，user_id 值设置为更新/复制到 ptb_users.id 以便 user_id 和 id 匹配。

但是在 ptb_stats 中，id 是自动增量列，我再次要求它在 ptb_stats 表中将值从 id 更新/复制到 user_id。

我正在使用以下代码执行此操作：

```
$result = mysql_query("UPDATE ptb_users SET ptb_users.user_id=ptb_users.id");
 $result2 = mysql_query("UPDATE ptb_users SET ptb_stats.id=ptb_stats.user_id"); 
```

现在由于某种原因，这适用于第一个查询 ($result)，我要求它更新 ptb_users.user_id=ptb_users.id 但它不适用于 ($result 2) 是否有任何原因会出现这种情况？

```
$query="INSERT INTO ptb_users (user_id,
id,
first_name,
last_name,
email )
VALUES('NULL',
'NULL',
'".$firstname."',
'".$lastname."',
'".$email."'
)";
mysql_query($query) or dieerr();
$result = mysql_query("UPDATE ptb_users SET ptb_users.user_id=ptb_users.id");

$query="INSERT INTO ptb_stats (id,
user_id,
display_name )
VALUES('NULL',
'NULL',
'".$username."'
)";
mysql_query($query) or dieerr();
$result2 = mysql_query("UPDATE ptb_stats SET ptb_stats.id=ptb_stats.user_id"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:26:52.520

我猜是因为您发送的是*文字字符串*：

```
INSERT INTO ptb_stats ( ... ) VALUES('NULL', 'NULL', ... 
```

省略这些列将是最简单的解决方案：

```
INSERT INTO ptb_stats (display_name) VALUES ( ... ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:37:22.053

有几件事跳出来：-

```
$query="INSERT INTO ptb_users (user_id,
id,
first_name,
last_name,
email )
VALUES('NULL',
'NULL',
'".$firstname."',
'".$lastname."',
'".$email."'
)";
mysql_query($query) or dieerr();
$result = mysql_query("UPDATE ptb_users SET ptb_users.user_id=ptb_users.id"); 
```

您说 user_id 是自动增量列，但您试图使用更新来为它提供 id 列中的值。

而在这里：-

```
$query="INSERT INTO ptb_stats (id,
user_id,
display_name )
VALUES('NULL',
'NULL',
'".$username."'
)";
mysql_query($query) or dieerr();
$result2 = mysql_query("UPDATE ptb_stats SET ptb_stats.id=ptb_stats.user_id"); 
```

你说 id 是自动增量列，但你试图为它分配来自 user_id 的值

# c# - 在 C# 中将“43961529(10%)”转换为“43,961,529.00 (10%)”？

> ID：15433586
> 
> 赞同：1
> 
> 时间：2013-03-15T13:22:25.803
> 
> 标签：c#

如何在 C# 中转换`43961529(10%)`为？`43,961,529.00`

我有一个值`43961529(10%)`，`DataTable`我`DataColumn`想将其转换为`43,961,529.00 (10%)`.

括号（`(10%)`）之间是市场份额。

我正在使用 Visual Studio 2008，C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:32:06.393

使用*正则表达式*，您可以从字符串中获取数字部分。然后您可以将其解析为整数，以您喜欢的任何方式对其进行格式化，然后将字符串重新组合在一起。

```
public static string Format(string input)
{
    Regex regex = new Regex(@"^(\d+)(.*)$");
    var match = regex.Match(input);
    if (match.Success)
    {
        input = Int32.Parse(match.Groups[1].Value).ToString("N2");
        input += " " + match.Groups[2].Value;
    }
    return input;
} 
```

你像这样使用它：

```
string input = "43961529(10%)";
string result = Format(input);      // "43,961,529.00 (10%)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:24:39.700

您应该查看 ToString() 覆盖

```
decimal num = 43961529;
string val = num.ToSTring("N2"); 
```

或者

```
string val = num.ToSTring("0.00"); 
```

有很多方法可以对字符串的输出进行排序

# c - 5个嵌套for循环，速度优化

> ID：15433587
> 
> 赞同：4
> 
> 时间：2013-03-15T13:22:30.477
> 
> 标签：c, optimization

我有一段代码可以从“double **times”计算一个值。假设“时间”的维度为 [nsims][N]（使用 malloc.. 创建），其中 int N=40 和 int nsims=50000。

结果存储在“double **moments”中。所以我们有 5 个嵌套的 for 循环。

然而问题在于速度，因为这段代码需要运行大约 100 万次。

我已经在使用线程（此处未显示）将最里面的 for 循环拆分为 10 个并行线程，这已经节省了大量时间。

有没有人看到其他优化的可能性，特别是关于不同的数据结构或类似的东西？

即使我没有“interm = ...”公式，它仍然需要太多时间。

```
for(j=2;j<=N;j++) {     
    for(k=j;k<=N;k++) {
        moment=0;
        for(i=2;i<=N;i++) {
            for(l=i;l<=N;l++) {
                if(strcmp(mmethod, "emp")==0) {
                    for(a=0;a<nsims;a++) {
                        interm=interm + (double) times[a][k] *
                                        times[a][j]*times[a][i] *
                                        times[a][l];    
                    }
                    interm = (double) interm/nsims;
                    moment = moment + (interm*i*l);
                    interm=0;
                }
            }
        }
        if(!(changed_times[k]==0
             && changed_times[j]==0
             && changed_times[l]==0
             && changed_times[i]==0))
        {
            moments[0][pcount]=(double) moment;
        } else {
            moments[0][pcount]=moments[0][pcount];
        }
        pcount++;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:14:45.990

请注意，在您的内部循环中，您每次都在查找和相乘`times[a][k]*times[a][j]*times[a][i]`，即使该表达式对于 . 的每个值都是相同的`a`。对于乘法和内存查找来说，它可能很昂贵。（也许编译器足够聪明，可以将其优化掉，我不知道。）您可以尝试在内部循环中缓存这些值，如下所示：

```
 ...
  double akji[nsims];
  for (a = 0; a < nsims; ++a) { akji[a] = times[a][k]*times[a][j]*times[a][i]; }
  for(l=i;l<=N;l++) {
interm=0;
for(a=0;a<nsims;a++) {
  interm += akji[a]*times[a][l]; 
}
moment += (interm*l);
  }
  moment = moment * i / nsims;
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:02:40.763

我想应该从对问题的更高层次的描述开始。

但作为次要选项，我建议交换数组索引，以便更轻松地编写一个结合了四个（可能是不同的）向量的超快 SSE 内循环：

```
 double times[N+1][nsims], *tend = times[N+1];
 double *j,*k,*i,*l;
 for (j=times[2];j<tend;j+=nsims)
  for (k=j;k<tend;k+=nsims)
   if (strcmp( )) ... /* One _can_ move this elsewhere, but why bother? */
   for (i=times[2];i<tend;i+=nsims)
    for (l=i;l<tend;l+=nsims) {
      interm = efficient_sse_implementation(j,k,i,l, nsims);
      ...
    } 
```

对于少于 4 个不同数组的情况，也可以通过编写不同的内核来实现微小的优化。（在这种情况下，可以跳过每步一个内存操作。）

**编辑**

在这种情况下，模式的结构`for(j=2;j<=N;j++) for (k=j;k<=N;k++)`重复了两次，仅此一项就暗示了更高级别优化的可能性——执行的操作是什么？虽然为此苦苦挣扎，但这种模式仍然提出了另一种方法：缓存 780 个（左右）子产品，但同时执行*循环阻塞*。这种方法不应该与我对先生的评论有同样的问题。格贝尼森

```
 for (A=0;A<50000;A+=100) {
    int k=0;
    for (i=2;i<=N;i++)
     for (j=i;j<=N;j++,k++)
       for (a=0;a<100;a++) precalc[k][a]=times[i][A+a]*times[j][A+a];

    for (i=0;i<k;i++)  // Now i loops from 0..779 or so
     for (j=0;j<k;j++) {
       for (a=0;a<100;a++) partial_product+=precalc[i][a]*precalc[j][a];
       // accumulate also partial_product to moment
     }
 } 
```

免责声明：*这*是未经尝试的，但存在一些最佳的块大小（不一定是 100）（它可能比以前的情况更糟）。另请注意，这种方法会为预先计算的表使用大量内存。（选择 100 的块大小需要 624000 字节的内存，这听起来不错。要低于 256k，块长度只能是 42）。

**编辑 2**：

// 请注意，EDIT_1 中的循环同时计算`P[2][a]*P[3][a]`和`P[3][a]*P[2][a]`。

```
 for (i=0;i<k;i++)  // Now i loops from 0..779 or so, but... we can limit the
     for (j=i;j<k;j++) { // calculation to the upper triangle of the 780^2 matrix
       for (a=0;a<100;a++) partial_product+=precalc[i][a]*precalc[j][a];
       moment[i]+=partial_product;
       moment[lower_triangle(i)]+=partial_product;  // <-- 50% speed increase
     } 
```

**编辑3：**这里有一些尝试：

```
gcc -O4 -DCACHELEVEL=2 -DPOPULATE=1 -DARRAY_OPT=1 && time ./a.out 
```

*   `POPULATE`初始化数组（假设非零内容很重要）
*   `ARRAY_OPT=1`将数组索引切换到（也许）更好的顺序
*   `CACHELEVEL=2`或 3 次切换缓存中间结果。
*   `STRCMP`可以在源代码中找到测试 memcmp vs. strcmp vs '1'

**NOT TODO 1** : LOOP_BLOCKING with cached values - 降低性能
**TODO 2** : 只计算上三角形
**TODO 3** : 找出`changed_times[n]`and的含义`moments[0][p]`
- 正如它现在所表明的那样，没有任何计算被保存！

```
#include <stddef.h>
#define N 40
#define nsims 8000

#if ARRAY_OPT
#define TIMES(n,a) times[n][a]
double times[N+1][nsims]; // [nsims];
#else
#define TIMES(n,a) times[a][n]
double times[nsims][N+1];
#endif

#define STRCMP 1
// vs.
// #define STRCMP1 strcmp(mmethod, "emp")==0

void init()
{
#ifdef POPULATE
    int i,a;
    for (i=0;i<=N;i++)
      for (a=0;a<nsims;a++)
         TIMES(i,a) = (double)((i^a)&7) - 3.5;
#endif
}

  double moments[4000] = { 0 };
  double cache1[nsims];
  double cache2[nsims];

int main()
{
  int j,k,i,l,a, pcount=0;
  init();
  int changed_times[N+1]={0};
  char *mmethod="emp";

  double moment,interm;
  for(j=2;j<=N;j++) {     
    for(k=j;k<=N;k++) {
#if CACHELEVEL == 2
        for (a=0;a<nsims;a++) cache1[a]=TIMES(j,a)*TIMES(k,a);
#endif
        moment=0;
        for(i=2;i<=N;i++) {
#if CACHELEVEL == 3
            for (a=0;a<nsims;a++)         cache2[a]=TIMES(j,a)*TIMES(k,a)*TIMES(i,a);
#else
            for (a=0;a<nsims;a++) cache2[a]=cache1[a]*TIMES(i,a);
#endif
            for(l=i;l<=N;l++) {
                if(STRCMP) { 
                    for(a=0;a<nsims;a++) {
#if CACHELEVEL >= 2
                        interm += (double) cache2[a]*TIMES(l,a);
#else
                        interm=interm + (double) TIMES(k,a) * TIMES(j,a) * TIMES(i,a) * TIMES(l,a);
#endif
                    }
                    interm = (double) interm/(double)nsims;
                    moment = moment + (interm*i*l);
                    interm=0;
                }
            }
        }
        //if(!(changed_times[k]==0
        //     && changed_times[j]==0
        //     && changed_times[l]==0
        //     && changed_times[i]==0))
        //{
        //    moments[0][pcount]=(double) moment;
        //      changed_times[k]++;changed_times[j]++; /* or what? */
        //      changed_times[l]++;changed_times[i]++;
        //} else {
        //    moments[0][pcount]=moments[0][pcount];
        //}
        pcount++;
    }
  }
  printf("%d %f\n",pcount, moment);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:10:50.120

第一个明显的优化是移出`strcmp()`循环。

字符串比较可能需要相当长的时间（实际上并不多，但是如此多次重复此调用会产生很大的不同）。此外，编译器可能永远不会优化此调用，而其结果在整个处理过程中是恒定的。因此，在进入嵌套循环之前将结果存储在一个临时布尔变量中，并且只测试循环内的布尔值。

*此外，在尝试优化一段代码时，请确保使用发布目标（没有调试信息）进行编译并打开所有可能的编译器优化。*

# c# - 黑屏只是闪烁了一会儿

> ID：15433588
> 
> 赞同：6
> 
> 时间：2013-03-15T13:22:31.543
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

在我的 Windows phone 8 应用程序中，我有一个搜索页面，其中有一个文本框供用户输入搜索关键字。输入默认 SIP 键盘的“Enter”键时将调用搜索。搜索结果显示在另一个页面中。为了在导航到结果页面之前隐藏键盘，我使用 this.Focus() 方法更改了 TextBox 控件的焦点。但即使在此之后，黑屏也只是闪烁了一段时间。有没有办法在搜索方法和导航之前完全隐藏 SIP 键盘。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:37:00.567

这是一个渲染问题，解决此问题的一种方法是更改​​不透明度`applicationbar`

```
<shell:ApplicationBar IsVisible="True" Opacity="0.99"> 
```

当我遇到同样的问题时，我想我需要在不更改应用栏的情况下解决这个问题。所以我浏览了整个页面，似乎发生的事情是我在全景图中构建了很多控件，但它不是布局根网格的直接子元素，因此导致了问题。

让我知道事情的后续 （：

# c++ - 为什么我的 set_intersection 代码比 std 慢？

> ID：15433592
> 
> 赞同：2
> 
> 时间：2013-03-15T13:22:37.770
> 
> 标签：c++, optimization, std, set-intersection

我有以下两个功能。我使用随机排序的向量执行每个函数大约 200K 次（每个函数获得相同的两个向量，但向量在运行之间会发生变化）。我有点困惑，因为我的代码在所有 200K 迭代中总共运行了大约 500 毫秒，而 STD 函数调用在 440 毫秒内运行。~60ms 去哪儿了？STD 在做什么（或不做什么）我做的不同？

我在核心 i5 上使用 Visual Studio 10。

```
int getAndIntersectMine(std::vector<int>& resultContainer)
{
    std::vector<int> const& vector0 = getSomeVector();
    std::vector<int> const& vector1 = getAnotherVector();

    const int length0 = vector0.size();
    const int length1 = vector1.size();

    const int* ptr0 = &vector0[0];
    const int* ptr1 = &vector1[0];

    int i0 = 0;
    int i1 = 0;
    int numels = 0;

    while(i0 < length0 && i1 < length1)
    {
      if(ptr0[i0] == ptr1 [i1]) {
        resultContainer[numels++] = ptr0[i0];
        i0++;
        i1++;
      }
      else if (ptr0[i0] > ptr1[i1])
      {
        i1++;
      }
      else
      {
        i0++;
      }
    }

    return numels;
}

int getAndIntersectStds(std::vector<int>& resultContainer)
{
    std::vector<int> const& vector0 = getSomeVector();
    std::vector<int> const& vector1 = getAnotherVector();

    std::vector<int>::iterator last = 
      std::set_intersection(
        vector0.begin(),
        vector0.end(), 
        vector1.begin(), 
        vector1.end(), 
        resultContainer.begin());

    return last - resultContainer.begin();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:30:21.953

我认为问题在于您使用的是订阅而不是迭代器。

在迭代 std 算法时（在指针 eqv 中。）

```
int * beg = &v[0];
int * end = &v[0] + v.size();
while(beg != end)
{
  ...
  ++beg;
} 
```

你的算术更广泛

```
int * beg = &v[0];
int i = 0, s = v.size();
while(i != s)
{
  //use beg[i], which is *(beg + i)
  ...
  ++i;
} 
```

并且还发布增量......但我认为它已经过优化

# hibernate - 使用 JPA 的旧版 Hibernate 一对多映射

> ID：15433594
> 
> 赞同：0
> 
> 时间：2013-03-15T13:22:43.300
> 
> 标签：hibernate, set, jpa-2.0

我有一个遗留的 Hibernate 托管域，我现在正在尝试升级到 Spring Data JPA 环境。

当针对遗留的 Hibernate DAO 运行时，Maven 构建是成功的。

但是，当我针对 JPA 实体管理器运行 Maven 构建时，我在一个使用一对多映射的域类上遇到异常。

这是域类：

```
public class LinkCategory implements java.io.Serializable {

    private Integer id;
    private int version;
    private String name;
    private String description;
    private Set<Link> links = new HashSet<Link>();

    public LinkCategory() {
    }

    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public int getVersion() {
        return this.version;
    }

    public void setVersion(int version) {
        this.version = version;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return this.description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public Set<Link> getLinks() {
        return this.links;
    }

    @SuppressWarnings("unused")
    private void setLinks(Set<Link> links) {
        this.links = links;
    }

    public void addLink(Link link) {
        if (link.getLinkCategory() != this) {
            if (link.getLinkCategory() != null) {
                link.getLinkCategory().links.remove(link);
            }
            link.setLinkCategory(this);
            this.links.add(link);
        }
    }

    public void removeLink(Link link) {
        if (link.getLinkCategory().getId() == this.getId() && this.getId() != null) {
            link.setLinkCategory(null);
            this.links.remove(link);
        }
    }

} 
```

这是休眠映射：

```
<hibernate-mapping>
    <class name="com.thalasoft.learnintouch.core.domain.LinkCategory" table="link_category" dynamic-insert="true" dynamic-update="true">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="native"><param name="sequence">sq_id_link_category</param></generator>
        </id>
        <version name="version" type="int">
            <column name="version" not-null="true" />
        </version>
        <property name="name" type="string">
            <column name="name" length="50" not-null="true" />
        </property>
        <property name="description" type="string">
            <column name="description" not-null="false" />
        </property>
        <set name="links" inverse="true" order-by="list_order" cascade="all">
            <key column="category_id" />
            <one-to-many class="com.thalasoft.learnintouch.core.domain.Link" />
        </set>
    </class>
</hibernate-mapping> 
```

我得到的错误是：

> 引起：org.hibernate.MappingException：无法确定类型：java.util.Set，表：LinkCategory，列：[org.hibernate.mapping.Column(links)]

我的 Hibernate 版本是：3.6.9.Final 我的 Hibernate JPA 2 版本是：1.0.1.Final 我的 Spring Data JPA 版本是：1.3.0.RELEASE

有什么线索吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:33:46.623

我可以通过指定以下注释来解决这个问题：

```
@OneToMany(mappedBy="linkCategory")
private Collection<Link> links; 
```

# google-chrome - 检测“错误 106 net::ERR_INTERNET_DISCONNECTED)”

> ID：15433598
> 
> 赞同：8
> 
> 时间：2013-03-15T13:22:48.133
> 
> 标签：google-chrome, google-chrome-extension

当 Chrome 显示页面“错误 106 (net::ERR_INTERNET_DISCONNECTED)：Internet 连接已丢失。” ? 我已经尝试向两者注册一个监听器`chrome.webRequest.onErrorOccurred.addListener`，`chrome.webNavigation.onErrorOccurred.addListener`但是当发生“错误 106”时，两个监听器都没有被调用。我的听众被正确地调用了其他错误，例如“net::ERR_NAME_NOT_RESOLVED”。

我的目标是在 Window 7 环境中使用 Chrome 22.0.1229.94。更大的目标是在 Internet 连接丢失时提供自定义消息（在单独的选项卡中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-30T21:59:54.607

我个人最终测试了 response == "" 和 status == 0。

```
 var req = new XMLHttpRequest();
        req.open("post", VALIDATE_URL, true);
        req.onreadystatechange = function receiveResponse() {

            if (this.readyState == 4) {
                if (this.status == 200) {
                    console.log("We go a response : " + this.response);
                } else if (!isValid(this.response) && this.status == 0) {
                    console.log("The computer appears to be offline.");
                }
            }
        };
        req.send(payload);
        req = null; 
```

# themes - Shopify 入门，Windows 上的本地开发

> ID：15433601
> 
> 赞同：2
> 
> 时间：2013-03-15T13:23:05.057
> 
> 标签：themes, hosting, localhost, shopify

我希望开始使用 Shopify 构建电子商务网站。

我只是想知道是否有人有在 Windows 上这样做的经验（shopify 的支持页面主要似乎是面向 Mac OS 的）。

最重要的是，我想知道人们如何使用 shopify 在本地环境中处理主题。

任何关于我应该如何最好地为 Shopify 设置建筑环境的建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:29:10.110

如果你在 Windows 上，看看这个 gem - [https://rubygems.org/gems/shopify_theme](https://rubygems.org/gems/shopify_theme)

# android - 查明设备是否在没有网络服务的情况下通过 Wifi-Direct 运行我的应用程序

> ID：15433604
> 
> 赞同：1
> 
> 时间：2013-03-15T13:23:15.473
> 
> 标签：android, android-4.0-ice-cream-sandwich, wifi-direct

我了解在 Android API 16 中，WifiP2pManager 具有`addLocalService`可用于查询设备的方法。

但是我将如何为 API 级别 15 执行此操作？

本质上，我有一个设备作为组所有者，它同时向所有客户端发送持续更新。

客户希望能够订阅此内容，因此群组所有者不邀请客户，客户只需搜索群组所有者，然后一旦找到，告诉群组所有者他们想要订阅。然后组所有者存储客户详细信息并将其添加到收件人列表中。

它很容易发现同行并查看他们是否是组所有者。（使用 a`PeerListListener`和`WifiP2pDevice`方法`isGroupOwner()`）

但是，我如何（作为客户）搜索范围内的所有组所有者，当我有当前是组所有者的设备列表时，我如何检查该组当前是否正在运行我的应用程序？

# maven - 显示 Selenium Maven 设置的测试结果报告的最佳方式是什么

> ID：15433605
> 
> 赞同：0
> 
> 时间：2013-03-15T13:23:19.220
> 
> 标签：maven, ant, selenium, webdriver, selenium-webdriver

我正在使用 JUNIT 为 selenium webdriver 设置 maven。

那么任何人都可以建议我显示测试结果报告的最佳方式是什么？

如果可能的话，如果你有一个好的，你也可以发送 pom.xml。

谢谢拉朱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:45:57.353

对于测试结果报告，我只需将 test-output 目录复制到一个 tomcat 服务器中，需要查看它的人可以这样做。

下面是我的 pom.xml。我意识到我确实需要更新我的 selenium 版本，但这应该会给你一个好的开始。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
 <modelVersion>4.0.0</modelVersion>
  <groupId>VINCI_DART_Automation</groupId>
  <artifactId>VINCI_DART_Automation</artifactId>
  <version>0.0.1-SNAPSHOT</version>
    <build>
      <sourceDirectory>src</sourceDirectory>
        <plugins>
          <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
            <source>1.7</source>
            <target>1.7</target>
      </configuration>
  </plugin>
</plugins>
</build>
<dependencies>
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
</dependency>
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-server</artifactId>
</dependency>
</dependencies>
<dependencyManagement>
<dependencies>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.29.0</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-server</artifactId>
        <version>2.29.0</version>
    </dependency>
</dependencies>
</dependencyManagement>
</project> 
```

# php - 刷新页面后如何选择值？

> ID：15433606
> 
> 赞同：-3
> 
> 时间：2013-03-15T13:23:20.363
> 
> 标签：php, html

刷新PHP网页后，如何在下拉列表中显示选定的值？这是我的代码...

```
<select name="dropdown-list">
     <option value="1">Test1</option>
     <option value="2">Test2</option>
    <option value="3">Test3/option>
    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:24:37.033

给`option`你希望被选中的[`selected`属性](http://www.w3.org/TR/html5/forms.html#attr-option-selected)：

```
<select name="dropdown-list">
    <option value="1">Test1</option>
    <option value="2" selected>Test2</option>
    <option value="3">Test3/option>
</select> 
```

在这种情况下，选择了“Test2”选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:25:08.390

使用属性`selected="selected"`指定应选择哪个选项：

```
<option value="3" selected="selected">Test3/option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:56:41.033

最好的办法是在页面加载时使用 isset() 函数

# ruby-on-rails - 服务器拒绝连接

> ID：15433607
> 
> 赞同：1
> 
> 时间：2013-03-15T13:23:23.080
> 
> 标签：ruby-on-rails

我在我的开发机器上创建了一个 rails 项目并将其上传到我的 VPS。我已经更正了所有配置错误，安装并配置了 postgres。我解决了所有数据库用户和角色问题。现在我去我的浏览器看看它是否有效，这是我得到的错误：

```
Google Chrome's connection attempt to dev.mysite.com was rejected
Error 102 (net::ERR_CONNECTION_REFUSED): The server refused the connection. 
```

我还注意到我输入了 dev.mysite.com 并在地址栏中返回 https://dev.mysite.com/ 我猜这可能是一个线索。

我应该如何进行故障排除和纠正此问题？

我试过`curl -I http:// dev.mysite.com` 了，我回来了：

```
HTTP/1.1 301 Moved Permanently
Content-Type: text/html
Connection: keep-alive
Status: 301
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.11
Strict-Transport-Security: max-age=31536000
Location: https:// dev.mysite.com/
Date: Fri, 15 Mar 2013 13:14:54 GMT
X-Rack-Cache: miss
Server: nginx/1.0.11 + Phusion Passenger 3.0.11 (mod_rails/mod_rack) 
```

谢谢你的帮助。

# javascript - 原型未定义

> ID：15433609
> 
> 赞同：0
> 
> 时间：2013-03-15T13:23:37.017
> 
> 标签：javascript, asp.net-mvc-4, knockout.js

我正在尝试控制在将哪些数据发送回我的服务器之前应该对其进行序列化。去做这个 ：

```
viewModel.prototype.toJSON = function () {
  var copy = ko.toJS(this);
  delete copy.QuoteListViewModel;
  return copy;
}; 
```

但是原型是未定义的并且它失败了。

viewModel 由 mvcKnockout 创建并且确实存在，因为我可以执行以下操作：

```
viewModel.QuoteSelectedViewModel = ko.observable(); 
```

那么为什么原型是未定义的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:34:43.833

我相信，原型仅适用于函数，而不是直接的 JS 对象，所以我猜你的视图模型没有被声明为函数。

要回答您评论中的问题，要在发送到服务器之前删除属性，请查看[映射插件文档](http://knockoutjs.com/documentation/plugins-mapping.html)中关于使用 a 进行映射的部分`ignore map`，毫不奇怪，这将忽略您在复制时告诉它的属性 a查看模型到 JS 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:41:46.590

为什么要复制对象和属性，而[在映射期间](http://knockoutjs.com/documentation/plugins-mapping.html#ignoring_certain_properties_using_ignore)`delete`可以忽略它？这是一个简单的例子：

```
function viewmodel() {
    var self = this;

    this.ignore = ko.observable("ignore");
    this.copy = ko.observable("copy");

    this.toJS = function () {
        var mapping = {
            'ignore': ["ignore", "toJS"]
        }

        return ko.mapping.toJS(self, mapping);
    };
};

var vm = new viewmodel();
ko.applyBindings(vm);

console.log(vm.toJS()); 
```

[JSF](http://jsfiddle.net/vsSj7/1/)中。

# c - 使用现有设备名称的 device_create

> ID：15433614
> 
> 赞同：2
> 
> 时间：2013-03-15T13:24:00.577
> 
> 标签：c, linux, linux-kernel, linux-device-driver, device-driver

我正在学习如何将字符设备驱动程序编写为 Linux 的可动态加载模块。通常，我使用以下函数调用序列来注册设备并创建出现在下面的设备文件`/dev/`：

```
alloc_chrdev_region(&first, 0, 1, "myclass");
myclass = class_create(THIS_MODULE, "myclass");
device_create(myclass, NULL, first, NULL, "mydevicefile");
cdev_init(&c_dev, &fops);
cdev_add(&c_dev, first, 1); 
```

然后设备文件出现在`/dev/mydevicefile`，我可以与之交互。

这让我想知道如果传递现有设备文件名而不是*"mydevicefile"*会发生什么：

```
device_create(myclass, NULL, first, NULL, "null"); 
```

这导致`/dev/null`被我的字符设备文件替换 - 更令人担忧的是：我的控制台中的错误消息来自期望原始`/dev/null`. 甚至没有删除我的人造`null`模块来解决这个问题。

虽然在实践中不应该存在与我的模块使用的同名的现有设备文件，但理论上可以覆盖另一个设备文件这一事实仍然困扰着我。

如何防止已经存在与我打算使用的设备文件同名的设备文件的情况？

**更新**：我想我真正想知道的是为什么 udev 允许更换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:41:13.337

所有的设备驱动*程序*`/dev`（在 一种方法是使用：

 *```
#include <unistd.h>  // for F_OK and access()

...

if( access( "/dev/null", F_OK ) != -1 ) {
    printf("File already exists!\n");
} else {
    printf("File doesn't exist!\n");
    // create new dev here
} 
```

由于`/dev/null` *确实*存在，您将看到“文件存在！” 这里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:45:07.460

```
This resulted in /dev/null being replaced by my character device file 
```

您可以使用 mknod 实用程序创建一个新的 NULL 设备文件

> sudo mknod -m 0666 /dev/null c 1 3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:25:10.757

设备节点的创建通常由用户空间操作处理。这是目的：通过解释来自的数据`udev`来填充和处理用户空间目录。`/dev/``sysfm`

传递给`device_create`函数的名称只是一个建议的默认名称，它`sysfm`与有关设备的其他数据一起出现；最终由用户空间实用程序或用户决定如何处理该数据。

`udev`碰巧遇到同名设备时的默认行为是用新设备节点覆盖旧设备节点：http://marc.info/?l=linux-hotplug&m= [125559736630729](http://marc.info/?l=linux-hotplug&m=125559736630729)*

# java - 来自 Main 类的 JFrame 中的另一个类的 JPanel 的大小问题

> ID：15433615
> 
> 赞同：1
> 
> 时间：2013-03-15T13:24:02.057
> 
> 标签：java, swing, jakarta-ee, javafx

我正在尝试将 JavaFx 浏览器组件添加到我的 Swing 应用程序中。我需要在选项卡式窗格中加载浏览器，并在运行时动态地将 url 设置为这些浏览器。所以我有以下代码将浏览器呈现到 JFrame 中，但输出不会以框架的大小出现。浏览器组件在选项卡式窗格内以小尺寸显示，而不是全帧尺寸。请指导我从以下代码中更正的位置：

```
 public class BrowserScene extends JPanel {

private static final long serialVersionUID = 5114913691608034106L;
private JFXPanel jfxPanel;
private WebEngine engine;

private JPanel panel = new JPanel(new BorderLayout());
private JLabel lblStatus = new JLabel();

private JButton btnGo = new JButton("Go");
private JTextField txtURL = new JTextField();
private JProgressBar progressBar = new JProgressBar();

private void initComponents() {
    jfxPanel = new JFXPanel();
    jfxPanel.setSize(new Dimension(1200, 1000));

    createScene();

    ActionListener al = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            loadURL(txtURL.getText());
        }
    };

    btnGo.addActionListener(al);
    txtURL.addActionListener(al);

    progressBar.setPreferredSize(new Dimension(150, 18));
    progressBar.setStringPainted(true);

    JPanel topBar = new JPanel(new BorderLayout(5, 0));
    topBar.setBorder(BorderFactory.createEmptyBorder(3, 5, 3, 5));
    topBar.add(txtURL, BorderLayout.CENTER);
    topBar.add(btnGo, BorderLayout.EAST);

    JPanel statusBar = new JPanel(new BorderLayout(5, 0));
    statusBar.setBorder(BorderFactory.createEmptyBorder(3, 5, 3, 5));
    statusBar.add(lblStatus, BorderLayout.CENTER);
    statusBar.add(progressBar, BorderLayout.EAST);

    panel.add(topBar, BorderLayout.NORTH);
    panel.add(jfxPanel, BorderLayout.CENTER);
    panel.add(statusBar, BorderLayout.SOUTH);

    add(panel);     
}

private void createScene() {

    Platform.runLater(new Runnable() {
        @Override
        public void run() {

            WebView view = new WebView();
            Group group = new Group();
            Scene scene = new Scene(group);
            jfxPanel.setScene(scene);
            group.getChildren().add(view);

            engine = view.getEngine();
            engine.setJavaScriptEnabled(true);

            /*engine.titleProperty().addListener(
                    new ChangeListener<String>() {
                        @Override
                        public void changed(
                                ObservableValue<? extends String> observable,
                                String oldValue, final String newValue) {
                            SwingUtilities.invokeLater(new Runnable() {
                                @Override
                                public void run() {
                                    frame.setTitle(newValue);
                                }
                            });
                        }
                    });*/

            engine.setOnStatusChanged(new EventHandler<WebEvent<String>>() {
                @Override
                public void handle(final WebEvent<String> event) {
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            lblStatus.setText(event.getData());
                        }
                    });
                }
            });

            engine.locationProperty().addListener(
                    new ChangeListener<String>() {
                        @Override
                        public void changed(
                                ObservableValue<? extends String> ov,
                                String oldValue, final String newValue) {
                            SwingUtilities.invokeLater(new Runnable() {
                                @Override
                                public void run() {
                                    txtURL.setText(newValue);
                                }
                            });
                        }
                    });

            engine.getLoadWorker().workDoneProperty()
                    .addListener(new ChangeListener<Number>() {
                        @Override
                        public void changed(
                                ObservableValue<? extends Number> observableValue,
                                Number oldValue, final Number newValue) {
                            SwingUtilities.invokeLater(new Runnable() {
                                @Override
                                public void run() {
                                    progressBar.setValue(newValue
                                            .intValue());
                                }
                            });
                        }
                    });

            engine.getLoadWorker().exceptionProperty()
                    .addListener(new ChangeListener<Throwable>() {

                        public void changed(
                                ObservableValue<? extends Throwable> o,
                                Throwable old, final Throwable value) {
                            if (engine.getLoadWorker().getState() == FAILED) {
                                SwingUtilities.invokeLater(new Runnable() {
                                    @Override
                                    public void run() {
                                        JOptionPane
                                                .showMessageDialog(
                                                        panel,
                                                        (value != null) ? engine
                                                                .getLocation()
                                                                + "/n"
                                                                + value.getMessage()
                                                                : engine.getLocation()
                                                                        + "/nUnexpected error.",
                                                        "Loading error...",
                                                        JOptionPane.ERROR_MESSAGE);
                                    }
                                });
                            }
                        }
                    });

            //jfxPanel.setScene(new Scene(view));
        }
    });
}

public void loadURL(final String url) {
    Platform.runLater(new Runnable() {
        @Override
        public void run() {
            String tmp = toURL(url);

            if (tmp == null) {
                tmp = toURL("http://" + url);
            }

            engine.load(tmp);
        }
    });
}

public void loadURL(final StringBuffer buffer) {
    Platform.runLater(new Runnable() {
        @Override
        public void run() {
            engine.loadContent(buffer.toString());
        }
    });
}

public String getUrl() {
    return engine.getLocation();
}

private String toURL(String str) {
    try {
        return new URL(str).toExternalForm();
    } catch (MalformedURLException exception) {
        return null;
    }
}

public BrowserScene() {
    initComponents();

    loadURL("http://www.google.co.in");
}

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            JTabbedPane tabbedPane = new JTabbedPane();
            BrowserScene jfb = new BrowserScene();
            jfb.validate();  // update and redisplay
            tabbedPane.add(jfb);
            JFrame frame = new JFrame();
            frame.setLayout(new GridLayout());
            frame.add(tabbedPane);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            Toolkit tk = Toolkit.getDefaultToolkit();
            Dimension dim = tk.getScreenSize();
            frame.setMaximumSize(dim);
            frame.setMinimumSize(dim);
            frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH);
            frame.setMaximizedBounds(null);
            //  frame.setResizable(false);
            frame.pack();
            frame.setVisible(true);
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:45:49.160

阅读..

[http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm](http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm)

这个简单的 Swing 浏览器

浏览器 java 已知 = Lobo Web Browser、Willow、xBrowser

# android - 我无法在 android 中将文本附加到我的 textview。我该如何解决？Hangman 控制台示例

> ID：15433618
> 
> 赞同：0
> 
> 时间：2013-03-15T13:24:10.950
> 
> 标签：android, textview, append

```
public class HangmanRoughActivity extends Activity {
    private EditText userLetter;
    private Button checkButton;
    private TextView text;
    protected int count = 6;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        start();
    }

    private void start() {
        int i;
        userLetter = (EditText) findViewById(R.id.letter);
        checkButton = (Button) findViewById(R.id.go);
        text = (TextView) findViewById(R.id.display);
        Random rand = new Random();
        int myrand = rand.nextInt(4);
        String[] questions = {"srk", "nandu", "kartheek", "kishore", "ravitejaG"}; //some random strings
        final String question = questions[myrand]; //selects a string from the above strings
        final char answer[] = new char[question.length()];
        for (i = 0; i < question.length(); i++) {
            answer[i] = '_'; //if "srk" is selected answer will be _ _ _ initially
        }
        text.setText(answer, 0, i); //if "srk" is selected,setting the textview to _ _ _
        checkButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                int i = 0;
                char userEntry = userLetter.getText().charAt(0);
                String stringAnswer = answer.toString();
                if (question == stringAnswer) {
                    text.setText("Congratulations.You won");
                } else {
                    if (count > 0) {
                        int occurence;
                        char c;
                        for (i = 0, occurence = 0; i < question.length(); i++) {
                            c = question.charAt(i);
                            if (userEntry == c) {
                                answer[i] = c; //if 's' is entered by user,answer becomes s _ _
                                occurence++;
                            }
                        }
                        if (occurence == 0) //if the letter entered by user is not present in the question
                        {
                            text.append("You have" + count + "chances to go");
                            count--;
                        }
                        text.setText(answer, 0, i);
                    }
                }
            }
        });
    }
} 
```

上面的代码是一个简单的刽子手控制台游戏。我无法附加“你有”+计数+“机会”行，也无法打印“恭喜你赢了”。为什么会这样？对不起冗长的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:27:50.593

使用`String.equals`or`String.equalsIgnoreCase`比较当前你正在使用的字符串`==`，它用于比较字符串对象内字符内的两个对象引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:42:38.960

即使我添加了附加语句，我还是用“text.setText(answer, 0, i);”行覆盖了 textview .所以setText和append命令的顺序需要互换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:27:59.733

像往常一样尝试 `text.setText();`。它会起作用的。

```
text.setText("You have"+count+"chances to go"); 
```

# kml - kmltree 看起来不正确

> ID：15433619
> 
> 赞同：0
> 
> 时间：2013-03-15T13:24:14.227
> 
> 标签：kml

我正在尝试让 kmltree 工作。正在加载 kmz，但树不会展开以显示子元素。他也没有出现正确的文件夹图标。可能有关系？
任何人都看到我可能做错了什么？

```
 <!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>Simple Example</title>
        <script src="http://www.google.com/jsapi?key=ABCD"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <!-- earth-api-utility-library dependencies -->
        <script src="http://geojs.googlecode.com/svn/trunk/dist/geo.pack.js"></script>
        <script src="http://earth-api-utility-library.googlecode.com/svn/trunk/extensions/dist/extensions.pack.js">
        </script>
        <!-- kmltree source files -->
        <link rel="stylesheet" href="../dist/kmltree.css" media="screen">
        <script src="../dist/kmltree.min.js"></script>

        <script>
            google.load("earth", "1");

            function init() {
                google.earth.createInstance('map3d', initCB, failureCB);
            }

            function initCB(instance) {
                ge = instance;
                ge.getWindow().setVisibility(true);

                var gex = gex = new GEarthExtensions(ge);

                var tree = kmltree({
                    url: 'http://kmltree.googlecode.com/hg/examples/kml/hello.kml',
                    gex: gex, 
                    mapElement: $('#map3d'), 
                    element: $('#tree'),
                });

                tree.load();
            }

            function failureCB(errorCode) {
                alert('failed to load plugin');
            }

            $(document).ready(init);

        </script>
    </head>
    <body>
        <div id="tree" style="float:left; width:300px; height: 400px;"></div>
        <div id="map3d" style="float:left; height: 400px; width: 600px;"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T14:57:23.810

我只是遇到了同样的问题，并通过将“kmltree.css”文件中的所有“images/..”链接的路径适应我的实际文件夹设置来解决它，例如，如果你同时放置原始的“images”和“css” “根目录中的文件夹，您必须将路径更改为“../images..”。

# c# - 在 C# ASP.NET 中动态调用方法

> ID：15433621
> 
> 赞同：3
> 
> 时间：2013-03-15T13:24:16.963
> 
> 标签：c#, asp.net, reflection

我以前见过用户解决这个问题，比如在线程中： [C#very dynamic invocation](https://stackoverflow.com/questions/8836057/c-sharp-very-dynamic-invocation)

但是我对给出的代码没有太大的成功。我基本上是在尝试使用一些变量字符串来调用方法。

这是我到目前为止所拥有的。

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class _Model : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

       string TargetMethod = "Index";
       Type t = System.Type.GetType("_Model");

       System.Reflection.MethodInfo methodInfo = t.GetMethod(TargetMethod);
       methodInfo.Invoke(t, new object[] {});

    }

     protected void Index(){
       Response.Write("Index: Dynamically called!"); 
     }

} 
```

在视图页面上，我应该看到字符串“索引：动态调用！” 写入屏幕但我收到错误：

> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:26:40.777

默认`GetMethod`只返回`public`方法；添加`BindingFlags.NonPublic | BindingFlags.Instance`它应该可以工作。

```
var methodInfo = t.GetMethod(TargetMethod,
      BindingFlags.NonPublic | BindingFlags.Instance); 
```

或为公共***和***非公共工作：

```
var methodInfo = t.GetMethod(TargetMethod,
      BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance); 
```

另外：它是一个实例方法，你想在当前实例上调用它，所以：

```
methodInfo.Invoke(this, new object[] {}); 
```

注意`this`，不是`t`。

# jquery - 输入上的jquery更改/单击事件

> ID：15433625
> 
> 赞同：0
> 
> 时间：2013-03-15T13:24:21.843
> 
> 标签：jquery, click

我的事件处理程序有问题。

`<input id="menuSelection" type="text" value=""/>`

该字段由具有值的菜单触发。但我的问题是在 jquery 代码中的某个地方，以使这个工作更“活”

hierarchybreadcrumb 是菜单 ID。

```
$('#hierarchybreadcrumb').click(function(){
var text = $('#menuSelection').val();

$.get('exercise/xhrGetValue', {text:text}, function(o){

});
return false;
}); 
```

这个函数得到了结果，但我必须单击菜单一次才能让它工作。如何在第一次单击以发送获取方法时获得此信息？还是某些功能可以触发 $('#menuSelection') 上的更改？

感谢您的帮助，希望您能理解我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:31:28.190

我希望我正确地理解了你。输入不会触发更改事件，除非在获得焦点后失去焦点（在基本意义上）

为了让它“活”，添加一个包装器并使用 on

```
$('mywrapperselector').on('click','#hierarchybreadcrumb',function(){
    var text = $('#menuSelection').val();

    $.get('exercise/xhrGetValue', {text:text}, function(o){
    });
    return false;
}); 
```

最坏的情况下：

```
$(document).on('click','#hierarchybreadcrumb',function(){
    var text = $('#menuSelection').val();

    $.get('exercise/xhrGetValue', {text:text}, function(o){
    });
    return false;
}); 
```

现在，如果您想触发更改事件，只需执行以下操作：

```
$(document).on('click','#hierarchybreadcrumb',function(){
    var text = $('#menuSelection').val();

    $.get('exercise/xhrGetValue', {text:text}, function(o){
          $('#menuSelection').val('some new value').trigger('change');
          //assume you want it in here
    });
    return false;
}); 
```

# ruby-on-rails-3 - Rails 3 测试值是否存在于 unqiue has_many 中的最有效方法：通过关系

> ID：15433628
> 
> 赞同：0
> 
> 时间：2013-03-15T13:24:37.953
> 
> 标签：ruby-on-rails-3, has-many-through

这些是有问题的模型

```
SkillProgession
belongs_to :skill
belongs_to :user

User
has_many :skill_progressions
has_many :skills, :through => :skill_progressions

def has_progression?(skill)
   SkillProgression.where(:skill_id => skill.id, :user_id => id).first
end

Skill
has_many :skill_progressions
has_many :users, :through => :skill_progressions 
```

在应用程序中，一个用户可以拥有多个技能，一个技能可以与多个用户相关联。重要的是每个用户和技能之间只有**一个**关系，因为我们希望在更进一步的阶段存储附加信息（即“能力”或其他）。

我有一个索引来确保数据库不会允许重复的行（顺便说一句，这真的有必要吗？）

```
add_index :skill_progressions, [:skill_id, :user_id ], :unique => true, :name => 'by_skill_and_user' 
```

**当两个模型之外的事情发生时**（用户提交与当前技能相关的任务的答案），就会添加这种关系——在这个控制器代码中演示：

```
TaskController

def answer
   skill = Skill.find(params[:skill_id])
   @task = skill.tasks.find(params[:id])       
   unless current_user.has_progression?(skill)
     current_user.add_skill(skill, "placeholder")
   end
end 
```

现在，这似乎相当**hacky**，我想要一种让它更干净的方法。我想我可以在控制器中使用以下代码

```
skill_progression = SkillProgression.find_by_user_id(current_user.id)
current_user.skill_progressions.include? skill_progression 
```

但这会是更有效或更优雅的方式吗？

对此的任何帮助将不胜感激:-)即使我需要重新考虑我的整个设计方法，我也只是希望它优雅！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:28:52.910

您可以在 Skill_progression 模型中添加验证

```
validates :skill_id, uniqueness: { scope: :user_id } 
```

添加这将防止创建 2 个具有相同`user_id`和的技能进度记录`skill_id`。请注意，有很多方法可以解决这个问题。

# c# - Visual Studio 2010 exe 突然关闭

> ID：15433631
> 
> 赞同：-1
> 
> 时间：2013-03-15T13:24:41.923
> 
> 标签：c#, windows

我使用 c# 在 Visual Studio 2010 中创建了一个 exe。它在我的机器上运行良好，在几个桌面上它立即打开和关闭。请帮助我摆脱这个问题。

当 MyTool.exe 突然关闭时，用户可以执行 cmd.exe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:28:27.467

您需要受影响机器上的 Windows 应用程序/系统事件日志。他们（几乎可以肯定）会告诉您发生了哪个 .Net 异常。如果您将 PDB 文件与您的出版物捆绑在一起，您还将获得一个行号。

# sql - 保持两个数据库与时间戳/行版本同步

> ID：15433632
> 
> 赞同：1
> 
> 时间：2013-03-15T13:24:44.063
> 
> 标签：sql, timestamp, h2, data-synchronization

我有一个包含表 A 的主数据库和一个包含 A 的另一个副本的辅助数据库。每次我的应用程序启动时，它都会检查主数据库中表 A 的所有行并更新辅助数据库中 A 的行。

这种丑陋行为的需要是对遗留数据库的支持，但是每次启动时的这个操作开始变得非常昂贵。我发现时间戳（微软也称为行版本）可以存储行更新的时间。

因此，我的应用程序需要存储最后修改/插入的行的最后一个时间戳，并且在连续重新启动时只会从数据库中查询主数据库中修改的行（或插入的新行）。

这会大大加快速度，但是我将如何处理已删除的行？谢谢

**编辑**：我刚刚注意到我只以只读模式访问主数据库。因此，我不能在原始数据库中放置时间戳，也不能以任何方式插入排序触发器。

有没有什么方法我可以在不修改主数据库的情况下快速查看主数据库中的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:11:28.390

许多数据库引擎“开箱即用”地支持您正在构建的功能 - 这称为复制。

对于 H2，它不是一个开箱即用的功能 - 但有一个开源工具似乎将其作为一个名为 SymetricDS 的功能提供；根据[常见问题解答](http://www.symmetricds.org/docs/faq)，它适用于 H2。

我会考虑使用这个，而不是你自己的复制方案——它可能比你自己写的任何东西都更快、更健壮，除非你花很多时间在它上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:30:49.480

您需要一些方法来标记已删除的行以在从属端进行处理。这可能是使用触发器的一个很好的例子，当删除一行时，您可以将整行或可能只是 (table, id) 元组存储在另一个表中 - 称之为您的新`deleted_rows`表。

然后，当您的应用程序启动时，它会读取`deleted_rows`由您的触发器填充的表并将这些更改应用于从数据库。完成后一定要清除，`deleted_rows`这样您以后就不必费心尝试重新处理这些记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:59:52.033

（1）假设A表有主键，有一张表只记录B表中的那些主键。当应用程序启动时，检查B中不再在A中的行以获取删除的行。（反之亦然会给你新的/插入的行。）

(2) 行版本（结合上面的）确实是你想要的理想。如果做不到这一点，可能会使用一些校验和。MS SQL Server 作为`CHECKSUM()`函数，可以用来根据整行数据的内容产生一个哈希值。（虽然不能保证哈希值是唯一的，但它们应该足够了，尤其是在这里，因为您将同时检查哈希值和主键值，其中主键将用于哈希计算。）在应用程序启动时，计算表 A 中所有现有行的哈希值，并根据上面创建的跟踪表检查它们：

*   如果B中没有找到新集合中的主键，则为新行，插入主键和哈希值
*   如果在新集合中没有找到B中的主键，它是一个已删除的行，删除
*   如果在 B 和新集合中找到的主键和哈希值不同，则行已更新，相应处理
*   如果在 B 和新集合中找到主键和哈希值匹配，则行尚未更新

可悲的是，我怀疑实施上述方法可能不会为您节省那么多时间，因为表 A 仍需要全表扫描。

# ember.js - EmberJs - 如何为 EmberJs 创建插件

> ID：15433634
> 
> 赞同：0
> 
> 时间：2013-03-15T13:24:50.653
> 
> 标签：ember.js

这可能是一个广泛的问题，但我正在研究：Ember API 是否有一部分提供了一些创建扩展的工具？任何现有的插件都显示了一个很好的方法？

谢谢！，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:42:10.120

Ember.js 内置了很多功能来扩展功能，因为很多类都可以扩展，这是构建自己的控制器、路由和模型的标准方式；和现有的类，以及现有的实例都可以“重新打开”。[最好具体询问您想要实现的目标，以获得更具体的答案，以更好地实现它。]

此外，如果您想拥有一个全新的类来定义您的控制器或路由需要访问的行为，那么您可以使用一种机制将新类的实例注入其中，而无需将该实例作为全局变量。根据[http://livsey.org/blog/2013/02/10/integrating-pusher-with-ember/](http://livsey.org/blog/2013/02/10/integrating-pusher-with-ember/)中的代码，您可以通过以下方式定义类：

```
Ember.MyNewPlugin = Ember.Object.extend({
  init: function() {
    // Anything you need to do to initialise the object
  },
  myFunc: function(param) {
    // Anything you need to do with with "param"
  }
}); 
```

然后通过以下方式将实例注入控制器和路由：

```
Ember.Application.initializer({
  name: "mynewplugin",
  initialize: function(container, application) {
    // use the same instance everywhere in the app
    container.optionsForType('mynewplugin', { singleton: true });

    // register 'mynewplugin:main' as our MyNewPlugin object
    container.register('mynewplugin', 'main', Ember.MyNewPlugin);

    // inject the MyNewPlugin object into all controllers and routes
    container.typeInjection('controller', 'mynewplugin', 'mynewplugin:main');
    container.typeInjection('route', 'mynewplugin', 'mynewplugin:main');
  }
}); 
```

然后在控制器和路由中，您可以通过

```
var myNewPlugin = this.get('mynewplugin'); 
```

并通过以下方式调用其功能：

```
myNewPlugin("Some data"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:01:49.750

为 Ember 添加“扩展”没有什么特别需要的。您最有可能要做的就是引入新的`Controllers and Views`. 为此，您只需对 Ember 的核心类进行子类化。[这](https://github.com/emberjs/list-view/tree/master/packages/list-view/lib)是这样一个“扩展”的示例，它提供了可重用并提供大量价值的视图。

# actionscript-3 - currentTarget 取消链接文件方法：POST ...可能？？/

> ID：15433635
> 
> 赞同：0
> 
> 时间：2013-03-15T13:24:53.687
> 
> 标签：actionscript-3, flash

苦苦挣扎：想使用此代码从服务器中删除文件（jpg 或 png） - 而不是 a.jpg 应该是 currentTarget。可能吗？

```
function nDown_del(e): void
{

    e.currentTarget.filters = [Glow_del];
    //e.currentTarget.parent.removeChild(e.currentTarget);..............works
    mcPopup_del.cont_del.removeChild(e.currentTarget); ///...............works

    var proxy:URLLoader = new URLLoader();
    var vars:URLVariables=new URLVariables();
    vars.filethis ="a.jpg"; //e.currentTarget;
    req.data=vars;
    req.method= URLRequestMethod.POST;
    proxy.load(req); 
    var req:URLRequest=new URLRequest("http:....path to /php_file.php")
} 
```

php_file---->

```
$src = $_POST [ 'filethis' ];

unlink($src); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:40:41.420

`e.currentTarget`是一个显示对象而不是文件名，所以不，你不能将它传递给服务器端并期望 php 删除文件。

如果`e.currentTarget`是一个精灵，您可能需要扩展 Sprite 类并将您的文件名存储在其中，然后您可以从 访问它`currentTarget`并将其发送到服务器。查看以下代码段：

```
class MySprite extends Sprite
{
    public string filename:String = "a.jpg";
} 
```

在您的处理程序中：

```
function nDown_del(e): void
{
    var mySprite:MySprite = e.currentTarget as MySprite;

    if(!mySprite)
       return;

    mySprite.filters = [Glow_del];
    mcPopup_del.cont_del.removeChild(mySprite); ///...............works

    var proxy:URLLoader = new URLLoader();
    var vars:URLVariables=new URLVariables();

    vars.filethis = mySprite.filename;

    req.data=vars;
    req.method= URLRequestMethod.POST;
    var req:URLRequest=new URLRequest("http:....path to /php_file.php")        
    proxy.load(req); 

} 
```

# typo3 - 不同语言的起始页快捷方式

> ID：15433636
> 
> 赞同：0
> 
> 时间：2013-03-15T13:24:57.793
> 
> 标签：typo3, typoscript

我在弄清楚如何为我的网站的英文版设置不同的起始页时遇到问题。有没有办法让选择以英语查看网站的用户被重定向到默认语言起始页面的另一个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:14:25.760

试试下面的排版条件：

```
[globalVar = TSFE:id = 1] && [globalVar = GP:L = 1]
page.config >
page.config.additionalHeaders = Location: http://www.typo3.org
[global] 
```

其中 Id 应该是您的主页 id，L 等于英语的 L 值。位置等于所需的页面链接。

# c# - 具有 JSON 和会话的 WCF 服务？

> ID：15433647
> 
> 赞同：0
> 
> 时间：2013-03-15T13:25:21.250
> 
> 标签：c#, ios, json, wcf, session

是否可以让 WCF 服务使用 JSON 作为请求和响应格式来支持会话？

我需要保护我的应用程序，该应用程序当前正在与 JSON 格式的 WCF 服务器通信并在每次调用时进行身份验证。

我只想在登录时进行身份验证，然后在会话中处理其余请求，但是当我尝试创建这样的服务时，我需要将绑定更改为 wsHttpBinding 或 netTCPBinding，而在我这样做的那一刻，服务器不再接受我的 JSON 请求。但是，它确实接受来自我用 C# 编写的测试客户端的请求，只需使用“添加服务引用”工具即可。

使用 fiddler，我发现 C# 客户端通过大量臃肿的 XML 与我的服务通信。

这是我的 web.config：

```
<?xml version="1.0"?>

<configuration>

  <system.web>
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral,     PublicKeyToken=b77a5cxxxxxxe089"/>
      </assemblies>
    </compilation>
    <!--
          The <authentication> section enables configuration 
          of the security authentication mode used by 
          ASP.NET to identify an incoming user. 
        -->
    <authentication mode="Windows"/>
    <!--
           The <customErrors> section enables configuration 
           of what to do if/when an unhandled error occurs 
           during the execution of a request. Specifically, 
           it enables developers to configure html error pages 
           to be displayed in place of a error stack trace.

           <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
             <error statusCode="403" redirect="NoAccess.htm" />
             <error statusCode="404" redirect="FileNotFound.htm" />
           </customErrors>
        -->
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
  </system.web>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MobiServiceLibrary.MobiServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <!--<endpointBehaviors>
        <behavior name="MobiServiceLibrary.MobiServiceBehavior">
          <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json"     automaticFormatSelectionEnabled="true"/>
        </behavior>
      </endpointBehaviors>-->
    </behaviors>
    <services>
      <service behaviorConfiguration="MobiServiceLibrary.MobiServiceBehavior" name="MobiServiceLibrary.MobiService">
        <endpoint address="" binding="wsHttpBinding" contract="MobiServiceLibrary.IMobiService">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <!--<serviceHostingEnvironment multipleSiteBindingsEnabled="true"     minFreeMemoryPercentageToActivateService="1">
        </serviceHostingEnvironment>-->
  </system.serviceModel>
</configuration> 
```

我的登录“合同”：

```
[ServiceContract(SessionMode = SessionMode.Required)]
public partial interface IMobiService
{
    [OperationContract(IsInitiating=true)]
    [WebInvoke(Method = "POST", UriTemplate = "/Login", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat=WebMessageFormat.Json, RequestFormat=WebMessageFormat.Json)]
    userData login(string pUserName, string pPassword, string pDeviceType);
} 
```

我的登录“实施”：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession,AddressFilterMode=AddressFilterMode.Any)]
public partial class MobiService : IMobiService
{
    public userData login(string pUserName, string pPassword, string pDeviceType)
    {
        //Do Login
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:55:45.733

您是否将您的 wcf 服务标记为 scriptService？

此 WCFService 是托管在 IIS 服务器上还是仅托管在服务主机上。我不知道服务主机如何管理身份验证。我知道它适用于 IIS

从您的应用程序调用登录服务。如果成功，IIS 将创建一个会话 cookie，您可以从应用程序的响应中获取它。缓存该 cookie 并将其设置在您从应用程序发出的每个后续服务请求中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:29:30.793

我将尝试回答我自己的问题，如果我仍然错了，请随时指出。

在做了一些谷歌搜索之后，我发现了这个：[BasicHttpBinding vs WsHttpBinding vs WebHttpBinding](https://stackoverflow.com/questions/2650785/basichttpbinding-vs-wshttpbinding-vs-webhttpbinding?answertab=active#tab-top)

这就解释了为什么我在运行 JSON 格式的会话服务时遇到问题。似乎绑定是主要问题： **webHttpBinding**用于纯 RestFul 服务，并且与 JSON 配合良好，服务和客户端之间的请求和响应几乎没有包装，每次调用重新身份验证是受到推崇的。 **basicHttpBinding**和**wsHttpBinding**都用于为服务添加额外的功能和安全性（wsHttpBinding 只是更新并具有更多功能）。如果我理解正确的话，***basic-binding 和 ws-binding 都依赖于 SOAP+XML 来支持附加功能，这些功能之一是 session-support***。

因此，根据定义，basicHttpBinding 和 wsHttpBinding 服务不是 RESTful，并且 webHttpBinding 服务不支持会话。

所以我的选择是：

1.  坚持使用 webHttpBinding 并对每次调用进行身份验证（容易受到重放攻击，[http](http://en.wikipedia.org/wiki/Replay_attack) ://en.wikipedia.org/wiki/Replay_attack ）
2.  坚持使用 webHttpBinding 并使用数据库服务器端来实现我自己的“会话”版本。（最好通过实施非对称加密，例如 RSA）
3.  修改客户端支持SOAP+XML

我目前倾向于选择 2。

我仍然会感谢任何评论、建议和/或批评，任何可以帮助我更好地理解这一点的东西。

问候！

# vb.net - 动态过滤 DataGridView 控件

> ID：15433652
> 
> 赞同：0
> 
> 时间：2013-03-15T13:25:37.147
> 
> 标签：vb.net, winforms, datagridview, datatable

我有一个 datagridview 控件，它使用名为 m_DeletedItemsDT 的 DataTable 显示来自我的 SQL Server DB 的数据。

在网格上方，我有两个 datatimepicker 控件，因此用户可以选择开始日期和结束日期，然后单击 cmdFilterData 从数据库中获取过滤数据集并使用以下查询刷新网格：

```
"SELECT * FROM ReturnUnpaidData_Audit WHERE [AuditDateTime]<='" & Me.dtpEndDate.Value.ToString("yyyy-MM-dd") & "' AND [AuditDateTime]>='" & Me.dtpStartDate.Value.ToString("yyyy-MM-dd") & "'" 
```

我想要的是而不是再次往返数据库，以便在网格上或在称为**m_DeletedItemsDT**并在表单/类级别声明的数据表上进行过滤。

[我尝试使用在 WinForms 的 TextBox 中输入的文本来](http://www.codeproject.com/Tips/431281/Filter-DataGridView-with-the-text-entered-in-TextB) 查看Filter DataGridView，但这并不是我真正需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:34:00.457

我通过一些试验和错误解决了这个问题：

```
Dim dv As New System.Data.DataView

dv.Table = m_DeletedItemsDT
' "Server like '%" + textBox1.Text + "%'";
dv.RowFilter = "[AuditDateTime]<='" & Me.dtpEndDate.Value.ToString("yyyy-MM-dd") & "' AND [AuditDateTime]>='" & Me.dtpStartDate.Value.ToString("yyyy-MM-dd") & "'"
dgvDeletedRecords.DataSource = dv 
```

如果出现*cmdClearFilter*按钮，我只需执行以下操作：

```
 Dim dv As New System.Data.DataView

    Me.chkAUtoDates.Checked = False
    '        Call m_GetData()
    With dv
        .Table = m_DeletedItemsDT
        .RowFilter = ""
    End With

    dgvDeletedRecords.DataSource = dv 
```

菲利普

# unit-testing - RavenDB 目前嵌入式 API 不支持多个数据库

> ID：15433656
> 
> 赞同：2
> 
> 时间：2013-03-15T13:26:03.257
> 
> 标签：unit-testing, ravendb

在对我的应用程序进行单元测试时，我使用的是`EmbdeddedDocumentStore`在内存中运行的。

我的帐户注册控制器需要为租户创建一个新数据库。它在呼唤`EnsureDatabaseExists(newTenantId)`。

这会导致以下异常：

```
Multiple databases are not supported in the embedded API currently 
```

我该如何解决这个问题？我是否必须启动非嵌入式 RavenDB 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:10:43.783

假设您想在测试期间实际运行嵌入式 RavenDB 内存实例，并且您在生产中使用完整的 RavenDB 服务器，那么您只需添加一些代码来检查您使用的是哪种风格：

```
if (!(documentStore is EmbeddableDocumentStore))
  documentStore.DatabaseCommands.EnsureDatabaseExists(newTenantId); 
```

您还需要确保`newTenantId`在打开会话时没有尝试切换到数据库。您可能还需要一些条件逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:29:32.500

好吧，错误消息似乎很清楚......要么将您的代码更改为不需要多个数据库，要么使用非嵌入式存储或唠叨 RavenDB 人员以添加对这种情况的支持。

# google-app-engine - 在服务器方法中对 HttpServlet 进行 POST 调用，从字节数组生成 iText 文档并重定向客户端以下载它

> ID：15433658
> 
> 赞同：0
> 
> 时间：2013-03-15T13:26:07.087
> 
> 标签：google-app-engine, gwt, servlets, itext, rpc

基本上，我有一个必须生成大型 * *.pdf*报告的 Web 应用程序。它托管在 Google App Engine 上，我正在使用 Google Web Toolkit 来部署它。客户端调用服务器上的*getReport()*方法，读取所需的数据并生成报告。由于我无法在 Google App Engine 上写入文件，因此我将其写入内存并获取其字节，作为服务器方法的返回响应。

一旦文档可能导致大文件，我会在我的应用程序的较早时间从服务器获取报告字节，并且当客户端请求时，我需要将这些字节转换为 * *.pdf*文件并使其可用作下载。所以我需要另一个 servlet 来做到这一点。

我的远程方法实现如下。

```
@Override
    public byte[] getReport(String arg0, String arg1) {
        try {
            Document document = new Document();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            PdfWriter.getInstance(document, baos);
            document.open();
            /* Report generation */
            document.close();
            return baos.toByteArray();
        } catch (DocumentException e) {
            /* Exception handling */
            return null;
        }
    } 
```

我使用 GET 实现了一个 servlet，只是为了生成一个 * *.pdf*文件，如下所示，仅用于测试目的。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            response.setContentType("application/pdf");
            response.setHeader("Content-Disposition", "attachment; filename=report.pdf");
            try {
                Document document = new Document();
                PdfWriter.getInstance(document, response.getOutputStream());
                document.open();
                /* Test report generation */
                document.close();
            } catch (DocumentException e) {
                /* Exception handling */
            }
    } 
```

我已将它们分别配置为 /project/retrieve_report 和 /project/get_report，它们在浏览器中工作。当我执行该方法时，我有来自远程服务器的字节可用。

```
AsyncCallback<byte[]> callback = new AsyncCallback<byte[]>(){
                    @Override
                    public void onFailure(Throwable caught) {
                    }
                    @Override
                    public void onSuccess(byte[] result) {
                    }};
                reportService.getReport(arg0, arg1, callback); 
```

所以我现在真正需要并且找不到任何可靠的帮助是将客户端从*onSucess()*条件重定向到 servlet，将字节数组*结果*作为参数发送，将报告作为文件下载在浏览器中获取。我必须用*doPost()替换**doGet(* ) ，检索字节数组参数并使用它来构建文件，但我有点迷失在这里。

 *我对网络应用程序真的很陌生，所以任何帮助都将不胜感激。我一直在寻找这个，但我被困住了，我有一个关于这个毕业项目的简短日历。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:04:08.250

您也可以在 servlet 中编写或调用该`getReport`方法。从客户端，您只需要`window.open`直接使用方法调用该 servlet 即可进行 pdf 下载。

您必须调用初始 rpc，它在服务器端的会话变量中设置字节。

```
HttpServletRequest request = this.getThreadLocalRequest();      
HttpSession session = request.getSession(); 
session.setAttribute("PdfFileInByte", getReport()) 
```

然后每个 pdf 下载调用，您必须从会话中读取该文件并下载 pdf 文件。

```
PdfWriter.getInstance(document, session.getAttribute("PdfFileInByte")); 
```

然后，如果您想不再使用它，请将其从会话属性中删除。*

# cordova - 如何在 Ripple 模拟器中更改平台版本？

> ID：15433660
> 
> 赞同：0
> 
> 时间：2013-03-15T13:26:21.843
> 
> 标签：cordova, ripple

如何将 Ripple 模拟器中的平台从默认的 PhoneGap 2.0.0 更改为 PhoneGap 2.5.0？

我需要最新 Phonegap 版本的一些功能，但我找不到更改版本的方法。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:23:40.357

这有点误导。Ripple 实际上试图支持最新版本的 Cordova，所以版本应该真的是 2.x。我们正在努力修复我们管理平台版本的方式。

简短的回答，选择 2.0.0 版本应该适用于 2.5.0 应用程序。对困惑感到抱歉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-27T16:50:53.690

这是我使用的解决方法：

```
<script type="text/javascript" charset="utf-8">
  // Wait for Cordova to load
  document.addEventListener("deviceready", onDeviceReady, false);
  // Cordova is ready
  function onDeviceReady() {
    //check if inside ripple wrapper
    if (!document.getElementById('tinyhippos-injected'))
      navigator.splashscreen.hide();
  }
</script> 
```

tinyHippos 是创建 Ripple 的公司。2011年被黑莓收购。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:25:10.940

截至今天，Ripple 模拟器仅支持 PhoneGap v 2.0.0。您可能必须使用 iOS 模拟器进行测试

# javascript - 使用原型 js 进行元素选择

> ID：15433663
> 
> 赞同：1
> 
> 时间：2013-03-15T13:26:28.973
> 
> 标签：javascript, regex, dom, prototypejs

我有一个页面有一些问题，我有一个输入来获取产品 EAN 代码并将其与产品列表进行比较，并将输入框更新为 id`ean_xxxx`为`oldValue+1`. 我当前的代码如下所示：

```
function updateProductQty(ean) {
    var inputs = document.getElementsByTagName("input");
    for (var i = 0; i < inputs.length; i++) {
        if(inputs[i].id == "ean_" + ean)
        {
            inputs[i].value = Number(inputs[i].value) + 1;
        }
    }
} 
```

我在 EAN 代码的输入上使用此代码调用`onchange="updateProductQty(this.value);"`

现在的问题是带有 ID 的输入框`ean_xxxxx`位于表格行内，我还需要与之前的 TD-tag 中的值进行比较。我正在寻找的值被 HTML 包围，如下所示：

```
<td>
    <h5 class="title">....</h5>
    <div><strong>...</strong> A252502</div>
    <dl class="item-options">
        <dt>...</dt>
        <dd>..</dd>
    </dl>
</td>
.... more <td>-tags
<td> ... <input id="ean_xxxx" .... /> ... </td> 
```

如您所见，当我找到输入标签时，我永远不知道我在表中的哪一行，而我要添加检查的值是“A252502”。

该网站使用 Prototype 作为 js 框架，我对此没有任何经验，所以我主要使用基本的 JS，而 Google 让我无法获得 Prototype 解决方案。

如果我能得到 TD 内容，我可以去掉 -tag 和任何空格来获取值 - 但是如何搜索它呢？我什至无法回到 DOM 树中，因为我要么得到 EAN 代码，要么得到这个内部文章 ID，而不是两者。所以没有`inputs[i]`开始。任何帮助都非常感谢，无论是原型语法还是基本 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:31:07.283

我设法解决了它。就是这样：

```
function updateProductQty(ean) {
    var input = $("ean_" + ean);
    if (input) {
        input.value = Number(input.value) + 1;
    } else {
        var trs = $$('.order-tables tbody tr');
        for (var i = 0; i < trs.size(); i++) {
            if (trs[i].down('div')) {
                if (trs[i].down('div').innerHTML.split(" ")[1] == ean) {
                    trs[i].down('td').next(4).down('input').value = Number(trs[i].down('td').next(4).down('input').value) + 1;
                }
            }
        }
    }
} 
```

# matlab - 在matlab中留下一个交叉验证算法

> ID：15433666
> 
> 赞同：1
> 
> 时间：2013-03-15T13:26:36.710
> 
> 标签：matlab, loops

有人知道如何在 MATLAB 中执行 Leave one out 交叉验证吗？我需要 LOOCV 算法进行数据分类。所以例如。我有训练集的数量 10 ，我想从训练集中取出一个进行测试。所以，这就像 1 = 测试和 9 用于训练，然后再做一次，直到最后一次数据训练。

如果我们有这样的癌症和没有癌症的数据训练怎么样：

```
[C,F] = training('D:\cancer\',...
    'D:\nocancer\'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:47:11.187

这是我所做的：

```
// Initialize result matrix
Results = zeros(size(Datas,1),2);
// Validate classifier settings with leave-one-out procedure
for k=1:size(Datas,1)
    // Extract sample
    ind = Datas(k,:);
    // Copy the database
    Datas_mod = Datas;
    // Copy the classes vector
    Classes_mod = Classes;
    // Keep the sample real class
    Results(k,2) = Classes(k);
    // Remove sample from database
    Datas_mod(k,:) = [];
    // Remove sample from class vector
    Classes_mod(k)   = [];
    // Execute the classification algorithm
    [Individu,MxD(k)] = knn(ind(1,1:size(ind,2)),Datas_mod,Classes_mod,5,700);
    // Keep the class found by the classifier for the current sample
    Results(k,1) = Individu(1,size(Individu,2));
end

// Confusion matrix
CM = nan_confusionmat(Results(:,1),Results(:,2)) // Scilab function, find your own 
```

只需将 knn 替换为您使用的任何分类器即可。希望这有帮助。

# html - 产品无法添加所需的布局

> ID：15433667
> 
> 赞同：0
> 
> 时间：2013-03-15T13:26:40.697
> 
> 标签：html, magento-1.4

我想在我们的布局中添加产品请告诉我该怎么做而不是在我自己的布局中添加产品我希望你必须给我这个问题的正确答案我有代码但你告诉我一步一步的过程如何添加

```
<li>
                        <div class="prd-main">
                        <div class="relative">
                        <div class="off-div position-off"> 10% Off </div>
                        </div>
                            <img src="images/prd-small1.gif" alt="" />
                        </div>
                        <div class="prd-text">Amoy Bean Strip</div>
                        <div class="prd-detail">
                            <div class="prd-detail-left">
                                Size : 250g<br />Sau Tao<br />
                                £0.95
                            </div>
                            <div class="prd-detail-right">
                                Qty <input name="" type="text" value="1" class="qut" />
                                <input name="" type="button" value="ADD TO BASKET" class="btn-addtocart" />
                            </div>
                        </div>
                    </li> 
```

请给我回答这个问题我想添加这个布局产品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:25:18.303

可能通过

```
$_product = $this->getProduct(); 
```

但这取决于您为相关模板文件设置的块类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:29:41.607

听起来您是 HTML 新手。这是将列表项添加到 HTML 页面的一个很好的指南。[http://www.goodellgroup.com/tutorial/chapter6.html](http://www.goodellgroup.com/tutorial/chapter6.html)

# html - 如何使当前的网站响应？

> ID：15433674
> 
> 赞同：-6
> 
> 时间：2013-03-15T13:26:55.050
> 
> 标签：html, css, mobile, responsive-design

我想让我当前的网站响应。这是一个巨大的动态网站，我不想为移动设备制作单独的网站或更改`<Doctype>`or `<html>`. 如果通过手机访问网站，是否可以插入更改`<Doctype>`和标签的脚本？`<html>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:29:34.050

无需更改任何标签。这就是[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)的用途。

# java - 是否可以通过 JNI 将静态库链接到 Java？

> ID：15433684
> 
> 赞同：7
> 
> 时间：2013-03-15T13:27:29.730
> 
> 标签：java, java-native-interface, static-libraries

是否可以使用 JNI 构建 HelloWorld.lib 并将其加载到 Java 应用程序中？或者它只适用于共享库？

我在 JNI 文档上找不到明确的答案，没有提到“静态库”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:31:02.947

它需要是一个动态库。幸运的是，您可以从静态库构建动态库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-27T19:33:24.390

Java 8 支持静态链接的本地库 [http://openjdk.java.net/jeps/178](http://openjdk.java.net/jeps/178)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T13:31:13.730

要在运行时加载库，它必须是 dll（Windows）。如果你有一个静态库（lib）并且你必须通过 JNI 使用它，你必须创建一个包装 dll

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T00:03:39.273

您必须将其链接到 JVM，而您没有办法做到这一点。这就是为什么 JNI 是用共享库而不是静态库来定义的。

# java - 写入 TIFF：非法字节顺序

> ID：15433688
> 
> 赞同：0
> 
> 时间：2013-03-15T13:27:43.823
> 
> 标签：java, image, tiff, endianness

我一直在尝试从许多 BufferedImage 格式的较小图像中绘制一个巨大的图像文件（使用一个大的 BufferedImage 占用的内存比我所拥有的更多），现在我试图通过 ImageWriter 类的 replacePixels-Function 来做到这一点。

然而; 我确实遇到了一个令人费解的错误，即使是广泛的谷歌搜索也无法解决，所以我希望这里有人能告诉我我做错了什么：

```
javax.imageio.IIOException: Illegal byte order
at com.sun.media.imageioimpl.plugins.tiff.TIFFImageWriter.locateIFD(TIFFImageWriter.java:2813)
at com.sun.media.imageioimpl.plugins.tiff.TIFFImageWriter.readIFD(TIFFImageWriter.java:3076)
at com.sun.media.imageioimpl.plugins.tiff.TIFFImageWriter.canReplacePixels(TIFFImageWriter.java:3099)
at drawingTiles.WorldMapMaker$1.writeImg(WorldMapMaker.java:90)
at drawingTiles.WorldMapMaker$1.run(WorldMapMaker.java:148)
at java.lang.Thread.run(Unknown Source)
javax.imageio.IIOException: Illegal byte order
at com.sun.media.imageioimpl.plugins.tiff.TIFFImageWriter.locateIFD(TIFFImageWriter.java:2813)
at com.sun.media.imageioimpl.plugins.tiff.TIFFImageWriter.readIFD(TIFFImageWriter.java:3076)
at com.sun.media.imageioimpl.plugins.tiff.TIFFImageWriter.prepareReplacePixels(TIFFImageWriter.java:3141)
at drawingTiles.WorldMapMaker$1.writeImg(WorldMapMaker.java:104)
at drawingTiles.WorldMapMaker$1.run(WorldMapMaker.java:148)
at java.lang.Thread.run(Unknown Source) 
```

我确实知道字节顺序是什么，但我不知道字节顺序怎么会是非法的。这是我正在使用的功能：

```
public void writeImg (String path, int startx, int starty, BufferedImage image){
            File output = new File(path);
            ImageOutputStream ios = null;
            try {
                ios = ImageIO.createImageOutputStream(output);
            } catch (IOException e){
                e.printStackTrace();
            }

            Iterator<ImageWriter> iter = ImageIO.getImageWritersByFormatName("TIF");
            ImageWriter writer = (ImageWriter)iter.next();
            writer.setOutput(ios);

            TIFFImageWriteParam writeParam = new TIFFImageWriteParam(Locale.ENGLISH);
            writeParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);

            try{
                if(writer.canReplacePixels(0)){ // LINE 90
                    System.out.println("True");
                }else{
                    System.out.println("False");
                }
            }catch (IOException e) {
                e.printStackTrace();
            }

            Point destinationOffset = new Point(startx,starty);
            writeParam.setDestinationOffset(destinationOffset);

            try {
                writer.prepareReplacePixels(0, new Rectangle(0, 0, image.getWidth(), image.getHeight())); // LINE 104
                writer.replacePixels(image, writeParam);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:37:09.763

如果你看这里，你可以看到[TiffImageWriter](http://www.java2s.com/Open-Source/Java/6.0-JDK-Modules/Java-Advanced-Imaging/com/sun/media/imageioimpl/plugins/tiff/TIFFImageWriter.java.htm)的源代码。

我在以下代码中看到了这段代码`locateIfd()`：

```
 long startPos = stream.getStreamPosition();

  stream.seek(headerPosition);
  int byteOrder = stream.readUnsignedShort();
  if (byteOrder == 0x4d4d) {
      stream.setByteOrder(ByteOrder.BIG_ENDIAN);
  } else if (byteOrder == 0x4949) {
      stream.setByteOrder(ByteOrder.LITTLE_ENDIAN);
  } else {
      stream.seek(startPos);
      throw new IIOException("Illegal byte order");
  } 
```

当在该流上调用 setOutput() 时，会设置一个名为 headerPosition 的成员，它是流在该点的当前位置。此代码回溯到该点并查找 Intel 或 Motorola 字节顺序，如果找到其他任何内容则抛出。我猜当 locateIfd 被调用时，您的流在错误的位置。

顺便说一句，图像有多大？我问是因为我在一家拥有Java[图像处理库](http://www.atalasoft.com/products/joltimage)的公司工作，我们的图像模型能够从更复杂的内存模型构建图像而不是连续的，我可以想象制作一个由图像列表组成的复合内存模型存在于虚拟化它们的其他地方。我认为我们目前被迫使用内置的 Tiff 编解码器，我们会和你记忆中的一样，但如果你能忍受 Png，这会奏效。

# web-services - 如何在 RESTXpress 中创建与 DB2 的连接？

> ID：15433692
> 
> 赞同：2
> 
> 时间：2013-03-15T13:27:50.570
> 
> 标签：web-services, rest, db2

我正在使用 RESTXpress 引擎来创建 REST 服务。它适用于 Oracle，但我对 db2 数据库有疑问，因为 db2 除了`db2jcc.jar`驱动程序之外，还需要许可证 jar 文件`db2jcc_license_c.jar`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:29:52.020

您可以将所有类重新打包到一个 jar 文件中。

# c - linux c中的sendmsg（）调用错误

> ID：15433696
> 
> 赞同：2
> 
> 时间：2013-03-15T13:27:51.480
> 
> 标签：c, linux, sockets, udp, errno

我在 UDP 套接字编程中遇到了一些问题。我想使用 sendmsg() 和 recvmsg() API 能够在客户端和服务器之间进行通信。客户端代码返回错误号 105 {ENOBUFS}。我不知道它显示此错误的原因是什么，因为根据这些 API 的描述，它的书面

```
ENOBUFS

The  output  queue for a network interface was full.  This generally indicates that the interface has stopped sending, but may be caused by transient congestion.  (Normally, this does  not  occur in Linux. Packets are just silently dropped when a device queue overflows.) 
```

所以，就像这个错误并不常见，那么我也面临着这个。如果有人遇到过类似的问题，请分享一些信息。我正在寻找解决方案的提示，而不是现成的解决方案。另外，请不要替代 API。需要以下代码才能工作。

### 服务器代码

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <string.h>
#include <errno.h>

#define PORT            32000
#define BUFSIZE         8192

int main()
{
    int sockfd,n;
    struct sockaddr_in servaddr,cliaddr;
    socklen_t len;
    char mesg[1000];
    char message_control_array[BUFSIZE];
    int count = 1;
    struct iovec io;
    int ret = 0;
    int ttlval = 255;

    /* Messageheader structure to pass to recvmsg call*/
    struct msghdr header;

    /* This structure will contain the individual ancillary messages*/
    struct cmsghdr *cmsg;

    /* Filling up the control data related variables.*/
    header.msg_name         = &servaddr;
    header.msg_namelen      = sizeof (struct sockaddr_in);
    header.msg_control      = message_control_array;
    header.msg_controllen   = BUFSIZE;
    header.msg_iov          = &io;
    header.msg_iov->iov_base= mesg;
    header.msg_iov->iov_len = 1000;
    header.msg_iovlen       = 1;

    /*create UDP socket*/
    if ((sockfd=socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP)) < 0)
    {
            printf("Error 1: Socket\n");
            exit(1);
    }

    ret = setsockopt (sockfd, IPPROTO_IP, IP_TTL, &ttlval, sizeof(ttlval));
    if ( ret == -1)
    {
            printf("setsockopt failing for IP_TTL, errno %d\n", errno);
    }

    bzero(&servaddr,sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_addr.s_addr=htonl(INADDR_ANY);
    servaddr.sin_port=htons(PORT);

    if ((bind(sockfd,(struct sockaddr *)&servaddr,sizeof(servaddr))) == -1)
    {
            printf("Error 2:bind\n");
            exit(1);
    }
    while (1)
{
  //len = sizeof(cliaddr);
  //if ((n = recvfrom(sockfd,mesg,1000,0,(struct sockaddr *)&cliaddr,&len)) == -1)
  if ((n = recvmsg(sockfd,&header, 0)) == -1)
    {
            printf("recvmsg error!!!!!!!!!!!!!\n\n");
    }
    /*Send the received packet back to the sender [client]*/
    //sendto(sockfd,mesg,n,0,(struct sockaddr *)&cliaddr,sizeof(cliaddr));

    printf("-------------------------------------------------------\n");
    mesg[n] = 0;
    printf("Received the following:\n");
    printf("%s\n",mesg);
    printf("The info from the msghdr structure\n");
    printf("The source address is %s\n", inet_ntoa(servaddr.sin_addr.s_addr));
    printf("The source address length is %d\n", (int)header.msg_namelen);
    for (cmsg = CMSG_FIRSTHDR(&header); cmsg != NULL ; cmsg = CMSG_NXTHDR(&header, cmsg))
    {
            printf("number %d cmsg structure\n", count++);
            //if
    }
  printf("-------------------------------------------------------\n");
}
return 0;
} 
```

### 客户代码

```
/* Sample UDP client */

#include <sys/socket.h>
#include <netinet/in.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <arpa/inet.h>
#include <errno.h>
#include <netinet/in.h>

#define PORT 3200
#define BUFSIZE 512

int main(int argc, char**argv)
{
    int sockfd,n;
    struct sockaddr_in servaddr,cliaddr;
    char sendline[BUFSIZE];
    char recvline[BUFSIZE];
    int ret = 0;
    int ttlval = 255;
            /*required for sending ancillary data using sendmsg() call*/
            struct msghdr header;
    struct cmsghdr *cmsg;
    struct iovec io;

    if (argc != 2)
    {
            printf("usage:  %s <Server IP address>\n", argv[0]);
            exit(1);
    }

    sockfd=socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP);

    ret = setsockopt (sockfd, IPPROTO_IP, IP_TTL, &ttlval, sizeof (ttlval));
    if (ret == -1)
    {
            printf("setsockopt failing for IP_TTL , errno %d\n", errno);
    }

    bzero(&servaddr,sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_addr.s_addr=inet_addr(argv[1]);
    servaddr.sin_port=htons(PORT);

    header.msg_name         = &servaddr;
    header.msg_namelen      = sizeof (struct sockaddr_in);
    header.msg_iov          = &io;
    header.msg_iov->iov_base= sendline;
    header.msg_iov->iov_len = BUFSIZE;
    header.msg_iovlen       = 1;

    while (1)
    {
 tryagain:printf("Enter the string to be sent\n");
     //scanf("%s", sendline);
     if ((fgets(sendline, 100, stdin)) == NULL)
     {
             printf("error in reading from stdin\n\n");
             goto tryagain;
     }
    header.msg_iov->iov_len = strlen(sendline) - 1;
    printf("kddkdd %d %d %s\n", sizeof(sendline), strlen(sendline), sendline);
     //sendto(sockfd,sendline,strlen(sendline),0,(struct sockaddr *)&servaddr,sizeof(servaddr));
     if ((sendmsg(sockfd, &header, 0)) == -1)
     {
             printf("Error in sendmsg,\t [errno = %d]\n", errno);
     }
#if 0
     if ((n=recvfrom(sockfd,recvline,10000,0,NULL,NULL)) == -1)
     {
             printf("recvfrom error\n");
             exit(1);
     }
     recvline[n]=0;
     fputs(recvline,stdout);
     printf("packet sent\n\n");
#endif
    }
    return 0;
} 
```

输出就像

```
[root@localhost udp]# ./client 30.5.42.194
Enter the string to be sent
sourav
Error in sendmsg,        [errno = 105]
Enter the string to be sent 
```

*我正在使用 RHEL (Red Hat 4.1.2-48) 和内核 2.6.18-194.el5 具有 gcc 版本 4.1.2*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:14:51.490

您没有正确初始化 msghdr 结构。您需要在声明时执行此操作：

```
struct msghdr header = { 0 }; 
```

或以后：

```
header.msg_controllen = 0;
header.msg_control = NULL;
header.msg_flags = 0; 
```

否则 msg_controllen 内容是垃圾。

# javascript - JavaScript 获取 URL 值并发布到 iFrames

> ID：15433704
> 
> 赞同：1
> 
> 时间：2013-03-15T13:28:02.950
> 
> 标签：javascript, forms, get

我正在尝试复制此站点的脚本功能：[http ://responsinator.com/](http://responsinator.com/)

这个想法是从表单中获取 URL 并插入一个或多个 iFrame。

对不起，我有点菜鸟。我认为这很简单，但被卡住了。这是我目前所处的位置：

[http://jsfiddle.net/xtpD5/](http://jsfiddle.net/xtpD5/)

```
 function handleButtonEnterClick() {
    var textbox_value = document.getElementById("url_textbox").value;
    document.getElementById('myUrl').value = window.location;
    var form = document.getElementById('myForm');
    form.action = textbox_value;
    form.submit();
}

<div id="container">
<form action="" method="post" id="myForm">
    <p>Enter URL:</p>
    <input type="hidden" id="myUrl" name="url" />
    <input type="text" id="url_textbox" name="url_textbox" />
    <input type="button" id="button_enter" name="button_enter" 
           value="enter" onclick="handleButtonEnter" />
</form>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:43:56.103

像这样？[http://jsfiddle.net/xtpD5/1/](http://jsfiddle.net/xtpD5/1/)

您可以通过 target 属性将表单提交到 iframe。它在 iframe 中打开它

```
function handleClick() {
    var url = document.getElementById('url_textbox').value;
    document.getElementById('myForm').action = url;
    return true;
}

<div id="container">
    <form action="" method="post" id="myForm" target='iframe'>
        <p>Enter URL:</p>
        <input type="hidden" id="myUrl" name="url" />
        <input type="text" id="url_textbox" name="url_textbox" />
        <input id="button_enter" name="button_enter" value="enter" type="submit" />
    </form>
</div>
<iframe name="iframe"></iframe> 
```

# python - 关键字参数/字典

> ID：15433705
> 
> 赞同：0
> 
> 时间：2013-03-15T13:28:06.147
> 
> 标签：python, django

在 Django 应用程序中，我有一个函数，它接受请求并解析返回结果的参数字典。

例如，像这样：

```
def parse_event_parameters(request):
    """
    Parse the parameters for a given event
    from a request and return the result
    as a dictionary of strings.
    """
    try:
        request_params = {
            'event_id': id,
            'start_date': request.POST[id + '_start_date'],
            'end_date': request.POST[id + '_end_date'],
            'shift_type': request.POST[id + '_shift_type'],
            'rec_type': request.POST[id + '_rec_type'],
            'event_length': request.POST[id + '_event_length'],
            'event_pid': request.POST[id + '_event_pid'],
        }
    except KeyError, err:
        raise err
    return request_params 
```

然后，我将此字典传递给我的模型中的一个方法，以创建或更新相关事件。

```
e.update(**parameters) 
```

在那里，更新方法调用一个超类，如下所示：

```
 super(Event, self).update(event_id, start_date,
           end_date, shift_type, rec_type,
           event_length, event_pid, employee_id) 
```

超类基本上验证请求的值并将它们保存到模型中。现在，我需要在我的模型中添加另一列，并且需要更新每个方法。

我对 Django 很陌生，但这似乎不是最干净的方法。

有没有更优雅的方法来解决这个问题？我应该通过每种方法保留字典而不是打开包装吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:41:10.770

听起来你应该使用 ModelForms：

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)

通常，每当您处理请求数据（POST 或 GET 或其他）时，您应该考虑使用表单来验证它。一个常见的误解是 Django 表单仅用于显示实际的 HTML 表单，而实际上它是一个可以在许多情况下工作的数据验证 API。ModelForm 更进一步，将 Django 表单绑定到模型类，并负责创建或更新模型（当您调用`save()`表单时）。

然后，一旦您了解了 ModelForms，请考虑查看 Django 用于创建和更新模型的通用视图：

[https://docs.djangoproject.com/en/1.5/topics/class-based-views/generic-editing/](https://docs.djangoproject.com/en/1.5/topics/class-based-views/generic-editing/)

# html - 为什么我的 jQuery 向下钻取菜单不起作用？

> ID：15433707
> 
> 赞同：0
> 
> 时间：2013-03-15T13:28:20.390
> 
> 标签：html, asp.net-mvc-4, jquery-widgets

我正在尝试将 jQuery 向下钻取菜单添加到我的 Web 应用程序中。我已按照此处的说明进行操作[，并从](http://www.designchemical.com/lab/jquery-drill-down-menu-plugin/examples/)[此处](http://www.designchemical.com/lab/jquery-plugins/jquery-drill-down-menu-plugin/index.html#)复制了源代码。当我将所有内容添加到我的项目并将代码添加到我的 _layout.cshtml 站点时，向下钻取菜单不起作用，该页面看起来像嵌套无序列表的常规树结构。

jQuery 这是在 head 标签中：

```
 <script src="@Url.Content("~/Scripts/jquery.cookie.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.dcdrilldown.1.2.min.js")"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
            $('#drilldown').dcDrilldown({
                speed: 'slow',
                saveState: true,
                showCount: false,
                linkType: 'breadcrumb'
            });
        });

    </script> 
```

html:

```
 <ul class="pull-left span1" id="drilldown">
            <li><a href="#">Record Check</a></li>
            <li><a href="#">Reports/Statistics</a></li>
            <ul>
                <li><a href="#">USN</a></li>
                <ul>
                    <li><a href="#">Aclohol Incidents and Status Reports</a></li>
                    <ul>
                        <li><a href="#">Alcohol Incidents(By FY)</a></li>
                        <ul>
                            <li><a href="#">Fiscal Year</a></li>
                            <li><a href="#">Category</a></li>
                        </ul>
                        <li><a href="#">Alcohol Status Reports</a></li>
                    </ul>
                    <li><a href="#">Urinalysis Reports</a></li>
                    <li><a href="#">DAAR Listing</a></li>
                    <li><a href="#">Laboratory Positive Status Report</a></li>
                    <li><a href="#">Screening Listing</a></li>
                    <li><a href="#">Group Profile</a></li>
                    <ul>
                        <li><a href="#">With Details</a></li>
                        <li><a href="#">Without Details</a></li>
                    </ul>
                    <li><a href="#">Unit Profile</a></li>
                    <li><a href="#">ADMITS User and UIC Listings</a></li>
                    <ul>
                        <li><a href="#">ADMITS User Listing</a></li>
                        <li><a href="#">UIC Listing</a></li>
                    </ul>
                </ul>
                <li><a href="#">USMC</a></li>
                <li><a href="#">STAFF</a></li>
                <li><a href="#">DAPA/UPC</a></li>
            </ul>
            <li><a href="#">DAAR Data</a></li>
            <li><a href="#">Training</a></li>
            <li><a href="#">Edit Unit</a></li>
            <li><a href="#">Screening</a></li>
            <li><a href="#">Facility</a></li>
            <li><a href="#">Treatment</a></li>
            <li><a href="#">Waiver Data</a></li>
            <li><a href="#">New Report - Test</a></li>
            <li><a href="#">UIC Search</a></li>
            <li><a href="#">Spice</a></li>
            <li><a href="#">Breathalyzer</a></li>
        </ul> 
```

关于为什么我的向下钻取菜单没有出现的任何想法？

**更新**

我应该提到这是一个 MVC4 应用程序，因此需要两组双引号。

**更新 2**

根据要求，我的页面源代码如下：

```
<head>
    <title>Home Page</title>
    <link href="/Content/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/Content/base-admin.css" rel="stylesheet" type="text/css" />
    <link href="/Content/base-admin-responsive.css" rel="stylesheet" type="text/css" />
    <link href="/Content/fontAwesome/font-awesome.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.9.1.min.js"></script>
    <script src="/Scripts/bootstrap.js"></script>
    <script src="/Scripts/excanvas.min.js"></script>
    <script src="/Scripts/jquery.cookie.js"></script>
    <script runat="server" src="/Scripts/jquery.dcdrilldown.1.2.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#drilldown').dcDrilldown({
                speed: 'slow',
                saveState: true,
                showCount: false,
                linkType: 'breadcrumb'
            });
        });

    </script>
</head>

    <div class="pull-left span1">
        <ul id="drilldown">
            <li><a href="#">Record Check</a></li>
            <li><a href="#">Reports/Statistics</a></li>
            <ul>
                <li><a href="#">USN</a></li>
                <ul>
                    <li><a href="#">Aclohol Incidents and Status Reports</a></li>
                    <ul>
                        <li><a href="#">Alcohol Incidents(By FY)</a></li>
                        <ul>
                            <li><a href="#">Fiscal Year</a></li>
                            <li><a href="#">Category</a></li>
                        </ul>
                        <li><a href="#">Alcohol Status Reports</a></li>
                    </ul>
                    <li><a href="#">Urinalysis Reports</a></li>
                    <li><a href="#">DAAR Listing</a></li>
                    <li><a href="#">Laboratory Positive Status Report</a></li>
                    <li><a href="#">Screening Listing</a></li>
                    <li><a href="#">Group Profile</a></li>
                    <ul>
                        <li><a href="#">With Details</a></li>
                        <li><a href="#">Without Details</a></li>
                    </ul>
                    <li><a href="#">Unit Profile</a></li>
                    <li><a href="#">ADMITS User and UIC Listings</a></li>
                    <ul>
                        <li><a href="#">ADMITS User Listing</a></li>
                        <li><a href="#">UIC Listing</a></li>
                    </ul>
                </ul>
                <li><a href="#">USMC</a></li>
                <li><a href="#">STAFF</a></li>
                <li><a href="#">DAPA/UPC</a></li>
            </ul>
            <li><a href="#">DAAR Data</a></li>
            <li><a href="#">Training</a></li>
            <li><a href="#">Edit Unit</a></li>
            <li><a href="#">Screening</a></li>
            <li><a href="#">Facility</a></li>
            <li><a href="#">Treatment</a></li>
            <li><a href="#">Waiver Data</a></li>
            <li><a href="#">New Report - Test</a></li>
            <li><a href="#">UIC Search</a></li>
            <li><a href="#">Spice</a></li>
            <li><a href="#">Breathalyzer</a></li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:32:28.200

改变

```
<script src="@Url.Content("~/Scripts/jquery.cookie.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.dcdrilldown.1.2.min.js")"></script> 
```

到

```
<script src="@Url.Content('~/Scripts/jquery.cookie.js')"></script>
<script src="@Url.Content('~/Scripts/jquery.dcdrilldown.1.2.min.js')"></script> 
```

URL 周围的额外双引号从`src`属性引用字符串中分离出来。

* * *

***更新：***

好的，我想我看到了问题所在。您的 HTML 无效。元素的唯一直接子`<ul>`元素必须是`<li>`元素。您的嵌套`<ul>`元素需要***在***`<li>`标签内。看一看：

```
<!-- wrong -->
<ul>
    <li></li>
    <li></li>
    <ul>
        ...
    </ul>
</ul>

<!-- correct -->
<ul>
    <li></li>
    <li>
        <ul>
            ...
        </ul>
    </li>
</ul> 
```

试试这个：

```
<ul id="drilldown">
    <li><a href="#">Record Check</a></li>
    <li><a href="#">Reports/Statistics</a>
        <ul>
            <li><a href="#">USN</a>
                <ul>
                    <li><a href="#">Aclohol Incidents and Status Reports</a>
                        <ul>
                            <li><a href="#">Alcohol Incidents(By FY)</a>
                                <ul>
                                    <li><a href="#">Fiscal Year</a></li>
                                    <li><a href="#">Category</a></li>
                                </ul>
                            </li>
                            <li><a href="#">Alcohol Status Reports</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Urinalysis Reports</a></li>
                    <li><a href="#">DAAR Listing</a></li>
                    <li><a href="#">Laboratory Positive Status Report</a></li>
                    <li><a href="#">Screening Listing</a></li>
                    <li><a href="#">Group Profile</a>
                        <ul>
                            <li><a href="#">With Details</a></li>
                            <li><a href="#">Without Details</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Unit Profile</a></li>
                    <li><a href="#">ADMITS User and UIC Listings</a>
                        <ul>
                            <li><a href="#">ADMITS User Listing</a></li>
                            <li><a href="#">UIC Listing</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><a href="#">USMC</a></li>
            <li><a href="#">STAFF</a></li>
            <li><a href="#">DAPA/UPC</a></li>
        </ul>
    </li>
    <li><a href="#">DAAR Data</a></li>
    <li><a href="#">Training</a></li>
    <li><a href="#">Edit Unit</a></li>
    <li><a href="#">Screening</a></li>
    <li><a href="#">Facility</a></li>
    <li><a href="#">Treatment</a></li>
    <li><a href="#">Waiver Data</a></li>
    <li><a href="#">New Report - Test</a></li>
    <li><a href="#">UIC Search</a></li>
    <li><a href="#">Spice</a></li>
    <li><a href="#">Breathalyzer</a></li>
</ul> 
```

# android - JellyBean 上的吐司很小

> ID：15433715
> 
> 赞同：-2
> 
> 时间：2013-03-15T13:28:43.817
> 
> 标签：android, toast

我知道问题与同[一个问题相同](https://stackoverflow.com/questions/8658059/android-toast-notification-is-too-small-in-ice-cream-sandwich/9236009#9236009)。但是我的问题已添加到它@Nick 给出的答案可能是正确的我只是想知道在哪里添加它`manifest`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:38:04.980

在您的添加支持屏幕代码`manifest.xml`

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.XXX.XXXX"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" />

// Paste support screen code here.
<supports-screens android:resizeable="true"
              android:smallScreens="true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:anyDensity="true"/>

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:32:14.430

如果你看一下[文档](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)，你必须把它直接放在下面`<manifest>`

> 包含在： `<manifest>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:28:01.107

我得到了它。我使用的是不支持 {supports-screen} 的 Android 1.5。这在 Android 1.6 以上受支持我做到了，因此吐司自动以正常大小显示。谢谢大家的回答。感谢 MurliGaneshan 的代码让我知道

# windows-8 - 在 Windows 8 应用程序中使用 obj + mtl blender 文件

> ID：15433719
> 
> 赞同：0
> 
> 时间：2013-03-15T13:29:09.870
> 
> 标签：windows-8, 3d, blender

我正在寻找一种在 Windows 8（适用于 Windows Store）应用程序中使用 Blender 生成的 Obj（+ mtl）文件的方法。

我看过 Visual Studio 3D Starter Kit 但它似乎只适用于没有 mtl 的 obj 文件。

# python - 生成没有根元素的格式错误的“XML”

> ID：15433722
> 
> 赞同：0
> 
> 时间：2013-03-15T13:29:11.133
> 
> 标签：python, xml, elementtree

我正在使用 Python 库 Elementtree 来解析 XML。我正在编辑那个 XML，现在我想解决一个问题：我需要生成没有根元素的 XML。

从输出：

```
<MyRoot>
    <Type>
      something...
    </Type>
    <Type>
      ...
    </Type>
        <Type>
          ...
        </Type>
</MyRoot> 
```

例如，它必须生成这个 XML：

```
<Type>
  something...
</Type>
<Type>
  ...
</Type>
<Type>
  ...
</Type> 
```

你能帮助我吗？我希望你明白我需要什么。

我需要另一个软件，不幸的是它只处理没有根元素的 XML，我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:40:33.973

您不会找到一个简单的调用来执行此操作，因为它是“坏”的 XML。

我能想到的有两种方法：

1.  渲染到字符串`<MyRoot>`并使用字符串操作将其剥离
2.  将 的所有子级渲染`<MyRoot>`为字符串并自己连接它们。

在两个不理想的选项中，我个人更喜欢第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:41:24.430

只需遍历您的元素，`ElementTree.tostring`在每个元素上调用函数，然后连接生成的字符串。

# c# - 更改 DataGridView 中列中的字体大小

> ID：15433731
> 
> 赞同：5
> 
> 时间：2013-03-15T13:29:37.643
> 
> 标签：c#, winforms

我在需要更改字体大小和样式的 DataGridView（WinForm 应用程序）中有一个列。从这里的文章：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.font.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.font.aspx)，我认为下面的代码会得到我想要的结果（我是通过首先更改样式进行测试）：

```
this.dataGridViewMain.Columns[3].DefaultCellStyle.Font = new Font(dataGridViewMain.DefaultCellStyle.Font, FontStyle.Italic); 
```

但是代码并没有改变任何东西。我还尝试在`RowPostPaint`事件处理程序上添加代码，但仍然无法正常工作。我知道程序使用的字体是在`DataGridView.RowsDefaultCellStyle`属性上设置的，但我认为在`RowPostPaint`事件中放置代码会覆盖它。以下是`RowPostPaint`事件的代码：

```
void dataGridViewMain_RowPostPaint(object sender, DataGridViewRowPostPaintEventArgs e)
{
    this.dataGridViewMain.Columns[3].DefaultCellStyle.BackColor = Color.Gray;
    foreach (DataGridViewRow row in this.dataGridViewMain.Rows)
    {
        int daysInShop = Convert.ToInt32(row.Cells["Days in the shop"].Value);
        if (daysInShop > 4)
        {
            row.DefaultCellStyle.BackColor = Color.Red;
            row.DefaultCellStyle.ForeColor = Color.White;
        }
        else if (daysInShop > 2)
        {
            row.DefaultCellStyle.BackColor = Color.Yellow;
        }
        else
        {
            row.DefaultCellStyle.BackColor = Color.YellowGreen;
        }
        row.Height = 35;
    }

    this.dataGridViewMain.CurrentCell = null; // no row is selected when DGV is displayed
} 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:08:06.673

好的，这就是我发现的。下面`InitializeComponent()`有这一行：

```
dataGridViewCellStyle3.Font = new System.Drawing.Font("Verdana", 14.25F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0))); 
```

当我注释掉该行时，将其中的列斜体化的代码可以`RowPostPaint`正常工作。然后我在下面添加了代码，`RowPostPaint`以便其他列字体为粗体且尺寸更小。我仍然不太确定为什么`DataGridView.Columns[colNumber].DefaultCellStyle.Font`不覆盖`dataGridViewCellStyle3`

```
 int colCount = dataGridViewMain.ColumnCount;

 for (int i = 0; i < colCount; i++)
 {
     if(i != 3)
         this.dataGridViewMain.Columns[i].DefaultCellStyle.Font = new System.Drawing.Font("Verdana", 14F, FontStyle.Bold);
     else
         this.dataGridViewMain.Columns[3].DefaultCellStyle.Font = new System.Drawing.Font("Verdana", 25F, FontStyle.Bold);
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T13:34:04.043

字体大小是只读的，因此您需要制作新字体并设置 yourDataGridView.Font = new Font(name,size,style) 更多信息：http: [//msdn.microsoft.com/en-us/library/ system.drawing.font.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.font.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-21T08:07:34.013

尝试这个：

```
foreach (DataGridViewRow dr in dataGridView.Rows)
{
     if ( // your condition here )
     {
        dr.Cells[0].Style.Font = new Font( dataGridView.Font, FontStyle.Underline);
        dr.Cells[0].Style.ForeColor = Color.White;      
        dr.Cells[0].Style.BackColor = Color.Red;
     }
     else
     {     
      // It also may be a good idea to restore original settings
      // for the non selected rows just in case you re run this routine               
        dr.Cells[0].Style.BackColor = dataGridView.Columns[0].DefaultCellStyle.BackColor;
        dr.Cells[0].Style.ForeColor = dataGridView.Columns[0].DefaultCellStyle.ForeColor;
        dr.Cells[0].Style.Font = dataGridView.Columns[0].DefaultCellStyle.Font;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-15T07:40:01.460

设置`RowsDefaultCellStyle`为`null`之后`InitializeComponent()`。

我认为`DataGridView`采用网格/列/行顺序的样式。因此，如果设置了行样式，它总是会覆盖任何列样式。

在我看来，这是一个糟糕的设计——根本不需要默认的行样式！

# c# - 遍历 XDocument 中的每个 XElement

> ID：15433732
> 
> 赞同：13
> 
> 时间：2013-03-15T13:29:40.857
> 
> 标签：c#, linq-to-xml

我有一个如下所示的 XML：

```
<myVal>One</myVal>
<myVal>Two</myVal>
<myVal>Three</myVal>
<myVal>Four</myVal>
<myVal>Five</myVal> 
```

我想将其加载到 XDocument 中，然后遍历该 XDocument 中的每个 XElement 并计算每个元素中的字符数。

最好的方法是什么？

首先，我注意到我必须添加一个根元素，否则 XDocument.Parse() 将无法将其解析为 XML。所以我补充说：

```
<span>
        <myVal>One</myVal>
        <myVal>Two</myVal>
        <myVal>Three</myVal>
        <myVal>Four</myVal>
        <myVal>Five</myVal>
</span> 
```

但是当我这样做时：

```
foreach (XElement el in xDoc.Descendants()) 
```

`el`将包含整个 XML，从第一个 开始`<span>`，包括每个`<myVal>`s，然后以 . 结尾`</span>`。

如何`<myVal>One</myVal>`使用 XDocument 遍历每个 XML 元素（等）？

我事先不知道所有 XML 元素将被命名为什么，因此它们不会总是被命名为“myVal”。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-15T13:30:59.667

使用`doc.Root.Elements()`（对于根节点的直接子节点，我认为这确实是您想要的）或`doc.Root.Descendants()`（如果您想要每个后代，包括任何可能的子节点`<myVal/>`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:50:34.603

这样做：

```
string xml = "  <span><myVal>One</myVal><myVal>Two</myVal><myVal>Three</myVal><myVal>Four</myVal><myVal>Five</myVal></span>";
XmlReader xr = XmlReader.Create(new StringReader(xml));
var xMembers = from members in XElement.Load(xr).Elements() select members;

foreach (XElement x in xMembers)
{
    var nodeValue = x.Value;
} 
```

现在，如果您看到**nodeValue**的值， 您将得到一二等

# html - 在 HTML 标签中编写条件的最佳实践？

> ID：15433734
> 
> 赞同：3
> 
> 时间：2013-03-15T13:29:44.927
> 
> 标签：html, ruby-on-rails

这个问题肯定已经被问过了，但我没有找到。

我经常被迫在视图中编写这样的代码：

*   `<div class="<%= c ? 'my_class' : 'my_other_class' %>">`
*   `<div class="<%= 'my class' if c %>">`
*   `<div<%= c ? 'class="my_class"' : 'id="my_div"' %>>`

或者（更漂亮的方式，但可读性较差）：

```
<% div_inner = capture do %>
   ...
<% end %>

<% if c %>
  <div class="my_class"><%= div_inner %></div>
<% else %>
  <div><%= div_inner %></div>
<% end %> 
```

最后一个：

```
<% div_inner = capture do %>
   ...
<% end %>

<%= content_tag(:div, div_inner, (c ? { :class => "my_class" } : {})) %> 
```

我发现所有这些解决方案在语法上都很脏。我相信有更好的方法。但是女巫？欢迎您亲身体验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:43:54.763

你假设有更好的方法是正确的。将条件逻辑放入视图中是违反 MVC 精神的。根据您的示例，您可以使用简单的辅助方法，而不是您可能在网络上阅读的任何更复杂的实现。

您可以创建一个看起来像这样的辅助方法

```
def conditional_div(condition, true_class, false_class)
  content_tag :div, class: (condition ? true_class : false_class) do
    yield if block_given?
  end
end 
```

然后在您看来，您可以像这样使用新的助手

```
<%= conditional_div(c, 'my_class', '') do %>
  <p>Your content</p>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:05:41.170

我不是一个超级粉丝，`content_tag :div`因为我发现它使代码更难维护并且很难追踪。在 partials、helpers 和 javascript 之间，可能需要一个小时才能找到一个类是如何分配给一个元素的。

无论如何，在 `<div class="<%= c ? 'my_class' : 'my_other_class' %>">` 我通常只是尝试将类名构建为对象的属性的情况下。例如，一个标签将根据**活动**或**取消的对象获得不同的类**

然后我的 div 看起来像

`<div class="first-class <%= record.state %>">.....</div>`

然后我的 CSS 有`.active{}`, 和`.cancelled{}`定义。它并没有摆脱所有的 erb 标签，但它确实让它们变得更简单。你可能会得到一些奇怪的 CSS 类名，但我发现这比凌乱的 erb 代码更容易处理。

还有这个，

`<div<%= c ? 'class="my_class"' : 'id="my_div"' %>>`

对我来说只是看起来不对。id 和 class 在语义上是不同的东西，不应该以这种方式混合。这变得非常难以调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:35:29.463

根据您正在做的事情，如果条件`c`有点“全局”（例如当前页面的名称或语言，或者用户当前是否登录，或者是早上还是晚上......），它可以使将这些设置为`body`元素的 CSS 类是有意义的，因此输出如下所示：

```
<body class="is_home_page lang_en is_logged_in"> 
```

并在 CSS 中完成其余的工作：

```
body.is_home_page .classname { color: red }
body.is_sub_page .classname { color: green } 
```

这可以使整个 HTML 更易于阅读。

# android - 创建一组标记 Google Maps V2

> ID：15433737
> 
> 赞同：8
> 
> 时间：2013-03-15T13:29:51.710
> 
> 标签：android, arrays, google-maps-markers

下午好。在我的应用程序中，我从数据库中为 parse.com 上的标记提取数据：

```
public void ParseQueryMap() {
          ParseQuery query = new ParseQuery("MyObject");
          query.findInBackground(new FindCallback() {
          public void done(List<ParseObject> myObject, ParseException e) {
          if (e == null) {

                    for ( int i = 0; i < myObject.size(); i++) {

                          commGet =  myObject.get(i).getString("Comment");

                          geo1Dub = myObject.get(i).getParseGeoPoint("location").getLatitude();
                          geo2Dub = myObject.get(i).getParseGeoPoint("location").getLongitude();

                         Location aLocation = new Location("first");
                         aLocation.setLatitude(geo1Dub);
                         aLocation.setLongitude(geo2Dub);
                         Location bLocation = new Location("second");
                         bLocation.setLatitude(location.getLatitude());
                         bLocation.setLongitude(location.getLongitude());
                         int distance = (int)aLocation.distanceTo(bLocation);
                              if (distance<rad) {  // where "rad" radius display points
                                  myMap.addMarker(new MarkerOptions().position(new LatLng(geo1Dub,geo2Dub)).title(commGet)                                   .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED)));     

                               } else {
                               }                                                               

                         }

             } else {
                    Toast.makeText(MainActivity.this, "Error!", Toast.LENGTH_SHORT).show();
              }
          }
      }); 
```

我想创建一个标记数组来测试它的大小，如果它为零，则显示 AlertDialog。也就是说，我想知道我得到了多少子弹。感谢您的帮助

**更新：**我想知道地图上显示了多少个标记

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-19T23:47:02.493

```
// before loop:
List<Marker> markers = new ArrayList<Marker>();

// inside your loop:
Marker marker = myMap.addMarker(new MarkerOptions().position(new LatLng(geo1Dub,geo2Dub))); //...
markers.add(marker);

// after loop:
markers.size(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-15T06:40:07.553

```
List<LatLng> plots = new ArrayList();

//get your coordinates and add them to the list of plots
plots.add(new LatLng(latitude,longitude));

plots.forEach(plot->{
    MarkerOptions marker = new MarkerOptions().position(plot).title("My 
    Position");
    googleMap.addMarker(marker);
}); 
```

# mysql - 如何在单列 SQL 输出中显示三个不同的日期？

> ID：15433740
> 
> 赞同：-2
> 
> 时间：2013-03-15T13:29:54.553
> 
> 标签：mysql, sql

我需要在单列中显示 sysdate、sysdate-1 和 sysdate-3。任何人都可以建议一个 SQL 查询来做到这一点（不使用游标，只是简单的 SQL）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:36:10.807

这个怎么样：

```
SELECT CURDATE() AS date
UNION
SELECT SUBDATE(CURDATE(), 1)
UNION
SELECT SUBDATE(CURDATE(), 3) 
```

# java - 冲洗缓冲区（）不工作

> ID：15433745
> 
> 赞同：0
> 
> 时间：2013-03-15T13:30:22.537
> 
> 标签：java, http, servlets, jetty, embedded-jetty

我正在运行嵌入式 Jetty 服务器（Jetty 8）。我想制作一个 HTTP 流媒体应用程序。因此，我必须每隔几秒钟刷新一次写入器（servlet 将继续运行）。

问题是 response.flushBuffer() 和 response.getWriter.flush() 似乎都没有将输出写入响应。（尽管 response.isCommitted() 返回 true）输出仅在 servlet 返回后可见。

这是因为 Jetty 不支持 Streaming 吗？还是我必须在 Jetty 中进行一些配置更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:44:07.487

Servlet 过滤器也可以进行自己的缓冲。例如 gzip 压缩或 HTML 美化器作为过滤器。

# ios - 在标签下设置 UIImageView，而不是给出坐标

> ID：15433755
> 
> 赞同：0
> 
> 时间：2013-03-15T13:30:53.210
> 
> 标签：ios, objective-c

如果你想创建一个 ImageView，那么你需要像这样创建它：

```
 UIImageView *imgView = [[[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 100, 20)] autorelease]; 
```

x 和 y 坐标是 10，但是如果你有一个标签或其他东西（一个你不知道文本有多长的文本视图）在同一个地方怎么办。你怎么能把它总是显示在标签下的图像，而不是给出坐标你能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:37:14.550

为此，您可以采取两种方式。

1.将您的图像视图添加到您的视图中，然后将标签或任何内容添加到您的视图中，然后它会与图像视图重叠，但会给出`backGroundColor`清晰的颜色。

2.将该标签添加到imageview并将imageview添加到Self.view。

IMP：清除`backGroundColor`放置在`UIImageView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:48:45.990

设置高度和宽度也等于`UILabel`

```
UIImageView *imgView = [[[UIImageView alloc] initWithFrame:CGRectMake(yourLabel.frame.origin.x, yourLabel.frame.origin.y, yourLabel.frame.size.width,yourLabel.frame.size.height)] autorelease];
[self addSubview:imgView];
[self addSubview:yourLabel]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T13:38:30.263

```
UIImageView *imgView = [[[UIImageView alloc] initWithFrame:CGRectMake(_yourLabel.frame.origin.x, _yourLabel.frame.origin.y, 100, 20)] autorelease]; 
```

然后 ：

```
[yourView addSubview:imgView];
[yourView addSubview:_yourLabel]; 
```

# php - 页面之间没有进行会话

> ID：15433756
> 
> 赞同：0
> 
> 时间：2013-03-15T13:30:58.950
> 
> 标签：php, html, json, forms, session

我已经创建了一个登录页面，这里是代码，我没有使用任何数据库，我应该携带登录用户的电子邮件，直到它注销，这是我的登录页面（login.php）。在表单操作中，我用一些键调用了一个 Web 服务，我已经将它转换为 json 格式，然后在发送到服务器时，我得到一个 json 格式的响应，该响应被解码并检查了一些条件（所有这些都发生在 profile.xml 文件中）。 php）根据条件的响应将它们重定向到另一个页面，检查它重定向到的页面是（pipm.php）。

login.php 是

```
<?php 
    session_start();
    ?>
    <html>
    <head>
    <title>LOGIN FOR PRODUCT MANAGEMENT</title>
    <link href="style.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
    <div id="contact">
    <form id="myForm1" action="profile.php" method="post">
    <div style="margin-left:180px;color:#445668">
    <h3>LOGIN</h3></div> 
    <p>
    <div style="margin-left:10px;margin-top:10px;">
    <label for="username">Email</label>
    </div>
    <div style="margin-top:10px;">
    <input type="email" id="username" name="username" placeholder="Enter your username"/>
    </div>
    <div style="margin-left:10px;margin-top:10px;">
    <label for="password">Password</label></div>
    <div style="margin-top:10px;">
    <input type="password" id="password" name="password" placeholder="Enter your password"/>
    </div>
    <div style="margin-top:20px;margin-left:-30px;width: 185px;text-align: right; font-size: 12px; color: #445668; 
    text-transform: uppercase; text-shadow: 0px 1px 0px #f2f2f2;"><a href="forgotpass.php" style="text-decoration:none;">Forgot Password?</label></a>
                <div style="margin-left:440px;margin-top:-20px;"><input type="submit" name="Submit" value="Send "/></div>
     </p>
     </form>
     </div>

<?php
$temp=$_SESSION['username'];
echo "$temp";
if (isset($_POST['Submit'])) { 
 $_SESSION['username'] = $_POST['username'];
 } 
?> 
  </body>
</html> 
```

profile.php 是

```
<?php
session_start();
$usernamepm = $_POST['username'];
$passwordpm =$_POST['password'];
$loginpm=array(
'user_name'=> "$usernamepm" ,
'password' => "$passwordpm"
);
$url='http://192.168.2.31:8080/Product_Deployment/services/user/login';
        $data="$loginpm";
        $ch=curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($loginpm));
        curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
        $response=  curl_exec($ch);
        curl_close($ch);
        $jsondepm = "$response";
        $jsonde_o= json_decode($jsondepm);
        $jsonde_a=json_decode($jsondepm,true);
        $loginstatus=$jsonde_a[firsttimelogin];
        if($loginstatus=="yes")
        {  
        header("Location:pipm.php");
        }
        if($loginstatus=="no") 
        {
        header("Location:pipm.php");
        }
        if($loginstatus=="")
        {
        header("Location:login.php");
        }

?> 
```

pipm.php 是

```
<?php
session_start();
?>
<html>
<head><title>PERSONAL INFO COLLECTION PAGE</title>
<link href="pipm.css" rel="stylesheet" type="text/css"/> 
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script>
   function onKeyPressBlockNumbers(e)
{
    var key = window.event ? e.keyCode : e.which;
    var keychar = String.fromCharCode(key);
    reg = /\d/;
    return !reg.test(keychar);
}
 function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;

         return true;
      }   
$(function() { 
    $("#datepicker1").datepicker({ dateFormat: 'yy-mm-dd' });
});

    function validate()
{
    var vfname=trim(document.frm.fname.value);
    var vlname=trim(document.frm.lname.value);
    var vdatepicker1=trim(document.frm.datepicker1.value);
    var vmobile=trim(document.frm.mobile.value);
    var vaddressline1=trim(document.frm.addressline1.value);
    var vaddressline2=trim(document.frm.addressline2.value);
    var vaddressline3=trim(document.frm.addressline3.value);
    var vcountry=trim(document.frm.country.value);
    var vstate=trim(document.frm.state.value);
    var vcity=trim(document.frm.city.value);
    var vpin=trim(document.frm.pin.value);
    var vcompanyname=trim(document.frm.companyname.value);
    var vwebsite=trim(document.frm.website.value);
    var vcompanyemail=trim(document.frm.companyemail.value);
    var vphoneno=trim(document.frm.phoneno.value);
    var vcaddressline1=trim(document.frm.caddressline1.value);
    var vcaddressline2=trim(document.frm.caddressline2.value);
    var vcaddressline3=trim(document.frm.caddressline3.value);
    var vcountry1=trim(document.frm.country1.value);
    var vstate1=trim(document.frm.state1.value);
    var vcity1=trim(document.frm.city1.value);
    var vpin1=trim(document.frm.pin1.value);

      if(vfname=="")
    {
        alert("Fisrt Name Field is Empty");
        document.frm.fname.focus();
        return false;
    }
    else if(vlname=="")
    {
        alert("Last Name Field is Empty");
        document.frm.lname.focus();
        return false;
    }
    else if(vdatepicker1=="")
    {
        alert("DOB Field is Empty");
        document.frm.datepicker1.focus();
        return false;
    }
    else if(vmobile=="")
    {
        alert("Mobile Number Field is Empty");
        document.frm.mobile.focus();
        return false;
   }
   else if(vaddressline1=="")
   {
        alert("Address Line1 Field is Empty");
        document.frm.addressline1.focus();
        return false;
   }
   else if(vaddressline2=="")
   {
        alert("Address Line2 Field is Empty");
        document.frm.addressline2.focus();
        return false;
   }
   else if(vaddressline3=="")
   {
        alert("Address Line3 Field is Empty");
        document.frm.addressline3.focus();
        return false;
   }
   else if(vcountry=="")
   {
        alert("Country Field is Empty");
        document.frm.country.focus();
        return false;
   }
   else if(vstate=="")
   {
        alert("State Field is Empty");
        document.frm.state.focus();
        return false;
   }
   else if(vcity=="")
   {
        alert("City Field is Empty");
        document.frm.city.focus();
        return false;
   }
   else if(vpin=="")
   {
        alert("Pin Address Field is Empty");
        document.frm.pin.focus();
        return false;
   }
   else if(vcompanyname=="")
   {
        alert("Company Name Field is Empty");
        document.frm.companyname.focus();
        return false;
   }
   else if(vwebsite=="")
   {
        alert("Website Field is Empty");
        document.frm.website.focus();
        return false;
   }
   else if(vcompanyemail=="")
   {
        alert("Email Field is Empty");
        document.frm.companyemail.focus();
        return false;
   }
   else if(vphoneno=="")
   {
        alert("Phone Number Field is Empty");
        document.frm.phoneno.focus();
        return false;
   }
   else if(vcaddressline1=="")
   {
        alert("Address Line 1 Field is Empty");
        document.frm.caddressline1.focus();
        return false;
   }
  else if(vcaddressline2=="")
  {
       alert("Address Line 2 Field is Empty");
       document.frm.caddressline2.focus();
       return false;
  }
  else if(vcaddressline3=="")
  {
       alert("Address Line 3 Field is Empty");
       document.frm.caddressline3.focus();
       return false;
  }
  else if(vcountry1=="")
  {
       alert("Country Field is Empty");
       document.frm.country1.focus();
       return false;
  }
  else if(vstate1=="")
  {
       alert("State Field is Empty");
       document.frm.state1.focus();
       return false;
  }
  else if(vcity1=="")
  {
      alert("City Field is Empty");
      document.frm.city1.focus();
      return false;
  }
  else if(vpin1=="")
  {
      alert("Pin Address Field is Empty");
      document.frm.pin1.focus();
      return false;
  }

}

function trim(s) {
    return s.replace( /^\s*/, "" ).replace( /\s*$/, "" );
}
</script>
</head>
<body>
  <div id="contact">
    <form id="personalinfo" name="frm" action="home.php" method="post" onSubmit="return validate();">
        <h1>PERSONAL INFORMATION</h1>
       <div style="margin-left:50px">
        <input type="text" name="fname" id="firstname" placeholder="enter your firstname" onkeypress="return onKeyPressBlockNumbers(event);" ></div>
        <div style="margin-left:50px">
        <input type="text" name="lname" id="lastname" placeholder="enter your last name" onkeypress="return onKeyPressBlockNumbers(event);" ></div>
        <div style="margin-left:50px">
        <input type="text" id="datepicker1" name="datepicker" placeholder="Enter your date of Birth"/></div>
        <div style="margin-left:50px">
        <input type="number" name="mobile" id="mobile" placeholder="enter your mobile number" onkeypress="return isNumberKey(event)"></div>
        <div style="margin-left:50px">
        <input type="text" name="addressline1" id="addressline1" placeholder="enter your addressline 1" onkeypress="return onKeyPressBlockNumbers(event);" ></div>
        <div style="margin-left:50px">
        <input type="text" name="addressline2" id="addressline2" placeholder="enter your addressline 2" onkeypress="return onKeyPressBlockNumbers(event);" ></div>
        <div style="margin-left:50px">
        <input type="text" name="addressline3" id="addressline3" placeholder="enter your addressline 3" onkeypress="return onKeyPressBlockNumbers(event);" ></div>
        <div style="margin-left:50px">
        <input type="text" name="country" id="country" placeholder="enter your country" onkeypress="return onKeyPressBlockNumbers(event);" ></div>
        <div style="margin-left:50px">
        <input type="text" name="state" id="state" placeholder="enter your state" onkeypress="return onKeyPressBlockNumbers(event);" ></div>
        <div style="margin-left:50px">
        <input type="text" name="city" id="city" placeholder="enter your city" onkeypress="return onKeyPressBlockNumbers(event);" ></div>
        <div style="margin-left:50px">
        <input type="text" name="pin" id="pin" placeholder="enter your pin address" onkeypress="return isNumberKey(event)"></div>

    <div style="margin-left:500px;margin-top:-550px;"> 
        <div style="margin-left:-122px;margin-top:-400px;"></div>
        <input type="text" name="comapnyname" id="companyname" placeholder="enter your company name" onkeypress="return onKeyPressBlockNumbers(event);" >
        <input type="text" name="website" id="website" placeholder="enter your company website" onkeypress="return onKeyPressBlockNumbers(event);" >
        <input type="email" name="companyemail" id="companyemail" placeholder="enter your company email">
        <input type="number" name="phoneno" id="phoneno" placeholder="enter your phone number" onkeypress="return isNumberKey(event)">
        <input type="text" name="caddressline1" id="caddressline1" placeholder="enter your addressline 1" onkeypress="return onKeyPressBlockNumbers(event);" >
        <input type="text" name="caddressline2" id="caddressline2" placeholder="enter your addressline 2" onkeypress="return onKeyPressBlockNumbers(event);" >
        <input type="text" name="caddressline3" id="caddressline3" placeholder="enter your addressline 3" onkeypress="return onKeyPressBlockNumbers(event);" >
        <input type="text" name="country1" id="country1" placeholder="enter your country" onkeypress="return onKeyPressBlockNumbers(event);" >
        <input type="text" name="state1" id="state1" placeholder="enter your state" onkeypress="return onKeyPressBlockNumbers(event);" >
        <input type="text" name="city1" id="city1" placeholder="enter your city" onkeypress="return onKeyPressBlockNumbers(event);" >
        <input type="number" name="pin1" id="pin1" placeholder="enter your pin address" onkeypress="return isNumberKey(event)">
        </div>

        <div style="margin-left:-1000px"><input type="submit" id="submit" value="SAVE"/></div>
               </form>
  </div>
 HI <?php echo $_SESSION['username'];?>

</body>
</html> 
```

我真的很困惑我做错了什么，请纠正我提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:40:00.520

在`login.php`表单中，动作将`profile.php`是这样的：

```
<form id="myForm1" action="profile.php" method="post"> 
```

在`profile.php`你没有设置任何`$_SESSION`变量。您需要将当前位于`login.php`顶部的这些行移至`profile.php`：

```
if (isset($_POST['Submit'])) {
    $_SESSION['username'] = $_POST['username'];
} 
```

# python - Python，tkinter：为什么这个 jpeg 没有显示？

> ID：15433771
> 
> 赞同：0
> 
> 时间：2013-03-15T13:31:26.443
> 
> 标签：python, tkinter, python-imaging-library

试图在我的 GUI 窗口上显示来自互联网的图片。

到目前为止，我的代码是：

```
picURL = "https://graph.facebook.com/" + ID + "/picture"
picBytes= urlopen(picURL).read()
picData = io.BytesIO(picBytes)
picPil = Image.open(picData)
picTk = ImageTk.PhotoImage(picPil)
label = Label(image = picTK, bg = "blue").pack() 
```

问题是我得到的只是图片应该在的蓝色框。我该如何解决？

在 Windows 上使用 python 3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:37:33.157

现在这是一个疯狂的猜测，但我只记得一个[类似的问题](https://stackoverflow.com/a/13068104/1639625)。我能够以这种方式重现您的“蓝框”，所以这也可能是您的问题。我只是试一试。

我假设 PhotoImage 是在其他一些范围内创建的（可能是一个方法`showImage(self, id)`或类似的东西），并且没有对它的引用超出此方法的范围。这具有在`PhotoImage`此方法结束时将被垃圾收集的效果，*即使*它在标签中使用！

尝试创建一个在帧的整个生命周期中都存在的变量，并将 PhotoImage 绑定到该变量（例如`self.images[ID]`，当使用 GUI 类时，或者其他一些全局变量时）。如果我是对的，这确实是问题所在，那么这应该会有所帮助。

# windows-phone-7 - windows phone 中的进度条

> ID：15433773
> 
> 赞同：0
> 
> 时间：2013-03-15T13:31:33.457
> 
> 标签：windows-phone-7

我想启动我的进度条，在数据加载到我之后停止它。问题是我如何从 Windows phone 中的另一个类中阻止它

这是我在 XAML 中声明进度条的第一堂课：

```
 public class panorama
    {
        progressBar.IsIndeterminate = true;
        progressBar.Visibility = System.Windows.Visibility.Visible;
        App.PanoramaViewModel.LoadData();
    } 
```

这是我的第二节课

```
 public class panoramaviewmodel 
    {
        public void LoadData()
        {
        }
    } 
```

我喜欢在`panoramaviewmodel`. 如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:35:44.070

将控件上的绑定`Visibility`到 a`Visibility`或`bool`. `ViewModel`确保`ViewModel`实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.95%29.aspx)。

当您更改`ViewModel`要折叠的属性时（或者`false`，如果您选择`bool`通过转换器使用），绑定到它的控件也将更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:19:21.377

假设`panorama`您引用的类是视图（页面），您有几个选项：

1.  向视图模型添加一个属性，指示进度条是否应显示不确定状态，然后绑定到该状态。（这是 WP 应用程序中最常用的方法。）

2.  让视图模型发送一条消息，以指示更改是状态，视图正在侦听并相应地响应。

3.  向视图模型添加一个事件，该事件在加载指示器应更改时触发，并让页面订阅它并相应地更新指示器。

4.  将对进度条的引用传递给视图模型，并让它在适当的时候直接更新进度条。（我只是为了完成而将其包括在内，这是出于某种原因在列表中的最后一个。这打破了作为 MVVM 的目标/好处之一的分离）

由于`ProgressBar`占用了页面上的空间，我还建议不要更改可见性以及更改`IsIndeterminite`属性。通过始终使其可见（但改变`IsIndeterminite`状态），您将避免对可视化树进行不必要的更改（以及涉及的重新计算），并可能避免页面上的其他元素响应折叠 ProgressBar 而移动。

# c++ - Hidapi无法在ubuntu下编译任何代码

> ID：15433774
> 
> 赞同：2
> 
> 时间：2013-03-15T13:31:34.003
> 
> 标签：c++, linux, ubuntu, hidapi

我正在尝试在 Ubuntu 12.04 下使用 hidapi 库。我已经按照 github 中的教程进行操作，但是，即使它附带的测试代码也无法正常工作。它总是抱怨未定义的引用。我找不到任何解决方案。即使安装成功，我也无法在任何地方找到该库。

我正在尝试编译 hidtest.cpp，第一个错误在该`hid_init()`行中。

有人可以帮助我吗？

编辑：

```
make all 

Building target: hidtest

Invoking: Cross G++ Linker

g++  -o "hidtest"  ./src/hidtest.o   

./src/hidtest.o: In function `main':
/../src/hidtest.cpp:35: undefined reference to `hid_init'
/../src/hidtest.cpp:38: undefined reference to `hid_enumerate'
/../src/hidtest.cpp:53: undefined reference to `hid_free_enumeration'
/../src/hidtest.cpp:63: undefined reference to `hid_open'
/../src/hidtest.cpp:71: undefined reference to `hid_get_manufacturer_string'
/../src/hidtest.cpp:78: undefined reference to `hid_get_product_string'
/../src/hidtest.cpp:85: undefined reference to `hid_get_serial_number_string'
/../src/hidtest.cpp:93: undefined reference to `hid_get_indexed_string'
/../src/hidtest.cpp:99: undefined reference to `hid_set_nonblocking'
/../src/hidtest.cpp:103: undefined reference to `hid_read'
/../src/hidtest.cpp:111: undefined reference to `hid_send_feature_report'
/../src/hidtest.cpp:120: undefined reference to `hid_get_feature_report'
/../src/hidtest.cpp:123: undefined reference to `hid_error'
/../src/hidtest.cpp:137: undefined reference to `hid_write'
/../src/hidtest.cpp:140: undefined reference to `hid_error'
/../src/hidtest.cpp:146: undefined reference to `hid_write'
/../src/hidtest.cpp:155: undefined reference to `hid_read'
/../src/hidtest.cpp:173: undefined reference to `hid_close'
/../src/hidtest.cpp:176: undefined reference to `hid_exit'

collect2: ld returned 1 exit status

make: *** [hidtest] Error 1 
```

这是在 Ubuntu 12.04 下使用 Eclipse Juno 完成的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:16:53.300

这些是链接器错误：

> collect2: **ld**返回 1 个退出状态

我最初以为您没有将代码与 hidapi 库链接，但我不小心设法重现您所遇到的确切错误的唯一方法是将 gcc 参数以错误的顺序放置。这失败并具有相同的输出：

```
$ g++ -c -Ihidapi hidtest/hidtest.cpp -o hidtest/hidtest.o
$ g++ -Llinux/.libs -lhidapi-hidraw hidtest/hidtest.o -o test 
```

您的目标文件需要出现在链接阶段的 gcc 参数中的库之前。

以下工作正常：

```
$ g++ -c -Ihidapi hidtest/hidtest.cpp -o hidtest/hidtest.o
$ g++ -Llinux/.libs hidtest/hidtest.o -lhidapi-hidraw -o test
$ LD_LIBRARY_PATH=linux/.libs ./test 
```

请注意，我必须使用 -I、-L 和 LD_LIBRARY_PATH，因为我没有安装 hidapi，我从 hidapi 源文件夹中完成了所有操作。

# magento - 如何在管理订单视图信息选项卡中创建新部分？

> ID：15433775
> 
> 赞同：1
> 
> 时间：2013-03-15T13:31:38.387
> 
> 标签：magento, magento-1.7

我正在尝试在我的管理面板“销售->订单->查看”信息选项卡中创建一个新块。

在我的扩展的块文件夹中，我有一个名为 Adminhtml 的文件夹，其中我有一个名为：Company.php

```
class Namespace_Modulename_Block_Adminhtml_Company extends Mage_Adminhtml_Block_Sales_Order_Abstract
{
 } 
```

在我的扩展模块中，我将此代码放在 etc 文件夹下的 config.xml 中

```
 <adminhtml>
    <layout>
        <updates>
            <modulename>
                <file>module.xml</file>
            </modulename>
        </updates>
    </layout>
</adminhtml> 
```

然后我有我的 adminhtml 布局文件：

```
<?xml version="1.0"?>
  <layout version="0.1.0">
   <modulename_adminhtml_company_index>
    <reference name="order_info">
        <block type="modulename/adminhtml_company" name="modulename" template="company.phtml" />
    </reference>
   </modulename_adminhtml_company_index>
  </layout> 
```

但是什么都没发生，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:09:50.730

如果这是你想要完成的

![在此处输入图像描述](../Images/1da1cd1d6971e65543a234987e7ed618.png)

看看[@Magento 自定义“订单”属性/管理员输入和显示](https://stackoverflow.com/questions/14616499/magento-custom-order-attribute-admin-input-and-display/14617712#14617712)

如果您正在尝试创建一个新选项卡，请查看 @ [http://fishpig.co.uk/magento/tutorials/custom-tabs-magento-product-admin/](http://fishpig.co.uk/magento/tutorials/custom-tabs-magento-product-admin/)

# node.js - Node.js + socket.io 确定每个实例的最大客户端数量

> ID：15433777
> 
> 赞同：3
> 
> 时间：2013-03-15T13:31:43.577
> 
> 标签：node.js, amazon-ec2, socket.io, amazon, benchmarking

我被要求粗略计算单个 socket.io 实例可以在大型 EC2 实例（16Gb Ram，4 Core Xeon）上处理多少个连接。

我更新了简单的 socket.io 基准测试示例。

服务器：

```
var io = require('socket.io').listen(80);
var exec = require('child_process').exec; 

io.configure(function() {
  io.set('log level', 1);

  var transport = process.argv.length >= 2 ? process.argv[2] : null;
  if (transport) {
    io.set('transports', [transport]);
  }
});

var payload = "Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item " +
"Payload: Payload line item ";

var users = 0;

function roundNumber(num, precision) {
  return parseFloat(Math.round(num * Math.pow(10, precision)) / Math.pow(10, precision));
}

setInterval(function() { 
  io.sockets.emit("message", payload);
  console.log("Users: " + users);
}, 3000);

io.sockets.on('connection', function(socket) {

  users++;  

  socket.on('disconnect', function() {
    users--;
  })
}); 
```

客户

```
var io = require('socket.io-client');

var message = "o bispo de constantinopla nao quer se desconstantinopolizar";

var receivedMessages = 0;

function user(shouldBroadcast, host, port) {
  var socket = io.connect('http://' + host + ':' + port, {
    'force new connection': true
  });  

  socket.on("message", function(){    
    receivedMessages += 1;
  })
};

var argvIndex = 2;

var users = parseInt(process.argv[argvIndex++]);
var rampUpTime = parseInt(process.argv[argvIndex++]) * 1000; // in seconds
var newUserTimeout = rampUpTime / users;
var shouldBroadcast = process.argv[argvIndex++] === 'broadcast' ? true : false;
var host = process.argv[argvIndex++] ? process.argv[argvIndex - 1]  : 'localhost';
var port = process.argv[argvIndex++] ? process.argv[argvIndex - 1]  : '3000';

for(var i=0; i<users; i++) {
  setTimeout(function() { user(shouldBroadcast, host, port); }, i * newUserTimeout);
};

setInterval(function() {

 console.log("Messages received: " + receivedMessages);
 receivedMessages = 0;

}, 3000); 
```

我运行了这个示例，客户端在中型实例上启动，在大型服务器上启动。我得到的结果是每 3 秒收到大约 4500 条消息。

但网络、cpu 和 ram 使用率在 2-10% 范围内。

是否可以增加服务连接的数量？

服务器操作系统是 Windows Server 2008 R2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:09:18.430

这很可能是您的客户端和服务器之间的延迟，也可能是对来自客户端的传出连接数量的限制，以及操作系统对服务器上传入连接的限制。请注意，Windows 的限制低于其他操作系统。

此外，您会期望 CPU、RAM 和带宽使用率较低，因为您正在执行的操作既不是计算、内存也不是带宽。

请查看 Apache Bench 作为测试服务器的一种方式，而不是编写可能是也可能不是最佳实现的客户端：[https ://en.wikipedia.org/wiki/ApacheBench](https://en.wikipedia.org/wiki/ApacheBench)

无论如何，请使用更多来自不同网络的客户端计算机，这样您就可以将我们的本地交换机或路由器视为瓶颈

# regex - 如果使用方括号作为分隔符，Perl 正则表达式不起作用。为什么？

> ID：15433779
> 
> 赞同：0
> 
> 时间：2013-03-15T13:31:53.817
> 
> 标签：regex, perl

我对 Perl 和正则表达式非常有经验。然而，这让我发疯了，我找不到答案，我也看不出原因。请看下面的代码：

```
my $str = 'Hello[world]';

say $str =~ m/\w+\[.*?\]/ ? 'Yes' : 'No';
say $str =~ m[\w+\[.*?\]] ? 'Yes' : 'No';
say $str =~ m(\w+\[.*?\]) ? 'Yes' : 'No'; 
```

这个的输出是：

```
Yes
No
Yes 
```

如您所见，我唯一要更改的是正则表达式分隔符，当分隔符为方括号时，表达式无法正常工作。

有人可以解释为什么第二个不匹配吗？

提前致谢，

弗朗西斯科

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:36:47.517

[B::Deparse](http://search.cpan.org/perldoc?B%3a%3aDeparse)模块来拯救你：

```
$ perl -MO=Deparse foo.pl
my $str = 'Hello[world]';
say $str =~ /\w+\[.*?\]/u ? 'Yes' : 'No';
say $str =~ /\w+[.*?]/u ? 'Yes' : 'No';
say $str =~ /\w+\[.*?\]/u ? 'Yes' : 'No';
foo.pl syntax OK 
```

如您所见，`[ ]`正则表达式中的转义意味着 perl 现在将它们解释为元字符，而不是分隔符。你需要两个级别的逃生。我不确定是否可以这样做，因为`\\`将被解释为文字反斜杠。

要特别清楚：在正常的正则表达式中，方括号`[]`具有元字符状态。因此，为了从字面上匹配它们，它们需要被转义。将它们用作分隔符时，您会向它们*添加*另一个元字符状态：它们也是分隔符。所以这两个元字符状态都需要转义。

这将按预期工作：

```
say $str =~ m[\w+\Q\[\E.*?\Q\]\E] ? 'Yes' : 'No'; 
```

当然，这里的教训是明智地选择分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T20:09:39.610

在执行匹配之前尝试`[`用`<`和`]`替换（或其他类似替换）。`>`

# php - 如何使用保存在变量中的运算符符号执行操作

> ID：15433781
> 
> 赞同：3
> 
> 时间：2013-03-15T13:32:06.253
> 
> 标签：php

伙计们，这对你们大多数人来说可能是一个简单的问题。但我对如何使用保存在变量中的运算符符号执行操作感到困惑。例子。

```
$first=5;
$second=5;
$operator="+";

$result=$first.$operator.$second;

echo $result; 
```

但 $result 只会打印 5+5。我希望它执行操作。

我的想法是将所有操作置于 if 条件中 -> if($operator == '+'){add the first and second operand}。还有其他想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T13:53:47.247

而不是使用`eval()`，您可以尝试使用`switch()`内部的自定义函数：

```
$first = 5;
$second = 3;
$operator = '+';

$result = mathOp($operator, $first, $second);
echo $result;

function mathOp($operator, $n1, $n2){
    if(!is_numeric($n1) || !is_numeric($n2)){
        return 'Error: You must use numbers';
    }
    switch($operator){
        case '+':
            return($n1 + $n2);
        case '-':
            return($n1 - $n2);
        case '*':
            return($n1 * $n2);
        case '/':
            if($n2 == 0){
                return 'Error: Division by zero';
            }else{
                return($n1 / $n2);
            }
        default:
            return 'Unknown Operator detected';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:53:25.133

您必须使用`eval()`which 执行 PHP 操作。

```
$first=5;
$second=5;
$operator="+";

$term = $first.$operator.$second;
eval("$result = " . $term);

echo $result; 
```

但要小心 eval 它执行每个 PHP 函数。（甚至执行..）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:47:21.153

Eval 是一种解决方案，但还有其他解决方案。如果您搜索数学解析器，您会发现很多答案。[这](https://stackoverflow.com/questions/4019418/process-mathematical-equations-in-php)是一个很好的例子。

所以基本上，您的选择是：`eval()`首先进行一些验证，或者为您完成它的自定义数学解析器，例如[evalMath](http://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html)。

如果您只寻找简单的操作（+、-、*、/）和两个运算符，请为您的参数使用验证函数（仅限数字，仅限已知运算符）并使用 eval。如果您希望能够解析复杂的操作（括号、变量...），请使用解析器。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2013-03-15T14:33:37.220

当您使用时，您离自己的语法不远了

```
$first.$operator.$second; 
```

您实际上是将字符串添加在一起，您需要使用“+”运算符才能成功使用您的方法。请参阅下面的代码，经过尝试和测试

```
 $first = 5;
    $second = 5;
    $operator = '+';

    $result = $first+$operator+$second;

    echo $result;

?> 
```

# structuremap - StructureMap 在构造函数中传递参数

> ID：15433787
> 
> 赞同：2
> 
> 时间：2013-03-15T13:32:22.817
> 
> 标签：structuremap

我有一个带有一些艺术的构造函数

```
public class AppEngine:IAppEngine
{
    private IGreeter _greeter;
    private string _str;
    public AppEngine(IGreeter greeter,string str)
    {
        _greeter = greeter;
        _str = str;
    }
    public string Run()
    {
        return _greeter.Greeting()+":"+_str;
    }
} 
```

我想从工厂这里获取实例

```
 var obj = ObjectFactory.GetInstance<IAppEngine>(); 
```

在这里，我想传递构造函数接受的参数。我怎么能这样做。

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:28:19.690

如果要在调用 ObjectFactory 时指定参数，可以这样做：

```
ObjectFactory.With("str").EqualTo(someValue).GetInstance<IAppEngine>(); 
```

如果您需要执行多个参数，您可以将它们链接在一起。请注意，您还可以在像这样初始化时为所有实例定义构造函数值：

```
ForRequestedType<IAppEngine>().Use<AppEngine>().WithCtorArg("str").EqualTo(someValue); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-16T09:24:44.030

```
//Arguments Constructor    
Example(int id,String Name){    //Define    }//main method  
//Object Creation    
//Object  Creation for Default Constructor
Example e1=new Example();
//Object Creation for Arguments Constructor
Example e2=new Example(101,"kathik");} 
```

# jsf-2 - 如何从jsf2中的前端搜索页面获取输入类型的文本数据

> ID：15433792
> 
> 赞同：0
> 
> 时间：2013-03-15T13:32:29.130
> 
> 标签：jsf-2

我在搜索表单中遇到了一点问题，因为我在搜索字段中输入的所有数据都以空值传递给我的 java 代码。我是 jsf2 的新手。

这是我的 xhtml 页面，格式如下：

```
<h:form>
    <ul>
        <li>
            <h:outputLabel for="equipmentName" value="#{bundle.NomeEquipamento_Title}"/>
            <h:inputText value="#{materialController.selected.equipmentName}" class="w_130" id="equipmentName" required="false" validatorMessage="#{bundle.NomeEquipamento_Title} inválido."/>
        </li>
        <li>
            <h:outputLabel for="channelCode" value="#{bundle.CodigoCanal_Title}"/>
            <h:inputText value="#{materialController.selected.channelCode}" class="w_80" id="channelCode" required="false" validatorMessage="#{bundle.CodigoCanal_Title} inválido."/>
        </li>
        <li><h:commandButton type="reset" class="bt_limpar button29" style="margin-top:13px;"><span class="screen_reader_text">Limpar</span></h:commandButton></li>
        <li><h:commandLink action="#{materialController.pesquisa}" class="bt_pesquisar button29" style="margin-top:13px;" immediate="true"><span class="screen_reader_text">Pesquisar</span></h:commandLink></li>
    </ul>
</h:form> 
```

这是我的 DTO，具有两个属性“设备名称”和“通道代码”：

```
public class SearchCommercialsDTO implements Serializable{

    private String equipmentName;
    private Integer channelCode;

   /**
    * Default constructor
    */
    public SearchCommercialsDTO() {}

    /**
     * Constructor
     * @param equipmentName
     * @param channelCode 
     */
    public SearchCommercialsDTO(String equipmentName, Integer channelCode) {
        this.equipmentName = equipmentName;
        this.channelCode = channelCode;
    }
    public String getEquipmentName() {
        return equipmentName;
    }

    public void setEquipmentName(String equipmentName) {
        this.equipmentName = equipmentName;
    }

    public Integer getChannelCode() {
        return channelCode;
    }

    public void setChannelCode(Integer channelCode) {
        this.channelCode = channelCode;
    }
} 
```

这是我的管理豆：

```
@ManagedBean(name = "materialController")
@SessionScoped
public class MaterialController implements Serializable {

    private SearchCommercialsDTO current;
    private int selectedItemIndex;

    public MaterialController() {
    }

    public SearchCommercialsDTO getSelected() {
        if (current == null) {
            current = new SearchCommercialsDTO();
            selectedItemIndex = -1;
        }
        return current;
    }

    public String pesquisa() {
        try{
            getFacade().find(current);
            JsfHelper.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("PesquisaRealizada"));
            return preparaPesquisa();
        } catch (Exception e) {
            JsfHelper.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }
} 
```

当我单击“Pesquisar”按钮时，会发布帖子，但“SearchCommercialsDTO”属性“current”会与所有属性值“null”一起传递，即使我在输入文本字段中键入了一些内容。

我的代码中缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:47:24.917

尝试改变`getSelectedMethod()`。

将属性添加`selected`到`ManagedBean`

```
private SearchCommercialsDTO selected;
// getter and setter for selected attribute 
```

将实际`getSelectedMethod()`身体移动到`actionListener`

```
public void getSelectedActionListener(ActionEvent e) {
    if (current == null) {
        current = new SearchCommercialsDTO();
        selectedItemIndex = -1;
    }
} 
```

将此代码添加到您的视图中

```
<h:commandLink action="#{materialController.pesquisa}" actionListener="#{materialController.selectedActionListener}" ...>...</h:commandLink></li> 
```

那些改动之后`actionListener`才会被激发起来`action`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:50:56.397

尝试从您的 commandLink 中删除 immediate="true"

# html - IE 中带有 valign 的 HTML 嵌套表格无法正确预览

> ID：15433795
> 
> 赞同：1
> 
> 时间：2013-03-15T13:32:38.730
> 
> 标签：html, css, email

我似乎无法将表格单元格中的右下角表格与 IE 中的底部对齐。（尽管将表格单元格与 vertical-align:"bottom" 并声明 valign="bottom" 对齐。错误？

还要注意。这是一封电子邮件，所以头部的 CSS 声明基本上是禁止的。它使用堆叠列表垂直对齐顶部的表格进行预览。

```
<table border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td width="10" bgcolor="#ffffff" style="font-size:1px; line-height:1px;">&nbsp;</td>
        <td width="258" bgcolor="#ffffff" valign="top" style="font-size:12px; line-height: 20px; font-family:Arial, Helvetica, sans-serif; color:#666666;"><table width="258" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="258" height="15" align="left" valign="top" bgcolor="#ffffff" style="font-size:12px; line-height: 20px; font-family:Arial, Helvetica, sans-serif; color:#666666;"><span style="font-size:18px; line-height:20px; font-family:Arial, Helvetica, sans-serif; font-weight:bold; color:#e48828;"><br />
                        Curabitur egestas lorem a nisl aliquet.</span><br />
                        <br />
                        Fusce faucibus lorem vel arcu aliquet rutrum. Etiam semper, urna ut scelerisque tristique, dolor sapien porta justo, rutrum tempor ipsum. <br />
                        <br />
                        <table border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td width="15" bgcolor="#ffffff">&nbsp;</td>
                                <td width="10" bgcolor="#ffffff"><img src="#" width="10" height="10" alt=" " style="display:block;"/></td>
                                <td width="10" bgcolor="#ffffff">&nbsp;</td>
                                <td width="223" align="left" bgcolor="#ffffff" style="font-size:12px; line-height: 20px; font-family:Arial, Helvetica, sans-serif;"><a href="#" target="_blank" style="text-decoration:none; color: #e48828;">Etiam sem elit, venenatis sit.</a></td>
                            </tr>
                        </table></td>
                </tr>
            </table></td>
        <td width="10" bgcolor="#ffffff" style="font-size:1px; line-height:1px;">&nbsp;</td>
        <td width="11" bgcolor="#eeefef" style="font-size:1px; line-height:1px;">&nbsp;</td>
        <td width="271" bgcolor="#ffffff" valign="top" style="font-size:1px; line-height:1px;"><table border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="271" bgcolor="#ffffff"><table border="0" cellpadding="0" cellspacing="0">
                            <tr>
                                <td width="100" height="152" bgcolor="#B2B3B7">&nbsp;</td>
                                <td width="10" bgcolor="#eeefef" style="font-size:1px; line-height:1px;">&nbsp;</td>
                                <td width="10" bgcolor="#FFFFFF" style="font-size:1px; line-height:1px;">&nbsp;</td>
                                <td width="151" align="left" valign="middle" bgcolor="#ffffff" style="font-size:12px; line-height: 20px; font-family:Arial, Helvetica, sans-serif; color:#666666;"><br />
                                    <span style="font-size:12px; line-height:18px; font-family:Arial, Helvetica, sans-serif; color:#005696;"><strong>Phasellus sed ipsum vel augue.</strong><br />
                                    </span> <span style="font-size:10px; line-height:12px;">Aliquam suscipit libero non orci tincidunt nec convallis. <br />
                                    </span></td>
                            </tr>
                        </table></td>
                </tr>
                <tr>
                    <td width="271" height="12" bgcolor="#eeefef">&nbsp;</td>
                </tr>
                <tr>
                    <td width="271" valign="bottom" bgcolor="#ffffff" style="vertical-align:bottom;"><table border="0" cellspacing="0" cellpadding="0" height="100%">
                            <tr>
                                <td width="25" height="15" bgcolor="#ffffff" style="font-size:1px; line-height:1px;">&nbsp;</td>
                                <td width="10" height="15" bgcolor="#ffffff" style="font-size:1px; line-height:1px;">&nbsp;</td>
                                <td width="10" height="15" bgcolor="#ffffff" style="font-size:1px; line-height:1px;">&nbsp;</td>
                                <td width="226" height="15" bgcolor="#ffffff" style="font-size:1px; line-height:1px;">&nbsp;</td>
                            </tr>
                            <tr>
                                <td width="25" valign="middle" bgcolor="#ffffff">&nbsp;</td>
                                <td width="10" valign="middle" bgcolor="#ffffff"><img src="#" width="10" height="10" alt=" " style="display:block;"/></td>
                                <td width="10" valign="middle" bgcolor="#ffffff">&nbsp;</td>
                                <td width="226" align="left" valign="middle" bgcolor="#ffffff" style="font-size:12px; line-height: 20px; font-family:Arial, Helvetica, sans-serif;"><a href="#" target="_blank" style="text-decoration:none; color: #e48828;">Etiam sem elit, venenatis sit.</a></td>
                            </tr>
                            <tr>
                                <td width="25" valign="middle" bgcolor="#ffffff">&nbsp;</td>
                                <td width="10" valign="middle" bgcolor="#ffffff"><img src="#" width="10" height="10" alt=" " style="display:block;"/></td>
                                <td width="10" valign="middle" bgcolor="#ffffff">&nbsp;</td>
                                <td width="226" align="left" valign="middle" bgcolor="#ffffff" style="font-size:12px; line-height: 20px; font-family:Arial, Helvetica, sans-serif;"><a href="#" target="_blank" style="text-decoration:none; color: #e48828;">Etiam sem elit, venenatis sit.</a></td>
                            </tr>
                        </table></td>
                </tr>
            </table></td>
        <td width="10" bgcolor="#eeefef" style="font-size:1px; line-height:1px;">&nbsp;</td>
    </tr>
    <tr>
        <td width="10" height="15" bgcolor="#ffffff"  style="font-size:1px; line-height:1px; border-bottom:1px solid #b2ccdf;">&nbsp;</td>
        <td width="258" height="15" bgcolor="#ffffff" style="font-size:1px; line-height:1px; border-bottom:1px solid #b2ccdf;">&nbsp;</td>
        <td width="10" height="15" bgcolor="#ffffff" style="font-size:1px; line-height:1px; border-bottom:1px solid #b2ccdf;">&nbsp;</td>
        <td width="11" height="15" bgcolor="#eeefef" style="font-size:1px; line-height:1px; border-bottom:1px solid #eeefef;">&nbsp;</td>
        <td width="271" height="15" bgcolor="#ffffff" style="font-size:1px; line-height:1px; border-bottom:1px solid #b2ccdf;">&nbsp;</td>
        <td width="10" height="15" bgcolor="#eeefef" style="font-size:1px; line-height:1px; border-bottom:1px solid #eeefef;">&nbsp;</td>
    </tr>
</table> 
```

![ie问题截图](../Images/8e12293b936e038b806841f17c7be781.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:51:29.610

我不会说这是一个错误。

此行中的表：

```
<td width="271" bgcolor="#ffffff" valign="top" style="font-size:1px; line-height:1px;"><table border="1" cellspacing="0" cellpadding="0"> 
```

不需要更多的垂直空间来渲染，因此它比左侧“关闭”更高。您的 valign 表已正确对齐，但它垂直对齐的 td 仅大到足以容纳它，因此 valign 没有实际效果。

我会通过只使用一个表来解决这个问题，根据需要使用行跨度和列跨度，插入你现在拥有的无数嵌套表......

# bash - 聚合相似字段的 Bash 脚本

> ID：15433796
> 
> 赞同：1
> 
> 时间：2013-03-15T13:32:40.090
> 
> 标签：bash, sorting, count, awk, aggregate

我有以下数据，按列是`IP`,`PORT`和`Bytes`。我想基于相似的字节总数`IP`和`Port`. 所以字节总数在哪里`Port`和`IP's`是相同的，然后最后根据排序`bytes`，`ports`所以最后我可以得到每个`port`排序的前 10 个谈话者`bytes`。

因此，对于端口 80 的顶级谈话者下方的数据将是：

```
174.143.121.217 80 30722
109.108.151.126 80 25083 
```

那么端口 5989 的热门话题将是：

```
192.168.23.20 5989 26601 
```

文件：

```
208.76.128.67 443 2975
204.154.110.99 80 1713
130.117.119.220 80 845
192.168.23.20 5989 26601
23.15.8.35 80 33944
64.69.6.116 443 5936
208.76.128.67 443 2309
66.129.120.117 80 1514
208.76.128.67 443 4143
109.108.151.126 80 3589
109.108.151.126 80 21494
174.143.121.217 80 30722
173.45.233.170 80 2218
66.235.155.28 80 4367
64.94.107.50 80 1236
76.13.114.90 80 534 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:37:10.310

使用`awk`,`sort`和`column -t`一个漂亮的表格格式输出：

```
awk '{a[$1" "$2]=a[$1" "$2]+$3}END{for(k in a) print k,a[k]}' file |
> sort -nk2 -rnk3 |
> column -t 
192.168.23.20    5989  26601
208.76.128.67    443   9427
64.69.6.116      443   5936
23.15.8.35       80    33944
174.143.121.217  80    30722
109.108.151.126  80    25083
66.235.155.28    80    4367
173.45.233.170   80    2218
204.154.110.99   80    1713
66.129.120.117   80    1514
64.94.107.50     80    1236
130.117.119.220  80    845
76.13.114.90     80    534 
```

**编辑**：

要限制每个端口的前 10 个，您可以通过管道连接到`awk 'c[$2]++<10'`. 演示*（仅限前 4 名）*：

```
$ awk '{a[$1" "$2]=a[$1" "$2]+$3}END{for(k in a) print k,a[k]}' file |
> sort -nk2 -rnk3 |
> column -t |
> awk 'c[$2]++<4' 
192.168.23.20    5989  26601
208.76.128.67    443   9427
64.69.6.116      443   5936
23.15.8.35       80    33944
174.143.121.217  80    30722
109.108.151.126  80    25083
66.235.155.28    80    4367 
```

# xaml - 如何以编程方式在 Windows8 中将 ToggleSwitch 状态设置为打开或关闭？

> ID：15433799
> 
> 赞同：2
> 
> 时间：2013-03-15T13:32:49.160
> 
> 标签：xaml, windows-8, microsoft-metro, toggleswitch

在我的 Metro 应用程序中，我在 Grid 控件中有一个 Toggle Switch。现在我想以编程方式将其状态更改为开或关。我正在使用 Xaml。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T13:39:40.020

使用 ToggleSwitch.IsOn 属性：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.toggleswitch.ison.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.toggleswitch.ison.aspx)

# javascript - jQuery ajax 404，但仍然得到结果

> ID：15433804
> 
> 赞同：0
> 
> 时间：2013-03-15T13:32:54.800
> 
> 标签：javascript

我正在尝试将 ajax 请求包装到库中。我这样做是因为我不需要在每次发出请求时都设置标头。该库是异步加载的，并且有一个 init 方法来设置 api 密钥。该代码似乎有效，但每次我启动 api 调用时都会收到 2 个请求。图书馆非常基础，远未完成。

发出请求的 api 来自基于 node & express 的 api。当在休息客户端发出相同的请求时，它们都会返回正确的数据和 http 状态代码。

这是加载我的库的代码：

```
(function(d) {
    var api_key='MY-API-KEY';
    var js,id='tracking-api',ref=d.getElementsByTagName('script')[0];
    if(d.getElementById(id)){return;}
    js=d.createElement('script');js.id=id;js.async=true;
    js.src="/test/track.api.min.js";
    js.onload=function(){stats.init({api_key:api_key})}
    ref.parentNode.insertBefore(js, ref);
})(document); 
```

未缩小的库：

```
(function(window){

'use strict';

/** 
 *  This library requires jquery to run
 */

var stats= {

    url : 'http://localhost/stats_api/',
    api_key: undefined,

    // The init method will take an api key and set it for our headers
    // used with all api requests
    init: function(opts) {
        if(opts.api_key === undefined) {
            stats.logMsg('Sorry you need to supply an api key');
            return false;
        }
        stats.api_key = opts.api_key;
    },

    // Main api call method nice and simple use - we just give it the
    // method we require and we will be given a json response
    api: function(method, callback) {
        jQuery.ajax({
            url: stats.url + method,
            dataType: 'JSON',
            type: 'GET',
            beforeSend: function(xhr) {
                xhr.setRequestHeader('api_key', stats.api_key);
            },
            success: function(response) {
                callback(response);
            },
            error: function(jqXHR, textStatus, errorThrown) {
                btStats.logMsg(jqXHR);
                btStats.logMsg('Error:' + textStatus);
            }
        });
    },

    // Wrap up the console log function so we can still use it but
    // not break IE8
    logMsg: function(message) {
        if(window.console && console.log) {
            console.log(message);
        }
    }

};

// Attatch our plugin to the window
if(!window.stats){window.stats=stats};

})(window); 
```

我用来发出 api 请求的代码如下所示：

```
stats.api('/visits', function(response){
    console.log(response);
}); 
```

响应总是正确返回，但大多数请求是 404。当它们 404 时，它似乎也第二次运行查询。

所以我想问题是，为什么请求被提出两次？以及为什么 jQuery 在请求成功时返回 404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:07:30.187

好的，事实证明这是一个非常简单的问题，因为我的代码正在跨域运行 jQuery 正在使用 OPTIONS 方法发送预检请求（之前没有注意到），404 来自我的节点 api，因为方法是不支持测试我在 api 中添加了一些中间件

```
app.use(function(req, res, next){

    res.header("Access-Control-Allow-Origin", "*");
    res.header("Access-Control-Allow-Headers", "X-Requested-With");
    res.header("Access-Control-Allow-Headers", "api_key");

    if(req.method == 'OPTIONS') {
        res.send(200);
    }
    else {
        next();
    }

}); 
```

不理想，因为这将允许所有路由的跨域脚本，所以我将不得不稍后锁定它。

# android - 如何像 iphone 或 EasyTouch 应用程序那样做 android 辅助触摸？

> ID：15433805
> 
> 赞同：2
> 
> 时间：2013-03-15T13:32:55.317
> 
> 标签：android, button, floating, assistive

标题几乎说明了一切。我希望辅助浮动按钮位于所有其他应用程序之上（即使在游戏中）。Play Store 中的 EasyTouch 就是一个很好的例子。单击浮动按钮时，我想打开一个浮动布局，就像 EasyTouch 一样。EasyTouch 不需要 root。我到处搜索，但找不到解决方案，所以任何指针都将不胜感激。

非常感谢！

编辑：Easy Touch 可以在这里找到[https://play.google.com/store/apps/details?id=com.shere.assistivetouch](https://play.google.com/store/apps/details?id=com.shere.assistivetouch)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T06:34:28.417

Android 中有几个 API 可以创建系统级视图。看到这个[问题](https://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android)。在我看来，类似触控的辅助应用程序可以构建在它之上，尽管我自己并没有尝试过。

# macos - beginSheetFor 目录开始SheetModalForWindow

> ID：15433806
> 
> 赞同：0
> 
> 时间：2013-03-15T13:32:55.613
> 
> 标签：macos, xcode4.5

我正在更新 10.6 后的一些旧代码。

该代码包含一个保存时间方法，其中包含大约 60 行代码，并且从大约 1/2 十几个地方调用。代码使用了 beginSheetForDirectory，从 10.7 开始不再支持。

我很困惑如何将以前的基于 @selector 的解决方案转换为新的 ^(NSInteger) 表单。我能找到的所有示例都使用内联块，我很困惑如何使该调用成为单独的方法。

save 方法有这个 sig，内部不使用 x：

```
- (void)savePanelDidEnd:(NSOpenPanel *)sheet 
        returnCode:(int)returnCode 
       contextInfo:(void *)x 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:17:22.057

在另一个线程中找到了这个。诀窍是在没有返回处理程序的情况下调用 beginSheetForDirectory，然后立即在其上调用 runModal。当 runModal 返回时，正常处理对话框。

# javascript - 试图让星级控制记住评级

> ID：15433807
> 
> 赞同：1
> 
> 时间：2013-03-15T13:33:01.133
> 
> 标签：javascript, jquery, css

我在这里找到了一个评级“控制”的例子[http://jsfiddle.net/RpfLa/400/](http://jsfiddle.net/RpfLa/400/)它工作正常，但它没有能力在点击星星时保持突出显示。

虽然要让它工作，我只需要添加`class="rated"`一个标签，`s`但它仍然有点复杂。

```
 <!-- a rating with 1 star -->
    <span class='star-rating'>
      <s class='rated'>
       <s>
        <s>
         <s>
          <s>
          </s>
         </s>
        </s>
       </s>
      </s>
     </span> 
```

我只是不知道什么是有效的算法。

所以当我知道评分是多少时

```
var numStars = $(e.target).parentsUntil("span").length+1; 
```

我如何找到一个相关`s`的，并在它之前制作它和所有的`class="rated"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:40:47.030

## [***jsFiddle 演示***](http://jsfiddle.net/RpfLa/472/)

```
$(function() {
    $("div.star-rating > s, div.star-rating-rtl > s").on("click", function(e) {
        $(e.target).parentsUntil("div").andSelf()
        .addClass('rated').end().end()
        .find('.rated').removeClass('rated');
    });
}); 
```

相关链接：[`andSelf`](http://api.jquery.com/andSelf),,,[`end`](http://api.jquery.com/end)[`addClass`](http://api.jquery.com/addClass)

其中大部分都是直观命名的。`andSelf`使用过滤器后将当前元素添加到匹配集合中`parentsUntil`。`end`取消该过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:40:06.650

您可以选择顶部元素并循环遍历所有星星吗？就像是：

```
starSpan = $(".star-rating"); //or whatever selector you want to use for the span
currentStar = starSpan
for (i = 0; i < 5; i++) {
    currentStar = currentStar.children('s :first')
    if (i <= numStars) {currentStar.attr('class','rated')}
    else {currentStar.attr('class','')}
} 
```

这样你也可以处理降低星级的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:39:28.893

```
$(e.target).parent('div').find('.rated').removeClass('rated');
$(e.target).addClass('rated');
$(e.target).parentsUntil("div").addClass('rated'); 
```

[http://jsfiddle.net/KczMC/](http://jsfiddle.net/KczMC/)

# java - 终端中的java未完成

> ID：15433809
> 
> 赞同：1
> 
> 时间：2013-03-15T13:33:07.530
> 
> 标签：java, terminal, xfce

我有一个 java HelloWorld 等价物：

```
public class HelloWorld 
{
        public static void main (String[] args)
        {
                System.out.println("Hello World!");
        }

} 
```

我编译得很好，并在 Ubuntu 12.04 上的 xfce 终端中从命令行执行。

```
java -cp . HelloWorld 
```

什么都没有发生，好像有什么东西挂了。我按下一个键，“Hello World！” 被展示

```
java -vervose -cp . HelloWorld 
```

这会显示所有冗长的内容，然后显示“Hello World！” 然后终止，无需按键。

我打开了一个新终端，用原来的调用重复实验。不需要按键，似乎表明原始终端实例有问题。我真的很想知道是什么。其他命令行程序表现得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:36:57.780

您是否`\`错误地输入了第一个命令的末尾？一直发生在我身上。

这向终端表明您的命令跨越多行（很像在源代码中），因此它等待您完成第二行。您再次按回车键将完成该行..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:41:43.020

只是为了确认（并向您保证）我刚刚在 Ubuntu 12.04 上运行了您的确切代码，并且它按预期工作，没有任何延迟。我正在使用带有 Gnome 桌面的 Ubuntu 12.04（我没有 Xfce）

想到的第一个问题是其他 Java 程序是否以相同的方式运行。

# windows-phone-7.1 - Windows phone 7.1 模拟器不起作用

> ID：15433813
> 
> 赞同：0
> 
> 时间：2013-03-15T13:33:27.750
> 
> 标签：windows-phone-7.1

我必须为 wp 7.1 编写一个小应用程序，并且需要不时对其进行调试。但是 windows phone 模拟器在我的 PC 上不起作用（**Windows 7 32 位，RAM 4GB，视频 ATI Radeon 移动性 3430**）。每次我尝试运行模拟器时，都会收到以下消息： ![在此处输入图像描述](../Images/b217ef348647423222158e9846ff1e1b.png)

我刚刚更新了驱动程序，重新启动了我的电脑。但它仍然不起作用。我看到了几个关于类似问题的主题，但这些建议对我不起作用。请你告诉我问题可能出在哪里？

# java - Spring单例内存使用优化

> ID：15433814
> 
> 赞同：1
> 
> 时间：2013-03-15T13:33:32.863
> 
> 标签：java, spring, garbage-collection, spring-ioc

使用延迟加载的单例 bean 时，Spring 是否会以某种方式优化内存使用？

假设我们有一个代表某个模块（应用程序框架/窗口）的单例 bean，它是惰性的。这个 bean 加载了一些类，这些类是这个框架的组件，并且没有在 Spring 的 IoC 容器中定义。

假设我们关闭了模块`JFrame`，frame 的所有组件通常都应该被垃圾回收，但它们仍然被 spring bean 引用。

spring 在这种情况下会优化内存使用吗？

准确地说，我不是在问原型，而是在问单例。因为我们有奇怪的行为，在关闭窗口时会释放使用 Spring 单例的内存。当我们为窗口使用原型 bean 时，会释放更多的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:43:19.240

Spring 实例化后不会释放单例。在窗口关闭时释放内存可能是在窗口关闭后完成的一些资源释放的结果，并且可能与 Spring bean 没有任何关系。有关更多信息，您应该发布一些代码，您的 bean 是什么，如何打开和关闭窗口。

# android - 片段中的MapFragment，替代品？

> ID：15433820
> 
> 赞同：27
> 
> 时间：2013-03-15T13:34:02.413
> 
> 标签：android, fragment, google-maps-android-api-2, mapfragment

我需要你的帮助...我会一直工作到 3 天。我的应用程序正在处理片段。其中一个片段必须显示来自适用于 Android 的 Google Maps V2 api 的地图。

目前，我正在使用 MapFragment，但毫不奇怪，片段中的片段不是一个好主意，但它可以工作，地图正在显示，我可以编辑它，但是当我切换主片段并返回它时。

> 原因：java.lang.IllegalArgumentException：二进制 XML 文件第 59 行：重复 id 0x7f070041、标签 null 或父 id 0x7f070040 与 com.google.android.gms.maps.MapFragment 的另一个片段
> 
> 在 android.app.Activity.onCreateView(Activity.java:4252)
> 
> 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)

这就是我继续处理另一个片段并返回包含地图的片段的原因。我一直在寻找 3 天来解决这个问题，但没有很好的结果。

为了为您恢复，我有一个 Activity 调用一个片段，该片段在布局文件中包含一个 MapFragment。如果您需要更多，请询问:)

谢谢

编辑：这是在主 Activity 中更改 Fragment 的代码

```
private void swtichFragment(Fragment fragment, Bundle bundle)
{
fragment.setBundle(this, bundle);
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.replace(R.id.rightFragmentPlaceHolder, fragment);
fragmentTransaction.commit();
mRightFragment = fragment;
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2016-04-19T13:28:49.600

使用 SupportMapFragment 克服此错误：

**在片段布局中**

```
<fragment
android:id="@+id/googleMap"
android:name="com.google.android.gms.maps.SupportMapFragment"
android:layout_width="match_parent"
android:layout_height="match_parent" /> 
```

**在你的片段 onCreateView**

```
SupportMapFragment mapFragment = (SupportMapFragment) getChildFragmentManager().findFragmentById(R.id.googleMap);

        if (mapFragment != null) {
            mapFragment.getMapAsync(this);
        } 
```

由于您的布局在`Fragment's`布局中，因此`SupportMapFragment`是您的片段的子布局。因此`getChildFragmentManager()`使用`Fragment's FragmentManager`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-19T23:12:48.393

在 Fragment 的布局中使用 MapView 而不是 MapFragment。记得调用 MapView 的生命周期方法：

*   onCreate(捆绑)
*   onResume()
*   暂停（）
*   onDestroy()
*   onSaveInstanceState（捆绑）
*   onLowMemory()

[如此处](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapView)所述。

顺便提一句。你不应该使用 MapFragment，只有 SupportMapFragment 和[支持库](http://developer.android.com/tools/extras/support-library.html)。

**编辑：**

如果您切换到支持库，您可以在此处使用注释 #1 中的代码： [http ://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-11-07T01:34:22.530

[如此处所述](http://kyuritsolution.blogspot.com/2013/11/how-to-display-mapfragment-inside.html)

在片段内显示 MapFragment（NestedFragment）：在这一点上我相信你有

1.  在清单上添加了必要的权限
2.  将 google play 服务添加为 lib 项目
3.  清单文件中的 api 键。4.

哪里.xml

```
 <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:map="http://schemas.android.com/apk/res-auto"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center"
            android:orientation="vertical" >
         <FrameLayout
           android:layout_width="match_parent"
           android:layout_height="0dp"
           android:layout_weight="1.03"
           android:name="com.google.android.gms.maps.SupportMapFragment"
           android:id="@+id/mapwhere" />

          <TextView
           android:layout_width="match_parent"
           android:layout_height="wrap_content"/>

        </LinearLayout> 
```

班级：

```
 public class WhereFragment extends SupportMapFragment {

    @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
     {
      super.onCreateView(inflater, container, savedInstanceState);
      View root = inflater.inflate(R.layout.where, null, false); 
      initilizeMap();
      return root;
     }

    private void initilizeMap()
     {
      mSupportMapFragment = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.mapwhere);
      if (mSupportMapFragment == null) {
       FragmentManager fragmentManager = getFragmentManager();
       FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
       mSupportMapFragment = SupportMapFragment.newInstance();
       fragmentTransaction.replace(R.id.mapwhere, mSupportMapFragment).commit();
         }
      if (mSupportMapFragment != null)
      {
       googleMap = mSupportMapFragment.getMap();
       if (googleMap != null)
        googleMap.setOnMapClickListener(new OnMapClickListener()
        {
         @Override
         public void onMapClick(LatLng point)
         {
          //TODO: your onclick stuffs
         }
        });
      }
     }
    } 
```

*文档*：

> 嵌套片段您现在可以在片段中嵌入片段。这对于您希望将动态且可重用的 UI 组件放入本身是动态且可重用的 UI 组件的各种情况很有用。例如，如果您使用 ViewPager 创建向左和向右滑动并占用大部分屏幕空间的片段，您现在可以将片段插入到每个片段页面中。
> 
> 要嵌套片段，只需在要添加片段的片段上调用 ​​getChildFragmentManager()。这将返回一个 FragmentManager，您可以像通常从顶级活动中一样使用它来创建片段事务。例如，下面是一些从现有 Fragment 类中添加片段的代码：
> 
> 片段 videoFragment = new VideoPlayerFragment(); FragmentTransaction 事务 = getChildFragmentManager().beginTransaction(); transaction.add(R.id.video_fragment, videoFragment).commit(); 在嵌套片段中，您可以通过调用 getParentFragment() 获取对父片段的引用。
> 
> Android 支持库现在还支持嵌套片段，因此您可以在 Android 1.6 及更高版本上实现嵌套片段设计。
> 
> 注意：当布局包含 . 仅当动态添加到片段时才支持嵌套片段。

*来源：http: [//developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)*

*这也将修复：*

```
 11-06 11:36:01.509: E/AndroidRuntime(6309): FATAL EXCEPTION: main
    11-06 11:36:01.509: E/AndroidRuntime(6309): android.view.InflateException: Binary XML file line #9: Error inflating class fragment
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:710)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:752)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:760)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:760)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:760)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:760)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.view.LayoutInflater.inflate(LayoutInflater.java:495)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.view.LayoutInflater.inflate(LayoutInflater.java:397)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at com.abc.android.ui.WhereFragment.onCreateView(WhereFragment.java:60)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:927)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1104)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
    11-06 11:36:01.509: E/AndroidRuntime(6309):  at a ... 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-15T07:20:41.307

## 在你的课堂上

```
 SupportMapFragment mSupportMapFragment;
      private GoogleMap googleMap;
      int ZOOM_LEVEL=15;

      @Override
      public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
       View mTrackView = inflater
            .inflate(R.layout.mylayout, container, false);
        mSupportMapFragment = SupportMapFragment.newInstance();
        FragmentTransaction fragmentTransaction = getChildFragmentManager().beginTransaction();
        fragmentTransaction.add(R.id.mapwhere, mSupportMapFragment);
        fragmentTransaction.commit();

        return mTrackView;
    }

      @Override
      public void onStart() {
        // TODO Auto-generated method stub
          super.onStart();

        if(mSupportMapFragment!=null){

            googleMap = mSupportMapFragment.getMap();
            if(googleMap!=null){
            googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
            googleMap.getUiSettings().setMyLocationButtonEnabled(false);
            googleMap.setMyLocationEnabled(false);

            CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(
                    new LatLng(12.12122,
                        17.22323), ZOOM_LEVEL);
            googleMap.animateCamera(cameraUpdate);
              }
            }
      } 
```

## 我的布局.xml

```
 <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:map="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:orientation="vertical" >
     <FrameLayout
       android:layout_width="match_parent"
       android:layout_height="0dp"
       android:layout_weight="1.03"

       android:id="@+id/mapwhere" />

      <TextView
       android:layout_width="match_parent"
       android:layout_height="wrap_content"/>

    </LinearLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-23T10:49:31.737

在您的**布局文件中**

```
<fragment
                android:id="@+id/map"
                android:name="com.google.android.gms.maps.SupportMapFragment"
                android:layout_width="match_parent"
                android:layout_height="match_parent"/> 
```

在您的片段中**，** 使用**片段布局文件**`onCreate()`中引用**地图片段****`childFragmentManager`**

 **```
// Obtain the SupportMapFragment and get notified when the map is ready to be used.
        val mapFragment: SupportMapFragment = childFragmentManager.findFragmentById(R.id.map) as SupportMapFragment
        // Set callback on the fragment
        mapFragment.getMapAsync(this) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-18T02:43:21.713

经过很多错误，我终于做到了，这是我的 MapView 片段类：-

```
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.CameraPosition;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import com.serveroverload.yago.R;

/**
 * @author 663918
 *
 */
public class HomeFragment extends Fragment implements LocationListener {
    // Class to do operations on the Map
    GoogleMap googleMap;
    private LocationManager locationManager;

    public static Fragment newInstance() {
        return new HomeFragment();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.home_fragment, container, false);
        Bundle bdl = getArguments();

        // setuping locatiomanager to perfrom location related operations
        locationManager = (LocationManager) getActivity().getSystemService(
                Context.LOCATION_SERVICE);

        // Requesting locationmanager for location updates
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 1, 1, this);

        // To get map from MapFragment from layout
        googleMap = ((MapFragment) getActivity().getFragmentManager()
                .findFragmentById(R.id.map)).getMap();

        // To change the map type to Satellite
        // googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);

        // To show our current location in the map with dot
        // googleMap.setMyLocationEnabled(true);

        // To listen action whenever we click on the map
        googleMap.setOnMapClickListener(new OnMapClickListener() {

            @Override
            public void onMapClick(LatLng latLng) {
                /*
                 * LatLng:Class will give us selected position lattigude and
                 * longitude values
                 */
                Toast.makeText(getActivity(), latLng.toString(),
                        Toast.LENGTH_LONG).show();
            }
        });

        changeMapMode(3);

        // googleMap.setSatellite(true);
        googleMap.setTrafficEnabled(true);
        googleMap.setBuildingsEnabled(true);
        googleMap.setMyLocationEnabled(true);

        return v;
    }

    private void doZoom() {
        if (googleMap != null) {
            googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(
                    new LatLng(18.520430, 73.856744), 17));
        }
    }

    private void changeMapMode(int mapMode) {

        if (googleMap != null) {
            switch (mapMode) {
            case 0:
                googleMap.setMapType(GoogleMap.MAP_TYPE_NONE);
                break;

            case 1:
                googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
                break;

            case 2:
                googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
                break;

            case 3:
                googleMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
                break;

            case 4:
                googleMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
                break;

            default:
                break;
            }
        }
    }

    private void createMarker(double latitude, double longitude) {
        // double latitude = 17.385044;
        // double longitude = 78.486671;

        // lets place some 10 random markers
        for (int i = 0; i < 10; i++) {
            // random latitude and logitude
            double[] randomLocation = createRandLocation(latitude, longitude);

            // Adding a marker
            MarkerOptions marker = new MarkerOptions().position(
                    new LatLng(randomLocation[0], randomLocation[1])).title(
                    "Hello Maps " + i);

            Log.e("Random", "> " + randomLocation[0] + ", " + randomLocation[1]);

            // changing marker color
            if (i == 0)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_AZURE));
            if (i == 1)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_BLUE));
            if (i == 2)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_CYAN));
            if (i == 3)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_GREEN));
            if (i == 4)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_MAGENTA));
            if (i == 5)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_ORANGE));
            if (i == 6)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_RED));
            if (i == 7)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_ROSE));
            if (i == 8)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_VIOLET));
            if (i == 9)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_YELLOW));

            googleMap.addMarker(marker);

            // Move the camera to last position with a zoom level
            if (i == 9) {
                CameraPosition cameraPosition = new CameraPosition.Builder()
                        .target(new LatLng(randomLocation[0], randomLocation[1]))
                        .zoom(15).build();

                googleMap.animateCamera(CameraUpdateFactory
                        .newCameraPosition(cameraPosition));
            }
        }

    }

    /*
     * creating random postion around a location for testing purpose only
     */
    private double[] createRandLocation(double latitude, double longitude) {

        return new double[] { latitude + ((Math.random() - 0.5) / 500),
                longitude + ((Math.random() - 0.5) / 500),
                150 + ((Math.random() - 0.5) * 10) };
    }

    @Override
    public void onLocationChanged(Location location) {

        if (null != googleMap) {
            // To get lattitude value from location object
            double latti = location.getLatitude();
            // To get longitude value from location object
            double longi = location.getLongitude();

            // To hold lattitude and longitude values
            LatLng position = new LatLng(latti, longi);

            createMarker(latti, longi);

            // Creating object to pass our current location to the map
            MarkerOptions markerOptions = new MarkerOptions();
            // To store current location in the markeroptions object
            markerOptions.position(position);

            // Zooming to our current location with zoom level 17.0f
            googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(position,
                    17f));

            // adding markeroptions class object to the map to show our current
            // location in the map with help of default marker
            googleMap.addMarker(markerOptions);
        }

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onDestroyView() {
        // TODO Auto-generated method stub
        super.onDestroyView();

        locationManager.removeUpdates(this);

        android.app.Fragment fragment = getActivity().getFragmentManager()
                .findFragmentById(R.id.map);
        if (null != fragment) {
            android.app.FragmentTransaction ft = getActivity()
                    .getFragmentManager().beginTransaction();
            ft.remove(fragment);
            ft.commit();
        }
    }

} 
```

我的 Xml 文件如下所示：-

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.MapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

结果看起来像这样：-

[![在此处输入图像描述](../Images/f4e6be9a797a7fa130f46419296e987a.png)](https://i.stack.imgur.com/yFugi.png)

**需要注意的最重要的一点是，不要将 app.Fragment 与 v4.Fragments 混合使用，否则应用程序会严重崩溃。**

如您所见，我已使用 app.Fragment 附加和删除我的 MapView 片段

希望它会帮助某人

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-23T23:11:00.650

`FragmentContainerView`您可以尝试在from包中添加 MapFragment `androidx` `Fragment`：

*   [片段容器视图](https://developer.android.com/reference/androidx/fragment/app/FragmentContainerView)
*   从：`implementation "androidx.fragment:fragment:$1.2.4"`
*   检查：[https ://developer.android.com/jetpack/androidx/releases/fragment](https://developer.android.com/jetpack/androidx/releases/fragment)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-24T06:21:12.160

```
 <fragment
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:name="com.google.android.gms.maps.SupportMapFragment"
            android:id="@+id/location_map"
            android:layout_above="@id/atmLocation_recyclerView"
            />

View root= inflater.inflate(R.layout.fragment_a_t_m_locations, container, false);
    SupportMapFragment mapFragment = (SupportMapFragment) getChildFragmentManager().findFragmentById(R.id.location_map);
    mapFragment.getMapAsync(googleMap -> {
        mMap=googleMap;
        if(mMap!=null){
            mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
        }
    }); 
```**

# mysql - mysql - 多个插入索引

> ID：15433822
> 
> 赞同：1
> 
> 时间：2013-03-15T13:34:06.253
> 
> 标签：mysql, sql

我有以下设置：

像这样的查询：

```
 "INSERT INTO table (c1, c2,...) values (v01, v02,...), (v11, v12,...)..." 
```

该表有一个自动递增的主键。我需要知道插入的每一行的索引是什么。

一种方法是获取最后一行索引，插入的索引从 lastRowIndex - nrRows 到 lastRowIndex。

我的问题/不确定性是：如果另一个插入与在同一个表中插入行的插入并行运行（例如另一个用户调用相同的函数），是否有机会（无论多么小）在这些之间插入一行由前面所述的查询生成？再次......非常重要（原因很清楚......它会杀死 ids 结构）这不会发生，所以我需要确定。

或者无论出于何种原因，id 都不连续的任何机会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:39:00.333

> 假设有两个事务正在运行，每个事务都将行插入到具有一`AUTO_INCREMENT`列的表中。一个事务使用`INSERT ... SELECT`插入 1000 行的语句，另一个事务使用插入一行的简单`INSERT`语句：
> 
> ```
> Tx1: INSERT INTO t1 (c2) SELECT 1000 rows from another table ...
> Tx2: INSERT INTO t1 (c2) VALUES ('xxx'); 
> ```
> 
> InnoDB 无法预先知道将从`SELECT`in`INSERT`语句中的 检索多少行`Tx1`，并且随着语句的进行，它一次分配一个自动增量值。使用表级锁，保持到语句的末尾，一次只能`INSERT`执行一个引用表 t1 的语句，并且不同语句生成自增数不会交错。该语句生成的自动增量值将是连续的，并且该语句`Tx1` `INSERT ... SELECT`使用的（单个）自动增量值将小于或大于所有用于 的自动增量值，具体取决于哪个语句首先执行。`INSERT``Tx2``Tx1`
> 
> **只要 SQL 语句在从二进制日志重放时（使用基于语句的复制时，或在恢复场景中）以相同的顺序执行，结果将`Tx1`与`Tx2`第一次运行时相同。**因此，表级锁一直保持到语句结束，使得`INSERT`使用自动增量的语句可以安全地用于基于语句的复制。但是，当多个事务同时执行插入语句时，这些锁会限制并发性和可伸缩性。

[参考](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html)

# java - Java 7 的 nio.file 包在创建新文件时非常慢

> ID：15433823
> 
> 赞同：6
> 
> 时间：2013-03-15T13:34:15.363
> 
> 标签：java, file-io, java-7, nio2

我正在尝试从 java 程序创建 300M 文件，我从旧文件 API 切换到新的 java 7 nio 包，但新包的运行速度比旧包还要慢。

我发现 CPU 使用率比使用旧文件 API 时要少，但我正在运行这个简单的代码，我得到 0.5Mbytes/sec 的文件传输速率，并且来自 java 的写入正在读取一个磁盘并写入另一个（写入是访问磁盘的唯一进程）。

```
Files.write(FileSystems.getDefault().getPath(filePath), fiveToTenKBytes, StandardOpenOption.CREATE); 
```

有没有希望在这里获得合理的吞吐量？

* * *

**更新：**

我正在从大文件中解压缩 3 亿个 5-10k 字节的图像文件。我有 3 个磁盘，1 个本地磁盘和 2 个 SAN 连接（大文件的典型吞吐率约为 20MB/秒）。

我还尝试了这段代码，它将速度提高到几乎不低于 2MB/秒的吞吐量（解压这些文件需要 9 天）。

```
ByteBuffer byteBuffer = ByteBuffer.wrap(imageBinary, 0, (BytesWritable)value).getLength());
FileOutputStream fos = new FileOutputStream( imageFile );
fos.getChannel().write(byteBuffer);
fos.close(); 
```

我从本地磁盘读取并写入 SAN 附加磁盘。我正在读取 Hadoop SequenceFile 格式，hadoop 通常能够使用基本相同的代码以 20MB/秒的速度读取这些文件。

除了超级慢之外，唯一看起来不合适的是，我看到读取 IO 比写入 IO 多大约 2:1，尽管序列文件是 gzip 压缩的（尽管图像实际上得到了 1:1 的比例），所以压缩文件应该是大约。1:1 与输出。

* * *

**第二次更新**

看着`iostat`我看到一些奇数，我们在这里查看 xvdf，我有一个 java 进程读取`xvdb`和写入，`xvdf`并且没有其他进程处于活动状态`xvdf`

```
iostat -d 30
Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
xvdap1            1.37         5.60         4.13        168        124
xvdb             14.80       620.00         0.00      18600          0
xvdap3            0.00         0.00         0.00          0          0
xvdf            668.50      2638.40       282.27      79152       8468
xvdg           1052.70      3751.87      2315.47     112556      69464 
```

读取`xvdf`是写入的 10 倍，这令人难以置信。

```
fstab
/dev/xvdf       /mnt/ebs1       auto    defaults,noatime,nodiratime     0       0
/dev/xvdg       /mnt/ebs2       auto    defaults,noatime,nodiratime     0       0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:00:23.037

如果我正确理解了您的代码，那么您正在将 300M 文件拆分/写入小块（“ `fiveToTenKBytes`”）。

考虑使用[Stream 方法](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newOutputStream%28java.nio.file.Path,%20java.nio.file.OpenOption...%29)。

如果您正在写入磁盘，请考虑使用 BufferedOutputStream 包装 OutputStream。

例如：

```
try (BufferedOutputStream bos = new BufferedOutputStream(Files.newOutputStream(Paths.getPath(filePathString), StandardOpenOption.CREATE))){

 ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:54:39.877

我认为您的缓慢来自创建新文件，而不是实际传输。我相信在 Linux 中创建文件是一个同步操作：系统调用在创建文件和更新目录之前不会返回。这表明您可以做几件事：

*   将多个写入线程与单个读取线程一起使用。读取器线程会将源文件中的数据读取到 a`byte[]`中，然后创建一个`Runnable`从该数组写入输出文件的 a。使用有很多线程的线程[池](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)——可能是 100 或更多——因为他们将花费大部分时间等待`creat`完成。根据您拥有的内存量设置此池的入站队列的容量：如果您的文件大小为 10k，那么 1,000 的队列容量似乎是合理的（没有充分的理由让读者远远领先于作者，因此您甚至可以使用两倍线程数的容量）。
*   而不是 NIO，使用基本`BufferedInputStream`的 s 和`BufferedOutputStreams`. 您的问题是系统调用，而不是内存速度（NIO 类旨在防止堆内存和堆外内存之间的复制）。

我将假设您已经知道不要尝试将所有文​​件存储到单个目录中。甚至在一个目录中存储数百个文件。

作为另一种选择，您是否考虑过使用 S3 进行存储？我猜它的存储桶键比实际目录效率高得多，并且有一个[文件系统](http://code.google.com/p/s3fs/)可以让您像访问文件一样访问存储桶（我自己没有尝试过）。

# iphone - 响应者链 - 如果用户在部分单元格上滚动，则使 UITableView 不滚动

> ID：15433825
> 
> 赞同：1
> 
> 时间：2013-03-15T13:34:20.183
> 
> 标签：iphone, ios, xcode, cocoa-touch, first-responder

所以我有一个单元格，但是`contentView`如果用户滚动，单元格中有一个视图，我不希望表格滚动。

那么这甚至可能吗？

根据响应者链，表格将首先接受滑动事件，它会滚动，响应者链上的其他对象（单元格）根本不会收到该事件。

所以我想要这个 - 检查获得滑动的单元格的表格，检查该部分是否是它可以滚动的部分，以及它是否只是滚动。但如果不是，那么它必须将事件转发到单元格。

有人可以帮我解决这个问题吗？

# symfony-2.1 - 自定义选择类型字段

> ID：15433826
> 
> 赞同：1
> 
> 时间：2013-03-15T13:34:21.593
> 
> 标签：symfony-2.1, symfony-forms

请帮我！

我正在尝试为具有颜色的产品制作表格。颜色是数据库中的对象。

```
$builder
    ->add('product')
    ->add('colors', 'choice', 
        array(
            // $colors is array of objects [id: {id: 1, name: "red", "img": "pic_path"} 
            'choices'  => $colors, 
            'expanded' => true
        )
    )
; 
```

我想获得一个带有自定义单选输入的表单，其中包含来自 Color-object 的名称和图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:57:08.670

我有同样的问题，我的问题通过以下解决方案解决

```
 $dql="SELECT c.id, c.name FROM YourBundle:YourTable c  ORDER BY c.id";
    $query = $em->createQuery($dql)->getArrayResult();

    for ($i=0; $i < count($query) ; $i++) 
            { 
                $queryArray[$query[$i]['id']]=$query[$i]['name'];
            }
    $form = $this->createFormBuilder()

            ->add('colors', 'choice', array('choices' => array( $queryArray)))

            ->getForm(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:44:33.140

如果颜色是您项目中的实体，那么您应该改用实体字段类型。

```
$builder
  ->add('product')
  ->add('colors', 'entity', 
    array(
        'class'    => 'WhateverYourBundle:Color',
        'multiple' => false, 
        'expanded' => true
    )
); 
```

如果产品只有一些颜色可用，那么您也可以将“query_builder”选项传递给数组。请参阅文档： [http ://symfony.com/doc/2.0/reference/forms/types/entity.html](http://symfony.com/doc/2.0/reference/forms/types/entity.html)

哦，别忘了在你的颜色实体中添加一个 __toString() 方法，如果那里还没有的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T23:59:39.423

您可以在本文档中找到有关自定义字段类型和自定义模板的[文档](http://symfony.com/doc/2.1/cookbook/form/create_custom_field_type.html)。

我会创建一个`choice_with_images`自定义类型来扩展该`choice`类型并为它制作一个自定义模板。

此外，您的代码中类型 name 后面缺少引号`choice`。

# vb.net - 如何在不安装的情况下添加 AccessDataBaseEngine

> ID：15433829
> 
> 赞同：1
> 
> 时间：2013-03-15T13:34:48.967
> 
> 标签：vb.net, visual-studio-2010

我已经构建了一个想要访问 Excel 页面的应用程序，只有在机器上安装了 Access Database Engine 时它​​才能正常工作，现在的问题是如何在不在其他机器上安装 Access Database Engine 或如何制作的情况下使应用程序正常工作作为依赖项安装而不单独安装，但会自动安装。我正在使用一键设置来开发设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:22:10.837

如果您想使用 Access Database Engine，那么我认为您必须在安装包中包含他们的可[再分发安装程序。](http://www.microsoft.com/en-us/download/details.aspx?id=13255)根据您的操作，如果用户已经安装了 Excel，您可以改用[Excel 互操作](http://msdn.microsoft.com/en-us/library/ms173186%28v=vs.80%29.aspx)。

# c# - WPF：程序集解析器

> ID：15433830
> 
> 赞同：2
> 
> 时间：2013-03-15T13:34:52.477
> 
> 标签：c#, wpf, xaml, .net-assembly

我有以下 XAML 定义：

```
xmlns:controls="clr-namespace:MyControls;assembly=MyProduct.MyControls" 
```

假设我的产品将 dll MyProduct.MyControls 加载了 2 次（2 个不同的版本）。例如版本 1.0 和版本 2.0。

有没有办法为 XAML 显式解析程序集“MyProduct.MyControls”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:44:48.450

根据 MSDN ( [http://msdn.microsoft.com/en-us/library/ms747086.aspx#Mapping_To_Custom_Classes_and_Assemblies](http://msdn.microsoft.com/en-us/library/ms747086.aspx#Mapping_To_Custom_Classes_and_Assemblies) )，您可以使用[AssemblyName](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.aspx)语法指定程序集的全名：

```
xmlns:controls="clr-namespace:MyControls;assembly=MyProduct.MyControls, Version=1.0.0.0, Culture=en, PublicKeyToken=xyz" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:44:17.143

那么根据[这个](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/2028960f-9c3b-47d0-b7da-7f84f34b0df0)你不会成功。

> 我刚刚得到确认，XAML 解析器会故意阻止您使用相同程序集的多个版本，这意味着如果旧版本的程序集已经存在，即使您的 XAML 文档正在尝试引用新版本，WPF 也会尝试使用该程序集.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T13:44:01.230

[通过阅读MSDN](http://msdn.microsoft.com/en-gb/library/ms747086%28v=vs.90%29.aspx)站点上的此链接，您似乎使用 AssemblyName 来加载程序集，因此您可能会使用 MyProduct.MyControlsV1 作为 AssemblyInfo.cs 中的名称来编译您的不同版本。

所以路径会变成

```
xmlns:controls="clr-namespace:MyControls;assembly=MyProduct.MyControlsV1"
xmlns:controls="clr-namespace:MyControls;assembly=MyProduct.MyControlsV2" 
```

# spring - JdbcPagingItemReader 联合多个查询

> ID：15433832
> 
> 赞同：1
> 
> 时间：2013-03-15T13:34:56.797
> 
> 标签：spring, union, paging, batch-processing

我正在使用 Spring Batch。我有一个由多个 xml 文件元素组成的 SQL 语句。所有的结果都来自同一个表，但是每个语句都有不同的 XXX 作为 keyValue。

我已经扩展了两个 JdbcCursorItemReader，我使用 setSql 来设置 sql 字符串，这工作正常。但是性能不是很好，它不能是多线程的。然后我切换到扩展 SqlPagingQueryProviderFactoryBean 并向我的 tasklet 添加线程池执行程序，对于一个简单的 sql 语句，我注意到时间显着减少。

我需要知道的是如何将我的复杂 sql 与 unions 和 SqlPagingQueryProviderFactoryBean 一起使用，这可能吗？当然，这个组件可以处理的不仅仅是一个简单的 select from where 子句。

# php - 设计具有多个变量的工作调度数据库？

> ID：15433836
> 
> 赞同：2
> 
> 时间：2013-03-15T13:35:07.310
> 
> 标签：php, mysql, database-schema

我正在尝试为我正在处理的计划应用程序设计数据库模式。我有办法做到这一点，但它似乎有点笨拙。由于涉及的变量，我很好奇这是否是野兽的本性。

该应用程序类似于工作板，但具有调度组件。您可以创建一个工作（或“项目”），然后设置工作日期，并说明该工作有哪些职位空缺。其他人可以报名参加这项工作，要么被雇用，要么被拒绝。

问题：

- 该工作不会同时运行日期，因此可能有 10 个工作日分布在两个月内。

-职位因工作而异。他们是从一个列表中挑选出来的，但一个工作可能有 10 个独特的空缺职位，而另一个可能有 5 个。

我的想法，绝对让人觉得笨拙的是，将“openPositions”作为一个带有 [jobId, positionName, date] 的表和另一个带有“jobApply”的表和 [jobId, positionName, date, acceptFlag]。所以每个日期对每个职位都有一个条目。显然，这会成倍增长（openPositions 将有 [#days * #positions] 行）。我可以通过强迫每天都有空缺职位的人来减少这种情况，但我想在日程安排上提供灵活性。

这个项目作为一个整体比我一直在工作的东西要大，但我很高兴能够解决它。我很想听听任何想法，如果需要澄清，请告诉我。

**编辑：**快速不那么抽象的例子：

**项目一**

**项目日期：** 3/1、3/5、3/6、3/9、4/2、4/5、4/8

**所需职位：**项目负责人、程序员 1、程序员 2、建模师、关卡设计师、实习生

所以我的（笨重的）版本将进入 openPositions 为：

（3/1，项目负责人），（3/5，项目负责人），（3/6，项目负责人），（3/1，程序员 1）等等。

同样，显然这有很多条目，这是我关心的（在这种情况下，7 个日期 x 6 个位置，所以数据库中有 42 行）。希望这个对你有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:10:09.277

我不是很清楚，但是您是否知道开始工作时所需的职位清单，每个工作日的职位都一样吗？

如果是这样，请制作一个包含两列（jobID，position）的表“positions_required”，并在其中输入job_id和所需的职位。

这样，您将在另一个表中输入每个项目的工作日期。

您将有 3 个表，但只有 1 + m + n 记录（关系 1:m (jobs:positions) 和 1:n (jobs:dates) ））而不是 1+m*n （如您的场景）

# c1-cms - MvcPlayer 函数 - 如何从导入的程序集中引用控制器

> ID：15433837
> 
> 赞同：3
> 
> 时间：2013-03-15T13:35:14.677
> 
> 标签：c1-cms

我放入了一个包含 MVC 控制器的程序集，我想将其用作 MvcPlayer 函数的目标。

当我尝试渲染页面时，虽然函数输出表明找不到我的控制器。

是否有一种特殊的技术可以让 Composite 注册我添加到 bin 目录的程序集中可用的控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:13:14.673

所以我对能够使用 StructureMap 来解决这个问题的怀疑是有根据的。

StructureMap 是 .NET 的 DI/IoC 工具。不过，您可以使用任何其他 DI/IoC 工具（包括您自己的手动启动工具）以类似的方式解决此问题。

如果您没有使用 StructureMap 的经验，我建议您阅读一些有关它的文档。这是一个很好的视频教程，您可以使用：

*   [http://www.youtube.com/watch?v=_0LIovfNC2Q](http://www.youtube.com/watch?v=_0LIovfNC2Q)

以下文章介绍了 StructureMap 并讨论了我用于解决问题的自定义控制器工厂解决方案：

*   [http://www.c-sharpcorner.com/uploadfile/dhanaid/introduction-to-structure-map/](http://www.c-sharpcorner.com/uploadfile/dhanaid/introduction-to-structure-map/)

如果您对自定义控制器工厂不太了解，我会阅读以下文章。本文还为您提供了一些很好的线索，让您了解如何进行自己的手动 IoC（而不是使用 StructureMap 等）。

*   [http://develoq.net/2010/custom-controller-factory-in-asp-net-mvc/](http://develoq.net/2010/custom-controller-factory-in-asp-net-mvc/)

一句警告！在引用具有对先前版本 MVC3 的显式引用的库时，您可能会遇到问题。据我所知，Composite C1 v4.0 beta2 和 MvcPlayer 函数依赖于 MVC4 及其相关库。为了防止版本冲突，将以下部分添加到您的 web.config 以确保引用始终针对正确的版本：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Helpers" 
           publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Mvc" 
           publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="4.0.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.WebPages" 
           publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
    </dependentAssembly>
   </assemblyBinding>
</runtime> 
```

好的，现在您已经掌握了速度，下面是采用 StructureMap 方法所需的所有代码。

我有一个 StructureMap 控制器约定：

```
public class ControllerConvention : ITypeScanner
{
    public void Process(Type type, PluginGraph graph)
    {
        if (typeof(IController).IsAssignableFrom(type) && !type.IsAbstract && !type.IsGenericType)
        {
            graph.AddType(typeof(IController), type, type.Name.Replace("Controller", "").ToLower());
        }
    }
} 
```

控制器约定告诉 StructureMap 如何找到我的 MVC 控制器类，这很容易做到，因为我只需要查找实现 IController 接口的类。

对于您的 StructureMap 初始化，通常在应用程序启动时完成（有关示例，请参见结构图文档），您可以通过程序集扫描控制器以及控制器约定：

```
var controllerAssemblies = new List<Assembly>()
    {
        typeof(YourController).Assembly,
        typeof(AnotherController).Assembly
    };

ObjectFactory.Initialize(initialization =>
{
    initialization.Scan(scan =>
    {
        foreach (var assembly in controllerAssemblies)
        {
            scan.Assembly(assembly);
        }

        scan.With<ControllerConvention>();
    });
}); 
```

现在我们需要一个自定义控制器工厂：

```
public class StructureMapControllerFactory : DefaultControllerFactory 
{ 
    protected override IController GetControllerInstance(Type controllerType) 
    {
        try 
        {
            return ObjectFactory.GetInstance(controllerType) as Controller;
        }
        catch (StructureMapException) 
        {
            System.Diagnostics.Debug.WriteLine(ObjectFactory.WhatDoIHave());
            throw;
        }
    }
} 
```

最后，我们需要在 App_Code/Composite/AspNet/MvcPlayer/Route.cs 类中注册我们自定义控制器工厂的使用：

```
ControllerBuilder.Current.SetControllerFactory(new StructureMapControllerFactory()); 
```

# javascript - 为图表按摩数据？

> ID：15433841
> 
> 赞同：1
> 
> 时间：2013-03-15T13:35:27.873
> 
> 标签：javascript, php, charts, bar-chart

我正在为客户端应用程序创建一些条形图。我遇到的问题是数据主要由小值组成，但很少有大值基本上破坏了可视化。

一些值的例子：

```
96,942,535,341 
23,598 
1,219,203 
958,201
100,654
112,911 
```

我的最大高度为 250 像素。所以，现在我找到数据集中的最大值并将其设置为最大高度。然后我计算其余值的像素/值比率。如果您进行数学计算，您会发现其他条甚至没有达到 1 个像素！

有没有人有更好的方法来计算这些比率以使图表在视觉上工作......或者我沉没了？

我在后端使用 php 进行计算，并使用 javascript 例程来动态创建图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:54:18.377

一些选项：

*   使用[对数刻度](https://xkcd.com/1162/)。
*   取最大值和平均值之间的任意值，并将其作为图表的最大高度。这有效地“切断”了大值。不幸的是，这需要大量的反复试验才能找到最佳位置，并且很大程度上取决于您拥有的数据类型。

# yum - 为什么 repoquery 没有列出包中的文件

> ID：15433843
> 
> 赞同：6
> 
> 时间：2013-03-15T13:35:31.210
> 
> 标签：yum

`yum info eclipse-jdt`显示有关包的信息。但是，`repoquery -lq eclipse-jdt`并没有显示该包中有哪些文件，因为此脚本显示：

```
[tbrannon@oc bin]$ yum info eclipse-jdt
Loaded plugins: fastestmirror refresh-
              : packagekit, security, versionlock
Loading mirror speeds from cached hostfile
KVM-WIN                                                  | 2.6 kB     00:00     
RHEL-6-x86_64-openafs                                    | 3.2 kB     00:00     
RHEL-6-x86_64-rational-linux                             | 2.6 kB     00:00     
RHEL-63-x86_64                                           | 3.7 kB     00:00     
RHEL-63-x86_64-updates                                   | 2.9 kB     00:00     
Installed Packages
Name        : eclipse-jdt
Arch        : x86_64
Epoch       : 1
Version     : 3.6.1
Release     : 6.13.el6
Size        : 26 M
Repo        : installed
From repo   : RHEL-63-x86_64
Summary     : Eclipse Java Development Tools
URL         : http://www.eclipse.org/
License     : EPL
Description : Eclipse Java Development Tools.  This package is required to use
            : Eclipse for developing software written in the Java programming
            : language.

[tbrannon@oc bin]$ repoquery -lq eclipse-jdt
[tbrannon@oc bin]$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-28T03:36:37.953

您必须为 repoquery 启用插件才能在 Red Hat 系统上工作，否则它不会看到来自 RHN 的软件包。尝试运行

```
repoquery --plugins -l eclipse-jdt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:22:48.437

您需要以 root 身份或通过 sudo 运行并添加选项`--pkgnarrow=installed`。该`-q`选项没有任何作用，您可以将其排除在外。试试这个：

```
repoquery -l eclipse-jdt --pkgnarrow=installed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T16:27:23.107

就我而言，设置代理解决了 repoquery 挂起：

```
# export HTTP_PROXY=http://proxy.spacely-sprockets.com:80
# export http_proxy=http://proxy.spacely-sprockets.com:80
# repoquery -i ... 
```

# java - 内容的最大长度？

> ID：15433844
> 
> 赞同：4
> 
> 时间：2013-03-15T13:35:32.047
> 
> 标签：java, android, httpurlconnection

我正在尝试使用 连接服务器`HttpURLConnection`，但 PUT 方法有问题。
我需要发送一个包含*1500 个字符*（或更多）的字符串，但在这种情况下，服务器会产生超时并返回**500 - server internal error**。
如果我发送的字符串少于*1400 个字符*，我没有问题，服务器返回**OK**。

我的代码如下：

```
public String connectToServer(String prototype) {
    String responseString = "";

    try {
        BufferedReader in = new BufferedReader(new InputStreamReader(openURLForInput(new URL(URL), USERNAME, PASSWORD, prototype)));
        String line;
        while ((line = in.readLine()) != null) {
            System.out.println(line);
            responseString += line;
        }

    } catch (IOException e) {
        e.printStackTrace();
        responseString = e.toString();
    }

    return responseString;
} 
```

//-----------------------

```
public InputStream openURLForInput(URL url, String uname, String pword, String content) throws IOException {
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setDoInput(true);
    conn.setDoOutput(true);
    conn.setRequestProperty("Authorization", userNamePasswordBase64(uname, pword)); // I know this is OK
    conn.addRequestProperty("Content-type", "application/xml; charset=utf-8");

    //conn.setChunkedStreamingMode(8 * 1024);

    conn.setRequestMethod("PUT");
    conn.connect();

    OutputStream output = conn.getOutputStream();
    OutputStreamWriter osw = new OutputStreamWriter(output, "UTF-8");
    BufferedWriter writer = new BufferedWriter(osw);
    writer.write(content); // content length  > 1400 characters
    writer.close();
    output.close();

    int status = conn.getResponseCode();
    Log.i("STATUS", status + "");
    Log.i("STATUS_ERROR", conn.getResponseMessage());

    return conn.getInputStream();
} 
```

我尝试添加线条

```
conn.setFixedLengthStreamingMode(contentLength)
conn.setChunkedStreamingMode(8 * 1024); 
```

但是无论如何服务器的答案都是错误的。

**更新：**

我可以检测到问题。出于某种原因，当我尝试在请求中发送大型正文时，服务器会产生超时**但不是所有网络**，只有一些网络。我使用安全连接 SSL，也许这会带来问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:22:56.600

也许这是一个网络 MTU 问题，我会说你在这方面进行调查。

这是一个与 windows 相关的表格：

```
Network             MTU (bytes)
-------------------------------
16 Mbps Token Ring        17914
4 Mbps Token Ring          4464
FDDI                       4352
Ethernet                   1500
IEEE 802.3/802.2           1492
PPPoE (WAN Miniport)       1480
X.25                        576 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:49:04.587

我建议您使用Kevin Sawicki提供的非常有用的[**HTTP-REQUEST库...**](https://github.com/kevinsawicki/http-request)

它帮助了我很多次！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:16:45.323

服务器正在响应 500 - 服务器内部错误。所以你应该检查服务器的实现。它应该有超过该内容长度的限制。
我有一个应用程序可以处理很多服务器 http 请求，对我来说，你的问题确实是服务器。主要证据是您的代码适用于小于或等于 1415 个字符的内容。

# python - 剥离未使用函数的依赖关系

> ID：15433845
> 
> 赞同：1
> 
> 时间：2013-03-15T13:35:36.470
> 
> 标签：python

我只是在部署一个使用 Matplotlib 和 Numpy 作为依赖项的 Django 应用程序。这是一个小应用程序，最后，依赖代码比应用程序代码多很多。在为我不直接在应用程序中使用的方法设置生产环境中的依赖项时，我也遇到了很多错误。

是否有一种方法可以去除依赖项，使其仅包含应用程序运行所需的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:39:26.610

不，对于 Python，没有普遍适用的方法。简单模块有一些启发式方法，但它们会惨遭失败。

在 NumPy 的特定情况下，您必须首先找出其底层 C 和 Fortran 代码的哪些部分需要，哪些不需要，这本身就是一个相当困难的问题。即使你能解决这个问题，NumPy 也在`__import__`多个地方使用，包括在编译的扩展模块中，这使得几乎不可能确定要导入代码的哪些部分。

# image - 从相机拍摄肖像后，在我的图像视图中获取旋转图像

> ID：15433846
> 
> 赞同：1
> 
> 时间：2013-03-15T13:35:36.297
> 
> 标签：image, email, camera, image-gallery

我的要求是从相机拍照或从图库中选择图像并将其显示在图像视图中。显示图像后，无论选择何种图像，我都将作为邮件发送。我的问题是每次我从它旋转的相机中拍摄肖像照片并在图像视图中显示它。如何解决这个问题。

提前致谢。

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.skicka_bild_activity);

        share = new Sharedprefs(SkickaBild.this);

        emailSendButton = (Button) findViewById(R.id.skicka_button);
        emailSendButton.setOnClickListener(this);

        emailSendButton.setEnabled(false);

        Button camaraOnButtton = (Button) findViewById(R.id.fotografera_button);
        camaraOnButtton.setOnClickListener(this);

        Button galleryOpenButton = (Button) findViewById(R.id.valj_bild_button);
        galleryOpenButton.setOnClickListener(this);

        imageSetImageView = (ImageView) findViewById(R.id.imageView_skick);

        maxWidth = share.getmaxwidth();

        mContentResolver = getContentResolver();
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.skicka_button:

            if (isImageViewFilled) {

                showEmailComposer();
            } else {
                AlertDialog.Builder builder = new AlertDialog.Builder(
                        SkickaBild.this);
                builder.setTitle("Alert !!");
                builder.setMessage("Pick a image before you send the email")
                        .setCancelable(false)
                        .setPositiveButton("Ok",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int id) {
                                        dialog.cancel();

                                    }
                                });
                AlertDialog alert = builder.create();
                alert.show();
            }

            break;

        case R.id.fotografera_button:

            share.setisFromTabsClearImage(false);
            String fileName = "temp.jpg";
            ContentValues values = new ContentValues();
            values.put(MediaStore.Images.Media.TITLE, fileName);
            mCapturedImageURI = getContentResolver().insert(
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);

            Intent takePictureIntent = new Intent(
                    MediaStore.ACTION_IMAGE_CAPTURE);

            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT,
                    mCapturedImageURI);
            startActivityForResult(takePictureIntent, 0);

            break;
        case R.id.valj_bild_button:

            share.setisFromTabsClearImage(false);

            Intent pickPhoto = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(pickPhoto, 1);

            break;
        }

    }

    protected void onActivityResult(int requestCode, int resultCode,
            Intent imageReturnedIntent) {
        super.onActivityResult(requestCode, resultCode, imageReturnedIntent);
        switch (requestCode) {
        case 0:
            if (resultCode == RESULT_OK) {

                String[] projection = { MediaStore.Images.Media.DATA };
                Cursor cursor = getContentResolver().query(mCapturedImageURI,
                        projection, null, null, null);
                int column_index_data = cursor
                        .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                cursor.moveToFirst();
                String capturedImageFilePath = cursor
                        .getString(column_index_data);

                Bitmap mImageBitmap = BitmapFactory
                        .decodeFile(capturedImageFilePath);
                imageSetImageView.setImageBitmap(mImageBitmap);

                isImageViewFilled = true;

                if (isImageViewFilled) {
                    emailSendButton.setEnabled(true);

                    emailSendButton.setBackgroundDrawable(getResources()
                            .getDrawable(R.drawable.skicka_button_black));

                }

                File root = Environment.getExternalStorageDirectory();
                if (root.canWrite()) {
                    System.out.println("PICTURE PATH " + capturedImageFilePath);
                    pic = new File(capturedImageFilePath);

                    String cPath = pic.getAbsolutePath();

                    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
                    bmOptions.inJustDecodeBounds = true;
                    BitmapFactory.decodeFile(cPath, bmOptions);
                    float photoW = mImageBitmap.getWidth();
                    float photoH = mImageBitmap.getHeight();

                    // Get the dimensions of the View
                    float targetW = Float.parseFloat(maxWidth);
                    float targetH = (photoH / photoW) * targetW;

                    System.out.println("cam bitmap height"
                            + mImageBitmap.getHeight());
                    System.out.println("cam bitmap weidth" + maxWidth);

                    System.out.println("cam bitmap Width 02 "
                            + mImageBitmap.getWidth());

                    System.out.println("cam target Height " + targetH);
                    System.out.println("cam target width " + targetW);

                                    bmOptions.inJustDecodeBounds = false;
                    bmOptions.inSampleSize = (int) scaleFactor;
                    bmOptions.inPurgeable = true;

                    Bitmap bitmap = BitmapFactory.decodeFile(cPath, bmOptions);
                    mImageBitmap = Bitmap.createScaledBitmap(bitmap,
                            (int) targetW, (int) targetH, false);

                    FileOutputStream fout;
                    try {
                        fout = new FileOutputStream(pic);
                        mImageBitmap.compress(Bitmap.CompressFormat.JPEG, 100,
                                fout);
                        fout.flush();
                        fout.close();
                        bitmap.recycle();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                }

            }

            break;
        case 1:
            if (resultCode == RESULT_OK) {

                Uri selectedImage = imageReturnedIntent.getData();

                InputStream in = null;
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                try {

                    Cursor cursor = getContentResolver().query(selectedImage,
                            filePathColumn, null, null, null);
                    cursor.moveToFirst();

                    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                    String picturePath = cursor.getString(columnIndex);

                    System.out.println("PICTUREPATH" + picturePath);
                    cursor.close();

                    Bitmap imageBitmap = BitmapFactory.decodeFile(picturePath);

                    int orientation = getOrientation(this, selectedImage);
                    System.out.println("ORIENTATION VALUE " + orientation);
                    imageSetImageView.setImageBitmap(imageBitmap);

                    isImageViewFilled = true;

                    if (isImageViewFilled) {

                        emailSendButton.setEnabled(true);

                        emailSendButton.setBackgroundDrawable(getResources()
                                .getDrawable(R.drawable.skicka_button_black));

                    }

                    // ////////////////////////// Image is set ///////////////

                    pic = new File(picturePath);

                    String cPath = pic.getAbsolutePath();
                    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
                    bmOptions.inJustDecodeBounds = true;
                    BitmapFactory.decodeFile(cPath, bmOptions);
                    float photoW = imageBitmap.getWidth();
                    float photoH = imageBitmap.getHeight();

                    // Get the dimensions of the View
                    float targetW = Float.parseFloat(maxWidth);
                    float targetH = (photoH / photoW) * targetW;

                    System.out.println(" bitmap height"
                            + imageBitmap.getHeight());
                    System.out.println(" bitmap weidth" + maxWidth);

                    System.out.println(" bitmap Width 02 "
                            + imageBitmap.getWidth());

                    System.out.println(" target Height " + targetH);
                    System.out.println(" target width " + targetW);

                                        float scaleFactor = Math.min(photoW / targetW, photoH
                            / targetH);

                    bmOptions.inJustDecodeBounds = false;
                    bmOptions.inSampleSize = (int) scaleFactor;
                    bmOptions.inPurgeable = true;

                    Bitmap bitmap = BitmapFactory.decodeFile(cPath, bmOptions);
                    imageBitmap = Bitmap.createScaledBitmap(bitmap,
                            (int) targetW, (int) targetH, false);

                    FileOutputStream fout;

                    fout = new FileOutputStream(pic);
                    imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fout);
                    fout.flush();
                    fout.close();

                    bitmap.recycle();
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
            break;
        }

    }

    public static int getOrientation(Context context, Uri photoUri) {
        String[] orientationColumn = { MediaStore.Images.Media.ORIENTATION };
        Cursor cursor = context.getContentResolver().query(photoUri,
                orientationColumn, null, null, null);

        try {
            if (cursor.moveToFirst()) {
                return cursor.getInt(cursor
                        .getColumnIndex(orientationColumn[0]));
            } else {
                return -1;
            }
        } finally {
            cursor.close();
        }
    }

    private void showEmailComposer() {

        Intent email = new Intent(Intent.ACTION_SEND);
        email.putExtra(Intent.EXTRA_EMAIL, new String[] { share.getMailTo() });

        email.putExtra(Intent.EXTRA_SUBJECT, share.getsubject());

        email.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(pic));
        // email.putExtra(Intent.EXTRA_STREAM, pic.getName());
        email.putExtra(Intent.EXTRA_TEXT, share.getemailbody());

        email.setType("message/rfc822");

        startActivity(Intent.createChooser(email, "Choose an Email client :"));

        isEmailSend = true;

    }

    @Override
    protected void onResume() {

        super.onResume();

        System.out.println("ON RESUME INCOMING CHECK");

        if (share.getisFromTabsClearImage()) {

            imageSetImageView.setImageDrawable(getResources().getDrawable(
                    R.drawable.ingenbildvald));

            emailSendButton.setBackgroundDrawable(getResources().getDrawable(
                    R.drawable.skicka_button));

            emailSendButton.setEnabled(false);
            share.setisFromTabsClearImage(false);

        }
        if (isEmailSend) {

            imageSetImageView.setImageDrawable(getResources().getDrawable(
                    R.drawable.ingenbildvald));

            emailSendButton.setBackgroundDrawable(getResources().getDrawable(
                    R.drawable.skicka_button));
            emailSendButton.setEnabled(false);

            isEmailSend = false;
        }
    } 
```

# cordova - Phonegap Filetransfert 下载：API 错误时创建文件

> ID：15433847
> 
> 赞同：2
> 
> 时间：2013-03-15T13:35:37.550
> 
> 标签：cordova, download

我正在使用 fileTransfer.download 方法从我的服务器中检索 PNG 文件。

但是，当我尝试下载一个不存在的文件时，API 会在我手机的文件系统上创建一个大小为 0 位的文件（将其名称传递给下载方法）。

这是正常行为吗，我预计不会在出错时创建文件。

我可以有一些代码来手动删除文件，但我想知道这是否真的需要，或者我是否在滥用 API。

我正在使用版本 2.2.0

非常感谢。

此致。

弗洛伦特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T06:55:42.080

我已经在 Android 中尝试过，希望这也适用于 IOS。

```
enter code here
 function fun(){
var dfd = $.Deferred(function (dfd){
var remoteFile = "Your link";
var localFileName = remoteFile.substring(remoteFile.lastIndexOf('/')+1);
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
fileSystem.root.getFile(localFileName, {create: true, exclusive: false},
    function(fileEntry) {
var localPath = fileEntry.fullPath;
if (device.platform === "Android" && localPath.indexOf("file://") === 0) {
            localPath = localPath.substring(7);
            }// You need to write IOS instead of Android

    var ft = new FileTransfer();
    ft.download(remoteFile, localPath, function(entry) {
    dfd.resolve('file downloaded');
     // Do what you want with successful file downloaded and then
    // call the method again to get the next file
    //downloadFile();
            }, fail);
             }, fail);
            }, fail);

           });
            return dfd.promise();

        }
                fun().then(function(msg){
            if(msg==="file downloaded")
            {
            alert("Download complete");
            }
            else
            {
            alert("Download error")
            }
            });
            function fail(){
            alert("error");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T08:40:24.303

嘿，看看我的答案在这里-

[Phonegap - 将图像从 url 保存到设备照片库中](https://stackoverflow.com/questions/21577230/phonegap-save-image-from-url-into-device-photo-gallery/21579097#21579097)

让我知道。如果还有问题。在您的 config.xml 中包含以下内容

对于安卓 -

```
<feature name="http://api.phonegap.com/1.0/file" />
<feature name="File">
       <param name="android-package" value="org.apache.cordova.file.FileUtils" />
</feature>
<feature name="FileTransfer">
      <param name="android-package" value="org.apache.cordova.filetransfer.FileTransfer" />
</feature>
<feature name="Storage">
       <param value="org.apache.cordova.Storage" name="android-package"/>
</feature> 
```

对于IOS-

```
<plugin name="File" value="CDVFile" />
<plugin name="FileTransfer" value="CDVFileTransfer" /> 
```

# css - 空单元格在 CSS3 中有效吗？

> ID：15433849
> 
> 赞同：2
> 
> 时间：2013-03-15T13:35:38.893
> 
> 标签：css

CSS2 属性空单元格在 CSS3 中是否有效？

对于那些不知道什么是空单元格的人：空单元格会在单元格为空时删除单元格的背景和边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:45:59.230

CSS 没有版本。CSS 3 是*第 3 级*而不是第 3 版。现在请参阅[级别的描述](http://www.w3.org/TR/css-2010/#css-levels)：

> 层叠样式表没有传统意义上的版本；相反，它有水平。每个级别的 CSS 都建立在前面的基础上，改进定义并添加功能。每个较高级别的特征集是任何较低级别的超集。

由于它在 2 级有效，因此在 3 级也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:53:00.390

有这个链接[http://dev.w3.org/csswg/css3-tables/#empty-cells](http://dev.w3.org/csswg/css3-tables/#empty-cells)

> 在分离边框模型中，此属性控制没有可见内容的单元格周围的边框和背景的呈现。空单元格和 'visibility' 属性设置为 'hidden' 的单元格被认为没有可见内容。除非单元格包含以下一项或多项，否则单元格为空：
> 
> 浮动内容（包括空元素），流入内容（包括空元素），而不是由“空白”属性处理折叠掉的空白。

当此属性的值为“显示”时，将在空单元格（如普通单元格）周围/后面绘制边框和背景。

值`hide`表示在空单元格周围/后面没有绘制边框或背景（参见“表格层和透明度”中的第 6 点）。此外，如果一行中的所有单元格的值为`hide`并且没有可见内容，则整行的行为就好像它有`display: none`.

# c# - 构造函数限制

> ID：15433851
> 
> 赞同：5
> 
> 时间：2013-03-15T13:35:43.117
> 
> 标签：c#, class, restriction

我想知道是否有办法限制施工中的价值。这是我的代码：

```
class Student : Human 
{
    private double Grade;

    public Student(string FirstName, string LastName, double Grade)
        : base(FirstName, LastName)
    {
        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Grade = Grade;
    }
} 
```

当我创建一个新学生时，我想将 Grade 限制在 >= 2.00 和 <= 6.00 之间，例如运行时编译错误或异常。有办法吗？（不用担心其他字段 FirstName 和 LastName）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T13:37:30.540

*您可以检查它并在运行时*抛出异常，如下所示：

```
if (grade < 2.00 || grade > 6.00)
    throw new ArgumentOutOfRangeException("grade"); 
```

始终将此类条件放在方法或构造函数的开头。我什至把它们放在自己的`#region`（但这是我个人的喜好）：

```
public Student(string firstName, string lastName, double grade)
    : base(firstName, lastName)
{
    #region Contract
    if (grade < 2.00 || grade > 6.00)
        throw new ArgumentOutOfRangeException("grade");
    #endregion
    this.FirstName = firstName;
    this.LastName = lastName;
    this.Grade = grade;
} 
```

但是，有一种方法可以使用 Code Contracts 获得此类事情的编译时警告。[您可以在 MSDN 上](http://research.microsoft.com/en-us/projects/contracts/)下载Code Contracts，还可以在那里找到文档。它仅与非 Express 版本的 Visual Studio 集成，由 Microsoft 编写。它将检查方法调用是否可能遵守您指定的合同。您的代码将变为：

```
using System.Diagnotistics.Contracts;

public Student(string firstName, string lastName, double grade)
    : base(firstName, lastName)
{
    #region Contract
    Contract.Requires<ArgumentOutOfRangeException>(grade >= 2.00);
    Contract.Requires<ArgumentOutOfRangeException>(grade <= 6.00);
    #endregion
    this.FirstName = firstName;
    this.LastName = lastName;
    this.Grade = grade;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T13:41:01.117

您可以抛出异常：

```
class Student : Human 
{
    private double Grade;

    public Student(string FirstName, string LastName, double Grade)
        : base(FirstName, LastName)
    {
        if (Grade >= 2 && Grade <= 6) { 
          throw new ArgumentOutOfRangeException();
        }

        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Grade = Grade;
    }
} 
```

如果您使用的是[Microsoft 代码合同](http://research.microsoft.com/en-us/projects/contracts/)，您也可以这样做：

```
class Student : Human  {
    private double Grade;

    public Student(string FirstName, string LastName, double Grade)
        : base(FirstName, LastName)
    {
        System.Diagnotistics.Contracts.Contract.Requires<ArgumentOutOfRangeException>(Grade >= 2 && Grade <= 6);

        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Grade = Grade;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T13:48:47.007

还有另一种选择，可能有点繁琐，但会确保给定的范围根本不使用`double`，而是创建一个名为`Grade`. 您的`Grade`课程将包含 from 和 to 的强制转换`double`，并将强制验证。这意味着所有的 Grade 验证逻辑都在`Grade`struct 中，`Student`类只接收一个`Grade`对象，不必担心。

```
public struct Grade
{
    public static readonly double MinValue = 2.0;
    public static readonly double MaxValue = 6.0;

    private double value;

    public static explicit operator double(Grade grade)
    {
        return grade.value + MinValue;
    }

    public static explicit operator Grade(double gradeValue)
    {
        if (gradeValue < MinValue || gradeValue > MaxValue)
            throw new ArgumentOutOfRangeException("gradeValue", "Grade must be between 2.0 and 6.0");

        return new Grade{ value = gradeValue - MinValue };
    }
} 
```

你会像这样使用它：

```
double userInput = GetUserInputForGrade();
Grade grade = (Grade)userInput; // perform explicit cast.
Student student = new Student(firstName, lastName, grade); 
```

**编辑：**我已经使用@EricLippert 的建议更新了代码，以使该类向开发人员公开其最小/最大值。

**编辑 2：**再次更新 @JeppeStigNielsen 的建议。该`value`字段现在存储 MinValue 的偏移量，因此无论 0 是否在有效范围内，调用都`default(Grade)`将返回一个有效值（等于 MinValue）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:39:24.053

```
class Student : Human 
{
    private double Grade;

    public Student(string FirstName, string LastName, double Grade)
        : base(FirstName, LastName)
    {
        if (Grade < 2 || Grade > 6)
            throw new ArgumentOutOfRangeException("Grade must be between 2 and 6");

        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Grade = Grade;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T13:39:26.987

```
public Student(string FirstName, string LastName, double Grade)
    : base(FirstName, LastName)
    {
     if(Grade >= 2.0 || Grade <= 6.00)
      throw  new ArgumentException("your message");     
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T13:42:00.847

如果您想要任何编译时间检查的机会，您必须使用代码合同。它们本质上是运行时的异常，因此相当于带有异常的参数验证。

```
public Student(string firstName, string lastName, decimal grade)
{
    Contract.Requires(grade >= 2);
    Contract.Requires(grade <= 6);

    FirstName = firstName;
    LastName = lastName;
    Grade = grade;     
} 
```

看到这个问题

[由合同和施工人员设计](https://stackoverflow.com/questions/2767247/design-by-contracts-and-constructors)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-15T13:37:34.053

```
class Student : Human 
{
    private double Grade;

    public Student(string FirstName, string LastName, double Grade)
        : base(FirstName, LastName)
    {
        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Grade = Grade;
        if(Grade >= 2 and Grade <= 6){
            throw new Exception("Incorrect grade input");
    }
} 
```

或者抛出你想要的相关异常，例如 ArgumentOutOfException 等......

# java - 如何为变量创建更改侦听器？

> ID：15433855
> 
> 赞同：47
> 
> 时间：2013-03-15T13:35:55.143
> 
> 标签：java, variables, event-handling

假设我使用语句定义了一些变量`int someVariable;`。代码运行时，变量的值会发生变化。

我如何跟踪这个变量的变化？如何实现一些行为类似于 onSomeVariableChangedListener 的侦听器？

我还需要知道一个页面中的其他方法何时执行，以便我可以在另一个类中设置侦听器。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-15T14:00:56.123

Java 为此类事情提供了一个简单的观察者模式实现，但您需要在管理侦听器通知的方法中设置观察到的变量。如果你不能扩展 Observable，你可以使用组合（即，在你的类中有一个 Observable 实例来管理通知），或者你可以看看 java.util.Observable 来了解如何滚动你自己的版本。

通量.java

```
import java.util.Observable;

public class Flux extends Observable {
  private int someVariable = 0;

  public void setSomeVariable(int someVariable) {
    synchronized (this) {
      this.someVariable = someVariable;
    }
    setChanged();
    notifyObservers();
  }

  public synchronized int getSomeVariable() {
    return someVariable;
  }
} 
```

赫拉克利特.java

```
import java.util.Observable;
import java.util.Observer;

public class Heraclitus implements Observer {
  public void observe(Observable o) {
    o.addObserver(this);
  }

  @Override
  public void update(Observable o, Object arg) {
    int someVariable = ((Flux) o).getSomeVariable();
    System.out.println("All is flux!  Some variable is now " + someVariable);
  }
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-15T13:40:44.347

这是将变量隐藏在**setter/getter**对后面的众多原因之一。然后，在设置器中，您可以通知您的侦听器该变量已以适当的方式修改。正如其他人所评论的那样，没有内置的方法可以完全按照您的意愿进行操作，您需要自己实现它。

或者，Benjamin 提出了一个有趣的模式，称为装饰器模式，如果相关代码无法修改，它可能对您有用。[您可以在 Wikipedia 上查找更多信息](https://en.wikipedia.org/wiki/Decorator_pattern)

这个想法是围绕一个对象构建一个兼容的包装器。假设您的对象是 MyClass 类型。

```
class MyClass{
    public void doFunc(){...}
}

class MyLoggedClass extends MyClass{
    MyClass myObject;

    public void doFunc(){
        //Log doFunc Call
        myObject.doFunc();
    }
} 
```

代替

```
MyClass object = new MyClass(); 
```

你会用

```
MyClass object = new MyLoggedClass(new MyClass()); 
```

现在您的其余代码将照常使用对象，除了每个函数调用将被记录或通知等。

正如您将在 Wikipedia 中看到的那样，这通常是通过相关类继承的接口完成的，但在您的情况下这可能是不可能的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-22T13:22:23.990

您可以使用视图模型。首先创建一个扩展视图模型的类。我打电话给我的 NameViewModel。

```
import android.arch.lifecycle.MutableLiveData;
import android.arch.lifecycle.ViewModel;

public class NameViewModel extends ViewModel {
private MutableLiveData<String> currentName;

public MutableLiveData<String> getCurrentName(){
        if(currentName == null){
            currentName = new MutableLiveData<>();
        }
        return currentrName;
    }
} 
```

然后在变量值更改的活动中首先定义您的 NameViewModel 类的实例：

```
private NameViewModel mNameViewModel; 
```

然后在 onCreate 使用这个代码片段

```
mNameViewModel = ViewModelProvider.of(this).get(NameViewModel.class)
mNameViewModel.getCurrentName().observe(this, new Observer<String>() {
    @Override
    public void onChanged(@Nullable String name) {
        //do what you want when the varriable change.
    }
}); 
```

如果要更改 name 的值，可以使用以下代码段：

```
mNameViewModel.getCurrentName().postValue(String newName); 
```

我使用 postValue() 因为我想从工作线程更新变量，如果你在 UI 线程上，你应该使用 setValue()。现在每次更改变量时都会更新 UI。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-15T13:38:42.987

我相信您将不得不实施[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T13:37:50.257

如果任意变量的值发生更改或调用了某个方法，Java 中没有内置方法来获取通知。

# windows - 在 IIS7 上创建具有集成 Windows 安全性的 WCF 服务

> ID：15433863
> 
> 赞同：3
> 
> 时间：2013-03-15T13:36:20.483
> 
> 标签：windows, wcf, security, iis-7, integrated

我正在尝试创建一个使用集成 Windows 安全性并将托管在 IIS7 上的 WCF 服务。该服务将在域内使用，并将由 java 客户端使用。我的问题是：

*   我应该使用什么绑定？

*   如何在 IIS7 上设置集成 Windows 安全性？（与 IIS6 不同）

*   如何获取服务内部的凭据（C#），即如何读取用户名。？

谢谢，

托马斯

# ios - MonoTouch 自定义 UIButton 在加载时崩溃：在已被 GC 处理的托管对象上从 Objective-c 调用选择器

> ID：15433864
> 
> 赞同：2
> 
> 时间：2013-03-15T13:36:19.947
> 
> 标签：ios, xamarin.ios, uibutton

我正在使用 MonoTouch 并创建了一个扩展 UIButton 的 MyButton 类。这实际上是我在使用[自定义 UIScrollView](http://forums.xamarin.com/discussion/comment/7766/#Comment_7766)时遇到的相同问题的简化示例。MyButton 扩展了 UIButton 并添加了一些方法来做一些简单的事情，比如增加和减少一个计数器（这只是一个测试用例）。我还在我的类定义之前包含了 '[Register("MyButton")]'，以便它向 Interface Builder (IB) 注册，这样我就可以添加一个 UIButton 并将其类指定为 MyButton。

**工作原理：** 我可以以编程方式将 MyButton 的实例添加到我的主视图中，它可以正确显示并按预期运行。

**什么不起作用：** 如果我尝试从 IB 添加 UIButton 并将其类指定为 MyButton，然后添加一个插座并指定它是 MyButton 类型，则我的应用程序在尝试加载主视图时崩溃，但异常：未处理托管异常：**从objective-c 在已被GC'ed (System.Exception) 的iOSCustomUIView.MyButton (0xC2F40D0) 类型的托管对象上调用选择器**。

我发现类似的问题有这个问题，但视图控制器，而不是视图。所以我知道错误是相似的，但是在将新控制器推入堆栈等时视图控制器引用丢失的情况。就我而言，我不知道为什么我的对象在任何事情发生之前就已经被 GC加载。

我尝试创建额外的私有成员变量来引用我的 MyButton 插座（btnIncrement），但这没有帮助。我设置断点并在尝试实例化我的视图控制器的新实例时发生崩溃：（来自 AppDelegate.cs）

```
 public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        window = new UIWindow (UIScreen.MainScreen.Bounds);

        viewController = new iOSCustomUIViewViewController ();
        window.RootViewController = viewController;
        window.MakeKeyAndVisible ();

        return true;
    } 
```

为了定义自定义 UIButton 类并在 IB 中使用它，我有什么遗漏吗？这是 MonoTouch 中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:27:31.063

[我在Xamarin 论坛](http://forums.xamarin.com/discussion/comment/7766/#Comment_7766)上从 adamkemp 得到了很好的回应。解决方案是我需要编写一个接受`IntPtr p`参数的构造函数，因为这是从 xib 文件创建视图对象时调用的构造函数。就我而言，我只是定义了以下构造函数：

```
public MyButton(IntPtr p) : base(p)
{
    // Do initialization stuff here
} 
```

由于我没有定义此构造函数，因此我的对象可能从未创建过。在这种情况下，说我的对象已被 GC 处理的日志消息有点误导。现在，我的应用程序视图全部加载成功。

# eclipse - 我应该使用哪个 Eclipse 侦听器向文本编辑器添加注释

> ID：15433868
> 
> 赞同：4
> 
> 时间：2013-03-15T13:36:26.573
> 
> 标签：eclipse, eclipse-plugin

我是一个日食新手。我有一个长期目标，就是将我自己的注释添加到 java 编辑器中：有点像 FindBugs。我想要我自己的静态代码分析器，并且能够向资源添加标记/注释。

所以我阅读了很多优秀的文档，并承担了大量的教程。最有帮助的可能是[http://www.ibm.com/developerworks/opensource/tutorials/os-ecl-commplgin2/section9.html](http://www.ibm.com/developerworks/opensource/tutorials/os-ecl-commplgin2/section9.html)。很多 Lars Vogel 文档也很有用。我现在可以使用语法荧光笔制作 TextEditor。然而，我正在努力寻找添加注释的最佳方法。

我大致了解如何做到这一点：文本编辑器有一个 DocumentProvider。DocumentProvider 有一个 AnnotationModel。可以将注释添加到注释模型。

**我的问题是“我把这段代码放在哪里”，**特别是在编辑器中扫描文本并更新注释模型的代码。似乎很明显，这应该是对听众的回应……但是哪一个呢？

我已经尝试过 ResourceChangeListener。这似乎只在保存选项时触发，而不是在输入文本时触发。另外我不知道如何从资源中获取编辑器。（“The”编辑器可能用词不当，因为资源可以在多个编辑器中打开）。我可以通过 IWorkbenchWindow activeWorkbenchWindow = workbench.getActiveWorkbenchWindow().getActivePage().getActiveEditor() 找到当前编辑器，但这似乎是错误的方法，因为我想更新所有相关的注释模型。

我尝试将 ElementStateListener 添加到文本编辑器。这些事件似乎都不是我想要的。

我查看了DamageRepairers ...这些似乎几乎是我想要的，除了我想长期绑定到JavaEditor，所以我不想更改默认的DamageRepair。

感谢所有的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:05:56.670

我发现可以通过提及以下资源来回答这个问题：[www.ibm.com/developerworks/opensource/tutorials/os-eclipse-plugin-guide/index.html](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-plugin-guide/index.html)

问题作者还在[这里](http://www.eclipse.org/forums/index.php/mv/msg/459621/1022115/#msg_1022115)提到：

> 我将注释添加到资源中，并且注释会自动神奇地添加到编辑器中。
> 
> 因此，当我的插件启动时，我会遍历活动资源，如果需要，向它们添加注释，然后添加一个资源更改侦听器，该侦听器会在资源打开时添加它们。

# c# - 尝试将图像保存到 SQL Server 时出错

> ID：15433870
> 
> 赞同：5
> 
> 时间：2013-03-15T13:36:36.147
> 
> 标签：c#, sql-server

我创建了将图像上传到 SQL Server 的代码。

这是将图像转换为字节的代码：

```
//Use FileInfo object to get file size.
FileInfo fInfo = new FileInfo(p);         

//Open FileStream to read file
FileStream fStream = new FileStream(p, FileMode.Open, FileAccess.Read);
byte[] numBytes = new byte[fStream.Length];
fStream.Read(numBytes, 0, Convert.ToInt32(fStream.Length));

//Use BinaryReader to read file stream into byte array.

//BinaryReader br = new BinaryReader(fStream);

//When you use BinaryReader, you need to supply number of bytes to read from file.
//In this case we want to read entire file. So supplying total number of bytes.

// data = br.ReadBytes((int)numBytes);
return numBytes; 
```

`SqlCommand`这是将字节作为值添加到参数的代码：

```
 objCmd.Parameters.Add("@bill_Image", SqlDbType.Binary).Value = imageData;
  objCmd.ExecuteNonQuery(); 
```

但我收到错误

> *字符串或二进制数据将被截断。该语句已终止*

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:41:35.110

错误清楚地表明您正在尝试保存比字段定义允许的更多字节。

不确定您使用的是什么 sql 类型，`bill_Image`但存储图像的适当字段定义将是`varbinary(MAX)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:42:39.007

检查`bill_Image`数据库中列的定义。

它应该是这样的

```
bill_Image varbinary(X) 
```

只需增加 X 或放 MAX 而不是数字（如果您有超过 8 000 字节的图像）

关于二进制/varbinary 类型的信息[在这里](http://msdn.microsoft.com/en-us/library/ms188362.aspx)

# android - 使用“ant debug”构建 osmand 会出错

> ID：15433872
> 
> 赞同：3
> 
> 时间：2013-03-15T13:36:41.480
> 
> 标签：android, ant, build, osmdroid

我从这里查看了最新的 Osmand 源代码，并按照这里的所有步骤进行操作

现在我正在尝试使用命令 ant debug 通过 ant 构建 apk，但它失败了

我执行了以下命令：

```
myname@myname-VirtualBox:~/dev/osmand/android/OsmAnd$ ant -f build.xml
which gives output as
BUILD SUCCESSFUL 
```

当我尝试之后

```
myname@myname-VirtualBox:~/dev/osmand/android/OsmAnd$ ant debug 
```

它最终失败并显示以下日志：

```
-crunch:
   [crunch] Crunching PNG Files in source dir: /home/moonshooter/dev/osmand/android/OsmAnd/res
   [crunch] To destination dir: /home/moonshooter/dev/osmand/android/OsmAnd/bin/res
   [crunch] Crunched 0 PNG files to update cache

-package-resources:

BUILD FAILED
/home/myname/dev/osmand/android/OsmAnd/build.xml:27: The following error occurred while executing this line:
/home/myname/dev/osmand/android/OsmAnd/build.xml:28: Missing attribute libraryRFileRefid

Total time: 18 seconds 
```

xml 中的第 27 行和第 28 行是

```
<do-only-if-not-library elseText="Library project: do not package resources...">
                    <aapt executable="${aapt}" command="package" versioncode="${version.code}"versionname="${version.name}" debug="${build.is.packaging.debug}" manifest="${out.manifest.abs.file}"assets="${asset.absolute.dir}" androidjar="${project.target.android.jar}" apkfolder="${out.absolute.dir}"nocrunch="${build.packaging.nocrunch}" resourcefilename="${resource.package.file.name}"resourcefilter="${aapt.resource.filter}" libraryResFolderPathRefid="project.library.res.folder.path"libraryPackagesRefid="project.library.packages" previousBuildType="$`enter code here`{build.last.target}"buildType="${build.target}" ignoreAssets="${aapt.ignore.assets}"> 
```

这是整个文件[http://pastebin.com/Dv20iT8r](http://pastebin.com/Dv20iT8r)

谁能告诉我是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:15:39.550

只需要在**aapt**标签中添加这个属性**libraryRFileRefid="project.library.bin.r.file.path"**

 **```
<do-only-if-not-library elseText="Library project: do not package resources...">
            <aapt executable="${aapt}" command="package" versioncode="${version.code}" versionname="${version.name}" debug="${build.is.packaging.debug}" manifest="${out.manifest.abs.file}" assets="${asset.absolute.dir}" androidjar="${project.target.android.jar}" apkfolder="${out.absolute.dir}" nocrunch="${build.packaging.nocrunch}" resourcefilename="${resource.package.file.name}" resourcefilter="${aapt.resource.filter}" libraryRFileRefid="project.library.bin.r.file.path" libraryResFolderPathRefid="project.library.res.folder.path" libraryPackagesRefid="project.library.packages" previousBuildType="${build.last.target}" buildType="${build.target}" ignoreAssets="${aapt.ignore.assets}">
                <res path="${out.res.absolute.dir}" />
                <res path="${resource.absolute.dir}" />
                <!-- <nocompress /> forces no compression on any files in assets or res/raw -->
                <!-- <nocompress extension="xml" /> forces no compression on specific file extensions in assets and res/raw -->
            </aapt>
        </do-only-if-not-library> 
```**

# jqgrid - 自动完成数据初始化

> ID：15433876
> 
> 赞同：0
> 
> 时间：2013-03-15T13:36:55.287
> 
> 标签：jqgrid, jquery-autocomplete, double-click, inline-editing

我正在尝试在`dataInit`. 我这样做是这样的：

```
{ name:'ac_fin_g', index:'ac_fin_g', width:75, editable: true, edittype: 'text',
    editoptions: {
        dataInit: function (elem) {
            $(elem).autocomplete({
                source: 'autocomplete.php',
                select: function (event, ui) {
                    #('ac_fin_g').val(ui.item.value);
                }
            });
        }
   }} 
```

在函数中`ondblClickRow`我`select`像参数一样传递：

```
ondblClickRow: function (id, select) {
    if (id) {
        if (id !== lastSel) {
            $('#list').restoreRow (lastSel);
            $('#list').editRow (id, true, select);
            lastSel = id;
        } else {
            $('#list').restoreRow (lastSel);
            lastSel = "";
        }
    }
} 
```

这是有效的，但仅适用于第一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:55:53.000

我认为你的问题的主要原因是`ondblClickRow`回调的错误使用。callback的第二个参数`ondblClickRow`是网格中行的索引。您可以使用其他选项。最完整的`ondblClickRow`回调原型包含4个参数：

```
// one can use ondblClickRow: function (id) { below because iRow, iCol, e are not used
ondblClickRow: function (id, iRow, iCol, e) {
    var $self = $(this);
    if (id !== lastSel) {
        $self.jqGrid("restoreRow", lastSel);
        lastSel = id;
    }
    $self.jqGrid("editRow", id, true);
} 
```

[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#editrow)的第三个参数是`oneditfunc`回调。使用`iRow`数字作为`oneditfunc`回调是错误的。

# fonts - LiveCycle Server 找不到字体 - 输出模块

> ID：15433880
> 
> 赞同：0
> 
> 时间：2013-03-15T13:37:11.960
> 
> 标签：fonts, adobe, livecycle

我正在使用带有输出模块的 Adob​​e LiveCycle ES3 将 XDP 表单与 XML 数据合并。表单是使用 LiveCycle Designer 创建的。这对 PDF 文件非常有用。

结果不是我想转换为 PDF/A 格式。这确实有效，因为在服务器上找不到字体：

> (com.adobe.document.xmlform.ReturnStatus@33c0ab2b) XMLForm，渲染：20511，未找到请求的字体“Liberation Sans”，并且不允许对 PDF/A 进行字体替换。

但字体已安装：

```
root@develop3:~# ls /usr/share/fonts/truetype/ttf-liberation/LiberationSans-*
-rw-r--r-- 1 root root 134548 16\. Feb 2011  /usr/share/fonts/truetype/ttf-liberation/LiberationSans-BoldItalic.ttf
-rw-r--r-- 1 root root 139008 16\. Feb 2011  /usr/share/fonts/truetype/ttf-liberation/LiberationSans-Bold.ttf
-rw-r--r-- 1 root root 161020 16\. Feb 2011  /usr/share/fonts/truetype/ttf-liberation/LiberationSans-Italic.ttf
-rw-r--r-- 1 root root 139280 16\. Feb 2011  /usr/share/fonts/truetype/ttf-liberation/LiberationSans-Regular.ttf 
```

有什么建议么？

先感谢您。

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:11:38.523

您可以在 livecycle admin ui 核心设置中将 /usr/share/fonts/truetype/ttf-liberation/ 目录作为客户字体目录传递，然后重新启动服务器并试一试。您可以查看有关如何设置字体目录的[adobe 帮助。](http://help.adobe.com/en_US/livecycle/10.0/AdminHelp/WS92d06802c76abadb-5145d5d12905ce07e7-7fff.html)

# android - 自定义列表视图上的复选框

> ID：15433883
> 
> 赞同：0
> 
> 时间：2013-03-15T13:37:18.313
> 
> 标签：android, radio-button

![在此处输入图像描述](../Images/017cfb6104452791b21c57b8599b87d2.png)我变得像这样，它不仅应该显示在特定项目上如何将自定义列表视图中的单选按钮设置为单一模式。如果我单击特定单选按钮，则它必须出现，而另一个未选中。如果单击第一行，则选中第一行上的单选按钮。单击第二行上的第二行单选按钮，选中第二行，未选中第一行。单击第三行选中第三行单选按钮，未选中第一行和第二行。

**自定义列表.xml**

> ```
> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     android:layout_width="match_parent"
>     android:layout_height="match_parent"
>     android:orientation="vertical" >
> 
> <RadioButton
>       android:id="@+id/radioButton1"
>       android:layout_width="wrap_content"
>       android:layout_height="wrap_content"
>       android:layout_centerVertical="true"
>       android:layout_alignParentLeft="true"
>       android:text=""
> 
>        />
> 
>   <TextView
>       android:id="@+id/card"
>       android:layout_width="wrap_content"
>       android:layout_height="wrap_content"
>       android:paddingLeft="10dip" android:layout_centerVertical="true"
>       android:layout_toRightOf="@+id/radioButton1"
>       android:text=""
>       android:textColor="#000000"
>       android:textSize="15dip"
>       android:textStyle="bold" />
> 
>   </RelativeLayout>
> 
>   listView = (ListView) findViewById(R.id.cardlist);
> 
> adapter =new MyAdapter(this, app.arryList,app.arryList1);
> 
> listView.setOnItemClickListener(new OnItemClickListener() {
> 
>   @Override
>   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
>       // TODO Auto-generated method stub
> 
>       Toast.makeText(getApplicationContext(), "am thelist",Toast.LENGTH_LONG).show();
> 
>   }
> });
> 
> listView.setAdapter(adapter);
> 
> listView.setChoiceMode(listView.CHOICE_MODE_SINGLE);
> }
> 
> public class MyAdapter extends BaseAdapter {
> 
> Context context = null;
> ArrayList<String> items= null;
> ArrayList<String> items1= null;
> 
> public MyAdapter(Newcard newcard, ArrayList<String> items,
>       ArrayList<String> items1) {
>   // TODO Auto-generated constructor stub
> 
>   this.items = items;
>   this.items1 = items1;
> 
> }
> 
> @Override
> public int getCount() {
>   // TODO Auto-generated method stub
>   return items.size();
> }
> 
> @Override
> public Object getItem(int position) {
>   // TODO Auto-generated method stub
>   return items; 
> 
>   //return items.get(position);
> }
> 
> @Override
> public long getItemId(int position) {
>   // TODO Auto-generated method stub
>   return position;
> }
> 
> @Override
> public View getView(final int position, View convertView, ViewGroup parent) {
>   // TODO Auto-generated method stub
> 
>   View layout = null;
>   TextView produ = null;  
> 
>   TextView desc = null;
>   Button edit = null;
> 
>   RadioButton radio =null;
> 
>   if (convertView == null) {
> 
>       lay = LayoutInflater.from(getApplicationContext());
>       layout = lay.inflate(R.layout.customlist, null);
>   } else {
>       layout = convertView;
>   }
> 
>   produ = (TextView) layout.findViewById(R.id.card);
>   produ.setText("" +app.arryList.get(position));
> 
>   radio = (RadioButton) layout.findViewById(R.id.radioButton1);
> 
>   radio.setOnClickListener(new OnClickListener() {
> 
>       @Override
>       public void onClick(View v) {
>           // TODO Auto-generated method stub
> 
>                       //check.setVisibility(View.GONE);
> 
>           System.out.println("data "+app.arryList.get(position)); 
> 
>       }
>   });
> 
>       }
>   });
> 
>   return layout; 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:44:41.490

试试这个，使用`ListView.CHOICE_MODE_MULTIPLE`

```
 listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:49:19.547

我认为这`ListView.CHOICE_MODE_SINGLE`将更适合他的需要。

但也许保存一组单选按钮并相应地设置它们是一个不错的主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:19:26.140

我试图解决您的问题并从我这边完成。

我在下面解释方法，有关更多详细信息和完整的源代码，请参阅下面的博客。

[http://amitandroid.blogspot.in/2013/03/android-custon-single-choice-lsitview.html](http://amitandroid.blogspot.in/2013/03/android-custon-single-choice-lsitview.html)

希望这能解决您的问题。

![在此处输入图像描述](../Images/568315f09f67e946b4a17b35d55455f0.png)

我创建了自定义单选列表。您可以更改布局并相应地添加小部件。

第1步）

```
package com.custom.view;

import java.util.ArrayList;
import java.util.List;
import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Checkable;
import android.widget.RelativeLayout;

public class CheckableRelativeLayout extends RelativeLayout implements
        Checkable {

    private boolean isChecked;
    private List<Checkable> checkableViews;

    public CheckableRelativeLayout(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
        initialise(attrs);
    }

    public CheckableRelativeLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        initialise(attrs);
    }

    public CheckableRelativeLayout(Context context, int checkableId) {
        super(context);
        initialise(null);
    }

    public boolean isChecked() {
        return isChecked;
    }

    public void setChecked(boolean isChecked) {
        this.isChecked = isChecked;
        for (Checkable c : checkableViews) {
            c.setChecked(isChecked);
        }
    }
    public void toggle() {
        this.isChecked = !this.isChecked;
        for (Checkable c : checkableViews) {
            c.toggle();
        }
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();

        final int childCount = this.getChildCount();
        for (int i = 0; i < childCount; ++i) {
            findCheckableChildren(this.getChildAt(i));
        }
    }

    /**
     * Read the custom XML attributes
     */
    private void initialise(AttributeSet attrs) {
        this.isChecked = false;
        this.checkableViews = new ArrayList<Checkable>(5);
    }

    /**
     * Add to our checkable list all the children of the view that implement the
     * interface Checkable
     */
    private void findCheckableChildren(View v) {
        if (v instanceof Checkable) {
            this.checkableViews.add((Checkable) v);
        }

        if (v instanceof ViewGroup) {
            final ViewGroup vg = (ViewGroup) v;
            final int childCount = vg.getChildCount();
            for (int i = 0; i < childCount; ++i) {
                findCheckableChildren(vg.getChildAt(i));
            }
        }
    }
} 
```

第2步）

```
package com.custom.view;

import android.content.Context;
import android.util.AttributeSet;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.widget.CheckBox;
public class InertCheckBox extends CheckBox {

    public InertCheckBox(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public InertCheckBox(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public InertCheckBox(Context context) {
        super(context);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return false;
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        return false;
    }

    @Override
    public boolean onKeyMultiple(int keyCode, int repeatCount, KeyEvent event) {
        return false;
    }

    @Override
    public boolean onKeyPreIme(int keyCode, KeyEvent event) {
        return false;
    }

    @Override
    public boolean onKeyShortcut(int keyCode, KeyEvent event) {
        return false;
    }

    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        return false;
    }

    @Override
    public boolean onTrackballEvent(MotionEvent event) {
        return false;
    }
} 
```

步骤 3)

```
<?xml version="1.0" encoding="utf-8"?>
<com.custom.view.CheckableRelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:layout_marginRight="10dp"
    android:paddingTop="5dp"
    android:paddingBottom="5dp">

    <com.custom.view.InertCheckBox 
        android:id="@+id/singleitemCheckBox"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_alignParentLeft="true" 
        android:layout_centerVertical="true" 
        android:focusable="false" 
        android:button="@drawable/single_radio_chice" />

    <TextView
        android:id="@+id/singleitemId" 
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" 
        android:layout_toRightOf="@+id/singleitemCheckBox"
        android:layout_centerVertical="true" 
        android:layout_marginLeft="20dp"
        android:textSize="14sp" 
        android:focusable="false" />

    <TextView
        android:id="@+id/nextitem" 
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" 
        android:layout_toRightOf="@+id/singleitemId"
        android:layout_centerVertical="true" 
        android:layout_marginLeft="20dp"
        android:textSize="14sp" 
        android:focusable="false" />

</com.custom.view.CheckableRelativeLayout>

Step4)

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:choiceMode="singleChoice"
        android:listSelector="#00000000" />

</RelativeLayout> 
```

Step5) single_radio_chice.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">

        <item android:state_checked="false" 
            android:drawable="@drawable/radio_off" />

        <item android:state_checked="true" 
            android:drawable="@drawable/radio_on" />
    </selector> 
```

# ios - 如何使用适用于 iOS 的 Google Maps SDK 绘制圆圈？

> ID：15433890
> 
> 赞同：4
> 
> 时间：2013-03-15T13:37:49.727
> 
> 标签：ios, google-maps, google-maps-sdk-ios

我真的对这个问题感到困惑。我想在我的 iOS 应用程序中的谷歌地图上画圈。在 SDK 帮助中仅提供多边形示例。有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T15:54:52.043

我不知道你为什么被记录下来，因为我有同样的问题。经过大量研究和撒克逊德鲁斯的回答，我在 Android SDK 上看到了 Circle，但在 iOS 上没有。

- - 编辑 - -

这里有两个解决方案： [如何在 GMSMapView 中显示一个圆圈](https://stackoverflow.com/questions/15380441/how-to-display-a-circle-in-gmsmapview)

--- 编辑 2 ----

从他的版本 1.2.1（2013 年 4 月 23 日）开始，适用于 iOS 的 Google Maps SDK 在他的 Shapes 中计算了一个 GMSCircle。

现在你可以像这样画：

```
CLLocationCoordinate2D circleCenter = CLLocationCoordinate2DMake(37.35, -122.0);
GMSCircle *circ = [GMSCircle circleWithPosition:circleCenter
                                         radius:1000];

circ.fillColor = [UIColor colorWithRed:0.25 green:0 blue:0 alpha:0.05];
circ.strokeColor = [UIColor redColor];
circ.strokeWidth = 5;
circ.map = mapView; 
```

来源[这里](https://developers.google.com/maps/documentation/ios/shapes#circles)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T23:30:35.940

目前SDK不支持圈子，但是这里有一个添加圈子的功能请求：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=4971](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4971)

同时，您可以通过绘制一条多段线来伪造一个圆圈，并带有几个短线段？

# php - 将 PHP 变量打印到 JavaScript 变量中

> ID：15433894
> 
> 赞同：3
> 
> 时间：2013-03-15T13:38:06.970
> 
> 标签：php, javascript

是的，我知道这个问题被问了很多，但我对 JS 相当陌生，我需要在一些 JS 中使用 php 变量。我更清楚 PHP 是在服务器端执行而 JS 是客户端，但是其他人声称这是有效的。

我有一个名为“test1”的 PHP 变量，我想将它记录到 JS 控制台（例如）：

```
 <?php
 $test1 = '1';

 print '
 <script type="text/javascript">
      var carnr;        
      carnr = "<?php print($test1); ?>"
      console.log(carnr);
 </script>';
 ?> 
```

它的作用是将“”打印到 JS 控制台。不完全是我所希望的。

现在这甚至可能不可行，我可能不得不将变量从页面中传递出去，然后使用 AJAX 再次返回，但如果有可用的解决方案，我宁愿有一个快速简单的解决方案！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T13:43:45.287

你可以这样做。

```
<script>
    var JSvar = "<?= $phpVar ?>";
</script> 
```

PHP 将被解析，并且 $phpVar 的值将成为 JSvar 的值。

***确保正确编码 phpVar。例如，如果 phpVar 包含双引号，你最终会得到一个损坏的 JS***

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T13:46:11.857

使用这个不需要给 "" => 更改为 '.$test1.'..

```
<?php
 $test1 = '1';

 print '
 <script type="text/javascript">
      var carnr;        
      carnr = "'.$test1.'"
      console.log(carnr);
 </script>';
 ?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T13:42:19.820

尝试

```
<?php $test1 = '1'; ?>
<script type="text/javascript">
  var carnr;        
  carnr = "<?php print($test1); ?>"
  console.log(carnr);
</script> 
```

一般来说，最好不要用 php 打印静态的东西，而是直接在 HTML 中使用静态（即不变的）东西，并且只在真正需要它的部分上使用 PHP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T13:41:12.120

你犯了一个错误，这样做：

```
<?php
 $test1 = '1';

 echo '<script type="text/javascript"> var carnr; carnr = "'.$test1.'" console.log(carnr)</script>';
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T13:41:30.900

由于您正在使用 PHP 编写 JS，因此您可以简单地执行以下操作：

```
$test1 = "blah";

echo "<script type=\"text/javascript\">console.log($test1);</script>"; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-15T13:43:08.653

您已经在打开的 php 标签中。打印行时，只需使用点将变量附加到输出。

例子：

```
print 'variable1 '.$variable1.' is now printed'; 
```

# mysql - 将 mySQL 查询结果重新组合到单个 CSV 文件中

> ID：15433895
> 
> 赞同：0
> 
> 时间：2013-03-15T13:38:07.917
> 
> 标签：mysql, csv, export-to-csv

我不知道我的问题是否存在解决方案。

我正在尝试重新组合来自两个类似查询的结果，而不使用 mySQL 之外的任何其他内容。

这是我的要求：

```
SELECT id, type as objet, decret as type, resume as synthese FROM projets
SELECT id, type as objet, decret as type, resume as synthese FROM articles 
```

显然，如果我尝试，我会得到一个模棱两可的错误

```
SELECT id, type as objet, decret as type, resume as synthese FROM articles, projets 
```

我想合并这些结果，以便将其导出到单个 CSV 文件中，而不使用 Excel 操作等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:41:49.240

尝试联合

```
SELECT id, type as objet, decret as type, resume as synthese FROM projets
UNION
SELECT id, type as objet, decret as type, resume as synthese FROM articles 
```

[http://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

假设两个表中的列相同。

# security - 从非 Worklight 应用程序调用 Worklight 适配器

> ID：15433896
> 
> 赞同：1
> 
> 时间：2013-03-15T13:38:13.273
> 
> 标签：security, adapter, ibm-mobilefirst

在 WebSphere 应用程序服务器中将适配器（无论是 HTTP、SQL、JMS 还是 CastIron）部署到 Worklight Server 时，我相信我们可以从任何非 Worklight 应用程序外部调用适配器，如下所示。

*http://localhost:8080/invoke?adapter=ADAPTER_NAME&procedure=PROCEDURE_NAME¶meters=[PARAMETER1,PAREMETER2,...]*

从这个线程注意到： [https ://www.ibm.com/developerworks/forums/thread.jspa?threadID=453422](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=453422)

使用这种方法的优点和缺点是什么？真的推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:02:32.473

**优点**：

它易于从多个应用程序访问；访问适配器 URL 和传递参数。

**缺点**：容易破解启用的身份验证框架

**解决方法**：我遇到了同样的情况，我通过在服务器上注入我的自定义侦听器来侦听每个请求，然后根据我的标准将其转发到适配器或 worklight 应用程序，从而克服了它。这样我可以防止外部访问。

还有另一种使用**自定义身份验证模型**的方法。

[http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/08_04_Custom_Authenticator_and_Login_Module.pdf](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/08_04_Custom_Authenticator_and_Login_Module.pdf)

[http://www.ibm.com/developerworks/mobile/worklight/getting-started.html](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:37:46.967

易用性是最大的优点，安全性是最大的缺点。为了能够以这种方式调用过程，您的适配器必须免于任何安全测试 (wl_unprotected)。如果您的 Worklight 主机和端口对 Internet 开放（很可能），任何知道适配器名称、过程名称等的人都可以调用您的适配器。

# iphone - UIImage 旋转时质量下降

> ID：15433897
> 
> 赞同：2
> 
> 时间：2013-03-15T13:38:13.960
> 
> 标签：iphone, objective-c, rotation, uiimage

我正在使用此代码来旋转 UIImage。

```
CGFloat DegreesToRads(CGFloat degrees) {
   return degrees * M_PI / 180;
}

- (UIImage *)scaleAndRotateImage:(UIImage *)image forAngle: (double) angle {

    float radians=DegreesToRads(angle);
    // calculate the size of the rotated view's containing box for our drawing space
    UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0, image.size.width, image.size.height)];
    CGAffineTransform t = CGAffineTransformMakeRotation(radians);
    rotatedViewBox.transform = t;
    CGSize rotatedSize = rotatedViewBox.frame.size;

    // Create the bitmap context
    UIGraphicsBeginImageContext(rotatedSize);
    CGContextRef bitmap = UIGraphicsGetCurrentContext();

    // Move the origin to the middle of the image so we will rotate and scale around the center.
    CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

    //Rotate the image context
    CGContextRotateCTM(bitmap, radians);

    // Now, draw the rotated/scaled image into the context
    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-image.size.width/2, -image.size.height/2 , image.size.width, image.size.height), image.CGImage );

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;

} 
```

工作正常，但旋转后图像质量更差。可能是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:54:11.483

尝试

```
UIGraphicsBeginImageContextWithOptions(rotatedSize, NO, 2.0) 
```

来自苹果文档：

```
void UIGraphicsBeginImageContextWithOptions(
   CGSize size,
   BOOL opaque,
   CGFloat scale
); 
```

**参数**

*   **size**新位图上下文的大小（以磅为单位）。这表示 UIGraphicsGetImageFromCurrentImageContext 函数返回的图像的大小。要获得以像素为单位的位图大小，您必须将宽度和高度值乘以比例参数中的值。

*   **opaque** 一个布尔标志，指示位图是否不透明。如果您知道位图完全不透明，请指定 YES 以忽略 Alpha 通道并优化位图的存储。指定 NO 意味着位图必须包含一个 Alpha 通道来处理任何部分透明的像素。

*   **scale** 应用于位图的比例因子。如果您指定值 0.0，则比例因子设置为设备主屏幕的比例因子。

再见 ：）

# perl - 在 STDIN 上读取记录会产生未初始化的值错误

> ID：15433903
> 
> 赞同：0
> 
> 时间：2013-03-15T13:38:30.443
> 
> 标签：perl, stdin

我想在标准输入上以交互方式阅读记录。CTRL+D 标记记录的结束。它会一直持续下去，直到按下 ctrl+c。我的代码产生以下错误：

```
Use of uninitialized value in open 
Use of uninitialized value in <HANDLE> 
```

通过测试 $rec 可以避免错误，我必须这样做才能跳过空记录。但我觉得我在掩盖一个我不太明白的问题。我怀疑标准输入正在关闭，但我不确定。你能解释为什么会发生错误以及如何修复我的循环吗？

```
my $eof = $INPUT_RECORD_SEPARATOR;
while (1) {
  local $INPUT_RECORD_SEPARATOR = chr(0x04);
  my $rec = <STDIN>;

  # format last record that ended with ^D
  local $INPUT_RECORD_SEPARATOR = $eof;
  open my $input, "<", \$rec;    
  my_formatting_func $input;
  close $input;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:50:01.150

您的代码无论如何都不会工作，因为它`format`期望输出文件句柄名称和图片格式作为其参数，并且您正在为其提供输入文件句柄引用。

然而，问题是控制-D 是在 Perl 程序看到它之前由 C 库处理的。它导致流被关闭，随后的调用`readfile`将返回`undef`。

写吧

```
last unless defined $rec; 
```

您将获得完整的输入记录。最重要的是，使用通常的成语并写

```
{
    my $eof = $INPUT_RECORD_SEPARATOR;
    local $INPUT_RECORD_SEPARATOR;
    while (my $rec = <STDIN>) {
        local $INPUT_RECORD_SEPARATOR = $eof;
        open my $input, "<", \$rec;    
        format $input;
        close $input;
    }
} 
```

# jquery - 加载功能在 chrome 上无法正常工作

> ID：15433907
> 
> 赞同：0
> 
> 时间：2013-03-15T13:38:46.970
> 
> 标签：jquery, load

下面是代码，问题是#smsregid.val 在 Firefox 中发生变化，但在 Chrome 中没有变化，任何建议为什么

```
function subSmsForm() {
    $.post('?action=smsregistration-save', $('#smsform').serialize(),

   function(data) {
            $('#mess').html(data.message);
            $('#mess').show();
            $('#signup').hide();
            $('#verify').show();
            $('#verify').load('?action=verification');
            alert(data.smsregid);
            $('#smsregid').val(data.smsregid);
        }, "json");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:44:41.377

试试这个

```
 $('#smsregid').prop('value', data.smsregid); 
```

# android - Google InApp 结算空异常

> ID：15433909
> 
> 赞同：3
> 
> 时间：2013-03-15T13:38:49.640
> 
> 标签：android, in-app-billing, google-play-services

当我查询 Google InApp Billing 项目的产品列表时，我收到 Null Exception 错误。

我在 In-App Developer Console 网站上添加了一项，它的状态显示为“活动”；

下面是我的代码。

```
 // Listener that's called when we finish querying the items and subscriptions we own
IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
        Log.d(TAG, "Query inventory finished 15.");
        if (result.isFailure()) {
           Log.d(TAG,"Failed to query inventory: " + result);
            return;
        }

        SkuDetails productDetails = inventory.getSkuDetails(SKU_ANATVITALSIGNS);

  //      Log.d(TAG,"Gas Price is: " + productDetails.getPrice());

        if (productDetails != null){
            Log.d(TAG,"Deck price is: " + productDetails.getPrice());
        }else{

            Log.d(TAG,"No Product Detail" );
        }

        Log.d(TAG, "Query inventory was successful.");

//        updateUi();
//        setWaitScreen(false);
        Log.d(TAG, "Initial inventory query finished; enabling main UI.");
    } 
```

例如，当我尝试获取“productDetails.getPrice()”时程序出错。

任何帮助表示赞赏。这已经是两天的头疼了。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T02:43:16.417

我没有使用格式正确的查询来呼叫侦听器。

我添加了下面的代码并将信息传递给监听器，我的产品详细信息现在显示出来了。

以下是我更改的代码：

```
String[] moreSkus = {SKU_ANATVITALSIGNS};
mHelper.queryInventoryAsync(true, Arrays.asList(moreSkus), mGotInventoryListener); 
```

这解决了问题。

# android - Android 客户端和 Node.js 服务器

> ID：15433911
> 
> 赞同：3
> 
> 时间：2013-03-15T13:38:50.077
> 
> 标签：android, node.js, cordova, socket.io, audiorecord

我正在尝试开发像[PTTDroid](https://code.google.com/p/pttdroid/)这样的项目，我的意思是 Push-To-Talk 或 Walkie-Talkie 应用程序。

问题是在这个应用程序中你不能使用 3G 访问网络，所以我决定使用 Node.js 服务器并实现一个 Android 客户端与之通信。我尝试使用 Phonegap 进行多平台项目，问题是对于音频记录，您无法访问缓冲区，您只能开始和停止或暂停录制过程，但不能在捕获时发送数据。所以我的问题是，可以通过 Socket.IO 或类似的 Node.js 服务器通过原生 Android 功能（Audiorecord 类）实时流式传输音频捕获吗？

我发现了这个[项目](https://github.com/sudar/Asimi-js)，Asimi JS，但我不知道其他人是否知道更好的方法来做我想做的事。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:23:23.577

当然可以，但不建议使用标准的 NodeJS http 服务器，因为它使用 tcp。您希望使用 UDP 作为音频的传输层，因为它会更快，并且可能发生的小丢包很可能不会成为问题。

老实说，听起来您需要在本机平台上编写一些演示应用程序 - 所以不要使用 phonegap。您需要本机平台才能访问诸如麦克风之类的东西并通过 UDP 流式传输。

当你有一个演示工作时，你可以在之后继续尝试另一个平台，但从一个简单的设置开始，而不是尝试一次完成所有工作 - 如果这很容易，其他人会在你之前完成它。

让我推荐一个简单的 UDP 服务器，使用您最熟悉的任何语言，例如（NodeJS、Java、C、C++、C#）。让 UDP 服务器接收内容并将其保存到文件中，然后您可以在台式计算机上播放该文件以验证结果。作为一个简单的客户端，在 Android 或 iOS 上构建一个，并流式传输您已经记录并包含在应用程序中的文件。当你有这个设置工作时，你可以尝试捕获麦克风，然后做一个用户界面，然后支持多个电话，然后构建一个记录对话的服务器，然后构建一个用户数据库，等等。但是从您的主要功能的原型开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T07:49:36.667

我终于发现并解决了我的问题（至少我是这么认为的）......首先我创建了一个服务器来通过DatagramSocket发送和接收UDP数据包，然后实现服务器和客户端之间的通信，当时我是通过3G连接，我需要一个静态端口和IP，这就是为什么我的服务器无法连接到客户端。使用数据连接时，用户 IP 和端口并不总是相同的，如果要发送和接收，则必须始终打开相同的套接字。另一方面，服务器必须在连接时存储来自客户端的地址和端口。

非常感谢您的帮助[ExxKA](https://stackoverflow.com/users/635718/exxka)

# math - 在 TBN 矩阵中，法线、切线和双切线向量是否总是垂直的？

> ID：15433917
> 
> 赞同：4
> 
> 时间：2013-03-15T13:39:13.017
> 
> 标签：math, opengl, matrix, 3d, lighting

这与另一个问题（那里的图像）中描述的问题有关：

[Opengl 着色器问题 - 奇怪的光反射伪影](https://stackoverflow.com/questions/15385474/opengl-shader-problems-weird-light-reflection-artifacts)

我有一个 .obj 导入器，它创建一个数据结构并计算切线和双切线。这是我的对象中第一个三角形的数据：

![数据结构](../Images/ae9411d8b24dd6d02f694176ef0cee87.png)

我对切线空间的理解是法线从顶点向外指向，切线与法线向量垂直（正交？）并指向纹理中正S的方向，而双切线与两者垂直。我不确定你怎么称呼它，但我认为这 3 个向量形成了看起来像旋转或变换的 x、y、z 轴。它们不会是 3 个*随机*定向的向量，对吧？

还有我的理解：法线贴图中的法线提供了一个新的法线向量。但是在切线空间纹理贴图中，在 rgb 编码法线和每个顶点法线之间没有内置的方向。因此，您使用 TBN 矩阵来弥合差距并将它们放在同一个空间中（或在正确的空间中获得照明）。

但后来我看到了对象数据……我的结构有 270 个顶点，所有顶点的切线 Y 均为 0。切线数据是否正确？这些切线是像顶点法线空间还是什么？或者他们只是看起来完全错误？还是我对它的工作原理和我的数据是否正确感到困惑？

为了更接近解决我在另一个问题中的问题，我需要确保我的数据是正确的以及我对切线空间照明数学如何工作的理解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T13:59:24.997

切线和双切线向量指向纹理坐标的 S 和 T 分量的方向（U 和 V 用于不习惯 OpenGL 术语的人）。所以切线向量沿 S 点，双切线点沿 T。

所以是的，这些不必*与*法线*或彼此*正交。它们遵循纹理映射的方向。事实上，这就是它们的目的：允许您将法线从模型空间转换到纹理空间。它们定义了从模型空间到纹理空间的映射。

仅当该顶点处的 S 和 T 分量正交时，切线和双切线才会相互正交。也就是说，如果纹理映射没有剪切。虽然大多数纹理映射算法会尽量减少剪切，但它们无法消除它。所以如果你想要一个精确的矩阵，你需要一个非正交切线和双切线。

# facebook - 未触发操作链接端点

> ID：15433924
> 
> 赞同：1
> 
> 时间：2013-03-15T13:39:27.487
> 
> 标签：facebook, hyperlink, action

我对我的应用程序进行了一些操作（例如 Wish 和 Buy）（尽管我想更具体，但我不能更具体）。它们链接到操作链接，并正确显示在 FB 上。例如，我有用于 Wish 操作的操作链接 Buy setip。端点配置为`https://sitename/fb_buy`. 每当我点击 FB 上的 Buy This Wish 链接时，服务器甚至都没有收到来自 FB 的点击（检查访问日志，什么都没有）。

当我调试点击时，来自 FB 的错误 500 “*抱歉，出了点问题。我们正在努力尽快修复这个问题。* ”...

我认为这是暂时的，但是我已经尝试了几天，但没有运气。我购买了 SSL 证书并正确安装，chrome 显示绿色安全连接，所有其他 https 服务都像魅力一样工作......

不知道我做错了什么，因为正如我所说，Facebook 的服务器甚至没有“接触”或尝试连接我的..

谢谢

# javascript - 我可以在打开的图表中通过 fb.api 调用传递一些参数吗

> ID：15433927
> 
> 赞同：1
> 
> 时间：2013-03-15T13:39:36.837
> 
> 标签：javascript, facebook-graph-api

请参阅以下我用于 Facebook Open Graph 的代码：

```
<meta property="fb:app_id" content="XXXXX" /> 
<meta property="og:type"   content="collection" /> 
<meta property="og:url"    content="http://XXXXXXXXXXXXX/" /> 
<meta property="og:title"  content="" /> 
<meta property="og:image"  content="http://XXXXXXXXXXXXXXXXXXXXXXXXXX.jpeg"/>

<script type="text/javascript">
    function postCook() {

        var parameters = new Array();
        parameters["og:title"] = "some_text";

        FB.api(
            'me/<namespace>:<wwwww>',
            'post', {
            collection: 'http://XXXXXXXXXXXXXXXXX/'
        },

        function(response) {

            //alert(response.responseText);
            console.log(response);

            if (!response || response.error) {
                alert('Error occured');
            } else {
                alert('Other22 was successful! Action ID: ' + response.id);
            }
        });
    }
</script> 
```

在这里，我想传递`og:title`和其他一些参数，而不是在元标记中使用。有什么方法可以在 FB.api 中传递更多参数？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:44:48.473

虽然我对此可能是错误的（因为 Facebook 无情地改变了他们的 API），但他们不允许您传递任何自定义标签信息，因为它可能被用来歪曲信息。

相反，一旦发布操作命中 Facebook，Facebook 将立即抓取传入的 url，并抓取它可以找到的所有元数据，优先考虑任何打开的图形标签，然后再回退到其他传统的元信息检索方法（标题标签、抓取正文等）。

一种可能的“解决方法”是将“回声”网址而不是目标网址本身传递给 Facebook。但是，这取决于您使用服务器端解决方案，因为我不相信您可以使用 JS SDK 做到这一点。

即，不要将[http://www.foobar.com](http://www.barbaz.com/echo.php?title=your%20custom%2otitle&description=etcetc&url=myurl)传递给 facebook，而是传递[http://www.barbaz.com/echo.php?title=your%20custom%2otitle&description=etcetc&url=myurl](http://www.foobar.com)

根据需要调整 url 参数，它们将`echo.php`在`$_GET`. echo.php 然后将包含 Facebook 读取的开放图形标签，然后通过 javascript 将用户重定向到正确的 URL。Facebook 的抓取工具不会遵循 javascript 重定向。

回声.php：

```
<html>
    <head>
        <meta property="og:title" value="<?=$_GET['title']?>">
    </head>
    <body>
        <script>
            window.location.href = '<?=$_GET['url']?>';
        </script>
    </body>
</html> 
```

或者，您可以在 echo.php 顶部检查 facebook 的用户代理字符串，并使用 将任何非点击重定向到正确的 url `header();`，并且只为 facebook bot 呈现反弹页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:44:10.820

> 在这里，我想传递 og:title 和其他一些参数，而不是在元标记中使用。

这不是 Open Graph 对象的工作方式。

URL 标识对象，并且任何数据都必须在此 URL 提供的 HTML 代码中。

# java - ZipOutputStream 抱怨 FileNotFoundException

> ID：15433929
> 
> 赞同：0
> 
> 时间：2013-03-15T13:39:46.157
> 
> 标签：java, zip, solaris, zipoutputstream

new_file_name 类似于`2013-03-15-08:59:10_65.zip`

```
 fileZip = new ZipOutputStream(new FileOutputStream(new File(new_file_name)));
    byte[] buffer = new byte[1024];
    try{
        for(String fileName:fileList)
        {
            FileInputStream in = null;
            try{
                File file = new File(fileName);
                ZipEntry ze = new ZipEntry(fileName);
                fileZip.putNextEntry(ze);
                in = new FileInputStream(file);
                int len = 0;
                while((len = in.read(buffer)) > 0) {
                    fileZip.write(buffer, 0, len);
                }
                fileZip.closeEntry();
                in.close();
            } catch (Exception e) {
                log(0, "Exception writing "+fileName+" to "+new_file_name+": "+e.toString());
        } 
```

我得到了这个例外`Exception writing to 2013-03-15-09:28:20_65.zip: java.io.FileNotFoundException: (No such file or directory)`

该目录具有完全权限。我也看到在文件夹中创建了一个文件，我也尝试给出 getAbsolutePath()，仍然给了我同样的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:45:53.580

我编写了一些实用程序方法来使用 NIO.2 File API（该库是开源的）将目录复制到 Zip 文件中/从 Zip 文件中复制目录：

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>softsmithy-lib-core</artifactId>  
    <version>0.3</version>  
</dependency> 
```

教程：

[http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html#AddZipResourceSample](http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html#AddZipResourceSample)

API：[CopyFileVisitor.copy](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/nio/file/CopyFileVisitor.html#copy%28java.nio.file.Path,%20java.nio.file.Path%29)

也许你觉得它很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:44:44.133

我认为你**不允许**在文件名中使用'：'，如果你使用“2013-03-15-08_59_10_65.zip”应该没问题。

**好的...当fileList 中的文件不存在**时，我以某种方式设法找到了相同的错误！

# awk - awk 根据 file1 的条件打印 file2 的行

> ID：15433930
> 
> 赞同：3
> 
> 时间：2013-03-15T13:39:56.217
> 
> 标签：awk

我有两个文件：

猫文件1：

```
0 xxx
1 yyy
1 zzz
0 aaa 
```

猫文件2：

```
A bbb
B ccc
C ddd
D eee 
```

如何使用 awk 获得以下输出：

```
B ccc
C ddd 
```

我的问题是，只有当 file1 中的某个字段（即字段 1）与某个值（即 1）匹配时，我如何从 file2 打印行？

附加信息：

文件 file1 和 file2 的行数相等。

文件 file1 和 file2 有数百万行，无法读入内存。

file1 有 4 列。

file2 大约有 1000 列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:43:01.270

尝试这样做（有点混淆）：

```
awk 'NR==FNR{a[NR]=$1}NR!=FNR&&a[FNR]' file1 file2 
```

在多行上它可以更清晰（提醒，`awk`像这样工作: `condition{action}`:

```
awk '
    NR==FNR{arr[NR]=$1}
    NR!=FNR && arr[FNR] 
' file1 file2 
```

如果我删除片段的“聪明”部分：

```
awk '
    if (NR == FNR) {arr[NR]=$1}
    if (NR != FNR && arr[FNR]) {print $0} 
' file1 file2 
```

当`awk`单独找到一个条件（没有动作）`NR!=FNR && arr[FNR]`时，默认情况下`STDOUT`隐式打印是表达式是`TRUE`（> 0）

## 解释

*   `NR`是从输入开始的当前记录的编号
*   `FNR`**是当前文件**中当前记录的序号（因此与第二个文件`NR`不同`FNR`）
*   `arr[NR]=$1`：用第一列`arr`的当前索引馈送数组`NR`
*   如果`NR!=FNR`我们在下一个文件中并且如果数组的值 if `1`，那么我们打印

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:46:26.573

没有 awk 解决方案那么干净

```
$ paste file2 file1 | sed '/0/d' | cut -f1
B
C 
```

您提到了有关数百万行的内容，为了只通过文件一次，我将求助于 python。可能是这样的（python 2.7）：

```
with open("file1") as fd1, open("file2") as fd2:
    for l1, l2 in zip(fd1, fd2):
        if not l1.startswith('0'):
            print l2.strip() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T13:46:39.270

```
awk '{
  getline value <"file2";
  if ($1)
    print value;
}' file1 
```

# php - 如何使用带有 XML 数据的一个字段中的值在 HTML 中创建“表”？

> ID：15433940
> 
> 赞同：-1
> 
> 时间：2013-03-15T13:40:36.610
> 
> 标签：php, html, xml

我不是 PHP 专业人士，所以我需要这方面的帮助。我正在使用一些 PHP 应用程序。我有一个带有 XML 数据格式的 STRING field1：

```
$field1='<messages>
  <person id="501">
    <name>Jan</name>
    <surname>Scott</surname>
  </note>
  <person id="502">
    <name>Mark</name>
    <surname>Cruise</surname>
  </person>
</messages>'; 
```

我需要放入包含以下外观的 field2（HTML 类型）表：

```
NAME   SURNAME

JAN    SCOTT
MARK   CRUISE 
```

从第一个字段解析到第二个字段值的 php 脚本是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:46:05.260

查看[SimpleXML](http://php.net/manual/en/book.simplexml.php)以轻松遍历您的 XML 字符串。然后你可以简单地用类似的东西构造html输出

```
$xml = new SimpleXMLElement($field1);

$html = "<table>";
$html .= "<tr><td>NAME</td><td>SURNAME</td></tr>";

foreach($person in $xml->person) {
  $html .= "<tr><td>" . $person->name . "</td><td>" . $person->surname . "</td></tr>";
}

$html .= "</table>"; 
```

没有尝试代码，但基本想法是这样的。如果你想要大写，你添加它。

其次... PHP 通常不再将关键字*var*添加到变量中，并且每个变量名都应以*$*开头。字符串也应该包含在引号内。所以就

```
$field1 = '<messages><person id="501"><name>Jan</name><surname>Scott</surname></note><person id="502"><name>Mark</name><surname>Cruise</surname></person></messages>'; 
```

如果你想要多行字符串，你应该看看[HEREDOC 语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

如果您必须在变量前面加上*var*，那么您可能使用的是相当旧的 PHP 版本，然后我的一些评论可能不适用。如果是这种情况，请更新您的 PHP 安装，或者返回这里使用您正在运行的 PHP 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:06:38.880

```
 <?php
$xmlString = '<messages>
  <person id="501">
    <name>Jan</name>
    <surname>Scott</surname>
  </person>
  <person id="502">
    <name>Mark</name>
    <surname>Cruise</surname>
  </person>
</messages>';

$xml = new SimpleXMLElement($xmlString);
echo "<table border='1' width='50%'>";
echo "<tr>
        <td>Id</td>
        <td>Name</td>
        <td>SurName</td>
    </tr>";
foreach ($xml as $element)
{
    echo "<tr>";
    echo "<td>";
    echo $element["id"];
    echo "</td>";
    foreach ($element as $key => $val)
    {
        echo "<td>";
        echo $val;
        echo "</td>";
    }
    echo "</tr>";
}
echo "</table>";
?> 
```

此代码会将您的 xml 转换为基本的 html 表。

# github - 在 Github gollum 中包含代码文件不起作用。我究竟做错了什么？

> ID：15433941
> 
> 赞同：2
> 
> 时间：2013-03-15T13:40:41.147
> 
> 标签：github, wiki

有没有人设法完成这项工作？咕噜似乎对此有问题。它拒绝从 git 加载任何文件，我得到的只是一个空的灰色框。

从文档...

### GITHUB 语法高亮

作为一项额外功能，您可以语法突出显示存储库中的文件，允许您将一些示例代码保留在主存储库中。重建 wiki 时会更新代码片段。您包括这样的 github 代码：

```
```html:github/gollum/master/test/file_view/1_file.txt``` 
```

这将使构建器在gollum**项目**中的**master 分支**中的路径**test/file_view/1_file.txt中查看****github 用户**。它将被重写为：

 ******```
```html
<ol class="tree">
  <li class="file"><a href="0">0</a></li>
</ol>
``` 
```******

# python - 将转换百分比插入数据库

> ID：15433946
> 
> 赞同：0
> 
> 时间：2013-03-15T13:41:00.137
> 
> 标签：python, sqlite

是的，我对这件作品的目标是将打印值输入数据库，但在从终端查询时，数据库返回浮点而不是打印值是否有办法强制将其传递给数据库。这是我的代码

```
def getCpuLoad():
   """
   Returns the cpu load as a value from the interval [0.0, 1.0]
   """
   dt = list(deltaTime(INTERVAL))
   idle_time = float(dt[3])
   total_time = sum(dt)
   load = 1-(idle_time/total_time)
   return load

def diskspace():
  stats = os.statvfs('/opt')
  freespace = stats.f_bavail * stats.f_frsize
  freespace / 1048576
  return freespace

while True:
  print time.strftime("%A, %B, %d, %Y, %H, %M"),"CPU usage=%.2f%%" % (getCpuLoad()*100) 
  cursor.execute('''INSERT INTO mytable (Date, Cpu) VALUES (?,?)''',(today, getCpuLoad()))
  print time.strftime("%A, %B, %d, %Y, %H, %M"), diskspace()
  cursor.execute('''INSERT INTO mytable (Date, free) VALUES (?,?)''',(today,diskspace())) 
```

可以看出 cursor.commit() ，我在打印时对浮点进行舍入，但如上所述，它只插入它而不进行转换。任何人都可以帮助请清楚，因为我仍在学习两者。python和sqlite3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:52:47.840

对于数字数据，SQLlite3 支持**整数**（存储为 1、2、4、6 或 8 个字节）或实数（存储为 8 字节[**IEEE 浮点数**](http://en.wikipedia.org/wiki/IEEE_754)）。

Cpu 列目前似乎是 REAL 类型，当检查此列中的值时，您看不到小数点后正好有两位数的整洁数字。这是因为以下两个原因：

*   最初产生的数字`getCpuLoad()`是按照 Python 浮点算法允许的最高精度计算的。
*   无论如何，即使您`round()`在逻辑中的某个点达到了该数字，并且取决于您使用哪个程序来检查该值，浮动格式使得某些值仍然看起来是近似的（例如，显示 `13.5999999`您期望的位置不错`13.6`）

换句话说：你可以修改`getCpuLoad()`'s last but one line to read

```
 load = round(1-(idle_time/total_time), 2) 
```

即，将返回值四舍五入为两位小数，但是，根据您检查这些值的方式，不要指望它们会系统地“看起来”为 2 小数点后正好 2 位。

然而，明确地四舍五入将“统一”您的数据，从某种意义上说，以前 mytable 中的两个不同记录可能具有诸如 `12.3456781`和之类的值`12.3489121`，现在这两个值将完全相同，`12.35`（即使它可能看起来像`12.34999999`当用一些数据库工具检查时。

或者，您可以考虑将这些值存储为整数，隐含因子为 100，即存储，例如， `1234`代替`12.34`. 如果你这样做，当然你需要在使用或显示它时将值除以 100。
另一种可能的存储类型是将值存储为 SQLite TEXT 类型，但这会相当不方便，因为您需要转换值（所有处理成本以及与 ASCII 到数字转换相关的异常）每次你需要它。

最后，如果您愿意，您可以阅读David Goldberg 的
[***“What Every Computer Scientist Should Know About Floating-Point Arithmetic”***](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，以了解为什么会出现这些舍入错误。

# php - 使用jquery php css将删除图标放在图像的角落

> ID：15433950
> 
> 赞同：2
> 
> 时间：2013-03-15T13:41:04.323
> 
> 标签：php, jquery, css

这是将图像从数据库中扔到 php 中的 div 中，而在这里我想通过单击删除图标来删除图像，该图标必须位于从数据库中提取的每个图像的右上角。如何在图像的右上角获得删除图标？这就是我在对话框中显示图像的方式。

```
<?php        
$query = "SELECT * FROM files_images";    
$res = mysql_query($query);     
while ($row = mysql_fetch_array($res)) {
    echo "<div id='popimages'>";
    echo "<img title='$row[img]' id='$row[id]' style='width:100px;float:left; height:100px;margin-bottom:5px; margin-left:5px;border:2px solid #b06c1c;border-radius:10px;' src='http://localhost/PhpProject2/user_data/" . $row['filename'] . "'/>";
    echo "</div>";
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:37:43.720

如果我理解正确，请尝试输出如下内容：

HTML

```
 <div id='popimages'>
      <div class="image">
          <img class="btn-delete" onclick="alert('Do something!');" src="http://cdn1.iconfinder.com/data/icons/diagona/icon/16/101.png"/>
          <img title='$row[img]' id='$row[id]' style='width:100px;float:left; height:100px;margin-bottom:5px; margin-left:5px;border:2px solid #b06c1c;border-radius:10px;' src='http://i.i.com.com/cnwk.1d/i/tim/2011/03/16/Chrome-logo-2011-03-16.jpg'/>
      </div>
  </div> 
```

CSS：

```
.image {
   width: 100px;
   height: 100px;
   position: relative;
}
.btn-delete {
   position: absolute;
   cursor: pointer;
   right: 2px;
   top: 2px;

   /* This was edited out because it was stupid. See fernholz's answer.
   left: 100%; 
   margin-left: -10px;
   margin-top: 2px; */
} 
```

JSFiddle：http: [//jsfiddle.net/TK7zB/](http://jsfiddle.net/TK7zB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:56:56.353

您需要用 a 包装您的图像，`<div>`并将您的图像和删除链接放在`<div>`. 我为您创建了[这个小提琴](http://jsfiddle.net/wbhPa/)，这可能就是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:42:00.367

Drewman 在技术上是正确的，我会将 .btn-delete 的样式更改为

```
.btn-delete {
   cursor: pointer;
   position: absolute;
   right: 2px;
   top: 2px;
} 
```

顶部和右侧可以更改为距您想要删除图标的角落的任何距离。

Adrenaxus，非常接近，但需要图像 div 的高度和宽度以及相对位置，而不是绝对位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-13T11:07:11.820

HTML：

```
<div class="img-pos">
    <span class="close">&times;</span>
    <img src="">
</div> 
```

CSS：

```
.img-pos{
    position: relative;
}
.img-pos.close {
    position: absolute;
    top: 2px;
    right: 2px;
    z-index: 100;
} 
```

# android - 带有边距和填充的 Android 权重

> ID：15433951
> 
> 赞同：6
> 
> 时间：2013-03-15T13:41:10.697
> 
> 标签：android, layout, margin, padding

我需要能够使用填充的相对大小 - 根据设备的分辨率和 dpi 更大或更小。

例如，如果我的视图是 100 像素宽，我希望左边有 10 像素的填充，右边有 10 像素的填充。但是，如果它在更高密度的屏幕上运行，比如 250 像素，我需要左右填充均为 25 像素。

硬编码像素或 dp 似乎不合理，如果我能摆脱它，我更愿意避免代码隐藏缩放逻辑。我也不想使用任何额外的加权空视图来获得相同的效果。不知道如何用它来模拟填充。

有没有办法从xml做到这一点？还是我必须根据后面代码中的设备分辨率/dpi 来缩放它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T09:17:05.807

这并不是真正的“填充的相对大小”，但我认为使用[XML 中定义的 Android 尺寸值](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)可以满足您的需求。很难从您的问题中猜出，因为您既想避免“硬编码像素”又想“从 xml 中执行此操作”；）

上面的链接给出了这个例子；

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="textview_height">25dp</dimen>
    <dimen name="textview_width">150dp</dimen>
    <dimen name="ball_radius">30dp</dimen>
    <dimen name="font_size">16sp</dimen>
</resources> 
```

然后;

```
<TextView
    android:layout_height="@dimen/textview_height"
    android:layout_width="@dimen/textview_width"
    android:textSize="@dimen/font_size"/> 
```

Android SDK 本身使用这种方法；

在例如`values/dimens.xml`

```
<resources>

    <!-- Default screen margins, per the Android Design guidelines. -->
    <dimen name="activity_horizontal_margin">16dp</dimen>
    <dimen name="activity_vertical_margin">16dp</dimen>

</resources> 
```

`values-sw600dp/dimens.xml`

```
<resources>

    <!--
     Customize dimensions originally defined in res/values/dimens.xml (such as
     screen margins) for sw600dp devices (e.g. 7" tablets) here.
    -->

</resources> 
```

当您使用“配置限定符名称”[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)时，您可以针对`values-FOO`API 级别、屏幕尺寸、纵向与横向、上述“以及更多”的组合。

# iphone - 在 iphone 中下载图像时在 UIProgressView 中显示准确的进度

> ID：15433956
> 
> 赞同：2
> 
> 时间：2013-03-15T13:41:16.910
> 
> 标签：iphone, ios, objective-c, xcode, ipad

**我有四个包含图像的网址...我正在下载这些图像并将它们放入文档文件夹中..**

**这是我的代码..**

```
-(void)viewDidLoad
{
NSMutableArray *myUrlsArray=[[NSMutableArray alloc]init];
[myUrlsArray addObject:@"http://blogs.sfweekly.com/thesnitch/steve_jobs3.jpg"];
[myUrlsArray addObject:@"http://www.droid-life.com/wp-content/uploads/2012/12/Steve-Jobs-Apple.jpg"];
[myUrlsArray addObject:@"http://2.bp.blogspot.com/-T6nbl0rQoME/To0X5FccuCI/AAAAAAAAEZQ/ipUU7JfEzTs/s1600/steve-jobs-in-time-magazine-front-cover.png"];
[myUrlsArray addObject:@"http://images.businessweek.com/ss/08/09/0929_most_influential/image/steve_jobs.jpg"];
[myUrlsArray addObject:@"http://cdn.ndtv.com/tech/gadget/image/steve-jobs-face.jpg"];

for (int i=0; i<myUrlsArray.count; i++)
{
    [self downloadImageFromURL:[myUrlsArray objectAtIndex:i] withName:[NSString stringWithFormat:@"MyImage%i.jpeg",i]];
}

}

#pragma mark- downloading File

-(void)downloadImageFromURL:(NSString *)myURLString withName:(NSString *)fileName
{
UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:myURLString]]];

NSLog(@"%f,%f",image.size.width,image.size.height);

   // Let's save the file into Document folder.**

    NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES) objectAtIndex:0];

NSString *jpegPath = [NSString stringWithFormat:@"%@/%@",documentsPath,fileName];// this path if you want save reference path in sqlite
NSData *data2 = [NSData dataWithData:UIImageJPEGRepresentation(image, 1.0f)];//1.0f = 100% quality
[data2 writeToFile:jpegPath atomically:YES];

} 
```

**现在...我需要准确显示上述下载进度的 UIProgressView。**

**我怎样才能实现这个功能......**

**任何人都可以提供一些指导来实现这一目标..**

**提前致谢...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:49:13.883

您对 dataWithContentsOfURL 的调用是同步的，这意味着您不会在下载过程中获得更新。

您可以使用像 AFNetworking ( [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking) ) 这样的库，它具有下载进度的回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:02:10.190

实际上更好的解决方案是使用 SDWebImage 管理器，它将为您在后台加载图像并缓存它们。然后下次使用该图像时，它将检查缓存。去谷歌上查询。

这样用户也不必在您下载内容时坐下来等待..

然后看看这个对如何做一个状态有一些想法的另一个问题：

[如何在 SDWebImage 中显示活动指示器](https://stackoverflow.com/questions/9388372/how-to-show-an-activity-indicator-in-sdwebimage)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T14:07:43.843

不要使用`dataWithContentsOfURL`，您正在阻塞主线程，直到数据到达。

而是创建您自己的连接`NSURLConnection`并开始聆听您的代表。

*   `connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response`: 获取总数据大小`[response expectedContentLength]`。
*   `connection:(NSURLConnection *)connection didReceiveData:(NSData *)data`：这是您进行计算并更新您的`UIProgressView`. 比如，loadedBytes/总数据大小。

祝你好运。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T15:23:47.047

我建议您使用一些异步下载技术（AFNetworking、SDWebImage 或自己使用基于委托的方法`NSURLSession`），而不是`dataWithContentsOfURL`这样（a）您不会阻塞主队列；(b) 随着下载的进行，您可以获得进度更新。

我还建议[`NSProgress`](https://developer.apple.com/documentation/foundation/nsprogress?language=occ)为每个下载创建一个。当您的委托方法获得有关已下载字节数的更新时，请更新`NSProgress`对象。

然后，您可以将每个`NSProgress`与 a[`observedProgress`](https://developer.apple.com/documentation/uikit/uiprogressview/1619840-observedprogress?language=objc)相关联[`UIProgressView`](https://developer.apple.com/documentation/uikit/uiprogressview)，并且当您更新您`NSProgress`的 时，UI 可以自动更新。

或者，如果你和一个单`UIProgressView`显示所有下载的总进度`NSProgress`，你可以创建一个父级`NSProgress`，将每个下载的建立为父`NSProgress`级的子级`NSProgress`，然后，随着每个下载更新其各自的`NSProgress`，这将自动触发父级的计算`NSProgress`。同样，您可以将该父级绑定`NSProgress`到一个 master `UIProgressView`，并且您将自动更新 UI 的总进度，只需让每个下载更新其单独的`NSProgress`.

* * *

但是，有一个技巧，因为某些 Web 服务不会通知您预期的字节数。他们将报告 的“预期字节数” `NSURLResponseUnknownLength`，即 -1！（它这样做的合理原因可能超出了这个问题的范围。）这显然使得很难计算下载的百分比。

在这种情况下，有几种方法：

1.  您可以举起双手，只使用不确定的进度指示器；

2.  您可以尝试更改请求，以便 Web 服务将报告有意义的“预期字节数”值（例如[https://stackoverflow.com/a/22352294/1271826](https://stackoverflow.com/a/22352294/1271826)）；或者

3.  您可以使用“估计下载大小”来估计完成百分比。例如，如果您知道您的图像平均为 100kb，您可以执行以下操作来更新`NSProgress`与特定下载关联的图像：

    ```
    if (totalBytesExpectedToWrite >= totalBytesWritten) {
        self.progress.totalUnitCount = totalBytesExpectedToWrite;
    } else {
        if (totalBytesWritten <= 0) {
            self.progress.totalUnitCount = kDefaultImageSize;
        } else {
            double written = (double)totalBytesWritten;
            double percent = tanh(written / (double)kDefaultImageSize);
            self.progress.totalUnitCount = written / percent;
        }
    }

    self.progress.completedUnitCount = totalBytesWritten; 
    ```

    这是使用该`tanh`函数返回“完成百分比”值的一种技巧，该值平滑且渐近地接近 100%，使用`kDefaultImageSize`作为估计的基础。

    它并不完美，但它产生了一个相当不错的完成百分比代理。

# php - 多个 PHP 工作经历

> ID：15433957
> 
> 赞同：0
> 
> 时间：2013-03-15T13:41:24.813
> 
> 标签：php, javascript, mysql, mysqli

我一直在尝试创建一个允许您添加工作经历的 php 表单。我希望它与 javascript 一起添加新字段，例如在此链接中：jsfiddle.net/jaredwilli/tZPg4/4/，但使用下拉列表添加开始日期和结束日期，然后能够将其发布到php。

我是 javascript 的新手，如果可能的话，我需要有关此代码的帮助。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:30:33.313

我是否正确理解您想在现有输入中添加日期选择器？

如果是这种情况，并且看看你是如何使用 jQuery 的，你应该查看jQueryUI ，它有一个[Datepicker](http://jqueryui.com/)[模块](http://jqueryui.com/datepicker/)和很好的文档。

# ruby-on-rails - NoMethodError：未定义的方法`less_config`

> ID：15433965
> 
> 赞同：0
> 
> 时间：2013-03-15T13:41:37.243
> 
> 标签：ruby-on-rails, less, sprockets

[我只是按照指南](https://github.com/seyhunak/twitter-bootstrap-rails)中的描述设置了 twitter-bootstrap-rails ，现在我在less -rails的[第 39 行遇到了这个错误](https://github.com/metaskills/less-rails/blob/master/lib/less/rails/template_handlers.rb#L39)`lib/less/rails/template_handlers.rb`

### 应用程序/资产/样式表/application.css

```
/*
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require bootstrap_and_overrides
 */ 
```

我尝试调试它并删除了所有内容，`app/assets/stylesheets/bootstrap_and_overrides.css.less`但错误仍然存​​在。

我的 Gemfile 中有`therubyracer`& `less-rails`，都在资产组之外。

**我还能做些什么来调试这个？什么可能导致这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:19:46.467

捆绑了哪个版本的less-rails？还有什么版本的 twitter-bootstrap-rails。我问是因为最新的引导程序使用 LESS v1.3.3 语法。我不知道 twitter-bootstrap-rails gem，但我确实维护了 less-rails-bootstrap gem，它在最新的 bootstrap 中完全兼容 less-rails、less.rb 和 LESS v1.3.3 语法代码。

# solr - 将两个方面视为相同的值

> ID：15433968
> 
> 赞同：2
> 
> 时间：2013-03-15T13:41:47.213
> 
> 标签：solr, faceted-search

假设具有 Author 字段的书籍列表。Author 字段的一个方面如何将“Stephen King”和“Richard Bachman”的值视为相同？使这些结果：

*   海明威：8
*   斯蒂芬金：10
*   埃德加爱伦坡：20
*   理查德巴赫曼：5

将显示为：

*   海明威：8
*   斯蒂芬金：15
*   埃德加爱伦坡：20

请注意，分面标题是否为“Stephen King”、“Richard Bachman”或其他名称并不重要。唯一重要的是它们被刻面在一起。

请注意，需要查询时解决方案。不幸的是，这个索引的模式不能改变，它是一个通用索引，如果每个用户都可以让他自己的模式“调整”它就会失控。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:11:38.027

您可以通过将构面字段与构面查询相结合来实现这一点。

将这些添加到您的查询中：

```
&facet=true
&facet.field=author
&facet.query=author:("Hemmingway" OR "Stephen King") 
```

返回的构面将如下所示：

```
facet_counts: {
    facet_queries: {
       "author:("Hemmingway" OR "Stephen King")" : 18
    }
    facet_fields: {
         author: {
            "Hemmingway"      : 8,
            "Stephen King"    : 10,
            "Edgar Allan Poe" : 20,
            "Richard Bachman" : 5
        }
    }
} 
```

* * *

您还可以向构面查询添加“别名”。改变这个

```
&facet.query=author:("Hemmingway" OR "Stephen King") 
```

到

```
&facet.query={!ex=dt key="Hemmingway"}author:("Hemmingway" OR "Stephen King") 
```

方面查询输出将是：

```
 facet_queries: {
       "Hemmingway" : 18
    } 
```

我不确定您是否可以合并 Solr 的两个输出字段（facet_queries 和 facet_fields），但从任何客户端执行此操作都应该是直截了当的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:52:47.777

您需要一个转换字符串的分析链。*如果您在索引时和*查询时应用它，我认为 SynonymFilter 会为您执行此操作。您需要确保 sysnonym 映射仅采用一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T09:49:48.837

我假设您不需要完整的方面列表，只需要前 n 个作者。如果是这种情况，您可以在后处理步骤中进行。

你知道你的同义词，如果你把 facet.limit(比如说 2*n) 稍微高一点，那么你只需要从结果集中过滤掉同义词。如果您最终得到 < n 个结果，那么只需重复上一步（更糟糕的情况下，您必须根据同义词的数量再做一个请求）。

在前...`&facet=true&facet.field=author&facet.limit=100&facet.mincount=1`

这与 Solr 无关，但考虑到所有限制，它可能会削减它。

最好的祝福，

# google-app-engine - GAE：使用 django 表单编辑现有对象：如何检查实例？

> ID：15433969
> 
> 赞同：1
> 
> 时间：2013-03-15T13:41:49.277
> 
> 标签：google-app-engine, django-forms, instance

我并没有真正了解使用 django 表单在 GAE 中编辑现有对象的数据流。用户点击一个链接`<li><a id="entry" href="edit/{{ entry.title|urlencode }}">edit</a></li>`。使用这些`title`信息，我创建了一个对象实例并用数据填充表单。如何从返回的数据中检索实例（在给定的视图中）？我必须来回传递它！？

```
class EditEntry(webapp.RequestHandler):

def get(self, entry_title):
    entry_title = urllib.unquote(entry_title.encode('ascii')).decode('utf-8')

    entry_get = Entry.all().filter("title =", entry_title).get()
    cats = db.Query(Category)
    e_form = EntryForm(instance=entry_get)        
    template_values = {
        'entry_get':entry_get,                           
        'cats':cats,
        'e_form': e_form,
        }    
    path = os.path.join(os.path.dirname(__file__), 'editor.html')
    self.response.out.write(template.render(path, template_values)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:01:29.450

如果有人想知道。在我的情况下，您必须来回传递实例标识符。更准确地说，可以转换为字符串的键。

> 要将字符串编码的键转换回 Key 对象，应用程序将字符串传递给 Key 构造函数。

```
entry_get = Entry.all().filter("title =", entry_title).get() 
```

要将其传递给您的模板，您可以直接使用密钥构造函数：

```
template_values = {
'entry_get':entry_get.key(),
... 
```

或者像一个普通的物体

```
template_values = {
'entry_get':entry_get,
... 
```

如果您选择第二个选项，您可以使用模板语言过滤器检索模板中的密钥`{{ entry_get.key }}`。使用密钥创建 URL：

```
<form action="/new/{{ entry_get }}" method="post">
... 
```

并使用`key`构造函数转换回关键对象：

```
def post(self, key_name):
    key_name = urllib.unquote(key_name.encode('ascii')).decode('utf-8')
    entry_obj = db.get(db.Key(key_name))
    ... 
```

# php - PHP 中的 MySQL 接口

> ID：15433971
> 
> 赞同：0
> 
> 时间：2013-03-15T13:41:56.667
> 
> 标签：php, mysql, web

我想知道是否有一个工具（php 代码）可以连接到 MySQL 数据库，一旦建立连接，我可以使用 Web 界面查询、添加、编辑 MySQL 数据库上的内容？

感谢您的帮助。

注意：我希望将其嵌入到我自己的网站中，以便用户可以这样做，而不是 phpmyadmin

也许类似于：[http ://www.w3schools.com/sql/sql_tryit.asp](http://www.w3schools.com/sql/sql_tryit.asp)

在页面底部，用户可以键入他们的 sql 查询，结果将显示在下一页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:47:32.233

您可以使用此代码查看您的数据库

```
$set = mysql_query('SHOW DATABASES;');
$dbs = array();
while($db = mysql_fetch_row($set))
   $dbs[] = $db[0];
echo implode('<br/>', $dbs); 
```

您可以使用 CRUD（创建、读取、更新、删除）脚本编辑特定表。

[http://www.codeofaninja.com/2011/12/php-and-mysql-crud-tutorial.html](http://www.codeofaninja.com/2011/12/php-and-mysql-crud-tutorial.html)

并使用以下方式显示表格：

[http://php.net/manual/en/function.mysql-list-tables.php](http://php.net/manual/en/function.mysql-list-tables.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:58:11.363

您好，欢迎来到 Stack Overflow。

幸运的是，是的，有多个！

**phpMyAdmin（最受欢迎）：** [http ://www.phpmyadmin.net/home_page/index.php](http://www.phpmyadmin.net/home_page/index.php)

**韭菜： http:** [//www.chive-project.com/](http://www.chive-project.com/)

**SQL 好友：** [http ://sqlbuddy.com/](http://sqlbuddy.com/)

我个人使用 PHPMyAdmin。

关于将其嵌入您自己的网站，您可能可以更改上述任何内容以这种方式运行；你甚至可以使用 iframe 来实现（尽管这可能不是最漂亮的解决方案）。但是，在这样做之前，您必须确保作者允许您以这种方式编辑他们的软件。

另一种方法是尝试制作自己的数据库查看器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:42:44.813

如果您不想使用 phpmyadmin 或任何其他现有的基于 Web 的 sql 数据库管理器，那么您将不得不自己编写。包括显示基于可变大小的数据库表和列等。输入和输出验证和安全性。

经验法则永远不会让用户直接查询您的数据库，无论您有什么安全措施，因为您总是会错过一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:44:09.597

你需要`PhpMyAdmin`这个。`PhpMyAdmin`从以下链接下载：

[http://www.phpmyadmin.net/home_page/downloads.php](http://www.phpmyadmin.net/home_page/downloads.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T14:09:36.573

看看[myDBR](http://mydbr.com)报告工具，它允许你做你列出的所有事情（以及更多）。

# database - 如何在数据库中存储 OR 关系？

> ID：15433972
> 
> 赞同：3
> 
> 时间：2013-03-15T13:41:59.437
> 
> 标签：database

考虑一个专业，比如经济学。假设学生需要选择“EC 101”或“EC 102”，但不一定要同时从该专业毕业。目前，我有两个这样的表：

课程：CourseID、CourseName

专业：MajorID、MajorName、RequiredCourseID

我如何捕捉有时专业的要求是：在我的数据库设计中要么参加课程 A 或课程 B，但不一定同时参加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T23:23:59.563

## 架构设计

你需要重构你的表，并引入一些额外的：

*   课程：CourseID、CourseName

*   专业：MajorID、MajorName

*   MajorRequirements：MajorID、ReqId

*   要求：ReqId、ReqCount

*   必选课程选项：ReqId、CourseID

## 样本数据

从问题：

> 经济学（EC001）：假设学生需要选择“EC 101”或“EC 102”，但不一定要从该专业毕业。

其他要求：

此外，主修 EC001 的学生必须修读所有三门课程 EC 200、EC 201、EC 202。

政治经济学（EC002）：与经济学一样，学生需要选修“EC 101”或“EC 102”，但不一定同时选修。此外，主修 EC002 的学生必须选修 EC 200、EC 201、EC 202 三门课程中的任意两门。（而且，可能还有这里未讨论的其他课程。）

### 培训班

```
Course ID    Name
EC 101       Economics 101
EC 102       Economics 102
EC 200       Economics 200
EC 201       Economics 201
EC 202       Economics 202 
```

### 专业

```
Major ID     Name
EC001        Economics
EC002        Political Economy 
```

### 主要要求

```
MajorID      ReqID
EC001        R01
EC001        R02
EC002        R01
EC002        R03 
```

### 要求

```
ReqID         ReqCount
R01           1
R02           3
R03           2 
```

### 必修课程选项

```
ReqID         CourseID
1             EC 101
1             EC 102
2             EC 200
2             EC 201
2             EC 202
3             EC 200
3             EC 201
3             EC 202 
```

## 解释

主修经济学（EC001）的人必须满足其专业的所有要求，这意味着必须满足MajorRequirements R01和R02。要满足 R01，学生必须从可用选项中选修 1 门必修课程。必修课程选项为 EC 101 和 EC 102；任何一个都足够了。要满足 R02，学生必须从可用选项中选修 3 门必修课；有三门课程（EC 200、EC 201、EC 202），因此学生必须参加所有三门课程。

同样，主修政治经济学 (EC002) 的人必须满足其专业的所有要求，这意味着必须满足 MajorRequirments R01 和 R03。和以前一样，要达到 R01，学生必须从可用选项（EC 101 或 EC 102）中选修 1 门必修课程。要达到 R03，学生必须从可用选项中选修 2 门必修课；共有三门课程（EC 200、EC 201、EC 202），学生必须至少修读三门课程中的两门。

显然，这可用于要求任何集合中的任何 M 个课程中的任何 N 个。如果主修 M 需要特定课程 C，则 MajorRequirements 表包含主修 M 的 ReqID R，ReqCount 为 1，RequiredCourseOptions 记录 R 和 C。 ReqID 值和 ReqCount 各为 1。但是，我想展示 R03 的 3 门课程中的 2 门的灵活性，并且对称性表明 ReqID R02 与 ReqCount 3 在某些方面更好。

## 选择有资格毕业的学生

哪些学生有资格毕业？

假设一个包含 StudentID、Name 和 MajorID 列（以及其他列，例如出生日期、入学日期等）的学生表，以及另一个包含 StudentID 和 CourseID 列的 StudentPassedCourses（以及通过日期和通过成绩等）。条目仅在学生通过课程后出现在 StudentPassedCourses 中。

那么有资格毕业的学生就是那些满足了他们专业的每一项要求的学生。

***让我们使用TDQD（测试驱动查询设计）***逐步构建查询。

### Q1：专业毕业要求数量

```
SELECT MajorID, COUNT(ReqID) AS CountReqs
  FROM MajorRequirements
 GROUP BY MajorID 
```

### Q2：学生要求的通过次数

```
SELECT s.StudentID, m.ReqID, COUNT(*) AS PassCount
  FROM StudentPassedCourses AS p
  JOIN Students             AS s ON p.StudentID = s.StudentID
  JOIN MajorRequirements    AS m ON s.MajorID = m.MajorID
 GROUP BY s.StudentID, m.ReqID 
```

（这是一个相当大的步骤；它可能需要分解为单独的步骤。）

### Q3：满足特定要求的学生

这列出了学生和要求 ID，其中给定 ReqID 的学生通过计数至少是专业要求的通过计数。

```
SELECT p.StudentID, p.ReqID
  FROM (SELECT s.StudentID, m.ReqID, COUNT(*) AS PassCount  -- Q2
          FROM StudentPassedCourses AS p
          JOIN Students             AS s ON p.StudentID = s.StudentID
          JOIN MajorRequirements    AS m ON s.MajorID = m.MajorID
         GROUP BY s.StudentID, m.ReqID
       ) AS p
  JOIN MajorRequirements AS m ON p.ReqID = m.ReqID
 WHERE p.PassCount >= m.ReqCount 
```

### Q4：每个学生的总要求数

```
SELECT r.StudentID, COUNT(*) AS ReqsPassed
  FROM (SELECT p.StudentID, p.ReqID  -- Q3
          FROM (SELECT s.StudentID, m.ReqID, COUNT(*) AS PassCount  -- Q2
                  FROM StudentPassedCourses AS p
                  JOIN Students             AS s ON p.StudentID = s.StudentID
                  JOIN MajorRequirements    AS m ON s.MajorID = m.MajorID
                 GROUP BY s.StudentID, m.ReqID
               ) AS p
          JOIN MajorRequirements AS m ON p.ReqID = m.ReqID
         WHERE p.PassCount >= m.ReqCount
       ) AS r
 GROUP BY r.StudentID 
```

### Q5：专业通过的学生

```
SELECT s.StudentID, s.Name, s.MajorID, m.Name Major
  FROM Students AS s
  JOIN Majors   AS m ON m.MajorID = s.MajorID
  JOIN (SELECT r.StudentID, COUNT(*) AS ReqsPassed  -- Q4
          FROM (SELECT p.StudentID, p.ReqID  -- Q3
                  FROM (SELECT s.StudentID, m.ReqID, COUNT(*) AS PassCount  -- Q2
                          FROM StudentPassedCourses AS p
                          JOIN Students             AS s ON p.StudentID = s.StudentID
                          JOIN MajorRequirements    AS m ON s.MajorID = m.MajorID
                         GROUP BY s.StudentID, m.ReqID
                       ) AS p
                  JOIN MajorRequirements AS m ON p.ReqID = m.ReqID
                 WHERE p.PassCount >= m.ReqCount
               ) AS r
         GROUP BY r.StudentID
       )        AS c ON c.StudentID = s.StudentID
  JOIN (SELECT MajorID, COUNT(ReqID) AS CountReqs    -- Q1
          FROM MajorRequirements
         GROUP BY MajorID
       )        AS r ON r.MajorID = s.MajorID
 WHERE c.ReqsPassed >= r.CountReqs 
```

*警告：未经测试的 SQL！*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:39:32.950

一个专业有要求，一个要求可以通过课程来填补。这样，专业也可以分享共同的要求。

```
major  requirementId
-----------------------
econ       1
econ       2
artOrSmth  2

requirementId     coursename
------------------------------
    1              econ101
    1              econ102
    2              math101 
```

# magento - Magento，结帐/购物车块未在 ajax 扩展中加载

> ID：15433981
> 
> 赞同：0
> 
> 时间：2013-03-15T13:42:23.857
> 
> 标签：magento, magento-1.7

我正在为 Magento 编写一个 ajax 扩展程序，当我尝试使用它时遇到问题。

我想在购物车中的任何产品发生更改后重新加载整个区块，包括商品以及购物车总数。

正如许多网站所说，我已经修改了布局，但我无法很好地渲染结帐/购物车块。

我的两个解决方案是：

* * *

1° 尝试通过 xml 文件更新布局，我在 $block_cart 中得到一个错误。

我有课

```
Mati_Ajax_CartController extends Mage_Checkout_CartController
{
...
    public function updateShoppingCartAction()
    {
        ...
        $block_cart = $this->getLayout()->getBlock('checkout/cart');
        ...
    }
} 
```

和一个xml文件（我确定我正在加载，因为js指出那里正在加载）

```
<checkout_cart_updateshoppingcart>
    <update handle="checkout_cart_index" />
</checkout_cart_updateshoppingcart> 
```

* * *

2°试图创建块

```
public function updateShoppingCartAction()
{
    ...
    $block_cart = $this->getLayout()->getBlockSingleton('checkout/cart')->setTemplate("checkout/cart.phtml")->toHtml();
    ...
} 
```

在这里我得到了块，但是当模板执行时`$this->getChildHtml('totals');` 它得到一个错误的答案，所以网页与之前的有些不同

* * *

有谁知道如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:28:10.617

In your first attempt just append `->toHtml();`

Alternatively you could have included that as a command in the xml `output="toHtml"`

Check how the `checkout/onepage/review` functions if you are looking for advice. There they access the response object and then set the body of the response to the html variable, in your case `$block_cart`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:37:27.253

密钥在 xml 文件中

```
<ajax_cart_updateshoppingcart>
    <update handle="checkout_cart_index" />
</ajax_cart_updateshoppingcart> 
```

# iphone - NSMutalbleArray 中的本地搜索

> ID：15433982
> 
> 赞同：0
> 
> 时间：2013-03-15T13:42:24.810
> 
> 标签：iphone, ios, objective-c

我想搜索 `NSMutalbleArray`，我的代码是：

```
 arrCelebs=[[NSMutableArray alloc] initWithObjects:@"Test 1",@"Test 2",@"Test 42",@"Test 5", nil];

    - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSString *arrString1 = txtSearch.text;
    NSRange tmprange;
    for(NSString *string in arrCelebs) {
            tmprange = [arrString1 rangeOfString:string];
            if (tmprange.location != NSNotFound) {
                     NSLog(@"String found");
                    break;
            }
    }
    return YES;
    } 
```

如果我输入“t”然后它搜索所有数据，我想添加另一个数组。用于在 tableview 中显示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T13:46:55.913

你可以使用的力量`NSPredicate`

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF BEGINSWITH[c] %@", textField.text];
NSArray *filteredArray = [arrCelebs filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T13:52:31.927

通过使用谓词，您可以轻松高效地得到结果。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@",  txtSearch.text];
    NSArray *ResultArray = [yourArray filteredArrayUsingPredicate:predicate];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:46:42.037

尝试 ：

```
arr_NewArray  = [[NSMutableArray alloc] init];

for (int i = 0; i < [arr_YourArrayToSearch count]; i++)
{
     NSString *curString = [string lowercaseString];
     NSString *curStringInArray = [[arr_YourArrayToSearch objectAtIndex:i]lowercaseString];

     if (![curString rangeOfString:curStringSmall].location == NSNotFound)
     {
          [arr_NewArray addObject:[arr_YourArrayToSearch objectAtIndex:i]];
     }
 } 
```

arr_NewArray 将为您提供与您的搜索字符串匹配的数据的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:50:08.577

```
arrCelebs=[[NSMutableArray alloc] initWithObjects:@"Test 1",@"Test 2",@"Test 42",@"Test 5", nil];

_resultArray = [[NSMutableArray alloc] init];

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

NSString *arrString1 = txtSearch.text;
NSRange tmprange;
_resultArray = [[NSMutableArray alloc] init];
for(NSString *string in arrCelebs) {
        tmprange = [arrString1 rangeOfString:string];
        if (tmprange.location != NSNotFound) {
                 [_resultArray addObject:string];
        }
}
return YES;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T13:58:59.447

这正是你想要的......

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSMutableArray *resultAry = [[NSMutableArray alloc] init];
    for(NSString *string in arrCelebs)
    {
        NSRange range = [string rangeOfString:textField.text options:NSCaseInsensitiveSearch];

        if(range.location != NSNotFound)
        {
            [resultAry addObject:string];
        }
    }
    yourTableAry=[resultAry mutableCopy];
    [yourTable reloadData];
    return YES;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T14:00:38.080

**如果您使用`UITableView`，那么您也可以使用这种类型的逻辑。**

取两个`NSMutableArray`并将**一个数组添加到另一个数组**中`ViewDidLoad`，例如，

```
self.listOfTemArray = [[NSMutableArray alloc] init]; // array no - 1
self.ItemOfMainArray = [[NSMutableArray alloc] initWithObjects:@"YorArrayList", nil]; // array no - 2 

[self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray]; // add 2array to 1 array 
```

**并编写以下 UISearchBar 的委托方法**

```
- (BOOL) textFieldDidChange:(UITextField *)textField
 {
        NSString *name = @"";
        NSString *firstLetter = @"";

    if (self.listOfTemArray.count > 0)
         [self.listOfTemArray removeAllObjects];

        if ([searchText length] > 0)
        {
                for (int i = 0; i < [self.ItemOfMainArray count] ; i = i+1)
                {
                        name = [self.ItemOfMainArray objectAtIndex:i];

                        if (name.length >= searchText.length)
                        {
                                firstLetter = [name substringWithRange:NSMakeRange(0, [searchText length])];
                                //NSLog(@"%@",firstLetter);

                                if( [firstLetter caseInsensitiveCompare:searchText] == NSOrderedSame )
                                {
                                    // strings are equal except for possibly case
                                    [self.listOfTemArray addObject: [self.ItemOfMainArray objectAtIndex:i]];
                                    NSLog(@"=========> %@",self.listOfTemArray);
                                }
                         }
                 }
         }
         else
         {
             [self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray ];
         }

        [self.tblView reloadData];
} 
```

}

输出显示在您的`Consol.`

# android - Android 图形布局编辑器中微调器预览的自定义文本

> ID：15433985
> 
> 赞同：11
> 
> 时间：2013-03-15T13:42:31.163
> 
> 标签：android, graphical-layout-editor

默认情况下，如果我`Spinner`在图形布局编辑器中创建一个（使用`Spinner Item`预览布局，即`android.R.layout.simple_spinner_item`）显示的文本是

> 项目 1

有什么办法可以更改此预览文本？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-15T14:24:47.223

特别是对于微调器预览文本，将`tools:listitem`属性与布局一起使用：

```
<Spinner
 android:id="@+id/spinner1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 tools:listitem="@android:layout/simple_list_item_1" /> 
```

您还可以通过右键单击微调器然后选择“预览微调器布局”在可视化编辑器中设置该预览。无论如何，它必须是一个具体的布局，而不是简单的文本字符串。

因此，最好的做法是在您将要使用的特定列表项布局中设置您的虚拟文本（例如，在您`Adapter`的 Java 代码中），然后如上所述直接预览该布局。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-15T14:28:21.970

首先，您需要创建适当的预览布局。例如，您可以将其放在 layout/preview.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:text="NEW PREVIEW TEXT"
    android:ellipsize="marquee" /> 
```

然后，您可以在实际布局中右键单击 Spinner 并选择**Preview Spinner Layout > Choose Layout...**从项目资源中选择您的布局，您应该会看到新的预览。

您还可以使用 XML 设置预览布局`tools:listitem="@layout/preview"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T15:38:41.040

视图有一个名为“isEditMode()”的函数，可用于更改项目在图形编辑器中的外观。这个 SO 可能会帮助你：

[Eclipse 可视化编辑器中的自定义 Android 视图](https://stackoverflow.com/questions/10743030/custom-android-views-in-eclipse-visual-editor)

# java - 如何配置“imaps”来接收邮件？邮件

> ID：15433992
> 
> 赞同：0
> 
> 时间：2013-03-15T13:42:59.933
> 
> 标签：java, jakarta-mail

如何配置我的 Java 应用程序以使用端口 993 和 TLS 从 IMAP 邮箱读取邮件。

我将邮件服务器的证书存储在默认的 javakeystore 中`cacerts`。尝试连接到邮箱后。我得到了这个堆栈跟踪（这是一个完整的跟踪）：

```
 javax.mail.MessagingException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty;
 nested exception is:
    javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:670)
    at javax.mail.Service.connect(Service.java:317)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at imap.IMAP.receive(IMAP.java:77)
    at imap.IMAP.main(IMAP.java:46)
 Caused by: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:190)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1764)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1725)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1708)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1237)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1214)
    at com.sun.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java:548)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:352)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:207)
    at com.sun.mail.iap.Protocol.<init>(Protocol.java:113)
    at com.sun.mail.imap.protocol.IMAPProtocol.<init>(IMAPProtocol.java:111)
    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:637)
    ... 5 more
Caused by: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    at sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:57)
    at sun.security.validator.Validator.getInstance(Validator.java:161)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.getValidator(X509TrustManagerImpl.java:108)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:204)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:958)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1203)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1230)
    ... 12 more
Caused by: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    at java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:183)
    at java.security.cert.PKIXParameters.<init>(PKIXParameters.java:103)
    at java.security.cert.PKIXBuilderParameters.<init>(PKIXBuilderParameters.java:87)
    at sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:55)
    ... 23 more
15.03.2013 13:54:50 imap.IMAP main
SCHWERWIEGEND: null
java.lang.NullPointerException
    at imap.IMAP.receive(IMAP.java:123)
    at imap.IMAP.main(IMAP.java:46) 
```

这是我的比例：

```
System.setProperty("javax.net.ssl.trustStore", "/usr/java/jdk_1.6.0_35/jre/lib/security/cacerts");
System.setProperty("javax.net.ssl.trustStorePassword", "changeit");

Properties props = System.getProperties();

props.setProperty("mail.imaps.host", server);
props.setProperty("mail.imaps.user", user);
props.setProperty("mail.imaps.password", password);
props.setProperty("mail.imaps.auth", "true");
props.setProperty("mail.imaps.starttls.enable", "true");
props.setProperty("mail.imaps.socketFactory.port", "993");
props.setProperty("mail.imaps.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
props.setProperty("mail.imaps.socketFactory.fallback", "false");

MailAuthenticator auth = new MailAuthenticator(user, password);

Session session = Session.getDefaultInstance(props, auth);

store = session.getStore("imaps");
store.connect(); 
```

有什么遗漏吗？在互联网上有很多关于这个问题的帖子。但大多数是用于 SMTP。我还没有找到真正解释的东西，你真的需要哪些属性才能让这个案例工作。

我希望有人可以帮助我找到我的错误。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T00:04:45.077

首先是一些评论，这不是您的问题的原因，但会简化您的程序......

摆脱 socketFactory 属性，您不需要它们。

使用 Session.getInstance 而不是 Session.getDefaultInstance。

摆脱 MailAuthenticator 并调用 store.connect(user, password)。

有关详细信息，请参阅[JavaMail 常见问题解答](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。

至于您遇到的异常，这似乎是与您的证书或您的信任库有关的一些问题。 [这个 JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#ssldebug)提供了调试这类问题的提示。您可能需要 Java SSL/网络/安全专家来解释问题所在。

您说您已经将您的证书添加到您的信任库中，但以防万一您可能想查看[此 JavaMail FAQ entry](http://www.oracle.com/technetwork/java/javamail/faq/index.html#installcert)。

# android - AsyncTask 更新 UI

> ID：15433994
> 
> 赞同：1
> 
> 时间：2013-03-15T13:43:01.387
> 
> 标签：android, android-asynctask, android-ui

这么多小时试图弄清楚这一点，我已经阅读了很多问题、论坛、答案..但它仍然不会更新 UI。

我的最终目标是从用户那里获取一个搜索词，然后向 PHP 脚本发送一个 httprequest，该脚本以 JSON 进行回复。这很好用，所以我不会深入研究它。

完成后我的问题是更新 UI。我可以获得 HTTP 结果，但现在，我只是尝试在实现重大更改之前使用基本字符串更新 UI，例如带有侦听器的按钮等所有结果。现在，只是简单的字符串添加到 UI。

onPreExecute() 向 UI 添加了一个字符串，这在某种程度上可以正常工作，如下所示。

问题出在 onPostExecute.. 就像我说的，现在只是一个字符串来测试（最终将是一个列表或其他东西）。它根本不起作用，总是抛出异常。

```
public class DisplaySearchActivity extends ListActivity {

ArrayList<String> listItems=new ArrayList<String>();
ArrayAdapter<String> adapter = null;

private class updateUI extends AsyncTask<String, Void, String>{

    @Override
    protected void onPreExecute() {
        listItems.add("Retrieving Results...");
                 // This actually works just like that
    }

    @Override
    protected String doInBackground(String... message) {
    final List<HashMap<String,String>> blist = httpSearch.search(message[0]); 
    return "It has done";
    }

    @Override
    protected void onPostExecute(String b){
        Log.v("ok", "shane - "+ b);
        listItems.add("Business: "+ b);
                    adapter.notifyDataSetChanged();
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_search);

    final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,listItems);
    setListAdapter(adapter);

    //  final String message = getIntent().getStringExtra("input");
    final String message = "third+level";

    new updateUI().execute(message);

} // end onCreate

} 
```

这是例外

```
03-15 13:38:41.190: V/ok(15732): shane - It has done
03-15 13:38:41.190: D/AndroidRuntime(15732): Shutting down VM
03-15 13:38:41.190: W/dalvikvm(15732): threadid=1: thread exiting with uncaught exception (group=0x4142a2a0)
03-15 13:38:41.200: E/AndroidRuntime(15732): FATAL EXCEPTION: main
03-15 13:38:41.200: E/AndroidRuntime(15732): java.lang.NullPointerException
03-15 13:38:41.200: E/AndroidRuntime(15732):    at ie.whereis.DisplaySearchActivity$updateUI.onPostExecute(DisplaySearchActivity.java:34)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at ie.whereis.DisplaySearchActivity$updateUI.onPostExecute(DisplaySearchActivity.java:1)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at android.os.AsyncTask.finish(AsyncTask.java:631)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at android.os.Looper.loop(Looper.java:137)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at java.lang.reflect.Method.invokeNative(Native Method)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at java.lang.reflect.Method.invoke(Method.java:511)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-15 13:38:41.200: E/AndroidRuntime(15732):    at dalvik.system.NativeStart.main(Native Method) 
```

我认为它是被这条线抛出的：

```
adapter.notifyDataSetChanged(); 
```

但我只是不明白适配器的作用，即使经过大量阅读。我不知道为什么

```
listItems.add("Retrieving Results..."); 
```

在 pre Execute 作品中：S 但在 post 中没有。

非常感谢任何帮助。

* * *

谢谢，我已经评论了解决方案。为无法投票而道歉。<15 业力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:46:45.413

采用

```
DisplaySearchActivity.this.adapter.notifyDataSetChanged(); 
```

代替

`adapter.notifyDataSetChanged();`

`onPostExecute`从类的方法访问适配器实例，`updateUI`因为您已声明`adapter=null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:48:17.193

在你的 Oncreate 替换

```
 final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,listItems); 
```

和

```
 adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,listItems); 
```

删除最终的 ArrayAdapter

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T13:48:52.213

您正在方法中隐藏实例`adapter`字段`onCreate`。

代替

```
final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,listItems); 
```

采用

```
this.adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,listItems); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T13:51:58.453

你的适配器是 null 。您设置列出的那个仅限于 oncreate() 。不要在 oncreate() 内再次定义。简单地评估 `adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,listItems);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T13:47:17.723

调用`adapter.notifyDataSetChanged();`适配器时会使用旧数据，调用前需要重新传入修改后的列表数据`adapter.notifyDataSetChanged();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T13:49:23.117

首先，为什么你将你的适配器声明为最终的？当活动不可见时，您似乎正在尝试修改视图。您应该将 asynctask 实例化为成员变量，并在 Activity 的 onStop 方法中停止它： myAsyncTask.cancel(true);

# php - 如何从 WPF 应用程序将身份验证凭据传递给 php 应用程序

> ID：15433995
> 
> 赞同：2
> 
> 时间：2013-03-15T13:43:04.717
> 
> 标签：php, wpf, cakephp, wpftoolkit, wpf-4.0

我有 WPF 应用程序和 Web 浏览器控件。我正在打开一个网页，它是一个 php 应用程序。我需要将我的机器凭据传递给 php 应用程序。

Web 浏览器控件打开一个`[http://app/login.php]`. 用户已使用他的域凭据登录到机器。PHP网站**使用 Windows 身份验证。**.

WPF应用程序和php站点都是内部应用程序（即同一个域）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:23:36.423

您有一个 CakePHP 应用程序和一个 login.php？然后它有一些严重的问题。

您需要获取当前登录的用户身份并将其传递给 php 应用程序。

请参阅[将 windows 身份验证与 php 一起使用？](https://stackoverflow.com/questions/2501729/using-windows-authentication-with-php)

如果您使用的是 CakePHP 2.0，您可能会为 AuthComponent 找到一个 LDAP 适配器。我想你可以使用谷歌找到更多，我不知道这里的这个是否有任何好处[http://www.analogrithems.com/rant/2012/01/03/cakephp-2-0-ldapauth/](http://www.analogrithems.com/rant/2012/01/03/cakephp-2-0-ldapauth/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:27:55.547

我的回答涵盖了 CakePHP 部分

最佳实践是使用[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)在您的 wpf 和 cakephp 之间进行通信。CakePHP 提供了一种非常简单的方法来通过 REST 连接您的操作。您必须使用 REST 连接您的身份验证方法。

Cake 的文档中有一个不错的部分[来自 CakePHP 的 REST](http://book.cakephp.org/1.3/en/The-Manual/Common-Tasks-With-CakePHP/REST.html#rest)。