# StackOverflow 问答 16038000-16038999

# html - WebRTC：数据通道丢弃消息？

> ID：16038004
> 
> 赞同：2
> 
> 时间：2013-04-16T13:11:35.897
> 
> 标签：html, webrtc

我正在构建一个使用 webRTC 数据通道的 Web 应用程序。我在鼠标移动时向对等方发送数据，但对等方没有收到所有消息？为什么这个？这仅在数据发送快速时才会出现。

使用铬 26。

我应该如何克服这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T22:49:38.573

这可能有点晚了，但我想你的问题可能是因为数据通道使用 RTP（基于 UDP 的协议）。UDP 不保证交付。这对于可以容忍丢包的实时应用程序（多人游戏、视频流）来说是完美的，因为延迟要低得多，但它会导致您面临的那种情况。

如果您不能使用 websockets 通过服务器 (TCP) 并且这确实是一个问题，则可以通过数据通道查看 TCP。我可能在某处读过 Firefox 支持 TCP 数据通道。如果我发现任何有用的信息，我将编辑此回复。

# python - 在 python3 上加速 OpenGL 2d

> ID：16038006
> 
> 赞同：0
> 
> 时间：2013-04-16T13:11:51.020
> 
> 标签：python, linux, opengl, python-3.x, vbo

我用 OpenGL 画了大约 20 个圆圈。每个圆圈有 2 条线，约 10 段，它们都有不同的颜色和长度。FPS ~=4。我怎样才能更快地做到这一点？我在 Ubuntu 上使用 Python 3

代码：

```
class ScreenOpenGL(Screen):
def __init__(self,layers,layers_lock):
    """ Инициализирует экран и запускает его, потом всю программу """
    Screen.__init__(self,"OpenGL",layers,layers_lock)

    self.window = 0
    self.quad = None
    self.keypress = []

    print("Fuck")
    # self.infoScreen = ScreenCursesInfo()
    self.infoScreen = ScreenStandartInfo()
    GLUT.glutInit(sys.argv)
    GLUT.glutInitDisplayMode(GLUT.GLUT_RGBA | GLUT.GLUT_DOUBLE | GLUT.GLUT_ALPHA | GLUT.GLUT_DEPTH)
    GLUT.glutInitWindowSize(640, 480)
    GLUT.glutInitWindowPosition(400, 400)
    self.window = GLUT.glutCreateWindow(b"Project Evoluo alpha")
    GLUT.glutDisplayFunc(self._loop) # Функция, отвечающая за рисование
    GLUT.glutIdleFunc(self._loop) # При простое перерисовывать
    GLUT.glutReshapeFunc(self._resize) # изменяет размеры окна
    GLUT.glutKeyboardFunc(self._keyPressed) # Обрабатывает нажатия
    self._initGL(640, 480)
    field_params(640, 480)
    print("Fuck")

def run(self):
    # для threading
    GLUT.glutMainLoop()

def _initGL(self,Width,Height):
    GL.glShadeModel(GL.GL_SMOOTH); 
    GL.glClearColor(0.0, 0.0, 0.0, 0.0)    # This Will Clear The Background Color To Black
    GL.glClearDepth(1.0)                   # Enables Clearing Of The Depth Buffer
    GL.glDepthFunc(GL.GL_LESS)                # The Type Of Depth Test To Do
    GL.glHint(GL.GL_LINE_SMOOTH_HINT, GL.GL_NICEST)
    GL.glEnable(GL.GL_BLEND);                         # Enable Blending
    GL.glLineWidth(1.);
    GL.glDisable(GL.GL_LINE_SMOOTH)
    GL.glBlendFunc(GL.GL_SRC_ALPHA, GL.GL_ONE_MINUS_SRC_ALPHA);

    self.width = Width
    self.height = Height
    self.quad = GLU.gluNewQuadric()
    GLU.gluQuadricNormals(self.quad, GLU.GLU_SMOOTH)
    GLU.gluQuadricTexture(self.quad, GL.GL_TRUE)

def _resize(self,Width,Height):
    if Height == 0:
        Height = 1
    self.width = Width
    self.height = Height
    field_params(Width,Height)

    GL.glViewport(0, 0, Width, Height)       # Reset The Current Viewport And Perspective Transformation
    GL.glMatrixMode(GL.GL_PROJECTION)
    GL.glLoadIdentity()

    GL.glOrtho(0.0,Width,0.0,Height,-1.0,1.0)

    GL.glMatrixMode(GL.GL_MODELVIEW)                   # Select The Modelview Matrix
    GL.glLoadIdentity()

def update(self):
    GLUT.glutSwapBuffers()

def clear(self):
    GL.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT)
    GL.glLoadIdentity()                    # Reset The View 

def write(self,pos,str):
    pass

def __del__(self):
    del(self.infoScreen)
    GLUT.glutDestroyWindow(self.window)
    self._end()
    # sys.exit()

def getch(self):
    if self.keypress != []:
        # print
        return self.keypress.pop(-1)[0]
    else:
        return None

def _keyPressed(self,*args):
    if args != None:
        self.keypress.append(args)
        print(self.keypress)

def _draw_prepare(self):
    del(self._layers)
    self._layers = []
    for layer in layers:
        if layer.__class__ == LayerObjects:
            self._layers.append([layer.type,copy.deepcopy(layer.get_objs()),copy.copy(layer._attacked)])

def draw_eyes(self,vis,r_max,dphi):
    for x in range(0,7):
        GLU.gluPartialDisk(self.quad,
            1,
            vis[x][0] * r_max,
            5,
            3,
            - ((x - 3) * 15 + 7.5 + dphi / pi * 180) + 90,
            15)

def draw_sensitivity(self,sens,r_max,dphi):
    for x in range(0,5):
        GLU.gluPartialDisk(self.quad,
            1,
            sens[x] * r_max,
            5,
            3,
            - (52.5 + (x+1) * 51 + dphi / pi * 180) + 90,
            51)   
    pass

def draw_obj(self,obj,_id,pos,circle,lines,attacked):
    # Кружок
    GL.glLoadIdentity()
    GL.glTranslatef(pos[0]-1,pos[1]-1,0)
    red,green,blue = obj.color # берём цвет
    GL.glColor3f(red,green,blue)
    GLU.gluDisk(self.quad,*circle)

    #Глазки
    GL.glColor3f(1-red,1-green,1-blue)
    try:
        eyes = obj.eyes
    except NameError:
        pass
    else:
        self.draw_eyes(obj.eyes.eyes,obj.radius * k_screen,obj.pos[1])
    # Прикосновения
    GL.glColor3f(1,0,0)
    try:
        sensitivity = obj.sensitivity
    except NameError:
        pass
    else:
        self.draw_sensitivity(obj.sensitivity._sens,obj.radius * k_screen,obj.pos[1])
    # Полосочки
    GL.glBegin(GL.GL_LINES)
    for color,x,y in lines:
        GL.glColor3f(*color)
        GL.glVertex3f(0,0,0)
        GL.glVertex3f(x,y,0)
    GL.glEnd()

def draw(self,layer):
    global width,height
    if layer[0] == "Layer Objects":
        attacked = layer[2]
        for obj in layer[1]:
            #Стрелочки-направления
            pos = [int(x) for x in obj.get_pos_screen()]
            positions = [pos,]
            radius_scr = obj.radius * k_screen
            att = Vector(radius_scr * (1 +obj._attack_range*obj._attack),
                    obj.pos[1],
                    isPolar = True
                    ) 
            speed = obj.speed[0] * k_screen * 5

            if pos[0] < radius_scr:
                positions.append([pos[0] + self.width,pos[1]])
            if pos[0] + radius_scr > self.width:
                positions.append([pos[0] - self.width,pos[1]])
            if pos[1] < radius_scr:
                positions.append([pos[0],pos[1] + self.height])
            if pos[1] + radius_scr > self.height:
                positions.append([pos[0],pos[1] - self.height])

            for ps in positions:
                self.draw_obj(obj,obj._id, ps , [0,obj.radius*k_screen,20,1], [ [ (1,0,0) , att.x, att.y ], [ (0,0,1) , speed.x, speed.y] ] , attacked)

    self.infoScreen.draw() 
```

功能代码，绘制：

```
 def _draw_prepare(self):
    """ Копирует из глобальной переменной всё, что ей нужно """
    self._layers = copy.deepcopy(layers)
def _loop(self):
    global tick
    if (self.ch == b'q') or (self.ch == b'\xb1') or (self.ch == 27) or (self.ch == 113):
        isEnd = True
        self.__del__()
        del(self)
        return 0
    elif (self.ch == b's'):
        self._is_draw = not self._is_draw
        print("changed to %d" %self._is_draw)
    else:
        if (self.last_tick != tick) and (self._is_draw):
            self.layers_lock.acquire(1)
            self._draw_prepare()
            self.layers_lock.release()
            self.last_tick = tick
    # рисует сцену
    return self._main()
def _main(self):
    global tick
    self.clear()
    if self._is_draw:
        for layer in self._layers:
            self.draw(layer)
    self.update()
    self.ch = self.getch() 
```

在[GitHub 上](https://github.com/ktulhy-kun/project_evoluo/blob/master/evoluo.py#L213)

# javascript - 提交不完整的表单后如何保留填写的数据？

> ID：16038007
> 
> 赞同：-3
> 
> 时间：2013-04-16T13:11:52.333
> 
> 标签：javascript, html, ajax

```
<html>
    <head><script type="text/javascript">
     function pa(){
        var fname = document.getElementById('fname').value;
        var lname = document.getElementById('lname').value;
        var email = document.getElementById('email').value;
        if(fname==""||lname==""||email=="")
            alert("Please, Compelete the form...");}
        </script>
    </head> <body>
        <form onsubmit="pa()">
                E-mail Address*<input id="email" value="" name="email" type="text">
                First Name*<input id="fname" value="" name="fname" type="text">
                Last Name*<input id="lname" value="" name="lname" type="text">
                        <input type="submit" value="Register">
        </form>
    </body>
</html> 
```

嗨，上面是我的代码，它导致了一些问题。即，当我按下提交按钮时，如果表单不完整，则会出现一个警告框，显示“请填写表单...”。

按“确定”后，填充的数据会刷新。我想保留填充的数据。我不知道这个问题。如果表单提交不完整，我希望我的数据应该保留。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:16:58.343

我认为你必须阻止提交事件被转发。尝试：

```
if (fname==""|| ...) {
   alert('...');
   return false;
} 
```

问候

副歌

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:16:57.240

您需要添加`return false;`到您的`onsubmit`功能。问题是 onsubmit 函数在页面发布表单之前运行。此函数可以返回一个`true`或`false`布尔值，指示是否重新发布页面。在您的情况下，您也没有返回，因此页面“提交”并重新发布，并且所有用户数据都消失了。

例如：

```
<form onsubmit="return pa();">
...
</form> 
```

在 pa 函数中：

```
function pa() {
...
    if( some conditional ) {
        return true;
    } else {
        return false;
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:18:28.830

而不是`<form onsubmit="pa()">`使用 `<form onsubmit=" return pa()">`. 在您发布警报后在您的代码中返回 false。这应该可以解决您的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:20:12.823

这是帮助您的方法。

1.将[jQuery](http://jquery.com/download/)连接到您的页面。2.像这样在表单元素上放置一个 ID 选择器...

```
<form id="myform"> 
```

3.然后将以下脚本代码添加到您的页面

```
 $(function() {
 $('#myform').submit(function () {
  pa();
  return false;
  });
 }); 
```

# java - @JsonUnwrapped 禁用杰克逊的 fail_on_unknown 属性

> ID：16038011
> 
> 赞同：3
> 
> 时间：2013-04-16T13:12:00.137
> 
> 标签：java, json, jackson, deserialization

我正在尝试编写一个简单的类，该类将验证 JSON 输入字符串是否可以转换为目标***JAVA***对象。如果在输入 JSON 字符串中发现任何未知字段，验证器应该会失败。这一切都按预期工作，除非我用 注释 A 类中的 B 对象 `@JsonUnwrapped`，然后对象映射器将默默地忽略未知属性而不会失败。

这是我的代码：

***甲类：***

```
public class A implements Serializable{

protected String id;
protected String name;

protected @JsonUnwrapped B b;

public A(){

}
public A(String id, String name, B b) {
    super();
    this.id = id;
    this.name = name;
    this.b = b;
}

     //GETTERS/SETTERS

} 
```

***B类：***

```
 public class B {

protected String innerId;
protected String innerName;

public B(){

}
public B(String innerId, String innerName) {
    super();
    this.innerId = innerId;
    this.innerName= innerName;
}
    //GETTERS/SETTERS
 } 
```

***验证器类：***

```
 public class JsonValidator{
         public boolean validate(){

             ObjectMapper mapper = new ObjectMapper();

        //mapper.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, true);
        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, true);

        try {
                mapper.enable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);
        A a = mapper.readValue(
                          JsonValidatorBean.class.getResourceAsStream("sample.json"),
                          A.class);
                 } catch (JsonParseException e) {
            e.printStackTrace();
         } catch (JsonMappingException e) {
                e.printStackTrace();
         } catch (IOException e) {
               e.printStackTrace();
         }

} 
```

***要验证的 JSON：***

```
{
   "id": "aaaa",
   "naome": "aaa",    
   "innerId" : "bbbb",
   "innerName" : "bbb" 
```

}

我正在使用 Jackson 2.1 我希望这段代码在未知属性“ ***naome*** ”上失败，但它不会被忽略。如果我删除`@JsonUnwrapped`并将 Json 调整为具有嵌入式对象，则上述代码将按预期失败。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:08:03.207

是的，这是真实的陈述。由于从父上下文传递展开的属性所需的逻辑，没有办法有效地验证哪些属性可以合法地映射到子 POJO（那些被展开的），哪些不是。

有一个 RFE 试图改进事物，捕获不可映射的属性，但当前版本（直到并包括 2.2）不能同时进行解包和防范不可映射的属性。

# asp.net - 当 aspRequiredFieldValidator 显示错误时，我想禁用一个按钮

> ID：16038014
> 
> 赞同：2
> 
> 时间：2013-04-16T13:12:06.667
> 
> 标签：asp.net

我想在 asp:RequiredFieldValidator 显示错误时禁用表单提交按钮，请告知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:17:31.213

`onchange`您可以使用触发验证的控件的这个 javascripot 函数：

```
<asp:TextBox id="TextBox1" runat=server OnChange="txtValidate();" />
<asp:RequiredFieldValidator  id="validator1" runat="server"
   ControlToValidate="TextBox1" ...>

<script>
function txtValidate() {
   // trigger validation from clientside
   var val = <%= validator1.ClientID %>;
   if (val.isvalid == false) {
     document.getElementById('btnSubmit').disabled = true;
   }
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:42:49.193

也许你可以尝试这样的事情：

```
 function WebForm_OnSubmit() {
        if (typeof (ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) {
            //disable button here
            return false;
        }
        //enable button here
        return true;
    } 
```

有关此函数的更多信息，请访问并了解 ASP.NET 验证库，请访问[此帖子](http://dotnetslackers.com/articles/aspnet/UnderstandingASPNETValidationLibrary.aspx)。

或者，正如@Nag 所建议的那样，自定义验证器也可以完成此操作，因为您能够定义客户端 JavaScript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:14:55.197

```
if(Page_ClientValidate("SomeValidationGroup") == false)
   document.getElementById("button1").disabled = true; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T13:14:04.733

你应该使用validationgroup + requirevalidation 然后按钮不应该是可点击的

# c++ - 如何判断一个字符串是否包含另一个字符串

> ID：16038020
> 
> 赞同：0
> 
> 时间：2013-04-16T13:12:31.283
> 
> 标签：c++, stl

我有一组字符串，然后是第二组字符串。我想遍历该集合并确定当前字符串是否包含在第二个字符串中。是否有任何来自`STL`或来自这些工具的任何工具可以简化我的工作？

```
#include <cctype>
#include <iostream>
#include <iomanip>
#include <set>
#include <list>
#include <map>
#include <vector>
#include <queue>
#include <string> 
```

用例：

```
test1 . Add    ( 0, "hello" );
test1 . Add    ( 1, "world" );
test1 . Add    ( 2, "rld" );
test1 . Add    ( 3, "ell" );
test1 . Add    ( 4, "hell" );
printSet ( test1 . Search ( "hello world!" ) );
// 0, 1, 2, 3, 4
printSet ( test1 . Search ( "hEllo world!" ) );
// 1, 2 
```

当然，我可以逐个字符串、逐个字符地比较它，或者创建一些自动机，但是为什么要让事情变得更难，而不是实际情况:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:15:13.293

您可以使用[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)for 搜索，并将`boost::bind`其传递给`std::for_each`with`boost::lambda`以比较结果`std::string::npos`并对其进行计数您可以[在此处](https://stackoverflow.com/questions/9724363/using-boostbind-on-stdstringfind-fails-to-compile)
找到相关示例 另一种更直接的方法是创建自己的仿函数，该仿函数将在构造函数中获取字符串，搜索子字符串并计算 npos' es
`operator()(const std::string&)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:19:20.967

您可以使用[find_if](http://www.cplusplus.com/reference/algorithm/find_if/)。

我希望这有帮助

# configuration - 如何部署到服务器？

> ID：16038029
> 
> 赞同：0
> 
> 时间：2013-04-16T13:12:53.940
> 
> 标签：configuration, appconkit

我已经使用 AppConKit 3 创建了一个应用程序，并在我的计算机上本地测试了它，从 AppConDeveloper 运行。现在我想将它部署到 tomcat 服务器。我怎么做？我打开了 Eclipse Java Perspective。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:24:57.300

如果你走得那么远，那是相当简单的。右键单击您的_server项目并选择“Export”->“Export...” 在新窗口中展开“Web”并选择“War”文件（如果您打开了Java EE透视图，您可以直接选择Export- >War) 相应地设置 War 文件的 Destination（理想情况下，将名称设置为 Appname.war，而不是 Appname_server.war），然后单击 Finish。

您剩下要做的就是将此 .war 部署到您的 Java 应用程序服务器。如果您有 tomcat 服务器，请转到`http://YourServerIp:8080/manager/html/`（您将需要用户名和密码）并在页面底部找到“要部署的 WAR 文件”部分。单击浏览器并找到上面保存的战争。点击上传。上传完成后，您可以访问您的服务器`http://YourServerIp:8080/Warfilename`。

# php - 使用会话和带有 PDO 的表单向 mySQL 添加行

> ID：16038031
> 
> 赞同：0
> 
> 时间：2013-04-16T13:12:55.700
> 
> 标签：php, mysql, forms, session, pdo

我正在尝试向数据库中的表添加新行，表中只有两列，我正在使用表单来获取其中一个字段。这是我正在使用的表格

```
<form action="add_list.php" method="post">
Name: <input type="text" name="listname">
<input type="submit" value="Add List">
</form> 
```

这里是 add_list.php

```
<?php
/* Execute a prepared statement by binding PHP variables */
$username = "mydb";
$password = "mydb"; 
$member = $_SESSION['SESS_MEMBER_ID'];
$listname = $_POST["listname"];
try {
    $dbh = new PDO('mysql:;dbname=mydb', $username, $password);
    $sth = $dbh->prepare('INSERT INTO lists VALUES (:member_id, :listname)');
    $sth->execute(array(':member_id' => $member, ':listname' => $listname));

    } catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();}
?> 
```

我目前在第五行遇到错误

```
Undefined variable: _SESSION in /home/danu2_cj3/public_html/add_list.php on line 5 
```

如何识别会话变量？

这是我设置会话的登录代码的一部分

```
if($result) {
        if(mysql_num_rows($result) == 1) {
            //Login Successful
            session_regenerate_id();
            $member = mysql_fetch_assoc($result);
            $_SESSION['SESS_MEMBER_ID'] = $member['member_id'];
            $_SESSION['SESS_FIRST_NAME'] = $member['firstname'];
            $_SESSION['SESS_LAST_NAME'] = $member['lastname'];
            session_write_close();
            header("location: lists.php");
            exit();
        }else {
            //Login failed
            header("location: login-failed.php");
            exit();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:18:42.877

消息形式为：

```
Undefined variable: _SESSION ... 
```

通常是由于`session_start`在脚本开头缺少调用（在发送标头之前和完成任何访问`$_SESSION`密钥的尝试之前）引起的。

* * *

> 我已经尝试过了，但它只是给了我一个空白页，并没有将它添加到表格中。

好吧，这意味着您至少已经解决了上述问题。对于空白页面，您应该搜索[white screen of death](https://stackoverflow.com/questions/1475297/phps-white-screen-of-death)，这是 PHP 环境中最常见的问题之一。

# c# - C#中最后两个字母的正则表达式和数字

> ID：16038034
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:13:05.483
> 
> 标签：c#, regex

我有想要从字符串中取出的代码。我遇到的问题是文本的长度可以从 8 个字符到 18 个字符不等，但有些文本的末尾也有“SE”。

```
enter code here
String String1 = "Hello 213123123SE world";
String String2 = "Hello 888888888 World" 
```

然后我现在只能取所有长度的数字

```
 string regexp = @"[^\d$]"; 
```

（我会在这里输出看看）OutPut：

“213123123SE” “888888888”

我希望两者都只有数字和最后带有“SE”的数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:17:36.110

如果我正确解释了您的问题，请尝试以下操作：`[\d]{8,18}(SE)?`

（您可以在这里试用：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)不幸的是，共享链接功能不起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:33:59.730

如果你想要以 SE 结尾的数字，那么你可以使用`[\d]{8,18}(SE){1}`

你可以使用[expresso](http://www.ultrapico.com/Expresso.htm)它对正则表达式测试和教程很有用

如果你只需要返回值中的数字，你可以使用`result.Replace("SE","");`

# html - Xpath 无法定位嵌套的框架元素

> ID：16038036
> 
> 赞同：1
> 
> 时间：2013-04-16T13:13:07.857
> 
> 标签：html, xpath, selenium-webdriver

使用 Xpath 查找嵌套框架的元素时出现问题。我的代码是：

```
<html>
<head>
<frameset border="0" framespacing="0" frameborder="0">
<frame noresize="" name="main" src="main.py">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<body>
<div id="cboxOverlay" style="display: none;"></div>
<div id="colorbox" class="" style="padding-bottom: 57px; padding-right: 28px; display: none;">
<div id="main_loading" class="main_loading"></div>
<div id="spin_loading" class="spin-loading"></div>
<div id="page_header">
<div id="header2">
<div id="daemons_controller.py" class="header2_menu_div" style="display:none;"></div>
<div id="main_report.py" class="header2_menu_div" style="display:none;"></div>
<div id="manage_host.py" class="header2_menu_div" style="display:none;"></div>
<div id="main.py" class="header2_menu_div"></div>
<div id="header2_div" style="display:none;">
**

    <div id="login_user">
    <img title="User" alt="" src="images/new_icons/user.png" style="width:16px;height:16px;">

**
<span>
</div>
</div>
<div id="user_options">
<div id="ubr_sub_menu" class="sub-sub-menu" style="right:auto;">
<div id="ubre_sub_menu" class="sub-sub-menu" style="right:auto;">
<div id="idu_sub_menu" class="sub-sub-menu" style="right:auto;">
<div id="header3">
<div id="container">
<div id="events_logs_box" style="display: none;">
<div id="footer">
<div style="clear:both;"></div>
</body>
</html>
</frame>
</frameset>
<pixelperfectlastoverlay id="ppReloadLastOverlay"></pixelperfectlastoverlay>
</html> 
```

**Xpath=//div[@id='login_user']** 结果给出了一个空结果。我需要该 id 的位置，以便我的 selenium 工具找到元素。有什么方法可以通过 Xpath Locator 定位框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:30:35.483

使用此方法查找 iframe 中的元素：

```
driver.switchTo().frame((WebElement) driver.findElement(By.xpath("//iframe"))); 
```

现在您在 iframe 中，您可以以正常方式找到任何元素，因为您已经在 iframe 中。如果要切换到父窗口，请使用：

```
driver.switchTo().defaultContent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:21:28.327

试试这个 xpath，问题可能是因为你使用 () 而不是 []

```
//div[@id='login_user'] 
```

# r - 根据其他变量在R中生成数字序列

> ID：16038038
> 
> 赞同：3
> 
> 时间：2013-04-16T13:13:09.723
> 
> 标签：r, variables, sequence

我在根据其他两个变量生成数字序列时遇到问题。具体来说，我有以下数据库（我的真实数据库不是那么平衡！）：

```
ID1=rep((1:1),20)
ID2=rep((2:2),20)
ID3=rep((3:3),20)
ID<-c(ID1,ID2,ID3)
DATE1=rep("2013-1-1",10)
DATE2=rep("2013-1-2",10)
DATE=c(DATE1,DATE2)
IN<-data.frame(ID,DATE=rep(DATE,3)) 
```

我想根据每个日期每个 ID 的观察次数生成一个数字序列，如下所示：

```
OUTPUT<-data.frame(ID,DATE=rep(DATE,3),N=rep(rep(seq(1:10),2),3)) 
```

奇怪的是，我尝试了以下适用于上面提供的数据库的解决方案，但不适用于真正的数据库！

```
IN$UNIQUE<-with(IN,as.numeric(interaction(IN$ID,IN$DATE,drop=TRUE,lex.order=TRUE)))#generate unique value for the combination of id and date
PROG<-tapply(IN$DATE,IN$UNIQUE,seq)#generate the sequence
OUTPUT$SEQ<-c(sapply(PROG,"["))#concatenate the sequence in just one vector 
```

现在，我不明白为什么该解决方案不适用于真正的数据库，一如既往地非常感谢任何提示！

这里有一个数据集的示例（仅包含一个 ID）：

```
 id       date
  1  F2_G 2005-03-09
  2  F2_G 2005-06-18
  3  F2_G 2005-06-18
  4  F2_G 2005-06-18
  5  F2_G 2005-06-19
  6  F2_G 2005-06-19
  7  F2_G 2005-06-19
  8  F2_G 2005-06-19
  9  F2_G 2005-06-20 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:25:30.323

这是一个使用`ave`：

```
OUT <- within(IN, {N <- ave(ID, list(ID, DATE), FUN=seq_along)}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:21:47.890

这应该做你想要的......

```
require(reshape2)
as.vector( apply( dcast( IN , ID ~ DATE , length )[,-1] , 1:2 , function(x)seq.int(x) ) )
 [1]  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6
 [27]  7  8  9 10  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10  1  2
 [53]  3  4  5  6  7  8  9 10 
```

基本上，我们使用`dcast`ID 和日期来获取观察次数，如下所示

```
dcast( IN , ID ~ DATE , length )
  ID 2013-1-1 2013-1-2
1  1       10       10
2  2       10       10
3  3       10       10 
```

然后我们使用`apply`每个单元格来制作一个整数序列，只要每个日期的 ID 计数。最后，我们使用 强制回向量`as.vector`。

# regex - RegEx 语言的 PowerShell 文档

> ID：16038039
> 
> 赞同：3
> 
> 时间：2013-04-16T13:13:12.290
> 
> 标签：regex, powershell

在 PowerShell 文档中，它在哪里谈到使用特殊变量 $1、$2 等来表示`-replace`正则表达式中的捕获？

```
'asdf' -replace '(a)(\w{3})', '$2$1';

# Result: sdfa 
```

它似乎没有出现在`about_Comparison_Operators`我期望的地方，以及`-replace`操作员。我也进去看了`about_Regular_Expressions`，里面没有。

我确实在这篇博文中找到了一个示例，但似乎在官方文档中找不到任何内容。

[http://windows-powershell-scripts.blogspot.com/2009/06/regular-expressions-in-powershell.html](http://windows-powershell-scripts.blogspot.com/2009/06/regular-expressions-in-powershell.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:18:13.387

Powershell 基于 .Net 框架，因此 Powershell 使用相同的正则表达式-“引擎”。有关 .Net 使用的正则表达式语言的文档，请查看：

[正则表达式语言 - 快速参考](http://msdn.microsoft.com/en-us/library/az24scfc%28v=vs.100%29.aspx)

`$(number)`是用于的字符`Substitutions`

顺便说一句，如果您阅读了全文`Get-help about_Regular_Expressions`（尤其是最后几句话），您会看到：

> 有关详细信息，请参阅 Microsoft Developer Network (MSDN) 库中的“正则表达式语言元素”主题， 网址为[http://go.microsoft.com/fwlink/?LinkId=133231](http://go.microsoft.com/fwlink/?LinkId=133231)。

# javascript - 在 IE7、8 和 9 中填充列表时脚本失败

> ID：16038041
> 
> 赞同：0
> 
> 时间：2013-04-16T13:13:15.900
> 
> 标签：javascript, internet-explorer

我有一个朋友为我编写的脚本，用于使用文本文件中的日期列表填充大量表单字段。它调用脚本一次，并使用特定的类名称填充所有字段。

这很好，并且在 Firefox、Chrome、Safari 和 IE10 中完美运行。但是，该字段在 IE7、8 或 9 中显示为空白（不填充）。

任何人都可以提供的任何帮助将不胜感激。我正在使用的代码如下：

```
<script type="text/javascript">

window.onload = function() {
// call function to get list of options (call ONCE only)
var dateOptions = getDateOptions();

// get all elements with class tstselect and set the content to dateoptions
var els = document.getElementsByClassName('tstselect') ;
for (var i=0; i<els.length; i++) {
    if (els[i]) {
        els[i].innerHTML = dateOptions;
    }
}
};

function getDateOptions() {
var url = 'dates.txt?'+new Date().getTime()

var output = '' ;
var txt=false;
if (window.ActiveXObject){
    try {
        txt=new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch (e){
        try {
            txt=new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch (e){
          alert(e);
        }
    }
}
else if (window.XMLHttpRequest){
    txt=new XMLHttpRequest();
}
else {
    return false;
}
txt.onreadystatechange=function(){
    if (txt.readyState==4&&(txt.status==200||window.location.href.indexOf("http")==-1)){
        var mydates = txt.responseText.split('\n');
        for (var i=0;i<mydates.length;i++){
            if (mydates[i]) {
                // build up text string with all the options
                output += '<option value="' + mydates[i] + '">' + mydates[i] + '</option>' ;
            }
        }

    }
}
txt.open('GET',url,false);
try {
    txt.send(null);
}
catch (e){
}

return output; 
}
</script> 
```

可以在以下位置找到运行中的脚本示例：http: [//bespokebakery.co.uk/mailorder-birthday.html](http://bespokebakery.co.uk/mailorder-birthday.html)

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:26:00.917

您好，选择框上的 innerHTML 在 IE 中不起作用。请查看以下[链接](https://stackoverflow.com/questions/2738254/javascript-innerhtml-not-working-with-html-select-menus)。链接中的答案之一将为您提供所需的解决方案

# php - 从 api.hostip.info 获取数据

> ID：16038047
> 
> 赞同：0
> 
> 时间：2013-04-16T13:13:28.633
> 
> 标签：php, xml, api, simplexml

我正在尝试从 api.hostip.info 获取有关 IP 地址的信息，但以下代码返回当前 XML 版本；

```
$context  = stream_context_create(array('http' => array('header' => 'Accept: application/xml')));
$url = 'http://api.hostip.info/?ip=12.215.42.19';

$xml = file_get_contents($url, false, $context);
$xml = simplexml_load_string($xml);
var_dump($xml); 
```

如何从 URL 返回数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:27:17.850

因为 XML 包含冒号（命名空间），所以您必须稍作不同[，并使用此方法](https://stackoverflow.com/questions/1575788/php-library-for-parsing-xml-with-a-colons-in-tag-names)访问命名空间：

```
var_dump($xml->children('gml', true)->featureMember->children()->Hostip);

/*
    object(SimpleXMLElement)#3 (5) {
      ["ip"]=>
      string(12) "12.215.42.19"
      ["countryName"]=>
      string(13) "UNITED STATES"
      ["countryAbbrev"]=>
      string(2) "US"
      ["comment"]=>
      object(SimpleXMLElement)#2 (0) {
      }
      ["ipLocation"]=>
      object(SimpleXMLElement)#5 (0) {
      }
    }
*/ 
```

..应该给你你想要的：

# java - C++ 中的 int 指针数组可以作为 Java 中的整数引用的 ArrayList 完成吗？

> ID：16038050
> 
> 赞同：2
> 
> 时间：2013-04-16T13:13:37.270
> 
> 标签：java, arraylist, int

我有一个 Java 数组`int[] A = new int[100000]`，我想创建数百万个`A`. 在 C++ 中，我会使用指针数组。我可以创建`ArrayList<Integer> subA`和存储对元素的引用，`A`这样我就不会消耗太多内存。目前，我确实创建`int[] subA = new int[some value less than A.length]`了非常昂贵且内存不足的对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:19:42.403

`List.subList()`这样做：它在原始列表上创建一个视图。您可能会通过使用它来节省内存，因为子列表只有以下 4 个字段：

*   引用外部列表
*   抵消
*   尺寸
*   模数

因此，每个子列表将消耗大约 20 个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:18:30.700

Java 没有指针的概念，因此您不能使用整数列表来引用其他对象，但您可以这样做：

```
List<List<Integer>> l = new ArrayList<List<Integer>>();

l.add(new ArrayList<Integer>()) // add a list which will hold integers as a reference in your main list. 
```

如果内存不足，则需要为 JVM 分配更多堆内存。阅读可以传递给 JVM 的 -Xmx 启动参数。

# java - 为什么打印新行不起作用？

> ID：16038051
> 
> 赞同：0
> 
> 时间：2013-04-16T13:13:37.613
> 
> 标签：java

我开始学习 Java，并从一本书中构建了这段代码。这是Java中的代码：

```
public class MyFirstApp {
    public static void main (String[] args) {
        int x = 1;
        while (x<3){
            System.out.print("Doo"+x);
            System.out.print("Bee");
            x=x+1;
        }
        if (x==3){
            System.out.println("Do"+x);
        }
    }
} 
```

为什么输出是：

```
Doo1BeeDoo2BeeDo3 
```

代替

```
Doo1BeeDoo2Bee
Do3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:15:16.780

只有*最后一个*调用是 to `println`... 并在打印内容的*末尾*`println`添加一个换行符。如果你想要在决赛*之前*换行，你会想要这样的东西：**`Do3`**

 **```
if (x==3){
    System.out.println();
    System.out.println("Do"+x);
} 
```

（目前还不清楚为什么支票在那里。`x`一定是3。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:15:16.247

你在Do3*之后打印换行符。*println 在消息之后而不是之前添加换行符。

[请参阅println()](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#println%28java.lang.String%29)的文档：

> 打印一个字符串，然后终止该行。这个方法的行为就像它调用 print(String) 然后 println()。

如果你想试试

```
System.out.println();
System.out.println("Do"+x); 
```

或者

```
System.out.println("\nDo"+x); 
```

在你的最后一个如果让它打印在自己的行上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T13:15:57.277

因为在打印其参数*后*`println()`移动到新行，在这种情况下，它位于输出的最后。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T13:16:27.557

因为`System.out.print()`将打印到`System.out`没有新行。`System.out.println()`在打印字符串后而不是在它之前转移到新行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T13:15:46.483

你在 Do3 之后打印换行符。

尝试这个

```
 System.out.println();
    System.out.println("Do"+x); 
```***

# java - 设置服务器之间的数据交换

> ID：16038056
> 
> 赞同：0
> 
> 时间：2013-04-16T13:13:52.043
> 
> 标签：java, hibernate

给我建议。我有一台 Java 应用程序服务器和 5 台安装它的服务器（用于分散负载）。要使用 SQL 数据库和 Hibernate。我想接收信息，信息不依赖于服务器 - 使其对所有人通用。我怎样才能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:43:30.313

您必须使用带有粘性会话的负载平衡。您使用的是哪个服务器？

# string - Fortran：打开文件时奇怪的空格填充字符串行为

> ID：16038057
> 
> 赞同：2
> 
> 时间：2013-04-16T13:13:53.170
> 
> 标签：string, fortran, whitespace

我有一个从一堆输入文件中读取数据的 Fortran 程序。第一个文件包含我将读取的其他三个文件的名称，在输入文件（我`stdin`在程序执行时重定向到）中指定，如下所示

```
"data/file_1.dat" "data/file2.dat" "data/file_number_3.txt" 
```

它们由常规空格分隔，并且行上没有尾随空格，只是换行符。我读了这样的文件名：

```
character*30 fnames(3)
read *, fnames 
```

然后我通过调用以文件名作为参数的函数继续读取数据：

```
subroutine read_from_data_file(fname)
    implicit none
    character*(*) fname

    open(15,file=fname)
    ! read some data
end subroutine read_from_data_file

! in the main program:
do i=1,3
    call read_from_data_file(trim(fnames(i)))
end do 
```

对于**第三个文件**，无论我将文件名按什么顺序放在输入文件中，填充都不起作用，Fortran 会尝试使用“data/file_number_3.txt”之类的名称打开一个，即带有一堆尾随空格。这会在我的文件夹中创建一个名为的空文件`data/file_number_3.txt (White Space Conflict)`，一旦我尝试从该文件中读取，程序就会因 EOF 错误而崩溃。

我试过`trim()`在不同的地方添加，例如`open(15,file=trim(fname))`没有任何成功。我认为这与 Fortran 中字符数组的固定长度有关，但我认为`trim()`会解决这个问题 - 这个假设不正确吗？

我该如何解决和解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:19:52.277

嗯。我想知道输入文件的最后一行是否有一个不是空格的最终字符，例如来自 Linux 系统的 EOF 标记在 Windows 系统上弹出，*反之亦然*。试试，如果你在 Linux 机器上，`dos2unix`; 在 Windows 盒子上尝试别的东西（我不确定是什么）。

如果这不起作用，请尝试使用内部`IACHAR`函数来检查行为异常的字符串中的每个单独的字符并检查内脏。

像您一样，我希望`trim`从字符串中修剪尾随空格，但并非所有未显示的字符都被视为空格。

而且，在我写作的时候，你对声明的使用，比如

```
character*30 
```

已经过时了，现代的替代品是

```
character(len=30) 
```

和

```
character(len=*) 
```

优先于

```
character*(*) 
```

**编辑**

您是否尝试过从文件中读取这些名称并从中读取它们`stdin`？

# sql - “表达式中的类型不匹配”（MS Access SQL）

> ID：16038058
> 
> 赞同：1
> 
> 时间：2013-04-16T13:13:55.260
> 
> 标签：sql, ms-access

和这个有联系，折腾了一个多小时，怕是放弃了……

一个 - 可能 - 简单的问题，虽然我没有使用 SQL 的经验。当我在 Access 中尝试这个（以及其他变体）时，我得到一个“表达式中的类型不匹配”：

```
SELECT Route_Leg_Passagier.[RouteID], Route_Leg_Passagier.[LegID], Leg.[Startpunt], Leg.[Eindpunt]
FROM Route_Leg_Passagier, Leg
WHERE Route_Leg_Passagier.[LegID] = Leg.[LegID]
AND Route_Leg_Passagier.[RouteID] = '1'; 
```

这是访问文件：

[https://dl.dropboxusercontent.com/u/104521722/Vliegtuigmaatschappij%20-%20Database11.accdb](https://dl.dropboxusercontent.com/u/104521722/Vliegtuigmaatschappij%20-%20Database11.accdb)

我想从那些s 中看到1\. `Startpunt`and存储在 entity中，但是and在 entity 中。`Eindpunt``Leg``RouteID``RouteID``LegID``Route_Leg_Passagier``Startpunt``Eindpunt``Leg`

如果这不好，我很抱歉，我对这个网站没有经验。但是请随时批评我，并提前感谢您！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:17:22.587

Route_Leg_Passagier.[RouteID] 不是整数值吗？在这种情况下，您的 WHERE 条件应如下所示：

```
AND Route_Leg_Passagier.[RouteID] = 1; 
```

引号用于字符串或字符值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:38:12.457

`Route_Leg_PassagierID.LegID`是自动编号数据类型；那实际上是一种数字数据类型，一种特殊形式的长整数。 `Leg.LegID`是文本数据类型。并且您的数据库包含使用该字段的这两个表之间的关系。

尝试以下步骤：

1.  制作 db 文件的备份副本。
2.  `Route_Leg_PassagierID`删除和之间的关系`Leg`。
3.  将数据类型`Leg.LegID`改为数字，长整数。
4.  测试以下查询。

```
SELECT
    rlp.Route_Leg_PassagierID,
    rlp.LegID,
    l.Startpunt,
    l.Eindpunt
FROM
    Route_Leg_Passagier AS rlp
    INNER JOIN Leg AS l
    ON rlp.LegID = l.LegID
WHERE rlp.RouteID='1'; 
```

如果需要，您还可以在更正 的数据类型后重新创建关系`Leg.LegID`。

# c# - 启动时未调用 ValueConverter

> ID：16038066
> 
> 赞同：1
> 
> 时间：2013-04-16T13:14:11.170
> 
> 标签：c#, wpf, data-binding, ivalueconverter

我有绑定到集合的组合框。集合中的每个项目都有一个可能包含或不包含项目的子集合。我有一个子集合绑定到的第二个组合框。如果子集合有项目，我只想显示（=Visibility.Visible）第二个组合框。所有这些都有效。但是：当我启动我的程序时，主组合框的 selectedItem 为空（=到目前为止没有选择任何内容）。这（我猜）导致转换器不被调用（它没有，我在转换器上设置了一个断点并且程序在它启动时不会停止）。

所以我有一个问题，我不想在程序启动时显示第二个组合框。我可以强制调用 ValueConverter 吗？我尝试在构造函数的末尾调用 OnPropertyChanged，但这并没有改变任何东西。当我在 .xaml.cs 的构造函数中将组合框设置为 Visible.Hidden 时，它根本不会显示，即使在调用值转换器之后也是如此。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:18:05.393

`FallbackValue`为绑定设置 a ：

```
<SomeUIElement Visibility="{Binding SomeBinding, Converter={StaticResource SomeConverter}, FallbackValue=Hidden}" /> 
```

当没有任何绑定时，您可以设置一个用于代替绑定的值。

将代码隐藏中的值更改为`Visibility.Hidden`使其始终不可见的原因是，显式设置属性会删除您在 XAML 中添加的绑定

# jquery - 使用jquery跟随鼠标滚动图片

> ID：16038069
> 
> 赞同：0
> 
> 时间：2013-04-16T13:14:23.133
> 
> 标签：jquery, html, css

很难用一个简短的标题来解释这一点。我想重新创建在 Flash 中制作的东西，但使用 jquery 插件或 css\html。

[链接到当前闪光灯](http://inord.no/?calcId=mobil) 如果您按下左侧的“Altaposten.no mobil”，您将能够将鼠标悬停在 iphone 上。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:51:16.657

**解决了：**

我最终使用这个插件来重现这个问题。

这是很不错的。

[http://manos.malihu.gr/jquery-thumbnail-scroller/](http://manos.malihu.gr/jquery-thumbnail-scroller/)

# mysql - mysql where语句日期问题

> ID：16038072
> 
> 赞同：1
> 
> 时间：2013-04-16T13:14:30.247
> 
> 标签：mysql, sql, select, where

希望有人可以帮助，

我正在尝试做的是从数据库中提取任何给定月份的所有结果，是否可以仅使用 mysql 查询（无 php）。

我使用模板应用程序，我唯一的访问权限是通过我的 mysql where 语句，所以我需要从“2013-04-01”开始计算月份是什么，如果它是我想要的，就抓住它。

下面的代码有效，但显然也将我与 2013 年联系在一起。

```
 `SELECT * FROM table_name WHERE Display_Date => 2013-04-01 AND Display_Date <= 2013-04-30 LIMIT 10` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:17:03.230

```
SELECT 
    * 
FROM 
    table_name 
WHERE 
    MONTH(Display_Date) = MONTH(CURDATE())
AND YEAR(Display_Date) = YEAR(CURDATE()) 
```

**参考**

*   [`MONTH()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_month)
*   [`YEAR()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_year)

# spring - Spring @Value 未设置

> ID：16038073
> 
> 赞同：0
> 
> 时间：2013-04-16T13:14:36.050
> 
> 标签：spring, properties

我敢肯定这已经被问了 1000 次，因为我见过他们，但是我错过了一些东西。

语境：

```
<beans profile="localDev">
    <util:properties id="propertiesLocalDev"location="classpath:/localDev.properties"/>
</beans>

<beans profile="test">
    <util:properties id="properties-test" location="classpath:/test.properties"/>
</beans> 
```

在里面：

```
 System.setProperty("spring.profiles.active", "localDev");
    GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
    ctx.load("classpath:applicationContext.xml");
    ctx.refresh(); 
```

配置：

```
@Configuration
public class AppConfig {

@Value("${test.value}")
private String testValue;
... 
```

日志：

```
INFO: Loading properties file from class path resource [localDev.properties] 
```

特性：

```
test.value=ugh 
```

因此，似乎正在读取属性，但是未设置 AppConfig.testValue 中的值。我已经尝试过纯 java java/xml 等...一些配置破坏了一些工作，尝试使用@PropertySource，但常量是 testValue 永远不会被设置，所以我从根本上做错了什么。

总体目标是根据不同的配置文件加载不同的属性文件。

谁能看到我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:44:44.730

您还需要一个可以为您解析属性的[PropertySourcesPlaceholderConfigurer 。](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html)这是使用以下配置的：

```
<context:property-placeholder location="..." 
                local-override="true" properties-ref="propertiesLocalDev" /> 
```

有了这个，您的财产价值应该干净地解决。

这也应该有效 - 使用 Spring-EL：

```
@Value("#{@propertiesLocalDev['test.value']}")
private String testValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:46:02.537

尝试

```
public class AppConfig {

 @Autowired
private String testValue;

} 
```

如果变量已正确自动装配，您可以使用

```
String sUgh = testValue.getProperty("test.value"); // = "ugh" 
```

我也会用普通的

```
<util:properties id="propertiesLocalDev"location="classpath:/localDev.properties"/> 
```

而不是使用

```
<beans profile> 
```

标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:06:32.223

你必须使用类似的东西，在 XML 中只使用以下

```
<util:properties id="test" location="classpath:fn-test-configuration.properties" /> 
```

现在，您可以按照以下方式在类中使用属​​性值

@Value("#{test.test.value}")
私有字符串 testValue;

我用过同样的方法，它工作正常。

# list - 在 SharePoint 中显示筛选的列表视图的最佳方式是什么？

> ID：16038075
> 
> 赞同：1
> 
> 时间：2013-04-16T13:14:39.707
> 
> 标签：list, view, sharepoint-2010, filter, sharepoint-designer

我们得到了一个标准 webpart，它使用视图显示文档库。我们可以使用 SharePoint Designer 使用这些视图来自定义我们客户的需求。

现在客户想要过滤/搜索 - 用于文档标题的选项。

不编写自定义代码的最佳方法是什么？

甚至可以仅使用 SharePoint-Designer 和标准 Web 部件来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:31:51.457

我能够在 sharepoint 2007 中做到这一点，并且我相信这也适用于 sharepoint 2010，请查看此站点以获取更多信息[http://sharethelearning.blogspot.com/2007/03/filtering-list-by-partial-match。 html](http://sharethelearning.blogspot.com/2007/03/filtering-list-by-partial-match.html)

这是通过使用数据视图 Web 部件。

# android - android webview视频没有播放全屏模式

> ID：16038081
> 
> 赞同：2
> 
> 时间：2013-04-16T13:15:07.587
> 
> 标签：android, android-webview, android-video-player, android-websettings

我必须开发一个 android 应用程序。这里的 webvicw 视频播放良好..但是如果我必须单击全屏模式意味着视频崩溃了...我该如何解决这些错误...

如何在全屏模式下播放视频？？？或者我如何使用 youtube 播放器播放视频？？？请给我任何建议？？？

我使用以下代码：

```
content.setWebChromeClient(new WebChromeClient());
final Activity activity = this;
    content.setWebChromeClient(new WebChromeClient(){
    public void onProgressChanged ( WebView view , int progress ){
        activity.setProgress(progress * 1000);
    }       
});

content.setWebViewClient(new WebViewClient(){
    public void onReceivedError ( WebView view , int errorCode , String description , String failingUrl ){
        Toast.makeText(activity, "Oh no! " + description, Toast.LENGTH_SHORT).show();
    }

});

content.setWebChromeClient(new WebChromeClient());

content.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
content.getSettings().setJavaScriptEnabled(true);
content.getSettings().setDomStorageEnabled(true);
content.getSettings().setPluginState(PluginState.ON);
content.loadDataWithBaseURL(null, full_content, "text/html", "utf-8", null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:55:48.010

我是使用**youtube 播放器 API**做到的……这对 android 开发者来说很简单。它在全屏模式下播放效果很好。

# plone - 基于父级中的 csv 文件创建子内容（plone 灵巧）

> ID：16038082
> 
> 赞同：0
> 
> 时间：2013-04-16T13:15:08.560
> 
> 标签：plone, dexterity

我通过 Dexterity 在 Plone 4.3 中创建了两种内容类型，并在文件系统上创建了一个 Plone 产品。

类型是

*   供应商
*   物品

项目只能存在于供应商内部，我可以手动创建新项目而无需

如果我在创建供应商时上传 CSV 文件，我希望能够创建一堆项目。任何方式灵巧支持这一点（触发器，自定义视图......）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:25:32.860

您必须在自定义视图中处理它。没有预先存在的代码来处理它。

对于简单的情况，只需使用`csv`模块读取上传的文件并使用行在`Supplier`容器中创建项目：

```
from plone.dexterity.utils import createContentInContainer
import csv

reader = csv.reader(uploadedfile)

for row in reader:
    createContentInContainer(supplier, 'your.package.item', title=row[0], ...) 
```

对于更复杂的操作，您可以使用将 CSV 数据转换为灵巧对象的管道构建一个`transmogrifier`管道[`transmogrify.dexterity`](https://github.com/collective/transmogrify.dexterity)，但这在这里可能有点矫枉过正。

# linux - 提取并删除目录中的所有.gz - Linux

> ID：16038087
> 
> 赞同：88
> 
> 时间：2013-04-16T13:15:13.533
> 
> 标签：linux, gzip, extract, gunzip

我有一个目录。它有大约 500K .gz 文件。

如何提取该目录中的所有 .gz 并删除 .gz 文件？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2013-11-20T17:55:25.500

这应该这样做：

```
gunzip *.gz 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-03-17T09:56:07.387

@techedemic 是正确的，但缺少“。” 提及当前目录，此命令将遍历所有子目录。

```
find . -name '*.gz' -exec gunzip '{}' \; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-16T13:28:53.747

显然有不止一种方法可以做到这一点。

```
 # This will find files recursively (you can limit it by using some 'find' parameters. 
    # see the man pages
    # Final backslash required for exec example to work
    find . -name '*.gz' -exec gunzip '{}' \;

    # This will do it only in the current directory
    for a in *.gz; do gunzip $a; done 
```

我敢肯定还有其他方法，但这可能是最简单的。

要删除它，只需`rm -rf *.gz`在适用的目录中执行

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-06T13:35:28.690

提取当前目录及其子目录中的所有 gz 文件：

```
 find . -name "*.gz" | xargs gunzip 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-15T08:55:59.127

如果要提取单个文件，请使用：

枪压缩文件.gz

它将提取文件并删除 .gz 文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T13:19:24.120

```
for foo in *.gz
do
  tar xf "$foo"
  rm "$foo"
done 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-28T18:51:51.340

尝试：

```
ls -1 | grep -E "\.tar\.gz$" | xargs -n 1 tar xvfz 
```

然后尝试：

```
ls -1 | grep -E "\.tar\.gz$" | xargs -n 1 rm 
```

这将解压当前目录中的所有 .tar.gz 文件，然后删除所有 .tar.gz 文件。如果你想解释，“|” 获取之前命令的标准输出，并将其用作之后命令的标准输入。使用不带引号的“man *command ”来确定这些命令和参数的作用。*或者，您可以在线研究。

# php - CodeIgniter 中 foreach 循环中的返回值

> ID：16038098
> 
> 赞同：0
> 
> 时间：2013-04-16T13:15:29.213
> 
> 标签：php, codeigniter

我在使用 CodeIgniter 将值从模型返回到控制器时遇到了一些麻烦。我将两个数组从控制器传递到模型。我正在检查两个数组是否不为空，并使用 foreach 循环循环它们以从数据库中获取一些值并将查询返回给控制器。这是我当前的代码

```
if (!empty($search_for_area) && !empty($search_for_requirement))
      { foreach($search_for_requirement as $search_value_1)
          { 
            foreach($search_for_area as $search_value_2)
              { 
                if($search_value_2 != null && $search_value_1 != null)
                  {
                     $nearbytution = $this->db->query('select name,area,contactno from tut_listing where area = "'.$search_value_2.'" and categoryfilter like "%'.$search_value_1.'%" and partner > "" group by name');
                     print_r($nearbytution->result()); 
                  }
              }
          }

         //Line 1
      } 
```

`print_r($nearbytution->result());`工作正常，我可以查看结果。我应该放在哪里`return $nearbytution;`以便我可以获得所有获取的值？我试过了，`Line 1`但我只得到最后一个数组值的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:59:04.057

```
function returnStuff($search_for_area,$search_for_requirement) {
    $arr_area = array();
    $arr_filter = array();
    if ( ! empty($search_for_area) and ! empty($search_for_requirement)) {
        foreach($search_for_requirement as $search_value_1) {
            foreach($search_for_area as $search_value_2) { 
                if($search_value_2 != null && $search_value_1 != null) {
                    $arr_area[] = $this->db->escape($search_value_2);
                    $arr_filter[] = $this->db->escape_like_str($search_value_1);
                }
            }
        }
    }

    $str_area = 'NULL';
    if ($arr_area)
        $str_area = implode(', ', $arr_area);

    $str_filter = "'^-$'";
    if ($arr_filter)
        $str_filter = "'(".implode('|', $arr_filter).")'";

    $query = $this->db->query("
        SELECT name, area, contactno 
        FROM tut_listing 
        WHERE area IN ({$str_area}) AND categoryfilter REGEXP {$str_filter} and partner > '' group by name
    ");

    return $query->result();
} 
```

说真的，请考虑这种方法。你只需要一个调用来打扰可怜的Mysql服务器，你就可以同时获得所有你想要的数据。

除此之外，在你的代码中练习一致的风格。从长远来看，这将节省您的时间和头发。

*   [**CodeIgniter 转义（）**](http://ellislab.com/codeigniter/user-guide/database/queries.html)
*   [**MySQL 正则表达式**](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:30:33.733

在循环中试试这个：

```
$nearbytution[] = $this->db->query('select name,area,contactno from tut_listing where area = "'.$search_value_2.'" and categoryfilter like "%'.$search_value_1.'%" and partner > "" group by name')->result(); 
```

`return $nearbytution;`然后可以放置在您的“第 1 行”。它将包含一个查询结果数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:35:53.990

除非我误解了您的问题，否则您为什么不将所有结果存储在一个大数组中然后返回该数组？

```
function returnStuff($search_for_area,$search_for_requirement) {
    $data = array();
    if (!empty($search_for_area) && !empty($search_for_requirement)) {             
        foreach($search_for_requirement as $search_value_1) { 
        foreach($search_for_area as $search_value_2) { 
            if($search_value_2 != null && $search_value_1 != null) {
                 $nearbytution = $this->db->query('select name,area,contactno from tut_listing where area = "'.$search_value_2.'" and categoryfilter like "%'.$search_value_1.'%" and partner > "" group by name');
                 $data[] =$nearbytution->result()); 
              }
          }
      }
    }
    return $data;
} 
```

现在 $data 将是一个结果数组，每个都包含查询结果。如果必须清理您的结果集（例如删除重复项），您可以遍历它并进行清理。

您还可以做的是在您的 foreach 循环中构建一个大型 SQL 查询，然后只执行一个大型查询并返回结果。

# matlab - 如何绘制等边彩色三角形？

> ID：16038101
> 
> 赞同：1
> 
> 时间：2013-04-16T13:15:44.700
> 
> 标签：matlab, plot, matlab-figure, triangulation, delaunay

我想在 MATLAB 中制作一个类似于此图的颜色图：

![http://1.bp.blogspot.com/-QpFb-Yj_MOg/UA4Tw3xuVVI/AAAAAAAAAIQ/T3kTUT39c-A/s1600/triangular+plot.png](https://i.stack.imgur.com/iqupG.png)

我已经设法创建了创建顶点所需的所有点 [x,y]，并且我有一个包含每个顶点颜色的地图，所以我可以获得以下内容。

![正确的情节，但错误的轴](https://i.stack.imgur.com/KkAoZ.png)

但我不明白如何使轴工作。

到目前为止的代码：

```
% Equilateral grid 
tcorner = [0.0, 0.5,           1.0;
           0.0, 1.0*sqrt(3)/2, 0.0];
tg = triangle_grid( 1/0.05, tcorner );
tgx = tg(1,:);
tgy = tg(2,:);

% Create triangles
tri = delaunay(tgx,tgy);

% Plot
h = trisurf(tri, tgx, tgy, colorvector); 
```

和网格功能：

```
function triangle_grid(n, tcorner)
    ng = ( ( n + 1 ) * ( n + 2 ) ) / 2;
    tg = zeros ( 2, ng );

    p = 0;

    for i = 0 : n
        for j = 0 : n - i
            k = n - i - j;
            p = p + 1;
            tg(1:2,p) = ( i * t(1:2,1) + j * t(1:2,2) + k * t(1:2,3) ) / n;
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-02T12:43:13.957

主要问题是您无法将轴旋转到正确的位置，因为总是翻转到下侧。因此，您需要创建它们。

方法如下：

```
% Equilateral grid 
tcorner = [0.0, 0.5, 1.0; % x
           0.0, 1.0*sqrt(3)/2,   0.0]; % y
tg = triangle_grid( 1/0.05, tcorner);
tgx = tg(1,:);
tgy = tg(2,:);

% Create triangles
tri = delaunay(tgx,tgy);
col = rand(size(tgx));
trisurf(tri,tgx,tgy,col)
view(0,90)
colormap('lines')

% setting the axes:
ax = gca;
grid off
ax.YAxis.Visible = 'off';
ticks = (0:20:80).';

% bottom axis:
tickpos = linspace(tcorner(1,1),tcorner(1,3),numel(ticks)+1);
ax.XAxis.FontSize = 14;
ax.XAxis.TickValues = tickpos(1:end-1);
ax.XAxis.TickLabels = ticks;
ax.XAxis.TickLabelRotation = 45;
xlabel('X axis title');

% left & right axis:
ticksxpos = linspace(tcorner(1,1),tcorner(1,3),numel(ticks)*2+1);
ticksypos = linspace(tcorner(2,1),tcorner(2,2),numel(ticks)+1);
text(ticksxpos(numel(ticks)+1:-1:2)-0.03,... % left
    ticksypos(end:-1:2)+0.03,...
    num2str(ticks),'FontSize',14,...
    'VerticalAlignment','bottom',...
    'HorizontalAlignment','left',...
    'Rotation',-45)
text(ticksxpos(end:-1:numel(ticks)+2)+0.05,... % right
    ticksypos(1:end-1)-0.03,...
    num2str(ticks),'FontSize',14,...
    'VerticalAlignment','bottom',...
    'HorizontalAlignment','right')
ax.Parent.Color = 'w';

% titles:
text(tcorner(1,2)/2-0.06,tcorner(2,2)/2+0.06,...
    'Left title','FontSize',14,...
    'HorizontalAlignment','center',...
    'Rotation',45)
text(tcorner(1,2)+tcorner(1,2)/2+0.06,tcorner(2,2)/2+0.06,...
    'Right title','FontSize',14,...
    'HorizontalAlignment','center',...
    'Rotation',-45) 
```

我们得到...

[![三角的](https://i.stack.imgur.com/nGCgN.png)](https://i.stack.imgur.com/nGCgN.png)

# windows - 如何使用 MATLAB 中的 Cygwin 执行其他目录中的命令？

> ID：16038112
> 
> 赞同：4
> 
> 时间：2013-04-16T13:16:14.530
> 
> 标签：windows, matlab, cygwin

我正在使用**MATLAB**，我想在 Windows 下使用**CYGWIN执行一些****C++程序。**这些在 CYGWIN 的本地目录中；. 我可以让 CYGWIN 在 MATLAB 的本地目录下执行命令：**`C:\cygwin\home\Alex\Community_BGLL_CPP`**

 **```
>> ls
.                README           genlouvainmex.m  
..               genlouvain.m     private          
>> system('C:\cygwin\bin\ls')
README
genlouvain.m
genlouvainmex.m
private
ans =
 0 
```

但是我无法像在 CYGWIN 的本地目录中一样执行命令。这样我就可以启动一个 C++ 程序来生成一个文本文件，然后我可以使用 MATLAB 进行处理。所以本质上我只需要调用它。在这里我尝试`ls`：

```
>> system('C:\cygwin\bin\ C:\cygwin\home\Alex\ls')
'C:\cygwin\bin\' is not recognized as an internal or external command, 
operable program or batch file. 
ans =
 1 
```

我也试过`>> system('C:\cygwin\bin\ls C:\cygwin\home\Alex\')`，但它也不起作用。

一种选择是将目录 ( `cd`) 更改为 CYGWIN 目录，然后执行以下命令：

```
>> pwd
ans =
c:\cygwin\home\Alex\Community_BGLL_CPP\sample_networks
>> system('C:\cygwin\bin\ls')
arxiv.bin
arxiv.txt
example.bin
example.txt
graph.tree
graph_list.bin
graph_list.txt
karate.bin
karate.tree
karate.txt
ans =
 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:56:40.053

我没有安装cygwin，所以我不能确定这个。但我认为您只需要一个“cd”作为系统命令的一部分。例如：

```
>> system('"C:\Program Files (x86)\Git\bin\bash" -c "cd  C:/Python27; C:/Program\ Files\ \(x86\)/Git/bin/ls"') 
```

生成我的 Python 文件夹的列表，因为 ls 在该文件夹中运行。

所以你想要这样的东西：

```
>> system('"C:\cygwin\bin\bash" -c "cd  C:/cygwin/home/Alex/Community_BGLL_CPP/sample_networks; C:/some_path/convert"') 
```**

# c - C 套接字未在 Mac OS X 上运行

> ID：16038114
> 
> 赞同：0
> 
> 时间：2013-04-16T13:16:15.560
> 
> 标签：c, macos, sockets

以下代码在 Ubuntu 上运行并与客户端通信没有问题。但是，我需要在 Mac OS X 上运行。我可以毫无错误地编译它，但是当我尝试运行它时，会出现以下消息：*"Abort trap: 6"*。我试图用谷歌搜索它，但找不到任何有用的信息。即使我将 printf 放在 main 函数的开头，它也不会运行。谢谢你的任何建议。

```
#include <stdio.h>
#include <sys/socket.h>
#include <sys/un.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>
#define UNIX_PATH_MAX 108

int connection_handler(int connection_fd)
{
    int nbytes;
    char buffer[256];

    nbytes = read(connection_fd, buffer, 256);
    buffer[nbytes] = 0;

    printf("MESSAGE FROM CLIENT: %s\n", buffer);
    nbytes = snprintf(buffer, 256, "hello from the server");
    write(connection_fd, buffer, nbytes);

    close(connection_fd);
     return 0;
}

int main(void)
{
    struct sockaddr_un address;
    int socket_fd, connection_fd;
    socklen_t address_length;
    pid_t child;

    socket_fd = socket(PF_UNIX, SOCK_STREAM, 0);

    if(socket_fd < 0)
    {
        printf("socket() failed\n");
        return 1;
    } 

    unlink("./demo_socket");

    /* start with a clean address structure */
    memset(&address, 0, sizeof(struct sockaddr_un));
    address.sun_family = AF_UNIX;
    snprintf(address.sun_path, UNIX_PATH_MAX, "./demo_socket");

    if(bind(socket_fd, (struct sockaddr *) &address, sizeof(struct sockaddr_un)) != 0)
    {
        printf("bind() failed\n");
        return 1;
    }

    if(listen(socket_fd, 5) != 0)
    {
        printf("listen() failed\n");
        return 1;
    }

    while((connection_fd = accept(socket_fd, (struct sockaddr *) &address,&address_length)) > -1)
    {
        child = fork();
        if(child == 0)
        {
            /* now inside newly created connection handling process */
            return connection_handler(connection_fd);
        }
        /* still inside server process */
        close(connection_fd);
    }

    close(socket_fd);
    unlink("./demo_socket");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:34:47.130

您已`UNIX_PATH_MAX`硬编码为 108，但`sun_path`in`sockaddr_un`只有 104 个字节长：

```
struct  sockaddr_un {
    unsigned char   sun_len;    /* sockaddr len including null */
    sa_family_t sun_family; /* [XSI] AF_UNIX */
    char        sun_path[104];  /* [XSI] path name (gag) */
}; 
```

因此，您尝试使用以下内容在缓冲区外写入​​：

```
snprintf(address.sun_path, UNIX_PATH_MAX, "./demo_socket"); 
```

您可以使用以下方法解决此问题：

```
snprintf(address.sun_path, sizeof(address.sun_path), "./demo_socket"); 
```

如果您使用了调试器（例如 gdb），这将是一个简单的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:25:55.780

一个可能的原因是您`address_length`在调用`accept`. `accept` *需要*在调用之前对其进行正确初始化。

# php - 在 CakePHP 2.3 中即时取消设置虚拟字段

> ID：16038118
> 
> 赞同：1
> 
> 时间：2013-04-16T13:16:21.977
> 
> 标签：php, cakephp

**我的问题是：**例如，当我进行**全部查找**时，也使用了 $virtualFields，但是，我想选择何时使用它们，或者在某些情况下禁用的可能性。

```
public $virtualFields = array(
    'sum_total_foods' => 'sum(OrderFood.quantity * OrderFood.price)',
    'sum_original_total_foods' => 'sum(OrderFood.quantity * OrderFood.original_price)',
    'sum_tax_amount' => 'sum((OrderFood.quantity * OrderFood.price) * OrderFood.tax)',
    'tax_amount' => '((OrderFood.quantity * OrderFood.original_price) * OrderFood.tax)',
    'total' => '(OrderFood.quantity * OrderFood.original_price)'
); 
```

所以，如果这样做：

```
$this->find('all'); 
```

CakePHP 返回*GROUP BY*错误，当然，我知道为什么。

那么，我怎样才能`$virtualFields`即时禁用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:18:31.343

您可以使用“字段”来指定要在此查询中使用的字段（白名单）。或者你可以使用 unset()：

```
unset($this->virtualFields['total']); 
```

ETC

小心：这也将在同一个请求中从所有 find() 调用中删除这些字段。您可能希望将它们存储在 tmp 属性 $virtualFieldsTmp 中，以将它们放回您的虚拟字段中。

但是，如果不是在每个 find 调用中都使用虚拟字段，那么动态使用/添加虚拟字段可能会更明智：

```
public $availableVirtualFields = array(...);

// before your call
$this->virtualFields['x'] = $this->availableVirtualFields['x'];
...
$result = $this->find(...); 
```

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T22:26:26.997

如果您在控制器中使用它，请像这样使用它：

```
unset($this->YourModel->virtualFields['x']); 
```

您需要通过模型的方法访问它。

# c# - WPF 在文本框上激活绑定 OnTextInput

> ID：16038119
> 
> 赞同：0
> 
> 时间：2013-04-16T13:16:23.703
> 
> 标签：c#, wpf, mvvm, binding, textbox

我有一个具有以下绑定的文本框：

```
<TextBox Binding={Path=MyStr, Mode=TwoWay}> 
```

我的问题是绑定仅在文本框失去焦点时触发，而不是针对用户输入的每个字符。

文本框还有一个可以正确触发的 OnTextInput 函数，但是如何在后面的代码中激活绑定？

*我宁愿以纯粹的 mvvm 方式来做（如果可能的话，不要使用窗口的代码）

任何答案都将被接受 mvvm 与否。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:20:12.590

这里：

```
<TextBox Text="{Binding Path=MyStr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

现在您的绑定属性将在每个字符上更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:20:10.783

您可以使用 updatesource 触发器并将其设置为属性已更改

```
<Binding Source="{StaticResource myDataSource}" Path="Name"
         UpdateSourceTrigger="PropertyChanged"/> 
```

更改的那一刻，它会将更新后的值发送回您的 DataContext

在 msdn 上：http:
[//msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:07:29.167

有一个名为 PropertyChanged 的​​ UpdateSourceTrigger，如果您在更改文本框的文本时将其用作更新触发器，它将触发，并且在您的绑定属性设置器中，您可以执行文本更改时需要执行的任何操作。

```
<TextBox Text="{Binding Path=Text,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" /> 
```

# java-ee-6 - JavaEE6 Conversation.end 不会将 conversation.id 重置为 1

> ID：16038123
> 
> 赞同：0
> 
> 时间：2013-04-16T13:16:29.167
> 
> 标签：java-ee-6, conversation-scope

调用conversation.end时是否没有重置conversation.id？

场景：我有一个在 CRUD 中使用对话范围的应用程序，所以当我访问列表页面时，它会开始对话。转到详细信息并单击返回将调用结束对话并再次开始对话。但是当我处于调试模式时，我发现当调用 conversation.end() 时，会话设置为空。然后当我重新调用 conversation.begin() 时，conversation.id 不会重置为 1，而是最后一个值 + 1。这样做是否正确？

更令人费解的是，注销并再次登录后，conversation.id 取最后一个值+1。

我的环境：使用 javaee-api 的 Jboss 7.1.3。

```
protected void beginConversation() {
    if (conversation.isTransient()) {
        conversation.begin();
    }
}

protected void endConversation() {
    if (!conversation.isTransient()) {
        conversation.end();
    }
} 
```

所以基本上我有一个由所有支持bean扩展的基本实体（上面定义了上面的代码。）。呈现列表页面时，它将调用 beginConversation。在详细页面点击返回按钮将调用 endConversation。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:26:09.567

为什么要重置对话 ID？

解决这些问题的最佳方法是直接查看[规范](http://docs.jboss.org/cdi/spec/1.0/html/contexts.html#d0e5678)（在您的情况下为 CDI 1.0），该规范指出容器必须为对话生成一个 id，而不是如何生成。

看看[这个](https://stackoverflow.com/questions/10449601/what-causes-a-conversation-id-to-be-incremented)问题，它说明了它是如何在 WELD 中完成的。

# java - 如何正确退出应用程序

> ID：16038125
> 
> 赞同：5
> 
> 时间：2013-04-16T13:16:30.853
> 
> 标签：java, multithreading, exception

我的应用程序中有一个线程永久运行，每 5 分钟向监控应用程序发送一次心跳。

如果我的应用程序在异常块中失败，我需要退出正在运行它的线程（while 循环基于未中断的线程）。

这是否意味着在每次捕获中我都需要系统退出或调用来中断该线程？这似乎是一种非常混乱的方法，但我也不知道其他方法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:20:09.213

您可以将此线程指定为守护线程。它将随着应用程序终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:22:29.887

考虑使用主应用程序和线程都可读的对象。如果主应用程序遇到异常，它应该有一个`finally`块来设置该对象，告诉心跳线程应用程序已经或正在关闭。

这可能会为您提供一种机制，让心跳发送最后一个“死”消息。这可以告诉监视器您的应用程序死亡并列出原因，而不是简单地不发送心跳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:26:57.883

理想情况下，您需要一种将消息从应用程序传输到线程的方式来终止。

这取决于您的 while 循环所基于的表达式。如果当前您的代码属于以下类型：

```
while(expression) 
```

当表达式返回一些布尔值时，它总是可以替换为：

```
while(Thread.currentThread.interrupted()){
  if(!expression)
     break;
//....
} 
```

这将是完美的解决方案。或者您也可以使用一些布尔值来通知。或者如果你`while`是基于队列的，那么添加一些 POISON_PILL，这表示它是时候退出循环了。

`Daemon thread`也是上面提到的一种解决方案，但是这取决于您是要存储一些数据还是关闭/管理一些资源。这将是一个问题。

最终为了稳健性，您需要提出合适的关闭策略。

# jquery - 禁用 Web 应用程序视图的 ipad 滚动

> ID：16038127
> 
> 赞同：0
> 
> 时间：2013-04-16T13:16:40.443
> 
> 标签：jquery, ipad, cordova, ios-simulator

我曾多次尝试解决 ipad 应用程序中的问题，但均未成功。我有一个基于 phonegap 1.3 的 Web 应用程序，当我移动手指时应用程序正在滚动，很难看。我找到了一些禁用所有滚动的解决方案：

```
window.addEventListener('touchmove', function(e) {
      e.preventDefault();
}, false); 
```

我的交易是禁止从 ipad 滚动应用程序本身。而不是所有元素，因为我需要在页面内的某些元素中滚动。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:00:29.530

问题已解决。

这是解决方案：

**通过在webViewDidFinishLoad**方法中添加这一行：（请参阅xcode*类文件夹中的***AppDelegate.m**或**MainViewController.m**文件）

 *```
- (void)webViewDidFinishLoad:(UIWebView *)theWebView 
{
       ........................
       ........................

          theWebView.scrollView.bounces = NO;

       ........................
       ........................
} 
```*

# android - 如何在android的Listview中从右到左分配水平滚动

> ID：16038129
> 
> 赞同：0
> 
> 时间：2013-04-16T13:16:42.400
> 
> 标签：android, android-layout, android-scrollview

我为列表视图行创建了嵌套视图。我也使用水平滚动视图在特定行中水平滚动。但是在某些行中，我希望有从右到左的滚动功能。我对此进行了搜索，我发现了一些 smoothscrollto="20dp" 但它根本不起作用。

**我在单击侦听器的图像视图中添加 的已**编辑文本**`holder.hv.smoothScrollTo(holder.hv.getRight(), holder.hv.getTop());`，当我单击该图像视图时，我的水平滚动视图移至结束（右）..如何才能在没有单击侦听器的情况下滚动该特定行这是我的代码**

 **```
 public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    int type = getItemViewType(position);
    System.out.println("getView " + position + " " + convertView + " type = " + type);
    if (convertView == null) {
        holder = new ViewHolder();
        switch (type) {
            case 0:
                convertView = inflater.inflate(R.layout.list_row1, null);
                 holder.hv = (HorizontalScrollView)convertView.findViewById(R.id.horizontalScrollView1);
                holder.videoview1 = ((ImageView)convertView.findViewById(R.id.train).findViewById(R.id.boogi1).findViewById(R.id.imageView1));
                Log.d("Listview", "front value is"+position);
                holder.videoview1.setTag(position);
                holder.videoview1.setOnClickListener(new OnClickListener() {                
                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        holder.hv.smoothScrollTo(holder.hv.getRight(), holder.hv.getTop());
                        }
                });

                break;
            case 1:convertView = inflater.inflate(R.layout.list_row2, null);
                holder.videoview1 = ((ImageView)convertView.findViewById(R.id.train2).findViewById(R.id.boogi2).findViewById(R.id.imageView1)); 
                holder.videoview1.setTag(position);
                holder.videoview1.setOnClickListener(new OnClickListener() {                
                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        Toast.makeText(context, "you right clicked"+v.getTag() , Toast.LENGTH_SHORT).show();                        
                    }
                });
                break;
        }
        convertView.setTag(holder);
    } else {

        holder = (ViewHolder)convertView.getTag();

    }

    return convertView;
} 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:37:20.373

请使用 My NEXUS 7 中的此[链接](https://github.com/krishnalalstha/Android-HorizontalScrollView) 屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/dUiBu.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:11:33.067

我在@Appu 和堆栈溢出的其他成员的帮助下解决了这个问题......

只是我将此代码添加到我想自动向右滚动的行中

```
holder.hv.post(new Runnable() 
                {
                    public void run() 
                     {
   holder.hv.smoothScrollTo(holder.hv.getRight()+80, holder.hv.getTop()); 
```

// Hv 是水平滚动视图

```
 }
                  }); 
```**

# c# - 结构和属性

> ID：16038145
> 
> 赞同：0
> 
> 时间：2013-04-16T13:17:23.990
> 
> 标签：c#, properties

我有一个结构

```
namespace lib
{
    public struct strct_Test
    {
       int a;
       string b;
    }
} 
```

我正在做的其他一些事情

```
using lib;

class one
{
    private strct_Test var;

    public strct_Test Var
    {
       get {return var;}        // or should it be like return var.a; return var.b;
       set {var = value;}       // or should it be like var.a = value; var.b = value
    }
} 
```

那么任何人都可以指导代码注释中提到的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:19:04.520

属性的类型`Var`是`strct_Test`。

这意味着 getter 和 setter 应该使用该类型，就像您在代码中所做的那样。

否则会导致编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:00:54.873

**问问自己你想做什么**

**您应该认为我是否直接需要其中一些值？**
所以为你使用的每个值写属性（*不是你所有的*）

**我会从其他班级替换整个结构吗？**
所以为你的结构写属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:22:27.077

*正确*的方法取决于您希望代码的结构。

在您的示例中，您定义了 type 的不可变属性。`strct_Test`，所以如果你
做这样的事情：

```
var o = new one(); 
o.Var.a = 10; 

var x = o.Var; 

//x.a != o.Var.a; 
```

希望这可以让您了解代码的行为，以便您可以决定它是否是您具体案例的最佳架构。

# javascript - 更改传单中标记的大小

> ID：16038153
> 
> 赞同：10
> 
> 时间：2013-04-16T13:17:54.487
> 
> 标签：javascript, icons, leaflet

我在传单的地图上有一个标记：

```
var centerMarker = L.marker(centerPoint, { title: 'unselected' }).bindLabel(schools[i][0]);
centerMarker.on('click', selectMarker);
centerMarker.addTo(map); 
```

我想在点击时更改该标记的大小。

我知道我们可以更改图标，但我只想更改标记的相同图标的大小。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-06-22T14:48:41.123

您可以从标记本身获取旧图标，更改图标的大小，然后`setIcon`使用更改后的图标调用：

```
var icon = centerMarker.options.icon;
icon.options.iconSize = [newwidth, newheight];
centerMarker.setIcon(icon); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T20:21:12.550

在标记上使用`setIcon`，提供具有相同图像但大小和锚点不同的新图标。

```
var centerPoint = L.latLng(55.4411764, 11.7928708);
var centerMarker = L.marker(centerPoint, { title: 'unselected' });
centerMarker.addTo(map);

centerMarker.on('click', function(e) {
    centerMarker.setIcon(bigIcon);
}); 
```

演示（对中心和阴影等使用有些草率的设置）：

[http://jsfiddle.net/pX2xn/4/](http://jsfiddle.net/pX2xn/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-20T19:42:29.853

虽然这是一个老问题，但如果有人正在寻找答案以外的另一种可能的选择。

```
L.marker([coord.latitude, coord.longitude], {
    color: 'red',
    icon: getIcon(), 
    data: coord
}).addTo(myMap).on("click", circleClick);

function getIcon(total_dead_and_missing) {
    var icon_size = [50, 50];   //for dynamic icon size, 
    var image_url = '1.png';        //for dynamic images

    L.icon({
        iconUrl: image_url,
        shadowUrl: 'leaf-shadow.png',

        iconSize:    icon_size , // size of the icon
        shadowSize:   [50, 64], // size of the shadow
        iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
        shadowAnchor: [4, 62],  // the same for the shadow
        popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
    });
} 
```

资源：[https ://leafletjs.com/examples/custom-icons/](https://leafletjs.com/examples/custom-icons/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-13T00:15:20.607

根据@m13r 的建议，我发布了一个关于如何创建大尺寸图标副本的新答案。

```
/// Returns a scaled copy of the marker's icon.
function scaleIconForMarker(marker, enlargeFactor) {
  const iconOptions = marker.options.icon.options;

  const newIcon = L.icon({
    iconUrl: iconOptions.iconUrl,
    iconSize: multiplyPointBy(enlargeFactor, iconOptions.iconSize),
    iconAnchor: multiplyPointBy(enlargeFactor, iconOptions.iconAnchor),
  });

  return newIcon;
}

/// Helper function, for some reason, 
/// Leaflet's Point.multiplyBy(<Number> num) function is not working for me, 
/// so I had to create my own version, lol
/// refer to https://leafletjs.com/reference.html#point-multiplyby
function multiplyPointBy(factor, originalPoint) {
  const newPoint = L.point(
    originalPoint[0] * factor,
    originalPoint[1] * factor
  );

  return newPoint;
} 
```

用法很简单：

```
 marker.on("click", function () {
    // enlarge icon of clicked marker by (2) times, other markers using the same icon won't be effected
    const largeIcon = scaleIconForMarker(marker, 2);
    marker.setIcon(largeIcon);

  }); 
```

这样您只需放大您单击的标记的图标，刷新后其他标记将保持不变。

# javascript - BMI 计算语法与动态内部的 javascript

> ID：16038154
> 
> 赞同：2
> 
> 时间：2013-04-16T13:17:59.373
> 
> 标签：javascript, dynamics-crm-2011, microsoft-dynamics, calc

我想创建一个简单的 BMI 计算器（MS Dynamics 2011）

我有 3 个字段：

```
1: persons height (precision 2 - decimal formatted text box)
2\. persons weight (precision 2 - decimal formatted text box)
3\. BMI result - This field will display the BMI result. (also precision 2 - decimal) 
```

我相信我需要检查两个字段 1 和 2 上的 oncreate 事件，以启动一个 javascript 函数来执行计算。但是，我对动态和 java 脚本都很陌生，需要一些帮助。

我认为这些方面的事情可能很接近。有人可以帮忙吗？

```
function BMICheck()
{
var Bmiresult = weight/(height/100*height/100);
Xrm.Page.getAttribute("new_bmiresulttextbox").setValue((Math.round(Bmiresult*100)/100).toString(    ));

} 
```

我想我理解逻辑OK，语法是我的主要问题。

谢谢！

用javascript更新答案：

```
function BMICheck()
{

var Bmival = Xrm.Page.getAttribute("crm_heightbox_decimal")/("crm_weightbox_decimal")/100*("crm_weightbox_decimal")/100);
 Xrm.Page.getAttribute("crm_bmiresultbox").setValue((Math.round(Bmival*100)/100));

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:28:47.143

您的 javascript 对我来说看起来不错。.toString() 是不必要的。

关于 javascript 和 CRM 的一个有用说明是使用 F12 在 IE 中调试您的 javascript。您可以设置断点并查看到底发生了什么。

如果它产生错误，请将其包含在您的问题中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:33:43.547

1.  了解解决方案如何工作并通过解决方案工作：http://www.dynamicscrmtrickbag.com/2011/05/28/dynamics-crm-2011-solutions-part-1/
2.  将 JavaScript Web 资源添加到您的新解决方案
    *   打开您的解决方案或默认解决方案（通过自定义系统）
    *   单击网络资源
    *   点击新建

    *   单击文本编辑器并在
3.  将 Web 资源添加到表单
    *   打开形成
    *   单击表单属性
    *   将 Web 资源添加为库
4.  将 BMICheck 添加到关于身高和体重的 onChange 事件
    *   打开表格
    *   单击高度字段
    *   单击更改属性
    *   点击事件
    *   添加您的功能
    *   对权重字段重复
    *   注意：利用 Guido 的 null 检查来避免错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T13:52:34.193

javascript 没问题，除了`ToString`Daryl 已经指出的。我会添加一个检查`height`并`weight`防止空值（如果字段的最小值设置大于 0.00，则可以避免检查是否为正数）

```
function BMICheck()
{
    var weight = Xrm.Page.getAttribute("new_weight").getValue();
    var height = Xrm.Page.getAttribute("new_height").getValue();
    if (weight != null & height != null) {
        var bmi = weight/(height/100*height/100);
        Xrm.Page.getAttribute("new_bmi").setValue(Math.round(bmi*100)/100);
    }
    else {
        alert("Need to insert Weight and Height!");
    }
} 
```

# java - 一次将 gzip 文件读取到 byte[]

> ID：16038156
> 
> 赞同：2
> 
> 时间：2013-04-16T13:18:01.807
> 
> 标签：java, byte, gzipinputstream

在代码中

```
GZIPInputStream gzis= new GZIPInputStream(bais);
byte[] bBodyUnzipped= new byte[10240];
gzis.read(bBodyUnzipped); 
```

，如何通过知道文件解压缩长度来优化磁盘空间使用而不创建大字节[]？

根据[这个答案](https://stackoverflow.com/questions/7317243/gets-the-uncompressed-size-of-this-gzipinputstream)，没有这种方法。

这个想法是使用这个 byte[] 来调用

```
CharsetDecoder decoder = Charset.forName("UTF-8").newDecoder();
String sBodyUnzipped= decoder.decode(ByteBuffer.wrap(bBodyUnzipped)).toString(); 
```

出于这个原因，我需要一个包含所有内容且没有额外零的字节 []。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:28:50.493

你不能只使用 Apache commons IOUtils 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:22:48.287

读入一个较小的`byte`数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-28T10:31:39.883

```
public  byte[] readGZFile(File file) {

    byte[] fileData = null;
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    GZIPInputStream in = null;
    try {
        in = new GZIPInputStream(new FileInputStream(file));
        int bufsize=1024;
        byte [] buf=new byte[bufsize];
        int readbytes=0;
        readbytes=in.read(buf);
        while(readbytes!=-1){
            baos.write(buf, 0,readbytes);
            readbytes=in.read(buf);
        }
        baos.flush();
        return baos.toByteArray();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            in.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return fileData;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T14:52:41.253

我认为你想要这个：

```
 public void gzip(String path) {
            GZIPInputStream in = null;
            try {
                in = new GZIPInputStream(
                        new FileInputStream(new File(path)));
                byte[] read = new byte[in.available()];
                in.read(read);
                System.out.println(read);
            }catch (Exception e) {
                System.out.println(e);
            }
            finally {
                try {
                    in.close();
                }catch (Exception e) {
                    System.out.println(e);
                }
            }
        } 
```

有关更多信息，请参见：[http ://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T07:45:45.390

我还没有找到一次阅读所有内容的方法。另一种方法是按块读取：

```
 private static String unzip(GZIPInputStream gzis) {
    CharsetDecoder decoder = Charset.forName("UTF-8").newDecoder();
    byte[] bBodyUnzipped= new byte[1024];
    String sBodyUnzipped= null;
    int offset= 0;
    int bodyLength= 0;
    do {
        bodyLength= gzis.read(bBodyUnzipped, offset, 1024);
        sBodyUnzipped+= decoder.decode(ByteBuffer.wrap(bBodyUnzipped, 0, bodyLength)).toString();
        offset+= bodyLength;
    } while(bodyLength < 0);
    return sBodyUnzipped;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T13:31:00.033

如果 zip 包含二进制信息，您可以逐字节处理它

```
 InputStream is = new BufferedInputStream(new GZIPInputStream(
            new FileInputStream("zip")));
    for (int b; (b = is.read()) != -1;) {
        // process byte
    } 
```

如果 zip 是文本，则逐行处理它，例如

```
 Scanner sc = new Scanner(new GZIPInputStream(new FileInputStream("zip")));
    while(sc.hasNextLine()) {
        String line = sc.nextLine();
        // process line
    } 
```

# cordova - Phonegap，Android中的jQuery Mobile，面板下的下拉菜单

> ID：16038158
> 
> 赞同：1
> 
> 时间：2013-04-16T13:18:08.907
> 
> 标签：cordova, jquery-mobile

有没有人遇到过面板出血下拉菜单的问题？它只发生在下拉菜单中，普通按钮很好。基本上，面板隐藏了下拉菜单，但仍然可以单击它。

我正在使用 Phonegap 和 Android，还没有机会在 iPhone 上进行测试。

这是面板：

```
<div data-role="panel" id="panel-tools" data-display="overlay" data-theme="a" data-position="right">
... 
```

和下拉列表：

```
<div class="ui-grid-b">
                <div class="ui-block-a"><select name="select-axis-x" id="axis-x" data-mini="true"></select></div>
                <div class="ui-block-b"><select name="select-axis-y" id="axis-y" data-mini="true"></select></div>           
                <div class="ui-block-c"><a data-role="button" href="#" id="reload-graph" data-mini="true">RELOAD</a></div>
            </div> 
```

# html - 将细胞彼此相邻放置，而不是彼此下方

> ID：16038159
> 
> 赞同：0
> 
> 时间：2013-04-16T13:18:10.470
> 
> 标签：html, css, cells

我目前正在做一个项目，我需要使表格的单元格如下所示：

```
|       |   [Cell One] [Cell Two]
| Image | 
|       | [Cell Three] [Cell Four] 
```

尽管谷歌搜索并阅读了我的教科书，但我似乎找不到这样做的方法，因为我的代码告诉我这样做：

```
|       | [ Cell One]
|       | [ Cell Two]
| Image | [ Cell Three] 
|       | [ Cell Four] 
```

有没有办法用 CSS 语法、HTML 标记或我错过的那种程度的东西来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:27:47.153

也许你忘记了 < tr> 标签，正确的表格语法：

```
<img style="float:left" src="images/custom_br.png" alt="img">
<table style="float:left" border="1">
    <tr>
        <td>row 1, cell 1</td>
        <td>row 1, cell 2</td>
    </tr>
    <tr>
        <td>row 2, cell 1</td>
        <td>row 2, cell 2</td>
    </tr>
</table> 
```

这可以按您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:27:53.680

您需要使用 rowspan 以使其以 HTML 方式工作，如下所示：

```
<table>
  <tr>
    <td rowspan="4"><!-- Image here --></td>
    <td rowspan="1"></td>
  </tr>
  <tr>
    <td rowspan="1"></td>
  </tr>
  <tr>
    <td rowspan="1"></td>
  </tr>
  <tr>
    <td rowspan="1"></td>
  </tr>
</table> 
```

在此处查看 jsFiddle：http: [//jsfiddle.net/dhvnP/](http://jsfiddle.net/dhvnP/)

您也可以做类似的事情，但请注意布局纯粹是为了说明您可以使用它并使其适合您，如果您确实正在制作布局，我更喜欢无表格布局：[http://jsfiddle .net/NRsbV/](http://jsfiddle.net/NRsbV/)

# c# - 如何使用 Linq 读取 XML

> ID：16038168
> 
> 赞同：2
> 
> 时间：2013-04-16T13:18:29.140
> 
> 标签：c#, xml, vb.net, linq, dataset

我有一个查询数据库并报告结果的程序。这是我的查询：

```
Select Service, Total
From Services
Where dtcreated between @startdate and @enddate 
```

名为的数据集`dataset`将此报告给`reportviewer1`

然后我有一个 xml 文件，这里是 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Database.-->
<config>
    <goals>
           <service1>4</service1>
           <service2>3</service2>
        </goals>
</config> 
```

xml（位置`C:\config.xml`）报告给`Reportviewer2`

我想做的是通过电子邮件发送查询结果以及 xml 文件中的服务目标值。我可以使用 LINQ 将要从数据集中通过电子邮件发送的表格放在一起，我的代码如下：

```
Dim xelement As XElement = xelement.Load("C:\Config.xml")
Dim employees As IEnumerable(Of XElement) = xelement.Elements()

    Dim test = _
    <html><body><table><tr><th>Service</th><th>Total Sold</th><th>Goals</th></tr>
        <%= From service In Me.Dataset.datatable.AsEnumerable _
            Select <tr><td><%= service.Service_Category.ToString %></td>
                       <td><%= service.Total_Sold.ToString %></td>
                       <%= From XMLFile In xelement.Descendants("goals").AsEnumerable _
                           Select <td><%= XMLFile.Descendants("goals").Value %></td> %></tr> %>
        </table></body></html> 
```

现在我想做的是在同一个表中包含 XML 文件的值，以便在上面的数据构建中的第三列中报告。如您所见，第三列我想成为“目标”，它应该显示 4，然后根据我的配置文件显示 3。如何在上面的 Linq 和 HTML 构建中包含我的 xml 文件的值？这是我的输出当前的样子：

```
Service Total Sold  Goals
Service1       51   
Service2       12 
```

如您所见，我在配置文件中缺少“4”和“3”。

这是我希望输出的样子：

```
Service Total Sold  Goals
Service1    51            4
Service2    12            3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:01:04.350

您可以使用 Linq to XML 来完成此操作（希望对象已经存在，或者您可以创建一个对象），使用 linqpad 来正确获取查询。

获取xml文档的代码

```
 private static XDocument GetXmlDataFromFileName(string fileName)
            {
                // read the xml file into memory
                return XDocument.Load(new FileStream(String.Format(@"C:\<some path>\{0}.xml", fileName), FileMode.Open));
            } 
```

.Value 的扩展方法，因此它不需要修剪结果，但我用它来处理末尾的空格，或者如果值不存在空字符串。

```
public static class XmlExtensions
{
    public static String ValueTrim(this XElement element)
    {
        return element != null ? element.Value.Trim() : "";
    }
} 
```

将xml数据读入对象的代码

```
 // read the xml file into memory
            var doc = GetXmlDataFromFileName("FormsPersistence");
            var data = (from attrib in doc.Descendants("FormsPersistenceDs").Descendants("Properties")
                        select new FormsPersistence
                        {
                            Id = Guid.NewGuid(),
                            FormName = attrib.Element("FormName").ValueTrim(),
                            ControlName = attrib.Element("ControlName").ValueTrim(),
                            Property = attrib.Element("Property").ValueTrim(),
                            PropertyValue = attrib.Element("PropertyValue").ValueTrim()
                        }).ToList(); 
```

文件模板

```
<?xml version="1.0" standalone="yes"?>
<FormsPersistenceDs>
  <Properties>
    <FormName>Form1</FormName>
    <ControlName>mainNaviBar</ControlName>
    <Property>Width</Property>
    <PropertyValue>275</PropertyValue>
  </Properties>
</FormsPersistenceDs> 
```

# delphi - Delphi Firemonkey 3D：如何更改 3D 对象旋转的原点？

> ID：16038169
> 
> 赞同：1
> 
> 时间：2013-04-16T13:18:29.183
> 
> 标签：delphi, 3d, rotation, firemonkey

当用户按住 LMB 并移动鼠标时，立方体会旋转。我使用假人作为一种“锚”，以便相机保持在同一个位置，但物体旋转，所以可以看到所有侧面旋转对象（这是一个立方体）。问题是物体旋转后，它的 x 和 y 保持不变，因此相同的运动会从相机的角度产生不同的效果。例如，如果我向上旋转 180 度（y），则 x 轴的旋转是镜像的，因为向左移动鼠标会沿相反的方向旋转，就像在 180 度旋转之前一样

这是我的代码：

表单创建：

```
procedure TForm2.Form3DCreate(Sender: TObject);
begin
Xf := 0;
Yf := 0;
Xi := 0;
Yi := 0;
Xd := 0;
Yd := 0;
end; 
```

开始按钮：

```
procedure TForm2.btnStartClick(Sender: TObject);    
begin
layerStart.Visible := False;
Controller := TController.create(Form2,10);
Camera1 := TCamera.Create(Controller.getAnchor);
Camera1.Parent := Controller.getAnchor;
Anchor := Controller.getAnchor;
Timer1.Enabled := True;

end; 
```

创建对象和“锚”：

```
Type
 tController = class
   private
     cubeArray : Array[1..10,1..10,1..10]  of TCube;
     fCubeCount, fHalf : integer;
     fForm : TForm3D;
     bigCube : tDummy;
   public
    constructor create(Form : TForm3D; cubeCount :integer);
    function getAnchor : tDummy;

 end;

implementation

{ tController }

constructor tController.create(Form: TForm3D; cubeCount: integer); //cubeCount Max 10, min 1
var
  x, y, z : Integer;
begin
fCubeCount := cubeCount;
fForm := Form;
fHalf := cubeCount div 2;
bigCube := TDummy.Create(Form);
With bigCube do
         begin
           Visible := True;
           Position.X := 0;
           Position.Y := 0;
           Position.Z := 0;
           Parent := Form;
         end;

for x := 1 to fCubeCount do
 begin
  for y := 1 to fCubeCount do
   begin
    for z := 1 to fCubeCount do
     begin
       CubeArray[x,y,z] := TCube.Create(bigCube);
        With CubeArray[x,y,z] do
         begin
           Visible := True;
           Width := 0.5;
           Height := 0.5;
           Depth := 0.5;
           Position.X := x - 0.5 - fHalf;
           Position.Y := y - 0.5 - fHalf;
           Position.Z := z - 0.5 - fHalf;
           Parent := bigCube;
         end;
        end;
    end;
   end;

 end;

function tController.getAnchor: TDummy;
begin
result := bigCube;
end;

end. 
```

定时器：

```
procedure TForm2.Timer1Timer(Sender: TObject);
begin

// X on Form to Left = 60; X on form to right = 1280
  while GetAsyncKeyState(VK_LBUTTON) = -32768  do
   begin
    Xi := Screen.MousePos.X;
    Yi := Screen.MousePos.Y;
    Sleep(1);
    Xf := Screen.MousePos.X;
    Yf := Screen.MousePos.Y;

    Xd := (Xi-Xf);
    Yd := (Yi-Yf)*-1;// *-1 for compliance with Cartesian plane logic

    Xd := (Xd / 1220)*360*10; //COnverting from X units to degrees, *10 for more rotation per amount moved by mouse
    Yd := (Yd / 1220)*360*10;

Anchor.RotationAngle.Y := Anchor.RotationAngle.Y + Xd;
Anchor.RotationAngle.X := Anchor.RotationAngle.X + Yd;
Application.ProcessMessages;

   end;

   end; 
```

我要旋转的对象是由所有较小的立方体组成的立方体。据我所知，这个问题源于锚在旋转后相对于立方体保持不变的事实，即旋转的原点随着旋转的对象移动。我将如何解决这个问题？

# android - org.xmlpull.v1.XmlPullParserException：二进制 XML 文件第 5 行： 需要有效的 9-patch 源图像

> ID：16038174
> 
> 赞同：0
> 
> 时间：2013-04-16T13:18:43.267
> 
> 标签：android, android-xml, seekbar, nine-patch

我想创建一个自定义搜索栏。连同其他资源，我遵循了这两个示例：

[http://developer-dot-android.blogspot.ro/2012/03/custom-seekbar-tutorial.html](http://developer-dot-android.blogspot.ro/2012/03/custom-seekbar-tutorial.html)

[http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/](http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/)

[http://code.google.com/p/android-apktool/wiki/9PatchImages](http://code.google.com/p/android-apktool/wiki/9PatchImages)

我尝试过的所有内容都在这一行崩溃：

```
 ........
  <nine-patch
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true"
    android:src="@drawable/whitepatch">
  </nine-patch> 
```

和：

```
Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #5: <nine-patch> requires a valid 9-patch source image
04-16 15:46:45.242: E/AndroidRuntime(20508):    at android.graphics.drawable.NinePatchDrawable.inflate(NinePatchDrawable.java:320)
04-16 15:46:45.242: E/AndroidRuntime(20508):    at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881)
04-16 15:46:45.242: E/AndroidRuntime(20508):    at android.graphics.drawable.LayerDrawable.inflate(LayerDrawable.java:165)
..... 
```

我尝试使用`draw9patch.bat`来自 sdk 的工具生成我自己的 9-patch 图像，如此处[所述。](http://developer.android.com/tools/help/draw9patch.html)（没有任何其他解决方法，因为我不知道如何，只需导入`.png`然后将其另存为`.9.png`）。

我尝试将`whitepatch.9.png`第一个教程中使用的复制/粘贴到我的项目中。结果相同。我真的不知道该怎么办。请帮我！

![在此处输入图像描述](https://i.stack.imgur.com/qeica.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:34:16.403

九个补丁图像是扩展名为 9.png 的 PNG 图像。九个补丁图像包含有关可缩放区域（顶部和左侧）和内容区域（右侧和底部）的元信息。您必须通过在顶部和左侧标记 1 个像素（黑色）来提及强制可缩放区域，不包括缩放时扭曲的角，否则 Android 不会将其识别为九补丁图像。

下面的链接会更有帮助

[http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

[http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

[https://github.com/chrislondon/9-Patch-Image-for-Websites/wiki/What-Are-9-Patch-Images](https://github.com/chrislondon/9-Patch-Image-for-Websites/wiki/What-Are-9-Patch-Images)

[http://www.androiddom.com/2011/05/android-9-patch-image-tutorial.html](http://www.androiddom.com/2011/05/android-9-patch-image-tutorial.html)

# angularjs - 角度资源，指令问题

> ID：16038177
> 
> 赞同：1
> 
> 时间：2013-04-16T13:18:52.663
> 
> 标签：angularjs

我不太了解 Angular 中用于自定义指令的所有内容，

我在这里做了一个示例指令：http: [//plnkr.co/edit/OZjg6sUgl35GIriaabQg ?p=preview](http://plnkr.co/edit/OZjg6sUgl35GIriaabQg?p=preview)

我预计该`ul`列表会增长，但该`show-card`指令似乎不起作用。我希望`card.value`显示在每个`li`.

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:27:21.620

当你定义你的指令时，你必须使用驼峰式大小写，所以`<show-card ...>`会有 name `.directive('showCard' ...`，而不是`.directive('show-card' ...`（参见[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)）

# matlab - 如何绘制变量之间的关系matblab

> ID：16038179
> 
> 赞同：0
> 
> 时间：2013-04-16T13:18:55.447
> 
> 标签：matlab, graph

我有 2 个值，并想根据约束绘制关系

值 1

2

值 2

0.2500

其中 x 轴将引用 val 1，y 轴将引用 val 2

这个想法是显示 x 和 y 之间的关系，这样如果 x 增加，y 也会增加（二甘醇线）

我还想设置一个 1 的约束（一条横过 y 轴的线，说明一个切点）

我将如何在 matlab 中说明这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:32:49.220

这里有一个例子

```
x = 0:.0001:1;
y = 2*x;
constr = ones(size(y));
plot(x,y,'r','LineWidth',1.0), hold on,  plot(x,constr,'g','LineWidth',1.0), hold off, grid on; 
```

结果plor如下：

![在此处输入图像描述](https://i.stack.imgur.com/bkmUH.png) **编辑**

你试过吗

```
plot(val1,val2,'-or')
stem(val1,val2) 
```

也？我可以想象这个点（val1，val2）。否则我错过了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:29:08.843

已编辑。我还从@fpe answer复制了有关约束的部分。如果行已排序，它将正常工作。

```
row = [1, 2, 3, 4, 5, 6];
col = [1, 4, 9, 7, 2, 4];
constr = ones(size(row));
subplot(2,1,1); plot(row, col, 'o', row, col, row, constr);
borders = size(row);
new_row = row(borders(1)):0.25:row(borders(2));
new_col = spline(row, col, new_row);
subplot(2,1,2); plot(row, col, 'o', new_row, new_col, row, constr); 
```

![在此处输入图像描述](https://i.stack.imgur.com/bpHFL.png)

第一张图片只是来自数据，第二张图片是用样条线创建的。

# php - DISTINCT 函数不能与 $wpdb 联机工作

> ID：16038180
> 
> 赞同：0
> 
> 时间：2013-04-16T13:18:55.787
> 
> 标签：php, mysql, wordpress

我有一个查询，它从现有的 opencart 网上商店数据库中获取一些数据。

小问题是我使用 DISTINCT 在本地解决的双倍结果。在我在我的 wordpress 网站上使用在线查询之前，它运行良好。结果再次翻倍，无论使用 distinct。

唯一的区别是我在本地使用 mysql() 查询在一个普通的 php 文档中，但是在线我在 wordpress 侧边栏文件中使用了 $wpdb 语句。

数据库是一样的。

**当地的：**

```
$preq = "
SELECT DISTINCT
    product.product_id as proid,
    product.image as proimg,
    product_description.name as proname 
FROM
    product, product_description
WHERE
    product_description.product_id = product.product_id
    AND FIND_IN_SET(product.product_id, ( SELECT value FROM setting where `key` = 'featured_product' ) )
";

if($res=mysql_query($preq)) {

while ($rss = mysql_fetch_array($res)) {

echo $rss['proid'];
echo "<br/><br/>";

}

} 
```

**在线的：**

```
$mydb= new wpdb(/connection info/);
            $rows = $mydb->get_results(
                "
                SELECT DISTINCT
                product.product_id as proid,
                product.image as proimg,
                product_description.name as proname 
                FROM
                product, product_description
                WHERE
                product_description.product_id = product.product_id
                AND FIND_IN_SET(product.product_id, ( SELECT value FROM setting where `key` = 'featured_product' ) )
                "
            );
            echo "<div id='fp_content'>";
            foreach ($rows as $obj) {
            echo $obj->proid;
            echo '<br/>';
            }
            echo "</div>"; 
```

一切正常，除了**重复**。

**结果：**

```
Locally:
Values in "value" column: 28,40,42,43,46,47,49

Results:
28

40

42

43

46

47

49

----------------------

Online:
Values in "value" column: 50,51,52

Results:
50
50
51
51
52
52 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:29:50.763

您的查询确实只返回非重复值：

```
SELECT DISTINCT
     product.product_id as proid,
     product.image as proimg,
     product_description.name as proname 
FROM
     product, product_description
WHERE 
```

但只有您的字段 product.image 或 product_description.name 会有所不同。

# python - Django 管理员在内联管理类中获取父模型的类名

> ID：16038181
> 
> 赞同：0
> 
> 时间：2013-04-16T13:18:56.690
> 
> 标签：python, django, django-admin

下面是一个工作代码。我正在使用通用字段创建可以具有多个图像的模型。我在管理员端使用内联。我需要一种在 inlineAdmin 类中获取模型（可以有多个图像）类名的方法，以使该系统更具可移植性...

```
#model mediaalbums
class MediaAlbum(models.Model):
    content_type = models.ForeignKey(ContentType, null=True, blank=True)
    media_type = models.CharField(max_length=5, choices= MEDIA_TYPE_CHOICES ) 
    name = models.CharField(unique = True, max_length=50)

class ModelImage(Media): 
    album = models.ForeignKey(MediaAlbum, null=True, blank=True, limit_choices_to = {'media_type': 'image'})
    file = ImageField(upload_to=get_path) 
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id') 

#model sections
class Work(models.Model):
    images = generic.GenericRelation(ModelImage)

#admin
class ModelImageInline(generic.GenericStackedInline):
    model = ModelImage
    def formfield_for_foreignkey(self, db_field, request=None, **kwargs):
        field = super(ModelImageInline, self).formfield_for_foreignkey(db_field, request, **kwargs)
        if db_field.name == 'album':
                # for now i am getting the model's (that can have any number of images )           class name from the model's admin class' request object
                # but i do not want to get it from there
                className = request.className
                field.queryset = field.queryset.filter(content_type__name=className)    #building__exact = request._obj_
        return field

class WorkAdmin(TranslationAdmin):
    inlines = [ModelImageInline ]
    def get_form(self, request, obj=None, **kwargs):
        # pass the class name to inline class
        request.className = 'work'
        return super(WorkAdmin, self).get_form(request, obj, **kwargs) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:28:47.467

答案： `self.parent_model.__name__` 在内联类中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:16:22.477

```
parent_class = db_field.rel.to
parent_meta = parent_class._meta
app_label, object_name = parent_meta.app_label, parent_meta.object_name 
```

# ios - Mac 和 iOS 框架的命名约定是什么？

> ID：16038182
> 
> 赞同：8
> 
> 时间：2013-04-16T13:18:56.820
> 
> 标签：ios, macos, naming-conventions

或者换一种说法：

Mac 和 iOS 框架中的“Kit”、“Toolbox”、“Core”和“Foundation”前缀/后缀命名约定是什么？

通过 Apple 的框架，这些前缀和后缀似乎遵循一种模式，但我[在文档](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/OSX_Technology_Overview/CocoaApplicationLayer/CocoaApplicationLayer.html)中没有找到任何解释确切差异的内容。这是我看到的基本模式：

*   **基础**- 低级，C/Objc
*   **核心**- 中，C/Objc
*   **工具箱**- 一般服务
*   **套件**- 高，Objc

还有一些这些名称的混合，我猜这意味着框架是两个抽象级别之间的混合。例如**Core Foundation**和**Core Audio Kit**。

流行的第三方框架是否也非常严格地遵循这些约定？RestKit 非常适合，因为它是高级别的，但 CorePlot 似乎如果不是因为谷歌与同名 javascript 库发生冲突，CoreKit 会更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T16:57:17.873

我不会将其命名为约定，它与可可体系结构有关。我将尝试使用 iOS 架构来回答，但对于 Mac 来说也是如此。

iOS 在架构上分为 4 个主要层

*   核心操作系统：基本上不是内核
*   核心服务：这是**Foundation**和**Core** Foundation 所在的地方，因此它操纵字符串、集合等。它还操纵 GPS 等硬件功能，在这里你会找到**核心**运动、**核心**位置，还有**系统**配置。该层也称为*核心框架层*，因为它处理操作系统的基本框架。
*   媒体：正如您可能猜到的那样，它处理媒体（音频、视频和图形）所以您会发现**Core** Graphics、**Core** Animation、**Core** Audio 等框架，还有**OpenGL** ES 和**AVFoundation**
*   Cocoa Touch：在这里您会找到支持应用程序的高级框架，其中一些框架是 UI **Kit**、Game **Kit**，还有 Message **UI**、Address Book **UI**，甚至是**iAd**或**Social**框架等单一名称

每一层都依赖于前一层。那么为什么苹果选择这些名字呢？好吧，通常他们使用*核心*一词来指代框架的基础（内核），通常这是直接操纵基本操作（在硬件中或从操作系统中）的低级框架。*一个明显的例子是 Foundation，它基本上是Core Foundation*或 AVFoundation的面向对象的包装器，它依赖于*Core Animation*、*Core Audio*和*Core Media*所以你可以看到 Foundation 后缀不是最低级别，它取决于架构。通常你会使用*工具箱这个词*为访问某些类型的外部文件/设备提供接口或支持管理它们。通常，当您提供一组可以在您的应用程序上开箱即用的工具时，您会使用工具*包这个词。*

简而言之，命名框架的目的是根据架构的设计来理解它所包含的类。但正如我之前所说，我不会说这是一个“惯例”，它更像是一个“良好实践”。

# ruby - 如何使用坚固性检查我的 git 存储库中是否有未提交的更改？

> ID：16038188
> 
> 赞同：5
> 
> 时间：2013-04-16T13:19:08.883
> 
> 标签：ruby, libgit2, rugged

如何使用[坚固](https://github.com/libgit2/rugged)性检查我的 git repo 中是否有未提交的更改？

就像[我如何以编程方式确定是否有未提交的更改？](https://stackoverflow.com/questions/3878624/how-do-i-programmatically-determine-if-there-are-uncommited-changes)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-08T00:33:01.577

哇。这个问题已经有一段时间了，但我想我会投入 2 美分，因为我`Rugged`目前正在使用学习/使用。

现在有一种方便的方法[`Repository#diff_workdir`](http://www.rubydoc.info/github/libgit2/rugged/Rugged/Repository#diff_workdir-instance_method)。

假设您想将工作目录与最后一次提交进行比较（相当于我认为只是一个普通的 old `git diff`）。您可以通过以下方式获得：

```
repo.diff_workdir(repo.last_commit) 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:59:15.297

你也这样做。询问状态或差异 HEAD 和工作树之间是否有变化。

Rugged 尚未合并差异支持，因此您必须使用 status。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T12:23:38.893

最近添加了差异支持。您可以从 github 拉取最新版本。

```
a = Rugged::Tree.lookup(repo, "806999").tree
b = Rugged::Tree.lookup(repo, "a8595c").tree

diff = a.diff(b)

deltas = diff.deltas
patches = diff.patches 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-09T07:12:00.067

你可以得到类似于`git status`using的东西[`Repository#status`](http://www.rubydoc.info/github/libgit2/rugged/Rugged%2FRepository%3Astatus)。

如果您只想检查是否有任何未暂存的更改：

```
repository.to_enum(:status).any? 
```

# java - Abnormal phenomenon for Comparable in Java

> ID：16038192
> 
> 赞同：0
> 
> 时间：2013-04-16T13:19:21.713
> 
> 标签：java, comparable

When I write a `RankedObject` class which implements `Comparable<RankedObject>`:

```
public static class RankedObj implements Comparable<RankedObj>      {
    int i;
    public RankedObj(int i)     {
        this.i=i;
    }

    @Override
    public String toString() {
        return "RankedObj [i=" + i + "]";
    }

    @Override
    public int compareTo(RankedObj o) {
        if(this.i == 3)     {  // '3' will always be the smallest item
            return -1;
    }
    return this.i-o.i;
} 
```

I want to make the list of RankedObject "in ascending order on the whole, at the same time, the number `3` to always be the `smallest` one". When testing, I found the order of the original list really affects the result, and the result is not correct in some cases. Namely:

```
//----CASE 1----
List<RankedObj> list = new ArrayList<>();
list.add(new RankedObj(11));
list.add(new RankedObj(1));
list.add(new RankedObj(12));
list.add(new RankedObj(3));
list.add(new RankedObj(8));
Collections.sort(list);
System.out.println(list);

//output (as I intend)
[RankedObj [i=3], RankedObj [i=1], RankedObj [i=8], RankedObj [i=11], RankedObj [i=12]]

//----CASE 2----
List<RankedObj> list = new ArrayList<>();
list.add(new RankedObj(11));
list.add(new RankedObj(12));
list.add(new RankedObj(3));
list.add(new RankedObj(8));
list.add(new RankedObj(1));
Collections.sort(list);
System.out.println(list);

//output (not what my Comparable intends)
[RankedObj [i=1], RankedObj [i=3], RankedObj [i=8], RankedObj [i=11], RankedObj [i=12]] 
```

Could anyone tell my why? as well as how can I realize the purpose of making the list in ascending order on the whole while '3' being the smallest item? Thanks a lot!

**P.S.** According to my test using a `Comparator` in which the code is the same as the code in `Comparable`, the result is the same:

```
Collections.sort(list, new Comparator<RankedObj>() {
    @Override
    public int compare(RankedObj o1, RankedObj o2) {
        if(o1.i == 3)       {
            return -1;
    }
    return o1.i-o2.i;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:23:01.827

Your comparison isn't symmetric.

Consider these two calls:

```
RankedObj x = new RankedObj(1);
RankedObj y = new RankedObj(3);
System.out.println(x.compareTo(y)); // -2
System.out.println(y.compareTo(x)); // -1 
```

They *should* both give an answer of 0, or give answers with opposite signs. Instead, they'll both return a negative value - because in the first call, `o1.i` is 1 (not 3) so it will fall back to `o1.i - o2.i` - which is still negative.

Additionally, you have a problem that if you have a very strongly negative value, when you subtract a strongly positive value from it, the subtraction will overflow.

You need to fix it to be symmetric *and* to avoid overflow. This should do it:

```
@Override
public int compareTo(RankedObj o) {
    // Handle equality first
    if (this.i == o.i) {
        return 0;
    }
    // Handle the magic value correctly on *both* sides
    if(this.i == 3) {
        return -1;
    }
    if (o.i == 3) {
        return 1;
    }
    // Fall back to normal comparsions
    return Integer.compare(i, o.i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:24:06.630

Try:

```
@Override
public int compare(RankedObj o1, RankedObj o2) {
    if(o1.i == o2.i){       {
        return 0;
    } else if(o1.i == 3)       {
        return -1;
    } else if (o2.i == 3){
        return 1;
    }
return o1.i-o2.i;
} 
```

The implemenation assumes you're only using small numbers which don't result in an overflow when subtracting one value from the other.

# wcf - WCF: Get the returning value of the WCF via WebGet Attribute

> ID：16038194
> 
> 赞同：1
> 
> 时间：2013-04-16T13:19:26.000
> 
> 标签：wcf

I have this code inside my WCF Interface:

```
[OperationContract]
        [WebGet(UriTemplate = "/GetData/", ResponseFormat = WebMessageFormat.Json)]
        string GetData(); 
```

And this inside my Service page:

```
public string GetData()
{
     return "Please help";
} 
```

I want to get the value of GetData function when I call it in url:

```
http://localhost: 12345/Services/MyWCF.svc/GetData/ 
```

After entering this url, I should be able to download the result inside the notepad due to JSON format. I'm not sure what went wrong with my WCF.

Please help!

Please let me know if I haven't make my question clear.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:42:45.830

The must use a specific binding & a web http behavior for this. Suppose my service is under WebApplication1.Services.MyWCF, the config should be :

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="MyServiceBehavior">
                <serviceMetadata httpGetEnabled="true"    />
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
        <endpointBehaviors>
            <behavior name="WebBehavior">
                <webHttp />
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <services>
        <service behaviorConfiguration="MyServiceBehavior" name="WebApplication1.Services.MyWCF">
            <endpoint address="" binding="webHttpBinding" behaviorConfiguration="WebBehavior" contract="WebApplication1.Services.IMyWCF"/>

        </service>
    </services>
</system.serviceModel> 
```

If you are under .Net 4, protocol mapping will also help you a lot. Look [here](http://www.codeproject.com/Articles/207338/Create-REST-Service-using-WCF).

# sql - concat sql查询>根据where子句在2个不同的列中显示相同的列

> ID：16038197
> 
> 赞同：0
> 
> 时间：2013-04-16T13:19:29.977
> 
> 标签：sql, union, concat

我希望在“WHERE”子句的两个不同列中显示相同字段的两个 sql 查询之间建立连接，如下例所示：

**查询 n° 1：**

```
SELECT  COUNT([ID]) AS SOCIETE_1,
        CAST([Créé le] AS date) AS DateCreated
FROM [MFilesCloudReport].[dbo].[Document]
WHERE [Société_ID] = 1
GROUP BY CAST([Créé le] AS date)
ORDER BY CAST([Créé le] AS date) 
```

-->**结果 n° 1：**

```
SOCIETE_1   DateCreated
-----------------------------------
142     |   2013-01-17
148     |   2013-01-21
88      |   2013-01-23
188     |   2013-01-25
187     |   2013-01-29
124     |   2013-01-31 
```

**查询 n° 2：**

```
SELECT  COUNT([ID]) AS SOCIETE_2,
    CAST([Créé le] AS date) AS DateCreated
FROM [MFilesCloudReport].[dbo].[Document]
WHERE [Société_ID] = 2
GROUP BY CAST([Créé le] AS date)
ORDER BY CAST([Créé le] AS date) 
```

-->**结果 n° 2：**

```
SOCIETE_2   DateCreated
-----------------------------------
18      |   2013-01-17
73      |   2013-01-21
75      |   2013-01-23
1       |   2013-01-24
48      |   2013-01-25
80      |   2013-01-29
43      |   2013-01-31 
```

预期的结果将是这个：

```
SOCIETE_1     SOCIETE_2     TOTAL       DateCreated
----------------------------------------------------------------------------
142         |   18      |   160     |   2013-01-17
148         |   73      |   221     |   2013-01-21
88          |   75      |   163     |   2013-01-23
0           |   1       |   1       |   2013-01-24
188         |   48      |   236     |   2013-01-25
187         |   80      |   267     |   2013-01-29
124         |   43      |   167     |   2013-01-31 
```

提前感谢您的帮助，祝大家有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:23:22.450

```
SELECT  COUNT(case when [Société_ID] = 1 then [ID] end) AS SOCIETE_1,
        COUNT(case when [Société_ID] = 2 then [ID] end) AS SOCIETE_2,
        COUNT(*) AS TOTAL,
        CAST([Créé le] AS date) AS DateCreated
FROM [MFilesCloudReport].[dbo].[Document]
GROUP BY CAST([Créé le] AS date)
ORDER BY CAST([Créé le] AS date) 
```

# command-line - Windows 命令提示符计算错误

> ID：16038199
> 
> 赞同：0
> 
> 时间：2013-04-16T13:19:30.180
> 
> 标签：command-line, windows-8

我正在使用 Windows 8 并想编写 bat 文件来记录任务运行的时间。所以我写这个：

```
@echo off
setlocal

SET STARTTIME=%TIME%

.....do sth. smart.....

SET ENDTIME=%TIME%
SET /A DURATION=%ENDTIME%-%STARTTIME%
SET /A DURATIONH=%DURATION%/360000
SET /A DURATIONM=(%DURATION%-%DURATIONH%*360000)/6000
SET /A DURATIONS=(%DURATION%-%DURATIONH%*360000-%DURATIONM%*6000)/100
SET /A DURATIONHS=(%DURATION%-%DURATIONH%*360000-%DURATIONM%*6000-%DURATIONS%*100)
if %DURATIONH% LSS 10 SET DURATIONH=0%DURATIONH%
if %DURATIONM% LSS 10 SET DURATIONM=0%DURATIONM%
if %DURATIONS% LSS 10 SET DURATIONS=0%DURATIONS%
if %DURATIONHS% LSS 10 SET DURATIONHS=0%DURATIONHS%
echo ------------------------------------------------------------------------------------------
echo task start time : %STARTTIME%
echo task end time : %ENDTIME%
echo task end in time : %DURATIONH%:%DURATIONM%:%DURATIONS%,%DURATIONHS%
echo ------------------------------------------------------------------------------------------

endlocal

C:
PAUSE 
```

我运行它并通过但日志时间是（fe）：

```
task start time 14:35:36,24
task end time 14:39:43,55
task end in time : 00:00:00,14 
```

并在此显示错误缺少运算符：

```
SET /A DURATION=%ENDTIME%-%STARTTIME% 
```

你可以帮帮我吗？我正在搜索那个问题，但我找不到任何东西可以解决我的问题

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:56:25.113

您需要将时间字符串转换为秒 - 这并不容易。

幸运的是，由于您使用的是 24 小时制 - 这使得它更容易，但是编写数学增强功能的程序员出于某种奇怪的原因决定将带有前导零的字符串定义为八进制，因此 '08' 或 '09' 在子字符串将生成错误，因为 08/09 不是有效的八进制数...

所以 - 克服它的标准方法是在字符串前面加上一个“1”，然后减去 100。

下一个复杂之处是您将`,`其用作小数分隔符 - 这加剧了我们只能使用 INTEGER 数学的问题......

幸运的是，以前见过这样的事情。解决方案是**UGLY+**，但它有效。

```
@ECHO OFF
SETLOCAL
:: simply setting the start and end time to your posted values...
SET starttime=14:35:36,24
SET endtime=14:39:43,55
:: Here are some other value-pairs of interest (1) - elapsed = 8399,04
:: SET starttime=14:35:36,24
:: SET endtime=14:35:35,28
:: Here are some other value-pairs of interest (2) - elapsed = 0,04
:: SET starttime=14:35:36,24
:: SET endtime=14:35:36,28
:: Here are some other value-pairs of interest (3) - elapsed = 0,31
:: SET starttime=14:35:36,24
:: SET endtime=14:35:36,55
:: Here are some other value-pairs of interest (4) - elapsed = 7,31
:: SET starttime=14:35:36,24
:: SET endtime=14:35:43,55
CALL :CONVERT startsecs "%starttime%"
CALL :CONVERT endsecs "%endtime%"
ECHO SET /a elapsed=%endsecs% - %startsecs%
SET /a elapsed=endsecs - startsecs
IF %elapsed% lss 0 SET /a elapsed=%elapsed% + (24*360000)
IF %elapsed% lss 100 (IF %elapsed% lss 10 (SET elapsed=00%elapsed%) ELSE (SET elapsed=0%elapsed%))
ECHO elapsed TIME : %elapsed:~0,-2%,%elapsed:~-2%
::
GOTO :eof
en
:CONVERT
SET hundredths=%~2
SET /a %1=((((((1%hundredths:~0,2%) * 60) + 1%hundredths:~3,2%) * 60) + 1%hundredths:~6,2%) * 100) + 1%hundredths:~9,2% - 36610100
SET /a hundredths=((((((1%hundredths:~0,2% - 100) * 60) + 1%hundredths:~3,2% - 100) * 60) + 1%hundredths:~6,2% - 100) * 100) + 1%hundredths:~9,2% - 100
ECHO %2 %hundredths%
GOTO :eof 
```

为了便于测试，我包含了一些值对，以及关于使用您的约定所经过的时间的评论。

下班的第一辆出租车是处理逗号。逗号是默认分隔符，因此简单的方法是引用传递给`:convert`例程的时间参数。第一个参数是放置计算结果的变量的名称。

在例程中，变量`hundredths`设置为第二个参数（带引号的时间字符串）并删除引号 ( `%~2`)

然后进行适当的计算。暂时跳过该`SET /a %1=...`行，所需的计算显示在下面的`set hundredths=`行中。将提供的时间的每个子字符串用前导字符串`1`，减去 100 并依次乘以 60、60、100 以计算自午夜以来的百分之一秒。然后简单地显示该计算的结果。

我包括了完整的计算，因为它是分配给的简化计算的祖先`%1`。神奇的数字 36610100 只是八进制保护咒添加到计算中的常数的总和。

计算的完整版本可以被注释掉，因为它在转换机制中没有任何作用。结果`ECHO`的 最好删除 - 只是在评估期间显示结果。

将开始时间和结束时间转换为自午夜以来的百分之一后，减去即可获得经过的时间。如果结果小于 100，则决定要添加多少前导零，并显示结果“就像来自 PIC 9'sV99”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:36:29.430

您不能减去时间字符串，您需要先将`%STARTTIME%`and转换`%ENDTIME%`为秒，然后再计算`%DURATION%`. 只是给你一个提示：

```
set STARTTIME=%TIME%
set /A STARTTIME=%STARTTIME:~0,2%*3600+%STARTTIME:~3,2%*60+%STARTTIME:~6,2% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:05:45.860

试试这个，它计算 24 小时（也是午夜 1 倍）：

```
@echo off&setlocal
for /f "tokens=1-3delims=:," %%a in ("%time%") do (
    set /a "shr=(1%%a)-100"
    set /a "smin=(1%%b)-100"
    set /a "ssec=(1%%c)-100"
)
set /a startsec=%shr%*3600+%smin%*60+%ssec%
echo start at sec: %startsec%

ping -n 20 localhost >nul &rem .....do sth. smart.....

for /f "tokens=1-3delims=:," %%a in ("%time%") do (
    set /a "ehr=(1%%a)-100"
    set /a "emin=(1%%b)-100"
    set /a "esec=(1%%c)-100"
)
set /a endsec=%ehr%*3600+%emin%*60+%esec%
echo stop  at sec: %endsec%
if %startsec% leq %endsec% (set /a diffsec=%endsec%-%startsec%) else set /a diffsec=%endsec%+86400-%startsec%
echo running %diffsec% second(s^)
set /a ehr=(%diffsec%/3600)
set /a emin=(%diffsec%-(%ehr%*3600))/60
set /a esec=(%diffsec%-(%ehr%*3600)-(%emin%*60))
echo running for %ehr%h %emin%min %esec%sec 
```

# php - 错误：无法打开 PDF 文件“MJVQKFFGFEPBI.TMP”进行写入（权限被拒绝）

> ID：16038200
> 
> 赞同：1
> 
> 时间：2013-04-16T13:19:33.230
> 
> 标签：php, ubuntu, permissions, pdflib

我正在使用`pdflib`动态创建`pdf`文档`PHP`，但由于某种原因，我收到的错误消息是这样的

```
Error: Couldn't open PDF file 'MJVQKFFGFEPBI.TMP' for writing (permission denied) 
```

触发该行的错误是这个

```
if (!pdf_begin_document($this->p, $this->output_file, ($linearize ? 'linearize' : ''))) die('Error: ' . pdf_get_errmsg($this->p)); 
```

我的问题是如何获取权限被拒绝的目录的位置，或者此错误是否由任何其他原因触发？

相同的代码在我的服务器中有效，`ubuntu 12.04`但在我的服务器中无效`12.10`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-21T11:35:17.773

我刚刚从 PDFlib 的 Rainer Plöckl 那里得到信息，当您使用or时，您需要指定`inmemory`和/或 - 选项。默认情况下，pdflib 尝试**在当前目录中打开一个临时文件，在该目录**中他的 webserver-user 可能无权创建新文件。`tempdirname``begin_document``linearize``optimize`

 **我遇到了同样的问题，`optimize`并通过使用以下代码规避了该问题：

```
pdf_begin_document($this->p, '', 'optimize=true tempdirname=' . sys_get_temp_dir()); 
```

之后一切正常。

[您可以在http://www.pdflib.com/fileadmin/pdflib/pdf/manuals/PDFlib-9.0.4-API-reference.pdf#page=48](http://www.pdflib.com/fileadmin/pdflib/pdf/manuals/PDFlib-9.0.4-API-reference.pdf#page=48)找到文档的相关部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:28:44.520

[`sys_get_temp_dir()`](http://www.php.net/manual/en/function.sys-get-temp-dir.php)告诉您临时文件的目录名称。您可以使用它来创建一个临时文件：

```
$filename = tempnam(sys_get_temp_dir()); 
```

然后作为第二个参数传递`$filename`给。`pdf_begin_document`**

# laravel - 在 Laravel 3 中 - 需要帮助传递嵌套数据

> ID：16038203
> 
> 赞同：0
> 
> 时间：2013-04-16T13:19:37.080
> 
> 标签：laravel, laravel-3

我在用户表中有用户的图片，我希望根据我发送的邀请访问这些图片。试图抓取与我发送的所有邀请相关的所有用户图片。我有一个这样的模型结构：

```
class User extends Eloquent
{

public static $table = 'users';
public static $accessible = array('username', 'email', 'picture', 'password');

public function nests()
{
    return $this->has_many('Nest');
} 
```

* * *

```
class Nest extends Eloquent
{

public static $table = 'nests';

public function user()
{
    return $this->belongs_to('User');
} 
```

* * *

```
class Invite extends Eloquent
{

public static $table = 'invite';

public function nest()
{
    return $this->belongs_to('Nest');
} 
```

* * *

这是我的迁移：

```
{
    Schema::create('users', function($table) {
    // auto incremental id (PK)
        $table->increments('id');
    // varchar 32
        $table->string('username', 32);
        $table->string('email', 64);
        $table->string('picture');
        $table->string('password');
        $table->string('role');
    // boolean
        $table->boolean('true');
    // created_at | updated_at DATETIME
        $table->timestamps();   
    });
} 
```

* * *

```
 {
    Schema::create('nests', function($table) {
    // auto incremental id (PK)
        $table->increments('id');
    // varchar 32
        $table->string('nestname', 128);
        $table->text('info');
        $table->integer('user_id');
    // boolean
        $table->boolean('active');
    // created_at | updated_at DATETIME
        $table->timestamps();   
    });
} 
```

* * *

```
{
    Schema::create('invite', function($table) {

        $table->increments('id');
        $table->text('mypeeps');
        $table->integer('user_id');
        $table->integer('nest_id');
        $table->string('email', 128);
        $table->timestamps();   
    });
} 
```

这是我试图获取照片但它不起作用的方式：

```
 $users = DB::table('users')
    ->join('nests', 'nests.user_id', '=', 'users.id')
    ->join('invite', 'invite.nest_id', '=', 'nests.id')
    ->where_nest_id($id)
    ->get(array('users.picture', 'users.username')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:19:52.783

好吧，我试图猜测你的问题是什么，但我认为你的查询是错误的，你只获取了一个用户，因为我尝试了你的代码，这就是发生在我身上的事情。

您说要根据您发送的邀请来获取用户的图片，所以最简单的方法是将用户表与邀请表连接起来，但是在您放置的代码中，您的查询是基于嵌套的 id .

我更改了您的查询，以便根据nest 的ID 首先获取邀请的ID。然后，我进行了另一个查询，该过程在哪里加入带有邀请 ID 的用户表。

```
 // fetch the ids of invitation
 $inviteIds = DB::table('invite')
    ->join('nests', 'invite.nest_id', '=', 'nests.id')
    ->where_nest_id($id)
    ->get('invite.id');

 // There must be a better clean solution for this, but it works
 $ids = array();
 foreach($inviteIds as $id){
     $ids[] = $id->id;
 }

 // array of id of invites
 $users = DB::table('users')
    ->join('invite', 'invite.user_id', '=', 'users.id')
    ->where_in('invite.id', $ids)
    ->get(array('users.picture', 'users.username'));

 // show the users
 dd($users); 
```

# java - 尝试使用 Java 理解正则表达式中的“捕获组”

> ID：16038206
> 
> 赞同：5
> 
> 时间：2013-04-16T13:19:42.940
> 
> 标签：java, regex, capture

我正在学习 java OCP，目前我一直在理解[“捕获组”](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)部分。这是一种过于抽象的描述。您能否（如果您有时间）给我一些使用“捕获组”的真实示例？

有人可以为我提供以下陈述的具体示例吗？

> 捕获组是一种将多个字符视为一个单元的方法。它们是通过将要分组的字符放在一组括号内来创建的。例如，正则表达式 (dog) 创建一个包含字母“d”、“o”和“g”的组。与捕获组匹配的输入字符串部分将保存在内存中，以供以后通过反向引用调用（如下面的反向引用部分所述）。

我很确定只要我看到一个具体的例子，我就会明白。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T13:24:43.130

除其他外，正则表达式允许您获取与正则表达式的各个部分匹配的输入部分。有时您需要整场比赛，但通常您只需要其中的一部分。例如，这个正则表达式匹配`"Page X of Y"`字符串：

```
Page \d+ of \d+ 
```

如果你传递一个字符串

```
Page 14 of 203 
```

您将匹配整个字符串。现在假设您只想要`14`和`203`。没问题 - 正则表达式库允许您将两者括`\d+`在括号中，然后仅从匹配中检索`"14"`和`"203"`字符串。

```
Page (\d+) of (\d+) 
```

上面的表达式创建了两个*捕获组*。通过匹配模式获得的`Matcher`对象允许您单独检索这些组的内容：

```
Pattern p = Pattern.compile("Page (\\d+) of (\\d+)");
String text = "Page 14 of 203";
Matcher m = p.matcher(text);
if (m.find()) {
    System.out.println(m.group(1));
    System.out.println(m.group(2));
} 
```

这打印`14`和`203`.

[ideone 上的演示](http://ideone.com/KNbg1f)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:32:12.500

捕获组允许查询匹配器以找出与正则表达式的特定部分匹配的字符串部分，请参见以下示例：

```
String dateStr = "1981-06-25";

Pattern datePatt = Pattern.compile("([0-9]{4})/([0-9]{2})/([0-9]{2})");
...
Matcher m = datePatt.matcher(dateStr);
if (m.matches()) {
    int year  = Integer.parseInt(m.group(1));
    int month = Integer.parseInt(m.group(2));
    int day   = Integer.parseInt(m.group(3));
} 
```

变量年、月和日分别包含组 1、2 和 3 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:22:51.577

正是因为您想要跟踪比赛的某些部分。例如，如果您有正则表达式

`/^(http|ftp).*/`

你得到一个匹配，你可以查询该组的匹配，并判断它是 http 还是 ftp。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:26:16.083

例如采用正则表达式

```
cat (dog )?bus 
```

这将匹配字符串`cat dog bus`和`cat bus`. 那是因为整个`dog`部分都是可选的，因为`?`. 如果你没有用括号括起来，那么只有最后一个空格是可选的。

```
James while John (had )+a better effect on the teacher 
```

将匹配字符串

```
James while John had had had had had had had had had had had a better effect on the teacher 
```

因为它将匹配整个`had`字符串中的一个或多个。

您还可以对捕获组使用交替和反向引用（您还没有完全了解）。

```
(cat|dog) is a \1 
```

这`\1`是对在第一个捕获组中捕获的任何内容的引用。这将匹配`dog is a dog`and `cat is a cat`，但不匹配，`dog is a cat`反之亦然。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T13:26:33.910

[在这里](http://www.javamex.com/tutorials/regular_expressions/capturing_groups.shtml#.UW1RYapPIXA)您可以看到一些您可以轻松理解的代码示例。

基本上你`()`在比赛后所记得的。您可以看到与该组匹配的字符串。请记住，如果您进行第二次匹配，这些值将被第二次匹配替换，因此如果您需要它们，您需要在匹配后立即将它们保存在您定义的某个变量中。

# php - 使用 PHP 调用变量类而不使用 call_user_func

> ID：16038209
> 
> 赞同：0
> 
> 时间：2013-04-16T13:19:47.947
> 
> 标签：php, oop, class

有没有一种方法可以在不使用“call_user_func”且不使用 eval 的情况下调用类中的函数？

这就是我问的原因：

当我使用“call_user_func”时，我收到“$this not in context”错误：

```
$this->id = $selectId['id'];
$file = 'score_' . $this->sid . '.php'; //the file with the class

if (@include_once($file)) { //including the file

    $scoreClass = 'Score_' . $this->id;
    call_user_func($scoreClass .'::selectData', $this->user_id);
} 
```

我可以克服这个“不在上下文中”错误调用这样的函数：但现在我的名字不是变量。

```
$this->id = $selectId['id'];
$file = 'score_' . $this->sid . '.php'; //the file with the class

if (@include_once($file)) { //including the file

    $test = new Score_98673();
    $test->selectData($this->user_id);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:25:40.600

```
call_user_func(array($score, 'selectData'), $this->user_id); 
```

这是伪类型的正确语法`callable`。
[http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)

你也可以这样做，顺便说一句：

```
$method = 'selectData';
$score->$method($this->user_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:22:37.310

```
if (@include_once($file)) { //including the file
    $scoreClass = 'Score_' . $this->id;
    $test = new $scoreClass();
    $test->selectData($this->user_id);
} 
```

这就是你所要做的。因为您可以在使用`new`.

当您调用使用`$this`.

# jar - 罐子从 Tomcat7 lib 文件夹中消失

> ID：16038214
> 
> 赞同：0
> 
> 时间：2013-04-16T13:20:07.613
> 
> 标签：jar, tomcat7, missing-data

我在 Eclipse 中有一个 Java EE Web 项目，并在我的 Windows 7 PC 上安装了 Tomcat7。

有时，一些`jersey-server jars`从 Tomcat7 安装中的 lib 文件夹中消失。有时是其他罐子。如果我将丢失的 jar 从其他地方复制回 lib 文件夹并在 Eclipse 中重新启动 tomcat，我的服务将再次运行，否则它们会`class not found`在 tomcat 启动时遇到臭名昭著的错误。

这发生在我`localhost`的开发环境中的服务器上。我是这台开发机器的唯一用户，我不会删除它们 - 但有些东西是。

我在做什么，或者不这样做会导致罐子从 lib 文件夹中删除？我只是想弄清楚它为什么会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:45:38.367

Eclipse 服务器插件很可能会导致这种情况。根据部署时 Eclipse 中的 Web 项目配置，它管理相关服务器目录中的 Web 项目工件。在 Eclipse 中检查 web 项目构建路径、运行时设置和 Tomcat7 集成配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:21:57.893

我相信这与java或tomcat7无关。如果其他人管理您的服务器（服务器管理员），您应该咨询他。可能您有一个激进的偏执型防病毒软件！

尝试使用[ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)来调查此类行为。

# java - 用于更新 MS 单词页眉/页脚并转换为 PDF 的 Java API

> ID：16038215
> 
> 赞同：1
> 
> 时间：2013-04-16T13:20:08.737
> 
> 标签：java, pdf, ms-office, openxml, libreoffice

我需要一个 API 来支持更改 doc、docx、xls、xlsx 的页眉/页脚。我有一个为 libreoffice 编写的大量代码，但问题是最终文档的样式已损坏，这是一个大问题。其他开源项目也获得了类似的结果，所以我正在寻找一些可能像 Aspose 这样的付费版本，但您能否也给我其他解决方案。

问题的另一个方面是我需要从任何办公文档、邮件、味精到 pdf 的转换。

我也在寻找包括 C# 在内的解决方案，但很可能它将在 linux 下运行，因此首选 java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:03:38.170

使用 Aspose Java 组件，您可以更新文档的页眉/页脚并将所有支持的文件类型（doc、docx、xls、xlsx、eml、msg 等）转换为 PDF。我们尽量保持 PDF 的格式与原始文档相同。

您可以尝试自己探索[PdfSaveOptions](http://www.aspose.com/docs/display/wordsjava/PdfSaveOptions)类或将有问题的文件发布到[Aspose 论坛](http://www.aspose.com/community/forums/aspose.words-product-family/75/showforum.aspx)，技术支持将尝试解决问题。

PS。我是 Aspose 的开发人员/传播者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:32:28.800

使用 C# 我知道你可以访问 microsoft word com 对象。如果您在最新的 Microsoft Word 中加载所有这些内容，您可以告诉它在此处转换为 pdf 并完成[如何以编程方式将 Word 文件转换为 PDF？](https://stackoverflow.com/questions/607669/how-do-i-convert-word-files-to-pdf-programmatically)这就是我用来让我开始使用 C# 的方法。Apache POI，除了问题我什么都没有。在大多数情况下，我发现 Open Office 及其 UNO Api 对我有用，有时文档确实很时髦。所以总而言之，我发现 C# 是最好的。我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:22:49.853

根据您的要求，我只能想到 Aspose 和 IText，您可以查看一些示例代码，这将帮助您做出决定：

*   [如何使用 itext 将 doc 转换为 pdf 文件](https://stackoverflow.com/questions/10349396/how-to-convert-doc-to-pdf-file-using-itext)
*   [如何将文档转换为 PDF 使用 Aspose](http://www.aspose.com/docs/display/wordsjava/How+to++Convert+a+Document+to+PDF)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-08T06:07:48.250

poi api 的问题，请使用 3.10 final api，此错误已在此 api 中修复。[检查这个帖子](https://stackoverflow.com/questions/26250065/adding-footer-to-ms-word-using-poi-api/26250188#26250188)

在这篇文章中，这个问题得到了解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T08:59:12.680

[docx4j](http://www.docx4java.org/)可以做很多你想做的事。

它支持 docx、pptx、xlsx。

对于遗留的二进制文档和 xls，您可以使用 LibreOffice 或通过 JODConverter 的 OpenOffice 将它们转换为 docx/xlsx 格式。

docx4j 可以将 docx 转换为 PDF。保真度在 2.8.1 之后继续提高，因此您应该尝试每晚构建。

# c# - 如何在表格中插入图像路径

> ID：16038218
> 
> 赞同：1
> 
> 时间：2013-04-16T13:20:11.780
> 
> 标签：c#, asp.net, sql, sql-server

我有一个用以`employee`下列命名的表：

```
empid int (autoincrement,PK), 
empname varchar,
imagepath varchar 
```

我想插入`empid`, `empname`, 并且`imagepath`图像名称应该是自动递增 id 的值，例如`~/images/1.jpg`（这里 1 是该行的自动递增 id）

这是不是完美的代码？？？

```
insert into employee (name, path) 
values
(
 'sarju',
 (select '~/images/'+Cast(ISNULL(max(empid),0)+1 as varchar(50))+'.jpg' from emp)
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:45:29.987

这不是一个完美的代码，因为 MAX(ID)+1 可能与下一个自动增量值不同。您可以使用 IDENT_CURRENT 函数

```
INSERT INTO employee (name,path) 
SELECT 'sarju','~/images/'+CAST(IDENT_CURRENT('employee') AS VARCHAR(50))+'.jpg' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:38:34.953

插入员工（姓名，路径）值（'sarju'，（从emp中选择'~/images/'+Cast(ISNULL(max(empid),0)+1 as varchar(50))+'.jpg'） )

是的，这是可能的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:39:31.527

我可能会对此感到厌烦，因为很多人不喜欢触发器，但这是一个完美的例子，说明它们的目的是什么（我真的希望全世界都知道这一点）：

```
CREATE TRIGGER update_imagepath ON dbo.employee FOR insert AS

UPDATE employee
SET imagepath = '~/images/' + CAST((SELECT empid FROM inserted) AS VARCHAR) + '.jpg'
WHERE empid = (SELECT empid FROM inserted) 
```

它们确实是有目的的，而像这样的事情正是如此。看，你只需要`INSERT`员工的名字，它`TRIGGER`就会自动运行。老实说，这是处理这个问题的最直接的方法。这样做的另一个好处 - 如果您批量插入一群员工或从 Management Studio 运行插入语句，触发器仍然运行！你不需要挖掘那个疯狂的`INSERT`声明！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:47:59.567

**编辑：**虽然这项工作，我不得不说 Nenad Zivkovics 解决方案更好。

您可以使用 SCOPE_IDENTITY() 来获取最新创建的 ID。这也会更安全，这样您就不会得到错误的 ID。

```
insert into employee (name) 
values ( 'sarju')

declare @employeeId as int = SCOPE_IDENTITY()

update employee set 
path = '~/images/' + cast(@employeeId as varchar(50)) + '.jpg' 
where empid = @employeeId 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T13:48:27.713

如果您只有一个特定文件夹将存储您的图像，您可以将您的字段设置`imagepath`为计算

```
CREATE TABLE employee 
(
    empid int IDENTITY(1,1) NOT NULL,
    empname VARCHAR(50) NOT NULL,
    imagepath AS ('~/images/'+cast(empid AS VARCHAR(50))+'.jpg')
)

INSERT INTO employee (empname) 
VALUES ('sarju')
INSERT INTO employee (empname) 
VALUES ('sarju2') 
```

# jquery - tinymce jquery问题

> ID：16038219
> 
> 赞同：0
> 
> 时间：2013-04-16T13:20:12.130
> 
> 标签：jquery, tinymce

我使用 tinymce 作为带有 textarea 的编辑器。当我分配格式良好的文本（带有空格和其他标签）时，它会删除所有这些并显示为一个文本段落。

```
<textarea name="description" cols="200" rows="50" id="description"></textarea>
 <script type="text/javascript" src="jscripts/tiny_mce/jquery.tinymce.js"></script>
 <script type="text/javascript">
        $().ready(function() {
            $('#description').tinymce({
            //all other parameters
           )};
           )}; 
```

这是我的jQuery代码

```
$("#description").val(myText); 
```

现在，当我从描述中获取文本时，它会丢失其 html/空格等等等，这是我为它分配文本后它的显示方式。请看图片！![在此处输入图像描述](https://i.stack.imgur.com/NPfCr.png)

可能是什么问题？首先它看起来像这样![在此处输入图像描述](https://i.stack.imgur.com/EAsci.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:36:59.073

您应该使用 TinyMCE 的[setContent](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.setContent)方法。例如：

```
tinyMCE.activeEditor.setContent(myText); 
```

# asp.net - 从 GridView 获取某一列的总值

> ID：16038234
> 
> 赞同：3
> 
> 时间：2013-04-16T13:20:44.030
> 
> 标签：asp.net, vb.net, gridview, sql-server-2012, templatefield

他

我正在使用带有 SQL-Server-2012 的 ASP.NET/VB.NET。

我有一个 GridView 列，其中包含 3 个字段和 1 个模板字段，如下所示：

```
<asp:GridView ID="grdItems" runat="server" AutoGenerateColumns="False" CellPadding="4" DataSourceID="SqlDataSource3" Font-Names="Tahoma" ForeColor="#333333" GridLines="None">
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <Columns>
        <asp:BoundField DataField="item_name" HeaderText="Item" SortExpression="item_name" />
        <asp:BoundField DataField="item_cost" HeaderText="Cost (inc. VAT)" SortExpression="item_cost" />
        <asp:BoundField DataField="item_quantity" HeaderText="Quantity" SortExpression="item_quantity" />
        <asp:TemplateField HeaderText="Sub-Total (inc. VAT)">
            <ItemTemplate>
                <asp:Label ID="TextBox3" runat="server" Text='<%# Convert.ToInt32(Eval("item_quantity")) * Convert.ToDouble(Eval("item_cost"))%>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <FooterTemplate>
                <asp:Label ID="lblTotalPrice" runat="server" />
            </FooterTemplate>                  
        </asp:TemplateField>
    </Columns>
    <EditRowStyle BackColor="#999999" />
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" HorizontalAlign="Center" VerticalAlign="Middle" />
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" HorizontalAlign="Center" VerticalAlign="Middle" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#E9E7E2" />
    <SortedAscendingHeaderStyle BackColor="#506C8C" />
    <SortedDescendingCellStyle BackColor="#FFFDF8" />
    <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
</asp:GridView> 
```

后面的代码：

```
Imports System.Data.SqlClient
Imports System.Data

Partial Class ProjectReport
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

        Dim ProjectID = Session("project_id")
        Session("ProjectID") = ProjectID

    End Sub
    Protected Sub grdItems_RowDataBound(sender As Object, e As GridViewRowEventArgs)

        Dim totalPrice As Decimal = 0

        If e.Row.RowType = DataControlRowType.DataRow Then

            Dim lblPrice As Label = DirectCast(e.Row.FindControl("lblTotalPrice"), Label)

            Dim price As Decimal = [Decimal].Parse(lblPrice.Text)

            totalPrice += price

        End If

        If e.Row.RowType = DataControlRowType.Footer Then
            Dim lblTotalPrice As Label = DirectCast(e.Row.FindControl("lblTotalPrice"), Label)

            lblTotalPrice.Text = totalPrice.ToString()

        End If
    End Sub

End Class 
```

**数据绑定（）**

```
 Private Sub BindData()

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim query As New SqlCommand("SELECT Items.item_name, Items.item_cost, project_items.item_quantity FROM Items INNER JOIN project_items ON items.item_id = project_items.item_id WHERE project_items.project_id = @parameter", conn)

        query.Parameters.AddWithValue("@UserID", Session("ProjectID"))

        Dim da As New SqlDataAdapter(query, conn)

        da.SelectCommand = query

        Dim table As New DataTable()

        da.Fill(table)

        grdItems.DataSource = table
        grdItems.DataBind()
    End Sub 
```

最后一列（模板字段）将数量字段与成本字段相乘。

如何计算模板字段中的所有值（通过添加）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:32:45.120

您必须使用数据绑定事件来对这些值求和。请参阅[此示例](http://www.codeproject.com/Articles/35187/Summing-Columns-in-a-GridView)并适应您的需求：

```
private Decimal OrderTotal;

protected void GridView1_DataBinding(object sender, EventArgs e)
{ 
    OrderTotal = 0.0M;
}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //Keep adding the subtotal here
        OrderTotal += Subtotal;               
    }
}

protected void GridView1_DataBound(object sender, EventArgs e)
{      
    //Set a control with the total sum
    LabelOrderTotal.Text = OrderTotal.ToString("C");
} 
```

基本上，您不断添加事件中的值，`RowDataBound`并在`DataBound`事件中设置带有总和的标签。或者，您可以在事件中遍历您的网格`DataBound`并添加所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:33:16.307

遍历 gridview 事件的所有`DataRow`行，`DataBound`并将 TextBox3 的值添加到运行总变量中。

```
Protected Sub grdItems_DataBound(ByVal sender as Object, ByVal e as EventArgs) 
    Dim row As GridViewRow = Nothing
    Dim runningTotal As Double = 0.0
    For i As Integer = 0 to grdItems.Rows.Count
        row = grdItems.Rows(i)
        If row.RowType = DataControlRowType.DataRow Then
            ' Add error handling here
            runningTotal += Ctype(CType(row.FindControl("TextBox3"), Label).Text, Double)
        End If
    Next i
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:29:08.967

我个人会通过在 RowDataBound 事件中执行加法（以及实际上的乘法）来做到这一点......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:35:02.037

你可以试试这个...

```
decimal totalScore=0;
protected void gd__RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Label TextBox3= (Label)e.Row.FindControl("TextBox3");                          

            decimal points = Decimal.Parse(TextBox3.Text);               

            totalScore += points;              
                        }
        if (e.Row.RowType == DataControlRowType.Footer)
        {
            Label lblTotal = (Label)e.Row.FindControl("lblTotal");
            lblTotal.Text = totalScore.ToString();                

        } 
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T15:47:39.417

```
 <asp:TemplateField HeaderText="first_name" SortExpression="first_name">
            <EditItemTemplate>
            <asp:TextBox ID="TextBox_first_name" runat="server" Text='<%# Bind("first_name") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
            <asp:Label ID="Label_first_name" runat="server" Text='<%# Bind("first_name") %>'></asp:Label>      
            </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="middle_name" SortExpression="middle_name">
            <EditItemTemplate>
            <asp:TextBox ID="TextBox_middle_name" runat="server" Text='<%# Bind("middle_name") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
            <asp:Label ID="Label_middle_name" runat="server" Text='<%# Bind("middle_name") %>'></asp:Label>
            </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="last_name" SortExpression="last_name">
            <EditItemTemplate>
            <asp:TextBox ID="TextBox_last_name" runat="server" Text='<%# Bind("last_name") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
            <asp:Label ID="Label_last_name" runat="server" Text='<%# Bind("last_name") %>'></asp:Label>
            </ItemTemplate>

Protected Sub GridView_clients_RowCommand(sender As Object, e As GridViewCommandEventArgs) Handles GridView_clients.RowCommand

    If e.CommandName = "Select" Then

        Dim index As Integer = Convert.ToInt32(e.CommandArgument) 'gets the row

        '........................................

        Dim client_first_name As String = DirectCast(GridView_clients.Rows(index).FindControl("Label_first_name"), Label).Text.ToString
        Dim client_middle_name As String = DirectCast(GridView_clients.Rows(index).FindControl("Label_middle_name"), Label).Text.ToString
        Dim client_last_name As String = DirectCast(GridView_clients.Rows(index).FindControl("Label_last_name"), Label).Text.ToString

        'MsgBox(client_first_name)
        'MsgBox(client_middle_name)
        'MsgBox(client_last_name)

        lb_test.Text = client_first_name & " " & client_middle_name & " " & client_last_name

    End If

End Sub 
```

来自 FSSA - Indiana 的 Craig Lewis Johnson

# ssh - 刀 SSH 属性不起作用

> ID：16038235
> 
> 赞同：8
> 
> 时间：2013-04-16T13:20:45.057
> 
> 标签：ssh, chef-infra, knife

`knife ssh`我被命令弄糊涂了。根据文档，`-a`如果您的节点没有设置 FQDN 或 ipaddress 属性，则可以传递标志。此外，如果您想覆盖这些属性。我正在运行它以`knife ssh`在本地 VM 上进行测试：

```
 $ knife ssh "role:webserver" "sudo chef-client" -x someusername -a 192.168.14.141 
```

我收到的错误：

**致命：找到 1 个节点，但没有建立连接所需的属性。尝试使用 --attribute 设置另一个属性以打开连接。**

我正在运行**Chef 11.4.0**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T23:35:09.793

如果未设置or属性，则该`-a`参数实际上表示包含节点 IP 地址的属性名称。`node[:fqdn]``node[:ipaddress]`

例如，我安装了 openstack ohai 插件，公共 IPv4 地址存储在`node[:openstack][:public_ipv4]`我将编写刀 ssh 命令，如：

```
$ knife ssh "role:webserver" "sudo chef-client" -x user -a openstack_public_ipv4 
```

其中`openstack_public_ipv4`是匹配`node[:openstack][:public_ipv4]`属性的搜索属性格式。

# random - 将文件 LUA 的内容存储在 2D 数组中

> ID：16038236
> 
> 赞同：0
> 
> 时间：2013-04-16T13:20:46.137
> 
> 标签：random, lua

我有一个包含数字行和列的 data.txt，我想将其内容存储到二维数组中。所以基本上我正在寻找如何将对象从文件读取分配到二维数组。顺便说一句，我正在使用 LUA，只是一个新手。

请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:29:03.957

```
local mt = {}          -- create the matrix

for line in io.lines'datafile.txt' do
  local new_row = {}
  for n in line:gmatch'%S+' do
     table.insert(new_row, tonumber(n))
  end
  if #new_row > 0 then
     table.insert(mt, new_row)
  end
end 
```

此代码将默默地跳过所有非数字单词。

# django - Django：在模型上添加校验和

> ID：16038237
> 
> 赞同：1
> 
> 时间：2013-04-16T13:20:48.127
> 
> 标签：django, checksum, crc, data-integrity, 21cfr11

在 Django 应用程序中，我需要检查数据完整性（即我想检测是否有人从应用程序外部更改了记录的内容[例如通过手动更改数据库中的数据]）。

我的想法是在每个模型实例上添加一个“校验和”（模型上的附加字段或链接的“校验和”模型上）。

所以，我有两个问题：

1.  这是一个好的解决方案吗？
2.  有没有为此目的准备好的 django 应用程序？（我什么都没找到）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:18:58.643

我觉得这是一个很好的解决方案。您可以使用 a 创建一个`Checksum`模型`Generic Foreign Key`，然后为信号创建一个侦听器`post_save`，以更新已保存对象的校验和。但是您仍然必须考虑在 Django 中进行批量更新并更改模型的默认值`Manager`以对查询集进行原子更新。

我会做一些类似的事情来跟踪我项目中每个带有 UUID 的模型。

# java - 使用公司品牌名称命名课程和资源

> ID：16038243
> 
> 赞同：3
> 
> 时间：2013-04-16T13:20:57.033
> 
> 标签：java, android, coding-style, standards, standards-compliance

我目前正在开发一个包含许多遗留代码元素的项目。过去，他们一直在类定义和资源名称中使用品牌名称。例如（不使用我的客户品牌名称，让我们使用想象中的**Johnson**品牌名称）

所以当前的结构看起来有点像这样：

**包和类**

```
com.johnson.activities.JohnsonArticleActivity.java
com.johnson.activities.JohnsonArticleMain.java
com.johnson.widgets.JohnsonHorizontalList.java 
```

**资源**

```
res/drawable/johnson_logo.png
res/layouts/johnson_article.xml 
```

我的观点一直是，您不应该在代码命名中使用代码库使用公司的品牌名称。这主要归结为代码可重用性，但我想知道是否有任何其他论点（编码标准）不使用代码中的公司名称。我从未见过有人这样做。而且我找不到任何关于这个主题的文章或博客。

有人见过这样做吗？或者有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:26:46.723

这似乎过于多余，特别是如果他们的名字在包名中。我没有看到将他们的名字添加到每个文件中的任何好处。它只会使文件名、类名等变得更长，并且您必须在精神上忽略每个类名的第一个单词才能看到该类的真实名称。我根本不会推荐这个。

我唯一会添加此类信息的情况是，如果我有两个类似的类，一个用于 A 公司，一个用于 B 公司（或将公司替换为库等），这将导致需要这种区分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:24:06.493

由于该包已经包含公司名称，我认为将其添加到您的类名之前没有任何意义，除非您需要将您的类与其他库的类区分开来。

# android - 当我使用 android.widget.RelativeLayout.setBackground 时出现 NoSuchMethodError

> ID：16038244
> 
> 赞同：9
> 
> 时间：2013-04-16T13:20:57.050
> 
> 标签：android, nosuchmethoderror

在 android 4.2 我的应用程序运行良好，但是当我尝试使用 android 4.0.4 对其进行测试时，我收到以下消息错误：

```
04-16 15:06:46.601: E/AndroidRuntime(3844): java.lang.NoSuchMethodError: android.widget.RelativeLayout.setBackground
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at com.myapp.MainActivity.cambiarPagina(MainActivity.java:271)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at com.myapp.MainActivity.cambiarPagina(MainActivity.java:119)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at com.myapp.MainActivity.access$0(MainActivity.java:116)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at com.myapp.MainActivity$2.onClick(MainActivity.java:70)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at android.view.View.performClick(View.java:3524)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at android.view.View$PerformClick.run(View.java:14202)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at android.os.Handler.handleCallback(Handler.java:605)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at android.os.Handler.dispatchMessage(Handler.java:92)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at android.os.Looper.loop(Looper.java:137)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at android.app.ActivityThread.main(ActivityThread.java:4499)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at java.lang.reflect.Method.invoke(Method.java:511)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
    04-16 15:06:46.601: E/AndroidRuntime(3844):     at dalvik.system.NativeStart.main(Native Method) 
```

我使用 setBackgroud 添加一些动画，比如这段代码

```
AnimationDrawable animation = new AnimationDrawable();
                                 animation.addFrame(getResources().getDrawable(R.drawable.d1), 200);
                                 animation.addFrame(getResources().getDrawable(R.drawable.dio), 1000);
                                 animation.addFrame(getResources().getDrawable(R.drawable.da1), 200);
 animation.setOneShot(true);
 view.setBackground(animation);
 view.post(new Starter(animation)); 
```

我的项目中添加了支持库，但我不知道如何解决这个问题，任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-16T13:23:13.780

这是在[API 16](http://developer.android.com/reference/android/view/View.html#setBackground%28android.graphics.drawable.Drawable%29)中添加的，试试`setBackgroundDrawable()`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-16T13:26:59.833

除了@dmon 回答：您可以通过这种方式调用正确的方法：

```
if (Build.VERSION.SDK_INT >= 16) {

    layout.setBackground(animation);

} else {

    layout.setBackgroundDrawable(animation);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-08T07:27:26.910

试试这个，它对我有用：

```
Bitmap bitmap = BitmapFactory.decodeFile(new ImageLoader().fullPath + "/desiredFilename.png");
Resources res = getResources();
BitmapDrawable bitmapDrawable = new BitmapDrawable(res, bitmap);
int sdk = android.os.Build.VERSION.SDK_INT;
if (sdk < android.os.Build.VERSION_CODES.JELLY_BEAN)
   ll.setBackgroundDrawable(bitmapDrawable);
else 
   ll.setBackground(bitmapDrawable);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-03T10:58:38.430

这是我的问题：

```
imageButton.setOnTouchListener(popupWindow.createDragToOpenListener(imageButton)); 
```

我把它修好了：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
                    imageButton.setOnTouchListener(popupWindow.createDragToOpenListener(imageButton));
                } 
```

# iphone - 基于全局变量的变化视图控制器

> ID：16038250
> 
> 赞同：0
> 
> 时间：2013-04-16T13:21:25.303
> 
> 标签：iphone, ios, uiviewcontroller, uitabbarcontroller

我目前正在开发涉及签名过程的应用程序。它是标签栏应用程序，但为简单起见，我将使用只有 2 个标签的示例。主页和设置。

在家里，用户会在他的主屏幕上看到各种照片和最后的消息。但是，当用户未登录时，有默认的匿名视图。

我的问题是，你们如何使用一个视图控制器和两个不同的复杂视图。启动应用程序后，主页视图控制器是默认的。我正在使用故事板，所以只有一个视图控制器可以是 HomeViewController。（显然 :)）

我知道在一个视图控制器上执行多个 UIView 并基于全局变量（NSUserDefaults）隐藏/显示这些视图的可能性。问题是，这两种观点都有很多出路。（滚动视图、表格视图等）。因此，一方面，在 UIView 上对所有这些插座进行编程将是硬核，并且会有很多冗余。（登录用户将登录，但所有 UIViews 的数据——包括未注册用户的视图都必须下载）。

根据用户是否登录，创建两个视图控制器并呈现一个会更容易。（只需检查 appdelegate 的 applicationdidfinishloading 中的 NSUserDefaults 字典）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:24:51.107

您可以实现这样`HomeViewController`一个控制器来控制许多视图控制器。与如何`UINavigationController`和`UITabViewController`控制许多`viewControllers`和哪些`viewController`是可见的相同。

您的 HomeViewController 看起来像这样：

```
@interface HomeViewController : UIViewController

@property (strong, nonatomic) UIViewController *authenticatedVC;
@property (strong, nonatomic) UIViewController *anonymousVC;

- (void)showAuthenticatedView;
- (void)showAnonymousView;

@end

@implementation HomeViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // init your VCs
    self.authenticatedVC = [[UIViewController alloc] init];
    self.anonymousVC = [[UIViewController alloc] init];

    // show your initial VC (assuming anonymousView is you default)
    [self.view addSubview:self.authenticatedVC.view];
}

- (void)showAuthenticatedView
{
    // remove current view
    [self.authenticatedVC.view removeFromSuperView];

    // display authenticatedView
    [self.view addSubview:self.authenticatedVC.view];
}

- (void)showAnonymousView
{
    // remove current view
    [self.authenticatedVC.view removeFromSuperView];

    // display showAnonymousView
    [self.view addSubview:self.anonymousVC.view];
}

@end 
```

** 更新：这是 ios 开发库中关于创建自定义容器视图控制器的链接：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:38:14.270

我会这样做。你有两个 ViewController，一个是 DefaultViewController，另一个是 LoginViewController。检查是否登录，并将 rootViewController 设置为您要显示的 viewController。

顺便说一句，当您想存储用户信息（如 id 和密码）时，请使用钥匙串而不是 NSUserDefaults。

# java - 如何以编程方式和基于 IP 的方式限制对我的 .war 文件的访问？

> ID：16038254
> 
> 赞同：0
> 
> 时间：2013-04-16T13:21:34.267
> 
> 标签：java, jboss, limit

我在几个 JBoss 5.1 实例中部署了一堆 .ear 文件。现在，我需要将这些应用程序之一的访问限制为各种 IP 地址，具体取决于其托管服务器。应用程序的结构是

*application.ear 文件
|-> 嵌入式 .jar 文件
|-> 嵌入式 .war 文件*

我知道如何通过编辑相关`WEB-INF/web.xml`应用程序来做到这一点，但我正在处理定期发生的自动部署，并且各种服务器之间的限制不同。

所以我想在每台服务器上放置一个包含允许的 IP 地址的配置文件，并通过让我的应用程序读取这些地址并在 JBoss 启动时相应地锁定自身来限制访问，这将是一种可行的方法。但是我找不到任何关于如何以编程方式限制对应用程序的访问的文档。

EJB Security - 例如 - 能够做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:04:37.253

我认为对于您的场景[RemoteAddrValve](http://docs.jboss.org/jbossweb/2.1.x/config/valve.html)适合使用。您可以通过在文件下添加 IP 地址来对每个应用程序进行限制，`.WAR/WEB-INF/context.xml`也可以通过在`deploy/jbossweb.sar/server.xml`. Valve 也支持正则表达式。

一个示例配置：

```
<Valve className="org.apache.catalina.valves.RemoteAddrValve" allow="1.1.1.2,1.1.1.3,1.1.4.*" /> 
```

# c# - 保存重新计算的 Excel 文件

> ID：16038256
> 
> 赞同：1
> 
> 时间：2013-04-16T13:21:36.107
> 
> 标签：c#, excel, excel-interop

我需要从我的工作表中删除所有 Excel 公式（用其结果替换公式）然后保存文件。例如 - 当我使用 OpenXML 打开文件时，我希望在单元格中包含 2013-04-11 而不是 B3+13

我发现这篇文章 [http://office.microsoft.com/en-us/excel-help/replace-a-formula-with-its-result-HP010066258.aspx](http://office.microsoft.com/en-us/excel-help/replace-a-formula-with-its-result-HP010066258.aspx)

它有效 - 保存后没有公式。我在 C# 中需要同样的效果。我在互联网上尝试了很多解决方案，但仍然没有希望。

```
 string source = @"C:\Source\doc.xlsx";
            object Unknown = Type.Missing;

            Workbook doc = newApp.Workbooks.Open(
                source,
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown, 
                 Unknown);

            newApp.Calculation = Microsoft.Office.Interop.Excel.XlCalculation.xlCalculationManual;

            doc.ForceFullCalculation = true;
            newApp.CalculateFull();
            newApp.CalculateBeforeSave = true;

            doc.SaveAs("c:\\temp\\recalc.xlsx", Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookDefault, Type.Missing, Type.Missing,
            false, false, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlExclusive,
            Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
            doc.Close(); 
```

那么问题是什么？为什么我可以看到“=DY3+1”而不是“2013-04-11”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:36:59.843

选择包含您的数据的范围，然后将值复制并粘贴到位：

```
using Excel = Microsoft.Office.Interop.Excel;
foreach (Excel.Worksheet ws in doc.Worksheets)
{
    Excel.Range targetRange = (Excel.Range)ws.UsedRange;
    targetRange.Copy(Type.Missing);
    targetRange.PasteSpecial(Excel.XlPasteType.xlPasteValues, 
        Excel.XlPasteSpecialOperation.xlPasteSpecialOperationNone, false, false);
} 
```

这复制了您发布的文档的“用计算值替换公式”部分。可以选择所有工作表并在 Excel 本身中特殊复制/粘贴以获取结果而不是公式，但是我在通过代码处理分组工作表时遇到了一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:35:53.303

计算公式会保留公式及其结果。如果您想用其结果值覆盖公式，那么您需要：
- 将其值设置为其值： Range.Value2=Range.value2
或使用复制和粘贴特殊值

# c - 在c程序中添加0作为最后一个值

> ID：16038257
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:21:43.667
> 
> 标签：c, arrays

我在c中做了一个小程序，一切正常，但在一个过程中我必须为数组分配一些值，但我希望最后一个值自动为0

```
printf("cantidad de valores codificados a ingresar "); /*amount of values to enter*/
scanf("%d",&l);

printf("\ningrese los valores a decodificar: "); /*entering values*/

for(i=0;i<l;++i) {
    scanf("\n%d ",&c[i]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:24:40.210

您只需将 0 分配给读取的元素之后的元素`scanf`：

```
for(i=0;i<l;++i) {
    scanf("%d",&c[i]);
}
c[i] = 0; 
```

你已经`i`在循环之前声明了，所以没关系。确保`i`不大于数组的大小`c`。因此，假设`c`定义为，例如：

```
int c[100]; 
```

在你读入值之后，`l`你应该检查它是否不大于数组的大小，如下所示：

```
scanf("%d",&l);
if (l + 1 > sizeof(c) / sizeof(int)) // one extra for the 0
{
  fprintf(stderr, "Too many values, I don't have this much space...");
  exit(1);
} 
```

但最好`c`动态分配数组：

```
scanf("%d",&l);
int* c = (int*) malloc(sizeof(int) * (l + 1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:23:46.530

```
for(i=0;i<l;++i){
   scanf("\n%d ",&c[i]);
}

c[l] = 0; 
```

# php - 将谷歌地图放入工具提示中

> ID：16038265
> 
> 赞同：0
> 
> 时间：2013-04-16T13:22:17.723
> 
> 标签：php, google-maps-api-3, jquery-ui-tooltip

我有一个显示数据库数据的页面。我正在使用 jquery、php 和 mysqli 来显示数据。当您将鼠标悬停在每条记录的某个链接上时，我希望出现一个工具提示，其中包含一个谷歌地图，根据数据库中该记录的 lat 和 lng 显示该记录的位置。我正在使用 jquery ui 工具提示。

但是，如何将 googlemap 放入工具提示中？

```
<script type="text/javascript">

$(function() {
    $( document ).tooltip({

    });
  });

$(window).load(function () {
    $.get('process.php', function(data){
            $('.loading').hide();
            $('#chart').html( data );
        });

}); 
```

进程.php：

```
<?php
include_once ('./myfile.php'); 
//open database
$db = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME); //open db conn
if (mysqli_connect_errno()) {
            printf("Connect failed: %s", mysqli_connect_error());
            exit();
}       
$infoboxText = "";

//get list of each muni with its lat and lng    
$qGolf="SELECT * FROM golf";
$result_golf = $db->query($qGolf);
$infoboxText= "<table class='infoboxWindow'><tr><th>Course Name</th><th>Location</th><th>Phone</th><th>Holes</th><th>Daily Fee<br/>9 Holes</th><th>Daily Fee<br/>18 Holes</th><th>Weekend Fee<br/>9 Holes</th><th>Weekend Fee<br/>18 Holes</th><th>Cart Fee<br/>9 Holes</th><th>Cart Fee<br/>18 Holes</th><th>Tee Times</th></tr>";
while($golfList = $result_golf->fetch_array(MYSQLI_ASSOC)) { 

        //build the infobox text with a table to hold the data
        $infoboxText.="<tr><td>" .$golfList["Course_Name"] . "</td>";
        //$infoboxText.="<td><div title='This is a tooltip.' class='locate'>Show</div></td>";
        $infoboxText.="<td><a href='#' title='This is a tooltip.' class='locate'>Show</a></td>";
        $infoboxText.="<td>".$golfList["Phone"]."</td>";
        $infoboxText.="<td>".$golfList["Holes"]."</td>";
        $infoboxText.="<td>".$golfList["Daily_Fee_9_Holes"]."</td>";
        $infoboxText.="<td>".$golfList["Daily_Fee_18_Holes"]."</td>";
        $infoboxText.="<td>".$golfList["Weekend_Fee_9_Holes"]."</td>";
        $infoboxText.="<td>".$golfList["Weekend_Fee_18_Holes"]."</td>";
        $infoboxText.="<td>".$golfList["Cart_Fee_9_Holes"]."</td>";
        $infoboxText.="<td>".$golfList["Cart_Fee_18_Holes"]."</td>";
        $infoboxText.="<td>".$golfList["Tee_Times"]."</td></tr>";
        //close the table

}
$infoboxText.="</table>";
echo $infoboxText; //return the circles code here

?> 
```

html:

```
<div class="loading">LOADING ...</div>
<div id="chart"> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:57:02.457

我过去曾使用[Google Static Maps API](https://developers.google.com/maps/documentation/staticmaps/)完成此操作。我们有很多看起来像这样的跨度：

```
<a href="#" class="showMap">
<span class="googlemaps" data-image="http://maps.googleapis.com/maps/api/staticmap?zoom=13&amp;size=400x214&amp;markers=color:green|52.503679,13.448807&amp;sensor=false&amp;key=YOURKEY">Show map</span>
</a> 
```

然后有一些 javascript 附加到所有这些跨度，这些跨度采用该 data-image 属性并调用在那里定义的 URL，将该内容作为工具提示加载：

```
// Capture the data-image attribute and attach tool tips to them
$(document).ready(function() {
    $("span.googlemaps[data-image]").tooltip({
        showURL: false,
        track: true,
        bodyHandler: function() {
            return $("<img/>").attr("src", $(this).attr("data-image"));
        },
        extraClass: "imgTooltip"
    });
}); 
```

这是使用[jQuery Tooltip 插件](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)。[您可以在此处](http://www.hostelbookers.com/hostels/germany/berlin/)查看一个工作示例。

# jakarta-ee - Java EE 6/7 中的持久层设计

> ID：16038266
> 
> 赞同：2
> 
> 时间：2013-04-16T13:22:19.283
> 
> 标签：jakarta-ee, jpa, persistence, java-ee-6, dao

上次我使用 JBoss 7.1（Java EE6 标准）开发应用程序时，我使用 DAO 编写了持久层。

首先，我有一个“抽象”DAO，它是所有具体 daos 之父：

```
public abstract class AbstractDao<T> {

    private Class<T> entityClass;

    private String defaultSortColumn;

    public AbstractDao(Class<T> entityClass) {
        this.entityClass = entityClass;
        this.defaultSortColumn = "";
    }

    protected abstract EntityManager getEntityManager();

    public void create(T entity) {
        getEntityManager().persist(entity);
    }

    public void edit(T entity) {
        getEntityManager().merge(entity);
    }

    public void remove(T entity) {
        getEntityManager().remove(getEntityManager().merge(entity));
    }

    public T find(Object id) {
        return getEntityManager().find(entityClass, id);
    }

    @SuppressWarnings("rawtypes")
    public List<T> find() {
        CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
    CriteriaQuery cq = cb.createQuery();
        Root from = cq.from(entityClass);
        cq.select(from);
        return getEntityManager().createQuery(cq).getResultList();
    }

    @SuppressWarnings("rawtypes")
    public int count() {
        //...
    }

} 
```

然后我为我的域中**的每个数据库实体都有一个 dao 实现。**

它们彼此都非常相似，它们只是为查询添加了比通常的“crud”操作更复杂的方法。

这是一个例子：

```
@Stateless
public class ShopDao extends AbstractDao<Shop> {

    @Inject
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public ShopDao() {
        super(Shop.class);
    }
} 
```

如您所见，我的 DAO 是无状态 EJB。

这种方式使我的应用程序工作，但是......当我必须创建一个新实体时，我必须同时创建实体本身和 DAO。是不是有点多余？但是，我想不出更好的方法，因为我经常需要对特定实体进行复杂的查询。

问题是：

*   这是最佳做法吗？我还能如何设计我的持久层？

*   DAO 成为 EJB 好不好？

*   我在客户端（JSF 控制器）进行了验证。它应该在持久层吗？如何？

*   将原始 EntityManager 放在服务层类中会更好吗，避免 DAO？

**编辑**

有没有办法避免每张桌子都有一个道？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:04:11.820

“这是最佳实践吗？我还能如何设计我的持久层？”

你的方法似乎还可以。有些人喜欢让 DAO 层完全独立于其他层。这种方法的优点是您可以在其他地方重用 DAO 层，并且在应用程序服务器之外测试您的 DAO 也更容易。我不太提倡这种方法，因为它通常是一种矫枉过正的做法——EJB 方法只是 DAO 层的薄包装。EJB 也很容易在应用程序服务器之外进行测试（Spring 提供了所有需要的测试工具）。因此，只要您不打算在 EJB 中实现更复杂的业务逻辑，我就会采用您的方法。

请阅读以获得更多详情...

“DAO 成为 EJB 好不好？”

更准确地说，EJB 在您的方法中不是 DAO，因为它们还管理事务，可以负责其他非数据库的业务逻辑元素。EJB 还为您的应用程序提供外部接口。从技术上讲，EntityManager 是您的 DAO，EJB 正在使用它来实现所有需要的业务逻辑。

“我在客户端（JSF 控制器）进行了验证。它应该在持久层中吗？如何？”

在 Java EE 6 中，您可以利用 Bean 验证技术 - 您在模型级别定义验证规则（作为实体字段上的注释），这些规则由持久层和 JSF Web 层强制执行。

“在服务层类中使用原始 EntityManager 会更好，避免 DAO 吗？”

据我了解，您想摆脱 EJB 吗？你可以这样做，但是你需要自己管理事务（在简单的情况下没什么大不了的）。无状态本地接口或无接口 EJB 目前非常轻量级，因此没有充分的理由避免使用它们。作为替代，您可以使用 Spring Framework 对 JPA 的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T06:30:13.447

我建议完全放弃 DAO。你必须问自己，你需要它们做什么？

1st) 抽象 DAO 类实际上什么都不做，然后将调用委托给实体管理器，因此您为自己创建了一个`edit`替换 的方法`merge`，这不仅没有必要，而且使您的代码更难阅读，因为有人必须检查，什么你的`edit`方法可以。

2nd）你没有展示具体的 DAO 类做了什么，但很可能这可以在实体本身中完成（因为实体是一个**业务对象**，而不仅仅是一个哑数据容器）或在控制器中（因为它们控制实体之间的**交互**，例如作为无状态 EJB）。

始终从简单的应用程序开始，不要从设计可能需要一些时间的层开始，但现在会使一切变得更加复杂。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T15:54:39.437

部分答案：

我认为这是一个很好的做法，但就我而言，我也会有一个包含部分逻辑的实体服务层。通常我使用一个隐藏dao的EntityService，它负责逻辑/验证/...

但是如果你使用 spring，你可以（应该？）使用[spring-data-jpa](http://www.springsource.org/spring-data/jpa)，它有一个非常好的数据层。

不要将验证嵌入到持久层中。保留此层仅用于数据库访问。例如，验证应在服务层中完成（或根据您的项目在视图层中）。并将实体管理器保留在持久层中，因为它们是粘在一起的。

# git - 如何为 Git 的 PushOk SCC 插件设置用户名？

> ID：16038273
> 
> 赞同：0
> 
> 时间：2013-04-16T13:22:30.113
> 
> 标签：git, version-control

我们最近开始使用 Git 作为源代码控制提供程序，对于我们的 PowerBuilder 源代码，我们使用 PushOk Git SCC 代理。获取最新、签出和提交文件效果很好。但是当我们将这些提交推送到 GitHub 时，我们总是会得到一个未知的用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:27:31.070

我刚刚找到了解决方案。我必须将两个配置值添加到位于路径下的 PushOk gitconfig 文件：C:\Program Files (x86)\Pushok Software\GITSCC\GIT\etc\gitconfig

```
[user]
    name = "myusername"
    email = "me@domain.net" 
```

# java - 我需要一个服务对象吗？

> ID：16038277
> 
> 赞同：2
> 
> 时间：2013-04-16T13:22:35.603
> 
> 标签：java, sql-server-2008, spring-mvc, jdbc

我正在开发我的课程结论工作（最终毕业工作）。我们仅将 Java 与 Spring MVC 和 Glassfish Application Server 一起使用。我们不会使用 Hibernate 或 JPA，因为我们将在 MS SQL Server 2008 中使用存储过程，所以 JDBC 似乎是调用它们的最有效方式（因为据我所知，我不能将对象传递为SQL Server 的参数）。我们已经在 Glassfish 上配置了数据源池。我们知道我们需要一个 DAO 来从 SQL Server 调用过程。我的问题是：

1-) 我是否需要（或者它是使用的最佳实践）一个服务对象（正确注释为@Service）来调用 DAO 方法？或者我可以直接从控制器调用 DAO 方法？

2-) 从数据源获取连接的最佳方法是什么？每个 DAO 上具有 getConnection 方法或 ds.getConnection() 的分离类？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:26:50.897

我倾向于拥有服务层的最大原因有以下两个原因......

1.  将方法标记为@Transactional，以便此方法中的所有 DAO 请求都发生在单个事务中。

2.  我可以增加关注点与 DAO 和用户角色的分离。我可以将方法标记为需要某些用户角色，因此它非常适合 Spring Security。

您可以只从控制器调用 DAO，但如果您想稍后扩展，它会让您陷入困境。要获得连接，您可以使用将服务标记为@Transactional 并将DAO 标记为@Repository，Spring 将为您处理获取会话对象和注入等的整个过程。

我倾向于（可能不正确地）将服务层视为可以访问的外观，无论是从 Web 服务还是控制器或其他任何东西，它都保持分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:18:46.367

是的，一定要从控制器调用 dao/repository，否则你将结束创建大量不必要的类。Spring 可以轻松地将*所需的事务设置为 new*，以便创建一个事务（如果尚未存在）。

当**多个**DAO/业务实体涉及到一个工作单元/业务逻辑时，请使用**服务。**为简单的 getter 创建服务类是没有意义的。

# python - 按顺序导入 Django CSV

> ID：16038278
> 
> 赞同：0
> 
> 时间：2013-04-16T13:22:39.143
> 
> 标签：python, django, django-models, python-2.7

是的，我在使用 Django 时遇到了第一个真正的问题，因为我是新手，我无法弄清楚这一点。

我正在使用[Django 适配器](http://django-adaptors.readthedocs.org/en/latest/)（尽管我愿意接受其他建议，但它映射到模型并且效果很好）。无论如何，我想导入数据，但要确保订单是由用户指定的。

这是我目前所拥有的......

**表格.py**

**此表单会显示给用户，然后他们在其中选择哪一列代表其 CSV 上传中的哪个字段。**

```
COL_CHOICES = [
    ('NONE', 'No Import'),
    ('first_name', 'First Name'),
    ('last_name', 'Last Name'),
    ('company', 'Company'),
    ('mobile', 'Mobile Number'),
    ('email', 'Email Address'),
    ]

class ConfiguratorForm(forms.Form):
    col1 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name')
    col2 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name')
    col3 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name')
    col4 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name')
    col5 = forms.TypedChoiceField(choices=COL_CHOICES, initial='first_name') 
```

**回到我的 view.py POST 到以下...**

```
 if request.method == 'POST':
        form = ConfiguratorForm(data=request.POST)
        # Try and import CSV
        ContactCSVModel.import_data(data=upload.filepath, extra_fields=[
            {'value': upload.group_id, 'position': 5},
            {'value': upload.uploaded_by.id, 'position': 6}]) 
```

**这是现在的问题。**

```
class ContactCSVModel(CsvModel):

    first_name = CharField()
    last_name = CharField()
    company = CharField()
    mobile = CharField()
    group = DjangoModelField(Group)
    contact_owner = DjangoModelField(User)

    class Meta:
        delimiter = ","
        dbModel = Contact
        update = {'keys': ["mobile", "group"]} 
```

正如您在上面看到的，它目前仅按照上面列出的顺序匹配 first_name、last_name 等，而不是用户指定的顺序。

我怎样才能做到这一点？

# java - Primavera P6 8.1 中的空指针异常

> ID：16038279
> 
> 赞同：0
> 
> 时间：2013-04-16T13:22:39.757
> 
> 标签：java, weblogic, primavera

我在 Primavera P6 8.1 安装中遇到空指针异常。该异常仅发生在 Web 客户端的一个部分：应用程序设置。P6 Web 和 P6 API 部署在 Windows Server 2008 R2 安装上运行的同一 WebLogic (10.3.5) 节点上。我已经使用同一个软件堆栈完成了这个安装十几次，并且在任何其他安装中都没有这个问题。

下面的确切错误：

```
Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.6.0_20+, heap=-1--1, args=null, href=http://java.sun.com/products/autodl/j2se, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_17
    location is: http://java.sun.com/products/autodl/j2se
    path is: C:\Program Files (x86)\Java\jre7\bin\javaw.exe
    args is: null
    native platform is: Windows, x86 [ x86, 32bit ]
    JavaFX runtime is: JavaFX 2.2.7 found at C:\Program Files (x86)\Java\jre7\
    enabled is: true
    registered is: true
    system is: true

    Match: ignoring maxHeap: -1
    Match: ignoring InitHeap: -1
    Match: digesting vmargs: null
    Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
    Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
    Match: digest LaunchDesc: http://localhost:7001/p6/action/jnlp/appletsjnlp.jnlp?mainClass=com.primavera.pvapplets.adminpreferences.AdminPreferencesApplet&classPath=adminpreferences.jar,prm-applets-common.jar,forms-1.0.7.jar,prm-guisupport.jar,prm-to.jar,jide.jar,tablesupport.jar,formsupport.jar,applets-bo.jar,commons-lang.jar,prm-common.jar,resource_strings.jar,prm-img.jar,commons-logging.jar&name=AdminPreferences&version=8.1.2.0.0602
    Match: digest properties: []
    Match: JVM args: [JVMParameters: isSecure: true, args: ]
    Match: endTraversal ..
    Match: JVM args final: 
    Match: Running JREInfo Version    match: 1.7.0.17 == 1.7.0.17
     Match: Running JVM args match: have:<>  satisfy want:<>
Java Plug-in 10.17.2.02
Using JRE version 1.7.0_17-b02 Java HotSpot(TM) Client VM
User home directory = C:\Users\gwrichard
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
---------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T21:52:13.713

问题最终是安装在客户端机器上的 Java SE 客户端。高于 6_u32 的 Java 版本似乎不能很好地与 P6 8.1 配合使用。通过卸载 Java 客户端并访问 P6 Web，系统提示我安装 Java 的早期版本。

一旦安装了早期的 Java 版本，P6 web 的全部功能就可用。

# java - 将自定义代码格式化程序绑定到 Eclipse 项目

> ID：16038293
> 
> 赞同：8
> 
> 时间：2013-04-16T13:23:15.050
> 
> 标签：java, eclipse, project, formatter

我在我的 Java 项目中设置了一个自定义代码格式化程序。所有代码更改都会在保存时自动格式化。我的项目通过 SVN 保存在服务器上，因此其他人也可以处理它们。

问题是我想在所有机器上应用一个代码格式化程序（我的）。现在的情况是，我必须去一台新机器，检查代码（格式化程序也在存储库中），将项目导入 eclipse 并手动更改 eclipse 设置以使用该代码格式化程序。有没有办法在项目级别而不是 IDE 级别上做到这一点？所以我不必在每台机器上手动执行此操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T19:49:43.947

打开项目的上下文菜单 -> 属性 -> Java 代码样式 -> 格式化程序。选中“启用项目特定设置”并配置配置文件。

所有重要的 Java 相关设置都可以在每个项目基础上使用，如果您与他人共享项目，则*永远*不应通过 Window -> Preferences 修改 Java 相关设置。项目属性保存*在*您的项目中（因此与所有人共享），首选项存储*在很远的地方并且与*您的项目无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:32:14.963

最好的解决方案是要求开发团队使用通用 IDE，例如 eclipse，我相信在格式化代码时类似的规则适用于 eclipse。看来您的开发团队正在使用不同的 IDE。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-16T13:42:31.470

临时解决方案可能是将 eclipse 的副本（带有您的设置和自定义）保存在公共位置 egFTP 或您想要的任何地方，例如，如果新开发人员要加入团队，他所要做的就是获取已配置的 eclipse 并开始工作。

# iphone - 这是 CoreText 吗？- Aviary 文本捏缩放扩展

> ID：16038304
> 
> 赞同：6
> 
> 时间：2013-04-16T13:23:52.833
> 
> 标签：iphone, ios, uitextfield, core-text

我正在研究制作一个应用程序，用户可以在其中更改`UITextField`. 我正在研究 Aviary 应用程序，我看到用户不仅可以增加或减少文本的大小，还可以更改其方向。

![在此处输入图像描述](https://i.stack.imgur.com/COBd6.png)

所以我想问的问题是

1）他们是`CoreText`用来做这件事的，他们只是用普通的旧的`UILabel`还是`UIText`？

2）我不知道如何动态调整大小？他们在使用`UIView`吗？

3) 我在谷歌上搜索了 CoreText 教程、示例、检查了苹果文档和示例项目、查看了可可控件和 github，但我仍然没有看到任何示例代码或教程可以说明这是如何完成的。

有人会好心给我指出一些方向或教程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T14:21:02.127

关于字体的外观，有几个选项：

1.  您可以使用该标准`UILabel`来实现您在此处看到的大部分效果（字体、大小、颜色、旋转）。超出标准的一项功能是`UILabel`字体周围的白色笔划。但是，有效的iOS 6，您也可以使用它的属性来实现红色文本周围的白色描边效果，标准`UILabel`使用它的[`attributedText`](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/doc/uid/TP40006797-CH3-SW55)属性，即[`NSAttributedString`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html).

2.  在 6.0 之前的 iOS 版本中，要实现文本周围的白色笔触颜色，您必须使用[CoreGraphics](http://developer.apple.com/library/ios/#documentation/CoreGraphics/Reference/CoreGraphics_Framework/_index.html)或[CoreText](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)。

关于文本的动态调整大小、旋转和移动，他们无疑只是使用调整`transform`视图属性的手势识别器（更准确地说，可能调整`transform`旋转，调整`center`或`frame`拖动，同时调整`frame`字体大小用于调整大小（如果只使用`scale`转换，最终可能会出现不良像素化）。

如果您在 Stack Overflow 上搜索有关手势识别器以及拖动、调整大小和旋转视图的问题，您将获得相当多的成功。

* * *

在 iOS 6 中，如果您想要带有白色边框的红色文本`UILabel`，您可以执行以下操作：

```
// create attributes dictionary

NSDictionary *attributes = @{
                             NSFontAttributeName            : [UIFont systemFontOfSize:48.0],
                             NSForegroundColorAttributeName : [UIColor redColor],
                             NSStrokeColorAttributeName     : [UIColor whiteColor],
                             NSStrokeWidthAttributeName     : @(-3)
                             };

// make the attributed string

NSAttributedString *stringToDraw = [[NSAttributedString alloc] initWithString:@"bigcat"
                                                                   attributes:attributes];

self.label.attributedText = stringToDraw; 
```

有关 iOS 中的属性字符串的信息，请参阅：

*   [WWDC 2012 - #222 - iOS 属性字符串简介](https://developer.apple.com/videos/wwdc/2012/?id=222)

*   [WWDC 2012 - #230 - iOS 的高级属性字符串](https://developer.apple.com/videos/wwdc/2012/?id=230)

* * *

如果您需要支持 iOS 6 之前的 iOS 版本，则必须使用 CoreText 或 CoreGraphics。CoreText 演绎版可能如下所示：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];

    if (!self.text)
        return;

    // create a font

    CTFontRef sysUIFont = CTFontCreateUIFontForLanguage(kCTFontSystemFontType, self.fontSize, NULL);

    // create attributes dictionary

    NSDictionary *attributes = @{
                                 (__bridge id)kCTFontAttributeName            : (__bridge id)sysUIFont,
                                 (__bridge id)kCTForegroundColorAttributeName : (__bridge id)[self.fillColor CGColor],
                                 (__bridge id)kCTStrokeColorAttributeName     : (__bridge id)[self.borderColor CGColor],
                                 (__bridge id)kCTStrokeWidthAttributeName     : @(-3)
                                 };

    // make the attributed string

    NSAttributedString *stringToDraw = [[NSAttributedString alloc] initWithString:self.text
                                                                       attributes:attributes];

    // begin drawing

    CGContextRef context = UIGraphicsGetCurrentContext();

    // flip the coordinate system

    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // create CTLineRef

    CTLineRef line = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)stringToDraw);

    // figure out the size (which we'll use to center it)

    CGFloat ascent;
    CGFloat descent;
    CGFloat width = CTLineGetTypographicBounds(line, &ascent, &descent, NULL);
    CGFloat height = ascent + descent;
    CGSize stringSize = CGSizeMake(width, height);

    // draw it

    CGContextSetTextPosition(context,
                             (self.bounds.size.width  - stringSize.width)  / 2.0,
                             (self.bounds.size.height - stringSize.height + descent) / 2.0);
    CTLineDraw(line, context);

    // clean up

    CFRelease(line);
    CFRelease(sysUIFont);
} 
```

以上更完整的实现可以在我的[GitHub CoreText Demonstration](https://github.com/robertmryan/CoreText-Demonstration)中找到。

* * *

这是一个非常简单的 Core Graphics 实现，`drawRect`它在文本周围编写带有轮廓的文本：

```
@implementation CustomView

- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];

    if (!self.text)
        return;

    // begin drawing

    CGContextRef context = UIGraphicsGetCurrentContext();

    // flip the coordinate system

    CGContextSetTextMatrix(context, CGAffineTransformMakeRotation(M_PI_4 / 2.0));
    CGContextTranslateCTM(context, 0, self.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // write the text

    CGContextSelectFont (context, "Helvetica", self.fontSize, kCGEncodingMacRoman);
    CGContextSetTextDrawingMode (context, kCGTextFillStroke);
    CGContextSetStrokeColorWithColor(context, [[UIColor whiteColor] CGColor]);
    CGContextSetLineWidth(context, 1.5);
    CGContextSetFillColorWithColor(context, [[UIColor redColor] CGColor]);
    CGContextShowTextAtPoint (context, 40, 100, [self.text UTF8String], [self.text length]);
}

@end 
```

# android - 如何命名正确的包名称？

> ID：16038309
> 
> 赞同：4
> 
> 时间：2013-04-16T13:24:03.213
> 
> 标签：android, adt

我已经读过，
-> 创建一个 Android 项目（[http://developer.android.com/training/basics/firstapp/creating-project.html](http://developer.android.com/training/basics/firstapp/creating-project.html)）
-> 唯一的包名称（[http://docs.oracle.com/javase /specs/jls/se7/html/jls-6.html#d5e6484](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#d5e6484)）

我有一个域名“280w.info”。我刚开始 Android 编程。

1.  我认为包名称是 "info._280w.(project)" 。所以，我创建了“info._280w.Utest”。
2.  单击“调试测试”作为 Android 应用程序。午餐安卓模拟器。
3.  有错误的控制台`[2013-04-16 21:52:26 - Utest] Installation failed due to invalid APK file!`
4.  我检查了logcat。并发现错误。 `04-16 12:52:37.273: E/PackageParser(505): parsePackageLite error: <manifest> specifies bad package name "info._280w.utest": bad character '_'`
5.  接下来，我查看 PackageParser.java ( /platform/frameworks/base/+/master/core/java/android/content/pm/PackageParser.java )。
6.  我找到了验证码。`if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z')) {`在第 767 行。

此代码对 Java 的唯一包名称规则是否错误？或者，我猜包命名错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:01:33.837

简短回答：使用 Android 识别的任何包名称。

参考Android基础，

> **通常**最好使用以组织或发布者实体的反向域名开头的名称

和 Java 文档，

> 在某些情况下，Internet 域名可能不是有效的软件包名称。以下是处理这些情况的一些**建议**约定：( [http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html) )

它们只是建议，而不是严格的规则或规范。

实际上，在 Play Store 上发布的很多应用程序的包名*不是以反向域名开头的。*没有域部分检查，Android 和 Google Play 商店只检查*整个*包名，因此几乎没有命名空间发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:32:31.730

我认为问题在于下划线，但我不确定您是否可以尝试： info.280w.projectname 。

# windows-phone-8 - 如何在 windows phone 8 中屏蔽 phonetextbox 中的文本？

> ID：16038316
> 
> 赞同：0
> 
> 时间：2013-04-16T13:24:18.587
> 
> 标签：windows-phone-8

在 windows phone 8 中，如果我选择了手机文本框并在其中输入了一些文本，我想屏蔽此文本，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-10T19:08:52.780

我用这段代码解决了我的问题：

在 xml 中：

```
<toolkit:PhoneTextBox Margin="-20,48,0,0"                              
                            InputScope="TelephoneAreaCode"
                            Style="{StaticResource PhoneTextBoxStyleGreen}"                                              
                            x:Name="PhoneNumber" Height="72" VerticalAlignment="Top" Width="200" MaxLength="10" Hint="Ceular"/> 
```

视图模型：

```
private string _phoneNumber;
    public string PhoneNumber
            {
                get
                {                
                    return FormattedPhoneNumber(_phoneNumber);                
                }
                set
                {               
                    _phoneNumber = value;                       
                    NotifyOfPropertyChange(() => PhoneNumber);                
                }
            }

public string FormattedPhoneNumber(string pn)
        {
            if (pn == null)
                return string.Empty;

            switch (pn.Length)
            {
                case 5:
                    {
                        if (!pn.Contains("-"))
                        {
                            return Regex.Replace(pn, @"(\d{4})(\d{1})", "$1-$2");
                        }
                        else
                        {
                            return pn.Replace("-", String.Empty);
                        }

                    }
                case 9:
                    {
                        var sbPhoneNumber = pn.Replace("-",String.Empty);
                        return Regex.Replace(sbPhoneNumber, @"(\d{4})(\d{4})", "$1-$2");
                    }
                case 10:
                    {
                        var sbPhoneNumber = pn.Replace("-", String.Empty);
                        return Regex.Replace(sbPhoneNumber, @"(\d{5})(\d{4})", "$1-$2");                        
                    }                
                default:
                    {                        
                        return pn;
                    }
            }            
        } 
```

我的面具：如果 8 个数字：8888-8888 如果 9 个数字：00000-0000

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T14:30:11.633

**在您的 .XAML 文件中，在 TextBox 上添加 TextChanged 事件**

```
<TextBox Name="tvCelular" TextChanged="OnTextCelularChanged" MaxLength="14" InputScope="Number"/> 
```

**创建一个类 Mask.cs**

```
/// <summary>
/// created by MAYCON CARDOSO
/// </summary>
public class Mask {
    private bool isUpdating = false;
    private string old = "";

    public String unmask(String s) {
        return s.Replace(".", "").Replace("-", "")
                .Replace("/", "").Replace("(", "")
                .Replace(")", "");
    }

    public void performFilter(string mask, TextBox ediTxt) {
        string s = ediTxt.Text;

        String str = unmask(s);

        String mascara = "";
        if (isUpdating) {
            old = str;
            isUpdating = false;
            return;
        }
        int i = 0;
        foreach(char m in mask.ToCharArray()) {
            if (m != '#' && str.Length != old.Length) {
                mascara += m;
                continue;
            }
            try {
                mascara += str[i];
            }
            catch (Exception e) {
                break;
            }
            i++;
        }

        isUpdating = true;
        ediTxt.Text  = mascara;
        ediTxt.SelectionStart  = mascara.Length;
    }
} 
```

**在您的 cs 文件中添加此代码**

```
 private void OnTextCelularChanged(object sender, TextChangedEventArgs e) {
        mCelularMask.performFilter("(##)####-#####",tvCelular);    
    } 
```

# ruby-on-rails - Heroku 部署失败

> ID：16038317
> 
> 赞同：0
> 
> 时间：2013-04-16T13:24:26.370
> 
> 标签：ruby-on-rails, ruby, heroku

好的，所以我已经在这个问题上待了一天多一点，很想把这个问题搁置一旁。我正在学习 Hartl 教程，Ruby on Rails 教程，并且在第 1 章结束时尝试将我的代码部署到 heroku。

*   我查看了 stackoverflow 上的留言板，并且看到了很多关于私钥/公钥的信息，所以我输入了：ssh-keygen -t rsa 它确实生成了一个公钥/私钥对.. 它告诉我 ID 和公钥在哪里密钥已保存，并为我提供了整个密钥指纹。好的，很好。那么问题是什么？
*   问题是我已经经历了几次“heroku login、heroku create、git push heroku master”步骤，而且总是、*总是*以同样的结果结束，那就是“主机'heroku.com 的真实性（50.19 .85.154)' 无法建立。RSA 密钥指纹是 8b:48:5e:67:0e:c9:16:47:32:f2:87:0c:1f:c8:60:ad。你确定你想继续连接（是/否）？” <-- 我总是点击“否”，因为我不知道点击“是”是否很酷/安全
*   你觉得我应该怎么做？（顺便说一句，我在 OS X 中工作）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T13:51:25.677

你需要说是的！你有没有把你的密钥上传到heroku，因为这将是你的下一个问题

```
heroku keys:add 
```

# seo - Google 没有列出指向我网站的链接

> ID：16038318
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:24:28.097
> 
> 标签：seo, pagerank, google-search-console

一个多月以来，我的 Google 网站管理员帐户上列出了 24 个以上的链接。然而，当 **谷歌** `link:m.a.sharpasand.com`他们都没有出现。另外，我的页面排名**为零**。

我尝试了不同的变体`www.`和不使用`www.`，但它不起作用。

我的网站位于子域上，但我认为这不是一个因素，因为我已经永久地转发了主域。它的地址是：[masharpasand.com](http://m.a.sharpasand.com/)

提前非常感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:36:31.940

This is what I did for my website:

1.  Authenticate the website on Google's webmaster tools (www.google.com/webmasters/tools/) to certify that I am the owner of the website (they generate a file that you have to upload on your domain)

2.  Generate a XML sitemap through one of the several free sitemap generators available on-line (they can be found using Google)

3.  Upload the XML sitemap using Google's webmasters tools

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:24:30.320

谢谢大家的帮助，但我从[webmasters.stackexchange.com](https://webmasters.stackexchange.com/)得到了答案。

谷歌链接命令似乎不准确，我的网站管理员帐户中的数字很重要。这里有一篇有用的[文章](http://www.seomoz.org/blog/google-link-command-busting-the-myths)。

网站管理员论坛中的问题：[https ://webmasters.stackexchange.com/questions/47380/google-doesnt-list-the-links-to-my-website](https://webmasters.stackexchange.com/questions/47380/google-doesnt-list-the-links-to-my-website)

# ruby-on-rails-3.2 - MyApp/lib/ 目录：如何正确使用？

> ID：16038320
> 
> 赞同：0
> 
> 时间：2013-04-16T13:24:34.780
> 
> 标签：ruby-on-rails-3.2

该指南说 /lib 目录：

> lib/ - 应用程序的扩展模块。

在某处我读到我可以将我的自定义电子邮件验证器类放在那里。但是那怎么用呢？如何要求它？

现在我这样做：

```
# File with validator: MyApp/lib/myEmailValidator.rb
class EmailValidator
    def self.validate(email) ...
end

# In my "create" method, MyApp/app/controllers/hello_controller.rb
def create
    require "myEmailValidator"
    @result = EmailValidator.validate(params[:email_from_form])
end 
```

它有效，但有更好的方法来使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:28:50.153

如果您目前只需要验证，比如电子邮件或其他任何东西，是的，有更好的做法。

1.  这样的逻辑应该在模型而不是控制器中。如果您想要客户端验证，您可以使用 Javascript，但无法将它们放入控制器中。

2.  对于模型中的验证，ActiveRecord 有大量的内置方法。你可以在这里阅读它们：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)。对于您的电子邮件验证的具体问题，可以通过这样的模式匹配来完成：

    ```
    validates :email, presence: true, format: {with: /EMAIL_PATTERN_REGEX/} 
    ```

如果你需要的是关于如何扩展 Rails 核心。您的方法有效，但更好地使用 Module 或 Module 下的 Class 以添加额外的命名空间并避免名称冲突。

# c++ - 在 C++ 中播放声音......但是，游戏在播放声音时停止......我怎样才能停止这种滞后？

> ID：16038321
> 
> 赞同：7
> 
> 时间：2013-04-16T13:24:36.367
> 
> 标签：c++, winapi

声音是使用以下方法创建的：

```
PlaySound(TEXT("C:\\hitBrick.wav"), NULL, SND_FILENAME); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T13:33:37.287

正如**Ville Krumlinde**已经说过的，像这样使用 SND_ASYNC：

```
PlaySound(TEXT("C:\hitBrick.wav"), NULL, SND_FILENAME | SND_ASYNC); 
```

看看：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd743680%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743680%28v=vs.85%29.aspx)

> SND_ASYNC 声音异步播放，PlaySound 在开始声音后立即返回。要终止异步播放的波形声音，请调用 PlaySound 并将 pszSound 设置为 NULL。

# mysql - 使用 BEFORE UPDATE ON 更新列值

> ID：16038326
> 
> 赞同：1
> 
> 时间：2013-04-16T13:24:43.693
> 
> 标签：mysql, sql, triggers

我有一个如下所述的表，并且正在使用 BEFORE INSERT 触发器将列的值更新为会话定义的变量。INSERT 集的 modified_by_user 和 created_by_user 列均按预期设置为 1。然而，UPDATE 并没有像我预期的那样将 modified_by_user 更改为 2，而是将其保留为 1。如何使用 BEFORE UPDATE ON 来更新列值？我正在使用 MySQL 5.5。谢谢

```
SET @users_id=1;
INSERT INTO notes(notes,record_status_id,date_created) VALUES("hello","active",NOW());
//modified_by_user=1, created_by_user=1, notes="hello"

SET @users_id=2;
UPDATE notes SET notes="goodby" WHERE id=1;
//modified_by_user=1, created_by_user=1, notes="goodby"

CREATE  TABLE IF NOT EXISTS `notes` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `notes` TEXT NULL ,
  `record_status_id` VARCHAR(8) NOT NULL ,
  `date_created` DATETIME NOT NULL ,
  `date_modified` TIMESTAMP NOT NULL ,
  `modified_by_user` INT UNSIGNED NULL ,
  `created_by_user` INT UNSIGNED NULL ,
  PRIMARY KEY (`id`) ,
  INDEX `fk_notes_users1_idx` (`modified_by_user` ASC) ,
  INDEX `fk_notes_users2_idx` (`created_by_user` ASC) ,
  INDEX `fk_notes_record_status1_idx` (`record_status_id` ASC) ,
  CONSTRAINT `fk_notes_users10`
    FOREIGN KEY (`modified_by_user` )
    REFERENCES `users` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_notes_users20`
    FOREIGN KEY (`created_by_user` )
    REFERENCES `users` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_notes_record_status1`
    FOREIGN KEY (`record_status_id` )
    REFERENCES `record_status` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

DELIMITER $$

CREATE TRIGGER tg_notes_ins BEFORE INSERT ON notes FOR EACH ROW
BEGIN
    IF NEW.created_by_user IS NULL OR NEW.created_by_user = '' THEN
        SET NEW.created_by_user = @users_id;
        SET NEW.modified_by_user = @users_id;
    END IF;
END$$

CREATE TRIGGER tg_notes_upd BEFORE UPDATE ON notes FOR EACH ROW
BEGIN
    IF NEW.modified_by_user IS NULL OR NEW.modified_by_user = '' THEN
        SET NEW.modified_by_user = @users_id;
    END IF;
END$$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:54:14.007

在 UPDATE 上，如果查询没有为给定列指定值 NEW.column 不像我最初预期的那样为 NULL，而是该列的值不应该改变（即之前的 OLD.column 值）

# android - Intents 基础知识 - android

> ID：16038328
> 
> 赞同：2
> 
> 时间：2013-04-16T13:24:46.163
> 
> 标签：android, android-layout, android-intent

（意图的）被动数据结构的内容是什么？为什么它们被视为后期运行时绑定。?

我知道这个后期运行时间问题已经在这个论坛上，但我不太喜欢这个答案......它说“因为它不是组件之间的编译时绑定”。有人可以详细解释一下吗？

如果有人用一个例子回答它会很棒。

提前致谢

# scala - 带三引号和多行的字符串插值

> ID：16038333
> 
> 赞同：11
> 
> 时间：2013-04-16T13:25:09.423
> 
> 标签：scala, string-interpolation

`"""`使用字符串插值和换行符时，我从三重引号字符串中得到了奇怪的结果：

```
val foo = "bar"

s"""$foo""" 
```

还行吧。

```
s"""
$foo
""" 
```

这是错误的，我得到以下输出：

```
"
bar
" 
```

为什么会有引号？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T13:54:03.960

这只是用引号括起来的多行字符串的 REPL。您会发现实际的字符串不包含引号：

```
res0.contains("\"")
res1 : Boolean = false 
```

# mongodb - Mongoengine - id 字段被命名为 None

> ID：16038336
> 
> 赞同：0
> 
> 时间：2013-04-16T13:25:15.033
> 
> 标签：mongodb, mongoengine

我注意到我的应用程序中发生了一件奇怪的事情。我只是无法弄清楚我正在做的系统错误是什么，这使得我的 id 字段被命名为 None。我正在使用 mongoengine 并定义了一个文档，例如：

```
class TestDoc(Document):
    myField = StringField()
    secondField = StringField() 
```

然后，当我实例化一个 TestDoc 类型的 Python 对象时，会发生以下情况：

```
doc = models.TestDoc(myField="My field")
doc.save()

print doc.id
print "TESTING DOC: ", doc.__dict__ 
```

结果是：

```
>> 516d4e3cd836195263fdd45b
>> TESTING DOC:  {'_created': False, '_data': {None: ObjectId('516d4e3cd836195263fdd45b'), 'secondField': None, 'myField': 'My field'}, '_changed_fields': [], '_initialised': True} 
```

我不明白为什么我最终得到了一个名为 None 的奇怪字段，而不是一个名为“id”的字段，它的值是实际的 id。在数据库中，一切似乎都很好，文档看起来还不错，但是一旦我检索到一个文档并希望对其进行处理或将其转换为 json 以便通过网络发送它，这给我带来了麻烦。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:24:21.423

该`_data`字典是一个内部 mongoengine 字典，这些值可能与存储在数据库中的值不同。

为什么`None`而不是`_id`？我不是 100% 确定，迷失在时间的迷雾中 - 但它已在[#255](https://github.com/MongoEngine/mongoengine/issues/255)中修复，并将`_id`在下一个版本中发布。

# python - 生成列表中每 3 个项目的 2 个项目组合

> ID：16038341
> 
> 赞同：0
> 
> 时间：2013-04-16T13:25:34.420
> 
> 标签：python, list, combinations

我想按 3 项对列表进行分组，并尽可能简洁地按 2 项组合对每个这样的组进行迭代。我尝试了几件事，其中一个甚至没有编译：

```
from itertools import combinations
L = [1,2,3,4,5,6]
for a,b in combinations(zip(*[iter(L)]*3), 2): 
    print "{0:d} {1:d}".format(a,b) 
```

**预期产出**

```
1,2
1,3
2,3
4,5
4,6
5,6 
```

我可以通过命令式语句来做到这一点，但我正在寻找一种声明性的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:32:55.537

您正在接近，但您需要将该`combinations()`函数应用于`zip()`grouper 序列输出中的每个元组：

```
from itertools import combinations, chain

for a, b in chain.from_iterable(combinations(group, 2) for group in zip(*[iter(a)]*3)):
    print "{} {}".format(a,b) 
```

由于您现在有一个结果*序列*，`combinations()`我曾经`chain.from_iterable()`将每个结果的输出合并到一个最终序列中。

这会产生所需的输出：

```
>>> for a, b in chain.from_iterable(combinations(group, 2) for group in zip(*[iter(a)]*3)):
...     print "{} {}".format(a,b)
... 
1 2
1 3
2 3
4 5
4 6
5 6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:32:14.223

你很近。您需要一次进行组合 1 分组，然后再[`chain`](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)进行结果（实际上，`chain.from_iterable`这里更合适）。

```
from itertools import combinations,chain

lst = [1,2,3,4,5,6]
def group(a,n):
    return zip(*[iter(a)]*n)

for a,b in chain.from_iterable(combinations(grp, 2) for grp in group(lst,3)): 
    print "{0} {1}".format(a,b) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:12:57.930

这是一个基于`itertools`and`operator`的解决方案。不像其他解决方案那样简洁，但 FWIW：

```
from itertools import imap, combinations, repeat, count, takewhile, izip, chain
from operator import getitem, truth
L = [1,2,3,4,5,6]
slicers = izip(count(0, 3), count(3, 3))
slices = (getitem(L, slice(*x)) for x in slicers)
slices = takewhile(truth, slices)
for x in chain.from_iterable(imap(combinations, slices, repeat(2))):
    print x

...
(1, 2)
(1, 3)
(2, 3)
(4, 5)
(4, 6)
(5, 6) 
```

# javascript - phantomjs 标准输入的事件监听器

> ID：16038342
> 
> 赞同：8
> 
> 时间：2013-04-16T13:25:34.240
> 
> 标签：javascript, stdin, phantomjs

是否可以为 phantomjs 的`system.stdin`事件设置事件监听？

phantomjs 可以从标准输入读取但在等待输入时停止一切的示例：

```
var system = require('system');

system.stdout.writeLine('waiting for user input...');
var input = system.stdin.readLine();
// anything down here won't execute until input has been received 
```

理想的解决方案就像 nodejs 的[`process.stdin.on()`](http://nodejs.org/api/process.html#process_process_stdin)

phantomjs 似乎没有提供任何方法来做到这一点，但它仍然是可能的。

我在想我可以使用[`fs.open()`](http://phantomjs.org/api/fs/method/open.html)并轮询流以进行更改，但我不知道如何为 stdio/tty 打开正确的文件，或者这是否与我正在尝试做的事情相关。

我在 Debian 6 上使用 phantomjs 版本 1.9.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T09:58:25.927

我不确定这是否是正确的方法，或者即使它在性能方面很好，但是它工作正常，除了必须为程序发出第一个 STDIN 请求以便它初始化。

### 测试.js

```
console.log('initialising program, waiting for user input');

var stdin = require('fs').open('/dev/stdin', 'r');

setInterval(function () {
    var line = stdin.readLine();
    if (line) { console.log('>>', line); }
}, 100);

console.log('logic running async'); 
```

然后您可以创建一个 FIFO 管道并将其附加到进程

```
$ mkfifo PIPE
$ phantomjs test.js < PIPE 
```

然后在另一个终端窗口上，您可以：

```
echo hello world > PIPE 
```

输出将是：

```
initialising program
logic running async
>> hello world 
```

我认为这不适用于 Windows 机器。再说一次，这在性能方面可能真的很糟糕，因为它使用定义的间隔来捕获用户的输入，但是如果我想调试一个程序，它是一种快速简便的方法，通过评估来自那里的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T09:17:10.883

根据[问题](http://github.com/ariya/phantomjs/issues/11319)，该功能目前不可用。

尽管 stdin 可能是一个更快的选择，但我还是选择了 webserver 方法。

# c# - 如何在服务器端的 MS Dynamics CRM 中获取当前用户权限

> ID：16038346
> 
> 赞同：5
> 
> 时间：2013-04-16T13:25:40.553
> 
> 标签：c#, dynamics-crm-2011

我正在开发 MS CRM 插件，它应该能够确定当前用户是否具有对当前实体的写入权限。我不知道如何处理这项任务。

似乎目前[不支持](https://stackoverflow.com/q/5147974/1047741)完成此任务的最用户友好的方式。

除了编写 FetchXML 查询并解析其输出之外，MS CRM 2011 SDK 中还有其他选择吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T16:18:04.773

这是我想出的——这段代码将检查当前用户是否已授予当前记录的权限：

```
// Requesting user's access rights to current record
var principalAccessRequest = new RetrievePrincipalAccessRequest
{
    Principal = new EntityReference("systemuser", localContext.PluginExecutionContext.UserId),
    Target = new EntityReference(localContext.PluginExecutionContext.PrimaryEntityName, localContext.PluginExecutionContext.PrimaryEntityId)
};

// Response will contain AccessRights mask, like AccessRights.WriteAccess | AccessRights.ReadAccess | ...
var principalAccessResponse = (RetrievePrincipalAccessResponse)localContext.OrganizationService.Execute(principalAccessRequest);

if ((principalAccessResponse.AccessRights & AccessRights.WriteAccess) != AccessRights.None)
{
    ...
    ...
    ...
} 
```

如果用户必须当前记录，`if`则将执行语句内部的代码。`WriteAccess`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:15:52.500

According to Matt's Answer:

1.  Retrieve on the entity privilege
2.  Join on entity roleprivilege where privilege.privilegeid = roleprivilege.privilegeid
3.  Join on entity systemuserrole where systemuserrole.roleid = roleprivileges.roleid and systemuserrole.systemuserid = (GUID of the user in question)
4.  Then either iterate through the privileges or look for privilege where privilege.name = "prvReadMyEntityName"

You have just have to perform the joins and add the where clause you care about. Here is the Equivalent SQL:

```
SELECT Privilege.*
FROM Privilege
INNER JOIN RolePrivilege ON Privilege.PrivilegeId = RolePrivilege.PrivilegeId
INNER JOIN SystemUserRole ON SystemUserRole.RoleId = RolePrivileges.RoleId AND SystemUserRole.SystemUserId = (user's GUID)
-- WHERE Add whatever constraints on the Privilege entity that you need 
```

You can perform this using Fetch XML, or LINQ to CRM, or Query Expressions, or even OData.

# scala - Scala远程actor不会通信，为什么？

> ID：16038351
> 
> 赞同：0
> 
> 时间：2013-04-16T13:26:00.180
> 
> 标签：scala, actor

我正在尝试连接本地主机上的两个远程参与者（防火墙已禁用），但没有消息通过。我创建了一些简单的代码来表达我的问题：

演员1：

```
package test

import scala.actors._
import scala.actors.Actor._
import scala.actors.remote._
import scala.actors.remote.RemoteActor._

object Actor1 {
  RemoteActor.classLoader = getClass().getClassLoader()
}

class Actor1 extends Actor {

  def act {
    alive(9000)
    register('actor1, self)

    println("Actor1 running")
    while (true) {
      react {
        case s: String => {
          println("received1: " + s)
          sender ! "Server reply"
        }

        case _ => println("Received wierdness;)")
      }
    }
  }
} 
```

演员2：

```
package test

import scala.actors._
import scala.actors.Actor._
import scala.actors.remote._
import scala.actors.remote.RemoteActor._

object Actor2 {
  RemoteActor.classLoader = getClass().getClassLoader()
}

class Actor2 extends Actor {

  val actor1 = select(Node("127.0.0.1", 9000), 'actor1)

  def act {
    println("Sending message to actor1(" + actor1 + ")")
    actor1 ! "Message to server"

    println("Actor2 running")
    while (true) {
      react {
        case s: String => println("received2: " + s)
        case _ => println("Received wierdness;)")
      }
    }
  }
} 
```

和主要课程：

封装测试

```
object Test {

  def main(args: Array[String]): Unit = {
    val a1 = new Actor1()
    val a2 = new Actor2()

    println("Starting actors")
    a1.start
    a2.start
  }

} 
```

我究竟做错了什么？提前感谢您的帮助。

# jdbc - 如何在 JBoss 中创建具有不同驱动程序版本的数据源

> ID：16038353
> 
> 赞同：0
> 
> 时间：2013-04-16T13:26:03.357
> 
> 标签：jdbc, jboss, datasource, jboss-4.2.x

我在 lib 目录中安装了带有 Oracle 驱动程序版本 9.0.2.0 的 JBoss (4.3.0)。我想创建一个使用较新版本驱动程序的数据源，而不更改通用配置（许多其他应用程序依赖它，应该再次测试）。不幸的是，我什至不能在应用程序中使用连接池，因为这会在每次重新部署时导致 PermGen 内存泄漏（显然上下文在关闭时不会卸载驱动程序）。可能吗？

# java - Initialize database without XML configuration, but using @Configuration

> ID：16038360
> 
> 赞同：43
> 
> 时间：2013-04-16T13:26:17.913
> 
> 标签：java, spring, h2

I would like to know how to initialize a database without having to create an XML file.

I already use this kind of initialization that works fine, but in my current case I don't want to create an XML:

```
<jdbc:initialize-database data-source="dataSource">
  <jdbc:script location="classpath:com/foo/sql/db-schema.sql"/>
  <jdbc:script location="classpath:com/foo/sql/db-test-data.sql"/>
</jdbc:initialize-database> 
```

I know I can create an embedded database with:

```
EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();
EmbeddedDatabase db = builder.setType(H2).addScript("my-schema.sql").addScript("my-test-data.sql").build(); 
```

In my case, the database and schema are created using Liquibase.

I just want to initialize it with Spring and with my customized dataset, without having to create a new XML file each time just for that.

Is it possible?

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-23T09:30:23.617

The following lines of code inside your `@Configuration` class might work.

```
@Value("classpath:com/foo/sql/db-schema.sql")
private Resource schemaScript;

@Value("classpath:com/foo/sql/db-test-data.sql")
private Resource dataScript;

@Bean
public DataSourceInitializer dataSourceInitializer(final DataSource dataSource) {
    final DataSourceInitializer initializer = new DataSourceInitializer();
    initializer.setDataSource(dataSource);
    initializer.setDatabasePopulator(databasePopulator());
    return initializer;
}

private DatabasePopulator databasePopulator() {
    final ResourceDatabasePopulator populator = new ResourceDatabasePopulator();
    populator.addScript(schemaScript);
    populator.addScript(dataScript);
    return populator;
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-06-24T10:50:31.870

You have to create your own `schema.sql` and put it in your `src/main/resources`-folder.

```
import javax.sql.DataSource;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.ClassPathResource;
import org.springframework.jdbc.datasource.SimpleDriverDataSource;
import org.springframework.jdbc.datasource.init.DatabasePopulator;
import org.springframework.jdbc.datasource.init.DatabasePopulatorUtils;
import org.springframework.jdbc.datasource.init.ResourceDatabasePopulator;

@Configuration
public class DataSourceInitializer {

    @Bean(name = "dataSource")
    public DataSource getDataSource(){
        DataSource dataSource = createDataSource();
        DatabasePopulatorUtils.execute(createDatabasePopulator(), dataSource);
        return dataSource;
    }

    private DatabasePopulator createDatabasePopulator() {
        ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();
        databasePopulator.setContinueOnError(true);
        databasePopulator.addScript(new ClassPathResource("schema.sql"));
        return databasePopulator;
    }

    private SimpleDriverDataSource createDataSource() {
        SimpleDriverDataSource simpleDriverDataSource = new SimpleDriverDataSource();
        simpleDriverDataSource.setDriverClass(org.h2.Driver.class);
        simpleDriverDataSource.setUrl("jdbc:h2:target/database/example;AUTO_RECONNECT=TRUE");
        simpleDriverDataSource.setUsername("");
        simpleDriverDataSource.setPassword("");
        return simpleDriverDataSource;      
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-16T13:46:10.457

It certainly is possible.

If you already have an `@Configuration` class that is being loaded by Spring's `ApplicationContext`, then you simply have to create a new `@Bean` method that will contain the code you have there already (with an additional `return` statement of course).

`EmbeddedDatabase` implements the `DataSource` interface, so it can easily be used with `JdbcTemplate`'s.

```
@Bean
public DataSource db() {
    EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();
    builder.setType(H2).addScript("my-schema.sql").addScript("my-test-data.sql");
    return builder.build();
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-16T14:26:59.783

After looking at Spring classes related to EmbeddedDatabaseBuilder I found out that the DatabaseBuilder is using some code looking like this:

```
ResourceDatabasePopulator populator = new ResourceDatabasePopulator();
for (String sqlScript: sqlInitializationScripts ) {
  Resource sqlScriptResource = RESOURCE_LOADER.getResource(sqlScript);
  populator.addScript(sqlScriptResource);
}
DatabasePopulatorUtils.execute(populator, dataSource); 
```

This will work fine for me, even if it will be on a @BeforeTest method and not on the Spring configuration.

# vb.net - VB.NET 关闭 Excel

> ID：16038362
> 
> 赞同：1
> 
> 时间：2013-04-16T13:26:30.367
> 
> 标签：vb.net, excel

我对 Visual Basic（和这个站点）非常陌生，需要一些关于如何在使用自动化时正确退出 Excel 的建议。关于我的问题的一点背景知识：我们有一个大型 Excel 工作簿，我的老板创建了它来执行数百个相对复杂的计算。目前用户只是使用电子表格来输入他们的数据，但现在我正在开发一个 vb.net 用户界面，以允许他们输入他们的数据，并为我们提供更多的灵活性和功能，让他们的生活更轻松和让他们摆脱 Microsoft Excel 的恐惧。

打开我的 .net 应用程序后，我正在运行一个命令以在后台打开工作簿（Excel 对象的可见属性设置为 false），以便我们可以使用它。在某个时候，我们会将这些计算迁移到独立的应用程序中，但目前这不是一个具有成本效益的解决方案，因此我们将使用已经开发的电子表格。我在关闭 Excel 时遇到了一个小问题。我可以使用 FormClosing 事件顺利关闭 Excel。我的问题是：如果我的应用程序正在运行（这意味着我想要的工作簿在后台打开）并且我通过桌面上的快捷方式打开另一个工作簿，当我在另一个工作簿打开时关闭我的应用程序时，它尝试关闭第二个工作簿，并使用 Excel 的保存更改对话框提示用户。我该如何解决这个问题？我是否需要找到特定于我的计算工作簿的进程并关闭它而不是关闭我创建的 Excel 对象？

这是我的 FormClosing 事件的代码：

```
Private Sub Form8_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing

 'close the workbook

xlWorkbook.Close(SaveChanges:=False)

'clean up

System.Runtime.InteropServices.Marshal.ReleaseComObject(xlWorkbook)

xlWorkbook = Nothing

'close the excel application

xlApp.Quit()

'clean up

System.Runtime.InteropServices.Marshal.ReleaseComObject(xlApp)

xlApp = Nothing

End Sub 
```

编辑：我知道这个问题的发生是因为 Excel 打开它的文件的方式。除非您转到开始菜单并打开一个新的 Excel 实例，否则 Excel 将在已运行的应用程序对象中打开您的文件。这让我相信这个问题可能是不可避免的，但即使你只是头脑风暴，我也会喜欢一些反馈

任何意见是极大的赞赏。谢谢，埃里克

PS，感谢将我的代码放在代码标签中的人！我保证我会自己弄清楚如何做到这一点；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:02:35.457

您可以在其中添加一些代码，`Workbook_BeforeClose`以防止在需要时将书关闭。

您可以通过多种方式执行此操作，最简单的方法是将其直接添加到您的工作表中，您也可以在 vb.net 中挂钩事件（公共事件类型的东西，我只在 VBA 中完成，所以无法帮助.net 变体）

这是一个可能有效的简单 VBA 解决方案。

模块 - 给它一个名字，例如：Main

```
Public Sub UnlockWorkbook()
Dim Window As Window

For Each Window In ThisWorkbook.Windows
    Window.Visible = True
Next Window

End Sub

Public Sub LockWorkbook()
Dim Window As Window

For Each Window In ThisWorkbook.Windows
    Window.Visible = False
Next Window

End Sub 
```

ThisWorkbook 模块

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)

For Each Window In ThisWorkbook.Windows
    If Window.Visible = False Then
        Cancel = True
        If Application.Workbooks.Count = 1 Then
            Application.Visible = False
        End If
        Exit For
    End If
Next Window

End Sub

Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
SaveAsUI = False
End Sub 
```

当您加载工作簿时，使用您的应用程序调用“LockWorkbook”宏将隐藏工作簿，您也可以隐藏应用程序。

现在，如果用户打开另一个工作簿，取消隐藏应用程序，当他们关闭工作簿并尝试关闭应用程序时，它应该停止该操作，并为您重新隐藏应用程序。

当您确实想关闭工作簿时，您需要调用“UnlockWorkbook”宏，这将允许“Worksheet_BeforeClose”完成，而无需将 Cancel 设置为 true。

# c# - NpgsqlDataAdapter 对象引用未设置为对象的实例

> ID：16038363
> 
> 赞同：0
> 
> 时间：2013-04-16T13:26:30.423
> 
> 标签：c#, npgsql

我正在为 Postgresql 使用 .Net 提供程序，当我运行以下代码时，我得到“对象引用未设置为对象的实例”。错误。

## 我从表单运行以下代码：

```
DataTable x = new DataTable(); 
x = cmdGetRow("select * from employee;"); // I get the error here 
```

## 调用此函数：

```
public DataTable cmdGetRow(String SQL)
        {
                NpgsqlDataAdapter NpAdapter = new NpgsqlDataAdapter();
                DataSet dset = new DataSet("hr");
                NpAdapter.SelectCommand = new NpgsqlCommand(SQL, dbConnection);
                NpAdapter.Fill(dset, "employee");
                return dset.Tables["employee"];

        } 
```

你能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:30:46.687

尝试：

```
DataTable x = new DataTable(); 
cmdGetRow("select * from employee;", ref x);

public void cmdGetRow(String SQL, ref table)
{
    NpgsqlDataAdapter NpAdapter = new NpgsqlDataAdapter();
    DataSet dset = new DataSet("hr");
    NpAdapter.SelectCommand = new NpgsqlCommand(SQL, dbConnection);
    NpAdapter.Fill(dset, "employee");
    table = dset.Tables["employee"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-01T10:32:06.277

也许这可以帮助你：在从数据库获取数据之前，确保有一个连接并且连接是打开的。

```
public DataTable cmdGetRow(String SQL)
    {
            string conString = String.Format("Server={0};Port={1};User Id={2};Password={3};Database={4};",
            _server, _port, _userId, _password, _database);
            NpgsqlConnection connection = new NpgsqlConnection(conString);
            connectin.Open();
            NpgsqlDataAdapter command = new NpgsqlDataAdapter(sql, connection);
            DataSet dataSet = new Dataset();
            dataSet.Reset();
            command.Fill(dataSet);
            return dataSet.Tables[0];
    } 
```

# javascript - 基于数字选择的Javascript计算 - HTML

> ID：16038364
> 
> 赞同：0
> 
> 时间：2013-04-16T13:26:33.253
> 
> 标签：javascript, html

我想为不同的菜单选择显示不同的选项。如果 MenuNo1 (textinput) = 1,2,3,4 或 5 - 那么 menuPrice1 的值应该是 R70.00 如果 MenuNo1(textinput) = 8,9,12 - 那么 menuPrice1 的值应该是 R85 .00 如果 MenuNo1 (textinput) = 11 - 那么 menuPrice1 的值应该是 R105.00

我试过这样做：

> ```
> function calcMenu(form) {
> var MenuPrice1 = (+form.MenuPrice1.value);
> var MenuNo1 = (+form.MenuNo1.value);
> 
> if ([1,2,3,4,5].indexOf(+form.MenuNo1.value) != -1) {
>     MenuPrice1.value = "70";
> } 
> else if ([8,9,12].indexOf(+form.MenuNo1.value) != -1) {
>     MenuPrice1.value = "85";
> }
> else if (+form.MenuNo1.value == 11)  {
>     MenuPrice1.value = "105";    }  } 
> ```

但我确定我的代码有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:29:13.397

您需要使用`||`OR 运算符

```
if (+form.MenuNo1.value === '8' || 
    +form.MenuNo1.value === '9' || 
    +form.MenuNo1.value === '12' ) 
```

您还需要使用 == 或 === 来检查它是否等于

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:31:22.850

```
function calcMenu(form) {
    if ([1,2,3,4,5].indexOf(+form.MenuNo1.value) != -1) {
        MenuPrice1.value = "70";
    } 
    else if ([8,9,12].indexOf(+form.MenuNo1.value) != -1) {
        MenuPrice1.value = "85";
    }
    else if (+form.MenuNo1.value == 11)  {
        MenuPrice1.value = "105";
   } 
} 
```

您可以在这里看到以这种方式工作的 indexOf 方法的示例：http: [//jsfiddle.net/fHzEG/](http://jsfiddle.net/fHzEG/)

# java - 控制器中的 SpringMVC 多重验证

> ID：16038365
> 
> 赞同：1
> 
> 时间：2013-04-16T13:26:33.837
> 
> 标签：java, spring-mvc

我有一个应用程序需要对不同功能进行不同类型的验证。我想为不同的请求设置不同的验证器。我看到一些关于验证外观的讨论是否有人有任何关于设置验证外观或在一个控制器中允许多个验证器的好例子。

目前我正在使用设置验证器 binder.setValidator(....) 的传统方式

# android - Android Bitmap.getPixel 总是返回负数

> ID：16038369
> 
> 赞同：2
> 
> 时间：2013-04-16T13:26:43.947
> 
> 标签：android, bitmap, android-imageview, getpixel

我是一个使用 Android 的新手，现在已经在这个问题上工作了四天。我真的很感激有人的帮助。

我在 ImageView 中有一个图像，我想获取用户触摸的图像部分的颜色。为此，我正在使用 Bitmap.getPixel() 函数。问题是，这个函数的返回值总是负数，正如文档所说，这是错误的。我没有得到正确的颜色值，而且我确实以多种方式尝试过（RGB、HSV ...）。有人可以解释一下，为什么我的 Bitmap.getPixel() 函数总是返回负值？提前致谢。

这是我的 .java 代码：

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final ImageView imageView = (ImageView) findViewById(R.id.imageView1);
        imageView.setOnTouchListener(new ImageView.OnTouchListener(){
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_DOWN) {
                    Drawable imgDrawable = ((ImageView)imageView).getDrawable();
                    Bitmap mutableBitmap = Bitmap.createBitmap(imageView.getWidth(), imageView.getHeight(), Bitmap.Config.ARGB_8888);
                    Canvas canvas = new Canvas(mutableBitmap);
                    imgDrawable.draw(canvas);
                    int pixel = mutableBitmap.getPixel((int)event.getX(), (int)event.getY());
                    Log.i("PIXEL COLOR", ""+pixel);

                    int alpha = Color.alpha(pixel);
                    int red = Color.red(pixel);
                    int blue = Color.blue(pixel);
                    int green = Color.green(pixel);
                    String color = String.format("#%02X%02X%02X%02X", alpha, red, green, blue);
                    Log.i("RGB", color);

                    float[] hsv = new float[3];
                    Color.RGBToHSV(red, green, blue, hsv);
                    Log.i("HSV_H", "Hue=" + hsv[0]);
                    Log.i("HSV_H", "Saturation=" + hsv[1]);
                    Log.i("HSV_H", "Value=" + hsv[2]);
               }
               return true;
            }
        });
} 
```

}

这是我的 .xml 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:src="@drawable/lapices" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:29:32.740

那可能是因为它不是`BitmapDrawable`.

在我的回答中查看[https://stackoverflow.com/a/16037415/906362](https://stackoverflow.com/a/16037415/906362)`Drawable``Bitmap`

**编辑：**

试试这个：

```
Drawable imgDrawable = ((ImageView)imageView).getDrawable();
Bitmap mutableBitmap = Bitmap.createBitmap(imageView.getWidth(), imageView.getHeight(), Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(mutableBitmap);
imgDrawable.draw(canvas);
int pixel = mutableBitmap.getPixel((int)event.getX(), (int)event.getY()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T13:09:53.937

答案不正确：“这可能是因为它不是可绘制的位图。”

正如小评论中提到的，这是因为包含颜色的整数的大小。结果是消极的或积极的。

所以：GetPixel 正在返回正确的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-27T11:41:51.503

当您将图像设置为 fitXY scaletype 时，您可能会得到错误的值。删除 scaletype 并重试。

# sockets - 蓝牙 Secureaccept() 失败，Nexus 7，Android 4.2.2

> ID：16038372
> 
> 赞同：5
> 
> 时间：2013-04-16T13:26:47.240
> 
> 标签：sockets, bluetooth, android-4.2-jelly-bean, nexus-7

我正在运行来自 Android SDK 4.2 示例包的蓝牙聊天示例，没有修改代码。我的目标是运行 Android 4.2.2 的 Nexus 7。一旦我尝试安全连接到配对设备，我就会收到这些错误。Connect Insecure 也失败，导致类似的错误。偶尔重启BT后，连接会成功。

我对此进行了研究，并在 Android 4 上看到了很多对 BT 问题的引用，但我认为它们应该在随后的 4.2 版本中得到修复。Nexus 7 是我唯一的设备，所以我想知道这是否发生在其他设备上。

有解决此问题的方法吗？提前感谢您的任何指导！

更新：经过进一步调查，我发现[了这个链接](http://code.google.com/p/android/issues/detail?id=41110)，这表明 BT 资源堆栈中存在泄漏，在 4.2.2 中仍然存在，可以通过手动停止/重新启动 BT 来解决。有没有人找到程序化的解决方法？

```
04-16 08:50:48.505: E/BluetoothChat(28905): +++ ON CREATE +++
04-16 08:50:48.535: E/BluetoothChat(28905): ++ ON START ++
04-16 08:50:48.535: D/BluetoothChat(28905): setupChat()
04-16 08:50:48.535: E/BluetoothChat(28905): + ON RESUME +
04-16 08:50:48.535: D/BluetoothChatService(28905): start
04-16 08:50:48.535: D/BluetoothChatService(28905): setState() 0 -> 1
04-16 08:50:48.545: W/BluetoothAdapter(28905): getBluetoothService() called with no BluetoothManagerCallback
04-16 08:50:48.545: D/BluetoothChatService(28905): Socket Type: SecureBEGIN mAcceptThreadThread[Thread-9834,5,main]
04-16 08:50:48.545: W/BluetoothAdapter(28905): getBluetoothService() called with no BluetoothManagerCallback
04-16 08:50:48.545: D/BluetoothChatService(28905): Socket Type: InsecureBEGIN mAcceptThreadThread[Thread-9835,5,main]
04-16 08:50:48.555: I/BluetoothChat(28905): MESSAGE_STATE_CHANGE: 1
04-16 08:50:48.615: D/libEGL(28905): loaded /system/lib/egl/libEGL_tegra.so
04-16 08:50:48.635: D/libEGL(28905): loaded /system/lib/egl/libGLESv1_CM_tegra.so
04-16 08:50:48.645: D/libEGL(28905): loaded /system/lib/egl/libGLESv2_tegra.so
04-16 08:50:48.675: D/OpenGLRenderer(28905): Enabling debug mode 0
04-16 08:52:08.625: E/BluetoothChat(28905): - ON PAUSE -
04-16 08:52:08.755: D/dalvikvm(28905): GC_CONCURRENT freed 134K, 4% free 7529K/7792K, paused 3ms+3ms, total 29ms
04-16 08:52:10.115: D/BluetoothChat(28905): onActivityResult -1
04-16 08:52:10.115: D/BluetoothChatService(28905): connect to: C8:D1:5E:2F:12:E8
04-16 08:52:10.115: D/BluetoothChatService(28905): setState() 1 -> 2
04-16 08:52:10.115: I/BluetoothChatService(28905): BEGIN mConnectThread SocketType:Secure
04-16 08:52:10.115: E/BluetoothChat(28905): + ON RESUME +
04-16 08:52:10.125: W/BluetoothAdapter(28905): getBluetoothService() called with no BluetoothManagerCallback
04-16 08:52:10.125: D/BluetoothSocket(28905): connect(), SocketState: INIT, mPfd: {ParcelFileDescriptor: FileDescriptor[54]}
04-16 08:52:10.135: I/BluetoothChat(28905): MESSAGE_STATE_CHANGE: 2
04-16 08:52:11.645: D/BluetoothChatService(28905): connected, Socket Type:Secure
04-16 08:52:11.645: D/BluetoothChatService(28905): Socket TypeSecurecancel Thread[AcceptThreadSecure,5,main]
04-16 08:52:11.645: D/BluetoothChatService(28905): Socket TypeInsecurecancel Thread[AcceptThreadInsecure,5,main]
04-16 08:52:11.645: D/BluetoothChatService(28905): create ConnectedThread: Secure
04-16 08:52:11.655: E/BluetoothChatService(28905): Socket Type: Insecureaccept() failed
04-16 08:52:11.655: E/BluetoothChatService(28905): java.io.IOException: read failed, socket might closed or timeout, read ret: -1
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothSocket.readAll(BluetoothSocket.java:492)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothSocket.waitSocketSignal(BluetoothSocket.java:469)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothSocket.accept(BluetoothSocket.java:393)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothServerSocket.accept(BluetoothServerSocket.java:131)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothServerSocket.accept(BluetoothServerSocket.java:117)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at com.example.android.BluetoothChat.BluetoothChatService$AcceptThread.run(BluetoothChatService.java:301)
04-16 08:52:11.655: D/BluetoothChatService(28905): setState() 2 -> 3
04-16 08:52:11.655: I/BluetoothChatService(28905): END mAcceptThread, socket Type: Insecure
04-16 08:52:11.655: E/BluetoothChatService(28905): Socket Type: Secureaccept() failed
04-16 08:52:11.655: E/BluetoothChatService(28905): java.io.IOException: read failed, socket might closed or timeout, read ret: -1
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothSocket.readAll(BluetoothSocket.java:492)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothSocket.waitSocketSignal(BluetoothSocket.java:469)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothSocket.accept(BluetoothSocket.java:393)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothServerSocket.accept(BluetoothServerSocket.java:131)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothServerSocket.accept(BluetoothServerSocket.java:117)
04-16 08:52:11.655: E/BluetoothChatService(28905):  at com.example.android.BluetoothChat.BluetoothChatService$AcceptThread.run(BluetoothChatService.java:301)
04-16 08:52:11.655: I/BluetoothChatService(28905): END mAcceptThread, socket Type: Secure
04-16 08:52:11.655: I/BluetoothChatService(28905): BEGIN mConnectedThread
04-16 08:52:11.665: I/BluetoothChat(28905): MESSAGE_STATE_CHANGE: 3
04-16 08:52:36.985: E/BluetoothChat(28905): - ON PAUSE -
04-16 08:52:37.005: E/BluetoothChat(28905): -- ON STOP --
04-16 08:52:37.015: D/BluetoothChatService(28905): stop
04-16 08:52:37.015: E/BluetoothChatService(28905): disconnected
04-16 08:52:37.015: E/BluetoothChatService(28905): java.io.IOException: bt socket closed, read return: -1
04-16 08:52:37.015: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothSocket.read(BluetoothSocket.java:416)
04-16 08:52:37.015: E/BluetoothChatService(28905):  at android.bluetooth.BluetoothInputStream.read(BluetoothInputStream.java:96)
04-16 08:52:37.015: E/BluetoothChatService(28905):  at java.io.InputStream.read(InputStream.java:163)
04-16 08:52:37.015: E/BluetoothChatService(28905):  at com.example.android.BluetoothChat.BluetoothChatService$ConnectedThread.run(BluetoothChatService.java:454)
04-16 08:52:37.015: D/BluetoothChatService(28905): setState() 3 -> 0
04-16 08:52:37.015: E/BluetoothChat(28905): --- ON DESTROY ---
04-16 08:52:37.015: D/BluetoothChatService(28905): start
04-16 08:52:37.015: D/BluetoothChatService(28905): setState() 0 -> 1
04-16 08:52:37.025: W/BluetoothAdapter(28905): getBluetoothService() called with no BluetoothManagerCallback
04-16 08:52:37.045: D/BluetoothChatService(28905): Socket Type: SecureBEGIN mAcceptThreadThread[Thread-9842,5,main]
04-16 08:52:37.115: W/BluetoothAdapter(28905): getBluetoothService() called with no BluetoothManagerCallback
04-16 08:52:37.125: E/BluetoothChat(28905): +++ ON CREATE +++
04-16 08:52:37.125: D/BluetoothChatService(28905): start
04-16 08:52:37.125: D/BluetoothChatService(28905): setState() 1 -> 1
04-16 08:52:37.125: D/BluetoothChatService(28905): Socket Type: InsecureBEGIN mAcceptThreadThread[Thread-9843,5,main]
04-16 08:52:37.155: E/BluetoothChat(28905): ++ ON START ++
04-16 08:52:37.155: D/BluetoothChat(28905): setupChat()
04-16 08:52:37.155: E/BluetoothChat(28905): + ON RESUME +
04-16 08:52:37.155: D/BluetoothChatService(28905): start
04-16 08:52:37.155: D/BluetoothChatService(28905): setState() 0 -> 1
04-16 08:52:37.165: W/BluetoothAdapter(28905): getBluetoothService() called with no BluetoothManagerCallback
04-16 08:52:37.165: W/BluetoothAdapter(28905): getBluetoothService() called with no BluetoothManagerCallback
04-16 08:52:37.165: D/BluetoothChatService(28905): Socket Type: SecureBEGIN mAcceptThreadThread[Thread-9844,5,main]
04-16 08:52:37.175: D/BluetoothChatService(28905): Socket Type: InsecureBEGIN mAcceptThreadThread[Thread-9845,5,main]
04-16 08:52:37.215: I/BluetoothChat(28905): MESSAGE_STATE_CHANGE: 0
04-16 08:52:37.215: I/BluetoothChat(28905): MESSAGE_STATE_CHANGE: 1
04-16 08:52:37.225: I/BluetoothChat(28905): MESSAGE_STATE_CHANGE: 1
04-16 08:52:37.225: I/BluetoothChat(28905): MESSAGE_STATE_CHANGE: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T17:39:04.720

看看我的问题。 [安卓蓝牙无法连接](https://stackoverflow.com/questions/17763779/android-bluetooth-cant-connect)

看起来它是Android本身的问题，而不是你的代码。

# eclipse - 如何阻止 p2 导演解决我们插件之一的可选依赖项？

> ID：16038379
> 
> 赞同：1
> 
> 时间：2013-04-16T13:26:57.890
> 
> 标签：eclipse, p2, pde

我们有一个 PDE 构建，创建了一个大型 p2 存储库。我们在 PDE 构建期间跳过 p2 导向器，以在特定功能（已构建的子功能）上调用 p2.director。

问题是我们的一个插件有一个我们不想满足的可选依赖项，而所有其他可选依赖项都应该得到满足。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-20T15:25:34.133

如果您使用更新版本的 PDE 无头构建（或者可能还有任何其他构建工具），**所有可选的清单依赖项都将转换为可选的、非贪婪的 p2 依赖项**（即当 p2 解析安装计划时忽略的依赖项。 ) 这里的背景是，在 Juno M1 版本中，[p2 发布者被更改为默认生成可选的、非贪婪的 p2 依赖项](https://bugs.eclipse.org/bugs/show_bug.cgi?id=247099#c83)。

如果您确实想要一个可选的、贪婪的 p2 依赖项，您可以通过 p2.inf 更改贪婪`requires.<n>.greedy=true`，或者在 MANIFEST.MF 中添加`x-installation`指令：

```
Import-Package: org.example;resolution:=optional;x-installation:=greedy 
```

* * *

更一般地说，您应该**避免可选的、贪婪的 p2 依赖项**。原因是它们可能会在您的用户安装中导致令人惊讶的行为：如果最初不满足可选的贪婪依赖项，并且用户碰巧使用包含依赖项的 p2 存储库（例如，安装完全不相关的东西），则贪婪的依赖也将被添加到安装中。因此，对于可选的贪婪依赖项，在将 p2 存储库添加到可用软件站点列表后，安装可能会“随机”更改。

因此，您应该将所有依赖项保留为可选的、非贪婪的，而是提供两个包含您的插件的功能：一个具有可选依赖项，一个不具有可选依赖项。通过这种方式，您的用户可以完全控制他们是否想要安装可选的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T13:00:34.233

我终于设法告诉 p2 通过在插件的 META-INF/ 文件夹中创建一个 p2.inf 文件来避免仅在此插件中查找可选依赖​​项。

p2.inf 只是告诉可选的导入包是非贪婪的，这意味着它不会尝试解决这种依赖关系。

这是一个例子：

```
requires.0.namespace=java.package
requires.0.name=com.lowagie.text
requires.0.greedy=false
requires.0.optional=true
requires.1.namespace=java.package
requires.1.name=com.lowagie.text.exceptions
requires.1.greedy=false
requires.1.optional=true 
```

# css - 将包含浮动 div 的 div 居中

> ID：16038382
> 
> 赞同：0
> 
> 时间：2013-04-16T13:27:09.160
> 
> 标签：css, html, css-float, center

我有这个代码：

```
<div id="cuerpo">
<?php foreach ($sistemas as $cada) { ?>
    <div id="show">
        <a href="<?php echo "index.php?zona=acceso&id=" . $cada['id']; ?>" target="_self"><?php echo $cada['nombre']; ?></a>
        <p><?php echo $cada['descripcion']; ?></p>
    </div>
<?php } ?>
</div> 
```

所以我有一个`div`带有 id`"cuerpo"`的盒子，它将模拟一个包含所有`$sistemas`被`div`调用的盒子`"show"`。

然后，我有这个CSS：

```
#cuerpo
{
width: 800px;
margin: 0 auto;
margin-top: 25px;
padding-bottom: 5px;
border: solid 2px black;
}
#show
{
width: 200px;
margin-top: 10px;
margin-left: 5px;
border: solid 1px black;
padding: 5px;
} 
```

而且，如果我使用`float: left;`网页中的所有内容，将是未配置的并且非常糟糕。

我想要这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/L4SJJ.png)

PS：我`scheme`的一切都在工作，但不是浮动的东西。

谢谢你的帮助！

**编辑1：**

我根据接受的答案发布了一张带有我实际问题的图片。

![在此处输入图像描述](https://i.stack.imgur.com/uqnPB.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:36:40.180

仅`display:inline-block`用于您的`#show`容器。请参阅此处的示例：http: [//jsfiddle.net/GLp3Y/](http://jsfiddle.net/GLp3Y/)

****__ *_* __ *_* __ *_* __ *_* __ *_* __** **编辑** ***_* __ *_* __ *_* __ *_* __ *_* __ *_*****

 **如果需要使用`float`必须将父容器设置为`overflow:hidden`. 在此处查看演示：http: [//jsfiddle.net/GLp3Y/4/](http://jsfiddle.net/GLp3Y/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:31:14.183

你试过了吗

```
#cuerpo{
margin-left : 10%
margin-right : 10%} 
```

这将使它居中

或者你可以把它放在一个 div 中，使这个 div 全角并使用 text-align:center 和 div 和 display:inline 在 cuerpo**

# css - 如何按条件通过媒体查询导入css文件

> ID：16038384
> 
> 赞同：0
> 
> 时间：2013-04-16T13:27:17.473
> 
> 标签：css, media-queries

在我的外部 css 文件中，我正在尝试使用导入加载 css ......但我无法有条件地导入 css 文件......

有什么办法吗？

我的尝试：

```
body {
    background: url(../images/1024/css/bodyBg.jpg);
}
body > section > header{
    background: url(../images/1024/css/headerBg.jpg) top repeat-x;
    height: 93px;
    border: solid black;
    border-width: 5px 0;
}

@media screen and (max-width: 768px){
    @import url(../styles/sedms.css); // i am not able to import... 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:48:26.140

正确的格式是

`@import url(../styles/sedms.css) (max-width:768px);`

见这里： http: [//philarcher.org/diary/2011/importrules/](http://philarcher.org/diary/2011/importrules/)

# ruby - 如何移动文件指针

> ID：16038392
> 
> 赞同：1
> 
> 时间：2013-04-16T13:27:44.663
> 
> 标签：ruby

我需要在打开的文件中移动指针。我怎么能做这样的事情？

```
File.open('example.txt', 'a+') do |f|
  f.move_pointer -1
  f.write 'end'
end 
```

在我的示例中，我需要用我的文本替换最后一个字符

**更新** 我设法完成了任务，但它看起来很冗长且无效：

```
File.open('example.txt', 'r+') do |f|
  contents = f.read[0...-1]
  f.rewind
  f.write contents + 'end'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:34:37.360

试试`f.seek(-1, IO::SEEK_END)`。

（我在[http://ruby-docs.com/docs/ruby_1.9.3/index.html](http://ruby-docs.com/docs/ruby_1.9.3/index.html)上找到了这个）

**编辑**

我能够以这种方式覆盖换行符终止文件的最后一个（非换行符）字符：

```
File.open('example.txt', 'r+') do |f|
  # go back 2 from the end, to overwrite 1 character and the final \n
  f.seek(-2, IO::SEEK_END)
  f.write("end\n")
end 
```

# php - Kohana PHP 和模块钩子

> ID：16038398
> 
> 赞同：0
> 
> 时间：2013-04-16T13:28:13.540
> 
> 标签：php, hook, kohana

我们正在运行一个相当定制的 Kohana PHP 版本，其中我们有大量的基本模块在运行并用于每个网页。

我的任务是加速我们的一些应用程序，我们使用和编写的模块之一，包含在每个应用程序中，有一个初始化会话的钩子。

现在这对大多数应用程序来说都不是问题，除了我们拥有的提供图像的应用程序，因为它只是被其他应用程序调用，因此不需要会话。

例如，我们有模块钩子：`/modules/mod_name/hooks/sessions_hooks.php`

在我的应用程序中，我有应用程序挂钩目录：`/application/hooks/sessions_hooks.php`

从表面上看，应用程序钩子并没有覆盖模块一。我尝试在我的应用程序下创建一个与 kohana 主模块目录类似的模块结构，但这也无济于事。实际上看起来模块在其他任何事情发生之前就已完全加载，但我可能是错的。

如何使用网站应用程序挂钩覆盖模块挂钩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:00:15.383

你不能。Kohana 包含每个挂钩文件。如果您在该模块挂钩中添加特殊检查怎么办？例如，您可以加载配置值。

# jquery - 如何修复 jQuery 中的这个常见错误？

> ID：16038400
> 
> 赞同：3
> 
> 时间：2013-04-16T13:28:20.227
> 
> 标签：jquery, closures

我正在 [mozilla.org](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)上研究 Javascript 中的闭包。有一个部分叫做常见错误，这让我大吃一惊。我不知道它到底在说什么。

代码如下，

```
<p id="help">Helpful notes will appear here</p>
<p>E-mail: <input type="text" id="email" name="email"></p>
<p>Name: <input type="text" id="name" name="name"></p>
<p>Age: <input type="text" id="age" name="age"></p>
function showHelp(help) {
  document.getElementById('help').innerHTML = help;
}

function setupHelp() {
  var helpText = [
      {'id': 'email', 'help': 'Your e-mail address'},
      {'id': 'name', 'help': 'Your full name'},
      {'id': 'age', 'help': 'Your age (you must be over 16)'}
    ];

  for (var i = 0; i < helpText.length; i++) {
    var item = helpText[i];
    document.getElementById(item.id).onfocus = function() {
      showHelp(item.help);
    }
  }
}

setupHelp(); 
```

文本出现在帮助中

只会显示最后一个帮助“你的年龄（你必须超过 16 岁）”，解决方案是在 setupHelp 之外重写 showHelp 函数

```
function makeHelpCallback(help) {
  return function() {
    showHelp(help);
  };
}

function setupHelp() {
  var helpText = [
      {'id': 'email', 'help': 'Your e-mail address'},
      {'id': 'name', 'help': 'Your full name'},
      {'id': 'age', 'help': 'Your age (you must be over 16)'}
    ];

  for (var i = 0; i < helpText.length; i++) {
    var item = helpText[i];
    document.getElementById(item.id).onfocus = makeHelpCallback(item.help);
  }
}

setupHelp(); 
```

我不明白它解决问题的机制。由于我从不使用javascript访问DOM，而是使用jQuery，所以我重写了jQuery中的函数

```
function makeHelpCallback(i) {
    return function () {
        $("#help").text(i);
    };
}
(function () {
    var helpText = [
    { 'id': 'email', 'help': 'Your e-mail address' },
    { 'id': 'name', 'help': 'Your full name' },
    { 'id': 'age', 'help': 'Your age (you must be over 16)' }
    ];

    for (var i = 0; i < helpText.length; i++) {
        var item = helpText[i];
        $("#"+item.id).focus(function () {
            new makeHelpCallback(item.help)();
        });
    }
})(); 
```

但是错误并没有消失。据我所知，jQuery 没有 onfocus 处理程序，不可能将处理程序绑定到同一级别的侦听器。它必须在 function(){} 下。而且我无法达到与 Javascript 相同的效果。

那么无论如何要编写与Javascript代码等效的代码吗？

正如解释所说，它不起作用，因为听众共享相同的环境。不管是什么意思，onfocus = function(){showHelp(item.help)} 分别执行了三次。他们应该受到相应的约束。为什么他们会出现相同的情况？因为 showHelp 是一个静态对象？如果是这样，添加一个新的修饰符应该可以完成工作。并且 makeHelpCallback(item.help) 也共享相同的环境。但它有效。为什么为什么为什么？？？

为了您的测试方便，附上完整的 HTML 代码。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <p id="help">Helpful notes will appear here</p>
    <p>E-mail:
        <input type="text" id="email" name="email"></p>
    <p>Name:
        <input type="text" id="name" name="name"></p>
    <p>Age:
        <input type="text" id="age" name="age"></p>

    <script src="Scripts/jquery-1.9.1.min.js"></script>

    <script>
        function makeHelpCallback(i) {
            return function () {
                $("#help").text(i);
            };
        }
        (function () {
            var helpText = [
            { 'id': 'email', 'help': 'Your e-mail address' },
            { 'id': 'name', 'help': 'Your full name' },
            { 'id': 'age', 'help': 'Your age (you must be over 16)' }
            ];

            for (var i = 0; i < helpText.length; i++) {
                var item = helpText[i];
                $("#" + item.id).focus(function () {
                    makeHelpCallback(item.help)();
                });
            }
        })();
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:41:46.503

我会在下面给你答案，但我建议你试着自己弄清楚。一些提示：

你到底传递给该`focus`方法的是什么？

你的函数的变量是如何定义的？请记住，您需要了解函数*何时执行。*

在您的代码中：

```
$("#"+item.id).focus(function () {
        new makeHelpCallback(item.help)();
    }); 
```

*将函数*传递给`focus`，稍后（当焦点事件发生时）调用此函数，在循环完成并将`item`变量设置为最后一项之后。你应该做的是传递一个函数，它有自己的局部变量，在你调用时绑定`focus`。这就是重点`makeHelpCallback`！你的代码应该是这样的：

```
 $("#"+item.id).focus(makeHelpCallback(item.help)); 
```

`makeHelpCallback`返回一个函数，在这里，如果这对您来说更清楚，请将其全部内联：

```
$("#"+item.id).focus((function (i) {
    // this function is executed immediately
    // i is bound to the correct item.
    return function () {
        $("#help").text(i);
    };
})()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:43:09.550

一个简单的例子更容易理解：

```
var i;
var funcsToRun = [];
for (i = 0; i < 3; ++i) {
  funcsToRun.push(function() { alert(i); });
}
funcsToRun[0](); // "3"
funcsToRun[1](); // "3"
funcsToRun[2](); // "3" 
```

这是因为警报使用的“i”是闭包的一部分，并且被粘在变量“i”上，在您执行函数时，该变量的值是 3。但：

```
var i;
var funcsToRun = [];
for (i = 0; i < 3; ++i) {
  funcsToRun.push(
    (function(idx) {
      return function() { alert(idx); };
    })(i)
  );
}
funcsToRun[0](); // "0"
funcsToRun[1](); // "1"
funcsToRun[2](); // "2" 
```

之所以有效，是因为不是将警报附加到变量“i”，而是将其附加到“idx”，它立即被评估为循环内的“i”的值，而不是在它之后。所以内部函数立即运行，但只是返回另一个函数`alert(0)`而不是`alert(i)`。

使用这种思路，您可以将其应用于更大的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:09:59.720

感谢乔的简化示例。我想我可以掌握它。我试着把乔的例子放到程序序列中。让我知道我错了。

```
var i;
var funcsToRun = [];

//for loop begins
i = 0
//i = 0
funcsToRun.push(function() { alert(i); }); // function(){ alert(i)} is not executed. i remains i.
i++ //i = 1
funcsToRun.push(function() { alert(i); });
i++ //i = 2
funcsToRun.push(function() { alert(i); });
i++ //i = 3 loop stopped. although the for loop completes, i remains in memory. It is not destroyed albeit its completion.

funcsToRun[0](); // function(){alert(i)} executes this moment, and i is 3 now.
funcsToRun[1](); // "3"
funcsToRun[2](); // "3" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:56:55.443

最后我用 jQuery 实现了结果

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <p id="help">Helpful notes will appear here</p>
    <p>
        E-mail:
        <input type="text" id="email" name="email">
    </p>
    <p>
        Name:
        <input type="text" id="name" name="name">
    </p>
    <p>
        Age:
        <input type="text" id="age" name="age">
    </p>

    <script src="Scripts/jquery-1.9.1.min.js"></script>

    <script>

        (function () {
            var helpText = [
            { 'id': 'email', 'help': 'Your e-mail address' },
            { 'id': 'name', 'help': 'Your full name' },
            { 'id': 'age', 'help': 'Your age (you must be over 16)' }
            ];

            for (var i = 0; i < helpText.length; i++) {
                var item = helpText[i];
                $("#" + item.id).focus(function (msg) {
                    return function () { $("#help").text(msg); }
                }(item.help));
            }
        })();
    </script>
</body>
</html> 
```

谢谢乔和大卫

# asp.net - 找不到方法：'无效 System.Web.UI.ScriptResourceDefinition.set_LoadSuccessExpression(System.String)'

> ID：16038404
> 
> 赞同：2
> 
> 时间：2013-04-16T13:28:29.883
> 
> 标签：asp.net, .net, .net-4.0, webdeploy

当尝试将 Web 应用程序 4.0 部署到服务器时，它会出现此错误，尽管它在具有 IIS7 的本地计算机上工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T16:19:25.570

LoadSuccessExpression属性是 .NET 4.5 中的新属性[。](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptresourcedefinition.loadsuccessexpression.aspx)由于您的主机仅支持 .NET 4，因此部署时此属性不存在。

它适用于您的本地计算机，因为 .NET 4.5 是对 .NET 4 的就地升级。如果您安装 Visual Studio 2012，将找到此属性并且不会在本地给出异常。

# php - 用于验证/清理的 PHPmailer 内部函数与外部函数

> ID：16038405
> 
> 赞同：2
> 
> 时间：2013-04-16T13:28:31.680
> 
> 标签：php, html, forms, email, phpmailer

在寻找了大约一个星期的好答案后，我意识到我必须寻求一些帮助。我一直在为是否应该使用 PHP-mailer 或 Swiftmailer 奋斗了一周，我决定使用 PHP-mailer，因为我觉得文档更全面，并且有更多示例。查看代码后，我发现 PHP-mailer 有许多内置的卫生/验证功能。我想知道是否有人发现它们有任何缺点或漏洞？你会如何使用它们？为了让问题更具体一点，我想知道您将如何使用 phpmailer 验证/清理 process.php 文件中的以下表单数据。

```
<form class="form-horizontal" id="contact-form-info" action="func/mail/mail-info.php"    method="post">
<fieldset>

<div class="control-group">
    <label class="control-label" for="name">Namn</label>
    <div class="controls">  
    <input type="text" class="input-xlarge" name="name" id="name" maxlength="50" placeholder="Namn *"/>
    </div>
</div>

<div class="control-group">
  <label class="control-label" for="foretag">Företag</label>
  <div class="controls">  
    <input type="text" class="input-xlarge" name="foretag" id="foretag" maxlength="50" placeholder="Företag" />
    </div>
</div>

<div class="control-group">
    <label class="control-label" for="email">E-post</label>
    <div class="controls">
    <input type="text" class="input-xlarge" name="email" id="email" placeholder="E-post *"/>
   </div>
</div> 
<div class="control-group">
    <label class="control-label" for="subject">Ämne</label>
    <div class="controls">
    <input type="text" class="input-xlarge" name="subject" id="subject" maxlength="5000"   placeholder="Ämne *"/>
    </div>
</div>   
<div class="control-group">
<label class="control-label" for="message">Meddelande</label>
<div class="controls">
    <textarea class="input-xlarge" name="message" placeholder="Meddelande *"  id="message" rows="3"></textarea>
  </div>
  </div>

    <div class="form-actions">
  <input id="submit" name="submit" type="submit" value="Skicka" class="btn btn-custom btn-large"></input>
<input type="reset" class="btn" value="återställ"></input>
</div>    
</fieldset>                 
</form> 
```

phpmailer 内部验证行 338-384 示例

```
* Adds an address to one of the recipient arrays
* Addresses that have been added already return false, but do not throw exceptions
* @param string $kind One of 'to', 'cc', 'bcc', 'ReplyTo'
* @param string $address The email address to send to
* @param string $name
* @throws phpmailerException
* @return boolean true on success, false if address already used or invalid in some way
* @access protected
*/

protected function AddAnAddress($kind, $address, $name = '') {
if (!preg_match('/^(to|cc|bcc|Reply-To)$/', $kind)) {
  $this->SetError($this->Lang('Invalid recipient array').': '.$kind);
  if ($this->exceptions) {
    throw new phpmailerException('Invalid recipient array: ' . $kind);
  }
  if ($this->SMTPDebug) {
    $this->edebug($this->Lang('Invalid recipient array').': '.$kind);
  }
  return false;
}
$address = trim($address);
$name = trim(preg_replace('/[\r\n]+/', '', $name)); //Strip breaks and trim
if (!$this->ValidateAddress($address)) {
  $this->SetError($this->Lang('invalid_address').': '. $address);
  if ($this->exceptions) {
    throw new phpmailerException($this->Lang('invalid_address').': '.$address);
  }
  if ($this->SMTPDebug) {
    $this->edebug($this->Lang('invalid_address').': '.$address);
  }
  return false;
}
if ($kind != 'Reply-To') {
  if (!isset($this->all_recipients[strtolower($address)])) {
    array_push($this->$kind, array($address, $name));
    $this->all_recipients[strtolower($address)] = true;
    return true;
  }
} else {
  if (!array_key_exists(strtolower($address), $this->ReplyTo)) {
    $this->ReplyTo[strtolower($address)] = array($address, $name);
  return true;
}
}
return false;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T14:46:53.433

好吧，你不能使用你发布的代码；它是 phpMailer 中的一个内部函数，它对 phpMailer 对象中的内部变量进行处理。

但是，您*可以*调用此代码使用的电子邮件地址验证例程，`ValidateAddress()`因为它是一个`public static`函数。

所以在你的代码中的任何地方，你都应该能够调用这样的东西：

```
$valid = phpMailer::ValidateAddress($email_address); 
```

...并且`$valid`将被设置为`true`或`false`取决于它是否是一个有效的地址。

但是，问题中代码的重点是，这是 PHPMailer 在内部设置其电子邮件地址的代码，并且它正在使用`ValidateAddress()`自己。这意味着只要你给它一个电子邮件地址，phpMailer 就已经在进行验证。您实际上并不需要首先自己验证它，因为无论如何 phpMailer 都会为您完成它。

您需要做的是捕获任何 phpMailer 可能由于验证错误而返回给您的错误。默认情况下，`false`如果函数失败，它只会返回，所以你可以检查一下。或者，您可以打开它的异常模式并使用`try...catch`它来获取它抛出的异常。

无论哪种方式，关键是 phpMailer 被设计为默认安全；它不会接受错误的电子邮件地址或其他无效数据。所以你的问题不是真的必要；只需给 phpMailer 数据，它就会为您进行验证。

（这并不是说 phpMailer 是完美的代码；有人可能会发现其中的安全漏洞，就像使用任何其他软件一样，但只要您确保与补丁版本保持同步，那应该不是问题）

# php - PHP MySQL 语法引号点

> ID：16038410
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:28:40.847
> 
> 标签：php, mysql, syntax

我真的很困惑这种差异，我什么时候应该在 MySQL 查询中这样写：

``".$variable."``

`' ".$variable." '`

`" '.$variable.' "`

`'$variable'`

换句话说，引号，点的规则是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:40:16.500

这是一个变量：$a

* * *

这是一个字符串：“hello world”

* * *

这是一个字符串：'hello world'

* * *

您可以通过点连接变量和字符串：

```
$b = $a . "hello" . $a . 'world'; 
```

或在“”中使用变量

```
$b = "hello $a world" ;
$b = "hello" . $a . "world" ;
$b = 'hello' . $a . 'world' ; 
```

* * *

您不能在 ' 中使用变量

* * *

` 在 mysql 中用于字段和表标题。

* * *

' 在 mysql 中用于变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:36:34.103

这取决于您构建查询的方式。

例如，我喜欢像这样构建我的查询：

```
"SELECT name FROM table WHERE table_id='".$id."'" 
```

双引号用于关闭（然后重新打开）语句，单引号仅表示它是一个字符串（在我的示例中，我使用的是整数，但单词应该封装在单引号中）。这些点与 PHP 相关：它们只是将内容连接/粘贴在一起。

希望我的回答对你有用:)

# sql-server - 尝试在 MS 访问中使用链接表时出错

> ID：16038412
> 
> 赞同：1
> 
> 时间：2013-04-16T13:28:45.017
> 
> 标签：sql-server, ms-access, asp-classic

我们的 Intranet 在 asp/vb 脚本/MS Access 下运行。

我们遇到了 MSAccess 的问题，想用 MSSQL Server 替换它。最初我以为我可以将当​​前数据从 Access 导入 MSSQL 并通过链接表连接到它们。- 所以无需触摸代码。

但是，当我尝试打开使用链接表的页面时，出现以下错误：

Microsoft JET 数据库引擎错误“80004005”ODBC--连接到“xxxx”失败。/index.asp，第 80 行

xxxx 是我为链接表而定义的用户 DSN。- 现在使用 SQL Server 身份验证。但是在使用窗口身份验证时我遇到了同样的错误。

从访问中打开链接表时，一切都很好。

IIS 7.5 / ASP 经典 (vbscript) SQL Server 2008 R2

有没有人有任何想法，我真的想避免重新编码任何东西并且直接使用 SQL Server 会涉及很多！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:54:15.430

我们需要做的第一件事是确定是否可以从 Access 应用程序本身的外部“看到”Jet/ACE 数据库中的 SQL Server 链接表。我的测试数据库`Database1.accdb`包含一个链接表

![链接表.png](https://i.stack.imgur.com/Kq4y4.png)

以下 VBScript 证明我可以“看到”该表而无需在 Access 本身中：

```
Option Explicit
Dim con  '' As ADODB.Connection
Dim rst  '' As ADODB.Recordset
Const AccessLinkedTableName = "dbo_linkedTable"
Set con = CreateObject("ADODB.Connection")
con.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data source=C:\Users\Public\Database1.accdb;"
Set rst = CreateObject("ADODB.Recordset")
rst.Open "SELECT COUNT(*) AS n FROM [" & AccessLinkedTableName & "]", con
WScript.Echo "[" & AccessLinkedTableName & "] contains " & rst(0).Value & " row(s)"
rst.Close
Set rst = Nothing
con.Close
Set con = Nothing 
```

当我从我的普通帐户运行该脚本时，我得到以下信息

```
C:\Users\Public>cscript /nologo linkedTableTest.vbs
[dbo_linkedTable] contains 2 row(s) 
```

所以我们知道它*可以*工作。

您的问题引起了两个问题，都与 ASP 脚本通常在自己的`IUSR_MachineName`帐户下运行这一事实有关。

1.  您说您使用了“用户 DSN”，但如果*您*创建了该用户 DSN，那么其他任何人都无法看到它。您可能希望改用系统 DSN。

2.  如果您在 SQL Server 上使用 Windows 身份验证，则您可能必须为该`IUSR_MachineName`帐户授予对 SQL Server 数据库的访问权限。（替代方法是使用 SQL 身份验证并将 SQL 凭据保存在链接表定义中，但保存密码不是一个好主意。）

# mysql - AND 字段 NOT IN(NULL) 返回一个空集

> ID：16038414
> 
> 赞同：13
> 
> 时间：2013-04-16T13:28:47.817
> 
> 标签：mysql, sql

为什么这个查询返回一个空集：

```
select p.iuser_id,p.produit_id from portefeuille p
WHERE produit_id=48
AND p.iuser_id NOT IN (NULL); 
```

而这个：

```
select p.iuser_id,p.produit_id from portefeuille p
WHERE produit_id=48
LIMIT 5 
```

返回结果如

```
72968, 48
106967, 48
7381, 48
81678, 48
194250, 48 
```

并且这些值都不是 NULL 或应该等于 NULL。（为了简洁起见，我添加了限制 5，并且我使用的是 MySql 5.1）

* * *

编辑：在这里，我将问题缩小到 NOT IN(NULL)。原始查询有一个子查询，其中一些行包含 NULL，如下所示：

```
WHERE user_id NOT IN( select user_id from mailsubscriptions ) 
```

并且一些 user_id 为 NULL，但集合中只有一个 NULL 污染了整个查询。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-16T13:42:27.553

x NOT IN (...) 定义为 x 与子查询返回的每个值之间的一系列比较。SQL 使用三值逻辑，逻辑表达式的三个可能值是*true*、*false*或*unknown*。一个值与 NULL 的比较是*未知*的，如果其中任何一个 NOT IN 比较是*未知*的，那么结果也被认为是*未知*的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:30:32.953

与 null 比较总是一个坏主意。甚至`NULL = NULL`或`NULL <> NULL`将返回NULL。

使用`IS NOT NULL`insetad

在您的情况下，查询与以下内容相同：

```
select p.iuser_id,p.produit_id from portefeuille p
WHERE produit_id=48
AND p.iuser_id <> NULL; 
```

无论 的 值如何， 的值都`p.iuser_id <> NULL` 将为 NULL `p.isuer_id`，这就解释了为什么它返回一个空集！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:30:11.967

不要将 NULL 与 NULL 进行比较

您需要在`IS NOT NULL`此处指定

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:36:18.663

与 NULL 的任何比较（除`is null`and外）都`is not null`返回 NULL，出于布尔目的将其解释为 false。这是所有数据库的标准行为。

如果您想在一组值中进行比较，这里有两个选项：

```
where coalesce(produit_id, -1) not in (-1, . . . .) 
```

这假定 -1 是 id 的无效值。或者，您可以进行显式比较：

```
where produit_id is not null and produit_id not in ( . . . ) 
```

# c# - 将树列表转换为表格

> ID：16038416
> 
> 赞同：2
> 
> 时间：2013-04-16T13:28:52.393
> 
> 标签：c#, tree, bindinglist

我有一个可以容纳孩子的对象，所以每个对象的孩子自己都有孩子。所以想象是一个 3 级分层树。但是这个数字不是固定的，它可以是 4,5 甚至 6 个层级。我已经有一个 BindingList，它是所有 Root 节点的列表。有谁知道将其转换为表格的直接方法？所以每个级别将是层次结构的一列。创建列很简单，但我不确定如何在不知道需要多少个循环的情况下填充它？

任何建议都非常感谢。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:42:32.350

我认为最好的方法是递归。我不知道 BindingList 的结构，我会写我能写的最通用的，给你调整正确的方法名称：

```
void visitNode(Node loc, int level)
{
    //write here the code to save the node loc in the column = 'level'

    foreach(Node n in Loc.children)
        visitNode(n, level + 1);
} 
```

其中 Node 是孩子的类型，而 Loc.children 是孩子的列表或集合。

该递归将访问所有节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:44:15.453

如果您使用的是 SQL Server 2008，则可以使用[hierarchyid](http://msdn.microsoft.com/en-us/library/bb677290%28v=sql.100%29.aspx)

您还可以查看以下关于 SO 的文章

*   [在 SQL Server 中创建层次结构](https://stackoverflow.com/q/3669831/1012641)
*   [SQL - 如何存储和导航层次结构](https://stackoverflow.com/a/38804/1012641)
*   [使用 HierarchyID 加载 TreeView](http://www.codeproject.com/Articles/37038/Loading-a-TreeView-using-HierarchyID)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:27:33.643

我已经设法通过跟踪终端节点来解决这个问题，然后简单地一一返回层次结构。（因此，从技术上讲，输入该行的最后一个单元格并返回左侧。）

# ruby - 使用“紧凑” - 可能的问题

> ID：16038422
> 
> 赞同：0
> 
> 时间：2013-04-16T13:29:01.693
> 
> 标签：ruby

我的代码将文本作为输入，将其拆分为单个字符，然后返回一个数组，其中单词被分组，非单词字符是单独的项目。第一个变体：

```
def make_array(text)
  @raw_array=text.split(//)
  @result_array=[]
k=0
for i in 0...@raw_array.length
if @raw_array[i]=~/[\W]/
@result_array[k+1]=@raw_array[i]
k+=2
else
@result_array[k]='' if @result_array[k]==nil
@result_array[k]=@result_array[k]+@raw_array[i]
end
end
  print @result_array.inspect
end 
```

当输入一个一个地包含非字符时，它也会导致数组中的 nil 项

```
make_array("TEST TEST TEST TEST")#=>["TEST", " ", "TEST", " ", "TEST", " ", "TEST"]
make_array("TEST,,, TEST TEST TEST")#=>["TEST", ",", nil, ",", nil, ",", nil, ...] 
```

我可以只使用紧凑的方法，然后

```
make_array("TEST,,, TEST TEST TEST")#=>["TEST", ",", ",", ",", " ", "TEST", " ", "TEST", " ", "TEST"] 
```

工作正常。或者我需要重构我的迭代器代码并花一些时间，在没有紧凑的情况下获得“清晰”的结果。其实，我不想花时间在这上面。但是我的紧凑方法会导致一些错误或意外输出吗？我已经测试了一段时间，并没有注意到什么。但你有什么建议？那个紧凑的把戏是肮脏的，真的不好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:38:59.020

`compact`所做的就是从您的数组中删除 nils 。如果您确定不希望数组中出现 nils，那么应该没有任何问题。

# php - 使用 Wordpress 进行分页

> ID：16038424
> 
> 赞同：0
> 
> 时间：2013-04-16T13:29:05.740
> 
> 标签：php, wordpress, pagination

我似乎无法在 Wordpress 中进行分页工作......我已经尝试了数周来让它继续运行，但这似乎是不可能的:(。它是否可行，在那种情况下如何？

这是我的 Wp_Query：

```
$all_posts = new WP_Query(array(
  'posts_per_page' => 3,
)); 
```

这就是我输出它的方式：

```
if ($all_posts->have_posts()): while ($all_posts->have_posts()) : $all_posts->the_post();

  // content rendered here

<?php endwhile; ?>

<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:18:39.293

尝试这个：

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$all_posts = new WP_Query(array(
  'posts_per_page' => 3,
   'paged=' => $paged
)); 
```

并在循环之后添加：

```
<div class="navigation">
    <div class="next-posts"><?php next_posts_link('&laquo; Older Entries', $preNewsPosts->max_num_pages) ?></div>
    <div class="prev-posts"><?php previous_posts_link('Newer Entries &raquo;', $preNewsPosts->max_num_pages) ?></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:54:05.237

这篇精彩的文章指明了方向！ [http://weblogtoolscollection.com/archives/2008/04/19/paging-and-custom-wordpress-loops/](http://weblogtoolscollection.com/archives/2008/04/19/paging-and-custom-wordpress-loops/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:38:57.723

对于最基本的正常分页：

```
<div class="navigation">
<div class="alignleft"><?php next_posts_link('&laquo; Older Entries') ?></div>
<div class="alignright"><?php previous_posts_link('Newer Entries &raquo;') ?></div>
</div> 
```

您可以使用这些插件之一来添加编号分页功能。截至目前，WordPress 本身不支持此功能。如果您尝试从头开始编写它，那将是一个很好的参考点。

[http://wordpress.org/extend/plugins/wp-pagenavi/](http://wordpress.org/extend/plugins/wp-pagenavi/)

[http://wordpress.org/extend/plugins/wp-paginate/](http://wordpress.org/extend/plugins/wp-paginate/)

# asp.net - Cookie 和 FormsAuthenticationTicket 之间的时间关系如何真正起作用？

> ID：16038431
> 
> 赞同：0
> 
> 时间：2013-04-16T13:29:28.733
> 
> 标签：asp.net, session, cookies, iis-7, formsauthenticationticket

我正在对 Cookie/FormsAuthenticationTicket/Session 超时进行一些测试。在我的测试中，我发现了一些非常有趣的东西。

*   创建会话 Cookie`cookie.Expires = DateTime.MinValue;`*   创建一个有效期为 5 分钟的 FormsAuthenticationTicket*   将 web.config 中的 Session Timeout 设置为 3 分钟

然后我创建了一个 asp.net 按钮，它只是调用`Response.Redirect(Request.RawUrl);`来刷新页面以查看我是否仍在页面的安全部分。

如果我不断刷新页面 FormsAuthenticationTicket 持续时间超过 5 分钟。

所以我的问题是：

*   我假设这是设计使然，但这是真的吗？*   这是因为这是一个会话 cookie 吗？*   如果是因为它是会话 cookie，那么非会话 cookie 的预期行为是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:46:51.247

如评论中所述，这是由于滑动到期的默认值为 true：http: [//msdn.microsoft.com/en-us/library/system.web.configuration.formsauthenticationconfiguration.slidingexpiration.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.formsauthenticationconfiguration.slidingexpiration.aspx)

谢谢！

# java - 在执行操作之前使用线程等待 20 秒 java android

> ID：16038433
> 
> 赞同：-2
> 
> 时间：2013-04-16T13:29:32.353
> 
> 标签：java, android, multithreading

您好，我正在尝试使用线程来使射击系统工作以正常工作，有一个用于空间攻击的按钮，他可以每 20 秒使用一次，我尝试按照代码执行此操作：

```
 ballatack.setImageResource(R.drawable.buttonof);
        Thread timer2 = new Thread(){
            public void run(){
            try{
                sleep(5000);
            }catch(InterruptedException e){
                e.printStackTrace();
            }finally{
                ballatack.setImageResource(R.drawable.buttonof);

            }
            }
        };
        timer2.start(); 
```

但它不起作用，eclipse说没有什么像verythings是正确的但是当我运行模拟器时它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:33:26.013

您不能与非 UI 线程中的 UI 元素进行交互。使用 Handler 及其 postDelayed 方法在 UI 线程上设置图像

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:34:56.277

试试这个代码：

```
ballatack.postDelayed(new Runnable(){
   @Override
   public void run(){
        ballatack.setImageResource(R.drawable.buttonof);
   }
}, 5000); 
```

这样您就不会创建阻塞线程，而只会与 UI 线程上的 UI 元素进行交互。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T13:36:24.730

您不能触摸主线程以外的 UI 元素。尝试改用处理程序

```
private Handler mHandler = new Handler();

ballatack.setImageResource(R.drawable.buttonof);

mHandler.postDelayed(new Runnable() {
    @Override
    public void run() {
        ballatack.setImageResource(R.drawable.buttonof);
    }
}, 5000); 
```

# c# - 使用 C# 签出 SQL Server 数据库的工作副本

> ID：16038435
> 
> 赞同：-2
> 
> 时间：2013-04-16T13:29:39.180
> 
> 标签：c#, sql-server, svn

我认为标题不言自明。我需要使用 C# 将 SQL Server 上数据库的工作副本签出到我自己的计算机上。很像SVN。在这个副本中，我必须能够像使用原始数据库一样更新/插入/删除，然后最后将更改提交到服务器。我猜很像SVN。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:47:38.767

您不签出数据库。您开发脚本并保留修改数据库的源代码控制脚本。然后你将你的脚本应用到你想要的任何数据库中，使其达到所需的状态。这也适用于参考数据。阅读[迁移](http://guides.rubyonrails.org/migrations.html)如何工作以更好地理解这一概念。

有助于做到这一点的东西：[Visual Studio Database Projects](http://msdn.microsoft.com/en-us/library/xee70aty.aspx)、[RedGate SQL Source Control](http://www.red-gate.com/products/sql-development/sql-source-control/)。一旦您理解了这些概念，您也可以简单地[推出自己的解决方案。](http://rusanu.com/2009/05/15/version-control-and-your-database/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:35:40.490

我很确定您想要什么，但请考虑：

*   检查实体框架

*   备份当前数据库，导入您的 PC，进行更改，备份修改后的数据库并使用还原来更新服务器数据库。

# c# - 如何在使用 .NET framework 3.5 构建的 C# 项目中使用 .NET 4.0 代码？

> ID：16038442
> 
> 赞同：0
> 
> 时间：2013-04-16T13:29:58.853
> 
> 标签：c#, .net, .net-4.0, .net-3.5

我想从应该使用 .NET 3.5 构建的 C# 项目中调用使用 .NET 4.0 构建的 dll。我的意思是 .net 4.0 相关代码仅应在我的机器安装了 .net 4.0 时执行，否则只需跳过该部分。这可能吗（任何解决方法）？如果是，那么如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:55:00.687

不要将 .NET 4.0 DLL 添加到您的引用中，而是将其包装到服务中并调用该服务来访问您的方法。该服务可以是 HTTP/HTTPS 服务（例如 MVC4 RESTful WebAPI、WCF），也可以是监视放置文件夹或 SQL 表的窗口服务。

[编辑]

假设您有一个使用 .NET 3.5 构建的 Windows 服务（项目 A）。
项目 A 需要调用驻留在使用 .NET 4.0 构建的类库（项目 B）中的方法。

使用此设置，您无法从项目 A (ProjectA ---x--> ProjectB) 添加对项目 B 的引用

替代方案是：

1.  将项目 A 升级到 .NET 4.0，然后添加对项目 B 的引用并调用您的方法
2.  找到项目 A 和项目 B 可以在不添加直接引用的情况下进行通信的方式。当然，这是有代价的，但如果你别无选择，这是最好的方法。您可以通过两种方式做到这一点：

    2.1 HTTP API：我会使用 MVC4 Web API [http://www.codeproject.com/Articles/344078/ASP-NET-WebAPI-Getting-Started-with-MVC4-and-WebAP](http://www.codeproject.com/Articles/344078/ASP-NET-WebAPI-Getting-Started-with-MVC4-and-WebAP)

    2.2 数据库队列：项目 A 将请求序列化并将请求插入到共享数据库（例如 SQL）表中，项目 B 继续监视该表中的新行。对于每个新行，它会选择它们运行所需的功能并将结果存储在另一个表中。

    2.3 放置文件夹：项目 A 将其请求和参数序列化并写入文件，并将其存储在共享文件夹中。项目 B 一直在该共享文件夹中寻找新文件，一旦看到，就读取它，删除它，并将结果存储在共享文件夹中。

免责声明：我提出的解决方案不仅适用于小型项目，其中相当大且重要的逻辑驻留在无法移植到 .NET 3.5 的 .NET 4.0 项目中。如果您只需要运行几行 4.0 代码并且不想为大的复杂性而烦恼，那么您可能需要重新考虑要在 .NET 4 项目中实现的目标。您可能想查看[如何在 .NET 3.5 项目中引用 .NET 4.0 程序集](https://stackoverflow.com/questions/1609894/how-to-reference-net-4-0-assembly-within-net-3-5-projects)

# jquery - Asp：在 jquery BlockUI 中按钮未触发

> ID：16038443
> 
> 赞同：0
> 
> 时间：2013-04-16T13:29:58.967
> 
> 标签：jquery, asp.net, blockui

我有一个运行以下功能的按钮：

```
 function BtnAddDepartment_onclick() {
        $.blockUI({ message: $('#addDivisionModal') }); 
```

在 Modal 中有一个 asp:button 并且它根本不会触发

```
<asp:Button ID="BtnAddDivision" CssClass="btn" Text="Save" runat="server"
    OnClick="BtnAddDivision_Click" /> 
```

这是默认行为还是我遇到了一些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T01:42:29.113

用 JQUERY 试试这个 in action 按钮：

```
$('#dAgenda').parent().appendTo($("#<%=up2.ClientID%>")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T05:34:45.357

你应该使用 onclientclick="BtnAddDepartment_onclick()"

# vb.net - 出错时如何继续编程

> ID：16038444
> 
> 赞同：0
> 
> 时间：2013-04-16T13:29:59.703
> 
> 标签：vb.net

我有一个 vb.net 程序，它可以访问 10 个不同的数据库以获取报告。我在程序末尾使用“Try”语句通过电子邮件从数据集中发送我使用 LINQ 构建的数据。

我遇到的问题是当我尝试连接到脱机的数据库时，或者程序锁定超时或结束时。我想做的是类似于“On error resume Next”的事情，但是，我不能用程序中已有的 try 语句来做到这一点......有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:31:51.983

在 vb.net 下错误恢复下一个；

```
 Try
        something()
    Catch ex As Exception
        'do nothing
    End Try 
```

如果这是长期代码/生产代码，请尝试找到更好的方法来处理此问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:37:49.047

在stackoverflow上查看这个答案。虽然它在 C# 中

[忽略 C# 中的异常](https://stackoverflow.com/questions/4913159/ignore-exception-in-c-sharp)

基本上它是一个处理顶层异常的表达式。

但是，您必须确保将每个可能的代码块都包装起来，因为异常是结构化的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:37:59.047

从一个单独的函数调用您的数据库，该函数返回一个布尔值是否成功。像这样的东西：

```
Protected Sub Page_Load(sender As Object, e As EventArgs)
Try
            'do something or nothing
    If Not OpenConnecttion() Then
    End If
Catch generatedExceptionName As Exception

    Throw
End Try 
```

结束子

```
Private Function OpenConnecttion() As Boolean
        'do you database conenction and maybe retrieval stuff here
Try
Catch ex As Exception
    Return False
End Try
Return True
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:46:46.737

尽管 Fredou 的回答在技术上是正确的，但我建议您稍微重组您的程序。代替

```
On Error Resume Next
Dim db1 = OpenDbConnection()        ' fails
...do something with db1...         ' more errors, failing silently, occur here 
```

您确保只允许打开数据库的操作失败：

```
Dim db1 As OleDbConnection          ' or whatever DB library you happen to use
Try
    db1 = OpenDbConnection()
Catch ex As Exception
    Console.WriteLine("Skipping DB1: " & ex.ToString())
End Try

If db1 IsNot Nothing
    ...do something with db1...     ' Errors occuring here *are* reported
End If 
```

这样，您只会忽略*代码中某些定义明确的部分中的*错误。

# android - 按属性查找标签并读取他所有的孩子

> ID：16038446
> 
> 赞同：0
> 
> 时间：2013-04-16T13:30:06.337
> 
> 标签：android, xml, xml-parsing, xmlpullparser

我有这个 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Products>
<Product productName="testProduct1">
    <Fields>
        <Field name="Stack" />
        <Field name="Overflow" />
    </Fields>
    <AnotherFields>
        <Field name="Test" />
    </AnotherFields>
</Product>
<Product productName="testProduct">
    <Fields>
        <Field name="StackOverflow" />
    </Fields>
</Product>
</Products> 
```

并且要读取所有`product`具有专有属性值的子标签`productName`，所有其他标签都想跳过。

这是我的java代码，我被卡住了：

```
public void mainParser(XmlResourceParser configXML, String productNameParameter)
        throws XmlPullParserException, IOException {
    int eventType = -1; 
    String strName, productName;

    while (eventType != XmlResourceParser.END_DOCUMENT) {
        if (eventType == XmlResourceParser.START_TAG) {

            strName = configXML.getName();

            if (strName.equals("Product")) {
                if (eventType == XmlResourceParser.START_TAG) {

                    productName = configXML.getAttributeValue(null, "productName");

                    if (productName.equals(productNameParameter)) {
                        eventType = configXML.next();

                        //here is the problem

                    }
                }
            }
        }
        eventType = configXML.next();
    }
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:43:30.653

我建议只在一个级别而不是嵌套循环上检查事件类型，并使用布尔标志来指示您在特定的“产品”元素中：

```
boolean foundIt = false;
while (eventType != XmlResourceParser.END_DOCUMENT) {
    strName = configXML.getName();

    if (eventType == XmlResourceParser.START_TAG) {
        if (!foundIt && strName.equals("Product")) {
            productName = configXML.getAttributeValue(null, "productName");

            if (productName.equals(productNameParameter)) {
                foundIt = true;
            }
        }
        else if (foundIt) {
            // Children
        }
    }
    else if (eventType == XmlResourceParser.END_TAG) {
        if (foundIt && strName.equals("Product")) {
            foundIt = false;
            return; // You've found what you want, leave method
        }
    }

    eventType = configXML.next();
} 
```

现在您不会在多个地方打电话`configXML.next()`或检查`eventType`，这很容易让人感到困惑。请注意，一旦`foundIt`为真，我们将停止寻找“产品”标签并默认开始读取每个新元素。最后，当您阅读“产品”的结束标签时，请停止一切​​。

# wpf - 旋转六边形按钮但不旋转图像

> ID：16038449
> 
> 赞同：0
> 
> 时间：2013-04-16T13:30:24.730
> 
> 标签：wpf

我有要旋转的按钮和形状（六边形）。但我不希望它的背景被旋转。如何将图像放置到旋转的六边形按钮？这是我的代码：

```
<Button Height="182" Width="155" RenderTransformOrigin="0.5,1.368">
    <Button.Background>
        <ImageBrush ImageSource="mob.png"/>
    </Button.Background>
    <Button.RenderTransform>
        <TransformGroup>
            <ScaleTransform/>
            <SkewTransform/>
            <RotateTransform Angle="270"/>
            <TranslateTransform X="187.488" Y="-187.488"/>
        </TransformGroup>
    </Button.RenderTransform>

    <Button.Template>
        <ControlTemplate>
              <ed:RegularPolygon Fill="{TemplateBinding Background}"/>
          </ControlTemplate>
     </Button.Template>
 </Button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:59:16.897

我可以建议您创建一个 ControlTemplate 来处理您在这里所追求的一切吗？

在模板中确保绘制多边形，然后将其旋转到所需的任何值，然后将 ContentPresenter 控件添加到模板中。这应该绘制按钮的任何内容。在您的案例中，我会将 mod.png 设为内容。

绑定 ContentPrester 需要使用 TemplateBinding，如下所示。

```
<!-- DRAW HEXAGON HERE -->
<ContentPresenter Conent="{TemplateBinding Content}"/> 
```

并确保将任何旋转应用于六边形而不是内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:20:05.820

您不能使用`RenderTransform`按钮上的 a 来执行此操作，因为这会旋转整个填充的多边形。`ed:RegularPolygon`您可以将 a`Path`与包含折线的几何图形一起使用，例如a `PathGeometry`：

```
<Button Height="182" Width="155">
    <Button.Background>
        <ImageBrush ImageSource="mob.png"/>
    </Button.Background>

    <Button.Template>
        <ControlTemplate>
            <Path Fill="{TemplateBinding Background}">
                <Path.Data>
                    <PathGeometry>
                        <PathGeometry.Transform>
                            ... put transform here ...
                        </PathGeometry.Transform>
                        <PathGeometry.Figures>
                            ... put polyline data here ...
                        </PathGeometry.Figures>
                    </PathGeometry>
                </Path.Data>
            </Path>
        </ControlTemplate>
    </Button.Template>
</Button> 
```

# c# - 在客户端的 DropDownList 上添加一个项目，C# / ASP.NET

> ID：16038450
> 
> 赞同：0
> 
> 时间：2013-04-16T13:30:25.000
> 
> 标签：c#, asp.net, postback

在我进行了一些 ajax 调用之后，我需要向 DropDownList 客户端添加一个项目。

如果我只是使用jquery的方法将项目添加到相关选择中，它会添加到那里，但是当我稍后在下拉列表中选择这个新的（客户端添加的）项目并进行回发时，就会出现问题：

> 无效的回发或回调参数。使用配置或页面中的 <%@ Page EnableEventValidation="true" %> 启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

我将如何**正确**修改 DropDownList，以便新条目都出现在列表中，并且如果我在选择该新项目的情况下进行回发，其值将转到服务器并进一步使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:39:58.053

我可以建议两种不同的策略。

1.  将任何新项目添加到下拉列表服务器端，通过 PostBack 在服务器上调用方法以将新项目添加到列表绑定的 DataSet，然后重新绑定下拉列表。

2.  绕过 ViewState 并直接从提交回服务器的帖子值中获取下拉列表中的选定值，如下所示。在这种情况下，您不需要“往返”并添加新项目服务器端。

    selectedValue = Request.Form[ - 下拉列表 id -].ToString();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:32:31.180

您应该使用 ASP UpdatePanel，否则您一定会遇到控件与 ViewState 所告诉的不同的问题。

# c# - 希望gridview仅在单击按钮时填充

> ID：16038452
> 
> 赞同：0
> 
> 时间：2013-04-16T13:30:28.910
> 
> 标签：c#, asp.net, sql, sqldatasource

因此，我一直在使用具有多个控制参数的 sqldatasource 在 asp.net 中进行搜索。如果填写了一个控件，但另一个控件没有填写，我花了一些时间研究让我的表格可搜索（如果我将一个留空，它不会带来任何东西）。我现在唯一的问题是，一旦页面打开，它将用整个数据库填充网格视图。也许我做错了，但我的最终目的是有一个带有 8 个文本框的搜索页面来搜索数据库。任何帮助将不胜感激。不确定这是否是您需要的所有信息，但请告诉我。提前谢谢大家。

```
<asp:SqlDataSource ID="SqlDataSource4" runat="server" ConnectionString="<%$ ConnectionStrings:Conn %>" CancelSelectOnNullParameter="false"
    SelectCommand="SELECT [ID], [ContractNo], [OMBEmp], [Cono], [ReviewDate], [AmendNo], [RType], [Contractor], [Purpose], [Department] FROM [tblContractLog] WHERE (([ContractNo] = @ContractNo OR @ContractNo = '') AND ([OMBEmp] = @OMBEmp OR @OMBEmp = '') AND ([Cono] = @Cono OR @Cono = '') AND ([AmendNo] = @AmendNo OR @AmendNo = '') AND ([RType] = @RType OR @RType = '') AND ([Contractor] = @Contractor OR @Contractor = '') AND ([Purpose] = @Purpose OR @Purpose = '') AND ([Department] = @Department OR @Department = ''))">
        <SelectParameters>
            <asp:ControlParameter ControlID="contractnumb" Name="ContractNo" 
                PropertyName="Text" Type="String" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="employeetext" Name="OMBEmp" 
                PropertyName="Text" Type="String" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="conumb" Name="Cono" 
                PropertyName="Text" Type="String" ConvertEmptyStringToNull="false"/>
                <asp:ControlParameter ControlID="amendnumbtxt" Name="AmendNo" 
                PropertyName="Text" Type="String" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="rtypetxt" Name="RType" 
                PropertyName="Text" Type="String" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="contractortxt" Name="Contractor" 
                PropertyName="Text" Type="String" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="purposetxt" Name="Purpose" 
                PropertyName="Text" Type="String" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="departmenttxt" Name="Department" 
                PropertyName="Text" Type="String" ConvertEmptyStringToNull="false"/>
        </SelectParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:40:16.763

[您可以通过点击Selecting](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.selecting.aspx)事件来控制何时加载 sqldatasource ，并在不搜索时取消。您可以使用此代码（取自[此处](http://www.codedigest.com/Articles/ASPNET/282_Advanced_Usages_of_SqlDataSource_Control_in_ASPNet-PART_1.aspx)）阻止它：

```
protected void SqlDataSource1_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
{
    if (!IsPostBack)
        e.Cancel = true;
} 
```

然后在建立搜索参数后调用网格上的databind。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:38:38.460

要`GridView`按需填充（单击按钮），请在代码中而不是在`ASPX`页面上设置 DataSourceID，或者在按钮单击而不是页面加载时绑定它。

# hadoop-streaming - hadoop 作业中正在运行的映射器的数量

> ID：16038456
> 
> 赞同：0
> 
> 时间：2013-04-16T13:30:36.467
> 
> 标签：hadoop-streaming

使用`streaming`，我将数量设置`map`为`200`，如下所示：

`-D mapred.map.tasks=200 -D mapred.job.map.capacity=200`

但后来我发现**正在运行的 mapper**数量只有**9 个**，还有*500+ 个 mapper 任务待处理。*这对我来说看起来很奇怪，因为我认为应该`200`运行，对吧？为什么只有 9 个运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:33:53.177

映射器的数量实际上由您使用的 Inputformat 控制。

输入文件根据格式进行拆分，每个拆分都会生成一个映射。

更多信息可以[在 Apache Wiki 上找到](http://wiki.apache.org/hadoop/HowManyMapsAndReduces)

# javascript - 错误：找不到 JsController

> ID：16038457
> 
> 赞同：0
> 
> 时间：2013-04-16T13:30:36.950
> 
> 标签：javascript, cakephp

我正在使用一个 Js 链接助手，它生成我的 javascript，它应该将我的产品添加到购物车。

问题是我无法添加到我的购物车，也无法访问我生成的（例如`/js/3d127cf10a9888fab50a67854c038a06.js`）javascript 文件。

如果我尝试单击源中的链接，`'Error: JsController could not be found'`则会抛出错误：。我什至无法在我的服务器上找到生成的文件。

我曾尝试将`prototype.js`和`scriptaculous.js`文件一起添加到我的`/app/webroot/js`文件夹中，但都无济于事！

对此的任何有效答案将不胜感激。

# javascript - i18next 翻译中的 HTML 标签

> ID：16038458
> 
> 赞同：69
> 
> 时间：2013-04-16T13:30:37.033
> 
> 标签：javascript, internationalization, i18next

我正在为我的博客使用[i18next](http://i18next.com/)来为 i18n 供电。它适用于纯文本内容，但是当我尝试翻译包含 HTML 标记的内容时，它会在我翻译文本时显示原始标记。

例如，以下是未按预期工作的帖子中的标记片段：

```
<div class="i18n" data-i18n="content.body">
  In Medellín they have many different types of <i>jugos naturales</i>&nbsp;(fruit juice) ... <br />
  <br />
  ...
</div> 
```

翻译代码如下所示：

```
var resources = {
  "en": ...,
  "es": {
    "translation": {
      "content": {
        "body": "En Medellín hay varios tipos diferentes de <i>jugos naturales</i> ... <br /><br /> ... "
      }
    }
  }
}

i18n.init({"resStore": resources}, function( t ) {
  $('.i18n').i18n();
}); 
```

当翻译被渲染时，HTML标签被转义并作为文本输出：

```
En Medellín hay varios tipos diferentes de &lt;i&gt;jugos naturales&lt;/i&gt;...&lt;br /&gt;&lt;br /&gt; 
```

如何让 i18next 更改已翻译元素的 HTML？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-16T13:36:07.447

为了使这项工作，您必须为`data-i18n`要翻译的元素的属性添加前缀`[html]`：

```
<div class="i18n" data-i18n="[html]content.body"> 
```

来源： [i18next.jquery.js](https://github.com/jamuhl/i18next/blob/1.7.2/src/i18next.jquery.js#L21)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-11-29T13:02:33.807

您需要关闭转义：

`i18n.t("key", { 'interpolation': {'escapeValue': false} })`

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2018-08-31T03:37:15.683

对于任何尝试在**React**中执行此操作的人（例如使用`react-i18-next`），请注意 React*也会*转义字符串！所以我们必须告诉i18n*和*React 不要转义字符串。

*   为了告诉 i18n 跳过转义，我们`{escapeValue: false}`像其他人所展示的那样使用。

*   为了告诉 React 跳过转义，我们使用 React 的[`dangerouslySetInnerHTML`](https://github.com/i18next/react-i18next/issues/189#issuecomment-234870445)属性。

```
<div dangerouslySetInnerHTML={
    {__html: t('foo', {interpolation: {escapeValue: false}})}
} /> 
```

该属性接受具有一个属性的对象`__html`。React 故意让它变得丑陋，以阻止它的使用，因为不逃避可能是危险的。

为了安全起见，不应在此元素内使用原始用户输入。如果您确实需要在此处使用不受信任的字符串，请务必对其进行清理或转义，以便用户无法将原始字符串`<`或注入`>`页面。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-06-27T04:54:50.160

不要将 HTML 标签放在翻译中。无论如何，这是一个坏主意。*关注点分离的*家伙都会对此发牢骚。

`<Trans>`如果**react-i18next**使用组件[https://react.i18next.com/latest/trans-component][1]

这样做：

```
// Component.js

<Trans>Welcome, <strong>User!</strong>, here's your <strong>broom</strong></Trans> 
```

以及对应的翻译文件：

```
// your locales/starwars_en.js file

translations: {
  "Welcome, <1>User!</1>, here's your <3>broom</3>": "Welcome, <1>young padawan!</1>, here's your <3>light saber</3>",
} 
```

这些数字*<1>*和*<3>*会随机出现，但请等待：

```
Trans.children = [
  'Welcome, ',                        // index 0
  '<strong>User!</strong>'            // index 1
  ', please don't be ',               // index 2
  '<strong>weak</strong>',            // index 3
  ' unread messages. ',               // index 4
] 
```

更多信息在这里：[https ://stackoverflow.com/a/62563302/537648](https://stackoverflow.com/a/62563302/537648)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-02-16T14:45:52.847

`i18n.t('key',{dateStr: date, interpolation: {escapeValue: false}})`

`date='15/10/2020'`如果也保留斜线，则对我有用

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-11-30T11:11:29.330

从[文档](http://i18next.github.io/i18next/pages/doc_features.html)中：

> 提示 3：转义：
> 
> ```
> // given resources
> {           
>   'en-US': { 
>     translation: { 
>       key1: Not escaped __nameHTML__,
>       key2: Escaped __name__ 
>     } 
>   }
> };
> 
> i18n.t("key2", { name: '', escapeInterpolation: true }); // -> Escaped &lt;tag&gt;
> i18n.t("key1", { name: '', escapeInterpolation: false }); // -> Not escaped <tag> 
> ```
> 
> 为您的值添加后缀 'HTML__' 将防止转义，即使选项已设置为如此。
> 
> 您可以在 init 上打开转义，`i18n.init({escapeInterpolation: true});`或者像在示例中一样将选项传递给 t 函数。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-31T06:06:02.780

您可以在全局初始化期间关闭转义：

```
i18n.init({
  // ...
  interpolation: {
    escapeValue: false,
  }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-29T17:37:47.377

我同时使用 React 和 React Native。对于 React 应用程序该解决方案有效。不适用于 React Native。

**反应**
i18n.js

```
interpolation: {
      escapeValue: false   
    } 
```

一些文件.jsx

```
<div dangerouslySetInnerHTML={{__html: t('dropZone.description')}} /> 
```

**React Native**
此解决方案不起作用，因为在 Text 标记中不允许使用 <div>。我试图将 dangerouslySetInnerHTML 添加到 Text 标记中，但是什么都看不到。

有人有 React Native 的解决方案吗？

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2022-01-03T18:45:43.510

ReactJS 中的解决方案：

初始组件：

```
...
<Typography>Hello <b>World</b><br />This is an <strong>example</strong></Typography>
... 
```

将[Interweave](https://interweave.dev/docs/)与[react-i18next 结合使用](https://react.i18next.com/)

```
...
import { Markup } from "interweave"
...
<Typography><Markup content={t("paragraph")} /></Typography>
... 
```

还有你的 en.json 文件：

```
{
 "paragraph": "Hello <b>World</b><br />This is an <strong>example</strong>"
} 
```

es.json：

```
{
 "paragraph": "Hola <b>Mundo</b><br />Esto es un <strong>ejemplo</strong>"
} 
```

更多信息：[这里](https://stackoverflow.com/a/47159227/17717225)

# entity-framework - EntityFramework Datafirst 方法

> ID：16038459
> 
> 赞同：0
> 
> 时间：2013-04-16T13:30:41.070
> 
> 标签：entity-framework

我的问题很简单。但不能很好地回答。我们可以在实体框架数据优先方法中使用 dbcontext 吗？我正在学习 ASP dotnet Web 应用程序中的实体框架概念。我在谷歌搜索了很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:33:20.647

是的，看看这个博客：

[http://thedatafarm.com/blog/data-access/code-first-entity-framework-4-1-videos-and-articles-on-msdn/](http://thedatafarm.com/blog/data-access/code-first-entity-framework-4-1-videos-and-articles-on-msdn/)

这很有启发性

PS：也许下次在问这里之前先在谷歌上搜索

# c++ - 在构造函数内部时，尝试/捕获块以将简单的内存分配到公共 原始指针中？

> ID：16038462
> 
> 赞同：1
> 
> 时间：2013-04-16T13:30:54.713
> 
> 标签：c++, exception, pointers, constructor, dynamic-memory-allocation

我有一个原始指针的案例，我无法将其更改为智能指针，因为它是接口的一部分（并且我不想使用它破坏任何代码）：

```
struct Foo
{
  Foo();
  ~Foo();

  int * m_pStuff; // public!
}; 
```

我不想在我的ctor中做太多事情。就像：

```
m_pStuff = new int[dynamically_obtained_size_which_is_greater_than_0];
m_pStuff[0] = 0; 
```

然后在析构函数中删除它。

现在，我想知道是否真的值得用 try/catch 包围它：

```
Foo::Foo()
  : m_pStuff(0)
{
  try
  {
    m_pStuff = new int[dynamically_obtained_size_which_is_greater_than_0];
    m_pStuff[0] = 0;
  } 
  catch(...)
  {
    delete m_pStuff;
    throw;
  }
} 
```

我可以反对的观点：

*   更复杂的代码
*   真的不希望那里发生任何异常（除非它在分配时空间不足）
*   并不是真的期望代码会改变

我可以看到的要点：

*   向潜在的未来编码人员表明他们应该小心任何抛出异常并将其放在已经存在的 try 块中
*   如果确实发生任何异常，则会处理内存释放

**我还没有决定：我应该用 try/catch 包围它吗？**为什么？我想听听你对此的看法。

另外，**除了分配时内存不足之外，您是否看到任何异常的可能性？在那种情况下，已经分配的内存会被自动回收，对吧？**

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:32:40.337

## 不。

这是完全没有意义的。

`int`构造可能不会抛出，所以这里唯一可能的例外是`std::bad_alloc`. 在这种情况下你在做什么？

*   好吧，首先你`delete`在一个空指针上做，这是一个空操作。分配失败，所以你没有“回收”任何东西。
*   然后你重新抛出异常。

即正是没有`try`/会发生什么`catch`。

让异常传播，并记录它是可能的。

*不过，此建议不一定适用于其他类型。*

* * *

**另外，不要忘记您的复制构造函数。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:33:05.433

在这种情况下，不需要 try catch，因为如果你在 new 指针中得到 std::bad_alloc 将是 NULL 并且它会导致 delete NULL 什么都不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:01:27.303

*只是附加信息*

从构造函数中抛出异常可能是个坏主意。看代码

```
class Foo
{
    Foo(int* a, int* b): _a(a), _b(b)
    {

    }

public:
    Foo() :
        Foo(nullptr, nullptr)
        // _a(nullptr), _b(nullptr)
    {
        _a = new int[10];
        _b = new int[100500 * 100500]; // should throw an exception
    }

    ~Foo()
    {
        delete[] _a;
        delete[] _b;

        std::cout << "~Foo()" << std::endl;
    }

private:
    int* _a;
    int* _b;
};

int main()
{
    try
    {
        Foo f;
    }
    catch(std::exception& e)
    {
        std::cout << "Catched: " << e.what() << std::endl;
    }
} 
```

此代码按预期工作：

> ~Foo()
> 捕获：std::bad_alloc

但是如果我们注释`Foo(nullptr, nullptr)`行和取消注释`// _a(nullptr), _b(nullptr)`行，我们会看到这个输出：

> 捕获：std::bad_alloc

因此，新代码**不会调用 destrutor**，因为对象没有完全构造。我们有内存泄漏。

## 你应该怎么做才能避免它？

*   不要使用原始指针，使用智能指针代替它。
*   将一个构造函数封装到另一个构造函数中，就像在第一个示例中一样。

# java - 每秒从另一个线程更新 swt ui

> ID：16038474
> 
> 赞同：0
> 
> 时间：2013-04-16T13:31:32.300
> 
> 标签：java, swt, ui-thread

我正在为 MAC OS 开发一个 SWT java 项目，我需要在 SWT UI 上添加一个标签，我必须在其中显示当前时间，每秒更新一次。我试过了，即

```
final Label lblNewLabel_1 = new Label(composite, SWT.CENTER);
FormData fd_lblNewLabel_1 = new FormData();
fd_lblNewLabel_1.left = new FormAttachment(btnNewButton_call, 10);
fd_lblNewLabel_1.bottom = new FormAttachment(100, -10);
fd_lblNewLabel_1.right = new FormAttachment(btnTransfer, -10);
fd_lblNewLabel_1.height = 20;
lblNewLabel_1.setLayoutData(fd_lblNewLabel_1);
    getDisplay().syncExec(new Runnable() {

            @Override
            public void run() {
                while(true){
                    lblNewLabel_1.setText(Calendar.getInstance().getTime().toString());

                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                }   
            }
        }); 
```

但它不起作用，请帮我这样做。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T14:58:21.090

更好的使用`org.eclipse.swt.widgets.Display.timerExec(int, Runnable)`方法来及时更新 UI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T15:03:49.407

您不是从另一个线程更新 UI - 您是从自身更新 UI 线程。

`sleep`在 UI 线程上 ing 会阻止 UI 线程执行诸如绘画之类的操作，因此看起来您的程序已挂起。

与其安排 UI 线程运行`Runnable`更新小部件并休眠一秒钟的线程，不如让线程每秒休眠，然后调度`Runnable`更新小部件*然后快速退出*的线程。

例如：

```
while(true)
{
    getDisplay().asyncExec(new Runnable() {
        lblNewLabel_1.setText(Calendar.getInstance().getTime().toString());
    });

    Thread.sleep(1000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:00:56.877

我完全做到了..使用以下代码

```
Thread timeThread = new Thread() {
            public void run() {
                while (true) {
                    display.syncExec(new Runnable() {

                        @Override
                        public void run() {
                            lblNewLabel_1.setText(Calendar.getInstance().getTime().toString());
                        }
                    });

                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        };

        timeThread.setDaemon(true);
        timeThread.start(); 
```

# javascript - 单击带有 JAVASCRIPT 的复选框后填写文本框

> ID：16038475
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:31:35.237
> 
> 标签：javascript, text, input, checkbox

我在表单中有以下名称和姓氏的文本输入：

```
<label>First name: </label></td>
<input type="text" name="firstName">
<label>Last name: </label></td>
<input type="text" name="lastName"></td> 
```

然后我有另一个用于信用卡持有人的文本输入，后跟一个复选框：

```
<input type="text" size="20" id="nameOnCard" name="nameOnCard" data-stripe="name"/></td>
<input type="checkbox" id="sameNameOnCard"> 
```

每当用户单击复选框时，我希望 #nameOnCard 输入中填满名字和姓氏。

我从这样的脚本开始：

```
$(document).ready(function(){
    $("#sameNameOnCard").click(function(){ 
```

我应该如何从 Firts 和 Last Names 中检索信息并将其插入 nameOnCard 框中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:32:43.727

尝试：

```
$(document).ready(function(){
    $("#sameNameOnCard").on("click", function () {
        var firstName, lastName;
        if ($(this).is(":checked")) {
            firstName = $('[name="firstName"]').val();
            lastName = $('[name="lastName"]').val();
            $("#nameOnCard").val(firstName + " " + lastName).prop("readonly", true);
        } else {
            $("#nameOnCard").val("").prop("readonly", false);
        }
    });
}); 
```

**演示：http:** [//jsfiddle.net/hF26S/1/](http://jsfiddle.net/hF26S/1/)

它将使用 jQuery“属性等于”选择器获取名字和姓氏元素（因为获取它们的唯一方法是通过`name`属性），使用 获取它们的值`.val()`，然后设置最终文本框的值。

我添加了一些额外的东西，将“nameOnCard”元素设置为`readonly`选中复选框时，这样他们就不能在选中时输入它。

如果在单击时选中该复选框，则会复制名字和姓氏。如果未选中该复选框，则将值设置为空。

参考：

*   [http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)
*   [http://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T13:35:39.240

尝试这个

```
 $(document).ready(function(){
        $("#sameNameOnCard").click(function(){
        if($(this).is(":checked"))
        {
             $("#nameOnCard").val($("input:[name=firstName]").val() + " " + $("input:[name=lastName]").val());
        }
        else
        {
               $("#nameOnCard").val("");
        }
    }); 
```

# c# - MVC 4 .NET Razor 中 @Url.Action 中的多个参数

> ID：16038478
> 
> 赞同：1
> 
> 时间：2013-04-16T13:31:38.850
> 
> 标签：c#, razor, asp.net-mvc-4

我在我的 cshtml 页面上创建了这个链接：

```
<a href="@Url.Action("Edit", "Contacts", new { pagenumber = ViewData["contact_scroll"].ToString(), clickContact = "1", contact_id = contact.id })"> 
```

尽管所有三个键都不为空，并且当我将鼠标放在链接上时显示的 url 是正确的：

```
Edit?pagenumber=0&clickContact=1&contact_id=307 
```

如果我在 ActionResult 编辑的开头放置一个断点，在 Request.QueryString 键中，只有 contact_id 值。Request 对象的 RawUrl 仅包含：

```
/Contacts/Edit?contact_id=299 
```

我怎么解决这个问题？

# css - 奇怪的 CSS 问题 - 当我在表单中写下某些内容时，标题会向上移动

> ID：16038479
> 
> 赞同：0
> 
> 时间：2013-04-16T13:31:41.253
> 
> 标签：css, html, header

奇怪的 CSS 问题 - 当我在表单中写下某些内容时，标题会向上移动。

当我**单击“登录”**并**开始输入用户名或密码**时，该[网站的标题会向上移动。](http://frenchegg.com)

 ****我需要保持“登录”表单固定，否则它将隐藏在主要内容下。

而且我必须将主要内容保留为“溢出：隐藏”，因为我想隐藏标题上的“鸡蛋”背景图片。

这是一些脚本：

**表格：**

```
.tooltip-wrap .corner {
    position:relative;
    z-index:100;
    margin-left:-5px;
    width:0;
    height:0;
    border:5px solid transparent;
    border-bottom-color:#fff;
}

.tooltip-text { 
    float:left;
    margin-left:-50%;
    padding:1em 15px;
    background:#fff;
    color:#333;
} 
```

**标题：**

```
.header-wrap {
    position:relative;
    z-index:101;
    background-color:#3d4e5b;
    color:#fff;
    overflow:hidden;
}

.site-header {
    padding:2em 0;
    border:1px solid rgba(255,255,255,0.1);
    border-right-width:0;
    border-left-width:0;
}

.site-header:after {
    bottom:-1px;
}

.site-logo a {
    color:#fff;
    font-size:1.5em;
    padding-left:5em;
    z-index:9;
}

.site-logo h1 {
    margin:0.3em 0 0 0;
}

/*------------------------- Dropdown Menu ------------------------*/

.header-navigation.back {
    z-index:-1;
    position:absolute;
    margin-left:0;
    margin-top:-6px;
    border:none;
display:block; height:137px; width:1171px; padding:0px; outline:none; text-indent:-9999px;
background-image:url('http://frenchegg.com/images/backmenu.png');
} 
```****

# mysql - 子查询问题

> ID：16038485
> 
> 赞同：2
> 
> 时间：2013-04-16T13:31:55.460
> 
> 标签：mysql, select, subquery

我需要生成一份关于每天学生总数的报告。我遇到的问题是，在我的子查询中，我无法进行适当的分组，以便在一天之内我想知道有多少人出于特定原因进入。

我的查询是：

```
SELECT 
     DATE_FORMAT(session.signintime, '%b %d %Y') Date, 
     COUNT(session.session_id) 'Total', 
     (SELECT COUNT(aidyear) FROM session WHERE aidyear = '12-13') '12-13',         
     (SELECT COUNT(aidyear) FROM session WHERE aidyear = '13-14') '13-14' 
FROM session 
WHERE status = '3' 
GROUP BY Date; 
```

结果报告是：

```
+-------------+-------+-------+-------+
| Date        | Total | 12-13 | 13-14 |
+-------------+-------+-------+-------+
| Apr 15 2013 |    47 |    38 |    25 |
| Apr 16 2013 |     5 |    38 |    25 |
+-------------+-------+-------+-------+
2 rows in set (0.00 sec) 
```

如您所见，2013 年 4 月 16 日总共只有 5 名学生。现在请注意，两行的 12-13 13-14 是相同的。

当我尝试在子查询中进行分组时，我收到此错误：

> > 错误 1241 (21000)：操作数应包含 1 列

意思是子查询返回超过一行到我的理解。

我试过这个查询：

```
SELECT 
      DATE_FORMAT(session.signintime, '%b %d %Y') Date, 
      COUNT(session.session_id) 'Total', 
      (SELECT DATE_FORMAT(session.signintime, '%b %d %Y') Date, 
      COUNT(aidyear) FROM session WHERE aidyear = '12-13' GROUP BY Date) '12-13',   
      (SELECT DATE_FORMAT(session.signintime, '%b %d %Y') Date, COUNT(aidyear) FROM session WHERE aidyear = '13-14' GROUP BY Date) '13-14' 
FROM session WHERE status = '3' 
GROUP BY Date; 
```

> > 编辑 1 根据 Evan 的要求

我查询的表只是会话表。我不加入（如你所见）

该表具有以下内容：

```
Primary Key : session_id
Foreign Key : anum(which is a student ID) 
```

然后我们有： `why, aidyear, signintime, studentcomments, status`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:38:29.093

似乎您应该能够将 a`CASE`与聚合一起使用：

```
SELECT DATE_FORMAT(session.signintime, '%b %d %Y') Date, 
  COUNT(session.session_id) 'Total', 
  sum(case when aidyear = '12-13' then 1 else 0 end) '12-13',
  sum(case when aidyear = '13-14' then 1 else 0 end) '13-14'
FROM session 
WHERE status = '3' 
GROUP BY Date; 
```

# c - 如何使用 ANSI C 检查文件是否可执行？

> ID：16038486
> 
> 赞同：3
> 
> 时间：2013-04-16T13:31:57.490
> 
> 标签：c, linux, file-permissions, inotify, stat

我正在尝试编写一个检查目录中文件的程序。创建新文件时，我必须检查它是否可执行，如果是，我必须执行它。

我正在使用 inotify 接口，它运行良好，但是当我尝试使用 stat(2) 检查文件是否可执行时遇到了一些问题。我发现我没有执行它的权限。

将我要检查的目录的绝对路径传递给程序是否会产生权限问题？

```
int main(int argc,char * argv []){

int fd,wd,len,i=0;
char buffer [EVENT_SIZE_BUF];

if(argc != 2)
    usage();

if((fd = inotify_init()) == -1)
    perror("inotify_init()");   

if((wd = inotify_add_watch(fd,argv[1],IN_CREATE) -1))
    perror("inotify_add_watch()");

while(1){

    if((len = read(fd,buffer,EVENT_SIZE_BUF)) < 0)
        perror("read()");

    struct inotify_event * ev = (struct inotify_event *)&buffer;

    if(ev->len > 0){

        if(ev->mask & IN_CREATE && ((ev-> mask & IN_ISDIR) == 0x00)){

            printf("SPY; new file is created %s\n",ev->name);

            char * path = strcat(argv[1],ev->name);
            printf("%s\n",path);

            struct stat sb;

            if(!stat(path,&sb)){

                printf( (S_ISDIR(sb.st_mode)) ? "d" : "-");
                printf( (sb.st_mode & S_IRUSR) ? "r" : "-");
                printf( (sb.st_mode & S_IWUSR) ? "w" : "-");
                printf( (sb.st_mode & S_IXUSR) ? "x" : "-");
                printf( (sb.st_mode & S_IRGRP) ? "r" : "-");
                printf( (sb.st_mode & S_IWGRP) ? "w" : "-");
                printf( (sb.st_mode & S_IXGRP) ? "x" : "-");
                printf( (sb.st_mode & S_IROTH) ? "r" : "-");
                printf( (sb.st_mode & S_IWOTH) ? "w" : "-");
                printf( (sb.st_mode & S_IXOTH) ? "x" : "-");
                fflush(stdout);
                printf("\n");
            }

        }else{ printf("dir\n"); }
    }               
}

inotify_rm_watch(fd,wd);
close(fd);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:39:15.803

您正在使用 linux，因此您可以使用[access()](http://linux.die.net/man/2/access)函数

```
if (access("/my/file", X_OK) != -1) {
    printf("execution permission enabled\n");
} else {
    printf("execution permission disabled\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T20:10:08.613

你在解决 Renzo Davoli 的练习吗？:)

但是，我像你一样被卡住了，我发现使用 Nautilus 复制可执行文件会创建一个“可执行文件（复制）”，该文件使用`stat()`or 返回 X-Permission 错误`access()`。

用cp复制`cp exe1 exe2`就行了！！

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/inotify.h>
#include <sys/stat.h>

#define _GNU_SOURCE 
#define EVENT_SIZE  ( sizeof (struct inotify_event) )
#define EVENT_BUF_LEN     ( 1024 * ( EVENT_SIZE + 16 ) )

void main(int argc, char **argv){

int fd, wd, length, i=0;
char buffer[EVENT_BUF_LEN];

char* dir = argv[1];

/*creating the INOTIFY instance*/
if((fd = inotify_init()) < 0)
    perror( "inotify_init" );

/*adding the directory into watch list. 
Here, the suggestion is to validate the existence of the directory before adding into monitoring list.*/
wd = inotify_add_watch( fd, dir, IN_CREATE | IN_DELETE );

while(1) {

    i=0;
    pid_t p;
    struct stat st;

    /*read to determine the event change happens on “/tmp” directory. Actually this read blocks until the change event occurs*/ 
    if((length = read(fd, buffer, EVENT_BUF_LEN )) < 0)
        perror( "read" );
    /*actually read return the list of change events happens. Here, read the change event one by one and process it accordingly.*/
    while ( i < length ){     
        struct inotify_event *event = ( struct inotify_event * ) &buffer[ i ];     
        if ( event->len ) {
            if ( event->mask & IN_CREATE ) {
                if ( event->mask & IN_ISDIR )
                    printf("New directory %s created.\n", event->name );
                else{
                    printf("New file %s created.\n", event->name );
                    char* file_name;
                    asprintf(&file_name, "%s/%s", dir, event->name);

                    printf("Check if %s is executable\n", file_name);
                    if (access(file_name, X_OK) == 0){ //If file is executable
                        printf("Executable file! Call fork()\n");
                        if ((p = fork()) == 0) {  // Child process: do your work here
                            if (execlp(file_name, file_name,  (char*) 0)<0)
                                fprintf(stderr, "execlp error\n");
                            exit(0);
                        }
                        else{
                            while(waitpid(p, NULL, WNOHANG) != p);
                            remove (event->name);
                            printf("%s done & gone\n", event->name);
                        }
                    }
                    else
                        fprintf(stderr, "Not executable file\n");
                }
            }
            else if ( event->mask & IN_DELETE ) {
                if ( event->mask & IN_ISDIR ) 
                    printf( "Directory %s deleted.\n", event->name );
                else
                    printf( "File %s deleted.\n", event->name );
            }
        }

        i += EVENT_SIZE + event->len;
    }
}

/*removing the “/tmp” directory from the watch list.*/
inotify_rm_watch( fd, wd );

/*closing the INOTIFY instance*/
close( fd );

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-08T17:52:00.640

这在 ANSI C 中是不可能的，您需要 POSIX。

# ruby - 描述用于语义版本控制的 ruby gem 公共 API

> ID：16038487
> 
> 赞同：5
> 
> 时间：2013-04-16T13:31:59.763
> 
> 标签：ruby, gem, semantic-versioning

[语义版本控制规范](http://semver.org/)中的第一点指出兼容软件必须声明公共 API。

我想知道 gems 是如何建立这个公共 API 的。似乎它通常是通过自述文件完成的（例如，参见[ActiveRecord](https://github.com/rails/rails/tree/master/activerecord)），感觉它并没有在公共 API 代码和其他代码之间划出严格的界限。一个做得更好的 gem 的例子是[Twitter API](https://github.com/sferik/twitter)，将它的公共 API 代码放在[API 目录](https://github.com/sferik/twitter/tree/master/lib/twitter/api)中，但即使在那里，这条线也是灰色的，因为公共 API 的配置方法是在API 目录之外的[twitter.rb中定义的。](https://github.com/sferik/twitter/blob/master/lib/twitter.rb)

作为尝试坚持语义版本控制的 gem 的潜在贡献者（这是其中的大多数，因为我们有像 bundler 这样的工具），我想知道哪些方法是公共 API 的一部分，哪些不是。也许我必须查看更多源代码，但是否有明确定义公共 API 的指南？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:46:58.887

有一些流行的方法来定义公共 API。你选择哪一个主要是一个品味问题。

一种方法是*文档*。您只需在文档中说明哪些协议是公共 API 的一部分，以及这些协议的合同是什么。YARD 甚至为此提供了预定义的标签。

另一种方法是*测试*。我认为 Merb 做到了这一点。公共 API 在其 RSpec 测试中进行了描述。私密部分显然也经过了测试，但这些测试位于不同的目录中。

这实际上很酷，因为它允许您将代码更改和语义版本更改联系在一起：每次向公共目录添加测试时，您都需要修改次要版本。每次您在公共目录中删除或修改测试时，您都需要升级主要版本。

或者反过来：在小修订期间，您不得更改或删除测试。

# hyper-v - Windows 2012 VDI & DB Server 的虚拟机组织？

> ID：16038490
> 
> 赞同：1
> 
> 时间：2013-04-16T13:32:09.660
> 
> 标签：hyper-v, windows-server-2012, vdi

我有一个`Windows 2012`服务器并尝试将其配置为**2 个**独立的目的：

*   **(1)**数据库服务器`MSSQL-2012`
*   **(2)** `VDI`约 5 个客户。

我或多或少地了解一切是如何工作的，但我不确定虚拟机应该如何嵌套到单个服务器中。**应该`Base Server`管理 VDI 池还是应该创建单独的 VM 来管理 VDI？**

1.  基础安装——启用 Hyper-V 角色的 Windows 2012 Server
    1.  (VM) - 带有 MSSQL 的 Windows 2012 服务器
    2.  (VM) - 用于管理 VDI 池的 Windows 2012 Server
        *   (VM) 客户端 VDI
        *   (VM) 客户端 VDI
        *   (VM) 客户端 VDI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:52:05.090

最好的办法是查看 Microsoft 针对各种（且明确定义的）VDI 场景的 LAB 设置。[VDI 快速入门](http://technet.microsoft.com/en-us/library/hh831585.aspx)

# c++ - 为什么这里没有应用 NRVO？

> ID：16038511
> 
> 赞同：8
> 
> 时间：2013-04-16T13:32:53.227
> 
> 标签：c++, visual-studio-2010, nrvo

当我在 VS2010 中运行此代码时，未应用 NRVO。

```
#include <stdio.h>

class A
{
    public:

    A() { printf( "I am in constructor\n" ); }
    A(const A& a) { printf( "I am in copy constructor\n" ); }
    ~A() { printf( "I am in destructor\n" ); }
    int i;       
};

A f(int j)
{
    A a;
    if ( j )  return a;
    a.i = j;
    return a; 
}

int main()
{
    A a;
    a = f(5);
} 
```

**编辑：这与析构函数有关。当我注释掉它的行时，使用的是 NRVO。但这是为什么呢？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T13:37:23.560

> 为什么这里没有应用 NRVO？

如果这纯粹是您的好奇心，并且您想知道 VC10 如何通过算法决定是否执行 NRVO，那么唯一可以可靠地回答这个问题的人是那些知道 VC10 内部如何工作的人——那些编写它的人。

据我所知，根据 C++11 标准，**允许**编译器在这种情况下执行 NRVO，不这样做只是编译器的决定——不是由于任何有效性约束。根据第 12.8/31 段：

> [...]这种复制/移动操作的省略，称为复制省略，在以下情况下是允许的（可以结合起来消除多个副本）：
> 
> —**在具有类返回类型的函数的返回语句中**，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作
> 
> [...]

但是，如果您希望能够*强制*编译器执行 NRVO，那么答案是“**您不能**”。

是否应用 NRVO 完全由编译器自行决定。你不能指望它，你不能指望它*不*被执行。据我所知，这是所谓“*好像*”规则的唯一例外。

**这就是说，随着优化级别的提高**，执行 NRVO 的机会也会增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:38:11.330

我不知道您在您的环境中看到了什么，但这在 GCC 中按预期工作（例如，[请参见此处](http://liveworkspace.org/code/4B9Ygw%241)）：

**普通的：**

```
I am in constructor
I am in constructor
I am in destructor
I am in destructor 
```

**与`-fno-elide-constructors`：**

```
I am in constructor
I am in constructor
I am in copy constructor
I am in destructor
I am in destructor
I am in destructor 
```

# xslt - 替换功能不适用于“$”符号

> ID：16038515
> 
> 赞同：0
> 
> 时间：2013-04-16T13:33:04.250
> 
> 标签：xslt, xslt-2.0

```
<xsl:value-of select="replace('$@test', '$@test', '111111111111111')" /> 
```

如何使这项工作？

如果我尝试不使用“$”符号一切正常

```
<xsl:value-of select="replace('$@test', '@test', '111111111111111')" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:50:23.777

尝试`<xsl:value-of select="replace('$@test', '\$@test', '111111111111111')" />`，假设您想按字面意思对待美元符号。由于它是正则表达式语言中的元字符，用于匹配字符串或行的结尾以按字面意思对待它，因此您需要对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:05:35.253

如需快速参考，您可以参考[http://www.xml.com/pub/a/2003/06/04/tr.html](http://www.xml.com/pub/a/2003/06/04/tr.html)

# android - 无法获得线性布局的准确高度

> ID：16038517
> 
> 赞同：0
> 
> 时间：2013-04-16T13:33:12.237
> 
> 标签：android, android-widget

我有一个包含文件项列表的自定义布局的弹出窗口。我想根据自定义布局的高度设置弹出窗口的高度。我试过了

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fileName"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:background="#303030"
    android:orientation="vertical" >
   <TextView
            android:id="@+id/newfile"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:gravity="center_vertical"
            android:text="first item"
            android:textColor="@color/white"
            android:drawableLeft="@drawable/zw_new"
            android:drawablePadding="5dp"
            android:padding="10dp"
            android:textSize="20sp" />
   <View style="@style/hrView" />
   <TextView
            android:id="@+id/rename"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:gravity="center_vertical"
            android:text="second item"
            android:textColor="@color/white"
            android:drawableLeft="@drawable/zw_rename"
            android:drawablePadding="5dp"
            android:padding="10dp"
            android:textSize="20sp" />
</LinearLayout> 
```

样式.xml

```
 <style name="hrView">
          <item name="android:layout_width">fill_parent</item>
          <item name="android:layout_height">1dp</item>
          <item name="android:background">#4f4f4f</item>
    </style> 
```

代码：

```
public static PopupWindow fileMenu= null; 
    public void showfileMenu(){         
        View fileMenuView=null;

            fileMenuView =  getLayoutInflater().inflate (R.layout.zw_filemenu, null);
        fileMenuView.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);

        int h = fileMenuView.getMeasuredHeight();
        int w = fileMenuView.getMeasuredWidth();
            fileMenu=showPopup(fileMenuView,w,h);
        }

PopupWindow pw=null;
public PopupWindow showPopup(View view,int w,int h) {
    pw = new PopupWindow(EditorActivity.getActivity());
    pw.setWidth(w);
    pw.setHeight(h);
    pw.setTouchable(true);
    pw.setFocusable(true);
    pw.setOutsideTouchable(true);
    pw.setTouchInterceptor(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
                pw.dismiss();

                return true;
            }

            return false;
        }
    });
    pw.setOutsideTouchable(false);
    pw.setContentView(view);
    return pw;

} 
```

我的高度为 106，宽度为 191。因此，我的弹出窗口仅显示第一个文本视图“第一项”（太坏了），第二项由于高度较小而被隐藏。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:39:12.400

这可能会帮助您创建流行音乐

```
private PopupWindow mpopup;

View popUpView = getLayoutInflater().inflate(R.layout.yourxml, null); // inflating popup layout
        mpopup = new PopupWindow(popUpView, LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT, true); // Creation of popup
        mpopup.setAnimationStyle(R.style.DialogAnimation);
        mpopup.showAtLocation(popUpView, Gravity.BOTTOM, 0, 0); // Displaying 
```

我在这里给 `LayoutParams.FILL_PARENT`，`LayoutParams.WRAP_CONTENT`

# java - Maven：编译主项目时在persistence.xml文件上使用动态参数构建依赖项

> ID：16038518
> 
> 赞同：0
> 
> 时间：2013-04-16T13:33:13.307
> 
> 标签：java, maven, jpa, dependencies

我是一个新的 Maven 用户。

我正在开发不同的项目，这些项目依赖于需要使用 JPA 连接到 db 的 maven 项目。因此，对于每个父项目，我需要在依赖项目的 persistence.xml 上设置数据库 URL、用户名和密码。

我想知道是否有一种方法可以在父项目之一时重新编译在persistence.xml 上动态设置此值的依赖项。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:05:40.533

据我了解，您需要为每个项目独立生成一个 persistence.xml。

您可以使用[Maven 过滤器](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)来合并 pom 中定义的属性以及通过命令行传递的属性（-D 选项）

我不确定您的要求，但您也可以创建一个原型，您可以从中创建所有子项目。

# android - 选项菜单从不显示在片段中

> ID：16038523
> 
> 赞同：1
> 
> 时间：2013-04-16T13:33:22.420
> 
> 标签：android, menu, android-fragments

由于某种原因，我的 Fragment 从未调用`onCreateOptionsMenu`过我的菜单，溢出菜单从未出现，并且在模拟器中按下菜单按钮也无济于事。我试过使用`setHasOptionsMenu(true)`，但这也无济于事。有任何想法吗？

这是我的`onCreate, onCreateOptionsMenu and onPrepareOptionsMenu`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
    setMenuVisibility(true);
}

@Override
public void onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu); 
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.main, menu);
    super.onCreateOptionsMenu(menu, inflater);
} 
```

**编辑：**

完整的片段代码。

```
public class BackupFragment extends ExpandableListFragment {

    public static final Uri SMS_URI = Uri.parse("content://sms");
    private static final int CONTEXTMENU_IMPORT = 21;
    private static final int CONTEXTMENU_DELETEFILE = 22;
    private static final int CONTEXTMENU_DELETEDAY = 23;
    private static final int UPLOAD_DROPBOX = 24;
    private static final int UPLOAD_DRIVE = 25;
    private static final int DIALOG_LICENSEAGREEMENT = 1;
    private static final int DIALOG_ABOUT = 2;
    public static final int DIALOG_EXPORT = 4;
    public static final String STANDARD_DIRNAME = new StringBuilder(Environment.getExternalStorageDirectory().toString()).append("/backup/").toString();
    public static File DIR;
    public static final boolean CANHAVEROOT = checkRoot(); 
    public static BackupFragment INSTANCE;
    @SuppressWarnings("deprecation")
    public static final int API_LEVEL = Integer.parseInt(Build.VERSION.SDK);
    public BackupFilesListAdapter listAdapter;
    private AlertDialog deleteFileDialog;
    private AlertDialog deleteDayDialog;
    private ProgressDialog exportDialog;
    private ProgressDialog importDialog;
    private AlertDialog selectExportsDialog;
    private ExporterInfos exporterInfos;
    private View FragmentView;

    /**
     * Sets up the main content of the application (i.e. loads the list of
     * available backups and generates the context menu).
     */
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        FragmentView = inflater.inflate(R.layout.backup_fragment, container, false);
        //registerForContextMenu(FragmentView);
        return FragmentView;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        INSTANCE = this;
        super.onActivityCreated(savedInstanceState);
        Crittercism.init(getActivity().getApplicationContext(), "516574be558d6a5f8a00001f");

        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(getActivity());

        String dirName = preferences.getString(Strings.PREFERENCE_STORAGELOCATION, STANDARD_DIRNAME);

        if (TextUtils.isEmpty(dirName)) {
            dirName = STANDARD_DIRNAME;
        }
        DIR = new File(dirName);

        listAdapter = new BackupFilesListAdapter(getActivity(), preferences);
        getExpandableListView().setAdapter(listAdapter);
        getExpandableListView().setOnCreateContextMenuListener(new OnCreateContextMenuListener() {
            public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
                ExpandableListView.ExpandableListContextMenuInfo expandableInfo = (ExpandableListView.ExpandableListContextMenuInfo) menuInfo;

                menu.setHeaderTitle(((TextView) ((ExpandableListView.ExpandableListContextMenuInfo) menuInfo).targetView.findViewById(android.R.id.text1)).getText());
                if (ExpandableListView.getPackedPositionType(expandableInfo.packedPosition) == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
                    menu.add(0, CONTEXTMENU_IMPORT, Menu.NONE, R.string.button_import);
                    menu.add(0, CONTEXTMENU_DELETEFILE, Menu.NONE, R.string.contextmenu_deletefile);
                    menu.add(0, UPLOAD_DROPBOX, Menu.NONE, R.string.upload_dropbox);
                    menu.add(0, UPLOAD_DRIVE, Menu.NONE, R.string.upload_drive);
                } else {
                    menu.add(0, CONTEXTMENU_DELETEDAY, Menu.NONE, R.string.contextmenu_deletedaydata);
                }
            }
        });
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
        setMenuVisibility(true);
    }

    @Override
    public void onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu); 
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        inflater.inflate(R.menu.main, menu);
        super.onCreateOptionsMenu(menu, inflater);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Log.d(getClass().getSimpleName(), item.toString());
        switch (item.getItemId()) {
            case R.id.menu_about: {
                showDialog(DIALOG_ABOUT);
                break;
            }
            case CONTEXTMENU_DELETEFILE: {
                /* using "showDialog" with a Bundle is only available from api version 8 on, so we cannot directly use this. Lets impose this */

                long packedPosition = ((ExpandableListView.ExpandableListContextMenuInfo) item.getMenuInfo()).packedPosition;

                if (ExpandableListView.getPackedPositionType(packedPosition) != ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
                    break;
                }

                final File file = listAdapter.getChild(ExpandableListView.getPackedPositionGroup(packedPosition), ExpandableListView.getPackedPositionChild(packedPosition));

                if (deleteFileDialog == null) {
                    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

                    builder.setIcon(android.R.drawable.ic_dialog_alert);
                    builder.setTitle(android.R.string.dialog_alert_title);
                    builder.setPositiveButton(android.R.string.yes, new OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            // just to enable the button
                        }
                    });
                    builder.setNegativeButton(android.R.string.no, new OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();
                        }
                    });
                    builder.setMessage(Strings.EMPTY); // just so that the string is available
                    deleteFileDialog = builder.create();
                }
                deleteFileDialog.show();
                deleteFileDialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        if (!file.exists() || file.delete()) {
                            listAdapter.remove(file);
                        } else {
                            // show error
                        }
                        deleteFileDialog.dismiss();
                    }
                });
                deleteFileDialog.setMessage(String.format(getString(R.string.question_deletefile), file.toString()));
                break;
            }
            case CONTEXTMENU_IMPORT: {
                ExpandableListView.ExpandableListContextMenuInfo menuInfo = (ExpandableListView.ExpandableListContextMenuInfo) item.getMenuInfo();

                long packedPosition = menuInfo.packedPosition;

                if (ExpandableListView.getPackedPositionType(packedPosition) != ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
                    break;
                }
                if (importDialog == null) {
                    importDialog = new ProgressDialog(getActivity());
                }
                checkProgressDialog(importDialog);
                new ImportTask(importDialog, listAdapter.getChild(ExpandableListView.getPackedPositionGroup(packedPosition), ExpandableListView.getPackedPositionChild(packedPosition)), (Integer) menuInfo.targetView.getTag());
                break;
            }
            case CONTEXTMENU_DELETEDAY: {
                long packedPosition = ((ExpandableListView.ExpandableListContextMenuInfo) item.getMenuInfo()).packedPosition;

                if (ExpandableListView.getPackedPositionType(packedPosition) != ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
                    break;
                }

                final int groupPosition = ExpandableListView.getPackedPositionGroup(packedPosition);

                Date date = listAdapter.getGroup(groupPosition);

                if (deleteDayDialog == null) {
                    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

                    builder.setIcon(android.R.drawable.ic_dialog_alert);
                    builder.setTitle(android.R.string.dialog_alert_title);
                    builder.setPositiveButton(android.R.string.yes, new OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            // just to enable the button
                        }
                    });
                    builder.setNegativeButton(android.R.string.no, new OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();
                        }
                    });
                    builder.setMessage(Strings.EMPTY); // just so that the string is available
                    deleteDayDialog = builder.create();
                }
                deleteDayDialog.show();
                deleteDayDialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        Vector<File> files = listAdapter.getChildren(groupPosition);

                        Vector<File> deletedFiles = new Vector<File>();

                        for (File file : files) {
                            if (!file.exists() || file.delete()) {
                                deletedFiles.add(file);
                            } else {
                                // show error
                            }
                        }
                        listAdapter.remove(deletedFiles);
                        deleteDayDialog.dismiss();
                    }
                });
                deleteDayDialog.setMessage(String.format(getString(R.string.question_deletefile), DateFormat.getDateInstance().format(date)));
                break;
            }
            case R.id.menu_exporteverything: {
                if (exportDialog == null) {
                    exportDialog = new ProgressDialog(getActivity());
                }
                checkProgressDialog(exportDialog);
                checkExportTaskForIncompleteData(new ExportTask(exportDialog, listAdapter, EverythingExporter.ID));
                break;
            }
            case R.id.menu_export: {
                if (selectExportsDialog == null) {
                    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

                    builder.setIcon(android.R.drawable.ic_dialog_info);
                    builder.setTitle(R.string.dialog_export);

                    exporterInfos = Exporter.getExporterInfos(getActivity());

                    builder.setNegativeButton(android.R.string.cancel, new OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();
                        }
                    });

                    builder.setItems(exporterInfos.names, new OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.dismiss();
                            if (exportDialog == null) {
                                exportDialog = new ProgressDialog(getActivity());
                            }
                            checkProgressDialog(exportDialog);
                            checkExportTaskForIncompleteData(new ExportTask(exportDialog, listAdapter, exporterInfos.ids[which]));
                        }
                    });
                    selectExportsDialog = builder.create();
                }
                selectExportsDialog.show();
                break;
            }
            case R.id.menu_settings: {
                break;
            }           
            case UPLOAD_DROPBOX: {
                Intent i = new Intent(getActivity(), Dropbox.class);

                long packedPosition = ((ExpandableListView.ExpandableListContextMenuInfo) item.getMenuInfo()).packedPosition;

                final File file = listAdapter.getChild(ExpandableListView.getPackedPositionGroup(packedPosition), ExpandableListView.getPackedPositionChild(packedPosition));
                i.putExtra("file", file.toString());
                i.putExtra("path", file.getName());

                startActivity(i);
                break;
            }
            case UPLOAD_DRIVE: {
                Intent i = new Intent(getActivity(), DriveAuth.class);

                long packedPosition = ((ExpandableListView.ExpandableListContextMenuInfo) item.getMenuInfo()).packedPosition;

                final File file = listAdapter.getChild(ExpandableListView.getPackedPositionGroup(packedPosition), ExpandableListView.getPackedPositionChild(packedPosition));
                i.putExtra("file", file.toString());
                i.putExtra("path", file.getName());

                startActivity(i);
            }

        }
        return super.onOptionsItemSelected(item);
    }

    /**
     * Checks if the exporter that is attached to the given ExportTask may
     * produce incomplete data and shows a warning if this is the case and
     * if the user wants to get notified. Note that the standard setting is
     * to show the warning.
     * The user may also cancel the warning dialog which results in the
     * export to be not performed.
     *
     * @param exportTask task whose exporter is checked w.r.t. incomplete
     *                   exports
     */
    private void checkExportTaskForIncompleteData(final ExportTask exportTask) {
        Exporter exporter = exportTask.getExporter();

        if (!PreferenceManager.getDefaultSharedPreferences(getActivity()).getBoolean(Strings.PREFERENCE_HIDEDATAWARNINGS, false) && exporter.maybeIncomplete()) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

            builder.setTitle(android.R.string.dialog_alert_title);
            builder.setMessage(getString(R.string.warning_incompletedata_export, exporter.getIncompleteDataNames(getActivity())));
            builder.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                    exportTask.execute();
                }
            });
            builder.setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });
            builder.setCancelable(true);
            builder.show();
        } else {
            exportTask.execute();
        }
    }

    /**
     * Here, the given progress dialog will be reset.
     *
     * @param dialog progress dialog to be reset
     */
    private void checkProgressDialog(ProgressDialog dialog) {
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setProgress(0);
        dialog.setMax(100);
        dialog.setMessage(Strings.EMPTY); // we just have to set some non-null value to enable the title
    }

    @Override
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
        if (importDialog == null) {
            importDialog = new ProgressDialog(getActivity());
        }
        checkProgressDialog(importDialog);
        new ImportTask(importDialog, listAdapter.getChild(groupPosition, childPosition), (Integer) v.getTag());

        return true;
    } 

    protected void showDialog(int id) {
        if (id == DIALOG_LICENSEAGREEMENT) {
            AlertDialogFragment myDialogFragment = AlertDialogFragment.newInstance();
            myDialogFragment.show(getFragmentManager(), "myDialogFragment");
        }
    } 

    /**
     * In order to perform certain backups (such as the wifi settings), we
     * need root to access the corresponding configuration files.
     *
     * @return true if <i>root</i> access can be obtained, <i>false</i>
     *         otherwise
     */
    private static boolean checkRoot() {
        try {
            Process process = Runtime.getRuntime().exec("/system/bin/ls -l /system/bin/su /system/xbin/su");

            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));

            String line = reader.readLine();

            reader.close();
            process.destroy();

            return line != null && line.length() > 9 && line.charAt(9) == 'x';
        } catch (Exception e) {
            return false;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:37:49.830

您可能在活动中夸大了内容而不是调用超级。

如果您在任何其他片段或活动中膨胀任何菜单项，您也应该调用`super.onCrea ....`它们。

常见菜单问题的另一个选项是，如果您使用操作栏 sherlock，您应该扩展 SherlockFragment 以使用菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:08:11.853

迁移到 ABS 而不是 Support 库似乎已经解决了问题，这可能是由于与我正在使用的 SlidingMenu 库发生冲突。

# java - 即使满足条件，while循环也不会终止-Java

> ID：16038525
> 
> 赞同：3
> 
> 时间：2013-04-16T13:33:27.200
> 
> 标签：java, while-loop, runtime-error, infinite-loop

我不知道出了什么问题，我的教授也被难住了。只有当条件立即满足时，while 循环条件才会终止。一旦循环运行，满足条件就不再停止它，它只会继续运行。看起来好像不再检查状况了？下面是我的代码。感谢您的任何帮助。

```
 import java.io.*;
    import java.util.*;

public class createPhoneList {

    public static void main(String[] args) {

        DataOutputStream ostream;//creates output stream
        Scanner input = new Scanner(System.in);//creates scanner in object
        final String DONE = "DONE";//will be used to end data entry loop
        String firstName;
        String lastName;
        long phoneNumber;

        try{
            ostream = new DataOutputStream(new   FileOutputStream("javaContactsUnit4Assignment.txt"));
            System.out.print("Enter First Name or type 'DONE' to quit: ");
            firstName = input.nextLine();
            while(!firstName.equalsIgnoreCase(DONE)){
                /*
                 * Error occuring at runtime where while loop terminates only if
                 * "done" is typed first, but once the loop is running "done" no longer
                 * stops it. Not sure what is wrong...
                 */
                input.nextLine();
                System.out.print("Please enter Last Name: ");
                lastName = input.nextLine();
                System.out.print("Please enter the Phone Number(with NO DASHES, as they will cause a fatal error): ");
                phoneNumber = input.nextLong();
                ostream.writeUTF(firstName);
                ostream.writeUTF(lastName);
                ostream.writeLong(phoneNumber);

                System.out.print("Enter First Name or type 'DONE' to quit: ");
                firstName = input.nextLine();
                }

        }
        catch(IOException e){
            System.err.println("Error opening file.");
        }
        catch(InputMismatchException e){
            System.err.println("Invalid data was entered. Please try again.");
        }
        catch(Exception e){
            System.err.println("You encountered a fatal error. Please try again.");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:37:14.057

`input.nextLine();`您应该在之后添加另一个`phoneNumber = input.nextLong();`。

那是因为`input.nextLong()`command 只读取 long 值（并跳过`\n`您之后按下的 enter 键）。

因此，当您继续阅读时，`input.nextLine()`您会收到`\n`and not `"done"`，这就是您的循环永远不会终止的原因。所以添加另一个`input.nextLine()`将*“吞下”*，`\n`下一个将读取实际的字符串。

# java - 如果列不包含字符串之一，则设置为 null

> ID：16038528
> 
> 赞同：0
> 
> 时间：2013-04-16T13:33:40.200
> 
> 标签：java, mysql

将 MySQl 表中几列的元素与字符串数组的元素进行比较的最佳方法是什么？如果元素不相等，则将当前列的元素设置为 null。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:55:15.887

```
UPDATE SOMETABLE SET SOMECOLUMN = null WHERE SOMECOLUMN=array[0] OR SOMECOLUMN=array[1] etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:38:05.420

多个更新语句来执行多个列，但以下内容可能会有所帮助：

```
UPDATE myTable SET myColumn1 = null WHERE myColumn1 NOT IN ('item1', 'item2', 'item3');
UPDATE myTable SET myColumn2 = null WHERE myColumn2 NOT IN ('item1', 'item2', 'item3'); 
```

# iphone - CATransform3DGetAffineTransform 用于翻转视图在一个接一个调用时不起作用

> ID：16038529
> 
> 赞同：0
> 
> 时间：2013-04-16T13:33:42.060
> 
> 标签：iphone, ios, ipad, core-animation, catransform3d

我正在开发一个水族馆应用程序。我需要在其中生成鱼的运动。鱼应该游泳，当到达水族箱的一端时，应该转弯（或翻转）并移动到另一端，再次转弯（或翻转）并返回其原始位置。

鱼前移运动正常工作，它也轮流（翻转）到达终点。但是当它到达另一端时，翻转动画和进一步的动画会突然跳过。

以下是我正在使用的代码.....

```
CGFloat originalChildXpos = fishView.frame.origin.y;

/************************************** Animation 1 **************************************************************/

[UIView animateWithDuration:15.0
                      delay:1.0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{                         
                     fishView.frame =CGRectMake(0, fishView.frame.origin.y, fishView.frame.size.width, fishView.frame.size.height);                         
                 }completion:NULL];

/*********************************** Animation 2 ****************************************************************/
[UIView animateWithDuration:2.4
                      delay:3.0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     fishView.transform = CATransform3DGetAffineTransform(CATransform3DMakeRotation(M_PI, 0.0, 1.0, 0.0));

                 }completion:NULL];

/********************************* Animation 3 ****************************************************************/
[UIView animateWithDuration:10
                      delay:3.4
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     fishView.frame = CGRectMake(-aquariumView.frame.size.width, fishView.frame.origin.y, fishView.frame.size.width, fishView.frame.size.height);
                 }completion:NULL];

/*************************************** Animation 4 *****************************************************/
[UIView animateWithDuration:1.4
                      delay:13.4
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     fishView.transform = CATransform3DGetAffineTransform(CATransform3DMakeRotation(-M_PI, 0.0, 1.0, 0.0));

                 }completion:NULL];

/************************************* Animation 5 *******************************************/
[UIView animateWithDuration:13.8
                      delay:2.2
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     fishView.frame = CGRectMake(originalChildXpos, fishView.frame.origin.y, fishView.frame.size.width, fishView.frame.size.height);
                 }completion:NULL]; 
```

我想我在使用`CATransform3DGetAffineTransform(CATransform3DMakeRotation())`函数时错过了一些东西，第二次翻转旋转.....

这里的任何人都可以告诉我如何摆脱它并解释我哪里出错了

我还想知道在使用`CATransform3D`旋转时，相对于视图的坐标轴是否会改变或生效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:11:32.993

```
 CGFloat originalChildXpos = fishView.frame.origin.y;
    CGAffineTransform currentTransform=fishView.transform; // step one add this

    /************************************** Animation 1 **************************************************************/

    [UIView animateWithDuration:15.0
                          delay:1.0
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{                         
                         fishView.frame =CGRectMake(0, fishView.frame.origin.y, fishView.frame.size.width, fishView.frame.size.height);                         
                     }completion:NULL];

    /*********************************** Animation 2 ****************************************************************/
    [UIView animateWithDuration:2.4
                          delay:3.0
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                         fishView.transform = CATransform3DGetAffineTransform(CATransform3DMakeRotation(M_PI, 0.0, 1.0, 0.0));

                     }completion:NULL];

    /********************************* Animation 3 ****************************************************************/
    [UIView animateWithDuration:10
                          delay:3.4
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                         fishView.frame = CGRectMake(-aquariumView.frame.size.width, fishView.frame.origin.y, fishView.frame.size.width, fishView.frame.size.height);
                     }completion:NULL];

    /*************************************** Animation 4 *****************************************************/
    [UIView animateWithDuration:1.4
                          delay:13.4
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                         fishView.transform = currentTransform;  // step 2 replace here 

                     }completion:NULL];

    /************************************* Animation 5 *******************************************/
    [UIView animateWithDuration:13.8
                          delay:2.2
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                         fishView.frame = CGRectMake(originalChildXpos, fishView.frame.origin.y, fishView.frame.size.width, fishView.frame.size.height);
                     }completion:NULL]; 
```

对于变换，你在初始时做了 x = y，所以现在你的 x 变成了 y，在下一个语句中你改变了 y =y 所以没有效果......

# caching - VLC RTP 网络缓存

> ID：16038533
> 
> 赞同：1
> 
> 时间：2013-04-16T13:34:06.497
> 
> 标签：caching, vlc, rtp, sdp

我正在使用 RTP 从我的 android 手机的相机流式传输到我的计算机。我正在使用 VLC 接收流。我还使用手写的 .sdp 文件来查看 VLC 中的流。当我通过 RTSP 执行此操作时，我可以使用命令行 -> vlc "rtsp://224.1.1.1:8086" --network-caching=0 来删除 1000ms 缓存，从而消除延迟。所以现在我正在使用 -> myTest.sdp --network-caching=0 但它似乎没有影响。我试过把它增加到10秒，仍然没有影响。似乎如果我降低视频的质量，它会有更多的延迟。我需要做什么来删除任何类型的缓存/缓冲并始终只显示最新的帧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-20T10:32:40.690

我无法让 VLC 的延迟小于 1 毫秒。所以[用这个参数切换到ffplay](https://stackoverflow.com/questions/16658873/how-to-minimize-the-delay-in-a-live-streaming-with-ffmpeg)解决了这个问题：

```
ffplay.exe rtsp://224.1.1.1:8086 -fflags nobuffer -flags low_delay -avioflags direct -fflags discardcorrupt 
```

# android - Zxing CaptureActivity - 启动活动时崩溃

> ID：16038540
> 
> 赞同：0
> 
> 时间：2013-04-16T13:34:27.947
> 
> 标签：android, zxing

我正在尝试将 Zxing 的 QR 阅读功能集成到一个独立的应用程序中，并且一直在使用这个非常有用的指南[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner- into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)以及这些指针[将 ZXing 库直接集成到我的 Android 应用程序](https://stackoverflow.com/questions/4782543/integration-zxing-library-directly-into-my-android-application/6230861#6230861)中，但是在构建了库之后，并按照所有步骤在按下按钮时启动此活动，它仍然可以不行。该应用程序启动，但在按下按钮时，它会崩溃。

activity_main.html

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="buttPress"
        android:text="@string/button_send"
        android:textColor="#FFFFFF"
        />

</RelativeLayout> 
```

MainActivity.java

```
package se.mydomain.myapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void buttPress(View view) {
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
        startActivityForResult(intent, 0);
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
           if (requestCode == 0) {
              if (resultCode == RESULT_OK) {
                 String contents = intent.getStringExtra("SCAN_RESULT");
                 String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                 // Handle successful scan
              } else if (resultCode == RESULT_CANCELED) {
                 // Handle cancel
              }
           }
        }

} 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="se.mydomain.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.CAMERA"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="se.mydomain.myapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.google.zxing.client.android.CaptureActivity"
   android:screenOrientation="landscape"
   android:configChanges="orientation|keyboardHidden"
   android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
   android:windowSoftInputMode="stateAlwaysHidden">
   <intent-filter>
      <action android:name="android.intent.action.MAIN"/>
      <category android:name="android.intent.category.DEFAULT"/>
   </intent-filter>
   <intent-filter>
      <action android:name="com.google.zxing.client.android.SCAN"/>
      <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter>
</activity>
    </application>

</manifest> 
```

这是启动并按下按钮时 logcat 中的输出。我在这里遗漏了一些明显的东西吗？顺便说一句，在模拟和在手机上运行时都会发生这种情况。

```
04-16 13:31:58.313: D/gralloc_goldfish(1359): Emulator without GPU emulation detected.
04-16 13:32:13.034: I/Choreographer(1359): Skipped 82 frames!  The application may be doing too much work on its main thread.
04-16 13:32:13.093: W/dalvikvm(1359): VFY: unable to resolve static field 872 (ISSUE_NUMBER) in Lcom/google/zxing/ResultMetadataType;
04-16 13:32:13.103: D/dalvikvm(1359): VFY: replacing opcode 0x62 at 0x0017
04-16 13:32:13.103: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.133: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/ResultPoint;)
04-16 13:32:13.133: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/ResultPoint;)
04-16 13:32:13.133: I/dalvikvm(1359): Could not find method com.google.zxing.ResultPoint.getX, referenced from method com.google.zxing.client.android.CaptureActivity.drawLine
04-16 13:32:13.143: W/dalvikvm(1359): VFY: unable to resolve virtual method 3648: Lcom/google/zxing/ResultPoint;.getX ()F
04-16 13:32:13.143: D/dalvikvm(1359): VFY: replacing opcode 0x6e at 0x0000
04-16 13:32:13.143: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.175: I/dalvikvm(1359): Could not find method com.google.zxing.Result.getResultPoints, referenced from method com.google.zxing.client.android.CaptureActivity.drawResultPoints
04-16 13:32:13.175: W/dalvikvm(1359): VFY: unable to resolve virtual method 3644: Lcom/google/zxing/Result;.getResultPoints ()[Lcom/google/zxing/ResultPoint;
04-16 13:32:13.183: D/dalvikvm(1359): VFY: replacing opcode 0x6e at 0x0003
04-16 13:32:13.183: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.224: I/dalvikvm(1359): Could not find method com.google.zxing.Result.toString, referenced from method com.google.zxing.client.android.CaptureActivity.handleDecodeExternally
04-16 13:32:13.224: W/dalvikvm(1359): VFY: unable to resolve virtual method 3647: Lcom/google/zxing/Result;.toString ()Ljava/lang/String;
04-16 13:32:13.224: D/dalvikvm(1359): VFY: replacing opcode 0x74 at 0x007d
04-16 13:32:13.253: I/dalvikvm(1359): Could not find method com.google.zxing.Result.getText, referenced from method com.google.zxing.client.android.CaptureActivity.handleDecodeExternally
04-16 13:32:13.253: W/dalvikvm(1359): VFY: unable to resolve virtual method 3645: Lcom/google/zxing/Result;.getText ()Ljava/lang/String;
04-16 13:32:13.264: D/dalvikvm(1359): VFY: replacing opcode 0x74 at 0x01c0
04-16 13:32:13.264: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.284: I/dalvikvm(1359): Could not find method com.google.zxing.Result.getBarcodeFormat, referenced from method com.google.zxing.client.android.CaptureActivity.handleDecodeInternally
04-16 13:32:13.284: W/dalvikvm(1359): VFY: unable to resolve virtual method 3641: Lcom/google/zxing/Result;.getBarcodeFormat ()Lcom/google/zxing/BarcodeFormat;
04-16 13:32:13.284: D/dalvikvm(1359): VFY: replacing opcode 0x74 at 0x004c
04-16 13:32:13.324: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.354: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.364: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.384: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.384: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.394: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.394: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.414: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.454: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.454: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.484: I/dalvikvm(1359): Could not find method com.google.zxing.Result.getText, referenced from method com.google.zxing.client.android.CaptureActivity.handleDecode
04-16 13:32:13.494: W/dalvikvm(1359): VFY: unable to resolve virtual method 3645: Lcom/google/zxing/Result;.getText ()Ljava/lang/String;
04-16 13:32:13.494: D/dalvikvm(1359): VFY: replacing opcode 0x6e at 0x0068
04-16 13:32:13.504: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.504: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.524: W/dalvikvm(1359): VFY: unable to find class referenced in signature (Lcom/google/zxing/Result;)
04-16 13:32:13.574: W/dalvikvm(1359): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/google/zxing/client/android/CaptureActivity;
04-16 13:32:13.584: W/dalvikvm(1359): Class init failed in newInstance call (Lcom/google/zxing/client/android/CaptureActivity;)
04-16 13:32:13.584: D/AndroidRuntime(1359): Shutting down VM
04-16 13:32:13.594: W/dalvikvm(1359): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-16 13:32:13.664: E/AndroidRuntime(1359): FATAL EXCEPTION: main
04-16 13:32:13.664: E/AndroidRuntime(1359): java.lang.ExceptionInInitializerError
04-16 13:32:13.664: E/AndroidRuntime(1359):     at java.lang.Class.newInstanceImpl(Native Method)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at java.lang.Class.newInstance(Class.java:1319)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at android.os.Looper.loop(Looper.java:137)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at java.lang.reflect.Method.invoke(Method.java:511)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-16 13:32:13.664: E/AndroidRuntime(1359):     at dalvik.system.NativeStart.main(Native Method)
04-16 13:32:13.664: E/AndroidRuntime(1359): Caused by: java.lang.NoClassDefFoundError: com.google.zxing.ResultMetadataType
04-16 13:32:13.664: E/AndroidRuntime(1359):     at com.google.zxing.client.android.CaptureActivity.<clinit>(CaptureActivity.java:101)
04-16 13:32:13.664: E/AndroidRuntime(1359):     ... 15 more
04-16 13:32:19.034: I/Process(1359): Sending signal. PID: 1359 SIG: 9 
```

# excel - 如何在维护表格公式的同时使用 VBA 更新 Excel 表格

> ID：16038541
> 
> 赞同：1
> 
> 时间：2013-04-16T13:34:31.203
> 
> 标签：excel, vba

我有一个电子表格，它定义了几个 Excel 表，其中包括源数据和使用源数据的函数。例如，一个名为 MyTbl 的表由三个“源列”和一个公式列组成......

```
Part   Price  Qty  Extended Price
------ -----  ---  --------------
Shoe   5.50   10   =(MyTbl[[#ThisRow],[Price]])*(MyTbl[[#ThisRow],[Qty]])
... 
```

必须定期将源列替换为 CSV 文件中的值，但公式列应保持不受影响。该文件类似于：

```
Shoe,5.65,98
Coat,12.65,223
... 
```

如何在保持 Excel 表及其公式存在的同时“刷新”源列？我想在 VBA 中执行此操作，因为 CSV 文件没有一致的名称或路径。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T17:22:16.917

感谢 Doug Glancy 的建议。

最初的问题涉及将 .csv 加载到列表对象中。我最终将 csv 中的数据加载到新工作表上的 listobject 中。然后，我能够将源列表对象合并到目标列表对象中，同时使用以下过程维护目标维护的其他列（和公式）。此过程清除不需要的数据，如果源包含的行少于目标，则删除行，复制数据并调整列表对象的大小。

此解决方案中的假设
- 源列表对象包含的列数少于目标
- 两个列表对象都包含一个标题行（我没有测试超过一个标题行）

`Private Sub CopyTableData(loSource As Excel.ListObject, loTarget As Excel.ListObject)
Dim lSourceRowCount As Long`

 ````
With loTarget
    If .DataBodyRange.Rows.Count <> loSource.DataBodyRange.Rows.Count Then
        ' clear of target area should clear target num rows and source num columns
        .Range(.Cells(1,1).Address, .Cells(.DataBodyRange.Rows.Count, lSource.RefersToRange.Columns.Count)).Clear

        ' clear rows if source has less than target
        If .DataBodyRange.Rows.Count > loSource.DataBodyRange.Rows.Count Then
            For i = .DataBodyRange.Rows.Count To loSource.DataBodyRange.Rows.Count + 1 Step -1
                .DataBodyRange.Rows(i).Clear
            Next i
        End If

        ' resize list object
        lSourceRowCount = loSource.HeaderRowRange.Rows.Count + _ 
                          loSource.DataBodyRange.Rows.Count

        .Resize .Range.Cells(1).Resize(lSourceRowCount, .Range.Columns.Count)
    End If
    loSource.DataBodyRange.Copy .DataBodyRange.Cells(1)
End With 
```` 

`End Sub`

再次感谢。

# testing - 免费的测试管理工具（不是基于 Web 的，而是 Windows 7 上的可下载工具）

> ID：16038543
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:34:32.483
> 
> 标签：testing, version-control

是否有任何可免费下载的 Windows 7 测试管理工具。

我不想在我必须注册的地方使用任何基于网络的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:59:31.397

我使用过的所有测试管理工具和错误跟踪器（SpiraTest、Quality Center、Jira）都是基于 Web 的。对于单独的测试人员，我对测试管理工具的个人看法是，它们通常过于复杂且限制性太强而无法使用。当然，您可以将需求链接到测试，但您必须将所有内容输入到需求部分，然后将其链接到每个测试集。在 Excel 中创建一个或两个矩阵并跟踪您的覆盖范围似乎要容易得多。

所有测试管理工具似乎也认为可以通过简单的逐步方式记录您的测试以及预期和实际结果。我个人认为这种类型的系统过于严格。一个好的测试设计可能不会屈服于简单的逐步说明。

拥有一个您和​​您的开发团队可以使用的好的错误跟踪器是一个绝妙的主意。有很多免费/便宜的选择，但它们都是基于网络的。[Bugzilla](http://www.bugzilla.org/)是免费的，需要一些时间来设置，但是您可能会在某个地方找到一个免费的 VM，它可以让您快速启动并运行（Google 周围）。[Trac](http://trac.edgewall.org/)是一个免费的 wiki，具有一些错误报告功能。[SpiraTest](http://inflectra.com/spiratest/default.aspx)很便宜 - 单个用户只需 50 美元，并且具有测试管理和错误跟踪功能，但如果您有几个开发人员，您会想要一个更大的许可证，价格可能会超过 200/300 美元。

我个人喜欢[Jira](http://www.atlassian.com/software/jira/overview)和 Atlassian 的软件。我正在使用 Jira、Confluence 和 Bonfire 进行测试。我可以在 Confluence 中为我的测试想法创建 wiki 等，在 Jira 中报告错误并使用 Bonfire 进行探索性测试。如果您想自己托管软件（将其安装在您机器上的虚拟机上），Atlassian 有一项非常酷的交易，称为[Starter](http://www.atlassian.com/software/starter/overview)，每件仅需 10 美元。

我的经验告诉我，拥有一个基于 Web 的错误跟踪工具是必须的，但测试管理工具往往是一种浪费。但是，我鼓励您环顾四周并探索。大多数（如果不是全部）这些工具都有试用程序。您必须注册/注册，但这是做生意的成本。维基百科在测试管理工具上有[这个列表](http://en.wikipedia.org/wiki/Test_management_tools)，所以也有。

# yacc - return 0 在代码中做了什么，为什么 yywrap 函数没有正文编写？

> ID：16038544
> 
> 赞同：1
> 
> 时间：2013-04-16T13:34:33.500
> 
> 标签：yacc, lex

我正在使用 BISON 和 FLEX。如果我发布了 kcalc.l 文件，return 0 会做什么？而且我没有使用没有主体的 yywrap （我的意思不是字面意思，而是一个空的主体）。代码是一个计算器，没有任何变量管理和基本操作，可以完成，如加减乘除和一元减号处理操作员。我一直在研究 lex 和 yacc 规范，但没有得到我提出的查询的任何答案。

```
 Kcal.y

%{
   #include <stdio.h>
%}
%token  Number
%left '-' '+'
%left '*' '/'
%nonassoc UMINUS
%%
    statement:  expression
                 { printf(" result = %d\n", $1);} ;
    expression: expression '+' expression
                 { $$ = $1 + $3;
                   printf("Recognised'+'expression\n");
                  }
               |   expression '-' expression
                  { $$ = $1 - $3;
                    printf("Recognised '-' expression\n");
                  }
               |    expression '*' expression
                  { $$ = $1 * $3;
                    printf("Recognised '*' expression\n");
                  }
               |    expression '/' expression
                  { if ($3 == 0)
                    printf ("divide by zero\n");
                    else 
                     $$ = $1 / $3;
                     printf("Recognised '/' expression\n");
                  }
               | '-' expression %prec UMINUS
                         {
                             $$ = - $2;
                             printf("Recognised paranthesized expression\n");
                          }
               | '(' expression ')' 
                      { 
                           $$ = $2;
                           printf("Recognised paranthesized expression");
                       }
               | Number { $$ = $1;
                          printf("Recognised a no.\n");
                         }
          ;
%%
   int main(void)
   {
     return yyparse();
   }
    int yyerror (char *msg)
     {
       return fprintf(stderr,"Yacc :%s", msg);
      }
     yywrap()
        { 
         }

kcalc.l
%{
   #include "y.tab.h"
   extern int yylval;
%}
%%
[0-9]+ {  yylval = atoi(yytext);
          printf("accepted the number : %d\n", yylval);
          return Number; }
[ \t]   { printf("skipped whitespace \n");}
\n      { printf("reached end of line\n");
          **return 0;**
        }
.    { printf("found other data \" %s\n", yytext);
        return yytext[0];
     }
%% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:36:11.570

通知解析器的`return 0`输入结束，因此显然表达式应该包含在一行中。空的身体`yywrap`是错误的。如果您`-Wall`与`gcc`编译器一起使用，它将给出两个警告`yywrap`：

```
kcal.y:54: warning: return type defaults to ‘int’
kcal.y:55: warning: control reaches end of non-void function 
```

第一个是因为没有指定函数的结果类型（K&R 风格 C），所以假设它应该返回一个`int`. 第二个警告是因为它缺少`return`这样一个`int`.

由于换行符终止输入，因此`yywrap`被调用的机会很小。但是如果输入不包含换行符，它将被调用。如果纯属意外（或多或少随机的）返回值`yywrap`被解释为`0`标记器将最终陷入重复调用的无限循环`yywrap`。

# android - Corona apk扩展不起作用

> ID：16038545
> 
> 赞同：1
> 
> 时间：2013-04-16T13:34:36.050
> 
> 标签：android, lua, coronasdk, apk-expansion-files

我尝试在新更新中使用扩展文件设置和配置，但它只制作了一个 100mb 的 apk。除了构建和配置设置之外，还有其他东西吗？

```
-- Android permissions

    usesExpansionFile = true,

    -- The following permissions are required to download expansion files.
    usesPermissions =
    {
        "android.permission.INTERNET",
        "com.android.vending.CHECK_LICENSE",
        "android.permission.WRITE_EXTERNAL_STORAGE"
        "android.permission.ACCESS_COARSE_LOCATION",
        "android.permission.ACCESS_FINE_LOCATION",
        "android.permission.INTERNET"
    }, 
```

这是我的配置

```
license =
{
    google =
    {
        key = "**********",
        policy = "this is optional",
    },
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:47:00.947

我不知道这是否是解决方法，但是您缺少`,`after `"android.permission.WRITE_EXTERNAL_STORAGE"`，所以应该是`"android.permission.WRITE_EXTERNAL_STORAGE",`.

# c - 无法传输二进制文件，而可以传输文本文件

> ID：16038548
> 
> 赞同：0
> 
> 时间：2013-04-16T13:34:42.283
> 
> 标签：c, sockets, network-programming, file-transfer

我需要将文件从一个应用程序传输到同一台机器上的另一个应用程序。我编写了传输数据包结构的代码，该数据包结构具有以下字段：

*   **序号**
*   **圆形的**
*   **data**，这是一个`unsigned char`指示要传输的数据
*   **length**`read` ，表示使用函数读取了多少字节
*   **crc**，这是目前的默认字符串

和一个参数last，表示它是最后一个数据包，因此可以关闭文件和连接。

此代码非常适用于 ASCII 文件，但是，当我使用它传输二进制文件时，两个文件的差异不匹配。我无法弄清楚问题所在。有人能帮我吗？

这是我的发件人的代码。它连接到端口 4950 上的接收器。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#define DATA 170
#define SERVERPORT "4950"       // the port users will be connecting to

typedef struct packet_ {
    unsigned short int seq;
    unsigned short int round;
    unsigned short int last;
    unsigned short int length;
    unsigned char  data[DATA];
    unsigned char crc[17];
} packet;

int main(int argc, char *argv[])
{
    int sockfd;
    struct addrinfo hints, *servinfo, *p;
    int rv;
    int numbytes;
    int max_seq_no = 10;
    packet send;
    FILE *fp;
    unsigned short int seq =0, round =0;
    long int totalBytes = 0;
    unsigned short int bytes_read =0;

    if (argc != 3) {
        fprintf(stderr,"usage: talker hostname message\n");
        exit(1);
    }

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_DGRAM;
    hints.ai_flags = AI_PASSIVE; // use my IP
    if ((rv = getaddrinfo(NULL, SERVERPORT, &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    // loop through all the results and make a socket
    for(p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,
                             p->ai_protocol)) == -1) {
            perror("talker: socket");
            continue;
        }
        break;
    }

    if (p == NULL) {
        fprintf(stderr, "talker: failed to bind socket\n");
        return 2;
    }

    fp = fopen("wilde-tiobe.txt", "rb");
    printf("Size of packet : %d", sizeof send);

    while (1) {
        memset((void *) &send, '\0', sizeof send);

        send.seq = seq;
        send.round = round;
        memset(send.data, '\0', DATA);
        bytes_read = read(fileno(fp), send.data, DATA );
        send.length = bytes_read;
        if (bytes_read < DATA) {
            send.last = 1;
            printf("****last byte***\n");
        }
        strcpy(send.crc, "yet to calcula\0");
        totalBytes+= bytes_read;

        //if(bytes_read == 0) break;

        if ((numbytes = sendto(sockfd, &send, sizeof send, 0,
                               p->ai_addr, p->ai_addrlen)) == -1) {
            perror("talker: sendto");
            exit(1);
        }
        usleep(60000);
        if (send.last) break;
    }

    fclose(fp);
    printf("Total bytes transferred : %lu\n", totalBytes);

    freeaddrinfo(servinfo);

    close(sockfd);

    return 0;
} 
```

这是我的接收器的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

#define MYPORT "4950"   // the port users will be connecting to

#define MAXBUFLEN 196
#define DATA 170

typedef struct packet_ {
    unsigned short int seq;
    unsigned short int round;
    unsigned short int last;
    unsigned short int length;
    unsigned char data[DATA];
    unsigned char crc[17];
} packet;

// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa)
{
    if (sa->sa_family == AF_INET) {
        return &(((struct sockaddr_in*)sa)->sin_addr);
    }

    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

int main(void)
{
    int sockfd;
    struct addrinfo hints, *servinfo, *p;
    int rv;
    FILE *fp;
    int numbytes;
    struct sockaddr_storage their_addr;
    char buf[MAXBUFLEN];
    socklen_t addr_len;
    char s[INET6_ADDRSTRLEN];
    packet * recv, recv_packet;
    fp = fopen("wtf.bmp", "wb");

    printf("size of packet :%d", sizeof(packet));
    memset(&hints, 0, sizeof hints);

    hints.ai_family = AF_UNSPEC; // set to AF_INET to force IPv4
    hints.ai_socktype = SOCK_DGRAM;
    hints.ai_flags = AI_PASSIVE; // use my IP

    if ((rv = getaddrinfo(NULL, MYPORT, &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    // loop through all the results and bind to the first we can
    for(p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,
                             p->ai_protocol)) == -1) {
            perror("listener: socket");
            continue;
        }

        if (bind(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
            close(sockfd);
            perror("listener: bind");
            continue;
        }

        break;
    }

    if (p == NULL) {
        fprintf(stderr, "listener: failed to bind socket\n");
        return 2;
    }

    freeaddrinfo(servinfo);

    addr_len = sizeof their_addr;

    while(1) {
        printf("listener: waiting to recvfrom...\n");
        if ((numbytes = recvfrom(sockfd, buf, MAXBUFLEN , 0,
                                 (struct sockaddr *)&their_addr,
                                  &addr_len)) == -1) {
            perror("recvfrom");
            exit(1);
        }
        printf("listener: got packet from %s\n",
                inet_ntop(their_addr.ss_family,
                        get_in_addr((struct sockaddr *)&their_addr),
                        s, sizeof s));
        printf("listener: packet is %d bytes long\n", numbytes);
        //printf("listener: packet contains \"%s\"\n", buf);
        recv = (packet *) buf;
        if (!recv_packet.data) {
            printf("NO memory\n");
            break;
        }
        memset(&recv_packet, 0, sizeof recv_packet);
        recv_packet.seq  = recv->seq;
        recv_packet.round = recv->round;
        recv_packet.last = recv->last;
        recv_packet.length = recv->length;
        memset(recv_packet.data, '\0', DATA);
        strncpy(recv_packet.data, recv->data, recv_packet.length);
        strncpy(recv_packet.crc, recv->crc, 17);
        //printf(" len: %hu  and data: %s \n", recv_packet.length, recv_packet.data);
        write(fileno(fp), recv_packet.data, recv_packet.length);
        if (recv_packet.last) {
            printf("Last packet\n");
            break;
        }
    }

    fclose(fp);
    close(sockfd);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:21:30.707

我已经遇到了与套接字类似的问题，因为我正在发送“unsigned char []”的缓冲区，并接收到“char []”的缓冲区，我认为这不是你的问题，因为你没有在有符号的范围内进行任何操作阵列，但任何方式都可以避免这些演员阵容，而且值得一试。

利用

```
unsigned char buf[MAXBUFLEN]; 
```

代替

```
char buf[MAXBUFLEN]; 
```

还要在接收数据包之前清除缓冲区，并在继续该过程之前检查“numbytes”的值。例子：

```
 printf("listener: waiting to recvfrom...\n");
    memset(buff, 0, sizeof(buff));
    numbytes=0;
    while ( (numbytes += recvfrom(sockfd, &buf[numbytes], MAXBUFLEN - numbytes , 0,
                                 (struct sockaddr *)&their_addr,
                              &addr_len)) < sizeof(packet))
        printf("Oops, the package is not full, lets read it again.");
    } 
```

或者尝试在使用 recvfrom 读取整个内存块时传递 MSG_WAITALL 标志，但我还是更喜欢每次检查读取的数据量。

# jquery - 隐藏与 jquery 具有相同类的 3 个 div 中的 2 个

> ID：16038551
> 
> 赞同：0
> 
> 时间：2013-04-16T13:34:49.347
> 
> 标签：jquery, html

我有这个 html 结构：

```
 <p><input id="hide" type="radio" ....
         <p><input id="open" type="radio" ....
<div class="item-address">...</dv>   
<div class="item-address">...</dv>
<div class="item-address">...</dv>
          ..... 
```

我想隐藏所有 div 但不是第一个！

你能帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:35:49.273

```
$('.item-address:not(:first)').hide(); 
```

小提琴：http: [//jsfiddle.net/tVxrM/](http://jsfiddle.net/tVxrM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:35:41.443

```
$(".item-address:not(`:first`)").hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:35:58.083

尝试

```
$(".item-address:not(:first)").hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:56:19.970

我们可以通过在除第一个之外的 div 中简单地添加一个额外的 css 类来实现这一点。

```
<div>
        <div class="item-address">
            First Div</div>
        <div class="item-address hideItem">
            Second Div </div>
        <div class="item-address hideItem">
            Third Div</div>
    </div> 
```

这里**hideItem**是一个 css 类，不需要为这个类定义任何属性。

使用这个 jQuery 语法来激活目标。

```
 $(".hideItem").hide(); 
```

# regex - 使用 awk/sed 从一行中提取数字

> ID：16038554
> 
> 赞同：3
> 
> 时间：2013-04-16T13:34:58.470
> 
> 标签：regex, linux, sed, awk

我有这个字符串：

```
Stream #0:0: Video: vp6f, yuv420p, 852x478, 1638 kb/s, 25 tbr, 1k tbn, 1k tbc 
```

我想从中提取`25`。我用：

```
sed -r 's/.+([0-9]{2} tbr).+/\1/' 
```

它返回我需要的东西。

无论如何，如果我遇到一个像

```
Stream #0:0(eng): Video: mpeg4 (Simple Profile) (mp4v / 0x7634706D), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 11981 kb/s, 29.97 fps, 29.97 tbr, 30k tbn, 30k tbc 
```

它不再返回我需要的东西。

我尝试了不同的替代方法，因此`tbr`在两种情况下都返回了值，但找不到正确的表达式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T13:38:19.687

这是一种方法`awk`：

```
$ awk '/tbr/{print $1}' RS=, file
25
29.97 
```

**解释：**

默认情况下`awk`将每一行视为一条记录，通过设置我们将记录分隔符设置`RS`为`,`逗号。该脚本查看每条记录并打印匹配的任何记录的第一个字段`tbr`。

* * *

一种`GNU grep`使用[积极前瞻](http://www.regular-expressions.info/lookaround.html)的方法：

```
$ grep -Po '[0-9.]+(?= tbr)' file
25
29.97 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T13:45:10.800

如果您稍微调整一下正则表达式，您当前的 sed 命令会运行良好：

```
sed -r 's/.+ (\S+) tbr,.+/\1/' 
```

# sql - 初学者 SQL 开发人员问题

> ID：16038558
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:35:08.863
> 
> 标签：sql

所以我目前正在上 DBMS 课程，我们正在做一个关于 SQL 的部分。它基本上由我为入住酒店的 5 位客人创建一个数据库。有 8 个包含信息的表格（下面列出的表格）。我目前拥有输入和工作表的所有信息（不包括在下面），但我被困在我们需要为作业编写的一些查询上。

我坚持的查询：甚至不知道从哪里开始。

1.  在同一行程中因高尔夫和晚餐而产生费用的客人姓名。

任何帮助，将不胜感激。我知道我没有包括下面每个表格使用的实际数据，所以如果您需要任何其他可能有助于编写查询的信息，请告诉我。任何帮助表示赞赏，谢谢。

```
1.GUEST (GUESTID, LASTNAME, FIRSTNAME, MIDINIT, STRADDR, CITY, STATE, ZIP, PHONE, EMAIL, AGE)

2.RESERVATION  RESID, RESDATETIME, CHECKINDATE, CHECKOUTDATE, ROOMTYPE, TOTALCOST, GUESTID)

3.CREDITCARD (CCNO, TYPE, EXPIRYDATE, GUESTID)

4.ITINERARY (ITINID, CHECKINDATETIME, CHECKOUTDATETIME, ADULTCOUNT, CHILDCOUNT, GUESTID, ROOMNO)

5.ROOM (ROOMNO, ROOMTYPE, DAILYRATE, AMENITIES)

6.BILL (BILLID, BILLDATE, AMOUNTDUE, ITINID, CCNO)

7.CHARGETYPE (CHARGEID, DESCRIPTION)

8.CHARGES (CHARGEID, ITINID, CHARGEDATETIME, AMOUNT, GUESTID) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:04:53.917

让我们分解一下。您需要的第一件事是客人的姓名。很明显，这必须来自客人餐桌。

所以你有了

```
select FIRSTNAME, MIDINIT,  LASTNAME, 
From Guest 
```

现在你只想要有行程的客人，所以你对行程进行内部连接（提示你加入 GuestID）

```
 select FIRSTNAME, MIDINIT,  LASTNAME, ItineraryID
    From Guest
 JOIN ITINERARY on GUEST.GUESTID =  ITINERARY.GUESTID 
```

现在您只需要对该行程收费的客人。

因此，您会考虑加入 CHARGES 和 CHARGETYPE（获取费用类型）并使用 where 子句将费用限制为您感兴趣的类型。但是因为您要确保同时拥有这两种类型的费用，您需要加入 CHARGES 和 CHARGETYPE 两次（我不了解 Oracle，但在 SQL Server 中这些需要别名（我将它们称为 C1 和 CT1 以及 C2 和 CT2）我怀疑 Oracle 也是如此）。第一个连接将有一个 CT1 = 'dinner' 的 where 子句，两个表的第二个分组将包括一个 CT2 = 'golf' 的 where 子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:08:54.363

因为这是一个家庭作业，我不想只是发布答案，但我有很好的线索给你。

**问题 1**：您需要创建一个内部选择语句（子查询）来确定所有费用的平均费用，然后才能与每个费用进行比较。您的子查询可能如下所示：

```
SELECT AVG(AMOUNT) "AvgCharge" FROM CHARGES 
```

您可以将其放在语句的 SELECT 部分或作为[笛卡尔积](http://docs.oracle.com/javadb/10.8.2.2/ref/rrefsqljcrossjoin.html)。

**问题 2**：我猜您需要将`ITINERARY`、`CHARGES`和`CHARGETYPE`表连接在一起。这是[Oracle 中 JOIN](http://www.asktheoracle.net/oracle-sql-joins.html)的链接。之后，您必须将该声明限制为仅显示高尔夫和晚餐费用。

# php - PHP使用push在另一个中堆叠数组

> ID：16038559
> 
> 赞同：1
> 
> 时间：2013-04-16T13:35:16.803
> 
> 标签：php, arrays, push

谁能解释我如何解决以下问题：

```
function GetSetClearForm(){

   $person = array('firstname' => $_POST["fname"], 'lastname' => $_POST["lname"],'age' => $_POST["age"] ,'city' => $_POST["city"] ,'zipcode' => $_POST["zcode"],'address' => $_POST["address"]);
   print_r($person);
   $personlist = array();
   array_push($personlist,$person);
   print_r($personlist);

   return $personlist;
} 
```

运行后，`print_r($personlist);`我得到以下输出：

```
 Array ( 
    [0] => Array ( 
       [firstname] => 2 
       [lastname] => 2 
       [age] => 2 
       [city] => 2 
       [zipcode] => 2 
       [address] => 2 
       ) 
    ) 
```

（用“2”填写所有文本框）。

此时可以，但是每当我填写另一个时，我都会得到以下输出：

```
Array ( 
    [0] => Array ( 
           [firstname] => 1 
           [lastname] => 1 
           [age] => 1 
           [city] => 1 
           [zipcode] => 1 
           [address] => 1 
           ) 
     ) 
```

（用“1”填写所有文本框）。

`index[1]`因此，它不会在新索引 ( )上创建另一个人，而是`index[0]`用一个新人替换并删除旧的人。我不想让它删除它我想得到一个人满为患的列表。我认为这与我有关，`array_push`但我不确定我是否希望有人能在这里帮助我。

**编辑：**

添加了 index.php：

```
<form action="check.php" method="POST">
<table>
<tr><td>First name</td><td><input type="text" name="fname"></td></tr>
<tr><td>Last name</td><td><input type="text" name="lname"></td></tr>
<tr><td>Age</td><td><input type="text" name="age"></td></tr>
<tr><td>City</td><td><input type="text" name="city"></td></tr>
<tr><td>Zipcode</td><td><input type="text" name="zcode"></td></tr>
<tr><td>Adress</td><td><input type="text" name="address"></td></tr>
<tr><td></td><td><input type="submit" value="Submit"></td></tr>
</table>
</form> 
```

添加了 check.php

```
<?php
include("functions.php");

$personlist = array();
$personlist[] = GetSetClearForm();
print_r($personlist);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:47:59.540

而不是使用 array_push 你可以使用这个：

```
$personlist = array();
$personlist[] = $person; 
```

这样，每次“插入”一个新值时都会创建一个新索引，在这种情况下是一个数组。

**编辑：**

您需要在函数之外声明并填充 $personlist 数组。那说：

```
function GetSetClearForm(){

   $person = array('firstname' => $_POST["fname"], 'lastname' => $_POST["lname"],'age' => $_POST["age"] ,'city' => $_POST["city"] ,'zipcode' => $_POST["zcode"],'address' => $_POST["address"]);
   print_r($person);
   return $person;
 }

 $personlist = array();
 $personlist[] = GetSetClearForm(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:52:44.963

我认为问题在于每次调用该函数时您都在重新创建人员列表。也许你可以像这样解决它：

```
//Create your person list some where else and keep it alive.
//Like in a session? 
session_start();

//Then give your keep alive array to your function each time.
function GetSetClearForm(){

$person = array('firstname' => $_POST["fname"], 'lastname' => $_POST["lname"],'age' => $_POST["age"] ,'city' => $_POST["city"] ,'zipcode' => $_POST["zcode"],'address' => $_POST["address"]);
print_r($person);

return $person;
}

$_SESSION['personlist'][] = GetSetClearForm() ;   
print_r( $_SESSION['personlist']); 
```

# java - 不使用 jsoup 处理元素

> ID：16038561
> 
> 赞同：0
> 
> 时间：2013-04-16T13:35:21.257
> 
> 标签：java, selenium-webdriver

我的 Html 文件如下所示：

```
<div class="mdt">
  Samsung Galaxy Y S5360
</div>
<div class="mdt">
  Samsung Champ Neo Duos C3262
</div>
<div class="mdt">
  Micromax Ninja A27
</div>
<div class="mdt">
  Karbonn S1 Titanium
</div>

<div class="priceDiv discTop">
  <span class="WebRupee WebRupeeMain">Rs.</span> 5,717
</div>
<div class="priceDiv discTop">
  <span class="WebRupee WebRupeeMain">Rs.</span> 3,004
</div>
<div class="priceDiv discTop">
  <span class="WebRupee WebRupeeMain">Rs.</span> 3,348
</div>
<div class="priceDiv discTop">
  <span class="WebRupee WebRupeeMain">Rs.</span> 9,306
</div> 
```

我想显示输出是::

```
 Samsung Galaxy Y S5360    Rs. 5,717 

 Samsung Champ Neo Duos C3262   Rs. 3,004 

 Micromax Ninja A27    Rs. 3,348 
```

为此，我正在使用 Jsoup Elements 类。我的实际代码是：

```
doc.select("body").select("table").select("div.mdt") 
```

和

```
doc.select("body").select("table").select("div.priceDiv.discTop") 
```

通过使用此代码，我可以单独显示。我使用了两个 for 循环来迭代这两个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:59:29.360

I don'k know about Jsoup, but i can show how i can do it in java.

So you'll catch all the phones and prices and put it into a list.

```
List<WebElement> allPhones = driver.findElements(By.cssSelector("div.mdt"));
List<WebElement> allPrices = driver.findElements(By.cssSelector("div.priceDiv.discTop")); 
```

since you have all that you can easily do that

```
for (int i = 0; i < allPhones.length; i++) {
  Systeme.out.println(allphones.get(i).getText() + " " + allPrices.get(i).getText());           
} 
```

# android - PhoneGap + JQuery Mobile + Google Maps v3：地图显示左上角瓷砖？

> ID：16038562
> 
> 赞同：8
> 
> 时间：2013-04-16T13:35:22.780
> 
> 标签：android, cordova, jquery-mobile, google-maps-api-3, jquery-mobile-pageshow

我有一个 PhoneGap 应用程序，它使用 JQuery mobile 在页面之间导航。

当我从主页导航到包含 Google 地图的页面时，地图在左上角一次只显示一个图块，如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/mecbp.png)

这可能是什么原因？

**

> **源代码：** 以下脚本在我的页面头部

```
<script>
            $(document).on("pageinit", "#stores", function () {
                var centerLocation = new google.maps.LatLng('57.77828', '14.17200');

        var myOptions = {
            center: centerLocation,
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            callback: function () { alert('callback'); }
        };

        map_element = document.getElementById("map_canvas");

        map = new google.maps.Map(map_element, myOptions);

        var mapwidth = $(window).width();
        var mapheight = $(window).height();
        $("#map_canvas").height(mapheight);
        $("#map_canvas").width(mapwidth);
        google.maps.event.trigger(map, 'resize');

            });
        </script> 
```

我的页面是这样的

```
<!-- Home -->
        <div data-role="page" id="home">
.
.
.
</div>

<div data-role="page" id="stores">
<div data-role="content" id="map_canvas"></div>
</div> 
```

我从主页导航到地图页面，如下所示：

```
<a href="#stores">Stores</a> 
```

> **应用 Gajotres 解决方案后更新** 瓷砖变成这样 ![在此处输入图像描述](https://i.stack.imgur.com/hjCf7.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T13:50:03.650

# 介绍

较新版本的 jQuery Mobile 和 Google Maps v3 有点特别。

您的第一个问题是使用 pageinit 事件进行计算。那时您无法获得正确的页面高度和宽度。因此，请改用 pageshow，您会发现它在我的示例中有效。

在显示地图之前，您需要调整其内容 DIV 的大小。这是因为内容 div 将根据可用的内部元素调整大小。所以我们需要手动修复这个问题，通过 javascript 或 CSS。我已经对这个问题有了答案：[**升级到 jquerymobile 1.2 后，google map not full screen**](https://stackoverflow.com/questions/13823556/google-map-not-full-screen-after-upgrade-to-jquerymobile-1-2)但我也可以向您展示一个工作示例：

# 工作示例

工作 jsFiddle 示例： http: [//jsfiddle.net/Gajotres/GHZc8/](http://jsfiddle.net/Gajotres/GHZc8/)（Javascript 解决方案，CSS 解决方案可以在底部链接中找到）。

# 代码

### HTML

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
        </div>

        <div data-role="content" id="content">
            <div id="map_canvas" style="height:100%"></div>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">
            <h3>
                First Page
            </h3>
        </div>
    </div>
</body>
</html> 
```

### Javascript

这是一个用于计算正确页面高度的函数：

```
 $('#map_canvas').css('height',getRealContentHeight());

function getRealContentHeight() {
    var header = $.mobile.activePage.find("div[data-role='header']:visible");
    var footer = $.mobile.activePage.find("div[data-role='footer']:visible");
    var content = $.mobile.activePage.find("div[data-role='content']:visible:visible");
    var viewport_height = $(window).height();

    var content_height = viewport_height - header.outerHeight() - footer.outerHeight();
    if((content.outerHeight() - header.outerHeight() - footer.outerHeight()) <= viewport_height) {
        content_height -= (content.outerHeight() - content.height());
    } 
    return content_height;
} 
```

# 另一种解决方案

这个问题还有另一种解决方案，它只使用 CSS，可以在**[这里](http://www.gajotres.net/using-google-maps-javascript-api-v3-with-jquery-mobile/)**找到。我更喜欢这个解决方案，因为它不需要 javascript 来正确修复地图高度。

### CSS：

```
#content {
    padding: 0;
    position : absolute !important; 
    top : 40px !important;  
    right : 0; 
    bottom : 40px !important;  
    left : 0 !important;     
} 
```

# 最后一件事

此外，如果页面宽度仍然不正确，只需将其设置为 100%：

```
$('#map_canvas').css('width', '100%'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T06:53:05.043

几个月来，我一直在努力寻找解决方案。即使为 content 和 map-canavas div 设置样式属性也不能解决所有问题。google.maps.event.trigger(map, "resize") 也没有这样做。地图现在是全屏的，但仍位于左上角的中心。而且，如果您在每个 pageshow 上调用您的初始化函数，则地图每次都会重置回其原始位置。

我能够在 pageshow 事件中提出这个调用并解决了我所有的问题！

```
$('map-page').on("pageshow", function() {
    var latLng = map.getCenter();
    google.maps.event.trigger(map,'resize');
    map.setCenter(latLng);
}); 
```

CSS

```
<style>
  html, body, #map-canvas {
    height: 100%;
    margin: 0px;
    padding: 0px
  }

  .ui-page { -webkit-backface-visibility: hidden; }

</style> 
```

这是我的内容和地图画布 div。

```
<div data-role="content" id="mapContent" style="padding:0;position:absolute;
top:40px;right:0px;bottom:60px;left:0px; ">
    <div id="map-canvas" style="width:100%;" >
    </div>
</div><!-- /Content --> 
```

它获取地图的当前中心，将地图调整为当前 div，然后设置地图中心。这样，如果用户离开页面并返回，地图不会丢失其位置。

希望这可以帮助。

罗伯特

# entity-framework-5 - 模拟 DbEntityEntry

> ID：16038566
> 
> 赞同：3
> 
> 时间：2013-04-16T13:35:33.473
> 
> 标签：entity-framework-5, moq, dbcontext, xunit

我正在为我的通用存储库层编写单元测试，但我遇到了一些问题`DbEntityEntry`。

我的更新方法如下。

```
 public virtual void Update(TEntity entityToUpdate) {
            var entity = dbSet.Find(context.Entry<ITrackedEntity>(entityToUpdate).Entity.Id);
            context.Entry(entity).CurrentValues.SetValues(entityToUpdate);
        } 
```

如您所见，`context.Entry<TEntity>(TEntity entity)`方法由调用者调用。因此，在单元测试时，此代码会引发空异常。

我曾尝试模拟`context.Entry`方法，但我不能，因为我无法提供返回值。

我目前的测试方法如下

```
[Fact]
        public void UpdateTest() {
            AssetType _sample1 = new AssetType() {
                AssetTypeID = 1,
                IsContainer = true,
                Name = "Sample 1"
            };

            IDbSet<AssetType> assetTypeDbSet = new FakeDbSet<AssetType>(_sample1);

            Mock<IDbContext> mockContext = new Mock<IDbContext>();
            mockContext.Setup(pc => pc.Set<AssetType>()).Returns(assetTypeDbSet);
            _sample1.Name = "Sample 1.1";

            var dbEntity = mockContext.Object.Entry<ITrackedEntity>(_sample1);
            mockContext.Setup(p => p.Entry<ITrackedEntity>(It.IsAny<AssetType>())).Returns(dbEntity);
            using(GenericRepository<AssetType> repo = new GenericRepository<AssetType>(mockContext.Object)) {                
                repo.Update(_sample1);
                var result = repo.GetAll(0, 0);
                Assert.Equal(1, result.Count);
                var singleResult = repo.GetByID(1);
                Assert.Equal(_sample1.Name, singleResult.Name);
            }
        } 
```

我试图通过在测试中`DbEntityEntry`调用`context.Entry<>()`方法来获得价值，但那也返回`null`了。这个类也不能用`new`操作符初始化。所以我卡住了。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:56:53.080

对这段代码进行单元测试有什么意义？你伪造`Find`方法，然后你伪造`DbEntityEntry`，将没有真正的逻辑来测试。

无论如何，EF 代码通常是不可单元测试的。这就是人们相信存储库会帮助他们的原因之一，因为他们在测试上层时会模拟/伪造他们的存储库。然后使用集成测试对存储库进行测试，以确保 EF 和数据库中的所有内容都按预期工作。

你不会`DbEntityEntry`用 Moq 造假。也许使用 TypeMock Isolator 或 MS Fakes，您将能够做更多事情，但在您的示例代码中不需要它。

# android - 在 Android 的 chrome 浏览器中创建自定义标签主机

> ID：16038575
> 
> 赞同：6
> 
> 时间：2013-04-16T13:35:46.727
> 
> 标签：android, android-tabhost, android-tabs, android-browser

我想为标签之类的浏览器创建自定义标签主机。我很困惑如何将它应用于图像中的 chrome 浏览器选项卡中的布局。

![在此处输入图像描述](https://i.stack.imgur.com/fhtaV.png)

这是我尝试过的。我想知道如何用图像中的斜率创建边缘。

tab_selected.xml

```
<item>
    <shape android:shape="rectangle" >
        <solid android:color="#DCDCDC" />

        <corners
            android:topLeftRadius="5dp"
            android:topRightRadius="5dp" />
    </shape>
</item>
<item
    android:bottom="2dp"
    android:left="1dp"
    android:right="1dp"
    android:top="1dp">
    <shape android:shape="rectangle" >
        <solid android:color="#DCDCDC" />
        <corners
            android:topLeftRadius="10dp"
            android:topRightRadius="10dp" />
    </shape>
</item> 
```

tab_unselected.xml

```
<item android:top="10dp">
    <shape android:shape="rectangle" >
        <solid android:color="#AAAAAA" />
    </shape>
</item>
<item android:bottom="2dp">
    <shape android:shape="rectangle" >
        <solid android:color="#AAAAAA" />

        <corners
            android:topLeftRadius="10dp"
            android:topRightRadius="10dp" />

    </shape>
</item> 
```

我希望可以使用 XML 中的 Pathshape 来完成。谁能指出我的参考？在 PathShape 上找不到参考

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T00:45:47.920

将您的页面放在 FrameLayout 和 hashmap 中（带有它们的特定名称）。然后你可以像这样改变标签

```
 FrameLayout fl =new FrameLayout(context);
  HashMap<String,LinearLayout> tabs =new HashMap<String,LinearLayout>(); 

  LinearLayout tab =new LinearLayout(context);
  fl.addView(tab);
  tabs.put("home",tab);

  tab =new LinearLayout(context);
  fl.addView(tab);
  tabs.put("events",tab);

private void changeTab(String tabKey) {
    for (java.util.Map.Entry<String, LinearLayout> e : tabs.entrySet()) {
        if (e.getKey().compareTo(key) == 0) {
            e.getValue().setVisibility(View.VISIBLE);
        } else {
            e.getValue().setVisibility(View.INVISIBLE);
        }
    }
 }

 use this to change tab:

  changeTab("home"); 
```

注意：您必须将 fl 设置为活动的内容视图或将其添加到另一个视图并将其设置为内容视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T12:53:49.803

它适用于两个九个补丁图像。一个用于活动选项卡，一个用于非活动选项卡。

# php - 在 MySQL 查询条件下使用选定的字段值

> ID：16038590
> 
> 赞同：1
> 
> 时间：2013-04-16T13:36:27.487
> 
> 标签：php, mysql

我有 2 个表，我使用以下查询从中获取记录。

```
SELECT es.name,es.location,e.num_days as days
FROM event_schedule es,events e
WHERE es.owner_id=1 AND es.event_id=e.id AND (es.date_of_service BETWEEN CURDATE() AND CURDATE() + INTERVAL 4 DAY)" 
```

在给定的查询中，我获取了接下来 4 天内的所有计划事件。查询工作正常。我的问题是“INTERVAL 4 DAY”这个值应该来自表“事件”本身。这意味着来自同一查询的字段值（e.num_days 作为天数）。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:40:36.773

首先，学习正确的连接语法。

您可以使用变量代替`4`. 所以试试这个：

```
SELECT es.name,es.location,e.num_days as days
FROM event_schedule es join
     events e
     on es.owner_id=1 AND es.event_id=e.id AND
        (es.date_of_service BETWEEN CURDATE() AND CURDATE() + INTERVAL e.num_days DAY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:38:08.580

假设 $val 包含你想要的值

```
SELECT es.name,es.location,e.num_days as days FROM event_schedule es,events e WHERE es.owner_id=1 AND es.event_id=e.id AND (es.date_of_service BETWEEN CURDATE() AND CURDATE() + INTERVAL $val DAY)" 
```

# hadoop - 访问本地文件系统而不上传到 hdfs

> ID：16038592
> 
> 赞同：0
> 
> 时间：2013-04-16T13:36:31.290
> 
> 标签：hadoop, mapreduce, hdfs, mapper

无论如何要在HDFS之外的Hadoop中指定输入路径，我正在运行一个单节点集群并想访问HDFS之外的文件，那么有什么办法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:43:48.700

是的。只需在本地 FS 上提供文件的完整路径即可。不要忘记添加“file://”。为了安全起见，如果您这样做了，请不要在代码中添加对配置文件的引用。

# javascript - JS 使用 .push() 时防止重复

> ID：16038601
> 
> 赞同：4
> 
> 时间：2013-04-16T13:36:57.030
> 
> 标签：javascript, jquery, underscore.js

我从服务器获取数据列表，我必须对其进行转换。其中一部分是将其转换为 3 维数组。在“myArr[i].children.push(temp);”之后 它留下了被推入数组根目录的对象的副本。我可以在不复制的情况下推送还是如何删除这些？（我有下划线js，我知道他们有很好的数组函数:)）

```
for (var i = 0; i < myArr.length; i++) {
    myArr[i].children = [];
    for (var q = 0; q < myArr.length; q++) {
        if (myArr[i].id == myArr[q].parentid) {
            var temp = {
                id: myArr[q].id,
                index: myArr[q].index,
                text: myArr[q].text
            }
            myArr[i].children.push(temp);
        };
    };  
}; 
```

**数据**

```
[{
    "id": "5",
    "parentid": "0",
    "text": "Device Guides",
    "index": "0"
}, {
    "id": "6",
    "parentid": "0",
    "text": "Pre-Sales Evaluation",
    "index": "1"
}, {
    "id": "7",
    "parentid": "0",
    "text": "Router Setup Guides",
    "index": "2"
}, {
    "id": "9",
    "parentid": "7",
    "text": "Sonicwall",
    "index": "0"
}, {
    "id": "10",
    "parentid": "5",
    "text": "Grandstream GXP-21XX",
    "index": "1"
}, {
    "id": "11",
    "parentid": "5",
    "text": "Polycom Soundstation\/Soundpoint",
    "index": "2"
}, {
    "id": "12",
    "parentid": "7",
    "text": "Cisco",
    "index": "1"
}, {
    "id": "15",
    "parentid": "0",
    "text": "Post-Sales Implementation Check List",
    "index": "7"
}, {
    "id": "16",
    "parentid": "15",
    "text": "Porting and New Number Details",
    "index": "0"
}, {
    "id": "18",
    "parentid": "15",
    "text": "Partner Setup",
    "index": "1"
}, {
    "id": "19",
    "parentid": "15",
    "text": "test",
    "index": "2"
}, {
    "id": "20",
    "parentid": "0",
    "text": "test",
    "index": "11"
}, {
    "id": "21",
    "parentid": "15",
    "text": "test",
    "index": "3"
}, {
    "id": "23",
    "parentid": "5",
    "text": "New Polycom",
    "index": "0"
}, {
    "id": "24",
    "parentid": "0",
    "text": "Test Markup",
    "index": "14"
}, {
    "id": "25",
    "parentid": "0",
    "text": "test",
    "index": "15"
}] 
```

**形成后：**

```
{
    "children": [{
        "id": "5",
        "parentid": "0",
        "text": "Device Guides",
        "index": "1",
        "children": [{
            "id": "10",
            "index": "0",
            "text": "Grandstream GXP-21XX"
        }, {
            "id": "11",
            "index": "1",
            "text": "Polycom Soundstation/Soundpoint"
        }, {
            "id": "23",
            "index": "2",
            "text": "New Polycom"
        }]
    }, {
        "id": "6",
        "parentid": "0",
        "text": "Pre-Sales Evaluation",
        "index": "0",
        "children": []
    }, {
        "id": "7",
        "parentid": "0",
        "text": "Router Setup Guides",
        "index": "2",
        "children": [{
            "id": "9",
            "index": "0",
            "text": "Sonicwall"
        }, {
            "id": "12",
            "index": "1",
            "text": "Cisco"
        }]
    }, {
        "id": "9",
        "parentid": "7",
        "text": "Sonicwall",
        "index": "0",
        "children": []
    }, {
        "id": "10",
        "parentid": "5",
        "text": "Grandstream GXP-21XX",
        "index": "0",
        "children": []
    }, {
        "id": "11",
        "parentid": "5",
        "text": "Polycom Soundstation/Soundpoint",
        "index": "1",
        "children": []
    }, {
        "id": "12",
        "parentid": "7",
        "text": "Cisco",
        "index": "1",
        "children": []
    }, {
        "id": "15",
        "parentid": "0",
        "text": "Post-Sales Implementation Check List",
        "index": "7",
        "children": [{
            "id": "16",
            "index": "0",
            "text": "Porting and New Number Details"
        }, {
            "id": "18",
            "index": "1",
            "text": "Partner Setup"
        }, {
            "id": "19",
            "index": "2",
            "text": "test"
        }, {
            "id": "21",
            "index": "3",
            "text": "test"
        }]
    }, {
        "id": "16",
        "parentid": "15",
        "text": "Porting and New Number Details",
        "index": "0",
        "children": []
    }, {
        "id": "18",
        "parentid": "15",
        "text": "Partner Setup",
        "index": "1",
        "children": []
    }, {
        "id": "19",
        "parentid": "15",
        "text": "test",
        "index": "2",
        "children": []
    }, {
        "id": "20",
        "parentid": "0",
        "text": "test",
        "index": "11",
        "children": []
    }, {
        "id": "21",
        "parentid": "15",
        "text": "test",
        "index": "3",
        "children": []
    }, {
        "id": "23",
        "parentid": "5",
        "text": "New Polycom",
        "index": "2",
        "children": []
    }, {
        "id": "24",
        "parentid": "0",
        "text": "Test Markup",
        "index": "14",
        "children": []
    }, {
        "id": "25",
        "parentid": "0",
        "text": "test",
        "index": "15",
        "children": []
    }]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:19:43.083

干得好

```
tree = {0: {children: []}}

data.forEach(function(x) {
    x.children = tree[x.id] ? tree[x.id].children : [];
    tree[x.id] = x;

    if(!tree[x.parentid])
        tree[x.parentid] = {children: []}
    tree[x.parentid].children.push(x)
})

result = tree[0].children 
```

该解决方案是线性的（仅在数组上迭代一次）并且不需要任何预排序。

[http://jsfiddle.net/U47WY/](http://jsfiddle.net/U47WY/)

以下是将树转换回线性数组的方法：

```
function flatten(source) {
    return source.reduce(function(a, x) {
        var children = x.children;
        delete x.children;
        return a.concat([x], flatten(x.children))
    }, []);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:23:39.447

继评论中的友好讨论之后：

```
var zeroObj = {"children":[]};
for (var i = 0; i < myArr.length; i++) {
    if(myArr[i].parentid === 0) {
        zeroObj.children.push(myArr[i]);
    } else {
        for (var q = 0; q < myArr.length; q++) {
            if (myArr[i].parentid == myArr[q].id) {
                myArr[q].children = myArr[q].children || [];
                myArr[q].children.push(myArr[i]);
            };
        }; 
    }
}; 
```

# opencv - 使用openCV无法解析的外部符号

> ID：16038602
> 
> 赞同：0
> 
> 时间：2013-04-16T13:36:57.513
> 
> 标签：opencv, depth, openni

我正在尝试使用 OpenCV 初始化 OpenNI 传感器，以便从我的 kinect 的深度传感器获取深度图。

我用来获取一张深度图像的[代码：](http://docs.opencv.org/doc/user_guide/ug_highgui.html)

和我得到的输出：

```
LNK2019: unresolved external symbol "int __cdelc cv::waitKey(int)" (?waitKey@cv@@YAHH@Z) reference in function _main 
```

在`.pro`我的文件中：

```
QT += widgets
WITH_OPENNI = ON 
```

# java - 使用 Document 而不是 StreamSource 解组 xml

> ID：16038604
> 
> 赞同：1
> 
> 时间：2013-04-16T13:36:59.150
> 
> 标签：java, xml, moxy, unmarshalling

我之前使用“javax.xml.bind.Unmarshaller”中的此方法解组了我的文档（我使用 Moxy 作为 jaxb 提供程序）：

```
<Object> JAXBElement<Object> javax.xml.bind.Unmarshaller.unmarshal(Source source, Class<Object> declaredType) throws JAXBException 
```

现在我必须重构我的代码才能使用

```
<?> JAXBElement<?> javax.xml.bind.Unmarshaller.unmarshal(Node node, Class<?> declaredType) throws JAXBException 
```

问题是我得到一个解组异常：

```
 Caused by: javax.xml.bind.UnmarshalException
 - with linked exception:
[Exception [EclipseLink-25004] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: An error occurred unmarshalling the document
Internal Exception: org.xml.sax.SAXParseExceptionpublicId: ; systemId: ; lineNumber: 0; columnNumber: 0; cvc-elt.1: Cannot find the declaration of element 'invoice:request'.] 
```

我尝试使用 Document 和 Document.getDocumentElement() 解组。document 中的数据与 InputStream 中的数据相同。文档是这样创建的：

```
 protected static Document extractDocument(InputStream sourceData) {
    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
    Document doc;
    try {
        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
        doc = docBuilder.parse(new InputSource(sourceData));
    } catch (Exception e) {
        throw new IllegalArgumentException("Problem on reading xml, cause: ", e);
    }
    return doc;
} 
```

我需要“中间”文档来进行类型识别/以获得解组的第二个参数。

那么如何将 unmarshal 方法与 Node/Document 一起使用，其结果与使用 inputstream 的结果相同？

**为瑞克编辑**

我正在从[这里](http://www.forum-datenaustausch.ch/xmlstandards/xml_4.3/xml_rechnung_xml_4.3/xml_rechnung_generelle_rechnung_xml_4.3)解组 xml 数据xsds 在[这个 zip](http://www.forum-datenaustausch.ch/generalinvoicerequest_430.xsd.zip)中，示例在[这里](http://www.forum-datenaustausch.ch/xmlstandards_generelle_rechnung_beispiele_anfrage_4.3_20100901.zip)。

我写了一个简单的测试（jaxb 提供者是 moxy，它也被用来生成绑定类）：

```
 @Test
public void test() throws Exception {
    Unmarshaller um;
    JAXBContext jaxbContext = JAXBContext
            .newInstance("....generatedClasses.invoice.general430.request");
    um = jaxbContext.createUnmarshaller();

    InputStream xmlIs = SingleTests.class.getResourceAsStream("/430_requests/dentist_ersred_TG_430.xml");

    SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = sf.newSchema(this.getClass().getResource("/xsd/" + "generalInvoiceRequest_430.xsd"));
    // start
    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
    Document doc;
    try {
        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
        doc = docBuilder.parse(new InputSource(xmlIs));
    } catch (Exception e) {
        throw new Exception("Problem on recognizing invoice type of given xml, cause: ", e);
    }
    // end
    um.setSchema(schema);
    um.unmarshal(doc, ....generatedClasses.invoice.general430.request.RequestType.class);

} 
```

这不适用于上述错误。但只要删除“开始结束块”并直接解组流 xmlIs（不使用文档），代码就可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:15:29.443

[好的，我在这里](http://www.eclipse.org/forums/index.php/m/1043333/)问了同样的问题，答案是：

简单添加

```
docBuilderFactory.setNamespaceAware(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T17:20:04.840

The following code works for me with a simple test model and gives the same result in all three cases:

```
 JAXBContext ctx = JAXBContext.newInstance(new Class[] { TestObject.class }, null);

    Source source = new StreamSource("src/stack16038604/instance.xml");
    JAXBElement o1 = ctx.createUnmarshaller().unmarshal(source, TestObject.class);
    System.out.println(o1.getValue());

    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
    InputStream inputStream2 = ClassLoader.getSystemResourceAsStream("stack16038604/instance.xml");
    Document node = builderFactory.newDocumentBuilder().parse(inputStream2);
    JAXBElement o2 = ctx.createUnmarshaller().unmarshal(node, TestObject.class);
    System.out.println(o2.getValue());

    DocumentBuilderFactory builderFactory2 = DocumentBuilderFactory.newInstance();
    InputStream inputStream3 = ClassLoader.getSystemResourceAsStream("stack16038604/instance.xml");
    InputSource inputSource = new InputSource(inputStream3);
    Document node2 = builderFactory2.newDocumentBuilder().parse(inputSource);
    JAXBElement o3 = ctx.createUnmarshaller().unmarshal(node2, TestObject.class);
    System.out.println(o3.getValue()); 
```

If you provided a systemId in the Source use-case, then you should use the same systemId on the InputSource you create:

```
inputSource.setSystemId(sameIdAsYouUsedForSource); 
```

If you are still having problems could you post the XML that you are trying to unmarshal? Also if your JAXB objects were generated from an XML Schema that could provide useful information as well.

Hope this helps,

Rick

# c# - 重构两千行代码xaml页面

> ID：16038606
> 
> 赞同：2
> 
> 时间：2013-04-16T13:37:02.870
> 
> 标签：c#, .net, wpf, xaml, refactoring

我的页面有 5 个选项卡项，代码超过两千行。是否可以将每个选项卡项的代码移动到某种模板？如何重构这么大的页面？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:21:50.640

您总是可以创建新的资源字典并将每个标签页的内容放入其中，给它们一个键。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid x:Key="tabPage1">
        <!-- your controls here-->
    </Grid>
</ResourceDictionary> 
```

然后用那个键引用。

```
<TabControl>
    <TabItem Content="{StaticResource tabPage1}"/>
</TabControl> 
```

如果您想在多个选项卡上使用内容，它实际上将共享同一个静态实例，因此您必须指定是否需要它的多个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:01:27.563

您可以创建新的用户控件并将每个标签页的内容放入其中

```
<UserControl x:Class="InstrumentServiceTabItems.ServiceHistory">
    <Grid>
    ...
    </Grid>
</UserControl> 
```

然后在主页上包括参考如下：

```
<Page x:Class="InstrumentServicePage"
      xmlns:sHistory="clr-namespace:InstrumentServiceTabItems">

        <TabControl>
            <TabItem>
               <sHistory:ServiceHistory />
            <TabItem>
        </TabControl>
</Page> 
```

# intel - 英特尔 AppFramework $.mvc.route 和转换

> ID：16038607
> 
> 赞同：3
> 
> 时间：2013-04-16T13:37:10.700
> 
> 标签：intel, appframework

我正在使用英特尔 Appframework MVC 制作应用程序，但我找不到通过 $.mvc.route 使用转换的方法。

我试图结合：

```
$.ui.loadContent("mydiv",false,false,"pop"); //from the documentation 
```

以这种方式使用mvc：

```
$.ui.loadContent($.mvc.route("controller/action/"+var,false,false,"pop"); 
```

结果是控制器运行并完成了他的工作，没有显示转换，并且从控制台我收到此错误：

```
Uncaught TypeError: Object #<error> has no method 'indexOf' 
```

有人有建议吗？或者你能给我关于这个框架某个地方的社区的建议吗？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:19:36.830

来自 gitHub 的解决方案......也许对某人有用：

这样调用路由：

```
$.mvc.route("controller/action/"+var+"/false/false/pop"); 
```

然后在控制器中：

```
action:function(var1,var2,var3,var4){ $.ui.loadContent(var1,var2,var3,var4) }. 
```

希望可能有用，它对我有用。

# mysql - 使用 PK 为密钥“1”复制条目“2”

> ID：16038614
> 
> 赞同：0
> 
> 时间：2013-04-16T13:37:25.980
> 
> 标签：mysql, insert, duplicates, primary-key

我正在使用 userID 的主键将项目保存到数据库中，然后只能由登录用户在网站上以表格形式查看。

我有该用户 ID 的保存工作和查看项目，但是当我尝试保存第二个项目时，我收到重复输入错误。我不确定这是否是数据库或代码的问题，有什么建议可以解决这个问题吗？

数据库：userID
mediumint(6) null：无默认值：无 AUTO_INCREMENT

要保存的代码：

```
function get_id($db,$username) 
{   
   $stm = $db->prepare("SELECT userID FROM users where username=?");
   $stm->execute(array($username));
   return $stm->fetchColumn();
}

$userID = get_id($db,$_SESSION['username']);

$sql = "INSERT INTO saved (userID, title, desp
          VALUES ($userID, '$title', '$desp')"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:41:09.640

我认为您的 userID 列设置为 Primary Key 或 Unique Key，因此它应该是唯一的。可能是您试图再次向其插入相同的值，这是不允许的。

# actionscript - 如何区分 actionscript 3 或 AIR 中的键盘？

> ID：16038615
> 
> 赞同：2
> 
> 时间：2013-04-16T13:37:27.247
> 
> 标签：actionscript, air, keyboard

我正在创建一个游戏，玩家可以使用各种控制器和键盘进行游戏。该游戏适用于台式机，不习惯在互联网浏览器上玩。

问题：目前，我能够检测到所有连接的键盘按下的键，但无法检测到哪个键盘按下了它。所以最终的结果是，即使连接了多个键盘，也没有人可以使用相同的按钮，因为在键盘上按下一个键就像在每个键盘上按下这个键一样。

寻找：一种从连接的按下键的 USB 设备获取 ID 的方法，以便我可以跟踪哪个键盘正在按下按钮或任何其他能够找出哪个键盘按下了键的方法。

# jquery - jquery 动画之间的短暂延迟。为什么？

> ID：16038616
> 
> 赞同：1
> 
> 时间：2013-04-16T13:37:27.020
> 
> 标签：jquery

```
$("#car_overtake5").animate({path : new $.path.arc(arc_params)}, {duration: 2000, queue: false});
$("#car_overtake5").animate({rotate: '109deg'}, {duration: 2000, queue: true});
$("#car_overtake5").animate({"left":"9872px","top":"4872px"}, {duration: 1000, queue: true});
$("#car_overtake5").animate({rotate: '94deg'}, {duration: 250, queue: true});
$("#car_overtake5").animate({"left":"10939px","top":"4948px"}, {duration: 1000, queue: true}); 
```

一辆汽车正在赛道上行驶。但是在每个动画之后它会停止一小段时间然后播放下一个。

我怎样才能让他们毫不拖延地流畅演奏？

编辑：将缓动改为线性，现在没有延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:55:55.343

默认缓动设置为“swing”，因此尝试将其更改为“linear”：

```
$("#car_overtake5")
     .animate({path : new $.path.arc(arc_params)}, {duration: 2000, queue: false, easing: "linear"})
     .animate({rotate: '109deg'}, {duration: 2000, queue: true, easing: "linear"})
     .animate({"left":"9872px","top":"4872px"}, {duration: 1000, queue: true, easing: "linear"})
     .animate({rotate: '94deg'}, {duration: 250, queue: true, easing: "linear"})
     .animate({"left":"10939px","top":"4948px"}, {duration: 1000, queue: true, easing: "linear"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:42:28.007

`#car_overtake5`jQuery每次都必须在 DOM 中查找。这会导致延迟，尤其是在您所说的“大型项目”中。用这个：

```
$("#car_overtake5").animate({path : new $.path.arc(arc_params)}, {duration: 2000, queue: false})
        .animate({rotate: '109deg'}, {duration: 2000, queue: true})
        .animate({"left":"9872px","top":"4872px"}, {duration: 1000, queue: true})
        .animate({rotate: '94deg'}, {duration: 250, queue: true})
        .animate({"left":"10939px","top":"4948px"}, {duration: 1000, queue: true}); 
```

# javascript - aloha-editor 软件包在启用时显示错误

> ID：16038620
> 
> 赞同：2
> 
> 时间：2013-04-16T13:37:43.657
> 
> 标签：javascript, requirejs, meteor, aloha-editor

当 aloha-editor 包添加到流星项目时，它开始在加载时显示控制台错误：

```
Uncaught Error: Mismatched anonymous define() module: function () { return Spinner }
http://requirejs.org/docs/errors.html#mismatch 
```

似乎与 aloha-editor 使用的 RequireJS 存在冲突。给定的解决链接无济于事，它包含有关使用 RequireJS Optimizer 的内容，但是我不知道它到底是什么意思。

有谁知道如何修复这个错误？

# python - 在 django 中从表单创建模型

> ID：16038622
> 
> 赞同：0
> 
> 时间：2013-04-16T13:37:46.610
> 
> 标签：python, django-models, django-forms

有没有办法从 django(1.5) 中的表单创建模型？就像从模型创建表单一样。

我的表格是

```
class QuoteForm(forms.Form):

    country = forms.ChoiceField(choices=COUNTRIES, required=False)
    street = forms.CharField(max_length=100, required=False) 
```

而我的模型具有完全相同的字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:54:04.360

我不相信使用 django 有一种简单的方法可以做到这一点。这不是执行此操作的内置代码，但您可以研究 django 如何从模型中生成表单并尝试以相反的方式进行操作。

这是 django 代码：[https ://github.com/django/django/blob/master/django/forms/models.py](https://github.com/django/django/blob/master/django/forms/models.py)

无论如何，我认为先创建模型然后使用 ModelForm 会更好。

# java - 基于Object的Java Webservice

> ID：16038623
> 
> 赞同：0
> 
> 时间：2013-04-16T13:37:47.967
> 
> 标签：java, web-services, jaxb, jax-ws, axis2

我正在使用网络服务，我想提高一个档次。我将 Axis2 与 JAX-WS 一起使用。我正在考虑转移对象而不是`String[]`. 在我搜索了一下之后，我发现 JAXB 是执行此操作的正确支持。

但是，每次我想添加一个需要转移的模型类时，我都需要做很多工作（关闭所有可能出错的注释）。所以我认为把它抽象一点会更容易。

我正在考虑使用该`Object`类型创建 Web 服务。然后我可以将方法用作`addObject(Object object)`, `removeObject(Object object)`, `retrieveObject()`. 这意味着我的服务器需要处理传入的对象。如果我再添加一个新的模型类，我只需要在服务器端捕获它。我的客户需要包含导致一些冗余的模型类，但我可以接受。我觉得 Java 目前无法支持我的想法。至少 JAX-WS 和 JAXB 技术。

你们能告诉我我是对还是错，这是否是一个好主意，如果是这样，也许可以为我指出如何解决这个问题的正确方向（即使这意味着使用另一种技术）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:57:25.287

您的客户端不需要模型类型，但是当您从服务器向客户端发送消息时，您必须对数据进行序列化和反序列化。我不确定 JAX-WS 是否与 JAX-RS 不同，但如果它们相同，那么您可以添加注释来标记您是否要生成/使用 json 或 xml。

将模型序列化为 json 后，您的客户端将毫无问题地读取您的数据。

此外，是的，您可以在创建请求和响应对象时使用对象。在我最近编写的一个 Web 服务中，我创建了一个类似于此的服务响应类

```
public class Response
{
    private Object data;
    private boolean success;

    public Response()
    {
        super();
    }

    //write getters and setters here

} 
```

我认为我使用 Object 类的方式与您的想法类似。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T14:07:41.883

我绝对推荐您使用 JAX-RS（实现 JAXB），尤其是使用 Jersey 框架。它的用法很简单，允许您编组和解组业务对象。

看看这个[泽西岛的例子](http://magnus-k-karlsson.blogspot.ch/2013/01/rest-example-with-jersey-reference.html)

希望能帮助到你！

# c# - 如何填充嵌套列表

> ID：16038629
> 
> 赞同：2
> 
> 时间：2013-04-16T13:37:58.513
> 
> 标签：c#, .net

我有一个嵌套列表，我需要他来填充从函数返回的值。类似于二维矩阵，其中行数等于一个列表的长度，而列数等于另一个列表的长度。问题是如何调用嵌套列表元素的索引？

```
List<int> wordids;
List<int> hiddenids;
List<List<int>> inputWeights;

foreach (var wordid in wordids)
{
    foreach (var hiddeid in hiddenids)
    {
         inputWeights[wordid][hiddenid] = GetStrength(wordid, hiddenid);
    }
} 
```

PS对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:41:25.283

您需要在输入权重中添加列表：

使用外部`foreach`外部和内部`for`循环：

```
var inputWeights = new List<List<int>>();

foreach (int wordid in wordids)
{
    var currentRow = new List<int>();

    for (int i = 0; i < hiddenids.Count; ++i)
        currentRow.Add(GetStrength(wordid, hiddenids[i]));

    inputWeights.Add(currentRow);
} 
```

使用两个`foreach`循环（这是我的首选解决方案，但意见可能不同！）：

```
var inputWeights = new List<List<int>>();

foreach (int wordid in wordids)
{
    var currentRow = new List<int>();

    foreach (int hiddenid in hiddenids)
        currentRow.Add(GetStrength(wordid, hiddenid));

    inputWeights.Add(currentRow);
} 
```

或者使用 Linq 而不是内部循环：

```
foreach (int wordid in wordids)
{
    var currentRow = new List<int>();
    currentRow.AddRange(hiddenids.Select(hiddenid => GetStrength(wordid, hiddenid)));
    inputWeights.Add(currentRow);
} 
```

甚至对整个事情都使用 Linq（现在变得难以理解；）：

```
var inputWeights = wordids.Select(
    wordid => new List<int>(hiddenids.Select(hiddenid => GetStrength(wordid, hiddenid)))
).ToList(); 
```

为了*真正*完整，这里有一个使用 Linq Query Syntax 的解决方案（是的，我花了太多时间在这个问题上，但一旦开始我就无法停止......；）

```
var inputWeights = (from wordid in wordids
                    select (from hiddenid in hiddenids
                            select GetStrength(wordid, hiddenid)).ToList()).ToList(); 
```

这一切都假设您确实想要 (#wordids * #hiddenids) 在结果中！这是真的吗？

例如，如果您有 10 个 wordid 和 5 个 hiddenid，则输出将总共有 50 个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:39:08.960

使用二维数组或交错数组

```
int[][] jaggedArray = new int[3][];
jaggedArray[0] = new int[] { 1, 3, 5, 7, 9 };
jaggedArray[1] = new int[] { 0, 2, 4, 6 };
jaggedArray[2] = new int[] { 11, 22 };

a=jaggedArray[0][1];  //a=3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:41:42.173

在您的特定情况下，您不应该使用`foreach`，而应该使用通常的`for`-loop，例如

```
List<int> wordids;
List<int> hiddenids;
List<List<int>> inputWeights;

wordids = new List<int>();
hiddenids = new List<int>();
inputWeights = new List<List<int>>();

//add values to your List-objects

foreach (int i = 0; i < wordids.Length; i++)
{
    foreach (int j = 0; j < hiddenids.Length; j++)
    {
         inputWeights[i][j] = GetStrength(wordids[i], hiddenids[j]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:48:28.267

```
List<List<int>> inputWeights=new List<List<int>>();

 for (var i = 1; wordids.Count > i; ++i)
 {
   for (var h = 1; hiddenids.Count > h; ++h)
   {
    inputWeights[i-1][h-1] = GetStrength(wordids[i-1], hiddenids[h-1]);
   }
 } 
```

# c# - 在 C# 中停止/取消活动文件处理

> ID：16038636
> 
> 赞同：0
> 
> 时间：2013-04-16T13:38:14.737
> 
> 标签：c#, windows-services

我有一个 Windows 服务。它使用 Filewatcher API 来监视任何新文件并开始处理文件。

假设如果我想在运行时停止文件处理（注意我想停止活动文件处理）我怎么能从任何外部 Windows 应用程序中做到这一点。

注意：我已经从外部 Windows 应用程序与 Windows 服务进行通信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:45:03.017

与 windows 服务通信以停止处理并设置`FileSystsemWatcher.EnableRaisingEvents`为`false`. 当您想继续处理时，请与服务通信并将其设置回`true`.

如果没有关于您如何在进程之间实际通信的更多细节，我无法提供更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:02:41.700

如果您的外部应用程序是 .NET windows 应用程序，请参考以下 SO Question

*   [如何从 .Net 代码向 .Net windows 服务发送自定义命令？](https://stackoverflow.com/q/3695245/1012641)

# objective-c - 一键多文本框

> ID：16038645
> 
> 赞同：0
> 
> 时间：2013-04-16T13:38:38.783
> 
> 标签：objective-c, xcode4.6

是否可以为 3 个文本框设置 1 个计算按钮，或者我是否需要为每个文本框设置一个按钮，文本框是桶、加仑和升，如果我在桶框中输入 10，我希望按钮计算多少加仑和升 10 桶。同样，如果我将 10 放入升框中，我希望按钮计算多少桶和加仑。这是我现在的代码：

```
- (IBAction)Calculate:(id)sender {
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];

float a = [[numberFormatter numberFromString:_Barrels.text] floatValue];
float b = [[numberFormatter numberFromString:_Gallons.text] floatValue];
float c = [[numberFormatter numberFromString:_Liters.text] floatValue];

_Barrels.text = [[NSString alloc]initWithFormat:@"% .2f", a];
_Gallons.text = [[NSString alloc]initWithFormat:@"% .2f", a * 42];
_Liters.text = [[NSString alloc]initWithFormat:@"% .2f", a * 159];

_Barrels.text = [[NSString alloc]initWithFormat:@"% .2f", b * .0238];
_Gallons.text = [[NSString alloc]initWithFormat:@"% .2f", b];
_Liters.text = [[NSString alloc]initWithFormat:@"% .2f", b * 3.785];

_Barrels.text = [[NSString alloc]initWithFormat:@"% .2f", c * .0063];
_Gallons.text = [[NSString alloc]initWithFormat:@"% .2f", c * .264];
_Liters.text = [[NSString alloc]initWithFormat:@"% .2f", c];

switch ([sender tag]) {
    case 1:
        [_Barrels resignFirstResponder];
        [_Gallons resignFirstResponder];
        [_Liters resignFirstResponder];
        break;
    default:
        break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:43:23.043

当然，您可以一键完成所有三项操作。唯一困难的部分是跟踪用户在哪个 bos 中输入了值。

# java - 重新加载页面 RFT 后找不到 TestObjects

> ID：16038646
> 
> 赞同：0
> 
> 时间：2013-04-16T13:38:42.393
> 
> 标签：java, rft

我尝试获取具有识别属性 Html.LI 的所有元素并单击每个测试对象。

```
 RootTestObject rto = getRootTestObject();
    TestObject[] objects = rto.find(atDescendant(".class", "Html.LI"));
    for (int i = 0; i <  objects.length; i++) {
        GuiTestObject gui1 = new GuiTestObject ();
         gui1 = (GuiTestObject)  objects[i];
         gui1.hasFocus();
             gui1.click();

        }
} 
```

当我得到 objects[0] 并单击它时，页面会重新加载。当我尝试单击对象 [1] 时，出现错误消息 CRFCP0050E：找不到对象的屏幕点。]

你知道如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:42:04.543

在页面重新加载时单击 objects[0] 后，先前调用 find() 返回的 testobject 引用将不再有效。
在单击对象[1] 之前，请尝试运行另一个 find() 并查看您是否能够以这种方式执行单击。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-22T18:09:22.143

objects.length 包含它找到的所有对象。对象.长度 = 3

请记住，数组是 base [0], [0, 1, 2]

因此，如果您将循环修改为： for (int i = 0; i < objects.length - 1; i++)

您的代码可能有效。

问候

阿方索·弗洛雷斯

# cloudify - 可以将 Cloudify shell 命令作为 API 公开吗？

> ID：16038648
> 
> 赞同：0
> 
> 时间：2013-04-16T13:38:48.973
> 
> 标签：cloudify

从集成的角度来看，我们可以将 Cloudify shell 命令公开为 API 调用吗？例如， http://172.xxx.xxx.xxx:8067/apiv1.0/cloudify/ [?command=bootstrap-cloud&provider=openstack](http://172.xxx.xxx.xxx:8067/apiv1.0/cloudify/?command=bootstrap-cloud&provider=openstack)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:27:16.420

将 Cloudify CLI 公开为 API 是与 Cloudify 集成的好方法。如果您计划按需引导 cloudify 云，则尤其如此，因此 Cloudify REST API 尚不可用。

您还应该考虑允许在 URL 中指定 CLI 命令的安全隐患，因为用户将能够进行安装/卸载服务的调用。

# javascript - 图片库的奇怪js行为

> ID：16038652
> 
> 赞同：0
> 
> 时间：2013-04-16T13:39:02.003
> 
> 标签：javascript, image, gallery

您好，我想用纯 javascript 构建一个图片库，并找到了一个很好的方法[http://www.trans4mind.com/personal_development/JavaScript/imageSlideShow.htm](http://www.trans4mind.com/personal_development/JavaScript/imageSlideShow.htm)。

但是，它没有按预期工作。即使我设法链接我的下一个/后退按钮来切换阵列中的图像，第二个图像也只会出现几分之一秒，然后再恢复为初始图像。

js里面有什么乱七八糟的吗？

```
currentIndex = 0;

MyImages = new Array();

MyImages[0] ="images/sampleimage.jpg";
MyImages[1] ="images/kuh.jpg";

function preload()
{
    for (var i=0;i<MyImages.length;i++){
        var imagesPreloaded = new Image();
        imagesPreloaded.src = MyImages[i];
    }
}

preload();

function Nexter(){
if (currentIndex<MyImages.length-1){
    currentIndex=currentIndex+1;
    document.theImage.src=MyImages[currentIndex];
}
else {
    currentIndex=0;
    document.theImage.src=MyImages[currentIndex];
}
}

function Backer(){
if (currentIndex>0){
    currentIndex=currentIndex-1;
    document.theImage.src=MyImages[currentIndex];
}
else {
    currentIndex=1;
    document.theImage.src=MyImages[currentIndex];
}

}

$("#nav_left").on("click",function(){
    Nexter();
});

$("#nav_right").on("click",function(){
    Backer();
});

//
//img Gallery
//

$(".gallery_nav img").on("mouseover", function (){
    $(this).css("opacity", 0.8);    
});

$(".gallery_nav img").on("mouseleave", function (){
    $(this).css("opacity", 0.1);
}); 
```

感谢您提供任何有用的提示。顺便说一句：Firebug 在控制台中告诉我以下内容：

> 图像损坏或截断：

最后，就我目前的知识和专业水平而言，上面的代码是我目前可以处理的最大程度的 js。所以请在回答时考虑这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:09:12.807

看起来您的我们的链接标签 () 的标记正在提升或可能重新加载页面 - 这会将图库重置回图像 #1。尝试在链接标记的 href 属性中添加 # （将它们表示为锚点），或者直接将它们更改为标签

```
Example
    <a href="#" class="gallery_nav" id="nav_left"><img src="images/pfeil_links.svg" alt="First image"></a> 
```

这是一个修改后的 JSFiddle，似乎可以正常工作 [http://jsfiddle.net/Nf7yR/1/](http://jsfiddle.net/Nf7yR/1/)

这是一个使用跨度的版本；达到同样的效果：http: [//jsfiddle.net/Nf7yR/2/](http://jsfiddle.net/Nf7yR/2/)

# python - 通过launchd运行时看不到stderr

> ID：16038660
> 
> 赞同：2
> 
> 时间：2013-04-16T13:39:15.643
> 
> 标签：python, plist, stderr, launchd

我正在使用launchd运行一个python程序。在我的 plist 文件中，我将其设置为将 stdout 和 stderr 重定向到我正在密切监视的文件。标准输出文件按预期获得输出，但标准错误不是。（不过，它昨天还在工作）。这是我的 plist 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>ddd.intern.runner</string>
    <key>LaunchOnlyOnce</key>
    <false/>
    <key>ProgramArguments</key>
    <array>
        <string>/Users/Jon/dev/vpe/bin/python</string>
        <string>/Users/Jon/dev/intern/ddd_runner.py</string>
    </array>
    <key>RunAtLoad</key>
    <false/>
    <key>StandardErrorPath</key>
    <string>/Users/Jon/dev/intern/ddd.stderr</string>
    <key>StandardOutPath</key>
    <string>/Users/Jon/dev/intern/ddd.stdout</string>
    <key>StartInterval</key>
    <integer>300</integer>
</dict>
</plist> 
```

我该如何调试呢？

# javascript - 使用 jquery 切换显示/隐藏

> ID：16038662
> 
> 赞同：0
> 
> 时间：2013-04-16T13:39:21.710
> 
> 标签：javascript, jquery, html

我需要使用 jquery 来切换两个元素以显示/隐藏。我希望按钮在单击时说“隐藏文本”并更改为“显示文本”，当然我希望文本在单击按钮时从显示切换到隐藏。我有一次可以更改它，但我不知道如何将其更改回来或使其切换。

```
$(function() {
    $('button#1').click(function() {
        $('#one').fadeOut();
    });

    $('button#1').click(function() {
        $('button#1').html('Show Text');
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T13:43:48.370

[http://jsfiddle.net/fwdzm/1/](http://jsfiddle.net/fwdzm/1/)

使用切换回调！

```
$(function() {
    var $btn1 = $('button#1').click(function() {
        $('#one').toggle('slow', function () {
            if ($(this).is(':visible')) {
                $btn1.html('Hide Text');
            } else {
                $btn1.html('Show Text');
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:43:51.687

```
$('button#1').click(function() {
    var $btn = $(this);
    $('#one').toggle('slow', function() {
       if ($(this).is(':visible')) {
          $btn.text('Hide');
       } else {
          $btn.text('Show Text');
       }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:49:44.093

尝试这样的事情

```
$(function() {
  $('button#1').click(function(){
    if ($('#one').is(':visible')) {
      $('#one').fadeOut();
      $(this).html('Show Text');
    } else {
      $('#one').fadeIn();
      $(this).html('Hide Text');
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:50:12.150

将当前状态保存在变量中，然后根据该变量显示或隐藏元素并更改按钮上的文本。

HTML

```
<button id="toggleBtn" type="button">Hide Text</button>
<span id="element">Your text is here</span> 
```

JAVASCRIPT

```
var status = "shown";

function toggleElement() {
    if (status == "shown") {
        $('#element').hide();
        $("#toggleBtn").html('Show Text');
        status = "hidden";
    } else {
        $('#element').show();
        $("#toggleBtn").html('Hide Text');
        status = "shown";
    }
} 
```

# c++ - FreeLibrary() 导致访问冲突错误？

> ID：16038665
> 
> 赞同：1
> 
> 时间：2013-04-16T13:39:33.770
> 
> 标签：c++, visual-studio-2010, dll, wrapper

我有一个将函数包装在 DLL 中的包装类。自然，我使用`LoadLibrary`and`FreeLibrary`来加载和释放 DLL。当我的包装管理对象被创建时，它运行一个`Startup()`函数：

```
//at the top
#define AVTCAM_DLL_NAME (L"VimbaBridgeAPI.dll")

//startup()
void CAVTcamDllWrapper::Startup()
{
    mAVTCamLibrary = LoadLibrary(AVTCAM_DLL_NAME);
    if(mAVTCamLibrary == NULL)
    {
        //report an error
    }
} 
```

然后，当包装管理器被删除时，它会在其析构函数中调用关闭函数：

```
void CAVTcamDllWrapper::Shutdown()
{
    if(mAVTCamLibrary != NULL)
    {
       FreeLibrary(mAVTCamLibrary);
       mAVTCamLibrary = NULL; //for extra safety
    }
} 
```

**这是我的问题：**我正在使用的相机可以正常启动。问题出在关机期间，更具体地说，在`FreeLibrary()`通话期间。一旦调用 FreeLibrary，下一行代码总是会失败。

在这种情况下，我的调试器显示它执行了 FreeLibrary 并跳转到该`mAVTCamLibrary = NULL;`行，然后该行将导致*Access Violation Error*。

如果我摆脱了这`mAVTCamLibrary = NULL;`条线（我最初这样做是因为我认为这条线导致了错误），那么无论我的调试器在 FreeLibrary() 之后跳转到什么位置都会导致访问冲突错误。

我无法弄清楚为什么我在调用 FreeLibrary() 后会立即收到这些错误。有人有想法吗？

# windows-phone-8 - 从 MainPage.xaml.cs 导航到另一个 xaml 期间出现 NullReferenceException

> ID：16038667
> 
> 赞同：0
> 
> 时间：2013-04-16T13:39:37.430
> 
> 标签：windows-phone-8, windows-phone-7.1

我的应用程序使用用户名和密码，并在点击超链接按钮时，这些值被发送到服务器，因此服务器返回类似于 PASS:ClientID 的内容。只有当 responseString 包含 PASS 时，我才希望导航到 SecondPage.xaml（来自 MainPage.xaml.cs）。这是我的代码：

```
namespace aquila1
{
    public partial class MainPage : PhoneApplicationPage
    {
        static string username;
        static string password;
        static string rs;

        static NavigationService ns = new NavigationService();

        // Constructor
        public MainPage()
        {
            InitializeComponent();

        }

        private static ManualResetEvent allDone = new ManualResetEvent(true);

       private void HyperlinkButton_Click_1(object sender, RoutedEventArgs e)
       {
           username = textbox1.Text;
           password = textbox2.Text;
           System.Diagnostics.Debug.WriteLine(username);
           System.Diagnostics.Debug.WriteLine(password);

           HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://60.243.245.181/fms_tracking/php/mobile_login.php?username=" + username + "&password=" + password);

           request.ContentType = "application/x-www-form-urlencoded";

           // Set the Method property to 'POST' to post data to the URI.
           request.Method = "POST";

           // start the asynchronous operation
           request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);

           // Keep the main thread from continuing while the asynchronous 
           // operation completes. A real world application 
           // could do something useful such as updating its user interface. 
           allDone.WaitOne();

       }

        private static void GetRequestStreamCallback(IAsyncResult asynchronousResult)
        {

            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

            // End the operation
            Stream postStream = request.EndGetRequestStream(asynchronousResult);

            // Console.WriteLine("Please enter the input data to be posted:");
            string postData = username + "+" + password;
            System.Diagnostics.Debug.WriteLine(postData);
            // Convert the string into a byte array. 
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            // Write to the request stream.
            postStream.Write(byteArray, 0, postData.Length);
            postStream.Close();

            // Start the asynchronous operation to get the response
            request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
        }

        private static void GetResponseCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

            // End the operation
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();
            StreamReader streamRead = new StreamReader(streamResponse);
           string responseString = streamRead.ReadToEnd();
            rs = responseString; 
            System.Diagnostics.Debug.WriteLine(responseString);
            System.Diagnostics.Debug.WriteLine("@@@@@");
            System.Diagnostics.Debug.WriteLine(rs);

            // Close the stream object
            streamResponse.Close();
            streamRead.Close();

            // Release the HttpWebResponse
            response.Close();
            move2();

            allDone.Set();

        }

       private static void move2()
       {

           string[] rs1 = rs.Split(':');
           if ((rs1[0].Trim()).Equals("PASS"))
           {

               ns.Navigate(new Uri("/SecondPage.xaml", UriKind.Relative));
           }
           else
           {
               MessageBox.Show(rs);
           }
       }

    }
} 
```

在运行代码时，我总是得到 NullReferenceException 。

请帮我找出错误并提出更正建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:56:39.263

您很可能会收到错误，因为 NavigationService 找不到资源`/SecondPage.xaml`。SecondPage 是否位于项目的根目录？

这也可能是由于在加载目标资源之前尝试导航（例如，通过在页面的构造函数中导航）造成的，但这似乎不是您的问题。

[此答案](https://stackoverflow.com/a/10703757/1046207)表明更改命名空间或程序集名称后可能会出现此问题。它指出清理项目，确保所有 bin 和 obj 文件夹为空，然后重新编译将修复它。但是，它的参考链接已经失效。

# ios - 用于使用 OAuth1 签署请求的 iOS 库？

> ID：16038672
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:39:50.993
> 
> 标签：ios, oauth

有人可以推荐一个 iOS 库来签署 OAuth1 请求。我查看了 AFOAuth1Client ，但不清楚如何签署在用户使用其用户 ID 和密码进行身份验证后生成授权令牌的请求。AFOAuth1Client 似乎假定令牌是通过 OAuth 获取令牌请求接收的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:33:30.247

深入研究 AFOAuth1Client 我执行了以下操作：

```
AFOAuth1Client *httpClient = [[AFOAuth1Client alloc] initWithBaseURL:url key:consumerKey secret:consumerSecret];
AFOAuth1Token *token = [[AFOAuth1Token alloc] initWithKey:accessToken secret:tokenSecret session:nil expiration:nil renewable:YES];
httpClient.accessToken = token; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:39:02.243

[GitHub 上](https://github.com/search?l=Objective-C&q=oauth%20&ref=cmdform&type=Repositories)列出了大约 167 个（尽管有些是分叉，并非全部都支持 OAuth 1）。如果我没有提到我自己的... [SDOAuthHelper](https://github.com/sdarlington/SDOAuthHelper/blob/master/SDOAuthHelper.h) ，我会失职。

OAuth 不是直截了当的。我建议您坚持使用 AFOAuth1Client 并尝试使其正常工作。他们都经历了相同的过程，并且当您（总是）遇到签名错误时，理解它会有所帮助。

# java - 运行时jar文件不起作用

> ID：16038673
> 
> 赞同：1
> 
> 时间：2013-04-16T13:39:54.193
> 
> 标签：java, jar, manifest, noclassdeffounderror, classnotfoundexception

我不认为我在创建 jar 文件时做错了什么，但这里是：

```
jar cvfm JarTest.jar manifest.txt Main.class Main$ThisPanel.class Main$ThisPanel$1.class Main$ThisPanel$2.class BallJump.class in cmd 
```

问题是我无法运行 jar 文件，当我尝试从 cmd 运行它时，我收到以下错误消息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/madia/j3d/Canvas3D
    at Main.<init>(Main.java:24)
    at Main.main(Main.java:17)
Caused by: java.lang.ClassNotFoundException: javax.media.j3d.Canvas3D
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknow Sourc)
    ... 2 more 
```

这是我的java代码：

```
package Game;

import com.sun.j3d.utils.geometry.Sphere;
import com.sun.j3d.utils.universe.SimpleUniverse;
import java.awt.*;
import java.awt.event.*;
import javax.media.j3d.*;
import javax.swing.*;
import javax.vecmath.*;

public class Main extends JFrame implements ActionListener{
    private Image image;
    private Timer timer;
    private BallJump ball;
    private ThisPanel panel;
    private boolean inMenu = true;

    public static void main(String[] args){
        new Main();
    }

    public Main(){
        setFocusable(true);
        ImageIcon ii = new ImageIcon("Ball Jump.png");
        panel = new ThisPanel();
        ball = new BallJump();
        image = ii.getImage();
        timer = new Timer(5,this);
        timer.start();
        setSize(600,600);
        add(panel);
        setVisible(true);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void actionPerformed(ActionEvent e){
        setVisible(true);
        repaint();
    }

    private class ThisPanel extends JPanel{

        public ThisPanel(){
            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, false), "pressed");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, true), "released");

            am.put("pressed", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if(inMenu == true){
                        inMenu = false;
                        remove(panel);
                        ball.setAlive(true);
                        add(ball);            
                        setVisible(true); 
                    }

                    if (ball.isAlive() != true){ 
                        setSize(600,600);                     
                        setVisible(true);
                        repaint();
                        remove(ball);
                        ball = new BallJump();
                        add(ball); 
                        repaint();
                    } 
                }
            });

            am.put("released", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if(inMenu == true){
                        inMenu = false;
                        remove(panel);
                        ball.setAlive(true);
                        add(ball);            
                        setVisible(true); 
                    }

                    if (ball.isAlive() != true){ 
                        remove(ball);
                        ball = new BallJump();
                        add(ball);
                        setVisible(true);
                        repaint();    
                    }
                }
            });

            setFocusable(true);
            requestFocusInWindow();        
        }

        public Dimension getPreferredSize() {
            return new Dimension(600, 600);
        }

        @Override
        public void paintComponent(Graphics g){
            super.paintComponent(g);
            if(inMenu == true){         
                Graphics2D g2D = (Graphics2D) g;
                g2D.drawImage(image, 0, 0, this);
            }    
        }
    }
}

class BallJump extends JPanel implements ActionListener,KeyListener{
    private TransformGroup objTrans,objTrans2, objTrans3, objTrans4, objTrans5, objTrans6, objTrans7;
    private Transform3D trans = new Transform3D();
    private BranchGroup objRoot = new BranchGroup();
    private BranchGroup objRoot2 = new BranchGroup();
    private BranchGroup objRoot3 = new BranchGroup();
    private BranchGroup objRoot4 = new BranchGroup();
    private BranchGroup objRoot5 = new BranchGroup();
    private BranchGroup objRoot6 = new BranchGroup();
    private BranchGroup objRoot7 = new BranchGroup();
    private SimpleUniverse u;
    private Canvas3D c;
    private BranchGroup scene, scene2, scene3, scene4, scene5, scene6, scene7;
    private Sphere sphere, sphere2, sphere3, sphere4, sphere5, sphere6, sphere7;
    private float height = 0.0f, sign = 1.0f, xloc = 0.0f;
    private float height2 = 0.0f, sign2 = -1.0f;
    private float rightX, right, rightDx, leftX, left, leftDx, rightX2, leftX2;
    private boolean isAlive = true;
    private JLabel scoreLabel;
    private JLabel label;
    private int score = -400;
    private Timer timer;
    private boolean isEndscreen = true;

    public boolean isAlive(){
        return isAlive;
    }

    public void setAlive(boolean isAlive){
        this.isAlive = isAlive;
    }

    public BranchGroup createSceneGraph(){
        Color3f ambientColourRSphere = new Color3f(0.6f,0.0f,0.0f);
        Color3f emissiveColourRSphere = new Color3f(0.0f,0.0f,0.0f);
        Color3f diffuseColourRSphere = new Color3f(0.8f,0.0f,0.4f);
        Color3f specularColourRSphere = new Color3f(0.3f,0.0f,0.0f);
        float shininessRSphere = 20.0f;
        Appearance redSphereApp = new Appearance();
        redSphereApp.setMaterial(new Material(ambientColourRSphere,emissiveColourRSphere,
                             diffuseColourRSphere,specularColourRSphere,shininessRSphere));
        objRoot.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot.addChild(objTrans);
        sphere = new Sphere(0.15f,redSphereApp);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans.setTransform(pos1);
        objTrans.addChild(sphere);
        objRoot.addChild(objTrans);
        BoundingSphere bounds = new BoundingSphere
                (new Point3d(0.0,0.0,0.0),100.0);
        Color3f light1Color = new Color3f(0.2f,0.2f,1.0f);
        Vector3f light1Direction = new Vector3f(+4.0f,-7.0f,-12.0f);
        DirectionalLight light1 = new DirectionalLight
                (light1Color,light1Direction);
        light1.setInfluencingBounds(bounds);
        objRoot.addChild(light1);
        Color3f ambientColor = new Color3f(1.0f,1.0f,1.0f);
        AmbientLight ambientLightNode = new AmbientLight(ambientColor);
        ambientLightNode.setInfluencingBounds(bounds);
        objRoot.addChild(ambientLightNode); 
        Color3f bgColor = new Color3f(0.0f, 0.2f, 1.0f);
        Background bg = new Background(bgColor);
        bg.setApplicationBounds(bounds);
        objRoot.addChild(bg);
        return objRoot;
    }

    public BranchGroup createSceneGraph2(){
        objRoot2.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot2.addChild(objTrans2);
        sphere2 = new Sphere(0.18f);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans2.setTransform(pos1);
        objTrans2.addChild(sphere2);
        objRoot2.addChild(objTrans2);
        return objRoot2;
    }

    public BranchGroup createSceneGraph3(){
        objRoot3.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans3 = new TransformGroup();
        objTrans3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot3.addChild(objTrans3);
        sphere3 = new Sphere(0.18f);
        objTrans3 = new TransformGroup();
        objTrans3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans3.setTransform(pos1);
        objTrans3.addChild(sphere3);
        objRoot3.addChild(objTrans3);
        return objRoot3;
    }

    public BranchGroup createSceneGraph4(){
        objRoot4.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans4 = new TransformGroup();
        objTrans4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot4.addChild(objTrans4);
        sphere4 = new Sphere(0.45f);
        objTrans4 = new TransformGroup();
        objTrans4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans4.setTransform(pos1);
        objTrans4.addChild(sphere4);
        objRoot4.addChild(objTrans4);
        return objRoot4;
    }

    public BranchGroup createSceneGraph5(){
        objRoot5.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans5 = new TransformGroup();
        objTrans5.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot5.addChild(objTrans5);
        sphere5 = new Sphere(0.45f);
        objTrans5 = new TransformGroup();
        objTrans5.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans5.setTransform(pos1);
        objTrans5.addChild(sphere5);
        objRoot5.addChild(objTrans5);
        return objRoot5;
    }

    public BranchGroup createSceneGraph6(){
        objRoot6.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans6 = new TransformGroup();
        objTrans6.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot6.addChild(objTrans6);
        sphere6 = new Sphere(0.18f);
        objTrans6 = new TransformGroup();
        objTrans6.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans6.setTransform(pos1);
        objTrans6.addChild(sphere6);
        objRoot6.addChild(objTrans6);
        return objRoot6;
    }

    public BranchGroup createSceneGraph7(){
        objRoot7.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans7 = new TransformGroup();
        objTrans7.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot7.addChild(objTrans7);
        sphere7 = new Sphere(0.18f);
        objTrans7 = new TransformGroup();
        objTrans7.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans7.setTransform(pos1);
        objTrans7.addChild(sphere7);
        objRoot7.addChild(objTrans7);
        return objRoot7;
    }

    BallJump(){
        setFocusable(true);
        setLayout(new BorderLayout());
        setVisible(true);
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        c = new Canvas3D(config);
        Color color = new Color(0.0f, 0.2f, 1.0f);
        setBackground(color);
        scoreLabel = new JLabel("Score: 0");     
        scoreLabel.setBackground(color);
        add(BorderLayout.PAGE_START,scoreLabel);
        add("Center",c);
        c.addKeyListener(this);
        c.setSize(585,560);
        timer = new Timer(60,this);
        timer.start();
        scene = createSceneGraph();
        scene2 = createSceneGraph2();
        scene3 = createSceneGraph3();
        scene4 = createSceneGraph4();
        scene5 = createSceneGraph5();
        scene6 = createSceneGraph6();
        scene7 = createSceneGraph7();
        u = new SimpleUniverse(c);
        u.getViewingPlatform().setNominalViewingTransform();
        u.addBranchGraph(scene);
        u.addBranchGraph(scene2);
        u.addBranchGraph(scene3);
        u.addBranchGraph(scene4);
        u.addBranchGraph(scene5);
        u.addBranchGraph(scene6);
        u.addBranchGraph(scene7);
        float randomSpawn1 = (float) Math.random() * -3.7f + -4.1f;
        float randomSpawn2 = (float) Math.random() * 2.5f + 3.1f; 
        float randomSpawn3 = (float) Math.random() * -2.7f + -5.1f;
        float randomSpawn4 = (float) Math.random() * 2.5f + 4.1f; 
        float randomSpawn5 = (float) Math.random() * -5.7f + -15.1f;
        float randomSpawn6 = (float) Math.random() * 5.7f + 18.1f; 
        rightX = randomSpawn2;
        right = randomSpawn4;
        leftX = randomSpawn1;
        left = randomSpawn3;
        rightX2 = randomSpawn6;
        leftX2 = randomSpawn5;
        rightDx = -.05f;
        leftDx = .05f;  
    }

    public void keyPressed(KeyEvent e){
        if(e.getKeyChar() == 'd'|e.getKeyChar() == 'D'|e.getKeyCode() == e.VK_RIGHT){
            xloc = xloc + .1f;
        }

        if(e.getKeyChar() == 'a'|e.getKeyChar() == 'A'|e.getKeyCode() == e.VK_LEFT){
            xloc = xloc - .1f;
        }
    }    

    public void keyReleased(KeyEvent e){

    }

    public void keyTyped(KeyEvent e){

    }

    public void actionPerformed(ActionEvent e){
        height += .1f * sign;
        if(Math.abs(height * 2) >= 1)
            sign = -1.0f * sign;
        height2 += .1f * sign2;
        if(Math.abs(height2 * 2) >= 1)
            sign2 = -1.0f * sign2;
        Vector3d vec;
        int thing = 1;
        int thing2 = 2;
        if(height < -.4f){
          vec = new Vector3d(1.0,.7,1.0);
        }else{
          vec = new Vector3d(1.0,1.0,1.0);
          thing = 2;
        }
        trans.setScale(vec);
        trans.setTranslation(new Vector3f(xloc,height - .15f,0.0f));
        objTrans.setTransform(trans);
        if(height < -.10f){
          vec = new Vector3d(1.0,1.0,1.0);
          thing2 = 1;
        }
        if(height < -.4f){
          trans.setScale(new Vector3d(1.0,1.0,1.0));
        }
        if(score >= 1000){
            rightDx = -.06f;
            leftDx = .06f; 
        }
        if(score >= 2000){
            rightDx = -.07f;
            leftDx = .07f; 
        }
        if(score >= 4000){
            rightDx = -.08f;
            leftDx = .08f; 
        }
        if(score >= 5000){
            rightDx = -.09f;
            leftDx = .09f; 
        }
        if(score >= 10000){
            rightDx = -.1f;
            leftDx = .1f; 
        }
        if(score >= 15000){
            rightDx = -.12f;
            leftDx = .12f; 
        }
        Vector3f vector = new Vector3f(rightX += rightDx,-.7f,0.0f);
        trans.setTranslation(vector);
        objTrans2.setTransform(trans);
        Vector3f vector2 = new Vector3f(leftX += leftDx,-.7f,0.0f);
        trans.setTranslation(vector2);
        objTrans3.setTransform(trans);
        Vector3f vector3 = new Vector3f(rightX2 += rightDx,-.4f,0.0f);
        trans.setTranslation(vector3);
        objTrans4.setTransform(trans);
        Vector3f vector4 = new Vector3f(leftX2 += leftDx,-.4f,0.0f);
        trans.setTranslation(vector4);
        objTrans5.setTransform(trans);
        Vector3f vector5 = new Vector3f(right += rightDx,-.7f,0.0f);
        trans.setTranslation(vector5);
        objTrans6.setTransform(trans);
        Vector3f vector6 = new Vector3f(left += leftDx,-.7f,0.0f);
        trans.setTranslation(vector6);
        objTrans7.setTransform(trans);
        float leftXDistance = vector2.x - xloc - .22f;
        float leftXDistancez = vector6.x - xloc - .22f;
        float leftXDistance2 = vector4.x - xloc - .22f;
        float yDistance2 = -.4f - height;
        float xDistance2 = vector3.x - xloc + .22f;
        float xDistance = vector.x - xloc + .22f;
        float yDistance = -.7f - height;
        float xDistance3 = vector5.x - xloc + .22f;
        double leftdistance = Math.sqrt((leftXDistance * leftXDistance) + (yDistance * yDistance));
        double leftdistancez = Math.sqrt((leftXDistancez * leftXDistancez) + (yDistance * yDistance));
        double leftdistance2 = Math.sqrt((leftXDistance2 * leftXDistance2) + (yDistance2 * yDistance2));
        double distance2 = Math.sqrt((xDistance2 * xDistance2) + (yDistance2 * yDistance2));
        double distance = Math.sqrt((xDistance * xDistance) + (yDistance * yDistance));
        double distance3 = Math.sqrt((xDistance3 * xDistance3) + (yDistance * yDistance));
        if(distance < vec.x / 2 + .09f){
            if(thing == 2){     
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 2.5f + 3.1f;
                rightX = randomSpawn;
                trans.setTranslation(vector);
                objTrans2.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftdistance < vec.x / 2 + .09f){
            if(thing == 2){      
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -2.7f + -3.3f;
                leftX = randomSpawn;
                trans.setTranslation(vector);
                objTrans3.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftdistancez < vec.x / 2 + .09f){
            if(thing == 2){  
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -2.5f + -3.1f;
                left = randomSpawn;
                trans.setTranslation(vector);
                objTrans7.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftdistance2 < vec.x / 2 + .09f){
            if(thing == 2){ 
                score += 200;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -4.5f + -15.1f;
                leftX2 = randomSpawn;
                trans.setTranslation(vector);
                objTrans5.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(distance2 < vec.x / 2 + .09f){
            if(thing == 2){ 
                score += 200;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 4.5f + 15.1f;
                rightX2 = randomSpawn;
                trans.setTranslation(vector);
                objTrans4.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(distance3 < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 2.5f + 3.1f;
                right = randomSpawn;
                trans.setTranslation(vector5);
                objTrans6.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                isAlive = false;
                isEndscreen = false;
            }
        }

        if(rightX < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            rightX = randomSpawn;
            trans.setTranslation(vector);
            objTrans2.setTransform(trans);
        }
        if(leftX > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            leftX = randomSpawn;
            trans.setTranslation(vector2);
            objTrans3.setTransform(trans);
        }
        if(right < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            right = randomSpawn;
            trans.setTranslation(vector);
            objTrans2.setTransform(trans);
        }
        if(left > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            left = randomSpawn;
            trans.setTranslation(vector2);
            objTrans3.setTransform(trans);
        }
        if(rightX2 < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            rightX2 = randomSpawn;
            trans.setTranslation(vector3);
            objTrans4.setTransform(trans);
        }
        if(leftX2 > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            leftX2 = randomSpawn;
            trans.setTranslation(vector4);
            objTrans5.setTransform(trans);
        }
        if(xloc > .8f){
            xloc = .8f;
        }
        if(xloc < -.8f){
            xloc = -.8f;
        }
        if(!isAlive && !isEndscreen){
            endScreen();
            timer.stop();
        }
    }

    public void endScreen(){
        isEndscreen = true;
        remove(scoreLabel);
        remove(c);
        setVisible(true);
        setLayout(new BorderLayout(1,1));
        Font font = new Font("Helvatica",Font.BOLD,24);
        label = new JLabel("      Your Score: " + score);  
        JLabel label2 = new JLabel("Press Space To Restart");
        label2.setFont(font);
        label.setFont(font);
        setBackground(Color.white);    
        add(BorderLayout.NORTH,label);
        add(BorderLayout.CENTER,label2);
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:42:28.147

```
java.lang.NoClassDefFoundError: javax/madia/j3d/Canvas3D 
```

Java 3D 需要放在应用程序的运行时类路径中。

# f# - F# 是否有循环退出语句？

> ID：16038677
> 
> 赞同：4
> 
> 时间：2013-04-16T13:39:59.807
> 
> 标签：f#, binary-tree, exit

我知道递归函数是 F# 中的一项强大技术。我的问题是：有没有exit语句，可以跳出递归函数，就像命令式语言一样。例如，将节点插入二叉树。

```
type Tree<'a> when 'a :> IComparable<'a> =
           | Nil
           | Leaf of 'a
           | Node of Tree<'a> * 'a * Tree<'a>

let tt2 = Node(
              Node(Leaf "D", "B",Node(Leaf "G", "E", Leaf "H" )),
              "A",
              Node(Nil, "C", Node(Nil, "F", Leaf "I")))

let rec contains (x : #IComparable<'a>) = function
    | Nil -> false
    | Leaf y -> if x.CompareTo(y) = 0 then true else false
    | Node(l, y, r) -> 
         match l, y, r with
             | l, y, Nil -> if x.CompareTo(y) = 0 then true else contains x  l
             | Nil,y, r -> if x.CompareTo(y) = 0 then true else contains x r 
             | _ -> if x.CompareTo(y) = 0 then true
                    else contains x r |>ignore
                         contains x l

let xx = contains "C"  tt2  //It is wrong answer. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T13:56:04.490

> 有没有exit语句，可以跳出递归函数，就像命令式语言一样。

不，原因是您可以通过递归函数和模式匹配对命令式中断/返回进行编码。如果您想中断，只需返回一个值，否则调用另一个递归调用。

这个问题更适合求高阶函数。当您需要提前退出高阶函数时，编写自定义递归函数是可行的方法。如果您对 F# 中的命令式构造感兴趣，请查看 @Tomas 的[优秀系列](http://tomasp.net/blog/imperative-i-return.aspx)。

确定条件后，您的函数将在某个分支退出。唯一的问题是你不应该`contain x r`在倒数第二行丢弃。

`if/else`为了清楚起见，您可以删除多余的

```
let rec contains (x : #IComparable<'a>) = function
    | Nil -> false
    | Leaf y -> x.CompareTo(y) = 0
    | Node(l, y, r) -> 
         match l, y, r with
         | l, y, Nil -> x.CompareTo(y) = 0 || contains x l
         | Nil,y, r -> x.CompareTo(y) = 0 || contains x r 
         | _ -> x.CompareTo(y) = 0 || contains x l || contains x r 
```

# javascript - 我可以使用 google map Api 捕获渲染事件吗

> ID：16038678
> 
> 赞同：1
> 
> 时间：2013-04-16T13:40:02.423
> 
> 标签：javascript, google-maps, events, google-maps-api-3, render

我尝试在谷歌地图（2500 多个矩形）上绘制一个非常大的数据集。矩形的渲染需要超过 5 秒。整个页面只停留了 5 秒，所以我正在考虑在渲染过程中添加加载指示器或进度条。

为此，我需要捕获渲染事件（开始、完成渲染）。

我检查了 google maps Api 文档，没有发现任何有用的东西。只是知道是否有一些解决方法或我在 api 文档中遗漏的东西可以帮助我捕获渲染事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:32:45.077

这概述了 GMapsV3 [http://gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html中的所有事件](http://gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html)

检查您需要的事件是否在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T14:53:31.293

从 Google Maps v3.14 开始，答案是否定的。API 中没有要监听的此类事件。如果您深入研究代码足够长的时间，您可能会找到一个 hack，但鉴于您可以控制您正在绘制的矩形并且您有它们的数量，为什么不在添加它们时迭代进度条? 单独地，它们会非常快速地渲染，因此无论您在每个添加到地图之前还是之后迭代进度，对用户都没有影响，尽管对开发人员来说这感觉像是错误的顺序。

# xcode - Xcode中的Boost库链接错误

> ID：16038679
> 
> 赞同：2
> 
> 时间：2013-04-16T13:40:03.400
> 
> 标签：xcode, boost

1.  Boost 由以下人员安装和制作：`brew install boost`
2.  将标题路径添加`/usr/local/Cellar/boost/1.53.0/include`到用户标题搜索路径
3.  将库路径添加`/usr/local/Cellar/boost/1.53.0/lib`到库搜索路径

主文件

```
#include <fstream>
#include <sstream>
#include <string>
#include "test.cpp"

void test(){
    Test instance(true, 'm', 50, 17.89, "fuzhijie");
    stringstream binary_sstream; 
    boost::archive::binary_oarchive binary_oa(binary_sstream);
    binary_oa << instance;
}

int main(int argc, const char * argv[])
{
    test();
    return 0;
} 
```

当我按 CTRL+b 时，显示以下错误消息：

```
Undefined symbols for architecture x86_64:
  "boost::archive::basic_binary_oprimitive<boost::archive::binary_oarchive, char, std::__1::char_traits<char> >::init()", referenced from:
      boost::archive::binary_oarchive_impl<boost::archive::binary_oarchive, char, std::__1::char_traits<char> >::init(unsigned int) in main.o
  "boost::archive::basic_binary_oprimitive<boost::archive::binary_oarchive, char, std::__1::char_traits<char> >::save(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
      void boost::archive::save_access::save_primitive<boost::archive::binary_oarchive, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(boost::archive::binary_oarchive&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) in main.o
  "boost::archive::basic_binary_oprimitive<boost::archive::binary_oarchive, char, std::__1::char_traits<char> >::basic_binary_oprimitive(std::__1::basic_streambuf<char, std::__1::char_traits<char> >&, bool)", referenced from:
      boost::archive::binary_oarchive_impl<boost::archive::binary_oarchive, char, std::__1::char_traits<char> >::binary_oarchive_impl(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, unsigned int) in main.o
  "boost::archive::basic_binary_oprimitive<boost::archive::binary_oarchive, char, std::__1::char_traits<char> >::~basic_binary_oprimitive()", referenced from:
      boost::archive::binary_oarchive_impl<boost::archive::binary_oarchive, char, std::__1::char_traits<char> >::~binary_oarchive_impl() in main.o
      boost::archive::binary_oarchive_impl<boost::archive::binary_oarchive, char, std::__1::char_traits<char> >::binary_oarchive_impl(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, unsigned int) in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-28T15:49:12.267

原因可能是你有编译器 gcc5 或 gcc6。并且您的代码在您的 boost 库中使用了不同的编译标志。详细请阅读此[链接](https://stackoverflow.com/questions/33394934/converting-std-cxx11string-to-stdstring)

如果您可以重新编译您使用的所有不兼容的库，请使用编译器选项

```
-D_GLIBCXX_USE_CXX11_ABI=1 
```

然后重建你的项目。如果仍然无法链接，请将更改项目的 makefile 编译器选项添加为 0。

```
-D_GLIBCXX_USE_CXX11_ABI=0 
```

======更新=======

真正的解决方案应该是为 gcc6 或 gcc5 安装新的 boost 库 (v1.62)。

# grails - Grails 部署到 Glassfish 和 slf4j

> ID：16038680
> 
> 赞同：3
> 
> 时间：2013-04-16T13:40:06.597
> 
> 标签：grails, glassfish, slf4j

我正在开发一个 grails 应用程序，并一直在尝试将其部署到 glassfish 。但是，在部署期间，我收到以下错误：

从服务器日志：

```
[#|2013-04-16T07:53:21.540-0400|INFO|glassfish3.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=91;_ThreadName=Thread-1;|2013-04-16 07:53:21,540 [admin-thread-pool-7720(2)] ERROR context.ContextLoader  - Context initialization failed

org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is **java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V**
                at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:420)
                at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)

                at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310) 
```

……</p>

在我的系统类路径中，我有以下文件：slf4j-api-1.5.6.jar、slf4j-api-1.5.6.jar、slf4j-log4j12-1.5.6.jar。

我认为问题在于 Grails 正在尝试从 slf4j 1.6 加载方法（我在 Grails 2.1.0 上）。我希望 Grails 使用它的 webapps 类路径，而不是使用系统类路径。

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:18:54.420

如果我没记错的话，您的容器中不能有同一个库的两个版本，因此您需要将类路径中的版本升级到 1.6

# xcode - Xamarin Studio 错误：找不到有效的 Xcode 安装

> ID：16038683
> 
> 赞同：12
> 
> 时间：2013-04-16T13:40:22.530
> 
> 标签：xcode, xamarin

我今天早上更新了 Xcode（版本 4.6.2），现在我无法编译我的项目。

> 错误：找不到有效的 Xcode 安装。如果您的 Xcode 副本安装到非标准前缀，请在“SDK 位置”下的 Xamarin Studio 首选项中指定位置

我检查了 SDK 位置是好的，但仍然是同样的问题。

有什么想法可以解决这个问题吗？Xamarin Studio 4.0.3（内部版本 13）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T13:44:26.840

好的，这似乎是 Xcode 4.6.2 的错误：[http ://forums.xamarin.com/discussion/comment/10620/#Comment_10620](http://forums.xamarin.com/discussion/comment/10620/#Comment_10620)

> Xcode 4.6.2 存在一个已知问题，我们建议您重新下载 Xcode 4.6.1 并继续使用它，直到我们为 Xamarin Studio 修复。[您可以从https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)重新下载 Xcode 4.6.1

唯一的方法是回到 4.6.1 :(

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T02:53:30.480

Xamarin Studio 4.0.4 发布，修复了与 Xcode 4.6.2 的不兼容问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:54:14.997

我也有同样的问题。[是一个错误，您需要从https://developer.apple.com/downloads](https://developer.apple.com/downloads)下载 4.6.1

您只需注册为 Apple 开发者，即可在开发者工具中找到之前的版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:28:25.137

你必须有一个付费的开发者帐户才能从苹果获得 4.6.1 版本的 xcode 吗？我只有免费账号，在apple hp上没有找到。

编辑：我在苹果 hp 上的下载部分的屏幕截图：![没有 Xcode 4.6.1！！](https://i.stack.imgur.com/xLDHG.png)

# iphone - collectionView dequeueReusableCellWithIdentifier 上的错误

> ID：16038684
> 
> 赞同：0
> 
> 时间：2013-04-16T13:40:26.040
> 
> 标签：iphone, ios, ipad, uicollectionview

我无法将 uitable 转换为 collectionview。

我有以下代码，但在“collectionView dequeueReusableCellWithIdentifier”上有错误我可以知道是什么问题吗？

```
 - (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

//  Return the number of rows in the section (the amount of items in our array)
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return [pictureListData count];
}

//  Create / reuse a table cell and configure it for display
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView
                  cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    UICollectionViewController *cell = [collectionView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Get the core data object we need to use to populate this table cell
    Pictures *currentCell = [pictureListData objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:48:27.003

你有错误的方法名称。对于 UICollectionViews，方法是：

```
- (id)dequeueReusableCellWithReuseIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath*)indexPath 
```

所以你需要改变

```
UICollectionViewController *cell = [collectionView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

至

```
UICollectionViewController *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

# unit-testing - MSTest 中的 [TestClass] 和 [TestClassAttribute] 有什么区别？

> ID：16038687
> 
> 赞同：0
> 
> 时间：2013-04-16T13:40:40.763
> 
> 标签：unit-testing, visual-studio-2012, mstest

我要告诉我自己有关 Visual Studio 中的单元测试的信息。

我继续使用 msdn，它说 [TestClassAttribute] 语法定义了一个 TestClass。好吧，好吧。但是当我在 Visual Studio 中创建一个简单的单元测试时，它会使用 [TestClass] 语法装饰测试类。

那么，**【TestClass】和【TestClassAttribute】的区别在哪里呢？**还是 [TestClass] 只是一个简短的形式？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:44:09.117

从 派生的每个类，`System.Attribute`以及您自己的自定义属性，如果类名以它结尾，则可以省略文本“属性”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T06:44:17.167

来自 MSDN：

> 名称以字符串 Attribute 结尾的属性元素可以与字符串 Attribute 一起使用，也可以不与字符串 Attribute 一起使用。例如，以下两个代码示例功能相同： [TestClass()] [TestClassAttribute()]

# .net - Windows Phone 8 Azure 移动服务 - 保持登录状态（Microsoft 帐户）

> ID：16038696
> 
> 赞同：0
> 
> 时间：2013-04-16T13:41:16.547
> 
> 标签：.net, azure, windows-phone-8, azure-mobile-services

我正在编写一个 Windows Phone 8 应用程序，它将使用 Microsoft 帐户对用户进行身份验证（通过 Azure 移动服务）

我已按照此处的说明进行操作：http: [//www.windowsazure.com/en-us/develop/mobile/how-to-guides/register-for-microsoft-authentication/](http://www.windowsazure.com/en-us/develop/mobile/how-to-guides/register-for-microsoft-authentication/)

一切都按预期工作我从服务中获取了一个用户 ID 令牌，并使用它来识别我系统中的用户资产。

问题：每次我运行应用程序时，它都希望我登录。在登录时勾选 Keep Me Signed 复选框只会记住帐户电子邮件地址。它总是要求输入密码。

我需要做些什么来让“让我登录”以实际让用户登录这个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:30:32.593

此博客将引导您完成如何解决该问题：[http ://www.thejoyofcode.com/Setting_the_auth_token_in_the_Mobile_Services_client_and_caching_the_user_rsquo_s_identity_Day_10_.aspx](http://www.thejoyofcode.com/Setting_the_auth_token_in_the_Mobile_Services_client_and_caching_the_user_rsquo_s_identity_Day_10_.aspx)

您将不得不手动“登录用户”，而不是使用提供的登录方法。为此，请在移动服务客户端实例上设置用户对象。（有关生成身份验证令牌的更多信息，请查看此处：[http](http://www.thejoyofcode.com/Generating_your_own_ZUMO_auth_token_Day_8_.aspx) ://www.thejoyofcode.com/Generating_your_own_ZUMO_auth_token_Day_8_.aspx ）

在 C# 中：

```
var mobileServiceClient = new MobileServiceClient("<your-app-url>", "<your-app-key>");
mobileServiceClient.CurrentUser = new MobileServiceUser("Foo:123456789");
mobileServiceClient.CurrentUser.MobileServiceAuthenticationToken = "<your-users-JWT>"; 
```

在 JS 中：

```
var client = new Microsoft.WindowsAzure.MobileServices.MobileServiceClient(
    "<your-app-url>",
    "<your-app-key>");

client.currentUser = {
    userId: "Foo:123456789",
    mobileServiceAuthenticationToken: "<your-users-JWT>"
}; 
```

# css - 仅通过 CSS 选择器从集合中选择一个元素

> ID：16038699
> 
> 赞同：0
> 
> 时间：2013-04-16T13:41:22.170
> 
> 标签：css, css-selectors

我有一张桌子：

```
<table>
<thead>
    <tr>
        <td>col 1</td>
        <td>col 2</td>
        <td>col 3</td>
    </tr>
</thead>
<tbody>
    <tr>
        <td>row 1</td>
        <td class="editable">value 1</td>
        <td class="editable">value 2</td>
    </tr>
    <tr>
        <td>row 2</td>
        <td class="editable">value 1</td>
        <td class="editable">value 2</td>
    </tr>
    <tr>
        <td>row 3</td>
        <td class="editable">value 1</td>
        <td class="editable">value 2</td>
    </tr>
    <tr>
        <td>row 4</td>
        <td class="editable">value 1</td>
        <td class="editable">value 2</td>
    </tr>
    <tr>
        <td>row 5</td>
        <td class="editable">value 1</td>
        <td class="editable">value 2</td>
    </tr>
</tbody>
</table> 
```

如何从 中仅选择（仅使用 CSS 选择器）一个元素`td.editable`？jQuery`:first`选择器的模拟是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:47:04.560

您可以使用第 n 个子选择器。使用一个来获取您想要的确切表格行，然后使用第二个第 n 个子项来获取`<td>`您想要的确切元素。例如，如果我想要第二行，第二个`<td>`带有 class="editable" 的元素，我可以这样做：

```
tr:nth-child(2) > td.editable:nth-child(2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:43:11.953

在兼容的浏览器上，您可以使用[:nth-child 伪类](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3anth-child)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:48:35.707

这是您唯一的 td.editable 表吗？尝试这样的事情......

```
td.editable:nth-child(2) //or 3 or 4, etc... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:49:19.977

不确定这是你想要的，但试试这个：

```
table > tbody > tr > td:nth-child(2) {
    color: red;
} 
```

**[演示](http://jsfiddle.net/ZXbT5/)**

# asp.net - 尝试生成仪表图时出现解析器错误

> ID：16038700
> 
> 赞同：0
> 
> 时间：2013-04-16T13:41:25.517
> 
> 标签：asp.net

我正在尝试根据更改的 MTBF 值生成仪表图，但是当我运行 web 应用程序时，我得到了错误

解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。

解析器错误消息：此处不允许“WebApplication1.WebForm3”，因为它不扩展类“System.Web.UI.Page”。

源错误：

第 1 行：
第 2 行：<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm3.aspx.cs" Inherits="WebApplication1.WebForm3" %> 第 3 行：
第 4 行：

源文件：/WebForm3.aspx 行：2

我使用的代码如下，

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class WebApplication1 : System.Web.UI.Page
    {

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {

            using (Testme entities = new Testme())
            {

                var execution = entities.TestExecutionDetails.Where(p => p.TestExecutionID == TestExecID).Select(p => p).OrderBy(p => p.StartTime).ToArray();
                var failures = entities.TestExecutionDetails.Select(p => p.Result != "Pass      ").Count();

                var uptime = entities.TestExecutionDetails.Where(p => p.Result == "Pass          ").Select(p => p);
                TimeSpan elapsedDuration = new TimeSpan(0);
                foreach (var p in uptime)
                {

                    elapsedDuration += (p.EndTime.Value - p.StartTime.Value);

                }
                var mtbfdisplay = elapsedDuration.TotalSeconds / failures;

                string str1 = @"

        data = google.visualization.arrayToDataTable([";

                string str2 = @"['Label', 'Value'],['MTBF'," + mtbfdisplay + @"],]);";

                string str3 = @"var options = {
                width: 400, height: 120, redFrom: 90, redTo: 100, yellowFrom: 75, yellowTo: 90, minorTicks: 5
            };

                var chart = new google.visualization.gauge(document.getelementbyid('chart-success'));
                chart.draw(data, options);";

                string postData = str1 + str2 + str3;

                Console.WriteLine(postData);

                ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "test", postData, true);

            }

        }
    }
} 
```

aspx代码如下

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm3.aspx.cs" Inherits="WebApplication1.WebForm3" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:Label ID="Label2" runat="server" Text="1"></asp:Label>
                <br />
    <div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>

                <asp:HiddenField ID="HiddenField1" runat="server" Value="1" />
                <br />

                <asp:Label ID="Label1" runat="server" Text="1"></asp:Label>
                <br />

                <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />

                <div id="chart-success"></div>

            </ContentTemplate>

        </asp:UpdatePanel>
    </div>

    </form>
</body>
</html> 
```

我真的卡住了，我什至不知道这是否是生成图表的正确方法，请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:45:20.753

类`WebForm3`没有在任何地方声明（至少在您发布的代码中），所以很可能是这一行：

```
public partial class WebApplication1 : System.Web.UI.Page 
```

应该

```
public partial class WebForm3 : System.Web.UI.Page 
```

# java - jpcap安装错误

> ID：16038703
> 
> 赞同：3
> 
> 时间：2013-04-16T13:41:29.637
> 
> 标签：java, jpcap

我在运行程序时安装了 jpcap 库，但出现此错误。我确定添加`jpcap.jar`并`jpcap.dll`纠正目录，但我不知道是什么问题！有谁知道错误是什么？

```
 Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: C:\Program Files (x86)\Java\jre7\bin\jpcap.dll: Can't find dependent libraries
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary1(Unknown Source)
    at java.lang.ClassLoader.loadLibrary0(Unknown Source)
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at jpcap.JpcapCaptor.<clinit>(JpcapCaptor.java:251)
    at EWMAStableIP.getNumOfNewIPs(EWMAStableIP.java:106)
    at EWMAStableIP.initial(EWMAStableIP.java:343)
    at Frame.initialize(Frame.java:78)
    at Frame.<init>(Frame.java:52)
    at Frame$1.run(Frame.java:39)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:00:30.770

当您使用 Linux 上的 .so 或 Windows 上的 .dll 加载本机库时，`System.loadLibrary()`它会在 PATH 环境变量和 java.libarary.path 系统属性中查找那些共享库，如果找不到共享库，则会抛出`"Exception in thread "main" java.lang.UnsatisfiedLinkError: no in java.library.path"`. 现在的窍门是，在 Windows 中，它从 System32 文件夹中获取 dll，并且大多数时候 System32 在路径中退出，所以我们通常不会遇到这个问题。无论如何，如果您反复收到此错误，则可以尝试以下步骤，这可能会帮助您解决 java 应用程序中的 java.lang.UnsatisfiedLinkError。

尝试按照以下步骤操作：

1) 检查您的 PATH for Java 是否包含所需的 dll。

2) 验证您的 java.library.path，以防您已将其设置为所需的 dll。

3) 使用命令运行您的 java 应用程序：`java -Djava.library.path= "your dll path"`

4) 尝试指定库的基本名称并使用 ("name) 加载库`System.loadLibaray`，其中名称没有 dll。

5) Linux 从 LD_LIBRARY_PATH 加载动态链接库(.so)，因此您可能希望将共享库目录包含在 LD_LIBRARY_PATH 中，例如

6）通过提供绝对路径来加载库，如`"C:/WINNT/system32/digest.dll"`

```
export LD_LIBRARY_PATH=/shared library (.so) 
```

要点是 JVM 应该找到您的 dll 并使用 -D 提供明确的路径`java.library.path`总是对我有帮助。

使用系统相关库时需要注意的其他一些要点：

1）它们使java代码平台依赖。

2)`System.loadLibrary()`等价于`Runtime.getRuntime.loadLibary()`。

3) 在静态初始化块中加载 System.loadLibary(libary) 以便仅在加载包含类时才加载它，并避免重新加载它。

另一个值得注意的点是 java.lang.UnsatisfiedLinkError 抛出的实际错误消息：

如果它显示 `"Exception in thread "main" java.lang.UnsatisfiedLinkError: no dll in java.library.path"` 意味着 JVM 无法定位和加载库。

如果它显示线程，`"main" java.lang.UnsatisfiedLinkError: com......'`即打印类或方法名称，则库本身可能有问题，例如一半复制的 dll。

有时您可能还会得到

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Expecting an absolute path of the library: digest.dll
        at java.lang.Runtime.load0(Runtime.java:767)
        at java.lang.System.load(System.java:1003) 
```

要解决这个问题，只需提供库的绝对路径就可以了。

这就是如何解决的全部内容 `Exception in thread "main" java.lang.UnsatisfiedLinkError: no dll in java.library.path"`，如果您以前遇到过这个 java.lang.UnsatisfiedLinkError，请分享您的经验。

参考[这里](http://javarevisited.blogspot.com/2012/03/javalangunsatisfiedlinkerror-no-dll-in.html#ixzz2QdP2sdze)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-03T12:18:48.180

可能您在 32 位 wincap 上运行 64 位 jpcap .. 请重新安装 wincap 并确保 jpcap 和 wincap 都具有与 jdk 相同的“位”。

# node.js - 如何将缓冲区包装为 stream2 可读流？

> ID：16038705
> 
> 赞同：68
> 
> 时间：2013-04-16T13:41:35.410
> 
> 标签：node.js, node.js-stream

如何使用 stream2 接口将 node.js 缓冲区转换为可读流？

我已经找到了这个[答案](https://stackoverflow.com/questions/13230487/converting-a-buffer-into-a-readablestream-in-nodejs)和 stream-buffers 模块，但是这个模块是基于 stream1 接口的。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-04-16T18:25:26.023

最简单的方法可能是创建一个新的 PassThrough 流实例，然后简单地将数据推送到其中。当您将其通过管道传输到其他流时，数据将从第一个流中提取出来。

```
var stream = require('stream');

// Initiate the source
var bufferStream = new stream.PassThrough();

// Write your buffer
bufferStream.end(Buffer.from('Test data.'));

// Pipe it to something else  (i.e. stdout)
bufferStream.pipe(process.stdout) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-01-15T13:17:42.813

`stream.PassThrough`正如 natevw 所建议的，使用 a和`end`它与缓冲区一起使用更为惯用：

```
var buffer = new Buffer( 'foo' );
var bufferStream = new stream.PassThrough();
bufferStream.end( buffer );
bufferStream.pipe( process.stdout ); 
```

这也是在[vinyl-fs](https://github.com/wearefractal/vinyl/blob/master/index.js#L100)中转换/传输缓冲区的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-01T17:31:11.130

一种现代的简单方法，可在您使用 fs.createReadStream() 的任何地方使用，但无需先将文件写入路径。

```
const {Duplex} = require('stream'); // Native Node Module 

function bufferToStream(myBuuffer) {
    let tmp = new Duplex();
    tmp.push(myBuuffer);
    tmp.push(null);
    return tmp;
}

const myReadableStream = bufferToStream(your_buffer); 
```

*   myReadableStream 是可重用的。
*   缓冲区和流仅存在于内存中，不写入本地存储。
*   当实际文件存储在某个云服务中并且我们的 API 充当中间人时，我经常使用这种方法。文件永远不会被写入本地文件。
*   我发现无论缓冲区（最大 10 mb）还是接受可读流的目的地，这都是非常可靠的。更大的文件应该实现

# c# - 为什么SqlDataAdapter.Update 只能调用一次？

> ID：16038706
> 
> 赞同：1
> 
> 时间：2013-04-16T13:41:38.217
> 
> 标签：c#, sql, database, sql-update, sqldataadapter

我有一个 C# ASP.net 项目，该项目将数据集发送到我的连接类，并在其中相应地更新数据库。

我发送的数据集填充了来自我的数据库的 2 个表的数据，因此我使用了 Join 来获取数据。（因此个人更新）

现在我已经对数据集进行了更改并希望更新数据库。如果一次只运行一个，我的代码的第 1 节和第 2 节都有效（因此第 1 节或第 2 节应该被注释掉）。

但是当我尝试运行两者时，它只使用第一部分更新数据库（没有引发错误，并且代码确实执行）

为什么会这样？在第一次更新后，我还关闭并重新打开了我的连接，看看是否有任何不同。

```
 public void udpateCourse(DataSet dataSetEmp)
    {
        try
        {
            conn.Open();
            //SECTION 1 -- THE FIRST UPDATE
            da = new SqlDataAdapter("select * from EthicsManagement", conn);
            var builderForTable1 = new SqlCommandBuilder(da);
            da.Update(dataSetEmp, "Table");

            //SECTION 2 -- THE SECOND UPDATE
            da = new SqlDataAdapter("select employeeId, name as [Employee Name] from EmployeeTable", conn);
            builderForTable1 = new SqlCommandBuilder(da);
            da.Update(dataSetEmp, "Table");

            conn.Close();
        }
        catch (Exception ex)
        {
            throw new Exception("Problem with the SQL connection " + ex);
        }
    } 
```

--更新--我试过的

1.  再次关闭和打开连接
2.  适配器和构建器的新实例
3.  甚至将它们放在单独的方法中
4.  有一个查询（两个表的连接）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T18:53:50.220

我知道这是一个老问题，但也许它可以帮助某人。

[MSDN 说调用更新时会发生以下情况：](http://msdn.microsoft.com/en-us/library/a19c81fk.aspx)

> 使用Update时，执行顺序如下：
> 
> 1.  DataRow 中的值被移动到参数值。
> 2.  引发 OnRowUpdating 事件。
> 3.  命令执行。
> 4.  如果该命令设置为 FirstReturnedRecord，则第一个返回的结果放置在 DataRow 中。
> 5.  如果有输出参数，则将它们放在 DataRow 中。
> 6.  引发 OnRowUpdated 事件。
> 7.  **调用 AcceptChanges。**

第二个 Update() 没有任何效果，因为对它的更改是由 AcceptChanges() 命令提交的。

# javascript - 带有模板的 Dojo 小部件，在小部件加载时更改模板（添加 DOM 元素）

> ID：16038712
> 
> 赞同：2
> 
> 时间：2013-04-16T13:41:46.033
> 
> 标签：javascript, dom, dojo, widget

我想用一个非常简单的 html 模板创建一个 dojo 小部件：

```
<div id="contentExternal"></div> 
```

然后在小部件加载时，我想从外部服务加载某些 url。然后在加载 url 后，我想放置一个与加载的 url 相等的 with src 参数。我已经写了：

```
dojo.provide("dojoModules.ExternalWebsitePane");
dojo.require("dijit._Widget");
dojo.require("dijit._Templated");
dojo.require("dojoModules.ConfigurationPane");

dojo.declare("dojoModules.ExternalWebsitePane", [dijit._Widget, dijit._Templated],
    {
        templateString: dojo.cache("dojoModules", "templates/ExternalWebsitePane.html"),
        widgetsInTemplate: false,
        constructor: function() {
        }
        ,
        startup: function() {
            //Get Config
            var serviceParams = new Object();
            serviceParams.ServiceType = "GetConfig";
            ecm.model.Request.invokePluginService("ExternalWebsitePlugin", "ExternalWebsiteService",
                    {requestParams: serviceParams, requestCompleteCallback: function(response) {
                            iframe = new Object();
                            iframe.src = response.configuration.value;
                            iframe.class = "iframe1";
                            var content = document.getElementById('contentExternal');
                            content.appendChild(iframe);
                        }});

        }

    }); 
```

但是代码执行失败

```
var content = document.getElementById('contentExternal');
content.appendChild(iframe); 
```

它说内容为空。我怀疑来自 html 模板的 div 尚未加载。我应该如何添加元素？还是什么时候？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:04:08.690

通常，当您有模板化的小部件时，您应该使用 Dojo 附加点。如果您有以下模板（例如）：

```
<div data-dojo-attach-point="contentExternalNode"></div> 
```

然后，您可以从与附加点同名的属性访问该节点，例如：

```
this.contentExternalNode.appendChild(iframe); 
```

我通常在`postCreate`小部件中做这些事情（我不知道它是否已经可用`startup`）。这里有一篇关于编写自己的小部件的文章（以及有关模板化小部件的更多信息[）](http://dojotoolkit.org/reference-guide/1.8/quickstart/writingWidgets.html#templated-widgets)。

**注意：**如果您使用 Dojo 1.6，您需要使用`dojoAttachPoint`属性而不是`data-dojo-attach-point`.

# transactions - 为什么这个自定义程序命名为 AQZZ...？

> ID：16038718
> 
> 赞同：2
> 
> 时间：2013-04-16T13:42:11.973
> 
> 标签：transactions, report, code-generation, abap, sap-query

我发现一个“Z”交易调用了一个不在客户空间中的程序。这个程序“似乎”是客户开发的东西，意思是它的名字是“AQZZZFI_ABC=====ZPYORD========”，其中“ABC”是公司的名称，而创建者该方案是那里的顾问之一。

这个程序可以在客户命名空间之外做什么？是自动生成的吗？

如果是这样，生成它的框架是什么，我怎样才能得到“真正的”开发对象？

注意：该程序使用一个名为“__S”的逻辑数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:00:35.153

带有前缀的程序`AQ`通常由[SAP Query](http://help.sap.com/erp2005_ehp_04/helpdata/en/05/2b1df9209411d6b1d500508b6b8b11/frameset.htm)或[Quick Viewer](http://help.sap.com/erp2005_ehp_04/helpdata/en/b7/26dde8b1f311d295f40000e82de14a/frameset.htm)生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T19:56:07.533

以下是您如何（大致）解析出该字符串的开头：

“AQZZ”是客户 SAP 查询的 SAP 命名空间。所以从技术上讲，命名约定是可以的，并且是通过事务 SQ01 自动创建的。

在大多数情况下，SAP 查询不会，但查询依赖于数据的基础信息集可能会。一旦您确定了适合您的 SAP 查询的信息集，您可以通过在事务 SQ02 中输入信息集并单击“描述”按钮来浏览任何现有的客户代码。这将向您显示所有自定义代码、字段等。

# fastreport - 如何使用 c# 通过应用程序将自定义 sql 命令传递给 fastreport.net？

> ID：16038722
> 
> 赞同：4
> 
> 时间：2013-04-16T13:42:21.973
> 
> 标签：fastreport

我开始使用 fastreport.net 在 c# 中生成报告，因为 Crystal 报告与 .net4 不兼容。它是如此简单，但它也如此复杂。我尝试通过我的应用程序将 sql 命令传递给我的报告，但它不起作用。任何人都可以帮助我吗？这是代码：

```
 Report rpt = new Report();
        rpt.Load("H:\\MyReport.frx");
        rpt.SetParameterValue("Parameter", "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=Confictionary");
        FastReport.Data.TableDataSource data = rpt.GetDataSource("Contact") as FastReport.Data.TableDataSource;
        data.SelectCommand = "SELECT * from contact";
        rpt.Prepare();
        rpt.ShowPrepared(); 
```

它在第 5 行抛出异常：“对象引用未设置为对象的实例。” 请某人帮助我。
很多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T21:44:25.343

我认为 SQL 命令应该在报告模板集中，而不是动态的，除非这只是第一次用于创建报告文件。

我用这个：

```
 FReport.SetParameterValue("SQL_rysys", ConnectionString);

                  if (FReport.Dictionary.Connections.Count > 0)
                  {
                      FReport.Dictionary.Connections[0].ConnectionString = ConnectionString;
                      FReport.Dictionary.Connections[0].ConnectionStringExpression = "[SQL_rysys]";
                      FReport.Dictionary.Connections[0].CommandTimeout = 60;
                  } 
```

此代码为参数“SQL_rysys”（英文为 SQL_connection）分配值，我传递 SQL 连接字符串。此外，如果数据源字典中有任何连接 - 我将连接字符串分配给第一个。

所以我的报告总是得到正确的连接字符串，但是 SQL 查询已经包含在报告中。因为没有其他方法可以在设计器中创建报表而不使用查询来获取数据，并且该查询保存在 XML 报表文件 (frx) 中。

我在 fastreport 支持中询问如何分配查询，但他们的支持是 AWFUL 并且 noobs 在那里工作。

# performance - 矩阵乘法 Intel/AMD CPU 的最大 FLOPS

> ID：16038729
> 
> 赞同：3
> 
> 时间：2013-04-16T13:42:35.257
> 
> 标签：performance, intel, sse, matrix-multiplication, eigen

我估计英特尔 CPU 的最大 FLOPs/s 的公式是

```
Max SP FLOPs/s = frequencey * 4 SSE(8AVX) * 2 (MAC) * number of cores (not HW threads)
Max DP FLOPs/s = 0.5 * Max SP FLOPs/s 
```

MAC是指CPU可以同时进行一个SSE（AVX）乘法和加法。在我使用的系统上，负载下的最大频率是 2.66 GHz。它只有 SSE，核心数（不是硬件线程）为 4。这给出：Max SP FLOPs/s = 85.12 GFLOPs/s。

矩阵乘法的 FLOP 数是 approxiamelty `2*n*m*k`。对于 n=1000 的方阵，即 2*10E9 FLOP（20 亿 FLOP）。一旦我知道了我可以估计 FLOPs/s 的时间。

但是，对于我自己的代码，我能得到的最好的结果是大约 40 SP GFLOPs/s，例如 n=1000。我得到与 Eigen 相同的结果。这大约是 45% 的效率。我对最大值的计算是否错误？对于大型密集矩阵乘法，英特尔 CPU 的最佳效率是多少？有没有人有一篇描述这个的论文？

我知道在 GPU 上效率可以超过 60%。 [http://www.anandtech.com/show/6774/nvidias-geforce-gtx-titan-part-2-titans-performance-unveiled/3](http://www.anandtech.com/show/6774/nvidias-geforce-gtx-titan-part-2-titans-performance-unveiled/3)

编辑：对于 n=500，我得到了类似的结果，它很容易适合我系统的 12MB L3 缓存，因此缓存似乎不是限制因素（尽管也许我可以更有效地使用它）。

Edit2：Eigen Benchmarks 显示它与 MKL（对于 SSE）一样好。他们使用 Intel(R) Core(TM)2 Quad CPU Q9400 @ 2.66GHz。所以 2.66* 2(DP SSE) *2 MAC * 4 cores = 42.25 DP GFLOPs/s。你可以在情节上看到他们都得到了不到 20 个。像我这样的人大约有 45%。 [http://eigen.tuxfamily.org/index.php?title=基准](http://eigen.tuxfamily.org/index.php?title=Benchmark)

[http://ark.intel.com/products/35365/Intel-Core2-Quad-Processor-Q9400-6M-Cache-2_66-GHz-1333-MHz-FSB](http://ark.intel.com/products/35365/Intel-Core2-Quad-Processor-Q9400-6M-Cache-2_66-GHz-1333-MHz-FSB)

Edit3：这是我给关心的人的代码。我可以得到比这更好的结果，但不会好多少。我将 Agner Fog 的矢量类用于 SEE/AVX。并将 Vec8f 设置为 float8 并将 Vec4d 设置为 double4

```
//SGEMM and AVX call MM_tile<float, float8>(nthreads, a, b, c, n, m, k);
template <typename ftype, typename floatn>
void GEMM_tile(const int nthreads, const ftype*A , const ftype* B, ftype* C, const int N, const int M, const int K) {       
    for(int i=0; i<N; i++) {
       for(int j=0; j<K; j++) {
           C[K*i + j] = 0;
       }
    }   
    const int nc = 32;
    const int kc = 32;
    const int mc = 32;
    omp_set_num_threads(nthreads);
    #pragma omp parallel for if(nthreads>1)
    for(int ii=0; ii<N; ii+=nc) {
        for(int jj=0; jj<K; jj+=kc)
            for(int ll=0; ll<M; ll+=mc) {
                const int nb = min(N-ii, nc);
                const int kb = min(K-jj, kc);
                const int mb = min(M-ll, mc);
                MM_block<ftype, floatn>(nb, mb, kb, &A[M*ii+ll], N, &B[K*ll+jj], K, &C[K*ii+jj], K );
            }
     }
}

template <typename ftype, typename floatn>
void MM_block(int n, int m, int k, const ftype *a, const int stridea, 
                                   const ftype *b, const int strideb,
                                   ftype *c, const int stridec ) {
    const int vec_size = sizeof(floatn)/sizeof(ftype);
    for(int i=0; i<n; i+=4) {
        for(int j=0; j<k; j+=vec_size) {
            Dot4x4_vec_block<ftype, floatn>(m, &a[strideb*i], &b[j], &c[stridec*i + j], stridea, strideb, stridec);
    }
}

template <typename ftype, typename floatn>
inline void Dot4x4_vec_block(const int n, const ftype *a, const ftype *b, ftype *c, const int stridea, const int strideb, const int stridec) {
    floatn tmp0, tmp1, tmp2, tmp3;
    load(tmp0, &c[stridec*0]);
    load(tmp1, &c[stridec*1]);
    load(tmp2, &c[stridec*2]);
    load(tmp3, &c[stridec*3]);

    ftype *a0_ptr = (ftype*)&a[stridea*0];
    ftype *a1_ptr = (ftype*)&a[stridea*1];
    ftype *a2_ptr = (ftype*)&a[stridea*2];
    ftype *a3_ptr = (ftype*)&a[stridea*3];
    for(int i=0; i<n; i++) {
        floatn breg = floatn().load(&b[i*strideb + 0]);

        floatn areg0 = *a0_ptr++;
        floatn areg1 = *a1_ptr++;
        floatn areg2 = *a2_ptr++;
        floatn areg3 = *a3_ptr++;

        tmp0 += areg0 * breg;
        tmp1 += areg1 * breg;
        tmp2 += areg2 * breg;
        tmp3 += areg3 * breg;
}
    tmp0.store(&c[stridec*0]);
    tmp1.store(&c[stridec*1]);
    tmp2.store(&c[stridec*2]);
    tmp3.store(&c[stridec*3]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:11:28.297

通常，处理吞吐量的限制因素是内存带宽，尤其是在您的工作集不适合 CPU 缓存的情况下（您的 1000×1000 矩阵`float`将占用约 4 MB，而您的 CPU 可能有 2 MB L3 缓存）。在这种情况下，您的算法结构可能会对它的执行方式产生很大影响，但您通常会在某个时候碰壁，因为您正在等待来自某个内存层次结构中的更高级别。

此外，您的理论数字假设您有足够的指令而没有数据依赖性，可以让所有执行单元在每个周期都被分配任务。这在实践中可能很难做到。我不确定一般矩阵乘法的最佳吞吐量是多少，但请查看[上一个问题](https://stackoverflow.com/questions/8389648/how-to-achieve-4-flops-per-cycle)，了解如何最大限度地提高指令吞吐量。

# ios - performSelectorInBackground 导致内存泄漏

> ID：16038730
> 
> 赞同：0
> 
> 时间：2013-04-16T13:42:35.473
> 
> 标签：ios, memory-leaks

这给了我内存泄漏，即使我在选择器函数中调用了创建和释放池。

```
[read_qr performSelectorInBackground:@selector(newThreadWrapper) withObject:nil]; 
```

类 read_qr：

```
 - (void) newThreadWrapper {
         reading = YES;
         NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
         [self another_function:arg];             
         [pool release];
         reading = NO;

    } 
```

如果我在没有 performSelectorInBackground 的情况下在主线程中调用相同的函数，则不会发生泄漏。

任何提示表示赞赏。

谢谢你。

# asp.net - 当我在 ASP.NET 中没有数据库访问权限时，我是否需要担心代码注入？

> ID：16038733
> 
> 赞同：0
> 
> 时间：2013-04-16T13:42:46.157
> 
> 标签：asp.net, code-injection

我有一个带有文本框的简单站点，用户可以在其中输入一些内容。该文本被分析并用它完成了一些花哨的事情（比如计算单词，在另一个文本框中显示文本）

不存在数据库连接。没有数据被永久保存

我还需要担心代码注入吗？可以做一些有害的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:52:17.507

我同意@nmat 并想在这里补充一点，如果你想检查安全性，你唯一需要考虑的是跨站点脚本，因为文本框中的输入很奇怪。您可以使用[反跨站点脚本库进行验证](http://msdn.microsoft.com/en-us/security/aa973814.aspx)。同一个网站也有关于我刚才所说的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:49:44.910

根据您实现应用程序行为的方式，很多事情都可能出错。你不必担心SQL注入，因为你没有数据库，但如果你对提交的数据不小心，你可能会遇到问题。

将[ASP 验证器](http://msdn.microsoft.com/en-us/library/bwd43d0x%28v=vs.100%29.aspx)添加到 TextBox 以确保用户只提交您希望收到的数据。例如：添加最大长度、正则表达式或其他自定义验证。ASP 验证器在客户端和服务器端都工作，因此在这种情况下这应该是足够的保护。

# php - PHP - 检查重复条目

> ID：16038736
> 
> 赞同：2
> 
> 时间：2013-04-16T13:43:01.687
> 
> 标签：php

我有一个简单的报名表，其中包括一个电子邮件地址。我想检查重复项（我可以这样做），但我正在努力的是如何让输入表表明它是重复的“请再试一次”。

报名表代码如下：

```
 <form action="mailer2.php" method="POST">
    <div>
        <p class="auto-style1" style="width: 408px">Newsletter Sign-Up Form</p>
        <p>First Name</p>
        <input name="firstname" type="text"> <br> </div>
        <div>
        <p>Last Name</p>
        <input name="lastname" type="text">
        <br>
        </div>
        <p>E-Mail</p>
        <input name="email" type="text">
        <br>
        </div>
        <div>
        <p>What are your interests"</p><br>
        <input type="checkbox" name="activity[]" value="run">I enjoy running<br>
        <input type="checkbox" name="activity[]" value="bike">
        I enjoy mountain biking<br>

        <input type="checkbox" name="activity[]" value="hike">I enjoy hiking<br>
        </div>
        <div>
    <input name="submit" type="submit" value="Send!"> </div>
</form> 
```

PHP 代码：这是我卡住的地方......我如何返回我的表单并在电子邮件地址下方注明它是重复的

```
 <?php
$hostname = "hostname";
$username = "Username";
$password = "password";
$dbname = "Tablename";
$TableName = "MemberInfo";

// Check connections
mysql_connect($hostname, $username, $password) or die("cannot connect");
mysql_select_db("$dbname")or die("cannot select DB");
// Get values from form
$fname=$_POST['firstname'];
$lname=$_POST['lastname'];
$email=$_POST['email'];
$FullName = $fname . " " . $lname;
$activity=$_POST['activity'];
$run = 0;
$bike = 0;
$hike = 0;

//Check for Duplicate Email
$result = mysql_query("SELECT * FROM MemberInfo WHERE Email='$email'");
$DupCheck = mysql_num_rows($result);

if ($DupCheck) {
echo "Email already exists ... please try again.";
//header('Location: NewsletterSignUp.html');
exit;

//trigger_error('Email Already Exists.', E_USER_WARNING);
}

if (isset($_POST['activity'])) {
    $activity = $_POST['activity'];
    foreach($activity as $key => $value) {
        //echo $key. ' = ' . $value . '<br>';
        if ($value == 'run') {
        $run = 1;
        }
        if ($value == 'bike') {
        $bike = 1;
        }
        if ($value == 'hike') {
        $hike = 1;
        }
        }
        } else {
            echo 'Nothing';
        }

// Insert data into  mysql
$sql="INSERT INTO $TableName (FirstName, LastName, FullName, 
    Email, Run, Bike,     Hike) VALUES('$fname', '$lname', 
    '$FullName', '$email', '$run', 
    '$bike', '$hike')";
$result=mysql_query($sql);
 // if successful insert data into database, displays message "Successful".
if($result){
header('Location: Confirmation.html');
}
else {
die('Invalid query: ' . mysql_error());
}
if(isset($_POST['submit'])) {

// Send email 
$to = "someone@example.com";
$subject = "Newsletter Sign-Up";

// data the visitor provided
$fname_field = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING);
$lname_field = filter_var($_POST['lastname'], FILTER_SANITIZE_STRING);
$email_field = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);
foreach($_POST['activity'] as $value) {
$activity_field .= "Checked: $value\n";
}
//constructing the message
$body = " From: $fname_field $lname_field\n\n 
    E-Mail: $email_field\n\n$activity_field";

// ...and away we go!
mail($to, $subject, $body);

} else {

// handle the error somehow

}

?>
<?php
// close connection
mysql_close();
?> 
```

（编辑 - 显示表单 html）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:51:27.693

最简单的方法是将电子邮件字段设置为具有索引的 UNIQUE，然后将无法添加 2 个相同的电子邮件字段。另一种方法是使用该邮件进行选择，并检查该字段是否有记录。

也不要使用 mysql_* 函数，它们是旧的，将来会被删除。

这里有更多关于唯一索引[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

以我个人的经验，我喜欢将很多东西放入数据库，如果有可以通过数据库检查的东西，为什么不使用它呢？

更改您的数据库

```
ALTER TABLE $TABLE
ADD UNIQUE INDEX Email(Email); 
```

或者

```
CREATE UNIQUE INDEX unique_email
ON $TABLE (Email) 
```

在已经有电子邮件的地方添加新行将返回错误，或者如果您使用 pdo 它将引发异常。就像是：

```
ERROR 1062 (23000): Duplicate entry 'xxx' for key 1. 
```

# ios - UITextField - 监视文本中的插入和删除

> ID：16038737
> 
> 赞同：2
> 
> 时间：2013-04-16T13:43:02.130
> 
> 标签：ios, operational-transform

因此，我正在开发具有一些协作功能的应用程序，例如多个用户同时编辑单个文本文件。

我需要像这样[http://operational-transformation.github.io](http://operational-transformation.github.io)对文本进行操作转换（检查可视化[http://ot.substance.io/visualization](http://ot.substance.io/visualization)）。

我想我可以简单地在我的应用程序中使用那个 JS 实现（使用 WebView 或一些派生的桥），没关系，但是我如何在 UITextField 上观察这些文本变化？我显然需要观察插入和删除（+两者的位置）。我需要创建要发送到服务器并从服务器接收的操作。

那么我该如何做到这一点，或者是否有任何用 Objective-C 为 iOS 编写的可行解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:52:31.323

UITextFieldDelegate 及其`textField:shouldChangeCharactersInRange:replacementString:`方法。

对于任何对 iOS OT 实施有任何好的建议的人，我将保持开放几天。

# java - JSR-303 如何以不同方式验证两个子对象

> ID：16038742
> 
> 赞同：3
> 
> 时间：2013-04-16T13:43:09.323
> 
> 标签：java, bean-validation, hibernate-validator

我使用 Hibernate Validator 作为 JSR-303 实现。

假设我有：

```
class Form {
    @Valid
    private Owner mainOwner;
    @Valid
    private Owner secondOwner;
    // ... many other fields
}

class Owner {
    @DriverLicenseValid // some custom validation
    private String driverLicense;
    // ... many other fields
}

// ...

Form myForm;
validator.validate(myForm); 
```

看，我想验证整个表单，它包含两个相似的所有者类型的子对象。问题是对于 mainOwner driverLicense 应该是 @NotNull 而对于 secondOwner 它应该是 @Null。

我不能在这里使用组（可以吗？），因为整个模型是由单个 validate() 调用检查的。有没有办法在不将此规则编写为表单级别的自定义约束的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:16:55.410

如果您使用 Hibernate Validator 4.x，则可以使用本[论坛帖子](https://forum.hibernate.org/viewtopic.php?f=9&t=1025406)中描述的自定义组序列提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:26:00.770

`mainOwner`在字段中创建验证注释，以`Form`验证`Owner`实例是否具有设置的驾驶执照。

`@DriverLicenseValid`注释应该遵循 jsr-303 规范中的建议，即默认`null`值是有效的。所以你不需要改变`Owner`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-11T05:14:18.813

使用组：

```
class Form {
    @Valid
    @ConvertGroup(from=Default.class, to=NotNullDriversLicense.class)
    private Owner mainOwner;
    @Valid
    @ConvertGroup(from=Default.class, to=NullDriversLicense.class)
    private Owner secondOwner;
    // ... many other fields
}

class Owner {
    @Null(groups = NullDriversLicense.class)
    @NotNull(groups = NotNullDriversLicense.class)
    private String driverLicense;
    // ... many other fields
}

interface NullDriversLicense {}
interface NotNullDriversLicense {}

// ...

Form myForm;
validator.validate(myForm); 
```

# wcf - Sharepoint 自定义 WCF Rest 服务不使用 maxReceivedMessageSize

> ID：16038748
> 
> 赞同：1
> 
> 时间：2013-04-16T13:43:31.170
> 
> 标签：wcf, rest, sharepoint, webhttpbinding, maxreceivedmessagesize

我正在为 Sharepoint 2010 构建自定义 WCF Rest 服务。服务的主要任务是从 Sharepoint 下载和上传一些文件。下载按预期工作，但上传大于 64Kb 的文件时出现以下错误：

```
The maximum message size quota for incoming messages (65536) has been exceeded. To increase the quota, use the MaxReceivedMessageSize property on the appropriate binding element. 
```

堆栈跟踪 ：

```
System.ServiceModel.Channels.HttpInput.ThrowHttpProtocolException(String message, HttpStatusCode statusCode, String statusDescription)
System.ServiceModel.Channels.HttpInput.ThrowMaxReceivedMessageSizeExceeded()
System.ServiceModel.Channels.HttpInput.GetMessageBuffer()
System.ServiceModel.Channels.HttpInput.ReadBufferedMessage(Stream inputStream)
System.ServiceModel.Channels.HttpInput.ParseIncomingMessage(Exception&amp; requestException)
System.ServiceModel.Channels.HttpRequestContext.CreateMessage()
System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, ItemDequeuedCallback callback)
System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
System.ServiceModel.PartialTrustHelpers.PartialTrustInvoke(ContextCallback callback, Object state)
System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequestWithFlow(Object state)
System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.WorkItem.Invoke2()
System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.WorkItem.Invoke()
System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.ProcessCallbacks()
System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.CompletionCallback(Object state)
System.ServiceModel.Channels.IOThreadScheduler.CriticalHelper.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
System.ServiceModel.Diagnostics.Utility.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP) 
```

所以我的第一个猜测是通过自定义配置来增加最大消息大小，如下所示：

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Project.Poc.StorageServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="Project.Poc.IStorageService" behaviorConfiguration="Project.Poc.StorageServiceBehavior">
        <endpoint binding="webHttpBinding" bindingConfiguration="StreamedRequestWebBinding" contract="Project.Poc.IStorageService"/>
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="StreamedRequestWebBinding"
                 sendTimeout="00:05:00"
                 openTimeout="00:05:00"
                 receiveTimeout="00:05:00"
                 maxReceivedMessageSize="2147483647"
                 maxBufferSize="2147483647"
                 maxBufferPoolSize="2147483647"
                 transferMode="StreamedRequest">
          <readerQuotas maxArrayLength="2147483647" maxStringContentLength="2147483647" />
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
</configuration> 
```

应用此之后，部署我的 WSP 并执行 IIS 重置错误仍然存​​在。与来自 WCF 跟踪的上述信息相同的 HTTP 400。所以不知何故我的 web.config 配置不好，因为 WCF 服务没有使用它？

上传小于 64KB 的文件按预期工作。

这也是我的 IStorageService.cs 定义：

```
namespace Project.Poc
{
    [ServiceContract]
    public interface IStorageService
    {
        [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/Download?path={path}")]
        Stream DownloadFile(string path);

        [OperationContract]
        [WebInvoke(Method = "POST", UriTemplate = "/Upload?path={path}")]
        void UploadFile(string path, Stream content);
    }
} 
```

还有我的 web.config 所在的 ISAPI 文件夹中的 StorageService.svc：

```
<%@ ServiceHost Language="C#" Debug="true" Service="Project.Poc.StorageService, Project.Poc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=d2ed6a8d86479f52"  CodeBehind="StorageService.svc.cs"  Factory="Microsoft.SharePoint.Client.Services.MultipleBaseAddressWebServiceHostFactory, Microsoft.SharePoint.Client.ServerRuntime, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
```

我尝试了所有其他我在谷歌上搜索但没有运气的 web.config 变体。这可能是什么原因？任何帮助都非常受欢迎。

此外，如果您需要源代码的任何其他部分，请告诉我。我会更新我的问题。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:43:22.457

我会查看您的客户端配置 - 以确保绑定配置具有相同的属性

`maxReceivedMessageSize="2147483647"`.

另外，我会尝试添加到您的绑定（客户端和服务）

```
<readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" /> 
```

如果这两种方法都无济于事 - 尝试使用 SvcTraceViewer 找出错误**的**来源（发送时的客户端、服务器……）

# android - 视频兼容性问题：android 录制的视频无法在 iphone 中播放

> ID：16038750
> 
> 赞同：6
> 
> 时间：2013-04-16T13:43:40.850
> 
> 标签：android, iphone, video, compatibility, video-recording

我正在像这样在android中录制视频

```
List<Camera.Size> list =  myCamera.getParameters().getSupportedPictureSizes();
            Parameters parameters = myCamera.getParameters();
            parameters.setColorEffect(coloreffects.get(index_color_effect));
            myCamera.setParameters(parameters);
            mediaRecorder = new MediaRecorder();
            myCamera.unlock();
            mediaRecorder.setCamera(myCamera);
                mediaRecorder.setOrientationHint(90);
            mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
            mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
            mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            mediaRecorder.setAudioEncoder(AudioEncoder.HE_AAC);
            mediaRecorder.setVideoEncoder(VideoEncoder.H264);
            mediaRecorder.setOutputFile(Constants.videourl);
            mediaRecorder.setMaxDuration(30000); // Set max duration 60 sec.
            mediaRecorder.setVideoFrameRate(24);
             mediaRecorder.setVideoFrameRate(30);
             mediaRecorder.setVideoSize(720, 480);
            mediaRecorder.setPreviewDisplay(myCameraSurfaceView.getHolder().getSurface()); 
```

这个录制的视频可以在android上很好地播放，但无法在iphone上播放。

如果如果使用此代码进行录制

```
 // work two
         {
         mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
         mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

         mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
         mediaRecorder.setOutputFile(videourl);
         mediaRecorder.setMaxDuration(30000); // Set max duration 60 sec.
         } 
```

这可以很好地录制与 iphone 兼容的视频。但这在三星 note2 上录制了大约 47 mbs 的 30 秒视频。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T09:24:09.343

iPhone 支持 MPEG-4 视频格式的视频，分辨率不大于 640x480

试试这个 mediaRecorder.setVideoSize(640, 480);

更多信息：在 iphone 上播放视频

视频格式：MP4、MOV、M4V

视频尺寸：高达 640x480

视频帧率：最高 30fps

视频比特率：H.264 最高 1.5Mbps，MPEG-4 最高 2.5Mbps

音频：AAC 高达 160Kbps，48kHz

# r - 标记 100% 堆叠条形图

> ID：16038751
> 
> 赞同：2
> 
> 时间：2013-04-16T13:43:41.780
> 
> 标签：r, ggplot2

如何为 100% 堆叠的条形图（如下图）标记堆栈中的适当值？

```
# dummy data
dat <- data.frame(
   Banner=c(rep("Company A",5),rep("Company B",5)), 
   Response=factor(c(1:5,1:5)), 
   Proportion=c(10,20,40,20,10,10,30,40,10,10))

dat <- rbind(dat,dat,dat)
dat$Time <- c(rep("Time 1",10),rep("Time 2",10),rep("Time 3",10)) 
```

我可以让它绘制，没有标签，没问题：

```
ggplot(dat, aes(Banner, Proportion, fill=Response)) + 
   geom_bar(position="stack", stat="identity") + 
   facet_grid(~Time) 
```

![两个变量的 100% 堆叠条形图](https://i.stack.imgur.com/pbiBF.png)

但是，我需要做的是标记每个元素，最好是在元素的中心。我记得看到一个使用 ddply 的函数（我认为这是 Ramnath 的答案），但对于我的生活，我找不到它。

就像是：

```
dat <- ddply(dat, .(Banner, Time), function(x) {
   x$Pos <- cumsum(x$Proportion) # at top of element, want middle!
   x}) 
```

# javascript - 并行 javascript (River Trail) 组合不是函数

> ID：16038752
> 
> 赞同：2
> 
> 时间：2013-04-16T13:43:44.980
> 
> 标签：javascript

我正在试验[英特尔的 River Trail 项目](https://github.com/RiverTrail/RiverTrail/wiki)。我安装了 Firefox 扩展（FFv19.02）。我还为 Windows 安装了 openCL。除了 'combine' 方法外，所有 API 方法似乎都在工作（map、reduce、scan、scatter、flatten、partition）：

```
var par_A = new ParallelArray([3,3], function(i,j) {return j});
console.log( par_A.combine(function(i) {return this.get(i) + 1} ) ); 
```

我得到：

```
TypeError: par_A.combine is not a function 
```

知道问题可能是什么吗？

**更新：**

所以上面的例子没有意义，因为你不能用一个组合来迭代一个二维数组。为简化起见，让我们仅举一个 1D 示例：

```
var par_A = new ParallelArray([1,2,3,4,5]);
console.log( par_A.combine(function(i) {return this.get(i) + 1} ) ); 
```

如下所述，有两种 API 方法，一种[由 Intel 提出](https://github.com/rivertrail/rivertrail/wiki/ParallelArray)，另一种是[ECMAscript 草案](http://wiki.ecmascript.org/doku.php?id=strawman%3adata_parallelism)。ECMAscript 草稿没有“组合”方法，但将索引作为第二个参数传递给“地图”。上面的等价物是：

```
var par_A = new ParallelArray([1,2,3.4.5]);
console.log( par_A.map(function(v, i) {return this.get(i) + 1} ) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:09:49.720

实际上有两个API：

1.  [GitHub 原型文档](https://github.com/rivertrail/rivertrail/wiki/ParallelArray)中描述的 River Trail API
2.  [ECMAScript 提案](http://wiki.ecmascript.org/doku.php?id=strawman%3adata_parallelism)中描述的并行 JavaScript API

两者略有不同，一个不同之处在于 ECMAScript 提案不再有 combine 方法，而是使用了一种提供相同功能的 map 风格。另一个区别是 GitHub 原型使用​​索引向量，而提案版本使用多个标量索引。对于原型，您的示例将写为

```
var par_A = new ParallelArray([3,3], function(iv) {return iv[1]});
par_A.combine(2, function(i) {return this.get(i) + 1} ); 
```

在提案版本中，您需要编写

```
var par_A = new ParallelArray([3,3], function(i,j) {return j});
par_A.map(2, function(e, i) { return this.get(i) + 1; }); 
```

不幸的是，多维地图还没有在 Firefox 中实现。您可以在 Mozilla 的错误跟踪器上观看错误 862897 以了解这方面的进展。

尽管我们认为提案中的 API 是整体上更好的设计，但出于技术原因，我们无法在原型中实现该 API。因此，我们决定保持其 API 稳定，而不是中途改进原型。

需要注意的一件重要事情是：Firefox 中的 Web 控制台似乎总是使用 ParallelArray 的内置版本，而不是特定网站使用的版本。因此，如果您想使用 GitHub 原型，最好使用我们 GitHub 网站上的交互式 shell。

希望这能消除混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:15:56.330

我最终推出了自己的组合方法：

```
ParallelArray.prototype.combine_par = function ( fn) {
        var arr = this;
    var len = this.length;
    var indexes = [];

    //array to store the indexes [0,1,2...]
    for (var i=0;i<len;i++) {
        indexes.push(i);
    }

    indexes = new ParallelArray(indexes);

    return indexes.map(function(val) {
            //use fn.call to keep 'this' in context
            return fn.call(arr,val);
    });

} 
```

然后你可以像 combine 一样调用“combine_par”：

```
var par_A = new ParallelArray([3,3,3,3]);
//returns < 0,1,2,3 >
console.log( par_A.combine_par(function(i) {return i} ) ); 
```

PS：我[在 firefox nightly 中尝试了原生 ParallelArray](http://nightly.mozilla.org/)，并[自己构建了扩展](https://github.com/RiverTrail/RiverTrail/tree/master/extension)，但在这两种情况下都没有“组合”方法

**更新：** 出于某种原因，我不能`this.get(index)`在 combine_par 回调函数中使用。所以我`this[i]`改用。

# range - Excel：检查列中是否存在单元格值，并返回与匹配相同行但不同列的值

> ID：16038758
> 
> 赞同：1
> 
> 时间：2013-04-16T13:43:59.853
> 
> 标签：range, match, excel-formula

在一个工作簿中，我有 2 个名为 Master 和 Software 的工作表。

我想在软件的 F 列中搜索一系列单元格，如果其中存在值“1”并且如果“软件”列 B 的文本值为“防病毒”，我想返回“主控”单元格值“软件”列 F 中与值 1 匹配的行。

我试过这个，但我得到了我无法调试的错误：

=IFERROR(INDEX($Software!F$7:$Software!F$1000,MATCH(1,$Software!A$7:$Software!A$1000,0),1),"不匹配")

有人看到我做错了吗？

这就像我裤子上的一个方向盘——让我发疯。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:40:00.840

您正在寻求根据 Master 中的数据更改的值“1”吗？

您可以在“软件”选项卡中移动列吗？

vlookup 可能会提供更简单的解决方案。

作为“软件”选项卡的示例模型：

```
Row Software                Number
1   test                    1
2   test                    3
3   AntiVirus               1
4   AntiVirus               2
5   test                    4 
```

然后一个关于大师的论坛拉回与您的问题相匹配的第 3 行将是：

```
=INDEX(Software!A:A,MATCH(1,(Software!B:B = "AntiVirus")*(Software!F:F=1),0)) 
```

***重要的是，当您将其放入单元格中时，要让 Excel 将其评估为数组，您必须按 CTRL + Shift + Enter 这将在论坛栏中查看时在函数周围添加 { }。

# python - Python - 在嵌套列表中查找具有唯一匹配值的列的平均值

> ID：16038760
> 
> 赞同：3
> 
> 时间：2013-04-16T13:44:06.217
> 
> 标签：python, list, unique, identity-column

这与这个问题非常相似：[Finding minimum, maximum and average values for nested lists?](https://stackoverflow.com/questions/9858739/finding-minimum-maximum-and-average-values-for-nested-lists)

问题的重要区别和根源是我想在每个唯一列名（人名）的列表（嵌套在列表中）中找到最小值、最大值、平均值。

例如：每一行基本上是（具有相似的虚构名称）-

```
epochtime, name, score, level, extralives 
```

例如

```
 1234455, suzy, 120, 3, 0
    1234457, billy, 123, 1, 2
    1234459, billy, 124, 2, 4
    1234459, suzy, 224, 5, 4
    1234460, suzy, 301, 7, 1
    1234461, billy, 201, 3, 1 
```

这些按时间排列在一个列表中：

```
if epochtime < 1234500 and epochtime > 1234400:
        timechunk1.append(line) 
```

每个时间块都有一个列表列表：

```
listoflists = [timechunk1, timechunk2....] 
```

*对于这个问题，这可能会也可能不会过度杀伤/无关紧要。*

如何找到每个唯一名称（billy 或 suzy）的每个字段（分数、级别、extralives）的最小值、最大值、平均值 -*不仅仅是 billy 或 suzy，所以最好不要列出它们单独*）在每个列表（timechunk1，timechunk2）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:15:54.063

[熊猫](http://pandas.pydata.org)示例：

```
>>> import pandas as pd
>>> df = pd.read_csv("grouped.csv", sep="[,\s]*")
>>> df
   epochtime   name  score  level  extralives
0    1234455   suzy    120      3           0
1    1234457  billy    123      1           2
2    1234459  billy    124      2           4
3    1234459   suzy    224      5           4
4    1234460   suzy    301      7           1
5    1234461  billy    201      3           1
>>> g = df.groupby("name").describe()
>>> g
                  epochtime       score  level  extralives
name                                                      
billy count        3.000000    3.000000    3.0    3.000000
      mean   1234459.000000  149.333333    2.0    2.333333
      std          2.000000   44.747439    1.0    1.527525
      min    1234457.000000  123.000000    1.0    1.000000
      25%    1234458.000000  123.500000    1.5    1.500000
      50%    1234459.000000  124.000000    2.0    2.000000
      75%    1234460.000000  162.500000    2.5    3.000000
      max    1234461.000000  201.000000    3.0    4.000000
suzy  count        3.000000    3.000000    3.0    3.000000
      mean   1234458.000000  215.000000    5.0    1.666667
      std          2.645751   90.835015    2.0    2.081666
      min    1234455.000000  120.000000    3.0    0.000000
      25%    1234457.000000  172.000000    4.0    0.500000
      50%    1234459.000000  224.000000    5.0    1.000000
      75%    1234459.500000  262.500000    6.0    2.500000
      max    1234460.000000  301.000000    7.0    4.000000 
```

或者简单地说：

```
>>> df.groupby("name").mean()
       epochtime       score  level  extralives
name                                           
billy    1234459  149.333333      2    2.333333
suzy     1234458  215.000000      5    1.666667 
```

接着：

```
>>> g.ix[("billy","mean")]
epochtime     1234459.000000
score             149.333333
level               2.000000
extralives          2.333333
Name: (billy, mean), dtype: float64
>>> g.ix[("billy","mean")]["score"]
149.33333333333334
>>> g["score"]
name        
billy  count      3.000000
       mean     149.333333
       std       44.747439
       min      123.000000
       25%      123.500000
       50%      124.000000
       75%      162.500000
       max      201.000000
suzy   count      3.000000
       mean     215.000000
       std       90.835015
       min      120.000000
       25%      172.000000
       50%      224.000000
       75%      262.500000
       max      301.000000
Name: score, dtype: float64 
```

等等。如果您以 R/SQL 方式思考，但想使用 Python，那么一定要试试 pandas。

请注意，您还可以执行多列分组：

```
>>> df.groupby(["epochtime", "name"]).mean()
                 score  level  extralives
epochtime name                           
1234455   suzy     120      3           0
1234457   billy    123      1           2
1234459   billy    124      2           4
          suzy     224      5           4
1234460   suzy     301      7           1
1234461   billy    201      3           1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:56:19.710

您必须收集每个名称、每个字段的列表。

与工厂一起使用`collections.defaultdict`创建嵌套列表：

```
from collections import defaultdict

columns = ('score', 'level', 'extralives')

def per_user_data():
    return {k: [] for k in columns}

stats_per_timechunk = []

for timechunk in listoflists:
    # group data per user, per column (user -> {c1: [], c2: [], c3: []})
    data = defaultdict(per_user_data)    
    for userdata in timechunk:
        per_user = data[userdata[1]]
        for column, value in zip(columns, userdata[2:]):
            per_user[column].append(value)

    # collect min, max and average stats per user, per column 
    # (user -> {c1: {min: 0, max: 0, avg: 0}, ..})
    stats = {}

    for user, per_user in data.iteritems():
        stats[user] = {column: {
                'min': min(per_user[column]),
                'max': max(per_user[column]),
                'avg': sum(per_user[column]) / float(len(per_user[column])),
            } for column in columns}

    stats_per_timechunk.append(stats) 
```

将您的示例输入数据转储到一个时间块中会给我：

```
>>> pprint(stats_per_timechunk)
[{'billy': {'extralives': {'avg': 2.3333333333333335, 'max': 4, 'min': 1},
            'level': {'avg': 2.0, 'max': 3, 'min': 1},
            'score': {'avg': 149.33333333333334, 'max': 201, 'min': 123}},
  'suzy': {'extralives': {'avg': 1.6666666666666667, 'max': 4, 'min': 0},
           'level': {'avg': 5.0, 'max': 7, 'min': 3},
           'score': {'avg': 215.0, 'max': 301, 'min': 120}}}] 
```

也许您应该考虑使用不同的数据结构来代替所有这些列表，或者使用[pandas](http://pandas.pydata.org/)之类的东西来帮助您更有效地分析数据。

# java - java中与当前日期的日期差异

> ID：16038763
> 
> 赞同：1
> 
> 时间：2013-04-16T13:44:09.703
> 
> 标签：java

我正在用 JAVA swing 开发一个应用程序，因为我想要与当前日期的日期差异，比如如果今天是`16/04/2013`那么它应该返回`15/04/2013`。我尝试了以下代码：

```
Calendar cal = new GregorianCalendar();
Calendar cal2 = new GregorianCalendar();
cal.roll(Calendar.DAY_OF_YEAR, -1);
//if within the first 30 days, need to roll the year as well
if(cal.after(cal2)){
     cal.roll(Calendar.YEAR, -1);
}
System.out.println("Year " + cal.get(Calendar.YEAR));
System.out.println("Month " + cal.get(Calendar.MONTH));
System.out.println("Day " + cal.get(Calendar.DAY_OF_MONTH)); 
```

在这段代码中，我期望得到一天的回溯。但相反，我得到了一个月的回溯日期。前任。如果今天是`16/04/2013`，预期的输出是`15/04/2013`，但我得到 15/03/2013（一个月前一天）作为输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:50:40.993

您不需要任何手动操作，日历会自动执行所有必要的日期运算，只需执行此操作

```
 Calendar cal = new GregorianCalendar();
    cal.add(Calendar.DATE, -1); 
```

请注意，日历中的月份从 0 开始，所以四月是 3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:21:06.167

这是一个典型的例子，为什么 java.util.Date 实现很糟糕：月份计数从零开始：

```
0-> January
1-> February
2-> March
3-> April. 
```

你是什​​么意思：

```
new Date(10,1,2013) //10th of January of 2013 
```

你得到什么：3983 年 2 月 10 日（1970+2013）

# ios - 如何生成 CSV 文件？

> ID：16038764
> 
> 赞同：6
> 
> 时间：2013-04-16T13:44:10.393
> 
> 标签：ios, objective-c, csv, export

我有数据导出到 excel 它工作正常。但我有一个小问题

我的输出是这样导出的：

![在此处输入图像描述](https://i.stack.imgur.com/EV4zX.png)

我想要发生的是：

![在此处输入图像描述](https://i.stack.imgur.com/hQizq.png)

这是我要导出的代码：

```
-(void)exportCSV {

    NSArray * data = [NSArray arrayWithObjects:entries,keys, nil];
    NSLog(@"%@",data);
    csv =[NSMutableString string];
    for (NSArray * line in data) {
        NSMutableArray * formattedLine = [NSMutableArray array];
        for ( field in line) {
            BOOL shouldQuote = NO;
            NSRange r = [field rangeOfString:@","];
            //fields that contain a , must be quoted
            if (r.location != NSNotFound) {
                shouldQuote = YES;
            }
            r = [field rangeOfString:@"\""];
            //fields that contain a " must have them escaped to "" and be quoted
            if (r.location != NSNotFound) {
                field = [field stringByReplacingOccurrencesOfString:@"\"" withString:@"\"\""];
                shouldQuote = YES;
            }
            if (shouldQuote == YES) {
                [formattedLine addObject:[NSString stringWithFormat:@"\"%@\"\"%@\"", entries,keys]];
            } else {
                [formattedLine addObject:field];
            }
        }

        NSString * combinedLine = [formattedLine componentsJoinedByString:@";"];
        [csv appendFormat:@"%@\n", combinedLine];

        NSLog(@"%@",csv);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:48:12.227

以下内容是否符合您的要求？
*请注意，我没有考虑报价，我把它留给你;）*
*还要注意我假设 entry.count == keys.count*

```
- (void)exportCSV {    
    NSArray *keys = @[@"T", @"R", @"RTT"];
    NSArray *entries = @[@"-329180696", @"1243918297", @"-998693494"];
    NSMutableString *csv = [[NSMutableString alloc] initWithCapacity:0];
    for (int i = 0; i < entries.count; i++) {
        [csv appendFormat:@"%@;%@\n", keys[i], entries[i]];
    }
} 
```

**输出：**

> T;-329180696
> R;1243918297
> RTT;-998693494

# apache - 如何为入站丢失图像提供空白图像？

> ID：16038765
> 
> 赞同：1
> 
> 时间：2013-04-16T13:44:13.557
> 
> 标签：apache, .htaccess, hotlinking

我遇到了一个问题，即外部站点使用了许多图像，目前它只是显示为未找到图像。我希望在日志中明显出现这些错误，但是我也希望 Apache 为请求者提供 1x1 透明像素图像，而不是简单地找不到它。如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:10:59.350

正如@CBroe 已经建议的那样，您可以将任何文档作为[`ErrorDocument`](http://httpd.apache.org/docs/current/mod/core.html#errordocument)服务提供给客户端，甚至是透明像素图像

```
ErrorDocument 404 /images/1x1.png 
```

如果您将 .htaccess 放在`images`文件夹中，则只会处理此处和下方丢失的文件。

返回的状态代码`404`仍将`access.log`与丢失的图像文件名一起记录。

# asp.net - 更新面板未更新

> ID：16038771
> 
> 赞同：1
> 
> 时间：2013-04-16T13:44:29.437
> 
> 标签：asp.net, updatepanel

这是我担心没有人能够回答的问题之一，但问没有坏处！

`UpdatePanels`我的ASP.NET 页面上有很多内容。当用户在特定字段中输入值时，其他控件会相应地启用或禁用。到目前为止，我添加的每个面板都运行良好，直到现在。

我有`RadioButtonList`三个选项 - 是、否和未知。如果用户选择是，`UpdatePanel`则应启用 an 中的文本框。实际发生的是它会更新......有时。该模式似乎是页面加载时选择的任何一个选项，如果您将选项更改为其他选项然后再次返回，则`RadioButtonList`不会触发该选项。`UpdatePanel`例如，如果页面加载并选择了 Unknown，则将选择更改为 Yes 或 No 会正确启用和禁用文本框，只要您愿意单击它们，但将选择更改为 Unknown 不会像应有的那样禁用文本框。就像我说的那样，无论页面加载时选择的值是什么，该模式都适用。

更奇怪的是，如果我选择了不应该触发更新的值，然后在一个完全不相关的控件中更改该值，这是一个不同的触发器`UpdatePanel`，当第二个面板更新时，第一个失败的面板也是如此更新到那个时候。尽管我所有的人`updatepanels`都设置为条件更新模式。

我在下面展示了我的代码。希望有人能指出我正确的方向！

```
<tr class="grouprow">
    <td>Non-Abdominal Surgery In Last 6 Months?</td>
    <td><asp:RadioButtonList ID="rblRecentNonAbdominalSurgery" runat="server" RepeatDirection="Horizontal" SelectedValue='<%# Bind("AdmissionRecentNonAbdominalSurgery")%>' 
        CssClass="bottommargin" AutoPostBack="true" OnSelectedIndexChanged="rblRecentNonAbdominalSurgery_SelectedIndexChanged" ClientIDMode="AutoID" >
        <asp:ListItem Text="Unknown" Value="" />
        <asp:ListItem Text="Yes" Value="True" />
        <asp:ListItem Text="No" Value="False" />                                    
    </asp:RadioButtonList></td>
</tr>
<tr class="grouprow">
    <td>Non-Abdominal Surgery Description</td>
    <td><asp:UpdatePanel ID="updRecentNonAbdominalSurgery" runat="server" UpdateMode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="rblRecentNonAbdominalSurgery" EventName="SelectedIndexChanged" />    
        </Triggers>
        <ContentTemplate>
            <asp:TextBox ID="txtRecentNonAbdominalSurgeryDescription" runat="server" Text='<%# Bind("AdmissionRecentNonAbdominalSurgeryDescription")%>' TextMode="MultiLine" 
                Rows="4" CssClass="multilinetextbox bottommargin" />
        </ContentTemplate>
    </asp:UpdatePanel></td>
</tr> 
```

以及背后的代码：

```
Dim rblPreviousColicSurgery As RadioButtonList = fvPreviousColic.FindControl("rblPreviousColicSurgery")
If rblPreviousColicSurgery.SelectedItem.Text = "Yes" Then
    txtPreviousColicSurgeryDescription.Enabled = True
Else
    txtPreviousColicSurgeryDescription.Enabled = False
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:17:19.233

是的，我想出了这个修复程序，并且对它第一次工作感到非常满意！导致该问题的原因是，当 a`RadioButtonList`被指定为 a 的异步触发器时`UpdatePanel`，执行异步回发的 JavaScript 代码被添加到`RadioButtonList`页面呈现时的每个项目中，除了所选项目之外。因此，我们需要手动将代码添加到该项目。

我创建了一个类并将这个子添加到它：

```
Public Shared Sub AddJavaScriptToItem(ByVal rbl As RadioButtonList, ByVal selectedindex As Integer)

    Dim clientid As String = rbl.ClientID
    rbl.SelectedItem.Attributes.Add("onclick", "javascript:setTimeout('__doPostBack(\'" & clientid & "$" & selectedindex & "\',\'\')',0)")

End Sub 
```

然后，我可以轻松地从我网站上`RadioButtonList`加载了 AysncPostbackTrigger 的任何位置调用此子程序（例如，在 FormView 的 DataBound 事件中）。

# automake - automake 中的库安装顺序

> ID：16038772
> 
> 赞同：2
> 
> 时间：2013-04-16T13:44:31.763
> 
> 标签：automake

当我运行 make distcheck 时，没有安装一个库（在此示例中为 lib2），因为它需要 lib1。

有没有办法规定图书馆安装的顺序？

生成文件.am：

```
lib_LTLIBRARIES = libTwo.la libOne.la

libOne_la_SOURCES = lib/one/example.cpp \
    lib/one/example.h 

libTwo_la_SOURCES = lib/two/Example2.cpp \
    lib/two/Example2.h 

libTwo_la_CPPFLAGS = -I$(srcdir)/lib/one
libTwo_la_LIBADD = libOne.la 
```

我在用：

*   红帽企业服务器 5.5
*   自动制作 (GNU 自动制作) 1.9.6

*编辑：* 这是我在 make distcheck 输出中看到的内容。

```
/usr/bin/ld: cannot find -lOne
collect2: ld returned 1 exit status
libtool: install: error: relink `libTwo.la' with the above command before installing it
/bin/sh ./libtool --mode=install /usr/bin/install -c  'libOne.la' '/tmp/xx-x-yy-21346    /home/foo/commonlib-1.0/_inst/lib/libOne.la' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:28:09.113

尝试交换：

```
lib_LTLIBRARIES = libTwo.la libOne.la 
```

为了：

```
lib_LTLIBRARIES = libOne.la libTwo.la 
```

`lib_LTLIBRARIES`IIRC，安装时的顺序。

# c# - 将 MSSQL 数据库导出到 MS Access .accdb 文件

> ID：16038780
> 
> 赞同：0
> 
> 时间：2013-04-16T13:44:59.477
> 
> 标签：c#, sql-server, ms-access, bcp

我有一个定期更新数据的 Microsoft SQL Server 数据库。我想将此数据库与所有表（最好是关系）存储到使用 C# 的新 Microsoft Access (.accdb) 文件中。

SQL Management Studio 已安装在系统上，因此我认为一种解决方案可能是从代码中调用 BCP（[http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx)），但我还没有弄清楚在这种情况下如何正确使用它。我想在不使用 BCP 的情况下有更好的方法。

谁能推荐一种方法来实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:47:44.257

可以在 Access 中导入 MSSQL 数据；更多信息： http: [//office.microsoft.com/en-us/access-help/import-or-link-to-sql-server-data-HA010200494.aspx](http://office.microsoft.com/en-us/access-help/import-or-link-to-sql-server-data-HA010200494.aspx)

更新：

或者，您可以使用 sqldataadapter 选择所有表以将所有内容存储在数据集中，请参阅：[从 SQL Server 数据库获取数据集](https://stackoverflow.com/questions/9412277/obtaining-a-dataset-from-a-sql-server-database)

从那里您可以将数据集保存为 access 数据库文件，请参阅：[C# Dataset to Access DB](https://stackoverflow.com/questions/8084158/c-sharp-dataset-to-access-db)

也许这更符合您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:48:50.857

感谢 Ferdy 的建议，我解决了这个问题。因为它可能对其他人有用，所以我将我的工作代码示例放在这里：

```
//The connection strings needed: One for SQL and one for Access
String accessConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\...\\test.accdb;";
String sqlConnectionString = "Data Source=localhost\\SQLEXPRESS;Initial Catalog=Your_Catalog;Integrated Security=True";   

//Make adapters for each table we want to export
SqlDataAdapter adapter1 = new SqlDataAdapter("select * from Table1", sqlConnectionString);
SqlDataAdapter adapter2 = new SqlDataAdapter("select * from Table2", sqlConnectionString);

//Fills the data set with data from the SQL database
DataSet dataSet = new DataSet();
adapter1.Fill(dataSet, "Table1");
adapter2.Fill(dataSet, "Table2");

//Create an empty Access file that we will fill with data from the data set
ADOX.Catalog catalog = new ADOX.Catalog();
catalog.Create(accessConnectionString);

//Create an Access connection and a command that we'll use
OleDbConnection accessConnection = new OleDbConnection(accessConnectionString);
OleDbCommand command = new OleDbCommand();
command.Connection = accessConnection;
command.CommandType = CommandType.Text;
accessConnection.Open();

//This loop creates the structure of the database
foreach (DataTable table in dataSet.Tables)
{
    String columnsCommandText = "(";
    foreach (DataColumn column in table.Columns)
    {
        String columnName = column.ColumnName;
        String dataTypeName = column.DataType.Name;
        String sqlDataTypeName = getSqlDataTypeName(dataTypeName);
        columnsCommandText += "[" + columnName + "] " + sqlDataTypeName + ",";
    }
    columnsCommandText = columnsCommandText.Remove(columnsCommandText.Length - 1);
    columnsCommandText += ")";

    command.CommandText = "CREATE TABLE " + table.TableName + columnsCommandText;

    command.ExecuteNonQuery();
}

//This loop fills the database with all information
foreach (DataTable table in dataSet.Tables)
{
    foreach (DataRow row in table.Rows)
    {
        String commandText = "INSERT INTO " + table.TableName + " VALUES (";
        foreach (var item in row.ItemArray)
        {
            commandText += "'"+item.ToString() + "',";
        }
        commandText = commandText.Remove(commandText.Length - 1);
        commandText += ")";

        command.CommandText = commandText;
        command.ExecuteNonQuery();
    }
}

accessConnection.Close(); 
```

# asp.net-mvc - 使用 Linq to Sql 选择多个表

> ID：16038785
> 
> 赞同：2
> 
> 时间：2013-04-16T13:45:11.283
> 
> 标签：asp.net-mvc, linq, asp.net-mvc-4, linq-to-sql, lambda

我有两张桌子。这些表之间存在一对多的关系。我想选择 Company 表和 BankAccount List 表（用于适当的 CompanyID）。我怎样才能用 Linq-to-Sql 做到这一点？

```
public class Company
{
    // My Fields
    [Key]
    public Guid ID { get; set; }

    public string FullName { get; set; }

    // My virtual properties FOR relationships(one-to-one,one-to-many etc.).

    public virtual List<BankAccount> BankAccounts { get; set; }
} 
```

和

```
public class BankAccount
{

    // My Fields
    //[ScaffoldColumn(false)]
    [Key]
    public Guid ID { get; set; }

    [ForeignKey("Companies")]
    public Nullable<Guid> CompanyID { get; set; }

    public string BankName { get; set; }

    // My virtual properties FOR relationships(one-to-one,one-to-many etc.).

    public virtual Company Company { get; set; }
} 
```

我写如下，但我不喜欢它

```
List<List<BankAccount>> bankaccounts = new List<List<BankAccount>>();
foreach (var comp in companyRepository.Companies)
{
      List<BankAccount> banks = new List<BankAccount>();
      foreach (var bank in bankRepository.BankAccounts)
      {
          if (comp.ID == bank.CompanyID)
          {
              banks.Add(bank);
          }
      }
      bankaccounts.Add(banks);
      banks = new List<BankAccount>();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:36:34.567

我认为以下将产生相同的结果。

```
var bankaccounts = companyRepository.Companies.Select(c => c.BankAccounts)
                       .ToList(); 
```

如果您使用实体框架，您可以预先加载“BankAccounts”属性以最小化数据库调用。

希望这可以帮助。

# php - 如何制作一个 PHP 时间类

> ID：16038789
> 
> 赞同：-2
> 
> 时间：2013-04-16T13:45:29.257
> 
> 标签：php

我想创建一个 PHP 类，它可以从数据库收集信息并检查执行该特定操作的时间，基于它应该能够告诉我该操作是在 10 分钟前、2 天前或 3 年前执行的以前，我做了一个 PHP 类，但有时它返回负时间，我检查并交叉检查它似乎没有任何问题，请我需要帮助

```
<?php
class ClassTimeFormat{
    protected $dateTime;

    public function __construct($dateTime){
        $this->dateTime =   $dateTime;
    }

    public function getYears(){
         $sql=  " SELECT YEAR('$this->dateTime') as year";
         $result    =   mysql_query($sql) or die(mysql_error());
         $row   =   mysql_fetch_assoc($result) or die(mysql_error());
         return $row['year'];
    }

    public function getDayofMonth(){
        $sql    =   "SELECT DAY('$this->dateTime') as day";
        $result =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['day'];
    }

    public function getDayofWeek(){
        $sql    =   "SELECT DAYNAME('$this->dateTime') as dayofweek";
        $result =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['dayofweek'];
    }

    public function getMonthName(){
        $sql    =   "SELECT MONTHNAME('$this->dateTime') as monthname";
        $result =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['monthname'];
    }

    public function getMonth(){
        $sql    =   "SELECT MONTH('$this->dateTime') as month";
        $result =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['month'];
    }

    //TIme methods
    public function getSecs(){
        $sql=   " SELECT SECOND('$this->dateTime') as seconds";
        $result =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['seconds'];
    }

    public function getMins(){
        $sql=   " SELECT MINUTE('$this->dateTime') as minutes";
        $result =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['minutes'];
    }

    public function getHour(){
         $sql=  " SELECT HOUR('$this->dateTime') as hours";
         $result    =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['hours'];

    }
    public function getSecsDiff(){
        $sql=   " SELECT EXTRACT(SECOND FROM NOW())- EXTRACT(SECOND FROM '$this->dateTime') as seconds;";
        $result =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['seconds'];
    }

    public function getMinsDiff(){
        $sql=   " SELECT EXTRACT(MINUTE FROM NOW())- EXTRACT(MINUTE FROM '$this->dateTime') as minutes;";
        $result =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['minutes'];
    }

    public function getHourDiff(){
         $sql=  " SELECT EXTRACT(HOUR FROM NOW()) - EXTRACT(HOUR FROM '$this->dateTime') as hours;";
         $result    =   mysql_query($sql) or die(mysql_error());
        $row    =   mysql_fetch_assoc($result);
        return $row['hours'];

    }

    public function getExactTime(){
        if(date('Y') > $this->getYears()){
            return (date('Y') - $this->getYears())." Years ago";
        }
        else{
            if($this->getMonth() != date('n')){
                return (date('n') - $this->getMonth())." Months ago";   
            }
            else{
                if($this->getDayofMonth() != date('j')){
                    return (date('j') - $this->getDayofMonth())." Days ago";
                }
                else{
                    if($this->getHour() != date('G')){
                        return (date('j') - $this->getHour())." Hours ago";
                    }
                    else{
                        if($this->getMins() != date('i')){
                            return (date('i') - $this->getMins())." Minutes ago";
                        }
                        else{
                            if($this->getSecs() != date('s')){
                                return (date('s') - $this->getSecs())." Seconds ago";
                            }
                            else{
                                return "Just now";
                            }
                        }
                    }
                }
            }

        }
    }
} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:09:21.210

不需要上课。如果您的时间为负数，则您可能以错误的方式减去了时间。

在这段代码中，$intTime 只是来自 time()

```
function makeNiceTime($intTime)
{
     $curTime = time();
     $strTime = '';
     if ( ($curTime-$intTime) <  (60)) //(24*60*60))
     {
        $strTime = sprintf("%d seconds ago", $curTime-$intTime);
     }
     else if ( ($curTime-$intTime) <  (60*60)) //(24*60*60))
     {
        $strTime = sprintf("%d minutes ago", ($curTime-$intTime) / 60 );
     }
     else if ( ($curTime-$intTime) <  (60*60*24)) //(24*60*60))
     {
        $strTime = sprintf("%d hours ago", ($curTime-$intTime) / (60*60) );
     }
     else if ( ($curTime-$intTime) <  (60*60*24*7)) //(24*60*60))
     {
        $strTime = sprintf("%d days ago", ($curTime-$intTime) / (60*60*24) );
     }
     else
     {  // sample: "12.22 am Sat 21-Jul 2012"
        $strTime = date("g.i a D j-M Y", $intTime);
     }
     return $strTime;
} 
```

# jquery - 获取 div 和他们的兄弟姐妹 div

> ID：16038793
> 
> 赞同：0
> 
> 时间：2013-04-16T13:45:36.227
> 
> 标签：jquery

在下面的代码中，如何获取所有带有“.divInner”类的 div 并遍历它们，但我不想显式显示一个类？我刚刚编写了需要用 class".divInner" 迭代的 div 来澄清我的问题。谢谢！

```
<div class="divOuter">
    <div class="divInner">
         <div>
              Código
         </div>
         <div>
              Nome
         </div>
    </div>
    <div class="divInner">
         <div>
         </div>
         <div>
         </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:48:24.740

对于所有人：

```
$(".divOuter > div").find("div").each(function() {

}); 
```

对于每个 .divInner，单独的 .each：

```
$(".divOuter > div").each(function() {
   $(this).find("div").each(function() {

   });
}); 
```

编辑：固定语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:48:11.207

您可以简单地选择外部的孩子`div`：

```
// Get all direct children divs of the elements with class divOuter
var divs = $('.divOuter').children('div'); 
```

您可以使用这样的选择器：

```
// Get all direct children divs of the elements with class divOuter
var divs = $('.divOuter > div'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:48:57.043

如果你有`.divOuter`类位，你可以这样做：

```
$(".divOuter").children().each(function(){ }); 
```

如果你没有那个类，你可以这样做：

```
$("div:first").children().each(function(){ }); 
```

[这是后者的示例](http://jsfiddle.net/sqZ6W/)（警告：2 个警报弹出窗口）

# sql - Oracle查询根据列值返回一行

> ID：16038800
> 
> 赞同：0
> 
> 时间：2013-04-16T13:45:59.123
> 
> 标签：sql, oracle, plsql

我目前有一个查询，它在 WHERE 子句中为应用程序选择多行数据：

```
SELECT
    APP_NAME,
    NAME,
    ROLE
FROM APP_PERSON
WHERE APP_NAME='ABCD'
ORDER BY APP_NAME,NAME 
```

这将返回：

```
 ABCD    Bob    Executive Director
 ABCD    Kim    Director
 ABCD    Sara   Associate Director
 ABCD    Tim    VP 
```

我想要的是返回一行，最低的人标题为“角色”。顺序是：副董事、董事、执行董事、副总裁（这些是唯一的选择）。

因此，对于上面的示例，我想要返回的唯一行是：

```
ABCD   Sara   Associate Director 
```

如果没有副主任，我会想要主任。如何创建一个可以执行此操作的查询。我假设某种解码，但不知道去哪里用它。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:52:47.270

解决这个问题的方法不止一种。我更喜欢明确加入优先级，然后用于`row_number()`选择您想要的行：

```
select app_name, name, role
from (SELECT APP_NAME, NAME, ROLE,
             ROW_NUMBER() over (partition by app_name order by priority) as seqnum
      FROM APP_PERSON p join
           (select 'Associate Director' as role, 1 as priority from dual union all
            select 'Director', 2 from dual union all
            select 'Executive Director', 3 from dual union all
            select 'VP', 4 from dual
           ) r
           on p.role = r.role
    ) t
WHERE APP_NAME='ABCD' and seqnum = 1
ORDER BY APP_NAME, NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:51:14.150

***顺序是：副主任、主任、执行主任、副总裁（这些是唯一的选择）***

我希望下面的查询将为您提供答案。

```
SELECT
    APP_NAME,
    NAME,
    ROLE
FROM APP_PERSON
WHERE APP_NAME='ABCD'
ORDER BY APP_NAME,NAME
where rownum = 1
order by ROLE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:11:18.143

如何使用像这样的通用表表达式：

```
WITH cte AS (
  SELECT
    app_name
    ,name
    ,role
    ,MIN(CASE role
           WHEN 'Associate Director' THEN 1
           WHEN 'Director' THEN 2
           WHEN 'Executive Director' THEN 3 
           WHEN 'VP' THEN 4) AS role_level
  FROM app_person
  WHERE app_name='ABCD'
)
SELECT 
  r.*
FROM cte r
  INNER JOIN (
    SELECT 
      name
      ,MIN(role_level) AS role_level
    FROM cte rl
    GROUP BY name) ON r.name = rl.name AND r.role_level = rl.role_level
ORDER BY 
  r.app_name
  ,r.name 
```

# vb.net - 我的代码在代码效率方面如何

> ID：16038805
> 
> 赞同：0
> 
> 时间：2013-04-16T13:46:14.223
> 
> 标签：vb.net, dynamic

我正在编写一个游戏，我的所有代码都可以工作，但是我正在寻找更有效的方法来编写我的代码。

有没有更有效的方法来编写这段特定的代码

```
 Select Case (N)
                        Case 1
                            If Player1HandGroup(14).QuantityInteger > 0 Or Player1HandGroup(17).QuantityInteger > 0 Or (Player1HandGroup(16).QuantityInteger > 0 And (IDbuster = 8 Or IDbuster = 9 Or _
                                                                                                                                                                          IDbuster = 10 Or IDbuster = 11)) Then
                                DodgeBlockDisarmDialog.ShowDialog()
                                If DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.Cancel Or DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.OK Then
                                    DodgeBlockDisarmDialog.PlayerTemp = T
                                End If

                            End If
                        Case 2
                            If Player1HandGroup(14).QuantityInteger2 > 0 Or Player1HandGroup(17).QuantityInteger2 > 0 Or (Player1HandGroup(16).QuantityInteger2 > 0 And (IDbuster = 8 Or IDbuster = 9 Or _
                                                                                                                                                                          IDbuster = 10 Or IDbuster = 11)) Then
                                DodgeBlockDisarmDialog.ShowDialog()
                                If DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.Cancel Or DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.OK Then
                                    DodgeBlockDisarmDialog.PlayerTemp = T
                                End If
                            End If
                        Case 3
                            If Player1HandGroup(14).QuantityInteger3 > 0 Or Player1HandGroup(17).QuantityInteger3 > 0 Or (Player1HandGroup(16).QuantityInteger3 > 0 And (IDbuster = 8 Or IDbuster = 9 Or _
                                                                                                                                                                          IDbuster = 10 Or IDbuster = 11)) Then
                                DodgeBlockDisarmDialog.ShowDialog()
                                If DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.Cancel Or DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.OK Then
                                    DodgeBlockDisarmDialog.PlayerTemp = T
                                End If
                            End If
                        Case 4
                            If Player1HandGroup(14).QuantityInteger4 > 0 Or Player1HandGroup(17).QuantityInteger4 > 0 Or (Player1HandGroup(16).QuantityInteger4 > 0 And (IDbuster = 8 Or IDbuster = 9 Or _
                                                                                                                                                                          IDbuster = 10 Or IDbuster = 11)) Then
                                DodgeBlockDisarmDialog.ShowDialog()
                                If DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.Cancel Or DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.OK Then
                                    DodgeBlockDisarmDialog.PlayerTemp = T
                                End If
                            End If
                        Case 5
                            If Player1HandGroup(14).QuantityInteger5 > 0 Or Player1HandGroup(17).QuantityInteger5 > 0 Or (Player1HandGroup(16).QuantityInteger5 > 0 And (IDbuster = 8 Or IDbuster = 9 Or _
                                                                                                                                                                          IDbuster = 10 Or IDbuster = 11)) Then
                                DodgeBlockDisarmDialog.ShowDialog()
                                If DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.Cancel Or DodgeBlockDisarmDialog.DialogResult = Windows.Forms.DialogResult.OK Then
                                    DodgeBlockDisarmDialog.PlayerTemp = T
                                End If
                            End If
                    End Select 
```

每种情况之间的唯一区别是：N 代表选择了哪个玩家，然后使用特定数量的 NI 决定要查看我的 Structure 组中的哪个 Quantity 整数。

如果有办法以某种方式将其减少到仅 1 个实例并在数量整数上动态添加“数字”，我觉得它真的会在整个项目中释放大量代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:02:49.540

您当前的数据结构不支持健康的做法。

如果你在同一个类中有 N 个相同类型的项目：

```
Player1HandGroup(14).QuantityInteger
Player1HandGroup(14).QuantityInteger2
Player1HandGroup(14).QuantityInteger3
Player1HandGroup(14).QuantityInteger4
Player1HandGroup(14).QuantityInteger5 
```

您应该创建一个`List(Of T)`来保存：

```
public class HandGroup

    Public Property QuantityInteger As List(Of Integer)
    ...Etc...
End Class

Player1HandGroup(14).QuantityInteger(0)
Player1HandGroup(14).QuantityInteger(1)
Player1HandGroup(14).QuantityInteger(2)
...etc 
```

这样你就可以做类似的事情：

```
if Player1HandGroup(14).QuantityInteger(N)   ... etc etc etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:03:22.720

不确定是什么类型`Player1HandGroup(14)`，但我很肯定它与`Player1HandGroup(17)`and的类型相同`Player1HandGroup(16)`。所以你可以有一个`Sub`接受类型参数的 a `Function(of YourTypeOfPlayer1HandGroup)`，然后传递`function(x) x.QuantityInteger`给它，依此类推。

```
IDbuster = 8 Or IDbuster = 9 Or IDbuster = 10 Or IDbuster = 11 
```

可以改写为：

```
{8,9,10,11}.Contains(IDbuster) 
```

所以你的代码会变成这样：

```
Select Case N
  Case 1: DoProcessingWithProperty(Function(x) x.QuantityInteger)
  Case 2: DoProcessingWithProperty(Function(x) x.QuantityInteger2)
  Case 3: DoProcessingWithProperty(Function(x) x.QuantityInteger3)
  Case 4: DoProcessingWithProperty(Function(x) x.QuantityInteger4)
  Case 5: DoProcessingWithProperty(Function(x) x.QuantityInteger5)
End Select 
```

在哪里

```
Sub DoProcessingWithProperty(f As Func(Of YourTypeOfPlayer1HandGroup))
  If f(Player1HandGroup(14)) > 0 Or f(Player1HandGroup(17)) > 0 Or _
    (f(Player1HandGroup(16)) > 0 And {8,9,10,11}.Contains(IDbuster)) Then
    DodgeBlockDisarmDialog.ShowDialog()
    If DodgeBlockDisarmDialog.DialogResult=Windows.Forms.DialogResult.Cancel Or _
       DodgeBlockDisarmDialog.DialogResult=Windows.Forms.DialogResult.OK Then
      DodgeBlockDisarmDialog.PlayerTemp = T
    End If
  End If      
End Sub 
```

这是一个非常通用的重构（影响最小），在您当前的情况下它可能不是重构的最佳方式，但它确实使它更具可读性。

# python - 使用python在mysql DB中插入值

> ID：16038808
> 
> 赞同：0
> 
> 时间：2013-04-16T13:46:32.597
> 
> 标签：python, sql, string-formatting

这是我的 Mysql 表架构

表：预订列：

```
id  int(11) PK AI
apt_id  varchar(200) 
checkin_date    date 
checkout_date   date 
price   decimal(10,0) 
deposit decimal(10,0) 
adults  int(11) 
source_id   int(11) 
confirmationCode    varchar(100) 
client_id   int(11) 
booking_date    datetime 
note    mediumtext 
Related Tables:property (apt_id → apt_id)
booking_source (source_id → id) 
```

我正在尝试使用 python 插入值。所以这里我做了什么

```
sql = "INSERT INTO `nycaptBS`.`booking` (`apt_id`, `checkin_date`, `checkout_date`, `price`,`deposite` `adults`, `source_id`, `confirmationCode`, `client_id`, `booking_date`) VALUES ('%s','%s','%s','%s','%s','%d','%d','%s','%d','%s' )"   %  (self.apt_id,self.start_at,self.end_at,self.final_price,self.deposit,self.adults,self.source_id,self.notes,self.client_id,self.booking_date,self.notes)  
x.execute(sql) 
```

但是在执行上述脚本时，我得到了错误。

```
 sql = "INSERT INTO `nycaptBS`.`booking` (`apt_id`, `checkin_date`, `checkout_date`, `price`,`deposite` `adults`, `source_id`, `confirmationCode`, `client_id`, `booking_date`) VALUES ('%s','%s','%s','%s','%s','%d','%d','%s','%d','%s' )"   %  (self.apt_id,self.start_at,self.end_at,self.final_price,self.deposit,self.adults,self.source_id,self.notes,self.client_id,self.booking_date,self.notes)  
TypeError: %d format: a number is required, not NoneType 
```

我认为我的字符串格式化程序不正确请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:58:20.013

看起来booking_date、notes、source_id（你也插入notes value 2x？）是`None`。您可以在插入之前检查/验证每个值。

也请使用参数化查询，而不是字符串格式

> 通常，您的 SQL 操作将需要使用 Python 变量中的值。你不应该使用 Python 的字符串操作来组装你的查询，因为这样做是不安全的；它使您的程序容易受到 SQL 注入攻击（有关可能出错的幽默示例，请参见[http://xkcd.com/327/ ）。](http://xkcd.com/327/)
> 
> 相反，使用 DB-API 的参数替换。放 ？作为一个占位符，无论你想在哪里使用一个值，然后提供一个值的元组作为游标的 execute() 方法的第二个参数。

就像是：

`x.execute("INSERT INTO thing (test_one, test_two) VALUES (?, ?)", (python_var_one, python_var_two,))`

# excel - 使用按钮按值过滤

> ID：16038811
> 
> 赞同：0
> 
> 时间：2013-04-16T13:46:36.777
> 
> 标签：excel, vba

我想创建一个按钮，该按钮将在特定列中查找值并按其过滤。

我有 7 列数据，在第一行我想创建类似搜索栏/列过滤按钮的东西。这个想法是在单元格 B2 中输入一个值，然后单击一个按钮以使 G 列按 B2 中的值排序。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:05:23.667

如果我正确理解“排序”是指“过滤”，那么您可以执行以下操作。

在工作表上创建一个按钮（功能区上的开发人员选项卡，插入...按钮），

![在此处输入图像描述](https://i.stack.imgur.com/Y2n7S.jpg)

出现提示时，将以下代码添加到`Button_Click()`Sub ：

```
Private Sub CommandButton1_Click() 
  [G:G].AutoFilter Field:=7, Criteria1:=Range("b2").Value 
End Sub 
```

请注意不要将按钮放在可能会被“过滤”或消失的行上。此外，如果您的“按此值排序”字段位于第 2 行，它也可能会消失。

我相信你可以弄清楚如何处理这些事情。

**问题的替代解释**

相反，如果您希望对特定列进行排序，其名称在单元格 B2 中给出，那么您的代码可能如下所示：

```
Option Compare Text
Sub Button1_Click()
Dim sortCol As Integer
Dim headerRange As Range
Dim sortRange as Range

' assuming data to be sorted is in columns E through K
set headerRange = [E1:K1] ' or wherever the headers are
sortCol = WorksheetFunction.Match([B2].Value, headerRange)
' this line for debug:
set sortRange = [E:E].Offset(, sortCol - 1)
MsgBox "you will sort by column " & sortRange.Address

With ActiveSheet
    .Range("E:K").Select
    .Sort.SortFields.Clear
    .Sort.SortFields.Add Key:=sortRange, _
        SortOn:=xlSortOnValues, _
        Order:=xlAscending, _
        DataOption:=xlSortNormal
    With .Sort
    .SetRange Range("E:K")
    .Header = xlYes
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
    End With
End With

End Sub 
```

# php - 未定义变量：总计

> ID：16038812
> 
> 赞同：-4
> 
> 时间：2013-04-16T13:46:38.533
> 
> 标签：php

我有这个问题

```
$total += $rows['price'] * $qty; 
```

注意：未定义变量：第 42 行 D:\xampp\htdocs\WBPL-MusicLightDev\inc\functions.inc.php 中的总计

```
function wbpl_showCart() {
    global $db;
    $cart = $_SESSION['cart'];
    if ($cart) {
        $items = explode(',', $cart);
        //$contents = array();
        foreach ($items as $item) {
            $contents[$item] = (isset($contents[$item])) ? $contents[$item] + 1 : 1;
        }
        echo '<form action="index.php?page=cart&action=update" method="post" id="cart">';
        echo '<table border=0 align="center" class="table table-bordered">';

        foreach ($contents as $id => $qty) {
            $sql = "SELECT * from wbpl_product WHERE kd_product = '$id'";
            $result = mysql_query($sql) or die(mysql_error());
            $rows=mysql_fetch_array($result);
            //extract($row);

            echo    '<tr>
                        <td>Brand</td>
                        <td colspan="4">'. $rows['kd_product'] .'</td>
                    <tr>
                    <tr>
                        <td>Brand</td>
                        <td colspan="4">'. $rows['nama_brand'] .'</td>
                    <tr>
                    <tr>
                            <td>Instrument Type</td>
                            <td colspan="4">'. $rows['nama_instype'] .'</td>
                    </tr>
                    <tr">
                    <td rowspan="2">Price</td>
                    <td rowspan="2">Rp. ' . $rows['price'] . '</td>
                    <td rowspan="2"><input type="text" name="qty' . $id . '" value="' . $qty . '" size="2" maxlength="3" /></td>

                    <td rowspan="2">Rp. ' . ($rows['price'] * $qty) . '</td>

                    <td><a href="index.php?page=cart&action=delete&id=' . $id . '" class="btn btn-danger">Hapus</a></td>
                    </tr>
                    <tr><td><br></td></tr>';
            $total += $rows['price'] * $qty;
        }
        echo '</table>';
        $qty = getQty();

        echo '<p>Sub Total: <strong> Rp. ' . $total . '</strong></p>';

        //session_register('totalbayar');
        $_SESSION['totalbayar'] = $total;
        echo '<div><button type="submit" class="btn btn-primary">Update cart</button></div>';
        echo '</form>';
    } else {
        echo '<p>Keranjang belanja masih kosong.</p>';
    }
    //return join('', $output);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:50:57.857

你不能在不存在的值上添加一些东西；第一个调用是： null += $rows['price'] * $qty; 这是不可能的，所以添加

> $总计 = 0;

在你的 foreach 循环之前！

```
 function wbpl_showCart() {
    global $db;
    $cart = $_SESSION['cart'];
    if ($cart) {
        $items = explode(',', $cart);
        //$contents = array();
        foreach ($items as $item) {
            $contents[$item] = (isset($contents[$item])) ? $contents[$item] + 1 : 1;
        }
        echo '<form action="index.php?page=cart&action=update" method="post" id="cart">';
        echo '<table border=0 align="center" class="table table-bordered">';

        $total = 0;
        foreach ($contents as $id => $qty) {
            $sql = "SELECT * from wbpl_product WHERE kd_product = '$id'";
            $result = mysql_query($sql) or die(mysql_error());
            $rows=mysql_fetch_array($result);
            //extract($row);

            echo    '<tr>
                        <td>Brand</td>
                        <td colspan="4">'. $rows['kd_product'] .'</td>
                    <tr>
                    <tr>
                        <td>Brand</td>
                        <td colspan="4">'. $rows['nama_brand'] .'</td>
                    <tr>
                    <tr>
                            <td>Instrument Type</td>
                            <td colspan="4">'. $rows['nama_instype'] .'</td>
                    </tr>
                    <tr">
                    <td rowspan="2">Price</td>
                    <td rowspan="2">Rp. ' . $rows['price'] . '</td>
                    <td rowspan="2"><input type="text" name="qty' . $id . '" value="' . $qty . '" size="2" maxlength="3" /></td>

                    <td rowspan="2">Rp. ' . ($rows['price'] * $qty) . '</td>

                    <td><a href="index.php?page=cart&action=delete&id=' . $id . '" class="btn btn-danger">Hapus</a></td>
                    </tr>
                    <tr><td><br></td></tr>';
            $total += $rows['price'] * $qty;
        }
        echo '</table>';
        $qty = getQty();

        echo '<p>Sub Total: <strong> Rp. ' . $total . '</strong></p>';

        //session_register('totalbayar');
        $_SESSION['totalbayar'] = $total;
        echo '<div><button type="submit" class="btn btn-primary">Update cart</button></div>';
        echo '</form>';
    } else {
        echo '<p>Keranjang belanja masih kosong.</p>';
    }
    //return join('', $output);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:48:13.067

声明`$total`变量：

```
$total = 0; 
```

在进入 foreach 循环之前

问题是：

`$total += ...;`表示添加`...`到 的值`$total`，但`$total`在第一次迭代时尚未定义导致通知的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:48:01.407

```
$total = 0; 
```

并在使用 $total 之前设置它可以解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:48:08.330

`$x += y`意味着首先读取变量值然后添加一些东西然后（重新）分配结果。在 foreach 循环的第一次迭代期间，执行运算符时没有`$total`要读取的变量`+=`，因此会发出警告。
在循环之前初始化变量。

```
$total = 0;
foreach ($contents as $id => $qty) {
  [...]
  $total += something; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T13:48:21.643

要使用`+=`运算符，您必须已经定义了左侧变量。`$total`您可以通过在使用前进行初始化来解决此问题`$total += ...`：

```
$total = 0;
foreach (...)
    $total += ... 
```

这是因为`$total += $x`在内部转换为`$total = $total + $x`，因此第一次使用时，`$total` 未定义。

# .net - 有关调试器使用的调试引擎的信息

> ID：16038814
> 
> 赞同：9
> 
> 时间：2013-04-16T13:46:44.570
> 
> 标签：.net, visual-studio, envdte, vsix, vspackage

在 Visual Studio 中，如果要将调试器附加到任何进程，则可以选择要使用的某些特定引擎（代码类型）或一组引擎：

![在此处输入图像描述](https://i.stack.imgur.com/zyHb3.png)

接下来（在您选择任何引擎和进程之后），如果您单击*附加*按钮，调试器附加操作将启动。然后还会触发与调试相关的事件。`IDebugEventCallback2::Event`可用于[抓取](http://msdn.microsoft.com/en-us/library/bb162146.aspx)此类事件（例如，提取调试器实际附加到的**进程的名称）：**

```
public int Event(IDebugEngine2 engine, IDebugProcess2 process, IDebugProgram2 program,
                 IDebugThread2 thread, IDebugEvent2 debugEvent, ref Guid riidEvent, 
                 uint attributes)
{
    if (debugEvent is IDebugProcessCreateEvent2)
    {
        string processname;
        if(process != null)
            process.GetName((uint) enum_GETNAME_TYPE.GN_FILENAME, out processname);
        //...
    }
} 
```

有没有类似的方法来获取有关已选择**引擎**的一些信息？

**更新：**更详细的代码：

```
public class DebugEventsHunter : IVsDebuggerEvents, IDebugEventCallback2
{
    private readonly IVsDebugger _debugger;
    private uint _cookie;

    public DebugEventsHunter(IVsDebugger debugger) { _debugger = debugger; }

    public void Start()
    {
        _debugger.AdviseDebuggerEvents(this, out _cookie);
        _debugger.AdviseDebugEventCallback(this);
    }   

    public int Event(IDebugEngine2 engine, IDebugProcess2 process, IDebugProgram2 program,
                     IDebugThread2 thread, IDebugEvent2 debugEvent, ref Guid riidEvent, uint attributes)
    {
        if (debugEvent is IDebugProcessCreateEvent2)
        {
            // get process name (shown before) 
        }               
        if (debugEvent is IDebugEngineCreateEvent2)
        {
            // why execution flow never enters this scope?
            IDebugEngine2 e;
            ((IDebugEngineCreateEvent2)debugEvent).GetEngine(out e);
        }
        // engine parameter is also always null within this scope
        return VSConstants.S_OK;
    }

    public int OnModeChange(DBGMODE mode) { /*...*/ }
} 
```

和用法：

```
var debugger = GetService(typeof(SVsShellDebugger)) as IVsDebugger;
var hunter = new DebugEventsHunter(debugger);
hunter.Start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-26T03:06:24.170

当调试引擎启动进程或附加到现有进程时，它将[`IDebugLoadCompleteEvent2`](http://msdn.microsoft.com/en-us/library/bb145834.aspx)及时发送事件。您可以使用此事件来准确确定选择了哪些调试引擎进行调试。

**编辑：**要确定调试引擎的名称，您可以使用`IDebugProgram2`包含在上述事件中的实例，并调用该[`IDebugProgram2.GetEngineInfo`](http://msdn.microsoft.com/en-us/library/bb145854.aspx)方法。此方法提供调试引擎的名称和 ID。请注意，调试引擎的名称可能与您在调试器对话框中看到的名称不匹配，在这种情况下，您需要使用您自己的映射实现将此方法返回的规范名称转换为“友好”名称。

# mediaelement.js - 如何使用 MediaElementJS 选择源（1080p、720p、480p）？

> ID：16038817
> 
> 赞同：5
> 
> 时间：2013-04-16T13:46:47.573
> 
> 标签：mediaelement.js

我刚刚找到了 MediaElementJs，我必须说它非常好用。现在，我想知道如何（或者更确切地说是否）可以提供不同分辨率（1080p、720p、480p）的同一视频的多个媒体源，并有一个按钮让用户在这些源之间进行选择（比如一个 Youtube 使用）。MediaElementJS 是否带有这样的功能，还是我必须自己编写一个才能使其工作？

提前致谢！

# php - 替换使用正则表达式提供的字符串中的日期格式

> ID：16038818
> 
> 赞同：1
> 
> 时间：2013-04-16T13:46:47.723
> 
> 标签：php, regex, date

我正在尝试更改可能包含日期的字符串，例如

```
"This is the test string with 22/12/2012\. 23/12/12 could anywhere in the string" 
```

我需要更改上面的字符串，以便日期格式为 dmy 即

```
"This is the test string with 22-12-2012\. 23-12-12 could appear anywhere in the string" 
```

**编辑：** 请注意，日期可能会改变年份，即 2012 年或 12 年可以在时间使用，即 20/06/2012、20/06/12。只有年份可以是 2 位或 4 位数字，其余部分相同。

任何帮助将不胜感激。

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:53:07.293

像这样使用 preg_replace：

```
$repl = preg_replace('~(\d{2})/(\d{2})/(\d{2,4})~', '$1-$2-$3', $str); 
```

### 现场演示：http: [//ideone.com/7HDNZa](http://ideone.com/7HDNZa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:53:34.817

```
$string = preg_replace("/([0-9]{2})\/([0-9]{2})\/([0-9]{2,4})/", "$1-$2-$3", $string); 
```

正则表达式将找到 3 批 2 个数字（或 2x2 + 1x4），由 /'s 分隔，并用 -'s 分隔的相同数字替换它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:02:04.660

你可以尝试这样的事情：

```
preg_replace('~\b([0-2]?[1-9]|3[01])/(0?[1-9]|1[0-2])/(?=(?:\d\d|\d{4})\b)~', '$1-$2-', $str); 
```

应仅匹配有效日期。是否匹配前缀`0`不存在的日期，例如，`4/16/13`如果不希望这样做，请删除前两个问号（在`[0-2]?`和中`0?`）

# c# - 如何使用 .NET Reflection 查找类的所有直接子类

> ID：16038819
> 
> 赞同：25
> 
> 时间：2013-04-16T13:46:49.257
> 
> 标签：c#, .net, reflection

考虑以下类层次结构：基类 A、从 A 继承的类 B 和 C，以及从 B 继承的类 D。

```
public class A     {...}
public class B : A {...}
public class C : A {...}
public class D : B {...} 
```

我可以使用以下代码查找 A 的所有子类，包括 D：

```
var baseType = typeof(A);
var assembly = typeof(A).Assembly;
var types = assembly.GetTypes().Where(t => t.IsSubclassOf(baseType)); 
```

但是我只需要找到 A 的直接子类（例如 B 和 C）并排除所有不直接从 A 继承的类（例如 D）。知道怎么做吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-16T13:49:15.373

对于每种类型，检查是否

```
type.BaseType == typeof(A) 
```

或者，您可以将其直接内联：

```
var types = assembly.GetTypes().Where(t => t.BaseType == typeof(baseType)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T13:50:06.250

为此使用[Type.BaseType](http://msdn.microsoft.com/en-us/library/system.type.basetype.aspx)。从文档中：

> 基类型是当前类型直接继承的类型。Object 是唯一没有基类型的类型，因此 null 作为 Object 的基类型返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T13:49:42.810

只需适当地比较它们：

```
var types = assembly.GetTypes().Where(t => t.BaseType == baseType); 
```

# android - android 应用程序：播放嵌入在 webview 上的 youtube 视频

> ID：16038824
> 
> 赞同：0
> 
> 时间：2013-04-16T13:46:58.340
> 
> 标签：android, webview, youtube, embed, playing

我阅读了几个关于我的问题的任务，但我不知道该怎么做。我有嵌入 youtube 视频的 webview。当我点击时，我有声音，但没有视频。我添加这个：

```
content.setWebChromeClient(new WebChromeClient() {}); 
```

但它不起作用！

这是我的网络视图：

```
 content = new WebView(this);
    content.setLayoutParams(new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.FILL_PARENT,
            Gravity.CENTER
    ));
    content.setHorizontalScrollBarEnabled(false);
    content.setVerticalScrollBarEnabled(false);
    content.getSettings().setJavaScriptEnabled(true);
    content.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    content.getSettings().setBuiltInZoomControls(false);
    content.getSettings().setSupportZoom(true);
    content.getSettings().setUseWideViewPort(true);
    content.getSettings().setPluginsEnabled(true);
    content.getSettings().setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);
    content.getSettings().setSavePassword(true);
    content.getSettings().setSaveFormData(true);
    content.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);

    content.setWebChromeClient(new WebChromeClient() {

    });
    content.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            close();
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            view.setVisibility(View.VISIBLE);
            showLayout();
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            Uri overrideUrl = null;
            Uri currentUrl = Uri.parse(url);
            if (data.getFormat().equals(Format.IMAGE)) {
            ...
            }
            if (overrideUrl != null) {
                Intent browser = new Intent(Intent.ACTION_VIEW);
                browser.setData(overrideUrl);
                startActivity(browser);
                return false;
            }
            view.loadUrl(url);
            return true;
        }
    });

    layout.addView(content);
    content.loadData(data.getHtml(), "text/html", "UTF-8"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:52:06.883

将此添加到您的清单中

```
<application android:hardwareAccelerated="true" ... /> 
```

# file-permissions - conf/hadoop-env.sh 文件以只读模式打开

> ID：16038830
> 
> 赞同：1
> 
> 时间：2013-04-16T13:47:14.843
> 
> 标签：file-permissions, chown

那么我正在尝试配置一个单节点集群hadoop。现在我已经创建了一个用户hadoop，并且我已经在我的usr/local/hadoop目录中安装了hadoop。

然后我完成了以下命令

```
chown hadoop:hadoop hadoop hadoop-1.0.4
ln -s hadoop-1.04/ hadoop. 
```

结果，当我执行 ls -l 时，它显示以下内容

```
drwxr-xr-x  2 root   root   4096 Jun 16  2012 bin
drwxr-xr-x  2 root   root   4096 Jun 16  2012 etc
drwxr-xr-x  2 root   root   4096 Jun 16  2012 games
lrwxrwxrwx  1 root   root     13 Apr 16 13:20 hadoop -> hadoop-1.0.4/
drwxr-xr-x 13 hadoop hadoop 4096 Oct  3  2012 hadoop-1.0.4
drwxr-xr-x  2 root   root   4096 Jun 16  2012 include
drwxr-xr-x  3 root   root   4096 Jun 16  2012 lib
lrwxrwxrwx  1 root   root      9 Aug 22  2012 man -> share/man
drwxr-xr-x  2 root   root   4096 Jun 16  2012 sbin
drwxr-xr-x  6 root   root   4096 Jun 16  2012 share
drwxr-xr-x  2 root   root   4096 Jun 16  2012 src 
```

所以 hadoop 1.0.4 有 hadoop 作为用户组。

现在，当我使用进入我的 hadoop 组时

苏-hadoop

所以我可以更改我的 conf/hadoop-env.sh 文件，但它没有发生

hadoop@iu1:/usr/local$ vi conf/hadoop-env.sh

文件以只读模式打开

我认为它应该是可编辑模式

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:11:34.887

您需要`chown`递归：

```
chown -R hadoop:hadoop hadoop hadoop-1.0.4 
```

要验证文件权限，请执行

```
ls -l /usr/local/hadoop/conf/ 
```

# html - 容器扩展上的 CSS 强制换行

> ID：16038831
> 
> 赞同：0
> 
> 时间：2013-04-16T13:47:15.600
> 
> 标签：html, css

**我有的：**

HTML：

```
<div class="container">
    <div class="text">
        Some long text
    </div>
    <div class="extendable">
        <img>
    </div>
</div> 
```

CSS：

```
.container {
    float: right;
    min-width: 10em;
    padding-left: 1em;
    .text {
        padding: 0.3em;
    }
} 
```

每个块都有动态的宽度和高度。
[http://jsfiddle.net/vZ4eA/](http://jsfiddle.net/vZ4eA/)

**我想要**的：如果内容太大
`.text`，应该无法扩展。`.container`应该有一个强制换行符。
`.extendable`另一方面，`container`如果内容超过宽度（行为正常），则应该变大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:56:02.050

您需要设置一个固定的宽度`.text`，然后使用`word-break:break-all;`

使用 jQuery，您可以将 的宽度设置`.text`为`.extendable`.

```
 var exWidth = $('.extendable').css('width');
 $('.text').css('width', exWidth); 
```

[http://jsfiddle.net/vZ4eA/16/](http://jsfiddle.net/vZ4eA/16/)

**编辑：仅 CSS**

你可以试试放在`.text`里面`.extendable`。

见这里：http: [//jsfiddle.net/vZ4eA/18/](http://jsfiddle.net/vZ4eA/18/)

**编辑 2：CSS：**

在这个答案[https://stackoverflow.com/a/7231607/1399670](https://stackoverflow.com/a/7231607/1399670)的帮助下，我更新了小提琴以满足您的要求。

[http://jsfiddle.net/vZ4eA/20/](http://jsfiddle.net/vZ4eA/20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:49:47.560

您可以将 a`max-width`用于文本`nowrap`

```
.text{
padding: .3em;
border: 1px solid red;
max-width: 200px;
word-break: break-all;
display: block;

} 
```

[**工作示例**](http://jsfiddle.net/vZ4eA/8/)

**编辑：**

为了回应下面的评论之一，`max-width`应该可能是一个*动态*值，以便使用容器的动态宽度。`javascript`您可以使用or轻松实现此行为`jQuery`

**jQuery**

我建议你查看[这个插件](http://benalman.com/projects/jquery-resize-plugin/)来处理你的重新调整大小`div`

```
$("#div").resize(function(e){
    $(".text").css({"max-width" : $(this).css("max-width") });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:53:57.610

我认为适用的唯一方法是在 .text 上设置 max-width

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:57:51.480

您可能必须在 .container 调整大小时动态更新 .text 的最大宽度；具体来说，在页面加载和视口调整大小时。您可以[使用 jQuery](https://stackoverflow.com/questions/599288/cross-browser-window-resize-event-javascript-jquery)来做到这一点。

# c++ - c ++二叉树，需要一种方法来返回单词所在的行号，而不是单词编号

> ID：16038832
> 
> 赞同：0
> 
> 时间：2013-04-16T13:47:21.133
> 
> 标签：c++, binary-tree

这是我目前的代码。现在我正在返回读取文本文件时出现的单词编号，我需要做的是返回该单词所在的行号，并将其打印在我返回到控制台的每个单词旁边。所以不是“你好世界”出现，你好 - 1 世界 -2，我需要 - 你好 -1 世界 -1

需要帮助弄清楚如何做到这一点。

```
#include <stdio.h>
#include <string>
#include <stdlib.h>
#include <iostream>
#include <fstream>
#include <sstream>
#include <istream>
#include <conio.h>

    struct node
    {
        int key_value, lineNumber;
        char *word;
        struct node *left,*right;
    };

    struct node *inserttree(struct node *tree,char *s, int lineNumber)
    {
        int i;

      if (tree==NULL)
      {
        if ( ( tree = (struct node *) malloc( sizeof(struct node) ) ) !=NULL)
        {
          if ((tree->word=(char *) malloc(strlen(s)+1))==NULL)
          {
              free(tree);
              tree=NULL;
          }
          else
          {
              tree->left=NULL;
              tree->right=NULL;
              strcpy(tree->word,s);
                tree->lineNumber = lineNumber ;
          }
        }
      }

      else if ((i=strcmp(tree->word,s))>0)
      {
          tree->left=inserttree(tree->left,s, lineNumber);
      }
      else if (i<0)
      {
          tree->right=inserttree(tree->right,s, lineNumber);
      }

      return tree;
    }

    void printtree(struct node *tree)
    {

        if (tree!=NULL)
        {
            printtree(tree->left);
            printf("%s %d\n",tree->word, tree->lineNumber);

            printtree(tree->right);
        }
    }

    //int search(struct node *tree)
    //{
    //  int key;
    //  tree->right->key_value = key;
    //  return key;
    //}

    void freetree(struct node *tree)
    {
        if (tree!=NULL)
        {
            free(tree->word);
            freetree(tree->left);
            freetree(tree->right);
            free(tree);
        }
    }

    int main(void)
    {
        FILE *f;
        char s[1024]; /*assumes a word cannot be longer than 1023 chars*/
        struct node *tree=NULL;
        int line = 1;

    if ((f=fopen("Test.txt","r"))==NULL)
        printf("Unable to open Test.txt\n");
        else
        {
            while (fscanf(f,"%1023s",s)!=EOF)
            tree=inserttree(tree,s, line++);
            fclose(f);

            printtree(tree);  //moved from inserttree
            freetree(tree);
        }

    system("pause");
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:52:29.970

您可以向 printtree() 方法添加一个计数器变量，并将其设为 0 作为初始值：

```
int count = 0;
void printtree(struct node *tree, int count)
{

    if (tree!=NULL)
    {
        printtree(tree->left, ++count);

        printf("%s %d\n",tree->word, count-1);

        printtree(tree->right, count);
    }
} 
```

# ios - 使用 RestKit 0.20 初始化核心数据

> ID：16038834
> 
> 赞同：3
> 
> 时间：2013-04-16T13:47:42.453
> 
> 标签：ios, objective-c, core-data, restkit, restkit-0.20

我正在尝试将使用 Restkit 0.1 的现有应用程序更新到 0.20，但是在设置 Core Data Stack 时遇到了一些问题，因为它遇到了异常。

我的 AppDelegate 上有以下代码：

```
 /*
     Complete Core Data stack initialization
     */
    NSError *error = nil;
    NSURL *modelURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"AppModel" ofType:@"momd"]];
    // NOTE: Due to an iOS 5 bug, the managed object model returned is immutable.
    NSManagedObjectModel *managedObjectModel = [[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL] mutableCopy];
    RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
    [managedObjectStore createPersistentStoreCoordinator];
    NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"TSI.sqlite"];
    NSString *seedPath = [[NSBundle mainBundle] pathForResource:@"RKSeedDatabase" ofType:@"sqlite"];
    //NSPersistentStore __unused *persistentStore = [managedObjectStore addInMemoryPersistentStore:&error];
    NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:seedPath withConfiguration:nil options:nil error:&error];
    NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error);
    /*
     RESTKIT
    */
    // Create the managed object contexts
    [managedObjectStore createManagedObjectContexts];
     managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext]; 
```

然后我的映射在 TableViewController 中设置为：

```
 RKManagedObjectStore *managedObjectStore = [RKManagedObjectStore defaultStore];
    NSManagedObjectContext* context = [managedObjectStore mainQueueManagedObjectContext];

    NSString *rootKeyPath;
    rootKeyPath = @"body";
    NSString *endpoint = @"account/login.json";
    RKEntityMapping *entityMapping = [RKEntityMapping mappingForEntityForName:@"User" inManagedObjectStore:managedObjectStore];
    [entityMapping addAttributeMappingsFromDictionary:@{
     @"api_token":@"token",
     @"email":   @"email",
     @"first_name":  @"name",
     @"last_name":   @"surname"
     }];
    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:entityMapping pathPattern:endpoint keyPath:rootKeyPath statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[TSI_SERVER stringByAppendingString:endpoint]]];
    RKManagedObjectRequestOperation *managedObjectRequestOperation = [[RKManagedObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[ responseDescriptor ]];
    //managedObjectRequestOperation.managedObjectContext = self.managedObjectContext;
    [[NSOperationQueue currentQueue] addOperation:managedObjectRequestOperation]; 
```

但是，每当我在加载视图后尝试检索数据时，我都会在控制台中收到以下错误（出于安全原因，我已经屏蔽了我的应用程序使用的名称和服务器）：

```
2013-04-16 14:41:50.576 <<MyApp>>[4525:907] I restkit:RKLog.m:34 RestKit logging initialized...
2013-04-16 14:41:51.009 <<MyApp>>[4525:907] [HEATMA.PS] Running Heatma.ps version 4.0.2\. For help go to www.heatma.ps/support 
2013-04-16 14:42:54.464 <<MyApp>>[4525:3907] *** Assertion failure in
-[RKManagedObjectResponseMapperOperation performMappingWithObject:error:], /Users/manuel_matute/Code/RestKit/Code/Network/RKResponseMapperOperation.m:358 
2013-04-16 14:42:59.876 <<MyApp>>[4525:3907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Unable to perform mapping: No `managedObjectContext` assigned. (Mapping response.URL = http://www.<<myserver>>.com/rest/account/login.json)'
 *** First throw call stack: (0x32a7b2a3 0x3a7a397f 0x32a7b15d 0x33350ab7 0xe37e1 0xe1b97 0x333085c1 0x33380be3 0x3abbb11f 0x3abbf961 0x3abbfac1 0x3abefa11 0x3abef8a4) libc++abi.dylib: terminate called throwing an exception 
```

有谁知道可能是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T09:58:40.873

解决了！

看起来我需要将上下文显式分配给 managedObjectRequestOperation 为：

```
managedObjectRequestOperation.managedObjectContext = context; 
```

# objective-c - NSSreamstatus 是否我正在获取数据

> ID：16038838
> 
> 赞同：1
> 
> 时间：2013-04-16T13:47:55.550
> 
> 标签：objective-c, nsstream, nsinputstream

我有 NSInputStream，我想检查我是否从另一端获取数据，我读取了 NSStreamStatus，我发现“NSStreamStatusReading”用于检查读取的数据。

我试图检查该状态，但它不起作用任何人都可以告诉我如何检查我是否正在获取数据..代码：

```
if([inputStream streamStatus]==NSStreamStatusReading)
{
NSlog(@"server is sending");
}
else
{
NSlog(@"no"); 
```

## }

它在发送时工作，但当我停止服务器时，它没有更新。

# c++ - Qt C++ QDataStream 读取数字 13

> ID：16038843
> 
> 赞同：0
> 
> 时间：2013-04-16T13:48:02.050
> 
> 标签：c++, qt, data-stream

我想用 QDataStream 写一个二进制文件。问题出在下面的代码上，当我写 my_string = "13" 时，我读到 0 ；当 my_string 不等于 "13" ("12", "14", "20", ...) 时，我读取实际值 (12, 14, 20, ...)。有谁知道为什么我只有数字 13 才有这个问题。

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    //open the file to write
    QFile file1("test");
    if (!file1.open(QIODevice::WriteOnly | QIODevice::Text))
        return;
    QDataStream stream1(&file1);
    QString my_string = "13";

    qint8 val8 = my_string.toInt();
    stream1 << val8;

    file1.close();

    //open the file to read
    QFile file2("test");
    file2.open(QIODevice::ReadOnly | QIODevice::Text);

    QDataStream stream2(&file2);

    qint8 val2;
    stream2>> val2;

    QListWidgetItem *item = new QListWidgetItem;
    item->setText(QString::number(val2));
    ui->listWidget->addItem(item);

    file2.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:51:47.633

您以文本模式打开文件并写入二进制值。代码为 13 (0xD) 的字符是换行符。通过删除 QIODevice::Text 以二进制模式打开文件，它应该开始工作。

# javascript - Ajax 文件上传进度事件未触发

> ID：16038844
> 
> 赞同：3
> 
> 时间：2013-04-16T13:48:07.337
> 
> 标签：javascript, ajax, firefox

我通过ajax请求上传文件，只需将它们分成块。

问题是进度事件，Firefox 出于某种原因不想触发该事件，这是我的代码（大部分不必要的代码已删除）

```
//slice file
if(file.mozSlice){
    chunk   = file.mozSlice(startByte, endByte);
}else if(file.slice){
    chunk   = file.slice(startByte, endByte);
}else{
    chunk   = file;
    isLast  = true;
}

var xhr = new XMLHttpRequest();

xhr.upload.addEventListener('progress', function(e){
    console.log('progress');
}, false);

xhr.upload.addEventListener('error', function(e){
    console.log("upload error!");
});

xhr.onreadystatechange = function(e){
    if(this.readyState == 4 && this.status == 200){
        //this chunk has bee uploaded, proceed with the next one...
    }
}

xhr.open('POST', "", true);

xhr.setRequestHeader('Cache-Control', 'no-cache');
xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');//header
xhr.setRequestHeader('Content-Type', 'application/octet-stream');//generic stream header
xhr.send(chunk); 
```

我确信我没有犯任何大错误，因为 chrome 没有任何问题，所以一定有一些与 Firefox 相关的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-31T04:29:06.380

对于**铬**：

```
xhr.upload.addEventListener('progress', function(e) {
    console.log('progress');
}, false); 
```

对于**火狐**：

```
xhr.addEventListener('progress', function(e) {
    console.log('progress');
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:51:30.403

我检查了我的实现，我在调用*后添加了**进度*事件，也许可以解决它？*`xhr.open`*

 *在此处尝试第二个代码示例：[https](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Monitoring_progress) ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Monitoring_progress有效吗？*

# jquery-plugins - 使用 Intro.js 和 jquery.cookie 仅在每个 url 的第一个视图上显示介绍

> ID：16038846
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:48:08.857
> 
> 标签：jquery-plugins, jquery-cookie, intro.js

我`intro.js`在 3 个不同的 url 中使用功能。我将其限制为仅在用户第一次加载页面时向他们显示：

```
unless $.cookie("firstview")? introJs().start()
$.cookie "firstview", "firstSet", expires: 365 
```

但是一个 cookie 会阻止所有后续 url`intro.js`第一次显示它们。我试过了：

```
unless $.cookie("page1")?
introJs(".page1").start()
$.cookie "page1", "firstSet", expires: 365, page: "/page1"

unless $.cookie("page2")?
introJs(".page2").start()
$.cookie "page2", "firstSet", expires: 365, page: "/page2" 
```

但仍然只会显示第一页。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:50:08.590

这很容易实现。

首先，您应该向用户显示介绍，然后在`introJs.onexit()`回调时为浏览器设置一个cookie（[见此处](https://github.com/usablica/intro.js#introjsonexitprovidedcallback)），当用户再次访问您的页面时，您可以检查cookie以防止再次显示介绍。

# iphone - 如何在 iOS 5 中使用 UICollectionView

> ID：16038847
> 
> 赞同：0
> 
> 时间：2013-04-16T13:48:10.550
> 
> 标签：iphone

它是否在 IOS 5 中工作 UICollictionview 错误由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 NSLayoutConstraint 的类”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:02:18.467

UICollectionView 在 IOS5 中不直接可用。

然而，有一个很好的开源控件可以在 IOS5 中添加 UICollectionView 支持。它被称为 PSCollectionView，你可以在这里找到它： [PSTCollectionView](https://github.com/steipete/PSTCollectionView)

它是一个在 IOS5 上模拟 UICollectionView 并在 IOS6 上通过的库。非常好，效果很好。

祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T13:49:48.857

检查[UICollectionView的可用性](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)

**可用性**适用于 iOS 6.0 及更高版本。

您可以使用[PSCollectionView](https://github.com/ptshih/PSCollectionView)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T14:44:08.300

事实上，问题可能不是由于`UICollectionView`在 iOS5 中不可用。看起来好像您在 Interface Builder 中使用约束。正是这*导致*了问题。

所以，有两件事：

1.  使用 PSTCollectionView 之类的东西[在](https://github.com/steipete/PSTCollectionView)iOS5 中添加 UICollectionView 支持
2.  关闭约束并恢复使用“弹簧和支柱”来调整/重新定位您的子视图

# mysql - 在尝试授予权限时检查数据库是否存在

> ID：16038849
> 
> 赞同：1
> 
> 时间：2013-04-16T13:48:12.313
> 
> 标签：mysql, perl

我正在尝试在 perl 脚本中构建一些函数来创建、删除和授予对 mysql 数据库的权限。

目前，我尝试授予用户对指定数据库的权限，如下所示：

```
use DBI;
my $dbname=$_[1];
my $dbh = DBI->connect("dbi:mysql:", $sqluser,$sqlpass) or die "Unable to connect: $DBI::errstr\n";
.....
my $username=@unp[0];
my $dbname=@unp[1];         
my $db_com="GRANT ALL ON ".$dbname.".* TO '".$username."'\@'localhost'";
my $sth = $dbh->prepare($db_com);
$sth->execute 
or die "SQL Error: $DBI::errstr\n";
print "Permissions granted\n"; 
```

如果用户存在，则此方法有效。

在为 CREATE USER 和 DROP USER 尝试类似代码时，它可以有效地工作，根据请求创建或删除它们，或者如果用户不存在则抛出 mysql 语法错误。但是在授予权限时，即使数据库不存在，命令也会执行，这让我感到沮丧。

实际上在 mysql 提示符下，如果执行了 sql 查询，它会返回：

```
Query OK, 0 rows affected (0.00 sec) 
```

我需要一种方法来发现数据库是否不存在，并提示用户提供正确的数据库名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:25:00.590

先做`show databases`一个查询，然后在做 GRANT 之前在其中查找名称

在不存在的数据库上授予权限是完全可以接受的，所发生的只是`mysql`数据库中的表正在被写入

# asterisk - iptables修改源ip。POSTROUTING 链日志中没有任何内容

> ID：16038852
> 
> 赞同：2
> 
> 时间：2013-04-16T13:48:15.857
> 
> 标签：asterisk, iptables, nat

这是一张小图

```
Asterisk eth1 10.254.254.2/28-------------  Many Good  Guys
eth1:1 192.168.83.5/32-----------  192.168.59.3 Bad Guy Peer 
```

我有一个星号，它与几个同行相连。其中一些通过 eth1 连接，其中一个通过别名 eth1:1 连接。然后我的星号向同行发送邀请，它与 eth1 源一起使用。所以对于坏人，我需要将我的源 ip 更改为 192.168.83.5 据我所知可以使用 iptables 完成。

所以我尝试了规则

> iptables -t nat -A POSTROUTING -s 10.254.254.2 -d 192.168.59.3 -j SNAT --to 192.168.83.5

什么都没发生。当我登录时，我可以看到在 INPUT 和 OUTPUT 链中发送数据包：

> iptables -t filter -A OUTPUT -o eth1 -s 10.254.254.2 -d 192.168.59.3 -j LOG --log-level 7 --log-prefix "OUTPUT"
> 
> iptables -t filter -A INPUT-i eth1 -s 192.168.59.3 -d 192.168.83.5 -j LOG --log-level 7 --log-prefix "OUTPUT"

但我在 POSTROUTING 链中看不到任何内容：

> iptables -t nat -A POSTROUTING -s 10.254.254.2 -d 192.168.59.3 -j LOG --log-level 7 --log-prefix "POSTROUTING"

那就是我对 SNAT（（（

同时来自其他对等点的流量在 POSTROUTING 日志中可见。会是什么？任何想法，愿望，踢球将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:42:41.987

已经找到解决办法了！！我没有找到让我的 iptables 工作的方法。但知道我知道如何在没有 iptables 的情况下做到这一点。所以一般来说，我的任务是修改|屏蔽|用 eth1:1 ip 替换我的 eth1 源 ip。顺便说一句，我使用 CentOS 5.8 并且有一个命令：

> ip 路由添加

`route`与命令不同，它使您能够指向 scr 地址。

所以

> ip route add 192.168.59.3/32 via 10.254.254.1 dev eth1 src 192.168.83.5

正在做我需要的。感谢您的关注！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:31:25.423

那不管用。原因很简单，星号会设置在数据包源地址=eth1的地址。

您可以启动另一个星号相同的主机（使用其他配置目录）。对不起，我不知道其他简单的变体。

# python - django send_mail 554 - 中继访问被拒绝

> ID：16038853
> 
> 赞同：1
> 
> 时间：2013-04-16T13:48:16.373
> 
> 标签：python, django, email

我用谷歌搜索了很多关于这个问题的信息，我在很多地方都发现了这个错误，但我的问题没有答案。

我有一个新安装的 (debian) 系统，它基本上只包含一个 django (1.3.0) 安装，以及一个非常糟糕的后缀。如果我这样做，后缀正在工作

```
echo sth | mail somebody@provider.com 
```

它完美地到达了。

我尝试使用 django send_mail 之类的

```
from django.core.mail import send_mail

send_mail('aaa', 'bbb', 'from@localhost', ['user@external.hu']) 
```

但我总是回来一个错误：

```
Traceback (most recent call last):
  File "", line 1, in 
  File "/usr/lib/python2.6/dist-packages/django/core/mail/__init__.py", line 61, in send_mail
    connection=connection).send()
  File "/usr/lib/python2.6/dist-packages/django/core/mail/message.py", line 248, in send
    return self.get_connection(fail_silently).send_messages([self])
  File "/usr/lib/python2.6/dist-packages/django/core/mail/backends/smtp.py", line 92, in send_messages
    sent = self._send(message)
  File "/usr/lib/python2.6/dist-packages/django/core/mail/backends/smtp.py", line 110, in _send
    email_message.message().as_string())
  File "/usr/lib/python2.6/smtplib.py", line 709, in sendmail
    raise SMTPRecipientsRefused(senderrs)
SMTPRecipientsRefused: {'user@external.hu': (554, '5.7.1 : Relay access denied')} 
```

当然，我尝试使用不同的地址。他发送电子邮件的唯一一种情况是，当我将它发送到`localhost`（或在这台机器上有 mx 的主机）时。

在`mail.log`我可以看到这个：

```
Apr 16 10:48:48 tkt postfix/smtpd[4886]: connect from tkt[217.112.142.235]
Apr 16 10:48:48 tkt postfix/smtpd[4886]: NOQUEUE: reject: RCPT from tkt[217.112.142.235]: 554 5.7.1 : Relay access denied; from= to= proto=ESMTP helo=
Apr 16 10:48:48 tkt postfix/smtpd[4882]: lost connection after RSET from tkt[217.112.142.235]
Apr 16 10:48:48 tkt postfix/smtpd[4882]: disconnect from tkt[217.112.142.235] 
```

嗅探 25 端口我什么也看不见。

任何人都知道如何解决这个问题（最好使用本地后缀）？

这台机器在 Internet 站点上，正如我所写，从命令行发送邮件可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:39:53.637

我不是 100% 确定，但我认为...

```
echo sth | mail somebody@provider.com 
```

...和...

```
send_mail('aaa', 'bbb', 'from@localhost', ['user@external.hu']) 
```

...是前者连接到 IP 地址上的后缀`127.0.0.1`，但后者连接到 IP 地址上的后缀`217.112.142.235`，虽然我不知道为什么。这可能取决于您的网络服务器绑定到哪个 IP 地址。

`127.0.0.1`出于安全原因，Postfix 通常默认配置为仅在连接时允许中继电子邮件。

您可以更改您的 Django`settings.py`以强制使用它，方法`127.0.0.1`是添加...

```
EMAIL_HOST='localhost' 
```

`217.112.142.235`...或重新配置后缀以允许通过更改`mynetworks`参数来进行中继，`/etc/postfix/main.cf`例如...

```
mynetworks = 127.0.0.0/8 
```

...到某事清单...

```
mynetworks = 127.0.0.0/8 217.112.142.235/32 
```

...然后做...

```
sudo service postfix restart 
```

...使其重新阅读配置文件。

# php - 在同一个类中存储和使用全局变量，但使用php的公共函数不同

> ID：16038874
> 
> 赞同：1
> 
> 时间：2013-04-16T13:48:56.743
> 
> 标签：php, zend-framework, netbeans

我有一个用 php 用 netbeans 制作的项目，我正在使用 Zend 框架，所以它是模型-视图-控制器。

进入一个类（newclassController），我有 4 个公共函数。**我想从第二个函数存储一个全局变量并将其用于第四个函数**。

我尝试将 URL 中的变量作为参数和 SESSION 变量发送，但我收到了一些错误，所以如果您有其他想法，请启发我。

我尝试的所有返回都会给出以下错误消息：
`Notice: Undefined variable`

注意：如果我将变量存储在 中，它可以工作`init function`，但我想从另一个函数中存储它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:50:54.183

```
public function__constructor(){
$this->value = 'something';
}

$this->value 
```

会在课堂上给“东西”

在类的构造函数中标记变量并使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:08:06.243

除非我在您启动值时错过了我的猜测：

```
public function init(){
    $this->value = 'value';
} 
```

该值可用于控制器中的所有“操作”。

这是设计使然。

该`init()`方法在ZF1中用于补充构造函数。这是您添加通常可能放在构造函数中的参数的地方。

为了将值从一个动作*持久*化到另一个动作，必须使用某种形式的存储。

例如：

```
//a verbose example
public function indexAction(){
    //initiate a variable
    $i = 100;
    //start a new session and assign a name to it
    $session = new Zend_Session_Namespace('number');
    //assign the value to the namespace
    $session->value = $i
} 
```

稍后在同一个控制器甚至另一个控制器中

```
public function newAction(){
    //access the session
    $session = new Zend_Session_Namespace('number');
    //assign the value to the view
    $this->view->value = $session->value;
} 
```

现在在 new.phtml 视图中

```
<?php echo $this-value ?> 
```

在使用 PHP 尤其是 Zend Framework 1 时要记住一件重要的事情，每个请求都运行整个应用程序。

这是一个一开始就绊倒我的概念。每次您请求一个新页面时，您的 Zend Framework 应用程序都会从​​头开始运行，因此必须保存（持久化）从一个请求到下一个请求需要保留的任何数据。

# jqgrid - jqGrid中的多选

> ID：16038875
> 
> 赞同：0
> 
> 时间：2013-04-16T13:48:56.770
> 
> 标签：jqgrid

我正在使用 JQGrid，并设计了网格，使得第一列是一个复选框。我正在使用 的属性`multiselect:true`，除此之外我没有编写任何代码来获取复选框。如何从选中复选框的行中获取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:56:49.017

要获取选定的行，请使用：

```
var selected = $("#tableid").jqGrid('getGridParam', 'selarrrow'); 
```

`selected`将设置为所选行的 ID 数组。

要从行中获取列值，请使用该`getCell`方法。请参阅[如何在 javascript 中获取选定的行 ID？](https://stackoverflow.com/questions/12242825/how-to-get-the-selected-row-id-in-javascript?lq=1)

# c++ - C++：Linux平台上的线程同步场景

> ID：16038877
> 
> 赞同：4
> 
> 时间：2013-04-16T13:48:58.950
> 
> 标签：c++, linux, multithreading, synchronization

我正在为 Linux 平台实现多线程 C++ 程序，我需要类似于 WaitForMultipleObjects() 的功能。

在搜索解决方案时，我发现有一些文章通过示例描述了如何在 Linux 中实现 WaitForMultipleObjects() 功能，但这些示例不满足我必须支持的场景。

我的情况非常简单。我有一个守护进程，其中主线程向外界公开方法/回调，例如向 DLL 公开。DLL 的代码不在我的控制之下。同一个主线程创建一个新线程“线程 1”。线程 1 必须执行一种无限循环，在该循环中它会等待关闭事件（守护进程关闭），或者它会等待通过上述公开的方法/回调发出信号的数据可用事件。

简而言之，线程将等待关闭事件和数据可用事件，如果发出关闭事件信号，等待将满足并且循环将被中断，或者如果发出数据可用事件信号，那么等待也将满足并且线程将进行业务处理。

在 Windows 中，它看起来非常简单。下面是我的场景的基于 MS Windows 的伪代码。

```
//**Main thread**

//Load the DLL
LoadLibrary("some DLL")

//Create a new thread
hThread1 = __beginthreadex(..., &ThreadProc, ...)

//callback in main thread (mentioned in above description) which would be called by the     DLL
void Callbackfunc(data)
{
    qdata.push(data);
    SetEvent(s_hDataAvailableEvent);
}

void OnShutdown()
{
    SetEvent(g_hShutdownEvent);
    WaitforSingleObject(hThread1,..., INFINITE);
    //Cleanup here
}

//**Thread 1**

unsigned int WINAPI ThreadProc(void *pObject)
{
    while (true)
    {

        HANDLE hEvents[2];
        hEvents[0] = g_hShutdownEvent;
        hEvents[1] = s_hDataAvailableEvent;

        //3rd parameter is set to FALSE that means the wait should satisfy if state of  any one of the objects is signaled.
        dwEvent = WaitForMultipleObjects(2, hEvents, FALSE, INFINITE);
        switch (dwEvent) 
        {   
            case WAIT_OBJECT_0 + 0: 
            // Shutdown event is set, break the loop
            return 0;   

            case WAIT_OBJECT_0 + 1:
            //do business processing here
            break; 

            default: 
            // error handling
        }
    }
} 
```

我想为 Linux 实现相同的功能。根据我对 Linux 的理解，它有完全不同的机制，我们需要注册信号。如果终止信号到达，进程就会知道它即将关闭，但在此之前，进程需要等待正在运行的线程正常关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:44:58.033

在 Linux 中执行此操作的正确方法是使用条件变量。虽然这与`WaitForMultipleObjects`Windows 中的不同，但您将获得相同的功能。

使用两个`bool`s 来确定是否有可用的数据或必须发生关闭。然后让关闭函数和数据函数都相应地设置布尔值，并向条件变量发出信号。

```
#include <pthread.h>

pthread_cond_t cv = PTHREAD_COND_INITIALIZER;
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

pthread_t hThread1; // this isn't a good name for it in linux, you'd be 
                    // better with something line "tid1" but for 
                    // comparison's sake, I've kept this

bool shutdown_signalled;
bool data_available;

void OnShutdown()
{
    //...shutdown behavior...
    pthread_mutex_lock(&mutex);
    shutdown_signalled = true;
    pthread_mutex_unlock(&mutex);
    pthread_cond_signal(&cv);
}

void Callbackfunc(...)
{
    // ... whatever needs to be done ...
    pthread_mutex_lock(&mutex);
    data_available = true;
    pthread_mutex_unlock(&mutex);
    pthread_cond_signal(&cv);
}

void *ThreadProc(void *args)
{
    while(true){
        pthread_mutex_lock(&mutex);
        while (!(shutdown_signalled || data_available)){
            // wait as long as there is no data available and a shutdown
            // has not beeen signalled
            pthread_cond_wait(&cv, &mutex);
        }
        if (data_available){
            //process data
            data_available = false;
        }
        if (shutdown_signalled){
            //do the shutdown
            pthread_mutex_unlock(&mutex);
            return NULL;
        }
        pthread_mutex_unlock(&mutex); //you might be able to put the unlock
        // before the ifs, idk the particulars of your code
    }
}
int main(void)
{
    shutdown_signalled = false;
    data_available = false;
    pthread_create(&hThread1, &ThreadProc, ...);
    pthread_join(hThread1, NULL);
    //...
} 
```

我知道 windows 也有条件变量，所以这看起来不应该太陌生。我不知道 windows 对它们有什么规则，但在 POSIX 平台上，`wait`需要在`while`循环内，因为可能会发生“虚假唤醒”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:56:38.440

如果您希望编写 unix 或 linux 特定代码，您可以使用不同的 API：

*   pthread：提供线程、互斥体、条件变量
*   IPC（进程间通信）机制：互斥体、信号量、共享内存
*   信号

对于线程，第一个库是强制性的（Linux 上有较低级别的系统调用，但更乏味）。对于事件，可以使用这三个。

系统关闭事件生成终止 (SIG_TERM) 和终止 (SIG_KILL) 信号，广播到所有相关进程。因此，也可以通过这种方式启动单独的守护进程关闭。游戏的目标是捕捉信号，并启动进程关闭。重点是：

*   信号机制的制作方式无需等待它们

    只需使用 安装一个所谓的处理程序`sigaction`，系统将完成剩下的工作。

*   信号设置给进程，*任何*线程都可以拦截它（处理程序可以在任何上下文中执行）

    因此，您需要安装一个信号处理程序（参见[sigaction(2)](http://linux.die.net/man/2/sigaction)），并以某种方式将信息传递给应用程序必须终止的其他线程。

最方便的方法可能是拥有一个全局互斥保护标志，您的所有线程都会定期查阅该标志。信号处理程序将设置该标志以指示关闭。对于工作线程，这意味着

*   告诉远程主机服务器正在关闭，
*   在读取时关闭其套接字
*   处理所有剩余的接收到的命令/数据并发送答案
*   关闭套接字
*   出口

对于主线程，这意味着在工作线程上启动一个连接，然后退出。

这个模型不应该干扰数据的正常处理方式：阻塞调用`select`或者如果捕获到信号`poll`就会返回错误`EINTR`，对于非阻塞调用，线程会定期检查标志，所以它也可以工作。

# scripting - FTP - 跳过已经发送的文件

> ID：16038879
> 
> 赞同：0
> 
> 时间：2013-04-16T13:49:05.050
> 
> 标签：scripting, ftp, cron

有没有一种简单的方法来自动化一个过程，这样如果我想要一个脚本（.sh）每小时运行一次，它可以检查哪些文件已经被 FTP 传输并跳过那些并且只发送新的？谢谢

这是我目前的提要。我不确定如何配置 rsync...

```
/usr/local/bin/ncftpput -f saxlogin.cfg /MTM/PH /mnt/zeus/scripts/xml/pph/date +"%Y.%m.%d"/* 
```

# javascript - 在emberjs中的视图之间转换时如何处理取消/回滚

> ID：16038884
> 
> 赞同：2
> 
> 时间：2013-04-16T13:49:21.440
> 
> 标签：javascript, ember.js, ember-data

所以不久前我问了一个[类似的问题](https://stackoverflow.com/questions/15603661/how-to-manage-newly-created-objects-without-saving-before-transitioning-to-a-n)。然而，关于该解决方案的某些东西留下了难闻的气味。

这是场景，当我想创建一条记录时，我有一条新路线。例如`PostsNewRoute`，它看起来像：

```
App.PostsNewRoute = Ember.Route.extend({
  model: function() {
    return App.Post.createRecord({title: '', content: ''});
  },
  deactivate: function() {
    var controller = this.controllerFor('posts.new');
    var content = controller.get('content');
    if (content && content.get('isNew') && !content.get('isSaving')) {
      content.deleteRecord();
    }
  }
}); 
```

同样对于`PostsEditRoute`：

```
App.PostsEditRoute = Ember.Route.extend({
  model: function(params) {
    return App.Post.find(params.post_id);
  },
  deactivate: function() {
    var controller = this.controllerFor('posts.edit');
    var content = controller.get('content');
    if (content && content.get('isDirty') && !content.get('isSaving')) {
      content.rollback();
    }
  }
}); 
```

这对我来说似乎不对。我觉得有太多的代码来处理这个问题，并且在一个更大的应用程序中，我正在为许多对象执行此操作......

所以这是我尝试的另一种方法，它看起来更干净一些，但有它自己的问题（见跳转后）：

```
App.PostsNewRoute = Ember.Route.extend({
  model: function() {
    return App.Post.createRecord({title: '', content: ''});
  }
});

App.PostsEditRoute = Ember.Route.extend({
  model: function(params) {
    return App.Post.find(params.post_id);
  }
});

App.PostsFormView = Ember.View.extend({
  templateName: 'posts/form',
  tagName: 'form',
  classNames: ['form-horizontal'],

  buttonText: '',

  submit: function() {
    // TODO: validation
    this.get('controller').get('store').commit();
    this.get('controller').transitionToRoute('posts.index');
  },

  cancel: function() {
    var content = this.get('controller').get('content');
    if(content && !content.get('isSaving')) {
      if(content.get('isNew')) {
        content.destroyRecord();
      } else if(content.get('isDirty')) {
        content.rollback();
      }
    }
    this.get('controller').transitionToRoute('posts.index');
  }
}); 
```

模板：

```
<div class="control-group">
  <label class="control-label">Title:</label>
  <div class="controls">
    {{view Ember.TextField valueBinding='title'}}
  </div>
</div>
<div class="control-group">
  <label class="control-label">Content:</label>
  <div class="controls">
    {{view Ember.TextArea valueBinding='content'}}
  </div>
</div>
<div class="form-actions">
  <button class="btn btn-primary">{{view.buttonText}}</button>
  <a href="#" class="btn btn-danger" {{action cancel target='view'}}>Cancel</a>
</div> 
```

这与我之前尝试的几乎相同，但是，现在如果用户单击导航链接或单击后退按钮，则内容不会被清理。

这两种方法似乎都不太正确，处理这个问题的正确或更好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:07:16.843

好吧，我喜欢我在[这个不错的小要点](https://gist.github.com/fabriciotav/4980834)中发现的内容（有趣的部分接近底部）。

按照那个例子，我的（部分）`PostsNewController`看起来像这样：

```
startEditing: function() {
    this.transaction = this.get('store').transaction();
    this.set('content', this.transaction.createRecord(EmberBlog.Post, {}));
},

stopEditing: function() {
    if (this.transaction) {
        this.transaction.rollback();
        this.transaction = null;
    }
} 
```

我的 PostsNewRoute 是这样的：

```
EmberBlog.PostsNewRoute = Ember.Route.extend({
  model: function() {
    return null;
  },

  setupController: function(controller) {
    controller.startEditing();
  },

  deactivate: function() {
    this.controllerFor('posts.new').stopEditing();
  }
}); 
```

我认为它应该很容易适应您的特定需求。

# angularjs - Angular指令，属性更新时未调用链接

> ID：16038891
> 
> 赞同：6
> 
> 时间：2013-04-16T13:49:45.120
> 
> 标签：angularjs

在以下示例中：[http ://plnkr.co/edit/OZjg6sUgl35GIriaabQg?p=preview](http://plnkr.co/edit/OZjg6sUgl35GIriaabQg?p=preview)

我有 2 个指令，`showCard`一个在 ng-repeat 中，`link`在属性更新时调用该函数。（见控制台）

另一个`showCards`工作正常`link`，但更新属性时不会调用该函数，而在开始时只调用一次。

我想了解这两种之间的区别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T14:08:38.487

每个元素只调用一次链接函数，所以每当你添加一张新卡时，ngRepeat-directive 都会添加一个新的`<show-card ...>`，它将调用链接函数。

如果您希望每次`cards`更改时触发某些功能，您可以在 showCards 链接功能的范围内添加 $watch 功能，如下所示：

```
 $scope.$watch('cards',function(){
     console.log('multi',$scope.cards);
   },true); 
```

# excel - vba 在 Excel 中的特定单元格位置添加形状

> ID：16038893
> 
> 赞同：11
> 
> 时间：2013-04-16T13:49:46.177
> 
> 标签：excel, vba

我正在尝试在特定单元格位置添加形状，但由于某种原因无法在所需位置添加形状。下面是我用来添加形状的代码：

```
Cells(milestonerow, enddatecellmatch.Column).Activate

Dim cellleft As Single
Dim celltop As Single
Dim cellwidth As Single
Dim cellheight As Single

cellleft = Selection.Left
celltop = Selection.Top

ActiveSheet.Shapes.AddShape(msoShapeOval, cellleft, celltop, 4, 10).Select 
```

我使用变量来捕获左侧和顶部位置，以检查代码中设置的值与记录宏时在活动位置手动添加形状时看到的值。当我运行我的代码时，cellleft = 414.75 和 celltop = 51，但是当我在录制宏时手动将形状添加到活动单元格位置时，cellleft = 318.75 和 celltop = 38.25。我已经对此进行了一段时间的故障排除，并且在网上查看了很多关于添加形状的现有问题，但我无法弄清楚这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T13:56:06.937

这似乎对我有用。我在末尾添加了调试语句以显示形状的`.Top`和`.Left`是否等于单元格的`.Top`和`.Left`值。

为此，我选择了 cell `C2`。

![在单元格顶部和左侧插入的形状](https://i.stack.imgur.com/PspOv.jpg)

```
Sub addshapetocell()

Dim clLeft As Double
Dim clTop As Double
Dim clWidth As Double
Dim clHeight As Double

Dim cl As Range
Dim shpOval As Shape

Set cl = Range(Selection.Address)  '<-- Range("C2")

clLeft = cl.Left
clTop = cl.Top
clHeight = cl.Height
clWidth = cl.Width

Set shpOval = ActiveSheet.Shapes.AddShape(msoShapeOval, clLeft, clTop, 4, 10)

Debug.Print shpOval .Left = clLeft
Debug.Print shpOval .Top = clTop

End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-25T03:55:09.550

我发现此问题是由仅在缩放级别不是 100% 时发生的错误引起的。在这种情况下单元位置被错误地通知。

对此的解决方案是将缩放更改为 100%，设置位置，然后更改回原始缩放。您可以使用 Application.ScreenUpdating 来防止闪烁。

```
Dim oldZoom As Integer
oldZoom = Wn.Zoom
Application.ScreenUpdating = False
Wn.Zoom = 100 'Set zoom at 100% to avoid positioning errors

  cellleft = Selection.Left
  celltop = Selection.Top
  ActiveSheet.Shapes.AddShape(msoShapeOval, cellleft, celltop, 4, 10).Select

Wn.Zoom = oldZoom 'Restore previous zoom
Application.ScreenUpdating = True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-08T17:07:23.287

我正在使用 Office 365 64 位 Windows 10 进行测试，看起来该错误仍然存​​在。此外，即使缩放为 100%，我也能看到它。

我的解决方案是在工作表上放置一个隐藏的样本形状。在我的代码中，我复制了示例，然后选择我要放置它的单元格并粘贴。它总是准确地落在该单元格的左上角。然后，您可以使其可见，并将其相对于其自身的顶部和左侧定位。

```
dim shp as shape
set shp = activesheet.shapes("Sample")

shp.copy
activesheet.cells(intRow,intCol).select
activesheet.paste

'after a paste, the selection is what was pasted
with selection
  .top = .top + 3  'position it relative to where it thinks it is
end with 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-21T22:18:29.213

```
Public Sub MoveToTarget()
    Dim cRange As Range
    Set cRange = ActiveCell
    Dim dLeft As Double, dTop As Double
    dLeft = cRange.Offset(0, 1).Left + (cRange.Width / 2) ' - ActiveWindow.VisibleRange.Left + ActiveWindow.Left
    If dLeft > Application.Width Then dLeft = cRange.Offset(0, -10).Left
    dLeft = dLeft + Application.Left
    '.Top = CommandBars("Ribbon").Height / 2
    dTop = cRange.Top '(CommandBars("Ribbon").Height / 2) + cRange.Top ' cRange.Top ' - ActiveWindow.VisibleRange.Top - ActiveWindow.Top
    If dTop > Application.Height Then dTop = cRange.Offset(-70, 0)
    'dTop = dTop + Application.Top
    ActiveSheet.Shapes.AddShape(msoShapeOval, dLeft, dTop, 200, 100).Select
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-18T20:07:48.243

[![在此处输入图像描述](https://i.stack.imgur.com/vAFSb.png)](https://i.stack.imgur.com/vAFSb.png)

我在 Excel 2019 中遇到了这个错误。我发现将显示设置从最佳外观更改为兼容性解决了这个问题。我分享这个以防有人遇到同样的问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-05-13T07:13:09.243

我的想法不是更改缩放，而是可以为每一行添加一个快速循环，直到单元格所在的行。并添加每一行的顶部，比如

```
dim c as range, cTop as double
for each c in Range("C1:C2")
    cTop=cTop + c.top
    next c 
```

以及用于标注尺寸的最后一个单元格的高度。

# iphone - Bug 恢复亮度 iOS

> ID：16038894
> 
> 赞同：3
> 
> 时间：2013-04-16T13:49:46.363
> 
> 标签：iphone, ios5, ios6, brightness

当我的应用程序进入后台时，我正在等待一种能够恢复 iphone 亮度的方法。我知道存在该错误，但有人知道是否已更正吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:52:31.227

如果不使用私有方法，我认为它没有任何解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T00:55:14.243

iOS 7.0.3，到目前为止没有任何变化。

# php - 根据当前 URL 添加/替换 URL GET 参数

> ID：16038900
> 
> 赞同：1
> 
> 时间：2013-04-16T13:49:53.570
> 
> 标签：php, url, get, url-parameters, parse-url

我已经尝试了一段时间来解决可能是一个小问题，但我似乎无法理解它。我尝试了一些不同的方法，有些是在 SO 找到的，但还没有奏效。

问题包括：
我有一个展示室页面，在那里我展示了一些布料。每一块布上都有四个“视图”

1.  **男性**
2.  **女性**
3.  **正面**
4.  **后退**

现在，用户可以通过查看**男性**或**女性**模型来过滤它，但他们也可以通过查看两个性别的**正面**或**背面来过滤。**

我创建了我的脚本，因此它可以检测 URL 查询并显示正确的数据，但我的问题是正确“构建” URL。

初次进入页面时，四个链接是这样的：

1.  **example.com?gender=male**
2.  **example.com?gender=female**
3.  **example.com?site=front**
4.  **example.com?site=back**

这是因为它是模型中的“默认”视图（默认视图设置为性别=男性 && 站点=正面）。

但是，如果我选择查看**?gender=female**用户应该能够通过添加**&site=back**再次过滤它，因此完整的 URL 将是：example.com ?gender=female&site=back

如果我然后按链接查看**gender=male**它应该仍然保留 URL 参数**&site=back**。

到目前为止，我所做的是将参数附加到现有 URL，但这会导致 URL 字符串，例如：**example.com** ?gender=male&site=front&gender=female 等等……</p>

我尝试过使用**parse_url**函数、**http_build_query($parms)**方法并创建我的“自己的”函数来检查现有参数，但它不起作用。

我最近的尝试是这样的：

```
_setURL(‘http://example.com?gender=male’, ‘site’, ‘back’);
function _setURL($url, $key, $value) {
    $separator = (parse_url($url, PHP_URL_QUERY) == NULL) ? '?' : '&';

    $query = $key."=".$value;
    $url .= $separator . $query;
    var_dump($url); exit;
} 
```

此函数有效，除非 $_GET 参数已经存在，因此应该替换而不是添加。

我不确定是否有一些“最佳实践”来解决这个问题，正如我所说，我已经查看了很多关于 SO 的答案，但没有一个是我的问题的答案。

我希望我已经解释了自己，否则请告诉我，我会详细说明。
任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:06:42.733

您可以使用以下方法动态生成链接：

```
$frontLink = (isset($_GET['gender'])) ? 'mydomain.com?gender='.$_GET['gender'].'&site=front':'mydomain.com?site=front';
$backLink = (isset($_GET['gender'])) ? 'mydomain.com?gender='.$_GET['gender'].'&site=back':'mydomain.com?site=back'; 
```

这是一个 1 行 if 语句，它将分别设置变量`$frontLink`和的值`$backlink`。1 行 if 语句的语法是`$var = (if_statement) ? true_result:false_result;`this 将根据 if 语句的返回值将 $var 的值设置为 true_result 或 false_result。

然后你可以对性别做同样的事情：

```
$maleLink = (isset($_GET['site'])) ? 'mydomain.com?gender=male&site='.$_GET['site']:'mydomain.com?gender=male';
$femaleLink = (isset($_GET['site'])) ? 'mydomain.com?gender=female&site='.$_GET['site']:'mydomain.com?gender=female'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T23:01:08.413

通过寻找一个更好的解决方案然后我的解决方案找到了这个并找到了这个丑陋的解决方案（我们在网上看到很多），所以这是我的解决方案：

```
function add_get_parameter($arg, $value)
{
    $_GET[$arg] = $value;

    return "?" . http_build_query($_GET);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-18T20:16:30.340

```
<?php
function requestUriAddGetParams(array $params)
{
    $parseRes=parse_url($_REQUEST['REQUEST_URI']);
    $params=array_merge($_GET, $params);
    return $parseRes['path'].'?'.http_build_query($params);
}
?> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-12-19T07:08:11.773

```
if(isset($_GET['diagid']) && $_GET['diagid']!='') { 
     $repParam = "&diagid=".$_GET['diagid']; 
     $params = str_replace($repParam, "", $_SERVER['REQUEST_URI']); 
     $url = "http://".$_SERVER['HTTP_HOST'].$params."&diagid=".$ID; 
} 
else $url = "http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']."&diagid=".$ID; 
```

# vbscript - VB脚本一次打开多个程序

> ID：16038902
> 
> 赞同：0
> 
> 时间：2013-04-16T13:49:58.480
> 
> 标签：vbscript

对，我正在寻找一个脚本，我可以在登录后单击以打开各种程序，只是为了节省我一点时间。我已经设法得到一个脚本来打开一个，但作为一个新手，有人可以提供建议。

```
Dim objShell
Set objShell = WScript.CreateObject( "WScript.Shell" )
objShell.Run """C:\Program Files (x86)\servicecenter\Run\scguiw32.exe "" ""-

express:dvla.servicecenter.fs.fujitsu.com.12680"""
Set objShell = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:55:26.077

使用 VBScript 或 Powershell 来完成这项工作，您可能想多了。批处理文件将起作用。

```
@echo off
start "c:\Program Files\Folder 1\program.exe"
start "c:\Program Files\Folder 2\program.exe" -switch -argument
exit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T01:09:47.133

```
Dim objShell
Set objShell = WScript.CreateObject( "WScript.Shell" )
objShell.Run("Path to program")
wscript.sleep (100)
objShell.Run("Path to program")
wscript.sleep (100)
wscript.quit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:06:53.560

我没有 scguiw32.exe，所以我创建了在记事本和 word 中打开文件的简单脚本。

```
Dim objShell
Set objShell = WScript.CreateObject( "WScript.Shell" )
objShell.Run "C:\Windows\notepad.exe c:\dump.txt"

objShell.Run """C:\Program Files (x86)\Microsoft Office\Office14\winword.exe"" c:\dump.txt"
Set objShell = Nothing 
```

顺便说一句，您现在可以使用 powershell 而不是 vbscript，并且 powershell 脚本更容易理解。例如上面的一个将是：使用内容创建 run.ps1

```
& 'C:\Program Files (x86)\Microsoft Office\Office14\WINWORD.EXE' c:\dump.txt
notepad.exe C:\dump.txt 
```

单击它右键单击并选择使用 Powershell 运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T16:46:07.683

以下是如何使用 vbscript 创建要运行的程序数组，然后执行每个程序。

```
'---Declare Variables
Dim objShell, strprogram1, strProgram2, colprograms, item

'---Create Scripting Shell Object
Set objShell = CreateObject("WScript.Shell")

'---Create Program Variables
strProgram1 = """C:\Program Files (x86)\servicecenter\Run\scguiw32.exe"" ""-express:dvla.servicecenter.fs.fujitsu.com.12680"""
strProgram2 = "C:\Windows\notepad.exe C:\Dump.txt"

'---Add Variables to an Array
colPrograms = Array(strProgram1,strProgram2)

'---Run each program in the array once
For Each item In colprograms
    objShell.Run item
Next

WScript.Echo "Done." 
```

# javascript - 如何防止元素失去焦点？

> ID：16038912
> 
> 赞同：25
> 
> 时间：2013-04-16T13:50:15.513
> 
> 标签：javascript, jquery

如何将焦点保持在一个文本框上？即使您单击浏览器中的任意位置。

```
$("#txtSearch").focus(); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-16T13:53:09.800

您需要订阅`blur`事件`textbox`并以小超时恢复焦点：

```
$('#txtSearch').blur(function (event) {
    setTimeout(function () { $("#txtSearch").focus(); }, 20);
}); 
```

这样您就不必依赖订阅页面上任何其他元素的事件。如果您订阅`body click`or `html click`，如果任何其他元素阻止其事件传播，它将不会运行`click`，并且在退出`textbox`.

例子：

```
<!-- I will not propagate my click to top level DOM elements -->
<button id="button">Click me</button>

<script>
$('#button').click(function (event) {
    event.stopPropagation();
});
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-11T11:51:32.220

Konstantin Diev 的回答在大多数情况下都可以，但是如果您不想仅在单击 html 的某些部分时失去焦点，请执行以下操作：

```
$(".nofocus").on( "mousedown", function (e) {
    return false;
}); 
```

在我的情况下，我正在做一个小型 html 文本编辑器，我不想在按下操作按钮时失去控制，但在任何其他情况下都可以。

我只需要将 nofocus 类添加到按钮，它不会控制

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T13:51:21.327

```
$("html").click(function(){
   $("#txtSearch").focus();
}); 
```

***现场演示：http:** [//jsfiddle.net/QhaLY/](http://jsfiddle.net/QhaLY/)*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T13:51:29.807

```
$('body').click(function(){$("#txtSearch").focus();}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-05T14:22:29.787

如果您只需要单击特定元素即可不抓住焦点，也可以不使用 jQuery 且无需重新聚焦

只需监听 mousedown 事件并取消它

```
element.addEventListener("mousedown", event => {event.preventDefault(); event.stopPropagation()}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-02T22:31:49.240

除了单击远离输入的区域（即选项卡）之外，还有其他失去焦点的方法。如果您想防止失去焦点，请使用模糊事件，即

```
document.getElementById('txtSearch').addEventListener('blur', e => {
  e.target.focus();
});
```

# php - 模型验证不起作用

> ID：16038913
> 
> 赞同：0
> 
> 时间：2013-04-16T13:50:16.633
> 
> 标签：php, validation, model, yii

我有以下操作来处理注册

```
 $model=new User('checkout');
        if(!empty($_POST['User'])){

            $model->attributes = $_POST['User'];
            //echo '<pre>';echo $model->username;die;
            $model->validate();
           echo  $model->getErrors(); die;
        }
        $this->render('register',array('model'=>$model)); 
```

和模型规则是

```
array('username', 'required', 'on' => 'checkout','message' => Yii::t('validation', 'Email can not be blank.')),
            array('username', 'unique', 'on' => 'checkout', 'message' => Yii::t('validation', 'Email has already been taken.')),

            array('username', 'unique'),
            array('passwordConfirm', 'required', 'on' => 'checkout','message' => Yii::t('validation', 'Confirm password can not be blank')),
            array('username', 'email', 'message' => Yii::t('validation', 'Invalid username/email format ')),
            //comapre passwords 
```

表单发布数据是

```
Array
(
    [fname] => hemc
    [lname] => k
    [username] => demo
    [dob] => 
    [password] => 
    [passwordConfirm] => 
    [agree] => 0
) 
```

问题-：验证模型时没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:38:07.600

[`getErrors`](http://www.yiiframework.com/doc/api/1.1/CModel#getErrors-detail)将返回一个数组，你应该试试这个：

```
var_dump($model->getErrors()); 
```

或者

```
print_r($model->getErrors()); 
```

PS：你应该在你的`CActiveForm`with中显示错误[`errorSummary`](http://www.yiiframework.com/doc/api/1.1/CActiveForm#errorSummary-detail)

# .net - Sitecore 隐藏物品

> ID：16038914
> 
> 赞同：0
> 
> 时间：2013-04-16T13:50:20.683
> 
> 标签：.net, logging, content-management-system, sitecore, sitecore6

每天早上，当我尝试登录本地站点核心登录页面时，我几乎要等待 5-6 分钟。当我打开 sitecore 日志文件时，我发现一堆类似于“ManagedPoolThread #8 07:51:29 DEBUG 找不到源语言 id '{3C5919DF-1131-4B94-A96D-685C432CA586}'的语言映射”的调试行- 跳过”。奇怪的是，当我搜索该 guid 值时，我可以找到该项目，但默认情况下我在内容树中看不到该项目。就像该项目在那里，但不知何故它被隐藏或内容树不知道该项目存在。guid 值用于语言文件，我没有在项目中使用，可以去掉。无论如何都可以显示所有像这样的项目，这些项目存在但以某种方式从内容树中隐藏并将它们全部删除？

![在此处输入图像描述](https://i.stack.imgur.com/glsE4.png)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-14T10:35:48.853

难道是项目存储在项目桶中？如果是这样，只需在“视图”选项卡中选中“桶”复选标记。我的情况就是这样。 [在这里进一步阅读](https://doc.sitecore.net/sitecore%20experience%20platform/managing%20items/item%20buckets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:05:54.643

要查看隐藏项目，请转到功能区中的查看选项卡并选中“隐藏项目”复选框

# php - php mysql + ajax + jquery + 删除操作

> ID：16038919
> 
> 赞同：0
> 
> 时间：2013-04-16T13:50:28.433
> 
> 标签：php, mysql, jquery

我正在使用 php 和 mysql 创建一个评论系统来存储数据和 ajax 与 jquery 所有系统运行良好，但是当涉及到删除操作时，没有任何事情发生，就像这个按钮没有任何操作或与系统的关系任何人都可以帮助我 ？？？

# 评论框.php

```
<li class="comment-holder" id="_<?php echo $comment->comment_id;  ?>">
    <div class="user-img">
     <img src="<?php echo $user->profile_img; ?>" class="user-img-pic" />
      </div>
      <div class="comment-body">
            <h3 class="username-field">
                     <?php echo $user->userName; ?>
             </h3>
              <div class="comment-text">
                   <?php echo $comment->comment; ?>         
              </div>
        </div>
         <div class="comment-buttons-holder">
            <ul>
                <li id="<?php echo $comment->comment_id; ?>"class="delete-btn">X</li>
             </ul>
          </div>
      </li> 
```

# comment_delete.js（我正在用 firebug 测试删除按钮）

```
$(document).ready(function() {

    $('.delete-btn').each(function() {
        var btn = this;
        $(btn).click(function(){
            console.log("the id " + btn.id);

        })      
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:45:15.080

Try

```
$(document).ready(function() {

    $('.delete-btn').click(function() {
        var comment_id = $(this).attr('id');
        alert(comment_id);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:59:05.167

```
<li id="<?php echo $comment->comment_id; ?>"class="delete-btn">X</li> 
```

由于您在 id 值和属性之间缺少空格`class`，我认为浏览器只是没有将该类分配给元素。

* * *

编辑（对于不知道“失踪”是什么意思的人）：

您的 PHP 代码将生成表单的 HTML 输出

```
<li id="123"class="delete-btn">X</li> 
```

而它当然应该是

```
<li id="123" class="delete-btn">X</li> 
```

* * *

请*务必* 在提问*之前*[*验证*](http://validator.w3.org/)您的 HTML 代码。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:53:17.743

尝试这个

```
$(document).ready(function() {

    $('.delete-btn').each(function(i,el) {
        $(el).click(function(){
            console.log("the id " + $(this).attr('id'));

        })      
    });
}); 
```*

# php - 从mysql打印json

> ID：16038920
> 
> 赞同：0
> 
> 时间：2013-04-16T13:50:35.347
> 
> 标签：php, javascript, jquery, ajax, json

大家好，我有一个用 codeigniter 开发的网站。在某些函数中，我必须从 mysql 检索数据并在 javascript 中打印结果，因为它是一个 ajax 调用。

这是我检索数据的 php 函数：

```
public function getCityByNameOnly($name) {
      $query = $this->db->query('SELECT *  FROM city WHERE name LIKE "%'.$name.'%" ');
      $city = array();
      foreach ($query->result() as $row)
     array_push($city, $row);
     return json_encode($city);
      }
} 
```

这是我的ajax调用：

```
$('#ricerca-ajax').keyup(function(){
        var val = $(this).val();
        if (val.length>2){
            var site_url_city ="<?php echo(site_url('/city/get_city_by_text')); ?>";
            $.ajax({   
                url: site_url_city, 
                type: "POST", 
                data: {search: val},
                dataType: "text",             
                success: function(data) {
                    console.log(data);
                    for(var i=0;i<data.length;i++)
                    {
                          $('#msgid').append(data[i].name_en  + '<br> ');

                    }
                }
            });
        }
    }) 
```

我将结果附加到 div 中，但始终未定义。这是我创建的 json 的 console.log：

```
{"id":"125","name_it":"L&egrave;sina (Hvar)","name_en":"Hvar","nation_id":"23","region_id":"0","active":"1"},{"id":"127","name_it":"Trogir (Tra&ugrave;)","name_en":"Trogir","nation_id":"23","region_id":"0","active":"1"},{"id":"1088","name_it":"Citt&agrave; del Capo","name_en":"Cape Town","nation_id":"101","region_id":"0","active":"1"}] 
```

如何在javascript中将此json打印到我的成功函数中？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:52:30.583

更改`datatype:"json"`ajax将解决问题

```
$('#ricerca-ajax').keyup(function(){
        var val = $(this).val();
        if (val.length>2){
            var site_url_city ="<?php echo(site_url('/city/get_city_by_text')); ?>";
            $.ajax({   
                url: site_url_city, 
                type: "POST", 
                data: {search: val},
                dataType: "json",             
                success: function(data) {
                    console.log(data);
                    for(var i=0;i<data.length;i++)
                    {
                          $('#msgid').append(data[i].name  + '<br> ');

                    }
                }
            });
        }
    }) 
```

# c# - 更改 ListBox 中所有 ListBoxItem 的样式（Windows phone 8）

> ID：16038921
> 
> 赞同：1
> 
> 时间：2013-04-16T13:50:38.853
> 
> 标签：c#, xaml, listbox, windows-phone-8, listboxitem

我有一个带有一些 Listboxitem 的 Listbox，我想更改所有项目的样式。我知道，可以在资源中创建一个样式并将该样式绑定到每个项目，但也许有可能更容易做到（没有绑定）？使用 ListBox.ItemTemplate？

```
 <ListBox SelectionChanged="ListBox_SelectionChanged">
                        <ListBoxItem x:Name="ItemAdress">
                                ....
                        </ListBoxItem>

                        <ListBoxItem x:Name="ItemPhone">
                                ....
                        </ListBoxItem>

                        <ListBoxItem x:Name="ItemEmail">
                                ....
                        </ListBoxItem>
              </Listbox> 
```

事实上，我的目标是为每个项目添加 Margin bottom 15。（在项目之间添加一个空格）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:08:03.720

注意：这适用于 WPF；不确定它是否也适用于 Windows Phone。

您可以使用 TargetType 创建样式。这将影响`ListBoxItem`此特定 ListBox 的所有 s：

```
<ListBox Height="200" Width="200">
  <ListBox.Resources>
    <Style TargetType="{x:Type ListBoxItem}">
      <Setter Property="Margin" Value="0,0,0,15" />
    </Style>
  </ListBox.Resources>
  <ListBoxItem x:Name="ItemAdress">
    ABC
  </ListBoxItem>
  <ListBoxItem x:Name="ItemPhone">
    DEF
  </ListBoxItem>
  <ListBoxItem x:Name="ItemEmail">
    GHI
  </ListBoxItem>
</ListBox> 
```

如果要为**所有**ListBox 设置 ListBoxItem的样式，可以在适当的父级别指定样式。

例如，以下将样式应用于此 Grid 下所有 ListBoxes 的所有 ListBoxItems。

```
<Grid>
  <Grid.Resources>
    <Style TargetType="{x:Type ListBoxItem}">
      <Setter Property="Margin" Value="0,0,0,15" />
    </Style>
  </Grid.Resources>
  <ListBox x:Name="listBox1" Height="200" Width="200">
    ...
  </ListBox>
  <ListBox x:Name="listBox2" Height="200" Width="200">
    ...
  </ListBox>
</Grid> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T14:49:01.007

为了建立 publicgk 答案，我想展示如何“简单”地做到这一点，以及在 RE 中添加更多信息到样式。如果您已经知道我要说的内容，那么我很抱歉 - 我添加这个以防万一有人正在查看这个问题，因此不熟悉 WP8 或 XAML 开发。

如果您想设置**数据**显示方式的样式，那么我建议您创建一个 DataTemplate 并将 ListBox.ItemTemplate 设置为该数据模板（正如您在上面建议的那样）。

您可以内联执行此操作，或者将 DataTemplate 作为资源并按名称引用它。

```
 <!--ItemsSource set in code-->
        <ListBox>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Background="Blue">
                        <TextBlock Text="{Binding Title}"/>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!--ListOfTitles is a property in the code-->
        <ListBox ItemsSource="{Binding ListOfTitles}" ItemTemplate="{StaticResource redDataTemplateDefinedInResources}">
        </ListBox> 
```

请注意，您需要设置 itemssource，这可以在代码隐藏中完成，方法是通过为其命名 (x:name="theName") 或使用绑定并绑定到具有该名称的属性来访问 ListBox（确保设置DataContext 也是如此）

如果您想设置默认 ListBoxItem 的样式（例如交互、边距等），那么您可以 publicgk 编写使用控件目标类型创建样式并将其设置为父级别、页面或应用级别的资源。对于整个应用程序中的所有控件，使用应用程序级别 - 与资源字典保持一切整洁:)

这是创建完整模板以覆盖 Visual Studio 2012 或 Blend 中的样式的最简单方法：右键单击设计器或文档大纲窗口中的控件，然后选择编辑模板，编辑副本，如果你想要一个命名资源，或选择应用于所有（基本上删除名称）。

因为我喜欢展示和讲述，这里有一些图片：

然后继续并根据需要进行更改:)![创建模板的副本](https://i.stack.imgur.com/xvcqb.jpg)![适用于部分或全部](https://i.stack.imgur.com/ReMXl.jpg)![除了更改背景之外，您可能还想做其他事情，但只是为了显示:)](https://i.stack.imgur.com/2ddlr.jpg)

模板代码：

```
<Style TargetType="ListBoxItem">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="LayoutRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource TransparentBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ContentContainer"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected"/>
                                <VisualState x:Name="Selected">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneAccentBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# wpf - Windows 8 开发 WPF 或 Windows Store XAML

> ID：16038926
> 
> 赞同：2
> 
> 时间：2013-04-16T13:50:44.737
> 
> 标签：wpf, windows-8, windows-runtime, winrt-xaml

我一直在为 Windows 8 平板电脑（Microsoft Surface）开发一个 Windows 商店应用程序。到目前为止，该应用程序是使用 SQLite 数据库使用 XAML-RT/C# 设计的。该应用程序不会通过商店发布，它将仅供我公司内部使用。

但是，我发现该平台存在许多问题。即表面设备的速度、发布版本和更新开发者许可证。

由于该应用程序仍处于开发阶段，尚未对最终平板电脑做出任何决定，我正在考虑使用 WPF 和使用完整的 windows 8 平板电脑（不是 RT/ARM 版本）重写应用程序。这样我就可以使用完整的 SQL，并且可以更好地控制软件的发布。

所以，我的问题是...

什么是完整的 Windows 8 平板电脑的最佳开发平台？最好使用 WPF 还是坚持使用 Xaml for RT？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:09:39.577

WPF

*   更少的沙盒限制（可以调用任何 API）
*   目前更容易进行企业部署
*   有更多的功能
*   整体比较成熟
*   可以从 Surface SDK 2.0 控件中受益，在大屏幕上提供出色的触控支持

WinRT/XAML

*   适用于 ARM 设备
*   更轻更快
*   具有针对平板电脑使用的内置现代触控控件
*   整体上可能更适合在平板电脑上使用

总体而言，WinRT 的主要好处是您可以在更便宜、更轻且更适合用作平板电脑的 ARM 平板电脑上使用它。WPF 需要更重的设备并且可能会更慢，但您可以获得访问所有旧版 API 的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:59:25.607

如果您打算让它完全准备好触摸屏，那么您必须在 WPF 中做一些额外的工作，以获得从“地铁”应用程序获得的 UI 交互性水平。

话虽如此，如果您正在编写一个需要大量 API 调用/Web 服务和文件处理的复杂应用程序，那么使用 WPF 会更轻松。

# php - 带有附件文件类型 pdf doc 和 docx 的 send_mail drupal 7

> ID：16038927
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:50:49.120
> 
> 标签：php, drupal, drupal-7

你能帮我写这个代码保存它后发送节点这个节点有一个附件可能是pdf doc和docx我用过这个钩子这可以发送一个带有html附件的空邮件包含邮件正文而不是文件内容

```
function footer_node_insert($node){

if($node->type=="application_form"){

    $file_data=file_load($node->field_cv['und'][0]['fid']);
    $filemime=$file_data->filemime;
    $filename=$file_data->filename;
    $file_uri=file_create_url($file_data->uri);

    $job=node_load($node->field_apply['und'][0]['nid']);

    $to='mail@mail.com';

    $key = "notice";

    $module = 'footer';

    $message = drupal_mail($module, $key, $to, language_default(), array(), "from@froom.com", True);
    // Build the default headers
    $headers = array(
        'MIME-Version' => '1.0',
        'Content-Type' => 'text/html; charset=UTF-8; format=flowed; delsp=yes',
        'Content-Transfer-Encoding' => '8Bit',
        'X-Mailer' => 'Drupal',
    ); 

    $attachment = array(
    'filecontent' => file_get_contents($file_uri),
    'filename' =>$filename,
    'filemime' =>$filemime
    );

    $message['headers']['Content-Type'] = $headers ;

    $message['subject'] = 'Apply for ' .$job->title  . ' Page';

    $body = array();
    $body[] =   '<b>'. t('Name:').'</b>'.$node->title;
    $body[] =   '<b>'. t('Email:').'</b>'.$node->field_application_email['und']['0']['email'] ; 
    $body[] =   '<b>'. t('Current Job:').'</b>'.$node->field_current_job['und']['0']['value'];
    $body[] =   '<b>'. t('Current Company:').'</b>'.$node->field_current_company['und']['0']['value'];
    $body[] =   '<b>'. t('Home Phone:').'</b>'.$node->field_home_phone['und']['0']['value'];
    $body[] =   '<b>'. t('Mobile Phone:').'</b>'.$node->field_mobile_phone['und']['0']['value'];        

    $message['body'] = implode('<br>', $body);

    $message['params']['attachments'][] = $attachment;
    // Retrieve the responsible implementation for this message.
    $system = drupal_mail_system($module, $key);

    // Format the message body.
    // $message = $system->format($message);

    // Send e-mail.
    $message['result'] = $system->mail($message);

    if ($message['result']) {
    echo 'true';

    } else {
    echo 'false';
    }

exit();

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:36:01.580

像这样更新您的功能并添加您的附件

```
function reservation_invitation_mail_send($form_values, $node) {
        $module = 'reservation_invitation';
        $key = 'reservation_invitation_key';
        //$to = $form_values['email'];
        $to= "Yourmail@icilalune.com";
        $cc= $node->content['field_invited_by_ref']['#object']->field_invited_by_ref['und']['0']['entity']->field_email_address['und']['0']['value'];
        $bbc= $node->content['field_invited_by_ref']['#object']->field_main_guest['und']['0']['entity']->field_email_address['und']['0']['value'];
        $from = variable_get('site_mail', 'bacar@icilalune.com');
        $params = $form_values;
        $params['headers'] = array(
            'Bcc' => $bbc,
            'Cc' => $cc);

        $params['subject']= t('Your invitation!');
        $params['body']= theme('reservation_invitation_moet_template',array('var_name'=>$params));
        $language = language_default();
        $send = TRUE;
        variable_set('mail_system', array('reservation_invitation_reservation_invitation_key' => 'ReservationInvitationMailSystem'));
        $message = drupal_mail($module, $key, $to, $language, $params, $from, $send);
      /*  $system = drupal_mail_system($module, $key);
        // Format the message body.
        $message = $system->format($message);
        // Send e-mail.
        $message['result'] = $system->mail($message);*/
        if($message['result'] == TRUE) {
            drupal_set_message(t('Your message has been sent.'));
        }
        else{
            drupal_set_message(t('There was a problem sending your message and it was not sent.'), 'error');
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T15:30:58.150

我已经做了这样的事情来发送 html 邮件。首先，您需要覆盖发送消息的格式。在你的文件 module.inc 中写下这段代码。

```
 <?php
 change this template use File | Settings | File Templates.
 */

/**
 * Modify the drupal mail system to send HTML emails.
 */
class ReservationInvitationMailSystem extends DefaultMailSystem {
    /**
     * Concatenate and wrap the e-mail body for plain-text mails.
     *
     * @param $message
     *   A message array, as described in hook_mail_alter().
     *
     * @return
     *   The formatted $message.
     */
    public function format(array $message) {
        $message['headers']['Content-Type'] = 'text/html; charset=UTF-8;';
/*        $message['body'] = implode("\n\n", $message['params']['body']);*/
        $message['body'] = drupal_wrap_mail($message['params']['body']);
        return $message;
    }
} 
```

在你的 module.module 之前调用 drupal_mail 设置你的格式邮件

```
variable_set('mail_system', array('reservation_invitation_reservation_invitation_key' => 'ReservationInvitationMailSystem')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T09:51:52.420

我使用模块 MimeMail 的 Drupal 7 解决方案没有调用 hook_mail()：

```
// Load attachment.
$file = file_load($fid);

$to = 'something@email.com';
$from = 'something@email.com';
$subject = 'Invoice ' . $file->filename;

$module = 'mimemail';
$token = time();

$message = array(
  'id' => $module . '_' . $token,
  'to' => $to,
  'subject' => $subject,
  'body' => array('something text...'),
  'headers' => array(
    'From' => $from,
    'Sender' => $from,
    'Return-Path' => $from,
    'MIME-Version' => '1.0',
    'Content-Type' => 'text/html; charset=UTF-8',
  ),
  'params' => array(
    'attachments' => array(
      0 => array(
        'path' => file_stream_wrapper_get_instance_by_uri($file->uri)->realpath(),
        'filecontent' => file_get_contents($file->uri),
        'filename' => $file->filename,
        'mime' => $file->filemime,
        'encoding' => 'base64',
        'disposition' => 'attachment',
        'list' => TRUE,
      ),
    ),
  ),
);

$system = drupal_mail_system($module, $token);
$message = $system->format($message);

if ($system->mail($message)) {
  return TRUE;
}
else {
  return FALSE;
} 
```

# python - Python：查找随机生成的整数的乘积

> ID：16038929
> 
> 赞同：0
> 
> 时间：2013-04-16T13:50:52.720
> 
> 标签：python, function, dice

还有一个问题。我是 CS 一年级学生，必须在纸上完成这项工作，所以我无法导入任何程序来解决问题。

我被要求创建一组伪随机整数，然后使用函数 def product (n) 将整数的乘积相乘。我知道这段代码真的错了，但我根本不知道该怎么做！这是我到目前为止所拥有的：

```
def product(n):
    product = j*i
for j in range (20):
    i=random.randrange(1,4,1)
    print ("The set of numbers is", i) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:59:13.433

您没有指定整数的范围，但我认为这可以满足您的要求：

```
import random

def product(n):
  lower_bound = 1
  upper_bound = 10
  result = 1
  for i in range(n):
    result *= random.randint(lower_bound, upper_bound)
  return result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:59:43.197

我会去

```
import random
def product(n):
    return reduce(lambda x,y:x*y,(random.randint(1,3) for i in xrange(n))) 
```

几件事：

1.  如果不导入或编写自己的伪随机生成器，您将无法真正生成随机数
2.  查找[减少](http://docs.python.org/2/library/functions.html#reduce)。这可能是这里的首选方法。
3.  如果您可以导入`operator`模块，请使用`operator.mul`而不是`lambda x,y:x*y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:59:27.180

If`n`是生成数字的数量：

```
import random
def product(n):
    random_list = [random.randint(0,n) for r in xrange(n)]
    return reduce(lambda x,y : x*y,  random_list) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:00:00.843

你想要什么？乘以整数并显示他们的产品？看到这个：

```
def product(numberOfIntegers) :
   finalResult = 1
   for i in range(1,numberOfIntegers) :
      randomNumber = random.randrange(1,4,1)
      finalResult = finalResult * randomNumber
   return finalResult 
```

# excel - 如何为不同工作表中的第 n 列制定偏移函数

> ID：16038934
> 
> 赞同：2
> 
> 时间：2013-04-16T13:51:04.657
> 
> 标签：excel, offset

我整天都在为此苦苦挣扎，尽管我确信这并非不可能。

我在每 3 列中有一个值，我需要将此值复制到另一个表中，忽略第一列和第二列。

所以对于：`A1, B1, C1, D1, E1, F1`在表 1

我只需要`C1`，`F1`在表 2

有没有可以拖到所有列的公式？这也必须发生在第 1 - 150 行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:02:53.037

这应该这样做：

`=OFFSET(Sheet2!A1,0,COLUMN()*2,1,1)`

根据需要修改工作表名称。

使用`Column()*2`列偏移的参数。这取当前列号的整数值，并将其乘以 2。因此 A 列的偏移量为 2，指的是 C 列，B 列的偏移量为 4，指的是 F 列，依此类推。

# c++ - 函数模板显式特化 c++

> ID：16038935
> 
> 赞同：4
> 
> 时间：2013-04-16T13:51:14.050
> 
> 标签：c++, templates, specialization, explicit

我的书提到了两种显式专业化的方法：

```
template <> void Swap<int> (int &, int &);
template <> void Swap(int &, int&); 
```

两者有什么区别？什么时候用一个，什么时候用另一个？函数名后面的 <> 到底是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:55:20.947

> 两者有什么区别？

**没有区别**。

在第二种情况下，您让编译器从专业化的签名中执行*类型推导。*因此，两种形式都声明了 for 的特`Swap<T>()`化`T = int`。

> 什么时候用一个，什么时候用另一个？

由您自行决定，当一种或另一种形式在可读性或易维护性方面满足您的要求时。

> 函数名后面的 <> 到底是什么？

当它出现*在函数名之后*时，它是指定模板参数的语法：

```
template<typename T = double, typename U = char>
void foo();

foo<int, bool>(); // Specifies explicit template arguments
foo<>(); // Use default template arguments
foo(); // Same as above, allowed for *function* templates only 
```

当它出现*在* `template` *关键字*之后时，它是用于引入（类或函数）模板特化的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:53:28.060

第一个示例是显式特化模板的真正方法，第二个示例只是第一种方法的快捷方式，因为编译器可以从函数签名中推断出类型本身。**结果是一样的**，没有真正的区别。

用于将`<>`模板参数提供给模板化结构，在这种情况下，模板参数是被操作数据的类型，特化是针对 type 的`int`。

# c# - C# 安全登录

> ID：16038948
> 
> 赞同：5
> 
> 时间：2013-04-16T13:51:33.023
> 
> 标签：c#, asp.net, .net, authentication

我已经用 C# 制作基本表单应用程序一两年了，并且已经完成了一些非常基本的登录表单（纯文本密码等）。

我正在寻找更好、更安全的安全选择。我查看并找到了一些关于 .net 成员资格的文章，并且我之前在我使用过的其他应用程序中遇到过它。我觉得搜索 google 让我循环思考为什么 X 比 Y 更好，而且资源被 3-5 年前的各种建议稀释了。

我对 SQL 非常熟悉，并使用 Visual Studio Express 进行开发。

我正在寻找的只是一个很好的资源/链接到最常见的身份验证方法。该网站最终将在互联网上上线，因此需要确保安全。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:05:11.573

我使用[ASP.NET 登录控件](http://msdn.microsoft.com/en-us/library/ms178329%28v=vs.100%29.aspx)。还有其他解决方案，但这是一个领域（很像加密），我认为您最好不要编写自己的解决方案 - 失败的方法太多。

另请参阅[每个程序员都应该了解什么安全性？](https://stackoverflow.com/q/2794016/427192)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:55:03.580

首先，您可以安全发送密码的唯一方法是 SSL。唯一的例外是使用 Windows 集成身份验证的 Internet 站点。Buti 在这种情况下您不发送密码（所以它仍然可以）。

第二部分是存储密码。如果您将它们简单存储，那么有人可以破解您的服务器并获取它们。这就是你应该存储密码哈希的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:55:24.367

对我来说，最好的方法是 2 路身份验证。我使用短信服务和密码。密码存储在数据库中，其中每个字符都使用 SALT 进行散列（SHA512 或 md5）。Salt是必要的，因为如果有人进入您的数据库，他可以找到密码并在字典中检查它们。我强制用户从短信中随机输入一些密码字符+有效代码。

当用户多次输入数据失败时，也可以使用 CAPTCHA。

您应该记录此类无效的登录尝试，如果您认为此帐户可能受到攻击，您应该阻止它并通知用户。

# android - iOS 从另一个启动应用程序

> ID：16038950
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:51:45.093
> 
> 标签：android, iphone, ios

是否有可能在 Iphone（或 android）上有一个应用程序，它可以拉入手机的本地应用程序并从该应用程序中启动它们？如果可能的话，您认为进入他们的应用商店是否符合 Apple 的标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:59:26.753

是的，您可以像这样使用...

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"appURL"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:09:34.370

是的，您首先必须为要启动的应用程序创建一个方案。例如`myapp://`，这样，当一个 URL 以您的方案开头时，它将被打开（或者如果有更多具有相同方案的应用程序，则可以选择打开）。

您在 XXX-Info.plist 中设置了方案，这是一个示例：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>com.mycompany.myapp</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>myapp</string>
        </array>
    </dict>
</array> 
```

设置方案后，您可以通过调用 safari 或其他应用程序打开它

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"myapp://myparameters"]]; 
```

[点击这里获取更多信息](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

**更新**

对于Android，请参阅[此答案](https://stackoverflow.com/questions/4674391/calling-an-app-from-another-app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:55:11.460

是的，可以在 iPhone 中使用`openURL`.

注册自定义 URL 方案

![在此处输入图像描述](https://i.stack.imgur.com/bEFgW.png)

然后

`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"rajneesh071://"]];`

只需点击此链接以获取详细信息[链接](http://rajneesh071.blogspot.in/2013/03/ios-sdk-open-other-app-from-our-app.html)

# android - Android 编码标准

> ID：16038952
> 
> 赞同：1
> 
> 时间：2013-04-16T13:51:51.290
> 
> 标签：android, xml, standards, constants

我的代码中有一个常量值，如下所示。

```
static final int CONNECTION = 20000; 
```

我需要为字符串（string.xml）维护一个用于常量值的 xml 文件（或者另一种存储常量的方式，而不是我的 java 类）

请为此提出适当的解决方案

另外，是否有任何可用于编码标准的文档

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:56:00.123

您可以像这样将此值存储为整数资源

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <integer
        name="Connection"
        >20000</integer>
</resources> 
```

有关更多信息，这里是链接[链接](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:56:07.757

您可以像字符串一样将整数存储在 res/value 中。看[这里](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)。从文档中您可以看到示例

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <integer
        name="integer_name"
        >integer</integer>
</resources> 
```

在这种情况下，我个人创建了另一个类来存储所有静态 final int。

# c++ - 未处理的异常错误

> ID：16038954
> 
> 赞同：2
> 
> 时间：2013-04-16T13:51:55.833
> 
> 标签：c++, unhandled-exception

我正在经历一个`unhandled exception`内在`xutility`

```
if (_Myproxy != 0)
    {   // proxy allocated, drain it
    _Lockit _Lock(_LOCK_DEBUG);

    for (_Iterator_base12 **_Pnext = &_Myproxy->_Myfirstiter;
        *_Pnext != 0; *_Pnext = (*_Pnext)->_Mynextiter)
        (*_Pnext)->_Myproxy = 0;  <------- unhandled exception here
    _Myproxy->_Myfirstiter = 0;
} 
```

我没有控制权`xutility`。这`unhandled exception`列火车起源于

```
std::string BinarySearchFile::readT(long filePointerLocation, long sizeOfData) 
{
     try{
          if(binary_search_file){
              std::string data;
              binary_search_file.seekp(filePointerLocation);
              binary_search_file.seekg(filePointerLocation);
              binary_search_file.read(reinterpret_cast<char *>(&data), sizeOfData);

              return data;  <------- branch into xutility and subsequent unhandled exception

          }else if(binary_search_file.fail()){
              throw CustomException("Attempt to read attribute error");
          }

     }
     catch(CustomException &custom_exception){  // Using custom exception class
          std::cout << custom_exception.what() << std::endl;
     }

} 
```

通常，`return`将继续

```
std::string BinarySearchFile::read_data(long filePointerLocation, long sizeOfData){
    return readT(filePointerLocation, sizeOfData);
} 
```

随后又回到原来的通话

```
attributeValue = data_file->read_data(index, size); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:03:52.860

`data`当您尝试读入字符串时，该字符串为空。那会在某处破坏内存。

你应该添加`data.resize(sizeOfData)`分配空间，然后读入它的缓冲区

```
binary_search_file.read(&data[0], sizeOfData);
                             ^^^ 
```

不进入字符串对象本身。

# debugging - VB6 - 通过注册表设置调试模式？

> ID：16038955
> 
> 赞同：0
> 
> 时间：2013-04-16T13:51:57.087
> 
> 标签：debugging, logging, vb6

我有一个 VB6 应用程序，我试图以不同的方式注销。我所拥有的是注册表（现有）中的一个标志，它说明应用程序是否设置为调试模式以便它注销。

在我的代码中，我有很多 if 语句来检查这是否是真的。这意味着有很多处理时间来检查语句是否为真，这可能并不多，但因为它经常这样做，所以我想减少开销。

代码中充满了这样的语句

```
If isDebug = True Then
    LogMessage("Log what is happening")
End If 
```

所以我正在寻找的是一种更好的方法来做到这一点。我知道我可以在 Project Properties -> Make 中设置调试模式，但这需要在构建 .exe 之前设置，并且我希望能够通过注册表项在生产中设置它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:12:21.360

考虑使用命令行参数来设置调试模式。我曾经这样做过。

```
Dim sCommandLine() As String
sCommandLine = Split(Command$)
For I = 0 To UBound(sCommandLine)
    ' do something with each arg
Next I 
```

您还可以在 IDE 中保留命令行参数，以便在调试时始终拥有它们。在 IDE 外部运行时，使用其中的参数创建已编译应用程序的快捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:55:40.603

在我的很多代码中，我所做的事情几乎与您的想法相同。添加这个：

```
Sub LogDebug(ByVal strMsg As String)
    If (isDebug) Then
        LogMessage(strMsg)
    End If
End Sub 
```

然后只需调用`LogDebug`您的主程序主体，或者`LogMessage`如果您总是想要记录它，则直接调用，无论调试标志如何。

我假设`isDebug`这里是一个布尔值。如果是函数调用，您应该只创建一个在代码开头设置的全局标志，并检查它而不是一遍又一遍地查看注册表。我不认为检查布尔值是一个很大的处理负载，是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:41:23.250

如果设置了运行时标志，您想调用一个函数。我能看到的唯一可以更快的是：

```
If isDebug Then
    LogMessage("Log what is happening")
End If 
```

但我怀疑这两者都会导致性能问题。大多数日志框架都会推广这样的代码，甚至将标志/日志级别作为函数的参数。只要确保您没有在条件语句之外不必要地计算日志消息的其他地方。

您可以评估为什么需要记录以及生成的日志是否对此有效。

如果您正在寻找可以使用 VB 错误处理捕获的问题，请考虑使用像[HuntERR31](http://www.findthatzipfile.com/search-26883831-hZIP/winrar-winzip-download-8099.zip.htm)这样的良好错误处理库。有了它，您可以选择仅记录错误而不是您现在正在执行的调试消息。即使您不使用该库，文档对 VB 中的错误处理也有很好的描述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:19:46.150

另一个答案仍然：

将您的注册表标志读入您的应用程序，使其成为基于会话的事物（即，当您关闭并重新启动应用程序时，将再次检查该标志 - 每次测试都检查注册表没有意义）。

然后（根据 Tom 的帖子）将值分配给全局变量并对其进行测试 - 比函数快得多。

为了加快日志记录，您可能需要考虑在应用程序中确定字符串缓冲区的大小，一旦达到特定大小，将其触发到您的日志文件中。显然，这种方法存在一定的问题，即内存的波动性，但如果您希望通过磁盘访问获得性能，我会推荐这种方法。

如果您可以向我们展示一些用于您的日志记录过程等的代码，这当然会容易得多。

# azure - 如何将 htaccess RewriteCond http_cookie 重写为 web.config 替代方案？

> ID：16038959
> 
> 赞同：1
> 
> 时间：2013-04-16T13:52:14.507
> 
> 标签：azure

我很难将以下 RewriteCond 重写为 web.config 替代方案，希望能提供任何帮助。

```
RewriteCond %{HTTP_COOKIE} !^.*wordpress_logged_in_.*$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:34:15.897

使用IIS 7 中的[URL 重写](http://www.iis.net/downloads/microsoft/url-rewrite)模块，带条件的重写规则如下所示：

```
<rules>
    <rule name="something">
        <match ... />
        <conditions>
            <add input="{HTTP_COOKIE}" pattern="^.*wordpress_logged_in_.*$" />
        </conditions>
        <action ... />
    </rule>
</rules> 
```

您还可以在本地 IIS 7 安装中使用 URL Rewrite GUI 界面来帮助构建您的重写规则，然后打开相应的 web.config 以查看它的外观。

# actionscript-3 - Flash播放器全屏控制栏要大吗？

> ID：16038963
> 
> 赞同：0
> 
> 时间：2013-04-16T13:52:22.347
> 
> 标签：actionscript-3, flash, fullscreen

我正在开发一个 Flash 播放器，但我遇到了全屏模式的问题，因为当我制作全屏时，所有其他元素都会变大。关于解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:58:18.547

[检查本手册](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e31.html#WS0D75B487-23B9-402d-A52D-CB3C4CEB9EE4)。如果您尝试设置`stage.scaleMode=StageScaleMode.NO_SCALE`然后请求其宽度和高度，则可以调整播放器内容以适应提供的尺寸，并具有适当的内部缩放。这将让您控制哪些元素被放大，哪些元素将保持其大小。

# ruby-on-rails - 轨道中的考拉宝石相册照片

> ID：16038973
> 
> 赞同：2
> 
> 时间：2013-04-16T13:52:35.970
> 
> 标签：ruby-on-rails, facebook, photos, koala

我试图通过首先访问用户相册，通过 Koala gem 在我的 rails 3.12 应用程序上显示 facebook 相册照片。我知道如何获得专辑：

```
u.facebook.get_connections('me', 'albums') 
```

但没有直接访问个人相册的照片。相册对象中有一个指向 facebook 页面的链接，该页面显示所有相册照片，仅此而已。我需要能够通过图形 API 进一步深入了解以获取单个照片对象，但我不知道如何使用考拉这样做。我更喜欢基于考拉的解决方案，但我对任何解决方案都持开放态度。

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:41:47.440

我可以使用以下方法深入了解并访问相册中的照片：

```
current_user.facebook.get_connections("me","albums", :fields => "name, photos.fields(source)") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:15:09.357

First, you have to use the "user_photos" access_token. and then fetch the id of the album usign :

```
albums = u.facebook.get_connections('me', 'albums') 
```

then extract the album you want, and use the id of the album to fetch photos :

```
get_connections('#{album['id']}', 'photos') 
```

I haven't tried it in ruby (I used the graph explorer), so tell me if it works :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-05T00:49:06.183

This just worked for me! @graph.get_connections(album['**ALBUM_ID**'], "photos"])

# android - 在 Play 商店中发布 apk 后，谷歌地图显示灰色瓷砖

> ID：16038975
> 
> 赞同：3
> 
> 时间：2013-04-16T13:52:43.323
> 
> 标签：android, google-maps, google-api, google-maps-android-api-2, api-key

我使用 Google Maps Android API v2 在我的应用程序中显示一些地图片段。一切正常，直到我的应用程序在 Play 商店中发布（我在发布之前检查了我导出的 APK，并且在侧面加载时它工作得很好）。

我有一个假设，但首先是这种情况：我编写并签署了应用程序（API 密钥也来自我的帐户）。当应用程序准备就绪时，另一个人（在 Play 商店中拥有另一个帐户）正在发布应用程序。

是否可能必须从发布应用程序的同一帐户生成 API 密钥？我感谢每一个提示！！！

我的清单如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="de.example.android"
android:versionCode="9"
android:versionName="2.2.0.1" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<permission android:name="de.example.android.permission.MAPS_RECEIVE"
            android:protectionLevel="signature"></permission> 
<uses-permission android:name="de.example.android.permission.MAPS_RECEIVE"/>    

<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-feature android:name="android.hardware.location" android:required="false"/> 
<uses-feature android:name="android.hardware.location.network" android:required="false"/>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-feature android:name="android.hardware.location.gps" android:required="false"/>

<uses-feature android:glEsVersion="0x00020000" android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppBaseTheme">

   <!-- GOOGLE MAPS START -->
        <meta-data 
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="..." />
   <!-- GOOGLE MAPS END -->

    <activity
        android:name="de.example.android.SplashScreen"
        android:label="@string/app_name" 
        android:screenOrientation="portrait"
         android:theme="@style/Theme.Splash">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="de.example.android.MainActivity"
        android:screenOrientation="portrait"
        android:icon="@drawable/ic_launcher_activity"
        android:theme="@style/AppBaseTheme"
        >
    </activity>

    <!-- This Activity is called from a lib  -->
    <activity
     android:name="de.example.testlib.android.MapActivity">                            
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:18:19.107

发布应用程序的人是否使用其他密钥库退出了 APK？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:24:24.217

您是否使用创建发布 apk 时使用的密钥库和别名为地图生成了密钥？之后你把它交给你的地图视图了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T10:51:49.267

Google 会生成两个密钥，一个用于测试，一个用于生产。在为最终版本编译 apk 之前，您是否将密钥更改为生产密钥？

# sql - APEX Shuttle - 获得更多选定值

> ID：16038979
> 
> 赞同：0
> 
> 时间：2013-04-16T13:52:50.557
> 
> 标签：sql, plsql, oracle-apex

我从几天开始就在 APEX 上工作，我添加了一个 Shuttle，还添加了一个文本字段，其中包含处理所选值后的内容。

对于班车，我制作了一个 LOV（包含车站）示例：Be Fd Au ...

目标是获取包含所选电台的所有对象，但如果我运行选择，我将获得更多对象 - 也是不包含任何所选电台的对象，但我不知道为什么

在 SQL 语句中，我有以下内容：（ds_bess001 是车站的字段）

```
AND INSTR (:P4_BES_EN, zl.ds_bes001) > 0 
```

对于班车，我使用下面的 PL/SQL

```
DECLARE
   v_selected   APEX_APPLICATION_GLOBAL.VC_ARR2;
   v_in_text    VARCHAR2 (500) := '';
BEGIN
   v_selected := APEX_UTIL.STRING_TO_TABLE (:P4_BES);

   FOR i IN 1 .. v_selected.COUNT
   LOOP
      v_in_text := v_in_text || v_selected (i);

      IF i < v_selected.COUNT
      THEN
         -- v_in_text := v_in_text || ', ';
         v_in_text := v_in_text || ',';
      END IF;
   END LOOP;

   -- v_in_text := '''' || replace(:P1_SHUTTLE, ':', ''',''') || '''';
   :P4_BES_EN := v_in_text;
END; 
```

有人可以帮我吗？！

现在我发现了问题，我得到了变量示例 Ap'，'Fd'，'Ab 问题是变量在开头和结尾错过了 '

有人可以告诉我如何在变量中添加缺少的 ' 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:49:19.140

试试看

```
:P4_BES_EN := ''''||v_in_text||''''; 
```

for ' 在开头和结尾。

我认为你必须将你的 instr 更改为这样的东西

```
:P4_BES_EN := ','''||v_in_text||''',';

AND INSTR (:P4_BES_EN, ','||zl.ds_bes001||',') > 0 
```

例如：

```
DECLARE
  v_in_text    VARCHAR2 (500) := 'Ap'',''Fd'',''Ab';
BEGIN
  v_in_text :=  ','''||v_in_text||''',';
  dbms_output.put_line(v_in_text);
END; 
```

# node.js - Express：为所有模板传递变量

> ID：16038984
> 
> 赞同：4
> 
> 时间：2013-04-16T13:53:02.620
> 
> 标签：node.js, express

我尝试将变量传递给所有模板。在 app.js 我写道：

```
app.use(function(req, res, next){
       res.locals.token = '1234';
       next();
   }); 
```

但是如果我尝试在模板中获取我的变量，例如

```
span= token 
```

我得到一个错误='未定义令牌'。怎么了？

我使用 Express 3.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:11:49.190

问题可能与*您*在 app.js 中放置该函数的位置有关。它必须在路由中间件之前，否则它不会被调用。

假设您的 app.js 文件有如下一行：

```
app.use(app.router) 
```

然后你的函数需要放在前面。

# java - 带有 jQ uery mobile html5 嵌入 flash 的 Android PhoneGap

> ID：16038988
> 
> 赞同：1
> 
> 时间：2013-04-16T13:53:15.940
> 
> 标签：java, android, flash, cordova, jquery-mobile

我是 android 和 Java 的完全新手，我的应用程序可以在我的 android 平板电脑上运行，除了我的嵌入式 Flash 文件。我知道 flash 可以在 android 中运行，因为我安装了 flash 播放器，我已经在 Mozilla Firefox 中测试了我的 index.html，它显示了嵌入的 flash 文件，我已经在 Google Chrome 中测试了我的 index.html，嵌入的 flash 文件没有工作。有没有一种方法可以从我的 index.html 中读取我的 flash 文件，以便当它作为应用程序导出时它可以显示 flash 电影？

```
 <!--Embedded flash movie-->
      <p>
       <object width="710" height="493">
      <param name="movie" value="welcome.swf">
      <embed src="yaa/welcome.swf"
             width="710" height="493"> </embed>
    </object>
      </p> 
```

我已经尝试了从 swf 对象到 webview 的所有内容，清单权限很好，但都无法显示我的 flash 电影。www 文件夹包含 assets 文件夹， assets 文件夹的结构是；yaa（包含 flash swf 文件的文件夹）、cordova 2.5.0、index.html、css、javascripts。java代码是：

```
package com.helloapp.namespace.myhelloworld; 
```

导入 org.apache.cordova.DroidGap；

导入android.os.Bundle；

```
public class MyPhoneGapActivity extends DroidGap {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl("file:///android_asset/www/index.html");
}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-12T09:33:44.657

android 4.4+ 不支持 flash player(fly/swf) 视频

# html - 徽标的链接仅部分功能

> ID：16038989
> 
> 赞同：0
> 
> 时间：2013-04-16T13:53:17.223
> 
> 标签：html, css, hyperlink, graphical-logo

我目前正在使用两个文件：test.html 和 style.css，并且徽标仅部分用作链接。有什么办法可以解决这个问题吗？

可以在这里看到问题的预览：[网站测试](http://www.mindtale.com/test.html)

测试.html

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css"> 
<title>Mindtale</title>
</head>

<body>

<div id="headerlogo">
<a href="index.html"><img src="images/logo.png"></a>
</div>

<div id="headerlink1">
<a href="portfolio.html">Portfolio</a>
</div>

<div id="headerlink2">
<a href="contact.html">Contact</a>
</div>

<div id="headerimg"></div>

<div id="content1">
</div>

<div id="footer">
Mindtale &copy; 2013
</div>
</div>

</body>
</html> 
```

样式.css

```
html { 
height:100%; /* fix height to 100% for IE */
max-height:100%; /* fix height for other browsers */
background: url(images/bg.jpg) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
}

div#headerlogo {
z-index:0;
position:fixed;
left: 41%;
top: 24px;
}

div#headerlink1 {
z-index:2;
position:fixed;
top:50px;
left:18%;
width:100%;
color:#999;
padding: 0px;
}

div#headerlink2 {
z-index:3;
position:fixed;
top:50px;
left:78%;
width:100%;
color:#999;
padding: 0px;
}

div#headerimg {
position:fixed;
background: url(images/header.png) no-repeat center;
height: 102px;
top:0px;
left:0px;
width:100%;
padding: 0px;
}

div#content1 {
position:fixed;
width:100%;
color:#222;
top: 70px; 
bottom: 0; 
left: 0; 
right: 0;
padding: 25px;
overflow: auto;
}

div#footer {
position:fixed;
bottom:0px;
left:0px;
width:100%;
color:#999;
background:#333;
padding: 8px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:56:42.710

采用：

```
#headerlogo a {
   display: block;
} 
```

并`width:100%;`从 headerLink div 中删除，因为它们覆盖了您的徽标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:56:35.407

您的`headerlink1`div 部分位于徽标*上方。*

这使得那部分标志无法点击。

怎么修？更改设计 - 可能为不同的链接设置两个 div - 不会掩盖徽标的东西。

# desire2learn - 使用 Valence 上传文件的大小限制

> ID：16038991
> 
> 赞同：1
> 
> 时间：2013-04-16T13:53:18.840
> 
> 标签：desire2learn

使用 Valence 学习框架 API 上传的文件是否有大小限制，如下所述：http: [//docs.valence.desire2learn.com/basic/fileupload.html#simple-uploads](http://docs.valence.desire2learn.com/basic/fileupload.html#simple-uploads)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:14:25.760

D2L 学习环境端的文件大小限制是在部署时设置的，通常不会更改（无需与 D2L 支持人员进行重大交互和/或围绕客户端部署与 D2L 协商）。

文件大小限制值不是 API 客户端可发现的值，也不是真正的意图。通常，限制设置为大约 488 MB，但这不是您可以假设的值：如果您正在使用特定的 LMS 后端，您可以寻求与 LMS 管理员确认大小，但如果您想要更普遍地使用 D2L 学习服务后端，那么您应该假设任何大于 488 MB 的东西都可能会导致您出现问题。

请注意，大小限制适用于[简单上传数据包中的](http://docs.valence.desire2learn.com/basic/fileupload.html#simple-uploads)*整个*有效负载：仅包含文件数据的数据包和包含 JSON 部分后跟文件数据的数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:42:03.307

大小可以通过服务器上的 PHP 配置来限制：upload_max_filesize 和 post_max_size 选项。

# grails - Grails 战争和跳过测试

> ID：16038999
> 
> 赞同：0
> 
> 时间：2013-04-16T13:53:38.107
> 
> 标签：grails

我正在寻找一种方法来跳过对 grails 战争命令的测试。通常这是 maven 中的 -DskipTests，但无法为 grails 战争找到类似的东西。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:11:30.127

该`war`命令不依赖于该`test-app`命令，因此在任何情况下都不应该运行测试。