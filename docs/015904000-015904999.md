# StackOverflow 问答 15904000-15904999

# select - CQL Cassandra OR 运算符

> ID：15904006
> 
> 赞同：10
> 
> 时间：2013-04-09T14:00:46.857
> 
> 标签：select, cassandra, cql

我试图在 CQL 中做这样的事情：

```
SELECT address FROM Person WHERE age= 20 or age= 25 
```

但是 Cassandra 不支持 OR 运算符，我也不能使用 IN(20, 25)，因为年龄不是主键。有没有办法解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-19T16:03:14.090

你可以这样做

SELECT address FROM Person WHERE age IN (20, 25)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T04:49:46.523

您将必须在客户端执行析取操作，或使用 Hive 或 Pig 之类的分析工具。

# c# - 在尝试 HttpClient 连接之前测试开放端口

> ID：15904008
> 
> 赞同：3
> 
> 时间：2013-04-09T14:00:52.267
> 
> 标签：c#, .net, .net-4.5, dotnet-httpclient

[HttpClient](http://msdn.microsoft.com/en-us/library/hh193681.aspx)类的各种方法（GetAsync 等）采用 Uri 对象或字符串并尝试打开到指定位置的连接。但是，在我的情况下，远程主机很可能没有在监听（端口已关闭并将被主动拒绝；它在我们的 LAN 内）。

我宁愿不依靠捕获异常来处理这种情况，特别是因为这些方法会引发[AggregateException](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)，然后我必须对其进行筛选。

有没有更好的方法来检测这种情况，同时仍然获得 HttpClient 类的好处（远程主机是 WebApi 服务）？我是否应该使用 TcpClient 之类的东西预先检查端口是否正在侦听？当然，这涉及调用之间的竞争条件。我希望采用 HttpMessageHandler 的构造函数重载会有所帮助，但[WebRequestHandler](http://msdn.microsoft.com/en-us/library/system.net.http.webrequesthandler.aspx)中的任何内容都不会跳出我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:12:51.997

您可以使用`Socket.Connect(string host, int port)`

```
 private static bool TestForOpenHttpPort(string host)
    {
        Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        try
        {
            s.Connect(host, 80);
            return true;
        }
        catch (SocketException)
        {
            return false;
        }
        finally
        {
            ((IDisposable)s).Dispose();
        }
    } 
```

简单用法：

```
if (TestForOpenHttpPort("google.com"))
{
    // socket is open
} 
```

# android - 在应用程序启动时已连接的设备上打开 USB 主机通信

> ID：15904019
> 
> 赞同：1
> 
> 时间：2013-04-09T14:01:17.193
> 
> 标签：android, usb, host

我正在开发一个应用程序，我需要使用平板电脑的 USB 主机模式来管理设备。

此时，我只能在设备连接处激活 USB。工艺步骤：

1.  没有应用程序启动，设备连接。

2.  Android 问我是否要启动我的应用程序

3.  我接受
    然后应用程序启动，我可以使用 USB 连接。

但是，这不是我想做的：

1.  关闭平板电脑，连接设备

2.  打开平板电脑

3.  手动启动应用程序

4.  初始化与设备的 USB 连接。

事实是，实际上，我需要手动断开/连接平板电脑上的 USB 才能建立连接，但在我的情况下，设备已经连接到平板电脑，然后我需要在不断开连接的情况下初始化连接/重新连接USB。

我已经尝试过 Google 在 USB Host connexion 页面上提供的关于广播接收器的示例，但它不起作用，或者我不太了解它。

我的问题是：
有什么方法可以打开与已经连接的 USB 主机设备的连接？
通过女巫的方式，我需要搜索以找到这个被阻止的解决方案：D

这里已经实现的代码有助于理解我的问题：

清单.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="..."
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="13" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/..." 
        android:theme="@android:style/Theme.Holo.NoActionBar.Fullscreen" >

        <activity
            android:name="...Activity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <intent-filter>
                <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
            </intent-filter>

            <meta-data
                android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
                android:resource="@xml/device_filter" />
            </activity>
    </application>
</manifest> 
```

文件 res/xml/device_filter.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <usb-device vendor-id="5455" product-id="8238" />
</resources> 
```

然后我的 Activity 中的 onResume() ：

```
@Override
protected void onResume() {
    super.onResume();

    Intent intent = getIntent();
    String action = intent.getAction();

    if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) {

        UsbDevice device = (UsbDevice) intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
        UsbManager usbManager = (UsbManager) activity.getSystemService(Context.USB_SERVICE);

    } else if (UsbManager.ACTION_USB_DEVICE_DETACHED.equals(action)) {
    }
} 
```

最后我的方法允许建立连接：

```
protected void open(Object o) throws DeviceException {
    if (device != null && device.getVendorId() == 5455 && device.getProductId() == 8238) {
        int nbEndPoint = 0;
        for (int i = 0; i < device.getInterfaceCount(); i++) {
            UsbInterface usbInterface = device.getInterface(i);

            for (int j = 0; j < usbInterface.getEndpointCount(); j++) {
                UsbEndpoint usbEndPoint = usbInterface.getEndpoint(j);
                nbEndPoint++;
                switch (nbEndPoint) {
                case 1:
                    this.pipeWriteData = usbEndPoint;
                case 2:
                    this.pipeReadCommandResult = usbEndPoint;
                case 3:
                    this.pipeReadAutoStatus = usbEndPoint;
                case 4:
                    this.pipeReadImageData = usbEndPoint;
                }
            }
        }

        usbConnection = manager.openDevice(device);
        if (usbConnection == null || !usbConnection.claimInterface(device.getInterface(0), true)) {
            usbConnection = null;
            throw new DeviceException(DeviceException.UNKNOW_ERROR);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:59:33.437

我的猜测是您的应用程序可能与侦听器建立了通信，该侦听器正在寻找刚刚由 USB 设备建立的连接。如果打印机已经连接并且您的应用程序正在等待该侦听器，则不会发生，因为您的回调函数不会被调用，USB 打印机在您的应用程序运行之前已经存在。这是一个猜测，因为我没有看到您的代码，但我在其他情况下看到了这种行为。

在问题中获得更多信息后进行编辑。正如我在评论中所说，如果设备在启动时已经连接，我相信启动您的应用程序（...USB_DEVICE_ATTACHED）的事件不会发生。[为了证明这一点，你应该用logcat（查看）](http://developer.android.com/tools/help/logcat.html)和[（写）](http://developer.android.com/tools/debugging/debugging-log.html)添加很多痕迹在您的代码中，在您的 onCreate、onResume 中，并且可能在其他地方。这样做，您将看到每个部分是否执行您所期望的。我的猜测是，当您启动并且 USB 设备已经连接时，它根本不会执行。如果我明白你想要的是这个。连接设备时，您想启动您的应用程序。但是如果设备在启动时已经存在，您希望您的应用程序无论如何都可以启动并连接到 USB。我解决这个问题的方法是让你的应用程序寻找目标 USB 设备的存在。存在与“USB_DEVICE_ATTACHED”不同，这意味着它只是在最后几毫秒内连接。我还将在“USB_DEVICE_ATTACHED”上注册一个侦听器，该侦听器将在设备连接上启动您的代码，我还将在“BOOT_COMPLETED”上设置一个侦听器

# php - 在 OL 中打印 JSON 错误

> ID：15904029
> 
> 赞同：0
> 
> 时间：2013-04-09T14:01:31.487
> 
> 标签：php, javascript, json, list

又是我。

我有一些由 PHP 创建的错误，如下所示：

```
if (strlen($event_name) < 1){ echo $result['error'] = "<li>You must enter an event name</li>";}
if (strlen($venue_name) < 1){ echo $result['error'] = "<li>You must enter a venue name</li>";}
if (strlen($event_date) < 1){ echo $result['error'] = "<li>You must enter an event date - if not please write TBC</li>";}
if (strlen($address_l1) < 1){ echo $result['error'] = "<li>You must enter an address</li>";}
if (strlen($postcode) < 1){ echo $result['error'] = "<li>You must enter a postcode</li>";}
if (strlen($country) < 1){ echo $result['error'] = "<li>You must enter a country</li>";} 
```

然后最后我得到了：

```
echo json_encode($result); 
```

要将这些错误打印到我的 OL，我得到了这个：

```
$('#errorbox').html(result.error); 
```

然而，没有任何结果......因为它没有出现。

编辑：这是完成 AJAX 后调用的函数：

```
}, function(result) {
        if (result.success == true) {
            $('#errorbox').html(result);
        } else if (result.success == false) {
            $('#errorbox').html("Not working dude!");
        }
    }, 'json');
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:11:14.430

您的代码正在用下一个错误覆盖任何错误。为避免这种情况，请连接消息：

```
$result['error'] = '';
if (strlen($event_name) < 1){ $result['error'] .= "<li>You must enter an event name</li>";}
if (strlen($venue_name) < 1){ $result['error'] .= "<li>You must enter a venue name</li>";}
if (strlen($event_date) < 1){ $result['error'] .= "<li>You must enter an event date - if not please write TBC</li>";}
if (strlen($address_l1) < 1){ $result['error'] .= "<li>You must enter an address</li>";}
if (strlen($postcode) < 1){ $result['error'] .= "<li>You must enter a postcode</li>";}
if (strlen($country) < 1){ $result['error'] .= "<li>You must enter a country</li>";} 
```

还要确保 HTML 包含带有 id的`ul`or div ，并且 jQuery 已正确加载。`ol``errorbox`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T14:09:48.443

您可能想使用`+=`，而不是`=`，后者会覆盖以前的值。您还希望将`echo`语句放在`if`s 字符串中。您的原始代码顶部有很多杂乱无章的东西；`<li>`与各种s相呼应的剩菜。

```
$result['error']="";
if (strlen($event_name) < 1) { $result['error'] .= "<li>You must enter an event name</li>";}
if (strlen($venue_name) < 1) { $result['error'] .= "<li>You must enter a venue name</li>";}
if (strlen($event_date) < 1) { $result['error'] .= "<li>You must enter an event date - if not please write TBC</li>";}
if (strlen($address_l1) < 1) { $result['error'] .= "<li>You must enter an address</li>";}
if (strlen($postcode) < 1) { $result['error'] .= "<li>You must enter a postcode</li>";}
if (strlen($country) < 1) {  $result['error'] .= "<li>You must enter a country</li>";} 
```

现在，对 PHP 页面的 GET 请求应该可以工作了。

# .net - 获取我的应用在 Google Drive 中创建的文件

> ID：15904031
> 
> 赞同：0
> 
> 时间：2013-04-09T14:01:36.037
> 
> 标签：.net, google-drive-api

我正在使用我的应用程序中的 Google Drive SDK 从 Google Drive 中获取文件。这允许我从驱动器中获取所有文件，但现在我只需要由我的应用程序创建的文件。现在我已经创建了一个带有显示名称的常量字符串，并`OwnerNames`与`File`. 但是，如果我明天在附有`Client_Id`和的电子邮件中更改我的显示名称怎么办`Client_Secret`。

谁能帮我适当过滤一下？或者有没有办法基于`Client_Id`或`Client_Secret`动态获取显示名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:38:58.403

查询`mimeType = 'application/vnd.yourcompany.type'`文件资源。有关搜索/过滤文件的更多详细信息，请访问[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

# vim - Vim - 将 EX 模式的输出转换为变量

> ID：15904032
> 
> 赞同：1
> 
> 时间：2013-04-09T14:01:36.750
> 
> 标签：vim, ex

我正在编写一个 vim 脚本，我需要在其中获取当前缓冲区的第一行。在 Ex 模式下，我可以简单地输入`1`，它会显示我想要的内容。如何将 ex 命令的输出放入 vim 中的变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:19:07.360

克里斯的回答是正确的方法。

但是请注意，您可以使用该`:redir`命令将 Ex 命令的输出捕获到变量中：

```
:let myvar = ""
:redir => myvar
:command
:redir END 
```

有关`:h :redir`更多信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:09:08.387

你想要的表达式是`getline(1)`. 因此，`let x = getline(1)`.

# python - 在服务器上运行 selenium 浏览器 (Flask/Python/Heroku)

> ID：15904035
> 
> 赞同：16
> 
> 时间：2013-04-09T14:01:51.803
> 
> 标签：python, heroku, selenium, web-scraping, flask

我正在抓取一些似乎对它有很好保护的网站。我可以让它工作的唯一方法是使用 Selenium 加载页面，然后从中刮掉东西。

目前这适用于我的本地计算机（当我访问我的页面时会打开和关闭一个 Firefox 窗口，并且它的 HTML 在我的脚本中进一步处理）。但是，我需要我的刮刀可以在网络上访问。刮板嵌入在 Heroku 上的 Flask 应用程序中。有没有办法让 Selenium 浏览器在 Heroku 服务器上运行？或者有没有可以工作的托管服务提供商？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-03T23:41:23.830

Heroku，虽然很棒，但有一个主要限制，即不能使用自定义软件，或者在许多情况下，不能使用库。在提供易于使用、集中控制、托管的堆栈时，Heroku 剥离了他们的服务器以防止其他用途。

这归结为 Heroku dyno 上没有 Xorg。缺乏 Xorg 和缺乏安装自定义软件的能力意味着没有 xvfb，也没有能力运行 selenium 期望存在的浏览器。此外，浏览器通常不可用。

使用像 AWS 这样的云产品会带来更好的运气，您可以在其中安装自定义软件，包括 firefox、xvfb（以避免需要所有 Xorg 开销），当然还有其余的抓取堆栈。[这个答案](https://stackoverflow.com/a/13055412/2744789 "无法从 AWS 机器上的 python 中的 selenium 调用 firefox")解释了如何正确地做到这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-11T10:12:09.287

有一些 buildpack 可以让 selenium 在 heroku 上工作。

在下面添加构建包。

```
1) heroku buildpacks:add https://github.com/kevinsawicki/heroku-buildpack-xvfb-google-chrome/
2) heroku buildpacks:add https://github.com/heroku/heroku-buildpack-chromedriver 
```

并将 heroku 堆栈设置为 cedar-14，如下所示，因为 xvfb buildpack 仅适用于 cedar-14。

```
heroku stack:set cedar-14 -a stocksdata 
```

然后将谷歌浏览器位置指向如下

```
options = ChromeOptions()
options.binary_location = "/app/.apt/usr/bin/google-chrome-stable"
driver = webdriver.Chrome(chrome_options=options) 
```

# loops - 如何在 spss 语法中循环 kaplan-meier 命令？

> ID：15904036
> 
> 赞同：1
> 
> 时间：2013-04-09T14:01:57.877
> 
> 标签：loops, spss

我正在使用这个 kaplan-meier 命令在 SPSS 中工作：

```
KM data BY sample
  /STATUS=status(0)
  /PRINT TABLE MEAN
  /PLOT SURVIVAL HAZARD
  /TEST LOGRANK BRESLOW TARONE
  /COMPARE OVERALL POOLED. 
```

这没问题，但是我必须处理很多数据，我正试图将这些数据放在一个语法文件中。我可以执行几个 kaplan-meier 命令的循环，其中数据通过一组变量（例如 {time0 time1 time2}）和样本通过一组变量（例如 {sample0 sample1 sample2}）。

我尝试使用 DO REPEAT - END REPEAT。但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:41:04.313

DO REPEAT 适用于转换命令。过程不能放在循环内。但是，如果您从 SPSS 社区站点 (www.ibm.com/developerworks/spssdevcentral) 安装 Python Essentials，这很容易做到。如果您可以提供有关要循环的更多详细信息，我们可以解释如何执行此操作。

# google-analytics - 从 Multi-Channel Funnels Reporting API 获取特定数据？

> ID：15904037
> 
> 赞同：3
> 
> 时间：2013-04-09T14:01:58.587
> 
> 标签：google-analytics, google-api, google-analytics-api, google-reporting-api

在我的应用程序中，我使用 Google Analytics Core Reporting API 和 Multi-Channel-Funnels Reporting API 从我的帐户获取流量和转化数据。

为了获取流量数据，我使用 Core Reporting API 中的 GET 命令。

在这个命令中，我给出了显示参数（维度和指标）以及为我的请求过滤选项数据的必要条件 - 过滤器和分段（我使用动态分段）。以下是其中一个查询的示例：

```
GET https://www.googleapis.com/analytics/v3/data/ga?
ids=ga:XXXXXXXXXX &
start-date=2013-03-05 &
end-date=2013-04-04 &
metrics=ga:visits,ga:pageviewsPerVisit,ga:avgTimeOnSite,ga:percentNewVisits,ga:entranceBounceRate &
dimensions=ga:source,ga:keyword &
filters=ga:visits>0 &
segment=dynamic::ga:medium==CPA,ga:medium==CPC,ga:medium==cpm;ga:campaign!@img_ &
sort=-ga:visits &
key={YOUR_API_KEY} 
```

此查询返回流量数据的结果匹配过滤器和段的条件。

但是当我想用 MCF Reporting API 返回相同数据的数据转换时，我遇到了一个问题。来自 MCF 报告 API 的 GET 命令不包含“段”，并且过滤器不允许写入 OR 条件。

尽管 Google Analytics 的 Web 界面能够应用细分进行数据转换。我读了。我们可以将渠道分组应用于 Web 界面中的查询结果，但它们与帐户相关联。而且因为我使用服务帐户进行身份验证和使用 API，所以对我来说它们不可用。我不知道如何在 API 中应用它们。

我如何过滤瓜的转换请求，他们 udoletvoryali 写上面的条件？

有没有办法解决我的问题？谢谢，对不起我的英语。

# python - 使用 Google Calendar API 按日历 ID 过滤事件？

> ID：15904038
> 
> 赞同：0
> 
> 时间：2013-04-09T14:01:58.900
> 
> 标签：python, google-calendar-api

我正在使用 Python 库，但它似乎仍在 API 的 2 版本上。[我在有关使用日历 ID 过滤事件的文档](https://developers.google.com/google-apps/calendar/v2/developers_guide_python)中找不到它，或者事件本身的属性是对它所属日历的引用。

有什么建议么？

# python - matplotlib 条形图黑色 - 如何删除条形边框

> ID：15904042
> 
> 赞同：75
> 
> 时间：2013-04-09T14:02:08.560
> 
> 标签：python, graph, matplotlib, border

我正在使用 pyplot.bar 但我绘制的点太多以至于条的颜色总是黑色。这是因为条形的边框是黑色的，而且它们太多了，它们都被挤在一起，所以你看到的只是边框（黑色）。有没有办法删除条形边框，以便我可以看到预期的颜色？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-04-09T14:11:31.833

设置`edgecolor`为`"none"`：`bar(..., edgecolor = "none")`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-04-21T17:32:03.927

另一种选择是设置`edgecolor`为您调用中的预期颜色`bar`：

```
# If your intended color is blue, this will work:
bar(. . . , edgecolor='b') 
```

# objective-c - 编译器如何处理 Objective-C 中缺少的参数名称？

> ID：15904043
> 
> 赞同：0
> 
> 时间：2013-04-09T14:02:09.050
> 
> 标签：objective-c, selector

我遇到了别人的代码，它声明了这样的方法：

```
- (void) method:(id)a:(NSString*)b { } 
```

编译器接受此代码，只给出警告：

```
'a' used as the name of the previous parameter rather than as part of the selector 
```

代码用这种类型声明了各种函数，然后通过 NSSelectorFromString 调用它们，使用签名“methodname::”。所以一切都是一致的。

我想知道该方法签名是否只是一个错误，或者是否还有更多。由于它在代码中一直使用，我不认为这是一个错字。我不认识作者，所以我无法判断这是天才的代码还是相反的代码。

'b' 是匿名参数吗？（如果是这样，不应该在“a”和“：”之间写一个空格来更好地表明这一点吗？）不过，我在 ObjC 文档中找不到任何关于 anon parms 的信息。

如果我将语法更改为为第二个参数命名并相应地修复签名引用，行为是否会有任何变化？我计划进行此更改以消除警告，但我想知道我可能会产生一个我不知道的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:07:23.483

您*可以*使用签名`method::`，即使大多数人不推荐它。`:`只需在每个分隔参数之前插入一个空格字符，编译器就会很高兴：

```
- (void) method:(id)a :(NSString*)b 
```

[在Objective-C 编程语言的](http://examples.oreilly.com/9780596809775/ObjC.pdf)第 16 页“消息语法”上， 这被称为*“未标记参数”*或*“没有关键字的参数”*。

当然你也可以改成

```
- (void) method:(id)a withB:(NSString*)b 
```

但这会将选择器更改为`method:withB:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:09:01.363

你描述的一切都非常正确。这是非常糟糕的风格，但从技术上讲，它只是一个双参数选择器，恰好在 second 之前没有文本`:`。我不会调用`b`匿名参数，因为您仍然可以给它一个名称，只是它之前没有任何描述性文本作为选择器名称的一部分。

是的，后面应该有一个空格`a`。

如果你想重命名它，你可以使用 Xcode 的标准 Refactor->Rename 功能并在第二个之前插入一些文本`:`。它将更新所有引用，您应该不会遇到任何问题。

# java - 未知主机异常、Apache HttpClient、Java、wunderground

> ID：15904049
> 
> 赞同：1
> 
> 时间：2013-04-09T14:02:20.770
> 
> 标签：java, android, url, apache-httpclient-4.x, unknown-host

一段时间以来，我一直陷入这个特殊的困境，我搜索了该站点并找到了一些帮助，但不是针对我的特定问题。我正在尝试连接到一个网站以从中提取 JSON 数据。主持人是我不确定的：

```
DefaultHttpClient client = new DefaultHttpClient();
HttpHost targetHost = new HttpHost("www.wunderground.com", 80);
    HttpGet httpGet = new HttpGet(urllink); // urllink is "api.wunderground.com/api/my_key/conditions/forecast/hourly/alerts/q/32256.json"
    httpGet.setHeader("Accept", "application/json");
    httpGet.setHeader("Content-type", "application/json");

    HttpResponse response = client.execute(targetHost, httpGet);

    HttpEntity entity = response.getEntity();
    InputStream instream = entity.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(instream));

    StringBuilder stringBuilder = new StringBuilder();
    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            stringBuilder.append(line + "\n");
        }
    } catch (Exception e) {
        // print stacktrace
        return null;
    } finally {
        try {
            instream.close();
        } catch (Exception e) {
            // print stacktrace
            return null;
        }
    }

    return stringBuilder.toString(); 
```

主机可以是`www.wunderground.com`或`api.wunderground.com`，但是当我尝试其中任何一个时，我都会得到`Unknown host exception`。

**我发现了错误。那是我在android清单中没有权限！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:15:08.140

调用应该类似于：

[http://api.wunderground.com/api/Your_Key/conditions/q/CA/San_Francisco.json](http://api.wunderground.com/api/Your_Key/conditions/q/CA/San_Francisco.json)

或如[API](http://www.wunderground.com/weather/api/d/docs?d=data/index)中所述，

```
GET http://api.wunderground.com/api/Your_Key/features/settings/q/query.format 
```

# javascript - 保存 Javascript 对象

> ID：15904052
> 
> 赞同：0
> 
> 时间：2013-04-09T14:02:26.943
> 
> 标签：javascript, json

我有 javascript 对象树。让我们称之为“家庭”。它可以包含任意数量的某些对象（“父母”），每个对象可以包含任意数量的“子”对象。这个结构中的层数是已知的，树的每一层只包含一种特定的类型。

所有的对象都有数据和方法。

我想将结构化数据保存在数据库中。JSON.stringify() 可以完美地提取数据并保存结构。但是如何回到对象呢？JSON.parse() 失败，因为它重新创建了没有方法的对象。

在这种情况下我该怎么办？我应该编写自己的函数来从字符串重新创建对象吗？或者我应该以某种方式将数据与方法一起保存（似乎是一种浪费）。

正如我所知道的结构，如果有可能指向一个对象并告诉“这是一个父对象”并且它会得到方法，那将非常方便。那时我可以轻松地循环通过它。但我不知道该怎么做，而且我也担心我的构造函数可以将一些值设置为默认值。

对象构造函数看起来像这样：

```
function lines()
{
    this.lines = [];
    this.height = 0.5*theMargin;

    this.addLine = addLine;

    function addLine(newline)
    {
        this.lines.push(newline);
        this.height += newline.height;
    }
}

function aLine()
{
    this.dots = [];
    this.height = 0;
    this.length = indent;

    this.insertDot = insertDot;

    function insertDot(pos,newDot)
    {
        this.dots.splice(pos,0,newDot);
        this.length += newDot.length;
        this.height = Math.max(this.height,newDot.height);
        if (this.length > maxLineLength)
        { "I will not go into details here" }
    }
} 
```

然后我会喜欢：

```
var a = new lines();
var testline = new aLine();
var testdot = new aDot();

testdot.height = 10;
testdot.length = 15;
testline.insertDot(0,testdot);
a.addLine(testline);
a.addLine(testline); 
```

然后我想保存有关长度和高度的数据。和结构，要知道哪个点属于哪条线。

我将该数据发送到网络服务器。我认为这些是理解所用方法的关键：

```
post = "name=" + name + "&tab=" + JSON.stringify(file);
req.open("POST", "saveFile.php", true);
req.send(post); 
```

保存的文件正是我想要的——结构和数据。但我不知道如何让它再次成为一个对象。我不坚持使用 JSON.stringify() 方法。我会喜欢任何可以让我保存内容而无需重复保存方法的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:09:29.043

如果您出于某种原因真的迷上了保存整个对象的想法，那么我建议您使用 toString() 方法，该方法本质上将在函数上调用时以字符串的形式返回函数的代码体。

```
var obj = { func: function() { alert('hello!'); };
for(var key in obj)
    if (typeof obj[key] === 'function')
       alert(obj[key].toString()); 
```

除了 json 数据之外，您只需添加代码来序列化和存储此信息。

话虽如此，您确实应该简单地存储对象的状态并将它们重新加载到您的应用程序中。

**编辑：重建对象客户端**

免责声明：我不是 PHP 专家，因此您只能找到一个实际的编码示例，但我相信有一个具有全能 Google 力量的示例。

您只需使用您的序列化/反序列化类将数据序列化回您的对象。所以想象一下伪代码部分是特定页面的 php 文件：

```
<?php
 <html>
      <head>
          <script type="text/javascript">
              var model = /* Use serializing class on your server-side object */;
              //Now you just need to build a function into your objects that is much like a constructor that can receive this model and rebuild the object

              function rebuildObject(yourObject, jsonModel) {
                  //assign first property
                  //assign second etc...
              }
           </script>
      </head>
      <body>
      </body>
</html>
?> 
```

您实际上是将 json 数据模板化回脚本标记中的页面，以便您可以在客户端访问它。javascript 解释器会自动将 json 转换为您的代码可以使用的实际 js 对象，因此没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:59:27.400

最后，我选择了直接的方法来重新创建所有对象并复制数据。结果证明它比我之前想象的更短更漂亮。如果它对其他人有用，我是这样做的：

```
data = JSON.parse(file);
a = new lines();

a.height = data.height;

for (var i=0; i<data.lines.length; i++)
{
    a.lines.push(new aLine());
    a.lines[i].height = data.lines[i].height;
    a.lines[i].length = data.lines[i].length;
    for (var j=0; j<data.lines[i].dots.length; j++)
    {
        a.lines[i].dots.push(new aDot());
        [... and so on ...]
    }
} 
```

# java - Android 启动活动而不创建新实例

> ID：15904061
> 
> 赞同：9
> 
> 时间：2013-04-09T14:02:45.333
> 
> 标签：java, android, android-layout, android-intent, android-manifest

假设我有活动 A 作为我的应用程序的根活动。并形成这个活动，我去活动 B。

我希望能够在不创建活动 A 的新实例的情况下从 B 回到 A。

此代码在活动 B 中

```
public void onBackPressed() {
        super.onBackPressed();
//      Intent intent= new Intent(getBaseContext(), MainActivity.class);
//      intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        Intent myIntent = new Intent(getBaseContext(), MainActivity.class);
        myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(myIntent);
        Log.d("Back", "TEST");
    } 
```

但它仍然会在活动 A 上调用 onCreate 。我想要做的是在活动 b 启动时在后台有 A 并且每当它完成时切换回活动 A

这是清单

```
<activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:screenOrientation="unspecified" 
            android:launchMode="singleTask"
            android:stateNotNeeded="false">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.HOME"/>
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:label="@string/app_name"
            android:name=".SubmenuActivty" >
        </activity> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T14:13:24.867

***根据 android 活动生命周期，当您启动活动 A 时：***

生命周期方法列表：

```
Activity A.onResume();
Activity A.onStart();
Activity A.onCreate(); 
```

活动状态：

```
Activity A : Resumed 
```

***当您现在启动活动 B 时：***

生命周期方法列表：

```
Activity A.onStop();  
Activity B.onResume();
Activity B.onStart();
Activity B.onCreate();
Activity A.onPause();
    ...
    ...
    ... 
```

活动状态：

```
 Activity A : Stopped
   Activity B : Resumed 
```

***当你现在再次开始 A 时：***

生命周期方法列表：

```
Activity B.onDestroy();  
Activity B.onStop(); 
Activity A.onResume();
  ....
  ....
  .... 
```

活动状态：

```
 Activity B : Destroyed
   Activity A : Resumed 
```

这是一个活动的生命周期： ![在此处输入图像描述](https://i.stack.imgur.com/AtKo8.png)

你可以在[这里找到详细信息](http://developer.android.com/training/basics/activity-lifecycle/index.html)

根据默认行为，活动 A 进入 onStop() 状态并且不活动，需要在返回活动 A 时创建一个新实例。我所知道的 - 没有办法让 A 实例保持活动状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-24T06:08:38.490

```
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

试试看...它使旧活动在没有新实例的情况下放在前面...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T14:06:08.373

你不需要做任何事情。只需`onBackPressed()`从活动 B 中删除您的方法。

默认情况下，当您从*Activity A*移动到*Activity B*时，Android 会将*Activity A*添加到后台堆栈。当您从*Activity B*按下后退按钮或完成它时，它会自动从 backstack 中恢复 Activity A。

如果您想完成您的活动 B ，请`finish()`在需要时以编程方式调用活动的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:05:30.073

尝试这个

```
public void onBackPressed() {
    super.onBackPressed();
    Log.d("Back", "TEST");
} 
```

这就是你所需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:06:29.183

使用 moveTaskToBack(true);

```
public void onBackPressed() {
// TODO Auto-generated method stub
moveTaskToBack(true); 
super.onBackPressed();
} 
```

或者你也可以使用finish()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-08T16:37:08.043

你为什么要开始一个活动`onBackPressed`呢？你应该`super.onBackPressed();`而不是开始新的活动。或者`finish()`在你的方法中调用`onBackPressed()`方法：

```
public void onBackPressed() {
        finish();
        Log.d("Back", "TEST");
    } 
```

# firebird - 添加索引以提高此查询的性能？

> ID：15904067
> 
> 赞同：0
> 
> 时间：2013-04-09T14:03:08.417
> 
> 标签：firebird, indexing

使用：火鸟 2.52

对于以下查询的 SELECT 性能，我是否需要表中其他字段的索引：

所需查询：

```
select inventory_id, max(batch_no) from invty_batch
where inventory_id = :I
group by inventory_id 
```

表结构：

```
CREATE TABLE INVTY_BATCH (
  ROW_ID INTEGER NOT NULL,
  INVENTORY_ID INTEGER NOT NULL,
  BATCH_NO VARCHAR(8) NOT NULL,
  INVTYRCPT_ID INTEGER NOT NULL,
  UNITPRICE NUMERIC(12, 2) DEFAULT 0.0 NOT NULL);

ALTER TABLE INVTY_BATCH ADD PRIMARY KEY (ROW_ID);

CREATE UNIQUE INDEX IXINVTYIDBATCHNO ON INVTY_BATCH(INVENTORY_ID,BATCH_NO); 
```

在inventory_id 和batch_no 列上创建索引是否会提高给定查询的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:59:20.517

尝试为字段“batch_no”创建索引，因为查询正在该字段中进行搜索。PS : 使用 desc 索引，因为搜索的是最大值

# javascript - while 循环在 JavaScript 代码中不起作用？

> ID：15904068
> 
> 赞同：1
> 
> 时间：2013-04-09T14:03:14.210
> 
> 标签：javascript, html

在这段代码中，我试图根据 addInput(divname) 函数使用 on change 事件处理的 select 字段的输入生成动态文本字段，但是 addInput 函数中的 while 循环不起作用，当我删除 while 循环时它的工作。我必须生成选定的编号。文本字段......当我选择不同的数字时，文本字段也应该改变......

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <form action="adduniv.php" method="post">
            University Name: <input type="text" name="college">
            No. of branches:
            <div id="dynamicInput">
                 <select name="branches" id="branches" onchange="if (this.selectedIndex) addInput('dynamicInput');;" ">
                     <option value="1">1</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5</option>
                     <option value="6">6</option>
                     <option value="7">7</option>
                     <option value="8">8</option>
                </select>
            </div>   
            <script>
                var counter = 0;
                var limit = 3;  
                function addInput(divName)
                {       
                    var k=parseInt(document.getElementById("branches"));
                    var newdiv;
                    while(k>0) 
                    {
                        newdiv = document.createElement('div');
                        newdiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text' name='myInputs[]'>";
                        document.getElementById(divName).appendChild(newdiv);
                        counter++;
                        k--;
                     }
                 }
             </script>
             <input type="submit" value="submit" />
         </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:05:09.063

```
var k=parseInt(document.getElementById("branches")) 
```

你不能 parseInt 一个 DOM 元素。

怀疑你的意思

```
var k=parseInt(document.getElementById("branches").value,10) 
```

感谢 Shikiryu re 的评论：明确指定基数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:05:54.377

换行

```
var k=parseInt(document.getElementById("branches")); 
```

到

```
var k=parseInt(document.getElementById("branches").value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:06:04.770

`document.getElementById("branches")`返回一个 DOM-Node，但是你需要做的是获取这个 DOM-Node 的值。所以尝试以下生成`k`.

```
var k=parseInt(document.getElementById("branches").value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:06:24.160

> ```
> parseInt(document.getElementById("branches")); 
> ```

`NaN`据我所知，将导致。您试图将整个 DOM 节点解析为整数，您期望什么？您可能希望从中获取[`value`属性](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement#Properties)：

```
parseInt(document.getElementById("branches").value, 10); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:07:34.157

我认为您忘记将 .value 添加到 document.getElementById("branches")

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T17:38:33.617

好的，我知道问题已解决，但我会尝试这样做：

```
 <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">    
    <title>Creating input fields</title>
    <script>
      function addInput(nr_branches) {
        var nCounter = 0;        
        //-- Cleaning all elements
        var divB = document.getElementById('divBranches');
        if(divB.hasChildNodes()) {
          while(divB.childNodes.length >= 1) {
            divB.removeChild(divB.firstChild);
          }
        }                
        while(nCounter < nr_branches) {          
          //-- Create a input field
          var input = document.createElement("input");
          input.type = 'text';
          input.name = 'branche_nr_' + nCounter;
          input.placeholder = 'Branche Nr.' + nCounter;
          //document.getElementById("divBranches").innerHTML = "<input type='text' name='branche_nr_'"+ nCounter +" placeholder='Branche Nr."+ nCounter +"' />";
          document.getElementById('divBranches').appendChild(input);        
          nCounter++;          
        }                 
      }    
    </script>
  </head>  
  <body>
    <form name="frm" action="adduniv.php" method="post">
      <input type="text" name="college" placeholder="University Name" />
      <select name="branches" id="branches" onchange="addInput(this.value)">
        <option value="0">-select your branche-</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
      </select>
      <div id="divBranches"></div>
      <input type="submit" value="submit" />      
    </form>
  </body>
</html> 
```

# ios - IOS：使用一个类来管理一个简单的游戏

> ID：15904069
> 
> 赞同：0
> 
> 时间：2013-04-09T14:03:16.880
> 
> 标签：ios, class, uiviewcontroller

我正在开发一个简单的游戏，您可以在其中选择您的游戏是“单人游戏”还是“多人游戏”（两人游戏）；游戏是一样的：在“单人模式”中，我应该控制与两个玩家控制的相同的东西，但时间不同；那么我想问你使用第三类来管理我的游戏是否是一个好主意，你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:07:25.270

# 是的

**一般来说，**尽可能多地划分程序（用任何语言！）总是一个好主意——这就是整个模型-视图-控制器范式的基础。

在我所有的应用程序中，我总是尽可能地进行划分。这可能意味着我有 50 个源文件，但它们都是可读的。

# javascript - 显示模块隐式调用内部函数 - 这是“气味”吗

> ID：15904070
> 
> 赞同：2
> 
> 时间：2013-04-09T14:03:18.237
> 
> 标签：javascript, revealing-module-pattern

我正在尝试改进我的 javascript 并一直在使用显示模块模式以取得良好的效果，但我注意到模块中的代码不在函数中或在创建时执行返回已经利用了这一点，例如：

```
var MyModule = function ($) {

    setUp();

    function setUp() {
     // execute code to be run when module created
    }

    function doStuff() {
    }

    return {
        doStuff: doStuff
    }
} 
```

我可以看到这是为依赖于它被调用的函数创建一种构造函数形式`var myModule = new MyModule(jQuery)`。

对此的对错的任何反馈表示赞赏。

# php - CronJobs 可以执行包含 Javascript 的 php 吗？如果没有，还有其他选择吗？

> ID：15904071
> 
> 赞同：3
> 
> 时间：2013-04-09T14:03:18.363
> 
> 标签：php, javascript, cron

我有要作为 cronjob 执行的 php 文件，这个 php 文件包含一些 javascript。

我将解释流程：

1.  Php 用于从数据库中检索一些数据（URL 列表）。
2.  对于获得的每个 URL，使用 Java 脚本 API。
3.  从 API 返回的结果 Obj 包含每个 url 的数据。
4.  然后将数据作为每个 url 的 AJAX 调用发送回 php 文件。

这可以通过 CRON JOBS 实现吗？或者是否有任何方法可以安排 javascript 定期运行，比如 cron 用于 php？
**更新**：我可以使用 PHP curl 管理对 API 的 javascript 调用，并且 cron 作业正在完美执行。但我认为这不是这个问题的正确解决方案可能是 Node.Js 是解决方案（我还没有测试它）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:06:26.767

您不能在 Cronjobs 中运行 Javascript，因为 Javascript 是由浏览器运行的。我认为你应该看一下 php 中的 curl 来调用 api。

[http://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-13T20:19:36.130

您必须拆分工作：Cron JS，Cron PHP。在中间，将一个人的结果传递给另一个人。同意 phantomjs 用于 JS 执行（或 casperJS-我更喜欢）。执行 JS，作为文件输出到 JSON，使用 PHP 的 file_get_contents 从文件中读取。并在两个不同的 cron 作业中定义这些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:14:33.840

您可以使用[Node.js使用 cron 来安排 javascript](http://nodejs.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:08:19.227

您可以在像 node.js 这样的 Javascript 运行时中通过 cron 运行 Javascript：[http ://nodejs.org/](http://nodejs.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:08:49.550

phantomjs 是一种可能性，看到这个线程[wget + JavaScript?](https://stackoverflow.com/questions/5901661)

否则，您可以在服务器上运行 Node.js 以在 CLI 类型的环境中执行 JavaScript，但混合使用 node.js 和 PHP 可能会变得复杂。

# sql - 在 HTML5 的 SQLite 查询中循环遍历多个表 - 异步计时

> ID：15904084
> 
> 赞同：0
> 
> 时间：2013-04-09T14:04:14.170
> 
> 标签：sql, html, sqlite, asynchronous

我有一个 SQLite 查询来从数据库中的 ORDERS 表中提取订单：

```
 qry.executeSql("SELECT o.ID AS orderIDx, o.token AS orderTokenx, r.retailerName AS retailerNamex FROM orders AS o LEFT JOIN retailers AS r ON r.token = o.retailerID  ", [], function(tx, results){
            //query was a success
            var len = results.rows.length;
            for (var i=0; i<len; i++){  
                var orderID = results.rows.item(i).orderIDx;
                var orderToken = results.rows.item(i).orderTokenx;
                var retailerName = results.rows.item(i).retailerNamex;
                //create container for order and populate it with orderItems in the below query                     
                qry.executeSql("SELECT * FROM orderItems WHERE orderID =  '"+orderToken+"' ", [], function(tx1, results1){

                    var len1 = results1.rows.length;
                    for (var i1=0; i1<len1; i1++){          
                        $('.orderItem.'+orderID+' p').append(results1.rows.item(i1).productName);                       
                    }
                });
            }               
        }); 
```

这是我的查询，但由于排除了很多杂乱，我留下了要领。

因此，我试图遍历订单表并在一个部分中显示订单特定信息，并在其中作为下拉菜单显示每个订单项目。因此，在订单循环中，我使用该 ID 来调用 orderItems 等……但它只是将 orderItem 查询的结果附加到最后一个容器中。

我认为这是因为查询是异步的，但我不确定如何在执行订单查询的下一个循环之前填充 orderItem 容器：/

我正在努力用异步 jQuery AJAX 的东西做同样的事情。所以如果这是链接，那么解释会很好。

另外，我打算使用 JOIN 在外部查询中加入 order 和 orerItems 表，但是不确定如何循环遍历项目以及 1 个循环中的订单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:15:44.580

对我来说，问题似乎是在`orderID`添加 orderItems 之前发生变化的变量。

我认为如果您将最后一个 for 循环更改为

```
var len1 = results1.rows.length;
var order_id = results1.rows.item(0).orderID;
for (var i1=0; i1<len1; i1++){          
    $('.orderItem.'+order_id+' p').append(results1.rows.item(i1).productName);                       
} 
```

在这种情况下，您将不再使用更改后的变量。

# wpf - 在列表中搜索子字符串

> ID：15904085
> 
> 赞同：0
> 
> 时间：2013-04-09T14:04:18.547
> 
> 标签：wpf, lambda

我有一个代码列表（COD_XX），我需要在文本文件中搜索每个代码，并获取所在行的索引。该行的第一个字符包含鳕鱼。我已将所有行保存在列表中

```
 var fileLines = File.ReadAllLines(filePath);
        List<string> fileItems = new List<string>(fileLines);

        foreach (string param in lstCodes)
        {
           int idx = fileItems.FindIndex(m => m.Substring(0,6) == param)
        } 
```

但是这个表达式不起作用:(我应该怎么写？提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:15:33.040

如果你把你的代码工作`;`正常`fileItems.FindIndex(...)`

但是`m.Substring(0,6)`如果 m 小于 6 可能会抛出异常。你应该使用`String.StartsWith`方法。

```
foreach (string param in lstCodes)
{
   int idx = fileItems.FindIndex(m => m.StartsWith(param));
} 
```

# ruby-on-rails-3 - 检查 .map 方法中的 nil 值

> ID：15904090
> 
> 赞同：0
> 
> 时间：2013-04-09T14:04:40.903
> 
> 标签：ruby-on-rails-3

当`User`object 为 nil（在 belongs_to 关联中定义）时，我得到一个错误：`p.user.title`is `nil`。

如何检查`p.user`或`p.user.title`在 .map 中定义以避免错误？

```
@posts = Post.all 
results = @posts.map { |p| 
{ 
  :id => p.id,
  :text => p.text,
  :user_title => p.user.title
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:07:57.360

非常简单。

```
p.user.try(:title) 
```

如果 user 不是 nil，上面会在 user 上运行 #title。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:07:40.557

简单 - 只需`p.user`在访问之前进行测试`title`：

```
@posts = Post.all 
results = @posts.map do |p| 
  { 
    :id => p.id,
    :text => p.text,
    :user_title => p.user && p.user.title
  }
end 
```

`results[i][:user_title]`然后将是`nil`如果`p.user`或者`p.user.title`是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:08:10.413

您可以使用该`try`方法。`nil`如果用户是，这将返回`nil`

```
@posts = Post.all 
results = @posts.map { |p| 
    { 
      :id => p.id,
      :text => p.text,
      :user_title => p.user.try(:title)
    }
} 
```

# java - 如何将 HashMap 类型转换为 WeakHashMap？

> ID：15904091
> 
> 赞同：0
> 
> 时间：2013-04-09T14:04:40.963
> 
> 标签：java

我有这样的方法：-

```
public Map<String,String> loadProperties() Exception{
    Map <String,String> params = new HashMap<String,String>();
.
.
.
  return params;
} 
```

上面的方法从数据库中返回一个 (key , value) 的 Map。

我需要将 loadProperties() 类型转换为 WeakHashMap。下面我有另一个类叫做服务。我在其构造函数中尝试了类型转换，但它给了我 ClassCastException。

```
"java.lang.ClassCastException: java.util.HashMap cannot be cast to java.util.WeakHashMap" 
```

以下是服务类：-

```
private Service() throws Exception {
   configPropertiesCache = dao.loadProperties();
 configPropertiesCache = (WeakHashMap<String, String>) dao.loadProperties(); 
```

我很想知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T14:08:08.837

它不起作用，因为 a`HashMap`根本不是 a `WeakHashMap`。类型转换不会进行任何从一种类型到另一种类型的神奇转换。

类型转换的唯一含义是您告诉编译器您希望它将一种类型的对象视为另一种类型的对象 - 但仍会在运行时进行检查以检查您的对象是否是铸造真的是你铸造它的东西，如果检查失败，你会得到一个`ClassCastException`.

`WeakHashMap`在您的方法中将地图创建为 a `loadProperties()`，或者如果您无法修改该方法，请将其复制到 a 中`WeakHashMap`：

```
configPropertiesCache = new WeakHashMap<>(dao.loadProperties()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:09:19.003

像这样做：

```
public WeakHashMap<String, String> getWeakHashMap(Map<String, String> map) {
    if (map instanceof WeakHashMap) {
        return (WeakHashMap<String,String>) map;
    }
    return new WeakHashMap<String,String>(map);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:06:53.273

`HashMap`不是，`WeakHashMap`所以你**不能将一个投射到另一个**。但是，您可以`WeakHashMap`在您的`loadProperties`方法中返回，或手动将其转换`HashMap`为。`WeakHashMap`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:08:59.060

HashMap 和 WeakHashMap 是不同的 Map 实现，因此您不能将一个转换为另一个。通常，如果您的 ClassA 具有子类 ClassB 和 ClassC，则可以将 ClassB 或 ClassC 转换为 ClassA，但不能将 ClassB 转换为 ClassC，反之亦然。

如果要将 HashMap 转换为 WeakHashMap，则需要创建一个新的 WeakHashMap，然后遍历 HashMap 并将其所有键值对添加到 WeakHashMap。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:09:50.317

类型转换不起作用，但您可以创建一个`asWeakHashMap`方法，该方法采用映射并将所有条目添加到新条目`WeakHashMap`中并返回该映射。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T14:12:13.880

您不能将 a 强制`Map`转换为 a，`WeakHashMap`但您可以创建一个`WeakWashMap`包含所有值的新值。您可以使用该代码执行此操作：

```
Map<String, String> otherMap = new HashMap()<String, String>;
map.put("Hello", "World");
WeakHashMap<String, String> weakMap = new WeakHashMap(otherMap);
System.out.println(weakMap.get("Hello")); 
```

# amazon-web-services - 如何检查传递给 EC2 实例的用户数据是否正常工作

> ID：15904095
> 
> 赞同：84
> 
> 时间：2013-04-09T14:04:57.967
> 
> 标签：amazon-web-services, amazon-ec2, user-data

在使用 EC2 命令行 API 创建新的 AWS EC2 实例时，我将一些用户数据传递给了新实例。

我如何知道该用户数据是否执行？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2015-09-08T14:47:32.153

您可以使用以下步骤进行验证：

1.  启动 EC2 实例时的 SSH。
2.  检查您的用户数据脚本的日志：
    *   `/var/log/cloud-init.log`和
    *   `/var/log/cloud-init-output.log`

你可以看到你的用户数据脚本的所有日志，它也会创建`/etc/cloud`文件夹。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2017-01-19T19:13:59.853

仅供参考，您可以通过从 EC2 控制台查看系统日志来检查用户数据是否执行。右键单击您的实例 -

在新界面中：**监控和故障排除 > 获取系统日志**

[![在此处输入图像描述](https://i.stack.imgur.com/aEamV.png)](https://i.stack.imgur.com/aEamV.png)

在旧界面中： **实例设置 > 获取系统日志**

[![在此处输入图像描述](https://i.stack.imgur.com/W5h85.png)](https://i.stack.imgur.com/W5h85.png)

这应该会打开一个带有系统日志的模式窗口

[![在此处输入图像描述](https://i.stack.imgur.com/YD0yf.png)](https://i.stack.imgur.com/YD0yf.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-07-22T09:25:48.860

在实例的引导过程中查看用户数据在执行时的样子可能对您也很有用。如果您从 CloudFormation 模板传入环境变量或标志，则尤其如此。您可以看到 UserData 如何以两种不同的方式执行：

* * *

**1\. 从实例内部：**

```
# Get instance ID
INSTANCE_ID=$(curl -s http://169.254.169.254/latest/meta-data/instance-id)

# Print user data 
sudo cat /var/lib/cloud/instances/$INSTANCE_ID/user-data.txt 
```

* * *

**2\. 从实例外部**

注意：这仅在您配置 UserData shell 以输出其运行的命令时才有效。对于 bash，您可以按如下方式执行此操作：

```
"#!/bin/bash\n",
"set -x\n", 
```

从 EC2 控制台右键单击 EC2 实例 -> 监控和故障排除 -> 获取系统日志。下载日志文件并查找如下所示的部分：

```
ip-172-31-76-56 login: 2021/10/25 17:13:47Z: Amazon SSM Agent v3.0.529.0 is running
2021/10/25 17:13:47Z: OsProductName: Ubuntu
2021/10/25 17:13:47Z: OsVersion: 20.04
[   45.636562] cloud-init[856]: Cloud-init v. 21.2-3...
[   47.749983] cloud-init[896]: + echo hello world 
```

如果 UserData 配置如下：

```
"#!/bin/bash\n",
"set -x\n",
"echo hello world" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-09T14:35:31.470

[在Amazon EC2](http://aws.amazon.com/ec2/)上调试用户数据脚本确实有点尴尬，因为通常没有办法主动挂钩该过程，因此理想情况下希望*获得对用户数据脚本输出的实时访问权限，*正如 Eric Hammond 的文章[Logging user中所总结的那样EC2 实例上的 -data 脚本输出](http://alestic.com/2010/12/ec2-user-data-output)：

> 最近的 Ubuntu AMI 仍将用户数据脚本发送到控制台输出，因此您可以远程查看它，但它在实例的 syslog 中不再可用。控制台输出仅在实例启动、重新启动或终止后几分钟更新，这迫使您等待查看用户数据脚本的输出，并且不捕获快照后可能出现的输出。

根据您的设置，您可能希望立即将日志发送到像[Loggly](http://loggly.com/)这样的远程日志记录工具，但是尽早安装它显然是一种鸡/蛋问题（尽管如果 AMI 恰好配置为所以已经）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-06T08:07:26.187

为您的用户数据启用日志记录

Eric Hammond 在“[记录 EC2 实例上的用户数据脚本输出 (2010, Hammond)](https://alestic.com/2010/12/ec2-user-data-output/) ”中建议：

```
exec > >(tee /var/log/user-data.log|logger -t user-data -s 2>/dev/console) 2>&1 
```

注意`> >`在语句开头的两个字符之间放置一个空格。

这是一个完整的用户数据脚本作为示例：

```
#!/bin/bash -ex
exec > >(tee /var/log/user-data.log|logger -t user-data -s 2>/dev/console) 2>&1
echo BEGIN
date '+%Y-%m-%d %H:%M:%S'
echo END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T19:26:15.160

Have your user data create a file in your ec2's /tmp directory to see if it works:

bob.txt:

```
#!/bin/sh
echo 'Woot!' > /home/ec2-user/user-script-output.txt 
```

Then launch with:

```
ec2-run-instances -f bob.txt -t t1.micro -g ServerPolicy ami-05cf5c6d -v 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-24T11:44:03.977

把它放在用户数据中

```
touch /tmp/file2.txt 
```

实例启动后，您可以检查文件是否已创建。基于此，您可以判断用户数据是否已执行。

# scala - Scala 中运算符 ~> 的含义？

> ID：15904116
> 
> 赞同：1
> 
> 时间：2013-04-09T14:05:54.887
> 
> 标签：scala, operators

我试图了解此运算符 ( `~>`) 是否在 Scala 中表示任何含义，或者它是否是特定于域的？

我试图在这里理解 Scala 代码。 [http://nlp.stanford.edu/software/tmt/tmt-0.4/examples/example-1-dataset.scala](http://nlp.stanford.edu/software/tmt/tmt-0.4/examples/example-1-dataset.scala)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:11:19.983

`~>`在scala中没有特殊含义。在这种情况下，它只是 ScalaNLP Breeze 定义的一种方法（参见[http://www.scalanlp.org/api/#breeze.text.tokenize.Tokenizer](http://www.scalanlp.org/api/#breeze.text.tokenize.Tokenizer)）

# c++ - 用线程池替换许多 std::async 调用

> ID：15904118
> 
> 赞同：4
> 
> 时间：2013-04-09T14:05:59.347
> 
> 标签：c++, multithreading, threadpool

`std::async`我有一个多次调用的程序。执行的任务相当短（例如每个几百毫秒）。我认为线程创建有很大的开销，我想知道我是否可以以某种方式避免这种情况。枚举作业的代码比作业的处理运行得快得多。因此，我已经有了一种池化。它是这样的。我创建了一个“工作槽”数组：

```
template <typename T>
struct job {
  std::future <void> fut;
  std::vector <T*> *result;
  bool inUse;
} 
```

在并行代码开始之前，我初始化了作业槽数组，只创建了一次结果向量。然后，每当作业枚举代码枚举了一个作业时，它就会寻找一个未使用的作业槽。如果有空闲槽，它将开始（使用 std::async）一个新作业，将未来移动到槽中。作业运行并填充结果向量。如果没有空闲槽，则代码检查槽中的任何期货是否已准备好。如果是这样，它会处理结果向量，然后使用该槽。如果没有，它会等待几毫秒。这段代码运行得非常好，并且可以精确地扩展到可用处理器的数量。我了解到，每次调用`std::async`创建一个新线程，实际上，我可以看到进程 ID 滚动。我想消除这种开销，一开始就一劳永逸地创建线程。如何进行？

我发现这个线程池实现 [https://code.google.com/p/cppthreadpool/downloads/list](https://code.google.com/p/cppthreadpool/downloads/list) 但它指出一个任务应该需要一两秒才能有效。我不需要任何花哨的调度、优先级等。我只想消除重复构建和销毁线程的开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:35:12.610

我运行了一个使用 std::async 创建任务的测试程序，发现许多任务是由同一个线程运行的！！事实上，我看到 2 个线程运行了 25 个异步任务。所以看起来标准库已经做了一些线程池。

```
 std::vector<std::future<void>> futures;
    for (int i = 0; i < 25; ++i)
    {
        auto fut = std::async([]
        {          
            std::cout << std::this_thread::get_id() <<std::endl;
        });
        futures.push_back(std::move(fut));
    }
    std::for_each(futures.begin(), futures.end(), [](std::future<void> & fut)
    {
        fut.wait();
    }); 
```

# html - 如何防止跨度进入下一行 - 响应式网页设计？

> ID：15904121
> 
> 赞同：1
> 
> 时间：2013-04-09T14:06:07.220
> 
> 标签：html, css, responsive-design, line-breaks

按照简单的列表，在每个 h4 中，最后都有一个跨度。

```
<ul class="items">
    <li>
        <h4>Prevent LineBreakOfPlus <span class="goto">o</span>
        </h4>
    </li>
    <li>
        <h4>Digital Signage <span class="goto">o</span></h4>
        … 

</ul> 
```

页面来源截图：

![在此处输入图像描述](https://i.stack.imgur.com/DCKiz.png)

* * *

CSS`span`看起来像这样……</p>

```
.items .goto {
   font-family: 'QuaySans-Icons';
   font-size: 1.6em;
   position: relative;
   float: right;
} 
```

最后的样子是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/jzftb.png)

我遇到的问题是，当减小浏览器窗口的宽度（我正在开发响应式网页设计）时，`span`-icon 会进入下一行。

![在此处输入图像描述](https://i.stack.imgur.com/UCfiX.png)

您对如何防止这种情况发生有任何创造性的解决方案或想法吗？

亲切的问候，并提前谢谢你，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:28:15.267

当你有更少的空间时减小你的字体大小。我猜您在最大宽度：480px 的媒体中遇到了问题。我发现减小字体大小是保持响应式网站设计一致的好选择

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:32:33.413

如果您希望图标与文本行中的最后一个单词保持一致，您可以简单地执行以下操作：

```
<ul class="items">
    <li>
         <h4>Prevent LineBreakOfPlus<span class="goto">o</span></h4>
    </li>
    <li>
         <h4>Digital Signage<span class="goto">o</span></h4>
    </li>
</ul> 
```

CSS可能是：

```
.items {
    list-style: none;
    margin: 0;
    padding: 0;
}
.items li {
    border-bottom: 1px solid gray;
    margin: 0;
    padding: 0;
}
.items h4 {
    margin: 0;
}
.items .goto {
    background-color: gray;
    font-size: 1.6em;
    margin-left: 10px; /* optional */
} 
```

如果你的作品和 之间没有空格，如果元素被迫流入第二行`span`，则主题将简单地跟随单词。`li`

您可以使用`margin-left`创建视觉间距或在 之前插入`&nbsp`实体`span`，有很多方法可以做到。细节取决于你想要什么效果。

小提琴： http: [//jsfiddle.net/audetwebdesign/VsBet/](http://jsfiddle.net/audetwebdesign/VsBet/)（如何做的两个例子）

**保持图标右对齐**

这是将图标固定在`h4`元素右侧的一种方法：

```
.ex2.items h4 {
    position: relative;
    line-height: 1.5;
    outline: 1px dotted blue;
    padding-right: 2.00em;
}
.ex2.items .goto {
    background-color: wheat;
    line-height: 1.00;
    font-size: 1.6em;
    position: absolute;
    right: 0;
    bottom: 0.0em;
    height: 1.00em;
    width: 1.00em;
    outline: 1px dotted red;
} 
```

使用 的绝对定位将`span`其保持在 的右侧和底部`h4`。如果`h4`表格要行，图标将跟随第二行。您可能需要根据图标大小调整位置。如果您允许图标变大，在极端情况下您可能会遇到其他问题。我可能会将图标固定为`px`高度或宽度（或最大值）。最后，设置一些`padding-right`以`h4`防止图标在窗口变小时与文本重叠。

**请注意**，我明确指定了 line-height 值以强调不知道图标高度的问题。您可能需要调整这些以垂直放置图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:36:08.880

我已经在演示中模拟了它，但是它有点原始。

```
.items {
    padding:0;
    margin:0;
    /*width:180px;*/
}
.items li {
    border: 1px solid red;
    list-style-type: none;
    position: relative;
}
.items h4 {
    margin:0; padding:0; font-size:16px; padding-right:10px;
}

.items .goto {
    margin-top: -10px;
    position: absolute;
    right: 0;
    top: 50%;
} 
```

**[演示](http://jsfiddle.net/maheshsapkal/naYYf/)**

检查以下链接并减小浏览器的宽度。

**[结果](http://jsfiddle.net/maheshsapkal/naYYf/embedded/result/)**

# css - 在 WordPress 中使用多个样式表

> ID：15904125
> 
> 赞同：0
> 
> 时间：2013-04-09T14:06:15.957
> 
> 标签：css, wordpress, themes, wordpress-theming

我目前正在基于它们“_s”的基础创建一个新的 WordPress 主题。

有人可以向我解释一下如何将我的 style.css 文件拆分为多个文件以使它们更易于管理吗？例如，我想将 layout.css、typography.css 和 other.css 文件存储在 /css 文件夹中。

我该如何设置。大概我需要在 header.php 文件中添加一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:08:53.400

只需通过模板文件`<link />`中的元素包含它们。`header.php`

如果做不到这一点，你总是可以使用 CSS[`@import`](https://developer.mozilla.org/en/docs/CSS/@import)函数：

**主题.css**：

```
@import url("layout.css");
@import url("typography.css");

/* Other styles here: */
body {
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:27:07.043

# azure - Azure - Azure 中内部角色之间的安全通信

> ID：15904132
> 
> 赞同：1
> 
> 时间：2013-04-09T14:06:28.110
> 
> 标签：azure, azure-web-roles

在此链接（[Azure：web 角色之间的安全性](https://stackoverflow.com/questions/12820368/azure-security-between-web-roles)）中，OP 询问：“在 Azure 中，如果您选择使用内部端点（而不是输入端点），则 https 不是一个选项。http 和 tcp 是唯一的选项。这是否意味着内部端点是 100% 安全的，您不需要加密”

他得到的答案是：不，web/worker 角色无法连接到另一个部署中的内部端点

我的问题完全有可能部署这样的解决方案吗？

谢谢乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:20:32.907

您在问题中提出了两件事。

1.  内部端点是安全的，因为唯一可以访问这些端点的其他 VM 实例位于同一部署中。例如，如果 Web 应用程序需要与辅助角色实例上的 WCF 服务通信，它可以通过 tcp 或 http 连接直接连接，而无需加密。它是安全的。
2.  部署之间的通信需要虚拟网络，因为在部署边界之外无法访问内部端点。您可以通过虚拟网络连接两个部署，并且每个部署中的每个虚拟机实例都可以看到彼此。端点的概念此时没有实际意义，因为您可以简单地连接到其中一个服务器实例上的特定端口。

# php - Symfony 2 和项目

> ID：15904144
> 
> 赞同：3
> 
> 时间：2013-04-09T14:06:45.797
> 
> 标签：php, symfony, project

让我们考虑一下我的公司有不同的项目。关于 symfony 2 的最佳实践是什么？

**1.**在同一个 symfony 2 框架中为每个项目添加新的包（一个项目可能有多个包：甚至不同项目之间共享包）

**2.**为一个项目添加一个新的 Symfony 2 框架（一个项目可能有多个捆绑包）

如果方法 1 是可以接受的，一个 symfony 2 骨架是否有最大数量的捆绑包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:18:53.753

Bundle 是您网站中的逻辑组件，例如后端或菜单。您应该全局构建您的捆绑包，以便在新项目中使用它。

我更愿意制作更多实例并构建包含在您的项目（供应商文件夹）中的捆绑包。然后你就有了单个组件，可以在新项目中使用它。

*   好处是你可以在不同的项目中有不同的版本。也许您需要**Project A**和**Project B**中的另一个版本的包。一个例子有点复杂。

*   当需要扩展您的网站时，最好有更多实例将其放在不同的服务器上。当您只有一个包含所有项目的实例时，您每次都需要完整的源代码。

您可以构建自己的作曲家包来更新和部署作曲家。

[https://packagist.org/](https://packagist.org/)

我认为还有更多的包生成器。

# scala - 为什么将 Seq 扩展为可变长度参数列表的 scala :_* 在这种情况下不起作用？

> ID：15904145
> 
> 赞同：4
> 
> 时间：2013-04-09T14:06:50.090
> 
> 标签：scala, playframework-2.0, anorm

为什么将`:_*`Seq 扩展为可变长度参数列表的 scala 在这种情况下不起作用？

以及如何优雅地解决它？

```
import java.sql.Connection
import scalikejdbc.ConnectionPool
import anorm.{SQL, SqlQuery, SqlRow, Row}

object AnormExample extends App {
  Class.forName("org.hsqldb.jdbc.JDBCDriver")
  ConnectionPool.singleton("jdbc:hsqldb:mem:hsqldb:WithAnorm", "", "")
  implicit val conn: Connection = ConnectionPool.borrow()

  // this works
  SQL("insert into emp (id, name) values ({id}, {name})").onParams(3, "name3").executeUpdate()  

  // this does not compile
  val row = Seq(4, "name4")
  SQL("insert into emp (id, name) values ({id}, {name})").onParams(row:_*).executeUpdate()  // david
} 
```

错误：

```
scala: type mismatch;
 found   : Seq[Any]
 required: Seq[anorm.ParameterValue[?]]
  SQL("insert into emp (id, name) values ({id}, {name})").onParams(row:_*).executeUpdate()  // david 
```

ps：

```
<dependency>
  <groupId>play</groupId>
  <artifactId>anorm_2.10</artifactId>
  <version>2.1.1</version>
</dependency>

<dependency>
  <groupId>com.github.seratch</groupId>
  <artifactId>scalikejdbc_2.10</artifactId>
  <version>1.5.1</version>
</dependency>

<dependency>
  <groupId>org.hsqldb</groupId>
  <artifactId>hsqldb</artifactId>
  <version>2.2.9</version>
</dependency> 
```

任何优雅的解决方案？

**更新**

根据senia的回答，这解决了问题：

```
def toParameterValueSet(seq: Seq[Any]) = seq.map(v => v: anorm.ParameterValue[_])
val row = Seq(5, "name5")
SQL("insert into emp (id, name) values ({id}, {name})").onParams(toParameterValue(row):_*).executeUpdate() 
```

有没有办法消除声明/使用 toParameterValueSet 的需要？

（例如，告诉 scala 在自动扩展上使用隐式转换`:_*`）

**更新**

更紧凑一点：

```
implicit def toParameterValueSet(seq: Seq[Any]): Seq[anorm.ParameterValue[_]] = seq.map(v => v: anorm.ParameterValue[_])
val row = Seq(5, "name5")
SQL("insert into emp (id, name) values ({id}, {name})").onParams(row:_*).executeUpdate() 
```

@Typesafe 团队：您可以在 acrom SQL 上添加一个参数来获取一系列值吗？（而不是必须使用：_*）（我同意使用命名参数是首选，但有时使用未命名参数仍然有用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:20:42.463

你可以尝试更换

```
val row = Seq(4, "name4") 
```

和

```
val row = Seq[anorm.ParameterValue[_]](4, "name4") 
```

所有类型都有隐式转换，因此您可以使用`row.map{ e => e: anorm.ParameterValue[_] }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:10:59.643

只需指定`type`. 定义了`<:`一个类型绑定。

```
A <: B 
```

说 A 必须受类型 B 的约束，或者任何 A 都是 B 的子类型。给它`row:_*`一个适当的`type`界限。我认为`String`界限有效。`anorm.ParameterValue[String]`.

更具体地说，`val row = Seq[anorm.ParameterValue[_]](4, "name4")`. 这应该执行`implicit`转换。

# asp.net - 在删除 cookie 之前，Asp.Net 页面不会响应

> ID：15904149
> 
> 赞同：1
> 
> 时间：2013-04-09T14:06:55.867
> 
> 标签：asp.net, azure, memcached, azure-virtual-machine

我们在 Azure 平台上部署了我们的 Asp.Net webforms 应用程序，该应用程序由两个负载平衡的 Web 服务器提供服务。Asp.Net 会话由 memcashed 管理。

通常应用程序运行良好但随机挂起，如果我们尝试重新加载应用程序，浏览器不会处理请求，完全没有错误，持续加载。

使应用程序再次运行的唯一方法是从浏览器中删除此特定应用程序的 COOKIES。这发生在 Firefox 和 Chrome 中，因此似乎不是浏览器特定的问题。特别是 Cookie 并没有那么重，只有 3 个 cookie，1 个是 asp.net 会话 cookie，另外两个用于持久化用户凭据。

应用程序是关于实时聊天服务的，因此它每 4 秒轮询一次 Web 服务器。

我们已经提到了一个[类似的问题](https://stackoverflow.com/questions/6468398/asp-net-webforms-app-sometimes-fails-to-load-until-cookies-deleted)，但这无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:18:58.297

如果它随机发生，它看起来像是由负载平衡配置引起的。根据我的经验，负载平衡场问题的最常见原因 - 不同的**machineKey**值。

尝试检查[两个服务器的 web.config 中的](http://msdn.microsoft.com/en-us/library/ff649308.aspx#paght000007_webfarmdeploymentconsiderations)**machineKey**值是否相同。

# java - 从 json 转换为向量后，元素未从向量中删除

> ID：15904150
> 
> 赞同：0
> 
> 时间：2013-04-09T14:06:58.190
> 
> 标签：java, android, json, vector, gson

我有一个这样的数据模型：

```
 public class Person {
        String name = "";
        Integer id;
        public Person() {
            name = "";
            id = new Integer(0);
        }
    } 
```

首先，我创建了 2 个对象并添加到一个向量中。将向量转换为 json 字符串。再次检查后，我已将 json 字符串转换为向量。在向量内部，它显示了正确数量的元素和数据。但是当我试图获取一个对象的位置时，它会返回-1。即使使用 vector.remove() 我也无法删除该对象。如果我不将向量转换为 json 字符串，它就可以正常工作。以下是我的代码：

```
 Gson gson = new Gson();
        Vector vecResult = new Vector();

        Person person = new Person();
        person.name = "ABC";
        person.id = new Integer(1001);

        vecResult.add(person);

        Person person2 = new Person();
        person2.name = "DEF";
        person2.id = new Integer(1002);

        vecResult.add(person2);

        String json = gson.toJson(vecResult); //successful

        Type token = new TypeToken<Vector<Person>>() {}.getType();
        Vector<Person> vecResults = gson.fromJson(json3, token); //vecResults got 2 objects
        int pos = vecResults.indexOf(person); //returning -1
        boolean isRemoved = vecResults.remove(person); // returning false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:12:12.533

您需要覆盖以下

```
boolean equals(Object obj) 
int     hashCode() 
```

您的代码不起作用，因为`Vector#remove`使用以下获取索引。

```
public synchronized int indexOf(Object o, int index) {
    if (o == null) {
        for (int i = index ; i < elementCount ; i++)
        if (elementData[i]==null)
            return i;
    } else {
        for (int i = index ; i < elementCount ; i++)
        if (o.equals(elementData[i]))
            return i;
    }
    return -1;
    } 
```

请注意，equals 的默认实现如下

```
public boolean equals(Object obj) {
    return (this == obj);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:12:19.330

您的`Person`课程不会覆盖`equals()`（或`hashCode()`）。

当您序列化为 JSON 然后反序列化时，这将创建新的实例- 就和所关心的而言`Person`，这些实例完全不等于原始实例。它们碰巧具有相同的和值，但这并不会自动使它们相等。`indexOf``remove``name``id`

覆盖`Object.equals()`和`Object.hashCode()`任何你想要的平等意义（只是名字？只是 ID？两者？）它应该没问题。

请注意，通常最好将字段设为私有，并提供属性 getter/setter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:13:09.020

remove() 尝试通过 equals() 方法定位对象。默认情况下，这是对象标识。为 person 生成一个显式的 equals() 方法（在 Eclipse 中，您可以使用所有字段生成一个）。（当覆盖 equals() 时，您还需要有一个匹配的 hashcode() 方法）

# c# - 根据 UserID 生成唯一随机数

> ID：15904152
> 
> 赞同：0
> 
> 时间：2013-04-09T14:07:05.547
> 
> 标签：c#

我有一个生成随机数的代码。

```
public string Get8Digits()
 {
   var bytes = new byte[4];
   var rng = RandomNumberGenerator.Create();
   rng.GetBytes(bytes);
   uint random = BitConverter.ToUInt32(bytes, 0) % 100000000;
   return String.Format("{0:D8}", random);
 } 
```

但我正在寻找一个例程，我将在其中传递用户 ID，并且例程将根据用户 ID 生成唯一的随机数。在我的情况下，用户 ID 可能看起来像

```
a) 1,2,3,100,5000 
b) C0001,C0002,C0003,C0010
d) AL62YU,B1N36W,ZU21PQ etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:22:58.120

可能不是您要寻找的答案，但您的前提存在缺陷：

假设您想要一个 8 位数字，您将拥有`10^8 = 100'000'000 possible random numbers`. 如果您有一个只有 6 个字符但包括数字和数字的用户 ID，您将至少有`36^6 = 2'176'782'336 possible combinations`.

因此，您显然无法为每个用户 ID 生成*唯一的*随机数 - 至少在不扩展或更改标识符格式的情况下不能。这对你来说是一个可行的选择吗？这个身份证号码还有其他限制吗？

# php - 从 mysql 表生成列和行。数组操作以将行显示为列并填充“单元格”

> ID：15904153
> 
> 赞同：0
> 
> 时间：2013-04-09T14:07:09.070
> 
> 标签：php, mysql

请考虑以下事项。

我有一个关系如下的表设置。一种层次结构，其中根与 subRoot 表具有 1:1 关系，其中包含与根相关的信息。我可以使用查询和简单的 while 循环来显示如图所示的表格。

简化模型：

```
Father  1:n  Child  1:n  Root  1:1   subRoot
---          ---         ---         ---
1            S1          P1          yes
1            S1          P2          no
1            S2          P1          no
1            S2          P2          no
1            S3          P1          yes
1            S3          P2          yes
↓            ↓           ↓           ↓ 
```

我想要完成的是显示以下内容，但我遇到了很多麻烦......

```
Father    Root    S1  S2  S3  →
---       ---     --  --  --
1         P1      yes no  yes
1         P2      no  no  yes
↓ 
```

编辑：我可以生成的表的代码（第一个）。这是经过改编的代码，因为我工作的时间太长，无法在此处发布。（如有错误请见谅……）

```
<?
$q="SELECT * FROM
Child ,
Root,
subRoot
WHERE
Child.Father_ID = 1 AND Child.ID = Root.ID AND Root.ID2 = subRoot.ID2";
$r=mysql_query($q); 
$num=mysql_num_rows($r); 
?>

<table class="jl_tbl" id="hor-minimalist-b"> 
<tr> 
<th width="20px">Child</th> 
<th width="150px">Root</th> 
<th width="3%">subRoot</th> 
</tr>
<?
$i=0; 
while ($i < $num) { 
  $Child=mysql_result($r,$i,"Sx");   
  $Root=mysql_result($r,$i,"Px"); 
  $subRoot=mysql_result($r,$i,"YN");
?> 

<tr> 
<td><? echo $Child; ?></td>
<td><? echo $Root; ?></td>
<td><? echo $subRoot; ?></td>
</tr>
<? 
$i++; 
} 
?> 
```

编辑 @verbumSapienti 。

![在此处输入图像描述](https://i.stack.imgur.com/PVzZb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:56:36.623

```
<?php
    $i=0;
    while ($i < $num)
    {
        $Child=mysql_result($r,$i,"Sx");
        $Root=mysql_result($r,$i,"Px");
        $subRoot=mysql_result($r,$i,"YN");
        $root[$Root] = array($Child => $subRoot);
        $i++;
    }
    echo '<table>';
    echo '<tr>';
    echo '<th>Father</th><th>Root</th>';
    foreach($root as $Root => $array)
    {
        foreach($array as $Child => $subRoot)
        {
            echo "<th>$Child</th>";
        }
    }
    echo '</tr>';
    foreach($root as $Root => $values)
    {
        echo '<tr>'; 
        echo '<td>fatherSource</td>';
        echo "<td>$Root</td>";
        foreach($values as $subRoot)
        {
            echo "<td>$subRoot</td>";
        }
        echo '</tr>';
    }
    echo '</table>';
?> 
```

# string - 在 bash 中使用带有美元符号的变量

> ID：15904154
> 
> 赞同：1
> 
> 时间：2013-04-09T14:07:09.937
> 
> 标签：string, bash, variables, sed

我有一个变量，其中包含一个带有 $ 美元符号的字符串，我想用它`sed`来修改一个文本文件。每当变量中有美元符号时，我都会收到错误消息，但是当没有美元符号时它可以正常工作。我怎样才能解决这个问题？我在一个双引号中使用多个变量和文字文本。

编码：

```
sudo sed -i "textFile.txt" -e "s,\($var1\):\(.*:\):,\1:$var2WithDollarSign:$var3,g" textfile.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:16:34.650

您必须反斜杠特殊字符。切换到功能更强大的工具可能会更容易，例如 Perl，它已经具有执行此操作的功能 ( `quotemeta`, `s/\Q$var\E/.../`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:21:42.403

我认为您的问题是您正在运行`sudo`命令`sed`：

```
sudo sed -i "textFile.txt" -e "s,\($var1\):\(.*:\):,\1:$var2WithDollarSign:$var3,g" textfile.txt 
```

问题在于，您使用的 shell 会处理一次参数，然后`sudo`代表您运行的 shell 会再次处理参数。我建议创建一个包含`sed`命令并设置 shell 变量的 shell 脚本，然后从`sudo`.

```
cat > script <<!
sed -i "textFile.txt" -e 's,\($var1\):\(.*:\):,\1:$var2WithDollarSign:$var3,g' textfile.txt
!
sudo sh -x script
rm -f script 
```

这将节省大量的脑力。

### 例子

```
$ cat xx.sh
var1='theperson'
var2WithDollarSign='the$voodoo$wizard'
var3='Albuquerque'
cat > script <<!
sed -i "textFile.txt" -e 's,\($var1\):\(.*:\):,\1:$var2WithDollarSign:$var3,g' textfile.txt
!
cat script
rm -f script
$ sh xx.sh
sed -i "textFile.txt" -e 's,\(theperson\):\(.*:\):,\1:the$voodoo$wizard:Albuquerque,g' textfile.txt
$ 
```

我已经替换`su sh -x script`为`cat script`. 你会撤消那个替换。`-x`是可选的；它只是向您显示脚本正在执行的内容。

# ruby-on-rails - 设计 + Omniauth + Twitter。如何获取用户信息？

> ID：15904155
> 
> 赞同：3
> 
> 时间：2013-04-09T14:07:16.910
> 
> 标签：ruby-on-rails, twitter, devise

我正在尝试创建一个允许用户使用 Twitter 注册的系统。我正在关注本教程：

[http://www.orhancanceylan.com/rails-twitter-and-facebook-authentications-with-omniauth-and-devise/](http://www.orhancanceylan.com/rails-twitter-and-facebook-authentications-with-omniauth-and-devise/)

现在我被困在 Twitter 的回调操作中。我检查了是否已经有身份验证，如果用户已经登录并且这个方法应该可以正常工作，现在我正在创建“新用户”操作，它应该创建身份验证和用户。

我希望用户单击“使用 Twitter 登录”按钮，然后脚本应该从 Twitter 的回调中获取名称、用户名、简历和位置。然后用户应该被重定向到一个“第二步页面”，它应该提供一个电子邮件和一个密码来完成注册。

在我的身份验证控制器中，我写了这个：

```
 user = User.new

  user.name = omni['info'].name
  user.username = omni['info'].nickname
  user.location = omni['info'].location
  user.bio = omni['info'].description

  user.apply_omniauth omni
  user.avatar_from_url omni['info'].image

  session[:omniauth] = omni.except('extra')

  #What should I do here? 
```

我已经尝试`new_user_registration_path`按照教程中的说明重定向到，但随后我得到了原始注册表单。我创建了一个只有电子邮件和密码字段的不同视图，但我的大问题是：

如何获取 Twitter 用户的信息并将这些数据传递给`create`Devise 控制器的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-23T12:18:50.160

@khanh 的回答有点错误：我没有足够的声誉来发表评论，所以我会在这里发布，抱歉

uid 可以通过这种方式获得（@khanh），但昵称应该是这种方式

```
puts env['omniauth.auth']['info']['name'] 
```

['info'] 哈希包括：

*   `description`,
*   `email`（`nil`在推特上），
*   `image`（个人资料图片链接），
*   `location`,
*   `name`（推特用户名），
*   `nickname`（@用户名），
*   `urls`（网址的哈希）。

整体`['omniauth.auth']`看起来是这样的：

```
#<OmniAuth::AuthHash 
   credentials=#<OmniAuth::AuthHash
                  secret="some-secret-xxxxxxxxxxxxxxxxxxxxxx"
                  token="some-token-xxxxxxxxxxxxxxxxxxxxxx"
   >
   extra=#<OmniAuth::AuthHash 
            access_token=#<OAuth::AccessToken:0x0055cab742d2b8 
                            @token="some-token-xxxxxxxxxxxxxxxxxxxxxx", 
                            @secret="some-secret-xxxxxxxxxxxxxxxxxxxxxx", 
                            @consumer=#<OAuth::Consumer:0x0055cab760ba58 
                                          @key="some-consumer-key-xxxxxxxxxxxxxx", 
                                          @secret="some-consumer-secret-xxxxxxxxxxxxxx", 
                                          @options={
                                            :signature_method=>"HMAC-SHA1", 
                                            :request_token_path=>"/oauth/request_token", 
                                            :authorize_path=>"/oauth/authenticate", 
                                            :access_token_path=>"/oauth/access_token", 
                                            :proxy=>nil, 
                                            :scheme=>:header, 
                                            :http_method=>:post, 
                                            :oauth_version=>"1.0", 
                                            :site=>"https://api.twitter.com"
                                          }, 
                                          @http=#<Net::HTTP api.twitter.com:443 open=false>, 
                                          @http_method=:post, 
                                          @uri=#<URI::HTTPS https://api.twitter.com>
                            >, 
                            @params={
                              :oauth_token=>"some-token-xxxxxxxxxxxxxxxxxxxxxx", 
                              "oauth_token"=>"some-token-xxxxxxxxxxxxxxxxxxxxxx", 
                              :oauth_token_secret=>"some-secret-xxxxxxxxxxxxxxxxxxxxxx", 
                              "oauth_token_secret"=>"some-secret-xxxxxxxxxxxxxxxxxxxxxx", 
                              :user_id=>"000000000", 
                              "user_id"=>"000000000", 
                              :screen_name=>"sample_user", 
                              "screen_name"=>"sample_user", 
                              :x_auth_expires=>"0", 
                              "x_auth_expires"=>"0"
                            }, 
                            @response=#<Net::HTTPOK 200 OK readbody=true>
            > 
            raw_info=#<OmniAuth::AuthHash 
                        contributors_enabled=false 
                        created_at="Fri Sep 02 23:56:11 +0000 2011" 
                        default_profile=false 
                        default_profile_image=false 
                        description="Hi my name is Sample and I'm a Twitter user." 
                        entities=#<OmniAuth::AuthHash 
                                    description=#<OmniAuth::AuthHash 
                                                    urls=[]
                                    > 
                                    url=#<OmniAuth::AuthHash 
                                            urls=[
                                              #<OmniAuth::AuthHash 
                                                 display_url="link.to/my/blog_or_someth…" 
                                                 expanded_url="http://link.to/my/blog_or_something.html" 
                                                 indices=[0, 23] 
                                                 url="https://t.co/SAMPLE007"
                                              >
                                            ]
                                    >
                        > 
                        favourites_count=690
                        follow_request_sent=false 
                        followers_count=42
                        following=false 
                        friends_count=34 
                        geo_enabled=false 
                        has_extended_profile=false 
                        id=000000000 
                        id_str="000000000" 
                        is_translation_enabled=false 
                        is_translator=false 
                        lang="ja" 
                        listed_count=24 
                        location="Tokyo, Japan" 
                        name="Sample user" 
                        notifications=false 
                        profile_background_color="DBE9ED" 
                        profile_background_image_url="http://abs.twimg.com/images/themes/theme17/bg.gif" 
                        profile_background_image_url_https="https://abs.twimg.com/images/themes/theme17/bg.gif" 
                        profile_background_tile=false 
                        profile_banner_url="https://pbs.twimg.com/profile_banners/0000000000/00000000000" 
                        profile_image_url="http://pbs.twimg.com/profile_images/010101010101010101/LeoGT5Xu_normal.png" 
                        profile_image_url_https="https://pbs.twimg.com/profile_images/010101010101010101/LeoGT5Xu_normal.png" 
                        profile_link_color="CC3366" 
                        profile_sidebar_border_color="DBE9ED" 
                        profile_sidebar_fill_color="E6F6F9" 
                        profile_text_color="333333" 
                        profile_use_background_image=true 
                        protected=false 
                        screen_name="sample_user" 
                        statuses_count=61468 
                        time_zone="Tokyo" 
                        url="https://t.co/SAMPLE007" 
                        utc_offset=32400 
                        verified=false
            >
  >
  info=#<OmniAuth::AuthHash::InfoHash
          description="Hi my name is Sample and I'm a Twitter user."
          email=nil
          image="http://pbs.twimg.com/profile_images/010101010101010101/LeoGT5Xu_normal.png"
          location="Tokyo, Japan"
          name="Sample User"
          nickname="sample_user"
          urls=#<OmniAuth::AuthHash
                  Twitter="https://twitter.com/sample_user"
                  Website="https://t.co/SAMPLE007">
  > 
  provider="twitter"
  uid="000000000"
> 
```

所以你可以从

```
env['omniauth.auth']['extra']['raw_info']['name']
env['omniauth.auth']['extra']['raw_info']['screen_name'] 
```

也。我不确定哪个（从`['info']`和`['raw_info']`）是更好的方法。但`['raw_info']`似乎比前者给了我们更多的信息。

* * *

编辑：是的，是的，是的，这都是在维基上写的！

[Auth Hash Schema - intridea/omniauth Wiki | Github](https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema "Auth Hash Schema - intridea/omniauth Wiki |  Github")

但是 Twitter 没有具体案例，所以也许我的回答毕竟是有用的！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T14:28:58.650

您可以通过以下步骤进行操作：

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

**用户/omniauth_callbacks_controller.rb**：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
   def twitter   
    # show twitter account information
    puts env['omniauth.auth']['uid']
    puts puts env['omniauth.auth']['nickname']
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-20T10:09:15.590

要将用户重定向到另一个表单以输入他们的电子邮件，我们可以使用此方法为他们注册。

用户被重定向后，如果是新用户，我们将呈现一个表单`TwitterForm`供用户输入电子邮件以完成注册。

接下来，表单将提交给我们指定的自定义操作，在我的例子中，我将它放在它将`UsersController`使用 Twitter 会话数据和用户输入的电子邮件完成注册过程。

[完整答案在这里](https://stackoverflow.com/questions/39044670/rails-devise-twitter-oauth-redirect-to-form-to-continue-oauth-registration)

**设计回调控制器**

```
 def twitter
        auth = request.env["omniauth.auth"]
        @user = User.where(provider: auth.provider, uid: auth.uid).first_or_create
        if @user.persisted?
            flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Twitter"
            sign_in_and_redirect @user, :event => :authentication
        else
            @form = TwitterForm.new 
            session["devise.twitter_data"] = request.env["omniauth.auth"].except("extra")
            render :layout => 'none'
        end
    end 
```

**用户控制器**

```
def twitter_register
    @form = TwitterForm.new(params[:twitter_form])
    if @form.valid?
      email = params[:twitter_form][:email]      
      @user = User.from_twitter_omniauth(session["devise.twitter_data"],email)
      if @user.persisted?
        flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Twitter"
        sign_in_and_redirect @user, :event => :authentication
      else
        redirect_to register_path 
      end
    else 
      render 'callbacks/twitter',layout: 'none'
    end
  end 
```

# coldfusion - 如何调整 RTF 图像的大小

> ID：15904158
> 
> 赞同：1
> 
> 时间：2013-04-09T14:07:22.650
> 
> 标签：coldfusion, coldfusion-9, rtf

我正在使用 ColdFusion 9 将图像写入 RTF 文档，并且我想将图像调整为特定大小。我将如何在 RTF 中做到这一点？我无法更改存储的图像尺寸或制作新图像。

```
#reportData.image#\nestcell{\*\nesttableprops\trowd\trgaph108\trbrdrt\brdrs\brdrw10\brdrcf1 \trpaddl108\trpaddr108\trpaddfl3\trpaddfr3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:32:48.570

您需要首先在服务器端使用 cfimage 作为`constraining`RTF 文档中特定大小的图像（这是您在问题中真正要问的），这对减小图像的实际物理大小没有任何作用。因此，在 RTF 中限制 1024x768 到 240x320 的 1MB 图像仍然会在文件中嵌入 1MB 图像并浪费带宽并使打开文档变慢。

# linker - 在使用 OpenMPI 时将 C 模块链接到 Fortran 程序：malloc 导致段错误而不是 null

> ID：15904161
> 
> 赞同：0
> 
> 时间：2013-04-09T14:07:27.080
> 
> 标签：linker, malloc, gfortran, openmpi

我有一个使用 MPI 的旧且凌乱的 Fortran 程序。它有一个用 C 编写的小模块，它试图通过`malloc()`迭代调用来确定内存中最大的可分配块，直到它返回`null`，然后将最大的成功分配大小返回给 Fortran 程序。

当我使用它编译它时`gfortran`，它运行良好，但是当我尝试使用它时`mpif90`，最后一个`malloc()`导致段错误而不是返回`null`。

这是没有实际 MPI 代码的最小说明性示例。文件`main.f`：

```
program test
    complex(8) :: sig(256000000) ! Just allocating some big array in fortran
    sig(1) = 0.d0                ! and now wondering how much space is left?
    call bigalloc
end 
```

文件`bigalloc.c`

```
#include <stdlib.h>
#include <stdio.h>

void bigalloc_() {
    size_t step = 0x80000000;
    size_t size = 0;
    int failed = 0;
    void* p;
    do {
        size += step;
        p = malloc(size);
        if (p) {
            free(p);
            printf("Allocated %zd...\n", size);
        } else {
            printf("So, that's our limit\n");
            failed = 1;
        }
    } while (!failed);
} 
```

使用 just 编译和运行`gfortran`（按预期工作）：

```
~$ gcc -c bigalloc.c -o bigalloc.o && gfortran -o main main.f bigalloc.o && ./main
Allocated 2147483648...
Allocated 4294967296...
So, that's our limit 
```

使用 MPI 编译并运行（失败）：

```
~$ gcc -c bigalloc.c -o bigalloc.o && mpif90 -o main main.f bigalloc.o && ./main
Allocated 2147483648...
Allocated 4294967296...
Segmentation fault 
```

这里`gcc`没有`mpicc`任何变化。当`main`也是用C编写并使用`mpicc`一切编译时也可以。所以问题出在 Fortran 上。

的输出在`mpif90 -show`这里。问题完全取决于`-lopen-pal`选项的存在。

```
$ mpif90 -show
gfortran -I/usr/include/openmpi/1.2.4-gcc/64 -I/usr/include/openmpi/1.2.4-gcc -m64 -pthread -I/usr/lib64/openmpi/1.2.4-gcc -L/usr/lib64/openmpi/1.2.4-gcc -lmpi_f90 -lmpi_f77 -lmpi -lopen-rte -lopen-pal -ldl -Wl,--export-dynamic -lnsl -lutil -lm -ldl 
```

似乎在链接 MPI 时，将标准替换为`malloc`PAL 中自己的标准，这在异常情况下无法正常工作。有没有办法绕过它（例如，通过某种方式将 my`bigalloc.c`与`glibc`静态链接）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:39:05.850

Open MPI 通过提供的挂钩机制进行拦截`malloc()`和`free()`调用，`glibc`以便它可以跟踪动态分配和解除分配的缓冲区。这样做是因为像 InfiniBand 这样的基于 RDMA 的网络需要将通信缓冲区固定（即，使其不可移动）在物理内存中，以便硬件可以访问它们。注册和取消注册内存（固定和取消固定它的过程）需要相当长的时间，这就是为什么库根本不取消固定已经固定的内存以希望它可以被重用（这就是为什么动态分配每个通信缓冲区不仅仅是非常馊主意）。但是如果内存是动态分配的，然后注册然后释放，这可能会导致问题。这就是 Open MPI 挂钩的原因`malloc/free`API 并跟踪动态分配。如果硬件支持，Open MPI 还可以使用 MMU 通知跟踪内存，并且相应地构建了库。

至少在较新的 Open MPI 版本中，可以通过将`memory_linux_disable`MCA 参数设置为 来禁用内存挂钩`1`。与所有其他 MCA 变量不同，该变量只能通过环境设置，例如，必须将环境变量设置`OMPI_MCA_memory_linux_disable`为`1`并导出。如果程序将在具有 InfiniBand 或其他基于 RDMA 的网络的集群上运行，请不要这样做！不幸的是，您正在运行一个无法识别此 MCA 参数的古老版本的 Open MPI，并且该`memory_hooks`模块似乎没有提供可以禁用它的机制。[你真的应该在 Open MPI 用户邮件列表](http://www.open-mpi.org/community/lists/ompi.php)上询问。

另请注意，Linux 内核在默认情况下会过度使用内存，即它们允许分配超过物理内存大小的虚拟内存。最终结果是，`malloc()`如果您（或任何 Open MPI 挂钩程序）尝试使用该内存，那么在内存大小比可用物理内存大小大得多的情况下会成功，在某些时候物理内存将被耗尽并且进程将收到`SIGSEGV`.

# python - MRJob - Python - 当除法为 0/值时如何返回 null

> ID：15904162
> 
> 赞同：0
> 
> 时间：2013-04-09T14:07:28.960
> 
> 标签：python, mrjob

如何修改此代码，以便当 senti_avg 不可整除（0/值）时，reducer() 输出 NULL 或 NONE 而不是崩溃？

```
def reducer(self, bs_id, value):
    avg_data = list(value)
    senti_sum = sum([a[0] for a in avg_data])
    word_sum = sum([a[1] for a in avg_data])
    senti_avg = senti_sum/float(word_sum)

    yield (bs_id, senti_avg) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:08:56.350

您使用[python 异常处理](http://docs.python.org/2/tutorial/errors.html#handling-exceptions)：

```
try:
    senti_avg = senti_sum/float(word_sum)
except ZeroDivisionError:
    senti_avg = None 
```

# c# - 将控制台应用程序窗口置于最前面代码说明

> ID：15904163
> 
> 赞同：2
> 
> 时间：2013-04-09T14:07:29.917
> 
> 标签：c#, console

我需要将控制台从 C# 表单/控制台应用程序带到前面。我得到以下代码，它将控制台窗口置于前面：[在 c# 中将控制台窗口置于前面](https://stackoverflow.com/questions/213480/bring-a-console-window-to-front-in-c-sharp)

**但是，为什么此代码示例也打印为 true**，我该如何禁用它？

```
public static void ToFront()
{
    string originalTitle = Console.Title;
    string uniqueTitle = Guid.NewGuid().ToString();
    Console.Title = uniqueTitle;
    Thread.Sleep(50);
    IntPtr handle = FindWindowByCaption(IntPtr.Zero, uniqueTitle);
    Console.Title = originalTitle;
    Console.WriteLine(SetForegroundWindow(handle));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:10:40.317

改变你的最后一行

```
Console.WriteLine(SetForegroundWindow(handle)); 
```

到

```
SetForegroundWindow(handle); 
```

您所拥有的是执行函数并打印结果值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:10:53.897

这条线是罪魁祸首：

```
Console.WriteLine(SetForegroundWindow(handle)); 
```

[SetForeGroundWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)返回一个布尔值，由 WriteLine 自动转换为字符串，并打印出来。

将其替换为：

```
SetForegroundWindow(handle); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:10:33.690

您正在打印 SetForgroundWindow 的返回，它在成功时返回 true。只需将类删除到 console.writeline

```
Console.Title = originalTitle;
SetForegroundWindow(handle); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:11:33.240

您可以使用;

```
SetForegroundWindow(handle); 
```

不是

```
Console.WriteLine(SetForegroundWindow(handle)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:18:25.080

鉴于标题在桌面中是唯一的，添加对 Microsoft.VisualBasic 的引用，然后：

```
using Microsoft.VisualBasic;
....
Interaction.AppActivate(Console.Title); 
```

编辑：对不起，我没有完全阅读这个问题，但如果 VB 导入不会冒犯你，这是一种将应用程序置于前台的简单方法。

# php - PHP 输出图像

> ID：15904168
> 
> 赞同：-2
> 
> 时间：2013-04-09T14:07:40.320
> 
> 标签：php, html, mysql, jpeg

我需要在这个页面中输出一个 jpeg 图像。查看下面的代码，我设置了一个向用户显示数据的表单。在此表单内或表单下方，我需要输出图像。该代码作为 PHP 文件运行，因此普通的 HTML 标记不起作用。有任何想法吗？

```
<!DOCTYPE html>
    <?php
    session_start();
    ?>
    <html>
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <meta name="apple-mobile-web-app-status-bar-style" content="black" />
            <title>
            </title>
            <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
            <link rel="stylesheet" href="my.css" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
            </script>
            <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
            </script>
            <script src="my.js">
            </script>
            <!-- User-generated css -->
            <style>
            </style>
            <!-- User-generated js -->
            <script>

                try {

        $(function() {

        });

      } catch (error) {
        console.error("Your javascript has an error: " + error);
      }
            </script>
         </head>
        <body>
            <!-- Home -->
            <div data-role="page" id="page1">
                <div data-theme="a" data-role="header">
                <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                        Back
                    </a>
                    <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                     Home  
                    </a>
                    <h3>
                        Book Car
                    </h3>
               </div>

               <div data-role="content">
                    <h3>
                        Select the car to rent from the availability:
                    </h3>
                    <br />
            <?php
            {
                mysql_connect("localhost" , "" , "") or die (mysql_error());
                mysql_select_db("") or die(mysql_error());

                $pid=intval($_SESSION["User_id"]); 
                $query = "SELECT `car`, `details`, `price` FROM `Car`";

                //executes query on the database
                $result = mysql_query ($query) or die ("didn't query");

                //this selects the results as rows
                $num = mysql_num_rows ($result);    

                while($row=mysql_fetch_assoc($result))
                {

                    $_SESSION['car'] = $row['car'];
                    $_SESSION['details'] = $row['details'];
                    $_SESSION['price'] = $row['price'];
                }
            }
            ?>  

    <!DOCTYPE html>
    <html>
    <body>

    <form action="demo_form.asp">
     Car: <input type="text" name="country" value="<?php echo $_SESSION['car']; ?>" readonly><br>
     Details: <input type="text" name="country" value="<?php echo $_SESSION['details']; ?>" readonly><br>
     Price: <input type="text" name="country" value="<?php echo $_SESSION['price']; ?>" readonly><br>
      <input type="submit" value="Submit">

    </form>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:10:57.980

在您的 php 脚本**中，在任何输出之前**添加此内容，以便将 php 作为图像读取：

```
header("Content-Type: image/jpg"); //or image/gif or image/png ... 
```

然后你可以在你的表单中添加这个：

```
<img src='my_php_script.php?image=1' /> 
```

您可以通过将参数传递给 php 脚本来识别您的图像。

[头文件](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:11:06.250

你有这个两次：`<!DOCTYPE html>`。那是错误的。此外：标准 HTML`<img src="yourimg.jpg" alt="this img" />`在您的表单下方可以正常工作，并且完成了

# php - 将文本大写到网站标题中

> ID：15904171
> 
> 赞同：0
> 
> 时间：2013-04-09T14:07:51.937
> 
> 标签：php, html, styles, title, capitalize

我有一个来自未大写的 sql 数据库的文本。

在我的 HTML 中，我通常应用 CSS text-transform 来大写文本，但现在我面临一个问题：

我希望此文本成为我网站标题的一部分。但是，我不能在标题中设置样式。

我如何设置文本样式，然后在 PHP 上抓取它，然后将其插入到我的标题中？

这是我尝试过的但不起作用的方法：

```
<title>Shop - <p style="text-transform:capitalize;"><?php echo $row2['name'];?></p></title> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:09:34.003

您需要使用 PHP 转换。

```
<?php echo ucfirst($row2['name']); ?> 
```

你可以使用很多函数，[ucfirst](http://php.net/manual/en/function.ucfirst.php)，[ucwords](http://php.net/manual/en/function.ucwords.php)，[strtoupper](http://php.net/manual/en/function.strtoupper.php)。

正如[W3C 所指出](http://www.w3.org/Provider/Style/TITLE.html)的，您应该只使用文本，并且最大长度为 64 个字符：

> 标题不是文档文本的一部分，而是整个文档的属性。它可能不包含锚点、段落标记或突出显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:09:13.127

根据需要使用 PHP 函数[ucfirst](http://php.net/manual/en/function.ucfirst.php)、[ucwords](http://php.net/manual/en/function.ucwords.php)、[strtoupper](http://php.net/manual/en/function.strtoupper.php)。

```
ucfirst($row2['name']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:10:30.907

PHP 有几个函数可以将文本大写：

```
ucwords($text) 
```

[http://php.net/manual/en/function.ucwords.php](http://php.net/manual/en/function.ucwords.php)

```
strtoupper($text) 
```

[http://www.php.net/manual/en/function.strtoupper.php](http://www.php.net/manual/en/function.strtoupper.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:09:24.783

您可以使用

```
ucfirst($row2['name']) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:09:47.310

您可以在 php 中使用此函数以大写形式回显您的文本：http: [//php.net/manual/en/function.strtoupper.php](http://php.net/manual/en/function.strtoupper.php)
[http://php.net/manual/en/function.ucfirst.php](http://php.net/manual/en/function.ucfirst.php)

# actionscript-3 - 无法从 Socket 读取数据

> ID：15904172
> 
> 赞同：0
> 
> 时间：2013-04-09T14:07:52.747
> 
> 标签：actionscript-3, flash, flash-builder

我有一个与套接字服务器交互的 Flash AS3 文件，服务器以纯文本形式发送数据。我无法读取使用 Socket 类从服务器发送的数据。下面是我在 Flash 中使用的代码。

```
var socket:Socket = new Socket("localhost", 9231);

socket.addEventListener(Event.CONNECT, socketConnectHandler, false, 0, true);
socket.addEventListener(ProgressEvent.SOCKET_DATA, socketDataHandler, false, 0, true);

function socketConnectHandler(event:Event):void{
    trace("Connection has been established ");
}

function socketDataHandler(event:ProgressEvent):void{   
    var stream:ByteArray = new ByteArray();
    socket.writeBytes(stream, 0, 0);
    trace(stream.readUTF());
    trace( socket.readUTF());
} 
```

当我尝试读取正在发送的 ByteArray 和套接字数据时，出现以下错误。

```
Error: Error #2030: End of file was encountered.
    at flash.net::Socket/readUTF()
    at socket_test_fla::MainTimeline/socketDataHandler() 
```

我尝试了各种组合以使其正常工作但没有成功。任何帮助我理解问题并找到解决方法的线索将不胜感激。

更新：

我将@t给出的代码修改为

```
var stream:ByteArray = new ByteArray();
socket.writeBytes(stream, 0, 0);

var data:String = "";
while(socket.bytesAvailable > 0) {
  data += socket.readByte();
}

trace("data "+ data); 
```

我得到跟踪为“0124661171161161111109579756184114117101124-1”或类似的数字。任何想法将这些代码转换为相应的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:35:31.703

最后我得到了它的工作......谢谢大家的帮助。下面是对我有用的代码。

```
var socket:Socket = new Socket("localhost", 2553);

socket.addEventListener(Event.CONNECT, socketConnectHandler, false, 0, true);
socket.addEventListener(ProgressEvent.SOCKET_DATA, socketDataHandler, false, 0, true);

function socketConnectHandler(event:Event):void{
    trace("Connection has been established ");
}

function socketDataHandler(event:ProgressEvent):void{   

    var stream:ByteArray = new ByteArray();
    socket.writeBytes(stream, 0, 0);

    var data:String = "";

    while(socket.bytesAvailable){
        data += socket.readUTFBytes(1);
    }   

    trace("data "+ data);   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:48:41.840

文件结束意味着没有足够的数据可供读取。

```
var data:String = "";
while(socket.bytesAvailable > 0) {
    data += socket.readUTF();
} 
```

而且您还试图读取空的“流”ByteArray。

# jquery - html5表单验证（不提交）

> ID：15904174
> 
> 赞同：3
> 
> 时间：2013-04-09T14:08:06.430
> 
> 标签：jquery, html, internet-explorer-9, validation

我的应用程序中有一个模态 div，它包含表单元素，但我不想提交表单，值被写入页面上的其他 DOM 元素。

但是，我确实希望在允许执行“确定”操作之前确保此模式中的字段有效。

我需要这个在 IE9 中工作（IIRC 不支持`.checkValidity()`）

所以，我要问的是，当我单击确定按钮（不是提交按钮）时，如何在不提交的情况下验证并显示此表单上的无效内容。

我希望尽可能多地使用 html5 功能（`<input required />`等等）。

JsFiddle：http: [//jsfiddle.net/gibble/AtHas/](http://jsfiddle.net/gibble/AtHas/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:15:08.453

JQuery 有一个用于验证的插件，可以用来处理你想要完成的事情。

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:14:46.150

这是一个类似问题的链接：

[什么 javascript fallback 最能模拟 html5 表单验证](https://stackoverflow.com/questions/14355626/what-javascript-fallback-does-best-simulate-html5-form-validation)

html5 中的表单验证并不适用于所有浏览器，我们只需要等待，同时实现 javascript。

# c++ - 有没有办法为 gdb 中的所有断点设置一个条件来调试 Cpp 代码？

> ID：15904180
> 
> 赞同：1
> 
> 时间：2013-04-09T14:08:10.263
> 
> 标签：c++, gdb

我必须调试一个我只想在一定次数的迭代后调试的代码。例如。1000 次迭代后进行一次调试，8000 次以上迭代后进行下一次调试。由于我有很多断点，因此更改每个断点的条件很乏味。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:52:31.433

是的，你可以这么做：

*   使用`set confirm off`这样 GDB 不会提示您“您确定要这样做吗”提示
*   用于`disable`禁用所有断点
*   在循环开始处添加一个新断点
*   将`enable`命令附加到新断点（这将在此触发时重新启用所有其他断点）
*   将`ignore`新断点的计数设置为 1000。

享受您新的调试能力。

# css - 子 div 扩展到父 div 的全宽大小，css 在同一行

> ID：15904182
> 
> 赞同：2
> 
> 时间：2013-04-09T14:08:18.337
> 
> 标签：css, width, parent, children, expand

```
<style>
.classname {
    min-width:248px;
    height:40px;
    max-width:498px;
    border:1px solid red;
    float:left;     
}
</style>

    <div id="maindiv" style="width:3134px;border:1px solid green;height:90px;">
        <div class="classname">
        </div>
        <div class="classname">
        </div>
        <div class="classname">
        </div>
    </div> 
```

因此，无论有多少孩子，`maindiv`我都希望他们扩展到父宽度大小的全尺寸。例如：如果 maindiv 有 1200px 宽度，如果是 3 或 300px 如果是 4 则每个孩子有 400px 只有 CSS 解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T14:17:26.267

这有点啰嗦，但可能

```
/* one item */
.classname:first-child:nth-last-child(1) {
    width: 100%;
}

/* two items */
.classname:first-child:nth-last-child(2),
.classname:first-child:nth-last-child(2) ~ .classname {
    width: 50%;
}

/* three items */
.classname:first-child:nth-last-child(3),
.classname:first-child:nth-last-child(3) ~ .classname {
    width: 33.3333%;
}

/* four items */
.classname:first-child:nth-last-child(4),
.classname:first-child:nth-last-child(4) ~ .classname {
    width: 25%;
}

... 
```

您可能还需要

```
.classname {
    display: inline-block;
} 
```

有关详细信息，请参阅[Lea Verou 的博客文章](http://lea.verou.me/2011/01/styling-children-based-on-their-number-with-css3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:13:02.660

`<DIV>`s 通常不会并排运行；它们是块元素。您正在寻找的多个元素“自动共享空间”的行为在 CSS 中本机实现并不容易，这就是为什么所有各种“多列布局”CSS 解决方案只支持一组特定数量的列; 例如，一些流行的支持 12 的所有因数。

解决此类特定问题的最简单方法是使用表格单元格（或`<DIV>`带有表格单元格布局的 s）。但是，您必须设置`width=33%`或`width=25%`知道有多少列。或者使用您不想要的javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:14:09.130

我认为仅使用 CSS 是不可能的。

如果您在`#maindiv`服务器端生成宽度，您可以进行一些计算。

例子：

```
<?php
    $width = 3134;
    $children = 4;
    $singlewidth = width/children;
?>
<div class="classname" style="width: <?php echo $singlewidth; ?>px;"></div> 
```

或者，您可以使用 a `<table>`，具体取决于您要执行的操作。

# java - 将两个对象相互连接

> ID：15904190
> 
> 赞同：1
> 
> 时间：2013-04-09T14:08:35.080
> 
> 标签：java, arraylist

我有这四门课。我要做的是使用 customerID 将“Liftcard”添加到“用户”。这是我到目前为止得到的，但它似乎不起作用。我很确定问题出在窗口类中的公共 void regLiftCard() 方法中。有人知道我应该怎么做吗？（我使用数组列表）

用户等级：

```
public class User implements Serializable {
private String surename, firstName, gender, age;
private int customerID;
public LiftCard liftCard;
User next; 
```

同班：

```
 public LiftCard getLiftCard(){
    return liftCard;
}

public void setLiftCard(LiftCard liftC){
    liftCard = liftC;
} 
```

窗口类：

```
 public void regLiftCard() 
  {
        int cardtype = Integer.parseInt(cardTypeField.getText());
        int customerID = Integer.parseInt(findCustomerField.getText());

        if(cardtype == 1 || cardtype == 2 || cardtype == 3 || customerID != 0) 
      {
            //JOptionPane.showMessageDialog(this, "Du må fylle inn hvilket kort du skal ha 1/2/3");

      try
      {
          User uu = userA.findById(customerID);
            if (uu != null) {
                if (uu.getLiftCard() != null) {
                    JOptionPane.showMessageDialog(this, "Kunden har allerede kort");
                }

            }
            String fornavn = firstNameField.getText();
            String etternavn = surenameField.getText();
            String alder = ageField.getText();
            String kjonn = genderField.getText();
            LiftCard c = new LiftCard(cardNumber, cardtype);
            if (userA.findByCardNumber(cardNumber) == null) {
                uu.setLiftCard(c);
            } else {
                uu = new User(customerID, fornavn, etternavn, alder, kjonn);
            }
            JOptionPane.showMessageDialog(this, "Nytt kort/kunde er registrert");

        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Feil i nummerformat!");
        }
      }
    } 
```

用户存档类：

```
 public void regLiftCard(User u) {
    list.add(u);
} 
```

电梯卡类：

```
private int cardNumber, cardType;

public LiftCard(int cN, int cT)
{
    cardNumber = cN;
    cardType = cT;
}

public int getCardNumber(){
    return cardNumber;
}

public int getcardType(){
    return cardType;
}

public String toString()
{
    return cardNumber + "\t" + cardType;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:34:00.087

我想您正在尝试将卡注册到唯一用户，因此在 regListCard 上：

您正在寻找用户。如果用户不为空，则查找它的卡。如果卡不为空，则表示该用户已经拥有卡。然后，您将获得有关用户和卡片的所有属性输入。然后，您创建一张卡片。然后，使用此卡搜索用户，并将之前创建的卡设置为该用户。但是，您分配此卡的用户有可能为空，因为您正在通过它的卡寻找用户，如果它为空，您将这张卡分配给他，如果他为空，则不可能，并且似乎这就是问题所在。然后，如果没有用户使用此卡，则您正在实例化一个新用户，但不分配任何卡。

所以，把这个：

```
else {
            uu = new User(customerID, fornavn, etternavn, alder, kjonn);
            uu.setLiftCard(c); 
        } 
```

在这之后：

```
if (uu != null) {
            if (uu.getLiftCard() != null) {
                JOptionPane.showMessageDialog(this, "Kunden har allerede kort");
            } 
```

并在“if”之前获取输入。试试看，告诉我们它是如何工作的，如果我不理解你的代码，我很抱歉。

# html - 填充左右边框

> ID：15904192
> 
> 赞同：0
> 
> 时间：2013-04-09T14:08:44.797
> 
> 标签：html, css

我创建了一个基本网页，主要内容居中，但我想填充内容两侧的空白。 [http://hometown.net46.net/test.html](http://hometown.net46.net/test.html) 这就是我所拥有的。我想填充左右两边的空白。注意 - 网页是一个灵活的盒子。这是我的html：

```
<head>
    <link rel="stylesheet" href="main.css" />
</head>

<body>
<div id="big_wrapper">
    <nav id="top_menu">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="about.html">About us</a></li>
            <li><a href="posts.php">Posts</a></li>
            <li><a href="booking.php">Booking</a></li>
            <li><a href="contact.php">Contact us</a></li>
        </ul>
    </nav>

    <header id="top_header">
         <h2>Image here</h2>
    </header>   
<div id="new_div">
    <section id="main_section">

        <article>
            <header id="welc">
            <h2>Welcome to the lounge!</h2>
            </header>
            <p>The lounge is a youth group for 11 - 18 year olds. We are located in Eastbourne.</p>

        </article>

         <article>
            <header id="article2">
            <h2>The lounge website created!!</h2>
            </header>
            <p>blahblahblahg.</p>

        </article>

    </section>

    <aside id="side_news">
        <h4><u>News:</u></h4>
        <p>Lounge painting - 13th march</p>
    </aside>
    </div>
    <footer id="footer">
        Hosted by <a href="http://joomla.com">Joomla</a>
    </footer>
</div>
</body> 
```

我的CSS：

```
*{
    margin: 0px;
    padding:0px;
}
h2{
    font:bold 20px tahoma;
}
h4{
    font:bold 14px tahoma;
}
header, section, footer, aside, nav, article{
    display:block;
}
body{
    width:100%;
    display:-webkit-box;
    -webkit-box-pack: center;

}
#big_wrapper{
    max-width: 1000px;
    margin: 20px 0px;
    display:-webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-flex: 1;
}
#top_header{
    background:yellow;
    border:3px solid black;
    padding:20px;
}
#top_menu{
    border:red;
    background:#DBD7D9;
    border-radius:2px;
}
#top_menu li{
    display:inline-block;
    list-style:none;
    padding:5px;
    font:bold 20px tahoma;
    height:30px;

}
#top_menu a{
    color:black;
    text-decoration:none;

    }
#top_menu li:hover{
    background:yellow;
}
#new_div {
    display:-webkit-box;
    -webkit-box-orient:horizontol;

}
#main_section{
    border:1px solid blue;
    -webkit-box-flex: 1;
    margin:20px;
    padding:20px;
}
#side_news{
    border:1px solid red;
    width: 220px;
    margin: 20px 0px;
    padding: 30px;
    background: #66CCCC
}
#footer{
    text-align:center;
    padding:20px;
    border-top: 2px solid green;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:11:17.553

*在您的网站上填充*居中内容的左侧和右侧的空白区域的一种方法是将`main-content`div 包装在另一个容器中`div`并为容器`div`提供背景颜色

```
<div id="container">
   <div id="main-content">

   </div>
</div> 
```

CSS：

```
#container{
    width: 960px;
    background: #ccc;
}
#main-content{
    width: 800px;
    margin: 0 auto;
} 
```

**工作示例：**

[http://jsfiddle.net/7N3Ea/7/](http://jsfiddle.net/7N3Ea/7/)

# api - 第三方商店信用卡信息？

> ID：15904193
> 
> 赞同：1
> 
> 时间：2013-04-09T14:08:45.483
> 
> 标签：api, pci-compliance, pci-dss

有谁知道第三方将以符合 PCI 的方式存储信用卡和/或 ACH 信息？让它可以查看，然后手动处理？

我查看了 stripe.com，但它看起来像是对卡数据进行标记，我无法检索它。另一个是 Square 但我不知道他们是否也提供这个？

那么您是否知道安全存储符合 PCI 标准的数据的服务，这样我就无需进行审计并做进一步的工作来保护我自己的服务器？

是否有诸如 PCI 兼容数据存储服务之类的东西，您可以在其中登录并获取您需要的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:01:24.237

您不会找到这样的服务，因为符合 PCI 的一部分是确保接收原始数据的其他任何地方也符合 PCI。

这意味着符合 PCI 的提供商要向您返回原始数据，*您*需要符合 PCI 标准。（当然，如果是这样的话，你为什么需要第三方）。

# paypal - 通过贝宝检索用户信用卡详细信息

> ID：15904194
> 
> 赞同：0
> 
> 时间：2013-04-09T14:08:46.643
> 
> 标签：paypal, credit-card, storing-data

我正在建立一个位于澳大利亚的网站，并且我一直在研究如何保存信用卡号码。目前，我的问题不太幸运。Paypal 帮不上什么忙。

该站点将运行在许多小交易上。我计划使用贝宝网关通过信用卡和贝宝账户处理付款。

我想做的是检索用户的信用卡详细信息，这样他们就不需要每次都输入它们。

我想这是如何工作的，客户第一次会输入他们的信用卡详细信息来进行购买。完成此购买后，该网站将收到来自贝宝的交易 ID。然后我保存此 ID 以供将来参考映射到用户 ID 或电子邮件地址。

因此，下次用户希望通过他们的信用卡进行购买时，我可以将此交易 ID 转发到贝宝，它已经可以在所有字段中填充他们的卡详细信息。或者显示最后 4 位数字或类似的屏幕，并询问用户是否希望再次使用此卡。

这一切都假设用户没有贝宝帐户。

这可能吗？有没有比这更好/更具成本效益的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:27:14.537

你的理解并不遥远。当您向 PayPal（或任何支付网关）提交卡详细信息时，您应该返回一个令牌 ID。您将存储该令牌 ID 而不是卡详细信息，然后在将来您希望付款的任何时候提交令牌 ID（以及付款值等）

通过仅存储令牌值（而不是卡详细信息），您可以免除 PCI 合规性的**大部分**麻烦。PCI 确实允许您以纯文本（最多前六位和后四位）存储部分卡详细信息，因此您可以安全地将这些信息与您的令牌 ID 一起存储。这将允许您显示这些详细信息并询问“再次使用此卡”

这方面的一个例子记录在 PayPal 的网站上：
[https ://developer.paypal.com/webapps/developer/docs/integration/direct/store-a-credit-card/](https://developer.paypal.com/webapps/developer/docs/integration/direct/store-a-credit-card/)

# c# - 实体框架 savechanges() 不工作 EF5、.Net4

> ID：15904206
> 
> 赞同：0
> 
> 时间：2013-04-09T14:09:06.380
> 
> 标签：c#, .net-4.0, entity-framework-5, savechanges

我有以下代码来更新一些库存值...

```
private static void UpdateInventory(int prodId, int qty)
    {
        using (var context = new uStore7_1Entities())
        {
            //Get the catalogNo and ProductUnitID of the product passed in so we can find all identical products that might just be boxed differently
            var currProdItem = context.Products.Where(c => c.ProductID.Equals(prodId))
                                       .Select(c => new {c.CatalogNo, c.ProductUnitID}).FirstOrDefault();

            //Get the units per box factor for calculating total product ordered
            var prodIdAmount =
                context.ProductUnits.Where(pa => pa.ProductUnitID.Equals(currProdItem.ProductUnitID))
                       .Select(pa => pa.Amount)
                       .FirstOrDefault();

            //Calculate the total number of units for this item
            var prodUnits = qty*prodIdAmount;

            //Get the entire list of products with the specified catalog number excluding the product passed in
            var uStoreProducts =
                context.Products.Where(p => p.CatalogNo.Equals(currProdItem.CatalogNo) && !p.ProductID.Equals(prodId))
                       .Select(p => p.ProductID);

            //Loop through each product in the uStoreProductsList
            foreach (var uStoreProduct in uStoreProducts)
            {
                var currentProduct = uStoreProduct;

                //Get the current product's ProductUnitId to get the 'pieces' per "box"
                var currentUnitId =
                    context.Products.Where(u => u.ProductID.Equals(currentProduct))
                           .Select(u => u.ProductUnitID)
                           .FirstOrDefault();

                //Use the ProductUnitId to get the "Amount" from the ProductUnits table.
                var inventoryFactor =
                    context.ProductUnits.Where(i => i.ProductUnitID.Equals(currentUnitId))
                           .Select(i => i.Amount)
                           .FirstOrDefault();

                //Divide the quantity passed 
                var qtyInUnits = prodUnits/inventoryFactor;

                var inventory =
                    context.ProductInventories.Where(pi => pi.ProductID.Equals(currentProduct))
                           .Select(pi => pi.InventoryQuantity)
                           .FirstOrDefault();

                /*var inventory = (from i in context.ProductInventories
                                where i.ProductID == currentProduct
                                select i).FirstOrDefault();
                */

                if (inventory != null)
                {
                    var newinv = inventory - qtyInUnits;
                    inventory = newinv;
                    //context.SaveChanges();
                }
            }
            context.SaveChanges();

        }

    } 
```

`SaveChanges()`似乎没有更新任何东西。我已经对其进行了调试，并且库存值已更改为所需的值，但由于某种原因它没有更新。我在循环内和循环外都试过了，都没有改变。有任何想法吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:14:44.337

你`code`没有更新任何东西。您所做的就是收集实体并在局部变量中分配计算值。但是你从来没有真正改变过`property`你的一个`entities`.

请注意，选择实体的属性、将它们存储在变量中并替换此变量的值不起作用。如果要修改实体，则需要选择它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:16:38.823

您的问题是对象替换，而不是重新分配。创建“newinv”时，它与您的上下文分离，而“inventory”是附加对象。当“newinv”被分配给“inventory”时，它就失去了与上下文的关联。

试试这个：

```
 var prodInventory =
                   context.ProductInventories
                   .Where(pi => pi.ProductID.Equals(currentProduct))
                   .FirstOrDefault();

                if (prodInventory != null)
                {
                    var newinv = prodInventory.InventoryQuantity - qtyInUnits;
                    prodInventory.InventoryQuantity = newinv; // This updates the actual context object now.
                } 
```

# c++ - cin.getline() 不将 \0 添加到数组 C++ 的末尾

> ID：15904210
> 
> 赞同：0
> 
> 时间：2013-04-09T14:09:15.840
> 
> 标签：c++, arrays, char, cin

我有如下代码行：

```
const int maxtext=1000;
char text[maxtext];

cin.getline(text,maxtext); 
```

然后当我尝试查看

```
sizeof(text) 
```

它向我显示 maxtext，而不是输入的长度。

我做错了什么？

PD.：我不能使用 <string> 库的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:12:24.210

`sizeof(text)`不检查的内容`text`（它返回对象的字节大小，请参阅[sizeof](http://en.cppreference.com/w/cpp/language/sizeof)）因此是否存在空终止字符`text`是无关紧要的。改为使用`strlen(text)`。确保`text`在使用之前已填充`text`：

```
if (cin.getline(text, maxtext))
{
} 
```

通过使用[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)with可以避免硬编码固定大小以供读取[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)：

```
std::string text;
if (std::getline(std::cin, text))
{
} 
```

# css - CSS Filter grayscale：我想要黑色

> ID：15904211
> 
> 赞同：27
> 
> 时间：2013-04-09T14:09:16.467
> 
> 标签：css

我正在使用以下 css 将我的彩色图像转换为灰度。

```
img.desaturate{
    filter: grayscale(100%);
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    filter: url(desaturate.svg#greyscale);
    filter: gray;
    -webkit-filter: grayscale(1);
} 
```

但我想要**黑色**（rgb（0,0,0）或#000000），而不是灰色。可能吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-07-08T11:43:29.303

尝试使用：

```
filter: brightness(0%); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-09T14:23:07.253

我想您只想要黑白图像，例如矢量图像或其他东西，就这样吗？您可以尝试使用饱和亮度和对比度滤镜：

```
filter: gray saturate(0%) brightness(70%) contrast(1000%); 
```

[jsfiddle 中的](http://jsfiddle.net/aJDBy/) 演示（演示仅适用于 Webkit，我懒得写所有供应商扩展：P）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-05T13:34:08.760

我迟到了，但这是迄今为止我找到的最佳解决方案：

```
filter: brightness(0) invert(1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-26T16:48:04.197

我看到这是一个老问题，但是您不能将背景颜色应用于黑色的父元素并用于`opacity`淡化子元素`img`吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-20T07:20:31.120

写这个的专业人士：

[https://codepen.io/sosuke/pen/Pjoqqp](https://codepen.io/sosuke/pen/Pjoqqp)

说把它变黑这样做：

```
brightness(0) saturate(100%) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-30T12:56:33.970

您需要的过滤器值取决于您网站的内容（图像、背景颜色等）。对于我的网站`filter: grayscale(100%) brightness(70%) contrast(2);`作品。
只是玩这些价值观，直到你得到你喜欢的东西。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-09T14:19:56.753

我会尝试使用饱和滤镜而不是灰度来获得黑色。这是 david Walshe 网站上的链接，您可以使用这些设置进行操作...

[http://davidwalsh.name/demo/css-filters.php](http://davidwalsh.name/demo/css-filters.php)

# c# - Stackoverflow 样式 URL（自定义传出 URL）

> ID：15904213
> 
> 赞同：10
> 
> 时间：2013-04-09T14:09:19.787
> 
> 标签：c#, asp.net-mvc-3, url, asp.net-routing

如果我导航到以下 stackoverflow URL `http://stackoverflow.com/questions/15532493`，它会自动附加问题的标题，如下所示：

`http://stackoverflow.com/questions/15532493/mvc-custom-route-gives-404`

也就是说，我可以在浏览器中输入**不带**问题标题的 URL，它会自动附加。

我将如何在我的应用程序中实现相同的结果？（注意：我知道问题标题不会影响呈现的页面）。

我有一个控制器调用`Users`了一个名为`Details`. 我定义了以下路线：

```
routes.MapRoute("UserRoute",
    "Users/{*domain}",
     new { controller = "User", action = "Details" },
     new { action = "^Details$" }); 
```

由于这是一个 Intranet 应用程序，因此用户根据他们的 Windows 帐户进行身份验证。我想将域和用户名附加到 URL。

如果我像这样在视图中生成 URL：

```
@Html.ActionLink("Model.UserName", "Details", "User", new { domain = Model.Identity.Replace("\\", "/") }) 
```

我得到一个如下所示的 URL：

> 域/用户/ACME/jsmith

但是，如果用户使用浏览器导航栏导航到 URL `Domain/Users/`，它会匹配路由并且用户会被带到用户详细信息页面。在这种情况下，我想将 附加`ACME/jsmith/`到 URL 上。

到目前为止我所做的研究表明我可能必须通过派生`RouteBase`和实现`GetRouteData`and`GetVirtualPath`方法来实现自定义路由对象，但我不知道从哪里开始（msdn 文档非常薄）。

所以我想知道的是：

1.  有没有办法在不实现自定义路由的情况下实现这一点？
2.  如果没有，是否有人知道任何好的资源可以让我开始实施自定义路线？
3.  如果需要自定义路由实现，它如何获取可能必须从数据库加载的信息？让服务在路由中进行数据库调用是否可以（这对我来说似乎是错误的）或者信息可以通过 MVC 框架传递给路由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:25:58.600

其实很简单。由于标题只是出于搜索引擎优化的原因而存在，因此您不需要解决实际问题，因此问题控制器（在 SO 情况下）将根据 id（在 URL 中）加载正确的问题并使用 301 重定向用户状态码。

您可以使用任何网络检查器查看此行为

![在此处输入图像描述](https://i.stack.imgur.com/JVxcG.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:20:49.430

您可以使用 Javascript 在客户端执行此操作：

```
history.pushState({}, /* Title Here */, /* URL Here */ ); 
```

唯一的缺点是并非所有浏览器都支持它。

# php - 如何创建 2 列并设置 AUTO_INCREMENT

> ID：15904214
> 
> 赞同：0
> 
> 时间：2013-04-09T14:09:23.467
> 
> 标签：php, mysql, phpmyadmin

我正在尝试创建 2 列并设置 auto_increment 我已经创建了 1 列并设置了 auto_increment 和第 2 列显示错误以设置 auto_increment

我如何创建 2 列并设置 auto_increment 请帮我解决这个问题谢谢

SQL查询：

```
ALTER TABLE  `admission` CHANGE  `rollno`  `rollno` INT( 8 ) NOT NULL AUTO_INCREMENT 
```

MySQL 说：

> #1075 - 表定义不正确；只能有一个自动列，并且必须将其定义为键

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:16:58.477

就像错误说你只能有一个 auto_increment 列。在我看来，由于两列的值很可能总是相同的，因此您可以只使用一列。如果不是这种情况，那么您可以手动迭代该列，或者您可以`INSERT`在表上创建一个触发器，将新列设置为另一个`auto_increment`值或它应该是的任何值（max + 1 )?

# jquery - 使用 3 列和 3 个列表视图

> ID：15904218
> 
> 赞同：0
> 
> 时间：2013-04-09T14:09:27.080
> 
> 标签：jquery, jquery-mobile

我需要在一个页面中使用 3 列，有 3 个不同的列表视图，但是当我使用第一个时

```
<div data-role="page" id="left"> 
```

并关闭此 div，其他列不会出现。

`left_menu.php`和`right_menu.php`principal.php 类似

如何解决这个问题？

```
<style type="text/css">
body
    {
    margin: 0; /* margin and padding only necessary to cater for Mac IE5 */
    padding: 0;
    /*\*/   overflow: hidden; /* because Mac IE5 don't understand */
    }
div
    {
    margin: 0;
    padding: 0;
    }
#central
    {
    /*\*/
    position: absolute;
    top: 0%;
    right: 40%;
    bottom: 0%;
    left: 20%;
    /* Exclude all previous props for Mac IE5 */
    margin: 26% 31% 1% 21%; /* Cater for Mac IE5 */
    /*\*/ margin: 0; /* Put back for all the rest */
    /*\*/ overflow: auto; /* no need for Mac IE5 to see this */
    }
#sidebar-left
    {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 20%;
    overflow: auto;
    }
#sidebar-right
    {
    position: absolute;
    top:  4px;
    right: -4px;
    bottom: 0;
    overflow: auto;
    width: 35%;
    }
    </style>
</head> 
<body>

<div id="sidebar-left">

  <?php require_once('left_menu.php'); ?> 

</div>

<div id="central">

  <?php require_once('principal.php'); ?>

</div>

<div id="sidebar-right">

   <?php require_once('menu_right.php'); ?>

</div>

</div>

//-----------------------------------//

principal.php

<div data-role="header">
    <h1>Select</h1>
    <a href="../index.php" data-icon="home" data-iconpos="left" data-direction="reverse" 
        class="ui-btn-right">Home</a>
</div>

<div data-role="content">
  <ul data-role="listview" data-inset="true" data-theme="c">
     <li><a href=#cat1>Option 1</a></li>
     <li><a href=#cat2>Option 2</a></li>
     <li><a href=#cat3>Option 3</a></li>
  </ul>
</div>

<div data-role="page" id="cat1">
  <div data-role="header">
    <h1>Option 1</h1>
    <a href="../index.php" data-icon="home" data-iconpos="left" data-direction="reverse" class="ui-btn-right">Home</a>
  </div>

  <div data-role="content">
    <ul data-role="listview" data-filter="false" data-inset="true" data-theme="c"> 
       <li><a href="insert.php" data-rel="dialog" data-transition="pop">Test 1</a></li>
       <li><a href="insert.php" data-rel="dialog" data-transition="pop">Test 2</a></li>
       <li><a href="insert.php" data-rel="dialog" data-transition="pop">Test 3</a></li>
    </ul>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:14:22.963

我创建了一个使用网格的示例，；主菜单、左右菜单。可以使用`.show()`和显示和隐藏菜单`.hide()`。隐藏菜单后，主体会填充空间。这是代码。

**[工作演示](http://jsfiddle.net/Palestinian/H744Q/)**

> HTML

```
<div data-role="page">
 <div class="ui-grid-b">
    <div class="ui-block-a" id="menu-l">
        <div data-role="header" data-theme="c">
             <h3 class="menu-l">Left Menu</h3>

        </div>
        <div data-role="content" data-theme="c">

            <!-- main lisview-->
            <ul data-role="listview" data-theme="e" id="main">
                <li><a href="#" id='cat1'>#cat 1</a>

                </li>
                <li><a href="#" id='cat2'>#cat 2</a>

                </li>
                <li><a href="#" id='cat3'>#cat 3</a>

                </li>
            </ul>
            <!-- /main -->
            <!-- sub-menu lisview-->
            <ul data-role="listview" data-theme="b" id="sub">
                <li><a href="#" id='cat1'>sub 1</a>

                </li>
                <li><a href="#" id='cat2'>sub 2</a>

                </li>
                <li><a href="#" id='cat3'>sub 3</a>

                </li>
                <li><a href="#" id='back'>Back to main menu</a>

                </li>
            </ul>
            <!-- /sub-menu -->
        </div>
    </div>
    <div class="ui-block-b" id="main">
        <div data-role="header" data-theme="d">
         <a href="#" data-icon="arrow-l" data-iconpos="notext" id="btn-l"></a>
         <a href="#" data-icon="arrow-r" data-iconpos="notext" id="btn-r"></a>

             <h1>Main</h1>

        </div>
        <div data-role="content" data-theme="d">
            <ul data-role="listview">
                <li><a href="#">4</a>

                </li>
                <li><a href="#">5</a>

                </li>
                <li><a href="#">6</a>

                </li>
            </ul>
        </div>
    </div>
    <div class="ui-block-c" id="menu-r">
        <div data-role="header" data-theme="c">
             <h3 class="menu-r">Right Menu</h3>

        </div>
        <div data-role="content" data-theme="c">
            <ul data-role="listview" data-theme="b">
                <li><a href="#">7</a>

                </li>
                <li><a href="#">8</a>

                </li>
                <li><a href="#">9</a>

                </li>
            </ul>
        </div>
    </div>
</div>
<div data-role="footer">
     <h1>Footer</h1>

 </div>
</div> 
```

> CSS

```
.ui-block-a {
 width: 25% !important;
 height: 100% !important;
}
.ui-block-b {
 width: 50% !important;
 height: 100% !important;
}
.ui-block-c {
 width: 25% !important;
 height: 100% !important;
}
.menu-l {
 font-size: 11px !important;
 margin-left: 5px !important;
 padding-top: 13px !important;
}
.menu-r {
 font-size: 11px !important;
 margin-right: 5px !important;
 padding-top: 13px !important;
} 
```

> 质量管理规范

```
$('#btn-l').on('click', function () {
 if ($('#menu-l').is(':visible')) {
    $('#menu-l').hide();
    $(this).buttonMarkup({
        icon: 'arrow-r'
    });
} else {
    $('#menu-l').show();
    $(this).buttonMarkup({
        icon: 'arrow-l'
    });
}
if ($('#menu-r').is(':visible') && $('#menu-l').is(':visible')) {
    $('.ui-block-b').attr('style', 'width: 50% !important;');
} else if ($('#menu-r').is(':visible') || $('#menu-l').is(':visible')) {
    $('.ui-block-b').attr('style', 'width: 75% !important;');
} else {
    $('.ui-block-b').attr('style', 'width: 100% !important;');
}
});
$('#btn-r').on('click', function () {
if ($('#menu-r').is(':visible')) {
    $('#menu-r').hide();
    $(this).buttonMarkup({
        icon: 'arrow-l'
    });
} else {
    $('#menu-r').show();
    $(this).buttonMarkup({
        icon: 'arrow-r'
    });
}
if ($('#menu-r').is(':visible') && $('#menu-l').is(':visible')) {
    $('.ui-block-b').attr('style', 'width: 50% !important;');
} else if ($('#menu-r').is(':visible') || $('#menu-l').is(':visible')) {
    $('.ui-block-b').attr('style', 'width: 75% !important;');
} else {
    $('.ui-block-b').attr('style', 'width: 100% !important;');
}
});

// Left menu and subm-menu

$('#sub').hide();

$('#main').on('click', 'li a', function () {
 $('#main').hide();
 $('#sub').show();
});
$('#sub').on('click', 'a#back', function () {
 $('#main').show();
 $('#sub').hide();
}); 
```

# javascript - 循环到 Javascript 对象并显示在表格中

> ID：15904229
> 
> 赞同：2
> 
> 时间：2013-04-09T14:09:38.810
> 
> 标签：javascript, html, loops, html-table

我正在使用 JavaScript JSON 对象。我不确定这是编写 JSON 对象的正确方法：-

```
var address={
    details:{
        "martin":[{"full_name":"James Martin"},{"address":"Florida"},{"phone":"897657834"}],
        "luthar":[{"full_name":"Luther king"},{"address":"Boston"},{"phone":"9856568789"}],
        "jonson":[{"full_name":"Jonson vierra"},{"address":"New york"},{"phone":"98654567887"}]
    }
} 
```

现在，我想在表格中显示每个人的每个元素。我可以通过编写手动执行此操作：

```
<table border=1>
<tr>
<td><script>document.write(address.details.martin[0].full_name)</script></td>
<td><script>document.write(address.details.martin[1].address)</script></td>
<td><script>document.write(address.details.martin[2].phone)</script></td>
</tr>
</table> 
```

对所有 3 个人都这样，但我想通过使用循环来获取每个人的全部细节。我怎样才能通过使用循环轻松做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:15:23.830

我会按照这些思路做一些事情：

```
for (var i in address.details)
{
    document.write('<tr><td>' + address.details[i][0]['full_name'] + '</td><td>' + address.details[i][1]['address'] + '</td><td>' + address.details[i][2]['phone'] + '</td></tr>');
} 
```

要跟进此代码，应输出包含所需数据的表格：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>An XHTML 1.0 Strict standard template</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
</head>

<body>
    <script>
    var address={
        details:{
        "martin":[{"full_name":"James Martin"},{"address":"Florida"},{"phone":"897657834"}],
        "luthar":[{"full_name":"Luther king"},{"address":"Boston"},{"phone":"9856568789"}],
        "jonson":[{"full_name":"Jonson vierra"},{"address":"New york"},{"phone":"98654567887"}]
        }
    }
    </script>
    <table border=1>
    <script>
        for (var i in address.details)
        {
            document.write('<tr><td>' + address.details[i][0]['full_name'] + '</td><td>' + address.details[i][1]['address'] + '</td><td>' + address.details[i][2]['phone'] + '</td></tr>');
        }
    </script>
    </table>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:14:54.207

```
for (var personName in address.details) {
  if (address.details.hasOwnProperty(personName)) {
    address.details[personName]
    //  [{"full_name":"James Martin"},{"address":"Florida"},{"phone":"897657834"}]
    // you could now loop through the personName's array
  }
} 
```

您完全可以控制数据结构吗？好像有点绕？

# excel - VBA：列过滤器上的触发器宏

> ID：15904230
> 
> 赞同：3
> 
> 时间：2013-04-09T14:09:45.093
> 
> 标签：excel, vba

有没有办法可以在excel中的列过滤器上触发宏函数？

请帮忙

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T15:36:17.800

我只是在想我是否可以发布这个答案。我想你们中的一些人不会喜欢它，因为它不是通过绕过解决方案的直接回答。但是我认为我可以展示这个想法，因为**我们在问题中没有所有项目假设。**

让我们同意 - 我们都知道在我们更改过滤后不会触发任何事件。但是，我看到了一种选择。

更改过滤器可能会触发`Worksheet_Calculate`事件（不是`Worksheet_Change`）。如果您的工作表中有任何单个公式，那么每次使用鼠标更改过滤条件时，我们都会触发该事件。

**步骤 1.**将任何单个公式放入工作表中，例如在单元格 ZZ1 中，其中 =ZZ2

**第 2 步。**我假设我们的数据范围从 Range(A1) 开始，并且我们在第一行有标题（见图）。我认为该区域下方也没有任何东西。

![在此处输入图像描述](https://i.stack.imgur.com/AsBAh.jpg)

**步骤 3.**将以下解决方案放入 Sheet1 模块中。

```
Private Sub Worksheet_Calculate()

If ActiveSheet.Name = "Sheet1" Then
    If Cells(Rows.Count, 1).End(xlUp).Row = 1 Then
        MsgBox "No data available"
    Else
        MsgBox "There are filtering results"
    End If
End If
End Sub 
```

**第 4 步**。使用过滤器将触发该事件并导致以下情况：

![在此处输入图像描述](https://i.stack.imgur.com/BOry5.jpg)![在此处输入图像描述](https://i.stack.imgur.com/OPkKj.jpg)

我希望有人会喜欢它并且可以使用它。即使这只是一个绕道的想法。

# jquery - 一页排序中的两个gridview

> ID：15904234
> 
> 赞同：0
> 
> 时间：2013-04-09T14:09:54.443
> 
> 标签：jquery, asp.net, c#-4.0

我在页面中有两个gridview。两个gridview都包含单独的更新面板，并且两个gridview都有虚拟标题。我想对gridview进行排序。所以我使用了Jquery。一个gridview排序正确完成。我用于另一个gridview的同一个jquery，但不工作.我的代码

```
 function SortTran(cell, sortOrder) {
        var sorting = [[cell.cellIndex, sortOrder]];
        $("#<%=gvCustomer.ClientID%>").trigger("sorton", [sorting]);
        if (sortOrder == 0) {
            sortOrder = 1;
            cell.className = "sortDesc";
        }
        else {
            sortOrder = 0;
            cell.className = "sortAsc";
        }
        cell.setAttribute("onclick", "SortTran(this, " + sortOrder + ")");
        cell.onclick = function () { SortTran(this, sortOrder); };
        document.getElementById("<%=pnlCustomer.ClientID %>").scrollTop = 0;

    }

    function SetTranDefaultSortOrder() {
        var gvHeader = document.getElementById("dummyTranHeader");
        var headers = gvHeader.getElementsByTagName("TH");
        for (var i = 0; i < headers.length; i++) {
            headers[i].setAttribute("onclick", "SortTran(this, 1)");
            headers[i].onclick = function () { SortTran(this, 1); };
            headers[i].className = "sortDesc";
        }
    }

        $.tablesorter.addParser({
            id: 'balance',
            is: function (s) {
                return false;
            },
            format: function (s) {
                return s;
            },
            type: 'number'

        });

  $(document).ready(function () {
               $("#<%=gvCustomer.ClientID%>").tablesorter({
                headers: {
                    2: {
                        sorter: 'balance'
                    }
                }
            }); 
       SetDefaultSortOrder();
   }); 
```

我用于另一个 gridview 的相同编码，但无法正常工作。为什么？无法在页面中对两个 gridview 进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:27:47.313

如何使用 jquery 插件来处理排序？ [http://tablesorter.com/docs/](http://tablesorter.com/docs/)

# javascript - 在 jquery/javascript 中获取、设置会话值

> ID：15904236
> 
> 赞同：0
> 
> 时间：2013-04-09T14:10:01.537
> 
> 标签：javascript, jquery, asp.net, session

我想在我的 apsx 页面中使用 javascript/jquery 设置会话变量。之后，我想使用 jquery 在其他页面中使用该会话变量。任何人都可以帮助我吗？

谢谢，
普里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:14:16.637

您不能直接使用 javascript 进行设置，您需要服务器端代码。您可以进行 ajax 调用并传递参数并在那里设置会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:20:31.743

当页面最初加载时，您可以在隐藏字段中设置会话变量值，如下所示：

```
<asp:HiddenField ID="HDSessionValue" runat="server" Value'<%#Session["CustomerID"]'/> 
```

现在您可以像这样轻松地从 jquery 或 javascript 获取值：

```
$(document).ready(function(){

var SessionValue=$('#HDSessionValue').val();
alert(SessionValue);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:15:22.937

您可以将变量的值分配`session`给`JS`变量，但要将值分配给`session`变量，您需要`ajax`在服务器端工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:47:12.310

你这里有两个案例，

1）如果您想在页面加载它自己的客户端设置会话的值，您可以使用隐藏字段在客户端传递。

2）如果您想在客户端设置值而不返回回发，您可以选择AJAX方法

# forms - 自定义映射到对象的表单绑定 - 如何？

> ID：15904237
> 
> 赞同：1
> 
> 时间：2013-04-09T14:10:02.900
> 
> 标签：forms, scala, binding, playframework

我有这些案例课

```
case class Blog(id:Long, author:User, other stuff...)
case class Comment(id:Long, blog:Blog, comment:String) 
```

以及提交数据的客户端表单

```
blog_id:"5"
comment:"wasssup" 
```

我正在编写一些简单的代码来让用户向博客添加评论。
用户已登录，因此`user_id`客户端不需要他，我们知道他是谁......

我想将 绑定`blog_id`到`Blog`从 db 加载的对象，如果它不存在则显示错误。
播放框架文档上的示例没有帮助。
它们仅显示表示单个对象及其所有字段的表单的映射。
在这里，我代表 a 的元组，`(b:Blog, comment:String)`而`Blog`我只提供它的`id`.

我想要一个可以为我提供**转换+验证+错误消息**的映射，所以我可以写如下内容：

```
val form = Form(
    tuple(
      "blog_id" -> blogMapping,
      "comment" -> nonEmptyText
    )
  )
  form.bindFromRequest().fold(...
  formWithErrors => {...
  }, {
    case (blog, comment) => {do some db stuff to create the comment}
  ... 
```

“blogMapping”将像其他映射一样工作，它将发布的数据绑定到一个对象，在我们的例子中是从 db 加载的博客，如果它不成功，它将提供一个我们可以在`formWithErrors =>`子句中使用的错误。

我不知道如何做到这一点，这里的文档有点缺乏......
感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:14:25.137

我最终查看了 playframwork 当前绑定的外观并实现了类似的东西，但是对于博客：

```
implicit def blogFromLongFormat: Formatter[Blog] = new Formatter[Blog] {

override val format = Some(("Blog does not exist", Nil))

def bind(key: String, data: Map[String, String]) = {
  scala.util.control.Exception.allCatch[Long] either {
    data.get(key).map(s => {
      val blog_id = s.toLong
      val blog = Daos.blogDao.retrieve(blog_id)
      blog.map(Right(_)).getOrElse(Left(Seq(FormError(key, "Blog not found", Nil))))
    }).get
  } match {
    case Right(e:Either[Seq[FormError],Blog]) => e
    case Left(exception) => Left(Seq(FormError(key, "Invalid Blog Id", Nil)))
    case _ => Left(Seq(FormError(key, "Error in form submission", Nil)))

  }
}

def unbind(key: String, value: Blog) = Map(key -> value.id.toString)
}

val blogFromLongMapping: Mapping[Blog] = Forms.of[Blog] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:44:41.000

对我来说，这看起来并不像一个绑定问题。

问题在于模型-视图-控制器拆分。绑定是一个控制器活动，它是关于将 Web 数据（来自您的视图）绑定到您的数据模型（供模型使用）。另一方面，查询数据将由模型处理。

因此，执行此操作的标准方法如下所示：

```
// Defined in the model somewhere
def lookupBlog(id: Long): Option[Blog] = ???

// Defined in your controllers
val boundForm = form.bindFromRequest()
val blogOption = boundForm.value.flatMap {
  case (id, comment) => lookupBlog(id)
}

blogOption match {
  case Some(blog) => ??? // If the blog is found
  case None => ??? // If the blog is not found
} 
```

但是，如果您决定在绑定中处理数据库查找（我强烈建议您不要这样做，因为从长远来看它会导致意大利面条式代码），请尝试以下操作：

```
class BlogMapping(val key: String = "") extends Mapping[Blog] {
  val constraints = Nil
  val mappings = Seq(this)

  def bind(data: Map[String, String]) = {
    val blogOpt = for {blog <- data.get(key)
                       blog_id = blog.toLong
                       blog <- lookupBlog(blog_id)} yield blog
    blogOpt match {
      case Some(blog) => Right(blog)
      case None => Left(Seq(FormError(key, "Blog not found")))
    }
  }

  def unbind(blog: Blog) = (Map(key -> blog.id.toString), Nil)

  def withPrefix(prefix: String) = {
    new BlogMapping(prefix + key)
  }

  def verifying(constraints: Constraint[Blog]*) = {
    WrappedMapping[Blog, Blog](this, x => x, x => x, constraints)
  }

}

val blogMapping = new BlogMapping()
val newform = Form(
  tuple(
    "blog_id" -> blogMapping,
    "comment" -> nonEmptyText
  )
)

// Example usage
val newBoundForm = newform.bindFromRequest()
val newBoundBlog = newBoundForm.get 
```

我们所做的主要事情是创建一个自定义的 Mapping 子类。在某些情况下，这可能是一个好主意，但我仍然推荐第一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:09:00.867

您可以在表单定义中完成所有操作。

我从您的示例中制作了一些简单的 scala 类和对象。

`models/Blog.scala`

```
package models

/**
 * @author maba, 2013-04-10
 */
case class User(id:Long)
case class Blog(id:Long, author:User)
case class Comment(id:Long, blog:Blog, comment:String)

object Blog {
  def findById(id: Long): Option[Blog] = {
    Some(Blog(id, User(1L)))
  }
}

object Comment {

  def create(comment: Comment) {
    // Save to DB
  }
} 
```

`controllers/Comments.scala`

```
package controllers

import play.api.mvc.{Action, Controller}
import play.api.data.Form
import play.api.data.Forms._
import models.{Comment, Blog}

/**
 * @author maba, 2013-04-10
 */
object Comments extends Controller {

  val form = Form(
    mapping(
      "comment" -> nonEmptyText,
      "blog" -> mapping(
        "id" -> longNumber
      )(
        (blogId) => {
          Blog.findById(blogId)
        }
      )(
        (blog: Option[Blog]) => Option(blog.get.id)
      ).verifying("The blog does not exist.", blog => blog.isDefined)
    )(
      (comment, blog) => {
        // blog.get is always possible since it has already been validated
        Comment(1L, blog.get, comment)
      }
    )(
      (comment: Comment) => Option(comment.comment, Some(comment.blog))
    )
  )

  def index = Action { implicit request =>
    form.bindFromRequest.fold(
      formWithErrors => BadRequest,
      comment => {
        Comment.create(comment)
        Ok
      }
    )
  }
} 
```

# php - 使用 PHP 的 Google Cloud Storage：错误“未配置 (403) 访问”

> ID：15904239
> 
> 赞同：1
> 
> 时间：2013-04-09T14:10:05.493
> 
> 标签：php, google-api, google-api-php-client, google-cloud-storage

我正在使用下面的代码示例发出一个简单的请求。似乎我不是唯一遇到此错误的人，而且我还没有找到任何解决方案。这似乎不言自明，但它是如何解决的？

这是我得到的确切错误：

> 调用 GET [https://www.googleapis.com/storage/v1beta1/b/eggs](https://www.googleapis.com/storage/v1beta1/b/eggs)时出错：(403) 未配置访问

和代码：

```
require_once 'google/src/Google_Client.php';
require_once 'google/src/contrib/Google_StorageService.php';

define("CLIENT_ID", 'hidden');
define("SERVICE_ACCOUNT_NAME", 'hidden');
define("KEY_FILE", 'hidden.p12');

define("PROJECT_ID", hidden);

$client = new Google_Client();
$key = file_get_contents(KEY_FILE);

$client->setAssertionCredentials(new Google_AssertionCredentials(
                SERVICE_ACCOUNT_NAME,
                array('https://www.googleapis.com/auth/devstorage.full_control'),
                $key)
);

$client->setClientId(CLIENT_ID);

$storageService = new Google_StorageService($client);
try 
{
   $bucket = $storageService->buckets->get('hidden');

}      
catch (exception $e)
{
    print $e->getMessage();
} 
```

# php - php多源RSS解析器？

> ID：15904242
> 
> 赞同：1
> 
> 时间：2013-04-09T14:10:15.430
> 
> 标签：php, rss

PHP 中是否有任何可用的脚本或类允许我定义不同的 RSS 提要以将它们输出到按日期排序的页面上？

我想要一个页面，其中包含从捆绑在一起但按日期排序的多个源解析的 RSS 提要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:16:08.203

一个可以做到这一点的脚本是[*SimplePie*](http://simplepie.org/)。请参阅[按时间和日期对多个提要进行排序](http://simplepie.org/wiki/tutorial/sort_multiple_feeds_by_time_and_date)。

```
// Create a new SimplePie object
$feed = new SimplePie();

// Instead of only passing in one feed url, we'll pass in an array of three
$feed->set_feed_url(array(
    'http://digg.com/rss/index.xml',
    'http://feeds.tuaw.com/weblogsinc/tuaw',
    'http://feeds.uneasysilence.com/uneasysilence/blog'
));

// Initialize the feed object
$feed->init();

// This will work if all of the feeds accept the same settings.
$feed->handle_content_type();

foreach ($feed->get_items() as $item) {
    $item->get_title(), "\n"; 
} 
```

# jquery - jQuery .on() 方法 - 将参数传递给事件处理函数

> ID：15904243
> 
> 赞同：47
> 
> 时间：2013-04-09T14:10:17.853
> 
> 标签：jquery, event-handling

我有以下脚本不起作用

```
<script type="text/javascript" >

   function ADS(e){ alert(e); }

   $(document).ready(function(){
          $(document).on("dblclick","#an_tnam tr", ADS('hello'));
          $(document).on("dblclick","#kv_tnam tr", ADS('world'));
          // ....  
 });

</script> 
```

如何将参数传递给事件处理函数 ADS ？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-04-09T14:17:07.073

您可以将额外数据传递给事件处理函数，并且可以`event.data`在处理程序中使用。

```
$(document).on('dblclick', '#an_tnam tr', { extra : 'random string' }, function(event)
{
    var data = event.data;

    // Prints 'random string' to the console
    console.log(data.extra);
} 
```

`.trigger()`当使用该方法从外部源触发事件时，您还可以向任何您喜欢的事件发送额外数据

```
$('#an_tnam tr').trigger('click', [{ extra : 'random string' }]); 
```

将数据传递给`.trigger()`方法的不同之处在于，它`.on()`期望处理程序接受传入数组长度的额外参数。上面期望处理程序（仅）有一个额外的参数来包含传入的对象。

```
$('#an_tnam tr').on('click', function(event, obj)
{
   // Prints 'random string' to the console
   console.log(obj.extra);
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-04-09T14:12:19.377

该`.on()`函数期望传递一个*函数引用；*你正在做的是调用函数并传递它的返回值。如果需要传递参数，则需要将调用包装在匿名函数中。

```
$(document).on('dblclick', '#an_tnam tr', function(event) {
    ADS('hello');
}); 
```

jQuery 总是将其规范化的事件对象作为第一个参数传递给要执行的函数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-09T14:15:01.187

正如[Anthony Grist](https://stackoverflow.com/a/15904292/901048)所指出的，该`.on()`方法在该部分需要一个函数引用；您正在评估一个不返回任何内容的函数 ( `null`)。

然而，JavaScript 的一个有趣特性是[一切都是对象](https://stackoverflow.com/questions/9108925/how-is-almost-everything-in-javascript-an-object)，包括函数。稍作修改，您就可以`ADS()`改为返回一个匿名函数对象：

```
function ADS(e){ 
    return function(){ alert(e); };
} 
```

[http://jsfiddle.net/cSbWb/](http://jsfiddle.net/cSbWb/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-19T16:30:02.277

实际上，有一个非常简洁的方法可以实现这一点，没有额外的混乱和匿名函数，使用 JS bind()：

```
$(document).on('dblclick', ADS.bind(null, 'hello')); 
```

第一个参数是您希望“ *this* ”在回调函数中具有的值。

Mozilla 开发者网络中的更多信息：[https ://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-09T14:11:51.343

```
function ADS(e){ alert(e); }

$(document).ready(function(){
          $(document).on("dblclick","#an_tnam tr", function (e) { ADS('hello') });

 }); 
```

会成功的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-09T14:14:55.810

```
function ADS(e) {
    return function() {
        alert(e);
    };
} 
```

就像你做的时候那样

```
$(document).on("dblclick","#an_tnam tr", ADS('hello')); 
```

，它是作为事件处理程序分配的返回函数（并且您的字符串参数在分配处理程序时传递，而不是在调用时传递）。

# php - 如何将 MySQL 中的日期时间保存到 php 中的 SESSION 中？

> ID：15904244
> 
> 赞同：0
> 
> 时间：2013-04-09T14:10:18.400
> 
> 标签：php, mysql, session

如何将日期时间类型的“date_time”保存到会话中，以便显示 ex。“在 2013-04-09 15:45:20 注册”页面上的 secret_place.php

我在 login.php 中有这段代码

```
$query = mysql_query("SELECT `user`, `pass`, `date_time` FROM `database` WHERE user = '".$user."' AND pass = '".$pass."' LIMIT 1");
if (mysql_num_rows($query) > 0) {
$_SESSION['logged'] = true;
$_SESSION['user'] = $user;

header('Location: secret_place.php');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:13:23.730

试试这个，

```
$query = mysql_query("SELECT `user`, `pass`, `date_time` FROM `database` WHERE user = '".$user."' AND pass = '".$pass."' LIMIT 1");
if (mysql_num_rows($query) > 0) 
{
   $_SESSION['logged'] = true;
   $_SESSION['user'] = $user;
   while ($row = mysql_fetch_assoc($query)) 
   {
       $_SESSION['date_time'] = $row['date_time'];
   }
   header('Location: secret_place.php');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:14:49.540

这里有一些严重的问题：首先，[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。这样您还可以防止**SQL 注入攻击**，现在您的代码对它们是开放的。

也**不要**在数据库中存储纯密码。使用一些适当的库（如[PasswordLib ）将其存储为散列](https://github.com/ircmaxell/PHP-PasswordLib)

# iphone - 唯一识别具有相同 UUID 的多个蓝牙 4.0 设备

> ID：15904246
> 
> 赞同：2
> 
> 时间：2013-04-09T14:10:24.543
> 
> 标签：iphone, bluetooth-lowenergy

我正在开发一个 iphone 应用程序，它将与多个具有相同 uuid 的蓝牙接收器进行通信。我试图弄清楚如何创建一个映射以允许客户端为每个设备提供一个个性化的名称，该名称将在与设备的连接/断开时保持不变。我通过将名称映射到设备的mac地址在蓝牙3.0中做了类似的事情，但是在CBPeripheral的蓝牙4.0中似乎没有可用的mac地址。有人对如何解决这个问题有任何想法吗？

# java - java mkdirs() 的撤销效果

> ID：15904248
> 
> 赞同：3
> 
> 时间：2013-04-09T14:10:31.447
> 
> 标签：java, mkdirs

我有一种情况，我需要运行“预检查”以查看目录是否“可创建**”**。这不是问题，只需运行 a`file.mkdirs()`并查看它是否返回 true。

问题是我想在此检查后进行清理。这有点棘手，因为我只想删除那些`mkdirs()`实际创建的文件夹和子文件夹。

谁能想到一个聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:23:46.413

我认为这种方法无需您调用即可完成工作`mkdirs`：

```
public static boolean canMkdirs(File dir) {
    if(dir == null || dir.exists())
        return false;
    File parent = null;
    try {
        parent = dir.getCanonicalFile().getParentFile();
        while(!parent.exists())
            parent = parent.getParentFile();
    } catch(NullPointerException | IOException e) {
        return false;
    }
    return parent.isDirectory() && parent.canWrite();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:13:03.693

保留一个包含该目录名称的数组。因此，当您要删除目录时，可以将该数组内容/字符串/目录名称删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:22:34.093

有点危险：

```
if (file.mkdirs()) {
    long t0 = file.lastModified();
    for (;;) {
        long t = file.lastModified();
        if (t < t0 - 1000L) { // Created longer than it's child minus 1 s?
            break;
        }
        t0 = t;
        file.delete();
        file = file.getParentFile();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:22:42.630

如果我在文件结构中继承权限的假设是正确的，那么应该这样做：

```
File f = new File("C:\\doesntExist\\Nope\\notHere");
File tempFile = f;
while (!tempFile.exists())
   tempFile = tempFile.getParentFile();
if (!tempFile.canWrite()
    && tempFile.isDirectory()) // Copied this line from Lone nebula's answer (don't tell anyone, ok?)
   System.out.println("Can't write!");
else
{
   f.mkdirs();
   ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:24:16.303

从[`mkdirs()`源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/File.java#File.mkdirs%28%29)来看：

```
public boolean mkdirs() {
       if (exists()) {
           return false;
        }
        if (mkdir()) {
            return true;
       }
       File canonFile = null;
       try {
            canonFile = getCanonicalFile();
        } catch (IOException e) {
            return false;
        }

        File parent = canonFile.getParentFile();
        return (parent != null && (parent.mkdirs() || parent.exists()) &&
                canonFile.mkdir());
    } 
```

如果我没有错过什么，你有两个选择：

*   在调用 之前记住磁盘上文件的状态`mkdirs()`，将其与之后的状态进行比较`mkdirs()`，必要时进行处理

*   扩展`File`类和覆盖`mkdirs()`方法以准确记住创建了哪些文件。如果创建了，请处理它们。

后者似乎是一个更优雅的解决方案，它将产生更少的代码。

更新：

我强烈建议考虑大卫 a。评论。

# windows - 从 txt 文件中删除前 10 个字符的批处理文件

> ID：15904253
> 
> 赞同：2
> 
> 时间：2013-04-09T14:10:38.487
> 
> 标签：windows, batch-file

我正在尝试使用批处理脚本从文本文件中的多行中删除前 10 个字符，然后将结果输出到新文件。我遇到了[这个问题](https://stackoverflow.com/questions/8591566/batch-file-to-read-n-characters-from-a-text-file)，它让我指出了正确的方向，但最终输出不起作用。

这是我到目前为止所得到的：

```
setLocal EnableDelayedExpansion
CSCRIPT /nologo %windir%\System32\prnport.vbs -l > c:\IPPorts.txt
type c:\IPPorts.txt | findstr IP_ > c:\IPPorts2.txt
for /f "tokens=*" %%a in (c:\IPPorts2.txt) do (set line=%%a set chars=!line:~10! > c:\IPPorts3.txt)
for /f "delims=" %%x in (c:\IPPorts3.txt) do CSCRIPT /nologo %windir%\System32\prnport.vbs -d -r %%x 
```

第二行将打印机端口列表导出到名为 IPPorts.txt 的文件中。第三个找到其中带有“IP_”的行并导出到 IPPorts2.txt。第 4 行应该删除不需要的文本（它没有这样做）并导出到 IPPorts3.txt。最后一行将从 IPPorts3.txt 获取结果，然后删除这些端口。

IPPorts.txt 如下：

```
Server name 
Port name IP_172.20.51.11
Host address 172.20.51.11
Protocol RAW
Port number 9100
SNMP Disabled 
```

这些行对每个端口都重复，其中有几个。由于我只需要包含端口名称的行，因此 IPPorts2.txt 如下所示：

```
Port name IP_172.20.51.11
Port name IP_172.20.52.58
Port name IP_172.20.53.16
Port name IP_172.20.54.19
Port name IP_172.20.55.15-1
Port name IP_172.20.55.15
Port name IP_172.20.55.11 
```

我遇到问题的地方是删除行的“端口名称”部分（前 10 个字符）。我希望每行的输出都读取为“IP_X.XXX”。问题是第三个文件总是空的。

我哪里错了？任何帮助是极大的赞赏。

编辑：这在 Endoro 的答案之下更进一步，但我认为在这里发布答案可能会很好。这是我将第 4 行更改为：

```
for /f "tokens=* delims=" %%c in ('type c:\IPPorts2.txt') do (
 set LINE=%%c
 >> c:\IPPorts3.txt echo !LINE:~10!
 ) 
```

这纠正了我的问题。感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:20:25.030

尝试这个：

```
(for /f "tokens=3" %%i in (IPPorts2.txt) do @echo %%i)>IPPorts3.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-03T23:42:35.947

### 从 DIR 命令输出中获取目录名称的脚本：

...
20/09/2014 01:23 [DIR
] some1 21/09/2014 02:34 [DIR] some2 22/09/2014 03:45
[DIR] some3
23/09/2014 11:22 [DIR] some4
...
我们希望它是：
some1
some2
some3
some4
...

代码 ：

```
@FOR /f "tokens=4" %%D IN (i:\test.txt) DO @( echo %%D ) >> result.txt 
```

在您的情况下，令牌 = 3，并不完美，但在结果中手动编辑了几行即可完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:24:00.823

```
(For /f "tokens=3delims= " %%i in (ipports2.txt) do echo %%i) >ipports3.txt 
```

应该为你做。

括号很重要 - 确保重新创建文件。如果省略，将只生成最后一行。

只需使用分隔符 [空格] 将每行上的字符串标记为 token1= `Port`， token2=`Name`并依次将 %%i 设置为每个 token3 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T15:12:14.967

# sharepoint-2010 - 如何找出 sharepoint 2010 的安装帐户。

> ID：15904257
> 
> 赞同：0
> 
> 时间：2013-04-09T14:10:46.513
> 
> 标签：sharepoint-2010

我在场上安装和配置了一个共享点站点。我想找出使用​​[spinstall，用户未使用命名约定]的帐户进行安装。有没有办法我可以找到它？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:36:49.720

检查运行管理中心网站的应用程序池的帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T04:13:57.190

JumpingThroughCode 的答案只有在他们错误地使用 Farm Service 帐户进行安装时才是正确的。Farm Service 帐户应该是一个低权限帐户，即 CA AppPool 帐户和 Timer Service 帐户。Farm Admin 或 Installer 帐户是用于安装产品和任何更新的高特权帐户，并且是初始 Farm Administrator 帐户。

我不知道有任何方法可以通过代码可靠地确定这一点 - 我已经看到它表明该帐户将是 Farm Administrators 和 Managed Service Accounts 中唯一的一个，但它可能已从 Farm Administrators 中删除。

我建议检查 14/LOGS 文件夹中的安装日志。

# batch-file - 在 Windows cmd 中使用参数调用 ant 脚本并重定向输出

> ID：15904261
> 
> 赞同：1
> 
> 时间：2013-04-09T14:10:57.057
> 
> 标签：batch-file, cmd

我正在尝试使用可变数量的参数调用运行 ant 的 Windows cmd 脚本，并将输出重定向到日志文件。我调用运行 ant 的脚本的原因是因为我 ant 将控制权返回给我的调用脚本，我可以在其中继续处理其他内容。我的调用最后在重定向上失败，看起来重定向被视为一个参数。

调用如下所示：

```
call ant_call ant -buildfile %BUILDDIR%\cadis\cm\build.xml -Dcvs.tag=%1 deploy_cmdscripts >> %LOGFILE% 2>&1 
```

由于我有未知数量的参数，蚂蚁脚本看起来像这样

```
%1 %2 %3 %4 %5 %6 %7 %8 %9 
```

有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:50:57.597

使用`%*`而不是`%1 %2 %3 %4 %5 %6 %7 %8 %9`.

`%*`包含来自命令行的所有参数，甚至超过九个。

# python - 加快python循环

> ID：15904282
> 
> 赞同：5
> 
> 时间：2013-04-09T14:11:50.827
> 
> 标签：python, performance, for-loop

我正在尝试加快以下 python 代码的速度：

```
for j in range(4,len(var_s),3):
    mag_list.append(float(var_s[j]))
mag_list = [value for value in mag_list if value != 99.]
med_mag = np.median(mag_list) 
```

有没有一种很好的方法可以将两个 for 循环合二为一？这种方式，真的很慢。我需要的是从 var_s 列表中提取每三个条目，从五分之一开始，如果该条目的值不等于 99。在结果列表中，我需要中位数。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T14:13:43.390

您可能可以尝试：

```
mag_list = [value for value in var_s[4::3] if value != 99.] 
```

取决于`var_s`，您可能会更好地使用`itertools.islice(var_s,4,None,3)`，但这肯定需要定时知道。

如果你一直坚持使用 numpy，也许你会做得更好：

```
vs = np.array(var_s[4::3],dtype=np.float64)  #could slice after array conversion too ...
med_mag = np.median(vs[vs!=99.]) 
```

同样，这需要定时查看它相对于其他的表现如何。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T14:15:26.193

```
mag_list = filter(lambda x: x != 99, var_s[4::3]) 
```

好的，这里有一些`timeit`试验，都在 Python 2.7.2 中：

设置：

```
>>> from random import seed, random
>>> from timeit import Timer
>>> from itertools import islice, ifilter, imap
>>> seed(1234); var_s = [random() for _ in range(100)] 
```

使用 for 循环：

```
>>> def using_for_loop():
...     mag_list = []
...     for j in xrange(4, len(var_s), 3):
...             value = float(var_s[j])
...             if value != 99: mag_list.append(value)
... 
>>> Timer(using_for_loop).timeit()
11.596584796905518 
```

使用地图和过滤器：

```
>>> def using_map_filter():
...     map(float, filter(lambda x: x != 99, var_s[4::3]))
... 
>>> Timer(using_map_filter).timeit()
8.643505096435547 
```

使用 islice、imap、ifilter：

```
>>> def using_itertools():
...     list(imap(float, ifilter(lambda x: x != 99, islice(var_s, 4, None, 3)))) 
... 
>>> Timer(using_itertools).timeit()
11.311019897460938 
```

使用列表推导和 islice：

```
>>> def using_list_comp():
...     [float(v) for v in islice(var_s, 4, None, 3) if v != 99]
... 
>>> Timer(using_list_comp).timeit()
8.52650499343872
>>> 
```

总之，使用带有 islice 的列表推导是最快的，其次是使用 map 和 filter 稍慢一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:13:27.790

```
for j in range(4,len(var_s),3):
    value = float(var_s[j])
    if value != 99:
        mag_list.append(value)
med_mag = np.median(mag_list) 
```

# java - Java 方法约定

> ID：15904284
> 
> 赞同：3
> 
> 时间：2013-04-09T14:11:54.990
> 
> 标签：java, coding-style

我一直在想一个基本问题。也许它太微不足道了 - 但我还是决定征求意见。

下面是一个示例代码：

```
class seventeenth{

    public static void appendtolist(List<Integer> i){
        i.add(new Random().nextInt(1000));
        i.add(new Random().nextInt(1000));
        i.add(new Random().nextInt(1000));
    }
    public static List<Integer>  returnlist(){
        List<Integer> i=new LinkedList<Integer>();
        i.add(new Random().nextInt(1000));
        i.add(new Random().nextInt(1000));
        i.add(new Random().nextInt(1000));
        return i;
    }
    public static void main(String[] args){
        List<Integer> l=new LinkedList<Integer>();
        appendtolist(l);//Option 1
        l=returnlist();//Option 2
        for(Integer e:l)
        System.out.println(e);
    }

} 
```

上面哪个选项是一个好的编程习惯，为什么？或者真的不重要？如果有人可以分享任何关于这样的基本良好编程约定的文献，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:15:32.923

两者都很好，只要名称使功能清晰。

“附加到”版本更通用一些，因为它可以被多次调用以附加到同一个列表。以这种方式使用“返回”版本需要将所有内容复制两次。

我可能会将“附加到”版本概括为任何`Collection`：

```
public static void addTo(Collection<Integer> coll) {
    coll.add(random.nextInt(1000));
    coll.add(random.nextInt(1000));
    coll.add(random.nextInt(1000));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:16:02.213

一种好的做法是尽可能多地重用对象，而不是

```
i.add(new Random().nextInt(1000));
i.add(new Random().nextInt(1000)); 
```

你会改为使用

```
Random rand = new Random();
i.add(rand.nextInt(1000));
i.add(rand.nextInt(1000)); 
```

使用第一种方法，您有创建和垃圾收集两个 Random 对象的开销，而第二种方法只创建和垃圾收集一个 Random 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:15:12.857

选项 2，

```
public static List<Integer>  returnlist(){
    List<Integer> i=new LinkedList<Integer>();
    i.add(new Random().nextInt(1000));
    i.add(new Random().nextInt(1000));
    i.add(new Random().nextInt(1000));
    return i;
} 
```

我认为要好得多，除非您想继续向列表中添加更多元素`l`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:20:08.023

这取决于函数的含义，第一个的工作是改变一个列表，另一个是构造一个。
我会使用方法重载来允许没有代码重复的任一选项：

```
public static List<Integer> addRandom(List<Integer> i){
    i.add(new Random().nextInt(1000));
    i.add(new Random().nextInt(1000));
    i.add(new Random().nextInt(1000));
    return i;
}
public static List<Integer> addRandom() {
    return addRandom(new LinkedList<Integer>());
}
public static void main(String[] args){
    List<Integer> l=new LinkedList<Integer>();
    addRandom(l);//Option 1
    l = addRandom();//Option 2
    for(Integer e:l)
    System.out.println(e);
} 
```

同样，它们的含义不同，但是如果您真的想比较两者，请注意 returnList 强制执行 List (LinkedList) 和事实

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:22:14.190

对方法名使用**驼峰式大小写，对类名使用****pascal 大小写**也是一种很好的做法。 1>您的两种方法都在多次
创建对象。`new Random()`应该避免。
2> 数字生成不应像 1000 那样硬编码。将来您可能需要 2000。
3> 在 returnList 方法中，您只返回`LinkedList`。但将来你可能需要它返回 Vector、ArrayList。所以与代码有紧密的联系。它不灵活。

> 对于哪个好的问题

我总是更喜欢`appendToList`，因为我可以在该方法中传递任何对象，例如 Vector、ArrayList 或 LinkedList。

对方法进行以下修改可能有助于良好的实践。

```
import java.util.LinkedList;
import java.util.List;
import java.util.Random;

class Seventeenth {

    public static void appendToList(Random random, List<Integer> list, int[] numbers) {
        for (int i : numbers) {
            list.add(random.nextInt(i));
        }
    }

    public static void main(String[] args) {
        List<Integer> list = new LinkedList<Integer>();
        Random random = new Random();
        appendToList(random, list, new int[] { 1, 2, 3, 1000, 2000 });// Option 1
        for (int e : list)
            System.out.println(e);
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T14:41:33.030

IMO 我更喜欢`returnlist`-kind 因为我尽量避免操纵方法的参数，因为这些更改将在代码的整体流程中“隐藏”，这可能会导致以后出现意外行为。但是，由于方法名称`appendtolist`很清楚即将发生的事情，所以这两种方法对我来说都很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T14:42:25.560

最好**不要改变**论点，这就是我选择第二个变体的原因。

你的方法除了逻辑和返回值之外不应该做任何[事情](https://stackoverflow.com/questions/1073909/side-effect-whats-this)

更多关于[副作用](https://stackoverflow.com/questions/1073909/side-effect-whats-this)

# c++ - 如何反转可变参数模板函数的参数顺序？

> ID：15904288
> 
> 赞同：40
> 
> 时间：2013-04-09T14:12:10.947
> 
> 标签：c++, templates, c++11, variadic-templates, variadic-functions

我有一个带有**可变参数模板参数的****模板函数**，就像这样

 **```
template<typename Args...>
void ascendingPrint(Args... args) { /* ... */ } 
```

我想写

```
template<typename Args...>
void descendingPrint(Args... args) {
  /* implementation using ascendingPrint()? */
} 
```

如何在传递***参数包*****之前反转参数包的顺序 *`args`****，即在伪代码中：*

 *```
template<typename Args...>
void descendingPrint(Args... args) {
  ascendingPrint( reverse(args) );
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-09T14:31:14.513

# 总体方法和用法

* * *

总体方法包括将参数打包到一个*引用*`std::tuple`中，利用**完美的转发**机制。***`std::forward_as_tuple()`***

 ***这意味着，在运行时，您应该产生非常小的开销，并且没有不必要的复制/移动操作。此外，该框架不使用递归（除了*编译时*递归，这对于生成索引是不可避免的），因此即使编译器无法内联递归函数调用（这不太可能），也没有运行时开销的风险无论如何，所以这更像是一个学术论点）。

此外，此解决方案是通用的，因为您可以将其用作仅头文件的库，以使用反向参数和最小的努力来调用您的函数：`descending_print()`应该只是一个最小的**瘦包装器**`ascending_print()`。

这是它的样子：

```
MAKE_REVERT_CALLABLE(ascending_print)

template<typename... Args>
void descending_print(Args&&... args)
{
    revert_call(REVERT_ADAPTER(ascending_print), std::forward<Args>(args)...);
} 
```

下面是实现的介绍。

* * *

# 第一步：还原类型序列

* * *

这是恢复类型序列的简单方法：

```
#include <tuple>
#include <type_traits>

template<typename, typename>
struct append_to_type_seq { };

template<typename T, typename... Ts>
struct append_to_type_seq<T, std::tuple<Ts...>>
{
    using type = std::tuple<Ts..., T>;
};

template<typename... Ts>
struct revert_type_seq
{
    using type = std::tuple<>;
};

template<typename T, typename... Ts>
struct revert_type_seq<T, Ts...>
{
    using type = typename append_to_type_seq<
        T,
        typename revert_type_seq<Ts...>::type
        >::type;
}; 
```

一个小测试程序：

```
int main()
{
    static_assert(
        std::is_same<
            revert_type_seq<char, int, bool>::type,
            std::tuple<bool, int, char>
            >::value,
        "Error"
        );
} 
```

还有一个[活生生的例子](http://liveworkspace.org/code/4yc7Hy$3896)。

* * *

# 第二步：还原元组

* * *

下一步包括恢复元组。鉴于通常的指数欺骗机制：

```
template <int... Is>
struct index_list { };

namespace detail
{
    template <int MIN, int N, int... Is>
    struct range_builder;

    template <int MIN, int... Is>
    struct range_builder<MIN, MIN, Is...>
    {
        typedef index_list<Is...> type;
    };

    template <int MIN, int N, int... Is>
    struct range_builder : public range_builder<MIN, N - 1, N - 1, Is...>
    { };
}

template<int MIN, int MAX>
using index_range = typename detail::range_builder<MIN, MAX>::type; 
```

连同上面定义的函数，元组可以很容易地通过这种方式恢复：

```
template<typename... Args, int... Is>
typename revert_type_seq<Args...>::type
revert_tuple(std::tuple<Args...> t, index_list<Is...>)
{
    using reverted_tuple = typename revert_type_seq<Args...>::type;

    // Forwarding machinery that handles both lvalues and rvalues...
    auto rt = std::forward_as_tuple(
            std::forward<
                typename std::conditional<
                    std::is_lvalue_reference<
                        typename std::tuple_element<Is, reverted_tuple>::type
                        >::value,
                    typename std::tuple_element<Is, reverted_tuple>::type,
                    typename std::remove_reference<
                        typename std::tuple_element<Is, reverted_tuple>::type
                        >::type
                    >::type
                >(std::get<sizeof...(Args) - Is - 1>(t))...
        );

    return rt;
}

template<typename... Args>
typename revert_type_seq<Args...>::type
revert_tuple(std::tuple<Args...> t)
{
    return revert_tuple(t, index_range<0, sizeof...(Args)>());
} 
```

这是一个简单的测试程序：

```
#include <iostream>

int main()
{
    std::tuple<int, int, char> t(42, 1729, 'c');
    auto rt = revert_tuple(t);

    std::cout << std::get<0>(rt) << " "; // Prints c
    std::cout << std::get<1>(rt) << " "; // Prints 1729
    std::cout << std::get<2>(rt) << " "; // Prints 42
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/yZoBF$4)。

* * *

# 第三步：恢复函数的参数

* * *

最后一步是在调用我们的目标函数时解包元组。这是另一个通用实用程序，可以为我们节省几行代码：

```
template<typename... Args>
typename revert_type_seq<Args...>::type
make_revert(Args&&... args)
{
    auto t = std::forward_as_tuple(std::forward<Args>(args)...);
    return revert_tuple(t);
} 
```

上面的函数创建了一个元组，其元素是提供的参数，但顺序相反。我们还没有准备好定义我们的目标：

```
template<typename T>
void ascending_print(T&& t)
{
    std::cout << std::forward<T>(t) << " ";
}

template<typename T, typename... Args>
void ascending_print(T&& t, Args&&... args)
{
    ascending_print(std::forward<T>(t));
    ascending_print(std::forward<Args>(args)...);
} 
```

上述函数打印提供的所有参数。我们可以这样写`descending_print()`：

```
template<typename T, int... Is>
void call_ascending_print(T&& t, index_list<Is...>)
{
    ascending_print(std::get<Is>(std::forward<T>(t))...);
}

template<typename... Args>
void descending_print(Args&&... args) {
    call_ascending_print(make_revert(std::forward<Args>(args)...),
         index_range<0, sizeof...(Args)>());
} 
```

又是一个简单的测试用例：

```
int main()
{
    ascending_print(42, 3.14, "Hello, World!");
    std::cout << std::endl;
    descending_print(42, 3.14, "Hello, World!");
} 
```

当然还有一个[活生生的例子](http://liveworkspace.org/code/yZoBF$7)。

* * *

# 最后一步：简化

* * *

*上面的解决方案可能理解起来并不简单，但是使用*起来可以变得简单，而且非常灵活。给定几个通用函数：

```
template<typename F, typename... Args, int... Is>
void revert_call(F&& f, index_list<Is...>, Args&&... args)
{
    auto rt = make_revert(std::forward<Args>(args)...);
    f(std::get<Is>(rt)...);
}

template<typename F, typename... Args>
void revert_call(F&& f, Args&&... args)
{
    revert_call(f, index_range<0, sizeof...(Args)>(), 
                std::forward<Args>(args)...);
} 
```

还有几个宏定义（我找不到为函数模板创建重载集的方法，抱歉）：

```
#define MAKE_REVERT_CALLABLE(func) \
    struct revert_caller_ ## func \
    { \
        template<typename... Args> void operator () (Args&&... args) \
        { func(std::forward<Args>(args)...); } \
    };

#define REVERT_ADAPTER(func) \
    revert_caller_ ## func() 
```

*调整任何*函数以使用相反的顺序调用参数变得非常容易：

```
MAKE_REVERT_CALLABLE(ascending_print)

template<typename... Args>
void descending_print(Args&&... args)
{
    revert_call(REVERT_ADAPTER(ascending_print), std::forward<Args>(args)...);
}

int main()
{
    ascending_print(42, 3.14, "Hello, World!");
    std::cout << std::endl;
    descending_print(42, 3.14, "Hello, World!");
} 
```

像往常一样，总结一个[活生生的例子](http://liveworkspace.org/code/yZoBF$8)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-09T14:35:31.477

我认为你可以颠倒你的逻辑，而不是颠倒论点！例如反转参数的操作。

```
template <typename T>
void ascendingPrint(const T& x)
{
    cout << x << " ";
}

template<typename T, typename ... Args>
void ascendingPrint(const T& t, Args... args)
{
    ascendingPrint(t);                   // First print `t`
    ascendingPrint(args...);             // Then print others `args...`
}

template <typename T>
void descendingPrint(const T& x)
{
    cout << x << " ";
}

template<typename T, typename ... Args>
void descendingPrint(const T& t, Args... args)
{
    descendingPrint(args...);            // First print others `args...`
    descendingPrint(t);                  // Then print `t`
} 
```

进而

```
int main()
{
    ascendingPrint(1, 2, 3, 4);
    cout << endl;
    descendingPrint(1, 2, 3, 4);
} 
```

输出

```
1 2 3 4 
4 3 2 1 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-09T17:22:31.320

这是我在评论中提到的简单方法：反向生成索引并用它解包一个元组。

```
// reversed indices...
template<unsigned... Is> struct seq{ using type = seq; };

template<unsigned I, unsigned... Is>
struct rgen_seq : rgen_seq<I-1, Is..., I-1>{};

template<unsigned... Is>
struct rgen_seq<0, Is...> : seq<Is...>{};

#include <tuple>

namespace aux{
template<class Tup, unsigned... Is>
void descending_print(Tup&& t, seq<Is...>)
{
    ascending_print(std::get<Is>(std::forward<Tup>(t))...);
}
} // aux::

template<class... Args>
void descending_print(Args&&... args)
{
    auto t = std::forward_as_tuple(std::forward<Args>(args)...);
    aux::descending_print(t, rgen_seq<sizeof...(Args)>{});
} 
```

[活生生的例子。](https://ideone.com/l1mBpB)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-04-09T16:51:07.893

这是一个专门的*递归*实现`revert<>`：

```
// forward decl
template<class ...Tn>
struct revert;

// recursion anchor
template<>
struct revert<>
{
    template<class ...Un>
    static void apply(Un const&... un)
    {
        ascendingPrint(un...);
    }
};

// recursion
template<class T, class ...Tn>
struct revert<T, Tn...> 
{
    template<class ...Un>
    static void apply(T const& t, Tn const&... tn, Un const&... un)
    {
        // bubble 1st parameter backwards
        revert<Tn...>::apply(tn..., t, un...);
    }
};

// using recursive function
template<class A, class ...An>
void descendingPrint(A const& a, An const&... an)
{
    revert<An...>::apply(an..., a);
} 
```

它适用于*gcc-4.6/7/8*和*clang*，并且可能*符合标准*——唯一困难的部分是`revert<Tn...>::apply(tn..., t, un...)`.

虽然它有缺点（因为递归经常有），它会生成大量目标函数的模板实例化（代码膨胀）并且不使用*完美转发*，这可能是一个问题（但也许可以改进以使用它） .

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-25T08:12:20.730

我的解决方案支持完美转发并且不涉及递归：

```
#include <iostream>
#include <utility>
#include <tuple>

#include <cstdlib>

template< typename ...types >
void
ascendingPrint(types &&... _values)
{
    (std::cout << ... << std::forward< types >(_values)) << std::endl;
}

template< typename ...types, std::size_t ...indices >
void
descendingPrintHelper(std::tuple< types... > const & refs, std::index_sequence< indices... >)
{
    constexpr std::size_t back_index = sizeof...(indices) - 1;
    return ascendingPrint(std::forward< std::tuple_element_t< back_index - indices, std::tuple< types... > > >(std::get< back_index - indices >(refs))...);
}

template< typename ...types >
void
descendingPrint(types &&... _values)
{
    auto const refs = std::forward_as_tuple(std::forward< types >(_values)...);
    return descendingPrintHelper(refs, std::make_index_sequence< sizeof...(types) >{});
}

int
main()
{
    ascendingPrint(1, ' ', 2, ' ', 3);
    descendingPrint(1, ' ', 2, ' ', 3);
    return EXIT_SUCCESS;
} 
```

[活生生的例子](http://coliru.stacked-crooked.com/a/9152ae6c85c5a55f)（[甚至更简单](http://coliru.stacked-crooked.com/a/08e72f40718a40ad)）。

现代编译器也可以完美优化所有不必要的东西：[https ://godbolt.org/g/01Qf6w](https://godbolt.org/g/01Qf6w)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-26T19:44:28.620

这可以使用 C++17 折叠表达式和一个从右到左顺序执行的小技巧来完成。

```
#include <iostream>

template< typename T> void print(T&& val) { std::cout << val; }

template< typename ... Types > void descendingPrint(Types&&... vals) {
    int tmps = 0;
    ((print(vals), tmps) = ...);
}

int main() {
    descendingPrint(1, ' ', 2, ' ', 3);
    return 0;
} 
```******

# java - 从 JSON 中解析字符串中的 URL

> ID：15904301
> 
> 赞同：1
> 
> 时间：2013-04-09T14:12:29.243
> 
> 标签：java, json, arrays, jsonexception

1）我有一个 JSON 文件：

```
{
  "serverURI":"http://localhost:8080/PocketUNI_API/serverURLs",
  "newsURI":"http://localhost:8080/gateway/rss/rss.xml",
  "modulesURI":"http://localhost:8080/PocketUNI_API/modules"
} 
```

2) 我需要在 Java 客户端上以字符串格式获取 URL。

```
String json = jsonReceiver.makeHttpRequest(URL_SERVER, "GET", params);
JSONArray uris = new JSONArray(json); 
```

Receiver 工作正常，json 显示接收到的正确字符串，但是当它使用 JSONArray 解析时会引发错误

```
org.json.JSONException: Value {"serverURI":"http:\/\/192.168.0.... of type org.json.JSONObject cannot be converted to JSONArray. 
```

问题：如何用 URL 值解析 json？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:15:59.810

你得到的不是一个`JSONArray`，而是一个`JSONObject`。

```
JSONObject uris = new JSONObject(json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:16:10.443

`json`是 json 对象而不是数组，这就是您收到错误的原因。数组将被 in`[`和包裹`]`，而对象在`{`and`}`中。

```
JSONObject uris = new JSONObject (json); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:17:08.647

而不是`JSONArray`你必须使用`JSONObject`.

```
JSONObject uris = new JSONObject(json); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:17:28.250

在您的代码中，只需将 JSONArray 替换为 JSONobject

```
JSONObject uris = new JSONObject(json); 
```

# asp.net-mvc - Web API 返回 IQueryable 时，EF 参考丢失

> ID：15904302
> 
> 赞同：3
> 
> 时间：2013-04-09T14:12:29.363
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api, lazy-loading, iqueryable

我一直在寻找相当长的时间来解决这个问题。

这是交易。我正在构建一个调用 Web API 以获取其数据的网站。我的 Web API 使用一个库，使用存储库模式。我的数据库模型（EF 模型优先）是在库中构建的。在那个模型中，我有一个基类 Pass。然后我有两个派生类，CustomerCard：Pass 和 Voucher：Pass。[我的 EF Designer 模型](http://i.imgur.com/XWmws4e.png?1)

我有一种方法可以获取所有的 CustomerCards。

```
public IQueryable<CustomerCard> GetAllPasses() {
        IList<CustomerCard> allCards = new List<CustomerCard>();

        var c_cards = context.Passes;
        foreach (var c_card in c_cards) {
            if (c_card is CustomerCard) {
                allCards.Add((CustomerCard)c_card);
            }
        }
        return allCards.AsQueryable<CustomerCard>();
    } 
```

在我的 ApiController 中，我使用此方法获取通行证并将其返回到网站，如下所示：

```
 [HttpGet]
    [Queryable]
    public IQueryable<CustomerCard> GetAllPasses(string version) {
        return passRepo.GetAllPasses().AsQueryable();
    } 
```

我的 Web API 返回 JSON 格式。这是我保留引用和内容的配置：

```
 var json = config.Formatters.JsonFormatter;
        json.SerializerSettings.PreserveReferencesHandling =
            Newtonsoft.Json.PreserveReferencesHandling.Objects;
        json.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Serialize;
        config.Formatters.Remove(config.Formatters.XmlFormatter); 
```

我使用 IQueryable 是因为我希望能够在我的网站上对数据进行分页。api 方法在“/api/v1/passes/all”中可用。

这是奇怪的部分。为了测试我的分页，我每页调用 1 pass。对于我的第一个通行证，它工作正常。但是当我转到我的第二页时，他也得到了正确的通行证，但是对 User 的引用消失了。

正如您在[我的模型](http://i.imgur.com/XWmws4e.png?1)中看到的，CustomerCard 类有一个属性 User。这表明谁拥有客户卡。

所以这个调用从 pass 加载用户：'api/v1/passes/all?$top=1' 但是当我调用这个时，用户实例是*NULL*：'api/v1/passes/all?$top= 1&$skip=1'。

但是，当我调用 'api/v1/passes/all?$top=2' 时，加载了第二遍的用户。所以这就是我的想法得到吹嘘的地方！我不明白？为什么用户参考不与第二个一起出现？它与 EF 的延迟加载功能有关吗？

编辑当我在 context.passes 上使用扩展方法 Include 时，会引发错误：

> 指定的包含路径无效。EntityType 'LCS_Model.Pass' 没有声明名为 'User' 的导航属性。

这是因为作为 dbset 传递，包含 CustomerCard 以及 Voucher。有没有办法告诉我的上下文期望或将其转换为 CustomerCard？

有人可以帮帮我吗。如果你不明白我的问题，请走开！

已经谢谢了！

**编辑 2**

我的 API 控制器上的方法现在是

```
[HttpGet]
[Queryable]
public IQueryable<CustomerCard> GetAllPasses(string version) {
     return context.Passes.Include("User").OfType<CustomerCard>();
} 
```

这给了我正确的项目。我的数据库中有 2 张客户卡。两者都来自同一个用户。我的 API 仍然加载了用户。我的网站收到响应的那一刻，用户属性变为空。我的猜测是这是因为它仍然从数组的第一个元素引用同一个用户。那可能吗？如果是，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:13:01.307

是的，您需要确保在查询时包含所有相关记录。有关一些示例，请参见[this](http://msdn.microsoft.com/en-us/library/bb344857.aspx)。其次...我不明白为什么您要使用 for 循环来完成所有这些工作...如果您想进行任何分页，那么服务器要做的很多绝对不必要和浪费的工作。我在想，除了您可能想要应用的任何其他过滤器之外，您的 GetAllPasses 应该看起来像这样。

```
public IQueryable<CustomerCard> GetAllPasses() {
    return context.Passes.Include(r => r.User);
} 
```

编辑（2）：我需要更好地阅读。我不得不承认，我不熟悉 EF 中的类型继承。我发现了一些可能在这里起作用的东西： [每个层次结构](http://msdn.microsoft.com/en-us/data/jj618292.aspx)的[表，每个具体类型](http://msdn.microsoft.com/en-us/data/jj618293)的表，另请参见[MSDN Queryable.OfType<TResult>](http://msdn.microsoft.com/en-us/library/bb344857.aspx)。这是一个猜测，但让我们试试：

```
public IQueryable<CustomerCard> GetAllPasses() {
    return context.Passes.OfType<CustomerCard>().Include(r => r.User);
} 
```

# c - 字符串的冒泡排序功能导致程序崩溃

> ID：15904304
> 
> 赞同：0
> 
> 时间：2013-04-09T14:12:34.820
> 
> 标签：c, string, pointers, bubble-sort

不知道怎么回事，每次在下面的代码中输入第二个字符串，都会弹出一个错误框。我正在使用 Codeblocks 作为编译器。是因为我使用指向指针的指针吗？

```
#include<stdio.h>
#include<conio.h>
void sort_string(char **) ;
void main()
{
    char *name[5] ;
    int x =0;
    printf("Enter Names");
    for(x = 0 ; x < 5 ; x++)
    {   fflush(stdin);
        fgets( name[x], 100,  stdin);
    }
    sort_string(name);
    for( x = 0 ; x < 5 ; x++)
    {
        puts(name[x]);

    }

}
void sort_string(char *name[5])
{
    char *temp;
    int i , j ;
    for ( i = 4 ; i >=0; i--)
    {
        for ( j = 0 ; j <=i; j ++  )
        {
            if(strcmp(name[j] > name[j+1]))
            {
                temp = name[j+1];
                name[j+1] = name[j];
                name[j] = temp;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:16:24.067

从您的代码`char *name[5]`中定义一个`5`字符数组的数组。因此，当您执行时`fgets( name[x], 100, stdin);`，预计会分配内存，`name[x]`因为`name[x]`它是一个指针。因此，代码可以修改为

```
for(x = 0; x < 5; x++)
{
     name[x] = malloc(sizeof(char) * 100);
     fgets( name[x], 100,  stdin);
} 
```

**编辑：**

除了此更改之外，您还需要合并ie 条件变为建议`simonc`的更改以及更改为的循环构造。除了上述之外，通过这 2 项修改，您的代码将可以正常工作。`strcmp``if(strcmp(name[j], name[j+1]) > 0)``for ( j = 0 ; j <i; j ++ )``malloc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:17:25.787

如对该问题的评论中所述，您需要为`name`元素分配内存。一种简单的方法是注意您将名称的长度硬编码为 99 个字符（传递给的限制`fgets`）并将您的数组更改为

```
char name[5][100]; 
```

一旦你这样做了，你的字符串比较就不太正确了。你能改变吗

```
if (strcmp(name[j] > name[j+1])) 
```

到

```
if (strcmp(name[j], name[j+1]) > 0) 
```

这将显示另一个错误。您的内部循环可以运行直到`j=4`. 然后，当您访问`name[j+1]`. 这里最简单的解决方法是更改​​内部循环以更快地退出一次迭代

```
for (j=0 ; j<i; j++)
//          < rather than <= 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:24:09.570

fgets（名称[x]，100，标准输入）；

您正在将其复制到未分配的内存中。

字符 *name[5] ;

它只会创建一个大小为 5 的字符指针数组。您必须初始化该指针的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:28:46.847

你没有`name[]`正确分配。大多数现代语言都会为您分配字符串和东西，但是 C 是老派，您需要自己管理它。有几种方法可以做到这一点。

```
char name[5][100]; 
```

这会在堆栈上分配一个 500 字节长的本地二维数组。 `name[0]`指分配开始时的 100 字符数组。 `name[1][3]`指第二个 100 字符缓冲区中的第四个字符，即`name`. `name[4]`是最后一个 100 字符数组。

```
char *name[5];
int i;
for(i = 0; i < 5; i++) {
    name[i] = malloc(sizeof(char)*100);
} 
```

这里，`name`是一个包含 5 个值的数组`char *`，大概 40 个字节长。这些指针中的每一个都指向堆上单独的 100 字节分配。您以与上述相同的方式引用其中的缓冲区和字符`name[5][100]`，即使它是一个分配数组而不是二维数组。

# r - 在r中沿X方向的法线曲线下填充颜色网格

> ID：15904309
> 
> 赞同：3
> 
> 时间：2013-04-09T14:12:48.533
> 
> 标签：r, graph, polygon, curve

我试图在曲线下着色（与[这篇文章](https://stackoverflow.com/questions/15012188/r-plot-normal-curves-with-color-gradient)中的 y 方向相反）。以下是填充方向的假设。

```
curve(dnorm(x,0,1),xlim=c(-3,3),main='Standard Normal') 
```

![在此处输入图像描述](https://i.stack.imgur.com/eHbzX.jpg)

我正在尝试编写一个函数，在那里我可以用不同的颜色填充非常小的多边形（我不知道这是否是正确的方法），然后它看起来像渐变。

这个想法是将以下单个多边形的填充扩展到n个多边形。

```
codx <- c(-3,seq(-3,-2,0.01),-2)
cody <- c(0,dnorm(seq(-3,-2,0.01)),0)

 curve(dnorm(x,0,1),xlim=c(-3,3),main='Standard Normal')
 polygon(codx,cody,col='red') 
```

我试图将它扩展到一个函数：x1 <- NULL y1 <- NULL

```
polys <- function ( lwt, up, itn) {
    x1 <- c(lwt,seq(lwt,up, itn),up)
    y1 <- c(0,dnorm(seq(lwt,up,tn)),0)
    out <- list (x1, y1)
    return (out)
    }
out <- polys(lwt = 0, up = 1, itn = 0.1)

library(RColorBrewer)
plotclr <- brewer.pal(10,"YlOrRd") 
```

我既不能锻炼这个功能，也不能用这种方法酿造超过 9 种颜色。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:35:32.217

您可以使用细分来“大致”实现您想要的

```
x <- seq(from=-3, to=3,by=0.01)
curve(dnorm(x,0,1), xlim=c(-3,3))
segments(x, rep(0,length(x)),x,dnorm(x,0,1) , col=heat.colors(length(x)), lwd=2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/QuRYZ.png)

# weblogic - weblogic部署位置

> ID：15904312
> 
> 赞同：3
> 
> 时间：2013-04-09T14:12:56.130
> 
> 标签：weblogic

有没有办法从 weblogic 管理控制台中找到实际应用程序部署在文件系统上的位置

我尝试单击“部署”链接-但它说它正在加载-并且从不显示任何详细信息

我“知道”实际部署在 weblogic 之外的特定目录中 - 只是想知道如何确认我认为我知道的内容 - 但需要确凿的证据

部署是一个 EAR 文件 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:55:52.337

当您登录到管理控制台时，您应该能够单击左侧的“部署”。在该页面上，您应该会看到托管服务器上所有部署的列表。单击有问题的部署将带您进入部署概述，其中列出了路径。

如果它是使用“nostage”选项部署的，它将位于它所部署到的所有服务器都可以看到的地方。使用“阶段”选项，它将被复制到每个服务器并驻留在：

```
<domain home>/servers/<server name> 
```

如果您甚至无法进入部署页面，我会循环管理服务器。

# c# - 从 Http 响应读取 XML 的签名无效

> ID：15904314
> 
> 赞同：0
> 
> 时间：2013-04-09T14:12:56.777
> 
> 标签：c#, xmldocument, xml-signature

*前言*：我一直在尝试对 HTTP 响应进行 XML 签名验证，我需要帮助！所有代码都是使用 C# 的 .NET 4.0。

* * *

所以这就是我想要完成的事情：

1.  在服务器上创建一个签名的 XML 文档
2.  将签名的 XML 作为 HTTP 响应的正文发送
3.  客户端收到响应并验证签名是否有效。

在服务器端，我创建 XML 并将其加载到 XmlDocument 中。然后我签署这个 XmlDocument 对象（使用来自 MSDN 的[这个示例代码](http://msdn.microsoft.com/en-us/library/ms229745.aspx)）并从这个签署的 XML 构建一个字符串。这个字符串是我作为 HTTP 响应正文发送的。

当我的客户端应用程序收到响应时，它会拉出响应的主体并将其传递给我的签名验证函数。此函数从字符串构建一个 XmlDocument，从 XmlDocument 创建一个 SignedXml 对象，并检索签名以进行验证。几乎所有这些代码也都取自 MSDN（[此处](http://msdn.microsoft.com/en-us/library/ms229950.aspx)）。

看起来很简单，对吧？好吧，我的验证**每次都失败**。我知道签名/验证代码没有问题。我已经在一个单独的应用程序中对其进行了测试，它加载的 XML 来自一个文件，并且它运行良好。我什至使用完全相同的 XML 来测试我的客户端/服务器代码。

因此，我认为问题在于将 XmlDocument 转换为字符串或将字符串转换回 XmlDocument 的步骤。

### XmlDocument **->**字符串**->** XmlDocument

我做了以下事情来尝试使签名更容易验证：

1.  在创建 XmlDocument 之前，从 XML 中删除所有制表符、换行符、回车符。
2.  确保文档的编码明确设置为 UTF-8（我从以前的线程中知道，如果未设置，这可能会导致问题）。
3.  尝试以两种不同的方式生成字符串（来自 XmlDocument 的 OuterXML 以及使用 XmlWriter 和 StringWriter）。
4.  目测验证服务器发送的 XML 与客户端加载的 XML 完全相同。

* * *

如果您对如何解决此问题有任何想法，请帮助！如果需要，我可以发布代码，但唯一值得一看的代码是我如何从 XmlDocument 生成字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T20:16:11.293

一个老问题，但我想我会为可能遇到类似问题的其他人回答这个问题。问题在于字符串的编码，因为它是通过 HTTP 响应发回的。但是，我通过**将 XmlDocument 直接写入响应流**而不是先将其转换为字符串来解决此问题。像这样：

```
public void ProcessRequest(HttpContext context)
{
     // a bunch of request handling logic
     //...
     HttpResponse response = context.Response;
     XmlDocument signedXML = getTheSignedXMLData(); //the XML
     signedXML.PreserveWhitespace = true;
     signedXML.Save(response.Output);
 } 
```

这通过编码问题解决了，并且签名验证正确。

# ios - “isnan”似乎不起作用

> ID：15904322
> 
> 赞同：0
> 
> 时间：2013-04-09T14:13:24.333
> 
> 标签：ios, input, numeric

只是试图捕捉非数字输入 Read MANY items 。尝试了 decimalDigitCharacterSet（发现很难相信以“十进制”开头的东西不包含小数）。尝试使用可变字符集添加小数。一直在努力将“10.5”包含在“96”中，但仍然排除“abc”。

无论我在 textbox1 中输入什么，以下代码都会产生“IS 一个数字”

```
double whatTheHey;

whatTheHey = _textBox1.text.doubleValue;

if isnan(whatTheHey) {
    _textBox2.text = @"NOT a number > ";
}

if (!isnan(whatTheHey)) {
    _textBox2.text = @"IS a number > ";
} 
```

10.5 , 99 , qwerty 都产生 "IS a number"

这似乎只是为了捕捉非数字输入而做的大量工作。

有没有人有任何简单明了的工作代码示例来捕获非数字但接受带有小数的数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:27:27.243

`NaN`并不是字面意思“任何不是数字的东西” *。*它是一个特定值的名称——即一个浮点数可以在某些不确定的操作之后具有，例如将零除以零或取负数的平方根。有关更多历史记录，请参阅[Wikipedia 条目](https://en.wikipedia.org/wiki/NaN)。

要实际解析字符串的数值，您可能需要查看[`NSNumberFormatter`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)：

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *a = [numberFormatter numberFromString:@"10.5"];
NSNumber *b = [numberFormatter numberFromString:@"96"];
NSNumber *c = [numberFormatter numberFromString:@"abc"];
NSLog(@"a: %@, b: %@, c: %@", a, b, c); 
```

产量： `a: 10.5, b: 96, c: (null)`

满足您的特定标准的更简单（如果不太灵活）的解决方案可能是：

```
BOOL isNumber(NSString *aString){
  return [aString integerValue] || [aString floatValue];
} 
```

但是如果你是为 iOS（或 OS X）写的，你真的应该对`NSFormatter`s. 他们会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:35:25.567

试试这个。我认为它应该做你需要的：

```
- (BOOL)isStringNumeric:(NSString *)input {
    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    NSNumber *number = [numberFormatter numberFromString:input];
    return (number != nil);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:36:12.700

检查字符串是否为数字或不使用以下代码。

```
 NSString *newString = @"11111";
    NSNumberFormatter *nf = [NSNumberFormatter new];
    BOOL isDecimal = [nf numberFromString:newString] != nil; 
```

# asp.net - 为什么某些密码停止工作

> ID：15904331
> 
> 赞同：-3
> 
> 时间：2013-04-09T14:13:44.740
> 
> 标签：asp.net, forms-authentication

我制作了一个 .Net 应用程序并使用了内置的表单身份验证。大约有200个用户。在大约 2 个月的时间里，6 个用户密码突然停止工作。我已删除用户并重新注册。有谁知道某处是否存在故障，或者其他导致密码更改或被破坏的东西？

我正在使用 Ms SQL 2008 r2 服务器和 Visual Studio 2010。

编辑：我很抱歉没有更特别。我寻求帮助是因为不知道要寻找什么，因为这对我来说有点陌生。Web.config 显示：SqlMembershipProvider，我认为 maxInvalidPasswordAttempts 设置得太低很容易。我从用户那里听到的只是它突然停止工作......

谢谢阿兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:03:21.377

是 maxInvalidPasswordAttempts 设置得太低，用户被锁定。aspnet_Membership 表中有一个名为 IsLockedOut 的字段设置为 true。

开发新手

# android - NinePatch 图像不拉伸

> ID：15904332
> 
> 赞同：0
> 
> 时间：2013-04-09T14:13:44.713
> 
> 标签：android, nine-patch

我已经创建了这九个补丁图像。

![在此处输入图像描述](https://i.stack.imgur.com/1VcNm.png)

我用它作为按钮背景。在按钮中，我还输入了“返回”文本，但结果如下。

![在此处输入图像描述](https://i.stack.imgur.com/bkRlk.png)

如何将文本放在箭头的右侧并让图像拉伸以适应它？（不要担心它是像素化的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:20:19.537

首先，我可以看到您以错误的方式创建图像。您可以使用此工具 [链接](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/nine-patches.html) 。它在第一步非常有用。

其次，在我看来，只需从背景图像中删除该箭头即可。只保留带有渐变的黄色并将箭头添加为

`android:drawableLeft="@drawable/my_arrow"`

作为 xml 中按钮的元素。这是我能想到的最好的选择。

# c# - 如何在 C# 中读取 mysql 中的特定列和单元格？

> ID：15904333
> 
> 赞同：1
> 
> 时间：2013-04-09T14:13:55.353
> 
> 标签：c#, mysql, select, executereader

我曾经`ExecuteReader`为这样的所有字段选择所有（SELECT *）

```
string query = "SELECT* FROM tb_patient_information ";
        if (this.OpenConnection() == true)
        { //Create Command
            MySqlCommand cmd = new MySqlCommand(query, connection);
            //Create a data reader and Execute the command
            MySqlDataReader dataReader = cmd.ExecuteReader();
            while (dataReader.Read())
            { ... } 
```

但我只想在特定的列和单元格中选择，如红色方块中.. 像这张图片![我只想在特定的单元格和列中选择，如红色方块](https://i.stack.imgur.com/TZs8l.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:15:49.973

`while`您可以获取子句中的特定列。

```
while (dataReader.Read())
{ 
    var _column = dataReader["Nama_Kategori"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:18:47.987

考虑使用

```
 string query = "SELECT column FROM tb_patient_information ";
        if (this.OpenConnection() == true)
        { 
            //Create Command
            MySqlCommand cmd = new MySqlCommand(query, connection);
            //Create a data reader and Execute the command
            MySqlDataReader dataReader = cmd.ExecuteReader();
            if (dataReader.Read())
            { 
                dataReader.ExecuteScalar();
             }
        } 
```

或使用`dataReader["columnName"]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:21:24.827

您可以使用MySqlCommand 方法的[ExecuteScalar()来检索单个值](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-executescalar)

```
MySqlCommand myCommand = new MySqlCommand("SELECT Nama_Kategori FROM tb_patient_information WHERE Id_kategori = 'KI-02'", myConnection);
myCommand.Connection.Open();
myCommand.ExecuteScalar();
myConnection.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:17:30.840

**SQL 查询**

如果您只想要第三行数据，请尝试以下查询：

```
Select * from (Select row_number() over (order by subssn) as rownum, * FROM 
tb_patient_information)result Where rownum = 3 
```

-此查询返回结果集的第 3 行

**在数据读取器中**

```
while (dataReader.Read())
{ 
string Id = dataReader["Id_kategori"].ToString();
string Name = dataReader["Nama_Kategori"].ToString();
} 
```

**或者** 如果您说**我只使用`Select * from tb_patient_information`并且我需要第三行结果** 然后尝试如下

```
 int count=1;  
         while (dataReader.Read())  
          {  

            if(count == 3)
            {
             string Id = dataReader["Id_kategori"].ToString();
             string Name = dataReader["Nama_Kategori"].ToString();
            }  
           count ++;  
          } 
```

# google-apps-script - 删除单元格内容时如何避免onEdit时间戳

> ID：15904340
> 
> 赞同：0
> 
> 时间：2013-04-09T14:14:10.663
> 
> 标签：google-apps-script, google-sheets

我在尝试通过脚本库编辑的脚本时遇到问题。我更改了上次更新的脚本以在活动单元格中显示时间，但问题是我无法删除单元格内容，因为删除是活动单元格中的更改，因此单元格更新为当前时间。

我的代码如下。

```
function onEdit(event)
{ 

  var sheet = event.source.getActiveSheet();

  // note: actRng = the cell being updated
  var actRng = event.source.getActiveRange();
  var index = actRng.getRowIndex();
  var cindex = actRng.getColumnIndex();

  var dateCol = sheet.getLastColumn();  
  var lastCell = sheet.getRange(index,dateCol);
  var date = Utilities.formatDate(new Date(), "CST", "hh:mm:ss");

  actRng.setValue(date);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:42:22.253

您只能通过按`Ctrl`+删除它`Z`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T16:48:25.273

`onEdit()`触发器正在响应您*编辑*单元格，因此作为一种解决方法，您只需更改内容而不实际编辑它。

例如，从空白单元格*复制粘贴*内容不会触发`onEdit()`.

# apache - 符号链接 apache 模块

> ID：15904350
> 
> 赞同：0
> 
> 时间：2013-04-09T14:14:35.373
> 
> 标签：apache, unix, apache2, symlink, httpd.conf

我的默认 apache 模块当前位于 /usr/bin 中。然而，我生成的模块在 /home/user/platform/lib 中。在 httpd.conf 文件中，我按照示例添加了两个模块：

```
LoadModule rtb_module lib/mod_rtb.so
LoadModule win_module lib/mod_win.so 
```

但是，在加载模块时，我看到了错误，因为提到的两个模块位于其他地方（在本例中为 /home/user/platform/lib）。有没有办法在 httpd.conf 文件中对这两个模块进行符号链接？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:04:11.800

使用*ln -s*创建了指向必要路径的符号链接，解决了问题

# session - DevExpress XPO XPCollection 刷新变化

> ID：15904351
> 
> 赞同：0
> 
> 时间：2013-04-09T14:14:36.667
> 
> 标签：session, devexpress, xtragrid, xpo

使用 UnitOfWork 提交一些数据库更改后，我在 XPCollection 中刷新数据时遇到问题。

我有一个带有 XPCollection 的 WinForm。

XPCollection 使用 XpoDefault.Session。

我通过 UnitOfWork 做了一些改变：

```
using (UnitOfWork uow = new UnitOfWork())
    {
    var photos = new XPCollection<Photo>(uow);
    photos[0].Date = DateTime.Now;
    uow.CommitTransaction();

    } 
```

为了让原始 XPCollection 更新更改，我尝试了以下方法：

```
foreach (Photo photo in myXPCollection)
{
XpoDefault.Session.Reload(photo);
}

foreach (Photo photo in myXPCollection)
{
photo.Reload();           
}

myXPCollection.Reload() 
```

这些方法都不起作用。更改不会反映在原始 XPCollection 中。

只有当我开始一个全新的会话时，它们才可见。显然，这是一个很大的性能问题。

如何使用 UnitOfWork 对另一个会话进行更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:35:57.177

你说：

> 只有当我开始一个全新的会话时，它们才可见。显然，这是一个很大的性能问题。

这正是你应该做的。`UnitOfWork`每次需要刷新数据时都创建一个新的。实例化A`UnitOfWork`在性能方面非常便宜。如果您有大量对象集合，您应该通过在构造函数中指定参数`Photo`来仅加载您需要的对象来提高性能。`Criteria``XPCollection<Photo>`

当您发出`Reload()`它时，它不会从数据库中获取任何内容：它会丢弃任何更改并从会话身份映射中重新加载对象。您可以阅读[本文](http://www.devexpress.com/products/net/orm_old/articles/sessionmanagementcaching.xml)和[此支持中心问题](http://www.devexpress.com/Support/Center/KB/p/A643.aspx)以获取更多信息。

顺便说一句，[DevExpress 支持中心](http://www.devexpress.com/Support/Center)是迄今为止询问 DevExpress 问题的最佳场所。

# android - android:textIsSelectable 不工作 - 给我错误

> ID：15904357
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:14:47.237
> 
> 标签：android, clipboardmanager

我正在使用它`android:textIsSelectable`，但仍然出现错误：`TextView does not support text selection. Action mode cancelled.`

谁能告诉我我可能做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T15:19:12.717

我敢打赌，您正在尝试在 EditText 上使用此属性。它仅适用于 TextView，因此您不能在 EditText 中使用它。

# sonarqube - Sonar 项目中包含的 .aspx 文件

> ID：15904358
> 
> 赞同：2
> 
> 时间：2013-04-09T14:14:48.477
> 
> 标签：sonarqube

我有一个用于分析和审查代码的 C# 声纳项目。但我想包括 aspx 页面。我相信没有能够分析 aspx 的插件，但我很高兴该文件只是出现在项目中，这样我就可以利用 Sonar 中的审查功能。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:39:56.380

不幸的是，目前这在 Sonar .NET 和 C# 插件生态系统中是不可能的——目前在 Sonar 中也没有任何现有的插件。

# wso2 - WSO2 将 API Manager 连接到 Identity Server 以进行密钥管理

> ID：15904365
> 
> 赞同：1
> 
> 时间：2013-04-09T14:15:02.817
> 
> 标签：wso2

我们想将 WSO2 API Manager 连接到 WSO2 Identity server 进行应用程序密钥管理，也就是说我们不想使用 API Manager 附带的嵌入式密钥管理，我们该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T06:03:40.597

IS 被用作 Oauth 提供者，但如果我们考虑密钥管理部分，我们没有由 APIM 管理的操作，以限制/允许令牌访问。所以，如果你想使用 IS 作为密钥管理服务器，你需要安装 APIM IS 和 api-mgt.xml 中的密钥管理相关功能，您必须在 APIKeymanagment 部分下提供 IS 服务器 URL/凭据。

# sass - 如何向 Zurb Foundation 4 REM 功能添加 PX 回退？

> ID：15904366
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:15:03.013
> 
> 标签：sass, zurb-foundation, fallback

我正在使用 Zurb Foundation 4 框架中的这个 SCSS 函数：

```
@function remCalc($pxWidth) {
  @return $pxWidth / $em-base * 1rem;
} 
```

它只返回一个 REM 值，因此它不适用于 IE8。是否可以添加 PX 后备以支持 IE8？我对 SASS 函数的编码不熟悉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-23T01:37:38.000

```
@mixin font-size($pxWidth){
  font-size:$pxWidth;
  font-size:remCalc($pxWidth);
}
.yourclass {
  @include font-size(16px); //outputs font-size:16px; font-size:1rem;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:14:39.423

如 Foundation 4 Docs 中所述，不支持 ie8，请参阅他们的扩展文章，完整解释为什么他们不再支持它。

如果您正在寻找 IE8 支持，他们建议您恢复到 Foundation 3.2

[http://foundation.zurb.com/docs/faq.html](http://foundation.zurb.com/docs/faq.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:19:55.547

最好的解决方案是使用 polyfill 在 IE8 和更早版本中启用 rem 支持。

不幸的是，我不确定是哪一个。尝试[html5shim](https://code.google.com/p/html5shim/)和[IE9.js](https://code.google.com/p/ie7-js/)作为初学者。

有问题的函数是一个函数，而不是一个 mixin。所以它不能提供后备。考虑为此目的编写自己的 mixin。您可以使用[一些技巧](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)来使一行 CSS 仅适用于 IE。

# node.js - 在 Socket.io 中存储数据

> ID：15904370
> 
> 赞同：2
> 
> 时间：2013-04-09T14:15:08.720
> 
> 标签：node.js, socket.io, storage

我现在开始在这个 Node.js 的世界里，我做了几个测试，最初作为典型的“Hello World”，直到创建一个简单的聊天，我已经着手创建一个稍微复杂一点的，我在下面描述：

1.  用户已经存在的聊天，这些用户位于 MySQL 数据库中。

2.  它应该创建多个聊天室，每个对话都是一对一的。

最初我进行了 Mysql 连接测试，有效地实现了它，但是在关闭与它的连接时遇到了问题，所以我找到了另一个“解决方案”，它会询问是否建议这样做，否则将是一个大错误。

聊天正在使用已知的卖方 Socket.io，阅读我找到的与会话 ID 相关的文档，您可以关联更多信息，我正在做的事情如下：

1.  我通过 socket.join 选项的房间（房间）

2.  使用 socket.io 的“set”属性，我通过一个对象存储与连接用户相关的信息，例如名称、数据库 id 和图片的 url。

3.  使用 io.sockets.clients (room)，获取在房间里的用户，假设一个用户可以有多个会话（几个窗口/选项卡），所以验证客户端使用用户 ID，只显示一个.

服务器：

```
var io = require("socket.io").listen(8080, {log: false});
io.on("connection", function(socket)
{    
    socket.on("newUser", function(data)
    {
    var participants = [];
    var room = data.ig;
    socket.set('iduser', data.d, function ()
    {                   
        socket.join(room);          
        for (var ver in pas = io.sockets.clients(room))
        {               
            participants.push({id: pas[ver].store.data.iduser[0].id, n: pas[ver].store.data.iduser[0].n, f: pas[ver].store.data.iduser[0].f});
        }
        io.sockets.in(room).emit("newConnection", {participants: participants});
    });
});
socket.on("disconnect", function() 
{
    var rooms = io.sockets.manager.roomClients[socket.id];          
    for(var room in rooms)
    {
        if(room.length > 0)
        {
            room = room.substr(1);                
        }
    }       
    var idusuario = 0;
    for(var ver in pas = io.sockets.clients(room))
    {
        if(pas[ver].id == socket.id)
        {
            idusuario = pas[ver].store.data.iduser[0].id;
            break;
        }       
    }
    if(idusuario != 0)
    {
        //El número de veces que tiene una sesión...
        var num = 0;
        for(var ver in pas = io.sockets.clients(room))
        {
            if(pas[ver].store.data.iduser[0].id == idusuario)
            {
                num++;
            }
        }           
        if(num <= 1)
        {
            io.sockets.in(room).emit("userDisconnected", {id: idusuario, sender:"system"});
        }           
    }
}); 
```

});

客户

感谢他们对如何处理这一困难的意见或建议。

提前感谢他们的帮助。

# javascript - 如何从图像 url 创建一个 Blob 对象？

> ID：15904374
> 
> 赞同：0
> 
> 时间：2013-04-09T14:15:18.703
> 
> 标签：javascript, winjs

我正在使用 Winjs（用于 Windows 8 应用程序的 JavaScript）。我想要的是通过给出路径从我的静态图像的特定 url 创建一个简单的 blob 对象。解决办法是什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:57:57.787

下面使用的“MSApp.CreateFileFromStorageFile()”将起作用。如果您需要使用 WinJS.xhr() 发送文件，您可以在 xhrOptions 中设置为数据。

```
var uri = new Windows.Foundation.Uri('ms-appx:///images/IMG_0550.jpg');
        var self = this;
        Windows.Storage.StorageFile.getFileFromApplicationUriAsync(uri).then(function ongetfilecomplete(storageFile)
        {
            var file = MSApp.createFileFromStorageFile(storageFile);
            var url = URL.createObjectURL(file, { oneTimeOnly: true });
            // assume that this.imageElement points to the image tag
            self.imageElement.setAttribute('src', url);
        }).then(null, function onerror(error)
        {

        }); 
```

如果您正在寻找将 blob 上传到 azure，请参考[链接。](http://blog.programtheeworld.com/2013/03/22/uploading-image-to-azure-blob-from-windows-store-app/)为了将 blob 也发送到您的 web 服务，代码将在这些行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:14:49.110

URL.createObjectURL("") 应该可以工作。我用它所有的时间。使用其他一些 URL 对其进行测试。您可以在 JS 控制台中以调试模式执行此操作，以使其更容易。

# vba - 参数太少。预期的 . （错误 3061）

> ID：15904375
> 
> 赞同：0
> 
> 时间：2013-04-09T14:15:22.317
> 
> 标签：vba

我在运行此代码时收到错误 3601，它说参数太少，有什么解决方案吗？

```
Sub copySDback()
Dim db As DAO.Database

Dim rst As DAO.Recordset

Dim test As String

Dim sdSQL As String

Set db = CurrentDb()
moo = "SD12401064"

sdSQL = "SELECT [Test EUS BL].[Ticket Nbr], [Test EUS BL].[Current Assignment Group],              [Test EUS BL].[ELEVATION STATUS] FROM [Test EUS BL] WHERE ((([Test EUS BL].[Ticket     Nbr])=SD16818515));"
'CurrentDb.OpenRecordset sdSQL

Set rst = db.OpenRecordset(sdSQL, dbOpenDynaset, dbSeeChanges)
If rs.BOF And rs.EOF Then
    rs.Close
    MsgBox "name not found"
End If
Exit Sub

rs.Close
db.Close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:44:10.020

在您查询的这一部分

```
WHERE ((([Test EUS BL].[Ticket     Nbr])=SD16818515)) 
```

**看起来Ticket**和**Nbr**之间有多个空格（这可能是格式问题），但在使用方括号时必须准确。此外，与所需参数问题无关，您需要`SD16818515`用单引号括起来，例如

```
'SD16818616' 
```

因为它是一个字符串。

# javascript - 在 Javascript 中检查 keyup 事件

> ID：15904382
> 
> 赞同：1
> 
> 时间：2013-04-09T14:15:32.813
> 
> 标签：javascript

我正在尝试使用[jQuery Credit Card Validator](http://jquerycreditcardvalidator.com/)来验证信用卡。

基本用法如下

```
$('#cc_number').validateCreditCard(function(result)
{
alert('CC type: ' + result.card_type.name
  + '\nLength validation: ' + result.length_valid
  + '\nLuhn validation: + result.luhn_valid');
}); 
```

我查看了该站点上包含的演示 JS 文件，无法做出正面或反面。

我想要实现的是 onkeyup 输入，根据捕获的卡类型做一些事情：

```
 //on key up of input
 if (card == valid) 
   {
     if (card == visa)
      {
        //do something
      }
     else if (card == mastercard)
     {
        //do something
     }
       // repeat for rest of card types
   }
 else
   {
     //Just print an error
   } 
```

我知道这是相当基本的东西，但是任何人都可以帮助我如何实现吗？

```
 my HTML:
 <input type="text" id="cc_number" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:53:18.873

这里是 jQuery 信用卡验证器的开发者。

jCCV 绑定`keyup`事件，因此您不需要这样做。（实际上它比这更复杂一些——你需要知道的是，*每次*字段的值发生变化时，你的回调函数都会被执行）。

```
$('#cc_number').validateCreditCard(function(result)
{
    // this will execute everytime the value of the `#cc_number` field changes

    if (result.length_valid && result.luhn_valid) {
        if (result.card_type.name == 'visa') {
            // do something
        } else if (result.card_type.name == 'mastercard') {
            // do something
        }       
        // repeat for rest of card types
    } else {
        // just print an error
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:51:29.057

尝试这样的事情：

```
$("#cc_number").on("keyup", function() {
    $(this).validateCreditCard(function(result) {
    alert('CC type: ' + result.card_type.name
      + '\nLength validation: ' + result.length_valid
      + '\nLuhn validation: ' + result.luhn_valid);
    });

    if (result.card_type.name) {
      if (result.card_type.name == visa)
      {
         //do something
      }
      else if (result.card_type.name == mastercard)
      {
         //do something
      }
      // repeat for rest of card types
   }
   else {
     //Just print an error
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:53:04.007

通过 Stripe 使用这个：[https ://github.com/stripe/jquery.payment](https://github.com/stripe/jquery.payment)

好多了。

# eclipse - 如何将插件安装到外部文件夹以便与新版本的 eclipse 一起使用

> ID：15904387
> 
> 赞同：0
> 
> 时间：2013-04-09T14:15:43.303
> 
> 标签：eclipse

我有一组在 eclipse 中总是需要的插件。我也喜欢跟上最新版本的 eclipse。

所以这意味着每次我更新 eclipse 时我都必须重新安装我需要的所有插件。

如何将这些插件安装到外部文件夹，以便新安装的 eclipse 可以获取它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:30:38.077

不要那样做。而是使用*File -> Export -> Install -> Software Items*在旧安装上归档，以创建列出当前插件的文件。在第二次安装中相应地导入文件。确保选中复选框以在导入期间搜索较新的版本。

这需要 Eclipse 3.7+。

# matlab - Matlab中目录的递归列表

> ID：15904388
> 
> 赞同：0
> 
> 时间：2013-04-09T14:15:44.117
> 
> 标签：matlab

我有一个包含 3 个文件夹的目录。这 3 个文件夹中的每个文件夹都有其他数量的文件夹。在这些文件夹的每个文件夹中，都有一个文件列表，我想在每个文件上运行代码。例如：它是这样的：MainFolder 有 SubFolder1，SubFolder2。SubFolder1 有 SubSubFolder1、SubSubFolder2、SubSubFolder3。SubFolder2 有 SubSubFolder1、SubSubFolder2。每个 SunSubFolders 都有许多文件。我想要一个脚本，我给它 MainFolder Path，它遍历每个子文件夹和子子文件夹，并对这个子文件夹中的文件进行操作，并用这个子文件夹的名称保存工作区。因此，在上面的示例中，在对 SubSubFolder1 中的文件进行一些处理之后，生成的工作空间将保存在名为 SubSubFolder1.mat 的位置中。

请我问是否有人可以帮助我，因为这对我来说相当紧急。非常感谢您的帮助和考虑。

更新：

我已经完成了，但是出现了另一个问题，当我访问 SubSubFolders 中的文件并尝试进行操作时，它显示“无法打开文件'[00000000].pgm'，因为：没有这样的文件或目录”。如何解决这个问题？

这是我的代码：

```
D = rdir('Hussein/*/*');           %// List of all sub-directories
for k = 1:length(D)
    currpath = D(k).name;                 %// Name of current directory
    [pathstr, name, ext] = fileparts(currpath);
    %// Operate on all .txt files in currpath
    l = dir(fullfile(currpath, '*.pgm')); %// Listing of all relevant files
    filenames={l.name}';

    nfiles=length(filenames)
    %images=zeros(240, 320, 1000);
    idx=1;

    strtidx=1;
    endidx=nfiles;
    step=1;

    waitbar(0);
    for i=strtidx:step:endidx
        fn=fullfile('', filenames{i});
        tmp=padarray(ut_pgmread(fn), 1, 'post');
        %figure(1); imagesc(tmp); colormap(jet(4096)); colorbar;

        images(:, :, idx)=tmp; idx=idx+1;

        waitbar(i/nfiles);
    end

    close(findall(0,'Tag','TMWWaitbar'));
    name='/Volumes/Untitled/work/'+name;
    save (name, '-v7.3');

    %for m = 1:length(F)
     %   currfile = F(m).name;             %// Name of current file

        %// Do something with currfile...
    %end

    %// Write output (if any) in currpath...
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:41:09.887

您似乎正在寻找 的递归版本[`dir`](http://www.mathworks.com/help/matlab/ref/dir.html)，因此您可能会发现 MATLAB File Exchange 中的[增强`rdir`工具](http://www.mathworks.com/matlabcentral/fileexchange/32226-recursive-directory-listing-enhanced-rdir)对您的目的很有用。使用 enhanced `rdir`，您的代码将类似于以下内容：

```
%// List all sub-directories under MainFolder recursively
D = rdir('MainFolder\**\*.');             %// List of all sub-directories
for k = 1:length(D)
    currpath = D(k).name;                 %// Name of current directory

    %// Operate on all .txt files in currpath
    F = dir(fullfile(currpath, '*.txt')); %// Listing of all relevant files
    for m = 1:length(F)
        currfile = F(m).name;             %// Name of current file

        %// Do something with currfile...
    end

    %// Write output (if any) in currpath...
end; 
```

# asp.net - 如何让 Puppet 安装 .NET Framework 4.5？

> ID：15904390
> 
> 赞同：5
> 
> 时间：2013-04-09T14:15:48.847
> 
> 标签：asp.net, .net, puppet, vagrant

所以我在 Mac OS X 上使用 Vagrant 和 Puppet 来实例化和配置在[http://www.vagrantbox.es/上找到的](http://www.vagrantbox.es/)**Windows 2008 R2 Datacenter Full** basebox （在 VirtualBox 中），我想知道是否有人能够成功将 .NET 4.5 安装到此映像？

我找到了这个模块，并将它放在我项目的 /puppet/modules 文件夹中：

[https://github.com/justinstoller/puppet-dotnet](https://github.com/justinstoller/puppet-dotnet)

我所有实际安装 .NET 4.0 或 4.5 的尝试都会导致权限错误。

我认为这是因为 Puppet Agent 作为“SYSTEM”运行，并且在没有提升权限的情况下无法对操作系统进行重大更改。

任何人都可以确认这一点并提供解决方法吗？最好不涉及构建自定义basebox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:47:53.797

您正在混合类和资源声明。使用类（首选）：

```
class { 'dotnet':
  version => '4.5',
} 
```

或资源：

```
dotnet::installation { '4.5': } 
```

# oracle - 从 PL/SQL 执行 windows cmd 行

> ID：15904392
> 
> 赞同：1
> 
> 时间：2013-04-09T14:15:51.897
> 
> 标签：oracle, batch-file, plsql, cmd

我对 oracle 环境相当陌生（但对 SQL Server 非常熟悉），并试图弄清楚如何在我的 PL/SQL 过程结束时启动 Windows CMD 行。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:26:45.163

DBMS_Scheduler 可以运行 .bat 文件。请参阅文档中的“job_type”和“job_action”：http: [//docs.oracle.com/cd/E11882_01/appdev.112/e16760/d_sched.htm](http://docs.oracle.com/cd/E11882_01/appdev.112/e16760/d_sched.htm)

同样，Oracle 当然可以发送电子邮件：http: [//docs.oracle.com/cd/E11882_01/appdev.112/e16760/u_mail.htm#i1001258](http://docs.oracle.com/cd/E11882_01/appdev.112/e16760/u_mail.htm#i1001258)

# sql - Oracle - 更新、解码和设置值

> ID：15904394
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:15:56.440
> 
> 标签：sql, database, oracle, oracle10g

我有一张桌子，例如

```
**Fruit   Number**
Apple     5
Grape     9
Orange    1
Coconut   54
Mango     22 
```

我想要 ：

1.  选择整个列表
2.  将“苹果、芒果、椰子”放在列表顶部。
3.  更新当前订单，其中 number = rownum

该列表应如下所示：

```
**Fruit   Number**
Apple     1
Mango     2
Coconut   3
Grape     4
Orange    5 
```

我尝试了以下但遇到语法问题..

```
update tablename 
set id = rownum
where fruit in (select fruit from table order by decode(fruit,'Apple',1,'Mango',2,'Coconut',3)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:18:56.767

```
UPDATE (
    SELECT ROWNUM+5 AS r, fruit, number FROM TABLE
    WHERE fruit NOT IN ('Apple', 'Mango', 'Coconut', 'Grape', 'Orange')
    UNION
    SELECT 1 AS r, 'Apple' AS fruit, number FROM TABLE
    UNION
    SELECT 2 AS r, 'Mango' AS fruit, number FROM TABLE
    UNION
    SELECT 3 AS r, 'Coconut' AS fruit, number FROM TABLE
    UNION
    SELECT 4 AS r, 'Grape' AS fruit, number FROM TABLE
    UNION
    SELECT 5 AS r, 'Orange' AS fruit, number FROM TABLE
) 
SET number = r; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:20:54.710

以下查询将为您执行此操作。

```
UPDATE table SET number =
CASE fruit
    WHEN 'Apple' THEN 1
    WHEN 'Mango' THEN 2
    WHEN 'Coconut' THEN 3
    WHEN 'Grape' THEN 4
    WHEN 'Orange' THEN 5
END; 
```

# php - 我如何知道 OpenCart 中哪些模块处于活动状态？

> ID：15904400
> 
> 赞同：1
> 
> 时间：2013-04-09T14:16:11.103
> 
> 标签：php, opencart

我正在为我的网站构建一个具有一些特殊性的主题，所以我需要知道是否启用了模块幻灯片和模块促销，我怎么知道这一点？我可以从模板中检查吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:46:28.577

由于模块如何在商店中拥有多个模块的性质，并且位于模板（布局）的不同区域，这很难做到。您必须像左/右列和内容顶部/底部一样查询布局和位置，以查看该模块在该特定区域和该特定页面上是否可用。有关如何实现这一点，请参阅特定安装版本的控制器内的代码`catalog/controller/common/column_left.php`，例如

也就是说，大多数自定义主题开发人员将为您希望他们所在的特定区域创建自己的模块，以便您可以控制它并使用`$this->config->get`. 这将是我如何实现这一目标的选择，因此您的主题不依赖其他模块

# android - 3G 的 LocationManager 只能在重启后工作

> ID：15904401
> 
> 赞同：1
> 
> 时间：2013-04-09T14:16:19.433
> 
> 标签：android, locationmanager

`onLocationChange`我有一个检索提供商网络位置的应用程序，问题是在使用 3G 或 WI-Fi 时该站点没有被恢复（没有发生）。

有谁知道可以是什么？重启后设备正常工作。

这是我的代码：

```
locationManager = getSystemService (LocationManager) (LOCATION_SERVICE);
locationManager.requestLocationUpdates (LocationManager.NETWORK_PROVIDER, 3000, 0, this); 
```

# upload - kendo ui 上传在部署时在 IE9 中不起作用

> ID：15904402
> 
> 赞同：2
> 
> 时间：2013-04-09T14:16:19.923
> 
> 标签：upload, internet-explorer-9, kendo-ui

我正在使用 Kendo Ui 上传器和 WebAPI 调用来上传文件。**我所做的过程在所有浏览器上运行良好，即使在本地 IE9（本地主机）上，但是一旦我在另一个域上部署相同的代码并且我在 IE9 中使用剑道上传（只有在 IE9 中存在问题），剑道直接进入错误功能并回复错误消息**：

```
' Server response: Error trying to get server response: Error: Access is denied.' 
```

尽管 webapi 方法返回了 201（已创建）的 http 响应，并且我将内容类型标头设置为“text/plain”，而且我在 http 响应的正文中发送了一个 json 字符串。我尝试了很多东西（*其中之一是在 IIS 中配置 X-Frame-Options*）但无法使其工作。任何想法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T14:41:47.277

答案在此处[访问 iframe 文档对象时出现“访问被拒绝”错误](https://stackoverflow.com/questions/151362/access-is-denied-error-on-accessing-iframe-document-object/151404#151404)

[...]“事实证明，如果发送带有错误代码的响应，IE 会将 iframe 的内容替换为从磁盘加载的错误消息 (res://ieframe.dll/http_500.htm) ，这会导致跨域访问被拒绝错误。由 Ovesh"

# blender - Blender 导出到 obj 弄乱了我的法线

> ID：15904405
> 
> 赞同：1
> 
> 时间：2013-04-09T14:16:27.567
> 
> 标签：blender, wavefront, exporter

我在使用 Blender 的 Wavefront 导出器时遇到了一些问题。

实际上我正在为 .obj 网格开发一个解析器。我在 Blender 中创建了一个网格，设置了它的 UV、法线等等......当我用我的加载器加载这个网格时，UV 被正确放置但不是法线，实际上它们都被翻转了！
如果我在 Blender 中翻转所有法线，网格会正确显示在我的应用程序中。奇怪的是，如果创建一个简单的立方体，导出它，加载它，在我的应用程序中显示它，它会正确显示，而不必在 Blender 中“糟糕”地翻转。
我对导出器的参数进行了很多尝试，我设置了我的网格平滑，以便我确定我得到每个顶点法线......
我尝试通过设置背面剔除 ON/OFF，事实上我尝试了很多我发现的东西没有结果的互联网。

这是我的一些代码：

```
//I add information about vertices / uv / normals in 3 collections

//vertex
case "v":
    l_vertex = new VPrimVertex(new VPrimVector3(Double.Parse(l_words[1]), Double.Parse(l_words[2]), Double.Parse(l_words[3])));
    ListeVertices.Add(l_vertex);
    break;
//vertex normal
case "vn":
    ListeNormales.Add(new VPrimVector3(Double.Parse(l_words[1]), Double.Parse(l_words[2]), Double.Parse(l_words[3])));
    break;
//vertex UV
case "vt":
    //pas la même orientation UV entre Wavefront et WPF d'où le 1-V
    ListeUVs.Add(new VPrimPointUV(Double.Parse(l_words[1]), 1.0-Double.Parse(l_words[2])));
    break;
//face
case "f":
    //pas un triangle
    if (l_words.Length > 4)
    {
        Triangule(l_words);
    }
    //triangle
    else
    {
        ComputeFace(l_words);
    }
    break; 
```

. . .

```
Computeface(){
...
//for each face :  
    //for each vertex of a face :   
    //p_face[i] contains strings like v1/vt1/vn1   

    l_stringVertex = p_face[i].Split('/');
    l_vertex = ListeVertices.ElementAt(int.Parse(l_stringVertex[0]) - 1);
    l_vertex.AddAdjacent(l_face);
    l_vertex.Normale = ListeNormales.ElementAt(int.Parse(l_stringVertex[2]) - 1);

    l_face.AddVertex(l_vertex);
    l_face.UVList.Add(m_listeUVs.ElementAt(int.Parse(l_stringVertex[1]) - 1));
    ...
} 
```

然后我用所有这些数据填充 WPF MeshGeometry3D。

```
private void Finalise()
    {
        Point3D l_point3D;
        Vector3D l_vector;
        Point l_point;
        VPrimPointUV l_pointUV;
        int i;

        foreach (VPrimFace l_face in Racine.SubdivideList)
        {
            i = 0;
            foreach (VPrimVertex l_vertex in l_face.VertexList)
            {
                l_point3D = new Point3D(l_vertex.Position.X, l_vertex.Position.Y, l_vertex.Position.Z);
                CurrentMesh.MeshGeometry3D.Positions.Add(l_point3D);

                l_vertex.moyenneNormaleFacesAdjacentes();
                l_vector = new Vector3D(l_vertex.Normale.X, l_vertex.Normale.Y, l_vertex.Normale.Z);
                CurrentMesh.MeshGeometry3D.Normals.Add(l_vector);

                if (Texture)
                {
                    l_pointUV = l_face.UVList.ElementAt(i);
                    l_point = new Point(l_pointUV.U, l_pointUV.V);
                    CurrentMesh.MeshGeometry3D.TextureCoordinates.Add(l_point);
                }

                CurrentMesh.MeshGeometry3D.TriangleIndices.Add(CurrentMesh.MeshGeometry3D.Positions.Count-1);

                i += 1;
            }
        }
    } 
```

如果您有任何想法...谢谢

在搅拌机 2.66

# css - SCSS/Modernizr 链式类

> ID：15904410
> 
> 赞同：0
> 
> 时间：2013-04-09T14:16:38.473
> 
> 标签：css, sass, compass-sass, modernizr

我不确定这可以做到。但是考虑以下，我正在使用modernizr并尝试根据父母的课程制作css按钮。

我在这里做了一个 JSFiddle：http: [//jsfiddle.net/qBkPL/1/](http://jsfiddle.net/qBkPL/1/)

我想要的结果是：

```
.foo.bar .selector 
```

但是，将范围限定为父级时的结果：

```
.foo .selector.bar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:45:09.707

你根本不能那样做。为了得到你想要的输出，你必须这样写：

[http://jsfiddle.net/qBkPL/2/](http://jsfiddle.net/qBkPL/2/)

```
a.parent-chaining {
    .foo.bar & {
        color:red; // this should be red
    }
} 
```

嵌套选择器不是必需的，在有意义的时候使用它。

# grails - 等于对象条件查询

> ID：15904412
> 
> 赞同：0
> 
> 时间：2013-04-09T14:16:45.943
> 
> 标签：grails, grails-orm, criteria

如果我有两个这样的域类：

```
class Company{
    string Name
    string address
}

class User {
    string firstName
    string lastName
    Company company
} 
```

如何使用条件查询从名为 Google 的公司获取所有用户？像这样的东西：

```
def company = Company.findByName("Google")

def c = User.createCriteria()
def usersByCompany = c.list {
    eq("company", company)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:07:26.573

您可以在闭包中声明一个块来过滤公司中的任何字段：

```
def usersOfGoogle = User.createCriteria().list() {
    company {
      eq('name', 'Google')
    }
} 
```

我只是不记得它是否仅适用于关系（belongsTo & hasMany），也许您需要更改您的域类：

```
class User {
  static belongsTo = [company : Company]
} 
```

# solr - 是否可以获得 CMIS 查询的方面结果？

> ID：15904413
> 
> 赞同：0
> 
> 时间：2013-04-09T14:16:49.790
> 
> 标签：solr, alfresco, cmis, facets

我计划使用 CMIS 对存储在 Alfresco 存储库中的文档执行全文查询。为此，我想使用 CONTAINS() 过滤器。这给了我一个结果集......但我的问题是：我如何检索方面计数？

Alfresco 在后台使用 Solr 来执行查询。有没有办法指定方面字段并通过 CMIS 获得结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:31:24.233

你不能。Facets 是一个 Solr 特性，它没有映射到 CMIS 域模型中。如果您需要分面，则必须直接使用 Solr 而不是 CMIS。

# javascript - Javascript/jQuery 对象范围问题

> ID：15904414
> 
> 赞同：1
> 
> 时间：2013-04-09T14:16:50.743
> 
> 标签：javascript, jquery, ajax, object, scope

我在 JS 中遇到了一些关于范围的问题，我刚刚开始了解。

我已经定义了一个对象并在其中进行了 .getJSON() 调用，但我似乎无法正确引用调用对象的属性：

```
// Vehicle object
function vehicle(id) {
    this.id = id;
    var that = this;
    // Fetch some JSON
    $.getJSON("json.php?act=vehicleInfo&id=" + this.id, function (json) {
        that.vehicleInfo = json
        that.icon = L.AwesomeMarkers.icon({ icon: that.vehicleInfo.icon, color: that.vehicleInfo.colour });
        that.polyline = new L.Polyline([[that.vehicleInfo.latitude, that.vehicleInfo.longitude]]);
        that.marker = L.marker([that.vehicleInfo.latitude, that.vehicleInfo.longitude], {icon: that.icon});
        that.marker.bindPopup("Test point");
        that.marker.addTo(map);
        that.polyline.addTo(map);
    });
}

// Vehicle move method
vehicle.prototype.move = function(latlng){
    this.marker.setLatLng(latlng);
    this.polyline.addLatLng(latlng);
} 
```

当我调用 .move() 时，this.marker 是未定义的。我在哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T14:21:02.153

不幸的是，Ajax 不是这样工作的。您不能依赖`$.getJSON`回调在任何特定时间完成，甚至完全不能。一种可能是使请求同步，但**不推荐**这样做，因为它会锁定浏览器。

唯一可能的两种解决方案是：

1.  不要依赖ajax
2.  使任何依赖于 ajax 回调结果的东西都依赖于回调本身。

也就是说，调用`.move`车辆的任何代码都必须作为`$.getJSON`调用的结果来完成。不过，你可以让它看起来更优雅一点：

```
this.jqxhr = $.getJSON(...
/* snip */
vehicle.prototype.move = function (latlng) {
    var veh = this;
    this.jqxhr.done(function () {
       veh.marker.setLatLng(latlng);
       veh.polyline.setLatLng(latlng);
    });
} 
```

# sql - 如何使用表函数中的记录将记录插入表中

> ID：15904415
> 
> 赞同：0
> 
> 时间：2013-04-09T14:16:51.007
> 
> 标签：sql, oracle, plsql

我有一个如下所述的设置

```
> create table earnings(earning_id number,
>                      col1 number,
>                      col2 number);
>
>create table trans(trans_id number,
>                   trans_attr1 number,
>                   trans_attr2 number);
>
>create or replace type trans_obj as object
>                   (trans_id number,
>                    trans_attr1 number,
>                    trans_attr2 number);
>
>create or replace type trans_coll as table of trans_obj;
>
>create or replace type earning_obj as object 
> (
>  earning_id number,
>  col1 number,
>  col2 number
>  );
>
>create or replace type earnings_coll as table of earnings_obj;
>
>/ 
```

我有一个表格功能如下

> > 函数计算（trans_t trans_coll）返回收益_coll流水线；

我想做类似下面的事情

```
>>  function get_results(trans_t trans_coll)
>>  return earnings_coll pipelined 
>>   as
>>      l_earning_rec earnings_obj;
>>    
>>   begin
>>     
>>     for earning in (select * from table(calculate(trans_t)))
>>      loop
>>         l_earning_rec.extend();
>>         // copy value from earning to l_earning_rec without having to copy each
>>         // attribute individually
>>         
>>         pipe row(l_earning_rec);
>>      end loop;
>>    
>>    return;
>>   end get_results; 
```

请让我知道是否有办法做到这一点。

此外，如果 get_results 是一个仅将记录插入收益表的过程，我该怎么做

```
insert into earnings 
   values (select * from table(calculate(trans_t))) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:02:13.783

如果有帮助，您可以将功能更改为此：

```
for earning in (select earnings_obj(earning_id, col1, col2) a
                 from table(calculate(trans_t)))
loop
   pipe row(earning.a);
end loop; 
```

至于您的插入，您只需将其写为：

```
insert into earnings 
select * from table(calculate(trans_t)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:42:16.367

我一直在使用“10g PL/SQL 编程指南”学习 PL/SQL，但我认为没有这样的东西。

# jquery - 在工具提示中放置链接

> ID：15904416
> 
> 赞同：1
> 
> 时间：2013-04-09T14:16:56.053
> 
> 标签：jquery, ruby-on-rails, html, tooltip

我有一种情况，我需要在工具提示中显示一个链接。我发现了几个帖子，人们说最好的方法是隐藏 div，但我找不到任何这样做的例子。任何人都可以指出我在正确的地方这个例子吗？

这是迄今为止我对 HTML 的了解。我认为其余的将在 Jquery 中完成，这是我的弱点。

```
<td><%= f.check_box :raw_footage_check_finished, :checked => true %>
<div id="tooltip" style="display:none"><%= link_to 'Mark Incomplete', '#' %>
</div></td> 
```

我将 Ruby on Rails 用于我的服务器端语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:28:05.630

你不需要使用任何 jQuery，除非你正在做一些非常花哨的事情。您可以像这样使用普通的 'ol CSS：

```
.parent .tooltip {
    display: none;
}

.parent:hover .tooltip {
    display: block;
} 
```

从您的示例中不太清楚您希望它如何工作，但这里有一个 jsFiddle 演示：http: [//jsfiddle.net/DEtnP/](http://jsfiddle.net/DEtnP/)

此外，尽可能避免使用内联 CSS。

# php - 重定向所有外部链接

> ID：15904432
> 
> 赞同：1
> 
> 时间：2013-04-09T14:17:30.393
> 
> 标签：php, redirect

我想重定向所有外部链接，例如当您链接像 google.com 这样的外部网站时，它将是这样的链接“redirector.php?url=google.com”然后转到 google.com

另外，我想在 30 秒后重定向该链接。这意味着，在您单击链接 (redirector.php?url=google.com) 后，它会在倒计时（30 秒）后转到 redirector.php，然后在 30 秒后转到 google.com。

我在 vBulletin 论坛上看到类似的内容，但我的网站不是 vBulletin。

mysite.com/redirector.php?url=google.com

但我希望它不会影响我的内部链接

mysite.com/news.php

有没有办法通过php做到这一点？

提前致谢

这是我的工作：'url', 'type' => 'unparsed_equals', 'before' => '', 'after' => '', 'validate' => create_function('&$tag, &$data, $disabled', ' if (strpos($data, \'http://mysite.com/redirector.php?url=\') !== 0 && strpos($data, \'https://mysite.com /redirector.php?url=\') !== 0) $data = \'http://mysite.com/redirector.php?url=\' . $data; '), ?> 但我需要替换取而代之的是[http://mysite.com](http://mysite.com)，可以实现网址，例如 $siteurl

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:23:24.880

使用 javascript 进行超时，如下所示：

重定向器.php

```
<script type="text/JavaScript">
<!--
    setTimeout("location.href = '<?php echo htmlspecialchars($_GET['url']); ?>';", 30000);
-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:23:26.920

**重定向器.php**

**方法一**

```
<?php
$url=$_GET["url"];
sleep(30);
header("Location: $url");
?> 
```

**方法二**

```
<?php
$url=$_GET["url"];
echo "<meta http-equiv=\"refresh\" content=\"30;URL=$url\" />";
?> 
```

# oracle - Oracle 中的登录存储过程 | 错误：PLS-00306

> ID：15904436
> 
> 赞同：2
> 
> 时间：2013-04-09T14:17:34.293
> 
> 标签：oracle, stored-procedures, sqldatasource

我正在从 ASP.NET SqlDataSource 调用包中的存储过程，但是我不断收到以下错误。

```
ORA-06550: line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'VALIDATE_USER_PRC'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

我的存储过程如下所示：

```
PROCEDURE VALIDATE_USER_PRC(P_APPLICATIONNAME IN TBL_USERS.APPLICATIONNAME%TYPE,
P_USERNAME IN TBL_USERS.USERNAME%TYPE,
P_PASSWORD IN TBL_USERS.USERPASSWORD%TYPE,
P_RESULTS OUT NUMBER)
IS
BEGIN
SELECT COUNT(*) INTO P_RESULTS FROM TBL_USERS WHERE USERNAME=P_USERNAME
AND (USERPASSWORD=P_PASSWORD)
AND APPLICATIONNAME=P_APPLICATIONNAME;
END VALIDATE_USER_PRC; 
```

它在我的包 PARENT_USER_API 中声明。

*   TBL_USERS.APPLICATIONNAME%TYPE = **VARCHAR2(255)**
*   TBL_USERS.USERNAME%TYPE = **VARCHAR2(255)**
*   TBL_USERS.USERPASSWORD%TYPE = **VARCHAR2(128)**

最后，我的 ASP.NET 代码如下所示：

```
<asp:SqlDataSource ID="dsLogin" runat="server" CancelSelectOnNullParameter="false"
   ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
   ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" 
   SelectCommand="PARENT_USER_API.VALIDATE_USER_PRC" SelectCommandType="StoredProcedure">
   <SelectParameters>     
      <asp:Parameter Name="P_APPLICATIONNAME" DefaultValue="/PortailParent" Type="String" />
      <asp:ControlParameter ControlID="txtUser" Name="P_USERNAME" PropertyName="Text"  Type="String" />
      <asp:ControlParameter ControlID="txtPass" Name="P_USERPASSWORD" PropertyName="Text"  Type="String" />
      <asp:Parameter Name="P_RESULTS" Direction="Output" Type="Int32" />
   </SelectParameters>
</asp:SqlDataSource> 
```

我使用**R_RESULTS**的原因是查看是否有任何行返回给定的用户名和密码，以验证尝试登录的用户。

谁能告诉我我做错了什么？我已经搜索了几个小时并尝试了几件事，但到目前为止还没有运气。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:28:14.967

如果您`"P_RESULTS"`是`int32`字段，请尝试将 out 参数的类型更改为 OracleDbType.Int32。

我希望它有效。

检查这篇文章。[C#：Oracle 数据类型与 OracleDbType 等价](https://stackoverflow.com/questions/1583150/c-oracle-data-type-equivalence-with-oracledbtype)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:06:44.500

解决了！

令人尴尬的是，我的问题的答案在`SelectParameters`我的`SqlDataSource`.

```
<asp:ControlParameter ControlID="txtPass" Name="P_USERPASSWORD" 
     PropertyName="Text" Type="String" /> 
```

我提供的名称`P_USERPASSWORD`不是简单的`P_PASSWORD`.

`SqlDataSource`显然，在将最初用我的 select 语句编程`SelectCommand`到它的存储过程对应物的我的切换后，我忘记了更改它。

# c# - 从变量中获取 WPF 形状的名称

> ID：15904438
> 
> 赞同：0
> 
> 时间：2013-04-09T14:17:35.387
> 
> 标签：c#, wpf

我想在函数中初始化并显示一个椭圆（WPF 形状）。椭圆的名称应该作为参数提供给函数。

有没有可能做这样的事情？

编辑：

给出以下内容：

```
private void A1_Click(object sender, RoutedEventArgs e)
    {
        textBox1.Text = "Feld A1 gedrückt";            
        //Spielstein setzen
        //Rêgeln überprüfen
        myEllipse = new Ellipse();
        myEllipse.Fill = System.Windows.Media.Brushes.Black;
        myEllipse.HorizontalAlignment = HorizontalAlignment.Left;
        myEllipse.VerticalAlignment = VerticalAlignment.Top;
        myEllipse.Margin = new Thickness(2, 2, 0, 0);
        myEllipse.Width = 45;
        myEllipse.Height = 45;
        grid3.Children.Add(myEllipse);
        A1.IsHitTestVisible = false;

    } 
```

我想要做的是从字符串变量中获取名称（“myEllipse”）。例如：

```
string name = 'myEllipse';
name = newEllipse();
myEllipse.Fill = System.Windows.Media.Brushes.Black; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:15:57.423

我从您的代码中获取它您是否正在尝试创建 Ellipse 的多个实例，然后您可以在需要时调用和修改？如果是这样，执行此操作的一种方法是创建一个列表或字典并将您创建的省略号添加到它们，然后您可以在需要时通过索引（如果它是一个列表）或键（如果它是一个字典）调用它们。

```
List<Ellipse> myEllipses = new List<Ellipse>();

Private void A1_Click(object sender, RoutedEventArgs e)
{
    var myEllipse = new Ellipse();
    myEllipses.Add(myEllipse);
    ...
} 
```

# javascript - javascript扩展指数

> ID：15904440
> 
> 赞同：0
> 
> 时间：2013-04-09T14:17:45.730
> 
> 标签：javascript, math, exponential

在这里找到这个功能

[http://jsfromhell.com/string/expand-exponential](http://jsfromhell.com/string/expand-exponential)

```
String.prototype.expandExponential = function(){
return this.replace(/^([+-])?(\d+).?(\d*)[eE]([-+]?\d+)$/, function(x, s, n, f, c){
    var l = +c < 0, i = n.length + +c, x = (l ? n : f).length,
    c = ((c = Math.abs(c)) >= x ? c - x + l : 0),
    z = (new Array(c + 1)).join("0"), r = n + f;
    return (s || "") + (l ? r = z + r : r += z).substr(0, i += l ? z.length : 0) + (i < r.length ? "." + r.substr(i) : "");
});
}; 
```

我有点得到替换部分，但是当我看到 function(x,s,n,f,c) 部分时我迷路了。我错过了什么？

有人可以帮我把它分解成更容易理解的组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:22:38.080

看到[这个页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Replace#Specifying_a_string_as_a_parameter)

基本上，`x`是匹配的子字符串。`s`对应于第一对括号 ( `([+-])`)`n`匹配的部分，对应于第二个括号 ( `(\d+)`) 匹配的部分，依此类推。

匹配的字符串被此函数返回的值替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:23:00.010

您可以将函数作为`replace()`调用的第二个参数传递。

参数列表（[来自 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)）：

*   匹配子字符串 - 在你的情况下`x`
*   n 带括号的子匹配字符串 - 在你的情况下 2:`s`和`n`
*   匹配子字符串的偏移量 - 在你的情况下`f`
*   总字符串 - 在你的情况下`c`

# c++ - OpenCV 视频捕获不加载文件

> ID：15904443
> 
> 赞同：1
> 
> 时间：2013-04-09T14:17:51.260
> 
> 标签：c++, opencv, computer-vision, video-processing

这似乎是与 OpenCV 的特殊版本有关的问题。然而，当我几乎到处搜索，特别是 StackOverFlow 时，没有找到合理的答案。

我正在尝试使用 VideoCapture 句柄在 OpenCV 中加载带有 ffmpeg 的视频文件。如果该文件是 OpenCV 示例目录中的 tree.avi 示例影片，则会加载该文件，但每个其他 avi 文件都会导致以下错误：

> 警告：打开文件时出错 (../../modules/highgui/src/cap_ffmpeg_impl.hpp:526)

hpp 文件似乎是检测到错误的文件，而不是包含错误的文件。我只能假设 ffmpeg 与 OpenCV 不兼容，或者我应该开始寻找另一个库来打开视频文件，或者我应该假设 OpenCV 仅适用于它自己的示例。如果有人有任何想法，请分享。我是否应该使用另一个库来打开所有不同类型的文件，使用编码而不是 OpenCV 的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T19:43:47.237

OpenCV 似乎具有平台依赖性，并且最好为每个平台编译，以总结我为我的问题所做的所有搜索。我对 VideoCapture 有问题，它不是来自编解码器，而是来自 OpenCV 本身。我在使用 OpenCV 时遇到了类似的问题，以至于它甚至无法打开 JPG 文件。通过重新编译它，一切都为我解决了。

对于那些不知道如何为 Visual Studio 编译 OpenCV 的人，这里有一个很好的教程： [Installing OpenCV 2.4.3 in Visual C++ 2010 Express](https://stackoverflow.com/questions/10901905/installing-opencv-2-4-3-in-visual-c-2010-express?lq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:52:00.383

**不要以为**OpenCV 使用 FFmpeg 就可以加载各种视频格式，因为**事实并非如此**。

*AVI*是一个简单的容器，可以存储各种音频/视频编解码器。[OpenCV 的页面](http://opencv.willowgarage.com/wiki/VideoCodecs)列出了它支持的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-22T08:08:31.413

在 OpenCV 2.4.4 中：只有 opencv_ffmpeg244.dll（发布 dll），没有 opencv_ffmpeg244d.dll（调试 dll）

所以尝试发布编译模式！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T16:54:05.173

您可能需要编译自己的 ffmpeg（从[这里](http://ffmpeg.mplayerhq.hu/ "这里")获取最新的快照），然后再次编译 opencv。在**配置**步骤中检查您的输出，它应该是这样的：

```
...
Video I/O--------------
Use QuickTime      no
Use xine           no
Use ffmpeg:        yes
Use v4l            yes
... 
```

# mysql - 确定一个表中的字段是否与另一个表中的字段相似，如果是，则计算出现次数，如果少于 3，则返回名称

> ID：15904445
> 
> 赞同：0
> 
> 时间：2013-04-09T14:17:55.980
> 
> 标签：mysql, select, join

我在同一个数据库中有两个表图像和交互。我想确定具有 png 文件名（例如 1001_A01_1-4_5mM_3AT_Xgal_7d_W.cropped.resized.grey.png 的 image.images 是否类似于 plate_name.Interactions 看起来像 1001_A01 然后计算图像出现的次数。如果我想返回 plate_name.Interactions 的图像少于 3 张，我应该得到 3 张图像。我想使用 1 个查询来做到这一点。

到目前为止，我只是试图计算有多少次出现，但这失败了：

```
select plate_name.Interactions, count(*) as count from Interactions where plate_name.Interactions like image.images; 
```

以下是有问题的表格：

```
mysql> desc images;
+------------+--------------+------+-----+---------+-------+
| Field      | Type         | Null | Key | Default | Extra |
+------------+--------------+------+-----+---------+-------+
| image      | varchar(100) | NO   | MUL | NULL    |       |
| user_id    | varchar(50)  | YES  |     | NULL    |       |
| project_id | varchar(50)  | YES  |     | NULL    |       |
+------------+--------------+------+-----+---------+-------+

mysql> desc Interactions;
+----------------------+-------------+------+-----+---------+-------+
| Field                | Type        | Null | Key | Default | Extra |
+----------------------+-------------+------+-----+---------+-------+
| plate_name           | varchar(25) | NO   | MUL | NULL    |       |
| plate_number         | int(11)     | NO   | MUL | NULL    |       |
| bait_sequence_name   | varchar(25) | NO   |     | NULL    |       |
| bait_gene_promoter   | varchar(25) | NO   | MUL | NULL    |       |
| array_coord          | varchar(25) | NO   |     | NULL    |       |
| transcriptor_factor  | varchar(25) | NO   |     | NULL    |       |
| orf_name             | varchar(25) | NO   |     | NULL    |       |
| y_coord              | varchar(25) | NO   | MUL | NULL    |       |
| x_coord              | varchar(25) | NO   | MUL | NULL    |       |
| orig_intensity_value | varchar(25) | NO   |     | NULL    |       |
| rc_intensity_value   | varchar(25) | NO   |     | NULL    |       |
| ptp_intensity_value  | varchar(25) | NO   |     | NULL    |       |
| z_score              | varchar(25) | NO   | MUL | NULL    |       |
| z_prime              | varchar(20) | YES  |     | NULL    |       |
| call_type            | varchar(25) | NO   |     | NULL    |       |
| bleed_over           | varchar(25) | NO   | MUL | NULL    |       |
| plate_median         | int(11)     | YES  | MUL | NULL    |       |
| bait_gene            | varchar(25) | NO   |     | NULL    |       |
| bait_prey_orf        | varchar(25) | NO   |     | NULL    |       |
| human_call           | varchar(25) | NO   |     | NULL    |       |
| modified_call        | varchar(25) | NO   |     | NULL    |       |
| duplicate_call       | varchar(25) | YES  |     | NULL    |       |
| user_id              | varchar(25) | YES  | MUL | NULL    |       |
| project_id           | varchar(25) | YES  | MUL | NULL    |       |
+----------------------+-------------+------+-----+---------+-------+ 
```

为回应鲍比的回答而添加：

```
+----+-------------+--------------+-------+---------------+--------------+---------+---    ---+---------+-----------------------------------------------------------+
| id | select_type | table        | type  | possible_keys | key          | key_len | ref  | rows    | Extra                                                     |
+----+-------------+--------------+-------+---------------+--------------+---------+---    ---+---------+-----------------------------------------------------------+
|  1 | SIMPLE      | images       | index | NULL          | image        | 208     | NULL |   19581 | Using where; Using index; Using temporary; Using filesort |
|  1 | SIMPLE      | Interactions | range | plate_median  | plate_median | 5       |   NULL | 3714984 | Using where; Using join buffer                            |
+----+-------------+--------------+-------+---------------+--------------+---------+------+---------+-----------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:51:11.090

我认为您以不正确的格式编写您的表名和列名.. 如果我是对的，查询应该只返回它少于 3 张图像的 plate_name，因此您可以使用 GROUP BY 和 HAVING 方法来完成。

```
SELECT Iteractions.plate_name, count(*) as `count`
FROM Interactions, Images
WHERE Interactions.plate_name LIKE Images.image
GROUP BY Interactions.plate_name
HAVING count(*) < 3 
```

请尝试一下，并告诉我这是否不是您想要的.. :)

# c# - 如何实现一个 git Smart HTTP 服务器

> ID：15904448
> 
> 赞同：0
> 
> 时间：2013-04-09T14:18:11.323
> 
> 标签：c#, git, protocols, smart-http

我想通过 Smart HTTP 协议实现一个 git 服务器。任何机构都可以给我一些参考文件或代码供学习。C风格的语言更好。

使用 C# 语言和 libgit2sharp 实现它是我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:26:55.490

[Git 本身](https://github.com/git/git/)是用 C 风格语言完成的参考实现。查找名称包含“http”的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:33:31.507

参见 GitAspx，使用 ASP.NET MVC razor + GitSharp，

[https://github.com/linquize/git-dot-aspx](https://github.com/linquize/git-dot-aspx)

# facebook-fql - FQL 见解表中不提供故事展示次数

> ID：15904450
> 
> 赞同：1
> 
> 时间：2013-04-09T14:18:14.653
> 
> 标签：facebook-fql, facebook-insights

我们正在尝试使用服务器端脚本为我们的 Facebook 应用程序获取一些洞察数据。问题在于，对于我们感兴趣的案例，我们在 FQL 洞察表中看不到任何有价值的数据：“故事印象”和任何“点击”。同时，统计信息可在 facebook 管理面板的应用洞察部分中获得。我们尝试了所有类型的访问令牌，但结果相同。似乎并非所有指标数据都可用于 FQL。我们做错了什么吗？有什么方法可以使用 Insights API 获取这些见解数据？

谢谢。

App ID：321206841333892 以下是我们使用的一些示例查询：

示例 FQL 请求 1：指标 post_impressions

```
Request:https://graph.facebook.com/fql
 params:Array
(
    [q] => {"post_impressions|lifetime":"SELECT metric, value, end_time, period FROM insights WHERE object_id=321206841333892 AND metric='post_impressions' AND period=period('lifetime') AND end_time<=end_time_date('2013-04-09') AND end_time>=end_time_date('2013-03-10')"}
    [access_token] =>ACCESS_TOKEN
    [method] => GET
) 
```

结果：空集。

示例 FQL 请求 2：指标 application_active_users

```
Request:https://graph.facebook.com/fql
 params:Array
(
    [q] => {"application_active_users|day":"SELECT metric, value, end_time, period FROM insights WHERE object_id=321206841333892 AND metric='application_active_users' AND period=period('day') AND end_time<=end_time_date('2013-04-09') AND end_time>=end_time_date('2013-03-10')","application_active_users|week":"SELECT metric, value, end_time, period FROM insights WHERE object_id=321206841333892 AND metric='application_active_users' AND period=period('week') AND end_time<=end_time_date('2013-04-09') AND end_time>=end_time_date('2013-03-10')","application_active_users|month":"SELECT metric, value, end_time, period FROM insights WHERE object_id=321206841333892 AND metric='application_active_users' AND period=period('month') AND end_time<=end_time_date('2013-04-09') AND end_time>=end_time_date('2013-03-10')"}
    [access_token] =>ACCESS_TOKEN
    [method] => GET
) 
```

结果：25 个重要值。

# wso2 - 来自 WSO2 ESB 的 WSO2 Message Broker 按需消息消费

> ID：15904460
> 
> 赞同：0
> 
> 时间：2013-04-09T14:18:30.887
> 
> 标签：wso2, wso2esb

我正在尝试使用 ESB 和 Message Broker 设置以下场景。

流程一：

```
Client 1 Sends the message to ESB -> ESB consumes the message and stores it into the queue -> End of flow 1; 
```

流程 2：

```
Client 2 sends a request to ESB to get messages -> ESB gets the messages from the queue defined for Client 2 -> ESB sends back a pack of message that were present in the queue 
```

虽然实现流程 1 没有问题。文档和示例涉及存储和转发模式，因此我没有看到任何关于根据客户请求消费消息的实时示例 - “存储和拉取”模型。

有人可以建议吗？

参考链接： [http ://docs.wso2.org/wiki/display/ESB460/Sample+702%3A+Introduction+to+Message+Forwarding+Processor](http://docs.wso2.org/wiki/display/ESB460/Sample+702%3A+Introduction+to+Message+Forwarding+Processor)

[http://docs.wso2.org/wiki/display/MB201/Integrating+WSO2+ESB](http://docs.wso2.org/wiki/display/MB201/Integrating+WSO2+ESB)

最好的问候，弗拉基米尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:15:47.447

可以参考这个网址：[http ://wso2.org/library/articles/2013/03/configuring-wso2-esb-wso2-message-broker](http://wso2.org/library/articles/2013/03/configuring-wso2-esb-wso2-message-broker)

我也对 Flow 2 感到震惊。我无法通过我的代理从 mesaagebroker 获取数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T09:25:20.160

首先，您需要将消息保存在队列中

```
<address uri="jms:/Queue1?transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory&amp;java.naming.factory.initial=org.wso2.andes.jndi.PropertiesFileInitialContextFactory&amp;java.naming.provider.url=tcp://localhost:5672&amp;transport.jms.DestinationType=queue&amp;java.naming.provider.url=repository/conf/jndi.properties" statistics="disable"/> 
```

您需要在存储库/conf/jndi.properties 中指定队列名称，如此处所述 [http://docs.wso2.org/wiki/display/MB201/Integrating+WSO2+ESB](http://docs.wso2.org/wiki/display/MB201/Integrating+WSO2+ESB)

然后您可以定义一个与 JMS 队列同名的代理来使用该队列

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="Queue1" transports="jms" startOnLoad="true" trace="disable" statistics="disable">
    <target inSequence="your_in_sequence" outSequence="your_out_sequence" faultSequence="your_fault_sequence"/>
    <parameter name="transport.jms.ContentType">
        <rules>
            <jmsProperty>contentType</jmsProperty>
            <default>application/xml</default>
        </rules>
    </parameter>
</proxy> 
```

您可以使用此代理服务来使用您用来保存消息的队列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T10:52:35.460

好吧，这更像是一个自定义要求。您可以使用自定义类中介器或连接器来实​​现此目的。[1]

[1] [https://docs.wso2.com/display/ESB481/Creating+a+Connector](https://docs.wso2.com/display/ESB481/Creating+a+Connector)

# ios - 辅助功能：如何始终将焦点设置在导航项的标题视图上

> ID：15904461
> 
> 赞同：7
> 
> 时间：2013-04-09T14:18:33.703
> 
> 标签：ios, accessibility, voiceover, uiaccessibility

我在我的应用程序中使用 UINavigationController。当使用 VoiceOver 时，当一个新的 ViewController 被推送时，backButton 具有焦点。

如果视图出现，我宁愿让 titleView 的accessibilityLabel 成为焦点，以便首先读取它的accessibilityLabel。

当我第一次创建并推送视图控制器时，使用`UIAccessibilityPostNotification(UIAccessibilityScreenChangedNotification, self.navigationItem);`titleView 似乎是重点。但是当我从另一个视图控制器（推到第一个）回来时，焦点再次在后退按钮上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T10:06:14.790

我应该设置titleView 的accessibilityLabel，而不是navigationItem。以下作品：

```
- (void) viewDidLoad
{
   ...
   self.navigationItem.titleView.accessibilityLabel = @"[text-to-speak]";
}
- (void) viewDidAppear
{
  [super viewDidAppear];       
  UIAccessibilityPostNotification(UIAccessibilityScreenChangedNotification, self.navigationItem.titleView);
} 
```

# c# - xaml 中定义的 Silverlight 控件在运行时为空

> ID：15904463
> 
> 赞同：2
> 
> 时间：2013-04-09T14:18:40.083
> 
> 标签：c#, silverlight, xaml, nullpointerexception

我制作了一个名为的用户控件`Section`，它有 2 个自定义`DependencyProperty`：标题和元素（有点像内容）。我`Section`在几个页面上使用过它在每个页面上都显示得很好。

以下 xaml 代码是我的`AccountView`课程的一部分

```
 <Controls:Section Title="Epic Movies" Grid.Column="1" Grid.Row="1" x:Name="DescriptionSection" Visibility="Collapsed">
        <Controls:Section.Elements>
            <StackPanel>
                <TextBlock Style="{StaticResource FrameLabel}" Text="Description:" Grid.Column="1"/>
                <TextBlock x:Name="DescriptionField" Style="{StaticResource FrameText}" Text="some text..." Grid.Column="1" Grid.Row="1"/>
                <TextBlock Text="Products:" Style="{StaticResource FrameLabel}"/>
                <ScrollViewer Margin="12,0" VerticalScrollBarVisibility="Auto" MaxHeight="180">
                    <StackPanel x:Name="ProductList"/>
                </ScrollViewer>
                <TextBlock Style="{StaticResource FrameLabel}" Text="Category"/>
                <TextBlock x:Name="CategoryField" Style="{StaticResource FrameText}" Text="some category"/>
                <TextBlock Style="{StaticResource FrameLabel}" Text="Views:"/>
                <TextBlock x:Name="ViewsField" Style="{StaticResource FrameText}" Text="12322 Views"/>
                <TextBlock Style="{StaticResource FrameLabel}" Text="Price:"/>
                <TextBlock x:Name="PriceField" Style="{StaticResource FrameText}" Text="455$"/>
                <Button Content="Go to Module" Grid.Column="1" FontSize="15" Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="20,15"/>
            </StackPanel>
        </Controls:Section.Elements>
    </Controls:Section> 
```

**当我尝试在 c# 代码中设置我的 TextBlocks 的文本时，所有 TextBlock 都为空**

```
 private void ShowModuleInformation(Module m)
    {
        DescriptionSection.Title = m.Name;
        //DescriptionField is null even though clearly defined in xaml
        DescriptionField.Text = m.Description;
        PriceField.Text = m.Price + "";
        ViewsField.Text = m.views+"";
        CategoryField.Text = m.Category.Name;
        foreach (Product p in m.Products)
        {
            TextBlock t = new TextBlock() { Text = p.Name };
            ProductList.Children.Add(t);
        }

        DescriptionSection.Visibility = Visibility.Visible;
    } 
```

我的 Section c# 类如下所示：

```
 public partial class Section : UserControl
{
    public static readonly DependencyProperty TitleProperty = DependencyProperty.Register(
        "Title", typeof(string), typeof(Section), new PropertyMetadata(new PropertyChangedCallback(TitleChanged)));
    public static readonly DependencyProperty ElementsProperty = DependencyProperty.Register(
        "Elements", typeof(UIElement), typeof(Section), new PropertyMetadata(new PropertyChangedCallback(ElementsChanged)));

    public Section()
    {
        InitializeComponent();
    }

    public string Title
    {
        get { return (string)GetValue(TitleProperty); }
        set { SetValue(TitleProperty, value); }
    }

    public UIElement Elements
    {
        get { return (UIElement)GetValue(ElementsProperty); }
        set { SetValue(ElementsProperty, value); }
    }

    private static void TitleChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var sec = (Section)d;
        if (sec != null)
        {
            sec.TitleField.Text = (string)e.NewValue;
        }
    }

    private static void ElementsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        Section sec = (Section)d;
        if (sec != null)
        {
            sec.ElementPanel.Content = (UIElement)e.NewValue;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:43:00.657

我在[这个线程](https://stackoverflow.com/questions/6355217/xname-not-working-if-element-wrapped-in-usercontrols-content-silverlight)的帮助下解决了这个问题。我需要做的就是做`Section`派生`ContentControl`而不是`User Control`

# c# - 如何避免“SamlAssertion.NotOnOrAfter 条件不满足”错误

> ID：15904480
> 
> 赞同：2
> 
> 时间：2013-04-09T14:19:11.510
> 
> 标签：c#, jquery, saml, claims-based-identity, ws-federation

最近，我开始在现有的 Web 应用程序上使用基于声明的身份验证。因为应用程序使用了 jQuery 和更显着的 AJAX 函数，所以我不得不更改处理程序以不尝试重定向`XmlHTTPRequests`，而是返回更容易处理的 403 状态。

这是`FederatedAuthentication.WSFederationAuthenticationModule.AuthorizationFailed`事件处理程序：

```
 protected void WSFederationAuthenticationModule_AuthorizationFailed(object sender, AuthorizationFailedEventArgs e)
    {
        //WSFederationAuthenticationModule sam = (WSFederationAuthenticationModule)sender;

        HttpContext context = HttpContext.Current;
        HttpRequest req = context.Request;
        HttpResponse resp = context.Response;

        if (req == null || resp == null) return;

        if ((resp.StatusCode == 302 || resp.StatusCode == 401) && req.Headers["X-Requested-With"] == "XMLHttpRequest")
        {
            resp.StatusCode = 403;
            e.RedirectToIdentityProvider = false;
        }

    } 
```

我有以下实现 AJAX 调用并处理响应的模式：

```
$.ajax({
cache: false,
data: $.param(o),
dataType: "xml",
url: "AJAXCall.ashx",
success: function (data)
{
    // Success handler
},
error: function (XMLHttpRequest, textStatus, responseText)
{
    if (XMLHttpRequest.status == 403)
    {
        var retVal = window.showModalDialog("Session.aspx", "", "dialogHeight: 250px; dialogWidth: 250px; edge: Raised; center: Yes; resizable: Yes; status: Yes;");
        if (retVal)
        {
            // Succesful session renewal handler
        }
        else
        {
            // Session renewal failure handler
        }
    }
    else
    {
        // Other errors handler
    }
}
}); 
```

如果“Session.aspx”成功重定向到身份提供者并返回，则“Session.aspx”基本上会关闭返回值为 true 的模式对话框。

但我的问题是我收到以下错误：

> *“ID4223：SamlSecurityToken 被拒绝，因为不满足 SamlAssertion.NotOnOrAfter 条件。”*

这是在模拟当前应用程序用户的子系统上调用的，显然前一个会话的令牌仍然存在。我的应用程序的 web.config 中有以下设置：

```
<federatedAuthentication>
<wsFederation passiveRedirectEnabled="true" persistentCookiesOnPassiveRedirects="true" issuer="https://adfs.example.com/adfs/ls/" realm="https://www.example.com:449/" requireHttps="true" />
<cookieHandler requireSsl="true" /> 
```

如何避免此错误？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:28:09.200

下面的`FederatedAuthentication.WSFederationAuthenticationModule.SignInError`事件处理方法解决了这个问题：

```
 protected void WSFederationAuthenticationModule_SignInError(object sender, ErrorEventArgs e)
    {
        // handle an intermittent error that most often occurs if you are redirected to the STS after a session expired,
        // and the user clicks back on the browser - second error very uncommon but this should fix
        if (e.Exception.Message.StartsWith("ID4148") ||
            e.Exception.Message.StartsWith("ID4243") ||
            e.Exception.Message.StartsWith("ID4223"))
        {
            FederatedAuthentication.SessionAuthenticationModule.DeleteSessionTokenCookie();
            e.Cancel = true;
        }
    } 
```

即使在会话过期后用户被重定向到 STS 服务之后，它也会删除持续存在的会话令牌 Cookie。

# iis - IIS 7.5 URL 重写规则来处理基于用户代理的请求

> ID：15904482
> 
> 赞同：5
> 
> 时间：2013-04-09T14:19:14.517
> 
> 标签：iis, url-rewriting, url-rewrite-module

我已经编写了一个规则来基于用户代理重定向请求。该规则设置为将默认请求（非移动）重定向到`Domain1`移动设备和来自移动设备的请求到移动域，`Domain2`.

即使在应用了移动重定向之后，来自移动设备的所有请求都会被带到`Domain1`.

请参阅下面的重定向规则。谁能告诉我我错过了什么？

```
<rewrite>
  <rules>
    <rule name="Mobile UA redirect" enabled="true" stopProcessing="true">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_USER_AGENT}" pattern="^.*BlackBerry.*$ " />
        <add input="{HTTP_USER_AGENT}" pattern=".*Mobile.*Safari" />
      </conditions>
      <action type="Redirect" url="Domain2" />
    </rule>
    <rule name="Claritinchallenge to" enabled="true" stopProcessing="true">
      <match url="(.*)" />
      <action type="Redirect" url="Domain1" appendQueryString="false" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T15:20:33.047

在您的`Mobile UA redirect`规则中，条件逻辑分组是默认情况下的一个：`MatchAll`

我不认为有`HTTP_USER_AGENT`匹配的手机`^.*BlackBerry.*$`也会匹配`.*Mobile.*Safari`。因此，您需要将逻辑分组更改为`MatchAny`.

您的规则将是：

```
<rule name="Mobile UA redirect" enabled="true" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAny">
    <add input="{HTTP_USER_AGENT}" pattern="^.*BlackBerry.*$ " />
    <add input="{HTTP_USER_AGENT}" pattern=".*Mobile.*Safari" />
  </conditions>
  <action type="Redirect" url="MobileURL" />
</rule> 
```

# version-control - CVS - 我的工作副本在哪个分支查看？

> ID：15904485
> 
> 赞同：0
> 
> 时间：2013-04-09T14:19:16.243
> 
> 标签：version-control, branch, cvs

我有一些 CVS WC，今天，我查看了一个以确保存在这样那样的代码，但在我告诉我的同事没关系之前，我需要确保我正在查看正确的分支。

在某处我读到这`cvs log`是正确的方法，所以我`cvs log [filename]`和它列出了项目中的所有分支，但我不确定如何查看我目前使用的分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:44:56.437

你想做一个`cvs status`，看看`Sticky Tag:`行。括号中应该有一个分支。

抱歉，我无法为您捕获输出，幸好我接触 CVS 已经快十年了。

# delphi - THidepanel @ 运行时

> ID：15904486
> 
> 赞同：0
> 
> 时间：2013-04-09T14:19:22.640
> 
> 标签：delphi

我已经为编写允许在此处隐藏组件的组件找到了很多帮助（[THIDEPANEL](https://stackoverflow.com/questions/15856305/2-x-thidepanel-with-tsplitter-issue%20%29)。现在我遇到了第一个问题：

在`OnCreate`这个类的事件中，我采用面板的宽度和高度，我想在隐藏/取消隐藏面板时恢复到原始值。实际上隐藏过程总是减小面板的大小

```
constructor THidePanel.Create(AOwner: TComponent);
begin
  inherited;

  // The inner panel
  WorkingPanel := TPanel.Create(Self);
  WorkingPanel.Caption := '***';

  // The hide unhide
  FActivateButton := TButton.Create(Self);
  FActivateButton.Parent := self;
  FActivateButton.Caption := '<';
  FActivateButton.OnClick := H_ActivateButtonClick;
  FActivateButton.Width := BoarderSize;
  FActivateButton.Height := BoarderSize;
  WorkingPanel.Caption := '';

  // Grab the size of the hide panel, later restore to this values
  FLargeWidth := Self.Width;
  FLargeHeight := Self.Height;

  SetButtonPosition(TopRight);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:38:53.127

这是因为`FLargeWidth`私有字段的值无效。您在构造函数期间分配它`Self.Width`（并且您可能永远不会更新它）。这*不是*您在设计时或运行时设置的宽度，而是来自 的硬编码宽度`TCustomPanel.Create`，即`185`. 请注意，当控件的构造函数运行时，控件尚未放置。

如果你想*记住*设置的宽度，那么你应该“覆盖`TControl.SetWidth`”。但是由于该方法是私有的（不是虚拟的），因此您需要覆盖`SetBounds`或`Resize`以响应`Width`'s 的更改。我会选择后者，可能还有一个附加条件：

```
procedure THidePanel.Resize;
begin
  if not HasCustomWidth then  //< Replace this with your own logic condition
    FLargeWidth := Width;
  inherited Resize;
end; 
```

# php - 如何使用 name="image[ ]" 进行简单的多文件上传

> ID：15904489
> 
> 赞同：1
> 
> 时间：2013-04-09T14:19:35.940
> 
> 标签：php, file-upload

我是新手`php`，想询问有关使用`name="image[]"`. 这是我的代码：

* * *

**HTML**

```
<form action="" method="post" enctype="multipart/form-data">
  <input type="file" name="image[]" multiple="multiple"/>
  <input type="submit" name="submit"/>
</form> 
```

**PHP**

```
<?php

    $table_name ="posts";

    $_POST['submit'];
    $title = $_POST['title'];
    $cat_id = $_POST['cat_id'];
    $date = date('Y-m-d', strtotime($_POST['date']));
    $description = mysql_real_escape_string($_POST['description']);
    $status = $_POST['status'];

    $sql = "INSERT INTO $table_name (title,cat_id,date,description,status) VALUES ('$title','$cat_id','$date','$description','$status')";
    $result = mysql_query($sql);                
    $sqlImage = mysql_fetch_array(mysql_query("SELECT id FROM $table_name ORDER BY id DESC "));
    $parentId = $sqlImage['id'];
    foreach ($_POST['image'] as $images) {
        $resImage = mysql_query("INSERT INTO media (parent_id,image) VALUES ('$parentId','$images') ");
    }
    $_SESSION['add_content'] = true;    

   echo ' <script>location.href="'.$base_url.''.$table_name.'"</script>';

?> 
```

如何输入我的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:27:10.290

首先，`$_POST['submit']`目前没有做任何事情。其次，上传文件需要您使用`$_FILES`而不是`$_POST`.

这应该可以上传所有文件

```
foreach($_FILES['image'] as $file)
{
    //do something with the data
} 
```

[**PHP手册：`$_FILES`**](http://php.net/manual/en/reserved.variables.files.php)
希望这会有所帮助！

# javascript - Telerik MVC Grid - 自定义过滤（客户端）

> ID：15904491
> 
> 赞同：0
> 
> 时间：2013-04-09T14:19:40.957
> 
> 标签：javascript, model-view-controller, filter, telerik, grid

我想在我的 Telerik MVC 网格中进行自定义客户端过滤。这意味着当用户单击列上的过滤器图标时，我会调用自定义的 JavaScript 代码，而不是 Telerik 的默认过滤器。我该怎么做呢？

谢谢

哈盖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T15:33:10.150

我知道这已经晚了，但我最近不得不在同一区域进行一些修改。我的建议是查看 teleik.grid.filtering.js。您将在那里找到呈现过滤弹出窗口的所有代码，所以从那里开始您的修改

# windows-phone-7 - 使用 VS2012 将 WP7 项目升级到 WP8 时出错

> ID：15904492
> 
> 赞同：0
> 
> 时间：2013-04-09T14:19:45.233
> 
> 标签：windows-phone-7, visual-studio-2012, windows-phone-8, windows-phone, upgrade

当我尝试使用 VS2012 内置功能“升级到 Windows Phone 8.0”将我当前的 WP7 项目升级到 WP8 版本时

我收到一条错误消息：

> 无法完成对项目的升级。对象引用未设置为实例对象。

这个错误几乎没有有用的信息，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:21:09.347

如果您想在 WP 8 设备上运行应用程序，您可能会遇到 HTC 设备上的屏幕分辨率问题。最好的方法是创建新的 WP 8 项目并共享（添加为链接）您的 WP7 项目的大部分 .cs 和 .xaml 文件。我是在文章[http://www.developer.nokia.com/Community/Wiki/Maintaining_a_WP7_and_WP8_version_of_a_same_Silverlight_application](http://www.developer.nokia.com/Community/Wiki/Maintaining_a_WP7_and_WP8_version_of_a_same_Silverlight_application)的指导下完成的。 祝你好运！

# c++ - 用函数c ++填充指针数组

> ID：15904496
> 
> 赞同：0
> 
> 时间：2013-04-09T14:20:02.583
> 
> 标签：c++, arrays, function, pointers

您好，我已经创建了一个类`gabka`和一个函数`f1`，我想向其传递一个指针数组以用`gabka`对象填充这个数组，但我得到了奇怪的错误。如何纠正它？

错误：

```
cannot convert from gabka to int 
```

编码 ：

```
#include <iostream>
using namespace std;
const int n = 4;
class gabka {
public:
    float woda;

    gabka(){
        woda = 0;
    }

void f1(gabka t[n]){
        for(int i = 0; i < n; i++){
            t[i] = new gabka();
        }
    }
};

int main() {
    gabka** t = new gabka*[n];

    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:23:09.363

您的`f1`函数需要一个对象数组`gabka`，并且您试图为`gabka*`每个对象分配一个。你需要决定你想要传递给什么`f1`。例如，

```
void f1(gabka t[n]){
    for(int i = 0; i < n; i++){
        t[i] = gabka(); // assign default constructed gabkas
    }
} 
```

或者

```
void f1(gabka* t[n]){
    for(int i = 0; i < n; i++){
        t[i] = new gabka();
    }
} 
```

在后一种情况下，请记住您必须`delete`调用`t`.

目前尚不清楚您打算如何处理您的代码，但作为一般规则，在 C++ 中您应该避免原始指针和手动动态分配。更喜欢标准库容器而不是动态分配数组或动态分配对象的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:24:05.407

```
t[i] = new gabka(); 
```

`t`是 的数组`gabka`，而不是 的数组`gabka*`。

要么将声明更改`t`为 的数组，要么用实例`gabka*`填充它。`gabka`

# html - 元素可以在 bem 中包含块吗

> ID：15904500
> 
> 赞同：9
> 
> 时间：2013-04-09T14:20:12.137
> 
> 标签：html, css, oocss, bem

有人告诉我，我写下面的代码是错误的。我想元素不能包含块及其坏bem

```
<ul class="b-nav">

    <li class="b-nav__item">

         <a href="#" class="b-nav__item__link"> Item </a>

     </li>

 </ul> 
```

我想过这样写，但它也没有显示层次结构。

```
<ul class="b-nav">

    <li class="b-nav__item">

         <a href="#" class="b-nav__link"> Item </a>

     </li>

 </ul> 
```

这是另一种方式，但对我来说它似乎比上面的例子更糟糕。

```
<ul class="b-nav">

    <li class="b-nav__item">

         <a href="#" class="b-link"> Item </a>

     </li>

 </ul> 
```

我最初编码的方式是错误的吗？如果是这样，为什么，最好的选择是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-17T07:30:59.547

您应该使用第二个或第三个样本。

或者你可以使用这个（它使用 BEM 混合；我们用俄语[讨论](http://clubs.ya.ru/yasubbotnik/replies.xml?item_no=682)过这个）。这很有帮助，然后您需要从 javascript 代码中访问`link`elem 。`b-nav`

```
<ul class="b-nav">

    <li class="b-nav__item">

         <a href="#" class="b-nav__link b-link"> Item </a>

     </li>

 </ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T17:38:48.900

我认为将其命名为 nav_*链接比 nav* _item__link 更受欢迎，即使链接属于某个项目。也许我正在做的事情是为了展示这种等级制度而过分夸大。最后，两者属于同一个区块。

我在下面每个链接的评论中看到了一些示例

[https://github.com/csswizardry/inuit.css/issues/155](https://github.com/csswizardry/inuit.css/issues/155)

[http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/](http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-13T01:15:46.330

“BEM 方法不建议在元素中使用元素。” - 就是这样，仅此而已，仅此而已。

关于基本的命名结构，[Smashing Mag](http://coding.smashingmagazine.com/2012/04/16/a-new-front-end-methodology-bem/)有一个很棒的树形图，展示了如何做到这一点：

```
<b:page>
  <b:head>
    <b:menu>
      ...
    </b:menu>
    <e:column>
      <b:logo/>
    </e:column>
    <e:column>
      <b:search>
        <e:input/>
        <e:button>Search</e:button>
      </b:search>
    </e:column>
    <e:column>
      <b:auth>
        ...
      </b:auth>
    <e:column>
  </b:head>
</b:page> 
```

在以下 JSON 格式中可以很好地转换：

```
 {
  block: 'page',
  content: {
    block: 'head',
    content: [
      { block: 'menu', content: ... },
      {
        elem: 'column',
        content: { block: 'logo' }
      },
      {
        elem: 'column',
        content: [
          {
            block: 'search',
            content: [
              { elem: 'input' },
              {
                elem: 'button',
                content: 'Search'
              }
            ]
          }
        ]
      },
      {
        elem: 'column',
        content: {
          block: 'auth',
          content: ...
        }
      }
    ]
  }
} 
```

我个人建议使用您的第二个版本 - 在第三个版本中， ul 和 a 标签之间的关系/依赖关系未在类命名中表示。好吧，可能您在过去 2 年中已经解决了这个问题，但也许同样迷失在正确 BEM 语法中的人会发现这个答案很有用......

# javascript - 如何使用 javascript 授权 facebook 应用程序

> ID：15904505
> 
> 赞同：2
> 
> 时间：2013-04-09T14:20:28.007
> 
> 标签：javascript, facebook, facebook-graph-api

我创建了这个简单的代码：

```
FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        alert('connected');// connected

      } else if (response.status === 'not_authorized') {

      alert('not_authorized');// not_authorized

      } else {
        alert('not_logged_in');// not_logged_in
        login();
      } 
```

这是登录功能，但如果我在 not_autohized 部分使用 login()，窗口会出现并立即关闭（自动）

```
function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected            
        } else {
            // cancelled
        }
    });
} 
```

但是如何在javascript中授权应用程序？

这是我的完整代码： http: [//pastebin.com/Qv9ayb9V](http://pastebin.com/Qv9ayb9V)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:25:53.137

根据您更新的信息进行更新，现在它是在黑暗中拍摄...

您可能已经验证了您的应用程序？并登录到 facebook。

尝试访问 facebook.com 并注销。（或使用 FB.logout()）然后重新登录到您的站点。您应该需要在弹出窗口中登录

* * *

Facebook 在其网站上提供分步指南，解释如何执行此操作。

[https://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)

你定义`login`函数了吗？它不是由 facebook 提供的：

```
function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
        } else {
            // cancelled
        }
    });
} 
```

FB.login 需要一个带有一些配置选项的附加参数：一个是`scope`

`{scope: 'email,publish_actions'}`

```
 function login() {
        FB.login(function(response) {
            if (response.authResponse) {
                // connected
            } else {
                // cancelled
            }
        }, {scope: 'email,publish_actions'});
    } 
```

# matlab - 在结构的单元格数组中查找值

> ID：15904507
> 
> 赞同：2
> 
> 时间：2013-04-09T14:20:30.863
> 
> 标签：matlab, struct, cell

我有两个带有结构的单元格数组。

例子：

```
xmlFB =
第 1 至 5 列
[1x1 结构] [1x1 结构] [1x1 结构] [1x1 结构] [1x1 结构]xml链接 =
第 1 至 3 列
[1x1 结构] [1x1 结构] [1x1 结构]

xmlFB{1}
答案=

 Param: {[1x1 struct]  [1x1 struct]}
InterChartConnection: [1x1 struct]
               Tasks: [1x1 struct]
          Attributes: [1x1 struct]

xmllink{1}
ans = 
          Attributes: [1x1 struct] 
```

在“ **xmllink** ”中有结构“ **Attributes** ”，其中有字段“ **Name** ”，值为“ **EN1** ”

并且在结构“**属性”中的****xmlFB**中有两个字段“**名称**”和“类型”

 **名称是独一无二的。

我想做的是从“ **xmllink** ”中的名称中找到“ **xmlFB ”中的“** **Typ** ”。

 ****首先我想做一个循环，但是我从 Matlab 中读到了这些 arrayfun/structfun/cellfun 函数。

有没有办法用这些来做到这一点？还是循环更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:37:10.203

假设 Names 和 Typ 中的所有变量都是字符串。（也应该适用于标量。）

以下是如何将值放入元胞数组并将它们链接起来。

```
% create cell arrays
xmllinkname = cellfun(@(x) x.Attributes.Name, xmllink, 'UniformOutput',0);
xmlFBname = cellfun(@(x) x.Attributes.Name, xmlFB, 'UniformOutput',0);
xmlFBtyp = cellfun(@(x) x.Attributes.Typ, xmlFB, 'UniformOutput',0);

% match names
[idx1, idx2] = ismember(xmllinkname,xmlFBname);
idx2(idx2==0)=[]; % in case some names in xmllink absent in xmlFB

% get matched names and typ
xmllinknamematched = xmllinkname(idx1);
xmllinktyp = xmlFBtyp(idx2); 
```

由于第一个元胞数组中的值顺序与原始结构元胞数组中的值顺序相同，因此您也可以使用这些索引`idx1`并`idx2`匹配结构。

```
xmllinkmatched = xmllink(idx1);
xmlFBmatched = xmlFB(idx2); 
```

当然，您可以避免创建临时数组并将前两条`cellfun`语句放入`ismember`语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:01:32.983

使用循环。

首先要做的事情是：只有当它实际上是一个问题时才开始担心性能，并且只有***在***你做对了之后。

现在，如果我对您的理解正确，这里通常有两种方法可以完成您想要的：

```
% create some bogus data with the same structure
% ---------------------------

f_xmllink = @(N) struct(...
    'Attributes', struct(...
        'Name', num2str(N))...
);

f_xmlFB = @(N) struct(...
    'Attributes', struct(...
        'Name', num2str(N),...
        'Typ' , num2str(N))...
);

% using numbers as names
xmllink = {
    f_xmllink(190)
    f_xmllink(331) % 2
    f_xmllink(321) % 3
    f_xmllink(239) 
};

xmlFB = {
    f_xmlFB(331) % 1
    f_xmlFB(200)
    f_xmlFB(108)
    f_xmlFB(321) % 4
    f_xmlFB(035)
};

% Example of a no-loop approach
% ---------------------------

tic

s_exp   = @(s, field) [s.(field)];
s_exp_C = @(s, field) {s.(field)};

one = s_exp_C(s_exp( [xmllink{:}], 'Attributes'), 'Name');
two = s_exp_C(s_exp( [xmlFB{:}], 'Attributes'), 'Name');

[i,j] = find(strcmp(repmat(one,numel(two),1), repmat(two,numel(one),1).'));

s_exp_C(s_exp([xmlFB{i}], 'Attributes'), 'Typ')

toc

% Example of a loop approach
% ---------------------------

tic

for ii = 1:numel(xmllink)

    S = [xmlFB{:}];
    S = [S.Attributes];
    S = {S.Name};

    ind = strmatch(xmllink{ii}.Attributes.Name, S);
    if ~isempty(ind)
        xmlFB{ind}.Attributes.Typ
    end

end

toc 
```

输出：

```
% no-loop 
ans = 
    '331'    '321'  % correct findings

Elapsed time is 0.001103 seconds.   

% loop
ans =
   331      % correct findings
ans =
   321

Elapsed time is 0.000666 seconds. % FASTER! 
```

当然，比较性能并不是一个公平的测试，但我想每个人都会同意循环版本至少不会比非循环版本*慢。*

更重要的是，速度并不是一切——您花了多长时间才了解无环路解决方案？您很可能一口气就理解了循环解决方案，而无循环解决方案要复杂得多，并且必须彻底记录和测试等。此外，对无循环解决方案的更改将比在循环解决方案。

在 Matlab 中不使用循环的建议已经完全过时了。请忽略它:)******

# wpf - 绑定到元素位置不起作用？

> ID：15904519
> 
> 赞同：0
> 
> 时间：2013-04-09T14:21:03.637
> 
> 标签：wpf, c#-4.0

我有一张带有不透明蒙版的图像，并希望增加调整/重新定位该不透明蒙版的可能性。我是一个完整的 WPF 新手，所以可能想法是完全错误的，请随时向我提出任何想法:)

所以我有这个：

```
<Canvas Name="MainCanvas">
    <Rectangle Width="197.016" Height="120.896" Canvas.Left="76.119" Canvas.Top="73.134" Name="SelectionRectangle"></Rectangle>
    <Image Source="Chrysanthemum.jpg" Width="{Binding ActualWidth, ElementName=MainCanvas, Mode=OneWay}" Height="{Binding ActualHeight, ElementName=MainCanvas, Mode=OneWay}">
        <Image.OpacityMask>
            <RadialGradientBrush MappingMode="Absolute" 
                                 Center="{Binding ElementName=SelectionRectangle, Converter={StaticResource RectangleConverter}}" 
                                 GradientOrigin="{Binding ElementName=SelectionRectangle, Converter={StaticResource RectangleConverter}}" 
                                 RadiusY="{Binding ElementName=SelectionRectangle, Path=ActualHeight, Converter={StaticResource MathConverter}, ConverterParameter=@VALUE/2}" 
                                 RadiusX="{Binding ElementName=SelectionRectangle, Path=ActualWidth, Converter={StaticResource MathConverter}, ConverterParameter=@VALUE/2}">
                <GradientStop Color="#7C15161F" Offset="1" />
                <GradientStop Color="#FF40499E" Offset="0.999" />
                <GradientStop Color="#FF182395" Offset="0" />
            </RadialGradientBrush>
        </Image.OpacityMask>
    </Image>
</Canvas> 
```

所以有带有 RadialGradientBrush 蒙版的图像，我正在尝试使用此转换器将 RadialGradientBrush 中心绑定到矩形中心：

```
public class RectangleConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var rectangle = (Rectangle)value;
        return new Point(Canvas.GetLeft(rectangle) + rectangle.ActualWidth / 2f, Canvas.GetTop(rectangle) + rectangle.ActualHeight / 2f);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

一切都编译并运行，但工作不正确，我猜是因为当 Rectangle 位置更改时，RadialGradientBrush Center 绑定不知道这一点（至少转换器中的断点不会被更改矩形位置所击中）。解决此问题的最简单/推荐的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:47:38.417

我发现，Multibinding可以解决这个问题：

```
 <Canvas Name="MainCanvas">
    <Rectangle Width="197.016" Height="120.896" Canvas.Left="76.119" Canvas.Top="73.134" Name="SelectionRectangle"></Rectangle>
    <Image Source="Chrysanthemum.jpg" Width="{Binding ActualWidth, ElementName=MainCanvas, Mode=OneWay}" Height="{Binding ActualHeight, ElementName=MainCanvas, Mode=OneWay}">
        <Image.OpacityMask>
            <RadialGradientBrush MappingMode="Absolute"                                                                                                                                                                                          
                                 RadiusY="{Binding ElementName=SelectionRectangle, Path=ActualHeight, Converter={StaticResource MathConverter}, ConverterParameter=@VALUE/2}" 
                                 RadiusX="{Binding ElementName=SelectionRectangle, Path=ActualWidth, Converter={StaticResource MathConverter}, ConverterParameter=@VALUE/2}">                    
                <RadialGradientBrush.Center>
                    <MultiBinding Converter="{StaticResource RectangleConverter}">
                        <Binding ElementName="SelectionRectangle" Path="(Canvas.Left)"></Binding>
                        <Binding ElementName="SelectionRectangle" Path="ActualWidth"></Binding>
                        <Binding ElementName="SelectionRectangle" Path="(Canvas.Top)"></Binding>
                        <Binding ElementName="SelectionRectangle" Path="ActualHeight"></Binding>
                    </MultiBinding>
                </RadialGradientBrush.Center>
                <RadialGradientBrush.GradientOrigin>
                    <MultiBinding Converter="{StaticResource RectangleConverter}">
                        <Binding ElementName="SelectionRectangle" Path="(Canvas.Left)"></Binding>
                        <Binding ElementName="SelectionRectangle" Path="ActualWidth"></Binding>
                        <Binding ElementName="SelectionRectangle" Path="(Canvas.Top)"></Binding>
                        <Binding ElementName="SelectionRectangle" Path="ActualHeight"></Binding>
                    </MultiBinding>
                </RadialGradientBrush.GradientOrigin>
                <GradientStop Color="#7C15161F" Offset="1" />
                <GradientStop Color="#FF40499E" Offset="0.999" />
                <GradientStop Color="#FF182395" Offset="0" />
            </RadialGradientBrush>
        </Image.OpacityMask>

    </Image>
</Canvas> 
```

和转换器：

```
 public class RectangleConverter : IMultiValueConverter
{
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return new Point((double)values[0] + (double)values[1] / 2d, (double)values[2] + (double)values[3] / 2d);            
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

不确定我是否正确，但我的解释是 - 有问题我绑定到整个对象，所以它不是依赖属性，所以掩码没有收到有关更改的通知。现在多重绑定让我们指定哪些属性是有趣的，并且当它们中的任何一个发生变化时，值转换器会收到通知。

# android - Android：在创建活动时退出活动

> ID：15904521
> 
> 赞同：0
> 
> 时间：2013-04-09T14:21:09.743
> 
> 标签：android, android-activity, oncreate

假设我有这样的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_msmap);
    setUpMapIfNeeded();
    if (mMap == null) {
      return;
    } 
```

在我开始活动之前，我已经检查了谷歌地图库是否可用。但是，如果没有 SIM 卡/互联网连接，mMap 仍然返回 null。

有人会认为这是可行的，因为谷歌地图/谷歌播放实际上显示了一个带有“不可用”的错误，并带有一个确定按钮。但是如果点击它，应用程序就会挂起......

因此，当 mMap == null 时，我想简单地退出显示错误的活动构造函数，然后返回到先前的活动。有没有办法以某种方式优雅地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:26:11.427

调用`finish()`将退出`Activity`.

```
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_msmap);
  setUpMapIfNeeded();
  if (mMap == null) {
    finish();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:26:27.333

在活动中调用怎么样`finish()`，例如

```
if (mMap== null){
    finish();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:26:33.800

`finish()`当你想退出时尝试调用：

```
 if (mMap == null) {
    finish();
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T16:47:51.783

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_msmap);
    setUpMapIfNeeded();
    if (mMap == null) {
        AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(this);
        dlgAlert.setMessage("Whatever your error is");
        dlgAlert.setTitle("Title");
        dlgAlert.setPositiveButton("Ok",
            new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            finish();
            }
        });
        dlgAlert.create().show();
    }
} 
```

# ios - SQLite3 库例程调用乱序

> ID：15904522
> 
> 赞同：3
> 
> 时间：2013-04-09T14:21:17.860
> 
> 标签：ios, objective-c, sqlite

下面的代码给了我一个*称为乱序*错误的库例程，但我无法解释问题出在哪里。有任何想法吗 ？

```
- (BOOL)insertProduct:(Product *)product inOrder:(Order *)order withAmount:(int)amount
    {
        BOOL ok = NO;
        sqlite3_stmt *statement;

        const char *dbpath = [_databasePath UTF8String];

        if (sqlite3_open(dbpath, &_database) == SQLITE_OK)
        {
            NSString * insertSQL;
            int amount = [self getAmountForProduct:product inOrder:order];
            NSLog(@"%i", amount);

            if (amount != -1)
            {
                insertSQL = [NSString stringWithFormat: @"UPDATE ARTICOLIPERORDINE SET quantita = %i WHERE ordine = %i AND articolo = '%@'", amount, order.idOrdine, product.codice];
            }
            else
            {
                insertSQL = [NSString stringWithFormat: @"INSERT INTO ARTICOLIPERORDINE (ordine, articolo, quantita) VALUES(%i, '%@', %i)",order.idOrdine, product.codice, 1];
            }

            NSLog(@"%@", insertSQL);
            const char *insert_stmt = [insertSQL UTF8String];

            if (sqlite3_prepare_v2(_database, insert_stmt, -1, &statement, NULL) == SQLITE_OK)
            {
                if (sqlite3_step(statement) == SQLITE_DONE)
                {
                    ok = YES;
                }
                else
                {
                    ok = NO;
                    NSLog(@"sqlite3 ERROR %s: %@",sqlite3_errmsg(_database), insertSQL);
                }

                sqlite3_finalize(statement);
                sqlite3_close(_database);
            }
            else
            {
                NSLog(@"Error prepare = %s", sqlite3_errmsg(_database));
            }

        }

        return ok;
    } 
```

日志打印*错误准备 = 库例程调用乱序*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-06T06:22:19.713

我有一种方法。在此之前，请确保您已完成所有 sql 查询，例如连接打开、关闭、完成等。

> 在将查询实际运行到代码中之前，在任何数据库浏览器中执行该查询，您将看到查询中缺少什么。

就我而言，我错误地将列名放在查询中并运行代码，但我多次收到错误。我仔细检查了所有代码并在数据库浏览器中执行查询，我发现了我的错误。

# c - 数组值的频率

> ID：15904526
> 
> 赞同：0
> 
> 时间：2013-04-09T14:21:35.683
> 
> 标签：c, arrays

我正在尝试创建一个程序来计算我将选择的 10 个数字的频率，但是当我尝试运行它时它甚至不会运行 printf 并关闭。有什么想法吗？谢谢

```
#include <stdio.h>

int main()
{ 
  int i,j,A[10]={0},C[10]={0};
  for(i=0;i<10;i++)
  {
     scanf("%d /n",&A[i]);
  }
  for(j=0;j<10;j++)
  {
     if(A[i]==j)
     {
        C[j]=C[j]+1;
        printf(" %d ",C[j]);
        break;
     }
   }
   getch();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:24:10.517

线

```
if(A[i]==j) 
```

看起来不对 -`i`是前一个循环的计数器，现在是 10（所以超出了数组的范围）。你的意思

```
if(A[j]==j)
//   ^ 
```

反而？

更改它会使程序为我运行。我认为它还没有达到你想要的效果。`break`当您第一次找到任何匹配项时，该语句会导致执行停止。

希望这足以让您研究如何计算数字的频率，然后自己打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:29:31.987

您需要再次循环 A 数组以检查每个元素的值：

```
for(i=0;i<10;i++)
{
    for(j=0;j<10;j++)
    {
         if(A[i]==j)
         {
             C[j]=C[j]+1;
             printf(" %d ",C[j]);
             break;
         }
     }
} 
```

如果您知道 A 中的值范围为 0-9，那么您可以完全删除内部循环并执行`C[A[i]]++;`

在此之后，您的 C 数组将包含用户输入的每个数字的计数。eg`C[5]`将包含找到的 5 的数量，因此您可以根据需要输出它

# c# - 在 C# 的电子邮件正文中显示数据表

> ID：15904529
> 
> 赞同：4
> 
> 时间：2013-04-09T14:21:42.763
> 
> 标签：c#

我正在尝试在电子邮件正文中显示数据表。我正在使用以下函数在 html 标签中转换数据表

```
private static string getHTML(DataTable dt)

    {
        StringBuilder myBuilder = new StringBuilder();

        myBuilder.Append("<table border='1px' cellpadding='5' cellspacing='0' ");
        myBuilder.Append("style='border: solid 1px Silver; font-size: x-small;'>");

        myBuilder.Append("<tr align='left' valign='top'>");
        foreach (DataColumn myColumn in dt.Columns)
        {
            myBuilder.Append("<td align='left' valign='top'>");
            myBuilder.Append(myColumn.ColumnName);
            myBuilder.Append("</td>");
        }
        myBuilder.Append("</tr>");

        foreach (DataRow myRow in dt.Rows)
        {
            myBuilder.Append("<tr align='left' valign='top'>");
            foreach (DataColumn myColumn in dt.Columns)
            {
                myBuilder.Append("<td align='left' valign='top'>");
                myBuilder.Append(myRow[myColumn.ColumnName].ToString());
                myBuilder.Append("</td>");
            }
            myBuilder.Append("</tr>");
        }
        myBuilder.Append("</table>");

        return myBuilder.ToString();
    } 
```

并将返回的字符串提供给 stringbuilder，如下所示

```
StringBuilder sb = new StringBuilder(); 
                sb.AppendLine("Dear Responsible,"); 
                sb.AppendLine(""); 
                sb.AppendLine("Following items are added."); 
                sb.AppendLine(""); 
                sb.AppendLine(myBuilder.ToString())    //here I want the data to       display in table format
                sb.AppendLine("Many thanks in advance!");
                sb.AppendLine(""); 
```

但我的邮件显示如下

```
Dear Responsible,

Following items are added.

<table border='1px' cellpadding='5' cellspacing='0' style='border: solid 1px Silver; font-size: x-small;'><tr align='left' valign='top'><td align='left' valign='top'>INC_NUMBER</td><td align='left' valign='top'>SERVICE</td><td align='left' valign='top'>ASSIGNED_GROUP</td><td align='left' valign='top'>ASSIGNEE</td><td align='left' valign='top'>STATUS</td><td align='left' valign='top'>DUEHOURS</td></tr><tr align='left' valign='top'><td align='left' valign='top'>INC</td><td align='left' valign='top'>GSI</td><td align='left' valign='top'>L2</td><td align='left' valign='top'>Mahen A</td><td align='left' valign='top'>Pending</td><td align='left' valign='top'>4</td></tr></table>

Many thanks in advance! 
```

那怎么能以表格格式而不是字符串显示？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T14:24:28.307

确保将 的[`IsBodyHtml`](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.isbodyhtml.aspx)属性设置`MailMessage`为`true`。

# ios - cordova ios 应用程序构建 - 运行 - 然后在 config.xml 中添加插件名称/值后崩溃

> ID：15904531
> 
> 赞同：2
> 
> 时间：2013-04-09T14:21:45.180
> 
> 标签：ios, objective-c, cordova, plugins

每当我在 config.xml 中添加插件名称/值映射时，我的 iOS Cordova 应用程序就会崩溃。该应用程序成功构建并中断指向此主要功能，

```
int main(int argc, char* argv[])
{
   @autoreleasepool{
   int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); -breaks at this point
   return retVal;
   }
} 
```

当我从下面的 config.xml 中删除这两行时：

```
<plugin name="ModuleHandler" value"ModuleHandlerPlugin" />
<plugin name="ExtractZipFilePlugin" value"ExtractZipFilePlugin" /> 
```

该应用程序可以完美地构建和运行，但是当我将其添加回来时，它会中断。

需要这方面的帮助，非常感谢。

# c++ - 计算平方根以实现定点函数

> ID：15904534
> 
> 赞同：0
> 
> 时间：2013-04-09T14:22:01.900
> 
> 标签：c++, fixed-point, square-root

我试图找到一个固定点的平方根，我使用以下计算来使用整数算法找到平方根的近似值。该算法在维基百科中有所描述： [http ://en.wikipedia.org/wiki/Methods_of_computing_square_roots](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots)

```
uint32_t SquareRoot(uint32_t a_nInput)
{
    uint32_t op  = a_nInput;
    uint32_t res = 0;
    uint32_t one = 1uL << 30; // The second-to-top bit is set: use 1u << 14 for uint16_t type; use 1uL<<30 for uint32_t type

    // "one" starts at the highest power of four <= than the argument.
    while (one > op)
    {
        one >>= 2;
    }

    while (one != 0)
    {
        if (op >= res + one)
        {
            op = op - (res + one);
            res = res +  2 * one;
        }
        res >>= 1;
        one >>= 2;
    }
    return res;
} 
```

但我无法理解代码中发生的事情评论`// "one" starts at the highest power of four <= than the argument.`到底意味着什么。有人可以提示我代码中发生了什么来计算参数的平方根吗 `a_nInput`

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:36:21.887

注意如何`one`初始化。

```
uint32_t one = 1uL << 30; 
```

那是 2 ^(30)或`1073741824`. 这也是 4 ^(15)。

这一行：

```
 one >>= 2; 
```

相当于

```
 one = one / 4; 
```

所以发生的事情的伪代码是：

*   `one`= 4 ^(15)

*   如果`one`大于`a_nInput`

    *   `one`= 4 ^(14)
*   如果`one`仍然大于`a_nInput`

    *   `one`= 4 ^(13)
*   （等等...）

最终**，**`one`不会超过。**`a_nInput`**

 **```
// "one" starts at the highest power of four less than or equal to a_nInput 
```**

# ms-access - 有关 ADO 记录集筛选器查询语法的信息

> ID：15904535
> 
> 赞同：1
> 
> 时间：2013-04-09T14:22:04.930
> 
> 标签：ms-access, ado, jet

我花了很多时间试图弄清楚如何在 ado 记录集过滤器表达式中提取日期部分，该表达式连接到使用 mdb 文件的 Jet 引擎。问题是关于 sql 的访问风格（例如日期函数）提到的许多事情在此处不起作用，从而引发错误。在比较中使用#mm/dd/yyyy hh:mm:ss# 格式化日期有效，但结果不正确。是否有可靠的信息来源说明哪些表达式适用于过滤器以及我可以使用哪些功能？

更新

使用的版本是我选择 Microsoft JET 4.0 OLE DB Provider 时的版本。通常人们会期望过滤条件可以使用与 SQL 查询中 WHERE 关键字之后的查询部分相同的语法。我的任务是比较时间戳的日期部分，我最终决定使用查询而不是过滤表，但是当它是 sql 查询的一部分（在 WHERE 之后）并引发*“应用程序使用的参数是错误的类型，超出可接受的范围，或相互冲突”*错误，当它是过滤器的内容时

```
format(TimeStamp,"yyyy/mm/dd")=format(#04/11/2013#,"yyyy/mm/dd") 
```

所以我看到 WHERE 和过滤器语法之间有明显的区别，但我找不到详细的解释它们到底是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:37:25.363

实际上，我对`WHERE Format([TimeStamp]...`在针对 Access 数据库引擎 (ACE) 的 ADO 查询中起作用感到非常惊讶，但显然确实如此。

我当然同意在 Microsoft 的文档中很难找到有关使用某些 Microsoft 功能的具体细节。我想这有助于保持 Stack Overflow 等网站的业务。;)

至于您的`.Filter`问题，`Format()`在这种情况下使用确实会失败，大概是因为`Format()`它是一个 VBA 函数，并且不能（总是）可用于 Access 应用程序本身之外的表达式。但是，以下测试表明...

```
rst.Filter = "[TimeStamp] >= #2013/04/11# AND [TimeStamp]<#2013/04/12#" 
```

...确实有效。（如果没有为 DateTime 值指定时间，`00:00:00`则假定为午夜 - -。）

测试数据：

```
ID  TimeStamp
1   2013-04-10 21:22:00
2   2013-04-11 02:34:56
3   2013-04-11 04:45:15 
```

测试代码：

```
Sub foo()
Dim con As ADODB.Connection, rst As ADODB.Recordset

Set con = New ADODB.Connection
con.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data source=C:\Users\Gord\Desktop\Database1.accdb;"
Set rst = New ADODB.Recordset

Debug.Print "Test 1: WHERE Format([TimeStamp]..."
rst.Open _
        "SELECT * FROM [TimeStampData] " & _
        "WHERE Format([TimeStamp], ""yyyy/mm/dd"") = Format(#2013/04/11#, ""yyyy/mm/dd"")", _
        con, adOpenKeyset, adLockOptimistic
Debug.Print "Records returned: " & rst.RecordCount
rst.Close
Debug.Print

Debug.Print "Test 2: Filter"
rst.Open "SELECT * FROM [TimeStampData]", con, adOpenKeyset, adLockOptimistic
Debug.Print "Total records: " & rst.RecordCount
rst.Filter = "[TimeStamp] >= #2013/04/11# AND [TimeStamp]<#2013/04/12#"
Debug.Print "Filtered records: " & rst.RecordCount
rst.Close

Set rst = Nothing
con.Close
Set con = Nothing
End Sub 
```

测试结果：

```
Test 1: WHERE Format([TimeStamp]...
Records returned: 2

Test 2: Filter
Total records: 3
Filtered records: 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T14:02:53.830

关于 (VBA) ADO 过滤器语法的简短说明（也适用于 DAO）：

过滤器应指定为： "[Fieldname] = " 其中 Fieldname 是记录集中字段的现有名称，可以是任何可以用字符串表示的名称。非字符串始终转换为字符串，因为过滤器值将转换为显式 SQL WHERE 语句（始终为字符串）。

有效的过滤器是：

```
rst.Filter="[TimeStamp] = #2013/04/12#" '(Mind the hashes as a date is expected. Peculiarly all localised notations are accepted!)

rst.Filter="[TimeStamp] = #" & strDatevalue & "#" 'Where strDatevalue is a datevalue as text. 
```

因此这将起作用：

```
rst.Filter="[TimeStamp] = #" & format(#04/11/2013#,"mm/dd"/yyyy) & "#" 
'Mind: Access expects here an American standard date format, i.e. month/day/year
'(In that case you could even leave the hashes away!)

IF 
```

# windows - 当客户端调用 CoCreateInstance 并意外关闭时，进程外 COM 服务器内存泄漏

> ID：15904537
> 
> 赞同：3
> 
> 时间：2013-04-09T14:22:11.773
> 
> 标签：windows, com, memory-leaks, garbage-collection, com-interop

我有 Out-of-Proc，实际上是 DllSurrogate COM-Server，用 C++、ATL 编写，在我之前的 SO[问题](https://stackoverflow.com/questions/15839719/how-to-consume-com-server-atl-dll-surrogate-in-net-c-sharp-winservice)中提到过。我正在使用来自许多客户端和 C# 应用程序的 COM-Server 创建和/或连接单例`CoCreateInstance`。在完成使用 COM 对象后，它们都调用了各自的释放。在 Delphi 中，当接口超出范围时，它基于接口 Release Reference Count，在 C# 中，它被调用`Marshal.ReleaseComObject`，直到似乎一切正常。

问题是客户端应用程序意外关闭时，例如从进程中终止或崩溃。在这种情况下，COM 对象保留在内存中，加载在 DLLHOST.exe 中。

## 是否有一些标准方法可以避免此类泄漏？或者可能问题在于 COM-Server 本身是如何编写的（我有来源，他们不属于我的责任，我不知道 ATL）

**已编辑：**我发现 COM 有它自己的垃圾收集机制，该机制在 6-8 分钟后清除仍然存在的孤立 COM 对象（@Simon Mourier 的坦克）。现在是应用程序逻辑来处理仍然存在的孤立 COM 对象，例如重新初始化它或其他东西。

# c# - MVVM 和 INotifyPropertyChanged 问题

> ID：15904549
> 
> 赞同：2
> 
> 时间：2013-04-09T14:22:35.580
> 
> 标签：c#, wpf, mvvm

我对 MVVM 设计有一个大问题。我试图在我的 ViewModel 中捕获我的内部嵌套对象的每个 PropertyChanged，包括它们嵌套对象的进一步属性更改，但我不知道该怎么做。

这是我的结构：

```
class MyVM
{

  public MyVM()
  {
    this.SomeData = new SomeData();
    this.SomeData.NestedObj = new MyNestedDat();
    this.SomeData.Str = "This tiggers propertychanged inside MyDat class";
    // this triggers propertychanged event inside MyNestedDat class
    this.SomeData.NestedObj.Num = 123;
  }

  // and here should be a method where i catch all possibe propertychanges from my nested objets and their nested objets, how do i do that?

  public MyDat SomeData
  {
    get;
    set;
  }

}

class MyDat : INotifyPropertyChanged
{
  private string str;
  public string Str;
  {
    get { return this.str;}
    set
    {
      this.str = value;
      this.PropertyChanged(this, "Str");
    }
  }

  publicMyNestedDat NestedObj
  {
   get;
   set;
  }
}

class MyNestedDat : INotifyPropertyChanged
{
  private int num;
  public int Num
  {
    get{ return this.num;}
    set
    {
      this.num = value;
      this.PropertyChanged(this, "Num");
    }
  }
} 
```

我怎样才能让它工作？我真的不知道从哪里开始。

MyNestedDat 类抛出 PropertyChanged，MyDat 类抛出 propertychanged，我想在我的视图模型中捕获它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:47:47.630

关于[PropertyChangedEventArgs](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertychangedeventargs.aspx)`PropertyName`中应该包含的内容没有明确的限制。

请参阅[为嵌套（子）对象订阅 INotifyPropertyChanged](https://stackoverflow.com/questions/4143179/subscribe-to-inotifypropertychanged-for-nested-child-objects)。

这是一个例子：

```
class A : BaseObjectImplementingINotifyPropertyChanged {

  private string m_name;
  public string Name {
    get { return m_name; }
    set {
      if(m_name != value) {
        m_name = value;
        RaisePropertyChanged("Name");
      }
    }
  }
}

class B : BaseObjectImplementingINotifyPropertyChanged {

  private A m_a;
  public A A {
    get { return m_a; }
    set {
      if(m_a != value) {
        if(m_a != null) m_a.PropertyChanged -= OnAPropertyChanged;
        m_a = value;
        if(m_a != null) m_a.PropertyChanged += OnAPropertyChanged;
        RaisePropertyChanged("A");
      }
    }
  }

  private void OnAPropertyChanged(object sender, PropertyChangedEventArgs e) {
    RaisePropertyChanged("A." + e.PropertyName);
  }

}

B b = new B();
b.PropertyChanged += (s, e) => { Console.WriteLine(e.PropertyName); };
b.A.Name = "Blah"; // Will print "A.Name" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:40:33.377

这里最好的做法是将*Model*和*ViewModel*的概念分开。

通过拥有一个`ViewModel`比您更平坦的对象，`Model`您可以避免这种情况。使用像[Automapper](http://automapper.org/)这样的自动映射工具可以让您映射`Model`到`ViewModel`，反之亦然。

[https://github.com/AutoMapper/AutoMapper/wiki/Flattening](https://github.com/AutoMapper/AutoMapper/wiki/Flattening)

```
class MyDatViewModel : INotifyPropertyChanged
{
    public string Str
    {
        // ... Get Set
    }

    public int NestedObjNum
    {
        // ... Get set
    }
}

// Configure AutoMapper

Mapper.CreateMap<MyDat, MyDatViewModel>();

// Perform mapping

MyDatViewModel viewModel = Mapper.Map<MyDat, MyDatViewModel>(someData); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:51:16.497

在我看来，您所问的问题存在一些概念性问题。想象一下，您得到了一个适用于您的场景（您对此感到满意）的解决方案，并考虑以下几点：

*   如果添加另一层会发生什么？你还期望它同样工作吗？
*   是否应该传播属性更改（`viewModel1.propA`通知`viewModel2.PropA`）？
*   是否应该转换属性更改（`viewModel1.SomeProp`通知`ViewModel2.AnotherProp`）？
*   性能是一个问题吗？如果您需要通过多个级别传播属性更改事件，这将如何执行？

这应该敲响警钟，即当前的方法不是正确的道路。

您需要的是一种以松散耦合的方式在您的视图模型之间提供通信的方法，以便您的视图模型甚至不需要知道彼此的存在。这样做的美妙之处在于，这也适用于其他情况，而不仅仅是属性更改。

对于您的属性更改事件，一个 viewModel 想知道*什么时候发生*（它可能不是属性更改事件，请记住）。这意味着另一个 viewModel 需要某种方式说“嘿，属性已更改”（或“我的状态已更改”、“该数据库调用已完成”等）。

现在在 C# 中，您可以提供提供此功能的事件....除了，现在您的对象相互了解，这给您留下了与以前相同的问题。

为了克服这个问题，你需要另一个对象，一个中介者（在这个例子中我们称之为`Messenger`），它的唯一目的是处理对象之间的消息传递，这样它们就可以在彼此不知道的情况下生活。

总体思路是这样的。在提供通知的 viewModel 中，您可能会执行以下操作：

```
public string MyProp
{
    get { return _myProp; }
    set
    {
        _mProp = value;
        OnPropertyChanged("MyProp");
        Messenger.PostMessage(new VMChangedMessage { ViewModel = this, PropertyName = "MyProp" });
    }
} 
```

在对事件感兴趣的 viewModel 中，您可能会执行以下操作：

```
public class ViewModel2
{
    public ViewModel2()
    {
        Messenger.Subscribe<VMChangedMessage>(handleMessage);
    }

    private void handleMessage(VMChangedMessage msg)
    {
        // Do something with the information here...
    }
} 
```

请注意，两个视图模型从不相互引用。它们现在是松耦合的。

已经有许多预先存在的实现可用，创建自己的实现并不困难（信使基本上保留对某个消息感兴趣的对象列表，并在需要通知相关方时迭代该列表） . 有一些事情可以不同地实现（有些实现只是传递字符串消息而不是将信息封装在对象中，有些实现自动处理观察者的清理）。

我会推荐使用 Josh Smiths (excellent) [MVVM Foundation](http://mvvmfoundation.codeplex.com/)，它包括一个信使类。它也是开源的，所以你可以看到它是如何工作的。

# onclick - 如何将“onclick”添加到单选按钮？

> ID：15904551
> 
> 赞同：0
> 
> 时间：2013-04-09T14:22:39.093
> 
> 标签：onclick, radio-button

所以我最近才开始编码，我一直在尝试复制我不久前从网站上看到的东西。我有一份申请表，其中有 5 个关于资格的问题。然而，人们可能拥有不止一种资格，对吧？所以我添加了 2 组这 5 个问题，我想添加一个单选按钮，当您单击时，它会在页面中添加另一组 5 个问题。有谁知道我该怎么做？

我知道这听起来可能很简单，但就像我说的，我对编码很陌生，非常感谢任何帮助。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:28:00.280

您可能已经设置了接下来的 5 个问题并将它们设置为，`display: none;`但是有一个按钮可以添加一个使用 jquery 显示它们的类。[jquery 网站 - addclass](http://api.jquery.com/addClass/)

# xamarin.ios - Xamarin和跨平台webservice访问+json解析

> ID：15904552
> 
> 赞同：3
> 
> 时间：2013-04-09T14:22:42.527
> 
> 标签：xamarin.ios, xamarin.android, xamarin

我正在寻找一种从 API 检索数据（格式为 json）并解析它们的方法。

我真的很想将代码用于 android 和 IOS。我已经看到了示例，但它们不适用于两个平台。

如果您可以为我提供连接、检索和 json 的示例，这对我来说是最好的，因为我没有找到关于跨平台（非常简单）实现的优秀文档。

欢迎评论！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:35:35.690

我在单点触控解决方案中使用了 Newtonsoft 的 json 库

[在这里](https://github.com/ayoung/Newtonsoft.Json)找到源代码。

至于检索数据 - 这取决于您的 API，我怀疑它是一个带有 HTTP 调用的 Web API？如果是这种情况，您可以进一步详细说明，显然异常处理和线程取决于您：

```
 HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create (url);
...
 request.BeginGetResponse ((r) =>
 {
     string res = null;
     using (StreamReader srd = new StreamReader(response.GetResponseStream())) {
         res = srd.ReadToEnd ();
     }
     T jres = Newtonsoft.Json.JsonConvert.DeserializeObject<T> (res);
 }, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:58:46.020

而不是使用 nuget 下载 Newtonsoft，您需要从这里下载它：[http ://components.xamarin.com/view/json.net/](http://components.xamarin.com/view/json.net/)

# mercurial - 修改 Pushed Commit 的 Commit Message。（水银）

> ID：15904555
> 
> 赞同：4
> 
> 时间：2013-04-09T14:22:46.370
> 
> 标签：mercurial, commit, bitbucket

我在 bitbucket 上创建了一个虚拟存储库来尝试学习如何做到这一点。我已经在 Git 中看到了这一点，但我不确定这在 Hg 中是否可行。

我有以下 hg 日志：

```
changeset:   3:742dd9f71f46
tag:         tip
user:        RHsu
date:        Tue Apr 09 09:58:55 2013 -0400
summary:     added some text to 3

changeset:   2:dd431695edcd
user:        RHsu
date:        Tue Apr 09 09:58:30 2013 -0400
summary:     Let's try to amend this commit

changeset:   1:b59ed9c945f9
user:        RHsu
date:        Tue Apr 09 09:58:15 2013 -0400
summary:     added some text to t1

changeset:   0:a8a24f3831ab
user:        RHsu
date:        Tue Apr 09 09:52:32 2013 -0400
summary:     Add text files for testing 
```

这些变更集已被推送到 bitbucket。如何修改 changeset2 的提交消息？

编辑：我尝试过使用`histedit`，但这只会改变本地提交。然后当我推动时，会产生两个头。

编辑：与其他问题不同，因为这个问题涉及编辑已推送到 bitbucket 的提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:32:50.600

[Bitbucket](http://www.bitbucket.org/)具有剥离功能，可用于从存储库中剥离变更集。这就是你必须使用的东西才能摆脱你不想要的头。你得到它在`https://bitbucket.org/<user>/<repo>/admin/strip`。您还可以在网页上查看您的 repo 时单击小齿轮图标，然后它将向您显示管理界面，其中有一个用于剥离变更集的部分。

# iis - IIS 动态重定向规则

> ID：15904556
> 
> 赞同：0
> 
> 时间：2013-04-09T14:22:49.580
> 
> 标签：iis, url-rewriting, iis-7.5

我在 IIS 中编写了许多重定向规则，需要一些指导以使它们尽可能动态。

我想要一个规则，从`/foldername/*`到`/newfolder/foldername/*`

以及每种情况下要附加到末尾的文件名。我正在努力将`foldername`其添加到结果中的部分。

这是我到目前为止的代码：

```
<rule name="Rule name" stopProcessing="true">
  <match url="^foldername"  />
  <action type="Redirect" url="/newfolder/{R:1}" redirectType="Permanent" />
</rule> 
```

在上面的示例中，我希望能够继承原始文件夹位置和文件名。`{R:1}`仅带有文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:13:25.950

我很惊讶`{R:1}`携带文件名，因为当我测试时并非如此。

无论如何，要做你想做的事，你必须将模式从 更改`^foldername`为`^foldername/(.*)`。这样，`{R:0}`将包含整个路径（使用时`^foldername`，`{R:0}`仅包含以 开头和匹配的部分`foldername`）。

您的规则将如下所示：

```
<rule name="Rule name" stopProcessing="true">
  <match url="^foldername/(.*)"  />
  <action type="Redirect" url="/newfolder/{R:0}" redirectType="Permanent" />
</rule> 
```

# sql - INSERT INTO SELECT 故障排除

> ID：15904559
> 
> 赞同：0
> 
> 时间：2013-04-09T14:22:56.573
> 
> 标签：sql, sql-server, sql-server-2008-r2

使用 INSERT INTO SELECT 时，如果 SELECT 部分自行运行，则在大约 25 秒内返回。插入我已经放手超过 8 分钟，然后取消。我该怎么做才能开始解决这个问题？不知道有没有上锁？这是一个不断进行单次选择和插入的表。此表上还有 3 个索引，我知道当新行进入时需要更新。上面的场景也仅适用于 68,000 行，而且我确实有其他插入，我需要做的将包含更多。最后，我使用的是 SQL SERVER 2008 R2。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T20:10:27.633

Is there space for the new table? I had a project way back in SQL Server 2000\. The auto-growth was killing the timing. When I pre-allocated the space before loading, the process flew.

Make sure your growth options are not 1 mb or 10 %. That will kill you also.

Also, look into instant database file initialization. If this is turned off, the SQL Server engine has to zero out the pages before giving you new space. Otherwise, it skips this step.

Good link from MSDN on this topic,

[http://msdn.microsoft.com/en-us/library/gg634626.aspx](http://msdn.microsoft.com/en-us/library/gg634626.aspx)

Trace Flag 1806 which disables Instant Database File Initialization. Make sure this is not set on your server.

Please post back if this does not fix your issue.

Sincerely

John The Crafty DBA [www.craftydba.com](http://www.craftydba.com)

# javascript - JavaScript 代码分析/洞察工具

> ID：15904566
> 
> 赞同：1
> 
> 时间：2013-04-09T14:23:09.707
> 
> 标签：javascript

虽然 StackOverflow 中有几个关于这个问题的问题，但没有一个能满足我的需求。我想知道是否有一个工具可以用于其他基本功能：

*   显示函数的数量和名称（自省）
*   路径/依赖项

JSHint 更像是一种风格和“最佳实践”分析，并没有真正让我了解复杂性、数量或依赖性。

我已经搜索了节点模块，但还没有真正看到任何适合我的情况，尽管我完全有可能只是没有看到它。

# java - 如何使用 Calendar.Builder 在 Google 日历中设置投影

> ID：15904568
> 
> 赞同：1
> 
> 时间：2013-04-09T14:23:11.957
> 
> 标签：java, google-calendar-api

要访问 ExtendedProperties，我需要通知完整的投影。我见过的每个例子，他们都是通过 URL 来做的： [https ://developers.google.com/google-apps/calendar/v2/reference#Event_feeds](https://developers.google.com/google-apps/calendar/v2/reference#Event_feeds)

```
https://www.google.com/calendar/feeds/userID/visibility/projection 
```

但我没有那个网址。我按如下方式创建服务：

```
Calendar createService() throws GeneralSecurityException, IOException {
        GoogleCredential credential = new GoogleCredential.Builder()
                .setTransport(HTTP_TRANSPORT).setJsonFactory(JSON_FACTORY)
                .setServiceAccountId(EMAIL)
                .setServiceAccountScopes(CalendarScopes.CALENDAR)
                .setServiceAccountPrivateKeyFromP12File(new File(getClass().getClassLoader().getResource(FILE_NAME).getFile()))
                .build();

        Calendar service = new Calendar.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
                                       .setApplicationName("Rokko-Leggis")
                                       .build();
        return service;
    } 
```

我试图保存和检索 ExtendedProperty 但失败了

如何保存自定义字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:14:11.540

成立！

```
 ExtendedProperties extended = new ExtendedProperties();
    Map<String, String> map = new HashMap<>();
    map.put("customField", "customValue");
    extended.setShared(map);
    event.setExtendedProperties(extended); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T14:00:39.223

你可以用更少的两行来做到这一点：

```
this.calendarEvent.setExtendedProperties(new ExtendedProperties().setShared(extendedPropertiesMap)); 
```

# mysql - SQL 删除语句匹配条件

> ID：15904570
> 
> 赞同：1
> 
> 时间：2013-04-09T14:23:13.760
> 
> 标签：mysql, sql

我正在尝试`DELETE`根据两个匹配项执行声明。我一直`0 Rows affected`在 Sequel Pro (OSX) 中接收。

```
DELETE FROM devices WHERE device_id = '99999999999' AND state != 'PENDING' 
```

`device_id`是一个`VARCHAR`并且状态是一个枚举列表。

注意：如果我删除`AND state != 'PENDING'`，查询将执行删除。但是，我需要同时满足这两个标准。

这似乎是`state`is的问题`NULL`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:27:47.073

`NULL`无法使用`!=`运算符（或类似运算符）进行比较，结果实际上是`NULL`. 那`SELECT 'PENDING' != NULL`实际上是选择`NULL`而不是`FALSE`或`TRUE`。如果该值可以是`NULL`您必须使用`IS NULL`或`IS NOT NULL`检查并返回适当的布尔值。

```
AND (state != 'PENDING' OR state IS NULL) 
```

文档：[http ://dev.mysql.com/doc/refman/5.0/en/working-with-null.html](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

# c++ - 在 ns 2.34 (Jiazi YI ns 2.29) 上添加 mp-olsr 时出现编译错误

> ID：15904571
> 
> 赞同：0
> 
> 时间：2013-04-09T14:23:15.497
> 
> 标签：c++, compiler-errors, protocols, ns2

我正在尝试将 mp-olsr(ns 2.29) 添加到 ns 2.34 中，并且在编译时遇到了一些错误。

源码（甲子易）：[http ://www.jiaziyi.com/index.php/research-projects/mp-olsr](http://www.jiaziyi.com/index.php/research-projects/mp-olsr)

程序：

> $ touch common/packet.cc
> $ make

结果：

> mpolsr/MPOLSR.o: 在函数Agent::Agent(packet_t)' mpolsr/MPOLSR.o: 在函数Agent::Agent(packet_t)' collect2: ld 返回 1 退出状态 make: ** [ns] Erro 1`MPOLSR::MPOLSR(int)':
> MPOLSR.cc:(.text+0x1457): undefined reference to`
> `MPOLSR::MPOLSR(int)':
> MPOLSR.cc:(.text+0x16f1): undefined reference to`

我可能错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:48:36.893

在添加新协议之前，您需要将协议名称添加到 common/packet.h 文件中，然后将您的 xxx.o \ 添加到 Makefile 中，而不是在终端窗口中输入 make 命令。

你所做的不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:26:53.620

为了解决我的错误，我在 MPOLSR.cc 中修改了以下内容：

从：

> `MPOLSR::MPOLSR(nsaddr_t id) : Agent(PT_MPOLSR),`
> `hello_timer_(this),`
> `tc_timer_(this),`
> `mid_timer_(this) {`

To（所有内容都在一行上）：

> `MPOLSR::MPOLSR(nsaddr_t id) : Agent(PT_MPOLSR), hello_timer_(this),tc_timer_(this), mid_timer_(this) {`

我知道这听起来很傻，但它解决了问题。

# c# - 如何阻止Paint事件堆积

> ID：15904574
> 
> 赞同：2
> 
> 时间：2013-04-09T14:23:25.967
> 
> 标签：c#, winforms, scroll, paint, onpaint

我正在创建一个应用程序来安排不同的任务。这些通过在面板上绘制矩形来显示。这必须是响应式的。所以我需要在每次尺寸变化时绘制并使其无效。当我达到规划面板的最大高度时，它会自动滚动。

**问题是当我抓住滚动条并开始滚动一点时，当我释放滚动条时，我的整个应用程序和计算机都会冻结。**

这很可能是由于每次滚动和堆叠都会调用 onpaint 事件，导致应用程序挂起，直到它们全部完成。

**现在我的问题是：我将如何解决这个问题？可能是通过防止绘制事件被多次调用，但是如何？**

绘制事件调用的方法：

```
private void panelPlanning_Paint(object sender, PaintEventArgs e)
    {
        for (int i = 0; i < userList.Count; i++)
        {
            Label temp = new Label();
            temp.Text = userList[i].Text;
            temp.Width = panelUsers.Width;
            temp.Height = 50;
            temp.BorderStyle = BorderStyle.FixedSingle;
            temp.Location = new Point(0, i * 50);
            temp.TextAlign = ContentAlignment.MiddleCenter;
            panelUsers.Controls.Add(temp);

            foreach (FullTask task in taskList)
            {
                if (task.AssignedTo == userList[i].Text && task.StartDate != "" && task.DueDate != "")
                {
                    DateTime start = DateTime.ParseExact(task.StartDate, "dd/MM/yyyy", CultureInfo.InvariantCulture);
                    DateTime end = DateTime.ParseExact(task.DueDate, "dd/MM/yyyy", CultureInfo.InvariantCulture);
                    Brush brush;
                    if (task.Priority == Enums.priorities[2])
                    {
                        brush = Brushes.Yellow;
                    }
                    else if (task.Priority == Enums.priorities[1])
                    {
                        brush = new SolidBrush(Color.FromArgb(255, 0, 80, 123));
                    }
                    else
                    {
                        brush = Brushes.Red;
                    }

                    panelPlanning.CreateGraphics().FillRectangle(brush, new Rectangle((start.Subtract(dtPickerStart.Value).Days + 1) * labelDaysWidth, i * 50, (end.Subtract(start).Days + 1) * labelDaysWidth, 25));
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:27:20.373

您正在为每个绘制事件添加新的标签控件。不要这样做：

```
 // Label temp = new Label();
      // temp.Text = userList[i].Text;
      // temp.Width = panelUsers.Width;
      // temp.Height = 50;
      // temp.BorderStyle = BorderStyle.FixedSingle;
      // temp.Location = new Point(0, i * 50);
      // temp.TextAlign = ContentAlignment.MiddleCenter;
      // panelUsers.Controls.Add(temp); 
```

此外，使用参数提供的 e.Graphics 对象，而不是 CreateGraphics，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:29:02.490

您必须跟踪`FullTask`实际上*必须*在屏幕上显示的内容。这可以通过查看 [Control.ClientRectangle](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.clientrectangle%28v=vs.110%29.aspx)并记住当前滚动位置来实现。

这样，从所有`FullTasks`要绘制的集合中，您将仅获得在屏幕上*实际可见的任务子集，***并且仅绘制那些**。

这是处理在或多或少所有绘图框架 2D 甚至 3D 中实现的可绘制工件的正确方法。

如果某个元素被另一个元素覆盖（或部分元素被覆盖），也有跟踪的概念，因此它将被“剔除”，但在*您的情况下*，这似乎无关紧要。

**还要注意您添加控件的事实**。不要那样做。如果 FullTask​​ 的数量很大，就用[Graphics](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)对象来**绘制**它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:33:40.397

以下代码行应该只执行一次：

```
panelUsers.Controls.Add(temp); 
```

您不断地`temp`向`panelUsers control`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:45:17.943

正如@LarsTech 已经描述的那样，不要在绘制事件中添加控件，并使用提供的 Graphics 对象而不是您自己的...

如果您仍然面临性能问题，请考虑在更改某些内容时在位图上绘制，并且仅在 onPaint 中将该位图绘制到屏幕上

# biztalk - 问题查看聚合和活动搜索 - BAM 门户

> ID：15904578
> 
> 赞同：0
> 
> 时间：2013-04-09T14:23:35.943
> 
> 标签：biztalk, biztalk-bam

我正在研究 BAM（第一次遇到），创建了一个简单的活动，我在其中定义了两个业务里程碑（收到发票和处理发票的时间）和一个业务数据（客户名称）和一个简单的视图，用维度“客户（客户名称) "和日期（发票处理时间）和总金额作为一个值。

部署了 Activity 和 View，然后部署了跟踪配置文件。

我与 BAMPrimaryDatabase 进行了交叉验证并创建了表，当我查询它们时我也得到了结果。

现在的问题是我没有在 BAM 门户上反映出来。当我点击聚合时，会出现以下错误：

> 由于以下一种或多种原因，无法显示视图：
> 
> *   未安装 Office Web Components 2003。（我已经安装了）
> *   您的 Web 浏览器不支持 ActiveX 控件。
> *   禁用 ActiveX 控件支持。（已启用 ActiveX 控件）

当我单击 OK 时，门户上会显示以下内容：

> 提供者=MSOLAP；数据源=MAHESH-PC；初始目录=BAMAnalysis[InvoiceView_InvoiceTotalAmount]Customer[InvoiceView_InvoiceTotalAmount_Customer].[InvoiceView_InvoiceTotalAmount_Customer].[Customer]Column1[Customer]Year[InvoiceView_InvoiceTotalAmount_Date].[InvoiceView_InvoiceTotalAmount_Date].[Year]Row1[Date]Total Amount[Measures ].[Total Amount][Measures].[Total Amount]DataRow-1Total AmountData1[Measures].[Total Amount]InvoiceTotalAmount 数据透视表视图 图表视图

它是通用的（已知问题）还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:55:00.370

底层多维数据集需要在 BAMAnalysis 中构建。完成该步骤后，您可以查看数据。您可能会遇到的下一个问题是，需要多久构建一次？

# concurrency - Erlang：当你在 erl 中 f() 一个 Pid 时会发生什么？

> ID：15904581
> 
> 赞同：1
> 
> 时间：2013-04-09T14:23:41.077
> 
> 标签：concurrency, process, erlang, pid, erl

假设我正在处理一些简单的过程`erl`：

```
1> Fun = fun(F) -> F(F) end.
#Fun<erl_eval.6.82930912>
2> Pid = spawn(fun() -> Fun(Fun) end).
<0.178.0>
3> f(Pid). 
```

当我这样做时会发生什么`f(Pid).`？进程退出还是我只是失去了对它的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:38:16.200

根据[文档](http://www.erlang.org/doc/man/shell.html) `f(Pid)`删除变量 Pid 的绑定，该过程不会停止。

您可以通过这种方式对其进行测试：假设您有一个`myserver`基于 emacs erlang 模式提供的骨架的 gen_server 调用。

```
1> {ok, Pid} = myserver:start_link().
{ok,<0.39.0>}
2> f(Pid).
ok
3> gen_server:call(pid(0,39,0), mycall).
ok
4> gen_server:call(myserver, mycall).
ok 
```

正如你所看到的，即使我们这样做了，`f(Pid)`我们仍然可以使用它的 pid 或注册期间使用的原子（在我们的例子中是模块名称）联系进程。

# unit-testing - Mockito 在看起来没问题时给出 UnfinishedVerificationException

> ID：15904584
> 
> 赞同：65
> 
> 时间：2013-04-09T14:23:47.083
> 
> 标签：unit-testing, junit, mockito, junit5

`UnfinishedVerificationException`当我认为我已经正确完成了所有事情时，Mockito 似乎正在抛出一个。这是我的部分测试用例：

```
HttpServletRequest req = mock(HttpServletRequest.class);
when(req.getHeader("Authorization")).thenReturn("foo");

HttpServletResponse res = mock(HttpServletResponse.class);

classUnderTest.doMethod(req, res); // Use the mock

verify(res, never());
verify(req).setAttribute(anyString(), anyObject()); 
```

这是部分类和方法：

```
class ClassUnderTest extends AnotherClass {
    @Override
    public String doMethod(ServletRequest req, ServletRequest res) {
        // etc.
        return "someString";
    }
} 
```

忽略你永远不应该模拟你不拥有的接口这一事实，为什么 Mockito 会给我以下信息？

```
org.mockito.exceptions.misusing.UnfinishedVerificationException: 
Missing method call for verify(mock) here:
-> at (redacted)

Example of correct verification:
    verify(mock).doSomething()

Also, this error might show up because you verify either of: final/private/equals()/hashCode() methods.
Those methods *cannot* be stubbed/verified.

at [test method name and class redacted]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
... etc 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2015-06-27T05:24:14.083

如果您尝试`verify`使用期望原始参数的方法，也可能会导致这种情况`any()`：

例如，如果我们的方法有这个签名：

```
method(long l, String s); 
```

并且您尝试像这样验证它，它将失败并显示上述消息：

```
verify(service).method(any(), anyString()); 
```

将其更改为`anyLong()`，它将起作用：

```
verify(service).method(anyLong(), anyString()); 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2014-03-21T04:18:01.910

我刚刚遇到了这个我自己，它给我带来了很多困惑。

正如 David 上面提到的那样，Mockito**在下一个**Mockito 方法调用中报告错误，这些错误可能不在同一个测试方法中。虽然异常消息确实包含对发生错误的实际位置的引用，但我发现不正确的测试失败对测试过程产生反作用。测试越简单，下一次测试中出现错误的可能性就越大！

这是一个简单的修复方法，可确保错误出现在正确的测试方法中：

```
@After
public void validate() {
    validateMockitoUsage();
} 
```

[从此处](https://static.javadoc.io/org.mockito/mockito-core/2.25.1/org/mockito/Mockito.html#validateMockitoUsage--)的 Mockito 文档：

> 如果您滥用 Mockito，它会引发异常，以便您知道您的测试是否正确编写。**问题是 Mockito 会在您下次使用该框架**时进行验证（例如，下次您验证、存根、调用模拟等时）。但是即使在下一次测试中可能会抛出异常，异常消息也会包含一个带有缺陷位置的可导航堆栈跟踪元素。因此，您可以单击并找到 Mockito 被滥用的地方。
> 
> 但有时，您可能想要明确地验证框架的使用。例如，其中一位用户希望将 validateMockitoUsage() 放在他的 @After 方法中，以便他在误用 Mockito 时立即知道。没有它，他不会在下次使用该框架时就知道它。**在@After 中使用 validateMockitoUsage() 的另一个好处是，jUnit 运行器总是会在有缺陷的测试方法中失败，** 而普通的“下一次”验证可能会在下一个测试方法中失败。但即使 JUnit 可能将下一个测试报告为红色，也不必担心，只需单击异常消息中的可导航堆栈跟踪元素即可立即找到您滥用 mockito 的位置。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-10-18T19:01:39.760

`any()`由于使用参数，我得到了同样的错误`boolean`，显然它需要是`anyBoolean()`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-02-14T16:56:46.317

就我而言，使用**kotlin**是因为要测试的函数未声明为`open`.

异常通知不能`final`使用 /private/equals/hash 方法。

```
fun increment(){
        i++
    } 
```

到

```
open fun increment(){
        i++
    } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-09T12:00:20.280

使用 Junit 5，您可以添加以下内容以在控制台中显示更有意义的 Mockito 异常

```
@AfterEach
public void validate() {
    validateMockitoUsage()
} 
```

另请参阅此答案：[https ://stackoverflow.com/a/22550055/8073652](https://stackoverflow.com/a/22550055/8073652)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-30T22:18:18.403

对我来说，问题原来是测试上下文 xml 中缺少 bean 声明。它用于另一个类使用的自定义方面类，该类的实例是该类构造函数的参数，该构造函数是失败的 verify() 调用的参数。所以我将 bean 声明添加到上下文 xml 中，之后它工作得很好。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-14T07:51:33.257

我的 MyRepository 类有类似的异常

> org.mockito.exceptions.misusing.UnfinishedVerificationException：在此处缺少验证（模拟）的方法调用：-> 在 MyRepository$$FastClassBySpringCGLIB$$de8d8358.invoke()
> 
> 正确验证示例：
> 
> ```
> verify(mock).doSomething() 
> ```

当我为 MyRepository 创建接口和模拟接口时，问题得到了解决，但没有实现。似乎 spring 创建了一些 CGLIB 代理，并导致 UnfinishedVerificationException 异常。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-06-15T11:37:50.277

在以下堆栈上，我也遇到了同样的问题：

*   科特林
*   朱尼特`4.13`
*   Mockito `2.28.2`+ Mockito-内联`2.13.0`
*   机器人电动`4.3.1`

我试图验证一个 lambda 调用：

```
@RunWith(RobolectricTestRunner::class)
class MainViewTest {

    @get:Rule
    val mockitoRule: MockitoRule = MockitoJUnit.rule()

    @Mock private lateinit var mockClickCallback: () -> Unit

    @Test
    fun `should call clickCallback on the button click`() {
        val activity = Robolectric.buildActivity(MainActivity::class.java).create().get()
        val viewUnderTest = MainView(activity)
        viewUnderTest.setClickCallback(mockClickCallback)

        viewUnderTest.button.performClick()

        verify(mockClickCallback).invoke() // UnfinishedVerificationException
    }
} 
```

然后我在 Github 上找到[了问题](https://github.com/robolectric/robolectric/issues/5076)，看来问题出在 Robolectric 上。我使用了以下解决方法：

```
@RunWith(RobolectricTestRunner::class)
class MainViewTest {

    private interface UnitFunction: () -> Unit

    @Test
    fun `should call clickCallback on the button click`() {
        val activity = Robolectric.buildActivity(MainActivity::class.java).create().get()
        val viewUnderTest = MainView(activity)
        val mockClickCallback = mock(UnitFunction::class.java) as () -> Unit
        viewUnderTest.setClickCallback(mockClickCallback)

        viewUnderTest.button.performClick()

        verify(mockClickCallback).invoke() // OK
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-03T11:13:21.047

我有一个类似的问题，我找到了解决这个问题的方法。您要验证的模拟对象尚未重置，因此您应该重置它。您可以在测试用例功能之前**重置（模拟） ，这可能会有所帮助。**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-19T10:26:35.430

如果您尝试使用 Mockito.verify 验证私有或包私有方法，您将收到此错误。

如果您不想使用 PowerMockito，您可以将您的方法设置为受保护，我建议您添加 @VisibleForTesting 标签：

前：

```
void doSomething() {
   //Some behaviour
} 
```

后 ：

```
@VisibleForTesting
protected void doSomething() {
   //Some behaviour
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-23T00:28:48.487

我有同样的错误

```
org.mockito.exceptions.misusing.UnfinishedVerificationException: 
Missing method call for verify(mock) here:
-at com.xxx.MyTest.testRun_Should_xxx_When_yyy(MyTest.java:127)

Example of correct verification:
    verify(mock).doSomething()

Also, this error might show up because you verify either of: final/private/equals()/hashCode() methods.
Those methods *cannot* be stubbed/verified.
Mocking methods declared on non-public parent classes is not supported.

    at com.xxx.MyTest.validate(MyTest.java:132)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.junit.internal.runners.MethodRoadie.runAfters(MethodRoadie.java:145)
    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:99)
... 
```

在我的情况下，生成错误是因为我在调用*Mockito.verify(...)*之前使用了*PowerMockito.verifyStatic()*，然后我不得不将*PowerMockito.verifyStatic()*移动到最后一行（或删除它）。

 **从：

```
PowerMockito.verifyStatic();
Mockito.verify(myMock, Mockito.times(1)).myMockedMethod(anyString(), anyString(), anyString(), any(XXX.class), any(YYY.class), any(ZZZ.class)); 
```

到：

```
Mockito.verify(myMock, Mockito.times(1)).myMockedMethod(anyString(), anyString(), anyString(), any(XXX.class), any(YYY.class), any(ZZZ.class)); 
PowerMockito.verifyStatic(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-20T06:52:26.230

以上两个答案建议`validateMockitoUsage()`在每次测试后使用方法。

虽然这是正确的，但我发现`@ExtendWith(MockitoExtension.class)` 在 Junit 5 中注释您的类会产生相同的效果，同时添加一些不错的 Mockito 功能。此外，它对我来说也看起来更干净。

我猜 Junit 4`@RunWith(MockitoJUnitRunner.class)`会给出类似的结果，但我没有测试它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-27T02:14:15.550

更改为`@RunWith(PowerMockRunner.class)`，问题就消失了。`@RunWith(MockitoJUnitRunner.class)`以前用过。

希望对某人有所帮助..

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-17T16:19:20.433

测试单独运行良好，但在运行集成测试套件时失败并出现 UnfinishedVerificationException。当我们使用 mockito 中的 verify() 并使用 @EnableRetry 时，就会出现问题。解决方法是使用

`public static <T> T unwrapAndVerify(T mock, VerificationMode mode) { return ((T) Mockito.verify(AopTestUtils.getTargetObject(mock), mode)); }`

如本[https://html.developreference.com/article/15741255/Mocked+Spring+%23Service+that+has+%23Retryable+annotations+on+methods+fails+with+UnfinishedVerificationException](https://html.developreference.com/article/15741255/Mocked+Spring+%23Service+that+has+%23Retryable+annotations+on+methods+fails+with+UnfinishedVerificationException)中所述。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-03-09T08:58:47.243

这是我的一粒盐！**我发现Mockito**和**Hibernate Validation**之间存在冲突。我的解决方案是将我的合同检查（@NotNull、@NotEmpty 等）与模拟测试分开。我也开始使用`validateMockitoUsage()`以确保一切正常运行。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-06-13T08:08:49.737

我不确定您的“classUnderTest”来自哪里，但请确保它是模拟的**，**而**不是真实的**。对于下面的测试用例，我有同样的问题：

```
MyAgent rpc = new MyAgent("myNodeName");
...
rpc.doSomething();
...
PowerMockito.verifyPrivate(rpc).invoke("initPowerSwitch");
PowerMockito.verifyPrivate(rpc).invoke("init", "192.168.0.23", "b2", 3); 
```

但它在以下测试用例中消失了：

```
MyAgent rpc = PowerMockito.spy(new MyAgent("myNodeName"));
...
rpc.doSomething();
...
PowerMockito.verifyPrivate(rpc).invoke("initPowerSwitch");
PowerMockito.verifyPrivate(rpc).invoke("init", "192.168.0.23", "b2", 3); 
```

注意，对象 rpc 应该被**PowerMockito.spy(...) 模拟**。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-04-10T06:07:34.813

使用 mockStatic 方法并多次调用 Mockito.verify 时遇到相同的异常，但传递的是接口而不是实现类。

错误代码：

```
try (MockedStatic<Service> staticMock = Mockito.mockStatic(Service.class, Mockito.CALLS_REAL_METHODS)) {
  staticMock.verify(() -> ServiceImpl.method()); // passed without errors
  staticMock.verify(() -> ServiceImpl.method()); // throws UnfinishedVerificationException 
} 
```

固定代码：

```
try (MockedStatic<ServiceImpl> staticMock = Mockito.mockStatic(Service.class, Mockito.CALLS_REAL_METHODS)) {
  staticMock.verify(() -> ServiceImpl.method());
  staticMock.verify(() -> ServiceImpl.method());
} 
```

这显然是我的错误，但 UnfinishedVerificationException 消息没有帮助**

# jquery-ui - 添加显示多个 jQuery UI 滑块平均值的文本输入

> ID：15904586
> 
> 赞同：0
> 
> 时间：2013-04-09T14:23:52.037
> 
> 标签：jquery-ui, average, uislider

我有几个使用此代码的 jQueryUI 滑块：

```
jQuery(document).ready(function ($)
{
    $( '.rwmb-slider' ).each( function() {

        var $this = $( this ),
            $input = $this.siblings( 'input' ),
            $valueLabel = $this.siblings( '.rwmb-slider-value-label' ).find( 'span' ),
            value = $input.val(),
            options = $this.data( 'options' );

        if ( !value )
        {
            value = 0;
            $input.val( 0 );
            $valueLabel.text( '0' );
        }
        else
        {
            $valueLabel.text( value );
        }

        // Assign field value and callback function when slide
        options.value = value;
        options.slide = function( event, ui )
        {
            $input.val( ui.value );
            $valueLabel.text( ui.value );

        };

        $this.slider( options );    

    });

}); 
```

**JSFIDDLE：http:** [//jsfiddle.net/q2BwE/](http://jsfiddle.net/q2BwE/)

一切正常，但我正在努力在此代码中集成一个函数，该函数允许我在文本输入中显示滑块的平均值，其值不同于“0”。

你们能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:44:33.900

这是一种方法：**[jsFiddle 示例](http://jsfiddle.net/j08691/q2BwE/2/)**。

我添加了一个文本字段 ( `<input name="average" type="text" readonly />`) 以显示在任何滑块完成移动后计算的平均值。然后我添加了以下代码来进行计算：

```
options.change = function (event, ui) {
    var avg = 0;
    var div = 0;
    $('.rwmb-slider').each(function () {
        avg += ($(this).slider('value'));
        if($(this).slider('value')>0)div++
    })
    $('input[name=average]').val(avg/div);
}; 
```

# arrays - FORM 2 上的 Arraylist 放入 Listbox Form3

> ID：15904588
> 
> 赞同：1
> 
> 时间：2013-04-09T14:23:56.220
> 
> 标签：arrays, vb.net, listbox

我有一些代码可以收集所有文本框并将它们存储为数组列表，然后所有组合框都存储为第二个列表，这是“工作”，但它似乎将框的 2-10 从上到下放置，它们是第一个框在底部，它说框 1、2、3、4、5 没有填充 6-10，你会得到 2、3、4、5，然后是 5 个空行，然后是底部的框 1。我想知道我怎么能阻止这个？即让它忽略空框。一旦我达到 15 个代表，我将发布该项目的一些图片，并在我正在努力的各个领域寻求很多帮助。使用的代码如下 FORM 2 - 集合

```
Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    Dim f As New Form3()
    Dim allValues As New List(Of String)()
    For Each xTextBoxes As TextBox In Me.Controls.OfType(Of TextBox)()
        f.i.AddRange(xTextBoxes.Text.Split(","))
    Next
    Dim allValues2 As New List(Of String)()
    For Each xComboBoxes As ComboBox In Me.Controls.OfType(Of ComboBox)()
        f.l.AddRange(xComboBoxes.Text.Split(","))
    Next
    f.ShowDialog()

End Sub 
```

表格 3 中的打印输出

```
Public i As New List(Of String)()
Public l As New List(Of String)()

Private Sub Form3_Load(sender As Object, e As EventArgs) Handles Me.Load
    ListBox1.Items.AddRange(i.ToArray())
    ListBox2.Items.AddRange(l.ToArray())
End Sub 
```

如果我有文本框 1,2,3,4 填充 111,111,111 然后 222,222,222 然后 33,33 和 44,44 这就是它在列表框中的显示方式

222
222
222
33
33
44
44
(空白行)
(空白行)
(空白行)
(空白行)
(空白行)
(空白行)
111
111
111

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:05:27.430

我建议`RemoveEmptyEntries`在调用`Split`方法时使用该选项，如下所示：

```
f.i.AddRange(xTextBoxes.Text.Split({","}, StringSplitOptions.RemoveEmptyEntries)) 
```

如果由于某种原因这不起作用，我只需在使用它之前检查该值是否为空：

```
If xTextBoxes.Text <> String.Empty Then
    f.i.AddRange(xTextBoxes.Text.Split(","))
End If 
```

顺便说一句，你实际上并没有使用`allValues`或`allValues2`在任何地方......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:00:23.997

您可以只使用 for-loop 或 for-each 而不是 addrange 并且只传输非空项，或者遍历列表并删除空项。

此外，您可能希望将表单创建更改为单例，因此请确保您尝试从 form3 访问的数据与正在运行的数据相同。

是错误的编码还是您需要数组列表？也许你可以解释一下？（这不是直接的解决方案，但也可以帮助您改进编码）

# graphite - Graphite Graphs 渲染计数占其总数的 1/3

> ID：15904590
> 
> 赞同：1
> 
> 时间：2013-04-09T14:24:03.573
> 
> 标签：graphite

我在 storage-schemas.conf 文件中设置了以下保留规则。

```
retentions = 1s:5m,1m:1d,15m:90d,1d:10y 
```

我的存储聚合如下所示：

```
[default]
pattern = .*
xFilesFactor = 0
aggregationMethod = sum 
```

问题：从第二个保留存档 (1m:1d) 呈现的任何图表的 Y 轴标签都在正确值的 33% 处。在所有其他方面，图形都正确呈现。当我将时间段增加到超过 24 小时时，Y 轴标签正确显示。

当我使用 graphlot 而不是石墨显示相同的图表时，Y 轴会正确呈现。（除了我真的更喜欢石墨的外观/感觉而不是graphlot）

我在想这是一个石墨渲染错误。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:30:44.497

我认为这可能有几个原因：

1) 编辑存储聚合后，是否删除了相关的耳语文件？请注意，如果您不这样做，那么它仍然使用默认配置 - 这意味着它使用平均方法进行聚合。在这种情况下，您必须删除您的耳语文件并再次检查。

顺便说一句，您可以使用 Whisper-info 文件验证每个 wsp 文件的当前聚合：whisper-info.py your_metric_file_name.wsp

2) 例如，如果您尝试通过 JSON 格式的渲染 API 获取数据点，它是否正常工作？ [https://graphite.readthedocs.org/en/latest/render_api.html](https://graphite.readthedocs.org/en/latest/render_api.html)

如果它确实可以正常工作，那么问题可能出在 Web 应用程序渲染上。我遇到了这个问题，我通过使用**minXStep**属性解决了这个问题。在这里查看我的问题 + 答案：[Graphite - Multi archives level retrieve issue](https://stackoverflow.com/questions/15404618/graphite-multi-archives-level-retrieval-issue)

# permissions - 我们可以为门户定义自定义权限吗？

> ID：15904592
> 
> 赞同：7
> 
> 时间：2013-04-09T14:24:05.383
> 
> 标签：permissions, liferay, liferay-6, administration

**环境**：Liferay 6.1 GA3 EE

我们可以为门户定义自定义权限吗？

我们可以通过创建带有`<portlet-resource>`标签的 XML 并在其中定义来在我们的插件 portlet 中创建自定义权限`<action-key>`。

当我在控制面板中为角色定义权限时，我的 portlet 出现在部分`Site Applications`中，现在我想要的是在 portlet 或钩子中创建自定义权限（而不是通过 EXT），它应该有一个单独的类别，`My Custom`并且应该有自定义之类`<action-key>ACCESS_EMAIL</action-key>`的权限`<action-key>ACCESS_TOOLSET<\action-key>`

简而言之`Portal`，当我为自定义门户（常规）角色定义权限时，我的自定义类别应出现在如下图所示的部分中：

![门户定义权限](https://i.stack.imgur.com/YGJZp.png "控制面板 --> 选择门户角色 --> 定义权限")

我不想将此权限用于特定的 portlet，但需要在 jsp-hooks 或我的任何其他自定义 portlet 中使用它。就像我们在-->中拥有`ADD_SITE`, `ADD_USER`etc 权限一样，我希望这些权限是通用的。`Portal``General`

***编辑***
为了使 portlet 出现在任何部分中，我创建了一个简单的 custom-portlet，因此 portlet 出现在`Site Application`部分中，如果我愿意，我也可以让它出现在`Control Panel`部分中。

但现在的问题是我在这个 portlet 中没有任何视图或任何实现，所以我通过更新`liferay-display.xml`并将其置于`category.hidden`. 这也将其从`Define Permission`下拉列表中隐藏。

如果我不使用liferay，则在从停靠栏中的菜单访问它时`lifeay-display.xml`将其置于类别下。:-(`Undefined``+Add`

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T07:23:19.640

这就是我们实现它的方式：

1.  使用此 Portlet 的权限文件创建一个自定义 Portlet，例如`/resource-actions/custompermission.xml`指定我们想要的不同自定义权限。完整的步骤与[此 wiki](http://www.liferay.com/community/wiki/-/wiki/Main/Permissioning+in+Plugin+Environment "插件环境中的权限")相同。
2.  使这个 portlet 成为隐藏的 portlet，这样它就不会出现在`Add`停靠栏的菜单中，既不会出现在控制面板中，也不会出现在下拉菜单中`Define Permissions`。
3.  现在创建一个 JSP 钩子（您可以创建一个单独的插件或将钩子包含在第 1 点定义的自定义 portlet 中）并修改`/docroot/html/portlet/roles_admin/edit_role_permissions_navigation.jspf`以包含我们的自定义类别：

    ```
    <aui:form action="<%= currentURL %>" name="resourceSelection">
        <aui:fieldset>
            <aui:select changesContext="<%= true %>" name="add-permissions" onchange='<%= renderResponse.getNamespace() + "addPermissions(this);" %>'>
                <aui:option label="" />

                <%-- Our customization starts here  --%>

                <%--
                    We have added our very own option group but this is not required just the <aui:option> will do
                --%>
                <optgroup label="<liferay-ui:message key="custom" />">

                <%
                if (_isCustomPermissionsPortlet(CUSTOM_PERMISSIONS_PORTLET)) {

                    editPermissionsURL.setParameter("portletResource", CUSTOM_PERMISSIONS_PORTLET);
                    editPermissionsURL.setParameter("showModelResources", "0");
                %>

                    <%--
                        and here we add our own Permission category drop-down option
                    --%>

                    <aui:option label="custom-permissions"
                            selected="<%= _isCurrent(editPermissionsURL.toString(), portletResource, showModelResources) %>"
                            value="<%= editPermissionsURL.toString() %>" />

                <%
                }
                %>
                </optgroup>
                <%-- Our customization ends here --%>

            <c:choose>
                <c:when test="<%= role.getType() == RoleConstants.TYPE_SITE %>">
                    <optgroup label="<liferay-ui:message key="administration" />">

                    <% // Other liferay stuff continues ... 
    ```

    在 JSP 的末尾，我们有：

    ```
    // ... other liferay stuff 

    private boolean _isOrganizationPortlet(String portletId) {
        return ArrayUtil.contains(_ORGANIZATION_PORTLETS, portletId);
    }

    private boolean _isPortalPortlet(String portletId) {
        return ArrayUtil.contains(_PORTAL_PORTLETS, portletId);
    }

    // Our customization starts here
    // portlet's ID
    public static final String CUSTOM_PERMISSIONS_PORTLET = "CustomPermissions_WAR_CustomPermissionsportlet";

    private static final String[] _CUSTOM_PERMISSIONS_PORTLET = {
        CUSTOM_PERMISSIONS_PORTLET,
    };

    private boolean _isCustomPermissionsPortlet(String portletId) {
        return ArrayUtil.contains(_CUSTOM_PERMISSIONS_PORTLET, portletId);
    }

    // Our customization ends here 
    ```

    这是它在控制面板中的外观：

    ![控制面板中的自定义权限](https://i.stack.imgur.com/toOcM.png "在定义权限中添加了额外的选项组")

    ***`Portal`***我们也可以通过将自定义代码移动到 JSP 中的该位置来移动该部分中的权限。

    上面有它的好处是，当我们要为站点角色设置定义权限时，它会显示出来。

希望这可以帮助某人。

# javascript - 纯Javascript中的翻页效果

> ID：15904594
> 
> 赞同：5
> 
> 时间：2013-04-09T14:24:06.040
> 
> 标签：javascript, flip, turnjs

对于一个电子书阅读器网络应用程序，我试图为电子书制作一个花哨的书本式查看器，比如适用于 iPad 和 iPhone 的 iBooks。

我发现了出色的 jQuery 插件，这正是我想要达到的。唯一的问题是，它是一个 jQuery 插件，所以我不能使用它。这样的事情怎么可能用纯 Javascript 来完成？

jQuery翻页插件链接：[Turn JS jQuery Plugin](http://www.turnjs.com/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T16:58:41.483

尽管您可能认为单独使用 JavaScript 会更好，但您应该明白，如果没有正确的数学理解，这可能非常困难，而且您可能会花费更多时间来弄清楚您所展示的插件多于。在谷歌的任何情况下，我都发现了几个 jsfiddles 可以让你朝着正确的方向前进。

纯 JavaScript 翻转效果：http: [//jsfiddle.net/maitrekaio/nuUNd/](http://jsfiddle.net/maitrekaio/nuUNd/)

```
// Dimensions of the whole book
var BOOK_WIDTH = 630;
var BOOK_HEIGHT = 260;

// Dimensions of one page in the book
var PAGE_WIDTH = 300;
var PAGE_HEIGHT = 250;

// Vertical spacing between the top edge of the book and the papers
var PAGE_Y = (BOOK_HEIGHT - PAGE_HEIGHT) / 2;

// The canvas size equals to the book dimensions + this padding
var CANVAS_PADDING = 30;

var progress = 1;
var target = -1;

var canvas = document.getElementById("pageflip-canvas");
var context = canvas.getContext("2d");
var fillElt = document.getElementById("fill");
var droppedShadowElt = document.getElementById("droppedShadow");
var sharpShadowElt = document.getElementById("sharpShadow");
var progressElt = document.getElementById("progress");
var foldWidthElt = document.getElementById("foldWidth");
var foldXElt = document.getElementById("foldX");

// Resize the canvas to match the book size
canvas.width = BOOK_WIDTH;
canvas.height = BOOK_HEIGHT + (CANVAS_PADDING * 2);

progressElt.addEventListener("change", render, false);

function render() {

    // Reset all pixels in the canvas
    context.clearRect(0, 0, canvas.width, canvas.height);

    // Ease progress towards the target value 
    progress = progressElt.value;
    // Strength of the fold is strongest in the middle of the book
    var strength = 1 - Math.abs(progress);

    // Width of the folded paper
    var foldWidth = (PAGE_WIDTH * 0.5) * (1 - progress);

    // X position of the folded paper
    var foldX = PAGE_WIDTH * progress + foldWidth;

    // How far the page should outdent vertically due to perspective
    var verticalOutdent = 20 * strength;

    foldWidthElt.value = foldWidth;
    foldXElt.value = foldX;

    context.save();
    context.translate((BOOK_WIDTH / 2), PAGE_Y + CANVAS_PADDING);

    drawFoldedPaper(foldX, foldWidth, verticalOutdent, fillElt.checked);

    if (sharpShadowElt.checked) {
        drawSharpShadow(foldX, foldWidth, verticalOutdent, strength);
    }

    if (droppedShadowElt.checked) {
        drawDroppedShadow(foldX, foldWidth, strength);
    }

    context.restore();
}

// Draw the folded piece of paper
function drawFoldedPaper(foldX, foldWidth, verticalOutdent, fill) {
    context.beginPath();
    context.moveTo(foldX, 0);
    context.lineTo(foldX, PAGE_HEIGHT);
    context.quadraticCurveTo(foldX, PAGE_HEIGHT + (verticalOutdent * 2), foldX - foldWidth, PAGE_HEIGHT + verticalOutdent);
    context.lineTo(foldX - foldWidth, -verticalOutdent);
    context.quadraticCurveTo(foldX, -verticalOutdent * 2, foldX, 0);

    if (fill) {
        // Gradient applied to the folded paper (highlights & shadows)
        var paperShadowWidth = (PAGE_WIDTH * 0.5) * Math.max(Math.min(1 - progress, 0.5), 0);
        var foldGradient = context.createLinearGradient(foldX - paperShadowWidth, 0, foldX, 0);
        foldGradient.addColorStop(0.35, '#fafafa');
        foldGradient.addColorStop(0.73, '#eeeeee');
        foldGradient.addColorStop(0.9, '#fafafa');
        foldGradient.addColorStop(1.0, '#e2e2e2');
        context.fillStyle = foldGradient;
        context.fill();
    }
    context.strokeStyle = 'rgba(0,0,0,0.06)';
    context.lineWidth = 2;
    context.stroke();
}

// Draw a sharp shadow on the left side of the page
function drawSharpShadow(foldX, foldWidth, verticalOutdent, strength) {
    context.strokeStyle = 'rgba(0,0,0,'+(0.05 * strength)+')';
    context.lineWidth = 30 * strength;
    context.beginPath();
    context.moveTo(foldX - foldWidth, -verticalOutdent * 0.5);
    context.lineTo(foldX - foldWidth, PAGE_HEIGHT + (verticalOutdent * 0.5));
    context.stroke();
}

function drawDroppedShadow(foldX, foldWidth, strength) {    
    // Right side drop shadow
    var rightShadowWidth = (PAGE_WIDTH * 0.5) * Math.max(Math.min(strength, 0.5), 0);
    var rightShadowGradient = context.createLinearGradient(foldX, 0, foldX + rightShadowWidth, 0);
    rightShadowGradient.addColorStop(0, 'rgba(0,0,0,'+(strength*0.2)+')');
    rightShadowGradient.addColorStop(0.8, 'rgba(0,0,0,0.0)');

    context.fillStyle = rightShadowGradient;
    context.beginPath();
    context.moveTo(foldX, 0);
    context.lineTo(foldX + rightShadowWidth, 0);
    context.lineTo(foldX + rightShadowWidth, PAGE_HEIGHT);
    context.lineTo(foldX, PAGE_HEIGHT);
    context.fill();

    // Left side drop shadow
    var leftShadowWidth = (PAGE_WIDTH * 0.5) * Math.max(Math.min(strength, 0.5), 0);
    var leftShadowGradient = context.createLinearGradient(foldX - foldWidth - leftShadowWidth, 0, foldX - foldWidth, 0);
    leftShadowGradient.addColorStop(0, 'rgba(0,0,0,0.0)');
    leftShadowGradient.addColorStop(1, 'rgba(0,0,0,'+(strength*0.15)+')');

    context.fillStyle = leftShadowGradient;
    context.beginPath();
    context.moveTo(foldX - foldWidth - leftShadowWidth, 0);
    context.lineTo(foldX - foldWidth, 0);
    context.lineTo(foldX - foldWidth, PAGE_HEIGHT);
    context.lineTo(foldX - foldWidth - leftShadowWidth, PAGE_HEIGHT);
    context.fill();    
} 
```

jQuery 翻转效果（转换为纯 JavaScript 应该不是问题）：http: [//jsfiddle.net/pixelass/TW43V/61/](http://jsfiddle.net/pixelass/TW43V/61/)

另一个jQuery翻转效果：http: [//jsfiddle.net/wdm954/DkZsY/2/](http://jsfiddle.net/wdm954/DkZsY/2/)

因为您希望纯 JavaScript 知道您需要自己弄清楚如何做到这一点。即使它们不是纯 js，使用这些示例作为指南也会很有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-16T19:56:53.887

这个问题相当陈旧，但我会在其中引用已批准答案的想法 - [http://www.html5rocks.com/en/tutorials/casestudies/20things_pageflip/](http://www.html5rocks.com/en/tutorials/casestudies/20things_pageflip/)。很好的教程，有解释和例子。

# javascript - 用文本交换图像（CSS 还是 jQuery？）

> ID：15904599
> 
> 赞同：0
> 
> 时间：2013-04-09T14:24:13.447
> 
> 标签：javascript, jquery, css

我正在尝试将图像徽标与鼠标悬停时的文本交换。

我一直在寻找 jquery 和 css 来创建这种转换，但我没有找到解决方案。希望你能帮助我一点。

这就是我所坚持的。

示例 [http://jsfiddle.net/VugzA/](http://jsfiddle.net/VugzA/)

HTML

```
<div id="logo">
<ul>
    <li>
        <a href="#home" title="Back to Home?">                        

            <span class="logo_icon">
                <img src="some.gif" alt="Logo image" width="45" height="55" />
            </span>

            <span class="text">Some Text</span>

        </a>
    </li>
</ul>
</div> 
```

CSS

```
#logo ul {
list-style: none;
margin-left: -20px;
}

.logo_icon {
display: block;
} 

.logo_icon:hover {
display: none;
}

.text {
display: none;
}

.logo_icon:hover + .text {
display: block
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:28:33.250

这是您的[小提琴的更新](http://jsfiddle.net/trajce/VugzA/1/)

更新的html：

```
<div id="logo">
<a href="#home" title="Back to Home?">                        
<span class="logo_icon">
<img src="some.gif" alt="Logo image" width="45" height="55" />
</span>
<span class="text">Some Text</span>
</a>
</div> 
```

和更新的CSS：

```
.logo_icon {
    display: block;
} 
.text {
    display: none;
}
#logo a:hover .logo_icon
{
    display:none;
}
#logo a:hover .text
{
    display:block;
} 
```

我在这里所做的是将`hover`事件绑定在链接上，而不是像您所做的那样（悬停在图像和文本上），并且图像和文本跨度是该元素的子元素。因此，当您将鼠标悬停在链接上时，会应用特定样式。

# php - 手动将“产品型号”编号添加到 Zen Cart 中的产品列表中

> ID：15904603
> 
> 赞同：2
> 
> 时间：2013-04-09T14:24:24.807
> 
> 标签：php, mysql, case, zen-cart

我试图找出如何手动将产品型号添加到 zencart 的类别产品列表中的每个标题，而不是让型号出现在它自己的列中。

似乎任何使用实例：

```
$listing->fields['products_model'] 
```

“product_listing.php”文件中的“product_listing.php”文件只有在admin中的参数被发送为true时才会起作用。这很好，但是我得到了产品模型的两个实例。一个在它自己的列中包含变量（我不想要），另一个是我将变量放在其他任何地方。

这是我所指的部分，您会注意到为模型设置了一个案例以拥有自己的列，但是我想将它放在标题之前而不是在产品列表名称案例下并删除该列。

```
for ($col=0, $n=sizeof($column_list); $col<$n; $col++) {
   $lc_align = '';
   switch ($column_list[$col]) {
      case 'PRODUCT_LIST_MODEL':
         $lc_align = '';
         $lc_text = $listing->fields['products_model'];
         break;
      case 'PRODUCT_LIST_NAME':
         $lc_align = '';
         $lc_text = '<h3 class="itemTitle"><a href="'.zen_href_link(zen_get_info_page($listing->fields['products_id']), 'cPath=' . (($_GET['manufacturers_id'] > 0 and $_GET['filter_id'] > 0) ?  zen_get_generated_category_path_rev($_GET['filter_id']) : ($_GET['cPath'] > 0 ? zen_get_generated_category_path_rev($_GET['cPath']) : zen_get_generated_category_path_rev($listing->fields['master_categories_id']))) . '&products_id=' . $listing->fields['products_id']) . '">' . $listing->fields['products_name'] . '</a></h3> 
```

有没有一种方法可以在绕过管理中的参数集的同时引用型号并放置在每一行的标题中？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T23:43:35.030

我只需将产品型号 ($listing->fields['products_model']) 附加到产品标题：

```
case 'PRODUCT_LIST_NAME':
    $lc_align = '';
    $lc_text = '<h3 class="itemTitle"><a href="' . zen_href_link(zen_get_info_page($listing->fields['products_id']), 'cPath=' . (($_GET['manufacturers_id'] > 0 and $_GET['filter_id'] > 0) ?  zen_get_generated_category_path_rev($_GET['filter_id']) : ($_GET['cPath'] > 0 ? zen_get_generated_category_path_rev($_GET['cPath']) : zen_get_generated_category_path_rev($listing->fields['master_categories_id']))) . '&products_id=' . $listing->fields['products_id']) . '">' . $listing->fields['products_name'] . '[' . $listing->fields['products_model'] . ']' . '</a></h3><div class="listingDescription">' . zen_trunc_string(zen_clean_html(stripslashes(zen_get_products_description($listing->fields['products_id'], $_SESSION['languages_id']))), PRODUCT_LIST_DESCRIPTION) . '</div>';
    break; 
```

记得关闭 Zen Cart Admin 中的 Model Number 列。

我没有在 Zen Cart 中测试过这个 - 希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T20:14:29.047

一段时间后，我想出了自己问题的答案。这实际上比我想象的要容易得多。希望这将帮助其他可能想做同样事情的人。

转到“包含/index_filters/default_filter.php：

据我所知，这是对“产品列表”模块进行所有查询的地方，以显示特定类别或制造商的列表。默认情况下，当前查询不包括“p.products_model”。只需在每个查询中添加列标识符（总共 4 个位置：类别、类别：全部、制造商、制造商：全部）。

例子：

```
// We are asked to show only specific category
  $listing_sql = "select " . $select_column_list . " p.products_id, p.products_model, p.products_type, p.master_categories_id, p.manufacturers_id, p.products_price, p.products_tax_class_id, pd.products_description, IF(s.status = 1, s.specials_new_products_price, NULL) as specials_new_products_price, IF(s.status = 1, s.specials_new_products_price, p.products_price) as final_price, p.products_sort_order, p.product_is_call, p.product_is_always_free_shipping, p.products_qty_box_status
  from " . TABLE_PRODUCTS . " p left join " . TABLE_SPECIALS . " s on p.products_id = s.products_id, " .
  TABLE_PRODUCTS_DESCRIPTION . " pd, " .
  TABLE_MANUFACTURERS . " m, " .
  TABLE_PRODUCTS_TO_CATEGORIES . " p2c
  where p.products_status = 1
    and p.manufacturers_id = m.manufacturers_id
    and m.manufacturers_id = '" . (int)$_GET['filter_id'] . "'
    and p.products_id = p2c.products_id
    and pd.products_id = p2c.products_id
    and pd.language_id = '" . (int)$_SESSION['languages_id'] . "'
    and p2c.categories_id = '" . (int)$current_category_id . "'" .
    $alpha_sort;
} 
```

从那里，您将能够在任何您想要的地方调用产品型号代码“$listing->fields['products_model']”，而不会在管理后端中的参数中断它的显示。就我而言，我将它直接包含在模块中“product_listing.php”文件中的产品名称下。

例子：

```
$lc_text = '<h3 class="itemTitle"><a href="' . zen_href_link(zen_get_info_page($listing->fields['products_id']), 'cPath=' . (($_GET['manufacturers_id'] > 0 and $_GET['filter_id'] > 0) ?  zen_get_generated_category_path_rev($_GET['filter_id']) : ($_GET['cPath'] > 0 ? zen_get_generated_category_path_rev($_GET['cPath']) : zen_get_generated_category_path_rev($listing->fields['master_categories_id']))) . '&products_id=' . $listing->fields['products_id']) . '">' . $listing->fields['products_name'] . '</a></h3><div id=\"listing_model\">Item Code: ' .$listing->fields['products_model'] . '</div> 
```

希望这可以帮助某人。为什么他们让您最初为产品模型设置了一整列，这超出了我的理解，因为“Listing New”和“Listing All”都将其与标题和描述显示在同一列中。

# webgl - 纹理和线条未在 WebGL 中混合

> ID：15904609
> 
> 赞同：1
> 
> 时间：2013-04-09T14:24:49.183
> 
> 标签：webgl, textures, lines

我应该有一个使用 webgl 的 2d 程序，并且应该在画布上有一张图片，这是一个纹理，在它上面我也使用 webgl 画线。但事情是两者都有不同的着色器程序，每当我画线时，它就会变得一团糟。那么有人可以帮忙吗？

# vb.net - 显示以表单为中心的 MessageBox

> ID：15904610
> 
> 赞同：6
> 
> 时间：2013-04-09T14:24:51.940
> 
> 标签：vb.net, visual-studio, position, messagebox

有一种方法可以在没有子类化或挂钩的情况下使 MessageBox 居中？

我正在寻找 VB.NET 代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T14:45:23.380

VB.NET 的解决方案：

此代码取自 @Hans Passant 的一个 asnwer 并翻译：[Winforms-如何使 MessageBox 以 MainForm 为中心显示？](https://stackoverflow.com/questions/2576156/winforms-how-can-i-make-messagebox-appear-centered-on-mainform)

Centered_MessageBox.vb

```
Imports System.Text
Imports System.Drawing
Imports System.Windows.Forms
Imports System.Runtime.InteropServices

Class Centered_MessageBox
    Implements IDisposable
    Private mTries As Integer = 0
    Private mOwner As Form

    Public Sub New(owner As Form)
        mOwner = owner
        owner.BeginInvoke(New MethodInvoker(AddressOf findDialog))
    End Sub

    Private Sub findDialog()
        ' Enumerate windows to find the message box
        If mTries < 0 Then
            Return
        End If
        Dim callback As New EnumThreadWndProc(AddressOf checkWindow)
        If EnumThreadWindows(GetCurrentThreadId(), callback, IntPtr.Zero) Then
            If System.Threading.Interlocked.Increment(mTries) < 10 Then
                mOwner.BeginInvoke(New MethodInvoker(AddressOf findDialog))
            End If
        End If
    End Sub
    Private Function checkWindow(hWnd As IntPtr, lp As IntPtr) As Boolean
        ' Checks if <hWnd> is a dialog
        Dim sb As New StringBuilder(260)
        GetClassName(hWnd, sb, sb.Capacity)
        If sb.ToString() <> "#32770" Then
            Return True
        End If
        ' Got it
        Dim frmRect As New Rectangle(mOwner.Location, mOwner.Size)
        Dim dlgRect As RECT
        GetWindowRect(hWnd, dlgRect)
        MoveWindow(hWnd, frmRect.Left + (frmRect.Width - dlgRect.Right + dlgRect.Left) \ 2, frmRect.Top + (frmRect.Height - dlgRect.Bottom + dlgRect.Top) \ 2, dlgRect.Right - dlgRect.Left, dlgRect.Bottom - dlgRect.Top, True)
        Return False
    End Function
    Public Sub Dispose() Implements IDisposable.Dispose
        mTries = -1
    End Sub

    ' P/Invoke declarations
    Private Delegate Function EnumThreadWndProc(hWnd As IntPtr, lp As IntPtr) As Boolean
    <DllImport("user32.dll")> _
    Private Shared Function EnumThreadWindows(tid As Integer, callback As EnumThreadWndProc, lp As IntPtr) As Boolean
    End Function
    <DllImport("kernel32.dll")> _
    Private Shared Function GetCurrentThreadId() As Integer
    End Function
    <DllImport("user32.dll")> _
    Private Shared Function GetClassName(hWnd As IntPtr, buffer As StringBuilder, buflen As Integer) As Integer
    End Function
    <DllImport("user32.dll")> _
    Private Shared Function GetWindowRect(hWnd As IntPtr, ByRef rc As RECT) As Boolean
    End Function
    <DllImport("user32.dll")> _
    Private Shared Function MoveWindow(hWnd As IntPtr, x As Integer, y As Integer, w As Integer, h As Integer, repaint As Boolean) As Boolean
    End Function
    Private Structure RECT
        Public Left As Integer
        Public Top As Integer
        Public Right As Integer
        Public Bottom As Integer
    End Structure
End Class 
```

> 用法：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Using New Centered_MessageBox(Me)
        MessageBox.Show("Test Text", "Test Title", MessageBoxButtons.OK)
    End Using
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:42:33.733

可悲的是，没有办法将 a 集中`MessageBox`到父母身上。它默认以屏幕为中心，无法更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-09T20:00:50.813

创建您自己的 - 轻松创建一个表单（去掉属性中的控制框设置为 false）放置文本框（称为 TextBox_Prompt）并将其设置为属性中的多行在文本框下方添加 3 个按钮（宽/高足以舒适地按住“取消”）将以下代码添加到您的表单中（我使用 | 字符表示换行符）：

```
Public Class frmMsgBox
 Private mName As String = "Message Box"           ' default name for form
 Private mLocation As Point = New Point(400, 400)  ' default location in case user does set 
 Private mStyle As MsgBoxStyle
 Private mPrompt As String
 Private mResult As MsgBoxResult
 Private b1Result As MsgBoxResult
 Private b2Result As MsgBoxResult
 Private b3Result As MsgBoxResult
 Public WriteOnly Property Style As MsgBoxStyle
    Set(value As MsgBoxStyle)
        mStyle = value
    End Set
 End Property
 Public WriteOnly Property Prompt As String
    Set(value As String)
        mPrompt = value
    End Set
 End Property
 Public ReadOnly Property Result As MsgBoxResult
    Get
        Return mResult
    End Get
 End Property
 Public WriteOnly Property pLocation As Point
    Set(value As Point)
        mLocation = value
    End Set
 End Property
 Public WriteOnly Property sName As String
    Set(value As String)
        mName = value
    End Set
 End Property

 Private Sub frmMsgBox_Load(sender As Object, e As EventArgs) Handles Me.Load
    Dim strPrompt() As String = mPrompt.Split("|")   ' use | for splitting lines
    Dim sWidth As Integer = 0
    Dim sHeight As String = ""
    Me.Text = mName
    For Each sLine As String In strPrompt   ' get maximum width and height necessary for Prompt TextBox
        sWidth = Math.Max(sWidth, TextRenderer.MeasureText(sLine, TextBox_Prompt.Font).Width)
        sHeight += "@" + vbCrLf ' TextRenderer.MeasureText("@", TextBox_Prompt.Font).Height
        TextBox_Prompt.Text += sLine + vbCrLf
    Next
    TextBox_Prompt.Width = Math.Min(800, sWidth + 5)   ' set max width arbitrarily at 800
    TextBox_Prompt.Height = Math.Min(600, TextRenderer.MeasureText(sHeight, TextBox_Prompt.Font).Height)     ' set max height to 600 pixels
    Me.Width = Math.Max(Me.Width, TextBox_Prompt.Width + Me.Width - Me.ClientRectangle.Width + 20)
    TextBox_Prompt.Left = Math.Max(10, (Me.ClientRectangle.Width - TextBox_Prompt.Width) \ 2)
    Button1.Top = TextBox_Prompt.Top + TextBox_Prompt.Height + 20
    Button2.Top = Button1.Top : Button3.Top = Button1.Top
    Me.Height = Me.Height - Me.ClientRectangle.Height + 2 * TextBox_Prompt.Top + TextBox_Prompt.Height + Button1.Height + 20

    Dim Space2 As Integer = (Me.ClientRectangle.Width - 2 * Button1.Width) / 3
    Dim Space3 As Integer = (Me.ClientRectangle.Width - 3 * Button1.Width) / 4
    Select Case mStyle
        Case MsgBoxStyle.AbortRetryIgnore
            Button1.Text = "Abort" : Button2.Text = "Retry" : Button3.Text = "Ignore"
            Button1.Left = Space3
            Button2.Left = 2 * Space3 + Button1.Width
            Button3.Left = 3 * Space3 + 2 * Button1.Width
            b1Result = MsgBoxResult.Abort : b2Result = MsgBoxResult.Retry : b3Result = MsgBoxResult.Ignore
        Case MsgBoxStyle.YesNoCancel
            Button1.Text = "Yes" : Button2.Text = "No" : Button3.Text = "Cancel"
            Button1.Left = Space3
            Button2.Left = 2 * Space3 + Button1.Width
            Button3.Left = 3 * Space3 + 2 * Button1.Width
            b1Result = MsgBoxResult.Yes : b2Result = MsgBoxResult.No : b3Result = MsgBoxResult.Cancel
        Case MsgBoxStyle.YesNo
            Button1.Text = "Yes" : Button2.Text = "No" : Button3.Visible = False
            Button1.Left = Space2
            Button2.Left = 2 * Space2 + Button1.Width
            b1Result = MsgBoxResult.Yes : b2Result = MsgBoxResult.No
        Case MsgBoxStyle.OkCancel
            Button1.Text = "Ok" : Button2.Text = "Cancel" : Button3.Visible = False
            Button1.Left = Space2
            Button2.Left = 2 * Space2 + Button1.Width
            b1Result = MsgBoxResult.Ok : b2Result = MsgBoxResult.Cancel
        Case MsgBoxStyle.RetryCancel
            Button1.Text = "Retry" : Button2.Text = "Cancel" : Button3.Visible = False
            Button1.Left = Space2
            Button2.Left = 2 * Space2 + Button1.Width
            b1Result = MsgBoxResult.Retry : b2Result = MsgBoxResult.Cancel
        Case MsgBoxStyle.OkOnly
            Button1.Visible = False : Button2.Text = "Ok" : Button3.Visible = False
            Button1.Left -= Space2 : Button2.Width += 2 * Space2
            b2Result = MsgBoxResult.Ok
    End Select
    Me.Location = New Point(mLocation.X - Me.Width \ 2, mLocation.Y - Me.Height \ 2)
 End Sub
 Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    mResult = b1Result
    Me.Close()
 End Sub
 Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    mResult = b2Result
    Me.Close()
 End Sub
 Private Sub Button3_Click(sender As Object, e As EventArgs) Handles Button3.Click
    mResult = b3Result
    Me.Close()
 End Sub
End Class 
```

要使用您的程序，您可以执行以下操作

```
Dim ans as MsgBoxResult
Using f As New frmMsgBox With {
            .sName = "form tile goes here ",
            .Style = MsgBoxStyle.YesNoCancel,            ' or whatever style
            .Prompt = "Your prompt|2nd line||4th line",
            .pLocation = New Point(Me.Left + Me.Width \ 2, Me.Top + Me.Height \ 2)
        }                            ' this location will center MsgBox on form
            f.ShowDialog()
            ans = f.Result
        End Using
        If ans = MsgBoxResult.Yes Then
           'do whatever
        ElseIf ans = MsgBoxResult.No then
            'do not whatever
        Else  ' was cancel
            ' do cancel
        End If 
```

我一直使用这个表单你也可以在你的表单以及其他东西中添加图片属性/框。乔治

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-26T08:07:38.870

这是我自己的消息框使用C# winform，除了实现父窗体居中外，还可以自定义按钮文字和图标。您可以自己将其转换为 VB 代码。

```
using System;
using System.Drawing;
using System.Linq;
using System.Windows.Forms;

namespace BluePointLilac.Methods
{
    /// <summary>在窗体居中显示的MessageBox</summary>
    public class MessageBoxEx
    {
        public static DialogResult Show(string text, string caption = null,
            MessageBoxButtons buttons = MessageBoxButtons.OK,
            MessageBoxIcon boxIcon = MessageBoxIcon.None)
        {
            using(MessageBoxForm frm = new MessageBoxForm(text, caption, buttons, boxIcon))
            {
                return frm.ShowDialog();
            }
        }

        public static string Show(string text, string caption,
            string[] buttonTexts, Image boxImaage, bool cancelBox = false)
        {
            using(MessageBoxForm frm = new MessageBoxForm(text, caption, buttonTexts, boxImaage, cancelBox))
            {
                frm.ShowDialog();
                return frm.Tag?.ToString();
            }
        }

        sealed class MessageBoxForm : Form
        {
            private MessageBoxForm(string text, string caption)
            {
                lblText.Text = text;
                this.Text = caption;
                this.Font = SystemFonts.MessageBoxFont;
                this.ShowIcon = this.ShowInTaskbar = false;
                this.MaximizeBox = this.MinimizeBox = false;
                this.FormBorderStyle = FormBorderStyle.FixedSingle;
                this.StartPosition = FormStartPosition.CenterParent;
            }

            public MessageBoxForm(string text, string caption,
                string[] buttonTexts, Image boxImage, bool cancelBox) : this(text, caption)
            {
                this.CancelBox = cancelBox;
                this.InitializeComponents(buttonTexts, boxImage);
                foreach(Button button in flpButtons.Controls)
                {
                    button.Click += (sender, e) =>
                    {
                        this.Tag = button.Text;
                        this.Close();
                    };
                }
            }

            public MessageBoxForm(string text, string caption,
                MessageBoxButtons buttons, MessageBoxIcon boxIcon) : this(text, caption)
            {
                string[] buttonTexts = null;
                Image boxImage = null;
                switch(buttons)
                {
                    case MessageBoxButtons.OK:
                        buttonTexts = new[] { "OK" }; break;
                    case MessageBoxButtons.OKCancel:
                        buttonTexts = new[] { "Cancel", "OK" }; break;
                    case MessageBoxButtons.AbortRetryIgnore:
                        buttonTexts = new[] { "&Ignore", "&Retry", "&Abort" }; break;
                    case MessageBoxButtons.YesNoCancel:
                        buttonTexts = new[] { "Cancel", "&No", "&Yes" }; break;
                    case MessageBoxButtons.YesNo:
                        buttonTexts = new[] { "&No", "&Yes" }; break;
                    case MessageBoxButtons.RetryCancel:
                        buttonTexts = new[] { "Cancel", "&Retry" }; break;
                }
                switch(boxIcon)
                {
                    case MessageBoxIcon.Question:
                        boxImage = SystemIcons.Question.ToBitmap(); break;
                    case MessageBoxIcon.Error:
                        boxImage = SystemIcons.Error.ToBitmap(); break;
                    case MessageBoxIcon.Warning:
                        boxImage = SystemIcons.Warning.ToBitmap(); break;
                    case MessageBoxIcon.Information:
                        boxImage = SystemIcons.Information.ToBitmap(); break;
                }
                this.CancelBox = !buttonTexts.Contains("Cancel");
                this.InitializeComponents(buttonTexts, boxImage);
                foreach(Button button in flpButtons.Controls)
                {
                    button.Click += (sender, e) =>
                    {
                        switch(button.Text)
                        {
                            case "OK":
                                this.DialogResult = DialogResult.OK; break;
                            case "Cancel":
                                this.DialogResult = DialogResult.Cancel; break;
                            case "&Yes":
                                this.DialogResult = DialogResult.Yes; break;
                            case "&No":
                                this.DialogResult = DialogResult.No; break;
                            case "&Abort":
                                this.DialogResult = DialogResult.Abort; break;
                            case "&Retry":
                                this.DialogResult = DialogResult.Retry; break;
                            case "&Ignore":
                                this.DialogResult = DialogResult.Ignore; break;
                        }
                    };
                }
            }

            private void InitializeComponents(string[] buttonTexts, Image boxImage)
            {
                int w1 = 0;
                Size buttonSize = new Size(75, 27);
                for(int i = 0; i < buttonTexts.Length; i++)
                {
                    Button button = new Button
                    {
                        Margin = new Padding(0, 12, 12, 12),
                        Parent = flpButtons,
                        AutoSize = true,
                        Text = buttonTexts[i],
                    };
                    button.Width = Math.Max(buttonSize.Width, button.Width);
                    button.Height = Math.Max(buttonSize.Height, button.Height);
                    buttonSize = button.Size;
                    w1 += button.Width + button.Margin.Horizontal;
                }
                picIcon.Image = boxImage;
                if(boxImage == null)
                {
                    picIcon.Visible = false;
                    lblText.Left = 35;
                }
                pnlInfo.Controls.AddRange(new Control[] { picIcon, lblText });
                this.Controls.AddRange(new Control[] { pnlInfo, flpButtons });
                pnlInfo.Height = lblText.Height + lblText.Top * 2;
                int w2 = lblText.Right + picIcon.Left;
                int w = Math.Max(w1, w2);
                int h = pnlInfo.Height + flpButtons.Height;
                this.ClientSize = new Size(w, h);
            }

            readonly FlowLayoutPanel flpButtons = new FlowLayoutPanel
            {
                Padding = new Padding(0, 0, 12, 0),
                FlowDirection = FlowDirection.RightToLeft,
                BackColor = default,
                Dock = DockStyle.Bottom,
                Height = 50
            };
            readonly Panel pnlInfo = new Panel
            {
                BackColor = Color.White,
                Dock = DockStyle.Top,
            };
            readonly PictureBox picIcon = new PictureBox
            {
                SizeMode = PictureBoxSizeMode.AutoSize,
                Location = new Point(30, 30)
            };
            readonly Label lblText = new Label
            {
                Location = new Point(67, 32),
                AutoSize = true,
            };

            readonly bool CancelBox = false;

            protected override CreateParams CreateParams
            {
                get
                {
                    const int CP_NOCLOSE_BUTTON = 0x200;
                    CreateParams cp = base.CreateParams;
                    if(CancelBox) cp.ClassStyle |= CP_NOCLOSE_BUTTON; //禁用关闭按钮
                    return cp;
                }
            }

            protected override bool ProcessDialogKey(Keys keyData)
            {
                if(ModifierKeys == Keys.None)
                {
                    if(!CancelBox && keyData == Keys.Escape)
                    {
                        this.DialogResult = DialogResult.Cancel; //ESC键关闭窗体并返回“取消”
                        return true;
                    }
                }
                return base.ProcessDialogKey(keyData);
            }

            protected override void OnLoad(EventArgs e)
            {
                this.Owner = Form.ActiveForm;
                if(this.Owner == null) this.StartPosition = FormStartPosition.CenterScreen;
                base.OnLoad(e);
            }
        }
    }
} 
```

# c - 在 C 中使用 SafeStr

> ID：15904611
> 
> 赞同：4
> 
> 时间：2013-04-09T14:24:53.223
> 
> 标签：c

我正在阅读有关在以下位置使用安全字符串的信息

[https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=5111861](https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=5111861)

如下所述。

如果使用得当，SafeStr 字符串可以消除许多此类错误，并且还可以向后兼容遗留代码。

我的问题是作者所说的“也为遗留代码提供向后兼容性”是什么意思。? 要求举例说明。

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:28:06.840

这意味着来自标准 libc（和其他）的函数需要普通的、以空结尾的字符数组，甚至可以在这些`SafeStr`s 上工作。这可能是通过将控制结构置于字符串开头的负偏移量（或其他技巧）来实现的。

示例：`strcmp()` `printf()`etc 可以直接用于 SafeStr 返回的字符串。

相比之下，还有*其他*C 的字符串库非常“智能”和动态，但这些字符串如果不转换为“老派”函数就无法发送。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T14:29:53.193

从该页面：

> 该库基于与 char * 完全兼容的 safestr_t 类型。这允许将 safestr_t 结构转换为 char *。

这与所有现有的接受`char *`或`const char *`指针的代码有一些向后兼容性。

# java - 如何刷新速度模板

> ID：15904613
> 
> 赞同：3
> 
> 时间：2013-04-09T14:25:00.843
> 
> 标签：java, velocity

如何在给定时间间隔后刷新速度模板。假设我希望它在指定的时间间隔后自动刷新

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:27:27.993

尝试关注；

```
Properties templateProps = new Properties();

templateProps.setProperty( "file.resource.loader.modificationCheckInterval", 60); // This is in seconds
templateProps.setProperty( "file.resource.loader.cache", "true" );

Velocity.init( templateProps ); 
```

# java - 如何将来自 joda 时间的 YearMonth 类型的属性保存到一列中？

> ID：15904618
> 
> 赞同：1
> 
> 时间：2013-04-09T14:25:15.863
> 
> 标签：java, hibernate, jodatime

我想保留 joda-time 类型 YearMonth 但我找不到任何可用的持久类型（请参见[此处](http://joda-time.sourceforge.net/contrib/hibernate/userguide.html)）将其存储到一列中？

是否有任何 Hibernate 类型可以直接用于此目的？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:49:50.863

由于我在网上找不到任何解决方案，我们实现了我们自己的自定义休眠类型，使用表示数据库中 YearMonth 的整数类型

以下是步骤：

1-创建持久类`PersistentYearMonth`

```
public class PersistentYearMonth extends AbstractSingleColumnUserType<YearMonth, Integer, IntegerColumnYearMonthMapper> {
    private static final long serialVersionUID = -4204097887942539571L;
} 
```

2-创建映射器`IntegerColumnYearMonthMapper`

```
public class IntegerColumnYearMonthMapper extends AbstractIntegerColumnMapper<YearMonth> {

    private static final long serialVersionUID = -9060971007814071116L;

    @Override
    public YearMonth fromNonNullString(String s) {
        return YearMonth.parse(s, DateTimeFormat.forPattern("yyyyMM"));        
    }

    @Override
    public YearMonth fromNonNullValue(Integer value) {
        return fromNonNullString(value.toString());        
    }

    @Override
    public String toNonNullString(YearMonth value) {

        return value.toString( DateTimeFormat.forPattern("yyyyMM"));
    }

    @Override
    public Integer toNonNullValue(YearMonth value) {
        return Integer.valueOf(toNonNullString(value));
    }
} 
```

3-如果您使用 XML hibernate 映射，请在需要时将自定义类型注册到`hbm.xml`文件中

```
 <property name="monthOfYear" type="org.jadira.usertype.dateandtime.joda.PersistentYearMonth" /> 
```

或者如果您使用注释，请将其注册为：

```
@Type(type="org.jadira.usertype.dateandtime.joda.PersistentYearMonth") 
```

# asp.net - 如何将 JSON POST 从 iOS 设备发送到 ASP.NET URL

> ID：15904622
> 
> 赞同：0
> 
> 时间：2013-04-09T14:25:25.710
> 
> 标签：asp.net, ios, json, web-services

我正在开发一个需要与 Windows 服务器共享数据的应用程序。我查看了网络上的一些示例，并提出了下面列出的实现。虽然 iOS 代码和 Web 服务可以独立工作，但我不知道如何将它们连接在一起。我看到的所有示例都没有显示 Web 服务的 URL（或者至少没有以让我弄清楚发生了什么的方式）。请查看我对 ServerURL 的值并建议它应该是什么。我相信它应该在某处包含入口点“doSomething”的名称，但我不知道语法应该是什么样子。我已经尝试过`http://texas/WebSite3/Service.asmx/doSomething`，`http://texas/WebSite3/Service.asmx?op=doSomething`但似乎都不起作用。请让我知道是否存在任何其他问题。

我假设一旦我让它在我的本地系统上运行，我就可以用一个完整的域名替换 Texas。

这是iOS代码：

```
-(void)checkWithServer {
// Create the POST request payload.
    NSDictionary *tmp = [[NSDictionary alloc]initWithObjectsAndKeys:
                     @"test@gmail.com", @"email",
                     @"John Doe", @"name",
                     nil];
    NSError *error;
    NSData *postdata = [NSJSONSerialization dataWithJSONObject:tmp options:0 error:&error];

    NSString *serverURL = @"http://texas/WebSite3/Service.asmx";

// Create the POST request to the server.
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:serverURL]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [postdata length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:postdata];
    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    [conn start];
} 
```

这是它与之交谈的网络服务：

```
 [WebService(Namespace = "http://texas/WebSite3")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class Service : System.Web.Services.WebService
    {
        public Service () {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string doSomething(string msg)
    {
        byte[] buffer = GetBytes(msg);
        XmlReader reader = System.Runtime.Serialization.Json.JsonReaderWriterFactory.CreateJsonReader(buffer, System.Xml.XmlDictionaryReaderQuotas.Max);
        XElement root = XElement.Load(reader);

        string result = "{\"result\":\"none\"}";

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:01:16.290

在 Axeva 的帮助下，这就是我想出的。

iOS 代码：

```
-(void)checkWithServer {
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    NSURL *postURL = [NSURL URLWithString: @"http://texas/WebSite3/Service.asmx/doSomething"];
    NSDictionary *jsonDict = [[NSDictionary alloc] initWithObjectsAndKeys:
                              @"test@gmail.com", @"email",
                              @"John Doe", @"name",
                              nil];

    NSError *error;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDict options:0 error:&error];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: postURL
                                                           cachePolicy: NSURLRequestUseProtocolCachePolicy
                                                       timeoutInterval: 60.0];

    [request setHTTPMethod: @"POST"];
    [request setValue: @"application/json" forHTTPHeaderField: @"Accept"];
    [request setValue: @"application/json; charset=utf-8" forHTTPHeaderField: @"content-type"];
    [request setHTTPBody: jsonData];

    [NSURLConnection sendAsynchronousRequest: request
                                       queue: queue
                           completionHandler: ^(NSURLResponse *response, NSData *data, NSError *error) {
                               if (error || !data) {
                                   // Handle the error
                               } else {
                                   // Handle the success
                               }
                           }
     ];
} 
```

网络服务器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Web.Script.Services;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Json;
using System.Xml;
using System.Xml.Linq;
using System.Data;
using System.Data.SqlClient;

[WebService(Namespace = "http://texas/WebSite3")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment   the following line. 
[System.Web.Script.Services.ScriptService]
public class Service : System.Web.Services.WebService
{
    public Service () {

    //Uncomment the following line if using designed components 
    //InitializeComponent(); 
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string doSomething(string email, string name)
    {
        return "{\"name\": \"" + name + "\", \"email\": \"" + email + "\"}";
    }
} 
```

显然，网络服务器足够聪明，可以将 JSON 分开并分配变量名称和电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:06:29.517

我不相信 .NET 有什么魔力会导致这些问题。试试这样的事情：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
NSURL *postURL = [NSURL URLWithString: @"http://texas/WebSite3/Service.asmx/doSomething"];
NSDictionary *jsonDict = [[NSDictionary alloc] initWithObjectsAndKeys:
                 @"test@gmail.com", @"email",
                 @"John Doe", @"name",
                 nil];

NSString *postValues = [jsonDict urlEncodedString];
NSData *jsonData = [postValues dataUsingEncoding: NSUTF8StringEncoding];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: postURL
                                                       cachePolicy: NSURLRequestUseProtocolCachePolicy
                                                   timeoutInterval: 60.0];

[request setHTTPMethod: @"POST"];
[request setValue: @"application/json" forHTTPHeaderField: @"Accept"];
// [request setValue: @"application/json" forHTTPHeaderField: @"content-type"];
[request setValue: @"application/x-www-form-urlencoded" forHTTPHeaderField: @"content-type"];
[request setHTTPBody: jsonData];

[NSURLConnection sendAsynchronousRequest: request
                                   queue: queue
                       completionHandler: ^(NSURLResponse *response, NSData *data, NSError *error) {
                           if (error || !data) {
                               // Handle the error
                           } else {
                               // Handle the success
                           }
                       }
 ]; 
```

# css - 在树枝的孩子中加载css

> ID：15904624
> 
> 赞同：1
> 
> 时间：2013-04-09T14:25:31.417
> 
> 标签：css, symfony, twig, assetic

我有一个超类树枝，它具有以下块：

```
{% stylesheets filter='css_url_rewrite,?yui_css'
                '@MainBundle/Resources/public/css/bootstrap.css'
                '@MainBundle/Resources/public/css/vendor/*.css'
                '@MainBundle/Resources/public/css/_normalize.css'
                '@MainBundle/Resources/public/css/main.css'
                '@MainBundle/Resources/public/css/fonts.css'
                '@MainBundle/Resources/public/css/include/*.css'
                '@MainBundle/Resources/public/css/footer.css'
            %} 
```

我有另一个从上面的树枝延伸出来的树枝，但我想在这个页面上添加一个额外的 css，所以我做了：

```
{% block stylesheets %}
     {{ parent() }}
    {% stylesheets filter='css_url_rewrite,?yui_css'
        '@ShopiousMainBundle/Resources/public/css/shippingconfirm/*.css'
    %}
    {% endstylesheets %}          
{% endblock %} 
```

但是，这不会导入我在 shippingconfirm 中的 css，关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:32:20.160

您需要在样式表块中再次设置链接元素。所以它应该适用于以下内容：

```
{% block stylesheets %}
    {{ parent() }}
    {% stylesheets filter='css_url_rewrite,?yui_css'
        '@ShopiousMainBundle/Resources/public/css/shippingconfirm/*.css' %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %} 
```

但是您在 shippingconfirm 文件夹中的其他样式表将位于一个额外的文件中。Assetic 不会将所有样式表（来自父级的 css 和来自当前模板的 css）放入一个文件中。

此处发布了一个类似的问题：[Combining Assetic Resources across继承的模板](https://stackoverflow.com/questions/6958970/combining-assetic-resources-across-inherited-templates)

在那里你可以找到一些方法来解决你的问题。

# c# - 哪个 .NET 集合更快：枚举 foreach Dictionary<>.Values 还是 List<>？

> ID：15904625
> 
> 赞同：8
> 
> 时间：2013-04-09T14:25:34.693
> 
> 标签：c#, .net, performance, enumeration

这些枚举中的一个比另一个更快还是大致相同？（C# 中的示例）

情况1：

```
Dictionary<string, object> valuesDict;

// valuesDict loaded with thousands of objects

foreach (object value in valuesDict.Values) { /* process */ } 
```

案例二：

```
List<object> valuesList;

// valuesList loaded with thousands of objects

foreach (object value in valuesList) { /* process */ } 
```

更新：

背景：

字典将有利于其他地方的键控搜索（与遍历列表相反），但如果遍历字典比遍历列表慢得多，则好处会减少。

更新：听取许多人的建议，我已经完成了自己的测试。

首先，这些是结果。以下是程序。

迭代整个集合字典：78 Keyd：131 List：76

关键字搜索集合字典：178 关键字：194 列表：142800

```
using System;
using System.Linq;

namespace IterateCollections
{
    public class Data
    {
        public string Id;
        public string Text;
    }

    public class KeyedData : System.Collections.ObjectModel.KeyedCollection<string, Data>
    {
        protected override string GetKeyForItem(Data item)
        {
            return item.Id;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var dict = new System.Collections.Generic.Dictionary<string, Data>();
            var list = new System.Collections.Generic.List<Data>();
            var keyd = new KeyedData();

            for (int i = 0; i < 10000; i++)
            {
                string s = i.ToString();
                var d = new Data { Id = s, Text = s };
                dict.Add(d.Id, d);
                list.Add(d);
                keyd.Add(d);
            }

            var sw = new System.Diagnostics.Stopwatch();
            sw.Start();
            for (int r = 0; r < 1000; r++)
            {
                foreach (Data d in dict.Values)
                {
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            var dictTime = sw.ElapsedMilliseconds;

            sw.Reset();
            sw.Start();
            for (int r = 0; r < 1000; r++)
            {
                foreach (Data d in keyd)
                {
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            var keydTime = sw.ElapsedMilliseconds;

            sw.Reset();
            sw.Start();
            for (int r = 0; r < 1000; r++)
            {
                foreach (Data d in list)
                {
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            var listTime = sw.ElapsedMilliseconds;

            Console.WriteLine("Iterate whole collection");
            Console.WriteLine("Dict: " + dictTime);
            Console.WriteLine("Keyd: " + keydTime);
            Console.WriteLine("List: " + listTime);

            sw.Reset();
            sw.Start();
            for (int r = 0; r < 1000; r++)
            {
                for (int i = 0; i < 10000; i += 10)
                {
                    string s = i.ToString();
                    Data d = dict[s];
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            dictTime = sw.ElapsedMilliseconds;

            sw.Reset();
            sw.Start();
            for (int r = 0; r < 1000; r++)
            {
                for (int i = 0; i < 10000; i += 10)
                {
                    string s = i.ToString();
                    Data d = keyd[s];
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            keydTime = sw.ElapsedMilliseconds;

            sw.Reset();
            sw.Start();
            for (int r = 0; r < 10; r++)
            {
                for (int i = 0; i < 10000; i += 10)
                {
                    string s = i.ToString();
                    Data d = list.FirstOrDefault(item => item.Id == s);
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            listTime = sw.ElapsedMilliseconds * 100;

            Console.WriteLine("Keyed search collection");
            Console.WriteLine("Dict: " + dictTime);
            Console.WriteLine("Keyd: " + keydTime);
            Console.WriteLine("List: " + listTime);

        }
    } 
```

}

更新：

@Blam 建议的 Dictionary 与 KeyedCollection 的比较。

最快的方法是遍历 KeyedCollection 项数组。

但是请注意，在不转换为数组的情况下，遍历字典值比遍历 KeyedCollection 更快。

请注意，遍历字典值比遍历字典集合要快得多。

```
 Iterate 1,000 times over collection of 10,000 items
   Dictionary Pair:   519 ms
 Dictionary Values:    95 ms
  Dict Val ToArray:    92 ms
   KeyedCollection:   141 ms
   KeyedC. ToArray:    17 ms 
```

计时来自 Windows 控制台应用程序（发布版本）。这是源代码：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace IterateCollections
{
    public class GUIDkeyCollection : System.Collections.ObjectModel.KeyedCollection<Guid, GUIDkey>
    {
        // This parameterless constructor calls the base class constructor 
        // that specifies a dictionary threshold of 0, so that the internal 
        // dictionary is created as soon as an item is added to the  
        // collection. 
        // 
        public GUIDkeyCollection() : base() { }

        // This is the only method that absolutely must be overridden, 
        // because without it the KeyedCollection cannot extract the 
        // keys from the items.  
        // 
        protected override Guid GetKeyForItem(GUIDkey item)
        {
            // In this example, the key is the part number. 
            return item.Key;
        }

        public GUIDkey[] ToArray()
        {
            return Items.ToArray();
        }

        //[Obsolete("Iterate using .ToArray()", true)]
        //public new IEnumerator GetEnumerator()
        //{
        //    throw new NotImplementedException("Iterate using .ToArray()");
        //}
    }
    public class GUIDkey : Object
    {
        private Guid key;
        public Guid Key
        {
            get
            {
                return key;
            }
        }
        public override bool Equals(Object obj)
        {
            //Check for null and compare run-time types.
            if (obj == null || !(obj is GUIDkey)) return false;
            GUIDkey item = (GUIDkey)obj;
            return (Key == item.Key);
        }
        public override int GetHashCode() { return Key.GetHashCode(); }
        public GUIDkey(Guid guid)
        {
            key = guid;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            const int itemCount = 10000;
            const int repetitions = 1000;
            const string resultFormat = "{0,18}: {1,5:D} ms";

            Console.WriteLine("Iterate {0:N0} times over collection of {1:N0} items", repetitions, itemCount);

            var dict = new Dictionary<Guid, GUIDkey>();
            var keyd = new GUIDkeyCollection();

            for (int i = 0; i < itemCount; i++)
            {
                var d = new GUIDkey(Guid.NewGuid());
                dict.Add(d.Key, d);
                keyd.Add(d);
            }

            var sw = new System.Diagnostics.Stopwatch();
            long time;

            sw.Reset();
            sw.Start();
            for (int r = 0; r < repetitions; r++)
            {
                foreach (KeyValuePair<Guid, GUIDkey> w in dict)
                {
                    if (null == w.Value) throw new ApplicationException();
                }
            }
            sw.Stop();
            time = sw.ElapsedMilliseconds;
            Console.WriteLine(resultFormat, "Dictionary Pair", time);

            sw.Reset();
            sw.Start();
            for (int r = 0; r < repetitions; r++)
            {
                foreach (GUIDkey d in dict.Values)
                {
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            time = sw.ElapsedMilliseconds;
            Console.WriteLine(resultFormat, "Dictionary Values", time);

            sw.Reset();
            sw.Start();
            for (int r = 0; r < repetitions; r++)
            {
                foreach (GUIDkey d in dict.Values.ToArray())
                {
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            time = sw.ElapsedMilliseconds;
            Console.WriteLine(resultFormat, "Dict Val ToArray", time);

            sw.Reset();
            sw.Start();
            for (int r = 0; r < repetitions; r++)
            {
                foreach (GUIDkey d in keyd)
                {
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            time = sw.ElapsedMilliseconds;
            Console.WriteLine(resultFormat, "KeyedCollection", time);

            sw.Reset();
            sw.Start();
            for (int r = 0; r < repetitions; r++)
            {
                foreach (GUIDkey d in keyd.ToArray())
                {
                    if (null == d) throw new ApplicationException();
                }
            }
            sw.Stop();
            time = sw.ElapsedMilliseconds;
            Console.WriteLine(resultFormat, "KeyedC. ToArray", time);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T14:39:00.923

用秒表检查相对容易：

```
var d = new Dictionary<string, object>();
var s = new List<object>();
for (int i =0 ; i != 10000000 ; i++) {
    d.Add(""+i, i);
    s.Add(i);
}
var sw = new Stopwatch();
sw.Start();
foreach(object o in d.Values) {
    if (o == null) throw new ApplicationException();
}
sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds);
sw.Reset();
sw.Start();
foreach (object o in s) {
    if (o == null) throw new ApplicationException();
}
sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds); 
```

这将打印彼此相当接近的数字：

```
Dict List
---- ----
 136  107
 139  108
 136  108 
```

`List`总是获胜，但考虑到两种数据结构的相对复杂性，利润并不像人们预期的那么大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T14:28:07.543

差不多是同一时间。一旦您的流程包含任何代码，它肯定不会引起注意。

但是你为什么要听网上的随机人呢？测试它！

[秒表](http://msdn.microsoft.com/de-de/library/system.diagnostics.stopwatch.aspx)类可能很有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-09T14:31:12.903

如果你想按键查找，那么字典。
字典键查找非常快，因为这是它的设计目的。

foreach 的差异很小。

如果键也是一个属性，那么考虑 KeyedCollection
[KeyedCollection 类](http://msdn.microsoft.com/en-us/library/ms132438.aspx)

> 为其键嵌入值中的集合提供抽象基类。

正如 Servy 评论的那样，选择具有您需要的功能的集合
。NET 有很多集合。
[System.Collections 命名空间](http://msdn.microsoft.com/en-us/library/gg145035.aspx)

如果您的对象有一个可以表示为 Int32 的自然键，那么请考虑 OverRide GetHashCode()。

如果您的对象具有 GUID 的自然键，请考虑 KeyedCollection 和 OverRide GetHashCode 和 Equals

对于非关键属性的搜索，请考虑使用 LINQ 而不是 ForEach 休息；

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.ObjectModel;
using System.Diagnostics;

namespace IntIntKeyedCollection
{
    class Program
    {
        static void Main(string[] args)
        {

            Guid findGUID = Guid.NewGuid();
            GUIDkeyCollection gUIDkeyCollection = new GUIDkeyCollection();
            gUIDkeyCollection.Add(new GUIDkey(findGUID));
            gUIDkeyCollection.Add(new GUIDkey(Guid.NewGuid()));
            gUIDkeyCollection.Add(new GUIDkey(Guid.NewGuid()));
            GUIDkey findGUIDkey = gUIDkeyCollection[findGUID];  // lookup by key (behaves like a dict)
            Console.WriteLine(findGUIDkey.Key);
            Console.WriteLine(findGUIDkey.GetHashCode());
            Console.WriteLine(findGUID);
            Console.WriteLine(findGUID.GetHashCode());
            Console.ReadLine();
        }
        public class GUIDkeyCollection : KeyedCollection<Guid, GUIDkey>
        {
            // This parameterless constructor calls the base class constructor 
            // that specifies a dictionary threshold of 0, so that the internal 
            // dictionary is created as soon as an item is added to the  
            // collection. 
            // 
            public GUIDkeyCollection() : base() { }

            // This is the only method that absolutely must be overridden, 
            // because without it the KeyedCollection cannot extract the 
            // keys from the items.  
            // 
            protected override Guid GetKeyForItem(GUIDkey item)
            {
                // In this example, the key is the part number. 
                return item.Key;
            }
        }
        public class GUIDkey : Object
        {
            private Guid key;
            public Guid Key
            {
                get
                {
                    return key;
                }
            }
            public override bool Equals(Object obj)
            {
                //Check for null and compare run-time types.
                if (obj == null || !(obj is GUIDkey)) return false;
                GUIDkey item = (GUIDkey)obj;
                return (Key == item.Key);
            }
            public override int GetHashCode() { return Key.GetHashCode(); }
            public GUIDkey(Guid guid)
            {
                key = guid;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T14:41:16.277

这是你的测试：

```
class speedtest
{
    static void Main(string[] args)
    {
        int size = 10000000;
        Dictionary<string, object> valuesDict = new Dictionary<string, object>();
        List<object> valuesList = new List<object>();

        for (int i = 0; i < size; i++)
        {
            valuesDict.Add(i.ToString(), i);
            valuesList.Add(i);
        }
        // valuesDict loaded with thousands of objects

        Stopwatch s = new Stopwatch();
        s.Start();
        foreach (object value in valuesDict.Values) { /* process */ }
        s.Stop();

        Stopwatch s2 = new Stopwatch();
        s2.Start();
        foreach (object value in valuesList) { /* process */ }
        s.Stop();
        Console.WriteLine("Size {0}, Dictonary {1}ms, List {2}ms",size,s.ElapsedMilliseconds,s2.ElapsedMilliseconds);

        Console.ReadLine();
    }
}

Outputs:
Size 10000000, Dictonary 73ms, List 63ms 
```

但是，您还应该测试您的字典中是否有散列冲突。他们可以给你不同的结果。

在实际应用程序的情况下，您必须考虑创建、访问结构和内存占用所花费的时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-09T14:45:36.783

正如其他人所说，过早优化yadda yadda。为正确的场景使用正确的集合，只有在出现问题时才担心速度。

无论如何，唯一知道的方法就是测量。我做了一个快速而肮脏的测试，用 30,000 个对象填充字典和列表，然后将它们迭代 10,000 次。结果是：

字典：2683ms
列表：1955ms

因此，无论出于何种原因，Dictionary.Values 的枚举似乎都会稍慢一些。

这是代码：

```
void Main()
{
    int i = 0;

    var dict = new Dictionary<string, object>();
    var list = new List<object>();

    for (i = 0; i < 30000; i++)
    {
        var foo = new Foo();
        dict.Add(i.ToString(), foo);
        list.Add(foo);
    }

    var dictWatch = new Stopwatch();

    dictWatch.Start();

    for (i = 0; i < 10000; i++)
    {
        foreach (var foo in dict.Values) {}
    }

    dictWatch.Stop();
    Console.WriteLine("Dictionary: " + dictWatch.ElapsedMilliseconds);

    var listWatch = new Stopwatch();
    listWatch.Start();

    for (i = 0; i < 10000; i++)
    {
        foreach (var foo in list) {}
    }

    listWatch.Stop();

    Console.WriteLine("List: " + listWatch.ElapsedMilliseconds);
}

class Foo {} 
```

# jquery - 如果选中，如何使一个功能工作，如果未选中复选框，如何使另一个工作

> ID：15904627
> 
> 赞同：0
> 
> 时间：2013-04-09T14:25:40.633
> 
> 标签：jquery, html

所以我真的很沮丧，我一直试图解决这个问题大约 30 分钟，但仍然失败。

我希望该`keyup()`功能在选中复选框时处于活动状态，否则我希望该`click()`功能在未选中复选框时处于活动状态。但是我让它工作得有点接近，当我检查时，它可以工作，但是当我取消选中它时，它仍然使用 keyup 并单击...

如果有人可以帮助我，我将不胜感激！

我的代码：

**HTML：**

```
<input type="checkbox" id="saut" onchange="isChecked()"> 
```

**JavaScript：**

```
function isChecked() {
  var checked = $('input#saut').is(':checked');
  if (checked == true) {
    $('button#searchbutton').attr("disabled", true);
    $('input#searchquery').keyup(function () {
      alert("omfg keyup!");
      return;
    });
  } else {
    $('button#searchbutton').attr("disabled", false);
    $('button#searchbutton').click(function () {
      alert("omfg button!!");
      return;
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:32:03.623

我会这样做：

```
$('#saut').change(function(){ // let's enable/disable the button on (un)check
    $('#searchbutton').prop("disabled", this.checked);
});
$('#searchquery').keyup(function () {
    if (!$('#saut').is(':checked')) return; // do nothing if not checked
    alert("omfg keyup!");
});
$('#searchbutton').click(function () {
    if ($('#saut').is(':checked')) return; // do nothing if checked
    alert("omfg button!!");
}); 
```

另请注意，我使用了[prop](http://api.jquery.com/prop/)而不是`attr`并且我清理了选择器（当您按 ID 选择时，不要在选择器中放置除 ID 之外的任何其他内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:31:45.950

你为什么不只是绑定这两个事件并稍后检查复选框

```
 $('input#searchquery').keyup(function () {
     if($("#saut").is(":checked")){
          alert("omfg keyup!");
     }
 });

 $('button#searchbutton').click(function () {
     if(!$("#saut").is(":checked")){
         alert("omfg button!!");
     }
 }); 
```

您还可以绑定事件然后取消绑定它或使用 jquery`one`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:31:47.813

您在代码中所做的是*注册*一个事件侦听器；不要触发该实际代码。当侦听器不再处于活动状态时，您的代码中没有任何内容会取消注册侦听器。虽然您可以这样做，但只绑定一次侦听器并在处理程序中添加检查可能会更简洁：

```
function searchKeyup() {
    if(!$('#saut').is(':checked')) { return; }
    // keyup code
}

function searchClick() {
    if($('#saut').is(':checked')) { return; }
    // click code
}

$(function() {
    $('#searchquery').keyup(searchKeyup);
    $('#searchbutton').click(searchClick);
}); 
```

由于您还禁用和启用了按钮，因此您还可以执行以下操作：

```
$('#saut').change(function() {
   var checked = $(this).is(':checked');
   $('#searchbutton').prop('disabled', checked);
   $('#searchquery').toggleClass('disabled', !checked);
});

$(document).on('click', '#searchbutton:not(:disabled)', function() {
   // button click
});

$(document).on('click', '#searchquery:not(.disabled)', function() {
   // keyup
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:34:08.790

这是我的解决方案。尽量避免使用内联 jQuery 函数调用。它创造了一个你不想处理的问题的整个世界。最好让你的脚本远离 DOM。

[http://jsfiddle.net/talymo/hreZH/](http://jsfiddle.net/talymo/hreZH/)

```
function isChecked() {
     var checked = $('input#saut').is(':checked');
     console.log(checked);
     if (checked == true) {
         $('button#searchbutton').attr("disabled", true);
         $('input#searchquery').keyup(function () {
             alert("omfg keyup!");
             return;
         });
     } else {
         $('button#searchbutton').attr("disabled", false);
         $('button#searchbutton').click(function () {
             alert("omfg button!!");
             return;
         });
     }
}

$('input').on('click', function(){
    isChecked();
}); 
```

此外，您的代码中似乎没有您的搜索表单，所以我继续将其添加到那里，让它对我很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:37:57.027

如果您想完全使用这种机制，您应该取消订阅不必要的事件。所以你的代码应该是：

```
function isChecked() {
 var checked = $('input#saut').is(':checked');

 if (checked == true) {
     $('button#searchbutton').attr("disabled", true);
     $('input#searchquery').on("keyup", function () {
         alert("omfg keyup!");
         return;
     });
     $('button#searchbutton').off("click");
 } else {
     $('button#searchbutton').attr("disabled", false);
     $('button#searchbutton').on("click", function () {
         alert("omfg button!!");
         return;
     });
     $('input#searchquery').off("keyup");
 } 
```

所以使用[on](http://api.jquery.com/on/)绑定事件和[off](http://api.jquery.com/off/)取消绑定。或者正如[dystroy](https://stackoverflow.com/users/263525/dystroy)所写的那样，您可以简单地将检查添加到处理程序中。

# php - 在 Yii 的自动完成中显示自定义布局

> ID：15904629
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:25:45.763
> 
> 标签：php, jquery, drop-down-menu, yii, customization

我的问题是，我想自定义自动完成的下拉列表。下面是我尝试过的代码，但它没有按我想要的方式显示。

```
<?php
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
    'name'=>'autoComplete',
     'value'=>'',
     'source'=>$this->createUrl('post/search'),
     // additional javascript options for the autocomplete plugin
     'options'=>array(
          'showAnim'=>'fold',
     ),'htmlOptions'=>array(
     //'onfocus' => 'js: this.value = null; $("#searchbox").val(null); $("#selectedvalue").val(null);',
     'class' => 'input-xxlarge search-query',
     'placeholder' => "Search...",
     'methodChain'=>'.data( "ui-autocomplete" )._renderItem = function( ul, item ) {
          return $( "<li>" )
              .data( "item.autocomplete", item )
              .append( "<a>" + item.name +  "</a>" )
              .appendTo( ul );
      };'
   ),
));
?> 
```

它应该在没有任何类的情况下创建`<li>`并附加到它。`<a></a>`但它不起作用并显示默认下拉列表。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T15:00:52.697

这是我之前得到的结果的图像。 ![图像1](https://i.stack.imgur.com/YkVgK.png)

我**想要的结果**是

![图2](https://i.stack.imgur.com/25vGz.png)

所以首先我改变了只给我一列数据的函数。这是来自我的控制器的代码。

```
public function actionSearch()
{
    $res =array();

    if (isset($_GET['term'])) {
        // sql query to get execute
        $qtxt ="SELECT id,name,description,image FROM table_name WHERE name LIKE :name";
        // preparing the sql query
        $command =Yii::app()->db->createCommand($qtxt);
        // assigning the get value
        $command->bindValue(":name", '%'.$_GET['term'].'%', PDO::PARAM_STR);
        //$res =$command->queryColumn(); // this is the function which was giving me result of only 1 column
        $res =$command->queryAll(); // I changed that to this to give me result of all column's specified in sql query.
    }
    echo CJSON::encode($res); // encoding the result to JSON
    Yii::app()->end();
} 
```

为了完成处理多列数据结果，我们需要我们自己的小部件，它可以让我们选择处理该结果。我从[这里](http://www.yiiframework.com/wiki/217/custom-autocomplete-display-and-value-submission/)获取的这段代码。

## 这个文件保存在哪里？

*   进入*project_directory\protected\extensions*文件夹。**注意**此路径适用于 windows 系统。
*   创建一个名为**myAutoComplete.php的 php 文件**
*   现在将此代码粘贴到此文件中

## 代码

```
<?php
// below line is necessary otherwise this class will not be able to extend the CJuiAutoComplete class
Yii::import('zii.widgets.jui.CJuiAutoComplete');  
class myAutoComplete extends CJuiAutoComplete
{
/**
 * @var string the chain of method calls that would be appended at the end of the autocomplete constructor.
 * For example, ".result(function(...){})" would cause the specified js function to execute
 * when the user selects an option.
 */
public $methodChain;
/**
 * Run this widget.
 * This method registers necessary javascript and renders the needed HTML code.
 */
public function run()
{
    list($name,$id)=$this->resolveNameID();

    if(isset($this->htmlOptions['id']))
        $id=$this->htmlOptions['id'];
    else
        $this->htmlOptions['id']=$id;

    if(isset($this->htmlOptions['name']))
        $name=$this->htmlOptions['name'];

    if($this->hasModel())
        echo CHtml::activeTextField($this->model,$this->attribute,$this->htmlOptions);
    else
        echo CHtml::textField($name,$this->value,$this->htmlOptions);

    if($this->sourceUrl!==null)
        $this->options['source']=CHtml::normalizeUrl($this->sourceUrl);
    else
        $this->options['source']=$this->source;

    $options=CJavaScript::encode($this->options);

    $js = "jQuery('#{$id}').autocomplete($options){$this->methodChain};";

    $cs = Yii::app()->getClientScript();
    $cs->registerScript(__CLASS__.'#'.$id, $js);
    }
} 
```

现在您已经在这里创建了一个扩展，现在您可以在您的视图中使用它。

## 查看代码

```
<div id="search">
        <?php
        $this->widget('ext.myAutoComplete', array(
            'id'  => 'searchbox',
            'name'=> 'autoComplete',
            'source'=>'js: function(request, response) {
            $.ajax({
                url: "'.$this->createUrl('post/search').'",
                dataType: "json",
                data: {
                    term: request.term,
                    brand: $("#type").val()
                },
                success: function (data) {
                    response(data);
                }
            })
            }',
            'options' => array(
                'showAnim' => 'fold',
            ),
            'htmlOptions' => array(
                'placeholder' => "Search...",
            ),
            'methodChain'=>'.data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<div class=\'drop_class\'></div>" )
                    .data( "item.autocomplete", item )
                    .append( "<a href=\'" + item.id + "\'><div style=\'width:22%; float:left;\'><img height=50 width=50 src=\'' . Yii::app()->request->baseUrl.'/banner/' . '" + item.image + "\'></div><div style=\'width:78%;float:left;\'>" +item.description +  "</div></a>" )
                    .append("<div style=\'clear:both;\'></div>")
                    .appendTo( ul );
            };'
        ));
        ?>
    </div> 
```

现在您已经注意到我在自动完成小部件中使用**了 methodChain**选项来在下拉列表中添加额外的内容。我们之所以获得此功能，是因为我们使用了新的自定义自动完成小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:41:34.117

这些类是由 jQuery 自动完成设置的，所以这不是 Yii 特有的。不幸的是，您不能像那样覆盖它们。

您可以为它使用的类创建自己的自定义 CSS，如下所述： [Jquery 自动完成样式](https://stackoverflow.com/a/5019752/2260582)

或者使用 'open' 方法在下拉菜单打开时修改样式。这也在上面的链接下进行了解释，但在下面。

**更新：** 根据链接的答案并使用您的示例，您可以使用`<li>`以下方法更改元素的背景颜色：

```
 $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
        'name'=>'autoComplete',
        'value'=>'',
        'source'=>$this->createUrl('post/search'),
        // additional javascript options for the autocomplete plugin
        'options'=>array(
                'showAnim'=>'fold',
                'open'=> 'js:function(e, ui) {$(".ui-menu-item").css("background-color","#FF0000");}'
        ),
)); 
```

这意味着您可以即时更改样式，但您不能完全摆脱这些类，因为它们被硬编码到 jQuery 方法中。

您还可以使用[ThemeRoller](http://jqueryui.com/themeroller/)为自动完成创建自己的自定义主题。

# c# - 错误：关键字附近的语法不正确

> ID：15904632
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:25:53.873
> 
> 标签：c#, sql, sql-server, syntax-error

我的代码中出现以下语句的语法错误，我已经完成了它，除非我错过了什么，否则我看不到任何错误：

错误是

> 关键字 RIGHT 附近的语法不正确”

```
("SELECT D1.DR, D1.CR, D1.ASSET_NO, (Coalesce(addit_ytd,0) + DR - CR) AS ADDIT_YTD"
+"FROM (SELECT coalesce (sum(dr_amount),0) AS DR, coalesce (sum(cr_amount),0) AS CR , asset.asset_no" 
+"FROM posting RIGHT JOIN asset ON asset.asset_no = posting.asset_no, sysasset" 
+"WHERE asset.asset_no = @AssetNumber" 
+"AND (period <= posting.period) AND (period >= sysasset.asset_open_per)" 
+ "GROUP BY asset.asset_no) AS D1 INNER JOIN dbo.asset ON D1.asset_no= asset.asset_no", DataAccess.AssetConnection); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T15:04:52.967

正如其他人所说，您缺少空格。考虑重写代码以使用 C# 的*逐字字符串*语法，并可能在其中添加一些缩进以更好地指示查询的结构：

```
(@"SELECT D1.DR, D1.CR, D1.ASSET_NO, (Coalesce(addit_ytd,0) + DR - CR) AS ADDIT_YTD
FROM 
    (SELECT coalesce (sum(dr_amount),0) AS DR, coalesce (sum(cr_amount),0) AS CR ,     asset.asset_no
    FROM posting RIGHT JOIN asset ON asset.asset_no = posting.asset_no, sysasset
    WHERE asset.asset_no = @AssetNumber
    AND (period <= posting.period) AND (period >= sysasset.asset_open_per)
    GROUP BY asset.asset_no) 
AS D1 INNER JOIN dbo.asset ON D1.asset_no= asset.asset_no",         
DataAccess.AssetConnection); 
```

看，@ 符号的意思是“直接从源代码中取出字符串”。源代码中的所有空格都会变成字符串中的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:27:15.700

如果字符串在连接期间出现错误。`FROM`您需要在列之后或子句之前有额外的空间，

```
("SELECT D1.DR, D1.CR, D1.ASSET_NO, (Coalesce(addit_ytd,0) + DR - CR) AS ADDIT_YTD" +
" FROM (SELECT coalesce (sum(dr_amount),0) AS DR, coalesce (sum(cr_amount),0) AS CR , asset.asset_no" +
" FROM posting RIGHT JOIN asset ON asset.asset_no = posting.asset_no, sysasset" +
" WHERE asset.asset_no = @AssetNumber" +
" AND (period <= posting.period) AND (period >= sysasset.asset_open_per)" + 
" GROUP BY asset.asset_no) AS D1 INNER JOIN dbo.asset ON D1.asset_no= asset.asset_no", DataAccess.AssetConnection); 
 ^ << for clarity add extra space here 
```

如果你不添加额外的空间，选择语句将被解析为

```
... (Coalesce(addit_ytd,0) + DR - CR) AS ADDIT_YTDFROM (SELECT coalesce
                                                  ^ causes syntax error 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:45:40.170

除了所有其他答案之外，我还要指出，通常当我有任何 SQL 进入生产代码时，我通常将其作为资源包含并以这种方式引用文本，而不是将其硬编码在 c# 代码中. 这使您可以在多个地方重复使用 SQL 代码，并且还可以在您确实需要编辑 SQL 代码时更轻松地阅读它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T14:27:58.220

您在每行之间缺少空格字符：

```
... ADDIT_YTD" +
"FROM ( ... 
```

变成

```
... ADDIT_YTDFROM ( ... 
```

等等

仅仅因为您的源代码中有换行符，并不意味着这些换行符出现在您构造的文本中。（附带说明一下，在它不是语法正确的 SQL 之前，它走多远（显然到第三行的中间）给我留下了深刻的印象）

# java - 硒显示页面错误

> ID：15904633
> 
> 赞同：-1
> 
> 时间：2013-04-09T14:25:58.663
> 
> 标签：java, selenium-webdriver

我正在使用 selenium 来模拟一个 from 。现在在结果页面 selenium 中的问题在显示 text 的值时混淆了：它在第一个 textFiled 中显示“parisl”，在第二个中显示“marseile”。我不明白有什么问题

这是我的代码

```
public class SeleniumExample {
public static void main(String[] args) throws InterruptedException  {
    // The Firefox driver supports javascript 

    FirefoxProfile profile = new FirefoxProfile();
    profile.setEnableNativeEvents(true);

    RemoteWebDriver driver = new FirefoxDriver(profile);
     //  WebDriver driver = new FirefoxDriver();

     // And now use this to visit Google
     driver.get("http://www.voyages-sncf.com/");

     // Find the text input element by its name
     driver.findElement(By.name("origin_city")).sendKeys("paris");

     driver.findElement(By.id("train-destination-city")).sendKeys("marseille");

        Thread.sleep(4000);

     driver.findElement(By.id("train-book")).click();}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:36:35.233

这个coce应该起作用了。也许我有一个建议 - 但我必须做出疯狂的猜测并猜测你不是英国人：

为了能够使用我的 selenium 脚本并拥有适当的按键事件，我必须将英文键盘作为我的默认系统布局。当我将键盘设置为捷克语（我的语言）时，一些关键事件无法正常工作。

因此，假设您使用法语布局，我建议您将其切换为英语作为默认键盘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:54:02.643

当我打开该页面时，它会将我重定向到[http://www.tgv-europe.com/](http://www.tgv-europe.com/)，它没有您在上面寻找的输入标签。

也许该网站有一些根据地区重定向的逻辑？

PS 与原始问题无关，但对您的建议是使用隐式等待而不是执行 Thread.sleep。隐式等待将等到您要查找的元素出现，除非达到您的最大时间限制。

# silverlight - 从 WP7 中的自定义控件执行页面中的一些代码

> ID：15904634
> 
> 赞同：0
> 
> 时间：2013-04-09T14:26:02.617
> 
> 标签：silverlight, windows-phone-7, user-controls, custom-controls

我创建了一个自定义用户控件。如果我在名为 Page1 的页面中创建了此控件的实例。我需要根据用户控件内的某些操作在 Page1 中执行一些代码。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:06:33.347

在您的用户控件中，定义一个事件：

```
public event EventHandler MyEvent; 
```

在页面中，挂钩该事件：

```
void Page_Load(...)
{
  userControl.MyEvent += MyCode;
} 
```

在您的控件中，当它想要在页面上运行代码时执行该事件：

```
void SomethingHappened()
{
  var e = MyEvent;
  if (e != null)
  {
    e(this, EventArgs.Empty);
  }
} 
```

就是这样。

# c - 为什么程序不应该进入if语句

> ID：15904635
> 
> 赞同：0
> 
> 时间：2013-04-09T14:26:06.303
> 
> 标签：c, system-calls

我正在尝试实现一个列出文件和目录的“ls”命令。我已将传入参数数组设置为以下内容：

```
argv[0] = "./a.out"
argv[1] = "-l"
argv[2] = "test.c" 
```

这是我的代码（假设`main`函数传递给函数）：`argc``argv``I_AM_LS`

```
#include "ls.h"

int I_AM_LS(int argc, char ** argv)
{
    // 'INCLUDING_HIDDEN_FILE' indicates program performs ls including hidden files
    // 'EXCLUDING_HIDDEN_FILE' indicates program performs ls excluding.
    int     hidden_flag     =   EXCLUDING_HIDDEN_FILE;
    int     detail_flag     =   SIMPLY;     // default option in ls.
    // 'IN_DETAIL' indicates program performs ls with additional information.
    // 'SIMPLY' indicates program performs ls without.
    char option;
    int i;
    DIR * dp;

    while ((option = getopt(argc, argv, "al")) != -1)
    {
        switch (option)
        {
            case 'a':
                hidden_flag     =   INCLUDING_HIDDEN_FILE;
                break;
            case 'l':
                detail_flag     =   IN_DETAIL;
                break;
            default: /* '?' */
                printf("invaild option.\n");
                return -1;
        }
    }

if( argv[optind] != NULL && argv[optind + 1] != NULL) // multiple argument
{
    ; // I have not finished the corresponding code yet.
}
else
{
    if( argv[optind] == NULL) // case 1
        I_REALLY_CALL_ls("./", hidden_flag, detail_flag);
    else
        I_REALLY_CALL_ls(argv[optind], hidden_flag, detail_flag);
}
    printf("optind %d %d\n", optind, argv[optind]);
    return 0;
}
}

int main(int argc, const char * argv[])
{
    I_AM_LS(argc, argv);
    return 0;
} 
```

在初始解析循环之后，程序不会进入 if 语句 'argv[optind] != NULL'。我们知道这`optind`是 2 并`argv[optind]`指向“test.c”，而不是`NULL`，在调试模式下似乎有相同的行为。

将 argv 和 argc 传递给函数 I_AM_LS 是否有任何问题？我该怎么办？

注意：我正在 OS X 上开发 Xcode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:29:16.517

```
if( argv[optind] == NULL) // case 1
    I_REALLY_CALL_ls("./", hidden_flag, detail_flag);
else if( argv[optind] != NULL && argv[optind] != NULL)
{
    ; 
} 
```

这里的条件`else if`是`argv[optind] != NULL`，无缘无故地评估了两次。所以如果第一个条件不成立，这个条件成立，你什么也不做（`;`），并且

```
else if( argv[optind] != NULL)
{
    // single non-option arguemnt.
    I_REALLY_CALL_ls(argv[optind], hidden_flag, detail_flag);
} 
```

是无法到达的。

# c++ - 如何知道所有 QAbstractItemModel::data() 函数何时完成

> ID：15904640
> 
> 赞同：0
> 
> 时间：2013-04-09T14:26:12.690
> 
> 标签：c++, qt

我写了一个`QAbstractItemModel`基础类并实现了`data(const QModelIndex & ar_index, int a_role) const`功能。我使用以下方法刷新模型：

```
beginInsertRows(QModelIndex(), 0, 0);
// fill model
endInsertRows(); 
```

内部数据功能我更新了一些`X`刷新后需要的信息。

我检查了`data`刷新模型和调试后是否调用了函数我验证了我的`X`变量设置正确。

刷新后，我需要用这个`X`值填充另一个小部件。我如何知道所有数据刷新已完成并正确显示`X`值？完全刷新模型后发出哪个信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:49:18.003

这里没有使用标准信号——Qt 的 MVC API 不仅支持静态模型，还支持动态模型，对于这些，永远不会有信号告诉“全部完成”。例如，在 Trojita 中，发出 Qt IMAP 电子邮件客户端`rowsInserted`以指示新电子邮件已到达，但这甚至发生在库对新电子邮件一无所知之前——甚至不知道它们的 UID。只有在远程服务器使用数据响应库的命令后，`dataChanged`才会发出 以指示“模型表示的数据”已更改并且附加视图应更新。

您说您正在从头开始重新实现自己的 QAIM。这意味着您可以在此处设置您认为合适的任何合同。是否某些数据是不可变的，即保证在加载后永远不会改变？如果是这样，您可以使用自定义角色，例如`RoleIsItemFetched`，在每次更改模型之后（即，之后，，`modelReset`和）检查您的函数是否返回 true。如果是这样，你有你的数据，如果没有，你必须继续等待。`rowsInserted``rowsMoved``dataChanged``data(someIndex, RoleIsItemFetched).toBool()`

一种替代方法可能是引入您自己的信号。不要害怕，MVC API 非常适合向用户展示数据，但是如果您认为您需要更多地控制返回的内容并完全控制模型和“视图”，请继续编写代码做*你*需要的。

# perl - 将txt文件的特定部分输出到csv？

> ID：15904641
> 
> 赞同：0
> 
> 时间：2013-04-09T14:26:13.790
> 
> 标签：perl, parsing, csv, sed

假设我有一个如下所示的 txt 文件（它显然不是“文本文本”，我只是表明它是不相关的文本块）

```
text text text
text text text 
text text text 
important section age=30
name=mike
text text text 
text text text 
text text text 
```

我想解析它并仅将“重要部分”输出到 csv，以便我的 csv 如下所示，即一列中的年龄和另一列中的名称

```
age    name
30     mike 
```

我该怎么办？珀尔？赛德？我对这两个都不熟悉，但希望有一个足够简单的解决方案。

Choroba 实际上为我完美地回答了上述问题，但我担心我过于简化了我的实际文本文件，它更像是下面

```
Something:
 this
Something else:
 that
Something else:
 etc.
Sales 
2011 Sales:
 €3,000

()
2010 Sales:
 €2,000

()
2011 Growth Rate:
 50.00%

Contact Details 
```

我理想的输出是

```
2011 Sales    2010 Sales    2011 Growth Rate
3,000         2,000         50.00% 
```

不幸的是，这使事情变得非常复杂。输出不必与上面完全相同，但尽可能接近

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:38:09.230

Perl 解决方案。它保留一个标志，告诉我们是否在重要部分。所有重要的东西都被记录在一个数组中并在最后打印出来：

```
perl -nE '$i = 1 if s/important section //;
          push @t, [$1, $2] if $i and /(.*)=(.*)/;
          }{
          for my $i (0, 1) {
              say join "\t", map $_->[$i], @t
          }' file.txt 
```

# ios - iOS：表格视图的标题栏意外被导航栏覆盖

> ID：15904642
> 
> 赞同：1
> 
> 时间：2013-04-09T14:26:20.393
> 
> 标签：ios

我正在为 iOS 应用程序开发一个简单的 UI。我所做的是我将它开发成一个表格视图，它有一个与之关联的导航控制器，并将它放在 Storyboard 中。

一切似乎工作正常，除了导航栏意外覆盖视图的标题栏“单击以选择项目”，如下图所示。

1.  第一张图片是它第一次出现在屏幕上的时候。
2.  第二个说明当我将标题栏拖离覆盖导航栏时。

我该怎么做才能完全摆脱这个？

![可悲的是，我的标题栏位于导航栏下方](https://i.stack.imgur.com/WD2qQ.jpg)

![当我把标题往下移一点](https://i.stack.imgur.com/ZYZaX.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/4DHdb.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:36:09.987

在 Interface Builder 中，选择您的视图控制器并在属性检查器上关闭 Layout: Wants Full Screen。然后，您的布局将自动调整其大小，为导航栏腾出空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-24T13:23:31.707

在您的 viewDidLoad 方法中添加此代码

```
self.navigationController?.navigationBar.translucent = false 
```

它对我有用，因为你和我有同样的问题，我认为它也对你有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T07:36:01.500

你想在哪里隐藏导航栏使用这条线

```
self.navigationController.hidden = YES; 
```

# xml - jqgrid 不显示带有特殊字符（ñ 和重音符号）的 XML 数据

> ID：15904643
> 
> 赞同：0
> 
> 时间：2013-04-09T14:26:23.667
> 
> 标签：xml, jqgrid, character-encoding

我刚刚部署了一个使用 jqgrid 的 php 应用程序，问题是 jqgrid 从 XML 响应加载数据，在 Google Chrome 上它可以工作，丑陋但可以工作，一些奇怪的字符正在替换重音字符和 ñ。

在 IE 和 firefox 上，根本不工作。

我必须检查哪些事项？

应用程序中的所有内容都使用 utf-8，但数据库（sql server）有 COLLATE = Modern_Spanish_CI_AS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:41:44.090

HTTP 标头中设置的编码也可能很重要。还有一堆其他的东西。检查这个线程 - [http://codemerx.com/jqgrid/forum/jqgrid-standalone/2-special-characters-in-jqgrid](http://codemerx.com/jqgrid/forum/jqgrid-standalone/2-special-characters-in-jqgrid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:38:38.063

在数据库中保存数据时使用哪种排序规则并不重要。重要的是，服务器提供来自服务器的 Ajax 响应将以 UTF-8 (charset=UTF-8) 编码。如果你这样做，你应该没有问题。此外，您应该在您的页面中包含`charset`或包含 jqGrid。有关代码示例，请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3afirst_grid#html_file)。`http-equiv="content-type"` `<meta>``<head>`

# java - 出于单元测试的目的，哪个内存 Java 数据库最接近 MySQL 和 SqlServer？

> ID：15904647
> 
> 赞同：5
> 
> 时间：2013-04-09T14:26:44.303
> 
> 标签：java, mysql, sql, sql-server, unit-testing

我正在寻找一个内存数据库来对我的数据访问层进行单元测试。在生产环境中，我的大部分课程将针对 MySQL 5.1 运行，但有些课程将对 Microsoft SQL Server 具有读取权限。

过去，[我遇到过不同数据库之间的方言差异导致单元测试的问题](https://stackoverflow.com/q/7432350/254477)（导致曾经使用 AspectJ 在执行之前破坏查询！！！）所以我想尽可能避免这种情况。

所以，我想知道**哪个 Java*内存*数据库在行为上最接近 MySql 和 SQL Server？**我主要关心的是 MySQL，因为我们使用它最多，并且 -AFAIK- 它具有最非标准的语法。这是用于单元测试的，因此可扩展性、性能、效率等并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:35:39.950

实际上，我在单元测试中使用 MySQL 数据库来确保正确性。使用 JUnit 时，您可以执行以下操作：

```
@Before
public void initialize() {
    try {
        dataSource.getConnection().close();
        logger.info( "got a connection, so we can assume the configuration is correct..." );
    }
    catch ( Exception e ) {
        logger.warn( "skipping tests as no connection is available.  check spring config: {}", e.getMessage() );
        e.printStackTrace();
        assumeNoException( e );
    }
} 
```

这在每次测试之前运行，如果它无法连接到数据库，它将跳过测试而不会通过`assumeNoException`. 这样，如果您需要在未配置 MySQL 的系统上构建，则可以，但如果您的开发人员正确配置他们的系统，它将使用已安装的 MySQL 实例。我知道这不是您问题的直接答案，但认为无论如何它可能有用......

# soap - Exchange EWS 不返回日历的邮件正文

> ID：15904649
> 
> 赞同：3
> 
> 时间：2013-04-09T14:26:49.083
> 
> 标签：soap, exchange-server, exchangewebservices

所以我试图从 office360.com 获取所有日历事件。我正在使用 ews 来获取数据。我发送了一个请求

```
 <?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
  <soap:Body>
    <FindItem xmlns="http://schemas.microsoft.com/exchange/services/2006/messages"
               xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types"
              Traversal="Shallow">
      <ItemShape>
        <t:BaseShape>AllProperties</t:BaseShape>
        <t:BodyType>HTML</t:BodyType>
      </ItemShape>
      <ParentFolderIds>
        <t:DistinguishedFolderId Id="calendar"/>
      </ParentFolderIds>
    </FindItem>
  </soap:Body>
</soap:Envelope> 
```

这个肥皂请求 xml 没有返回我的日历消息正文，但我得到了主题和其他数据。我在这里做错了什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-11T09:44:07.480

需要在单独的调用中检索主体。

[http://weblogs.asp.net/psperanza/archive/2008/03/18/getting-calendar-items-using-exchange-web-services.aspx](http://weblogs.asp.net/psperanza/archive/2008/03/18/getting-calendar-items-using-exchange-web-services.aspx)

或者您可以先加载该属性。

[http://blogs.msdn.com/b/exchangedev/archive/2010/03/16/loading-properties-for-multiple-items-with-one-call-to-exchange-web-services.aspx](http://blogs.msdn.com/b/exchangedev/archive/2010/03/16/loading-properties-for-multiple-items-with-one-call-to-exchange-web-services.aspx)

第二个更容易，但您需要定义所有想要返回的属性，如果它很多，可能会很痛苦。

# python - 使用 python 进行多行模式搜索

> ID：15904650
> 
> 赞同：0
> 
> 时间：2013-04-09T14:26:49.277
> 
> 标签：python, regex

```
 s="""04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: jockey
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 82
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: Donald
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 83
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: Mickey
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 84
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: Donald
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 83
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: jockey
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 82
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS"""

    exepat= re.compile(".*Sending request.*?Donald.*?TO BE SENT IS",re.DOTALL)

    reout = exepat.findall(s)

    print reout[0]

Expected Output:
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: Donald
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 83
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS 
```

我需要一种模式来提取在“发送请求”和“要发送的消息是”之间具有“唐纳德”的请求。在上面的示例中，两个请求包含“唐纳德”。所以 reout 列表应该有 2 个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:27:25.763

你正在寻找[`re.DOTALL`](http://docs.python.org/2/library/re.html#re.S)。

`re.MULTILINE`需要改变行首和行尾锚的行为`^`，`$`也`re.DOTALL`可以`.`匹配换行符。

> **`re.M`**
> **`re.MULTILINE`**
> 指定时，模式字符`'^'`匹配字符串的开头和每行的开头（紧跟在每个换行符之后）；并且模式字符`'$'` 在字符串的末尾和每行的末尾（紧接在每个换行符之前）匹配。默认情况下，`'^'`仅匹配字符串的开头、字符串`'$'`的结尾以及字符串末尾的换行符（如果有）之前。
> 
> **`re.S`**
> **`re.DOTALL`**
> 使`'.'`特殊字符完全匹配任何字符，包括换行符；没有这个标志，`'.'`将匹配除换行符以外的任何内容。

`re.DOTALL`，我得到：

```
>>> exepat= re.compile(r"Sending request.*TO BE SENT IS", re.DOTALL)
>>> reout = exepat.search(s)
>>> print reout
<_sre.SRE_Match object at 0x10a729370>
>>> print reout.group()
Sending request
04-09 11:11:57.879 [STACK]( 1653): *********
04-09 11:11:57.879 [STACK]( 1653): S: abcd 
04-09 11:11:57.879 [STACK]( 1653): l: jockey
04-09 11:11:57.879 [STACK]( 1653): k: sucess
04-09 11:11:57.879 [STACK]( 1653): j: 82
04-09 11:11:57.879 [STACK]( 1653): 
04-09 11:11:57.879 [STACK]( 1653): 
04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS 
```

如果您有*多个*此类消息，则需要使用非贪婪`*?`匹配：

```
exepat = re.compile(r"Sending request.*?TO BE SENT IS", re.DOTALL) 
```

注意问号；它指示乘数匹配满足模式的*最少字符数，而不是最多。*

然后使用`.findall()`我们在更新的示例中找到 3 个匹配项而不是 1 个匹配项：

```
>>> exepat = re.compile(r"Sending request.*?TO BE SENT IS", re.DOTALL)
>>> exepat.findall(s)
['Sending request\n04-09 11:11:57.879 [STACK]( 1653): *********\n04-09 11:11:57.879 [STACK]( 1653): S: abcd \n04-09 11:11:57.879 [STACK]( 1653): l: jockey\n04-09 11:11:57.879 [STACK]( 1653): k: sucess\n04-09 11:11:57.879 [STACK]( 1653): j: 82\n04-09 11:11:57.879 [STACK]( 1653): \n04-09 11:11:57.879 [STACK]( 1653): \n04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS', 'Sending request\n04-09 11:11:57.879 [STACK]( 1653): *********\n04-09 11:11:57.879 [STACK]( 1653): S: abcd \n04-09 11:11:57.879 [STACK]( 1653): l: jockey\n04-09 11:11:57.879 [STACK]( 1653): k: sucess\n04-09 11:11:57.879 [STACK]( 1653): j: 83\n04-09 11:11:57.879 [STACK]( 1653): \n04-09 11:11:57.879 [STACK]( 1653): \n04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS', 'Sending request\n04-09 11:11:57.879 [STACK]( 1653): *********\n04-09 11:11:57.879 [STACK]( 1653): S: abcd \n04-09 11:11:57.879 [STACK]( 1653): l: jockey\n04-09 11:11:57.879 [STACK]( 1653): k: sucess\n04-09 11:11:57.879 [STACK]( 1653): j: 84\n04-09 11:11:57.879 [STACK]( 1653): \n04-09 11:11:57.879 [STACK]( 1653): \n04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS']
>>> len(exepat.findall(s))
3 
```

# jquery - 带有可排序的 jQuery UI 多选项卡容器

> ID：15904651
> 
> 赞同：0
> 
> 时间：2013-04-09T14:27:03.427
> 
> 标签：jquery, tabs, sortables

我很难用 jQuery 完成一些事情。我有多个标签容器。在每个选项卡容器内，有多个选项卡。在每个选项卡中，都有一个可排序的。sortables 包含portlet。我试图将这些portlet 从一个选项卡容器的一个选项卡中的一个可排序的一个选项卡拖动到另一个选项卡容器的另一个选项卡中的另一个可排序的。使困惑？

这是一个 jsFiddle，它显示了我要完成的工作：http: [//jsfiddle.net/ZLGWF/](http://jsfiddle.net/ZLGWF/)

```
<snip> 
```

问题是，有时我拖到的可排序对象在我将其拖到可排序对象的一半之前无法识别该 Portlet。有时它根本认不出来。

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:49:56.473

从文档：

**容差** *默认值：“相交”*

指定用于测试正在移动的项目是否悬停在另一个项目上的模式。可能的值：

*   “相交”：该项目与另一个项目重叠至少 50%。
*   “pointer”：鼠标指针与其他项目重叠。

所以你描述的“问题”是 jQuery sortable 的默认行为。您已将选项“tolerance”设置为“touch”，这实际上是无效的，导致插件改为使用其默认的“intersect”。

我已经测试了您的小提琴，并且无法重现拖动的可排序有时根本无法识别。

# asp.net-mvc - 使用模型返回视图并转到特定的锚标记

> ID：15904653
> 
> 赞同：13
> 
> 时间：2013-04-09T14:27:04.867
> 
> 标签：asp.net-mvc

我有一个带有多个锚标签的视图。有没有办法返回带有模型对象的视图并转到视图中的特定锚标记？

例如，我的 View 有这样的锚点：

```
 <a name="Section1"></a>
   ...
   <a name="Section2"></a> 
```

我知道我可以使用以下方法击中这些锚点：

```
return Redirect(Url.RouteUrl(new { controller = "myController", action = "myAction" }) + "#Section1"); 
```

但我不认为我可以使用重定向，因为我需要发送一个模型：

> ```
> return View("myAction", model); // how to go to anchor? 
> ```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T15:44:16.877

您可以在视图模型中发送一些内容以查看并使用 javascript 滚动到该锚点。例如，假设您有一个名为 Section 的属性。您可以在控制器中设置它并在视图中使用此 javascript 代码滚动到该锚点：

```
$(document).ready(function () {
    var anchor = document.getElementById('@Model.Section');
    anchor.scrollIntoView(true);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-21T19:07:56.740

首先，我们需要将 achor 传递给我们的视图：

**控制器：**

```
 ViewBag.Section = "register"; //#register         
    return View(); 
```

**看法：**

```
@if (ViewBag.Section!=null)
{
    <script>
        $(function () {              
                window.location.hash = '#@ViewBag.Section';
        });
    </script>
} 
```

现在您可以使用“如何滚动到锚点”答案[https://stackoverflow.com/a/15906458/7149454](https://stackoverflow.com/a/15906458/7149454)

# c# - 使用 C# FtpWebRequest 列出服务器文件夹和子文件夹

> ID：15904656
> 
> 赞同：1
> 
> 时间：2013-04-09T14:27:08.790
> 
> 标签：c#, .net, ftp, streamreader, ftpwebrequest

我正在尝试使用`StreamReader`. 问题是它花费了太长时间并抛出*“操作超时异常”并且只显示一个级别。

这是我的代码

```
public void getServerSubfolder(TreeNode tv, string parentNode) {
  string ptNode;
  List<string> files = new List<string> ();
  try { 
    FtpWebRequest request = (FtpWebRequest) WebRequest.
    Create(parentNode);
    request.Method = WebRequestMethods.Ftp.ListDirectoryDetails;

    request.Credentials = new NetworkCredential(this.userName, this.Password);
    request.UseBinary = true;
    request.UsePassive = true;
    request.Timeout = 10000;
    request.ReadWriteTimeout = 10000;
    request.KeepAlive = false;
    FtpWebResponse response = (FtpWebResponse) request.GetResponse();
    Stream responseStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(responseStream);
    string fileList;
    string[] fileName;
    //MessageBox.Show(reader.ReadToEnd().ToString());
    while (!reader.EndOfStream) {
      fileList = reader.ReadLine();
      fileName = fileList.Split(' ');
      if (fileName[0] == "drwxr-xr-x") {
        // if it is directory
        TreeNode tnS = new TreeNode(fileName[fileName.Length - 1]);
        tv.Nodes.Add(tnS);
        ptNode = parentNode + "/" + fileName[fileName.Length - 1] + "/";
        getServerSubfolder(tnS, ptNode);
      } else files.Add(fileName[fileName.Length - 1]);
    }
    reader.Close();
    response.Close();
  } catch (Exception ex) {
    MessageBox.Show("Sub--here " + ex.Message + "----" + ex.StackTrace);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-30T07:10:51.280

您必须在递归到子目录之前读取（并缓存）整个列表，否则顶级请求将在您完成子目录列表之前超时。

您可以继续使用`ReadLine`，无需自己使用`ReadToEnd`和分隔线。

```
void ListFtpDirectory(
    string url, string rootPath, NetworkCredential credentials, List<string> list)
{
    FtpWebRequest listRequest = (FtpWebRequest)WebRequest.Create(url + rootPath);
    listRequest.Method = WebRequestMethods.Ftp.ListDirectoryDetails;
    listRequest.Credentials = credentials;

    List<string> lines = new List<string>();

    using (FtpWebResponse listResponse = (FtpWebResponse)listRequest.GetResponse())
    using (Stream listStream = listResponse.GetResponseStream())
    using (StreamReader listReader = new StreamReader(listStream))
    {
        while (!listReader.EndOfStream)
        {
            lines.Add(listReader.ReadLine());
        }
    }

    foreach (string line in lines)
    {
        string[] tokens =
            line.Split(new[] { ' ' }, 9, StringSplitOptions.RemoveEmptyEntries);
        string name = tokens[8];
        string permissions = tokens[0];

        string filePath = rootPath + name;

        if (permissions[0] == 'd')
        {
            ListFtpDirectory(url, filePath + "/", credentials, list);
        }
        else
        {
            list.Add(filePath);
        }
    }
} 
```

使用如下功能：

```
List<string> list = new List<string>();
NetworkCredential credentials = new NetworkCredential("user", "mypassword");
string url = "ftp://ftp.example.com/";
ListFtpDirectory(url, "", credentials, list); 
```

* * *

上述方法的一个缺点是它必须解析特定于服务器的列表来检索有关文件和文件夹的信息。上面的代码需要一个常见的 *nix 样式列表。但是许多服务器使用不同的格式。

不幸的`FtpWebRequest`是不支持该`MLSD`命令，这是在 FTP 协议中检索具有文件属性的目录列表的唯一可移植方式。

* * *

`MLSD`如果您想避免解析服务器特定目录列表格式的麻烦，请使用支持命令和/或解析各种列表格式的第三方库`LIST`；和递归下载。

例如，使用[WinSCP .NET 程序集](https://winscp.net/eng/docs/library)，您可以通过一次调用列出整个目录[`Session.EnumerateRemoteFiles`](https://winscp.net/eng/docs/library_session_enumerateremotefiles)：

```
// Setup session options
SessionOptions sessionOptions = new SessionOptions
{
    Protocol = Protocol.Ftp,
    HostName = "ftp.example.com",
    UserName = "user",
    Password = "mypassword",
};

using (Session session = new Session())
{
    // Connect
    session.Open(sessionOptions);

    // List files
    IEnumerable<string> list =
        session.EnumerateRemoteFiles("/", null, EnumerationOptions.AllDirectories).
        Select(fileInfo => fileInfo.FullName);
} 
```

`MLSD`如果服务器支持，WinSCP 在内部使用该命令。如果没有，它会使用该`LIST`命令并支持数十种不同的列表格式。

*（我是WinSCP的作者）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:14:05.010

我正在做类似的事情，但不是对每个都使用 StreamReader.ReadLine()，而是使用 StreamReader.ReadToEnd() 一次性完成。您不需要 ReadLine() 来获取目录列表。以下是我的整个代码（[本](http://prahladyeri.wordpress.com/2012/07/28/how-to-create-an-ftp-client-in-c/)教程中解释了整个操作方法）：

```
 FtpWebRequest request=(FtpWebRequest)FtpWebRequest.Create(path);
        request.Method=WebRequestMethods.Ftp.ListDirectoryDetails;
        List<ftpinfo> files=new List<ftpinfo>();

        //request.Proxy = System.Net.WebProxy.GetDefaultProxy();
        //request.Proxy.Credentials = CredentialCache.DefaultNetworkCredentials;
        request.Credentials = new NetworkCredential(_username, _password);
        Stream rs=(Stream)request.GetResponse().GetResponseStream();

        OnStatusChange("CONNECTED: " + path, 0, 0);

        StreamReader sr = new StreamReader(rs);
        string strList = sr.ReadToEnd();
        string[] lines=null;

        if (strList.Contains("\r\n"))
        {
            lines=strList.Split(new string[] {"\r\n"},StringSplitOptions.None);
        }
        else if (strList.Contains("\n"))
        {
            lines=strList.Split(new string[] {"\n"},StringSplitOptions.None);
        }

        //now decode this string array

        if (lines==null || lines.Length == 0)
            return null;

        foreach(string line in lines)
        {
            if (line.Length==0)
                continue;
            //parse line
            Match m= GetMatchingRegex(line);
            if (m==null) {
                //failed
                throw new ApplicationException("Unable to parse line: " + line);
            }

            ftpinfo item=new ftpinfo();
            item.filename = m.Groups["name"].Value.Trim('\r');
            item.path = path;
            item.size = Convert.ToInt64(m.Groups["size"].Value);
            item.permission = m.Groups["permission"].Value;
            string _dir = m.Groups["dir"].Value;
            if(_dir.Length>0  && _dir != "-")
            {
                item.fileType = directoryEntryTypes.directory;
            } 
            else
            {
                item.fileType = directoryEntryTypes.file;
            }

            try
            {
                item.fileDateTime = DateTime.Parse(m.Groups["timestamp"].Value);
            }
            catch
            {
                item.fileDateTime = DateTime.MinValue; //null;
            }

            files.Add(item);
        }

        return files; 
```

# ios - 使用自定义 UIActivity 将数据获取到其他 ViewController

> ID：15904663
> 
> 赞同：1
> 
> 时间：2013-04-09T14:27:26.580
> 
> 标签：ios, uiactivity

我尝试将自定义图标添加到 UIActivity，我做到了，但我无法设置 UIACtivity。当我单击图标打开其他 ViewController 并从 UIActivity 获取文本和图像时，我想要帽子。我有这个代码

```
- (UIViewController *)activityViewController
{
    ViewController *viewController = [[[ViewController alloc] init] autorelease];
    viewController.activity = self;
    viewController.modalTransitionStyle=UIModalTransitionStyleCoverVertical;

    return viewController;
} 
```

但这不起作用

```
- (void)performActivity

{
    ViewController *viewController = [[[ViewController alloc] init] autorelease];
    [viewController.textField1 setText:self.message];
    [viewController.imageView setImage:self.image];
    [self activityDidFinish:YES];
} 
```

# php - Wordpress 循环问题

> ID：15904664
> 
> 赞同：0
> 
> 时间：2013-04-09T14:27:26.527
> 
> 标签：php, html, loops, wordpress

在我网站的主页上，我希望最新的帖子最大，然后旧的帖子更小并低于它。看图片 ![在此处输入图像描述](https://i.stack.imgur.com/nN9mo.png)

我创建了一个 wordpress 循环，它部分完成了这项工作，我缩小了，这样你就可以获得更清晰的视图。 ![在此处输入图像描述](https://i.stack.imgur.com/xtyd3.png)

```
<?php if (have_posts()): ?>

  <section class="latest-blog">
<?php query_posts('showposts=5'); ?>

<?php $i = 0; while (have_posts()) : the_post(); ?>

  <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
        <!-- Post Title -->
    <h1>
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
    </h1>
    <!-- /Post Title -->
    <?php html5wp_excerpt('html5wp_index'); // Build your custom callback length in functions.php ?>

        <br class="clear">

    <?php edit_post_link(); ?>

   </article>
 </section>

<section class="archive">
<?php if(++$i === 1):  ?>
<?php endif; ?>      

<?php endwhile; ?>
</section>    

<?php endif; ?> 
```

似乎正在发生的事情是每个旧帖子都获得了部分存档，因为我希望所有旧帖子都作为文章在部分存档中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:43:43.850

如果我理解您的问题，我认为您不需要多个循环，而是我认为您可以在循环中使用“特殊”案例来处理最近的第一个帖子，然后正常处理所有较旧的帖子（看起来就像你想反过来做一样？）。

这个怎么样：

```
 <?php 
  $firstPost = true; 
  query_posts('showposts=5');
  while (have_posts()) {
     the_post();
     if ($firstPost) {
       ?>
         <section class="latest-blog">
            my_article();
         </section><!-- /latest-blog -->

         <section class="archive">

     <?php 
       $firstPost = false;
     } // end of if(firstPost)
     ?>

     my_article();

   <?php
   } // end of the loop
   ?>

</section><!-- /archive -->

<?php
function my_article() {
   ?>
   <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
      <!-- Post Title -->
        <h1><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h1>
      <!-- /Post Title -->
      <?php html5wp_excerpt('html5wp_index'); // Build your custom callback length in functions.php ?>
      <br class="clear"> 
      <?php edit_post_link(); ?>  
   </article>
   <?php
}
?> 
```

如果从*数据*的角度来看，帖子都是相同的，那么我没有真正的理由可以想到执行单独的查询来检索它们。只是以不同的方式*呈现*第一个。这样做会减少您的代码，这意味着更少的错误位置，并减少数据库开销，这意味着性能更好的站点。

另请注意，[法典`query_posts()`](http://codex.wordpress.org/Function_Reference/query_posts)表明这不是一种有效的方法来做你正在做的事情。因此，一旦您按原样工作，您可能想要调查 WP 推荐的使用该`pre_get_posts`操作的方法，尽管这在“页面”的情况下可能不适用/不合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:43:54.320

将您的代码分成 2 个循环。

**特色帖子的第一个循环：**

```
<?php query_posts('showposts=1'); ?>
<section class="latest-blog">
<?php $i = 0; while (have_posts()) : the_post(); ?>
  <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
        <!-- Post Title -->
    <h1>
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
    </h1>
    <!-- /Post Title -->
    <?php html5wp_excerpt('html5wp_index'); // Build your custom callback length in functions.php ?>

        <br class="clear">

    <?php edit_post_link(); ?>

   </article>
<?php endwhile; ?>
</section> 
```

**其余帖子的第二个循环：**

```
<?php wp_reset_query(); ?>
<?php query_posts('showposts=5&offset=1'); ?>
<section class="archive">
<?php $i = 0; while (have_posts()) : the_post(); ?>
  <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
        <!-- Post Title -->
    <h1>
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
    </h1>
    <!-- /Post Title -->
    <?php html5wp_excerpt('html5wp_index'); // Build your custom callback length in functions.php ?>

        <br class="clear">

    <?php edit_post_link(); ?>

   </article>
   <?php endwhile; ?>
</section> 
```

您会注意到我们在查询中使用 offset=1 来偏移第二个循环的第一个帖子（因此它不会出现两次）。

您的最终代码将如下所示：

```
<?php if (have_posts()): ?>
<?php query_posts('showposts=1'); ?>
<section class="latest-blog">
<?php $i = 0; while (have_posts()) : the_post(); ?>
  <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
        <!-- Post Title -->
    <h1>
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
    </h1>
    <!-- /Post Title -->
    <?php html5wp_excerpt('html5wp_index'); // Build your custom callback length in functions.php ?>

        <br class="clear">

    <?php edit_post_link(); ?>

   </article>
<?php endwhile; ?>
</section>

<?php wp_reset_query(); ?>
<?php query_posts('showposts=5&offset=1'); ?>
<section class="archive">
<?php $i = 0; while (have_posts()) : the_post(); ?>
  <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
        <!-- Post Title -->
    <h1>
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
    </h1>
    <!-- /Post Title -->
    <?php html5wp_excerpt('html5wp_index'); // Build your custom callback length in functions.php ?>

        <br class="clear">

    <?php edit_post_link(); ?>

   </article>
   <?php endwhile; ?>
</section>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:39:19.643

您需要运行 2 个循环，一个用于主要帖子，一个用于存档帖子。您不能只是在中间放一个计数器，然后希望 HTML 能神奇地正确格式化自己。

这样的事情*可能会*奏效。

```
<section class="latest-blog">
  <?php query_posts('showposts=1'); ?>

  <?php while (have_posts()) : the_post(); ?>

    <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
        <!-- Post Title -->
      <h1>
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
      </h1>
      <!-- /Post Title -->
      <?php html5wp_excerpt('html5wp_index'); // Build your custom callback length in functions.php ?>

      <br class="clear">

      <?php edit_post_link(); ?>

    </article>
  <?php endwhile; ?>
</section>

<section class="archive">
  <?php wp_reset_query(); ?>
  <?php query_posts('showposts=5&offset=1'); ?>
  <?php while (have_posts()) : the_post(); ?>
    <?php // code for "archived" post ?>
  <?php endwhile; ?>
</section> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T14:39:02.223

最好的办法是创建 2 个单独的循环，

顶部循环仅带回 1 个帖子！底部循环返回其他 4

```
// The Loop
while ( have_posts() ) : the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile;

// Reset Query
wp_reset_query();
?>    
</div>
<div class="subTop">
<?php
query_posts( 'posts_per_page=4' );

// The Loop
while ( have_posts() ) : the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile;

// Reset Query
wp_reset_query();
?>   
</div> 
```

希望这会有所帮助

米

# r - 删除矩阵中的重复列

> ID：15904668
> 
> 赞同：6
> 
> 时间：2013-04-09T14:27:29.530
> 
> 标签：r

我有一个维度为 401*5677 的数据集。在该矩阵的列中，存在相同但列名不同的列。现在，我想从重复多次的列中只保留一列，并为删除的列获取索引 j。

让我们使用以下矩阵作为示例：

```
B=matrix(c(1,4,0,2,56,7,1,4,0,33,2,5), nrow=3)
colnames(B)<-c("a","b","c","d") 
```

到目前为止我所做的（在我的真实矩阵 G 上）是：

```
corrG<-cor(G) 
Gtest=G
for (i in 1:nrow(corrG)){
  for (j in 1:ncol(corrG)){
    if (i<j && corrG[i,j]==1){ 
      Gtest[,j]=NA
    }
  }
}
Gfinal<-Gtest[,complete.cases(t(Gtest))] 
```

我的代码返回一个仍然包含（！）一些重复列的矩阵。有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T14:33:26.767

`duplicated`在矩阵的转置上尝试函数。

```
duplicated.columns <- duplicated(t(your.matrix))

new.matrix <- your.matrix[, !duplicated.columns] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T14:45:36.310

一行回复

```
B = matrix(c(1, 4, 0, 2, 56, 7, 1, 4, 0, 33, 2, 5), nrow = 3)
colnames(B) <- c("a", "b", "c", "d")

B
##      a  b c  d
## [1,] 1  2 1 33
## [2,] 4 56 4  2
## [3,] 0  7 0  5

B[, !duplicated(t(B))]
##      a  b  d
## [1,] 1  2 33
## [2,] 4 56  2
## [3,] 0  7  5 
```

# xml - VBA 读取 XML 仅适用于本地 XML 文件

> ID：15904670
> 
> 赞同：0
> 
> 时间：2013-04-09T14:27:39.700
> 
> 标签：xml, vba

我正在运行以下代码

```
 Sub test()
        'XML = "C:\R_20130408_1.xml" 'This is local, and works fine
        XML = "http://www.treasurydirect.gov/xml/R_20130408_1.xml" 'This get nothing for "point"
        Dim objXML As DOMDocument
        Dim point As IXMLDOMNode
        Set objXML = New DOMDocument
        With objXML
            .Load XML
            Set point = .SelectSingleNode("//AuctionAnnouncement/CUSIP")
            Sheets(1).Cells(2, 2) = point.Text
        End With

    End Sub 
```

如您所见，如果我从网上下载这个 XML，我可以让它工作，否则，objXML 仍然会加载，但点什么都没有。

有人会对此提出一些想法吗？

非常感谢！姬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:51:31.500

本地 XML 文件和远程文件之间的 XML 标头/布局是否可能不同？通过将 XPath 更改为以下字符串，我能够使 HTTP 版本正常工作：`"*/AuctionAnnouncement/CUSIP"`

# hadoop - fs -put（或 copyFromLocal）和数据类型感知

> ID：15904671
> 
> 赞同：0
> 
> 时间：2013-04-09T14:27:40.170
> 
> 标签：hadoop

如果我使用 hadoop fs -put 文件名将大小为 117MB 的文本文件上传到 HDFS，我可以看到一个数据节点包含大小为 64.98MB（默认文件拆分大小）的文件部分，另一个数据节点包含大小为 48.59MB 的文件部分。

我的问题是这个分割位置是否是以数据感知的方式计算的（例如，以某种方式识别文件是文本并因此在“\n”处分割文件）。

我意识到 InputFileFormat 可用于告诉正在运行的作业如何以智能方式拆分文件，但由于我没有在 fs -put 命令中指定文件类型，我想知道是否（以及如何）智能拆分将在这种情况下完成。

艾莉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:04:25.843

我认为您在这里混淆了两件事，以下两种拆分类型是完全分开的：

1.  将文件拆分为 HDFS 块
2.  拆分要分发给映射器的文件

而且，不，拆分位置不是以数据感知方式计算的。

现在，默认情况下，如果您使用`FileInputFormat`，那么这两种类型的拆分类型的重叠（因此是相同的）。

但是对于上面的第二点，您总是可以有一种自定义的拆分方式（甚至根本没有拆分，即让一个完整的文件转到单个映射器）。

您还可以更改 hdfs 块大小，而与`InputFormat`拆分输入数据的方式无关。

这里要注意的另一个重点是，虽然文件在存储到 HDFS 时实际上是物理损坏的，但是为了分发给映射器的拆分，没有文件的实际物理拆分，而只是逻辑拆分。

以[这里](http://search-hadoop.com/m/R08GlLTWYb)为例：

> 假设我们要加载一个 110MB 的文本文件到 hdfs。hdfs 块大小和输入拆分大小设置为 64MB。
> 
> 1.  映射器的数量基于输入拆分的数量而不是 hdfs 块拆分的数量。
>     
>     
> 2.  当我们将 hdfs 块设置为 64MB 时，它正好是 67108864(64*1024*1024) 字节。我的意思是文件将从行的中间分割并不重要。
>     
>     
> 3.  现在我们有 2 个输入拆分（所以有两个映射）。第一个块的最后一行和第二个块的第一行没有意义。TextInputFormat 负责读取有意义的行并将它们提供给映射作业。TextInputFormat 的作用是：
>     
>     
>     *   在第二个块中，它将寻找完整的第二行并从那里读取并将其提供给第二个映射器。
>     *   第一个映射器将读取直到第一个块的结尾，并且它还将处理（第一个块的最后一个不完整的行+第二个块的第一个不完整的行）。

[在这里](http://wiki.apache.org/hadoop/HadoopMapReduce)阅读更多。

# vb.net - 在表单中添加帮助按钮

> ID：15904679
> 
> 赞同：0
> 
> 时间：2013-04-09T14:27:57.517
> 
> 标签：vb.net, winforms

我在工具栏上有一个带有最小化/最大化按钮的表单，所以那里没有帮助按钮。

所以我想我会添加一个普通按钮并在单击事件上添加代码以显示帮助光标并在控件上显示帮助文本，就像工具栏上的帮助按钮一样。

我可以更改光标以显示问号，但这不会做任何其他事情，我怎样才能“激活”帮助功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:31:42.140

您首先必须创建一个，看看`Helpprovider class`：

[Msdn HelpProvider 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.helpprovider.aspx)

[帮助提供者示例](http://www.c-sharpcorner.com/uploadfile/mahesh/helpprovider-in-C-Sharp/)

但是，您也可以创建一个`simple form`，添加一个`webbrowser control`。然后创建一个`.html`文件并将其插入到 中`webbrowser control`，当用户单击 时`help button`，`form`将打开带有`.html`帮助文本的页面。

您可以在属性窗口中为打开帮助功能的按钮设置快捷方式，如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/LLuAz.png)

F1 按钮将调用调用帮助功能的帮助按钮后面的代码。

# ruby-on-rails - 拆分数字列表并分别循环

> ID：15904681
> 
> 赞同：1
> 
> 时间：2013-04-09T14:27:58.520
> 
> 标签：ruby-on-rails

我有一个引用记录 id 的数字列表，我需要遍历列表，并显示每个资源的标题和链接。我目前有这个：

```
- @otherresource = "1,2,3"

- @otherresource.split(",").each do |s|
  - Resource.find(:all, :conditions => ["id = 's'"]).each do |p|
    %li= link_to "#{ p.title }", "/resources/#{p.resourcetype}/#{p.title}" 
```

但这仅显示列表中的第一个然后停止。它不会遍历每个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:36:12.183

我会这样写，因为在单个 VS 多个数据库行程中获取多条记录更有效。

```
- @otherresource = '1,2,3'
- Resource.where(id: @otherresource.split(',')).each do |res|
  %li- link_to #{res.title}, "/resources/#{res.resourcetype}/#{res.title}" 
```

上述查询使用单个查询，而不是您的示例中的三个查询。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:40:04.757

您的控制器应该负责从数据库中获取资源：

```
def action
  @otherresource = "1,2,3"
  ids = @otherresource.split ","
  @resources = Resource.where(id: ids) # fetch all resources at once
end 
```

那么在你看来：

```
- @resources.each do |p|
  %li= link_to "#{ p.title }", "/resources/#{p.resourcetype}/#{p.title}" 
```

顺便说一句，对这种关系使用*关联*可能是个好主意。有关详细信息，请参阅[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:33:04.743

您没有检查是否`id`等于您的`s`变量。您正在检查是否`id`等于“s”字符。正确的条件应该是：

```
 :conditions => ["id = '" + s + "'"] 
```

# c# - 有什么方法可以获取货币名称列表并将它们映射到货币符号？

> ID：15904690
> 
> 赞同：3
> 
> 时间：2013-04-09T14:28:23.980
> 
> 标签：c#, currency, cultureinfo, culture

我有 C# 代码可以生成这样的列表，使用文化（[链接](https://stackoverflow.com/questions/12373800/3-digit-currency-code-to-currency-symbol)）：

```
AUD $ 
CAD $ 
EUR € 
GBP £ 
JPY ¥ 
USD $ 
```

我想要的也是这样的列表：

```
Australian Dollar
Canadian Dollar
Euro
British Pound
Japanese Yen
United States Dollar 
```

我真正想要的是应该有一个下拉样式的Winforms Combobox，用户从中选择货币，例如`British Pound`，然后通过函数或其他东西，`GBP`或者`£`返回。这将帮助我解析用户可能在相邻货币值文本框中键入的货币值。

那么我可以使用文化（或其他不需要互联网连接的东西）来获取描述性的货币名称列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-11T21:01:06.567

如果您使用的是完整的 .NET Framework，* 您可以通过枚举`CultureInfo`实例并创建相关`RegionInfo`的.NET 框架来获取唯一货币`LCID`。然后，您可以从 中返回相关货币字段`RegionInfo`，即`ISOCurrencySymbol`、`CurrencyEnglishName`和`CurrencySymbol`。

例如，以下代码将返回 distinct`ISOCurrencySymbol`以及关联的名称和符号。

```
var currencies = CultureInfo.GetCultures(CultureTypes.SpecificCultures)
    .Select(ci => ci.LCID).Distinct()
    .Select(id => new RegionInfo(id))
    .GroupBy(r => r.ISOCurrencySymbol)
    .Select(g => g.First())
    .Select(r => new
    {
        r.ISOCurrencySymbol,
        r.CurrencyEnglishName,
        r.CurrencySymbol,
    }); 
```

对于原始问题中提供的 ISO 符号，将返回以下信息：

> AUD, $, 澳元
> CAD, $, 加元
> EUR, ?, 欧元
> GBP, £, 英镑
> JPY, ¥, 日元
> USD, $, 美元

* * *

注意：`RegionInfo.CurrencyNativeName`也存在，但它将以给定地区的母语提供货币名称。因此，它可能具有与之关联的`ISOCurrencySymbol`各种实例，并且在这种情况下对映射没有用处。`CurrencyNativeName`

* .NET Core 似乎不支持枚举`CultureInfo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:06:56.813

在我看来，最简单的方法是为 Currency 创建一个包装类，如下所示：

```
public class Currency
{
   public string Code { get; set; }  // USD
   public string Name { get; set; }  // United States Dollar
   public string Symbol { get; set; } // $
} 
```

您可以创建这些类的集合并将其设置`Name`为要在组合框中显示的成员。用户选择某个值后，您可以轻松地使用 Linq 例如获取对应的类。

# c# - 通过 Key 获取资源中的对象

> ID：15904691
> 
> 赞同：0
> 
> 时间：2013-04-09T14:28:30.500
> 
> 标签：c#, wpf

这应该是WPF的初学者问题，但我找不到简单的答案。如何获得 WPF 中声明的对象的句柄？

```
<Window x:Class="Testprj" xmlns:local="clr-namespace:Testprj">
    <Window.Resources>
        <local:CustomValidation x:Key="validationObj"/>
    </Window.Resources>
</Window> 
```

如果我没记错的话，上面的代码是用键“validationObj”创建一个“CustomValidation”对象的实例。现在，假设每个“CustomValidation”对象都有一个名为“ **myInstanceVar** ”的实例变量，我如何从后面的代码中获取 myInstanceVar 的值？

我正在尝试做的是（伪代码）：

```
validationObj.myInstanceVar 
```

但它甚至找不到“validationObj”。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:38:27.780

我相信您在问如何从后面的代码中使用该对象。我相信`this.FindResource("validationObj")`会成功的。

```
var valObj = (CustomValidation)this.FindResource("validationObj");
var whatever = valObj.myInstanceVar; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:36:08.020

你问如何在代码隐藏中访问 XAML 中声明的控制

使用 x:name

而不是在你的代码隐藏中使用便便

[http://msdn.microsoft.com/en-us/library/ms752290.aspx](http://msdn.microsoft.com/en-us/library/ms752290.aspx)

通常你不应该有代码并使用 MVVM 设计模式来避免它。

这是一个很好的起点： [MVVM：从头到尾的教程？](https://stackoverflow.com/questions/1405739/mvvm-tutorial-from-start-to-finish)

# iframe - 如何调整内容大小以适合 iframe

> ID：15904692
> 
> 赞同：1
> 
> 时间：2013-04-09T14:28:32.210
> 
> 标签：iframe

我有一个带有 iframe 的 webapp (iphone)，我想调整 iframe 中内容的大小，因此不会裁剪任何内容。我已经设法让它与下面的代码一起工作，我得到的问题是我在 iframe 中加载的页面中的所有链接都不起作用。

问题是这样的：

```
-webkit-transform: scale(0.30);
-webkit-transform-origin: 0 0; 
```

当我使用变换缩放时，由于某种原因链接停止工作。如果我删除上面的 css 链接开始工作，但是内容溢出并在 iframe 中被裁剪。

我用它来缩放内容：

```
<div class="theiframewrap">      
<iframe id="theiframeid" class="theiframeid" src="http://www.mypage.se/"></iframe>
</div> 
```

和CSS：

```
.theiframewrap { 
    width: 320px!important;     
    padding: 0px; 
    top:45px; 
    position:relative; 
    overflow:hidden; 
    border:0px solid #f00;
    z-index:2200;
    }
.theiframeid { 
    height:600px;
    width:100%;
    margin:0px; 
    top:0px; 
        -webkit-transform: scale(0.30);
        -webkit-transform-origin: 0 0;
    z-index:2300;
} 
```

正如我所写，这很有效，它可以按比例缩小内容，但为什么链接停止工作？

您还有其他方法吗，请告诉我，这让我发疯:-) 谢谢。

# html - 位置转换：绝对标题和背景

> ID：15904693
> 
> 赞同：1
> 
> 时间：2013-04-09T14:28:32.297
> 
> 标签：html, css, image, header, hover

我正在尝试将悬停状态应用于某些投资组合导航。它是图像顶部水平和垂直居中的标题。定心可以按我的需要进行（它之所以如此复杂是有原因的，或者相信我，我会以其他方式进行）。

但是悬停状态给我带来了问题。我正在尝试做这样的事情：http: [//jsfiddle.net/kmjRu/33/](http://jsfiddle.net/kmjRu/33/)。`h2`这是图像悬停时及其背景的过渡。我几乎可以通过调整不透明度或 z-index 来使其工作`h2`，但尤其是背景颜色的更改不起作用（因为没有元素完全覆盖图像，我可以更改其背景）。有谁知道如何让悬停状态正常工作？

这是我拥有的代码，我正在尝试让这种悬停效果起作用：

*（也张贴在这里：http: [//jsfiddle.net/kmjRu/34/](http://jsfiddle.net/kmjRu/34/)）*

HTML

```
<article>
    <div class="img-crop">
        <h2>Title</h2>
        <a href="#"><img src="http://bit.ly/gUKbAE" /></a>
    </div>
</article> 
```

CSS

```
* {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
}

article {
    overflow: hidden;
}

.img-crop {
    display: inline-block;
    position: relative;
    overflow: hidden;
    max-width: 100%;
}

h2 {
    margin: 0;
    padding: 0;
    z-index: 1;
    line-height: 0;
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:36:38.333

```
h2 {
    margin: 0;
    padding: 0;
    z-index: 1;
    line-height: 0;
    position: absolute;
    display: block;
    top: 50%;
    left: 0;
    width: 100%;
    text-align: center;
    opacity: 0;

    transition: all 0.3s ease-out;
    -moz-transition: all 0.3s ease-out;
    -webkit-transition: all 0.3s ease-out;
    -o-transition: all 0.3s ease-out;
}

h2:hover {
    opacity: 1;
} 
```

这可能是它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:43:52.773

基本上，您需要确保以下事项。

1.  你的 h2 应该完全等于后面的容器，只有这样它才会执行完全覆盖。
2.  将默认值设置`opacity`为`h2`0。并将其更改/转换为某个中间值，例如 0.6 `hover`。
3.  现在，您还需要将 `background-color`h2 设置为黑色，或者与父容器不同，然后它才会出现。
4.  然后给 h2 元素适当的填充，使文本出现在中间。

设置`h2`如下：

```
h2 {
    margin: 0;
    z-index: 1;
    padding-top:20%;
    line-height: 0;
    position: absolute;
    top: 0%;
    left: 0;
    width: 100%;
    text-align: center;
    vertical-align:middle;
    height:100%;

    opacity:0;
} 
```

并设置你`h2:hover`这样：

```
h2:hover
{
    padding-top:20%;
    color:white;
    background-color:Black;
    opacity:0.6;
    -webkit-transition: opacity 0.25s, background-color 0.25s;
    -o-transition: opacity 0.25s, background-color 0.25s;
    -moz-transition: opacity 0.25s, background-color 0.25s;
    -ms-transition: opacity 0.25s, background-color 0.25s;
    -kthtml-transition: opacity 0.25s, background-color 0.25s;
    transition: opacity 0.25s, background-color 0.25s;
} 
```

看到这个[小提琴](http://jsfiddle.net/kmjRu/35/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T14:29:11.840

所以，我通过这样做解决了这个问题：

HTML

```
<article>
    <div class="item">
        <a href="#" class="title"><h2>Title</h2></a>
        <img src="http://placehold.it/350x150" />
    </div>
</article> 
```

CSS

```
article {
    overflow: hidden;
}

h2 {
    font-weight: normal;
    z-index: 2;
    line-height: 0;
    position: absolute;
    top: 50%;
    width: 100%;
    text-align: center;
    left: 0;
    margin: 0;
    padding: 0;
    color: rgba(255,255,255,0);
    -webkit-transition: color 0.2s linear;  
    -moz-transition: color 0.2s linear;  
    -o-transition: color 0.2s linear;  
    transition: color 0.2s linear; 
}

.title {
    display: inline-block;
    position: absolute;
    overflow: hidden;
    z-index: 1;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0);
    text-decoration: none;
    -webkit-transition: background-color 0.2s linear;  
    -moz-transition: background-color 0.2s linear;  
    -o-transition: background-color 0.2s linear;  
    transition: background-color 0.2s linear; 
}

.title:hover {
    text-decoration: none;
}

.item {
    display: inline-block;
    position: relative;
    max-width: 100%;
}

.item:hover .title {
    background: rgba(0,0,0,0.6);
}

.item:hover h2 {
    color: rgba(255,255,255,1);
}

img {
    border: 0;
    vertical-align: top;
    max-width: 100%;
} 
```

看到这个[小提琴](http://jsfiddle.net/y8ZXW/)。这样它是动态的（图像是流动的，没有固定的高度或宽度）并且标题自动垂直和水平居中。

# maven - Netbeans 6.7.1 使用的 Maven 版本

> ID：15904697
> 
> 赞同：1
> 
> 时间：2013-04-09T14:28:36.780
> 
> 标签：maven, netbeans, settings

我正在使用 Netbeans 6.7.1 开发 Maven 项目。

如何查看我的 Netbeans 使用的 Maven 所在的位置？我想编辑这个 Maven 安装的 settings.xml 文件。

有没有办法可以`mvn -version`使用 Netbeans 运行？在我下载 Netbeans 之前，我已经在我的计算机上安装了 Maven 3，MAVEN_HOME 指向它，但我认为这个 Netbeans 使用 Maven 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:52:07.767

我目前没有可用的 Netbeans 6.7 安装。但据我所知，您可以在 Netbeans 的“工具/选项/杂项”下找到 Maven 设置。应该有一个 Maven 选项卡。

如果你想使用你的外部安装，你可以在项目属性中设置你的外部 Maven（见这个[截图](http://wiki.netbeans.org/MavenBestPractices#Binding_Maven_goals_to_IDE_actions)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:33:10.427

尝试`mvn info`在您的控制台中输入

# php - 如何再次应用 WHERE 子句数组或 jscon 编码值

> ID：15904708
> 
> 赞同：0
> 
> 时间：2013-04-09T14:29:06.787
> 
> 标签：php, mysql, json, zend-framework2

值存储在 company_id 下，例如

```
["2"]
["2", "1"] 
```

其中 2 和 1 是公司的 ID。现在我想要 ID 2 的所有结果。如何再次触发查询 json 编码数据。

```
select * from tbl where company_id = 2 
```

这是我需要执行的。

有关更多信息，json 格式是 Zend2 中动态（按数据库值填充）选择列表的结果。

如果它是数组而不是 json，如何执行这个简单的选择查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:34:28.773

MySQL 有一个名为`SET`You can use this data type on this task 的数据类型。这将允许您输入逗号分隔的值，并且仍然能够按单个项目进行查询。

手册：[http ://dev.mysql.com/doc/refman/5.0/en/set.html](http://dev.mysql.com/doc/refman/5.0/en/set.html)

您的查询必须更新为如下内容：

```
SELECT * FROM tbl_name WHERE FIND_IN_SET('2', company_id); 
```

但是，出现这个问题是因为表格没有正确规范化。当应用程序达到大规模时，添加引用表并查询该引用表将是一个更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:47:21.433

由于每个 ID 都是双引号内的数字，因此您可以使用`LIKE`语句查询：

```
select * from tbl where company_id LIKE '%"2"%' 
```

> 如果它是数组而不是 json，如何执行这个简单的选择查询。

您可以将 JSON 存储到 mysql 数据库中，因为它是一个字符串。但是数组不是字符串，所以你不能把它存储在那里。您需要对其进行序列化，但为此您应该更喜欢 JSON。

另一种方法是创建一个表来存储与公司的关系。

# html - 在 HTML5 画布中具有多个停止或多个描边线的线性渐变？

> ID：15904709
> 
> 赞同：0
> 
> 时间：2013-04-09T14:29:08.033
> 
> 标签：html, canvas

我目前正在使用沿图像宽度的大约 600 条描边线渲染背景，然后对它们进行高斯模糊处理。

我的问题是，事实证明这对于背景来说相对较慢，如果它接近即时，我更喜欢它。

我正在玩弄具有多个停靠点的 LinearGradient 会更适合这项工作的想法，你们认为什么会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T15:47:29.420

马克E回答

> 模糊 == 邪恶的表演者。由于渐变使用模糊来减少条带，因此您可能会在坏和坏之间做出选择。绘制一次 600 行 + 模糊并将其保存到图像或屏幕外画布怎么样。然后在需要时修改+应用保存的效果。这会给你带来真正的性能提升

# android - Android R & 布局错误

> ID：15904711
> 
> 赞同：0
> 
> 时间：2013-04-09T14:29:12.753
> 
> 标签：android, eclipse, android-layout

我是一名初学者 Android 应用程序开发人员。我创建了一个名为“splash”的 XML 布局，我已更改`setContentView(R.layout.activi­ty_main);`为`setContentView(R.layout.splash­);`但出现错误。我试图重新做所有事情，但我在`R`. 当我执行“快速修复”时，会出现一个新错误。它是由`activity_main`和引起的`splash`。

当我重新开始时，我只是更改了背景，`activity_main`但是我得到了同样的错误，尽管我没有修改 MainActivity.java 中的任何内容。

到目前为止，这是我的代码：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.**activity_main**);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.**menu**.main, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:33:24.557

导入 R 时需要小心，因为 Android 操作系统提供了系统默认值等。查看导入以确保从包中获取 R。如果您的布局无法编译，您可能还会看到问题。

# javascript - 如何在动力学js中分别使用可拖动和单击？

> ID：15904712
> 
> 赞同：0
> 
> 时间：2013-04-09T14:29:15.877
> 
> 标签：javascript, html, html5-canvas, draggable, kineticjs

如何使用可拖动并单击 kineticjs 中的同一节点？使用可拖动时，拖动后也会触发单击事件。

在 jsfiddle，[http://jsfiddle.net/matobaa/LZ5tt/](http://jsfiddle.net/matobaa/LZ5tt/)

这是代码...

```
var stage = new Kinetic.Stage({
  container: 'container', width: 640, height: 480
});
var layer = new Kinetic.Layer();
var oval = new Kinetic.Ellipse({
  x: 100, y: 100, radius: 50, stroke: 'red',
  draggable: true,
});
oval.on('click', function(evt) {
  alert("clicked!"); // Will not be triggered after drag
})
layer.add(oval);
stage.add(layer); 
```

我正在使用 kineticjs 4.4.1。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:35:29.903

您需要检测拖动状态。埃斯：

```
var indrag = false;
oval.on('dragstart', function(evt){
    indrag = true;
});
oval.on('dragend', function(evt){
    indrag = false;
}); 
```

接着：

```
oval.on('click', function(evt) {
    if (!indrag){
        alert("clicked!"); // Will not be triggered after drag
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T10:43:56.713

您可以通过变量值检查当前事件的功能来做到这一点。jsFiddle：http: [//jsfiddle.net/LZ5tt/4/](http://jsfiddle.net/LZ5tt/4/)

```
 var stage = new Kinetic.Stage({
      container: 'container', width: 640, height: 480
    });
    var layer = new Kinetic.Layer();
    var oval = new Kinetic.Ellipse({
        x: 100, y: 100, radius: 50, stroke: 'red',
      draggable: true,
    });
    var drag = false;
    oval.on('dragstart', function(event){
        drag = true;
    });
    oval.on('dragend', function(event){
        drag = false;
    });
    oval.on('click', function(event) {
        if (!drag){
            alert("I'm clicked!");
        }
    })
    layer.add(oval);
    stage.add(layer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T16:56:07.177

只是一些关于 KineticJS 5.1.0 版的有用提示。

如果检测到 Kinetic Stage 上的点击，您可能会遇到在完成对形状的拖动后，会触发舞台上的 click 事件。

我建议在*dragstart中将**控制*变量设置为“true” ；然后，检查触发的点击事件内的变量，将其设置为“false”，然后*返回*退出代码块。这样您就不会阻止点击事件，但在处理它时不会发生任何事情。

 **请允许我从上面的答案中借用一些代码：

```
var indrag = false;

oval.on('dragstart', function(evt){
    indrag = true;
});
oval.on('dragend', function(evt){

});

stage.on('click', function(evt) {
    if (indrag){
        indrag = false;
        return;
    }

    // else, it is a valid click, then do what you need to do...
}) 
```**

# razor - 如何在不重新加载页面的情况下重新运行 Razor 代码

> ID：15904715
> 
> 赞同：0
> 
> 时间：2013-04-09T14:29:24.517
> 
> 标签：razor

我有一个网页显示这样的消息：`<marquee>@msg</marquee.`

然后有一个`<iframe>`显示一些 Reporting Services 报告。

`@msg`当页面通过在`@{}`块内使用 Razor 代码查询表加载时“计算”。

我的问题是：由于该表的内容可以更改，我如何“重新计算”，或者换句话说，每隔 5 分钟或每次`marquee`完成滚动时重新运行该 Razor 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T07:09:47.547

我知道这篇文章已经很老了，但我只是发现它正在寻找类似的东西。我使用局部视图来实现选取框如何刷新其数据。

然后，在显示选取框的页面中，我使用具有定义刷新率的 java 脚本 setInterval 函数，并且我从负责用数据填充选取框的控制器调用该方法。

```
$.get("@Url.Action("MarqueeNewsPartial", "Overview", new { siteGUID = @ViewBag.siteGUID   })", function (data) {            
            $('#newsResults').html(data);
        }); 
```

newsResult 是生成选取框的 div。

# c++ - 矢量c ++的斯坦奇行为

> ID：15904716
> 
> 赞同：0
> 
> 时间：2013-04-09T14:29:27.537
> 
> 标签：c++, arrays

我有一个问题问你。假设我有一个 AwesomeData 向量，而 AwesomeData 类包含一个 AwesomeData 向量。如果我尝试访问第一个向量内的向量，它将无法正常工作。据我所知，这并不清楚这里有一个更明确的例子：

```
struct AwesomeData
{
public:
    AwesomeData()
    : beautifulInt(3)
    {}

    int beautifulInt;
    vector<AwesomeData> someVector;
};

int main()
{
    vector<AwesomeData> tata;
    AwesomeData toto;

    toto.someVector.push_back(AwesomeData());
    toto.someVector.push_back(AwesomeData());
    toto.someVector.push_back(AwesomeData());

    tata.push_back(AwesomeData());
    tata.push_back(toto);
    tata.push_back(AwesomeData());

    // So, now tata should containt the data of someVector of toto (3 default    
    // AwesomeData). Instead of that, his capacity is equal to 3, but his
    // size = 0\. So, what's wrong ?
    tata = tata[1].someVector;
} 
```

但是，嘿，这还不是全部！我找到了解决方法，但我不知道它为什么有效。

```
struct AwesomeData
{
public:
    AwesomeData()
        : beautifulInt(3)
    {}

    int beautifulInt;
    vector<AwesomeData> someVector;
};

int main()
{
    vector<AwesomeData> tata;
    AwesomeData toto;

    toto.someVector.push_back(AwesomeData());
    toto.someVector.push_back(AwesomeData());
    toto.someVector.push_back(AwesomeData());

    tata.push_back(AwesomeData());
    tata.push_back(toto);
    tata.push_back(AwesomeData());

    // If we use a second vector to temporaly stock the vector of toto,
    // everything work as expected
    vector<AwesomeData> tempVector;

    tempVector = tata[1].someVector;
    tata = tempVector;
} 
```

所以有人有想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:34:26.530

标准容器不允许您使用不完整的类型来实例化它们。在您`AwesomeData`尝试实例化 a 时，您的示例未完全定义`std::vector<AwesomeData>`。

为此，您可以查看该`boost::container`库。

见[Boost::container](http://www.boost.org/doc/libs/1_53_0/doc/html/container/containers_of_incomplete_types.html)

# google-app-engine - 使用 jpa 2.0 在数据存储中查找多个 id

> ID：15904717
> 
> 赞同：1
> 
> 时间：2013-04-09T14:29:31.317
> 
> 标签：google-app-engine, jpa, google-cloud-datastore, datanucleus

这是我的 JPA 查询：

```
String jpql = "SELECT a FROM Account a WHERE a.id IN :list";
TypedQuery<Account> q = mgr.createQuery(jpql, Account.class);
q.setParameter("list", list);
return q.getResultList(); 
```

这是错误日志：

```
Cannot find type of (part of) a.id since symbol has no type; implicit variable?
org.datanucleus.exceptions.NucleusUserException: Cannot find type of (part of) a.id since symbol has no type; implicit variable?
    at org.datanucleus.query.expression.PrimaryExpression.bind(PrimaryExpression.java:274)
    at org.datanucleus.query.expression.DyadicExpression.bind(DyadicExpression.java:87)
    at org.datanucleus.query.compiler.JavaQueryCompiler.compileFilter(JavaQueryCompiler.java:480)
    at org.datanucleus.query.compiler.JPQLCompiler.compile(JPQLCompiler.java:81)
    at org.datanucleus.store.query.AbstractJPQLQuery.compileInternal(AbstractJPQLQuery.java:271)
    at org.datanucleus.store.query.Query.setImplicitParameter(Query.java:799)
    at org.datanucleus.api.jpa.JPAQuery.setParameter(JPAQuery.java:437)
    at org.datanucleus.api.jpa.JPAQuery.setParameter(JPAQuery.java:57)
    at com.example.game.dao.impl.AccountDaoImpl.findByIds(AccountDaoImpl.java:42)
    at com.example.game.gameApi.sendPuzzle(gameApi.java:123)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.api.server.spi.SystemService.invokeServiceMethod(SystemService.java:304)
    at com.google.api.server.spi.SystemServiceServlet.execute(SystemServiceServlet.java:161)
    at com.google.api.server.spi.SystemServiceServlet.doPost(SystemServiceServlet.java:120)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doFilter(DevAppServerServersFilter.java:106)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:421)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

此外，帐户看起来像这样

```
@Entity
public class Account implements java.io.Serializable{
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    private String name;

    public Account(long id, name) {
        super();
        Key key = KeyFactory.createKey(Account.class.getSimpleName(), id);
        this.key = key;
           this.name = name
    }

//getters and setters

} 
```

对于对应物，在 python 中，[数据存储支持多键查询，类似于](https://developers.google.com/appengine/docs/python/ndb/entities#multiple)

```
list_of_keys = ndb.put_multi(list_of_entities)
list_of_entities = ndb.get_multi(list_of_keys)
ndb.delete_multi(list_of_keys) 
```

正如本教程所建议的那样，使用循环将是低效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T18:34:03.800

我想你希望你的查询是：

```
String jpql = "SELECT a FROM Account a WHERE a.key IN :list"; 
```

因为变量被命名为key，而不是id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:04:14.750

我不知道 JPA 是否允许你正在寻找的东西，但你绝对可以使用一个`DatastoreService`对象来做到这一点，如

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService(); 
```

从那里，您可以使用您的 python 应用程序引擎知识来指导您。如果您已经开发了很长时间，那么您可能不得不使用 Hibernate 来补充 JPA。如果您真的想对界面进行编码，那么您可能不喜欢这个答案。但这是一个与使用 Hibernate 没有什么不同的解决方案。

# gnuplot - Gnuplot multiplot：创建更复杂布局的便捷方法

> ID：15904719
> 
> 赞同：3
> 
> 时间：2013-04-09T14:29:40.397
> 
> 标签：gnuplot

我想以下列方式用[gnuplot放置几个图：](http://www.gnuplot.info)

```
 +------------------------+
 |plot1                   |
 |                        |
 +------------------------+
 +----------++------------+
 |plot2     ||plot3       |
 |          ||            |
 +----------++------------+
 +----------++------------+
 |plot4     ||plot5       |
 |          ||            |
 +----------++------------+ 
```

简单的 nxm 布局可以通过`set multiplot layout n,m`（参见 官方网站上的这些[演示）来实现。](http://gnuplot.sourceforge.net/demo/layout.html)

[`matplotlib`](http://matplotlib.org)正如您在文档中看到的那样，提供了更高级的可能性：[使用 GridSpec 自定义子图的位置](http://matplotlib.org/users/gridspec.html)。

在 gnuplot 中，我使用`set origin`并`set size`实现了这一点。但是，它相当繁琐，当您注意到以后要更改布局时，需要重新计算大小和位置。

**备注 1：** 通常将边距设置为固定大小以实现正确的绘图大小也很有用。通过改变 xlabels 等进行的自动计算将使实现正确布局变得更加困难。

**备注 2：**代替`origin/size`gnuplot 提供了另一种使用`set [lrbt]margin <> at screen`设置绘图边界的可能性。用户必须确保标题和标签有足够的空间（参见[演示](http://gnuplot.info/demo/margins.html)）。仍然不是一个完美的解决方案，但有时更方便。

是否有我不知道的可能性，或者是否存在创建布局的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:28:21.803

评论中提到的给定布局的最小工作示例。

```
set term pngcairo size 5.0in,6.0in
set output "test_layout.png"
ROWS=3
COLS=2
set multiplot layout ROWS,COLS upwards
plot sin(4*x) # plot 4
plot sin(5*x) # plot 5
plot sin(2*x) # plot 2
plot sin(3*x) # plot 3
set size 1,(1.0/ROWS)
plot sin(1*x) # plot 1:
unset multiplot 
```

只要第一（最后）行不同，此解决方案就可以工作，其他一切都遵循 nxm 方案。但是例如，您不能轻松地为第一行指定不同的高度。

```
$ gnuplot -d file.gp: 
```

![在此处输入图像描述](https://i.stack.imgur.com/M3vSv.png)

但是，我仍然对解决一般问题的其他方法感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:10:17.517

您可以从 matplotlib 获取几何图形。创建两个文件**subplot2grid2gnuplot.py**和**subplot2grid.gp**。**test.gp**是一个使用示例。

**subplot2grid2gnuplot.py**

```
import matplotlib.pyplot as plt
import sys

if len(sys.argv)<6:
    sys.stderr.write("ERROR: subplot2grid2gnuplot.py needs 6 arguments\n")
    sys.exit(1)

shape = (int(float(sys.argv[1])), int(float(sys.argv[2])))
loc   = (int(float(sys.argv[3])), int(float(sys.argv[4])))
colspan = int(float(sys.argv[5]))
rowspan = int(float(sys.argv[6]))

ax = plt.subplot2grid(shape, loc, colspan, rowspan)
print "%f %f %f %f" % ax._position.bounds 
```

**subplot2grid.gp**

```
# Return origin and size of the subplot
# Usage:
# call subplot2grid.gp shape1 shape1 loc1 loc2 colspan rowspan
# Sets:
# or1, or2, size1, size2

aux_fun__(shape1, shape2, loc1, loc2, colspan, rowspan) = \
   system(sprintf("python subplot2grid2gnuplot.py  %i %i %i %i %i %i %i", shape1, shape2, loc1, loc2, colspan, rowspan))

aux_string__= aux_fun__($0, $1, $2, $3, $4, $5)
or1=word(aux_string__,1)
or2=word(aux_string__,2)
size1=word(aux_string__,3)
size2=word(aux_string__,4) 
```

**测试.gp**

```
unset xtics
unset ytics

set multiplot

call "subplot2grid.gp" 3 3 0 0 1 3
set size size1, size2
set origin or1, or2
plot sin(x)

call "subplot2grid.gp" 3 3 1 0 1 2
set size size1, size2
set origin or1, or2
plot sin(x)

call "subplot2grid.gp" 3 3 1 2 2 1
set size size1, size2
set origin or1, or2
plot sin(x)

call "subplot2grid.gp" 3 3 2 0 1 1
set size size1, size2
set origin or1, or2
plot sin(x)

call "subplot2grid.gp" 3 3 2 1 1 1
set size size1, size2
set origin or1, or2
plot sin(x)

unset multiplot 
```

![例子](https://i.stack.imgur.com/HhMS6.png)

# php - 使用 PHP 获取位于 /etc/something 中的文件的内容

> ID：15904720
> 
> 赞同：0
> 
> 时间：2013-04-09T14:29:44.600
> 
> 标签：php, file, printing, external

是否可以获取内容

```
/etc/asterisk/sip.conf 
```

并用 PHP 打印？

我正在尝试：

```
<?php
                $filecontents = file_get_contents("/etc/asterisk/sip.conf");
                print $filecontents;
?> 
```

但它不起作用......文件上的 chmod 是正确的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:35:07.203

如果您提到的目录路径正确，这主要取决于两个主要权限。您提到了“/ect”，我担心这可能是您的代码中的错字。

1.  您尝试访问的文件的实际文件权限
2.  您的 php 指令配置中的 open_basedir 限制，以及来自您的网络服务器的类似限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:30:51.370

我不确定这是否是你的问题，但你写`/ect`的，而传统目录是`/etc`

否则，把它放在前面`file_get_contents`：

```
ini_set("display_errors", 1);
error_reporting(E_ALL); 
```

并检查错误输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:24:14.067

真的很抱歉..我的sip.conf文件是空的，我觉得很愚蠢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:38:24.947

> 但它不起作用......我设置了权利。

根据不起作用的情况，您可能设置了*错误*的权限。

通过验证返回值来验证：

```
$filecontents = file_get_contents("/ect/asterisk/sip.conf");
if ($filecontents === FALSE)
{
    echo "I made an error.\n";
}
else 
{
    print $filecontents;
} 
```

您的问题很可能是可能存在`ect`的变体。`etc`要确定文件是否存在，请对其进行测试。完整代码：

```
$file = "/ect/asterisk/sip.conf";

if (!is_file) {
    echo "The file $file does not exists. Please check the path.\n";
}

if (!is_readable) {
    echo "The file $file is not readable. Ensure you can read it.\n";
}

$filecontents = file_get_contents($file);
if ($filecontents === FALSE)
{
    echo "I made an error.\n";
}
else 
{
    print $filecontents;
} 
```

# extjs - ExtJS 4.2 将 DateField 应用于输入表单字段

> ID：15904722
> 
> 赞同：0
> 
> 时间：2013-04-09T14:29:48.957
> 
> 标签：extjs, extjs4, datefield

我正在尝试将我的应用程序从 3.1 转换为 4.2，但似乎无法弄清楚需要修改什么来代替“applyto”。我尝试了 renderto 和 contentel 的变体，但似乎无法弄清楚。使用 4.2 似乎什么都没有发生。萤火虫没有错误...

有效的 Ext 3.1 代码

```
 cust_datepicker = function(){
     var els=Ext.select("input.date-picker",true);
     els.each(function(el) {
         new Ext.form.DateField({
             applyto: el.id
             ,format: 'Y-m-d'
             ,altFormats: 'j|j/n|j/n/y|j/n/Y|j-M|j-M-y|j-M-Y'
             ,editable: false
             ,id : el.id
         });
     }
 )};
 Ext.onReady(function(){
     cust_datepicker();
 }); 
```

HTML 代码：

```
<form action="xxx/xxx.cgi" method="GET">
<table><tr>
<td><input name="startdate" class="date-picker"/></td>
</tr></table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T14:26:37.923

这里有一些对 ExtJS 4.2.0 有用的东西。

解决方案是创建一个包含字段的表单。

HTML：

```
<table>
  <tr>
    <td><div id="here"></div></td>
  </tr>
</table> 
```

Javascript：

```
var here = document.getElementById('here');
var my_form = Ext.create('Ext.form.Panel', {
        renderTo: here,
        width: 100,
        bodyStyle: 'border: none; padding: 0px',
        items: [{
            xtype: 'datefield',
            fieldStyle: 'width: 76px;',
            margin: false
        }]
    }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T04:23:53.893

尝试使用 contentEl 属性：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-contentEl](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-contentEl)

# python - 用于在字符串中查找和替换的 Python 正则表达式

> ID：15904727
> 
> 赞同：0
> 
> 时间：2013-04-09T14:30:15.570
> 
> 标签：python, regex, numpy

我正在尝试将大型文本数据加载到 numpy 数组中。Numpy 的 loadtxt 和 genfromtxt 不适用于 as ，

*   首先，我需要删除以分隔符开头的注释行`['#','!','C']`
*   其次，数据中存在重复模式，`n*value`其中`n`是整数重复次数，`value`是浮点数据。

因此，我尝试使用 读取文本文件`readlines()`，然后使用 Numpy`loadtxt`将数据转换为 Numpy 数组。

对于阅读和替换，我尝试使用正则表达式（`re`模块）但无法正常工作。但是，以下 Python 代码正在运行。我的问题是这样做的最有效和 Pythonic 方式是什么？

如果是正则表达式，在`readlines()`列表对象中进行以下查找和替换的正确正则表达式代码是什么：

```
lines = ['1 2 3*2.5 3 6 1*.3 8 \n', '! comment here\n', '1*1 2.0 2*2.1 3 6 0 8 \n']
for l, line in enumerate(lines):
    if line.strip() == '' or line.strip()[0] in ['#','!','C']:
        del lines[l]        
for l, line in enumerate(lines):
    repls = [word  for word in line.strip().split() if word.find('*')>=0]
    print repls
    for repl in repls:
        print repl
        line = line.replace(repl, ' '.join([repl.split('*')[1] for n in xrange(int(repl.split('*')[0]))]))
    lines[l] = line
print lines 
```

输出如下：

```
['1 2 2.5 2.5 2.5 3 6 .3 8 \n', '1 2.0 2.1 2.1 3 6 0 8 \n'] 
```

# 编辑：

根据评论，我编辑了我的 Python 代码如下：

```
 in_lines = ['1 2 3*2.5 3 6 1*.3 8 \n', '! comment here\n', '1*1 2.0 2*2.1 3 6 0 8 \n']
    lines = []
    for line in in_lines:
        if line.strip() == '' or line.strip()[0] in ['#','!','C']:
            continue        
        else:
            repls = [word  for word in line.strip().split() if word.find('*')>=0]
            for repl in repls:
                line = line.replace(repl, ' '.join([float(repl.split('*')[1]) for n in xrange(int(repl.split('*')[0]))]))
            lines.append(line)
    print lines 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:43:06.223

## Pythonic方式

改用 python 很棒的功能特性和列表推导：

```
#!/usr/bin/env python

lines = ['1 2 3*2.5 3 6 1*.3 8 \n', '! comment here\n', '1*1 2.0 2*2.1 3 6 0 8 \n']

#filter out comments
lines = [line for line in lines if  line.strip() != '' and line.strip()[0] not in ['#','!','C']]

#turns lines into lists of tokens
lines = [[word for word in line.strip().split()] for line in lines]

# turns a list of strings into a number generator, parsing '*' properly
def generate_numbers(tokens):
  for token in tokens:
    if '*' in token:
      n,m = token.split("*")
      for i in range(int(n)):
        yield float(m)
    else:
      yield float(token)

# use the generator to clean up the lines
lines = [list(generate_numbers(tokens)) for tokens in lines]

print lines 
```

输出：

```
➤ ./try.py 
[[1.0, 2.0, 2.5, 2.5, 2.5, 3.0, 6.0, 0.3, 8.0], [1.0, 2.0, 2.1, 2.1, 3.0, 6.0, 0.0, 8.0]] 
```

## 快速而小巧的 Pythonic 方式

此解决方案使用生成器而不是列表，因此您不必将整个文件加载到内存中。注意两个成语的使用：

1.  `with open("name") as file`

    这将在您退出块后清理您的文件句柄。

2.  `for line in file`

    这将使用生成器迭代文件中的行，而不会将整个文件加载到内存中。

这给了我们：

```
#!/usr/bin/env python

# turns a list of strings into a number generator, parsing '*' properly
def generate_numbers(tokens):
  for token in tokens:
    if '*' in token:
      n,m = token.split("*")
      for i in range(int(n)):
        yield float(m)
    else:
      yield float(token)

# Pull this out to make the code more readable
def not_comment(line):
  return line.strip() != '' and line.strip()[0] not in ['#','!','C']

with open("try.dat") as file:
  lines = ( 
    list(generate_numbers((word for word in line.strip().split()))) 
    for line in file if not_comment(line)
  ) # lines is a lazy generator

  for line in lines:
    print line 
```

输出：

```
➤ ./try.py 
[1.0, 2.0, 2.5, 2.5, 2.5, 3.0, 6.0, 0.3, 8.0]
[1.0, 2.0, 2.1, 2.1, 3.0, 6.0, 0.0, 8.0] 
```

# php - 从 PHP 脚本更新访问数据库？

> ID：15904729
> 
> 赞同：0
> 
> 时间：2013-04-09T14:30:31.437
> 
> 标签：php, ms-access, sql-update

我对 PHP 和数据库比较陌生。目前我正在使用现有的 Access 数据库，并且能够很好地读取和显示数据。但是，我想通过电子邮件验证链接更新用户记录。我让服务器发送一封带有 www.domain.com/verify.php?userID=# 链接的电子邮件

我能够很好地读取这个 GET 变量，但我完全不知道如何更新记录。我搜索的所有内容都是为了更新 MySQL 数据库，而我正在使用 odbc。

有谁知道我该如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:33:50.553

像这样的东西：

```
odbc_exec($conn, "UPDATE table SET field=value"); // $conn is your connection identifier 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:34:10.383

您需要在 PHP 中使用 ODBC 数据库客户端库来连接到 ODBC 数据源。例如，您可以将[*PDO*](http://www.php.net/book.pdo.php)与驱动程序[ODBC 和 DB2 函数 (PDO_ODBC) 一起](http://php.net/ref.pdo-odbc.php)使用。

# xml - 在 XML 中选择值不等于使用 XPath 的值的子项

> ID：15904731
> 
> 赞同：0
> 
> 时间：2013-04-09T14:30:33.223
> 
> 标签：xml, xpath

我是 XML 和 xPath 的新手。我有一个类似于的 XML 结构

```
<root>
  <child name="zero"/>
  <child name="one"/>
  <child name="two"/>
  <child name="three"/>
</root> 
```

有没有办法使用 xPath 表达式只选择 name != "zero" 的孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:41:52.103

当然。只需在方括号中指定条件：

```
/root/child[not(@name="zero")] 
```

# java - SQL 开发人员，Java 1.7.0_07 错误

> ID：15904733
> 
> 赞同：0
> 
> 时间：2013-04-09T14:30:42.433
> 
> 标签：java, version, oracle-sqldeveloper

因此，在我的 Windows 7 机器上尝试打开 Oracle SQL Developer 时，我收到以下错误：

```
您正在尝试使用 Java 1.7.0_07 运行

使用最低 Java 支持运行此产品
版本为 1.6.0_04，最高版本低于 1.7。

此产品将不受支持，并且可能无法正常运行
如果你继续。还是继续？

```

![这是它的样子](https://i.stack.imgur.com/6jdOW.jpg)

根据验证 Java 版本链接 ( [http://www.java.com/en/download/installed.jsp](http://www.java.com/en/download/installed.jsp) )，我计算机上的 Java 版本是**版本 7 更新 7**并且有一个更新的版本可用，我是考虑到我收到的错误，不愿意下载。

通过 CMD，当我尝试检查版本时，我看到的是：

```
java版本“1.7.0_07”
Java(TM) SE 运行时环境 (build 1.7.0_07-b11)
Java HotSpot(TM) 64 位服务器 VM（内部版本 23.3-b01，混合模式）

```

任何帮助是极大的赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:50:15.313

您正在尝试运行`Oracle SQL Developer`（根据您拥有的当前版本）期望`JRE version`小于**1.7**或**7**

您的 JRE 版本是`JRE 1.7.x.`

要解决此问题，您可以安装`JRE 1.6.x`和**卸载** `JRE 1.7`

或者

等待支持的 Oracle SQL Developer 新版本`JRE 1.7`

顺便说一句，这是一个*警告*。您可以自行承担风险，对该对话框说“是”并运行。由于 Java 是向后兼容的，`JRE 1.`7 应该能够运行使用开发的代码`JDK 1.6`

# shell - linux shell - 在语料库中将句号（句点）添加到不以句号结尾的行尾

> ID：15904736
> 
> 赞同：2
> 
> 时间：2013-04-09T14:31:04.540
> 
> 标签：shell, text, sed, awk, end-of-line

我有一个很大的语料库，它在句子级别被分割。这意味着每一行包含一个句子。其中一些行以句号（句点）结尾，有些则没有。我正在寻找一种有效的方法来在不以一个结尾的行的末尾添加句号。例如，受益于 sed 或 awk 来执行此任务的 shell 脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:36:04.223

Sed 可能是最简单的方法：

```
$ cat file
sentence one
sentence two.
sentence three

$ sed 's/[^.]$/&./' file
sentence one.
sentence two.
sentence three. 
```

在不以句点结尾的行上，`[^.]$`将最后一个字符替换为匹配的最后一个字符，后跟一个句点`&.`。您应该注意尾随空格可能包含句点作为最后一个可用字符的行。

**编辑**：

我`awk`会这样做：

```
$ awk '/[^.]$/{$(NF+1)="."}1' FS= OFS= file
sentence one.
sentence two.
sentence three. 
```

# objective-c - 如何在使用 CATransform3DRotate 进行翻转时添加持续时间

> ID：15904737
> 
> 赞同：1
> 
> 时间：2013-04-09T14:31:05.353
> 
> 标签：objective-c, core-animation, uiviewanimation, catransform3drotate

感谢我在[这里](https://stackoverflow.com/questions/15893144/cannot-flip-layer-again-calayer-catransform3drotate/15893434#15893434)的第一篇文章的帮助，以便我可以进行垂直翻转，代码看起来像

```
 @interface ViewController (){
        CALayer *plane;
    }
    @end

    @implementation ViewController

    -(void)viewDidLoad
    {
        [super viewDidLoad];

        [self addALayer];

    }
    - (void)addALayer{

        plane                   =   [CALayer layer];
        plane.backgroundColor   =   [[UIColor orangeColor] CGColor];
        //[plane insertSublayer:normalBackground atIndex:0];

        plane.opacity           =   1;
        plane.frame             =   CGRectMake(0, 0, 300, 100);
        plane.position          =   CGPointMake(250, 150);
        plane.anchorPoint       =   CGPointMake(0.5, 0.5);
        plane.borderColor       =   [UIColor whiteColor].CGColor;
        plane.borderWidth       =   3;
        plane.cornerRadius      =   10;
        [self.view.layer addSublayer:plane];

    }
- (IBAction)click:(id)sender {
    BOOL isClicked                  =   ((UIButton*)sender).selected;
    ((UIButton*)sender).selected    =   !((UIButton*)sender).selected;
    CATransform3D transfrom         =   CATransform3DIdentity;
    transfrom.m34                   =   -1.0/ 500;
    if ( !isClicked ) {
        transfrom                   =   CATransform3DRotate(transfrom, degToRad(180.0), 1, 0, 0);
        plane.transform             =   transfrom;
    }
    else 
        plane.transform                 =   transfrom;

} 
```

我的问题是如何用动画进行这种翻转。我确实尝试使用

```
UIView animateWithDuration(NSTimeInterval) delay:(NSTimeInterval) options:(UIViewAnimationOptions) animations:^(void)animations completion:(BOOL finished)completion 
```

但仍然无法正常工作。我不太确定动画块是否适合这个动画。

各位对此有什么想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:38:18.077

使用 a`CATransaction`更改隐式默认值

```
[CATransaction begin];
[CATransaction setAnimationDuration:1]; // in seconds

// Change layer animatable properties
plane.transform = transform;    

[CATransaction commit]; 
```

# url - BBOS（BB10 之前）通过 Intents 启动应用程序（如 Android）

> ID：15904738
> 
> 赞同：0
> 
> 时间：2013-04-09T14:31:07.827
> 
> 标签：url, blackberry, launch

我想知道我是否可以在 BB OS (4 - 7) 中开发具有与 Android/iOs 类似功能的应用程序 where ;

*   我将能够注册该应用程序以侦听特定的 URL。
*   我可以通过 URL 启动应用程序。
*   我可以从 URL 解析数据并在应用程序中使用。

例如在 Android 中，我可以像这样使用 Intent Filters

```
<intent-filter>
    <action android:name="android.intent.action.VIEW"></action>
      <category android:name="android.intent.category.DEFAULT"></category>
      <category android:name="android.intent.category.BROWSABLE"></category>
      <data android:scheme="http"
          android:host="myapp.com"
          android:pathPrefix="/launchapp/" />

</intent-filter> 
```

在加载 url 时启动应用程序，例如

然后我可以在 launchapp/ 之后解析这两个数字并在应用程序中使用它们。

任何有 BB OS 经验的人都知道这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:16:40.643

我不知道有记录的侦听器可以拦截打开的 URL。但是有 GlobalEvent 机制。几乎在 BB10 之前的操作系统上执行的每一步都会触发一个或多个全局事件。其中一些已记录在案，有些则没有。

列出了已记录的 GUID：http: [//www.blackberry.com/developers/docs/7.0.0api/index-files/index-7.html](http://www.blackberry.com/developers/docs/7.0.0api/index-files/index-7.html)（查找**G**字母，并向下滚动以**查找 GUID_xxxx**常量）。

要捕获未记录的 GUID，请[实现](http://supportforums.blackberry.com/t5/Java-Development/Global-Events-and-Global-Event-Listeners/ta-p/444814)一个使用[GlobalEventListener](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/system/GlobalEventListener.html)的后台应用程序。然后在浏览器中打开一个页面并记录所有全局事件 guid 和与 guid 一起`eventOccurred`调用的对象。您可以找出哪些全局事件 guid 与 url-open 事件相关。它将有助于创建 URL 拦截机制。这部分应该是一个原生应用程序（用Java编写）。

可以通过 url 启动应用程序，但它应该是 WebWorks 应用程序。不是土生土长的。检查此链接： http: [//supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Launch-BlackBerry-WebWorks-app-via-URL-with-parameters/td-p/1674663](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Launch-BlackBerry-WebWorks-app-via-URL-with-parameters/td-p/1674663)

当您的 webworks 应用程序完成其部分工作时，它可以[触发 GlobalEvent](https://github.com/blackberry/WebWorks-Community-APIs/tree/master/Smartphone/GlobalEvent)并且您的本机应用程序将等待它拦截它并进一步工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:14:28.450

有一些方法可以在 BBOS 上执行此操作，具体取决于您到底想要什么。

1.  `net.rim.device.api.browser.plugin`使用API创建浏览器插件。在这里，您创建一个 BrowserContentProvider 并将其附加到 BB 浏览器以处理特定的 mime 类型。这种 mime 类型必须是您独有的，并且没有被本机浏览器处理（比如`x-vnd-whatever/myapplauncher`）。当浏览器访问您的网址时，例如[http://myapp.com/launchapp/233](http://myapp.com/launchapp/233)，提供一个编号为 233 和注册的 mime 类型的文件。浏览器将下载文件，查看其 mime 类型，然后将文件内容传递给您的插件进行处理。您的插件将读取应用程序 id - 233，然后使用它做任何您想做的事情。BlackBerry App World 使用此方法[允许开发人员从 url 在应用程序世界中启动他们的应用程序](http://supportforums.blackberry.com/t5/BlackBerry-World-Development/How-To-Invoke-BlackBerry-App-World-directly-to-your-application/td-p/230698)。

2.  创建一个`HttpFilter`. 使用它，您可以通过您的代码连接到给定的域。在这里，您将为您的域 myapp.com 注册过滤器，每当有人尝试访问任何 myapp.com 时，浏览器都会调用您的过滤器来处理请求。BlackBerry App World 再次这样做是为了访问[http://appworld.blackberry.com](http://appworld.blackberry.com)域。[样本中有一个`HttpFilterDemo`可以帮助您]

3.  使用`StringPattern`API。几乎所有原生文本字段都支持它。因此，如果有一个文本字段的文本与特定模式匹配，它将成为下划线，单击它会在菜单中显示您的自定义操作。[样本中有一个`StringPatternDemo`可以帮助您]

4.  如果您的应用在 App World 中并且您只想启动它，请使用`http://appworld.blackberry.com/webstore/content/xxxx`其中*xxxx*是您的应用内容 ID 的 URL。

此外，**尝试使用全局事件没有任何用处。**从 OS 4.5 开始，全局事件广播机制已被划分为系统事件仅传递给系统应用程序而不是它们的派对应用程序，反之亦然。

希望这可以帮助。

# angularjs - 使用 Angular js 指令渲染 Highcharts

> ID：15904739
> 
> 赞同：48
> 
> 时间：2013-04-09T14:31:08.573
> 
> 标签：angularjs, highcharts

我是 Angular JS 的新手，并试图通过创建指令来呈现我的高图（基本线）。请告诉我我应该在这里遵循的方法。任何帮助，将不胜感激。

这是我的 highcharts 脚本：

```
<script type="text/javascript">
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: '°C'
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'Tokyo',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
        }, {
            name: 'New York',
            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
        }, {
            name: 'Berlin',
            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
        }, {
            name: 'London',
            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
        }]
    });
});

    </script> 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-10T11:58:22.403

饼图示例：

[http://jsfiddle.net/csTzc/](http://jsfiddle.net/csTzc/)

```
 function MyCtrl($scope, limitToFilter) {
  $scope.ideas = [
    ['ideas1', 1],
    ['ideas2', 8],
    ['ideas3', 5]
  ];

  $scope.limitedIdeas = limitToFilter($scope.ideas, 2);
}

angular.module('myApp', [])
  .directive('hcPie', function () {
  return {
    restrict: 'C',
    replace: true,
    scope: {
      items: '='
    },
    controller: function ($scope, $element, $attrs) {
      console.log(2);

    },
    template: '<div id="container" style="margin: 0 auto">not working</div>',
    link: function (scope, element, attrs) {
      console.log(3);
      var chart = new Highcharts.Chart(options);
      scope.$watch("items", function (newValue) {
        chart.series[0].setData(newValue, true);
      }, true);

    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-06-25T10:45:29.937

这里的替代实现：http: [//jsfiddle.net/pablojim/Cp73s/](http://jsfiddle.net/pablojim/Cp73s/)

这使用[https://github.com/pablojim/highcharts-ng](https://github.com/pablojim/highcharts-ng)

这允许您使用以下 html 创建一个高图：

```
<highchart id="chart1" series="chart.series" title="chart.title" options="chart.options"></highchart> 
```

在上面的例子`chart.series`中，是一个 javascript 对象数组，代表图表上的系列——这些对象采用标准的 Highcharts 选项。然后这些由 angularjs 监视以进行任何更改。

`chart.options`是 highcharts 初始化选项 - 也注意变化。尽管对此的更改会重新创建整个图表。

`chart.title`是 highcharts 标题对象 - 也观察变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-26T05:23:16.797

```
app.directive('hcChart', function () {
	return {
			restrict: 'A',
			template: '<div></div>',
			scope: {
					options: '='
				},
			link: function (scope , element, attribute) {
                Highcharts.chart('chart', {
                	 chartOptions: {
                         type: 'line'
                    },

                     title: {
                        text: 'Temperature data'
                     },
                 series: [{
                        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
                     }]
                });
			}
	}

});
```

```
<div id="chart" hc-chart>Placeholder for generic chart</div>
```

确保在 index.html 中添加了 highchart 库

# qtp - 我无法使用 QTP11 在 DP 中创建脚本

> ID：15904741
> 
> 赞同：1
> 
> 时间：2013-04-09T14:31:13.980
> 
> 标签：qtp

我已经安装了QTP11试用版。当我尝试在 DP 中为 ex (Browser("title:=Welcome home").Page("title:=Welcome Home")) 创建脚本时使用它，当我输入“。” 关闭浏览器的大括号后，页面元素未列在下拉列表中。但是当我在正常模式下创建脚本时 Browser("Welcome home").Page("Welcome Home") 然后它正在显示。如果我在安装它时遗漏了任何东西，有人可以帮助我。

谢谢文尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:49:33.780

好吧，由于您使用的是 DP，因此您绕过了对象存储库的使用，您可以静态或动态定义对象。键入 Browser 或 Page 后出现的下拉菜单会使用 OR 自动填充您的选择。但是由于您使用的是 DP，因此您将无法获得该功能。你可以在这里阅读更多关于它的信息[http://www.qtpworld.com/index.php?cid=62](http://www.qtpworld.com/index.php?cid=62)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:40:34.623

[@Amelio](https://stackoverflow.com/users/2250329)给出了[正确的答案](https://stackoverflow.com/a/15906588/3848)，但我想稍微扩展一下。

QTP 测试基于动态语言 VBScript，这意味着您通常无法知道某些东西是否会起作用，直到您尝试实际执行它。当您编写`Browser("title:=.*").Foo`然后在运行时脚本引擎将尝试查看返回的对象是否`Browser("title:=.*")` *知道如何* `Foo`。

为了使开发测试更容易，QTP 的 IDE 在键入时执行自动建议，但仅仅因为建议列表中没有显示某些内容并不意味着它在运行时不起作用（例如 try `Browser("title:=.*").Highlight`）。

QTP 提出的建议列表是

*   对象支持的方法和属性（静态和通过[`RegisterUserFunc`](http://www.automationrepository.com/2011/12/understanding-registeruserfunc-syntax-with-example/)）
*   对于对象存储库中的对象 => 指定对象的子对象

第二个项目符号意味着`Page`在某些情况下您可能有`Link`孩子，而在某些情况下没有，这取决于您在存储库中拥有的对象。在 DP 中**没有**子对象，因此 QTP 只建议属于类型化对象的方法和属性。

# oracle - Perl DBI Oracle 类似通配符

> ID：15904746
> 
> 赞同：0
> 
> 时间：2013-04-09T14:31:26.527
> 
> 标签：oracle, perl

我想通过 DBI 从 Perl 更新 Oracle 中的一些记录。这是我尝试的方法：

`my $q = $dbh->prepare("UPDATE table SET period='$PERIOD' WHERE field LIKE '%$PERIOD_FIELD'"); $q->execute();`

问题是变量 $PERIOD_FIELD 是这样的：“@@XYZ@asd asd asd”

所以我想更新所有字段列以somthing + $PERIOD_FIELD结尾的记录。

当 perl 到达 line:`$q->execute();`它只是冻结时，我必须使用 ctrl + c 停止程序运行。

我知道问题出在字符 % 上（因为如果我删除它，程序不会冻结），但我无法弄清楚如何正确调用脚本。

有人对我有提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:42:32.233

```
my $q = $dbh->prepare("UPDATE table SET period='$PERIOD' WHERE field LIKE chr(37)||'$PERIOD_FIELD'");
$q->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:01:40.253

原来上面的代码都是对的，可惜表被Toad锁了。:| 在 Toad 中执行回滚或提交或关闭 Toad 解决了该问题。

谢谢大家的提示，对误导深表歉意。

# statistics - 如何在 SPSS/PASW 中将“999”设置为默认缺失值？

> ID：15904747
> 
> 赞同：1
> 
> 时间：2013-04-09T14:31:29.560
> 
> 标签：statistics, spss

我正在将一个非常大的数据集导入 SPSS。数据集中的许多字段包含“999”值，表示缺失值。我想指示 SPSS 如此查看它们。但是，默认情况下，SPSS 中的每个变量都设置为“无缺失值”。在变量视图中，您必须将“999”定义为每个变量的“离散缺失值”。虽然有数百个变量，但这是很多工作：

![在此处输入图像描述](https://i.stack.imgur.com/NJUlu.png)

因此：有没有办法将“离散缺失值 999”定义为导入时每个变量的默认缺失值？这将为我节省大量工作，但我无法在网上找到答案（我只获得关于如何将 999 单独定义为每个变量的缺失值的教程，就像我现在所做的那样）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:31:49.353

默认情况下，无法将值`999`设为用户缺失值。

我建议你使用语法。有一个命令`MISSING VALUES`。它允许一次性将多个变量的值定义为用户缺失的值。例如，尝试以下命令：

```
MISSING VALUES all (999).
MISSING VALUES V1 to V99 (999). 
```

# c++ - 在 Visual Studio 2012 中重建时出现奇怪的链接错误

> ID：15904749
> 
> 赞同：1
> 
> 时间：2013-04-09T14:31:38.090
> 
> 标签：c++, visual-studio-2012, linker

我有一个非常奇怪的问题。我在 VS2012 中有一个与另一个库静态链接的项目。如果我建立项目一切都很好。但是，如果我重建项目，它将因链接问题而失败。lib已编译，我在构建期间不编译它。 **如果我清理所有内容或在先前构建的基础上进行构建/重建，这没有区别。建造工程，重建 - 不是！**

谁能给我至少一个线索-这两个命令有什么不同？我什至不知道如何开始调查这个问题。

**补充：**

对于所有回答的人-您试图向我解释构建和重建之间的区别。谢谢，但我知道。你忽略了我之前解释的事实：

我可以完全清理以前的结果，删除 OutDir，删除 IntDir，删除编译产生的所有内容。仍然 - 构建工作，不重建。

在上述情况下 - 如果您第一次构建，构建和重建之间有什么区别？

我没有发布错误的原因是那些只是链接错误告诉我 .lib 丢失。虽然显然不是。

**这是示例：**

1>C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\sal.h(2872): 警告 RC4005: '_ *useHeader' : 重新定义 1>
1>C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\sal.h(2882)：警告 RC4005：'* _on_failure'：重新定义 1>
1> 创建库 D:\p4client\ProAudio\dev_main\ProAudio\XPlatform..\VisualStudioBuildProducts\WaveShell-DAE\Win32\Debug\Products\WaveShell-DAE.lib 和对象 D:\p4client\ProAudio\dev_main\ProAudio\XPlatform ..\VisualStudioBuildProducts\WaveShell-DAE\Win32\Debug\Products\WaveShell-DAE.exp 1>DefaultSwap.obj：错误 LNK2019：未解析的外部符号 _ASI_UnregisterCustomByteSwapper@4 在函数 _RemoveByteSwapper 1>DefaultSwap.obj 中引用：错误 LNK2019：未解析的外部函数 _RegisterByteSwapper 1>PlugInLib.lib(PlugInUtils.obj) 中引用的符号 _ASI_RegisterCustomByteSwapper@8：错误 LNK2001：未解析的外部符号_imp *_FicGestalt* @8 1>PlugInLib.lib(CDSPProcess.obj)：错误 LNK2001：未解析的外部符号*_imp*_FicGestalt@8 1>PlugInLib.lib(CAdaptorPlugIn.obj)：错误 LNK2001：无法解析的外部符号_imp *_FicGestalt* @8 1>CShellProcessGroup.obj：错误 LNK2019：无法解析的外部符号*_imp* _FicGestalt@8 在函数“public: __thiscall CShellProcessGroup”中引用::CShellProcessGroup(void)" (??0CShellProcessGroup@@QAE@XZ) 1>CEffectTypeRTAS.obj : 错误 LNK2001: 无法解析的外部符号 _ *imp* _FicGestalt@8 1>PlugInLib.lib(CProcessGroupInterface.obj) : 错误 LNK2001: 无法解析的外部符号*_imp* _FicGestalt@8 1>PlugInLib.lib(CProcessGroup.obj)：错误 LNK2001：未解析的外部符号_imp *_FicGestalt* @8

也许知道在运行**构建**（不是重建）时我会收到以下警告会有所帮助：

1>C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\sal.h(2872): 警告 RC4005: '_ *useHeader' : 重新定义 1>
1>C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\sal.h(2882)：警告 RC4005：'* _on_failure'：重新定义 1>
1> 创建库 D:\p4client\ProAudio\dev_main\ProAudio\XPlatform..\VisualStudioBuildProducts\WaveShell-DAE\Win32\Debug\Products\WaveShell-DAE.lib 和对象 D:\p4client\ProAudio\dev_main\ProAudio\XPlatform ..\VisualStudioBuildProducts\WaveShell-DAE\Win32\Debug\Products\WaveShell-DAE.exp 1>PlugInLib.lib(C321ChipDSP.obj) : 警告 LNK4099: PDB 'vc110_ib_2.pdb' 没有与'PlugInLib.lib(C321ChipDSP' .obj)'或'D:\p4client\ProAudio\dev_main\ProAudio\VisualStudioBuildProducts\WaveShell-DAE\Win32\Debug\vc110_ib_2.pdb'；链接对象好像没有调试信息 1>PlugInLib.lib(CDSP.obj)：警告 LNK4099：在“PlugInLib.lib(CDSP.obj)”或“D:\p4client\ProAudio”中找不到 PDB 'vc110_ib_3.pdb' \dev_main\ProAudio\VisualStudioBuildProducts\WaveShell-DAE\Win32\Debug\vc110_ib_3.pdb'; 链接对象，好像没有调试信息 1>PlugInLib.lib(CDSPUtils.obj)：警告 LNK4099：在“PlugInLib.lib(CDSPUtils.obj)”或“D:\p4client\ProAudio”中找不到 PDB 'vc110_ib_4.pdb' \dev_main\ProAudio\VisualStudioBuildProducts\WaveShell-DAE\Win32\Debug\vc110_ib_4.pdb'; 链接对象好像没有调试信息

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:35:53.997

**Build**意味着只编译和链接自上次构建以来发生变化的源文件，而**Rebuild**意味着编译和链接所有源文件，无论它们是否改变。

构建是正常的事情，而且速度更快。有时项目目标组件的版本可能会不同步，因此需要重新构建才能使构建成功。在实践中，您永远不需要清洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T01:58:18.170

我不确定它是否相关。但是你可能想检查这个线程（虽然症状与你的相反......）：

[VS2010 构建时未解决的外部符号错误（但不是重建）](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/95478f4c-bf63-461b-87de-cd65d7c0fc34/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:40:49.930

'Build' 将进行增量构建，基本上遍历解决方案中的每个项目，查看自上次构建以来是否有更改，如果有，请再次构建。

“重建”将对所有内容执行清理并从头开始构建所有内容。

编辑：更详细的答案[链接](https://stackoverflow.com/questions/3095901/difference-between-build-solution-rebuild-solution-and-clean-solution-in-visua)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:45:05.980

如果您的静态库是与链接到该库的项目相同的解决方案中的另一个项目，那么您需要在两个项目之间设置依赖关系，以便构建过程首先构建库，然后构建另一个项目。

为此，请右键单击解决方案并从弹出菜单中选择“项目依赖项”。

# thymeleaf - Thymeleaf 中循环中的计数器

> ID：15904756
> 
> 赞同：17
> 
> 时间：2013-04-09T14:31:54.623
> 
> 标签：thymeleaf

有没有办法在没有列表的情况下在 Thymeleaf 中进行循环？

我想基本上将此片段转换为 Thymeleaf：

```
<jsp:useBean id="now" class="java.util.Date" />
<fmt:formatDate var="year" value="${now}" pattern="yyyy" />
<c:forEach var="i" begin="0" end="99">
    <form:option value="${year-i}" />
</c:forEach>
</form:select> 
```

- 更新 -

我已经决定这符合我想要的方式，但我不确定 springEL 语法：

```
<option th:each="i : ${#numbers.sequence( 1, 100)}" th:value="#{ T(java.util.Date).getYear() - $i }">1</option> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-18T22:54:56.133

如果您仍在寻找正确的 SpEL 语法，这对我有用：

```
<option th:each="i : ${#numbers.sequence( 1, 100)}"
        th:value="${ (new org.joda.time.DateTime()).getYear() - i }"
        th:text="${ (new org.joda.time.DateTime()).getYear() - i }">1</option> 
```

**注意：**

*   添加`th:text`以设置选项文本。

*   改用 Joda-Time`java.util.Date`不会给我想要的结果

阅读有关[java.util.Date 和 getYear()的讨论](https://stackoverflow.com/questions/9243578/java-util-date-and-getyear)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-05-21T12:35:42.900

您可以在每个块内使用特殊的 thymleaf 迭代变量。这个特殊的变量名称是与关键字连接的元素变量的名称`'Stat'`（例如：）。`elt -> eltStat`这个变量为您提供了许多与迭代相关的信息。

您还可以在元素变量之后指定此变量名称。例如：

```
<tr th:each="prod,iterStat : ${prods}" th:class="${iterStat.odd}? 'odd'">
    <td th:text="${prod.name}">Onions</td>
    <td th:text="${prod.price}">2.41</td>
    <td th:text="${prod.inStock}? #{true} : #{false}">yes</td>
</tr> 
```

下面的官方文档中的更多信息：
[http ://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#keeping-iteration-status](http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#keeping-iteration-status)

# vim - 如何使 vim 显示空间？

> ID：15904758
> 
> 赞同：28
> 
> 时间：2013-04-09T14:31:56.043
> 
> 标签：vim

我目前正在尝试从 gedit 切换到 vim。我尝试让 vim 看起来类似于 gedit：

![编辑](https://i.stack.imgur.com/iedvq.png)

特别是，我想用点显示空间。

我目前有：

![在此处输入图像描述](https://i.stack.imgur.com/slhz8.png)

有一些区别，但看起来很相似（这是[我当前的 .vimrc 文件](https://gist.github.com/MartinThoma/5346080)）。但我没有得到那些点作为空格。

**如何使 vim 显示空间？**

我找到了一些答案（比如[这个](https://stackoverflow.com/a/1676514/562769)），这些答案似乎建议用特殊的可见字符替换空格，然后再将其替换回来。我不想每次都这样做。我希望能够打开 vim 并查看这些空间。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2016-07-29T07:13:18.140

我知道这是一个老话题，但有可能：

```
set lcs+=space:· 
```

适用于我的 Gvim 7.4。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-04-04T16:32:57.920

有时我绝对需要查看哪些空格是制表符，哪些是真正的空格字符，以及空格何时出现在行尾。

当我使用`vim`时，我使用：

```
:set list 
```

（我可以用 关闭`:set nolist`）

使用`:set list`，文字空格显示为空格，制表符显示为`^I`，行尾显示为亮粉色`$`。（因此，您在粉红色左侧看到的任何空白`$`都是真正的空格字符，而其右侧的空白只是行尾和右侧之间的“无”编辑。）

这很丑陋，但效果很好。

我不建议一直使用它——只是在那些需要查看文字空格和文字制表符存在的地方的时候。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-12-18T22:08:01.003

虽然您不能在这里完全按照您的意愿行事，但如果您的推理与我的一样，您希望看到这些空格，因为它有助于验证正确的缩进（我那里有 2 个空格，还是 3 个？）。对于 Vim >= 7.3，您可以使用[**indentLine**](https://github.com/Yggdroot/indentLine)插件在每个缩进处添加一个标记。这很棒。

如果您正在使用[**Pathogen**](https://github.com/tpope/vim-pathogen)进行安装：

```
cd ~/.vim/bundle
git clone https://github.com/Yggdroot/indentLine 
```

![在此处输入图像描述](https://i.stack.imgur.com/5LyUQ.jpg)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-09T16:19:10.333

它可能值得`undercurl`用来完成这项工作。

```
hi WhiteSpaces gui=undercurl guifg=LightGray
match WhiteSpaces / \+/ 
```

或者你可以把它放在你的`.vimrc`

```
autocmd ColorScheme * highlight WhiteSpaces gui=undercurl guifg=LightGray | match WhiteSpaces / \+/ 
```

![在此处输入图像描述](https://i.stack.imgur.com/ycEqQ.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-13T08:11:09.700

我遇到了这个问题，因为我想显示前导空格（缩进空格）。[上面](https://stackoverflow.com/a/27556578/7311363)
提到 的插件[indentLine](https://github.com/Yggdroot/indentLine)是该问题的解决方案。如果您使用[Vundle](https://github.com/VundleVim/Vundle.vim)作为插件管理器，您可以添加到您的然后运行以安装插件。`Plugin 'Yggdroot/indentLine'``.vimrc``vim +PluginInstall +qall`

将以下两行添加到您的`.vimrc`以将前导空格显示为 `·`.

```
let g:indentLine_leadingSpaceChar='·'
let g:indentLine_leadingSpaceEnabled='1' 
```

编辑：空间不是空间

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-09T14:45:55.140

*TLDR：你不能。*

Vim 提供了`'listchars'`显示制表符与空格的选项，以及关键位置的空格字符，即行尾的尾随。它不提供对*所有*空格的修改：空白方块是空格、句号。

如果您对引用问题中发布的解决方法不满意，那么除了修改 Vim 的源代码并编译您自己的二进制文件之外，没有其他方法可以实现。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-14T22:15:04.423

使用 JL 和 Cedric Simon 的答案。编辑 ~/.vimrc 并添加：

```
set lcs+=space:·
nmap <F2> :set invlist<CR>
imap <F2> <ESC>:set invlist<CR>a 
```

当你使用 vim 时，只需 pres`F2`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-27T16:26:00.393

您不需要为此安装任何插件：

```
set listchars=tab:\|\ 
"set listchars=tab:\┊\ 
"set listchars=tab:\┆\ 
"set listchars=tab:\¦\ 
set list 
```

# java - JXMapKit/-Viewer 与 webstartable 一样慢 - 从哪里开始挖掘？

> ID：15904759
> 
> 赞同：7
> 
> 时间：2013-04-09T14:31:56.343
> 
> 标签：java, swing, java-web-start, jxmapkit

刚刚尝试将一些 swingx-ws 组件添加到整个 swinglabs 演示中 - 并注意到与本地加载相比，一个简单的 JXMapKit/-Viewer 在[webstartable中加载图块的速度要慢几个数量级。](http://swinglabs-demos.java.net/demos/swingxset6/WSDemo.jnlp)

相当迷失在我应该从哪里开始寻找（ui 更新似乎在 EDT 上，但可能需要仔细查看）：

*   还有其他人经历不同的加载时间吗？
*   任何猜测可能是什么原因？
*   如何调试 webstartable？

代码相当简单（要在本地运行，您需要[swingx 和 swingx-ws](http://java.net/projects/swinglabs-demos/sources/svn/show/trunk/www/demos/swingxset6/lib?rev=1316)：

```
public class WSDemo {

    private JComponent createContent() {
        JComponent content = new JPanel();
        content.setLayout(new BorderLayout());

        content.add(createMapKit()); 
        return content;
    }

    protected JComponent createMapKit() {
        final int max = 17;
        TileFactoryInfo info = new TileFactoryInfo(1, max - 2, max, 256, true,
                true, // tile size is 256 and x/y orientation is normal
                "http://tile.openstreetmap.org",// 5/15/10.png",
                "x", "y", "z") {
            public String getTileUrl(int x, int y, int zoom) {
                zoom = max - zoom;
                String url = this.baseURL + "/" + zoom + "/" + x + "/" + y
                        + ".png";
                return url;
            }

        };
        DefaultTileFactory tf = new DefaultTileFactory(info);
        tf.setThreadPoolSize(1);
        final JXMapKit kit = new JXMapKit();
        kit.setTileFactory(tf);
        kit.setZoom(10);
        kit.setAddressLocation(new GeoPosition(51.5, 0));
        kit.getMainMap().setDrawTileBorders(true);
        return kit;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame frame = new JFrame("");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new WSDemo().createContent());
                frame.setLocationByPlatform(true);
                frame.setSize(400, 400);
                frame.setVisible(true);
            }
        });
    }

} 
```

**编辑**：

似乎它与网络上下文中的权限检查有某种关系：分析表明整个连接调用堆栈是不同的（不过分令人惊讶）并且需要很长时间。暂时放弃..

**编辑 2**：

似乎有2个不同的问题

*   正如@Howard 已经指出的那样，打开连接以在安全受限的上下文中加载磁贴所需的时间稍长，即 JavaWebStartSecurity.checkConnect(String, int) 中的热点。
*   一个相当奇怪的 EDT 阻塞似乎只有在 mapKit 用于 SingleFrameApplication（BSAF）时才会发生

要重现阻塞，运行[SimpleWSDemoApp](http://swinglabs-demos.java.net/demos/swingxset6/SimpleWSDemoApp.jnlp)，等到地图可见（需要一些时间，这是第一个问题），然后使用鼠标快速上下移动缩放拇指：ui 完全被阻塞。在普通帧（顶部的参考）上执行相同操作会等待初始加载，但无法重现阻塞。

奇怪的事情（对我来说）是什么阻止了 EDT，来自 VisualVM 的线程转储：

```
"AWT-EventQueue-0" prio=6 tid=0x063d3000 nid=0x1468 waiting for monitor entry [0x05efe000]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at java.security.Permissions.implies(Unknown Source)
    - waiting to lock <0x29f7b118> (a java.security.Permissions)
    at sun.security.provider.PolicyFile.implies(Unknown Source)
    at java.security.ProtectionDomain.implies(Unknown Source)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkSystemClipboardAccess(Unknown Source)
    at java.awt.event.InputEvent.canAccessSystemClipboard(Unknown Source)
    at java.awt.event.InputEvent.<init>(Unknown Source)
    at java.awt.event.MouseEvent.<init>(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) 
```

即拖动鼠标会检查剪贴板访问权限...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:34:27.393

Web Start 应用程序也是一个 JVM 进程，因此您可以尝试使用[VisualVM](https://stackoverflow.com/questions/1874814/profiling-a-web-start-application)对其进行分析（此条目描述了如何执行此操作）。使用 VisualVM 分析这两个应用程序并比较 JVM 设置（如堆大小、JIT 编译器差异）也是值得的。我认为 Web Start 应用程序使用客户端编译器运行，生成本机代码的速度比服务器编译器慢。

# ios - 拖动 UITableView 及其包含的 UIView

> ID：15904760
> 
> 赞同：1
> 
> 时间：2013-04-09T14:31:58.657
> 
> 标签：ios, objective-c, cocoa

我在 UIView 中有一个 UITableView，其中 UIView 充当上拉视图。我想在屏幕上上下拖动视图，并让视图随着我的拖动而向上移动。

如果我正在触摸 UITableView 部分，那么我想向上拖动直到 UIView 达到某个上限，然后我的拖动开始向上拖动 UITableView。

如果 UIView 处于其上限并且我在 UITableView 上向下拖动，那么我希望 UITableView 向下拖动直到它到达它的开头，然后将拖动转移到 UIView，将它与 UITableView 一起向下拖动到屏幕上.

此外，UITableVIew 具有需要继续对按下做出反应的按钮，因此我不能在需要时简单地关闭 tableview 的用户交互性。

目前，当 UIView 位于其顶部停车位置时，我正在设置一个标志，然后在扩展的 UITableView 类中使用以下方法

```
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    CGPoint then = [[touches anyObject] previousLocationInView: self];
    CGPoint now = [[touches anyObject] locationInView: self];
    //CGFloat deltaY = fabs(then.y - now.y);

    if(self.contentOffset.y == 0 && now.y > then.y)
        inSlideMode_ = YES;

    if(inSlideMode_)
    {
        [self.nextResponder touchesMoved:touches withEvent:event];
    }
    else
    {
        [super touchesMoved:touches withEvent:event];
    }
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    CGPoint then = [[touches anyObject] previousLocationInView: self];
    CGPoint now = [[touches anyObject] locationInView: self];
    //CGFloat deltaY = fabs(then.y - now.y);

    if(self.contentOffset.y == 0 && now.y > then.y)
        inSlideMode_ = YES;

    if (inSlideMode_)
    {
        //forwarding action:
        [self.nextResponder touchesBegan:touches withEvent:event];
    }
    else
    {
        [super touchesBegan:touches withEvent:event];
    }
}

-( void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

    if(inSlideMode_)
    {
        [self.nextResponder touchesEnded:touches withEvent:event];
    }
    else
    {
        [super touchesEnded:touches withEvent:event];
    }

    previousTouchY_ =UNTOUCHED_Y_POSITION;
}

    -(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{

    if (scrollView.contentOffset.y <= 0)
    {
        self.scrollEnabled = NO; // if we reach the top of scrolling then should switch     tableview  into the pullup interactor
        self.inSlideMode = YES;

    }
} 
```

在 UIView 扩展类中，我重写了相同的方法来处理拖动，并查看它是否停靠在顶部。

目前它几乎可以工作，但是当拖动 UITableView 时，一旦它到达底部，我需要抬起手指并再次开始拖动它以使 UIView 被向下拖动。有什么建议么？？？谢谢

# sql - 从没有主键的临时表中删除重复字段

> ID：15904763
> 
> 赞同：12
> 
> 时间：2013-04-09T14:32:17.453
> 
> 标签：sql, sql-server, tsql, sql-delete

我需要从临时表中删除重复字段，其中相关字段并不完全相同。

例如，我有以下数据：

```
First  Last     DOB
John   Johnson  10.01.02
Steve  Stephens 23.03.02
John   Johnson  2.02.99
Dave   Davies   3.03.03 
```

在这里，有两个约翰约翰逊的。我只想要一个约翰约翰逊——我不在乎哪一个。所以结果表看起来像：

```
First  Last     DOB
John   Johnson  10.01.02
Steve  Stephens 23.03.02
Dave   Davies   3.03.03 
```

我正在使用 TSQL，但我更喜欢使用非专有的 SQL。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T14:34:08.643

Sql Server 支持`Common Table Expression`和`Window Functions`. 使用`ROW_NUMBER()`which 为每个组提供排名编号，您可以过滤掉排名大于 1 的记录（*这是重复的*）

```
WITH records
AS
(
    SELECT  [First], [Last], DOB,
            ROW_NUMBER() OVER (PARTITION BY [First], [Last] ORDER BY DOB) rn
    FROM    TableName
)
DELETE FROM records WHERE rn > 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e0c74/2)
*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T14:39:01.330

您可以使用`CTE`with `ROW_NUMBER`：

```
WITH CTE AS
(
   SELECT RN = ROW_NUMBER() OVER (PARTITION BY First, Last ORDER BY First,  Last)
   FROM TempTable
)
DELETE CTE 
WHERE RN > 1; 
```

[**演示**](http://www.sqlfiddle.com/#!3/a3ebe/4/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T15:07:01.443

好吧，我迟到了，但这是一个与数据库无关的解决方案：

```
SELECT A.*
FROM YourTable A
INNER JOIN (SELECT [First], [Last], MAX(DOB) MaxDob
            FROM YourTable
            GROUP BY [First], [Last]) B
    ON A.[First] = B.[First] 
    AND A.[Last] = B.[Last]
    AND A.DOB = B.MaxDob 
```

[**这是一个**](http://www.sqlfiddle.com/#!3/75c78/2)带有演示的sqlfiddle。（感谢@JW 提供小提琴的架构）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:37:02.443

您可以使用`CTE`with`ROW_NUMBER()`来完成此操作：

```
WITH CTE
AS
(
    SELECT 
       First, 
       Last, 
       DOB,
       ROW_NUMBER() OVER (PARTITION BY First, Last ORDER BY DOB) RN
    FROM  
       Table1
)

DELETE FROM CTE WHERE RN > 1 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/fa3b2/1)

# jsp - 如何在 Liferay 中编辑 Portlet 或插件？

> ID：15904770
> 
> 赞同：1
> 
> 时间：2013-04-09T14:32:35.783
> 
> 标签：jsp, plugins, liferay, portlet

我下载了一个插件，我想编辑它的视觉效果。比如改变一些东西的宽度，让它们看起来更好。我相信我必须修改 Portlet 或插件的 JSP，但我不太确定这是否是正确的方法。如果是，我在哪里可以找到这些 JSP 文件？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:53:57.420

对于核心，它将是一个 JSP-Hook（阅读有关创建挂钩的开发指南）。但是，对于插件来说，它略有不同。首先，它是一个WAR文件，它只是一个zip文件，解压后应该很容易找到jsps。但是，这对维护不是很友好。相反，您可能希望遵循[Liferay wiki 中 Julio 的说明](https://www.liferay.com/community/wiki/-/wiki/Main/Plugin+to+extend+a+plugin)并使用 ant 和稍微调整的构建过程。这将巧妙地将您的更改与底层插件分开

# java - Java注解可以序列化吗？

> ID：15904773
> 
> 赞同：18
> 
> 时间：2013-04-09T14:32:47.507
> 
> 标签：java, serialization, annotations

Java [Annotation 接口](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html)不扩展`Serializable`。但是，Java 注释值是可序列化的（使用`java.lang.reflect.Proxy`, 和可序列化的调用处理程序实现）。

这在任何地方都有保证吗？我的 search-foo 找不到参考。或者如果我需要安全地序列化注解实例，是否需要创建自己的序列化代理？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T14:46:33.857

`java.lang.reflect.AnnotatedElement`are方法返回的注解对象`Serializable`。这就是[API 所说](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/AnnotatedElement.html)的：*该接口允许以反射方式读取注释。此接口中方法返回的所有注解都是不可变和可序列化的*。

所有能够返回注解对象（Class、Constructor、Field、Method、Package、Parameter）的类都实现了AnnotatedElement，并且有义务按照上述约定创建/返回Serializable对象。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-09T14:38:34.543

注释是类定义的一部分，因此在序列化具有注释的类的实例时永远不会被写入序列化流（至少不是标准的 java 序列化）。

更新：我想我错过了原始问题的要点，即专门序列化实际注释的实例。

# java - 从另一个类调用 JFrame 中的方法

> ID：15904777
> 
> 赞同：0
> 
> 时间：2013-04-09T14:33:04.257
> 
> 标签：java, jframe

我目前正在制作地形生成器，在一个类中一切正常，但我将扩展我的应用程序。

目前我有一个 JFrame 类，它包含所有内容、生成地形、绘制地形、查找位置等。

我想添加另一个将生成地形的类，但是当我创建这个类时，我需要访问主 JFrame 类中的字段，当我这样做时，我得到一个堆栈溢出错误 - 这是我的代码。

```
public class Simulator extends Applet
{
//fields

public Simulator()
{
    grid = new int[100][100];
    inhabGrid = new boolean[grid.length][grid.length];
    gridSize = grid.length - 1;
    dist = grid.length;
            TerrainGenerator gen = new TerrainGenerator();
    setSize(dist,dist);
    seedGrid();
    findInhabLocation();
    printGridToConsole();
}

public void paint(Graphics g)   
{
    //panting the grid
}

public void seedGrid()
{
    //seeding

}

public boolean generateTerrain(int x1,int y1, int x2, int y2) 
{

    //terrain generator
}

public boolean mouseUp(Event evt, int x, int y)
{
    seedGrid(); //Create a new map
    findInhabLocation();
    repaint();
    printGridToConsole();
    return true;
}

public boolean keyEvents(Event evt, int x, int y)
{
    seedGrid(); //Create a new map
    findInhabLocation();
    repaint();
    printGridToConsole();
    return true;
}

public void findInhabLocation()
{
    //find best inhabitant location
}

public int locateWater(int x, int y)
{

    //finding closest water
}

public int locateJungle(int x, int y)
{
    //finding closest jungle
}

}
} 
```

这在它自己的类中工作正常，但是当我创建一个类时，例如：

```
public class TerrainGenerator 
{
Simulator sim = new Simulator();
} 
```

我知道这与构造函数有关，而且我正在做一些愚蠢的事情，将这个应用程序分成类的最佳方法是什么，例如地形生成器、居民等

例如，我希望能够从“TerrainGenerator”类中调用一个方法并调用即 terrainGenerator.generateTerrain

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:35:49.627

您`TerrainGenerator`创建了一个`Simulator`对象，反之亦然，因此您最终会得到无限多的对象（但有时堆栈已满，而是抛出堆栈溢出异常......）

与其`Simulator`在您`TerrainGenerator`的`Simulator`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:40:11.930

Heuster 的回答是正确的，此外，我认为您可以查看 [MVC](https://stackoverflow.com/questions/5217611/the-mvc-pattern-and-swing)来帮助您组织课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:48:50.540

根据哪个应该是父级，您可以将实例化的类传递给另一个，即；

```
private final TerrainGenerator gen;  //if you need to save this.
public Simulator(TerrainGenerator terrainGenerator)
{

  this.gen = terrainGenerator;
 ....etc
}

public class TerrainGenerator 
{
Simulator sim = new Simulator(this);
} 
```

或者

```
private final TerrainGenerator gen;  //if you need to save this.
public Simulator()
{

  this.gen = new TerrainGenerator(this);
 ....etc
}

private final Simulator sim; //If you need to save it.
public class TerrainGenerator 
{
  public TerrainGenerator(Simulator simulator) {
    this.sim = simulator;
  }
} 
```

# networking - OPNET 上的能耗参数？

> ID：15904785
> 
> 赞同：1
> 
> 时间：2013-04-09T14:33:18.070
> 
> 标签：networking, simulation

我在一个简单的 WLAN 网络中工作，只想计算两个 WLAN 站之间的能耗，但我没有找到它，是否有可能得到它或 OPNET 不支持此功能？

# python - 如何设计使用python计算函数导数的数学程序？

> ID：15904786
> 
> 赞同：-6
> 
> 时间：2013-04-09T14:33:18.480
> 
> 标签：python, python-3.x

如果我想创建一个计算函数导数的程序。

对于简单的情况，考虑我们的程序可以处理的可接受的函数只是多项式。

我的问题是：

*   使用 Python 设计这样的程序需要什么背景？
*   这个项目对于 Python 初学者来说会是一个困难的项目吗？
*   Python 是一种合适的语言，可以用来设计这样的程序，还是用另一种语言更容易完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:37:46.833

接受一个函数很容易......就像任何其他参数一样。

```
def example(somefunc):
  somefunc() 

example(someFunction)
example(lambda x: x ** 2) 
```

退回一个有点棘手，但不多。

您可以返回一个 lambda：

```
def example2():
  return lambda x: x + 1 
```

或者你可以构建一个内部函数，然后返回它

```
def example3():
  def rf(x):
    return x + 2
  return rf

myfunc = example3()
myfunc(2) #returns 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:42:47.830

math.sqrt(x) 不是（Python）函数，math.sqrt 是一个函数。注意缺失的 (x)。同样， 1/(2 * math.sqrt(x)) 不是函数，但 (lambda x: 1/(2 * math.sqrt(x))) 是函数。

问题是

```
a = lambda x: x 
```

和

```
b = lambda x: x 
```

将产生两个不同的 python 函数，从数学的角度来看它们是等效的。因此，测试函数是否相等并没有多大帮助。您需要实际“解析”它们才能找到数学导数。

解析内部定义是可能的，但甚至不是很简单。

# php - php服务器后台进程

> ID：15904788
> 
> 赞同：1
> 
> 时间：2013-04-09T14:33:20.833
> 
> 标签：php, mysql, cron

我想知道如何实现一些 php 服务器后台功能以每秒处理一些评估（独立于用户查看页面）。

我当前的解决方案是使用每秒运行的 cron 作业完成的。我想知道是否还有其他选择或可能性。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:59:21.297

1）用while循环编写程序并休眠。

```
while (1)
{
  if (x == y) {
    echo "yay!"
  }
  sleep(1);
} 
```

2）用包装器编写程序，所以它永远不会崩溃。

```
while test 1
do
php /usr/local/bin/continual_process.php
done 
```

这种方法的问题在于它不断地使用 CPU 周期。如果您将程序编写为 node.js 应用程序，事件驱动的架构和`setTimeout`功能可以帮助扩展您的应用程序（并让您思考解决问题的不同思维方式）。

此外，您必须考虑处理循环需要多长时间。如果你每秒调用一次程序，但循环需要 2 秒，那么你正在吃掉你的进程！该`sleep`方法可能也不值得。如果循环需要 2 秒，而您`sleep 1`是每 3 秒运行一次该过程。

最后，如果您的流程又快又轻（循环不到 1 秒），请考虑使用`setInterval`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:44:56.120

我建议您不要使用 cron，而是编写一个守护程序，您可以使用 PHP、python、node.js 或您喜欢的语言来执行此操作。编写好脚本后，您可以使用[upstar将其转换为守护进程](http://upstart.ubuntu.com/)

# android - 启动后我无法关闭我的启动器应用程序

> ID：15904793
> 
> 赞同：0
> 
> 时间：2013-04-09T14:33:29.660
> 
> 标签：android

我的应用程序作为启动器工作，它也在启动时启动。但是，它有问题。例如，我在设备上安装我的应用程序，然后通过选择始终按钮（作为默认启动器）打开它。到这里为止没有问题。但是，如果我重新启动设备（正如我之前所说，它会在启动时打开），应用程序就会打开。但是当我想关闭它时，我不能那样做。它再次打开。

这是我的清单文件：

```
<receiver android:enabled="true" android:name=".BootUpReceiver"
    android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</receiver>

<activity
    android:name="com.comeks.cocuktablet.Main"
    android:label="@string/app_name"
    android:launchMode="singleInstance"
    android:screenOrientation="portrait" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

这是**BootUpReceiver.java**：

```
public class BootUpReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {

        if(intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)){

            Intent i = new Intent(context, Main.class);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:50:25.123

您可以使用 PackageManager 清除您自己的应用程序的默认值，将其放在您的 onCreate() 中：

```
PackageManager pm = getPackageManager();
pm.clearPackagePreferredActivities("com.your.package.name"); 
```

并填写自己的包名。这应该会从您的应用程序中清除启动器默认设置，下次他们按下主页按钮时，应该会显示要使用哪个应用程序的选择。

# apache - Apache config - https:// 显示默认 SSL 站点以及同一服务器上的其他域

> ID：15904794
> 
> 赞同：0
> 
> 时间：2013-04-09T14:33:29.743
> 
> 标签：apache, apache2, lamp

我需要有关 Apache2 配置的帮助。

我在此服务器上托管了一些不是 SSL 的站点和一个是 SSL 的站点。问题是，输入服务器上托管的任何站点的 https:// 都会导致 SSL 托管站点出现证书错误。

如何阻止该网站显示？

```
 <IfModule mod_ssl.c>
 NameVirtualHost *:443
 <VirtualHost *:443>
    ServerAdmin miked@********.ca
    ServerName www.********.com
  CheckSpelling on
  CheckCaseOnly on

    DocumentRoot /var/vhosts/********.com
    <Directory />
            Options FollowSymLinks
            AllowOverride All

    </Directory>
    <Directory /var/vhosts/*******.com>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory>

 LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined

    LogLevel error

    CustomLog ${APACHE_LOG_DIR}/*******-ssl_access.log combined env=!chat
    ErrorLog ${APACHE_LOG_DIR}/*******-ssl-error.log

    #   SSL Engine Switch:
    #   Enable/Disable SSL for this virtual host.
    SSLEngine on

    #SSLCertificateFile    /etc/apache2/ssl/apache.crt

    SSLCertificateFile      /etc/apache2/ssl/lubrigard.crt
    SSLCertificateKeyFile   /etc/apache2/ssl/apache.key
    SSLCertificateChainFile /etc/apache2/ssl/digicertCA.crt

    <FilesMatch "\.(cgi|shtml|phtml|php)$">
            SSLOptions +StdEnvVars
    </FilesMatch>
    <Directory /usr/lib/cgi-bin>
            SSLOptions +StdEnvVars
    </Directory>

    BrowserMatch "MSIE [2-6]" \
            nokeepalive ssl-unclean-shutdown \
            downgrade-1.0 force-response-1.0
    # MSIE 7 and newer should be able to use keepalive
    BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown

 </VirtualHost>
 </IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T15:46:23.140

9 个月太晚了，我知道，而且我绝不是 apache 配置专家，但是-

我认为这个问题的真正解决方案是为您的服务器分配一个额外的 IP 地址，并让 SSL 虚拟主机只监听该 IP 地址。

因为，至少在常规应用程序中（也就是说，如果您不准备使用 IE 7 或 8 使用*服务器名称指示*来避开 Windows XP 及以下用户，请参阅[此处](http://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI "SSL 与使用 SNI 的虚拟主机")和[此处](http://en.wikipedia.org/wiki/Server_Name_Indication "维基百科：服务器名称指示")）每个 SSL 证书都需要一个单独的 IP 地址，因为握手发生在主机名被传递之前，因此客户端只提供IP地址，没有其他干净的方法可以解决这个问题，因为主机名不匹配将发生在可以在vhost条目中处理其他任何内容时, 并且访问者可以看到 SSL 证书实际上对哪个域名有效。

但是，一旦人们单击“同意”或“添加例外”以通过警告，您可以将这样的块添加到您的 SSL 虚拟主机，以将人们重定向到适当的域。仅针对域名本身进行了测试，而不针对其中的页面或目录进行了测试。（部分取自[此处](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html "Apache 重写指南")给出的第一个示例）

```
 <IfModule mod_rewrite.c>
      RewriteEngine On
      RewriteCond %{HTTP_HOST}   !^(www\.)?********\.com [NC]
      RewriteCond %{HTTP_HOST}   !^$
      RewriteCond %{HTTP_HOST}   ^(.*)$
      RewriteRule ^/(.*)         http://%1/$1 [L,R]
  </IfModule> 
```

*...其中星号代表您的具有*ssl的域名。这应该将所有其他请求重写为它们的 HTTP 等效项，同时保持对 ssl 域的请求保持不变。

如果您无法获得另一个 IP 地址，并且取决于您的访问者，也许 SNI 是您的最佳选择。

也许 Serverfault 的人会知道更多？

# java - 只读 JFormattedTextField

> ID：15904796
> 
> 赞同：0
> 
> 时间：2013-04-09T14:33:33.427
> 
> 标签：java, swing, jformattedtextfield

假设启用了*JFormattedTextField*并包含格式化程序，有没有办法让它只读？使用*JTextField*，我们只需要提供一个自定义*Document*并在那里进行所有控制，但是使用*JFormattedTextField*我想事情会稍微复杂一些，因为我们不想弄乱它的文档过滤器。我真的需要这个功能。那么，有没有办法实现这一目标？

*更新：只是我的看法，但从这个意义上说， JFormattedTextField*的设计似乎太糟糕了，以至于它没有为这个简单的问题留下简单的解决方案。

马科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:36:32.580

您不能通过将 isEditable 设置为 false 来禁用编辑吗？

[textfield.setEditable(false);](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setEditable%28boolean%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:36:44.460

您可以简单地使用：

```
JFormattedTextField field = new JFormattedTextField();
// ...
field.setEditable(false); 
```

就像`JTextField`因为`JFormattedTextField`扩展`JTextField`

也可以查看[javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setEditable%28boolean%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:15:52.643

撤消发生的每个更改怎么样：

```
JFormattedTextField formattedTextField = new JFormattedTextField("Can't touch this! :)");
formattedTextField.getDocument().addUndoableEditListener(new UndoableEditListener() {
    @Override
    public void undoableEditHappened(UndoableEditEvent e) {
        e.getEdit().undo();
    }
}); 
```

# android - 将 facebook 会话传递给服务 (SDK 3.0.1)

> ID：15904797
> 
> 赞同：0
> 
> 时间：2013-04-09T14:33:35.710
> 
> 标签：android, facebook

我有一项主要活动和一项服务，我每 x 小时更新一次后台从 facebook 获取的一些数据。

这些天来，我终于迁移到新的 SDK 3.0.1（从 2.x 开始），并且在将 facebook 会话传递给服务时遇到了问题：

如果在主要活动仍在运行时服务运行一切正常，否则我的会话为空，因此它在 if (session.isOpened()) { ...} 处崩溃，因为 session==null。

这是我的代码：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i("ServiceUpdate", "Received start id " + startId + ": " + intent);

    session = Session.getActiveSession();

    startservice();
    return START_STICKY;
}

private void startservice() {

    timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {         
            if (session.isOpened()) {
                if (isOnline()) {
                    Log.i("ServiceUpdate", "start timer");

                    update();

                    Log.i("ServiceUpdate", "end timer");
                }
             }

    }, 600000, 6 * 3600000);

} 
```

我是否必须像以前使用 SDK 2.x 一样使用保存的 access_token 和 expire_time 来初始化会话？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:41:11.310

Session 的默认行为是将令牌信息保存在 Android 的 SharedPreferences 中，因此您应该能够在您的服务中调用 Session.openActiveSessionFromCache。如果返回 null，则表示您的用户尚未连接 Facebook。

# coronasdk - 使用 Corona Sdk 访问设备联系人列表？

> ID：15904800
> 
> 赞同：0
> 
> 时间：2013-04-09T14:33:45.070
> 
> 标签：coronasdk, contact-list

我正在开发一个获取联系人列表的项目，用户将能够发送电子邮件。任何帮助或建议将不胜感激。我知道它可以在电话间隙中完成。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:03:07.713

使用 Corona 无法获取联系人列表。

您可以考虑让 Facebook 与您的应用程序一起使用：http: [//docs.coronalabs.com/api/library/facebook/index.html](http://docs.coronalabs.com/api/library/facebook/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T07:49:18.407

如果你使用插件，你可以做你需要的一切。[这](http://www.coronalabs.com/blog/2013/08/13/access-to-ios-contacts/)是一个很好的起点。

# ssl - Worklight 适配器相互 SSL

> ID：15904802
> 
> 赞同：1
> 
> 时间：2013-04-09T14:33:50.527
> 
> 标签：ssl, certificate, ibm-mobilefirst, mobilefirst-adapters

按照步骤将 Worklight 与后端系统集成。在 5.0.6 中，适配器应该支持相互 SSL。

1.  使用名为 cert1 的别名将证书导入 default.keystore
2.  修改适配器的 sslCertificateAlias 为 cert1

当使用 Worklight Studio 运行与服务器连接的已部署适配器时，它抱怨“无法找到具有别名的证书链：'cert1'”。

缺少哪些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:56:34.370

检查“ *worklight.properties ”文件中的“* *ssl.keystore.* *”属性，然后使用keytool检查密钥库文件中是否存在证书：

 *```
keytool -list -keystore default.keystore 
```

以下是使用自签名证书在适配器和后端服务器之间配置相互 SSL 的步骤：

1.  *在“ default.keystore* ”中生成适配器的私钥并导出其公共证书
2.  将适配器的证书导入后端 truestore 文件

如果后端没有 CA 签名证书：

1.  在其密钥库文件中生成后端的私钥并导出公共证书
2.  将后端的公共证书导入 WL 服务器上的“default.keystore”文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:18:37.643

检查 worklight.properties 文件。确保 ssl 相关设置指向 default.keystore。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:48:07.533

昨天想通了。必须以正确的方式配置证书链。

所有证书（服务器证书、一级证书和根证书）必须按特殊顺序组合成一个，并与私钥一起导入密钥库。然后使用一个别名，以便 Worklight 适配器可以找到它。*

# javascript - 通过浏览器访问设置菜单

> ID：15904809
> 
> 赞同：0
> 
> 时间：2013-04-09T14:34:15.840
> 
> 标签：javascript, android, html, settings

是否可以使用 HTML5 和 JavaScript 从移动设备上的浏览器访问设备设置？

我正在尝试在 Android 中重新创建类似的东西，您可以在其中使用类似于下面的代码启动显示特定设置页面的意图。

```
Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
startActivity(intent); 
```

我一直在做一些搜索，但没有找到任何东西。这对我来说表明这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:49:02.653

> 是否可以使用 HTML5 和 JavaScript 从移动设备上的浏览器访问设备设置？

不可靠。

您可以在一个废弃的 Android 应用程序中创建您的`Intent`，然后[调用`toUri()`它](http://developer.android.com/reference/android/content/Intent.html#toUri%28int%29)为您提供一个`Uri`，然后您将其转换为`String`via `toString()`。然后，您可以通过复制并粘贴到您的 HTML 代码中，将其用作超链接上的值。

但是，这假设浏览器知道在遇到`intent:`URL 时要做什么，这可能因浏览器而异。

# python - 跨多个正则表达式匹配字符串

> ID：15904811
> 
> 赞同：1
> 
> 时间：2013-04-09T14:34:21.840
> 
> 标签：python, regex, postgresql

我有一个 postgresql 数据库，其中包含大约 5000 万个作为地址的字符串条目。字符串的示例是

```
NIAID, Opportunist Infect Res Branch, Treatment Res Programs, Div Aids, Bethesda, MD USA
PRINCETON UNIV,DEPT PSYCHOL,PRINCETON,NJ 08544 
```

等等

现在我必须检查一个地址是否与大约 30,000 个正则表达式列表中的任何一个匹配。我还需要知道匹配哪个正则表达式。正则表达式的例子是

```
%umass mem med ctr worcester%worcester%ma%
%darnnouth% 
```

这当然是 postgres 的“LIKE”格式。由于正则表达式匹配不能利用索引（反正不是很多，我已经索引了字段 varchar_pattern_ops），所以这个操作的总运行时间大约是 30000x50 百万。

如果存在任何可以帮助我加快流程的 python 库，我也可以使用 python 进行正则表达式匹配。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T01:18:08.300

有什么问题：

```
CREATE TABLE regex (
     regex text primary key
);

SELECT * FROM my_table
  JOIN regex ON mytextfield like regex; 
```

# git - 从分支中删除提交和相关更改

> ID：15904816
> 
> 赞同：1
> 
> 时间：2013-04-09T14:34:29.920
> 
> 标签：git

```
git log 
```

将列出当前分支上的所有提交，假设我有三个提交，并且我想删除中间的一个，您可以建议以下命令：

```
git reset --hard <sha1-commit-id> 
```

但是，我不想恢复到那个提交 id，我只想将它从分支中删除，所以下次我这样做时`git log`它不会出现在列表中。提前谢谢。

**编辑**，抱歉我的解释失误，当我说删除提交 ID 时，我的意思是删除所有相关的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:42:59.473

提交是否也在远程分支上？根据对此的答案将确定您应该做什么。

如果不是，请执行`git rebase -i <sha before the one you want to remove>`这将允许您删除提交。

如果它在遥控器上，您不想删除它。你最终会导致推拉问题。推送后重写历史是一件坏事。所以对于那种情况你想要`git revert <sha that you want to remove>`。这将创建一个撤消更改的新提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:40:07.860

要有效地撤消该提交中的更改并将其从历史记录中删除，您可以执行以下操作：

```
git rebase --onto HEAD^^ HEAD $BRANCH 
```

`$BRANCH`您当前所在的分支的名称在哪里。

或者，您可以检查较旧的提交，然后挑选较新的提交：

```
TIP=`git rev-parse HEAD`
git reset --hard HEAD^^
git cherry-pick $TIP 
```

请记住，这两个操作都会更改历史记录，`git push --force`如果您已经发布了这些提交，这将需要一个操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:13:39.993

使用命令

git rebase -i HEAD~N

假设您不想要第二次提交，N 将是 2.. 一旦您以 N=2 的值运行此命令，git 将提示您采取行动.. 只需删除您不想要的提交的行，它将被删除.. .

并删除标签使用

git tag -d [标签名称]

# python - 消除 numpy 实现中的 for 循环

> ID：15904819
> 
> 赞同：2
> 
> 时间：2013-04-09T14:34:41.727
> 
> 标签：python, numpy, vectorization

我在 numpy 中有以下数据集

```
indices | real data (X)    |targets (y)
        |                  |
0   0   | 43.25 665.32 ... |2.4      } 1st block
0   0   | 11.234           |-4.5     }
0   1     ...               ...      } 2nd block
0   1                                } 
0   2                                } 3rd block
0   2                                }
1   0                                } 4th block
1   0                                }
1   0                                }
1   1                       ...
1   1                       
1   2
1   2
2   0
2   0 
2   1
2   1
2   1
... 
```

论文是我的变量

```
idx1 = data[:,0]
idx2 = data[:,1]
X = data[:,2:-1]
y = data[:,-1] 
```

我还有一个变量`W`，它是一个 3D 数组。

我需要在代码中做的是遍历数据集中的所有块，并在一些计算后为每个块返回一个标量数，然后对所有标量求和，并将其存储在一个名为`cost`. 问题是循环实现非常慢，所以如果可能的话，我会尝试将它矢量化。这是我当前的代码。在numpy中没有for循环是否可以做到这一点？

```
IDX1 = 0
IDX2 = 1

# get unique indices
idx1s = np.arange(len(np.unique(data[:,IDX1])))
idx2s = np.arange(len(np.unique(data[:,IDX2])))

# initialize global sum variable to 0
cost = 0
for i1 in idx1s:
    for i2 in idx2:

        # for each block in the dataset
        mask = np.nonzero((data[:,IDX1] == i1) & (data[:,IDX2] == i2))

        # get variables for that block
        curr_X = X[mask,:]
        curr_y = y[mask]
        curr_W = W[:,i2,i1]

        # calculate a scalar  
        pred = np.dot(curr_X,curr_W)
        sigm = 1.0 / (1.0 + np.exp(-pred))
        loss = np.sum((sigm- (0.5)) * curr_y)

        # add result to global cost
        cost += loss 
```

这是一些示例数据

```
data = np.array([[0,0,5,5,7],
                 [0,0,5,5,7],
                 [0,1,5,5,7],
                 [0,1,5,5,7],
                 [1,0,5,5,7],
                 [1,1,5,5,7]])
W = np.zeros((2,2,2))
idx1 = data[:,0]
idx2 = data[:,1]
X = data[:,2:-1]
y = data[:,-1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:34:47.027

这`W`很棘手......实际上，您的块非常无关紧要，除了获得正确的切片`W`来`np.dot`处理相应的`X`，所以我采用了创建`aligned_W`数组的简单方法，如下所示：

```
aligned_W = W[:, idx2, idx1] 
```

这是一个形状数组，`(2, rows)`其中`rows`是数据集的行数。您现在可以在没有任何 for 循环的情况下继续进行整个计算，如下所示：

```
from numpy.core.umath_tests import inner1d
pred = inner1d(X, aligned_W.T)
sigm = 1.0 / (1.0 + np.exp(-pred))
loss = (sigm - 0.5) * curr_y
cost = np.sum(loss) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:43:12.120

我的猜测是您的代码运行缓慢的主要原因是以下行：

```
mask = np.nonzero((data[:,IDX1] == i1) & (data[:,IDX2] == i2)) 
```

因为您反复扫描输入数组以查找少量感兴趣的行。因此，您需要执行以下操作：

```
ni1 = len(np.unique(data[:,IDX1]))
ni2 = len(np.unique(data[:,IDX2]))
idx1s = np.arange(ni1)                         
idx2s = np.arange(ni2)

key = data[:,IDX1] * ni2 + data[:,IDX2] # 1D key to the rows

sortids = np.argsort(key) #indices to the sorted key 
```

然后在循环内部而不是

```
mask=np.nonzero(...) 
```

你需要做

```
curid = i1 * ni2 + i2
left = np.searchsorted(key, curid, 'left', sorter=sortids)
right=np.searchsorted(key, curid, 'right', sorter=sortids)
mask = sortids[left:right] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:16:26.863

我认为没有办法在不使用 for 循环的情况下比较不同大小的 numpy 数组。很难确定输出的含义和形状是什么

```
[0,1,2,3,4] == [3,4,2] 
```

我能给你的唯一建议是使用以下方法摆脱 for 循环之一`itertools.product`：

```
import itertools as it

[...]

idx1s = np.unique(data[:,IDX1])
idx2s = np.unique(data[:,IDX2])

# initialize global sum variable to 0
cost = 0
for i1, i2 in it.product(idx1s, idx2):

    # for each block in the dataset
    mask = np.nonzero((data[:,IDX1] == i1) & (data[:,IDX2] == i2))

    # get variables for that block
    curr_X = X[mask,:]
    curr_y = y[mask]
    [...] 
```

您也可以保留`mask`为布尔数组

```
mask = (data[:,IDX1] == i1) & (data[:,IDX2] == i2) 
```

输出是相同的，无论如何您都必须使用内存来创建 bool 数组。这样做可以节省一些内存和函数评估

**编辑**

如果您知道索引没有孔或孔很少，则可能值得删除您定义的部分`idx1s`并将`idxs2`for 循环更改为

```
max1, max2 = data[:,[IDX1, IDX2]].max(axis=0)
for i1, i2 in it.product(xrange(max1), xrange(max2)):
    [...] 
```

两者`xrange`和`it.product`都是迭代器，因此它们仅`i1`在`i2`您需要时创建。

ps：如果你在 python3.x 上使用`range`，而不是`xrange`

# concurrency - 活动日志没有在 JavaFX 中不断更新

> ID：15904820
> 
> 赞同：1
> 
> 时间：2013-04-09T14:34:41.997
> 
> 标签：concurrency, javafx-2

我正在使用 JSCH 在 linux 上执行一些命令，并获取该命令的输出并在我的 JAVAFX 应用程序的活动日志上打印相同的命令。

这里有一个问题：打印某些行后活动日志区域卡住了。但是，如果我从窗口切换并返回应用程序继续在日志区域打印行。我已经调试了几次，但无法发现问题。

下面是代码

```
channel.connect();

PrintStream commander = new PrintStream(channel.getOutputStream(), true);
commander.println(command_cd);
commander.println(" exit;");
commander.close();

InputStream outputstream_from_the_channel = channel.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(outputstream_from_the_channel));
String jarOutput;
BufferedWriter bw = new BufferedWriter(new FileWriter(resultLogFile.getAbsolutePath(), true));
while ((jarOutput = reader.readLine()) != null) {
    this.logger.info("Status Update = " + jarOutput);
    System.out.print("Status Update on screen ="+jarOutput + "\n");
    bw.write(jarOutput);
    bw.newLine();
    outputFromUnix.append(jarOutput).append("\n");

    // Display in activity log area in realtime.
    if (DeploymentTaskController.actLogTArea != null) {
        System.out.println("outputFromUnix.toString()---->>>>> " + outputFromUnix.toString());

    //actlogArea is TextArea

        DeploymentTaskController.actLogTArea.setText(outputFromUnix.toString());
        DeploymentTaskController.actLogTArea.end();

    }
}
bw.close();

reader.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:12:05.173

JavaFX 有一个名为“JavaFX Application Thread”的特殊线程来更新所有 UI。此线程不应用于任何非 UI 操作，并且所有 UI 操作都**必须**在该线程上运行。

确保在单独的线程中运行代码并将所有 UI 代码包装`Platform#runLater()`到已执行

```
// Using separate thread to run data loading code
new Thread(new Runnable() {
    public void run() {
        channel.connect();

        // [...] all your channel reading code

        // Updating UI from JavaFX Application Thread
        if (DeploymentTaskController.actLogTArea != null) {
            System.out.println("outputFromUnix.toString()---->>>>> " + outputFromUnix.toString());

            final String outputStr = outputFromUnix.toString();
            Platform.runLater(new Runnable() {
                @Override
                public void run() {
                    DeploymentTaskController.actLogTArea.setText(outputStr);
                    DeploymentTaskController.actLogTArea.end();
                }
            });
        }
        bw.close();
        reader.close();
    }
}).start(); 
```

JavaFX 中还有一个用于此类任务的特殊并发 API，请参见此处：[http ://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)

# google-api-dotnet-client - 使用适用于 .NET 的 Google API 客户端入门

> ID：15904821
> 
> 赞同：0
> 
> 时间：2013-04-09T14:34:43.640
> 
> 标签：google-api-dotnet-client

我开始觉得自己很笨——我根本无法`Google API Client`在我的`VB.NET`Web 应用程序中工作。我无法超越授权阶段。我不清楚是否应该使用 a`NativeApplicationClient`或`WebServerClient`. 我不想被束缚`SessionState`（我在所有 WebServerClient 示例中看到的东西），我只想加载一个`refreshToken`（如果我们有一个为用户存档）或生成一个 URL 以获取授权（如果我们没有令牌.)

似乎没有什么允许这样做。`GetAuthorization`老实说-当我使用时，该功能似乎没有运行：

```
Dim auth As OAuth2Authenticator(Of WebServerClient) = New OAuth2Authenticator(Of WebServerClient)(provider, (AddressOf GetAuthorization)) With { _
 .NoCaching = True _
} 
```

有没有 ASP.NET Web 应用程序的简单文档？我正在尝试从旧的 Google Data API（这使得这一切变得简单）过渡到`Google API Client`但 dotNotOpenAuth 让我很适应。

有什么帮助吗？我看到一些关于 VB.NET 没有表现的评论 - 但我尝试了一个 C#.NET 类库，但没有运气。

谢谢，比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:19:27.047

目前没有使用 VB.NET 的 ASP.NET 示例。但我可以[在此处](https://code.google.com/p/google-api-dotnet-client/source/browse/?repo=samples#hg/Tasks.ASP.NET.SimpleOAuth2)向您推荐 ASP.NET的示例，带有 OAuth2 的 VB.NET 示例仍在等待代码审查，但可[在此处](https://codereview.appspot.com/7007048/)获得。

重新评估我们对 DotNetOpenAuth 的使用，我知道这很复杂，我们接下来几周的主要目标之一是编写我们自己的 OAuth2 库。

# java - 将 actionListener 添加到 jCalendar

> ID：15904824
> 
> 赞同：3
> 
> 时间：2013-04-09T14:34:57.153
> 
> 标签：java, swing, awt, actionlistener, jcalendar

如何将 actionListener 添加到使用 netbeans 放置的现有 jCalendar 的 jDayChooser 组件？

我只想在单击日期按钮时触发事件。因为 jCalendar 中的 propertyChange 甚至会监听 jMonthChooser 和 jYearChooser

PS 使用 toedter 的 jCalendar

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T16:23:44.243

或者，您可以收听特定的`propertyName`, `"day"`。

```
JDayChooser jdc = new JDayChooser();
jdc.addPropertyChangeListener("day", new PropertyChangeListener() {
    @Override
    public void propertyChange(PropertyChangeEvent e) {
        System.out.println(e.getPropertyName()+ ": " + e.getNewValue());
    }
}); 
```

附录：*我如何让它在 a 上工作* `JCalendar`？

同样，,`propertyName`表示`"calendar"`您`Calendar`可以从中`get()`.`DAY_OF_MONTH`

```
JCalendar jc = new JCalendar();
jc.addPropertyChangeListener("calendar", new PropertyChangeListener() {

    @Override
    public void propertyChange(PropertyChangeEvent e) {
        final Calendar c = (Calendar) e.getNewValue();   
        System.out.println(c.get(Calendar.DAY_OF_MONTH));   
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T00:03:26.897

以防有人错过阅读评论。这是一个示例工作代码。

```
JCalendar jCalendar = new JCalendar();
jCalendar.getDayChooser().addPropertyChangeListener("day", new PropertyChangeListener() {
   @Override
   public void propertyChange(PropertyChangeEvent e) {
      System.out.println(e.getPropertyName()+ ": " + e.getNewValue());
   }
}); 
```

# hibernate - 无法使用 JPA 和 Sybase ASE 存储二进制文件

> ID：15904831
> 
> 赞同：0
> 
> 时间：2013-04-09T14:35:24.620
> 
> 标签：hibernate, jpa, sybase, sap-ase, jconnect

用户应该能够更改包含`byte`数组的实体的内容，该数组映射到`image`数据库中的列。请注意，我不能使用 LOB 功能，因为 Sybase 不支持它。

当我尝试持久化或合并实体时，只有包含`text/plain`数据的实体才能正常存储，而其他类型的文件，比如`.pdf`或`.odt`使数据库抛出：

```
 java.sql.SQLException: JZ0SM: jConnect could not execute a stored procedure because there was a problem sending the parameter(s). This problem was likely caused because the server does not support a specific datatype, or because jConnect did not request support for that datatype at connect time.
Try setting the JCONNECT_VERSION connection property to a higher value. Or, if possible, try sending your procedure execution command as a language statement. 
```

Hibernate 在异常之前立即记录正常更新，我绝对没有执行任何存储过程，所以我不确定错误指的是什么存储过程。我对本机查询进行了同样的尝试，但遇到了同样的错误。

```
16:08:04,776 INFO Hibernate: update KVS_MIPO_DOWNLOAD_FILE set creatorName=?, data=?, referencePeriod=? where id=? 
```

我已经检查了我的`jconn4`驱动程序的版本，并`JCONNECT_VERSION=7.0`在数据源中添加了我的连接字符串。没有效果。

搜索网络没有产生任何相关问题。Sybase 支持页面只是列出了错误并且不提供进一步的帮助。

我在 Hibernate 4.0.1.Final 上使用 Sybase ASE 15.7.0、JPA 2，在 Suse 12.2 机器上的 JBoss 7.1.1 上运行。

实体：

```
@Entity
@DiscriminatorValue("file")
@Table(name = "KVS_MIPO_DOWNLOAD_FILE")
public class DownloadFile extends DownloadResource {

    @Column(nullable = false)
    private String creatorName;

    @Basic(fetch = FetchType.LAZY)
    private byte[] data = new byte[0];

    private String referencePeriod;

    ...

    public byte[] getData() {
        if (data != null) {
            return data.clone();
        }
        return new byte[0];
    }

    public void setData(final byte[] data) {
        if (data == null) {
            this.data = null;
            return;
        }
        this.data = data.clone();
    } 
```

表 DDL：

```
create table KVS_MIPO_DOWNLOAD_FILE (
    referencePeriod           varchar(255)                 null  ,
    creatorName               varchar(255)             not null  ,
    id                        int                      not null  ,
    data                      image                        null   
) 
```

谢谢你。

编辑：这个问题最初是一个 JSF/JPA/Sybase 问题。通过测试我可以排除 JSF 作为错误的来源，所以我删除了 JSF 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:06:04.383

原来错误的原因是 jConnect 7.0 版本中的一个错误。我已更新到 7.07，问题已解决。

# actionscript-3 - 我不断收到空 sqlStatement.getResult，此代码位于 Action 脚本移动项目中。

> ID：15904844
> 
> 赞同：0
> 
> 时间：2013-04-09T14:35:47.980
> 
> 标签：actionscript-3

我试图保持简单，现在只是添加和显示，现在不需要删除条目或任何东西。任何帮助是极大的赞赏！

```
package
{
        import flash.data.SQLConnection;
        import flash.data.SQLResult;
        import flash.data.SQLStatement;
        import flash.events.Event;
        import flash.events.SQLErrorEvent;
        import flash.events.SQLEvent;
        import flash.filesystem.File;
        import flash.net.URLLoader;
        import flash.net.URLRequest;    
        import screens.LevelSelection;

        public class Database
        {
            public var sqlConnection:SQLConnection;
            private var db:File;
            private var dbStatus:String= "";
            private var dataResult:Object;
            private var playersList:Array;
            public var selectAllSQL:SQLStatement;

            public function openDB():void
            {
                db = File.desktopDirectory.resolvePath("Players.db");
                sqlConnection = new SQLConnection();
                sqlConnection.addEventListener(SQLErrorEvent.ERROR, onSQLError);

                if(db.exists)
                {
                    sqlConnection.addEventListener(SQLEvent.OPEN, onOpenDB);
                    trace("DB Found");
                }
                else
                {
                    sqlConnection.addEventListener(SQLEvent.OPEN, onCreateDb);
                }

                sqlConnection.openAsync(db);
            }

            private function onSQLError(event:SQLErrorEvent):void
            {
                var error:String = "Error id: " 
                    + event.error.errorID + "\nDetails: " + event.error.details;
                dbStatus += event + "Error";
            }

            private function onOpenDB(event:SQLEvent):void
            {
                dbStatus += "The database was opened...";
                if(SQLConnection(event.target).connected)
                {
                    trace(dbStatus);
                }
            }

            public function onCreateDb(event:SQLEvent):void
            {
                dbStatus += "The database was created...";
                createPlayerTable();
                trace(dbStatus);
            }

                    Im not sure if my syntax is right for these statements.                         I tried to trace a lot of things out so that i can see the results in debugging

            public function createPlayerTable():void
            {
                var sqlText:String = 
                    "CREATE TABLE IF NOT EXISTS Players(NAME TEXT,    SCORE INTEGER)";
                var createTableSQL:SQLStatement = new SQLStatement();
                createTableSQL.sqlConnection = sqlConnection;
                trace("Create Table Connection: " 
                    + createTableSQL.sqlConnection.connected);
                createTableSQL.addEventListener(SQLEvent.RESULT, onPlayersTable);
                createTableSQL.addEventListener(SQLErrorEvent.ERROR, onSQLError);
                createTableSQL.text = sqlText;
                createTableSQL.execute();           
                trace(createTableSQL.getResult());
            }

            public function onPlayersTable(event:SQLEvent):void
            {
                dbStatus += "The Players table was created";
                trace(dbStatus);
            }

            public function selectPlayers():void
            {
                var sqlText:String = "SELECT * FROM Players";
                selectAllSQL = new SQLStatement();
                selectAllSQL.sqlConnection = sqlConnection;
                selectAllSQL.addEventListener(SQLErrorEvent.ERROR, onSQLError);
                selectAllSQL.text = sqlText;
                selectAllSQL.execute();
                handleSelection(selectAllSQL);
            }

            public function handleSelection(event:SQLStatement):void
            {
                onSelectPlayers(selectAllSQL);
            }

            public function onSelectPlayers(event:SQLStatement):void
            {
                trace("select called");
                var result:SQLResult = event.getResult();

                if(result.data)
                {               
                    for(var i:int = 0; i < result.data.length; i++)
                    {
                        screens.LevelSelection.output.text += 
                            "Name: " + result.data[i]["NAME"] + ", " + 
                            "Score: " + result.data[i]["SCORE"];
                    }
                }
            } 
```

我见过几个人使用 @ 符号和几个人使用 : 来指定插入的值。

```
 public function addPlayer():void
            {
                var sqlText:String = 
                    "INSERT INTO Players(NAME, SCORE) Values(@name, @score)";
                var addPlayerSQL:SQLStatement = new SQLStatement();
                addPlayerSQL.sqlConnection = sqlConnection;
                trace("ADD PLAYER CONNECTION: " + addPlayerSQL.sqlConnection.connected);
                addPlayerSQL.addEventListener(SQLErrorEvent.ERROR, onSQLError);
                addPlayerSQL.text = sqlText;
                addPlayerSQL.parameters["@name"] = screens.LevelSelection.input.text;
                addPlayerSQL.parameters["@score"] = 0;
                addPlayerSQL.execute(); 
                trace(addPlayerSQL.getResult());
                trace(screens.LevelSelection.input.text);
                trace("Player added");
                selectPlayers();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:24:05.237

由于它是异步调用，因此如果放置 trace(createTableSQL.getResult()); 将不会立即获得结果 在 onPlayersTable 方法中，我想你会得到你期望的结果。

# html - 如何使用 div 和 css 制作这个（表格）

> ID：15904848
> 
> 赞同：-3
> 
> 时间：2013-04-09T14:35:52.143
> 
> 标签：html, css, html-table

我需要知道如何使用 div、css 和正确的 xhtml 制作这张表

```
 <table width="100%" border="1">
        <tr>
            <td style="width: 130px">1</td>
            <td align="center">2</td>
            <td style="width: 130px">3</td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:40:24.663

像这样？

```
<div class="table">
    <div class="row">
        <span class="cell width130">1</span>
        <span class="cell">2</span>
        <span class="cell width130">3</span>
    </div>
</div>

.table {
    display: table;
    width: 100%;
    border: 1px solid black;
}
.row {
    display: table-row;
}
.cell {
    display: table-cell;
}
.width130 {
    width: 130px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:04:37.207

这是我发现的一个很好的例子

[1] [http://www.c-sharpcorner.com/uploadfile/satisharveti/introduction-to-page-layout-using-div-element/](http://www.c-sharpcorner.com/uploadfile/satisharveti/introduction-to-page-layout-using-div-element/) [2] [http://www.ezineasp.net/post/Div- 3-Columns-Layout-using-CSS-Styles-Div-layout-1.aspx](http://www.ezineasp.net/post/Div-3-Columns-Layout-using-CSS-Styles-Div-layout-1.aspx)

# regex - 匹配任何单词正则表达式

> ID：15904850
> 
> 赞同：1
> 
> 时间：2013-04-09T14:35:54.410
> 
> 标签：regex, dreamweaver, replace

我想从我的代码中删除数百个 onmouseover 事件。evt 都传递了不同的变量，我希望能够使用 dreamwaever 来查找和替换所有字符串。

这是一个例子

```
onmouseover="parent.mv_mapTipOver(evt,'Wilson');"
onmouseover="parent.mv_mapTipOver(evt,'Harris');"
onmouseover="parent.mv_mapTipOver(evt,'Walker');" 
```

我想运行一个搜索来识别所有这些并替换/删除它们。

我尝试过看似无限的排列，例如：

```
onmouseover="parent.mv_mapTipOver(evt,'[^']');" 
```

或者

```
onmouseover="parent.mv_mapTipOver(evt,'[^']);" 
```

或者

```
onmouseover="parent.mv_mapTipOver(evt,[^']);" 
```

或者

```
onmouseover="parent.mv_mapTipOver(evt,'[^']+');" 
```

还有很多。我找不到可以工作的正则表达式。

任何/所有帮助将不胜感激。

万分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:40:01.003

`"."`和 " `(`" 在正则表达式中具有特殊含义，因此您需要对它们进行转义：

```
onmouseover="parent\.mv_mapTipOver\(evt,'[^']+'\);" 
```

我不确定这是否是正确的dreamweaver 正则表达式语法，但这些东西已经足够标准了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:40:44.817

试试这个：

```
onmouseover="parent\.mv_mapTipOver\(evt,'.+?'\);" 
```

[并在此处](http://regexr.com?34f48)查看它的实际效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:08:36.467

使用 reg 表达式时，您必须非常小心处理空白的方式。例如，由于逗号和等号后面的空格，到目前为止提到的大多数 reg 表达式都不会捕获以下代码，尽管事实上它很可能是您使用的语言中的有效语法。

```
onmouseover= "parent.mv_mapTipOver(evt, 'Walker');" 
```

为了创建忽略空格的正则表达式，您必须在正则表达式中可能出现空格的任何地方插入 /s*。

即使您的代码中有额外的空白，以下正则表达式也应该可以工作。

```
onmouseover\s*=\s*"parent\.mv_mapTipOver\(\s*evt\s*,\s*'[A-Za-z]+'\s*\);" 
```

# javascript - 如何从集合中获取 json 对象键名并进行迭代

> ID：15904853
> 
> 赞同：1
> 
> 时间：2013-04-09T14:35:58.173
> 
> 标签：javascript, backbone.js, underscore.js

下面是我的json结构。在collection.fetch() 成功时，我正在遍历结构。

目前我使用

```
this.collection.each(function(model) { .. } 
```

我如何获得植物、动物等关键名称，而是使用这些名称进行循环。

JSON

```
var jsonObj = {         // 0 - recommended , 1 - New
   "plants" : [

       {
        "title" : "title1",
            "desc": "description.." 
       },
           {
        "title" : "titl2",
            "desc": "description."  
       }    
    ],
    "animals" : [

       {
        "title" : "title1",
            "desc": "description.." 
       },
           {
        "title" : "titl2",
            "desc": "description."  
       }    
    ]
}; 
```

集合快照

![在此处输入图像描述](https://i.stack.imgur.com/rIyhr.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:44:30.340

这会起作用，但你会使用普通的 for 循环，而不是“每个”：

```
for(i in jsonObj){
     alert(i);
} 
```

这是一个 fjsfiddle：http: [//jsfiddle.net/r5nwP/](http://jsfiddle.net/r5nwP/)

这就是你所追求的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:44:16.603

您可以使用下划线`keys`来获取名称列表：

```
var thenames =_.keys(yourobject); 
```

在这种情况下，thenames 将包含您要查找的键的列表。这是它的文档：

[http://underscorejs.org/#keys](http://underscorejs.org/#keys)

keys_.keys(object) 检索对象属性的所有名称。

_.keys({一: 1, 二: 2, 三: 3}); => [“一”，“二”，“三”]

# c# - 顶级异常没有捕获任何东西

> ID：15904854
> 
> 赞同：10
> 
> 时间：2013-04-09T14:35:58.577
> 
> 标签：c#, exception-handling

我的入口点应该捕获任何未在较低级别处理的异常：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Threading;
using System.Runtime.InteropServices;

namespace EyeScanner
{
    static class Program
    {
        [FlagsAttribute]
        public enum EXECUTION_STATE : uint
        {
            ES_AWAYMODE_REQUIRED = 0x00000040,
            ES_CONTINUOUS = 0x80000000,
            ES_DISPLAY_REQUIRED = 0x00000002,
            ES_SYSTEM_REQUIRED = 0x00000001
            // Legacy flag, should not be used.
            // ES_USER_PRESENT = 0x00000004
        }

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        static extern EXECUTION_STATE SetThreadExecutionState(EXECUTION_STATE esFlags);
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            SetThreadExecutionState(EXECUTION_STATE.ES_CONTINUOUS | EXECUTION_STATE.ES_AWAYMODE_REQUIRED | EXECUTION_STATE.ES_SYSTEM_REQUIRED);

            bool isNew;
            Mutex m = new Mutex(false, "EyeScannerByOphthaMetrics", out isNew);
            try
            {
                if (isNew) Application.Run(new CheckSystemForm());
                else { MessageBox.Show("An other instance of EyeScanner is running"); }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.StackTrace);                
            }
        }
    }
} 
```

现在我希望最后一个`catch()`能够捕获任何未处理的异常，但我有一种情况（100% 可重现）来创建一个`NullReferenceException`（关闭连接到系统的硬件），但我不能断点它，因为它发生了在一个随机点，我无法捕捉它，也无法获得调用堆栈（当我尝试调试它时，Visual Studio 说发生了异常，没有调用堆栈，也没有可用的反汇编）。我在调试菜单中激活了`NullReferenceException`，但没有抓住它。

我该如何处理？我得到一个 100% 的异常，但我无法调试它以找出它发生的原因。

编辑：事件日志：

```
Anwendung: EyeScanner.exe
Frameworkversion: v4.0.30319
Beschreibung: Der Prozess wurde aufgrund einer unbehandelten Ausnahme beendet.
Ausnahmeinformationen: System.ObjectDisposedException
Stapel:
   bei System.Runtime.InteropServices.SafeHandle.DangerousAddRef(Boolean ByRef)
   bei System.StubHelpers.StubHelpers.SafeHandleAddRef(System.Runtime.InteropServices.SafeHandle, Boolean ByRef)
   bei Microsoft.Win32.UnsafeNativeMethods.GetOverlappedResult(Microsoft.Win32.SafeHandles.SafeFileHandle, System.Threading.NativeOverlapped*, Int32 ByRef, Boolean)
   bei System.IO.Ports.SerialStream+EventLoopRunner.WaitForCommEvent()
   bei System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   bei System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   bei System.Threading.ThreadHelper.ThreadStart() 
```

我完全不知道在哪里寻找这个错误......

编辑2：

我现在使用了那个 SafeSerialStream，并且错误发生在那里：

```
protected override void Dispose(bool disposing)
        {
            if (disposing && (base.Container != null))
            {
                base.Container.Dispose();
            }
            try
            {
                if (theBaseStream.CanRead)
                {
                    theBaseStream.Close();
                    GC.ReRegisterForFinalize(theBaseStream);
                }
            }
            catch
            {
                // ignore exception - bug with USB - serial adapters.
            }
            base.Dispose(disposing);
        } 
```

代码在尝试执行后恰好崩溃`theBaseStream.Close();`，即使它在一个`try{] catch{}`块中。我能做些什么呢？

编辑3：

崩溃时的控制台输出：

```
A first chance exception of type 'System.IO.IOException' occurred in System.dll
A first chance exception of type 'System.IO.IOException' occurred in System.dll
A first chance exception of type 'System.InvalidOperationException' occurred in System.dll
'EyeScanner.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Transactions.resources\v4.0_4.0.0.0_de_b77a5c561934e089\System.Transactions.resources.dll'
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord>
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unbehandelte Ausnahme</Description><AppDomain>EyeScanner.vshost.exe</AppDomain><Exception><ExceptionType>System.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</Message><StackTrace>   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</StackTrace><ExceptionString>System.NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei System.StubHelpers.StubHelpers.CheckCollectedDelegateMDA(IntPtr pEntryThunk)</ExceptionString></Exception></TraceRecord> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:55:00.860

最终，我用于处理 USB/串行端口问题（一直令人头疼）的解决方案是将处理串行端口的代码部分分离为一个完全独立的进程，该进程使用 WCF 公开服务。WCF 服务可以公开直接（或几乎直接 - 这是为较低级别的东西添加一些抽象）映射到串行端口接口功能的方法，如果进程失败，你可以从你的 main 重新启动它没有主应用程序的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:31:41.170

这看起来像线程上未处理的异常正在杀死您的进程。此行为在 MSDN [here中进行了描述](http://msdn.microsoft.com/en-gb/library/ms228965%28v=vs.90%29.aspx)

作为测试，通过文章中描述的应用程序配置文件调用旧的异常处理策略。在该`<runtime>`部分中，添加以下设置：

```
<legacyUnhandledExceptionPolicy enabled="1"/> 
```

然后查看您是否`catch`发现异常，或者至少是否将异常堆栈跟踪写入控制台。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:36:35.137

也许，你没有捕捉到异常，因为你没有在 try-catch 中得到它？以防万一，可以肯定......你能把线 `Mutex m = new Mutex(false, "EyeScannerByOphthaMetrics", out isNew);` 放在你的try块里吗？

# android - 来自 NDK 的回调未在 java 中找到方法

> ID：15904856
> 
> 赞同：2
> 
> 时间：2013-04-09T14:36:00.560
> 
> 标签：android, callback, android-ndk, java-native-interface

我试图在 JNI/NDK 和 android 中实现回调。但是我无法获得方法签名或正确的东西，为什么找不到方法？

我的 MainActivity 实例调用 ndk 函数：

```
 void populate(JNIEnv* aEnv, jobject aObj, jstring str){

     ....

    jclass cls = aEnv->FindClass("com/example/jsonpoco/MainActivity");
    jmethodID mid = aEnv->GetMethodID(cls, "add", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;D;D)V");
    std::list<MyRefComplexType>::iterator it = ref->myRefs.begin();
    for(int i = 0; i < ref->myRefs.size()/100;i++){
      std::advance(it, 1);
      printf(it->getMyNo().c_str()); //<-Works
      jstring myNo = aEnv->NewStringUTF(it->getMyNo().c_str());
      jstring myName = aEnv->NewStringUTF(it->getMyName().c_str());
      jstring myUrl = aEnv->NewStringUTF(it->getMyUrl().c_str());
      aEnv->CallVoidMethod(aObj,mid, myNo, myName, myUrl, it->getMyLocation()->getLatitude(), it->getMyLocation()->getLongitude());

} 
```

我调用 Native 代码的 Java 类实现了以下处理回调的方法：

```
 public void add(String myNo, String myName,String myUrl, double lat, double lon){
    storesWrapper.add(storeNo, storeName, storeUrl, lat, lon);
} 
```

我收到以下错误：

```
04-09 16:31:42.431: W/dalvikvm(25852): JNI WARNING: JNI method called with exception pending
04-09 16:31:42.431: W/dalvikvm(25852):              in Lcom/example/jsonpoco/MainActivity;.json_parse:(Ljava/lang/String;)V (NewStringUTF)
04-09 16:31:42.431: W/dalvikvm(25852): Pending exception is:
04-09 16:31:42.431: I/dalvikvm(25852): java.lang.NoSuchMethodError: no method with name='add' signature='(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;D;D)V' in class Lcom/example/jsonpoco/MainActivity; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:54:04.450

方法签名应该是

```
(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;DD)V 
```

D后面有一个分号，这是错误的。

# jquery - JqPlot：悬停在图例上时突出显示系列

> ID：15904860
> 
> 赞同：2
> 
> 时间：2013-04-09T14:36:06.363
> 
> 标签：jquery, jqplot

我今天花了一些时间安静地找到以下内容，但没有成功：

当悬停在其图例条目上时，我希望趋势系列能够获得与悬停在其自身上相同的亮点：

***悬停图例 -> 突出显示系列***。

关于如何做到这一点的任何想法？

反过来：***悬停系列 -> 突出显示图例***

我通过使用这样的 jqplotDataHighlight 事件处理程序来完成这项工作

`$('#trendgraph').bind('jqplotDataHighlight', function (ev, seriesIndex, pointIndex, data)`...

对于饼图和条形图，这是可行的。但它不适用于趋势图？

感谢所有帮助

# sql-server - 没有分组依据的最大sql服务器

> ID：15904867
> 
> 赞同：3
> 
> 时间：2013-04-09T14:36:16.973
> 
> 标签：sql-server, tsql, group-by

```
 CallID  StartTime           EndTime                 Querytime
    1692    2012-11-20 11:52:00.000 2012-11-20 11:52:00.300 0.300
    1693    2012-11-20 11:52:00.000 2012-11-20 11:52:00.100 0.100
    1694    2012-11-20 11:52:00.000 2012-11-20 11:52:00.400 1.5
    1695    2012-11-20 11:52:01.000 2012-11-20 11:52:01.400 3
    1696    2012-11-20 11:52:01.000 2012-11-20 11:52:01.300 5 
```

我想获得按 StartTime 分组的最大查询时间，如下所示，但我仍然希望显示 CallID。

```
 StartTime                  MaxQueryTime
     2012-11-11 19:04:07.000    0.300
     2012-11-11 19:04:10.000    0.200
     2012-11-11 19:08:48.000    0.300
     2012-11-11 19:08:51.000    0.300
     2012-11-11 19:09:27.000    0.100

     SELECT     StartTime, MAX(Querytime) AS QueryTime
     FROM         dbo.Calls
     GROUP BY StartTime 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:38:04.440

```
WITH records
AS
(
    SELECT  CallID, StartTime, EndTime, QueryTime,
            DENSE_RANK() OVER (ORDER BY QueryTime DESC) rn
    FROM    TableName
)
SELECT CallID, StartTime, EndTime, QueryTime
FROM records
WHERE rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e749a/2)
*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:52:43.623

```
select CallID, StartTime, max(QueryTime) over (partition by StartTime) as QueryTime
from (
    SELECT CallID, StartTime, MAX(Querytime) as QueryTime
    FROM dbo.Calls
    GROUP BY CallID, StartTime
 ) t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:50:00.687

试试这个：

> 从 dbo.Calls 中选择 CallID、StartTime、EndTime、QueryTime
> 作为 CLL
> ，其中 CLL.QueryTime =
> 
> > （从 dbo.Calls 中选择前 1 个 dbo.Calls.QueryTime，其中 dbo.Calls.StartTime = CLL.StartTime order by dbo.Calls.QueryTime desc）
> 
> group by CLL.CallID,CLL.StartTime,CLL.EndTime,CLL.QueryTime
> order by CLL.StartTime -- 你可以拒​​绝这行

# xsl-fo - XSL-FO 使用空表单元格和领导者

> ID：15904875
> 
> 赞同：0
> 
> 时间：2013-04-09T14:36:36.280
> 
> 标签：xsl-fo, apache-fop

我正在使用带引线的表格列（虚线）在不同单元格中的内容之间创建视觉连接。例如：

```
Text in col one..........Text in col two 
```

我使用“间隔”列在不同单元格中的文本之间保持空格，并且间隔列有一个虚线前导。

我的问题是，根据第一列中的实际文本，在第 1 列的前导之后和第 2 列之前会有一个空格，例如

```
Text in col one.....  .....Text in col two 
```

有时将没有空间，但有时空间将几个像素。

示例代码：

```
<fo:table table-layout="fixed" width="100%" margin-left="0"
    margin-right="0" padding-before="0" padding-after="0"
    border-width="0" font-family="Franklin" font-size="12pt">
    <fo:table-column column-width="50mm" /> 
    <fo:table-column column-width="10mm" />
    <fo:table-column column-width="50mm" /> 
    <fo:table-body>

        <fo:table-row>
            <fo:table-cell display-align="after">
                <fo:block text-align-last="justify">
                    <xsl:text>Text in col1</xsl:text>   
                    <fo:leader leader-pattern="dots" />             
                </fo:block>
            </fo:table-cell>                                
            <fo:table-cell display-align="after">
                <fo:block text-align-last="justify">                                       
                    <fo:leader leader-pattern="dots" />             
                </fo:block>
            </fo:table-cell>                                
            <fo:table-cell display-align="after">
                <fo:block>
                    <xsl:text>Text in col2</xsl:text>                                                       
                </fo:block>
            </fo:table-cell>
        </fo:table-row>                         
    </fo:table-body>
</fo:table> 
```

有谁知道如何摆脱那个烦人的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T20:07:57.273

我得到了这个工作。基本上只是删除了中间列，并将最后一列设置为完全对齐，并在文本前面有一个领导者。

```
<fo:table table-layout="fixed" width="100%" margin-left="0" margin-right="0" padding-before="0" padding-after="0" border-width="0" font-family="Franklin" font-size="12pt"> 
    <fo:table-column column-width="50mm" /> 
    <fo:table-column column-width="50mm" /> 
    <fo:table-body> 
        <fo:table-row> 
            <fo:table-cell display-align="after"> 
                <fo:block text-align-last="justify">
                    <xsl:text>Text in col1</xsl:text> 
                    <fo:leader leader-pattern="dots" />
               </fo:block> 
            </fo:table-cell> 
            <fo:table-cell display-align="after"> 
                <fo:block text-align-last="justify"> 
                       <fo:leader leader-pattern="dots" />
                       <xsl:text>Text in col2</xsl:text> 
                </fo:block> 
            </fo:table-cell> 
        </fo:table-row> 
    </fo:table-body> 
</fo:table> 
```

# asp.net-mvc-4 - ASP.NET MVC 4中PartialView的HttpPost方法

> ID：15904880
> 
> 赞同：0
> 
> 时间：2013-04-09T14:36:57.347
> 
> 标签：asp.net-mvc-4, http-post, partial-views

我有一个包含两个部分视图的视图。其中一个用于创建，另一个是创建的（公司）列表。我的问题是，当我尝试创建`HttpPost`方法不起作用并再次调用索引方法时。请帮我解决这个问题。这是我的索引视图

```
@model InvoiceModel.HelperClasses.CompanyViewModel

@{
    ViewBag.Title = "Companies";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="companies">
    <div id="create">@Html.Partial("CreateCompany", Model.Create)</div>
    <div id="list">@Html.Partial("CompanyTable", Model.Companies)</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:49:34.567

使用 @Html.BeginForm() 定义您正在创建的模型，以便在发布时将其全部正确映射。

```
@using (Html.BeginForm("(Action)", "(Controller)", FormMethod.Post, null))
{
    (Your model here)

    <input type="submit" value="Save" />
}

<div id="list">@Html.Partial("CompanyTable", Model.Companies)</div> 
```

# python - Django 尝试在 id（主键）字段中添加空值

> ID：15904886
> 
> 赞同：1
> 
> 时间：2013-04-09T14:37:17.850
> 
> 标签：python, django, postgresql

我创建了我的模型，一切运行顺利，但我必须创建另一个字段，所以我创建了它并将其添加到模型定义中。之后（我不是 100% 这是原因）Django 的管理员尝试在 ID 字段中添加 NULL 值。

初始型号：

```
class Image(models.Model):
    setid = models.ForeignKey(Imageset, null=False)
    originalwidth = models.PositiveIntegerField(editable=False)
    originalheight = models.PositiveIntegerField(editable=False)
    originalimage = models.ImageField('Imagem', upload_to=image_upload_to, height_field='originalheight', width_field='originalwidth')
    alt = models.CharField('Alt', max_length=128, help_text='ALT da imagem', null=False, blank=False)
(removed from brevity...)

    def save(self):
        super(Image, self).save()
        self.create_thumbnail() 
```

然后我添加了这个字段

```
thumbnail = models.ImageField(max_length=128, null=True, editable=False, upload_to=True) 
```

并在数据库中手动添加缩略图字段。

管理员对更新工作非常好，但它拒绝添加新记录。错误是“ `Violation of non-null constraint". DETAIL: Failing row contains (null, 1, 700, 701, f/3/f3d4357f7c697aa08dc65f7d866cc30d_14.jpg, ddd, , )`。

create_thumbnail 方法很好，我只是将其删除，删除了自定义保存，但似乎没有任何效果。

根据该消息，Django 正在尝试运行如下内容：

```
INSERT INTO "public"."imageset_image" ("id","setid_id","originalwidth","originalheight","originalimage","alt")
VALUES (null, 1, 999, 999, 'a/4/a49ba4fc8cbc32f760cb51d84cf9d0cc.jpg', 'alt') 
```

这有点愚蠢并产生相同的错误。但是，当我尝试做正确的 SQL

```
INSERT INTO "public"."imageset_image" ("setid_id","originalwidth","originalheight","originalimage","alt")
VALUES (1, 999, 999, 'a/4/a49ba4fc8cbc32f760cb51d84cf9d0cc.jpg', 'alt') 
```

又是错误。

似乎由于某种原因Postgresql忘记了SERIAL，即使它们在那里

```
SELECT * FROM information_schema.sequences WHERE sequence_catalog='catalogname' AND sequence_schema='public' AND sequence_name='imageset_image_id_seq' 
```

有任何想法吗？它工作正常，我添加了几条记录......提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:13:01.503

添加模型字段后，您是否迁移了数据库？我建议您在未来考虑使用[South](http://south.readthedocs.org/en/latest/)进行迁移。这很棒。[这个问题](https://stackoverflow.com/questions/1985383/update-django-database-to-reflect-changes-in-existing-models)很好地涵盖了这个话题。

除此之外，在第二段代码中，您似乎在插入 setid_id 而不是 id 本身。如果您仍想走手动路线，请尝试：

```
INSERT INTO "public"."imageset_image" ("id", "setid_id","originalwidth","originalheight","originalimage","alt")
VALUES (1, 1, 999, 999, 'a/4/a49ba4fc8cbc32f760cb51d84cf9d0cc.jpg', 'alt') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:02:50.860

经过几次测试并深入了解我的主要嫌疑人：Postgresql，我找到了解决方案：

```
ALTER TABLE imageset_image ALTER COLUMN id SET DEFAULT nextval('imageset_image_id_seq'::regclass); 
```

现在的问题是：因为它以前可以工作并且我一直在使用管理员。为什么会这样？也许添加新字段后Django的syncdb正在擦除id字段的默认值？这是不应该发生的。

# javascript - 不添加最后一个元素

> ID：15904887
> 
> 赞同：2
> 
> 时间：2013-04-09T14:37:23.317
> 
> 标签：javascript, jquery, html

```
<div id="container">
    <div class="sub">a</div>

    <span id="add">add</span>
</div>            

$('#add').click(function(){
   $('#container').append('<div class="sub">a</div>');
}) 
```

这个附加元素到底部的#container。如何在没有最后一个元素（#add）的情况下在底部添加这个元素？我希望总是在底部添加#add。

小提琴：http: [//jsfiddle.net/nk67d/](http://jsfiddle.net/nk67d/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:39:37.017

使用[`.before()`](http://api.jquery.com/before/)，它在匹配的元素之前添加标记。

```
$('#add').before('<div class="sub">a</div>'); 
```

要完成答案：

```
$('#add').click(function(){
   $(this).before('<div class="sub">a</div>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:39:48.687

使用[insertBefore(target)](http://api.jquery.com/insertBefore/)；

```
$('<div class="sub">a</div>').insertBefore("#add"); 
```

你也可以使用[before()](http://api.jquery.com/before/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:39:53.603

使用[`.before()`](http://api.jquery.com/before/)方法`div`在添加按钮之前插入

```
$('#add').click(function(){
   $(this).before('<div class="sub">a</div>');  
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T14:40:10.537

```
$('#add').click(function(){
   $(this).before('<div class="sub">a</div>');
}) 
```

[**在这里演示**](http://jsfiddle.net/nk67d/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:38:22.947

尝试

```
$("#add").prepend('<div class="sub">a</div>'); 
```

见小提琴：http: [//jsfiddle.net/nk67d/1/](http://jsfiddle.net/nk67d/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T14:40:46.910

```
$('#add').click(function(){
    $('#container #add').before('<div class="sub">abcd</div>');
}) 
```

# html - 哪些手机浏览器支持 使用 html5 视频时

> ID：15904888
> 
> 赞同：0
> 
> 时间：2013-04-09T14:37:35.587
> 
> 标签：html, html5-video

我正在寻找有关当前支持该标签的浏览器的资源。有哪些选择？它是否可以在手机上以任何方式使用，我很难看到文本是可读的。在具有更大屏幕的平板电脑上，它会更有意义。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T16:51:24.130

这是迄今为止我发现的用于总结跨浏览器支持的最佳表格：[http ://www.longtailvideo.com/html5/#texttrack](http://www.longtailvideo.com/html5/#texttrack)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:49:00.520

[Caniuse.com](http://caniuse.com)非常适合找出哪些浏览器支持什么。这是[视频标签的链接](http://caniuse.com/#feat=video)

# iphone - 裁剪图像后图像模糊？

> ID：15904895
> 
> 赞同：3
> 
> 时间：2013-04-09T14:37:54.073
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我正在裁剪从相机拍摄的图像。一切都很好。但裁剪后图像似乎变得模糊和拉伸。

```
CGRect rect = CGRectMake(20,40,280,200);
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();

// translated rectangle for drawing sub image 
CGRect drawRect = CGRectMake(-rect.origin.x, -rect.origin.y,280,200);

// clip to the bounds of the image context
// not strictly necessary as it will get clipped anyway?
CGContextClipToRect(context, CGRectMake(0, 0, rect.size.width, rect.size.height));

// draw image
[image drawInRect:drawRect];

// grab image
UIImage* croppedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
CGSize size = [croppedImage size];
NSLog(@" = %@",NSStringFromCGSize(size));
NSData* pictureData = UIImagePNGRepresentation(croppedImage); 
```

谁能帮我找出我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:19:52.520

尝试更换

```
UIGraphicsBeginImageContext(rect.size); 
```

和

```
UIGraphicsBeginImageContextWithOptions(rect.size, NO, [[UIScreen mainScreen] scale]); 
```

考虑视网膜

# c++ - 动态数组上基于范围的for循环？

> ID：15904896
> 
> 赞同：28
> 
> 时间：2013-04-09T14:37:54.307
> 
> 标签：c++, arrays, c++11, foreach, dynamic-arrays

有一个基于范围的 for 循环，语法如下：

```
for(auto& i : array) 
```

它适用于常量数组，但不适用于基于指针的动态数组，例如

```
int *array = new int[size];
for(auto& i : array)
   cout<< i << endl; 
```

它给出了关于替换失败的错误和警告，例如：

> 错误] C:\Users\Siegfred\Documents\C-Free\Temp\Untitled2.cpp:16:16: 错误：没有匹配的函数调用 'begin(int*&)'

如何将这种新语法与动态数组一起使用？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-10T07:42:14.610

要使用*基于范围的 for 循环*，您必须提供`begin()`and`end()`成员函数或重载非成员`begin()`and`end()`函数。在后一种情况下，您可以将您的范围包装在 a`std::pair`和重载中`begin()`，并且`end()`对于那些：

```
 namespace std {
        template <typename T> T* begin(std::pair<T*, T*> const& p)
        { return p.first; }
        template <typename T> T* end(std::pair<T*, T*> const& p)
        { return p.second; }
    } 
```

现在您可以像这样使用 for 循环：

```
 for (auto&& i : std::make_pair(array, array + size))
        cout << i << endl; 
```

请注意，非成员`begin()`和`end()`函数必须在`std`此处的命名空间中重载，因为`pair`也位于命名空间中`std`。如果您不想篡改标准命名空间，您可以简单地创建自己的小对类`begin()`并`end()`在您的命名空间中重载。

或者，围绕动态分配的数组创建一个瘦包装器并提供`begin()`和`end()`成员函数：

```
 template <typename T>
    struct wrapped_array {
        wrapped_array(T* first, T* last) : begin_ {first}, end_ {last} {}
        wrapped_array(T* first, std::ptrdiff_t size)
            : wrapped_array {first, first + size} {}

        T*  begin() const noexcept { return begin_; }
        T*  end() const noexcept { return end_; }

        T* begin_;
        T* end_;
    };

    template <typename T>
    wrapped_array<T> wrap_array(T* first, std::ptrdiff_t size) noexcept
    { return {first, size}; } 
```

您的呼叫站点如下所示：

```
 for (auto&& i : wrap_array(array, size))
         std::cout << i << std::endl; 
```

[例子](http://liveworkspace.org/code/3rzx8X$3)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-09T14:40:39.400

您不能将 range-for-loop 与动态分配的数组一起使用，因为编译器无法推断该数组的开始和结束。您应该始终使用容器来代替它，例如[`std::vector`](http://en.cppreference.com/w/cpp/container/vector).

```
std::vector<int> v(size);
for(const auto& elem: v)
    // do something 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-09T14:48:38.397

您不能直接在动态分配的数组上执行基于范围的循环，因为您所拥有的只是指向第一个元素的指针。没有关于编译器可以用来执行循环的大小的信息。惯用的 C++ 解决方案是将动态分配的数组替换为`std::vector`：

```
std::vector<int> arr(size);
for(const auto& i : arr)
  std::cout<< i << std::endl; 
```

或者，您可以使用基于指针和偏移量提供开始和结束迭代器的范围类型。[查看boost.range](https://www.boost.org/doc/libs/1_67_0/libs/range/doc/html/index.html)库或[GSL](https://github.com/isocpp/CppCoreGuidelines/blob/master/docs/gsl-intro.md) span 提案中的一些类型（此处为示例实现，[此处](https://github.com/Microsoft/GSL)为 C++20 建议类型的参考[）](https://en.cppreference.com/w/cpp/container/span)。

* * *

请注意，基于范围的 for 循环确实适用于`std::array`固定大小的普通数组的对象：

```
std::array<int,10> arr;
for(const auto& i : arr)
  std::cout<< i << std::endl;

int arr[10] = .... ;
for(const auto& i : arr)
  std::cout<< i << std::endl; 
```

但在这两种情况下，大小都需要是编译时常量。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-05-22T16:12:02.183

C++20 将（可能）添加[`std::span`](http://en.cppreference.com/w/cpp/container/span)，它允许像这样循环：

```
#include <iostream>
#include <span>

int main () {
    auto p = new int[5];
    for (auto &v : std::span(p, 5)) {
        v = 1;
    }
    for (auto v : std::span(p, 5)) {
        std::cout << v << '\n';
    }
    delete[] p;
} 
```

当前编译器支持这一点，例如[gcc 10.1](https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html)和[clang 7.0.0](https://libcxx.llvm.org/cxx2a_status.html)及更高版本。（[直播](https://libcxx.llvm.org/cxx2a_status.html)）

当然，如果您可以选择，最好`std::vector`从一开始就使用 C 样式的数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-25T00:31:26.257

如前所述`std::begin`，您可以[使用](https://stackoverflow.com/a/15919834/8414561)：`std::end`_ `std::pair`_ `std::`_ [_](https://en.cppreference.com/w/cpp/language/extending_std)`boost::make_iterator_range`

```
size_t size = 16;
int *dynamic_array = new int[size];
for (const auto& i : boost::make_iterator_range(dynamic_array, dynamic_array + size))
    std::cout << i << std::endl; 
```

[活生生的例子](http://coliru.stacked-crooked.com/a/a4203299dec0b222)。

# iphone - 基于自定义线性渐变的 UILabel 文本颜色

> ID：15904908
> 
> 赞同：5
> 
> 时间：2013-04-09T14:38:21.763
> 
> 标签：iphone, colors, uilabel, gradient

所以我想根据在 Photoshop 中制作的渐变为 UILabel 设置文本颜色。我有渐变的 rgb 值，{211,119,95} 和 {199,86,56}。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-14T19:49:23.713

如果您想定位 iOS 6+，另一种方法是 UIColor 的类别

您从渐变创建 UIColor：

```
+ (UIColor*) gradientFromColor:(UIColor*)c1 toColor:(UIColor*)c2 withHeight:(int)height
{
  CGSize size = CGSizeMake(1, height);
  UIGraphicsBeginImageContextWithOptions(size, NO, 0);
  CGContextRef context = UIGraphicsGetCurrentContext();
  CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();

  NSArray* colors = [NSArray arrayWithObjects:(id)c1.CGColor, (id)c2.CGColor, nil];
  CGGradientRef gradient = CGGradientCreateWithColors(colorspace, (CFArrayRef)colors, NULL);
  CGContextDrawLinearGradient(context, gradient, CGPointMake(0, 0), CGPointMake(0, size.height), 0);

  UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

  CGGradientRelease(gradient);
  CGColorSpaceRelease(colorspace);
  UIGraphicsEndImageContext();

  return [UIColor colorWithPatternImage:image];
} 
```

然后用 attrString 作为你的 NSMutableAttributeString：

```
[attrString addAttribute:NSForegroundColorAttributeName value:[UIColor gradientFromColor:[UIColor greenColor] toColor:[UIColor redColor] withHeight:labelView.height] range:defaultRange];
labelView.attributedString = attrString; 
```

或者如果您不需要笔触或其他样式效果，则只需设置 textColor

```
labelView.textColor = [UIColor gradientFromColor:[UIColor greenColor] toColor:[UIColor redColor] withHeight:labelView.height]; 
```

瞧，它在 UILabel 超过一行时效果更好，否则您必须根据字体（UIFont.leading）计算行高并将其传递给方法，背景将垂直重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:48:26.077

您可能希望使用以下可自定义标签之一：

*   [FX标签](http://www.cocoacontrols.com/controls/fxlabel)
*   [左效果标签](http://www.cocoacontrols.com/controls/leffectlabel)
*   [THL标签](http://www.cocoacontrols.com/controls/thlabel)

# applescript - Applescript 有行数限制。

> ID：15904917
> 
> 赞同：0
> 
> 时间：2013-04-09T14:38:40.233
> 
> 标签：applescript, limit, lines

我正在制作一个具有大量功能的应用程序。我的问题是 applescript 似乎有一个截止点。在一定数量的行之后，脚本停止工作。它基本上只工作到最后。一旦它到达那个点，它就会停止。我已经移动了代码以确保它不是代码中的错误。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:19:56.733

我可能错了，但我相信长脚本不是放置代码的好方法。这真的很难阅读、调试或维护，因为一个部分的微小变化可能会对文件的另一部分产生意想不到的后果。

如果您的脚本很长，我建议您将代码分成多个部分。

首先，如果代码的某些部分被多次重用，您可以使用函数。这些函数的另一个好处是您可以将它们与其余的执行代码分开验证。此外，它使您的代码更易于阅读。

```
on doWhatYouHaveTo(anArgument)
 say "hello!"
end doWhatYouHaveTo 
```

如果这些函数被不同的脚本使用，您可能希望将您的函数放在一个单独的库中，以便在需要时调用。

```
set cc to load script alias ((path to library folder as string) & "Scripts:Common:CommonLibrary.app")
cc's doWhatYouHaveTo(oneArgument) 
```

最后，我有时会做的一件事是使用一些参数调用不同的脚本，如果长代码适合稍微不同的目的：

```
run script file {mainFileName} with parameters {oneWay} 
```

这最后一个技巧有一个巨大而奇怪的好处：它可以加速执行时间，原因我从未解释过（当我说加速时，我说对于相同的代码将执行时间减少 17 左右）。

# vsto - 如何在 Outlook 插件中更改邮件正文时收到通知？

> ID：15904919
> 
> 赞同：1
> 
> 时间：2013-04-09T14:38:46.390
> 
> 标签：vsto, outlook-addin

我有一个前景添加，我希望能够在邮件项的消息正文达到一定数量的单词时向用户提供单词计数器或通知。

`OlkTexxtBox`是否有任何与for上存在的 Change-event 类似的事件`_DDocSiteControl`可用于此目的？

# jquery - Jquery toggle li 基于 data-max 和 data-min 并带有验证消息

> ID：15904920
> 
> 赞同：0
> 
> 时间：2013-04-09T14:38:46.797
> 
> 标签：jquery, checkbox, toggle

*   我希望能够选择图像（li），选择项的数量取决于（主 div）上的 data-max 和 data-min

问题出在所选功能中，我正在删除列表中项目的选中状态和所选类别

所以它一直有效，直到我选择了顶部然后它变得混乱我需要将验证更改为只返回 true 或 false

**演示** [http://jsfiddle.net/XeELs/346/](http://jsfiddle.net/XeELs/346/)

**JS**

```
(function () {

    var mobileForms = (function () {

        return {

            model: {
                selection: {
                    validate: {
                        test: function (e) {
                            var that = this,
                                modelSelector = $('.divModelOptions'),
                                chosen = $('input:checked', modelSelector),
                                messages = $('.message', modelSelector),
                                minMessage = $('.min', modelSelector),
                                maxMessage = $('.max', modelSelector);

                            if (typeof (that.messageDisplayTime) !== 'undefined') clearTimeout(that.messageDisplayTime);
                            if (chosen.length >= that.min && chosen.length <= that.max) {
                                messages.slideUp(200);
                                return true;
                            } else if (chosen.length > that.max) {

                                if (that.max > 1) {
                                    maxMessage.slideDown(400, function () {
                                        that.messageDisplayTime = setTimeout(function () {
                                            maxMessage.slideUp(200);
                                        }, 3000);
                                    });

                                    if (typeof (e) !== 'undefined') e.preventDefault();
                                    return false;
                                } else {
                                    chosen[0].checked = false;
                                    chosen.parents('li').removeClass('selected');
                                    return true;
                                }

                            } else {
                                minMessage.slideDown(400);

                                return 'fail';
                            }
                        },
                        init: function () {
                            var modelSelector = $('.divModelOptions'),
                                html = '';

                            this.min = parseInt(modelSelector.attr('data-min'), 10);
                            this.max = parseInt(modelSelector.attr('data-max'), 10);

                            html = '\
                                <ul class="validation">\
                                    <li class="message min">' + modelSelector.attr('data-min-msg') + '</li>\
                                    <li class="message max">' + modelSelector.attr('data-max-msg') + '</li>\
                                </ul>';

                            modelSelector.prepend(html);
                        }
                    },
                    bindHandlers: function () {
                        var that = this,
                            modelSelector = $('.divModelOptions'),
                            chosen = $('input:checked', modelSelector);
                        var max = parseInt(modelSelector.attr('data-max'), 2);

                        $('input', modelSelector).click(function (e) {
                            var parent = $(this).parents('li');

                            if (that.validate.test(e)) {
                                if (parent.hasClass('selected')) {
                                    parent.removeClass('selected');
                                } else {
                                    parent.addClass('selected');
                                }
                            }
                        });

                        if (chosen.length) {
                            chosen.parents('li').addClass('selected');
                            that.validate.test();
                        }

                        $('form').submit(function (e) {
                            if (!that.validate.test() || that.validate.test() === 'fail') e.preventDefault();
                        });
                    },
                    init: function () {
                        this.validate.init();
                        this.bindHandlers();
                    }
                },
                nextButton: {
                    bindHandlers: function (button) {
                        button.one('click', function () {
                            mobileForms.showNextStep();
                        });
                    },
                    create: function () {
                        var nextCommandText = $('.divModelOptions').data('nextcommand');

                        // TODO: Next button should start off grey and become blue once a model is selected.
                        var button = $('<input type="button" value="' + nextCommandText + '" class="next-button">');

                        $('.divModelOptions').append(button);
                        this.bindHandlers(button);
                    },
                    init: function () {
                        this.create();
                    }
                },
                init: function () {
                    this.selection.init();
                    this.nextButton.init();
                }
            },
            validation: {
                focusOnError: function (messages) {
                    var message = $(messages[0]);
                    $('html, body').animate({
                        scrollTop: message.offset().top - 100
                    }, 500);
                },
                init: function () {
                    var visibleMessages;
                    $('form').submit(function () {
                        visibleMessages = $('.validation-message:visible, .validation .message:visible');
                        if (visibleMessages.length) {
                            mobileForms.validation.focusOnError(visibleMessages);
                        }
                    });
                }
            },
            init: function () {
                this.model.init();
                this.validation.init();
            }
        };

    })();

    $(function () {
        mobileForms.init();
    });

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:33:45.480

有问题的代码很难理解，因为有很多函数并不是问题的一部分。自动隐藏错误消息元素也令人困惑，特别是因为`setTimeout()`可以通过多次单击来附加多个功能。

通过将您的 CSS 设置为：

```
.divModelOptions input {
    display: block;
} 
```

仅在以下情况`data-min="1"`下才会出现问题：`data-max="1"``else`

```
if (that.max > 1) {
} else {
    chosen[0].checked = false;
    chosen.parents('li').removeClass('selected');
    return true;
} 
```

这是因为`that.max === 1`所以^(第二)个点击的项目总是导致第*一个* `<input>`的*选中*属性设置为false，无论点击了哪个项目，然后**所有** `<li>`父母都`selected`删除了该类。但是，既然你`return true;`那么调用代码的逻辑`if`条件就满足了。

```
if (that.validate.test(e)) {
    if (parent.hasClass('selected')) {
        parent.removeClass('selected');
            //remove check status to input
    } else {
        parent.addClass('selected');
        //add check status to input
    }
} 
```

它将`selected`类添加到新选择的`<li>`.

请注意，您会得到不同的不一致行为，具体取决于第一个`<li>`选择**是否**是第一个选择。如果您先选择第 2 ^、第3^或^第4 。

我试图减少答案中的代码，以解决如果所选项目的数量低于或超过定义的范围时显示消息的问题。所以它可能不是你所追求的，但它应该是一个（希望）更简化的起点。

[**jsFiddle 演示**](http://jsfiddle.net/ZqPKN/1/)

**JavaScript**

```
(function () {
    var mobileForms = (function () {
        return {
            model: {
                selection: {
                    validate: {
                        inRange: function (e) {
                            var self = this,
                                chosen = $('input:checked', self.modelSelector),
                                minMessage = $('.min', self.modelSelector),
                                maxMessage = $('.max', self.modelSelector);

                            if (chosen.length === 0 || (chosen.length >= self.min && chosen.length <= self.max)) {
                                self.validation.slideUp(200);
                            } else {
                                maxMessage.toggle(chosen.length > self.max);
                                minMessage.toggle(chosen.length < self.min);
                                self.validation.slideDown(400);
                            }

                            return chosen.length <= self.max;
                        },
                        init: function () {
                            this.modelSelector = $('.divModelOptions');
                            this.validation = $('.validation', this.modelSelector);
                            this.min = parseInt(this.modelSelector.data('min'), 10);
                            this.max = parseInt(this.modelSelector.data('max'), 10);
                            this.validation.slideUp();

                            $('.min span').text(this.min);
                            $('.max span').text(this.max);
                        }
                    },
                    bindHandlers: function () {
                        var self = this;

                        $('input', this.modelSelector).click(function (e) {
                            var parent = $(this).closest('li');
                            parent.toggleClass('selected');
                            if (!self.validate.inRange()) {
                                parent.removeClass('selected');
                                return false; // stop checkbox receiving event
                            }
                        });
                    },
                    init: function () {
                        this.validate.init();
                        this.bindHandlers();
                    }
                },
                init: function () {
                    this.selection.init();
                }
            },
            init: function () {
                this.model.init();
            }
        };

    })();

    $(function () {
        mobileForms.init();
    });
})(); 
```

为了完整性……

**CSS**（与问题相同）

```
.divModelOptions input {
    cursor: pointer;
    display: none;
    float: left;
}
.divModelOptions label {
    cursor: pointer;
}
.divModelOptions li.selected {
    border:1px solid red
}
.divModelOptions .validation li {
    display: none;
} 
```

**HTML**（使用 data-max 和 data-min 查看不同的示例）

```
<div data-max="2" data-min="2" class="divModelOptions">
    <ul class="validation">
        <li class="message min">At least <span></span> should be selected</li>
        <li class="message max">No more than <span></span> should be selected</li>
    </ul>
    <ul>
        <li>
            <label>
                <img alt="" src="http://placehold.it/30x30" />
                <input type="checkbox" id="Model" value="Model" name="Model" /><span rel="Model">Model</span>
            </label>
        </li>
        <li>
            <label>
                <img alt="" src="http://placehold.it/30x30" />
                <input type="checkbox" id="Model2" value="Model2" name="Model2" /><span rel="Model2">Model2</span>
            </label>
        </li>
        <li>
            <label>
                <img alt="" src="http://placehold.it/30x30" />
                <input type="checkbox" id="Model3" value="Model3" name="Model3" /><span rel="Model3">Model3</span>
            </label>
        </li>
        <li>
            <label>
                <img alt="" src="http://placehold.it/30x30" />
                <input type="checkbox" id="Model4" value="Model4" name="Model4" /><span rel="Model3">Model4</span>
            </label>
        </li>
    </ul>
</div> 
```

# vertical-alignment - css中的垂直对齐和行高

> ID：15904921
> 
> 赞同：0
> 
> 时间：2013-04-09T14:38:48.390
> 
> 标签：vertical-alignment, css

我在这里有两个可能很简单的 CSS 问题： [http ://web288.merkur.ibone.ch/klingler/](http://web288.merkur.ibone.ch/klingler/)

如何`© Klingler Fahrzeugtechnik AG 2013`使页脚中的底部垂直对齐？我尝试`align-bottom`了 p 标签的垂直对齐，但没有运气......

第二件事是，我觉得正文的行间距有点窄。我想要更大的线高。我尝试将 p 标签的 line-height 属性更改为 2.5em 而不是 1.5em 但这并没有改变任何东西？为什么是这样？

```
p {
    font-size:1em;
    line-height:1.5em;
    margin: 1.5em 0 0 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:51:29.690

做这个：

```
footer {
    position: relative;
}

.ym-g25 {
    position: absolute;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:51:46.573

做这个：

```
.ym-g25 {
width: 25%;
vertical-align: bottom;
display: table-cell;
line-height: 1;
float: none;
} 
```

# c# - 重复的 SQL 连接，我应该创建一个类吗？

> ID：15904923
> 
> 赞同：2
> 
> 时间：2013-04-09T14:38:56.577
> 
> 标签：c#, asp.net, sqlconnection

我对 c# 还是很陌生，我在一个页面上有多个计数查询。我不需要在其他任何地方使用这些查询，因此避免了创建类。尽管如此，我可以帮助但认为必须有一种更有效的方法，但我想知道那会是什么！

这是一个例子

```
 private void cntUp() {
    Dictionary<string, string> crd = getCredentials(Session["secure"].ToString());
    Label UserUpcoming = frmDash.FindControl("lblUserReviewUp") as Label;

    using (SqlConnection con = new SqlConnection(WebConfigurationManager.ConnectionStrings["CS"].ConnectionString))
    {
        con.Open();
        try
        {
            using (SqlCommand countUpcoming = new SqlCommand("SELECT COUNT(*) FROM vw_dash_user_upcoming WHERE Employee_ID = @employee_id", con))
            {
                countUpcoming.Parameters.Add(new SqlParameter("employee_id",     crd["employee_id"].ToString()));
                SqlDataReader readerUpcoming = countUpcoming.ExecuteReader();
                while (readerUpcoming.Read())
                {
                    UserUpcoming.Text = readerUpcoming.GetInt32(0).ToString();
                }
            }
            con.Close();
        }
        catch
        {
            Response.Redirect(this.ErrorPage);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:15:36.290

以下存储库适用于 SQL Server。

基本上，您可以发出常规或参数化查询。如果要使用具有强类型数字和日期的模型，您可以将参数作为所有字符串传递，或者仅作为对象传递。

如果您在开发中不使用这样的构造，您可以取出发布模式信息，这只是为了更容易在开发和生产数据库之间切换而无需编码更改。

一个示例用法是：

```
 var updateStatement = "UPDATE OCCHistoryHeaders SET ValidatingUsername=@pUsername,ValidatingWorkstation=@pWorkstation,CurrentState = @pCurrentStatus,RejectionReason = @pRejectionReason, AutomatedValidation = '0' WHERE BatchId = @pBatchId";

                var parameters = new Dictionary<string, object>
                    {
                        {"pUsername", Environment.UserName},
                        {"pWorkstation", Environment.MachineName},
                        {"pCurrentStatus", currentStatus},
                        {"pRejectionReason", rejectionReason},
                        {"pBatchId", batchId}
                    };

var absRowsUpdated = _occDb.ExecuteParameterizedNonQueryObjects(updateStatement, parameters); 
```

这里是课堂...

```
public class SomeRepository 
        {
            private  string _connectionString { get; set; }
            private  SqlConnection _sqlConnection { get; set; }

            public SomeRepository()
            {
                switch (AppSettings.ReleaseMode)
                {
                    case ReleaseMode.DEV:
                        _connectionString = "server=;database=;User Id=;Password=";
                        break;
                    case ReleaseMode.PRODUCTION:
                        _connectionString = "server=;database=;User Id=;Password=";
                        break;
                }            
            }     

            public  DataTable ExecuteQuery(string commandText)
            {
                var dataTable = new DataTable();
                var _sqlConnection = new SqlConnection(_connectionString);
                var cmd = new SqlCommand(commandText, _sqlConnection);
                var da = new SqlDataAdapter(cmd);

                try
                {              
                    _sqlConnection.Open();
                    da.Fill(dataTable);                             
                }
                catch (Exception ex)
                {
                    var errorText = string.Format("Occ Repository ExecuteQuery Error : QueryString={0} :: Error={1}", commandText, ex.Message);
                    throw new Exception(errorText, ex);
                }
                finally
                {                
                    da.Dispose();
                    _sqlConnection.Dispose();
                }

                return dataTable;
            }

            public DataTable ExecuteParameterizedQuery(string commandText, Dictionary<string, string> parameters)
            {
                var dataTable = new DataTable();
                var _sqlConnection = new SqlConnection(_connectionString);
                var cmd = new SqlCommand(commandText, _sqlConnection);

                var da = new SqlDataAdapter(cmd);
                foreach (var entry in parameters)
                {
                    cmd.Parameters.Add(entry.Key, entry.Value);
                }

                try
                {
                    _sqlConnection.Open();
                    da.Fill(dataTable);
                }
                catch (Exception ex)
                {
                    var errorText = string.Format("Occ Repository ExecuteQuery Error : QueryString={0} :: Error={1}", commandText, ex.Message);
                    throw new Exception(errorText, ex);
                }
                finally
                {
                    da.Dispose();
                    _sqlConnection.Dispose();
                }

                return dataTable;
            }

            public DataTable ExecuteParameterizedQueryObjects(string commandText, Dictionary<string, object> parameters)
            {
                var dataTable = new DataTable();
                var _sqlConnection = new SqlConnection(_connectionString);
                var cmd = new SqlCommand(commandText, _sqlConnection);

                var da = new SqlDataAdapter(cmd);
                foreach (var entry in parameters)
                {
                    cmd.Parameters.Add(entry.Key, entry.Value);
                }

                try
                {
                    _sqlConnection.Open();
                    da.Fill(dataTable);
                }
                catch (Exception ex)
                {
                    var errorText = string.Format("Occ Repository ExecuteQuery Error : QueryString={0} :: Error={1}", commandText, ex.Message);
                    throw new Exception(errorText, ex);
                }
                finally
                {
                    da.Dispose();
                    _sqlConnection.Dispose();
                }

                return dataTable;
            }

            public int ExecuteNonQuery(string commandText)
            {          
                var _sqlConnection = new SqlConnection(_connectionString);
                var rowsAffected = 0;

                try
                {              
                    var cmd = new SqlCommand(commandText, _sqlConnection);
                    _sqlConnection.Open();
                    rowsAffected = cmd.ExecuteNonQuery();
                }
                catch (Exception ex)
                {
                    var errorText = string.Format("Occ Repository ExecuteNonQuery Error : Command={0} :: Error={1}", commandText, ex.Message);
                    throw new Exception(errorText, ex);
                }
                finally
                {
                    _sqlConnection.Dispose();
                }

                return rowsAffected;
            }

            public int ExecuteParameterizedNonQuery(string commandText, Dictionary<string, string> parameters)
            {
                var _sqlConnection = new SqlConnection(_connectionString);
                var rowsAffected = 0;
                var cmd = new SqlCommand(commandText, _sqlConnection);

                foreach (var entry in parameters)
                {
                    cmd.Parameters.Add(entry.Key, entry.Value);
                }

                try
                {               
                    _sqlConnection.Open();
                    rowsAffected = cmd.ExecuteNonQuery();
                }
                catch (Exception ex)
                {
                    var errorText = string.Format("Occ Repository ExecuteNonQuery Error : Command={0} :: Error={1}", commandText, ex.Message);
                    throw new Exception(errorText, ex);
                }
                finally
                {
                    _sqlConnection.Dispose();
                }

                return rowsAffected;
            }

            public int ExecuteParameterizedNonQueryObjects(string commandText, Dictionary<string, object> parameters)
            {
                var _sqlConnection = new SqlConnection(_connectionString);
                var rowsAffected = 0;
                var cmd = new SqlCommand(commandText, _sqlConnection);

                foreach (var entry in parameters)
                {
                    cmd.Parameters.Add(entry.Key, entry.Value);
                }

                try
                {
                    _sqlConnection.Open();
                    rowsAffected = cmd.ExecuteNonQuery();
                }
                catch (Exception ex)
                {
                    var errorText = string.Format("Occ Repository ExecuteNonQuery Error : Command={0} :: Error={1}", commandText, ex.Message);
                    throw new Exception(errorText, ex);
                }
                finally
                {
                    _sqlConnection.Dispose();
                }

                return rowsAffected;
            }

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:55:18.947

如果你只做 1 个地方的东西，通常你会让一切变得不那么可读。所以我可能会避免它。然而，这是一种常见的模式，你会帮自己一个忙，为此编写一个带有一些函数的实用程序类。

```
//requires query parameters to have names @0, @1 etc in string
public static List<object[]> Query(String query, params String[] parameters) //no injection check on this string, be careful.
{
    using(SqlConnection conn = new SqlConnection(_CONN_STRING_))
    {
        conn.Open()
        using(SqlCommand cmd = new SqlCommand(query, conn))
        {
            AddSqlParams(cmd, parameters);
            return Query(cmd);
        }

    }
}

/// <summary>Generic SQL query. Requires open connection.</summary>
/// <param name="cmd">SqlCommand object with all necessary fields configured.</param>
/// <returns>A list of Object arrays (each array is one row).</returns>
private static List<Object[]> Query(SqlCommand cmd)
{
    List<Object[]> results = new List<Object[]>();
    using (SqlDataReader rdr = cmd.ExecuteReader())
    {
        while (rdr.Read())
        {
            Object[] row = new Object[rdr.VisibleFieldCount];
            rdr.GetValues(row);
            results.Add(row);
        }
        return results;
    }
}

private static void AddSqlParams(SqlCommand cmd, params String[] sqlParams)
{
    for (Int32 i = 0; i < sqlParams.Length; i++)
        cmd.Parameters.AddWithValue("@" + i, (Object)sqlParams[i] ?? DBNull.Value);
} 
```

然后像这样使用

```
UserUpcoming.Text = Query("SELECT COUNT(*) FROM vw_dash_user_upcoming WHERE Employee_ID = @0", crd["employee_id"].ToString())[0][0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:53:03.200

我喜欢为数据库中的每个表设置一个单独的类。在您的情况下，我将有一个名为 vw_dash_user_upcoming 的单独类，这将有一个类似于...的静态方法

```
public static int CountEmployees(int employeeId) {
    int returnValue;
    // do database stuff here
    return returnValue;
} 
```

我通常在我的项目中创建一个名为“数据库”的文件夹和命名空间，所有数据库的东西都放在那里。那里没有任何不是数据库访问的内容。对我来说，这确实有助于让事情井井有条，尤其是在大型项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:55:50.190

我个人会创建一个单独的类，仅仅是因为将具有完全不同职责的代码片段保留在一个类中并不是一个好主意。当分成小类时，代码更容易阅读和维护。

无论如何，与数据库的通信都应该分开，以便更容易在数据源（例如不同的数据库服务器）之间切换。

# html - 网页不使用样式表

> ID：15904924
> 
> 赞同：0
> 
> 时间：2013-04-09T14:38:57.860
> 
> 标签：html, stylesheet

我有一个情况，我想知道是否有人可以帮助我。我有一个大部分时间都能正常显示的网页。但是，有时（这种情况很少见），它不会应用 .css 文件，只是将数据转储到屏幕上。看起来 .css 没有加载。有没有办法让 .css 在实际 html 之前加载，这样就不会发生这种情况？关于如何最好地进行此操作的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:13:15.247

检查服务器上的 IIS 设置和权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:43:36.913

服务器有可能在 CSS 路径上返回 404。下载 fiddler 或使用 Web 开发工具（网络）监控它。

您需要在 body 实际启动之前加载 CSS。您的服务器可能有问题。从服务器获取 CSS 时可能会返回 404 请求。您可以联系服务器（托管）管理员以获取相同的信息。

# sql - 在 sqlite 中限制 AND 分组

> ID：15904925
> 
> 赞同：-4
> 
> 时间：2013-04-09T14:38:59.617
> 
> 标签：sql, sqlite

我试图找出一个关于 sqlite 的查询来解决我的问题并在我的老板眼中赦免我的罪过，所以......

我有一个有 70 000 000 行的表

表中的一列是域（称为域），另一列称为 sourceurl（它是完整的 url 字符串，其中列域是 url 的域）

在大多数情况下，源 URL 是唯一的，而域不是，您可以拥有来自同一域的多个源 URL。

同一个表还包含其他列，这些列是标志，例如重定向、框架、提及、nofollow、alttext

我需要的是执行以下操作的查询：

忽略结果数据中任何为空的标志，我想对所有剩余的行进行分组，但随后最多只能从每个域中选择 10 个。

所以在一天结束时，我需要来自每个域的 10 个示例 url，并且这些示例 url 需要排除不为空的标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:00:24.387

尝试这个：

```
SELECT domain,
       sourceurl
FROM MyTable AS T1
WHERE redirect <> 0  -- or whatever funny thing you want to do with the flags
  AND rowid <= IFNULL((SELECT rowid
                       FROM MyTable AS T2
                       WHERE T2.domain = T1.domain
                         AND redirect <> 0  -- same flags filter
                       ORDER BY rowid
                       LIMIT 1
                       OFFSET 9), 'inf') 
```

（您需要在列上建立一个索引`domain`，这样才能有点效率。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T14:48:26.560

*   在 SQL 末尾使用 LIMIT 10 来限制返回的行数。
*   在标志周围使用 !ifnull 函数将行限制为包含数据的行。

# android - 打开本地 HTML 文件

> ID：15904929
> 
> 赞同：0
> 
> 时间：2013-04-09T14:39:06.263
> 
> 标签：android, html, layout, webview

我在布局中有一个文本视图（称为 - t_c），代码如下： -

```
 <TextView
      android:id="@+id/GoToTCContacting"
      android:layout_width="360dp"
      android:layout_height="wrap_content"
      android:layout_marginLeft="2dp"
      android:layout_marginRight="2dp"
      android:layout_weight="2"
      android:background="@drawable/border2"
      android:clickable="true"
      android:onClick="GoToTCContacting"
      android:padding="10dp"
      android:text="Contacting"
      android:textColor="#FFF"
      android:textSize="18sp" /> 
```

我希望 textview 在单击时打开另一个布局（称为 - t_c_contacting），其中包含一个 webview，并且该 webview 可以打开我在布局文件夹中名为 con.html 的 html 文件。

这就是 t_c_contacting 布局的编码方式：-

```
 <WebView
 android:id="@+id/contactingView"
 android:layout_width="match_parent"
 android:layout_height="match_parent" /> 
```

这就是我的班级设置为打开 t_c_contacting 的方式，它工作正常，但我不知道如何用我的文件填充 webview。

```
 public void GoToTCContacting(View view)  
{  
    setContentView(R.layout.t_c_contacting); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:45:42.007

如果您已经将 HTML 存储在本地，只需调用：

```
webView.loadDataWithBaseURL(mUrl, mHtmlData, MIME_TYPE, CHARSET, ""); 
```

在哪里：

`mUrl`如果需要，可以是虚拟的 Url，也可以是页面的实际 URL，因此 WebView 可以弄清楚如何放置一些 UI 元素，例如图像。

`mHtmlData`是一个包含实际 HTML 内容的字符串。

`MIME_TYPE`是一个字符串，表示数据的 mimeType，例如：`"text/html"`

`CHARSET`是一个表示数据编码的字符串，例如：`"utf-8"`

我希望这会有所帮助。

# neo4j - Spring Data Neo4j：使用嵌入式服务器

> ID：15904931
> 
> 赞同：2
> 
> 时间：2013-04-09T14:39:15.407
> 
> 标签：neo4j, spring-data-neo4j

我正在尝试配置我的应用程序上下文，以便能够在我的应用程序中使用带有嵌入式图形的 Neo4j 服务器，但没有取得多大成功。我同时使用 Spring Data（Mongo 和 Neo4j 存储库方法）。这是我的应用程序上下文，它没有运行：

```
<context:component-scan base-package="org.domain.team.project.*"/>

<mongo:repositories base-package="org.domain.team.project.data.repositories.mongodb"/>

    <!-- Neo4j -->
    <!--  <neo4j:config storeDirectory="/data/production/graph.db"/> -->
    <neo4j:repositories base-package="org.domain.team.project.data.repositories.neo4j"/>

    <neo4j:config graphDatabaseService="graphDatabaseService" />
    <bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase"
    destroy-method="shutdown">
        <constructor-arg index="0" value="/data/production/graph.db" />
        <constructor-arg index="1">
            <map><entry key="enable_remote_shell" value="true"/></map>
        </constructor-arg>
    </bean>
    <bean id="serverWrapper" class="org.neo4j.server.WrappingNeoServerBootstrapper" 
        init-method="start" destroy-method="stop">
            <constructor-arg ref="graphDatabaseService"/>
    </bean> 
```

如果我不使用这种方法并简单地指定存储目录（注释行），一切运行正常。我怀疑这是 SDN 和 neo4j-server 问题之间的一个版本。这是我的POM：

```
 <properties>
    <spring.data.mongo.version>1.1.0.RELEASE</spring.data.mongo.version>
    <spring.data.neo4j.version>2.1.0.RELEASE</spring.data.neo4j.version>
  </properties>

  <dependencies>
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-mongodb</artifactId>
        <version>${spring.data.mongo.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j</artifactId>
        <version>${spring.data.neo4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.neo4j.app</groupId>
        <artifactId>neo4j-server</artifactId>
        <version>1.8.2</version>
    </dependency>
    <dependency>
        <groupId>org.neo4j.app</groupId>
        <artifactId>neo4j-server</artifactId>
        <classifier>static-web</classifier>
        <version>1.8.2</version>
    </dependency>
  </dependencies> 
```

它的父级依赖 Spring(core,context,test) 3.2.0 Release。

显示的具体错误是：

```
Caused by: java.lang.NoSuchFieldError: query_cache_size
    at org.neo4j.cypher.ExecutionEngine.org$neo4j$cypher$ExecutionEngine$$getQueryCacheSize(ExecutionEngine.scala:95)
    at org.neo4j.cypher.ExecutionEngine$$anon$1.<init>(ExecutionEngine.scala:91)
    at org.neo4j.cypher.ExecutionEngine.<init>(ExecutionEngine.scala:91)
    at org.neo4j.cypher.javacompat.ExecutionEngine.<init>(ExecutionEngine.java:54)
    at org.neo4j.cypher.javacompat.ExecutionEngine.<init>(ExecutionEngine.java:44)
    at org.springframework.data.neo4j.support.query.CypherQueryEngine.<init>(CypherQueryEngine.java:42)
    at org.springframework.data.neo4j.support.DelegatingGraphDatabase.createCypherQueryEngine(DelegatingGraphDatabase.java:217)
    at org.springframework.data.neo4j.support.DelegatingGraphDatabase.queryEngineFor(DelegatingGraphDatabase.java:190)
    at org.springframework.data.neo4j.support.MappingInfrastructureFactoryBean.afterPropertiesSet(MappingInfrastructureFactoryBean.java:146)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 47 more 
```

就我而言，这应该没问题，因为[默认值为](http://docs.neo4j.org/chunked/milestone/kernel-configuration.html)100。SDN 文档并没有[过多](http://static.springsource.org/spring-data/data-neo4j/docs/2.1.0.RELEASE/reference/html/)谈论它。有什么建议么？

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:01:57.167

看起来像版本兼容性问题。对我来说，以下组合工作正常

```
spring-data-neo4j : 2.1.0.RC4
spring-data-mongodb : 1.1.0.RELEASE 
neo4j-server : 1.8
static-web : 1.8 
```

此外，我正在使用-

```
Spring framework version : 3.1.2.RELEASE
Neo4j version : 1.8
mongodb version : 2.2.2
mongo-java-driver : 2.9.1
slf4j : 1.7.2 
```

# web-services - OpenESB GlassFish - WSDL 导入不正确的位置 URL。

> ID：15904932
> 
> 赞同：0
> 
> 时间：2013-04-09T14:39:18.287
> 
> 标签：web-services, soap, wsdl, glassfish, open-esb

我正在尝试将我的复合项目部署到具有域的生产环境，即

esbservices.mydomain.com

我通过这个 URL 成功地从我的域中获取 WSDL ......即

esbservices.mydomain.com/myproject/services/myservice?wsdl

然而，WSDL 文档（甚至通过域访问）包含对具有本地网络/计算机路径的其他 WSDL 文档的导入。

```
<definitions targetNamespace="my-integration-composite"><import namespace="http://j2ee.netbeans.org/wsdl/my-integration-services/new-transactions" location="http://my-pc-name.com:9080/my-integration-composite-sun-http-binding/my-integration-services/channel/smsc/inbound/wsdl/new-transactions.wsdl">
    </import><import namespace="http://j2ee.netbeans.org/my/wsdl/my-transactions" location="http://my-pc-name.com:9080/my-integration-composite-sun-http-binding/my-integration-services/transaction/common/wsdl/my-transactions.wsdl">
    </import><import namespace="http://j2ee.netbeans.org/wsdl/my-integration-services/other-transactions" location="http://my-pc-name.com:9080/my-integration-composite-sun-http-binding/my-integration-services/channel/ivr/inbound/wsdl/other-transactions.wsdl">
    </import><portType name="dummyCasaPortType">
  </portType> 
```

我想摆脱这个**[http://my-pc-name.com:9080/](http://my-pc-name.com:9080/)**而能够使用[http://esbservices.mydomain.com/](http://esbservices.mydomain.com/)。因为当有人试图从其他网络生成 Web 服务客户端时，它会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T11:39:20.753

在 GlassFish ESB v2.2 中，与之前的 GlassFish ESB v2.1 一样，URL 中指定的主机名称很重要。当指定“localhost”作为主机名时，可能会生成不同的工件，在指定主机的 FQDN 时会产生不同的工件，在指定别名主机名（FQDN 的替代名称，可能在“hosts”文件中指定。如果别名指到 127.0.0.1 的工件未正确生成。

最佳策略是使用部署服务的主机的 FQDN。这会生成正确的工件。

[GlassFish ESB WS 安全第 5 章](http://blogs.czapski.id.au/wp-content/uploads/2010/03/CH05_WSSecurityExploration_r0.4.2.pdf)

# r - 如何从 R 中的表对象创建和填充列表

> ID：15904934
> 
> 赞同：1
> 
> 时间：2013-04-09T14:39:19.923
> 
> 标签：r, list

如何从此表创建列表：

```
t1 <- structure(c(1L, 2L, 3L), .Dim = 3L, .Dimnames = structure(list(c("a", "b", "c")), .Names = ""), class = "table") 
```

所以要为表的每个“名称”获取一个列表，每个列表都是适当“名称”的长度？预期输出为：

```
> result
$a
[1] NA
$b
[1] NA NA
$c
[1] NA NA NA 
```

我原以为打个电话就可以了：

```
lapply(t1,function(x) list(names(x)=NA,length(x))) 
```

但这显然行不通。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:44:04.020

```
t1
## 
## a b c 
## 1 2 3 

lapply(t1, function(x) rep(NA, x))
## $a
## [1] NA
## 
## $b
## [1] NA NA
## 
## $c
## [1] NA NA NA
## 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:42:46.893

你可以这样做：

```
R> lapply(as.list(t1), function(v) {return(rep(NA,v))})
$a
[1] NA
$b
[1] NA NA
$c
[1] NA NA NA 
```

# sql - 基于另一个从 2 个表中选择数据

> ID：15904937
> 
> 赞同：0
> 
> 时间：2013-04-09T14:39:26.657
> 
> 标签：sql, oracle, select, join

我通过 SQL+ 命令行使用 Oracle，我试图显示来自两个不同表的数据，但我需要使用第三个表来确定要显示的内容。下面是我的示例 3 表的图像。

Stack 不允许我在问题中显示我的图像，所以这里有一个链接：

![在此处输入图像描述](https://i.stack.imgur.com/baUOC.png)

我想为每个订单显示“名称”、“O_ID”和“日期”。我对 SQL 很陌生，这可能以前已经回答过，但我找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:43:13.173

[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)表格：

```
SELECT
  c.Name,
  o.O_ID,
  od.Date
FROM Customer AS c
INNER JOIN "Order"   AS o  ON c.C_ID = o.C_ID
INNER JOIN OrderDate AS od ON o.O_ID = od.O_ID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:44:03.873

您尝试做的是一种非常常见的做法，需要 INNER JOIN。从设计的角度来看，Order Date 表甚至不应该存在。日期列应该只位于 Order 表中。我根据该设计编写了查询：

```
SELECT 
       o.O_ID,
       o.Date,
       c.Name,

FROM
      customer AS c
      INNER JOIN order AS o ON c.C_ID = o.C_ID 
```

**编辑：**

关于您的设计问题的更多信息：您的数据的自然排序是一个订单有 1 个日期，一个订单的日期不多。引入另一个表来简单地存储日期允许可能有许多日期与订单相关联，这简直是不自然的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:44:48.693

做一个`JOIN`

```
select c.Name, o.O_ID, od.Date 
from Customer c
inner join Order o on o.O_ID = c.C_ID
inner join OrderDate od on o.O_ID = od_ID 
```

文档：[http ://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

# c# - AdomdConnection 给出了无法建立连接。确保服务器运行错误

> ID：15904942
> 
> 赞同：1
> 
> 时间：2013-04-09T14:39:50.610
> 
> 标签：c#, ssas

我正在使用 MSOLAP 提供程序连接分析服务器。因此，我创建了以下连接字符串并尝试建立从应用程序/Web 服务器到 SSAS 服务器的连接

连接字符串

```
Provider=MSOLAP.2; Data Source=172.16.53.3; Initial Catalog=Myyres; 
```

使用的代码片段

```
 AdomdConnection objAdomdConn = new AdomdConnection();
      objAdomdConn.ConnectionString = a_strConnSting;
      objAdomdConn.Open(); 
```

发生了错误

> *“无法建立连接。确保服务器正在运行。”*

堆栈跟踪输出

```
 at Microsoft.AnalysisServices.AdomdClient.XmlaClient.Connect(ConnectionInfo connectionInfo, Boolean beginSession)
   at Microsoft.AnalysisServices.AdomdClient.AdomdConnection.XmlaClientProvider.Microsoft.AnalysisServices.AdomdClient.AdomdConnection+IXmlaClientProviderEx.ConnectXmla()
   at Microsoft.AnalysisServices.AdomdClient.AdomdConnection.ConnectToXMLA(Boolean createSession, Boolean isHTTP)
   at Microsoft.AnalysisServices.AdomdClient.AdomdConnection.Open()
   at StackOverflow.AdoMD.button1_Click(Object sender, RoutedEventArgs e) 
```

当我在 SSAS 服务器上运行时，相同的代码正在运行。仅在从 app\web 服务器调用 SSAS 服务器时出现错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-20T07:37:56.023

预期的连接字符串是

connectionString = "数据源=ServeName；集成安全=SSPI；初始目录=DBName；"；

要连接 Windows 身份验证，请添加“Integrated Security=SSPI;” 在连接字符串中
要使用 SQL 身份验证进行连接，请添加“用户 ID=userID；密码=pwd；” 在连接字符串中

# objective-c - 如何在 OSX 中查找已挂载的存储设备？

> ID：15904945
> 
> 赞同：5
> 
> 时间：2013-04-09T14:39:53.983
> 
> 标签：objective-c, cocoa

如何找到已安装的存储设备并获取有关它们的信息？基本上我想要一个类似的行为，就像在 finder 边栏中。

***更新：一般我需要显示设备名称和类型

目前我正在查看 /Volumes/ 目录并仅列出其中的内容，但这给我留下了两个问题：

1.  我有不需要的项目，例如 MobileBackups
2.  我无法识别设备

第二个问题真的困扰着我。如果我能识别出该项目，我也可以将不需要的项目分拣出来，但我什至不知道它是挂载的 DMG、USB 设备还是网络设备。

我已经看过几个例子，但没有得到任何结果。苹果示例 FSMegaInfo 已经提供了一些信息，但我不确定我是否能够识别设备类型。我也不确定如何获得扫描设备所需的信息。DADiskCopyDescription 似乎也没有给我所需的信息。

我还使用 NSWorkspace 通知来获取有关新安装或卸载设备的信息，但通知事件并没有真正提供任何信息。

没有简单的方法吗？

谢谢您的帮助。

塞布

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T15:09:37.610

询问 NSFileManager 对象[安装了哪些卷](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/mountedVolumeURLsIncludingResourceValuesForKeys%3aoptions%3a)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:44:40.370

使用这个：[`-[NSFileManager mountedVolumeURLsIncludingResourceValuesForKeys:options:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/mountedVolumeURLsIncludingResourceValuesForKeys%3aoptions%3a)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:42:56.270

您应该查看`diskutil`命令行应用程序。它有一个列表选项，可以显示已安装卷的类型、名称、大小、标识符等。希望您可以在那时清除这些选项。

# c# - 使用被点击元素的 ID 属性作为参数

> ID：15904957
> 
> 赞同：1
> 
> 时间：2013-04-09T14:40:13.537
> 
> 标签：c#, asp.net, visual-studio-2010

我有一个锚标记列表，单击时我希望将其 ID 属性的值发送到存储过程的参数。一切正常，除了我不知道如何使接受单击的属性的`AddWithValue`方法的第二个参数而不是对其进行硬编码。结果从一个简单的存储过程中读取，然后放入一个网格视图控件中`Parameters``SqlCommand`

标记：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="jQueryEachExample._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

    <asp:HyperLink ID="Xtown" runat="server">Xtown</asp:HyperLink>
    <asp:HyperLink ID="Ztown" runat="server">Ztown</asp:HyperLink>
    <asp:HyperLink ID="Atown" runat="server">Atown</asp:HyperLink>
    <asp:HyperLink ID="Bburg" runat="server">Bburg</asp:HyperLink>

<asp:GridView runat="server" ID="stateGridView">

</asp:GridView>     

</asp:Content> 
```

后面的代码

```
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data.SqlClient;
using System.Data;

namespace jQueryEachExample
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //let the connection string be read from the web.config file
            string cs = ConfigurationManager.ConnectionStrings["dbcs"].ConnectionString;

            //create a connection
            using (SqlConnection conn = new SqlConnection(cs))
            {
                //open connection
                conn.Open();
                //create the SqlCommand object
                SqlCommand cmd = new SqlCommand("spFindCityInfo", conn);
                cmd.CommandType = CommandType.StoredProcedure;
                //cmd.Parameters.AddWithValue("@cityName",this argument needs to be the id attribute of the link was that clicked
                cmd.Parameters.AddWithValue("@cityName", Xtown.ID);//Xtown.ID is what needs to be whatever is clicked
                //create a reader
                using (SqlDataReader reader = cmd.ExecuteReader())
                {
                    stateGridView.DataSource = reader;
                    stateGridView.DataBind();
                }

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:51:40.320

使用`CommandArgument`a`LinkButton`

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:03:35.137

我假设这些按钮将以更通用的方式创建，例如在中继器或其他东西中。

我建议将其更改`HyperLinks`为`LinkButtons`以便您可以访问`OnClick`事件并将数据访问代码放入方法然后执行以下操作：-

```
<asp:LinkButton ID="Xtown" runat="server" OnClick="lnkButtonClick">Xtown</asp:LinkButton>

private void UpdateDB(string id)
{
     string cs = ConfigurationManager.ConnectionStrings["dbcs"].ConnectionString;

     using (SqlConnection conn = new SqlConnection(cs))
     {
        //*snip*
        cmd.Parameters.AddWithValue("@cityName", id);//ID from clicked control 
     }
}

protected void lnkButtonClick(object sender, EventArgs e)
{
     string id = ((LinkButton)sender).ClientID;
     UpdateDB(id);
} 
```

这回答了关于将 ID 属性作为参数传递给存储过程的问题。

但是，我会调整它，而不是`CommandArguments`像这样使用：

```
<asp:LinkButton ID="Xtown" runat="server" OnClick="lnkButtonClick" CommandArgument="Xtown">Xtown</asp:LinkButton> 
```

并以与 clientid 类似的方式访问它：

```
protected void lnkButtonClick(object sender, EventArgs e)
{
     string args = ((LinkButton)sender).CommandArgument;
     UpdateDB(args);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:46:05.763

据我了解，您应该使用 LinkBut​​ton 而不是超链接并处理每个 LinkBut​​ton 的单击事件。将您的 SQL 代码放在单独的参数化方法中，并将每个事件的 LinkBut​​ton 控件 ID 作为参数传递。

# c++ - QThread 没有启动

> ID：15904958
> 
> 赞同：1
> 
> 时间：2013-04-09T14:40:14.853
> 
> 标签：c++, qt, qthread, qaxobject

抱歉这篇文章的长度。但是我现在被困了两天......

我正在开发一个通过 ActiveX 与硬件设备通信的 Qt 4.6 Windows 应用程序。

当我发送命令时，设备会执行一些操作，完成后（可能需要一分钟）它会发出信号。我需要等待这个信号才能知道一切是否正常（或不正常）并因此采取一些行动。

当用户单击按钮时，命令会发送到设备。显然，我不希望 HMI 冻结。

我确信我必须使用线程。所以我确定了三个线程：

1.  HMI对应的主线程
2.  硬件控制器（在发送命令后锁定并等待信号）
3.  一个硬件通知监听器，不断从硬件获取信号并解锁线程 2

这是类图：

![类图]](https://i.stack.imgur.com/KlA9p.png)

还有一个序列图来展示我如何看待事物：

![序列图](https://i.stack.imgur.com/JXG6q.png)

**说明：**

当用户启动我的应用程序时，HMI 就创建好了。HMI的构造函数调用Worker的构造函数。它构造硬件 QAxObject。然后它构造了HardwareListener，给出了引用：QAxObject、QMutex 和QWaitCondition。然后 Worker 的构造函数将 HardwareListener 对象移动到另一个线程并启动它。最后，HMI的构造函数启动Worker的线程。

然后，当用户单击按钮时，HMI 会向 Worker 发送信号。Worker 向硬件发送一个命令（该命令可能会阻塞线程几秒钟，这就是为什么我需要另一个线程中的 HardwareListener 不要错过信号）。然后 Worker 等待 QWaitCondition（在锁定 QMutex 之后）。

之后，硬件设备向 HardwareListener 发送一个信号，唤醒 QWaitCondition。因此，Worker 线程停止等待并完成其操作。最后，Worker 通知 HMI。

**问题：**

未创建/启动 Worker 和 HardwareListener 线程。一切都在主线程中完成，所以很明显，它不起作用。我不在线程之间交换任何特殊对象（所以不需要`qRegisterMetaType()`）

**问题：**

我的设计可以接受吗？可能还有其他一些方法可以做，但在我看来这是最直接的（考虑到复杂性）。

* * *

***编辑：***

我更改了代码以删除`QThread`继承。我改用这个`moveToThread()`方法。

现在线程工作正常。*但是*我有一个 ActiveX 错误：`QAxBase: Error calling IDispatch member NewProject: Unknown error`.

似乎与硬件的接口被破坏了......有什么想法吗？

[这是一些有趣的事情](https://bugreports.qt-project.org/browse/QTBUG-18521?focusedCommentId=199689#comment-199689)：

```
You cannot move a QAxObject to another thread once it has been created. 
```

**解决方案：**

[这是我发现](https://stackoverflow.com/a/15929330/902025)的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:16:00.717

[从 QThread 继承并不是好的设计。](http://blog.qt.digia.com/blog/2010/06/17/youre-doing-it-wrong/)如果您正在做的工作计算量很大，我建议使用[QThreadPool](http://doc-snapshot.qt-project.org/4.8/qthreadpool.html)。我并不比使用异步设计更好。这意味着只调用永远不会阻塞的函数，而是连接到通知您发生了某些事情的信号。

因此，例如将命令发送到硬件并在硬件完成后发出信号。如果硬件 API 不提供异步函数，那么您将无法使用线程。 [QtConcurrentRun](http://qt-project.org/doc/qt-4.8/qtconcurrentrun.html)可以帮助解决这个问题。通常您不需要自己触摸线程；没有它会容易得多。

# android - 2 个选项卡不工作，应用程序崩溃

> ID：15904959
> 
> 赞同：0
> 
> 时间：2013-04-09T14:40:17.177
> 
> 标签：android

作为初学者，我想学习使用 tabhost/tabwidget 的 android 选项卡式布局，尽管我已经阅读了一些已经弃用的帖子。所以...基本上，我想要实现的是有一个带有两个选项卡的布局，这两个选项卡都将显示一个具有不同内容的 web 视图。但是每次我尝试访问该布局时，我的应用程序都会崩溃。

这是它在我的 Logcat 中所说的：

日志猫：

 `````
 04-09 22:30:53.628: E/AndroidRuntime(10406): FATAL EXCEPTION: main
04-09 22:30:53.628: E/AndroidRuntime(10406): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nicx.amazing/com.nicx.amazing.TabActivity}: java.lang.IllegalStateException: Already attached
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.os.Looper.loop(Looper.java:137)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.app.ActivityThread.main(ActivityThread.java:4448)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at dalvik.system.NativeStart.main(Native Method)
04-09 22:30:53.628: E/AndroidRuntime(10406): Caused by: java.lang.IllegalStateException: Already attached
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.support.v4.app.FragmentManagerImpl.attachActivity(FragmentManager.java:1844)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:193)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at com.nicx.amazing.TabActivity.onCreate(TabActivity.java:15)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.app.Activity.performCreate(Activity.java:4465)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-09 22:30:53.628: E/AndroidRuntime(10406):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
04-09 22:30:53.628: E/AndroidRuntime(10406):    ... 11 more 
````  `这是我的 TabActivity.java 中的内容：

 `````
import android.os.Bundle;
import android.support.v4.app.*;
import android.widget.TabHost;

public class TabActivity extends FragmentActivity {

        TabHost tHost;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            tHost = (TabHost) findViewById(android.R.id.tabhost);
            tHost.setup();

            TabHost.TabSpec fb = tHost.newTabSpec("facebook");
            fb.setIndicator("Facebook", null);
            fb.setContent(new DummyTabContent(getBaseContext()));
            tHost.addTab(fb);

            TabHost.TabSpec tw = tHost.newTabSpec("twitter");
            tw.setIndicator("Twitter", null);
            tw.setContent(new DummyTabContent(getBaseContext()));
            tHost.addTab(tw);

        }
} 
```` 

`注意：我还没有弄清楚如何在我的选项卡中放置 web 视图，我只想首先查看选项卡的布局。`

 `我的 activity_tab.xml 中也有这个：

 `````
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</TabHost> 
````  `我使用[http://wptrafficanalyzer.in/blog/creating-navigation-tabs-using-tabhost-and-fragments-in-android/](http://wptrafficanalyzer.in/blog/creating-navigation-tabs-using-tabhost-and-fragments-in-android/)作为指南。我只是没有遵循它的片段，因为我没有使用它。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:03:27.043

哦，亲爱的，Facebook和Twitter肯定还有两个活动台，你把它们抛在后面了吗？

您必须创建这些活动才能完成您的应用程序。

而且我发现您的 TabActivity 是从 FrameActivity 扩展而来的，这似乎不太正确。您的 MainActivity 应该扩展 TabActivity。

这是我的一个例子

```
package com.izzyleung.mixedbartest;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TabHost;

@SuppressWarnings("deprecation")
public class MainActivity extends TabActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TabHost tabHost = getTabHost();

    Intent imageIntent = new Intent();
    imageIntent.setClass(this, ImageActivity.class);
    TabHost.TabSpec imageSpec = tabHost.newTabSpec("Image");
    imageSpec.setIndicator("Image");
    imageSpec.setContent(imageIntent);
    tabHost.addTab(imageSpec);

    Intent notificationIntent = new Intent();
    notificationIntent.setClass(this, NotificationActivity.class);
    TabHost.TabSpec notificationSpec = tabHost.newTabSpec("Notification");
    notificationSpec.setIndicator("Notification");
    notificationSpec.setContent(notificationIntent);
    tabHost.addTab(notificationSpec);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.action_settings:
        Intent settingsIntent = new Intent();
        settingsIntent.setClass(this, SettingsActivity.class);
        startActivity(settingsIntent);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
   }
} 
```

我的 XML 文件是这样的：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="5sp" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </TabWidget>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="5sp" >
    </FrameLayout>
</LinearLayout> 
`````````

# c++ - std::cin:: 以及为什么保留换行符

> ID：15904963
> 
> 赞同：5
> 
> 时间：2013-04-09T14:40:29.257
> 
> 标签：c++, newline, cin

参考[为什么在我包含 cin.get() 后控制台关闭？](https://stackoverflow.com/questions/6398229/why-is-the-console-closing-after-ive-included-cin-get/6398242#6398242)

我正在利用`std::cin.get()`

```
#include<iostream>    

char decision = ' ';
bool wrong = true;

while (wrong) {
    std::cout << "\n(I)nteractive or (B)atch Session?: ";

    if(std::cin) {
        decision = std::cin.get();

        if(std::cin.eof())
            throw CustomException("Error occurred while reading input\n");
    } else {
        throw CustomException("Error occurred while reading input\n");
    }

   decision = std::tolower(decision);
   if (decision != 'i' && decision != 'b')
        std::cout << "\nPlease enter an 'I' or 'B'\n";
   else
        wrong = false;
} 
```

我读[了 basic_istream::sentry](http://en.cppreference.com/w/cpp/io/basic_istream/sentry)和[std::cin::get](http://en.cppreference.com/w/cpp/io/basic_istream/get)。

我选择使用`std::getline`while 循环执行两次，因为流不是空的。

```
std::string line; std::getline(std::cin, line); 
```

正如我在上面发布的参考文献中的一个答案所述，`std::cin`用于读取字符并`std::cin::get`用于删除换行符`\n`。

```
char x; std::cin >> x; std::cin.get(); 
```

我的问题是为什么要在流中`std::cin`留下换行符`\n`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:55:19.547

因为这是它的默认行为，但[您可以更改它](http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/)。试试这个：

```
#include<iostream>
using namespace std;

int main(int argc, char * argv[]) {
  char y, z;
  cin >> y;
  cin >> noskipws >> z;

  cout << "y->" << y << "<-" << endl;
  cout << "z->" << z << "<-" << endl;
} 
```

给它一个由单个字符和一个换行符（“a\n”）组成的文件，输出是：

```
y->a<-
z->
<- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:56:37.093

这很简单。例如，如果您想在读取时写入一个存储城市名称的文件，您将不希望读取带有换行符的名称。除此之外 '\n' 和其他字符一样好，并且使用 cin 你只是获取一个字符，那么它为什么要跳过任何内容呢？在大多数用例中，当逐个读取字符时，您不想跳过任何字符，因为您可能想以某种方式解析它，读取字符串时您不关心空格等。

# jquery - 同步导航状态

> ID：15904971
> 
> 赞同：0
> 
> 时间：2013-04-09T14:40:54.727
> 
> 标签：jquery, list

我已经设法同步两个导航级别以使用 jQuery 打开和关闭显示。我希望用户将鼠标移到两个级别之外，以便效果很好。然而，这似乎只适用于我导航中的第一个“li”。有什么想法吗？这是小提琴：

[jsfiddle](http://jsfiddle.net/ScvpL/)

和我的代码：

```
//Maintain over state for main nav and sub nav
$('#mainNav li').mouseover(function(){  
    $(this).children("a").removeClass("whiteHighlight");
    if($('#mainNav li span').css('display') == "block"){ 
        $(this).children("a").addClass("whiteHighlight");
    }
}); 
//Remove over state for both when exiting sub nav
$('#mainNav li span').mouseout(function(){      
    if($('#mainNav li span').css('display') == "none"){ 
        $(this).prev().removeClass("whiteHighlight");
    }       
}); 
//Remove over state for both when exiting main nav
$('#mainNav li').mouseout(function(){       
    if($('#mainNav li span').css('display') == "none"){ 
        $(this).children("a").removeClass("whiteHighlight");
    }       
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:03:02.287

在鼠标移出时，您正在检查 if($('#mainNav li span').css('display') == "none")，此跨度不是指用户刚刚离开的 li 内的跨度，它是指#mainNav中所有li中存在的所有跨度的数组。

无论如何，您不需要 JS，我已经为您修复了没有 JS 的问题，只是添加了这个 css：

```
#mainNav li:hover {background:#fff;}
#mainNav li:hover a {color:#333;} 
```

[http://jsfiddle.net/jamesking/ScvpL/2/](http://jsfiddle.net/jamesking/ScvpL/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:06:17.500

有很多方法可以优化您的代码，但为了学习，这里是您遇到的实际问题。当你测试：

```
if($('#mainNav li span').css('display') == "block"){ 
```

jQuery 将查找 的所有实例`#mainNav li span`，但只测试第一个。您只想测试`span`内部`this`：

```
if($('span',this).css('display') == "block"){ 
```

[http://jsfiddle.net/ScvpL/1/](http://jsfiddle.net/ScvpL/1/)

# php - i18n 库和 switch_uri

> ID：15904972
> 
> 赞同：2
> 
> 时间：2013-04-09T14:40:55.683
> 
> 标签：php, codeigniter-2

我对 i18n 库和 switch_uri() 函数有疑问。当我尝试更改语言时，链接不起作用。我按照指南包含 i18n 库，例如，它可以与菜单上的单词一起正常工作，但不适用于应该更改语言的链接。这是我的代码：

看法

```
<?php echo anchor($this->lang->switch_uri('en'),'ENG')  ?>
<?php echo anchor($this->lang->switch_uri('it'),'ITA')  ?> 
```

我尝试使用 BASE_URL 进行更正，但没有成功。我该如何解决？提前感谢您的回答，并为我的英语不好感到抱歉。

# python - Python - 释放/替换字符串变量，如何处理？

> ID：15904973
> 
> 赞同：5
> 
> 时间：2013-04-09T14:40:57.920
> 
> 标签：python, security, memory-management

假设我将密码以纯文本形式存储在称为`passWd`字符串的变量中。一旦我丢弃它（例如，使用`del passWd`或`passWd= 'new random data'`），python如何释放这个变量？

字符串是否存储为字节数组，这意味着它可以在它最初存在的内存位置被覆盖，还是它是内存区域中的固定集合，无法修改，并且在分配新值时新的内存区域是创建并且旧区域被丢弃但不被null覆盖？

我在质疑 Python 如何实现内存区域的安全性，并想了解更多，主要是因为我很好奇 :)

从我到目前为止收集到的信息来看，使用`del`(or `__del__`) 会导致解释器不会自动释放该变量的内存区域，这可能会导致问题，而且我不确定**del**是否会删除这些值。但这只是我收集到的东西，而不是黑色或白色的东西:)

我问的主要原因是，我打算编写一个移交应用程序，该应用程序获取一个字符串，执行一些 I/O，将其传递给另一个子系统（例如，树莓派的引导加载程序），并且接口写在Python（在某些人的耳朵里听起来一定很奇怪......）而且我不担心数据在 I/O 计算期间受到损害，但在两个子系统切换之间可能会发生内存转储。或者如果系统被冻结（比如休眠）说系统启动后 20 分钟，我尽可能快地删除了变量，但不知何故它仍然在内存中，尽管我做了一个`del passWd`:)

（Ps。我问过超级用户，他们把我介绍到这里，我很抱歉语法不好！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:04:04.937

除非您使用自定义编码输入法来获取密码，否则它将出现在更多的地方，而不仅仅是您的不可变字符串。所以不要太担心。

操作系统应注意在将内存分配给另一个进程之前清除进程中的任何数据。如果页面被复制到磁盘（换出或休眠），这当然可能会失败。

安全密码输入并不容易。也许您可以找到处理此问题的特殊库或模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T08:59:30.647

我终于有了两个解决方案。ld_preload 在较低级别上替换 Python 的字符串处理功能。另一个更简单的选择是开发我自己的 C 库，它比 Python 通过标准字符串处理提供的功能更多。

主要是 C 代码有一个 shread() 函数，它写入字符串“被”存储的内存区域和一些其他错误检查。

但是，@Ber 给了我一个足够好的答案来开始开发我自己的解决方案，因为（正如他所指出的）Python 中没有安全的方法，并且 python 将字符串存储在许多地方并依赖于操作系统（它自己这不是一件坏事，除非您不信任正在安装真正安全的应用程序的操作系统）。

# php - 类型错误：$(...) 不是函数

> ID：15904984
> 
> 赞同：0
> 
> 时间：2013-04-09T14:41:34.703
> 
> 标签：php, javascript, jquery, typeerror

我使用 jQuery 创建了一个页面，用户可以在该页面中单击表中显示“删除”的单元格，它会发送一个 ajax 请求，根据单元格的 id 从数据库中删除该条目，然后它将更改 CSS 以隐藏单元格。

我在创建/调整 jQuery 代码时创建了一个测试页面。此页面完美运行。这是代码：

```
<html>
<head>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

  (function( $ ){
$.fn.deleterow = function(event) { 
  if (!confirm('Are you sure you want to delete this student?')) {
      return false;
  }
  var id = event.target.id;
  $.ajax({
          url: 'delete.php',
          type: 'GET',
          data: 'id=' + id,
      });
  $(this).parent().css('display', 'none');
}
})( jQuery );
});
</script>

</head>

<table border="1">
<tr>
<td>Cell 2, Row 2</td><td onclick="$(this).deleterow(event);" id="13376">delete</td>
</tr>
</table>

<html> 
```

现在我正在努力让代码在将要使用的实际页面中工作。这个页面有一个简短的表单，用户可以在其中选择他们的姓名和日期。此表单发送一个 ajax 请求，该请求在 div 中返回结果。返回的数据是一个 table ，这是我试图让我的函数工作的地方。该表附加了一个 tablesorter 脚本，还附加了我的函数。

表格排序器仍然可以正常工作，但是当我单击其中带有“删除”的单元格时没有任何反应。我使用 FireBug 来查看问题，它给了我错误，“TypeError: $(...).deleterow is not a function”

以下是用户提交表单以及将结果加载到 div 的主页的代码：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type='text/javascript' src='jquery.tablesorter.js'></script> 
<script type='text/javascript'>
$(document).ready(function() 
    { 
        $('#myTable').tablesorter(); 
    } 
); 
</script>";
</head>

<body id="my-students">
<?php include 'header.php'; ?>

<?php include 'nav-tutoring.php'; ?>

<div id="content">
This is where you can view students whom you have assigned to tutoring.
<p>

You may change the way each column is sorted by clicking on the column header. 
<p>
<b>Select your name and the date to view students you have assigned for that day.</b>

<form> My form is here; removed to make post shorter  </form>

<script>
$('#submit').click(function() 
{
   $.ajax({
        type: 'POST',
        url: "mystudents.php",
        data: $('#name').serialize(),
        success: function(data) {
            $("#list").empty();
            $('#list').append(data);

        }
    });
                return false;
});
</script>

<div id="list"></div> 
```

这是插入到表单下方 div 中的页面的代码。这是 tablesorter 工作的页面，但我无法让我的功能工作。我还确保将这些脚本库包含在该 div 所在的主页头中。

```
<script src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
<script type='text/javascript' src='jquery.tablesorter.js'></script> 
<script type='text/javascript'>
$(document).ready(function() 
    { 
        $('#myTable').tablesorter(); 

(function($) {
$.fn.deleterow = function(event) { 
  if (!confirm('Are you sure you want to delete this student?')) {
      return false;
  }
  var id = event.target.id;
  $.ajax({
          url: 'delete.php',
          type: 'GET',
          data: 'id=' + id,
      });
  $(this).parent().css('display', 'none');
}
})(jQuery);

});
</script>

<table id='myTable' class='tablesorter' border="1">
<thead><tr><th>ID Number</th><th>Last</th><th>First</th><th>Tutoring<br>Assignment</th><th>Assigning Teacher</th><th>Delete?</th></tr></thead><tbody>

<?php 
while($row = mysql_fetch_array($data)){
    echo "<tr><td>".$row['id']. "</td><td>". $row['last']. "</td><td>". $row['first']."</td><td>". $row['assignment']."</td><td>". $row['assignteacher']."</td><td onclick='$(this).deleterow(event);' id='".$row['pk']."'>Delete</td></tr>";

}
?>
</tbody></table> 
```

我根据收到的错误进行了很多搜索，但我似乎无法解决问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:51:38.357

首先，`$.fn.deleterow = function(event) {`将 document.ready 包含在内是没有意义的。您应该将其移出该方法。

就我个人而言，我会将代码更改为不依赖表中的内联事件处理程序。您正在使用 jQuery，因此请使用它。使用事件冒泡对您有利。

将其添加到表级别并侦听具有 id 的 td 上的点击事件。

```
$("table tbody").on("click", "td[id]", function(e){
   if (!confirm('Are you sure you want to delete this student?')) {
      return false;
  }
  var id = this.id;
  $.ajax({
          url: 'delete.php',
          type: 'GET',
          data: 'id=' + id,
      });
  $(this).parent().css('display', 'none'); 
}); 
```

[jsFiddle](http://jsfiddle.net/R775q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:49:47.057

测试是否在控制台中加载了 jQuery（检查`jQuery`变量）...

您应该以这种方式包装您的代码：

```
(function( $ ){
      $(document).ready(function(){

            $.fn.deleterow = function(event) { 
                  if (!confirm('Are you sure you want to delete this student?')) {
                        return false;
                  }
                  var id = event.target.id;
                  $.ajax({
                        url: 'delete.php',
                        type: 'GET',
                        data: 'id=' + id,
                  });
                  $(this).parent().css('display', 'none');
            }
      });
})( jQuery ); 
```

但最重要的是检查 jQuery 是否正确加载并解决它......

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:50:29.380

尝试重写为常用的 javascript 函数

```
function deleterow(id) {...} 
```

并在 php

```
echo "<tr><td>".$row['id']. "</td><td>". $row['last']. "</td><td>". $row['first']."</td><td>". $row['assignment']."</td><td>". $row['assignteacher']."</td><td onclick='deleterow(".$row['id']. ")' id='".$row['pk']."'>Delete</td></tr>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:50:49.610

这是由于：

```
<td onclick='$(this).deleterow(event);' 
```

由于封闭的“”，JavaScript 无法将其视为函数。

我建议这样做：

```
<td class='deleterow'> 
```

然后

```
$(body).on('click', '.deleteRow', function(event) {
    $(this).deleterow(event);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T14:51:22.830

您最好使用 jQuery 的处理程序而不是 onclick 绑定这些事件，这是不好的做法。例如：

```
$('#myTable').on('click', 'td', function(e) {
    $(this).deleterow(e);
}); 
```

# http - 在 ServiceStack 中执行重定向

> ID：15904987
> 
> 赞同：4
> 
> 时间：2013-04-09T14:41:52.803
> 
> 标签：http, http-headers, servicestack

我正在尝试在 ServiceStack 中构建一个服务，其唯一职责是解释请求并发送重定向响应。像这样的东西：

```
[Route("/redirect/", "POST")    
public class Redirect : IReturnVoid
{
    public string Something { get; set; }
}

public class RedirectService : Service
{
    public object Post(Redirect req)
    {
        // make some decisions about stuff

        return new HttpResult(){ StatusCode = HttpStatusCode.Redirect, Headers = {{HttpHeaders.Location, "place"}}};
    }
} 
```

我使用 fiddler 进行了初始测试，设置了 application/json 的内容类型并创建了适当的请求正文。这完全符合预期：服务请求给出了 302 响应并重定向到预期的位置。

我还使用一个基本的 Html 表单帖子对此进行了测试，动作为`http://myserviceuri/redirect/`，它也可以按预期工作并适当地重定向。

但是，我在尝试使用 SS c# 客户端调用相同的服务时遇到了问题。如果我在后面的 aspx 代码或 mvc 控制器中调用以下代码

```
var client = new JsonServiceClient("uri);

client.post(new Redirect{Something = "something}); 
```

我收到 500 和错误消息：

`The remote certificate is invalid according to the validation procedure.`

这是有道理的，因为它是一个具有自我证书的开发服务器。但我感觉，因为我可以通过其他方式成功调用该服务，所以这是一个红鲱鱼。

我应该使用不同类型的 c# 客户端来发出请求，还是设置更多自定义标头或其他内容？我从根本上不理解我想要做什么吗？

如果需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T06:15:45.450

这里发生的是，`JsonServiceClient`很高兴地跟随重定向，做的比你预期的要多。

我会为后代参考一个相关的问题和答案（ - 希望你很久以前就解决了这个问题......）。

[POST 到 ServiceStack 服务并检索 Location Header](https://stackoverflow.com/a/13462496/620856)

本质上，您将使用`WebRequest`答案中提到的 .net 或 ServiceStack 扩展来查看重定向并按照您认为合适的方式行事。

# c++ - 内存位置错误

> ID：15904988
> 
> 赞同：0
> 
> 时间：2013-04-09T14:42:07.390
> 
> 标签：c++, visual-studio-2010, opencv

请看下面的代码

```
#include <iostream>
#include <opencv2\highgui\highgui.hpp>
#include <opencv2\core\core.hpp>

using namespace std;
using namespace cv;

Mat PeperAndSalt(Mat *,int);

int main()

{
    Mat image,image2;

    try
    {
        image = imread("C:/Users/Public/Pictures/Sample Pictures/Chrysanthemum.jpg");

        if(!image.data)
        {
            throw 1;
        }
    }
    catch(int a)
    {
        cout << "Error. Image does not exist" << endl;
        exit(0);
    }

    //Display Normal Image
    namedWindow("Normal Image");
    imshow("Normal Image",image);

    //Edited Image
    image2 = PeperAndSalt(&image,3000);

    namedWindow("Edited Image");
    imshow("Edited Image",image2);

    waitKey(0);
    return 0;
}

Mat PeperAndSalt(Mat *imagePtr, int numberOfPixels)
{
    srand(numberOfPixels);

    Mat newMat;

    imagePtr->copyTo(newMat);

    for(int a=0;a<numberOfPixels;a++)
    {
        int column = rand()%newMat.cols;
        int row = rand()%newMat.rows;

        if(newMat.channels()==1)
        {
            //Grey Image
            newMat.at<uchar>(column,row)= 255;
        }
        else if(newMat.channels()==3)
        {
            //Colour Image
            newMat.at<Vec3b>(column,row)[0]=255;
            newMat.at<Vec3b>(column,row)[1]=255;
            newMat.at<Vec3b>(column,row)[2]=255;
        }
    }

    return newMat;
} 
```

此代码生成以下错误

```
Unhandled exception at 0x756a9617 in OpenCV1.exe: Microsoft C++ exception: cv::Exception at memory location 0x003bf2a0.. 
```

为什么是这样？请帮忙！

编辑

这是发生在 Mat.hpp 中的错误，它是 OpenCV 的内置类。我在调试时得到了这个

![在此处输入图像描述](https://i.stack.imgur.com/3EUxl.png)

**编辑**

错误在这一行

```
image2 = PeperAndSalt(&image,3000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:05:01.340

替换`newMat.at<...>(column,row)`为`newMat.at<...>(row,column)`。

这是代码的一部分。

```
 if(newMat.channels()==1)
    {
        //Grey Image
        newMat.at<uchar>(row,column)= 255;
    }
    else if(newMat.channels()==3)
    {
        //Colour Image
        newMat.at<Vec3b>(row,column)[0] = 255;
        newMat.at<Vec3b>(row,column)[1] = 255;
        newMat.at<Vec3b>(row,column)[2] = 255;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:25:12.993

根据 GDB 的输出：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x00000001029fe2ed
0x0000000100001f60 in PeperAndSalt (imagePtr=0x7fff5fbff820, numberOfPixels=3000) at chrys.cpp:65
65              newMat.at<Vec3b>(column,row)[0]=255; 
```

崩溃发生在：

```
newMat.at<Vec3b>(column,row)[0]=255; 
```

这意味着**您正在尝试访问`Mat`不存在**的位置。要么不在有效范围内`column`。`row`

狩猎愉快！

# php - Jquery if else color shuffle（传递变量）

> ID：15904993
> 
> 赞同：0
> 
> 时间：2013-04-09T14:42:24.907
> 
> 标签：php, jquery, if-statement, shuffle

这是关于我在此链接上提出的这个问题：[PHP CSS Color Shuffle array？](https://stackoverflow.com/questions/15900452/php-css-colour-shuffle-array)

我已经更改并添加了更多代码并且有一个不同的问题，因此我打开了一个新线程。

每次刷新页面时，我都使用 php 和 jQuery 来洗牌。目前这工作正常。但是我有一个 jQuery 函数，我可以在其中抓取一些元素并在悬停状态上显示随机颜色。现在这确实有效，但它显示 css 标准默认红色、蓝色、绿色等，甚至不显示橙色的颜色。有人建议我创建一个变量，然后创建一个 if 函数并通过悬停函数传递变量。以下是我到目前为止所拥有的，我是 jQuery 的新手用户，所以我不确定我哪里出错或下一步要去哪里，有人可以指导我为什么这会被破坏吗？我的萤火虫没有显示任何错误，我想我快到了！谢谢。

PHP 随机播放颜色：

```
<?php
$colours = array('red', 'green', 'blue', 'black');
$blog = $colours[array_rand($colours, 1)];
?>

<body id="<?php echo $blog; ?>"> 
```

在我的css中，无论我想显示随机颜色#green，#red在actuallid，class或元素之前，它都可以工作！只是悬停状态现在我有这个 jQuery ..

// 颜色翻转导航

```
var colours = "<?php echo $colours; ?>";

        if(colours == "red"){
           colours = "#600";
        }
        else if(colours == "green"){
           colours = "#363";
        }
        else if(colours == "blue"){
           colours = "#369";
        }
        else if(colours == "black"){
           colours = "#000";
        }

                    //example of some elements that would use the hover effect
        $("#footer .address #breadcrumbs a").hover(function() {
            $(this).stop().animate({ 'color': colours }, 300);
        },function() {
            $(this).stop().animate({ 'color': "#fff" }, 300);
        }); 
```

我是否遗漏了 if else 中的某些行或错误地传递了变量？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:12:01.670

好的，我有它的工作。

我做了一些事情，所以不确定是什么完全修复了它：

- 清除缓存（谷歌浏览器对此很痛苦）

-将变量从颜色更改为颜色（在 php 和 JS 中）

- 在 JS 中定义变量时，我回显了 $blog 而不是 $colour。

当这也有效时，我没有收到任何错误。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:49:52.250

我认为 JS 在页面上的脚本标签中。

你不能只`echo`出一个数组。我猜你的意思是`echo` `$blog`。那应该将单一颜色作为字符串数据传递给您的`if () {} else {}`语句（应该是`switch () { case }`真的）。

# configuration - 购买 EP2C35F672C6 FPGA 编程

> ID：15904998
> 
> 赞同：0
> 
> 时间：2013-04-09T14:42:35.343
> 
> 标签：configuration, hardware, vhdl, fpga, intel-fpga

我是 FPGA 和电路板开发的新手。这个学期，我学习了 Quartus II、VHDL 和 FPGA。我已经将几个基本设计上传到[DE2 Board](http://www.altera.com/education/univ/materials/boards/de2/unv-de2-board.html)上，上面有一个 EP2C35F672C6N FGPA。但是，每次我给板子上电，我都必须重新下载配置。我想知道是否有人可以解释什么样的 Altera FPGA，类似于 EP2C35F672C6，在设置后保留其配置，直到将新配置上传到板上。

另外，我从 Altera 购买了 EP2C35F672C6 FPGA 芯片。但是，由于我的 DE2 板上的 FPGA 似乎被熔炼在上面，我没有看到使用我当前的板对其进行编程的方法。他们的特殊板可以用来配置独立的 FPGA 吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:49:35.613

FPGA 可以从闪存芯片加载其配置。FPGA 本身不能存储任何非易失性的东西。您必须在板上使用它并在每次上电时对其进行配置。到目前为止，您一直在使用 JTAG 电缆进行此操作（我假设）。

您还可以在 DE2 板上对 EPCS16 串行闪存设备进行编程。根据[用户手册](ftp://ftp.altera.com/up/pub/Webdocs/DE2_UserManual.pdf)，第 24 页，这可以通过将 POF 文件分配给链中的设备来通过 JTAG 进行编程。然后 FPGA 将在每次上电时从该闪存设备进行配置。