# StackOverflow 问答 14466000-14466999

# jquery - fancybox 内的表格根本不起作用

> ID：14466016
> 
> 赞同：1
> 
> 时间：2013-01-22T19:01:18.470
> 
> 标签：jquery, forms, fancybox

我最近在我的网站上从 simplemodal 切换到了 fancybox。一切都很好，除了表格。花式盒子里的所有表格都不起作用。似乎甚至表单上的提交按钮都没有做任何事情。此外，当我单击文件输入时，弹出窗口询问我没有出现哪个文件。

这是表单的代码：

```
<div id="basic-modal-content">

    <h1>Upload CSV's</h1>

    <form method="post" enctype="multipart/form-data" action="csvs.php">

    <p>
    <label style="font-size: 8pt;">can:</label>
    <input type="file" name="csv[3]" />
    </p>
    <hr />
    <p>
    <label style="font-size: 8pt;">car:</label>
    <input type="file" name="csv[2]" />
    </p>
    <hr />
    <p>
    <label style="font-size: 8pt;">lis:</label>
    <input type="file" name="csv[5]" />
    </p>
    <hr />
    <p>
    <label style="font-size: 8pt;">veh:</label>
    <input type="file" name="csv[4]" />
    </p>
    <hr />
    <p>
    <label style="font-size: 8pt;">wil:</label>
    <input type="file" name="csv[1]" />
    </p>

    <p style="text-align: center; margin-top: 20px;">
    <input type="submit" value="Upload CSV's" />
    </p>

    </form>

</div> 
```

我通过`$("#basic-modal-content").fancybox().click();`在页面上单击按钮时使用来显示幻想框。

# java - 如何将多个编辑文本字段的内容显示到一个文本视图？

> ID：14466017
> 
> 赞同：0
> 
> 时间：2013-01-22T19:01:22.833
> 
> 标签：java, android, android-edittext

我一直在试图弄清楚如何将许多`EditText`值相加并将输出显示为一个`TextView`。

更加具体：

我让用户在每个`EditText`字段中输入一个数字，并且需要显示总结果。大约有 14 个`EditText`字段和一个`TextView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:09:59.833

尝试这个：

```
etUsername = (EditText) findViewById(R.id.etlsUsername);
etPassword = (EditText) findViewById(R.id.etlsPassword);
String username = etUsername.getText().toString();
String password = etPassword.getText().toString();
String text = username + " " + password;
tv = (TextView) findViewById(R.id.tv);
tv.setText (text); 
```

只需添加任意数量的编辑文本即可。

如果要对所有文本视图的结果求和，则需要通过执行以下操作获取文本视图中字符串的整数值：

```
numone= (EditText) findViewById(R.id.numone);
numtwo= (EditText) findViewById(R.id.numtwo);
String numonestring = numone.getText().toString();
String numtwostring = numtwo.getText().toString();
int one = Integer.valueOf(numonestring);
int two = Integer.valueOf(numtwostring );
int sum = one + two;
tv.setText (sum.toString()); 
```

等等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:23:50.590

您也可以使用它：

```
 RelativeLayout rl = (RelativeLayout) findViewById(R.id.mRlayout1);
    int total = calculate(rl);
    yourTextView.setText(""+total); 
```

声明这个方法：

```
 // Method called for calculation   
        public int calculate(RelativeLayout layout) {
            int totalval = 0;
            for (int i = 0; i < layout.getChildCount(); i++) {
                View v = layout.getChildAt(i);
                Class<? extends View> c = v.getClass();
                if (c == EditText.class) {
                    EditText et = (EditText) v;
                    totalval += Integer.parseInt(et.getText().toString());                                          
                } 
            }
            return totalval;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:03:17.090

从每个 EditText 中获取文本，并将值相加。然后将生成的字符串显示到 TextView。以下伪代码应该向您展示如何开始。

使用这段代码的关键是填充`tv`和`textboxes`. 此外，如果您的数字是浮点数，您将需要更改总计类型及其解析。

```
ArrayList<EditText> textboxes;
TextView tv;
int total=0
for (edit:textboxes)
{
    total+=Integer.parseInt(edit.getText());
}
tv.setText(text.toString()); 
```

# c# - 绑定 DataGridComboBoxColumn SelectedIndex

> ID：14466026
> 
> 赞同：4
> 
> 时间：2013-01-22T19:01:41.730
> 
> 标签：c#, wpf, datagrid

我知道以前有人问过这个问题。我正在检查是否有任何新的聪明的解决方案。有没有更好的方法来绑定`SelectedIndex`a `DataGridComboBoxColumn`？这就是我在经过大量谷歌搜索后使绑定起作用的方式：

```
<!-- This is a little ridiculous -->
<DataGridComboBoxColumn Header="Batch Type"
    ItemsSource="{Binding Source={StaticResource methodOfPaymentItemsProvider}}">

    <DataGridComboBoxColumn.ElementStyle>
        <Style TargetType="ComboBox">
            <Setter Property="SelectedIndex" 
                    Value="{Binding MethodOfPayment, 
                                    UpdateSourceTrigger=PropertyChanged}" />
        </Style>
    </DataGridComboBoxColumn.ElementStyle>
    <DataGridComboBoxColumn.EditingElementStyle>
        <Style TargetType="ComboBox">
            <Setter Property="SelectedIndex" 
                    Value="{Binding MethodOfPayment, 
                                    UpdateSourceTrigger=PropertyChanged}" />
        </Style>
    </DataGridComboBoxColumn.EditingElementStyle>
</DataGridComboBoxColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T12:24:51.743

这是绑定 DataGridComboBoxColumn 的 SelectedIndex、ItemSource、IsReadOnly 的最佳答案。

```
<DataGridComboBoxColumn Header="Batch Type"
  ItemsSource="{Binding Source={StaticResource methodOfPaymentItemsProvider}}">

  <DataGridComboBoxColumn.ElementStyle>
    <Style TargetType="ComboBox">
        <Setter Property="SelectedIndex" Value="{Binding MethodOfPayment,  UpdateSourceTrigger=PropertyChanged}" />
        <Setter Property="ItemsSource" Value="{Binding Streets, RelativeSource= {RelativeSource FindAncestor,AncestorType=UserControl}, Mode=OneWay}"/>
        <Setter Property="IsReadOnly" Value="True"/>
    </Style>
 </DataGridComboBoxColumn.ElementStyle>
 <DataGridComboBoxColumn.EditingElementStyle>
    <Style TargetType="ComboBox">
        <Setter Property="SelectedIndex" Value="{Binding MethodOfPayment, UpdateSourceTrigger=PropertyChanged}" />
        <Setter Property="ItemsSource" Value="{Binding Streets, RelativeSource={RelativeSource FindAncestor,AncestorType=UserControl}, Mode=OneWay}"/>
     </Style>
 </DataGridComboBoxColumn.EditingElementStyle>
 </DataGridComboBoxColumn> 
```

# android - 与 menudrawer 一起使用时的 Android Webview 渲染

> ID：14466035
> 
> 赞同：2
> 
> 时间：2013-01-22T19:02:20.583
> 
> 标签：android, webview

我们正在使用通常优秀的[Android menudrawer](https://github.com/SimonVT/android-menudrawer)库在我们的应用程序左侧制作一个滑出式菜单。这适用于除 Webviews 之外的所有视图，当菜单来回滑动时会产生各种呈现问​​题，如下所示：

![渲染问题1](../Images/30183d23afad512cf84c0e6faf63a568.png) ![渲染问题 2](../Images/23278c8c5d0a984d2bd849e88c49f320.png)

当您点击 webview 时，它会自行更正，并且页面再次看起来很好，直到您滑出菜单。

是什么原因造成的，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T18:01:45.740

这似乎是硬件层问题。切换到 WebView 的软件渲染可以解决该问题，但代价是渲染性能明显下降。这对我们的目的来说是可以接受的。

我将此添加到布局中的 Webview 中：

```
android:layerType="software" 
```

# php - 从远程页面拉变量

> ID：14466048
> 
> 赞同：1
> 
> 时间：2013-01-22T19:03:10.283
> 
> 标签：php, html, fopen

我想设置一个 fopen 或类似远程 php 文件的脚本，输出如下：

```
version= 1.1.0
date= 01/22/13
link= http://example.com/1.1.0
blah= blah 
```

但是我想远程，把这个文件变成本地php脚本中对应的变量。

我在很多地方都看到过这种做法，但似乎找不到操作方法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:06:30.937

你可以把它做成一个ini文件

```
[Current Release]
version=1.1.0
date="1/22/13" 
```

然后在服务器将请求的文件中

```
$content = parse_ini_file('my_file.ini');
//JSON
echo json_encode($content); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:08:56.867

“文件”返回一个行数组。在“=”上展开这些并分配给变量变量。

```
<?
    $configLines = file('configfile.txt');
    foreach ($configLines as $av)
    {
        list ($a, $v) = explode('=', $av);
        $$a = $v;   
    }

?> 
```

# javascript - 对象有一个属性是一个函数，但控制台说它没有这样的方法

> ID：14466052
> 
> 赞同：1
> 
> 时间：2013-01-22T19:03:20.927
> 
> 标签：javascript, jquery

我正在尝试使用一个名为[jPanelMenu](http://jpanelmenu.com/#api-on)的 jQuery 插件。要使用它，您需要创建一个特殊对象：

```
var jpm = jQuery.jPanelMenu(); 
```

并调用该对象的方法：

```
jpm.on(); 
```

因此，当我创建对象时，我可以键入它的名称并查看它的属性列表，其中确实包含一个“on”属性。

我可以输入`jpm.on`并看到这个属性看起来像一个函数。

我能做到`typeof jpm.on`，它会返回`"function"`。

但是当我打电话时`jpm.on();`，我得到

```
TypeError: Object #<Object> has no method 'on' 
```

这是我在控制台中执行上述所有操作的屏幕截图：

![Chrome 的 JavaScript 控制台中的上述屏幕截图。](../Images/a7c83b7260c692f686698b059923c842.png)

我对 JavaScript 不是很感兴趣，所以我认为这是我基本概念知识的一些差距。这里到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:31:01.293

对不起，伙计们，原来这只是一个疯狂的巧合。我正在运行旧版本的 jQuery，`on`它找不到的方法不是`on`我试图调用的方法，而是`on`在 1.7 版中添加到 jQuery 本身的方法，这显然是在 jPanelMenu 自己的`on`方法中使用的。

我想最大的线索是在 TypeError 中，它说`#<Object> has no method`而不是`jpm has no method`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T19:24:19.897

请查看您是否在 jPanelMenu.js 之前包含了您的 jQuery 库

# c++ - 不带逗号的 C++ 读取用户输入

> ID：14466053
> 
> 赞同：2
> 
> 时间：2013-01-22T19:03:24.480
> 
> 标签：c++, validation, input, user-input

我目前正在为我的 C++ 课做家庭作业，以制作多人井字游戏，但我在程序的输入部分遇到了问题（我几乎所有其他东西都在运行）。

无论如何，我的目标是提示当前玩家输入格式 row,col 中的一行和一列。然后我需要将他们的标记放在一个代表游戏板的二维数组中。

我认为我可以简单地使用 cin 将他们的输入读入一个 char 数组，然后在该数组中获取 0 位置和 2 位置，然后我会从他们的输入中获得我的两个数字。但是，如果我这样做，我最终会得到输入的 ASCII 值，而不是数字（例如，我得到 49 而不是 '1'）。

我觉得我可能忽略了一些非常简单的东西，所以任何输入都会非常有帮助并且非常感谢。这是我所拥有的：

```
void getEntry(char XorO, char gameBoard[GRID_SIZE][GRID_SIZE])
{
    char entry[3];

    cout << XorO << " - enter row,col: ";
    cin >> entry;

    int row = entry[0];
    int col = entry[2];

    //Then I would use the row, col to pass the XorO value into the gameBoard
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:05:24.417

要获得号码，只需执行

```
row = entry[0] - '0';
col = entry[2] - '0'; 
```

这将从 ASCII 转换为实际数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:08:20.087

请注意，您正在读入一个`char`数组。当您将单个`char`s 转换为`int`s 时，您将获得字符`'0'`、`'1'`或的 ASCII（或 Unicode）值`'2'`，而不是整数值`0`、`1`或`2`。要转换单个数字，您可以使用 ASCII 码的一个有用属性：数字字符是连续的。这意味着您可以`'0'`从任何数字中提取代码以获得相应的整数值。例如

```
row = entry[0] - '0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T19:10:55.310

让我们`operator>>`处理解释数字：

```
void getEntry(char XorO, char gameBoard[GRID_SIZE][GRID_SIZE])
{
    int row, col;
    char comma;

    cout << XorO << " - enter row,col: ";
    std::cin >> row >> comma >> col; 

    if( (!std::cin) || (comma != ',') ) {
      std::cout << "Bogus input\n";
      return;
    }

    //Then I would use the row, col to pass the XorO value into the gameBoard
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:10:15.880

```
void getEntry(char XorO, char gameBoard[GRID_SIZE][GRID_SIZE])
{
    char entry[3];

    cout << XorO << " - enter row,col: ";
    cin >> entry;

    int row = entry[0] - '0';
    int col = entry[2] - '0';

    //if grid_size <= 9
} 
```

# jquery - 通过 jquery 选择器查找淘汰赛元素

> ID：14466055
> 
> 赞同：1
> 
> 时间：2013-01-22T19:03:43.837
> 
> 标签：jquery, knockout.js

我有一些用淘汰赛渲染的元素：

```
<div class="chart" data-bind="attr: {'data-chart-id': id}"></div> 
```

然后我想通过数据属性找到 jquery 元素：`$("[data-chart-id='1']")`

但是当我在模型中执行此操作时，`data-chart-id`尚未分配模型。

如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:29:08.933

您可以使用 setTimeout 等待绑定完成或编写[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)：

HTML：

```
<div class="chart" data-bind="customAttribute: {chartId: id}"></div> 
```

JS：

```
ko.bindingHandlers.customAttribute = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
         var value = ko.utils.unwrapObservable(valueAccessor().chartId); 
         $(element).attr('chartId', value);
         // then you can write your jquery code here
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:05:07.563

试试这个：

```
$("body *[data-chart-id='1']"); 
```

# r - 使用 R 在 if/else 语句中进行计数器？

> ID：14466063
> 
> 赞同：0
> 
> 时间：2013-01-22T19:04:16.790
> 
> 标签：r, if-statement, for-loop, counter

我对 R 和一般编程比较陌生，我想知道是否有办法在我的 for 循环中的 if else 语句中放置一个计数器。我在 for 循环中有以下 if/else 语句：

```
if(runif(1)<min(1,r)) {
Gibbsalph[,t]=alphcandidate
} else{
Gibbsalph[,t]=Gibbsalph[,t-1]
} 
```

有没有办法计算循环选择“if”选项的次数（即 Gibbsalph[,t]=alphcandidate 多少次），同时进行迭代？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:25:34.340

这可能很有用，因为它避免了创建全局变量 i。请参阅[R 和 Stata 中全局变量的危险示例](https://stackoverflow.com/questions/5526322/examples-of-the-perils-of-globals-in-r-and-stata)

```
init.counter <- function(){
  x <- 0
  function(){
    x <<- x + 1
    x
   }
}  #source: hadley wickham

> counter1 <- init.counter()
> 
> counter1()
[1] 1
> counter1()
[1] 2
> 
```

要访问计数器的值而不对其进行迭代：

```
environment(counter1)$x 
```

所以它最终会是：

```
counter2 <- init.counter()
if(runif(1)<min(1,r)) {
counter2()
Gibbsalph[,t]=alphcandidate
} else{
Gibbsalph[,t]=Gibbsalph[,t-1]
}
environment(counter2)$x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:47:23.230

这是你现在得到的：

```
if(runif(1)<min(1,r)) 
```

假设您的循环结束了序列`jj = 1:t`，那么：

```
alltests <- runif(t) < min(1,r)  #vector of TRUE, FALSE
wincount <- sum(alltests) 
```

在循环内部，

```
Gibbsalph[,t] <- alphcandidate * alltests[jj] + Gibbsalph[,t-1]*(!alltests[jj]) 
```

# c# - C# - WCF - 从 IIS 到自主机的 Web 服务

> ID：14466066
> 
> 赞同：2
> 
> 时间：2013-01-22T19:04:24.957
> 
> 标签：c#, winforms, wcf, iis

我正在更新一个连接到访问数据库的应用程序，该数据库缺乏任何安全性。

将来，它将在带有 SQL 数据库的 IIS 服务器上，因此我选择创建一个 Web 服务来添加一个额外的安全层。该应用程序可以与 Web 服务和 .NET 开发服务器一起正常工作。

一个月后我可以访问服务器，但应用程序需要在一周内发布，所以我决定让应用程序自托管服务，并使用访问数据库，直到服务器准备好。

实际上，我的解决方案中有两个项目：AppServer 和 AppClient（带有对 AppServer 的 Web 服务引用）。当应用程序运行时，我可以使用 Web 浏览器访问该服务。

如何轻松自托管我的服务，以便在准备好后将主机切换到 IIS 不会很困难？

我尝试过使用 ServiceHost，但效果不佳，因为它是一个 Windows 窗体应用程序，并且我遇到了滞后和超时：

```
Uri httpUrl = new Uri("http://localhost:53333/AppServer.svc");
ServiceHost host = new ServiceHost(typeof(AppServerClient), httpUrl);
host.AddServiceEndpoint(typeof(IAppServer), new WSHttpBinding(), "");

ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
smb.HttpGetEnabled = true;
host.Description.Behaviors.Add(smb);

host.Open(); 
```

我发现在不同线程中运行服务的代码：http: [//www.codeproject.com/Articles/16299/Hosting-WCF-services-in-a-Windows-Forms-Applicatio](http://www.codeproject.com/Articles/16299/Hosting-WCF-services-in-a-Windows-Forms-Applicatio)

我将此代码添加到我的应用程序（URL 与服务参考相同）

```
ThreadedServiceHost<AppServerClient, IAppServer> host = new ThreadedServiceHost<AppServerClient, IAppServer>("http://localhost:53333/AppServer.svc", "", new WSHttpBinding()); 
```

当我运行我的应用程序时，我收到了消息

```
Http://localhost:53333/AppServer.svc connection impossible. 
TCP error code 10061: No connection could be made because the target machine 
actively refused it 127.0.0.1:53333. 
```

当我使用网络浏览器时，我收到以下消息：您已创建服务。要测试此服务，您需要创建一个客户端并使用它来调用该服务。

我读了一些关于通道工厂的内容，当您从 a 到 z 自行托管服务时，这似乎是一个不错的选择，但由于它将很快托管在另一台服务器上，我想避免在应用程序中更改对服务的每次调用.

我真的很感激任何帮助解决这个问题。

# python - 按第二个值对元组列表进行排序，reverse=True，然后按 key，reverse=False

> ID：14466068
> 
> 赞同：36
> 
> 时间：2013-01-22T19:04:36.017
> 
> 标签：python, sorting, dictionary, reverse

我需要首先对字典进行排序，使用 的值`reverse=True`，对于重复值，按键排序，`reverse=False`

到目前为止，我有这个

```
dict = [('B', 3), ('A', 2), ('A', 1), ('I', 1), ('J', 1)]
sorted(dict.items(), key=lambda x: (x[1],x[1]), reverse=True) 
```

返回...

```
[('B', 3), ('A', 2), ('J', 1), ('I', 1), ('A', 1)] 
```

但我需要它是：

```
[('B', 3), ('A', 2), ('A', 1), ('I', 1), ('J', 1)] 
```

如您所见，当值相等时，我只能按照指定的递减方式对键进行排序......但是我怎样才能让它们以递增的方式排序？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-22T19:08:55.393

以下适用于您的输入：

```
d = [('B', 3), ('A', 2), ('A', 1), ('I', 1), ('J', 1)]
sorted(d,key=lambda x:(-x[1],x[0])) 
```

由于您的“值”是数字，因此您可以通过更改符号轻松地反转排序顺序。

换句话说，这种排序按值（`-x[1]`）排序（负号将大数放在首位），然后对于相同的数字，它根据键（`x[0]`）排序。

如果您的价值观不能轻易被“否定”以将大项目放在首位，那么一个简单的解决方法是排序两次：

```
from operator import itemgetter
d.sort(key=itemgetter(0))
d.sort(key=itemgetter(1),reverse=True) 
```

之所以有效，是因为 python 的排序是稳定的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T19:09:19.953

```
In [4]: l = [('B', 3), ('A', 2), ('A', 1), ('I', 1), ('J', 1)]

In [5]: sorted(l, key=lambda (x,y):(-y,x))
Out[5]: [('B', 3), ('A', 2), ('A', 1), ('I', 1), ('J', 1)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T19:14:44.763

你可以使用`collections.defaultdict`：

```
In [48]: from collections import defaultdict

In [49]: dic=[('B', 3), ('A', 2), ('A', 1), ('I', 1), ('J', 1)]

In [50]: d=defaultdict(list)

In [51]: for x,y in dic:
    d[y].append(x)
    d[y].sort()          #sort the list 
```

现在`d`是这样的：

```
 defaultdict(<type 'list'>, {1: ['A', 'I', 'J'], 2: ['A'], 3: ['B']} 
```

即一个新`dict`的`1,2,3...`作为键和相应的字母存储在列表中作为值。

现在您可以使用and遍历`sorted(d.items)`并获得所需的结果。`itertools.chain()``itertools.product()`

```
In [65]: l=[ product(y,[x]) for x,y in sorted(d.items(),reverse=True)]

In [66]: list(chain(*l))
Out[66]: [('B', 3), ('A', 2), ('A', 1), ('I', 1), ('J', 1)] 
```

# php - 如何维护多个 AJAX 调用之间的 mysql 连接？

> ID：14466069
> 
> 赞同：0
> 
> 时间：2013-01-22T19:04:41.443
> 
> 标签：php, mysql, ajax, connection

我有一个使用 jQuery 的网页来执行多个 AJAX 调用，而不是一次。每个 AJAX 调用都是针对不同的 PHP 文件进行的，每个文件都使用到同一个 mysql 服务器和数据库的连接。在每个 AJAX 调用中创建一个连接对于性能来说是很糟糕的，如何创建一个连接并在所有 AJAX 调用中维护它？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:38:42.990

当 PHP 作为 Apache 模块运行时，您可以使用**持久连接**。使用经典（且已弃用）的 libmysql API，您将调用`mysql_pconnect(...)`而不是`mysql_connect(...)`. 这会触发 PHP 在完成请求后不关闭 MySQL 连接，并将**此连接重用于后续请求**。

使用 PDO 时，您可以实现持久连接，如下所示：

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass,
  array(PDO::ATTR_PERSISTENT => true)); 
```

但是，通常建立与数据库服务器的连接对性能的影响应该可以忽略不计（但是，我没有任何基准来证实这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:11:50.650

如评论中所述。这是一个非常糟糕的主意。通过 apache 的 mod_php 运行 PHP 时可能会非常棘手。

> 在每个 AJAX 调用中创建连接对性能来说很糟糕

这个想法是从哪里来的？确保您通过套接字连接。

# android-emulator - 在eclipse上工作的模拟器没有加载

> ID：14466072
> 
> 赞同：0
> 
> 时间：2013-01-22T19:04:58.543
> 
> 标签：android-emulator

我正在尝试使用 eclipse 在 android 模拟器上运行 hello world 程序。模拟器启动，但我的应用程序永远不会在模拟器上加载。我使用的是 windows 7 starter 32 位，1GB RAM，intel Atom 1.66 Ghz 处理器。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:18:39.877

通常android模拟器在eclipse中运行缓慢。在您的事业中尝试[testdoid](http://testdroid.com/)。此外，您可以在[为什么 Android 模拟器这么慢？我们如何加快Android模拟器的速度？](https://stackoverflow.com/questions/1554099/slow-android-emulator)

# java - 按值排序的地图

> ID：14466075
> 
> 赞同：0
> 
> 时间：2013-01-22T19:05:12.160
> 
> 标签：java, sorting, data-structures, map, dataset

我现在有这个，但是当键冲突时我会遇到问题（我通过在双精度中添加一个非常小的数字来解决这个问题。但这不是很好（我真的不想添加小数字）

```
 TreeMap<Double, String> statisticAndTitle = new TreeMap<Double, String>(Collections.reverseOrder()); 
```

该字符串是唯一的，所以如果我有：

*   D 1.1
*   2.0
*   C 4.0
*   1.1
*   3.3

我希望它按 D1 A1 B2 E3 C4 排序（列表中的出现顺序（不按字母顺序）很重要，如果 D1 在列表中的 A1 之前，它也应该在地图中如此（这意味着我不能只排序具有正常排序算法的第二列，因为它不考虑列表中的位置）

关于如何使用地图或其他方式实施的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:28:51.217

> 我希望它按 D1 A1 B2 E3 C4 排序（列表中的出现顺序（非字母顺序）很重要。

List 维护顺序。

创建一个包含 String 字母和 Double 数字的类。实现 Comparable 并在类中编写 compareTo 方法。

创建并加载类列表。

对列表进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:34:37.843

使用`LinkedHashMap`. 它会记住添加的顺序。

# matlab - Matlab surfc 颜色映射着色

> ID：14466076
> 
> 赞同：1
> 
> 时间：2013-01-22T19:05:11.617
> 
> 标签：matlab, colors, 3d, plot

如何创建具有平滑颜色渐变的 3D 图，从最低值到最高值。我尝试过更改颜色图，但唯一可行的选择是“默认”，这看起来很糟糕。大多数颜色都有很大的范围（光谱分布很差。蓝色和红色有很大的扩散，浅蓝色和黄色是细长的颜色条带）。我选择的任何其他颜色图实际上都是纯色。我怎样才能让其他颜色图实际显示为渐变，或定义我自己的颜色图？

这是我尝试过的代码

```
 surfc( X(1,:), V(1,:), (Z(:,:),'EdgeColor','none','LineStyle','none','FaceLighting','phong'  );
  hold on
  shading interp
  colormap('summer');
  set(gca, 'clim', [0,5]); 
```

# c# - 在 C# 应用程序中存储用户设置

> ID：14466078
> 
> 赞同：0
> 
> 时间：2013-01-22T19:05:15.720
> 
> 标签：c#, settings

在花了无数个小时更改我的代码并删除所有不会序列化并将它们更改为字符串并编写函数以从字体/颜色转换为字符串并再次返回之后，我已经厌倦并决定制作我自己的基本序列化程序..

```
private void saveSettings()
{
    PropertyInfo[] properties = typeof(settingsObj).GetProperties();
    foreach (settingsObj s in settings)
    {
        foreach (PropertyInfo property in properties)
        {
            MessageBox.Show(s.[property.Name]);
        }
    }
} 
```

我如何使用字符串引用变量，在 PHP 中我会这样做：

```
$varIWantToRead = "foobar";
$varName = "varIWantToRead";
print $$varName; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:07:44.637

这可以在 exe.config 文件中轻松完成。这是微软的一篇文章：

[http://msdn.microsoft.com/en-us/library/aa730869.aspx](http://msdn.microsoft.com/en-us/library/aa730869.aspx)

您还可以创建自己的类或结构并将它们序列化为 XML：

[http://support.microsoft.com/kb/815813](http://support.microsoft.com/kb/815813)

编辑以回答您的新问题：我不太确定我知道您在说什么，但我们开始吧：

```
In PHP: 
$varIWantToRead = "foobar";
$varName = "varIWantToRead";
print $$varName;

in c#: 
string varIWantToRead = "foobar"; 
string varName = varIWantToRead; 
Console.WriteLine(varName); // Outputs foobar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:08:03.743

您可以使用 winforms 设置的默认行为应用程序设置。[看看微软的简要](http://msdn.microsoft.com/en-us/library/bb397755.aspx)说明，并[在另一个链接中详细介绍](http://msdn.microsoft.com/en-us/library/aa730869.aspx)

XML 是一种动态的数据保存方式，网上有很多示例，例如[本教程](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)和[此 microsoft 链接](http://support.microsoft.com/kb/815813)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:10:09.547

这正是我想要的。

多谢你们。

[将类列表序列化为 XML](https://stackoverflow.com/questions/178899/serializing-lists-of-classes-to-xml)

# java - Java小程序商店安全

> ID：14466087
> 
> 赞同：0
> 
> 时间：2013-01-22T19:05:39.360
> 
> 标签：java, security, paypal, applet

我有一个理论问题。假设我将使用 java 创建购物车并将其作为小程序放在网站上。没有什么复杂的，只是让客户选择对象，按下支付按钮后，我会收到带有订单详细信息的邮件，用户将被重定向到贝宝支付。我真的找不到任何人会如何滥用它的方式，所以我相信它应该是安全的，因为所有付款都将通过贝宝完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:09:41.870

Java 小程序在用户的机器上运行。他们发送给您的任何数据都可能被更改（价格、帐户等）。因此，尽管您可能会收到代表有效订单的价格表格，但您需要在终端进行验证，以确保没有使用订单详细信息.

从那里，它应该生成的唯一订单 ID 可以链接到来自服务器端的贝宝订单（不使用用户的直接输入），并且可能会信任结果。

# php - PHP 使用 file_get_contents 后替换字符串

> ID：14466090
> 
> 赞同：1
> 
> 时间：2013-01-22T19:05:43.403
> 
> 标签：php, preg-replace, file-get-contents, str-replace

嗨，我正在寻找替换通过**file_get_contents加载的 html 电子邮件中的单词**

这是我的代码：

```
<?

$message = file_get_contents("http://www.MYwebsiteExample.com/EmailConfirmation.php");

$message =  preg_replace('/SAD/', "HAPPY", $message);
// Also tried this below and it does not work either
 $message = str_replace('/SAD/', "HAPPY", $message);

?> 
```

我希望找到 SAD 的所有模式（区分大小写）并用 HAPPY 替换它们。出于某种原因，如果我使用**file_get_contents**它似乎不起作用。

谢谢

**更新：2013 年 1 月 22 日**

实际上，抱歉，当我添加 $ 时更正它不起作用。我的代码不需要它。我可以解决这个问题，但这在下面不起作用：

```
$message = str_replace("$SAD", "HAPPY", $message); /// does not work. Not sure why
$message = str_replace("SAD", "HAPPY", $message); /// without the $ it does work. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T19:14:19.863

```
$message = str_replace("$SAD", "HAPPY", $message); 
```

需要是：

```
$message = str_replace('$SAD', "HAPPY", $message); 
```

否则 PHP 会将其解释为变量`$SAD`。有关单引号和双引号之间区别的解释，请参见这篇[文章。](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T19:14:29.707

您不应该为此使用正则表达式；这是简单的字符串替换：

```
$message = strtr($message, array(
    '$SAD' => 'HAPPY',
)); 
```

顺便说一句，如果您使用`"$SAD"`搜索字符串，PHP 将尝试评估一个名为 的变量`$SAD`，该变量不存在，如果您[`error_reporting`](http://au1.php.net/manual/en/function.error-reporting.php)配置为显示它，则会发出通知。

# php - AJAX 调用后访问会话变量和 GET 变量

> ID：14466091
> 
> 赞同：0
> 
> 时间：2013-01-22T19:05:45.197
> 
> 标签：php, jquery, html, ajax, variables

在 AJAX 调用之后，我无法使用我的“旧”变量（PHP 变量、GET 变量）......

例如（添加事件的情况）：

```
function addEvent() {
    var formEvent=new Object;

    $("#formEvent input, #formEvent select").each(function () {
        if(!$(this).is(":disabled")) {
            formEvent[$(this).attr("name")]=$(this).val();
        }
    });

    $.ajax({
        url : "/function/php/event/addEvent.php", 
        data : {
            "dataEvent" : formEvent
        },
        dataType : "text", 
        type : "POST", 
        success : function(data) {
            modal("Inscription", data);
            eval($(data).text());
        }
    });
} 
```

我想在我的 addEvent.php 页面中访问会话变量和 GET 参数（用户名）。

你有什么主意吗 ？是不是因为ajax设置？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:08:49.797

要访问获取参数，您需要`type : "GET",`在 ajax 调用中进行设置，并且您将能够正常获取它们（`$_GET['VARIABLENAME']`）

对于会话变量，您需要`session_start()`在 addEvent.php 中添加一个。

**编辑 ：**

如果你使用 jQuery，要传递你的数据，你可以使用类似的东西

```
data: formEvent.serialize(), 
```

# url - 带有括号的 URL 在带有 datamapper ORM 的 codeigniter 中不起作用

> ID：14466096
> 
> 赞同：0
> 
> 时间：2013-01-22T19:06:03.313
> 
> 标签：url, codeigniter-2, codeigniter-datamapper

我正在将 codeigniter 与 datamapper ORM 一起使用，今天我注意到一个奇怪的错误。

我有一个名为 categories 的函数，它从项目页面链接。到类别的 url 使用类别的名称形成，并使用 rawurlencode 进行编码。

在类别方法中，我解码此 url 字符串并使用 get_by_name 找到类别。这很好用，除非类别名称包含*括号*

假设我有一个属于“字母（英语）”类别的项目“ABCDEFGHI”。现在，运行 rawurlencode 后的类别给出字符串“Alphabets%20%28English%29”，当我运行 rawurkdecode 时，它​​再次按预期变为“Alphabets (English)”。

```
<?php
$a = "Alphabets (English)";
$b = rawurlencode("Alphabets (English)");
$c = rawurldecode($b);
echo ($a == $c); //returns 1
?> 
```

所以我知道 $a 和 $c 是相等的。我什至通过替换确切的字符串值说“字母（英语）”来测试下面给出的方法，它可以工作，但使用 rawurldecode 不能。

但是下面的方法仍然返回 nil 一个 404 页面。

```
function categories($url = '',$page = 1){
    $url = rawurldecode($url);
  //echo $url;
  //I tried echo here and it gives "Alphabets (English)"
    $cat = new Category();
    $cat->get_by_name($url);
  // replacing $url with the string output from echo $url 
  //in above call works. what is happening here?
  // $cat->get_by_name("Alphabets (English)"); works but 
  // $cat->get-by_name($url); doesn't
    if(empty($cat->id)){
        show_404();
    }
    else{
      // work to do//
    }
} 
```

我知道我不应该使用这种方法，我应该为类别的名称命名并在表中添加一个额外的字段。但我现在不想破坏链接。

我希望你能理解我的问题。请给我一些线索。帮我弄清楚问题。

谢谢！

## 已编辑

我读了rawurlencode的手册，有人在这个页面上说[http://php.net/manual/pt_BR/function.rawurlencode.php](http://php.net/manual/pt_BR/function.rawurlencode.php)

另请注意，某些字符当前是“保留的”，但应该被视为“不安全”：这包括括号“()”，当在 MIME 标头中使用 URL 时，这显然是不安全的。

因此，如果有效的 URL 包含“()”字符，则应使用上层编码将 URL 包含在上层协议中定义的一对“不安全”字符（例如“<> " 在 MIME 标头中配对，因为这些字符不能成为有效 URL 的一部分）...

我相信 codeigniter 或 datamapper 或两者都不允许这些括号字符。如果您找到了一些解决方案，请提供帮助。我尝试在 codeigniter 配置中为允许的 uri 字符添加括号，但仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:24:21.647

```
if(empty($genre->id)) 
```

$genre 是什么，你忘了设置 $cat->get_by_name($url) 的返回值为 $genre 吗？

# kohana - Kohana 3 验证网站地址

> ID：14466099
> 
> 赞同：0
> 
> 时间：2013-01-22T19:06:11.577
> 
> 标签：kohana

我想弄清楚，如何验证网站地址的输入字段。我有用户需要放置 youtube 视频地址的字段，例如[http://www.youtube.com/watch?v=biFodVJiqpU](http://www.youtube.com/watch?v=biFodVJiqpU)。我需要根据这个地址[http://www.youtube.com/watch?v=](http://www.youtube.com/watch?v=)检查提供的网址，它是相同的。是否可以使用验证规则正则表达式？如果是，我需要在正则表达式数组中写什么？

```
 protected $_rules = array(
     'video' => array(
     'not_empty' => NULL,
     'regex' => array(''),
     'exact_length' =>array(42)
     ),
 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:17:52.103

试试这个正则表达式，它应该可以工作

```
$pattern = '/^http:\/\/www.youtube.com\/watch\?v=(.+)$/'; 
```

# html - 如果我有以下代码，如何在 CSS 中使背景图像透明？

> ID：14466102
> 
> 赞同：0
> 
> 时间：2013-01-22T19:06:23.173
> 
> 标签：html, css, background-image, transparent

我正在尝试使我的背景图像稍微透明。我在这里阅读了有关此主题的另一篇文章，但尝试时却没有用。我希望我没有提供太少或太多的信息。这是我的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>My Title</title>
<link type="text/css" rel="stylesheet" href="../Stylesheets/stylesheet1.css">
<link type="text/css" rel="stylesheet" href="../Stylesheets/stylesheet2.css">
<link type="text/css" rel="stylesheet" href="../Stylesheets/stylesheet3.css">
</head>

<body>
<div id="container">
    <div id="background" class="translucent"></div>
<div id="content">
    <div id="backgroundIMG">
</div>
</div>

<H1><div align="center">A heading</div></H1>
<p>
<div style="width:890px;height:40px;border:5px dotted Coral;">
CONTENT
</div>

<p>
CONTENT

<div class="index">
<H2>Index</H2>
Home (on now)
<br>
<a href="page2.html">Bored Main Page</a>
<br>
<a href="page3.html">Tables are here!</a>
</div>
</div>

</body> 
```

这是我的样式表：

样式表1：

```
html
{
    font-weight: bold;
}

body
{
margin-left:30px;
margin-right: 30px;
background-repeat: no-repeat;
width: 100%;
height: 100%;
} 
```

样式表2：

```
.index
{
line-height: 1.5em;
padding: 1em;
border: DarkGreen solid 5px;
text-align: left;
width: 890px;
}

.bgCyan
{
background-color: cyan;
color: #525252;
}

.bgGreen
{
background-color: LightGreen;
color: DarkBlue;
}

.bgBoredText
{
background: url(../Images/my_image.jpg) no-repeat center center fixed;
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
}

.translucent
{
opacity: 0.4;
filter: alpha(opacity = 40); /* For IE */
} 
```

样式表3：

```
#container
{
position: relative;
width: 200px;
height: 200px;
}

#background, #content
{
position: absolute;
top: 0;
left: 0;
}

#backgroundIMG
{
background-image: url(../Images/my_image.jpg);
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:11:47.027

据我所知，CSS 不能改变*背景图片*的*不透明度*。您必须在图像编辑程序中更改图像以降低其不透明度。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T16:53:28.157

我有同样的问题，并从另一个 StackOverflow 问题的回答中找到了答案。诀窍是使用 body 元素的 :after 属性。[关联](https://stackoverflow.com/questions/13427774/is-there-an-html-code-that-can-make-my-background-picture-transparent-and-my-tex "关联")

```
 body:after {
        content: "";
        background-image:url('http://www.w3schools.com/css/klematis.jpg');
        background-repeat:repeat;
        background-position:center;
        background-attachment:fixed;
        background-size:cover;
        opacity: 0.5;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        position: absolute;
        z-index: -1;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:13:55.513

将此CSS添加到您的#backgroundIMG

```
 -khtml-opacity: 0.5; 
 -moz-opacity: 0.5; 
 -ms-filter:"alpha(opacity=50)";
  filter:alpha(opacity=50);
  opacity: 0.5; 
```

请注意，使用不同浏览器查看您的页面时会遇到一些困难。例如： IE8（及更早版本）不适用于 opacity 参数。*

# php - 如何在没有 POST 数据的情况下提交表单？

> ID：14466104
> 
> 赞同：0
> 
> 时间：2013-01-22T19:06:38.453
> 
> 标签：php, jquery-ui, jquery

我遇到了一个我自己和在公司工作了 7 年以上的高级开发人员都无法解决的问题，所以我希望你们能提供帮助。PHP 在提交表单后报告 $_POST 为空。尽管我们的大多数用户都使用带有 IE8 的 Windows XP，但值得注意的是，这种操作系统/浏览器组合是唯一遇到问题的组合。此外，我们每天有 125-150 次上传（主要使用 IE8），每周只有 3-5 个用户遇到问题。与我交谈的一位用户过去在同一台计算机上成功上传了多个文档而没有问题，但上周无法上传文档。

是否有其他人遇到过来自 IE8 的表单提交不包含 POST 数据的问题？

我们公司在 jQuery UI 对话框中加载了一个上传表单，用于上传多个文件，带有一个基本的进度表和一个取消按钮。代码很长并且分散在几个文件中，这就是为什么我现在选择不复制/粘贴它的原因，但我会尽力简要说明。

```
<div id="dialog_div">
<div id="form_container">
    <form>
    </form>
</div>
<div id="progress_div">
</div>
</div> 
```

该表单有五个文件输入和一个提交按钮，该按钮最初是禁用的，只有在选择了一个或多个文件时才启用。进度 div 被隐藏并显示表单，然后在提交时，表单被隐藏并显示进度 div。使用 setTimeout()，进度 div 每两秒刷新一次，以显示上传百分比以及取消按钮。我们正在使用 PHP 的会话上传进度来跟踪上传并检查它是否没有超过最大大小。如果它确实超过了最大大小，XHR 将在客户端中止。单击取消按钮运行相同的 JS 函数，该函数用于中止上传太大的文件。单击取消按钮时，接收表单的 PHP 脚本永远不会执行，因此我们的错误日志中不会显示任何内容。

令人困惑的部分是接收表单的 PHP 脚本在我们的日志中生成一个错误，该错误相当于“未收到表单”，因为 $_POST 是空的。用户遇到问题的文件不会太大，我们的工作人员能够使用相同的文件并通过相同的界面为他们上传。单击取消按钮时，脚本永远不会执行，因此我们认为上传中止不是问题。

来自社区的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:15:51.140

我们突然遇到了类似的问题，文件上传失败率约为 3%。与其他人没有问题，只需选择客户。

该问题可追溯到不良的互联网连接和客户端超时。因此，我们所做的就是用自定义的 plupload(http://www.plupload.com/) 实现替换所有内容。这样，文件在客户端被分成小块，然后在服务器上上传和重新组合。这为我们解决了问题，可能值得一试。

# r - 具有重复列名的堆栈

> ID：14466106
> 
> 赞同：2
> 
> 时间：2013-01-22T19:06:51.793
> 
> 标签：r, stack

我想对数据框使用堆栈并保留原始数据框中的重复列名。

```
a1<-data.frame(1:10,11:20,21:30)
colnames(a1)<-c('a','b','a')
a2<-stack(a1) 
```

上面为 a2 中的 'a' 的重复列名添加了 'a.1'。我想将其保留为“a”。堆栈中有任何选项吗？

或者，我尝试使用循环替换所有“a1.1”。我在有许多重复名称的大表中没有成功。有没有更好的例子来替换 r 行中的模式（字符串）？

最后，我在这里问我在论坛上的第一个问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:19:48.083

这是使用基础 R 的通用解决方案：

```
# combine column namesakes
a2<-sapply(unique(names(a1)), 
       function(name) do.call(c, a1[(names(a1) == name)]), 
       USE.NAMES=TRUE,
       simplify=FALSE) # for case when a1 has one row and no duplicate col names
stack(a2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:37:52.600

正如 Arun 所说，`reshape2`这样做会发出警告：

```
require(reshape2)
a2 <- melt(a1, value="values") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T19:43:18.287

通过查看以下代码`stack`：

```
> getS3method('stack', 'default')

function (x, ...) 
{
    x <- as.list(x)
    keep <- unlist(lapply(x, is.vector))
    if (!sum(keep)) 
        stop("at least one vector element is required")
    if (!all(keep)) 
        warning("non-vector elements will be ignored")
    x <- x[keep]
    data.frame(values = unlist(unname(x)), ind = factor(rep.int(names(x), 
        lapply(x, length))), stringsAsFactors = FALSE)
} 
```

如您所见，`...`参数未传递给`data.frame`创建。您可以通过创建 say 来修改此函数，`stack2`如下所示：

```
stack2 <- function (x, ...) 
{
    x <- as.list(x)
    keep <- unlist(lapply(x, is.vector))
    if (!sum(keep)) 
        stop("at least one vector element is required")
    if (!all(keep)) 
        warning("non-vector elements will be ignored")
    x <- x[keep]
    data.frame(values = unlist(unname(x)), ind = factor(rep.int(names(x), 
        lapply(x, length))), stringsAsFactors = FALSE, ...) # note the ... here
}
# after copy/paste of stack2 function
> stack2(a1, check.names = FALSE)
   values ind
1       1   a
2       2   a
3       3   a
4       4   a
5       5   a
6       6   a
7       7   a
8       8   a
9       9   a
10     10   a
11     11   b
12     12   b
13     13   b
14     14   b
15     15   b
16     16   b
17     17   b
18     18   b
19     19   b
20     20   b
21     21   a
22     22   a
23     23   a
24     24   a
25     25   a
26     26   a
27     27   a
28     28   a
29     29   a
30     30   a 
```

注意：不要将`stringsAsFactors = .`参数传递给这个`stack2`函数，因为它已经传递了。可能这就是为什么他们不通过`...`论点？

# mysql - 使用 SQL datareader 将变量设置为标签

> ID：14466110
> 
> 赞同：1
> 
> 时间：2013-01-22T19:07:05.670
> 
> 标签：mysql, vb.net

我花了很长时间才弄清楚这一点，但似乎无法解决问题。我正在使用 MySql 和 Visual Basic。

我正在使用 select 语句来获取我需要的变量，然后使用数据阅读器进行循环，获取变量（到字符串），最后将这些设置为我在表单中使用的文本标签。我确信我正在遵循正确的程序，但这似乎并没有带来结果。

如果有人可以帮助我，我将不胜感激。我的代码如下；

```
 lblName.Text = Form1.topicName

    MyConnString = "Database=case management system;Data Source=localhost;User Id=root;Password="abc"
    Dim MySqlConn As New MySqlConnection(MyConnString)
    Dim MySelectQuery As String = "SELECT topic_id, topic_name, description, useful_links, employee_id, date "             
       & "FROM knowledge_base "
       & "WHERE topic_name = '" & lblName.Text & "'"
    Dim myCommand As New MySqlCommand(MySelectQuery)
    myCommand.Connection = MySqlConn
    MySqlConn.Open()
    myCommand.ExecuteNonQuery()
    mydata = myCommand.ExecuteReader
    While mydata.Read()
        labelDescription.Text = mydata.Item("description").ToString
        labelLinks.Text = mydata.Item("useful_links").ToString
    End While
    mydata.Close()
    myCommand.Connection.Close()
    MySqlConn.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:09:26.460

删除包含`myCommand.ExecuteNonQuery()`. 你在做查询！

此外，标签（描述和链接）将仅包含返回的最后一行中的最后一个数据。

将文本输入直接添加到 SQL 命令允许 SQL 注入攻击。您应该使用 sql 参数。请参阅[http://www.dotnetperls.com/sqlparameter](http://www.dotnetperls.com/sqlparameter)

# mongodb - MongoDB Window 服务连接到文件服务器而非本地磁盘上的“data/db”

> ID：14466118
> 
> 赞同：1
> 
> 时间：2013-01-22T19:07:34.227
> 
> 标签：mongodb, windows-server-2012

我在**Windows 8 服务器上安装了****MongDB 2.2.2** ，但无法启动服务。我正在尝试连接到位于同一网络中的文件服务器上的数据库，但它不会启动并且我收到此错误：

 **```
"ERROR: dbpath (e:/data/db) does not exist.
 Create this directory or give existing directory in --dbpath." 
```

`e:/data/db`是映射目录，我什至尝试过使用连接`\\SERVERNAME\SharedFolder\data\db`，但结果仍然相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:08:01.390

我不确定您尝试启动该服务的内容，但批处理文件如下所示：

```
@echo off 
set data="C:\mongo\data"
set log="C:\mongo\log"
@mkdir %log% 
@mkdir %data% 
set log=%log%\mongo.log"
bin\mongod.exe --dbpath %data% --logpath %log% --install 
net start mongodb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:50:34.023

MongoDB 服务（以特定用户身份运行）必须具有正确的凭据才能访问服务器和驱动器（和目录）。除非您创建了一个新用户（并以该用户身份运行服务），否则它很可能无权访问您提供的路径。

此外，您不能像驱动器映射那样容易地使用映射驱动器作为交互式用户（服务***不是***）。虽然有复杂[的解决方法](https://stackoverflow.com/questions/182750/map-a-network-drive-to-be-used-by-a-service)，但更好的选择是不使用映射路径，而是使用完整（非映射）路径，例如`\\servername\storage\db`.**

# c# - iTextSharp 不呈现 asp:Literal & asp:DataList？

> ID：14466123
> 
> 赞同：0
> 
> 时间：2013-01-22T19:07:50.327
> 
> 标签：c#, asp.net, itextsharp

我有这个问题 iTextsharp 没有呈现以下控制器 asp:Literal & asp:DataList 有人可以帮我解决这个问题页面标记：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="pdfPrintPage.aspx.cs" EnableEventValidation="false" Inherits="Compudata_ProjectManager.pdfPrintPage" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
        <style type="text/css">
            .style1
            {
                width: 100%;
            }
        </style>
    </head>
    <body>
         <form id="form1" runat="server">
     <asp:PlaceHolder ID="ph_pdfPrint" runat="server">
    <div>
            &nbsp;<table class="style1">
                <tr>
                    <td>
                        Task ID: #<asp:Label ID="lbl_taskID" runat="server" Text="Label"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        Created on:
                        <asp:Label ID="lbl_CreatedOn" runat="server" Text="Label"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        Defualt Tech:
                        <asp:Label ID="lbl_DefultTech" runat="server" Text="Label"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        Status:
                        <asp:Label ID="lbl_Status" runat="server" Text="Label"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        Priority:
                        <asp:Label ID="lbl_priorty" runat="server" Text="Label"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        Est. Time :
                        <asp:Label ID="lbl_estTime" runat="server" Text="Label"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        Assigned to :
                        <asp:ListBox ID="lb_AssignedTo" runat="server"></asp:ListBox>

                    </td>
                </tr>
                <tr>
                    <td>
                        Default Tech: <asp:Label ID="lbl_DefaultTech" runat="server" Text="Label"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        Description :
                    </td>
                </tr>
                            <tr>
                    <td>
                       <asp:Literal ID="lit_description" runat="server"></asp:Literal>
                    </td>
                </tr>
            </table>
        </div>
            <h4>Entry</h4>
        <asp:DataList ID="DataList1" runat="server" DataKeyField="billingID" 
            >
            <ItemTemplate>
                billingID:
                <asp:Label ID="billingIDLabel" runat="server" Text='<%# Eval("billingID") %>' />
                <br />
                User Name:
                <asp:Label ID="User_NameLabel" runat="server" 
                    Text='<%# Eval("[User Name]") %>' />
                <br />
                taskID:
                <asp:Label ID="taskIDLabel" runat="server" Text='<%# Eval("taskID") %>' />
                <br />
                actualTotalTime:
                <asp:Label ID="actualTotalTimeLabel" runat="server" 
                    Text='<%# Eval("actualTotalTime") %>' />
                <br />
                createdOn:
                <asp:Label ID="createdOnLabel" runat="server" Text='<%# Eval("createdOn") %>' />
                <br />
                billableTypeID:
                <asp:Label ID="billableTypeIDLabel" runat="server" 
                    Text='<%# Eval("billableTypeID") %>' />
                <br />
                billingNumber:
                <asp:Label ID="billingNumberLabel" runat="server" 
                    Text='<%# Eval("billingNumber") %>' />
                <br />
                summary:
                <asp:Label ID="summaryLabel" runat="server" Text='<%# Eval("summary") %>' />
                <br />
                isCompleted:
                <asp:Label ID="isCompletedLabel" runat="server" 
                    Text='<%# Eval("isCompleted") %>' />
                <br />
                note:
                <asp:Label ID="noteLabel" runat="server" Text='<%# Eval("note") %>' />
    <br />

                dateOfService:
                <asp:Label ID="dateOfServiceLabel" runat="server" 
                    Text='<%# Eval("dateOfService") %>' />
                <br />
                <br />

            </ItemTemplate>
        </asp:DataList>

          </asp:PlaceHolder>                 
    <asp:SqlDataSource ID="assignedToUserList" runat="server" ConnectionString="<%$ ConnectionStrings:Compudata_ProjectManagerConnection %>"
                            SelectCommand="GetAllAssignedUserToTask" SelectCommandType="StoredProcedure">
                            <SelectParameters>
                                <asp:QueryStringParameter Name="taskID" QueryStringField="taskID" Type="Int32" />
                            </SelectParameters>
                        </asp:SqlDataSource>
                            <asp:SqlDataSource ID="SqlDS_TaskBilling" runat="server" SelectCommand="GetAllbillingsTimesForTask"
                SelectCommandType="StoredProcedure" 
            ConnectionString="<%$ ConnectionStrings:Compudata_ProjectManagerConnection %>">
            <SelectParameters>
                <asp:QueryStringParameter DbType="Int32" Name="TaskID" 
                    QueryStringField="taskID" />
            </SelectParameters>
        </asp:SqlDataSource>
        </form>

    </body>
    </html>

C# code 

 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.IO;
    using iTextSharp.text;
    using iTextSharp.text.html.simpleparser;
    using iTextSharp.text.pdf;
    using System.Drawing;
    using Compudata_ProjectManager.CodeFile.BOL;

    namespace Compudata_ProjectManager
    {
        public partial class pdfPrintPage : System.Web.UI.Page
        {
           protected void Page_Load(object sender, EventArgs e)
            {
                int taskID = Convert.ToInt32(Request.QueryString["taskID"]);
                populatePage(taskID);

                bindListBox();
                bindDataList();
                System.Threading.Thread.Sleep(3000);
                PDF_Export();
            }

           private void bindDataList()
           {
               DataList1.DataSource = SqlDS_TaskBilling;
               DataList1.DataBind();
           }

           private void bindListBox()
           {
               lb_AssignedTo.DataSource = assignedToUserList;
               lb_AssignedTo.DataTextField = "UserName";
               lb_AssignedTo.DataValueField = "UserId";
               lb_AssignedTo.DataBind();
           }

            private void populatePage(int taskID )
            {
                Task task = Task.GetTaskDetail(taskID);
                lbl_taskID.Text = task.TaskID.ToString();
                lbl_CreatedOn.Text = task.CreatedOn.ToString();
                lbl_DefultTech.Text = task.DefaultTeck;
                lbl_Status.Text = task.Status.ToString();
                lbl_priorty.Text = task.Priority.ToString();
                lbl_estTime.Text = task.EstTime.ToString();
                lbl_DefaultTech.Text = task.DefaultTeck.ToString();
                lit_description.Text = task.Description.Replace("\r\n", "<br/>").ToString();
            }

            protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
            {
                if (e.Row.RowType == DataControlRowType.DataRow)
                {
                    string decodedText = HttpUtility.HtmlDecode(e.Row.Cells[4].Text);
                    e.Row.Cells[4].Text = decodedText;

                }
            }

            private void PDF_Export()
            {
                int taskID = Convert.ToInt32(Request.QueryString["taskID"]);
                Task task = Task.GetTaskDetail(taskID);
                //Set content type in response stream
                Response.ContentType = "application/pdf";
                Response.AddHeader("content-disposition", "attachment;filename=" + task.TasKName + ".pdf");
                Response.Cache.SetCacheability(HttpCacheability.NoCache);
                //Render PlaceHolder to temporary stream
                System.IO.StringWriter stringWrite = new StringWriter();
                System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
                ph_pdfPrint.RenderControl(htmlWrite);
                StringReader reader = new StringReader(stringWrite.ToString());
                //Create PDF document
                Document doc = new Document(PageSize.A4);
                HTMLWorker parser = new HTMLWorker(doc);
                PdfWriter.GetInstance(doc, Response.OutputStream);
                doc.Open();
                try
                {
                    ////Create a footer that will display page number
                    parser.Parse(reader);
                }
                catch (Exception ex)
                {
                    //Display parser errors in PDF.
                    //Parser errors will also be wisible in Debug.Output window in VS
                    Paragraph paragraph = new Paragraph("Error! " + ex.Message);
                    //paragraph.SetAlignment("center");
                    Chunk text = paragraph.Chunks[0] as Chunk;
                    doc.Add(paragraph);
                }
                finally
                {
                    doc.Close();
                    Response.Write(doc);
                }

            }

            public override void VerifyRenderingInServerForm(Control control)
            {
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:06:28.450

只要找到答案。我必须添加这 2 行

```
 lit_description.RenderControl(htmlWrite);
    DataList1.RenderControl(htmlWrite); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-23T09:23:39.543

对于遇到相同问题的其他人，请记住，当使用 HTMLworker 尝试解析包含`<hr>`标签的 HTML 时，iTextSharp 会引发空异常。

# scala - 如何用其他树替换子树？

> ID：14466124
> 
> 赞同：3
> 
> 时间：2013-01-22T19:07:52.313
> 
> 标签：scala, macros, abstract-syntax-tree, scala-macros

在 Scala 宏中，我想做这样的事情：

我有一个`Tree`（可能很大）。现在我想找到这棵树的一个具有某种具体形式的子树，例如`Apply(_, _)`. 现在我想创建一个新树，它是原始树的副本，但是找到的子树被其他树替换。

有了这样的东西，我可以例如用调用一些其他方法来替换调用一些方法。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:45:41.830

我对看到树转换的替代方法非常感兴趣，但是，它们还没有出现（实际上我们在这个方向上正在进行调查）。

为了同时完成任务，您可以扩展`Transformer`、覆盖其`transform`方法，然后针对您感兴趣的树的具体形式进行模式匹配。调用`super.transform`以递归替换子树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T04:56:17.293

是否可以？？？绝对**是的**！

一般概念是“持久数据结构”。那些在新变体中尽可能“保留”原始价值的人。

说到树木，“拉链”的概念是适用的。它使您可以导航到图形结构，同时维护允许重建新值的数据结构，该新值与原始模数最大程度地共享您为创建新变体而应用的更改。

看看这个。可以找到许多参考资料以及实现，包括 ScalaZ。

# ubuntu - 如何在启用 ares 的情况下安装 curl

> ID：14466130
> 
> 赞同：10
> 
> 时间：2013-01-22T19:08:09.223
> 
> 标签：ubuntu, curl, libcurl

我已经通过 apt-get 在最新的 ubuntu 上安装了 curl，并且效果很好，但是我一直在阅读有关 DNS 查找的阻塞性质的信息，并发现它降低了我的应用程序的速度。

我已经完成了 apt-get install libc-ares2 但我不确定如何告诉 curl 在查找时使用该库。

我将这个问题发布到 AskUbuntu，但被告知这里可能更好..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-02-01T18:05:50.343

如果您想要可安装`.deb`的软件包而不是将所有内容都放入`/usr/local`，请执行以下操作：

```
sudo apt-get build-dep curl
sudo apt-get install libc-ares-dev build-essential
apt-get source curl
cd curl-* 
```

这将下载`curl`带有 Debian/Ubuntu 构建文件和补丁的源代码。

编辑文件`debian/control`：添加行`libc-ares-dev`到`Build-Depends`

编辑文件`debian/rules`：删除`--enable-threaded-resolver`并添加`--enable-ares`到`CONFIGURE_ARGS`

可选：在 的第一行增加版本号`debian/changelog`，例如`7.38.0-4+deb8u5`，`7.38.0-4+deb8u6`这样当您安装系统更新时，您的包不会被覆盖。

现在运行命令

```
dpkg-buildpackage -us -uc -b -j4 
```

它会在编译时间过长后生成几个 .deb 文件，在编译时去喝咖啡什么的。

您可以使用以下命令安装新`curl`的支持：`c-ares`

```
cd ..
sudo dpkg -i curl_*.deb libcurl3-*.deb libcurl4-openssl-dev*.deb 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T19:10:53.397

我认为 AskUbuntu 认为这是一个编程问题，而不是配置问题。您通过`apt-get`命令获取的二进制文件未使用 libc-ares2（作为外部库或链接库）编译。当您获取`libc-ares2`您的计算机时，它可能会[从 source](http://curl.haxx.se/download.html)构建您想要的 cURL 版本，但现在真正的工作已经开始。

通常，您会下载源代码并查找名为 README 或 INSTALL 的文件。它将（希望）谈论具有类似`./configure`. 从这里您可以指定编译时选项。cURL 的 make 文件也有可能自动检测它的存在`libc-ares2`并将其包含在它的构建中。

但是，在没有`INSTALL`文件的情况下查看最新的源版本有一个`configure`脚本。看看它的来源，它有这一行：

```
--enable-ares[=PATH]    Enable c-ares for DNS lookups 
```

如果从源文件夹运行此命令：

```
./configure --enable-ares && make && sudo make install 
```

然后你就有机会获得你想要的 curl 版本。很可能有很多与其他缺少库或缺少 make 和 GCC 相关的错误消息。在这个答案中，这将更难解决。

[这是](https://web.archive.org/web/20160112143117/http://curl.haxx.se/dev/readme-ares.html)cURL 项目主页上的一个页面，它会告诉你这些步骤

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T19:01:47.630

您需要单独安装 ares。你可以[在这里](http://c-ares.haxx.se/)下载。下载后，构建 c-ares（当前工作目录为“c-ares-${VERSION}”）：

```
cd /path/to/c-ares-${VERSION}
./configure --prefix=/destination/path/for/ares/install (NOTE: if you specify a destination directory, it must exist already! If you don't specify a prefix, content should be install at location /usr/local/include/)
make
make install 
```

[按照此](http://curl.haxx.se/dev/readme-ares.html)

现在构建了 ares，您可以使用 ares 构建 libcurl。我在引用 ares 时遇到了问题，所以我不得不将 ares 源直接复制到 libcurl 中。为此，将“make install”创建的“include”目录从配置 ares 重命名为“ares”。然后，将此目录复制到 libcurl 的根目录。您现在可以使用 ares 选项构建 libcurl（当前工作目录是 libcurl）：

```
cd /path/to/libcurl
./configure --enable-ares 
```

完整示例：

```
cd /User/${USER}/c-ares-1.10.0
mkdir installation
make clean
./configure --prefix=/User/${USER}/c-ares-1.10.0/installation
make
make install
mv installation/include installation/ares
cp installation/ares /User/${USER}/libcurl/
cd /User/${USER}/libcurl/
./configure --enable-ares
make
make install 
```

**编辑（2015 年 6 月 30 日）：**

要知道，如果您要交叉编译 libcurl，则需要使用相同的交叉编译器设置（--host 选项）交叉编译 c-ares。

希望这可以帮助！

# r - R 中的相对频率，带有正态曲线和 bin

> ID：14466133
> 
> 赞同：0
> 
> 时间：2013-01-22T19:08:39.790
> 
> 标签：r

我是R的初学者。

我正在创建一个相对频率直方图（从具有 1,000 个样本 2 的随机统一数），其顶部覆盖有正态曲线。

到目前为止，这是我对代码的尝试：

```
set.seed(32423432)
x1 <-runif(2000,0,1)
m<-matrix(x1,ncol=2)
msum<-apply(m,1,sum)
bins=seq(-4,4,by=.2)
msum2<-msum/2
msum2<-msum2-(1/2)
msum2<-msum2*sqrt(2)
hist(msum2,breaks=bins, freq= FALSE, right=FALSE) 
```

我对此有一些问题：

1.  y 轴上的百分比对我来说毫无意义（我希望看到 0 到 0.5 之间的值）
2.  我应该看到更多的垃圾箱
3.  我不知道如何将 x 轴标签更改为每 .4
4.  我似乎无法在这个直方图上得到一条正常曲线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:51:39.183

1.  整个图上的密度总和为 1（请注意，您的区间大小小于 1）。请参阅`?hist`“如果`all(diff(breaks) == 1)`，它们是相对频率计数/n”
2.  如果 msum2 的范围更大，您会看到更多的 bin

    > 范围（msum2）[1] -0.6918129 0.6795006

    `hist(c(1,1,3,3 -3.5,-3.5, msum2),breaks=bins, freq= FALSE, right=FALSE)`

3.

```
hist(msum2,breaks=bins, freq= FALSE, right=FALSE, xaxt="n")
axis(1,at=bins,labels=bins) 
```

4\. 正态曲线

`x <- seq(-4, 4, length=100)`

```
`lines(x,dnorm(x))` 
```

# performance - 实现映射的数据结构，并针对常用键的查找进行了优化

> ID：14466134
> 
> 赞同：1
> 
> 时间：2013-01-22T19:08:40.383
> 
> 标签：performance, data-structures, map

当我不断寻找相同的键时，我所知道的数据结构（例如 b-tree 或 rb-tree）不会改变。我正在寻找一种在运行时优化自身的数据结构，以便更快地查找常用键。现在我有一个像这样的天真的实现：

```
ValueType MyNaiveMap::get(KeyType key) {
  innerMap.addFreq(key);
  if (key == mostFreqUsedKey1) {
    return val1;
  } else if (key == mostFreqUsedKey2) {
    return val2;
  }
  else {
    return innerMap.get(key);
  }
} 
```

钥匙总是`int`在我的情况下。

更新：

我忘了提到哈希图。因为地图可能会增长到非常大的大小，所以我试图避免调整大小，这在运行时是 O(n) 复杂的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:57:57.393

如果您提前知道总大小，或者如果由于调整大小而导致的 O(n) 插入（但在平均情况下仍为 O(1) 摊销）对您来说是可以的，那么我认为哈希表是最好的选择。调整大小时复制整个表的一次性命中也可以通过使用[增量调整大小](http://en.wikipedia.org/wiki/Hash_table#Incremental_resizing)分布到多个操作中。

您必须保持哈希表部分为空以避免冲突，这可能感觉像是在浪费内存。但是对于基于树的映射，通常每个项目至少有一个额外的指针，这也会“浪费”大量内存。此外，使用哈希表，您可以调整其中的多少以保持空白，部分交易性能以换取内存（反之亦然）。

但是还有一个基于树的数据结构优化用于查找最近访问的键：[splay tree](http://en.wikipedia.org/wiki/Splay_tree)。它使用旋转将最近使用的键保持在根附近，同时仍保持 O(log n) 的分摊最坏情况以进行插入和搜索。（那个“摊销”位很重要，一些操作仍然可以是 O(n)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:13:11.223

您可以在内部跟踪最常用的 X 值/键。对您首先检查的这些值进行快速缓存（在检查较大的数据树之前）。跟踪项目被访问/查看的次数。如果在视图中，该项目的查看次数超过列表中的最后一项，您可以确定在迷你列表中的位置。这样，要查看您是否将新项目添加到此快速查找中，您只需检查其中的最后一个值以查看是否需要替换它。

定期使用最高查找值。

# ms-access - Access 2010 子表单重新查询不工作，但在 2003 年？

> ID：14466138
> 
> 赞同：0
> 
> 时间：2013-01-22T19:08:50.350
> 
> 标签：ms-access, ms-access-2010, subform

我试图弄清楚为什么一个子表单 Requery 在 Access 2010/2007 中没有显示更改的记录（或新的或删除的），当它在 2003 年工作时？

如果我关闭/重新打开表单，这些值是正确的，但直到那时才正确？2007/2010 年有什么变化需要额外的步骤吗？

这是多个表单使用的子表单 - 我不会尝试根据主表单上发生的任何事情等来刷新/requrey。SUBform上有一个按钮可以进行此调用以向上移动记录（重新排序行);

该数据库是 SQL Server 2005，如果有任何区别，则不是本地访问。

```
Private Sub btnUp_Click()
On Error GoTo Error_Handler
Dim blnUpdateSwitch As Boolean
    blnUpdateSwitch = False
Dim blnRemoval As Boolean
    blnRemoval = False

' Commit any outstanding edits before moving the records.

Me.Refresh

Dim intCurrentRecord As Integer
intCurrentRecord = Me.CurrentRecord
If Me.Recordset!blnSwitch = True Then blnUpdateSwitch = True
If intCurrentRecord >= 2 Then
    Me.Recordset.Edit
    Me.Recordset!lngSequence = intCurrentRecord - 1
    Me.Recordset.Update

    Me.Recordset.MovePrevious

    Me.Recordset.Edit
    Me.Recordset!lngSequence = intCurrentRecord
    Me.Recordset.Update

    Me.Recordset.Requery
    If blnUpdateSwitch Then CalculateSwitchOrder

    Me.Recordset.AbsolutePosition = intCurrentRecord - 2

    Me.Requery

End If

Exit Sub

Error_Handler:

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T23:36:18.497

尝试更换`Me.Requery`为`Me.Form.Requery`

此外，您可以对`Me.Refresh`to执行相同操作`Me.Form.Refresh`

# mysql - 数据透视表上的外键和约束，删除级联

> ID：14466140
> 
> 赞同：3
> 
> 时间：2013-01-22T19:08:52.950
> 
> 标签：mysql, database, database-design, innodb

我设计了我的数据库结构，如下所示，以支持创建多个商店和分配给这些商店的用户。我的表使用 InnoDB 存储引擎。

```
[user]  
user_id 

[user_profile]  
user_profile_id  
user_id

[user_to_shop] PIVOT 
user_id  
shop_id

[shop]  
shop_id

[shop_profile]  
shop_profile_id  
shop_id  

[category_to_shop] PIVOT  
category_id  
shop_id

[category]  
category_id

[category_description]  
category_description_id  
category_id 

[product_to_category] PIVOT  
product_id
category_id

[product_to_shop] PIVOT
product_id
shop_id

[product]
product_id

...  
... 
```

我想要实现的是在删除用户（user_id）时删除所有相关记录（类别记录，商店记录，...，...）。

我为每个实体创建了约束。因此，当我删除 user_id(1) 时，引擎也会负责删除 user_profile(user_id(1))。

```
ALTER TABLE `user_profile`
ADD CONSTRAINT `user_profile_cs1`
FOREIGN KEY (`user_id`) REFERENCES `user`(`user_id`)
ON DELETE CASCADE 
```

但是我应该如何处理数据透视表？我应该如何在这些表上声明约束或外键以完成工作并确保安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:32:33.233

创建删除链：将 FK 约束添加到依赖于 C 的数据透视表 ([C]) 或 [D]，如下所示）

```
[A]
idA
dataA

[B]
idB
dataB

[C]
idC
idA
FOREIGN KEY (idA) REFERENCES A(idA)
ON DELETE CASCADE
idB
FOREIGN KEY (idB) REFERENCES B(idB)
ON DELETE CASCADE

[D]
idD
idC
FOREIGN KEY (idC) REFERENCES C(idC)
ON DELETE CASCADE 
```

操作顺序

```
Delete(A) -> Delete(C) -> Delete(D)
Delete(B) -> Delete(C) -> Delete(D) 
```

# android - 需要一些帮助调试。DownloadManager 下载的图片突然消失

> ID：14466142
> 
> 赞同：0
> 
> 时间：2013-01-22T19:08:56.640
> 
> 标签：android, image, file, download, download-manager

我有一个非常神秘的问题，我什至不知道如何调试。

我在我的应用程序中尝试做的是下载图像并将它们呈现在画廊中。但有时它们会消失（不是全部）。即使我不使用应用程序。到目前为止，我还没有实现删除功能，所以它不可能是应用程序中导致它的任何东西。DownloadManager 可以在一段时间后删除它们吗？我正在使用 BitmapFactory 来解码文件。这有关系吗？

有没有人暗示我应该去哪里看？

谢谢

编辑：只是为了说清楚。文件下载有两种方式。一个在第一次启动，第二个是每 X 分钟服务一次。只是为了确保我关闭了服务。初始化图像后，一切正常。但一段时间后（例如两个小时后），其中一些消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:40:26.707

缓存是否已满？您是否检查过引用没有被垃圾收集？

# python - 在python中，定义一个带有函数的模块还是一个带有包含函数的类的模块被认为更好？

> ID：14466147
> 
> 赞同：3
> 
> 时间：2013-01-22T19:09:17.807
> 
> 标签：python

在我的代码中，上述两个选项中的任何一个都可以很好地工作，但我有兴趣找出这两种方法的优缺点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T19:12:05.843

如果函数是完全无状态的，那么带有函数的模块就可以正常工作并且更简单。

另一方面，如果涉及到状态，通常最好将该状态封装在一个类中，并通过成员函数提供功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:44:08.833

首先，python 中的每件事都是一个对象，因此，在使用函数而不是类的性能方面没有太大的差异，反之亦然。

如果您是初学者，那么我建议您使用带有函数的模块，因为它更容易、更直接。

这种技术的缺点是你可能在同一个模块中有很多功能，这使得在精神上更难跟踪和记住哪些模块中有哪些功能

如果您对使用类感到满意，它将提供封装的力量（数据/属性+方法/逻辑），并将所有逻辑相关的东西放在一个容器中，即类，那么您可以从这里开始。

您可以自定义您希望您的类如何在代码中进行交互，方法是添加：元类、描述符和所有 python 特殊函数，它们可以覆盖类中每个部分的默认行为。

使用类，将帮助您更好地从逻辑上表示现实世界的问题，例如，您可以说我有一个机器类，用数据/属性描述它的所有属性/规范，并定义它的行为方式、接受输入并使用方法产生输出. 当你编写一个新的协议或标准时，同样的事情也会发生，用可以用逻辑实体/容器描述每一个的类来表示它的组件/输入/输出/行为会更容易。

此外，类更适合团队合作，你不会自己写所有东西，你的项目必须有一个蓝图，这个蓝图应该被翻译成更小的块、输入和输出；在这种情况下最好使用类。

# java - Java编译器可以避免Log4j参数的参数表达式评估吗

> ID：14466149
> 
> 赞同：1
> 
> 时间：2013-01-22T19:09:20.973
> 
> 标签：java, optimization, log4j

我正在尝试将表达式跟踪到 Log4j。

假设这个表达式的计算是昂贵的，并且不会产生任何副作用，那么 Java 是否足够聪明以防止在 WARN 模式下表达式计算的开销？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:11:33.973

不，这正是您`if(logger.isXXXEnabled())`在代码库中散布大量检查的原因。我建议你转向 slf4j 以避免这种评估（只要你正确使用它，即[参数化日志记录](http://www.slf4j.org/faq.html#logging_performance)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:14:05.577

我不太确定，你的意思。如果理解正确，您的意思是，答案是：否

```
log.trace("this log" + something() + " is expensive"); 
```

如果您不希望计算此日志语句，则需要包装代码：

```
if(log.isTraceEnabled()) log.trace("this log" + something() + " is expensive"); 
```

# javascript - 如何将 Gridster 与 div 一起使用（不是 ul）

> ID：14466151
> 
> 赞同：4
> 
> 时间：2013-01-22T19:09:26.137
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop, gridster

我正在尝试使用[Gridster](http://gridster.net/)，即 jQuery 拖放库。但是，我的 HTML 的结构与此 JSFiddle ( [http://jsfiddle.net/twashing/4xc6s/5/](http://jsfiddle.net/twashing/4xc6s/5/) ) 中的结构相同。而且我无法让gridster工作。即，不会发生拖放行为。

我的 HTML 结构有 div，而不是在无序列表 (ul > li) 中列出项目。**i)**我想让 .section-box 类可拖动，并相互替换。我怎样才能用 Gridster 做到这一点？

**ii）**除此之外，如果可能的话，我什至可以使表格行（ tr ）元素成为可拖动的东西。

JSFiddle：http: [//jsfiddle.net/twashing/4xc6s/5/](http://jsfiddle.net/twashing/4xc6s/5/)

**HTML**

 `````
<tbody>
    <tr style="" class="ready">
        <td style="position: relative;">
            <div class="edit-section" style="">Planet of the Apes</div>
        </td>
    </tr>
    <tr data-id="15AE995E-2630-A314-81EB-DB1C46F147F4" style="" class="ready">
        <td style="position: relative;">
            <div class="section-box grid-top-row" data-id="1" data-row="1" data-col="1" >
                <div class="section-box-overlay" >1</div>
            </div>
        </td>
    </tr>
    <tr class="vertical-line ready" style="">
        <td style="position: relative;">
            <div class="vertical-line-left"></div>
            <div class="vertical-line-right"></div>
        </td>
    </tr>
    <tr data-id="CE29FFE8-4A61-CE84-0137-E2464705C588" style="" class="ready">
        <td style="position: relative;">
            <div class="section-box" data-id="2" data-row="2" data-col="1" >
                <div class="section-box-overlay" >2</div>
            </div>
        </td>
    </tr>
    <tr class="vertical-line ready" style="">
        <td style="position: relative;">
            <div class="vertical-line-left"></div>
            <div class="vertical-line-right"></div>
        </td>
    </tr>
    <tr style="" class="ready">
        <td style="position: relative;">
            <div class="section-box-add">
                <div class="section-box-add-label"></div>
                <div class="box-label" style="color: rgb(95, 95, 97);">Add a related screen
                    <br>to this section</div>
            </div>
        </td>
    </tr>
</tbody> 
````  `**Javasctipt**

 `````
$(function() {
    $("tbody > tr > td").gridster({
        widget_margins: [5, 5]
    })
}); 
````  `谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T21:26:31.000

我会尝试这样的事情：

```
$(function() {
    $("tbody tr").gridster({
        widget_margins: [5, 5],
        widget_selector: "> td"
    })
}); 
```

但是你错过了这个`.data('gridster')`部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T02:40:46.293

gridster.js ( [http://dsmorse.github.io/](http://dsmorse.github.io/) )的**dmorse**分支可以“使用 divs not li” 。

每个可移动项目都可以由 DIV 构造（而不是通常的 LI）包装或定义。

只需给每个 DIV 元素一个有意义的类名并使用 [widget_selector: classnameORhtmlconstruct] 参数告诉 Gridster 查找 div.myclassname。

如果不更改此参数，则假定为 LI（列表项）

例子：

```
<div class="gridster">
    <div class="myGrid"><!-- grid elements now -->
       <div class="myGridItem" data-sizey="2" data-sizex="2" data-col="4" data-row="1">... stuff in here</div>
       <div class="myGridItem" data-sizey="1" data-sizex="1" data-col="1" data-row="3">... stuff in here</div>
       etc etc
    <!-- end grid elements --></div>
</div> 
```

在函数调用中：

```
 $(function(){
    gridster = $(".gridster > div.myGrid").gridster({
    widget_margins: [5, 5],
    widget_selector: 'div.myGridItem'
   }).data('gridster'); 
```````

# sql - 如何将重复的列转换为行？

> ID：14466153
> 
> 赞同：0
> 
> 时间：2013-01-22T19:09:31.567
> 
> 标签：sql, sql-server

我有一个表，其中一列中具有唯一值的行。我怎样才能将这些放在一行中，以便一个条目有多个条目？

例如这里是一个表...

```
create table visit_view
(
  last_name varchar(25),
  first_name varchar(25),
  middle_name varchar(25),
  dob datetime,
  di datetime,
  m varchar(20),
  d varchar(12),
  d_sequence_num smallint
)

insert into visit_view values ('LEE','BUDDY','','05/20/2010','10/01/2012','123456','786.2','2') 
insert into visit_view values   ('LEE','BUDDY','','05/20/2010','10/01/2012','123456','784.99','3') 
insert into visit_view values ('TU','BIBO','LU','09/29/2012','10/01/2012','321456','774.6','1') 
insert into visit_view values ('SMITH','BOBBIE','JOE','09/29/2012','10/01/2012','321654','V50.2','1')
insert into visit_view values ('LEWIS','CAREY','','11/11/2011','10/01/2012','654123','057.9','2')
insert into visit_view values ('LEWIS','CAREY','','11/11/2011','10/01/2012','654123','074.3','3')
insert into visit_view values ('RAMIREZ','HECTOR','','04/21/2011','10/02/2012','654321','381.81','2')
insert into visit_view values ('RAMIREZ','HECTOR','','04/21/2011','10/02/2012','654321','786.09','3')
insert into visit_view values ('RAMIREZ','HECTOR','','04/21/2011','10/02/2012','654321','380.4','4')
insert into visit_view values ('RAMIREZ','HECTOR','','04/21/2011','10/02/2012','654321','478.19','5') 
```

我的查询看起来像这样......

```
SELECT  
    first_name AS FirstName, 
    ISNULL(middle_name, '') AS MI, 
    last_name AS LastName, 
    CONVERT(varchar,dob, 101) DOB,
    CONVERT(varchar,di,101) DCdate,
    CAST(m AS INT) AS MR,
    d AS Diag
FROM 
    visit_view 
WHERE 
    d_sequence_num>1
    AND DATEDIFF(year,dob,GETDATE()) <= 3
ORDER BY di,d_sequence_num ASC 
```

我的输出是

```
FIRSTNAME MI LASTNAME DOB DCDATE MR DIAG 
CAREY  LEWIS 11/11/2011 10/01/2012 654123 057.9 
BUDDY  LEE 05/20/2010 10/01/2012 123456 786.2 
BUDDY  LEE 05/20/2010 10/01/2012 123456 784.99 
CAREY  LEWIS 11/11/2011 10/01/2012 654123 074.3 
HECTOR  RAMIREZ 04/21/2011 10/02/2012 654321 381.81 
HECTOR  RAMIREZ 04/21/2011 10/02/2012 654321 786.09 
HECTOR  RAMIREZ 04/21/2011 10/02/2012 654321 380.4 
HECTOR  RAMIREZ 04/21/2011 10/02/2012 654321 478.19 
```

但我想要这样...

```
FIRSTNAME MI LASTNAME DOB DCDATE MR DIAG 
CAREY  LEWIS 11/11/2011 10/01/2012 654123 057.9 
BUDDY  LEE 05/20/2010 10/01/2012 123456 786.2 784.99
CAREY  LEWIS 11/11/2011 10/01/2012 654123 074.3 
HECTOR  RAMIREZ 04/21/2011 10/02/2012 654321 381.81 786.09 380.4 478.19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:19:51.047

我不确定为什么您`CAREY LEWIS`在结果中显示了两次和`HECTOR RAMIREZ`一次，但是您可以使用以下方式合并行：

```
SELECT  
    first_name AS FirstName, 
    ISNULL(middle_name, '') AS MI, 
    last_name AS LastName, 
    CONVERT(varchar,dob, 101) DOB,
    CONVERT(varchar,di,101) DCdate,
    CAST(m AS INT) AS MR,
    stuff((select distinct ', '+ d 
           from visit_view v1
           where v.first_name = v1.first_name
           FOR XML PATH('')),1,1,'') Diag   
FROM visit_view v
WHERE d_sequence_num>1
    AND DATEDIFF(year,dob,GETDATE()) <= 3
GROUP BY first_name, middle_name, last_name, dob, di, m
ORDER BY di ASC 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8de2d/7)

给出结果：

```
| FIRSTNAME | MI | LASTNAME |        DOB |     DCDATE |     MR |                           DIAG |
-------------------------------------------------------------------------------------------------
|     BUDDY |    |      LEE | 05/20/2010 | 10/01/2012 | 123456 |                  784.99, 786.2 |
|     CAREY |    |    LEWIS | 11/11/2011 | 10/01/2012 | 654123 |                   057.9, 074.3 |
|    HECTOR |    |  RAMIREZ | 04/21/2011 | 10/02/2012 | 654321 |  380.4, 381.81, 478.19, 786.09 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:19:33.347

我建议调查`CROSS APPLY`和`FOR XML`：

```
SELECT  DISTINCT
    first_name AS FirstName, 
    ISNULL(middle_name, '') AS MI, 
    last_name AS LastName, 
    CONVERT(varchar,dob, 101) DOB,
    CONVERT(varchar,di,101) DCdate,
    CAST(m AS INT) AS MR,
     STUFF(D2.d, 1, 1, '')  AS Diag
FROM 
    visit_view v
CROSS APPLY ( SELECT ',' + d
              FROM visit_view v2
              WHERE v.last_name = v2.last_name
              ORDER BY d_sequence_num 
                  FOR XML PATH('') )  D2 ( d )
WHERE 
    d_sequence_num>1
    AND DATEDIFF(year,dob,GETDATE()) <= 3 
```

不确定为什么您的 visit_view 表中没有 ID，或者会在我的 cross apply where 条件中使用它，但这应该会让您朝着正确的方向前进。

这是[SQL 小提琴](http://sqlfiddle.com/#!3/d4ca7/13)。

祝你好运。

# git - Gitorious + GIT 基本设置流程

> ID：14466155
> 
> 赞同：1
> 
> 时间：2013-01-22T19:09:39.540
> 
> 标签：git, gitorious

所以我在一个临时的 AWS 实例上有一个基本的 Gitorious 设置（只是在尝试让它工作），它位于这里：

[http://ec2-54-247-139-166.eu-west-1.compute.amazonaws.com/](http://ec2-54-247-139-166.eu-west-1.compute.amazonaws.com/)

我应该遵循什么过程来实际连接到这里托管的获取存储库？

当我尝试使用 TortoiseGit 进行连接时，我遇到了这个错误：

git 没有完全退出（退出代码 128）

但是，我怀疑这是因为我不知道使用什么公钥/私钥来正确设置所有内容。

基本上现在我有一个网络设置，我该怎么办？

提前致谢！

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:55:32.070

从您的一个 Gitorious 存储库中显示的两个协议是 git 和 https，因此这里不涉及公共和私有 ssh 密钥。

您只需要使用正确的凭据访问 https 地址（例如[http://git.ec2-54-247-139-166.eu-west-1.compute.amazonaws.com/test2/test2.git](http://git.ec2-54-247-139-166.eu-west-1.compute.amazonaws.com/test2/test2.git) for [test2](http://ec2-54-247-139-166.eu-west-1.compute.amazonaws.com/test2)） （登录名+密码）。

# ruby-on-rails - best_in_place gem 初始化

> ID：14466158
> 
> 赞同：5
> 
> 时间：2013-01-22T19:09:47.073
> 
> 标签：ruby-on-rails, best-in-place

导轨 3.2.11

宝石文件：

```
gem 'jquery-rails'
gem "best_in_place" 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require best_in_place 
```

post.js.coffee

```
jQuery ->
  $('.best_in_place').best_in_place() 
```

显示.html.erb

```
<%= best_in_place @post, :title %> 
```

查看了内联表单，但我得到了 js 异常，并且在输入、松散焦点等时没有触发任何内容。回溯：

```
Uncaught SyntaxError: Unexpected token u jquery.js:525
jQuery.extend.parseJSON jquery.js:525
BestInPlaceEditor.setHtmlAttributes best_in_place.js:265
BestInPlaceEditor.forms.input.activateForm best_in_place.js:309
BestInPlaceEditor.activate best_in_place.js:54
BestInPlaceEditor.clickHandler best_in_place.js:260
jQuery.event.dispatch jquery.js:3046
elemData.handle 
```

jquery.js 中的行

```
if ( window.JSON && window.JSON.parse ) {
  return window.JSON.parse( data ); 
```

我该如何解决这个问题？

**upd**问题解决了。做同样的改变，但一切正常。魔法 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:19:42.423

在我的情况下，使用 gem 的 git 版本解决了它。

`gem 'best_in_place', github: 'bernat/best_in_place'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:51:44.167

也许你应该改变

```
jQuery ->
  $('.best_in_place').best_in_place() 
```

至

```
jQuery ($) ->
  $('.best_in_place').best_in_place() 
```

# browser - 是否可以停止浏览器在其历史记录中存储 URL？

> ID：14466159
> 
> 赞同：19
> 
> 时间：2013-01-22T19:09:56.747
> 
> 标签：browser

当用户使用前一页上的链接单击页面时，目标页面是否可以自行从浏览器历史记录中删除其自己的 URL（无需对实际具有链接的页面进行重大修改） ，除非，也许它是一个简单的 HTML 属性或什么）？

显然我不应该在 URL 中存储敏感信息，但在某些情况下，我必须在 URL 中存储一些信息，虽然它不敏感，但最好不要将其存储在历史记录中。（如果这些 URL 出现在历史记录中，它们对用户完全没有用处。）

那么，作为一名 web 应用程序开发人员，我有什么办法可以让这些内容远离历史，至少在某些现代浏览器中是这样吗？（由于 URL 加载的页面上的诸如 HTTP 标头、JavaScript 或 HTML 等内容。）

（我对诸如使用 AJAX、iframe 等获取页面的技术不感兴趣，用户实际上并没有导航到所述 URL，但仍设法从中获取内容。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T20:28:27.107

看起来这是不可能的。

浏览器历史记录将存储 URL。可以做的最好的事情是防止 URL 进入后退/前进按钮，或者使用*“技术，例如使用 AJAX、iframe 等获取页面，用户实际上并没有导航到所述 URL，但仍然管理从中获取内容”*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T19:18:45.310

使用 javascript，您可以使用以下`replace`方法`window.location`：

```
window.location.replace(String url) 
```

在此处查看[文档](https://developer.mozilla.org/en/docs/DOM/window.location)以获取更多详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-21T05:51:55.730

在*某些*情况下，发送`302 Found`响应并重定向到另一个页面可能会起作用。如果您需要隐藏查询字符串参数，您可以在初始重定向响应中使用它们设置会话 cookie，然后使用它们在真实页面上提供响应。请记住在提供页面时清除 cookie。

但这是一种完全服务器端的方法，虽然您可以隐藏敏感数据，但您仍然会在历史记录中看到域上的*某些*页面。

# javascript - 在没有 *.con.js 文件的情况下使用 grunt js 来缩小和连接

> ID：14466161
> 
> 赞同：4
> 
> 时间：2013-01-22T19:09:59.773
> 
> 标签：javascript, concatenation, minify, gruntjs

我一直在使用 grunt.js 连接然后缩小 javascript 文件。我完成这项任务的方式给我留下了一个额外的 script.con.js 文件（连接文件）。除了暂存一个连接文件来缩小之外，我认为没有必要这样做。我在下面的示例中缺少什么？

```
module.exports = function(grunt) {

    // Project configuration.
    grunt.initConfig({
        concat: {
            'app/webroot/js/script.con.js': [
                'app/webroot/js/plugins/plugins.js',
                'app/webroot/js/main.js'
            ]
        },
        min: {
            'app/webroot/js/script.min.js': 'app/webroot/js/script.con.js'
        },
        watch: {
            files: ['app/webroot/js/main.js'],
            tasks: 'concat min'
        }
    });

    // Default task.
    grunt.registerTask('default', 'concat min');

}; 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:51:48.750

连接和缩小对我来说是这样的：

```
grunt.initConfig({
    min: {
        dist: {
            src: ['lib/js/file1.js', 'lib/js/file2.js'],
            dest: 'lib/js/result.min.js'
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:22:24.840

如果存在首先连接然后缩小的缩小任务，您可以使用该任务（我认为直到现在才有这样的任务）。

您可以使用一些干净的任务删除 con.js 文件：[https ://github.com/reputation/grunt-clean](https://github.com/reputation/grunt-clean)

# c# - Lambda 编译失败，在 '' 范围内定义了引用，但未定义

> ID：14466167
> 
> 赞同：5
> 
> 时间：2013-01-22T19:10:27.440
> 
> 标签：c#, expression-trees

在下面的简单片段中：

```
static void Main(string[] args)
{
    Expression<Func<string, bool>> equal = s => s == "test";
    LambdaExpression lambda = Expression.Lambda(equal.Body, Expression.Parameter(typeof(string), "s"));
    lambda.Compile();
} 
```

编译方法失败并出现`InvalidOperationException`

> “从范围''引用的'System.String'类型的变量's'，但未定义”。

虽然我发现了其他类似的问题，但我无法理解所提供的答案。

LambdaExpression 的 DebugView 包含以下内容：

```
.Lambda #Lambda1<System.Func`2[System.String,System.Boolean]>(System.String $s) {
    $s == "test"
} 
```

所以我在这个问题的其他例子中看到，参数和用法不匹配，这在这里似乎不是*问题*。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T19:16:17.927

lambda 表达式的参数不使用基于名称的相等性，它们使用引用相等性。因此，在您的表达式中，您有两个完全不同的参数，称为`s`，一个已定义但未使用，另一个已使用但未定义。

因此，基本上，您的表达式类似于`s1 => s2 == "test"`，这就是它无法编译的原因。最简单的解决方法是使用与原始表达式相同的参数：

```
LambdaExpression lambda = Expression.Lambda(equal.Body, equal.Parameters.Single()); 
```

如果您真的想使用自己的参数，则需要用新参数替换 lambda 主体中原始参数的所有实例。可能最好的方法是使用[`ExpressionVisitor`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expressionvisitor.aspx).

# java - 短暂睡眠直到点击功能

> ID：14466174
> 
> 赞同：1
> 
> 时间：2013-01-22T19:10:41.973
> 
> 标签：java, android, eclipse, sleep

我有一个测验应用程序，用户可以在其中使用单选按钮回答一些问题。只有一个答案是正确的。

当我单击按钮显示正确答案时，它会显示在 textView 中。

到目前为止，我还有另一个按钮可以导航到下一个问题。

```
b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
...

} 
```

现在我想改变它。当用户按下按钮以显示正确的问题时，我希望应用程序休眠 5 秒，然后导航到下一个问题。我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:13:35.227

> 我希望应用程序休眠 5 秒，然后导航到下一个问题。

使用[处理程序](https://developer.android.com/reference/android/os/Handler.html)类。只需调用`postDelayed()`即可在五秒钟内执行您想要的代码。

* * *

每个视图已经有一个处理程序，所以试试这个：

```
@Override
public void onClick(View v) {
    v.postDelayed(new Runnable() {
            @Override
            public void run() {
                // Do something
            }
        }, 5000);
} 
```

`run()`这将在单击按钮后 5 秒内执行代码。

# hadoop - Hive 中的多插入语句

> ID：14466175
> 
> 赞同：5
> 
> 时间：2013-01-22T19:10:43.030
> 
> 标签：hadoop, hive

我在 Hive 中遇到了多插入问题

```
FROM staged_employees se
INSERT INTO TABLE us_employees
    AS SELECT * WHERE se.cnty = 'US'
INSERT INTO TABLE ca_employees
    AS SELECT * WHERE se.cnty = 'CA'
... 
```

据我所知，多插入不是 IF ... ELSE ... 构造，但是，是否可以将其变成 IF ... ELSE ... 构造？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:38:34.473

HQL 不支持条件逻辑。关于拆分插入的问题的字面答案是：

```
INSERT INTO TABLE us_employees
SELECT * 
FROM staged_employees se
WHERE se.cnty = 'US'

INSERT INTO TABLE ca_employees
SELECT *
FROM staged_employees se
WHERE se.cnty = 'CA' 
```

通过拆分查询，您将完成的所有操作都是从`staged_employees`表中读取所有数据两次。并且，可能会使集群的其他用户非常恼火。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T18:28:39.460

尽管这是一个老问题，但下图可能对 Edward Capriolo、Dean Wampler 和 Jason Rutherglen 的 Programming Hive 一书有所帮助，第**5****章**第 76 页

 **用于编写多个插入语句的 hive 命令片段

![](../Images/6a1c17885cdd1fb275e2e72ef2fa698b.png)

用`OVERWRITE DIRECTORY '/'tmp/or_employees`上面的图片替换`INTO TABLE us_employees`

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-10T15:11:01.243

只是针对这个特定问题的一个想法（不可概括）。在输出表上创建一个分区`cnty`，并为分区的路径创建两个外部表：

```
CREATE TABLE all_employees (
  ...
)
PARTITIONED BY (cnty string)
...
LOCATION '/...../all_employees;

CREATE EXTERNAL TABLE us_employees (
  ...
)
LOCATION '/...../all_employess/US/';

CREATE EXTERNAL TABLE ca_employees (
  ...
)
LOCATION '/...../all_employess/CA/'; 
```

然后你只需插入：

```
INSERT INTO TABLE all_employees PARTITION(cnty)
  SELECT * 
  FROM staged_employees se
  WHERE cnty in ('US','CA') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-27T08:27:59.327

IF...ELSE ...construct，OK，你可以用CASE WHEN来做。您上面的代码等于：

```
INSERT INTO TABLE us_employees
SELECT * 
FROM staged_employees se
WHERE cnty in ('US','CA') 
```**

# hadoop - 在 MR 单元中模拟上下文对象

> ID：14466176
> 
> 赞同：2
> 
> 时间：2013-01-22T19:10:43.880
> 
> 标签：hadoop, hbase, mrunit

我是 Hadoop 新手，这是我的第一个映射程序，我正在通过 MR 单元对其进行单元测试。

我正在传递我通过配置对象设置的参数（年份）

```
 Configuration config =new Configuration()           
    config.set("Year", "2012");
    Job job=new Job(config ,"Yearly"); 
```

我的映射器：

```
public void map(ImmutableBytesWritable row, Result values, Context context)throws IOException, InterruptedException 
{   
  Configuration conf = context.getConfiguration();
  String Year= conf.get("Year");
} 
```

在 MR 单元测试中，我正在模拟上下文类以及 key 、 value

```
@Test
public void testMapper() throws IOException, InterruptedException
{
  context = mock(Mapper.Context.class);

  Configuration conf=mock(Configuration.class);
  when(conf.get("Year")).thenReturn("2012");
  when(context.getConfiguration()).thenReturn(conf);
  mapper.map(row, result, context);
} 
```

但是无法在映射中获取值（Year），接收 null。我这样做是正确的还是有更好的方法来测试映射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-15T03:53:33.750

您应该在测试代码中从 mapdriver 获取配置，如下所示：

```
Configuration conf = mapdriver.getConfiguration();
conf.set("Year","2013"); 
```

# python - 局部变量和全局变量的区别？

> ID：14466177
> 
> 赞同：0
> 
> 时间：2013-01-22T19:10:46.700
> 
> 标签：python, variables, global, local

> **可能重复：**
> [Python 将列表作为参数传递](https://stackoverflow.com/questions/2322068/python-passing-list-as-argument)

我找了很多关于那个的话题，但我不明白到底发生了什么。

我有这个代码：

```
def altera(L1, L2):
    for elemento in L2:
        L1.append(elemento)
    L2 = L2 + [4]
    L1[-1] = 10
    del L2[0]
    return L2[:]

Lista1 = [1,2,3]
Lista2 = [1,2,3]

Lista3 = altera(Lista1, Lista2)

print Lista1
print Lista2
print Lista3 
```

结果是：

```
[1, 2, 3, 1, 2, 10]
[1, 2, 3]
[2, 3, 4] 
```

我不明白如何`Lista1`修改而`Lista2`不是。但是在测试代码之前，我认为`Lista1`并且`Lista2`会保持不变，因为它们是全局变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:18:54.200

列表在 Python 中通过引用传递。`Lista1`被修改是因为你直接调用`.append`：

```
for elemento in L2:
    L1.append(elemento) 
```

`Lista2`未修改，因为您没有修改列表。您使用了加法运算符 ，`L2 = L2 + [4]`它**不会修改** `L2`。相反，它会创建一个新列表并返回结果。

如果您在 Google 上搜索“通过引用传递”一词，您应该能够在 Python 中找到一些很好的解释性示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:14:41.997

当您这样做时，`L1.append(elemento)`您正在调用一个实际更改由变量命名的列表的方法`L1`。`L1`所有其他设置和值的命令`L2`实际上只是为新变量创建新名称。

这个版本没有改变任何东西：

```
def altera(L1, L2):
    for elemento in L2:
        # create a new list and assign name L1
        L1 = L1 + [elemento]
    # create a new list and assign name L2
    L2 = L2 + [4]
    return L2

Lista1 = [1,2,3]
Lista2 = [1,2,3]

Lista3 = altera(Lista1, Lista2)

print Lista1
print Lista2
print Lista3 
```

虽然这个：

```
def altera(L1, L2):
    for elemento in L2:
        # Call method on L1 that changes it
        L1.append(elemento)
    # Call method on L2 that changes it
    L2.append(4)
    # Change object pointed to by name L1 -- Lista1
    L1[-1] = 10
    # Change object pointed to by name L2 -- Lista2
    del L2[0]
    return L2[:]

Lista1 = [1,2,3]
Lista2 = [1,2,3]

Lista3 = altera(Lista1, Lista2)

print Lista1
print Lista2
print Lista3 
```

但是，有一个棘手的问题`L += [2]`与`L = L + 2`. 增强赋值语句的[Python 语言参考部分解释了不同之处：](http://docs.python.org/2/reference/simple_stmts.html#augmented-assignment-statements)

> 像 x += 1 这样的扩充赋值表达式可以重写为 x = x + 1 以实现类似但不完全相等的效果。在增强版本中，x 只被评估一次。此外，如果可能，实际操作会在原地执行，这意味着不是创建新对象并将其分配给目标，而是修改旧对象。”</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:16:25.727

`L2`当您使用语句为名称分配新值时`L2 = L2 + [4]`，它不再引用`Lista2`. 您的大多数其他语句都会更改它们已经引用的对象的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:23:22.617

您的函数中发生了两种不同的事情：

```
def altera(L1, L2):
    for elemento in L2:
        L1.append(elemento)
        # [1] this ^ alters L1 in place
    L2 = L2 + [4]
    # [2] this ^ creates a new list
    L1[-1] = 10
    del L2[0]
    return L2[:] 
```

要扩展我添加的内联评论：

1.  在里面`altera`，变量`L1` *是*你传入的任何东西（所以它*是* `Lista1`）。它不是一个*副本*，一个具有相同内容的新列表——它指的是同一个实际对象
2.  当你分配`L2 = L2 + [4]`你做两件事：

    1.  使用值创建一个新列表`L2 + [4]`
    2.  设置`L2`为指向这个新列表，而不是你传入的任何内容

    如果我们重命名变量，它会变得显式，并且工作方式*完全相同*：

    ```
    L3 = L2 + [4]
    del L3[0]
    return L3[:] 
    ```

    或者，如果您想`L2`就地修改原件（即实际修改`Lista2`），您可以这样做

    ```
    L2.append(4)
    del L2[0]
    return L2[:] 
    ```

    请注意，最后一行仍然意味着`Lista3`将是与 不同的列表对象`Lista2`，但它将具有相同的值。如果您只是`return L2`，`Lista3`将与*相同*`L2`，因此它们将是同一个列表对象的两个名称。

如果你想*防止*这种行为，你可以`altera`这样调用：

```
Lista3 = altera(Lista1[:], Lista2[:]) 
```

现在，在里面`altera`，它将处理自己的参数副本，并且不会影响原始的`Lista1`and `Lista2`。

# carrierwave - 编辑形式的载波

> ID：14466179
> 
> 赞同：5
> 
> 时间：2013-01-22T19:10:50.353
> 
> 标签：carrierwave

我正在使用部分表单来创建和编辑包含上传器（“文件”）的模型对象：

```
= simple_form_for(@document) do |f|
= f.error_notification

.form-inputs
  = f.input :event_id
  = f.input :name
  = f.input :file
  = f.hidden_field :file_cache

.form-actions
  = f.button :submit 
```

在编辑表单中，而不是获取与已上传文件关联的文件名，我得到“未选择文件”。有没有办法让小部件识别上传者不是零并使用上传者的文件名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:51:45.777

出于安全原因，您不能在文件输入字段中手动设置值。文件名反映了浏览器选择的文件，但此时文件已经上传，为什么@document.file？如果你看就会显示真实。file_cache 仅用于存储和重新发送已发送的属性，以免与覆盖文件字段的输入值混淆。例如，如果您将隐藏字段更改为输入字段，您将看到相同的“无文件”消息。

我意识到这不是你想要的，但也许更好的处理方法是重新标记输入以说出“替换文件”之类的内容，然后通过 `@document.file if @document.file?`字段上方渲染出文件中殿。

# windows - 作为 Windows 服务运行时，Tomcat 7 控制台和/或托盘图标未显示

> ID：14466181
> 
> 赞同：7
> 
> 时间：2013-01-22T19:10:51.037
> 
> 标签：windows, tomcat

我已将 Tomcat7 安装为服务（service.bat）。它作为服务启动并正常工作，但是当您使用 Tomcat7.exe 或 startup.bat 手动启动服务器时，我看不到通常出现的控制台。

顺便说一句，我在 Windows 7 上，我从这里尝试了一些东西 - [http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html)

我可以使用 -tomcat7w //MS//tomcat7w 将“Tomcat7w 监控应用程序”放到托盘中

但我需要 Tomcat7 服务本身的控制台和/或托盘图标。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-19T16:46:27.480

解决方案是在命令提示符窗口中转到 tomcat/bin 文件夹，然后尝试类似的操作：tomcat8w //MS//Tomcat8

就是这样，监控服务出现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:17:49.487

我在 apache.org [http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html)上发现这个页面底部的信息是控制台上的信息。

在 linux 中，可以简单地对文本文件执行 tail -f 并查看日志条目，所以我在 Windows 上搜索了一个替换，[这就是](http://code.google.com/p/snaketail-net/)我希望它有用。

# c - 代码打印出额外的数据

> ID：14466191
> 
> 赞同：0
> 
> 时间：2013-01-22T19:11:33.517
> 
> 标签：c

代码打印出一个表格，显示 1+x、x 和 log(1+x) 的值。但是在顶部有 3 个额外的列，数字分别为 1.0、0.0 和 0.0。为什么会这样？

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>
int main()
{
  double x;
  printf("(1+x) \t (x) \t  log(1+x)");
  for(x=0.0; x<=1.05;x+=.05)
  {
    printf("%f %f %f \n",(1+x),(x),log(1+x));
  }
  system("Pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:15:09.347

您忘记在之后插入换行符`[...] log(1+x)`

修正线路

```
printf("(1+x) \t (x) \t  log(1+x)"); 
```

至

```
printf("(1+x) \t (x) \t  log(1+x)\n"); 
```

应该做的工作

# iphone - IOS核心绘图隐藏x轴的0-100部分使y轴消失

> ID：14466194
> 
> 赞同：0
> 
> 时间：2013-01-22T19:11:43.470
> 
> 标签：iphone, ios, core-plot

隐藏 x 轴的 0-100 部分，通过将可见范围设置为 0-100，使 y 轴消失

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:26:01.287

它可能不会消失，而是可能在屏幕的左侧/右侧，假设两个轴都不在 (0,0) 处相交。如果您在绘图空间上启用交互（plotSpace.allowsUserInteraction = YES;），您可能可以捏缩放并查看是否存在。

此外，您可以尝试通过向轴添加约束来使轴“固定”：

```
CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostView.hostedGraph.axisSet;

// Configure x-axis
CPTXYAxis *x = axisSet.xAxis;
CPTXYAxis *y = axisSet.yAxis;

x.axisConstraints = [CPTConstraints constraintWithLowerOffset:50];
y.axisConstraints = [CPTConstraints constraintWithLowerOffset:50]; 
```

# php - php odbc hana hdb错误

> ID：14466199
> 
> 赞同：-1
> 
> 时间：2013-01-22T19:11:54.160
> 
> 标签：php, odbc, sap

```
$db_name = "hana";
$username = "SYSTEM";
$password = "my_real_password";

$conn = odbc_connect($db_name, $username, $password) or die(odbc_error_msg()); 
$sql = "SELECT REGION_NAME, SUM(SALES_AMOUNT) FROM \"_SYS_BIC\".\"mydemo/CV_SALES\" GROUP BY REGION_NAME"; 
$result = odbc_prepare($conn, $sql);

odbc_close($conn); 
```

1.  我已经确认它可以连接。

2.  当我运行 $result = odbc_prepare($conn, $sql); 它向我抛出了这个错误

    > PHP 警告：odbc_prepare()：SQL 错误：[unixODBC][SAP AG][LIBODBCHDB SO][HDB] 一般错误；-10808 功能（可滚动结果）尚未在模块中实现：/HDB/IMP/NewDB100_REL/src// /sys/src/Inter，第 9 行 /home/payomdousti/Developer/hana.php 中的 SQLPrepare 中的 SQL 状态 S1000

    我用它来安装 php odbc 驱动程序 => sudo apt-get install php5-odbc

    **PHP版本**

    > 带有 Suhosin-Patch (cli) 的 PHP 5.3.10-1ubuntu3.4（构建时间：2012 年 9 月 12 日 18:59:41） 版权所有 (c) 1997-2012 PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2012禅德科技

    正如您在 Rev38 SAP HANA 的 HDB 驱动程序中看到的那样，我正在使用 unixODBC。

3.  我可以使用带有以下代码的 pyodbc 在 Python 中成功准备和执行查询。

    ```
    import pyodbc
    conn = pyodbc.connect('DSN=hana;UID=SYSTEM;PWD=my_real_password')
    cursor = conn.cursor()
    cursor.execute("SELECT REGION_NAME, SUM(SALES_AMOUNT) FROM \"_SYS_BIC\".\"mydemo/CV_SALES\" GROUP BY REGION_NAME")
    print cursor.fetchall()
    conn.close() 
    ```

通过 ODBC 通过 PHP 进行连接是一项业务需求。我们无法访问 SAP XS，因此这确实是最佳选择。我对使用 RFC、SOAP、OData 或 XMLA 的解决方案不感兴趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T19:07:17.860

根据您的错误，您使用的 SAP HDB 驱动程序似乎不支持可滚动游标。您是否尝试过创建不可滚动（仅向前）游标？

例如，在 Microsoft SQL Server 中，您必须设置`SQL_ATTR_CURSOR_TYPE`为`SQL_CURSOR_FORWARD_ONLY`.

# jquery - jQuery 不会更新 Rails 中的嵌套表单

> ID：14466200
> 
> 赞同：3
> 
> 时间：2013-01-22T19:11:56.047
> 
> 标签：jquery, ruby-on-rails, nested-forms, railscasts

我正在关注[Railcasts 197](http://railscasts.com/episodes/197-nested-model-form-part-2)，以便为我的应用程序制作嵌套表单。我想要做的是显示一个“删除”链接，它使用 jQuery 从表单中隐藏一行。

![在此处输入图像描述](../Images/7396763672a4e3135588cfb173a05db4.png)

如果我点击删除，没有任何反应，但如果我点击**提交**并且页面上有错误，则该行被删除！

![在此处输入图像描述](../Images/1848019c9d18a4c6fb547fc7c5d34113.png)

几天来我一直在尝试修复，但我只是看不到是否缺少某些东西或者我需要添加一些东西，任何帮助将不胜感激。

代码：

**模型/album_review_proposal.rb**

```
class AlbumReviewProposal < ActiveRecord::Base
  attr_accessible :description, :user_id, :album_attributes
  validates :description, :presence => true

  has_one :album, :dependent => :destroy
  accepts_nested_attributes_for :album , :allow_destroy => true
end 
```

**模型/专辑.rb**

```
class Album < ActiveRecord::Base
  attr_accessible :album_name, :artist,  :year, :tracks_attributes

  validates :album_name, :artist, :presence => true
  validates :year, :numericality => { :only_integer => true }

  belongs_to :album_review_proposal
  has_many :tracks
  accepts_nested_attributes_for :tracks, :allow_destroy => true
end 
```

**模型/track.rb**

```
class Track < ActiveRecord::Base
  attr_accessible :track_name, :track_number

  validates :track_name, :track_number,  :presence => true

  belongs_to :album
end 
```

**意见/album_review_proposals/_form.html.erb**

```
<%= form_for(@album_review_proposal) do |f| %>
  <% if @album_review_proposal.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@album_review_proposal.errors.count, "error") %> prohibited this album_review_proposal from being saved:</h2>

      <ul>
      <% @album_review_proposal.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

    <%= f.fields_for :album do |album| %>
        <div class="field">
          <%= album.label :album_name %><br />
          <%= album.text_field :album_name %>
        </div>
        <div class="field">
          <%= album.label :artist %><br />
          <%= album.text_field :artist %>
        </div>
        <div class="field">
          <%= album.label :year %><br />
          <%= album.text_field :year %>
        </div>

        <div class="field">
          <%= f.label :description %><br />
          <%= f.text_area :description %>
        </div>

        <legend>Tracks</legend>
        <table>
            <th>#</th>
            <th>Name</th>
            <th></th>

            <%= album.fields_for :tracks do |track|  %>
            <tr>
            <div  class="fields">
                <td><%= track.text_field :track_number, :size => 2 %></td>
                <td><%= track.text_field :track_name, :size => 50 %> </td>

              <td><%= track.hidden_field :_destroy %></td>
                <td><%= link_to_remove_fields "remove", track   %></td>
            </div>
            </tr>
            <% end %>
        </table>

    <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**controllers/album_review_proposals.controller.rb**（仅从脚手架修改的方法）

```
 def new
    @album_review_proposal = AlbumReviewProposal.new

    @album = @album_review_proposal.build_album

    4.times { @album.tracks.build }

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @album_review_proposal  }
    end
  end 
```

**应用程序.js**

```
//= require jquery
//= require jquery_ujs
//= require_tree .

function remove_fields(link) {
    $(link).prev("input[type=hidden]").val("1");
    $(link).closest(".fields").hide();
}

function add_fields(link, association, content) {
    var new_id = new Date().getTime();
    var regexp = new RegExp("new_" + association, "g")
    $(link).parent().before(content.replace(regexp, new_id));
} 
```

**application_helper.rb**

```
module ApplicationHelper
  def link_to_remove_fields(name, f)
    f.hidden_field(:_destroy) + link_to_function(name, "remove_fields(this)")
  end

  def link_to_add_fields(name, f, association)
    new_object = f.object.class.reflect_on_association(association).klass.new
    fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
      render(association.to_s.singularize + "_fields", :f => builder)
    end
    link_to_function(name, "add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")")
  end

end 
```

**我要删除的 HTML 的 HTML 部分**

```
 <legend>Tracks</legend>
        <table>
          <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th></th>
          </tr>
          </thead>
          <tbody>

            <div class="fields">
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_0_track_number" name="album_review_proposal[album_attributes][tracks_attributes][0][track_number]" size="2" type="text" /></td>
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_0_track_name" name="album_review_proposal[album_attributes][tracks_attributes][0][track_name]" size="50" type="text" /></td>
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_0__destroy" name="album_review_proposal[album_attributes][tracks_attributes][0][_destroy]" type="hidden" value="false" /><a href="#" onclick="remove_fields(this); return false;">remove</a></td>
            </tr>

            <div class="fields">
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_1_track_number" name="album_review_proposal[album_attributes][tracks_attributes][1][track_number]" size="2" type="text" /></td>
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_1_track_name" name="album_review_proposal[album_attributes][tracks_attributes][1][track_name]" size="50" type="text" /></td>
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_1__destroy" name="album_review_proposal[album_attributes][tracks_attributes][1][_destroy]" type="hidden" value="false" /><a href="#" onclick="remove_fields(this); return false;">remove</a></td>
            </tr>

            <div class="fields">
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_2_track_number" name="album_review_proposal[album_attributes][tracks_attributes][2][track_number]" size="2" type="text" /></td>
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_2_track_name" name="album_review_proposal[album_attributes][tracks_attributes][2][track_name]" size="50" type="text" /></td>
              <td><input id="album_review_proposal_album_attributes_tracks_attributes_2__destroy" name="album_review_proposal[album_attributes][tracks_attributes][2][_destroy]" type="hidden" value="false" /><a href="#" onclick="remove_fields(this); return false;">remove</a></td>
            </tr>

            <!-- repeat 3 times... -->
            </tr>
          </tbody>
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:29:01.267

在您看来， at`views/album_review_proposals/_form.html.erb`不是将类添加`fields`到`div`每个`tr`轨道内，而是直接将其添加到`tr`. 问题是当添加到表格行中时，div 的行为不符合预期。

# java - 为什么使用 ProcessBuilder 时 Java 控制台不显示？

> ID：14466201
> 
> 赞同：0
> 
> 时间：2013-01-22T19:12:00.003
> 
> 标签：java, console, processbuilder

我使用以下命令从另一个 Java 应用程序启动 Java 应用程序。

```
 ProcessBuilder pb = new ProcessBuilder(javaPath + javaCommand, maxMemStr,
            minMemStr, stackSizeStr, jarCommand, jarfile, jarArg);
    try {
        Process p = pb.start();
    } catch (IOException ex) {
        Logger.getLogger(launch.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

其中 javaCommand 是 java 或 javaw（javaPath 大部分时间都是空的，除非用户指向备用路径）。问题是，在应用程序启动后，即使我验证进程列表包含 java，它也不会显示控制台。

是因为 PrcoessBuilder 不调用命令外壳吗？有没有办法以编程方式显示控制台？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:28:17.607

这是因为“命令控制台”本身就是一个附加到另一个进程的 std-in/-out/-err 流并将它们显示在屏幕上的进程。当您单独启动 Java 时，没有其他进程将处理这些流，因此缺少命令控制台。要获得所需的结果，您需要启动命令控制台的新实例，然后让它运行您的自定义 java 命令。

可能有更好的方法来做到这一点......但我认为解决方案将取决于平台。在 Windows 中，您可以执行以下操作：

```
ProcessBuilder pb = new ProcessBuilder("start", "\"JAwesomeSauce\"", "cmd.exe",
    "/k", javaPath + javaCommand, maxMemStr, minMemStr, stackSizeStr, jarCommand,
    jarfile, jarArg);
try {
    Process p = pb.start();
} catch (IOException ex) {
    Logger.getLogger(launch.class.getName()).log(Level.SEVERE, null, ex);
} 
```

如果那是您使用的操作系统，我假设您可以在 Linux/Mac 中执行类似的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:30:03.917

您可能希望像这样运行命令： cmd /K java ... 或 cmd /C java ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T19:33:03.113

据我记得`Processbuilder`打开`pipe`一个特定的过程。

你`command window` 是一个过程本身，你所看到的一切。如果您输入命令，`cmd/bash`通常会创建新进程并附加到它们。

# php - MySQL 到 .XLS 编码问题

> ID：14466205
> 
> 赞同：0
> 
> 时间：2013-01-22T19:12:10.800
> 
> 标签：php, mysql, excel, encoding, xls

我在将数据从**MySQL**传输到**.XLS**文件时遇到了编码问题。表在“ **utf8_czech_ci** ”和**UTF-8中的****PHP**脚本中。我总是得到像“ěščřžýáíé”这样的坏字符，比如“Ä›Å¡ÄÅ™Å¾Ã½Ã¡ÃÃ©”。有我的剧本

 **```
<?php

mb_http_input("utf-8");
mb_http_output("utf-8");

     $dbhost  = "XXXXXXXXXXX";
     $dbuser  = "XXXXXXXXXXX";
     $dbpass  = "XXXXXXXXXXX";
     $dbname  = "XXXXXXXXXXX";
     $dbtable = $_GET['table'];

function xlsBOF() {
    echo pack("ssssss", 0x809, 0x8, 0x0, 0x10, 0x0, 0x0);
    return;
}

function xlsEOF() {
    echo pack("ss", 0x0A, 0x00);
    return;
}

function xlsWriteLabel($Row, $Col, $Value ) {
    $L = strlen($Value);
    echo pack("ssssss", 0x204, 8 + $L, $Row, $Col, 0x0, $L);
    echo $Value;
    return;
}

$dbc = mysql_connect( $dbhost , $dbuser , $dbpass ) or die( mysql_error() );
mysql_query("set names utf8;");
mysql_select_db( $dbname );
$q = "SELECT * FROM ".$dbtable."";
$qr = mysql_query( $q ) or die( mysql_error() );

header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-type: application/vnd.ms-excel; charset=utf-8");
header("Content-Disposition: attachment;filename=export_".$dbtable.".xls ");
header("Content-Transfer-Encoding: binary ");
xlsBOF();

$col = 0;
$row = 0;
$first = true;

while( $qrow = mysql_fetch_assoc( $qr ) )
{
    if( $first )
    {
        foreach( $qrow as $k => $v )
        {
            xlsWriteLabel( $row, $col, strtoupper( ereg_replace( "_" , " " , $k ) ) );
            $col++;
        }
        $col = 0;
        $row++;
        $first = false;
    }
    foreach( $qrow as $k => $v )
    {
        xlsWriteLabel( $row, $col, $v );
        $col++;
    }

    $col = 0;
    $row++;
}

xlsEOF();
exit(); 
```

感谢您的回复...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:37:34.577

Excel 文件使用代码页块来标识文件中使用的字符集，但默认情况下它将使用区域设置代码页。如果您想强制使用 UTF-8，那么您还需要编写一个 UTF-8 代码页块

```
$record          = 0x0042;   // Record identifier
$length          = 0x0002;   // Number of bytes to follow
$cv              = 0x04B0;   // The UTF-8 code page

$header          = pack('vv', $record, $length);
$data            = pack('v',  $cv); 
```**

# android - 从异步任务填充片段列表视图

> ID：14466209
> 
> 赞同：0
> 
> 时间：2013-01-22T19:12:23.577
> 
> 标签：android, android-asynctask

我需要从 loadListTask 填充列表视图。您将在脚本的末尾看到它应该发生的位置。怎么做 ？我尝试了几种方法，但结果总是一样，崩溃了。

这里的主要活动和最后的异步任务：

```
public class MainActivity extends FragmentActivity {
SectionsPagerAdapter mSectionsPagerAdapter;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LoadListTask myLoadListTask = new LoadListTask();
    myLoadListTask.execute();

    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);   
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        Fragment fragment = new SectionFragment();
        Bundle args = new Bundle();
        args.putInt(SectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.title_section1).toUpperCase();
        case 1:
            return getString(R.string.title_section2).toUpperCase();
        case 2:
            return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
}

public static class SectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public SectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        ArrayList<HashMap<String, String>> listItem;
        HashMap<String, String> map;
        SimpleAdapter mSchedule;
        listItem = new ArrayList<HashMap<String, String>>();
        map = new HashMap<String, String>();
        ListView maListViewPerso = new ListView(getActivity());

         mSchedule = new SimpleAdapter (getActivity(), listItem, R.layout.affichageitem,
               new String[] {"img", "titre", "description"}, new int[] {R.id.img, R.id.titre, R.id.description});
         maListViewPerso.setAdapter(mSchedule);

        switch (getArguments().getInt(
                ARG_SECTION_NUMBER)) {
        case 1:

            map = new HashMap<String, String>();
            map.put("titre", "Excel");
            map.put("description", Integer.toString(getArguments().getInt(
                    ARG_SECTION_NUMBER)));
            map.put("img", String.valueOf(R.drawable.devoir));
            listItem.add(map);

        case 2:
            //To do
        case 3:
            //To do
        }

        return maListViewPerso;
    }
}

// I NEED TO POPULATE FROM HERE
private class LoadListTask extends AsyncTask<String, Void, Integer> {
    protected void onPreExecute() {
    }

    protected Integer doInBackground(String... params) {
        return 0;
    }

    protected void onPostExecute(Integer result) {
        if (result == 0) {
        }
    }
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:37:13.273

您必须保留对 listItem 和 maListViewPerso 的引用才能在 onPostExecute 中使用它们，您可以通过将它们声明为类的成员来实现。

之后，您必须创建适配器。[（适配器）](http://developer.android.com/reference/android/widget/BaseAdapter.html)对于简单的数据结构，您可以使用 Android 的预定义之一，例如[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)或[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)但我想您要做的是创建一个列表，该列表遍历 ArrayList 然后进入地图的项目. 为此，您必须实现自己的适配器，扩展 BaseAdapter。实现[getView(int pos)](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)您必须返回位置*pos*中的项目，并且使用[getCount()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getCount%28%29) ListView 将知道您的列表有多少项目。

# ios - UISegmentedControl CoreData 绑定错误

> ID：14466211
> 
> 赞同：1
> 
> 时间：2013-01-22T19:12:31.113
> 
> 标签：ios, core-data

当我尝试将 nsobject 绑定到段控件时，我不断收到此错误

```
UserLocation isEqualToString:]: unrecognized selector sent to instance 0x7477a60
2013-01-22 12:44:58.115 Momentum[39936:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UserLocation isEqualToString:]: unrecognized selector sent to instance 0x7477a60' 
```

我已经验证我的核心数据对象有数据。

```
NSarray *arrayuserlocation = [[MMIStore defaultStore] loadAllUserLocation];
UISegmentedControl *segControl = [[UISegmentedControl alloc]initWithItems:arrayuserlocation];
[segControl addTarget:self action:@selector(didChangeSegmentControl:)      forControlEvents:UIControlEventValueChanged];
[segControl setSegmentedControlStyle:UISegmentedControlStyleBar];
[segControl setTintColor:[UIColor grayColor]]; 
```

编辑

回答下面的问题

```
- (NSMutableArray *)loadAllUserLocation
{
    if (!allItems) {NSFetchRequest *request = [[NSFetchRequest alloc] init];

    NSEntityDescription *e = [[model entitiesByName] objectForKey:@"UserLocation"];
            [request setEntity:e]
    NSError *error;
        NSArray *result = [context executeFetchRequest:request error:&error];
        if (!result) {
            [NSException raise:@"Fetch failed"
                        format:@"Reason: %@", [error localizedDescription]];
        }

        allItems = [[NSMutableArray alloc] initWithArray:result];
}
 return allItems; 
```

它返回一个数组

我能够通过执行以下操作来解决我的问题。

```
 NSArray *arraylocation = [[MMIStore defaultStore] loadAllUserLocation];
    NSMutableArray *newarray = [[NSMutableArray alloc] init];
    for (UserLocation *user in arraylocation)
    {

        NSLog(@"%@ found", user.locationNm);
        [newarray addObject:user.locationNm];

    } 
```

并使用 newarray 作为段控制的数据源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:54:49.523

正如我在评论中提到的，问题在于您传递的是`userlocation`对象而不是所需的`NSString`对象`UIImage`。

根据[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html#//apple_ref/occ/instm/UISegmentedControl/initWithItems%3a)，您的 items 数组应该是“NSString 对象（用于段标题）或 UIImage 对象（用于段图像）的数组”。

您需要从用户位置获取字符串，

```
NSarray *arrayuserlocation = [[[MMIStore defaultStore] loadAllUserLocation] valueForKey:@"locationNm"];//use the param name here 
```

这应该为您提供对象数组中所有字符串的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:44:39.513

问题是，`arrayuserlocation`数组应该包含`NSString`s 而不是`NSManagedObjects`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:46:13.470

抛出异常的代码期望您将其传递给它`NSString`（这是响应的对象`isEqualToString:`）。但是，您正在向它传递一个`UserLocation`对象。您需要`arrayuserlocation`从对象中加载字符串`UserLocation`，而不仅仅是发送对象数组本身。

# html - 自动定位/对齐具有不同 div 大小的浮动 div

> ID：14466214
> 
> 赞同：-1
> 
> 时间：2013-01-22T19:12:43.347
> 
> 标签：html, css, responsive-design

我在下面的 HTML / CSS 代码中标记的主 div 中有 3 个 div，当页面呈现时，第二个 div 是第一个和最后一个 div 的两倍。当页面呈现时，因为第二个 div 的大小是第一个和最后一个 div 的两倍，这导致最后一个 div 显示在第二个下方，中间留有间隙。我想要的是第三个 div 占据了这个空白：

```
<html>
<head>
<title>Liquid Divs</title>
<style>

#splash {
    width: 600px;
    margin: 1px;
    border: solid 1px #ccc;
}

.box {
    width: 196px;
    height: 196px;
    margin: 1px;
    border: solid 1px #ccc;
    float: left;
}

.box2 {
    width: 392px;
    height: 392px;
    margin: 1px;
    border: solid 1px #ccc;
    float: left;
}

.clear-fix {
    clear: both;
}

</style>

</head>

<body>

    <div id="splash">

        <div class="box">
        </div>

        <div class="box2">
        </div>

        <div class="box">
        </div>

        <div class="clear-fix">
        </div>

    </div>

</body>
</html> 
```

这可以用 CSS 完成还是有人知道用 javascript 完成这个的方法？弄清楚这一点会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:18:13.590

将您的 box2 切换为向右浮动

```
.box2 {
    width: 392px;
    height: 392px;
    margin: 1px;
    border: solid 1px #ccc;
    float: right;
} 
```

经过测试，它可以将第三个盒子放在第一个盒子下面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:21:39.337

将第一个和第三个盒子包装在左容器中，将大盒子包装在右容器中试试这个：http: [//jsfiddle.net/wcQ3L/1/](http://jsfiddle.net/wcQ3L/1/)

```
<html>
<head>
<title>Liquid Divs</title>

<style>
#splash {
    width: 600px;
    margin: 1px;
    border: solid 1px #ccc;
}

#left-container{
    float: left;
}
.box {
    width: 196px;
    height: 196px;
    margin: 1px;
    border: solid 1px #ccc;    
}

.box2 {
    width: 392px;
    height: 392px;
    margin: 1px;
    border: solid 1px #ccc;
    float: left;
}

.clear-fix {
    clear: both;
}
</style>
</head>

<body>

    <div id="splash">

        <div id="left-container">
        <div class="box">
        </div>
        <div class="box">
        </div>
        </div>

        <div id="right-container">
        <div class="box2">
        </div>
        </div>

        <div class="clear-fix">
        </div>

    </div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:24:27.813

如果您打算在`#splash`jQuery 插件砌体之后包含更多元素

这是扩展问题的解决方案演示

## [http://jsfiddle.net/kxMYS/](http://jsfiddle.net/kxMYS/)

```
$( function() {

    $('#splash').masonry({
        itemSelector: 'div'
    });

}); 
```

**然而**

如果您只想要一个解决方案来解决您确切的问题

只需将您的CSS更改`.box2`为`float:left;`

## [http://jsfiddle.net/kxMYS/1/](http://jsfiddle.net/kxMYS/1/)

# c# - 我应该使用 Worker Role 还是 Thread 来重置数据库中条目的状态？

> ID：14466217
> 
> 赞同：0
> 
> 时间：2013-01-22T19:12:58.807
> 
> 标签：c#, multithreading, wcf, azure-worker-roles

我开发了一个 WCF Web 服务，它拥有的方法之一是在数据库中创建一个新条目，并更改不同表中条目的状态。

我想要实现的是在一个小时过去后重置状态变化。听听这个例子，这样你就可以理解我想要做什么：

设备可以检测报告为事件的更改，因此设备与各种事件相关，而事件仅与一个设备相关。当一个新的事件插入数据库时​​，设备进入警报状态，因此该设备的状态列更改为**警报**，经过 1 小时后，该设备的状态列必须返回**正常**。

我想创建一个线程，但我是 WCF 的新手，所以我不知道这是否会消耗大量资源，所以我想到了使用 Worker Role，但它也会在服务启动的整个过程中保持运行。充其量我想让任何可以处理此问题的进程进入睡眠状态，直到设备的状态再次发生变化，但同样，我不知道让线程/工作者角色睡眠是否会消耗大量资源。

我怎样才能在不使用太多资源的情况下实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:53:08.200

不要使用线程——如果应用程序需要关闭（部署、故障等），线程就会丢失，排队的工作也会丢失。使用像 Windows 任务计划程序这样的持久计时器服务或像 Quartz.NET 这样的库。

# java - 定时器调度方法超过时间

> ID：14466230
> 
> 赞同：0
> 
> 时间：2013-01-22T19:13:47.680
> 
> 标签：java, android

我使用计时器调度方法每 5 分钟向数据库发送一次位置信息。

这是代码：

```
public void onStart(Intent intent, int startId) 
{
    this.timer.schedule(new Send(), new Date(), TEN_SECONDS*6*5); //ten_seconds = 10000
}

class Send extends TimerTask
{
    public void run()
    {
        String address = LocationService.this.address;
        new SendLocation(LocationService.this.id,address); // a thread that sends the info to the db
        LocationService.this.gpsLocation = null;
        LocationService.this.networkLocation = null;
    }
} 
```

但是为什么我的数据库有 7/6 分钟差异的位置？sendLocation 检查我要发送到数据库的位置是否与最后一个相同，如果为真则忽略该位置，否则发送它。

这意味着我的数据库中每个位置之间的差异应该是 5 分钟的跳跃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:27:40.557

观看有关Method 的[**链接。**](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20java.util.Date,%20long%29)`Timer` `schedule`它清楚地表明：

> 从指定时间开始，安排指定任务以重复固定延迟执行。随后的执行以大约固定的时间间隔进行，间隔指定的时间段。
> 
> **在固定延迟执行中，每次执行都是相对于前一次执行的实际执行时间安排的。如果由于任何原因（例如垃圾收集或其他后台活动）延迟执行，则后续执行也会延迟。**从长远来看，执行频率一般会略低于指定周期的倒数（假设系统时钟底层 Object.wait(long) 是准确的）。

在您的代码中`run`，`Send`由于`SendLocation` `Thread`. 所以你的数据库有 7/6 分钟差异的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:27:49.183

无法保证您`TimerTasks`将在您请求时准确执行。从[`Timer`](http://developer.android.com/reference/java/util/Timer.html)文档——

> 每个计时器都有一个线程，任务在其上按顺序执行。当该线程忙于运行任务时，可运行的任务可能会出现延迟。

和

> 此类不保证任务调度的实时性

当然，两分钟是很长的时间，所以其他地方可能会有延误。

# ios - 如何让读者喜欢kindle应用？

> ID：14466232
> 
> 赞同：0
> 
> 时间：2013-01-22T19:13:54.813
> 
> 标签：ios, core-text

我想做一个像亚马逊 Kindle 应用程序一样的阅读器。具体来说，我想在段落中呈现一堆对齐的文本，每页一列，并让它像 Kindle 应用程序一样在页面之间滚动。

假设我有一个简单格式的文本，比如每章的文本文件，甚至每章在内存中硬编码的字符串。

他们显然在使用 Core Text。他们是否使用分页滚动视图？这会导致大型书籍的内存问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:44:14.867

我最初的想法是他们使用 UITextView 来显示大量文本，这种视图允许您添加边距、填充、文本，对于 iOS 6，您可以使用 NSParagraphStyle 之类的东西来为文本设置样式，简单方法是在 UIScrollView 内的不同 UITextViews 中创建一个非常长的文本，这会给你一个很好的结果但是如果内存是一个问题并且 iOS 版本不是问题我建议使用 UICollectionViews，你可以让每个页面“单元格”，然后编写一些自定义布局，因此当用户滚动这本书时，您实际上可以实例化用户在某个时刻正在使用的页面

NSCollectionView 很酷的地方在于它的行为与 UITableView 完全一样，因此它非常节省内存，不在屏幕上的内容不会显示，如果要显示则加载。

希望这可以让您对此事有所了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:06:54.243

我最终做了一些完全定制的东西。它由 3 个视图组成，a`left` `main`和`right`视图。

视图控制器使用 Core Text 在视图上呈现`main`文本，并计算当前章节中每一页的文本框架的大小（以及页数）。

如果用户点击或向右或向左拖动，视图控制器将呈现其中一个侧视图并让您拖动它。当您完成拖动或完成点击操作时，它会将页面动画放置到位，然后将主视图与您拖动的那个交换。

与使用 a 相比，此方法的优势在于`UICollectionView`，要以确定的方式计算应在给定页面上显示的确切内容非常昂贵，因为表格/集合视图需要。这种方式让我可以渲染任何章节的文本，并且可以懒洋洋地向后或向前移动，而无需立即布置整本书。

# opengl-es-2.0 - 在 OpenGL ES 2.0 中渲染到纹理时的抗锯齿

> ID：14466236
> 
> 赞同：2
> 
> 时间：2013-01-22T19:14:13.733
> 
> 标签：opengl-es-2.0, libgdx, antialiasing, fbo, msaa

我将场景渲染为纹理，以便在显示最终结果之前应用后处理。但是，当我添加此功能时，MSAA/CSAA 停止工作。有没有办法（除了性能密集型 FSAA）让抗锯齿工作？

我的目标是多个平台（android 2.2+、iphone 3gs+、所有 ipad），所以我正在寻找一种不需要扩展的方法来做到这一点（除非它们无处不在）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:26:55.777

是的，默认情况下 MSAA 仅适用于默认帧缓冲区。你应该使用多重采样纹理。这个线程可能会有所帮助： [Multisampled render to texture in ios](https://stackoverflow.com/questions/7402504/multisampled-render-to-texture-in-ios)

# zend-framework - zf1：检索子表单

> ID：14466241
> 
> 赞同：0
> 
> 时间：2013-01-22T19:14:36.553
> 
> 标签：zend-framework, zend-form

我有一个包含 A 类的 5 个子表单和 B 类的另一个子表单的表单。

我想首先在视图中显示 A 类的子表单，但我不知道如何只检索它们。

我应该创建另一个包含 A 类的 5 个子表单的子表单吗？有没有办法根据模式获取子表单？

我正在像这样在控制器中实例化表单：

```
 for($i = 0; $i < 6; $i++)
   {
       $form = new ContractLink_Form_ContractOMFOverrideAppendix();
       $form->setElementsBelongTo('override' . $i);
       if(isset($overrides[$i])) {
           $form->populate($overrides[$i]);
       }

       $formSuper->addSubForm($form, 'OMFOverrideAppendixForm' . $i);
   } 
```

我正在使用zf1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:43:46.967

正如 IRC 上所说，

您可以使用[instanceof PHP 运算符](http://www.php.net/manual/en/language.operators.type.php "PHP 手册")来检查子表单的类。

```
$subForms = $form->getSubForms();
foreach ( $subForms as $subForm ) {
    if ($subForm instanceof A) {
        // stuff to do for 'A' type of subform
    }
} 
```

# jquery - 为什么 jQuery on() 不能在现有元素上工作？

> ID：14466242
> 
> 赞同：3
> 
> 时间：2013-01-22T19:14:36.323
> 
> 标签：jquery

我有 ID 为#editor 的 div。在 div 中是一个具有 .float-right 类的图像。我还动态地将具有相同类的新图像添加到#editor div。下面的 jQuery 代码适用于新添加的图像，但不适用于现有图像。为什么？我需要这两种方式。

HTML

```
<div id="#editor">
    <img src="img.jpg" class="float-right">
    <!--jQuery will select this image only if added after page load -->
</div> 
```

jQuery

```
$('#editor').on('click', '.float-right', function() {
//Do stuff
}); 
```

我正在处理的粗略代码[http://jsfiddle.net/kthornbloom/9tdDa/](http://jsfiddle.net/kthornbloom/9tdDa/)（它是一个所见即所得的 html5 编辑器）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:23:02.843

您正在阻止 #editor 的现有子项上的所有点击事件

```
$("#editor").children().click(function(){
    return false;
}); 
```

删除它（在 2 个地方），它可以工作。它不会影响新元素，因为它只针对现有元素。

[http://jsfiddle.net/9tdDa/5/](http://jsfiddle.net/9tdDa/5/)

# hibernate - 当引用的行不再存在时忽略软外键

> ID：14466252
> 
> 赞同：0
> 
> 时间：2013-01-22T19:15:09.620
> 
> 标签：hibernate, nhibernate, fluent-nhibernate, foreign-keys, nhibernate-mapping

我目前正在使用一个 NHibernate 应用程序，该应用程序包含表*A*曾经具有对另一个相关表*B*的外键引用。此后，此约束已被有意删除，因为*B*中的项目可能会被辅助应用程序删除，超出我的控制范围。

尽管约束现在已经消失，但如果*B中的行仍然存在，则从**A*到*B*的引用仍然可以被认为是有用的，否则它可能被视为空值。

 **如果从B*中删除由*A*引用的行，则非常正确，会引发异常，指出“不存在具有给定标识符的行”。

*在来自A*的引用不再存在于*B*的情况下，有没有办法流畅地（或以其他方式避免显式查询/连接）让对象引用返回 null ，但如果引用则返回*B*所描述的对象已验证？

当前的单向流畅映射（被视为外键引用）看起来相当简单

```
...
References(a => a.b_ref, "b_id");
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:22:07.777

通过更新流畅的映射看起来像这样，当找不到引用时，可以忽略该引用并将其视为 null

```
...
References(a => a.b_ref, "b_id").NotFound.Ignore();
... 
```

有时这只是通过谷歌偶然发现正确关键字的问题。*

# antlr3 - ANTLR V3 SQL 语法

> ID：14466254
> 
> 赞同：1
> 
> 时间：2013-01-22T19:15:19.427
> 
> 标签：antlr3

在哪里可以找到适用于 ANTLR v3 的 sql 语法？

我试过[http://www.antlr.org/grammar/list](http://www.antlr.org/grammar/list)，但链接已经死了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:01:54.337

服务器目前正在针对 ANTLR 4 版本进行调整。ANTLR 3 的新家是[antlr3.org](http://antlr3.org)。您要询问的特定页面在这里：

[http://antlr3.org/grammar/list.html](http://www.antlr3.org/grammar/list.html)

# javascript - Backbone.js：在视图之间导航 - 销毁和重新创建

> ID：14466257
> 
> 赞同：2
> 
> 时间：2013-01-22T19:15:32.953
> 
> 标签：javascript, backbone.js, views, router

我正在开发一个带有几个不同视图的 Backbone.js Web 应用程序。假设我们在页面顶部有一个 AudioPlayer 视图，它应该是持久的，并且在页面的其余内容发生变化时播放音频。页面内容的其余部分应该能够按需切换（路由器通过导航更新 url）。

我正在寻找正确的方法来隐藏/删除 FirstView，插入 SecondView，然后在用户单击“返回”按钮时隐藏/删除 SecondView 并再次插入/显示 FirstView。

有人告诉我，当视图未显示时应将其删除以避免内存泄漏。如果这是真的，那么重新创建视图的正确方法是什么，因为其关联的 view.el 在删除过程中已被破坏？还是有更合乎逻辑的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:21:39.827

这就是我这样做的方式：

1.  使用一个方法扩展 Backbone.View ，该方法`open`将视图附加到 DOM 并在现在打开的视图上设置一个标志，以及一个类似的`close`属性
2.  `views`在您的应用程序的公共属性上创建所有视图属性
3.  创建一个在应用程序上调用的方法，该方法`clearViews`将关闭所有打开的视图，除了传入的视图名称

这是我一直在使用的要点（在咖啡脚本中）。随意复制。

[https://gist.github.com/4597528](https://gist.github.com/4597528)

因此，在以这种方式扩展 Backbone 之后，假设您想要在关闭所有打开的视图（app.views.topNav 指向的顶部导航栏除外）之后在 Backbone 路由中创建并打开一个新视图。你可以说：

```
app.clearViews('topNav');
app.views.myNewView = new MyView;
app.render().open('body'); // or some other container 
```

对于像Derick Baily的[Marionette和 Tim Branyen 的](https://github.com/marionettejs/backbone.marionette)[LayoutManager](https://github.com/tbranyen/backbone.layoutmanager)这样的大型项目，有一些很棒的视图和布局管理器，但对于我的小型项目来说，它们似乎有点矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:13:29.317

我目前在我的几个应用程序中执行此操作，它是通过选项卡式界面完成的。您可以在此处查看这些界面的示例：

*   [推特引导](http://twitter.github.com/bootstrap/javascript.html#tabs)
*   [祖布基金会](http://foundation.zurb.com/docs/tabs.php)
*   [jQueryUI](http://jqueryui.com/tabs/)

我使用骨干路由器来观看网址。这让我可以为用户保留深度链接/书签，但我通常会让视图事件触发选项卡更改。

出于我的目的，我有一个多标签应用程序，它有一个聊天窗口、图片库窗口和协作编辑窗口。

# ruby-on-rails - 在 Rails 中播种外键？

> ID：14466259
> 
> 赞同：2
> 
> 时间：2013-01-22T19:15:36.743
> 
> 标签：ruby-on-rails

我正在 Rails 中创建用户与其个人资料之间的关系

```
User has_one :profile
Profile belongs_to :user 
```

我知道在正常情况下，Rails 会自动在这两个模型之间创建外键关系。但是，当我通过以下方式为数据库播种信息时，创建了许多用户，并创建了许多配置文件，那么我如何确保例如 Joe 的配置文件与 Joe 的用户帐户相关联。

```
User.create!(email: "j@gmail.com", password: "blahblah", encryptedpass: "3838")
Profile.create!(first_name: "Joe", last_name: "Frank", address: "43 Flint Road", phone: "604 345 678", )

 User.create!(email: "anne@gmail.com", password: "blahblahblah", encryptedpass: "4567")
Profile.create!(first_name: "Anna", last_name: "Jones", address: "43 Boogy Road", phone: "604 345 678", ) 
```

**...想象成千上万的用户和个人资料以这种方式播种......**

我是否必须`user_id`在配置文件上设置一个外键，并且为了播种它，我是否只需要一个外键 ID？rails 可以为我生成它吗？例如，如果我在 Joe 的个人资料上创建了一个外键，`user_id: 1`那么我如何确定他的用户模型实例将为“1” 换句话说，如果我手动设置他的 user_id 外键，我该如何确保它？会匹配 User 模型的 id 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:27:49.303

您可以使用`create_profile!` [方法](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one)（在您声明时由 Rails 创建`has_one :profile`

```
u = User.create!(email: "j@gmail.com", password: "blahblah", encryptedpass: "3838")
u.create_profile!(first_name: "Joe", last_name: "Frank", address: "43 Flint Road") 
```

# c++ - 在 CppCMS 中使用表单构建错误

> ID：14466262
> 
> 赞同：2
> 
> 时间：2013-01-22T19:15:44.560
> 
> 标签：c++, forms, cppcms

我们在项目中包含登录表单时遇到了麻烦。我们按照[http://cppcms.com/wikipp/en/page/cppcms_1x_forms中的步骤进行操作](http://cppcms.com/wikipp/en/page/cppcms_1x_forms)

这是表单的定义：

```
struct SignInFormInfo : public cppcms::form {
/* Error 1 */ cppcms::widgets::text user_name;
/* Error 2 */ cppcms::widgets::password password;
cppcms::widgets::submit submit;

SignInFormInfo() {
user_name.message("User name");
password.message("Password");
submit.value("Sign in");

add(user_name);
add(password);
add(submit);

// Restrictions
user_name.limits(1, 31);
password.non_empty();
}
}; 
```

我们得到这些构建错误：

错误1：类型'cppcms::widgets::text'必须实现继承的纯虚方法'cppcms::base_form::load'

错误2：类型'cppcms::widgets::password'必须实现继承的纯虚方法'cppcms::widgets::base_widget::render_input'

我们还在 cppcms 库“cppcms/form.h”和“booster/hold_ptr.h”中得到关于变量“_data”是私有的错误。

我们使用的是 1.0.3 版本的 CppCMS。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:49:00.573

应该使用哪种“加载”方法？

来自“base_html_input”类的一个或来自“base_text”的一个。有两个名为“load”的方法来自不同的类（并且都派生自同一个类！），它们都是同一个类的基类。编译器根本不知道要使用哪一个。最好的事情是实现你自己的“负载”。

```
widgets::text::load(param) //actually missing in CPPCMS
{
     //wich one of the 2 methods has to be called.. or both have to be called?
     base_html_input.load(param)
     base_text input.load(param);
} 
```

这可能是您正在使用的库的设计缺陷（除非在某个地方存在“widgets::text”对象工厂，即返回具有正确实现的对象，无论如何教程中的文章都是错误的。）

# android - 如何使具有未知文本的四个按钮具有相同的宽度

> ID：14466264
> 
> 赞同：0
> 
> 时间：2013-01-22T19:15:49.597
> 
> 标签：android, android-button

在我的应用程序中，我有一个带有四个按钮的屏幕，一个在另一个之上。这些按钮的文本取决于用户输入的内容，所以我不知道哪个按钮最大。

我想对齐它们，使按钮的左侧都与最宽的按钮对齐，按钮的右侧都与最宽的按钮的右侧对齐。

为了解决我的问题，我写了这个：

```
 int biggestWidth=buttonA.getWidth();

    if(biggestWidth<buttonB.getWidth()){//if the width of button b is bigger than the width of button a

        biggestWidth = buttonB.getWidth();

    } if(biggestWidth<buttonC.getWidth()){

        biggestWidth = buttonC.getWidth();

    } if (biggestWidth<buttonD.getWidth()){

        biggestWidth= buttonD.getWidth();
    }
buttonA.setWidth(biggestWidth);
    buttonB.setWidth(biggestWidth);//sets all the buttons to the width of the biggest one
    buttonC.setWidth(biggestWidth);
    buttonD.setWidth(biggestWidth); 
```

但这不起作用，因为按钮的边缘都与第一个按钮的边缘对齐，而不是与文本最多的按钮的边缘对齐。有谁知道/认为他们知道我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:41:29.510

试试这个布局模式：

```
<LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="show" />

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="show123" />

        <Button
            android:id="@+id/button3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="show12345686" />
</LinearLayout> 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:20:29.823

按钮调用权重有一个权重属性。利用它并为该行中的所有按钮放置相同的重量（如 1）。

# java - 忘记密码请求 (Java)

> ID：14466267
> 
> 赞同：1
> 
> 时间：2013-01-22T19:15:58.100
> 
> 标签：java, passwords, token, reset, uuid

对于你们大多数人来说，这是一个很常见的话题。我正在用 Java 构建一个 webapp，使用 Spring + Spring Security + Hibernate + MySQL + 等...

我正在实施“重置密码”模块。我已经知道流程并拥有所有表格和相应的控制器。我只是想知道，在到处写代码之前，我是否从右脚开始，然后继续改进它。

**MySQL表**：

```
PASSWORD_CHANGE_REQUESTS ( 
       TOKEN VARCHAR(126) NOT NULL,
       USERNAME VARCHAR(50) NOT NULL,         
       CREATION_TIME DATETIME NOT NULL,        
       PRIMARY KEY(TOKEN)          
) 
```

我看到一些帖子推荐了 EXPIRE_DATE 字段。是不是真的值得吗？

**唯一令牌：**

我正在使用 Spring SHA 编码器，其中用户名 + 时间戳作为参数（+ 所需的盐值），它返回字符串，例如：*92c303b9740da5959418c32d04b6ec6f4ca61637*。

这种方法真的会为 URL生成一个**唯一的令牌吗？**或者有更好的方法吗？

在 Java 中，时间戳是这样生成的：

```
 Date date = new Date();
 SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy h:mm:ss");
 String timestamp = sdf.format(date); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:00:50.060

我说将字段 EXPIRE_DATE 添加到数据库。1-为方便起见，您可能需要 EXPIRE_DATE 字段，以便在您根据数据库中的值验证和验证令牌时一举执行选择和检查有效性。2-对于数据库清理，您可以通过运行简单的脚本轻松截断过期记录。

您还可以通过检查当前时间来验证令牌在应用程序层中是否过期，但这似乎更麻烦。此外，数据库清理将取决于某些应用程序逻辑或脚本逻辑来确定记录是否已过期并准备好删除。

Spring HSA 编码器应该可以满足您的目的，但是它的用途主要是对密码进行编码，而不是生成唯一的令牌。对于唯一令牌，您可以查看 Java UUID

你可以在这里阅读更多

[如何生成随机的字母数字字符串？](https://stackoverflow.com/questions/41107/how-to-generate-a-random-alpha-numeric-string-in-java)

和

[HTTP URL 令牌标准](https://stackoverflow.com/questions/3889809/http-url-token-standard)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:30:59.793

如果黑客控制了用户的电子邮件并找到其中一个链接，密码更改请求的过期可能会很有用。如果用户不再在您的系统中使用该电子邮件帐户，至少它会保护他们免于在您的系统中重置密码，因为请求可能已经过期。显然，如果他们控制了用于您的系统的电子邮件帐户，则过期不会有多大好处，因为他们可以简单地再次请求重置。无论哪种方式，为用户提供额外的安全性都是一件相对简单的事情。

在生成唯一令牌方面，我认为您的策略非常好。为了使生成冲突令牌变得更加困难，您可以使用类似的东西`System.nanoTime()`来`System.currentTimeMillis()`获得更精确的时间。您当前的方法意味着如果在同一秒内调用它，您将获得一个非唯一令牌。虽然这可能很少见，但在毫秒或纳秒内更是如此。

# php - Android 设备登录到 php/mysql 网站进行同步

> ID：14466268
> 
> 赞同：0
> 
> 时间：2013-01-22T19:16:00.673
> 
> 标签：php, android

我打算制作一个能够在安卓手机和网页数据库之间同步数据的应用程序。目前，我正在努力思考问题并找出困难的部分。我首先想到的是登录部分。

我最好的想法是，在启动我的应用程序之前，用户必须登录。当他登录时，它将用户数据发送到我的网页并返回真/假。如果它返回 true，我会在我的应用程序中进行某种会话，表明我已登录（以访问应用程序功能），但也会存储我的用户名和密码。现在，如果我按下同步按钮或​​做其他需要与我的网站通信的事情，我每次都可以检查用户/密码。因为在网站上我计划执行不同的操作（登录、同步、其他）我需要每次都检查登录 - 否则第三方可以访问同步操作而无需先实际登录。

不管怎样，这就是我此刻的想法。当我开始编码时，我肯定会问更详细的问题（我是 android/java 的初学者），但现在我想知道这件事的想法是好还是可以做得更聪明/更好？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:10:56.063

我建议你创建基于 API 的应用程序，这样如果你想在许多平台上创建它就不会感到麻烦（如果你也想在 iOS 中创建）。

我通常使用的是使用 API_KEY。API_KEY 是 PHP 端生成的一个随机数，用于保存用户的登录会话。当用户从手机登录（发送用户名和密码）时，PHP端将生成API_KEY并更新Web数据库中现有的API_KEY（如果用户之前在其他设备上登录过），以便在其他设备上登录会话将自动过期，但您必须在每次尝试访问数据库（同步您的应用程序）时添加 API_KEY 验证，或者如果您想要更严格，您可以在每次用户更改屏幕时进行检查。

如果您对此有任何疑问，请随时在评论中提问！:)

# android - 在 AsyncTask 中跟踪文件下载的进度

> ID：14466269
> 
> 赞同：1
> 
> 时间：2013-01-22T19:16:00.970
> 
> 标签：android, android-asynctask, android-progressbar

我在这里问了一个类似的问题[AsyncTask 和 Progressbar](https://stackoverflow.com/questions/13908485/asynctask-and-progressbar)。

我正在做的是在后台 AsyncTask 中一个一个地安排两个以上文件的下载。根据用户交互，UI 线程可能在任何时间点都需要其中一个文件。如果文件下载是当 UI 线程要求它时未完成，我需要显示该特定文件的下载进度..

我已经看到了一些关于显示特定文件下载进度条的安静答案。但我的要求有些不同。我需要跟踪后台文件下载的进度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:36:38.477

当您使用 AsyncTask 时，您可以选择使用 onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。

例如

```
 private class DownloadFilesTask extends AsyncTask<File, Integer, Long> {
 protected Long doInBackground(File... file) {
     // This will call onProgressUpdate
     publishProgress((int) ((i / (float) count) * 100));
 }

 // this will be called on the UI thread
 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 }
 } 
```

如果您不使用 AsyncTask，您可以创建一个处理程序并以这种方式将消息发布到 UI 线程。

但是当您提到文件下载时，需要考虑一些事情（来自 Android 文档）：-

*   设备可能没有足够的空间用于扩展文件，因此您应该在开始下载之前检查并在空间不足时警告用户。
*   文件下载应在后台服务中进行，以避免阻塞用户交互并允许用户在下载完成时离开您的应用程序。
*   在请求和下载过程中可能会出现各种错误，您必须优雅地处理这些错误。
*   下载过程中网络连接可能会发生变化，因此您应该处理此类更改，如果中断，请尽可能恢复下载。
*   当下载在后台进行时，您应该提供指示下载进度的通知，在下载完成时通知用户，并在选择时将用户带回您的应用程序。

幸运的是，以上所有内容都包含在 Google 的库中，该库提供下载进度通知（即使您退出应用程序）。您可以使用它，也可以根据自己的需要修改源代码。更多信息在这里

[http://developer.android.com/google/play/expansion-files.html#AboutLibraries](http://developer.android.com/google/play/expansion-files.html#AboutLibraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:30:35.107

每个下载都应该在自己的线程上运行（如果一个文件更小，一个服务器更快等）。

尝试扩展线程或创建由 URI 或其他标识符参数化的可运行文件以进行下载。一旦你有了它，你就可以调用 2 个线程，这些线程将一直运行直到完成。如果您需要更新 UI（进度条），您将需要实现一个处理程序并将消息从线程发送到处理程序。例如

在主要活动类中：

```
 public static final int UPDATE_PROGRESS_BAR =0; 
   public final Handler uiHander = new Handler(){
         public void handleMessage(Message msg){
            switch(msg.what){
            case UPDATE_PROGRESS_BAR: // Something like this to handle the case of progress bar update
                 int updateAmount = msg.obj;
                 // do something to update prog. bar
                 break; 
```

然后在线程中发送该消息，它需要对处理程序的引用

```
 uiHander.obtainMessage(<activity name>.UPDATE_PROGRESS_BAR,<integer update>).sendToTarget(); 
```

这可能是最便携的方式，因为异步任务实现已将版本更改为版本，并且可能会或可能不会并行执行两个下载（您显然想要）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:16:06.117

您可以使用`DownloadManager`，但它不会在您的视图中显示进度。其他选项是使用`ExecutorService`并提交自定义`Runnable`任务。包装`ExecutorService`在一个自定义类中，该类维护提交的任务映射。每当需要文件时，您可以查询此类任务是否完成，还可以显示正在运行的任务的 ListView。

# css - CSS 特异性 - 如何重叠 twitter-bootstrap

> ID：14466271
> 
> 赞同：0
> 
> 时间：2013-01-22T19:16:13.980
> 
> 标签：css, twitter-bootstrap, will-paginate, css-specificity

我只是偶然发现了 css 的特殊性，同时试图改变我的主题的分页风格。

我使用 twitter-bootstrap 作为基本模板，但我想更改分页。

具体来说，我想删除 will-paginate bootstrap 附带的分页边框：

将分页/引导

```
.pagination a {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    border-color: #DDDDDD;
    border-image: none;
    border-style: solid;
    border-width: 1px 1px 1px 0;
    float: left;
    line-height: 34px;
    padding: 0 14px;
    text-decoration: none;
} 
```

我只需要这个：

```
.pagination a {

    float: left;
    line-height: 34px;
    padding: 0 14px;
} 
```

问题是，如果我在我的 custom.css.scss 文件中设置它，那么引导程序的特异性比我的更高（检查[这个](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)关于特异性的很好的解释）。我什至尝试使用！important，但它仍然没有让我的特异性更高。

我已经通过使用平等特异性规则解决了这个问题 - 最后一个，具有相同的特异性，是一个重要的，只是把：

```
.pagination a {
        -moz-border-bottom-colors: none;
        -moz-border-left-colors: none;
        -moz-border-right-colors: none;
        -moz-border-top-colors: none;
        border-color: #DDDDDD;
        border-image: none;
        border-style: none;
        border-width: 1px 1px 1px 0;
        float: left;
        line-height: 34px;
        padding: 0 14px;
        text-decoration: none;
    } 
```

但这只是无用的CSS，因为我根本不需要边框......

你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:20:23.270

只需尝试`border: none;`而不是重置*每个*子属性。

另外，我刚刚检查了 Bootstrap 的分页选择器，它比这更具体：

```
.pagination ul > li > a, .pagination ul > li > span 
```

尝试使用该选择器代替您的`border: none`.

# search - 使用 Elasticsearch 查询字段的所有唯一值

> ID：14466274
> 
> 赞同：36
> 
> 时间：2013-01-22T19:16:18.770
> 
> 标签：search, elasticsearch

如何使用**Elasticsearch**搜索给定字段的所有唯一值？

我有这样的查询`select full_name from authors`，所以我可以在表单上向用户显示列表。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-23T12:04:26.157

您可以在“full_name”字段中创建[术语方面](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)。但是为了正确地做到这一点，您需要确保在索引时没有对其进行标记，否则构面中的每个条目都将是作为字段内容一部分的不同术语。您很可能需要在映射中将其配置为“not_analyzed”。如果您也在搜索它并且仍想对其进行标记，则可以使用[multi field](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)以两种不同的方式对其进行索引。

您还需要考虑到，根据作为 full_name 字段一部分的唯一术语的数量，此操作可能很昂贵并且需要相当多的内存。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-10-30T07:28:21.393

对于 Elasticsearch 1.0 及更高版本，您可以利用`terms aggregation`它来执行此操作，

查询 DSL：

```
{
  "aggs": {
    "NAME": {
      "terms": {
        "field": "",
        "size": 10
      }
    }
  }
} 
```

一个真实的例子：

```
{
  "aggs": {
    "full_name": {
      "terms": {
        "field": "authors",
        "size": 0
      }
    }
  }
} 
```

然后您可以获得`authors`字段的所有唯一值。size=0 表示不限制术语的数量（这要求 es 为 1.1.0 或更高版本）。

回复：

```
{
    ...

    "aggregations" : {
        "full_name" : {
            "buckets" : [
                {
                    "key" : "Ken",
                    "doc_count" : 10
                },
                {
                    "key" : "Jim Gray",
                    "doc_count" : 10
                },
            ]
        }
    }
} 
```

请参阅[Elasticsearch 术语聚合](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-28T13:12:05.133

**直觉：** 用 SQL 的说法：

`Select distinct full_name from authors;`

相当于

`Select full_name from authors group by full_name;`

因此，我们可以使用 ElasticSearch 中的分组/聚合语法来查找不同的条目。

假设以下是存储在弹性搜索中的结构：

```
[{
    "author": "Brian Kernighan"
  },
  {
    "author": "Charles Dickens"
  }] 
```

**什么不起作用：** 简单的聚合

```
{
  "aggs": {
    "full_name": {
      "terms": {
        "field": "author"
      }
    }
  }
} 
```

**我收到以下错误：**

```
{
  "error": {
    "root_cause": [
      {
        "reason": "Fielddata is disabled on text fields by default...",
        "type": "illegal_argument_exception"
      }
    ]
  }
} 
```

**什么像魅力：**在字段中 附加***.keyword***

```
{
  "aggs": {
    "full_name": {
      "terms": {
        "field": "author.keyword"
      }
    }
  }
} 
```

**样本输出可能是：**

```
{
  "aggregations": {
    "full_name": {
      "buckets": [
        {
          "doc_count": 372,
          "key": "Charles Dickens"
        },
        {
          "doc_count": 283,
          "key": "Brian Kernighan"
        }
      ],
      "doc_count": 1000
    }
  }
} 
```

**奖励提示：**

让我们假设有问题的字段嵌套如下：

```
[{
    "authors": [{
        "details": [{
            "name": "Brian Kernighan"
          }]
      }]
  },
  {
    "authors": [{
        "details": [{
            "name": "Charles Dickens"
          }]
      }]
  }
] 
```

现在正确的查询变为：

```
{
  "aggregations": {
    "full_name": {
      "aggregations": {
        "author_details": {
          "terms": {
            "field": "authors.details.name"
          }
        }
      },
      "nested": {
        "path": "authors.details"
      }
    }
  },
  "size": 0
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-01T22:31:04.617

**为 Elasticsearch 5.2.2 工作**

```
curl -XGET  http://localhost:9200/articles/_search?pretty -d '
{
    "aggs" : {
        "whatever" : {
            "terms" : { "field" : "yourfield", "size":10000 }
        }
    },
    "size" : 0
}' 
```

该`"size":10000`方法获得（最多）10000 个唯一值。如果没有这个，如果您有超过 10 个唯一值，则仅返回 10 个值。

结果`"size":0`意味着`"hits"`不包含任何文档。默认情况下，返回 10 个文档，我们不需要。

* * *

参考：[桶词聚合](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html)

另请注意，根据[此页面](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-facets.html)，在 Elasticsearch 1.0 中，构面已被聚合取代，这是构面的超集。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-20T19:11:07.583

现有答案在 Elasticsearch 5.X 中对我不起作用，原因如下：

*   我需要在索引时标记我的输入。
*   `"size": 0`解析失败，因为“[size] 必须大于 0。”
*   [“默认情况下，文本字段上的字段数据是禁用的。”](https://www.elastic.co/guide/en/elasticsearch/reference/5.0/fielddata.html) 这意味着默认情况下您无法在该`full_name`字段上进行搜索。但是，未分析的`keyword`字段可用于聚合。

**解决方案 1**：使用[Scroll API](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-scroll.html)。它通过保持搜索上下文并发出多个请求来工作，每次都返回后续批次的结果。如果您使用的是 Python，则 elasticsearch 模块具有[`scan()`帮助函数](http://elasticsearch-py.readthedocs.io/en/master/helpers.html#scan)来为您处理滚动并返回所有结果。

**解决方案 2**：使用[Search After API](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-search-after.html)。它类似于 Scroll，但提供了一个实时光标而不是保留搜索上下文。因此，它对于实时请求更有效。

# visual-studio - Visual Studio 帮助系统针对错误的框架版本

> ID：14466278
> 
> 赞同：9
> 
> 时间：2013-01-22T19:16:40.687
> 
> 标签：visual-studio, visual-studio-2012, msdn

有时，当我按下Visual Studio 代码编辑器时，它会打开带有 .NET **Micro** Framework`F1`的 MSDN 页面的浏览器。我的项目使用的是 .NET Framework 4.5，其中没有 Micro Framework 的痕迹。

 **例如，在我的代码编辑器中按下`F1`会`MulticastDelegate`打开[这个链接](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(System.MulticastDelegate);k(SolutionItemsProject);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5);k(DevLang-csharp)&rd=true)而不是[这个链接](http://msdn.microsoft.com/en-us/library/system.multicastdelegate.aspx)。

有人有同样的问题吗？

**更新：**
正如 Jeff Braaten 所建议的，我检查了调试帮助上下文，看起来还不错。例如`Action`和的上下文之间没有区别（关键字除外） 。`MulticastDelegate`

同样告诉生成的 URL For `Action`：

```
http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1
&l=EN-US&k=k(System.Action);
k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5);
k(DevLang-csharp)&rd=true 
```

对于`MulticastDelegate`：

```
http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1
&l=EN-US&k=k(System.MulticastDelegate);
k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5);
k(DevLang-csharp)&rd=true 
```

因此，最有可能的不是 VS 如何生成请求，而是 MSDN 搜索引擎如何解释它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T22:14:37.217

这是 F1 和 Visual Studio 2012 的一个已知问题。我们正在努力解决这个问题，目前没有解决方法。现在，您需要使用搜索来查找正确的主题。Robin Reynolds-Haertle，文档经理

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-10T20:25:27.660

似乎 Visual Studio 错误地使用 a`=`而不是构建 Version 键值对`-`，然后将其转换为`%3D`地址为[URL 编码](http://en.wikipedia.org/wiki/Percent-encoding)时。

如果您替换`%3D`URL 的此部分中的

```
 k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5); 
```

使用 a `-`，您将获得正确的[.NET Framework 4.5 MSDN 页面](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(System.MulticastDelegate);k(TargetFrameworkMoniker-.NETFramework,Version-v4.5);k(DevLang-csharp)&rd=true)。

所以，正确的地址`MulticastDelegate`是：

```
http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1
&l=EN-US&k=k(System.MulticastDelegate);
k(TargetFrameworkMoniker-.NETFramework,Version-v4.5);
k(DevLang-csharp)&rd=true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-11T23:31:45.913

我知道这是 F1 和 Visual Studio 长期存在的问题，但这个问题终于得到了解决。所以现在，当您在 Visual Studio 中按 F1 时，MSDN 应该会为您打开正确的主题。**

# c - 如何在c中访问动态数组中的数据？

> ID：14466281
> 
> 赞同：2
> 
> 时间：2013-01-22T19:16:54.930
> 
> 标签：c, arrays, dynamic

我有两个不同的数组，我正在使用。一个，我得到了我想要的确切结果，另一个，不是那么多。我通过读取类似于以下内容的文本文件来归档数组：

```
2597
283

4
723
21
82
426 
```

前五行是客户 ID。总是有 5 行，但它们并不总是有价值。下一行是供应商的数量，然后是供应商 ID。

```
void use_arrays()
{
    int
        i,
        customer_count,
        *customer_ids,
        vendor_count,
        *vendor_ids;

    customer_ids = malloc(sizeof(int));
    vendor_ids = malloc(sizeof(int));
    fill_arrays(&customer_count, customer_ids, &vendor_count, vendor_ids);

    for (i = 0; i < customer_count; i++)
    {
        printf("Customer[%d]: %d\n", i, customer_ids[i]);
    }

    for (i = 0; i < vendor_count; i++)
    {
        printf("Vendor[%d]: %d\n", i, vendor_ids[i]);
    }

    free(customer_ids);
    free(vendor_ids);
}

void fill_arrays(int *customer_count, int *customer_ids, int *vendor_count, int *vendor_ids)
{
    int
        i,
        *temp,
        customer_id,
        vendor_id,
        num_cust = 0;
    FILE
        *inp_file;
    char
        *endptr = NULL,
        buffer[500];

    inp_file = fopen(g_filename, "r");

    for (i = 0; i < 5; i++) /* Can't be more than 5 customers */
    {
        fgets(buffer, sizeof(buffer), inp_file);
        customer_id = strtol(buffer, &endptr, 0);
        if (customer_id != 0)
        {
            customer_ids[i] = customer_id;
        temp = realloc(customer_ids, (i+2)*sizeof(int));
        if (temp != NULL) 
            {
               customer_ids = temp;
            } 
        else 
        {
               printf("Couldn't allocate memory\n");
            }
        num_cust++;
        }
    }
    *customer_count = num_cust;

    /* Next is number of vendor ids*/
    fgets(buffer, sizeof(buffer), inp_file);
    *vendor_count = strtol(buffer, &endptr, 0);

    temp = realloc(vendor_ids, *vendor_count*sizeof(int));
    if (temp != NULL) 
    {
        vendor_ids = temp;
    } 
    else 
    {
        printf("Couldn't allocate memory\n");
    }

    for (i = 0; i < *vendor_count; i++)
    {
        fgets(buffer, sizeof(buffer), inp_file);
        vendor_id = strtol(buffer, &endptr, 0);
        if (vendor_id != 0)
        {
        vendor_ids[i] = vendor_id;
        }
    }
    fclose(inp_file);
} 
```

一旦数组打印出来，`customer_ids`就会显示正确的数字，但`vendor_ids`会从内存中打印出随机数。更令人沮丧的是，它从内部正确打印了供应商`fill_arrays`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:22:05.247

如果要修改`vendor_ids`in 的方式`fill_arrays`，则必须将其作为指向指针的指针传递：

```
fill_arrays(int *customer_count, int *customer_ids, int *vendor_count, int **vendor_ids) 
```

像这样称呼它：

```
fill_arrays(&customer_count, customer_ids, &vendor_count, &vendor_ids); 
```

然后你可以像这样重新分配：

```
temp = realloc(*vendor_ids, *vendor_count*sizeof(int));
if (temp != NULL) 
{
    *vendor_ids = temp;
} 
```

此外，在您的功能结束时：

```
vendor_ids[i] = vendor_id; 
```

将不得不更改为

```
(*vendor_ids)[i] = vendor_id; 
```

您还必须对`customer_ids`. `customer_ids`工作而没有工作的事实`vendor_ids`可能是由于您使用了`realloc`. 如果`realloc`决定必须在新位置重新分配内存块，您会遇到这些问题，但如果在同一位置重新分配内存，您传入的指针仍指向那里。由于您永远不知道是否`realloc`会做出该决定，因此两者`customer_ids`和`vendor_ids`都应该作为指向指针的指针传入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:43:38.397

您似乎有点困惑如何从函数返回内存。

如果你有一个看起来像这样的函数

`void foo(int a);`

你不能`a`在 foo 里面改变，foo 只能得到一个副本。

`void foo(int *a);`

otoh 为 foo 提供了 a 的地址，即“我知道你住在哪里”，它可以让你更改`a`指向的内容。如果`a`指向一个数组，那么您可以更改该数组的内容，如果 a 指向一个整数，您可以更改它。

`void foo(int **a);`

不仅可以更改`a`指向的内容，还可以更改指向的位置。因此，如果您想`a`指向其他地方，则可以。这是您在函数中需要的，如果您在函数中执行 malloc/calloc/realloc 以返回您需要的结果

# javascript - 我可以使用 rx.js 观察对数组的添加吗？

> ID：14466285
> 
> 赞同：24
> 
> 时间：2013-01-22T19:17:06.687
> 
> 标签：javascript, coffeescript, observable, reactive-extensions-js, rxjs

[github 上的 fromArray Rx wiki](https://github.com/Reactive-Extensions/RxJS/wiki/Observable#wiki-fromArray)

```
coffee> rext = require 'rx'                                                 
coffee> arr = [1..5]                                                 
[ 1, 2, 3, 4, 5 ]                                                    
coffee> obs = rext.Observable.fromArray(arr)                         
{ _subscribe: [Function] }                                           
coffee> obs.subscribe( (x) -> console.log("added value: " + x))      
added value: 1                                                       
added value: 2                                                       
added value: 3                                                       
added value: 4                                                       
added value: 5                                                       
{ isStopped: true,                                                   
  observer:                                                          
   { isStopped: true,                                                
     _onNext: [Function],                                            
     _onError: [Function: defaultError],                             
     _onCompleted: [Function: noop] },                               
  m: { isDisposed: true, current: null } }                           
coffee> arr.push(12)    # expecting "added value: 12"                                              
6                       # instead got new length of array                                              
coffee> 
```

看起来该`subscribe`函数在创建时只会触发一次。看起来这有点用词不当，因为我实际上只是在为数组而不是观察它的变化。不过，该代码几乎与 wiki 上的代码完全相同。所以要么我做错了，要么`subscribe`没有按照我的预期工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-16T18:18:12.860

在 RxJS 中，您要查找的内容称为`Subject`. 您可以将数据推送到其中并从那里流式传输。

*   [主题入门指南](https://github.com/Reactive-Extensions/RxJS/blob/master/doc/gettingstarted/subjects.md)
*   [主题 API 文档](https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/subjects/subject.md)。

**例子：**

```
var array = [];
var arraySubject = new Rx.Subject();

var pushToArray = function (item) {
  array.push(item);
  arraySubject.next(item);
}

// Subscribe to the subject to react to changes
arraySubject.subscribe((item) => console.log(item)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-21T10:38:44.097

我发现[Rx.Observable.ofObjectChanges(obj)](https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/operators/ofobjectchanges.md)可以正常工作。

从文档页面：

> 使用 Object.observe 根据对对象的更改创建一个可观察的序列。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-17T10:48:17.223

这个怎么样：

```
var subject = new Rx.Subject();
//scan example building an array over time
var example = subject.scan((acc, curr) => { 
    return acc.concat(curr);
}
,[]);

//log accumulated values
var subscribe = example.subscribe(val => 
    console.log('Accumulated array:', val)
);

//next values into subject
subject.next(['Joe']);
subject.next(['Jim']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T13:26:36.193

Observable.fromArray 创建一个 Observable，当您添加订阅者时，它会立即为每个数组项触发事件。因此，它不会“监视”该数组的更改。

如果你需要一个“可推送集合”，[Bacon.js](https://github.com/raimohanska/bacon.js)中的 Bus 类可能就是你要找的。对于 RxJs，我的[MessageQueue](https://github.com/raimohanska/rxjs-extensions/blob/master/message-queue.js)小类具有类似的功能。

# mysql - 用于存储差异很大的数值的 MySQL 结构

> ID：14466287
> 
> 赞同：0
> 
> 时间：2013-01-22T19:17:28.270
> 
> 标签：mysql, decimal

我有一列的数值差异很大：

```
123.072
2
0.00012
851
1234
0.1
12
0.531211
etc. 
```

我试过使用 float 和 decimal 但是当我输入`0.023`例如时，它只是将值四舍五入为`0`. 我不能四舍五入这些数字。

我应该使用什么结构类型和长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:27:38.803

尝试定义小数的范围（长度）：

```
decimal(number,number) 
```

# c# - 使用 Task.Factory 返回值以更新 UI

> ID：14466289
> 
> 赞同：0
> 
> 时间：2013-01-22T19:17:33.107
> 
> 标签：c#, multithreading, wcf, task

这应该很容易，但我找不到合适的术语来搜索......好吧，我是 C# 新手，我正在尝试制作一个简单的应用程序来编写 web 服务的返回。

我遇到了使用线程的需要......将参数传递给线程相当容易，我找不到从 Threaded 方法返回并更新我的 UI 以显示结果的方法（实际上没有真正的结果现在）

事件：

```
 private void TextBox_TextChanged_1(object sender, TextChangedEventArgs e)
    {
        minhaSigla = Sigla.Text;
        Task.Factory.StartNew(() => GetQuoteAndUpdateText(minhaSigla));
        tb1.Text = "UIElement-TO-UPDATE";

    } 
```

然后是 Threaded 方法

```
 private string GetQuoteAndUpdateText(string sign)
    {
        string SoapEnvelope = "";
        SoapEnvelope = "<?xml version=\"1.0\" encoding=\"utf-8\"?>";
        SoapEnvelope += "<soap:Envelope ";
        SoapEnvelope += "xmlns:xsi = \"http://www.w3.org/2001/XMLSchema-instance\" ";
        SoapEnvelope += "xmlns:xsd= \"http://www.w3.org/2001/XMLSchema\" ";
        SoapEnvelope += "xmlns:soap= \"http://schemas.xmlsoap.org/soap/envelope/\">";
        SoapEnvelope += "<soap:Body>";
        SoapEnvelope += "   <GetQuote xmlns=\"http://www.webserviceX.NET/\"> ";
        SoapEnvelope += "       <symbol>" + sign + "</symbol> ";
        SoapEnvelope += "   </GetQuote> ";
        SoapEnvelope += "</soap:Body>";
        SoapEnvelope += "</soap:Envelope>";

        EndpointAddress endpoint = new EndpointAddress("http://www.webservicex.net/stockquote.asmx");
        BasicHttpBinding basicbinding = new BasicHttpBinding();
        basicbinding.SendTimeout = new TimeSpan(3000000000);
        basicbinding.OpenTimeout = new TimeSpan(3000000000);

        stockbyname.StockQuoteSoapClient sbn = new stockbyname.StockQuoteSoapClient(basicbinding, endpoint);

        XmlDocument xmlDocument = new XmlDocument();
        return sbn.GetQuote(SoapEnvelope);
    } 
```

任何信息都将不胜感激，甚至评论我的代码有多糟糕：P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T20:07:05.847

无需深入了解所有有趣的[async/await](http://msdn.microsoft.com/en-us/library/hh191443.aspx)内容，您可以使用[Task的](http://msdn.microsoft.com/en-us/library/dd321424.aspx)[ContinueWith](http://msdn.microsoft.com/en-us/library/dd321474.aspx)方法来处理返回的信息。

```
private void TextBox_TextChanged_1(object sender, TextChangedEventArgs e)
{
    minhaSigla = Sigla.Text;
    var quoteGetterTask = Task.Factory.StartNew(() => GetQuoteAndUpdateText(minhaSigla));
    quoteGetterTask.ContinueWith(task => 
    {
        var theResultOfYourServiceCall = task.Result;
        //You'll need to use a dispatcher here to set the value of the text box (see below)
        tb1.Text = theResultOfYourServiceCall;     //"UIElement-TO-UPDATE";
    });
} 
```

正如我在上面的代码示例中提到的，根据您使用的 UI 技术，您需要使用调度程序来避免出现非法的跨线程访问异常。

WinForms 里面的表达式示例`.ContinueWith`（使用[Control的](http://msdn.microsoft.com/en-us/library/36cd312w.aspx)[Invoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)方法）

```
task =>
{
    var theResultOfYourServiceCall = task.Result;
    tb1.Invoke(new Action(() => tb1.Text = theResultOfYourServiceCall));
} 
```

WPF 里面的表达式示例`.ContinueWith`（使用 WPF 的[Dispatcher](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)）

```
task =>
{
    var theResultOfYourServiceCall = task.Result;
    tb1.Dispatcher.Invoke(DispatcherPriority.Normal, 
                          new Action(() => tb1.Text = theResultOfYourServiceCall));
} 
```

Silverlight/Windows Phone 中的表达式示例`.ContinueWith`（使用 Silverlight 的[Dispatcher](http://msdn.microsoft.com/en-us/library/ms615907%28v=vs.95%29.aspx)）

```
task =>
{
    var theResultOfYourServiceCall = task.Result;
    tb1.Dispatcher.BeginInvoke(() => tb1.Text = theResultOfYourServiceCall);
} 
```

Windows Store 中的表达式示例`.ContinueWith`（使用[CoreDispatcher](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.coredispatcher.runasync.aspx)）

```
task =>
{
    var theResultOfYourServiceCall = task.Result;
    tb1.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => tb1.Text = theResultOfYourServiceCall);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T20:11:44.250

更常见的是，您将需要 UI 线程上的任务，因为这可以让您更新您的控件。

```
Task<string>.Factory.StartNew(() => GetQuoteAndUpdateText(minhaSigla)).ContinueWith(s=>  tb1.Text = s, 
TaskScheduler.FromCurrentSynchronizationContext()); 
```

ps：你也可以在 .net 4.5 中使用 await & async

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T23:54:41.473

其他人已经提到`async`/ `await`，但这里有一个简单的例子：

```
private async void TextBox_TextChanged_1(object sender, TextChangedEventArgs e)
{
    minhaSigla = Sigla.Text;
    string result = await GetQuoteAndUpdateTextAsync(minhaSigla);
    tb1.Text = "UIElement-TO-UPDATE";
}

private Task<string> GetQuoteAndUpdateTextAsync(string sign)
{
    string SoapEnvelope = "";
    SoapEnvelope = "<?xml version=\"1.0\" encoding=\"utf-8\"?>";
    SoapEnvelope += "<soap:Envelope ";
    SoapEnvelope += "xmlns:xsi = \"http://www.w3.org/2001/XMLSchema-instance\" ";
    SoapEnvelope += "xmlns:xsd= \"http://www.w3.org/2001/XMLSchema\" ";
    SoapEnvelope += "xmlns:soap= \"http://schemas.xmlsoap.org/soap/envelope/\">";
    SoapEnvelope += "<soap:Body>";
    SoapEnvelope += "   <GetQuote xmlns=\"http://www.webserviceX.NET/\"> ";
    SoapEnvelope += "       <symbol>" + sign + "</symbol> ";
    SoapEnvelope += "   </GetQuote> ";
    SoapEnvelope += "</soap:Body>";
    SoapEnvelope += "</soap:Envelope>";

    EndpointAddress endpoint = new EndpointAddress("http://www.webservicex.net/stockquote.asmx");
    BasicHttpBinding basicbinding = new BasicHttpBinding();
    basicbinding.SendTimeout = new TimeSpan(3000000000);
    basicbinding.OpenTimeout = new TimeSpan(3000000000);

    stockbyname.StockQuoteSoapClient sbn = new stockbyname.StockQuoteSoapClient(basicbinding, endpoint);

    XmlDocument xmlDocument = new XmlDocument();
    return sbn.GetQuoteAsync(SoapEnvelope);
} 
```

请注意它与您现有的方法有多么相似。这就是 的力量`async`。

# c# - 如何在 MVC4 中包含基本的 http 身份验证

> ID：14466300
> 
> 赞同：1
> 
> 时间：2013-01-22T19:18:18.013
> 
> 标签：c#, asp.net-mvc-4

我正在使用 MVC4 中的新 oAuthWebSecurity 功能为网站用户进行 Facebook 身份验证，效果很好。

但是，我想做的是仅针对特定控制器启用基本 HTTP 身份验证。

我已经尝试实现一个自定义操作过滤器（authenticationFilter）来拦截调用并使用自定义代码进行基本身份验证，但代码永远不会遇到`AuthorizationFilter`.

有没有比创建自定义更简单的方法来实现这一点`SimpleMembershipProvider`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:44:05.363

您可以使用`[Authorize]`过滤器如下。

```
public class BooksController : ApiController
{
    [Authorize]
    public IEnumerable<Book> Get()
    {
        var result = new List<Book>()
        {
            new Book()
            {
                Author = "John Fowles",
                Title = "The Magus",
                Description = "A major work of mounting tensions " +
                                "in which the human mind is the guinea-pig."
            },
            new Book()
            {
                Author = "Stanislaw Ulam",
                Title = "Adventures of a Mathematician",
                Description = "The autobiography of mathematician Stanislaw Ulam, " +
                                "one of the great scientific minds of the twentieth century."
            }
        };
        return result;
    }
} 
```

有关更多信息，请查看[**基本 HTTP 身份验证**](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:03:10.297

您可以创建自定义**[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)**以使用基本身份验证来处理身份验证和授权。此属性用作过滤器，并将在请求到达您的控制器操作或 Web API 方法之前对其进行处理。在重写的**OnAuthorize**方法中，您可以获取标头信息以执行身份验证。

如果您使用 ajax 向控制器或 Web API 方法发出请求，请使用基本身份验证来传递凭据以进行授权。这会将凭据放在标题中。**使用 JQuery ajax函数的****beforeSend**事件处理程序非常简单。使用 jquery.base64.js 对发送过来的信息进行编码。这是一个如何执行此操作的示例。

 **```
 getAuthorizationHeader = function (username, password) {
      var authType;
      var up = $.base64.encode(username + ":" + password);
      authType = "Basic " + up;
    };
    return authType;
 };

    $.ajax({
        url: _url,
        data: _data,
        type: _type,
        beforeSend: function (xhr) {
            xhr.setRequestHeader("Authorization", getAuthorizationHeader(username, password));
        },
        success: ajaxSuccessHandler,
        error: ajaxErrHandler
    }); 
```

这对在标头中发送的用户名/密码进行编码。请注意，仅依靠编码是不够的安全性，因为它很容易解码。您仍然希望使用 HTTPS/SSL 来确保通过网络发送的信息是安全的。

在服务器端，您可以创建一个自定义**AuthorizeAttribute**，它从标头中获取凭据，对其进行解码，并执行您的身份验证/授权过程。请注意，Web API 使用了一个单独的**AuthorizeAttribute ，而不是控制器。**创建自定义**AuthorizeAttribute**时，请务必使用**System.Web.Http.AuthorizeAttribute作为基类****如果您使用的是 Web API。他们有不同的行为。用于控制器的那个将要重定向到登录页面，而用于 Web API 的那个会返回一个指示成功或失败的 HTTP 代码。如果授权无法区分由于授权而不是身份验证导致的失败，我将返回一个 HTTP 代码 Forbidden，以便客户端可以做出相应的反应。**

 **下面是从可以在自定义**AuthorizeAttribute**中使用的标头获取凭据的示例方法。

```
 private bool GetUserNameAndPassword(HttpActionContext actionContext, out string username, out string password)
    {
        bool gotIt = false;
        username = string.Empty;
        password = string.Empty;
        IEnumerable<string> headerVals;
        if (actionContext.Request.Headers.TryGetValues("Authorization", out headerVals))
        {
            try
            {
                string authHeader = headerVals.FirstOrDefault();
                char[] delims = { ' ' };
                string[] authHeaderTokens = authHeader.Split(new char[] { ' ' });
                if (authHeaderTokens[0].Contains("Basic"))
                {
                    string decodedStr = SecurityHelper.DecodeFrom64(authHeaderTokens[1]);
                    string[] unpw = decodedStr.Split(new char[] { ':' });
                    username = unpw[0];
                    password = unpw[1];
                }
                gotIt = true;
            }
            catch { gotIt = false; }
        }

        return gotIt;
    } 
```

这是用于解码此方法中使用的标头数据的代码。

```
 public static string DecodeFrom64(string encodedData)
    {

        byte[] encodedDataAsBytes

            = System.Convert.FromBase64String(encodedData);

        string returnValue =

           System.Text.Encoding.ASCII.GetString(encodedDataAsBytes);

        return returnValue;

    } 
```

获得用户名和密码后，您可以使用 SimpleMembership 提供程序执行身份验证和授权。****

# javascript - 将 hoverintent 添加到这个 jquery 片段

> ID：14466301
> 
> 赞同：0
> 
> 时间：2013-01-22T19:18:18.890
> 
> 标签：javascript, jquery, hoverintent

有没有办法将 hoverinter 添加到这个 jquery 片段中？目前，如果您将鼠标悬停在具有“wall-block-content”类的周围元素上，它们都会淡入/淡出。

```
$(".wall-block-content").fadeTo("fast", 0);

$(".wall-block-content").hover(function(){
$(this).fadeTo("fast", 1);
},function(){
$(this).fadeTo("fast", 0);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:50:16.047

使用计时器来实现意图：http: [//jsfiddle.net/bxqTr/](http://jsfiddle.net/bxqTr/)

```
$(".wall-block-content").hover(function(){
    var $this = $(this),
        timer = $this.data("timer");

    if(timer) window.clearTimeout(timer);
    timer = window.setTimeout(function () {
        $this.stop().animate({'opacity':'0'},100);
    }, 1000);
    $this.data("timer", timer);
},function(){
    var $this = $(this),
        timer = $this.data("timer");

    if(timer) window.clearTimeout(timer);
     $this.stop().animate({'opacity':'1'},100);
}); 
```

在此示例中，用户必须将鼠标悬停在元素上至少 1 秒（1000 毫秒）才能显示意图。不过，Barlas 是对的，使用动画更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:39:26.277

改用[animate()](http://api.jquery.com/animate/)方法，更可靠，你可以像这样改进你的动画：

**更新：**您可以创建一个具有透明背景的假元素，然后使用它来触发目标元素的动画。**[这是 jsFiddle 示例。](http://jsfiddle.net/V6DDg/8/)**

```
$(".hidden").hover(function(){
    $('.target').stop().animate({'opacity':'1','margin-top':'0px'},100);
},function(){
    $('.target').stop().animate({'opacity':'0','margin-top':'20px'},100);
});

<div id="wrapper">
    <div class="target posi"></div>
    <div class="hidden posi"></div>
</div>

#wrapper { position:relative; left:0; top:0; } 
    .posi { position:absolute; left:100px; top:100px; width:200px; height:200px;}
        .hidden { background:transparent; cursor:pointer; }
        .target {background:red; opacity:0;} 
```

# php - 更快的方法

> ID：14466302
> 
> 赞同：0
> 
> 时间：2013-01-22T19:18:19.253
> 
> 标签：php

我正在使用 PDO 从我的数据库中获取一系列关系。

```
$dbRelaties = $dbh->query("SELECT pkRelatieId,naam,email FROM relaties"); 
```

在另一个函数中，我需要访问该数组中的一个特定行。我设法做到了这样：

```
$klant = array();
foreach($dbRelaties as $dbRelatie)
{
    if($dbRelatie["pkRelatieId"] == $relatie){ $klant = $dbRelatie; break; }
}
sendMail("Subject",$klant); 
```

上面的代码有效。但我正在寻找一个更简洁和更快的解决方案，上面的代码在一个函数中调用，并且该函数在一个循环中调用。因此，每次执行时都必须循环`$dbRelaties`以获取正确的关系。

任何人都可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:20:10.330

假设`pk`手段主键，那么

```
while($row = mysql_fetch_assoc($result)) {
    $dbRelatie[$row['pkRelatieID']] = $row;
} 
```

会生成一个以您的主键字段为键的数组，所以

```
$dbRelatie[$pk]['naam'] 
```

会给你那个特定的 pk 的 naam 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:55:33.680

显示 Marc B 答案的 PDO 特定版本。

假设查询是通过 PDO 执行的，如下所示：

```
$sql = "SELECT pkRelatieId,naam,email FROM relaties";
$resultSet = $pdo->query($sql); 
```

可以使用 PDO 的 fetch 方法将结果读入 PHP 数组。

```
$dbRelaties = array();
while ($row = $resultSet->fetch(PDO::FETCH_ASSOC)) {
    $dbRelaties[$row['pkRelatieID']] = $row;
} 
```

然后可以使用它来访问基于行的 PK 的值。

```
sendMail("Subject", $dbRelaties[$relatie]['naam']); 
```

* * *

此外。PDO 允许您为每个 PDO 实例分配默认提取模式，并且 PDOStatement 类是 Traversable，因此您实际上不必在 while 循环中调用 fetch() 方法来遍历结果集。

如果您要在查询之前对 PDO 对象执行此操作：（*理想情况下，仅在创建对象后立即执行一次。）*

```
$pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 
```

然后，您可以在结果集上使用 foreach 循环来获取具有字段名称的行数组，而不是使用 while 循环。

```
$dbRelaties = array();
foreach ($stmt as $row) {
    $dbRelaties[$row['pkRelatieID']] = $row;
} 
```

# c# - 未找到 WeakEventManager 类

> ID：14466305
> 
> 赞同：1
> 
> 时间：2013-01-22T19:18:30.330
> 
> 标签：c#, .net

我正在尝试从 WeakEventManager 类继承，但在我的项目中找不到命名空间。我不确定发生了什么，因为我正在使用 System.Windows；指示。我可以成功加载一个使用此类的项目，但我似乎无法自己实现它。该项目是.Net 4.5，我不确定发生了什么。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:20:10.203

该类位于`System.Windows`命名空间中，但在`WindowsBase`程序集中定义。确保您已导入`WindowsBase`程序集并将其添加为对项目的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:23:02.137

在解决方案资源管理器中

1.  打开你的项目
2.  右键单击引用
3.  单击添加参考
4.  选择 .NET 选项卡
5.  选择 System.Windows
6.  点击确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T21:15:38.007

在解决方案资源管理器中

1.  打开你的项目
2.  右键单击引用
3.  单击添加参考
4.  选择 .NET 选项卡
5.  选择 WindowsBase

# silverlight - 必应地图silverlight控制改变操作模式。

> ID：14466306
> 
> 赞同：0
> 
> 时间：2013-01-22T19:18:31.153
> 
> 标签：silverlight, bing-maps

默认情况下，地图查看器通过在查看器周围拖动地图来响应地图点击。我想创建用户可以单击、绘制矩形并将地图放大到该矩形的功能。

这是地图支持还是有什么方法可以实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:33:01.400

[将形状添加到 bing 地图](http://msdn.microsoft.com/en-us/library/ee681899.aspx) ，添加形状后，您可以更改地图的缩放级别

# c# - Linq 中的 DateDiff 替代方案

> ID：14466312
> 
> 赞同：1
> 
> 时间：2013-01-22T19:18:59.680
> 
> 标签：c#, .net, linq

如果有日期位于两个字段之间的记录：开始和结束，我正在尝试获取结果。我的 linq 查询似乎没有返回任何结果：

```
var alerts = from q in db.AlertMsgs 
             where (q.Start >= DateTime.Now
             && q.Finish <= DateTime.Now)
             select q; 
```

关于为什么会这样的任何建议？我也试过

```
var alerts = from q in AlertMsgs.Where(q => q.Start.CompareTo(DateTime.Now) > 0
&& q.Finish.CompareTo(DateTime.Now) < 1)
 select q; 
```

也没有任何运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:22:00.427

你的条件倒退了。尝试：

```
var alerts = from q in db.AlertMsgs 
             where (q.Start < DateTime.Now && q.Finish > DateTime.Now) 
             select q; 
```

或者，使用方法语法（和`<=`/ `>=`，以防您想要进行比较）：

```
var alerts = db.AlertMsgs
               .Where(q => q.Start <= DateTime.Now && q.Finish >= DateTime.Now); 
```

这将为您提供所有已经开始 ( `Start < Now`) 和尚未完成 ( `Finish > Now`) 的消息。您正在搜索的是尚未开始（或现在*正好*开始）但已经完成（或*现在正好*结束）的消息。这只会返回一个具有相同开始和结束时间的项目，并且两个时间都是精确的`DateTime.Now`。

# ios - 在 ARC 下使用带有 CAShapeLayer 的 [UIBezierPath CGPath] 崩溃

> ID：14466313
> 
> 赞同：5
> 
> 时间：2013-01-22T19:19:00.290
> 
> 标签：ios, core-animation, uibezierpath, cashapelayer

在 ARC 下使用`[UIBezierPath CGPath]`with 时出现 BAD ACCESS 错误。`CAShapeLayer`我尝试过以各种方式进行桥接，但我不清楚这是否是问题所在。我已将崩溃隔离为使用该`makeToPath`方法的结果：

```
 maskLayer = [CAShapeLayer layer];
 maskLayer.path = [self makeToPath]; 
```

但这不会崩溃：

```
 maskLayer = [CAShapeLayer layer];
 maskLayer.path = [self makeFromPath]; 
```

由 创建的路径是否有无效的地方`makeToPath`？一旦我解决了这个崩溃问题，我计划使用*from*和*to*路径。s from`CABasicAnimation`的正确 ARC 桥接是什么？`CGPathRef``UIBezierPath`

```
-(CGPathRef)makeToPath
{
    UIBezierPath* triangle = [UIBezierPath bezierPath];
    [triangle moveToPoint:CGPointZero];
    [triangle addLineToPoint:CGPointMake(self.view.frame.size.width,0)];
    [triangle addLineToPoint:CGPointMake(0, self.view.frame.size.height)];
    [triangle closePath];
    return [triangle CGPath];
}

-(CGPathRef)makeFromPath
{
    UIBezierPath*rect = [UIBezierPath bezierPathWithRect:self.view.frame];
    return [rect CGPath];
} 
```

**更新**所以我根据下面的答案更改了我的 .h 文件，但我仍然遇到崩溃

```
-(CGPathRef)makeToPath CF_RETURNS_RETAINED;
-(CGPathRef)makeFromPath CF_RETURNS_RETAINED; 
```

我还尝试让我的方法根据[此处](https://stackoverflow.com/a/14130159/840992)`UIBezierPath`的答案返回一个实例（如下所示）。仍然没有成功。有人想给我关于如何解决这个问题的详细解释吗？

```
maskLayer.path = [[self makeToPath] CGPath];// CRASHES
morph.toValue =  CFBridgingRelease([[self makeToPath] CGPath]);// CRASHES 
```

* * *

```
-(UIBezierPath*)makeToPath
{
    UIBezierPath* triangle = [UIBezierPath bezierPath];
    [triangle moveToPoint:CGPointZero];
    [triangle addLineToPoint:CGPointMake(self.view.frame.size.width,0)];
    [triangle addLineToPoint:CGPointMake(0, self.view.frame.size.height)];
    [triangle closePath];
    return triangle;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T19:35:24.497

问题在于返回 CGPath。返回的值是 ARC 未涵盖的 CGPathRef。您创建的`UIBezierPath`方法在方法结束后被释放。因此也释放了 CGPathRef。您可以指定源注释以让 ARC 知道您的意图：

在 .h 文件中：

```
-(CGPathRef)makeToPath CF_RETURNS_RETAINED;
-(CGPathRef)makeFromPath CF_RETURNS_RETAINED; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T21:17:09.680

正如另一张海报指出的那样，您正在返回从 UIBezierPath 对象获取的 CGPath 引用，该对象在方法结束时超出范围。正如 UIBezierPath CGPath 属性上的文档所说：

> 路径对象本身由 UIBezierPath 对象拥有，并且仅在您对路径进行进一步修改之前有效。

您需要创建 CGPath 的副本并返回：

```
-(CGPathRef)makeToPath
{
    UIBezierPath* triangle = [UIBezierPath bezierPath];
    [triangle moveToPoint:CGPointZero];
    [triangle addLineToPoint:CGPointMake(self.view.frame.size.width,0)];
    [triangle addLineToPoint:CGPointMake(0, self.view.frame.size.height)];
    [triangle closePath];
    CGPathRef theCGPath = [triangle CGPath];
    return CGPathCreateCopy(theCGPath);
} 
```

我阅读 llvm 项目链接的方式，我认为 cf_returns_retained 限定符是为了告诉调用者返回值的内存管理策略，而不是为你做保留。

因此，我认为您都需要创建路径的副本并添加 cf_returns_retained 限定符。但是，我不清楚该限定符的语法。（以前从未使用过。）

假设另一张海报具有正确的语法，它看起来像这样：

```
-(CGPathRef)makeToPath CF_RETURNS_RETAINED;
{
    UIBezierPath* triangle = [UIBezierPath bezierPath];
    [triangle moveToPoint:CGPointZero];
    [triangle addLineToPoint:CGPointMake(self.view.frame.size.width,0)];
    [triangle addLineToPoint:CGPointMake(0, self.view.frame.size.height)];
    [triangle closePath];
    CGPathRef theCGPath = [triangle CGPath];
    return CGPathCreateCopy(theCGPath);
} 
```

# jquery - 是否可以简化我的 AJAX 导航代码？

> ID：14466316
> 
> 赞同：-1
> 
> 时间：2013-01-22T19:19:31.733
> 
> 标签：jquery, ajax, navigation

我仍在学习 javascript，并且正在构建一个 ajax 网站，该网站从外部文件（例如 test1.php、test2.php）中加载每个页面的内容。我花了几个小时拼凑一些有效的代码，但感觉真的很笨拙。关于如何简化它的任何建议？或者我正在做的任何事情都是愚蠢的，应该以不同的方式做？

JS：

```
$(document).ready(function() {

var hash = window.location.hash.substr(1);

var projectID = $('#topNav a').each(function(){
    var projectID = $(this).attr('id');
    if(hash==projectID){
        var toLoad = hash+'.php .content';
        $('.content').load(toLoad);
        $(this).siblings().removeClass('active');
        $(this).addClass('active');
    }                           
});

$('#topNav a').click(function(){

    var toLoad = $(this).attr('href')+' .content',
        newId = $(this).attr('rel'),        
        oldHeight = $('#shell').css("height"),      
        viewportHeight = $(window).height()

    if (!$(this).hasClass("active")) {

        $(this).siblings().removeClass('active');
        $(this).addClass('active');

        $('<div/>', {
            id: newId,
            class: 'content'
        }).css({ top: viewportHeight + "px", display: "none" }).appendTo('#shell').load(toLoad);

        $('#' + newId).show(function() {
            $(this).animate({ top: "0px", queue: false}, 600);
            $('#shell > div:first').animate({ top: "-" + oldHeight, queue: false}, 600, function() {

                $('#shell > div:first').remove()
            });
        });

        var newHash = $(this).attr('id');
        window.history.pushState(null, "", "#" + newHash);

    }

    return false;
});

window.addEventListener("popstate", function(e) {

    var hash = window.location.hash.substr(1),
        oldHeight = $('#shell').css("height"),      
        viewportHeight = $(window).height()

    var projectID = $('#topNav a').each(function(){
        var projectID = $(this).attr('id');
        if(hash==projectID){
            var toLoad = hash+'.php .content'

            $(this).siblings().removeClass('active');
            $(this).addClass('active');

            $('<div/>', {
                id: hash,
                class: 'content'
            }).css({ top: viewportHeight + "px", display: "none" }).appendTo('#shell').load(toLoad, function() {

                $(this).show(function() {
                    $(this).animate({ top: "0px", queue: false}, 600);
                    $('#shell > div:first').animate({ top: "-" + oldHeight, queue: false}, 600, function() {

                        $('#shell > div:first').remove()
                    });
                });

            });

        }                           
    });

}); 
```

});

HTML：

```
<nav id="topNav">
<a href="test1.php" id="test1" rel="content1" class="active">Test 1</a>
<a href="test2.php" id="test2" rel="content2">Test 2</a>
<a href="test3.php" id="test3"rel="content3">Test 3</a>
</nav>

<div id="shell">

<div id="content1" class="content">

    <p>Here is the first page</p>

</div>

</div> 
```

CSS：

```
#topNav {
position: fixed; overflow: auto; top: 0; left: 0;
width: 100%; z-index: 100; background: #fff; height: 80px;
}
#topNav a { margin-right: 30px; color: #a9a9a9; }
  #topNav a.active { color: #333; }

#shell { margin: 0px; padding: 0px; width: 100%; height: 100%; }

.content { 
  position: absolute; margin: 0px; padding-bottom: 0px;
  width: 100%; height: 100%;
}
#content1 { background: #000; color: #fff; }
#content2 { background: red; }
#content3 { background: blue; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:47:34.163

要点：

*   很多代码是重复的 -> 识别模式并制作一个插件
*   你不缓存你的 jquery 对象
*   你不使用 .on （&delegate 事件）
*   你不会链接你的 jquery 方法

沿着这些思路进行重组（它只是核心，没有经过测试，但应该是一个很好的重启点）

```
$.fn.extend({

  tofocus : function () {

      var $tofocus=$(this);
      //put your animations/effects/your browser history management stuff
     //addcclass/removeclass 
     //chain everything .end() if necesary (like after .siblings() )
    return $tofocus;

    },      

  loadcontent : function(id) {
       var $t=$(this);
       //look if this content was already loaded 
       //if loaded $("#'+id+'").tofocus() 

      //if not ->
       var viewportHeight=$(window).height();
       var $divcontent = $('<div/>', {
                    "id"   : "content-"+id,
                    "class": 'content'
                     }).css({ 
                      top: viewportHeight + "px", display: "none"       
                 }).appendTo($t).load(id+'.php',function() {
                        $(this).tofocus();
        });
        return $t;
  }
})

$(document).ready(function() {
  //cache your content container 
  // it will  be used every time a nav button is clicked/at init & if using back/fw button -> you'll spare as much access to the dom to create the object
  var $ctt=$("#shell");
  //load first page (id from hashtag on page load ?)
  var hashfirst=...
  $ctt.loadcontent(hashfirst);

  $(document).on("click","#topNav a",function(e) {
            $ctt.loadloadcontent(this.id);
            return false
   })

   window.addEventListener("popstate", function(e) {

            var hash = window.location.hash.substr(1),
            $ctt.loadcontent(hash);

           });
 }); 
```

# c# - 登录屏幕 - 我们应该使用 cookie

> ID：14466318
> 
> 赞同：0
> 
> 时间：2013-01-22T19:19:35.953
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-membership, session-cookies

我有一个登录屏幕，成功登录后，我将显示一个欢迎屏幕。但问题是如果我刷新网页。我被带回登录屏幕。如果我成功登录，那么如果我刷新我应该去欢迎页面。

我做了一些研究，发现我应该`cookies`用来处理这个问题。cookie 是最好的方法还是有其他方法可以解决这个问题？

有人可以指点我一个很好的教程来解释如何做到这一点吗？或一些示例代码开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:26:01.073

这是[FormsAuthenticationTicket](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx)类上的 MSDN，用于授权用户访问您的应用程序。这是您想询问/Google 以获取有关用户身份验证的更多信息的术语。

基本前提是，一旦您对用户进行了身份验证，您就会发出一个*加密*的cookie，其中包含有关该用户的一些基本信息。此 cookie 用于证明用户就是他们所说的身份，定义登录过期时间，并允许您授权他们访问应用程序中的不同资源。

**小心的话**

话虽如此，如果您正在使用自己的授权/登录系统，我**强烈**建议您使用内置的 .NET 会员提供程序。Web 授权和身份验证有很多警告，使用自己的代码留下安全漏洞的可能性非常高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:32:53.633

Here are some other approaches that don't require cookies:

*   if you can use authentication provided natively by browser (i.e. Windows if your case is intranet with Windows domain) than you can base your decision on headers other than cookie header (i.e. in case of Windows auth you can use "impersonate request as user" functionality) to see if user is "logged in" to your system.
*   you can also set information on local system in Local storage to say "this user is logged in" and than check on login page if some other page needs to be rendered. This is not secure approach, but it maybe ok (as you still need to have some way to secure all other pages).

# grails - grails 模板中不需要的文件

> ID：14466319
> 
> 赞同：1
> 
> 时间：2013-01-22T19:19:39.823
> 
> 标签：grails

我为自动生成代码创建了一些模板，但仍然创建了`grails install-templates`一些不必要的文件。`form.gsp`我怎样才能删除它们？我找不到配置文件来修改和只创建我的模板。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:27:56.483

`grails install-templates`安装 Grails 模板的副本以`src/templates`供您修改。如果你不在乎`form.gsp`，那么就忽略它。模板没有打包到您的 WAR 中，它们只是由 Grails`generate-*`命令使用。如果您认为有必要将其删除，请不要`grails install-templates`再次运行。该命令只需执行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:06:51.590

Grails 通过将 GRAILS_HOME 中的默认模板集与您的应用程序中安装的模板组合来构建它需要从中生成的模板列表，在名称冲突的情况下，您的应用程序中的模板优先。因此，如果您从应用程序中删除模板，`src/templates`那么 Grails 将简单地使用该模板的内置版本。我认为这是故意不重复自己的行为，以允许您有选择地覆盖某些模板，但坚持其他模板的默认值，而不必复制您未修改的模板。

所以我不认为你可以在你的时候阻止它`form.gsp`被创建`generate-views`，但是如果你修改的脚手架模板没有引用它，那么它并没有什么害处，你可以忽略它。您可以在您的`src/templates`

```
<%-- This file intentionally left blank --%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:25:56.750

当您执行命令“grails install-templates”时，它会生成一个文件夹 src/templates/scaffolding。在这个文件夹中是当你执行 o comando generete-all/view/controller 时将自动生成的文件。

# java - Gson 序列化名称：“隐式超级构造函数 Object() 未定义默认构造函数。必须定义显式构造函数”

> ID：14466323
> 
> 赞同：0
> 
> 时间：2013-01-22T19:20:00.563
> 
> 标签：java, android, eclipse, gson, eclipse-adt

我是 Android 新手，我正在尝试学习如何使用 Gson 来解析 API 调用。我读了一点，我正在尝试遵循这个例子：[http ://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

进展比较顺利，但是当我将项目导入 Eclipse 以更好地查看代码时，我遇到了上面关于构造函数的错误（以及其他一些令人困惑的错误）。

我在 StackOverflow 上阅读了一些相关的问题，但它们都涉及继承的类，而且，我可能非常困惑，但我不认为这个类是继承的。

是什么导致了这些错误，我该如何解决？

如果您想在不深入阅读文章的情况下获得该项目的链接，请访问此处：[http ://dl.dropbox.com/u/7215751/JavaCodeGeeks/AndroidJsonParsingTutorial/AndroidJsonProject.zip](http://dl.dropbox.com/u/7215751/JavaCodeGeeks/AndroidJsonParsingTutorial/AndroidJsonProject.zip)

以下是相关文件中的代码：package com.javacodegeeks.android.json.model;

```
import com.google.gson.annotations.SerializedName;

public class SearchResponse {

public List<Result> results;

@SerializedName("max_id")
public long maxId;

@SerializedName("since_id")
public int sinceId;

@SerializedName("refresh_url")
public String refreshUrl;

@SerializedName("next_page")
public String nextPage;

@SerializedName("results_per_page")
public int resultsPerPage;

public int page;

@SerializedName("completed_in")
public double completedIn;

@SerializedName("since_id_str")
public String sinceIdStr;

@SerializedName("max_id_str")
public String maxIdStr;

public String query;

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:34:44.143

您的研究是正确的 - 提到的错误与构造函数和继承有关。似乎在您的项目中的某个地方，您有一个 Employee 类，并且该类没有声明公共（或至少受保护的）空构造函数（即不带参数的构造函数）。

在提供的示例代码中，我找不到任何提到这样一个类的东西——也许是你添加来试验的东西？

无论如何，向提到的 Employee 类添加一个 null 构造函数应该会让你的一些问题消失。

# perl - 从perl中的字符串中提取数字

> ID：14466335
> 
> 赞同：1
> 
> 时间：2013-01-22T19:20:39.367
> 
> 标签：perl

```
$string1 = "2_0_1AU13682.0AV+0.2"

$string2 = "2_0_1AT+0.1CD13681.9" 
```

我有这两个字符串。如何从它们中提取 7 char 十进制数？

从字符串 1 开始，`13682.0`从字符串 2 开始`13681.9`。

十进制数始终为 7 个字符，并且始终采用以下形式`xxxxx.x`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T19:28:35.550

尝试使用*正则表达式*和*匹配*运算符执行此操作：

```
my $string1 = "2_0_1AU13682.0AV+0.2";
my ($res) = $string1 =~ m/(\d{5}\.\d)/; 
print $res, "\n"; 
```

请参阅[提取匹配](http://perldoc.perl.org/perlretut.html#Extracting-matches)和[Regexp-Quote-Like-Operators](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:34:35.357

使用正则表达式，如下所示：

```
my @data = qw( 2_0_1AU13682.0AV+0.2 2_0_1AT+0.1CD13681.9 );

foreach my $str (@data) {

    if ($str =~ /(\d{5}\.\d)/) {
        print $1, "\n";
    }

} 
```

输出：

```
13682.0
13681.9 
```

# xaml - 是否可以在 XAML for Visual Studio 2012 中为用户控件创建通用基类

> ID：14466336
> 
> 赞同：2
> 
> 时间：2013-01-22T19:20:43.513
> 
> 标签：xaml, generics, visual-studio-2012

网络上似乎有一些是/否/绝对/没有关于此的信息。我希望能够创建一个基类。

```
class GenericUserControl<T> : UserControl {

     // Lots of cools stuff based on T cause I wanna! In fact T
     // will be the ViewModelClass but please no pedantic discussion on what
     // MVVM is or is not. I want generics in XAML!

} 
```

然后在基于 GenericUserControl 的设计器中创建一个新的具体用户控件

```
class MyControl : GenericUserControl<MyControlViewModel> {

} 
```

我已经看到许多博客文章声称这可以在 XAML 中使用 x:TypeArguments 并且似乎有 XAML 文档[http://msdn.microsoft.com/en-us/library/ms750476.aspx](http://msdn.microsoft.com/en-us/library/ms750476.aspx)表明此功能是可能的但是我又一次发现帖子说这个功能在 Visual Studio 2012 中被破坏了。

因此，如果这是可能的并且任何天才都可以弄清楚如何让它专门与 VS 2012 一起工作，那么请在这里发布一个**经过测试**的解决方案，我会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:46:42.780

在 xaml 中使用 x:TypeArguments 可以做到这一点，但众所周知，它会破坏各种 xaml 设计器（在 Visual Studio 和 Blend 中）。

该问题已在 Visual Studio 2012 Xaml 设计器中修复，使用 Visual Studio 2012 Update 2 的最新 CTP。

讨论：

[http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/895b38c7-ddde-4d38-8915-493be0efe6a7/](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/895b38c7-ddde-4d38-8915-493be0efe6a7/)

CTP 下载：

[http://www.microsoft.com/en-us/download/details.aspx?id=36539](http://www.microsoft.com/en-us/download/details.aspx?id=36539)

不幸的是，它似乎不适用于最新的 Blend for Visual Studio 2012。

# r - WinBUGS 代码中的错误

> ID：14466337
> 
> 赞同：1
> 
> 时间：2013-01-22T19:20:45.500
> 
> 标签：r, bayesian, winbugs

我无法让下面的 WinBUGS 代码工作。它适用于普通先验，但不适用于统一先验。单击后出现的错误消息`compile`是`array index is greater than array upper bound for age`。这意味着什么？任何人都可以帮我处理下面的代码吗？

```
model
{
for (i in 1:n) {
# Linear regression on logit
logit(p[i]) <- alpha + b.sex*sex[i] + b.age*age[i]
# Likelihood function for each data point
frac[i] ~ dbern(p[i])
}
alpha ~ dunif(0, 1) # Prior for intercept
b.sex ~ dunif(0, 1) # Prior for slope of sex
b.age ~ dunif(0, 1) # Prior for slope of age
}
Data
list(sex=c(1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0,     1,
1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1,     1, 0,
0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1,      1, 1,
0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1),
age= c(69, 57, 61, 60, 69, 74, 63, 68, 64, 53, 60, 58, 79, 56, 53, 74, 56, 76, 72,
56, 66, 52, 77, 70, 69, 76, 72, 53, 69, 59, 73, 77, 55, 77, 68, 62, 56, 68, 70, 60,
57, 51, 51, 63, 57, 80, 52, 65, 72, 80, 73, 76, 79, 66, 51, 76, 75, 66, 75, 78, 70,
67, 51, 70, 71, 71, 74, 74, 60, 58, 55, 61, 65, 52, 68, 75, 52, 53, 70),
frac=c(1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1,        0,
1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1,        1, 1,
1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1,      1, 1,
1, 0, 1, 1, 0, 0, 1, 0, 0, 1),
n=100)
Initial Values
list(alpha=0.5, b.sex=0.5, b.age=0.5) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T22:32:18.237

哦，这很清楚。WinBUGS 说`array index is greater than array upper bound for age`。这清楚地暗示了一个错误 - >我看到你有`n = 100`并且`age`列表不够长：

```
> your_list <- list(...)
> str(your_list)
List of 4
 $ sex : num [1:100] 1 1 1 0 1 1 0 0 0 0 ...
 $ age : num [1:79] 69 57 61 60 69 74 63 68 64 53 ...
 $ frac: num [1:100] 1 1 1 0 1 1 0 1 1 0 ...
 $ n   : num 100 
```

无论如何，我不会在这里使用制服；除非你真的知道你在做什么，否则我会推荐 flat normal`dnorm(0, 1.0E-10)`左右。您还应该允许系数为负值。“零假设”通常是系数为零，因此要使系数后验分布的平均值为零，您应该“从两侧留出一些空间”（直观地说）。

# c - 这个“循环（..）{..}”语法结构是什么？（不在 K&R 中）

> ID：14466339
> 
> 赞同：9
> 
> 时间：2013-01-22T19:20:56.450
> 
> 标签：c, loops, syntax

C 不是我的第一语言，但我已经写了很多。我正在检查一个代码，我遇到了一个我以前从未见过的结构：

```
loop(i,nlevels)
{
  /* do stuff based on "i"  */
} 
```

没有`do`、`for`或`while`。"i" 在循环内没有作用。我认为这意味着从 0 到 nlevels（或者可能是 nlevels-1）依次循环“i”，但我不知道。我在 K&R 中找不到这个。我在互联网上找不到它。有人可以启发我吗？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T19:22:21.887

`loop`肯定是有人定义的宏，因为它不是 C 语言的一部分。

搜索一个`#define loop`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-22T19:22:57.470

这个宏可能在某处定义：

```
#define loop(index, steps) for(int index = 0; index <= steps; index++) 
```

或者一个看起来非常相似的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T19:22:43.093

循环是某个地方的#defined 宏吗？这似乎是一个很简单的宏，有人可能想要这样做。

# asp.net - HTTP Post 过滤掉 Content-Type "text/xml"

> ID：14466342
> 
> 赞同：1
> 
> 时间：2013-01-22T19:21:12.887
> 
> 标签：asp.net, post, iis-7.5

我的页面是用 ASP.Net 编写的，我们的站点运行 IIS 7.5。

我正在尝试从发布到我们网站页面的外部来源接收 Xml 文档。我可以使用 Content-Type “application/x-www-form-urlencoded” 从网页发送和接收测试文档。发件人的文档是 Content-Type “text/xml”。我已经修改了 web.config 以尝试各种事情，所有这些仍然给我们一个来自发件人的“空白”文档。是否有一些我仍然缺少的设置会导致这种情况？

我的 web.config 设置是：

```
<system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
    <sessionState mode="Off" cookieless="true" />
    <httpRuntime requestValidationMode="2.0" enableVersionHeader="false" />
    <webServices>
      <protocols>
        <add name="HttpGet" />
        <add name="HttpPost" />
      </protocols>
    </webServices>
  </system.web>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="P3P" value="policyref='https://oursite/w3c/p3p.xml',CP='NON DSP COR CUR OUR IND PUR ONL PHY'" />
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Methods" value="POST,GET" />
        <add name="Access-Control-Allow-Headers" value="content-type:text/xml;charset=utf-8"/>
      </customHeaders>
    </httpProtocol>
    <staticContent>
      <mimeMap fileExtension=".aspx" mimeType="text/xml" />
      <mimeMap fileExtension=".aspx" mimeType="application/x-www-form-urlencoded"/>
    </staticContent>
    <httpErrors errorMode="Detailed" />
    <httpCompression>
      <staticTypes>
        <add mimeType="text/xml" enabled="true"/>
      </staticTypes>
      <dynamicTypes>
        <add mimeType="text/xml" enabled="true"/>
      </dynamicTypes>
    </httpCompression>
    <security>
      <requestFiltering>
        <fileExtensions allowUnlisted="true" />
      </requestFiltering>
    </security>
  </system.webServer> 
```

# c++ - 错误 LNK2019：无法解析的外部符号“__declspec(dllimport) private

> ID：14466347
> 
> 赞同：1
> 
> 时间：2013-01-22T19:21:35.077
> 
> 标签：c++

项目在VC6.0下运行正常，但是我在VS2012下更新后，出现如下链接错误：

```
revel.lib(BaseEncoder.obj) : error LNK2019: unresolved external symbol 
    "__declspec(dllimport) private: void __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::_Eos(unsigned int)" 
    (__imp_?_Eos@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAEXI@Z) referenced in function 
    "protected: virtual void __thiscall Revel_BaseEncoder::Reset(void)" (?Reset@Revel_BaseEncoder@@MAEXXZ) 
```

谁能帮我解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T19:28:18.090

很可能是因为您使用的库依赖于旧版本的 stl，而不是您当前拥有的。您可以将编译器设置为使用项目属性中的旧工具链，这样您仍然可以使用 VS 2012 并在您仍然安装旧的 Visual Studio 的情况下对其进行编译。

编辑：要更改平台工具集，请转到 Project Properties->General，那里应该有一个名为 Platform Toolset 的选项，其中有一个下拉菜单，您可以根据在线 msdn 文档选择旧版本的工具链（[链接在这里](http://msdn.microsoft.com/en-us/library/vstudio/ff770576.aspx)）

我不确定 VS 6.0 是否会出现在所述下拉列表中，但如果没有，您可以[在此处找到自己更改的方法](http://social.msdn.microsoft.com/Forums/en-US/vcprerelease/thread/226f7b5a-f777-43c1-b73b-e9c017471cab)

# sql - 什么更好用：跟踪数据库中的数量或计数

> ID：14466352
> 
> 赞同：0
> 
> 时间：2013-01-22T19:21:42.217
> 
> 标签：sql, count

我正在用 php 创建一个论坛（为了好玩），我也想显示每个论坛的帖子和主题的数量。是否最好在数据库中的我的论坛中添加一列以显示主题/主题的数量，并且每当有人创建/删除主题时，它都会得到更新，或者每次加载论坛页面时计算主题/主题的数量？在这种情况下，常见的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:30:26.900

计数记录是做到这一点的唯一可靠方法；如果您存储计数，那么您将需要解决并发问题；给数据库一个机会，只有当它成为一个真正的问题时才修复它。我的经验是 COUNT(*) 可以非常快。

我有一个包含 120 万条记录的表（并且它具有正确的索引）；刚刚尝试`select count(*) from table_name where field=11;`需要 0.02 秒并返回 104，计算 500k 条记录需要 0.15 秒。这是在相当低规格的 VPS 上使用 mysql。

关键是进行一些性能测试，并且仅在出现真正的性能问题时才优化最简单最可靠的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:28:40.233

数据库规范化规则说，您的数据库中不应该有任何可以基于数据库中的其他值以编程方式构造的值。因此，如果您只关注“适当的工程”，则应在每次需要显示主题时计算主题。

在正常情况下，保持一个计数器值不会提高太多性能。应该可以编写查询，以便在需要显示这些值时重新计算这些值的性能影响可以忽略不计，如果有的话。正如其他帖子中所指出的`COUNT`，即使指定了条件，也可以非常快。请记住在必要时使用索引。

最后，你必须做出决定。根据所需的使用情况，使您的数据库标准化可能会阻碍性能足以保证付出代价，使您的应用程序的性能稍微降低一点，并在某处添加一个计数器。但是，非规范化数据库应该始终是最后的手段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:26:57.860

我不认为这两个步骤是可选的。

```
If you dont update the count whenever someone creates/deletes a thread,
which count will you display on your forum? 
```

每当有任何更新，即创建/删除时，您必须增加/减少计数器。然后在显示时您始终可以显示计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:36:15.890

我建议在添加或删除新帖子时更新计数。此更新应该是准确的，因此需要进行一些锁定。锁定会在父记录上产生一些争用（更新论坛的线程、更新线程的帖子等）。确保您定义了索引，以便快速更新。

用户浏览论坛时，根本不锁定记录。我不会关心脏读，因为 100% 准确并不像会计软件那样重要。论坛是一个活生生的实体，所以如果在页面加载之间看起来略有不同也没关系。

此外，您可能希望偶尔运行一些查询以验证计数是否正确。

# delphi - 如何将 IStream 转换为 TStreamAdapter？

> ID：14466353
> 
> 赞同：1
> 
> 时间：2013-01-22T19:21:45.157
> 
> 标签：delphi, com, interface, delphi-7, istream

如何在 Delphi 7 上将 IStream 转换为 TStreamAdapter？

在 Delphi XE2 上，我可以写：

```
var
  aStream: IStream;
  aStreamAdapter: TStreamAdapter;
begin
  ...
  aStreamAdapter := aStream as TStreamAdapter;
  ...
end; 
```

但德尔福 7 写道：

```
Error: Operator not applicable to this operand type 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:27:06.293

该代码之所以有效，是因为 D2010 中引入了一项新功能，即恢复对实现接口的对象的引用的能力。请注意，如果`IStream`不是由您的 Delphi 代码实现，那么转换将失败。

如果您需要在旧版本的 Delphi 中引用实现对象，那么您将需要使用各种 hack 之一来恢复它。例如：

*   [Hallvard Vassbotn 的经典方法](http://hallvards.blogspot.com/2004/07/hack-7-interface-to-object-in-delphi.html)。
*   [Barry Kelly 最近的变种](http://blog.barrkel.com/2011/03/ugly-alternative-to-interface-to-object.html?m=1)。

但是，您不需要回到实现对象。您确实想要这样做的事实非常强烈地表明您的设计是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:56:57.270

AxCtrls 单元有一个[TOleStream](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.AxCtrls.TOleStream)对象来做这件事。

```
var
  aStream: IStream;
  bStream: TStream;
begin
  bStream := TOleStream.Create(aStream);
  try
    //
  finally
    bStream.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-28T08:28:40.053

您需要使用`Create`类似的方法

```
var StreamAdapter:TStreamAdapter;
begin
  StreamAdapter := TStreamAdapter.Create(aStream);
... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T11:47:12.367

示例代码：

```
var
  aFileStream: TFileStream;
  iStr: TStreamAdapter;
  iRes , iRes1, iRes2: Largeint;
  aStreamStat: TStatStg;
  aStreamContent: IStream;
begin
  aFileStream := TFileStream.Create('<...>', fmCreate);
  try
    aStreamContent := <...> as IStream;
    aStreamContent.Seek(0, 0, iRes);
    iStr := TStreamAdapter.Create(aFileStream, soReference);
    aStreamContent.Stat(aStreamStat, 1);
    aStreamContent.CopyTo(iStr, aStreamStat.cbSize , iRes1, iRes2);
  finally
    aFileStream.Free;
  end;
end; 
```

# perl - Perl POE - 如何正确生成计时器

> ID：14466354
> 
> 赞同：2
> 
> 时间：2013-01-22T19:21:50.467
> 
> 标签：perl, timer, poe

我正在尝试在 perl 中与 POE 相处。非常缓慢地我开始掌握它的概念，但我远未真正理解它：

```
#!perl

use warnings;
use strict;

use IO::Socket;
use POE qw(Wheel::SocketFactory Wheel::ReadWrite);

my $SERVER_ADDR = '192.168.178.6';
my $SERVER_PORT = '50099';

POE::Session->create(
    inline_states => {
        _start => sub {
            # Start the server.
            $_[HEAP]{server} = POE::Wheel::SocketFactory->new(
                RemoteAddress  => $SERVER_ADDR,
                RemotePort     => $SERVER_PORT,
                SocketProtocol => 'udp',
                SuccessEvent   => "on_connect",
                FailureEvent   => "on_server_error",
            );
        },
        on_connect => sub {
            # Begin interacting with the server.
            my $client_socket = $_[ARG0];
            my $io_wheel      = POE::Wheel::ReadWrite->new(
                Handle     => $client_socket,
                InputEvent => "on_recieve_data",
                ErrorEvent => "on_connect_error",
            );
            $_[HEAP]{client}{ $io_wheel->ID() } = $io_wheel;

            $io_wheel->put( "login monitor monitor", "log on", );
        },

        on_server_error => sub {
            # Shut down server.
            my ( $operation, $errnum, $errstr ) = @_[ ARG0, ARG1, ARG2 ];
            warn "Server $operation error $errnum: $errstr\n";
            delete $_[HEAP]{server};
        },
        on_recieve_data => sub {
            # Handle client input.
            my ( $kernel, $input, $wheel_id ) = @_[ KERNEL, ARG0, ARG1 ];
            print "Received: $input\n";

            $kernel->yield('keepalive');
        },
        on_connect_error => sub {
            # Handle client error, including disconnect.
            my $wheel_id = $_[ARG3];
            delete $_[HEAP]{client}{$wheel_id};
        },
        keepalive => sub {
            my ( $kernel, $input, $wheel_id, $io_wheel ) = @_[ KERNEL, ARG0, ARG1, ARG2 ];
            $kernel->delay_add( keepalive => 10 );
            $io_wheel->put( "keepalive" );
        },
    }
);

POE::Kernel->run();
exit; 
```

使用此代码，我连接到 UDP 服务器应用程序并读取其状态消息。到目前为止，它的工作原理是

```
 keepalive => sub { ... 
```

我正在尝试添加一个计时器，该计时器每 10 秒发送一次 keepalive 包。

如何正确设置这样的计时器以及调用它的最佳位置是什么？我想我弄乱了对 ReadWrite 轮的反向引用，但是轮/事件等之间的这种联系仍然是我正在努力解决的问题。非常感谢您对此的任何帮助和见解。

# database-design - 具有 Doctrine 支持的 ERD 建模工具

> ID：14466360
> 
> 赞同：0
> 
> 时间：2013-01-22T19:22:12.080
> 
> 标签：database-design, symfony, doctrine-orm, erd

我正在寻找可用于 ER 建模的免费或付费软件应用程序。

由于我主要使用 Symfony2/Doctrine 开发应用程序，有人知道支持 Doctrine 的软件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T15:56:47.363

看看[ORM 设计器](http://www.orm-designer.com/)。

我总是使用[MySQL Workbench](http://www.mysql.com/downloads/workbench/)，然后[将](http://symfony.com/doc/2.0/cookbook/doctrine/reverse_engineering.html)我的数据库模式导入到学说实体中。这让我可以更好地微调我的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:48:49.157

我认为您正在搜索以下比较： [http ://www.orm-designer.com/article/orm-designer-and-mysql-workbench-comparison](http://www.orm-designer.com/article/orm-designer-and-mysql-workbench-comparison)

结论：[ORM Designer](http://www.orm-designer.com/)和 MySQL 工作台都可以使用 Doctrine。

由于 MySQL 工作台是免费的并且在 MySQL 本身的支持下，这对我应该是有利的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T03:01:23.050

This may not interest you directly, and is probably not really fitting your current development cycle either, but I think it's a good approach to avoid code generation wherever possible.

I'm currently developing the modules integration of Doctrine ORM with ZF2, and we got to build a tool that creates on-the-fly graphs of your entities relations:

![UML Diagram generated from Doctrine 2 Entity metadata](../Images/2bea3349ee56332b0c6e48b908408446.png)

(please don't take the graph as a good example)

With this approach, you write entities first, then mappings (annotations/xml/yaml/php) and there you got your schema (displayed by your application). I'm considering pushing this to doctrine/common directly, so it may be available in the DoctrineBundle soon.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-28T15:11:34.757

有一个名为 Pulpo 的免费工具[http://www.pulpo18.com/](http://www.pulpo18.com/)另外，有编辑支持的付费船长[https://www.skipper18.com/](https://www.skipper18.com/)

# java - 如何从 Eclipse 程序构建 Mac OS X .app

> ID：14466363
> 
> 赞同：6
> 
> 时间：2013-01-22T19:22:24.243
> 
> 标签：java, eclipse, macos, slick2d

我的程序在 Eclipse 中运行良好。但是，如果我尝试将其导出为可运行的 jar，则双击它时 jar 不会打开。有没有办法在 Eclipse 中直接导出到 .app？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T19:29:10.563

gradle [-macappbundle 插件](https://github.com/crotwell/gradle-macappbundle)是我知道的最简单的方法。它连接到您的构建系统并`.app`为您生成。

* * *

如果您想推出自己的解决方案，Apple 的[OS X Java 部署选项会为](https://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/03-JavaDeployment/JavaDeployment.html)您提供有关执行此操作所需了解的所有信息。基本上 a`.app`只是一个包含 JAR 的文件夹，其中一些 XML 文件给出了类路径等等。您可以阅读该指南以了解所有详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:25:23.957

不，应用程序包含许多其他内容。如果你想让 jar 运行，你必须设置一些东西来告诉它被 JRE 打开。不建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T20:42:08.247

导出时必须选择 Runnable Jar File，然后双击它就会运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T20:16:00.117

有（至少）两个独立的 Ant 任务可以获取一个 JAR 文件和相关资源并构建一个`.app`包。java.net中的[appbundler 任务](http://java.net/projects/appbundler)`.app`生成在 Oracle Java 7 JRE 上运行的包，而[jarbundler 任务](http://informagen.com/JarBundler/)生成在 Apple 提供的 Java 6 上运行的包。但是这两个任务都不会产生`.app`可以在 Java 6 和 7 上运行的程序，因为 Oracle (7) 和 Apple (6) Java 使用完全不同的 API 从`.app`. 如果您希望能够将 Java 应用程序发布到 Mac App Store，那么您必须使用 Java 7 并将 JRE 的副本嵌入到`.app`捆绑（appbundle 可以为您做的）。相反，如果您希望您的应用程序可以在 Mac OS X 10.6 或更早版本上运行，那么您需要使用 Java 6。

您对其他答案之一的评论表明您的应用需要本机库。您需要将此库`.app`与您的 JAR 一起放入包中。`.jnilib`需要进入Java `Contents/Resources/Java`6 包（与 JAR 文件相同的位置），对于 Java 7 包，您在文件集中指定库，`<librarypath>`它将由 appbundler ( `Contents/MacOS`) 复制到正确的位置。

# ssh - Amazon AWS EC2 实例 - 无法通过 SSH 连接

> ID：14466368
> 
> 赞同：8
> 
> 时间：2013-01-22T19:22:40.660
> 
> 标签：ssh, amazon-ec2, debian

这不应该这么难。我无法通过 SSH 客户端连接到新的 AWS EC2 实例。我从 Win 7 盒子连接。

实例操作系统：Debian 6

AMI：`debian-squeeze-i386-20121119-e4554303-3a9d-412e-9604-eae67dde7b76-ami-1977f070.1(ami-a121a6c8)`

用户：试过`root`也`ec2-user`

使用 AWS 生成并下载的 .pem 密钥对

实例上确认的安全组和密钥对名称

SSH 端口 22 已打开：Nmap 这么说，Telnet 收到欢迎回复

使用 3 个不同的客户端：所有客户端连接正常

腻子 回复:`Server refused our key`

MindTerm Java 浏览器插件回复：`Authentication failed, permission denied`

Bitvise SSH 回复：`Attempting 'publickey' auth; auth failed;`

重启实例，清洗，冲洗，重复......

重建新实例和新密钥对，清洗，冲洗，重复......

连接不是问题。为什么实例不接受 .pem 文件作为密码？我还缺少其他步骤吗？我遵循了每一个我可以谷歌的指南。AWS 支持是个笑话。堆栈溢出来救援...

TIA。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T20:01:20.377

根据您正在使用的 AMI 文档的[debian wiki](http://wiki.debian.org/Cloud/AmazonEC2Image/Squeeze)，您需要用于登录的用户名是“admin”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:28:18.623

我在通过 ssh 连接到 EC2 时遇到了很多问题。

```
ssh -i the-keypair-filename root@yourdomain.com 
```

- 密钥对文件必须在同一目录中。- 我只是使用终端连接。

确保在启动实例时生成或分配密钥对。

您还可以验证您在 AWS 管理控制台中设置的密钥对，这是通过选择正在运行的实例然后查找“密钥对名称：”来完成的。

我希望这是有帮助的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T10:17:15.547

我的问题是我没有在 fstab 文件中添加预期的卷，因此服务器没有完全启动并且 sshd 守护程序没有运行。

检查：

```
 telnet HOST 22 
```

在您像我一样浪费大量时间之前，请检查服务器日志以确保它正常启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T09:34:05.063

尝试使用“admin”用户名并忽略亚马逊建议的用户名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-08T15:36:04.437

我有类似的问题，我已经通过以下方法解决了这个问题。

1）编辑我的厨师文件夹中的knife.rb文件，即：\Users\Administrator\chef-starter\chef-repo.chef\knife.rb，如下所示：

```
knife[:aws_access_key_id]     = "xxxxxxxxxxxxxxxxxxxx"
knife[:aws_secret_access_key] = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
knife[:region]                = 'ap-southeast-1'
knife[:aws_ssh_key_id] = "ChefUser"
knife[:ssh_user]="ec2-user" 
```

在命令提示符下，发出创建 ec2-server 的命令：

```
knife ec2 server create -r "role[webserver]" --image ami-abcd1234 --flavor t1.micro -G  ChefClient -x root -N server01 -i H:\Chef-files\ChefUser.pem 
```

请注意，即使我已经在 knife.rb 文件中提供了所有详细信息，我也必须通过 -i 选项在 coomand 行中提供 .pem 文件路径。这解决了我的问题。

检查一下，我的解决方案是否对您有帮助。

干杯，

钱丹

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T04:35:25.417

此页面底部列出了使用 ec2-user 密码的 Amazon Linux AMI。

[http://aws.amazon.com/amazon-linux-ami/](http://aws.amazon.com/amazon-linux-ami/)

如果尝试使用 ec2-user，请检查您是否使用其中之一，或检查您正在使用的 AMI 的文档。

泰瑞

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-03-24T19:44:56.787

以“ubuntu”身份登录对我有用：

**ssh -i private_key.pem ubuntu@myubuntuserver**

希望这可以帮助

——艾琳

# android - Android 2.3.X css font-family fallback 不起作用

> ID：14466370
> 
> 赞同：1
> 
> 时间：2013-01-22T19:22:50.517
> 
> 标签：android, css, font-face

我目前有一个带有 webview 的应用程序。webview 加载确定每个设备应使用的特定字体的 css。

对于我的 iOS 设备，我使用 HelveticaNeue CondensedBold，因为它包含在 iOS5+ 中。由于我不能将它用于早期的 iO​​S 和 Android，因为它不是系统字体，我使用的是 Google 的 OpenSans-CondensedBold。

我遇到的问题是在使用 2.3.X 的 Android 设备上。字体系列后备根本不起作用。由于 HelveticaNeue 字体不存在，它只会失败并且不会回退到紧随其后的 OpenSans。

```
font-family: 'OpenSans-CondensedBold', 'Helvetica', 'Arial'; 
```

如果我在上面的示例中从 css 中删除 HelveticaNeue-CondensedBold，OpanSans 字体可以在 Android 上完美运行。

当前的 CSS 下面。

```
@font-face {
    font-family: 'OpenSans-CondensedBold';
    src: url('/webfonts/opensans-condbold.eot');
    src: url('/webfonts/opensans-condbold.eot?#iefix') format('embedded-opentype'),
         url('/webfonts/opensans-condbold.woff') format('woff'),
         url('/webfonts/opensans-condbold.ttf') format('truetype'),
         url('/webfonts/opensans-condbold.svg#OpenSans-CondensedBold') format('svg');
    font-weight: normal;
    font-style: normal;
}

body {
    font-size: 13px;
    font-family: 'HelveticaNeue-CondensedBold', 'OpenSans-CondensedBold', 'Helvetica', 'Arial';
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T11:56:39.333

您可以尝试将字体文件编码为 base64 数据 uri .. sencha touch 2 也在执行此操作，并且似乎可以正常工作。

为此，请在此处上传您的字体文件[http://dopiaza.org/tools/datauri/index.php](http://dopiaza.org/tools/datauri/index.php) 然后像这样在您的 CSS 中使用生成的代码

```
@font-face {
    font-family: "My Font";
    src: url(data:application/x-font-woff;base64,[base-encoded font here]) format('woff'), 
         url(data:image/svg+xml;base64,[base-encoded font here]) format('svg'), 
         url(data:application/x-font-ttf;base64,[base-encoded font here]) format('truetype'); 
} 
```

如果您使用的是指南针，它似乎有[一种](http://compass-style.org/reference/compass/helpers/inline-data/)即时编码字体文件的方法

这个方法也有[一个相关](https://stackoverflow.com/questions/10617306/new-bulletproof-font-face-syntax-using-data-uris-in-compass)的问题

# ios - iOS - 生成和播放不确定的简单音频（正弦波）

> ID：14466371
> 
> 赞同：8
> 
> 时间：2013-01-22T19:22:53.210
> 
> 标签：ios, objective-c, core-audio

我正在寻找一个非常简单的 iOS 应用程序，它带有一个可以启动和停止音频信号的按钮。信号只是一个正弦波，它会在整个播​​放过程中检查我的模型（音量的实例变量）并相应地改变它的音量。

我的困难与任务的不确定性有关。我了解如何构建表格、用数据填充表格、响应按钮按下等等；但是，当涉及到无限期地继续进行某些事情时（在这种情况下，是声音），我有点卡住了！任何指针都会很棒！

谢谢阅读。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T11:18:10.997

这是一个简单的应用程序，它将按需播放生成的频率。你还没有指定是做 iOS 还是 OSX，所以我选择了 OSX，因为它稍微简单一些（不会弄乱音频会话类别）。如果您需要 iOS，您可以通过查看音频会话类别基础知识并将默认输出音频单元替换为 RemoteIO 音频单元来找出缺失的部分。

请注意，这样做的目的纯粹是为了演示一些 Core Audio / Audio Unit 基础知识。如果您想开始变得比这更复杂，您可能需要查看`AUGraph`API（也为了提供一个干净的示例，我没有进行任何错误检查。在处理 Core Audio 时**始终**进行错误检查） .

您需要将`AudioToolbox`和`AudioUnit`框架添加到您的项目中才能使用此代码。

```
#import <AudioToolbox/AudioToolbox.h>

@interface SWAppDelegate : NSObject <NSApplicationDelegate>
{
    AudioUnit outputUnit;
    double renderPhase;
}
@end

@implementation SWAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
//  First, we need to establish which Audio Unit we want.

//  We start with its description, which is:
    AudioComponentDescription outputUnitDescription = {
        .componentType         = kAudioUnitType_Output,
        .componentSubType      = kAudioUnitSubType_DefaultOutput,
        .componentManufacturer = kAudioUnitManufacturer_Apple
    };

//  Next, we get the first (and only) component corresponding to that description
    AudioComponent outputComponent = AudioComponentFindNext(NULL, &outputUnitDescription);

//  Now we can create an instance of that component, which will create an
//  instance of the Audio Unit we're looking for (the default output)
    AudioComponentInstanceNew(outputComponent, &outputUnit);
    AudioUnitInitialize(outputUnit);

//  Next we'll tell the output unit what format our generated audio will
//  be in. Generally speaking, you'll want to stick to sane formats, since
//  the output unit won't accept every single possible stream format.
//  Here, we're specifying floating point samples with a sample rate of
//  44100 Hz in mono (i.e. 1 channel)
    AudioStreamBasicDescription ASBD = {
        .mSampleRate       = 44100,
        .mFormatID         = kAudioFormatLinearPCM,
        .mFormatFlags      = kAudioFormatFlagsNativeFloatPacked,
        .mChannelsPerFrame = 1,
        .mFramesPerPacket  = 1,
        .mBitsPerChannel   = sizeof(Float32) * 8,
        .mBytesPerPacket   = sizeof(Float32),
        .mBytesPerFrame    = sizeof(Float32)
    };

    AudioUnitSetProperty(outputUnit,
                         kAudioUnitProperty_StreamFormat,
                         kAudioUnitScope_Input,
                         0,
                         &ASBD,
                         sizeof(ASBD));

//  Next step is to tell our output unit which function we'd like it
//  to call to get audio samples. We'll also pass in a context pointer,
//  which can be a pointer to anything you need to maintain state between
//  render callbacks. We only need to point to a double which represents
//  the current phase of the sine wave we're creating.
    AURenderCallbackStruct callbackInfo = {
        .inputProc       = SineWaveRenderCallback,
        .inputProcRefCon = &renderPhase
    };

    AudioUnitSetProperty(outputUnit,
                         kAudioUnitProperty_SetRenderCallback,
                         kAudioUnitScope_Global,
                         0,
                         &callbackInfo,
                         sizeof(callbackInfo));

//  Here we're telling the output unit to start requesting audio samples
//  from our render callback. This is the line of code that starts actually
//  sending audio to your speakers.
    AudioOutputUnitStart(outputUnit);
}

// This is our render callback. It will be called very frequently for short
// buffers of audio (512 samples per call on my machine).
OSStatus SineWaveRenderCallback(void * inRefCon,
                                AudioUnitRenderActionFlags * ioActionFlags,
                                const AudioTimeStamp * inTimeStamp,
                                UInt32 inBusNumber,
                                UInt32 inNumberFrames,
                                AudioBufferList * ioData)
{
    // inRefCon is the context pointer we passed in earlier when setting the render callback
    double currentPhase = *((double *)inRefCon);
    // ioData is where we're supposed to put the audio samples we've created
    Float32 * outputBuffer = (Float32 *)ioData->mBuffers[0].mData;
    const double frequency = 440.;
    const double phaseStep = (frequency / 44100.) * (M_PI * 2.);

    for(int i = 0; i < inNumberFrames; i++) {
        outputBuffer[i] = sin(currentPhase);
        currentPhase += phaseStep;
    }

    // If we were doing stereo (or more), this would copy our sine wave samples
    // to all of the remaining channels
    for(int i = 1; i < ioData->mNumberBuffers; i++) {
        memcpy(ioData->mBuffers[i].mData, outputBuffer, ioData->mBuffers[i].mDataByteSize);
    }

    // writing the current phase back to inRefCon so we can use it on the next call
    *((double *)inRefCon) = currentPhase;
    return noErr;
}

- (void)applicationWillTerminate:(NSNotification *)notification
{
    AudioOutputUnitStop(outputUnit);
    AudioUnitUninitialize(outputUnit);
    AudioComponentInstanceDispose(outputUnit);
}

@end 
```

您可以随意拨打电话`AudioOutputUnitStart()`开始`AudioOutputUnitStop()`/停止制作音频。如果你想动态改变频率，你可以传入一个指针，指向一个`struct`既包含renderPhase double 又包含另一个代表你想要的频率的指针。

在渲染回调中要小心。它是从实时线程调用的（不是来自与主运行循环相同的线程）。渲染回调受到一些相当严格的时间要求，这意味着在你的回调中有很多你不应该做的事情，例如：

*   分配内存
*   等待互斥锁
*   从磁盘上的文件读取
*   Objective-C 消息传递（是的，认真的。）

请注意，这不是执行此操作的唯一方法。自从您标记了此核心音频后，我才以这种方式进行了演示。如果您不需要更改频率，您可以使用`AVAudioPlayer`包含您的正弦波的预制声音文件。

还有[Novocaine](https://github.com/alexbw/novocaine)，它对你隐藏了很多这种冗长的内容。您还可以查看 Audio Queue API，它的工作方式与我编写的 Core Audio 示例非常相似，但将您与硬件分离了一点（即，它对您在渲染回调中的行为方式不那么严格）。

# c# - 使用 c# 在本地注销 Windows 用户

> ID：14466373
> 
> 赞同：6
> 
> 时间：2013-01-22T19:22:55.013
> 
> 标签：c#, .net, windows, windows-xp

我目前正在开发一些家长控制软件。该软件应该注销用户然后锁定帐户，以便他们无法重新登录，除非父母/管理员指定他们可以。

到目前为止，我已经尝试了几件事，例如在用户帐户上设置标志，说明它已被禁用。这会将其从登录屏幕中完全删除。据我所知，如果用户帐户已登录，则不会应用 ADS_Disable 标志。我还尝试寻找有关注销另一个帐户的资源，但我似乎只能找到有关注销正在运行 logout 命令的帐户的信息。比如[Pinvoke](http://www.pinvoke.net/default.aspx/user32/ExitWindowsEx.html)，或者直接调用[LOGOUT.EXE](https://stackoverflow.com/a/1336633/1162192)程序。

我在[LSAUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378292%28v=vs.85%29.aspx)上找到了一个资源，发现那里可能有什么东西。我正在为学校做这个项目，我需要一些指导。由于这样做的信息很少，有没有更好的方法来做我想做的事情？或者有什么理由我不应该这样做？有什么选择吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T20:40:35.020

使用`WTSDisconnectSession()`Windows API。请参阅[此处](http://blog.dotsmart.net/2008/01/17/shortcut-to-switch-user-in-windows-vista/)的文章。

```
using System;
using System.Runtime.InteropServices;
using System.ComponentModel;

class Program
{
  [DllImport("wtsapi32.dll", SetLastError = true)]
  static extern bool WTSDisconnectSession(IntPtr hServer, int sessionId, bool bWait);

  [DllImport("Kernel32.dll", SetLastError = true)]         
  static extern int WTSGetActiveConsoleSessionId();

  const int WTS_CURRENT_SESSION = -1;
  static readonly IntPtr WTS_CURRENT_SERVER_HANDLE = IntPtr.Zero;

  static void Main(string[] args)
  {
    if (!WTSDisconnectSession(WTS_CURRENT_SERVER_HANDLE,
         WTS_CURRENT_SESSION, false))
      throw new Win32Exception();
  }
} 
```

即使没有远程桌面，它也会断开当前用户并进入登录屏幕。这些进程仍将在后台运行。再次手动登录后，正在运行的程序将显示为断开之前的状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-19T08:01:01.630

```
 [DllImport("wtsapi32.dll", SetLastError = true)]
  static extern bool WTSDisconnectSession(IntPtr hServer, int sessionId, bool bWait); 
```

当您在远程桌面使用**WTSDisconnectSession**时，相当于“关闭”远程桌面窗口。这是断开您的 Windows 会话，但保持连接。

优点是您可以稍后通过再次远程登录重新连接会话。
缺点是当远程桌面连接已满时，其他用户可能无法登录 Windows。

要模拟 Windows 的“注销”，应使用user32.dll 下的**ExitWindowsEx**

```
[DllImport("user32.dll", SetLastError = true)]
static extern bool ExitWindowsEx(uint uFlags, uint dwReason);

public static bool WindowsLogOff() {
  return ExitWindowsEx(0, 0);
} 
```

如果要强制用户注销，则需要添加如下`EWX_FORCE`标志：

```
ExitWindowsEx(0 | 0x00000004, 0); 
```

有关此处功能的更多详细信息：[https ://msdn.microsoft.com/en-us/library/windows/desktop/aa376868(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa376868(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-28T17:34:06.980

捎带 Leng Weh Seng 的回答（因为我无法评论），如果你想强制用户注销，你需要像这样添加 EWX_FORCE 标志：

```
ExitWindowsEx(0 | 0x00000004, 0); 
```

有关此处功能的更多详细信息：[https ://msdn.microsoft.com/en-us/library/windows/desktop/aa376868(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa376868(v=vs.85).aspx)

# selenium-webdriver - 测试失败后的超时问题和过时的 webdriver 实例

> ID：14466379
> 
> 赞同：3
> 
> 时间：2013-01-22T19:23:08.443
> 
> 标签：selenium-webdriver, selenium-grid, selenium-chromedriver

我正在使用 Webdriver 测试一个 Web 应用程序，或多或少如下所述。当测试通过时，一切都很好。但是，当其中一项测试失败时，我注意到以下 2 个问题。

a）如果一个测试失败，那么套件中的其余测试将超时而不关闭 Webdriver 实例。因此，节点机器上会保留一些过时的 webdriver 实例。

b）当其中一个测试因超时问题而失败时，该类中的所有剩余测试（因为 testng 被配置为并行运行类）失败，并出现以下异常**org.openqa.selenium.remote.UnreachableBrowserException** **与远程浏览器通信时出错。它可能已经死了。**

我们如何解决这两个问题，这可能是网格的问题吗？任何建议都会很棒。以下是有关网格配置和环境详细信息的更多详细信息。

**浏览器和版本：-** Chrome 和版本是 23.0.1271.101

**硒版本：-** 2.28.0

**网格集线器和节点属性：-**

*集线器启动：-* java -jar /tools/grid/selenium-server-standalone-2.28.0.jar -role hub -maxSession 20 -browserTimeout 240 -remoteControlPollingIntervalInSeconds 180 -sessionMaxIdleTimeInSeconds 240 -newSessionMaxWaitTimeInSeconds 250 -timeout 30

*节点启动：-* java -jar /tools/grid/selenium-server-standalone-2.28.0.jar -role node -Dwebdriver.chrome.driver=/ChromeDriver/23.0.1240/chromedriver –hub [http://mobygrid.dev .ebay.com:4444/grid/register](http://mobygrid.dev.ebay.com:4444/grid/register)

**Testng.xml**与 5 个线程并行运行类：-

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<!--  <suite name="Single Group Suite"> -->
<suite name="Single Group Suite" parallel="classes" thread-count="5">
<test name="Single Group Test Run" preserve-order="false">
<groups>
    <define name="completetests">
              <include name="ViewItem"/>
              <include name="ViewItem2"/>
              <include name="ViewItem3"/>
            </define>
               <run>
<include name="@GROUP@" />
<include name="init" />
<exclude name="noRun" />
</run>
</groups>
<classes>
<class name="com.tabletweb.test.tests.ViewItemPageTests" /> 
                                        <class name="com.tabletweb.test.tests.ViewItemPageTests2" /> 
                                        <class name="com.tabletweb.test.tests.ViewItemPageTests3" /> 
</classes>
</test>
</suite> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:21:45.750

查看[使用 grid 运行的提示](http://code.google.com/p/selenium/wiki/Grid2#Tips_for_running_with_grid)：您的问题听起来像那里描述的问题。修改[超时配置](http://code.google.com/p/selenium/wiki/Grid2#Configuring_timeouts_%28Version_2.21_required%29)也可能有所帮助。

我们使用相同版本的 grid 和 ChromeDriver 并行运行测试，并且没有出现错误。

# html - 分层图像但带有链接

> ID：14466380
> 
> 赞同：0
> 
> 时间：2013-01-22T19:23:09.723
> 
> 标签：html, image

我正在尝试将 2 个图像叠加在一起，但顶部的第二个图像也是一个链接。

这是它的工作代码：

```
<div style="position: relative; left: 0; top: 0;">
  <img src="http://www.handicappedpets.com/images/newproducts/fabricharnessweb.jpg" style="position: relative; top: 0; left: 0;"/>
  <a href="http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fwww.handicappedpets.com%2Findex.php%2Fwalkin-wheels-rear-harness.html&media=http%3A%2F%2Fwww.handicappedpets.com%2Fimages%2Fnewproducts%2Ffabricharnessweb.jpg&description=The%20Walkin'%20Wheels%20Rear%20Harness%20is%20used%20to%20support%20your%20dogs%20hind%20quarters.%20Starting%20at%20%2439.99" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" style="position: absolute; top: 425px; left: 20px;" /></a>
</div> 
```

（或者你可以点击这里）[http://jsfiddle.net/danield770/nFvUu/3/](http://jsfiddle.net/danield770/nFvUu/3/)

但如果我把这段代码扔到一个真实的网站.. [http://www.handicappedpets.com/index.php?option=com_content&view=article&id=819](http://www.handicappedpets.com/index.php?option=com_content&view=article&id=819) 它把图像推到一边，而不是在彼此之上。

关于它为什么这样做的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:31:46.790

试试这个：

```
 <div style="position: relative; left: 0; top: 0; z-index:1;">
  <img style="position: relative; top: 0; left: 0; z-index:2;" title="wizard new var 2" alt="wizard new var 2" src="http://www.handicappedpets.com/images/newproducts/fabricharnessweb.jpg">
<div style="position: absolute; top: 425px; left: 20px;  z-index:3;">
  <a href="http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fwww.handicappedpets.com%2Findex.php%2Fwalkin-wheels-rear-harness.html&amp;media=http%3A%2F%2Fwww.handicappedpets.com%2Fimages%2Fnewproducts%2Ffabricharnessweb.jpg&amp;description=The%20Walkin%27%20Wheels%20Rear%20Harness%20is%20used%20to%20support%20your%20dogs%20hind%20quarters.%20Starting%20at%20%2439.99" data-pin-aha="button_pinit" data-pin-config="beside" class="PIN_1358884071645_pin_it_button PIN_1358884071645_pin_it_beside"><span class="PIN_1358884071645_pin_it_button_count" id="PIN_1358884071645_pin_count_1"><i></i>1</span></a>
</div>
</div> 
```

您很可能只需要 z 索引。似乎在这里工作正常：http: [//jsfiddle.net/nFvUu/4/](http://jsfiddle.net/nFvUu/4/)

**编辑**

Pinterest 正在覆盖第三个设置。使用上述方法，将 pinterest 包装在一个额外的 div 中并将其放置在您需要的地方。在您的网站上使用萤火虫。

# signalr - SignalR 服务总线主题名称冲突

> ID：14466381
> 
> 赞同：2
> 
> 时间：2013-01-22T19:23:10.080
> 
> 标签：signalr, servicebus, azureservicebus

我正在使用 SignalR 服务总线包让 SignalR 在部署中跨多个 Azure Web 角色实例协调活动。

我曾经能够选择要使用的服务总线主题名称。将 SignalR 和服务总线包更新到 rc1 后，该选项不再可用。相反，SignalR 使用 Web 角色的名称作为其主题名称。

问题在于，当多个 Azure 部署同时运行（即生产和暂存）时，它们会争夺以 Web 角色自动命名的单个服务总线主题。我最终会收到大量重复的消息。我希望每个部署都有自己的服务总线主题。

如何使用单个服务总线命名空间来管理同一项目的多个部署中的 SignalR 连接？或者甚至两个不同项目的两个部署恰好具有相同名称的 Web 角色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:14:41.637

您能否为此在[https://github.com/signalr/signalr/issues](https://github.com/signalr/signalr/issues)上记录一个错误，我们将在即将发布的版本中查看它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T22:02:21.557

我解决了我的问题。而不是使用

```
GlobalHost.DependencyResolver.UseWindowsAzureServiceBus() 
```

我现在正在使用

```
GlobalHost.DependencyResolver.UseServiceBus() 
```

我可以传递一个主题前缀。

当我同时运行生产和暂存部署时，UseWindowsAzureServiceBus 仍然会导致问题，但我将此问题标记为已解决。

# css - ApplicationLayout中的浮动工具栏？

> ID：14466384
> 
> 赞同：2
> 
> 时间：2013-01-22T19:23:22.243
> 
> 标签：css, xpages, xpages-extlib

请参阅[此问题](https://stackoverflow.com/questions/10853111/floating-toolbar-actionbar-buttonbar-in-xpages)以了解我正在尝试做什么。唯一的例外是我正在使用 ApplicationLayout，并且我想要 PlaceBar 下方的工具栏。有没有办法欺骗 CSS 在 PlaceBar 下方显示工具栏，然后在滚动时将其保持在页面顶部？或者，如何修复 ApplicationLayout 的顶部（即 PlaceBar、TitleBar 等），使它们也不会滚动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T06:19:12.983

***更新：**扩展了这个想法以制作 XSnippet。[从这里下载](http://openntf.org/XSnippets.nsf/snippet.xsp?id=make-floating-banner-title-bar-and-place-bar-in-application-layout-control-of-extension-library)。*

要修复应用程序布局的顶部部分，如位置栏、标题栏，您必须查看应用程序布局控件生成的 HTML 页面的 CSS（Google Chrome 有一个很棒的[Inspect Element](https://developers.google.com/chrome-developer-tools/docs/elements)功能）。它使用、等类`lotusTitleBar`，您可以在自定义 CSS 中使用这些类来创建浮动工具栏。`lotusPlaceBar``lotusContent`

因此，假设这是否是您的 XPage，具有来自扩展库的应用程序布局控制。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:this.resources>
        <xp:styleSheet href="/cssAppLayoutFloatingMenu.css"></xp:styleSheet>
    </xp:this.resources>
    <xe:applicationLayout id="applicationLayout1">
        <xp:panel>
            Sample Text. 1
            <xp:br></xp:br>
            Sample Text. 2
            <xp:br></xp:br>
            Sample Text. 3
            <xp:br></xp:br>
            Sample Text. 4
        </xp:panel>
        <xe:this.configuration>
            <xe:oneuiApplication titleBarName="Sample Title" placeBarName="Sample Place">
                <xe:this.footerLinks>
                    <xe:basicContainerNode label="Container 1">
                        <xe:this.children>
                            <xe:basicLeafNode label="Link 1" href="/"></xe:basicLeafNode>
                            <xe:basicLeafNode label="Link 2" href="/"></xe:basicLeafNode>
                        </xe:this.children>
                    </xe:basicContainerNode>
                    <xe:basicContainerNode label="Container 2">
                        <xe:this.children>
                            <xe:basicLeafNode label="Link 1" href="/"></xe:basicLeafNode>
                            <xe:basicLeafNode label="Link 2" href="/"></xe:basicLeafNode>
                        </xe:this.children>
                    </xe:basicContainerNode>
                </xe:this.footerLinks>
                <xe:this.placeBarActions>
                    <xe:pageTreeNode label="Page 1"></xe:pageTreeNode>
                    <xe:pageTreeNode label="Page 2"></xe:pageTreeNode>
                </xe:this.placeBarActions>
            </xe:oneuiApplication>
        </xe:this.configuration>
    </xe:applicationLayout>
</xp:view> 
```

您可以使用此 CSS 使标题栏和位置栏浮动

```
.lotusTitleBar {
    /*Class for Title bar*/
    position: fixed;
    width: 100%;
    height: 45px;
    z-index: 100;
}
.lotusPlaceBar {
    /*Class for Place bar*/
    position: fixed;
    width: 100%;
    z-index: 100;
    top: 45px; /*Start after height of lotusTitleBar*/
    height: 35px;
}
.lotusContent {
    /*Class for Content*/
    position: relative;
    top: 80px; /*Height of lotusTitleBar + Height of lotusPlaceBar*/
} 
```

**注意：**这是一个非常基本的示例，只有标题栏和位置栏。如果您在应用程序布局中包含横幅或其他元素，则必须相应地进行修改。

# vim - 使 Vim 映射安静

> ID：14466395
> 
> 赞同：2
> 
> 时间：2013-01-22T19:24:02.713
> 
> 标签：vim

我有一个映射，用于在一行上打印突出显示。我从这里的其他海报中得到了这个想法，所以谢谢你。这就是我所做的：

```
function! PrintSyntaxItem()
    let l:colorsyntax = synIDattr(synID(line("."), col("."), 0), "name")
    execute "highlight" l:colorsyntax
endfunction 
```

我像这样映射它：

```
nnoremap <A-s> :call PrintSyntaxItem()<CR> 
```

但是，当我执行它时，我会回显命令行以及我想要的输出，这会导致出现“Press ENTER”提示。即在我看到的输出中：

```
:execute "highlight" synIDattr(synID(line("."), col("."), 0), "name")
vimBracket     xxx links to Delimiter
Press ENTER or type command to continue 
```

我想丢失这`:execute`条线，然后 Press ENTER 线也会消失。有没有办法做到这一点？如果我放在`silent`前面，`execute`我仍然可以打印出该行但丢失了`highlight`输出（以及 Press ENTER 提示），但是为了取回我想要的输出，我只需在它前面加上前缀，`unsilent`我得到它但是......

基本上我想要么抑制`:execute`线路的回声，要么在事后清除它，但我不知道该怎么做，并且拖网文档以获取有关处理消息的信息并没有取得任何成果。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T19:40:01.757

这不是您应该沉默的命令，而是正如您在问题标题中所写的那样，映射本身：

```
nnoremap <silent> <A-s> :call PrintSyntaxItem()<CR> 
```

也就是说，执行命令看起来不容易被静音。我会调查的。

***编辑***

我已经尝试了所有我能找到的技巧，包括`:redir =>`十几种组合，`[<]silent[>]`但我无法获得想要的结果。要么我得到提示，要么我什么都没有。我非常抱歉！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T21:23:10.370

出现按回车提示，因为 的输出`highlight`占用了多行。`\n`您可以通过重定向输出，删除，然后回显它来摆脱额外的行：

```
function! PrintSyntaxItem()
    let l:output = ''
    redir => l:output
    silent exec "hi" synIDattr(synID(line("."), col("."), 0), "name")
    redir END
    echo substitute(l:output, '\n', '', '')
endfunction 
```

但是，该`xxx`示例不再正确突出显示。相反，您可以通过临时更改来破解按回车提示`cmdheight`：

```
nnoremap <silent> <A-s> :set ch=2 \| exec "hi"
    \ synIDattr(synID(line("."), col("."), 0), "name") \| set ch=1<CR> 
```

这可以通过最初将命令行高度更改为 2，然后将其恢复为 1 以切断空行来防止首先打印提示。我完全取消了该功能，但`set ch`如果您愿意，当然可以在两者之间调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T04:25:39.810

与其捏造命令行高度，不如突出显示整行而不只是 xxx 部分？

```
function! ShowSyntaxItem()
    redir => l:output
    silent exec "hi" synIDattr(synID(line("."), col("."), 0), "name")
    redir END
    let l:parts = matchlist(output, '\v\n@<=(\S+)(.*$)')
    if (len(l:parts) >= 3)
      redraw | exec "echohl ".l:parts[1] | exec "echo '".l:parts[0]."'" | echohl None
    endif
endfunction

nnoremap <silent> <Leader>as :call PrintSyntaxItem()<CR> 
```

请注意，如果它在 redir 之前存在，则无需声明`l:output`或重新初始化它，如`:he redir`. 这很方便，将进入 ye olde vimrc。

# 960.gs - Grid 960 - 列太大，导致换行

> ID：14466397
> 
> 赞同：0
> 
> 时间：2013-01-22T19:24:08.223
> 
> 标签：960.gs

我可能会因此打破“规则”，但对于我的 960 网格系统，我有几列添加了右边框样式。这会使该列 1px 太大。因此，如果我有一组完整的列，最右边的列会溢出到下一行。这显然是不可取的。

我通过手动将列的宽度减小与边框相同的厚度来“修复”这个问题 - 1px。这非常有效。

问题是我刚刚向一位同事做了我的网站演示，当他们打开网站时，仍然存在溢出问题。在我的计算机上看起来不错的列 - Mac（在 Chrome、Firefox 和 Safari 中）在其 Firefox 浏览器（运行 Windows 7）上存在溢出问题。我尝试远程进入他们办公室的 Windows 盒子并在 Firefox 中查看该站点，它工作正常。

我的问题是：我如何确保在我的计算机上看起来正确的东西在其他人的计算机上看起来正确？同一个站点怎么可能在两台运行 Windows 7 的不同机器上的同一个浏览器中查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T01:23:38.767

To keep the container that has the border from overflowing, wrap it in another container.

For example:

```
<div class="grid_4">
    <div class="div_with_border">This is the container with the border</div>
</div> 
```

# android - 重复从可绘制地图中获取的 6 个位图会导致内存不足错误

> ID：14466402
> 
> 赞同：0
> 
> 时间：2013-01-22T19:24:22.180
> 
> 标签：android, bitmap

我已经尝试在此站点和其他一些站点中找到解决我的问题的方法，但没有运气。我在我的应用程序上设置了地图（谷歌地图 V2）。这张地图充满了标记（大约 450 个），每个标记都有一个来自可绘制文件的图标集。可绘制文件总共有 6 个，因此大约有 450 个标记重复 6 个可绘制文件（每个不同的图标指的是地图上的一个位置）。当我第一次启动地图时，没有任何问题，一切正常。但是，如果我返回上一个屏幕并再次启动地图，应用程序会因内存不足错误而崩溃。我认为问题是由于系统将所有位图保存在内存中，资源浪费令人难以置信，因为可绘制对象只有六个。

[我尝试按照此处](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)的建议将位图引用到应用程序上下文，但没有好的结果。有没有简单的方法来解决这个问题？

第 324 行：

```
if (IDTipologia.get(i).equals("1")) {
            setLoghino(R.drawable.chieseluoghidiculto);
            //iconcina = BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE);
            Bitmap icon = BitmapFactory.decodeResource(getApplicationContext().getResources(),
                    R.drawable.markerchiese);
            iconcina = BitmapDescriptorFactory.fromBitmap(icon);
} 
```

以此类推，直到第 6 个可绘制对象。

日志猫：

```
E/AndroidRuntime(10990): FATAL EXCEPTION: main
E/AndroidRuntime(10990): java.lang.OutOfMemoryError
E/AndroidRuntime(10990):    at android.graphics.Bitmap.nativeCreateFromParcel(Native   Method)
E/AndroidRuntime(10990):    at android.graphics.Bitmap.access$000(Bitmap.java:28)
E/AndroidRuntime(10990):    at android.graphics.Bitmap$1.createFromParcel(Bitmap.java:1052)
E/AndroidRuntime(10990):    at android.graphics.Bitmap$1.createFromParcel(Bitmap.java:1044)
E/AndroidRuntime(10990):    at com.google.android.gms.maps.model.internal.IBitmapDescriptorFactoryDelegate$Stub.onTransact(IBitmapDescriptorFactoryDelegate.java:101)
E/AndroidRuntime(10990):    at android.os.Binder.transact(Binder.java:297)
E/AndroidRuntime(10990):    at com.google.android.gms.internal.h$a$a.a(Unknown Source)
E/AndroidRuntime(10990):    at com.google.android.gms.maps.model.BitmapDescriptorFactory.fromBitmap(Unknown Source)
E/AndroidRuntime(10990):    at it.eventitrapani.appaeventitp.ElencoMappaTutteCoseDaVedere.addMarkersToMap(ElencoMappaTutteCoseDaVedere.java:324)
E/AndroidRuntime(10990):    at it.eventitrapani.appaeventitp.ElencoMappaTutteCoseDaVedere.setUpMap(ElencoMappaTutteCoseDaVedere.java:269)
E/AndroidRuntime(10990):    at it.eventitrapani.appaeventitp.ElencoMappaTutteCoseDaVedere.setUpMapIfNeeded(ElencoMappaTutteCoseDaVedere.java:257)
E/AndroidRuntime(10990):    at it.eventitrapani.appaeventitp.ElencoMappaTutteCoseDaVedere.onCreate(ElencoMappaTutteCoseDaVedere.java:208)
E/AndroidRuntime(10990):    at android.app.Activity.performCreate(Activity.java:4470)
E/AndroidRuntime(10990):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
E/AndroidRuntime(10990):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
E/AndroidRuntime(10990):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
E/AndroidRuntime(10990):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
E/AndroidRuntime(10990):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
E/AndroidRuntime(10990):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(10990):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(10990):    at android.app.ActivityThread.main(ActivityThread.java:4511)
E/AndroidRuntime(10990):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(10990):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(10990):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
E/AndroidRuntime(10990):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
E/AndroidRuntime(10990):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:02:57.587

首先，为什么要从这样的资源中加载位图？您可以`Drawable`直接从您的资源中获取`getResources().getDrawable(R.drawable.blah)`。如果您像这样检索 Drawable，它们都将共享底层位图，因此只有 N（其中 N 是您拥有的标记图标的数量）位图加载到内存中。

现在，如果您正在对可绘制对象应用一些转换，您可能需要首先调用`mutate()`它以获取具有单独状态的新可绘制对象（否则，如果您使一个透明对象全部变为透明）。

**更新：** 解决方案是使用直接使用资源 ID 而不是位图的标记图标初始化：

```
markerOptions.icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow))); 
```

# c - strcpy 一个更大的字符串到一个更小的字符数组

> ID：14466406
> 
> 赞同：5
> 
> 时间：2013-01-22T19:24:50.400
> 
> 标签：c

为什么当我这样做时：

```
char teststrcpy[5];

strcpy(teststrcpy,"thisisahugestring"); 
```

我在运行时收到此消息：

```
Abort trap: 6 
```

它不应该只是覆盖**teststrcpy**内存右侧的内容吗？如果不是，Abort 陷阱是什么意思？

我在 MAC OSX 下使用 GCC 编译器

*作为注释，并在回答一些评论时，我这样做是为了玩 C，我不会尝试在生产中这样做。别担心，伙计们！:)*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:28:29.067

在 C 语言中，没有人会告诉您“缓冲区太小”，如果您坚持将太多字符复制到太小的缓冲区，您将陷​​入未定义的行为恐惧

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:26:27.353

> 它不应该只是覆盖内存右侧的内容`teststrcpy`吗？

不一定，在分配的内存之外写入是未定义的行为。在您的情况下，某些东西检测到越界写入并中止了程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T19:32:09.410

I don't own one, but I've read that Mac OS treats overflow differently, it won't allow you to overwrite memory incertian instances. `strcpy()` being one of them

On Linux machine, this code successfully overwrite next stack, but prevented on mac os (Abort trap) due to a [stack canary](http://en.wikipedia.org/wiki/Buffer_overflow_protection#Canaries).

You might be able to get around that with the gcc option `-fno-stack-protector`

* * *

Ok, since you're seeing an abort from `__strcpy_chk` that would mean it's specifically checking strcpy (and probably friends). So in theory you could do the following*:

```
char teststrcpy[5];
gets(teststrcpy); 
```

Then enter your really long string and it should behave baddly as you wish.

[*I am only advising `gets` in this specific instance in an attempt to get around the OS's protection mechanisms that are in place. Under NO other instances would I suggest anyone use the code. `gets` is not safe.]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:54:15.833

您的编译器很可能正在使用金丝雀来进行缓冲区溢出保护，因此，当发生溢出时会引发此异常，从而阻止您在缓冲区之外进行写入。

请参阅[http://en.wikipedia.org/wiki/Buffer_overflow_protection#Canaries](http://en.wikipedia.org/wiki/Buffer_overflow_protection#Canaries)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T19:30:32.640

如果您想覆盖 teststrcpy 的第 5 个字符之后的内容，那么您就是一个可怕的人。您可以将大小为 4 的字符串复制到您的 teststrcpy（第 5 个字符应保留为 NULL）。

# ios - 使用 Cedar 测试 iOS 控制器

> ID：14466407
> 
> 赞同：0
> 
> 时间：2013-01-22T19:24:53.653
> 
> 标签：ios, objective-c, testing, ios6, cedar-bdd

我正在尝试使用 Cedar 测试控制器，但无法真正理解为什么它不起作用。控制器永远不会被显示，viewDidLoad 或 viewDidAppear 永远不会被调用。这是雪松不应该做的事情还是只是我的错误？

```
describe(@"MyController", ^{
    __block UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    __block UINavigationController *root = (UINavigationController *)[[[[UIApplication sharedApplication] delegate]window ]rootViewController];
    __block MyViewController *model = [storyboard instantiateViewControllerWithIdentifier:@"MyController"];

    [root pushViewController:model animated:YES];

    it(@"should test something", ^{
        expect(model.content).to(be_truthy);
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:07:32.237

单元测试同步运行。任何动画（或可能动画）在正常的单元测试中都不起作用，因为测试将在更改发生之前完成。

看起来您正在尝试测试视图控制器显示时的状态。在这种情况下，我们所做的不是推送它，而是加载它：

```
[model loadViewIfNeeded]; 
```

这将从故事板加载视图，然后调用其`-viewDidLoad`. 然后，您应该能够测试其状态。

我不使用 Cedar，但我确实有一个基于 OCUnit 的视图控制器的测试驱动开发截屏：[How to Do UIViewController TDD](https://qualitycoding.org/uiviewcontroller-tdd/)

（顺便说一下，“模型”对于控制器来说是一个非常令人困惑的名称。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-17T21:21:34.440

我通常使用以下设置单独测试我的视图控制器：

```
beforeEach(^{
            window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
            storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
            subject = [storyboard instantiateViewControllerWithIdentifier:@"ViewControllerName"];
            window.rootViewController = subject;
            [window makeKeyAndVisible];
            subject.view should_not be_nil;
}]; 
```

# visual-studio-2012 - Switch between one branch and another TFS 2010 - VS 2012

> ID：14466410
> 
> 赞同：0
> 
> 时间：2013-01-22T19:25:01.267
> 
> 标签：visual-studio-2012

> **Possible Duplicate:**
> [Team Foundation Server switch between branches](https://stackoverflow.com/questions/10240216/team-foundation-server-switch-between-branches)

I need to know if I can switch between branches. If so, how do I do this. See I need to start a new branch to implement a new feature in my code but due to the overall quality of the legacy code there's a 100% chance that I will need to fix bugs or things like that...

So my question is: How can I say to VS something like "Ok, save what I've done so far and go back to the production branch" and vice-versa?!?

I was hoping to find some kind of "project-level" (not solution) switch that would allow me to choose in which branch to work like:

*   Project Interface: Default
*   Project Business: Default
*   Project Database: NewBranch
*   Project Web-Services: SeparatedNewBranch

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:34:37.437

Each branch will have its own working copy on your file system. VS will open one or the other, and when you want to sync changes from one branch to another, you use the Merge command, and then Check In on the target branch.

I suggest you check out [http://vsarbranchingguide.codeplex.com/](http://vsarbranchingguide.codeplex.com/)

# dynamics-ax-2009 - 按 InventTable 过滤报价

> ID：14466412
> 
> 赞同：1
> 
> 时间：2013-01-22T19:25:07.710
> 
> 标签：dynamics-ax-2009

我正在尝试使用 SalesQuotationLine 表的主要数据源在 AX 2009（SP1，当前汇总 6）中构建报告。由于我们的库存结构，我需要应用一个过滤器，只显示某些类别的项目（在本例中，是 InventTable 中定义的非服务项目）。但是，SalesQuotationLine 和 InventTable 之间的链接似乎存在问题，因此只会显示两个特定项目。

我们还针对“销售报价详情”屏幕对此进行了测试，结果相同。执行如下查询：![在此处输入图像描述](../Images/f010a7abc310ffbe9392c73e5bc10551.png)

...将仅显示具有前面提到的特定项目之一的报价。如果我们将 Item Type 更改为其他内容（例如更改为 Item），则结果是一个空集。我们也在我们的一个辅助测试服务器上遇到了这个问题，这实际上是一个全新的安装。

从一个表到另一个表的数据映射似乎没有任何问题，而且我们在使用任何其他表集时都没有遇到这个问题。这是一个真正的问题，还是我只是错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:03:54.373

在分析查询执行期间运行的 SQL 配置文件的结果后，问题似乎是系统错误。选择要加入 SalesQuotationLines 的表时，您有两个选项：“项目”和“项目（项目编号）”。无论您选择使用哪个表执行查询，它都会将 InventTable 与关系“SalesQuotationLines.ProjTransCode = InventTable.ItemId”连接起来。在将该表与系统中的其他层进行比较后，我发现从 createLine 方法中删除了以下代码块（在 SYP 层中）：

```
if (this.ProjTransType == QuotationProjTransType::Item)
{
    this.ProjTransCode = this.ItemId;
} 
```

由于不再填充 ProjTransCode，因此连接不起作用，除非在某些确实填充了 ProjTransCode 的报价行上。

此外，与 InventTable 没有直接定义的关系——该链接仅通过用于 SalesQuotationLine.ItemId 字段的扩展数据类型进行维护。手动添加这个关系解决了这个问题。

# php - 在视图 Yii CSqlDataProvider 和关系表中访问数据

> ID：14466413
> 
> 赞同：0
> 
> 时间：2013-01-22T19:25:13.190
> 
> 标签：php, mysql, yii

我正在尝试在 中加入关系表`profiles`，`CSqlDataProvider`但它不是工作属性。

我怎样才能`profiles.id`在视图中访问？

控制器.php：

```
$sql = "SELECT `events`.`id`
        FROM events
        LEFT OUTER JOIN `profiles` ON (`events`.`profile_id`=`profiles`.`id`)";

$dataProvider=new CSqlDataProvider($sql); 
```

查看.php：

```
<?php $this->widget('bootstrap.widgets.TbGridView',array(
    'type'=>'striped bordered condensed',
    'id'=>'events-grid',
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        'profiles.id', // Problem here, always returns NULL.
        'events.id',
    ),
)); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:29:26.347

您可以将其添加到您的 SQL 查询中

```
$sql = "SELECT `events`.`id`, `profiles`.`id`
        FROM events
        LEFT OUTER JOIN `profiles` ON (`events`.`profile_id`=`profiles`.`id`)"; 
```

但是您的事件中似乎已经有 profile.id ，因此您可以在视图中使用它：

```
<?php $this->widget('bootstrap.widgets.TbGridView',array(
    'type'=>'striped bordered condensed',
    'id'=>'events-grid',
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        'profile_id',
        'events.id',
    ),
)); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:50:19.103

1.  首先，您需要[菲利普的回答](https://stackoverflow.com/a/14466506/720508)`select`中已经提到的其他领域：

    ```
    SELECT `events`.`id`, `profiles`.`id` ... 
    ```

2.  最好提供`profiles.id`别名，因为两个列名都是`id`：

    ```
    SELECT `events`.`id`, `profiles`.`id` as pid ... 
    ```

3.  然后在网格中，您可以访问这些列：

    ```
    'columns'=>array(
        'pid', // instead of profiles.id
        'id', // instead of events.id
    ) 
    ```

# bash - Bash 在文件夹中的文本文件上运行 jar 文件

> ID：14466414
> 
> 赞同：1
> 
> 时间：2013-01-22T19:25:13.597
> 
> 标签：bash, jar

有一个 jar 文件，它按字母顺序排列 .txt 文件中的一系列名称。我在文件夹中有很多这些文件。.jar 的正常使用是：

```
java -jar names.jar -o output/alphabetized/ names/names-05-04-20.txt 
```

您如何在文件夹中的 txt 文件上运行 jar 文件？

编辑：names.jar 将传递给它的文件的内容按字母顺序排列，目标是按字母顺序排列文件夹中文件的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:31:48.110

使用[外壳 for 循环](http://wiki.bash-hackers.org/syntax/ccmd/classic_for)：

```
for F in names/*.txt; do java -jar names.jar -o output/alphabetized/ "${F}"; done 
```

您可以通过添加`echo`before`java`来显示命令而不是运行它来查看将要执行的操作：

```
$ for F in names/*.txt; do echo java -jar names.jar -o output/alphabetized/ "${F}"; done
java -jar names.jar -o output/alphabetized/ names/actors.txt
java -jar names.jar -o output/alphabetized/ names/apple-products.txt
java -jar names.jar -o output/alphabetized/ names/fruit.txt
java -jar names.jar -o output/alphabetized/ names/planets.txt
java -jar names.jar -o output/alphabetized/ names/presidents.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:26:51.943

通过做：

```
find . -name *.txt -exec jar -o output/alphabetized {} \; 
```

{} 是找到的文件的名称。

# sql-server - 如何在 SQL Server 中重写这些 TRIM 访问查询

> ID：14466416
> 
> 赞同：0
> 
> 时间：2013-01-22T19:25:23.740
> 
> 标签：sql-server, trim

我正在重写从 Access 到 SQL Server 的更多代码，我之前从未遇到过 TRIM 代码，据我所知，如何为 SQL Server 编写它的任何想法不仅仅是 SQL Server 的普通 TRIM

```
Trim([FCT_TYP_CD]) & " (" & Trim([Dep_TYP_CD]) & ")" AS [Course Owner] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:28:09.020

```
SELECT  RTRIM(LTRIM([FCT_TYP_CD])) + ' (' + 
        RTRIM(LTRIM([Dep_TYP_CD])) + ')' AS [Course Owner] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:27:45.837

```
LTRIM(@String)
RTRIM(@string) 
```

或者

```
LTRIM(RTRIM(@string)) 
```

# php - 获取 URL 并添加 /?var0=val0&var1=val1 而无需离开页面且无需用户输入

> ID：14466421
> 
> 赞同：0
> 
> 时间：2013-01-22T19:25:30.907
> 
> 标签：php, html

好的 - 感谢您抽出宝贵时间！

我在 CentOS 6 服务器上使用 WP。我有一个函数插件，我有一个函数可以进行数据库调用并根据 $_GET 变量填充相关产品，我从另一个项目中获取并对其进行修改以使其正常工作！但是在这里我遇到了问题，我转到主页，我有一个首先被调用的函数，通过 URL 名称并确定类别 ID，然后我需要将其传递给 URL，以便当下一个函数然后调用 $_GET["category_id"] 并且该 ID 在那里并准备好使用时，它会发挥它的魔力。（都停留在同一页面上，没有刷新或任何东西）

所以我需要在加载页面时将其放在 URL 上，以便我可以使用它（我再次从一个函数中获取变量，该函数使用相关信息的地址完成所有工作，）那么我该怎么做它？HTML 或 PHP，没有额外安装的直接方式会很好:)

编辑1：那么有什么东西可以让我简单直接地集成进去，这样我就可以进行迷你刷新并获得正确的变量，从不使用JavaScript，但要接缝或php中的东西.. . 欢迎提出想法:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:30:22.697

## 您可以使用 javascript 和历史 API

在不实际重定向用户的情况下更改 url 的唯一方法是使用[pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)方法。

例如打开一个控制台并复制并粘贴这个：

```
var stateObj = { foo: "bar" };
history.pushState(stateObj, "changes url to stackoverflow.com/yes-you-can", "/yes-you-can"); 
```

您不会被重定向，并且您的浏览器的 url 会改变[，除非，基本上，您使用的是 IE 9 或更低版本](http://caniuse.com/#search=pushState)。[你可以在html5demos.com](http://html5demos.com/history)上看到这个演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:51:19.963

好的，这就是我将如何解决我遇到的这个问题

我在数据库中创建了一个新表，然后我已经有了我们正在使用的域的列表，所以我要给客户一共有三列，他们将手动输入字段，它将在他们身上管理和更改他们希望在网页上显示的内容。

CVS 导入，然后 BAM！完毕！只需拉 $_SERVER["SERVER_NAME"] 然后将其与域列进行比较即可！（我将拥有他们想要的任何猫和大小，我们不需要创建任何复杂的函数和异常的 if 语句，它就在手中！）

不是我想得到的确切答案，但更容易，也没有那么复杂:)

# ruby-on-rails-3 - 使用 JSON 和 Google Charts 中的数据绘制图表时遇到问题

> ID：14466424
> 
> 赞同：0
> 
> 时间：2013-01-22T19:25:44.020
> 
> 标签：ruby-on-rails-3, jquery, google-visualization

我正在尝试使用谷歌图表和我从 MYSQL 创建的 JSON 绘制折线图。我尝试使用 Google Visualization API 上提供的示例，但没有成功。

```
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

function drawChart() {
    var selectedValue = $("select option:selected").val()
    var jsonData = $.ajax({
        type: 'get',
        url: '/social_scores/'+selectedValue,
        dataType:"json",
        success: function(response, status, jqXHR) {
             /* Create the charts after operation succeeded */
             var data = new google.visualization.DataTable(response);
             data.addColumn('string', 'Week');
             data.addColumn('number', 'Overall');
             data.addColumn('number', 'Presence');
             data.addColumn('number', 'Popularity');
             data.addColumn('number', 'Engagement');
             data.addColumn('number', 'Reputation');
             data.addRows([
                 ['Week 1', response.overall_score, response.presence_score, response.popularity_score, response.engagement_score, response.reputation_score ],
                 ['Week 2', response.overall_score, response.presence_score, response.popularity_score, response.engagement_score, response.reputation_score ]
             ]);
            var options = {
                title:'Key Success Metrics over time across all channels',
                'backgroundColor': 'transparent',
                'width': 620,
                'vAxis': {minValue:"0", maxValue:"100", gridlines:{count: 7} },
                'chartArea': {top:"50", left: "40"},
                'legend':{position: 'top', alignment: 'start' }
           };
           var chart = new google.visualization.LineChart(document.getElementById('line_graph'));
           chart.draw(data, options);
          ("select").change(function(){
            alert($("select option:selected").val())

           });

        }
    });
}; 
```

这是应该更新的图表跨度：

```
<span id="line_graph"></span> 
```

这是下拉html：

```
<select id="social_entity_id" name="social_entity[id]">
<option value="1">DataSimply</option>
<option value="2">mbonat</option>
<option value="3">OpenLabel</option>
<option value="4">scrible</option>
<option value="5">jivesoftware</option>
<option value="6">lithiumTech</option>
<option value="7">getsatisfaction</option>
<option value="8">tumblr</option>
<option value="9">nytimes</option>
<option value="10">gilt</option>
<option value="11">groupon</option>
<option value="12">Bloombergnow</option>
<option value="13">NWSCorp</option>
<option value="14">etsy</option>
<option value="15">foursquare</option>
<option value="16">Yelp</option>
<option value="17">businessinsider</option>
</select> 
```

我应该将更改事件放在哪里，以便根据下拉列表的选定值更改数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:57:18.367

AJAX 操作以异步方式工作，因此您需要等到操作完成后再初始化图表。

```
$(function() {
    var chart;

    var drawChart = function {
        var selectedValue = $("select#social_entity_id option:selected").val();
        $.ajax({
            type: 'get',
            url: '/social_scores/'+selectedValue,
            dataType:"json",
            success: function(response, status, jqXHR) {
                 /* Create the charts after operation succeeded */
                 var data = new google.visualization.DataTable(response);
                 data.addColumn('string', 'Week');
                 data.addColumn('number', 'Overall');
                 data.addColumn('number', 'Presence');
                 data.addColumn('number', 'Popularity');
                 data.addColumn('number', 'Engagement');
                 data.addColumn('number', 'Reputation');
                 data.addRows([
                     ['1', response.overall_score, 1, 1, 1, 1 ],
                     ['1', 1, 1, 1, 1, 1 ]);

                var options = {
                    title:'Key Success Metrics over time across all channels',
                    'backgroundColor': 'transparent',
                    'width': 620,
                    'vAxis': {minValue:"0", maxValue:"100", gridlines:{count: 7} },
                    'chartArea': {top:"50", left: "40"},
                    'legend':{position: 'top', alignment: 'start' }
               };
               chart = new google.visualization.LineChart(document.getElementById('line_graph'));
               chart.draw(data, options);
            }
        });
     }

     google.load("visualization", "1", {'callback': drawChart, packages:["corechart"]});

     $('#social_entity_id').change(drawChart);

}); 
```

# exchange-server - Exchange 2003 公用文件夹警报？

> ID：14466434
> 
> 赞同：0
> 
> 时间：2013-01-22T19:26:35.457
> 
> 标签：exchange-server

当公共文件夹电子邮件被移动/回复或删除时，用户是否有办法接收警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:19:54.360

我已经对此进行了调查，解决方案是与第 3 方合作

[http://www.sperrysoftware.com/Outlook/Watch-Outlook-Folders.asp](http://www.sperrysoftware.com/Outlook/Watch-Outlook-Folders.asp) [http://www.mapilab.com/outlook/folders_watch/](http://www.mapilab.com/outlook/folders_watch/)

# php - 联系表格 IP 地址

> ID：14466436
> 
> 赞同：-4
> 
> 时间：2013-01-22T19:26:37.947
> 
> 标签：php, ip, contact

[我有一个联系表格，可以在此处找到](http://snippi.com/s/ofqj1pc)整个标记（JavaScript 除外） 。 该表单将包含用户输入信息的电子邮件发送到选项面板中 to_email 下定义的任何电子邮件。

我在 WordPress 中使用此表单，并希望获得填写该表单的人的 IP 地址附加到消息中。我尝试合并[此帖子](https://stackoverflow.com/questions/8687642/how-to-detect-the-visitors-ip-address-using-html)中的代码，但我是 PHP 的新手，似乎无法正确合并它（实际上将其与消息的其余部分一起发送）。

如果有人可以就我应该包含哪些代码以及我应该在哪里包含它以显示发件人的 IP 地址提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:30:09.757

```
$body = "Name: $name \n\nEmail: $email \n\nComments: $comments"; 
```

用。。。来代替

```
$body = "Name: $name \n\nEmail: $email \n\nComments: $comments \n\nIP: ".$_SERVER['REMOTE_ADDR']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T01:56:37.253

我知道这是一个很老的问题，但我想帮助谁来解决这个问题。首先，我建议[使用 Contact form 7 插件](https://wordpress.org/plugins/contact-form-7/)来使用 wordpress 创建表单。

在创建表单时可能如下所示：

![在此处输入图像描述](../Images/e5a6bb850590c8d22ce6f4b810e94af7.png)

您在消息正文中（在右列“消息正文”的屏幕截图中）添加以下短代码：

> [wpcf7.remote_ip]

您的消息将（未经修改）如下所示：

> 发件人：[您的姓名] <[您的电子邮件]> 主题：[您的主题]
> 
> 消息正文：[您的消息]
> 
> 发送自：[wpcf7.remote_ip]
> 
> --
> 
> 此电子邮件是从测试联系表发送的 (heep://localhost:8888/wordpress)

这会将用户 IP 打印到您将收到的电子邮件中。

然后在您的帖子中，您将给出的短代码集成到页面中（如）：

> [contact-form-7 id="1056" title="示例表格"]

# android-activity - 在活动图中正确使用信号

> ID：14466442
> 
> 赞同：8
> 
> 时间：2013-01-22T19:26:53.627
> 
> 标签：android-activity, uml, signals, diagram

我有一个关于活动图的问题。我阅读了很多关于该主题的材料，但老实说，我仍然不确定信号发送和接收。

我为密码验证做了一个简单的活动图。

基本上我想做的是在服务器在数据库中执行搜索后向客户端发送一条消息。这种信号的使用是否正确？

任何对图表结构的批评都将受到欢迎。

这是提到的图表：

![](../Images/e333ad15bb1cae724d5d718e17733bf8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T08:39:24.423

信号用于指示与所考虑系统外部的某个实体的通信（例如，给客户的电子邮件）。所以这取决于你的系统的边界：从这个活动的角度来看，客户端和服务器是不同系统的一部分吗？

信号也以某种方式用于指示异步通信。在这种情况下，我不会使用信号：在我看来，这些是行动。如果您认为有用的话，也许您可​​以在图中添加传输的对象（本例中的数据），但我会避免使用信号。

# process - 带有强化学习的推车杆框架

> ID：14466446
> 
> 赞同：0
> 
> 时间：2013-01-22T19:27:03.030
> 
> 标签：process, markov

我正在做一个副项目，该项目正在对倒立摆问题进行建模，并使用强化学习算法（最著名的是 Q-Learning）来解决它。我已经为网格世界设计了一个简单的 MDP 求解器——简单的东西。

然而，经过几天的研究论文搜索，我正在努力弄清楚如何做到这一点。没有什么可以解释如何建立一个表示问题的框架。

在建模问题时，可以使用标准的马尔可夫决策过程吗？还是必须是 POMDP？

每个状态代表什么（即传递给代理的状态信息是什么）？摆的坐标，速度，角度等？

代理可以采取什么行动？它是 + 或 - x 方向上的连续速度范围吗？

非常感谢您对此提供建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T09:58:48.947

Richard S. Sutton 和 Andrew G. Barto 的“强化学习：介绍”是强化学习的默认书籍，他们还讨论了推车杆问题 ( [http://webdocs.cs.ualberta.ca/~sutton/book /the-book.html](http://webdocs.cs.ualberta.ca/~sutton/book/the-book.html) )。Sutton还提供了cartpole问题的C代码：[http](http://webdocs.cs.ualberta.ca/~sutton/book/code/pole.c) ://webdocs.cs.ualberta.ca/~sutton/book/code/pole.c 当然网上有很多问题的实现：[https://github .com/stober/cartpole](https://github.com/stober/cartpole)

这个问题有多种解决方案，具体取决于你想要拥有它的难度。

*   您可以将其建模为 MDP 或 POMDP。
*   状态可以包括位置、速度、角度和角速度，或这些的任何子集。
*   您可以离散状态空间，可以使用函数逼近。
*   这些动作可以是简单的最小和最大加速度（离散），介于两者之间（离散或连续）。

从轻松开始，逐步解决更困难的问题！

# sqlite - 在 Windows 上开始使用 SQLite，为什么它没有输出任何东西？

> ID：14466447
> 
> 赞同：1
> 
> 时间：2013-01-22T19:27:05.220
> 
> 标签：sqlite, windows-7

我刚刚开始使用 SQLite，按照[这里](http://sql.learncodethehardway.org/book/ex0.html)的教程，我在 Windows 上使用它。我已将 sqlite3.exe 提取到桌面上的文件夹中，并在命令提示符下运行以下行来测试它：

```
sqlite3 test.db 
```

官方文档声称应该创建一个名为 test.db 的文件来使用。但是，它似乎没有做任何事情，没有创建文件，也没有给出错误或成功消息，只是另一个`sqlite>`提示。我是否遗漏了一些东西来让它在 Windows 7 上运行？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:19:35.217

如果数据库文件不存在，SQLite 会从一个空数据库开始。

在您实际写入数据库之前，不会创建文件本身。
尝试创建一些东西：

```
CREATE TABLE Test(some stuff); 
```

# java - 获取记录数最多的用户

> ID：14466452
> 
> 赞同：2
> 
> 时间：2013-01-22T19:27:10.433
> 
> 标签：java, mysql, sql, jpa

我的数据库中有一个“记录”表和一个“用户名”列，其中存储了具有该记录的用户的名称。我想获得记录数最多的用户。我唯一的想法是构建一种方法来获取每个用户的记录数，然后找到其中最大的数。是否有任何 SQL 查询来执行此操作或更简单的方法？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T19:28:03.660

```
select username, count(*)
from Records
group by username
order by count(*) desc
limit 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:53:18.777

另一种方式

```
select username
from records
having count(*) = 
    (SELECT max(count(*)) FROM records group by username)
group by username 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T19:31:41.383

```
select username, count(*) As no_of_records
from Records
group by username
order by no_of_records desc 
```

上面的查询将给出降序为 no 的所有行。用户的记录和任意数量的限制，您可以使用`LIMIT`关键字后跟数字

为了。例如最高`LIMIT 1`

前2名`LIMIT 2` 等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T19:34:33.057

尝试这个

```
 SELECT username, sum(record) total_record
  FROM Records
  GROUP BY username
  ORDER BY count(*) desc 
```

编辑 ：

[**演示 SQLFIDLE**](http://sqlfiddle.com/#!2/2bed7/4)

** 如果您只想获得第一高，请执行 LIMIT 1

```
 select username, sum(record) total_record
 from Records
 group by username
 order by count(*) desc
 limit 1 
```

[**演示在这里**](http://sqlfiddle.com/#!2/2bed7/5)

# regex - Notepad ++正则表达式用于在前两个单词之后删除行中的文本

> ID：14466454
> 
> 赞同：0
> 
> 时间：2013-01-22T19:27:13.693
> 
> 标签：regex, notepad++

所以我有一个这样的列表：

```
AudioQuest FLX-14/2
Abbey Road Cable Monitor Speaker Cable 
```

在第一行中，我需要删除第一个单词之后的所有内容，而在第二行中，我需要删除前两个单词之后的所有内容。我想出了如何在第一个单词之后删除所有内容，它是

```
.*?$ 
```

但我对第二种情况无能为力。帮帮我，这样我就可以在宏上切换操作的快捷方式，并以半自动方式处理列表（选择并应用宏）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:21:59.800

我会分两次做..

> 寻找：
> 
> 1.  " ***(^[az]* [az]* )** "
> 2.  " ***(^[az]* )** "
> 
> 替换：“\1”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:24:40.350

据我所见，数据似乎是对齐的。从这个例子中，只需要前 10 个字符，其余的应该被删除。

找什么：`(.{10}).*`

用。。。来代替：`$1`

# jquery - javascript对象遍历元素的属性

> ID：14466457
> 
> 赞同：0
> 
> 时间：2013-01-22T19:27:24.613
> 
> 标签：jquery

下面，我试图遍历输入元素中的每个属性。它不工作，我不知道为什么。这是对名为 input 的对象的错误使用吗？我该如何改变？

```
<script>
   $('form.trade').submit(function(e) {
      e.preventDefault();
      input=$(this).find(':input:first');
      value='';

      $.each(input.attributes, function(i, attrib){
        if (attrib.name!='type'){
            value +=attrib.name + ":" + attrib.value + ";";
        }
      });
      });
</script>
<form class="trade" id="24243">
<input type="hidden" available="4" pid="24243" cardname="something" yay="blah">
Available: <p class="available">4</p>
<input type="submit" value="add card">
</form>
<br/>
<form class="trade" id="24245">
<input type="hidden" available="7" pid="24243" cardname="somethik" yay="blakk">
Available: <p class="available">7</p>
<input type="submit" value="add card">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:32:32.373

It's "attributes" on the input array that doesn't make sense.

```
$.each(input.attributes 
```

The result of `$(this).find(':input')` returns a jQuery selection (array) of items.

Are you trying to iterate through the inputs attributes? `$.each(input[i].attributes` is what you're looking to do, where `i` is an iterator through the `input` collection.

~ Here's what you want to do:

```
<script>
      $('form.trade').submit(function(e) {
           e.preventDefault();
           var $inputs=$(this).find(':input:first');
           var value='';
           $inputs.each(function(i,input){
             $.each(input.attributes, function(j,attrib){
                 if (attrib.name!=='type'){
                value +=attrib.name + ":" + attrib.value + ";";
                 }   
             });
           });
           console.log(value); // what do you want to do with value??
      });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:52:25.547

我想我必须先通过输入。我不知道为什么，但它很容易解决它。

```
 value='';
        input.each(function(){
        $.each(this.attributes, function(i, attrib){
            if (attrib.name!='type'){
                value +=attrib.name + ":" + attrib.value + ";";
            }
        });
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:06:11.593

你可以使用普通的 javasript：

```
var elem = document.getElementById('testElement');
for (var i = 0; i < elem.attributes.length; i++) {
    var att = elem.attributes[i];
    if (att.specified == true) {
    console.log(att.name + " " + att.value);
    }
} 
```

[如何遍历 HTML 元素中的所有属性？](https://stackoverflow.com/questions/828311/how-to-iterate-through-all-attributes-in-an-html-element)

# sql-server - 为什么我的 SQL 事务最后没有执行删除？

> ID：14466466
> 
> 赞同：0
> 
> 时间：2013-01-22T19:27:47.747
> 
> 标签：sql-server, tsql

我有一个简单的 SQL 命令，它应该从表中读取所有记录，然后将它们全部删除。因为有可能其他人可能会在准确的时刻写入该表，所以我想锁定该表，以确保我删除的所有内容也是我阅读的所有内容。

```
BEGIN TRAN T1; 
SELECT LotID FROM fsScannerIOInvalidCachedLots WITH (TABLOCK, HOLDLOCK); 
DELETE FROM fsInvalidCachedLots; 
COMMIT TRAN T1; 
```

真正奇怪的是，这用得着。它通过测试工作了一段时间，但现在我猜有些事情发生了变化，因为它正在读取所有内容，但它没有删除任何记录。因此，SQL Server 正在提高 CPU 使用率，因为当它下次运行时，它的执行时间要长得多，我认为这与锁有关。

知道这里会发生什么吗？我都试过`TABLOCK`了`TABLOCKX`

更新：哦，是的，我忘记提到了，直到下一次阅读程序之后，我才能查询该表。我的意思是，在代码中执行该语句（并且命令和连接被处理）之后，如果我尝试从 Management Studio 中查询该表，它就会挂起，我认为这意味着它仍然被锁定。但是，如果我单步执行调用程序，直到遇到下一个数据库连接，第一次读取表后的那一刻就不再锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:47:09.113

您`SELECT`从名为 的表中检索数据`fsScannerIOInvalidCachedLots`，但删除来自名为 的不同表`fsInvalidCachedLots`。

如果在 中运行此查询`set xact_abort off`，则事务不会因无效表名的错误而中止。事实上，`select @@trancount`它会告诉你有一个活动的事务，并且`select xact_state()`会返回 1 表示它是活动的并且*没有发生错误*。

另一方面，随着`set xact_abort on`，事务被中止。 `select @@trancount`将返回 0，并且`select xact_state()`将返回 0（无活动事务）。

有关它们的更多信息，请参阅MSDN 上的[@@trancount](http://msdn.microsoft.com/en-us/library/ms187967%28v=sql.110%29.aspx)和[xact_state()](http://msdn.microsoft.com/en-us/library/ms189797%28v=sql.110%29.aspx)。

# java - 将 android.graphics.Path 对象转换为 byte[] 并返回

> ID：14466469
> 
> 赞同：3
> 
> 时间：2013-01-22T19:27:56.257
> 
> 标签：java, android, sqlite

我正在尝试将`android.graphics.Path`对象转换为，`byte[]`以便可以将其存储在 SQLite 的 blob 存储中，也可以将其转换回来。

到目前为止，我什至不知道从哪里开始......

感谢任何愿意提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:36:36.510

作为`Path`extends `Object`，你可以使用这样的东西：

```
 ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    ObjectOutputStream objectOutputStream = new ObjectOutputStream(outputStream);
    objectOutputStream.writeObject(path);
    byte[] array = outputStream.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:37:14.820

序列化您的对象并上传该文件。

```
ByteArrayOutputStream baos = new ByteArrayOutputStream()
ObjectOutput out = new ObjectOutputStream(baos);
out.writeObject(android.graphics.Path);
out.close()
byte[] buf = bos.toByteArray();  //byte array 
```

恢复该对象使用反序列化

```
ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(buf)); 
      class_name recover =(clas_name) in.readObject(); 
      in.close(); 
      return object; 
```

# version-control - 将时间、日期和数字编码为几个字母数字字符

> ID：14466474
> 
> 赞同：1
> 
> 时间：2013-01-22T19:28:14.283
> 
> 标签：version-control, encoding, character-encoding, build-process

我想将某些信息（例如构建的日期和时间以及 SVN 修订版）编码为可逆的字母数字字符串，以便我可以轻松识别构建（除了维护已知构建表）。

我不知道该怎么做。您能否指出对我有帮助的相关算法、命令等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:32:42.413

如果您不需要太短，请使用[Base64 编码](http://en.wikipedia.org/wiki/Base64)。

```
$ echo $(date +%s)-r3749 | base64
MTM1ODg4MzA3MS1yMzc0OQo=
$ echo MTM1ODg4MzA3MS1yMzc0OQo= | base64 --decode
1358883071-r3749 
```

在这里，我使用了[Epoch 时间](http://en.wikipedia.org/wiki/Unix_time)，因为它的字符数少于完整日期。因为它是一个数字，而 SVN 版本也是一个数字，您也可以使用不同的基数对它们进行编码。使用[这个 Base 62 encoding function](https://stackoverflow.com/a/1119769/14558)，您可以将 (date, revision) 对可逆地编码`1358883071-r3749`为`1tXJyT,Yt`

但是 Base64 可能足够短，而且超级简单。

# html - 两个容器的css动态布局

> ID：14466481
> 
> 赞同：1
> 
> 时间：2013-01-22T19:28:20.033
> 
> 标签：html, css, layout, dynamic

![在此处输入图像描述](../Images/540885e7896191a27e855777d7dfd76c.png)我有一个有趣的布局设计问题，我想知道是否可以得到一些帮助。

有两个彼此相邻的容器，在大多数情况下，右侧的一个是静态大小的。左边的应该根据动态加载的内容增长。它可能有很多，或者只有一个数据集。现在，随着它的增长，右边的容器应该总是在左边的旁边。

棘手的部分来了。左边的容器不能换行，应该占据屏幕上的剩余宽度，此时会出现滚动条。此时，右侧容器靠近屏幕边缘。

我可以让它在左侧容器总是占用剩余屏幕空间的地方工作，但这会将右侧容器一直推到右侧，即使左侧只有一点点数据。

我还可以让数据增长并使右侧保持在左侧旁边，但是溢出滚动条永远不会出现。对于如何解决所有这些要求，我束手无策。

我也可以只为所有内容设置宽度，但这并不能真正解决增长到屏幕分辨率的要求，也不能只解决少量数据

编辑：附上我当前布局的图像。这看起来不错，因为它是“完整的”，占据了浏览器宽度的 100%。如果数据列变得太小以至于不再滚动，我需要让右侧部分向左移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:12:02.940

我把我认为你想要完成的事情放在一起。

1.  右侧列的宽度和位置是固定的。
2.  左栏将扩大宽度，如果宽度太小而无法显示内部内容，则滚动。

这是示例：http: [//jsfiddle.net/MwdED/](http://jsfiddle.net/MwdED/)

这是HTML：

```
<div class="container">
    <div class="col-left">
        <div class="col-content">
            <div class="wide-content">
                THis is some wide content, sitting inside of the left column.
            </div>
        </div>
    </div>
    <div class="col-right">
        <div class="col-content">
            This is the right column.  It's fixed in width.
        </div>
    </div>
</div> 
```

和 CSS

```
.container {
    position: relative;
    min-width: 500px; /*make sure the columns don't collapse on top of each other*/
}

.col-left {
    padding-right: 200px; /*make room for right column*/
}

.col-left .col-content {
    min-width: 300px; /* the minimum width, before overflow scrolling occurs */   
    overflow: auto;
}

.col-right {
    position: absolute;
    right: 0;
    top: 0;
    width: 200px;
}

.wide-content {
    background: red;
    width: 1000px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:09:40.457

拿 Axel 提供的东西来说，我认为这样的事情肯定会奏效。目的是让两个容器都流动起来，这样无论哪个容器变大或缩小，另一个容器都会吸收差异，但由于某种原因，容器会相互渗入。

```
.col-left .col-content {
    min-width: 20%; /* the minimum width, before overflow scrolling occurs */ 
    max-width: 80%;
    overflow: scroll;
}

.col-right {
   position: absolute;
   right: 0;
   top: 0;
   min-width: 20%;
   max-width: 80%;
} 
```

# sql - 从 oracle 数据库表中生成带有自定义 XML 标记的 XML 文件

> ID：14466485
> 
> 赞同：3
> 
> 时间：2013-01-22T19:28:37.093
> 
> 标签：sql, xml, oracle, file-io, plsql

我正在研究 oracle 数据库 9ir2 我需要将一些表转换为带有自定义格式标签的 xml 文件。

例如：我想从 emp 表中的某些列生成 XML，然后生成一个名为“myxmlfile.xml”的文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-engine-xml>
 <myxmlfile
  EMPNO="8401"
  ENAME="JHON"
  HIREDATE="1988-12-30"
  SAL="5000"
  DEPTNO="10"

 />
 <myxmlfile
    ...
 />
 <myxmlfile
    ...
 />
</entity-engine-xml> 
```

1.  如何生成带有上述标签的自定义 XML 文件，并且每次用户需要这样做，即使用 pl/sql 的“每个用户请求”，如何使用 oracle XML 函数输出自定义的所需标签？
2.  如何将 xmltype 转换为 varchar2 ??? ... to_char() 函数无法将 XMLtype 转换为 char。
3.  在客户端创建 XML 文件的最简单方法是什么？

注意：用户应用程序在 XP PC 上运行，由旧的 oracle 开发工具 forms6i 构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:50:11.403

你用[XMLELEMENT](http://docs.oracle.com/cd/B10501_01/server.920/a96540/functions172a.htm#1128678)等来做这个。

```
select xmlelement("entity-engine-xml",
                  xmlagg(
                    xmlelement(
                      "myxmlfile", 
                      xmlattributes(empno as "EMPNO",
                                    ename as "ENAME",
                                    to_char(hiredate, 'yyyy-mm-dd') as "HIREDATE",
                                    sal as "SAL",
                                    deptno as "DEPTNO"
                                    )
                    )
                  )
                 ).getclobval()
  from emp; 
```

.

```
how to convert xmltype to varchar2 ??? 
```

有一个[getStringVal](http://docs.oracle.com/cd/B10501_01/appdev.920/a96616/arxml24.htm#1015218)函数。即在上面的示例中我使用了`getClobval`. 有一个`getstringval()`等价物。

编辑：假脱机：

```
set trims on feedback off heading off long 50000 linesize 32767 pagesize 0
col c format a32767
spool c:\temp\foo.xml
select xmlelement("entity-engine-xml",
                  xmlagg(
                    xmlelement(
                      "myxmlfile", 
                      xmlattributes(empno as "EMPNO",
                                    ename as "ENAME",
                                    to_char(hiredate, 'yyyy-mm-dd') as "HIREDATE",
                                    sal as "SAL",
                                    deptno as "DEPTNO"
                                    )
                    )
                  )
                 ).transform(xmltype('<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet>')) c
  from emp;
spool off 
```

# c# - 按值复制结构的引用类型成员

> ID：14466487
> 
> 赞同：0
> 
> 时间：2013-01-22T19:28:41.117
> 
> 标签：c#, value-type, reference-type

我有一个结构和一个类

```
public class MyClass
{
    public string name;
}

public struct MyStructure
{
    public MyClass classValue;
    public int intValue;
    public MyStructure(MyClass classValue, int intValue)
    {
        this.classValue = classValue;
        this.intValue = intValue;
    }
} 
```

在其他地方，我编写了以下代码：

```
MyClass class1 = new MyClass() { name = "AA" };
MyStructure struct1 = new MyStructure(class1, 4);
MyStructure struct2 = struct1;
struct1.classValue.name = "BB";  //struct2.classValue.name also change! 
```

在这种情况下，如何确保结构的每个引用类型成员都按值复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:17:48.790

您`MyStructure`由一个类型的对象引用`MyClass`和一个`int`( `Int32`) 组成。那作业

```
MyStructure struct2 = struct1; 
```

只复制那些数据、引用和整数。没有创建新的实例`MyClass`。你无法改变这一点。

如果你想复制，你可以说

```
MyStructure struct2 = new MyStructure(
    new MyClass { name = struct1.classValue, },
    struct1.intValue
    ); 
```

当然，如果你需要做很多，你可以写一个`Clone()`方法来做这个。但是您必须记住使用该`Clone`方法而不仅仅是分配。

（顺便说一句， the`MyStructure`是一个“可变结构”。很多人不鼓励他们。如果您将字段标记为`MyStructure`as `readonly`，我认为“很多人”会感到满意。）

**补充：**另请参阅[对 Can 结构的回答*包含对 C# 中引用类型的引用*](https://stackoverflow.com/a/945708/1336654)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:00:47.623

赋值运算符不会深度复制结构内的引用类型字段。您可以创建自己的复制构造函数来手动执行深度复制，但是：

```
public MyStructure(MyStructure structure)
{
    classValue = new MyClass() { name = structure.classValue.name };
    intValue = structure.intValue;
} 
```

然后使用以下命令调用复制构造函数：

```
MyStructure struct2 = new MyStructure(struct1); 
```

或者，您可以更改`MyClass`为结构。

# html - 如何以百分比正确设置高度和宽度？

> ID：14466488
> 
> 赞同：1
> 
> 时间：2013-01-22T19:28:43.270
> 
> 标签：html, css

我需要在它旁边显示一个图片和文字，但问题是图片太大，我需要通过设置自定义`width`和来缩小它`height`。

**CSS：**

```
#list{
    max-height:200px;
    overflow-y:auto;
    padding:5px;
    /*display: none;*/
}

.info{
    border: 1px dashed #CCCCCC;
    margin-bottom: 5px;
    padding:0 5px;
    overflow: hidden;
    cursor: pointer;
}

.info .image{
    width:20%;
    height:30%;
    display:inline-block;
    margin-right:20px
}

.info .image img{
    width: 100%;
    height: 100%;
}

.info .text_data{
    display: inline-block;
} 
```

HTML：

```
<div id="list" class="select_block">
    <div class="info">
        <div class="image">
            <img src="https://dl.dropbox.com/u/14396564/screens/screenshot.jpg">
        </div>
        <div class="text_data">
            <p>
                Name: Some name
                <br />
                Start: 2012-05-17 04:43:40
                <br />
                End: 2012-05-17 04:43:40
            </p>
        </div>
    </div>
</div> 
```

[http://jsfiddle.net/nonamez/e5hyX/](http://jsfiddle.net/nonamez/e5hyX/)

在 Firefox 中就像
![火狐](../Images/6e1bd6509dac34ee088d59779584d80a.png)

在 Safari 中（可能在 chrome 中是相同的）
![苹果浏览器](../Images/a93e95155d42c9e67e26fc7c816b6650.png)

所以我需要这样的东西（悬停在图片上以全尺寸显示，所以我只需要一个预览列表，**但带有百分比**）。

![需要](../Images/072c0351533f86af5c6efa33ebe06cf0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:31:51.063

如果您只设置高度或宽度，浏览器将按比例缩放图像的自然尺寸。如果您需要确保它位于给定区域内，请确保使用`max-*`属性。例如：

```
width:50%;
max-width:100px;
max-height:80px; 
```

# c# - 需要一个 linq to objects 查询嵌套集合

> ID：14466495
> 
> 赞同：6
> 
> 时间：2013-01-22T19:28:58.020
> 
> 标签：c#, linq, linq-to-objects

我正在尝试从深度为四之三的集合中选择文本。

`RootObject`有一个`List<ResourceSet>` `resourceSets`

有`resourceSets` 一个`List<Resources>` `resources`

有`resources`一个`List<RouteLeg>` `routeLegs`

有`routLegs`一个`List<ItineraryItem>` `itineraryItems`

每个`routeLeg`包含和对象被调用`ItineraryItem`，并且在该对象中有一个文本属性。

我正在尝试提取`routeLeg`对象上所有文本属性的列表。如您所见，它嵌套得很深。我显然可以在嵌套循环中执行此操作..（如下所示）但想要使用 Linq to Objects 更清洁，但我在多重嵌套时遇到了问题。

```
 ResourceSet testst = new ResourceSet();
            ResourceSet rs;          
            StringBuilder sb = new StringBuilder();

            for (int i = 0; i < _Result.resourceSets.Count; i++)
            {
                rs = _Result.resourceSets[i];

                for (int j = 0; j < rs.resources.Count; i++)
                {

                    Resource rec = rs.resources[j];

                    string test = rec.distanceUnit;

                    for (int k = 0; k < rec.routeLegs.Count; k++)
                    {
                        RouteLeg rl = rec.routeLegs[k];

                        for (int l = 0; l < rl.itineraryItems.Count; l++)
                        {
                            ItineraryItem ii = rl.itineraryItems[l];                           
                            sb.Append(ii.instruction.ToString());
                        }
                    }

                }
            } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T19:36:32.550

您可以使用[SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)来获取内部项目：

```
var items = result.resourceSets
                  .SelectMany(rs => rs.resources)
                  .SelectMany(res => res.routeLegs)
                  .SelectMany(rl => rl.itineraryItems)
foreach(var x in items)
    sb.Append(x.instruction.ToString()); 
```

# ssis - SSIS - OLE DB 目标 - 表或视图加载与快速加载

> ID：14466498
> 
> 赞同：13
> 
> 时间：2013-01-22T19:29:07.380
> 
> 标签：ssis, sql-server-2008-r2, data-warehouse

从我读到的：

表或视图数据访问模式将每一行作为事务一次提交。因此，制作一个传输 500 万行的包需要很长时间（30 多分钟）。

快速加载数据访问模式允许在插入到目标时指定批处理行和提交大小。例如，插入 500 万条记录只需 2 分钟多一点。

现在问题出现了，加载到 DW 的 SSIS 包之一在 OLE DB 目标中使用表或视图数据访问模式。据我了解，这是为了获取它插入的错误行（错误约束）到错误记录表中。因此，我们有一个需要 30 多分钟的过程。而对于相同的操作，Fast-Load 将花费不到 2 分钟的时间。

如果我理解正确，快速加载将无法区分哪一行导致批次中的错误，而这又导致批次完全失败？如果是这样，是否有另一种方法来解决这种情况，即带有错误行的批次被错误约束重定向，然后以一种方式将批次中的好记录发送到正确的目的地，同时仍然发送错误记录到错误日志表中？这样做是个好主意吗？关于花费的时间，硬着头皮说话会更好吗？

先感谢您。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T19:41:35.203

我在这种情况下看到的做法是级联失败方法。在开始单例插入之前，尝试以连续较小的批次插入 OLE DB 目标，以尝试通过批处理模式获得尽可能多的数据。

假设您有 10k 行的提交大小（任意数字，测试您的情况等）。将失败的行重定向到 OLE DB 目标，仍处于快速加载模式，但提交大小为 2.5k 行。添加另一个 ole db 目标，提交大小可能为 100，然后有一个处于 RBAR 模式的最终目标。然后，您可以识别失败的行并对它们执行任何需要执行的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-22T10:29:55.040

好吧，我在 Fastload 模式下使用了一个目的地，并将它的错误行重定向到另一个目的地，用于相同的 DestinationTable，但在逐行模式下。

它没有 Row by Row 慢，也没有 Fastload 快，但它对我有用！
我还有一个错误描述和真正的错误。

# coldfusion - 标记处理程序查询没有标记库描述符中指定的属性 ormOptions 的设置器

> ID：14466501
> 
> 赞同：-2
> 
> 时间：2013-01-22T19:29:12.607
> 
> 标签：coldfusion, coldfusion-9

一位朋友在 CF 9 服务器上运行的两个 CFM 收到错误消息。有错误状态：

> 标记处理程序查询没有标记库描述符中指定的属性 ormOptions 的设置器

一个快速的谷歌出现了 19 个结果。大多数是未回答的问题，其他人说重新安装 CF 9。如果可能的话，我更愿意提供除重新安装之外的选项。

我试过重启。除此之外，我不知道该去哪里。当谷歌不知道时，我怎么能期望？

注意：我被告知服务器上没有任何变化。`cfquery`修改了标记的 SQL 内容。此外，Web 应用程序根本没有使用 ORM。

关于从哪里开始的任何想法？

* * *

**堆栈跟踪**

```
coldfusion.jsp.JRunTagLibraryInfo$NoSuchAttributeException: The tag handler query does not have a setter for the attribute ormOptions specified in the Tag Library Descriptor.
    at coldfusion.jsp.JRunTagLibraryInfo.getPropertyType(JRunTagLibraryInfo.java:627)
    at coldfusion.jsp.JRunTagLibraryInfo.buildTagInfo(JRunTagLibraryInfo.java:585)
    at coldfusion.jsp.JRunTagLibraryInfo.getTag(JRunTagLibraryInfo.java:267)
    at coldfusion.compiler.NeoTranslationContext.findTagName(NeoTranslationContext.java:346)
    at coldfusion.compiler.NeoTranslationContext.isKnownTag(NeoTranslationContext.java:222)
    at coldfusion.compiler.SemanticAnalyzer.preTransformCftag(SemanticAnalyzer.java:461)
    at coldfusion.compiler.SemanticAnalyzer.preTransform(SemanticAnalyzer.java:46)
    at coldfusion.compiler.Treewalker.postorder(Treewalker.java:21)
    at coldfusion.compiler.Treewalker.postorder(Treewalker.java:27)
    at coldfusion.compiler.NeoTranslator.parseAndTransform(NeoTranslator.java:416)
    at coldfusion.compiler.NeoTranslator.translateJava(NeoTranslator.java:343)
    at coldfusion.compiler.NeoTranslator.translateJava(NeoTranslator.java:144)
    at coldfusion.runtime.TemplateClassLoader$TemplateCache$1.fetch(TemplateClassLoader.java:418)
    at coldfusion.util.LruCache.get(LruCache.java:180)
    at coldfusion.runtime.TemplateClassLoader$TemplateCache.fetchSerial(TemplateClassLoader.java:362)
    at coldfusion.util.AbstractCache.fetch(AbstractCache.java:58)
    at coldfusion.util.SoftCache.get_statsOff(SoftCache.java:133)
    at coldfusion.util.SoftCache.get(SoftCache.java:81)
    at coldfusion.runtime.TemplateClassLoader.findClass(TemplateClassLoader.java:591)
    at coldfusion.filter.PathFilter.invoke(PathFilter.java:80)
    at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
    at coldfusion.filter.BrowserDebugFilter.invoke(BrowserDebugFilter.java:74)
    at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
    at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
    at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
    at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
    at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
    at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:53)
    at coldfusion.CfmServlet.service(CfmServlet.java:200)
    at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
    at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
    at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    at jrun.servlet.FilterChain.service(FilterChain.java:101)
    at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
    at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
    at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
    at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    at jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
    at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:52:54.017

如果我不得不猜测，我会说服务器是 9.0 而不是 9.0.1。`ormOptions`在 9.0.1 中引入（[根据文档](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fae.html)）。

顺便说一句，如果您询问某些代码中的错误，这总是有帮助的：a）发布代码；b）发布确切的错误，就像它在屏幕上一样（打开强大的异常处理）。

这样就不必猜测/假设您的情况。

# jsf - Web 过滤器破坏 PrimeFaces 移动视图

> ID：14466509
> 
> 赞同：3
> 
> 时间：2013-01-22T19:29:28.833
> 
> 标签：jsf, mobile, primefaces, servlet-filters

在我使用 PrimeFaces 3.4.2 的 JSF2.1 Web 应用程序中，我添加了一个新网页，其中仅包含一个使用`renderKitId="PRIMEFACES_MOBILE"`(PFM 0.9.3) 的视图。这个想法是过滤器将来自移动设备的请求重定向到此页面。不幸的是，这个过滤器完全破坏了某些移动设备上移动页面的 CSS（是的，并非所有设备都受到影响！）。当过滤器存在时，重定向呼叫和直接呼叫在受影响的设备上都会中断；当过滤器关闭时，一切正常。

这里是网络过滤器：

```
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain)
        throws IOException, ServletException {

    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse resp = (HttpServletResponse) response;

    boolean isMobile = isMobileDevice(req.getHeader("user-agent"));  // utility function

    if (!req.getRequestURI().contains("/mobile/") && isMobile) {
        resp.sendRedirect(req.getContextPath() + "/faces/mobile/index.xhtml");
    } else {
        chain.doFilter(request, response);
    }    
} 
```

过滤器在 web.xml 中没有任何映射。只有注释`@WebFilter("/*")`存在。当注释内的路径被伪造时，一切正常。

xhtml 页面...相当简单：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile" >
    <h:head>
    </h:head>
    <h:body>
        <f:view renderKitId="PRIMEFACES_MOBILE">
            <pm:page title="Hello World">
                <pm:view id="main">
                    <pm:header title="Header" />
                </pm:view>
            </pm:page>        
        </f:view>    
    </h:body>
</html> 
```

[此处](http://forum.primefaces.org/viewtopic.php?f=8&t=27493)有关受影响设备的其他信息。我没有关于如何调试的提示。我已经使用 Firebug 查看了生成的 html，但无法检测到工作的一个和另一个之间的任何区别。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T20:10:24.637

您需要让过滤器跳过对 CSS/JS/图像文件的 JSF 资源请求。

```
if (req.getRequestURI().startsWith(req.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) {
    chain.doFilter(request, response);
    return;
} 
```

# javascript - Ajax 请求循环并等待完成

> ID：14466510
> 
> 赞同：1
> 
> 时间：2013-01-22T19:29:30.723
> 
> 标签：javascript, jquery, ajax

有没有更有效的方法来编写以下内容？我需要遍历 objList 并将 UnqKey 传递给 wfrmPrint。成功后，我必须遍历页面。我通过传递一个整数并检查它是否小于长度来遍历页面和取消键。我尝试使用取自[http://www.tentonaxe.com/index.cfm/2011/9/22/Using-jQuerywhen-with-a-dynamic-number-of-objects](http://www.tentonaxe.com/index.cfm/2011/9/22/Using-jQuerywhen-with-a-dynamic-number-of-objects)的 .when.apply ，但它正在加载unqkeys 然后是页面。

```
//sample objList
[
    {
        "UnqKey": 1,
        "Pages": [
            "wfrmSet1Page1.aspx",
            "wfrmSet1Page2.aspx"
        ]
    },
    {
        "UnqKey": 2,
        "Pages": [
            "wfrmSet2Page1.aspx",
            "wfrmSet2Page2.aspx",
            "wfrmSet3Page2.aspx",
            "wfrmSet4Page2.aspx"
        ]
    }
]

function Loop(iListIndex) {
var obj = objList[iListIndex];

if (iListIndex < objList.length) {
    jQuery.ajax({
        type: "GET",
        url: 'wfrmPRINT.aspx?action=LoadSession&UnqKey=' + obj.UnqKey, //load session that is used in wfrmSet1Pages.. or wfrmSet2Pages..
        success: function () {
            AddPages(obj, iListIndex, 0);
        }
    })
} else {
    alert('Done');
}
}

function AddPages(obj, iListIndex, iPageIndex) {
if (iPageIndex < obj.Pages.length) {
    jQuery.ajax({
        type: "GET",
        url: obj.Pages[iPageIndex] + '?Print=1', //load html 
        async: true,
        success: function (html) {
            iPageIndex++
            AddPages(obj, iListIndex, iPageIndex);
        },
        error: function () {
            alert('Failed!');
            iPageIndex++
            AddPages(obj, iListIndex, iPageIndex);
        }
    });
} else {
    iListIndex++
    Loop(iListIndex);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:10:04.810

你也许可以做这样的事情，

```
function getData(arr,arrindex) {
    $.ajax({
        type: "GET",
        url: 'wfrmPRINT.aspx?action=LoadSession&UnqKey=' + arr[arrindex].UnqKey
    }).then(function(data){
        var deferredObj = $.Deferred(), defArr = $.map(arr[arrindex].Pages,function(page){
            return $.ajax({type: "GET", url: page + '?Print=1'});
        });
        $.when.apply(null,defArr).done(deferredObj.resolveWith).fail(deferredObj.resolveWith);
        return deferredObj.promise();
    }).done(function(){
        arrindex++;
        if (arr[arrindex]) {
            getData(arr,arrindex);
        }
        else {
            alert("done!");
        }
    }).fail(function(){
        alert("FAIL!");
    });
}
getData(objList,0); 
```

它按顺序获取每个 wfrm，当每个 wfrm 完成时，立即请求该页面的所有页面。您的循环和延迟 $.when 之间的某种组合

编辑：固定`$.map`参数顺序

# connection-string - 我遇到 IIS 8 到 SQL Server 2012 的连接问题

> ID：14466513
> 
> 赞同：1
> 
> 时间：2013-01-22T19:29:44.963
> 
> 标签：connection-string, sql-server-2012, iis-express, iis-8

提前抱歉...试图让我的脚湿透了 win 8、与 win8、Visual Studio 2012 和 SQL Server 2012 捆绑在一起的 IIS8 Express。我整个周末都安装了。对于 SQL Server，我大多只是接受默认值和“添加当前用户”`INSTANCE1`

在我的 Visual Studio 开发模式下，我的 asp.net 应用程序连接到 INSTANCE1，如下所示：

```
server=.\INSTANCE1;Database=MyDatabaseName;Integrated Security=True;Persist Security Info=False 
```

但是当我将它发布到 IIS 8 时，它没有连接。

我尝试了 regiis ...我尝试`NetworkService`了 IIS 应用程序池标识值...以及许多不同的连接字符串组合，反复试验，但似乎没有任何东西可以连接到 Instance1 - 有什么我在配置不正确？

非常感谢任何解决此问题的链接或提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T03:04:14.253

这花了我几个小时才弄清楚。但希望它能减少别人的时间。你可以按照上面的描述安装所有的默认值，但是你必须添加数据库的 Security|Users 的 NT Authority\Network Service 对象（我选择了全局顶级）...然后进去搞乱权限那个新的用户对象……给它所有必要的权限：简而言之，我给了它系统管理员的服务器角色（复选框）。感谢那些帮助我以不同方式思考问题的人！

# php - 数据可视化前端架构

> ID：14466515
> 
> 赞同：0
> 
> 时间：2013-01-22T19:29:47.410
> 
> 标签：php, architecture, d3.js

我必须开发一个 Web 前端来可视化数据（使用 d3.js）。数据由外部数据库提供。

要求：

*   前端保存（至少）过去两个小时的数据（每个系统每分钟一个数据）。
*   客户端（浏览器）连接到 Web 前端，单击相应的系统并看到一些图表。它们应该定期更新。
*   还应该可以请求动态请求/图表。

我的做法：

*   前端（PHP 应用程序）生成页面（包含过去两个小时的数据）并创建一个 websocket（通过推送（JSON）更新前端的数据）

*   编写一个查询外部数据库（可能有很大的响应时间）的导入器实用程序，并将其写入本地“缓冲区”（可能是像 redis 这样的内存数据库），然后通知我的 PHP-App 推送更新。（或者让 php-app 定期检查数据库）

*   使用 d3 可视化数据，使用来自服务器的推送消息的新数据更新图表（我的 php 应用程序）

这个想法值得尝试吗？你有什么建议、读物等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:11:49.187

这个想法听起来很合理。至少，寻找灵感的地方之一是[http://square.github.com/cubism/](http://square.github.com/cubism/)。

如果您在考虑使用 redis 的地方使用石墨或立方体，那么您将拥有一些让您非常接近“开箱即用”的东西。

大部分考虑围绕数据和可视化。我会考虑数据是否以及如何旋转。换句话说，用户是否总是看到相同的视图，或者他们是否可以“按机器”、“按地理”和“按目的”看到聚合数据。

# javascript - JavaScript 什么时候执行？

> ID：14466516
> 
> 赞同：1
> 
> 时间：2013-01-22T19:29:56.180
> 
> 标签：javascript, execution

假设我在 html 正文顶部包含一个脚本，该脚本未定义任何函数或将任何触发器附加到任何内容。它只有一些简单的旧代码，例如

```
var x = 0;
while (x < 4){
 x++;
} 
```

这就是整个剧本。尽管它不接受任何输入或给出任何输出，但它何时执行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T19:31:16.143

就像所有其他脚本一样，它将在 HTML 解析器遇到`<script>`节点时执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T19:31:32.853

脚本块按从上到下的顺序执行，因此如果它位于页面顶部，它将首先执行。

# telerik - 在 InsertItemTemplate 的 GridTemplateColumn 中填充 ListBox

> ID：14466519
> 
> 赞同：0
> 
> 时间：2013-01-22T19:30:12.087
> 
> 标签：telerik, radgrid

如何填充位于 InsertItemTemplate 中的列表框？在有人单击添加新记录按钮后，我需要填充它，并且我需要在他们单击后在后面的代码中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:40:36.560

有几种方法可以做到这一点。我更喜欢[模板编辑表单](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/templateformupdate/defaultcs.aspx)。这是示例。

```
<telerik:RadGrid ... OnItemDataBound="RadGrid1_ItemDataBound">
   <MasterTableView DataKeyNames="Id" CommandItemDisplay="Top">
      <Columns>
         <telerik:GridButtonColumn .../>
      </Columns>
      <EditFormSettings ColumnNumber="1" EditFormType="Template">
         <FormTemplate>
            <asp:ListBox .../>                       
         </FormTemplate>
      </EditFormSettings>               
   </MasterTableView>
</telerik:RadGrid> 
```

更新：

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
   if (e.Item is GridEditFormItem && e.Item.IsInEditMode)
   {
      var item = e.Item as GridEditFormItem;    

      var listBox1 = item.FindControl("ListBox1") as ListBox;  

      // Fills listbox with data
      listBox1.DataSource = listboxdata;
      listBox1.DataBind();
   }
} 
```

# android - android-maven-plugin - 如何设置 apkMetaIncludes？

> ID：14466520
> 
> 赞同：2
> 
> 时间：2013-01-22T19:30:13.477
> 
> 标签：android, android-maven-plugin

[http://maven-android-plugin-m2site.googlecode.com/svn/apk-mojo.html#apkMetaIncludes](http://maven-android-plugin-m2site.googlecode.com/svn/apk-mojo.html#apkMetaIncludes)

> 将附加 META-INF 资源打包到 apk 中的模式。APK 构建器会过滤这些资源，并且不会将它们包含在 apk 中。这会导致依赖这些资源的依赖库的不良行为，例如服务发现不起作用。通过指定此模式，android 插件将这些资源添加到最终的 apk 中。该模式与 META-INF 相关，即必须使用：

```
<apkMetaIncludes>
    <metaInclude>services/**</metaInclude>
</apkMetaIncludes> 
```

META-INF 文件夹位于 src 文件夹下

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>br.com.alpha9.teste</groupId>
    <artifactId>testemvn</artifactId>
    <version>1.0.0</version>
    <packaging>apk</packaging>
    <name>testemvn</name>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.5.0</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <path>/Applications/android-sdk-macosx</path>
                        <platform>13</platform>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                    <apkMetaIncludes>
                        <metaInclude>services/**</metaInclude>
                    </apkMetaIncludes>
                </configuration>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>4.0.1.2</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</project> 
```

最后，我的 APK 没有 services 文件夹！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:41:37.190

这在 javadoc 中实际上是错误的。我会修好它。与此同时，这应该有效

```
<configuration>
  <apk>
    <metaIncludes>
      <metaInclude>services/**</metaInclude>
    </metaIncludes>
  </apk>
</configuration> 
```

当然，我也欢迎反馈/确认它的工作原理以及可能更新文档的拉取请求..

# breeze - 序列化 byte[] 时出错

> ID：14466522
> 
> 赞同：0
> 
> 时间：2013-01-22T19:30:16.380
> 
> 标签：breeze

在我们的后备数据库中，我们有一个类型为 varbinary(max) 的数据字段。使用 Breeze，我们可以在该字段中保存数据，但是，当我们想将其回调时，我们会遇到错误。在我们生成的模型中，该字段被映射到一个字节[]。但是，当 Breeze 尝试将其序列化为字符串时，它会引发错误。

```
$id: "1",
$type: "System.Web.Http.HttpError, System.Web.Http",
Message: "An error has occurred.",
ExceptionMessage: "The specified cast from a materialized 'System.String' type to the 'System.Byte[]' type is not valid.",
ExceptionType: "System.InvalidOperationException",
StackTrace: " at System.Data.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal) at System.Data.Common.Internal.Materialization.Shaper.GetColumnValueWithErrorHandling[TColumn](Int32 ordinal) at lambda_method(Closure , Shaper ) at System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper) at System.Data.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.MoveNext() at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) at Breeze.WebApi.ODataActionFilter.OnActionExecuted(HttpActionExecutedContext actionExecutedContext) at System.Web.Http.Filters.ActionFilterAttribute.CallOnActionExecuted(HttpActionContext actionContext, HttpResponseMessage response, Exception exception) at System.Web.Http.Filters.ActionFilterAttribute.<>c__DisplayClass2.<System.Web.Http.Filters.IActionFilter.ExecuteActionFilterAsync>b__0(HttpResponseMessage response) at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass41`2.<Then>b__40(Task`1 t) at System.Threading.Tasks.TaskHelpersExtensions.ThenImpl[TTask,TOuterResult](TTask task, Func`2 continuation, CancellationToken cancellationToken, Boolean runSynchronously)" 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:03:12.710

我一直无法重现这一点。

Breeze 能够获取服务器端 byte[] 并将其转换为客户端上的字符串。每当返回 Employee 实体时，您都可以在微风的“DocCode”示例中看到一个示例。Employee 类型有一个 Photo 属性，该属性的服务器端数据类型为“byte[]”，它作为“字符串”返回给微风客户端。

我认为您遇到的是服务器端物化问题，您试图将数据库上的二进制 blob 物化为字符串属性。如果您的模型属性键入为“字符串”而不是“字节 []”，则会发生这种情况。

希望这可以帮助。

# html - 表超出 div

> ID：14466528
> 
> 赞同：18
> 
> 时间：2013-01-22T19:30:25.707
> 
> 标签：html, css, html-table

我的 Spring MVC 应用程序中的布局有问题。在我的应用程序中，即使我为此 div 设置了宽度参数，包含在 div 中的表也会退出。我尝试了许多我用谷歌搜索但没有成功的解决方案。这是我的应用程序中的 jsp 文件、CSS 文件和屏幕。正如您所看到的，当表格中的文本很长时，它不会换行（如我所愿）。

CSS 文件：

```
 th,td {
    border-style: solid;
    border-width: 5px;
    border-color: #BCBCBC;
}

#all {
    width: 500px;
}

#tablediv {
    width: 400px;
    float: left;
} 
```

jsp文件：

```
 <body>
<h3>All your notes:</h3>
<c:if test="${!empty notes}"/>

<form method="post" action="manage_note">

<div id="all">
<div id="tablediv">

<table>

<tr>
    <th class="widther">Note date</th>
    <th>Description</th>
</tr>

<c:forEach items="${notes}" var="note">

<tr>
    <td class="widther">${note.date} ${note.time}</td>
    <td >${note.description}</td>
    <td><input type="radio" name="chosen_note" value="${note.note_id}"></td>
</tr>

</c:forEach>

</table>
</div>

<div id="addbutton">
    <input name="add_note" type="submit" value="Add note"/>
</div>

</div>

<div id="restbuttons">
    <input name="edit_note" type="submit" value="Edit"/>
    <input name="delete_note" type="submit" value="Delete"/>
</div>

</form>

</body> 
```

这是屏幕：

[http://imageshack.us/photo/my-images/203/tableproblem.png/](http://imageshack.us/photo/my-images/203/tableproblem.png/)

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-22T19:47:35.380

您需要做两件事来防止表格变得太大。

1）设置`table-layout`为`fixed`：

```
table {
    table-layout: fixed;
    width: 100%;   
} 
```

2) 设置`word-wrap`为`break-word`td/th

```
th,td {
    border-style: solid;
    border-width: 5px;
    border-color: #BCBCBC;
    word-wrap: break-word;
} 
```

您可以在这里看到一个工作示例：http: [//jsfiddle.net/d6WL8/](http://jsfiddle.net/d6WL8/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-05-28T06:44:20.323

我有一个简单的解决方案，希望有一天它可以帮助某人。

任何从容器中流出的表，只需用`div`标签封装它`style="overflow:auto"`

```
<div style="overflow:auto">
<table>
.
.
.
</table>
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T19:45:15.247

hoooman 的答案是正确的，但也许你的意思是别的。您可以在该表上使用 overflow:auto 并指定宽度，如果内容超出表，它将创建滚动条。

还有overflow-x和overflow-y来指定哪个轴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-12T23:52:57.187

如果是长文本字符串，例如 URL，您可以使用：

```
word-wrap: break-word; 
```

这将打破列末尾的“包装”文本，而不是像没有空格的开箱即用的**断词（****例如长网址**）

并添加：

```
overflow-y:hidden; 
```

这将防止溢出的文本与下一行重叠

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T19:42:07.363

那是因为您有 1 个大约 100 个字符长的单词，请尝试在其中间放置一个空格，它应该会自行修复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-03T11:20:53.047

我也遇到了这个问题，在 css 中添加了这个类并修复了 table { margin-left:0 }

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-16T19:46:15.927

这是一个老问题，但我有一个更简单的方法。

**只需添加**：

```
th, td {
    word-break: break-word; /*or you can use word-break:break-all*/
    min-width: 50px; /*set min-width as needed*/
} 
```

如果您已经设置为，则最小**宽度**`th`或`td`将不起作用。只需删除它。`table``table-layout:fixed`

或者如果你找不到旧的 css 则添加这个`table-layout`

```
table {
    table-layout:unset !important;
} 
```

如果您希望代码仅在您想要的页面上工作，请确保在表格之前提供额外的**类**/ **ID 。**

**示例**：

```
.entry-content table {
    table-layout: unset !important;
}
.entry-content th, .entry-content td {
    word-break: break-word;
    min-width: 50px;
} 
```

希望对大家有所帮助。祝你好运！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-04T13:18:36.983

`max-width`一起设置`word-wrap`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-06T11:12:23.233

有时会在 Div 中添加一个表。在我的情况下，我给了 padding-right:0px`<div>`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-03-19T02:01:17.923

作为表格一部分的某些单元格值会超出表格。

在尝试了上面给出的多个选项后，**将表格宽度减小到 90% 解决了这个问题。**

```
table {
  border-collapse: collapse;
  width: 90%;
} 
```

# php - 显示低于 10 的计数中的两位数？

> ID：14466529
> 
> 赞同：-1
> 
> 时间：2013-01-22T19:30:26.533
> 
> 标签：php, count

> **可能重复：**
> [字符串中的零填充数字](https://stackoverflow.com/questions/324358/zero-pad-digits-in-string)

我正在使用这个计数脚本来显示用户拥有的新消息的数量。该脚本通过使用 count 显示用户拥有的新消息的数量值。

目前，如果数字低于 10，数字将显示为 1、2、3 等，但我希望它以两位数显示为 01、02、03、04 等。

这可能吗。这是我到目前为止的代码？

```
<?php
$check_new_messages_set = check_new_messages();
while ($new = mysql_fetch_array($check_new_messages_set)) {

echo "<div class=\"msg-notify\">". $new['COUNT(id)'] ."</div>"; 
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T19:31:53.740

使用[sprintf()](http://php.net/sprintf)进行简单的填充：

```
$padded = sprintf('%02d', $number); // 2 -> 02 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:34:10.990

Another option is str_pad, either way you're going to end up with a string but if its just for display that's not a problem

# python - 用于周期性掩码的“numpy.tile”的替代方案

> ID：14466534
> 
> 赞同：6
> 
> 时间：2013-01-22T19:30:41.390
> 
> 标签：python, numpy

我有一个图像，存储在一个`uint8`形状为 s的 numpy 数组中`(planes, rows, cols)`。我需要将它与存储在掩码中的值进行比较，掩码也是`uint8`s，形状为`(mask_rows, mask_cols)`。虽然图像可能非常大，但遮罩通常很小，通常`(256, 256)`要平铺`image`。为了简化代码，让我们假设`rows = 100 * mask_rows`和`cols = 100 * mask_cols`.

我目前处理这个阈值的方式是这样的：

```
out = image >= np.tile(mask, (image.shape[0], 100, 100)) 
```

在被 a扇耳光之前，我可以通过这种方式处理的最大数组`MemoryError`比`(3, 11100, 11100)`. 我想它的方式，以这种方式做事，我有多达三个巨大的数组共存于内存中：`image`， tiled`mask`和 my return `out`。但是平铺的蒙版是相同的小数组，被复制了 10,000 多次。因此，如果我可以节省内存，我将只使用 2/3 的内存，并且应该能够处理大 3/2 的图像，因此大小约为`(3, 13600, 13600)`. 顺便说一句，如果我使用

```
np.greater_equal(image, (image.shape[0], 100, 100), out=image) 
```

我（失败）尝试利用周期性特性`mask`来处理更大的数组是`mask`用周期性线性数组索引：

```
mask = mask[None, ...]
rows = np.tile(np.arange(mask.shape[1], (100,))).reshape(1, -1, 1)
cols = np.tile(np.arange(mask.shape[2], (100,))).reshape(1, 1, -1)
out = image >= mask[:, rows, cols] 
```

对于小型阵列，它确实产生与另一个阵列相同的结果，尽管速度降低了 20 倍（！！！），但对于较大的尺寸，它非常无法执行。它最终不会`MemoryError`导致 python 崩溃，即使对于其他方法处理没有问题的值也是如此。

我认为正在发生的事情是 numpy 实际上是在构造`(planes, rows, cols)`要索引的数组`mask`，所以不仅没有节省内存，而且由于它是一个`int32`s 数组，它实际上需要四倍的空间来存储......

关于如何解决这个问题的任何想法？为了省去你的麻烦，在下面找到一些沙盒代码来玩：

```
import numpy as np

def halftone_1(image, mask) :
    return np.greater_equal(image, np.tile(mask, (image.shape[0], 100, 100)))

def halftone_2(image, mask) :
    mask = mask[None, ...]
    rows = np.tile(np.arange(mask.shape[1]),
                   (100,)).reshape(1, -1, 1)
    cols = np.tile(np.arange(mask.shape[2]),
                   (100,)).reshape(1, 1, -1)
    return np.greater_equal(image, mask[:, rows, cols])

rows, cols, planes = 6000, 6000, 3
image = np.random.randint(-2**31, 2**31 - 1, size=(planes * rows * cols // 4))
image = image.view(dtype='uint8').reshape(planes, rows, cols)
mask = np.random.randint(256,
                         size=(1, rows // 100, cols // 100)).astype('uint8')

#np.all(halftone_1(image, mask) == halftone_2(image, mask))
#halftone_1(image, mask)
#halftone_2(image, mask)

import timeit
print timeit.timeit('halftone_1(image, mask)',
                    'from __main__ import halftone_1, image, mask',
                    number=1)
print timeit.timeit('halftone_2(image, mask)',
                    'from __main__ import halftone_2, image, mask',
                    number=1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T21:28:27.747

我几乎会向您指出[滚动窗口](https://gist.github.com/3866040)类型的技巧，但是对于这个简单的非重叠事物，正常的重塑也可以。（这里的重塑是安全的，numpy*永远不会*为它们复制）

```
def halftone_reshape(image, mask):
    # you can make up a nicer reshape code maybe, it is a bit ugly. The
    # rolling window code can do this too (but much more general then reshape).
    new_shape = np.array(zip(image.shape, mask.shape))
    new_shape[:,0] /= new_shape[:,1]
    reshaped_image = image.reshape(new_shape.ravel())

    reshaped_mask = mask[None,:,None,:,None,:]

    # and now they just broadcast:
    result_funny_shaped = reshaped_image >= reshaped_mask

    # And you can just reshape it back:
    return result_funny_shaped.reshape(image.shape) 
```

而且由于时间就是一切（不是真的但是......）：

```
In [172]: %timeit halftone_reshape(image, mask)
1 loops, best of 3: 280 ms per loop

In [173]: %timeit halftone_1(image, mask)
1 loops, best of 3: 354 ms per loop

In [174]: %timeit halftone_2(image, mask)
1 loops, best of 3: 3.1 s per loop 
```

# sql - 用于 UNION 大量表的 SQL 脚本

> ID：14466537
> 
> 赞同：1
> 
> 时间：2013-01-22T19:30:50.420
> 
> 标签：sql, postgresql, plpgsql, postgresql-8.3

在这个例子中，我必须对从 2012-12-17 到 2012-10-30 的大量不相交的每日表格进行联合。这里的代码变得丑陋是片段：

```
CREATE table map 
with (appendonly=true, compresstype = quicklz)
AS
 SELECT * FROM final_map_12_17
    UNION ALL
 SELECT * FROM final_map_12_16
    UNION ALL
     SELECT * FROM final_map_12_15
    UNION ALL
     SELECT * FROM final_map_12_14
    UNION ALL
....
SELECT * FROM final_map_10_30; 
```

我可以用序列或 PL/PGSQL 函数来做这种事情，而不是手动写出每个单独的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:39:26.647

没有可以执行此操作的 SQL 函数。

我建议您将表格列表放在 Excel 中。然后输入一个公式，例如：

```
="select * from "&a1&" union all" 
```

把这个公式抄下来。瞧！您几乎拥有视图定义。

将包含这些语句的列复制到 SQL 命令工具中。`create view`在顶部添加。去掉`union all`最后的。瞧。您可以轻松创建视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:08:10.250

Have a think about redefining your list of tables as a partitioned table, with a single master table and multiple child tables. [http://www.postgresql.org/docs/9.2/static/ddl-partitioning.html](http://www.postgresql.org/docs/9.2/static/ddl-partitioning.html)

Alternatively, maintain a view to union all the tables together, and when you add a new table to the schema add it to the view also.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:44:53.393

You can loop over date range in plpgsql function like this:

```
create or replace function add_map(date_from date, date_to date)
returns void language plpgsql as $$
declare
    day date;
begin
    for day in 
        select generate_series(date_from, date_to, '1 day')
    loop
        execute 'insert into map select * from final_map_'|| 
            to_char(extract(month from day), '09')|| '_' || 
            to_char(extract(day from day), '09');
    end loop;
end; $$; 
```

Calling the function:

```
-- create table map (....);
select add_map('2012-11-30', '2012-12-02'); 
```

is equivalent to:

```
insert into map select * from final_map_11_30;
insert into map select * from final_map_12_01;
insert into map select * from final_map_12_02; 
```

# ruby - 在 Ruby 中使用 Selenium WebDriver 将 IE9 更改为 IE8

> ID：14466538
> 
> 赞同：2
> 
> 时间：2013-01-22T19:30:51.050
> 
> 标签：ruby, internet-explorer, selenium, webdriver, ie-developer-tools

我正在将 Selenium WebDriver 与 Ruby 一起使用，并尝试创建一个将在 IE8 中测试的脚本。我无法找到有关如何将 iedriver 设置为以 IE8 模式启动或如何在 webdriver 启动后将其切换到 IE8 的答案。我在 Windows 7 上，所以我只有 IE9 可用。我目前用于在 IE9 中启动 webdriver 的代码是

```
 $driver = Selenium::WebDriver.for :ie 
```

任何帮助将不胜感激。我看了高低，但找不到这个问题的任何答案。如果您需要我提供更多信息，我会很乐意提供。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T06:38:13.147

如果要在运行时告诉 IE 版本，可以使用`DesiredCapabilities.`

```
 DesiredCapabilities ieCapabilities = null;
  ieCapabilities = DesiredCapabilities.internetExplorer();
  ieCapabilities.setBrowserName("internet explorer");
  ieCapabilities.setVersion("Version Number");
  driver = new InternetExplorerDriver(ieCapabilities); 
```

有关 `DesiredCapabilities`使用此链接的更多信息[http://code.google.com/p/selenium/wiki/DesiredCapabilities](http://code.google.com/p/selenium/wiki/DesiredCapabilities)。

在评论中你说我需要 IE 8 和 9。实际上不可能，Windows 目前支持在一个盒子中只安装一个 IE 版本。IEDriver 使用已安装的 IE 版本启动。

如果您想使用多个版本的 IE 进行测试，那么最好选择`Windows Virtual Machines`. 您可以使用`RemoteWebdriver`实例与虚拟机对话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:17:52.327

实际上，Selenium WebDriver 目前不支持此功能。目前有一个增强请求，要求将 IE 模式实现为 Manigandan 评论中引用的 DesiredCapabilities 功能的一部分。

您可以在此处遵循此增强请求：[http ://code.google.com/p/selenium/issues/detail?id=2564](http://code.google.com/p/selenium/issues/detail?id=2564)

增强请求中提到的其他可能的解决方案是操作 FEATURE_BROWSER_EMULATION 注册表项（请参阅[http://msdn.microsoft.com/en-us/library/ee330730(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ee330730(v=vs.85).aspx)）或使用键盘命令打开 Developer工具并从那里选择模式（我不确定这个解决方案的效果如何，因为 Python 中的解决方法需要将 WebDriver 对象转换为 Selenium 1.0 对象）。

# memory - 如何将所有可用的共享内存分配给 CUDA 中的单个块？

> ID：14466540
> 
> 赞同：0
> 
> 时间：2013-01-22T19:30:56.550
> 
> 标签：memory, cuda, gpu

我想将 SM 的所有可用共享内存分配给一个块。我这样做是因为我不希望将多个块分配给同一个 SM。我的 GPU 卡有 64KB（共享+L1）内存。在我当前的配置中，48KB 分配给共享内存，16KB 分配给 L1。我编写了以下代码来使用所有可用的共享内存。

```
 __global__ void foo()
{

  __shared__ char array[49152];
...

} 
```

我有两个问题：

1.  如何确保所有共享内存空间都已用完？
2.  我可以将“48K”增加到更高的值（不会出现任何错误或警告）。有没有人可以证明这一点？

提前致谢，

伊曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:09:48.290

1.  您可以从中读取可用设备共享内存的大小`cudaDeviceProp::sharedMemPerBlock`，您可以通过调用获得`cudaGetDeviceProperties`
2.  您不必指定数组的大小。相反，您可以动态传递共享内存的大小作为第三个内核启动参数。

“时钟”CUDA SDK 示例说明了如何在启动时指定共享内存大小。

# c++ - 如何在 Qt 控制台应用程序中使用 GetNativeSystemInfo

> ID：14466543
> 
> 赞同：2
> 
> 时间：2013-01-22T19:31:07.210
> 
> 标签：c++, qt, winapi

我正在尝试使用 GetNativeSystemInfo api 来获取操作系统的体系结构（如果它是 32 位或 64 位操作系统）但是当我尝试编译代码时出现此错误：'GetNativeSystemInfo' 未在此范围内声明，我的代码有什么问题？

```
#include <QtCore/QCoreApplication>
#include <QDebug>
#include <windows.h>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    _SYSTEM_INFO sysinfo;
    GetNativeSystemInfo(&sysinfo);
    if (sysinfo.wProcessorArchitecture == PROCESSOR_ARCHITECTURE_INTEL)
    {
        qDebug() << "win32";
    }
    if (sysinfo.wProcessorArchitecture == PROCESSOR_ARCHITECTURE_AMD64)
    {
        qDebug() << "win64";
    }

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:42:15.050

`_WIN32_WINNT`使用定义为`0x0501`或以上进行编译。

要么`#define _WIN32_WINNT 0x0501`，要么使用适当的编译器选项（`/D_WIN32_WINNT=0x0501`对于 msvc）。

[在使用 Windows 标头 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx)中查看更多信息。

# php - PHP array_push 导致脚本停止

> ID：14466544
> 
> 赞同：-2
> 
> 时间：2013-01-22T19:31:16.070
> 
> 标签：php, arrays

我有两个数组，一个包含用户信息，另一个包含关于我不想被选中的第一个数组中的用户的 id。

我想从第一个数组中插入不在第二个数组中的新数组数据。

```
while ( count( $new_array) < 50 ) 
    {
        $index = array_rand($array_1);

        if ( ! in_array( $array_1[$index]['id'], $array_2) ) 
        {
            array_push( $new_array, $array_1[$index] );
            array_push( $array_2, $array_1[$index]['id'] );
        }
    } 
```

当从 $array_1 中选择数据时，我将它们插入到 $array_2 中，以免再次被选中。如果 while 循环运行不超过 12 次，但运行时间超过 30 秒导致脚本停止，则此方法有效。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:47:57.640

与其尝试跟踪已从 array1 中随机选择的索引，不如在选择后从数组中删除该项目。如果您需要保持原始数组不变，请先复制它。

# modx - Modx - 将自定义字段添加到 mod_site_content

> ID：14466548
> 
> 赞同：0
> 
> 时间：2013-01-22T19:31:21.267
> 
> 标签：modx, modx-revolution

是否可以添加自定义字段`modx_site_content`？我想要完成的是添加一个字段`t_id`。我已经在数据库中添加了这个。但是，当我使用保存它时：`$object->save();`没有为该字段保存任何内容，它只是出现为`Null`.

我正在使用的版本是：MODX Revolution 2.2.4-pl（2012 年 6 月 14 日）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:38:21.313

实际上 - 我之前已经回答过这个问题。您想创建一个单独的表和架构。

[modx进化外部数据库](https://stackoverflow.com/questions/13197979/modx-evolution-external-database)

但是 - 看起来您想添加一个字段，以便您可以将其作为 modx 中页面/模板的一部分调用？您可能必须编写一个插件来在提取资源的同时提取该数据。

# android - Robolectric：findViewById 提供视图，但 performClick() 返回 false

> ID：14466556
> 
> 赞同：1
> 
> 时间：2013-01-22T19:31:51.360
> 
> 标签：android, testing, robolectric, findviewbyid

我正在使用 Robolectric 在 android 应用程序上执行单元测试。问题很简单：我可以使用 findViewById 获取我的 Button，但是调用它的任一`performClick()`方法或`Robolectric.clickOn()`将返回 false。

然而，该按钮完美运行，通过应用程序或 Robotium 单元测试进行测试......

这是未通过的测试代码：

```
@RunWith(RobolectricTestRunner.class)    
public class RegisterActivityTest {

private MainActivity mainActivity;
private LoginActivity loginActivity;

@Before
public void setUp(){
    mainActivity=new MainActivity();
    mainActivity.onCreate(null);
    mainActivity.setContentView(R.layout.main);
  }

@Test
public void testButton() throws Exception {
    Button buttonPayment=(Button)mainActivity.findViewById(R.id.btn_payment);
    assertNotNull(buttonPayment); // will pass test ( ---> the view is a button and exists ) 
    assertTrue(buttonPayment.performClick()); // raise AssertionError
    assertTrue(Robolectric.clickOn(buttonPayment)); // raise AssertionError as well
  }
} 
```

谢谢大家。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:35:44.357

根据[performClick() 的文档，](http://developer.android.com/reference/android/view/View.html#performClick%28%29)如果您为按钮分配了 OnClickListener，该方法将返回 true。

...你是否？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:44:10.990

通常你会`setContentView`在你的`onCreate`方法中调用。`setContentView`因此，您的方法中的调用`setUp`是多余的，可能会导致问题。

# c++ - 提取cpp中所有包含的文件

> ID：14466563
> 
> 赞同：5
> 
> 时间：2013-01-22T19:32:13.900
> 
> 标签：c++, include

我有 .cpp 文件（文本）。我想获取包含（#include）到此文件的所有文件名的列表。最好的方法是什么？（需要用 C++ 实现）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:37:19.297

`gcc -M source.cpp`

如果您不关心系统包含的内容，请替换`-M`为。`-MM`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:34:56.973

假设你有一个“find”或“grep”，大致如下：

`g++ -E source.cpp | grep '\# 1 '`

# php - autoapproval with Lightopenid (after inital approval)

> ID：14466565
> 
> 赞同：0
> 
> 时间：2013-01-22T19:32:16.203
> 
> 标签：php, authentication, oauth, openid

I am using [LightOpenId](http://code.google.com/p/lightopenid/) which basically combines `OpenID` and `OAuth1.0`.

The approval works fine, however, my customers need to approve every single time. I would like `OpenID` to realise, that the customer already approved (basically utilizing the checkbox **"remember this approval"**) and go through without showing the approving mask again.

How can this be done?

Thanks, Christian

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:49:11.750

我在我的应用程序中忽略了这个问题一段时间，几乎错过了你的解决方案，因为它在评论中。

可以在处理程序的第一部分应用“修复”，而无需实际修改 LightOpenId 代码，因此：

```
 $mysiteurl = 'https://my.site.url/'; // note trailing '/' included

  $openid = new LightOpenID($mysiteurl); // <- the trailing '/' onwards is stripped internally
  if (!$openid->mode) {
      $openid->required = array(
        'namePerson/first',
        'namePerson/last'
         // etc...
      );
      // redirects to google openid provider
      $openid->identity = 'https://www.google.com/accounts/o8/id';
      $openid->realm = $mysiteurl; // <- ADD THIS LINE - resets realm with the trailing '/'
      header('Location: ' . $openid->authUrl());
      return;

  } elseif ($openid->mode == 'cancel') {
    header('Location: '. $mysiteurl.'cancelled.php');
    return;

  } elseif (!$openid->validate()) {
    header('Location: '. $mysiteurl.'failed.php');
    return;
  }

  header('Location: '. $mysiteurl.'success.php');
  return; 
```

# java - MainActivity Code Executed before onActivityResult() call

> ID：14466567
> 
> 赞同：1
> 
> 时间：2013-01-22T19:32:22.507
> 
> 标签：java, android

I am trying to call other activity to get the result from main activity for contact number. Once the onActivityresult assign the value to contactNo, sending sms message.

However my problem is smsmanager code after getContactselect() method is invoked immediately before the onActivityResult completes. because of this contact number is assigned as null.

```
Main Activity code:

public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
Object o = lv1.getItemAtPosition(position);
ItemDetails obj_itemDetails = (ItemDetails)o;

...
...                                     
**getContactselect();**
**smsManager.sendTextMessage(contactNo, null, obj_itemDetails.getMessage(), null, null);**
}
...

public void getContactselect() {        
Intent ourIntent = new Intent(BreakOut.this,ContactsSelector.class);    
startActivityForResult(ourIntent,CONTACT_SELECT);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data){
        switch(requestCode) {
        case CONTACT_SELECT: 
             if (resultCode == RESULT_OK) {
                 contactNo = data.getStringExtra("ContactDetails");
                 Toast.makeText(this, "You have chosen the contact: " + " " + contactNo, Toast.LENGTH_LONG).show();
                 break;     
             }
        }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T19:34:46.700

意图是异步启动的。这就是为什么你有 onActivityResult() 方法。无论你想在你调用的 Activity 返回后完成什么，都必须在那里完成。

# c++ - xerces c++ 和 cmake

> ID：14466571
> 
> 赞同：4
> 
> 时间：2013-01-22T19:32:48.200
> 
> 标签：c++, cmake, xerces

我试图用 xerces c++ 3.1 和 cmake 构建一个 Xerces 的小例子，但我只遇到了链接问题。这是我的 cmkelists.txt：

```
//============================================================================
project(ConfiguradorXerces)
cmake_minimum_required(VERSION 2.8)
include_directories (/home/ricardo/Desktop/librerias/xerces/xerces-c-3.1.1/src)
link_directories (/home/ricardo/Desktop/librerias/xerces/xerces-c-3.1.1/src/.libs)
link_directories (/home/ricardo/Desktop/librerias/xerces/xerces-c-3.1.1/src/)
set ( XercesLib  xerces-c )
aux_source_directory(. SRC_LIST)

add_executable(${PROJECT_NAME} ${SRC_LIST})
target_link_libraries(${XercesLib})
//============================================== 
```

//================================================

```
#include <iostream>
#include <xercesc/util/PlatformUtils.hpp>
using namespace xercesc;
using namespace std;
int main()
{
    try {
        XMLPlatformUtils::Initialize();
      }
      catch (const XMLException& toCatch) {
        // Do your failure processing here
        return 1;
      }

      // Do your actual work with Xerces-C++ here.

      XMLPlatformUtils::Terminate();

      // Other terminations and cleanup.
      return 0;
} 
```

//================================================

这是我的控制台输出：

```
CMakeFiles/ConfiguradorXerces.dir/main.cpp.o: In function `main':
main.cpp:(.text+0x25): undefined reference to `xercesc_3_1::XMLUni::fgXercescDefaultLocale'
main.cpp:(.text+0x2a): undefined reference to `xercesc_3_1::XMLPlatformUtils::Initialize(char const*, char const*, xercesc_3_1::PanicHandler*, xercesc_3_1::MemoryManager*)'
main.cpp:(.text+0x2f): undefined reference to `xercesc_3_1::XMLPlatformUtils::Terminate()'
CMakeFiles/ConfiguradorXerces.dir/main.cpp.o:(.gcc_except_table+0x10): undefined reference to `typeinfo for xercesc_3_1::XMLException'
collect2: error: ld returned 1 exit status
make[2]: *** [ConfiguradorXerces] Error 1
make[1]: *** [CMakeFiles/ConfiguradorXerces.dir/all] Error 2
make: *** [all] Error 2
16:28:55: The process "/usr/bin/make" exited with code 2.
Error while building/deploying project ConfiguradorXerces (target: Desktop)
When executing step 'Make' 
```

// 我在想我的 cmakeLsits.txt 不完整，有一个特殊的设置必须完成？？提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:35:59.073

我很确定`target_link_libraries()`宏接受一个目标作为它的第一个参数：

```
 target_link_libraries(<target> [item1 [item2 [...]]]
                        [[debug|optimized|general] <item>] ...) 
```

你忘了指定它。所以，而不是`target_link_libraries(${XercesLib})`，尝试`target_link_libraries(${PROJECT_NAME} ${XercesLib})`。

希望这能解决它。

# mysql - Multiple WHERE in MySQL statement is giving me trouble

> ID：14466573
> 
> 赞同：1
> 
> 时间：2013-01-22T19:32:49.737
> 
> 标签：mysql, where

I'm using CodeIgniter's db class to create the query.

The query ends up looking like this;

```
 SELECT `user_id`, `firstname`, `lastname`, `email`, `school_id`, `country_id`
    FROM (`users`)
    WHERE `user_id` != '1'
    AND `firstname` =  'thomas'
    OR `lastname` =  'thomas'
    OR `email` =  'thomas'
    OR `firstname` =  'jefferson'
    OR `lastname` =  'jefferson'
    OR `email` =  'jefferson' 
```

In this case a user has searched for "thomas jefferson" and the user's own id is 1\. So to make sure the user can't search for himself it checks so that the user_id isn't 1.

I know the query isn't that good but it works perfectly for what I need it for, as well as me being too lazy to do it correctly.

The PHP-code behind this all is

```
 $this->db->select('user_id, firstname, lastname, email, school_id, country_id')->from('users');
    $this->db->where('user_id !=', $this->session->userdata('user_id'));
    for ($i = 0; $i < count($searchQuery); $i++) {
        if ($i == 0) {
            $this->db->where('firstname', $searchQuery[$i])->or_where('lastname', $searchQuery[$i])->or_where('email', $searchQuery[$i]);
        } else {
            $this->db->or_where('firstname', $searchQuery[$i])->or_where('lastname', $searchQuery[$i])->or_where('email', $searchQuery[$i]);
        }
    }
    $this->db->limit(10);
    $query = $this->db->get(); 
```

I'm 99% positive that the

```
 WHERE `user_id` != '1'
    AND(<-- this) `firstname` = ... 
```

is wrong but I can't seem to figure out a different way to do it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:41:07.627

看一下sql server中的[Operation Precedence](http://msdn.microsoft.com/en-us/library/ms190276.aspx)。
在那里你会发现`AND`操作是在操作之前评估的`OR`。

这意味着您的查询首先评估`AND`：

`user_id != '1' AND firstname = 'thomas'`

接着

`OR blablablablabla (the rest of the query)`

为了使它正确，它就像这样：

```
 SELECT `user_id`, `firstname`, `lastname`, `email`, `school_id`, `country_id`
    FROM (`users`)
    WHERE `user_id` != '1'
    AND (`firstname` =  'thomas'
    OR `lastname` =  'thomas'
    OR `email` =  'thomas'
    OR `firstname` =  'jefferson'
    OR `lastname` =  'jefferson'
    OR `email` =  'jefferson') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:47:48.990

您必须以这种形式组织括号... SELECT `user_id`, `firstname`, `lastname`, `email`, `school_id`, `country_id` FROM ( `users`) WHERE `user_id`!= '1' AND( `firstname`= 'thomas' OR `lastname`= 'thomas' OR `email`= 'thomas' OR `firstname`= 'jefferson' OR `lastname`= '杰斐逊' OR `email`= '杰斐逊'）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:55:28.943

感谢您的回答！我通过这样做来修复它；

```
 $sql = "SELECT user_id, firstname, lastname, email, school_id, country_id FROM users WHERE user_id != " . $this->session->userdata('user_id');
    $firstname = array();
    $lastname = array();
    $email = array();

    foreach ( $searchQuery as $a )
    {
        if ( ! empty($a) )
        {
            $firstname[] = "'".$a."'";
            $lastname[] = "'".$a."'";
            $email[] = "'".$a."'";
        }
    }
    $firstname = implode(',', $firstname);
    $lastname = implode(',', $lastname);
    $email = implode(',', $email);

    $sql .= " AND(firstname IN($firstname) OR lastname IN($lastname) OR email IN($email))";

    $query = $this->db->query($sql); 
```

编辑：刚刚注意到我还没有真正清除注射中的字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:42:11.513

像这样试试

```
SELECT `user_id`, `firstname`, `lastname`, `email`, `school_id`, `country_id`
FROM (`users`)
WHERE `user_id` != 1 
AND 
( `firstname` =  'thomas'
OR `lastname` =  'thomas'
OR `email` =  'thomas'
OR `firstname` =  'jefferson'
OR `lastname` =  'jefferson'
OR `email` =  'jefferson' ) 
```

# git - Gerrit reject change in GUI

> ID：14466575
> 
> 赞同：0
> 
> 时间：2013-01-22T19:32:53.720
> 
> 标签：git, version-control, gerrit

How does one configure access in the Gerrit UI to allow check ins to be rejected? I know the general rule of thumb is if a piece of code has a certain score it should be ignored, but is there a clean way to reject a branch outright? I ask because I just had to go through an awful merge/approve/rebase cycle in Gerrit.

Use of the abandon button, did not remove the "rejected" change from the dependency tree.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:54:00.280

如果出现完全错误的情况，通常会通过 Web UI 中的“放弃”按钮放弃。这是你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:52:12.733

您可以设置一些持续集成魔法，自动执行诸如运行 lint 检查器、运行单元测试等事情，然后让这些事情的结果触发 gerrit 中的不同行为。在维基媒体基金会，我们使用类似的东西来自动标记错误的提交——我们不会直接拒绝它们，但可能会使用它来给出低分以防止合并，直到真人有机会查看提交。我们使用 Jenkins 来处理所有的自动作业运行。快速搜索['gerrit and jenkins' 会](https://www.google.com/search?q=gerrit+and+jenkins&oq=gerrit+and+jenkins&aqs=chrome.0.57j65l2j60l2j62.1668&sourceid=chrome&ie=UTF-8)发现关于如何设置这样的东西的各种指南。

# mercurial - pushing a folder to a bitbucket

> ID：14466576
> 
> 赞同：0
> 
> 时间：2013-01-22T19:32:57.420
> 
> 标签：mercurial, bitbucket, machg

I have a folder(b) inside another folder(a) which was already pushed into a repository, and i want to push folder(b) to the bitbucket using macHg but I want it to push it so in bitbucket it looks like a new folder, right now when i pushed it it just made a new head it didn't put the whole folder in there. How can I push the whole folder so on bitbucket would look like

Folder A

*   Folder B
    *   file

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:44:08.633

如果你跑`hg status`，你会得到什么？你应该得到这样的输出：

```
zck@zck-desktop:~/my-test$ hg status
? a/b/file 
```

问号表示 mercurial 还不知道`a/b/file`。所以让我们告诉它跟踪文件。这只是一个本地命令，还不会影响远程服务器。

```
zck@zck-desktop:~/my-test$ hg add a/b/file
zck@zck-desktop:~/my-test$ hg status
A a/b/file 
```

这`A`意味着该文件刚刚添加。现在我们只需要提交（这是另一个本地命令）。

```
zck@zck-desktop:~/my-test$ hg commit -m "added a/b/file, with contents in it?" 
```

最后，我们需要将变更集推送到远程服务器。这是我们完成的唯一一个触及远程服务器的命令。

```
zck@zck-desktop:~/my-test$ hg push 
```

# php - html2pdf include html from page

> ID：14466577
> 
> 赞同：1
> 
> 时间：2013-01-22T19:32:59.050
> 
> 标签：php, html2pdf

Trying to generate PDFs with [html2pdf](http://html2pdf.fr/en/default). I'm able to create the PDFs from creating markup within the function itself, but what I REALLY want to do is include the markup from a separate file using a URL.

The code I have generates a PDF, but the PDF is blank which, I assume, means not HTML is being pulled from the specified url.

```
require_once('html2pdf/html2pdf.class.php');
$mlsnum = $_GET['mlsnum'];
$url = 'http://www.nexthometown.com/components/com_singleprop/views/singleprop/tmpl/scripts/oh_usda.php?mlsnum='.$mlsnum;
$html2pdf = new HTML2PDF('P', 'A4', 'en');
$html2pdf->getHtmlFromPage($url);
$html2pdf->Output($mlsnum.'.pdf','D'); 
```

Is anyone familiar with html2pdf? I've gone through the docs and the examples, but I can't find any reference to this method. I've found the definition [here](http://wiki.spipu.net/doku.php?id=html2pdf%3aen%3av4%3aothers#the_method_gethtmlfrompage), but it doesn't tell much.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:35:48.817

[http://html2pdf.fr/en/default](http://html2pdf.fr/en/default) 这个库是为了帮助创建 PDF 文件，而不是直接转换 HTML 页面。您不能使用`<html>`, `<head>`,`<body>`标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T14:18:51.323

这个问题有点老了，但这就是我从 getHtmlFromPage 方法解决空白页的方法。我没有使用 getHtmlFromPage 方法，而是简单地使用 curl 来获取我想要 pdf 的页面，然后将其作为字符串传递给 html2pdf 瞧！

```
require_once 'path_to_html2pdf/html2pdf/html2pdf.class.php';
$str_url = 'http://your_url_here.php';
$str_content = get_page($str_url); //get_page can be file_get_contents if your server allows for that function to open a url or a curl function that im posting down below
try{
    $html2pdf = new HTML2PDF('P', 'A4', 'es');
    $html2pdf->pdf->SetDisplayMode('fullpage');
    $html2pdf->writeHTML($str_content );
    $html2pdf->Output('your_file_name.pdf', 'D'); //The 'D' option downloads the pdf instead of just showing it on screen
}
catch(HTML2PDF_exception $e) {
    echo $e;
    exit;
}

//Here is the curl function for get_page
function get_page($str_url){
    if(strpos($str_url, 'http://') === false){
        return file_get_contents($str_url);
    }else{
        if(ini_get('allow_url_fopen')){
            return file_get_contents($str_url);
        }else{
            $curl = curl_init();
            curl_setopt ($curl, CURLOPT_REFERER, strFOARD);
            curl_setopt ($curl, CURLOPT_URL, $str_url);
            curl_setopt ($curl, CURLOPT_TIMEOUT, 30);
            curl_setopt ($curl, CURLOPT_USERAGENT, sprintf("Mozilla/%d.0",rand(4,5)));
            curl_setopt ($curl, CURLOPT_HEADER, 0);
            curl_setopt ($curl, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt ($curl, CURLOPT_SSL_VERIFYPEER, 0);
            $html = curl_exec ($curl);
            curl_close ($curl);
            return $html;
        }
    }
} 
```

# javascript - jQuery Tagit! Not working

> ID：14466580
> 
> 赞同：2
> 
> 时间：2013-01-22T19:33:06.640
> 
> 标签：javascript, jquery, jquery-ui, tag-it

I am using the jQuery tagit! library to create a user "Skills" input form. I figured this would be an extremely quick and simple setup like most jQuery libraries, however I am having a tremendous amount of trouble with this one. I tried following the source code on the example below, but I cannot get it to work even with the direct source code.

I am using the script found here: [https://github.com/aehlke/tag-it/blob/master/README.markdown](https://github.com/aehlke/tag-it/blob/master/README.markdown)

Here is the javascript that is initializing the tag-it library in the header:

```
$(function() {
    $('#skills').tagit({     
        singleField: true,
    });
}); 
```

And here is the `<ul>` element that is supposed to turn into an input field when the tag-it.js library is called:

```
<ul id="skills"></ul> 
```

I am including all these files to get this to work:

```
<link rel="stylesheet" href="styles/tag-it.css">
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css">

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/tag-it.js"></script> 
```

**All the files are being called correctly and I am not receiving any errors. There is NO input form where the `<ul>` tags are unless I create one manually**

Does anyone have a clue as to why this isn't working? Do I need to manually add an input field and assign a specific ID or class to it?

**EDIT:** This has been solved. The code posted is all 100% correct, I had an error in the jquery selector before tag-it initialization.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-15T07:10:15.823

这对我来说是个问题，我的模板有一个链接到本地​​ jquery 的脚本。因此，当我从 tagit 复制 jqueryui 和 jquery 链接时，它会重叠。摆脱本地 jquery 为我做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:31:55.410

我想问题出在那个逗号上

你放了

```
singleField: true, 
```

但它必须是

```
singleField: true 
```

如果您有两个选择，例如

```
tagSource: availableTags,
singleField: true 
```

那么只有第一个选项有逗号 第二个或最后一个选项（如果有超过 2 个选项）将没有逗号

# php - POST REDIRECT GET in form that submits to itself duplicate entries in database

> ID：14466581
> 
> 赞同：0
> 
> 时间：2013-01-22T19:33:08.487
> 
> 标签：php, html, forms

I am having the hardest time of my life for not understanding the basics of the POST REDIRECT GET pattern in forms that submit to themselves. The main problem is that when the user goes back or refreshes the page, I get duplicate entries in the database So basically I have a page that contains two forms, each one submits to itself. I have some code implemented regarding the PRG pattern but it doesn't seem to work. I'll post a brief example where I'll try to explain what I am doing.

```
 <?php
    function saveUser1($UserName_1)
    {
    include 'db_conn.php';
    //MySQL code etc...    
        if($result) return 1; //registro correcto
        else return -2; //error
        header('Location: samepage.php' , true, 303);
    exit();
    }

    function saveUser2($UserName_2)
    {
    include 'db_conn.php';
    //MySQL code etc...    
        if($result) return 1; //registro correcto
        else return -2; //error
        header('Location: samepage.php' , true, 303);
    exit();
    }

    $error1 = 0;
    $error2 = 0;

    if(isset($_POST['userForm1']))
    {
        $error1 = saveUser1(clean_form($_POST['txtUserName_1']);
    }
    if(isset($_POST['userForm2']))
    {
        $error2 = saveUser2(clean_form($_POST['txtUserName_2']);
    }
    ?> 
```

Now the HTML

```
 <form action="" name="userForm1" method="POST">
    <label for="data">Some Data</label>
    <input type="text" value="some test data to post" name="txtUserName_1" id="txtUserName_1" /><br />
    <input type="submit" name="userForm1" id="userForm1"/>
    </form>

    <form action="" name="userForm2" method="POST">
    <label for="data">Some Data</label>
    <input type="text" value="some test data to post" name="txtUserName_2" id="txtUserName_2" /><br />
    <input type="submit" name="userForm2" id="userForm2"/>
    </form> 
```

I just created this code in example of what I am trying to accomplish, but I haven't had any luck with the PGR pattern. Could you guys tell me where the error is? Or redirect me (no kidding) to some good tutorial regarding this subject? I have been looking to a lot of questions / answers, blogs but I can't find anything really solid (from my point of view). Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:37:16.367

而不是检查表单名称本身，而是检查表单中的唯一字段。例如 If(isset($_POST[txtUserName_1'']))

表单名称本身不会存在于帖子中。

要查看发布的内容，请尝试：

print_r($_POST); 出口;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:47:12.687

也许您必须将发布操作设置为同一页面。
并且您的表单不应与您的提交按钮具有相同的名称（不确定）。

```
<form name="form1" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" >    
<label for="data">Some Data</label>
<input type="text" value="some test data to post" name="data" id="data" /><br />
<input type="submit" name="submit1" id="userForm1"/>
</form>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" name="form2" method="POST">
<label for="data">Some Data</label>
<input type="text" value="some test data to post" name="data" id="data" /><br />
<input type="submit" name="submit2" id="userForm2"/>
</form> 
```

对于 php：

```
if(isset($_POST['submit1']))
{
    $error1 = saveUser1(clean_form($_POST['txtUserName_1']);
}
if(isset($_POST['submit2']))
{
    $error1 = saveUser1(clean_form($_POST['txtUserName_2']);
} 
```

您可以添加一个隐藏字段以检查其是否执行：

```
<input type="hidden" name="executed" value="0"/> 
```

然后你可以在执行 mysql 查询时将其设置为 0

```
function saveUser1($UserName_1)
{
if($_POST['executed'] == 0)
{
include 'db_conn.php';
//MySQL code etc...    
    if($result) $_POST['executed'] = 1; //registro correcto
    header('Location: samepage.php' , true, 303);
exit();
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:57:29.370

如果您想尝试，下面是示例代码。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
    Name: <input type="text" name="name">
    Email: <input type="text" name="email">
    Password: <input type="password" name="password">
    <input type="submit" value="submit" name="send">
</form> 
```

**PHP代码和common.php是数据库连接文件**

```
<?php
   require_once "common.php";

   if(isset($_REQUEST['send']))
   {
      $name = $_POST['name'];
      $email = $_POST['email'];
      $password = $_POST['password'];

      $check = "SELECT * FROM user WHERE name = '".$name."' AND email = '".$email."' AND password = '".$password."'";
      $check_result = mysql_query($check) or die(mysql_error());

      if(mysql_num_rows($check_result) > 0)
      {
        header('Location : post.php');
      }
      else
      { 
        $sql = "INSERT INTO user (name,email,password) VALUES ('$name','$email','$password')";
        $result = mysql_query($sql) or die(mysql_error());
      } 
   }    
?> 
```

# sql-server - 使用 Merge 一次更新多行的最有效语法是什么？

> ID：14466582
> 
> 赞同：1
> 
> 时间：2013-01-22T19:33:11.167
> 
> 标签：sql-server, sql-server-2008

我发现有 2 种方法可以使用 SQL Server 2008 将许多行插入到表中。

其中之一可以在这里找到[http://technet.microsoft.com/en-us/library/bb522522(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/bb522522(v=sql.105).aspx)说要创建一个临时表，然后将值插入临时表，最后合并与目标能够的表。

这对我来说似乎不是很有效，因为您必须创建一个表，填充表，合并到目标表，然后删除临时表。

我唯一能想到的其他事情如下......

```
MERGE dbo.targettable as tgt
USING (
SELECT 12 as col1, 13 as col2, 'abc' as col3, 'zyx' as col4
UNION ALL
SELECT 11 as col1, 11 as col2, 'def' as col3, 'def' as col4
(etc etc)
UNION ALL
SELECT 7 as col1, 10 as col2, 'jfj' as col3, 'tub' as col4)
as new
ON tgt.col1=new.col1
WHEN MATCHED THEN UPDATE SET tgt.col2=new.col2, tgt.col3=new.col3, tgt.col4=new.col4
WHEN NOT MATCHED THEN INSERT (col1, col2, col3, col4)
VALUES(new.col1, new.col2, new.col3, new.col4); 
```

根据 usr 的回答，我可以找到[http://msdn.microsoft.com/en-us/library/bb510625.aspx](http://msdn.microsoft.com/en-us/library/bb510625.aspx)

我认为这是做到这一点的方法。有人可以验证此语法是否正确吗？

```
MERGE dbo.targettable as tgt
USING (VALUES(12, 13, 'abc', 'zyx'), (11, 11, 'def', 'def'),(7, 10, 'jfj', 'tub'))
AS new (col1, col2, col3, col4)
ON tgt.col1=new.col1
WHEN MATCHED THEN UPDATE SET tgt.col2=new.col2, tgt.col3=new.col3, tgt.col4=new.col4
WHEN NOT MATCHED THEN INSERT (col1, col2, col3, col4)
VALUES(new.col1, new.col2, new.col3, new.col4); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:49:40.780

**要合并的数据从哪里来？**

*   如果它来自查询，则将查询内联到合并中。
*   如果它来自应用程序，请使用表值参数。
*   如果它是迭代生成的，请使用临时表或表变量。
*   如果它像您的示例中一样是常量，请使用该`VALUES`子句。不要使用`UNION ALL`，因为它更冗长，不能很好地记录语义并增加查询编译时间，因为优化器必须将其转换为`VALUES`表单。

# python - 这个正则表达式对 xsd:anyURI 是否正确

> ID：14466585
> 
> 赞同：1
> 
> 时间：2013-01-22T19:33:19.687
> 
> 标签：python, regex, url

我正在实现一个函数（在 Python 中），用于检查字符串是否符合`xsd:anyURI`.

根据[Schema Central](http://www.schemacentral.com/sc/xsd/t-xsd_anyURI.html)，只有检查重复的、连续的和不连续的`#`字符以及`%`后跟十六进制字符 0-Ff 以外的字符才有意义。

到目前为止，我有类似的东西，它似乎正在工作：

```
if uri.search('(%[^0-9A-Fa-f]+)|(#.*#+)') 
```

多个“#”符号的第二个表达式可能有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:07:01.667

如果您的目标是根据 Schema Central 解析器要求排除正则表达式，那么您就快到了。前半部分，不包括没有后跟两个十六进制数字的百分号，最好使用*负前瞻断言*来解决；后半部分很好，尽管您可以在不影响结果的情况下放弃最后一个重复指示器：

```
(%(?![0-9A-F]{2})|#.*#) 
```

用大小写独立（标志）编译你的正则表达式，`i`你很高兴。

推荐阅读：Python 标准库[关于正则表达式操作语法的章节](http://docs.python.org/2/library/re.html#regular-expression-syntax)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T00:17:21.070

我最近不得不在没有消极前瞻的情况下这样做，以下似乎有效：

`(%.?[^0-9A-Fa-f]|#.*#)`

# javascript - Trying to target a list item a with CSS current class to emphasize when active

> ID：14466591
> 
> 赞同：0
> 
> 时间：2013-01-22T19:33:47.567
> 
> 标签：javascript, css, wordpress

I tried some stuff I found in past questions but unfortunately it hasn't helped. I think the reason may be it is deeply buried in CSS classes and I'm just inexperienced and not targeting it accurately, despite my attempts to use Chrome's inspect element to find exactly where it is. This is the code I have:

```
.multilanguage-widget.readmore ul.display-posts-listing li.listing-item a.current {
        font-weight: bold !important;
        } 
```

and this is the page example I'm trying to do it on [here](http://lumistaging.designiscasual.com/biometrics/). See the list of Capabilities to the right side. Please help, I've been struggling with this for quite a while now and all my attempts have been failing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:51:33.630

您可以编写一个脚本，从所有活动元素中删除该类并将其添加到单击的元素中：

```
<script type="text/javascript">
   function active(e) {
      $$('.current').each(function(i) {
         i.removeClassName('current');
      });
      e.addClassName('current');
   };
</script> 
```

然后，您可以从 onclick 事件中调用此函数：

```
<a class="title" href="http://lumistaging.designiscasual.com/biometrics/" onclick="active(this)">Biometric Authentication</a>
<a class="title" href="http://lumistaging.designiscasual.com/barcode/" onclick="active(this)">Barcode Authentication</a> 
```

（ETC...）

我还没有测试过，但你的 CSS 应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:45:04.733

如果您的页面足够一致，您可以使用以下内容：

```
<script>
$(document).ready(function(){
   $('ul.display-posts-listing li').children('a').filter(function(){
      return ($(this).html() == $('h1.entry-title').html())
   }).addClass('current');
});
</script> 
```

我会把它放在标签`header.php`之前。`</head>`

# vim - Vim：从第一个单词追加行到上一行

> ID：14466593
> 
> 赞同：1
> 
> 时间：2013-01-22T19:34:00.390
> 
> 标签：vim

这个应该太简单了，但是我想知道很久了，没看到这个问题，好难找。

我经常想从一行中的某处删除到下一行代码的开头。例如，在 C-ish 语法中，假设我想删除第一个布尔值：

```
if (long_boolean_expression1 &&
    long_boolean_expression2) {
  /* code */
} 
```

并得到：

```
if (long_boolean_expression2) {
  /* code */
} 
```

在这里，我可以`0wdb.`从第二行开始。（有什么更短或更直观的吗？必须有一个命令可以，`0w`但我找不到。）

但是，在编辑 HTML 时，似乎没有任何效果。每当我需要做这样的事情时：

```
<table>
  <tr> 
```

进入这个：

```
<table><tr> 
```

我最终在插入模式下使用退格键进行操作，因为我在正常模式下进行的所有尝试都失败了，经常删除太多并让我留下：

```
<table<tr>  <!-- Fail! --> 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T19:39:54.617

尝试将光标放在`l`并键入`DJ`。

`D`是从光标删除直到行尾，`J`是将下一行连接到当前行。

对于您的 HTML 示例，只需尝试`J`在第一行加入第二行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T19:36:56.807

`SHIFT`+`J`将两条线连接在一起。

# java - Apache Tomcat 7 在每个请求上更改 JSESSIONID

> ID：14466595
> 
> 赞同：9
> 
> 时间：2013-01-22T19:34:03.277
> 
> 标签：java, session, tomcat, haproxy, jsessionid

这个问题让我发疯，所以也许有人可以帮助我了解问题所在。我有一个由 HAProxy 引导的 tomcat Web 应用程序。HAProxy 也在进行 SSL 卸载，并配置为使用粘性会话。我正在使用 Tomcat 的会话复制功能，它似乎工作得很好。会话出现在两个应用服务器上。

出于某种原因，Tomcat 会为每个 Web 请求生成一个新的 JSESSIONID，然后将旧会话的内容复制到新会话中。也就是说，我的会话内容还在新会话中，只是生成了一个新的ID并发回给客户端。但它只对我的 Web 应用程序执行此操作。它不会为 /manager 应用程序执行此操作。

我已经尝试了书中的每一个技巧，比如在我的 context.xml 中设置：

```
<Valve className="org.apache.catalina.authenticator.BasicAuthenticator" changeSessionIdOnAuthentication="false" /> 
```

并在我的 Context 元素上设置这些属性：

```
<Context path="/myapp" reloadable="false" override="true" useNaming="false" allowLinking="true" useHttpOnly="false" sessionCookiePath="/" sessionCookiePathUsesTrailingSlash="false"> 
```

而且，结果是一样的。Tomcat 为每个请求生成一个新的会话 id，并将旧会话的内容复制到新的 id 中。

我怀疑它与 HAProxy 有关，除了 /manager 应用程序也在 HAProxy 后面并且它没有表现出这种行为。

为什么 Tomcat 这样做，我能做些什么来防止它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T01:36:27.380

原来这是由 Spring Security 引起的。我们使用的是 Spring Security 3.1x，默认情况下它将经过身份验证的凭据存储在用户的会话中。为了对抗会话固定攻击，它会自动将用户会话的内容复制到新的会话 id 并使旧会话无效。

修复方法是将以下内容添加到安全配置中的 http 元素，因为我们不需要在应用程序中使用会话：

```
create-session="stateless" 
```

希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-28T21:04:19.420

当我在 tomcat7 服务器上刷新页面时，我在新的 id 会话中遇到了同样的问题，我只在 context.xml 中添加了这段代码：

```
<Valve className="org.apache.catalina.authenticator.BasicAuthenticator" changeSessionIdOnAuthentication="false" />

<Context path="/myapp" reloadable="false" override="true" useNaming="false" allowLinking="true" useHttpOnly="false" sessionCookiePath="/" sessionCookiePathUsesTrailingSlash="false"> 
```

这对我来说很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T19:48:16.617

不确定您的问题到底是什么，但我会检查两件事。首先，你在tomcat中指定了jvmRoute吗？

**雄猫** `server.xml`

```
<Engine name="Catalina" defaultHost="localhost" jvmRoute="machine1"> 
```

**Haproxy.cfg**（参考 jvmRoute）

```
server machine1 SERVER_IP cookie machine1 check 
```

Tomcat 将服务器的名称附加到 cookie，因此不设置可能会导致问题。

要检查的另一件事是确保您将此行添加到您`web.xml`的`web-app`部分

```
<distributable /> 
```

# jquery - jQuery 返回“未定义”的 css 显示

> ID：14466604
> 
> 赞同：2
> 
> 时间：2013-01-22T19:34:40.520
> 
> 标签：jquery, firefox, css

我有一个页面，上面有几个具有默认显示样式的 div（在外部 .css 文件中设置`#somediv{display:none`）。如果满足条件，我使用 jQuery 打开一个，其他的关闭。我使用 jQuery`fadeIn()`和`fadeOut`方法来控制它。

仅在 FF18 中，似乎有随机实例`fadeIn`不起作用。我在js文件中放了一个警报

```
alert($("#someDiv").css("display")); 
```

在`fadeIn`似乎不起作用的时候，此警报将“未定义”输出为一个值。什么会导致这种情况，jQuery 至少不应该返回一个空字符串？

添加细节，关于约瑟夫的评论。从选择器返回的 jQuery 对象是正确的，如果我将 fadeIn() 重写为：

```
 $("#someDiv").fadeIn(400, function(){ $("#someDiv").css("display", "block")  }); 
```

它在 100% 的时间内有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T18:44:37.913

You said you use this rule to control more than one div element, yet I see you're using ID# with the same property as selector, you can't have more than one element in a page with the same id. try switching it to a class selector and it might help.

# javascript - 单击提交链接后尝试关闭弹出窗口

> ID：14466605
> 
> 赞同：1
> 
> 时间：2013-01-22T19:34:42.620
> 
> 标签：javascript, jquery

我在 joomla 中有一个页面，我正在使用 pdfmyurl 服务生成一个 pdf。要调用服务，请单击链接。IE：

```
<a href="http://pdfmyurl.com?url=http://mywebsite.com/mypage&-R=0mm&-L=10mm&-s=Letter&--print-media-type&--footer-line&--filename=myfilename.pdf">click to generate pdf</a> 
```

因此，您单击主页上的链接，该链接会在弹出窗口中打开一个“pdf-able”页面，然后该页面具有指向上述内容的链接。（这就是 joomla 操作打印页面的方式）。

这一切都很完美。但是，我想在单击链接但在生成 pdf 之后关闭弹出窗口。如果我使用 onclick="window.close();" 链接中的方法窗口在生成 pdf 之前关闭。

我想用 jquery 解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:42:34.290

使用`window.open`，保留对窗口的引用，然后继续并`window.close()`在 PDF 完成加载时触发（而不是 href ）。唯一的问题是——您是否有任何挂钩来确定 PDF 何时完成加载？

参考：[http](http://www.quirksmode.org/js/popup.html) ://www.quirksmode.org/js/popup.html（mdn 对我不起作用，但这里是链接：[https://developer.mozilla.org/en-US/docs/DOM/window。打开](https://developer.mozilla.org/en-US/docs/DOM/window.open)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:44:12.613

创建具有“closePdf”ID 的链接或元素：

```
 $('#closePdf').click( function() { 
      $('#whateverYourPDFContainerIdIs').remove(); 
 }); 
```

# php - if 语句未执行，但 elseif 和 else 是

> ID：14466609
> 
> 赞同：-3
> 
> 时间：2013-01-22T19:34:53.387
> 
> 标签：php, sql, if-statement

所以，我在这个问题上摸不着头脑。我原来的“IF”语句在为真时没有执行（我知道这是真的，因为我已经回显了变量并且它应该触发代码）。但是，如果 IF 语句不正确，则 elseif 和 else 语句可以正常工作。这是代码：

```
 <?php
    $count=mysql_num_rows($result);
    // have also tried only one "=" sign//
    if ($count==0){
        //This is not appearing//
        echo "Your search did not yield any results. Please try another search."; 
    } else if ( //other conditions// ) {
        //code that is working fine//
    } else {
        // more code that is working fine 
        // (happens to be the same as the original if statement)
    }
    echo $count; //is printing 0 correctly, but the if statement for $count=0 not happening//
    ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:45:32.783

首先，我建议切换到 mysqli 而不要使用已弃用的 mysql 系列命令。

但是，在回答您的问题时，您应该检查您的 SQL 语句。mysql_num_rows 成功时返回行数，失败时返回 false。false 的整数值为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:27:58.390

好的，有一个工作人员查看它，他发现了错误。这是我没有报告的事情，因为我认为它不会产生影响。我在原始 if 之前有一个 while 语句，但我不需要它来执行，除非 if 为假。当我将它移到原始 if 下方并将 elseif 更改为另一个 if 括号中的 while 语句时，它工作正常。

# regex - 正则表达式单词捕捉

> ID：14466614
> 
> 赞同：0
> 
> 时间：2013-01-22T19:35:22.757
> 
> 标签：regex, expression

到目前为止，我已经把这个放在一起：

```
\b\S*[^\w\s^'^&]\S*\b 
```

我试图捕捉被审查的整个单词：IE `d*mn`or `d_mn`but don't want `&`or `'t` `'s` `'re`to match 并且还需要使其`1.23`不匹配这样的数字。

我的目标是抓住那些试图通过使用符号代替字母来插入脏话的人。因此，除了撇号之类的东西外，任何带有符号的单词都应该被捕获。符号是一种格式化的`&`东西，每个字母最多可以有一个。所以`'`并且`&`可以使用。带小数的数字应该可以使用，因为它们不是脏话。应该抓住诸如`s**t`和`d_mn`或之类的东西。`d.mn`

我需要关于数字部分的帮助。

我试过`^\d.\d`了，`not digit dot digit`但这对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:15:00.247

这是我的暂定答案：

`\b[a-zA-Z]*(?:[^\w\s^'&]|_)+[a-zA-Z]+\b`

使用`[a-zA-Z]`而不是`\S`不再包括数字。

**编辑**：现在要求单词以字母结尾。我也做了它，所以它会匹配重复的特殊字符，比如在`a$$hole`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:31:31.120

如何使用这个：

```
\b\p{L}*[\p{S}\p{P}]((\p{L}[\p{P}\p{S}])|([\p{P}\p{S}]\p{L})|(\p{L}))+\b 
```

*   `\p{L}`是任何（unicode）字母
*   `\p{S}`是任何符号
*   `\p{P}`是任何标点符号

模式的第一部分 ( `\p{L}*[\p{S}\p{P}]`) 确保单词必须包含至少一个符号或标点符号。模式的其余部分`((\p{L}[\p{P}\p{S}])|([\p{P}\p{S}]\p{L})|(\p{L}))+`指定事情如何重复。字母后跟标点符号/符号、标点符号/符号后跟字母或仅字母的序列是可以接受的。

要在 Java 代码中使用此模式，请确保首先将所有反斜杠字符替换为双反斜杠。

# c++ - C++ 模板特化，明确地调用可能是指针或引用的类型的方法

> ID：14466620
> 
> 赞同：32
> 
> 时间：2013-01-22T19:35:46.233
> 
> 标签：c++, templates, pointers, reference, template-specialization

**概括**

有没有办法在模板化类型上调用一个类方法，它可能是一个指针或一个引用，而不知道哪个并且不会得到编译器/链接器错误？

* * *

**细节**

我有一个模板化的 QuadTree 实现，它可以采用以下任何重要的用户定义类型：

```
//Abstract Base Class
a2de::Shape

//Derived Classes
a2de::Point
a2de::Line
a2de::Rectangle
a2de::Circle
a2de::Ellipse
a2de::Triangle
a2de::Arc
a2de::Spline
a2de::Sector
a2de::Polygon 
```

但它们可以是指针或引用，因为它们都是从 a2de::Shape 派生的。因此，专业化声明为：

```
template class QuadTree<a2de::Shape&>;
//...similar for all derived types as references.

template class QuadTree<a2de::Shape*>;
//...similar for all derived types as pointers 
```

我遇到的问题是当间接（或缺少间接）未知时调用类方法的能力，并且由于模板，生成了两组代码：

```
template<typename T>
bool QuadTree<T>::Add(T& elem) {

    //When elem of type T is expecting a pointer here
    //-> notation fails to compile where T is a reference i.e.:
    //template class QuadTree<a2de::Shape&>
    //with "pointer to reference is illegal"

    if(elem->Intersects(_bounds) == false) return false;

    //...
} 
```

如果我将上面的行更改为使用 . （点）符号：

```
template<typename T>
bool QuadTree<T>::Add(T& elem) {

    //When elem of type T is expecting a reference here
    //. (dot) notation fails to compile where T is a pointer i.e.:
    //template class QuadTree<a2de::Shape*>
    //with "pointer to reference is illegal"

    if(elem.Intersects(_bounds) == false) return false;

    //...

} 
```

如果我删除基于引用的类型以支持基于指针的类型（包括在 Quadtree 类的声明和使用中），我会收到错误消息`left of .<function-name> must have class/struct/union`。

如果我删除基于指针的类型以支持基于引用的类型（包括在 Quadtree 类的声明和使用中），我会再次得到上述内容`reference to pointer is illegal`。

编译器：VS2010-SP1

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-22T19:42:03.540

小型重载函数可用于将*引用*转换为*指针*：

```
template<typename T>
T * ptr(T & obj) { return &obj; } //turn reference into pointer!

template<typename T>
T * ptr(T * obj) { return obj; } //obj is already pointer, return it! 
```

现在而不是这样做：

```
 if(elem->Intersects(_bounds) == false) return false;
 if(elem.Intersects(_bounds) == false) return false; 
```

做这个：

```
 if( ptr(elem)->Intersects(_bounds) == false) return false; 
```

如果`elem`是参考，将选择第一个重载`ptr`，否则将选择第二个。两者都返回*指针*，这意味着无论`elem`代码中的内容如何，​​表达式`ptr(elem)`都将始终是一个*指针*，您可以使用它来调用成员函数，如上所示。

由于`ptr(elem)`是指针，这意味着检查它是否`nullptr`是个好主意：

```
 if( ptr(elem) && (ptr(elem)->Intersects(_bounds) == false)) return false; 
```

希望有帮助。

# windows - Windows CMD 和 Bash 中的长算法

> ID：14466622
> 
> 赞同：2
> 
> 时间：2013-01-22T19:35:49.533
> 
> 标签：windows, bash, cmd

有没有办法用长（非常）整数进行算术运算？如何添加它们并获得它们的平方？我可以在 Windows CMD 和 Bash 上执行此操作吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:40:49.380

在 bash 中，您可以使用**bc**。这里链接[http://www.gnu.org/software/bc/manual/html_mono/bc.html](http://www.gnu.org/software/bc/manual/html_mono/bc.html)

对于我的版本（ bc 1.06.95 ）：

1）字符串中字符数的限制（在表达式中）：2147483647
2）指数值的限制：2147483647

例如：

`echo "2^2" | bc` - 计算 2 的幂 2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:28:19.953

**Windows CMD 有以下限制**

> 批处理数学有一个严重的限制：它只能处理 32 位整数。（-2,147,483,648 至 +2,147,483,647）
> 
> 在 Windows NT 4 和可能的 2000 中，限制更加严重：它只能处理无符号的 32 位整数。（0 至 4,294,967,295）

[资料来源：http://www.robvanderwoude.com/battech_math.php](http://www.robvanderwoude.com/battech_math.php)

但是，请参阅上面该来源中的**解决方法**部分！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T01:09:45.160

我总是为此使用 scala，但这可能有点矫枉过正。如果您只想评估一个表达式，而不是停留在其 REPL 模式，它会有点慢：

```
$ scala -e 'println (BigInt("12345056560232232323232323").pow(17))'
3592381313781713347169811993632501191758657981889928930682479036490714840370007545514882170730018303552133089619990376179050098738641961735841902033891344811425818404146852596771837724556848714975175935703785905563690781027522348495906322533140231903044769974928750539681481346060497468038154440312144677922886371790280816174167119667432789145549865983687361599563492624405727749237730761069822040101542802077317687934387891203 
```

或帕里：

```
$ echo "12345056560232232323232323^17" | gp -q
3592381313781713347169811993632501191758657981889928930682479036490714840370007545514882170730018303552133089619990376179050098738641961735841902033891344811425818404146852596771837724556848714975175935703785905563690781027522348495906322533140231903044769974928750539681481346060497468038154440312144677922886371790280816174167119667432789145549865983687361599563492624405727749237730761069822040101542802077317687934387891203 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T00:05:36.650

*假设 CMD*是命令行和最新版本的 Windows（Win 7+，可选并且可能安装在 XP 上）的总称，`powershell`最容易使用。要获得平方和，您可以这样做：
`powershell [math]::sqrt(2+2)`

Powershell 会自动为您调整数据类型，对于非常大的数字，它将自动使用 int64 或 Decimal (int128)。您可以尝试使用不同的值来查看它： `powershell (your_value_here).gettype().name`

# c# - 在 C# (MySql) 中登录的 Windows 8 应用程序上的扩展启动画面

> ID：14466628
> 
> 赞同：0
> 
> 时间：2013-01-22T19:36:09.087
> 
> 标签：c#, .net, mysql, xaml, windows-8

我正在考虑着手开发我的第一个 Windows 8 商店应用程序。我刚刚创建了一个名为“secure_login”的 MySql 数据库，在这个数据库中我有一个名为“members”的表，其中包含以下字段：-

```
 `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY 
  `username` VARCHAR(30) NOT NULL
  `email` VARCHAR(50) NOT NULL
  `password` CHAR(40) NOT NULL 
```

密码字段将是一个 SHA-1 计算。

我想要做的是当应用程序由用户启动时，我希望应用程序显示一个扩展的启动屏幕，它将显示登录屏幕供用户输入他们的用户名和密码。然后，我希望在应用程序中的 C# 中放置一个函数来计算输入密码的 SHA-1，然后将用户名和密码 SHA-1 值传递给数据库进行比较。如果正确，则用户可以转到应用程序，但如果不正确，则会向他们提供重新尝试登录或退出的选项。

我还有一个表来监控用户登录尝试，如下所示：

```
 `user_id` int(11) NOT NULL,
  `time` VARCHAR(30) NOT NULL 
```

对于每次尝试（成功或不成功），我希望也能记录下来。我的数据库尚未反映它，但我想以某种方式记录登录是否确实成功但不确定如何在数据库端捕获它。

我对 C# 并不陌生，但我对 XAML 世界和连接到数据库以进行用户身份验证并不陌生。

对上述或建议有什么建议吗？我找到了一些使用 Windows Live 登录但不使用唯一登录的指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:58:28.790

请检查登录控件的 ms[指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh965453.aspx)，如果它们很好地解决了您的问题：D

就我个人而言，我喜欢在登录应用程序时进行间接处理。这些应用程序只有一个起始页面，因此页面不会在加载后显示内容，而是决定它是应该登录还是应该去内容。

简单想象一下，您的应用程序起始页是`StartView.xaml`，这会检查用户是否已登录，如果是，则应用程序导航到`HomeView.xaml`，如果不是，则应用程序导航到`LoginView.xaml`

# php - PDO 间歇性错误“调用非对象上的成员函数 execute()”

> ID：14466629
> 
> 赞同：1
> 
> 时间：2013-01-22T19:36:15.053
> 
> 标签：php, pdo

所以我在调用 PDO::execute() 时遇到了这个间歇性错误。错误是“在非对象上调用成员函数 execute()”。它发生在我的数据库类的第 117 行。下面是我的课。页面加载正常，然后在我刷新时间歇性地返回此错误。

```
class db extends PDO {
    private $error;
    private $sql;
    private $bind;
    private $errorCallbackFunction;
    private $errorMsgFormat;

    public function __construct($dsn, $user="", $passwd="") {
        $options = array(
            PDO::ATTR_PERSISTENT => false, 
            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
        );

        try {
            parent::__construct($dsn, $user, $passwd, $options);
        } catch (PDOException $e) {
            $this->error = $e->getMessage();
        }
    }

    private function cleanup($bind) {
        if(!is_array($bind)) {
            if(!empty($bind)) {
                $bind = array($bind);
            }
            else {
                $bind = array();
            }
        }
        return $bind;
    }

    public function run($sql, $bind="") {
        $this->sql = trim($sql);
        $this->bind = $this->cleanup($bind);
        $this->error = "";

        try {
            $pdostmt = $this->prepare($this->sql);
            if($pdostmt->execute($this->bind) !== false) {
                if(preg_match("/^(" . implode("|", array("select", "describe", "pragma")) . ") /i", $this->sql)) {
                    return $pdostmt->fetchAll(PDO::FETCH_ASSOC);
                }
                elseif(preg_match("/^(" . implode("|", array("delete", "insert", "update")) . ") /i", $this->sql)) {
                    return $pdostmt->rowCount();
                }
            }   
        } catch (PDOException $e) {
            $this->error = $e->getMessage();    
            $this->debug();
            return false;
        }
    }

    public function select($table, $where="", $bind="", $fields="*") {
        $sql = "SELECT " . $fields . " FROM " . $table;
        if(!empty($where)) {
            $sql .= " WHERE " . $where;
        }
        $sql .= ";";

        return $this->run($sql, $bind);
    }

} 
```

现在，每当我将 PDO::ATTR_PERSISTENT 更改为 false 时，问题就会消失，因此它看起来是我的构造调用自身运行的问题。

这也是我的模型，错误出现了。

```
class QuickView extends Model {

function getProduct($sku) {
    $bind = array(
        ":sku" => "$sku"
    );
    $result = $this->Quickview->db->select('`PRODUCTS`', 'PR_SKU = :sku', $bind, 'PR_SKU, PR_URLofImage, PR_UnitPrice, PR_Description');

    return $result;
} 
```

}

然后这是它扩展的类。

```
class Model extends DB {
    protected $_model;

    function __construct() {

        global $inflect;

        $this->db = new DB("mysql:host=localhost;dbname=dbname", "username", "password");
        $this->_limit = PAGINATE_LIMIT;
        $this->_model = get_class($this);
        $this->_table = strtolower($this->_model)."s";
    }

    function __destruct() {
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:56:32.680

检查文档`PDO::prepare`： [http ://us1.php.net/manual/en/pdo.prepare.php](http://us1.php.net/manual/en/pdo.prepare.php)

它并不总是返回一个`PDOStatement`对象。如果处理查询时出现错误，它将返回 false 或抛出异常，具体取决于其错误处理模式是什么。

在您的情况下，您试图将其设置为引发异常，但这不是驱动程序选项。它是用 PDO::setAttribute 设置的，即：

```
$this->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

如果你解决了这个问题，你会从你的错误中得到异常。否则，您也可以通过`PDO::prepare`在调用它之前检查结果来修复`execute`它。

# .net - OleDbTransaction 回滚不适用于 FoxPro 数据

> ID：14466631
> 
> 赞同：3
> 
> 时间：2013-01-22T19:36:17.820
> 
> 标签：.net, transactions, oledb, visual-foxpro

我在可以使用 SQL 或 foxpro 的 C# 程序中使用 OleDb。我注意到，当我在使用 foxpro 数据的事务中运行语句然后尝试调用 RollBack 时，它不会还原数据。使用 SQL 数据运行时回滚工作正常，所以我有点困惑为什么它在 FoxPro 中也不起作用。

在我的测试应用程序中，我正在将表 (TESTTABLE) 中的记录读取到绑定到网格数据源的数据表中。我将行添加到网格中，然后按保存按钮以清除数据库表，然后遍历绑定 DataTable 中的所有当前行以将它们重新插入数据库表中。理论上，如果在插入过程中出现问题，RollBack 应该撤消删除。我注意到的是，如果插入失败并且我回滚事务，则被删除的记录保持删除状态，而不是表恢复到删除之前的状态。

> **编辑 2013 年 1 月 23 日**
> 
> 我正在使用 Visual FoxPro 9.0.0.5815。这些表是[松散](http://fox.wikis.com/wc.dll?Wiki~DatabaseContainer)的，所以我必须在创建表后在表上运行“MAKETRANSACTABLE”。我通过 OleDbCommand 执行以下命令来做到这一点
> 
> ```
> string commandText = "ExecScript('Use TESTTABLE In 0'+chr(13)+chr(10)+'MakeTransactable([TESTTABLE])')" 
> ```

这是我正在使用的保存功能...

```
 private void Save()
    {

        //Table: TESTTABLE
        //Columns: REFERENCE NUMERIC(10), DESCRIPT VARCHAR(20)

        bool CauseException = cbBreak.Checked;
        //string SQLDbConnString = @"Provider=SQLNCLI;Server=TESTSERVER\\SQLExpress;Database=TESTDATA;Uid=test;Pwd=test;Connect Timeout=600";
        string FoxProDbConnString = @"Provider=vfpoledb;Data Source=C:\Test\Data;Exclusive=false;Nulls=false;ConnectTimeOut=600;QueryTimeOut=600;";

        using (OleDbConnection dbConn = new OleDbConnection(FoxProDbConnString))
        {
            dbConn.Open();
            using (OleDbTransaction dbTran = dbConn.BeginTransaction())
            {
                try
                {
                    //Run a delete command to remove all records from the table
                    string deletequery = "DELETE FROM TESTTABLE";
                    using (OleDbCommand cmd = new OleDbCommand(deletequery, dbConn, dbTran))
                    {
                        cmd.ExecuteNonQuery();
                    }

                    //Loop through the DataTable rows and insert them into the database table
                    foreach (DataRow row in dt.Rows)
                    {
                        string insertquery = "INSERT INTO TESTTABLE (REFERENCE, DESCRIPT) VALUES (?,?)";
                        using (OleDbCommand cmd = new OleDbCommand(insertquery, dbConn, dbTran))
                        {
                            if (CauseException)
                            {
                                cmd.Parameters.Add("ref", OleDbType.Numeric).Value = "THIS IS NOT A NUMERIC VALUE";
                            }
                            else
                            {
                                cmd.Parameters.Add("ref", OleDbType.Numeric).Value = Convert.ToDouble(row["reference"]);
                            }
                            cmd.Parameters.Add("descript", OleDbType.VarChar).Value = Convert.ToString(row["descript"]).Trim();
                            cmd.ExecuteNonQuery();
                        }
                    }

                    //If no exceptions were thrown during the inserts, commit the transaction    
                    dbTran.Commit();
                    MessageBox.Show("Saved");
                }
                catch (Exception ex)
                {
                    //If an exception occurs, RollBack the transaction.  This SHOULD undo the delete.
                    dbTran.Rollback();
                    MessageBox.Show("Failed to save. Rolling back changes.");
                }
            }
        }
    } 
```

> **编辑 2013 年 1 月 24 日**
> 
> 我使用 System.Data.Odbc 而不是 System.Data.OleDb 测试了上面相同的代码，并且事务运行良好。我使用了以下连接字符串：
> 
> string odbcConnStr = @"Driver={INTERSOLV dBASEFile (*.DBF)};SourceDB=C:\Test\Data;";
> 
> 在我看来，这里的问题特别是 vfpoledb 提供程序没有正确处理事务。我探索的另一种方法是使用数据库容器而不是松散的表，但似乎 vfpoledb 不支持“CREATE DATABASE”功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-19T13:19:39.347

我接受了你的`MakeTransactable`编辑并充实了它。它被称为：

```
cnn.MakeTransactable("directory/table"); 
```

编码：

```
public static class OleDbConnectionMakeTransactableExtensions
{
    private static readonly Dictionary<int, List<string>> AlreadyTransactable = new Dictionary<int, List<string>>();

    public static void MakeTransactable(this OleDbConnection connection, string freeTableName)
    {
        OleDbTransaction tran = connection.GetActiveTransaction();
        if (tran == null)
        {
            throw new InvalidOperationException("No transaction set");
        }

        int key = tran.GetHashCode();
        List<string> transactable;
        if (!AlreadyTransactable.TryGetValue(key, out transactable))
        {
            transactable = new List<string>();
            AlreadyTransactable.Add(key, transactable);
        }

        freeTableName = OtherExtensionMethods.GetCleanTablePath(freeTableName);

        if (transactable.Contains(freeTableName, StringComparer.InvariantCultureIgnoreCase))
        {
            return;
        }

        string alias = connection.GetCurrentAlias(freeTableName);
        if (alias == null)
        {
            connection.ExecScript(string.Format("use [{0}] shared again in 0", freeTableName));
            alias = connection.GetCurrentAlias(freeTableName);

            if (alias == null)
            {
                throw new InvalidOperationException(string.Format("Could not get an alias for table '{0}'", freeTableName));
            }
        }

        connection.ExecScript(string.Format(@"
IF NOT ISTRANSACTABLE('{0}') THEN
    MAKETRANSACTABLE('{0}')
ENDIF
", alias));

        transactable.Add(freeTableName);
    }

    public static string GetCurrentAlias(this OleDbConnection connection, string freeTableName)
    {
        freeTableName = OtherExtensionMethods.GetCleanTablePath(freeTableName);
        string alias = connection.ExecScript<string>(string.Format(@"
LOCAL cTable, cAlias, nIndex, nAliasCount, cDbf, cCheck
LOCAL ARRAY aUsedAliases[1]
LOCAL cList

cTable = LOWER(ADDBS(JUSTPATH(""{0}"")) + JUSTSTEM(""{0}""))
nAliasCount = AUSED(""aUsedAliases"")
IF nAliasCount = 0 THEN
    RETURN """"
ENDIF

cList = cTable + ': '

FOR nIndex = 1 TO nAliasCount
    cAlias = aUsedAliases[1, 1]
    cDbf = LOWER(DBF(cAlias))

    cCheck = RIGHT(ADDBS(JUSTPATH(cDbf)) + JUSTSTEM(cDbf), LEN(cTable))
    cList = cList + ', ' + cAlias + ' -> ' + cDbf + ' -> ' + cCheck

    IF cCheck = cTable THEN
        RETURN cAlias
    ENDIF
ENDFOR

RETURN """"
", freeTableName));
        return alias.EmptyToNull();
    }
}

public static class OleDbConnectionTransactionExtensions
{
    public static OleDbCommand WithTransactionSet(this OleDbCommand command)
    {
        if (command.Connection == null)
        {
            throw new InvalidOperationException("Command does not have a Connection set");
        }
        var transaction = command.Connection.GetActiveTransaction();
        if (!Equals(command.Transaction, transaction))
        {
            command.Transaction = transaction;
        }
        return command;
    }

    public static OleDbTransaction GetActiveTransaction(this OleDbConnection connection)
    {
        if (connection.State != ConnectionState.Open)
        {
            throw new ArgumentOutOfRangeException("connection", "Connection is not open");
        }
        return GetTransaction(connection);
    }

    private static readonly Func<OleDbConnection, OleDbTransaction> GetTransaction;

    static OleDbConnectionTransactionExtensions()
    {
        var getOpenConnectionMethod = typeof(OleDbConnection).GetMethod("GetOpenConnection", BindingFlags.Instance | BindingFlags.NonPublic);
        if (getOpenConnectionMethod == null)
        {
            throw new InvalidOperationException("Could not find the GetOpenConnection() internal method on OleDbConnection");
        }

        var internalType = getOpenConnectionMethod.ReturnType;
        var localTransactionProperty = internalType.GetProperty("LocalTransaction", BindingFlags.Instance | BindingFlags.NonPublic);
        if (localTransactionProperty == null)
        {
            throw new InvalidOperationException("Could not find the LocalTransaction property on OleDbConnectionInternal");
        }

        var param = Expression.Parameter(typeof(OleDbConnection));
        var connection = Expression.Call(param, getOpenConnectionMethod);
        var transaction = Expression.Property(connection, localTransactionProperty);

        var lambda = Expression.Lambda<Func<OleDbConnection, OleDbTransaction>>(transaction, param);
        var compiled = lambda.Compile();

        GetTransaction = compiled;
    }
}

public static class OtherExtensionMethods
{
    public static void ExecScript(this OleDbConnection connection, string script)
    {
        using (var command = connection.CreateCommand().WithTransactionSet())
        {
            command.CommandType = CommandType.StoredProcedure;
            command.CommandText = "EXECSCRIPT";
            command.Parameters.Add(new OleDbParameter("script", script));
            command.ExecuteNonQuery();
        }
    }

    public static T ExecScript<T>(this OleDbConnection connection, string script)
    {
        using (var command = connection.CreateCommand().WithTransactionSet())
        {
            command.CommandType = CommandType.StoredProcedure;
            command.CommandText = "EXECSCRIPT";
            command.Parameters.Add(new OleDbParameter("script", script));

            object raw = command.Logged().ExecuteScalar();
            return ConvertDbResult<T>(raw);
        }
    }

    public static string GetCleanTablePath(string tablePath)
    {
        return tablePath.ToLower().Replace("/", "\\").Trim("\\"[0]);
    }
} 
```

`GetActiveTransaction()`and`WithTransactionSet()`方法调用使用内部状态从连接中拉出活动事务。

# java - 以下两种方式会导致堆空间用完吗？

> ID：14466636
> 
> 赞同：0
> 
> 时间：2013-01-22T19:36:37.147
> 
> 标签：java, scala

正如建议的关于空间不足的新问题：

三个月前，我学会了编写 Scala 程序。我怀疑我编写程序的方式会导致堆空间，所以以下几点可以检查我是否可以：

*   假设我正在构建一个带有节点和边的图表。“图”是函数的一个参数。该函数将探索传入的图形，并将图形扩展为新的图形。然后将新的图再次传入并递归调用函数重新探索，直到达到某些条件，才会返回最终版本的图。

那么在这种情况下，如果沿途的图不断增长，会不会导致out of heap？

*   如果这是不好的做法，我应该如何有效地写内存？

有一个对象用来存储所有的静态信息，会不会出问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:42:20.927

> 那么在这种情况下，如果沿途的图不断增长，会不会导致out of heap？

这将取决于图表增长多少。在某些时候，如果您只是继续添加节点，那么它将耗尽堆空间。

实际上，尽管您很可能会因为错误而用完堆，并在无限循环中错过结束条件和结束。

如果您正在创建图形的多个副本——即，如果每个recution 创建一个新的深层副本并在它递归调用自身时保留它——那么您将很快耗尽内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T20:11:07.673

您是否考虑过使用[Graph for Scala](https://www.assembla.com/spaces/scala-graph/wiki)库？它将为您的项目的图形表示部分提供相当大的帮助。您可以在此处找到其[PDF 文档](https://www.assembla.com/spaces/scala-graph/documents)。

# android - 从 Android 中的意图中获取额外信息

> ID：14466639
> 
> 赞同：0
> 
> 时间：2013-01-22T19:37:04.453
> 
> 标签：android, android-intent, bundle, extras

我有一个让我发疯的问题，我想从包中获取“n”字符串值，当我单击“发送按钮”时，avd 会以某种方式崩溃。

活动一

```
public void enviar(View view){
    Intent intento=new Intent(this, Segunda.class);

    Bundle bundle=new Bundle();
    String usuarioS=editText.getText().toString();
    editText1 = (EditText) findViewById(R.id.usuarioID);        
    bundle.putString("usuario", usuarioS);
    intento.putExtras(bundle);

    startActivity(intento);
} 
```

活动二

```
public class Segunda extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_segunda);      

    String message,message1;

        Bundle extras = getIntent().getExtras();

            message1 = extras.getString("usuario"); 
            TextView textView1 = (TextView)findViewById(R.id.usuariofID);       
            textView1.setText(message1);

} 
```

那是我的代码。我在哪里搞砸了？

**LOGCAT（更新）**

```
01-22 19:54:54.055: W/Trace(1270): Unexpected value from nativeGetEnabledTags: 0
01-22 19:54:54.104: D/AndroidRuntime(1270): Shutting down VM
01-22 19:54:54.104: W/dalvikvm(1270): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-22 19:54:54.155: E/AndroidRuntime(1270): FATAL EXCEPTION: main
01-22 19:54:54.155: E/AndroidRuntime(1270): java.lang.IllegalStateException: Could not execute method of the activity
01-22 19:54:54.155: E/AndroidRuntime(1270):     at android.view.View$1.onClick(View.java:3597)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at android.view.View.performClick(View.java:4202)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at android.view.View$PerformClick.run(View.java:17340)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at android.os.Handler.handleCallback(Handler.java:725)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at android.os.Looper.loop(Looper.java:137)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at dalvik.system.NativeStart.main(Native Method)
01-22 19:54:54.155: E/AndroidRuntime(1270): Caused by: java.lang.reflect.InvocationTargetException
01-22 19:54:54.155: E/AndroidRuntime(1270):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 19:54:54.155: E/AndroidRuntime(1270):     at android.view.View$1.onClick(View.java:3592)
01-22 19:54:54.155: E/AndroidRuntime(1270):     ... 11 more
01-22 19:54:54.155: E/AndroidRuntime(1270): Caused by: java.lang.NullPointerException
01-22 19:54:54.155: E/AndroidRuntime(1270):atcom.example.actividadesss.MainActivity.enviar(MainActivity.java:301-22 19:54:54.155: E/AndroidRuntime(1270):   ... 14 more
01-22 19:54:54.224:W/ActivityManager(286):Forcefinishingactivitycom.example.actividadesss/.MainActivity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:08:19.510

似乎您在建立它之前正在使用 EditText 字段。你能试一下吗...

**从：**

```
public void enviar(View view){
   ...
   String usuarioS=editText.getText().toString();
   editText1 = (EditText) findViewById(R.id.usuarioID);
   ...
} 
```

**至：**

```
public void enviar(View view){
   ...
   editText = (EditText) findViewById(R.id.usuarioID);
   String usuarioS=editText.getText().toString();
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:18:26.327

首先，我建议摆脱不需要的代码。您可以使用 Intent.putExtra() 而不是制作捆绑包并将捆绑包放入 Intent 中。最小化代码可以帮助调试您的问题，有时甚至可以解决它。

我同意 David M 在使用它之前初始化你的 EditText。

```
public void enviar(View view){
    Intent intento=new Intent(this, Segunda.class);

    editText = (EditText) findViewById(R.id.usuarioID);
    String usuarioS=editText.getText().toString();
    intento.putExtra("usuario", usuarios);

    startActivity(intento);
} 
```

[了解意图](http://developer.android.com/reference/android/content/Intent.html)

# javascript - 如何在 IE7 中显示嵌入的图像？

> ID：14466640
> 
> 赞同：0
> 
> 时间：2013-01-22T19:37:08.490
> 
> 标签：javascript, image, internet-explorer, encoding, base64

我正在尝试在 IE7 中显示嵌入的图像。图像以 base64 编码进行编码。

```
"src="data:image/jpg;base64" 
```

这是我试过的..

我从下面的链接下载了编码器/解码器脚本。

[http://www.webtoolkit.info/javascript-base64.html](http://www.webtoolkit.info/javascript-base64.html)

我试图解码图像，但我收到无效指针错误，不知道为什么。有人可以告诉我在 IE7 中显示嵌入图片的方法吗？

我使用了这个链接：[http ://dean.edwards.name/weblog/2005/06/base64-ie/](http://dean.edwards.name/weblog/2005/06/base64-ie/)

```
var BASE64_DATA = /^data:.*;base64/i;
        function fixBase64(img) {
            if (BASE64_DATA.test(img.src)) {
                document.writeln(Base64.decode(img.src.slice(5))); // Just trying to display the picture in screen 
            }
        };

            for (var i = 0; i < document.images.length; i++) {
                fixBase64(document.images[i]);
            } 
```

谢谢，
巴拉尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T02:26:31.340

在旧的 IE8 版本中仍然会出现无效指针错误，但您可以通过引用图像属性集合中的 SRC 来解决它，即，而不是这样：

```
img.src 
```

用这个：

```
img.attributes.src.value 
```

# android - 添加 ActionBarSherlock 库会创建涉及 android.support.v4 的错误

> ID：14466648
> 
> 赞同：1
> 
> 时间：2013-01-22T19:37:34.433
> 
> 标签：android, eclipse, actionbarsherlock

我现有的项目使用 Fragments 和 FragmentPagerAdapters 运行顺利。但是，添加`ActionBarSherlock`库时会出现错误。我发现 [another question] 有同样的问题，但没有答案。

在将库添加到我的项目之前，它看起来像这样，没有错误：

![在此处输入图像描述](../Images/45b4db20f58bcc51bea72634a30492f5.png)

添加库后，我将其编辑`AndroidManifest.xml`为 include `android:theme="@android:style/Theme.Sherlock"`，这也会在我的 XML 文件中产生错误。当我将它更改为 时`android:theme="@style/Theme.Sherlock"`，XML 文件中的错误消失了，但它仍然不起作用，错误如下所示：

![在此处输入图像描述](../Images/72c8f997151ecf7ecc658444c177b170.png)

**编辑：**

我已经完成了 CommonsWare 下面的回答中的建议，但我的代码仍然无法正常工作。所有错误都消失了，项目在我的设备上构建甚至启动。但是，当我输入 XML 文件的图形布局时，出现以下错误：

```
The following classes could not be found:
- android.support.v4.view.PagerTabStrip (Fix Build Path, Edit XML, Create Class) 
```

这就是 XML 文件的样子。请注意，我的 XML 文件没有显示任何错误，但是当我进入`Graphical Layout`选项卡时，会出现上述消息。我没有提到我正在使用 a`ViewPager`但我不认为它会有所作为。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/wavesMonitorMenuBar"
        style="@android:style/ButtonBar"
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

    <Button
        android:id="@+id/backButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/menu_back" />

    <Button
        android:id="@+id/readButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/menu_read" />
</LinearLayout>

<android.support.v4.view.ViewPager
    android:id="@+id/statusPager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentTop="true"
    android:layout_above="@id/wavesMonitorMenuBar" >
    <android.support.v4.view.PagerTabStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#9E9E9E"
        android:textColor="#fff"
        android:paddingTop="4dp"
        android:paddingBottom="4dp" />

    </android.support.v4.view.ViewPager>

</RelativeLayout> 
```

从这里我去选择`Fix Build Path`但仍然无法解决问题。我尝试选择两者`library.jar`，`android-support-v4.jar`但无济于事。当我尝试打开使用带有这些错误的 XML 文件的任何视图时，程序崩溃。

这是我选择时得到的窗口`Fix Build Path`：

![在此处输入图像描述](../Images/440e2ca63addb4ec943cd22f9a95c6cb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:39:33.867

正如您的控制台以红色告诉您的那样，您有两个名为 的 JAR，`android-support-v4.jar`它们不是同一个实际文件——它们的大小或内容不同。因此，Android 不知道您想要两个 JAR 中的哪一个。

通常，简单的答案是从您的项目中删除 JAR。ActionBarSherlock 有这个 JAR，您的项目将选择它作为将 ActionBarSherlock 附加为库项目的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:48:27.810

SherlockActionBar 中的 android-support-v4.jar 太旧（至少在我下载的项目中）并且它不包含 PagerTabStrip。

我通过替换 actionbarsherlock 库项目中的支持​​库来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:07:13.137

SherlockActionBar 在他的 libs 文件夹中有 android-support-v4.jar。尝试从项目的 lib 文件夹中删除 android-support-v4.jar，以便从 Sherlock 的项目中使用该 jar。

# asp.net-mvc - 当我传递某些类型进行扫描时，MVC 中的 NServiceBus 初始化失败

> ID：14466650
> 
> 赞同：2
> 
> 时间：2013-01-22T19:37:36.613
> 
> 标签：asp.net-mvc, nservicebus, nservicebus3

在我的引导程序中，我首先这样做：

```
 public static void Initialise()
    {
        var container = BuildUnityContainer();

        InitializeNServiceBus(container);

        DependencyResolver.SetResolver(new UnityDependencyResolver(container));
        ...
    } 
```

而InitializeNServiceBus的内容是这样的：

```
 private static void InitializeNServiceBus(IUnityContainer container)
    {
        var typesToScan = new [] {
            typeof (RequestPasswordResetCommand),
            typeof (CreateAccountCommand)
        };

        Configure.With(typesToScan)
            .DefineEndpointName("somequeueonmysystem")
            .UnityBuilder(container)
            .XmlSerializer()
            //.MsmqSubscriptionStorage()
            .DisableRavenInstall()
            .DisableSecondLevelRetries() //we need timeout manager for this
            .DisableTimeoutManager() //we need raven db or similar for this //.RunTimeoutManager()
            .MsmqTransport()
                .IsTransactional(false)
                .PurgeOnStartup(false)
            .MsmqSubscriptionStorage()
                .IsTransactional(true)
            .UnicastBus()
                .ImpersonateSender(false)
            .SendOnly();
            //.CreateBus()
            //    .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install()); 
    } 
```

但是，当我打开我的 MVC 应用程序时，我得到：

**静态属性需要空实例，非静态属性需要非空实例。参数名称：表达式**

这里指出了错误的来源：

```
Line 82: 
Line 83:             Configure.With(typesToScan)
Line 84:                 .DefineEndpointName("InCityS.Events.UI.Nuvonet")
Line 85:                 .UnityBuilder(container) 
```

堆栈跟踪：

```
[ArgumentException: Static property requires null instance, non-static property requires non-null instance.
Parameter name: expression]
   System.Linq.Expressions.Expression.Property(Expression expression, PropertyInfo property) +4114402
   NServiceBus.Utils.Reflection.DelegateFactory.Create(PropertyInfo property) in c:\TeamCity\buildAgent\work\nsb.master_2\src\utils\NServiceBus.Utils.Reflection\DelegateFactory.cs:91
   NServiceBus.Serializers.XML.XmlMessageSerializer.InitType(Type t) in c:\TeamCity\buildAgent\work\nsb.master_2\src\impl\Serializers\NServiceBus.Serializers.XML\XmlMessageSerializer.cs:133
   NServiceBus.Serializers.XML.XmlMessageSerializer.InitType(Type t) in c:\TeamCity\buildAgent\work\nsb.master_2\src\impl\Serializers\NServiceBus.Serializers.XML\XmlMessageSerializer.cs:138
   NServiceBus.Serializers.XML.XmlMessageSerializer.Initialize(IEnumerable`1 types) in c:\TeamCity\buildAgent\work\nsb.master_2\src\impl\Serializers\NServiceBus.Serializers.XML\XmlMessageSerializer.cs:948
   NServiceBus.Serializers.XML.Config.MessageTypesInitializer.Run() in c:\TeamCity\buildAgent\work\nsb.master_2\src\impl\Serializers\NServiceBus.Serializers.XML.Config\MessageTypesInitializer.cs:20
   NServiceBus.Configure.<Initialize>b__d(IWantToRunWhenConfigurationIsComplete o) in c:\TeamCity\buildAgent\work\nsb.master_2\src\config\NServiceBus.Config\Configure.cs:305
   System.Collections.Generic.List`1.ForEach(Action`1 action) +10722241
   NServiceBus.Configure.Initialize() in c:\TeamCity\buildAgent\work\nsb.master_2\src\config\NServiceBus.Config\Configure.cs:304
   NServiceBus.Configure.SendOnly() in c:\TeamCity\buildAgent\work\nsb.master_2\src\config\NServiceBus.Config\Configure.cs:364
   InCityS.UI.Open.Bootstrapper.InitializeNServiceBus(IUnityContainer container) in d:\Data_nobackup\Projects\InCityS\trunk\UI\InCityS.UI.Open\Bootstrapper.cs:83
   InCityS.UI.Open.Bootstrapper.Initialise() in d:\Data_nobackup\Projects\InCityS\trunk\UI\InCityS.UI.Open\Bootstrapper.cs:53
   InCityS.UI.Open.MvcApplication.Application_Start() in d:\Data_nobackup\Projects\InCityS\trunk\UI\InCityS.UI.Open\Global.asax.cs:79

[HttpException (0x80004005): Static property requires null instance, non-static property requires non-null instance.
Parameter name: expression]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9859725
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +118
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +172
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +336
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +296

[HttpException (0x80004005): Static property requires null instance, non-static property requires non-null instance.
Parameter name: expression]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873912
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254 
```

当我将 typesToScan 更改为

```
var typesToScan = new Type[]{}; 
```

该应用程序再次运行，但是当然，一旦我尝试将某些东西放在总线上，它就会失败，说它不知道通过扫描类型的类型。

任何人都知道在哪里查看或有此错误的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:51:46.420

检测到问题。我通过要扫描的类型添加的其中一条消息具有操作类型“CultureInfo”的属性，该属性不能很好地与序列化配合使用。

```
namespace InCityS.BL.Account.Messages
{
    public class CreateAccountCommand : ICommand
    {
        public string UserName { get; set; }
        public string Password { get; set; }

        public string FirstName { get; set; }
        public string LastName { get; set; }

        public CultureInfo Culture { get; set; }
    }
} 
```

被替换为：

```
namespace InCityS.BL.Account.Messages
{
    public class CreateAccountCommand : ICommand
    {
        public string UserName { get; set; }
        public string Password { get; set; }

        public string FirstName { get; set; }
        public string LastName { get; set; }

        public string Culture { get; set; }
    }
 } 
```

# artificial-intelligence - 非连续值作为循环神经网络的输入？

> ID：14466653
> 
> 赞同：1
> 
> 时间：2013-01-22T19:37:51.330
> 
> 标签：artificial-intelligence, neural-network

我希望使用循环神经网络来执行时间序列预测。

我的一些输入介于 0 和 1 之间，而其他输入可能 > 1。

我的目标是分析股市趋势（*请*不要在这方面给我讲课……这只是一个例子）。以下是我的一些输入：

1.  开盘价变化百分比 (>= 0)
2.  最近 n 分钟内库存的斜率（减少/增加） (>= 0)。
3.  股票是否可能处于当天的峰值之一（0 到 1）。

如您所见，一些输入不在 0 和 1 之间。

循环网络可以接收非连续数值（> 1）作为输入吗？如果是这样，我是否只需将 > 1 的值作为输入传递？

# html - 无法从 SoundCloud HTML5 Widget API 获取 Getter

> ID：14466655
> 
> 赞同：2
> 
> 时间：2013-01-22T19:37:57.293
> 
> 标签：html, widget, soundcloud

我正在努力使用 Soundcloud HTML5 Widget API。方法和事件工作正常，但我无法记录 getter。我一直在查看 Soundcloud API 文档，但找不到问题所在。Soundcloud Playground 运行良好，但他们在博客[http://developers.soundcloud.com/blog/html5-widget-api](http://developers.soundcloud.com/blog/html5-widget-api)中提供的示例不是。所以我想知道，我在这里遗漏了什么，还是 API 有问题？这是我剥离的 HTML，它不起作用：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://w.soundcloud.com/player/api.js" type="text/javascript"></script>
<script>
        $(document).ready(function() {
            var widget = SC.Widget(document.getElementById('sc-widget'));
            widget.bind(SC.Widget.Events.READY, ready());

            function ready() {
                widget.getDuration(function(durationSC) {
                    console.log('Duration: ' + durationSC);
                });
            }

            $('button').click(function() {
                widget.toggle();
            });
        });
    </script>
</head>
<body>
    <iframe id="sc-widget" src="http://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/39804767&show_artwork=false&liking=false&sharing=false&auto_play=false" height="195" scrolling="no" width="480" frameborder="no"></iframe>
<button>Play / Pause</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:17:55.640

感谢您报告此事。现在 API 确实存在问题 - 快速修复将是`https`在小部件的 iframe中使用`src`。

我们将尝试尽快部署修复程序并将文档修复到`https`应该使用的位置。

# macos - 显示 Mac OS X 系统 NSMenu 而不是默认值

> ID：14466656
> 
> 赞同：1
> 
> 时间：2013-01-22T19:38:13.353
> 
> 标签：macos, cocoa, nsmenu

我想知道是否有办法摆脱启动默认 Mac OS X 应用程序时获得的默认 NSMenu，而是显示 Finders/Systems NSMenu。

（尽管它可能很糟糕，设计明智）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:48:37.060

如果应用程序被标记`Info.plist`为仅后台 ( `LSUIElement`)，则其菜单栏将永远不会显示在屏幕上，因为该应用程序永远不会被视为最前面。这也将导致应用程序不会显示在 Dock 中，也不会显示在其他几个标准位置（应用程序切换器、强制退出窗口等）。如果你决定走这条路，你的应用程序通常应该提供某种替代 UI 来显示它正在运行并允许用户退出它（例如，将[NSStatusItem](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSStatusItem_Class/Reference/Reference.html)添加到菜单栏）。

话虽如此，您的应用程序的菜单栏应该始终包含一些项目，无论它是否显示，包括：

*   退出，隐藏应用程序 / 隐藏其他 / 显示全部
*   关闭窗口
*   撤消、剪切/复制/粘贴、全选

这是因为这些菜单项具有用户认为始终可用的通用键盘快捷键（例如，Cmd+X/C/V 用于剪切/复制/粘贴）。

# c# - 将 BLOB 文件从 SQL Server DB 传输到磁盘的最佳程序是什么？

> ID：14466657
> 
> 赞同：0
> 
> 时间：2013-01-22T19:38:17.410
> 
> 标签：c#, sql-server, tsql, windows-services

我有一个 SQL Server 数据库，其中包含图像及其元数据。我需要调查 SQL Server 作业，看看它是否可以从中央数据库解包 blob 字段并将它们写入磁盘（文件存储）（需要安排此复制...我们可以在数据库表中设置它吗？），以及作为获取图像的 url，并将它们放入远程服务器。我们正在为该要求计划一个 Windows 服务代理。如果我在某些基本点上存在缺陷，请告诉我，因为我需要知道才能解决它。

# node.js - 如何使用 nodejs child_process exec 访问 cucumber.js 步骤定义中的 stdout、stderr 和错误

> ID：14466659
> 
> 赞同：3
> 
> 时间：2013-01-22T19:38:29.753
> 
> 标签：node.js, cucumber

我是 Cucumber.js 的新手，试图在步骤定义中执行 shell 命令。下面的示例是一个步骤定义片段，Cucumber.js 不打印标准输出。我基本上需要一步访问stdout和stderr。

```
var exec = require('child_process').exec;

this.Given(/^XYZ server is running$/, function(callback) {
child = exec('pwd', function (error, stdout, stderr) {
  console.log('stdout: ' + stdout);
  console.log('stderr: ' + stderr);
  if (error !== null) {
    console.log('exec error: ' + error);
  }
});
callback();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T20:05:00.893

看起来像是[nodejitsu](http://docs.nodejitsu.com/articles/child-processes/how-to-spawn-a-child-process)的一个很好的例子。

```
 var childProcess = require('child_process'),
     ls;

 ls = childProcess.exec('ls -l', function (error, stdout, stderr) {
   if (error) {
     console.log(error.stack);
     console.log('Error code: '+error.code);
     console.log('Signal received: '+error.signal);
   }
   console.log('Child Process STDOUT: '+stdout);
   console.log('Child Process STDERR: '+stderr);
 });

 ls.on('exit', function (code) {
   console.log('Child process exited with exit code '+code);
 }); 
```

# ruby-on-rails - 如何在 jQuery.ui.autocomplete 中的自动完成弹出窗口下方添加指向所有搜索的链接？

> ID：14466662
> 
> 赞同：2
> 
> 时间：2013-01-22T19:38:40.543
> 
> 标签：ruby-on-rails, ruby, jquery-ui, autocomplete

我有使用 jQuery UI 自动完成插件的搜索建议自动完成功能。 [http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

但是如何在结果弹出项的底部添加其行为类似于 Quora（见下文）。

**Javascript**

```
$("#question_search").autocomplete({
  source:$('#question_search').data('source'),
  html: true,
  appendTo: "#search_results",
  select: function( event, ui ) {
    window.location=ui.item.value;
    return false;
  },
  focus: function( event, ui ) { },
  open: function( event, ui ) { }); 
```

**看法**

```
<div id="question_search_form">
  <input type="text" id="question_search" data-source="<%= new_search_url %>" />
  <div id="search_results"></div>
</div> 
```

**例子**

![Quora 搜索自动完成](../Images/9e083eea81b31dfb01b84694804db1b3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T20:07:10.493

我建议覆盖`_renderMenu`然后简单地在列表项中附加一个锚点。

JAVASCRIPT：

```
$( "#question_search" ).autocomplete({
    source:$('#question_search').data('source'),
    html: true,
    appendTo: "#search_results",
    select: function( event, ui ) {
        window.location=ui.item.value;
        return false;
    },
      focus: function( event, ui ) { },
      open: function( event, ui ) { }
}).data( "autocomplete" )._renderMenu = function( ul, items ) {
  $.ui.autocomplete.prototype._renderMenu.apply( this, [ul, items] );
  ul.append( '<li><a href="/search/'+ this.term + '">Search: '+ this.term + '</a></li>' );  
}; 
```

演示：http: [//jsfiddle.net/4pk3V/42/](http://jsfiddle.net/4pk3V/42/)

希望这可以帮助！如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T19:46:13.700

只需在搜索结果后制作一个 div ......？

# ruby-on-rails - 在 as_json 中使用方法结果

> ID：14466664
> 
> 赞同：0
> 
> 时间：2013-01-22T19:38:44.163
> 
> 标签：ruby-on-rails, json, model

现在我在模型中的 as_json 方法中有以下内容：

```
 #values we will pass to Json
  def as_json(options={})
    super(:only => [:name, :last_name, :age])
  end 
```

我有一个方法可以执行一些逻辑并返回一个值：

```
def self.full_name
 self.name + self.last_name
end 
```

如何在 as_json 中返回“选项”结果以及我已经拥有的字段？我试过这个：

```
#values we will pass to Json
  def as_json(options={})
    super(:only => [:name, :full_name => self.full_name, :last_name, :age])
  end 
```

没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:05:54.800

Shadwell 的回答是完全正确的。但是，我认为您可以`:methods`像这样使用密钥：

```
def as_json(options={})
    super(:only => [:name, :last_name, :age], :methods => [:full_name])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:52:42.973

```
def as_json(options = {})
  super(:only => [:name, :last_name, :age]).merge(
    { :full_name => self.full_name }.as_json
  )
end 
```

这使用模型属性的默认实现，然后合并到您的派生属性中。

# apache - 缓慢的http文件共享

> ID：14466670
> 
> 赞同：1
> 
> 时间：2013-01-22T19:39:18.463
> 
> 标签：apache, xampp

使用 XAMPP 我正在使用 Apache 通过本地网络共享文件。

为了公开一个目录，我在我的 conf\httpd.conf 文件中添加了以下内容。这可行，但我只能获得 550 KB/s (4.4 Mb/s) 的吞吐量。这比我从互联网上下载的速度要慢。如何配置服务器，以便更接近理论最大吞吐量 65 Mbps。

（我知道我不会获得完整的 65 Mbps，但我希望获得 50 而不是 4.4，这是不可接受的）

```
<Directory "D:\MySharingDirectory">
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

<IfModule alias_module>
Alias /MySharingDirectory "D:\MySharingDirectory"
</IfModule alias_module 
```

>

有人可以帮我配置 Apache 服务器以更有效地通过 HTTP 进行文件共享吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:39:15.210

Apache 中没有默认带宽限制。因此，带宽问题可能位于您的下载工具和 Apache 之间的任何位置。尝试在服务器本身上启动下载，从而消除网络。

# emacs - emacs ido-find-file 默认文件是当前行

> ID：14466674
> 
> 赞同：1
> 
> 时间：2013-01-22T19:39:36.400
> 
> 标签：emacs

我可以从`Find file: /currentpath/`minibuffer开始`M-x ido-find-file`吗？

当我运行`M-x ido-find-file`（或`C-x C-f`在我的设置中）时，emacs 使用当前行作为默认文件。它显示`Find file: /currentpath/currentlineinbuffer`在迷你缓冲区中。所以我要做的第一件事就是删除那个默认文件（例如，使用`ESC backspace`）。

我知道`C-x C-f C-f`要回到常规的查找文件行为，但我更喜欢使用 ido-find-file 除了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:06:38.733

对于所需的行为，变量 ido-use-filename-at-point 的值应为 nil。删除字符串

```
(setq ido-use-filename-at-point 't) 
```

（或类似的东西）来自您的配置或设置

```
(setq ido-use-filename-at-point nil) 
```

在配置结束时。

# java - 机器上有很多ip地址，设置传出ip java

> ID：14466677
> 
> 赞同：3
> 
> 时间：2013-01-22T19:39:51.960
> 
> 标签：java, spring, servlets, ip

我最近得到了一台有 10 个 IPv6 地址的机器，这是一个运行 MySQL 和 tomcat 的 CentOS，我正在使用 spring 创建 servlet。

我想知道是否有一种 Java 方式（不是操作系统路由表）来设置来自我服务器上可用 IP 的传出 IP？

我想要做的是让传入地址到达 servlet 并相应地从特定 IP 进行 http 发布。

在我所有的研究中，我认为最接近解决这个问题的就是 httplib，但是对于 Java，有没有类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T20:43:33.513

只需在套接字中使用 localaddr 参数。

[这里](https://stackoverflow.com/questions/91678/how-can-i-specify-the-local-address-on-a-java-net-urlconnection)有很多重复的问题：

# java - 重构点 jsp 点 html 和其他非点 java 文件

> ID：14466683
> 
> 赞同：2
> 
> 时间：2013-01-22T19:40:15.750
> 
> 标签：java, jakarta-ee, netbeans

Java ee Web 应用程序的重构（例如重命名页面名称）在大多数 IDE（例如 netbeans）中做得不好，我观察到重命名（重构）（在此示例中）不反映该名称在其他部分的更改应用程序。例如。在 froms 和其他具有指向重命名页面的链接的页面中。

（这与正常的 .java 文件相反。）我的观察是否正确？如果是这样，解决方案是什么？那是我对 .java 文件的通常做法。但 .jsp 或 html 或其他文件并非如此，即使我重命名（重构）一个 .java 文件。它没有反映在 .jsp 中。.html 文件。我有很多文件指向那个重命名的文件......然后呢

那么首先如何正确地重构。告诉我

**全局搜索和替换是我和大多数开发人员最不想做的事情**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:49:53.880

如果您的 IDE 不支持它，则您只能使用基于文件的普通搜索和替换。

（例如，IntelliJ 在 HTML、XML 等文件中查找字符串的非代码用法。）

# android - 如何使用 Arduino 模拟 Android 触摸输入？

> ID：14466684
> 
> 赞同：3
> 
> 时间：2013-01-22T19:40:15.873
> 
> 标签：android, arduino, appmobi, nexus-7

我正在尝试通过运行 CyanogenMod 10.1 的扎根 Nexus 7 使用[MakeyMakey](http://www.makeymakey.com/)和[Construct 2设置自定义游戏界面。](http://www.scirra.com/construct2)

我已经构建了一个机器人，它使用 Nexus 平板电脑代替它的脸。然后，玩家将能够通过触摸机器人身体的各个部位并完成连接到 MakeyMakey 的电路来与机器人互动。

我还在使用 Construct 2 开发一款游戏，允许玩家扮演机器人，使用他的手、脚和其他按钮来控制他。AppMobi 和 CocoonJS 是当前可用于从 Construct 2 中导出移动应用程序的两个平台。

不幸的是，这两个平台都只支持触摸输入，MakeyMakey 只输出标准的按键功能（W、A、S、D、←、→ 等）。我正在努力寻找一种方法来让 MakeyMakey 替代触摸输入或与游戏交流。

我已经联系了这两个移动平台的开发人员，他们没有关于添加启用此类外部触控输入的预计时间。

我发现我可以运行一个 shell 脚本来直接模拟设备上的触摸输入：

```
sendevent dev/input/event0 3 57 56
sendevent dev/input/event0 3 48 4
sendevent dev/input/event0 3 53 1266
sendevent dev/input/event0 3 54 34
sendevent dev/input/event0 0 0 0 
sendevent dev/input/event0 3 57 4294967295
sendevent dev/input/event0 0 0 0 
```

虽然，不知道如何使用与 MakeyMakey 绑定的按键来运行这样的脚本。

我发现 Tasker for Android 可以运行脚本（！），但该应用程序无法检测按键，因此我无法触发任务。

我觉得深入研究 Ardunio 代码并尝试自定义 MakeyMakey 本身可能是最好的做法，但我不确定它是否可以输出触摸事件，或者[Tasker 会识别按键](https://groups.google.com/d/topic/tasker/Zs3bhqpMICg/discussion)。

![我的设置概述](../Images/74987c6d21dada358be1106cd317ee82.png)

# css - 用更少的 CSS 代码写这个？

> ID：14466686
> 
> 赞同：0
> 
> 时间：2013-01-22T19:40:33.833
> 
> 标签：css

我正在编写 5 个不同元素（奖牌/徽章）的一些 CSS 过渡。我觉得我已经以非优化的方式完成了它，所以我想知道是否可以编写相同的代码，但代码更少？

这是代码：

```
#nav .badges { float:left; height: 173px; width: 173px; background-color: #fff; /*margin:  0 50px 50px 0;*/ display: block; margin-left: 21px; margin-bottom: 20px; -webkit-border-radius: 100px; -moz-border-radius: 100px; border-radius: 100px; }
   #slidingDoors-bronze-badge { background-image: url('../images/menu-badge-bronse_01.png'), url('../images/menu-badge-bronse_02.png'), url('../images/menu-badge-gull-hover.png') !important; background-repeat: no-repeat !important; background-position: 0px 0px, 87px 0px, 0px 180px !important; -webkit-transition: all 500ms ease-in-out; -moz-transition: all 500ms ease-in-out; -o-transition: all 500ms ease-in-out; -ms-transition: all 500ms ease-in-out; transition: all 500ms ease-in-out; }
   #slidingDoors-bronze-badge:hover { background-position: -63px 0px, 150px 0px, 0px 0px !important; }
   #slidingDoors-silver-badge { background-image: url('../images/menu-badge-solv_01.png'), url('../images/menu-badge-solv_02.png'), url('../images/menu-badge-gull-hover.png') !important; background-repeat: no-repeat !important; background-position: 0px 0px, 87px 0px, 0px 180px !important; -webkit-transition: all 500ms ease-in-out; -moz-transition: all 500ms ease-in-out; -o-transition: all 500ms ease-in-out; -ms-transition: all 500ms ease-in-out; transition: all 500ms ease-in-out; }
   #slidingDoors-silver-badge:hover { background-position: -63px 0px, 150px 0px, 0px 0px !important; }
   #slidingDoors-gold-badge { background-image: url('../images/menu-badge-gold_01.png'), url('../images/menu-badge-gold_02.png'), url('../images/menu-badge-gull-hover.png') !important; background-repeat: no-repeat !important; background-position: 0px 0px, 87px 0px, 0px 180px !important; -webkit-transition: all 500ms ease-in-out; -moz-transition: all 500ms ease-in-out; -o-transition: all 500ms ease-in-out; -ms-transition: all 500ms ease-in-out; transition: all 500ms ease-in-out; }
   #slidingDoors-gold-badge:hover { background-position: -63px 0px, 150px 0px, 0px 0px !important; }
   #slidingDoors-sapphire-badge { background-image: url('../images/menu-badge-safir_01.png'), url('../images/menu-badge-safir_02.png'), url('../images/menu-badge-gull-hover.png') !important; background-repeat: no-repeat !important; background-position: 0px 0px, 87px 0px, 0px 180px !important; -webkit-transition: all 500ms ease-in-out; -moz-transition: all 500ms ease-in-out; -o-transition: all 500ms ease-in-out; -ms-transition: all 500ms ease-in-out; transition: all 500ms ease-in-out; }
   #slidingDoors-sapphire-badge:hover { background-position: -63px 0px, 150px 0px, 0px 0px !important; }
   #slidingDoors-agat-badge { background-image: url('../images/menu-badge-agat_01.png'), url('../images/menu-badge-agat_02.png'), url('../images/menu-badge-gull-hover.png') !important; background-repeat: no-repeat !important; background-position: 0px 0px, 87px 0px, 0px 180px !important; -webkit-transition: all 500ms ease-in-out; -moz-transition: all 500ms ease-in-out; -o-transition: all 500ms ease-in-out; -ms-transition: all 500ms ease-in-out; transition: all 500ms ease-in-out; }
   #slidingDoors-agat-badge:hover { background-position: -63px 0px, 150px 0px, 0px 0px !important; } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T19:44:08.647

如果唯一的区别是徽章图像/颜色，那么为什么不把它分成几个类呢？

```
.coreclass {
   background-repeat: no-repeat !important;
   background-position: 0px 0px, 87px 0px, 0px 180px !important;
   -webkit-transition: all 500ms ease-in-out;
   -moz-transition: all 500ms ease-in-out;
   -o-transition: all 500ms ease-in-out;
   -ms-transition: all 500ms ease-in-out;
   transition: all 500ms ease-in-out;
}
.gold { gold stuff here}
.gold:hover { gold hover stuff }
.silver etc... 
```

然后

```
<div class="coreclass gold">...</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:30:40.230

webkit 是最后一个需要供应商前缀的引擎，所有其他引擎都支持无前缀。

[http://caniuse.com/#search=transition](http://caniuse.com/#search=transition)

```
.coreclass {
    background-repeat: no-repeat !important;
    background-position: 0px 0px, 87px 0px, 0px 180px !important;
   -webkit-transition: all 500ms ease-in-out;
   transition: all 500ms ease-in-out;
} 
```

*（很高兴将其添加为另一个答案；还没有足够的评论点...）*

# javascript - 包含 .js 脚本的简单问题

> ID：14466688
> 
> 赞同：1
> 
> 时间：2013-01-22T19:40:47.830
> 
> 标签：javascript, html

我敢肯定这是你一整天都会看到的最简单的代码；我觉得在这方面寻求帮助很愚蠢，但我已经盯着它看了一个小时，我快疯了，因为我不知道为什么它不起作用。

索引.html

```
<html>
<head>
<SCRIPT type="text/javascript" src="include.js"></SCRIPT>
</head>
<body onload="test()">
<p id="center"></p>
</body>
</html> 
```

包含.js

```
function test()
{
  document.getElementByID('center').innerHTML="testing";
} 
```

当我在浏览器窗口中打开索引时，它只会给我一个空白页。我尝试在 test() 函数的第一行放置一个警报窗口，它发出警报，所以它已经走了那么远。如果我将警报放在“测试”行之后，则不会发生。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:42:15.620

代替

```
getElementByID 
```

和

```
getElementById 
```

但是您应该[查看控制台](https://developers.google.com/chrome-developer-tools/docs/console)以找到这些错误。没有这样的工具，你走不了多远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:43:31.453

应该是 getElementById - 最后不是 ID！

尝试在浏览器中按 f12。你应该得到一个错误控制台来帮助解决这些简单的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:45:35.037

尝试：

```
window.onload=function test()
{
  document.getElementById('center').innerHTML="testing";
} 
```

# c - Arduino函数绝对数组？

> ID：14466691
> 
> 赞同：0
> 
> 时间：2013-01-22T19:40:52.690
> 
> 标签：c, arduino

我的代码运行良好并在串行监视器上提供输出，直到我添加此函数调用它停止发送到串行！

该函数用输入数组的绝对值填充结果数组。

```
#define INPUT_SIZE 800

void vabs(double *vec,int vsize,double *result){
  int i;
  for(i=0 ; i<vsize ; ++i)
    result[i] = fabs(vec[i]);
}

double x1[INPUT_SIZE];
int x1size;
double absX1[INPUT_SIZE];
int absX1size;

double Process(int *inputArray,double *qrs){
  int i;

  // Initialization
  for(i=0 ; i<INPUT_SIZE ; ++i)
    x1[i] = (double)inputArray[i];

  x1size = INPUT_SIZE;
  // Cancellation DC drift and normalization
  double meanValue = mean(x1,x1size);
  minus(x1,x1size,meanValue);

  Serial.println(x1[0]);

//  vabs(x1,x1size,absX1);  // Uncomment this line will cause the problem!
  absX1size = x1size;
  *qrs = 5;
  return 10;
} 
```

设置和循环：

```
void setup(){
  Serial.begin(9600);
  delay(1000);
}

void loop(){
  // This array contains 800 values
  int bArr[]= {59,259,259,250,250,250,83,83,...};
  double qrs = 0;
  double heartRate = Process(bArr,&qrs);
  delay(5000);
} 
```

我正在使用具有 128 KB 闪存和 8 KB SRAM 的 Arduino Mega (Atmega1280)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:00:41.773

而不是`fabs()`尝试`(result[i] < 0 ? vec[i] * -1 : vec[i])`，这将告诉您是否存在问题`fabs()`。

旁注，这里似乎有很多不需要的代码。我将假设这是因为您删除了其他部分以在此处发布。

# python - 什么时候适合向 Python 对象动态添加属性？

> ID：14466695
> 
> 赞同：0
> 
> 时间：2013-01-22T19:41:12.433
> 
> 标签：python, class, rest, attributes

我正在创建一个 Python 类作为通过 REST 远程管理的对象的 API。

REST API 包含一个调用，该调用返回定义远程对象属性的字典列表。我正在编写代码以动态添加这些属性作为相应 Python 对象的属性（即：当类被实例化时，对属性列表进行 REST 查询，然后将每个属性添加为实例。）

然而，这让我想起了 PHP 代码，我曾经看过动态添加属性到对象并想“你听说过字典吗？？”

鉴于我的背景植根于 C/C++/Java，这对我来说有点陌生，但对于 Python（和 PHP）课程来说可能是标准的。那么，什么时候适合动态地向对象添加属性而不是使用字典呢？

从我在相关材料中读到的内容来看，在我看来，API 是一个合法的案例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:45:37.893

免责声明：我对 REST 一无所知...

也就是说，出于以下原因，我通常会有点犹豫是否愿意向对象添加属性：

*   由于命名空间冲突，您可能会意外替换一些不想替换的数据
*   字典更容易检查，而不是必须通过`obj.__dict__`或`vars(obj)`类似的东西。

但是，在标准库中添加属性有优先级......这基本上就是`argparse`填充返回的`namespace`. 我认为也许值得问一个问题：“用户会知道哪些属性将被添加到对象中吗？”。如果这个问题的答案是`yes`，并且您不担心前面提到的命名空间冲突，那么也许一个简单的对象是合适的，否则，我只会使用字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:54:42.547

在这样的示例中，我更倾向于重载字典方法—— `__getitem__`, `__setitem__`, `__delitem__`, `keys`, `values`,`items`以及任何其他可能适用的方法。

如果您正在正式定义类来表示 Python 中的数据，那么使用[描述符](http://docs.python.org/2/howto/descriptor.html)对于可读性来说并不是一个坏选择。

# netlogo - Netlogo 编码帮助 - 将海龟分成派系，跟随上方派系，避免下方

> ID：14466696
> 
> 赞同：1
> 
> 时间：2013-01-22T19:41:15.203
> 
> 标签：netlogo

我是 netlogo 的新手，并且一直在结合派系模型和遵循/避免模型的代码。

我已经将我的海龟分成派系（显示为不同的颜色），我试图让它们跟随它们上方的派系，并避免它们下方的派系。如果有人可以看看我的代码会很棒，我认为它不起作用，因为我试图使用“品种”来区分海龟在他们之上/之下的判断，并且所有海龟都需要不同。我已经把我认为不允许它工作的区域以粗体显示..

```
breed [ above ]
breed [ below ]

turtles-own
[ faction ]

to setup
  clear-all
  ask patches [ set pcolor white ]
  set-patch-size 10
  resize-world min-pxcor max-pxcor min-pycor max-pycor 
  ask patch 0 0
   [ ask patches in-radius ( max-pxcor * .9) with [  random-float 100 < density ]
     [ sprout 1
       [ 
         set shape "circle"
         set faction random factions
         set color faction-color
         set size 1.1
         judge
       ]  ]   ]
   reset-ticks
end

to go
  ask turtles [ avoid ]   
  ask turtles
  [ fd 0.1
    if any? above in-radius 360; vision in patches and degrees
    [ set heading (towards min-one-of above [distance myself]) ] ]; adjusts heading to point towards   

 ask turtles
  [ fd 0.1
    if any? below in-radius 360; vision in patches and degrees
    [ set heading (towards min-one-of below [distance myself]) + 180 ] ] ; adjusts heading to point away from wanderer

  tick
end

to judge

  if turtle color = faction-color + 30 
  [ set breed above ]

  if turtle color = faction-color 
  [ set breed same ]

  if turtle color = faction-color - 30 
  [ set breed below ]

end

;; EXTRAS

to avoid
      ifelse not any? other turtles-on patch-ahead 1
      [ fd 0.1 ]
      [ rt random 360 ]
end

to-report faction-color
   report red + faction * 30
end 
```

如果有人能指出我正确的方向，那就太好了。再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:06:08.277

你离得并不远。您已正确确定您对品种的使用不恰当。“上方”或“下方”的属性是相对于正在询问的海龟而言的，而不是海龟本身的属性。可能有更好的方法来执行此操作，但只需对代码进行最少的更改，您就可以使用以下内容：

```
to go
  ask turtles [ avoid ]    
  ask turtles [
    fd 0.1
    let above turtles with [ color = [faction-color] of myself + 30 ]
    if any? above in-radius 360; vision in patches and degrees
      [ set heading (towards min-one-of above [distance myself]) ] ; adjusts heading to point towards   
  ]
  ask turtles [
    fd 0.1
    let below turtles with [ color = [faction-color] of myself - 30 ]
    if any? below in-radius 360; vision in patches and degrees
      [ set heading (towards min-one-of below [distance myself]) + 180 ] ; adjusts heading to point away from wanderer
  ]
  tick
end 
```

（然后您可以完全摆脱品种和您的`judge`程序。）

# grid - 带有网格系统的 HTML5样板

> ID：14466706
> 
> 赞同：0
> 
> 时间：2013-01-22T19:42:05.050
> 
> 标签：grid, html5boilerplate

是否有任何标准网格系统可用于 HTML5Boilerplate。我正在考虑使用grid960，它们一起工作得好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:48:58.847

标准，没有。但我看到越来越多的人使用 Bootstrap。即使是以前依赖 960.gs 的人，包括我在内。Bootstrap 有很多可用的插件，LESS 支持和易于皮肤的样式使其成为一个不错的选择。

# web - 如何开发动态网页？

> ID：14466710
> 
> 赞同：0
> 
> 时间：2013-01-22T19:42:15.563
> 
> 标签：web, ide

我习惯于在服务器端使用 PHP 和 MySQL 以及在客户端使用 LessCSS、jQuery 和 HTML5 编写网页。我现在有一个稍微大一点的项目要做，我确实问我开发像 twitter 这样的 websize 的最佳方式是什么。目的是在您每次单击链接时都不会“停止”网站，从而获得用户体验。

所以事实上这应该不是什么大问题。它是用于异步操作的一点 AJAX 和用于动画的一点 CSS3。但我问我如何开发它最舒服。哪个框架是必须的？我怎样才能使数据库更简单？最后：什么是 Web 开发的好 IDE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:45:35.933

这个问题就像问世界上最好的俱乐部是什么，每个人都有一个答案，但这并不意味着它也会是你的答案。

如果您对 PHP、MySql 和 jQuery 感到满意，那么这样做是合乎逻辑的。

再次谈到IDE，因人而异，我的选择通常是Emacs，但Eclipse也是不错的选择。同样，这并不意味着您或其他人会同意此选择。再一次，这一切都取决于你对什么感到满意，你是一个人工作，还是不在这个项目上等等......

# python - 逐元素矩阵运算返回零（由于整数除法）

> ID：14466713
> 
> 赞同：0
> 
> 时间：2013-01-22T19:42:31.660
> 
> 标签：python, matrix, numpy, matplotlib, plot

我正在用 Python 绘制一个 3D 曲面。这里 muy1 和 muy2 是 meshgrid 创建的两个矩阵：

```
[[-5\.   -4.75 -4.5  ...,  4.25  4.5   4.75]
 [-5\.   -4.75 -4.5  ...,  4.25  4.5   4.75]
 [-5\.   -4.75 -4.5  ...,  4.25  4.5   4.75]
 ..., 
 [-5\.   -4.75 -4.5  ...,  4.25  4.5   4.75]
 [-5\.   -4.75 -4.5  ...,  4.25  4.5   4.75]
 [-5\.   -4.75 -4.5  ...,  4.25  4.5   4.75]] 
```

之后计算并绘制函数 Z

```
Z=zeros((40,40))
for xi in x:
    temp=1/2*(1-muy1)**2-1/2*(1-muy2)**2;
    print temp;
    Z=Z-temp;
print "Final"
print Z 
```

但是我一直让 Z 为 0。这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:50:57.297

`temp`为零，因为它以 开头`1/2`，即整数除法（结果为零）。在这两个地方使用`1./2`或`0.5`来防止这种情况。

```
temp=1./2*(1-muy1)**2-1./2*(1-muy2)**2 
```

# macos - 如何在不从源代码安装的情况下获得 Mac OSX 的 ffmpeg-devel？

> ID：14466718
> 
> 赞同：0
> 
> 时间：2013-01-22T19:42:46.340
> 
> 标签：macos, ffmpeg

如何在不从网站源安装的情况下获得 Mac OSX 的 ffmpeg-devel？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:43:54.183

您从网站上的源代码中提取它。FFmpeg 不是 Mac OS X 上的标准系统库，因此该库和开发文件均未以任何官方格式分发。

# javascript - 隐藏 与班级

> ID：14466722
> 
> 赞同：0
> 
> 时间：2013-01-22T19:43:06.987
> 
> 标签：javascript, html, css, forms, option

我敢肯定这真的很简单。但这对我不起作用。

我写了一个表单，允许用户使用标签从列表中选择月份：

```
<select> <option> 
```

`onchange``.gone`当天的课程`SELECT`被删除，从而显示列表。 从年份中删除`onchanve`的类，从而显示年份。`.gone``INPUT`

我使用 PHP 将年份的值设置为当前年份。我想从月份和 addClass 中获取值`.gone`到第 31 天的`OPTION`标签（以及 2 月的 29 和 30），这样 2 月 30 日等就不是一个选项。我将通过 4==0 % 年份的值来检查闰年，然后不 addClass`.gone`到 2 月 29 日。基本日期选择表。

问题：当我添加类`.gone`时，`OPTION`它仍然显示。我认为这只是我忘记了 html 的一些基本原则。尽管如此，我还是想不通。

CSS：

```
.gone {display:none;} 
```

我也可以使用这个：

```
.hidden {visibility:hidden;} 
```

但这仍然显示空间，所以我没有使用它。

HTML：

```
<html>
  <head>
     <link to css styles>

    <script language="JavaScript" type="text/javascript">
       function showDay() {

           $("#day").removeClass("gone")
       }

       function showYear() {

           $("#year").removeClass("gone")
       }
    </script>

  </head>
  <body>
      <table>
         <tr>
         <td>
           <select id="month" onchange="showDay();">
              <option>January</option>
              <option>more months...yada...yada</option>
              <option>December</option>
           </select>
         </td>
         <td>
           <select class="gone" id="day" onchange="showYear();">
              <option></option>
              <option>1</option>
              <option>2</option>
              <option>more days</option>
              <option class="gone">31</option>
           </select>
         </td>
         <td>
              <input class="gone" type="text"  size="5" name="year" id="year" 
               value="<?php echo date("Y"); ?>"/>
         </td>
         </tr>
      </table>
  </body>
</html> 
```

onchange javascript 和 php 也完全按照我想要的方式工作。我没有费心编写任何脚本来让日子出现或消失，因为简单地将`.gone`类放在`OPTION`标签中是行不通的。有没有办法让它隐藏或不可选？一旦我弄清楚了，我将编写脚本以根据月份和年份实现它。

谢谢大家的帮助！

更新！！！

根据收到的答复。我将禁用我不想使用 javascript 选择的日期。从 w3schools.com 我得到了一个示例脚本，我稍作修改，并设置为从 SELECT 月份调用 onchange。

```
function disableElement()
{
  var sel=document.getElementById("day")
  sel.options[30].disabled=true;
  sel.options[31].disabled=true;
} 
```

它工作得很好。现在第 30 天和第 31 天不可选择！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:44:43.280

> 问题：当我将类 .gone 添加到 OPTION 时。它仍然显示。我认为这只是我忘记了 html 的一些基本原则。尽管如此，我还是想不通。

不，`<option>`s 只是不支持通过 CSS 设置样式。要么`disabled`它，要么[完全从 DOM 中删除它](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:44:57.737

如果您将`disabled`属性添加到选项中，它将禁用它，使其无法选择

`<option disabled>Value</option>`

示例：http: [//jsfiddle.net/BCk8m/](http://jsfiddle.net/BCk8m/)

# c++ - 搜索类对象数组c ++

> ID：14466723
> 
> 赞同：2
> 
> 时间：2013-01-22T19:43:10.343
> 
> 标签：c++, arrays, class

我需要帮助尝试搜索类对象数组。我有一个名为 users 的类，并且有一个存储 3 个玩家的数组。我希望能够在输入他的两个名字时显示特定玩家的信息，并在输入名字时删除他的记录。

我知道我可以使用矢量列表来简化此操作，但我设置了限制。我也认为可以实现线性搜索，但我不知道这是否足够有效。

```
#include <iostream>
#include <string>
#include <math.h>

using namespace std;

void storeinfo() ;
void showinfo() ;
void menu() ;

class user 
{
    string firstname, lastname, currentteam, position, status ;
    int age ;
public:
    user() {};
    user(string fname, string lname, string cteam, string pos, string stat, int age) 
    {
        setFirstName(fname);
        setLastName(lname);
        setCurrentTeam(cteam);
        setPosition(pos);
        setStatus(stat);
        setAge(age);
    } ;
    void setFirstName(string fname)
        {firstname = fname;}
    void setLastName(string lname)
        {lastname = lname;}
    void setCurrentTeam(string cteam)
        {currentteam = cteam;}
    void setPosition(string pos)
        {position = pos;}
    void setStatus(string stat)
        {status = stat;}
    void setAge(int _age)
        {age = _age;}

    string getFirstName()
        {return firstname ;}
    string getLastName()
        {return lastname ;}
    string getCurrentTeam()
        {return currentteam ;}
    string getPosition()
        {return position ;}
    string getStatus()
        {return status ;}
    int getAge()
        {return age ;}
};

user player[20] ;

int main()
{
    menu() ;

    cin.get() ;
    return 0 ;

}

void storeinfo()
{
    string firstname ;
    string lastname ;
    string currentteam ;
    string position;
    string status ;
    int age ;

    for (int i=0; i < 3; i++)
    {
        cout << "Enter First Name : " ; 
        cin >> firstname ;
        player[i].setFirstName(firstname) ;
        cout << "Enter Last Name : " ; 
        cin >> lastname ;
        player[i].setLastName(lastname) ;
        cout << "Enter Player's Age : " ; 
        cin >> age;
        player[i].setAge(age) ;
        cout << "Enter Current Team : " ; 
        cin >> currentteam ;
        player[i].setCurrentTeam(currentteam) ;
        cout << "Enter Position : " ; 
        cin >> position ;
        player[i].setPosition(position) ;
        cout << "Enter Status : " ; 
        cin >> status ;
        player[i].setStatus(status) ;

        cout << "\n\n\n" ;
    }

    /*cout << string(50, '\n');*/

    menu() ;

}

void showinfo()
{
    for (int i=0; i < 3; i++)
    {
        cout << "First Name : " << player[i].getFirstName() << "\n" << "Last Name : " << player[i].getLastName() <<
            "\n" << "Age : " << player[i].getAge() << "\n" << "Current Team : " << player[i].getCurrentTeam() << 
            "\n" << "Position : " << player[i].getPosition() << "\n" << "Status :  " << player[i].getStatus()  << "\n\n";
    }

    cin.get() ;

    menu() ;
}

void menu()
{
    cout << "\n MENU" << "\n" ;
    cout << "\n 1\. Store Player Information" ;
    cout << "\n 2\. Show Player Informaton" ;
    cout << "\n 0\. Exit \n \n" ;

    string x =  "";
    cin >> x ;

    if (x=="a")
    { 
        storeinfo() ;
    }
    else if (x=="b")
    {
        showinfo() ;
    }
    else if (x=="c")
    {
        exit(0) ;
    }
    else
    {
        cout << "Invalid Choice" ;
        menu() ;
    }   
} 
```

我已经做了一个线性搜索算法，似乎正在工作，但我得到的输出不正确下面是这两个函数的代码，再次感谢你

```
int linsearch(string val)
{
    for (int j=0; j < 3; j++)
    {
        if  (player[j].getLastName()==val)
        {
            return j;
        }
        else 
        {
            return 1;
        }
    }

void showinfo()
{
    string search;
    int found ;

    cout << "Please Enter The Player's Last Name : " ;
    cin >> search ;

    found=linsearch(search);

    if (found== 1)
    {
        cout << "\n There is no player called " << search ;
    }
    else
    {
        cout << "\n First Name : " << player[found].getFirstName() << "\n" << "Last Name : " << player[found].getLastName() <<
            "\n" << "Age : " << player[found].getAge() << "\n" << "Current Team : " << player[found].getCurrentTeam() << 
            "\n" << "Position : " << player[found].getPosition() << "\n" << "Status :  " << player[found].getStatus()  << "\n\n";
    }

    cin.get() ;

    menu() ;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:04:56.840

如果您的数据集可以变得很大，那么哈希表是一个可以想到的解决方案。请务必为您的任务选择一个没有太多冲突的散列算法。顺便说一下，有“[完美的散列算法](http://en.wikipedia.org/wiki/Perfect_hash_function)”——如果“始终有 0 次冲突”很重要，你应该研究一下——无冲突、快速的散列表将显着加快处理速度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:14:40.507

The standard solution for mapping a key (like the user's name) to a record of some kind is a `map`.

The stock `std::map` uses a balanced tree, which gives you O(log N) searching, which is usually good enough (and much better than linear), and also lets you iterate through the names in sorted order. This requires an ordered type, meaning `user1 < user2` makes sense.

Alternatively, `std::unordered_map` uses a hash table, which gives you O(1) searching, but doesn't have any ordering. This requires a hashable type, meaning `hash(user1)` makes sense. It also requires C++11, or a C++03 implementation that has it as part of `tr1`, or `boost`.

Which one is appropriate depends on your needs—but often, they're both just fine, and it's just a matter of whether you have a natural ordering or a natural hash function.

Besides being more efficient for both searching and deleting from the middle than a `vector`, `list`, or other collection that requires linear searches, it's also a lot simpler and more natural. For example, compare these two:

```
user find_by_name(vector<user> users, string name) {
    return find_if(users.begin(), users.end(), [](auto it) { it->name == name; });
}

user find_by_name(map<string, user> users, string name) {
    return map.find(name);
} 
```

(And, if you don't have C++11 lambdas, the `find_if` is even worse.)

As for whether "a linear search… is efficient enough", that really depends on how large the collection is. If you're doing 1 search every few seconds through 100 users, just about anything is efficient enough. If you're doing thousands of searches through millions of users, it probably isn't. If you don't know enough to estimate, just try it and see. Profiling should almost always be the first step in any optimization question. However, in this case, given that `map` or `unordered_map` is simpler, easier to read, and more natural than `vector` or `list` in the first place, I don't think you need to bother with that.

# matlab - 从 MATLAB GUI 检索数据并将其发送到 Excel

> ID：14466726
> 
> 赞同：0
> 
> 时间：2013-01-22T19:43:21.207
> 
> 标签：matlab, user-interface, export-to-excel, figure, brush

我创建的 GUI 使用子图并在 GUI 中显示 5 个图。这些图仅在选择某些参数并使用给定参数计算时显示。我看到人们`saveas`用来将绘图保存为我想使用的图形，但是当我将它包含在代码中时，我没有收到任何错误消息，也没有收到保存的`.fig`文件。

理想情况下，我希望有一个类似于`databrush`我的 GUI 的功能，这样我就可以选择我想要的数据并将其保存到 Excel 中。

我想这样做的原因是因为我有两个程序。一个程序使用数据计算响应，而另一个程序基于同一数据的最佳拟合线或多项式拟合计算响应。我想将来自同一输入的两个输出数据放入 Excel 文件和图表中并比较它们的差异。

我怎样才能做到这一点？

# virtual-machine - Vsphere 5.1：虚拟机不共享主机 RAM

> ID：14466728
> 
> 赞同：1
> 
> 时间：2013-01-22T19:43:31.080
> 
> 标签：virtual-machine, esxi, vsphere

Vsphere 5.1：虚拟机不共享主机 RAM

你好，

我正在使用许可 Vsphere 5.1（从 Vsphere 4 升级）

升级后遇到问题，虚拟机不共享 RAM

就像我有两台机器的 2 GB RAM 一样，主机上的总 RAM 使用量变为 4 GB，但实际上活动内存使用量仅为 1 GB 左右。

这在 Vsphere 4 中不是问题，它将活动内存显示为主机内存使用情况，但在 Vsphere 5 中，虚拟机不共享 RAM 并在开机时保留完整的 RAM。

也许有一些设置可以启用内存共享或关闭 RAM 的完全保留。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:50:16.990

得到了答案

更改是 VMkernel 使用大页面来支持虚拟内存页面。有关更多信息，来自 Duncan 的这篇文章将提供足够的信息和指向有关此主题的其他文章的链接：

[http://www.yellow-bricks.com/2011/01/26/re-large-pages-gabvirtualworld-frankdenneman-forbesguthrie/](http://www.yellow-bricks.com/2011/01/26/re-large-pages-gabvirtualworld-frankdenneman-forbesguthrie/)

总之VMkernel会将虚拟机下发的页面放在物理内存上的大页面中，以加快内存访问。当物理 CPU 具有 EPT(Intel) 或 RVI(AMD) 功能时使用大页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T07:42:53.633

据我了解，基本上，当 ESXi 主机处于内存压力下时，大页面被分成 4k 页面以允许 TPS 工作。

现在我的疑问是：使用 EPT（或 RVI）技术“在小页面中拆分大页面”实际上意味着（EPT）地址转换方案已更改，并且 ESXi VMkernel 必须动态构建支持所需的页表新（EPT）翻译方案要求的最后一级间接？

谢谢。

# java - 如何在 Struts 2 中以单一形式处理多个动作

> ID：14466733
> 
> 赞同：4
> 
> 时间：2013-01-22T19:43:46.157
> 
> 标签：java, jsp, struts2, ognl, dmi

我有一个包含三个按钮的表单`print`// `export`。`save`

```
<s:form action="/userAction">
    <s:submit type="image" value="%{'print'}" src="/print.png" />
    <s:submit type="image" value="%{'export'}" src="/export.png" />
    <s:submit type="image" value="%{'save'}" src="/save.png" />
</s:form> 
```

我怎样才能把它映射进去`struts.xml`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:27:05.280

在`struts.xml`动作中通过[`action`标签映射](https://struts.apache.org/core-developers/action-configuration.html#action-mappings)

```
<action name="userAction" class="... 
```

`submit`按钮应包含`method`属性以调用相应的操作方法

```
<s:submit type="image" value="%{'print'}" src="/print.png" method="print" />
<s:submit type="image" value="%{'export'}" src="/export.png" method="export" />
<s:submit type="image" value="%{'save'}" src="/save.png" method="save" /> 
```

**注意**：要映射`method`属性，您应该打开[DMI 。](https://struts.apache.org/core-developers/action-configuration.html#dynamic-method-invocation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:58:12.287

为了使用标签`method`的属性，必须启用。另一种解决方案是使用属性。`<s:submit>``DynamicMethodInvocation``action`

在 JSP 中：

```
<s:form action="save">
    <s:submit type="image" value="%{'print'}" src="/print.png" action="print" />
    <s:submit type="image" value="%{'export'}" src="/export.png" action="export" />
    <s:submit type="image" value="%{'save'}" src="/save.png" />
</s:form> 
```

在 struts.xml 中：

```
<action name="print" class="...">
  <result>...</result>
</action>
<action name="export" class="...">
  <result>...</result>
</action>
<action name="save" class="...">
  <result>...</result>
</action> 
```

# c++ - 如何在 Windows 中的特定显示器上打开一个窗口？

> ID：14466735
> 
> 赞同：4
> 
> 时间：2013-01-22T19:43:54.477
> 
> 标签：c++, windows, graphics

我的任务是修改我们的一个 c++ 产品以在 Windows 操作系统的特定显示器上生成一个新窗口。这适用于需要能够配置平铺多显示器可视化的客户，其中每个显示器由单台计算机上的单独显卡驱动。

在 linux 中，我可以通过在每个显示器上启动一个 X 服务器来轻松地做到这一点，然后在适当设置 DISPLAY env var 的情况下启动可视化软件的多个实例。但是，在 Windows 中执行此操作时，我迷失了。任何指针/建议/示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:55:04.573

您需要枚举所有监视器并在[虚拟屏幕 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145136.aspx)上检查它们的映射。

通过调用[EnumDisplayMonitors (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162610.aspx)枚举监视器。这将枚举一系列`HMONITOR`句柄，您可以将这些句柄传递给[GetMonitorInfo (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144901.aspx)以获取监视器在虚拟屏幕上的位置。

还有一个完整的多显示器支持指南，可能也值得一读。

[关于多显示器 (Windows) @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183314.aspx)

一些注意事项：因为虚拟屏幕是用户控制的映射，所以没有什么能阻止用户在虚拟坐标空间中放置监视器的另一物理侧设置监视器，反之亦然，以及任意数量的其他奇怪的放置场景。此外，一些显卡在检测到插件时会尝试假设显示器在哪里，这从您的软件的角度来看可能是错误的，但可能是由于用户没有注意哪个显示端口映射到左侧（如果它甚至被标记）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T19:55:18.853

您可以使用`EnumDisplayMonitors`Win32 API 中的函数来获取每个显示器的信息。

一旦你有了所需显示的矩形，你就知道该怎么做了 =)

我很确定显示器是按顺序列举的。但是如果你正在平铺，你可以获得所有显示矩形的向量，然后对它们进行排序。

我有一个方便的包装器，我写了一段时间来获取所有监视器信息：

**宣言**

```
class CMonitorInfoEx : public MONITORINFOEX
{
public:
    CMonitorInfoEx();

    LPCRECT GetRect() const { return &rcMonitor; }
    LPCRECT GetWorkRect() const { return &rcWork; }
    LPCTSTR DeviceName() const { return szDevice; }

    bool IsPrimary() const { return (dwFlags & MONITORINFOF_PRIMARY) ? true : false; }

    int Width() const { return rcMonitor.right - rcMonitor.left; }
    int Height() const { return rcMonitor.bottom - rcMonitor.top; }
    int WorkWidth() const { return rcWork.right - rcWork.left; }
    int WorkHeight() const { return rcWork.bottom - rcWork.top; }
};

class CSysDisplays
{
public:
    CSysDisplays();

    void Update();

    int Count() const;
    const CMonitorInfoEx& Get( int i ) const;

private:
    std::vector<CMonitorInfoEx> mInfo;
}; 
```

**执行**

```
BOOL CALLBACK MonitorEnumProc( __in  HMONITOR hMonitor, __in  HDC hdcMonitor, __in  LPRECT lprcMonitor, __in  LPARAM dwData )
{
    std::vector<CMonitorInfoEx>& infoArray = *reinterpret_cast< std::vector<CMonitorInfoEx>* >( dwData );
    CMonitorInfoEx info;
    GetMonitorInfo( hMonitor, &info );
    infoArray.push_back( info );
    return TRUE;
}

CMonitorInfoEx::CMonitorInfoEx()
{
    cbSize = sizeof(MONITORINFOEX);
}

CSysDisplays::CSysDisplays()
{
    Update();
}

void CSysDisplays::Update()
{
    mInfo.clear();
    mInfo.reserve( ::GetSystemMetrics(SM_CMONITORS) );
    EnumDisplayMonitors( NULL, NULL, MonitorEnumProc, reinterpret_cast<LPARAM>(&mInfo) );
}

int CSysDisplays::Count() const
{
    return (int)mInfo.size();
}

const CMonitorInfoEx& CSysDisplays::Get( int i ) const
{
    return mInfo[i];
} 
```

# html - HTML带有增加和减少按钮的标签我知道我的问题可能很愚蠢，但我真的在这里堆叠，我到处搜索，我找不到如何制作一个简单的 html 标签来包含右侧的增加和减少按钮！请帮助...感谢您的宝贵时间！这是我正在谈论的一个示例：哪个更好：使用 setTimeOut 的 Jquery.animate() 或 css 转换 可能重复：使用 jQuery fadeIn 或 CSS3 动画更好吗？什么更快？CSS3 过渡还是 jQuery 动画？我正在尝试制作动画，速度至关重要。我尝试了两种方法，这两种方法都

> ID：14466737
> 
> 赞同：1
> 
> 时间：2013-01-22T19:44:07.603
> 
> 标签：html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:47:06.627

这通常是如何`<input type="number" />`呈现的。也有许多原生不支持它的浏览器的 polyfill。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:46:13.383

这称为微调器。一个例子可以在这里找到：http: [//jqueryui.com/spinner/](http://jqueryui.com/spinner/)

为了扩展这一点，并不是每个浏览器都支持这个功能。

# javascript - 哪个更好： Jquery.animate() 或带有 setTimeOut 的 css 转换

> ID：14466738
> 
> 赞同：1
> 
> 时间：2013-01-22T19:44:08.190
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery fadeIn 或 CSS3 动画更好吗？](https://stackoverflow.com/questions/10863000/is-it-better-to-use-jquery-fadein-or-css3-animations)
> [什么更快？CSS3 过渡还是 jQuery 动画？](https://stackoverflow.com/questions/10984771/whats-faster-css3-transitions-or-jquery-animations)

我正在尝试制作动画，速度至关重要。我尝试了两种方法，这两种方法都有效，但是我想知道哪种方法更有效。

方法 1：使用 Jquery.animate() 我的代码如下所示：

```
$("div").animate({opacity: "show"}, 100, "linear", function() {
    console.log("Animation Complete");
}); 
```

方法 2：使用带有 setTimeOut 的 Css 转换：代码如下所示：

```
$("div").addClass("hidden") //On Page load 
```

然后动画淡入：

```
setTimeout(function () {
    $("div").removeClass('hidden');
}, 100); 
```

Hidden 具有以下样式属性：

```
.hidden { opacity: 0 !important; } 
```

两者都工作得很好，但我想知道哪一个更有效/更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:46:34.483

除非 JavaScript 动画为您提供过渡不提供的东西，否则请使用过渡。

转换是在浏览器级别实现的，并且在某些情况下是硬件加速的，因此它们通常应该尽可能快。

此外，代码要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:51:58.980

过渡效果要好得多，因为它们是在浏览器中本地实现的，并且经常使用硬件加速。在[Rich Bradshaw](https://stackoverflow.com/users/16511/rich-bradshaw)的博客中查看[这个 jQuery animate 与 CSS 过渡性能比较演示。](http://css3.bradshawenterprises.com/blog/jquery-vs-css3-transitions/)默认使用过渡。如有必要，仅使用 jQuery 作为旧浏览器的后备。

[这篇文章](http://blog.alexmaccaw.com/css-transitions)很好地讨论了 CSS 过渡和性能，包括硬件加速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:47:08.193

动画对此更好。`setTimeout()`一段时间后立即删除 css 类，但`animate`逐渐淡入/淡出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:50:43.490

如果您的淡出时间超过 100 毫秒，使用 jquery 动画将对您有所帮助。

# jquery - 无法使用 Django 上传文件

> ID：14466748
> 
> 赞同：1
> 
> 时间：2013-01-22T19:44:38.977
> 
> 标签：jquery, ajax, django, file, django-templates

尝试使用 Django 和 Jquery 上传文件。这里是jquery代码

```
function editProfileData(){
        $("#editProfileForm").submit(save_data);
        function save_data() {
            $.post("/Profile/profile/editProfile/", { 
                csrfmiddlewaretoken: $("input[name='csrfmiddlewaretoken']").val(),
                'UserName':$('#id_UserName').val(), 
                'UserSurname':$('#id_UserSurname').val(),
                'UserEmail':$('#id_UserEmail').val(), 
                'UserAlternateEmail':$('#id_UserAlternateEmail').val(),
                'UserTelephone':$('#id_UserTelephone').val(),
                'UserCity':$('#id_UserCity').val(),
                'File':$('#id_UserAvatar').val().name
            },
            ..................................... 
```

当我尝试上传文件时，它会失败。当您检查 request.POST["File"] 时，我得到以下路径“C:\fakepath\bg.png”。当他们检查 request.FILES["File"] 时，没有数据。如何从 Yyaueri 控制器发送文件。

那种形式的 HTML

```
<form id="editProfileForm" action="{% url "editProfile" %}" method="post" enctype="multipart/form-data">
   {% csrf_token %}

      <input type="file" id="id_UserAvatar" name="File"/>
      <br/>
      <input type="submit" value="Edit"/>           
</form> 
```

我如何请求 Jquery 可以有数据 request.FILES["File"]？

# magento - USPS 费率未显示在 magento 1.4.2 的前端

> ID：14466751
> 
> 赞同：0
> 
> 时间：2013-01-22T19:44:56.637
> 
> 标签：magento, shipping, usps

我有一个 Magento 1.4.2 滴注，在 4 月 11 日运行良好。去年的某个时候。我怀疑去年 1 月 1 日/12 日费率发生变化时，我失去了国际 USPS 运费。我们没有很多国际订单，直到 9/11 才意识到这不起作用，直到现在还没有时间寻找解决方案。我已经尝试了所有我找不到的补丁/修复程序。我可以拉 UPS 费率。我发现正在进行 API 调用并且正在返回费率。它显示在调试打开的日志中，但是当我尝试在后端输入订单时，我在前端收到“运输方式不可用”。

我错过了什么？我们仅使用 USPS 进行国际运输。But no rates are being returned on the front end when all the USPS rates are selected. 这如何“打破”？它在 2011 年 4 月 4 日安装时运行良好。没有对代码或配置进行任何更改。我想不通。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:01:04.127

快速搜索，看起来你并不孤单。这里列出了一个快速修复：http: [//www.magentocommerce.com/boards/viewthread/271462/](http://www.magentocommerce.com/boards/viewthread/271462/)

本质上，“包裹”一词已更改为“包裹”。将 /app/code/core/Mage/Usa/etc/config.xml 复制到 /app/code/local/Mage/Usa/etc/config.xml 并更改：

*   “头等邮件包裹”到“头等邮件包裹”
*   “First-Class Mail International Package* *”到“First-Class Mail International Parcel* *”

转到系统 > 配置 > 运输方式 > USPS 下的管理面板，然后选择新方法。保存配置。

（不相信这个解决方案，只是想帮助你！）

# coldfusion - 有没有办法在coldfusion中轻松地将cfquery输出转换为DataTable JSON格式？

> ID：14466754
> 
> 赞同：2
> 
> 时间：2013-01-22T19:45:02.577
> 
> 标签：coldfusion, google-visualization

我正在尝试使用 Google Charts API 生成图表，但似乎无法获取所需格式的数据。

`serializeJSON(data)`在 Coldfusion 中给了我 JSON 数据，但看起来这不是 Charts API 所期望的。我可以使用任何组件将其转换为所需的格式吗？

## 询问

```
<cfquery name="getAllUsers" datasource="cccac_swipe" result="UserDetailsResult">
Select login_mode,count(login_mode) as total from login_activity,ccac_registered_users where login_activity.student_id=ccac_registered_users.student_id GROUP BY login_mode
</cfquery> 
```

## ColdFusion 的 JSON

```
{"COLUMNS":["LOGIN_MODE","TOTAL"],"DATA":[["manual",123],["swipe",20]]} 
```

## 预期的 JSON

```
{ "cols": [ {"id":"","label":"SignIn Method","pattern":"","type":"string"}, {"id":"","label":"Count","pattern":"","type":"number"} ], "rows": [ {"c":[{"v":"manual","f":null},{"v":123,"f":null}]}, {"c":[{"v":"swipe","f":null},{"v":20,"f":null}]} ] } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T02:02:59.897

这基本上就是你所需要的。只需插入您的查询数据。

```
<cfset chartsData = structNew()>
<cfset chartsData["cols"] = arrayNew(1)>

<!--- use a query loop to copy query data to this struct --->
<cfloop query="UserDetailsResult">
   <cfset chartsRow = structNew()>
   <cfset chartsRow["id"] = ""> 
   <cfset chartsRow["label"] = "SignIn Method">
   <cfset chartsRow["pattern"] = "">
   <cfset chartsRow["type"] = "string">

   <cfset arrayAppend(chartsData["cols"], chartsRow)>
</cfloop>

<cfset chartsDataJSON = serializeJSON(chartsData)> 
```

# objective-c - 由于太长的 awakeFromNib 导致应用程序崩溃

> ID：14466756
> 
> 赞同：1
> 
> 时间：2013-01-22T19:45:05.043
> 
> 标签：objective-c, crash, overflow, awakefromnib

我正在 Xcode 上创建一个简单的应用程序，其用户界面仅包括一个仅包含 5 个标签的窗口。我只想使用日期在标签中显示一些文本。我完成了`-awakeFromNib`方法中的所有工作。但是当我构建并运行应用程序时，图标出现并立即崩溃，没有显示任何窗口。正如我猜想的那样，`-awakeFromNib`加载太多而无法运行。当我删除一半代码时，一切正常。

如此庞大的我该如何应对`-awakeFromNib`？我应该将代码写入另一种方法吗？请注意，当我将方法从`-awakeFromNib`to更改时`-applicationDidFinishLaunching:`，会发生同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:00:06.343

你对问题的分析几乎肯定是不正确的。方法不是“太长”；您删除的一半代码恰好包含一个错误。在 XCode 调试器中运行您的应用程序可能会识别出错误代码。

# .net - 正则表达式解释

> ID：14466757
> 
> 赞同：1
> 
> 时间：2013-01-22T19:45:08.320
> 
> 标签：.net, regex

我试图从 xml 中过滤掉无效字符。虽然我已经成功地做到了，但我在这个过程中写了一个正则表达式，这对我来说是违反直觉的。

请考虑以下 .Net 正则表达式评估：

```
System.Text.RegularExpressions.Regex.Match("Test", @"[\x01-\x08\x0B-\x0C\x0E-\x1F\xD800-\xDFFF\xFFFE-\xFFFF]+").ToString() 
```

现在我的理解是正则表达式模式匹配所有无效的 xml 字符。根据此页面： [http ://www.w3.org/TR/REC-xml/#NT-Char](http://www.w3.org/TR/REC-xml/#NT-Char)

这些是有效字符：

```
#x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF] 
```

据我了解，上面的正则表达式模式是剩余 Unicode 字符（即无效的 xml 字符）的一组差异。然而，仍然运行上面的语句会产生这个结果：

“测试”

（即整个输入字符串）。我无法理解为什么。特别是，这部分正则表达式导致匹配：\xD800-\xDFFF

在我看来，这两组从有效字符中排除了相同的内容：[#x20-#xD7FF] | [#xE000-#xFFFD]

所以我完全不明白为什么上述语句会产生匹配。有人可以帮我破译它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:05:45.210

尝试使用`\u`而不是`\x`.

```
System.Text.RegularExpressions.Regex.Match("Test", @"[\x01-\x08\x0B-\x0C\x0E-\x1F\uD800-\uDFFF\uFFFE-\uFFFF]+").ToString(); 
```

我理解它的方式是您当前的正则表达式匹配字符串“Test”，因为它基本上匹配以下范围

```
\x01-\x08
\x0B-\x0C
\x0E-\x1F
\xD8
0
0-\xDF
F
F
\xFF
FE-\xFF
FF 
```

匹配`0-\xDF`很可能是匹配范围广泛的字符的模式。

# python - 将列表与电子表格进行比较 (Python/xlrd)

> ID：14466759
> 
> 赞同：0
> 
> 时间：2013-01-22T19:45:14.093
> 
> 标签：python, excel, list, compare, xlrd

我正在尝试比较两组帐号（使用 Python 和 xlrd/xlwt）。

第一个是我最喜欢的帐户列表。秒数是当该帐户中的某个人向我寻求帮助时记录的帐户列表。但是，第二个列表实际上是一个电子表格，并且不仅仅包含帐号，例如案例 ID 和类别。例如，帐户“100”调用了“Shoes”并记录为案例#50。（还假设电子表格具有三列：Account、Category 和 Case #）。

我的目标是查看电子表格并找到我最喜欢的帐户（来自第一个列表）中的某个人打电话寻求帮助的任何时间。所以我基本上想使用类似的东西

```
myFavoriteAccounts = ['100','200','300','400','500'] 
```

然后浏览整个电子表格，打印我最喜欢的帐户之一出现的任何实例，以及案例 ID 和类别。

我已经能够找到出现在两个列表中的帐户：

```
match = set(myFavoriteAccounts) & set(spreadsheetAccountsColumn) 
```

但我不知道如何遍历电子表格并捕获每次出现这些帐户之一*以及*类别和案例 ID。

例如，我希望能够确定帐户“100”在两个不同的场合调用了关于“鞋子”的案例 #50，然后再次调用了“袜子”和案例 #70。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:10:45.047

假设您的数据是 csv，您可以使用 fileptr.readlines() 将其读入，然后根据您的分隔符拆分行，从那里应该很容易说

```
data = open('myfilepath','r').readlines()
data = [ d.split('delim') for d in data ]
accountitems = {}

for row in data:
    if row[0] in match: # the account number
        accountitems.setdefault(row[0],[]).append(line) 
```

这将为您构建一个字典，其键是帐户匹配项，其值是包含该帐户的所有条目的列表

您还可以查看我使用 python csv 所做的修改后的代码，这可能会有所帮助：[http ://code.activestate.com/recipes/577996-ordered-csv-read-write-with-colum-based -抬头/](http://code.activestate.com/recipes/577996-ordered-csv-read-write-with-colum-based-lookup/)

或者

```
import re
data = open('myfilepath','r').read() #note using read vs readlines
for fave in favelist:
    print "\n".join( re.findall(r"^%s.*$" % fave, data) ), "\n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:30:32.467

这是一些作为骨架的代码。

```
xls = xlrd.open_workbook(xlsname)
worksheet = xls.sheet_by_name('Accounts') # Use whatever name is on the worksheet tab in excel
max_col = worksheet.ncols - 1 # Cells addressed from 0
max_row = worksheet.nrows - 1 # Cells addressed from 0
account_col = 0 # Assuming it's the first column

for row in xrange(0, max_row):
    value = xlrd.cell_value(row, account_col)
    if value in favorites:
        print "Do something"
        print "I can address other cells in this row if I want"
        for col in xrange(0, max_col):
            new_value = xlrd.cell_value(row, col) 
```

我没有测试过这个特定的脚本，但我在自己的程序中使用了这种方法。

# java - 将按钮添加到 JFace 表格单元格 - 映射

> ID：14466761
> 
> 赞同：0
> 
> 时间：2013-01-22T19:45:16.457
> 
> 标签：java, mapping, swt

我正在为我的 TableViewer 列使用 ColumnLabelProvider。最后一列是为按钮设置的。这是我的代码

```
case 7: {
    Map<Object, Button> buttons = new HashMap<Object, Button>();   
    TableItem item = (TableItem) cell.getItem();
    Button button;
    String filename = (((AplotSaveDataModel.SaveData) element).getFileDir() + "/" + ((AplotSaveDataModel.SaveData) element).getfileName());
    if(buttons.containsKey(cell.getElement())) {
        button = buttons.get(cell.getElement());
    } else {
        button = new Button((Composite) cell.getViewerRow().getControl(),SWT.PUSH);
        button.setImage(appReg.getImage("PDFViewerLabel.ICON"));
        button.setData("file.id", filename);
        buttons.put(cell.getElement(), button);
    }
    TableEditor editor = new TableEditor(item.getParent());
    editor.grabHorizontal  = true;
    editor.grabVertical = true;
    editor.setEditor(button , item, cell.getColumnIndex());
    button.addListener(SWT.Selection, new SelectionListener(item, button, cell.getElement()));
    editor.layout();
    break;
} 
```

我的问题：
为什么你必须有地图？
我试图在那里弄清楚地图的目的。
似乎您可以在没有地图的情况下创建按钮。

# c++ - 在本机 C++ 应用程序中托管 WPF 表单时的性能问题

> ID：14466762
> 
> 赞同：10
> 
> 时间：2013-01-22T19:45:17.603
> 
> 标签：c++, wpf, performance, native

我有 WPF 窗口，它在 WPF 应用程序中托管时运行良好，但是当我从本机 C++ 应用程序中加载它时，渲染需要很长时间，并且 UI 线程会阻塞，直到它完成。

我窗口上的主要问题是一系列项目控件，用于显示 9 x 12 的图标网格，这些图标代表我系统中组件的状态。

整个项目控件的初始渲染最多需要 14 秒。（在 WPF 应用程序中运行时，这几乎是即时的）

每行都有一个文本标题，单击该标题时会显示每个状态图标的小数据摘要（最大值、最小值、平均值、标准差）。单击此标题最多可能需要 4 秒来呈现摘要，但在我的 WPF 应用程序中是即时的。

是否有任何已知的技巧可以使 WPF 在本机应用程序中很好地执行？

[编辑]

我刚刚尝试使用以下代码从大型 .NET Windows 窗体应用程序启动它：

```
 public bool? ShowWpfDialog(System.Windows.Window window, Form owner)
    {
        var helper = new System.Windows.Interop.WindowInteropHelper(window)
                         {Owner = (owner == null) ? IntPtr.Zero : owner.Handle};
        return window.ShowDialog();
    } 
```

我遇到与从本机应用程序运行时相同的性能问题。（.net 应用程序也运行本机代码。）

[编辑]

当我不使用 WindowInteropHelper 时，代码可以正常执行：

```
 public bool? ShowWpfDialog(System.Windows.Window window, Form owner)
    {
        //var helper = new System.Windows.Interop.WindowInteropHelper(window)
        //                 {Owner = (owner == null) ? IntPtr.Zero : owner.Handle};
        return window.ShowDialog();
    } 
```

WindowInteropHelper 在做什么会导致性能问题？

[编辑]

当我使用 WindowInteropHelper 与所有者一起加载资源时，解决资源的方式是否存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T23:40:44.513

WindowInteropHelper 的文档表明您应该将 HELPER 的句柄设置为您的 c++ 句柄

```
WindowInteropHelper wih = new WindowInteropHelper(myDialog);
wih.Owner = ownerHwnd;
myDialog.ShowDialog(); 
```

但你似乎在做相反的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T04:12:19.127

您在帖子中没有提到[HwndSource](http://msdn.microsoft.com/en-us/library/system.windows.interop.hwndsource(v=vs.110).aspx)或[HwndHost](http://msdn.microsoft.com/en-us/library/system.windows.interop.hwndhost(v=vs.110).aspx)，它们是本机代码之间互操作的受支持方式（在 Win32 中托管 WPF 或反之亦然）。 `WindowsInteropHelper`不打算支持完整的互操作场景，它的唯一用途是基本上获取 WPF 的句柄`Window`。

[这些](http://msdn.microsoft.com/en-us/library/ms744829(v=vs.110).aspx)是一系列很棒的文章，我建议您仔细阅读它们，因为除非范围非常有限，否则您想做的事情不会是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:56:00.280

您可以尝试通过[NGEN](http://msdn.microsoft.com/de-de/library/6t9t5wcf%28v=vs.80%29.aspx)创建和使用 .NET 程序集的本机图像，这将显着加快速度，尽管我不知道在您的情况下会有多大差异......至少它应该减少加载时间

# sql - 这是使用事务阻止加载第二个用户的好案例吗？

> ID：14466763
> 
> 赞同：0
> 
> 时间：2013-01-22T19:45:17.303
> 
> 标签：sql, design-patterns, transactions

我有以下情况，使用 C# 和 .NET 4.0。

我需要控制当我加载一组寄存器时，其他用户不能向该组添加一个新的，直到第一个用户没有完成对这些数据的处理。这是因为当一个用户添加一个新的寄存器时，它的数据取决于同一组的所有寄存器的信息。

一个简单的例子（愚蠢的例子，实际情况要复杂一些）。我有一个整数组。我想在我的数据寄存器中有一个指向组的最大 int 的字段。

```
Group: (IDGRoup, Name, description...)

Data: (IDData, IDGroup, IDMaxData,...) 
```

如果我有两个用户尝试将新的 int 添加到组中，则过程如下：

1.- 加载组中的所有号码。

2.- 搜索最大数量

3.- 使用最大数字的 ID 设置 IDMaxData。

4.- 保存信息。

问题是如果两个用户同时加载，并尝试添加一个新的int，如果其中一个用户会添加新的组的最大数量，另一个用户无法将正确的ID设置为最大数量，因为他没有加载新的最大数量。因此信息不连贯，因为该用户将 IDMaxData 设置为旧的最大数。

如何保证数据的一致性？

我正在考虑使用交易。

1.- 从组中加载寄存器，其中 ID 是我想要的组的 ID。如果我使用具有可序列化隔离级别的事务，则在我加载组的寄存器的那一刻，第二个用户被阻止，因为他无法加载寄存器。所以如果第二个用户不能加载组表的寄存器，他就不能添加一个新的寄存器。

2.- 第一个寄存器可以加载数据表中的所有 int。他可以确定所有寄存器都存在，因为第二个用户无法添加新寄存器（他正在等待），因此他可以将 IDMaxData 设置为正确的保修数。

3.- 保存和发布数据。

第二个用户，他正在等待，不能从组表中加载寄存器，并阻止其他用户。完成工作并释放寄存器。

我怀疑这是否是一个好的解决方案。我能看到的唯一问题是我阻塞了 Group 表的寄存器，所以如果有人想更新它的信息，必须等到寄存器释放。但这是一个小问题，因为这个表的信息不会更新。

还有其他选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:59:02.697

您正在描述严格锁相技术，在该技术中，在提交最后一个 trxn 之前不允许开始任何事务。但我们也有其他技术。使用简单的锁相。

```
before any write the trxn must perform the read.
the trxn must acquire the read or write lock before performing any change on data item.
no two trxn can take write lock on same item. 
```

您还可以使用时间戳排序（TO）技术。

有关更多信息，请查看此 ppt ->[并发控制](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=7&cad=rja&ved=0CGkQFjAG&url=http://www.cs.purdue.edu/homes/cs348/slides/ch18-Concurrency%2520Control%2520Techniques.ppt&ei=le7-UPTgD4HJrAf5pIA4&usg=AFQjCNGVHuQPsjwz1EhyTqsqm91G-zDQ4A&sig2=_m8-ZV-sN7NHcK87QyYh4Q&bvm=bv.41248874,d.bmk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:14:38.823

正如Arpit的[并发控制链接](http://docs.oracle.com/cd/B19306_01/server.102/b14220/consist.htm)所说，隔离级别`Serializable`可以避免这个`Phantom Read`问题。因此，它确实是`Serializable`针对您的问题的隔离级别的解决方案。但是隔离级别越高，并发的效率就越低。如何将最大 int 存储到全局静态属性？它基于db进行初始化，并在应用程序关闭时存储回db。并且在读取或更新时需要对全局静态属性应用锁。

# azure - Azure 辅助角色 - 后台任务计划

> ID：14466769
> 
> 赞同：4
> 
> 时间：2013-01-22T19:45:49.483
> 
> 标签：azure, azure-storage, azure-worker-roles

我有一个 azure 存储表，其中我有一堆任务要在某个时间由工人角色完成。例子：

```
 Task 1: -> run every 5 min
       Task 2: -> run every 1 min
       Task 3: -> run every 10 min
       Task 4: -> run every 1 min
       Task 5: -> run every 5 min
       ...........................
       Task 1000: -> run every 1 min 
```

这种方法是否正确：每个任务都有一个名为“LastRun”的日期时间列。还有一个名为“RunEvery”的列存储必须执行任务的时间。worker 角色不断迭代所有任务，并为每个任务使用以下方法检查“LastRun”列：

```
 DateTime currentTime = DateTime.Now;
      if (currentTime >= (myTask.LastRun + myTask.RunEvery))
      {
           myTask.Execute()
      }
      else
      {
           Check.Next.Task.InTable();
      } 
```

如果工作者角色连续运行，那么消耗资源呢？我们如何才能获得资源？或者我可以以更好的方式实现这一点吗？你有什么建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T02:22:37.340

添加到@Simon Munro 的答案：在没有外部调度程序依赖的情况下实现任务调度的另一种方法是在您的工作角色中使用 Quartz 库（ [http://quartznet.sourceforge.net/ ）。](http://quartznet.sourceforge.net/)我在其中一个项目中使用过它，效果非常好。就计划任务而言，它为您提供了很大的灵活性。您仍然需要使用 blob 租赁和 Windows Azure 队列来处理您的工作角色的多个实例之间的并发问题。

**更新**：受此启发，我写了一篇关于相同内容的博客文章，您可以在此处阅读：http: [//gauravmantri.com/2013/01/23/building-a-simple-task-scheduler-in-windows-azure/](http://gauravmantri.com/2013/01/23/building-a-simple-task-scheduler-in-windows-azure/) .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T21:05:01.510

滚动自己的日程安排不是一个好主意。除非您锁定正在读取的数据，否则您会遇到各种问题。例如，您能否扩展到数十或数百个相同的工作角色，并确保每个作业只运行所需的次数。[您可能必须使用诸如blob storage 上](http://blog.smarx.com/posts/managing-concurrency-in-windows-azure-with-leases)的租约之类的东西来“锁定”您的任务。

尽管您正在查看的作业数量可能很多，但一个好的方法是使用 cron 作业服务，例如[setcronjob](https://www.setcronjob.com/)新发布的[aditi 云服务](http://www.aditicloud.com/)。您将任务实现为 Web 服务并将它们连接到外部服务。

就您的资源利用率而言，每隔几分钟触发一次事件的计时器不会在资源方面使用太多。您可以有一个线程来执行从队列中读取的任务（甚至是[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)），因此您一次只执行一个任务（如果*精确*的时间不是问题的话）。其他线程/定时器/事件可以将任务添加到队列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:55:32.873

您当前的方法似乎无法扩展到多个工作角色。

我建议进行一些更改：

1.  使用存储队列来存储准备执行的任务。当队列准备好运行时，向队列添加一条消息，这样其他工作者角色就可以参与执行任务。您还可以使用队列来隐藏任务，直到它也准备好运行。

2.  在读取和更新计划表时锁定 blob 资源，这样只有一个辅助角色可以计划任务。

请记住，您的任务可能（在极少数情况下）执行两次，因此请尝试为此进行设计。

为了避免过于频繁地访问队列或表，如果您的队列和计划为空，请考虑使用 Thread.Sleep 以指数方式退出。

[此博客](http://blog.smarx.com/posts/building-a-task-scheduler-in-windows-azure)包含可能有助于您实施的更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T23:52:30.500

虽然 Gaurav Mantri 写了一篇很棒的文章，展示了如何以安全的方式将 Quartz 与 Azure 存储队列/表/Blob 连接起来，但这个解决方案并不能满足我正在处理的应用程序的要求。在 Azure 事务成本方面，同时使用 Queue/Blobs/Table 可能会变得昂贵，这是我主要关心的问题之一。

我目前正在开发一个需要安排大量任务的 Azure 应用程序，所以我在几天前编写了自己的“家庭”解决方案，但它与 Quartz 的质量相差甚远，到目前为止它只是一个原型，尚未经过正确测试，但对我来说似乎工作正常。

**设计目标**

*   尽可能优化存储事务。这仅使用 RangeQueries 和 BatchOperations 完成，事务尽可能地分组。调度和获取 50 个任务只需 3 个存储事务即可完成。
*   每个 ScheduledTask 都必须正确“提交”，（否则稍后将再次启动）。
*   简单且非侵入性的 API
*   调度程序类线程安全，并且在多个实例中应该是整体安全的

并发问题是使用删除操作解决的，如果任务已经同时出队，该操作将失败。（内部处理）

我刚刚在[这里](https://github.com/raizam/SimpleAzureScheduler)发布了这个项目。这本来不是要出版的，被认为是这样的。当您发现错误时请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T15:10:25.163

如果任务不需要过于频繁地运行，一种方法是创建一个 Azure SQL 表并为每次执行生成一行。作为列，您将拥有执行时间和应该运行的任务的一些标识符。因此，如果一个任务每天运行一次，并且您希望它保持运行 5 年，您将放置 5*365 行。

工作人员将运行无限循环，从该表中选择执行时间小于当前时间但尚未执行的任务。对于多个工作人员，您需要处理事务以确保每个任务仅由一个工作人员执行。

或者，您甚至可以对 Azure 服务总线使用类似的机制。服务总线支持预定传递，并且消息的存活时间似乎没有上限。使用服务总线，您只需为每个计划执行推送消息，并将交付时间作为执行时间。然后工作人员将从队列中弹出消息。

使用服务总线的一个好处是您可以轻松添加更多工作人员，而不必担心他们会开始处理相同的任务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-09T11:02:07.573

可能是在回答一个老问题。但与其使用重量级的 Cron 类库（其中很多），不如花点时间学习 Rx The Reactive Extensions 并在那里使用 Timer 可能是值得的。[来自 Rx wiki 的一个简单示例](http://rxwiki.wikidot.com/101samples#toc34)

# ios - 如何在代码中制作图像选择器

> ID：14466776
> 
> 赞同：-3
> 
> 时间：2013-01-22T19:46:18.483
> 
> 标签：ios, objective-c, image

如何在代码中创建图像选择器？

我使用带有 ARC 的 iOS 6.0。

我希望能够选择图片并以某种方式获取所选图像的 UIImage 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:54:52.977

基本实例化是这样的

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
[imagePicker setDelegate:self];
imagePicker.modalPresentationStyle = UIModalPresentationOverFullScreen;
[self presentViewController:imagePicker animated:YES completion:nil]; 
```

获取图片的三种方式

```
//Pick from Camera
imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;//Make sure to enable permission for this in info.plist; see: https://stackoverflow.com/a/44690117/2057171

//Pick from all folders in the gallery
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

//Pick from PhotosAlbum(camera roll)
imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum; 
```

然后检查源是否存在

```
//Check Camera available or not
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])

//Check PhotoLibrary available or not
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) 

//Check front Camera available or not
if ([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront]) 
```

您应该实现委托协议以获取用户选择的图像

```
//Tells the delegate that the user picked a still image or movie.
 (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
  UIImage *selectedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
  [imagepicker dismissModalViewControllerAnimated:YES];
}

//Tells the delegate that the user cancelled the pick operation.
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
} 
```

使用 UIImagePickerController 的简单教程

[http://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_(Xcode_4)](http://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_(Xcode_4))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:52:27.857

`<UIImagePickerControllerDelegate>`将委托添加到文件`@interface ViewController`中的行`.h`

如果您要将模拟器用作调试器，请确保您的模拟器中有图片，然后调用以下方法

```
- (void)showImagePicker
{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.modalPresentationStyle = UIModalPresentationOverFullScreen;
    [self presentModalViewController:imagePicker animated:YES];
}
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // Get the selected image.
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    [picker dismissModalViewControllerAnimated:YES];
}
-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:50:31.573

展示它：

```
UIImagePickerController *picker;
picker = [[UIImagePickerController alloc] init];
[picker setDelegate:self];
[picker setSourceType:type];

[self presentViewController:picker animated:YES completion:nil]; 
```

获取 UIImage：

```
- (void)imagePickerController:(UIImagePickerController *)thePicker didFinishPickingMediaWithInfo:(NSDictionary *)info
{   
    // Do something with "image"
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    // users typically expect that if they took a photo it will be saved
    if (thePicker.sourceType == UIImagePickerControllerSourceTypeCamera) {
        UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
    }

} 
```

# javascript - 如果不允许完成，光标动画会出现故障

> ID：14466777
> 
> 赞同：0
> 
> 时间：2013-01-22T19:46:31.257
> 
> 标签：javascript, animation, onclick, event-listener

我遇到的问题是，如果不允许动画完成，它会出现故障。除此之外，一切都按我的计划进行。此外，如果您发现任何可以对“物理”进行改进以使其看起来更自然或令人兴奋的地方，请随意将其扔进去！另外我是 javascript 新手，因此非常感谢格式化建议！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Click Move</title>
<script type="text/javascript">
document.onmousedown = getCursorXY;

function getCursorXY(e) {
var cursorX = (window.Event) ? e.pageX : event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft :document.body.scrollLeft);
var cursorY = (window.Event) ? e.pageY : event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
positionMessage(cursorX,cursorY);
}

function positionMessage(cursorX,cursorY){
if (!document.getElementById) return false;
if (!document.getElementById("message")) return false;
var elem = document.getElementById("message");
elem.style.position = "absolute";
moveElement("message",cursorX,cursorY,20);
}

function moveElement(elementID,cursorX,cursorY,interval) {
if (!document.getElementById) return false;
if (!document.getElementById(elementID)) return false;
var elem = document.getElementById(elementID);
var xpos = parseInt(elem.style.left);
var ypos = parseInt(elem.style.top);

if (xpos == cursorX && ypos == cursorY) {
    return true;
}
if (xpos < cursorX) {
    var dist = Math.sqrt(cursorX - xpos);
    xpos += dist;
}
if (xpos > cursorX) {
    var dist = Math.sqrt((xpos - cursorX));
    xpos -=  dist;
}
if (ypos < cursorY) {
    var dist = Math.sqrt((cursorY - ypos));
    ypos +=  dist;
}
if (ypos > cursorY) {
    var dist = Math.sqrt((ypos - cursorY));
    ypos -= dist;
} 

elem.style.left = xpos + "px";
elem.style.top = ypos + "px";
var repeat = "moveElement('"+elementID+"',"+cursorX+","+cursorY+","+interval+")";
movement = setTimeout(repeat,interval);
}

function updateSpan(element){
message = document.getElementById("message");
newMessage = document.getElementById(element.id);
message.innerHTML = newMessage.id;

}

</script>

<style type="text/css">
#message {
width: 90px;
height: 50px;
background:#999;
z-index: 20;
}

#blue_box {
position: absolute;
top: 100px;
left: 100px;
width: 60px;
height: 50px;
background:#03F;
}

#red_box {
position: absolute;
top: 200px;
left: 100px;
width: 60px;
height: 50px;
background:#F00
}
</style>
</head>

<body>
<div id="message" style="top:50px; left:100px;">WEEEEE!!!!!</div>

<div id="blue_box" onclick="updateSpan(this)">Blue_Box</div>
<div id="red_box" onclick="updateSpan(this)">Red_Box</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:51:04.520

将此添加为函数的第一行：

```
clearTimeout(movement); 
```

功能：

```
function getCursorXY(e) {
clearTimeout(movement);
var cursorX = (window.Event) ? e.pageX : event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft :document.body.scrollLeft);
var cursorY = (window.Event) ? e.pageY : event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
positionMessage(cursorX,cursorY);
} 
```

然后将其放在您的 getCursorXY 函数上方：

var 运动；

# iphone - 倾斜手机时围绕 x 轴旋转 TransformView

> ID：14466778
> 
> 赞同：1
> 
> 时间：2013-01-22T19:46:33.983
> 
> 标签：iphone

我有一个 TransformView，里面有一个图像（一个箭头），我已经旋转了它，所以视图位于 z 轴上。现在我希望当我倾斜 iPhone 时图像围绕 x 轴旋转。就像当我将我的 iPhone 保持在垂直直立位置并将它倾斜到平坦向上的位置时，我希望箭头从 z 轴平稳地移动到 y 轴，并在我将它倾斜回到垂直直立位置时返回 z 轴. 这可能吗？我该如何实现？感谢您的回答。

# windows - 为什么 Visual Studio 安装到多个驱动器上？

> ID：14466787
> 
> 赞同：1
> 
> 时间：2013-01-22T19:47:15.090
> 
> 标签：windows, visual-studio-2008, installation

我正在将 Visual Studio 2008 安装到一台新机器上（是的，我知道老式但我想这样做），安装程序似乎决定将数据写入连接到我系统的三个硬盘驱动器中的*两个。*无论我选择什么选项，它总是告诉我 C（我的主驱动器）和 X（我的备份驱动器）上需要一些驱动器空间。我只想要写给 C 的东西。这是一个例子：

![Visual Studio 2008 设置](../Images/11457c866a3793c53025d870fb94beea.png)

我的 X 卷上总是需要一些空间。为什么？有没有办法强制它安装到 C 上？我想我可以在物理上断开除 C 之外的所有驱动器，但有谁知道为什么 VS2008 如此坚决地写入多个驱动器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:33:41.413

我认为答案是 Visual Studio 2008 安装程序希望将其 MSOCache 目录放在我的 X 驱动器上。安装程序似乎对不将我的 C 盘用于该目录的想法深信不疑。即使我断开了我的 X 驱动器，它也开始说它想使用我的 Z 驱动器上的一些空间！！！！

最后，我通过在 Visual Studio 2008 安装过程中断开除 C 驱动器之外的所有驱动器来强制它使用我的 C 驱动器。

# ios - 没有手机/wifi连接的MKMapview无法在设备上正确显示

> ID：14466788
> 
> 赞同：0
> 
> 时间：2013-01-22T19:47:19.043
> 
> 标签：ios, mkmapview, coordinates, cllocationmanager

```
 #define LOCATION_DISTANCE 80.4672
 - (void)viewDidLoad
{
     [super viewDidLoad];
     ....some computation
     locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBestForNavigation];
    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager startUpdatingLocation];

    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 360.0*NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [locationManager stopUpdatingLocation];

    });
     ..........some more computation
 }
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{

  CLLocation *obj = [locations lastObject];
  if (obj.coordinate.latitude != 0 && obj.coordinate.longitude != 0 )
{
    CLLocationCoordinate2D currrentCoordinates ;
    currrentCoordinates.latitude = obj.coordinate.latitude;
    currrentCoordinates.longitude = obj.coordinate.longitude;
 if(obj.horizontalAccuracy>0 && obj.horizontalAccuracy<100){
            self.turnedOffLocationServices =YES;
                [locationManager stopUpdatingLocation];

        } .... more computation
  [self setUpMap:currrentCoordinates];
}
 - (void)setUpMap:(CLLocationCoordinate2D)currentCoordinates
{
      MKCoordinateRegion extentsRegion = MKCoordinateRegionMakeWithDistance(currentCoordinates, LOCATION_DISTANCE, LOCATION_DISTANCE);

MKMapView *mvMap = [[MKMapView alloc] initWithFrame:CGRectMake(20, 594, 360, 347)];
mvMap.delegate = self;
[mvMap setRegion:extentsRegion animated:YES];
mvMap.mapType = MKMapTypeSatellite;
mvMap.autoresizingMask = UIViewAutoresizingNone;
//mvMap.showsUserLocation = YES;
NSLog(@"the current lat is %f", currentCoordinates.latitude);
NSLog(@"the current long val is %f", currentCoordinates.longitude);

[self.scrollView addSubview:mvMap];

ITMAnnotation *annotation = [[ITMAnnotation alloc] initWithCoordinate:currentCoordinates addressDictionary:nil];
annotation.title = @"Drag to Move Pin";
annotation.subtitle = [NSString stringWithFormat:@"%f %f", annotation.coordinate.latitude, annotation.coordinate.longitude];
NSLog(@"subtitle change at 314");

[mvMap addAnnotation:annotation];
self.tempMapView = mvMap;
} 
```

所以我有 viewDidLoad 来创建位置管理器。我认为应该使用 didUpdateLocations。我使用该坐标调用 setUpMap 方法，然后在 ipad 屏幕的左下角得到一张地图。我的问题是：1）在无 WiFi/蜂窝模式下，我无法获得准确的位置。它的方式。但是我手动输入坐标（有文本字段将采用这个坐标）它可以工作并显示位置。2）我假设在这种无 wifi/无蜂窝模式下添加了 4 条记录。我可以在地图显示中添加 3 个罚款（但再次与我当前的位置不同的位置）。但是在第四次（或稍后的某个时间），当我访问应该显示地图的屏幕时，它是白色的。这有意义吗。如果您需要更多信息，请询问。谢谢..哦，这一切都在设备上而不是模拟器上。还有它的iOS6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:51:47.620

电池和 GPS 在同一芯片上，因此关闭电池也会关闭 GPS。如果您只想停止数据传输但仍需要 GPS，则可以在网络设置下关闭移动数据。您仍然可以拨打电话，但您的设备无法下载任何内容（如果您也关闭了 wifi）。

# php - 排除基于xPath的部分html

> ID：14466794
> 
> 赞同：1
> 
> 时间：2013-01-22T19:48:08.540
> 
> 标签：php, html, dom, xpath

我正在尝试为这个[页面报废](http://www.toysrus.com/product/index.jsp?productId=3685677&cp=2255956.2273442.2469772.3263938&green)

![在此处输入图像描述](../Images/da94e4406b86ed3fde7236b201ba7f90.png)

我正在使用 xPath 来选择它，我的代码是..

```
$safeFlag = true ;
//*[@id="tabset_productPage"]/dd[1]/div/div   //HAVE TRIED THIS TOO
//*[@id="tabset_productPage"]/dd[1]/div/div  // HAVE TRIED THIS
$safety_query='//*[@id="tabset_productPage"]/dd[1]/div/div/text()'; 
    $safety = $xpath->query($description_query);

    foreach ($safety as $word1) {

        $safety_warning[]=(trim($word1->nodeValue));
        if($safety_warning != ''){
        $safeFlag = false ;
        $safety_warning[]= 'NO SAFETY WARNING..';
        }
    }

var_dump($safety_warning); 
```

对于描述文本，我使用 xPath

```
//*[@id="tabset_productPage"]/dd[1] 
```

但问题是，使用所有这些，我完全得到了安全警告和描述......

我的问题是，我想分别选择安全警告和描述文本，但我总是将它们作为一个整体，包括安全警告和描述的完整文本，对于上面的所有 xPath.. 此外，html 结构并不总是相同的..描述有时可以`<br> or <p>`放置标签，

有人可以指导我吗？一些建议或大纲我怎样才能做到这一点？如何将安全警告/描述放在单独的列/变量中，而两者都是同一元素的子元素..

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:15:42.400

安全警告是 的第一个文本子节点`//dl[@id="tabset_productPage"]/dd[1]/`。要从选择中排除它，您可以选择位置大于 1 的所有文本节点。获取描述的查询如下所示：

```
$description_query='//dl[@id="tabset_productPage"]/dd[1]/text()[position()>1]'; 
```

我准备了一个例子来测试它。它来了：

```
$link = 'http://www.toysrus.com/product/index.jsp?productId=3685677&cp=2255956.2273442.2469772.3263938&green';

$html = file_get_contents($link);
$doc = new DOMDocument();
@$doc->loadHtml($html);

$selector = new DOMXPath($doc);

$safety_query='//*[@id="tabset_productPage"]/dd[1]/div/div/text()';
$safety = $selector->query($safety_query);
$safety_warning = $safety->item(0)->nodeValue;

echo 'Safety Warning: ', $safety_warning, PHP_EOL;

// select text nodes with a position greater than 1
$description_query='//dl[@id="tabset_productPage"]/dd[1]/text()[position()>1]';
$description_result = $selector->query($description_query);

$paragraphs = array();
foreach($description_result as $node) {
    $value = $node->nodeValue;
    if(trim($value) !== '') {
        $paragraphs []= $value;
    }   
}

$description = implode(PHP_EOL . PHP_EOL, $paragraphs);
echo 'Description: ', $description, PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:54:06.417

你有没有尝试过

```
//div[@class = "safetyWarning"] 
```

用于安全警告和

```
//div[@id= "infoPanel"]/dl/dd/text() 
```

产品描述？

# python - python中不存在的库

> ID：14466796
> 
> 赞同：0
> 
> 时间：2013-01-22T19:48:09.720
> 
> 标签：python, mysql

我按照程序安装了 MySQL for python。当我尝试在 python 中导入 MySQLdb 时，它给出了一个错误。

```
import MySQLdb Traceback (most recent call last): File "", line 1, in File "MySQLdb/init.py", line 19, in import _mysql ImportError: No module named _mysql 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:57:59.430

[设置`LD_LIBRARY_PATH`环境变量，使其包含 MySQL 库的路径。](http://mysql-python.sourceforge.net/FAQ.html)

因此，在您的 .bash_profile（.bashrc，.profile 取决于您使用的是哪一个）中添加如下一行：

```
export DYLD_LIBRARY_PATH=/usr/local/mysql/lib:$DYLD_LIBRARY_PATH 
```

（`/usr/local/mysql/lib`是我的 MySQL 库的路径，可能在您的系统中有所不同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:07:03.043

使用 pip 进行包管理和导入，然后运行：

```
pip install MySQL-python 
```

在您的代码中，您应该使用以下方法在顶部导入库：

```
import _mysql
db=_mysql.connect(host="localhost",user="joebob",
              passwd="moonpie",db="thangs") 
```

有关软件包使用的更多详细信息，请参阅[https://github.com/farcepest/MySQLdb1/blob/master/doc/user_guide.rst](https://github.com/farcepest/MySQLdb1/blob/master/doc/user_guide.rst)。

有关 pip 的更多详细信息，请参阅[http://www.pip-installer.org/en/latest/](http://www.pip-installer.org/en/latest/)。

这也是关于包/环境管理最佳实践的一本很好的读物 [https://python-guide.readthedocs.org/en/latest/](https://python-guide.readthedocs.org/en/latest/)

# configuration - 芝麻仓库配置

> ID：14466798
> 
> 赞同：2
> 
> 时间：2013-01-22T19:48:20.010
> 
> 标签：configuration, sesame

我使用 sesame http 存储库，因为我有一个大模式，所以支持推理的存储库太慢（尤其是在添加三元组时）。结果，我使用了一个简单的内存存储库（在工作台上设置它）并在运行时对其进行配置，以支持在我想要的页面中使用以下行进行推理。

```
ForwardChainingRDFSInferencerConfig inferMemStoreConfig = new ForwardChainingRDFSInferencerConfig(new MemoryStoreConfig(true));
SailRepositoryConfig repositoryTypeSpec = new SailRepositoryConfig(inferMemStoreConfig);
RepositoryConfig repConfig = new RepositoryConfig(repositoryID, repositoryTypeSpec);
RemoteRepositoryManager manager = new RemoteRepositoryManager(sesameServer);
manager.initialize();
Repository myRepository = manager.getRepository(repositoryID);

manager.addRepositoryConfig(repConfig); 
```

那么在我添加三元组的页面中，我该如何禁用它？

这是我尝试过的：

```
MemoryStoreConfig memStoreConfig = new MemoryStoreConfig(true);
SailRepositoryConfig repositoryTypeSpec = new SailRepositoryConfig(memStoreConfig);
RepositoryConfig repConfig = new RepositoryConfig(repositoryID, repositoryTypeSpec);
RemoteRepositoryManager manager = new RemoteRepositoryManager(sesameServer);
manager.initialize();

Repository myRepository = manager.getRepository(repositoryID);

manager.addRepositoryConfig(repConfig);

myRepository.initialize(); 
```

有什么帮助吗？也许更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:01:48.883

您不能像这样在运行时更改默认 Sesame 存储库的推理策略。使用特定配置创建存储库后，该配置将被修复。不能将同一存储配置为同时进行推理和非推理。

即使您可以更改它，它也无济于事。我不确定您到底想达到什么目的，但是通过推理将数据添加到存储中速度较慢，因为它必须进行推理。在加载期间禁用推理但在查询期间启用它是没有意义的，因为所有推理工作都是在加载期间完成的，因此在这种情况下不会推断任何内容。

您有多种选择：一种选择是使用完全非推理的存储库，只需进行更智能的查询即可获得所需的内容 - 大多数 RDFS 继承推理可以通过使用查询来替换。

例如，要获取一个类的所有子类`A`：

```
SELECT ?x
WHERE { ?x rdfs:subClassOf+ ex:A } 
```

的所有（继承的）实例`A`：

```
SELECT ?i
WHERE { ?i a [ rdfs:subClassOf* ex:A ] } 
```

等等等等。

另一种选择是研究 Sesame 第三方后端之一，例如 OWLIM，它具有更复杂的推理支持和更好的性能。

# c++ - 试图从 C++ 中重新创建的 Javascript 中获取 unescape 函数

> ID：14466800
> 
> 赞同：0
> 
> 时间：2013-01-22T19:48:27.080
> 
> 标签：c++, escaping

> **可能重复：**
> [如何在 C 中解码 HTML 实体？](https://stackoverflow.com/questions/1082162/how-to-decode-html-entities-in-c)
> [如何在 C++ 中解码 HTML 实体？](https://stackoverflow.com/questions/2078520/how-can-i-decode-html-entities-in-c)

我没有看到任何好的东西，这意味着这可能是一个很好的话题。

我已经用 C++ 编写了一个快速的 escapeHTML 函数，它可以转义很酷的东西，但是我如何用 C++ 来取消它呢？

这确实是寻找一个＆，后跟一个“lt;”，“gt;”，“quot;”，“amp;”的想法 并返回相关数据。

有人有他们创建的版本吗？如果没有，我将创建一个有效的版本。

# php - PHP 和 MySQL 查询过滤

> ID：14466802
> 
> 赞同：0
> 
> 时间：2013-01-22T19:48:30.377
> 
> 标签：php, mysql

我在一家小型生物技术公司工作，我们将大量数据存储在 Google Docs 电子表格中。这对很多事情都很好，但对于某些类型的信息（例如，我们有库存的细胞系以及它们所在的冷冻瓶和盒子），它确实不是最好的格式。我已经自学了一点 MySQL 和 PHP，并设法创建了一个存储相关信息的基本数据库和一个能够显示它的简单 Web 界面。当然要有用，它需要某种类型的过滤/搜索功能，这就是我有点困惑的地方。

对于任何给定的搜索，我都知道如何为它编写一个 MySQL 查询，以及如何从组成用户将提供的过滤器的字段/谓词/值元组中获取它，但我不太确定确切应该进行什么级别的过滤。现在，我基本上在数据库中为将呈现给用户的每个“表”设置了一个视图（视图是必要的，因为呈现给用户的信息来自多个数据库表，并且执行了一个或多个连接）。然后我有一个 PHP 对象，它将在给定数据库和视图名称的情况下创建基本查询，如有必要，附加一个 WHILE 子句和所有过滤内容（例如，将“WHERE box_number = ?”附加到准备好的语句中，并将数字 211 存储在当我调用执行函数时要传递的数组），然后运行查询并将结果显示为 HTML 表。我计划扩展对象以将特定功能构建到不同的表中，例如`box number`字段是一个超链接，当您单击它时，它将带您进入显示冷冻箱内容的页面。

不过，我只是在过去几周内学习了 PHP 和数据库，所以我不确定这是否是实现这一目标的最佳方式。我的室友在 Cisco 做这类事情，他建议使用存储过程是更好的选择。我一直在研究这个，但我不确定是否可以向存储的过程传递任意数量的参数，就像我需要实现过滤一样。我还看到一些消息来源说最好只获取整个表/视图并在 PHP 中进行过滤。

那么，是否有“标准”或“最佳”方式来实现这一目标？对于这个项目，表格不会很大，最多可能有几百个条目。所以性能真的不是问题。大多数情况下，我只需要一种方法，其中一切都相当灵活，并且可以在数据库结构发生变化时轻松更新（将来可能会在大多数表中添加更多列/字段）。我可能可以让这些方法中的任何一种起作用，但我想知道哪一种可能最适合我的情况，所以我最终不需要在以后重新工作。

# javascript - 内容未从被覆盖的元素内部删除

> ID：14466806
> 
> 赞同：1
> 
> 时间：2013-01-22T19:48:39.167
> 
> 标签：javascript, jquery, handlebars.js

解释正在发生的事情的最简单方法是举例：

前：

```
<div id="top">
    <div>Row 1 - Horse</div>
    <div>Row 2 - Pony</div>
</div> 
```

现在我调用车把来覆盖 $('#top') ：

```
<div>Row 1 - Cat</div> 
```

后：

```
<div id="top">
    <div>Row 1 - Cat</div>
</div> 
```

**但是** 这就是它的*样子*：

```
Row 1 - Cat
Row 2 - Pony 
```

直到我手动突出显示*第 2 行 - 小马*或按 CTRL+A 后，文本才会消失。这似乎是 JS 中的某种重绘问题，我找不到其他人以前遇到过这个问题。

**编辑代码示例**

**JS**

```
var source   = $("#top_html").html();
var template = Handlebars.compile(source);
$('#top').html(template({
    'load_top':'1',
    data_obj:return_obj
})); 
```

**车把**

```
{{#if load_top}}        
    {{#foreach data_obj}}
        <div>{{name}}</div>
    {{/foreach}}         
{{/if}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:07:28.063

将 Chrome 更新到 24.0.1312.56m 似乎已经解决了这个问题。

# c++ - 不能使用互斥锁读取共享数据会导致任意陈旧数据吗？

> ID：14466807
> 
> 赞同：2
> 
> 时间：2013-01-22T19:48:41.397
> 
> 标签：c++, multithreading, mutex

假设我们有这个简单的类：

```
class example
{
    bool m_isCanceled;
    example() : m_isCanceled(false) {}
public:
    void cancel() { m_isCanceled = true; }

    void doWork()
    {
        for (int i = 0; i < MAX_RETRIES; ++i)
        {
            // Slow
            doStuff();

            if (m_isCanceled)
            {
                return;
            }
        }
    }
} 
```

如果我们调用`example::doWork()`一个线程，然后在一段时间后调用`example::cancel()`另一个线程，那么在第一个线程看到`m_isCanceled`现在是真的之前是否有限制？

在类似的情况下，我建议我们使用互斥锁保护 m_isCanceled，但我的同事说第一个线程最多会在额外的迭代后看到更新。这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:54:39.997

根本没有保证。理想情况下，您会使布尔变量原子化。如果做不到这一点，它`volatile`恰好可以在几乎所有已知的平台上运行。当然，用互斥锁保护它可以保证工作。

在实践中，无论如何它都会“发生作用”。实现通常不知道`doStuff`或它调用的某些函数是否操作`m_isCancelled`。因此，它将无法在这些调用中将其保存在寄存器或其他东西中。

# php - MYSQL MULTIPLE TABLE JOIN 使用模式匹配/JOIN

> ID：14466816
> 
> 赞同：0
> 
> 时间：2013-01-22T19:49:27.270
> 
> 标签：php, mysql

我在 mysql 中使用多表选择语句来过滤来自某些用户输入的查询。输入 $_POST 值为：1.zipcode [来自位置表] 或 2.city [来自位置表] 和/或 3.on_date [来自日历表] 和/或 4.title [来自帖子表]。

```
FROM table_many
INNER JOIN posts ON posts.title LIKE '%{$title}%'
INNER JOIN users ON users.user_id = posts.user_id
INNER JOIN locations ON locations.post_id = posts.post_id AND locations.city = '$city[0]'
LEFT JOIN calendar ON calendar.post_id = posts.post_id AND calendar.on_date = '$date'
LEFT JOIN uploads ON posts.post_id = uploads.post_id 
WHERE table_many.cat_id = '$row_cat[0]' AND table_many.post_id = posts.post_id"; 
```

此设置适用于这些位置。我可以输入邮政编码或城市并且查询过滤器正确，但是从输入中设置的 $date 和 $title 值不检索任何记录。

有任何想法吗？还是您需要更多信息？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:30:16.003

您在标题中遗漏了 tableName`INNER JOIN posts ON title LIKE '%{$title}%'`

试试 `tableName.title`。

我没有看到任何会使其无法正常工作的查询，但请让我再看一下

# java - java.lang.UnsatisfiedLinkError：java.library.path 中没有 cplex122

> ID：14466818
> 
> 赞同：1
> 
> 时间：2013-01-22T19:49:34.407
> 
> 标签：java, path, classpath, shared-libraries, cplex

编译时，我收到以下注释：

> 注意：某些输入文件使用或覆盖已弃用的 API。
> 注意：使用 -Xlint:deprecation 重新编译以获取详细信息。
> 注意：某些输入文件使用未经检查或不安全的操作。
> 注意：使用 -Xlint:unchecked 重新编译以获取详细信息。

然后我使用以下命令运行：

```
java -Djava.library.path=/usr/local/cplex/ILOG/CPLEX_Studio_AcademicRsearch122/cplex/bin/x86-64_sles10_4.1/ -cp lib/jade.jar:lib/jxl.jar:lib/commons-logging-1.1.jar:lib/junit-3.8.1.jar:lib/log4j-1.2.13.jar:lib/poi-3.8-20120326.jar:lib/cplex.jar:classes jade.Boot -gui 
```

它返回：

```
java.lang.UnsatisfiedLinkError: no cplex122 in java.library.path
java.library.path must point to the directory containing the CPLEX shared library
try invoking java with java -Djava.library.path=... 
```

我很困惑，因为我确实已经包含了路径。路径是对的，我使用相同的路径运行其他程序，它可以工作。会有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T16:48:04.870

我有同样的问题。

您需要使用与 cplex 库具有相同架构的 JRE 运行应用程序。就我而言，我使用的是 32 位 cplex 库和 64 位 JRE。

尝试安装另一个具有不同体系结构的 JRE，然后使用另一个 JRE 重新运行您的程序。

希望这可以帮助

# django - django 中 CELERYBEAT_SCHEDULE 和 @periodic_task 装饰器之间的主要区别是什么

> ID：14466819
> 
> 赞同：3
> 
> 时间：2013-01-22T19:49:35.010
> 
> 标签：django, celery, django-celery

使用 django 对 celery 来说非常新，我看到它是双向完成的，不确定这是偏好问题还是背后是否有特定目的。我正在使用最新版本的 celery 并尝试从 2.x 更新我们当前的代码库 - 在考虑为任务编写测试时，我想记住什么是更好的路线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:15:26.097

当你在你的任务之前使用`@periodic_task`装饰器时，无论如何它都会被安排在 celerybeat 中。在我看来，使用装饰器可以让你的代码更具可读性。

# ios - Rails 作为移动后端的 Longpolling(comet) 解决方案（无 js）

> ID：14466823
> 
> 赞同：0
> 
> 时间：2013-01-22T19:49:50.590
> 
> 标签：ios, ruby-on-rails, mobile, long-polling

是否可以组织实时连接交互rails app和移动客户端（ios，android）？有许多基于 socket.io 的 js 解决方案，但我不知道如何将它们与移动客户端连接。也许有纯铁轨替代品？我知道 rails 4 将具有实时流媒体功能，但我需要 3.2 的解决方案。

谢谢你的帮助！

ps: nginx+passenger 作为网络服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:52:00.793

看起来 pusher.com 是最好的解决方案。Socket.io 独立服务器也有故事的地方

# c# - 垂直调整 StackPanel 的大小以适应其内容

> ID：14466826
> 
> 赞同：2
> 
> 时间：2013-01-22T19:49:55.327
> 
> 标签：c#, windows-8, winrt-xaml, windows-store-apps

我在 a 中有一个文本框，`StackPanel`并且`TextBox`设置为`AcceptsReturn`，因此当您按下 Enter/Return 键时，文本框的高度会变大。

我遇到的问题是我不知道如何使周围`StackPanel`的高度与文本框一起发生变化。因此，当文本框更改时，`StackPanel`.

我们应该怎么做？

```
 <GridView x:Name="texties" Grid.Row="1" Margin="120, 0, 0, 0" ItemsSource="{Binding Something, Mode=TwoWay}" SelectionMode="Multiple">
        <GridView.ItemTemplate>
            <DataTemplate>
                <StackPanel Margin="10" Orientation="Vertical" Width="210" >
                    <StackPanel.ChildrenTransitions>
                        <TransitionCollection>
                            <AddDeleteThemeTransition/>
                        </TransitionCollection>
                    </StackPanel.ChildrenTransitions>
                    <TextBlock Text="{Binding Name, Mode=TwoWay}" FontWeight="Bold" Style="{StaticResource ItemTextStyle}" />
                    <TextBox Text="{Binding Content, Mode=TwoWay}" FontSize="12" Background="{x:Null}" BorderBrush="{x:Null}" BorderThickness="0, 0, 0, 0" AcceptsReturn="True" IsSpellCheckEnabled="True" />
                </StackPanel>
            </DataTemplate>
        </GridView.ItemTemplate>
    </GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:56:13.683

根据您的示例，您没有设置`GridView.ItemsPanel`. 的默认值`GridView.ItemsPanel`是`<WrapGrid />`具有无法更改的设置单元格大小。您可能很想更新到，`<VariableSizedWrapGrid />`但此控件不能更改跨度值，除非在渲染期间。如果你想要的甚至是可能的，它会要求你使用`<StackPanel/>`你的`GridView.ItemsPanel`. 但是，`<StackPanel/>`它不是原生包装，因此您需要找到其他人制作的包装版本，自己制作，或者在单行或单列中使用它。

一些开发人员试图根据`<TextBlock />`. 这是一个好主意，但很难执行。事实证明，UI Element 的大小在渲染之前是不确定的，因此您必须先渲染它，然后为时已晚。如果您想了解一位开发人员是如何完成此计算的（考虑字体系列和字体大小和边距等的难度），请查看[此处](https://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/DynamicTextBlock/DynamicTextBlock.cs)。这样的计算将允许您使用`<VariableSizedWrapGrid />`.

在这个示例中，他正在计算一个椭圆，但它是相同的计算。

```
protected override Size MeasureOverride(Size availableSize)
{
    // just to make the code easier to read
    bool wrapping = this.TextWrapping == TextWrapping.Wrap;

    Size unboundSize = wrapping ? new Size(availableSize.Width, double.PositiveInfinity) : new Size(double.PositiveInfinity, availableSize.Height);
    string reducedText = this.Text;

    // set the text and measure it to see if it fits without alteration
    if (string.IsNullOrEmpty(reducedText)) reducedText = string.Empty;
    this.textBlock.Text = reducedText;
    Size textSize = base.MeasureOverride(unboundSize);

    while (wrapping ? textSize.Height > availableSize.Height : textSize.Width > availableSize.Width)
    {
        int prevLength = reducedText.Length;

        if (reducedText.Length > 0)
            reducedText = this.ReduceText(reducedText);    

        if (reducedText.Length == prevLength)
            break;

        this.textBlock.Text = reducedText + "...";
        textSize = base.MeasureOverride(unboundSize);
    }

    return base.MeasureOverride(availableSize);
} 
```

祝你好运。

# matlab - 在 MATLAB 中生成对数正态随机数？

> ID：14466832
> 
> 赞同：5
> 
> 时间：2013-01-22T19:50:17.200
> 
> 标签：matlab

我正在尝试从对数正态分布中生成 10000 个随机数，其相关正态分布的均值 = 0.3 和标准差。开发。= 0.05 在 MATLAB 中。

我正在使用内置`lognrnd`功能。

我的尝试是：

`R = lognrnd(0.3,0.05,10000,1)`

`R`但是，当我绘制using的直方图时`hist(R)`，相关图是正常的，而不是对数正常的。

我在哪里搞砸了？如果平均值 = 0.3 和标准。开发。= 0.05 的正态分布，生成的对数正态数不应该有平均值 = 0.3 和标准。开发 = 0.05？

多谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T19:59:27.550

您生成的数字实际上来自对数正态分布。情节只是看起来与您的参数相似。比较`hist(R)`起来`hist(log(R))`——形状几乎一样。

至于均值和偏差，请查看[lognrnd 文档](http://www.mathworks.com/help/stats/lognrnd.html)：

```
mu and sigma are the mean and standard deviation, respectively,
of the associated normal distribution. 
```

因此生成的数字预计具有不同的均值和偏差。

编辑：我不确定 Matlab 是否允许您直接指定对数正态分布参数，但您可以从另一组参数中导出一组参数。假设 M 和 V 是对数正态变量的所需参数，您可以计算`mu`并`sigma`使用以下公式：

```
x = 1 + V / M^2
sigma = sqrt(log(x))
mi    = log(M / sqrt(x)) 
```

有关相反的转换，请参见[维基百科](http://en.wikipedia.org/wiki/Log-normal_distribution)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T04:13:38.180

您现在也可以使用[概率分布对象](https://www.mathworks.com/help/stats/working-with-probability-distributions.html#bum5reu)轻松完成此操作，它使您可以访问更广泛的功能（请参阅提供的链接中的列表）。

```
N = 10000;
pd = makedist('Lognormal',0.3,0.05)      % Probability Distribution Object
R = random(pd,N,1);                      % Call random() 
```

正如已经指出的，请注意

```
>> mean(pd)
ans =
    1.3515
>> std(pd)
ans =
    0.0676 
```

# mysql - 长时间运行的查询交替状态

> ID：14466836
> 
> 赞同：0
> 
> 时间：2013-01-22T19:50:31.967
> 
> 标签：mysql

我有一个长时间运行的查询（大约 3 分钟），在执行查询时，会在“发送数据”和“写入网络”之间交替状态。为什么它会像这样交替状态，如果它是网络内的内部请求，为什么需要 1 分钟才能完成 50k 行？

# android - ANR 没有行号

> ID：14466838
> 
> 赞同：0
> 
> 时间：2013-01-22T19:50:44.607
> 
> 标签：android, obfuscation, stack-trace

我收到了来自最终用户的 ANR，但顶行（在我的代码中）没有行号。为什么会这样，我应该如何识别错误？使用 progaurd 对代码进行了混淆。

更具体地说，我的堆栈跟踪的前几行是：

```
java.lang.NullPointerException
 at com.perinote.perinote.main.MainActivity.onOptionsItemSelected(Unknown Source)
 at android.app.Activity.onMenuItemSelected(Activity.java:2502)
 at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:950) 
```

# php - 将旧网站（HTML 文件）保留在网络服务器上，但不允许搜索代理对其进行索引

> ID：14466839
> 
> 赞同：2
> 
> 时间：2013-01-22T19:50:45.330
> 
> 标签：php, html, seo, user-agent, robots.txt

我刚刚为一个将要替换他们旧的（非常旧的、HTML 硬编码的网站）的客户完成了一个网站。问题是他们（现在）想要将他们的旧网站和网络服务器上的所有文件保存在原始位置。这不会对用 PHP 和 Wordpress 制作的新网站造成任何问题，但是当谷歌（和其他人）使用他们的搜索机器人和索引时，它会产生很大的影响。

在进行 Google 搜索时，它仍然会找到旧的 HTML 文件。有什么方法可以“保留”网络服务器上的旧 HTML 文件，但首先要确保没有机器人会为它们编制索引，并且如果有人试图导航到 HTML 页面，例如[http://www .clientdomain.com/old_index_file.html](http://www.clientdomain.com/old_index_file.html)，他们正在重定向？我认为最后一部分可能可以在 .htaccess 中完成，但我没有找到任何有用的搜索。

关于不允许机器人和代理索引 HTML 文件的第一个问题，我试图将这两行放在我的**robots.txt**文件中

```
Disallow: /*.html$  
Disallow: /*.htm$ 
```

但我不确定它是否会起作用？

我可能会以一种完全错误的方式处理这个问题，但我从未尝试过客户曾要求将旧网站保留在同一台服务器上并保留在原来的位置。

谢谢，
- 梅斯蒂卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:57:17.097

```
<?php
$redirectlink = ‘http://www.puttheredirectedwebpageurlhere.com‘;
//do not edit below here
header (‘HTTP/1.1 301 Moved Permanently’);
header(‘Location: ‘.$redirectlink);
exit;
?> 
```

此代码将使用 301 将页面重定向到您想要的 URL。此 .php 的文件名应该是您要重定向的页面的 URL slug。301重定向

应设置 301 重定向，或也称为永久重定向，以永久重定向页面。“永久”一词意味着重定向页面的所有质量都将传递到迂回页面。

那包含着：

网页排名

莫兹兰克

页面权限

流量价值

如果您要进行的更改是……永久的，则会实施 301 重定向。迂回页面现在体现了重定向页面，就好像它是前者一样。全面接管。旧页面将从 Google 的索引中删除，新页面将替换它。

或者您可以在您的 htaccess 中执行此操作，如上面的海报所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:57:33.577

可能有很多方法可以处理这个问题，假设您有一个清晰的页面从旧模板到新模板的映射，您可以在旧模板中检测到 Google 机器人（参见 [1]）并执行 301 重定向（参见[2] 例如）到新模板。

*   列表项 [1][如何使用 php 检测搜索引擎机器人？](https://stackoverflow.com/questions/677419/how-to-detect-search-engine-bots-with-php)
*   清单项 [2][如何实现 303 重定向？](https://stackoverflow.com/questions/13003192/how-to-implement-303-redirect)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T20:00:00.683

需要一些工作，但听起来你需要打开你的 htaccess 文件并开始将 301 重定向从旧内容添加到新内容。

```
RewriteCond %{REQUEST_URI} ^/oldpage.html
RewriteRule . http://www.domainname.com/pathto/newcontentinwp/ [R=301,L] 
```

冲洗并重复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:56:10.937

这绝对是 mod_rewrite 可以帮助的。将您发布的 robots.txt 转换为简单的重写：

```
RewriteEngine on
RewriteRule /.*\.html /index\.php [R] 
```

[R] 标志表示显式重定向。我建议查看[http://httpd.apache.org/docs/2.4/rewrite/remapping.html](http://httpd.apache.org/docs/2.4/rewrite/remapping.html)了解更多信息。您还可以使用 [F] 标志禁止直接访问。

# java - Java：创建 GZIPInputStream 时出错：不是 GZIP 格式

> ID：14466840
> 
> 赞同：8
> 
> 时间：2013-01-22T19:50:48.407
> 
> 标签：java, compression, gzip, gzipinputstream

我正在尝试使用以下 Java 代码来压缩和解压缩字符串。但是从新的 ByteArrayInputStream 对象中创建新的 GZipInputStream 对象的行会引发“java.util.zip.ZipException: Not in GZIP format”异常。有谁知道如何解决这个问题？

```
 String orig = ".............";

        // compress it
        ByteArrayOutputStream baostream = new ByteArrayOutputStream();
        OutputStream outStream = new GZIPOutputStream(baostream);
        outStream.write(orig.getBytes());
        outStream.close();
        String compressedStr = baostream.toString();

        // uncompress it
        InputStream inStream = new GZIPInputStream(new ByteArrayInputStream(compressedStr.getBytes()));
        ByteArrayOutputStream baoStream2 = new ByteArrayOutputStream();
        byte[] buffer = new byte[8192];
        int len;
        while((len = inStream.read(buffer))>0)
            baoStream2.write(buffer, 0, len);
        String uncompressedStr = baoStream2.toString(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T20:06:49.217

混合`String`和`byte[]`; 那永远不适合。并且仅适用于具有相同编码的相同操作系统。并非每个`byte[]`都可以转换为 a `String`，并且转换回可能会给出其他字节。

`compressedBytes`不需要代表一个字符串。

`getBytes`在和中显式设置编码`new String`。

```
 String orig = ".............";

    // Compress it
    ByteArrayOutputStream baostream = new ByteArrayOutputStream();
    OutputStream outStream = new GZIPOutputStream(baostream);
    outStream.write(orig.getBytes("UTF-8"));
    outStream.close();
    byte[] compressedBytes = baostream.toByteArray(); // toString not always possible

    // Uncompress it
    InputStream inStream = new GZIPInputStream(
            new ByteArrayInputStream(compressedBytes));
    ByteArrayOutputStream baoStream2 = new ByteArrayOutputStream();
    byte[] buffer = new byte[8192];
    int len;
    while ((len = inStream.read(buffer)) > 0) {
        baoStream2.write(buffer, 0, len);
    }
    String uncompressedStr = baoStream2.toString("UTF-8");

    System.out.println("orig: " + orig);
    System.out.println("unc:  " + uncompressedStr); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T20:23:39.620

Joop 似乎有解决方案，但我觉得我必须添加这个：一般的压缩，特别是 GZIP 会产生**二进制**流。你**不能** 尝试从这个流中构造一个字符串——它会**中断**。

如果您需要将其转换为纯文本表示，请查看 Base64 编码、十六进制编码、哎呀，甚至是简单的二进制编码。

简而言之，String 对象用于人类阅读的内容。字节数组（和许多其他东西）用于机器读取的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:55:21.660

您使用默认平台编码（可能是 UTF-8）将 baostream 编码为字符串。您应该使用 baostream.getBytes() 处理二进制数据，而不是字符串。

如果您坚持使用字符串，请使用 8 位编码，eh baostream.toString("ISO-8859-1")，并使用相同的字符集将其读回。

# qt - 将常量添加到 QString

> ID：14466841
> 
> 赞同：2
> 
> 时间：2013-01-22T19:50:48.987
> 
> 标签：qt, constants, qstring

我有以下内容：

```
#define versions 0.9.0 
```

我想添加到 QString：

```
QString str = QString("Software version %1").arg(versions); 
```

这行不通。有谁知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T19:58:50.977

`#define versions "0.9.0"`

您忘记在版本号周围加上引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:21:20.033

你的宏是 C 编码风格，如果你用 C++ 方式编码，使用这个：

```
const QString versions = "0.9.0"; 
```

# iphone - iOS 6：AVPlayerItem PresentationSize 返回零 -（naturalSize 方法在 iOS 5 上已弃用）

> ID：14466842
> 
> 赞同：3
> 
> 时间：2013-01-22T19:50:56.343
> 
> 标签：iphone, objective-c, ios6, deprecated, core-video

得到这个代码：

```
videoSize = [[AVPlayerItem playerItemWithAsset:asset] presentationSize]; 
```

// nslogs -> 高度：000 宽度 000

这已弃用：

```
videoSize = [asset naturalSize]; 
```

// nslogs -> 高度：360 宽度 480

为什么会这样？我不明白。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T20:25:41.830

解决了：

```
NSArray* allVideoTracks = [movieAsset tracksWithMediaType:AVMediaTypeVideo];
if ([allVideoTracks count] > 0) {
AVAssetTrack* track = [[movieAsset tracksWithMediaType:AVMediaTypeVideo]objectAtIndex:0];
CGSize size = [track naturalSize];
} 
```

这让我很开心，希望它适用于其他人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-30T02:13:52.987

1.  `presentationSize`in`AVPlayerItem`可以返回`CGSizeZero`播放器项目未准备好播放的值。[文档](https://developer.apple.com/documentation/avfoundation/avplayeritem/1388962-presentationsize)
2.  内心很郁闷`naturalSize`。[文档](https://developer.apple.com/documentation/avfoundation/avasset/1508715-naturalsize)`AVAsset`
3.  就像你的代码一样，建议使用`naturalSize`and `preferredTransform`in `AVAssetTrack`。

```
CGSize size = [[[movieAsset tracksWithMediaType:AVMediaTypeVideo] firstObject] naturalSize]; 
```

# php - 在文本文件的每一行中运行代码

> ID：14466847
> 
> 赞同：0
> 
> 时间：2013-01-22T19:51:17.387
> 
> 标签：php, url, loops, foreach

我有一个带有一些 URL 的文本文件，例如：

[http://1.com](http://1.com)
[http://2.com](http://2.com)
[http://3.com](http://3.com)
[http://n.com](http://n.com)

我需要打开该文件并为该文件中的每一行运行代码，换句话说，为列出的每个 URL 运行代码。到目前为止，当我在数组中有一个 URL 时，代码运行良好。但是如果我可以一起使用这个充满 URL 的文件来做到这一点，那会快得多

我正在尝试类似的东西：

```
 $file1 = "/file.txt";
    $lines = file($file1);
    foreach($lines as $line_num => $v)
   {
    // my code
} 
```

并使用 $v 数组运行代码.. 但这不起作用，因为所有行都在 $v 数组中。那么，如何为文件中的每个 URL 运行我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:59:20.153

看起来您的行尾没有被读入 PHP，您可以像在[这个答案](https://stackoverflow.com/questions/1462720/iterate-over-each-line-in-a-string-in-php)中一样创建自己的拆分函数：

```
foreach(preg_split("/((\r?\n)|(\r\n?))/", $lines) as $line_num => $v){

} 
```

你也可以这样做：

```
$fd = fopen ($file1, "r"); 
while (!feof ($fd))  { 
   $line = fgets($fd, 4096); 
   //Do something with $line
} 
fclose ($fd); 
```

# python - Python 共享主机

> ID：14466850
> 
> 赞同：2
> 
> 时间：2013-01-22T19:51:38.770
> 
> 标签：python, django, hosting, shared

我希望能够在我工作的公司将 Python 和 Django 用于 Web 应用程序。我们目前使用 PHP 是因为每个人都熟悉它，并且易于为大量客户端部署。我们可以在单个虚拟服务器上托管 10 到 100 个网站。

是否可以通过单个 Apache 和 Python 安装为多个网站提供服务？每个网站都必须有自己的域，例如电子邮件帐户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:49:19.327

我不会使用 Apache，目前的最佳实践是 Nginx 前端代理请求到 uWSGI 服务器。阅读有关 uWSGI Emperor 模式的信息。它用途广泛。[http://uwsgi-docs.readthedocs.org/en/latest/Emperor.html](http://uwsgi-docs.readthedocs.org/en/latest/Emperor.html)。每个单独的应用程序都可以动态修改、删除添加。我们在[PythonAnywhere](https://www.pythonanywhere.com/)使用它来服务数千个 Web 应用程序

您也可以使用其他 WSGI 服务器。根据我的经验，uWSGI 似乎是最具可扩展性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T20:51:07.857

是的，这绝对是可能的。在我们的设置中，通常我们在`django`后面`mod_wsgi`，`Apache`并且`nginx`

您可以配置 apache 的 Virtualhost，以指向特定的`mod_wsgi`，而后者又指向特定的代码。

从[这里](https://stackoverflow.com/questions/1007017/sites-framework-on-a-single-django-instance)引用- 有关详细信息，请参阅 SO 帖子。

> 您可以尝试从单个实例提供至少两种方法：
> 
> 1.  使用 apache + mod_wsgi 并使用 WSGIApplicationGroup 和/或 WSGIProcessGroup 指令。我以前从来没有需要这些，所以不能完全确定它们会按照你想要的方式工作，但无论如何你绝对可以在守护进程模式下使用 mod_wsgi 来大大改善你的内存占用。
>     
>     
> 2.  您可以使用 Django 中间件根据请求主机名拒绝/允许 URL（请参阅 Django 文档中的 HttpRequest.get_host() ）。就此而言，即使它会对性能造成轻微影响，您也可以在所有视图上放置一个装饰器来检查传入的主机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T20:53:27.437

是的，您可以使用单个 Apache / mod_wsgi 安装轻松地为许多站点提供服务。通常，您会为每个网站使用单独的虚拟主机部分。请参阅[虚拟主机文档](http://httpd.apache.org/docs/2.2/vhosts/)。您想在每个虚拟主机配置中使用不同的 servername 指令来指定将哪些主机名路由到哪个配置。[在基于名称的虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)中查看更详细的文档

# iphone - 将 NSString 拆分为组件 '\n' 上的 NSArray

> ID：14466856
> 
> 赞同：0
> 
> 时间：2013-01-22T19:51:55.110
> 
> 标签：iphone, objective-c, xcode, nsstring, nsarray

我正在尝试将 a 拆分`NSString`为 a `NSArray`，尽管这通常是一项简单的任务，但事实证明这很困难。我正在从我的 Python 服务器接收数据并`NSString`在 iPhone 客户端上形成一个。我注意到有时当我从我的 Python 服务器收到多条消息时，我会得到`NSLog`一个字符串，例如：

```
Project: textOne
textTwo 
```

将字符串添加到 a`NSArray`并调用`NSLog`该数组后，字符串将显示：

```
Project: (
    "textOne\ntextTwo\n"
) 
```

玩过代码后：

```
[str componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

[str componentsSeparatedByString:@"\n"];

[str substringToIndex:[str length]-1]; 
```

我已经设法制作`NSArray`了内容：

```
Project: (
    "textOne",
    textTwo
) 
```

和

```
Project: (
    "textOne",
    textTwo,
    ""
) 
```

我**无法**生成`NSArray`内容：

```
Project: (
        textOne,
        textTwo
    ) 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T20:00:35.417

[在使用stringByTrimmingCharactersInSet:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByTrimmingCharactersInSet%3a)将字符串分成组件之前修剪您的字符串：以防止在末尾或开头出现空组件。

```
NSCharacterSet *separatorSet = [NSCharacterSet newlineCharacterSet];
NSString *trimmed = [str stringByTrimmingCharactersInSet:separatorSet];
[trimmed componentsSeparatedByCharactersInSet:separatorSet]; 
```

这不会阻止数组中间出现空字符串。

另一种解决方案是在分离成组件后过滤掉任何不需要的字符串。

# c++ - OpenMP 并行化多个顺序循环

> ID：14466857
> 
> 赞同：0
> 
> 时间：2013-01-22T19:51:57.410
> 
> 标签：c++, openmp

我想用 OpenMP 并行化以下函数：

```
void calculateAll() {
int k;
int nodeId1, minCost1, lowerLimit1, upperLimit8;
for (k = mostUpperLevel; k > 0; k--) {
    int myStart = borderNodesArrayStartGlobal[k - 1];
    int size = myStart + borderNodesArraySizeGlobal[k - 1];
/* this loop may be parallel */    
for (nodeId1 = myStart; nodeId1 < size; nodeId1++) {
        if (getNodeScanned(nodeId1)) {
            setNodeScannedFalse(nodeId1);
        } else {
            minCost1 = myMax;
            lowerLimit1 = getNode3LevelsDownAll(nodeId1);
            upperLimit8 = getUpperLimit3LevelsDownAll(nodeId1);
            changeNodeValue(nodeId1, lowerLimit1, upperLimit8, minCost1, minCost1);
        }
    }
}

int myStart = restNodesArrayStartGlobal;
int size = myStart + restNodesArraySizeGlobal;
/* this loop may also be parallel */  
for (nodeId1 = myStart; nodeId1 < size; nodeId1++) {
    if (getNodeScanned(nodeId1)) {
        setNodeScannedFalse(nodeId1);
    } else {
        minCost1 = myMax;
        lowerLimit1 = getNode3LevelsDownAll(nodeId1);
        upperLimit8 = getUpperLimit3LevelsDownAll(nodeId1);
        changeNodeValue(nodeId1, lowerLimit1, upperLimit8, minCost1, minCost1);
    }
}
} 
```

虽然我可以在 2 个内部循环上使用“omp pragma parallel for”，但由于创建新线程的持续开销，代码太慢了。有没有办法分离“omp pragma parallel”，以便在函数开始时我采用必要的线程，然后使用“omp pragma for”以获得最佳结果？我正在使用 gcc 4.6。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:04:29.480

线程的创建通常不是 openmp 程序的瓶颈。它是将任务分配给线程。线程实际上是首先生成的（您可以使用[VTune](http://software.intel.com/en-us/intel-vtune-amplifier-xe)`#pragma omp for`之类的分析器进行验证。在每个循环中，工作都分配给线程。这种分配通常是问题，因为这是一项代价高昂的操作。

但是，您应该尝试使用调度程序。因为这可能会对性能产生很大影响。例如玩`schedule(dynamic,chunksize)`vs`schedule(static,chunksize)`并尝试不同的块大小。

# java - 抛出异常并在别处捕获它们

> ID：14466860
> 
> 赞同：0
> 
> 时间：2013-01-22T19:52:02.070
> 
> 标签：java, exception

我想知道是否可以编写一个方法来引发异常并让另一个方法捕获这些异常。

例如，

```
public static void checkCircle() {
    try {
        checkPixel(a);
        checkPixel(b);
        checkPixel(c);
    } catch (MyException e) {
        System.out.println("not circle");
    } 

    private static void checkPixel(anything) {
        if (img.getRGB(xValue, yValue) != pOrigColour) {
            throw new MyException();
        }
    }

    class MyException extends Exception {
        public MyException() {
        }

        public MyException(String msg) {
            super(msg);
        }
    } 
```

事情是我想给`checkPixel`方法抛出一个`MyException`，表明没有圆圈，不管其他调用的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T19:53:54.043

是的，有可能。在您的方法声明中，您可以添加一个`throws`子句，指示您的方法可能会引发异常。

在您的情况下，您应该像这样修改您的方法声明：

```
private static void checkPixel(anything) throws MyException {
    // ...
} 
```

您应该注意，异常应该用于......异常情况。将它们用于简单的错误处理是非常不合常规的，并且给你的类的用户增加了不必要的负担。在您的情况下，您可能希望添加一个方法，如果在提供的位置有一个圆圈，则该`boolean hasCircleAtLocation ()`方法将返回。`true`

# c# - 实体框架 - 将结果异步保存到数据库

> ID：14466865
> 
> 赞同：0
> 
> 时间：2013-01-22T19:52:28.730
> 
> 标签：c#, entity-framework

我有一个每隔几秒就会调用一次的网络服务，它会做很多事情，然后执行一个批量插入，目前平均需要半秒来调用 SaveChanges()。我想异步保存所有更改，因为这样我可以每秒多次调用我的 Web 服务，并且只需缓冲要由石英计时器保存的任何数据库更改，这应该会带来更好的性能。

我观察到，在执行 Web 服务函数后，如果没有在实体数据库模型对象上调用“SaveChanges”，则任何挂起的数据库更改都将被回滚。

我是否可以将我的更改异步保存到数据库中，我将如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:18:18.480

原则上，您可以为此目的使用 .NET 中可用的任何异步方法。如果您可以使用 .NET 4.5，那么我建议您查看 async/await 方法，因为它们非常易于使用。实体框架不支持开箱即用的异步/等待，但您可以使用[TaskCompletionSource](http://msdn.microsoft.com/en-us/library/dd449174.aspx)类添加简单的包装器。

# python - python - 试图将凌乱的字符串转换为 JSON

> ID：14466866
> 
> 赞同：0
> 
> 时间：2013-01-22T19:52:30.290
> 
> 标签：python, json

我正在尝试将以下数据转换为`JSON`使用 python，例如`import json`. 实际上，我最初以为我正在接收 JSON 数据，直到我回显它并找到以下内容。

不幸的是，我从 SOAP 服务接收到以下数据，因此无法控制我如何接收它。

无论如何，下面看起来是否有任何可以解析的结构？还是我必须逐行浏览并手动转换它？它看起来不像我以前见过的任何东西，即使一些变量名称看起来像是 XML，或者最初是 XML。

我只对`stopData[]`数组的值感兴趣，如果这可以简化事情的话，就在一半以上！

作为记录，我尝试使用 JSON 解析器对其进行解析，如下所示，但它无法识别：

```
 data  = json.loads(rawData)
    data['StopData']

I also tried:    
    data = json.loads(rawData) 
```

但都没有奏效。这是我必须使用的数据：

```
('schema', [(schema){
   _id = "NewDataSet"
   element[] = 
      (element){
         _UseCurrentLocale = "true"
         _IsDataSet = "true"
         _MainDataTable = "StopData"
         _name = "NewDataSet"
         complexType[] = 
            (complexType){
               choice[] = 
                  (choice){
                     _maxOccurs = "unbounded"
                     _minOccurs = "0"
                     element[] = 
                        (element){
                           _name = "StopData"
                           complexType[] = 
                              (complexType){
                                 sequence[] = 
                                    (sequence){
                                       element[] = 
                                          (element){
                                             _type = "xs:dateTime"
                                             _name = "ServiceDelivery_ResponseTimestamp"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "ServiceDelivery_ProducerRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:boolean"
                                             _name = "ServiceDelivery_Status"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:boolean"
                                             _name = "ServiceDelivery_MoreData"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "StopMonitoringDelivery_Version"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:dateTime"
                                             _name = "StopMonitoringDelivery_ResponseTimestamp"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "StopMonitoringDelivery_RequestMessageRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:dateTime"
                                             _name = "MonitoredStopVisit_RecordedAtTime"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredStopVisit_MonitoringRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredVehicleJourney_LineRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredVehicleJourney_DirectionRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "FramedVehicleJourneyRef_DataFrameRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "FramedVehicleJourneyRef_DatedVehicleJourneyRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredVehicleJourney_PublishedLineName"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredVehicleJourney_OperatorRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredVehicleJourney_DestinationRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredVehicleJourney_DestinationName"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:boolean"
                                             _name = "MonitoredVehicleJourney_Monitored"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:boolean"
                                             _name = "MonitoredVehicleJourney_InCongestion"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredVehicleJourney_BlockRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredVehicleJourney_VehicleRef"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:string"
                                             _name = "MonitoredCall_VisitNumber"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:boolean"
                                             _name = "MonitoredCall_VehicleAtStop"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:dateTime"
                                             _name = "MonitoredCall_AimedArrivalTime"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:dateTime"
                                             _name = "MonitoredCall_ExpectedArrivalTime"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:dateTime"
                                             _name = "MonitoredCall_AimedDepartureTime"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:dateTime"
                                             _name = "MonitoredCall_ExpectedDepartureTime"
                                             _minOccurs = "0"
                                          },
                                          (element){
                                             _type = "xs:dateTime"
                                             _name = "Timestamp"
                                             _minOccurs = "0"
                                          },
                                    },
                              },
                        },
                  },
            },
      },
 }])('diffgram', [(diffgram){
   DocumentElement[] = 
      (DocumentElement){
         StopData[] = 
            (StopData){
               _id = "StopData1"
               _rowOrder = "0"
               ServiceDelivery_ResponseTimestamp[] = 
                  "2013-01-21T20:57:40.33+00:00",
               ServiceDelivery_ProducerRef[] = 
                  "bac",
               ServiceDelivery_Status[] = 
                  "true",
               ServiceDelivery_MoreData[] = 
                  "false",
               StopMonitoringDelivery_Version[] = 
                  "1.0",
               StopMonitoringDelivery_ResponseTimestamp[] = 
                  "2013-01-21T20:57:40.333+00:00",
               StopMonitoringDelivery_RequestMessageRef[] = 
                  "0",
               MonitoredStopVisit_RecordedAtTime[] = 
                  "2013-01-21T20:57:40.333+00:00",
               MonitoredStopVisit_MonitoringRef[] = 
                  "02371",
               MonitoredVehicleJourney_LineRef[] = 
                  "27",
               MonitoredVehicleJourney_DirectionRef[] = 
                  "Inbound",
               FramedVehicleJourneyRef_DataFrameRef[] = 
                  "2013-01-21",
               FramedVehicleJourneyRef_DatedVehicleJourneyRef[] = 
                  "4215",
               MonitoredVehicleJourney_PublishedLineName[] = 
                  "77A",
               MonitoredVehicleJourney_OperatorRef[] = 
                  "bac",
               MonitoredVehicleJourney_DestinationRef[] = 
                  "00354",
               MonitoredVehicleJourney_DestinationName[] = 
                  "Ringsend Rd via Tymon Park",
               MonitoredVehicleJourney_Monitored[] = 
                  "true",
               MonitoredVehicleJourney_InCongestion[] = 
                  "false",
               MonitoredVehicleJourney_BlockRef[] = 
                  "027023A:34",
               MonitoredVehicleJourney_VehicleRef[] = 
                  "33521",
               MonitoredCall_VisitNumber[] = 
                  "39",
               MonitoredCall_VehicleAtStop[] = 
                  "false",
               MonitoredCall_AimedArrivalTime[] = 
                  "2013-01-21T21:21:00+00:00",
               MonitoredCall_ExpectedArrivalTime[] = 
                  "2013-01-21T21:20:12+00:00",
               MonitoredCall_AimedDepartureTime[] = 
                  "2013-01-21T21:21:00+00:00",
               MonitoredCall_ExpectedDepartureTime[] = 
                  "2013-01-21T21:20:12+00:00",
               Timestamp[] = 
                  "2013-01-21T20:57:40.627+00:00",
            },
            (StopData){
               _id = "StopData2"
               _rowOrder = "1"
               ServiceDelivery_ResponseTimestamp[] = 
                  "2013-01-21T20:57:40.33+00:00",
               ServiceDelivery_ProducerRef[] = 
                  "bac",
               ServiceDelivery_Status[] = 
                  "true",
               ServiceDelivery_MoreData[] = 
                  "false",
               StopMonitoringDelivery_Version[] = 
                  "1.0",
               StopMonitoringDelivery_ResponseTimestamp[] = 
                  "2013-01-21T20:57:40.333+00:00",
               StopMonitoringDelivery_RequestMessageRef[] = 
                  "0",
               MonitoredStopVisit_RecordedAtTime[] = 
                  "2013-01-21T20:57:40.333+00:00",
               MonitoredStopVisit_MonitoringRef[] = 
                  "02371",
               MonitoredVehicleJourney_LineRef[] = 
                  "27",
               MonitoredVehicleJourney_DirectionRef[] = 
                  "Inbound",
               FramedVehicleJourneyRef_DataFrameRef[] = 
                  "2013-01-21",
               FramedVehicleJourneyRef_DatedVehicleJourneyRef[] = 
                  "4061",
               MonitoredVehicleJourney_PublishedLineName[] = 
                  "77A",
               MonitoredVehicleJourney_OperatorRef[] = 
                  "bac",
               MonitoredVehicleJourney_DestinationRef[] = 
                  "00354",
               MonitoredVehicleJourney_DestinationName[] = 
                  "Ringsend Rd via Tymon Park",
               MonitoredVehicleJourney_Monitored[] = 
                  "true",
               MonitoredVehicleJourney_InCongestion[] = 
                  "false",
               MonitoredVehicleJourney_BlockRef[] = 
                  "027008:34",
               MonitoredVehicleJourney_VehicleRef[] = 
                  "33204",
               MonitoredCall_VisitNumber[] = 
                  "39",
               MonitoredCall_VehicleAtStop[] = 
                  "false",
               MonitoredCall_AimedArrivalTime[] = 
                  "2013-01-21T21:44:00+00:00",
               MonitoredCall_ExpectedArrivalTime[] = 
                  "2013-01-21T21:44:00+00:00",
               MonitoredCall_AimedDepartureTime[] = 
                  "2013-01-21T21:44:00+00:00",
               MonitoredCall_ExpectedDepartureTime[] = 
                  "2013-01-21T21:44:00+00:00",
               Timestamp[] = 
                  "2013-01-21T20:57:40.627+00:00",
            },
      },
 }]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:49:13.660

作为记录，我使用如下代码解决了这个问题：

```
tmpData = requestoutput[1][0][0][0] 
```

这向我展示了数据实际上存储在一个多维数组中。当我将它放入 python 时，它会创建一个数组（尽管当我输出它 [data=list] 时，它告诉我它不能连接字符串和列表）。

但无论如何，我现在可以使用数组访问数据的各个元素。

干杯。

# ios - 使用配置文件拦截 iOS 设备互联网流量

> ID：14466867
> 
> 赞同：3
> 
> 时间：2013-01-22T19:52:33.963
> 
> 标签：ios, objective-c, ios6

我想创建一个与[Onavo](http://www.onavo.com/)非常相似的家长控制应用程序，除了我不压缩任何数据，我只是存储请求的 URL 并让它继续运行。

基本上，我只想安装一个配置文件，它会在设备上发出互联网请求时告诉我的应用程序（假设我的应用程序在后台运行）。这是一个比[Onavo](http://www.onavo.com/)所做的更简单的版本（拦截互联网操作并重新路由它们），所以我知道我可能似乎无法找到任何文档......

谁能指出我正确的方向？谷歌让我失望了。

我是一名中级 iOS 开发人员。谢谢！

# java - Java将字符串字节转换为可读字符串

> ID：14466870
> 
> 赞同：4
> 
> 时间：2013-01-22T19:52:47.200
> 
> 标签：java, string, byte

> **可能重复：**
> [Java 字节数组到字符串到字节数组](https://stackoverflow.com/questions/6684665/java-byte-array-to-string-to-byte-array)

我有一个名为 READ() 的方法，它接受一个字符串参数。该字符串已经被转换为字节。我想要的只是转换成可读的字符串。

```
public static String READ(final String data) throws UnsupportedEncodingException{
   char[] temp = data.toCharArray();
   byte[] bytes = new byte[temp.length];
   int i = 0;

   for(char c : temp){
      bytes[i++] = (byte)c;
   }

   return new String(bytes, "UTF-8");
}

public static String SEND(String data) throws UnsupportedEncodingException{
   return data.getBytes()+"";
} 
```

测试：

```
String msg = "testing !";
String msgBytes = null;
   try {
        msgBytes = SEND(msg);
   } catch (UnsupportedEncodingException e2) {
        e2.printStackTrace();
   }

   System.out.println( "SEND: " + msgBytes);
   try {
         System.out.println("RECEIVE: " + READ(msgBytes));
   } catch (UnsupportedEncodingException e2) {
            e2.printStackTrace();
   } 
```

输出是：

> 发送：[B@452467ec
> 
> 接收：[B@452467ec

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:55:34.773

[String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)有一个`byte[]`作为参数的构造函数。

> String(byte[] bytes) -- 通过使用平台的默认字符集解码指定的字节数组来构造一个新的字符串。
> 
> String(byte[] bytes, Charset charset) -- 通过使用指定的字符集解码指定的字节数组来构造一个新的字符串。

所以像这样打印它：

```
System.out.println(new String(msgBytes, "UTF-8"));
```

您当前看到的是一个默认值`Object.toString()`，它打印对字节数组的内存引用（所有数组都扩展自`Object`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:56:20.993

您打印 a `byte[]`which is an `Object`，所以它只是将引用打印到内存中，`Object`因为这是默认实现的`toString()`作用。

您应该直接打印`String`。不要打印它的`byte[]`表示。

您在代码中所做的是将 a`String`转换为`byte[]`然后以`String`错误的方式返回。

# java - 如何检查用户输入的值是否有效？

> ID：14466871
> 
> 赞同：2
> 
> 时间：2013-01-22T19:52:51.880
> 
> 标签：java, android

我正在开发一个应用程序，其中用户可以选择在纬度和经度的两个 EditText 视图中输入一组坐标。然后输入的坐标/位置将显示在地图上，效果很好。但是，如果用户输入了无效值，应用程序就会崩溃，我需要防止这种情况发生。

例如，纬度/经度值必须为 35.27，而导致应用程序崩溃的原因是当有多个点“。”时。例如 33.23.43。如何检查输入的值是否只有一个点？

我在这方面并没有太多经验，而且我对 android 还是很陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:15:20.617

I was going to suggest that you checked the length of the string that you get, but because 1.5 and 153.163 are both valid that doesn't work. I advise you to use a `try/catch statement. For example

```
try{
    //do what ever you do with the numbers here
catch(Exception e){
//the user has inputted an invalid number deal with it here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:18:33.213

查看

[Android EditText：setFilters 示例：数字文本字段模式和长度限制。](http://www.mobisoftinfotech.com/blog/android/android-edittext-setfilters-example-numeric-text-field-patterns-and-length-restriction/)

这可能是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:59:02.917

```
bool badInput = countChar(s, '.')  > 1; 
```

countChar 在哪里

```
int countChar(string s, char c)
{
    int counter = 0;
    for( int i=0; i<s.length(); i++ ) {
        if( s.charAt(i) == c ) {
            counter++;
        } 
    }
    return counter;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T20:19:39.380

只需使用 a`regexp`来检查输入的有效性。

```
Pattern p = Pattern.compile("^(-)?\d*(\.\d*)?$");
Matcher m = p.matcher(inputString);
if (m.find()) { 
    ////Found
}
else {
  //Not found
} 
```

现在`focus listener`在现场实施一个来运行这个有效性测试。

**或：**您也可以从 xml 执行此操作。

在 XML 中添加属性`editText`：

```
android:inputType="number|numberSigned|numberDecimal" 
```

对于有**符号浮点数**。

谢谢。

# ssrs-2008 - 在 SSRS 中，为什么我在制作新报告时会收到错误“已添加具有相同密钥的项目”？

> ID：14466874
> 
> 赞同：74
> 
> 时间：2013-01-22T19:52:56.177
> 
> 标签：ssrs-2008, reporting-services

我收到以下错误`SSRS`：

> 保存查询设计方法时出错。
> 已添加具有相同密钥的项目

但是，“项目”表示什么？我什至尝试编辑`RDL`和删除对我需要使用的存储过程的所有引用`prc_RPT_Select_BI_Completes_Data_View`。

这可能与存储过程使用动态 SQL（`N'` 符号）这一事实有关吗？

在存储过程中，我有：

```
SET @SQL +=  N'
SELECT   bi.SupplierID as ''Supplier ID''
        ,bi.SupplierName as ''Supplier Name''

        ,bi.PID as ''PID''
        ,bi.RespondentID as ''Respondent ID''

        ,lk_slt.Name as ''Entry Link Type''

        ,ts.SurveyNumber as ''Initial Survey ID''' 
```

![在此处输入图像描述](../Images/fa469df9722a463a770b78713cbeb876.png)

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-01-22T20:49:19.433

SSRS 似乎有问题（至少在 2008 版中） - 我正在研究[这个解释它的网站](http://arcanecode.com/2010/07/30/ssrs-quick-tip-an-item-with-the-same-key-has-already-been-added/)

它说如果你有两列（来自 2 个不同的表）具有相同的名称，那么它会导致这个问题。

从来源：

> 从表 A 中选择 a.Field1、a.Field2、a.Field3、b.Field1、b.field99 a 在 a.Field1 上加入表 B b = b.Field1
> 
> SQL 处理得很好，因为我为每个都添加了一个别名（表）名称。但是 SSRS 只使用列名作为键，而不是表 + 列，所以它很窒息。
> 
> 修复很简单，要么将第二列重命名为 iebField1 AS Field01，要么一起省略该字段，这就是我所做的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T07:51:21.183

我过去曾遇到过这个问题。基于此，我可以说，如果您的数据集有多个指向同一字段源的字段名，我们通常会遇到此问题。查看以下帖子以获取详细的错误描述

[http://www.bi-rootdata.com/2012/09/an-error-occurred-during-report.html](http://www.bi-rootdata.com/2012/09/an-error-occurred-during-report.html)

[http://www.bi-rootdata.com/2012/09/an-item-with-same-key-has-already-been.html](http://www.bi-rootdata.com/2012/09/an-item-with-same-key-has-already-been.html)

在您的情况下，您应该检查 Sp prc_RPT_Select_BI_Completes_Data_View 返回的所有字段名称，并确保所有字段都具有唯一名称。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-20T06:36:59.430

我面临同样的问题。调试后我修复了同样的问题。如果 SQL 查询中的列名有多次，则会出现此问题。因此，在 SQL 查询中使用别名来区分列名。例如：以下查询将在 sql 查询中正常工作，但在 SSRS 报告中创建问题：

```
Select P.ID, P.FirstName, P.LastName, D.ID, D.City, D.Area, D.Address
From PersonalDetails P
Left Join CommunicationDetails D On P.ID = D.PersonalDetailsID 
```

原因：ID已提及两次（多次）

正确查询：

```
Select P.ID As PersonalDetailsID, P.FirstName, P.LastName, D.ID, D.City, D.Area, D.Address
From PersonalDetails P
Left Join CommunicationDetails D On P.ID = D.PersonalDetailsID 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-08-09T17:37:03.533

我在报告查询中遇到了同样的错误。我有来自不同表的列，它们具有相同的名称和每个表的前缀（例如：选择 a.description、b.description、c.description），在 Oracle 中运行正常，但是对于报告，您必须为每个表设置一个唯一的别名列，因此只需为具有相同名称的字段添加别名（选择 a.description a_description、b.description b_description 等）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-04T01:05:49.833

抱歉，这是对旧线程的回应，但可能仍然有用。

除了上述响应之外，这通常发生在同名的两列（即使来自不同的表）包含在同一个查询中时。例如，如果我们连接两个表 city 和 state，其中表具有列名，例如 city.name 和 state.name。当这样的查询被添加到数据集中时，SSRS 会删除表名或表别名，只保留名称，最终在查询中出现两次，并作为重复键出现错误。避免它的最好方法是使用别名，例如将列名 city.name 称为 c_name state.name 称为 s_name。这将解决问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-06-03T23:48:04.617

我在 vs2015 企业版、ssdt 14.1.xxx、ssrs 中收到此错误消息。对我来说，我认为这与上面描述的 2 列同名问题有所不同。我添加了此报告，然后删除了报告，然后当我尝试在 ssrs 向导中重新添加查询时，我收到此消息，“保存查询设计方法时发生错误：无效对象名称：表名”。其中 tablename 是向导正在读取的查询中的表。我尝试清理项目，我尝试重建项目。在我看来，当您删除报告时，Microsoft 并没有完成清理报告，只要您尝试将原始查询添加回来，它就不会添加。我能够修复它的方法是在一个全新的项目中创建 ssrs 报告（显然查询没有问题）并将其保存到一边。然后我重新打开了我原来的 ssrs 项目，右键单击报告，然后添加，然后添加现有项。该报告添加回来很好，没有名称冲突。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-19T09:23:34.020

SSRS 将不接受重复的列，因此请确保您的查询或存储过程返回唯一的列名。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-06T14:55:58.423

我刚收到这个错误，我才知道这是关于局部变量别名

在我喜欢的存储过程结束时

```
select @localvariable1,@localvariable2 
```

它在 sql 中工作正常但是当我在 ssrs 中运行它时它总是抛出错误但是在我给出别名后它是固定的

```
select @localvariable1 as A,@localvariable2 as B 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-07-17T10:48:04.737

如果您正在使用 SP，并且如果 sps 有多个 Select 语句（在 if 条件内），则所有这些选择都需要使用唯一的字段名称进行处理。

# jquery - 根据百分比值调整图像大小

> ID：14466875
> 
> 赞同：0
> 
> 时间：2013-01-22T19:52:59.930
> 
> 标签：jquery, image, resize

当窗口调整大小时，我正在编写代码来调整 div 中的某些图像的大小。我想如果你读了代码你就会明白：

```
$('img').each( function() {
    var image = $(this);
    var imagewidth = $(this).width();
    $.event.add(window, 'load', resizeFrame);
    $.event.add(window, 'resize', resizeFrame);

    function resizeFrame() {

        var windowWidth = $(window).width();
        var ratio = (980/windowWidth)*100;

        if ( windowWidth <= 980 ) {
            image.width( ratio*imagewidth + '%');
        }
    }
}); 
```

该代码不起作用，日志显示一些对象..并且没有价值。

该代码以某种方式工作。问题是它确实根据窗口的宽度而不是原始大小的百分比来调整图像的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:58:56.060

此代码有多个问题。首先为调整大小事件附加 N 个调整大小处理程序！而且您没有正确使用每个功能

这是清理代码：

```
$(window).resize(function(evt) {
        var windowWidth = $(window).width();
        var ratio = (windowWidth/980) * 100;
        $('img').each( function(i, obj) {
            var imagewidth = $(obj).width();
            if ( windowWidth <= 980 ) {
                $(obj).attr('width', ratio + '%');
            } else {
                $(obj).attr('width', '100%');
            }
        });
    }); 
```

html:

```
<div style="width: 200px;">
                <img src="image.png">
            </div> 
```

要使此功能起作用，您需要确定图像周围 div 中图像的最大宽度。否则你必须保存图像的原始宽度才能重新缩放它

# javascript - 使用 angularJS 从 JSON url 获取数据

> ID：14466881
> 
> 赞同：7
> 
> 时间：2013-01-22T19:53:17.573
> 
> 标签：javascript, json, google-api, angularjs

我对使用 AngularJS 和 Javascript 真的很陌生。我需要从如下所示的 JSON 源获取**totalResults**数据：

```
{
 "queries": {
  "request": [
   {
    "totalResults": "51"
   }
  ]
 }
} 
```

获得数据后，我需要使用 AngularJS 将其显示在列表中。我已经非常努力地使用 .ajax 和 .getJSON，但由于我完全缺乏使用 JavaScript 的知识，我无法让它们中的任何一个工作。我真的很感谢你的帮助！我的 AngularJS 看起来像这样：

```
function MyController($scope){
        $scope.url = "https://www.googleapis.com/customsearch/v1?key=[MYKEY]&cx=[MYSECRETKEY]&q=flowers&alt=json&fields=queries(request(totalResults))";
        $scope.newMessage = "";
        $scope.messages = ["Steve Jobs - 515,000,000 results"]; 

        $scope.add = function(){
            $scope.messages.push($scope.newMessage);
        };
        }
  } 
```

在 HTML 部分，我有这个：

```
<input type="text" ng-model="newMessage">
    <input type="submit" ng-click="add()" value="Click to find out!"> 
```

当用户单击按钮时，我希望调用 url，并且`$scope.newMessage`应该是 totalResults 中的值。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T20:17:41.387

您可以使用`$http`服务：[文档](https://docs.angularjs.org/api/ng/service/$http)

这样你就可以：

```
$scope.add = function(){
  $http.get($scope.url).then(function(response) {
            $scope.newMessage = response.data.queries.request.totalResults;
            $scope.messages.push($scope.newMessage);
  });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:25:09.863

阅读 AngularJS 提供的 $http 服务

这是您将使用的代码的提示

```
$scope.add = function(){
    $http.get(url).then(function(response){
        queries = response.queries;
        $scope.newMessage = queries.request.totalResults;
    })
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T12:05:23.760

见[http://plnkr.co/edit/nZkYsxLHLvf3SZNiJKic?p=info](http://plnkr.co/edit/nZkYsxLHLvf3SZNiJKic?p=info)

按照您的链接，我只发现了一个错误：

```
var x = searchResults.split('.'); 
```

如果我替换没有函数 split()：x = "abc"

结果：史蒂夫乔布斯 - 515,000,000 个结果 - ab 结果 dsgdfg - ab 结果

# domain-driven-design - 关于全局可访问值对象的一些令人困惑的事情

> ID：14466885
> 
> 赞同：0
> 
> 时间：2013-01-22T19:53:36.230
> 
> 标签：domain-driven-design

引述来自[DDD：解决软件核心的复杂性](https://rads.stackoverflow.com/amzn/click/com/0321125215)（第 150 页）

一个）

> 对 VALUE 的全局搜索访问通常是没有意义的，因为通过其属性查找 VALUE 将等同于创建具有这些属性的新实例。也有例外。例如，当我计划在线旅行时，我有时会保存一些预期的行程并稍后返回以选择一个进行预订。这些行程是价值（如果有两个由相同的航班组成，我不在乎哪个是哪个），但它们已与我的用户名相关联并完整地为我检索。

我不明白作者的推理，为什么让`Itinierary`值对象全局可访问而不是客户端必须全局搜索`Customer root entity`然后从它遍历到这个`Itinierary`对象更合适？

b)

> 必须通过基于对象属性的搜索来全局访问持久对象的子集……它们通常是实体，有时是具有复杂内部结构的值对象……

*为什么具有复杂内部结构的值对象*更常见于全局可访问而不是更简单的*值对象*？

c) 无论如何，是否有一些关于如何确定特定值对象是否应该全局可访问的通用指南？

**更新：**

一个）

> 没有任何领域的理由可以通过客户实体进行行程遍历。如果任何行为都不需要客户实体，为什么还要加载它？查询通常在不使行为域复杂化的情况下得到最好的处理。

我对此可能错了，但是当用户（即客户根实体）登录时，*域模型*检索用户的不是很常见`Customer Aggregate`吗？

如果用户可以选择预订航班，那么他们也会经常检查`Itineraries`（虽然英语不是我的第一语言，所以这个词`Itinerary`实际上可能与我认为的意思有点不同）他们已经选择或预订。

既然`Customer Aggregate`已经从数据库中检索到，为什么在已经与 一起检索时发出另一个全局搜索`Itinerary`（可能会在 DB 中搜索它）`Customer Aggregate`？

C）

> 规则很简单 IMO - 如果有需要的话。它不取决于 VO 本身的结构，而是取决于用例是否需要特定 VO 的实例。

但是这个 VO 实例必须与某个实体相关（即`Itinerary`与特定实体相关`Customer`），否则正如作者指出的那样，我们可以简单地使用这些属性创建一个新的 VO 实例，而不是通过其属性搜索 VO 吗？

**第二次更新：**

a）从您的[链接](http://gorodinski.com/blog/2012/07/24/implementing-associations-with-references-or-repositories-in-domain-driven-design-ddd/)：

> 另一种表达关系的方法是使用存储库。

当通过*repository*表达关系时，您是否实现了一个`SalesOrder.LineItems`属性（我对此表示怀疑，因为您建议不要直接调用 repositories 的实体），而后者又调用了*repository*，或者您是否实现了类似的东西`SalesOrder.MyLineItems(IOrderRepository repo)`？如果是后者，那么我认为不需要`SalesOrder.LineItems`财产？

b)

> 要记住的重要一点是聚合并不意味着用于显示数据。

确实，*域模型*不关心上层将如何处理数据，但如果不在*应用程序*和*UI*层之间使用 DTO，那么我假设*UI*将提取数据以从*聚合*中显示（假设我们将整个发送到 UI聚合而不仅仅是驻留在其中的某个实体）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:08:59.653

a) 没有域理由使行程可以通过客户实体。如果任何行为都不需要客户实体，为什么还要加载它？查询通常在不使行为域复杂化的情况下得到最好的处理。

b）我假设他的推理是复杂的值对象是您想要查询的对象，因为您无法轻松地重新创建它们。这个问题和所有与查询相关的问题都可以使用[read-model 模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)来解决。

c) 规则很简单 IMO - 如果有需要的话。它不取决于 VO 本身的结构，而是取决于用例是否需要特定 VO 的实例。

**更新**

a) 客户集合不太可能引用客户的行程。原因是我看不到行程将如何与客户集合中存在的行为相关联。如果只需要显示一些数据，则根本不需要加载客户聚合。但是，如果您确实加载了聚合并且它确实包含您需要的参考数据，那么您也可以显示它。要记住的重要一点是聚合并不意味着用于显示数据。

c) 客户和行程之间的关系可以用一个共享 ID 来表示——每个行程都有一个 customerId。这将允许根据需要进行查找。但是，仅仅因为这两件事是相关的，并不意味着您需要遍历客户才能到达相关实体或值对象以进行查看。更一般地，关联可以作为[直接引用或通过存储库搜索](http://gorodinski.com/blog/2012/07/24/implementing-associations-with-references-or-repositories-in-domain-driven-design-ddd/)来实现。无论哪种方式都需要权衡取舍。

**更新 2**

a) 如果使用存储库实现，则没有`LineItems`属性 - 没有直接引用。相反，要获取行项目列表，需要调用存储库。

b) 或者您可以创建一个类似 DTO 的对象，一个读取模型，它将直接从存储库返回。存储库可以依次执行简单的 SQL 查询来获取所有必需的数据。这使您可以获取不属于聚合但相关的数据。如果聚合确实具有视图所需的所有数据，则使用该聚合。但是，一旦您需要更多与聚合无关的数据，请切换到读取模型。

# cordova - PhoneGap，应用程序已停止

> ID：14466886
> 
> 赞同：0
> 
> 时间：2013-01-22T19:53:45.293
> 
> 标签：cordova

正如我看到许多其他人所遇到的那样，我得到了可怕的应用程序已停止错误。我没有运气。我只是不知道从哪里开始我猜。这是我的清单。还需要什么来帮助解决这个问题？

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
      package="org.danjoseph.me.apps.multiply" android:versionName="1.0" android:versionCode="5">
    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true"
        android:resizeable="false"
        android:anyDensity="true"
        />

        <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <uses-sdk android:minSdkVersion="6" android:targetSdkVersion="17"/>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name="Multiply" android:label="@string/app_name" android:theme="@android:style/Theme.Black.NoTitleBar">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
E/AndroidRuntime(24115): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.danjoseph.me.apps.multiply/org.danjoseph.me.apps.multiply.Multiply}: java.lang.ClassNotFoundException: org.danjoseph.me.apps.multiply.Multiply
E/AndroidRuntime(24115):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2012)
E/AndroidRuntime(24115):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
E/AndroidRuntime(24115):    at android.app.ActivityThread.access$700(ActivityThread.java:139)
E/AndroidRuntime(24115):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
E/AndroidRuntime(24115):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(24115):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(24115):    at android.app.ActivityThread.main(ActivityThread.java:4918)
E/AndroidRuntime(24115):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(24115):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(24115):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
E/AndroidRuntime(24115):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
E/AndroidRuntime(24115):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(24115): Caused by: java.lang.ClassNotFoundException: org.danjoseph.me.apps.multiply.Multiply
E/AndroidRuntime(24115):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
E/AndroidRuntime(24115):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime(24115):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime(24115):    at android.app.Instrumentation.newActivity(Instrumentation.java:1068)
E/AndroidRuntime(24115):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2003)
E/AndroidRuntime(24115):    ... 11 more
D/PowerManagerService(  715): releaseDVFSLockLocked : remain DVFS_MIN_LIMIT : next : 102600 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:22:24.873

我认为您没有将所有 jar 文件/类部署到设备：

```
java.lang.ClassNotFoundException: org.danjoseph.me.apps.multiply.Multiply 
```

# ios - 防止动作两次触发的更有效方法是什么？

> ID：14466887
> 
> 赞同：1
> 
> 时间：2013-01-22T19:53:54.117
> 
> 标签：ios, objective-c

当有人点击导航栏上的 rightBarButtonItem 并再次快速点击程序崩溃时，我遇到了问题。崩溃是可以理解的，因为新视图还没有完成加载，并且按钮仍然可以再次点击，因此它会尝试再次推送视图导致程序崩溃。我已经尝试了几种方法来尝试防止这种情况，并且我当前的实现有些工作，但我知道有一个更好的解决方案，也许是框架中内置的解决方案？

```
- (void) loadView
{
    [super loadView];

    self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc]
                                               initWithTitle:@"Members" 
                                               style:UIBarButtonItemStylePlain 
                                               target:self 
                                               action:@selector(showRoster)] autorelease];
}

-(void) showRoster {
    if (seconds + 3 < [[NSDate date] timeIntervalSince1970]) { //This is where I am trying to prevent the button from being activated twice.
        seconds = [[NSDate date] timeIntervalSince1970];

        vcRoster = [[RosterDataViewController alloc] init];
        vcRoster.rosterDataModel.group_id = self.tweetsByGroupIdModel.group_id;
        [self.navigationController pushViewController:vcRoster animated:YES];
    } 
```

}

我也试过这个，但它没有做我认为它应该做的事情。

```
if (!self.navigationController.isBeingPresented) 
```

我已经尝试解决这个问题并用谷歌搜索我的答案，但我还没有找到解决这个问题的好方法。我知道上述不是做事的好方法，我愿意接受任何改进的建议，因为我对 IOS 世界非常陌生。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T19:58:54.300

尝试在运行操作方法后立即禁用按钮：

```
-(void) showRoster:(UIButton*)sender {
  sender.enabled = NO;
  ...
} 
```

您可以稍后启用它，使其再次响应。如何最好地做到这一点取决于您正在显示的视图：如果它是全屏的，您可以简单地重新启用按钮`viewDidAppear:`（即，在视图消失并且您的按钮再次可见之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:09:45.813

您应该使用 UIViewController 的 isViewLoaded 方法来检查视图是否已加载：

```
if (self.navigationController.topViewController.isViewLoaded && seconds + 3 < [[NSDate date] timeIntervalSince1970]) {...} 
```

# macos - 是否有适用于 Mac OSX 的便携式 Git 版本？

> ID：14466890
> 
> 赞同：7
> 
> 时间：2013-01-22T19:53:59.723
> 
> 标签：macos, git, portable-executable, portable-applications

我希望能够在公共/借来的计算机（我没有 root 权限）上进行一些开发工作，并且我已经设法让我的大部分工具从 USB 记忆棒上工作，但我仍然没有找到吉特解决方案。

我发现的可移植版本的 Git 仅适用于 Windows。你知道任何Mac替代品吗？

**编辑：**我得到了一些建议，只需从 /usr/bin 复制我当前安装的 git 并将其放在 USB 驱动器上。这是个好主意，但我没有当前安装的 git 可供复制。我将在几周内无法拥有自己的电脑。

你会碰巧知道我在哪里可以为 OSX 获取预编译的 git 版本吗？我无法使用自制软件或...任何东西。理想情况下，我可以从某个地方抓取一个 zip 文件并将其转储到我的 U 盘上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T18:28:28.740

我已经设法根据几个不同人的想法制定了一个解决方案（感谢大家）：

*   [从git-scm.com](http://git-scm.com/)下载适用于 Mac OSX 的 Git 二进制文件。下载的 DMG 包含一个 PKG 文件。
*   [用unpkg](http://www.timdoug.com/unpkg/)或类似的东西解压 PKG 文件。（此步骤是必要的，因为通常 PKG 文件只能以 root 权限安装。）
*   将刚刚解压的`etc`和文件夹放到您的 U 盘上。`git`

现在，每当您插入 USB 记忆棒时，只要确保将`git`目录的位置放在您的`PATH`（像这样：）上`export PATH=$PATH:/path/to/git/on/usb/stick`，您就可以开始了！

**注意：**我已经`git`使用此方法测试了许多命令，并且大多数命令似乎都可以正常工作。但是，`git init`会这样抱怨：`warning: templates not found /usr/local/git/share/git-core/templates`。这并不奇怪，因为模板实际上在您的 USB 记忆棒上，而不是`/usr/local`. 尽管有这个警告，我的回购似乎工作得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-02T03:05:01.617

添加环境变量 GIT_TEMPLATE_DIR 以引用文档

> 模板目录包含创建后将被复制到 $GIT_DIR 的文件和目录。
> 
> 模板目录将是以下之一（按顺序）：
> 
> --template 选项给出的参数；
> 
> $GIT_TEMPLATE_DIR 环境变量的内容；
> 
> init.templatedir 配置变量；或者
> 
> 默认模板目录：/usr/share/git-core/templates。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:00:11.907

我已经上传了我的`/usr/bin/git`和`/usr/bin/git-shell`到

*   [http://www.club.cc.cmu.edu/~ajo/disseminate/git](http://www.club.cc.cmu.edu/~ajo/disseminate/git)
*   [http://www.club.cc.cmu.edu/~ajo/disseminate/git-shell](http://www.club.cc.cmu.edu/~ajo/disseminate/git-shell)

你可以试试这些，但我不知道这种方法是否可行。（没有报告有趣的共享库依赖项`otool -L`，但我不知道理论上这个想法还有什么问题。）

FWIW，我使用 Mac OS X 10.8.2 和`git version 1.7.10.2 (Apple Git-33)`.

不确定这是否适合作为“答案”，因为我不打算让这些链接无限期地工作。也许我（或某人）可以在一两个月内删除这个答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T02:04:37.687

我相信苹果为开发人员提供的命令行工具包括 git。您可以在[http://developer.apple.com/](http://developer.apple.com/)上找到它们；您可能需要一个免费的开发者帐户。他们的包将要安装到`/usr/bin`等，但您应该能够`pax`在任何您想要的地方提取内容。

# import - 从另一个文件夹导入模块。蟒蛇 3.3

> ID：14466891
> 
> 赞同：1
> 
> 时间：2013-01-22T19:54:01.840
> 
> 标签：import, module, directory

对python来说很新。运行 linux 操作系统

我的主程序“main.py”有一个文件夹folder1

我有一个文件夹 folder2 和我的模块“module.py”

该模块有 2 个函数 function1 和 function2

两个文件夹都在同一个文件夹中。

如何将文件夹 2 中的 module.py 导入文件夹 1 中的 main.py？还是我必须以某种方式从 module.py 中挑选出单个函数？

最好一次导入两个函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-04T16:15:45.500

你可以做：

```
import sys, os.path

sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
+ '/folder2/') 
```

然后你可以像往常一样导入。请参阅类似问题的[答案。](https://stackoverflow.com/questions/4383571/importing-files-from-different-folder/46569406#46569406)

# r - 如何根据列在 ddply 中传递值？

> ID：14466894
> 
> 赞同：3
> 
> 时间：2013-01-22T19:54:10.883
> 
> 标签：r, dataframe, plyr

我希望能够传递两组按列分组的值`Category`。有没有办法使用`ddply`from package来做到这一点`plyr`？

我想做这样的事情：

```
ddply(idata.frame(data), .(Category), wilcox.test, data[Type=="PRE",], data[Type=="POST",]) 
```

`wilcox.test`是以下函数：

```
Description

Performs one- and two-sample Wilcoxon tests on vectors of data; the latter is also known as ‘Mann-Whitney’ test.

Usage

wilcox.test(x, ...)

Arguments

x   
numeric vector of data values. Non-finite (e.g. infinite or missing) values will be omitted.

y   
an optional numeric vector of data values: as with x non-finite values will be omitted.

.... rest of the arguments snipped .... 
```

我有以下输出`dput`：

```
structure(list(Category = c("A", "C", 
"B", "C", "D", "E", 
"C", "A", "F", "B", 
"E", "C", "C", "A", 
"C", "A", "B", "H", 
"I", "A"), Type = c("POST", "POST", 
"POST", "POST", "PRE", "POST", "POST", "PRE", "POST", 
"POST", "POST", "POST", "POST", "PRE", "PRE", "POST", 
"POST", "POST", "POST", "POST"), Value = c(1560638113, 
1283621, 561329742, 2727503, 938032, 4233577690, 0, 4209749646, 
111467236, 174667894, 1071501854, 720499, 2195611, 1117814707, 
1181525, 1493315101, 253416809, 327012982, 538595522, 3023339026
)), .Names = c("Category", "Type", "Value"), row.names = c(21406L, 
123351L, 59875L, 45186L, 126720L, 94153L, 48067L, 159371L, 54303L, 
63318L, 104100L, 58162L, 41945L, 159794L, 57757L, 178622L, 83812L, 
130655L, 30860L, 24513L), class = "data.frame") 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:58:08.067

我总是做的是使用匿名函数：

```
ddply(idata.frame(data), .(Category), 
    function(x) wilcox.test(x[Type == "PRE",], x[Type == "POST",]) 
```

我不确定这些`wilcox.test`函数会返回一些很好的默认连接到 a的东西`data.frame`，所以你必须稍微调整一下自己。或者，使用`dlply`来结束`wilcox.test`输出列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:32:42.150

这里有两个问题：

1.  尽管我使用的是相同的数据，但保罗的解决方案似乎对我不起作用。我认为子集的语法是有原因的，但我没有设法破解错误。

2.  考虑到您希望使用的结构（即`Category`x `Type`），您的数据实际上太小，无法通过统计测试计算任何比较。毕竟，如果您查看数据框中的类别数量，所有类别的值都少于 30 个，而一半只有一个值：

    ```
    > table(data$Category)
    A B C D E F H I 
    5 3 6 1 2 1 1 1 
    ```

但好消息是我为你找到了解决方案。

首先，我必须生成一个更宽的表格。而且因为我（非常）懒惰，所以我只是这样做了：

```
for(i in 1:10){data <- rbind(data,data)}

data$Value <- jitter(data$Value,5e3) 

data$Type <- sample(c("POST","PRE"),size=nrow(data),replace=T,prob=c(0.80,0.20)) 
```

我将表格复制了 10 次，在数值中添加了噪声，并随机重新分配了“PRE”和“POST”，其比例与在初始数据帧中添加的比例相同。请注意，值本身在这里并不重要，我只是使用您提供给我们的相同数据结构。

这样，我们最终得到了一张更大的桌子，而且——更重要的是——更密集的桌子：

```
 > table(data$Category, data$Type)

      POST  PRE
    A 4135  985
    B 2470  602
    C 4881 1263
    D  814  210
    E 1634  414
    F  815  209
    H  846  178
    I  813  211 
```

这样就完成了！

现在我们可以想出一个解决方案。为了清楚起见，我编写了单独执行 Wilcoxon 检验的函数。诀窍是它必须返回一个向量，该向量将被合并到输出所需的数据框中。

让我们调用函数`wx`：

```
 wx <- function(d){
 w <- wilcox.test(
  # First vector (x)
    subset(d, Type == "PRE", select = Value )[,1], 
    subset(d, Type == "POST", select = Value )[,1]
      )
  # c(1,3) returns the Stat and the P-value (tweak that if you want something else)
  return(w[c(1,3)])
  } 
```

最后，您只需将该函数应用于您的数据框：

```
> ddply(data, .(Category), .fun = wx  )
    Category      V1        V2
           A 2047794 0.7862484
           B  725554 0.3585648
           C 3071435 0.8459535
           D   80693 0.2112926 
           E  347314 0.3984288
           F   83304 0.6252554
           H   71762 0.3247840
           I   88874 0.4177269 
```

当然，考虑到我构建表格的方式，没有什么是重要的，但是你在 V1 中有统计数据，在 V2 中有 P 值。

# php - jquery 使用 json 进行多个自动完成

> ID：14466899
> 
> 赞同：0
> 
> 时间：2013-01-22T19:54:23.893
> 
> 标签：php, jquery, json, autocomplete, jquery-autocomplete

我正在处理 jquery 多个自动完成功能，但是，当我输入一些内容时，所有项目都会发布而不是匹配的项目。我的 Javascript 是

```
$('.tags').bind("keydown", function(event) {
if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
    event.preventDefault();
    }
}).autocomplete({
    source : function(request, response) {
        $.getJSON($.cookie('base_url') + "js/getaddressbook.php", {
            term : extractLast(request.term)
        }, response);
    },
    search : function() {
        var term = extractLast(this.value);
        if (term.length < 2) {
            return false;
        }
    },

    focus : function() {
        return false;
    },
    select : function(event, ui) {
        var terms = split(this.value);
        terms.pop();
        terms.push(ui.item.value);
        terms.push("");
        this.value = terms.join("; ");
        return false;
    }
}); 
```

js/getaddressbook.php 返回

> ["gunjan.soni","askhr","saurabh.burman","Aditi.Nehra","ithelpdesk","shipra.kwatra","gagandeep.manchanda"]

不知道我哪里错了。

下面是快照的样子

![http://i.stack.imgur.com/SmRjX.png](../Images/01c029ad845c0c20c7477058e4a94bea.png)

请帮忙！

我的 JS 控制器有这个功能

```
Public function getaddressbook() {
        $this -> load -> model('common_model');
        $data = $this -> common_model -> addressbook();
        echo json_encode($data);
    } 
```

而common_model有这个功能

```
Public function addressbook()
    {
        $this -> db -> select('emailid');
        $this -> db ->where('emailid <>','');
        $result = $this -> db -> get('addressbook');
        if ($result -> num_rows() > 0)
        {
            foreach ($result->result() as $row)
            {
                $data[] = $row -> emailid;
            }
            return ($data);
        }
        else
        {
            return FALSE;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:15:28.437

You are not passing the **term** anywhere in your controller.

And of course using that term to query your database for example:

```
$this->db->like('column_name', $term); 
```

For your code, it could be:

```
Public function getaddressbook() {
        $this -> load -> model('common_model');
        $term = $this->input->get('term');
        $data = $this->common_model->addressbook($term);
        echo json_encode($data);
    }

Public function addressbook($term)
    {
        $this -> db -> select('emailid');
        $this -> db ->where('emailid <>','');
        $this->db->like('column_name', $term);
        $result = $this -> db -> get('addressbook');
        if ($result -> num_rows() > 0)
        {
            foreach ($result->result() as $row)
            {
                $data[] = $row -> emailid;
            }
            return ($data);
        }
        else
        {
            return FALSE;
        }
    } 
```

# javascript - 使用 JSON 每 x 秒更新传单标记位置

> ID：14466900
> 
> 赞同：2
> 
> 时间：2013-01-22T19:54:27.997
> 
> 标签：javascript, leaflet

我的地图上有一个标记，代表国际空间站的当前位置（来自[http://open-notify-api.herokuapp.com/iss-now.json?callback=](http://open-notify-api.herokuapp.com/iss-now.json?callback=) ?）。我还试图让它每 1 秒移动一次，以跟随空间站的轨道。

这是我现在的代码：

```
$.getJSON('http://open-notify-api.herokuapp.com/iss-now.json?callback=?', function(data) {                 
               var latitude = data["data"]["iss_position"]["latitude"];
               var longitude = data["data"]["iss_position"]["longitude"];
               var iss = L.marker([latitude,longitude]).bindPopup("I am the ISS").addTo(map);
               $(function() {
                 setInterval(function() {
                    iss.setLatLng([latitude,longitude]).update();
                 },1000);
               });
              }); 
```

这是 jsFiddle 中的所有内容：http: [//jsfiddle.net/zmkqu/](http://jsfiddle.net/zmkqu/)

它似乎将标记放置在加载时的正确位置，但不会像应有的那样每秒更新一次。关于我做错了什么的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T20:01:44.120

您应该将整个 Ajax 调用放在`setInterval`回调中。现在您正在将标记设置为第二个位置，因为`data`不会改变。您必须每秒拨打一个新电话：

```
var iss;

function update_position() {
    $.getJSON('http://open-notify-api.herokuapp.com/iss-now.json?callback=?', function(data) {
        var latitude = data["iss_position"]["latitude"];
        var longitude = data["iss_position"]["longitude"];
        if (!iss) {
            iss = L.marker([latitude,longitude]).bindPopup("I am the ISS").addTo(map);
        }
        iss.setLatLng([latitude,longitude]).update();
        setTimeout(update_position, 1000);
    });
}

update_position(); 
```

[**演示**](http://jsfiddle.net/zmkqu/33/)

注意：最好`setTimeout`与 Ajax 调用一起使用，因为您不知道需要多长时间才能获得响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:36:18.603

如果您需要保证它每秒更新一次，您可能需要稍微修改一下......现在它会在服务器响应 json 后 1 秒触发，这很可能不是自上次更新以来的 1 秒。

你想要的是更像这样的东西：

```
 var iss
     , timeElapsed = 0;

function update_position() {
    elapsedTime = new Date().getMilliseconds();

    $.getJSON('http://open-notify-api.herokuapp.com/iss-now.json?callback=?', function(data) {
        var latitude = data["data"]["iss_position"]["latitude"];
        var longitude = data["data"]["iss_position"]["longitude"];

        elapsedTime = new Date().getMilliseconds() - elapsedTime;

        if (!iss) {
            iss = L.marker([latitude,longitude]).bindPopup("I am the ISS").addTo(map);
        }
        iss.setLatLng([latitude,longitude]).update();
        setTimeout(update_position, 1000 - elapsedTime);
    });
}

update_position(); 
```

你可能会走得更远......如果请求花费的时间超过一秒钟，例如如果您的请求花费的时间超过一秒钟，则会出现一些口吃。但是，如果该请求花费的时间更长，那么您可能还有其他需要处理的问题。

# android - 当我想返回上一个片段时，后退按钮不起作用

> ID：14466901
> 
> 赞同：3
> 
> 时间：2013-01-22T19:54:29.930
> 
> 标签：android, android-fragments, android-listfragment, android-fragmentactivity

我在 MainActivity 中管理两个片段。

其中之一是 ListFragment 的子类，用于显示项目列表。

主要思想是当用户点击其中一个项目时导航到另一个列表视图，并且用户可以在点击后退按钮时返回到上一个列表视图。

传输到新列表的代码如下所示：

```
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
NewFragment newFragment = new NewFragment();
newFragment.setArguments(getIntent().getExtras());
transaction.replace(R.id.fragment_layout, newFragment);
transaction.addToBackStack(null);
transaction.commit(); 
```

但是，我只是简单地退出应用程序，而不是返回上一个视图。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:01:04.497

与活动不同，对于片段，您必须明确地将内容添加到“后堆栈”中。基本上，当您的应用程序显示一个新片段以便您返回预览片段时，您调用[`FragmentTrasaction.addToBackStack()`](http://developer.android.com/reference/android/app/FragmentTransaction.html#addToBackStack%28java.lang.String%29).

当用户按下返回时，框架会处理将片段从返回堆栈中弹出。如果您需要更复杂的东西，您可以覆盖片段的后退按钮。这个问题涵盖了，

> [Android Fragment 手柄后退按钮按下](https://stackoverflow.com/questions/7992216/android-fragment-handle-back-button-press)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T19:59:32.813

后退按钮关闭顶部 Activity，并且不会在 Fragment 历史记录中导航回来。您必须自己使用[popBackStack()](http://developer.android.com/reference/android/app/FragmentManager.html#popBackStack%28%29)

# syntax - 如何通过使用 Apache Pig 取消引用在嵌套元组中进行项目范围？

> ID：14466903
> 
> 赞同：0
> 
> 时间：2013-01-22T19:54:31.587
> 
> 标签：syntax, apache-pig

我有这样的元组：

```
(a: (b:int, c:int, d:int, e:int)) 
```

我想调用一个 UDF 并传递一个嵌套元组的范围。这就是我期望的命令：

```
FOREACH alias GENERATE myUDF(a.(c .. e)); 
```

但这给了我一个错误

```
ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1200: <line 12, column 133>  mismatched input '(' expecting SEMI_COLON 
```

执行此操作的正确方法是什么？

谢谢！乌里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:47:52.980

你有几个选择。`TOTUPLE`如果您的元组不太长，希望使用内置 UDF 并单独列出每个成员不会太麻烦：

```
FOREACH alias GENERATE myUDF(TOTUPLE(a.c, a.d, a.e)); 
```

但是您可能会问这个问题，因为这对您的应用程序来说很麻烦。在这种情况下，你可以从`FLATTEN`ing 元组开始，然后做一个范围：

```
FOREACH (FOREACH alias GENERATE FLATTEN(a)) GENERATE myUDF(TOTUPLE(a::c .. a::e)); 
```

我不确定您希望传递给 UDF 的确切内容——一个较小的元组？还是原始元组中的元素集合？根据您的 UDF 所做的事情，上述`TOTUPLE`s 可能是多余的。

# ios - ios将第一个字符本地化为节名

> ID：14466910
> 
> 赞同：1
> 
> 时间：2013-01-22T19:54:51.070
> 
> 标签：ios, uitableview, core-data, localization

我一直在寻找几个小时...

我想用本地化的第一个字母来实现部分名称，就像苹果的联系人应用程序一样。如果我的电话设置已本地化，则该字符串将位于单独的部分。如果不是，它将被合并到相关的美国字符中。

例如，

在英语设置中：Ömer,Özgün,Orhan,Özüm 将在“O”部分排序结果：Ömer,Özgün,Özüm,Orhan

在土耳其语设置中：Ömer、Özgün、Özüm 将位于“Ö”部分，而 Orhan 将位于“O”部分。

我试过这个：[如何使用第一个字符作为部分名称](https://stackoverflow.com/questions/1741093/how-to-use-the-first-character-as-a-section-name)

和许多其他人......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:43:58.443

试试`UILocalizedIndexedCollation`。

# sql - 动态时间戳 DB2 SQL

> ID：14466913
> 
> 赞同：1
> 
> 时间：2013-01-22T19:54:54.227
> 
> 标签：sql, datetime, db2

使用 DB2 SQL

我想查询从昨天 2:00 开始的记录。我想要一个动态表达式，让我不必在运行查询之前手动输入当前日期。created_datetime 属性是时间戳数据类型。

例如：

```
select record_key, other_stuff
from table
where created_datetime > "2 o'clock PM yesterday" 
```

这种动态时间戳比较甚至可能吗？最终，我希望能够做一个时间窗口，这变得很复杂！

```
select count(1)
from table
where created_datetime between "2 o'clock PM yesterday" and "2 o'clock PM today" 
```

我熟悉当前日期，但我试图概念化我将如何利用它。以下内容让我很接近，但它包括运行查询前 24 小时的所有内容。

```
select count(1)
from table
where created_datetime between (currentdate - 1 day) and (currentdate @ 2 o'clock PM) 
```

我知道这是一些非常基本的领域，发布这个问题我感到内疚，但我的研究到目前为止还没有为我发现任何东西。我感谢为我花费的每一分时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:03:16.427

试试这些

```
select record_key, other_stuff
from table
where created_datetime > CURRENT DATE - 10 HOURS

select count(1)
from table
where created_datetime between (CURRENT DATE - 10 HOURS) and (CURRENT DATE + 14 HOURS)

select count(1)
from table
where created_datetime between (CURRENT DATE - 1 DAYS) and (CURRENT DATE + 14 HOURS) 
```

来自 IBM Dev Works Library：[DB2 基础知识：日期和时间的乐趣](http://www.ibm.com/developerworks/data/library/techarticle/0211yip/0211yip3.html)

那里有成堆的样品。

例如

> 由于缺少更好的术语，您还可以使用英语执行日期和时间计算：

```
current date + 1 YEAR 
current date + 3 YEARS + 2 MONTHS + 15 DAYS 
current time + 5 HOURS - 3 MINUTES + 10 SECONDS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-20T22:16:52.407

在 where 子句中使用此 Timestamp 选项尝试此操作。

以下示例用于查询过去 24 小时之间的数据。

```
select  
   timestamp(CURRENT date - 1 days,(CURRENT time - 24 hours)),
   timestamp(CURRENT date,CURRENT time ) 
FROM 
   sysibm.sysdummy1; 
```

# erlang - 文件 IO 和列表处理

> ID：14466915
> 
> 赞同：1
> 
> 时间：2013-01-22T19:54:58.640
> 
> 标签：erlang

我问了一个类似的问题，不知道有什么不清楚的，但我会再试一次。我有一个文件。文件名是 file.txt，我将 file.txt 读入一个列表。现在我可以将它打印到控制台，它会显示：

```
blah
blah
blah
blah 
```

那也行。完美:) 现在我将如何将其转发到新文件？以便新文件包含：

```
blah
blah
blah
blah 
```

不多也不少。这是我用来将文件读入列表的代码：{ok, Device} = file:open("file.txt", [read]), Li = readdata(Device, [])。

```
readdata(Device, Accum) ->
case io:get_line(Device, "") of
    eof  -> file:close(Device), Accum;
    Line -> readdata(Device, Accum ++ [Line])
end. 
```

再说一遍，新文件与我读取的文件显示的内容完全相同，没有多余的字符，不是全部在 1 行..等等.. 一样:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:19:04.250

好吧，简单的方法是：

```
ok = file:write_file("output.txt", Li). 
```

正如您在[http://www.erlang.org/doc/man/file.html](http://www.erlang.org/doc/man/file.html)中看到的那样，有很多有用的函数，如 file:read_file/1 可以缩短您的程序，同时使其更快一点.

您会看到，将读取数据与累加器组合的方式并不完美，因为它需要复制 Accum 值，因此 readdata/2 函数的复杂度为 N^2。附加到列表的头部是最好的方法，但当然你必须将行存储为 Acc 的值并在最后反转它。

那么文件的长度呢？如果它很大并且不适合内存，那么即使正确使用累加器也会遇到问题。在这种情况下，标准方法是打开两个文件，读取一些数据并立即将其写入输出。

```
copy_file() ->
    {ok, In} = file:open("input", [read]),
    {ok, Out} = file:open("output", [write]),
    copy_file(In, Out),
    file:close(In),
    file:close(Out).

copy_file(In, Out) ->
    case file:read(In, 1024 * 64) of
        {ok, Data} ->
            ok = file:write(Out, Data),
            copy_file(In, Out);
        _ ->
            ok
    end. 
```

我没有尝试过代码，它可能无法编译，我只是试图展示基本思想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:32:57.323

所以这就是我想出的。我稍微修改了您的 readdata/2 以优化附加并删除换行符。write/2 函数使用 lists:foreach/2 和 io:fwrite/3 写入文件。

```
-module(rwlist).
-export([read/1,write/2]).

read(FileName) ->
   case file:open(FileName, [read]) of
      {ok, Device} ->
         readdata(Device, [])
   end.

readdata(Device, Accum) ->
   case io:get_line(Device, "") of
       eof  -> file:close(Device), lists:reverse(Accum);
       Line -> readdata(Device, [(Line--"\n")|Accum])
   end.

write(FileName, List) ->
   case file:open(FileName, [write]) of
      {ok, Device} ->
         lists:foreach(fun(Line) -> writeline(Device, Line) end, List),
         file:close(Device)
   end.

writeline(Device, Line) -> writeline(Device, Line, os:type()).

writeline(Device, Line, {win32,_}) -> io:fwrite(Device, "~s\r\n", [Line]);
writeline(Device, Line, _) -> io:fwrite(Device, "~s\n", [Line]). 
```

这里是测试...

```
57> List=rwlist:read("list").  
["item 1","item 2","item 3","item 4"]
58> rwlist:write("list2", List).
ok
59> List2=rwlist:read("list2"). 
["item 1","item 2","item 3","item 4"] 
```

当然，如果您只是复制文件，Dmitry 的答案会更好。

# git - 您可以在 GIT 存储库中创建虚拟文件夹吗

> ID：14466920
> 
> 赞同：2
> 
> 时间：2013-01-22T19:55:21.210
> 
> 标签：git

我正在评估在我的工作中使用 Git。

相关方提出的众多问题之一是

> 共享组件 -
> 
> SCM 工具集必须能够在不复制代码库的情况下管理共享组件。代码库的重复会导致代码分歧。这通常是通过使用虚拟指针来完成的。两个系统/应用程序共享相同的代码库、dll、配置文件等

我知道这实际上不是一个问题，但我离题了。

我通常会使用 Maven 来提取二进制工件，或者从共享存储库中签出并使用我的构建工具将所有内容设置到正确的位置，但这显然不是这个要求的选项。

是否可以在 Git 存储库中拥有虚拟文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T06:51:55.393

如果虚拟指针是指符号链接，那么是的，git 确实“支持”符号链接（请参阅“ [git 对符号链接的文件做了什么？](https://stackoverflow.com/questions/954560/what-does-git-do-to-files-that-are-a-symbolic-link) ”）

但这不是用于*源*依赖的解决方案（即一个 git repo 需要其他 git repos 的内容）。
为此，您需要[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)，它允许您引用其他 git repos 历史中的固定点。例如，参见“[使用 git 中的插件维护项目](https://stackoverflow.com/a/4311451/6309)”。

# javascript - KnockoutJS 2.0 映射和修改映射对象

> ID：14466929
> 
> 赞同：1
> 
> 时间：2013-01-22T19:55:56.723
> 
> 标签：javascript, knockout.js

所以，在我使用淘汰赛的第一周，我想我得到了一个很好的原型：（修剪并删除了 ajaxy 调用）

[http://jsfiddle.net/NelsonLamprecht/39dfx/](http://jsfiddle.net/NelsonLamprecht/39dfx/)

```
"use strict";

var steeringTeamSheetViewModel = function (serviceUrl) {
var self = this;
self.viewModel = ko.mapping.fromJS([]);

self.InitializeAjax = function () {
    //abbreviated  
};

self.GetData = function () {
    //abbreviated
    var data = {
        "Sections": [{
            "ProjectType": "BUSINESS EXPANSION",
                "Projects": [{
                "ID": "767a46a2-ddba-435c-a9f9-fdb9f0175337",
                    "ItemOrder": 0,
                    "ProjectName": "project abc"
            }, {
                "ID": "0e36d7da-92e6-4f1b-939d-936d6e759115",
                    "ItemOrder": 0,
                    "ProjectName": "project abc"
            }, {
                "ID": "f6e447d4-955d-48e0-bcdf-6db9044b7a89",
                    "ItemOrder": 0,
                    "ProjectName": "project a"
            }]
        }, {
            "ProjectType": "OPER & MAINT - EFFICIENCY",
                "Projects": [{
                "ID": "9883a3c8-d01e-4fc9-8f66-9b46d720afde",
                    "ItemOrder": 0,
                    "ProjectName": "project q"
            }]
        }, {
            "ProjectType": "OTHER",
                "Projects": [{
                "ID": "f1ccfa79-c5b1-4880-b5a1-1c2350e709e1",
                    "ItemOrder": 0,
                    "ProjectName": "project 1"
            }]
        }]
    };
    self.ProcessRetrievedData(data);
};

self.ProcessRetrievedData = function (retrievedData) {
    self.viewModel(retrievedData);
};   

self.GetData();
};
var steeringTeamSheetService = 'someurl';
var sts = new steeringTeamSheetViewModel(steeringTeamSheetService);
ko.applyBindings(sts); 
```

我现在要做的是将 ko.oberservableArray 更改为另一个绑定，例如浮动的 .indexed() 绑定。

[http://jsfiddle.net/NelsonLamprecht/39dfx/19/](http://jsfiddle.net/NelsonLamprecht/39dfx/19/)

```
"use strict";

var steeringTeamSheetViewModel = function (serviceUrl) {
var self = this;
var mapping = {
'sections': {
    create: function(options) {
        alert(options);
    }
}
}
self.viewModel = ko.mapping.fromJS([],mapping);

self.InitializeAjax = function () {
    //abbreviated  
};

self.GetData = function () {
    //abbreviated
    var data = {
        "Sections": [{
            "ProjectType": "BUSINESS EXPANSION",
                "Projects": [{
                "ID": "767a46a2-ddba-435c-a9f9-fdb9f0175337",
                    "ItemOrder": 0,
                    "ProjectName": "project abc"
            }, {
                "ID": "0e36d7da-92e6-4f1b-939d-936d6e759115",
                    "ItemOrder": 0,
                    "ProjectName": "project abc"
            }, {
                "ID": "f6e447d4-955d-48e0-bcdf-6db9044b7a89",
                    "ItemOrder": 0,
                    "ProjectName": "project a"
            }]
        }, {
            "ProjectType": "OPER & MAINT - EFFICIENCY",
                "Projects": [{
                "ID": "9883a3c8-d01e-4fc9-8f66-9b46d720afde",
                    "ItemOrder": 0,
                    "ProjectName": "project q"
            }]
        }, {
            "ProjectType": "OTHER",
                "Projects": [{
                "ID": "f1ccfa79-c5b1-4880-b5a1-1c2350e709e1",
                    "ItemOrder": 0,
                    "ProjectName": "project 1"
            }]
        }]
    };
    self.ProcessRetrievedData(data);
};

self.ProcessRetrievedData = function (retrievedData) {
    self.viewModel(retrievedData);
    //I think I should be using something like
    //self.viewModel = ko.mapping.fromJSON(retrievedData,mapping,{});
};   

self.GetData();
};
var steeringTeamSheetService = 'someurl';
var sts = new steeringTeamSheetViewModel(steeringTeamSheetService);
ko.applyBindings(sts); 
```

但是，如果没有这些，我认为我在设置模型和从 Web 服务 (c#) 获取数据时没有遵循正确的模式。

有人可以验证我这样做是对的以及对创建模式的帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:18:41.553

据我了解您的问题，您尝试通过ajax 下载数据并将其存储在您的steeringTeamSheetViewModel 的属性“viewModel”中。你的方式在我看来没问题。

您不应该覆盖 self.viewModel。因为如果 ko.applyBindings 已经运行到那个点，你会破坏绑定。

```
self.ProcessRetrievedData = function (retrievedData) {
    // map the data from the viewModel and update self.viewModel
    self.viewModel(ko.mapping.fromJSON(retrievedData,mapping,{}));
}; 
```

请记住，如果您有大视图模型，ko.mapping 将变得非常慢。

# perl - 在 Perl 中使用 XML::Parser 将 XML 解析为哈希

> ID：14466930
> 
> 赞同：0
> 
> 时间：2013-01-22T19:55:58.610
> 
> 标签：perl, parsing, hash, xml-parsing

我想解析一个简单的 XML 文档来散列。

```
<?xml version ="1.0"?>
<catalog>
    <book id = "bk101">
        <author>Bob</author>
        <title>Batman</title>
    </book>
    <book id = "bk102">
        <author>Jerry</author>
        <title>Superman</title>
    </book>
</catalog> 
```

预期的输出如下所示。

```
$VAR1 = {
    'catalog'=>{
            'bk101'=>[
                  'author'=>'Bob',
                  'title'=>'Batman'
                  ]
            'bk102'=>[
                  'author'=>'Jerry',
                  'title'=>'Superman'
                  ]
        }
    } 
```

我在`XML::Simple`和 其他库的帮助下完成了这项工作，但我必须在不`XML::Parser`使用递归的情况下使用 .

我将如何在 Perl 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:46:02.387

[XML::Hash::LX::xml2hash()](http://cpan.me/XML%3a%3aHash%3a%3aLX)接近您正在寻找的内容：

```
#!/usr/bin/env perl
use strict;
use warnings qw(all);

use Data::Dumper;
use XML::Hash::LX;

my $hash = xml2hash q(<?xml version ="1.0"?>
    <catalog>
        <book id = "bk101">
            <author>Bob</author>
            <title>Batman</title>
        </book>
        <book id = "bk102">
            <author>Jerry</author>
            <title>Superman</title>
        </book>
    </catalog>
);
print Dumper $hash; 
```

印刷：

```
$VAR1 = {
          'catalog' => {
                       'book' => [
                                 {
                                   'title' => 'Batman',
                                   'author' => 'Bob',
                                   '-id' => 'bk101'
                                 },
                                 {
                                   'title' => 'Superman',
                                   'author' => 'Jerry',
                                   '-id' => 'bk102'
                                 }
                               ]
                     }
        }; 
```

# c - sscanf 不会在 mingw 下使用“%a”扫描十六进制格式的浮点数

> ID：14466933
> 
> 赞同：3
> 
> 时间：2013-01-22T19:56:08.130
> 
> 标签：c, floating-point, hex, mingw, scanf

我在 Windows 中使用带有 mingw 的 gcc 4.6.1。

我最近了解了`%a`用浮点十六进制表示法精确表示浮点数的格式说明符（显然是在 C99 中）。

出于某种原因，我可以用这种方式打印一个浮点数，但我无法扫描它。

`%a`如果我用我的代码替换 , 的两个实例来`%f`处理打印和扫描浮点数就好了。

当我在传统的 Unix 系统 (gcc 4.2.1) 上运行该代码时，它似乎工作得很好。

我已经尝试了所有我能想到的浮动和双打的变化。我尝试添加 flag `-std=c99`，这似乎改变了它是否将数字文字视为 double 或 float，但它并没有解决我的问题。

我想知道两件事，如果其他人可以复制这个问题，以及我可以做些什么来解决它。

```
#include <stdio.h>
int main(){
    char buffer[1000];
    sprintf(buffer, "%la", 21.3930);

    double x = 0;
    printf("\n");
    printf(buffer);

    if(!sscanf(buffer, "%la", &x))
        printf("\nscan failed.");
    printf("\n%la", x);

    return 0;
} 
```

输出是：

```
0x1.5649bap+4
scan failed.
0x0.000000p+0 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T07:17:51.937

MinGW`msvcrt.dll`用于其 C 运行时支持的主要部分。 `msvcrt.dll`通常不支持 C99 功能。

有一些 MinGW 版本提供自己对 C99 I/O 说明符的支持，但我没有收集到关于哪些版本支持 C99 功能的确切信息。

有关其他详细信息，请参见以下内容：

*   [https://stackoverflow.com/a/7136886/12711](https://stackoverflow.com/a/7136886/12711)
*   [https://stackoverflow.com/a/10680635/12711](https://stackoverflow.com/a/10680635/12711)

**更新**：看起来[MinGW 的 TDM-64 发行](http://tdm-gcc.tdragon.net/)版（版本 4.6.1）支持具有前缀名称的函数系列中的 C99 说明符，`scanf()`例如：

```
__mingw_sscanf()
__mingw_scanf() 
```

可能是在 4.6.1 之后的版本中改进了支持（看起来至少在 4.6.1 版中这些功能不在 TDM 发行版的 32 位版本中 - 请记住，TDM-64 是能够构建 32 位二进制文​​件和 64 位二进制文​​件）。

您可以使用一组简单的宏将正常名称“重定向”到这些函数。

示例输出：

```
C:\temp>gcc --version
gcc (tdm64-1) 4.6.1

C:\temp>gcc -m32 -std=gnu99 -o test test.c

C:\temp>test

0xa.b24dd2f1a9fcp+1
0xa.b24dd2f1a9fcp+1 
```

# xna - Windows Phone - XNA 游戏 - 后退按钮

> ID：14466938
> 
> 赞同：0
> 
> 时间：2013-01-22T19:56:25.480
> 
> 标签：xna, windows-phone

我的后退按钮有问题。在我的游戏中，我有两个屏幕。一个带有标题（菜单），第二个带有游戏。当我使用一次后退按钮时，我会暂停游戏并返回标题屏幕。当我再次使用它时，我需要终止应用程序进程。我怎样才能做到这一点？下面我向你展示了我如何使用后退按钮。我尝试使用 2 个手势，但是当我宣布它们时，一切都没有成功。

这就是我宣布手势的方式`Initialize()`：

`TouchPanel.EnabledGestures = GestureType.FreeDrag`

首先我声明

```
bool IsPlayingGame = true;
int endGame= 0; 
```

然后在函数中`Update`：

```
if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
{
    if (!IsPlayingGame) this.Exit();
}

if (isTitleScreenShown)
{
    UpdateGameScreen();
}
else if (isGameSceenShown)
{
    UpdateTitleScreen();

    // TODO: Add your update logic here
    /* MY FUNCTIONS */

    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
    {
        if (endGame == 5) base.Exit();
    }
}
base.Update(gameTime); 
```

在 Visual Studio 中，它可以工作。我觉得很好，但在诺基亚手机上却没有。为什么？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T15:38:20.157

在 GamePage.xaml.cs 中应该有一个方法`protected override void OnNavigatedFrom(NavigationEventArgs e)`

当您触摸设备上的“返回”按钮时会触发此方法。

# r - R中数据框的ifelse语句

> ID：14466939
> 
> 赞同：4
> 
> 时间：2013-01-22T19:56:31.227
> 
> 标签：r, if-statement

我希望有人可以帮助我弄清楚如何编写 if-else 语句来处理我的数据集。我有按年计算的树木生长率数据。我需要计算从一年到下一年的增长率是否下降了 >50%。我无法应用 ifelse 语句来计算我的最终字段。我对 R 比较陌生，所以我的代码可能不是很有效，但这里有一个我到目前为止的例子：对于示例数据集，

```
test<-data.frame(year=c("1990","1991","1992","1993"),value=c(50,25,20,5))
  year value
1 1990    50
2 1991    25
3 1992    20
4 1993     5 
```

然后我计算当年和上一年增长之间的差异（“价值”）：

```
test[-1,"diff"]<-test[-1,"value"]-test[-nrow(test),"value"]
  year value diff
1 1990    50   NA
2 1991    25  -25
3 1992    20   -5
4 1993     5  -15 
```

然后计算每年增长的 50% 是多少：

```
test$chg<-test$value * 0.5
  year value diff  chg
1 1990    50   NA 25.0
2 1991    25  -25 12.5
3 1992    20   -5 10.0
4 1993     5  -15  2.5 
```

然后，我尝试使用 ifelse 语句来计算字段“突然”，当从一年到下一年的下降大于 50% 时，该字段将为“1”。这是我尝试使用的代码，但我不确定如何正确引用前一年的“chg”字段，因为我收到一个错误（复制如下）：

```
test$abrupt<-ifelse(test$diff<0 && abs(test$diff)>=test[-nrow(test),"chg"],1,0)
Warning message:
In abs(test$diff) >= test[-nrow(test), "chg"] :
longer object length is not a multiple of shorter object length
> test
  year value diff  chg abrupt
1 1990    50   NA 25.0     NA
2 1991    25  -25 12.5     NA
3 1992    20   -5 10.0     NA
4 1993     5  -15  2.5     NA 
```

当我刚刚分配了几个数字时，对类似 ifelse 语句的测试有效，但我不确定如何让它在 datframe 的上下文中工作。这是一个仅处理几个值的示例：

```
prevyear<-50
curryear<-25
chg<-prevyear*0.5
> chg
[1] 25
> diff<-curryear-prevyear
> diff
[1] -25
> abrupt<-ifelse(diff<0 && abs(diff)>= chg,1,0)
> abrupt
[1] 1 
```

如果有人可以帮助我弄清楚如何将类似的 ifelse 语句应用于我的数据框，我将不胜感激！感谢您提供任何帮助。

谢谢你，凯蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T20:01:53.840

它发出警告，因为比较的两个向量`abs(test$diff) >= test[-nrow(test),"chg"]`具有不同的长度。此外，对于*逻辑 and*，您在`&&`应该使用时使用（它只给出一个 TRUE 或 FALSE）`&`（它是矢量化的：它在两个向量上逐元素操作并返回一个相同长度的向量）。尝试这个：

```
test$abrupt<-ifelse(test$diff<0 & abs(test$diff)>=test$chg,1,0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T20:06:04.423

我会更改您放置的位置`chg`，以使其与`diff`您要与之进行比较的位置一致：

```
test$chg[2:nrow(test)] <- test$value[1:(nrow(test)-1)] * 0.5 
```

然后，纠正你的逻辑运算符，如 Blue Magister 所说：

```
test$abrupt<-ifelse(test$diff<0 & abs(test$diff)>=test$chg,1,0) 
```

你有你的结果：

```
 year value diff  chg abrupt
1 1990    50   NA   NA     NA
2 1991    25  -25 25.0      1
3 1992    20   -5 12.5      0
4 1993     5  -15 10.0      1 
```

此外，您可能会发现该功能`diff`很有帮助：而不是这样做：

```
test[-1,"value"]-test[-nrow(test),"value"] 
```

你可以做

```
diff(test$value) 
```

# node.js - Socket.io 跨域连接失败；'XMLHttpRequest 无法加载...'

> ID：14466949
> 
> 赞同：1
> 
> 时间：2013-01-22T19:57:37.793
> 
> 标签：node.js, cross-domain, socket.io

我正在尝试跨域 socket.io，但我遇到了一个问题：我总是得到`XMLHttpRequest cannot load http://handsonwithnodejs.samarthwiz.c9.io/socket.io/1/?t=1358882710333\. Origin https://c9.io is not allowed by Access-Control-Allow-Origin`.

服务器代码：

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(process.env.PORT);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}
io.set('origins', '*:*');
io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

在第 19 行`io.set('origins', '*:*');`，我尝试用'*'、'https://c9.io'、'c9.io'、'https://c9.io/ *'和 '.' 替换 '* *:* *'，有时我添加类似'c9.io/* '的东西我​​收到警告'非法来源......'但这只是一个与cloud9相关的问题。

 **客户端代码：

```
<html>
<body>
<script src="https://raw.github.com/LearnBoost/socket.io-client/master/dist/socket.io.js"></script>
<script>
  var socket = io.connect('http://handsonwithnodejs.samarthwiz.c9.io');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script>
</body>

</html> 
```

我知道使用 github 来获取我的脚本还不是最好的主意，但我想保持我的代码干净并且错误消息可读（'socket.io.min.js' 中的所有内容都在第 2 行）

PS 1\. 我知道还有其他类似的线程，但它们并没有解决我的问题。2\. 请不要回复'Just host the page on the same server as socket.io' 我需要它是跨域的，这是有原因的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:18:18.820

我认为您需要在托管客户端代码时设置 Access-Control-Allow-Origin 标头。查看[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)以获取有关标头的更多信息。

出于安全原因，此标头必须由客户端设置。**

# python - 为什么我的 python/numpy 示例比纯 C 实现更快？

> ID：14466950
> 
> 赞同：7
> 
> 时间：2013-01-22T19:57:39.220
> 
> 标签：python, c, performance, numpy

我在 python 和 C 中有几乎相同的代码。 Python 示例：

```
import numpy
nbr_values = 8192
n_iter = 100000

a = numpy.ones(nbr_values).astype(numpy.float32)
for i in range(n_iter):
    a = numpy.sin(a) 
```

C 示例：

```
#include <stdio.h>
#include <math.h>
int main(void)
{
  int i, j;
  int nbr_values = 8192;
  int n_iter = 100000;
  double x;  
  for (j = 0; j < nbr_values; j++){
    x = 1;
    for (i=0; i<n_iter; i++)
    x = sin(x);
  }
  return 0;
} 
```

当我运行这两个示例时，发生了一些奇怪的事情：

```
$ time python numpy_test.py 
real    0m5.967s
user    0m5.932s
sys     0m0.012s

$ g++ sin.c
$ time ./a.out 
real    0m13.371s
user    0m13.301s
sys     0m0.008s 
```

看起来python/numpy比C快两倍。上面的实验有没有错误？你怎么解释呢？

PS 我有 Ubuntu 12.04、8G 内存、核心 i5 顺便说一句

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T20:14:39.080

First, turn on optimization. Secondly, subtleties matter. Your C code is definitely not 'basically the same'.

Here is equivalent C code:

sinary2.c:

```
#include <math.h>
#include <stdlib.h>

float *sin_array(const float *input, size_t elements)
{
    int i = 0;
    float *output = malloc(sizeof(float) * elements);
    for (i = 0; i < elements; ++i) {
        output[i] = sin(input[i]);
    }
    return output;
} 
```

sinary.c:

```
#include <math.h>
#include <stdlib.h>

extern float *sin_array(const float *input, size_t elements)

int main(void)
{
    int i;
    int nbr_values = 8192;
    int n_iter = 100000;
    float *x = malloc(sizeof(float) * nbr_values);  
    for (i = 0; i < nbr_values; ++i) {
        x[i] = 1;
    }
    for (i=0; i<n_iter; i++) {
        float *newary = sin_array(x, nbr_values);
        free(x);
        x = newary;
    }
    return 0;
} 
```

Results:

```
$ time python foo.py 

real    0m5.986s
user    0m5.783s
sys 0m0.050s
$ gcc -O3 -ffast-math sinary.c sinary2.c -lm
$ time ./a.out 

real    0m5.204s
user    0m4.995s
sys 0m0.208s 
```

The reason the program has to be split in two is to fool the optimizer a bit. Otherwise it will realize that the whole loop has no effect at all and optimize it out. Putting things in two files doesn't give the compiler visibility into the possible side-effects of `sin_array` when it's compiling `main` and so it has to assume that it actually has some and repeatedly call it.

Your original program is not at all equivalent for several reasons. One is that you have nested loops in the C version and you don't in Python. Another is that you are working with arrays of values in the Python version and not in the C version. Another is that you are creating and discarding arrays in the Python version and not in the C version. And lastly you are using `float` in the Python version and `double` in the C version.

Simply calling the `sin` function the appropriate number of times does not make for an equivalent test.

Also, the optimizer is a really big deal for C. Comparing C code on which the optimizer hasn't been used to anything else when you're wondering about a speed comparison is the wrong thing to do. Of course, you also need to be mindful. The C optimizer is very sophisticated and if you're testing something that really doesn't do anything, the C optimizer might well notice this fact and simply not do anything at all, resulting in a program that's ridiculously fast.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T20:21:35.870

因为“numpy”是为速度而实现的专用数学库。C 具有 sin/cos 的标准函数，这些函数通常是为了准确性而导出的。

您也没有将苹果与苹果进行比较，因为您在 C 中使用 double，在 python 中使用 float32 (float)。如果我们将python代码改为计算float64，在我的机器上时间增加了大约2.5秒，使其与正确优化的C版本大致匹配。

如果整个测试是为了做一些更复杂的事情，需要更多的控制结构（if/else、do/while 等），那么你可能会看到 C 和 Python 之间的差异更小——因为 C 编译器真的做不到“罪”更快 - 除非您实现更好的“罪”功能。

较新的事实是您的代码在双方都不完全相同... ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T14:54:16.653

您似乎在 C 8192 x 10000 次中执行相同的操作，但在 python 中只有 10000 次（我之前没有使用过 numpy，所以我可能会误解代码）。为什么在 python 案例中使用数组（同样我不习惯 numpy，所以取消引用可能是隐式的）。如果您希望使用数组，请注意双精度数在缓存和优化矢量化方面的性能影响 - 您在两种实现之间使用不同的类型（浮点数与双精度数），但考虑到算法，我认为这并不重要。

围绕 C 与 Pythis、Pythat 的许多异常性能基准问题的主要原因是 C 实现通常很差。

[https://www.ibm.com/developerworks/community/blogs/jfp/entry/A_Comparison_Of_C_Julia_Python_Numba_Cython_Scipy_and_BLAS_on_LU_Factorization?lang=en](https://www.ibm.com/developerworks/community/blogs/jfp/entry/A_Comparison_Of_C_Julia_Python_Numba_Cython_Scipy_and_BLAS_on_LU_Factorization?lang=en)

如果您注意到这个人编写 C 来处理一个双精度数组（在他可以使用的地方不使用限制或 const 关键字），他会通过优化构建然后强制编译器使用 SIMD 而不是 AVE。简而言之，如果他想要性能，编译器也会为双精度和错误类型的寄存器使用效率低下的指令集 - 您可以确定 numba 和 numpy 将使用尽可能多的花里胡哨，并且将附带非常高效的 C和 C++ 库开始。简而言之，如果您想要 C 的速度，您必须考虑它，您甚至可能必须反汇编代码，并且可能禁用优化并改用编译器内在函数。它为您提供了执行此操作的工具，因此不要指望编译器会为您完成所有工作。如果您想要那种自由度，请使用 Cython、Numba、Numpy、Scipy 等。他们

这是一篇关于这些要点的非常好的文章（我会使用 SciPy）：

[https://www.scipy.org/scipylib/faq.html](https://www.scipy.org/scipylib/faq.html)

# iphone - 我们如何将视频文件从库复制到文档目录？

> ID：14466953
> 
> 赞同：5
> 
> 时间：2013-01-22T19:58:00.353
> 
> 标签：iphone, ios, xcode, opencv, video-processing

是否可以将位于 iOS 照片库中的视频文件复制到我们应用程序的文档目录中？我使用 uiimagepickercontroller 进行了尝试，我们从中获取了视频文件的 NSUrl，然后将其转换为 NSData，然后将其写入文件。但不幸的是，它不起作用。我有任何替代方法吗？

我的意图是将视频加载到 OpenCV CvCapture。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-26T14:18:47.447

嘿 Isarathg 这是 IOS 设备的经典用例。它不允许您直接使用路径值访问任何相册资产。要交叉检查我的答案，请检查您的文件的 FileExistsAtPath，如下所示 - ：

```
println(NSFileManager.defaultManager().fileExistsAtPath( urlvalue.path!))

O/P you will get => False 
```

在阅读了整个 IOS 文档之后，几天前我也遇到了这个问题。我已经弄清楚了“当且仅当我们打开 PHImageManager 会话时，我们才能访问 PhotoAlbum 资产”。要交叉检查此声明，请尝试以下代码 -：

```
var currentVideofetch: PHFetchResult!
required init(coder aDecoder: NSCoder) {
    let options = PHFetchOptions()
    options.sortDescriptors = [
        NSSortDescriptor(key: "creationDate", ascending: true)
    ]
    currentVideofetch = PHAsset.fetchAssetsWithMediaType(.Video, options: options)
    super.init(coder: aDecoder)
}
func checkImageExists(){
let asset = self.currentVideofetch.objectAtIndex(1) as? PHAsset
}
if let checkedAsset = asset {
        PHImageManager.defaultManager().requestAVAssetForVideo(checkedAsset, options: nil, resultHandler: {[weak self](result: AVAsset!, audioMix: AVAudioMix!, info: [NSObject : AnyObject]!) in
            println(NSFileManager.defaultManager().fileExistsAtPath(self.urlvalue.path!))
            })
    }
O/P you will get => True 
```

打开 PHImageManager 会话之后，然后当我尝试使用路径访问视频时。它工作得很好。还能够使用相册中视频的相对路径成功地将所有视频文件复制到我们的本地应用程序目录。

如果您需要，我可以将我的实现发送给您。但不确定它是否正确。但对我来说工作得很好。

我发现的第二个也是最有效的解决方案是使用

> AVAssetExportSession

它就像一个魅力。我的实现如下-：

```
func importVideoToAppDir(videoURL: NSURL, videoFinalPath: NSURL, handler: ((NSURL?) -> Void)?) {

    var assetDuration:  CMTime!
    var asset: AVAsset!

    asset = AVAsset.assetWithURL(videoURL) as! AVAsset
    assetDuration = asset!.duration
    if (DirOperations.DeleteIfExists(videoTempPath) &&  DirOperations.DeleteIfExists(videoFinalPath)) {
        let startTime = kCMTimeZero
        let assetDurationSeconds = CMTimeGetSeconds(self.asset!.duration)
        var range: CMTimeRange!
        if assetDurationSeconds > Float64(maxDuration) {
            let stopTime = CMTimeMakeWithSeconds(Float64(maxDuration), 1)
            range = CMTimeRangeFromTimeToTime(startTime, stopTime)
            } else {
                let stopTime = CMTimeMakeWithSeconds(assetDurationSeconds, 1)
                range = CMTimeRangeFromTimeToTime(startTime, stopTime)
            }
            var exporter :AVAssetExportSession = AVAssetExportSession(asset: self.asset, presetName: AVAssetExportPresetHighestQuality)
            exporter.outputURL = videoFinalPath
            exporter.outputFileType = AVFileTypeQuickTimeMovie
            exporter.timeRange = range
            exporter.exportAsynchronouslyWithCompletionHandler { () -> Void in
                switch exporter.status {
                    case  AVAssetExportSessionStatus.Failed:
                    println("failed import video: \(exporter.error)")
                    handler?(nil)
                    case AVAssetExportSessionStatus.Cancelled:
                    println("cancelled import video: \(exporter.error)")
                    handler?(nil)
                    default:
                    println("completed import video")
                    println(videoFinalPath)
                    handler?(videoFinalPath)

                }
            }
    }
}

   func DeleteIfExists(path: NSURL) -> Bool {
        var deleted = true
        var error: NSError?
        if (NSFileManager.defaultManager().fileExistsAtPath(path.path!)) {
            deleted = NSFileManager.defaultManager().removeItemAtPath(path.path!, error: &error)
        }
        return deleted
    } 
```

希望能帮助到你。

# .net-4.0 - EF：当种子失败时，如何回滚更新数据库迁移？

> ID：14466956
> 
> 赞同：3
> 
> 时间：2013-01-22T19:58:11.553
> 
> 标签：.net-4.0, entity-framework-5

我们有我们的迁移，并且我们有一个在每次迁移运行后执行的种子方法。

如果种子方法失败，我可以回滚种子数据，但我还想在代码中回滚“update-database”语句以将数据库结构恢复到之前的状态。

这可能吗？

一些代码：

```
internal sealed class Configuration : DbMigrationsConfiguration<TheContext>
{
    protected override void Seed(TheContext context)
    {
        //Set a bunch of entities

        using (var transaction = new TransactionScope())
        {
            try
            {
                context.SaveChanges();
                transaction.Complete();
            }
            catch (Exception ex)
            {
                //TODO: How do I rollback the last Update-Database command?
                throw;
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:25:53.357

我对像您这样的案例的建议，即您拥有影响迁移成功的数据，是在迁移内部进行。

我一直这样做，创建要在迁移的 Up 方法和 down 方法中运行的 sql 脚本。这样，当迁移成功应用时，您就知道它也与数据一致。另外，您可以撤消迁移，同时撤消所有数据。

这种方法的缺点是您不能使用 EF 的上下文来创建数据，这迫使您创建运行您手工制作的句子的 Sql 方法。

```
public class TestMigration() : DbMigration
{
    protected override Up() 
    {
       //Do some migration stuff

       Sql("INSERT YOUR DATA HERE");
    }

    protected override Down() 
    {
      //Undo some migration stuff
      Sql("DELETE YOUR DATA HERE");
    }   
} 
```

如果您仍然想使用 Seed 方法，我没有自己尝试过，但我认为这可以工作：

```
internal sealed class Configuration : DbMigrationsConfiguration<TheContext>
{
    protected override void Seed(TheContext context)
    {
        //Set a bunch of entities

        using (var transaction = new TransactionScope())
        {
            try
            {
                context.SaveChanges();
                transaction.Complete();
            }
            catch (Exception ex)
            {
                var migrator = new DbMigrator(this);

                var lastMigration = migrator.GetDatabaseMigrations().Last();

                migrator.Update(lastMigration);
            }
    }
} 
```

我在这段代码中看到的问题是，在运行 Update 方法后，Seed 方法将再次触发，从而创建一个无限循环。

# c# - this.PropertyName 和 _PropertyName 有什么区别？

> ID：14466958
> 
> 赞同：0
> 
> 时间：2013-01-22T19:58:18.820
> 
> 标签：c#, class, linq-to-sql, this, partial

因为我经常让`LinqToSql`生成部分实体类，我想知道我通过代码添加其他属性的做法是否正确，是否有更好的方法来做同样的事情？`this.PROPERTY_NAME`我也想知道使用vs访问其他属性的值有什么区别`_PROPERTY_NAME`？在我的网络应用程序中，我一直在使用`this.PROPERTY_NAME`，但我想知道这是否是我在开场白中已经说过的，我应该使用的正确方法。另外，什么是`_PROPERTY_NAME`我们何时使用它？

例子：

```
public partial class User
{
    public bool IsThisProper {
        get{
            return this.SomeIntProperty == 10; // I usually use this
        }  
    }

    public bool WhenToUseThisApproach {
        get{
            return _SomeIntProperty == 10; // What is this in comparison to above?
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:02:40.337

一个是属性，另一个是该属性存储其值的私有支持字段。如果您想执行该属性在其 getter/setter 中的任何代码，则使用该属性，如果您不这样做，则不要。您可能想要使用属性，而不是字段，尤其是设置（设置它会触发属性更改事件，因此使用该属性的唯一时间是如果您不希望引发该事件）。

# ios - 使用 xib 创建 UICollectionViewCell 子类

> ID：14466959
> 
> 赞同：48
> 
> 时间：2013-01-22T19:58:31.730
> 
> 标签：ios, iphone, uicollectionview, xib, uicollectionviewcell

我正在尝试创建一个`UICollectionViewCell`带有链接 xib 的子类，我已经这样做了：我创建了一个新的 xib 文件并`UICollectionViewCell`在其中添加了一个，然后我创建了这个子类文件：

```
@interface MyCell : UICollectionViewCell

@property (weak, nonatomic) IBOutlet UILabel *label;
@end 
```

我还在文件所有者自定义类中链接了`MyCell`界面生成器中的类，并且添加了一个`UILabel`，然后在我的`UICollectionView`viewDidLoad 中执行以下操作：

```
[self.collectionView registerClass:[MyCell class] forCellWithReuseIdentifier:@"MyCell"];

UINib *cellNib = [UINib nibWithNibName:@"MyCell" bundle:nil];
[self.collectionView registerNib:cellNib forCellWithReuseIdentifier:@"MyCell"]; 
```

以及在这个：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
MyCell *cell = (MyCell*)[cv dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];

cell.label.text = @"Cell Text";

return cell;
} 
```

但是这不起作用，我收到此错误：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<NSObject 0x907eca0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key label.' 
```

我做错了什么？如何将`UICollectionViewCell`子类连接到 xib，并将其显示在`UICollectionView`?

编辑：

我已经这样做了：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath
{

NSString *identifier = @"MyCell";

static BOOL nibMyCellloaded = NO;

if(!nibMyCellloaded)
{
    UINib *nib = [UINib nibWithNibName:@"MyCell" bundle: nil];
    [cv registerNib:nib forCellWithReuseIdentifier:identifier];
    nibMyCellloaded = YES;
}

MyCell *cell = (MyCell*)[cv dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];

cell.labelCell.text = @"Text";

return cell;
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-22T21:03:35.553

确保 .xib 文件中的单元格知道单元格的类型。

选择界面生成器上的单元格

![在此处输入图像描述](../Images/3540823982ff65ab0b6f932fa25cea16.png)

然后在身份检查员上

![在此处输入图像描述](../Images/8fe283b591a871cc483d986faf7e4cef.png)

随后将您的标签与您的属性相关联。（我想你已经这样做了）

然后我建议验证您是否已经在`cellForItemAtIndexPath:`方法中加载了 .xib 文件

```
NSString *identifier = @"MyCell";    

    static BOOL nibMyCellloaded = NO;

    if(!nibMyCellloaded)
    {
        UINib *nib = [UINib nibWithNibName:@"MyCell" bundle: nil];
        [cv registerNib:nib forCellWithReuseIdentifier:identifier];
        nibMyCellloaded = YES;
    } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-05-22T14:02:27.103

您可以在本文档[UICollectionView 添加 UICollectionCell](https://stackoverflow.com/questions/15184968/uicollectionview-adding-uicollectioncell)中找到答案。

> 只有 StoryBoard 中的 UICollectionView 内部有 UICollectionViewCell。如果使用 XIB，使用 CellName.xib 创建一个新的 XIB，将 CollectionViewCell 添加到其中，指定 UICollectionView 自定义类的名称。之后使用 registerNib.Sample 代码：[https ://github.com/lequysang/TestCollectionViewWithXIB](https://github.com/lequysang/TestCollectionViewWithXIB)

# c# - C# 事件订阅和取消订阅重复项

> ID：14466964
> 
> 赞同：9
> 
> 时间：2013-01-22T19:58:43.983
> 
> 标签：c#, event-handling

如果我用 eventHandler 订阅同一个事件 3 次，会不会有问题？例如

```
a.SomethingChanged += new EventHandler(ChangeHandler);
a.SomethingChanged += new EventHandler(ChangeHandler);
a.SomethingChanged += new EventHandler(ChangeHandler); 
```

这是否会导致 ChangeHandler 被调用 3 次而不是 1 次？处理这个问题的最佳方法是什么？

请注意，这些冗余不是在一起，而是代码路径的不同区域。

同样，取消订阅未注册的事件是否存在问题？例如

```
a.SomethingChanged -= new EventHandler(ChangeHandler);  //ChangeHandler was never registered 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T20:04:10.493

如果您多次订阅一个事件，那么您的处理程序将被调用相应的次数 - 在您的示例中为 3 次。

这是否是一个问题取决于您的事件处理程序的作用，但我假设您不希望它被多次调用。

取消订阅您尚未订阅的活动没有问题。

因此，如果您不确定您的应用程序处于什么状态（尽管您确实应该处于这种状态），您可以：

```
a.SomethingChanged -= ChangeHandler;
...
a.SomethingChanged += ChangeHandler; 
```

（注：`new EventHandler(...)`is 语法糖，可省略）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T20:08:37.550

> 如果我用 eventHandler 订阅同一个事件 3 次，会不会有问题？

不，它只会添加 3 次事件处理程序。

> 这是否会导致 ChangeHandler 被调用 3 次而不是 1 次？

是的。

> 处理这个问题的最佳方法是什么？

这取决于你想要什么；你没有指定的。如果您想要一种添加事件处理程序的方法，当且仅当尚未添加事件处理程序时，只需删除事件处理程序，然后再次添加：

```
a.SomethingChanged -= new EventHandler(ChangeHandler);
a.SomethingChanged += new EventHandler(ChangeHandler); 
```

> 取消订阅未注册的活动是否存在问题？

不，它什么也不做。

# php - Zend_Tool，创建 db-table.from-database 在项目中不起作用（找不到模块）

> ID：14466965
> 
> 赞同：0
> 
> 时间：2013-01-22T19:58:44.267
> 
> 标签：php, mysql, zend-framework

我有一个带有现有数据库的 Zend Framework 项目，所以我想根据我的数据库中的表创建模型。我可以从命令行和 Netbeans 中运行 zf 命令就好了，例如生成控制器/表单就可以了。但是，当我想使用命令从数据库创建模型时

```
zf create db-table.from-database application force-overwrite 
```

它给了我这个错误：

```
A models directory was not found for module application.               

Zend Framework Command Line Console Tool v1.12.1
Details for action "Create" and provider "DbTable"
  DbTable
    zf create db-table name actual-table-name module force-overwrite
    zf create db-table.from-database module force-overwrite 
```

当我尝试使用它时也会发生同样的事情

```
zf create db-table.from-database Application force-overwrite 
```

只是为了澄清：模型目录确实存在于我的项目文件夹中。我假设我必须输入应用程序，因为它是我正在使用的模块（默认模块）。

我的数据库连接也很好，因为我可以很好地执行查询。有没有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:29:55.647

我没有使用过这个功能，但“应用程序”不是一个模块。如果您不希望它扫描特定的模块文件夹，我猜您会忽略该参数。如果你只是打电话会发生什么`zf create db-table.from-database force-overwrite`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:34:47.330

我从未见过`zf create db-table.from-database`在任何情况下工作。但是，如果您想尝试应该工作的 netbeans 命令`-m default`（“默认”是模块，添加 -f 强制覆盖），结果命令将如下所示`zf create db-table.from-database -m default`：

就我个人而言，我只是使用该`zf create db-table`命令来创建我需要的数据库表模型。

该命令将在模块`zf create db-table users users -m admin -f`所在`-m admin`的位置（似乎确实需要 -m）并`-f`指示强制写入。第一个`users`是类的名称（Application_Model_DbTable_Users，Users.php），第二个`users`是数据库表的实际名称。

我不知道您对模型的期望是什么，您将得到与以下内容非常相似的东西：

```
<?php

class Application_Model_DbTable_User extends Zend_Db_Table_Abstract
{
    protected $_name    = 'users';
} 
```

在使用 Zend_Db 组件时，这是一个非常重要的类，但如果您是 ZF 的新手，它可能会有点混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T00:00:07.780

与大多数事情一样，问题可能很简单，例如区分大小写和/或拼写错误的目录名称/路径。我不相信没有交互/仿真就可以解决这个问题。

# interface - 来自接口的实体框架外键

> ID：14466971
> 
> 赞同：1
> 
> 时间：2013-01-22T19:58:56.767
> 
> 标签：interface, foreign-keys, entity-framework-5

我对使用 Entity Framework 5 有点困惑。我为我的实体创建了两个接口：

![界面](../Images/ce5d27746567fcd0a5b562ffb7cf0f44.png)

然后我创建了如下类：

**单词：**

```
public class Word : IWord
{
  [Key]
  [Required]
  public int WordId { get; set; }

  [Required]
  public string Tag { get; set; }

  [Required]
  public string Translation { get; set; }

  [Required]
  public char Language { get; set; }

  public string Abbreviation { get; set; }

  //Foreign Key
  public int VocabularyId { get; set; }

  //Navigation
  public virtual IVocabulary Vocabulary { get; set; }
} 
```

**词汇：**

```
public class Vocabulary : IVocabulary
{
  [Key]
  [Required]
  public int VocabularyId { get; set; }

  [Required]
  public string Name { get; set; }

  public virtual List<IWord> Words { get; set; }
} 
```

最后，我在`DataContext`我的文章中写道：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  modelBuilder.Entity<Word>()
    .HasRequired(w => w.Vocabulary)
    .WithMany(v => v.Words)
    .HasForeignKey(w => w.VocabularyId)
    .WillCascadeOnDelete(false);

  base.OnModelCreating(modelBuilder);
} 
```

我收到了这个错误：

> *无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.ICollection”。存在显式转换（您是否缺少演员表？）*

我试图删除接口，一切都很好..

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:06:56.357

实体框架无法处理导航属性中的接口。它不知道如何实现它们。因此，您可以将接口保留在类型（`class Word : IWord`等）上，但`Vocabulary.Words`应该是`ICollection<Word>`.

# sql - 有没有办法使用基于另一个表中的行的列名来创建和填充 Sybase 表列？

> ID：14466975
> 
> 赞同：1
> 
> 时间：2013-01-22T19:59:03.473
> 
> 标签：sql, tsql, stored-procedures, sap-ase

有没有办法将 Sybase Attribute-Value 表转换为 Attribute-per-column 结果集。这可以做到吗？

**源表：**

```
| attribute | value |
~~~~~~~~~~~~~~~~~~~~~
| a1        | A1    |
| b2        | BB2   |
| random    | X     | 
```

为简单起见，假设`varchar(255)`在`attribute`和`value`列上，唯一索引在`attribute`; 并且属性名称 100%*保证*是有效的 Sybase 列名称的字符串。

**期望的选择结果：**

```
| a1   | b2   | random |
~~~~~~~~~~~~~~~~~~~~~~~~
| A1   | BB2  | X      | 
```

**这可以通过 Sybase ASE 中的 SQL 来实现吗？（12 或 15）？**

笔记：

*   需要明确的是：*我们事先并不知道属性集是什么！！！*

*   无需将结果集保留在#temp 磅表之外。

*   限制是没有启用 Java。

* * *

[在我看来这是不可能的，因为 Sybase 15 ASE 文档指出列名`ALTER TABLE`不能包含动态数据：]

> [**computed_column_expression**
> 是任何有效的 T-SQL 表达式，**它不**包含**来自其他表、局部变量、聚合函数或子查询的列**。它可以是由一个或多个运算符连接的列名、常量、函数、全局变量或 case 表达式之一或组合。您不能在计算列之间进行交叉引用，除非虚拟计算列引用具体化计算列。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-29T19:16:43.500

是的。我已经使用`EXEC`

```
 SELECT @my_stmt = "ALTER TABLE #result ADD " + @param + " varchar(255) NULL" 
 EXEC(@my_stmt) 
```

# c - Float/Double 小数部分的位数

> ID：14466978
> 
> 赞同：2
> 
> 时间：2013-01-22T19:59:12.843
> 
> 标签：c, floating-point, floating-accuracy, ieee-754

我正在尝试实施[http://www.exploringbinary.com/correct-decimal-to-floating-point-using-big-integers/](http://www.exploringbinary.com/correct-decimal-to-floating-point-using-big-integers/)

我已经通读了好几遍，感觉很舒服。第一步是假设值是字符串格式。我的实现是假设该值是双格式的。

是否可以获得构成浮点数/双精度数的小数部分的位数？

例如值 3.24325（我希望不能用二进制精确表示，因为我只是随机选择的）。我想知道小数部分的长度为 5 位，以便我可以继续使用上面链接中的算法。

使用类似的`modf`结果乍一看似乎是正确的小数值，但实际上是四舍五入的（假设小数部分不能以二进制精确表示）。从原始值中减去原始值的类型转换 int 会导致相同的四舍五入的小数。用 sprintf 将值记录在字符串中会导致类似的问题（我相信），但我没有足够的时间来确认 - 我刚刚开始使用它。

上面链接中算法的第1步有什么解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:52:17.133

以下是解决问题的幼稚方法。在大多数情况下，这可行，但浮点整数表示可能会导致错误。

```
#include <stdio.h>
#include <math.h>
    #define eps 0.000001
    int main(){

        double inp=3.12456789;

        int fdigits=0;
        while(fabs(round(inp)-inp)>eps){
            printf("dif %f\n",fabs(round(inp)-inp));
            inp=inp*10;
            fdigits++;

        }
        printf("%d",fdigits);
    return 0;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:19:07.263

一种选择是使用`sprintf`with `strchr`。下面是一个例子：

```
int main() {
    double d = 3.24325;
    char str[20];
    sprintf(str, "%.10f", d); 
    puts(str); 
    int digits = strchr(str, '0') - strchr(str, '.') - 1;
    printf("%d", digits);
} 
```

输出

> 3.2432500000
> 5

在上面的代码中，`strchr`搜索`.`and (first trailing)的位置，`0`并根据它计算位数。为简单起见，我`0`在`%.10f`. `0`您可以通过比较`strchr`返回指针是否指向字符串末尾来调整没有尾随的情况的计算。

# r - R caret / rfe 内训练的交叉验证如何工作

> ID：14466979
> 
> 赞同：9
> 
> 时间：2013-01-22T19:59:11.727
> 
> 标签：r, cross-validation, r-caret, rfe

我对图书馆的`rfe`功能有疑问。`caret`在插入符号主页[链接](http://caret.r-forge.r-project.org/featureselection.html)上，他们给出了以下 RFE 算法： [算法](http://caret.r-forge.r-project.org/Algo2.png)

在这个例子中，我使用了`rfe`带有 3 折交叉验证的函数和带有线性支持向量机和 5 折交叉验证的*train函数。*

```
library(kernlab)
library(caret)
data(iris)

# parameters for the tune function, used for fitting the svm
trControl <- trainControl(method = "cv", number = 5)

# parameters for the RFE function
rfeControl <- rfeControl(functions = caretFuncs, method = "cv",
                     number= 4, verbose = FALSE )

rf1 <- rfe(as.matrix(iris[,1:4]), as.factor(iris[,5]) ,sizes = c( 2,3) ,  
           rfeControl = rfeControl, trControl = trControl, method = "svmLinear") 
```

*   从上面的算法中，我假设该算法可以使用 2 个嵌套的交叉验证：
    1.  `rfe`将数据（150 个样本）分成 3 折
    2.  该`train`函数将在具有 5 倍交叉验证的训练集（100 个样本）上运行以调整模型参数 - 以及随后的 RFE。

让我困惑的是，当我查看`rfe`函数的结果时：

```
> lapply(rf1$control$index, length)
$Fold1
[1] 100
$Fold2
[1] 101
$Fold3
[1] 99

> lapply(rf1$fit$control$index, length)
$Fold1
[1] 120
$Fold2
[1] 120
$Fold3
[1] 120
$Fold4
[1] 120
$Fold5
[1] 120 
```

由此看来，来自 5 倍 cv 的训练集的大小是 120 个样本，而我预计的大小是 80。

*因此，如果有人能阐明rfe*和*train*如何协同工作，那就太好了。

干杯

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: i386-apple-darwin9.8.0/i386 (32-bit)

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] pROC_1.5.4      e1071_1.6-1     class_7.3-5     caret_5.15-048 
 [5] foreach_1.4.0   cluster_1.14.3  plyr_1.7.1      reshape2_1.2.1 
 [9] lattice_0.20-10 kernlab_0.9-15 

loaded via a namespace (and not attached):
 [1] codetools_0.2-8 compiler_2.15.1 grid_2.15.1     iterators_1.0.6
 [5] stringr_0.6.1   tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-20T13:10:20.383

这里的问题是它`lapply(rf1$fit$control$index, length)`不存储我们认为它所做的事情。

为了让我明白，有必要查看代码。发生的情况如下：

当你调用时`rfe`，整个数据被传递给`nominalRfeWorkflow`.

在`nominalRfeWorkflow`中，根据`rfeControl`（在我们的示例中，根据 3-folded CV 规则 3 次）拆分的训练和测试数据被传递给`rfeIter`。我们可以在下面的结果中找到这些拆分`rf1$control$index`。

在`rfeIter`大约 100 个训练样本（我们的示例）中，用于查找最终变量（即该函数的输出）。据我了解，大约 50 个测试样本（我们的示例）用于计算不同变量集的性能，但它们仅存储为外部性能，而不用于选择最终变量。为了选择这些，使用了 5 折交叉验证的性能估计。但是我们在 . 返回的最终结果中找不到这些索引`rfe`。如果我们真的需要它们，我们需要从`fitObject$control$index`in中获取它们`rfeIter`，将它们返回到`nominalRfeWorkflow`，然后`rfe`在返回的结果`rfe`-Class 对象中往返`rfe`。

那么存储在什么中`lapply(rf1$fit$control$index, length)`呢？- 当`rfe`找到最佳变量时，使用最佳变量和完整参考数据 (150) 创建最终模型拟合。`rf1$fit`创建`rfe`如下：

`fit <- rfeControl$functions$fit(x[, bestVar, drop = FALSE], y, first = FALSE, last = TRUE, ...)`

该函数再次运行该`train`函数，并使用完整的参考数据、最终特征集和`trControl`通过省略号 ( `...`) 给出的最终交叉验证。由于我们`trControl`应该做 5 倍的 CV，因此`lapply(rf1$fit$control$index, length)`返回 120 是正确的，因为我们必须计算 150/5*4=120。

# struts2-jquery - Struts2 jquery Grid ajax数据在表单提交时重新加载

> ID：14466984
> 
> 赞同：0
> 
> 时间：2013-01-22T19:59:20.600
> 
> 标签：struts2-jquery, struts2-json-plugin, struts2-jquery-grid

我有一个相当简单的用例，

我有一个搜索表单和一个网格

网格应该在 loadSearch.action 上显示一些默认结果。

当用户在搜索表单中输入几个条件并点击提交按钮时，必须在下面的网格中重新加载 ajax 结果。

我通过发布响应获得结果，但无法在网格内显示它们。

这是我的代码

```
 <%@ taglib prefix="s" uri="/struts-tags"%><%@ taglib prefix="sx" uri="/struts-dojo-tags" %>

    <%@ taglib prefix="sj" uri="/struts-jquery-tags"%>

    <%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags"%>

    <html>

    <head>

    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

    <title>Search Patient</title>

    <sj:head jqueryui="true"/> 

    </head>

    <body>

    <s:form id="form" action="search"  theme="simple" namespace="/patient/register" cssClass="yform">

    <div>

    <table>

    <tr>

    <td>

    <s:text name="global.fname"></s:text>

    </td>

    <td>

    <sj:textfield name="firstName"></sj:textfield>

    </td>

    </tr>

    <tr>

    <td>

    <s:text name="global.lname"></s:text>

    </td>

    <td>

    <sj:textfield name="lastName"></sj:textfield>
        </td>

    </tr>

    </table>

    <div>

    <sj:a onSuccessTopics="reloadGrid" button="true">Search</sj:a>

    </div>

    </div>

    </s:form>

    <div>

    <div id="searchResults">

    <sjg:grid id="gridtable" caption="Customer Examples"
            pager="true" dataType="json" reloadTopics="reloadGrid" formIds="form"
            gridModel="patients" rowList="10,15,20" rowNum="15" loadonce="true" 
            href="%{search}"
            rownumbers="true">

    <sjg:gridColumn name="userId" index="userID" title="Id"
                sortable="true" />

    <sjg:gridColumn name="firstName" index="firstName" title="Name"
                sortable="true" />

    </sjg:grid>

    </div>

    </div>

    </body>

    </html> 
```

XML 映射

```
 <action name="loadSearch" class="com.cursive.eclinic.action.PatientAction" method="loadSearch">
        <interceptor-ref name="userAgentInterceptor" />
        <result name="success">search.jsp</result>
        <result name="error">/commons/exception.jsp</result>
    </action>

    <action name="search" class="com.cursive.eclinic.action.PatientAction" method="search">
        <interceptor-ref name="exception"></interceptor-ref>
        <interceptor-ref name="prepare"></interceptor-ref>
        <interceptor-ref name="modelDriven"></interceptor-ref>
        <interceptor-ref name="params"></interceptor-ref>
        <interceptor-ref name="userAgentInterceptor" />
        <result name="success" type="json">
            <param name="includeProperties">
                ^patients\[\d+\]\.userId,
                ^patients\[\d+\]\.firstName,
            </param>
        </result>
    </action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T16:45:43.660

1.  为了对 SJQ 网格进行 ajax 调用，请`set datatype ="local"`删除 href。

2.  在您的按钮中，使用必要的数据调用以下函数以重新加载网格：

    ```
    var allParameters = $("#gridId").jqGrid("getGridParam"); 
    allParameters .data = myData;
    $("#gridId").trigger('reloadGrid'); 
    ```

在上述功能中，`gridId`是`gridtable`您的情况。如果要添加一行，可以调用以下函数：

```
 $("#gridId").jqGrid('setGridParam', {
                        data: myData
                    }).trigger("reloadGrid"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:22:57.630

简单地不要使用它们仅在成功的 AJAX 调用后发布的 onSuccessTopics。Shich 未在您的提交按钮中定义。

在这个用例中使用 onClickTopics。

# mysql - 从 SQL 表中删除记录而不进行 PK

> ID：14466987
> 
> 赞同：0
> 
> 时间：2013-01-22T19:59:28.450
> 
> 标签：mysql, sql

我有一个名为 itemorder的表`userID`，在我的. 表的PK是`itemID``date``status``notes``MYSQL DB``userID, itemID`

我需要编写一个 SQL 查询，该查询将删除所有 2 天前且状态 = 2 的行。（此 sql 查询将每天在我的服务器中运行一次）。

我编写了以下 sql 查询：

```
SELECT * 
FROM itemorder 
WHERE
  statusOrder=2
  AND statusDate< (SELECT DATE_ADD(CURDATE(), INTERVAL -2 DAY)) 
```

查询返回与条件匹配的所有行。但是，如果我将其更改`SELECT *`为`DELETE`它不起作用。

这是代码

```
DELETE
FROM itemorder 
WHERE
  statusOrder=2
  AND statusDate<(SELECT DATE_ADD(CURDATE(), INTERVAL -2 DAY)) 
```

它说：`Error Code: 1175\. You are using safe update mode and you tried to update a table without a WHERE that uses a KEY column To disable safe mode, toggle the option in Preferences -> SQL Editor -> Query Editor and reconnect.`

从错误中我了解到我无法删除，因为查询`WHERE`不能通过它的 PK 识别每一行。我能做些什么？我阅读了主题[从没有主键的 SQL 表中删除重复记录，](https://stackoverflow.com/questions/985384/delete-duplicate-records-from-a-sql-table-without-a-primary-key)但仍然不知道如何将我的更改`SELECT`为`DELETE`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:17:54.447

试试这个作为一种解决方法：

```
DELETE
FROM itemorder 
WHERE UserID & '-' & ItemID in (
SELECT UserID & '-' & ItemID FROM itemorder
WHERE statusOrder=2 AND statusDate<(SELECT DATE_ADD(CURDATE(), INTERVAL -2 DAY))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:50:57.467

尝试这个： `DELETE FROM ITEMORDER WHERE status = 2 AND status <= (NOW() - INTERVAL 2 DAY);`

[演示 SQL 小提琴](http://www.sqlfiddle.com/#!2/e09f6/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:02:30.477

尝试这个：

```
SET SQL_SAFE_UPDATES=0;
DELETE FROM itemorder WHERE statusOrder=2 AND datediff(now(), statusDate) > 2 
```

它应该工作

# java - 尝试使用 mockito 和 powermock 模拟私有方法时获取 java.lang.NullPointerException

> ID：14466991
> 
> 赞同：7
> 
> 时间：2013-01-22T19:59:37.827
> 
> 标签：java, unit-testing, testng, mockito, powermock

我正在尝试使用 mockito/powermock 模拟私有方法。我得到 NullpointerException 我想做
的简单例子是：

**实际班级**

```
import com.siriusforce.plugin.common.PluginSystem;
import com.wellsfargo.core.business.service.dp.fulfillment.MockitoBusinessService;

public class MockitoBusinessOperationImpl implements MockitoBusinessOperation{
    private MockitoBusinessService mockitoBusinessService = PluginSystem.INSTANCE.getPluginInjector().getInstance(MockitoBusinessService.class);   
    private Long Id;   

    public String creditAproved( Long Id){
       System.out.println("Came Inside MockitoBusinessOperationImpl");
       this.Id = Id; 
       if (this.Id != null){
           System.out.println("Inside creditaproved If statement");
           String Report =  mockitoBusinessService.creditReport(this.Id);
           System.out.println("Mock Object Injected from test class "+ Report);
           return Report;
       } else
           return "Went to Else Part";
    }

    private String inTestMethod(Long Id){
        return "this is working";
    }
} 
```

**测试类：**

```
import static org.mockito.Mockito.spy;
import static org.mockito.Mockito.when;
import static org.powermock.api.mockito.PowerMockito.doReturn;

import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

import com.siriusforce.plugin.common.PluginSystem;

public class MockitoBusinessServiceTest {

    @Mock
    MockitoBusinessService MockitoBusinessService ;

    @InjectMocks    
    private MockitoBusinessOperation MockitoBusinessOperation = PluginSystem.INSTANCE.getPluginInjector().getInstance(MockitoBusinessOperation.class);

    private Long Id;

    @BeforeMethod
    public void init() {
        MockitoAnnotations.initMocks(this);
        this.Id = 123L;
    }

    @PrepareForTest(MockitoBusinessOperation.class)
    @Test(enabled = true)
    public void testReCalculatePrepaids() throws Exception {
        MockitoBusinessOperation = spy(MockitoBusinessOperation);
        doReturn("this will work hopefully").when(MockitoBusinessOperation, "inTestMethod", this.Id);

        when(MockitoBusinessService.creditReport(this.Id)).thenReturn(new String("Decline by only Me")); 

        String mainReport = MockitoBusinessOperation.creditAproved(this.Id);  
        System.out.println("Indirect Call from actual class MainReport   " + mainReport);

    }
} 
```

当我尝试运行它时，我得到一个`NullPointerException`：任何解决这个问题的建议或任何其他模拟私有方法的方法。我不想使用为保护方法而给出的建议，这意味着更改实际方法。我不希望对实际进行任何更改

```
class method
    <failure type="java.lang.NullPointerException">java.lang.NullPointerException

at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.addAnswersForStubbing(PowerMockitoStubberImpl.java:68)

at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.prepareForStubbing(PowerMockitoStubberImpl.java:123)

at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:91)

at com.wellsfargo.core.business.service.dp.fulfillment.MockitoBusinessServiceTest.testReCalculatePrepaids(MockitoBusinessServiceTest.java:54) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-23T10:00:25.353

您必须使用`PowerMockito.spy()`而不是`Mockito.spy()`！

尝试导入`static org.powermock.api.mockito.PowerMockito.spy;`

# php - php-webdriver：使用 click() 提交表单后等待浏览器响应

> ID：14466993
> 
> 赞同：10
> 
> 时间：2013-01-22T19:59:53.493
> 
> 标签：php, selenium, phpunit, selenium-webdriver

除了`sleep()`在我的测试中使用之外，我想知道是否有人知道在继续我的断言之前明确等待表单提交（POST）完成的更好策略。这是我的测试的一个非常精简的版本，使用来自 Facebook 的 phpunit 和[php-webdriver](https://github.com/facebook/php-webdriver/)）。

```
function test_form_submission()
{   
    // setup
    $web_driver = new WebDriver();
    $session = $web_driver->session();
    $session->open('http://example.com/login');

    // enter data
    $session->element('css selector', 'input[name=email]')->value(array('value' => str_split('test@example.com')));
    $session->element('css selector', 'input[name=password]')->value(array('value' => str_split('testpassword')));

    // click button to submit form
    $session->element('css selector', 'button[name=submit]')->click();

    // How do I wait here until the click() above submits the form
    // so I can check that we correctly arrives at the destination below
    // without resorting to sleep()?

    // Confirm that login was successful because we landed on account page
    $this->assertSame('http://example.com/account', $session->url());

    // teardown
    $session->close();
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-14T23:01:03.570

[Facebook的 php-webdriver](https://github.com/facebook/php-webdriver/)已于 2013 年 6 月重写。您可以像这样轻松地等待 URL。

```
// wait for at most 10 seconds until the URL is 'http://example.com/account'.
// check again 500ms after the previous attempt.
$driver->wait(10, 500)->until(function ($driver) {
  return $driver->getCurrentURL() === 'http://example.com/account';
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T12:27:10.263

好的，所以我知道这是一个非常古老的问题，但是当我通过 Google 偶然发现它时，我希望这对某人仍然有用（甚至可能是 OP？:-)）。

在谷歌代码上搜索和阅读文章和消息后，我发现了一个我认为非常丑陋的解决方案，但实际上并没有一个好的选择。您可以[在此处](https://groups.google.com/forum/#!topic/webdriver/7K2QWGVNCYo)阅读，WebDriver 无法检测到页面何时加载。所以，我们必须回到等待。现在，OP 正在使用 Facebook 的 PHP WebDriver，它不包括等待实用程序 AFAIK，但是当使用[这个维护的克隆](https://github.com/Element-34/php-webdriver)时，你会得到一个 WebDriverWait 的实现。

现在的问题是：我们还在等什么？您可以等待 URL 更改，但这绝不是一种可靠的方法，因为当 URL 已经更改时，页面可能尚未加载。下一个选项：等待您知道要加载的页面上的元素出现。这行得通，但是如果您想要更通用的方法怎么办？幸运的是，我在上面提到[的线程](https://groups.google.com/d/msg/webdriver/7K2QWGVNCYo/XzKlsIhSU0kJ)中读到了一个非常好的主意。您可以等待两个页面上的元素消失并重新出现，例如页脚。

我刚刚实现了这个，它似乎工作。下面的函数可以传递给你`$session`，并且只会在新页面加载时返回（或者至少，页脚再次可用）。

```
public static function waitForNextPage($pWDSession) {
    $aWait = new PHPWebDriver_WebDriverWait($pWDSession);
    // wait for footer to not be available anymore
    $aWait->until(
            function($pWDSession) {
                return (0 === count($pWDSession->elements(PHPWebDriver_WebDriverBy::CSS_SELECTOR, "#footer,#mx-footer")));
            }
        );
    // wait for footer to be available again
    $aWait->until(
            function($pWDSession) {
                return (0 < count($pWDSession->elements(PHPWebDriver_WebDriverBy::CSS_SELECTOR, "#footer,#mx-footer")));
            }
        );
} 
```

您显然可以更改选择器或使用其他元素，想法保持不变。

我希望它有帮助！干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:38:30.323

而不是`click()`应该可以使用`clickAndWait()`, 以便等到下一页已加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:09:53.503

您可以使用`Implicit Wait and Explicit Wait`等待特定的 Web 元素，直到它出现在页面中。您可以定义的等待期取决于应用程序。

**显式等待：**

显式等待是您定义的代码，用于等待特定条件发生，然后再继续执行代码。如果条件达到，它将终止等待并继续执行进一步的步骤。

代码：

```
 WebDriverWait wait = new WebDriverWait(driver,30);
 wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(strEdit))); 
```

或者

```
 WebElement myDynamicElement = (new WebDriverWait(driver, 30))
 .until(new ExpectedCondition<WebElement>(){
@Override
public WebElement apply(WebDriver d) {
    return d.findElement(By.id("myDynamicElement"));
}}); 
```

这会在抛出 TimeoutException 之前等待最多 30 秒，或者如果它发现元素将在 0 - 30 秒内返回它。默认情况下，WebDriverWait 每 500 毫秒调用一次 ExpectedCondition，直到它成功返回。对于 ExpectedCondition 类型的成功返回是 Boolean 返回 true 或所有其他 ExpectedCondition 类型的非空返回值。

您可以根据应用程序的需要使用 ExpectedConditions 类。

**隐式等待：**

隐式等待是告诉 WebDriver 在尝试查找一个或多个元素时轮询 DOM 一段时间（如果它们不是立即可用的）

代码：

```
 driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

要记住的一件事是，一旦设置了隐式等待 - 它将在 WebDriver 对象实例的生命周期内保持不变

有关更多信息，请使用此链接[http://seleniumhq.org/docs/04_webdriver_advanced.jsp](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)

# excel - 在 Excel 中创建具有多列数据的唯一行

> ID：14466994
> 
> 赞同：1
> 
> 时间：2013-01-22T19:59:55.807
> 
> 标签：excel

如果数据有多个列，我需要为每个 LOC1 和 LOC2 创建唯一的行：模型图片：

![](../Images/c344d7d9eb5e96973de5bbdf358a3372.png)

```
LOC 1 LOC 2 FC      AMT Type
CUN   ABQ   LLA0PNR 10  AN1
CUN   AUS   BLA0PNR 15  NR2
CUN   GSP   QLA0PNR 16  AN1
CUN   DAL   HLA0PNR 14  NR2
CUN   HOU   WLA0PNR 13  AN1
CUN   ELP   RLA0PNR 12  AN3
CUN   MDW   OLA0PNR 11  NR4 
```

创造：

```
CUN ABQ LLA0PNR 10  AN1
CUN ABQ BLA0PNR 15  NR2
CUN ABQ QLA0PNR 16  AN1
CUN ABQ HLA0PNR 14  NR2
CUN ABQ WLA0PNR 13  AN1
CUN ABQ RLA0PNR 12  AN3
CUN ABQ OLA0PNR 11  NR4
CUN     AUS     ......  ..      ...
CUN     AUS     ......  ..      ... 
```

将为每个 LOC1 和 LOC2 构建一行，其中 FC、AMT、Type 中的所有值都是恒定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:58:20.570

看起来您想要这两个表的“[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)”。

**Excel 选项**

这是我的示例数据（由于我对数据输入很懒惰而缩短了 :-)

![起始数据](../Images/5fad822108e9a9dacb675bfcbde6d5e9.png)

1.  创建一个“计数器”列，每行递增 1。

2.  使用 excel 公式从 table1 和 table2 中确定要使用的行

3.  使用 excel 函数 'INDEX' 根据 (2) 中找到的行 #s 从每个表中提取内容

![在此处输入图像描述](../Images/d986ef19b7c92ae52bd0f6e39a14a697.png)

如果您想变得更漂亮，可以更改公式以清除所有 21 (21=7*3) 个条目，例如`=IF(Counter>(B14*C14),"",--do stuff--)`.

这是一个[Excel 工作簿示例](https://dl.dropbox.com/u/10791482/Sample_AllCombos.xlsx)，展示了它们是如何组合在一起的。

**SQL 选项**

虽然我知道这是一个 excel 问题，但如果我没有提醒您使用正确的工具来完成这项工作，我将是失职。如果您可以在这些表上运行 SQL，请使用：

```
SELECT t1.*, t2.* FROM table1 t1, table2 t2; 
```

SQL 的默认连接是笛卡尔积，所以一切正常。这将比说服 Excel 这样做更优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T09:16:47.873

很好的解决方案，没有VB脚本，非常感谢

以下是上述示例中使用的公式：

(1) =FLOOR((A17-1)/$C$14,1)+1

(2) =MOD(A17-1,$C$14)+1

(3) =INDEX($A$3:$B$9,$B17,F$14)

(4) =INDEX($A$3:$B$9,$B17,G$14)

(5) =INDEX($D$3:$F$5,$C17,H$14)

(6)=指数($D$3:$F$5,$C17,I$14)

(7)=指数($D$3:$F$5,$C17,J$14)

# ruby-on-rails - 在 FedEx.com 上使用 Nokogiri

> ID：14466995
> 
> 赞同：0
> 
> 时间：2013-01-22T19:59:58.370
> 
> 标签：ruby-on-rails, ruby, html-parsing, nokogiri

我正在尝试创建一个小型 Rails 应用程序，它将解析 FedEx 站点以获取我的跟踪信息。我尝试使用 Nokogiri 解析站点，但似乎站点上的内容是通过 Ajax 加载的，我无法捕获它。

这是我正在测试的代码：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('https://www.fedex.com/fedextrack/?cntry_code=us&tab=1&tracknums=543433298736'))

doc.xpath('//*[(@id = "destinationDateTime")]').each do |status|
  puts status.content
end 
```

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:05:10.583

解析整个页面是不好的形式。使用使用 FedEx API 的运输/跟踪 gem，例如[active_shipping](https://github.com/Shopify/active_shipping)。他们甚至有一个关于[跟踪 FedEx 包裹的部分：](https://github.com/Shopify/active_shipping#track-a-fedex-package)

```
fedex = FedEx.new(:login => '999999999', :password => '7777777')
tracking_info = fedex.find_tracking_info('tracking-number', :carrier_code => 'fedex_ground') # Ground package

tracking_info.shipment_events.each do |event|
  puts "#{event.name} at #{event.location.city}, #{event.location.state} on #{event.time}. #{event.message}"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:38:33.933

```
require 'mechanize'
require 'json'

r = Mechanize.new
r.verify_mode = OpenSSL::SSL::VERIFY_NONE

def fedex(r,tracking_number)

    return r.get("https://www.fedex.com/trackingCal/track?data={%22TrackPackagesRequest%22%3A{%22appType%22%3A%22wtrk%22%2C%22uniqueKey%22%3A%22%22%2C%22processingParameters%22%3A{%22anonymousTransaction%22%3Atrue%2C%22clientId%22%3A%22WTRK%22%2C%22returnDetailedErrors%22%3Atrue%2C%22returnLocalizedDateTime%22%3Afalse}%2C%22trackingInfoList%22%3A[{%22trackNumberInfo%22%3A{%22trackingNumber%22%3A%22#{tracking_number}%22%2C%22trackingQualifier%22%3A%22%22%2C%22trackingCarrier%22%3A%22%22}}]}}&action=trackpackages&locale=en_US&format=json&version=99").body

end

puts "Package number 543433298736 is: " + JSON.parse(fedex(r,"543433298736"))["TrackPackagesResponse"]["packageList"][0]["keyStatus"]
# For the "estimated delivery datetime": ["TrackPackagesResponse"]["packageList"][0]["displayEstDeliveryDateTime"] 
```

这段代码完成了工作:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:04:20.813

我做了类似的东西..我最终通过 poltergeist 使用了 capybara 和 phantomjs ......很好地处理了 javascript ......

这是我的脚本的一部分：

```
# -*- encoding : utf-8 -*-

require 'rubygems'
require 'capybara'
require 'capybara/dsl'
require 'capybara/poltergeist'

class MyTest

    include Capybara::DSL

    Capybara.register_driver :poltergeist do |app|
      Capybara::Poltergeist::Driver.new(app, {debug: false})
    end

    Capybara.run_server = false
    Capybara.current_driver = :poltergeist
    Capybara.app_host = 'http://www.example.com'

    def run
        visit('/home/bezirk?bezirk=1212')
        ...
    end
end
MyTest.new.run 
```

# asp.net - 为什么我的 jquery-ui 模态对话框在打开后立即消失？

> ID：14466999
> 
> 赞同：1
> 
> 时间：2013-01-22T20:00:08.163
> 
> 标签：asp.net, jquery-ui, jquery-ui-dialog

我正在尝试使用简单的 jquery-ui 模式对话框作为 ASP.NET C# 应用程序中的删除确认。我以前做过很多次，但由于某种原因，在这个应用程序中它行为不端。我看到对话框弹出然后它立即消失，然后我可以单击“是”或“否”。这是相关代码（Javascript）：

```
 <script type="text/javascript" src="/resources/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="/resources/jquery-ui-1.9.1.custom.min.js"></script>

    <link rel="stylesheet" type="text/css" href="/resources/ui-lightness/jquery-ui-1.9.1.custom.css" />

    <script type="text/javascript">
        var remConfirmed = false;
        function ConfirmRemoveDialog(obj, title, dialogText) {
            if (!remConfirmed) {
                //add the dialog div to the page
                $('body').append(String.Format("<div id='confirmRemoveDialog' title='{0}'><p>{1}</p></div>", title, dialogText));
                //create the dialog
                $('#confirmRemoveDialog').dialog({
                    modal: true,
                    resizable: false,
                    draggable: false,
                    close: function(event, ui) {
                        $('body').find('#confirmRemoveDialog').remove();
                    },
                    buttons:
                    {
                        'Yes, remove it': function() {
                            $(this).dialog('close');
                            remConfirmed = true;
                            if (obj) obj.click();
                        },
                        'No, keep it': function() {
                            $(this).dialog('close');
                        }
                    }
                });
            }

            return remConfirmed;
        }

        //String.Format function (since Javascript doesn't have one built-in
        String.Format = function() {
            var s = arguments[0];
            for (var i = 0; i < arguments.length - 1; i++) {
                var reg = new RegExp("\\{" + i + "\\}", "gm");
                s = s.replace(reg, arguments[i + 1]);
            }
            return s;
        }
    </script> 
```

这是我使用确认功能的地方（在`<asp:Button>`控件的 OnClientClick 中）：

```
 <asp:Button ID="btnRemoveProgram" runat="server" Text="Remove" CausesValidation="false" OnClientClick="ConfirmRemoveDialog(this, 'Please confirm removal', 'Are you sure you wish to remove the selected Program? This cannot be undone.');" /> 
```

正如我所说，我之前已经多次成功地使用过相同的构造（几乎相同的代码）；我不知道为什么它现在不起作用。任何想法都将不胜感激，我真的很难过这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:08:11.793

`runat="server"`告诉按钮它应该回发以在服务器上执行事件。将`OnClientClick`在客户端之前执行，因此您将看到对话框，然后立即发布页面，导致对话框消失。

问题是您的模态对话框不是传统窗口意义上的模态对话框。javascript继续。最简单的测试是在您返回之前添加一个警报，您会看到它在显示对话框后立即弹出。

要解决此问题，`return false`请始终在 OnContentClick 和 Yes/No 按钮事件处理程序中使用[`__doPostback`javascript 方法](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:11:53.817

您需要`return`remConfirmed 给调用者，这是按钮本身。在您的按钮上，执行以下操作：

```
OnClientClick="return ConfirmRemoveDialog(/* the rest of the code */);" 
```