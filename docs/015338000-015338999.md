# StackOverflow 问答 15338000-15338999

# c# - 如果条件检查 DBNull.Value

> ID：15338002
> 
> 赞同：0
> 
> 时间：2013-03-11T11:57:53.363
> 
> 标签：c#

我正在尝试检查，`DBNull.Value`但在这种情况下`reader["Preferences"]`会在即时窗口中返回 {}（为什么？）

所以当 `(string)reader["Preferences"];`执行我得到一个类型转换错误

```
if (reader["Preferences"] == System.DBNull.Value)
{
     preferences = (string)reader["Preferences"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:59:30.290

您仅在*值为* `DBNull.Value`.

你应该反转你的`if`：

```
if (reader["Preferences"] != System.DBNull.Value)
{
     preferences = (string)reader["Preferences"];
} 
```

# javascript - .change 事件在 Opera 中触发了两次

> ID：15338007
> 
> 赞同：0
> 
> 时间：2013-03-11T11:58:10.430
> 
> 标签：javascript, dom, opera

为什么 .change 事件在歌剧中的输入类型 = 数字字段上触发了两次（我使用版本 12.14 build 1738）？
在所有其他浏览器中都可以正常工作。例如，如果我更改为 type=text，它会按预期工作。[请参阅http://jsfiddle.net/936mn/](http://jsfiddle.net/936mn/)上的示例

```
 $(function(){  
    $('.inter').change(function(){  
    alert("huh");});
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:13:28.957

这在这里工作得很好，但可能是 Opera 中关于它与您正在使用的平台集成的一个错误。

# c++ - 结构的内存分配（低性能）

> ID：15338009
> 
> 赞同：1
> 
> 时间：2013-03-11T11:58:10.760
> 
> 标签：c++, visual-studio-2010, performance, memory-management, numerical-analysis

我确实有一个与为多个结构分配内存的性能缓慢有关的问题。我有一个看起来像这样的结构：见下文

```
typedef struct _node
{
 // Pointer to leaves & neigbours
 struct _node *children[nrChild], *neighb[nrNeigh];
 // Pointer to parent Node
 struct _node *parentNode;  
 struct _edgeCorner *edgePointID[nrOfEdge];

 int    indexID;                // Value
 double f[latDir];              // Lattice Velos
 double rho;                    // Density
 double  Umag;                  // Mag. velocity    
 int    depth;                  // Depth of octree element

} node 
```

在我的代码开始时，我确实必须使用以下方法创建很多（100.000 – 1.000.000）：

```
tree = new node(); 
```

并在它之后启动元素。不幸的是，这**很慢**，因此你们中的任何人都有提高性能的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:10:08.837

首先，您需要修复它，以便它实际上是用 C++ 编写的。

```
struct node
{
    // Pointer to leaves & neigbours
    std::array<std::unique_ptr<node>, nrChild> children;
    std::array<node*, nrNeigh> neighb;
    // Pointer to parent Node
    node* parentNode;  
    std::array<_edgeCorner*, nrOfEdge> edgePointID;

    int    indexID;                // Value
    std::array<double, latDir> f;  // Lattice Velos
    double rho;                    // Density
    double  Umag;                  // Mag. velocity    
    int    depth;                  // Depth of octree element
}; 
```

其次，为了提高性能，您将需要一个自定义分配器。Boost.Pool 将是一个不错的选择——它是一个预先存在的解决方案，专门为相同大小的重复分配而设计，在本例中为 sizeof(node)。根据您的释放需求，还有其他方案（例如 memory arena）可以更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:13:54.780

如果你知道你将拥有多少个节点，你可以一次性分配它们：

```
node* Nodes = new node[1000000]; 
```

之后您将需要设置这些值，就像您一一设置一样。如果这种方式快得多，您可以尝试一种架构，在该架构中您可以在分配节点之前找出您需要多少节点，即使您现在没有这个数字。

# javascript - 将多个值传递给 JS

> ID：15338010
> 
> 赞同：-2
> 
> 时间：2013-03-11T11:58:13.677
> 
> 标签：javascript, asp.net

```
 <input type="checkbox" name="checkBoxes" onclick="Utility('<%# Eval("id") %>');" /> 
```

运行 JS 的 onclick

```
<script type="text/javascript" language="javascript">
             var SelectedUtilityId = -1;
             var UtilityCompanyId = -1;

             function Utility(id) {
                 SelectedUtilityId = id;
                 UtilityCompanyId = UtilityCompanyId;
                 WorkItemMgr.DisplayLabelIfTrue(SelectedUtilityId, UtilityCompanyId);
             } 
```

Eval("id") 绑定到 Id，但我也想绑定到 UtilityCompanyId，因为我也想将该值传递给 JS……这是如何完成的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:00:46.607

只需更改函数和对它的调用即可传递第二个值。例如，

```
<input type="checkbox" name="checkBoxes" onclick="Utility('<%# Eval("id") %>', '<%# someOtherValueHere %>');" /> 
```

和

```
function Utility(id, otherId) {
    SelectedUtilityId = id;
    UtilityCompanyId = otherId;
    WorkItemMgr.DisplayLabelIfTrue(SelectedUtilityId, UtilityCompanyId);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:00:53.110

像这样：

```
 <input type="checkbox" name="checkBoxes" onclick="Utility('<%# Eval("id") %>','<%# Eval("UtilityCompanyId") %>');" /> 
```

一般来说：

```
onclick="Utility('<%# Eval("val1") %>','<%# Eval("val2") %>','<%# Eval("val3") %>');"  etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:00:31.397

试试这个

```
 <input type="checkbox" name="checkBoxes" onclick="Utility('<%# Eval("id") %>',"-1");" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T12:00:57.667

那么只需在函数中添加额外的参数并在 onclick 中传递它们？

```
<input type="checkbox" name="checkBoxes" onclick="Utility(<%# Eval("id") %>,<%# Eval("other_thing") %>);" /> 
```

和

```
function Utility(id, other_thing) {
                 SelectedUtilityId = id;
                 UtilityCompanyId = other_thing;
                 WorkItemMgr.DisplayLabelIfTrue(SelectedUtilityId, UtilityCompanyId);
             } 
```

# c - c字符串指针

> ID：15338011
> 
> 赞同：4
> 
> 时间：2013-03-11T11:58:14.597
> 
> 标签：c, string, pointers

我开始学习 C，我对 c 字符串指针有点困惑。

```
int argc = 0;
const char *str[] = { "hello" , NULL, NULL };
str[argc++] = "nice!";
str[argc++] = "abc";
str[argc++] = "def"
send_args(argc, str); 
//the prototype/header : int send_args(int argc, const char **args); 
```

因为 send_args 函数不会修改传递的 str 的值，这些操作是否有效？因为我不想做类似的事情：

```
int i, argc = 0;
char *str[3];
str[argc++] = strdup("nice!");
str[argc++] = strdup("abc");
str[argc++] = strduo("def)"
send_args(argc, str);
for (i = 0; i< argc; i++)
    if (str[i]) { free(str[i]); str[i]=NULL; } 
```

提前谢谢各位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:02:03.617

我认为第一个示例没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:04:59.283

是的，没关系。字符串文字可能放置在初始化的数据部分（细节由实现定义），并且不需要（事实上，甚至不可能）释放文字。的类型`str`与 所需的类型兼容`send_args`，所以一切都很好。

请注意，正如所写，`str[]`用三个元素初始化，因此不能保存四个或更多指针。你可以通过声明和初始化来达到同样的效果

```
const char *str[3];
str[0] = "nice!";
str[1] = "abc";
str[2] = "def"
send_args(3, str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:41:20.823

是的，它们是完全有效的。不过，您需要担心，`argc`因为您将其增加了一个。只要您正确处理它，它就不会造成任何“不良影响”。[您可以在此处](http://codepad.org/OPp7Lfig)查看您的代码示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:46:00.003

如果您要询问自动存储持续时间，`str`那么在执行到达创建它的块的末尾之前，您的数组不会被销毁。

```
const char **fubar(void)
{
    int argc = 0;
    const char *str[] = { "hello" , NULL, NULL }; /* str is created here */
    str[argc++] = "nice!";
    str[argc++] = "abc";
    str[argc++] = "def"
    send_args(argc, str); /* the lifetime of str is still valid here */
    ~~return str;~~ /* ... but str gets destroyed after this "return" statement */
}

int main(void) {
  ~~const char **fubared = fubar();~~
  /* str has already been destroyed, and fubar's return value has been rendered garbage */
  /* so using fubared would be a bad idea. */
  return 0;
}
```

`return`导致 str 被销毁，因为执行已经超过了在其中创建它的块的末尾，并且返回的指针将指向垃圾。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T12:06:29.100

在这种情况下它们是有效的，因为字符串在编译时是静态存储的，不能被释放。它们的指针地址也不取决于您所在的功能。

但是，如果您将本地字符数组用于`"nice!"`，它将无效，因为 send_args 无法读取其他函数的局部变量。

# android - 验证不从活动中将空值存储在数据库中

> ID：15338012
> 
> 赞同：2
> 
> 时间：2013-03-11T11:58:15.670
> 
> 标签：android

我的活动有 3 个编辑文本和一个按钮。

我**将值存储在数据库中**。当我没有在edittext中插入任何值时，它不应该输入空值，而是应该对此给出一些警告，但在我的程序中它也接受空值。

**如何处理此验证？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:04:15.523

只需检查每个 EditText 中的文本长度。

```
 if(input.getText().toString().trim().length() > 0 ){

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:05:03.853

对于所有编辑文本，类似于下面的内容应该可以工作

```
String validString = editTextField.getText().toString();
if(validString.trim().equals("")){
   //put your alert here
}else{
   //write to DB
} 
```

# android - 自定义字体 TextView 的性能问题

> ID：15338016
> 
> 赞同：23
> 
> 时间：2013-03-11T11:58:30.477
> 
> 标签：android, performance, textview

我有一个自定义的 TextView，具有个性化的字体属性：

```
public class TextViewPlus extends TextView {
    private static final String TAG = "TextViewPlus";
    public TextViewPlus(Context context) {
        super(context);
    }
    public TextViewPlus(Context context, AttributeSet attrs) {
        // This is called all the time I scroll my ListView
        // and it make it very slow. 
        super(context, attrs);
        setCustomFont(context, attrs);
    }
    public TextViewPlus(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setCustomFont(context, attrs);
    }
    private void setCustomFont(Context ctx, AttributeSet attrs) {
        TypedArray a = ctx.obtainStyledAttributes(attrs, R.styleable.TextViewPlus);
        String customFont = a.getString(R.styleable.TextViewPlus_customFont);
        setCustomFont(ctx, customFont);
        a.recycle();
    }
    public boolean setCustomFont(Context ctx, String asset) {
        Typeface tf = null;
        try {
            tf = Typeface.createFromAsset(ctx.getAssets(), asset);  
            setTypeface(tf); 
        } catch (Exception e) {
            Log.e(TAG, "Could not get typeface: "+e.getMessage());
            return false;
        }
        return true;
    }
} 
```

我在具有**customFont="ArialRounded.ttf"**属性的 XML 文件中使用它，它运行良好。

我在 ListView 中使用这个 TextViewPlus，填充了 ArrayAdapter。

```
TextViewPlus dataText = (TextViewPlus) itemView.findViewById(R.id.data_text);
dataText.setText("My data String"); 
```

我的问题是，当我滚动 ListView 时，性能很糟糕！非常缓慢且充满滞后。TextViewPlus 构造函数 n°2 在我滚动列表时一直被调用。

如果我在普通 TextView 中更改 TextViewPlus，并使用**dataText.setTypeface(myFont)**，一切都很好并且运行良好。

如何在没有性能问题的情况下使用 TextViewPlus？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-11T12:05:40.460

为什么不将创建的`typface`对象保存在内存中，这样就不会在每次创建文本视图时创建。

以下是创建和缓存字体对象的示例类：

```
public class TypeFaceProvider {

    public static final String TYPEFACE_FOLDER = "fonts";
    public static final String TYPEFACE_EXTENSION = ".ttf";

    private static Hashtable<String, Typeface> sTypeFaces = new Hashtable<String, Typeface>(
        4);

    public static Typeface getTypeFace(Context context, String fileName) {
    Typeface tempTypeface = sTypeFaces.get(fileName);

    if (tempTypeface == null) {
        String fontPath = new StringBuilder(TYPEFACE_FOLDER).append('/').append(fileName).append(TYPEFACE_EXTENSION).toString();
        tempTypeface = Typeface.createFromAsset(context.getAssets(), fontPath);
        sTypeFaces.put(fileName, tempTypeface);
    }

    return tempTypeface;
    }
} 
```

# javascript - Ajax 将输出显示为参数

> ID：15338021
> 
> 赞同：0
> 
> 时间：2013-03-11T11:58:41.927
> 
> 标签：javascript, ajax

我有三个文本区域，我想使用 Ajax 提醒该文本区域中的文本。

```
function myKeyPress(e, x, y) {
    var AjaxObj = null;
    if (window.XMLHttpRequest) {
        AjaxObj = new XMLHttpRequest;
    } else if (window.ActiveXObject) {
        AjaxObj = new ActiveXObject("Microsoft.XMLHTTP");
    }
    if (AjaxObj != null) {
        var a = document.getElementById("TSI_Query_Box").value;
        var b = document.getElementById("SI_Query_Box").value;
        var c = document.getElementById("Ship_ID").value;
        var params = "TSI_Query_Box=" + a + "&SI_Query_Box=" + b + "&ShipID=" + c;
    } else {
        alert("No Ajax Found. please update your Browser");
    }
    var keynum;
    if (window.event) {
        keynum = e.keyCode;
    } else if (e.which) {
        keynum = e.which;
    }
    if (keynum == 13) {
        alert(params);
    }
} 
```

这里的问题是当我接受时`document.getElementById(//textareaID).value;`，没有任何事情发生，当我接受它时`document.getElementById(//textareaID);`，它给出的输出为`[Object]`，请让我知道如何获取警报消息中的文本框值。

# python - 为什么 admin.py 从未加载？

> ID：15338025
> 
> 赞同：3
> 
> 时间：2013-03-11T11:58:54.643
> 
> 标签：python, django, django-admin

我正在一个项目上设置 django 管理员。

我已经在`admin.py`我的每个应用程序中创建了文件（就像我在以前的项目中一样）。但是`admin.py`模块没有被加载。我的模型没有注册，我不能用`pydevd.settrace()`.

如果我将我的管理代码移到`models.py`一切按预期工作的末尾，则模型将在 admin 中注册，并且代码运行（我可以使用 单步执行`pydevd.settrace()`）。

所以这失败了 -

```
my_project_app
    __init__.py
    cart
        __init__.py
        models.py
        admin.py 
```

但是当我将我的代码添加到 models.py 文件的末尾时，一切都运行良好 -

```
from django.contrib import admin

class CartAdmin(admin.ModelAdmin):
    pass

admin.site.register(Cart, CartAdmin) 
```

显然，我将要配置管理员，所以我不希望所有内容都集中在一个模块中。如何让我的`admin.py`文件正常工作？为什么他们停止工作（这是我第一次使用 django 1.5 - 不确定这是否相关）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:03:43.357

通常你调用`admin.autodiscover()`你的`urls.py`，它会加载所有内容：

```
# urls.py
from django.conf.urls import patterns, include
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
) 
```

由于您必须在尝试使用之前执行此操作`admin.site.urls`，因此这是调用它的最佳位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:34:29.347

在您的 admin.py 文件中，您必须导入您的模型

```
from cart.models import Cart 
```

如果仍然无法正常工作，请检查您是否已包含

```
'django.contrib.admin', 
```

在您的 installed_apps 设置文件列表中，然后在 urls 文件中包含

```
admin.autodiscover()

urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
) 
```

运行 manange.py 同步数据库

运行 manage.py 运行服务器

检查 127.0.0.1:8000/admin

它应该工作

# javascript - 让这个逆向计算的扫描线摇滚。在 div 中扫描多行很难

> ID：15338026
> 
> 赞同：4
> 
> 时间：2013-03-11T11:59:01.473
> 
> 标签：javascript, jquery, css, scanline, retro-computing

工作小提琴在这里：http: [//jsfiddle.net/WyXLB/1/](http://jsfiddle.net/WyXLB/1/)

当一个 HTML 元素包含多行文本时，我想扫描每一行。目前，我只是扫描整个元素的边界矩形。

一些代码是：

```
function run_scan(el,mask,callback) {
    // we need to go over each line of text in here
    // or somewhere
    var el_font_size = $(el).css('font');
    $('body').append(sizer);
    sizer.css({
        'position': 'absolute',
        'font' : el_font_size,
        'white-space' : 'pre' } );
    var real_box = window.getComputedStyle(sizer[0]);
    var real_width = parseFloat(real_box.width);
    var real_height = parseFloat(real_box.height);
    var lines = Math.round($(el).height()/real_height);
    var mask_offset = $(mask).offset();
    var origin_left = mask_offset.left;
    var duration = parseFloat($(mask).width())/2.0;
    $(mask).animate( {
        'left':origin_left+$(mask).width()
        },
        {
            duration:duration,
            complete:callback
        } );
} 
```

我怎样才能打破整个边界矩形的动画，扫描每一行。我尝试在上述函数中放置一个动画->回调递归，每次调用将掩码降低一个 real_height，但出现不可预测/混乱的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:50:03.190

如果您只需要循环，那么它应该看起来像这样（内部`run_scan`）

```
 var i = 0;
    function loop() {
        if (++i < lines) {
            $(mask).animate({
                'left':origin_left+$(mask).width()
            },{
                duration:duration,
                complete:loop
            });
        } else {
            // last line
            callback();
        }
    } 
```

# scala - 在 Scala 中链接数据转换的优雅方式？

> ID：15338029
> 
> 赞同：1
> 
> 时间：2013-03-11T11:59:07.280
> 
> 标签：scala, design-patterns, coding-style

假设我有一个函数列表，每个函数都期望某种类型的输入，并返回相同类型的值。例如一个`String`.

这些函数的使用方式是链式的：一个的输出是下一个的输入。

```
def oneTransform(input: String): String = { ... }
def anotherTransform(input: String): String = { ... } 
def yetAnotherTransform(input: String): String = { ... } 
```

它可以用在这样的代码中：

```
val input = "my-initial-input"
val input2 = oneTransform(input)
val input3 = anotherTransform(input2)
val output = yetAnotherTransform(input3) 
```

Scala 有没有更优雅的表达方式？

这是非常不优雅且容易出错的，我认为也许 Scala（或 Scala 库）提供了一种更好的方式来编写它。

单子？向左折叠？

# c# - DB查询到foreach循环c#

> ID：15338031
> 
> 赞同：0
> 
> 时间：2013-03-11T11:59:09.320
> 
> 标签：c#, database, linq, class, loops

我正在为客户开发一些工具，他们不想使用 LINQ to SQL，他们也不想使用 WPF 但我正在使用它，他们害怕新的编码或其他东西......但是我不能使用数据库，因为他们对 LINQ 一无所知......所以他们给了我这个烦人的课程（[http://pastebin.com/VUzvN44i](http://pastebin.com/VUzvN44i)太长，无法粘贴在这里，抱歉）这是“好的”当逐行检索...

但是我有以下功能，它与 linq to sql 完全兼容，但是我迷失了他们给我的这个类......所以如果有人可以给我一些关于如何在不修改类的情况下做到这一点的建议，它将是很有帮助。谢谢。

```
private void GenerarFichero_Click(object sender, RoutedEventArgs e)
{
    string valEmisora = "02827003";
    string codigoCabecera;
    if (DateTime.Today.Day > 7)
        codigoCabecera = "AE570200";
    else
        codigoCabecera = "AE570100";
    DataBaseDataContext dc = new DataBaseDataContext();
    using (StreamWriter sw = new StreamWriter(codigoCabecera.Remove(6, 2)))
    {
        sw.WriteLine("775701    " + DateTime.Now.ToString("yy") + DateTime.Now.Month.ToString("d2") + DateTime.Now.AddDays(1).Day.ToString("d2") + DateTime.Now.Hour.ToString("d2") + DateTime.Now.Minute.ToString("d2") + "008910                    00" + txtBanco.Text + codigoCabecera + txtBanco.Text + "");
        sw.WriteLine("0170      " + valEmisora + "    " + this.txtBanco.Text + "          10" + DateTime.Now.ToString("MM") + DateTime.Now.ToString("yy"));

        var OutputQuery =
            from o in dc.Seguros
            group o by o.emisora;
        List<int> TotalRegistros = new List<int>();
        List<int> TotalSumas = new List<int>();
        foreach (var grupo in OutputQuery)
        {
            sw.WriteLine("0270      " + valEmisora + grupo.Key + " " + this.txtBanco.Text + "          10" + DateTime.Now.ToString("MM") + DateTime.Now.ToString("yy"));
            List<int> Suma = new List<int>();
            foreach (var data in grupo)
            {
                Suma.Add(Convert.ToInt32(data.importe + data.importe_dec));
                sw.WriteLine("6070      " + valEmisora + data.emisora + "1" + data.banco + data.sucursal + data.fecha + data.importe + data.importe_dec + data.identificacion + "                      " + data.referencia);
            }
            TotalRegistros.Add((grupo.Count() + 2));
            TotalSumas.Add(Suma.Sum());
            sw.WriteLine("8070      " + valEmisora + grupo.Key + " " + (grupo.Count() + 2).ToString().PadLeft(6, '0') + "        " + Suma.Sum().ToString().PadLeft(12, '0'));
        }
        sw.WriteLine("9070      " + valEmisora + "    " + (TotalRegistros.Sum() + 2).ToString().PadLeft(6, '0') + "        " + TotalSumas.Sum().ToString().PadLeft(12, '0'));
        this.txtTotal.Text = TotalSumas.Sum().ToString();
    }
    MessageBox.Show("El fichero ha sido guardado, ya no se puede editar");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:36:31.400

我对我要说的内容并不感到自豪，但既然你迫切需要一个解决方案，那就去吧......解决这个问题的**快速而肮脏**的方法是：

```
var connection = InitalizeConnectionToDb();
var select = new SelectBD();
// Get the data from database
select.Open(connection, @"select * from Seguros");
// Simulate the grouping
var dictionary = new Dictionary<string, List<DataRow>>();
foreach(var row in select.DataTable)
{
    var key = Convert.ToString(row["emisora"]);
    if(!dictionary.ContainsKey(key))
    {
        dictionary[key] = new List<DataRow>();
    }
    dictionary[key].Add(row);
} 
```

现在您可以使用上面的字典来执行您的计算，因为数据是按`emisora`字段分组的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:36:11.443

好吧，我有最终的代码工作，我已经替换`OutputQuery`，`DataTable.AsEnumerable`实际上它正在工作......这就是代码现在的样子

```
private void GenerarFichero_Click(object sender, RoutedEventArgs e)
{
    string valEmisora = "02827003";
    string codigoCabecera;
    if (DateTime.Today.Day > 7)
        codigoCabecera = "AE570200";
    else
        codigoCabecera = "AE570100";
    using (StreamWriter sw = new StreamWriter(codigoCabecera.Remove(6, 2)))
    {
        sw.WriteLine("775701    " + DateTime.Now.ToString("yy") + DateTime.Now.Month.ToString("d2") + DateTime.Now.AddDays(1).Day.ToString("d2") + DateTime.Now.Hour.ToString("d2") + DateTime.Now.Minute.ToString("d2") + "008910                    00" + txtBanco.Text + codigoCabecera + txtBanco.Text + "");
        sw.WriteLine("0170      " + valEmisora + "    " + this.txtBanco.Text + "          10" + DateTime.Now.ToString("MM") + DateTime.Now.ToString("yy"));

        SelectBD sel = new SelectBD(App.ConexBD, "SELECT * FROM Seguros");
        var Query = sel.DataTable.AsEnumerable().Select(row =>
                {
                    return new      
                    {      
                        banco = row["banco"].ToString(),
                        emisora = row["emisora"].ToString(),
                        sucursal = row["sucursal"].ToString(),
                        fecha = row["fecha"].ToString(),
                        identificacion = row["identificacion"].ToString(),
                        importe = row["importe"].ToString(),
                        importe_dec = row["importe_dec"].ToString(),
                        provincia = row["provincia"].ToString(),
                        referencia = row["referencia"].ToString(),
                    };
                });
        var OutputQuery = Query.GroupBy(l => l.emisora);
        List<int> TotalRegistros = new List<int>();
        List<int> TotalSumas = new List<int>();
        foreach (var grupo in OutputQuery)
        {
            sw.WriteLine("0270      " + valEmisora + grupo.Key + " " + this.txtBanco.Text + "          10" + DateTime.Now.ToString("MM") + DateTime.Now.ToString("yy"));
            List<int> Suma = new List<int>();
            foreach (var data in grupo)
            {
                Suma.Add(Convert.ToInt32(data.importe + data.importe_dec));
                sw.WriteLine("6070      " + valEmisora + data.emisora + "1" + data.banco + data.sucursal + data.fecha + data.importe + data.importe_dec + data.identificacion + "                      " + data.referencia);
            }
            TotalRegistros.Add((grupo.Count() + 2));
            TotalSumas.Add(Suma.Sum());
            sw.WriteLine("8070      " + valEmisora + grupo.Key + " " + (grupo.Count() + 2).ToString().PadLeft(6, '0') + "        " + Suma.Sum().ToString().PadLeft(12, '0'));
        }
        sw.WriteLine("9070      " + valEmisora + "    " + (TotalRegistros.Sum() + 2).ToString().PadLeft(6, '0') + "        " + TotalSumas.Sum().ToString().PadLeft(12, '0'));
        this.txtTotal.Text = TotalSumas.Sum().ToString();
    }
    MessageBox.Show("El fichero ha sido guardado, ya no se puede editar");
} 
```

# android - 对溢出菜单项使用自定义视图

> ID：15338033
> 
> 赞同：4
> 
> 时间：2013-03-11T11:59:17.683
> 
> 标签：android, actionbarsherlock

我真的很难对动作栏夏洛克中的溢出菜单做任何事情。

![截屏](../Images/7f99ca0f2b045b1688bf8696e26a17a4.png)

理想情况下，我想`TextView`为每个项目使用自定义，以便在其上设置不同的字体并更改`pressed`状态的颜色。

我试过（都没有成功）：

[更改动作栏溢出的样式动作](https://stackoverflow.com/questions/14193071/changing-the-style-of-actionbar-overflow)
[栏样式的溢出菜单项](https://stackoverflow.com/questions/14859794/actionbar-styled-overflow-menu-items)
[列表视图作为夏洛克动作栏中的动作溢出](https://stackoverflow.com/questions/14119237/listview-as-action-overflow-in-sherlock-actionbar)
[https://groups.google.com/forum/#!msg/actionbarsherlock/5lHOKNlXn_4/f9XicMXbFFAJ](https://groups.google.com/forum/#!msg/actionbarsherlock/5lHOKNlXn_4/f9XicMXbFFAJ)

我的应用程序将有不同的片段，所有片段都`BaseFragment`在溢出菜单中扩展为不同的项目。我也在使用 v4 支持包。我正在创建这样的菜单：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.activity_borrow, menu);
} 
```

activity_borrow.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_filter"
        android:title="test"
        android:orderInCategory="100"
        android:showAsAction="never"
/>
</menu> 
```

我的应用程序使用继承自`Theme.Sherlock`.

如何在该菜单中使用自定义视图？或者至少，我怎样才能改变默认的蓝色`pressed`状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T19:42:35.323

要更改溢出列表项的颜色，请将两项添加到您的应用程序主题中，该主题通常定义在`res/values/styles.xml`：

```
<item name="android:dropDownListViewStyle">@style/DropDownListView</item>
<item name="dropDownListViewStyle">@style/DropDownListView</item> 
```

在同一个文件中，添加您刚刚分配的样式：

```
<style name="DropDownListView" parent="@style/Widget.Sherlock.ListView.DropDown">
  <item name="android:listSelector">@drawable/selectable_background</item>
</style> 
```

最后`selectable_background.xml`在 drawable 文件夹中创建一个可绘制的选择器，其中包含：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
        android:exitFadeDuration="@android:integer/config_mediumAnimTime" >
    <item android:state_pressed="false" android:state_focused="true" android:drawable="@color/focussed_color" />
    <item android:state_pressed="true" android:drawable="@color/pressed_color" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

最后，定义通常放置在的颜色`colors.xml`：

```
<resources>
    <color name="pressed_color">#FF8E4067</color> <!-- your purple tone already ;) -->
    <color name="focussed_color">#DD8E4067</color>
</resources> 
```

在我的应用程序中，我按照 baboo 的建议使用了“ActionBar Style Generator”，它可以方便地为您处理一切。对于这个答案，我只是提取并简化了我认为构成溢出菜单样式的部分。

我认为样式化三个不同项目的效果有些神秘：

*   据我了解，`android:dropDownListViewStyle`包括隐藏在 ActionBar 中“三个点”后面的溢出菜单。
*   ***不要与 混淆*** `android:actionDropDownStyle`，它用于应用导航下拉菜单的样式，以防您使用`actionBar.setNavigationMode(NAVIGATION_MODE_LIST)`
*   但是，某些带有硬件菜单按钮的 Android 设备（例如 Nexus S 或 Galaxy S3 Mini）不显示“三个点”，而是在单击硬件菜单按钮时从屏幕底部滑入的叠加菜单。`android:popupMenuStyle`是设置此样式的正确属性。

同样，这只是我从自己的应用程序开发中所记得的。

此外，请确保检查没有其他样式文件（例如具有[配置限定符](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)的文件夹）覆盖您刚刚定义的样式。

总而言之，我知道这只会改变列表项的背景颜色。要在其中使用完全自定义的视图，您可以创建[自定义微调器视图](https://stackoverflow.com/a/14123377/1140682)，将带有“三个点”图标的虚拟按钮添加到 ActionBar 并在单击时打开微调器。

# paypal - PayPal沙盒账户新设计，无法登录

> ID：15338035
> 
> 赞同：0
> 
> 时间：2013-03-11T11:59:20.570
> 
> 标签：paypal, paypal-sandbox

由于 PayPal 为开发人员更改了他们的网站，我不能再使用它了。在我设置了一些测试帐户并且能够进入之前，创建按钮等等。现在我已经导入了我以前的帐户，但我无法登录它们，只是得到请求的资源（）不可用。404\. 如果我清除浏览器缓存和 cookie，它只会告诉我登录（使用我的开发人员登录详细信息，而不是测试详细信息）并且我无法进入。他们的支持说清除缓存并且它可以工作......愚蠢的 PayPal .

有谁知道该怎么做？

我尝试将 Chrome 和 Firefox 更新到最新版本，然后清除所有 cookie/缓存，然后登录开发人员帐户，然后尝试登录测试帐户。

我总是收到这个 404 消息：[http ://snag.gy/rL5t2.jpg](http://snag.gy/rL5t2.jpg)

> HTTP 状态 404
> **类型**状态报告
> **消息**
> **描述**请求的资源 () 不可用。
> Apache Tomcat/5.5.15-150

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:55:47.110

我们已经知道这个问题，并正在努力尽快解决它。在此期间，您可以手动从屏幕截图中包含的 URL 中删除“/se/”，这会将您带到正确的页面 ( [https://www.sandbox.paypal.com/webapps/mpp/home](https://www.sandbox.paypal.com/webapps/mpp/home) )。
带来不便敬请谅解。我们会尽快解决这个问题！

# java - 在 JBoss 5 应用服务器上启用连接检查器和语句跟踪器

> ID：15338041
> 
> 赞同：1
> 
> 时间：2013-03-11T11:59:33.190
> 
> 标签：java, jboss, datasource

我`<local-tx-datasource>`在 IBM DB2 9.7 数据库上使用 JBoss 数据源 ()。连接工作正常。

但是，我尝试启用`<track-statements>`、`<valid-connection-checker>`和`<check-valid-connection-sql>`属性，但我怎么知道它们正在工作？使用数据源时，我在服务器控制台上没有收到任何错误或警告，但我也没有得到任何增强的日志记录。

下面是我正在使用的稍微修改过的版本。我尝试了各种属性组合。下面我注释掉了 check-valid-connection-sql 属性，但启用了有效、陈旧和异常排序器属性。我正在使用 JBoss5，我想知道它是否有影响。

例如，我尝试在 finally 子句中删除休眠会话关闭语句，但没有记录任何内容。似乎下面的附加属性由于某种原因没有启用，或者至少它们没有记录在 JBoss server.log 日志文件中。

```
<datasources>
<local-tx-datasource>
<jndi-name>[jndiname]</jndi-name>
<connection-url>jdbc:db2://[ip]:[port]/[dbname]</connection-url>
<driver-class>com.ibm.db2.jcc.DB2Driver</driver-class>
<user-name>[user]</user-name>
<password>[password]</password>
<min-pool-size>10</min-pool-size>
<valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ValidConnectionChecker"></valid-connection-checker>
<stale-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2StaleConnectionChecker"></stale-connection-checker>
<exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.db2.DB2ExceptionSorter"/>
<track-statements>true</track-statements>
  <metadata>
     <type-mapping>DB2</type-mapping>
  </metadata> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:55:45.583

如果您正确配置了`valid-connection-checker-class-name`、`check-valid-connection-sql`和`validate-on-match`（默认设置为 true），那么您可以通过在数据库服务器上手动执行中断来测试它是否正常工作，并查看 JBoss 是否重新连接并使用有效连接刷新数据源池。

我不建议`track-statements`在生产中保持启用状态。它主要是一个调试功能，用于跟踪您是否没有在代码中正确关闭语句和结果集。在开发或测试服务器中打开它以验证您是否正确关闭它们（例如在 finally 块中关闭它们）。您可以通过验证诸如“关闭您打开的结果集！请自行关闭”之类的消息来测试它。在服务器日志中。

# c# - 处理 PageIndexChanging 事件

> ID：15338045
> 
> 赞同：0
> 
> 时间：2013-03-11T11:59:40.080
> 
> 标签：c#, asp.net, linq, page-index-changed

我有一个查询，当用户提交搜索并`gridview`加载时运行。

我想分页，`gridview`并且通常会将我的网格放在`LoadGrid()`. 我的分页工作正常，一切都很好，直到我想查看`GridView`.

```
protected void btn_Search_Click(object sender, EventArgs e)
{
// Init()
// -----
pnl_Message.Visible = false;
lbl_message.Text = String.Empty;

// Clear grid of previous results
// ==============================
ResultsGridView.DataSource = null;
ResultsGridView.DataBind();

try
{
    using (var db = new dbDataContext())
    {
        // Check Fields
        // ------------
        if (txt_CustomerName.Text == string.Empty && txt_CCNo.Text == string.Empty &&
            txt_SwiftNo.Text == string.Empty && drp_Provider.SelectedValue == string.Empty)
        {
            lbl_message.Text += "* Please enter a search term";
            pnl_Message.Visible = true;
            pnl_Message.CssClass = "loginError";
            pnl_results.Visible = false;
        }

        // Search Database
        // ---------------
        if (lbl_message.Text == String.Empty)
        {
            var customer = txt_CustomerName.Text.Length > 1 ? txt_CustomerName.Text.Trim() :
            "Xcxcx";
            //var provider = drp_Provider.SelectedItem.Text.Trim();
            var concern = txt_CCNo.Text == "" ? 0 : Convert.ToInt32(txt_CCNo.Text);
            var swiftid = txt_SwiftNo.Text == "" ? 0 : Convert.ToInt32(txt_SwiftNo.Text);

            // Check which fields populated
            // ----------------------------
            var result =
                from c in db.tbl_Concerns
                where (c.ProviderId == Convert.ToInt32(drp_Provider.SelectedValue))
                    || (c.person_Fullname.Contains(customer))
                    || (c.SwiftId == swiftid)
                    || (c.ConcernId == concern)
                select new
                {
                    c.ConcernId,
                    Swift = c.SwiftId,
                    FullName = c.person_Fullname,
                    Provider = c.tbl_Provider.provider_Name,
                    Concern_Detail = c.tbl_RaisedConcern.RaisedConcernText,
                    DateFrom = c.concern_DateFrom,
                    DateTo = c.concern_DateTo
                };
            // If No Results
            // -------------
            if (!result.Any())
            {
                lbl_message.Text += "* No results match your search, please try again.";
                pnl_Message.Visible = true;
                pnl_Message.CssClass = "loginError";
            }
            else
            {
                // Show Table
                // ----------
                pnl_results.Visible = true;
                ResultsGridView.DataSource = result;
                ResultsGridView.DataBind();

                // Table Header Names
                // ------------------
                ResultsGridView.HeaderRow.Cells[0].Text = "Select";
            }
        }
    }
}
catch (SystemException ex)
{
    var exceptionUtility = new genericExceptions();
    exceptionUtility.genericSystemException(
        ex,
        Server.MachineName,
        Page.TemplateSourceDirectory.Remove(0, 1) + Page.AppRelativeVirtualPath.Remove(0, 1),
        ConfigurationManager.AppSettings["emailSupport"],
        ConfigurationManager.AppSettings["emailFrom"],
        string.Empty);
}
} 
```

我的`PageIndexChanging`活动我通常会调用，`loadGrid()`但我没有那种情况。我试过只是添加`ResultsGridView.DataBind()`但得到错误`Sequence contains no elements`。

```
protected void ResultsGridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
  ResultsGridView.PageIndex = e.NewPageIndex;
  ** How Can I bind the Grid**
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:35:34.837

尝试这个..

```
session["somename"]=result;

protected void ResultsGridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
 {
   var somename=session["somename"].Tostring();  
  ResultsGridView.PageIndex = e.NewPageIndex;
  ResultsGridview.Datasource=somename;
  REsultsGridview.Databind();

 } 
```

# sql-server - 使用带触发器的事务

> ID：15338052
> 
> 赞同：0
> 
> 时间：2013-03-11T12:00:22.847
> 
> 标签：sql-server, triggers

我的数据库中有这张表：

预订（人数PK，房间号，预订日期）

我想在预订之前，我们检查房间是否没有使用触发器。

这是我试过的脚本：

```
ALTER TRIGGER Verifier_chambre_prise ON reservation
INSTEAD OF INSERT
AS
    BEGIN

        IF EXISTS ( SELECT * FROM reservation
                    WHERE [room number] = (SELECT [room number] FROM INSERTED)
                    AND [reservation date] = (SELECT [reservation date] FROM INSERTED))
            ROLLBACK TRANSACTION
        ELSE
                        INSERT INTO reservation  SELECT * FROM INSERTED
    END 
```

当我添加一个存在的预订时，它会给我交易已停止操作的错误，但问题是当我尝试添加具有 [预订日期] 和 [房间号] 的行时已经存在于表中，这一行被删除了，我不知道为什么 sql server 删除了这一行。

# c++ - 使用 xsl 包含一个头文件

> ID：15338053
> 
> 赞同：1
> 
> 时间：2013-03-11T12:00:23.590
> 
> 标签：c++

我使用 xsl 创建了一个程序，如下所示：-

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" version="1.0" encoding="UTF-16" indent="no" omit-xml-declaration="yes"/>

<xsl:template match="/">
#include<stdio>
</xsl:template>
</xsl:stylesheet> 
```

我收到以下错误：- 结束标记“xsl：模板”与开始标记“stdio”不匹配。

请告诉我如何解决上述错误？

感谢和问候维卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:24:55.910

`<`并且`>`对 XML 解析器有特殊的意义。`&lt;`用和替换它们`&gt;`。

通常在输出中做这些替换：

> ```
> "   &quot;
> '   &apos;
> <   &lt;
> >   &gt;
> &   &amp; 
> ```

之后，您的输出将如下所示：

```
<xsl:template match="/">
#include&lt;stdio&gt;
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:28:25.157

`include<stdio>`应该是`#include&lt;stdio&gt;`。xml 验证试图将该`<stdio>`部分视为标记，因此找不到结束标记。

# javascript - 带有 DIV 的水平幻灯片

> ID：15338054
> 
> 赞同：5
> 
> 时间：2013-03-11T12:00:23.937
> 
> 标签：javascript, jquery, css, slide

我有一个容器 div 元素，它应该包含所有子 div 元素。我看到了这个线程：[Slide a div offscreen using jQuery](https://stackoverflow.com/questions/4741880/slide-a-div-offscreen-using-jquery)，我想知道如何实现它（在 div 元素中而不是在正文中）。代码工作正常，但是如果“包装器”div 元素的宽度为 500px，我应该如何包装子 div？我需要使用 iframe 还是...？

为了更好地理解，我制作了这张图片： ![在此处输入图像描述](../Images/fa093eb49a3d3d5884a12827e3d8b132.png)

红色矩形是窗户，灰色背景是墙壁。您只能通过窗口查看并查看当前的 div 元素。如果你按下右边的按钮 -aqua- 你会看到绿色的 div，如果你按下左边的按钮，你会看到黄色的 div。

注意： div 元素应该移动而不是墙。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T12:22:12.273

jQuery 用于逻辑，CSS3 用于`transition`和`transform`.
多个画廊 + 自动滑动 + 悬停时暂停：

```
$(function(){

  $('.gallery').each(function() {

    var $gal     = $(this),
        $movable = $(".movable", $gal), 
        $slides  = $(">*", $movable),
        N        = $slides.length,
        C        = 0,
        itv      = null;

    function play() { itv = setInterval(anim, 3000); }
    function stop() { clearInterval(itv); }
    function anim() {
      C = ($(this).is(".prev") ? --C : ++C) <0 ? N-1 : C%N;
      $movable.css({transform: "translateX(-"+ (C*100) +"%)"});
    }

    $(".prev, .next", this).on("click", anim);
    $gal.hover(stop, play);
    play();

  });

});
```

```
.gallery{
  position: relative;
  overflow: hidden;
}
.gallery .movable{
  display: flex;
  height: 70vh;
  transition: transform 0.4s;
}
.gallery .movable > div {
  flex:1;
  min-width:100%;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

Pause on hover and autoslide

<div class="gallery">
  <div class="movable">
    <div style="background:#0af">1 <p style="position:absolute; top:400px;">aaaa</p></div>
    <div style="background:#af9">2</div>
    <div style="background:#f0a">3</div>
  </div>
  <button class="prev">Prev</button>
  <button class="next">Next</button>
</div>

As many galleries as you want
```

计算幻灯片的数量并放入*计数器* `C`。
在上一个/下一个单击操作`C`
On autoslide`$(this).is(".prev")`也将被使用，就像单击*Next*按钮`false`一样。 在 mouseenter 上只是当前正在运行，在 mouseleave 上（第二个参数）重新初始化`++C` *`clearInterval``itv``.hover``itv`*

 *动画是通过将 C*100`translateX`乘以`- C * 100 %`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:03:11.110

将所有三个 div 添加到一个容器 div 中，然后使窗口环绕长 div 并隐藏溢出。

例如，如果窗口区域是 960px，那么里面的 div 就是 3x 960 (2880)

您可以通过以 960 为增量更改其左侧位置来将其居中（将长 div 置于相对位置，将窗口溢出到隐藏）

```
#window{
width:960px;
overflow: hidden;
}

#container{
position: relative;
left: -960px;
}

.content_box{
width:960px;
} 
```

然后您可以使用 javascript (jQuery) 为左侧位置设置动画：

```
$('#arrow-left').click(function() {
  $('#container').animate({
   left: '-=960'
  }, 5000, function() {
  // Animation complete.
  });
});

$('#arrow-right').click(function() {
  $('#container').animate({
   left: '+=960'
  }, 5000, function() {
  // Animation complete.
  });
}); 
```

更多关于 .animate 的信息可以在手册中找到：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:15:12.733

```
<div id="parent">
  <div id="container">
    <div id="child1"></div>
    <div id="child2"></div>
  </div>
</div> 
```

给父红色 div css 属性：

```
position: relative;
overflow: hidden;
width: 500px;
height: somevalue; 
```

用另一个 div“例如容器”包装子 div，并为其提供以下 css 属性：

```
position: absolute;
width: ;/*overall width of all children divs including margins*/
top: 0;
left: 0;
height: ;/*same as parent*/ 
```

最后是儿童 div：

```
float: left;
height: ;/*same as parent*/ 
```*

# apache-camel - 带有 Object 参数而不是 String 的 apache camel @Produce 方法

> ID：15338055
> 
> 赞同：0
> 
> 时间：2013-03-11T12:00:29.703
> 
> 标签：apache-camel, producer, spring-remoting

我正在使用 Camel 的 POJO 生产，例如

{

```
public interface MyListener {
    String sayHello(String name);
}

public class MyBean {
    @Produce(uri = "activemq:foo")
    protected MyListener producer;

    public void doSomething() {
        // lets send a message
        String response = producer.sayHello("James");
    }
} 
```

}

使用方法 sayHello 的接口与在骆驼中用作主体的字符串对象。但是，如果我在这里尝试使用任何其他对象，我会从骆驼那里得到异常，说没有找到用于转换 java.io.InputStream 的 BeanInvocation 的 TypeConvertor。

我知道该对象是被允许的，它会在某处被提及。但我想解释为什么它会这样做，以及是否有办法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:04:37.857

我还没有真正使用过 POJO 消息传递。也许，有经验的用户可以更好地帮助您。

但据我了解，它应该能够支持任何类型的对象，而不仅仅是字符串。

您所说的错误似乎是由于路线不匹配而引起的。估计消费有问题。

您能否发布确切的错误堆栈跟踪和消费者方法？

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T08:18:46.420

现在正在为同样的问题而苦苦挣扎。到目前为止，唯一明显的解决方法是使用 @EndpointInject 而不是 @Produce - 然后您将获得 ProducerTemplate 并发布任何对象：

```
 @EndpointInject(uri = "seda:report-send")
    ProducerTemplate reportSender; 
```

现在你可以做

```
 Object myObject = new Object();
    reportSender.sendBody(myObject); 
```

甚至

```
 Object myObject = new Object();
    Map<String, Object> headers = new HashMap<String, Object>();
    headers.put("Subject", "Mail subject");
    headers.put("contentType", "text/plain");
    reportSender.sendBodyAndHeaders(myObject, headers); 
```

# php - 除了状态之外隐藏 Facebook 页面墙上的帖子

> ID：15338060
> 
> 赞同：0
> 
> 时间：2013-03-11T12:00:40.427
> 
> 标签：php, facebook-graph-api

我正在将 facebook 提要放入我正在开发的网站中。我已经获得了提要，但不幸的是，它显示了其他 Facebook 用户在页面上发布的帖子。我希望提要仅显示该页面制作的墙贴。这可能吗？

这是我用来拉入提要的 URL：

[https://graph.facebook.com/HadleighSwimmingPool/feed?access_token=292423037531408|0cc972ba47bcdafed97f3d01a2a3bd77&limit=1](https://graph.facebook.com/HadleighSwimmingPool/feed?access_token=292423037531408|0cc972ba47bcdafed97f3d01a2a3bd77&limit=1)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:24:07.570

正如@CBroe 所说，您可以使用[Facebook Query Language](https://developers.facebook.com/docs/reference/fql/)。

这是您需要的 FQL 查询：

```
SELECT message FROM stream WHERE source_id=[page-id] AND actor_id=[page-id] 
```

对于测试，您可以使用[graph api explorer tool](https://developers.facebook.com/tools/explorer?fql=SELECT%20message%20FROM%20stream%20WHERE%20source_id%3D%5bpage-id%5d%20AND%20actor_id%3D%5bpage-id%5d)。

# html - HTML 复选框输入文本 - 它有什么用？

> ID：15338061
> 
> 赞同：0
> 
> 时间：2013-03-11T12:00:41.457
> 
> 标签：html, checkbox

这是一个简单的 HTML 复选框输入元素：

```
<input type="checkbox" id="c1">I am a checkbox</input> 
```

但是单击文本不会选中复选框，而是使用标签元素解决：

```
<input type="checkbox" id="c1"/><label for="c1">I am a checkbox</label> 
```

所以我的问题是复选框文本有什么用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:03:35.053

> 复选框文本有什么用？

没有。HTML 无效。的结束标签`<input>`是禁止的。该`input`元素被定义为 EMPTY 并且不能有任何子节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:05:01.487

您的第一个示例不是有效的 HTML。该`<input>`标签是自动关闭的，即`<input />`很好`<input>`，但`<input></input>`不是。

您可以通过将以下代码粘贴到[HTML 验证器](http://validator.w3.org/#validate_by_input)中来检查这一点。

```
<!DOCTYPE html>

<html>

<head>
<title>Test</title>
</head>

<body>
<input type="checkbox" id="c1">I am a checkbox</input>
</body>

</html> 
```

# c++ - 拆分文件并在 C++ 中将其重新组合在一起

> ID：15338064
> 
> 赞同：0
> 
> 时间：2013-03-11T12:00:46.183
> 
> 标签：c++, split, fstream

我想通过读取数据块来复制文件，将其发送，然后将其重新组合在一起。发送不是问题的一部分，所以我在代码中省略了它。它应该适用于任何类型的文件和任意piece_lengths。

这只是一个前期阶段。最后数据块不应该顺序选择，而是随机选择。接收另一个数据块之间可能有一段时间。

我知道这个例子是有意义的`size % piece_length != 0`。

我在另一端收到与原始文件大小相同的崩溃文件。有没有人看到问题？

```
int main ()
{
string file = "path/test.txt"
string file2 = "path2/test.txt";

std::ifstream infile (file.c_str() ,std::ifstream::binary);
//get size of file
infile.seekg (0,infile.end);
long size = infile.tellg();
infile.seekg (0);   
size_t piece_length = 5;

for (int i = 0; i < ((size / piece_length) + 1); i++)
{
    if ( i != (size / piece_length))
    {
        std::ifstream infile (file.c_str() ,std::ifstream::binary);
        infile.seekg((i * piece_length) , infile.beg);          
        char* buffer = new char[piece_length];
        infile.read(buffer, piece_length);
        infile.close();
        std::ofstream outfile (file2.c_str() ,std::ofstream::binary);
        outfile.seekp((i * piece_length), outfile.beg);
        outfile.write(buffer, piece_length);
        outfile.close();
    }
    else 
    {
        std::ifstream infile (file.c_str() ,std::ifstream::binary);
        infile.seekg((i * piece_length) , infile.beg);          
        char* buffer = new char[size % piece_length];
        infile.read(buffer, size % piece_length);
        infile.close();
        std::ofstream outfile (file2.c_str() ,std::ofstream::binary);
        outfile.seekp((i * piece_length), outfile.beg);
        outfile.write(buffer, size % piece_length);
        outfile.close();
        }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:37:07.933

要回答您的特定问题，您需要在标志中打开`outfile`，`ios::in | ios::out`否则它默认为只写模式并破坏文件中已有的内容。有关更多详细信息，请参阅此答案：[写入现有二进制文件的中间 c++](https://stackoverflow.com/questions/6427698/write-to-the-middle-of-an-existing-binary-file-c)

您可能需要考虑以下事项：

*   如果您只是将部分写入文件末尾，只需使用`ios::app`(append)。甚至不需要寻找。
*   您不需要继续重新打开`infile`，甚至不需要`outfile`重复使用它们。
*   您还可以重复使用`buffer`. 请记住`delete`他们，或者最好使用`std::vector`.

# c# - 在亚马逊 S3 中创建 zip 文件夹

> ID：15338070
> 
> 赞同：2
> 
> 时间：2013-03-11T12:00:56.447
> 
> 标签：c#, amazon-s3, dotnetzip

我必须在亚马逊 S3 中创建一个文件夹。现在必须将该文件夹转换为 zip 文件。我已使用 DotNetZip Liberary 转换为 .zip 文件。这是该链接

[http://dotnetzip.codeplex.com/wikipage?title=CS-Examples](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples)

```
public void ConvertToZip(string directoryToZip, string zipFileName)
{
    try
    {

        using (client = DisposableAmazonClient())
        {
            var sourDir = new S3DirectoryInfo(client, bucket, directoryToZip);

            var destDir = new S3DirectoryInfo(client, bucket, CCUrlHelper.BackupRootFolderPhysicalPath);

            using (var zip = new ZipFile())
            {
                zip.AddDirectory(sourDir.FullName); // recurses subdirectories
                zip.Save(Path.Combine(destDir.FullName, zipFileName));
            }
        }

        logger.Fatal("Successfully converted to Zip.");
    }
    catch (Exception ex)
    {
        logger.Error("Error while converting to zip. Error : " + ex.Message);
    }
} 
```

当我运行代码时，它显示错误“不支持给定路径的格式”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T22:28:32.737

S3DirectoryInfo 模拟目录结构，但它不是实际的目录结构，DotNetZip 不知道如何处理指向 S3 中对象的字符串。为了让您执行此操作，您将必须下载文件，将它们压缩，然后上传生成的 zip 文件。这是一些示例代码，展示了如何做到这一点。

```
课堂节目
{
    静态无效主要（字符串 [] 参数）
    {
        var zipFilename = @"c:\temp\data.zip";
        var client = new AmazonS3Client();
        S3DirectoryInfo rootDir = new S3DirectoryInfo(client, "norm-ziptest");
        使用 (var zip = new ZipFile())
        {
            zip.Name = zip 文件名；
            addFiles(zip, rootDir, "");
        }

```
 // Move local zip file to S3
    var fileInfo = rootDir.GetFile("data.zip");
    fileInfo.MoveFromLocal(zipFilename);
}

static void addFiles(ZipFile zip, S3DirectoryInfo dirInfo, string archiveDirectory)
{

    foreach (var childDirs in dirInfo.GetDirectories())
    {
        var entry = zip.AddDirectoryByName(childDirs.Name);
        addFiles(zip, childDirs, archiveDirectory + entry.FileName);
    }

    foreach (var file in dirInfo.GetFiles())
    {
        using (var stream = file.OpenRead())
        {                    
            zip.AddEntry(archiveDirectory + file.Name, stream);

            // Save after adding the file because to force the 
            // immediate read from the S3 Stream since 
            // we don't want to keep that stream open.
            zip.Save(); 
        }
    }
} 
```

}

```

# c# - 序列化到数据层中的文件

> ID：15338072
> 
> 赞同：1
> 
> 时间：2013-03-11T12:01:04.460
> 
> 标签：c#, design-patterns, repository, dao, data-layer

我正在尝试更新旧应用程序，并且需要一些有关如何组织数据级别的建议。

今天，所有数据都存储在一个二进制文件中，该文件是在二进制序列化的帮助下创建的。存储的数据是多层深的树结构。

保存数据的对象级别：

```
ApplicationSettings
   CommunicationSettings
   ConfigurationSettings
      HardwareSettings
         and so forth some additional levels 
```

所有这些类都有很多逻辑来做不同的事情。它们还具有不应保存到文件中的状态信息。

数据在程序执行过程中不断更新，更新时由“业务逻辑”保存为二进制文件。

我尝试更新程序，但为此进行单元测试是一场噩梦。

我希望数据仍以任何方式保存在文件中。但除此之外，我愿意接受如何改进这一点的建议。

**编辑：**

程序很小，我不想依赖大型复杂的框架。我需要帮助的原因是尝试清理几乎整个应用程序逻辑都在**一个**巨大方法中的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:28:05.373

我会做什么；

首先，将设置变成合约；

```
public interface IApplicationSettings
{
     ICommunicationSettings CommunicationSettings{get;} 
     IConfigurationSettings ConfigurationSettings{get;}
} 
```

现在，将您的逻辑分解为单独的关注点，并以可能的最高级别传递您的设置；这样如果`MyLogicForSomething`只关心通信设置，则只传入通信设置；

```
public class MyLogicForSomething
{       
    public MyLogicForSomething(ICommunicationSettings commSettings)
    {
    }

    public void PerformSomething(){/* ... */}
} 
```

ICommunicationSettings 在这里很容易模拟；像[Rhino Mocks这样的东西](http://www.hibernatingrhinos.com/oss/rhino-mocks)

您现在可以轻松测试以确保在运行逻辑时调用/设置设置中的某些内容

```
var commSettings = MockRepository.GenerateStub<ICommunicationSettings>();
var logic = new MyLogicForSomething(commSettings );

logic.PerformSomething()

commSettings.AssertWasCalled( x => x.SaveSetting(null), o=>o.IgnoreArguments() ); 
```

# php - mysql查询中的php变量

> ID：15338075
> 
> 赞同：1
> 
> 时间：2013-03-11T12:01:16.453
> 
> 标签：php, mysql

我需要使用存储在 mysql 表列中的 php 变量调用 url。例如：

在 Mysql 中：

```
Table name:  geturldata
columns:    srno |  url
contents:   1 | http://www.google.com/number=$mobno&user=$username 
```

现在，在 php 中，我将这个表称为：

```
include (db.php)... 

$mobno = 91123456789;
$username = 'HELLOWORLD';

$QRY = "Select * from TBLNAME where srno=1";
$doqry = mysql_query($QRY);
$res = mysql_fetch_array($doqry);

echo $result_url = $res['url'] 
```

表明：

```
 http://www.google.com/number=$mobno&user=$username 
```

我希望它显示：

```
http://www.google.com/number=91123456789&user='HELLOWORLD' 
```

我应该在 MySQL 表中更改什么以获得上述结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:05:45.600

您需要将 URL 中的变量（来自 MySQL）替换为代码中设置的 php 变量。

换行：

```
ECHO $result_url = $res['url'] 
```

像这样：

```
$result_url = $res['url'];
$result_url = str_replace("$username", urlencode($username), $result_url);
$result_url = str_replace("$mobno", urlencode($mobno), $result_url);
echo $result_url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:10:21.067

在这种情况下，我会使用 sprintf ：

将其保存在数据库中，例如：

```
http://www.google.com/number=%d&user=%s 
```

稍后替换它：

```
echo sprintf('http://www.google.com/number=%d&user=%s', $mobno, $username); 
```

# iphone - 单击导航控制器的操作 uiitembar 后显示一帧按钮

> ID：15338076
> 
> 赞同：0
> 
> 时间：2013-03-11T12:01:16.433
> 
> 标签：iphone, uinavigationitem, xamarin.ios

我想创建这样的东西：

![在此处输入图像描述](../Images/38fa4ac14bad440ebcee95cf6620a2eb.png)

当客户端单击导航控制器的右侧按钮（操作按钮）时，会出现一个按钮框架（如图像）并且客户端选择它们。通过选择将执行哪一项新操作。

我是 iphone 和 monotouch 的新手。框架是 iphone 中预定义的组件。如果是，它的名称是什么，以及我如何使用它。如果它不是预定义的组件，我如何在我的应用程序中创建这样的框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:07:33.707

这是`UIActionSheet`. 这是一个小例子：

```
var sheet = new UIActionSheet ("");
sheet.AddButton ("Send email");
sheet.AddButton ("Send message");
sheet.AddButton ("Cancel");

sheet.CancelButtonIndex = 2;
sheet.Clicked += delegate(object sender, UIButtonEventArgs e) {
    if (e.ButtonIndex == 2)
    return;
};
sheet.ShowInView (this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:05:12.363

那是一个 UIActionSheet。有一个 MonoTouch[示例](https://github.com/xamarin/monotouch-samples/tree/master/MonoCatalogSample)演示了如何使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:11:51.130

`ViewDidLoad`在方法中添加此代码，

```
UIBarButtonItem *arrow = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(showActionSheet)] autorelease];
self.navigationItem.rightBarButtonItem = arrow; 
```

编写**showActionSheet**方法的代码并添加`UIActionSheet *actionSheet in .h`文件并给出**@property**和**@synthesize**。

```
#pragma  mark - Button Methods

-(void)showActionSheet
{
    //  Here is code for UIActionSheet
         self.actionSheet= [[UIActionSheet alloc]initWithTitle:@" " delegate:self cancelButtonTitle:@"Hide Action" destructiveButtonTitle:nil otherButtonTitles:@"Send email", @"Send message", nil];
         [self.actionSheet showInView:self.view];
         //self.actionSheet.tag=1;

} 
```

添加委托方法`UIActionSheet`

```
#pragma mark - UIActionSheet Delegate Methods

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
       if(buttonIndex == 0)
    {
       // code for selected first Button.
    }
    else if(buttonIndex == 1)
    {
       // code for selected Second Button.      
    }
} 
```

# qt - 如何在 QTextEdit 中选择一个字符

> ID：15338077
> 
> 赞同：0
> 
> 时间：2013-03-11T12:01:21.023
> 
> 标签：qt

我想在 QTextEdit 小部件中选择一个字符，然后更改它的格式。但我发现 select() 函数只支持 4 种类型：**Document**、**BlockUnderCursor**、**LineUnderCursor**和**WordUnderCursor**。

那么，有没有其他方法只能选择一个字符呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:34:45.823

您可以为此使用[QTextCursor](http://qt-project.org/doc/qt-4.8/qtextcursor.html)

假设您知道要选择的字符的位置为 ( `charPosition`)

```
QTextCursor cursor = ui_->textEdit->textCursor();
cursor.setPosition(charPosition);
cursor.movePosition(QTextCursor::Right, QTextCursor::KeepAnchor);
ui_->textEdit->setTextCursor(cursor); 
```

# mysql - 选择连接表的行数

> ID：15338079
> 
> 赞同：1
> 
> 时间：2013-03-11T12:01:25.153
> 
> 标签：mysql, join, count

我有两个具有一对多关系的表。我通过 id 列加入表格。我的问题是我需要计算第二个（tablekey_id）表中所有匹配条目的数量，但我需要标有 boolean 的行中的信息`is_basedomain`。`is_basedomain`请注意，每组具有相同 tablekey_id 的行只有一行= 1。

表：表键

```
id  linkdata_id  timestamp
22  9495028175   2013-03-10 01:13:46
23  8392740179   2013-03-10 21:23:25 
```

表：searched_domains。

注意：tablekey_id 是 tablekey 表中 id 的外键。

```
id  tablekey_id  domain        is_basedomain
1   22           somesite.com  1
2   22           yahoo.com     0
3   23           red.com       1
4   23           blue.com      0
5   23           green.com     0 
```

这是我正在使用的查询。我试图使用子查询，但我似乎不能只选择当前 tablekey_id 的计数，所以这不起作用。

```
SELECT `tablekey_id`, `linkdata_id`, `timestamp`, `domain`, `is_basedomain`,
   (SELECT COUNT(1) AS other FROM `searched_domains` AS dd 
    ON dd.tablekey_id = d.tablekey_id GROUP BY `tablekey_id`) AS count
FROM `tablekey` AS k 
JOIN `searched_domains` AS d
ON k.id = d.tablekey_id 
WHERE `is_basedomain` = 1 GROUP BY `tablekey_id` 
```

我想回来的结果是：

```
tablekey_id  linkdata_id  timestamp            domain        is_basedomain    count
22           9495028175   2013-03-10 01:13:46  somesite.com  1                2
23           8392740179   2013-03-10 21:23:25  red.com       1                3 
```

谁能帮我把它变成一个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:28:00.070

您可以将具有 is_basedomain=1 的 searched_domains 行视为查询中的单独表，并将其与 searched_domains 的另一个实例连接（以获取计数）：

```
SELECT 
    d.tablekey_id, 
    k.linkdata_id, 
    k.timestamp,  
    d.domain, 
    d.is_basedomain, 
    COUNT(*) as 'count'
FROM 
    tablekey AS k
      join searched_domains AS d on d.tablekey_id=k.id
      join searched_domains AS d2 on d2.tablekey_id=d.tablekey_id
WHERE 
    d.is_basedomain = 1 
GROUP BY 
    d.tablekey_id, 
    k.linkdata_id, 
    k.timestamp,  
    d.domain, 
    d.is_basedomain 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:13:15.353

使用时出现错误，`ON`而不是使用`WHERE`

试试这个

```
 SELECT `tablekey_id`, `linkdata_id`, `timestamp`, `domain`, `is_basedomain`,
    (SELECT COUNT(1) AS other FROM `searched_domains` AS dd 
    where dd.tablekey_id = d.tablekey_id GROUP BY `tablekey_id`) AS count

    FROM `tablekey` AS k 
    JOIN `searched_domains` AS d
    ON k.id = d.tablekey_id 
    WHERE `is_basedomain` = 1 GROUP BY `tablekey_id` 
```

[**在这里演示**](http://sqlfiddle.com/#!2/699da/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:14:34.087

没有理由使用子查询，或者您的意见是什么？

```
SELECT 
    `tablekey_id`, 
    `linkdata_id`, 
    `timestamp`,  
    `domain`, 
    `is_basedomain`, 
    COUNT(*) as count
FROM 
    `tablekey` AS k , 
    `searched_domains` AS d
WHERE 
    k.id = d.tablekey_id AND 
    `is_basedomain` = 1 
GROUP BY 
    `tablekey_id`, 
    `linkdata_id`, 
    `timestamp`, 
    `domain`,
    `is_basedomain` 
```

如果您只想使用最新的时间戳`MAX(timestamp) as timestamp`并将其从`group by`.

# javascript - Ember.js 与 Ember.testing = true

> ID：15338081
> 
> 赞同：3
> 
> 时间：2013-03-11T12:01:29.770
> 
> 标签：javascript, ember.js, ember-data

我正在尝试使用 Ember.testing = true 标志在 Ember.js 中进行测试以禁用自动运行循环等

我有这个代码

```
Ember.testing = true;

Ember.run(function() {  
  App = Ember.Application.create();
});

App.Router.map(function() {
  this.route("home", { path: "/" });
});

Ember.run(function() {
  App.initialize();
}); 
```

我已经得到了 thuis 错误

```
Uncaught Error: assertion failed: You have turned on testing mode, which disabled the run-loop's autorun. You will need to wrap any code with asynchronous side-effects in an Ember.run 
```

我知道您需要在 Ember.run 中运行异步代码，根据我能找到的任何示例，我都有！

谁能告诉我我做错了什么，甚至可以让 jsin 示例不显示此错误？

在此处查看 jsbin [http://jsbin.com/uxalap/14/edit](http://jsbin.com/uxalap/14/edit)

更新：

我正在使用 Konacha 运行我的测试，当我使用最新的 RC1 时，在 Em.run 中包装 Ember.Application.create() 和 App.initialize() 时出现错误。当我删除这些时，我没有收到任何错误。现在在最新的 master 中是否正确？

谢谢瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:40:52.307

`Ember.testing`自 RC1 以来已更改，如果您想使用它，您应该使用 master

[这是一个更新的工作 JSBin](http://jsbin.com/uxalap/17/edit)

# sql - 如果 Sum Exceeds 显示新记录，其值留在下一行

> ID：15338084
> 
> 赞同：0
> 
> 时间：2013-03-11T12:01:36.500
> 
> 标签：sql, sql-server-2005

```
 A   B C  D    
12426 4 1 KT1217V
12426 4 1 KT1218V
12428 3 1 KT1217V
12428 3 1 KT1218V
12430 3 1 KT1217V
12430 3 1 KT1218V
12431 3 1 KT1217V
12431 3 1 KT1218V
12434 3 1 KT1217V
12434 3 1 KT1218V
12439 8 1 KT1217V
12439 8 1 KT1218V
12440 1 1 KT1217V
12440 1 1 KT1218V
12442 8 1 KT1217V
12442 8 1 KT1218V
12443 8 1 KT1217V
12443 8 1 KT1218V 
```

我正在寻找这样的结果：

```
KT1217V      12426,12428 ..... 
KT1218       12426,12428,12431
KT1218       12434,12439 
```

直到 b 列的值总和 < 5 如果总和超过 > 5 则显示与 c=1 的左侧值相同的新记录

我编写了查询以获取值 < 或 > 总和（B 列），但无法显示与 D 列的剩余值列 A 相同的新记录

```
select D,
(select a.A+',' from table1 a where a.D = b.D for XML PATH ('') )
from table1 b
WHERE c = 1
group by D
HAVING SUM(B)<5
ORDER BY D 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:29:55.850

你需要使用 LISTAGG(), smth like SELECT A, LISTAGG(D, ',') WITHIN GROUP (ORDER BY D)。Oracle 中没有 a.A+',' 或 XML PATH ('') 这样的东西...

# c# - JQuery自动完成从aspx页面中的模型加载数据

> ID：15338087
> 
> 赞同：0
> 
> 时间：2013-03-11T12:01:48.003
> 
> 标签：c#, jquery, asp.net, json, jquery-ui

我在尝试着

`1)`创建一个从 aspx 方法填充的 JQuery AutoComplete 框，以及

`2)`一旦我得到结果，我希望将这些结果填充到一个列表中。

目前，我正在尝试迈出第一步，但没有成功。

我的代码如下： -

ASPX

```
 <script>
  $(function () {

      $("#persons").autocomplete({
          //source: availableTags
          source: function (request, response) {
              var term = request.term;
              var personArray = new Array();

              $.post('JQAutoComplete.aspx/FetchPersonList', { personName: term }, function (persons) {
                  personArray = persons;
                  alert('PersonArray' - personArray);
                  alert('Persons' - persons);
                  response(personArray);
              });
          }
      });
  }); 
```

```
<div class="ui-widget">
  <label for="persons">Persons: </label>
  <input id="persons" />
</div>

</body> 
```

我的 aspx.cs 如下：-

```
 public JsonResult FetchPersonList(string personName)
    {
        var persons = ctx.GetDataFromXML(false, 0);
        return (persons) as JsonResult;
    } 
```

****** *** ** *** ** *** *******更新 ASPX.CS* ***** ** *** ** *** ** *** ** *** ** *** ***** 好的，所以我将方法更改为：-**

 **```
 [WebMethod]
    public static List<Person> FetchPersonList()
    {
        //var persons = this.HouseService.SelectByName(houseName).Select(e => new String(e.Name.ToCharArray())).ToArray();
        var persons = ctx.GetDataFromXML(false, 0);

        return (List<Person>) persons;
    } 
```

但我仍然没有通过这个方法！

* * *

但是，代码根本没有达到这种方法。

我怎样才能得到这个清单？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:04:13.077

好的，我发现了问题。

我将我的 JQuery 更改为以下内容并现在调用该方法：-

```
 $(document).ready(function () {
    SearchText();
});
function SearchText() {
    $("#persons").autocomplete({
        source: function (request, response) {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "JQAutoComplete2.aspx/FetchPersons",
                data: "{'name':'" + document.getElementById('persons').value + "'}",
                dataType: "json",
                success: function (data) {
                    response(data.d);
                    alert(data.d);
                },
                error: function (result) {
                    alert("Error");
                }
            });
        }
    });
} 
```

我的 ASPX.CS 看起来像这样：-

```
 [WebMethod]
    public static List<Person> FetchPersons(string name)
    {
        var persons = ctx.GetDataFromXML(false, 0);

        return (List<Person>)persons;

    } 
```**

# scripting - 确定显示网站所需的所有 DNS 查询

> ID：15338088
> 
> 赞同：4
> 
> 时间：2013-03-11T12:01:50.230
> 
> 标签：scripting, dns, automation

我需要创建显示大量站点（理想情况下最多为 1 000 000）所需的所有 DNS 查询的列表。该列表需要将查询分配给需要它们的页面。

示例：访问 google.com 需要对 google.com、ssl.gstatic.com、apis.google.com 和其他网站进行 DNS 查询。我的名单会读到类似的东西

```
google.com:google.com,ssl.gstatic.com,apis.google.com,... 
```

（此处不相关的确切格式）

我目前对如何做到这一点有两个想法：

1.  设置带有日志记录的 DNS 服务器，使用我的 DNS 服务器作为解析器构建访问给定域列表的脚本
2.  构建一个加载站点源代码的脚本（例如，想想 python 的 urllib2），解析所有嵌入的内容并构建一个需要的查询列表

但这两种想法都有问题。访问 1 000 000 个域，两次访问之间的间隔为 2 秒（以便之后可以将查询分配给访问的站点），加载大约需要 1 秒（这是非常乐观的）将需要 34 天以上，可能更长。但是要构建一个解析器，我需要一个包含所有可能形式的嵌入内容的完整列表，这些内容会导致 DNS 查询，并且我还需要查询一些目标 URL（想想 iframe），而有些内容是不可能的检查进一步的查询（想想连接到其他服务器的闪存内容）。

我有点卡在这里，希望能就如何处理这个问题提供一些意见。可以将 URL 列表缩短到大约 100 000 个，但任何更少都会显着减少结果的使用。

对于上下文：我的学士论文需要此列表，该列表涉及对提议的 DNS 隐私扩展的攻击策略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:10:30.257

有一个工具可以做到这一点并生成图形表示。它是称为[DNSpktflow](https://www.dnssec-tools.org/wiki/index.php/Dnspktflow)（DNS 数据包流）的 dnssec-tools 的一部分

它可能不会完全按照您的要求做，但它是开源的，因此您可以看到他们是如何做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:49:41.767

您可以使用[PhantomJS](http://phantomjs.org/)来执行此操作，因为它提供了一个接口，可以让您捕获网络请求并记录它们，类似于[本示例](https://github.com/ariya/phantomjs/wiki/Network-Monitoring)的内容。

您需要编写一些简单的 Javascript，但由于它是 Node，因此异步运行它以在合理的时间内收集您需要的数据应该相当容易。

# c# - 如何在 windows phone 7 中解析 html 文件？

> ID：15338089
> 
> 赞同：0
> 
> 时间：2013-03-11T12:01:50.430
> 
> 标签：c#, windows-phone-7, linq-to-xml, html-parsing

嗨，我正在使用下面给出的 xml 文件，我想解析 html 文件。

```
<Description>
 <Fullcontent>
   <div id="container" class="cf">
    <link rel="stylesheet" href="http://dev2.mercuryminds.com/imageslider/css/demo.css" type="text/css" media="screen" />
        <ul class="slides">
            <li>Sonam Kapoor<img src="http://deys.jpeg"/></li>
            <li>Amithab<img src="http://deysAmithab.jpeg"/></li>
            <li>sridevi<img src="http://deyssridevi.jpeg"/></li>
            <li>anil-kapoor<img src="http://deysanil-kapoor.jpeg"/></li>
         </ul>
    </div>
  </Fullcontent>
</Description> 
```

我想用名称绑定图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:28:19.507

您可以从 NuGet 安装*HtmlAgilityPack*（只需搜索 agility）。解析也很简单。这是选择图像标签和获取源属性的方法：

```
HtmlDocument html = new HtmlDocument();
html.Load(path_to_file);
var urls = html.DocumentNode.SelectNodes("//ul[@class='slides']/li/img")
                            .Select(node => node.Attributes["src"].Value); 
```

顺便说一句，似乎[还不支持](http://htmlagilitypack.codeplex.com/discussions/204342?ProjectName=htmlagilitypack)直接选择属性。

# java - 对 API 调用 datastore_v3.Put() 的请求过大

> ID：15338092
> 
> 赞同：8
> 
> 时间：2013-03-11T12:02:01.700
> 
> 标签：java, google-app-engine, google-cloud-sql

我正在使用带有 appengine 的谷歌云 sql。

`com.google.apphosting.api.ApiProxy$RequestTooLargeException: The request to API call datastore_v3.Put() was too large.`尽管我没有使用 Datasotre API ，但我得到了。

我认为根据文档[https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide#access_limits](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide#access_limits)数据大小限制是 16MB 在 60 秒内提供。

我的数据大小约为 1 MB，我的响应时间肯定不到 1 分钟。如果我尝试使用较小的数据，一切正常。

那么，为什么会抛出异常？问题是什么 ？它是谷歌应用引擎中的错误吗？还是有尺寸限制，它在哪里记录？或者是什么 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T11:01:22.667

发生这种情况是因为[GAE 会话](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)，它在后台使用 GAE 数据存储来保存会话对象。如果会话中存储的数据超过 1Mb，则会引发此异常。

# mysql - 如果mysql表中不存在如何添加字段

> ID：15338096
> 
> 赞同：0
> 
> 时间：2013-03-11T12:02:14.063
> 
> 标签：mysql

餐桌订单

```
customers_id | name
1 | jimmy 
```

如果不存在，我想在表订单中添加一个字段“refer_id”

```
customers_id | name | refer_id
1 | jimmy | 0 
```

if条件怎么写？

```
alter table orders add refer_id int(11) default 0 if ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:04:57.223

为什么在这里使用 if ？

试试这个

```
 ALTER TABLE orders ADD refer_id int(11)  default 0  AFTER name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:10:26.480

试试这个

```
delimiter '//'

CREATE PROCEDURE addcol() BEGIN

IF NOT EXISTS(
    SELECT * FROM information_schema.COLUMNS
    WHERE COLUMN_NAME='refer_id' AND TABLE_NAME='orders' 
    )
    THEN
        alter table orders add refer_id int(11) default 0 
END IF;
END;
//

delimiter ';'

CALL addcol();

DROP PROCEDURE addcol; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:04:58.373

它不是构建的，但可以使用 information_schema 数据库来完成

[看这里](http://www.cryer.co.uk/brian/mysql/howto_add_column_unless_exists.htm)

# python - Django 会话值偶尔不会持久化

> ID：15338103
> 
> 赞同：1
> 
> 时间：2013-03-11T12:02:52.630
> 
> 标签：python, django, session

我有以下 REST 方法，每次单击 jQuery 选项卡以存储活动选项卡时都会更新会话的值。

```
@csrf_exempt
def update_active_tab_request(request):
    """
    Stores the active tab for a given tab item
    """
    for tab, active in request.GET.iteritems():
        request.session[tab] = int(active)

    return HttpResponse("OK", status=200) 
```

这是一个相当简单的例程，我遇到的问题是该值并不总是存储在会话中。我查看了 Web 服务器日志，并添加了日志语句来验证代码是否被调用。一切似乎都在工作，但我发现当此方法返回时会话可能没有更新。

考虑到更新会话可能是性能/同步问题，我已将会话存储更改为`SESSION_ENGINE='django.contrib.sessions.backends.cache'`. 这没有帮助。我还设置`SESSION_SAVE_EVERY_REQUEST=True`为始终保存会话。这也没有帮助。

我无法解释这种行为。任何有助于阐明问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:08:55.660

虽然我无法解决此问题，但我发现了一种解决方法。我使用 Django 的低级缓存 API 手动将活动选项卡存储在缓存中。

```
from django.core.cache import cache

def save_viewer_tab(active, session_key, tab):
    cache.set(session_key + ":" + str(tab), int(active))

def get_viewer_tab(session_key, tab, default=0):
    return cache.get(session_key + ":" + str(tab), default)

@csrf_exempt
def update_active_tab_request(request):
    """
    Stores the active tab for a given tab item
    """
    session_key = request.session._session_key
    for tab, active in request.GET.iteritems():
        save_viewer_tab(active, session_key, tab)

    return HttpResponse("OK", status=200) 
```

它工作可靠，但我仍然不明白为什么之前存储会话中选项卡值的代码不可靠。

在我找到合适的解决方案之前，这是一种权宜之计。

# sql - sqlplus 错误打印文件名

> ID：15338104
> 
> 赞同：0
> 
> 时间：2013-03-11T12:02:53.893
> 
> 标签：sql, oracle, sqlplus

我创建了一个 sql 脚本，它在其中调用许多不同的 sql 文件，这些文件又可能在其中调用其他 sql 脚本。是否有可能在任何 sql 文件语句（授予、创建、更改错误）中发生错误时，它也会打印发生错误的文件名，显示行、错误和文件名。

当前是打印错误和行（显然）

```
dropping table temp_cl_link
DROP TABLE TEMP_CL_LINK CASCADE CONSTRAINTS
           *
ERROR at line 1:
ORA-00942: table or view does not exist 
```

如果可能的话，我希望它也显示发生错误的文件：

就像是 ：

```
dropping table temp_cl_link
DROP TABLE TEMP_CL_LINK CASCADE CONSTRAINTS
           *
ERROR at line 1:
ORA-00942: table or view does not exist ERROR FILE : InstallLink.sql 
```

或以任何其他合适的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:18:47.707

您可以使用

```
set APPINFO on 
```

[在这里阅读更多](http://blog.tanelpoder.com/2007/12/26/sqlplus-is-my-second-home-part-5-reading-the-name-of-currently-executing-script/)

# ios5 - 在 iOS 5 的 Drupal 7 上设置 OAUTH

> ID：15338108
> 
> 赞同：0
> 
> 时间：2013-03-11T12:03:03.497
> 
> 标签：ios5, drupal-7

我正在使用 iOS 5，并且启用了所有需要的模块。
谁能告诉我如何在 Drupal 上设置 OATH？

我需要一个关于 Drupal 7 和 Xcode 的分步程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:39:15.100

您可以先查看服务模块：[http](http://drupal.org/project/services) ://drupal.org/project/services 。您可以使用它公开 OAuth 身份验证。

可能有太多特定于应用程序的变量，无法逐步了解您需要如何在 IOS 端使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T15:36:07.093

你可以参考这个指南：

[将 oAuth 与 Drupal iOS SDK 一起使用](http://www.workhabit.com/blog/using-oauth-drupal-ios-sdk)

基本上你想要的是在你的 iOS 项目中包含 Drupal-iOS sdk [，可以从这里下载](https://github.com/workhabitinc/drupal-ios-sdk)，然后按照第一个链接上的说明进行操作。

# functional-programming - 如何为树创建联合类型，在 OCaml 中它需要 'a 类型的键和 'b 类型的值？

> ID：15338109
> 
> 赞同：1
> 
> 时间：2013-03-11T12:03:04.637
> 
> 标签：functional-programming, ocaml

我希望创建一个`bst`（二叉搜索树）联合类型。

它是`leaf`或`node`。对于节点，它需要`'a`键和`'b`值。

我这样做了：

```
type 'a*'b bst = 
  | Node of 'a * 'b * ('a*'b) bst * ('a*'b) bst
  | Leaf;; 
```

但它不起作用

**我该怎么做？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:25:01.507

您正在寻找的语法是：

```
# type ('a, 'b) bst =                              
      | Node of 'a * 'b * ('a,'b) bst * ('a,'b) bst
      | Leaf;;                                     
type ('a, 'b) bst = Node of 'a * 'b * ('a, 'b) bst * ('a, 'b) bst | Leaf 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T12:25:27.880

多参数多态类型的语法如下：

```
type ('a, 'b) bst = 
  | Node of 'a * 'b * ('a, 'b) bst * ('a, 'b) bst
  | Leaf;; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:29:14.773

此外，由于`'a`需要比较运算符，您可能会遇到麻烦。这就是为什么在标准库中，`Map`和`Set`模块被实现为函子，以便可以指定比较顺序。

如果您决定采用`'a`多态方式，则必须使用“神奇”的默认比较运算符`compare`。

这个问题在 F# 中有所不同，因为有多种方法可以将比较运算符附加到类型。

# iphone - 将文件添加到谷歌驱动器中的文件夹

> ID：15338110
> 
> 赞同：0
> 
> 时间：2013-03-11T12:03:07.443
> 
> 标签：iphone, ios, google-drive-api

我以编程方式创建了该文件夹，它出现在谷歌驱动器中。现在我想将文件添加到创建的文件夹中。文件正在创建但在根文件夹中。我不希望这种情况发生。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:41:59.447

你`setParent`在创建文件信息的时候吗？它是在请求`ParentReference`中使用的文件信息中添加的。`insert`创建父引用所需的只是父（您创建的文件夹）的 id（可能还有一个标志来说明它是否是根目录）。

# syntax-highlighting - 通过 NSAttributedString 提高 NSTextView 语法高亮的性能

> ID：15338120
> 
> 赞同：3
> 
> 时间：2013-03-11T12:03:36.180
> 
> 标签：syntax-highlighting, nstextview, nsattributedstring, parsekit

我正在为应用程序添加一些语法突出显示。在测试课上，我目前有一个`NSTextView`with`textDidChange`通知。与此类似：

```
-(void)textDidChange:(NSNotification *)notification
{
    [self highlightText];
} 
```

突出显示文本的作用是从`NSTextView`解析中获取字符串并创建一个`NSMutableAttributedString`并最终显示该字符串。代码与此类似：（我使用 ParseKit 进行解析。下面的示例仅突出显示代码注释）。

```
- (void) highlightText
{
    NSMutableAttributedString * resultString = [[NSMutableAttributedString alloc] initWithString: inputTextView.string];

    PKTokenizer *t = [PKTokenizer tokenizerWithString: inputTextView.string];
    [t setTokenizerState: t.quoteState from: '[' to: ']'];

    // We want comments
    t.commentState.reportsCommentTokens = YES;

    [t enumerateTokensUsingBlock: ^(PKToken * token, BOOL * stop)
     {
        // Comments take presidense.
        if(token.isComment)
        {
            [resultString addAttribute: NSForegroundColorAttributeName
                                 value: [self commentColor]
                                 range: NSMakeRange(token.offset, token.stringValue.length)];
        }
     }];

    // Monospace
    [resultString addAttribute: NSFontAttributeName
                         value: [NSFont userFixedPitchFontOfSize:0.0]
                         range: NSMakeRange(0, inputTextView.string.length)];

    [[inputTextView textStorage] setAttributedString: resultString];
} 
```

现在，如果我处理少量文本，这可以正常工作，但我想在处理大量文本时提高其性能。我对这个问题有两个想法：

1.  在后台进行处理。当用户键入时，这意味着文本可能会在几秒钟内未格式化。我真的不喜欢这个主意。
2.  仅对文本的可见部分执行突出显示。在用户滚动时进行更多突出显示。这仍然存在当用户滚动时，文本将未格式化但会慢慢弹出格式化样式的问题。

有人对这方面有什么建议吗？我是否错过了另一种方法来做到这一点，或者这应该可以正常工作吗？有没有人可能知道任何类似/更好的示例代码？我目前正在考虑选择选项#2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:11:41.877

我找到了一些帮助我的资源：

*   [http://cocoadev.com/ImplementSyntaxHighlighting](http://cocoadev.com/ImplementSyntaxHighlighting)
*   [在 Cocoa 中实现源代码语法高亮的最佳方法是什么？](https://stackoverflow.com/questions/754591/what-is-the-best-way-to-implement-syntax-highlighting-of-source-code-in-cocoa)
*   [NSTextView 语法高亮](https://stackoverflow.com/questions/2218415/nstextview-syntax-highlighting)

（更新：损坏的 cocoadev 链接）

# asp.net-web-api - 从另一个 Web API 项目调用 Web API

> ID：15338125
> 
> 赞同：2
> 
> 时间：2013-03-11T12:03:42.807
> 
> 标签：asp.net-web-api

我得到了三个 Web API 项目。

他们部署在

1.  接口：http : [//api.domain.com](http://api.domain.com)
2.  mobileApi：http: [//mobile.api.domain.com](http://mobile.api.domain.com)
3.  logApi：[http ://log.api.domain.com](http://log.api.domain.com)

我想这样做：当其他项目发生错误时，通过调用 logApi 中的控制器记录错误。我已阅读[http://www.asp.net/web-api/overview/web-api-clients/calling-来自网络客户端的网络 API](http://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client)

所以我写了这个类来帮助向 Web API 控制器发送请求

```
public class WebApiRequest
{
    public static T Get<T>(string url, object param = null, object header = null, Func<HttpResponseMessage, T> converter = null)
    {
        HttpClient client = GetClient(header);
        url = UrlHelper.BuildUrl(url, param);
        HttpResponseMessage response = client.GetAsync(url).Result;
        response.EnsureSuccessStatusCode();
        return converter != null ? converter(response) : DefaultConverter<T>(response);
    }

    public static T Post<T>(string url, object param = null, object header = null, Func<HttpResponseMessage, T> converter = null)
    {
        HttpClient client = GetClient(header);
        var content = new FormUrlEncodedContent(
            Tool.AnonymousObjectToDictionary(param).Where(i => i.Value != null).ToDictionary(i => i.Key, i => i.Value.ToString()));
        HttpResponseMessage response = client.PostAsync(url, content).Result;
        response.EnsureSuccessStatusCode();
        return converter != null ? converter(response) : DefaultConverter<T>(response);
    }

    public static T Put<T>(string url, object param = null, object header = null, Func<HttpResponseMessage, T> converter = null)
    {
        HttpClient client = GetClient(header);
        var content = new FormUrlEncodedContent(
            Tool.AnonymousObjectToDictionary(param).Where(i => i.Value != null).ToDictionary(i => i.Key, i => i.Value.ToString()));
        HttpResponseMessage response = client.PutAsync(url, content).Result;
        response.EnsureSuccessStatusCode();
        return converter != null ? converter(response) : DefaultConverter<T>(response);
    }

    public static T Delete<T>(string url, object param = null, object header = null, Func<HttpResponseMessage, T> converter = null)
    {
        HttpClient client = GetClient(header);
        url = UrlHelper.BuildUrl(url, param);
        HttpResponseMessage response = client.DeleteAsync(url).Result;
        response.EnsureSuccessStatusCode();
        return converter != null ? converter(response) : DefaultConverter<T>(response);
    }

    private static T DefaultConverter<T>(HttpResponseMessage response)
    {
        var formatters = new List<MediaTypeFormatter> {
            new JsonMediaTypeFormatter(),
            new XmlMediaTypeFormatter()
        };
        var result = response.Content.ReadAsAsync<T>(formatters).Result;
        return result;
    }

    public static string StringConverter(HttpResponseMessage response)
    {
        return response.Content.ReadAsStringAsync().Result;
    }

    private static HttpClient GetClient(object header)
    {
        HttpClient client = HttpClientFactory.Create(new DecompressionHandler());
        var headers = Tool.AnonymousObjectToDictionary(header);
        foreach (var h in headers.Where(h=>h.Value!=null)) {
            client.DefaultRequestHeaders.Add(h.Key, h.Value.ToString());
        }
        return client;
    }
} 
```

在一个测试项目中，它工作得很好。

但是当我在一个 Web API 项目中使用它时，事情变得很奇怪。

```
 WebApiRequest.Post<ReturnModel<int>>(logUrl, new {
        Source = "{" + source + "}",
        context.Exception.Message,
        context.Exception.StackTrace,
        ExceptionType = context.Exception.GetType().FullName,
        PriorityLevel = 3,
        AddTime = DateTime.Now,
        ProjectType = (short)ProjectType.WebApi,
    }, request.Headers); 
```

代码看起来不错，但实际上 HttpClient 并没有请求我给它的 url！

任何人都可以提供帮助，我很感激，非常感谢。

# php - 调用未定义的函数printer_open()

> ID：15338132
> 
> 赞同：4
> 
> 时间：2013-03-11T12:03:53.693
> 
> 标签：php, printing

我正在尝试通过此代码连接到另一台机器上的打印机

```
 $handle = printer_open("\\\\xxx.xxx.xxx.xxx\\Canon MF4320-4350");
     if($handle)
     echo "connected";
     else
     echo "not connected"; 
```

并得到错误

```
 Fatal error: Call to undefined function printer_open() in C:\wamp\www\print\index.php on line 3 
```

我已经安装了 php_printer.dll 但它没有在`phpinfo()`. 使用 PHP 版本 5.3.0

我怎样才能连接到打印机并使我的`printer_open()`方法工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-11T06:16:19.467

如果您在 WAMP 中使用 PHP 5.3/ 5.4/ 5.5，以下是您设置打印机的方法。

1.  转到此链接： http: [//windows.php.net/downloads/pecl/snaps/printer/0.1.0-dev/](http://windows.php.net/downloads/pecl/snaps/printer/0.1.0-dev/)
2.  下载您的版本的 zip。首先尝试使用 ts。如果它不起作用，请尝试 nts。
3.  解压缩并复制 php_printer.dll 文件。在此处粘贴： C:\wamp\bin\php(phpyourversion)\ext 。注意： (phpyourversion) 将与 php5.5.12 类似，具体取决于您的版本。
4.  找到加载的 php.ini 文件。使用 phpinfo 或 Wamp 菜单找到它。在网上寻找更多帮助。
5.  将此粘贴到文件末尾：extension=php_printer.dll
6.  重启服务器。
7.  使用以下代码创建一个文件并对其进行测试：

    `<?php
    $printer_name = "Your Printer Name exactly as it is"; $handle = printer_open($printer_name); printer_start_doc($handle, "My Document"); printer_start_page($handle); $font = printer_create_font("Arial", 100, 100, 400, false, false, false, 0); printer_select_font($handle, $font); printer_draw_text($handle, 'This sentence should be printed.', 100, 400); printer_delete_font($font); printer_end_page($handle); printer_end_doc($handle); printer_close($handle);`

8.  如果上述方法不起作用，请尝试使用第二步中提到的 php_printer.dll 文件的 nts 版本。记得删除以前的文件后重新启动服务器，粘贴新文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T12:37:38.740

我有一个类似的问题。这是我到目前为止所知道的。

1.  确保您的扩展文件夹 ( php/ext/ ) 中有一个与您的 php 编译版本匹配的 php_printer.dll。使用此[链接](http://likepie.net/2012/php_printer-dll-and-php-5-3-9/)下载文件。

2.  在 php.ini 文件中添加以下内容：

    ```
    printer.default_printer=PHP_INI_ALL
    extension=php_printer.dll 
    ```

错误已消失，但文件仍未打印。

# android - 为什么 Android 应用小部件的布局基于 RemoteViews？

> ID：15338135
> 
> 赞同：1
> 
> 时间：2013-03-11T12:04:10.657
> 
> 标签：android, android-appwidget, remoteview

作为受。为什么app widget的布局不能基于真实布局而不是RemoteViews？

是不是因为更新app widget真实布局的流程和运行AppWidgetProvider的流程不一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:24:18.370

Appwidgets 本身在主屏幕上运行，而不是您的应用程序及其进程的一部分。直接访问它意味着访问系统的其余部分，这在安全方面是一件坏事。这就是 AppWidgets 使用 RemoteViews 的原因。

# conditional - Safari 不应用子页面类

> ID：15338136
> 
> 赞同：1
> 
> 时间：2013-03-10T14:25:16.213
> 
> 标签：conditional, browser

为了在我的网站上为不同的页面设置不同的样式，我有一个 .subpage 类，我将条件应用于不是 index.php 文件的任何页面。条件是这样的：

```
<body{if segment_1} class="subpage"{/if}> 
```

这段代码主要只做一件事。在主页上，我的标题很高，并且有多个背景图片（3）。在子页面上，它是一个较短的标题，并且只使用一个图像。

它在各种浏览器上都可以正常工作，但无论出于何种原因，在我的 ipad 上，它都希望将更高的标题（用于主页的标题）也应用于所有子页面。几乎就好像它不承认条件一样。如果我添加一个！在有条件的情况下，我在其他浏览器上得到完全相同的症状。

有没有其他人看过这个？

我不确定哪些代码对调试有帮助，所以如果您想查看任何内容，请告诉我，我将进行编辑以包含代码。如果您想查看该网站以了解我在说什么，它在这里：

[我的网站](http://s423839726.onlinehome.us/franklinvineyard/index.php)

我不确定这是一个 EE 问题还是只是一个普通的浏览器问题，也许我应该从 stackoverflow 开始，但老实说......这里的人更好而不是居高临下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:53:48.053

这是一个 CSS 特异性问题。添加`background-size:initial`到您的`.subpage`规则集中，使其覆盖在 < 900px 宽的媒体查询中指定的背景大小。

# asp.net-mvc - 我可以将我的 DTO 类公开给 WCF 客户端，还是应该使用自动生成的类？

> ID：15338144
> 
> 赞同：1
> 
> 时间：2013-03-11T12:04:37.317
> 
> 标签：asp.net-mvc, wcf, dto

我目前正在开发一个 N 层应用程序，在 UI 前端使用 MVC4，然后与 WCF 服务对话，然后调用使用 EF 从 Oracle 获取数据的业务层。

我创建了一组从 EF 填充的 DTO 对象，并通过 WCF 服务发送到 UI。我的问题是这个...

当我在 UI 中添加服务引用时，DTO 类在 Reference.cs 中重新创建了服务代码的一部分。这可以吗，还是我应该添加对原始 DTO 类项目的引用？

它是纯粹的开发选择，还是有特定的好处或陷阱或任何一种方法？

任何帮助将非常感激。

谢谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:33:07.093

使用原始合同程序集的一个好处是，当该合同更改时，您的客户端程序集中会出现编译错误。如果您使用生成的客户端，它将编译然后在运行时崩溃。尤其是使用持续集成，您希望尽早发现错误，编译时间非常好。

根据您生成的客户端实现，它可能已经实现了 INotifyPropertyChanged。这可能超出了您的 DTO 所能做的。DTO 不应执行此操作。因此，如果您要在客户端再次重新实现所有 DTO 以使用此接口，您可能会争辩说使用生成的类已经给您带来了好处。

所以最后......这纯粹是一个开发者的选择。

# c++ - 在 C++ 中读取文件时崩溃

> ID：15338147
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:04:41.810
> 
> 标签：c++

我想在文件中搜索特定单词并返回关于该单词是否存在于文件中的结果。我创建了一个执行此操作的函数。但是在返回程序时崩溃了。这是代码：

```
bool FindMyWord(const char *fileName)
{
    ifstream myFile (fileName);
    if(!myFile)
        return false;

    string wordSearch = "MyWord";
    string endSearch = "LastWord";
    bool result;
    while(1)
    {
        char read[20];
        myFile.getline(read, 1000, '\n');
        string line(read, read+20);
        if(line.find(wordSearch) != string::npos)
        {
            result = true;
            break; //comes here after looping about 10 times
        }
        if(line.find(endSearch) != string::npos)
        {
            result = false;
            break;
        }
    }
    myFile.close();
    return result;
} // <- crash when F10 is pressed after this 
```

在VS2010中调试时我发现`return result;`在函数的倒数第二行执行“”后发生崩溃，即当黄色光标用于函数的最后一个右括号时。我收到一条消息

```
A buffer overrun has occurred in myApp.exe which has corrupted the program's internal
state. Press Break to debug the program or Continue to terminate the program. 
```

这是什么错误？我这样调用函数：

```
bool result = FindMyWord("myFileName.stp"); 
```

**更新**：每一行都有不同的字符，它们> 20。我想阅读第一个 20 个字符，如果这些字符中不存在这个词，那么我想跳到下一行。最初我使用`myFile.getline(read, 20, '\n');`但在第一个循环之后，每个后续循环都会导致 NULL 被传递给读取。所以我让它读取 1000 因为在读取 1000 个字符之前它会找到 '\n' 并转到下一行。实现相同目标的更好机制将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:13:24.200

为什么不使用 a`std::string`而不是固定长度的缓冲区？

```
bool FindMyWord(const char *fileName)
{
    std::ifstream myFile (fileName);
    if(!myFile) {
        return false;
    }

    std::string wordSearch = "MyWord";
    std::string endSearch = "LastWord";
    bool result;
    std::string line;
    while(std::getline(myFile, line))
    {
        if(line.find(wordSearch) != std::string::npos)
        {
            result = true;
            break; //comes here after looping about 10 times
        }
        if(line.find(endSearch) != std::string::npos)
        {
            result = false;
            break;
        }
    }
    myFile.close();
    return result;
} 
```

缓冲区溢出导致了太多的安全问题。只是不要使用固定长度的缓冲区！

这也稍微正确一些，因为它会检查流中的错误。

PS我讨厌`using namespace std`！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:07:35.910

`myFile.getline(read, 1000, '\n');`将从 address 开始最多读取 1000 个字节到内存中`read`。 `read`是一个 20 字节的堆栈缓冲区，因此您可能会写超出分配内存的末尾。这样做的影响是不确定的，但很可能会崩溃。

要解决此问题，您应该将`read`缓冲区的大小传递给`getline`;

```
myFile.getline(read, sizeof(read), '\n'); 
```

（请注意，`sizeof(read)`这只适用于堆栈缓冲区。如果`read`在堆上分配，`sizeof`只会告诉您指针的大小而不是它指向的分配内存。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:16:32.593

在您可以使代码正常工作之前，请忘记`char[]`. （正如其他人指出的那样，您有一个缓冲区溢出。将任何 C 样式数组作为局部变量很容易做到。）由于您正在寻找单词，初始代码可以简单如下：

```
std::string word;
while ( myFile >> word && word != "MyWord" && word != "LastWord" ) {
}
return word == "MyWord"; 
```

这当然可以更快，但如果`"LastWord"`不是很远进入文件，它可能没有必要。（顺便说一句：通常没有必要关闭输入中使用的文件。析构函数会处理这个问题，并且由于您已经在每次输入后检查了状态，因此无需担心更多错误检查。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:51:00.240

在上面的代码中，我能想到的一个导致缓冲区溢出的地方是：

myFile.getline(读取, 1000, '\n');

由于“读取”是一个可容纳 20 个字符的缓冲区，因此如果文件的行大于该行，它就无法容纳。

另外，请做eof检查。我会建议这样的事情：

```
 bool FindMyWord(const char *fileName)
{
    if(!myFile)
        return false;

```
ifstream myFile (fileName);

const char* wordSearch = "MyWord";
const char* endSearch  = "LastWord";
bool result = false;
string line;

while(std::getline(myFile, line))
{
    if(line.find(wordSearch, 0, 20) != string::npos)
    {
        result = true;
        break; //comes here after looping about 10 times
    }

    if(line.find(endSearch, 0, 20) != string::npos)
    {
        result = false;
        break;
    }
}

myFile.close();
return result; 
```

} 
```

# configuration - 配置我的 $routeProvider 时是否可以从 $templateCache 获取模板？

> ID：15338150
> 
> 赞同：13
> 
> 时间：2013-03-11T12:04:51.577
> 
> 标签：configuration, angularjs

我的意图是通过一次调用外部 JSON 文件来加载我的 Web 应用程序的所有模板，该文件包含所有模板名称和值的列表。

我目前正在我的应用程序的运行阶段加载这些模板：

```
app.run(function ($http, $templateCache) {
    $http.get('/templates/all.json').success(function (data) {
        var i;
        for (i = 0; i < data.length; i++) {
            $templateCache.put(data[i].name, data[i].template);
        }
    });
}); 
```

但是，Angular.js 配置阶段在运行阶段之前执行，所以当我打算从 templateCache 加载时：

```
app.config(function($routeProvider, $locationProvider) {
    //App routing
    $routeProvider.
        //Homepage
        when('/', {templateUrl: 'home.html'}).

        //My schedule
        when('/my-schedule', {templateUrl: 'my-schedule.html'});
}); 
```

Angular 尝试`home.html`从服务器加载，因为`$templateCache`尚未填充。

假设它`all.json`包含上一个示例的`home.html`模板`my-schedule.html`。

`$templateCache`是否可以在配置应用程序之前填写`$routeProvider`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-17T16:58:14.983

我遇到了同样的问题，经过几个小时的研究后，我意识到我问自己一个错误的问题，因为我想做的不一定**是使用 XHR 加载模板，**而只是**确保它们被缓存并存储在一个文件**。

我有一项繁重的任务，将我所有的 JADE 模板编译为 HTML 并将它们包装在一个大的角度模块中，该模块作为一个名为 templates.js 的单独 JS 文件加载。**所有这些事情都是在后台自动完成的，所以在你花 10 分钟配置它之后，你实际上可以忘记猴子的工作，专注于代码/标记。**

（为简洁起见，我将在这里跳过 JADE 部分）

1.  编辑html文件
2.  grunt-contrib-watch 任务：
    1.  抓住变化
    2.  生成启用了 $templateCache 的角度模块
3.  我的网站已重新加载（使用 liveReload）

## 这就是我使用 Grunt.js / JADE 和 html2js 解决问题的方式：

### 我的 index.jade 文件的头部

```
 script(src='js/modernizr.js')
  script(src='js/vendor.js')
  script(src='js/templates.js')
  script(src='js/app.js') 
```

### 主应用程序模块的开始（这里使用 CoffeeScript）

```
'use strict'
# Declare app level module which depends on filters, and services
App = angular.module('app', [ 
  'templates' // just include the module and forget it
  'foo'
  'bar']).config(...) 
```

### GruntFile.json（grunt.js 配置）

我需要删除大约 80% 的代码，只留下与模板相关的任务，认为它只是一个草稿。

```
module.exports = (grunt)->
  imports = grunt.file.readJSON 'app/imports.json'
  grunt.initConfig
    pkg: grunt.file.readJSON 'package.json'

    watch:
      options:
        livereload: yes

      templates:
        files: 'app/**/*.jade'
        tasks: ['buildTemplates']

    jade:
      default:
        options:
          client: no
          wrap: no
          basePath: 'app/'
          pretty: yes
        files:
          'public/': ['app/**/*.jade']

    html2js:
      options:
        module: 'templates'
        base: 'public/'

      main:
        src: 'public/partials/**/*.html'
        dest: 'public/js/templates.js'

    connect:
      server:
        options:
          port: 8081
          base: 'public'
          keepalive: yes

      livereload:
        options:
          port: 8081
          base: 'public'
          # middleware: (connect, options)-> [lrSnippet, folderMount(connect, options.base)]

    copy:
      assets:
        files:[
          src:['**'], dest:'public/', cwd:'assets/', expand: yes
        ]

  grunt.loadNpmTasks 'grunt-contrib-concat'
  grunt.loadNpmTasks 'grunt-contrib-copy'
  grunt.loadNpmTasks 'grunt-contrib-coffee'
  grunt.loadNpmTasks 'grunt-contrib-clean'
  grunt.loadNpmTasks 'grunt-contrib-connect'
  grunt.loadNpmTasks 'grunt-contrib-compass'
  grunt.loadNpmTasks 'grunt-contrib-watch'
  grunt.loadNpmTasks 'grunt-contrib-livereload'
  grunt.loadNpmTasks 'grunt-jade'
  grunt.loadNpmTasks 'grunt-html2js'

  grunt.registerTask 'buildTemplates', ['clean:templates', 'copy:assets', 'jade', 'html2js:main', 'livereload']

  grunt.registerTask 'default', [ 'connect:livereload', 'watch'] 
```

### 结果

单个 .js 文件，其中包含包含在与此类似的角度模块中的所有应用程序模板的列表：

```
angular.module("partials/directives/back-btn.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("partials/directives/back-btn.html",
    "<a ng-href=\"{{href}}\" class=\"page-title-bar__back\"> <i class=\"icon-chevron-left\"> </i></a>");
}]); 
```

## 链接

1.  [咕噜声](http://gruntjs.com/)
2.  [grunt html2js 插件](http://gruntjs.com/plugins/html2js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-12T15:29:38.907

[这个小提琴](http://jsfiddle.net/pkozlowski_opensource/qSBHE/2/)是你需要的。

基本上 - 您可以将`$templateCache`键`templateUrl:`放在配置中的属性值中`$routeProvider`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-12T16:57:52.340

如果你使用 HTTP 拦截器，你可以在`$templateCache`那里注入：

```
 $provide.factory('myHttpInterceptor', ['$templateCache', function($templateCache) {
        return {
            request: function(config) {
                // do fancy things with $templateCache here
                return config;
            }
        };
    }]); 
```

# javascript - 调用 setTimeout 执行的函数是什么？

> ID：15338156
> 
> 赞同：1
> 
> 时间：2013-03-11T12:05:01.060
> 
> 标签：javascript, asynchronous, settimeout, naming, deferred

我目前使用以下函数在事件循环中对函数调用进行排队：

```
Function.prototype.async = function () {
    setTimeout.bind(null, this, 0).apply(null, arguments);
}; 
```

这使我可以编写如下代码：

```
alert.async("This will be displayed later.");
alert("This will be displayed first."); 
```

现在我打算将此函数包含在我正在编写的库中。但是，该名称`async`似乎对该功能的描述不准确。从技术上讲，该函数不是异步执行的。

所以我的问题是，如果执行的函数`setTimeout`不是异步的，那它是什么？你会如何描述它？

我相信`defer`会是一个更合适的名字，但我不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:08:56.173

ECMAscript 代码在所谓的*UI 线程*中执行，该线程在任何浏览器实现中运行。基本上，所有*UI 更新*和*Javascript 代码块*都在该线程内共享（这也是长时间运行 Javascript 代码会挂起浏览器 UI 的原因）。

但是，`setTimeout`所做的只是将您的*函数***插入**到该*UI 线程*中。这反过来意味着，不能保证您的代码实际上会在*xxx 毫秒*内执行，只是它会被推入队列。如果其他进程仍在运行或浏览器在线程中忙碌，则在处理完其他任何内容之前它不会被执行。

 ***我怎么称呼它？

*“推迟执行 ECMAscript 代码”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:09:24.720

它在第一次调用结束后执行（背靠背），

并使用`set-timeout`, 绑定在第一个事件结束后开始。

所以它是同步的（加入/流入），

我希望我在这里有意义:)***

# html - 块元素（表格）中的 CSS 定位文本节点

> ID：15338158
> 
> 赞同：-2
> 
> 时间：2013-03-11T12:05:03.073
> 
> 标签：html, css, html-table

我正在寻找块元素垂直顶部的文本节点的解决方案。我正在使用带有行跨度的 td，这使得 td 内的文本在垂直中心居中。

这就是它的样子

```
<table>
  <tr>
    <td rowspan="2">to but in vertical top</td>
    <td>s0me</td>
  </tr>
  <tr>
    <td>t3xt</td>
  </tr>
</table> 
```

由于某些原因，我不想使用

```
<td>nbsp;</td> 
```

在第二行。

//编辑：

-.- 在谷歌再多 1 分钟给了我这个：

```
<td rowspan="2" style="vertical-align:text-top;">text</td> 
```

效果很好。抱歉不必要的帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:10:25.167

您可以[`vertical-align`](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)在表格单元格上使用属性。

请参阅此处的示例：http: [//jsfiddle.net/TgLUK/](http://jsfiddle.net/TgLUK/)

就像使用 CSS 选择器（或应用样式标签）选择表格一样简单，它定义了：

```
vertical-align: top; 
```

喜欢：

```
td.topped
{
    vertical-align: top;
} 
```

# git - 在 Windows XP 中创建本地 git 服务器

> ID：15338161
> 
> 赞同：0
> 
> 时间：2013-03-11T12:05:12.537
> 
> 标签：git, version-control, windows-xp

我需要为我目前正在进行的项目实施版本控制。

我有一个 Windows XP SP2 VM，我应该在其中设置服务器，另一台 Windows XP 机器可以访问它。

我的问题是，我如何设置服务器？

我知道“最好的”选择实际上是放弃服务器的 XP，只在虚拟机上安装 Linux 并运行 gitolite 或类似的东西，但由于发生这种情况的可能性极低，我在这里有什么选择？

由于不支持 XP，Gitstack 对我失败了（根据他们的页面。启动 gitstack 时出现 DLL 错误）。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:14:52.453

你应该看看[GitStack](http://gitstack.com/)。

# asp.net-mvc - 全局访问 Ninject 内核

> ID：15338162
> 
> 赞同：20
> 
> 时间：2013-03-11T12:05:26.420
> 
> 标签：asp.net-mvc, ninject

这个问题与 Ninject 没有特别的关系。这更像是一个一般性的编码问题，但我将其发布在这里，以防万一在 Ninject 中可能有更好的方法来处理这个问题，而不是我正在尝试做的事情。

我想知道是否可以从 Global.asax 中的实例全局访问 Ninject 标准内核。

这是代码：

```
public class MvcApplication : NinjectHttpApplication
{
    protected override void OnApplicationStarted()
    {
        base.OnApplicationStarted();

        // MVC global registration, routing and filtering code goes here...
    }

    protected override IKernel CreateKernel()
    {
        return Container;
    }

    private static IKernel Container
    {
        get
        {
            IKernel kernel = new StandardKernel();
            kernel.Load(new ServiceModule(), new RepositoryModule());
            return kernel;
        }
    }
} 
```

如果我有一些类，例如不与控制器接口的外观类，我想在其中开始依赖链，我的理解是我应该使用：

```
_className = kernel.Get<IClassName>(); 
```

但是，我知道的唯一方法是创建 Ninject 标准内核的新实例，但如果我理解正确，创建 Ninject 内核的新实例并不是一个好主意，因为这基本上是创建第二个内核。

那么，是否可以从我的应用程序中的任何位置访问在应用程序启动时在 Global.asax 中实例化的现有内核，或者是否有更好的方法完全做到这一点？

问候，

弗雷德城堡

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-25T08:58:16.883

最简单的方法（IMO）：

```
_className = (IClassName)System.Web.Mvc.DependencyResolver.Current.GetService(typeof(IClassName)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-10-12T15:23:15.463

如果与 System.Web.MVC 一起使用，较新版本的 Ninject 具有此方法：

```
var obj = DependencyResolver.Current.GetService<IClassName>(); 
```

除非您需要动态操作 DI 绑定，否则实例化 StandardKernel 有点繁重。

```
IKernel kernel = new StandardKernel();
var obj = DependencyResolver.Current.GetService<IClassName>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T20:05:06.930

我设法让服务定位器工作，它似乎工作得很好。当请求通过 MVC 控制器操作方法进入应用程序时，Ninject 以 Ninject.Mvc.Extensions 提供的正常方式运行。它通过控制器构造函数注入实例类。当请求以任何其他方式进入应用程序时，我调用服务定位器以提供该类构造函数中的实例类。

这是代码：

首先，对 Microsoft.Practices.ServiceLocation 的引用

以及下面的 Ninject 适配器类。

```
public class NinjectServiceLocator : ServiceLocatorImplBase
{
    public IKernel Kernel { get; private set; }

    public NinjectServiceLocator(IKernel kernel)
    {
        Kernel = kernel;
    }

    protected override object DoGetInstance(Type serviceType, string key)
    {
        return Kernel.Get(serviceType, key);
    }

    protected override IEnumerable<object> DoGetAllInstances(Type serviceType)
    {
        return Kernel.GetAll(serviceType);
    }
} 
```

在 Global.asax

```
public class MvcApplication : NinjectHttpApplication
{
    private static IKernel _kernel;

    protected override IKernel CreateKernel()
    {
        return Container;
    }

    private static IKernel Container
    {
        get
        {
            if (_kernel == null)
            {
                _kernel = new StandardKernel();
                _kernel.Load(new ServiceModule(), new RepositoryModule());

                ServiceLocator.SetLocatorProvider(() => new NinjectServiceLocator(_kernel));
            }

            return _kernel;
        }
    }
} 
```

请注意，此代码需要使用 Ninject.Mvc.Extensions，它提供依赖解析器回退到默认控制器。否则，可能需要自定义依赖解析器。

这似乎解决了我所有的担忧。它创建实例类，解析整个对象图，并在我需要它工作的任何地方工作。而且，据我所知，每个应用程序只有一个 Ninject 标准内核。

我知道使用服务定位器模式不受欢迎，但我想使用多个 Ninject 内核会不受欢迎，甚至更糟。

弗雷德城堡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:20:08.300

听起来您需要更多 Ninject 的工厂模式实现。您可以将内核从 Global.asax 迁移到 Factory 类，该类可以与应用程序的其余部分进行交互。

或者，如果您遇到在运行时指定的参数用于确定接口绑定的情况，您可以包装服务。这是 DI 和 ServiceLocater 的混合设置，但 ServiceLocater 仅发生在服务级别实例化，所有其他层通常以 DI/IOC 模式编码。

```
MyService : IService1
{
    public void DoSomething(MyCustomParameter parameter)
    {
        //Builds the Kernel using the supplied parameter
        //We've in our resolver bound IService1 To MyActualService
        var trueService = kernel.Get<IService1>();
        return trueService.DoSomething(parameter);
    }
}

MyActualService : IService1
{
    public void DoSomething()
    {
        //Do the Actual work
    }
} 
```

# wcf - 服务具有零个应用程序（非基础设施）端点

> ID：15338163
> 
> 赞同：1
> 
> 时间：2013-03-11T12:05:26.917
> 
> 标签：wcf, windows-hosting

**我知道还有其他具有相同标题的问题。我尝试了他们的解决方案无济于事**。

在使用`installutil`.
我没有经验`WCF`，请耐心等待。

我的服务应用程序由两个项目组成：Externals，其中有我的服务接口、客户端接口、数据协定和 app.config，以及 Internals，其中包含服务实现（即主机，实际实现在另一个文件中完成它不是从我的服务接口继承的，我不确定这是否是一个好习惯）。
我的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="Internals.ExecutionService" behaviorConfiguration="Default">
        <endpoint name="TCPEndpoint" 
                  address="net.tcp://localhost:8080/ExecutionService" 
                  binding ="netTcpBinding" 
                  contract="Externals.IExecutionService"/>
        <endpoint address="mex" 
                  binding="mexTcpBinding" 
                  contract="IMetadataExhange"/>
        <host>
          <baseAddresses>
            <add baseAddress="netTcp://localhost:8080/ExecutionService"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

我的界面：

```
using System.ServiceModel;

namespace Externals
{
    [ServiceContract(CallbackContract = typeof(IClientCallback))]
    public interface IExecutionService
    {
        /// <summary>
        /// Executes the mainflow.py file in the provided location.
        /// </summary>
        /// <param name="path">Path to the Python file.</param>
        /// <returns>Execution status. Expected to return Passed/Failed onlt.</returns>
        [OperationContract]
        ExecutionStatus Execute(string path);

        [OperationContract]
        ExecutionStatus GetStatus();
    }
} 
```

和实现（实际上还没有准备好，我只是想看看我是否可以让客户添加服务参考）：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, IncludeExceptionDetailInFaults = true, ConcurrencyMode = ConcurrencyMode.Multiple, UseSynchronizationContext = false)]
    public partial class ExecutionService : ServiceBase, IExecutionService
    {
        ServiceHost myHost;
        private IClientCallback callbackChannel;

        public ExecutionService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            myHost = new ServiceHost(typeof(ExecutionService));
            myHost.Open();
        }
} 
```

以及接口的空实现。

完整的错误：

```
Service cannot be started. System.InvalidOperationException: Service 'Internals.ExecutionService' has zero application (non-infrastructure) endpoints. This might be because no configuration file was found for your application, or because no service element matching the service name could be found in the configuration file, or because no endpoints were defined in the service element.
   at System.ServiceModel.Description.DispatcherBuilder.EnsureThereAreApplicationEndpoints(ServiceDescription description)
   at System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription description, ServiceHostBase serviceHost)
   at System.ServiceModel.ServiceHostBase.InitializeRuntime()
   at System.ServiceModel.ServiceHostBase.OnBeginOpen()
   at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open()
   at Internals.ExecutionService.OnStart(String[] args) in C:\Users... 
```

取自事件查看器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T16:35:54.773

您的 app.config 应该是内部的，而不是外部的。将其重命名为 Internals.exe.config（或任何您的“内部”exe 名称）并将其放在与您的服务 exe 相同的目录中。

# c# - 代码分析规则 CA1040：避免空接口，抱怨非空接口

> ID：15338168
> 
> 赞同：5
> 
> 时间：2013-03-11T12:05:48.820
> 
> 标签：c#, visual-studio, code-analysis, fxcop

我有一个声明事件的接口

```
interface IMyInterface
{
event SomeHandler MyEvent1;
event SomeHandler MyEvent2;
...
} 
```

但是当我启用代码分析规则*CA1040: Avoid empty interfaces*时，它抱怨我的接口违反了这个规则，有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:12:32.347

~~它抱怨的原因是因为*这个*接口不需要任何实现。您不能以任何特定方式实现事件声明。~~

正如马修建议的那样，压制它。你可能需要在你的类的顶部添加这个：

```
#define CODE_ANALYSIS 
```

或者抑制被忽略。

**编辑**

毕竟这可能是一个错误，因为实际上需要任何继承接口的类来“实现”它 - 因此：它*不是*一个空接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:12:28.057

见这篇文章。它描述了如何使用`SuppressMessageAttribute`. Visual Studio 提供了一个方便的菜单来添加这个属性：http: [//msdn.microsoft.com/en-us/library/ms182069.aspx](http://msdn.microsoft.com/en-us/library/ms182069.aspx)

# append - 将 2 个文件与子目录中的其他文件连接起来的批处理文件

> ID：15338169
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:05:53.377
> 
> 标签：append, text-files, batch-processing

在一个目录中，我有 2 个文件： content1.txt 和 content2.txt

我在目录中也有2个子目录：输入和输出

“输入”子目录包含许多文本文件。

“输出”子目录为空。

我想要的是一个批处理文件，它将从“输入”子目录中获取每个文件，一次一个，然后创建一个包含 content1.txt + inputfile#1 + content2.txt 的新文件，并放置该新文件在 'output' 子目录中，并将其命名为 inputfile#1，然后创建一个包含 content1.txt + inputfile#2 + content2.txt 的新文件，并将该新文件放在 'output' 子目录中，并将其命名为与 inputfile#2 相同的名称，然后对 inputfile#3 等执行相同的操作，并在处理完“输入”子目录中的最后一个文件时停止。

在此先感谢您的帮助。

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:44:06.173

或者，如果这样做太难，另一种方法是将所有内容都放在同一个目录中，并附加一个文本文件“filelist.txt”，其中列出了要添加到 content1.txt 和 content2.txt 的每个文件的名称，一个每行的文件名。

# ruby-on-rails - minitest路由测试htpp:200错误

> ID：15338171
> 
> 赞同：1
> 
> 时间：2013-03-11T12:05:58.217
> 
> 标签：ruby-on-rails, ruby, testing, minitest

我使用 minitest 作为测试框架。

```
**routes.rb file**
Cultiva::Application.routes.draw do
  root :to => 'welcome#index'

  match "sign-up" => "identities#new", :as => :signup, method: :get
  match "sign-up" => redirect("auth/identity/register"), :as => :signup, method: :post
  match "sign-off" => "session#destroy", :as => :signoff
  resources :identities 
```

路由文件如上。我为上面的获取和发布过程设置了注册页面路由。当它发布时，它会重定向到“auth/identity/register”页面。我将页面的发布地址设置为“auth/identity/register”。我死记硬背下面的测试：

```
 it "must route to auth/identity/register when method is post" do
          post(signup_path).must_equal "/auth/identity/register"
      end

when i run this test, it gives error:

test_0002_must route to auth/identity/register when method is post(Route Integration Test::signup_path) [/home/developer/Projects/Bilsa/cultiva/test/routes/route_test.rb:13]:
Expected: "/auth/identity/register"
  Actual: 200 
```

# django - 从 models.py 中的 ManyToMany 字段中访问一个元素以构造 get_absolute_url

> ID：15338175
> 
> 赞同：0
> 
> 时间：2013-03-11T12:06:10.073
> 
> 标签：django, url, many-to-many, models

我的models.py中有这个：

```
 def get_absolute_url(self):
         return "/subject/%s/graphs/%s/" % (self.subject, self.slug) 
```

其中 subject 和 slug 相应地是：

```
subject = models.ManyToManyField(Subject)
slug = models.SlugField(max_length=120, unique=True) 
```

而且我知道我在`get_absolute_url()`函数中的方法是错误的，并返回了*Subject*对象的列表。

我只想访问一个元素（不管是哪个元素），这样我就可以构造图形的 url，但我不知道该怎么做。我已经尝试了几件事，但它们不起作用。

**更新：**

得到了解决方案：

```
def get_absolute_url(self):
         for e in self.subject.all():
             return "/subject/%s/graphs/%s/" % (e.url_id, self.slug) 
```

它是这样工作的。没有必要检查是否有主题，因为总会有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:16:20.667

您的`ManyToMany`字段是一个返回`QuerySet`多个对象的关系，因此您需要从该查询集中选择一个对象来构建您的 URL。您可以通过多种方式做到这一点。

例如，如果您的主题模型有一个日期字段，您可以返回[主题`latest`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#latest)：

```
return "/subject/%s/graphs/%s/" % (self.subject.all().latest("my_date_field"), self.slug) 
```

或者，您可以尝试获取查询集的第一个主题：

```
return "/subject/%s/graphs/%s/" % (self.subject.all()[0], self.slug) 
```

查看[QuerySet API](https://docs.djangoproject.com/en/dev/ref/models/querysets/)以了解最适合您的方法。

您还应该记住，`get_absolute_url`如果没有与您的模型关联的 Subject 对象，您的方法可能会抛出异常，因此您应该这样做：

```
def get_absolute_url(self):
    try:
        return "/subject..."
    except:
        return "/another-url/" 
```

# php - 如何根据最新 id 1 的反向时间顺序保持数据库表 id 更新

> ID：15338177
> 
> 赞同：0
> 
> 时间：2013-03-11T12:06:13.720
> 
> 标签：php, mysql

M 在 mysql 上工作，我必须按时间倒序打印表中的数据。此外，我希望打印在顶部的名称在屏幕和数据库中都应具有 id 1。即它随着条目数量的增加而更新的时间。我使用了以下代码，但没有帮助：

```
$query = "SELECT * FROM table ORDER BY date DESC";
$count=1;

while ($row=mysql_fetch_array($result)) {
    $temp = $row['added_name'];
    $query = "UPDATE table SET id = '$count'";
    mysql_query($query,$conn);
    echo "<tr>
            <td>".$row['id']."</td>
            <td>".$row['added_name']."</td>
            <td>".$row['date']."</td>
          </tr>";
    $count++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:33:56.470

我会告诉你如何做到这一点，但我向你保证，你真的不想这样做。正如 Husman 所说，您应该只显示一个 1，但让它链接到真实的数据库记录 ID 号。

无论如何，如果您决定忽略好建议，您会这样做：

在插入新记录之前，运行查询：

```
UPDATE table SET id = id+1 ORDER BY id DESC 
```

然后插入 id 为 1 的新记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:37:11.793

由于您没有明确说明发生了什么以及出了什么问题，我只能猜测。我看到的是您错误地更新了数据库项目的 ID。

注意：

```
$query = "UPDATE table SET id = '$count'"; 
```

您正在告诉数据库更新表并将 ALL 设置`id`为`$count`。这样，每次运行时，所有 ID 都会更改为相同的值。您想添加一个`where`语句，因此您只更新当前项目，如下所示：

```
$query = "UPDATE table SET id = '$count' WHERE added_name = '$temp'"; 
```

或者

```
$query = "UPDATE table SET id = '$count' WHERE date = '{$row['date']}'"; 
```

我使用了代码中给出的变量。您可以使用该项目独有的任何其他值或构建更大的`where`语句。

# iphone - 解析时跳过 XML 的一些内容

> ID：15338178
> 
> 赞同：1
> 
> 时间：2013-03-11T12:06:16.013
> 
> 标签：iphone, ios, xml-parsing, nsxmlparser

嗨，我有一个 XMl 响应字符串，其中包含很多无用的元素，但正如我们所知，NSXMLParser 的设计方式是它访问每个元素，这个过程真的让我的速度变慢了。有什么方法可以跳过某些元素。下面是我的 XML 字符串，我想跳过**xs:schema**元素。

```
<DataSet xmlns="http://www.sample.com/researchportal/">
<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="Table1">
<xs:complexType>
<xs:sequence>
<xs:element name="state" type="xs:string" minOccurs="0"/>
<xs:element name="userid" type="xs:string" minOccurs="0"/>
<xs:element name="message" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema>
<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
<NewDataSet xmlns="">
<Table1 diffgr:id="Table11" msdata:rowOrder="0" diffgr:hasChanges="inserted">
<state>True</state>
<userid>16</userid>
<message/>
</Table1>
</NewDataSet>
</diffgr:diffgram>
</DataSet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:19:15.673

我发现一种方法可能不是最好的方法，但有些方法可以让我快速解析。

```
NSData * fileData = [[NSData alloc] initWithContentsOfURL:url];
xmlParser  = [[NSXMLParser alloc] initWithData:[self removeElements:fileData]];
[xmlParser setDelegate:objUtil];
success = [xmlParser parse]; 
```

我已经创建了一个方法`removeElements:fileData`，它接受 NSData 并返回相同的结果，并具有所需的结果（bY 修剪 xml 字符串）。

```
- (NSData*) removeElements :(NSData*)data
{
NSMutableString * strFromData = [[NSMutableString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSRange startRange = [strFromData rangeOfString:@"<xs:schema"];
NSRange endRange = [strFromData rangeOfString:@"<diffgr"];
[strFromData replaceCharactersInRange: NSMakeRange(startRange.location,endRange.location - startRange.location) withString: @""];
NSLog(@"%@",strFromData);
NSData *retData = [strFromData dataUsingEncoding:NSUTF8StringEncoding];
return retData;
} 
```

感谢所有在忙碌的工作中抽出时间帮助我的朋友:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:21:00.260

它可能不是您正在寻找的最佳解决方案，但是如果它可以帮助您，我将编写它

您可以将字符串声明为常量，例如

```
static NSString *kItem1 = @"ItemToMatch"; 
```

在 didStart 和 didEnd 函数中，可以使用常量进行比较，例如：

```
if ([elementName isEqualToString:kItem1]) {} 
```

它将减少解析过程中创建的对象数量，希望对您有所帮助！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:33:46.117

尝试使用iOS 的[TBXML](http://www.tbxml.co.uk/TBXML/TBXML_Free.html)解析库。这是一个易于使用的 DOM Parser。

您可以在此处找到解析器比较：[Ray Wenderlich 博客](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

# cakephp - CakePHP 数据类型关联

> ID：15338184
> 
> 赞同：0
> 
> 时间：2013-03-11T12:06:49.573
> 
> 标签：cakephp

我在玩 CakePHP。我注意到当我在数据库中选择不同的字段类型时，例如“datetime”、“varchar”或“tinyint”，蛋糕会自动解释该字段，例如：

```
varchar = text
tinyint = checkbox
datetime = date select field 
```

是否有任何来源可以找到用于数据库中哪种数据类型的字段类型列表？我用谷歌搜索了好几次，但似乎找不到正确的描述。

还有什么困扰着我 - 是否有一个简化的字段来创建上传字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:11:55.217

该任务由[FormHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-form-elements)完成。至于上传，有[file](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3afile)方法。*（不确定您是否已经知道并正在寻找替代品。）*

# xml - XSD 使用特定属性限制元素的出现

> ID：15338186
> 
> 赞同：0
> 
> 时间：2013-03-11T12:06:52.743
> 
> 标签：xml, xsd, xsd-1.1

我尝试为可以由不同类型的条目组成的选择定义一个复杂类型，但只允许一个条目具有“多选”属性。

这是我尝试过的：

```
<element name="selection" minOccurs="0" maxOccurs="unbounded">
  <complexType>
    <sequence>
      <element name="name" type="string" />
      <element name="source">
        <complexType>
          <choice>
            <element name="item" minOccurs="1" maxOccurs="unbounded" type="string" />
            <element name="path" type="string" minOccurs="1" maxOccurs="1" />
          </choice>
        </complexType>  
      </element>
    </sequence>
    <attribute name="multiselection" type="boolean" minOccurs="1" maxOccurs="1" />
  </complexType>
</element> 
```

结果应该是可以有更多的“选择”元素，无论源是“项目”类型还是“路径”类型都无关紧要。但只允许“选择”元素之一具有属性 multiselection = true。

但似乎属性没有 min-/maxOccures。我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:10:48.017

首先，min/maxOccurs 是为粒子保留的（局部元素、元素引用、组引用、序列、选择）。属性出现由

[使用 = (可选 | 禁止 | 必需)](http://www.w3.org/TR/xmlschema-1/#declare-attribute) - 默认值是可选的

为了在一组元素中进一步限制这一点，只有一个元素的属性可以指定为 true 的逻辑值（要么是 1 要么是文字`true`）——这是你不能单独使用 XSD 1.0 做的事情。您可以在 XSD 之上使用 Schematron。

或者，您可以在 XSD 1.1 中轻松实现此目的。

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="sample">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="selection" minOccurs="0" maxOccurs="unbounded">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="name" type="xsd:string"/>
                            <xsd:element name="source">
                                <xsd:complexType>
                                    <xsd:choice>
                                        <xsd:element name="item" minOccurs="1" maxOccurs="unbounded" type="xsd:string"/>
                                        <xsd:element name="path" type="xsd:string" minOccurs="1" maxOccurs="1"/>
                                    </xsd:choice>
                                </xsd:complexType>
                            </xsd:element>
                        </xsd:sequence>
                        <xsd:attribute name="multiselection" type="xsd:boolean" use="required"/>                        
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
            <xsd:assert test="count(selection[@multiselection=true()])=1"/>         
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

沿着这些路线的东西（两者都为假或两者都将无法通过验证）：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<sample xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <selection multiselection="false">
        <name>name1</name>
        <source>
            <item>item1</item>
            <item>item1</item>
        </source>
    </selection>
    <selection multiselection="false">
        <name>name1</name>
        <source>
            <item>item1</item>
            <item>item1</item>
        </source>
    </selection>
</sample>

cvc-assertion.3.13.4.1: Assertion evaluation ('count(selection[@multiselection=true()])=1') for element 'sample' with type '#anonymous' did not succeed. 
```

制作其中之一`true`应该会产生成功的验证。

# jquery - jQuery隐藏功能无法正常工作

> ID：15338191
> 
> 赞同：0
> 
> 时间：2013-03-11T12:07:27.993
> 
> 标签：jquery

这是我的PHP代码。在此，我正在创建一个表并通过从数据库中提取数据来填充数据。我正在打印两行。在第二个表格行中，我写了“Hello There”。我对 .hide() 函数的理解使我相信它应该隐藏在页面显示上。但它不是这样发生的吗？

```
<table>
    <thead>
        <tr>
            <th>All Courses</th>
            <th>Center</th>
            <th>Batch</th>
            <th>Click for Info</th>
        </tr>
    </thead>
    <tbody>
              <?php 
                if($batch_query != null){
                  $i = 0;  
                  foreach($batch_query->result_array() as $row){
                    $val = "'".$row['course_id'].",".$row['center_id'].",".$row['batch_id']."'";
                    echo "<tr>";
                      echo "<td>".$row['course_name']."</td>";
                      echo "<td>"."<button id= \"btn_number_$i\"  class='btn info toggler' >Info   <i class='icon-arrow-down'></i></button>"."</td>";
                    echo "</tr>";
                    echo "<tr class='info_row'>Hello There!!</tr>";
                    $i++;
                  }
               } 
```

在代码中，我创建了两行，最初我想使用 jQuery hide 方法将第二行的显示属性设置为无。

这是我在同一页面上的脚本标记之间的 jQuery 代码：

```
 $(function(){
    console.log('Hello World!!');// Just to test whether the code is being reached or not.  
    $('.info_row').hide();  
   }); 
```

但是这个 hide() 函数似乎不起作用。整个字符串“Hello there”保留在页面上。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:09:38.110

尝试这个

```
$(".tableClass table tr").eq(1).hide(); 
```

你需要`<td>`有`<tr>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:09:57.700

你的 html 是无效的..错过`<td>`了`<tr>`

它应该是

```
 echo "<tr class='info_row'><td>Hello There!!</td></tr>";
                         //--^^-here 
```

# ruby - 解析文件夹中的所有文本文件，保存正则表达式搜索周围的文本

> ID：15338195
> 
> 赞同：0
> 
> 时间：2013-03-11T12:07:35.190
> 
> 标签：ruby

我正在尝试编写一个代码来遍历目录中的所有文本文件，在搜索某些正则表达式的出现时解析它们，并保存前后 20 个左右的单词。

我使用 dir.glob 选择所有 .txt 文件，然后想为所有这些文本文件循环一个代码（每个都做），使用正则表达式来搜索一个单词的出现 (line.match?File.find_all? 和然后将单词及其周围的选择打印到基本文件中。

我试图把这一切都拼凑起来，但我不相信我已经走得太远，也没有走得更远。任何帮助深表感谢。

这就是我所拥有的：

```
 Dir::mkdir("summaries") unless File.exists?("summaries")
    Dir.chdir("summaries")
    all_text_files = Dir.glob("*.txt")

    all_text_files.each do |textfile|
        puts "currently summarizing " + textfile + "..."
        File.readlines(#{textfile}, "r").each do |line|
            if line.match /trail/ #does line.match work?
            if line =~ /trail/ #would this work?
                return true
                #save line to base textfile while referencing name of searchfile
            end
        end
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:05:08.743

下面的代码将遍历目录中的每个 .txt 文件，并将您决定使用的任何正则表达式的所有出现`base.txt`以及找到它的文件的名称打印到文件中。我选择使用`scan`另一种正则表达式的方法可用的方法将返回匹配结果的数组。有关扫描的 ruby​​doc，请参见[此处](http://ruby-doc.org/core-2.0/String.html#method-i-scan)。如果您只希望每个文件中出现一次，您也可以更改代码。

```
##
# This method takes a string, int and string as an argument.
# The method will return the indices that are padded on either side
# of the passed in index by 20 (in our case) but not padded by more
# then the size of the passed in text. The word parameter is used to
# decide the top index as we do not want to include the word in our
# padding calculation. 
#
# = Example
#
#  indices("hello bob how are you?", 5, "bob") 
#      # => [0, 13] since the text length is less than 40
#
#  indices("this is a string of text that is long enough for a good example", 31, "is")
#      # => [11, 53] The extra 2 account for the length of the word 'is'.
#    
    def indices text, index, word
    #here's where you get the text from around the word you are interested in.
    #I have set the padding to 20 but you can change that as you see fit.
    padding = 20
    #Here we are getting the lowest point at which we can retrieve a substring.
    #We don't want to try and get an index before the beginning of our string.
    bottom_i = index - padding < 0 ? 0 : index - padding

    #Same concept as bottom except at the top end of the string.
    top_i = index + word.length + padding > text.length ? text.length : index + word.length + padding
    return bottom_i, top_i
end

#Script start.
base_text = File.open("base.txt", 'w')
Dir::mkdir("summaries") unless File.exists?("summaries")
Dir.chdir("summaries")

Dir.glob("*.txt").each do |textfile|
    whole_file = File.open(textfile, 'r').read
    puts "Currently summarizing " + textfile + "..."
    #This is a placeholder for the 'current' index we are looking at.
    curr_i = 0
    str = nil
    #This will go through the entire file and find each occurance of the specified regex. 
    whole_file.scan(/trail/).each do |match|
      #This is the index of the matching string looking from the curr_i index onward.
      #We do this so that we don't find and report things twice.
      if i_match = whole_file.index(match, curr_i)
        top_bottom = indices(whole_file, i_match, match)
        base_text.puts(whole_file[top_bottom[0]..top_bottom[1]] + " : " + File.path(textfile))
        #We set our current index to be the index at which we found the match so when
        #we ask for the matching index from curr_i onward, we don't get the same index
        #again.
        curr_i += i_match         
        #If you only want one occurrance break here            
      end
    end
    puts "Done summarizing " + textfile + "."
end
base_text.close 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:44:22.930

你的代码看起来很草率。它充满了错误。以下是一些（可能还有更多）：

你在`+`这里缺少一个：

```
puts "currently summarizing " textfile + "..." 
```

它应该是：

```
puts "currently summarizing " + textfile + "..." 
```

您只能`#{}`在双引号内使用，所以不要使用：

```
File.open(#{textfile}, "r") 
```

做就是了：

```
File.open(textfile, "r") 
```

这根本没有任何意义：

```
File.open(#{textfile}, "r")
textfile.each do line 
```

它应该是：

```
File.open(textfile, "r").each do |line| 
```

这也没有意义：

```
return true
print line 
```

`line`之后永远不会被打印出来`return true`。

编辑：

至于你的新问题：要么工作，但[`match`](http://ruby-doc.org/core-2.0/String.html#method-i-match)有[`=~`](http://ruby-doc.org/core-2.0/String.html#method-i-3D-7E)不同的返回值。这取决于你想要做什么。

```
foo = "foo trail bar"
foo.match /trail/ # => #<MatchData "trail">
foo =~ /trail/ # => 4 
```

# java - Joda Time，获取工作日

> ID：15338196
> 
> 赞同：8
> 
> 时间：2013-03-11T12:07:35.610
> 
> 标签：java, jodatime

如何使本地日期仅计算周日期？

例如

```
LocalDate date = new LocalDate();
date.plusDays(10); //it returns plus days including sat and sun as 2013-03-21
//i am looking for a way
date.plusDays(10); //should return as 2013-03-26 
```

我正在寻找一种方法来消除周末？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T12:09:42.910

使用`getDayOfWeek()`方法。回报如下。为了只得到工作日..你只需要检查返回值是否小于或等于5。

```
public static final int MONDAY = 1;
public static final int TUESDAY = 2;
public static final int WEDNESDAY = 3;
public static final int THURSDAY = 4;
public static final int FRIDAY = 5;
public static final int SATURDAY = 6;
public static final int SUNDAY = 7; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T13:37:00.650

```
LocalDate newDate = new LocalDate();
    int i=0;
    while(i<days)//days == as many as u wanted
    {
        newDate = newDate.plusDays(1);
        System.out.println("new date"+newDate);
        if(newDate.getDayOfWeek()<=5)
        {
            i++;
        }

    } 
```

# css - (HTML+CSS) 使用 div 和 float 的页面布局

> ID：15338198
> 
> 赞同：1
> 
> 时间：2013-03-11T12:07:41.680
> 
> 标签：css, layout, html

[http://imageshack.us/photo/my-images/171/screenshot01p.png/](http://imageshack.us/photo/my-images/171/screenshot01p.png/)

您好，我目前正在处理网页布局，这是使用`<div>`“float”属性完成的。

`<div>`如上图所示，我的页面布局使用:分为 3 个部分
`<div id="header">`，用红色框
`<div id="content">`标记，用绿色框
`<div id="footer">`标记，用黄色框标记

然后我将内容进一步分为两部分（左和右）：

```
<div id="left">
<div id="right"> 
```

左边的 div 将包含元素“a”（位于左上角）和“b”（位于左下角），而右边的将只包含“c”。

这是我实现它的代码：

```
<div id="header"></div>

<div id="content">
    <div id="left">
        <div id="topleft">a</div>
        <div id="bottomleft">b</div>
    </div>
    <div id="right">c</div>
</div>

<div id="footer"></div> 
```

这是CSS

```
#header {
border: 5px solid red;
}

#content {
    border: 5px solid greenyellow;
    width: 1024px;    
    height: auto;   
}

#footer {
    border: 5px solid yellow;
}

#left {
    float: left;
    width: 480 px;
    border: 1px solid black;        
}

#topleft {
    border: 1px solid black;  
}

#bottomleft {
    border: 1px solid black;  
}

#right {
    float: left;
    width: 480 px;
    border: 1px solid black;        
} 
```

我在#content 中使用了 height: auto ，因为我希望内容部分在包含 ab 和 c 后扩展，但它看起来好像不包含任何元素。相反，来自 ab 和 c 的内容与页脚重叠。

我确实尝试在 CSS 中为页脚使用“clear: both”——这似乎解决了重叠问题，但内容仍然没有扩展！（高度 = 0）

有没有什么办法解决这一问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:12:48.617

添加`overflow:auto`

```
#content {
    border: 5px solid greenyellow;
    width: 1024px;    
    height: auto;  overflow:auto 
} 
```

**[演示](http://jsfiddle.net/um5T2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:43:36.137

好吧，您编写的代码似乎在 IE 上运行良好。

# c# - 阅读大型 Excel 文档

> ID：15338199
> 
> 赞同：10
> 
> 时间：2013-03-11T12:07:42.630
> 
> 标签：c#, excel, datatable, oledb

我想知道在 Excel 中读取单元格的最快方法是什么。我有一个包含 50000 行的 Excel 文件，我想知道如何快速阅读它。我只需要阅读第一列，使用 oledb 连接需要 15 秒。有更快的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-29T00:10:06.900

这是一种依赖于使用 Microsoft.Office.Interop.Excel 的方法。

请注意：我使用的 Excel 文件只有一列包含 50,000 个条目的数据。

1）用Excel打开文件，保存为csv，然后关闭Excel。

2）使用StreamReader快速读取数据。

3）拆分回车换行的数据并将其添加到字符串列表中。

4）删除我创建的csv文件。

我使用 System.Diagnostics.StopWatch 来计时执行，该函数运行需要 1.5568 秒。

```
public static List<string> ExcelReader( string fileLocation )
{                       
    Microsoft.Office.Interop.Excel.Application excel = new Application();
    Microsoft.Office.Interop.Excel.Workbook workBook =
        excel.Workbooks.Open(fileLocation);
    workBook.SaveAs(
        fileLocation + ".csv",
        Microsoft.Office.Interop.Excel.XlFileFormat.xlCSVWindows
    );
    workBook.Close(true);
    excel.Quit();
    List<string> valueList = null;
    using (StreamReader sr = new StreamReader(fileLocation + ".csv")) {
        string content = sr.ReadToEnd();
        valueList = new List<string>(
            content.Split(
                new string[] {"\r\n"},
                StringSplitOptions.RemoveEmptyEntries
            )
        );
    }
    new FileInfo(fileLocation + ".csv").Delete();
    return valueList;
} 
```

资源：

[http://www.codeproject.com/Articles/5123/Opening-and-Navigating-Excel-with-C](http://www.codeproject.com/Articles/5123/Opening-and-Navigating-Excel-with-C)

[如何使用 C# 在回车符上拆分字符串？](https://stackoverflow.com/questions/1814562/how-to-split-strings-on-carriage-return-with-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-27T14:53:24.060

您能否使用 OLEDb 提供程序将您的代码用于读取 50000 条记录。我试过这样做，读取 3 列的 50000 条记录需要 4-5 秒。我已经按照以下方式完成了，请看一下，它可能会对您有所帮助。:)

```
 // txtPath.Text is the path to the excel file
        string conString = @"Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=" + txtPath.Text + ";" + "Extended Properties=" + "\"" + "Excel 12.0;HDR=YES;" + "\"";

        OleDbConnection oleCon = new OleDbConnection(conString);

        OleDbCommand oleCmd = new OleDbCommand("SELECT field1, field2, field3 FROM [Sheet1$]", oleCon);

        DataTable dt = new DataTable();

        oleCon.Open(); 
        dt.Load(oleCmd.ExecuteReader());
        oleCon.Close(); 
```

如果您可以将代码放在这里，以便我可以尝试纠正。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:13:25.850

OLEDB 总是需要更多时间。

SQL Server 2005/2008 将使它更快。

对于 OLEDB 连接，每秒需要 7 条记录，而

对于 SQLServer ，每秒需要 70 条记录。

读取逗号分隔文件不需要太多时间，但插入数据需要时间。

我确实经历过这件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T12:16:09.010

我面临同样的事情，我在办公室开发中心读到：

[http://social.msdn.microsoft.com/Forums/office/en-US/418ada31-8748-48d2-858b-d177326daa76/export-to-excel-open-xml-sdk-vs-microsoftofficeinteropexcel?forum=oxmlsdk](http://social.msdn.microsoft.com/Forums/office/en-US/418ada31-8748-48d2-858b-d177326daa76/export-to-excel-open-xml-sdk-vs-microsoftofficeinteropexcel?forum=oxmlsdk)

处理 Excel 文件有两种选择：

*   Microsoft.Office.Interop.Excel 使用 Excel.Application 作为代码执行的附加层
*   开放式 XML SDK，允许开发人员直接使用已关闭的文件

两者之间没有太大区别，但在您的性能是一个问题的情况下，您应该使用 Open XML SDK，它可能会更快一些，并且在处理之前不需要太多时间打开大文件。正如您在上面的链接中所读到的，我引用了：

> 不支持用于自动化目的的 Office。Office 应用程序并非设计为在没有人工监督的情况下运行，并且具有令人讨厌的“挂起”倾向

此链接提供了学习开放 xml sdk 的良好开端：http: [//msdn.microsoft.com/en-us/library/office/gg575571.aspx](http://msdn.microsoft.com/en-us/library/office/gg575571.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T01:50:35.060

您只想从文件中读取数字列表？它必须在Excel中吗？一些非技术人员正在更新列表吗？如果您想从单个列中读取 50,000 个数字到内存中的列表中，只需将单元格复制到文本文件并使用 TextReader 读取。这将是即时的。

```
List<string> ReadFile(string path)
{
   TextReader tr = new StreamReader(path);
   string line;
   List<string> lines = new List<string>();
   while((line=tr.ReadLine())!=null)
   {
       //if this was a CSV, you could string.split(',') here
       lines.add(line);
   }

   return lines;
} 
```

# javascript - 在 IE8 中使用 Javascript 的动态图像表不会发生图像调整大小

> ID：15338204
> 
> 赞同：1
> 
> 时间：2013-03-11T12:08:06.813
> 
> 标签：javascript, image, dynamic, internet-explorer-8, resize

实际调用的图像大小约为 2000x2000，当我希望它们为 165x165 时，它们不会改变。`displayed[i]`在第一行中具有零件名称，并且在第二行中调用了它们各自的图像。`img.setAttribute`东西也给试了。只有 CSS 和 Javascript 才能做到这一点吗？

Javascript：

```
var divT = document.getElementById("tableHolder");
    var tb1 = document.createElement('table'),
        row,
        cell,
        i;
    tb1.cellSpacing="0";
    tb1.border="1";
    tb1.width="180";
    row = tb1.insertRow(-1);
    for (i = 0; i < p; i++) {
    cell = row.insertCell(i);
    cell.innerHTML= displayed[i];
        }
    row = tb1.insertRow(-1);
    for (i = 0; i < p; i++) {
    cell = row.insertCell(i);
    img = new Image();
    img.src = 'Part_database/' + displayed[i] + '.jpg';
    img.width="165";
    img.height="165";
    cell.appendChild(img);
    }
    divT.appendChild(tb1); 
```

HTML：

```
<div id="tableHolder"></div> 
```

# java - WAR 文件太大

> ID：15338207
> 
> 赞同：0
> 
> 时间：2013-03-11T12:08:20.040
> 
> 标签：java, tomcat, war

我已将我的 WAR 文件部署到 Tomcat，但它几乎是 160 MB，而且服务器运行速度非常慢。有人可以向我建议如何加快速度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:18:45.763

为什么这必然是一个问题？如果您有很多 3rd 方 JAR，那么您的 WAR 文件可能会那么大。您可以删除什么并且仍然可以运行应用程序？

如果我们假设大小不一定是您的应用服务器运行缓慢的原因，那么根本原因可能是什么？

我建议使用安装了所有插件的 Visual VM 在中等负载下监控您的应用服务器。它将向您展示堆、CPU、线程、对象创建和许多其他有趣的事情发生了什么。

我还会打开 Chrome 工具，看看加载和呈现页面时发生了什么。

你有没有运行 YSlow！看看你的网页表现如何？

你没有慢的根本原因。我会在我猜到之前找到它。

更新 - 只是一个参考点：我有一个使用 Spring 3、它的所有依赖项和其他几个 3rd 方 JAR 的 Web 应用程序。WAR 文件为 31MB。你*可能*有问题。

# c++ - 如何循环通过在 c++ 中再次要求输入的 switch-case 语句？

> ID：15338209
> 
> 赞同：2
> 
> 时间：2013-03-11T12:08:23.193
> 
> 标签：c++, while-loop, switch-statement

首先，我向用户显示一个菜单，他们可以从中进行选择。一旦他们做出选择，就会执行一些代码，我想再次向他们展示相同的菜单，以便他们做出不同的选择。

到目前为止，这是我的代码：

```
//call the menu function and put it in a variable which will be used in the switch case statements
menu_selection = main_menu();

condition_main = true;

while (condition_main) {    
    switch (menu_selection) {
        case 1: display(primes);
                menu_selection = main_menu();

        case 2: display(fibos);
                menu_selection = main_menu();

        case 3: display(primes_and_fibos);
                menu_selection = main_menu();

        case 4: display(primes_not_fibos);
                 menu_selection = main_menu();

        case 5: display(fibos_not_primes);
                 menu_selection = main_menu();

        case 6: search();
                 menu_selection = main_menu();

        case 7: condition_main = false;
                             return 0; //this exits the program
        default: cout << "\nThat is an invalid option. Please try again.\n\n";

    } 
} 
```

但是，当我运行该程序时，似乎正在发生的事情是，如果我选择选项 1，它将执行代码并再次显示菜单，但如果我再次选择选项 1，它将运行为选项 2 设计的代码。我有还尝试了一个 do while 循环，根本不使用循环，似乎没有任何效果。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:16:33.823

我同意，没有休息。你可能想考虑一个更像这样的代码结构：（*我的格式不是很好，因为我想要紧凑）*

```
do {
   menu_selection = main_menu();
   switch (menu_selection) {
   case 1 : display(primes);            break;
   case 2 : display(fibos);             break;
   case 3 : display(primes_and_fibos);  break;
   case 4 : display(primes_not_fibos);  break;
   case 5 : display(fibos_not_primes);  break;
   case 6 : search();                   break;
   case 7 : break;
   default: cout << "\nThat is an invalid option. Please try again.\n\n";
} while (condition_main != 7);
return 0; 
```

（当然，以您喜欢的方式格式化。）这只需一次调用菜单功能，使维护更加容易。`return`也位于函数的末尾，大多数人都希望在此处找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:13:20.843

每种情况都需要休息，除非您希望将一种情况转移到下一种情况：

```
switch (menu_selection) {
    case 1: display(primes);
            menu_selection = main_menu();
            break ;

    case 2: display(fibos);
            menu_selection = main_menu();
            break ;

    case 3: display(primes_and_fibos);
            menu_selection = main_menu();
            break ;

    case 4: display(primes_not_fibos);
             menu_selection = main_menu();
            break ;

    case 5: display(fibos_not_primes);
             menu_selection = main_menu();
            break ;

    case 6: search();
             menu_selection = main_menu();
            break ;

    case 7: condition_main = false;
                         return 0; //this exits the program
    default: cout << "\nThat is an invalid option. Please try again.\n\n";
            break ;
} 
```

这个[参考](http://www.learncpp.com/cpp-tutorial/53-switch-statements/)有更多`switch`的例子，也涵盖了跌倒的情况。

正如史蒂夫建议的那样，在声明`return`之后添加可能更有意义。`while`这将是预期的控制流，并且很可能也更容易维护。将`main_menu`调用从 switch 移到循环中也将使您的代码以后更容易更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:30:55.730

添加`break`s 将“解决”问题。

但是，最好将代码分开以使其更易于测试。那时你可能已经意识到了这个问题。

将您的输入和处理代码分开：

```
bool handleSelection(int menu_selection) {
    switch (menu_selection) {
        case 1: display(primes);
        case 2: display(fibos);
        case 3: display(primes_and_fibos);
        case 4: display(primes_not_fibos);
        case 5: display(fibos_not_primes);
        case 6: search();
        case 7: return false;
        default: cout << "\nThat is an invalid option. Please try again.\n\n";
    }
    return true;
}

void pump() {
    int menu_selection = main_menu();
    while(handleSelection(menu_selection)) {    
        menu_selection = main_menu();
    }
}

int main() {
    //pump();
    handleSelection(3);    
} 
```

您可能也应该将输出代码分开（*“这是一个无效的选项。请再试一次”*），但我认为我没有这样做就说明了我的观点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T10:56:12.447

```
boolean condition = true;
while(condition==true){
System.out.println("Press Number \n 1 for check prime \n 2 for exit");
Scanner scannerOption = new Scanner(System.in);
    int option = scannerOption.nextInt();

    switch (option){
        case 1:
            checkPrime();
            break;
        case 2:
            condition = false;
            break;
        default:
            System.out.println("Wrong Enter plz try again");

    }
} 
```

# linux - 让孩子在 fork() 中等待父母

> ID：15338210
> 
> 赞同：2
> 
> 时间：2013-03-11T12:08:23.373
> 
> 标签：linux, signals, fork, system-calls

该程序在父进程中获取一个句子并在子进程中以大写形式打印出来。我希望孩子等待父母。我使用 sleep() 让子进程等待。有什么方法可以让孩子等待父母吗？我可以用 signal() 实现吗？提前致谢！！！

```
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<sys/types.h>
#include<sys/wait.h>
#include<sys/ipc.h>
#include<sys/shm.h>
#include<ctype.h>
#define size 50
main()
{
    int pid,shmid,i,key=1234;
    char *name,*shmaddr;
    if((shmid=shmget(key,size,IPC_CREAT | 0666)) < 0)
    {
        perror("shmget():");
        exit(1);
    }
    pid=fork();
    if(pid < 0)
    {
        perror("fork():");
        exit(1);
    }
    else if(pid == 0)
    {
        sleep(5); //making child to wait for parent
        printf("\t\tCHILD\n\n");
        if((shmaddr=shmat(shmid,NULL,0)) == (char*) -1)
        {
            perror("shmat():");
            exit(1);
        }
        name=shmaddr;
        i=0;
        while(name[i]!='\0')
        {
            printf("%c",toupper(name[i]));
            i++;
        }
        shmdt(shmaddr);
        printf("\n");
        exit(0);
    }
    else
    {
        printf("\t\tPARENT\n\n"); 
        if((shmaddr=shmat(shmid,NULL,0)) == (char*) -1)
        {
            perror("shmat():");
            exit(1);
        }
        name=shmaddr;
        i=0;
        while((name[i]=getchar()) != '\n')
        i++;
        name[i]='\0';
        shmdt(shmaddr);
        wait(NULL);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:45:58.310

让孩子等待的最简单方法是使用管道。子进程在读取时阻塞，然后父进程在完成写入共享内存时将一个字节写入管道。子进程仅在消耗该字节时才会继续读取。（当然，在这个简单的场景中，不需要共享内存，因为父级可以简单地将数据写入管道而不是共享内存！）

# html - 导航中心的大徽标

> ID：15338211
> 
> 赞同：0
> 
> 时间：2013-03-11T12:08:26.643
> 
> 标签：html, css

她给了我一个设计，中间有一个大标志（高度为 100px，6.250em），而普通列表项的高度为 50px（3.125em）。现在我不知道该怎么做。

[这就是我所拥有的](http://jsfiddle.net/d92Ux/)

这将是最终结果：

![结尾](../Images/d3bcf803eb2d56935abe3987daeab059.png)

那么，任何人都可以帮助我吗？

## HTML

```
<div id="container">
    <nav>
        <ul>
            <li><a href="#" class="menu">home</a></li>
            <li><a href="#" class="menu">about</a></li>
            <li><a href="#" class="menu">fotoreportage</a></li>
            <li id="logo"><a href="#">navatushots</a></li>
            <li><a href="#" class="menu">portfolio</a></li>
            <li><a href="#" class="menu">voorwaarden</a></li>
            <li><a href="#" class="menu">contact</a></li>
        </ul>
    </nav>
</div> 
```

## CSS：

```
body{
    background-color:#c3c3c3;
}

nav{
    width:100%;

    list-style:none;
    text-align:center;

    background-color:#fff;
}

nav li{
    display: inline-block;
}

nav li a{
    height:3.125em;
    line-height:50px;   

    text-decoration:none;
    color:#000; 
}

nav li#logo{
    height:100px;
    line-height:6.250em;    
    background-color:#595450;
    color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:39:10.567

正如@DaveRook 在评论中建议的那样，使用单独的`ul-li`部分会容易得多。

[小提琴链接](http://jsfiddle.net/d92Ux/2/)

## HTML

```
<div id="container">
    <nav>
        <ul>
            <li><a href="#" class="menu">home</a>

            </li>
            <li><a href="#" class="menu">about</a>

            </li>
            <li><a href="#" class="menu">fotoreportage</a>

            </li>
        </ul>
        <ul>
            <li id="logo"><a href="#">navatushots</a>

            </li>
        </ul>
        <ul>
            <li><a href="#" class="menu">portfolio</a>

            </li>
            <li><a href="#" class="menu">voorwaarden</a>

            </li>
            <li><a href="#" class="menu">contact</a>

            </li>
        </ul>
    </nav>
</div> 
```

## CSS

```
body {
    background-color:#c3c3c3;
}
nav {
    width:100%;
    list-style:none;
    text-align:center;
    background-color:#fff;
}
nav ul, nav li {
    display: inline-block;
}
nav li a {
    height:3.125em;
    line-height:50px;
    text-decoration:none;
    color:#000;
}
nav li#logo {
    height:100px;
    line-height:6.250em;
    background-color:#595450;
    color:#fff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:33:10.233

只是为了让您重新思考一下您的标记，这里有一种更语义化的解决方案：http: [//jsfiddle.net/Qh3X5/](http://jsfiddle.net/Qh3X5/)

```
<h1 title="NavatuShots">NavatuShots</h1>
<nav>
    <ul>
        <li><a href="#">home</a></li>
        <li><a href="#">about</a></li>
        <li class="mid-left"><a href="#">fotoreportage</a></li>
        <li class="mid-right"><a href="#">portfolio</a></li>
        <li><a href="#">voorwarden</a></li>
        <li><a href="#">contact</a></li>
    </ul>
</nav> 
```

徽标现在包裹在 H1 中，其中包含单词“NavatuShots”，但由于“text-indent: -9999px;”而未显示，而是显示带有背景图像的徽标。还建议您将主页链接添加到 H1，因为人们可能会尝试单击它。

标志的定位由“位置：绝对；左：50%；上：0；”。然后将徽标宽度的一半的负边距添加到 H1 元素，因此它正确居中。

另一方面，ul 元素没有被拆分，我已添加到辅助类中，它为中间的 li 元素提供了一些边距。

差不多就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:31:23.703

如果您希望在其位置显示徽标但不拉伸`height`其容器，也许这就是您正在寻找的：http: [//jsfiddle.net/d92Ux/1/](http://jsfiddle.net/d92Ux/1/)

**- 编辑 -**

更新演示：http: [//jsfiddle.net/d92Ux/4/](http://jsfiddle.net/d92Ux/4/)

# jquery - jQuery杀死其他功能

> ID：15338213
> 
> 赞同：3
> 
> 时间：2013-03-11T12:08:31.803
> 
> 标签：jquery, conflict

我有一个 id='user' 的 div。如果客人正在访问，则有一个登录表格和注册表单。我正在使用选项卡在登录和注册表单之间切换。

```
jQuery(function() {
    jQuery('.box a').livequery('click', function(e){
        switch_tabs(jQuery(this));
    });
    switch_tabs(jQuery('.defaulttab'));

    function switch_tabs(obj){
        jQuery('.box-content').hide();
        jQuery('.box a').removeClass('selected');
        var id = obj.attr("rel");

        jQuery('#'+id).show();
        obj.addClass("selected"); }
}); 
```

在使用 jquery 加载功能按下登录或注册按钮后，`(jQuery('#user').load(location.href+' #user'))`我重新加载 div 标签（#user）

然后只有一个注销按钮。按下按钮时，它会破坏 php 中的会话并重新加载#user div

```
jQuery(function(){
    jQuery('#off').livequery('click', function(e){
        jQuery('.loader').html('<img src="img/loader.gif" />').show();
        jQuery.post('process/logoff.php', null, function(data){
            jQuery('#user').load(location.href+' #user');
            jQuery('.loader').hide();
        });
    });
}); 
```

重新加载后，我的`switch_tab`功能将不起作用并同时显示（注册和登录 div）。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T23:28:12.947

如果您使用的是较新版本的 jQuery，您不应该使用：`.on()`吗？

你也不想引用 'id' 而不是 'rel' 吗？：

```
var id = obj.attr("id"); 
```

如果您尝试引用所显示内容的 id。

# jquery - jquery ui亮度按钮和文本框焦点上的橙色边框

> ID：15338214
> 
> 赞同：0
> 
> 时间：2013-03-11T12:08:31.927
> 
> 标签：jquery, css, jquery-ui

我在我的 asp.net 应用程序中使用 Jquery UI 并使用 jquery ui 对话框。我已经定制了它的 Lightness 主题 css。我已经将背景设置为黑色和其他一些东西。现在我看到当某些文本框或按钮具有焦点时，它会变成橙色边框。我想删除它或更改为黑色。

你能告诉我我需要换哪个班吗？

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:11:47.573

它可能是默认大纲。设置`outline: none;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:14:40.793

如果您显示您的代码，您可以获得明确的答案..

例如..如果有任何错误这个类将添加到元素中..

```
.ui-state-error {
     border: 1px solid #CD0A0A;
    } 
```

所以改变这种颜色会有所帮助..以同样的方式你可以解决你的问题

# hadoop - 当我使用池时如何保证 hadoop FileSystem 连接得到管理

> ID：15338217
> 
> 赞同：6
> 
> 时间：2013-03-11T12:08:45.660
> 
> 标签：hadoop, filesystems, hdfs, pool

由于 FileSystem.get 不是线程安全的，我使用 FileSystem.newInstance 代替。但是每次我需要连接到 HDFS 时调用 newInstance 方法可能不是一个好主意。所以我做了 FileSystem 连接池。

这是第一个问题。

这是好方法吗？

因为我检查了 Hive 源，但他们不使用这种方法。直接使用 HDFS API，甚至从不使用 newInstance。为什么？他们如何建立新的文件系统连接？

他们也不使用 FileSystem.close() 。

他们如何保证 FileSystem 会关闭？

# sql - 从 SQL 服务器发送邮件时缺少消息 ID 字段

> ID：15338220
> 
> 赞同：1
> 
> 时间：2013-03-11T12:08:59.183
> 
> 标签：sql, sql-server, email, smtp, pop3

我有一个奇怪的情况

如果我从 Outlook、blackberry 等发送邮件，`Message Id`邮件字段会正确生成，但如果我从 SQL 服务器（使用相同的 POP 和 SMTP 服务器配置）`Message Id`发送邮件，则不会生成 POP 消息字段。

这种行为背后的原因可能是什么？已经阅读了一些帖子说这`Message Id`是由 SMTP 服务器生成的 那么为什么只从 SQL 服务器发送的邮件表现得这样呢？请指导我该怎么办？

我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-15T16:57:21.643

当你在 even sql 中发送邮件时，会生成一个消息 ID。您会在输出窗口中看到一条评论。邮件 ID XYZ 排队..

# paypal - 客户未在 Paypal 中完成付款时的通知

> ID：15338221
> 
> 赞同：1
> 
> 时间：2013-03-11T12:09:08.927
> 
> 标签：paypal

我正在开发一个使用 Paypal 作为付款方式的度假屋网站。预订系统的工作原理如下：

1.  一旦客户选择日期并单击“立即购买”，所选日期就会为客户“保留”，因此在付款过程中没有其他人可以选择它们。

2.  付款完成后，IPN 会触发 PHP 脚本将日期从“保留”更改为“预订”（如果付款失败，则为“可用”）。

我的问题是，我怎么知道，一旦客户被重定向到 Paypal 网站，他/她是否改变了主意，只是简单地关闭了浏览器？我需要知道，这样我才能再次提供这些日期，但我在 IPN 文档或 Paypal 开发人员网站中找不到任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:50:35.877

这不涉及 IPN 脚本本身，而是您开发的应用程序。

最好对日期在恢复可用之前可以保留多长时间有一个时间限制。PayPal 的会话时间限制为 15 分钟，因此如果 PayPal 是唯一的付款选项，您可以每 30 分钟或更长时间运行一次 cron 作业，以将日期状态从“保留”更改为“可用”

*   选择日期后，将其置于“保留”状态
*   如果收到成功的 IPN，请将日期更改为“已预订”，或者如果在 30 分钟内未收到任何 IPN，则运行 cron 作业以更新状态。

# javascript - 什么是旧版 JavaScript 和 Javascript 之间的最大区别是什么？

> ID：15338228
> 
> 赞同：2
> 
> 时间：2013-03-11T12:09:31.620
> 
> 标签：javascript, jquery, legacy

我正在查看 JavaScript 和 jQuery 之间的各种实践差异，在这个站点上，我偶然发现了一些我直到现在才知道的东西，在这个链接上称为 Legacy JavaScript：http: [//alittlecode.com/comparing-scripts- in-jquery-and-javascript-a-comparison-by-jeffrey-way/](http://alittlecode.com/comparing-scripts-in-jquery-and-javascript-a-comparison-by-jeffrey-way/)

选择元素 jQuery

```
$('#container'); 
```

JavaScript

```
var container = document.querySelector('#container'); 
```

旧版 JavaScript

```
var container = document.getElementById('container'); 
```

它是什么，什么是更现代的，这里真正的交易是什么？谢谢 ：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:15:36.253

这`querySelector()`是新的选择器 API 的一部分。它比 simple 更加灵活和强大`getElementById()`。

看看[W3C 推荐](http://www.w3.org/TR/selectors-api/)中的例子：

**使用旧的 getElementById()：**

```
var table = document.getElementById("score");
var groups = table.tBodies;
var rows = null;
var cells = [];

for (var i = 0; i < groups.length; i++) {
  rows = groups[i].rows;
  for (var j = 0; j < rows.length; j++) {
    cells.push(rows[j].cells[1]);
  }
} 
```

**使用查询选择器（）：**

```
var cells = document.querySelectorAll("#score>tbody>tr>td:nth-of-type(2)"); 
```

仅从这个示例中，您就可以看到，这两种方法在功能方面并不相同。

此外，请注意，它们都不是 Java Script 语言本身的一部分，而是浏览器的 DOM API。

# dns - 如何转发子区域

> ID：15338232
> 
> 赞同：6
> 
> 时间：2013-03-11T12:09:38.220
> 
> 标签：dns, subdomain, forward

我使用 Bind9 作为我办公室的 DNS 服务器。

我们有一个区域：example.com。这必须从我们的 DNS 服务器作为权威解析。

另一方面，我们有一个 sub.example.com。zone，必须转发到其他 DNS 服务器。

当我们在 example.com 上查询任何记录时，绑定答案属性。区。但它对 sub.example.com 的查询失败。因为它不进行转发。它继续在本地寻找答案。

这是 named.conf 文件

```
zone "sub.example.com" IN { type forward;
        forwarders {172.21.238.229;172.21.238.230;};
        forward only;
};

zone "example.com" {
        type master;
        forwarders {};
        file "/etc/named/example.com.db";
}; 
```

这是 example.com.db 文件内容：

```
$ORIGIN example.com.
$TTL 1W
@   IN  SOA     dnsldes.example.com. postmaster.example.com. (
                               6            ; serial number
                               3600         ; refresh   [1h]
                               600          ; retry     [10m]
                               86400        ; expire    [1d]
                               3600 )       ; min TTL   [1h]
;

      IN     NS      dnsldes.example.com.

bdred           IN      A       172.22.2.150
dnsldes IN      A       172.21.229.159 
```

这是使用 dig 客户端进行 bdred.example.com 查询的输出（没问题）：

```
; <<>> DiG 9.8.1-P1 <<>> bdred.sub.example.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 9764
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;bdred.sub.example.com.         IN      A

;; AUTHORITY SECTION:
example.com.            3600    IN      SOA     dnsldes.example.com. postmaster.example.com. 6 3600 600 86400 3600

;; Query time: 4 msec
;; SERVER: 172.21.229.159#53(172.21.229.159)
;; WHEN: Mon Mar 11 12:55:02 2013
;; MSG SIZE  rcvd: 94 
```

这是 dig 查询的答案，它不能正常工作：

```
; <<>> DiG 9.8.1-P1 <<>> bdred.sub.example.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 26555
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;bdred.sub.example.com.         IN      A

;; AUTHORITY SECTION:
example.com.            3600    IN      SOA     dnsldes.example.com. postmaster.example.com. 6 3600 600 86400 3600

;; Query time: 4 msec
;; SERVER: 172.21.229.159#53(172.21.229.159)
;; WHEN: Mon Mar 11 13:09:07 2013
;; MSG SIZE  rcvd: 94 
```

请问，我们做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T14:57:54.737

解决方案是不要在 named.conf 中创建区域。解决方案是使用区域委托，如下所示：

```
$ORIGIN example.com.
$TTL 1W
@   IN  SOA     dnsldes.example.com.  postmaster.example.com. (
                               6            ; serial number
                               3600         ; refresh   [1h]
                               600          ; retry     [10m]
                               86400        ; expire    [1d]
                               3600 )       ; min TTL   [1h]
;

      IN     NS      dnsldes.example.com.

dnsldes IN  A   XXX.XXX.XXX.XXX
bahamas IN  CNAME   bdred

; Delegations and Glue
$ORIGIN sub.example.com.
@       IN      NS      lmzdns1.sub.example.com.

        IN      NS      lmzdns2.sub.example.com.

lmzdns1 IN      A       XXX.XXX.XXX.XXX
lmzdns2 IN      A       XXX.XXX.XXX.XXX 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-03T21:29:39.880

这是一个子域委托问题：

*将 NS 记录添加到区域的数据文件中，将子域委托给名称服务器。*

例子：

域：one.domain 子域：sub.one.domain

我只需要使用谷歌公共 dns 来解析 sub.one.domain。

要将 sub.one.domain 委托给名称服务器 externalns.one.domain，您可以将此 NS 记录添加到 one.domain 区域数据文件中：

```
sub.one.domain.    IN    NS    externalns.one.domain. 
```

您还需要为 externalns.one.domain 添加一条 A 记录：

```
externalns.one.domain    IN    A    8.8.8.8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-05T22:50:17.030

关于我的经验和测试，当您的服务器对父区域具有权威时，当您想要转发子区域时，您必须：

*   在您的 named.conf 中将要转发的子区域声明为转发区域类型
*   添加与您将在父区域中转发该子区域的名称服务器相关的 NS 记录

使用该配置，您的服务器将向您在 named.conf 的子区域声明中设置的转发器列表发送递归请求。

如果您只添加 NS 记录而没有在 named.conf 中将该区域声明为转发区域，则您委托该区域，您的 DNS 服务器将发送一个迭代请求。

如果您仅在 named.conf 中将子区域声明为转发区域类型（并且父区域在您的服务器上具有权威性），则转发将不起作用。

注意：您可以通过执行流量捕获来检查迭代或递归查询，并且在带有参数的标志部分中可见（DNS->Flags->Recursion Desired）

选择委托或转发可以改变很多 DNS 请求流/DNS 架构选择（递归或迭代 DNS 请求）

# javascript - 通过 ajax 从 struts 1.xx 操作中检索 java 对象（arraylist/hashmap）

> ID：15338238
> 
> 赞同：0
> 
> 时间：2013-03-11T12:09:58.437
> 
> 标签：javascript, ajax, jakarta-ee, action, struts-1

我有一个要求（基于 struts 1.xx 的 Java EE 应用程序），我必须通过 AJAX 从 Struts 操作类中获取 Java 对象，以便在 UI 上显示并以表格的形式呈现它。

该对象将是动态的，因为它将通过 Web 服务填充，该服务将在操作本身中调用。

有没有通过 AJAX (javascript/jquery) 获取对象？单击 UI 选项卡时将调用该操作，并且我必须在该特定选项卡中显示该操作的响应（数组列表/哈希图对象）。

**请看，我正在开发一个现有的应用程序，而且我只能使用 Struts 1.xx 框架。**

以下是我将在动作类中执行的步骤：

```
public class AjaxAction extends Action {
public ActionForward execute(final ActionMapping mapping, final ActionForm form,
            final HttpServletRequest request,final HttpServletResponse response)

    {       
        // Step1 :webservice call
                    //Step 2: parse the webservice reponse and place it inside a hashmap or arraylist object

                return null;
    }
} 
```

步骤 3：通过 ajax 获取填充的 hashmap/arraylist 对象并将其显示在 UI 上，我不知道该怎么做。任何示例或指向某些教程的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:13:25.957

你可以使用 jQuery ajax 。

[jQuery的阿贾克斯](http://www.raistudies.com/struts-1/ajax-with-struts-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:37:53.747

至于我的问题，我找到了一个简单的解决方案，我不确定它是否回答了我的问题，但它帮助我解决了问题。

我使用了 Jquery Ui 选项卡框架[http://jqueryui.com/tabs/#ajax](http://jqueryui.com/tabs/#ajax)

它不是从动作中获取整个对象，而是可以调用动作本身。这可以通过在选项卡本身中提供操作的 url 来完成。

```
<li><a href="myAction.do">CALL a JSP VIA AJAX</a></li> 
```

现在此选项卡将加载另一个 jsp，该 jsp 将由操作本身调用。因此，它不必通过 ajax 发送大量数据，而是我可以通过触发操作来调用选项卡中的整个 jsp。

# opencv - Opencv cvCaptureFromCAM 不加载任何帧

> ID：15338244
> 
> 赞同：0
> 
> 时间：2013-03-11T12:10:13.563
> 
> 标签：opencv

我正在尝试使用[http://opencv.willowgarage.com](http://opencv.willowgarage.com)中给出的示例代码使用 opencv 实现人脸检测，但 cvCaptureFromCAM 没有从网络摄像头加载任何帧。我得到一个窗口对话框来选择我的网络摄像头，但它没有加载任何帧..

```
 #include "opencv2/objdetect/objdetect.hpp"
  #include "opencv2/highgui/highgui.hpp"
  #include "opencv2/imgproc/imgproc.hpp"
  #include <opencv/cv.h>
  #include <iostream>
  #include <stdio.h>
   using namespace std;
   using namespace cv;

  /** Function Headers */
void detectAndDisplay( Mat frame );

 /** Global variables */
String face_cascade_name = "haarcascade_frontalface_alt.xml";
String eyes_cascade_name = "haarcascade_eye_tree_eyeglasses.xml";
CascadeClassifier face_cascade;
CascadeClassifier eyes_cascade;
string window_name = "Capture - Face detection";
RNG rng(12345);

/** @function main */
int main( int argc, const char** argv )
{
CvCapture* capture;
Mat frame;

  //-- 1\. Load the cascades
 if( !face_cascade.load( face_cascade_name ) ){ printf("--(!)Error loading\n"); return           -1; };
if( !eyes_cascade.load( eyes_cascade_name ) ){ printf("--(!)Error loading\n"); return  -1; };

 //-- 2\. Read the video stream
 capture = cvCaptureFromCAM( -1 );

  if( capture )
  {
   while( true )
   {
     cout<<"hello";
  frame = cvQueryFrame( capture );

   //-- 3\. Apply the classifier to the frame
   if( !frame.empty() )
  { detectAndDisplay( frame ); }
  else
  { printf(" --(!) No captured frame -- Break!"); break; }

  int c = waitKey(10);
  if( (char)c == 'c' ) { break; }
   }
   }
   else
   {cout<<"noframe";}
   return 0;
   }

    /** @function detectAndDisplay */
   void detectAndDisplay( Mat frame )
     {
   std::vector<Rect> faces;
   Mat frame_gray;

   cvtColor( frame, frame_gray, CV_BGR2GRAY );
   equalizeHist( frame_gray, frame_gray );

  //-- Detect faces
   face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE,        Size(30, 30) );

  for( int i = 0; i < faces.size(); i++ )
 {
  Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );
  ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360,  Scalar( 255, 0, 255 ), 4, 8, 0 );

 Mat faceROI = frame_gray( faces[i] );
 std::vector<Rect> eyes;

 //-- In each face, detect eyes
  eyes_cascade.detectMultiScale( faceROI, eyes, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, Size(30, 30) );

  for( int j = 0; j < eyes.size(); j++ )
  {
  Point center( faces[i].x + eyes[j].x + eyes[j].width*0.5, faces[i].y + eyes[j].y + eyes[j].height*0.5 );
   int radius = cvRound( (eyes[j].width + eyes[j].height)*0.25 );
  circle( frame, center, radius, Scalar( 255, 0, 0 ), 4, 8, 0 );
  }
  }
  //-- Show what you got
  imshow( window_name, frame );
   } 
```

但我的程序只打印 noframe..Also.I 正在使用 qtcreator 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:59:17.677

我已经测试了你的程序，但它在我的电脑上运行。你的网络摄像头似乎没有通过帧。您确定您的网络摄像头工作正常吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T15:19:08.993

我做了以下更改，它对我有用：

```
capture = cvCaptureFromCAM( 0 ); 
```

# dotnetopenauth - DotNetOpenAuth 发布问题 - Bitbucket 部署密钥

> ID：15338251
> 
> 赞同：0
> 
> 时间：2013-03-11T12:10:29.507
> 
> 标签：dotnetopenauth, bitbucket-api

我肯定会反对 Oauth 签名的请求，所以我不确定它是我的代码、DotNetOpenAuth 还是 Bitbucket。

我正在尝试按照

[https://confluence.atlassian.com/display/BITBUCKET/deploy-keys+Resource](https://confluence.atlassian.com/display/BITBUCKET/deploy-keys+Resource)

我得到一个`WebException`说法

`The request was aborted: The connection was closed unexpectedly.`

我是否使用 DotNetOpenAuth 正确发布？我似乎找不到任何好的样品？

我的代码如下：

```
var payload = new Dictionary<string, string>
                    {
                        {"accountname", username},
                        {"key", Uri.EscapeDataString(key.PublicKey)}
                    };

var dataUrl = @"https://api.bitbucket.org/1.0/repositories/{0}/{1}/deploy-keys";
var url = string.Format(dataUrl, username, projectName);
var endpoint = new MessageReceivingEndpoint(url, HttpDeliveryMethods.PostRequest);
var request = _consumer.PrepareAuthorizedRequest(endpoint, authToken, payload);

var payloadItems = from kvp in payload
            select kvp.Key + "=" + kvp.Value;
var data = Encoding.UTF8.GetBytes(string.Join("&", payloadItems));

using (var stream = request.GetRequestStream())
{
    stream.Write(data, 0, data.Length);
}

string responseString;
using (var response = request.GetResponse())
{
    using (var responseStream = new StreamReader(response.GetResponseStream()))
    {
        responseString = responseStream.ReadToEnd();
    }
} 
```

我觉得我只需要一个使用 DotNetOpenAuth 的表格帖子的好样本，所以如果我看起来很懒，我很抱歉；我的 google fu 只是没有派息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:41:42.687

尝试使用以下内容实例化您的 MessageReceivingEndpoint：

```
new MessageReceivingEndpoint(url, HttpDeliveryMethods.AuthorizationHeaderRequest | HttpDeliveryMethods.PostRequest); 
```

# java - Integer.parseInt() 抛出“对于输入字符串：XXX”

> ID：15338258
> 
> 赞同：0
> 
> 时间：2013-03-11T12:11:01.567
> 
> 标签：java, math

我正在从 csv 文件中读取大量记录。其中一列是金额，它有 2 个小数位。所以我想将它解析为整数形式，但遇到如下错误：

```
int trxnAmt = Integer.parseInt("002428859600"); 
```

假设它将是 2428859600 对吗？

但它抛出了错误> java.lang.NumberFormatException：对于输入字符串：“002428859600”

我尝试使用：

```
long a = Long.parseLong("002428859600"); 
```

它对我来说很好。

我仍然无法找出发生了什么。数字是不是太大了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:13:29.787

是`2428859600`的，是一个很长的数字。尝试给它分配一个 int ，你会得到一个编译器错误：

```
int i = 2428859600;  // error as 2428859600 is clearly outta int range(2,147,483,647)
long l = 2428859600L; //no error 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:13:09.553

是的，您将超出范围的整数值传递给`parseInt`方法。

> int 数据类型是一个 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648，最大值为**2,147,483,647** （含）。

尝试长或其他合适的选项。
这可能会对您有所帮助：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:13:32.293

> 数字是不是太大了？

是的。An`int`是 4 个字节，因此适合 an 的最大数字`int`是 2 ^(4*8-1) -1 = 2 ^(31) -1 = 2147483647 （4*8-1 因为符号需要 1 位）。

看到[这个](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T12:15:38.773

您应该确保您的输入确实是一个整数（即“16”），或者如果它超出整数范围，则使用`Double.parseDouble()`或`Long.parseLong()`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T12:20:11.870

您得到的`java.lang.NumberFormatException: For input string: "002428859600"`原因是，该数字`002428859600`不能表示为 32 位整数（类型`int`）。它可以表示为 64 位整数（类型`long`）。Java 中的长文字以“L”结尾：`002428859600L`

# php - 通过 Jquery 和 PHP 窃取 HTML 模板时提醒用户

> ID：15338260
> 
> 赞同：2
> 
> 时间：2013-03-11T12:11:08.727
> 
> 标签：php, jquery, html

我已将 HTML 模板上传到 themeforest，但我发现一些网站免费提供完整的源代码。由于它是 HTML，任何人都可以轻松复制它。如果他们将我的模板托管在其他网站（跟踪 IP）上而没有购买，Jquery 中是否有任何方法可以提醒用户，而不是混淆？Meaasge 像“你被偷了我的模板”。

很好，如果我收到一封关于 IP 地址的电子邮件（通过 jquery 或 php）。然后我也可以提醒窃取者。代码也应该被隐藏，他们不能删除它。

因此，HTML 托管在我的网站上，例如：120.7.7.7 - 无警报。

有人复制该 HTML 并上传到其他网站，例如：112.215.11.11 - 向 Stealer 发出警报，例如“你偷了我的模板”，我还收到了一封关于该偷窃的电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:18:31.963

100% 保护您的客户端源代码是不可能的。但是，您可以使人们更难阅读。

模板是 HTML、CSS 和 JS 由客户端浏览器呈现。所以那个人可以很容易地检查源代码并复制粘贴它来做任何他们喜欢的事情。

您可以混淆 HTML，例如： http: [//www.ioncube.com/html_encoder.php](http://www.ioncube.com/html_encoder.php)

但是您不能强迫模板的购买者这样做。

简而言之：不，你不能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:16:20.580

不，任何复制页面的人都可以简单地删除该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:20:35.223

事实上，几乎不可能限制对客户端资产的访问。

任何限制访问的方法都只会对没有经验的用户这样做。任何下定决心的人都可以访问您的所有 HTML、CSS 和 Javascript。

您可以缩小 CSS 和 Javascript，特别是使用 Javascript，将代码安排得难以理解。然而，JavaScript 总是可以反转的，无论任何混淆器的方法是什么，您都可以在任何现代浏览器中运行混淆代码并研究它。除非混淆器还会打包旨在让您的生活更难阻止使用调试工具的代码，但它最终会被规避并变得无用。

如果您确实需要对代码保密，请不要使用 JavaScript 并依赖其他技术。如果您以相反的方式处理问题，并且您已经构建了新的最酷的基于 JS 的 Web 应用程序并希望将其隐藏：放弃它。

真的，很遗憾，您的问题的答案是否定的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T12:26:05.137

我相信我曾经在 SO 上说过这样的话：如果您不希望客户拥有一些代码**，请不要给他！**就是这么简单。如果您将代码提供给您的客户，大多数人都能够访问并“窃取”该代码。
如果您需要预览模板，请对其进行截图并显示（作为图像）。

# java - 使用 -xms 和 -xmx 优化 Java 应用程序

> ID：15338261
> 
> 赞同：1
> 
> 时间：2013-03-11T12:11:10.210
> 
> 标签：java, performance

我正在进行性能测试。我看过很多关于设置 -Xmx 和 -Xmx 值的博客。我有点困惑，因为有些人说 -Xms=-Xmx 很好。我在一个项目中，在生产服务器上大约有 8-15K 人在线，即它总是处于高负载状态。-Xms 和 -Xmx 的优化设置应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:51:08.663

Sadly this is a big topic in Java, and the more tuning that you do here for a specific release of your code then the more risk you will have of having to retune it when you make your next release. Several consultancies specialise in this type of stuff because of its complexity, plus we have now see the release of Zing which is a commercial JVM intended to manage this for us (by throwing spare CPUs at the problem of GC management). However, that said there are some settings that nearly always help.

Your goal is to avoid 'stop the world' events within the JVM, ones that will pause all threads while the JVM goes off to do work. Setting Xms and Xmx to the same value help here because having them different tells the JVM to start with a small heap and to then resize as it needs. Unfortunately this resizing is a stop the world event that causes large copies of objects within the heap and full GC. Expensive.

Your next goal should be to avoid objects getting tenured prematurely. The JVM is very efficient at creating lots of objects, and then releasing them soon afterwards. The problems occur when the objects are 'too big', they are held on for a while or they are more of them than fit in the eden space (a region of the heap reserved for new objects).

In general I like to increase the amount of the heap given to the young generations, and as much as possible reduce the size of the total heap. Smaller heaps are faster in Java, but you risk running out of memory. So I then spend most of my time optimising my algorithms and cleaning the code. If that does not give me the performance that I require then I instruct the JVM to write to log file its GC activity (details here [Analyze GC logs for Sun Hotspots, JVM 6](https://stackoverflow.com/questions/1839599/analyze-gc-logs-for-sun-hotspots-jvm-6)). My goal is to watch how much data is getting tenured.

Lastly you should read up on the different GC algorithms and select the one supported by your JVM that gives you the best performance. In general I would stay away from the G1 collector, it does not perform very well and was discussed at QCon as being a 'failed experiment' and the GC implementors are moving on to other approaches.

# php - 使用 php 从 mysql db 获取并执行 url

> ID：15338263
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:11:14.320
> 
> 标签：php, mysql

我找不到解决方案。我要做的就是获取并执行存储为我的数据库中的记录的 url/链接。我不希望它作为链接返回，而是从这个 url/link php 加载的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:13:14.523

尝试使用[**file_get_contents**](http://php.net/manual/en/function.file-get-contents.php) ...

您需要从数据库中获取链接，然后使用此函数获取内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:20:39.483

```
 <?php
        $con = mysql_connect('localhost','username','password');
        mysql_select_db('database_name');

        $sql  = "***`<select query here>`***";
        $res = mysql_query($sql);

        $row = mysql_fetch_row($res);

        $url = echo $row['url'];

        $contents = file_get_contents($url);
  ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:14:58.427

不确定“执行网址”是什么意思。如果要在 URL 处获取数据，可以使用`file_get_contents`，如下所示：

```
$url_content = file_get_contents('http://www.example.com/page.html'); 
```

如果您想将用户发送到该 url，您可以使用`header`带有`Location`标题的命令将浏览器发送到该地址，即。

```
header('Location: http://www.google.com'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:22:36.733

假设获取的变量是`$fetch`。在这种情况下使用：

```
header("location:$fetch"); 
```

# wolfram-mathematica - 将一个列表的元素与另一个列表的每个元素匹配以检测匹配/不匹配。字符串列表，使用 Mathematica

> ID：15338264
> 
> 赞同：0
> 
> 时间：2013-03-11T12:11:16.713
> 
> 标签：wolfram-mathematica

```
In[49]:= table
OpenRead["Desktop/SAP-MSBG Univ Coimbra/Mathematica/selorg.txt"]

Out[49]= InputStream["Desktop/SAP-MSBG Univ \
Coimbra/Mathematica/selorg.txt", 94]

In[50]:= table2 = 
OpenRead["H:\\SAP-MSBG Univ Coimbra\\Mathematica\\Missing PEP \
files.txt"]

Out[50]= InputStream["H:\\SAP-MSBG Univ Coimbra\\Mathematica\\Missing \
PEP files.txt", 95]

In[51]:= data = ReadList[table, String];

In[52]:= removaldata = ReadList[table2, String]; 
```

现在两个列表都是字符串列表，“removaldata”是“data”的子集。如何生成包含数据独有元素的列表。我尝试过使用循环和条件，但它们没有产生任何结果。

# javascript - 使用 Javascript 存储和恢复画布

> ID：15338266
> 
> 赞同：3
> 
> 时间：2013-03-11T12:11:25.060
> 
> 标签：javascript, html5-canvas

我想使用 JavaScript 来存储（以某种方式记住）画布元素的当前状态（显示的图像），然后稍后恢复它。

```
var cvSave;  //Global variable to save ImageData

function function1(){
//some stuff wich involes putting an image into a canvas
cvSave = context.getImageData(0,0,viewport.width, viewport.height);
// All the variables are existing and I use the context to put Stuff into the canvas which works fine
}

function isCalledLater(){
var canvas = document.getElementById('cv');
var ctx = canvas.getContext('2d');          //Get canvas and context
ctx.putImageData(cvSave,0,0);               //So this should restore the canvas to what I save earlier, right?
} 
```

但是当调用第二个函数时，它只会将画布变成白色，并且不会将其恢复到我认为我保存在 cvSave 中的内容。

我希望这是客户端，我想将它恢复到我多次保存的状态。

同样重要的是（我一开始忘记了）在恢复画布后我想使用 Processingjs 在恢复图像上绘制，然后我希望能够再次执行此操作。

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:27:38.400

嘿试试这个..

```
var cvSave;  //Global variable to save ImageData

function function1(){
//some stuff wich involes putting an image into a canvas
context.save();
// All the variables are existing and I use the context to put Stuff into the canvas which works fine
}

function isCalledLater(){
var canvas = document.getElementById('cv');
var ctx = canvas.getContext('2d');          //Get canvas and context
ctx.restore(); //So this should restore the canvas to what I save earlier, right?
ctx.save();  // this will save once again           
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-01T16:20:32.500

我尝试了这里建议的大部分内容，但由于某种原因没有任何效果。

最后，我做到了，这样我就有了一个状态，我总是想通过将相应的图像绘制到另一个画布中并在需要时从那里获取它来恢复并保存该状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:15:18.910

您可以将 ajax 与 Web 服务器一起使用，该服务器本身存储数据或 cookie 以将数据存储为纯文本。看看这个：[http ://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:17:50.677

你可以使用

```
cvSave = canvas.toDataURL("image/png");
ctx.drawImage(cvSave,0,0); 
```

我认为你错过了一些东西。试试这个

```
function function1(){
    var context = canvas.getContext('2d');
    cvSave = context.getImageData(0,0,viewport.width, viewport.height);
} 
```

# css - 如何自动调整div？

> ID：15338270
> 
> 赞同：3
> 
> 时间：2013-03-11T12:11:51.110
> 
> 标签：css, html, stylesheet

我有一个关于如何自动调整 div 类的简短问题。

我有一些错误信息，我想回显一下。对于这个错误消息，我有一个 div 类：

```
.wrapper form .error {
    color: #ccc;
    position: absolute;
    z-index: 2;
    background-color:#fff;
    height: 26px;
    line-height: 26px;
    padding: 10px; 
    border: solid #ccc;
    border-width: 1px 1px 1px 1px;
    width: 200px; /*should be auto but doesnt work*/
    line-height: 26px;
    right: 100%;
    top: 7%;
} 
```

我想实现我的不同字符串长度的不同错误消息将在一行中显示而不会中断，并且此 div 的宽度应根据字符串的长度自动调整大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T12:17:50.357

[http://jsfiddle.net/REsm3/](http://jsfiddle.net/REsm3/)

通过使用`white-space: nowrap`，您可以实现您想要的单行结果。但是，要实现您所说的“自动宽度”样式，您的元素需要是内联或内联块。请参阅我的 jsfiddle，了解如何更改您的标记来完成此操作。简而言之，我会将错误包装在一个通用元素中，例如`class="message"`并将其样式设置为`text-align: center`. 然后我将设置`error`为`display: inline`，从而实现你想要的“自动宽度”样式。

```
<div class="message">
    <div class="error">
        This is an error message
    </div>
</div>

<div class="message">
    <div class="error">
        This is an error message. This is an error message. This is an error message.
    </div>
</div> 
```

和CSS：

```
.message
{
    text-align: center;
    margin-bottom: 10px;
}

.message .error
{
    border: 1px solid red;
    padding: 2px;
    white-space: nowrap;

    display: inline;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:15:00.597

用于`white-space: nowrap;`将其全部保存在一条线上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:15:40.330

CSS规则：

```
white-space: nowrap; 
```

将防止您的换行。

将错误 div 的宽度设置为 100%，它将自动填充可用空间。如果您详细说明为什么需要自动调整 div 的大小，我可能会提供进一步的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:17:16.527

`white-space: nowrap;`将文本保留在一行。

With`display: inline;`或`display: inline-block`the`div`将尽可能宽（并且尽可能窄）以使文本适合。

[JS Bin 例子](http://jsbin.com/abalep/1/edit)

# git - git中的标签丢失

> ID：15338271
> 
> 赞同：0
> 
> 时间：2013-03-11T12:11:54.747
> 
> 标签：git, maven, maven-release-plugin, git-tag

使用 Maven 发布插件时，我遇到了 git 标签的问题。我们已经关闭了期间自动推送到 git`mvn release:perform`的功能，为了构建一个新版本，我们做了以下工作：

1.  从远程 git 存储库中提取最新更改。
2.  `mvn release:prepare`
3.  `mvn release:perform`
4.  `git push origin master`
5.  `git push --tags`

这个场景有效，提交被标记并且一切都很好。但是，在这种情况下，标签会丢失：

1.  从远程 git 存储库中提取最新更改。
2.  `mvn release:prepare`
3.  有人向主人推了一个承诺！
4.  `mvn release:perform`
5.  `git push origin master`-- 不起作用，因为有新的提交，所以
6.  `git pull --rebase origin master`
7.  `git push origin master`
8.  `git push --tags`

Git 声明已经推送了新标签，但是除了我（构建构建的人）之外的任何人都无法使用它们，使用 时它们也不可见`gitk`，因此在所有实际使用中，标签都丢失了。

这是 git 中的错误，还是使用错误（确保构建时没有提交是我们的责任）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:13:18.347

正如其他人已经说过的那样，问题在于标签不会在变基后自动更新为指向新的提交 ID。

避免这种情况的一种简单方法是仅使用*merge*而不是*rebase*。然后您的提交将不会被修改，并且标签仍然指向正确的提交。

对于您的间接问题：其他人没有“看到”旧标签的原因是，Git 默认情况下仅在可从已获取的提交中访问标签（例如，在已获取的分支上）时才获取标签。要获取所有标签，请使用以下命令：

```
git fetch --tags 
```

这将获得标签，但它们仍将指向旧的（在变基之前）提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:46:07.350

这是一个使用错误。标签是指特定的提交，由其 SHA1 哈希标识。当您键入

```
git pull --rebase origin master 
```

您正在重写历史记录，以便您的本地更改建立在远程`master`分支的新状态上。您标记的提交不再出现在此历史记录中，尽管通过使用`gitk --all`您应该能够看到它们仍然存在于本地存储库的替代历史记录中。

`master`拥有一个直接用于标记发布以及对来自多个开发人员的推送提交开放的分支可能是一个错误。您可以改为为每个版本创建一个新分支，就像在[这个工作流](http://nvie.com/posts/a-successful-git-branching-model/)中一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:27:22.273

正如在另一个答案中所说的那样，rebase 正在搞乱历史，因此标签不再是它们应该在的位置。

现在，我可以通过以下方式获取我的标签：

删除本地 git 标签： `git tag -d nameoftag`

删除远程 git 标签（我已经推送）：`git push origin :refs/tags/nameoftag`

创建一个新标签，现在在正确的位置：`git tag nameoftag HEAD`（HEAD 可以代替 sha-id）

最后，推送标签：`git push --tags`

现在其他人可以享受缺少的标签，但对于未来，我想我只会发送一封我正在为发布而构建的电子邮件，警告任何推动东西的人会产生可怕的后果。

# java - 编写正则表达式以从 Java 文本中提取单词

> ID：15338274
> 
> 赞同：5
> 
> 时间：2013-03-11T12:11:59.663
> 
> 标签：java, regex

我使用正则表达式在 Java 中编写程序，我有很多句子给定字符串的结构；“为医生 ahmed mohamed 写的‘学习 Java’一书”。或者“最好的标题：为ahmed mohamed学习java”，等等……，

意思是：

（书）可以是[书或文本：或（文本）]。

（对于医生）可以是[为作者或为或由医生]。

输出：

我想在（书）和（医生）之前提取任何单词并将其命名为标题。并在（对于医生）之后提取任何单词并将其命名为作者。

```
String inputtext =  "book 'learning java' for doctor  ahmed mohamed";

    Pattern p = Pattern.compile("(?<=(book| the book| \\( . \\)|\\:)) .*? (?=(for doctor| for| for author))");

    Matcher m = p.matcher(inputtext);

        if (m.matches()) {
        String author = m.group(1).trim();
        String bookTitle = m.group(2).trim();

        System.out.println("Title is : " + author);
        System.out.println("Author is : " + bookTitle); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:41:51.617

我会尝试提供一个提示，但由于我看不懂你的表情，我只能猜测。

所以你的表达是这样的：

```
(?<=(للدكتورة|للعلامه|للشيخ|للكاتب |للكاتبه|للامام|للاستاذ|للقاضى|للدكتور|ل ))\s[^\s]+\s[^\s]+ 
```

在分解中，它看起来像这样：

*   积极寻找背后`(?<=(للدكتورة|للعلامه|للشيخ|للكاتب |للكاتبه|للامام|للاستاذ|للقاضى|للدكتور|ل ))`
*   一个空格字符，后跟一些单词
*   一个空格字符，后跟一些单词

基本上，匹配将是包含 2 个空格的任何序列 - 单词组合，并且前面是匹配中的任何单词。

正如您所说，这似乎是您的实际问题：

> 这个表达只给我2个字

一种可能的解决方案是匹配两个以上的单词，甚至可能匹配一个以上的空格。因此，在您向后看之后，试试这个：`(?>\s+[^\s]+)+`而不是`\s[^\s]+\s[^\s]+`. 这部分应该匹配任何后跟非空格的空格序列，例如（用英文字母）它会匹配`aaa bbb`（`aaa bbb ccc ddd`HTML 不会在此处显示多个空格，但想象间隙大于一个空格）。

# java - @Around 切入点调用方法两次

> ID：15338277
> 
> 赞同：4
> 
> 时间：2013-03-11T12:12:27.073
> 
> 标签：java, aspectj, spring-aop

有时我的 API 会抛出异常，该服务器无法处理我的请求。我决定创建将重新调用 API 调用的 AOP 方面。例如，5 次，之后如果仍然不起作用，则抛出异常。

请看我的 AOP 课程。这不是一个完整的身体，但我希望你能够理解发生了什么：

```
@Aspect
public class RetryRequestExecutor {

    ....

    @Around("@annotation(com.test.RequestRetriable)")
    public Object retryApiRequest(ProceedingJoinPoint point) throws Throwable {
        int numAttempts = 0;
        ServiceException lastException;
        do {
            numAttempts++;
            try {
                preInvokeLog(point);
                Object retValue = point.proceed();
                postInvokeLog(point);
                return retValue;
            } catch (ServiceException e) {
                lastException = handleServiceException(point, numAttempts, e);
            }
        } while (numAttempts <= maxRetries);
        throw lastException;
    }

    ....
} 
```

这是我的服务类：

```
public class UserApiImpl implements UserApi {

    ...

    @Override
    public List<DomainUser> retrieveSuspendedUsers() throws Exception{
        LOG.debug("Retrieving suspended users.");

        ...

        List<DomainUser> users = new ArrayList<DomainUser>(64);
        do {
            //Invoke API. AOP invoke it two times! 
            currentPage = getUsers(retrieveUrl);
                    ...
                    URL nextLink = currentPage.getNextLink();
                    if (nextLink == null){
                        break;
                    }
            ...
        } while (nextLink != null);

        return users;
    }

    @Override
    @RequestRetriable
    public UserFeed getUsers(URL feedUrl) throws Exception {
        return userService.getFeed(feedUrl, UserFeed.class);
    }

    ...
} 
```

如您所见，我只注释了`getUsers`方法。方法`retrieveSuspendedUsers`没有注释。

[Spring](http://www.springsource.org/)配置如下所示：

```
<aop:aspectj-autoproxy/> 
```

现在，当我直接调用`getUsers`方法时，一切正常——AOP 只调用一次。但是当我调用`retrieveSuspendedUsers`方法时 - AOP 为每个页面调用它两次（我逐页检索用户，页面大小等于 100）。我可以在下面的日志中看到：

```
2013-03-11 13:06:40,179 DEBUG [pool-2-thread-1] Invoke API request getUsers with arguments [https://domain.com/user/2.0/]
2013-03-11 13:06:40,180 DEBUG [pool-2-thread-1] Invoke API request getUsers with arguments [https://domain.com/user/2.0/]
2013-03-11 13:06:41,745 DEBUG [pool-2-thread-1] Invoke API request getUsers with arguments [https://domain.com/user/2.0/] finished successfully
2013-03-11 13:06:41,745 DEBUG [pool-2-thread-1] Invoke API request getUsers with arguments [https://domain.com/user/2.0/] finished successfully 
```

API 调用非常耗时，我想避免额外的、不必要的调用。如何解决这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:40:42.950

AFAIK 切入点拦截被称为切入点建议的事件`call`和`execution`事件。您可以过滤以匹配`execution`切入点中的唯一方法：

```
@Around("execution(* *(..)) && @annotation(com.test.RequestRetriable)") 
```

# websphere - IBM Websphere BPM / Lombardi

> ID：15338281
> 
> 赞同：2
> 
> 时间：2013-03-11T12:12:36.370
> 
> 标签：websphere

我想下载 IBM Websphere BPM 或 Lombardi。我在谷歌搜索我没有找到任何具体的。任何人都可以让我知道我可以免费下载 Websphere BPM 以供学习的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:39:24.923

IBM 没有 IBM BPM (IBM Business Process Manager) 的免费版或学生版。也没有可下载的演示版或可下载的试用版。

曾经有可用的试用云版本（[链接](http://www.ibm.com/developerworks/downloads/soasandbox/ibmbpm.html)），但网页上说它已于 2013 年 3 月 31 日停止使用。仍然值得尝试该选项。

最好的资源可能是[http://IBMBPMDemos.com](http://IBMBPMDemos.com)。既可用于信息/下载，也可用于有关要联系的人的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:22:32.970

您可以在以下位置找到试用下载：[http ://www14.software.ibm.com/webapp/download/search.jsp?pn=WebSphere+Process+Server](http://www14.software.ibm.com/webapp/download/search.jsp?pn=WebSphere+Process+Server)

我不知道免费的学习版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T09:09:25.903

IBM Lombardi 是一种许可产品。但是，如果您想从流程设计开始，那么您可以在 IBM Blueworks 上拥有一个帐户，它是一个开源并且只涉及流程设计，至少这可以帮助您理解 BPMN 2.0。使用 IBM Lombardi 7.5 信息中心在 google 上搜索。在那里您可以获得详细信息，也可以下载 IBM Redbooks for Lombardi，但可安装不是开源或免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T20:52:25.930

IBM BPM 没有标准版或高级版的免费或试用版，它是许可产品

# asp.net - 将 ascx 的超链接链接到 aspx

> ID：15338282
> 
> 赞同：0
> 
> 时间：2013-03-11T12:12:43.140
> 
> 标签：asp.net

我在 ascx 文件中有一个超链接，它的 navigateurl 设置在另一个 aspx 页面中如何链接它们

在 aspx 中：

```
 HyperLink ShowRelated = (HyperLink)logout1.FindControl("hypRelated");
        ShowRelated.Visible = true;

        ShowRelated.NavigateUrl = string.Format("RelatedFields.aspx?mid={0}&fid={1}&srchid={2}&searchStr={3}&pkId={4}",
                                    MetaId, filterId, searchId, searchStr, pkId); 
```

在 ascx 中：

```
 <asp:HyperLink ID="hypRelated" data-role="button" style="text-align:center;margin:0 15px 0 15px" data-mini="true" runat="server" Visible="false"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:23:22.460

只需在您的用户控件上创建一个属性，即可将映射到超链接并在您的 aspx 页面中进行设置。例如

```
public HtperLink Related 
{
     get
     {
          return hypRelated;
     }
} 
```

然后在你的 aspx

做就是了

```
MyUserControl.Related.NavigateUrl = string.Format("RelatedFields.aspx?mid={0}&fid={1}&srchid={2}&searchStr={3}&pkId={4}",
                                    MetaId, filterId, searchId, searchStr, pkId); 
```

# batch-file - 只有当特定的 IF 语句有效时，是否可以读取文件的下一行？

> ID：15338283
> 
> 赞同：1
> 
> 时间：2013-03-11T12:12:45.247
> 
> 标签：batch-file, line, counter, increment, next

我想知道，如果某个 IF 语句在其中有效，是否可以跳过读取 FOR /F 循环中的一行？例如：

```
FOR /F "tokens=* delims=" %%j in (exclusions.txt) do ( 
IF %SomethingIDeclaredBefore%==%%j (jump to the next line of the text file) else (echo not equal) 
```

我想不可能增加`%%j.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:18:22.447

怎么样

```
for /l %%C in (1,1,254) do (
 findstr /b /e "172.24.104.%%C" exclusions.txt >nul
 if errorlevel 1 (echo shutdown) else (echo skip)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:39:50.847

你在正确的轨道上。只需执行一个 if 语句来检查`if not %SomethingIDeclaredBefore%==%%j`. 这样，只有与语句不匹配的行才会在循环中处理，本质上是跳过该行。

```
FOR /F "tokens=* delims=" %%j in (exclusions.txt) do ( 
    IF NOT %SomethingIDeclaredBefore%==%%j (echo not equal)
) 
```

## 更新

如果我从您的评论中了解您的情况，这应该可以满足您的要求。要检查每个地址的排除，完整的排除循环必须在地址循环内。

```
SETLOCAL EnableExtensions EnableDelayedExpansion
FOR /L %%C IN (1,1,254) DO (
    SET "Found=false"
    FOR /F "tokens=* delims=" %%J IN (exclusions.txt) DO (
        IF "172.24.104.%%C"=="%%J" SET "Found=true"
    )
    IF "!Found!"=="true" ( ECHO Skip ) ELSE ( ECHO Shutdown )
)
ENDLOCAL 
```

# jquery - jQuery：点击功能和ajaxy插件

> ID：15338284
> 
> 赞同：0
> 
> 时间：2013-03-11T12:12:48.163
> 
> 标签：jquery, jquery-click-event

我正在使用 balupton ajaxy 插件。

我正在尝试使用 on("click") 函数在元素上添加一个类，但由于处理特定元素上的单击函数的 ajaxy 插件，它不起作用。

我有这个清单：

```
<ul class="menu">
   <li><a href="company.html" class="ajaxy ajaxy-page"> company</a>
   <ul>
      <li><a href="aboutus.html" class="ajaxy ajaxy-page">aboutus</a></li>
      <li><a href="contactus.html" class="ajaxy ajaxy-page">contactus</a></li>
      </ul>  
      </li>
   <li><a href="services.html" class="ajaxy ajaxy-page">services</a></li>
</ul> 
```

我已经尝试过了，它适用于“li”，但不适用于“a”元素。

```
$(".menu li").on("click", function(){
  alert("aa");
}); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:38:05.413

如果您希望 LI 和 A 响应，我会尝试这样做：

```
$(document).ready(function(){
  $(".menu li,.menu a").on("click", function(){
    alert("aa");
  });
}); 
```

并且不要忘记在准备好的文档中调用它，以便在插件完成后对其进行初始化。

加速

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:31:05.420

我会将您的新点击处理程序放在插件代码之外，可能在它之后。

```
//Plugin code here
// $(".menu li").click(function(){
  alert("aa");
 }); 
```

或者，您可以探索 AJAXY 插件是否提供回调功能？

# java - 使用 struts 2 表单标签编辑对象的 ArrayList

> ID：15338286
> 
> 赞同：2
> 
> 时间：2013-03-11T12:12:49.787
> 
> 标签：java, jakarta-ee, struts2, ognl, struts-tags

我有 2 节课 -`Student`和`Course`. 两者都在它们内部的属性上定义了所有 getter 和 setter。使用这两个类，我正在尝试构建一个具有通用功能的 Web 应用程序，例如在不同的 jsp 页面中编辑和添加学生。我的学生可能已经注册了多门课程，并且每个学生的每门课程的分数应该可以在应用程序内进行编辑。

现在我有一个`studentMarks.jsp`从动作类加载数据的 -`StudentAction`

```
public class StudentAction extends ActionSupport {
    private static final long serialVersionUID = 1L;
    private List<Student> studentList;
    private List<Course> courseList;
    private HashMap<Student,List<Course>> studentCourseList; 
    private int rollNo;
    private String name;
    private String DOB;
    StudentService studentService;
    CourseService courseService;
    Student student;
    Course course;    
    /**** Setters and getters for all the attributes here **/

    public String studentCourseList() {
        this.studentList = studentService.getStudentRecords();          
        studentCourseList = new HashMap<Student, List<Course>>();
        for(Student s : studentList) {              
            this.studentCourseList.put(s,courseService.getStudentCourses(s.getRollNo()));
        }
        return "SUCCESS";
    }

    public String editCoursePage() {
        this.student = studentService.getStudent(rollNo);
        this.courseList = courseService.getStudentCourses(rollNo);
        return "SUCCESS"; //loads the editCourse.jsp
    }

    public String editCourseAction() {
        System.out.print("This line displays null pointer exception" + courseList.size());
        //courseService.editCourse(rollNo,this.courseList);
        return "SUCCESS";
    }
} 
```

首先加载一个执行**studentCourseList**操作的页面，该操作用所有记录填充页面（此页面工作正常），并且在每条记录之后都有一个编辑按钮。单击编辑后，将调用**editCoursePage**设置一个学生对象并获取该学生的课程列表。请注意，我没有重复使用 hashmap 中的课程列表。在此页面中，学生分数与文本框内的分数一起显示，以便进行编辑。此页面显示正确的学生信息。

**编辑课程.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Edit courses</title>
    </head>
    <body>

        Student: <s:label value="%{student.name}" />

        <s:form action="editCourseAction">
            <s:hidden name="rollNo" value="%{student.rollNo}" />

            Courses: 

            <s:iterator value="courseList" var="courses">
                <s:label ><s:property value="name" /></s:label>
                <s:textfield name="marks" theme="simple"/>
                <br />            
            </s:iterator>

            <s:submit action="editCourseAction" value="submit" />

        </s:form>
    </body>
</html> 
```

**课程.java**

```
@Entity
@Table(name="courses")
public class Course {

    @Id
    @GeneratedValue
    @Column(name="id")
    int id;

    @Column(name="marks")
    int marks;

    @Column(name="rollNo")
    int rollNo;

    @Column(name="course")
    String course;
    //all getters and setters
} 
```

现在这个表单正在显示正确的数据，但问题是提交时，它没有将课程的值传递回**editCourseAction**。我已经尝试过各种可以通过表单填充列表但无法完成的 OGNL 表达式。如果我尝试在动作类中获取 courseList 的值，它总是通过 NPE。虽然它没有正确发送**rollNo**。请告诉我我做错了什么。是语法问题还是方法错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:46:26.970

如果要向 Action 发送回对象列表，则需要在属性中指定**索引：**`name`

代替

```
<s:iterator value="courseList">
   <s:textfield name="marks" />
</s:iterator> 
```

利用

```
<s:iterator value="courseList" status="ctr">
   <s:textfield name="courseList[%{#ctr.index}].marks" />
</s:iterator> 
```

# gcc - 如何在使用-DN标志使用g ++编译期间传递值

> ID：15338289
> 
> 赞同：5
> 
> 时间：2013-03-11T12:13:00.647
> 
> 标签：gcc, g++, compiler-flags

我听说您可以在编译期间使用 g++ 的 -DN 标志在 c++ 程序中设置值。谁能解释一下如何？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T01:11:55.190

`-DXXX`flag 就像添加`#define XXX`. `-DN=2`就像`#define N 2`. _

您可以在编译期间使用此标志传递值。

参考：

*   [GCC 预处理器选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options)

# jquery - Jquery：过滤功能

> ID：15338291
> 
> 赞同：0
> 
> 时间：2013-03-11T12:13:08.570
> 
> 标签：jquery

我使用过滤器功能浏览了一个类列表。如果下拉列表为空，则添加错误样式。

**问题。** 如果满足条件，我想隐藏并显示其他 div id，即如果所有下拉列表都包含选定的值

这是我将样式添加到空下拉列表的代码

```
 $(".dropdown_select").filter(function(){
 return $(this).val() == "";
 }).css("border-color", "#FF0000"); 
```

但是我该如何隐藏和显示另外两个 div id？即只有当所有下拉列表都被填满时，我想

```
$(".step-2").fadeIn("slow");
$(".step-1").fadeOut("slow"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:18:16.693

```
var $children = $(".dropdown_select").children();

if($children.length === $children.filter(".dropdown_select").length) {
   $(".step-2").fadeIn("slow");
   $(".step-1").fadeOut("slow");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:07:36.590

对于样式，我建议使用`toggleClass()`函数参数而不是`filter()`and `css()`：

```
$(document).on("change", ".dropdown_select", function () {
  var $emptyOnes = $(".dropdown_select")
                   .filter(function () { return this.value == ""; });

  if ($emptyOnes.length == 0) {
    $(".step-1").fadeOut("slow");
    $(".step-2").fadeIn("slow");
  } 

  $(this).toggleClass("empty", this.value == "");
}); 
```

Tre CSS 定义如下：

```
.empty {
  border-color: #FF0000;
} 
```

# php - 将页面从 PDF 分离为图像或 HTML

> ID：15338295
> 
> 赞同：0
> 
> 时间：2013-03-11T12:13:16.140
> 
> 标签：php, jquery, html, pdf

对于一个项目，我需要创建一个网络工具，用户可以在其中上传 PDF 文档，这些文档可以在浏览器中显示，并带有一些翻页 jQuery 的东西。

为此，我需要将 PDF 分成页面（图像或 html）以生成 jQuery 翻书。

有人有建议如何做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:11:10.920

您需要[ImageMagick](https://www.imagemagick.org/script/download.php)来执行此操作。安装后，您需要上传 PDF 并执行以下操作：

```
if (move_uploaded_file($_FILES['Filedata']['tmp_name'], $uploadfile)) {

$im = new imagick();
$im->setresolution(300, 300); // For hi-res
$im->readimage($uploadfile . "[0]"); // [0] is the PDF page
$im->setImageFormat("png");
$im->writeimage($newname);

} 
```

您将在 $newname 上获得第 1 页的 PNG 文件。

编辑：

如果您需要了解 PDF 的页面，您可以执行以下操作：

```
$im = new imagick();
$im->pingimage($uploadfile);
$pages = $im->getnumberimages(); 
```

然后使用 for 循环运行它并保存页面。

# android - 麦克风图形声音分析仪

> ID：15338298
> 
> 赞同：6
> 
> 时间：2013-03-11T12:13:19.923
> 
> 标签：android, audio, microphone

我正在构建一个应用程序，该应用程序具有记录来自麦克风的声音的功能。**提供传入声音**的图形视图会很方便，例如[http://www.filebuzz.com/software_screenshot/full/10920-Audio_Edit.gif](http://www.filebuzz.com/software_screenshot/full/10920-Audio_Edit.gif)。

我在网上搜索了一些教程，但我唯一找到的是Audalyzer，但我很难掌握它，它也是使用整个界面并且不清楚如何将其实现为小部件。 ..

也许有人知道这方面的好教程或示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:33:25.433

您可能希望为此使用快速傅立叶变换。

我会尝试 jTransforms：[https](https://sites.google.com/site/piotrwendykier/software/jtransforms)

://sites.google.com/site/piotrwendykier/software/jtransforms 此处的博客：[http](http://trueharmoniccolours.co.uk/Blog/) ://trueharmoniccolours.co.uk/Blog/很好地介绍了 FFT 的作用和方式你可以把它变成一个图表。我担心到最后你会理解 FFT ......

# vba - 使用 VBA 在 Word 中设置嵌套字段

> ID：15338309
> 
> 赞同：2
> 
> 时间：2013-03-11T12:13:39.243
> 
> 标签：vba, excel, ms-word, word-field

我正在从模板中构建一个大文档。每个模板`#OVERALLPAGENUMBER#`在页脚中都有一个关键字，我用一个字段以编程方式替换（使用 Excel VBA）。

如果我只需要该文档的页码，则以下内容就足够了：

```
Dim storyRange As Object 'Word.Range
For Each storyRange In oDoc.StoryRanges
    Do
        With storyRange.Find
            .Text = "#OVERALLPAGENUMBER#"
            .Wrap = 1 'wdFindContinue
            .Execute
            While .found
                storyRange.Fields.Add Range:=storyRange, Type:=-1, Text:="PAGE", PreserveFormatting:=True
                .Execute
            Wend
        End With
        On Error Resume Next
        Set storyRange = storyRange.NextStoryRange
        On Error GoTo 0
    Loop While Not storyRange Is Nothing
Next 
```

我已经测试了这段代码，它成功地将页码放在了页脚中。但是，我想要的是一个嵌套（公式）字段，它将一个固定数字添加到页码中，以便我可以跨多个文档显示页数。如果我手动执行（使用 Ctrl+F9），我的解决方案会给出如下所示的域代码：

```
{ = 5 + { PAGE } } 
```

并在第 1 页正确生成“6”，在第 2 页正确生成“7”，等等...

不管我尝试什么，我都无法使用 VBA 复制这种字段嵌套。（宏记录器在这里没用）。谁能找到以编程方式创建这些字段的方法？

* * *

**解决方案**

我的问题是，`PreserveFormatting:=True`这妨碍了我将一个字段嵌套在另一个字段中的尝试。现在以下简单的解决方案有效：

```
With storyRange.Find
    .Text = "#POLICYPAGENO#"
    .Wrap = 1 'wdFindContinue
    .Execute
    While .found
        storyRange.Select
        With oDoc.ActiveWindow
            .Selection.Fields.Add Range:=.Selection.Range, Type:=-1, Text:="PAGE", PreserveFormatting:=False
            .Selection.MoveLeft Unit:=1, Count:=1, Extend:=1
            .Selection.Fields.Add Range:=.Selection.Range, Type:=-1, PreserveFormatting:=False
            .Selection.TypeText Text:="= " & OverallPageNumber & " +"
        End With
        .Execute
    Wend
End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-19T23:24:48.653

我知道这是旧的，但昨天尝试这样做，我发现创建嵌套字段比使用 Selection 对象更简单的解决方案。我在网上找到的唯一解决方案错误地说，如果不使用 Selection 对象，就无法插入嵌套字段。但是，我发现您可以在 Field.Code 范围内插入一个嵌套字段，这使得代码更易于操作、更快、更直观。如：

```
Dim storyRange As Object 'Word.Range
For Each storyRange In oDoc.StoryRanges
    Do
        With storyRange.Find
            .Text = "#OVERALLPAGENUMBER#"
            .Wrap = 1 'wdFindContinue
            .Execute
            While .Found
                Set fld1 = storyRange.Fields.Add(Range:=storyRange, Type:=-1, Text:="=p+" & OverallPageNumber, PreserveFormatting:=False)
                Set fld2 = storyRange.Fields.Add(Range:=fld1.Code.Characters(3), Type:=-1, Text:="PAGE", PreserveFormatting:=False)
                fld1.Update
                .Execute
            Wend
        End With
        On Error Resume Next
        Set storyRange = storyRange.NextStoryRange
        On Error GoTo 0
    Loop While Not storyRange Is Nothing
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:36:35.420

我很确定您的查找和替换方法将在`#OVERALLPAGENUMBER#`每次循环时选择文本。如果是这种情况，您可以替换`storyRange.Fields.Add Range:=storyRange, Type:=-1, Text:="PAGE", PreserveFormatting:=True`为以下内容，这会将您所需的字段代码放置在当前选择中：

```
Selection.Fields.Add Range:=Selection.Range, Type:=wdFieldEmpty, PreserveFormatting:=False
Selection.TypeText Text:="= 5 +"
Selection.Fields.Add Range:=Selection.Range, Type:=wdFieldEmpty, PreserveFormatting:=False
Selection.TypeText Text:="PAGE"
Selection.Fields.Update 
```

编辑：前面的代码仅在`PreserveFormatting`设置为`False`. `PreserveFormatting`如果设置为，Word 似乎会更新一个空域代码`True`。您可以导航选择以保留以下格式。您应该只需要`PreserveFormatting`外部字段。

```
Selection.Fields.Add Range:=Selection.Range, Type:=wdFieldEmpty, PreserveFormatting:=True
Selection.MoveRight Unit:=wdCharacter, Count:=1, Extend:=wdExtend
Selection.Fields.ToggleShowCodes
Selection.MoveLeft Unit:=wdCharacter, Count:=1
Selection.MoveRight Unit:=wdCharacter, Count:=1
Selection.TypeText Text:="= 5 +"
Selection.Fields.Add Range:=Selection.Range, Type:=wdFieldEmpty, PreserveFormatting:=False
Selection.TypeText Text:="PAGE"
Selection.Fields.Update 
```

# android - 安装应用程序后如何创建内部文件？

> ID：15338311
> 
> 赞同：0
> 
> 时间：2013-03-11T12:13:46.560
> 
> 标签：android, android-activity

安装应用程序后，我想在内部存储中创建一个文件。事实上，当我运行我的函数时，我希望有一个内部存储。但我不知道如何，我使用服务或活动以及如何使用。`onCreate()`我在我的主要活动中使用了下面的代码。但是问题是，一旦我的应用程序开始运行，我检查了我的文件，它是空的，其中包含的数据已被删除。

```
String file_name = "profil1.txt";
        String file_name1 = "profil2.txt";
        File f = new File("file_name");
        try {
            if(f.exists()){
            Log.d(TAG, "les fichiers sont deja cree");
            }else {
                FileOutputStream fos = openFileOutput(file_name, Context.MODE_WORLD_WRITEABLE);
                FileOutputStream fos1 = openFileOutput(file_name1, Context.MODE_WORLD_WRITEABLE);   

            }
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:24:59.210

更改`File f = new File("file_name");`为

`File f = new File(file_name);`

# linux - Linux - 使用文件输入命令输入并在命令运行时删除文件

> ID：15338313
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:13:51.553
> 
> 标签：linux, background-process, io-redirection

有人可以告诉我一个单行命令来从文件中提供我的 cmd 输入并在命令仍在运行时删除同一个文件吗？

编辑：我的意思是单行命令，在一个命令中执行整个操作。这种行为与同时执行进程和命令有关。因此，我想看看当命令行输入被提供一个文件时会发生什么，并且在同一命令中使用同时进程执行（读取前台和后台）的概念删除文件，而 cmd 输入仍在读取它

我试过

```
$ cat dummy_file.txt | rm -i
rm: missing operand
Try rm --help for more information 
```

显然我尝试的 cmd 是错误的。也许我需要将其中一个命令作为后台作业运行，但我不确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:23:31.350

不确定您实际想要达到的目标；但是您的示例命令可以通过使用 xargs 以某种方式“修复”：

```
echo "dummy_file.txt" > dummy_file.txt
cat dummy_file.txt | xargs rm -i 
```

顺便提一句。如果您担心在使用文件时删除文件：当文件正在被进程使用（即保持打开状态）时，其*内容*不会从磁盘中删除。即使用 删除文件`rm`，也只会删除目录结构中的文件名；只有当文件不再被任何进程保持打开时，才会释放实际内容的磁盘空间。

# java - 游戏框架的并行测试运行器

> ID：15338315
> 
> 赞同：9
> 
> 时间：2013-03-11T12:13:56.217
> 
> 标签：java, junit, sbt, playframework-2.1, test-runner

*涉及Play 框架*`TestServer`类的功能测试似乎只能在 Play 控制台内工作。

 *`play test`不幸的是，该命令执行的 Play 控制台中的股票测试运行*程序按顺序*执行测试，这需要很多时间。我认为如果它们并行执行，它们会运行得更快。

有没有办法并行运行测试？

`TestServer`更新：理论上，SBT 支持在不同的 JVM 中并行运行测试，如果它们在不同的端口上侦听，则可以使多个实例并行运行。Play 似乎忽略了这些设置。请参阅我报告的问题：[https](https://github.com/playframework/Play20/issues/849) ://github.com/playframework/Play20/issues/849 。赏金适用于展示了一种使 Play 框架尊重这些 SBT 测试设置以使用 Build.scala 文件在不同 JVM 中并行运行基于 junit 的测试的方法的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:03:44.873

经过对该主题的调查，Play 似乎忽略了 SBT 测试配置设置。我在这里报告了这个问题：

[https://github.com/playframework/Play20/issues/849](https://github.com/playframework/Play20/issues/849)

我不想将我的答案标记为已接受，因为我希望我忽略了一些东西，并且可以在游戏框架中并行运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:11:46.927

Play2 的默认 specs2 设置不允许并行执行。 [https://github.com/playframework/Play20/blob/master/framework/project/Build.scala#L290](https://github.com/playframework/Play20/blob/master/framework/project/Build.scala#L290)

```
 parallelExecution in Test := false 
```

所以你需要在你的 Build.scala 中覆盖这个设置。

```
 parallelExecution in Test := true 
```

但我认为你不能并行执行测试，因为`TestServer`需要端口。如果要并行执行测试，则应在每个测试用例中更改端口。*

# c# - EntityFrameWork 模型关系配置

> ID：15338317
> 
> 赞同：1
> 
> 时间：2013-03-11T12:13:59.693
> 
> 标签：c#, entity-framework, entity-framework-5

我正在使用 ef 5 代码优先解决方案进行编码，并且我的模型如下：

```
public class User
{
   public int Id {get;set;}

   public int Role1Id {get; set;}
   public Role Role1 {get; set;}
} 
```

和另一个模型：

```
public class Role
{
   public int Id { get; set;}

   public string Title {get; set;}
} 
```

我也在另一个类中配置这个模型如下：

```
 public class UserConfig : EntityTypeConfiguration<User>
    {
        public UserConfig()
        {
            ToTable("User", "dbo");
            // Here i want introduce Role1 as navigation property for Role1Id property
        }
    } 
```

这里是一个问题：我如何配置用户模型来引入 Role1 作为 Role1Id 属性的导航属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:16:20.547

您可以使用注释：

```
public class User
{
   public int Id {get;set;}

   public int Role1Id {get; set;}

   [ForeignKey("Role1Id")]
   public Role Role1 {get; set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:25:58.617

只要 id 与数据库模式中生成的字段匹配，EF 就应该自动配置它。

您可以尝试在 UserConfig 中使用以下内容对其进行配置：

```
HasRequired(user => user.Role1)
   .WithRequiredDependent()
   .Map(mapping => mapping.MapKey("Role1Id"); 
```

这会将其配置为必需的。如果不需要，您也可以使用 HasOption 方法。

# android - 在 Fragment 内使用 FragmentTabHost 时出错

> ID：15338320
> 
> 赞同：0
> 
> 时间：2013-03-11T12:14:02.390
> 
> 标签：android, android-fragments, android-tabhost

我试图在 a 中添加`FragmentTabHost`一个`Fragment`（这是另一个选项卡小部件的内容。

我使用了以下 xml：

```
<android.support.v4.app.FragmentTabHost
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    <LinearLayout
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0"/>
        <FrameLayout
                android:id="@+id/realtabcontent"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"/>
        <TabWidget
                android:id="@android:id/tabs"
                android:orientation="horizontal"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"/>

    </LinearLayout>
</android.support.v4.app.FragmentTabHost> 
```

在我`Fragment`的`onCreateView()`方法中：

```
View basicSearchView = inflater.inflate(R.layout.search_layout, container, false);
        try {
        mTabHost = (FragmentTabHost) basicSearchView.findViewById(android.R.id.tabhost);
        LocalActivityManager mLocalActivityManager = new LocalActivityManager(this, false);
        mTabHost.setup(mLocalActivityManager);

        TabHost.TabSpec tab = mTabHost.newTabSpec("my tab content");

        tab.setContent(new Intent(getActivity(), JoinActivity.class));
        tab.setIndicator("Test", getResources().getDrawable(R.drawable.search_pheeds_selector));
        mTabHost.addTab(tab);
        }
        catch (Exception e) {
            Log.e("Udi",e.getMessage());
        }

        return basicSearchView; 
```

起初我得到以下错误：

```
ERROR/Udi(25726): Must call setup() that takes a Context and FragmentManager 
```

之后我将设置更改为：

```
mTabHost.setup(getActivity(), getChildFragmentManager(), R.id.realtabcontent); 
```

我得到了这个错误：

```
ERROR/Udi(25996): Did you forget to call 'public void setup(LocalActivityManager activityGroup)'? 
```

有没有正确的方法将标签主机放在里面`Fragment`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:41:44.727

您尚未阅读[`FragmentTabHost`](http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)该类的文档，该文档明确指出这`FragmentTabHost`是一个*特殊的 TabHost，它允许将 Fragment 对象用于其选项卡内容。*. 因此，您不能将选项卡设置为活动，并且当您尝试在片段中进行活动时，无论如何它都没有意义（应该是相反的方式）。

因此，修改您的代码以使用片段作为选项卡内容或使用正常`TabHost`的 an`Activity`以继续将这些活动用作选项卡（此选项已弃用，您真的应该使用第一个选项）。

> 有没有正确的方法将标签主机放在片段中？

在我链接的文档中，您有一个示例，如果我没记错的话，支持库的示例中有一些示例。

# ruby-on-rails - 使用加密算法存储和检索用户名和用户密码

> ID：15338321
> 
> 赞同：0
> 
> 时间：2013-03-11T12:14:08.693
> 
> 标签：ruby-on-rails, devise

我正在将设计 gem 用于我的应用程序的用户注册和会话处理模块。我想加密用户名和密码，以便我可以将其存储在数据库中，并且为了在我的应用程序中使用它，我可以从数据库中检索并使用它们。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:21:23.227

设计已经这样做了。因此，您不必关心密码的加密。

# python - 使用 pyephem 计算卫星何时穿过经度

> ID：15338324
> 
> 赞同：6
> 
> 时间：2013-03-11T12:14:32.680
> 
> 标签：python, latitude-longitude, pyephem

我很难弄清楚如何计算卫星何时穿过特定经度。如果能够提供时间段和 TLE 并能够返回卫星在指定时间段内穿过给定经度的所有时间，那就太好了。pyephem 支持这样的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T14:01:07.687

用户可能会询问很多可能的情况——当卫星穿过特定经度时；当它到达特定纬度时；当它达到一定高度或下降到最低高度时；当它的速度最大或最小时——PyEphem 不会尝试为所有这些提供内置函数。相反，它提供了一个`newton()`功能，让您可以找到您想要在卫星属性和您想要搜索的该属性的预定值之间进行的任何比较的过零。

请注意，SciPy Python 库包含几个非常仔细的搜索函数，它们比 PyEphem 的`newton()`函数要复杂得多，以防您正在处理一个行为特别糟糕的函数：

[http://docs.scipy.org/doc/scipy/reference/optimize.html](http://docs.scipy.org/doc/scipy/reference/optimize.html)

以下是您如何搜索卫星（在本例中为国际空间站）通过特定经度的方法，以展示一般技术。这不是最快的方法——特别是每分钟的搜索，如果我们非常小心，可以加快速度——但它被写得非常笼统和非常安全，以防除了经度之外还有其他值你也想搜索。我试图添加文档和注释来解释发生了什么，以及为什么我使用`znorm`而不是返回简单的差异。让我知道这个脚本是否适合你，并清楚地解释它的方法！

```
import ephem

line0 = 'ISS (ZARYA)             '
line1 = '1 25544U 98067A   13110.27262069  .00008419  00000-0  14271-3 0  6447'
line2 = '2 25544  51.6474  35.7007 0010356 160.4171 304.1803 15.52381363825715'

sat = ephem.readtle(line0, line1, line2)
target_long = ephem.degrees('-83.8889')

def longitude_difference(t):
    '''Return how far the satellite is from the target longitude.

    Note carefully that this function does not simply return the
    difference of the two longitudes, since that would produce a
    terrible jagged discontinuity from 2pi to 0 when the satellite
    crosses from -180 to 180 degrees longitude, which could happen to be
    a point close to the target longitude.  So after computing the
    difference in the two angles we run degrees.znorm on it, so that the
    result is smooth around the point of zero difference, and the
    discontinuity sits as far away from the target position as possible.

    '''
    sat.compute(t)
    return ephem.degrees(sat.sublong - target_long).znorm

t = ephem.date('2013/4/20')

# How did I know to make jumps by minute here?  I experimented: a
# `print` statement in the loop showing the difference showed huge jumps
# when looping by a day or hour at a time, but minute-by-minute results
# were small enough steps to bring the satellite gradually closer to the
# target longitude at a rate slow enough that we could stop near it.
#
# The direction that the ISS travels makes the longitude difference
# increase with time; `print` statements at one-minute increments show a
# series like this:
#
# -25:16:40.9
# -19:47:17.3
# -14:03:34.0
# -8:09:21.0
# -2:09:27.0
# 3:50:44.9
# 9:45:50.0
# 15:30:54.7
#
# So the first `while` loop detects if we are in the rising, positive
# region of this negative-positive pattern and skips the positive
# region, since if the difference is positive then the ISS has already
# passed the target longitude and is on its way around the rest of
# the planet.

d = longitude_difference(t)

while d > 0:
    t += ephem.minute
    sat.compute(t)
    d = longitude_difference(t)

# We now know that we are on the negative-valued portion of the cycle,
# and that the ISS is closing in on our longitude.  So we keep going
# only as long as the difference is negative, since once it jumps to
# positive the ISS has passed the target longitude, as in the sample
# data series above when the difference goes from -2:09:27.0 to
# 3:50:44.9.

while d < 0:
    t += ephem.minute
    sat.compute(t)
    d = longitude_difference(t)

# We are now sitting at a point in time when the ISS has just passed the
# target longitude.  The znorm of the longitude difference ought to be a
# gently sloping zero-crossing curve in this region, so it should be
# safe to set Newton's method to work on it!

tn = ephem.newton(longitude_difference, t - ephem.minute, t)

# This should be the answer!  So we print it, and also double-check
# ourselves by printing the longitude to see how closely it matches.

print 'When did ISS cross this longitude?', target_long
print 'At this specific date and time:', ephem.date(tn)

sat.compute(tn)

print 'To double-check, at that time, sublong =', sat.sublong 
```

我在运行这个脚本时得到的输出表明它确实找到了国际空间站到达目标经度的时刻（在合理的公差范围内）：

```
When did ISS cross this longitude? -83:53:20.0
At this specific date and time: 2013/4/20 00:18:21
To double-check, at that time, sublong = -83:53:20.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-17T07:45:35.287

程序计算经过经度的时间与实际时间之间存在时间差。我已经用美国国家航空航天局的 LIS 系统（它在国际空间站内）检查了它以找到闪电。而且我发现在欧洲的一些轨道上，程序计算通行证的时间，比实际时间提前了 30 秒。而在哥伦比亚的某些轨道上，提前时间约为 3 分钟（可能是因为哥伦比亚 1 度经度的公里数大于欧洲 1 度经度的公里数）。但是这个问题只发生在 2 个特定的轨道上！越过法国并在西西里岛下山的那艘。还有一个越过美国，在古巴落下。为什么这可能？在我的小齿轮中，我认为 ehem 中可能有一些错误。牛顿算法或者可能使用 TLE，通常它会读取在晚上 00:00:00 创建的一个，当它改变一天时（而不是实际的，因为 ISS 每天创建 3-4 个 TLE）或者可能使用 sat .sublong 函数，用于计算卫星的错误最低点。有没有人对这个问题有想法或解释？为什么会发生？PS：我需要检查一下，因为我需要知道国际空间站何时穿过一个区域（用于检测该区域内的闪电）。如果程序在某些轨道上计算的时间比实际时间提前，那么 sat.sublong 函数会计算它在该区域之外（它计算它尚未到达该区域）但程序显示它在该区域内区域。因此，在某些情况下，实际时间与程序计算的时间不匹配。

# android - 在 XMPP 中 Internet 不可用时排队消息

> ID：15338326
> 
> 赞同：1
> 
> 时间：2013-03-11T12:14:35.337
> 
> 标签：android, xmpp, openfire

在我的聊天应用程序中，当我向发件人发送消息/聊天时，我正在检查互联网连接和 XMPP 连接。如果两者都可用，那么只有我允许用户发送聊天消息。

例如 -

```
if(connection.IsConnected){

//code to send the message to the sender
} 
```

**我正在使用 Openfire 服务器。**

我想实现一个功能，当互联网不可用并且用户想要发送消息时，它应该发送（即消息应该添加到队列中）并且应该在互联网再次可用时立即发送给收件人，就像 WhatsApp 一样。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:54:16.657

如果您没有 Internet/XMPP 连接，则在这种情况下您的服务器无关紧要。您只想在客户端中缓冲消息并在重新建立连接后发送它们。

我假设您使用的是 Smack 或 asmack，这意味着您只需在连接上创建一个连接侦听器，以便在重新建立连接连接时发送缓冲消息。

```
connection.addConnectionListener(new ConnectionListener()
{
      :
    public void reconnectionSuccessful()
    {
        resendFromBuffer();
    }
}); 
```

# actionscript-3 - textarea htmltext中的锚标记/链接

> ID：15338328
> 
> 赞同：0
> 
> 时间：2013-03-11T12:14:37.800
> 
> 标签：actionscript-3, apache-flex

我正在尝试在 textrea 中将以下内容显示为 HTML 文本。文本显示正常，但锚标记不起作用。

```
<p>
   <font color="#5680e0">
        <a href="http://www.google.com" target="_blank">
             <strong>Google Website</strong>
        </a>
   </font>
</p> 
```

我定义文本区域的弹性代码为

```
<mx:TextArea id="leftArticle" selectable="false" borderVisible="false" top="136" verticalScrollPolicy="off" fontFamily="Arial" color="#333333" condenseWhite="false" focusEnabled="false" focusAlpha="0" editable="true" fontSize="12" width="245" height="285"/> 
```

分配 htmlText 的代码

```
leftArticle.htmlText = htmldata; 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:01:37.753

我得到了解决方案。将以下内容添加到 textarea 代码中，链接现在可以正常工作。

```
textarea.mx_internal::getTextField().enabled=true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:41:59.783

我在您的 HTML 中的任何地方都看不到锚点。定义它的标签在哪里？我不明白您为什么尝试在 ap 标记中将 HTML 显示为文本，但我假设您知道自己在做什么。

您需要两件事才能正确使用锚点：

1.  HTML 中的 id 标记
2.  调用它的正确链接（带有#标记）

按照您的示例，您的 HTML 将如下所示：

```
 <p id="sample">
  <font color="#5680e0">
   <a href="http://www.google.com" target="_blank">
    <strong>Google Website</strong>
   </a>
  </font>
 </p> 
```

并且您的链接调用显示此文本的页面，并使用标记将页面准确定位到它所在的位置：

```
<a href="http://yoursite.com/yourpage.html#sample">Check out the sample code!</a> 
```

下次您提出问题时，请尝试更具体。并缩进你的代码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:17:00.120

将可选属性设置为 true。

[http://www.rockabit.com/2008/10/27/executing-html-links-in-flex/](http://www.rockabit.com/2008/10/27/executing-html-links-in-flex/)

# c# - 创建 Unity 插件时出现对象引用错误

> ID：15338336
> 
> 赞同：1
> 
> 时间：2013-03-11T12:14:59.373
> 
> 标签：c#, unity3d

我正在尝试创建一个简单的 Unity 插件。

我创建了一个 C# 类并在我调用的更新中

```
 AndroidJavaClass jc = new AndroidJavaClass("com.unity3d.player.UnityPlayer"); 
     AndroidJavaObject jo = jc.GetStatic<AndroidJavaObject>("currentActivity"); 
```

当我在 Mono 中调试代码时，jc 显示“对象引用未设置为对象的实例”。然后产生以下错误

```
JNI: Unable to find field id for 'currentActivity' (static) 
```

我不确定我在这里做错了什么。

有人可以帮我吗？

# matlab - 从预定义的形状中检测形状并裁剪背景

> ID：15338338
> 
> 赞同：0
> 
> 时间：2013-03-11T12:15:00.690
> 
> 标签：matlab, image-processing, computer-vision

我有几张带有许多不相关背景区域的 pugmark 图像。我不能做基于强度的算法来将背景与前景分开。我尝试了几种方法。其中之一是[在均匀强度图像中检测对象，](https://stackoverflow.com/questions/14935377/detecting-object-in-homogeneous-intensity-image) 但这不适用于粗糙纹理图像，例如

[http://img803.imageshack.us/img803/4654/p1030076b.jpg](http://img803.imageshack.us/img803/4654/p1030076b.jpg)

[http://imageshack.us/a/img802/5982/cub1.jpg](http://imageshack.us/a/img802/5982/cub1.jpg)

[http://imageshack.us/a/img42/6530/cub2.jpg](http://imageshack.us/a/img42/6530/cub2.jpg)

他们可能是三种可能的方法：

1）如果我可以降低图像的粗糙度，获得更平滑的纹理，即更平坦的表面。

2）如果我可以通过在数据库中定义粗略的 pugmark 形状然后删除背景以获得像[http://i.imgur.com/W0MFYmQ.png这样的图像来检测这些图像中的 pugmark 形状](https://i.imgur.com/W0MFYmQ.png)

3）如果我可以检测具有深度的区域并根据它们的深度差异将它们与背景分开。

请告诉这些方法中的任何一种是否有效，如果可以，那么如何实施它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:52:04.513

您可能希望在此过程中考虑自上而下的信息。例如，请参阅[这项工作](http://www.wisdom.weizmann.ac.il/~levina/papers/CRFs-eccv06.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:05:06.813

我有一种预感，这个问题可以从使用多项式纹理贴图中受益。请参阅此处： http: [//www.hpl.hp.com/research/ptm/](http://www.hpl.hp.com/research/ptm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:29:48.813

看起来你离 pugmark 足够近了，所以我认为你应该能够使用[Viola Jones](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)算法检测 pugmarks。也许类似 PCA 的算法（例如[Eigenface](http://en.wikipedia.org/wiki/Eigenface)）也可以工作，即使您不尝试识别特定的 pugmark，它仍然可以用来判断图像中是否存在 pugmark。

您是否尝试过对图像进行边缘检测？我想应该可以微调[Canny 边缘检测器](http://en.wikipedia.org/wiki/Canny_edge_detector)的阈值以消除噪声（如果它不够好，请先对图像进行低通滤波），然后对剩余的部分进行形状识别（然后你将在现场[几何特征学习](http://en.wikipedia.org/wiki/Geometric_feature_learning)和结构匹配）Viola Jones 和可能的类似 PCA 的算法将是我的第一次尝试。

# opengl-es - 深度如何在截锥体环境中发挥作用？

> ID：15338340
> 
> 赞同：0
> 
> 时间：2013-03-11T12:15:07.767
> 
> 标签：opengl-es

我需要一些帮助来理解平截头体转换的基础知识。主要是深度是如何工作的。

下面使用 768x1024 的视口。使用正交投影和 768x768（z 默认为 0）的正方形，不进行平移或缩放，并且`glViewport(0, 0, 768, 1024)`该正方形的视口很容易填充框架的宽度：

![在此处输入图像描述](../Images/bbded633fc46e1e13727e333c892b75f.png)

现在，当我将项目更改为平截头体并弄乱 z 平移时，由于视角的变化，正方形会适当地缩放。

这是这样一个环境中的同一个广场：

![在此处输入图像描述](../Images/3f94e9b46f2d58cd0e45a5ff3c657976.png)

我可以使用这个 z 平移，以及截头体矩阵的近距和远距参数，并相应地使正方形变化在屏幕尺寸上很明显。美好的。

但我无法弄清楚的是它的屏幕尺寸和这些深度参数之间的明显关系。

例如，假设我想使用平截头体，但让正方形填充框架宽度，如上面的第一个示例图像所示。如何做到这一点？

我认为如果 z 平移与`near`平面相匹配，那么您基本上会在“相机正前方”有一个正方形，填充框架。但我想不出办法来实现这一点。**如果我的近端是`1`并且我的 z 平移是`-1`，那么正方形应该正好位于近端平面本身**（对吗？！），填充框架的宽度（平截头体的左右平面与正交投影相同） .

我可以在这里粘贴一堆代码来展示我在做什么，但我认为这里的概念很清楚。我只是想弄清楚近平面实际上在哪里，如何在上面放置一些东西，因为这将帮助我了解平截头体是如何工作的。

* * *

好的，这是我正在使用的相关代码，where`width=768`和`height=1024`.

我的顶点着色器很简单`gl_Position=Projection*Modelview*Position;`

因此，我的投影矩阵（平截头体）是：

`Frustum(-width/2, width/2, -height/2, height/2, 1,10);`

这个功能是：

```
 static Matrix4<T> Frustum(T left, T right, T bottom, T top, T near, T far)
{
    T a = 2 * near / (right - left);
    T b = 2 * near / (top - bottom);
    T c = (right + left) / (right - left);
    T d = (top + bottom) / (top - bottom);
    T e = - (far + near) / (far - near);
    T f = -2 * far * near / (far - near);
    Matrix4 m;
    m.x.x = a; m.x.y = 0; m.x.z = 0; m.x.w = 0;
    m.y.x = 0; m.y.y = b; m.y.z = 0; m.y.w = 0;
    m.z.x = c; m.z.y = d; m.z.z = e; m.z.w = -1;
    m.w.x = 0; m.w.y = 0; m.w.z = f; m.w.w = 1;
    return m;
} 
```

我的正方形只是两个 2d 三角形，默认 z=0，x 范围从左侧为 -768/2，右侧为 768/2。正如我上面的第一张图片所示，使用正交投影，正方形显然可以正常工作。（虽然我切换到这个问题的截锥投影）

为了绘制正方形，我将 Modelview 翻译为：

`Translate(0, 0, -1);`

使用：

```
static Matrix4<T> Translate(T x, T y, T z)
{
    Matrix4 m;
    m.x.x = 1; m.x.y = 0; m.x.z = 0; m.x.w = 0;
    m.y.x = 0; m.y.y = 1; m.y.z = 0; m.y.w = 0;
    m.z.x = 0; m.z.y = 0; m.z.z = 1; m.z.w = 0;
    m.w.x = x; m.w.y = y; m.w.z = z; m.w.w = 1;
    return m;
} 
```

如您所见，平移应该将正方形放在近平面上，但它看起来像这样：

![在此处输入图像描述](../Images/3f5396ef829a85fc59275a0edf14ec75.png)

如果我翻译而不是 -1.01 只是为了确保避免接近削波，结果是一样的。如果我不翻译，因此 z=0，正方形不会出现，如您所料，因为它会在相机后面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:13:02.673

在您的平截头体矩阵中，`m.w.w`应该是 0，而不是 1。这将解决您的问题。

但是，错误不是你的错。我的错！我实际上是首先编写该代码的人，不幸的是它已经激增。这是我的书中的勘误表（*iPhone 3D Programming*），这是它首次出现的地方。

对此感到非常内疚！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:26:43.863

> 如果我的近是 1 并且我的 z 平移是-1，那么正方形应该正好位于近平面本身（对吗？！）

是的

> ，填充框架的宽度（其中截锥体的左右平面与正交投影相同）。

不一定。近平面具有由 glFrustum 的*left*、*right*、*bottom*和*top*参数给出的范围。当放置在近平面距离处时，恰好符合这些边界的矩形将紧贴视口。

# jquery - IE中位置绝对右移

> ID：15338342
> 
> 赞同：0
> 
> 时间：2013-03-11T12:15:08.397
> 
> 标签：jquery, html, css

我有一个横幅旋转器 JQuery 脚本在我的页面顶部运行，淡入淡出图像。它在除 IE 之外的所有浏览器中都能完美运行。边框位于正确的位置，但图像向右移动。我玩过，发现这是由于我的绝对定位。

```
#bannerRotator { width:969px; height:226px; margin:20px auto; background:white; border-    style: solid; border-width:5px; border-color:white; border-radius: 10px;}
#bannerRotator ul li img{ max-width:969px; max-height:226px; }

#bannerRotator { position:relative; }
#bannerRotator ul { list-style:none; padding:0; position:relative; margin:0; }
#bannerRotator ul li { display:none; position:absolute; left:0px;}
#bannerRotator ul li a { text-decoration:none; }
#bannerNav { position:absolute; right:15px; bottom:15px; background:url(./img/transBlack75.png) repeat 0 0; padding:5px 5px 5px 10px; }
#bannerNav a { margin:3px 10px 0 0; height:10px; width:10px; display:block; background:url(./img/dotDark.png) no-repeat 0 0; float:left; }
#bannerNav a.active { background-image:url(./img/dotLight.png); }
#bannerNav span.pause, #bannerNav span.play { cursor:pointer; height:15px; width:15px; display:block; background:url(img/pause.png) no-repeat 0 0; float:left; }
#bannerNav span.play { background-image:url(./img/play.png) } 
```

HTML如下

```
<div id="bannerRotator">
<ul>
  <li>
      <img src="./images/bannerImage1.jpg" alt="bannerImage1">
    </a>
  </li>
  <li>
      <img src="./images/Newbury.jpg" alt="bannerImage2">
    </a
  ></li>
  <li>
      <img src="./images/bannerImage3.jpg" alt="bannerImage3">
    </a
  ></li>
  <li>
      <img src="./images/bannerImage4.jpg" alt="bannerImage4">
    </a
  ></li>
  <li>
      <img src="./images/bannerImage5.jpg" alt="bannerImage5">
    </a
  ></li>         
</ul>
  </div> 
```

# mysql - 不可能在一个非常简单的带顺序查询中避免“使用文件排序”

> ID：15338343
> 
> 赞同：2
> 
> 时间：2013-03-11T12:15:11.533
> 
> 标签：mysql, using, explain, filesort

我正在尝试创建一个选择查询，但是当我使用解释查询时，mysql 总是额外使用“使用文件排序”。

我尝试使用最简单的查询，但问题并没有消失。我的表“Partidas”的结构是：

```
CREATE TABLE IF NOT EXISTS `Partidas` (
  `IdUsuario` int(11) NOT NULL,
  `IdPartida` int(11) NOT NULL,
  `TipoPartida` tinyint(4) NOT NULL,
  `Facil` tinyint(1) NOT NULL DEFAULT '0',
  `Normal` tinyint(1) NOT NULL DEFAULT '0',
  `Dificil` tinyint(1) NOT NULL DEFAULT '0',
  `FchPartida` date NOT NULL,
  `PuntosPartida` mediumint(9) NOT NULL,
  `IdPartidaTemp` bigint(20) NOT NULL,
  `ComplPers` tinyint(1) NOT NULL,
  `SoloMulti` tinyint(2) NOT NULL,
  PRIMARY KEY (`IdUsuario`,`IdPartida`),
  KEY `IX_PARTIDAS_RECORDS` (`TipoPartida`,`FchPartida`,`PuntosPartida`),
  KEY `IX_PARTIDAS_ORDEN2` (`FchPartida`),
  KEY `IX_PARTIDAS_COMPLPERS` (`ComplPers`,`FchPartida`,`PuntosPartida`),
  KEY `IX_PARTIDAS_SOLOMULTI` (`SoloMulti`,`FchPartida`,`PuntosPartida`),
  KEY `IX_PARTIDAS_DIFICULTAD` (`Facil`,`Normal`,`Dificil`,`SoloMulti`,`FchPartida`,`PuntosPartida`),
  KEY `IX_PARTIDAS_COMPMULTI` (`ComplPers`,`SoloMulti`,`FchPartida`,`PuntosPartida`),
  KEY `IX_PARTIDAS_COMPLPERS_SIMPLE` (`ComplPers`,`PuntosPartida`),
  KEY `IX_PARTIDAS_SOLOMULTI_SIMPLE` (`SoloMulti`,`PuntosPartida`),
  KEY `IX_PARTIDAS_FECHA` (`FchPartida`),
  KEY `IX_PARTIDAS_PUNTOS` (`PuntosPartida`),
  KEY `PRUEBA_PARTIDAS` (`PuntosPartida`,`TipoPartida`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

该表大约有 1000-5000 行（数据非常少），但始终使用文件排序。我用于测试的查询是：

```
explain select *
from Partidas
order by PuntosPartida
limit 0, 50; 
```

结果是：

```
| id | select_type | table              | type  | possible_keys | key       | key_len | ref  | rows | Extra          |
|  1 | SIMPLE      | Partidas           | ALL   | NULL          | NULL      | NULL    |NULL  | 1041 | Using filesort | 
```

但是如果在查询中我更改了限制，例如限制 0,5；然后结果也会改变

```
| id | select_type | table              | type  | possible_keys | key                | key_len | ref  | rows | Extra       |
|  1 | SIMPLE      | Partidas           | index | NULL          | IX_PARTIDAS_PUNTOS | 3       |NULL  |  5   |             | 
```

在mysql配置中，buffer和sort的变量分别是：

```
-myisam sort buffer size: 2MB
-sort buffer size: 2MB
-key buffer size: 1GB 
```

但我尝试更改这些值（将其增加到 8MB），结果是相同的

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:59:15.257

我的猜测是，这是查询优化器在做它的工作。[此处的这篇文章](http://www.mysqlperformanceblog.com/2012/11/23/full-table-scan-vs-full-index-scan-performance/)表明“优化器更喜欢全表扫描，它甚至没有考虑将扫描索引作为相关选择（possible_keys: NULL）”

您可以强制它使用索引，但执行时间可能会更慢（如文章中所述）。

```
select *
from Partidas FORCE INDEX(IX_PARTIDAS_PUNTOS)
order by PuntosPartida
limit 0, 50; 
```

您还可以[在此处阅读](http://dev.mysql.com/doc/refman/5.0/en/how-to-avoid-table-scan.html)有关如何避免表扫描的更多信息（“使用文件排序”）

# javascript - 将 javascript 变量与 2 级导航栏的 href 的一部分进行比较

> ID：15338346
> 
> 赞同：0
> 
> 时间：2013-03-11T12:15:14.757
> 
> 标签：javascript, jquery, html, jquery-ui

[将 javascript 变量与 href 的一部分进行比较](https://stackoverflow.com/questions/8915916/comparing-a-javascript-variable-with-a-part-of-a-href)

上面的链接与我当前的问题类似，它适用于一级导航栏，但我有 2 级导航栏，它是一个下拉栏，我想达到相同的结果

```
<ul id="nav_main"> 
    <li><a href="index.php?pag=THIS">link</a>
    <ul>
        <li><a href="index.php?pag=secondthis">link</a></li>
    </ul></li>
</ul> 
```

它必须将 herf 标记与 java 脚本变量匹配，并为子 li 和父 li 放置当前类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:18:25.350

试试这个：

```
var foo = 'whatever';
$("#nav_main li a").filter(function(index){
    return foo === this.href.match(/pag=(.*)/)[1];
}).parents('li').addClass("current"); 
```

更改`.parent()`为`.parents('li')`选择所有 parent`li`并将类添加到它们。

# css - 一行中的 CSS，无法比较免费和付费主题文件

> ID：15338350
> 
> 赞同：0
> 
> 时间：2013-03-11T12:15:31.203
> 
> 标签：css, wordpress-theming, diff, indentation

这很烦人，我有一个带有 css 文件的 wordpress 主题，所有这些文件都在一行中。我想知道为什么有人会这样做。现在我已经升级了，我需要将旧文件与新文件进行比较，以便我可以接受更改。Meld、diff 和 vimdiff 显示线差。我想知道是否有某种方法可以自动格式化/缩进 css 文件，以便我可以逐行比较它们并对简单的任务有意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:16:31.920

在比较之前通过[美化器](http://procssor.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T21:22:04.383

它是这样的，因为它不需要修改。您可以使用 Styleneat 将其格式化为多行。!非常手工的工具 [Styleneat](http://www.styleneat.com/)

# javascript - JavaScript 节点组装

> ID：15338356
> 
> 赞同：0
> 
> 时间：2013-03-11T12:15:59.263
> 
> 标签：javascript, dom

我正在尝试创建一个用于渲染 dom 元素的函数，但在添加之前我似乎陷入了组装多个 dom 元素的困境。

我试过这个： http: [//jsfiddle.net/RruyA/1/](http://jsfiddle.net/RruyA/1/) 我似乎无法用链接包装我的图像。

并且使用现在 innerHTMl 所在的 appendChild() （在小提琴中标有注释）会产生无效的指针错误。

我有很多关于可能出了什么问题的理论，但还没有解决方案。帮助会摇滚！

这是完整的代码：

```
(function () {
    "use strict";

    function tag (name, attributes, contents) {
      var tag = {};
      tag.name = name;
      tag.attributes = attributes;
      tag.contents = contents
      tag.create = function () {
        tag.element = document.createElement(tag.name);
        for (var prop in tag.attributes) {
          tag.element.setAttribute(prop, tag.attributes[prop]);
        }
        // This is the problem:
        tag.element.innerHTML = contents;
      }
      tag.render = function () {
        document.body.appendChild(tag.element);
      }
      return tag;
    }

    var p = tag('p', {'id':'details', 'class':'red nice lovely'}, 'Once upon a time in a golden castle on a silver cloud...');
    var img = tag('img', {'src':'http://miyazakihayao.blog.com/files/2010/05/castle-in-the-sky-x1.jpg', 'width': '200px', 'alt':'Golden Castle'});
    img.create();
    img.render();
    p.create();
    p.render();
    var a = tag('a', {'href':'http://google.com', 'target':'_blank'}, img.element);
    a.create();
    a.render();

}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:47:09.363

您的问题是您试图以相同的方式添加文本和 HTML 元素。文本可以正常工作，`innerHTML`尽管元素将被强制转换为字符串，并且`appendChild`会添加 HTML 元素，但您需要将字符串包装在 TextNodes 中。

因此，您可以在这些类型之间进行选择，并且效果很好。

```
// This is a solution
if (contents) {
  if (contents instanceof HTMLElement) {
    tag.element.appendChild(contents);
  }
  else {
    tag.element.innerHTML = contents;
  }
} 
```

# php - 选择 * 匹配 mysql 表中的用户邮政编码？

> ID：15338359
> 
> 赞同：0
> 
> 时间：2013-03-11T12:16:10.377
> 
> 标签：php, mysql

我正在尝试向登录的用户显示居住在本地的用户列表。因此，如果登录的会话用户的邮政编码为“m3 4”，而其他 5 个用户的邮政编码以“m3 4”开头，那么这些用户将显示给用户。

我的桌子是这样布置的：

```
id  |   user_id  | user_postcode
1          2          M3 4
2          3          SM2 7
3          4          M3 4 
```

因此在这种情况下，用户 2 将显示给已登录的用户 4，因为他们的邮政编码匹配。

我正在尝试在 mysql 中执行此操作，并且当我手动输入邮政编码时它可以工作，如下所示：

```
AND ptb_stats.user_postcode='M3 4' 
```

但我试图使其特定于用户会话，因此如果登录用户 / $_SESSION[user_id'] 与其他用户具有相同的邮政编码。

我正在尝试这样做，但它显示了所有没有邮政编码的用户，因为它应该显示具有匹配邮政编码的用户，不是吗？

```
function get_local_users() {
            global $connection;
            global $_SESSION;
            $query = "
            SELECT *
            From ptb_stats, ptb_users
            WHERE ptb_stats.user_id=ptb_users.id
            AND ptb_stats.user_postcode='".$_SESSION['user_postcode']."'";
            $local_set = mysql_query($query, $connection);
            confirm_query($local_set);
            return $local_set;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:38:31.817

如果用户 id 存储在 中`$_SESSION['user_id']`，则可以通过以下方式获取本地用户

```
select u.id, u.name
from ptb_users u
join ptb_stats s1 on s1.user_id = $_SESSION['user_id']
join ptb_stats s2 on s2.user_id = u.id and s2.user_postcode = s1.user_postcode
where u.id <> $_SESSION['user_id'] 
```

[SQLFiddle](http://www.sqlfiddle.com/#!2/54d84/12/0)

如果你有邮政编码`$_SESSION['user_postcode']`，那就更容易了

```
select u.id, u.name
from ptb_users u
join ptb_stats s on s.user_id = u.id
     and s.user_postcode = $_SESSION['user_postcode']
where u.id <> $_SESSION['user_id'] 
```

[SQLFiddle](http://www.sqlfiddle.com/#!2/54d84/13/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:38:33.703

有了这个答案，我假设 $_SESSION['user_postcode'] 是从某种类型的输入框中填充的，并且该值是有效的邮政编码（如“M3 4”）。

您可以使用 preg_match 从数字中拆分邮政编码，并尝试从数据库中选择邮政编码。看看这个例子：

```
$matches = array();
$zipCode = preg_match('/^([a-z0-9]+)/i', $_SESSION['user_postcode'], $matches); 
```

邮政编码现在位于第二位的 $matches 变量中 ($matches[1])。现在使用此值创建一个查询并检查它是否与其他查询相同..

```
$query = "SELECT *
        From ptb_stats, ptb_users
        WHERE ptb_stats.user_id=ptb_users.id
        AND ptb_stats.user_postcode REGEX '^" . $matches[1] . "'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:39:10.677

根据你的描述，我会继续这样的事情。

我使用 PDO 中的准备好的语句来处理查询。

```
function get_local_users() {
    // given that it was created like this: $connection = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');
    global $connection;

    $stmt = $connection->prepare(
        "SELECT ptb_stats.*
        FROM ptb_stats, ptb_users
        WHERE ptb_stats.user_id = ptb_users.id
        AND ptb_stats.user_id != ?
        AND ptb_stats.user_postcode = (
            SELECT user_postcode 
            FROM ptb_stats 
            WHERE user_id = ?
        )");

    $stmt->execute(array($_SESSION['user_id'], $_SESSION['user_id']));
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);

    return $rows;
} 
```

# php - 从购物车数组中删除一个项目

> ID：15338369
> 
> 赞同：0
> 
> 时间：2013-03-11T12:16:34.300
> 
> 标签：php, session, multidimensional-array

我正在构建一个购物车，我将订单保存在一个存储在会话中的多维数组中，`$_SESSION['cart']`

产品由类似的东西表示

```
$product_array=array($id,$description,$price); 
```

多维数组是`$product_array.s`

`$id's`是独一无二的。

问题是，当我想`$_SESSION['cart']` 根据 id 从多维数组中删除一个产品时，如果它只是购物车中的一个项目，它就可以工作，但如果有更多，它就不起作用，这些项目似乎已被删除，但它是鬼'留在购物车里。代码是这样的：

```
//get $id, $count is elements in array  

for ($r = 0; $r <= $count-1; $r++) 
{
   if($_SESSION['cart'][$r][0]=="$id")
   {
 unset($_SESSION['cart'][$r]); 

 echo "<div class=success>The item has been removed from your shopping cart.</div>";
 break;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:51:52.860

试试这个功能，这对我有用

```
function remove_product($id){
$id=intval($id);
$max=count($_SESSION['cart']);
for($i=0;$i<$max;$i++){
if($id==$_SESSION['cart'][$i]['id']){
unset($_SESSION['cart'][$i]);
break;
}
}
$_SESSION['cart']=array_values($_SESSION['cart']);

if($_REQUEST['command']=='delete' && $_REQUEST['id']>0){
remove_product($_REQUEST['id']);
}
else if($_REQUEST['command']=='clear'){
unset($_SESSION['cart']);
}
else if($_REQUEST['command']=='update'){
$max=count($_SESSION['cart']);
for($i=0;$i<$max;$i++){
$id=$_SESSION['cart'][$i]['id'];
$q=intval($_REQUEST['qty'.$id]);
if($q>0 && $q<=999){
$_SESSION['cart'][$i]['qty']=$q;
}
else{
$msg='Some proudcts not updated!, quantity must be a number between 1 and 999';
}
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:35:32.857

检查您的 php.conf 中是否启用了 register_global。尝试使用以下语法来取消两者：

```
 if($_SESSION['cart'][$r][0]=="$id") {
     $_SESSION['cart'][$r] = NULL;// this is just to be sure =)
     unset($_SESSION['cart'][$r], $cart[$r]); 

     echo "<div class=success>The item has been removed from your shopping cart.</div>";
     break;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:41:50.733

以下代码有效，也许它会帮助您找到您的问题：

```
session_start();

$i=0;
$_SESSION['cart'][]=array($i++,'sds',99);
$_SESSION['cart'][]=array($i++,'sds',100);
$_SESSION['cart'][]=array($i++,'sds',20);
$_SESSION['cart'][]=array($i++,'sds',10);

$id = 2;
$count = count($_SESSION['cart']);
for ($r=0;$r<$count;$r++)
{
    echo "num=$r<br>";
    if(isset($_SESSION['cart'][$r]) && $_SESSION['cart'][$r][0]==$id)
    {
        unset($_SESSION['cart'][$r]);
        echo "The item has been removed from your shopping cart.<br>";
        break;
    }
}

session_write_close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:42:07.570

如前所述，我认为问题与您的数组布局以及您尝试在 for 循环或某些 PHP 设置中检查的内容有关。**例如，您是否发起过会话？**我可能会转而使用一系列产品参考。使用普通数组很快就会变成一场噩梦，您会在没有任何警告等情况下意外引用错误的对象。使用格式良好的函数名称获取的封装对象有助于避免这种情况。就像是

```
$cart = array($productId => $quantity, $productId2 => $quantityOfSecondProduct); 
```

然后有一个包含所有产品信息数据的数组

```
$products = array($product1...); 
```

每个产品的类型

```
class Product
{
  $productId;
  $productName;
  $productDescription;
  ... etc
} 
```

然后，您将所有数据分开但易于访问，您可以根据产品 ID 轻松删除购物车中的一个或多个条目，但只需引用它并在数量为 0 时删除。

```
if(($cart[$productId] - $quantityToRemove) <= 0)
  unset($cart[$productId]);
else
  $cart[$productId] -= $quantityToRemove; 
```

请注意，最好从某些数据源填充产品等，我还将整个购物车作为一个具有很好功能的类，并且应该进行更多的错误检查；）

# iphone - iCloud 集成中的警告

> ID：15338371
> 
> 赞同：1
> 
> 时间：2013-03-11T12:16:39.437
> 
> 标签：iphone, ios, icloud, mkdir

我正在尝试集成 iCloud。

一切正常，但是当我尝试从 iCloud 读取文件时，我收到警告，例如：

```
Foundation called mkdir("/var/mobile/Library/Mobile Documents/.ubd/peer-E8A60A8F-FB9D-8721-F47C-hdffgdfg-v23/ftr/(A Document Being Saved By XYZ)"), it didn't return 0, and errno was set to 1. 
```

我的代码来获取数据：

```
for (NSMetadataItem *item in results)
        {
            NSString *filename = [item valueForAttribute:NSMetadataItemDisplayNameKey];
            NSURL *url = [item valueForAttribute:NSMetadataItemURLKey];
            MyDocument *doc = [[MyDocument alloc] initWithFileURL:url];

                [doc openWithCompletionHandler:^(BOOL success) {
                    if (success) {
                        NSData *file = [NSData dataWithContentsOfURL:url];

                        NSString *docDir = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"Import/iCloud"];
                        if (![[NSFileManager defaultManager] fileExistsAtPath:docDir])
                            [[NSFileManager defaultManager] createDirectoryAtPath:docDir withIntermediateDirectories:YES attributes:nil error:nil];

                        NSString *pdfFile = [docDir stringByAppendingPathComponent:filename];
                        if(![[NSFileManager defaultManager] fileExistsAtPath:pdfFile])
                            [[NSFileManager defaultManager] createFileAtPath:pdfFile contents:file attributes:nil];

                        NSLog(@"Successfully loaded data from cloud file name %@", filename);                        
                    }
                    else
                    {
                        NSLog(@"Failed to load data");
                    }
                }];

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:33:36.397

看起来您在 iCloud 中有一个部分写入的文件（基于错误中的*A Document Being Saved By XYZ*），并且您的元数据查询已将其返回给您，因为它也与文件名匹配。几周前我遇到了类似的情况，并通过使用文件的确切路径来解决它，如下所示：

```
NSString *filepath = [containerURL.path stringByAppendingPathComponent:@"MyFileName"];

NSPredicate *pred = [NSPredicate predicateWithFormat: @"%K == %@", NSMetadataItemPathKey, filepath];
[query setPredicate:pred]; 
```

# java - 长度为密钥长度的数据的签名 RSA

> ID：15338372
> 
> 赞同：0
> 
> 时间：2013-03-11T12:16:43.730
> 
> 标签：java, key, rsa

我必须从给定的数据创建一个签名，但问题是数据的长度是密钥长度。JAVA 中 RSA 签名者的所有实现都允许放置最大的数据。密钥长度减去一长度。如何为长度为密钥长度的数据创建签名？算法是基本的 RSA，没有填充和摘要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:38:53.857

首先，请不要在没有填充的情况下使用 RSA - 这是一个糟糕的主意，**[会降低系统的安全性](http://rdist.root.org/2009/10/06/why-rsa-encryption-padding-is-critical/)**。

如果您需要对大小等于密钥长度（或更大）的数据进行签名，恐怕您需要使用摘要。这里真的没有选择。我不确定你为什么不想使用摘要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-22T05:24:01.990

RSA 只能将数据加密到最大密钥大小（2048 位 = 256 字节）减去填充/标头数据（PKCS#1 v1.5 填充为 11 字节）。

因此，通常无法直接使用 RSA 加密文件。RSA 也不适用于此目的。如果你想加密更多的数据，你可以使用类似的东西：

```
Generate a 256-bit random keystring K
Encrypt your data with AES-CBC with K
Encrypt K with RSA
Send both to the other side 
```

# android - java.lang.IllegalStateException：尝试重新打开已经关闭的对象（尝试关闭）

> ID：15338374
> 
> 赞同：22
> 
> 时间：2013-03-11T12:16:47.957
> 
> 标签：android, sqlite, android-sqlite

```
public int getRecordsCount() {
        String countQuery = "SELECT  * FROM " + TABLE_LOGIN;

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        if(cursor != null && !cursor.isClosed()){
            cursor.close();
        }   
        // return count

        return cursor.getCount();
    } 
```

我正在尝试获取数据库中的记录总数，但是每次使用`java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT * FROM login)`. 请帮我解决错误

```
 03-05 22:23:14.208: E/AndroidRuntime(4988): FATAL EXCEPTION: main
    03-05 22:23:14.208: E/AndroidRuntime(4988): java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT  * FROM login) 
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:34)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:64)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:283)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:264)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at com.ecomm.android.sqlite.DatabaseHandler.getRecordsCount(DatabaseHandler.java:123)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at com.ecomm.android.LaunchActivity.DataBaseImplementation(LaunchActivity.java:120)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at com.ecomm.android.LaunchActivity.onClick(LaunchActivity.java:98)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.view.View.performClick(View.java:2408)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.view.View$PerformClick.run(View.java:8816)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.os.Handler.handleCallback(Handler.java:587)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.os.Handler.dispatchMessage(Handler.java:92)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.os.Looper.loop(Looper.java:123)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at java.lang.reflect.Method.invokeNative(Native Method)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at java.lang.reflect.Method.invoke(Method.java:521)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
    03-05 22:23:14.208: E/AndroidRuntime(4988):     at dalvik.system.NativeStart.main(Native Method)
    03-05 22:23:15.608: I/binder_sample(4988): [android.app.IActivityManager,2,1395,com.ecomm.android,100]
    03-05 22:23:15.608: I/binder_sample(4988): Unknown binary event type 110
    03-05 22:23:15.608: I/binder_sample(4988): Binary log entry conversion failed 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-11T12:20:06.807

您应该`getCount()`在关闭光标之前调用。

移动：

```
if(cursor != null && !cursor.isClosed()){
    cursor.close();
} 
```

以下：

```
 cursor.getCount(); 
```

像这样：

```
public int getRecordsCount() {
    int count = 0;
    String countQuery = "SELECT  * FROM " + TABLE_LOGIN;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);

    if(cursor != null && !cursor.isClosed()){
        count = cursor.getCount();
        cursor.close();
    }   
    return count;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T12:26:01.227

> java.lang.IllegalStateException：尝试重新打开已经关闭的

您的错误被抛出，因为您调用`cursor.getCount()`您`Cursor`已经关闭并且这是不允许的。

因此，要么尝试使用**try-finally**块，在 finally 块中关闭你的块，`Cursor`要么分配`cursor.getCount()`给 int 值并`Cursor`立即关闭。

但我建议您使用第一种方法：

```
public int getRecordsCount() {
   String countQuery = "SELECT * FROM " + TABLE_LOGIN;
   SQLiteDatabase db = this.getReadableDatabase();
   Cursor cursor = db.rawQuery(countQuery, null);
   int count = 0;
   try {
      if (cursor.moveToFirst())) {
         count = cursor.getCount();
      }
      return count;
   }
   finally {
      if (cursor != null) {
         cursor.close();
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-13T17:29:13.343

删除`cursor.close()`语句

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-27T12:34:50.597

我知道这是旧的，但我的问题最终是在，我在执行后`onCreate()`调用。`db.close()``db.execSQL(TABLE_CREATE)`

`onCreate`之后自动调用`dbHelper.getReadableDatabase()`。

这导致它崩溃，因为随后它使用已经关闭的对象从数据库中检索所有值。一旦我`db.close()`从中删除`onCreate`，这一切都奏效了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-20T13:03:49.447

对我来说，问题是我正在关闭更新查询的 finally 块中的数据库实例。

对于无法使用上述解决方案进行修复的人，请尝试检查您的更新查询。

# android - Android ContentResolver.query 总是返回相同的数据

> ID：15338375
> 
> 赞同：0
> 
> 时间：2013-03-11T12:16:55.903
> 
> 标签：android, search, invalidation

我有带有文件浏览器的视频播放器应用程序，其中列出了 SD 卡上的所有视频

[受我想在 sd 卡中获取音频文件](https://stackoverflow.com/questions/5590628/i-want-get-audio-files-in-sd-card)启发的代码

使用 ContentResolver，按预期工作，但如果卡上的文件发生更改，它不会更新。我不是说自动，而是在视图/应用程序重新启动后。甚至重新安装应用程序都没有帮助，仍然显示相同的文件。删除的视频文件在 PC 上不可见，也无法播放（此视频无法播放（翻译））。

我转储了数据，问题不在视图缓存或其他地方。我没有实现自己的任何缓存，也没有找到任何关于此事的信息。谢谢

代码：

```
 // acquisition  
    String[] projection = {
        MediaStore.Video.Media._ID,
        MediaStore.Video.Media.DISPLAY_NAME,
        MediaStore.Video.Media.DURATION,
        MediaStore.Video.Media.DATA
    };

    ContentResolver resolver = getActivity().getContentResolver();
    Cursor videoCursor = resolver.query(
        MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
        projection,
        null,
        null,
        null
    );

    // extraction
    while(cursor.moveToNext()) {
        cursorIndex = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
        filepath = cursor.getString(cursorIndex);

        cursorIndex = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DISPLAY_NAME);
        filename = cursor.getString(cursorIndex);

        cursorIndex = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DURATION);
        duration = cursor.getString(cursorIndex);

        result[ index++ ] = new VideoFileMetadata(filename, duration, filepath);
    } 
```

编辑 1 [14-03-2013]：

我尝试添加`number + " = " + number`到 ORDER 或 WHERE 子句以充当潜在的查询缓存破坏者，但它没有效果（尽管它有可能被优化器作为无用的子句删除）。这次我使用不同的证书从另一台机器重新安装了应用程序，但查询结果保持不变，列出当前不存在的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T08:21:24.690

你应该先打电话`cursor.moveToFirst()` 。

所以，你的光标迭代循环应该看起来像

```
if (cursor.moveToFirst()) {
    do {
        // cursorIndex = cursor.getColumnIndexOrThrow, etc...
    } while (cursor.moveToNext());
} 
```

# python - 将 html5 视频 (localhost) 与 SimpleHTTPServer 一起使用

> ID：15338378
> 
> 赞同：1
> 
> 时间：2013-03-11T12:17:05.177
> 
> 标签：python, html, simplehttpserver

我使用[google io slide deck](https://code.google.com/p/io-2012-slides/)，并且在添加视频链接之前工作正常。我有一个 11MB 的视频文件，我将其包含在幻灯片中

```
<video src="video/out/report.mp4"  height="600" controls> 
```

运行服务器（`server.sh`- `$open http://localhost:$port/index.html && python -m SimpleHTTPServer $port;`）时，它会卡在视频的位置。

```
1.0.0.127.in-addr.arpa - - [11/Mar/2013 07:56:18] "GET /images/task.png HTTP/1.1" 200 -
1.0.0.127.in-addr.arpa - - [11/Mar/2013 07:56:18] "GET /images/receive/external.png HTTP/1.1" 200 -
1.0.0.127.in-addr.arpa - - [11/Mar/2013 07:56:18] "GET /video/out/report.mp4 HTTP/1.1" 200 - 
```

最后一行之后没有活动。***但是当直接***打开 index.html 时（没有网络服务器，只需双击文件并在浏览器中打开），***视频就会加载***.

使用网络服务器运行时阻止加载的视频标签 url 有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:10:43.527

我也看到了 require.js 错误，这导致[Python 的 http.server（或 SimpleHTTPServer）的更快替代方案是什么？](https://stackoverflow.com/questions/12905426/faster-alternative-to-pythons-simplehttpserver)

改用 node.js 服务器效果很好。

# c# - .NET 3.5 和 .NET 4.0 之间的排序差异

> ID：15338380
> 
> 赞同：9
> 
> 时间：2013-03-11T12:17:14.283
> 
> 标签：c#, .net, .net-4.0, .net-4.5

在对集合进行排序时，我遇到了 .NET 框架的一个非常奇怪的行为。这种行为在 .NET 3.5 和 4.0 之间是不同的（[但我想我知道为什么](https://stackoverflow.com/questions/5123886/why-does-net-4-0-sort-this-array-differently-than-net-3-5)），但更重要的是（这是我真正关心的问题），**在同一框架上的不同机器上的行为是不同的**。

## 语境

我正在开发一个依赖于某些第三方软件的软件（在这种情况下是 spring.net，但没关系），并且在某些时候，它正在对一个所有项目“相等”的集合进行排序（比较器总是返回 0)。这**不在**我的控制之下，如果排序该列表的行为始终一致，我会很好。它不是。

## 如何重现

**在 .NET 3.5 中**创建一个简单的项目，然后运行下面的代码。在 3.5 中编译时，行为似乎是一致的，并且集合将被“反转”（结果为**Three, Two, One**）。现在，请将项目目标更改为**.NET 4（*不是 4.5*）**，然后再次运行：在我的机器上，它不再反转集合（一、二、三），但在其他一些同事的机器上，它确实（三二一）！！！我们有完全相同的设置...

**你能告诉我，在你的机器上，在 4.0 下，它是什么？反转还是不反转？**

我正在尝试评估我的设置是否正确。

## 概念证明

```
class Program
{
    static void Main()
    {
        var collection = new ArrayList
        {
            "One",
            "Two",
            "Three",
        };

        // It should in any case write One, Two, Three
        Console.Out.WriteLine("Before sort: ");
        foreach (string item in collection)
        {
            Console.Out.WriteLine("\t"+item);
        }

        collection.Sort(new OrderComparator());

        // In .NET 3.5, it will write Three, Two, One
        // In .NET 4, it will sometimes write Three, Two, One, sometimes One, Two, Three: what is it for you?
        Console.Out.WriteLine("After sort: ");
        foreach (string item in collection)
        {
            Console.Out.WriteLine("\t" + item);
        }

        Console.Out.WriteLine("--end--");
        Console.Read();
    }
}

public class OrderComparator : IComparer
{
    public virtual int Compare(object o1, object o2)
    {
        return 0;
    }
} 
```

另外，如果您知道为什么会发生这种情况，请告诉我！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T12:21:47.927

ArrayList.Sort() 完成的排序并不稳定，因此您无法预测“相同”项目的排序顺序。

此外，由于 ArrayList.Sort() 可能使用随机机制来为其 QuickSort 算法选择主元，因此相同的项目可能在不同的 PC 甚至同一台 PC 上以不同的方式排序。

[编辑：我找不到任何证据表明在当前实现中选择了随机枢轴，但数组排序仍然不稳定。我猜随机性来自本机代码 Quicksort 实现，`TrySZSort()`其中可能会被调用。]

同样出于兴趣，Reflector 在 ArrayList.Sort() 中显示了这段代码（如果你深入研究的话）：

```
internal void Sort(int left, int length)
{
    if (BinaryCompatibility.TargetsAtLeast_Desktop_V4_5)
    {
        this.IntrospectiveSort(left, length);
    }
    else
    {
        this.DepthLimitedQuickSort(left, (length + left) - 0x1, 0x20);
    }
} 
```

这似乎为.Net 4.5选择了一种完全不同的排序算法。

# ios - 如何将数据插入到 google fusion table form iphone app

> ID：15338382
> 
> 赞同：0
> 
> 时间：2013-03-11T12:17:26.303
> 
> 标签：ios, google-fusion-tables

我想将我的 iPhone 应用程序中的数据插入到 fusion 表中，我的 fusion 表是私有的，如果我手动将数据插入到 fusion 中，我的选择查询可以正常工作，但是当我的应用程序获得价值时，我不想手动插入数据vale 必须插入到 fusion 表中，我参考了 google API 文档，我也阅读了[插入到 google fusion 表中](https://stackoverflow.com/questions/10262526/insertion-into-google-fusion-table)的内容，但我仍然不明白如何实现这一点，请任何人指导我。提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:00:47.320

您应该考虑使用所谓的[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。[您可以在Google API 控制台](https://code.google.com/apis/console/)中创建此类帐户。服务帐户充当用户的代理人。您可以调用 API、更改数据等。只需确保服务帐户对您要编辑的表具有正确的权限。

# visual-studio-2010 - 为什么其他 Visual Studio 开发人员需要我已经添加的 Nuget 依赖项？

> ID：15338385
> 
> 赞同：2
> 
> 时间：2013-03-11T12:17:44.847
> 
> 标签：visual-studio-2010, visual-studio, nuget

有点菜鸟问题，但我想知道为什么在我签入项目后，其他开发人员需要使用 Nuget 来获取我包含的所有包。这些 DLL 不应该已经在引用文件夹中了吗？

有什么策略可以让事情变得更轻松吗？我必须浏览所有参考文献的列表，并向他们提出建议，说明他们应该尝试下拉哪些内容以使项目编译？

问候，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:54:33.137

如果有人对此感到困惑，请查看 Nuget Powertools。有一个选项可以恢复 Nuget 包，可以在开发人员之间协调这个问题 - 非常好 :)

# c# - 日期时间处理方法

> ID：15338390
> 
> 赞同：1
> 
> 时间：2013-03-11T12:17:59.220
> 
> 标签：c#

我面临一个问题，我找不到合适而优雅的解决方案。我有一个`List`of `Videos`，这是一个包含有关视频信息的类。在这些信息中有一个`startDate`,`endDate`和一个`cameraId`属性。

我当前的数据库具有以下值：

```
 startDate      endDate 
```

![当前数据库](../Images/17e199629c78039b0f7ecddb32a8abef.png)

我想遍历这些值，当一个视频与上一个视频相差 5 分钟以内并且具有相同的值时，`cameraId`它应该算作一个。但我找不到完成这项任务的适当或优雅的方式。

上面显示的视频列表的输出应该是

*   第一次：2013:03:01 18:25:26 -> 2013-03-01 18:34:29
*   第二次：2013:03:01 18:40:26 -> 2013:03:01 18:59:29

这是我到目前为止的代码：

```
private void ProcessVideos(List<Video> videos)
        {
            bool isSameVideo = false;
            Video lastVideo = null;

            //debugar e ver esquema do ultimo valor do database
            DateTime startDate = DateTime.MinValue;
            DateTime endDate = DateTime.MinValue;
            for (int i = 1; i < videos.Count; i++)
            {
                TimeSpan timeSpan = new TimeSpan(videos[i].DataInicio.Ticks - videos[i - 1].DataFim.Ticks);
                if (timeSpan.Minutes > 0 && timeSpan.Minutes < 5 && videos[i].IdCamera == videos[i - 1].IdCamera)
                {
                    if (!isSameVideo)
                    {
                        isSameVideo = true;
                        startDate = videos[i - 1].DataInicio;
                        endDate = videos[i].DataFim;
                    }
                    else
                    {
                        endDate = videos[i].DataFim;
                    }
                }
                else
                {
                    if (isSameVideo)
                    {
                        i++;
                        isSameVideo = false;
                        Debug.WriteLine("inicio: {0} fim: {1}", startDate, endDate);
                        startDate = DateTime.MinValue;
                        endDate = DateTime.MinValue;
                    }
                    Debug.WriteLine("inicio: {0} fim: {1}", videos[i - 1].DataInicio, videos[i - 1].DataFim);
                }
            }
            if (startDate != DateTime.MinValue)
            {
                Debug.WriteLine("inicio: {0} fim: {1}", startDate, endDate);
            }
        } 
```

主要问题是：遍历这些值并根据时间跨度规范输出值组合的良好逻辑是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:35:36.063

我创建了一个小示例向您展示：

我的容器对象：

```
internal class Container
{
    public int Id { get; set; }
    public DateTime Start { get; set; }
    public DateTime Stop { get; set; }

    public override string ToString()
    {
        return "ID " + Id + ": " + Start + " -> " + Stop;
    }
} 
```

我的方法：

```
 private static IEnumerable<Container> DoMerge(List<Container> elements, TimeSpan maxDiff)
    {
        var closedContainers = new List<Container>();
        var lastContainers = new Dictionary<int, Container>();

        foreach (Container container in elements.OrderBy(e => e.Start))
        {
            //First case, no previous container
            if (!lastContainers.ContainsKey(container.Id))
            {
                lastContainers[container.Id] = container;
            }
            else if (container.Start - lastContainers[container.Id].Stop > maxDiff)
                //We have a container, but not in our windows of 5 minutes
            {
                closedContainers.Add(lastContainers[container.Id]);
                lastContainers[container.Id] = container;
            }
            else
            {
                //We have to merge our two containers
                lastContainers[container.Id].Stop = container.Stop;
            }
        }

        //We have now to put all "lastContainer" in our final list
        foreach (KeyValuePair<int, Container> lastContainer in lastContainers)
        {
            closedContainers.Add(lastContainer.Value);
        }
        return closedContainers;
    } 
```

我们只需要给出我们的最大时间跨度和元素列表：

```
 private static void Main(string[] args)
    {
        var elements = new List<Container>
            {
                new Container {Id = 1, Start = new DateTime(2013, 3, 1, 18, 25, 26), Stop = new DateTime(2013, 3, 1, 18, 27, 29)},
                new Container {Id = 1, Start = new DateTime(2013, 3, 1, 18, 30, 26), Stop = new DateTime(2013, 3, 1, 18, 34, 29)},
                new Container {Id = 1, Start = new DateTime(2013, 3, 1, 18, 40, 26), Stop = new DateTime(2013, 3, 1, 18, 52, 29)},
                new Container {Id = 1, Start = new DateTime(2013, 3, 1, 18, 55, 26), Stop = new DateTime(2013, 3, 1, 18, 59, 29)},
            };
        foreach (Container container in DoMerge(elements, TimeSpan.FromMinutes(5)))
        {
            Console.WriteLine(container);
        }
        Console.ReadLine();
    } 
```

这给了我我们两个对象留下的预期结果。

结果与提到的数据： ![在此处输入图像描述](../Images/97f7849970ec1e4b830220072f0c0b09.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:06:08.510

这是一个解决方案。该方法的关键在 ExtractVidTimes 方法中显示。其余的仅用于创建示例数据

```
 [TestFixture]
public class TestyMcTest
{
    public class Vid
    {
        public int CamId;
        public DateTime Start;
        public DateTime End;
    }

    [Test]
    public void Test()
    {
        var list = new List<Vid>
            {
                //=====Combination1=======
                new Vid
                    {
                        CamId = 1,
                        Start = new DateTime(2000, 1, 1, 0, 0, 0),
                        End = new DateTime(2000, 1, 1, 0, 3, 0)
                    },
                new Vid
                    {
                        CamId = 1,
                        Start = new DateTime(2000, 1, 1, 0, 5, 0),
                        End = new DateTime(2000, 1, 1, 0, 7, 0)
                    },
                //=====Combination2=======
                new Vid
                    {
                        CamId = 1,
                        Start = new DateTime(2000, 1, 1, 0, 15, 0),
                        End = new DateTime(2000, 1, 1, 0, 18, 0)
                    },
                //=====Combination3=======
                new Vid
                    {
                        CamId = 2,
                        Start = new DateTime(2000, 1, 1, 0, 0, 0),
                        End = new DateTime(2000, 1, 1, 0, 3, 0)
                    },
                //=====Combination4=======
                new Vid
                    {
                        CamId = 2,
                        Start = new DateTime(2000, 1, 1, 0, 10, 0),
                        End = new DateTime(2000, 1, 1, 0, 13, 0)
                    }
            };

        //here is your list of vids grouped by the cam id
        var result = ExtractVidTimes(list);
    }

    //THE METHOD
    private static List<List<Vid>> ExtractVidTimes(List<Vid> list)
    {
        //Group by cam ID
        var vidGroups = list.GroupBy(vid => vid.CamId).ToList();

        //extract vids with aggregate times
        var result = vidGroups.Select(vids =>
            {
                var vidTimes = new List<Vid>();
                var finalVid = vids.OrderBy(vid=> vid.Start).Aggregate((a, b) =>
                    {
                        if (a.End.AddMinutes(5) > b.Start)
                        {
                            a.End = b.End;
                            return a;
                        }

                        vidTimes.Add(a);
                        return b;
                    });

                vidTimes.Add(finalVid);

                return vidTimes;
            }).ToList();

                    //return result.SelectMany(x=>x);  //if you want a List<vid> return ed instead of a nested list

        return result;
    }
} 
```

# php - 在特定 id 之后显示记录

> ID：15338393
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:18:05.320
> 
> 标签：php, mysql, sql

这里是 SQL 查询，我需要对其进行一些调整

```
 SELECT DISTINCT ic.img_path, ic.id
                    FROM images_community ic
                    WHERE ic.delete_flag = 0 AND ic.status = 1
                    ORDER BY ( SELECT (count(id = ic.id ) +  ic.views) 
                    FROM image_comments WHERE img_id = ic.id) DESC 
```

我需要在特定 ID 后显示记录

不限制和偏移肯定我需要在这个 id = 5 这个图像检索之后显示行

```
> images  id | img_path
>         1  | dafad.sjdbh
>         2  | dafad.sjdbh
>         5  | dafad.sjdbh
>         3  | dafad.sjdbh 
```

是否有办法在检索到的同一查询中显示 id = 5 之后的记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:21:38.263

可以使用limit和offset来实现，请看[Limit, Offset](http://www.sql.org/sql-database/postgresql/manual/queries-limit.html)

如果您想要偏移后的所有行，只需执行

```
SELECT DISTINCT ic.img_path, ic.id
                    FROM images_community ic
                    WHERE ic.delete_flag = 0 AND ic.status = 1
                    ORDER BY ( SELECT (count(id = ic.id ) +  ic.views) 
                    FROM image_comments WHERE img_id = ic.id) DESC LIMIT (SELECT cout(*) FROM table_name) OFFSET my_row_offset 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:42:57.520

找到此 ID 的行位置并从它开始限制。

# android - 从android中的通话记录访问最近错过的号码

> ID：15338397
> 
> 赞同：2
> 
> 时间：2013-03-11T12:18:12.287
> 
> 标签：android, android-intent

我是 android 的新手。我希望在 android 中创建一个应用程序，当我错过手机上的电话时，我想向该号码发送一条短信。任何人都可以帮助我如何从通话记录中识别最近未接来电。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:39:00.670

首先，通过内容提供商获取该号码的未接电话。然后轻松发送该号码的短信。

请试试这个。

```
public class MainActivity extends Activity {

    Button FirstActivity;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String[] strFields = {android.provider.CallLog.Calls.CACHED_NAME, android.provider.CallLog.Calls.NUMBER,android.provider.CallLog.Calls.DATE, android.provider.CallLog.Calls.TYPE
        };
        String strOrder = android.provider.CallLog.Calls.DATE + " DESC";

        Cursor mCallCursor = getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI,strFields, null, null, strOrder);

        if (mCallCursor.moveToFirst()) {

            do {

                boolean missed = mCallCursor.getInt(mCallCursor.getColumnIndex(CallLog.Calls.TYPE)) == CallLog.Calls.MISSED_TYPE;

                if (missed) {

                    String name = mCallCursor.getString(mCallCursor
                            .getColumnIndex(CallLog.Calls.CACHED_NAME));

                    String number = mCallCursor.getString(mCallCursor
                            .getColumnIndex(CallLog.Calls.NUMBER));

//                  String time = DateFormat.getDateTimeInstance(DateFormat., DateFormat.LONG)
//                          .format(mCallCursor.getLong(mCallCursor
//                                  .getColumnIndex(CallLog.Calls.DATE)));
//
//                  Log.d("PhoneLog", "You have a missed call from " + name + " on " + number
//                          + " at " + time);
                }

            } while (mCallCursor.moveToNext());

        }
        SmsManager smsManager = SmsManager.getDefault();
        smsManager.sendTextMessage("phoneNo", null, "sms message", null, null);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:21:20.967

Read CallLogs 存在列名类型，如果值为 3，则表示未接来电，您的应用需要读取通话记录的权限[更多详情](https://stackoverflow.com/questions/5910906/i-want-read-call-logs-in-the-android)

# google-maps-api-3 - 通过php循环加载多个谷歌地图后的javascript window.print

> ID：15338398
> 
> 赞同：3
> 
> 时间：2013-03-11T12:18:14.767
> 
> 标签：google-maps-api-3

我成功地通过 php 循环显示多个地图。但最后我打电话给window.print。我的问题是 window.print 在地图加载和打印页面上显示空白之前被触发。

这是我的示例代码：

```
{loop starts}

<div latitude="<?php echo $row['lat'];?>" longitude="<?php echo $row['lng'];?>" zoom="<?php echo $row['map_zoom_level'];?>"  class="map_canvas"></div>

{loop ends} 
```

Javascript：

```
$(document).ready(function(){

   $('.map_canvas').each(function(index, Element) {
      var lat = $(Element).attr('latitude');
      var lng = $(Element).attr('longitude');

      var latlng = lat+','+lng;
      var zoomlevel = parseInt($(Element).attr('zoom'));

      var origin = new google.maps.LatLng(lat,lng)

      $(Element).gmap({'zoom': zoomlevel}).bind('init', function(ev, map) {
         $(Element).gmap('get','map').setOptions({'center':origin});
         $(Element).gmap('addMarker', {'position': latlng}).click();
      });
   });
   window.print();
}); 
```

谁能帮我解决这个问题。

# android - 禁用后无法重新启用 KeyGaurd

> ID：15338400
> 
> 赞同：2
> 
> 时间：2013-03-11T12:18:17.300
> 
> 标签：android, android-asynctask, togglebutton, keyguard, screen-lock

我写了下面的代码来`KeyGaurd`使用切换按钮切换我的 android 手机。但我面临着一种奇怪的行为。

*   它成功禁用了`keygaurd`但是。不重新启用。

    ```
     btnToggleLock.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            if (btnToggleLock.isChecked()) {

                toast.cancel();
                toast.setText("Unlocked");
                toast.show();

                Log.i("Unlocked", "If");

                KeyguardManager myKeyGuard = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);

                KeyguardLock myLock = myKeyGuard
                        .newKeyguardLock(KEYGUARD_SERVICE);
                myLock.disableKeyguard();

            } else {

                toast.cancel();
                toast.setText("Locked");
                toast.show();

                KeyguardManager myKeyGuard = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
                KeyguardLock myLock = myKeyGuard
                        .newKeyguardLock(KEYGUARD_SERVICE);
                myLock.reenableKeyguard();

                Log.i("Locked", "else");

            }

        }
    }); 
    ```

*   它成功禁用了`keygaurd`但是。不重新启用。

*   我对其进行了测试，控件正在遍历`if`和 以及 `else`

我也在使用 android 2.2.1 `motoralla milestone`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:02:09.567

这里的问题是，每次执行“if”语句时，您都在创建一个新的锁 (KeyGuardLock)。您可以在第一次创建锁时禁用它，但您必须“重新启用”您首先禁用的锁，您无法创建新锁。

解决方案是在 onClickListener 之外进行锁定。即从“if”语句中取出以下代码并在设置onClickListener之前声明它：-

```
KeyguardManager myKeyGuard = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
            KeyguardLock myLock = myKeyGuard
                    .newKeyguardLock(KEYGUARD_SERVICE); 
```

# c# - Page_Load 事件中的异步用户控件加载

> ID：15338402
> 
> 赞同：1
> 
> 时间：2013-03-11T12:18:23.900
> 
> 标签：c#, asp.net, asynchronous, user-controls

我有一个包含 4 个用户控件的页面，每个用户控件都加载到一个选项卡中。此用户控件之一根据我们的数据向用户显示 bing 地图。问题是我们页面的 Page_Load 依赖于用户的互联网连接。我们如何异步加载这个用户控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:37:28.457

虽然从您的帖子中不清楚您认为可以从将其更改为异步中受益的长期运行任务的性质，但我认为您会在这个[SO question中找到“异步 UserControls”的好线索](https://stackoverflow.com/questions/273546/asp-net-2-0-asynchronous-user-control-not-working)

此外，文章[Using Asynchronous Methods in ASP.NET 4.5](http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45)是一个“官方”教程，它展示了如何在更细粒度的级别上旋转异步处理。

如果您可以分享，我很想看到一些用于我自己的自私学习目标的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T13:18:17.953

您能否阐明 Page_Load 如何依赖于 Internet 连接？

请查看以下链接，该链接显示了如何异步加载用户控件：

[异步加载用户控件](http://encosia.com/boost-aspnet-performance-with-deferred-content-loading/)

# python - 在 pyamf 客户端中使用弹性数据服务

> ID：15338404
> 
> 赞同：2
> 
> 时间：2013-03-11T12:18:29.953
> 
> 标签：python, apache-flex, amf

编辑注意：我又看了这个问题，并决定没有问得这么好。让我们试试这个：我正在尝试模拟这个请求，并由 charls 使用 pyamf 记录：

AMF Message Message Header
Body
[0] Body Part
Target String null Response String /2 Content Array
[0] Object flex.messaging.messages.RemotingMessage source Null
operation String someActionOnTheServer messageId String 89995D65-FF39-F88B-EACE-5E8B16F2A519 body Array
clientId Null
timestamp Integer 0 timeToLive Integer 0 destination String bssefreporting headers Object

我怎样才能使用 pyamf 做到这一点？

提前致谢

# php - 无法在 windows7 64 位操作系统和 wamp、php5.4 中加载 php_printer.dll？

> ID：15338405
> 
> 赞同：0
> 
> 时间：2013-03-11T12:18:32.013
> 
> 标签：php

我想在我的php项目中使用printer_list功能..请给我正确的说明和适合我wind7操作系统的php_printer.dll文件，我正在使用php 5.4和wamp服务器..我尝试了很多通过论坛看到的东西，很好但没有什么帮助我..加载thae文件后我得到了服务器问题

即使下面给出的简单代码也不起作用

```
foreach (printer_list(PRINTER_ENUM_CONNECTIONS) as $printer)
    {echo "waste";
        $curprin = strtoupper($printer["NAME"]);
        echo "<option value=\"" . addslashes($curprin) . "\"" . (($curprin == $user["drucker"]) ? " selected" : "") . ">$curprin\n";
    } 
```

# actionscript-3 - 想要使用 flex 4.6 设计推送机制

> ID：15338407
> 
> 赞同：0
> 
> 时间：2013-03-11T12:18:33.347
> 
> 标签：actionscript-3, flex4

感谢您提供这么好的信息。我正在寻找套接字连接来构建从服务器到 flex 应用程序的推送机制。设想。1\. 将有一台服务器和静态 IP 附加到 IT。2\. 当服务器端发生触发时，我想向 flex 应用程序用户发送一些信息。3.触发可以通过多种方式发生，如IVRS系统、Web服务或Windows服务器。4.一旦触发，信息必须发送给特定用户而不是所有用户。

有人能知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:08:44.120

Push 通常是通过在服务器和客户端之间建立一个长时间运行的开放套接字连接来实现的。客户端坐在那里侦听套接字上的响应。您应该能够在 Flex 中使用某种加载器或 httpservice 来执行此操作，您只需要弄清楚如何防止超时（如果可能，IDK，我从未尝试过）。为来自服务器的响应添加一个事件侦听器并在那里执行您的操作。
你有没有尝试过任何方法？运气好的话？

# c# - 如何从 DataContract 属性类实例生成 ActionResult？

> ID：15338408
> 
> 赞同：1
> 
> 时间：2013-03-11T12:18:43.050
> 
> 标签：c#, asp.net-mvc-3, serialization, datacontract, actionresult

在我的 MVC3 应用程序中，我需要返回一个具有`DataContract`属性的类的 XML 表示。MVC3 动作返回`ActionResult`s。

```
[HttpGet]
ActionResult MyActionResult( paramsHere )
{
    if(!ValidateParams(paramsHere)) {
        return new HttpStatusCodeResult((int)HttpStatusCode.BadRequest);
    var myDataContractAttributedObject = getObject();
    return ... // how do I convert my [DataContract]-attributed object to ActionResult?
} 
```

我想我可以`DataContractSerializer`显式使用，但是否有一些自动 MVC 魔法可以做到这一点？

如何`ActionResult`从我的`[DataContract]`-attributed 对象中获取？

# cmake - firebreath 预定义函数 configure_template 可以支持@ONLY 吗？

> ID：15338414
> 
> 赞同：2
> 
> 时间：2013-03-11T12:19:04.710
> 
> 标签：cmake, firebreath

现在我正在使用 Firebreath 开发我的插件，但在使用 Firebreath 预定义的**configure_template**函数时遇到了问题。

就我现在所见，configure_template 将替换引用为 ${VAR} 或 @VAR@ 或 @@foreach 循环的变量。

但是我的配置文件（nsis 安装程序文件）有自己定义的变量 ${VAR}，所以我不希望它被 configure_template 替换。

我使用 Firebreath 预定义的 configure_template 而不是 configure_file(inputfile outputfile @ONLY) 的原因是我想在我的配置文件中使用 @@foreach 循环来解释分号 CMAKE 变量。

那么，我应该如何解决这个问题呢？我可以轻松修改现有的 configure_template 以忽略 ${VAR}，还是有其他方法可以解释我的配置文件中的分号 CMAKE 变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:05:04.100

我自己想出了一个解决方案。

Firebreath 提供的现有 configure_template 函数可以修改为忽略 ${VAR} 等替代变量。修改很简单，就一行，改如下代码

```
string(CONFIGURE "${line}" line ESCAPE_QUOTES) 
```

到

```
string(CONFIGURE "${line}" line ESCAPE_QUOTES @ONLY) 
```

@ONLY 参数将告诉 CMAKE 只替换像 @VAR@ 这样的变量。

虽然，这可以解决我自己配置​​文件的问题，但这会破坏 Firebreath 特定的配置文件，因为它们都使用 ${VAR}。

所以，我的最终解决方案是

1.  把Firebreath的configure_template.cmake复制出来，重命名修改。
2.  使用 my_configure_template 的修改版本来服务于我的目的，那么它不会影响现有的 configure_template 行为。

欢迎任何其他解决方案。

# r - R rgl绘图值未显示在轴上

> ID：15338416
> 
> 赞同：3
> 
> 时间：2013-03-11T12:19:18.113
> 
> 标签：r, axis, rgl

我正在使用 r 中的 rgl 包来绘制一些数据。如此处所做：

[http://www.r-bloggers.com/creating-3d-geographical-plots-in-r-using-rgl/](http://www.r-bloggers.com/creating-3d-geographical-plots-in-r-using-rgl/)

由于某种原因，比例与图表不一致。

我更改了 X 和 Z 轴的比例以增加浮雕，我最初认为这是导致问题的原因，但在下面的示例中，即使我将 0.02 更改为 1 也会出现问题。

```
library(rgl)

rdata <- c(0.8926,0.8986,0.9478,0.9672,0.916,0.912,0.9324,0.9532,0.9488,0.9376,0.921,0.927,0.9728,0.956,0.9318,0.9202)
labs <-c(100,200,500,1000)

rmatrix <- matrix(rdata, nrow=4,ncol=4,)
dimnames(rmatrix) <- list(labs,labs)

y <- as.matrix(rmatrix)
x <- 0.02*(1:nrow(y))
z <- 0.02*(1:ncol(y))

rgl.surface(x, z, y, color="red", back="lines")
axis3d('x--', labels=row.names(rmatrix),color="black") 
```

为什么会这样？

谢谢你的帮助！垫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:35:37.493

`labels`在不为 中的参数提供值的情况下`axis3d`，我得到一个带有六个刻度线的轴。由于您为参数提供了一个只有四个值的向量`labels`，因此它看起来像`axis3d`回收这些值以覆盖所有刻度线。

通过为参数提供一个值来告诉`axis3d`您要放置刻度线的数据值`at`：

```
axis3d('x--', at = x, labels=row.names(rmatrix),color="black") 
```

* * *

ps我必须在之前添加以下行`rgl.surface()`以避免出现段错误

```
rgl.open() 
```

# c - 使用 FFT 的阶乘

> ID：15338417
> 
> 赞同：3
> 
> 时间：2013-03-11T12:19:19.483
> 
> 标签：c

我正在尝试在**C中实现一个程序，该程序使用****fft**和**二进制拆分方法**计算非常大的 n（最多一百万）的**阶乘**。

 ****我已经实现了一个简单的**库**来表示**任意精度整数**。为了计算**fft**和**ifft**，我使用了“ **C 中的数字食谱”中**的**twofft.c**和**four1.c**例程

 **直到某个 n，一切正常，但是当数字（浮动数组）太大时，**ifft**（用four1计算）在归一化和四舍五入之后有错误的值。

**例如**，如果我有两个以 40 个零结尾的 2000 位数字，并且我必须将它们相乘（使用 fft），当我计算 ifft 时，一些结尾的零变成“一”。发生这种情况是因为当我将其中一个“**零**”（例如 0,50009）四舍五入时，它们变成了“**一**”。现在，我不知道我的实现是否错误，或者我是否必须以不同的方式四舍五入这个数字。我尝试使用**二元拆分方法**和**素数分解**，但是对于**n >= 9000**，结果是**错误**的。

有办法解决这个问题吗？感谢您的关注，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:53:05.577

你如何表示任意精度整数？

我的意思是你实际使用的是什么类型？

你能告诉我们你的代码吗？

如果你真的很懒，你可以克隆我几个月前做的这个项目： [https ://github.com/nomadster/ESP](https://github.com/nomadster/ESP)

编辑：

通过进一步阅读您的帖子，我认为此声明

“发生这种情况是因为当我将其中一个“零”（例如 0,50009）四舍五入时，它们变成了“一””

您仍然没有意识到 fft 乘法仅在舍入误差小于 0.5 时才有效。所以在我看来（当且仅当我正确解释了你的神秘信息时）你使用的浮点类型没有所需的精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T14:35:42.200

作为记录：

我还注意到 ifft 从数字配方中的four1.c 返回的错误值。我只用 N=256 个复数值作为输入对其进行了测试，以某种方式组装，它们应该产生一个真正的时域信号。

生成的时域向量必须被镜像（从头到尾，反之亦然……）并移位一以与其他实现的 IFFT 相对应。（我仅基于 IDFT 公式测试了 numpy.fft.ifft、八度音阶的 ifft 和离散傅里叶逆变换，没有任何优化，这应该是绝对正确的）。

数字食谱提供的版本中必须存在基本算法错误。在他们的书中没有描述与这个问题相关的内容。******

# sphinx - 重建狮身人面像索引失败

> ID：15338420
> 
> 赞同：1
> 
> 时间：2013-03-11T12:19:29.060
> 
> 标签：sphinx

我们使用一张表中的数据构建了 4 个[sphinx](http://sphinxsearch.com/)索引。所有索引都具有相同的源设置，只是它们采用不同的文档。我们有这样的检查`mod(id, 4) = <index number>`来在索引之间分配文档和文档属性。

问题：**几乎每次我们重建索引时，四个索引之一（同一个）都无法重建。**其他索引从来没有这个问题，并且可以正确重建。

我们已经对文档和属性表进行了分区。例如，这是文档表的分区方式：

```
PARTITION BY HASH(mod(id, 4))(
  PARTITION `p0` COMMENT '',
  PARTITION `p1` COMMENT '',
  PARTITION `p2` COMMENT '',
  PARTITION `p3` COMMENT ''
); 
```

我们认为索引器在它接收到所有文档之后但在它开始接收属性之前挂起。当我们检查 MySQL 服务器上的会话时，我们可以看到这一点。

无法重建的索引正在使用`mod(id, 4) = 0`条件。

我们在 Ubuntu 64bit 12.04.02 LTS 上使用 Sphinx 2.0.4-release。

* * *

数据源配置

```
source ble_job_2 : ble_job
{
    sql_query = select job_notice.id as id, \
        body, title, source, company, \
        UNIX_TIMESTAMP(insertDate) as date, \
        substring(company, 1, 1) as companyletter, \
        job_notice.locationCountry as country, \
        location_us_state.stateName as state, \
        0 as expired, \
        clusterId, \
        groupCity, \
        groupCityAttr, \
        job_notice.cityLat as citylat, \
        job_notice.cityLng as citylng, \
        job_notice.zipLat as ziplat, \
        job_notice.zipLng as ziplng, \
        feedId, job_notice.rating as rating, \
        job_notice.cityId as cityid \
        from job_notice \
        left join location_us_state on job_notice.locationState = location_us_state.stateCode \
        where job_notice.status != 'expired' \
        and mod(job_notice.id, 4) = 1

    sql_attr_multi = uint attr from query; \
        select noticeId, attributeId as attr from job_notice_attribute where mod(noticeId, 4) = 1
} # source ble_job_2 
```

索引配置

```
index ble_job_2
{
    type            = plain
    source          = ble_job_2
    path            = /var/lib/sphinxsearch/data/ble_job_2

    docinfo         = extern
    mlock           = 0
    morphology      = none
    stopwords       = /etc/sphinxsearch/stopwords/blockwords.txt
    min_word_len    = 1
    charset_type    = utf-8
    enable_star     = 0
    html_strip      = 0
} # index_ble_job_2 
```

* * *

任何帮助将不胜感激。

温暖的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:31:33.643

幸运的是我们已经解决了这个问题。

我们已经应用了[范围查询](http://sphinxsearch.com/docs/2.0.4/sql.html#ranged-queries)设置，这有助于我们使索引重建稳定。我认为这是因为 Sphinx 运行多个查询，每个查询都返回有限的相对较小的结果集。这允许 MySQL 正常完成查询并将所有结果发送回 Sphinx。

[Sphinx 论坛Indexer Hangs & MySQL Query Sleeps](http://sphinxsearch.com/forum/view.html?id=3961)描述了同样的问题。

* * *

数据源配置中的更改是

```
 sql_query_range = SELECT MIN(id),MAX(id) FROM job_notice where mod(job_notice.id, 4) = 1
    sql_range_step = 200000
    sql_query = select job_notice.id as id, \
    ...
        and mod(job_notice.id, 4) = 1 and job_notice.id >= $start AND job_notice.id <= $end 
```

* * *

请注意，不应将范围应用于 sql_attr_multi 查询 - [Sphinx MVA 中的错误查询](https://stackoverflow.com/questions/10235608/bad-query-in-sphinx-mva)

# android - 通知管理器不显示任何类型的通知

> ID：15338421
> 
> 赞同：1
> 
> 时间：2013-03-11T12:19:29.170
> 
> 标签：android, notifications

我对 android 很陌生，我有一个运行良好的 GCM 客户端和服务器。当应用程序运行时，我会从服务器收到通知。

但是当应用程序没有运行时，我没有得到任何响应。

这是我用于生成通知的代码：

```
 private void generateNotification(Context context, String message) {
        int icon = 1;
        long when = System.currentTimeMillis();

        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context, DemoActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    } 
```

通过以下方式调用：

```
@Override
    protected void onMessage(Context context, Intent intent) {
        generateNotification(context, "Tock Tock");
    } 
```

当我看到 logcat 时，我收到如下错误：

```
 Unable to find resource: 1
W/ImageView(   58): android.content.res.Resources$NotFoundException: Resource ID #0x1
W/ImageView(   58):     at android.content.res.Resources.getValue(Resources.java:892)
W/ImageView(   58):     at android.content.res.Resources.getDrawable(Resources.java:580)
W/ImageView(   58):     at android.widget.ImageView.resolveUri(ImageView.java:489)
W/ImageView(   58):     at android.widget.ImageView.onMeasure(ImageView.java:592)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
W/ImageView(   58):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:696)
W/ImageView(   58):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:306)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
W/ImageView(   58):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
W/ImageView(   58):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
W/ImageView(   58):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
W/ImageView(   58):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
W/ImageView(   58):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
W/ImageView(   58):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
W/ImageView(   58):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
W/ImageView(   58):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.widget.ScrollView.measureChildWithMargins(ScrollView.java:989)
W/ImageView(   58):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
W/ImageView(   58):     at android.widget.ScrollView.onMeasure(ScrollView.java:286)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
W/ImageView(   58):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
W/ImageView(   58):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
W/ImageView(   58):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
W/ImageView(   58):     at android.view.View.measure(View.java:8171)
W/ImageView(   58):     at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
W/ImageView(   58):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
W/ImageView(   58):     at android.os.Handler.dispatchMessage(Handler.java:99)
W/ImageView(   58):     at android.os.Looper.loop(Looper.java:123)
W/ImageView(   58):     at com.android.server.ServerThread.run(SystemServer.java:506) 
```

不知道我在哪里犯了错误。我正在关注[这里](http://developer.android.com/google/gcm/demo.html)的示例教程。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:36:50.243

问题出在`int icon = 1;`.

您应该在那里添加一个真实的资源 id，这样它就会显示在通知栏中。你得到了`Resources$NotFoundException`因为没有找到 id 的资源`1`。

例如，如果您将一个名为的图像`xyz.png`放入`res/drawable`文件夹中，则该图像的 id 将是`R.drawable.xyz`可以从以下代码中调用的：

```
int icon = R.drawable.xyz; 
```

# c# - 计算时间并显示给用户的推荐方法

> ID：15338422
> 
> 赞同：3
> 
> 时间：2013-03-11T12:19:32.620
> 
> 标签：c#, c#-4.0

只是好奇人们认为什么是计算搜索需要多长时间然后向用户显示时间的最佳方法。

我将 DateTime 与 Timespan 以及 Stopwatch sw = new Stopwatch 一起使用。

我认为与具有时间跨度的 DateTime 相比，使用 Stopwatch 是更简洁的代码。

所以我只是好奇专业程序员使用什么。

IE

```
Stopwatch WebSearchTime = new Stopwatch();
WebSearchTime.Start();
code to run
WebSearchTime.Stop();
double WST = WebSearchTime.Elapsed.Seconds + (WebSearchTime.Elapsed.Milliseconds / 1000.0); 
```

谢谢

乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:20:56.283

与计算相比，秒表是确定执行时间的正确[且更准确的方法。](http://jaychapman.blogspot.com/2007/12/datetimenow-precision-issues-enter.html)`DateTime.Now``DateTime`

[秒表类](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

> 秒表通过计算底层计时器机制中的计时器滴答来测量经过的时间。**如果安装的硬件和操作系统支持高分辨率性能计数器，则 Stopwatch 类使用该计数器来测量经过的时间。** 否则， Stopwatch 类使用系统计时器来测量经过的时间。使用频率和 IsHighResolution 字段来确定秒表计时实现的精度和分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:24:49.467

我知道使用 Stopwatch 是首选方式，但我创建了代码片段来使用 DateTime 并使用它们：

```
 DateTime start = DateTime.Now;
        //logic
        System.Diagnostics.Debug.WriteLine("Comment:" + (DateTime.Now - start)); 
```

当然，如果您需要聚合结果，则必须创建 TimeSpan。现在我看到调试时输出了很多信息。

我的错。我按照 VARAK 的建议测量了性能，结果证明 DateTime.Now 需要大约 0.00073 毫秒来评估如果您要迭代真正的大量数据，这可能是生产中的真正问题，因此您应该谨慎使用我的方法。

# android - 从应用程序发送邮件

> ID：15338424
> 
> 赞同：2
> 
> 时间：2013-03-11T12:19:37.890
> 
> 标签：android, email, smtp

我正在开发一个应用程序，我必须从应用程序发送邮件。邮件的正文和收件人不应是可编辑的。[因此，我使用此链接](http://macmaker.blogspot.in/2012/04/send-emails-in-background-in.html)逐步配置了 gmail 。

现在应用程序的需要是，FROM 用户名和密码由用户给出。它可以是任何类型，例如：

```
abc@gmail.com,
abc@rediffmail.com
abc@yahoomail.com 
```

电子邮件应该发送，无论用户输入的用户名和密码是什么。我对此进行了搜索，并得到了从 yahoo id 应用程序发送邮件的信息，该应用程序应在 yahoo smtp 服务器上配置。

但是如果用户输入其他邮件 ID 怎么办。是否有应用程序可以发送邮件的通用方法？为此，我必须执行哪些步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:35:49.923

像这样试试

```
 address = (EditText) findViewById(R.id.address);
     subject = (EditText) findViewById(R.id.subject);
    emailbody = (EditText) findViewById(R.id.body);
    send = (Button) findViewById(R.id.send);

    send.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            sendEmail();
        }
    });
}

public void sendEmail(){

    if(!address.getText().toString().trim().equalsIgnoreCase("")){
      final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
      emailIntent.setType("plain/text");
      emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{ address.getText().toString()});
      emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject.getText());
      emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailbody.getText());
      sendMailDemo.this.startActivity(Intent.createChooser(emailIntent, "Send mail..."));
    }
    else{
        Toast.makeText(getApplicationContext(), "Please enter an email address..", Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T20:29:33.167

如果您有 gmail，这很有用，首先从[此处](https://www.google.com/?gws_rd=ssl#q=activation%20additional%20mail%20jar%20files%20free%20download)下载这 3 个库 （邮件/激活/附加）将它们添加到您的项目（将它们复制到项目/右键单击/添加到构建路径）

JSSEProvider 类：

```
package com.emailsender;

import java.security.AccessController;

import java.security.Provider;

public final class JSSEProvider extends Provider {

public JSSEProvider() {

super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");

       AccessController

               .doPrivileged(new java.security.PrivilegedAction<Void>() {

                   public Void run() {

                       put("SSLContext.TLS",

                               "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");

                       put("Alg.Alias.SSLContext.TLSv1", "TLS");

                       put("KeyManagerFactory.X509",

                               "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");

                       put("TrustManagerFactory.X509",

                               "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");

                       return null;

                   }

               });

   }

} 
```

GmailSender 类：

```
package com.emailsender;

import javax.activation.DataHandler;

import javax.activation.DataSource;

import javax.activation.FileDataSource;

import javax.mail.BodyPart;

import javax.mail.Message;

import javax.mail.Multipart;

import javax.mail.PasswordAuthentication;

import javax.mail.Session;

import javax.mail.Transport;

import javax.mail.internet.InternetAddress;

import javax.mail.internet.MimeBodyPart;

import javax.mail.internet.MimeMessage;

import javax.mail.internet.MimeMultipart;  

import java.io.ByteArrayInputStream;

import java.io.IOException;

import java.io.InputStream;

import java.io.OutputStream;

import java.security.Security;

import java.util.Properties;

public class GMailSender extends javax.mail.Authenticator {

private String mailhost = "smtp.gmail.com";

    private String user;

    private String password;

    private Session session;

    private Multipart _multipart = new MimeMultipart();

    static {

        Security.addProvider(new  shooreshi.fayyaz.ghariebartar.JSSEProvider());

    }

    public GMailSender(String user, String password) {

        this.user = user;

        this.password = password;

        Properties props = new Properties();

        props.setProperty("mail.transport.protocol", "smtp");

        props.setProperty("mail.host", mailhost);

        props.put("mail.smtp.auth", "true");

        props.put("mail.smtp.port", "465");

        props.put("mail.smtp.socketFactory.port", "465");

        props.put("mail.smtp.socketFactory.class",

                "javax.net.ssl.SSLSocketFactory");

        props.put("mail.smtp.socketFactory.fallback", "false");

        props.setProperty("mail.smtp.quitwait", "false");

        session = Session.getDefaultInstance(props, this);

    }

    protected PasswordAuthentication getPasswordAuthentication() {

        return new PasswordAuthentication(user, password);

    }

    public synchronized void sendMail(String subject, String body,

            String sender, String recipients) throws Exception {

        try {

            MimeMessage message = new MimeMessage(session);

            DataHandler handler = new DataHandler(new ByteArrayDataSource(

                    body.getBytes(), "music"));

            message.setSender(new InternetAddress(sender));

            message.setSubject(subject);

            message.setDataHandler(handler);

            BodyPart messageBodyPart = new MimeBodyPart();

            messageBodyPart.setText(body);

            _multipart.addBodyPart(messageBodyPart);

            // Put parts in message

            message.setContent(_multipart);

            if (recipients.indexOf(',') > 0)

                message.setRecipients(Message.RecipientType.TO,

                        InternetAddress.parse(recipients));

            else

                message.setRecipient(Message.RecipientType.TO,

                        new InternetAddress(recipients));

            Transport.send(message);

        } catch (Exception e) {

        }

    }

    public void addAttachment(String filename) throws Exception {

        BodyPart messageBodyPart = new MimeBodyPart();

        DataSource source = new FileDataSource(filename);

        messageBodyPart.setDataHandler(new DataHandler(source));

        messageBodyPart.setFileName("music.mp3");

        _multipart.addBodyPart(messageBodyPart);

    }

    public class ByteArrayDataSource implements DataSource {

        private byte[] data;

        private String type;

        public ByteArrayDataSource(byte[] data, String type) {

            super();

            this.data = data;

            this.type = type;

        }

        public ByteArrayDataSource(byte[] data) {

            super();

            this.data = data;

        }

        public void setType(String type) {

            this.type = type;

        }

        public String getContentType() {

            if (type == null)

                return "application/octet-stream";

            else

                return type;

        }

        public InputStream getInputStream() throws IOException {

            return new ByteArrayInputStream(data);

        }

        public String getName() {

            return "ByteArrayDataSource";

        }

        public OutputStream getOutputStream() throws IOException {

            throw new IOException("Not Supported");

        }

    }

} 
```

发送代码：

```
 new Thread(new Runnable() {

              public void run() {

                  try {

                      GMailSender sender = new GMailSender(

                              "yourgmail@gmail.com",

                              "yourpassword");

                    sender.addAttachment(Environment.getExternalStorageDirectory().getPath()+"/image.jpg");

                      sender.sendMail("your text",

                              "senderemail@gmail.com",

                              "recieveremail@gmail.com");

                  } catch (Exception e) {

                      Toast.makeText(getApplicationContext(),"Error",Toast.LENGTH_LONG).show();

                  }

              }

          }).start(); 
```

不要忘记添加权限！

# matlab - 错误：无效的 MEX 文件，找不到指定的模块

> ID：15338427
> 
> 赞同：11
> 
> 时间：2013-03-11T12:20:01.817
> 
> 标签：matlab, mex

我已经在笔记本电脑上成功编译了 Mex 文件。但是当我运行它时，它会说`Invalid mex file 'c:\newfolder\filename.mexw32' The specified module could not be found`.

```
System specification:  
OS: windows 7  
MATLAB 2010a  
Microsoft Visual Studio 2008\. 
```

相同的 mex 文件在我的 PC 上的 XP SP3 下编译并成功运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T13:02:39.093

[此 MathWorks 支持链接](http://www.mathworks.com/support/solutions/en/data/1-X8A09/index.html)为您的问题提出了两个可能的原因：

1.  您没有 MEX 函数所依赖的所有必要库。
2.  您在与编译时不同的 MATLAB 版本上运行 MEX 文件。

无论哪种方式，要找到此错误的来源，它表示您需要列出所有依赖库文件并验证它们在您尝试运行 MEX 文件的系统中的存在，并且还推荐使用[Dependecy Walker](http://www.dependencywalker.com/)作为工具去做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T12:45:26.743

您是否将 mex 文件放在另一个系统上，而不是创建它的系统上？

如果是这样，那么您需要在该机器上安装[Microsoft Visual C++ Redistributable 。](http://www.microsoft.com/en-us/download/details.aspx?id=2092)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T14:11:40.983

从 Matlab2010a/VS2008 升级到 Matlab2013a/VS2010 时，我也遇到了这个问题。

我所有的环境变量都已正确发送。重新启动修复了未找到 OpenCV dll 的问题，我认为它仍在尝试链接到 VS2008 的 OpenCV dll（即使我已经更改了路径）。但是我的 mex 文件仍然找不到 libmex.dll。

当我安装Matlab2013a时，我没有卸载旧版本（以防我想回去）。然而，这是我的问题的原因。一旦我卸载了旧版本的 Matlab 并再次重新启动，问题就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T13:54:04.347

我有一个类似的问题。我只链接了 1 个“lib”，所以我只是将该 lib 复制到与 mexw64 相同的文件夹中，它就可以工作了。

我没有四处寻找正确的位置来告诉 MATLAB 将 lib 的真实位置添加到它正在查看的任何路径中。

# c# - C# 动态类型陷阱

> ID：15338429
> 
> 赞同：19
> 
> 时间：2013-03-11T12:20:04.023
> 
> 标签：c#, dynamic, types

我刚刚遇到了最奇怪的事情，我有点介意=此刻被**吹了......**

下面的程序编译得很好，但是当你运行它`RuntimeBinderException`时，当你尝试阅读时会得到一个`Value`.`'object' does not contain a definition for 'Value'`

```
class Program
{
    interface IContainer
    {
        int Value { get; }
    }

    class Factory
    {
        class Empty : IContainer
        {
            public int Value
            {
                get { return 0; }
            }
        }

        static IContainer nullObj = new Empty();

        public IContainer GetContainer()
        {
            return nullObj;
        }
    }

    static void Main(string[] args)
    {
        dynamic factory = new Factory();
        dynamic container = factory.GetContainer();
        var num0 = container.Value; // WTF!? RuntimeBinderException, really?
    }
} 
```

这是令人兴奋的部分。将嵌套类型移到类`Factory+Empty`之外`Factory`，如下所示：

```
class Empty : IContainer
{
    public int Value
    {
        get { return 0; }
    }
}

class Factory... 
```

程序运行得很好，有人愿意解释这是为什么吗？

# 编辑

在我的编码冒险中，我当然做了一些我应该首先考虑的事情。这就是为什么你看到我对私有类和内部类之间的区别有点漫不经心。这是因为我设置了`InternalsVisibleToAttribute`，这使得我的测试项目（在这种情况下正在消耗位）的行为方式与它们的行为方式相同，这完全是设计使然，尽管从一开始就暗示了我。

阅读 Eric Lippert 的答案以获得对其余部分的良好解释。

真正让我感到警惕的是，动态绑定器考虑到了实例类型的可见性。我有很多 JavaScript 经验，作为一名真正没有公共或私有之类的 JavaScript 程序员，我完全被可见性很重要的事实所愚弄，我的意思是毕竟，我访问这个成员就像它是公共接口类型（我认为动态只是反射的语法糖），但动态绑定器不能做出这样的假设，除非你给它一个提示，使用一个简单的演员。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T14:53:32.763

C# 中“动态”的基本原则是：在运行时对表达式进行类型分析，*就好像运行时类型是编译时类型一样*。所以让我们看看如果我们真的这样做会发生什么：

```
 dynamic num0 = ((Program.Factory.Empty)container).Value; 
```

该程序将失败，因为`Empty`无法访问。`dynamic`不允许您进行一开始就非法的分析。

然而，运行时分析器意识到了这一点，并决定稍微作弊。它会问自己“是否有可以访问的 Empty 基类？” 答案显然是肯定的。所以它决定回退到基类并分析：

```
 dynamic num0 = ((System.Object)container).Value; 
```

失败是因为该程序会给您“对象没有名为值的成员”错误。这是你得到的错误。

动态分析从不说“哦，你一定是故意的”

```
 dynamic num0 = ((Program.IContainer)container).Value; 
```

因为当然*，如果这就是你的意思，那你一开始就是这么写的*。同样， 的目的`dynamic`是回答*如果编译器知道运行时类型会发生什么*的问题，并且强制转换为接口不会为您提供运行时类型。

当你移到`Empty`外面时，动态运行时分析器会假装你写了：

```
 dynamic num0 = ((Empty)container).Value; 
```

现在`Empty`可以访问并且演员表是合法的，所以你得到了预期的结果。

* * *

更新：

> 可以将该代码编译成一个程序集，引用这个程序集，如果 Empty 类型在类之外，它将工作，这将使其默认为内部

我无法重现所描述的行为。让我们尝试一个小例子：

```
public class Factory
{
    public static Thing Create()
    {
        return new InternalThing();
    }
}
public abstract class Thing {}
internal class InternalThing : Thing
{
    public int Value {get; set;}
} 
```

* * *

```
> csc /t:library bar.cs 
```

* * *

```
class P
{
    static void Main ()
    {
        System.Console.WriteLine(((dynamic)(Factory.Create())).Value);
    }
} 
```

* * *

```
> csc foo.cs /r:bar.dll
> foo
Unhandled Exception: Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 
'Thing' does not contain a definition for 'Value' 
```

* * *

您会看到这是如何工作的：运行时绑定程序检测`InternalThing`到外部程序集的内部，因此在 foo.exe 中无法访问。所以它回退到公共基类型 ，`Thing`它是可访问的，但没有必要的属性。

我无法重现您描述的行为，如果您可以重现它，那么您发现了一个错误。如果你有这个 bug 的小副本，我很乐意将它传递给我以前的同事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:57:44.623

我想，在运行时，容器方法调用只是在私有 Empty 类中解决，这会使您的代码失败。据我所知，动态不能用于访问私有成员（或私有类的公共成员）

这应该（当然）工作：

```
var num0 = ((IContainer)container).Value; 
```

在这里，它是私有类 Empty ：因此您不能在声明类（工厂）之外操作 Empty 实例。这就是您的代码失败的原因。

如果 Empty 是内部的，您将能够在整个程序集中操纵它的实例，（嗯，并不是因为 Factory 是私有的）允许所有动态调用，并且您的代码工作。

# javascript - Facebook 将自定义操作发布到时间线

> ID：15338437
> 
> 赞同：1
> 
> 时间：2013-03-11T12:20:38.237
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-opengraph

我创建了一个自定义操作，我希望允许用户使用 {User} 阅读 {Article} 将其发布到他们的时间线。当我使用这样的示例 URL 发布帖子时，我可以让它正常工作：

```
 FB.api('/me/fbsite:actionname' + 
'?object=http://samples.ogp.me/356694057772404&access_token=abc','post' 
```

但是，当我用自己的 URL 替换示例 URL 时，我收到错误“使用 API 调用显式使会话无效”。有人可以请教吗？

编辑：将我的 Javascript 更改为此，但我现在得到“无效的 OAuth 访问令牌”：

```
<script type="text/javascript">
function redeem() {
    FB.api('/me/fbsite:actionname' +
   '?object=http://samples.ogp.me/356694057772404&access_token=\' + <%=UserManager.Current.FB.accessToken %>  + \'', 'post',
   function (response) {
       var msg = 'Error occured';
       if (!response || response.error) {
           if (response.error) {
               msg += "\n\nType: " + response.error.type + "\n\nMessage: " + response.error.message;
           }
           alert(msg);
       }
       else {
           alert('Post was successful! Action ID: ' + response.id);
       }
   });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:12:20.147

这可能是因为您在同一会话中使用相同的访问令牌。因此，请尝试注销并重新登录，获取新的 FB 访问令牌，然后使用您获得的新访问令牌尝试查询，这应该可以按预期工作。

# java - 我无法在 android 中获得正确的收件箱彩信计数值

> ID：15338439
> 
> 赞同：1
> 
> 时间：2013-03-11T12:20:40.413
> 
> 标签：java, android

如何在 Android 中获得 MMS 收件箱和已发送箱的准确计数？

```
Uri mmsInboxUri = Uri.parse("content://mms/inbox");                 
    Cursor mmsInboxCursor = getContentResolver().query(mmsInboxUri ,new String[] {"_id","ct_t"}, null, null, null);
    int count = mmsInboxCursor.getCount();          
    if (mmsInboxCursor != null) 
    {
        if (mmsInboxCursor.moveToFirst())
        {
            coloumns = mmsInboxCursor.getColumnNames(); 
            //String subject = mmsInboxCursor.getString(mmsInboxCursor.getColumnIndex("sub"));
            String string = mmsInboxCursor.getString(1);                        
            if ("application/vnd.wap.multipart.related".equals(string)) 
```

# apache - 如何在服务器上单独服务？

> ID：15338441
> 
> 赞同：1
> 
> 时间：2013-03-11T12:20:51.773
> 
> 标签：apache, service, web-deployment

我有两个服务，即 jsf web app 服务和 android 服务。两者都使用相同的功能，例如登录注册等。

现在我必须将这两个服务分开，因为我已经使用了 Web 应用程序中的所有功能，而我想将其用于 android 应用程序。那么我该如何将它部署在服务器上呢？

就像在 webapp 文件夹中的 apache 服务器上一样，会有两个子文件夹 webapp/android 和 webapp/webapp 所以我在哪里可以将所有 *.java 文件（其中包含登录名并与数据库通信）存储在服务器上，以便它们都可以访问现有功能。

谢谢

# javascript - 将输入包装在按钮中，响应按钮单击

> ID：15338443
> 
> 赞同：3
> 
> 时间：2013-03-11T12:20:57.907
> 
> 标签：javascript, html

我想要实现的是一致的行为。当我们单击输入字段时，颜色选择器就会出现。当我单击包装它的按钮时，我想要相同的行为。

```
<button class="btn btn-small my-btn">
  Color <input type="color" value="#33aabb">
</button> 
```

[JSF](http://jsfiddle.net/topless/J73dK/)中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:23:46.723

只需按照输入的`.click()` [http://jsfiddle.net/J73dK/1/](http://jsfiddle.net/J73dK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:33:53.303

这应该有效：

```
<button class="btn btn-small my-btn" onclick="this.querySelector('input').click()">
    Color <input type="color" value="#33aabb">
</button> 
```

[http://jsfiddle.net/C2wj2/](http://jsfiddle.net/C2wj2/)

# hibernate - Hibernate+Spring Mvc 集成

> ID：15338448
> 
> 赞同：0
> 
> 时间：2013-03-11T12:21:01.793
> 
> 标签：hibernate, spring-mvc

org.springframework.beans.factory.BeanCreationException：创建名为“searchController”的bean时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：com.jlcindia.spring.service.StudentService com.jlcindia.mvc.SearchController.studentService；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“studentService”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 com.jlcindia.spring.dao.StudentDAO com.jlcindia.spring.service.StudentServiceImpl.studentDAO；嵌套异常是 org.springframework.beans.factory.BeanCreationException: Error created bean with name ' studentDAO'：自动装配依赖注入失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：org.springframework.orm.hibernate3.HibernateTemplate com.jlcindia.spring.dao.HibernateStudentDAO.htemp；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/jlcindia-servlet.xml] 中定义名称为“rishi”的 bean 创建错误：调用 init 方法失败；嵌套异常是 java.lang.IllegalArgumentException：需要属性“sessionFactory”。嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/jlcindia-servlet.xml] 中定义名称为“rishi”的 bean 创建错误：调用 init 方法失败；嵌套异常是 java.lang.IllegalArgumentException：需要属性“sessionFactory”。嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/jlcindia-servlet.xml] 中定义名称为“rishi”的 bean 创建错误：调用 init 方法失败；嵌套异常是 java.lang.IllegalArgumentException：需要属性“sessionFactory”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:38:47.587

最后一句话告诉你什么是行不通的：

```
nested exception is java.lang.IllegalArgumentException: Property 'sessionFactory' is required. 
```

这意味着在 bean 之前，它似乎是一个“rashi”，您没有设置 sessionFactory 属性。

另外，请注意，当您将代码/日志粘贴到文本框中时，您可以选择它并单击小 {} 按钮将其标记为“代码”。它还有助于对情况进行一些描述，也许还有一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T05:57:32.560

你在这里缺少什么你需要在你的 xml 文件中创建会话工厂 bean 你可以谷歌它我们如何创建会话工厂。

会话工厂将帮助您创建与数据库的连接您可以找到许多关于它们的教程，一旦您将会话工厂集成到您的项目中，只需开始使用会话工厂使用休眠模板创建带有会话工厂的 dbconnections。

谢谢，希曼舒

# c# - 用单反斜杠替换双反斜杠

> ID：15338451
> 
> 赞同：0
> 
> 时间：2013-03-11T12:21:19.600
> 
> 标签：c#, str-replace

我已经看到很多例子来解决这个问题，但到目前为止没有一个有效。也许我没有正确地做到这一点。我的代码是：

```
private void button1_Click(object sender, EventArgs e)
{
    string str = "C:\\ssl\\t.txt";
    string str2 = str.Replace("\\","\");
} 
```

我的输出应该是这样的：

> C:\ssl\t.txt

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:23:24.843

中的斜线`str`已经是单斜线。如果你这样做：

```
Console.WriteLine(str); 
```

你会看见：

```
C:\ssl\t.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:25:46.890

为什么要这么做？在 C 语言中，你必须`\`像这样逃避：`\\`为了得到`\`, 像

```
string str = "C:\\ssl\\t.txt"; 
```

这相当于

```
string str = @"C:\ssl\t.txt"; 
```

尝试输出字符串，你会看到，它实际上是

```
C:\ssl\t.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:23:39.087

```
string str = "C:\\ssl\\t.txt"; 
```

这将输出为`C:\ssl\t.txt`. `\`C# 将char标记`\\`为转义序列。

有关转义字符的列表，请查看以下页面：

[http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-c​​haracter-escape-sequences-are-available.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-character-escape-sequences-are-available.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T13:16:35.003

尽管所有其他答案都是正确的，但 OP 似乎很难理解它们，除非它们使用`Directory`或`Path`作为示例。

在 C# 中，`\`字符用于描述特殊字符，例如`\r\n`，代表`System.Environment.NewLine`.

```
string a = "hello\r\nworld";

// hello
// world 
```

正因为如此，如果你想使用文字`\`，你需要转义它，使用`\\`

```
string a = "hello\\r\\nworld";

// hello\r\nworld 
```

这适用于任何***地方***，甚至在s 中`Regex`或 for `Path`s 中。

```
System.IO.Directory.CreateDirectory("hello\r\nworld"); // System.ArgumentException
// Obviously, since new lines are invalid in file names or paths

System.IO.Directory.CreateDirectory("hello\\r\\nworld");
// Will create a directory "nworld" inside a directory "r" inside a directory "hello" 
```

在某些情况下，我们只关心字面量`\`，所以`\\`一直写会很累，并且会使代码难以调试。为了避免这种情况，我们使用逐字字符`@`

```
string a = @"hello\r\nworld";

// hello\r\nworld 
```

**简短回答：**
无需替换`\\`为`\`.
事实上，你根本***不***应该尝试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T12:25:16.470

```
 private void button1_Click(object sender, EventArgs e)
        {
             string str = "C:\\ssl\\t.txt";

             MessageBox.Show(str);

        } 
```

# macos - 脚本桥接并生成 Microsoft Word 头文件

> ID：15338454
> 
> 赞同：2
> 
> 时间：2013-03-11T12:21:25.093
> 
> 标签：macos, cocoa, ms-word, scripting-bridge

我正在尝试让 Cocoa 应用程序连接到 Microsoft Word，从我的搜索看来，唯一的方法是使用 Scripting Bridge 并生成一个 word 头文件。但是，使用 Apple 示例项目[SBSendEmail](https://developer.apple.com/library/mac/#samplecode/SBSendEmail/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004645)中解释的方法：

```
sdef "$INPUT_FILE_PATH" | sdp -fh -o "$DERIVED_FILES_DIR" --basename "$INPUT_FILE_BASE" --bundleid `defaults read "$INPUT_FILE_PATH/Contents/Info" CFBundleIdentifier` 
```

不生成可用的字头文件，我得到以下信息：

> sdp：枚举“e183”的枚举器：缺少必需的“名称”属性。引用

通过在 Google 上的进一步搜索，我在 Apple 论坛上找到了以下讨论：[https ://discussions.apple.com/thread/2623068?start=0&tstart=0](https://discussions.apple.com/thread/2623068?start=0&tstart=0)

但是，在 OP 遇到相同问题的情况下，尝试他的工作并没有帮助，即仍然没有可用的头文件。OP 建议使用以下内容：

```
sdef ./Microsoft\ Word.app/ > word.sdef 
cat word.sdef | sdp -fh --basename word 
```

所以我想知道，是否有人知道如何解决这个问题，或者是否有其他方法可以从 Microsoft Word 发送和获取数据/信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:27:59.723

所以我发现了如何为 Microsoft Word 2011 for Mac “解决”这个问题，我不太喜欢它，但它似乎有效。“解决方案”基于我链接的讨论：

这些命令在构建规则中运行，就像在 Apples 示例中描述和显示的那样（有关链接，请参阅我的第一条评论）。

1.  首先使用命令`sdef "$INPUT_FILE_PATH" > word.sdef`（INPUT_FILE_PATH 是 Microsoft Word 的路径，我已将其拖入 XCode）
2.  打开 word.sdef 文件并搜索名为 e315 和 e183 的枚举。枚举看起来像：`
3.  e183 缺少一个名称字段，所以我只是在其中添加了一个字符串
4.  e315 缺少其所有名称字段，因此我添加了它们
5.  然后使用命令`cat word.sdef | sdp -fh -o "$DERIVED_FILES_DIR" --basename "$INPUT_FILE_BASE"`
6.  现在生成并可以使用 Microsoft Word.h 文件。

我不喜欢该解决方案，因为您必须手动将字符串添加到 .sdef 文件中，但它似乎有效。

我会将其标记为正确答案，因为它解决了问题，但如果有人有更好的解决方案，请告诉。

# java - Hadoop - 分析日志文件 (Java)

> ID：15338455
> 
> 赞同：6
> 
> 时间：2013-03-11T12:21:29.280
> 
> 标签：java, logging, hadoop

日志文件如下所示：

```
Time stamp,activity,-,User,-,id,-,data 
```

--

```
2013-01-08T16:21:35.561+0100,reminder,-,User1234,-,131235467,-,-
2013-01-02T15:57:24.024+0100,order,-,User1234,-,-,-,{items:[{"prd":"131235467","count": 5, "amount": 11.6},{"prd": "13123545", "count": 1, "amount": 55.99}], oid: 5556}
2013-01-08T16:21:35.561+0100,login,-,User45687,-,143435467,-,-
2013-01-08T16:21:35.561+0100,reminder,-,User45687,-,143435467,-,-
2013-01-08T16:21:35.561+0100,order,-,User45687,-,-,-,{items:[{"prd":"1315467","count": 5, "amount": 11.6},{"prd": "133545", "count": 1, "amount": 55.99}], oid: 5556}
...
... 
```

**编辑**

此日志中的具体示例：

`User1234`有一个-`reminder`这`reminder`有`id`= ， 在此之后`131235467`他做了一个`order`如下`data`：`{items:[{"prd":"131235467","count": 5, "amount": 11.6},{"prd": "13123545", "count": 1, "amount": 55.99}], oid: 5556}``id``prd``data``count``amount`

```
User 1234    Prdsum: 58 
```

`User45687`也做了一个，`order`但他没有收到一个`reminder`所以**没有**总结他的`data`

输出：

```
User45687    Prdsum: 0 
```

此日志的最终输出：

```
User 1234    Prdsum: 58    
User45687    Prdsum: 0 
```

我的问题是：我如何比较（？）这个值 ->`id`和`prd`in `data`？关键是用户。自定义 Writable 有用吗-> value= (id, data)。我需要一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:40:49.177

我建议您在第一次通过 Hadoop 作业时获取原始输出总和，因此在 Hadoop 作业结束时，您会得到如下结果：

```
User1234     Prdsum: 58    
User45687    Prdsum: 0 
```

然后有第二个 Hadoop 作业（或独立作业）比较各种值并生成另一个报告。

您需要“状态”作为第一个 Hadoop 作业的一部分吗？如果是这样，那么您将需要在您的映射器或归约器中保留一个 HashMap 或 HashTable 来存储所有键（在这种情况下为用户）的值以进行比较——但这不是一个好的设置，恕我直言。你最好只在一个 Hadoop 工作中进行聚合，然后在另一个工作中进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T16:41:51.927

一种实现方法是使用复合键。Mapper 输出 Key 是用户 ID、事件 ID 的组合（提醒 -> 0，订单 -> 1）。使用 userid 对数据进行分区，您需要编写自己的比较器。这是要点。

**映射器**

```
for every event check the event type 
    if event type is "reminder"
        emit : <User1234,0> <reminder id>
    if event type is "order"
        split if you have multiple orders
        for every order
            emit : <User1234,1> <prd, count* amount, other interested blah> 
```

使用用户 ID 进行分区，因此具有相同用户的所有条目都将转到相同的减速器。

**减速器**

在 reducer 中，所有条目都将按用户 ID 和排序的事件 ID 分组（即，首先您将获得给定用户 ID 的所有提醒，然后是订单）。

```
If `eventid` is 0
    add reminders id to a set (`reminderSet`).

If `eventid` is is 1 &&  prd is in `remindersSet` 
   emit : `<userid>  <prdsum>`
else 
   emit : `<userid>  <0>` 
```

有关复合键的更多详细信息，请参见“Hadoop 权威指南”或[此处](http://vangjee.wordpress.com/2012/03/20/secondary-sorting-aka-sorting-values-in-hadoops-mapreduce-programming-paradigm/)

# windows-phone-7 - 如何防止横向移动 WP8 浏览器控件内容？

> ID：15338456
> 
> 赞同：1
> 
> 时间：2013-03-11T12:21:35.723
> 
> 标签：windows-phone-7, webbrowser-control, viewport

有人可以帮助我提供一些解决方案，以防止用户横向移动 WP8 网络浏览器内容但仍允许垂直滚动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:24:20.070

在网页中使用下面的元标记来避免横向滚动。

```
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta http-equiv="Content-type" content="text/html; charset=utf-8" /> 
```

# javascript - JS 幻灯片以一种方式工作

> ID：15338459
> 
> 赞同：2
> 
> 时间：2013-03-11T12:21:41.610
> 
> 标签：javascript, css, slideshow

我的幻灯片出现了不稳定的行为。它由用户点击的寻呼机驱动。单击相应的寻呼机时，下一个图像可见（不透明度/过滤器）并设置为 z-index 5，以便它应该位于当前图像下方（z-index 10）。当前图像然后淡出，最后，下一个图像设置为当前，并且已淡出的图像设置为 z-index 0。但是，这仅在单击返回上一个图像时有效（在 Chrome 中，即行为更加奇怪。）按图像顺序排列。也就是说，

*   **铬合金：**
*   "list_slide1" 到 "list_slide3" 即时跳转，不褪色
*   “list_slide3”到“list_slide1”淡入淡出行为正确
*   **然后...**
*   "list_slide1" 到 "list_slide3" 即时跳转不褪色 "list_slide3" 到
*   “list_slide2”淡入淡出行为正确
*   **或者...**
*   "list_slide1" 到 "list_slide6" 即时跳转不褪色
*   任何前面的 list-slide1-5 淡入淡出的“list_slide6”行为正确
*   **IE：**
*   "list_slide1" 到 "list_slide3" 即时跳转，不褪色
*   “list_slide3”到“list_slide1”第二次暂停然后跳转

寻呼机和图像是从数据库动态生成的（因此是代码底部的一小段 PHP）。它包含与数据库中页面列出的一样多的项目。

几点注意事项：

> 1）淡入淡出功能是我自己对 [http://javascript.info/tutorial/animation](http://javascript.info/tutorial/animation)的看法，并且在网站其他地方的另一个幻灯片中工作得很好。
> 
> 2) getElementsByClass 来自[http://www.robertnyman.com](http://www.robertnyman.com)并在数组中返回所请求类的父元素和子元素（因此我调用 current[0] 等）

谢谢。

```
<script type="text/javascript">

var pager = document.getElementById('pager1');
var list_pagers = document.getElementById('pagers')
var i = 0;

var next_slide = function(next) {  
  if (next.className !== 'slide_current') {

    if (getElementsByClassName('slide_pending').length === 0) {
      var current = getElementsByClassName('slide_current');
      next.className = 'slide_pending';
      next.style.zIndex = 5;
      next.style.opacity = 1;
      next.style.filter = 'alpha(opacity = 100)';
      next.style.display = 'block';
      fade(current[0], linear, 1000);
      var fadeSlide = switcher(next, current);   
    }
  }  
}

var switcher = function(now, then) {

  setTimeout(function() {
  now.className = 'slide_current';
  now.style.zIndex = 10;
  now.style.opacity = 1;
  now.style.filter = 'alpha(opacity = 100)';

  then[0].className = 'slide_hide';
  then[0].style.zIndex = 0;

  then[0].style.opacity = 0;
  then[0].style.filter = 'alpha(opacity = 0)';
  then[0].style.display = 'none';
  }, 1001);
}

<?php
// dynamically build event for each pager/slide in the show.
for ($k = 1; $k <= $i; $k++) {
  echo  'var next_slide' .$k. ' = document.getElementById("list_slide" +' .$k. '); ',
        'addEvent(list_pagers.childNodes[' .($k - 1). '], "click", function () {next_slide(next_slide' .$k. ')}); ';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:28:10.850

请原谅我没有针对您的确切问题发布答案，但出于以下原因，我会避免自己编写 Javascript 插件：

*   Web 上已经存在数百个，其中一些是在 GitHub 上作为开源开发的，通过协作开发来防止潜在问题。
*   无需重新发明轮子；只需花 20 分钟在谷歌上搜索 javascript 滑块，然后找到一个可以根据需要进行自定义的滑块。

我喜欢使用的一对是“caroufredsel”，它响应迅速并提供了一些不错的功能（动态添加项目、回调等）。

另一个是'flexslider'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:27:30.463

解决方案：

问题是`<div>`我试图淡化的标签每个都包含一个`<img>`和另一个`<div>`......正在应用的 CSS 要么工作不一致/不规律，要么 - 正如 IE 所不会 - 根本没有......解决方案是 - 而不是而不是动画父级的淡入淡出`<div>`- 分别动画各个子组件。起初，IE 解决方案看起来完全独立。事实上，为所有浏览器创建一个简洁、轻量级的非 JQuery 幻灯片是很有见地的。一个权衡是我必须将所有样式合并到元素标签中，而不是单独的 CSS。在这种情况下，这似乎是唯一可行的选择，因为所发出的 DOM 请求的性质......非常感谢收到的问题/反馈：

```
 <script type="text/javascript">
var list_pagers = document.getElementById('pagers')
var i = 0;

<?php
// dynamically build event for each pager/slide in the show.
for ($k = 1; $k <= $i; $k++) {
  echo  'var next_slide' .$k. ' = document.getElementById("list_slide" +' .$k. '); ',
        'addEvent(list_pagers.childNodes[' .($k - 1). '], "click", function () {next_slide(next_slide' .$k. ')}); ';
}
?>

var next_slide = function(next) {  
  if (next.className !== 'slide_current') {
      if (navigator.appName === 'Microsoft Internet Explorer') {
        //IE 7 & 8 
        if ((navigator.appVersion.search('MSIE 8.0') >= 1) || (navigator.appVersion.search('MSIE 7.0') >= 1)) {

          var current = getElementsByClassName('slide_current')[0].childNodes[0];
          var currentBar = getElementsByClassName('slide_current')[0].childNodes[1];
          var nextBar = next.childNodes[1]; 
          var nextSlide = next.childNodes[0];
        } else {
        //IE 9
          var current = getElementsByClassName('slide_current')[0].childNodes[1];
          var currentBar = getElementsByClassName('slide_current')[0].childNodes[2];
          var nextBar = next.childNodes[2]; 
          var nextSlide = next.childNodes[1];
        }

        // give the next slide and its header (nextBar) a temporary status of zIndex 5/6
        nextSlide.style.zIndex = 5;
        nextBar.style.zIndex = 6;
        nextSlide.style.filter = "alpha(opacity=100)";
        nextBar.style.filter = "alpha(opacity=85)";

        fade(currentBar, linear, 500); // fade currentBar out
        fade(current, linear, 500); // fade current out

        //once we've faded out current slides, it's time to replace them with th
        setTimeout(function() {
          getElementsByClassName('slide_current')[0].className = 'slide_hide';
          next.className = 'slide_current';
          nextSlide.style.opacity = 1; // IE 9 includes opacity...
          nextBar.style.opacity = 1; // IE 9 includes opacity...
          nextSlide.style.filter = "alpha(opacity=100)";  
          nextBar.style.filter = "alpha(opacity=85)";
          nextSlide.style.zIndex = 10;
          nextBar.style.zIndex = 11;
        }, 500);         

    } else {
      // NON IE TAGS    
      var current = getElementsByClassName('slide_current')[0];
      current.childNodes[1].style.zIndex = 10; // [1] the child <img> tag
      current.childNodes[2].style.zIndex = 11; // [2] the child <div> tag
      current.childNodes[1].style.opacity = 1;
      current.childNodes[2].style.opacity = 0.85;    
      next.childNodes[1].style.zIndex = 5;
      next.childNodes[2].style.zIndex = 6;
      next.childNodes[1].style.opacity = 1;
      next.childNodes[2].style.opacity = 0.85;      
      fade(current.childNodes[1], linear, 600); // fade current out
      fade(current.childNodes[2], linear, 600); // fade current out
      var fadeSlide = setTimeout(function() {switcher(next, current)}, 500); 
      var switcher = function(now, then, nowBar, thenBar) {

        then.className = 'slide_hide';
        then.childNodes[1].style.opacity = 0;
        then.childNodes[2].style.opacity = 0;
        now.className = 'slide_current';  
        now.childNodes[1].style.opacity = 1;
        now.childNodes[2].style.opacity = 0.85;
        now.style.opacity = 1;
      }
    }
  }  
}

</script> 
```

# ios - mkannotation 中的自定义数据变量

> ID：15338464
> 
> 赞同：5
> 
> 时间：2013-03-11T12:21:52.133
> 
> 标签：ios, objective-c

我有一个地图视图控制器（UIViewController，MKMapView），它的委托（HCIResultMapViewController）。

我希望在这部分具有以下功能。

1）。我希望使用我定制的 NSObject ，这样我就可以将其他细节与标题、副标题等基本实体关联起来。

因此，根据我的需要，我编码如下

在 HCIResultMapViewController

```
- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view.

_houseList = [[_resultList objectForKey:@"result"] objectForKey:@"listings"];

// NSLog([_houseList description]);

int i = 0;

for (NSDictionary *house in _houseList) {

    HCIAnnotationViewController *annotation = [[HCIAnnotationViewController alloc]
                                     initwithHouse:house];
    [_mapView addAnnotation:annotation];
    // NSLog(@"asdjhasdjsajdhaksdjghasdasdjahsdahskvdka");
    self.currIdentifier = i;
    i++;
}

[_mapView setShowsUserLocation:NO];
} 
```

其他委托功能

```
-(void) mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {

for (NSObject<MKAnnotation> *annotation in _mapView.selectedAnnotations) {
    NSLog(@"hellomaster");
    NSLog(annotation.title);
    if ([annotation isKindOfClass:[HCIAnnotationViewController class]]) {
        NSLog(@"hellomaster");
    }
} 
```

最后一个

```
-(MKAnnotationView*) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {

NSString *identifier = @"currIdentifier";

    MKPinAnnotationView *annotationView =
    (MKPinAnnotationView *)[_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc]
                          initWithAnnotation:annotation
                          reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
annotationView.tag = self.currIdentifier;

    // Create a UIButton object to add on the
    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [annotationView setRightCalloutAccessoryView:rightButton];

/*
    UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
    [leftButton setTitle:annotation.title forState:UIControlStateNormal];
    [annotationView setLeftCalloutAccessoryView:leftButton];
  */  
    return annotationView;
} 
```

但我看到类等价失败了。你能告诉我我做错了什么吗？

简而言之，我想我想要的是如何发送一些数据（NSDictionary *）以及注释，以便我可以随时检索它？

请不要将此标记为重复问题左右。我尝试了很多问题，谷歌搜索等，但找不到合适的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:10:24.007

我找不到实现自定义数据变量的确切方法或我的类等效失败的原因。但我想出了一个办法来克服这种情况。这在方法上可能是多余的，但仍然像一个魅力。

所以这个想法是在控制按钮中使用标记系统。我观察到，每次我向地图视图发送消息以添加注释时，它都会立即调用我的 viewforannotation 方法。由于我正在遍历一个数组，因此我维护了一个索引全局指针，我用它设置了控制按钮的标记。稍后单击按钮时，我检索标签并使用它来获取我想要的对象。

其他人有任何替代或直接解决方案，请发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:31:07.753

这里也可以设置`NSMutableDictionary`为`NSString`.
创建自定义`AnnotationView`：

```
#import <MapKit/MapKit.h>

@interface AnnotationView : MKPlacemark

@property (nonatomic, readwrite, assign) CLLocationCoordinate2D coordinate;

@property (nonatomic, strong) NSString *title; //Here You cam set `NSMutableDictionary` instand of `NSString`
@property (nonatomic, strong) NSString *subtitle; //Here You cam set `NSMutableDictionary` instand of `NSString`

@end 
```

而在`.m file`

```
#import "AnnotationView.h"

@implementation AnnotationView

- (id)initWithCoordinate:(CLLocationCoordinate2D)coordinate addressDictionary:(NSDictionary *)addressDictionary
{
    if ((self = [super initWithCoordinate:coordinate addressDictionary:addressDictionary]))
    {
        self.coordinate = coordinate;
    }
    return self;
}

@end 
```

// 使用注释添加`#import "AnnotationView.h"`你的相关`.m file`：

```
CLLocationCoordinate2D pCoordinate ;
pCoordinate.latitude = LatValue;
pCoordinate.longitude = LanValue;

// Create Obj Of  AnnotationView class  

AnnotationView *annotation = [[AnnotationView alloc] initWithCoordinate:pCoordinate addressDictionary:nil] ;

    annotation.title = @"I m Here";
    annotation.subtitle = @"This is Sub Tiitle";

[self.mapView addAnnotation:annotation]; 
```

# video-streaming - Java 高清视频捕获处理和流式传输

> ID：15338465
> 
> 赞同：4
> 
> 时间：2013-03-11T12:21:55.627
> 
> 标签：video-streaming, video-capture, video-processing, xuggler, vlcj

我有一个应用程序，它从高清摄像机捕获实时视频并将其流式传输到视频流服务器。我目前使用 Adob​​e Flash Media Live Encoder(FMLE) 将捕获的视频流发送到服务器。

问题是 FMLE 不支持 linux。我将 VLCJ 和 Xuggler 作为 FMLE 的可能替代品，并且它们提供了对编码媒体的更好控制，以便我们可以放入可选的运动检测器、过滤器等。是否可以使用 VLCJ 的视频捕获支持支持和处理xuggler 对我的应用程序的支持。我的意思是是否有任何通用接口可以将捕获的流从 vlcj 呈现到 Xuggler？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T13:37:46.540

没有现有的很好的接口可以链接两个库（我知道），但您可以在两者之间传输原始数据。

VLCJ`DirectMediaPlayer`有一个渲染回调，它为原始像素数据提供了一个挂钩（请参阅[此处](https://github.com/caprica/vlcj/blob/master/src/test/java/uk/co/caprica/vlcj/test/direct/DirectTestPlayer.java)的特定示例。）通常这用于在 Java 层上直接进行像素操作（例如在上面的示例中制作视频灰度），但没有您不应该能够将数据通过管道传输到 Xuggler 的[IBuffer](http://www.xuggle.com/public/documentation/java/api/com/xuggle/ferry/IBuffer.html#make(com.xuggle.ferry.RefCounted,%20byte[],%20int,%20int))的真正原因，然后将其包装到 IVideoPicture 中（从那里您就进入了 Xuggler 的土地。）

我自己从来没有尝试过做这样的事情，所以你可能需要跳过一些额外的障碍——但原则上这似乎是可能的。如果您需要实时速度，我认为主要问题是速度；为高清视频在 CPU 上完成这一切对您的处理器要求不小。

# actionscript-3 - AS3 帮助 - 外部 as。归档有滞后问题的影片剪辑

> ID：15338467
> 
> 赞同：-2
> 
> 时间：2013-03-11T12:22:04.647
> 
> 标签：actionscript-3, flash, adobe, movieclip

有人可以帮我解决这个游戏中的问题。它开始滞后。[https://www.dropbox.com/s/3heopwz4s0stfz4/Spill.zip](https://www.dropbox.com/s/3heopwz4s0stfz4/Spill.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:51:41.077

滞后是由于运行时错误。始终检查父级是否在 eFrame 处理程序中包含此内容。

这是解决方案：[Spill3](https://dl.dropbox.com/u/77523978/Spill3.zip)

# android - Spinner 第一项默认设置为空值？

> ID：15338468
> 
> 赞同：2
> 
> 时间：2013-03-11T12:22:06.513
> 
> 标签：android

在此代码中，我在微调器中添加了从 600000 到 600113 的 pincode 数字，但我希望第一个位置为空。当用户仅单击时，应显示该项目。请看我的代码 -

```
final String[] myarray=new String[114];

    for(int i=0;i<114;i++)
    {

    myarray[i]=String.valueOf(a);
    a++;
    }
    ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(MainActivity.this,
            android.R.layout.simple_spinner_dropdown_item,myarray);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    addnum_spinner.setAdapter(adapter);
    lv.setOnItemClickListener(itemClickedListener);

  //Spinner click  

    addnum_spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
            // your code here
            String value = myarray[position];

            //
        }

        @Override
        public void onNothingSelected(AdapterView<?> parentView) {
            // your code here
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:24:32.007

将此属性添加到您的`spinner`in`xml`并尝试是否可行

```
android:prompt="" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T02:42:11.023

我不知道这是否是正确的方法，但是在 for 循环之前添加空字符串作为第一项，然后您只需要处理用户单击侦听器中的空项即可。就像是

```
final String[] myarray=new String[115];
    myarray[0] = ""
    for(int i=1;i<115;i++)
    {

    myarray[i]=String.valueOf(a);
    a++;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T07:45:51.880

我知道这个问题很老，但我正在添加一个解决方案。我偶然发现了这一点，因为我不想要一个空白的默认值，但有一个。

如果使用 ArrayAdapter，我发现将适配器附加到一个空的 ArrayList，然后填充它会留下一个空白的初始值。

首先填充 ArrayList，然后附加 ArrayAdapter 删除了空白默认值。

显然，如果不使用 ArrayAdapter、使用提示或将第一个 Spinner 项设置为`<item></item>`在 XML 之间没有任何内容，应该可以工作。

# sql-server-2005 - 如何编写查询以在 Sql Server 2005 中以自定义格式显示表中的数据？

> ID：15338469
> 
> 赞同：2
> 
> 时间：2013-03-11T12:22:07.663
> 
> 标签：sql-server-2005

我的数据库中有一张表，如下所示。

![在此处输入图像描述](../Images/74f0889909e53590f87545b2cb766886.png)

所以我想写一个查询，它将返回一个如下表数据。

![在此处输入图像描述](../Images/78f86374c7b74998b58b4fb80bb1be12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:23:19.627

```
SELECT EmpId, EmpName, CatalogName, Training1 AS Training
FROM myTable
UNION ALL
SELECT EmpId, EmpName, CatalogName, Training2 AS Training
FROM myTable
UNION ALL
SELECT EmpId, EmpName, CatalogName, Training3 AS Training
FROM myTable
ORDER BY EmpId, Training 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/a7680/1)

# android - 在 ActionBar 中获取 Switch 实例

> ID：15338471
> 
> 赞同：5
> 
> 时间：2013-03-11T12:22:09.517
> 
> 标签：android, android-actionbar, switch-statement, oncreateoptionsmenu

我设法在操作栏中放置了一个开关（如在 Wi-Fi 设置中）。

我将以下**mainmenu.xml**文件放在 /menu 文件夹中：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:id="@+id/item1" 
      android:titleCondensed="Service" 
      android:title="Service"
      android:actionViewClass="android.widget.Switch"
      android:showAsAction="always|withText">
</item> 
```

之后我覆盖了`onCreateOptionsMenu()`活动中的方法，如下：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mainmenu, menu);

    // Get widget's instance
    swtService = (Switch)menu.findItem(R.id.item1).getActionView();
    swtService.setOnCheckedChangeListener(this); 

    return super.onCreateOptionsMenu(menu);
} 
```

不幸的是，我无法理解何时调用此方法。这就是问题所在：似乎`onCreateOptionsMenu`甚至在之前都没有调用它`onResume()`，所以`NullPointerException`抛出了 a ：

```
@Override
public void onResume()
{
    super.onResume();

    // Synchronize the switch with service's status
    swtService.setChecked(ServiceHelper.isServiceStarted(this, MySystemService.class.getName()));
} 
```

我错过了什么吗？还有另一种方法可以在操作栏中放置视图吗？

**编辑**

我的目标 API 是 17，我不关心更低的。:)

这是应用程序的截图，显示了调用的生命周期方法： ![生命周期方法](../Images/8d81a4c36e20ecbce538da5bd29624c8.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:09:25.230

尝试这个：

```
 @Override
    public void onPrepareOptionsMenu(Menu menu){
        super.onPrepareOptionsMenu(menu);
        swtService.setChecked(ServiceHelper.isServiceStarted(this, MySystemService.class.getName()));

    }

@Override
public void onResume()
{
    super.onResume();
    this.getActivity().invalidateOptionsMenu(); // If you are using fragment
    invalidateOptionsMenu(); // If you are using activity
} 
```

# android - 动态主题色

> ID：15338476
> 
> 赞同：2
> 
> 时间：2013-03-11T12:22:30.243
> 
> 标签：android

我想使用动态主题颜色并从服务器获取颜色，请问最好的方法是什么，如果我可以从 java 中编辑 xml 中的颜色属性，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:27:06.937

你想改变什么颜色？布局背景颜色？

```
LinearLayout ll = (LinearLayout) findViewById(R.id.linearLayout);
int color = Color.argb(255, 255, 0, 255); // Use your values from the server here
ll.setBackgroundColor(color); 
```

# sorting - jdk 中的快速排序或 O(N.logN) 排序

> ID：15338477
> 
> 赞同：4
> 
> 时间：2013-03-11T12:22:31.443
> 
> 标签：sorting, java, standard-library

****jdk 标准库中****是否有快速排序**或其他 O(N.logN) 排序？**

 ****`Collections`课堂没有带来希望：

> 只要遵守规范本身，实现者应该可以随意替换其他算法。（例如，sort 使用的算法不必是归并排序，但它必须是稳定的。）

并`Collections.sort()`没有给出任何线索：

> **sort(List<T> list)** 将指定列表按照其元素的自然顺序升序排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:31:29.007

`Collections.sort`是一种优化的归并排序，它实际上在每种情况下都保证 O(n log n) 并且它是稳定的；[链接](http://docs.oracle.com/javase/tutorial/collections/algorithms/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:32:06.480

排序依赖于[`Arrays.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29). 由于排序方法取决于类型，因此读取 JavaDoc 并不那么明显。根据阈值修改的合并排序或调整的快速排序：

```
 /**
 * Tuning parameter: list size at or below which insertion sort will be
 * used in preference to mergesort or quicksort.
 */
private static final int INSERTIONSORT_THRESHOLD = 7; 
```

这是一个比较快速排序和合并排序的帖子：[快速排序与合并排序](https://stackoverflow.com/questions/680541/quick-sort-vs-merge-sort)

结论：除非您真的知道自己在做什么，否则请相信 Java 实现。****

# mysql - 更改 MySQL 时区会更改数据库中 DateTime 字段的值吗？

> ID：15338480
> 
> 赞同：4
> 
> 时间：2013-03-11T12:22:43.493
> 
> 标签：mysql

我有一个设置为本地时区的 MySQL 数据库。尽管数据库使用不同的时区，但时间被插入为 UTC 时间。我想在 MySQL 服务器上将时区更改为 UTC。我找到了有关如何执行此操作的文档，但我不情愿，因为我不知道这是否也会更改已存储在数据库中的值。

**我的问题：**更改 MySQL 服务器的时区是否也会更改已存储的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T12:50:35.090

In principle it shouldn't. There are various reasons why it shouldn't change, depending on the type of your values : mostly DATETIME and TIMESTAMP.

DATETIME values are never converted, so they are independent of the time zone.

TIMESTAMP values are converted (direct quote from the manual here --- I assume you have a fairly recent version of MySQL) "from the current time zone to UTC for storage, and back from UTC to the current time zone for retrieval. (This does not occur for other types such as DATETIME.) By default, the current time zone for each connection is the server's time. The time zone can be set on a per-connection basis. As long as the time zone setting remains constant, you get back the same value you store. If you store a TIMESTAMP value, and then change the time zone and retrieve the value, the retrieved value is different from the value you stored. This occurs because the same time zone was not used for conversion in both directions." (from [http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)).

So in both cases the data actually stored on the server does not change (which is as it should be), but the values that your queries will show may be different before and after.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:14:49.640

这取决于您是否使用`TIMESTAMP`或`DATETIME`列来存储您的时间戳。

`TIMESTAMP`当它们存储在 MySQL 的表中时，时间会自动从本地时间（准确地说：从连接的时区设置）转换为 UTC 时间。检索它们时，它们会从 UTC 转换为本地时间。

但是`DATETIME`时间戳的存储和检索与您的应用程序将它们呈现给 MySQL 完全一样。因此，如果您将默认时区更改为 UTC，然后检索您的`TIMESTAMP`值，您将恢复为 UTC。所以他们看起来像他们改变了。但改变的是自动翻译。

更改 MySQL 默认时区不会更改任何表内容。

您可以通过在连接到 MySQL 时发出以下命令来进行试验。

```
 SET  time_zone = '+0:00'; 
```

这将更改您的连接的时区设置，而不会更改任何其他内容。

重新配置您知道自己在做什么的生产服务器时要小心：您说您的“MySQL 数据库......设置为本地时区”。在更改任何内容之前，您需要准确调查它是如何设置的。因为这里是可以影响事物的设置。

(1) 运行 MySQL 服务器软件的服务器机器上的时钟设置。

(2) 那台机器上的时区设置。

(3) 正在运行的 MySQL 服务器中的默认（又名全局）时区设置。

在大多数现代服务器中，时钟设置为正确的 UTC 时间，时区设置设置为用户期望的任何本地时区。并且，您的 MySQL 服务器的默认时区设置设置为相同的本地时区。您需要验证这些事情是否正确。

如果您的服务器一天中的时间从标准时间自动正确地翻转到夏令时（美国的昨天早上），那么前两个时间可能是正确的。

如果你发出这个 MySQL 命令：`SELECT @@global.time_zone' and get back either your local time zone name or`SYSTEM `the third is right. Also issue`SELECT NOW()` 来仔细检查。如果你得到正确的时间，你的系统可能没问题。最后，发出这两个命令：

```
 SET  time_zone = '+0:00';
 SELECT NOW(); 
```

如果您从系统中获得当前正确的 UTC 时间，那么一切都是已知且良好的状态，您已准备好进行时区切换。

通过更改`system_time_zone`MySQL 配置文件中的变量并重新启动 MySQL 服务器来进行切换。请参阅此处了解路线：

[http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html)

# c# - 调试 windows phone 应用程序时发生 System.Windows.Markup.XamlParseException

> ID：15338483
> 
> 赞同：-2
> 
> 时间：2013-03-11T12:23:18.010
> 
> 标签：c#, windows, windows-phone-7

问题已解决，代码执行成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:25:13.190

该错误是不言自明的。您正在尝试使用不存在的 PhoneTitlePanelStyle 样式

# java - 在android上显示json

> ID：15338491
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:23:25.757
> 
> 标签：java, android

我想有时间使用`SimpleDateFormat`，但我总是有错误，我不知道为什么？

这是我的代码：

```
package com.mobiblanc.wydadnews.beans;

import java.io.Serializable;
import java.text.SimpleDateFormat;

import android.net.ParseException;

public class Article implements Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private String title;
    private String excerpt;
    private String content;
    private String  pubdate;

    public String getDate() {

        return pubdate;

        SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

        try {

            this.pubdate=fmt.format(pubdate);

        } catch (ParseException e) {

            e.printStackTrace(); 

        }

    }

    public void setDate(String date) {
        this.pubdate = date;

    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getExcerpt() {
        return excerpt;
    }

    public void setExcerpt(String excerpt) {
        this.excerpt = excerpt;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:45:51.667

我看到的是，您的 getDate 方法（）总是在调用 SimpleDateFormat 之前返回日期。

```
public String getDate() {

    return pubdate; // this returns date; remove it

    SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

    try {

        this.pubdate=fmt.format(pubdate);

    } catch (ParseException e) {

        e.printStackTrace(); 

    }

} 
```

# .htaccess - 为所有传入请求重定向到 webroot index.php

> ID：15338493
> 
> 赞同：0
> 
> 时间：2013-03-11T12:23:33.963
> 
> 标签：.htaccess, redirect

我有以下目录结构：

```
/.htaccess
/index.php
/subfolder1/.htaccess
/subfolder1/index.php
/subfolder2/.htaccess
/subfolder2/index.php 
```

我希望将所有请求重定向到 /index.php。我想通过在 /.htaccess 文件中进行一些更改来实现这一点。

```
e.g. /abc to be rewritten to /index.php
e.g. /subfolder1/index.php to be rewritten to /index.php 
```

如何使用 webroot/.htaccess 文件执行此操作？

我想这样做是因为，我想在 /index.php 上显示一条消息，如“网站停机维护”消息。我想为网站上的所有子文件夹执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:42:38.117

如果存在子文件夹，则根目录下的 .htaccess 将无效。我的意思是，它会找到那个文件夹并且不重写。

或许你可以在这个问题中找到答案： [类似问题](https://stackoverflow.com/questions/13235054/how-to-redirect-all-www-traffic-with-htaccess-to-equal-non-www-pages?rq=1)

# javascript - FB.getLoginStatus 的回调没有触发

> ID：15338497
> 
> 赞同：1
> 
> 时间：2013-03-11T12:23:40.757
> 
> 标签：javascript, android, facebook, sdk, webview

我的 HTML 页面的脚本标记中有以下代码：

```
 window.fbAsyncInit = function () {
            if (FB != null) {
                FB.init({
                    appId: 'myAppID',
                    status: true,
                    cookie: true,
                    xfbml: true,
                    oauth: true
                });

                FB.getLoginStatus(function (response) {
                    console.log("callback");
                }, true);
            }
        };

        (function () {
            var e = document.createElement('script'); e.async = true;

            var protocol = "http:";
            if (document.location.protocol == "https:")
                protocol = "https:";
            e.src = protocol + '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
        }()); 
```

该页面从与 FB 应用程序设置中注册的域匹配的域加载到 Android WebView 中。

没有明显的原因，回调不再触发。它昨天才起作用，但今天它不起作用，*没有我更改任何代码或应用程序设置*。

我在 getLoginStatus 调用之前放置了一个 console.log() 调用，似乎调用本身已到达并执行；我还可以看到一些文件是从 static.ak.facebook.com 加载的。只是没有调用回调。

该应用程序*未*处于沙盒模式，这似乎已导致其他人出现此行为。

我还应该提到，相同的代码在独立浏览器（桌面和移动）中完美运行。

是什么赋予了？

# avfoundation - AVAssetExportSession 使用 AVAssetExportPresetPassthrough 中断输出

> ID：15338498
> 
> 赞同：0
> 
> 时间：2013-03-11T12:23:41.157
> 
> 标签：avfoundation, avassetexportsession

我将 AVAssetExportSession 与 AVAssetExportPresetPassthrough 结合使用将多个视频拼接在一起。一切都很好，除了我的第一个子剪辑应该完成后，它的图片“冻结”在最后一帧，但第二帧不会播放。每个剪辑完成后，我确保将图层不透明度设置为 0.0f，如果我使用另一个 Preset-Type 一切正常...有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:22:45.140

我与 Apple 取得联系，他们告诉我这是一个错误，请在此处找到错误报告：[https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/3/wo/zpx0I9jVzf8090ZICwg1GM/5.83。 28.0.9](https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/3/wo/zpx0I9jVzf8090ZICwg1GM/5.83.28.0.9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:16:56.387

虽然您可以`AVAssetExportPresetPassthrough`用来连接视频，但生成的视频并不是最兼容的，因为每个片段都以自己的轨道结束。它*应该*在 iOS/OSX 上播放，但不太可能在 YouTube 或 Facebook 上播放得很好。

所以你的实现有问题，但你可能应该考虑使用不同的预设（这会将你的视频扁平化为一个轨道）或使用`AVAssetWriter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T05:32:11.587

我想这是因为您正在使用 a`AVMutableComposition`插入 2 个视频剪辑`insertTimeRange:ofAsset:atTime:error:`。这将导致合成上有 2 个视频轨道，当有 2 个视频轨道且没有合成层指令时，只会显示第一个视频轨道。尝试自己分配视频轨道并将资产的视频轨道插入这些视频轨道，使用`insertTimeRange:ofTrack:atTime:kCMTimeZero error:&error`可能会解决这些问题。

# xml - 使用 xslt 对元素进行分组

> ID：15338499
> 
> 赞同：0
> 
> 时间：2013-03-11T12:23:45.420
> 
> 标签：xml, xslt, xslt-2.0, xslt-grouping

我想在 xsl 文件中使用函数“group by”，但我只是收到错误。

这是我的代码：

```
<table xsl:version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<tr>
<th>A</th>
<th>B</th>
</tr>
<xsl:for-each-group select="Result/Record" group-by="AC_CPR">
<tr>
  <td><xsl:value-of select="AC_CPR"/></td>
  <td><xsl:value-of select='sum(//AC_LNA/Row/Column[2])'/></td>
</tr> 
```

错误是这个：

msxml3.dll 错误“80004005”

“关键字表可能不包含 xsl:for-each-group”。

xml是这样的：

```
 <Result>
<Record code="033007">
<Name>demo</Name>
 <AC_CPR>02080</AC_CPR>
<date>10/06/2009</date>
<AC_LNA ncols="2">
<Row>
<Column>000115</Column>
<Column>9</Column>
</Row>
</AC_LNA>
<AC_FSE>10/06/2009</AC_FSE>
<AC_AV/>
</Record>
</Result> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:10:46.897

用例如写一个完整的样式表

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:key name="group" match="Result/Record" use="AC_CPR"/>

<xsl:template match="Result">
<table>
<tr>
<th>A</th>
<th>B</th>
</tr>
<xsl:for-each select="Record[generate-id() = generate-id(key('group', AC_CPR)[1])]">
<tr>
  <td><xsl:value-of select="AC_CPR"/></td>
  <td><xsl:value-of select="sum(key('group', AC_CPR)/AC_LNA/Row/Column[2])"/></td>
</tr>
</xsl:for-each>
</table>

</xsl:template>

</xsl:stylesheet> 
```

对于`sum`我猜想你想为每个组求和，而不是为所有节点的完整集求和。

# isabelle - 以应用样式将产品/元组/对类型的变量拆分为其成员

> ID：15338502
> 
> 赞同：3
> 
> 时间：2013-03-11T12:24:00.500
> 
> 标签：isabelle

假设我们正在使用一对类型`('a × 'a)`并为它定义一个`fun`模式匹配。

```
fun test :: "('a × 'a) ⇒ 'a ⇒ bool" where "test (a,b) c = True" 
```

如果我现在有一个`a_b`type 变量，`('a × 'a)`我如何`(a,b)`在应用样式证明中将其替换为它的对表示。例如，显示以下引理的最佳方式是什么？我该如何`test a_b c`替换`test (a,b) c`？

```
lemma "test a_b c = True" 
```

这是否也适用于假设中的对？

```
lemma "¬ test a_b c ⟹ flying_pigs" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:51:04.600

使用`cases`/ `case_tac`on`a_b`怎么样？

# android - Android ListView - 在“整个”行位置停止滚动

> ID：15338509
> 
> 赞同：10
> 
> 时间：2013-03-11T12:24:49.150
> 
> 标签：android, listview, scroll

抱歉标题混乱，我不能非常简洁地表达这个问题......

我有一个带有 ListView 的 Android 应用程序，它使用圆形/“无限”适配器，这基本上意味着我可以根据需要向上或向下滚动它，并且当它到达顶部或底部时，这些项目会环绕，使它看起来对用户来说，就好像他正在旋转一个无限长的（~100）重复项目列表。

此设置的目的是让用户选择一个随机项目，只需旋转/翻转列表视图并等待查看它停止的位置。我减少了 Listview 的摩擦力，因此它的弹跳速度更快，时间更长，这似乎真的很好用。最后，我在 ListView 顶部放置了一个部分透明的图像，以遮挡顶部和底部的项目（从透明到黑色的过渡），使用户看起来好像正在“选择”中间的项目，就好像他们在他们通过投掷控制的旋转“轮子”上。

有一个明显的问题：在抛出 ListView 后不会停在特定项目上，但它可以停止在两个项目之间悬停（第一个可见项目然后只显示部分）。我想避免这种情况，因为在这种情况下，哪个项目被“随机选择”并不明显。

长话短说：在 ListView 完成滚动后，我希望它停止在“整个”行上，而不是在部分可见的行上。

现在我通过检查滚动何时停止来实现此行为，然后选择第一个可见项目，如下所示：

```
 lv = this.getListView();

    lv.setFriction(0.005f);
    lv.setOnScrollListener(new OnScrollListener() {
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {}

        public void onScrollStateChanged(AbsListView view, int scrollState) {
            if (scrollState == OnScrollListener.SCROLL_STATE_IDLE) 
            {
                if (isAutoScrolling) return;

                isAutoScrolling = true;
                int pos = lv.getFirstVisiblePosition();
                lv.setSelection(pos);
                isAutoScrolling = false;
            }
        }
    }); 
```

这工作得相当好，除了一个明显的问题......第一个可见项目可能只对一两个像素可见。在这种情况下，我希望 ListView 为这两个像素“向上”跳转，以便选择*第二个*可见项。相反，当然，第一个可见项被选中，这意味着 ListView 几乎“向下”跳了一整行（减去这两个像素）。

简而言之，我不想跳到第一个可见项目，而是希望它跳到最可见的项目。如果第一个可见项目不到一半可见，我希望它跳到第二个可见项目。

这是一个插图，希望能传达我的观点。最左边的 ListView （每对）显示了投掷停止后的状态（停止的地方），右边的 ListView 显示了它通过选择第一个可见项目进行“跳跃”后的样子。在左侧，我显示了当前（错误）的情况：项目 B 几乎不可见，但它仍然是第一个可见项目，因此 listView 跳转以选择该项目 - 这是不合逻辑的，因为它必须滚动几乎整个项目高度到那里。滚动到项目 C（如右图所示）会更合乎逻辑，因为它“更接近”。

[![图片](../Images/709ff06513499f9c3436a5c8d508265d.png)](https://i.stack.imgur.com/b19Pn.jpg)
[（来源：[nickthissen.nl](http://nickthissen.nl/Images/lv.jpg)）]

我怎样才能实现这种行为？我能想到的唯一方法是以某种方式测量第一个可见项目有多少是可见的。如果超过 50%，那么我跳到那个位置。如果它小于 50%，我跳到那个位置 + 1。但是我不知道如何测量它......

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T13:00:24.323

`getChildVisibleRect`您可以使用该方法获取孩子的可见尺寸。当你有了这个，你得到了孩子的总高度，你可以滚动到适当的孩子。

在下面的示例中，我检查是否至少有一半的孩子是可见的：

```
View child = lv.getChildAt (0);    // first visible child
Rect r = new Rect (0, 0, child.getWidth(), child.getHeight());     // set this initially, as required by the docs
double height = child.getHeight () * 1.0;

lv.getChildVisibleRect (child, r, null);

if (Math.abs (r.height ()) < height / 2.0) {
    // show next child
}

else {
    // show this child
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-12T10:27:06.423

这是受 Shade 回答启发的最终代码。

一开始忘了补充`"if(Math.abs(r.height())!=height)"`。然后它在滚动到正确位置后只滚动两次，因为它总是大于 childView 的 height/2。希望能帮助到你。

```
listView.setOnScrollListener(new AbsListView.OnScrollListener(){

            @Override
            public void onScrollStateChanged(AbsListView view,int scrollState) {
                if (scrollState == SCROLL_STATE_IDLE){
                    View child = listView.getChildAt (0);    // first visible child
                    Rect r = new Rect (0, 0, child.getWidth(), child.getHeight());     // set this initially, as required by the docs
                    double height = child.getHeight () * 1.0;
                    listView.getChildVisibleRect (child, r, null);
                    if(Math.abs(r.height())!=height){//only smooth scroll when not scroll to correct position
                        if (Math.abs (r.height ()) < height / 2.0) {
                            listView.smoothScrollToPosition(listView.getLastVisiblePosition());
                        }
                        else if(Math.abs (r.height ()) > height / 2.0){
                            listView.smoothScrollToPosition(listView.getFirstVisiblePosition());
                        }
                        else{
                            listView.smoothScrollToPosition(listView.getFirstVisiblePosition());
                        }

                    }
                }
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,int visibleItemCount, int totalItemCount) {

            }}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-12T07:24:22.023

按照这3个步骤，你就可以得到你想要的！！！！

1.初始化上下滚动的两个变量：

```
int scrollingUp=0,scrollingDown=0; 
```

2.然后根据滚动增加变量的值：

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {

        if(mLastFirstVisibleItem<firstVisibleItem)
                {
                    scrollingDown=1;
                }
                if(mLastFirstVisibleItem>firstVisibleItem)
                {
                    scrollingUp=1;
                }
                mLastFirstVisibleItem=firstVisibleItem;
    } 
```

3.然后在onScrollStateChanged()中做修改：

```
@Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            switch (scrollState) {
            case SCROLL_STATE_IDLE:

                if(scrollingUp==1)
                {
                    mainListView.post(new Runnable() {
                        public void run() {
                            View child = mainListView.getChildAt (0);    // first visible child
                            Rect r = new Rect (0, 0, child.getWidth(), child.getHeight());     // set this initially, as required by the docs
                            double height = child.getHeight () * 1.0;
                            mainListView.getChildVisibleRect (child, r, null);
                            int dpDistance=Math.abs (r.height());
                            double minusDistance=dpDistance-height;
                            if (Math.abs (r.height()) < height/2)
                            {
                                mainListView.smoothScrollBy(dpDistance, 1500);
                            }       
                            else
                            {
                                mainListView.smoothScrollBy((int)minusDistance, 1500);
                            }
                            scrollingUp=0;

                        }
                    });
                }
                if(scrollingDown==1)
                {
                    mainListView.post(new Runnable() {
                        public void run() {

                            View child = mainListView.getChildAt (0);    // first visible child
                            Rect r = new Rect (0, 0, child.getWidth(), child.getHeight());     // set this initially, as required by the docs
                            double height = child.getHeight () * 1.0;
                            mainListView.getChildVisibleRect (child, r, null);
                            int dpDistance=Math.abs (r.height());
                            double minusDistance=dpDistance-height;
                            if (Math.abs (r.height()) < height/2)
                            {
                                mainListView.smoothScrollBy(dpDistance, 1500);
                            }       
                            else
                            {
                                mainListView.smoothScrollBy((int)minusDistance, 1500);
                            }
                            scrollingDown=0;
                        } 
                    });
                }
            break;
            case SCROLL_STATE_TOUCH_SCROLL:

                break;
                }
            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-24T12:21:01.540

您可能解决了这个问题，但我认为这个解决方案应该有效

```
if (scrollState == OnScrollListener.SCROLL_STATE_IDLE) {
    View firstChild = lv.getChildAt(0);
    int pos = lv.getFirstVisiblePosition();

    //if first visible item is higher than the half of its height
    if (-firstChild.getTop() > firstChild.getHeight()/2) {
        pos++;
    }

    lv.setSelection(pos);
} 
```

`getTop()`对于第一个项目视图总是返回非正值，所以我不使用`Math.abs(firstChild.getTop())`，而只是`-firstChild.getTop()`. 即使这个值将 >0，那么这个条件仍然有效。

如果你想让这个更流畅，那么你可以尝试使用`lv.smoothScrollToPosition(pos)`并将上面的所有代码包含在

```
if (scrollState == OnScrollListener.SCROLL_STATE_IDLE) {
    post(new Runnable() {
        @Override
        public void run() {
            //put above code here
            //and change lv.setSelection(pos) to lv.smoothScrollToPosition(pos)
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T12:40:04.100

如果可以得到需要滚动到的行的位置，可以使用方法：

[平滑滚动到位置](http://developer.android.com/reference/android/widget/ListView.html#smoothScrollToPosition%28int%29)

所以像：

```
int pos = lv.getFirstVisiblePosition();
lv.smoothScrollToPosition(pos); 
```

**编辑**
试试这个，抱歉我没有时间测试，我出去了。

```
ImageView iv = //Code to find the image view
Rect rect = new Rect(iv.getLeft(), iv.getTop(), iv.getRight(), iv.getBottom());
lv.requestChildRectangleOnScreen(lv, rect, false); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T13:00:32.980

一旦你知道了第一个可见位置，你应该能够**在下一个**位置的视图上使用[`View.getLocationinWindow()`](http://developer.android.com/reference/android/view/View.html#getLocationInWindow%28int%5B%5D%29)or来获得**第**一个可见高度。将其与的高度进行比较，并在适当的情况下滚动到下一个位置。[`View.getLocationOnScreen()`](http://developer.android.com/reference/android/view/View.html#getLocationOnScreen%28int%5B%5D%29)****`View`****

 ****您可能需要调整它以考虑填充，具体取决于您的行的样子。

* * *

我还没有尝试过上述方法，但它似乎应该可以工作。如果没有，这是另一个可能不太可靠的想法：

[`getLastVisiblePosition()`](http://developer.android.com/reference/android/widget/AdapterView.html#getLastVisiblePosition%28%29). 如果你取 和 之间的差`last`，`first`你可以看到屏幕上有多少个位置是可见的。将其与首次填充列表时可见的位置数（滚动位置 0）进行比较。

如果相同数量的位置可见，只需滚动到第一个可见位置即可。如果还有一个可见，滚动到“first + 1”位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-04T13:23:21.350

我的解决方案：

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount)

{

    if (swipeLayout.isRefreshing()) {
        swipeLayout.setRefreshing(false);
    } else {
        int pos = firstVisibleItem;
        if (pos == 0 && lv_post_list.getAdapter().getCount()>0) {

            int topOfNext = lv_post_list.getChildAt(pos + 1).getTop();
            int heightOfFirst = lv_post_list.getChildAt(pos).getHeight();
            if (topOfNext > heightOfFirst) {
                swipeLayout.setEnabled(true);
            } else {
                swipeLayout.setEnabled(false);
            }
        }
        else
            swipeLayout.setEnabled(false);
    }
} 
```****

# c# - NHibernate：对象层次结构和性能

> ID：15338512
> 
> 赞同：0
> 
> 时间：2013-03-11T12:24:56.937
> 
> 标签：c#, nhibernate, queryover

我有一个带有 Customer 表的数据库。这些客户中的每一个都有一个*安装*表的外键，该表还有一个*地址*表的外键（为简单起见重命名表）。

在*NHibernate*中，我尝试像这样查询 Customer 表：

```
ISession session = tx.Session;
var customers = session.QueryOver<Customer>().Where(x => x.Country == country);                               
var installations = customers.JoinQueryOver(x => x.Installation, JoinType.LeftOuterJoin);
var addresses = installations.JoinQueryOver(x => x.Address, JoinType.LeftOuterJoin);

if (installationType != null)
{
    installations.Where(x => x.Type == installationType);
}

return customers.TransformUsing(new DistinctRootEntityResultTransformer()).List<Customer>(); 
```

这导致类似于（由[NHibernate Profiler](http://www.hibernatingrhinos.com/products/nhprof)捕获）的 SQL 查询：

```
SELECT *
FROM   Customer this_
       left outer join Installation installati1_
         on this_.InstallationId = installati1_.Id
       left outer join Address address2_
         on installati1_.AddressId = address2_.Id
WHERE  this_.CountryId = 4
       and installati1_.TypeId = 1 
```

*当我在Microsoft SQL Server Management Studio*中执行上述 SQL 查询时，它会在大约 5 秒内执行，但会返回 ~200.000 条记录。然而，在运行代码时检索*List*需要花费大量时间。我已经等了10分钟没有任何结果。调试日志表明，由于对象层次结构，构造和启动了许多对象。有没有办法解决这个性能问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:32:31.527

我不确定您要做什么，但是通过任何 OR 映射器加载和保存 200000 条记录是不可行的。创建 200000 个对象将花费大量内存和时间。根据您要执行的操作，将它们加载到页面中或直接在数据库上进行更新查询（sp 或命名查询）可以修复您的性能。批处理可以通过以下方式完成：

```
criteria.SetFirstResult(START).SetMaxResult(PAGESIZE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:33:19.073

NHibernate Profiler 在持续时间列 x/y 中显示两次，其中 x 是执行查询的时间，而 y 是初始化对象的时间。第一步是确定问题出在哪里。如果查询很慢，请使用 SQL Profiler（假设为 SQL Server）将实际查询发送到数据库，并在 SSMS 中检查其性能。

但是，我怀疑您的问题可能是日志记录级别。如果您将日志记录级别设置为 DEBUG，NHibernate 将生成非常详细的日志，这将显着影响性能。

即使您可以让它在 200000 条记录中表现良好，但您无法以有意义的方式向用户显示。您应该使用分页/过滤来减小结果集的大小。

# django - Backbone.js fetch 加倍的结果

> ID：15338518
> 
> 赞同：0
> 
> 时间：2013-03-11T12:25:03.733
> 
> 标签：django, backbone.js, tastypie

我正在尝试将Django 和tastepie 与backbone.js 和mustache 一起使用。我已经建立了一个例子来研究这些。使用以下代码时，我得到的用户结果加倍为：

*   -Id 用户名
*   -1 约尔
*   -2 达达
*   -1 约尔
*   -2 达达

--- 我的代码 ---

```
// I think this tastypie adjustment is not related with the problem but i want you to see the //whole code

window.TastypieModel = Backbone.Model.extend({
        base_url: function() {
          var temp_url = Backbone.Model.prototype.url.call(this);
          return (temp_url.charAt(temp_url.length - 1) == '/' ? temp_url : temp_url+'/');
        },

        url: function() {
          return this.base_url();
        }
    });

    window.TastypieCollection = Backbone.Collection.extend({
        parse: function(response) {
            this.recent_meta = response.meta || {};
            return response.objects || response;
        }
});

(function($){

// MODELS-COLLECTIOS
  //USERS
  var User = TastypieModel.extend({
      url: USERS_API
  });

  var Users = TastypieCollection.extend({
      model: User,
      url:USERS_API
  });

//VIEWS
  var UsersView = Backbone.View.extend({
    render: function(){
         // template with ICanHaz.js (ich)
        this.el = ich.userRowTpl(this.model.toJSON());
        return this;
       }
  });

//main app
  var AppView = Backbone.View.extend({
      tagName: 'tbody',
      initialize: function() {
          this.users = new Users();
          this.users.bind('all', this.render, this);
          this.users.fetch();
      },

      render: function () {

          // template with ICanHaz.js (ich)
          this.users.each(function (user) {
             $(this.el).append(new UsersView({model: user}).render().el);
          }, this);

          return this;
      }
  });

  var app = new AppView();
  $('#app').append(app.render().el);

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:35:47.663

我会说您正在触发两次渲染，因为您的视图正在侦听所有事件，请尝试绑定它只是为了重置并查看它是如何进行的：

```
initialize: function() {
  this.users = new Users();
  this.users.bind('reset', this.render, this);
  this.users.fetch();
}, 
```

# php - PHP ORM - Redbean 的安全性？

> ID：15338520
> 
> 赞同：2
> 
> 时间：2013-03-11T12:25:12.087
> 
> 标签：php, mysql, security, orm, redbean

我正在考虑使用 RedBean 作为 ORM 映射器。目前我正在使用我自己的实现，随着项目变得越来越大和越来越复杂，它的效果不是很好。

然而，有一个我无法找到的问题：
**就有人注入代码/查询/虚假数据而言，RedBean 的安全性如何？**

假设我想在后台使用 MySQL 数据库，并且通过 POST 获取传入数据。是否可以使用恶意 POST 数据执行 MySQL 注入？我是否必须自己转义传入的数据，还是 RedBean 在后台执行类似的操作？如果我使用 ORM 作为数据库抽象，我是否需要担心类似的事情？

我不打算通过直接在 Redbean 上处理 MySQL 语句来缩短 Redbean。所以这可能没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:23:39.747

我自己（在一定程度上）找到了答案：

```
There is no need to use mysql_real_escape as long as you use parameter binding.
Use the question mark slots or the named slots as shown in the examples.
Please don't use your own homebrewn escaping functions. 
```

[Source](http://redbeanphp.com/querying)
**在“Converting Records to Beans”部分下。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:12:27.933

您已经正确回答了自己，但也请注意以下帖子：[PDO MySQL：使用 PDO::ATTR_EMULATE_PREPARES 与否？](https://stackoverflow.com/questions/10113562/pdo-mysql-use-pdoattr-emulate-prepares-or-not)

# asp.net-mvc - 如何在 MVC 4 中的按钮 onclick 事件中调用方法？

> ID：15338524
> 
> 赞同：0
> 
> 时间：2013-03-11T12:25:22.837
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在开发一个 MVC 应用程序。

在编辑视图中，我想要保存/提交按钮和取消按钮。

默认情况下，MVC 给出“返回列表”链接。此链接调用 index() 方法。

现在，我想在取消按钮的 Onclick 事件上调用这个 index() 方法，该怎么做？

```
<input type="submit" value="Save" onclick="return validate();" id="btnSubmit" />  
<input type="Button" value ="Cancel" onclick="Index()"style=" font-size:"1.2em"/> 
```

我必须在上面的代码中进行哪些更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:26:50.523

您可以使用`window.location.href`重定向到指定的 url：

```
<input type="Button" value="Cancel" onclick="window.location.href='@Url.Action("index")'" style=" font-size:"1.2em"/> 
```

或者简单地使用锚而不是按钮：

```
@Html.ActionLink("Cancel", "Index") 
```

# c++ - 为什么 string::compare 返回一个 int？

> ID：15338526
> 
> 赞同：102
> 
> 时间：2013-03-11T12:25:30.800
> 
> 标签：c++

为什么[`string::compare`](http://en.cppreference.com/w/cpp/string/basic_string/compare)返回 an`int`而不是像`short`or这样的较小类型`char`？我的理解是这个方法只返回-1、0或1。

第二部分，如果我要设计一个比较两个类型对象的比较方法，`Foo`并且我只想返回 -1、0 或 1，那么使用`short`或`char`通常是一个好主意吗？

编辑：我已得到纠正，`string::compare`不返回 -1、0 或 1，它实际上返回值 >0、<0 或 0。感谢您让我保持一致。

似乎答案是粗略的，没有理由返回小于的类型，`int`因为返回值是“右值”，而那些“右值”不会从小于 int 类型（4 字节）中受益。此外，许多人指出，大多数系统的寄存器可能`int`无论如何都会变大，因为无论您给它们一个 1、2 还是 4 字节的值，这些寄存器都会被填充，因此返回 a 并没有真正的优势较小的值。

编辑 2：事实上，当使用较小的数据类型（如对齐、屏蔽等）时，看起来可能会有额外的处理开销。普遍的共识是，在处理大量数据时，存在较小的数据类型是为了节省内存，如数组的情况。

今天学到了一些东西，再次感谢大家！

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-03-11T12:30:20.990

首先，规范是它将返回一个小于、等于或大于的值`0`，不一定是`-1`或`1`。其次，返回值是右值，受积分提升的影响，因此返回更小的值是没有意义的。

在 C++ 中（就像在 C 中一样），每个表达式都是右值或左值。从历史上看，这些术语指的是左值出现在赋值的左侧，而右值只能出现在右侧。今天，非类类型的一个简单近似是左值在内存中有一个地址，而右值没有。因此，您不能获取右值的地址，并且 cv 限定符（条件“访问”）不适用。在 C++ 术语中，没有类类型的右值是纯值，而不是对象。函数的返回值是一个右值，除非它具有引用类型。（例如，适合寄存器的非类类型几乎总是在寄存器中返回，而不是在内存中。）

对于类类型，问题有点复杂，因为您*可以*在右值上调用成员函数。这意味着右值实际上必须具有`this` 指针的地址，并且可以是 cv 限定的，因为 cv 限定在重载解析中起作用。最后，C++11 引入了几个新的区别，以支持右值引用；这些也主要适用于类类型。

整数提升是指当小于 an 的整数类型`int`在表达式中用作右值时，在大多数情况下，它们将被提升为`int`。因此，即使我`short a, b;`在表达式中声明了一个变量，在加法发生之前`a + b`，两者`a`和都会`b`被提升。`int`同样，如果我写`a < 0`，则对 的值进行比较`a`，转换为`int`。在实践中，很少有这种情况会产生影响，至少在整数算术换行的 2 的补码机器上（即，今天除了极少数外来的机器之外——我认为 Unisys 大型机是唯一的例外）。尽管如此，即使在更常见的机器上：

```
short a = 1;
std::cout << sizeof( a ) << std::endl;
std::cout << sizeof( a + 0 ) << std::endl; 
```

应该给出不同的结果：第一个等效于 `sizeof( short )`，第二个`sizeof( int )`（因为积分提升）。

这两个问题在形式上是正交的；右值和左值与积分提升无关。 *除了*...积分提升仅适用于右值，并且大多数（但不是全部）使用右值的情况将导致积分提升。因此，实际上没有理由返回小于 的数值`int`。甚至有一个很好的理由不将其作为字符类型返回。重载的运算符，如`<<`，对于字符类型通常表现不同，因此您只想将字符作为字符类型返回。（您可以比较差异：

```
char f() { return 'a'; }
std::cout << f() << std::endl;      //  displays "a"
std::cout << f() + 0 << std::endl;  //  displays "97" on my machine 
```

不同的是，在第二种情况下，加法导致发生积分提升，从而导致`<<`选择不同的重载。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-03-11T12:39:02.703

故意不返回 -1、0 或 1。

它允许（注意这不适用于字符串，但它同样适用于字符串）

```
int compare(int *a, int *b)
{
   return *a - *b;
} 
```

这比：

```
int compare(int *a, int *b)
{
   if (*a == *b) return 0;
   if (*a > *b) return 1;
   return -1;
} 
```

如果您必须返回 -1、0 或 1，这就是您必须做的 [或类似的事情]。

它也适用于更复杂的类型：

```
class Date
{
    int year;
    int month;
    int day;
}

int compare(const Date &a, const Date &b)
{
   if (a.year != b.year) return a.year - b.year;
   if (a.month != b.month) return a.month - b.month;
   return a.day - b.day;
} 
```

在字符串的情况下，我们可以这样做：

```
int compare(const std::string& a, const std::string& b)
{
   int len = min(a.length(), b.length());

   for(int i = 0; i < len; i++)
   {
      if (a[i] != b[i]) return a[i] - b[i];
   }
   // We only get here if the string is equal all the way to one of them
   // ends. If the length isn't equal, "longest" wins. 
   return a.length() - b.length();
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-03-11T15:08:31.177

int*通常*（在大多数现代硬件上意味着）与系统总线和/或 cpu 寄存器大小相同的整数，即所谓的机器字。因此 int 通常比较小的类型传递得更快，因为它不需要对齐、屏蔽和其他操作。

存在较小的类型主要是为了允许优化数组和结构的 RAM 使用。在大多数情况下，它们会交换几个 CPU 周期（以对齐操作的形式）以获得更好的 RAM 使用率。

除非你需要强制你的返回值是一个百分号大小的有符号或无符号数（char、short…），否则你最好使用 int，这就是标准库这样做的原因。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-11T12:31:13.310

**这是一个C主义。**

当 C 需要`compare`-type 函数时，它们总是返回一个`int`. C++ 只是推动了这一点（不幸的是）。

然而，返回一个`int`实际上可能是最快的方法，因为它通常是正在使用的系统寄存器的大小。（故意含糊其辞。）

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-03-11T12:32:23.340

该方法实际上并不返回集合中的整数`{ -1, 0, 1 }`；它实际上可以是*任何*整数值。

为什么？我能想到的主要原因是这`int`应该是架构的“自然大小”值；对这种大小的值的操作通常至少与对较小或较大值的操作一样快（并且在许多情况下更快）。所以这是一个允许实现足够松弛以使用最快的情况的情况。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-11T12:29:37.223

> 如果我要设计一个比较 Foo 类型的两个对象的比较方法，并且我只想返回 -1、0 或 1，那么使用 short 或 char 通常是个好主意吗？

没关系。更好的方法是返回一个布尔值（如果只想比较是否相等）或枚举（更多信息）：

```
enum class MyResult
{
  EQUAL,
  LESS,
  GREATER
};

MyResult AreEqual( const Foo &foo1, const Foo & foo2 )
{
  // calculate and return result
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-11T12:33:02.840

假设有些人正在将代码从 C 更改为 C++。他们决定更换`strcmp`为`string::compare`.

既然`strcmp`退货，作为礼物退货`int`就更容易了。`string::compare``int`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-11T12:31:41.687

可能是为了让它更像`strcmp`也有这[组返回值的](http://www.cplusplus.com/reference/cstring/strcmp/)工作。如果您想移植代码，那么让替换尽可能接近可能会更直观。

此外，返回值不仅仅是`-1`, `0`or`1`而是`<0`, `0`or `>0`。

此外，正如所提到的，由于回报受[积分促销](http://msmvps.com/blogs/vandooren/archive/2007/10/05/integral-promotion-it-doesn-t-have-to-be-logical-it-s-the-law.aspx)的影响，因此将其缩小是没有意义的。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-03-11T12:39:37.367

因为一个布尔返回值只能是两个可能的值（真、假），而比较函数可以返回三个可能的值（小于、等于、大于）。

**更新**

虽然当然可以返回一个有符号的short，但如果你*真的*想实现你自己的比较函数，你可以返回一个带有两个布尔值的半字节或结构值。

# iphone - 如何通过链接在我的 ios 应用程序中播放音乐 (soundcloud)

> ID：15338531
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:25:41.713
> 
> 标签：iphone, ios, objective-c, soundcloud

以下是我上传歌曲文件“ [https://soundcloud.com/smkumar84/summa](https://soundcloud.com/smkumar84/summa) ”的链接。从这里我需要在我的 iphone 应用程序中播放音乐。

我怎样才能在我的 iphone 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:39:22.813

从 soundcloud 查看 ios的[api。](https://developers.soundcloud.com/docs/api/ios-quickstart)和[Apple 关于 HTTP 流的指南](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html)。

soundcloud API 支持

1.  获取声音列表
2.  播放声音
3.  上传声音

Apple 关于 HTTP 实时流的示例可用于通过 HTTP 流式传输音频和视频。这也适用于没有太多设置的普通服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:39:13.000

您可以使用 AVPlayer/AVAudioPlayer 播放歌曲。检查 AVAudioPlayer API。

[https://developer.apple.com/documentation/avfoundation/avaudioplayer](https://developer.apple.com/documentation/avfoundation/avaudioplayer)

# model - 如何在 XNA 中绘制数百万个没有空闲模型实例的立方体？

> ID：15338533
> 
> 赞同：0
> 
> 时间：2013-03-11T12:25:45.090
> 
> 标签：model, xna, buffer, draw

我为一个游戏“我的世界”风格的项目工作。

我开始使用“模型实例化”来生成大量拥有相同模型的立方体。到现在为止还挺好。我的问题是，如果我增加矩阵的大小以从 [500-1-500 ]（ **250,000 立方米）的 [300-1-300]（** **90,000 立方米**）中提取，我的程序会大大减慢。它从 60fps 到 20...

 **我真的不明白为什么。但是我正确地使用了“硬件实例化”技术。我还在论坛上注意到，这种技术可以让 XNA 绘制多达 700 万立方！！你知道我的问题出在哪里吗？

十分感谢

**这是我绘制实例化模型的函数：**

```
// Draw the 3D map (world) of game 
public void drawWorld(GameTime gameTime)
{
    / * Draw all the structures that make up the world with the instancing system * /
    Array.Resize(ref instanceTransforms, smallListInstance.Count);

    for (int i = 0; i < ListInstance.Count; i++)
    {
        instanceTransforms[i] = ListInstance[i].Transform;
    }

    DrawModelHardwareInstancing(myModel, myTexture2D,instancedModelBones,instanceTransforms, arcadia.camera.View, arcadia.camera.Projection);

}
// ### end function drawWorld 
```

**这是我的函数 [DrawModelHardwareInstancing]** ，它使用 microsoft 示例中使用的方法**[Hardware Instancing]**绘制模型。

```
// Function that will draw all the models instantiated in the list
void DrawModelHardwareInstancing(Model model,Texture2D texture, Matrix[] modelBones,
                                 Matrix[] instances, Matrix view, Matrix projection)
{
    Game.GraphicsDevice.SamplerStates[0] = SamplerState.LinearWrap;
    if (instances.Length == 0)
        return;

    // If we have more instances than room in our vertex buffer, grow it to the neccessary size.
    if ((instanceVertexBuffer == null) ||
        (instances.Length > instanceVertexBuffer.VertexCount))
    {
        if (instanceVertexBuffer != null)
            instanceVertexBuffer.Dispose();

        instanceVertexBuffer = new DynamicVertexBuffer(Game.GraphicsDevice, instanceVertexDeclaration,
                                                       instances.Length, BufferUsage.WriteOnly);
    }

    // Transfer the latest instance transform matrices into the instanceVertexBuffer.
    instanceVertexBuffer.SetData(instances, 0, instances.Length, SetDataOptions.Discard);

    foreach (ModelMesh mesh in model.Meshes)
    {
        foreach (ModelMeshPart meshPart in mesh.MeshParts)
        {
            // Tell the GPU to read from both the model vertex buffer plus our instanceVertexBuffer.
            Game.GraphicsDevice.SetVertexBuffers(
                new VertexBufferBinding(meshPart.VertexBuffer, meshPart.VertexOffset, 0),
                new VertexBufferBinding(instanceVertexBuffer, 0, 1)
            );

            Game.GraphicsDevice.Indices = meshPart.IndexBuffer;

            // Set up the instance rendering effect.
            Effect effect = meshPart.Effect;
            //effect.CurrentTechnique = effect.Techniques["HardwareInstancing"];
            effect.Parameters["World"].SetValue(modelBones[mesh.ParentBone.Index]);
            effect.Parameters["View"].SetValue(view);
            effect.Parameters["Projection"].SetValue(projection);
            effect.Parameters["Texture"].SetValue(texture);

            // Draw all the instance copies in a single call.
            foreach (EffectPass pass in effect.CurrentTechnique.Passes)
            {
                pass.Apply();

                Game.GraphicsDevice.DrawInstancedPrimitives(PrimitiveType.TriangleList, 0, 0,
                                                       meshPart.NumVertices, meshPart.StartIndex,
                                                       meshPart.PrimitiveCount, instances.Length);
            }
        }

    }
}
// ### end function DrawModelHardwareInstancing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:23:55.440

非常感谢你！感谢您的建议，我终于解决了我的问题；-)！

我只画在我的视野“相机”前面的模型。仅在需要“编辑”、“新位置等..”时更新模型

我的最后一步是仅绘制 6 个立方体面中的 3 个以提高性能。

代码示例仅绘制前面的模型

公共 BoundingFrustum Frustum { 得到；私人套装；}

```
//Initialize 
Matrix viewProjection = View * Projection; 
Frustum = new BoundingFrustum(viewProjection); 

//Update 
Matrix viewProjection = View * Projection; 
Frustum.Matrix = viewProjection; 

//Check instance and make the instanceTransformation for draw 
foreach (var object in ListInstance.Where(m => Frustum.Contains(m.BoundingBox) != ContaintmentType.Disjoint) 
{
    instanceTransforms[index].Add(smallListInstance[i].Transform); 

} 
// And now draw ... 
```**

# c# - Visual Studio 2010 (win 7 x64) Selenium 单元测试保持挂起

> ID：15338535
> 
> 赞同：5
> 
> 时间：2013-03-11T12:25:53.793
> 
> 标签：c#, visual-studio-2010, unit-testing, selenium, nuget

我正在尝试几个小时为自定义网站使用 Selenium 驱动程序进行单元测试。问题是，我的第一个测试用例始终处于未决状态。其他的我没写。我尝试了几个不同的教程，但没有一个有效。我做了什么：

*   通过 NuGet 控制台安装 Selenium WebDriver（有参考）；
*   通过 NuGet 安装 Selenium WebDriver.Support（有参考）；
*   我什至关闭了防火墙；

最后，我正在关注此页面[dotnet-developer.de](http://www.dotnet-developer.de/2012/11/vbnet/tips-and-tricks-for-selenium-webtests/)上的教程！该教程也不起作用。它在 vb.net 中给出，但我已将其用 C# 翻译如下：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;

namespace FastMenuSeleniumTests
{
    /// <summary>
    /// Summary description for UnitTest1
    /// </summary>
    [TestClass]
    public class UnitTest1
    {

        public IWebDriver driver;
        const string BaseURL = "http://www.bing.com";

        public UnitTest1()
        {
            // do nothing
        }

        private TestContext testContextInstance;

        /// <summary>
        ///Gets or sets the test context which provides
        ///information about and functionality for the current test run.
        ///</summary>
        public TestContext TestContext
        {
            get
            {
                return testContextInstance;
            }
            set
            {
                testContextInstance = value;
            }
        }

        #region Additional test attributes
        //
        // You can use the following additional attributes as you write your tests:
        //
        // Use ClassInitialize to run code before running the first test in the class
        // [ClassInitialize()]
        // public static void MyClassInitialize(TestContext testContext) { }
        //
        // Use ClassCleanup to run code after all tests in a class have run
        // [ClassCleanup()]
        // public static void MyClassCleanup() { }
        //
        // Use TestInitialize to run code before running each test 
        [TestInitialize()]
        public void TestInitialization() 
        {
            driver = new FirefoxDriver();
            //System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en");
            //System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en");
        }
        //
        // Use TestCleanup to run code after each test has run
        [TestCleanup()]
        public void TestCleanup() 
        {
            driver.Quit();
        }
        //
        #endregion

        [TestMethod]
        public void TestMethod1()
        {
            IWebElement SearchBox = default(IWebElement);
            IWebElement FirstResult = default(IWebElement);

            //Go to Bing Homepage
            driver.Navigate().GoToUrl(BaseURL);

            //Get Handle for Searchbox
            SearchBox = GetWebElement(driver, By.Id("sb_form_q"), 10);

            //Enter Search Text
            SearchBox.SendKeys("dotnet-developer.de");

            //Different ways to start the search
            //Method 1: Press ENTER
            SearchBox.SendKeys(Keys.Enter);

            //Method 2: Grab Search-Button and click it
            //Dim SearchButton As IWebElement
            //SearchButton = GetWebElement(driver, By.Id("sb_form_go"), 10)
            //SearchButton.Click()

            //Now get the first result returned by Bing search
            FirstResult = GetWebElement(driver, By.XPath("//ul[@class='sb_results']/li/div/div/div/h3/a"), 10);

            //Method 1: Compare the subject
            string ExpectedText = "dotnet-developer.de | Tips for vb.net,…";
            Assert.AreEqual(ExpectedText, FirstResult.Text, "Subject is not correct");

            //Method 2: Compare the link
            string ExpectedURL = "http://www.dotnet-developer.de/";
            Assert.AreEqual(ExpectedURL, FirstResult.GetAttribute("href"), "URL is not correct!");
        }

        /// <summary>
        /// Retrieve Web Element using default driver and default timeout
        /// </summary>
        /// <param name="definition">Definition of the WebElement to grab</param>
        /// <returns></returns>
        /// <remarks></remarks>
        private IWebElement GetWebElement(OpenQA.Selenium.By definition)
        {
            const int DefaultTimeout = 10;
            return GetWebElement(definition, DefaultTimeout);
        }

        /// <summary>
        /// Retrieve Web Element using default driver
        /// </summary>
        /// <param name="definition">Definition of the WebElement to grab</param>
        /// <param name="timeoutSeconds">Seconds to wait until a timeout is thrown</param>
        /// <returns></returns>
        /// <remarks></remarks>
        private IWebElement GetWebElement(OpenQA.Selenium.By definition, int timeoutSeconds)
        {
            return GetWebElement(driver, definition, timeoutSeconds);
        }

        /// <summary>
        /// Waits until the given element is enabled and visible
        /// </summary>
        /// <param name="webDriver"></param>
        /// <param name="definition"></param>
        /// <param name="seconds"></param>
        /// <returns></returns>
        /// <remarks>Needs to wait for .displayed because for e.g. in a collapsed Treeview all nodes are available but not visible 
        /// if the parent node is collapsed and therefore the following error would appear:
        /// OpenQA.Selenium.ElementNotVisibleException: Element is not currently visible and so may not be interacted with
        /// </remarks>
        private IWebElement GetWebElement(IWebDriver webDriver, OpenQA.Selenium.By definition, int seconds)
        {
            WebDriverWait wait = new WebDriverWait(webDriver, TimeSpan.FromSeconds(seconds));

            wait.Until(d => { return d.FindElement(definition).Enabled & d.FindElement(definition).Displayed; });

            return webDriver.FindElement(definition);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:28:45.953

我自己已经确定了这个问题。首先，我必须更具体地了解我机器上的软件。我已经在我的 PC 上安装了 Visual Studio 2010 和 Visual Studio 2012。我试图在 Visual Studio 2010 中进行测试，但它们正在等待中。当我在 VS 2012 中打开测试时，一切运行良好，没有问题。似乎 VS 都搞砸了一些东西（我不知道），我需要使用更高版本。

# ios - 在创建应用程序以与 livecode 和 mergeext Dropbox 外部一起使用时选择哪种 Dropbox 应用程序类型

> ID：15338536
> 
> 赞同：1
> 
> 时间：2013-03-11T12:25:57.120
> 
> 标签：ios, external, dropbox, livecode

在创建与 Livecode 和 mergExt 套件外部的保管箱一起使用的应用程序时，我必须选择什么应用程序类型？API 还是选择器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:26:49.170

是的 API。选择器是一个 javascript API，用于将“从 Dropbox 中选择”按钮添加到您的网站。

# c# - 附加字段 MVC

> ID：15338537
> 
> 赞同：0
> 
> 时间：2013-03-11T12:25:57.330
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我有 table `UserProfile`，其中有一些额外的字段，如 email、typeAccount、isActivated 等。
当我得到 时`Membership.GetUser().(..)`，我没有这些字段。
如何解决？以及如何更改此字段的值？

```
[Table("UserProfile")]
public class UserProfile
{

    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
    public int typeAccount { get; set; }
    public bool activated { get; set; }
    public string activationcode { get; set; }
    public bool del { get; set; }
} 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:33:04.103

会员提供者不处理个人资料。如果要检索当前经过身份验证的用户的 UserProfile 记录，只需使用上下文：

```
[Authorize]
public ActionResult SomeAction()
{
    using (UsersContext db = new UsersContext())
    {
        UserProfile user = db
            .UserProfiles
            .FirstOrDefault(u => u.UserName == User.Identity.Name);

        // do something with the profile
    }

    ...
} 
```

# c# - RemotingMultiClientsHelp c# 代码

> ID：15338542
> 
> 赞同：0
> 
> 时间：2013-03-11T12:26:12.310
> 
> 标签：c#, multithreading, remoting

我正在制作一个远程桌面应用程序。当我连接一个客户端时，我可以轻松进行远程处理，但我无法连接更多客户端。

我的代码：服务器

```
void start()
{
    try
    {

        URI = "Tcp://"+textBox1.Text+":6600/MyCaptureScreenServer";
        chan = new TcpChannel();
        ChannelServices.RegisterChannel(chan);
        obj = (ScreenCapture)Activator.GetObject(typeof(ScreenCapture), URI);

        connected = true;
        timer1.Enabled = true;
        textBox1.ReadOnly = true;

        this.FormBorderStyle = FormBorderStyle.None;// Full Size Mode
        this.WindowState = FormWindowState.Maximized;
        textBox1.Visible = false;
        menuItem5.Enabled = true;
    }
    catch (Exception) {
        stop();
    }
} 
```

客户：

```
TcpChannel chan = new TcpChannel(6600);
ChannelServices.RegisterChannel(chan);
RemotingConfiguration.RegisterWellKnownServiceType(Type.GetType("ScreenCapture, ScreenCapture"), "MyCaptureScreenServer",WellKnownObjectMode.Singleton); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:23:53.820

我假设第二个客户抱怨端口 6600 已被使用？

一个特定的端口号只能注册一次，这通常由一个服务器组件完成。这还将注册远程处理的类型。然后多个客户端可以连接到服务器。

# visual-studio - 程序“[6096] lencod.exe”已退出，代码为 300 (0x12c)

> ID：15338543
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:26:20.830
> 
> 标签：visual-studio

程序“[6096] lencod.exe”已退出，代码为 300 (0x12c)。这是什么意思？有错误吗？我有一个名为 mbBits->mb_total 的变量。箭头是某种语法还是只是变量名的一部分。我正在调试我下载的代码，但是当我将变量放在监视窗口中时，它会显示“未定义的变量 'mbBits' 或类似的东西。

我还使用此代码生成了一个文本文件

```
void next_macroblock(Macroblock *currMB)
{

FILE * pFile;
pFile = fopen ("myfile.txt","a");
fprintf (pFile, " \t %d \t | \n",mbBits->mb_total);
fclose (pFile);

} 
```

但它说文件身份不明，它还告诉我以 Unicode 格式保存代码。我已经尝试过这样做，但出现了更多错误。嘻嘻嘻

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T20:16:39.007

您至少需要包含`<stdio.h>`以获取对 FILE 的引用以进行编译。

该`main()`函数也可能具有非 void 返回值。返回的值是您的消息中显示的值。在每个可能的路径中包含 a`return(0);`以确保该值在`0`程序中设置为（按照惯例，表示没有错误）。

# java - A实现B Java时ArrayList转换为ArrayList

> ID：15338548
> 
> 赞同：7
> 
> 时间：2013-03-11T12:26:41.800
> 
> 标签：java, interface, arraylist

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T12:28:28.433

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:29:02.673

请用：

```
public static void printList(ListableList<? extends Listable> list, String seperator){ 
```

这意味着 list 是一个只读集合，其中包含 Listable 的子类。

`ListableList<Rule>`与分配不兼容，`ListableList<Listable>`因为您可以将非规则对象添加到`ListableList<Listable>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:30:53.453

方法声明应该像`printList(ListableList<? extends Listable> list, String seperator)`. 使其通用。

# java - 处理具有相同参数类型的方法，避免因错误顺序传递参数而导致的问题

> ID：15338550
> 
> 赞同：0
> 
> 时间：2013-03-11T12:26:46.370
> 
> 标签：java, oop, design-patterns, methods, arguments

当我们有一个接受相同类型参数的方法时，我们可能会遇到以错误顺序传递参数的问题，即交换

示例`int someMethod(int a, int b)`
调用者`someMethod(b,a)`改为调用方法。我认为有一种设计模式可以避免这个问题。对吗？
它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:33:46.113

听起来您指的是Java不支持的命名参数。最好的选择是使用一个对象来包装参数。

```
int someMethod(SomeBean bean);

...

SomeBean bean = new SomeBean();
bean.setA(1);
bean.setB(2);
someMethod(bean); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:54:08.720

You can use `enum` if there is a clear specification of acceptable values for the method arguments.

```
enum ValuesA {
    ONE(1), TWO(2), THREE(3), FOUR(4);
    private int val;
    ValuesA(int val) {this.val = val;}
    int val() {return val;}
}

enum ValuesB {
    TWO(2), THREE(3), FOUR(4), FIVE(5), SIX(6);
    private int val;
    ValuesB(int val) {this.val = val;}
    int val() {return val;}
} 
```

With this your `someMethod` needs to be modified as well:

```
int someMethod(ValuesA a, ValuesB b) 
```

Which will be invoked like this:

```
someMethod(ValuesA.ONE, ValuesB.FOUR) 
```

And inside the method you will have to get the `int` values with `val()`: `a.val()`, `b.val()`..

Of course this applies only when you already know the sets of allowed values for `a` and `b` and the sets aren't too big.

Another limitation is the inability to use variables during method invocations.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:48:56.587

如果您有一个参数列表，其中参数是相关的，并且此关系指示可以一起传递的有效值集，那么您最好创建一个理解这些有效性规则的类，并传递它而不是参数列表。

例如，如果您的方法签名是

```
int someMethod(int low, int high) 
```

并且您想禁止呼叫，例如

```
int z = someMethod(10, 6); 
```

由于值的顺序错误，您可能需要创建一个`Range`类，大致如下：

```
public class Range {

    private int low;
    private int high;

    public Range(int low, int high) {
        super();
        if (high < low)
            throw new IllegalArgumentException("Invalid range");
        this.low = low;
        this.high = high;
    }

    public int getLow() {
        return low;
    }

    public int getHigh() {
        return high;
    }
} 
```

并将您的方法的签名更改为

```
int someMethod(Range range) 
```

这样您只能将其传递给已构建且有效的范围。

如果关系是别的东西，当然你会创建一个不同的类来捕获不同的规则。

# css - CSS3菜单如何更改背景颜色

> ID：15338551
> 
> 赞同：0
> 
> 时间：2013-03-11T12:26:48.747
> 
> 标签：css

我想在 Mouser Over 上为 CSS3 菜单添加背景颜色，我在 stackoverflow 上找到了一些东西，但它对我不起作用....我想我必须在 .menu a{ } 中更改一些东西，但我没有不知道什么....有人可以帮助我吗？

谢谢

```
 #menu, #menu ul {
    margin: 0;
    padding: 0;
    list-style: none;
}

body{margin: 0 auto;}
    .menu100percent {
background: #cce2ff; /* Old browsers */
background: -moz-linear-gradient(top,  #cce2ff 1%, #75bdd1 26%, #002a6d 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#cce2ff), color-stop(26%,#75bdd1), color-stop(100%,#002a6d)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #cce2ff 1%,#75bdd1 26%,#002a6d 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #cce2ff 1%,#75bdd1 26%,#002a6d 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #cce2ff 1%,#75bdd1 26%,#002a6d 100%); /* IE10+ */
background: linear-gradient(to bottom,  #cce2ff 1%,#75bdd1 26%,#002a6d 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cce2ff', endColorstr='#002a6d',GradientType=0 ); /* IE6-9 */

    color: white;
    font-size: 16px;
    height: 30px;
    width:100%;
}
 .menu{width:1000px; margin: 0 auto; }
 .menu a{color:#fff; font-size:12px; line-height:370px; font-family:Arial; text-decoration:none; text-align: left;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:29:36.730

使用`:hover`选择器：

```
.menu:hover a {
    background-color: gold;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T10:09:12.400

使用css代码：

```
.menu a : hover {
    background-color: gold;
} 
```

小提琴：http: [//jsfiddle.net/snP3Z/3/](http://jsfiddle.net/snP3Z/3/)

# android - 水平滚动视图中未显示自定义视图 不工作

> ID：15338558
> 
> 赞同：5
> 
> 时间：2013-03-11T12:27:16.640
> 
> 标签：android, android-custom-view, horizontalscrollview

当我尝试将自定义视图添加到水平滚动视图时，它没有显示。但相同的自定义视图显示在其他布局中，如相对和线性布局。

```
 layout=new LinearLayout(this);
        layout.setBackgroundColor(Color.YELLOW);
        layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.MATCH_PARENT));
        layout.setOrientation(LinearLayout.HORIZONTAL);

        l = new PredicateLayout(this);
//       l.sendtext(info);
         for(int j=0;j<info.length;j++)
         {

            LinearLayout aa=new LinearLayout(this);
            aa.setOrientation(LinearLayout.VERTICAL);
            t = new TextView(this);
                t.setText(info[j]);
                t.setBackgroundColor(Color.GREEN);
                t.setTextSize(i);
                t.setWidth(screenwidth/2);
                aa.addView(t);
                l.addView(aa, new PredicateLayout.LayoutParams(0, 0));

         }

         layout.addView(l);
        scroll.addView(layout); 
```

我的 XML 看起来像这样

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/scroll"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:orientation="horizontal" 
    >

</HorizontalScrollView> 
```

也试过这样

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/scroll"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:orientation="horizontal" 
    >

    <com.test.app.PredicateLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:id="@+id/predicate_layout"
        >

    </com.omnion.bible.PredicateLayout> 
</HorizontalScrollView> 
```

代码看起来像

```
test=(PredicateLayout)findViewById(R.id.predicate_layout);

 for(int j=0;j<info.length;j++)
         {

            LinearLayout aa=new LinearLayout(this);
            aa.setOrientation(LinearLayout.VERTICAL);
            t = new TextView(this);
                t.setText(info[j]);
                t.setBackgroundColor(Color.GREEN);
                t.setTextSize(i);
                t.setWidth(screenwidth/2);
                aa.addView(t);
                test.addView(aa, new PredicateLayout.LayoutParams(0, 0));

         } 
```

谁能帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T06:40:37.660

像这样放置您的自定义布局

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/scroll"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:orientation="horizontal" 
    >
<LinearLayout
        android:layout_height="fill_parent"
        android:layout_width="fill_parent">
    <com.test.app.PredicateLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:id="@+id/predicate_layout"
        >

    </com.omnion.bible.PredicateLayout> 
</LinearLayout>
</HorizontalScrollView> 
```

# css - MVC3 条件行样式以及 CSS 老虎条纹

> ID：15338561
> 
> 赞同：0
> 
> 时间：2013-03-11T12:27:33.293
> 
> 标签：css, asp.net-mvc-3

我想根据被绑定项目的属性在具有特定 css 样式的表中设置一些行。使用 CSS 我应用了老虎条纹，我想应用的这种新的 css 样式应该是现有条纹*的补充。*

```
@foreach (var item in Model) {
<tr @if(item.IsComplete { class="complete"})> 
```

虎纹是通过以下方式实现的：

```
table tr:nth-child(2n+0) {
    background-color: #90b2d3;
    color: white;
} 
```

因此，每隔一行应该是带有白色文本的浅蓝色，但是该项目`IsComplete`应该添加“完整”css 样式的任何行。

```
.complete {
  font-style: italic;
  color: #ccc;
} 
```

这只是为了让它看起来是灰色的和“完整的”。

但是，就我目前的代码而言，我得到了一个`parser error`

> 解析器错误消息：遇到没有匹配开始标记的结束标记“tr”。您的开始/结束标签是否正确平衡？

我不明白，`<tr>`它存在于我的第一个代码块中，并且`@ IsComplete`剃刀语法*应该*只是有条件地包含一个 css 类。

我知道这种方法确实意味着，如果老虎条纹要为一行着色，**并且**`IsComplete`属性要添加一个 css 类，那么只有其中一个会被使用 - 我希望在弄清楚有什么问题后处理这个问题这里的语法。虽然如果有一种方法可以同时应用这两个类（如果需要的话），那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:46:00.040

试试这样：

```
<tr@(Html.Raw(item.IsComplete ? " class=\"complete\"" : ""))> 
```

或编写自定义 HTML 帮助程序来避免标签汤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:28:51.813

按照达林的建议，我实施了一个`Custom HTML helper`，我正在分享它，因为它回答了主要问题，尽管它取代了老虎条纹 - 所以还有更多的工作要做，所以原始的老虎条纹得到尊重，这增加了现有的类

```
public static MvcHtmlString ConditionalCss(this HtmlHelper htmlHelper, 
                                           bool isCompleted, string CssClass)
    {
        var Css = String.Empty;
        if (isCompleted)
            Css = string.Format("class=\"{0}\"", CssClass);

        return MvcHtmlString.Create(Css);
    } 
```

现在里面的调用`foreach`被简化为

```
@foreach (var item in Model) {
<tr @Html.ConditionalCss(item.IsComplete, "complete")> 
```

这给了我一点灵活性；我可以提供任何 css 类和条件，在这种情况下应该添加 css

# python - Pyplot set_xscale('log') 隐藏刻度

> ID：15338565
> 
> 赞同：0
> 
> 时间：2013-03-11T12:27:42.647
> 
> 标签：python, matplotlib, axes

我有一个带有轴的情节，我打电话给：

```
axes.set_xscale('log') 
```

之后，当我使用`axes.set_xticks(my_ticks)`. 没有`log`我可以看到刻度标签。

如何在对数刻度上显示我的刻度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:30:06.537

`axes.set_xticks(my_ticks)`设置刻度的位置，它通常会自动更新刻度标签，但似乎没有。您可以使用[set_xticklabels()](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_xticklabels)自己设置它们。您可以使用[tick_params()](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.tick_params)来更改刻度本身的属性（如长度、颜色等）。

# c# - 引用程序集中的 FileLoadException

> ID：15338566
> 
> 赞同：0
> 
> 时间：2013-03-11T12:27:57.777
> 
> 标签：c#, .net, wpf

我有一个 WPF .NET 4.0 C# 项目，它使用来自 Ricciolo (Ricciolo.Controls.TreeListView.dll) 的 TreeListView 我已经引用了我的“Release”文件夹中的这个 dll。此文件的版本为 1.0.4643。**31163**

如果我开始使用 Visual Studio 进行调试（启用了调试外部代码的选项），我会收到 FileLoadException 和版本 1.0.4643 的消息。**31162**是必需的，但未找到。

该应用程序在 Win 7 下启动良好，但**在 Win XP 下崩溃。**

我做过的事情：

*   查看文件是否有其他版本：否
*   文件是否在 GAC 中注册：否
*   使用 ILDASM 更改程序集的版本：相同的错误
*   删除引用并再次引用文件：同样的错误

有没有可能忽略这个小小的版本差异？或者是否有其他解决方案可以在 Windows XP 下运行它？

谢谢你的帮助。

最大限度

![调用堆栈](../Images/59db30611243e9e0bc4e7ba8af4aa423.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:44:20.033

[您可以使用Assembly Binding Redirection](http://msdn.microsoft.com/en-us/library/2fc472t2%28v=vs.80%29.aspx)忽略版本差异。一个例子是[here](http://msdn.microsoft.com/en-us/library/twy1dw1e%28v=vs.80%29.aspx)。

# security - REST 服务中的客户端 API 安全性

> ID：15338570
> 
> 赞同：1
> 
> 时间：2013-03-11T12:28:12.187
> 
> 标签：security, rest, jersey, client-side, basic-authentication

首先，让我说我是一个关于 REST 服务和客户端 API 的菜鸟......

我正在 NetBeans 中使用 Jersey 和 Glassfish 3.1.2 开发一些 REST Web 服务。这些 REST 服务已经存在，它们都是从 MySQL 数据库自动生成的。

我的下一步是安全！我已经在我的 REST 服务上实现了**基本身份验证**，并且一切正常（当我进入 REST 服务主页时，Web 中会出现一个带有登录名/密码的窗口）。登录名和密码在我的数据库中。

**现在我想在客户端 API**尝试使用 REST 服务时实现安全性。什么是最简单和最好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:31:48.627

如果可以公开访问，则 REST 服务的入口点必须是实施安全性的地方。您不能依赖用户*应该*通过登录屏幕才能访问服务的事实。

这意味着服务的入口点需要执行足够的验证才能知道请求是合法的。这可以通过将客户端的凭据直接发送到服务来完成，*而不管*请求如何。

例如，在我见过的一些 REST 服务中，它可能看起来像这样：

```
@POST
@Consumes("application/xml")
@Produces("application/xml")
public String theService(@FormParam("someData") String someData, @FormParam("clientProfile") String clientProfile) {
    //parse XML into ClientProfile
    //attempt to authenticate ClientProfile
    //if authentication is unsuccessful, return error message
    //else, perform service's function
} 
```

当然，不要直接采用此模型并通过网络以纯文本 XML 格式发送用户名和密码之类的内容。如果你想这样做，你至少需要加密数据。无论如何，该示例的目的是表明服务首先受到攻击的地方就是您需要*确保*您应该继续处理的地方。

经验法则：如果您可以使用 URL 访问它，则它需要安全功能。

# c# - 提取标签之间的文本c#

> ID：15338573
> 
> 赞同：0
> 
> 时间：2013-03-11T12:28:21.287
> 
> 标签：c#, regex, string, tags

我必须创建一个函数来读取格式的所有标签之间的所有子字符串：`<tag>sometext</tag>`。'tag' 可以是任何字母数字字符，用户可以输入任意数量的不同标签，但没有嵌套标签。我必须使用正则表达式...我做了一些在第一个标签之间打印第一个子字符串的东西，但我不知道如何自动化函数从用户输入字符串的开始到结束工作......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:52:55.290

您可以使用反向引用：

```
<([^>]+)>([^<]*)</(\1)> 
```

`(\1)`表示它必须是第一组中包含的文本。

我把`[^<]*`作为内容，但如果你可能有子元素，你应该使用`.*`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T12:33:33.170

试试这个

```
<[a-zA-Z0-9^>]>*(.*)</[[a-zA-Z0-9^>]*> 
```

# java - 对字符串进行操作以删除前缀

> ID：15338576
> 
> 赞同：2
> 
> 时间：2013-03-11T12:28:32.287
> 
> 标签：java, android, string, substring

```
final Intent mainIntent=new Intent(Intent.ACTION_MAIN,null);
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER) ;
final PackageManager pm = getApplicationContext().getPackageManager();
ArrayList<ResolveInfo> listP= (ArrayList<ResolveInfo>) pm.queryIntentActivities( mainIntent, 0);

//Drawable iconApp = resolveInfo.activityInfo.loadIcon(getPackageManager());

ApplicationAdapter adapter = new ApplicationAdapter(this, listP);

adapter.addListener(this);
ListView list = (ListView)findViewById(R.id.list);

list.setAdapter(adapter); 
```

此代码显示所有可用的应用程序，但我想处理结果。在你拥有的每一行上`com.android.*`，这是我想剪掉的那部分。

问题是当我尝试使用`substring(10)`例如它并没有改变结果时。

我尝试了这种方式，并且使用 Log 我成功了子字符串，但是当我在屏幕上显示它时，它只是向我显示了另一个带有他所有按钮的布局只是一块黑板，而我用日志得到了正确的结果，我看不出原因

```
public void onCreatebis() {

        setContentView(R.layout.main);
        final Intent mainIntent=new Intent(Intent.ACTION_MAIN,null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER) ;
        final PackageManager pm = getApplicationContext().getPackageManager();
        ArrayList<ResolveInfo> listP= (ArrayList<ResolveInfo>) pm.queryIntentActivities( mainIntent, 0);
        final int trimLength = "com.android.".length();
        ArrayList<String> maliste = new ArrayList();
        int size=listP.size();
        size=maliste.size();
       //String []maliste=new String[listP.size()];
        // Loop over each item.
        for (ResolveInfo info : listP) {
            // Get the (full, qualified) package name.
            String packag = info.activityInfo.applicationInfo.packageName;

            // Now, trim it with substring and the trim length.
            String trimmed = packag.substring(trimLength);
            for(int i=0;i<maliste.size();i++){
                maliste.set(i, trimmed);
            }
            Log.v("trimmed", trimmed);

            // [ do whatever you want with the trimmed name ]
        }

        ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, maliste);

        ListView list = (ListView)findViewById(R.id.list);

        list.setAdapter(adapter2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:16:09.360

你有正确的想法来使用`substring`. 以下是我将如何去做：

```
// Get the length of text to trim.
final int trimLength = "com.android.".length();

// Loop over each item.
for (ResolveInfo info : listP) {
    // Get the (full, qualified) package name.
    String package = info.activityName.packageName;

    // Now, trim it with substring and the trim length.
    String trimmed = package.substring(trimLength);

    // [ do whatever you want with the trimmed name ]
} 
```

的值`trimLength`计算为 12，所以我不确定你是如何得到 10 的，但这应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:04:52.070

谢谢你 WChargin 在你的帮助下我做到了，有一些小的差异，但我不知道它们的深度差异，代码运行良好

```
public void onCreatebis() {

        setContentView(R.layout.main);
        final Intent mainIntent=new Intent(Intent.ACTION_MAIN,null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER) ;
        final PackageManager pm = getApplicationContext().getPackageManager();
        ArrayList<ResolveInfo> listP= (ArrayList<ResolveInfo>) pm.queryIntentActivities( mainIntent, 0);
        final int trimLength = "com.android.".length();
        ArrayList<String> maliste = new ArrayList<String>();

       //String []maliste=new String[listP.size()];
        // Loop over each item.
        for (ResolveInfo info : listP) {
            // Get the (full, qualified) package name.
            String packag = info.activityInfo.applicationInfo.packageName;

            // Now, trim it with substring and the trim length.
            String trimmed = packag.substring(trimLength);
            maliste.add(trimmed);

        }

        ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, maliste);

        ListView list = (ListView)findViewById(R.id.list);

        list.setAdapter(adapter2);

    } 
```

该解决方案的问题是我最后有一个字符串，当然我可以设法创建一个包含所有字符串的数组并将其提供给适配器，但是我无法再进行其他操作，因为它正在使用ResolveInfo 的数组列表而不是字符串 [的数组列表将您自己的侦听器添加到列表](https://stackoverflow.com/questions/15381211/add-your-own-listener-to-a-list) [https://stackoverflow.com/questions/15383453/dealing-with-adapter-listview-and-listener](https://stackoverflow.com/questions/15383453/dealing-with-adapter-listview-and-listener)

# php - 在 50 英里范围内查找给定 IP 地址的准确位置

> ID：15338578
> 
> 赞同：1
> 
> 时间：2013-03-11T12:28:42.123
> 
> 标签：php, map, ip-address, zipcode

在我的页面中，我使用了查找给定 IP 地址的地理位置的功能。这将返回带有邮政编码的特定位置的结果。

但是这个邮政编码并不准确。我从编码中得到的邮政编码与实际位置的差异大约有 200 多英里。我使用了 ip2location 网站上的以下代码。

```
require_once('ip2location.class.php');

$ip = new ip2location;
$ip->open('./databases/IP-COUNTRY-REGION-CITY-LATITUDE-LONGITUDE-ZIPCODE-TIMEZONE-ISP-DOMAIN-NETSPEED-AREACODE-WEATHER-MOBILE-SAMPLE.BIN');

$record = $ip->getAll('50.178.183.243');

echo '<b>IP Address:</b> ' . $record->ipAddress . '<br>';
echo '<b>IP Number:</b> ' . $record->ipNumber . '<br>';
echo '<b>Country Short:</b> ' . $record->countryShort . '<br>';
echo '<b>Country Long:</b> ' . $record->countryLong . '<br>';
echo '<b>Region:</b> ' . $record->region . '<br>';
echo '<b>City:</b> ' . $record->city . '<br>';
echo '<b>ISP/Organisation:</b> ' . $record->isp . '<br>';
echo '<b>Latitude:</b> ' . $record->latitude . '<br>';
echo '<b>Longitude:</b> ' . $record->longitude . '<br>';
echo '<b>Domain:</b> ' . $record->domain . '<br>';
echo '<b>ZIP Code:</b> ' . $record->zipCode . '<br>';
echo '<b>Time Zone:</b> ' . $record->timeZone . '<br>';
echo '<b>Net Speed:</b> ' . $record->netSpeed . '<br>';
echo '<b>IDD Code:</b> ' . $record->iddCode . '<br>';
echo '<b>Area Code:</b> ' . $record->areaCode . '<br>';
echo '<b>Weather Station Code:</b> ' . $record->weatherStationCode . '<br>';
echo '<b>Weather Station Name:</b> ' . $record->areaCode . '<br>';
echo '<b>MCC:</b> ' . $record->mcc . '<br>';
echo '<b>MNC:</b> ' . $record->mnc . '<br>';
echo '<b>Mobile Brand:</b> ' . $record->mobileBrand . '<br>';
?> 
```

我在很多网站上尝试过编码，例如

*   [http://whatismyipaddress.com/ip-lookup](http://whatismyipaddress.com/ip-lookup)
*   [http://www.ipinfodb.com](http://www.ipinfodb.com)
*   [http://www.fraudlabs.com](http://www.fraudlabs.com)
*   [http://www.ip2location.com/](http://www.ip2location.com/)

但是我没有得到实际的结果。在上述网站中未找到给定 IP 地址的准确邮政编码。任何人都可以帮助我解决这个问题。感谢您阅读并提前解决此问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:34:36.620

This is hazy by design, and it's nothing you can easily fix. IP-based geolocation services can only use the position information they guess from the various points from their server to the target IP. (You can see those points when you do a `traceroute <targetip>` on your console). How exact IP geolocation is depends on your user's ISP's architecture, and results can be *way* off in some areas, but pretty exact in others (especially cities).

If you seriously need exact geolocation, use [client-side HTML 5 geolocation](http://html5demos.com/geo). This requires the user's consent, though, and can be imprecise as well if the client device doesn't have a GPS.

# sas - 在SAS中单独解析标题行

> ID：15338581
> 
> 赞同：3
> 
> 时间：2013-03-11T12:28:46.170
> 
> 标签：sas, sas-macro

我有输入文件，其中第一行有标题信息。（制表符分隔的数据值）。在这些值中，有一个整数值指定应如何解析文件的其余部分。如果该值小于阈值，则应以一种方式解析文件，否则如果该值大于阈值，则应以不同方式解析数据。

```
%let isNew = Undefined;

data header;
infile "&infile" OBS=1;
INPUT Agency $ Status $ Num $ fdate sdate;
if fdate < 20130428 then
 %let isNew = false;
else
 %let isNew = true;
run;

data factors;
infile "&infile" missover FIRSTOBS=2 LRECL=1000;
if isNew = false then
 input
   @1   poolno                  $6.
   @7   factor                  9.8 @;
else
 input
   @3   poolno                  $6.
   @9   factor                  9.8 @;

(some more input parsing code) 
```

在上面的代码中，我定义了一个变量 isNew 并根据条件检查将该变量设置为真/假。在后续的数据块中，我使用这个变量的值来决定文件的解析方式。

示例输入文件是（要检查的值以粗体显示）：

FHLMC 更新 #1 **20130130** 20130306

138788024201321000

140379000000000000

我是 SAS 新手。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:47:31.883

您正在混淆数据步骤变量和宏变量。您不能有条件地执行这样的 %LET 语句（而且您不想这样做）。CALL SYMPUT 是您创建宏变量的方式，如果您愿意的话；但在这种情况下，您不需要，因为您可以在一个数据步骤中执行所有这些操作：

```
data want;
informat fdate sdate YYMMDD8.;
retain Agency Status Num fdate sdate;
if _n_ = 1 then do;
  input Agency $ Status $ Num $ fdate sdate;
end;
else do;
    if fdate < '28APR2013'd then input
       @1   poolno                  $6.
       @7   factor                  9.8;
    else
     input
       @3   poolno                  $6.
       @9   factor                  9.8;

    output;
end;
datalines;
MyAgency MyStatus MyNum 20130401 20130501
MyPool123456783123
MyPoo2435678904123
;;;;
run; 
```

现在，要注意的一件事 - 您通常不会将小数添加到信息中（即@9 因子 9.8），除非您有一个没有小数的数字并且您想要添加它。IE，在我创建的数据中，我没有小数点（123456783），它会加一个（1.23456783）。但是，如果小数点已经在数据中，即 1.23456783 在您的数据文件中，那么您只需将其输入为 9。让 SAS 为您放置小数点。此外，如果您对此进行测试，请确保将数据线移动到第一列（将它们缩进 4 会导致此操作失败）。

此外，您需要学习如何使用 SAS 日期 - 看看我是如何稍微改变它的。

# mysql - MySQL - 无法添加外键

> ID：15338582
> 
> 赞同：5
> 
> 时间：2013-03-11T12:28:46.117
> 
> 标签：mysql, key, add

我在 MySQL InnoDB 中有一个这样创建的表：

```
CREATE TABLE `users` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `type` enum('MANUAL','FACEBOOK') NOT NULL DEFAULT 'MANUAL',
  `role` enum('COOK','HOST','ALL') NOT NULL DEFAULT 'ALL',
  `about_me` varchar(1000) DEFAULT NULL,
  `food_preferences` varchar(1000) DEFAULT NULL,
  `cooking_experience` varchar(1000) DEFAULT NULL,
  `with_friend` bit(1) DEFAULT b'0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 
```

接下来我尝试使用这样的语句添加一个表（在创建表时没有添加外键，因为有问题）：

```
CREATE TABLE `messages` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `from` bigint(20) NOT NULL,
  `to` bigint(20) NOT NULL,
  `content` varchar(10000) NOT NULL,
  `timestamp_sent` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `timestamp_read` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

创建表后，我需要最后添加外键`'from'`和`'to'`引用`'users'.'id'`字段的字段：

```
ALTER TABLE `messages` 
  ADD CONSTRAINT `messages_users_fk`
  FOREIGN KEY (`from` , `to` )
  REFERENCES `users` (`id` , `id` )
  ON DELETE SET NULL
  ON UPDATE CASCADE
, ADD INDEX `messages_users_fk_idx` (`from` ASC, `to` ASC) 
```

我得到的错误是：

> 错误：错误 1822：无法添加外键约束。引用表 'users' 中的约束 'messages_users_fk' 缺少索引。

但是“用户”表有一个`PRIMARY`索引`'id'`...

还尝试采取更小的步骤并仅为`'from'`字段添加外键：

```
ALTER TABLE `messages` 
  ADD CONSTRAINT `messages_users_fk`
  FOREIGN KEY (`from` )
  REFERENCES `users` (`id` )
  ON DELETE SET NULL
  ON UPDATE CASCADE
, ADD INDEX `messages_users_fk_idx` (`from` ASC) ; 
```

错误略有不同：

> 错误：错误 1825：无法在表“消息”上添加外键约束。FOREIGN KEY 约束“cook4food/messages_users_fk”中的选项不正确。

`bigint(20) NOT NULL`字段的类型与其他 StackOverflow 线程中建议的问题原因相同 ( )。我的表没有分区（MySQL 手册指出这是在 InnoDB 中具有外键约束的限制）。该`'messages'`表当前不存储任何行，因此存储的数据不会成为任何问题。我被卡住了，请帮忙。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T12:34:13.067

如果您具有适当的权限，则可以发出以下查询：

```
SHOW ENGINE innodb STATUS 
```

...这将告诉您（以及其他一些信息）错误的确切细节：

```
------------------------
LATEST FOREIGN KEY ERROR
------------------------
130311 13:30:06 Error in foreign key constraint of table test/#sql-71c_6:

  FOREIGN KEY (`from` , `to` )
  REFERENCES `users` (`id` , `id` )
  ON DELETE SET NULL
  ON UPDATE CASCADE
, ADD INDEX `messages_users_fk_idx` (`from` ASC, `to` ASC):
You have defined a SET NULL condition though some of the
columns are defined as NOT NULL. 
```

在删除父记录时，您不能将子记录设为 NULL，因为这些列是`NOT NULL`：

```
 `from` bigint(20) NOT NULL,
  `to` bigint(20) NOT NULL, 
```

**编辑：**此外，我看不到单个复合键的用途。我认为您需要两个单键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:55:25.533

正如我们所看到的，

`from`当子列不为空时，您不能在子记录中定义 SET NULL `to`。

因此，如果您尝试使用以下 2 条语句创建外键，则`messages`表中应该有外键。

1>

```
ALTER TABLE `messages`  ADD CONSTRAINT `messages_users_from_fk`   FOREIGN KEY (`from` )   REFERENCES `users` (`id` )  ON DELETE CASCADE ON UPDATE CASCADE, ADD INDEX `messages_users_fk_idx` (`from` ASC) ; 
```

和

2>

```
ALTER TABLE `messages`  ADD CONSTRAINT `messages_users_to_fk`   FOREIGN KEY (`to` )   REFERENCES `users` (`id` )  ON DELETE CASCADE ON UPDATE CASCADE, ADD INDEX `messages_users_fk_to_idx` (`to` ASC) ; 
```

希望这些陈述对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:33:47.483

`REFERENCES`用户`(`id `,`id`)`

您正在尝试创建无效的外键 (id, id)。复合索引中涉及的列（一个涉及多于一列）不能是同一列，重复。至少我从未见过。

创建两个单独的外键，一个用于 FROM，另一个用于 TO，每个都指向用户。

# mysql - MySQL：计算中值

> ID：15338584
> 
> 赞同：2
> 
> 时间：2013-03-11T12:28:48.323
> 
> 标签：mysql, median

我正在尝试计算价格的中位数。我在这里找到了如何做的答案-[使用 MySQL 计算中位数的简单方法](https://stackoverflow.com/questions/1291152/simple-way-to-calculate-median-with-mysql)，但它对我不起作用，我得到空结果。任何人都可以帮忙吗？

```
SELECT x.price from mediana as x, mediana y
GROUP BY x.price
HAVING SUM(SIGN(1-SIGN(y.price-x.price))) = (COUNT(*)+1)/2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:18:24.870

AFAIU 你的问题。

[@velcrow 的这个答案](https://stackoverflow.com/a/7263925/451518)成功计算了中值。不幸的是，当有偶数行而不是计算 2 个中间行的平均值时，查询只会返回第二个值。我对查询进行了一些修改以满足您的需求：

```
--average value for middle rows
SELECT avg(t1.price) as median_val FROM (
SELECT @rownum:=@rownum+1 as `row_number`, d.price
  FROM mediana d,  (SELECT @rownum:=0) r
  WHERE 1
  -- put some where clause here
  ORDER BY d.price
) as t1, 
(
  SELECT count(*) as total_rows
  FROM mediana d
  WHERE 1
  -- put same where clause here
) as t2
WHERE 1
--this condition should return one record for odd number of rows and 2 middle records for even.
AND t1.row_number>=total_rows/2 and t1.row_number<=total_rows/2+1; 
```

[在 sqlfiddle 上测试样本数据](http://sqlfiddle.com/#!2/b3fe7e/22)

# asp.net - Value = 'p.Value' 引发了“System.NullReferenceException”类型的异常

> ID：15338592
> 
> 赞同：2
> 
> 时间：2013-03-11T12:29:32.673
> 
> 标签：asp.net, umbraco

在我的 umbraco 网站上，我得到了这样的代码

```
 var  p = currentNode.GetProperty("ucc") as Property;
 if (p != null && !string.IsNullOrEmpty(p.Value.Trim()))
 mailCC = p.Value; 
```

但它总是会抛出这样的错误

```
Value = 'p.Value' threw an exception of type 'System.NullReferenceException' 
```

注意：我确定 P.Value 是注释 Null ![在此处输入图像描述](../Images/e6204cdc49cf6d90c29cd02d0e805b61.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:02:23.643

当它为空时调用该`Trim()`方法会引发错误。`p.Value`在您的代码中，这是在`string.IsNullOrEmpty`执行检查之前发生的。

将您的表达式修改为以下内容应该可以修复它。

**代码：**

```
var p = currentNode.GetProperty("ucc") as Property;
if (p != null && !string.IsNullOrWhiteSpace(p.Value))
    mailCC = p.Value 
```

**参考：**

> [String.IsNullOrWhiteSpace](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)：指示指定字符串是 null、空还是仅包含空白字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:22:39.237

向 Goran Mottram +1 指出原因并给出正确的建议。在进行任何方法调用之前，您应该始终检查 null。

# iframe - 跨域 iFrame 会导致不同浏览器中的安全错误吗？

> ID：15338593
> 
> 赞同：1
> 
> 时间：2013-03-11T12:29:35.543
> 
> 标签：iframe, cross-domain, cross-domain-policy

我们需要在我们自己的网站（即 www.OurCompany.com）中的 iFrame 中托管另一个工具。该工具位于不同的 URL（即 www.TheToolSite.com）上。

我们不需要与 iframe 的内容进行交互。但是我们确实需要能够调整 iframe 的大小以适应内容。

在这种情况下浏览器会给出安全警告或错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T14:49:47.937

我问这个问题已经有几个月了，所以我可以从经验中回答：浏览器不会抱怨跨域 iframe。

但是，跨域 iframe 调整大小很困难（尽管并非不可能）。

# ide - 如何在 PHPStorm 中删除项目（从工作区）？

> ID：15338595
> 
> 赞同：95
> 
> 时间：2013-03-11T12:29:36.293
> 
> 标签：ide, phpstorm, projects-and-solutions

如何在 PHPStorm 中删除（而不是简单地关闭）项目？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-08-06T20:36:11.387

**PHPSTORM 2018.3 版本的两种方法**

A. 从​​硬件和 Phpstorm IDE 中永久删除或删除

```
 Please visit the folder 'PhpstormProjects' and delete the project file manually. If you do so, you will see the folder disappear from Phpstorm explore window. This might be weird, but true. 
```

B. 从Phpstorm 2018.3的最近项目面板中删除（删除后的文件夹将隐藏，创建同名项目将恢复从最近项目面板中删除的内容。）

```
 1\. Click  File > Close project 

    2\. From Recent projects, select project, press the fn(on normal keyboard -       key between right Alt and Ctrl, not windows key)+Delete 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-03-19T09:41:28.423

`Backspace`为我做了诀窍（Windows 7 + PHPStorm 7.1.3）。您可能也想尝试`Fn`+ `Backspace`。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-08-21T03:20:21.553

我知道这篇文章有点老了，但是对于 MAC OS X phpStorm 6*，在欢迎来到 JetBrains PhpStorm 页面上（在最近的项目下使用向上/向下箭头键选择要删除的项目，按住 fn+删除。

干杯

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-03-10T04:51:44.707

请按照以下简单步骤操作：

1.  只需使用文件菜单关闭项目。
2.  使用向上/向下箭头键从左侧面板的最近项目中选择项目名称。
3.  现在只需按键盘上的 Del 键。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-03-13T16:23:25.593

1.  单击文件 > 关闭项目
2.  从最近的项目中，选择项目，按键盘上的 Fn + Delete

如果要完全删除项目，请在 Finder 下删除项目中的“.idea”文件夹。默认情况下，此文件夹是隐藏的（即，这是因为它以点 "." 开头）。您需要在 Finder 中启用“查看隐藏文件/文件夹”

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-08-07T16:13:35.083

对于 2017/2018/2019/2020 版本，请访问：

**文件->打开最近->管理项目...**

并单击**X**（将鼠标悬停在选项上时出现）将其从项目列表中删除。这只是删除了引用；它不会从磁盘中删除文件。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-04-11T09:09:29.877

我在同一个窗口中打开了多个项目。通过右键单击删除一个项目 - >“从项目视图中删除”

它只从列表中删除，而不是从硬盘驱动器中删除。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-03-13T14:03:16.247

2019 年。 PhpStorm v2018.3.5 - 附加后无法分离项目。[如文档](https://www.jetbrains.com/help/phpstorm/opening-multiple-projects.html)所述，文件菜单中没有“关闭项目”，上下文菜单中也没有“从项目视图中删除” 。似乎是一个错误。

只是无法摆脱我附加的那个额外项目。只有一件事有帮助：删除`.idea`子目录。

**重要说明：**当您无法从项目视图中删除它时，它是关于项目**附加的。**

### 更新/解决：

以下是如何从当前项目视图中删除意外附加的项目：

1.  `.idea/modules.xml`

您可以编辑该文件（删除新/添加的条目，很容易找到）或删除整个文件（不用担心，它将在重新启动时重新创建）。

2.  它也可以被添加到`.idea/vcs.xml`（不要删除它，只需在其中找到相应的`<mapping ...>`条目并删除，它在下面`VscDirectoryMappings`）

3.  它也可以列在`.idea/<projectname>.iml`文件中（在 中找到`module > component > orderEntry`，见`module-name`属性），也可以从那里删除。

4.  重新启动 PhpStorm。

您将再次看到没有附加的项目。

我没有找到任何 UI 选项来执行此操作（Mac OS Catalina、PhpStorm 2020.1，与以前/旧版本相同）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-03-01T10:06:14.427

1.  在项目视图中选择项目
2.  编辑 -> 从视图中删除项目

或者点击删除。

（默认键盘映射设置）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-02-20T16:53:08.820

显然jetbrains不能决定一种方式？

对我来说，在 Windows 7 上突出显示项目，然后 windowkey + del 成功了

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-01-13T20:06:01.603

在 Windows 上的 phpStorm 7 中，选择 project/delete 会删除文件 erc，但不会将其从“最近的项目”列表中删除。我发现突出显示它，然后按 Backspace 是从列表中删除它的组合键！也许它在 v7 中发生了变化。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-02-23T14:51:37.143

在我的 PhpStorm 7.1 (OSx) 中，菜单中有一个“清除列表”链接，位于“文件”>“打开最近的”下，可以清除整个列表。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-05-11T20:32:59.413

实际上，您无法通过在最近项目列表中按“删除”或“退格”（或单击右上角的“x”）来删除项目。这些操作只会将项目从最近的项目列表中删除。

您可以通过查看 WebStorm 在您的用户名下创建的目录中的项目文件夹来检查这一点。

顺便说一句，我在 Win 7 x64 上运行了 WebStorm v.10，其他用户在此处列出的所有步骤都不允许我实际删除项目。我发现的唯一方法是手动。

这至少适用于 Windows 7：

导航到 Windows 用户名下的“WebstormProjects”目录，然后删除项目目录。这将在您下次启动 WebStorm 时将其从最近的项目列表中删除。

# java - 超时一个非常长的套接字查询

> ID：15338598
> 
> 赞同：0
> 
> 时间：2013-03-11T12:29:37.697
> 
> 标签：java, sockets

我正在使用 java 套接字连接到我们的一个网络节点执行命令获取一些数据并显示在 html 网格中。问题是当节点不可用或由于网络问题而导致查询不会超时时应用程序性能严重下降。我尝试过 socket.sotimeout() 但它似乎不起作用。下面是供参考的代码。

```
public void initializeConnection(String host, int port)
            throws IOException
{
    try
    {
        if(debug)
            System.out.println((new StringBuilder()).append("connecting to host ").append(host).append(" port: ").append(port).toString());
        socket = new Socket(host, port);

        socket.setSoTimeout(6000);
        socket.setTcpNoDelay(true);

        in = new BufferedInputStream(socket.getInputStream());
        out = new BufferedOutputStream(socket.getOutputStream());
    }
    catch(IOException e)
    {
        System.out.println("Connection could not be established");
        closeConnection();
        throw e;
    }
    if(debug)
        System.out.println("Connected!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:38:29.133

尝试使用这个

```
Socket socket = new Socket();
socket.connect(new InetSocketAddress(ipAddress, port), timeout); 
```

文档显示： `SocketTimeoutException`- 如果超时在连接之前到期

# ruby - 当我将阿拉伯数字发送到我的 ruby 机架服务器时出现不兼容的字符编码错误

> ID：15338602
> 
> 赞同：0
> 
> 时间：2013-03-11T12:29:53.100
> 
> 标签：ruby, rack, thin

我有一个简单的基于机架的 ruby​​ 服务器，我使用 Thin 运行它，它看起来像：

```
#encoding: utf-8

class Auth

  def initialize(app)
    @app = app
  end

  def call(env)
    @request = Rack::Request.new(env).params
    command = @request['command']

    begin
      command.tr!('٠١٢٣٤٥٦٧٨٩','0123456789')  
    rescue Exception => e
      $LOG.error e.to_s    
    end
  end
end 
```

如您所见，它应该将数字从阿拉伯语翻译成英语，无论如何，当我发送参数**命令“١”**时，我收到了这个错误：

```
incompatible character encodings: ASCII-8BIT and UTF-8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:42:07.057

```
command("١".force_encoding('UTF-8')) 
```

有关 Ruby 1.9/2.0 中编码的更多详细信息，另请参阅：http: [//yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/](http://yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/)

# jquery - 在 jQuery 弹出窗口或 MVC 4 的警报中显示错误消息

> ID：15338605
> 
> 赞同：6
> 
> 时间：2013-03-11T12:30:05.243
> 
> 标签：jquery, validation, asp.net-mvc-4, jquery-ui-dialog, alert

我正在使用 DataAnnotation 进行验证，我想在弹出窗口（对话框/警报）中显示错误消息（数据注释），而不是在视图中显示它......我已经使用这个链接实现了代码......

项目模板是移动的让我知道我是否遗漏了什么？？ [http://forums.asp.net/t/1738076.aspx/1](http://forums.asp.net/t/1738076.aspx/1)

Javascript：-

```
$('#Test').bind('invalid-form.validate', function (form, validator) {
    alert('InsideTest');   
     var $list = $('#errorlist ul:first')
     if ($list.length && validator.errorList.length) {
            $list.empty();
            $.each(validator.errorList, function () {
                $("<li />").html(this.message).appendTo(list);
            });
            $list.dialog({
                title: 'Please correct following errors:',
            });
 }
});
Forgot to add html... 
```

关于.cshtml：-

```
@model WRDSMobile.Models.Test

<div id="errorlist" style="display:none"><ul></ul></div>    
@using (Html.BeginForm(null, null, FormMethod.Post, new { name = "Test", id = "Test" }))
{
     @Html.ValidationSummary(true)
     <fieldset>

        <legend>Test</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Age)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Age)
            @Html.ValidationMessageFor(model => model.Age)
        </div>  
            <input type="submit" value="Create" />
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T14:08:21.280

**添加以下 CSS/JS 作为参考 jquery-ui.css、jquery-1.8.2.min.js、jquery-ui-1.8.24.min.js、jquery.validate.min.js、jquery.validate.unobtrusive。 min.js**

```
$(document).ready(function () {
        $('#Test').bind('invalid-form.validate', function (form, validator) {
            var $list = $('<ul />')
            if (validator.errorList.length) {
                $.each(validator.errorList, function (i, entity) {
                    $("<li />").html(entity.message).appendTo($list);
                });
                msgbox('Please correct following errors:', $('<div />').append($list));
                return false;
            }
        });
    });

    function msgbox(_title, _messageHtml) {
        $('<div></div>').appendTo('body')
                    .html(_messageHtml)
                    .dialog({
                        modal: true, title: _title, zIndex: 10000, autoOpen: true,
                        width: 'auto', resizable: false,
                        buttons: {
                            Ok: function () {
                                // $(obj).removeAttr('onclick');                                
                                // $(obj).parents('.Parent').remove();

                                $(this).dialog("close");
                            }
                        },
                        close: function (event, ui) {
                            $(this).remove();
                        }
                    });
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:18:22.390

我不确定我是否理解您的问题，但您可以将 ajax 发布到您的控制器并返回部分视图。然后将部分视图加载到您的 html 元素中，然后在对话框中将其弹出。

```
 [HttpPost]
    public ActionResult validate(string firstName,string lastName){

        //logic here for validation
         return PartialView();
    }

$.ajax({
            type: "POST",
            data: {firstName: nameVal, lastName: lastNameVal },
            url: "/myController/validate",
            dataType: "html",
            success: function (data) {
                if (data) {
                    var dialog = $('<div></div>');
                    dialog.html(data);
                    dialog.dialog({
                        resizable: false,
                        modal: true,
                        overflow: false,
                        maxWidth: 1200,
                        maxHeight: 600,
                        width: 1200,
                        height: 600,
                        border: 0,
                        buttons: {
                            "Cancel": function () { //cancel
                                $(this).dialog("close");
                            }
                        }

                    });
                }
                else {
                    alert("error");

                }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T10:03:19.770

公共静态无效方法（此 ModelStateDictionary 模型状态）

```
 {
        StringBuilder errors = new StringBuilder();
        try
        {
            foreach (ModelState model_State in modelState.Values)
                foreach (ModelError error in model_State.Errors)
                    errors.AppendLine(error.ErrorMessage.ToString());
            if (errors.Length > 1)
                throw new Exception();
        }
        catch (Exception ex)
        {
            throw new // your validation helper
        } 
```

}

在 ajax 成功中捕获这个错误打开带有此错误错误消息的 jquery 对话框注意：使用 mvc 错误处理程序它将发送带有 ajax 成功 = false 的错误消息

# javascript - 动态加载打字稿类（打字稿的反射）

> ID：15338610
> 
> 赞同：48
> 
> 时间：2013-03-11T12:30:20.813
> 
> 标签：javascript, typescript

我希望能够实例化一个打字稿类，在其中我在运行时获取类和构造函数的详细信息。我想编写的函数将接受类名和构造函数参数。

```
export function createInstance(moduleName : string, className : string, instanceParameters : string[]) {
    //return new [moduleName].[className]([instancePameters]); (THIS IS THE BIT I DON'T KNOW HOW TO DO)
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-11T13:09:07.097

你可以试试：

```
var newInstance = Object.create(window[className].prototype);
newInstance.constructor.apply(newInstance, instanceparameters);
return newInstance; 
```

**编辑**此版本正在使用 TypeScript 操场，例如：

```
class Greeter {
    greeting: string;
    constructor(message: string) {
        this.greeting = message;
    }
    greet() {
        return "Hello, " + this.greeting;
    }
}

//instance creation here
var greeter = Object.create(window["Greeter"].prototype);
greeter.constructor.apply(greeter, new Array("World"));

var button = document.createElement('button');
button.innerText = "Say Hello";
button.onclick = function() {
    alert(greeter.greet());
}

document.body.appendChild(button); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-11T14:38:22.960

当您使用 TypeScript 时，我假设您希望输入加载的对象。所以这里是示例类（和一个接口，因为您选择加载许多实现之一，例如）。

```
interface IExample {
    test() : string;
}

class Example {
    constructor (private a: string, private b: string) {

    }

    test() {
        return this.a + ' ' + this.b;
    }
} 
```

所以你会使用某种加载器来给你一个实现：

```
class InstanceLoader {
    constructor(private context: Object) {

    }

    getInstance(name: string, ...args: any[]) {
        var instance = Object.create(this.context[name].prototype);
        instance.constructor.apply(instance, args);
        return instance;
    }
} 
```

然后像这样加载它：

```
var loader = new InstanceLoader(window);

var example = <IExample> loader.getInstance('Example', 'A', 'B');
alert(example.test()); 
```

目前，我们有一个演员表：`<IExample>`- 但是当添加泛型时，我们可以取消它并使用泛型代替。它看起来像这样（记住它还不是语言的一部分！）

```
class InstanceLoader<T> {
    constructor(private context: Object) {

    }

    getInstance(name: string, ...args: any[]) : T {
        var instance = Object.create(this.context[name].prototype);
        instance.constructor.apply(instance, args);
        return <T> instance;
    }
}

var loader = new InstanceLoader<IExample>(window);

var example = loader.getInstance('Example', 'A', 'B'); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-06-30T15:36:39.033

## 更新

为了让它在最新的 TypeScript 中工作，你现在需要将命名空间转换为`any`. 否则你会得到一个`Error TS7017 Build:Element implicitly has an 'any' type because type '{}' has no index signature.`

*如果*你有一个特定的命名空间/模块，对于你想要创建的所有类，你可以简单地这样做：

```
var newClass: any = new (<any>MyNamespace)[classNameString](parametersIfAny); 
```

## 更新：没有命名空间使用`new (<any>window)[classname]()`

在 TypeScript 中，如果您在命名空间之外声明一个类，它会为“类函数”生成一个 var。这意味着它是针对当前范围存储的（很可能`window`除非您在另一个范围内运行它，例如 nodejs）。这意味着你可以这样做`new (<any>window)[classNameString]`：

**这是一个工作示例（所有代码，没有命名空间）：**

```
class TestClass
{
    public DoIt()
    {
        alert("Hello");
    }
}

var test = new (<any>window)["TestClass"]();
test.DoIt(); 
```

**要了解它的工作原理，生成的 JS 代码如下所示：**

```
var TestClass = (function () {
    function TestClass() {
    }
    TestClass.prototype.DoIt = function () {
        alert("Hello");
    };
    return TestClass;
}());
var test = new window["TestClass"]();
test.DoIt(); 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-03-04T03:50:15.580

这适用于带有 ES6 模块的 TypeScript 1.8：

```
import * as handlers from './handler';

function createInstance(className: string, ...args: any[]) {
  return new (<any>handlers)[className](...args);
} 
```

类在`handler`模块中导出。它们可以从其他模块重新导出。

```
export myClass {};
export classA from './a';
export classB from './b'; 
```

至于在参数中传递模块名称，我无法使其工作，因为 ES6 模块无法动态加载。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-01-28T14:59:22.220

另一种方法是动态调用文件并`new`

```
// -->Import: it dynamically
const plug = await import(absPath);
const constructorName = Object.keys(plug)[0];

// -->Set: it
const plugin = new plug[constructorName]('new', 'data', 'to', 'pass'); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-09-21T08:32:22.693

[从 typescript 0.9.1 开始](http://typescript.codeplex.com/discussions/403602#PostDetailsCell_1076199)，您可以执行类似以下[操场](http://www.typescriptlang.org/Playground/#src=class%20Handler%20%7B%0A%09msgs%3astring%5B%5D;%09%0A%09constructor%28msgs%3astring%5B%5D%29%20%7B%0A%09%09this.msgs%20=%20msgs;%0A%09%7D%0A%09greet%28%29%20%7B%0A%09%09this.msgs.forEach%28x=%3Ealert%28x%29%29;%0A%09%7D%0A%7D%0A%0Afunction%20createHandler%28handler%3a%20typeof%20Handler,%20params%3a%20string%5B%5D%29%20%7B%0A%20%20%20%20var%20obj%20=%20new%20handler%28params%29;%0A%20%20%20%20return%20obj;%0A%7D%0A%0Avar%20h%20=%20createHandler%28Handler,%20%5B%27hi%27,%20%27bye%27%5D%29;%0Ah.greet%28%29;)的操作：

```
class Handler {
    msgs:string[];  
    constructor(msgs:string[]) {
        this.msgs = msgs;
    }
    greet() {
        this.msgs.forEach(x=>alert(x));
    }
}

function createHandler(handler: typeof Handler, params: string[]) {
    var obj = new handler(params);
    return obj;
}

var h = createHandler(Handler, ['hi', 'bye']);
h.greet(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-22T17:33:24.677

我找到了另一种方式，因为在我的情况下，我无法访问 window.

**要创建的示例类：**

```
class MyService {

  private someText: string;

  constructor(someText: string) {
    this.someText = someText;
  }

  public writeSomeText() {
    console.log(this.someText);
  }
} 
```

**工厂类：**

```
interface Service<T> {
  new (param: string): T;
}

export class ServiceFactory<T> {

  public createService(ctor: Service<T>, param: string) {
    return new ctor(param);
  }

} 
```

**然后使用工厂创建实例：**

```
const factory: ServiceFactory<MyService> = new ServiceFactory<MyService>();
const service: MyService = factory.createService(MyService, 'Hello World');
service.writeSomeText(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-25T19:47:32.187

```
function fromCamelCase(str: string) {
  return str
    // insert a '-' between lower & upper
    .replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();
}

async getViewModelFromName(name: string) {
    //
    // removes the 'ViewModel' part ('MyModelNameViewModel' = 'MyModelName').
    let index = name.indexOf('ViewModel');
    let shortName = index > 0 ? name.substring(0, index) : name;

    // gets the '-' separator representation of the camel cased model name ('MyModelName' = 'my-model-name').
    let modelFilename = fromCamelCase(shortName) + '.view-model';

    var ns = await import('./../view-models/' + modelFilename);

    return new ns[name]();
  } 
```

或者

```
declare var require: any; // if using typescript.

getInstanceByName(name: string) {
    let instance;

    var f = function (r) {
      r.keys().some(key => {
        let o = r(key);
        return Object.keys(o).some(prop => {
          if (prop === name) {
            instance = new o[prop];
            return true;
          }
        })
      });
    }
    f(require.context('./../view-models/', false, /\.view-model.ts$/));

    return instance;
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-04-10T17:36:45.910

在某些特殊情况下，使用 是合理的`eval`：

```
namespace org {
  export namespace peval {
    export class MyClass {
      constructor() {

      }

      getText(): string {
        return 'any text';
      }
    }
  }
}

const instance = eval('new org.peval.MyClass();');

console.log(instance.getText()); 
```

注意：如果不是必需的，则不应使用`eval`，因为它将以调用者的权限执行字符串中包含的代码。请参阅：[eval() - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#never_use_eval!)

在安全的情况下，当您知道代码字符串的来源和作用时（尤其是当您知道它不是来自用户输入时），您可以使用它。在上面描述的案例中，我们使用我们对 TypeScript 类名及其包的了解来创建一个新实例。

# xslt - xslt 转换日期时间格式

> ID：15338612
> 
> 赞同：0
> 
> 时间：2013-03-11T12:30:21.830
> 
> 标签：xslt

我是 xslt 的新手。我一直在努力使用 dateTime 格式。我需要从 12/2/2011 2:57:18 AM 转换为 12022011T02:57:18

你怎么能做到这一点？我真的很感激你的帮助。一个很好的例子，拜托！谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:22:01.840

这将做到：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

  <xsl:template match="/">
    <xsl:call-template name="FormatDateTime">
      <xsl:with-param name="dateTime" select="'12/2/2011 2:57:18 AM'" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="FormatDateTime">
    <xsl:param name="dateTime" />

    <xsl:call-template name="FormatDate">
      <xsl:with-param name="date" select="substring-before($dateTime, ' ')" />
    </xsl:call-template>
    <xsl:text>T</xsl:text>
    <xsl:call-template name="FormatTime">
      <xsl:with-param name="time" select="substring-after($dateTime, ' ')" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="FormatTime">
    <xsl:param name="time" />
    <xsl:variable name="timeOnly" select="substring-before($time, ' ')" />
    <xsl:variable name="amPm" select="substring-after($time, ' ')" />
    <xsl:variable name="hour" select="substring-before($time, ':')" />
    <xsl:variable name="hourAdjusted" select="$hour mod 12 + 12 * ($amPm = 'PM')" />
    <xsl:variable name="afterHour" select="substring-after($timeOnly, ':')" />
    <xsl:variable name="minutes" select="substring-before($afterHour, ':')" />
    <xsl:variable name="seconds" select="substring-after($afterHour, ':')" />

    <xsl:value-of select="concat(format-number($hourAdjusted, '00'), ':', 
                                 format-number($minutes, '00'), ':',
                                 format-number($seconds, '00'))"/>
  </xsl:template>

  <xsl:template name="FormatDate">
    <xsl:param name="date" />
    <xsl:variable name="month" select="substring-before($date, '/')" />
    <xsl:variable name="afterMonth" select="substring-after($date, '/')" />
    <xsl:variable name="day" select="substring-before($afterMonth, '/')" />
    <xsl:variable name="year" select="substring-after($afterMonth, '/')" />

    <xsl:value-of select="concat(format-number($month, '00'),
                                 format-number($day, '00'),
                                 $year)"/>
  </xsl:template>
</xsl:stylesheet> 
```

这个 XSLT 里面有一个示例值，所以当它运行时，它会产生：

```
12022011T02:57:18 
```

但是你确定你希望结果格式是 MMddyyyy，而不是 yyyy-MM-dd？如果你真的想要后者，你可以改变这部分：

```
 <xsl:value-of select="concat(format-number($month, '00'),
                                 format-number($day, '00'),
                                 $year)"/> 
```

对此：

```
 <xsl:value-of select="concat($year, '-',
                                 format-number($month, '00'), '-'
                                 format-number($day, '00'))"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:34:04.147

xml 示例

```
<?xml version="1.0" encoding="utf-8"?>
<root>
   <mydate atribdate="12/05/2010 22:10:10">01/10/2012 12:33:00</mydate>
   <mydate atribdate="">12/12/2012 12:33:00</mydate>    
</root> 
```

xsl 示例 xslt 1.0

```
 <?xml version="1.0"?>
  <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
     <xsl:template match = "/">
        <xsl:apply-templates select="root/mydate" />                       
     </xsl:template>
     <xsl:template match="mydate">        
             date element---><xsl:value-of select="translate(translate(.,'/',''),' ','T')"/>         
     date attirbute---><xsl:value-of select="translate(translate(@atribdate,'/',''),' ','T')"/> 
     </xsl:template>
  </xsl:stylesheet> 
```

输出xml

```
<?xml version="1.0" encoding="UTF-8"?>        
    date element---&gt;01102012T12:33:00         
    date attirbute---&gt;12052010T22:10:10        
    date element---&gt;12122012T12:33:00         
date attirbute---&gt; 
```

# c# - 如何用逐字字面量写这个

> ID：15338614
> 
> 赞同：0
> 
> 时间：2013-03-11T12:30:25.553
> 
> 标签：c#, string, verbatim-string

我有一个带空格的音频文件名

```
String filename = @"c:\users\me\desktop\this is audio.mp3"; 
```

说我想通过 cmd 使用外部进程打开这个文件，打开它我需要这样的路径：（`c:\users\me\desktop\"this is audio.mp3"`带引号）

任何想法如何将其转换为有效的逐字文字？

我尝试了以下方法：

```
String file2 = @"c:\users\me\desktop\""this is audio.mp3"""; 
```

但我得到了这个

c:\users\me\desktop\\这是audio.mp3"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:33:10.630

你已经正确地逃脱了。

调试器向您显示一个非文字字符串。

```
@"""c:\users\me\desktop\this is audio.mp3""" 
```

和：

```
"\"c:\\users\\me\\desktop\\this is audio.mp3\"" 
```

就编译器/调试器而言，它们是相同的。

它们都产生一个包含：（`"c:\users\me\desktop\this is audio.mp3"`嵌入双引号）的字符串。

# eclipse - Scala / Eclipse - 文件未编译

> ID：15338616
> 
> 赞同：1
> 
> 时间：2013-03-11T12:30:26.277
> 
> 标签：eclipse, scala, m2eclipse

我添加了一个带有“scala-archetype-simple”的 Maven 项目，但是在创建项目后，编译器无法识别 Scala 源文件，并且我遇到了诸如

> “应改为令牌 ClassHeader 上的语法错误”

还有很多编译错误说“Java问题”

这应该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:36:17.960

“添加 Scala 自然”可能还不够。之后，如果您在项目中没有看到“Scala Library”，您可以右键单击该项目并转到“Scala”菜单，然后单击“Add Scala Library to Build Path”，然后它就可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:30:26.277

右键单击项目，选择`Configure`-> `Add Scala Nature`。这可以立即解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:28:32.680

它在 Eclipse 中对我来说效果很好，但是：

*   您需要安装[m2eclipse-scala](https://github.com/sonatype/m2eclipse-scala)连接器。
*   有两个`scala-archetype-simple`版本，请确保您`1.5`在 group 中使用 version `net.alchim31.maven`。

# neo4j - CREATE UNIQUE 创建重复关系

> ID：15338623
> 
> 赞同：0
> 
> 时间：2013-03-11T12:31:03.503
> 
> 标签：neo4j, cypher

我的密码查询：

```
START reference=node(0)
CREATE UNIQUE 

    reference
    -[:REFERENCES]->
    (categories {name: 'categories'})
    -[:CATEGORY]->
    category_user{name : 'user_categorie'}),

    reference
    -[:REFERENCES]->
    (categories {name: 'categories'})
    -[:CATEGORY]->
    category_project{name : 'project_categorie'}) 
```

我遇到的问题是它在参考节点和类别节点之间创建了两个 REFERENCES 关系，而您只期望一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:08:52.150

它不会知道名称为“类别”的节点在名称上是唯一的，因此它只是创建了整个模式。您可以执行以下操作：

```
START reference=node(0)
CREATE UNIQUE reference-[:REFERENCES]->(categories {name: 'categories'})
CREATE UNIQUE (categories)-[:CATEGORY]->(category_user {name : 'user_categorie'})
CREATE UNIQUE (categories)-[:CATEGORY]->(category_project {name : 'project_categorie'}) 
```

# c++ - .data.rel.ro+0x8 错误：未定义对 'typeinfo for android::MediaSource' 的引用

> ID：15338627
> 
> 赞同：0
> 
> 时间：2013-03-11T12:31:17.173
> 
> 标签：c++, gcc, android-ndk, stagefright

在使用 ndk-build 在 android 中编译我的 JNI 源时，我无法解决问题。导致错误的类如下：

```
class MxDataSource : public MediaSource
{
    public:
          MxdataSource();
          virtual status_t start(MetaData *params);
          virtual status_t stop();
          virtual sp<MetaData> getFormat();
          virtual status_t read(MediaBuffer **buffer, const MediaSource::ReadOption *options));
          virtual ~MxDataSource();
          void LinkMxData(MxData* data);
          void DelinkMxData();
}; 
```

在这里，所有的虚方法都是在`MediaSource`类中定义的。现在，当我编译它时，出现以下错误：

```
MxDataSource.cpp(.data.rel.ro+0x8):error: undefined reference to 'typeinfo for android::MediaSource'
MxDataSource.cpp(.data.rel.ro+0x18):error: undefined reference to 'typeinfo for android::MediaSource'
MxDataSource.cpp(.data.rel.ro+0x54):error: undefined reference to 'typeinfo for android::MediaSource' 
```

我已经通过类似问题的stackoverflow链接但无法解决。任何方向将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T23:37:53.200

您是否链接到在库中预编译的 MediaSource？似乎 MediaSource 是使用 -fno-rtti 编译的，这可能是添加 -fno-rtti 修复它的原因。Android 是否提供 libsupc++ 运行时支持？我不是安卓开发者...

# sql-server - Sql Server 2008：选择子句中低效子查询的替代方案

> ID：15338628
> 
> 赞同：0
> 
> 时间：2013-03-11T12:31:18.237
> 
> 标签：sql-server, performance, sql-server-2008, subquery

我有一张桌子：

SourceID、TargetID、金额、年份。

我也有看法。此视图正在查看同一表中的行和其上方的行之间的差异。我使用 CTE 来做到这一点：

```
 WITH cte as (SELECT ROW_NUMBER() OVER 
(PARTITION BY SourceID ORDER BY ... ) as rowNum, 
SourceId, TargetID, Amount, Year FROM table)

    Select 
    t1.SourceID as SourceID1, 
t2.SourceID as SourceID2, 
t1.TargetID as TargetID1, 
t2.TargetID as TargetID2, 
t1.Year, 
(t1.Amount - t2.Amount) as Difference

    FROM cte t1
    LEFT JOIN cte t2 ON t1.SourceID = t2.SourceID and t1.rowNum = t2.rowNum+1 
```

我现在在该视图中有 2 列。目标 ID1 和目标 ID2。TargetID2 与上一行中的 TargetID1 相同。有时 TargetID2 为空，因为在上面显示的左连接中不满足条件。没事儿。从这个视图中选择 * 正是我所需要的。

这里的问题是当我想有条件地选择时。例如：我只想选择以 2012 为年份的行。当然从技术上讲这不是问题，但是当 2012 年的第一行将自己与 2011 年的（现在不可见的）最后一行进行比较时，客户会感到困惑。当结果集中的第一行满足连接条件时，他们希望差异为空（NULL）。

所以我写了这个：

```
SELECT
    SourceID1, SourceID2, TargetID1, TargetID2, Year,
    case when TargetID2 is null
    then null
    else case when TargetID2 NOT IN (
        select TargetID1 from view where Year = 2012)
    then null
    else Difference
    end
    end as Difference,
FROM view where Year = 2012 
```

这实际上奏效了......它花了一点时间，因为它是一张相当大的桌子，但它是可以接受的。现在我们添加一个百分比（百分比的差异）。这意味着最后一个查询被另一个条件选择扩展，检查完全相同的条件。

```
case when TargetID2 is null
   then null
   else case when TargetID2 NOT IN (
    select TargetID1 from view where Year = 2012)
   then null
   else Percentage
   end
   end as Percentage 
```

所以这变得非常消耗。

我的问题是：我该怎么办？一般来说，对解决方案、视图或查询的更改都很好。只要过滤结果显示第一行的差异和百分比为空并且查询执行，则没有任何限制。

对不起，大帖子。不知道还能怎么放这个。

谢谢

编辑：

我对问题不够清楚。如果 Year 是唯一的问题，我可以做以下一些建议，但事实并非如此。我简化了表格和视图，使其更具可读性，但还有其他列和其他可以过滤的内容。

还有一个月的专栏。因此，如果我想查看 2011 年 10 月 - 2012 年 2 月，那么 2011 年的最后一行应该与 2012 年的第一行进行比较。这里 10 月的第一行应该有 NULL 差异和百分比列，因为它的 TargetID2 在 TargetID1 中不存在柱子...

我希望这能清除它。也许我应该从头开始回答这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:05:27.383

似乎您永远不想将一年的一行与前一年的一行进行比较。如果是这种情况，您应该添加`AND t1.Year = t2.Year`到视图中的连接条件。

如果这是不正确的并且不知何故 2012 年是一个特殊的年份，您可以将该`t2.Year`列添加到视图中。这样您就可以直接使用它，而不必加入重新发现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:21:31.213

嗯，这似乎比我想象的更难解释。我决定使用我以前的解决方案，但将所有内容都放在存储过程中，而不是视图 + 查询中。这样它就不必多次迭代同一个表。感谢大家的支持！

# c# - 处理文件未找到异常的正确位置在哪里？

> ID：15338629
> 
> 赞同：1
> 
> 时间：2013-03-11T12:31:23.107
> 
> 标签：c#, .net, exception-handling, error-handling, filenotfoundexception

我有检查数据库中记录的图像名称的方法。如果有这种情况，我会尝试使用记录的路径加载图像。如果没有，我会加载默认图像。

首先，我将整个方法放在一个`try-catch`块中`catch(Exception ex)`，无论我刚刚返回的异常是什么`Error loading image`：

```
 if (File.Exists(imgPath + "\\" + imageName))
    {
        try
        { 
            using (var temp = new Bitmap(imgPath + "\\" + imageName))
            {
                pictureBox1.Image = new Bitmap(temp);
            }

            if (pictureBox1.Image.Width > defaultPicBoxWidth)
            {
                pictureBox1.Width = defaultPicBoxWidth;
            }
        }
        catch (Exception ex)
        {
            logger.Error(ex.ToString());
            MessageBox.Show("Error loading image!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

然后我发现有时我可能在数据库中有一条记录，但由于某种原因该文件可能丢失了，所以我添加了检查：

```
if (imageName != null && !File.Exists(imgPath + "\\" + imageName)) 
```

现在我也需要为这种情况提供适当的信息。我得出的结论是，我可以 - 使用几个`try-catch`块来处理这些部分或抛出异常并处理调用方法的异常。

我选择了第二个选项，现在整个代码是：

```
 if (imageName != null && !File.Exists(imgPath + "\\" + imageName))
    {
        throw new FileNotFoundException(); 
    }

    if (File.Exists(imgPath + "\\" + imageName))
    {
        //try
        //{ 
            using (var temp = new Bitmap(imgPath + "\\" + imageName))
            {
                pictureBox1.Image = new Bitmap(temp);
            }

            if (pictureBox1.Image.Width > defaultPicBoxWidth)
            {
                pictureBox1.Width = defaultPicBoxWidth;
            }
        //}
        //catch (Exception ex)
        //{
        //    logger.Error(ex.ToString());
        //    MessageBox.Show("Error loading image!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        //}
    } 
```

这就是我调用该方法的地方：

```
try
                {
                    //The name of the method described above
                    LoadSavedOrDefaultImage(imageInfo, entity.Picture, txtCode.Text, imageLocation);
                }
                catch (FileNotFoundException ex)
                {
                    logger.Error(ex.ToString());
                    MessageBox.Show("Error loading image! The file wasn't found.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
                catch (Exception ex)
                {
                    LogErrorAndShowMessage(ex, Resources.ERROR_LOAD);
                } 
```

我更喜欢这个，但我不能确切地说出为什么。一般的问题是 - 这是处理异常的正确方法。`try-catch`而更具体的——在我的确切情况下，放置积木的更好地方是哪里？对我来说，在方法本身的主体中是有意义的，因为这样我就不需要`try-catch`在我为我调用该方法的任何地方编写那些块，它以这种方式更加封装。现在还有两个`try-catch`块，但是如果将来逻辑发生变化，我可能想抛出更多不同的异常，这是将异常处理保留在方法本身而不是在调用它的位置的另一个原因，但另一方面......我想要阅读您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:49:47.210

1.  在回答您的一般问题“处理异常的最佳位置在哪里”时，答案很简单：**始终处理最接近引发异常的点**。

    那是您将拥有处理异常所需的最多信息的地方，它还可以降低代码依赖性。如果让异常冒出太多层级，那么高层代码将不得不知道低层代码的实现细节，这会增加耦合并破坏抽象。

    这给我们带来了另一个重要点：如果您*没有*足够的信息来处理异常，或者您不知道该怎么做，那么您根本不应该处理异常。相反，你应该让它冒泡，直到它最终到达可以处理它的代码，或者失败，一个显示错误消息和/或写入日志文件和/或将转储发送回开发人员的全局异常处理程序（ s) 在优雅地结束应用程序之前。例外不像口袋妖怪；你不应该抓住他们。只抓住那些你知道如何处理的人。（[有关全局异常处理的相关阅读。](https://stackoverflow.com/a/4827646/366904)）

2.  针对您的具体问题“我如何处理找不到文件/记录/对象的情况”，答案也相对简单：**始终处理异常**。

    乍一看，检查对象是否存在*似乎是个好主意。*这似乎是防御性编程，而不是尝试做你知道会失败的事情。我们都知道防御性编程是一种最佳实践。

    所以有什么问题？一个相对微妙的，称为*竞争条件*。看，仅仅因为您在尝试访问它之前确保该对象存在，该对象仍然可能在您验证它的存在和您尝试访问它的时间之间消失。在伪代码中：

    ```
    if (!File.Exists(myFile))
    {
        MessageBox("Sorry buddy, that's a no-go.");
    }
    else
    {
        // Uh-oh! The file got deleted!
        File.Open(myFile);  // fails
    } 
    ```

    现在，当然，您可能对自己说，这听起来非常罕见。在执行两行代码之间，对象真正消失的频率是多少（或者您失去了访问它的能力）？好吧，这实际上并不是那么不可能。考虑文件位于网络驱动器上并且网络电缆突然被拔掉的情况。但即使它*非常*罕见，这就是为什么它被称为异常：它是一个*异常*[非常罕见] 条件。

    所以这里正确的解决方案是只处理异常，因为即使你进行防御性编程，你*仍然*需要处理异常来处理竞争条件。而且我们都知道不必要的代码重复是不好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:45:37.013

你的第二个选择进展顺利。如果您的代码中有部分不太可能导致任何异常（如果有的话），那么您不应该在`try-catch`.
在我看来，只有少数情况下只有“一种方法”来处理异常。重要的是，您必须保护那些可能导致程序故障甚至崩溃的代码部分。
此外，使用多个`try-catch`-blocks 来捕获不同的异常也很好。有时，您希望对某些例外情况进行平等处理，而不是进一步区分它们。然而在其他情况下，有一些你根本没想到的例外，然后你至少可以找到使用`catch(Exception ex) { ... }`

[也许在MSDN](http://msdn.microsoft.com/en-us/library/ms173160.aspx)上进行一些查找可以帮助您。

# maven - Maven3通过属性激活配置文件

> ID：15338631
> 
> 赞同：0
> 
> 时间：2013-03-11T12:31:25.777
> 
> 标签：maven, maven-3

有POM：

```
<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://maven.apache.org/POM/4.0.0">
    {...}
    <properties>
        <skipTests>false</skipTests>
        <skipTestExecution>false</skipTestExecution>
        <skipSpecTests>${skipTests}</skipSpecTests>
        <skipSpecTestExecution>${skipTestExecution}</skipSpecTestExecution>
    </properties>
    {...}
    <profiles>
      <profile>
        <id>no-test-compile</id>
        <activation>
            <property>
                <name>skipSpecTests</name>
                <value>true</value>
            </property>
        </activation>
      </profile>
  </profiles>
</project> 
```

我可以通过 skipTests 属性激活 no-test-compile 配置文件吗？当然，我可以使用 skipTests 激活属性创建新的配置文件，但我认为有更优雅的方法可以做到这一点。谢谢。

PS 显式配置文件定义是不可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:34:29.177

那么`mvn clean package -DskipTests=true -Pno-test-compile`呢？

# delphi - 与 TIdBlockCipherIntercept 等效的服务器端组件是什么？

> ID：15338634
> 
> 赞同：6
> 
> 时间：2013-03-11T12:31:37.207
> 
> 标签：delphi, delphi-xe2, indy

我想加密在 a`TIdTCPClient`和`TIdTCPServer`组件之间发送的一些数据包。在客户端，我可以`TIdBlockCipherIntercept`用来实现我的加密/解密。但是，我找不到要分配给 my的匹配*服务器端*`IdTCPServer`组件，我在 Google 上也找不到任何东西。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:47:46.483

在没有`TIdServerIntercept`后代的情况下，您可以处理`OnConnect`事件并将`TIdBlockCipherIntercept`实例分配给服务器连接的`Intercept`属性。

```
AContext.Connection.Intercept := TIdBlockCipherIntercept.Create(AContext.Connection); 
```

# html - 导航在粗体悬停时移动

> ID：15338635
> 
> 赞同：0
> 
> 时间：2013-03-11T12:31:41.063
> 
> 标签：html, css

当我将导航悬停时，它会向右移动大约 5 px。悬停设置为字体粗细：粗体。所以我知道这是问题所在。如果我在导航的边距下方添加一个边距右 5px，则悬停实际上会变粗而不移动第一个导航链接，但是当我悬停其他导航链接时，问题又开始了。

我的悬停CSS。

```
#nav ul li a:hover { 
border-color:#ccc;
font-weight:bold;
margin-right:35px;

} 
```

我创建了一个 jsFiddle 来显示问题。

[http://jsfiddle.net/sM3AF/](http://jsfiddle.net/sM3AF/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:36:43.860

```
#nav ul li {
  display: inline-block;
  position: relative;
  border-right: solid 1px #e1e1e1;
  margin: 0px;
  width: 100px;
} 
```

给每个链接一个特定的宽度将解决这个问题......使用 % 以获得更响应的设计。

# google-apps-script - InsertImage(url,x,y) 不适用于 Google 云端硬盘

> ID：15338638
> 
> 赞同：1
> 
> 时间：2013-03-11T12:32:01.907
> 
> 标签：google-apps-script, google-sheets

我在我的 Google Drive 中保存了一张图片，我希望我的脚本将该图片插入到电子表格中。但是，当我使用照片的 Google Drive URL 调用[InsertImage(url x,x)](https://developers.google.com/apps-script/reference/spreadsheet/sheet?hl=en#insertImage%28String,Integer,Integer,Integer,Integer%29)时，出现错误：

```
We're sorry, a server error occurred. Please wait a bit and try again. 
```

如何将此图像插入电子表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T19:06:22.537

无法通过 InsertImage 使用 Google Drive 上图像的 URL。

有一个悬而未决的问题，多年来一直是功能请求。给它加星标以接收更新。

> [问题 145](http://code.google.com/p/google-apps-script-issues/issues/detail?id=145)：insertImage() 不适用于存储在谷歌文档中的图像

您需要将图像托管在具有稳定 URL 的外部服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-14T01:05:01.827

实际上，您可以使用 Advanced Drive SDK 来获取您需要的[File 对象](https://developers.google.com/drive/v2/reference/files)的任何元数据，例如，包括 selfLink 或 thumbnailLink。

我写了一个[GitHub Gist](https://gist.github.com/sjsyrek/de2c4b3506287cc87760)从我们保存在 Google Drive 上的图像文件中检索缩略图 URL，并根据基于工作表中部件号的文件名模式将它们作为图像公式自动插入到电子表格中。

获得 URL 后，您可以使用它构建一个 =IMAGE(url) 公式将图像直接插入到单元格中，这可能对您更有用，或者您可以使用[insertImage()](https://developers.google.com/apps-script/reference/spreadsheet/sheet#insertImage(String,Integer,Integer))函数将图像插入到文件作为那些浮动覆盖的东西之一。您可以使用相同的方法来获取二进制 blob，如果您希望插入图像数据本身，而不仅仅是对其的 URL 引用，但这不适用于公式（仅使用[insertImage() 函数的覆盖， blob 版本](https://developers.google.com/apps-script/reference/spreadsheet/sheet#insertImage(Blob,Integer,Integer))）。以下是[Google 第 4344](https://code.google.com/p/google-apps-script-issues/issues/detail?id=4344)期中如何使用 UrlFetchApp 从文件中获取图像缩略图的示例：

```
function getThumbnail(fileId) {
  var file = Drive.Files.get(fileId);
  return UrlFetchApp.fetch(file.thumbnailLink).getBlob();
} 
```

如果您只想要链接，只需离开 getBlob() 函数。如果您想要完整大小的图像，请尝试使用 selfLink 属性。如果您想了解更多详细信息，请参阅我的[Gist](https://gist.github.com/sjsyrek/de2c4b3506287cc87760)。

这绝对是一种解决方法，所以我不知道它是否会继续工作，或者谷歌是否会在未来最终提供一个合理的实现。但是请注意，您需要在脚本文件中的 Resources : Advanced Google services 以及[Developers Console](https://console.developers.google.com)中激活 Drive SDK 。如果不起作用，请确保 Script 项目中的项目 ID 与控制台中与项目关联的 ID 匹配。我必须在控制台中实际创建一个新项目并重置 ID 以匹配脚本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-10T22:30:33.623

实际上这很容易做到。在 Google 驱动器上创建一个公共文件夹，将图像放在那里，然后使用[http://googledrive.com/folders_id/image_name.jpg](http://googledrive.com/folders_id/image_name.jpg)来获取它。告诉我它是否不起作用

# php - 带有数据文件的 POST 请求

> ID：15338644
> 
> 赞同：2
> 
> 时间：2013-03-11T12:32:11.993
> 
> 标签：php, file, post, text

我需要使用文件中的数据向外部源发出 POST 请求，所以我尝试合并我看到的这两个解决方案，但我似乎无法让它们工作，你能帮帮我吗？

```
// Submit those variables to the server
$post_data = array(
    'test' => 'foobar',
    'okay' => 'yes',
    'number' => 2
);

// Send a request to example.com 
$result = post_request('http://www.example.com/', $post_data);

if ($result['status'] == 'ok'){

    // Print headers 
    echo $result['header']; 

    echo '<hr />';

    // print the result of the whole request:
    echo $result['content'];

}
else {
    echo 'A error occured: ' . $result['error']; 
} 
```

在 array() 我放

```
$trimmed = file('somefile.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

所以最后我得到了这样的东西

```
<?php
    $post_data = array($trimmed = file('somefile.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

    $result = post_request('http://www.example.com/', $post_data);

    if ($result['status'] == 'ok'){

        echo $result['header']; 

        echo '<hr />';

        echo $result['content'];

    }
    else {
        echo 'A error occured: ' . $result['error']; 
    }
?> 
```

编辑：如果我不清楚我需要什么，我很抱歉。实际上，我偶然发现有人与我在这里 stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get 有相同的需求，尽管我想用 php 来做。

基本上，我被要求在网站内制作一个快速表单，用户在其中编写一些保存在 .txt 中的凭据，并且该数据用于通过 POST 登录到附属外部网站。这使用户能够从一开始就登录到附属网站，而无需单击新链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:19:25.383

您的代码的第一行有问题。第一个片段的数据属性也丢失了。您也可以添加它们。

```
$post_data = array($trimmed = file('somefile.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

将其替换为

```
$post_data = array(
    'trimmed' => file('somefile.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES)
); 
```

[在 PHP 中声明数组见官方文档](http://php.net/manual/en/language.types.array.php)

如果您需要文件中的数据，您可能需要将其解析为数组，然后将其发布到 url。如果是这种情况，您可以发布txt文件的格式吗？

# android - 哪种方式更有效和更安全，后连接或直接连接到数据库？

> ID：15338645
> 
> 赞同：2
> 
> 时间：2013-03-11T12:32:15.750
> 
> 标签：android, ios, http-post, memory-efficient, mysqlconnection

我想向 mysql 数据库中插入许多数据，当然只有文本。

例如，我目前正在通过帖子进行`insertUser.php?user=asd&pass=asdas&email=asdasd`操作，无论是否正常，它都会给我回复，但现在我正在尝试处理`upload`大量数据`insertData.php?xml=string&userid=2`，例如回复也很大，有时需要很长时间因为是针对手机应用多使用**3g（android & iOS）**，所以哪个效率更高，还在做`post connections`还是一个`direct mysql connection`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:02:15.897

检查下面的答案

```
xmlbody = (NSString *)CFURLCreateStringByAddingPercentEscapes(
                                                                        NULL,
                                                                            (CFStringRef)xmlbody,
                                                                            NULL,
                                                                            (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",
                                                                            kCFStringEncodingUTF8 );

NSMutableString *entirexmlbody=[[NSMutableString alloc]init ];
[entirexmlbody appendString:@"xml="];
[entirexmlbody appendString:xmlbody];

NSLog(@"posting XML Body after encoding--%@\n",xmlbody);

NSData *postData = [entirexmlbody dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:posturl]];

[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];
NSURLConnection *conn=[[[NSURLConnection alloc] initWithRequest:request delegate:self] autorelease]; 
```

# ruby-on-rails-3 - 我的架构有一个“消息”表，我无法通过迁移删除

> ID：15338647
> 
> 赞同：0
> 
> 时间：2013-03-11T12:32:18.660
> 
> 标签：ruby-on-rails-3, postgresql, rails-activerecord, rails-migrations

我的架构有一个无法通过迁移删除的消息表。当我尝试放下桌子时，我得到了`PG::Error: ERROR: relation "messages" does not exist`. *如果 schema.rb 是您的数据库架构的权威来源，*这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:11:41.763

迁移不是这样工作的。它们只是为了从版本 A 到版本 B 而执行的一系列脚本。Rails 通过查看 schema_migrations 表来确定哪个版本是最新的。

要解决您的特定问题，请编辑迁移文件，或创建迁移可以删除的虚拟“消息”表。

# python - 发布更多文件 - 如何提交和捕获

> ID：15338649
> 
> 赞同：0
> 
> 时间：2013-03-11T12:32:20.503
> 
> 标签：python, html, django

我试图让用户有机会上传他想要的这么多文件。所以他可以添加更多的输入文件字段。

我这样做了：`<input type="file" name="images[]" />`但我不知道如何在服务器端捕获它们。

我可以`images = request.POST.get('images')`，但这将是一个数组，不是吗？如何分别保存它们？

如何在 django 的服务器中捕获它们？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:50:17.247

当我按信封拆分交易时，我也在这样做，因此可以像这样保存：

```
def view_name(request):
    if request.method == 'POST':
        images = request.POST.getlist('images[]')

        for i in range(len(images)):
            //do forloop here 
```

# c# - 给一个插件类一个人类可读的名字

> ID：15338652
> 
> 赞同：8
> 
> 时间：2013-03-11T12:32:25.800
> 
> 标签：c#, plugins, interface

我正在为我的应用程序创建一个插件系统，我希望插件公开一个人类可读的名称。该应用程序将显示可用插件的列表，在此列表中名称需要可用。

我想让插件的开发人员非常清楚他们需要做什么才能使他们的插件工作。

目前我正在使插件类实现一个接口，并且该接口需要一个属性“ConsumerName”来实现。但是，这需要主应用程序为每个插件创建一个实例，以便使用 CunsumerName 属性，只是为了显示列表。

```
public interface IDataConsumer : IDisposable
{
    string ConsumerName { get; }

    void Consume(DataRowSet rows);

    ...
} 
```

有没有办法强制插件类提供元数据而不创建每种类型的实例？

我的后备计划是在每个类上使用反射和一些属性，但我不认为属性可以强制使用接口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:39:12.830

不，属性不能成为接口合同的一部分。但他们可以强烈推荐。

我过去所做的事情是一个属性，例如：

```
[AttributeUsage(AttributeTargets.Class)]
public class PluginNameAttribute : Attribute {
    public string ConsumerName { get; set; }
} 
```

如果程序员选择用该属性装饰他的类，那就太好了。如果没有，您可以依靠类名本身：

```
var consumerName = type.Name;
var nameAttribute = type.GetCustomAttributes(typeof(PluginNameAttribute), true)
    .FirstOrDefault() as PluginNameAttribute;
if (nameAttribute != null) {
    var attributeName = nameAttribute.ConsumerName;
    if (!string.IsNullOrEmpty(attributeName)) {
        consumerName = attributeName;
    }
} 
```

如果有文件证明他们应该这样做，那么要求插件开发人员使用该属性应该不会太多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:35:59.960

通常我会说“不，没有”。这是因为有两种机制允许从类型中提取信息而不需要创建实例：`static`成员和属性。由于这些机制和接口之间没有重叠，因此您无法同时满足所有声明的要求。

但是，基于属性的解决方案有什么问题？当然，您不能在编译失败的痛苦中强制属性的存在，但是您*可以*在加载插件时（甚至更早）这样做。

# calendar - SmartGWT：CalendarEvent 未在正确位置显示

> ID：15338653
> 
> 赞同：0
> 
> 时间：2013-03-11T12:32:31.483
> 
> 标签：calendar, smartgwt

我在 SmartGWT 上遇到一个问题`Calendar`ojects 没有显示`CalendarEvents`在正确的位置 我有两个事件需要显示

事件 ID ::: 1 :: 开始日期 :: Mon Mar 11 16:30:00 IST 2013 :: END DATE :: Mon Mar 11 19:00:00 IST 2013

事件 ID ::: 2 :: 开始日期 :: Mon Mar 11 20:00:00 IST 2013 :: END DATE :: Mon Mar 11 23:06:00 IST 2013

[Image1](http://i.stack.imgur.com/WRbBh.png)显示：日历事件显示事件 2 的详细信息，但放置在错误的位置

[Image2](http://i.stack.imgur.com/e2X5g.png)显示：日历事件显示事件 1 的详细信息，但设置事件的时间是事件 1

我还附上了我的源代码：

```
Criteria criteria = new Criteria(); 
    criteria.addCriteria("truckId", "10");

    calendar.setShowDayView(false);
    calendar.setShowMonthView(false);
    calendar.setShowWeekView(true);
    calendar.setRowHeight(40);
    calendar.setDisableWeekends(false);
    calendar.setTimeFormatter(TimeFormatter.TOSHORT24HOURTIME);
    calendar.setDataSource(DataSource.get(LOAD_DMI));  
    calendar.invalidateCache();

    calendar.fetchData(criteria, new DSCallback() 
    {
        @Override
        public void execute(DSResponse response, Object rawData, DSRequest request) 
        {
            try
            {
                Record[] recordList = response.getData();
                record = new CalendarEvent();                   
                int temp = 1;
                calendarEvnt = new CalendarEvent[recordList.length];
                for(int k=0; k<recordList.length; k++)
                {
                    record.setEventId(temp);
                    record.setName(recordList[k].getAttribute("customerName"));
                    record.setDescription(recordList[k].getAttribute("truckName"));
                    record.setStartDate(recordList[k].getAttributeAsDate("scheduledPickUpDateAndTime"));
                    record.setEndDate(recordList[k].getAttributeAsDate("scheduledDropOffDateAndTime"));

                    calendarEvnt[k] = new CalendarEvent(record.getEventId(), record.getName(), record.getDescription(), record.getStartDate(), record.getEndDate());

                    temp++;
                }
                System.out.println("CALENDER EVENT Size ::: "+calendarEvnt.length);
                calendar.setData(calendarEvnt);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }
    });
    calendar.draw(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:14:17.603

日历集`setEventAutoArrange(false)`可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T07:28:56.260

我遇到了同样的问题，我偶然发现了这一点，我确实尝试过`setEventAutoArrange(false)`，该调用解决了问题，直到我注意到如果 setEventAutoArrange 设置为 false 日历项无法显示共享相同开始和结束时间的事件。我不确定为什么 smartgwt 会呈现 OP 所示的事件。但是，我发现一旦数据源获取完成，如果您调用`calendar.markForRedraw();`问题`DSCallback`就会消失并且您不需要`setEventAutoArrange(false)`并且calander 可以毫无问题地呈现所有事件。

我希望这对将来的某人有所帮助。

- 编辑 -

似乎这不适用于所有情况。

# coronasdk - 在哪里可以找到 Corona SDK 的事件列表？

> ID：15338655
> 
> 赞同：0
> 
> 时间：2013-03-11T12:32:39.897
> 
> 标签：coronasdk

当任何物理属性发生变化时，我需要调用一些东西来同步那些是物理体而那些不是物理体的对象。事实证明，enterFrame 的工作频率低于速度变化。在哪里可以找到完整的电晕 SDK 事件列表？这：[http](http://docs.coronalabs.com/api/type/Event.html) ://docs.coronalabs.com/api/type/Event.html不是很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:19:19.370

这是您要查找的页面： http: [//docs.coronalabs.com/api/event/index.html](http://docs.coronalabs.com/api/event/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:09:06.413

对于整个列表，您可以更喜欢 - [http://docs.coronalabs.com/api/event/](http://docs.coronalabs.com/api/event/)并且对于使用自定义事件，您可以使用 - [http://www.coronalabs.com/blog/2012/06/26/how -to-use-custom-events-in-corona/](http://www.coronalabs.com/blog/2012/06/26/how-to-use-custom-events-in-corona/)

# python - 未调用属性装饰器的 setter 方法

> ID：15338659
> 
> 赞同：8
> 
> 时间：2013-03-11T12:32:47.600
> 
> 标签：python, class, properties, decorator, python-decorators

我正在尝试使用属性方法来设置类实例的状态，具有以下类定义：

```
class Result:
    def __init__(self,x=None,y=None):
        self.x = float(x)
        self.y = float(y)
        self._visible = False
        self._status = "You can't see me"

    @property
    def visible(self):
        return self._visible

    @visible.setter
    def visible(self,value):
        if value == True:
            if self.x is not None and self.y is not None:
                self._visible = True
                self._status = "You can see me!"
            else:
                self._visible = False
                raise ValueError("Can't show marker without x and y coordinates.")
        else:
            self._visible = False
            self._status = "You can't see me"

    def currentStatus(self):
        return self._status 
```

从结果来看，似乎没有执行 setter 方法，尽管内部变量正在更改：

```
>>> res = Result(5,6)
>>> res.visible
False
>>> res.currentStatus()
"You can't see me"
>>> res.visible = True
>>> res.visible
True
>>> res.currentStatus()
"You can't see me" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T12:37:35.810

在 Python 2 上，您*必须*继承 from`object`才能使属性起作用：

```
class Result(object): 
```

使其成为一个新式的班级。通过该更改，您的代码可以工作：

```
>>> res = Result(5,6)
>>> res.visible
False
>>> res.visible = True
>>> res.currentStatus()
'You can see me!' 
```

# javascript - 始终将容器定位在顶部

> ID：15338661
> 
> 赞同：0
> 
> 时间：2013-03-11T12:32:55.400
> 
> 标签：javascript, html, css, position, containers

`dom`我有一个插件，我在其中提供了一个简单的 div 容器，该插件通过 javascript 在容器内创建各种元素。插件创建的基本结构是这样的：

```
Wrapper Div (Position:Relative)
   - Left Container (Position: Absolute)
        - Left Top sub-container (Position: Absolute)
   - Right Container (Position: Relative)
        - Right Top sub-container (Position: Absolute)
        - Right Sub-Container frame with absolute items (Position: Relative) 
```

这是我为插件创建的完全相同的结构创建的小提琴：http: **[//jsfiddle.net/FsYt8/](http://jsfiddle.net/FsYt8/)**

我在这里面临的问题是，当内容溢出时，可以用鼠标滚轮滚动内容（如小提琴）。但是，当我向下滚动时，我希望上面两个左上角和右上角的子容器（红色/蓝色条）颜色保持在顶部，而不是随着内容向下滚动。

该插件在 div 内创建 dom 元素`container-right-frame`并将元素定位为绝对（然后根据`container-right`的顶部/左侧定位）。如何实现上述两个条的固定定位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:52:29.577

您可以将红色和蓝色 DIV 固定并将它们浮动到左侧。右侧 DIV 的左边距将调整 DIV 的 x 轴位置，如下所示：

```
.frame {width:924px;height:300px;position:relative;overflow-x:hidden;}
.axis-left {float:left;width:303px;height:34px;position:fixed;background-color:blue;z-index:2;}
.axis-right {float:left;margin-left:305px;width:303px;height:34px;position:fixed;background-color:red;z-index:2;}
.container-left {height:340px;width:303px;left:0px;position:absolute;background-color:green;z-index:1;overflow:hidden;}
.container-right {height:340px;left:304px;position:relative;overflow:hidden;}
.container-right-frame{
    position:relative;top:34px;background-color:yellow;z-index:1;width:615px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:38:00.327

使标题固定并相应地定位它们：

[http://jsfiddle.net/QYCra/](http://jsfiddle.net/QYCra/)

将列的初始高度向下移动，以便它们从标题下开始：

```
.frame {width:924px;height:300px;position:relative;overflow-x:hidden;}
.axis-left {width:303px;height:34px;position:fixed; top:0; background-color:blue;z-index:2;}
.axis-right {width:615px;height:34px;position:fixed; top:0; left:310px; background-color:red;z-index:2;}
.container-left {height:340px;width:303px;top:30px; left:0px;position:absolute;background-color:green;z-index:1;overflow:hidden;}
.container-right {height:340px;width:615px;top:30px; left:304px;position:relative;overflow:hidden;background-color:yellow;z-index:1;} 
```

# artificial-intelligence - 停止寻找九人的莫里斯

> ID：15338668
> 
> 赞同：1
> 
> 时间：2013-03-11T12:33:23.647
> 
> 标签：artificial-intelligence

首先，为这样的游戏实施静默搜索是否值得？其次，如果静默搜索确实值得，那么该搜索应该考虑什么（例如关闭工厂、阻塞工厂等）？

谢谢，伊万

# ember.js - 把手将对象传递给助手

> ID：15338671
> 
> 赞同：5
> 
> 时间：2013-03-11T12:33:32.703
> 
> 标签：ember.js, handlebars.js

目前我有一个看起来像这样的 Ember 对象：

```
name: 'Bob'
xs: {
    'actual':50
    'target':55
} 
```

我有大约 5-6 个类似于`xs`. 我需要一个辅助方法来获取该 xs 对象，然后返回目标是否已被击中。

我想过这样做：

```
Handlebars.registerHelper('hasHitTarget', function(attribute) {
    if (attribute.actual >= attribute.target)
    {
        return block(this);
    }
});

{{#each user in App.userController}}
    {{#hasHitTarget user.xs}}
        Target Hit
    {{/hasHitTarget}}
{{/each}} 
```

我在网上阅读的所有内容都说这*应该*有效。但事实并非如此。当我作为字符串`console.log(attribute)`返回时。`user.xs`这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:19:04.730

Handlebars 和 Ember.Handlebars 之间存在差异，Ember 在内部扩展了 Handlebars 以添加额外的功能。

话虽如此，您在这里使用了错误的助手，您需要使用`Ember.Handlebars.registerBoundHelper`.

```
Ember.Handlebars.registerBoundHelper('hasHitTarget', function(attribute) {
  if (attribute.actual >= attribute.target) {
    return block(this);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T13:54:05.110

由于 Ember 中的错误（当前为 v1.0），从 #each 中将对象传递给 Handlebars Helper 无法按预期工作，但有一种解决方法......请参阅我的帖子here

[https://stackoverflow.com/a/18787740/1780102](https://stackoverflow.com/a/18787740/1780102)

# ios - ios UINavbar uibarButtonItem 设置图标/图像颜色（遮罩）

> ID：15338673
> 
> 赞同：1
> 
> 时间：2013-03-11T12:33:34.730
> 
> 标签：ios, objective-c, uinavigationbar, uibarbuttonitem, masking

我可能在某个地方错过了一个很好的线程，它告诉我我做错了什么，但这是我的问题 atm：我在 UIBarButtonItem 中有一个 UINavbar 和一个 UIButton。png 'trspBlackBtn30' 只是给按钮一个稍微透明的背景。png 'backArrow' 只是一个在透明背景上带有黑色箭头的 png。我想在 css 中做类似的事情 - 在“backArrow”上放置一个面具来改变它的箭头颜色。这样我就不必为每个彩色箭头制作一个新的 png。我试过这个：

```
-(void)customizeAppBtn30{
UIImage *barBtn30 = [[UIImage imageNamed:@"trspBlackBtn30"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
UIImage *backIcon = [UIImage imageNamed:@"backArrow"];
UIButton *trpBtn30 = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 30, 30)];

[trpBtn30 setTintColor:[UIColor redColor]];

[trpBtn30 setBackgroundImage:barBtn30 forState:UIControlStateNormal];
[trpBtn30 setImage:backIcon forState:UIControlStateNormal];
CGPoint bounds = CGPointMake(4, 4);
[trpBtn30 pointInside:bounds withEvent:nil];
UIBarButtonItem *trspBackBtn =[[UIBarButtonItem alloc]initWithCustomView:trpBtn30];
//self.navigationController.navigationItem.leftBarButtonItem.tintColor = [UIColor whiteColor];
trspBackBtn.tintColor = [UIColor whiteColor];
[self.navigationItem setLeftBarButtonItem:trspBackBtn]; 
```

}

我得到的只是愚蠢的黑色箭头。请帮帮我

# android - 应用程序重新启动时 AnimateCamera 方法不起作用

> ID：15338679
> 
> 赞同：2
> 
> 时间：2013-03-11T12:33:53.767
> 
> 标签：android, google-maps-android-api-2, google-maps-mobile

我正在使用适用于 Android v2 的 Google Maps SDK。我创建了一个新的“cameraPosition”，然后在我的地图中调用“animateCamera”方法将地图移动到用户的 GPS 位置：

```
 CameraPosition cameraPosition = new CameraPosition.Builder()
                .target(location_latlon)      
                .zoom(17)              
                .bearing(90)             
                .tilt(30)                 
                .build();      

map.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition)); 
```

当我第一次打开应用程序时，代码运行良好，但当我第二次打开应用程序时，“animateCamera”方法会转到坐标 (0.0, 0.0)。如果我停止应用程序并再次启动它，它只会在第一次再次运行。

我已经调试并且“cameraPosition”方法返回一个具有真实坐标的有效位置但是当我调用方法“animateCamera”时它根本没有做任何事情。它只是去纬度 0.0 和经度 0.0

谢谢。

# java - 获取应用程序外部 sd 主目录

> ID：15338681
> 
> 赞同：0
> 
> 时间：2013-03-11T12:33:58.897
> 
> 标签：java, android, sd-card

这篇文章全部被编辑所以......

我想从`@drawable`sdcard中保存位图`(/mnt/sdcard/Android/data/app_package/files/)`。如果我尝试`ContextWrapper.getFilesDirectory()`它会返回`"/data/data/app_package/files/"`。我想获得“/mnt/sdcard/Android/data/app_package/files/”。有什么方法可以退货吗？

提前致谢，
Mateiaru

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:38:30.053

将位图保存在外部存储器中。

首先获取drawable的位图，然后将其保存到SD卡中。

```
Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.yourBitmap); 
```

保存它的 SD 卡。

```
public void saveImageToExternalStorage(Bitmap image) {
    //image=scaleCenterCrop(image,200,200);
    String fullPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/Android/data/";
    try
    {
        File dir = new File(fullPath);
        if (!dir.exists()) {
        dir.mkdirs();
        }
        OutputStream fOut = null;
        File file = new File(fullPath, "photo.png");

        if(file.exists())
            file.delete();

        file.createNewFile();
        fOut = new FileOutputStream(file);
        // 100 means no compression, the lower you go, the stronger the compression
        image.compress(Bitmap.CompressFormat.PNG, 100, fOut);
        fOut.flush();
        fOut.close();
    }
    catch (Exception e)
    {
        Log.e("saveToExternalStorage()", e.getMessage());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:37:08.477

将位图从可绘制目录存储到外部存储..但我不知道它将如何帮助你

```
 File f=new File(Environment.getExternalStorageDirectory(),"1.jpg");
        InputStream inputStream =       getResources().openRawResource(R.drawable.the drawable you want to save);
        OutputStream out=new FileOutputStream(f);
        byte buf[]=new byte[1024];
        int len;
        while((len=inputStream.read(buf))>0)
        out.write(buf,0,len);
        out.close();
        inputStream.close(); 
```

# c# - 如何从 STL 文件中获取零件数量？

> ID：15338682
> 
> 赞同：2
> 
> 时间：2013-03-11T12:33:59.347
> 
> 标签：c#

我有一个二进制格式的 STL (STereoLithography) 文件，我已经从 c#.net 成功读取了文件并获得了刻面，我还获得了三角形的数量、零件的体积和零件的表面积以及 3D 对象的尺寸（长度，宽度，高度）。但现在的问题是我找不到零件的数量和层厚。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-20T19:32:37.770

向设计二进制 STL 格式的人道歉，但对我来说这似乎有点难看。

格式的摘要是一个 80 字节的标题，后跟一个 dword（三角形的数量），然后每个三角形存储为 Normal，Vertex1,2&3，以单浮点格式存储为 x,y,z，后跟一个 16 位短 ( 0) - 这个重复直到文件结束。

对象之间没有区别，这意味着本质上解释文件的程序必须在内部保留所有顶点的列表，并在它们进行时删除重复项，以便拥有适当的“歧管”主体（如果这很重要，我想）。

如果您希望将其分解为多个对象，您基本上必须寻找面的“岛屿” - 找到所有通过共享顶点而相互关联的面。单独的对象将是彼此不相关的团块。

据我所知，标准 STL 格式不包括层厚度之类的东西——如果你在谈论 3D 打印切片厚度，那么 STL 是切片之前的步骤——所以没有“层厚度” '本身。

我确定您想要一个更简单的答案，但如果有，那么我还没有找到它:)

# command-line - 使用命令提示符重命名最近创建的文件

> ID：15338685
> 
> 赞同：-2
> 
> 时间：2013-03-11T12:34:06.700
> 
> 标签：command-line, command, command-prompt

我想使用命令提示符重命名最近创建的文件。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T10:01:05.283

你知道如何使用命令提示符打开最近创建的文件吗

[如何编写 Windows 批处理脚本以从目录中复制最新文件？](https://stackoverflow.com/questions/97371/how-do-i-write-a-windows-batch-script-to-copy-the-newest-file-from-a-directory)

在那里你可以用'REM'替换'copy'并提供你自己的路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T12:38:07.573

看看这篇文章。假设您正在运行 Windows，它正是您正在寻找的东西。

[http://www.sevenforums.com/tutorials/56013-file-folder-rename-command-prompt.html](http://www.sevenforums.com/tutorials/56013-file-folder-rename-command-prompt.html)

# php - 得到 Illegal mix of collat ions 错误

> ID：15338686
> 
> 赞同：2
> 
> 时间：2013-03-11T12:34:08.217
> 
> 标签：php, mysql, zend-framework

我的应用程序中有一个子域系统，当我登录我的办公室时，它的登录很好，但是当我登录其他城市或国家时，我收到了这个错误。

有时工作正常，有时不工作。假设如果我的登录 ID 是 xyz@india.com，当我打印此登录 ID 时，我会在登录 ID 之前获得一些特殊字符。

> 致命错误：未捕获的异常“Zend_Db_Statement_Mysqli_Exception”和消息“Mysqli 准备错误：非法混合排序规则（latin1_swedish_ci，IMPLICIT）和（utf8_general_ci，COERCIBLE）用于操作“=”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:10:34.493

这通常是由比较排序规则不兼容的两列引起的。[COLLATE](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)方法将允许您指定查询中使用的排序规则，因此不会返回此类错误。

如果您不需要任何排序规则而只需要比较，您可以考虑将“CHARACTER SET BINARY”添加到列定义中。这将使用 BIN 集合集，并且无论连接字符串或列排序规则设置如何，都将允许等于。

# javascript - 单击按钮后将焦点放在特定的 div 上

> ID：15338690
> 
> 赞同：10
> 
> 时间：2013-03-11T12:34:25.727
> 
> 标签：javascript

我在页面中有一个表格，用于在特定舞台上注册各种娱乐节目。提交所有详细信息并单击提交按钮后，它应该检查特定日期该阶段是否存在程序。如果存在任何程序，则 div 应该显示现有程序的完整详细信息。我的问题是，如果存在任何程序，我需要将焦点放在新生成的 div 上（我的意思是 div 应该是可见的，不需要编辑）。我需要它，因为 div 是在 AJAX 的帮助下生成的，而且表单很长，所以用户看不到生成的 div，除非他/她向上滚动。注意：div 是在顶部位置创建的。提交表单后有什么方法可以使 div 部分可见

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T12:41:53.553

通常，您不能聚焦 div。但是，如果您要为其添加一个 tabindex，它将起作用：

```
<div tabindex="0">test </div> 
```

这是一个演示：

```
.z{margin-top:800px;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="button" onclick="$('.z')[0].focus()" value="test" />
<div>
    <div class="z" tabindex="0">test </div>
</div>
```

如果您单击测试按钮，div 应该会变得聚焦并跳转到视图中。点击我只是做类似的事情`divElement.focus()`

另一个选项只是滚动包含您新添加的 div 的区域，就像这里的其他答案一样。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T12:39:42.860

您可以使用这样的代码跳转到 div

```
$(window).scrollTop($('#new_div').offset().top-20) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T12:39:01.860

您可以使用以下命令滚动到页面顶部：

```
window.scrollTo(0,0); 
```

或使用 jQuery 使用：

```
$('html,body').scrollTop(0); 
```

或者有一些有趣的效果

```
$('html, body').animate({ scrollTop: 0 }, 'fast'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-11T12:46:31.927

使用以下语句对我有用。

```
document.getElementById('id').scrollIntoView(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-11T13:34:03.410

```
<input type="button" onclick="$('#c')[0].focus()" value="test focus" />
<div>
    <div id="c" tabindex="1" style="margin-top:800px;">testing</div>
</div> 
```

[jsfiddle 示例。](http://jsfiddle.net/N7TU4/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T12:38:22.737

尝试`window.scrollTop = #VALUE;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-29T21:26:58.517

```
var selector = document.getElementById('YOUR_ID_SELECTOR');

if(typeof selector.scrollIntoView !== 'undefined' )
    selector.scrollIntoView(); 
```

方法“scrollIntoView”的基本版本支持 IE8+。

这是文档：[https ://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)

# configuration - 如何设置起始页所在的配置是根目录的子文件夹

> ID：15338696
> 
> 赞同：0
> 
> 时间：2013-03-11T12:34:35.657
> 
> 标签：configuration, nginx

我已经成功安装了 nginx。我希望设置我的静态网站的起始页，但起始页不在根目录中，而是在一个名为 /en 的子文件夹中，我尝试从 index index.html index.htm 更改配置文件中的指令；到 /en/index /en/index.html /en/index.htm；

但是当我尝试重新加载时，nginx 抛出了一个错误。

请帮助我更改文件夹结构中下一级的起始页的配置。

问候吉米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:10:32.290

最简单的方法是在您点击 www.domain.com 时让您的网络服务器配置重定向到 /en 目录：

```
server {
  listen <ip-address>;
  server_name domain.com;
  rewrite ^(.*) $scheme://www.domain.com/en/$request_uri? permanent;
} 
```

以上可能需要调整（例如，如果您不想保留请求 URI）。

# delphi - 如何发现我的服务的依赖项是什么？

> ID：15338698
> 
> 赞同：2
> 
> 时间：2013-03-11T12:34:39.987
> 
> 标签：delphi, windows-services, dependencies

我有一个 Windows 服务，它使用：

*   Midas.dll (datasnap ClientDataSet)
*   Indy 组件（TCP 和 FTP）
*   数据库快递
*   CreateProcessAsUser
*   制作IPC的手柄

在某些机器上（使用旧硬件和 Windows XP），它在启动过程中会挂起。

检查 Windows 事件日志，我发现事件 ID：**7022**、**7036**。

机器启动后，我手动启动服务，一切正常！

我认为问题与缺少对我的服务的依赖关系有关。

我的问题是：

**如何为我的服务找到必要的依赖项？**

**有什么实用程序可以告诉我这个吗？**

* * *

**更新**

我已经有日志了...

我的服务可以被我称为插件的一些“子服务”插入。这个插件以“插件管理器”开始，一个应用程序 (exe) 加载 dll 以保证服务内存隔离。

这个插件管理器有一个句柄（AllocateHWnd）可以从服务接收消息（通过 sendmessange），比如：

*   开始
*   重新加载插件库
*   停止

插件管理器的引导程序是：

*   启动并向服务的句柄发送消息（通过参数传递），以将在服务和插件管理器之间为 IPC 内部分配的句柄（由插件管理器）发送回服务。

启动插件管理器的服务的引导代码是：

```
start := now;
while callbackHandle = 0 do
begin
  if PeekMessage(msg, 0, 0, 0, PM_REMOVE) then
  begin
    // need to process a message on WndProc to
    // assign the 'callbackHandle' variable with the
    // handle sent from the plugin manager
    TranslateMessage(msg);
    DispatchMessage(msg);
  end;

  // timeout! Plugin manager doesn't  sent it's handle!!
  if secondsBetween(now, start) > 60 then
     break;
end;

if callbackHandle = 0 then
  raise Exception.Create('Cannot receive the callback handle from plugin manager'); 
```

在日志中，出现上述异常：无法从插件管理器接收回调句柄

似乎服务句柄没有接收到 pluginmanager 句柄，以启动 IPC（进程间通信）。

奇怪的是，如果我在计算机启动后手动启动该服务，它会正常启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:34:02.543

消息队列处理时间不是问题。问题是：硬件慢

我将[ServicePipeTimeout](http://support.microsoft.com/kb/839803)从 30 秒（默认）增加到 2 分钟，一切都恢复正常了。

现在我将尝试 在服务 OnStart 事件中使用[RequestAdditionalTime 。](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.requestadditionaltime.aspx)唯一的问题是我使用的是 Delphi 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:41:32.327

最简单的开始方法是在您的服务中实现日志记录机制。只需将您正在做的所有事情都写入`TextFile`. 然后，您可以轻松找出您的服务挂起的位置。

你在连接什么`DBExpress`？像 SQL Server 这样的数据库引擎？如果是这种情况，也许您的服务是在 RDBMS 之前启动的......

# swing - 边框的颜色代码是什么

> ID：15338705
> 
> 赞同：0
> 
> 时间：2013-03-11T12:35:03.080
> 
> 标签：swing, netbeans, netbeans-platform

我正在尝试修改此 netbeans 边框颜色，因为它在深色背景上很亮。有人知道这个颜色键或实际的 RGB 值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:37:44.533

为什么不能使用图像编辑工具打开此图像并使用滴管？

RGB：185 / 207 / 228

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:38:36.387

以下是颜色细节：

[![截屏](../Images/8ce9ccc749ad4a9d15ca16e9b44d3821.png)](https://fs.fnkr.net/eJHwGRb9pwgU)

或者您使用[ColorPic](http://www.iconico.com/colorpic/)软件。
如果您经常这样做，我建议您这样做。

[![彩色图片截图](../Images/609f78adb13b47ff9d93cffa9d363b2c.png)](https://fs.fnkr.net/bJLjUajNtRtW)

# java - Android上的简单网络爬虫？

> ID：15338706
> 
> 赞同：1
> 
> 时间：2013-03-11T12:35:08.747
> 
> 标签：java, eclipse

配置：Eclipse for Android Developper - jre1.7 - Windows 8 (:s) -

我正在Android上开发一个小应用程序。目前，我只想在 MainActivity 上打印我的网站。我真的试图通过stackoverflow和我的耐心来实现它，我正在使用以下源代码：

```
import java.io.IOException; 
import java.io.InputStreamReader; 
import java.io.Reader; 
import java.util.HashSet; 
import java.util.Set; 
import org.apache.http.HttpResponse; 
import org.apache.http.client.ClientProtocolException; 
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient; 

public class Crawler {

            public static void main(String[] args) throws ClientProtocolException, IOException {
            crawlPage("http://www.google.com/");
        }       

                       private static void crawlPage(String string) {
                // TODO Auto-generated method stub
                        }

        static Set<String checked = new HashSet<String();

        @SuppressWarnings("unused")         private static void main(String url) throws ClientProtocolException, IOException {

            if (checked.contains(url))
                return;

            checked.add(url);

            System.out.println("Crawling: " + url);

            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet("http://www.bratiska.wordpress.com");
            HttpResponse response = client.execute(request);

            Reader reader = null;
            try {
                reader = new InputStreamReader(response.getEntity().getContent());

                String link="";
                new ParserDelegator().parse(reader, link, true);

                if (link.startsWith("http://www.libnum.fr"))
                        crawlPage(link);

            } finally {
                if (reader != null) {
                    try {
                        reader.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }
      } 
} 
```

需要帮助的`private static void crawlPage()`方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:42:18.643

这应该是Android应用程序吗？如果是这样，也许可以通过将其中一些代码放入 Activity 来开始。大多数 Android 应用程序都是从某种 Activity 开始的，或者是某种 Service。从那里可能会将 Web 请求放在 AsyncTask 中，除非线程违规不是问题，但主要功能让我认为这是为 Java 而不是 Android 编写的。抓取页面方法应该只是将输入流读入StringBuilder并将接收到的文本写入TextView吗？你必须给我们更多的东西才能继续。也许首先将其放入 Android 应用程序中，我们可以从那里提供更多帮助。

# sql-server - SQL Server 2008 DATETIME 列数据类型不使用 getdate() 默认为当前日期

> ID：15338707
> 
> 赞同：2
> 
> 时间：2013-03-11T12:35:18.643
> 
> 标签：sql-server, sql-server-2008

在 SQL 2008 中，我创建了一个表，其中有 2 个 NOT NULL 列。作为标识列的 ID 和作为日期时间数据类型的 DATETIME 列，在默认值或绑定中，我已将其设置为 getdate() 但在执行以下 SP 时出现以下错误。任何建议/方向将不胜感激。谢谢。

当我执行以下 SP 时，出现以下错误：

```
USE [MachoPOSt]
GO
/****** Object:  StoredProcedure [dbo].[sbssp_InsertTblArchivedMessages]    Script Date: 03/08/2013 

14:16:20 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[sbssp_InsertTblArchivedMessages]
(
      @xmlString varchar(max),
      @fromToMach bit
)
AS
BEGIN
      SET NOCOUNT ON;
      DECLARE @idoc int, @lastId int
      EXEC sp_xml_preparedocument @idoc OUTPUT, @xmlString

      INSERT INTO [dbo].[tblArchivedMessages]
      SELECT * 
      FROM OPENXML(@idoc, '/ATM', 2) WITH [dbo].[tblArchivedMessages]

      EXEC sp_xml_removedocument @idoc

      SET @lastId = (SELECT IDENT_CURRENT('tblArchivedMessages'))

      UPDATE [dbo].[tblArchivedMessages] 
        SET FromToMach = @fromToMach 
        WHERE ID = @lastId
END 
```

这是错误：

> 消息 515，级别 16，状态 2，过程 sbssp_InsertTblArchivedMessages，第 14 行无法将值 NULL 插入到列 'DateTime'，表 'MachoPOST.dbo.tblArchivedMessages'；列不允许空值。插入失败。该语句已终止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:42:45.987

您需要使用排除`datetime`列的显式列列表。

只有在`default`您根本不提供值或使用`default`关键字时才会生效。您必须`NULL`从该错误消息中插入。

所以你的查询会是这样的

```
INSERT INTO [dbo].[tblArchivedMessages]
            (col1,
             col2)
SELECT col1,
       col2
FROM   OPENXML(@idoc, '/ATM', 2) WITH [dbo].[tblArchivedMessages] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:24:52.257

正如 Martin 已经说过的，您必须指定所有列。为了使输入更容易，您可以在 SSMS 中使用拖放：

1.  将对象资源管理器连接到您的服务器。
2.  找到数据库和表
3.  在表格下找到列文件夹
4.  将整个文件夹拖到打开的查询窗口中

这将自动插入所有列的完整逗号分隔列表。之后，您只需删除不需要的两个。

# asp.net - 如何使用 linq to sql 更新数据库

> ID：15338708
> 
> 赞同：1
> 
> 时间：2013-03-11T12:35:20.540
> 
> 标签：asp.net, database, sql-update, insertonsubmit

我正在尝试更改存储在数据库中的值，但我不确定如何做到这一点，

```
using (DataClassesDataContext dataContext = new DataClassesDataContext())
{        
int accounttype = 1;
int id = 123;
//Search database for record based on round and player nummber
var query = (from r in dataContext.Tables
            where r.accountType.Equals(accounttype)
            where r.ID.Equals(Id)
            select r);

//store player1s oppent in database
foreach (var record in query)
{
    record.fund = 1234;

    dataContext.Tables.InsertOnSubmit(record);
    dataContext.SubmitChanges();
}
} 
```

所以我试图在数据库中搜索特定记录并更改其值之一，但我似乎无法弄清楚如何更新它，但我知道“InsertOnSubmit”是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:39:40.660

尝试这个：

```
record.fund = 1234;
dataContext.Entry(record).State = EntityState.Modified;
dataContext.SaveChanges(); 
```

此外，您可能需要更改您的查询，例如：

```
var query = (from r in dataContext.YourTable
             where r.accountType == accounttype &&  r.ID == Id 
             select r); 
```

# ios - quickblox ios 推送通知消息问题

> ID：15338716
> 
> 赞同：0
> 
> 时间：2013-03-11T12:35:58.010
> 
> 标签：ios, quickblox

我们可以使用 quickBlox sdk 从 ios 推送通知消息中发布图片吗？任何身体帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:52:50.690

将图像上传到内容模块并在推送中发送

```
NSData *file = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"YellowStar" ofType:@"png"]];
[QBContent TUploadFile:file fileName:@"Great Image" contentType:@"image/png" isPublic:YES delegate:self];

- (void)completedWithResult:(Result *)result{

    // success result
    if(result.success && [result isKindOfClass:QBCFileUploadTaskResult.class]){
        QBCFileUploadTaskResult *res = (QBCFileUploadTaskResult *)result;
        int uploadedFileId = res.uploadedBlob;

        // Send push with file ID
        NSString *mesage = @"Hello man!";

        NSMutableDictionary *payload = [NSMutableDictionary dictionary];
        NSMutableDictionary *aps = [NSMutableDictionary dictionary];
        [aps setObject:@"default" forKey:QBMPushMessageSoundKey];
        [aps setObject:mesage forKey:QBMPushMessageAlertKey];
        [aps setObject:@uploadedFileId forKey:@"file_id"]; // this is file ID
        [payload setObject:aps forKey:QBMPushMessageApsKey];

        QBMPushMessage *message = [[QBMPushMessage alloc] initWithPayload:payload];

        [QBMessages TSendPush:message toUsers:@"45288" delegate:self];
    } 
```

# java - 实现 Serializable 的类需要隐含一些方法？

> ID：15338720
> 
> 赞同：0
> 
> 时间：2013-03-11T12:36:17.170
> 
> 标签：java, serialization, serializable

我知道 Serializable 是一个标记接口。那么下面的方法签名是什么意思呢？

```
 private void writeObject(java.io.ObjectOutputStream out)
     throws IOException
 private void readObject(java.io.ObjectInputStream in)
     throws IOException, ClassNotFoundException;
 private void readObjectNoData() 
     throws ObjectStreamException; 
```

这是来自[http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)

在页面中它被写成“在序列化和反序列化过程中需要特殊处理的类必须实现具有这些确切签名的特殊方法：”

我很困惑。Serializable 是否是一个标记接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:52:25.150

这些方法用于自定义序列化过程。我会给你一个例子。

```
class Person implements java.io.Serializable {

int id;
String name;
String city;

Person(int id, String name, String city) {
    this.id = id;
    this.name = name;
this.city = city;
}

private void writeObject(java.io.ObjectOutputStream stream)
        throws IOException {
    stream.writeInt("ID : " + id);
    stream.writeObject("Name : " + name);
    stream.writeObject("City : " + city);
}

private void readObject(java.io.ObjectInputStream stream)
        throws IOException, ClassNotFoundException {
    id = stream.readInt();
    name = (String) stream.readObject();
    city = (String) stream.readObject();
}

public String toString() {
    return id + "\t" + name + "\t" + city + "\t";
}
} 
```

请注意，序列化是使用这些方法自定义的。在序列化默认序列化方法不会执行的字段时，我在 writeObject 方法中添加了字符串常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:43:18.563

是的，Serializable 是一个标记接口。只有需要特殊处理的类必须实现这些方法。

换句话说，您*可以*实现这些方法中的一个或多个来自定义类的实例如何被序列化或反序列化。这通常不需要，因为默认行为足以满足大多数需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:53:06.150

我将在这里疯狂猜测原因。鉴于您可以使用标签来确定哪些字段是可序列化的，我的第一个想法是序列化的内部工作，例如在 中`ObjectOutputStream`，是通过反射完成的。

因此，该`writeObject`方法实际上可能也在检查是否存在具有在对象上定义的相同签名的私有方法，如果存在则调用该方法。最后，同样的方法已经在使用反射来确定要序列化哪个字段以及如何序列化，所以我相信检查特殊方法的存在并不是一个巨大的开销......

这可能看起来有点奇怪，但听起来像是一个不错的解决方案。在接口中强制实现会太多，因为大多数时候是常见的。在像 Java 这样的单一继承模型中使用抽象类是不可能的。C# 使用属性（相当于`@`Java 中的注解）。

希望有更多知识的人可以对此有所了解。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-21T09:18:16.077

这很简单。如果您想要自定义序列化，您可以在要序列化的类中提供上述方法。

示例：如果您正在序列化 User.java，请在此类中提供以下方法用于自定义序列化： private void writeObject(java.io.ObjectOutputStream out) throws IOException private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException;

无论如何，当您通过objectOutputStream.writeObject（本例中的对象是User）调用对象的序列化时，控制将自动重定向到User.java的writeObject方法。

如果您不提供 User.java 中的方法。然后该过程以默认方式进行。

注意：如果您在要序列化的类中同时提供 writeObject/readObject 的实现，则只有自定义序列化有效，否则采用默认路由。希望这可以帮助！

# java - Java ApacheCommonsNet TelnetClient 的行为不一致

> ID：15338726
> 
> 赞同：1
> 
> 时间：2013-03-11T12:36:35.623
> 
> 标签：java, sockets, telnet, apache-commons-net, socket-timeout-exception

我正在使用下面的代码进行远程登录操作。问题是如果我不使用 setSoTimeout()，它每次都成功连接到 Telnet Server；但是，如果使用它，成功连接的频率会降低到 50%。它的使用方式有什么问题吗？

由于不同的原因，我实际上需要套接字抛出超时异常，所以我需要使用 setSoTimeout。请建议如何以有效的方式使用它。

```
 public class TelnetClientHandle {

            private TelnetClient telnet = new TelnetClient();
            private InputStream in;
            private PrintStream out;

            public TelnetClientHandle(String server, String user, String password) {

                try {
                    telnet.setDefaultTimeout(20000);
                    try {
                        telnet.connect(server, 23, sourceIP, 0);
                    } catch (Exception e) {
                        return_value = "Unable to establish Telnet Connection with Server";
                        return;
                        }
                }
            }

                    in = telnet.getInputStream();
                    out = new PrintStream(telnet.getOutputStream());

                    String read_value = readUntil("login", true);
                    System.out.println(read_value);
                    if (read_value.contains("login")) {
                        write(user);
                        read_value = readUntil("sword", false);
                        System.out.println(read_value);
                        write(password);
                    } else {
                        return_value = "Unable to establish Telnet Connection with Server";
                        return;
                    }

                    telnet.setSoTimeout(2000);
                    read_value = readUntil("ABCDEFGH", false);
                    System.out.println(read_value);
                    if ((read_value == null)
                            || ((read_value != null && !(read_value.toLowerCase()
                                    .contains("last login") || read_value
                                    .toLowerCase().contains("microsoft"))))) {
                        return_value = "Login error: Incorrect credentials or Server denied connection";
                        return;
                    }

                } catch (Exception e) {
                    return_value = "Exception occurred: " + e.getMessage();
                }
            }

            public String readUntil(String pattern, boolean checkForAvailableStream) {
                StringBuffer sb = null;
                try {
                    char lastChar = pattern.charAt(pattern.length() - 1);
                    sb = new StringBuffer();
                    char ch = (char) in.read();
                    while (true) {
                        sb.append(ch);
                        if (ch == lastChar) {
                            if (sb.toString().endsWith(pattern)) {
                                return sb.toString();
                            }
                        }
                        if ((checkForAvailableStream) && (in.available() > 0)) {
                            ch = (char) in.read();
                        } else if (!checkForAvailableStream) {

                            ch = (char) in.read();
                        } else
                            break;
                    }
                } catch (Exception e) {
                }
                return sb.toString();
            }

            public void write(String value) {
                try {
                    out.write((value + "\r\n").getBytes("CP1252"));
                    out.flush();
                } catch (Exception e) {                                        return_value = "Exception occurred in sending command to Server: "
                            + e.getMessage();
                }
            }

            public void disconnect() {
                try {
                    telnet.disconnect();
                } catch (Exception e) {
                    "Exception occurred: " + e.getMessage());
                }
            }
        }
} 
```

# javascript - Jquery 语法错误，无法识别的表达式：

> ID：15338727
> 
> 赞同：21
> 
> 时间：2013-03-11T12:36:38.760
> 
> 标签：javascript, jquery, jquery-selectors

为什么我会收到此错误以及如何对其进行测试以使其不会损坏，我尝试检查 null 但显然这不起作用，谢谢。

请不要建议不要这样写 ID，因为我知道这是错误的，但这是可能的。

```
var jsonTest = [
  {
    "myId": "''''''\"\"\"\"'''''''''''''\"#####$'''''",
  }
];

alert(jsonTest[0].myId); 
// Works - alerts the myId

$('#' + jsonTest[0].myId ).length; 
// Error: Syntax error, unrecognized expression:
// #''''''""""'''''''''''''"#####$''''' 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-11T12:39:13.860

jQuery 使用此代码来检测基于 id 的选择器：

```
characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+"
...
"ID": new RegExp( "^#(" + characterEncoding + ")" ), 
```

此正则表达式失败`"''''''\"\"\"\"'''''''''''''\"#####$'''''"`或更简单地失败`"'"`。

查询引擎是有限的，对于如此简洁的语言和如此宽松的 id 有效性规则来说，这并不奇怪。它无法处理任何有效的 id。

如果您确实需要能够处理任何类型的有效 id，请使用

```
$(document.getElementById(jsonTest[0].myId)) 
```

事实上，你永远不应该使用`$('#'+id)`它，因为它只是为相同的操作添加了一个无用（而且有点危险）的解析层。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T13:07:12.450

如果我理解您的问题，您的 ID 包含特殊字符。您基本上[需要对它们进行转义，](http://api.jquery.com/category/selectors/)以便将它们视为文字字符而不是查询选择器：

> 要使用任何元字符（例如 !"#$%&'()*+,./:;<=>?@[]^`{|}~ ）作为名称的文字部分，它必须用两个反斜杠转义：\。例​​如，id="foo.bar" 的元素可以使用选择器 $("#foo\.bar")。

...在这种情况下，您还需要为字符串定界符 . 增加一个额外的转义级别`"`。这很疯狂，但这有效：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><title></title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript"><!--
jQuery(function($){
    console.log( $("#" + "\\'\\'\\'\\'\\'\\'\\\"\\\"\\\"\\\"\\'\\'\\'\\'\\'\\'\\'\\'\\'\\'\\'\\'\\'\\\"\\#\\#\\#\\#\\#\\$\\'\\'\\'\\'\\'").length );
});
//--></script>
</head>
<body>

<div id="''''''&quot;&quot;&quot;&quot;'''''''''''''&quot;#####$'''''">Foo</div>

</body>
</html> 
```

**编辑：**当然，dystroy 的答案——省略 jQuery 选择引擎并使用`getElementByID()`——更实用。jQuery 手册[链接了一个有趣的博客条目](http://mathiasbynens.be/notes/css-escapes)，其中涵盖了此技术和其他相关技术：

> document.getElementById() 和类似的函数如 document.getElementsByClassName() 可以只使用未转义的属性值，就像它在 HTML 中使用的方式一样。当然，您必须对任何引号进行转义，以便最终得到一个有效的 JavaScript 字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-30T17:54:52.267

W3C 为此定义了一个新函数：[`CSS.escape()`](https://mathiasbynens.be/notes/css-escapes). 在您的示例代码中，它看起来像这样：

```
var jsonTest = [
  {
    "myId": "''''''\"\"\"\"'''''''''''''\"#####$'''''",
  }
];

$('#' + CSS.escape(jsonTest[0].myId)).length; // Works 
```

浏览器尚不支持它，但同时有一个 polyfill 库可供您使用： [https ://github.com/mathiasbynens/CSS.escape](https://github.com/mathiasbynens/CSS.escape)

我在我的项目中成功使用了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-11T10:39:57.040

**从 jquery 1.6 升级到 jquery 3.6**时我遇到了这个错误。我在**flexigrid 库**中遇到了这个错误。如上面的答案所述，此问题的解决方法很简单。

**如果需要在网格中显示或进行进一步处理，**您需要转义所有特殊字符并取消转义它们。****

 **代码如下所示：

```
var str = "abc@abc.com";

//make str value to, basically escape all special chars : "abc/@abc/.com"
str = str.replace(/[.*+?^$@%{}()|[\]\\]/g, '\\$&');

//do some processing

//revert str value to: "abc@abc.com"
str = str.replaceAll("\\", ""); 
```**

# android - android MeidaRecorder 中的 Moov atom 记录数据

> ID：15338729
> 
> 赞同：6
> 
> 时间：2013-03-11T12:36:42.137
> 
> 标签：android, ffmpeg, mp4

我有个问题：

我在我的 Android 应用程序中使用 MediaRecorder 从相机记录数据。我将它保存在套接字中，而不是文件中。该数据的长度可能不同。在套接字连接的另一端，我将其保存在文件中。连接可能会在任何意外时刻中断。因此，在 android 套接字断开连接后，我尝试使用 ffmpeg 解码接收到的数据。但据我了解，它无法在此文件中找到 moov 原子。我已经阅读了一些关于 moov 的信息，所以我认为 MediaRecorder 将 moov atom 放在文件末尾。但如果录制中断，则跳过写入 moov atom。

我还读到对于长度未知的数据（渐进式加载、流式传输），可以在文件开头写入 moov atom。

如何将我自己的 moov 数据写入流中？我可以为此使用 MediaRecorder 吗？还是必须手动进行？如何生成有效的 moov 数据？如果有人已经解决了这个问题，请给我建议..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T15:13:01.503

“moov”原子包含播放器解码媒体所需的信息。对于许多格式，没有 moov atom 的 mp4 或 mov 文件就是垃圾。

在大多数情况下，moov 会附加在末尾。这是因为无法提前预测 moov 原子的内容。如果它位于开始位置并不断更新，则没有什么不同。后者的好处是，如果流中断或停止，文件仍然可以播放。换句话说，简单地将它放在开头不会对您有帮助，因为您仍然需要持续更新它。

不幸的是，在处理媒体方面，Android 与 iOS 相去甚远。如果您找到使用 Android 库解决此问题的方法，我会感到惊讶。我特别没有 MediaRecorder 的经验，但 MediaCodec 类对此没有提供任何内容，在简要查看 MediaRecorder 文档后，这里看起来是同样的问题。

现在... h264 流可以在没有 mp4 标头的情况下播放，因为它包含它自己的一些元数据。这将允许套接字另一端的应用程序仍然使用数据。您可以为此使用适用于 Android 的 ffmpeg。只需将字节写入扩展名为 .h264 的文件，然后在传输完成后将其多路复用为 mp4 文件。如果你有音频，同样如此。

编辑：如果您无法发送原始 h264 数据，那么您会在 mp4 文件的“mdat”原子中找到它，但您需要单独处理音频，否则您将无法分辨音频和视频分开。

# sql - SQL 2008 旧表上未找到 Grails 表错误

> ID：15338737
> 
> 赞同：0
> 
> 时间：2013-03-11T12:36:57.840
> 
> 标签：sql, grails, legacy

我正在尝试将一个新的 Grails 项目链接到一个预先存在的 SQL Server 2008 数据库，问题是当我尝试列出/更新或没有任何工作时，我得到一个错误读取

> 未找到表“TEST_EXEC_QUEUE”；SQL语句：选择前10个this_.id为id0_0_，this_.Env为Env0_0_，this_.Priority为Priority0_0_，this_.State为State0_0_，this_.subSystem为subSystem0_0_，this_.system为system0_0_，this_.test_scenario_id为test7_0_0_ from test_exec_queue this_ [42102-164]

我的 datasource.groovy 文件是：-

```
dataSource {
    pooled = false
    driverClassName = "net.sourceforge.jtds.jdbc.Driver"
    dialect = "org.hibernate.dialect.SQLServerDialect"
    }

hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}

// environment specific settings
    development {
        dataSource {
            dbCreate = "update"
            url = "jdbc:jtds:sqlserver://UKSQL08;databaseName=Selenium"
        }
    } 
```

域文件如下，有人有什么想法吗...？

```
package testexecqueue

class TestExecQueueCheck {

    static constraints = {
        test_scenario_id(blank:false)
        myPriority()
        myState()
        myEnv()
        system()
        subSystem()
    }

    static mapping = {
        table "test_exec_queue"
        version false
        columns{

            test_scenario_id column:"test_scenario_id"
            myPriority column:"Priority"
            myState column:"State"
            myEnv column:"Env"
            system column:"system"
            subSystem column:"subSystem"
        }
    }

    Integer test_scenario_id
    Integer myPriority
    String myState
    String myEnv
    String system
    String subSystem
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:44:24.867

您的 TestExecQueueCheck 域中没有 id。将该字段重命名`test_scenario_id`为`id`. 它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:19:12.697

这可能不是答案，但我发现一旦我指定了一个实际帐户并移回 JDBC 连接，问题就消失了，所以它与 Windows 服务帐户/JTDS 有关，我还没有进一步调查......我使用 sqljdbc4 的数据源现在如下所示，并且工作正常...

```
dataSource {
    pooled = true
    driverClassName = "com.microsoft.sqlserver.jdbc.SQLServerDriver"
}

hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}

// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = 'update' // one of 'create', 'create-drop','update'
            url = "jdbc:sqlserver://localhost;database=TestDB"
    //      databaseName = "..."
        username = "test"
        password = "test"
            dialect = org.hibernate.dialect.SQLServerDialect
            //logSql = true
        }
    } 
```

# android - gridview 的自定义适配器记住格式化选项

> ID：15338742
> 
> 赞同：0
> 
> 时间：2013-03-11T12:37:10.990
> 
> 标签：android, android-gridview, custom-adapter

我在 android 应用程序中有一些用于 gridview 的自定义适配器。当我第一次启动应用程序时一切正常，但是当我单击按钮并调用函数 refreshCalendar() 时，适配器“记住”文本属性（字体：BOLD）。我检查（列表）calendarCells 并且没有错误。

```
public class FCalCellsAdapter extends BaseAdapter{

private static final String TAG = "FCalCellsAdapter";

private Context context;
private LayoutInflater inflater;

private List<FCalCell> calendarCells;

public FCalCellsAdapter(Context context, List<FCalCell> calendarCells){
    this.context = context;
    this.calendarCells = calendarCells;

    this.inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public void refreshCalendarCells(List<FCalCell> calendarCells){
    this.calendarCells = calendarCells;
}

@Override
public int getCount() {
    return calendarCells.size();
}

@Override
public Object getItem(int position) {
    return calendarCells.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final Holder holder;
    View v = convertView;

    if(convertView == null){
        holder = new Holder();
        v = inflater.inflate(R.layout.gridview_item_cell, null);

        holder.cellBackground = (ImageView) v.findViewById(R.id.cell_background);
        holder.cellDay = (TextView) v.findViewById(R.id.cell_day);
        holder.cellPeriodDay = (TextView) v.findViewById(R.id.cell_period_day);

        v.setTag(holder);
    }else{
        holder = (Holder) v.getTag();
    }

    if(calendarCells.get(position).getDayType() == FCalCell.DAY_TYPE_ACTIVE_MONTH){
        holder.cellBackground.setBackgroundResource(R.drawable.background_cell_white);
    }else if(calendarCells.get(position).getDayType() == FCalCell.DAY_TYPE_TODAY){
        holder.cellBackground.setBackgroundResource(R.drawable.background_cell_today);
        holder.cellDay.setTypeface(Typeface.DEFAULT_BOLD);
    }else{
        holder.cellBackground.setBackgroundResource(R.drawable.background_cell_gray);
    }

    holder.cellDay.setText(calendarCells.get(position).getNumberOfDay());
    holder.cellPeriodDay.setText(String.valueOf(calendarCells.get(position).getPeriodDayNumber()));

    return v;
}

private class Holder{
    private ImageView cellBackground;
    private TextView cellDay;
    private TextView cellPeriodDay;
}

} 
```

refreshCalendar（主要活动）

```
public void refreshCalendar(){
    List<FCalCell> calendarCells = FCal.getListOfCalendarCells(actualMonth,this);
    adapter.refreshCalendarCells(calendarCells);
    adapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:06:02.503

您需要`dayCell`在 if else 语句中设置所有情况下的字体。s将`TextView`被重用，他们会记得加粗。如果您的表格变得比屏幕上的大小更大以便可以滚动，您将遇到同样的问题。

像这样的东西：

```
if(calendarCells.get(position).getDayType() == FCalCell.DAY_TYPE_ACTIVE_MONTH){
    holder.cellBackground.setBackgroundResource(R.drawable.background_cell_white);
    holder.cellDay.setTypeface(Typeface.DEFAULT);
}else if(calendarCells.get(position).getDayType() == FCalCell.DAY_TYPE_TODAY){
    holder.cellBackground.setBackgroundResource(R.drawable.background_cell_today);
    holder.cellDay.setTypeface(Typeface.DEFAULT_BOLD);
}else{
    holder.cellBackground.setBackgroundResource(R.drawable.background_cell_gray);
    holder.cellDay.setTypeface(Typeface.DEFAULT);
} 
```

# umbraco - 富文本编辑器和插入图像出现错误

> ID：15338746
> 
> 赞同：2
> 
> 时间：2013-03-11T12:37:32.970
> 
> 标签：umbraco

当我在富文本编辑器中单击“插入图片”时，出现的框显示服务器错误...（见下文）

```
 Server Error in '/' Application.

Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

[No relevant source lines]

Source File: c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\9859ef3d\cb984e77\App_Web_uploadmediaimage.ascx.c3c18f9f.sp-vjjqb.0.cs    Line: 0 

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   umbraco.cms.businesslogic.datatype.DataTypeDefinition.GetByDataTypeId(Guid DataTypeId) +77
   umbraco.controls.Images.UploadMediaImage..ctor() +88
   ASP.umbraco_controls_images_uploadmediaimage_ascx..ctor() in c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\9859ef3d\cb984e77\App_Web_uploadmediaimage.ascx.c3c18f9f.sp-vjjqb.0.cs:0
   ASP.umbraco_plugins_tinymce3_insertimage_aspx.__BuildControlMediaUploader() in c:\SequreDev\SQDev\Umbraco\plugins\tinymce3\insertImage.aspx:187
   ASP.umbraco_plugins_tinymce3_insertimage_aspx.__BuildControlpane_upload() in c:\SequreDev\SQDev\Umbraco\plugins\tinymce3\insertImage.aspx:186
   ASP.umbraco_plugins_tinymce3_insertimage_aspx.__BuildControlForm1() in c:\SequreDev\SQDev\Umbraco\plugins\tinymce3\insertImage.aspx:150
   ASP.umbraco_plugins_tinymce3_insertimage_aspx.__BuildControlTree(umbraco_plugins_tinymce3_insertimage_aspx __ctrl) in c:\SequreDev\SQDev\Umbraco\plugins\tinymce3\insertImage.aspx:1
   ASP.umbraco_plugins_tinymce3_insertimage_aspx.FrameworkInitialize() in c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\9859ef3d\cb984e77\App_Web_insertimage.aspx.43b758d9.m5dvbuf5.0.cs:0
   System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +71
   System.Web.UI.Page.ProcessRequest() +268
   System.Web.UI.Page.ProcessRequest(HttpContext context) +166
   ASP.umbraco_plugins_tinymce3_insertimage_aspx.ProcessRequest(HttpContext context) in c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\9859ef3d\cb984e77\App_Web_insertimage.aspx.43b758d9.m5dvbuf5.0.cs:0
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +624
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +269

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:47:47.737

我发现这个问题可能是由损坏的数据类型引起的。看看这个 Umbraco 表格帖子：

[http://our.umbraco.org/forum/using/ui-questions/39103-Problem-with-Rich-Text-Editor-and-Inserting-Images](http://our.umbraco.org/forum/using/ui-questions/39103-Problem-with-Rich-Text-Editor-and-Inserting-Images)

我发现当我一次检查一个数据类型时，301 重定向会引发错误。当我删除它时，RTE 中的媒体选择器再次显示

我希望这有帮助。

大号

# ruby-on-rails - rails中的活动记录postgresql适配器错误

> ID：15338748
> 
> 赞同：5
> 
> 时间：2013-03-11T12:37:35.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, gem

这是我的问题。我正在尝试创建一个博客。我运行'rails new blog'。在我尝试“rake db:create”之前，一切都很好。它返回一个错误：

```
rake aborted!
Please install the postgresql adapter: `gem install activerecord-postgresql-adap
ter` (pg is not part of the bundle. Add it to Gemfile.) 
```

当我尝试安装 pg 适配器时，我得到了这个：

```
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing activerecord-postgresql-adapter:
    ERROR: Failed to build gem native extension.

F:/Ruby200-x64/bin/ruby.exe extconf.rb
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
 checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may 
```

需要配置选项。

我的宝石文件：

```
 source 'https://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem "pg"

# Gems used only for assets and not required
# in production environments by default.
 group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:10:18.017

你有安装 Postgres 吗？如果是这样，请确保 pg_config.exe 在 PATH 中。或者使用`--with-pg-config`或`–with-pg-dir`键：

```
gem install pg --with-pg-config=<path> 
```

请参阅[https://github.com/ged/ruby-pg/blob/master/README-Windows.rdoc中的详细信息](https://github.com/ged/ruby-pg/blob/master/README-Windows.rdoc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:34:17.177

卸载`pg`gem，然后`postgres-pr`为 windows安装

从 Gemfile 中删除：

```
gem "pg" 
```

并输入：

```
gem "postgres-pr" 
```

并运行：

`bundle install`或者`gem install postgres-pr`或者你正在安装 gems

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:15:16.187

您缺少 postgresql 的库。你可以像这样安装它：

sudo apt-get install libpq-dev

也许也看看[这个老问题](https://stackoverflow.com/questions/11092807/installing-postgresql-on-ubuntu-for-ruby-on-rails)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-11T19:12:16.803

我遇到了同样的错误，我通过设置正确的文件权限来解决`postgresql_adapter.rb`

```
cd [YOUR_ACTIVERECORD_GEM_PATH]/lib/active_record/connection_adapters
chmod 644 postgresql_adapter.rb 
```

* * *

不知何故，我的计算机中的文件权限`postgresql_adapter.rb`已损坏...

[![在此处输入图像描述](../Images/219c04d54c858653d5a700669710873f.png)](https://i.stack.imgur.com/3xBXV.jpg)

# php - index.php 和 Magento

> ID：15338754
> 
> 赞同：2
> 
> 时间：2013-03-11T12:37:50.680
> 
> 标签：php, .htaccess, magento, url-rewriting

嗨，我找到了我正在寻找的答案，已设法将 Web 服务器重写设置为是，现在我的网站显示所有没有 index.php 的 URL，所以日子过得愉快。

我的问题和疑问是为什么当我从我的网站输入带有 index.php 的网址时，它会显示带有 index.php 的网址，并且不会重定向到没有 index.php 的网址。这让我发疯，有谁知道如何解决这个问题。

所以如果你去这个网址：[http](http://www.glamairsupplies.co.uk) ://www.glamairsupplies.co.uk你可以看看你是否浏览了商店 index.php 根本没有使用。

URL 显示如下：

[http://www.glamairsupplies.co.uk/abrasives-products.html](http://www.glamairsupplies.co.uk/abrasives-products.html)

但是，如果您将 index.php 添加到 url 并输入： [http ://www.glamairsupplies.co.uk/index.php/abrasives-products.html](http://www.glamairsupplies.co.uk/index.php/abrasives-products.html)

它对每个页面都这样做，我认为我因重复内容而受到谷歌的惩罚。我找不到我需要做什么来删除它。我已经尝试了几个不同的论坛帖子来编辑 htaccess 文件来做我想做的事，但我就是做不到。

请问有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:48:39.150

这是正常行为。
Magento 只是尽力解析 URL。
谷歌不会因重复内容而对您进行处罚。
你希望`http://glamairsupplies.co.uk/index.php/abrasives-products.html`展示什么？

错误页面或 404？你认为这是一个正确的行为吗？

你应该保持原样。如果没有更多的地方生成包含“index.php”的链接，谷歌很快就会“忘记”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T08:44:05.510

最初我对“Web Server Rewrites”感到困惑。为了清楚起见，

Admin > System > Configuration > Web > Search Engines Optimization > Use Web Server Rewrites 设置为 yes

进而，

系统 > 缓存管理 > 刷新 Magento 缓存

# magento - magento 例程 url 的

> ID：15338755
> 
> 赞同：0
> 
> 时间：2013-03-11T12:37:59.757
> 
> 标签：magento

我刚刚开始magento开发。因此，作为第一步，我安装了两个 magento 副本，仅在我的 /var/www 目录中由根名称分隔。另外，我使用了来自 magento 网站的样本数据。

现在，我在其中一个magento安装中做了一些简单的模块开发，比如magento1，当我移动到magento的另一个安装magento2时，也清理了数据库，我无法加载新的magento url浏览器。有些东西将我重定向到以前的 magento 安装目录（magento1）。

为什么会这样？而且，解决这个问题的方法是什么？

提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:51:14.933

Ok, managed to do it as Menno suggested + cleaning the cache as i mentioned in the comment..

# python - 在 Python 中将十六进制字符串拆分为块

> ID：15338758
> 
> 赞同：3
> 
> 时间：2013-03-11T12:38:01.177
> 
> 标签：python, string, hex

我在 Python 中有这部分代码：

```
for line in response.body.split("\n"):
    if line != "": 
        opg = int(line.split(" ")[2])
        opc = int(line.split(" ")[3])
        value = line.split(" ")[5]
        if command == 'IDENTIFY':
            if opg==opcodegroupr and opc==opcoder:
                print line
                ret['success'] = "IDENTIFY: The value is %s " % (value)
                self.write(tornado.escape.json_encode(ret))
                self.finish() 
```

变量 'line' 是这样制作的：

```
1363005087 2459546910990453036 151 88 4 0x15000000 
```

每个字段都是整数，但不是最后一个字段。最后一个字段是一个十六进制数。

我会采用这个十六进制数字并在每个字节拆分字节之后。例如，我会将 0x15000000 拆分为 15 00 00 00。

我能怎么做？我尝试使用 value.encode("hex") 但不能正常工作... value 是一个字符串？我不知道如何考虑这个变量..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:49:21.953

如果十六进制值已经是文本，则无需再进行任何转换：

```
>>> text = "0x15000000"
>>> text = text[2:]  # remove literal type prefix
>>> text = text.zfill(len(text) + len(text) % 2)  # pad with zeros for even digits
>>> ' '.join(text[i: i+2] for i in range(0, len(text), 2))  # split into 2-digit chunks
'15 00 00 00' 
```

（根据[@tobias-k](https://stackoverflow.com/users/1639625/tobias-k)关于零填充的建议进行编辑）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:51:57.600

试试这个：

```
def split_hex(value):
    value = value[2:] if len(value) % 2 == 0 else "0" + value[2:]
    return " ".join(value[i:i+2] for i in range(0, len(value), 2)) 
```

请注意，如果十六进制数的位数为奇数，我们必须添加前导零才能将其正确拆分为字节。

```
print split_hex("0x1234567")
>>> 01 23 45 67 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:49:42.703

```
value = line.split(" ")[5] 
```

`value`是一个字符串，因为您没有转换它。您可以使用 将十六进制字符串制作成 int `int(value, 16)`，例如

```
>>> int('0x15000000', 16)
352321536 
```

# yii - 使用 CHtml::ajaxLink 将表单数据作为传统 Post 方法发送

> ID：15338765
> 
> 赞同：0
> 
> 时间：2013-03-11T12:38:27.887
> 
> 标签：yii

`CHtml::ajaxLink`如果浏览器 JavaScript 被禁用，表单可以作为传统的 POST 方法发送吗？

或者为此必须在事件上`submitButton`与片段`'return false;'`JavaScript一起使用`submit`？

我想要的是：`Link`用于发送表单数据`Ajax`和传统`Post`方法（`Post`禁用浏览器 JavaScript 时的传统方法）。有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:10:16.773

您可以创建一种后备：

```
<!-- at start Hide the ajax link -->
<style type="text/css">
    #ajax-form {display: none;}
</style> 
```

然后你把你的 div 包含 ajax 表单：

```
<div id="ajax-form">
    <?php  //Ajax code ?>
</div> 
```

如果未启用 javascript，将执行的代码：

```
<noscript>
    <?php echo
    CHtml::beginForm('', 'post') . 
    CHtml::hiddenField('field', $model->id) .
    CHtml::submitButton('button') . 
    CHtml::endForm(); 
    ?>
</noscript> 
```

最后，如果启用了 javascript，则包含将显示 ajax div 的 javascript：

```
<script type="text/javascript">
    document.write('<style type="text/css">#ajax-form {display: inline;}</style>');
</script> 
```

# android - 创建新的 Android MainActivity 的问题

> ID：15338769
> 
> 赞同：1
> 
> 时间：2013-03-11T12:38:31.503
> 
> 标签：android, android-manifest, android-xml, main-activity

我是 Android 编程新手，正在尝试为我的应用创建一个新的 Main Activity（取自 Android 教程网站）。我原来的主要活动被称为“MainActivity”。我想成为我的主要活动的新活动称为“主页”，它应该包含一个在单击时产生“MainActivity”的按钮。我不确定我应该在清单中包含关于新页面“主页”、homepage.xml 和按钮的信息的内容或位置。具体代码将不胜感激。

主页：

```
package com.myphoneapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class HomePage extends Activity {

    private Button ScheduleBtn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homepage);

         ScheduleBtn = (Button) findViewById(R.id.home_btn);

        ScheduleBtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent myIntent = new Intent(HomePage.this, MainActivity.class);
                HomePage.this.startActivity(myIntent);

            }
        });
    }   

} 
```

主页.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button 

    android:layout_width="wrap_content" 

    android:layout_height="wrap_content" 

    android:text="Welcome to ClearLight" 

    android:id="@+id/home_btn"

    />

</LinearLayout> 
```

主要活动：

```
package com.myphoneapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

    public class MainActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /** Called when the user clicks the Send button */
    public void sendMessage(View view) {
        // Do something in response to button
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

    } 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myphoneapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.myphoneapp.MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.myphoneapp.DisplayMessageActivity"
            android:label="@string/title_activity_display_message"
            android:parentActivityName="com.example.myphoneapp.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.myphoneapp.MainActivity" />
        </activity>
        <activity
            android:name="com.myphoneapp.HomePage"
            android:label="@string/homepage" android name="MainActivity"
            android:parentActivityName="com.example.myphoneapp.MainActivity" >

            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.myphoneapp.MainActivity" />
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:46:25.410

要创建`HomePage`您的第一个活动，请编辑您的清单文件，使其具有`action.MAIN`. 而且您不必在 Manifest 文件中定义任何有关布局的内容。只有活动声明（您已经拥有）

所以你的新清单文件看起来像

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.myphoneapp.MainActivity"
            android:label="@string/title_activity_main" >

        </activity>
        <activity
            android:name="com.myphoneapp.DisplayMessageActivity"
            android:label="@string/title_activity_display_message"
            android:parentActivityName="com.example.myphoneapp.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.myphoneapp.MainActivity" />
        </activity>
        <activity
            android:name="com.myphoneapp.HomePage"
            android:label="@string/homepage" 
            android:parentActivityName="com.example.myphoneapp.MainActivity" >

            <!-- Move the intent filter to HomePage -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.myphoneapp.MainActivity" />
        </activity>
    </application>

</manifest> 
```

对于启动 mainActivity 的按钮，您已经在`HomePage.java`

```
ScheduleBtn = (Button) findViewById(R.id.home_btn);
ScheduleBtn.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Intent myIntent = new Intent(HomePage.this, MainActivity.class);
        HomePage.this.startActivity(myIntent);
    }
}); 
```

此代码（取自您`HomePage.java`从意图中打开的 MainActivity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:55:46.943

像这样更改清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
   <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.myphoneapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.myphoneapp.MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".HomePage"

    </activity>
</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:56:58.033

在清单文件中，您的主页活动必须是您的主要活动，因此您的清单应如下所示：

```
 <activity
        android:name="com.myphoneapp.MainActivity"
        android:label="@string/homepage" android name="MainActivity"
        android:parentActivityName="com.example.myphoneapp.MainActivity" >

        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myphoneapp.MainActivity" />
    </activity>
<activity
        android:name="com.myphoneapp.HomePage"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# android - Android中的进程对话框

> ID：15338773
> 
> 赞同：0
> 
> 时间：2013-03-11T12:38:34.507
> 
> 标签：android, android-asynctask

由于我是 android 中这个“异步任务”概念的新手，我搜索了很多帖子并实现了。在我的应用程序中`when opening the application i am fetching lot of images from url,`，它`delaying`有很多要打开的。所以我有一个想法，在打开应用程序时有一个活动。我有尝试了以下内容：

我的活动代码：

```
 Gallery glly;
     public void onCreate(Bundle savedInstanceState) 
        { 

            this.requestWindowFeature(Window.FEATURE_NO_TITLE);
            super.onCreate(savedInstanceState);
            setContentView(R.layout.galleryview);   

            new RestoreDBTask().execute();
        }
      class RestoreDBTask extends AsyncTask <Void, Void, Nodelist>
        {
            private ProgressDialog dialog;
            Context ctx;

            public RestoreDBTask( Context ctx) {

                this.ctx = ctx;

            }

            @Override
            protected void onPreExecute()
            {
                dialog = ProgressDialog.show(
                    ctx,"Please Wait","Loading...", true);
            }

            @Override
            protected Nodelist doInBackground(Void... params)
            {
                 final String URLHeading = "http://m.indiatoday.in/xml/stories/sections_listing.xml";

                 Heading parser = new Heading();       
                 String xmldata = parser.getXmlFromUrl(URLHeading);       
                 Document domelement = parser.getDomElement(xmldata);       
                 NodeList node = domelement.getElementsByTagName("item");  

                     context.getInstance().setAppVariable("flag", "Home");
                 adapter=new GalleryviewAdapter(NewspapperActivity.this);
//                  GalleryviewAdapter adapter= new GalleryviewAdapter();
                 adapter.getelement("http://m.bvdjujd.in/xml/stories/jusdjhs.xml",1);   

    return node;

    }
     @Override
            protected void onPostExecute(String result)
            {
Element e0 = (Element) node.item(0);
                    txt1.setText(parser.getValue(e0, "sectionname"));

                    Element e1 = (Element) node.item(1);
                    txt2.setText(parser.getValue(e1, "sectionname"));

                    Element e2 = (Element) node.item(2);
                    txt3.setText(parser.getValue(e2, "sectionname"));

                    Element e3 = (Element) node.item(3);
                    txt4.setText(parser.getValue(e3, "sectionname"));

                    Element e4 = (Element) node.item(4);

                    txt5.setText(parser.getValue(e4, "sectionname"));

  glly.setAdapter(adapter);
           DisplayMetrics metrics1 = new DisplayMetrics(); 
           getWindowManager().getDefaultDisplay().getMetrics(metrics1); 
           MarginLayoutParams mlp1 = (MarginLayoutParams) glly.getLayoutParams(); 
           mlp1.setMargins(-(metrics1.widthPixels/2+40),mlp1.topMargin,mlp1.rightMargin, mlp1.bottomMargin );

                dialog.dismiss();
            }

    } 
```

我的日志猫：

```
03-12 10:24:08.430: I/Process(487): Sending signal. PID: 487 SIG: 9
03-12 10:24:22.140: D/dalvikvm(511): GC freed 2643 objects / 197184 bytes in 168ms
03-12 10:24:24.800: I/MemoryCache(511): MemoryCache will use up to 6.0MB
03-12 10:24:24.810: W/dalvikvm(511): threadid=15: thread exiting with uncaught exception (group=0x4001b188)
03-12 10:24:24.845: E/AndroidRuntime(511): Uncaught handler: thread AsyncTask #1 exiting due to uncaught exception
03-12 10:24:24.932: E/AndroidRuntime(511): java.lang.RuntimeException: An error occured while executing doInBackground()
03-12 10:24:24.932: E/AndroidRuntime(511):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-12 10:24:24.932: E/AndroidRuntime(511):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-12 10:24:24.932: E/AndroidRuntime(511):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-12 10:24:24.932: E/AndroidRuntime(511):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-12 10:24:24.932: E/AndroidRuntime(511):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-12 10:24:24.932: E/AndroidRuntime(511):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-12 10:24:24.932: E/AndroidRuntime(511):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-12 10:24:24.932: E/AndroidRuntime(511):  at java.lang.Thread.run(Thread.java:1096)
03-12 10:24:24.932: E/AndroidRuntime(511): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
03-12 10:24:24.932: E/AndroidRuntime(511):  at android.os.Handler.<init>(Handler.java:121)
03-12 10:24:24.932: E/AndroidRuntime(511):  at com.newspapper.ImageLoader.<init>(ImageLoader.java:29)
03-12 10:24:24.932: E/AndroidRuntime(511):  at com.newspapper.GalleryviewAdapter.<init>(GalleryviewAdapter.java:52)
03-12 10:24:24.932: E/AndroidRuntime(511):  at com.newspapper.NewspapperActivity$RestoreDBTask.doInBackground(NewspapperActivity.java:569)
03-12 10:24:24.932: E/AndroidRuntime(511):  at com.newspapper.NewspapperActivity$RestoreDBTask.doInBackground(NewspapperActivity.java:1)
03-12 10:24:24.932: E/AndroidRuntime(511):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-12 10:24:24.932: E/AndroidRuntime(511):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-12 10:24:24.932: E/AndroidRuntime(511):  ... 4 more
03-12 10:24:25.000: I/dalvikvm(511): threadid=7: reacting to signal 3
03-12 10:24:25.214: I/dalvikvm(511): Wrote stack trace to '/data/anr/traces.txt' 
```

请帮我解决这个问题。也帮我看看我是否做对了..提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:46:04.613

你得到

> 对于类型 RestoreDBTask，方法 findViewById(int) 未定义

因为您正试图从 RestoreDBTask 类访问 UI 元素。您可以使用 Activity 上下文而不是 RestoreDBTask 解决此问题：

```
TextView txt1 = (TextView)Your_Activity_Name.this.findViewById(R.id.Text01);
TextView txt2 = (TextView)Your_Activity_Name.this.findViewById(R.id.Text02);
TextView txt3 = (TextView)Your_Activity_Name.this.findViewById(R.id.Text03);
//.... 
```

但是当您尝试运行当前应用程序时，您将收到以下错误：

> alledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图。

f为避免此错误，您将需要以下 Streps ：

**1.**首先从webservice里面获取数据`doInBackground`。

**2.**`NodeList node`从 `doInBackground`方法返回

**3.**最后获取 NodeList`onPostExecute`并进行 xml 解析，然后访问或更新 UI 元素

**例子 ：-**

```
 class RestoreDBTask extends AsyncTask <Void, Void, NodeList>
    {
    ///.. your code here.....
        @Override
        protected NodeList doInBackground(Void... params)
        {

           //....your code here..
           return node; 
         }
 @Override
        protected void onPostExecute(NodeList result)
        {
            // get data from result
             ....
            // access UI elements here add value to it
            TextView txt1 = (TextView)Your_Activity_Name.
                                           this.findViewById(R.id.Text01);
            TextView txt2 = (TextView)Your_Activity_Name.
                                           this.findViewById(R.id.Text02);
            ......
            dialog.dismiss();
        }
 } 
```

# ios - 如何在 PhoneGap/Cordova 上加载外部 URL 并启用 PushNotifications？

> ID：15338785
> 
> 赞同：6
> 
> 时间：2013-03-11T12:39:09.647
> 
> 标签：ios, cordova, push-notification

我想做的是制作一个 iOS PhoneGap/Cordova 应用程序，它唯一要做的就是加载一个外部 URL 并启用 PushNotifications。

看来我可以分开做，但不能一起做。

对于 PushNotifications，我使用了一个插件，它似乎工作得很好。

但是，当我尝试从 index.html 打开外部 URL 时，PushNotification 不起作用。

我正在使用本教程来启用 Push [iOS PhoneGap/Cordova Push](http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/)。

在我下载示例代码后，我试图使用这样的东西：

```
<!DOCTYPE html>
<html>
    <head>
        <title>InAppBrowser.addEventListener Example</title>

        <script src="cordova-2.5.0.js"></script>
        <script src="js/PushNotification.js"></script>
        <script src="js/index.js"></script>
        <script type="text/javascript" charset="utf-8">

            // Wait for Cordova to load
            //
            document.addEventListener("deviceready", onDeviceReady, false);

            // Cordova is ready
            //
            function onDeviceReady() {
                var ref = window.open('http://apache.org', '_blank', 'location=yes');
                ref.addEventListener('loadstart', function() { alert('start: ' + event.url); });
                ref.addEventListener('loadstop', function() { alert('stop: ' + event.url); });
                ref.addEventListener('exit', function() { alert(event.type); });
            }

            </script>
    </head>
    <body>
    </body>
</html> 
```

我包括启用推送所需的脚本 index.js 和 pushnotifications.js。

但我只能看到 URL 加载并且未启用推送。

如果我尝试此操作，则启用推送：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name = "format-detection" content = "telephone=no"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;" />
        <title>Push Notification Tester</title>
        <link href="css/index.css" rel="stylesheet" />
    </head>
    <body>
        <script src="cordova-2.5.0.js"></script>
        <script src="js/PushNotification.js"></script>
        <script src="js/index.js"></script>
        <script type="text/javascript">
            console.log("Test " + app);
            app.initialize();
            </script>

    </body>
</html> 
```

但当然在这个例子中，我没有使用我想要的外部 URL。那么我将如何在这段代码中添加外部 URL 函数以同时具有外部 url 和 push ？

有任何想法吗？

# sql - 如何使用groovy从过程中返回in out参数

> ID：15338789
> 
> 赞同：1
> 
> 时间：2013-03-11T12:39:11.737
> 
> 标签：sql, groovy

我按照这个例子使用 groovy 从过程中调用和返回参数：http: [//groovy.codehaus.org/Database+features](http://groovy.codehaus.org/Database+features)

在存储过程支持部分没有示例如何调用输出过程我尝试这个但输出仍然为空

```
sql.call(GString.EMPTY +  "{call " + schema + "." + name + "($par1,$par2)}"){ output ->  println output } 
```

更新：

在我的情况下，如果 par1 == null 那么它需要新条目（这是“在我们的参数中”的原因）所以我创建了这样的东西：

```
 if (par1 == null) {
        sql.call(GString.EMPTY +  "{call " + schema + "." + name + "(${Sql.VARCHAR},$par2)}"){  output_par1 -> println "par1: " + output_par1  }
    } else {
        sql.call(GString.EMPTY +  "{call " + schema + "." + name + "($par1,$par2)}"){}
        println "par1: " + par1
    } 
```

所以如果 par1 为 null 过程生成新值，然后是 println，如果 par1 不为 null，则只需 println 它。这对我有用，但如果有人想返回不为空的 out 参数，那么我仍然不知道如何编写它。

更新

真的什么都没有？7天后有赏金？我可能应该补充一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-23T22:50:14.110

问题在别处。你在这里有一个语法错误：

```
sql.call(GString.EMPTY +  "{call " + schema + "." + name + "($par1,$par2)}") 
```

字符串中的调用将永远不会被执行，因为 { 之前没有 $。相反，您的参数之前确实有毫无意义的 $ 。

```
sql.call(GString.EMPTY +  "${call " + schema + "." + name + "(par1,par2)}") 
```

是正确的。

与其他代码行相同。

# ios - 将 Iphone 与启用 wifi 的设备连接（示例加热器具有 IP 地址）

> ID：15338799
> 
> 赞同：0
> 
> 时间：2013-03-11T12:39:50.660
> 
> 标签：ios

嗨，我们可以将 Iphone 与启用 wifi 的设备连接（示例加热器具有 IP 地址）我搜索了很多，但找不到解决方案，有 EA 框架，但对于蓝牙只有 Game Kit 框架，我们可以将应用程序连接到应用程序，但不能从一个应用程序连接到未启用 IOS wifi 的设备具有 IP 地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:42:42.507

iOS 完全支持 GameKit 所利用的 Bonjour。外部配件框架专为经 Apple 认证的 iPhone 兼容配件而设计，您可能并非如此。Bonjour 可以在任何支持它的设备上运行。

[Apple在此处提供](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/NetServices/Introduction.html#//apple_ref/doc/uid/10000119i)了 Bonjour 的大量文档，但请注意，它是一个较低级别的协议，不一定要在公园里散步即可实施。

# jquery - 动态添加文件输入到表单

> ID：15338803
> 
> 赞同：-2
> 
> 时间：2013-03-11T12:39:56.497
> 
> 标签：jquery, forms, dynamic, input, attachment

我正在开发一个能够发送多个附件的电子邮件脚本。目前我只有 3 个文件输入，如下所示：

![翻译：选择一个文件/没有选择文件和 Verstuur = 发送](../Images/8561c1fc29ca513699d9e80ba74508e1.png)

*翻译：* `Select a file` **没有选择文件** *和 Verstuur =* `Send`

该脚本本身工作正常，它能够发送多个附件，但我希望只有一个文件输入来选择一个文件并创建一个按钮或一个链接，它将添加另一个文件输入，以便用户自己可以选择尽可能多的附件他需要。我在这个论坛和谷歌上搜索过，我发现使用 jquery 是可能的。我以前从未使用过jquery，我无法自己弄清楚如何去做。如果有人可以解释如何做到这一点或有任何提示，那就太好了。

我现在已经基本包含了这个h​​tml表单：

```
 <input type="file" name="attachment[]"><br/>
    <input type="file" name="attachment[]"><br/>
    <input type="file" name="attachment[]"><br/><br/>
    <input type="submit" value="Verstuur" name="submit" ><br/> 
```

***编辑***：我用[这个弄明白了](http://edrupler.com/jQuery%E2%80%93Dynamically-Adding-Form-Elements)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:49:50.663

看到这个：

```
$("#attach").on("change", " input[type=file]:last", function(){
    var item = $(this).clone(true);
    var fileName = $(this).val();
    if(fileName){
       $(this).parent().append("<br/>").append(item);
    }  
}); 
```

**[样本](http://jsfiddle.net/E4PWH/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:44:47.563

你试过了吗：

```
<input name="filesToUpload[]" id="filesToUpload" type="file" multiple="" /> 
```

# exception - 无法加载文件或程序集 CrystalDecisions.CrystalReports.Engine

> ID：15338805
> 
> 赞同：8
> 
> 时间：2013-03-11T12:39:58.943
> 
> 标签：exception, crystal-reports, filenotfoundexception

我的用户的终端运行 2 应用程序。其中一个我使用 VS 2005 和 Crystal Reports 捆绑版本构建了一个应用程序，另一个使用不同 Crystal Report 版本的外部产品。大约有 25 个用户使用相同的组合，但只有一个用户给出以下错误：

> 无法加载文件或程序集“CrystalDecisions.CrystalReports.Engine，版本 = 12.0.2000.0，Culture=neutral，PublicKeyToken = 692fbea5521e1304”或其依赖项之一。该系统找不到指定的文件。
> 
> 有关调用即时 (JIT) 调试而不是此对话框的详细信息，请参阅此消息的末尾。
> 
> **************异常文本**************System.IO.FileNotFoundException：无法加载文件或程序集“CrystalDecisions.CrystalReports.Engine，版本=12.0.2000.0，文化=中性，PublicKeyToken=692fbea5521e1304”或其依赖项之一。该系统找不到指定的文件。文件名：Com.Isi.Client.OMSClient.CrystalReportViewer.LoadRuntime() 中 Com.Isi.Client.OMSClient.CrystalReportViewer.LoadRuntime() 中的“CrystalDecisions.CrystalReports.Engine，版本=12.0.2000.0，Culture=neutral，PublicKeyToken=692fbea5521e1304” () 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state) 在 System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext,
> 
> 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。
> 
> **************加载的程序集**************mscorlib 程序集版本：4.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll -------- -------------------------------- AT 程序集版本：4.30.29.0 Win32 版本：4.30.29.0 代码库：文件：/ //C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/AT.exe ------------------------------ ---------- System.Windows.Forms 程序集版本：4.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL /System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll ---------------------------- ------------ System.Drawing 程序集版本：4.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll ---------- ------------------ 系统组装版本：4.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net /assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll -------------------------------- -------- System.Configuration 程序集版本：4.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Configuration /v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll ------------------------------------ ---- Com.Isi.Client.OMSClient.Core 程序集版本：4.30.29.1 Win32 版本：4.30.29.1 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Client.OMSClient.Core.DLL -------------- -------------- Com.Isi.Common.Shared 程序集版本：4.30.24.0 Win32 版本：4.30.24.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN %20Admin%20Terminal/Com.Isi.Common.Shared.DLL ------------------------------------ ---- System.Xml 程序集版本：4.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4 .0.0.0__b77a5c561934e089/System.Xml.dll ---------------------------------------- Microsoft.GeneratedCode 程序集版本：1.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0。0__b77a5c561934e089/System.Xml.dll ---------------------------------------- Syncfusion.Shared .Base 程序集版本：6.403.0.15 Win32 版本：6.403.0.15 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Syncfusion.Shared.Base.DLL -------- --------------------------------- Microsoft.GeneratedCode 程序集版本：1.0.0.0 Win32 版本：4.0.30319.17929 由: FX45RTMREL 代码库: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll ----------- ----------------------------- Com.Isi.Client.ClientUtils 程序集版本：4.30.24.0 Win32 版本：4.30.24.0 代码库： file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Client.ClientUtils.DLL --------- ------------------- Com.Isi.Common。工具程序集版本：4.30.24.0 Win32 版本：4.30.24.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Common.Tools.DLL ------ ---------------------------------- Com.Isi.Client.ODCConnection 程序集版本：4.30.24.0 Win32 版本： 4.30.24.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Client.ODCConnection.DLL ---------------- ------------------------ Com.Isi.Client.Trade.TradeService 程序集版本：2.2.0.0 Win32 版本：2.2.0.0 代码库：文件：/ //C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Client.Trade.TradeService.DLL ---------- ------------------ Com.Isi.Client.Interfaces 程序集版本：4.30.24.0 Win32 版本：4.30.24.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Client.Interfaces.DLL ---------------------------- ------------ Microsoft.GeneratedCode 程序集版本：1.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL /System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll -------------------------------- -------- System.Data 程序集版本：4.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.Data /v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll ---------------------- ---- System.Core 程序集版本：4.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System。核心/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll ---------------------------------- ----- Microsoft.GeneratedCode 程序集版本：1.0.0.0 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4。 0_4.0.0.0__b77a5c561934e089/System.Xml.dll ---------------------------------------- - Com.Isi.Common.Controls 程序集版本：4.30.24.0 Win32 版本：4.30.24.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Common.Controls。 DLL ---------------------------------------- Syncfusion.Tools.Windows 程序集版本：6.403 .0.15 Win32 版本：6.403.0.150 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll -- -------------------------------------- Com.Isi.Common.Controls 程序集版本：4.30。 24.0 Win32 版本：4.30.24.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Common.Controls.DLL ------------ ---------------------------- Syncfusion.Tools.Windows 程序集版本：6.403.0.15 Win32 版本：6.403.0.150 Win32 版本：4.0.30319.17929 构建者：FX45RTMREL 代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll -- -------------------------------------- Com.Isi.Common.Controls 程序集版本：4.30。 24.0 Win32 版本：4.30.24.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Common.Controls.DLL ------------ ---------------------------- Syncfusion.Tools.Windows 程序集版本：6.403.0.15 Win32 版本：6.403.0.1524.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Common.Controls.DLL ------------------ ---------------------- Syncfusion.Tools.Windows 程序集版本：6.403.0.15 Win32 版本：6.403.0.1524.0 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Com.Isi.Common.Controls.DLL ------------------ ---------------------- Syncfusion.Tools.Windows 程序集版本：6.403.0.15 Win32 版本：6.403.0.15
> 
> ## 代码库：file:///C:/Program%20Files/DirectFN/DirectFN%20Admin%20Terminal/Syncfusion.Tools.Windows.DLL
> 
> ************** JIT 调试**************要启用即时 (JIT) 调试，此应用程序或计算机的 .config 文件 (machine.config) 必须具有system.windows.forms 部分中设置的 jitDebugging 值。还必须在启用调试的情况下编译应用程序。
> 
> 例如：
> 
> 启用 JIT 调试后，任何未处理的异常都将发送到计算机上注册的 JIT 调试器，而不是由该对话框处理。

调查发现，在用户的GAC中，我发现Crystal Report的CrystalDecisions.CrystalReports.Engine有2个版本，分别是：13.0.2000.0 10.2.3600.0

这与我在其他用户的 GAC 中找到的组合相同。是什么触发了我的错误部分，即“系统找不到指定的文件”。确实没有指定版本下的文件，但是其他用户怎么在使用它。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-05T06:51:16.580

尝试为 .NET Framework 安装 SAP Crystal Reports 运行时引擎。这个对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T22:34:38.590

我知道这是一个老问题，但从未得到回答，我认为这可能会有所帮助。我在 .NET Framework 4.0 或更高版本中编译时使用水晶报表看到了这个问题。要修复它，您必须将 app.config 文件添加到您的项目并放入一个条目，告诉框架使用旧版加载器。请参阅[Crystal Reports 在 Visual Studio 2010 中不起作用](https://stackoverflow.com/questions/8697852/crystal-reports-are-not-working-in-visual-studio-2010)

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:49:47.867

查看[这篇](https://stackoverflow.com/questions/981142/dll-in-both-the-bin-and-the-gac-which-one-gets-used)关于何时使用 GAC vs BIN 文件夹的帖子。听起来其他用户可能在他们的 bin 文件夹中拥有它。我会先检查那里。或者在这种情况下，我可能会先把它放在那里，看看问题是否得到解决，因为您的用户现在无法工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-05T04:51:08.780

嘿，我也遇到了这个问题。在 windows 7 vs2010 中，但我从这个站点安装了这个 SAP Crystal Reports，Microsoft Visual Studio 更新和运行时的开发人员版本，现在它工作正常。链接在下面提到

[http://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-11T21:12:25.533

这是我收到错误的原因之一。我安装了 Crystal 报表 11 版本，GAC 中的程序集是 11.0.3300.0 （检查安装在您的机器上的版本 Windows+R => 程序集）。下面的屏幕截图/链接显示了我机器上安装的版本。

![在此处输入图像描述](../Images/f8d36c765d9c4bda5f61333686f9d6b9.png)

但是在我显然从服务器签出的代码的 web.config 中，正在寻找水晶报告版本 13.0.2000.0。

解决方案：根据我的 web.config 中安装的水晶报告版本重命名版本 PublickeyToken。这使我的代码运行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-01T20:39:48.613

我有同样的问题。异常消息的第一行表明您的项目正在寻找 Version = 12.0.2000.0。

每当我尝试重建时，Visual Studio (2015) 的输出窗口中的消息都会显示相同的问题，并提示我查看 preview.aspx 文件 (C:\Windows\Microsoft.NET\Framework\v4.6.81\ASP. NETClientFiles\crystalreportviewers13\preview.aspx）。

就我而言，我只是将引用从 12.0.2000.0 更改为 13.0.2000.0（GAC 中的版本）。

问题解决了。

希望有帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-24T21:47:50.557

这是经过测试的工作解决方案！

1.  你需要去这里[https://www.sap.com/cmp/td/sap-crystal-reports-visual-studio-trial.html](https://www.sap.com/cmp/td/sap-crystal-reports-visual-studio-trial.html)那里，你需要注册他们会给你链接下载

2.  下载链接将如下所示：

[![在此处输入图像描述](../Images/be988bbb26e8d866dffbc157cad9c4cf.png)](https://i.stack.imgur.com/PdfJa.png)

根据您的计算机选择“SAP Crystal Reports for Visual Studio (SP27) 运行时（64 位）”或“SAP Crystal Reports for Visual Studio (SP27) 运行时（32 位）”。

下载安装，安装前关闭VS，重新打开VS重新编译，错误就消失了！

3.  在我的情况下，下载文件名是这样的：

[![在此处输入图像描述](../Images/b8ee463cea42eca1f983356882090614.png)](https://i.stack.imgur.com/ZWzso.png)

完毕！

# c# - 如何在 asp .net mvc 2 视图中呈现绝对 URL

> ID：15338810
> 
> 赞同：1
> 
> 时间：2013-03-11T12:40:08.663
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

在下面的 AS:NET / Mono MVC2 方法中， [将视图呈现为字符串](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)用于创建 html 电子邮件正文。

Partiil 视图 Order.ascx 包含像

```
 <img width='20%' alt='' src='<%= Url.Action("Logo", "Store")%>' /> 
```

在电子邮件中，这些图像出现时没有站点地址`/Store/Logo`，因此不会出现图像。如何强制图像链接以绝对地址显示，`htttp:/Mysite.com/Store/Logo`或将站点基地址添加到 html 电子邮件正文，这是有帮助的。

使用 ASP.NET/Mono MVC2、.NET 3.5、jquery、jquery ui。

控制器动作方法：

```
 var s = RenderViewToString<OrderConfirm>("~/Views/Checkout/Order.ascx", order);

public class ControllerBase : Controller
{
    protected string RenderViewToString<T>(string viewPath, T model)
    { 
        ViewData.Model = model;
        using (var writer = new StringWriter())
        {
            var view = new WebFormView(viewPath);
            var vdd = new ViewDataDictionary<T>(model);
            var viewCxt = new ViewContext(ControllerContext, view, vdd, new TempDataDictionary(), writer);
            viewCxt.View.Render(viewCxt, writer);
            return writer.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:42:31.233

只需使用[`proper overload`](http://msdn.microsoft.com/en-us/library/dd505232%28v=vs.108%29.aspx)：

```
<%= Url.Action("Logo", "Store", null, "http") %> 
```

由于我们已经指定了协议，帮助程序将生成一个绝对 url。此外，如果您不想对其进行硬编码，则可以从当前请求中读取它：

```
<%= Url.Action("Logo", "Store", null, Request.Url.Scheme) %> 
```

Now this will work for both standard and HTTPS schemes depending on how the view is requested.

# magento - Magento 统一运费，不带小数点

> ID：15338812
> 
> 赞同：0
> 
> 时间：2013-03-11T12:40:13.587
> 
> 标签：magento, shipping

您好，我需要显示不带小数的统一运费如何做到这一点，请咨询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:17:11.487

在此之前的 Mage_Shipping_Model_Carrier_Flatrate 类的公共函数 collectRates 中
：

```
$method->setPrice($shippingPrice);
$method->setCost($shippingPrice); 
```

把这两行

```
$value=  explode(',', '$shippingPrice'); 
$shippingPrice=$value[0]; 
```

所以修改后的代码将是

```
$value=  explode(',', '$shippingPrice'); 
$shippingPrice=$value[0];
$method->setPrice($shippingPrice);
$method->setCost($shippingPrice); 
```

# java - apache tomcat java-web服务上的NoEndPointException（）

> ID：15338815
> 
> 赞同：1
> 
> 时间：2013-03-11T12:40:20.933
> 
> 标签：java, web-services, apache, tomcat, methods

为什么我得到这个端点异常：没有端点

这是代码：

```
public org.tempuri.UpdateInsuredDetails_Output recieveMDMDataInsuredDetails  (org.tempuri.UpdateInsuredDetails_Input l_input) throws java.rmi.RemoteException {
    if (super.cachedEndpoint == null) {
        logger.info("this is where the endpoint exception occurs:");
        throw new org.apache.axis.NoEndPointException();
    }
    //this is what the method do
} 
```

我发送给方法的对象：`l_input`- 不是 null ，但我仍然陷入`NoEndPointException()`- 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:43:48.187

假设您的问题与提到的问题相同：[java调用Web服务-没有端点异常](https://stackoverflow.com/questions/14975646/java-calling-web-service-no-endpoint-exception)

InsuredDetailsLocator **locator_MDP**是承载端点的变量，调用服务时不使用。此外，我对其他少数人提到的端点 URL 中的空间表示怀疑。

# c# - 1053 windows服务没有及时响应

> ID：15338818
> 
> 赞同：2
> 
> 时间：2013-03-11T12:40:30.457
> 
> 标签：c#, windows, service

我有一个在 IIS 中运行的 Web 应用程序，并通过托管在同一台计算机上的 WCF 与 Windows 服务进行通信。Windows 服务在内部执行各种工作，有时它非常忙于处理用户请求。一开始我遇到了服务启动的问题，因为有些时间需要很长时间才能启动并最终引发错误，即服务超时。为了解决这个问题，我将代码移动到另一个线程而不是主线程。一切正常，但现在我观察到有时我在服务停止时遇到错误，即

```
**1053 windows service did not respond in timely fashion** 
```

我的服务 OnStop() 代码：

```
protected override void OnStop()
        {
            // Stop the WCF service
            if (myServiceHost != null)
            {
                myServiceHost.Close();
                myServiceHost = null;
            }

            // Stop the scheduler

            if (myScheduleManager != null)
            {
                myScheduleManager.Stop();
            }

            // Update the registry value
            Logger.GetInstance().LogEvent(this.GetType().Name, LogLevel.INFO, "Updating registry...");
            Settings.GetInstance().LastStopTime = DateTime.Now.ToString();

            Logger.GetInstance().LogEvent(this.GetType().Name, LogLevel.INFO, "Service stopped.");
        } 
```

它通常发生在服务太忙时。但最终它会在 30-40 分钟后停止。我知道这是由于 Windows 服务中的超时问题而发生的，因为默认时间非常短，并且将其视为超时。

我的问题是避免这种瓶颈的最佳做法是什么意味着我应该将我的 Stop 相关任务移到另一个线程下并进行异步调用以释放该线程中的资源。但是，如果在释放资源期间，用户将启动服务会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-23T13:55:51.757

只是一个猜测，但它可能会有所帮助：确保将解决方案配置设置为发布而不是调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:38:16.760

只是猜测，但也许有助于追查问题：

你有这个`myScheduleManager.Stop()`，（我猜）等待进程完成。这很好，但 Windows 只给你 30 秒的执行时间`ServiceBase.OnStop()`。

如果您在此处进行异步处理，您或许可以使用 .NET-Framework 中的 CancellationTokens 来实现 CancellationPattern。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:52:04.053

`IsRunning`简单的方法可能是您可以确定在您的中构建布尔类型`myScheduleManager`并在 OnStop() 期间确定

```
if (myScheduleManager.IsRunning)
    myScheduleManager.Stop(); 
```

但是，您有不同的线程完成可能超过 30 秒的进程，但您也可以通过应用来中止您的进程

```
if (myScheduleManager.IsRunning && !_workerThread.Join(TimeSpan.FromSeconds(30))
    _workerThread.Abort 

myScheduleManager.Stop(); 
```

但是，我没有看到完整的代码片段，所以这是我对您的场景的猜测。

# node.js - Node.js Kue worker 发送结果

> ID：15338820
> 
> 赞同：3
> 
> 时间：2013-03-11T12:40:38.550
> 
> 标签：node.js, heroku, worker, kue

我的应用程序使用[Kue](http://github.com/learnboost/kue)对请求进行排队，这些请求由处理，`worker.js`因为我需要通过 Proximo 发送作业发出的请求 - 这有点令人困惑。但正因为如此，作业的结果无法返回给用户。以前工作会`res.send(results)`，然后用户会拥有数据。

让 Kue'ed 工作将结果发送回用户的最佳方法是什么？目前我能想到的唯一方法是使用网络钩子，但这不是最有效的方法，它在用户和他们的数据之间建立了一堵墙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T21:12:19.000

这是我要做的我认为你正在做的代码。

简单地说，这只是在 url /job 被命中时添加一个工作，一个工作工作被创建，正在运行的工作人员拿起，等待半秒并生成一个随机数。这是非 socket.io 版本。你可能不应该这样做，但它确实有效。

**网络服务器（web.js）：**

```
var port = 1337;
var app = require('express')()
  , server = require('http').createServer(app);
server.listen(port);
var fs = require('fs');
var kue = require('kue')
  , jobs = kue.createQueue();

app.get('/',function(req,res) {
    fs.readFile(__dirname+'/index.html',function(err,data) {
        res.send(data.toString());
    });
});

var responses = {};
app.get('/job', function(req, res){
    var id = ''+Math.random();
    jobs.create('worker-job', {
        title: 'worker job'
        , res_id: id
        , template: 'Some string to look up'
    }).save();
    responses[id] = res;
});

jobs.process('results',function(job,done) {
    responses[job.data.res_id].send(job.data);
    delete responses[job.data.res_id];
    done();
}); 
```

**工人（worker.js）：**

```
var kue = require('kue')
  , jobs = kue.createQueue();

jobs.process('worker-job',function(job,done) {
    setTimeout(function() {
        jobs.create('results',{
            title:'results job',
            status:'complete',
            res_id:job.data.res_id,
            random:Math.ceil(Math.random()*10000)
        }).save();
        done();
    },400);
}); 
```

# visual-studio-2012 - 分析 C++/CLI NUnit 测试

> ID：15338821
> 
> 赞同：1
> 
> 时间：2013-03-11T12:40:42.710
> 
> 标签：visual-studio-2012, c++-cli, nunit, profiling

是否可以使用 Visual Studio 2012 分析 C++/CLI NUnit 测试？

Profiler 总是希望有一个可执行文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-12T11:36:56.507

不，这是可能的。测试运行程序可附加以进行调试。

# moq - AutoFixture.AutoMoq：将值设置为只读属性

> ID：15338823
> 
> 赞同：6
> 
> 时间：2013-03-11T12:40:46.710
> 
> 标签：moq, autofixture, automocking

我将 AutoFixture 与 AutoMoq 一起使用。我尝试创建一个具有 getter 但没有 setter 的属性的类的假实例。我希望 AutoFixture 能够配置模拟，因此即使没有设置器，它也会返回给定的值。

我的代码是这样的：

```
var data = new List<Data>() { new Data() };
var userManager = fixture.Build<IRepository>()
      //.With(x => x.Data, data)
        .CreateAnonymous();
Mock.Get(userManager).Setup(x => x.Data).Returns(data); 
```

不幸的是，“With”方法在这种情况下不起作用，因为自动夹具说 Data 没有任何设置器，这为什么我必须在之后通过直接调用模拟来设置值。

有没有办法让自动夹具自己做到这一点，所以我不需要最后一行代码？

编辑：我犯了一个错误，代码示例不起作用。它应该是

```
var data = new List<Data>() { new Data() };
var userManager = fixture.CreateAnonymous<IRepository>();
Mock.Get(userManager).Setup(x => x.Data).Returns(data) 
```

不过，如果有假实例的 with 方法会很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T06:55:48.850

AutoFixture.AutoMoq[不会](https://stackoverflow.com/a/12965898/126014)为您设置测试替身。

如果您想避免`IRepository.Data`在每个测试用例中指定设置，您可以将设置打包在[Customization](http://blog.ploeh.dk/2011/03/18/EncapsulatingAutoFixtureCustomizations/)中。

```
public class RepositoryCustomization : ICustomization
{
    public void Customize(IFixture fixture)
    {
        fixture.Register(() =>
        {
            var td = new Mock<IRepository>();
            td.SetupGet(r => r.Data).Returns(fixture.CreateMany<Data>());
            return td.Object;
        });
    }
} 
```

这样，以下测试通过：

```
[Fact]
public void AutoProperty()
{
    var fixture = new Fixture().Customize(new RepositoryCustomization());
    var repo = fixture.Create<IRepository>();
    Assert.NotEmpty(repo.Data);
} 
```

理论上，可以编写反映接口成员并为每个成员设置返回值的自动化代码，但是 IMO，这绝不应该是 AutoFixture.AutoMoq 的默认行为。

# ios - AVMutableComposition 移除视频音轨

> ID：15338824
> 
> 赞同：1
> 
> 时间：2013-03-11T12:40:50.537
> 
> 标签：ios, objective-c, xcode, ios4, avmutablecomposition

我一直在尝试使用 AVMutableComposition 将音频（录制的）与视频（.mp4）混合，这意味着我需要在混合后并行播放 2 个文件，这是我使用的代码：temporaryRecFile 是录制的文件 url 路径audiosURL 是视频文件 url 路径

```
NSURL *audiosURL =[[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"dam3.mp4"] ofType:nil]];

        NSLog(@"SOMEDATA    IS THERE ");
        AVURLAsset* audioAsset  = [[AVURLAsset alloc]initWithURL:temporaryRecFile options:nil];
        AVURLAsset* audio2Asset = [[AVURLAsset alloc]initWithURL:audiosURL options:nil];

        AVMutableComposition* mixComposition = [AVMutableComposition composition];

    AVMutableCompositionTrack *compositionCommentary2Track = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [compositionCommentary2Track insertTimeRange:CMTimeRangeMake(kCMTimeZero, audio2Asset.duration) ofTrack:[[audio2Asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];

        NSLog(@"audio =%@",audioAsset);
        AVMutableCompositionTrack *compositionCommentaryTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration) ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil];

        AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetPassthrough];

        NSString* videoName = @"export.mov";

        NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];
        NSURL    *exportUrl = [NSURL fileURLWithPath:exportPath];

        if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath])
        {
            [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
        }

    _assetExport.outputFileType = AVFileTypeQuickTimeMovie;
    //@"com.apple.quicktime-movie";
        NSLog(@"file type %@",_assetExport.outputFileType);
        _assetExport.outputURL = exportUrl;
        _assetExport.shouldOptimizeForNetworkUse = YES;

        [_assetExport exportAsynchronouslyWithCompletionHandler:
         ^(void )
         {
             switch (_assetExport.status)
             {
                 case AVAssetExportSessionStatusCompleted:
                     //   export complete

                     NSLog(@"Export Complete");
                    // From Here I want play movie using MPMoviePlayerController.<<<---------
                     NSString  *fileNamePath = @"sound_record.mov";
                     NSArray   *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
                     NSString  *documentsDirectory = [paths  objectAtIndex:0];
                     NSString  *oldappSettingsPath = [documentsDirectory stringByAppendingPathComponent:fileNamePath];

                     if ([[NSFileManager defaultManager] fileExistsAtPath:oldappSettingsPath]) {

                         NSFileManager *fileManager = [NSFileManager defaultManager];
                         [fileManager removeItemAtPath: oldappSettingsPath error:NULL];

                     }
                     NSURL *documentDirectoryURL = [NSURL fileURLWithPath:oldappSettingsPath];
                     [[NSFileManager defaultManager] copyItemAtURL:exportUrl toURL:documentDirectoryURL error:nil];
                     [audioAsset release];
                     [audio2Asset release];
                     [_assetExport release];
                     [self performSelectorOnMainThread:@selector(playVideo:) withObject:documentDirectoryURL waitUntilDone:NO];

                     break;
                 case AVAssetExportSessionStatusFailed:
                     NSLog(@"Export Failed");
                     NSLog(@"ExportSessionError: %@", [_assetExport.error localizedDescription]);

                     //                export error (see exportSession.error)
                     break;
                 case AVAssetExportSessionStatusCancelled:
                     NSLog(@"Export Failed");
                     NSLog(@"ExportSessionError: %@", [_assetExport.error localizedDescription]);

                     //                export cancelled  
                     break;

             }
         }
         ]; 
```

结果导出的视频成功播放了录制的音频和视频，但是视频的音轨被删除了，所以导出的.mov播放录制的音频文件只有视频的图像，没有声音，为什么是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:40:00.887

您必须将视频中的音频添加为单独的轨道。因此，您将拥有一个视频轨道和两个音频轨道。在您的代码中，您没有添加视频中的音频。

# ruby-on-rails - Rails yield 和 content_for 部分

> ID：15338828
> 
> 赞同：3
> 
> 时间：2013-03-11T12:40:59.373
> 
> 标签：ruby-on-rails, ruby, layout, partial-views, yield

我已经习惯使用`content_for`and`yield`为我的视图设置页面标题和其他与视图渲染相关的整洁的东西。

现在我陷入了下一个方案：LAYOUT -> VIEW (edit.html.erb) -> PARTIAL (_main.html)。即 - 视图包含一个部分。

如果我`content_for :view_content_title, "Hello World"`在部分中定义，它可以在 LAYOUT 中访问，但不在**VIEW**中 -`content_for?(:view_content_title)`

为什么 ？我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T12:56:41.337

我想我找到了原因。Rails 以线性方式呈现视图。它先渲染部分视图，然后渲染部分视图，然后渲染视图的其余部分。我测试过，如果您`content_for?`在渲染部分之后调用或渲染视图中的内容 - 没关系，如果之前 - 内容不存在。

并且布局是在视图之后呈现的，这就是为什么在那一刻内容已经可用的原因，因为视图和部分已经呈现，例如执行的指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T04:18:56.497

一种可能的解决方法是布局确实可以访问**:locals**，因此您可以执行以下操作：

**view_file.html.erb**

```
<%= render partial: "my_partial", layout:"my_layout", locals:{:title=>"Best Answer Ever"} %> 
```

**_my_layout.html.erb**

```
<H1> <%= title %> </H1>
<%= yield %> 
```

**_my_partial.html.erb**

```
All your content goes here, and this partial also has access to locals if you want to use them. 
```

这将产生：

```
<H1>Best Answer Ever</H1>
All your content goes here, and this partial also has access to locals if you want to use them. 
```

# javascript - 通过ajax用html文件填充div

> ID：15338829
> 
> 赞同：0
> 
> 时间：2013-03-11T12:41:15.463
> 
> 标签：javascript, ajax, html

我的主 html 文件上有一个 div；

```
<div id="content"></div> 
```

和两个 html 文件：login.html 和 singup.html。

我的页面顶部还有一个导航栏。是否可以在单击登录按钮时使用 AJAX 使用登录文件的内容填充 div 的内容，并在单击注册按钮时使用 singup.html 填充它？

这些是按钮：

```
<li><a href="#">Login</a></li>
<li><a href="#">Register</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:43:50.800

只需获取`responeText`请求并设置`div.innerHTML = AJAX.responseText;`.

如果您的`login.html`页面构建为独立页面，我的意思是，包含`<html><head></head><body>...</body></html>`标签 - 您可能只想添加`<body>`标签的内部内容。您可以使用正则表达式来获取它：

```
div.innerHTML = AJAX.responseText.replace( /<body>([\s\S]*)<\/body>/i , "$1" ); 
```

# javascript - 使用 Javascript 消除立即数数组值

> ID：15338831
> 
> 赞同：0
> 
> 时间：2013-03-11T12:41:21.423
> 
> 标签：javascript

我正在从事与此类似的数组的项目

```
var sortBp = [ 'height58em', 'width480px', 'width767px', 'width768px', 'width959px' ]; 
```

我想消除任何立即数数组&只显示它们之间的更高数字

例如，从上面的数组`width767px`&`width768px`是立即数数组。

我想消除`width767px`和保留`width768px`，因为它是更高的数字。

所以最终结果将是

```
var sortBp = [ 'height58em', 'width480px', 'width768px', 'width959px' ]; 
```

纯javascript函数有可能吗？

编辑 ：

我已经使用以下函数对数组进行了排序，但我不清楚如何删除立即数组。

```
 var sortBp = bpArrays.sort(function(a, b) {
                    a = a.replace(/[a-z]/g, '');
                    b = b.replace(/[a-z]/g, '');
                    return a - b;
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:54:15.460

You can do something like

```
var sortBp = [ 'height58em', 'width480px', 'width767px', 'width768px', 'width959px' ];
var x = [];
var regex = /\d+/;
for(var i = 0; i < sortBp.length; i++){
    var c = sortBp[i], n = sortBp[i + 1];

    if(c && n && c.substring(0, 3) == n.substring(0, 3)){
        var cn = regex.exec(c)[0];
        var nn = regex.exec(n)[0];
        if(cn != nn - 1){
            x.push(c);
        }
    } else {
        x.push(c);
    }
}

console.log(x); 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/jbqbk/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:54:57.863

尝试这个：

```
var sortBp = [ 'height58em', 'width480px', 'width767px', 'width768px', 'width959px' ];
var arr=[];
for(var i=0;i<sortBp.length;i++)
{
    num=sortBp[i].replace(/\D/g,'');
    arr.push(num);
}
var newarr=[];
for(var i=0;i<arr.length;i++)
{
    if(arr[i+1] && arr[i]!=arr[i+1]-1)// for sorted array only 
    //or you can use sort method of javascript 
    //From http://www.javascriptkit.com/javatutors/arraysort.shtml
    {
        newarr.push(arr[i]);
    }
}
newarr.push(arr[arr.length-1]);// for last Element
console.log(newarr); 
```

**小提琴** [http://jsfiddle.net/R75bd/](http://jsfiddle.net/R75bd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:46:18.197

当然有可能。只需对数组进行排序，然后遍历并收集每个属性的第一个和最后一个“外观”。

# android - FrameLayout 的儿童边距底部不起作用

> ID：15338832
> 
> 赞同：2
> 
> 时间：2013-03-11T12:41:22.763
> 
> 标签：android, android-layout, android-view, android-framelayout

我有以下视图层次结构：

```
<FrameLayout>
   <LinearLayout>
       <!-- Some Child views-->
   </LinearLayout>
   <ImageView>
   </ImageView>
</FrameLayout> 
```

我试图`ImageView`在布局编辑器上设置它的下边距，它似乎正在工作，但是当我运行代码时，我设置的下边距被丢弃了。

重要说明：我还定义`margin top`了`ImageView`它，它**确实**有效。

我看到了其他问题，并且**我已经尝试**`gravity`将`FrameLayout`子视图设置为，`top`但这也不起作用。

我还看到此问题已针对 Android > 3.0（我在 4 上运行）解决 -[链接到该问题](https://code.google.com/p/android/issues/detail?id=28057)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:06:59.837

您总是可以将您的包装`ImageView`成 a并从包装器的底部填充`FrameLayout`设置所需的底部边距：`ImageView``FrameLayout`

```
<FrameLayout>
   <LinearLayout>
       <!-- Some Child views-->
   </LinearLayout>
   <FrameLayout // same attributes as the ImageView but with also android:paddingBottom="xxdp">
       <ImageView // no margin set here!>
       </ImageView>
   </FrameLayout>
</FrameLayout> 
```

如果你说这个行为是从 Honeycomb 开始修复的，那么你可以使用 API 相关的布局文件夹、我的 Honeycomb 下面的布局和任何其他 API 级别的布局。

# java - 如何将一组 char[] 添加到 List ?

> ID：15338836
> 
> 赞同：0
> 
> 时间：2013-03-11T12:41:37.523
> 
> 标签：java

我有一个`List<String>`要添加的列表`char[]`。

我无法更改列表的字符串类型。我的目标是将测试字符串中的每个字符作为单个条目添加到列表中。

以下不起作用。我必须改变什么？

```
 String test = "test";
    List<String> list = new ArrayList<String>();

    for (char c : test.toCharArray()) {
        list.add(c);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:43:37.070

尝试

```
separators.add(String.valueOf(c)); 
```

`separators`应该是`list`对的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:10:51.670

试试下面的代码。

```
String chars = "test";              
List<String> lst = Arrays.asList(chars.split("")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:45:24.673

使用字符串[valueOf(char c)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf%28char%29)

```
for (char c : test.toCharArray()) {
        separators.add(String.valueOf(c));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:48:13.720

您可以将代码更改`separators.add(c);`为

```
separators.add(String.valueOf(c)); 
```

您的代码给出了错误，因为您尝试在字符串位置使用 char 。

# css - 在 SASS 中，我可以在媒体查询和选择器中包装一堆样式规则吗

> ID：15338837
> 
> 赞同：0
> 
> 时间：2013-03-11T12:41:41.253
> 
> 标签：css, sass, media-queries, mixins

我有一堆样式只需要应用于我的网站的桌面版本。我正在使用媒体查询来应用这些样式，但是为了避免在调整窗口大小时网站切换到移动设计，如果屏幕很大，我现在还在页面加载时添加了一个类。

目前我有

```
@media (min-width: $breakpoint) {
   // my styles
} 
```

我将如何编写一个mixin来实现类似的东西

```
@media (min-width: $breakpoint),
.not-mobile {
   // my styles
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:04:02.850

这是我的解决方案

```
$breakpoint: 768px;

@mixin not-mobile {
  @media (min-width: $breakpoint) {
    @content;
  }
  .not-mobile {
    @content;
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-09T01:00:32.077

您应该查看[Breakpoint](https://github.com/Team-Sass/breakpoint)扩展的[noqueries](https://github.com/Team-Sass/breakpoint/wiki/No-Query-Fallbacks)或[Jacket](https://github.com/Team-Sass/jacket/)的[示例媒体查询后备 mixin](https://github.com/Team-Sass/jacket/blob/master/test/scss/style.scss#L95)。这些都是设计用于输出条件 css 规则的强大工具。

# c# - 如何在 Ajax CalendarExtender 上调用 javascript 方法

> ID：15338838
> 
> 赞同：0
> 
> 时间：2013-03-11T12:41:41.547
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, calendarextender

我正在使用 Ajax 工具包的日历扩展器来获取日期，现在我想在日历的日期选择更改事件上调用一个 javascript 方法，我该怎么做？我为此使用以下代码

```
<asp:CalendarExtender ID="CalendarExtender2" runat="server" PopupButtonID="divCalendar"   TargetControlID="TxtHiddenFieldCalenderValue" > 
```

并调用javascript方法：-

```
function dateChanged(){
    alert("date");
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:46:21.337

你可以有javascript函数，比如，

```
function checkDate(sender,args)
{
    alert("hello");
} 
```

以及像这样的 ASP.net 代码

```
<asp:CalendarExtender OnClientDateSelectionChanged="checkDate" PopupButtonID="XX" runat="server" TargetControlID="targetID" Format="dd/MM/yyyy" Enabled="True"></asp:CalendarExtender> 
```

希望这会有所帮助。

```
sender._selectedDate.format(sender._format)  will give you selected date by Ajax Calender Extender. 
```

# iphone - 如何在 iOS 的队列中下载多个文件

> ID：15338839
> 
> 赞同：2
> 
> 时间：2013-03-11T12:41:41.987
> 
> 标签：iphone, sdk, download, afnetworking

我需要在队列中下载多个文件。当我尝试下载单个文件时，它工作得很好，但是当我尝试下载多个文件时，它在第一次下载的同时开始下载，我需要将它们排在队列中，直到第一次下载完成，然后再进行第二次下载。我正在使用 AFNetworking 库扩展 AFDownloadRequestOperation。下面是我的代码。如果我做错了什么，请帮助我。

```
 NSURLRequest *request = [NSURLRequest requestWithURL:videoURL];

         AFDownloadRequestOperation *operation = [[AFDownloadRequestOperation alloc] initWithRequest:request targetPath:path shouldResume:YES];
         [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
             if(operation.response.statusCode == 200) {

                 UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Successfully Downloaded" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                 [alertView show];
             }

         }failure:^(AFHTTPRequestOperation *operation, NSError *error) {

             if(operation.response.statusCode!= 200) {

                UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Error While Downloaded" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                 [alertView show];
             }
         }];

         [operation setProgressiveDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpected, long long totalBytesReadForFile, long long totalBytesExpectedToReadForFile) {

             float percentDone = ((float)totalBytesRead) / totalBytesExpectedToReadForFile;
             delegate.progressDone = percentDone;
             [progressTableView reloadData];
         }];
         [operation start]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:25:59.477

创建请求并将它们添加到 AFHTTPClient 的操作队列的实例中：

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:nil];

// Important if only downloading one file at a time
[client.operationQueue setMaxConcurrentOperationCount: 1];

NSArray *videoURLs; // An array of strings you want to download

for (NSString * videoURL in videoURLs) {

    // …setup your requests as before

    [client enqueueHTTPRequestOperation:downloadRequest];
} 
```

您的第一个请求将在添加到 AFHTTPClient 的操作队列后立即开始，但后续请求将依次等待前一个操作结束。

# php - php中的灯箱在弹出窗口中显示信息

> ID：15338840
> 
> 赞同：2
> 
> 时间：2013-03-11T12:41:45.043
> 
> 标签：php, javascript, popup, lightbox

我正在开发一个应用程序，该应用程序有几个页面。而且我想在其中说一个信息，用户喜欢继续意味着他们可以继续或可以放弃..

现在我有类似的查询，..

```
<input type="Button" onclick="window.open(myPage.php)" target="_blank" value="Guess It..!"/> 
```

它会打开一个新页面来显示数据，.. 它看起来不错。但刚才我开始了解 PHP 中带有 javascript 的 Lightbox 功能。我听说它将在同一页面中执行我的流程而不会干扰上一个页面，它以弹出窗口的形式出现，在完成其流程后，我们可以关闭并继续我们之前的流程..

我希望我能帮助我的用户轻松工作，而不会与新标签打开选项混淆，现在我正在寻找灯箱教程，任何人都建议我获得最佳教程或示例..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:50:29.113

[http://fancybox.net/](http://fancybox.net/)

Download and use this fancy box..This will be easy for you to implement and customize based on reqs.

For using it, refer [http://fancybox.net/howto](http://fancybox.net/howto).

Hope it helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:49:12.597

我想你应该看看[Fancybox](http://fancybox.net/)。良好的文档，易于使用，您可以动态加载内容、图像等。

还有[教程](http://fancybox.net/howto)和[文档](http://fancybox.net/api)。

# php - 将 JSONobjects 从 android 发布到 PHP 脚本

> ID：15338841
> 
> 赞同：0
> 
> 时间：2013-03-11T12:41:49.237
> 
> 标签：php, android, json, postgresql

我希望从 android 应用程序中获取一些数据，将其发布到 PHP 脚本，然后将其写入我的 PostGreSQL 数据库。我遇到了一些困难，谁能解释为什么没有传输数据。我不断收到很多`StrictMode`违规行为。我希望当用户在应用程序上单击“上传”时，整个过程是自动化的，并且数据会自动写入我的 PGSQL 服务器。

**安卓应用**

```
protected void syncToWebService(final JSONObject json){        
       HttpClient httpclient = new DefaultHttpClient();
       HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000);
       HttpResponse response;
       String httppost = "http://users.aber.ac.uk/dwd/mfb/php/jsonscript.php";    

       try 
       {
           HttpPost post = new HttpPost(httppost);

           Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(), i);
           ByteArrayOutputStream bao = new ByteArrayOutputStream();
           bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
           byte[] ba = bao.toByteArray();
           String ba1=Base64.encodeToString(ba, i);

           ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

           postParameters.add(new BasicNameValuePair("photo", ba1.toString()));
           postParameters.add(new BasicNameValuePair("name", resultName.getText().toString()));
           postParameters.add(new BasicNameValuePair("description", resultDescription.getText().toString()));
           postParameters.add(new BasicNameValuePair("latitude", resultLat.getText().toString()));
           postParameters.add(new BasicNameValuePair("longitude", resultLong.getText().toString()));
           postParameters.add(new BasicNameValuePair("project", resultProject.getText().toString()));
           postParameters.add(new BasicNameValuePair("owner", username));
           //response = CustomHttpClient.executeHttpPost(httppost, postParameters);

           post.setEntity(new UrlEncodedFormEntity(postParameters));
           response = httpclient.execute(post);

           /*Checking response variable*/
           if(response!=null){
               InputStream in = response.getEntity().getContent();
           }
       }

       catch (Exception e){
           e.printStackTrace();
       }
   } 
```

**PHP 文件**

```
 $conn = pg_connect("dbconnection_string");

    $jsonString = file_get_contents('php://input');
    $jsonObj = json_decode($jsonString, true);

    if(!empty($jsonObj)) {

            try {
                    $name = jsonObj['name'];
                    $desc = jsonObj['description'];
                    $latitude = jsonObj['latitude'];
                    $longitude = jsonObj['longitude'];
                    $project = jsonObj['project'];
                    $owner = jsonObj['owner'];
            }

    }
    //decode photo string
    $photo = $_REQUEST["photo"];

    echo $photo;
    $binary=base64_decode($photo);
    header('Content-Type: bitmap; charset=utf-8');

    $id = pg_query("SELECT * FROM users WHERE email = $owner");
    $id_assoc = pg_fetch_assoc($id);
    $id_res = $id_assoc['u_id'];

    $res = pg_query("INSERT INTO records (photo, name, description, latitude, longitude, project, owner) VALUES ('$photo', '$name', '$desc', '$latitude', '$longitude', '$project', '$id_res'");

    pg_close($conn); 
```

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:44:35.847

改变这个，你错过`$`了`jsonObj`

```
try {
                $name = jsonObj['name'];
                $desc = jsonObj['description'];
                $latitude = jsonObj['latitude'];
                $longitude = jsonObj['longitude'];
                $project = jsonObj['project'];
                $owner = jsonObj['owner'];
    } 
```

至

```
try {
                $name = $jsonObj['name'];
                $desc = $jsonObj['description'];
                $latitude = $jsonObj['latitude'];
                $longitude = $jsonObj['longitude'];
                $project = $jsonObj['project'];
                $owner = $jsonObj['owner'];
    } 
```

# c - linux sparc so库中的名称修改

> ID：15338842
> 
> 赞同：2
> 
> 时间：2013-03-11T12:41:50.220
> 
> 标签：c, name-mangling, nm, c++filt

我有一些 sparc 库，我想拥有带有实名的导出函数列表。使用 objdump 或 nm 我得到类似`__1cEnameIcopyType6MpnIASN1CTXT_rnLAsn1TObject_4_v_`或`__1cHsurname2t5B6M_v_`这样的名称，以便 c++filt 无法对它们进行分解。我已经尝试过我的 nm 所拥有的每一种风格——gnu、lucid、arm、hp、edg、gnu-v3、java、gnat——结果是一样的。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:02:22.973

[Oracle Solaris Studio](http://www.oracle.com/technetwork/server-storage/solarisstudio/downloads/index.html)应该在它自己的 c++filt 版本中为您的代码提供支持。

# reporting-services - 当您有多个多值下拉菜单时，有没有办法使用其中一个？

> ID：15338846
> 
> 赞同：0
> 
> 时间：2013-03-11T12:41:52.433
> 
> 标签：reporting-services

当您有多个多值下拉菜单时，有没有办法使用其中一个？

现在，按照我的逻辑，我添加了一个下拉参数。此下拉列表具有以下值：

*   **Return Everything - 1** - （这应该将两个多值下拉菜单默认为“Everything”
*   **选择参数 1 - 2** - （这应该允许您从参数 1 中选择您想要的任何内容，默认参数 2 为“Everything”）
*   **选择参数 2 - 3** - （这应该允许您从参数 2 中选择您想要的任何内容，默认参数 1 为“Everything”）

为了处理这个问题，我在参数的默认值中使用了以下表达式：

**参数1**（零是参数中返回的值）：

```
=iif(Parameters!Criteria.Value = 1, Nothing, iif(Parameters!Criteria.Value = 3, Nothing, 0)) 
```

和**参数 2**：

```
=iif(Parameters!Criteria.Value = 1, Nothing, iif(Parameters!Criteria.Value = 2, Nothing, 0)) 
```

但是，这种逻辑似乎并没有像我预期的那样工作。该表达式`Nothing`应该将 a`NULL`放入我的参数数据集中，然后默认返回“Everything”，但这并没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:12:57.017

我会修改方法 - AFAIK 你只能使用表达式将单个值设置为默认值。

因此，我将为 Parameter1 和 Parameter2 创建一个新数据集。此数据集将为每个参数提供默认值（代替您当前尝试的表达式）。

例如，新的 Parameter1_Default 数据集应该呈现所有通常呈现给参数 1 的行。然后在该数据集的 WHERE 子句中，添加：WHERE 3 = @Criteria。

然后在 Parameter1 定义中，将默认值设置为来自新的 Parameter1_Default 数据集。当 Criteria = 3 时，它将“全选”Parameter1 值。当 Criteria <> 3 时，不会选择 Parameter1 值。

对参数 2 重复。

# sql - 查询慢，可能优化

> ID：15338847
> 
> 赞同：0
> 
> 时间：2013-03-11T12:41:53.433
> 
> 标签：sql, tsql, optimization, reporting-services

我有以下情况：我在报告中有 16 个查询，它们`SELECT`在开始时都使用几乎相同的语句：

```
SELECT 
    sereresystem.registrationtime,
    CONVERT(VARCHAR(11),DATEADD(DAY,DATEDIFF(DAY,0,sereresystem.registrationtime),0),120) AS [Day], 
    CAST(datepart(YEAR,sereresystem.registrationtime) AS CHAR(4))+' / KW '+CAST(Datepart(ISO_WEEK,sereresystem.registrationtime) AS VARCHAR(2)) AS [Week],
    Datepart(m,DATEADD(MONTH,DATEDIFF(MONTH,0,sereresystem.registrationtime),0)) AS [Month],
    CAST(datepart(YEAR,sereresystem.registrationtime) AS CHAR(4))+' / '+CAST(Datepart(q,DATEADD(MONTH,DATEDIFF(MONTH,0,sereresystem.registrationtime),0)) AS VARCHAR(1)) AS [Quarter],
    Datepart(year,DATEADD(MONTH,DATEDIFF(MONTH,0,sereresystem.registrationtime),0)) AS [Year],
    COUNT(sereresystem.caseid) AS [Total]
FROM sereresystem
    INNER JOIN sereregeneral ON sereresystem.caseid=sereregeneral.caseid
    INNER JOIN sereresperou ON sereresystem.caseid=sereresperou.caseid
WHERE sereregeneral.inpcha IN(@Inputchannel)
    AND sereresperou.assrol IN(@Assigned_Role) 
    AND sereresystem.registrationtime BETWEEN @Starttime AND @Endtime
    AND sereresystem.referencenumber=sereregeneral.renure
GROUP BY sereresystem.registrationtime 
```

我需要日、周、月、季度和年的值在 SSRS 中的这些值之后动态分组。我现在遇到的问题是报告太慢了。是否有可能缩短这 5 个日期选择语句的处理时间？

-edit- 现在是完整的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:48:53.660

您应该定义“该死的慢”以及您的期望/要求是什么。

假设这 16 个查询不相同，那么将它们作为单独的数据集运行通常会比组合它们更快。这是由于现代服务器、SQL 和 SSRS 的并行架构。

我会查看表索引 - 如果您不确定，那么在 FROM 子句之后引用的每一列上单独的索引将是一个好的开始。

# java - 使用迭代器运行数字（作业）

> ID：15338849
> 
> 赞同：-1
> 
> 时间：2013-03-11T12:41:54.290
> 
> 标签：java, iterator

我有这个我无法解决的任务。这个问题可能已经被问过很多次了，但我没有找到它，如果我确实在重复一个简单的问题，请原谅我。

* * *

这是作业：

> 创建一个名为 Benchmark 的类。编写一个以 1 为单位从 1 计数到 8.000.000 的方法。每次计数达到 1.000.000 的倍数时，都会在屏幕上打印该数字。使用您的手表计时循环需要多长时间。
> 或者，您可以使用系统时钟来计时程序的持续时间。您可以通过使用 System.class 中的静态方法 currentTimeMillis 来完成此操作。有关使用此方法的详细说明，请参阅 JDK 的文档。该程序应产生如下输出：
> 
> 0
> 1000000
> 2000000
> 3000000
> 4000000
> 5000000
> 6000000
> 7000000
> 8000000

* * *

我发现我需要使用迭代器才能完成这项工作。但是我的老师现在不在，我似乎不知道如何使用它。

再次：抱歉新手问题，如果有人可以帮助我解决这个问题..我会永远感激;）

感谢您的阅读，并提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:56:15.743

只是：

```
for (int i = 1; i <= 8000000; i++) {
    if (i % 1000000 == 0) {
        System.out.println(i);
    }
} 
```

如果您还想测量时间：

```
long start = System.currentTimeMillis();
long end;
for (int i = 1; i <= 8000000; i++) {
    if (i % 1000000 == 0) {
        end = System.currentTimeMillis();
        System.out.println(i);
        System.out.println((end-start));
        start = end;
    }
} 
```

# java - java线程交错

> ID：15338851
> 
> 赞同：3
> 
> 时间：2013-03-11T12:41:58.950
> 
> 标签：java, multithreading

我试图交错两个独立线程的执行。这样两者都有一个带有 10 次迭代的 run 方法，并且在每次迭代之后我想上下文切换线程。

线程 A 启动，在执行打印之类的操作后，将控制权传递给线程 B。然后线程 B 打印并将控制权传回给 A，依此类推，直到两者都完成。

这样做的有效机制是什么？

我附上了一个示例代码。希望你能帮忙。

```
// Suspending and resuming a thread for Java 2

class NewThread implements Runnable {
  String name; // name of thread
  Thread t;
 // boolean suspendFlag;

  NewThread(String threadname) {
    name = threadname;
    t = new Thread(this, name);
    System.out.println("New thread: " + t);
  //  suspendFlag = false;
    t.start(); // Start the thread
  }
  public String getState()
  {
    Thread t=Thread.currentThread();

    return t.getState().toString(); 
  }
  // This is the entry point for thread.
  public void run() {
    try {
      for(int i = 15; i > 0; i--) {
        System.out.println(name + ": " + i);
        Thread.sleep(200);
        synchronized(this) {
            //SuspendResume.suspendFlag2=false;
            SuspendResume.suspendFlag1=true;
          while(SuspendResume.suspendFlag1) {
            wait();
            //System.out.println(SuspendResume.ob1.t.getState().toString());
           // if(SuspendResume.ob2.t.getState().toString()=="WAITING")
            //  SuspendResume.ob2.t.notify();
          }
        }
      }
    } catch (InterruptedException e) {
      System.out.println(name + " interrupted.");
    }
    System.out.println(name + " exiting.");
  }

  void mysuspend() {
 //   suspendFlag = true;
  }

  synchronized void myresume() {
   // suspendFlag = false;
    notify();
  }
}
class NewThread2 implements Runnable {
      String name; // name of thread
      Thread t;
     // boolean suspendFlag;

      NewThread2(String threadname) {
        name = threadname;
        t = new Thread(this, name);
        System.out.println("New thread: " + t);
      //  suspendFlag = false;
        t.start(); // Start the thread
      }
      public String getState()
      {
        Thread t=Thread.currentThread();

        return t.getState().toString(); 
      }
      // This is the entry point for thread.
      public void run() {
        try {
          for(int i = 15; i > 0; i--) {
            System.out.println(name + ": " + i);
            Thread.sleep(1000);
            synchronized(this) {
                //SuspendResume.suspendFlag1=false;
                //while(SuspendResume.suspendFlag1) {
         //     while(suspendFlag) {
                //wait();
                //System.out.println(SuspendResume.ob2.t.getState().toString());
                //if(SuspendResume.ob1.t.getState().toString()=="WAITING")
                //SuspendResume.ob1.t.notify();
              //}
                SuspendResume.suspendFlag1=false;
                notify();
            }
          }
        } catch (InterruptedException e) {
          System.out.println(name + " interrupted.");
        }
        System.out.println(name + " exiting.");
      }

      void mysuspend() {
     //   suspendFlag = true;
      }

      synchronized void myresume() {
       // suspendFlag = false;
        notify();
      }
    }
class SuspendResume {
     static boolean suspendFlag1=false;
    static NewThread ob1 = new NewThread("One");
    static NewThread2 ob2 = new NewThread2("Two");

   // static boolean suspendFlag2=false;

  public static void main(String args[]) {

    try {
      //Thread.sleep(1000);
      //ob1.mysuspend();
      //System.out.println("Suspending thread One");
      //Thread.sleep(1000);
      //ob1.myresume();
      //System.out.println("Resuming thread One");
     // ob2.mysuspend();
      //System.out.println("Suspending thread Two");
      Thread.sleep(1000);
     // ob2.myresume();
      //System.out.println("Resuming thread Two");
    } catch (InterruptedException e) {
      System.out.println("Main thread Interrupted");
    }

    // wait for threads to finish
    try {
      System.out.println("Waiting for threads to finish.");
      System.out.println(ob1.getState());
      System.out.println(ob1.getState());
      ob1.t.join();
      ob2.t.join();
    } catch (InterruptedException e) {
      System.out.println("Main thread Interrupted");
    }

    System.out.println("Main thread exiting.");
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:14:52.780

首先，我不确定你有什么样的场景，你想一遍又一遍地顺序运行两个线程。这听起来像是一个线程在一个循环中运行两种不同的方法。尽管如此，这听起来像是一个有趣的挑战，所以我接受了。

利用 Java 5 的[Exchanger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Exchanger.html)类，解决方案变得非常小。我最终得到了一个[Runnable](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)类。我使用它们的两个实例将布尔值 true 和布尔值 false 相互传递。Exchanger 类有助于以线程安全的方式传递布尔值。Runnable 仅在其具有布尔真值时“执行”其代码。

```
package interleavedexample;

import java.util.concurrent.Exchanger;
import java.util.logging.Logger;

/**
 *
 */
public class InterleavedRunnable implements Runnable {

  private final String name;

  private final Exchanger<Boolean> exchanger;

  private Boolean state;

  public InterleavedRunnable(String name, Exchanger<Boolean> exchanger, 
       Boolean state) {
    this.name = name;
    this.exchanger = exchanger;
    this.state = state;
  }         

  @Override
  public void run() {
    try {
      while (true) {
        if (state) {
          Logger.getLogger(getClass().getName()).info(name + " is running");
        }
        state = exchanger.exchange(state);
      }
    } catch (InterruptedException ex) {
      Logger.getLogger(name).info("Interrupted");
    }
  } 
```

设置 runnables 非常简单：

```
 public static void main(String[] args) {
    Exchanger<Boolean> exchanger = new Exchanger<Boolean>();
    Thread thread1 = new Thread(new InterleavedRunnable("Thread 1", exchanger, true));
    Thread thread2 = new Thread(new InterleavedRunnable("Thread 2", exchanger, false));
    thread1.start();
    thread2.start();
  } 
```

只要您可以在 Java API（或知名库）中找到现有功能，您就应该充分利用它们。您编写的代码行数越少，需要维护的行数就越少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:25:08.540

为此使用等待和通知。

```
public class Thread1 implements Runnable {

@Override
public void run() {
    while(true){
        synchronized (Main.obj) {
            try {
                Main.obj.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        System.out.println("1");

        synchronized (Main.obj) {

            Main.obj.notify();

        }
    }

}

}

public class Thread2 implements Runnable{

@Override
public void run() {
    while(true){
        synchronized (Main.obj) {
            try {
                Main.obj.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println("2");
        synchronized (Main.obj) {

            Main.obj.notify();

        }
    }

}
}

public class Main {

public volatile static Object obj =  new Object();

/**
 * @param args
 */
public static void main(String[] args) {

    Thread t1 = new Thread(new Thread1());
    Thread t2 = new Thread(new Thread2());
    t1.start();
    t2.start();
    synchronized (obj) {
        obj.notifyAll();
    }

}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:51:19.463

The 'OS Sycnro 101' solution is to use two semaphores, one for each thread, and swap over one 'GO' token/unit between them. Start both threads and then give the token to whichever thread you want to go first.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T13:39:47.397

没有正确回答您的问题。如果你只想在线程A执行结束后才执行线程B，那么多线程根本没有意义。您可以简单地将线程 B 的内容放入线程 A 的 run() 方法中。

如果非常需要，那么您可以尝试在两个对象上使用 wait() 和 notify() 方法。像这样的东西。

```
Class ClassA implements runnable{
    Message messageA;
    Message messageB;
    public ClassA(Message messageA,,Message messageB){
        this.messageA = messageA;
        this.messageB = messageB;
    }
    public void run(){
        for(;loop contition;){
            //code here
            messageB.notify();
            messageA.wait();
        }
    }
}
Class ClassB implements runnable{
    Message messageA;
    Message messageB;
    public ClassB(Message messageA,Message messageB){
        this.messageA = messageA;
        this.messageB = messageB;
    }
    public void run(){
        for(;loop condition;){
            messageB.wait();
            //code here
            messageA.notify();
        }
    }
} 
```

*   现在在主 messageA 和 messageB 中创建两个对象，并将它们都传递到每个线程的构造函数中。

# html - css3上滑过渡

> ID：15338854
> 
> 赞同：0
> 
> 时间：2013-03-11T12:42:03.183
> 
> 标签：html, css, show-hide

嗨，我有一个我不会在单击链接时公开的 Div，它会在页面底部显示一个弹出窗口......目前它看起来像这样：http: [//jsfiddle.net/XPJC5/](http://jsfiddle.net/XPJC5/)

```
body{margin:0;}
#lightbox {
        display:none;
        position:absolute;
        bottom:5px;
        z-index:1000;
        width:100%;
        background-color:#09F;
        height:50px;
        float:left;
        font-family: 'helvetica_bqregular';
        font-size:20px;
        line-height:65px;
        color:#FFF;
        text-align:center;
            }

 /* works with IE8+, Firefox 2+, Safari, Chrome, Opera 10+ */

 #lightbox:target {
         display:block;
      }

<a href="#lightbox" style="color:#999; text-decoration:underline;">Register</a>
<div id="lightbox">

          <div style=" background-color:#CBE376; width:100%; line-height:65px; height:65px; border-bottom:solid #999 thin; -webkit-box-shadow:  4px 4px 4px 4px #333;box-shadow:  4px 4px 4px 4px #333; clear:both;">
Consumer
          </div>
          <div style=" background-color:#94C8F1; line-height:65px; width:100%; height:65px;">

             Business</div>
    <div style=" background-color:#333; width:100%; height:65px;"><a href="#" style="color:#fff; text-decoration:none;">Close</a>

          </div></div> 
```

但我希望盒子从底部向上滑动，类似于：http: [//jsfiddle.net/R8zca/4/](http://jsfiddle.net/R8zca/4/)

任何人都可以帮助完成吗？似乎在审判中失败了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:49:40.817

从 html 中的内联样式中删除高度，并在 css 中将框设置为初始高度 0px，然后使用 css 过渡将它们带到全高

html

```
<a href="#lightbox" style="color:#999; text-decoration:underline;">Register</a>
<div id="lightbox">

          <div style=" background-color:#CBE376; width:100%; line-height:65px; border-bottom:solid #999 thin; -webkit-box-shadow:  4px 4px 4px 4px #333;box-shadow:  4px 4px 4px 4px #333; clear:both;">
Consumer
          </div>
          <div style=" background-color:#94C8F1; line-height:65px; width:100%; ">

             Business</div>
    <div style=" background-color:#333; width:100%;"><a href="#" style="color:#fff; text-decoration:none;">Close</a>

          </div></div> 
```

css

```
body{margin:0;}
#lightbox div
{
    height: 0px;
}
#lightbox {
        display:block;
        position:absolute;
        bottom:5px;
        z-index:1000;
        width:100%;
        background-color:#09F;
        float:left;
        font-family: 'helvetica_bqregular';
        font-size:20px;
        line-height:65px;
        color:#FFF;
        text-align:center;
            }

 /* works with IE8+, Firefox 2+, Safari, Chrome, Opera 10+ */

#lightbox:target div
{
    height: 65px;
    -webkit-transition:all 1s ease;
    -moz-transition:all 1s ease;
} 
```

[http://jsfiddle.net/axrwkr/XPJC5/2](http://jsfiddle.net/axrwkr/XPJC5/2)

# asp.net - 自定义面板渲染不好

> ID：15338855
> 
> 赞同：0
> 
> 时间：2013-03-11T12:42:07.463
> 
> 标签：asp.net, custom-controls

我正在尝试以这种方式自定义 ASP.NET 面板的呈现...

```
 [DefaultProperty("ID")]
    [ToolboxData("<{0}:NFormPanel runat=server></{0}:NFormPanel>")]
    [Description("Aldammam panel.")]
    [ParseChildren(false)]
    [PersistChildren(true)]
    public class NFormPanel : Panel, INamingContainer
    {

        protected override void RenderContents(HtmlTextWriter output)
        {
            var sb = new StringBuilder();
            sb.AppendLine("<table class=\"con-table\" style=\"width: 100%;\">");
            output.Write(sb.ToString());
            if (HasControls())
            {

                this.RenderChildren(output);
            }
            sb.Clear();
            sb.AppendLine("</table>");
            output.Write(sb.ToString());

        }

    } 
```

...但是输出首先呈现面板控件，然后呈现表格，就像这样......

```
 <div>
   <input name="TextBox1" type="text" id="TextBox1">
   <table class="con-table" style="width: 100%;">
   </table>
 </div> 
```

我想要表格内的子控件，如下例所示...

```
<div>
  <table class="con-table" style="width: 100%;">
    <input name="TextBox1" type="text" id="TextBox1">
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:57:44.177

改用 render 方法：

```
protected override void Render(HtmlTextWriter output)
{
     var sb = new StringBuilder();
     sb.AppendLine("<table class=\"con-table\" style=\"width: 100%;\">");
     output.Write(sb.ToString());

     if (HasControls())
     {
         //Alternatively call base.Render() which renders the panel's DIV
         this.RenderChildren(output); //renders inner children only without panel DIV
     }

     sb.Clear();
     sb.AppendLine("</table>");
     output.Write(sb.ToString());

} 
```

# c# - BindingSource MoveFirst/MoveLast 不起作用

> ID：15338857
> 
> 赞同：7
> 
> 时间：2013-03-11T12:42:15.847
> 
> 标签：c#, winforms, data-binding, bindingsource

我的winforms技能有点生疏。我正在使用`BindingSource`a `DataGridView`。在我想选择按需要工作的下一个/上一个记录`KeyDown`。`DataGridView`

`Keys.Down`如果用户在选择最后一个项目时点击，我想选择第一个，如果他在选择第一个项目时点击，我想选择最后`Keys.Up`一个。但那时什么也没有发生。

这是代码：

```
private void  Grid_Keydown(Object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Up)
        previousItem();
    else if (e.KeyCode == Keys.Down)
        nextItem();
}

private void previousItem()
{
    BindingSource bs = null;
    switch (this.Type) // a custom enum
    {
        case AdminType.Channel:  
            bs = channelBindingSource;
            break;
        default:
            break;
    }
    if (bs.Position - 1 < 0)
        bs.MoveLast();
    else
        bs.MovePrevious();
}

private void nextItem()
{
    BindingSource bs = null;
    switch (this.Type)
    {
        case AdminType.Channel:
            bs = channelBindingSource;
            break;
        default:
            break;
    }
    if (bs.Position + 1 >= bs.Count)
        bs.MoveFirst();
    else
        bs.MoveNext();
} 
```

请注意，`bs.MoveFirst()`/`bs.MoveLast()`被正确调用但没有任何反应。

**编辑**`DataGridView`：有趣的是，当我从按钮（上一个/下一个）而不是's触发它时，它按预期工作`OnKeyDown`，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:13:55.020

当您上下移动时，网格会自动移动底层绑定源的位置。

如果您希望选择从顶部到按钮，反之亦然 - 您可以处理`grid_KeyDown`事件并检查它的位置。不幸的是，如果您尝试移动位置，它会被 gridview 的`Row_Enter`事件覆盖。从而改变绑定源的位置。

如果`Grid_Keyup`位置已经设​​置，那么您不知道用户是否只是移动到该行，或者他/她是否想离开该行。*但是*在这里设置`bindingSource.Position`确实有效 - 并且不会被网格覆盖。

您也可以使用，`DataGridViewRow.Selected = true`但他不会移动底层绑定源的位置。此外，启用多选的网格也不理想。

丑陋的事实是，您*必须*使用布尔值（就像您在自己的答案中所做的那样）来控制该行是否应该跳转。:(

但是您不需要从`PositionChanged`事件中控制它，您只需处理`grid_Keydown`事件即可：

```
 private bool _changePost;
    private void dataGridView1_KeyUp(object sender, KeyEventArgs e)
    {
        var view = sender as DataGridView;
        var bs = bindingSource1;

        if (e.KeyData == Keys.Up)
        {
            if (bs.Position == 0 && _changePost)
            {
                _changePost = false;
                bs.MoveLast();
            }
            if (bs.Position == 0 && !_changePost)
                _changePost = true;

        }
        else if (e.KeyData == Keys.Down)
        {
            if (bs.Position == bs.Count - 1 && _changePost)
            {
                bs.MoveFirst();
                _changePost = false;
            }
            if (bs.Position == bs.Count - 1 && !_changePost)
                _changePost = true;
        }
    } 
```

这是我能得到的最干净的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:58:32.093

感谢 Jens Kloster，我找到了这个解决方法。正如他提到的，`DataGridView`已经支持移动它的位置`BindingSource`。因此，如果它具有焦点并且您按向上/向下箭头，则`BindingSource`'s `MoveNext`/`MovePrevious`被隐式调用。

我注意到，当我处理`KeyUp`事件（稍后是`KeyDown`事件）时，所选项目“跳跃”了两个位置，一个用于编程，一个用于内置移动。

因此，如果按下向上/向下键，我只需要找到一种方法将位置从第一个移动到最后一个，反之亦然。因此，我处理了`BindingSource.PositionChanged`事件以设置一个 bool 变量，我可以稍后检查：

```
bool positionChanged = false;
private void Source_PositionChanged(object sender, EventArgs e)
{
    positionChanged = true;
}

private void Grid_KeyUp(Object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Up)
        previousItem();
    else if (e.KeyCode == Keys.Down)
        nextItem();

    positionChanged = false;
}

private void previousItem()
{
    BindingSource bs = null;
    switch (this.Type)
    {
        case AdminType.Channel:
            bs = channelBindingSource;
            break;
        default:
            break;
    }
    if (!positionChanged && bs.Position == 0)
        bs.MoveLast();
    else if (!positionChanged)
        bs.MovePrevious();
}

private void nextItem()
{
    BindingSource bs = null;
    switch (this.Type)
    {
        case AdminType.Channel:
            bs = channelBindingSource;
            break;
        default:
            break;
    }
    if (!positionChanged && bs.Position == bs.Count - 1)
        bs.MoveFirst();
    else if (!positionChanged)
        bs.MoveNext();
} 
```

我仍然愿意寻求更好的解决方案，因为这有点笨拙且容易出错。

# macos - 使用来自守护进程的 OSX 系统钥匙串

> ID：15338858
> 
> 赞同：3
> 
> 时间：2013-03-11T12:42:18.507
> 
> 标签：macos, keychain

我有一个需要以 root 身份运行并由 launchd 启动的守护进程。这个守护进程需要存储一些用户提供的凭据，所以我让它使用 SecKeychainOpen 和类似的函数将它们写入系统钥匙串。

我很确定，因为它以 root 身份运行，所以我必须使用系统钥匙串（因为使用用户的登录钥匙串是不正确的，因为它不能以普通用户身份运行）。

我的安装程序在安装结束时使用launchctl 将其加载到launchd 中。问题是它实际上直到重新启动后才开始。我在 plist 中将 OnLOad 设置为 true，但似乎在使用系统钥匙串时，我需要重新启动它才能工作。

我想知道是否有人知道处理这个问题的方法，因为如果不需要重新启动，这将是一个更好的用户体验。所以要清楚，我可以使用launchd以编程方式从守护进程访问系统钥匙串而无需重新启动吗？

感谢您的任何建议或想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:26:54.433

因为我最终发现我的问题根本不是我想的那样，我想我应该把解决方案放在这里。

事实证明（尽管我在几个网站上读到过），使用 launchd 以编程方式使用守护程序访问系统钥匙串是完全可以的，无需重新启动。只需以正常方式加载 plist（当然需要 root 权限），一切正常。

我的问题是我的安装后脚本从未运行过，实际上在某些 Mac 上构建时甚至从未包含在我的 .pkg 安装程序中。显然，如果您没有安装 PackageMaker.app，macports 仍然会为您制作带有安装程序的 dmg，但安装程序是一个目录而不是正确的单个文件，并且它可能缺少某些部分（例如我的 postinstall 脚本）。

PackageMaker.app 可以在 Apple 开发者网站的 Xcode AuxTools 包中找到（然后需要将它放在 /Applications 或 macports 可以找到的其他地方）。

# mysql - mysql 中的 COUNT 和 GROUP BY 问题

> ID：15338861
> 
> 赞同：1
> 
> 时间：2013-03-11T12:42:26.443
> 
> 标签：mysql, sql, count

我有四张桌子，这里是

```
CREATE TABLE `table1` (
`id` int(22) NOT NULL auto_increment,
`createdDate` date NOT NULL,
`created_by` int(44) NOT NULL,
 PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=21 ;

CREATE TABLE `table2` (
`id` int(99) NOT NULL auto_increment,
`CompanyName` varchar(99) NOT NULL,
`createdDate` date NOT NULL,
 `created_by` int(44) NOT NULL,
 PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=19076 ; 
```

同理table3和table4

我想显示这样的结果

```
Date          | userid    |Total_of_table1  | Total_of_table2  |Total_of_table3

2013-03-11    | 1         |20               |23                |24 
```

这个查询将如何？简单的是用户在每个表中的总计日期（天）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:49:27.753

您不能`JOIN`在此处使用，因为没有您可以参考的主表。我的解决方案用于`UNION ALL`合并每个表的总数。

```
SELECT  CreatedDate, 
        CreatedBy,
        SUM(totalTable1) Total_of_table1, 
        SUM(totalTable2) Total_of_table2, 
        SUM(totalTable3) Total_of_table3, 
        SUM(totalTable4) Total_of_table4
FROM
        (
            SELECT  CreatedDate, CreatedBy, 
                    COUNT(*) totalTable1,
                    0 totalTable2,
                    0 totalTable3,
                    0 totalTable4
            FROM    table1
            GROUP   BY CreatedDate, CreatedBy
            UNION ALL
            SELECT  CreatedDate, CreatedBy, 
                    0 totalTable1,
                    COUNT(*) totalTable2,
                    0 totalTable3,
                    0 totalTable4
            FROM    table2
            GROUP   BY CreatedDate, CreatedBy
            UNION ALL
            SELECT  CreatedDate, CreatedBy, 
                    0 totalTable1,
                    0 totalTable2,
                    COUNT(*) totalTable3,
                    0 totalTable4
            FROM    table3
            GROUP   BY CreatedDate, CreatedBy
            UNION ALL
            SELECT  CreatedDate, CreatedBy, 
                    0 totalTable1,
                    0 totalTable2,
                    0 totalTable3,
                    COUNT(*) totalTable4
            FROM    table4
            GROUP   BY CreatedDate, CreatedBy
        ) s
GROUP   BY CreatedDate,  CreatedBy
ORDER   BY CreatedBy, CreatedDate 
```

# cocoa - 可可项目错误

> ID：15338863
> 
> 赞同：0
> 
> 时间：2013-03-11T12:42:29.013
> 
> 标签：cocoa

我的项目从 Xcode 中跳出了这个错误代码。它适用于 OS X。我该如何解决这个问题？

```
2013-03-11 20:39:12.804 Project1[2038:303] Unable to simultaneously satisfy constraints:
   (
        "<NSAutoresizingMaskLayoutConstraint:0x101a1e8e0 h=--& v=--& H:    [NSView:0x100130d40(0)]>",
    "<NSLayoutConstraint:0x10013a5d0 H:[NSScrollView:0x1001310b0]-(17)-|   (Names: '|':NSView:0x100130d40 )>",
    "<NSLayoutConstraint:0x1001382c0 H:|-(17)-[NSScrollView:0x1001310b0]   (Names: '|':NSView:0x100130d40 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x10013a5d0 H:[NSScrollView:0x1001310b0]-(17)-|   (Names: '|':NSView:0x100130d40 )>

Set the NSUserDefault NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints to YES to have -[NSWindow visualizeConstraints:] automatically called when this happens.  And/or, break on objc_exception_throw to catch this in the debugger.
2013-03-11 20:39:12.806 Project1[2038:303] Unable to simultaneously satisfy constraints:
(
    "<NSAutoresizingMaskLayoutConstraint:0x101a1e9a0 h=--& v=--& V:[NSView:0x100130d40(0)]>",
    "<NSLayoutConstraint:0x10013a630 V:|-(102)-[NSScrollView:0x1001310b0]   (Names: '|':NSView:0x100130d40 )>",
    "<NSLayoutConstraint:0x100138320 V:[NSScrollView:0x1001310b0]-(17)-|   (Names: '|':NSView:0x100130d40 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x100138320 V:[NSScrollView:0x1001310b0]-(17)-|   (Names: '|':NSView:0x100130d40 )>

Set the NSUserDefault NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints to YES to have -[NSWindow visualizeConstraints:] automatically called when this happens.  And/or, break on objc_exception_throw to catch this in the debugger. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:50:08.350

You have set your own auto-layout constraint that is conflicting with your other constraint.

This happens as :

If you set the difference between two buttons as 10 and from window border as 20\. But your button sees that it is not 20 from window border and it can not move towards the border since your other constraint is 10\.

![enter image description here](../Images/8b871eb8044083d6f1cc067d2ae1c39a.png)

# cocos2d-android - 在动画模式下触摸CCSprite？[完成]

> ID：15338864
> 
> 赞同：0
> 
> 时间：2013-03-11T12:42:29.457
> 
> 标签：cocos2d-android

当我删除通过 CCAnimation 动画的精灵并触摸它时，我想减少（一个）该值，但我发现的结果是减少了一个值。这个显示分数：

```
public void showLabel(int scr)
{       
    if(scoreLabel != null){
        this.removeChild(scoreLabel,true);
    }
    CGSize winSize = CCDirector.sharedDirector().displaySize();
    scoreLabel = CCLabel.makeLabel("Score : " + scr, "Verdana", 20);
    scoreLabel.setColor(ccColor3B.ccBLACK);
    scoreLabel.setPosition(55f, winSize.height - 15);
    addChild(scoreLabel); 
```

这个处理精灵检测和交集：

```
ArrayList<CCSprite> targetuToDelete = new ArrayList<CCSprite>();    
for(CCSprite targetd : _targetd)
        {
              CGRect targetRect11 = CGRect.make(targetd.getPosition().x - (targetd.getContentSize().width),
                                                targetd.getPosition().y - (targetd.getContentSize().height),
                                                targetd.getContentSize().width,
                                                targetd.getContentSize().height);
              if (CGRect.intersects(projectileRect, targetRect11))
                  targetdToDelete.add(targetd);
              else
                  projectilesToDelete.add(projectile);
        }
        for(CCSprite targetd : targetdToDelete){
            life--;
            lifeLabel(life);
            spriteMoveFinished(targetd);
        } 
```

这是在精灵上提供动画：

```
Random rand = new Random();
    CCSprite targetd = CCSprite.sprite("dance.png");

    CGSize winSize = CCDirector.sharedDirector().displaySize();

    int minX= (int) (targetd.getContentSize().width/2.0f);
    int maxX= (int) (winSize.width-targetd.getContentSize().width/2.0f);
    int rangeX = maxX-minX;
    int actualX = rand.nextInt(rangeX)+minX;

    targetd.setPosition(actualX,0 + (targetd.getContentSize().height / 2.0f));

    _targetd.add(targetd);

    int minDuration = 4;
    int maxDuration = 8;
    int rangeDuration = maxDuration - minDuration;
    int actualDuration = rand.nextInt(rangeDuration) + minDuration;

    CCAnimation animation = CCAnimation.animation("dance");
    for( int i=1;i<7;i++)
        animation.addFrame(String.format("step-%02d.png", i));

    CCMoveTo actionMove = CCMoveTo.action(actualDuration, CGPoint.ccp( actualX, winSize.height));

    CCAnimate action = CCAnimate.action(3f, animation, false);

    CCAnimate action_back = action.reverse();

    CCCallFuncN actionMoveDone = CCCallFuncN.action(this, "spriteMoveFinished");
    CCFiniteTimeAction parallelAction = CCSpawn.actions( action, actionMove, action_back );
    targetd.runAction( parallelAction );
    addChild(targetd,2); 
```

喜欢：值是 5，但是当我触摸动画精灵值时，我想要的是 4，但我发现的结果是 2 或有时是 0。

我做错了什么..请帮我解决这个问题

# android - Eclipse：设备内存不足。尽管它有

> ID：15338874
> 
> 赞同：-6
> 
> 时间：2013-03-11T12:42:47.590
> 
> 标签：android, space

我一直在开发一个应用程序，在每次添加小改进后，我在真实设备上对其进行了测试。即使应用程序最终大小约为 2~3 Mb。尽管我有 20 MB 可用空间来安装应用程序，但它显示了内存不足事件。

**编辑：**不知道为什么，但是当我问这个问题时，我对静态变量知之甚少，所以我认为它们占用了很多空间。但是这个陈述被不恰当地陷害，没有任何意义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:52:51.887

嗯，这是一个很大的话题，但要简明扼要，

是的，静态可以在应用程序停止后占用空间，但如果系统确实需要这个内存空间，这些静态引用将被释放。

您应该意识到这一点，因为在恢复您的应用程序时，您不应该期望这些静态变量已经设置（它们可以在没有任何通知的情况下释放）所以无论如何您都必须重置它们。所以最好是自己将它们设置为 null，这样如果它们被自动释放，你就不会感到惊讶。

它们不应该占用太多内存空间，因为大型对象（如位图或其他大型资源）不应该被静态保存，这是要避免的。

还要记住，android 中最大的内存泄漏通常是由于对 Context 对象的静态引用（这也是要避免的！）。同样，任何视图都在其上下文中获得了引用，因此也不要在视图上保留任何静态引用。

他们会说很多……我希望这些建议适合您想知道的。

# c# - 从 XML 文件中读取单个节点并将其用作条件

> ID：15338876
> 
> 赞同：1
> 
> 时间：2013-03-11T12:43:01.187
> 
> 标签：c#, xml-parsing

我只是试图从 XML 中读取特定节点并将其用作条件中的字符串变量。这让我找到了 XML 文件，并为我提供了全部内容。

```
string url = @"http://agent.mtconnect.org/current";
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(url);
        richTextBox1.Text = xmlDoc.InnerXml; 
```

但是我需要“OFF”的电源状态“ON”（下面的XML部分，可以在线查看整个XML）

```
<Events><PowerState dataItemId="p2" timestamp="2013-03-11T12:27:30.275747" name="power" sequence="4042868976">ON</PowerState></Events> 
```

我已经尝试了我所知道的一切。我只是不太熟悉 XML 文件。其他帖子让我无处可去。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:45:47.810

您可以为此尝试 LINQ2XML：

```
 string value = (string) (XElement.Load("http://agent.mtconnect.org/current")
            .Descendants().FirstOrDefault(d => d.Name.LocalName == "PowerState")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:45:42.267

如果您想避免使用 LINQ，或者它不适合您，您可以使用直接的 XML 遍历：

```
 string url = @"http://agent.mtconnect.org/current";
    System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();
    xmlDoc.Load(url);
    System.Xml.XmlNamespaceManager theNameManager = new System.Xml.XmlNamespaceManager(xmlDoc.NameTable);
    theNameManager.AddNamespace("mtS", "urn:mtconnect.org:MTConnectStreams:1.2");
    theNameManager.AddNamespace("m", "urn:mtconnect.org:MTConnectStreams:1.2");
    theNameManager.AddNamespace("xsi", "http://www.w3.org/2001/XMLSchema-instance");

    System.Xml.XmlElement DeviceStreams = (System.Xml.XmlElement)xmlDoc.SelectSingleNode("descendant::mtS:DeviceStream", theNameManager);
    System.Xml.XmlNodeList theStreams = DeviceStreams.SelectNodes("descendant::mtS:ComponentStream", theNameManager);

    foreach (System.Xml.XmlNode CompStream in theStreams)
    {
        if (CompStream.Attributes["component"].Value  == "Electric")
        {
            System.Xml.XmlElement EventElement = (System.Xml.XmlElement)CompStream.SelectSingleNode("descendant::mtS:Events", theNameManager);
            System.Xml.XmlElement PowerElement = (System.Xml.XmlElement)EventElement.SelectSingleNode("descendant::mtS:PowerState", theNameManager);
            Console.Out.WriteLine(PowerElement.InnerText);
            Console.In.Read();
        }
    } 
```

当遍历根节点中具有默认命名空间的任何文档时，我发现必须有一个命名空间管理器。没有它，文档就无法导航。

我在控制台应用程序中创建了此代码。它对我有用。我也不是大师，我可能在这里犯了一些错误。我不确定是否有某种方法可以在不命名的情况下引用默认命名空间（mtS）。任何知道如何使这种更清洁或更高效的人都请发表评论。

编辑：

对于少一个级别的“clunk”，您可以更改此：

```
if (CompStream.Attributes["component"].Value  == "Electric")
{
    Console.Out.WriteLine(((System.Xml.XmlElement)CompStream.SelectSingleNode("descendant::mtS:Events", theNameManager)).InnerText;);
    Console.In.Read();
} 
```

因为那里只有一个元素，`innerText`你会得到它。

# c++ - 在 C 项目中使用 C++ 库会导致一长串错误

> ID：15338879
> 
> 赞同：3
> 
> 时间：2013-03-11T12:43:13.037
> 
> 标签：c++, c, eclipse, gcc, mingw

我有一个使用**C++ 库的****C 项目**。但是，如果我编译 C 项目，我会得到一长串*“未定义对 XY 的引用”*错误。

 ***这些错误是由 C++ 引用引起的：

**编译时出错：**

```
In function `<c function>':
implicit declaration of function `<function>'
[...] 
```

*（短列表）*
其中*<c function>*是来自 C Project 的调用函数，而*<function>*是来自 C++ 库的函数。

**链接时出错：**

```
undefined reference to `std::cerr'
undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)'
undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::operator<< <char, std::char_traits<char>, std::allocator<char> >(std::basic_ostream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
[...]
undefined reference to `__gxx_personality_v0'
more undefined references to `__gxx_personality_v0' follow 
```

*（很多错误 - 示例短路）*

在静态 C++ 库中，我的类型/函数由`extern "C"`块包围：

```
#ifdef  __cplusplus
extern "C"
{
#endif

    void example();

#ifdef  __cplusplus
}
#endif 
```

为了确保这一点，所有引用 C++ 库的' 都被这样的块`#include`包围。`extern "C"`

**编译器：** C *++ 库*使用**g++**编译，*C 项目*使用**gcc** - 两者都来自**MinGW**。

**CL（链接）：** `gcc -L<search-path here> -shared [...] -lstdc++ -l<C++ library set here>`

*请注意`-lstdc++`国旗。*

**笔记：**

*   C 项目仅包含`.c`和`.h`文件 - 没有`.cpp`
*   [像这里](https://stackoverflow.com/questions/376966/using-c-c-static-libraries-from-iphone-objectivec-apps)所说的那样放置一个“虚拟”cpp文件不起作用
*   MinGW 和 Eclipse CDT 靛蓝
*   C++ 库的名称类似于`lib<NAME>.a`- 它与 链接`-l<NAME>`，搜索路径已设置。

* * *

* * *

# 编辑：

用作链接器`g++`：`undefined reference to` std::cerr'` 等已消失，但我得到另一个错误列表：

```
Warning: .drectve `-aligncomm:"___hexdig_D2A",5' unrecognized
undefined reference to `<function / class / method from C++ Library>'
[...]
undefined reference to `_Unwind_Resume'
[...]
undefined reference to `__gxx_personality_v0'
more undefined references to `__gxx_personality_v0' follow
undefined reference to `__chkstk_ms'
[...] 
```

*（名单缩短）*

例如。在 c++ 库`_Unwind_Resume`中可用。`nm`

* * *

# 例子：

这部分在库（C++）中：

**Test.h** - 标题

```
#ifndef TEST_H_
#define TEST_H_

// --- Pure C++ here ---
#ifdef __cplusplus

#include <string>     /* (1) */
class Test
{
public:
    Test();

    void aMethod();

private:
    int i;
};
#endif

// --- Mixed (C / C++ ) here ---

#ifdef __cplusplus
extern "C"
{
#endif

    extern void doTest();
    extern void invoke();

#ifdef  __cplusplus
}
#endif

#endif /* TEST_H_ */ 
```

**Test.cpp** - C++部分的实现

```
#include "Test.h"

Test::Test() : i(0) { }

void Test::aMethod()
{
    this->i++;
}

void invoke()
{
    Test i;
    i.aMethod();
} 
```

**Test.c** - C 接口的实现（仍在库中！）

```
#include "Test.h"

void doTest()
{
    invoke();
} 
```

现在，这是第二个项目（纯 C）的一部分：

```
#include "Test.h"

int main(int argc, char* argv[])
{
    doTest();

    return 0;
} 
```

**`(1)`**：如果我删除该包含，我可以编译 C 项目。但是为任何类型的类或 c++ 内容添加一个包含会在链接时导致很多错误。不幸的是，我需要包括课程等。

顺便提一句。这是我在这个例子中得到的错误：

```
Test.cpp:(.text+0x1b): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string()'
Test.cpp:(.text+0x64): undefined reference to `_Unwind_Resume'
Test.cpp:(.text$_ZN4TestD1Ev[Test::~Test()]+0x12): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()'
Test.cpp:(.eh_frame+0x6b): undefined reference to `__gxx_personality_v0' 
```

`-lstdc++`在（！）库的标志之后设置标志我得到“仅”这些：

```
Test.cpp:(.text+0x64): undefined reference to `_Unwind_Resume'
Test.cpp:(.eh_frame+0x6b): undefined reference to `__gxx_personality_v0' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:50:03.737

这个问题看起来像 MinGW GCC 中的一个错误。

*   使用**GCC 3.4.5**：*错误*如上所示
*   使用**GCC 4.7.2**：*没有错误*

还要确保`-lstdc++`是你的标志的**最后一个（！） 。**`-l`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:48:11.783

使用 g++ 而不是 gcc 链接您的项目。G++ 将负责在必要的 c++ 运行时实现中进行链接。***

# java - 查找表中重复记录的更快方法

> ID：15338880
> 
> 赞同：1
> 
> 时间：2013-03-11T12:43:13.103
> 
> 标签：java, mysql, sql, sql-server, hibernate

我必须找出表中的所有重复记录。我可以通过使用以下查询来完成它

```
SELECT column4
FROM Table1
GROUP BY column1,column2,column3
HAVING COUNT(*) > 1 
```

但是，虽然表包含大量记录，但 group by 变得非常慢。有没有更快的方法来做到这一点...？

# matlab - 文件夹中文件的索引

> ID：15338883
> 
> 赞同：0
> 
> 时间：2013-03-11T12:43:19.643
> 
> 标签：matlab, file-handling

我有一个包含大约 1000 张图像的数据库，并且正在进行纹理匹配。我已经创建了特征向量，为一张图像创建特征向量需要几分钟时间。现在我正在做匹配部分。由于我不想再次计算测试图像的特征，我想在给定文件夹中找到它的索引。

示例：用户选择 image_XXXXX.jpg。我想要这个文件的“索引”，即它在那个文件夹中的位置

谁能告诉我如何找到用户使用选择的文件（在文件夹中）的索引`MATLAB`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:50:16.920

您可以使用`strcmp`来查找此索引：

```
% get all file names in folder
tmp = dir('*.jpg');

% logical index of the chosen file
logicalIDX = strcmp({tmp.name}, 'image_XXXXX.jpg');

% numerical index of the chosen file
numericIDX = find(logicalIDX); 

% probably more interesting for this particular case: 
% the numerical index of all the files that have to be processed:
numericIDX = find(~logicalIDX); 
```

# php - 作为日期的文件名列表，按日期顺序排列？

> ID：15338885
> 
> 赞同：0
> 
> 时间：2013-03-11T12:43:21.403
> 
> 标签：php, jquery, file, date

我的服务器上有一堆文件，文件名从“april2009”到“march2013”​​，中间每个月都有一个文件（从现在开始每个月都会添加一个新文件）。

我尝试使用“filemtime”按顺序排列，但这给出了一个随机顺序，因为它们似乎已在各处进行了修改。

如何对文件名进行排序并按顺序排列，从最近的第一个开始？

（使用 php 获取文件名，但可以为此使用 jquery 或混合使用）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:44:54.537

[`strtotime`](http://php.net/strtotime)日期转换*很棒*。

检索文件列表后，您可以执行以下操作：

```
$date = strtotime('april2003'); 
```

这会给你：`1049155200`。意思是：

> 2003 年 1 月 4 日至 2:00:00

一旦你有了你的时间戳，你就可以做任何你想做的事情。

这是一个 POC：

```
$dirs = array();
if ($handle = opendir('/path/to/dir')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != ".." && is_dir($entry)) {
            $dirs[strtotime(substr($entry, 0, -5))] = $entry;
        }
    }
    closedir($handle);
}

krsort($dirs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:01:39.180

说得委婉一点，在提出文件命名约定之前应该考虑到这一点。正如评论中所指出的，唯一合理的命名约定是可排序的 yyyy-mm 或 yyyy-mm-dd。

在这种情况下，您唯一的选择是：

1.  加载文件名列表
2.  加载它们时，将名称转换为可排序的形式（因此您可以将 april2003 转换为 200304）
3.  当您加载它们时，将它们放在 $img[$sortablefilename] = $real 文件名形式的数组中（例如 $img['200304'] = 'april2003';）
4.  使用 ksort 对结果数组进行排序
5.  使用真实文件名读取排序数组以显示图像

# java - 如何停止箭头键导航控件

> ID：15338886
> 
> 赞同：1
> 
> 时间：2013-03-11T12:43:24.903
> 
> 标签：java, javafx-2

我试图阻止箭头键在我的示例中的控件中导航。我不知道该怎么做。这是我创建的示例：

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent;
import javafx.scene.layout.FlowPane;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;

public class KeyEventTest extends Application{

    private EventHandler<KeyEvent> keyEventHandler;

    @Override
    public void start(Stage stage) throws Exception {
        // TODO Auto-generated method stub
        Group root = new Group();
        FlowPane f = new FlowPane();
        Button r = new Button("button1");
        Button r2 = new Button("button1");
        Button r3 = new Button("button1");
        f.getChildren().addAll(r,r2,r3);
        root.getChildren().add(f);
        Scene scene = new Scene(root,600,600);
        keyEventHandler = new EventHandler<KeyEvent>() {
            public void handle(final KeyEvent keyEvent) {
                if (keyEvent.getCode() == KeyCode.LEFT || keyEvent.getCode() == KeyCode.UP) {
                    System.out.println("arrow keys");
                }else{
                    System.out.println(keyEvent);
                }
            }
        };
        stage.addEventHandler(KeyEvent.KEY_PRESSED, keyEventHandler);

        stage.setScene(scene);
        stage.show();
    }

    public static void main(String args[]){
        Application.launch(args);
    }

} 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-12T17:48:18.987

我有一个类似的问题，并找到了一个简单的解决方法。由于导航部分的控件在自行实现的 EventHandler 之后触发，因此您可以通过调用简单地停止 KeyEvent 的任何进一步传播

```
 keyevent.consume() 
```

在你的 handle() 方法的最后。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T13:13:11.220

首先，这个问题的答案类似于这个问题的答案：[JavaFX: How to change the focus traversal policy？](https://stackoverflow.com/questions/15238928/javafx-change-focus-traversal-policy)

您可以更改遍历策略，以便在某些情况下不会执行遍历。

另一个决定 - 是添加焦点属性的侦听器，并在不需要时将焦点放回原处（但它适用于所有导航键）：

```
node.focusedProperty().addListener(new ChangeListener<Boolean>(){
            public void changed(ObservableValue<? extends Boolean> ov, Boolean t, Boolean t1) {
                Platform.runLater(new Runnable(){
                    public void run() {
                        node.requestFocus();
                    }
                });                    
            }
        }); 
```

您应该使用 runLater，因为这样的问题：[JavaFx: After dialog, two textfields gain focus而不是一个](https://stackoverflow.com/questions/14841622/javafx-after-dialog-two-textfields-gains-focus-instead-one)

您执行此操作的方式 - 按键处理程序可能并不总是有效，因为操作也可能发生在按键释放时。

在常见情况下，按键行为在行为类中确定，该行为类可通过皮肤类访问。如果你想改变按键的行为，你可以改变行为类。

# mysql - Grails / Tomcat：数据库连接陷入睡眠状态

> ID：15338902
> 
> 赞同：0
> 
> 时间：2013-03-11T12:44:12.103
> 
> 标签：mysql, tomcat, grails

我有一个在 Tomcat 7 下运行的 Grails 应用程序，但在管理 MySQL 连接时遇到问题。

问题是对应用程序的每个新请求（即页面加载）都在创建一个新的 MySQL 连接，并且这些连接没有关闭。相反，它们一直处于 SLEEP 状态，直到 MySQL 服务器最终拒绝接受更多连接。因此，只需快速重新加载站点上的各个页面，就可以创建大量数据库连接。

所以似乎我的连接池没有足够快地关闭与 MySQL 的连接。连接池有许多配置设置，但我不确定需要调整什么来避免这个问题。

这是我的 context.xml 文件中的配置：

```
 <Resource name="jdbc/Production" auth="Container" type="javax.sql.DataSource"
            maxActive="100"
            maxIdle="30"
            maxWait="10000"
            minEvictableIdleTimeMillis="1800000"
            timeBetweenEvictionRunsMillis="1800000"
            numTestsPerEvictionRun="3"
            removeAbandoned="true"
            removeAbandonedTimeout="60"
            logAbandoned="true"
            testOnBorrow="true"
            testWhileIdle="true"
            testOnReturn="true"
            validationQuery="SELECT 1"
            username=""
            password=""
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost/Production"
    /> 
```

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:16:32.573

您没有定义连接池。

将以下代码添加到 context.xml（它似乎是一个 JNDI 数据源）：

```
pooled = "true"
factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 
```

如果您还没有将 JDBC Pool 放入依赖项配置中，请`plugins`在 BuildConfig.groovy 的闭包中添加以下内容：

```
compile ":jdbc-pool:1.0.9.3" 
```

您可以使用其他连接池，但我建议使用 JDBC 池。

# .net - 在哪里可以找到 4.0 的 TPL 数据流版本？

> ID：15338907
> 
> 赞同：11
> 
> 时间：2013-03-11T12:44:31.537
> 
> 标签：.net, .net-4.0, task-parallel-library, nuget, tpl-dataflow

我正在寻找 .NET 4.0 版本的 TPL 数据流库。

Nuget 包有一个 4.0 版本的库，但它似乎面向 .NET 4.5。

我发现了对 4.0 版本的各种引用，例如在这个论坛中：

[http://social.msdn.microsoft.com/Forums/en-US/tpldataflow/thread/6206c714-6dee-4d17-a880-26d0c137a167](http://social.msdn.microsoft.com/Forums/en-US/tpldataflow/thread/6206c714-6dee-4d17-a880-26d0c137a167)

但是提到的链接只是将我重定向到库的 Nuget 页面。

有谁知道我在哪里可以找到针对 .NET 4.0 的工作版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T09:31:19.217

我写信给 TPL 数据流团队的 Steve 关于这个问题，他回复了我下面的下载链接：

[http://download.microsoft.com/download/F/9/6/F967673D-58D6-4E3F-8CA9-11769A0A63B1/TPLDataflow.msi](http://download.microsoft.com/download/F/9/6/F967673D-58D6-4E3F-8CA9-11769A0A63B1/TPLDataflow.msi)

这是一个 CTP 版本，但日期与版本号 4.0 的 Nuget 包匹配，所以我认为它是针对 .NET 4.0 编译的最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:24:34.597

我有同样的经历。也就是说，在我的 Windows XP SP3 (Visual Studio 2010 + .NET 4.)) 上，Nuget 为 .NET 4.5 带来了不兼容的包，这些包被识别为 .NET 4.0。发生在 Reactive (Rx)、Async 扩展等等（我没有跟踪），所以我停止使用 Nuget。

我已经安装了 [Async CTP (Version 3)](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=9983) + [SP1，它](http://www.microsoft.com/en-us/download/details.aspx?id=28568)带来了：

*   AsyncCtpLibrary.dll
*   AsyncCtpLibrary_Phone.dll
*   AsyncCtpLibrary_Silverlight.dll
*   AsyncCtpLibrary_Silverlight.dll
*   系统.线程.任务。**数据流**.dll
*   System.Windows.Controls.Toolkit.dll
*   System.Windows.Controls.Toolkit.Internals.dll

`<My Documents SubFolder>\Microsoft Visual Studio Async CTP\Samples\`我现在参考或包含在项目中 。

.NET 4.5 MSDN 文档代码示例似乎都`HttpClient`来自`System.Net.Http`命名空间，我从 code.msdn.microsoft.com 下载的命名[空间](http://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee)

也就是说，我从后者得到：

*   System.Json.dll (4.0.20118.13260)
*   System.Net.Http.dll (2.0.20118.13260)
*   System.Net.Http.WebRequest.dll (2.0.20118.13260)
*   System.Net.Http.Formatting.dll (4.0.20118.13260)

# javascript - styleCommand 的 CKEditor 默认样式（带按钮的格式样式）

> ID：15338910
> 
> 赞同：1
> 
> 时间：2013-03-11T12:44:34.720
> 
> 标签：javascript, ckeditor

我创建了一个 CKEditor 插件，它使用自定义按钮（而不是样式组合）进行基本的 p、h2、h3、h4 格式设置。它工作得很好，但是如果我取消选中一个元素（例如'h2'），将'div'标签设置为该行的父元素。我想将“p”作为默认元素，并且不能取消选中“p”按钮（除非我单击另一个，例如“h2”按钮）。这怎么可能？

该插件看起来像：

```
CKEDITOR.plugins.add('stylesbuttons_custom',{
    lang:'en',
    icons:'p,h2,h3,h4',
    init:function(editor){
        var order=0;
        var addButtonCommand=function(buttonName,buttonLabel,commandName,styleDefiniton){
                if (!styleDefiniton)
                    return;
                var style=new CKEDITOR.style(styleDefiniton);
                editor.attachStyleStateChange(style,function(state){
                    !editor.readOnly && editor.getCommand(commandName).setState(state);
                });
                editor.addCommand(commandName,new CKEDITOR.styleCommand(style));
                if (editor.ui.addButton){
                    editor.ui.addButton(buttonName,{
                        label:buttonLabel,
                        command:commandName,
                        toolbar:'basicstyles,'+(order+=10)
                    });
                }
            };
        var lang=editor.lang.stylesbuttons_custom;

        addButtonCommand('P',lang.p,'p',{element:'p'});
        addButtonCommand('H2',lang.h2,'h2',{element:'h2'});
        addButtonCommand('H3',lang.h3,'h3',{element:'h3'});
        addButtonCommand('H4',lang.h4,'h4',{element:'h4'});
    }
}); 
```

我像这样加载插件：

`config.extraPlugins='stylesbuttons_custom';`

我将按钮放在工具栏上，例如：

`config.toolbar:[['P','H2','H3','H4','Pre']];`

这是有关该问题的屏幕截图： ![在此处输入图像描述](../Images/73a5a6139a54457a810b56d475c59f28.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:54:39.917

[从CKEditor 论坛](http://ckeditor.com/comment/124380#comment-124380)交叉发布我的答案。

我认为您需要编写自己的命令而不是使用`CKEDITOR.styleCommand`.

`CKEDITOR.styleCommand`它应该与样式尚未应用于当前选择时完全相同。

但是当再次点击它应该应用段落样式，而不是删除以前应用的样式。例如：

```
styleCommand.prototype.exec = function( editor ) {
    editor.focus();

    if ( this.state == CKEDITOR.TRISTATE_OFF )
        editor.applyStyle( this.style );
    else if ( this.state == CKEDITOR.TRISTATE_ON )
        editor.applyStyle( paragraphStyle );
}; 
```

PS。我创建了一张票：[http](http://dev.ckeditor.com/ticket/10190) ://dev.ckeditor.com/ticket/10190 ，因为我认为删除块样式应该恢复到段落（in `enterMode=P`）。现在使用上述解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:54:01.887

是的，@Reinmar 通知 CKEditor 的 style.js 中有一个错误，其中 this._.enterMode 没有定义。

在 style.js 上执行此操作，解决问题：

```
this._ = {
  definition: styleDefinition,
  enterMode: CKEDITOR.config.enterMode
}; 
```

从现在开始，当取消选中样式按钮时，块将更改为默认的“p”元素。

现在我完整的工作插件看起来像：

```
(function(){
CKEDITOR.plugins.add('custombuttons',{
    lang:'hu,en,de,ro',
    init:function(editor){

        var order=0,t=this,lang=editor.lang.custombuttons;

        // addButtonCommand helper
        var addButtonCommand=function(buttonName,buttonLabel,commandName,styleDefiniton){
            var style=new CKEDITOR.style(styleDefiniton);
            var styleCommand=function(style){
                this.style=style;
                this.allowedContent=style;
                this.requiredContent=style;
                this.contextSensitive=true;
            };
            styleCommand.prototype={
                exec:function(editor){
                    editor.focus();
                    if (this.state==CKEDITOR.TRISTATE_OFF)
                        editor.applyStyle(this.style);
                    else if (this.state==CKEDITOR.TRISTATE_ON)
                        editor.removeStyle(this.style);
                    if(commandName!='fakecommand'){editor.execCommand('fakecommand');editor.execCommand('fakecommand');} /* hack to change button state properly */
                },
                refresh:function(editor,path){
                    this.setState(path&&this.style.checkApplicable(path)?(this.style.checkActive(path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):CKEDITOR.TRISTATE_DISABLED);
                }
            };
            editor.addCommand(commandName,new styleCommand(style));
            if(editor.ui.addButton){editor.ui.addButton(buttonName,{label:buttonLabel,command:commandName,toolbar:'basicstyles,'+(order+=10),icon:t.path+'images/'+commandName+'.png'});}
        };

        // _fakebutton (hack)
        addButtonCommand('_fakebutton','','fakecommand',{element:'span'});

        // style buttons
        addButtonCommand('P',lang.p,'p',{element:'p'});
        addButtonCommand('H2',lang.h2,'h2',{element:'h2'});
        addButtonCommand('H3',lang.h3,'h3',{element:'h3'});
        addButtonCommand('H4',lang.h4,'h4',{element:'h4'});
        addButtonCommand('Pre',lang.pre,'pre',{element:'pre'});
        addButtonCommand('Mini',lang.mini,'mini',{element:'p',attributes:{class:'mini'}});
        addButtonCommand('Important',lang.important,'important',{element:'span',attributes:{class:'important'}});
        addButtonCommand('Comment',lang.comment,'comment',{element:'span',attributes:{class:'comment'}});
        addButtonCommand('Mark',lang.mark,'mark',{element:'mark'});
        addButtonCommand('ImgLeft',lang.imgLeft,'imgLeft',{element:'img',attributes:{class:'imgleft'}});
        addButtonCommand('ImgRight',lang.imgRight,'imgRight',{element:'img',attributes:{class:'imgright'}});
        addButtonCommand('ImgCenter',lang.imgCenter,'imgCenter',{element:'img',attributes:{class:'imgcenter'}});

        // button shortcut keys
        editor.setKeystroke(
        [
            [CKEDITOR.CTRL+48,'p'], // Ctrl+0
            [CKEDITOR.CTRL+49,'h2'], // Ctrl+1
            [CKEDITOR.CTRL+50,'h3'], // Ctrl+2
            [CKEDITOR.CTRL+51,'h4'], // Ctrl+3
        ]);
    }
});
})(); 
```

代码中仍然存在 hack。我需要运行一个“假命令”来真正更新（重新过滤？）更改的标签及其所有父标签。例如，“p.mini”按钮在多次单击时会导致问题（状态未更新）。所以仍然有一个不优雅的解决方案。知道如何在应用样式后强制更新或重新过滤代码吗？

# ios - UIWebview 未获取链接的 CSS 资源

> ID：15338923
> 
> 赞同：0
> 
> 时间：2013-03-11T12:45:33.987
> 
> 标签：ios, uiwebview

我正在尝试将本地 html 内容加载到 uiwebview 中。我已经准备好了 html 内容，我正在通过如下代码所示的机制向内容添加一个在线 css 文件的引用。但是，我面临的问题是当我加载 webview 时，没有样式。此外，我在 Charles Proxy 中进行了验证，没有将 iphone.css 文件提取到我的基本服务器的传出调用。理想情况下，在加载 html 页面时，uiwebview 应该获取所有引用的资源，但由于某种我不知道的原因，它没有获取 css 文件。

请查看并让我知道我的代码是否存在我无法在此处识别的问题？

```
NSString* htmlString = @"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"> <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"he\" lang=\"he\"><head><link type=\"text/css\" href=\"http://<base_server>/resources/iphone.css\" /><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /></head><body>%@</body></html>";

        UIWebView *webview = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, frame.size.height)];
        NSLog(@"%@",[NSString stringWithFormat:htmlString,entry.body]);
        [webview loadHTMLString:[NSString stringWithFormat:htmlString,entry.body] baseURL:[NSURL URLWithString:@"http://<base_server>/"]];

        [self addSubview:webview]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:10:27.323

很难判断 HTML 中是否有任何拼写错误，所有双引号都在该字符串中转义。为什么不将 HTML 从字符串中拉出并放入文件中，读取该文件并将内容放入正文中。该字符串中的标记可能有错误。这将允许您在单独的文件中更轻松地阅读它。

就像是：

```
NSError *error;
NSStringEncoding encoding;
NSString *htmlFilePath = [[NSBundle mainBundle] pathForResource: @"Sample" 
                                                         ofType: @"html"];
NSString *htmlString = [NSString stringWithContentsOfFile:htmlFilePath 
                                             usedEncoding:&encoding 
                                                    error:&error];

NSString *html = [NSString stringWithFormat:htmlString, entry.body];

NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];

[webview loadHTMLString:html baseURL:baseURL]; 
```

# tomcat - 实现声明式安全时的 HTTP 状态 403

> ID：15338942
> 
> 赞同：1
> 
> 时间：2013-03-11T12:46:12.973
> 
> 标签：tomcat, struts2, security

我做了以下更改以在 tomcat 中实现声明性安全性（在 struts2 应用程序中）

我在 tomcat-users.xml 中添加了以下内容

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
  <role rolename="Manager"/>
  <user username="manager1" password ="password1" roles="Manager"/>
</tomcat-users> 
```

在我的 web.xml 中，我做了以下更改

```
<security-role>
  <role-name>Manager</role-name>
</security-role>
<login-config>
  <auth-method>BASIC</auth-method>
</login-config>  

<security-constraint>
  <web-resource-collection>     
    <web-resource-name>MANAGER Access</web-resource-name>    
    <url-pattern>/manager/*</url-pattern>   
    <http-method>DELETE</http-method>    
    <http-method>PUT</http-method>    
    <http-method>HEAD</http-method>   
    <http-method>OPTIONS</http-method>   
    <http-method>TRACE</http-method>     
    <http-method>GET</http-method>    
    <http-method>POST</http-method>  
  </web-resource-collection>  

  <auth-constraint>
    <role-name>Manager</role-name>
  </auth-constraint>
</security-constraint> 
```

当我访问 URL appcontextname/manager/something.action 时，它会提示输入用户名和密码，在我提供详细信息后它会给我以下错误

HTTP 状态 403 - 访问请求的资源已被拒绝

# user-interface - Visual Studio 2012 总是以最大化窗口启动，我该如何防止它？

> ID：15338946
> 
> 赞同：1
> 
> 时间：2013-03-11T12:46:24.610
> 
> 标签：user-interface, visual-studio-2012, startup, behavior

当 Visual Studio 的主窗口位于屏幕上的某个区域时，我总是退出它。但是当它启动时，它的窗口总是最大化的。如果我单击最大化按钮，它会恢复到我在上一个会话中留下的大小。

在每次程序启动时都这样做很麻烦。它覆盖了不应该覆盖的屏幕区域；使在该领域工作的其他工具落后。更麻烦的是 Visual Studio 体积庞大且启动缓慢。

有没有办法设置启动窗口的大小和位置？*就像，在某个地方选中了“启动主窗口最大化”选项，但我在Tools > Options*下找不到这样的东西。Visual Studio 2010 确实做到了这一点。

版本：Visual Studio 2012 Ultimate 11.0.51106.01 更新 1
主题：黑暗

# c++ - 在 For 循环中带有 {} 且不带 {} 的 If 语句

> ID：15338948
> 
> 赞同：1
> 
> 时间：2013-03-11T12:46:26.053
> 
> 标签：c++, loops, if-statement, for-loop

我在向量中有一个队列循环，我需要在队列循环中搜索以找到最小索引队列以及最大大小队列。

我正在使用以下代码

```
int min_index = 0;
int max_size = -1;
std::size_t size = q.size();
for( i=0; i<size; i++){ //accessing loop of queues
    if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is min_index is the minimum size queue
    if(q[i].size() > max_size)
        max_size = q[i].size(); // maximum size queue
} 
```

我有点怀疑是否像下面的代码一样使用`{}`for each`if statement`

```
int min_index = 0;
    int max_size = -1;
    std::size_t size = q.size();
    for( i=0; i<size; i++){ //accessing loop of queues
        if(q[min_index].size() > q[i].size()){
            min_index = i; // Now q[min_index] is the shortest queue
              }
        if(q[i].size() > max_size){
            max_size = q[i].size(); // longest queue        
            } 
} 
```

哪一个是正确的，有和没有的有什么区别`{}`。对不起，如果这是一个愚蠢的问题。我是编程新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:47:54.857

在您的情况下，这两个代码之间**没有区别。**

```
if(SOMETHING)
   DO_SOMETHING; 
```

是**一样**的

```
if(SOMETHING) {
   DO_SOMETHING;
} 
```

但

```
 if(SOMETHING)
   DO_SOMETHING_1;
   DO_SOMETHING_2;   //DO_SOMETHING_2 will be performed whether the `if` condition
                     //is satisfied or not 
```

不一样**_**

```
 if(SOMETHING) {
   DO_SOMETHING_1;
   DO_SOMETHING_2;   //DO_SOMETHING_2 will be performed only if the `if` condition
 }                   //is satisfied, since it is inside the curly parentheses 
```

在您的情况下，由于该`if`块仅包含一个语句，因此不需要大括号（**虽然，如果它让您感到困惑，建议使用它们来澄清事情**）..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:49:14.047

通常，应用的最佳规则是：

> 如有任何疑问，请使用 {}

同样适用`()`

然而，在你的情况下，两者都是等价的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:49:23.697

它们的运行方式相同，但如果您需要返回并在 if 语句后有多行代码而不必添加 {}，则有些人更喜欢以这种方式使用 {}。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:50:07.147

以这种方式使用的括号称为块语句，用于封装一个或多个语句。一个这样的块等于一个语句，它满足期望一个语句作为语句体的解析器`if`。

所以不，两者之间真的没有区别。在一个语句中，您有一个单一的语句，在另一种类型的单一语句中，恰好包含其他语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T12:54:19.580

***没有不同：***

```
int min_index = 0;
int max_size = -1;
std::size_t size = q.size();
for( i=0; i<size; i++){ //accessing loop of queues
    if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is min_index is the minimum size queue
    if(q[i].size() > max_size)
        max_size = q[i].size(); // maximum size queue
} 
```

唯一的区别是如果你想在 if 中写多于一行，例如

```
if(q[min_index].size() > q[i].size())
        min_index = i;
        ++i; 
```

在这种情况下，如果您的为真，则只会`min_index = i;`调用行。`if(q[min_index].size() > q[i].size())`

# javascript - 单击链接时删除 Div

> ID：15338953
> 
> 赞同：0
> 
> 时间：2013-03-11T12:46:35.470
> 
> 标签：javascript, jquery

我正在编写一个代码，我想在单击其内部链接（“删除”）时删除一个 div。我知道这个问题可能会重复，我尝试了很多方法但没有奏效。我不知道有什么问题。

这是我的 HTML 渲染代码：

```
<div id="ViewRows">
    <br>
    <div class="ViewRow"> NOS: FA Comment: finance
        <a class="deleteViewRow" href="#">Delete</a>
    <br>
    </div>
    <div class="ViewRow">
       NOS: TPA Comment: Assistance
       <a class="deleteViewRow" href="#">Delete</a>
       <br>
    </div>
</div> 
```

这是我用于删除该 div 的 javascript 代码。

```
$("a.deleteViewRow").live("click", function () {
   $(this).parents("div.ViewRow:first").remove();
   return false;
}); 
```

我还尝试了以下javascript：

```
$("#ViewRows").on("click", "a.deleteViewRow", function () {
    $(this).closest("div.ViewRow").andSelf().remove();
    return false;
}); 
```

我在另一个页面上尝试了相同的代码。它正在工作，但是当我在另一个页面中应用相同的逻辑时。它不工作。我知道你们都是对的，但我不知道有什么问题。在萤火虫它甚至没有进入功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:49:39.380

这应该有效：

```
$("#ViewRows").on("click", "a.deleteViewRow", function (e) {
    // prevent browser from following link
    e.preventDefault();
    // ".andSelf()" can be skipped - once the parent div is removed, the link gets removed as well
    $(this).closest("div.ViewRow").remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:58:48.913

这个简单而有效的代码工作正常：http: [//jsfiddle.net/L2CsH/](http://jsfiddle.net/L2CsH/)

```
$("#ViewRows").on("click", "a.deleteViewRow", function () {
    $(this).parent().remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:48:07.353

您需要防止链接的默认操作。`event.preventDefault()`

```
$("#ViewRows").on("click", "a.deleteViewRow", function (e) {
    e.preventDefault();
    $(this).closest("div.ViewRow").remove(); //.andSelf() is not needed here. 
    //return false;
}); 
```

演示：[删除 Div JSFiddle](http://jsfiddle.net/fNzku/)

# jquery-masonry - 将 jquery masonry 集成到 zurb 基础网格中

> ID：15338954
> 
> 赞同：8
> 
> 时间：2013-03-11T12:46:51.223
> 
> 标签：jquery-masonry, zurb-foundation

我在将砌体与 Foundation 网格布局集成时遇到问题。基本上对于具有不同高度的相同宽度的图像，砌体按预期工作，但在某些断点处，网格将只有两列布局，而不是通常的四列布局。

但是，如果您继续最小化浏览器宽度，则四列会返回，因此不可能没有空间来显示它们。

```
var $container = $('#work_grid');

$container.imagesLoaded( function(){
 $('#work_grid').masonry({
  itemSelector: '.work_item',
  isAnimated: true,    
}); 
```

HTML

```
<div class="row">
    <div class="twelve columns">
        <div id="work_grid" class="block-grid four-up">
            <li class="work_item"><img src="stylesheets/images/work1.jpg" alt=""></li>
            <li class="work_item"><img src="stylesheets/images/work2.jpg" alt=""></li>
            <li class="work_item"><img src="stylesheets/images/work3.jpg" alt=""></li>
            <li class="work_item"><img src="stylesheets/images/work4.jpg" alt=""></li>
            <li class="work_item"><img src="stylesheets/images/work5.jpg" alt=""></li>
            <li class="work_item"><img src="stylesheets/images/work6.jpg" alt=""></li>
            <li class="work_item"><img src="stylesheets/images/work7.jpg" alt=""></li>
        </div> <!-- /.block-grid four-up -->
    </div> <!-- /.twelve columns -->
</div> <!-- /.row --> 
```

![最初工作](../Images/b44244ec91d4bd4e822e5e6604faeb91.png) ![现在不工作](../Images/8a82f6bee16109696368d3142e20098d.png)

![再次工作](../Images/a2337f34faec8cdc0c1de5dccf328c15.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T21:26:50.787

回答您关于*为什么*会发生问题的问题：不幸的是，由于集成砖石和框架可能会很棘手，因为两者都试图以完全不同的方式控制图像（基金会想要调整大小而砖石想要重新定位）。解决此问题的最佳方法是使用基础容器作为砌体容器，内部的图像不会调整大小，而是会在流体容器中重新定位，同时将容器**居中**以避免出现在容器右侧的尴尬边距问题当图像无法放入额外的列时。

===**更新**===

如果您想使用它，我在[此 github 存储库](https://github.com/dylanbaumann/Zurb-Foundation-and-Masonry)中使用本次更新时最新的 Foundation 版本 (5.0.2) 更新了代码库。

# ruby-on-rails - Ruby 1.8.7 中的 String.encode() 替代方法，用于清理 UTF-8 的输入

> ID：15338956
> 
> 赞同：0
> 
> 时间：2013-03-11T12:47:02.793
> 
> 标签：ruby-on-rails, ruby, encoding, utf-8, sanitization

我刚刚发现 String.encode 方法仅适用于 Ruby -v 1.9.3 及更高版本。我在 Rails 环境中工作，我无法改变这一点。我使用这种方法来纠正无效的 UTF-8 输入。

我发现的唯一不错的选择是通过 iconv.conv() 方法，但是 iconv 在较新的 ruby​​ 版本中已被弃用，我希望我的代码闻起来像花一样，即使/当我的系统管理员决定升级时。

作为参考，我从[这里](http://po-ru.com/diary/fixing-invalid-utf-8-in-ruby-revisited/)找到的替代方案：

```
ic = Iconv.new('UTF-8//IGNORE', 'UTF-8')
valid_string = ic.iconv(untrusted_string + ' ')[0..-2] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:03:56.850

看看[charlock_holmes](https://github.com/brianmario/charlock_holmes) gem，它涵盖了我们在 1.9 之前的大部分编码需求。

# c# - OrderByDescending 在嵌套的 linq 语句中不起作用

> ID：15338957
> 
> 赞同：0
> 
> 时间：2013-03-11T12:47:12.257
> 
> 标签：c#, linq

在 Linqpad 中，我可以看到正确的列表。但在代码中，放入列表集合后，排序依据不适用于 BeginDate。如果我将 BeginDate 与 Max 一起使用，它可以工作。我不明白我错在哪里？

```
 var templist =  contentRepository
                       .Get(q => (q.Status == (int)StatusEnum.Active) &&     
                           (q.CategoryId == category.GetHashCode() || q.Category.ParentId == category.GetHashCode())                   
                           && q.MinorVersion == 0
                           && q.MajorVersion > 0) 
                       .GroupBy(q => q.VersionId)
                       .OrderByDescending(q => q.Key)
                       .Select(q => new 
                       {
                           VersionId        = q.Key,
                           Id               = q.Max(x => x.Id),
                           MajorVersion     = q.Max(x => x.MajorVersion), 
                           UpdatedAt        = q.Max(x => x.UpdatedAt), 
                           //BeginDate        = q.Max(x=>x.BeginDate),
                           BeginDate        = (q.OrderByDescending(x => x.Id).Take(1).Select(x=>x.BeginDate)).First(),
                           Title = (q.OrderByDescending(x => x.Id).Take(1).Select(x => x.Title)).First(),
                           ShowOnHomePage   = (q.OrderByDescending(x => x.Id).Take(1).Select(x=>x.ShowOnHomePage)).First()
                        })
                       .OrderByDescending(x => x.BeginDate)                           
                       .Take(maxItemCount)
                       .ToList();

            List<ContentEntity> contents = new List<ContentEntity>();

        templist.ForEach(q => contents.Add(
                                         contentRepository
                                        .Get(x => x.VersionId == q.VersionId && x.MajorVersion == q.MajorVersion && x.MinorVersion == 0)
                                        .FirstOrDefault()                                        
                                        ));

        return contents.Where(q => q.ShowOnHomePage == true)
                       .OrderByDescending(q => q.MajorVersion)
                       .OrderByDescending(q => q.BeginDate)
                       .Take(maxItemCount)
                       .ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:05:13.517

您是按 订购`Id`，而不是按订购`BeginDate`。等效代码

```
q.Max(x => x.BeginDate) 
```

将会

```
q.OrderByDescending(x => x.BeginDate).Take(1).Select(x => x.BeginDate).First() 
```

或简化

```
q.OrderByDescending(x => x.BeginDate).First().BeginDate 
```

# jquery - 检测多个包含相同的 javascript 文件/库

> ID：15338958
> 
> 赞同：0
> 
> 时间：2013-03-11T12:47:13.503
> 
> 标签：jquery, html

我正在处理一个 html 页面，其中动态加载了一个 jQuery 库的对接，因此有可能同一库被加载两次。如何检测同一个文件是否被加载两次以避免并发症？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:10:06.310

我认为不可能做到可靠。我只看到过一次尝试，但它在任何浏览器中都不能可靠地工作。看看[这个](http://numist.net/post/2010/include-guard-for-javascript.html)。

通过让每个 js 文件定义该文件独有的一些函数，并且仅在该函数不存在时才包括其自身，这可能是可能的。类似于 C/C++ 包括警卫。但不知道如何让它正常工作，并且它不会包含现有的 js 文件，例如 jQuery。

# iphone - 在没有 Mapview 的情况下显示注释

> ID：15338959
> 
> 赞同：1
> 
> 时间：2013-03-11T12:47:20.913
> 
> 标签：iphone, augmented-reality, mkmapview

我正在做与增强现实相关的项目。我必须在透明背景上显示注释。我有一系列纬度，经度。

我在网上搜索，几乎所有主题都与mapview上的显示有关。

是否可以在 uiview 或透明 mapview 上显示注释。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T05:15:07.917

是的，假设您想将这些注释覆盖在相机视图上是可能的。有一个很好的开源库，

[http://www.mixare.org/](http://www.mixare.org/)

注意：这个库不是很好的性能虎钳，但它可以达到目的。如果您正在为高端客户制作项目，请选择 ARLab SDK。

[http://www.arlab.com/](http://www.arlab.com/)

他们很好地完善了增强现实。

# javascript - 将提示文本动态添加到滑块

> ID：15338960
> 
> 赞同：0
> 
> 时间：2013-03-11T12:47:21.740
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs-mvc

在我的项目中，我试图将[`tip text`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.slider.Multi-cfg-tipText)(config) 动态添加到滑块。怎么做？我需要动态添加它，因为我在“控制器”中生成变量数组，它保存滑块每个值的文本（用于提示文本）。

```
var slider = Ext.getCmp('slider')
slider.setTipText(arrayOfVariables)    //What should I do here instead? 
```

`setTipText`文档中没有这样的方法。那我应该用什么？

**编辑**：

```
{
        xtype:'slider',
        animate: false,
        //plugins: [Ext.create('App.view.SliderOverride')],
        cls: 'sliderStyle',
        width: "80%",
        id: 'slider',
        value: 36/2, //must be current month
        //increment: 10,
        minValue: 1,
        maxValue: 36,
        useTips: true,          
        tipText: function(thumb){
            alert("hello");
            App.getController('TaskController')._arrMonthView[thumb.value].month;
        },
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:20:10.383

tipText 需要一个函数配置，因此您可以添加一个将使用控制器中的变量的函数；

```
Ext.create('Ext.slider.Multi', {
    ....
     tipText: function(){
          return App.getController('your controller').yourVariable
     },
    .....
}); 
```

这是在创建滑块时添加的，因此您无需修改​​它，只需修改控制器中的变量即可。所以不需要重新设置提示文字功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:14:03.183

我通过使用[`getText`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.slider.Tip-method-getText)Ext.slider.Tip 的方法解决了这个问题。

> 用于创建出现在提示正文中的文本。默认情况下，这仅返回 Tip 附加到的 Slider Thumb 的值。覆盖以自定义。

例如在什么情况下可以使用，你看看这个**[链接](https://stackoverflow.com/a/15249016/1577396)**

# php - 如何使用 PHP 计算字符串中的特殊字符

> ID：15338962
> 
> 赞同：0
> 
> 时间：2013-03-11T12:47:26.183
> 
> 标签：php, regex, string, function

我需要知道如何使用 PHP 查找字符串中特殊字符的出现次数

这是代码...

```
<?php

$message=$_POST['Message'];
//$rep=preg_replace("@ # $ % ^ & / . * @"," ",$message);
//$rep=preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '', $message);
$rep = preg_replace("/[^a-zA-Z]+/", "", $message);
echo "There are ".str_word_count($message)." words found in the given message"."<br/>";

$len=strlen($rep);
echo "length of the message is ".$len;
$delims="?#";
$word = strtok($message, $delims);

echo "delim ".$word."<br/>";
echo $delimlen=strlen($word)."<br/>";

echo "without special ".$rep;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:49:41.987

使用这个正则表达式，看看这是否有帮助

```
$pattern = '/[!@#$%^&*()]/'  // will match one occurrence of any symbol inside the [] 
```

或者

```
$pattern =  '![^A-z0-9]!i' 
```

[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)

```
int preg_match_all ( string $pattern , string $subject [, array &$matches [, int $flags = PREG_PATTERN_ORDER [, int $offset = 0 ]]] ) 
```

对字符串执行全局正则表达式匹配。搜索主题以查找与模式中给出的正则表达式的所有匹配项，并按照标志指定的顺序将它们放入匹配项中。

找到第一个匹配后，从最后一个匹配的末尾继续进行后续搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:55:01.573

如果您想获得更换零件的数量，您的 preg_match 调用需要另外 2 个参数，如下所示：

```
$replaceCount = 0;
preg_replace("/[^a-zA-Z]+/", "", $message, -1, $replaceCount); 
```

# localization - NSIS MUI 语言 ID

> ID：15338963
> 
> 赞同：0
> 
> 时间：2013-03-11T12:47:31.707
> 
> 标签：localization, nsis

我需要将所选语言写入安装文件夹中的文件以本地化应用程序。

我知道如何显示选择语言页面，但我想在文件中写入所选语言的 id。在 MUI_PAGE_INSTFILES 期间执行的部分中，我有这个：

```
 FileOpen $0 "$DESKTOP\xy.txt" w     #Just testing, will go inside install directory later
 FileWrite $0 "$LANGUAGE" 
 FileClose $0 
```

但它不起作用。当 $LANGUAGE 被其他字符串替换时，它会创建文件并将字符串放入其中。请问有什么建议吗？谢谢你。

# sql-server - ms sql 提交失败，回滚未完成

> ID：15338966
> 
> 赞同：0
> 
> 时间：2013-03-11T12:47:50.943
> 
> 标签：sql-server, spring, hibernate, jboss7.x, jta

我在 MS SQL 2008 中有一个父表和子表，并尝试使用启用了级联的休眠执行保存调用。重要的表规范：父表有一个标识列，子表有一个长度为 50 的 varchar 列。

环境：spring，jboss 7.1.1，hibernate 3，jta事务（通过从jndi获取事务从代码中启动/提交/回滚事务）

问题出现时：我在子表 varchar 列中插入的数据超过 50。

仅当我执行提交时才会触发子表上的插入查询，并且由于字符长度而无法插入。因此我得到一个异常，我捕获异常并执行回滚，回滚失败，因为事务处于非活动状态。

问题：这里的问题是父数据被提交，这不是我想要的。如何确保事务完全回滚？

# ruby - AuthenticationFailed net-ssh ruby

> ID：15338968
> 
> 赞同：0
> 
> 时间：2013-03-11T12:47:55.563
> 
> 标签：ruby, networking, connection, net-ssh

当我尝试 Net::SSH.start 到我的 debian ssh 服务器并传输文件时，每次我都会收到一条非常奇怪的错误消息 - `start': Net::SSH::AuthenticationFailed, but all the authentication data是正确的，我不知道是什么问题。有没有人面临同样的问题？该代码是在 ruby​​ 上编写的，并且正在使用 net/ssh 模块，这是一个代码：

```
require 'rubygems'
require 'net/ssh'

def copy_file(session, source_path, destination_path=nil)
  destination_path ||= source_path
  cmd = %{cat > "#{destination_path.gsub('"', '\"')}"}
  session.process.popen3(cmd) do |i, o, e|
    puts "Copying #{source_path} to #{destination_path}... "
    open(source_path) { |f| i.write(f.read) }
    puts 'Done.'
  end
end

Net::SSH.start("192.168.112.129", 
                :username=>'username',
                :password=>'password') do |session|
  copy_file(session, 'D:/test/1.txt')
  copy_file(session, '/home/timur/Documents/new_file.rb"')
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:20:06.287

`:username`net/ssh 2.6中没有选项，你可以像参数一样设置它：

```
Net::SSH.start('192.168.112.129', 'username', password: 'password') do |ssh|
  foo
end 
```

# erlang - erlang分布式编程

> ID：15338972
> 
> 赞同：2
> 
> 时间：2013-03-11T12:47:59.150
> 
> 标签：erlang

我有一个具有以下要求的应用程序。

在我的 Erlang App 运行期间。我需要在本地主机或远程主机上启动一个或多个远程节点。

我查看了以下选项

1) 要在本地主机上启动远程节点，请使用从模块或 net_kernel:start() API。但是对于后者，似乎无法指定启动脚本文件名等选项。

2）在任何情况下，我都不需要从属配置，因为我需要模仿在本地和远程主机上产生的节点的类似行为。在我当前的设置中，我无权 rsh 到远程主机。我能想到的解决方法是在远程主机上运行一个默认节点，以便通过 spawn 或 rpc:async_call 和 os:cmd 组合启用远程节点创建

是否有任何其他 API 接口来启动 erl ？

我不确定这是解决此问题的最佳或最干净的方法，我想知道 Erlang 的相同方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:54:15.297

有一个[pool](http://www.erlang.org/doc/man/pool.html)模块可以帮助你，但是它使用了`slave`模块（其中`rsh`的）。

# javascript - TypeError xxx 不是函数

> ID：15338973
> 
> 赞同：1
> 
> 时间：2013-03-11T12:48:00.923
> 
> 标签：javascript

所有，我正在努力解决一个错误`TypeError: curTemplete.addSection is not a function`，请原谅我不熟悉 js OO，请帮助查看我的问题。谢谢。

代码如下所示。

**Templete.js**

```
LayoutTemplete=function(currentTmpContainer,templeteId,data)
{
    var curTemplete = this;

    curTemplete.addSection(null, null);//this line run with error above.

    this.addSection = function(uiItem, data) {
        alert('ddd');
    };
}; 
```

在**dom 就绪事件中**。

```
function loadTempleteContent(templeteId)
{
    var jData=[{name: 'jerry'},{name: 'mike'},{name: 'claire'}];
    var tmp = new LayoutTemplete($("#currentTmpContainer"),templeteId,jData);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T13:04:52.697

您不能在定义之前调用函数。这与 OOP 无关。考虑这个例子：

```
foo();
var foo = function() {
    alert(42);
}; 
```

它会抛出类似的错误。

**在访问之前**定义函数/属性：

```
this.addSection = function(uiItem, data) {
    alert('ddd');
};

this.addSection(null, null); 
```

更好的是，`addSection`在原型上定义，这样您就不会在每次创建`LayoutTemplete`.

```
LayoutTemplete = function(currentTmpContainer,templeteId,data) {
    this.addSection(null, null);
};

LayoutTemplete.prototype.addSection = function(uiItem, data) {
    alert('ddd');
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:07:06.933

Felix 试图告诉你你的问题是什么，这里是明确的：

```
var curTemplete = this;

curTemplete.addSection(null, null);//this line run with error above. 
```

在这里，您引用并尝试调用`curTemplete.addection`尚未分配值的 ，因此它解析为`undefined`。尝试调用时， undefined 不是函数（正如错误告诉您的那样）。`addSection`直到下面的分配才被定义：

```
this.addSection = function(uiItem, data) {
    alert('ddd');
}; 
```

现在它被定义了。在调用之前移动赋值（如果你要赋值`this`给一个局部变量，你也可以使用它）：

```
var curTemplete = this;
curTemplete.addSection = function(uiItem, data) {
    alert('ddd');
};
curTemplete.addSection(null, null); 
```

# android - Handler.sendEmptyMessage(0) 中的零是什么意思

> ID：15338977
> 
> 赞同：6
> 
> 时间：2013-03-11T12:48:12.373
> 
> 标签：android

我正在学习 Android，但我一直坚持这个说法。来自谷歌：

> 发送仅包含 what 值的消息。
> 
> 退货
> 
> 如果消息已成功放入消息队列，则返回 true。失败时返回 false，通常是因为处理消息队列的 looper 正在退出。

有人请为我解释包含零的消息将做什么。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T12:54:17.487

这意味着`what`价值。`what`基本上是一个整数，允许接收者识别它接收到的消息。

您的 handleMessage 函数如下所示

```
public void handleMessage (Message msg) 
```

你被传递了一个`Message`对象，你可以检查公共字段`what`来弄清楚消息是关于什么的。( `msg.what`)

例如。

您发送两种类型的消息，带有`what`值`1 for success`和`0 for failure`

所以你的 handleMessage 函数看起来像这样

```
public void handleMessage (Message msg) {
    switch (msg.what) {
        case 1:
            //success handling
            break;

        case 0:
            //failure handling
            break;
    }
} 
```

现在你可以拥有`sendEmptyMessage(0)`成功和`sendEmptyMessage(1)`失败。

请记住，您不必发送空消息，您也可以发送带有更多数据的 Message 对象

例如发送一条带有一些成功文本的消息，你可以这样做

```
Message.obtain(mHandler, 0, "Success text") 
```

同样对于失败

现在根据零的含义，它只是发送一条空消息，并且 0 可以替换为任何值。这个想法是在这种情况下，您只有一种类型的消息，并且 Handler 确实理解这一点。所以它不需要检查它收到了什么样的消息，它只需要接收一个消息。所以`sendEmptyMessage(AnyInteger)`会很好。0 只是按照惯例

# javascript - javascript - 在初始化之前引用方法

> ID：15338981
> 
> 赞同：1
> 
> 时间：2013-03-11T12:48:20.140
> 
> 标签：javascript, init

为什么“write2”有效而“write1”无效？

```
function Stuff() {
    this.write1 = this.method;
    this.write2 = function() {this.method();}
    this.method = function() {
        alert("testmethod");
    }
}
var stuff = new Stuff;
stuff.write1(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:52:56.883

因为第二个`this.method`在执行匿名函数时进行评估，而第一个创建了一个尚不存在的东西的参考副本。

这可能会让人感到困惑，因为它似乎都`write1`试图`write2`使用/引用尚不存在的东西，但是当你声明`write2`你正在创建一个实际上只复制一个引用`this`然后执行函数体的闭包时，当`this`有通过添加修改`method`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:50:08.413

It does not work, because you're referencing `this.method` before it was declared. Change to:

```
function Stuff() {

    this.write2 = function() {this.method();}

    // First declare this.method, than this.write1.
    this.method = function() {
        alert("testmethod");
    }
    this.write1 = this.method;
}
var stuff = new Stuff;
stuff.write1(); 
```

# java - JSTL - 遍历表格行并在每行设置背景颜色

> ID：15338983
> 
> 赞同：0
> 
> 时间：2013-03-11T12:48:25.200
> 
> 标签：java, jsp, servlets, jstl

目的（根据 forEach 循环）是在表格内每 3 行设置一个背景颜色。我下面的代码不起作用。表格正在正确返回，其中包含所有数据，但未设置颜色。

```
<c:forEach var="coffee" items="${collection}">

<tr  class="${status.count % 3 == 0 ? 'even' : 'oneven'}"
${status.count % 3 == 0 ? 'even' : 'oneven'}  >
<td> ${coffee.brand} </td>
<td> ${coffee.type} </td>
<td> ${coffee.country} </td>

</tr>

</c:forEach> 
```

我的 CSS 类

```
tr.even { background: red; }
tr.odd { background: green; } 
```

谢谢您的帮助。

我找到了答案：

```
<h2>tabel with changing colors</h2>

    <table border=1>

        <tr>
            <th>Brand</th>
            <th>type</th>
            <th>Country</th>
        </tr>

        <c:forEach var="coffees" items="${collection}" varStatus="status">

            <tr class="${status.count % 3 == 0 ? 'even' : 'odd'}"
                ${status.count % 3 == 0 ? 'even' : 'odd'}>
                <td>${coffees.brand}</td>
                <td>${coffees.type}</td>
                <td>${coffees.country}</td>

            </tr>

            </c:forEach>

    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:12:52.463

`status`在这里是一个未定义的属性。您需要使用标签的`varStatus`属性来定义它：`forEach`

```
<c:forEach var="coffee" items="${collection}" varStatus="status"> 
```

也`color`用于设置前景（文本）颜色。不设置背景颜色。并且您将类应用于`li`，因此它不适用于表格行和单元格。CSS应该是：

```
tr.even td {
    background-color: #006699;
}

tr.oneven td {
    background-color: #009999; 
} 
```

# asp.net-mvc - DropDownList 没有被选中 - MVC4

> ID：15338989
> 
> 赞同：1
> 
> 时间：2013-03-11T12:49:00.087
> 
> 标签：asp.net-mvc, asp.net-mvc-4, html.dropdownlistfor, list.selectedvalue

我有如下视图中的 DropDownList，

```
@Html.DropDownListFor(model => model.RoleID, (IEnumerable<SelectListItem>)ViewBag.RoleID, new { @class = "dropdownlistCustom" })
@Html.DropDownList("RoleID", (IEnumerable<SelectListItem>)ViewBag.RoleID, new { @class = "dropdownlistCustom" })
@Html.ValidationMessageFor(model => model.RoleID) 
```

都试过了`DropDownList`，`DropDownListFor`都没有正确`SelectedValue`。

在 Controller 中，我正在设置`selectedValue`参数（请参阅 SelectList() 的最后一个参数）。

```
public ActionResult Edit(int id = 0)
{
    UserDetail userDetail=db.UserDetails.Find(id);
    if(userDetail!=null)
    {
       ViewBag.RoleID = new SelectList(db.Roles.Where(r => r.RoleStatus == "A"), "RoleID", "RoleName", userdetail.RoleID);
       return View(userdetail);
    }
} 
```

模型 ：

```
[Display(Name = "Name Of the Role")]
public int RoleID { get; set; }
[ForeignKey("RoleID")]
public virtual Role Roles { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:20:17.847

首先，我鼓励您**不要使用 ViewBag**，而是使用视图模型将您的选择列表（或选择列表的数据）从控制器传递到视图。

其次，我鼓励你看[一下这个例子](https://stackoverflow.com/questions/7142961/mvc3-dropdownlistfor-a-simple-example)或[这个例子](https://stackoverflow.com/questions/5688910/asp-net-mvc-dropdownlistfor-with-model-of-type-liststring)（最好是两者）的`DropDownListFor`用法。我认为你过于复杂了`SelectList`。它不那么简单，您不会对为什么它没有按预期工作感到困惑。只需以现有示例并将变量名称更改为您的。

*为什么不使用`ViewBag`*的另一个重要提示是，当您构建视图模型时，您可以在控制器中构建一个选择列表，您可以从任何地方获取数据。然后在视图中，您只需要使用提供参数的预构建视图模型属性`SelectList`- 更简洁更好。View 应该对数据进行最少的操作，而只是在正确的位置以正确的方式以正确的格式呈现它。

只要看看我提供的那些例子，我相信你足够聪明，知道如何`DropDownListFor`正确使用它，它非常简单，你只需要在正确的地方提供正确的参数，看看其他人做了什么并做同样的事情。

希望这会有所帮助，请随时向我发布您的进度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:05:17.777

那是因为你没有`DropDownListFor`正确使用。您所追求的功能定义是：

```
DropDownListFor(lambda, selectList, *selectedItem*, htmlAttributes) 
```

`RoleId`应该作为`selectedItem`参数传递，所以你缺少`selectList`参数。MVC 不会自动为您创建它，您必须通过内联创建它、将其传递到或在模型上设置它并指定要使用的属性来`DropDownListFor`告诉它要使用的选择列表。`ViewBag`

**编辑**

对不起。那是我的错。现在还早，我们浪费了一个小时（夏令时），所以我的大脑还没有全部到。我混合`DropDownListFor`和`DropDownList`。使用`DropDownListFor`，选择的项目来自模型上的设定值，但您仍然需要提供适当的`SelectList`。看来您正在尝试指定您应该告诉它`SelectList`使用什么的选定项目。

如果要使用`DropDownList`，则需要同时指定`SelectList`要使用的值和选定的值。

# cuda - 单内核启动中块执行的 CUDA 顺序

> ID：15338992
> 
> 赞同：0
> 
> 时间：2013-03-11T12:49:01.693
> 
> 标签：cuda

我总共启动了 256 个线程。当我通过启动一个块来做到这一点时，一切正常。但是，当我以 2x2 块（每个块（8x8 线程））启动线程时，内核会无限循环。好吧，真正的问题是我的内核代码等待来自其他块的部分结果，并且在运行了几次测试之后，我观察到这些块是以随机顺序启动的，它们似乎是按顺序执行的。

如果 CUDA 块是从同一个内核启动的，它们会并行运行吗？我使用的 GPU 不是限制，因为我只启动了 256 个线程，而 GTX 580 可以处理它们。（在 16x16 线程的单个块启动中一切正常）有没有办法可以知道执行顺序或指定它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T13:10:06.813

是的，块并行运行。并行运行多少块取决于你的 GPU 的性能，但重要的是块的启动顺序是**undefined**和**undefined**。[在此处](http://docs.nvidia.com/cuda/pdf/CUDA_C_Programming_Guide.pdf)阅读更多信息- 第 2.2 章，最后三段。

# c# - 提示/想法如何获得通用上下文菜单？

> ID：15338994
> 
> 赞同：0
> 
> 时间：2013-03-11T12:49:06.370
> 
> 标签：c#, .net, wpf, mvvm, contextmenu

我想用 mvvm 在 wpf 中开发一个通用的上下文菜单。我想在每个具有样式列表视图的视图模型中显示它：ItemContainerStyle =“{DynamicResource ListViewItemContainerStyle}”。

上下文菜单将有 2 个选项，这些选项将根据每个视图模型中的某些约束启用或不启用。启用与否将由命令的 canexecute 管理。

如果我把它放在列表视图内的每个视图中，我没有问题，但我希望它只放在每个列表视图之外的一个地方。我试图将它放在 ListViewItemContainerStyle 中，但它显示异常“无法将 System.Windows.Controls.ContextMenu 添加到 System.Object”。这是我的代码片段

```
<Style x:Key="ListViewItemContainerStyle"
       TargetType="ListViewItem">
   .
   .
   .
    <Setter Property="ContextMenu">
        <Setter.Value>
            <ContextMenu>
                <MenuItem Command="{Binding Path=Command}"
                          CommandParameter="AddNew">
                    <MenuItem.Header>
                        <TextBlock Text="{x:Static p:TextResources.New}" />
                    </MenuItem.Header>
                </MenuItem>
                <MenuItem Command="{Binding Path=Command}"
                          CommandParameter="Delete">
                    <MenuItem.Header>
                        <TextBlock Text="{x:Static p:TextResources.Delete}" />
                    </MenuItem.Header>
                </MenuItem>
            </ContextMenu>
        </Setter.Value>
    </Setter>
 .
 .
 . 
```

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:11:30.217

尝试这个：

```
<ContextMenu x:Shared="False" x:Key="ListViewContextMenu>
                <MenuItem Command="{Binding Path=Command}"
                          CommandParameter="AddNew">
                    <MenuItem.Header>
                        <TextBlock Text="{x:Static p:TextResources.New}" />
                    </MenuItem.Header>
                </MenuItem>
                <MenuItem Command="{Binding Path=Command}"
                          CommandParameter="Delete">
                    <MenuItem.Header>
                        <TextBlock Text="{x:Static p:TextResources.Delete}" />
                    </MenuItem.Header>
                </MenuItem>
            </ContextMenu>

<Style x:Key="ListViewItemContainerStyle"
       TargetType="ListViewItem">
    <Setter Property="ContextMenu" Value="{StaticResource ListViewContextMenu}"/> 
```

# winapi - 识别可移植可执行文件

> ID：15338999
> 
> 赞同：1
> 
> 时间：2013-03-11T12:49:15.917
> 
> 标签：winapi, visual-c++, exe, policy

我想编写一个程序，根据策略在打开文件时允许或阻止进程。

我可以通过检查程序的名称来进行控制。但是，这还不够，因为用户可以更改名称以通过策略。即假设策略不允许a.exe 访问txt 文件，而b.exe 是允许的。如果用户用 b.exe 更改 a.exe，我无法阻止它。

另一方面，验证可移植可执行签名对我来说还不够，因为我不在乎可执行文件是否签名。我只想识别要执行的可执行文件，即使其名称已更改。

对于这种情况，您有什么建议？欢迎任何解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:56:48.950

我会建议使用签名，如果它有一个，否则使用哈希。频繁更新的应用程序（例如 Office）更有可能被签名，而从 Internet 下载的较小应用程序不太可能永远更新，因此应该具有一致的哈希值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:56:33.513

有很多方法可以识别可执行文件。这是一个简单的列表：

**姓名：**

最简单直接的方法是通过文件名来识别文件。但这是最容易改变的事情之一，你已经排除了这一点。

**日期：**

文件具有访问、创建和修改日期，并由操作系统管理。它们并非万无一失，甚至可能不准确。而且，它们很容易改变。

**版本信息：**

由于我们谈论的是可执行文件，因此大多数可执行文件都附有版本信息。例如，原始文件名、文件版本、产品版本、公司、描述等。如果您确定用户无法通过编辑可执行文件来修改它们，则可以检查这些字段。它不需要您保留允许文件的数据库。但是，它确实需要您有一些可以比较的东西，例如公司名称或产品名称。此外，如果有人制作了具有相同值的可执行文件，他们可以运行而不是允许运行的可执行文件并绕过您的保护。

**地点：**

如果文件位于特定位置并受文件系统访问权限保护，并且无法更改，则可以使用该文件。例如，您可以将允许的文件放在用户（没有管理员权限）只能读取/执行它们，但不能重命名/移动的文件夹中。然后识别文件及其位置。如果它从这个位置运行，则允许它，否则阻止它。这很好，因为它不需要允许/阻止文件的数据库，它只是比较位置，它是有效的，然后允许，并且您可以继续在允许的位置添加和删除文件而不会影响您的程序。

**尺寸：**

如果文件具有特定的文件大小，您可以快速检查其大小并进行比较。但它是不可靠的，因为文件可以更改/修补并且大小没有任何变化。您可以通过应用 CRC 检查来检测文件内容是否更改来避免这种情况。但是，大小和 CRC 都可以更改。此外，这要求您拥有文件名及其大小/CRC 的列表，并保持最新状态。

**签名：**

Deanna 提到您可以对可执行文件进行自签名。然后检查签名是否与您的签名匹配并基于此允许/拒绝。如果您可以签署您想要允许的所有可执行文件，这似乎是一个好方法。它不需要您保留允许文件的更新列表。

**哈希：**

arx 还指出，您可以对文件进行哈希处理。它是最慢的方法之一，因为它需要在每次执行文件时对文件进行哈希处理，然后与文件列表进行比较。但它非常可靠，因为它可以唯一识别每个文件并且很难破解。但是，您需要保持每个文件哈希的最新数据库。

最后，根据您的需求和选择，您可以将两种或多种方式混合在一起以获得您想要的结果。比如，检查文件名+位置等。

我希望我涵盖了大部分内容，但我相信还有更多方法。任何人都可以自由编辑我的帖子以包含我错过的任何内容。