# StackOverflow 问答 15874000-15874999

# android - 摩托罗拉 MZ604 无法识别为安卓设备

> ID：15874000
> 
> 赞同：1
> 
> 时间：2013-04-08T07:54:55.800
> 
> 标签：android, adb, device, motorola

[我已经从摩托罗拉网站https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481](https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481)安装了“摩托罗拉设备管理器”， 它说它包括“USB 驱动程序”。

我打开设备管理器，可以看到“便携设备”下，有一个“MZ604”；在“通用串行总线控制器”下，有一个“USB 复合设备”。但是“其他设备”下有一个“MZ604”。

我仍然无法使用“adb devices”来查看那个 Pad。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T18:36:40.683

我通过直接双击可执行文件安装了摩托罗拉设备驱动程序： [https ://motorola-global-en-uk.custhelp.com/app/answers/prod_answer_detail/a_id/89881/action/auth](https://motorola-global-en-uk.custhelp.com/app/answers/prod_answer_detail/a_id/89881/action/auth)

顺便说一句，它提醒我切换到媒体设备 (MTP) 模式；此模式已激活。

*   设置
    *   贮存
        *   (...)
            *   USB 电脑连接
            *   媒体设备 (MTP) [x]
            *   相机 (PTP)

但是，当我通过设备管理器安装它们时（按照[此处](http://developer.android.com/tools/extras/oem-usb.html)的说明），我取得了成功：

我将它们安装在这些：

*   亚行接口

    *   Mot 复合 ADB 接口 ...
*   通用串行总线控制器

    *   摩托罗拉 USB 复合设备
    *   USB 复合设备

这允许我使用

*   铬 (32+)
    *   工具
        *   检查设备

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T17:07:10.603

![有效的 USB 驱动程序](https://i.stack.imgur.com/oWlGK.jpg) Xoom (mz604) 的 (motoandroid.inf 和 motccgp.inf) 是从 Motorola_Mobile_Drivers_32bit.msi 从 MotorolaDeviceManager_2.4.5.exe (Motorola device manager) 的 Motorola_Mobile_Drivers_32bit.msi 解压出来的。

对于 mz604 pci id 是 Vid_22b8 Pid_70a9 Rev_9999, androidboot.modelno=MZ604, ro.boot.modelno:[MZ604]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-12T13:46:05.170

捉鬼敢死队将清除您的设备。运行 Ghostbuster 后，您需要重新安装可移动设备驱动程序。在这里下载：

[http://www.majorgeeks.com/files/details/ghostbuster.html](http://www.majorgeeks.com/files/details/ghostbuster.html)

以管理员身份运行以启用清除幻影设备。右键单击粉红色区域，然后单击“添加类”。幻影设备的数量在右下角。

# .net - 实时对象检测延迟失败？

> ID：15874005
> 
> 赞同：1
> 
> 时间：2013-04-08T07:55:07.597
> 
> 标签：.net, aforge

我使用 aforge 在 c# 上制作了一个对象检测应用程序。我使用录制的视频来查找快速球的路径，看起来效果很好，但是当我尝试实时数据（直接来自凸轮）时它失败了。我怀疑在使用检测功能时记录的数据它会使下一帧等待，但在实时数据上如果使用检测功能我们会丢失实时帧。检测功能的 ping 大约 60 毫秒 - 80 毫秒。我有大约 500 毫秒的时间来寻找路径。

也不确定这是否是问题所在。如果是，我应该让它排队还是跳过帧？或者也许我错了其他问题？

# javascript - JavaScript 对象分配问题

> ID：15874008
> 
> 赞同：1
> 
> 时间：2013-04-08T07:55:16.070
> 
> 标签：javascript, html, ajax, performance

我不是 JavaScript 专业人士，所以我的问题可能看起来很荒谬。假设我有以下 HTML 块：

```
<div>
     <script type="text/javascript">
         var variable_2  = new SomeObject();
     </script>
</div> 
```

这清楚地为 SomeObject 实例在堆上分配内存，而 variable_2 驻留在全局上下文中。

我的问题是：如果我使用 AJAX 再次生成了前一个 HTML 块，那么我将在全局上下文中让 variable_2 引用新分配的 SomeObject 实例，对吗？但是，之前分配的实例会发生什么，是垃圾收集还是内存泄漏？

此外，您是否可以引用描述 JavaScript 内存管理最佳实践的书籍或文章？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:24:14.150

当一个对象变得不可访问时，它将被垃圾收集。旧版本的 Internet Explorer（版本 6 和 7）存在一个问题，即相互引用但无法访问的对象不会被垃圾收集，从而导致内存泄漏。但是，这与您的示例无关。在您的示例中，一旦不再引用第一个对象（即，当您重新分配变量时），该对象将变得无法访问并且将被垃圾收集。

[您可以在https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management](https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management)阅读有关 JavaScript 内存管理的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:03:04.457

查看[这篇文章](http://blogs.msdn.com/b/ericlippert/archive/2003/09/17/53038.aspx)或[这篇文章](https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management)了解更多关于 JS 垃圾收集器的信息。但是请注意，JS 引擎之间的确切行为可能略有不同。您可能想在例如上发布问题。[V8论坛](https://groups.google.com/forum/?fromgroups#!forum/v8-users)有详细的技术解释。

在我看来，我当然会避免做你描述的事情，因为它是不好的做法。实际上，如果它在一个像样的 JS 引擎中导致内存泄漏，我会感到惊讶（无论是 .

# c# - 计算剩余下载时间的估计

> ID：15874015
> 
> 赞同：-8
> 
> 时间：2013-04-08T07:56:11.913
> 
> 标签：c#

这是我的估计时间代码。它正在工作，但时间有误。

```
if ((DateTime.Now - _startDate).Seconds > 0)
{
    kbPerSecond = (int)((100 * 1000) / 8);
}
long sent = (TotalBytes - BytesRead);
long remainingseconds = sent / kbPerSecond;
string remainingTimeDisplay = string.Empty;
if (remainingseconds > 0)
{
    if (remainingseconds > 60)
    {
        if (remainingseconds > 3600)
        {
            remainingTimeDisplay += ((int)(remainingseconds) / 3600).ToString("n0") + " Hours, ";
            remainingseconds %= 3600;
        }
        remainingTimeDisplay += (((int)remainingseconds) / 60).ToString("n0") + " Minutes,  ";
        remainingseconds %= 60;
    }
    remainingTimeDisplay += ((int)remainingseconds).ToString("n0") + " Seconds remaining";
    lbl_estimate.Text = remainingTimeDisplay;
} 
```

问题在于下载完成后，估计的时间会显示为“剩余1秒”而不是零。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:07:58.617

仅当您有`remainingseconds`超过 0 时才更改文本。您需要`else`在 1 日执行，`if`因此您需要类似以下内容：

```
 if (remainingseconds > 0)
                {
                    if (remainingseconds > 60)
                    {
                        if (remainingseconds > 3600)
                        {
                            remainingTimeDisplay += ((int)(remainingseconds) / 3600).ToString("n0") + " Hours, ";
                            remainingseconds %= 3600;
                        }
                        remainingTimeDisplay += (((int)remainingseconds) / 60).ToString("n0") + " Minutes,  ";
                        remainingseconds %= 60;
                    }
                    remainingTimeDisplay += ((int)remainingseconds).ToString("n0") + " Seconds remaining";
                    lbl_estimate.Text = remainingTimeDisplay;
                }
     else
           lbl_estimate.Text = "0 seconds"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:35:48.783

为了简化这一点，您应该提取所有用于格式化持续时间字符串的逻辑。该逻辑不属于与函数的其余部分混淆！

此外，您可以使用以下方法简化它[`TimeSpan`](http://msdn.microsoft.com/en-us/library/269ew577.aspx)：

```
public static string FormatDurationSeconds(int seconds)
{
    var duration = TimeSpan.FromSeconds(seconds);
    string result = "";

    if (duration.TotalHours >= 1)
        result += (int) duration.TotalHours + " Hours, ";

    result += String.Format("{0:%m} Minutes, {0:%s} Seconds", duration);
    return result;
} 
```

完成此操作后，应该可以更轻松地了解秒数错误的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:01:48.853

您的数据速率是一个常数

```
kbPerSecond = (int)((100 * 1000) / 8); 
```

这不可能。

# r - R 程序输出：如何在输出中包含 R id 标记？

> ID：15874019
> 
> 赞同：-1
> 
> 时间：2013-04-08T07:56:39.780
> 
> 标签：r

所以每当我运行我的代码并得到这个输出

```
 Values   Random
1   4       0.1
2   3       1.2
3   6       1.3
4   6 
5   7
6
7 
```

所以我有第一列数字，每当我运行我的代码时，R 都会自行生成......所以我基本上使用下面的函数将我的 R 输出放到 excel 电子表格中......但是当我这样做时，它们不包括R 刚刚生成的那些随机数...我想将其包含在我的电子表格中...我该怎么做？

```
let<-loadWorkbook("randomn.xls",create=TRUE)
createSheet(let,name="sheet1")
writeWorksheet(let,data,sheet="sheet1")
saveWorkbook(let) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:31:28.297

根据您使用的 excel 包，尝试设置`row.names = TRUE`

PS：检查`writeWorksheet`API以获取参数的确切名称

# ajax - 当两个http请求都完成时执行功能

> ID：15874020
> 
> 赞同：1
> 
> 时间：2013-04-08T07:56:43.683
> 
> 标签：ajax, asynchronous, angularjs

我目前正在专门学习*Javascript*和*AngularJS*，但有一件事我似乎不明白该怎么做。正如你将看到的那样，我也在努力将我的思想从“顺序”思维转变。
我想发出两个`$http.post()`请求，当它们都成功时执行一个函数。我设法通过嵌套这样的请求使其工作：

```
$http.post(url, {something}).success(function (response) {
    $http.post(url, {something}).success(function (secondResponse) {
      myFunction();
    });
}); 
```

这是有效的，但这是嵌套的，不是异步的，而且通常是蹩脚的。我想知道是否可以这样提出这些请求（我知道以下代码将无法正常工作）：

```
$http.post(url, {something}).success(function (response) { someKindOfFlag = true });    
$http.post(url, {something}).success(function (response) { anotherKindOfFlag = true });
if (someKindOfFlag && anotherKindOfFlag) { myFunction(); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:17:08.130

在这种情况下，正确的解决方案是中继 promise API 并使用[AngularJS $q 服务](http://docs.angularjs.org/api/ng.%24q)——它的`$q.all()`方法更精确。

$http 服务已经使用了 Promise，因为它从 $http 函数调用返回一个 Promise。

`$http`要在两个请求都完成时执行回调，您可以`$q.all()`按以下方式使用该方法：

```
$q.all([$http.post(url, {something}), $http.post(url, {something})]).then(function(arrayOfResponses) {
  // success callback code goes here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:15:23.460

你应该听说过 JavaScript 中的 $q 或 promise，尤其是 Angular。为了实现您想要做的事情，您需要使用 $q API。

这是你如何做到的。您需要将 $q 注入您的服务或控制器（但是，如果可能，我建议将其注入服务！）。

```
var firstResponse = $http.post(url, {something});

var secondResponse = $http.post(url, {something});

$q.all([firstResponse,secondResponse]).then(function(data){
      //data[0] === firstResponseData
      //data[1] === secondResponseData 
      myFunction();
}); 
```

# asp.net - 复选框列表的 CSS 分组在 asp.net 中的复选框下

> ID：15874032
> 
> 赞同：1
> 
> 时间：2013-04-08T07:57:22.933
> 
> 标签：asp.net, css, stylesheet, checkboxlist

是否可以显示复选框列表分组，如下图所示？我正在使用 asp.net 控件并绑定数据。但我需要制作相同的风格。我怎样才能使用 CSS 做到这一点？

![在此处输入图像描述](https://i.stack.imgur.com/kcMvc.png)

```
 <asp:DataList ID="dl_Groups_1" RepeatColumns="1"  runat="server" OnItemDataBound="dl_Groups_1_ItemDataBound" RepeatDirection="vertical" ShowFooter="False" ShowHeader="False">
        <ItemTemplate>
            <asp:CheckBox Font-Bold="true" runat="server" ID="chk_Group_1" Text='<%# Eval("category_type") %>' Value='<%# Eval("service_type_category_id") %>' onclick="OnGroupClick" />
            <asp:CheckBoxList runat="server" ID="chkServiceType_1" Style="padding-left: 20px" DataValueField="ServiceTypeID" DataTextField="Name" EnableViewState="true">
            </asp:CheckBoxList>
            <br />
        </ItemTemplate>
    </asp:DataList> 
```

在浏览器中呈现的 HTML：

```
<table cellspacing="0" border="0" style="border-collapse:collapse;" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1">
    <tbody>

    <tr>
        <td>
            <span style="font-weight:bold;"><input type="checkbox" onclick="selectGroupAll(ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chk_Group_1);" name="ctl00$cphMain$ctlEsnSearchByServices$dl_Groups_1$ctl00$chk_Group_1" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chk_Group_1"><label for="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chk_Group_1">Stay-In Facilities</label></span>
            <table border="0" style="padding-left: 20px" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chkServiceType_1">
            <tbody>
            <tr>
                <td><input type="checkbox" name="ctl00$cphMain$ctlEsnSearchByServices$dl_Groups_1$ctl00$chkServiceType_1$0" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chkServiceType_1_0"><label for="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chkServiceType_1_0">DEF</label></td>
            </tr><tr>
                <td><input type="checkbox" name="ctl00$cphMain$ctlEsnSearchByServices$dl_Groups_1$ctl00$chkServiceType_1$1" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chkServiceType_1_1"><label for="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chkServiceType_1_1">ABC </label></td>
            </tr><tr>
                <td><input type="checkbox" name="ctl00$cphMain$ctlEsnSearchByServices$dl_Groups_1$ctl00$chkServiceType_1$2" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chkServiceType_1_2"><label for="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl00_chkServiceType_1_2">XYZ</label></td>
            </tr>
            </tbody>
            </table>
            <br>
        </td>
    </tr>

    <tr>
        <td>
            <span style="font-weight:bold;"><input type="checkbox" onclick="selectGroupAll(ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chk_Group_1);" name="ctl00$cphMain$ctlEsnSearchByServices$dl_Groups_1$ctl01$chk_Group_1" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chk_Group_1"><label for="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chk_Group_1">Other Services</label></span>
            <table border="0" style="padding-left: 20px" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chkServiceType_1">
            <tbody>
            <tr>
                <td><input type="checkbox" name="ctl00$cphMain$ctlEsnSearchByServices$dl_Groups_1$ctl01$chkServiceType_1$0" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chkServiceType_1_0"><label for="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chkServiceType_1_0">GHJ</label></td>
            </tr><tr>
                <td><input type="checkbox" name="ctl00$cphMain$ctlEsnSearchByServices$dl_Groups_1$ctl01$chkServiceType_1$1" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chkServiceType_1_1"><label for="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chkServiceType_1_1">IJK</label></td>
            </tr><tr>
                <td><input type="checkbox" name="ctl00$cphMain$ctlEsnSearchByServices$dl_Groups_1$ctl01$chkServiceType_1$2" id="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chkServiceType_1_2"><label for="ctl00_cphMain_ctlEsnSearchByServices_dl_Groups_1_ctl01_chkServiceType_1_2">MNO</label></td>
            </tr>
            </tbody>
            </table>
            <br>
        </td>
    </tr>

</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:26:57.500

好的，所以我设法做点什么。它看起来像这样：

[**演示**](http://jsfiddle.net/dhPN5/15/)

```
<section>
    <input type="checkbox" id="one" />
    <label for="one">Check One</label>
    <ul class="subCheck">
        <li>
            <input type="checkbox" id="subOne" />
            <lable for="subOne">subTwo</lable>
        </li>
        <li>
            <input type="checkbox" id="subTwo" />
            <lable for="subTwo">subTwo</lable>
        </li>
        <li>
            <input type="checkbox" id="subThree" />
            <lable for="subThree">subTwo</lable>
        </li>

    </ul>
</section> 
```

和 CSS：

```
section{
    float: left;
    position: relative;
    width: 100%; }

section:before{
    background: #000;
    content: "";
    height: 81px;
    left: 8px;
    position: absolute;
    top: 3px;
    width: 1px;
    z-index: 1; }

input[type="checkbox"]{
    float: left;
    margin: 2px;
    width: auto; }

label{
    float; left;
    margin: 0 0 0 5px;
    width: auto; }

ul{
    clear: both;
    float: left;
    list-style: none;
    margin: 5px 0 0;
    padding: 0 0 0 20px;
    width: 100%; }

ul li{
    float: left;
    margin: 0 0 5px;
    position: relative;
    width: 100%; }

li:before{
    background: #000;
    content: "";
    height: 1px;
    left: -11px;
    position: absolute;
    top: 8px;
    width: 14px; }

input, label, ul{
    position: relative;
    z-index: 2; } 
```

HTML 仅供参考，我认为 CSS 就是您要查找的内容。玩得开心。

# android - Android Google Maps API V2 - 在地图上标记区域

> ID：15874033
> 
> 赞同：2
> 
> 时间：2013-04-08T07:57:25.067
> 
> 标签：android, google-maps, maps

我正在开发一个将消息从管理员发送到客户端的应用程序。流程非常简单 - 管理员键入一条消息，安装此应用程序的每个客户端都会收到该消息。我正在使用池（暂时不推送通知）。

发送/接收消息工作正常，现在我需要添加新功能：管理员在地图上选择一个区域（Google maps api v2），客户端检查他的位置并仅在他在标记区域内时显示消息.

到目前为止，我只完成了在屏幕中选择区域的视觉部分：在管理员点击的点周围有一个圆圈（管理员可以更改圆圈半径），现在我必须做棘手的部分 - 标记里面的区域圆圈并将其发送到数据库（带有消息），以便另一方（客户端）检查他的位置是否在圆圈内，以及他是否收到消息。

有什么帮助吗？

我附上了相关的代码块和屏幕快照。

```
code:
private void drawCircle(LatLng center, int radius) {

        CircleOptions circleOptions = new     CircleOptions().center(center).radius(radius);
        circleOptions.strokeColor(Color.BLUE);
        circleOptions.strokeWidth(3);
        gMap.addCircle(circleOptions);
        Log.d(TAG, "center = " + center.latitude + " , " + center.longitude);
        Log.d(TAG, "radius = " + radius);
        gMap.addMarker(new      MarkerOptions().position(center).icon(BitmapDescriptorFactory.fromResource(R.drawable.dot))    );

} 
```

谢谢...

![屏幕快照](https://i.stack.imgur.com/rF94f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:24:37.560

我认为您需要做的最简单的事情是检查客户端与圆心之间的距离。如果它小于圆的半径 -> 客户端在里面。

# c++ - 线程间数据交换

> ID：15874034
> 
> 赞同：1
> 
> 时间：2013-04-08T07:57:25.060
> 
> 标签：c++, multithreading

我尝试编写一个物理模拟程序。我使用两个线程，一个用于计算，一个用于 gui。为了在它们之间交换数据，我使用了一个结构

```
struct sim_data {  
     int running;  
     int steps;  
    int progress;  
 ...  
}; 
```

并将其包含在不同的线程中

```
void *sim(void *args) {  
    struct sim_data *my_data;  
    my_data=(struct sim_data *)args;  
    ...  
} 
```

设置值时

```
my_data->progress=1000; 
```

数据在同一个线程中可用，但在第二个线程中不可靠。当启动程序在第二个线程中读取不同的值然后在第一个线程中写入时，我猜想有 10% 的机会。虽然数据是循环写入的，但我认为这不是时间问题。

我觉得这很奇怪。任何猜测出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T05:25:28.837

C++11 规范将数据竞争情况声明为一个线程写入某个位置而第二个线程可以读取或写入该位置的任何时候。它声明当这种情况发生时你会得到未定义的行为。在您的情况下，一个线程正在写入 my_data->progress 而另一个线程正在读取它。

解决方案是使用同步，例如原子整数或锁定。

C++ 编译器进行了非常令人印象深刻的优化，以使您的单线程程序运行得更快。例如，它可能证明，在单线程世界中，没有办法看到 1000 的值，而干脆选择不打印它。

还有更多丑陋的案件是合法的。如果编译器知道您想要存储 1000，它可能会选择根本不存储任何内容，而是使用该内存作为空间以将临时结果“溢出”到其中，而不是分配更多空间，然后最终存储 1000。期间同时，您可以读取任意值。

对于这个问题的相当幽默的看法：http: [//software.intel.com/en-us/blogs/2013/01/06/benign-data-races-what-c ​​ould-possibly-go-wrong](http://software.intel.com/en-us/blogs/2013/01/06/benign-data-races-what-could-possibly-go-wrong)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T18:07:55.067

最简单的解决方案：

```
struct sim_data {  
     int running;  
     int steps;  
     atomic<int> progress;  //this will guarantee the data are coherent between two threads
 ...  
}; 
```

# c# - 在 asp.net 中将字节转换为图像时出现“参数无效”

> ID：15874036
> 
> 赞同：0
> 
> 时间：2013-04-08T07:57:29.833
> 
> 标签：c#, asp.net, .net

当我将此代码中的数据库字节数组转换为图像时，出现一个错误“参数无效”。

```
try
{
    DataTable dt = dbo.GetRecordsWithQuery("select * from Users where UserID='" +Session["userid"].ToString()+ "'");
    byte[] image_user = (byte[])dt.Rows[0]["Image"]; // from this i got the error. Also the image_user dimension is 13
    System.Drawing.Image myimage = BinaryToImage(image_user);
    myimage.Save(Server.MapPath("~/User/images/profileImg/img1.jpg"));
    img1.ImageUrl = "~/User/images/profileImg/img1.jpg";
    url = img1.ImageUrl;
} 
```

...

```
public static System.Drawing.Image BinaryToImage(byte[] binaryData)
{
    MemoryStream ms = new MemoryStream(binaryData);
    System.Drawing.Image returnImage = System.Drawing.Image.FromStream(ms);
    return returnImage;
} 
```

# ruby-on-rails - Ruby on Rails 教程第 11 章：Rspec 测试在 follower/following 部分失败

> ID：15874039
> 
> 赞同：1
> 
> 时间：2013-04-08T07:57:38.293
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, railstutorial.org

我正在编写Hartl 教程的[第 11 章](http://ruby.railstutorial.org/chapters/following-users#top)，试图`non-logged-in users in the Users controller visiting the followers and following page`通过它。我遇到了一个错误，Rails 会抱怨一个未定义的`admin?`方法，尽管它只在`User`部分中使用。

**Rails 本地服务器**

```
Rendered users/_user.html.erb (9.4ms)
Rendered users/show_follow.html.erb within layouts/application (33.0ms)
Completed 500 Internal Server Error in 43ms

ActionView::Template::Error (undefined method `admin?' for nil:NilClass):
    1: <li>
    2:   <%= gravatar_for user, size: 52 %>
    3:   <%= link_to user.name, user %>
    4:   <% if current_user.admin? && !current_user?(user) %>
    5:     | <%= link_to 'delete', user, method: :delete,
    6:                                   data: { confirm: 'Are you sure?' } %>
    7:   <% end %>
  app/views/users/_user.html.erb:4:in `_app_views_users__user_html_erb___4000670281664801561_70099451578240'
  app/views/users/show_follow.html.erb:25:in `_app_views_users_show_follow_html_erb__2024448610717183111_70099484108000'
  app/controllers/users_controller.rb:68:in `followers' 
```

**RSpec 失败**

```
 1) Authentication authorization for non-logged-in users in the Users controller visiting the following page
     Failure/Error: it { should have_selector('title', text: 'Login') }
       expected css "title" with text "Login" to return something
     # ./spec/requests/authentication_pages_spec.rb:122:in `block (6 levels) in <top (required)>'

  2) Authentication authorization for non-logged-in users in the Users controller visiting the followers page
     Failure/Error: it { should have_selector('title', text: 'Login') }
       expected css "title" with text "Login" to return something
     # ./spec/requests/authentication_pages_spec.rb:127:in `block (6 levels) in <top (required)>' 
```

**授权页面规范.rb**

```
 describe "authorization" do
    .
    .
    .
    describe "for non-logged-in users" do
      let(:user) { FactoryGirl.create(:user) }
      .
      .
      .
      describe "in the Users controller" do
        .
        .
        .
        describe "visiting the following page" do
          before { visit following_user_path(user) }
          it { should have_selector('title', text: 'Login') }
        end

        describe "visiting the followers page" do
          before { visit followers_user_path(user) }
          it { should have_selector('title', text: 'Login') }
        end
      end 
```

**show_follow.html.erb**

```
<% provide(:title, @title) %>
<div class="row">
  <aside class="span4">
    <section>
      <%= gravatar_for @user %>
      <h1><%= @user.name %></h1>
      <span><%= link_to "view my profile", @user %></span>
      <span><b>Posts:</b> <%= @user.posts.count %></span>
    </section>
    <section>
      <%= render 'shared/stats' %>
      <% if @users.any? %>
        <div class="user_avatars">
          <% @users.each do |user| %>
            <%= link_to gravatar_for(user, size: 30), user %>
          <% end %>
        </div>
      <% end %>
    </section>
  </aside>
  <div class="span8">
    <h3><%= @title %></h3>
    <% if @users.any? %>
      <ul class="users">
        <%= render @users %>
      </ul>
      <%= will_paginate %>
    <% end %>
  </div>
</div> 
```

**_user.html.erb**

```
<li>
  <%= gravatar_for user, size: 52 %>
  <%= link_to user.name, user %>
  <% if current_user.admin? && !current_user?(user) %>
    | <%= link_to 'delete', user, method: :delete, 
                                  data: { confirm: 'Are you sure?' } %>
  <% end %>
</li> 
```

我尝试从教程本身复制和粘贴所有有问题的文件，但无济于事。提到通过将`:admin`属性分配给`User`类，`admin?`可以使用方法。我猜我以某种方式将一个`nil`对象传递给了部分，但我在调试发生这种情况的地方时遇到了麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T21:18:26.940

好吧，我终于想通了。

我忘记在用户控制器的for中添加`:following`和`:followers`操作。`before_filter``:logged_in_user`

```
class UsersController < ApplicationController
  before_filter :logged_in_user, 
                only: [:index, :edit, :update, :destroy, :following, :followers] 
```

那花了一段时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T08:57:00.253

您的代码正在检查`current_user.admin?`和更改基于此显示的内容。但是，从您的规范标题看来，您正在测试未登录用户访问该页面时的行为： current_user 将为 nil

听起来 _user 部分中的 if 语句需要一个额外的条件来检查是否有登录用户，然后再检查该用户是否为管理员

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:12:10.037

尝试查看`users_controller`，您的部分代码对我来说看起来不错，这意味着它可能是幕后缺少的东西。本地服务器跟踪似乎指向第 68 行和 follower 方法。我的看起来像这样，仅供参考：

```
def followers 
   @title = "Followers"
   @user = User.find(params[:id])
   @users = @user.followers.paginate(page: params[:page])
   render 'show_follow'
end 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-29T17:34:57.540

我也忘记将 :following 和 :followers 操作放在 User 控制器中的 :logged_in_user 的 before_filter 中，但我很好奇这个错误。

就像 Frederick Cheung 指出的那样，在 parcial 的代码中存在错误：_user.html.erb。我们应该在调用管理员之前检查 current_user 是否为零？方法就可以了。

所以而不是：

```
 <% if current_user.admin? && !current_user?(user) %> 
```

你应该有：

```
 <% if current_user && current_user.admin? && !current_user?(user) %> 
```

这将删除“未定义的方法管理员？” 错误并给我们正确的测试错误：

```
 Expected response to be a <redirect>, but was <200> 
```

我们通过将 :following 和 :followers 操作放在 :logged_in_user 的 before_filter 中来删除最后一个。

# database - Sybase 到 SSIS 连接错误

> ID：15874040
> 
> 赞同：2
> 
> 时间：2013-04-08T07:57:43.533
> 
> 标签：database, visual-studio-2010, sql-server-2008, ssis, sybase

我在过去 5 天尝试使用 SSIS 连接到 sybase，但我无法连接。我已经在[我的问题](https://stackoverflow.com/questions/15828043/connect-sybase-to-ssis)之前发布了它，但似乎没有人需要解决。可能是我需要一些其他的驱动程序或其他东西。这就是我正在做的连接到 sybase 的操作。请帮忙。

1.  我安装了 SYBASE ASE 15
2.  打开交互式 SQL 以在其中创建一个新数据库和一些表。
3.  在 VISUAL STUDIO 2008 中创建了一个新的 SSIS 项目
4.  添加了一个新的“数据流任务”
5.  添加了一个新的 OLE DB 源
6.  双击新的 OLE DB 源并单击新的
7.  在提供程序下，我选择了“Sybase OLEDB 提供程序”8。![在此处输入图像描述](https://i.stack.imgur.com/7H9KW.jpg)
8.  输入服务器名称和密码

现在我得到这个错误......请帮帮我。我在这里错过任何一步吗？？？

![在此处输入图像描述](https://i.stack.imgur.com/0awFX.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:34:28.623

终于找到了解决问题的办法。

我没有从数据流源添加“OLE DB 源”，而是添加了一个“ADO NET 源”，然后创建了一个“Sybase Adaptive Server Enterprise Data Provider”

![在此处输入图像描述](https://i.stack.imgur.com/xLn4x.jpg)

填写 Sybase Server Credentials 的详细信息。![在此处输入图像描述](https://i.stack.imgur.com/v0LOy.jpg)

最后，我拥有了在 Sybase ASE 服务器上创建的所有表。

![在此处输入图像描述](https://i.stack.imgur.com/ZwUeB.jpg)

# asp.net-web-api - 使用breathjs web api控制器进行分页

> ID：15874041
> 
> 赞同：1
> 
> 时间：2013-04-08T07:57:48.873
> 
> 标签：asp.net-web-api, odata, breeze, single-page-application

我已经在 J​​ohn Papa 的 CodeCamper SPA 中实现了分页。这样做时，我在使用 take() 和 skip() 函数时发现了一些奇怪的东西。

考虑以下用于跳过 2 条记录并取 2 条记录的 ODATA 查询：

> /api/Breeze/Sessions?$orderby=TimeSlotId%2CLevel%2CSpeaker%2FFirstName&$skip=2&$top=2&$select=Id&$inlinecount=allpages

这将返回：

> [{"$id":"1","$type":" *IB* _pMnaszsw5zIeP0Q7Dam12XmjGGg[[System.Int32, mscorlib]], *IB* _pMnaszsw5zIeP0Q7Dam12XmjGGg_IdeaBlade","Id":3},{"$id":"2", "$type":" *IB* _pMnaszsw5zIeP0Q7Dam12XmjGGg[[System.Int32, mscorlib]], *IB* _pMnaszsw5zIeP0Q7Dam12XmjGGg_IdeaBlade","Id":14}]

现在我跳过 4 条记录并取 2 条（好像移动到下一页）

> /api/Breeze/Sessions?$orderby=TimeSlotId%2CLevel%2CSpeaker%2FFirstName&$skip=4&$top=2&$select=Id&$inlinecount=allpages

这将返回：

> [{"$id":"1","$type":" *IB* _pMnaszsw5zIeP0Q7Dam12XmjGGg[[System.Int32, mscorlib]], *IB* _pMnaszsw5zIeP0Q7Dam12XmjGGg_IdeaBlade","Id":14},{"$id":"2", "$type":" *IB* _pMnaszsw5zIeP0Q7Dam12XmjGGg[[System.Int32, mscorlib]], *IB* _pMnaszsw5zIeP0Q7Dam12XmjGGg_IdeaBlade","Id":11}]

我两次获得 ID 14 的记录！我可以用任意数量的页面或记录重现此问题。

知道发生了什么吗？

**[编辑]**

好的，我注意到如果摆脱 orderby ($orderby=TimeSlotId%2CLevel%2CSpeaker%2FFirstName&) 那么一切都很好。orderby 怎么会出问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:11:52.467

为了使分页工作，应该有一个稳定的排序。我们`[QueryableAttribute]`通过尝试找出键是什么来做到这一点，如果它们还没有出现在查询中，则将它们添加到 order by 子句中。现在，推断实体的键是基于一些约定，例如实体是否具有名称为 Id 的属性或实体是否具有属性`[KeyAttribute]`等。

我怀疑我们无法找出`Session`你的`IQueryable<Session>`. 因此，没有强制执行稳定的排序顺序。现在它可能在没有 $orderby 的情况下工作的原因是表本身可能是有序的。同样，我猜你没有使用 entityframework，因为 entityframework 会抛出，如果有`Skip`或`Take`没有 stable 排序`orderby`。

`EnsureStableOrdering`现在，解决这个问题的方法（假设我之前的猜测是正确的:)）是确保自己稳定排序并告诉 QueryableAttribute 通过设置来停止尝试进行稳定排序`false`。

# java - 在 Java 源代码中使用泛型的力量

> ID：15874046
> 
> 赞同：3
> 
> 时间：2013-04-08T07:58:02.407
> 
> 标签：java, generics

在 Java 6 中，使用泛型是可选的。没有泛型的代码确实可以编译，但是 Eclipse 对此有疑问，所以我开始想知道在更高的 Java 版本中是否需要使用泛型，例如

```
Collection<?> foo = ... 
```

将编译同时

```
Collection foo = ... 
```

不会了。或者：编译器可以被迫这样做吗？——类似于 Perl 的“<a href="https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings">use strict”？

换句话说：人们是否应该期望工作需要花费在生成当前运行良好但没有配备泛型的 Java 源代码上？Oracle 是否有一些代码向后兼容性保证？

搜索*force generics*或*java require generics*并没有让我找到有用的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:11:20.443

如果不允许使用原始类型，则不允许您使用旧代码。但是，您可以配置 Eclipse 以生成错误。请参阅*Window -> Preferences -> Java -> Compiler -> Errors/Warnings*中的*Generics Types*部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:02:26.783

没有明确的方式可以肯定地说，但我高度怀疑 Oracle 会否决语法结构*并使*语法结构无效。这就像在不需要时强迫您使用钻石推理。

我可以相当肯定地说，Oracle 没有从 Java 中删除语法的计划。太多人会抱怨（例如，几乎所有东西都会坏掉）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:06:27.153

IntelliJ 也警告使用原始类型。它也必须是其他 IDE。所以，我猜，您使用 CI/命令行进行实际构建的情况..

您可以获得编译器警告`(Xlint:unchecked)`和一些后期处理。

# javascript - 如何用 Javascript 在格式错误的字符串中用正斜杠替换反斜杠？

> ID：15874048
> 
> 赞同：1
> 
> 时间：2013-04-08T07:58:11.593
> 
> 标签：javascript, backslash

```
// malformed string
var str = "C:\Windows\Fonts";

// C:WindowsFonts
alert(str.replace(/\\/g, "/")); 
```

如何正确替换`\`，`/`以便我可以得到`C:/Windows/Fonts`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:00:16.247

因为它是特殊字符使用转义标记

```
var str = "C:\\Windows\\Fonts"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:08:59.180

您需要再添加一个反斜杠来显示特殊字符。

```
var str = "C:\\Windows\\Fonts";
        alert(str); 
```

每当您在 JAvascript 中使用特殊字符时，您都需要添加一个反斜杠。

# android - 如何将 listView 设置为 ArrayAdapter，Android

> ID：15874049
> 
> 赞同：-1
> 
> 时间：2013-04-08T07:58:12.033
> 
> 标签：android, view, android-arrayadapter

如何将此 arrayAdapter 设置为我的 listView，以便在我的屏幕上填充 listView？

例如：

```
 listview.setAdapter(MyAdapter); 
```

这是我的 MainActivity 和 ListAdapter 的代码：

```
 public class MainActivity extends Activity {

CheckBoxInfo cbr;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    cbr = new CheckBoxInfo();
    cbr.checkBoxName = "dfdjklfjdkljf";
    cbr.checkBoxState = true;

    ListView listview = (ListView) findViewById(R.id.listView);

}

public class MyAdapter extends ArrayAdapter<CheckBoxInfo> {

    private List<CheckBoxInfo> checkBoxList;
    private Context context

    public MyAdapter(List<CheckBoxInfo> infoList, Context context) {
        super(context, R.layout.row_layout, infoList);
        this.checkBoxList = infoList;
        this.context = context;

        for(int i = 0; i <=12; i++){
            checkBoxList.add(cbr);
        }

    }

    public View getView(int position, View convertView, ViewGroup parent) {

        // First let's verify the convertView is not null
        if (convertView == null) {
            // This a new view we inflate the new layout
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.row_layout, parent, false);
        }
            // Now we can fill the layout with the right values
            TextView tv = (TextView) convertView.findViewById(R.id.textView1);
            CheckBox cb = (CheckBox) convertView.findViewById(R.id.checkBox1);
            CheckBoxInfo cbi = checkBoxList.get(position);

            tv.setText(cbi.checkBoxName);

        return convertView;
    }

}  // end MyAdapter 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:59:27.927

```
 ListView listview = (ListView) findViewById(R.id.listView);
 listview.setAdapter(MyAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:05:11.180

调用适配器类的构造函数

```
MyAdapter mAdapter=new MyAdapter(listOfInfo,MainActivity.this);
listView.setAdapter(mAdapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:11:03.873

在要为 ListView 设置适配器的类文件中执行以下操作：

```
listview = (ListView) findViewById(R.id.myListView);
myAdapter = new MyAdapter(this, R.layout.row_layout, listInfo);
listview.setAdapter(myAdapter); 
```

我建议您使用 View holder 和 convertview 模式来创建 listView，因为它会更有效。[这](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)是一个很好的解释它是如何工作的。如果您想参考我在[Github](https://github.com/asabbarwal/EffecientListViewDesign)上提供的代码示例。

希望这可以帮助。

# javascript - 检查文本框是否包含无效字符

> ID：15874052
> 
> 赞同：7
> 
> 时间：2013-04-08T07:58:34.567
> 
> 标签：javascript, regex

我在尝试使用 JavaScript 检查文本框是否仅包含 az 0-9 值时遇到问题。

我的页面上有一个文本框：

```
<input type="text" id="first_name" class="first_name" value=""> 
```

我正在使用以下 JavaScript 函数来检查我的文本框：

```
// Function to check letters and numbers
function alphanumeric(inputtxt)
{ 
//alert(inputtxt);
var letters = "/^[0-9a-zA-Z]+$/";
if(inputtxt.value.match(letters))
{
alert('accepted');
}
else
{
alert('Please input alphanumeric characters only');
return false;
}
} 
```

我这样调用我的函数：

```
var test = alphanumeric(document.getElementById("first_name").value); 
```

然而什么都没有发生。

如果我在我的字母数字函数中提醒“inputtxt”，它会返回我在文本框中的值，所以我知道有一个值要检查，但它似乎并没有从那里继续。

有谁知道我哪里出错了？

我正在尝试使用 JavaScript（没有 jQuery）来做到这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T08:01:50.790

几个问题：

*   [正则表达式文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)的错误形式（不要为它们使用引号）
*   使用`match`代替[测试](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)（不是错误但不是最有效的）
*   你使用`inputtxt.value`但`inputtxt`仍然是价值
*   你永远不会返回真

你可以使用这个：

```
function alphanumeric(inputtxt) { 
  var letters = /^[0-9a-zA-Z]+$/;
  if (letters.test(inputtxt)) {
    alert('accepted');
    return true;
  } else {
    alert('Please input alphanumeric characters only');
    return false;
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T08:00:19.900

您正在使用`.value`两次：

```
document.getElementById("first_name").value 
```

和`if(inputtxt.value.match(letters))`

删除其中之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:02:54.483

您正在使用`value`两次：

```
alphanumeric(document.getElementById("first_name").value); 
```

和

```
if(inputtxt.value.match(letters)) 
```

这基本上展开为

```
if(document.getElementById("first_name").value.value.match(letters)) 
```

这是没有意义的，因为`String`对象`value`没有属性`value`，而`undefined`实体`[...]value.value`也没有属性`match()`（调试控制台应该告诉你很多）。

`enter code here`var test = alphanumeric(document.getElementById("first_name"));

# iphone - 覆盖 UITextView styleString 将被 Apple 拒绝

> ID：15874061
> 
> 赞同：0
> 
> 时间：2013-04-08T07:59:09.203
> 
> 标签：iphone, uitextview

这是我之前[关于](https://stackoverflow.com/questions/15810263/add-space-between-lines-in-uitextview-ios5#comment22486111_15810263)如何**为 IOS5 设置 UITextView 的行高的问题**。经过大量搜索后，我找到了此[链接](https://stackoverflow.com/questions/3760924/set-line-height-in-uitextview)，这对于解决问题很有用。

如果我使用 **styleString**方法，Apple 会拒绝我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:36:19.547

我知道一些应用程序并没有被拒绝使用它，所以我会尝试一下。据我所知，它不是私有 API，所以应该没问题！

# lucene - 更改 Lucene 中的索引格式

> ID：15874062
> 
> 赞同：0
> 
> 时间：2013-04-08T07:59:22.857
> 
> 标签：lucene

我使用 lucene 4.2 构建索引，并尝试使用 3.6 查询索引。它在索引格式上引发了一些异常。我不想花时间使用 3.6 重建索引。

有没有快速的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:32:01.830

用 4.2 打开索引以便能够阅读它。索引格式已更改，这就是您无法使用 3.x lucene 打开 4.x 索引的原因。

# sql - 使用 sql 数据库中的文本框显示记录

> ID：15874063
> 
> 赞同：0
> 
> 时间：2013-04-08T07:59:26.460
> 
> 标签：sql, vb.net, winforms, combobox, textbox

这是我将记录从数据库显示到组合框的代码，但是，当我编辑代码并将其用于文本框时，它`.DataSource`不适`.ValueMember`用于文本框。

```
 Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim dt As New DataTable

    sqlconn.Open()
    Dim da As New SqlDataAdapter("SELECT * FROM tblOfficeEquipmentProfile", sqlconn)
    da.Fill(dt)
    cmbLocationCode.DataSource = dt
    cmbLocationCode.ValueMember = "OE_ID"
    sqlconn.Close() 
```

使用文本框显示数据库中数据的相应代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:24:57.603

你可以简单地这样做：

```
yourTextBox.Text = dt.Rows(0)("ColumnName").ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:20:51.910

没有像数据源、值成员和显示名称这样的属性将不可用。请参考此链接。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox_properties(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox_properties(v=vs.90).aspx)

您只能从数据库或本地分配中分配值。你应该通过以下方式来做。假设如果你有**txtUserName** 文本框，你应该分配以下方式

> txtLocationCode=dt.rows[0]["列名"].tostring()

没有属性数据源不可用，因为它不是集合对象。它只保存数据库中的一列值。

**更新 ：**

```
Public Sub PopulateOeqProfileForm()
Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
   "Database = EOEMS;integrated security=true"

    Dim dt As New DataTable

    sqlconn.Open()

     Dim SelectCommand As New SqlClient.SqlCommand (SELECT OE_ID FROM tblOfficeEquipmentProfile, sqlconn)

   txtOEID.Text = Cstr(SelectCommand.ExecuteScalar()) 
   sqlconn.Close() 
End Sub 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:38:05.340

它不显示数据先生

```
 Public Sub PopulateOeqProfileForm()
    Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim dt As New DataTable

    sqlconn.Open()
    Dim da As New SqlDataAdapter("SELECT * FROM tblOfficeEquipmentProfile", sqlconn)
    da.Fill(dt)
    txtOEID.Text = dt.Rows(0)("OE_ID").ToString()
    sqlconn.Close()
End Sub 
```

# php - PHP - 正则表达式/函数替换字符串中第 n 次出现的字符

> ID：15874064
> 
> 赞同：0
> 
> 时间：2013-04-08T07:59:27.340
> 
> 标签：php, regex, string, function, substitution

我有一个这样的 SQL 查询字符串：

```
SELECT * FROM `oc_product` WHERE `manufacturer_id` = ? AND `date_added` < ?  `product_id` IN (?) AND `price` > ? ORDER BY `product_id` ASC; 
```

这将移交给 Query 类构造函数，如下所示：

```
$query = new Query("SELECT * FROM `oc_product` WHERE `manufacturer_id` = ? AND `date_added` < ?  `product_id` IN (?) AND `price` > ? ORDER BY `product_id` ASC;", 27, date("Y-m-d H:i:s"), [17,18,29,30,46,47], 27.75); 
```

我目前有一个函数，它用问号作为分隔符来分解字符串，计算标记的数量并遍历参数，重新组合查询字符串，因此，对于每个作为数组的参数，我将其问号替换为许多问号作为参数都在数组中（因此，`IN (?)`它不会像 一样被纠正`IN (?,?,?,?,?,?)`）。

但是，我不喜欢我的函数的外观，并希望找到一个更好的等价物，或者如果可能的话，一个正则表达式/函数/SPL 驱动的过程，以使替换比我目前所做的容易得多。

你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:31:40.310

尝试这样的事情；

```
$params = array(27, date("Y-m-d H:i:s"), '[17,18,29,30,46,47]', 27.75);
$counter = 0;

$query = "SELECT * FROM `oc_product` WHERE `manufacturer_id` = ? AND `date_added` < ?  `product_id` IN (?) AND `price` > ? ORDER BY `product_id` ASC;";

echo preg_replace_callback('/\?/', function($matches) {
    $GLOBALS['counter']++;

    return $GLOBALS['params'][$GLOBALS['counter']-1];
}, $query); 
```

**输出**

```
SELECT * FROM `oc_product` WHERE `manufacturer_id` = 27 AND `date_added` < 2013-04-08 10:29:43 `product_id` IN ([17,18,29,30,46,47]) AND `price` > 27.75 ORDER BY `product_id` ASC; 
```

不确定`IN ([17,18,29,30,46,47])`部分，但您可以根据自己的喜好在`$params`数组中修改字符串。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:21:43.747

找到了解决方案。仅用于 SQL 查询部分，但它非常快并且看起来很简单：

```
// takes ~1.25ms to complete (on average)
function str_replace_nth($haystack, $needle, $occurrence, $replacement) {
    $tmp = explode($needle, $haystack);

    if ($occurrence > sizeof($tmp)) {
        return $haystack;
    } else {
        $tmp[$occurrence - 1] .= "{$replacement}{$tmp[$occurrence]}";
        unset($tmp[$occurrence]);
        return implode($needle, $tmp);
    }
} 
```

# android - 相机意图 onActivityResult 导致应用程序对象和活动重新创建

> ID：15874072
> 
> 赞同：0
> 
> 时间：2013-04-08T07:59:39.197
> 
> 标签：android, android-camera

下面的代码在某些设备上运行良好。但是在三星galaxy y duos和其他一些设备中，在拍照并单击保存时，再次调用应用程序对象oncreate和活动onCreate。这会导致存储在应用程序对象中的数据丢失。如何避免它

申请代码如下：

```
public class MyApplication extends Application {

    int a = 0;
    int b = 0;
    int c = 0;

    private static final String TAG = "MyApplication";

    @Override
    public void onCreate() {

        super.onCreate();

        Log.i(TAG, "####MyApplication on Craetet called");
    }

} 
```

我的活动代码如下

```
public class MainActivity extends Activity {

    private static final int SELECT_CAMERA = 1;
    private static final String TAG = "MainActivity";
    MyApplication app;
    TextView tv1, tv2, tv3;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        setContentView(R.layout.activity_main);
        super.onCreate(savedInstanceState);
        app = (MyApplication) getApplicationContext();
        Log.i(TAG, "#### MainActivity  onCreate called with values " + app.a + " " + app.b + " " + app.c);

        Button b = (Button) findViewById(R.id.button1);
        tv1 = (TextView) findViewById(R.id.textView1);
        tv2 = (TextView) findViewById(R.id.textView2);
        tv3 = (TextView) findViewById(R.id.textView3);

        tv1.setText("" + app.a);
        tv2.setText("" + app.b);
        tv3.setText("" + app.c);

        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                app.a = 5;
                app.b = 6;
                app.c = 8;

                Log.i(TAG, "after onclick  values " + app.a + " " +  app.b + " "+ app.c);

                Intent intentPicture = new Intent(
                    MediaStore.ACTION_IMAGE_CAPTURE);

                startActivityForResult(intentPicture, SELECT_CAMERA);

            }
        });

    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_CAMERA) {

                Log.i(TAG, "after image selected values " + app.a + " " + app.b
                    + " " + app.c);

                tv1.setText("" + app.a);
                tv2.setText("" + app.b);
                tv3.setText("" + app.c);

            }
        }
    }

} 
```

我的日志是

```
04-09 23:58:44.888: I/MyApplication(15189): ####MyApplication on Craetet called
04-09 23:58:45.160: I/MainActivity(15189): #### MainActivity  onCreate called with values 0 0 0
04-10 00:02:30.115: I/MainActivity(15795): after onclick  values 5 6 8

04-10 00:02:37.550: I/MyApplication(16016): ####MyApplication on Craetet called
04-10 00:02:37.587: I/MainActivity(16016):#### MainActivity  onCreate called with values 0 0 0
04-10 00:02:37.592: I/MainActivity(16016): after image selected values 0 0 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:40:19.230

在您的活动清单中尝试使用这个

```
android:configChanges="orientation|keyboardHidden" 
```

并在您的活动中覆盖 onConfigurationChanged 并重试..它不应该去你 ONCreate

# view - 视图的列取决于服务器回复 extjs 4

> ID：15874075
> 
> 赞同：0
> 
> 时间：2013-04-08T07:59:45.723
> 
> 标签：view, extjs4

存储从服务器获取 JSON 形式的回复。在某些情况下，字段 card_number 为空。我的任务是当字段 card_number 为空时隐藏列。现在此列显示并显示空值。我可以更改任何代码部分，包括服务器响应。

模型：

```
Ext.define('Guard.model.Report', {
extend : 'Ext.data.Model',
fields : [ 'first_name', 'last_name', 'card_number'] }); 
```

看法：

```
Ext.define('Guard.view.report.Export', {
extend: 'Ext.grid.Panel',
alias : 'widget.exportreport',
uses: [
    'Ext.ux.exporter.Exporter'
],
initComponent: function() {
    this.store = 'ReportCreate';

    this.dockedItems = [{
        xtype: 'toolbar',
        dock: 'top',
        items: [ {
            xtype: 'button',
            text : _msg_btn_load_reports_csv,            
            id : 'loadcsv',
            iconCls : 'loadcsvIcon'
        }]
    }];
    this.columns = [ {
        text : _msg_tbl_head_fname,
        align: 'center',
        dataIndex : 'first_name',
        flex : 1,
        renderer: function(value) {
            if(!value) {
                return _msg_grid_default_unknown;
            }
            return value;
        }   
    },{
        text : _msg_tbl_head_lname,
        align: 'center',
        dataIndex : 'last_name',
        flex : 1,
        renderer: function(value) {
            if(!value) {
                return _msg_grid_default_unknown;
            }
            return value;
        }
    },{
        text : _msg_tbl_head_card_number,
        align: 'center',
        dataIndex : 'card_number',
        flex : 1
    }];

    this.callParent(arguments);
}}); 
```

店铺：

```
 Ext.define('Guard.store.ReportCreate', {
extend: 'Ext.data.Store',
model: 'Guard.model.Report',
proxy: {
    type: 'ajax',
    url: 'php/reports.php',
    reader: {
        type: 'json',
        root: 'reportCreate',
        successProperty: 'success'
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:35:57.393

好的，我的解决方案很尴尬，可能有更好的方法。
向商店添加加载功能：

```
listeners: {
  load: function(store, records){
    var hasContent = false;
    Ext.Array.each(records, function(obj, index, arr) {
      hasContent = (obj.get('card_number') >= 0);
    });
    if (!hasContent) {
      // pseudo code: grid.colomn name hide()
    }
  }
} 
```

# nutch - nutch 爬虫：db_unfetched 一个大数并且没有进行抓取

> ID：15874079
> 
> 赞同：1
> 
> 时间：2013-04-08T08:00:10.227
> 
> 标签：nutch, web-crawler

我正在使用 nutch 从某个域的维基百科中抓取和下载内容。在日志中，我看到获取了大约 3000 个 url 但是当我查看统计数据时，db_fetched 仅为 81，而 db_unfetched 为 ~2900。在日志中，下载时没有发生异常，但不知何故，网址没有下载到我的电脑上。我已将 topN 设置为 50000，将深度设置为 50。

# node.js - 如何解决错误：找不到模块“kue”

> ID：15874080
> 
> 赞同：0
> 
> 时间：2013-04-08T08:00:11.310
> 
> 标签：node.js, kue

我正在开始 kue 工作队列，我正在尝试我的制片人是否工作

生产者.js

```
var kue = require('kue')
, redis = require('redis');

  kue.redis.createClient = function() {
    var client = redis.createClient(6379, '127.0.0.1');
    client.auth('');
    return client;
  };
  var jobs = kue.createQueue();

var sequence = 0;

setInterval(
  function() {
  sequence += 1;
  (function(sequence) {
  var job = jobs.create('email',{
  title: 'Hello #' + sequence
  ,to: 'whatemail@gmail.com'
  ,body: 'Hello from node!'
  }).save();

  job.on('complete', function(){
  console.log('job ' + sequence + ' completed!')
  });

  job.on('failed', function() {
  console.log('job ' + sequence + 'failed!')
  });
  })(sequence);
  }
  ,1000); 
```

但是我收到错误错误：找不到模块'kue'。但是我已经在全球范围内安装了 kue。

这是错误

```
C:\kueapps>node producer.js

module.js:340
    throw err;
          ^
Error: Cannot find module 'kue'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:364:17)
    at require (module.js:380:17)
    at Object.<anonymous> (C:\kueapps\producer.js:1:73)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-19T07:53:18.503

你需要运行

```
npm install kue 
```

您还可以将`--save`开关添加到命令中，以将依赖项保存在`package.config`文件中

# oracle - 如何使用查询将金额拆分为月份？

> ID：15874082
> 
> 赞同：3
> 
> 时间：2013-04-08T08:00:14.150
> 
> 标签：oracle, procedure, divide

例如，我简化了查询的结果（选择...从...哪里...）：

```
id months amount
1  2     120
1  6      180
2  2     120
2  6      180 
```

现在我需要从上面的第一个表中获取另一个表，它应该如下所示：

```
id months month_name amount
   2                 120
1  2      2013-04    60
1  2      2013-05    60
   6      180
1  6      2013-04     30
1  6      2013-05     30
1  6      2013-06     30
1  6      2013-07     30
1  6      2013-08     30
1  6      2013-09     30
   2      120
2  2      2013-04     60
2  2      2013-05     60
   6      180
2  6      2013-04     30
2  6      2013-05     30
2  6      2013-06     30
2  6      2013-07     30
2  6      2013-08     30
2  6      2013-09     30 
```

不知道如何通过查询得到这个结果？我应该使用程序吗？如果是这样 - 有什么例子吗？

已编辑：我现在似乎需要：如果给定日期比 sysdate 早一个多月（比如说两个月），那么第一笔金额应该加倍，并且所有拆分都应该在 1 个月内完成。难以解释。例如 ....add_months(to_date('2013-03','yyyy-mm'), Nl-1) as month_name... 以 sysdate 为 2013-04，那么结果应该出现：

```
id months month_name amount
   2                 120
1  2      2013-03    120
   6      180
1  6      2013-03     60
1  6      2013-04     30
1  6      2013-05     30
1  6      2013-06     30
1  6      2013-07     30
   2      120
2  2      2013-03     60
   6      180
2  6      2013-03     60
2  6      2013-04     30
2  6      2013-05     30
2  6      2013-06     30
2  6      2013-07     30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:26:11.500

使用 Oracle 11，您可以执行递归查询来获取它。

```
with base_Query as (select * from test),
data (id, months, amount, iter, month_amount) 
  as (select id, months, amount, 0, amount/months
        from base_Query
      union all
      select id, months, amount, iter+1, month_amount
        from data
       where iter+1 <= months)
select case when iter = 0 then to_number(null) else id end id, 
       months, 
       case when iter = 0 then amount else month_amount end amount
  from data d
 order by d.id, months; 
```

例如 [http://sqlfiddle.com/#!4/27edc/1](http://sqlfiddle.com/#!4/27edc/1)

10g 建模变体：

```
with base_query as (select rownum r, t.*, amount/months monthly_amount from test t)
select case i when 0 then to_number(null) else id end id,
       months, amount
  from base_query
model
partition by (r)
dimension by (0 as i)
measures (months, amount, monthly_amount, id)
rules (
  id[for i from 0 to months[0] increment 1] = id[0],
  amount[any] = case cv(i) when 0 then amount[0] else monthly_amount[0] end,
  months[any] = months[0]
); 
```

[http://sqlfiddle.com/#!4/27edc/4](http://sqlfiddle.com/#!4/27edc/4)

我添加了 rownum 以获得唯一的寻址系统，因为您的数据具有非唯一的 ID！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T08:28:22.380

在 9i 和更高版本中，您可以：

```
select decode(flag, 'original', null, id), months, amount
from(
    select id, 
           months, 
           add_months(to_date('2013-04','yyyy-mm'), N.l-1) as month_name,
           amount/months as amount, 
           'splitted' as flag
    from your_table t
    join (select level l from dual connect by level < 1000) N
    on (t.months >= N.l)

    union all

    select id, months, amount, null, 'original'
    from your_table
)
order by id, months; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:16:01.020

你的问题似乎不完整。我认为您只是想要通过删除 Where 条件来获取表中的数据。所以请尝试使用“SELECT * FROM YOUR_TABLE_NAME”

如果我对你不完整的问题是正确的，这应该会给你你正在搜索的结果

# c# - Crm 2011 实体集合查询和性能问题

> ID：15874086
> 
> 赞同：1
> 
> 时间：2013-04-08T08:00:26.917
> 
> 标签：c#, optimization, dynamics-crm-2011, dynamics-crm

我有一个应用程序需要查询一些实体并获取符合条件的实体。这是做的第一件事。它需要用不同的criteriaValues 多次调用，这很糟糕，因为往返时间严重降低了性能。

```
private AnEntity GetEntity(string criteriaValue, IOrganizationService service)
{
    QueryExpression query = new QueryExpression();
    query.EntityName = "entityname";
    query.ColumnSet = new ColumnSet(new string[] { "desiredField1", "desiredField2" });
    query.Criteria = new FilterExpression();
    query.Criteria.FilterOperator = LogicalOperator.And;
    query.Criteria.Conditions.Add(new ConditionExpression("criteriaField", ConditionOperator.Equal, criteriaValue));
    EntityCollection entities = service.RetrieveMultiple(query);
    if (entities.Entities.Count > 0)
    {
        return (AnEntity)entities[0];
    }
    return null;
} 
```

现在我正在考虑在应用程序启动时检索所有实体，并在 EntityCollection 上使用 LINQ 查询，类似这样。

```
private AnEntity GetEntity(string criteriaValue, EntityCollection theEntityCollection)
{
    var desiredEntity = from e in theEntityCollection.Entities
    where e.criteriaField.Equals(criteriaValue)
    select e;
    return (AnEntity)desiredEntity;
} 
```

这种方法有更好的选择吗？就像检索所有内容，将它们存储在 HashTable/Dictionary 中并使用 criteriaValue 作为键一样？我很想听听任何建议。

非常感谢您的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:19:28.610

这取决于记录的总数与总体符合您标准的记录数。如果您说 100,000 条记录并且只有 1000 条符合您的标准，那么我会说坚持您当前的方法。但是，如果您的大多数记录都将匹配，那么值得一口气将它们全部恢复，然后将它们分开。

您可以做的一件事是在 CRM 中支持并为 SQL 数据库中的基础表添加索引。如果表中有很多记录非常值得一试，这将加快速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:24:32.830

由于您只返回一条记录，因此您需要做的第一件事是在其上计数 1。默认情况下，CRM 将返回与计数匹配的前 5000 条记录。

这是指定您只想返回第一项的代码：

```
query.PageInfo.Count = 1; // Number of records to return
query.PageInfo.PageNumber = 1; // Page count. 
```

如果这不能将性能提高到可接受的水平，则检索所有实体并将它们存储为字典也是一种有效的方法。请记住，数据可能会变得陈旧......

# c++ - 将双字节字符转换为整数 C++

> ID：15874089
> 
> 赞同：0
> 
> 时间：2013-04-08T08:00:56.720
> 
> 标签：c++, mfc, cjk

我正在用 C++ 构建一个 MFC 项目。我有一个文本字段，用户应该在其中输入一个数字。使用英文键盘时，我可以将其转换为整数。但是当用户切换到日文键盘时，它就不起作用了。

我知道日文键盘会创建双字节字符。但我不知道如何将它们转换为整数。

抱歉信息不足。

我的目的是检查文本字段中输入的用户类型是否是数字。但它无法识别带有日文键盘的数字。我尝试了一些方法，例如：strtol()、_wtoi。但结果（频率）始终为 0；我调试时得到的字符串是１２３４５６７８９而不是１２３４５６７８９。这是我的代码

```
CString strFrequency;
GetDlgItem(IDC_EDIT_FREQUENCY)->GetWindowText(strFrequency);
if(strFrequency.IsEmpty()){
    CDialog::OnOK();
    return;
}       

for(int i=1; i<strFrequency.GetLength(); i+=2) {        
    if(!std::isdigit(strFrequency[i])){
        MessageBox("数字で入力してください。","発表支援");
        return;

    }
}   
int frequency = atoi(strFrequency); 
```

大家可以帮帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:03:03.883

```
CString strFrequency;
GetDlgItem(IDC_EDIT_FREQUENCY)->GetWindowText(strFrequency);

DWORD flags = LCMAP_HALFWIDTH; 
const int size = strFrequency.GetLength() / 2 + 1;
char* s = new char[size];
ZeroMemory(s, size);
LCMapString(LOCALE_SYSTEM_DEFAULT,
        flags,
        strFrequency,
        strFrequency.GetLength() + 1,
        s,
        size);
CString convertedText = s; 
```

我解决了。日文键盘键入的字符串（**strFrequency**）是**全角**长度。所以我将全角字符串转换为半角字符串。然后我可以检查它是否是数字字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:14:16.937

如果没有看到您尝试转换数字的代码，并且至少没有对将日文文本放入其中时实际发生的情况进行松散的描述，那么很难说出什么/为什么是错误的。目前，我唯一能想到的是，您要么使用了错误的数据类型（即 CHAR 而不是 WCHAR），要么您正在尝试使用诸如 atoi() 之类的纯阿拉伯语解析器直接解析诸如“四万”之类的日文符号，或者您可能忘记正确设置流编码或语言环境。

请记住，虽然日文键盘和日文语言环境将能够生成“40000”的文本，这可能会被 istringstream 解析（甚至可能会被某些 atoi 版本解析），那么几乎可以肯定的是像“四万”这样的日文数字（这也是 40000）很可能不会被解析。我认为'四万'被分类为文本而不是数字 - 但我在这里可能非常错误！我从未尝试过。但是，经过一番搜索，我没有看到任何提及这是可能的。

但是，似乎也有一些方法可以解析汉字数字，例如[如何使用 ICU 解析汉字数字字符？](https://stackoverflow.com/questions/795868/how-to-parse-kanji-numeric-characters-using-icu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:52:55.333

如果此调用编译并确实显示了日文字符，

```
MessageBox("数字で入力してください。","発表支援"); 
```

那么看来您正在将项目构建为 ANSI，而不是 UNICODE。

尝试将您的项目构建为 UNICODE，将调用更改为

```
MessageBox(L"数字で入力してください。",L"発表支援"); 
```

# iphone - presentModalViewController:Animated 在 ios6 中已弃用

> ID：15874094
> 
> 赞同：101
> 
> 时间：2013-04-08T08:01:07.000
> 
> 标签：iphone, objective-c, uiimage, uiimagepickercontroller

我将以下代码用于图像选择器。但是当我在模拟器中运行它时，我遇到了内存泄漏，并且我收到了关于`presentModalViewcontroller:animated`在 iOS6 中被弃用的警告。我也被`dismissModalViewController:animated`弃用了。我正在使用 SDK 6.1。

ImagePicker 的代码：

```
- (void)showAlbum:(id)sender { 
    imagePicker=[[UIImagePickerController alloc]init];
    imagePicker.delegate = self;
    imagePicker.allowsEditing =NO;
    imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagePicker animated:YES];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker{
    //release picker
    [picker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-04-08T08:03:00.097

使用此行并检查：

```
[self presentViewController:imagePicker animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-08T08:06:12.663

```
[[Picker presentingViewController] dismissViewControllerAnimated:YES completion:nil]; 
```

代替

```
 [[Picker parentViewControl] dismissModalViewControllerAnimated:YES]; 
```

和

```
[self presentViewController:picker animated:YES completion:nil]; 
```

代替

```
[self presentModalViewController:picker animated:YES]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-29T11:29:51.803

```
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)])
{
    [self presentViewController:objSignupViewController animated:^{} completion:nil];
}
else
{
    [self presentModalViewController:objSignupViewController animated:YES];
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-19T09:18:58.370

正如维沙尔所说

> ```
> [self presentViewController:imagePicker animated:YES completion:nil];
> [self dismissViewControllerAnimated:YES completion:nil]; 
> ```

确保你也添加了“completion:nil”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-01T08:14:06.653

采用：

```
[self presentViewController:imagePicker animated:YES completion:nil]; 
```

然后为您的解雇模式使用：

```
[self dismissViewControllerAnimated:controller completion:nil]; 
```

或者

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# google-app-engine - 适用于 Google App Engine 的 Java MVC

> ID：15874095
> 
> 赞同：2
> 
> 时间：2013-04-08T08:01:16.487
> 
> 标签：google-app-engine, jsf, spring-mvc, playframework, stripes

我刚毕业，没有实际经验。我想用 Java 开发相对简单的 Web 应用程序（工作列表网站），它适用于我的项目的 Google App Engine。

然而，我做了一些研究，并没有偶然发现 GAE 的各种框架的比较。一些文章说 Spring 3.0 的冷启动时间很长，但这些都是 3 年前的文章，那时 GAE 科学肯定发生了很大变化。JSF 应该是社区标准，但很复杂。Stripes/Play/..../... 框架已经存在，但我目前无法做出决定。

你能给我推荐一个具有以下标准的 MVC 框架吗？

1.  适用于 GAE（或针对 GAE 优化）
2.  轻量级——冷启动时间应该更短
3.  如果可能，响应时间应该更短

可以进行以下权衡。

1.  不需要事务或 Web 服务或持久性或其他一些高级特性
2.  可能很难学习（我有很多时间），但应该有文档

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:24:45.490

我个人的选择是[RESTeasy](http://www.jboss.org/resteasy)和[Htmleasy](https://code.google.com/p/htmleasy/)。如果你需要 JSON，还有[杰克逊。](http://jackson.codehaus.org/)

高枕无忧：

1.  [来自Java 开源领导者之一的基于](http://www.jboss.org/)[JAX-RS 标准](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Serviceshttp://)的开源库。优秀的支持。
2.  基于 MVC。
3.  很棒的文档，很多例子。
4.  在 GAE 上运行没有任何问题。
5.  如果您需要提供 JSON（= 您有移动客户端），则与 Jackson 捆绑在一起。

易

1.  轻量级，建立在 JAX-RS 和 RESTeasy 之上
2.  可以使用不同的 html 模板引擎，包括 JSP 和 Mustache。
3.  与 Mustache 一起工作，它可以是服务器端（服务器 Java 呈现模板）或客户端（JS 呈现模板 AJAX 样式）。

建议：

1.  相同的代码库可以同时提供 HTML 和 JSON，支持 Web 和移动客户端。
2.  在服务器端渲染和客户端渲染和 AJAX 之间找到适当的平衡。请记住，最大的网站同时使用两者：服务器端快速为您提供首页、客户端和 AJAX，以对用户操作做出出色的响应。
3.  不要将您的业务和数据库逻辑放在 JAX-RS 方法中，而是创建一个单独的业务层类。
4.  对业务层进行单元测试——你应该有 100% 的覆盖率。

# fabric - 使用 Fabric 在 AWS 上运行 python 应用程序

> ID：15874097
> 
> 赞同：0
> 
> 时间：2013-04-08T08:01:18.777
> 
> 标签：fabric

我正在尝试在 AWS 上运行 python web 应用程序。如果我使用 SSH 登录 AWS，它工作正常。但是对于织物，这是行不通的。我试过了：

```
run('python app.py &') 
```

和：

```
sudo('python app.py &') 
```

无反应：

```
$ python awsstart.py run
[ec2-user@XYZ] run: python app.py &
$ (empty) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T14:19:17.940

是否有可能因为命令末尾的“&”符号而看不到任何结果/响应？它似乎正在工作，但您看不到任何输出，因为它在后台工作。

你可以试试下面的吗？

```
sudo("python app.py") 
```

# java - 如何基于实时每 7 天同时进行一次方法循环？

> ID：15874099
> 
> 赞同：0
> 
> 时间：2013-04-08T08:01:26.543
> 
> 标签：java

pastebin.com/zgedMeaa 我让它在某个时间循环。我现在需要做的是，当我启动脚本时，它会在 4 周后的星期一凌晨 12 点完成。还; 当我运行我当前的脚本（Pastebin Link）时，输出是这样的：1.001495E7，有字母，这似乎不对。你能告诉我为什么它没有显示添加到 100k 的 14.95% 利息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:02:29.730

您可以通过 java.util.Timer 类安排“任务”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:09:24.357

你想要的是著名的 Unix **cron**，一个调度任务。在 java 中，例如[cron4j](http://www.sauronsoftware.it/projects/cron4j/)。而不是 java Timer cron 有一个简单的声明性配置，并且是面向日历/时钟的。

Quartz 也有一个[CronTrigger](http://quartz-scheduler.org/documentation/quartz-2.1.x/cookbook/WeeklyTrigger)。

# objective-c - 在多个文件上设置 viewController 子类的代码是个好主意吗？

> ID：15874106
> 
> 赞同：4
> 
> 时间：2013-04-08T08:01:56.667
> 
> 标签：objective-c, xcode4.5

我做了一个大程序。这是我使用的那种标题：

```
@interface:BGDetailBusinessViewController<UITableViewDataSource,UITableViewDelegate,UITextFieldDelegate,UIScrollViewDelegate,BGDetailFooterViewProtocol,BGDetailPhotoCell,PageControlDelegate,UINavigationControllerDelegate,UIActionSheetDelegate,BGShareSocialDelegate,BGReviewControllerProtocol> 
```

我认为代码有异味。那一个文件`BGDetailBusinessViewController.m`负责处理太多的事情。

去除异味的正常模式是什么？

是否有一些大型 Objective-C 代码的示例开源代码？这样我们就可以看到专业人士在制作非常非常大的程序时的表现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:15:41.253

你是对的 - 在模型视图控制器模式 (MVC) 中，控制器的工作是充当模型和视图之间的“粘合剂”。因此它不应该包含很多代码，它包含的代码负责在视图和模型之间进行调解。

如果您使用的是界面生成器，那么很容易在控制器中得到大量代码。可以避免这种情况，但我的建议是使用基于代码的视图来完成更复杂的工作。

*   这些视图应该使用组合——寻找可重用的 UI 元素集合并将它们构建为离散类。从这些建立你的观点。
*   创建您自己的委托协议以在您的视图和模型之间分流数据。通常，控制器将是委托的具体实现，但如果它是一个大问题，您可以使用单独的类，并将其作为视图控制器的成员提供（依赖注入）。
*   使用面向对象创建丰富的模型。
*   如果拥有一个大类确实有意义，请使用类别封装相关部分。

在您的特定情况下，为什么不让视图充当 UITableViewDelegate 和数据源，只需提供一种方法来传递所需的数据？这更符合 MVC 设计模式。

# java - 如何在android中设置延迟？

> ID：15874117
> 
> 赞同：186
> 
> 时间：2013-04-08T08:02:52.243
> 
> 标签：java, android

```
public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.rollDice:
            Random ranNum = new Random();
            int number = ranNum.nextInt(6) + 1;
            diceNum.setText(""+number);
            sum = sum + number;
            for(i=0;i<8;i++){
                for(j=0;j<8;j++){

                    int value =(Integer)buttons[i][j].getTag();
                    if(value==sum){
                        inew=i;
                        jnew=j;

                        buttons[inew][jnew].setBackgroundColor(Color.BLACK);
                                                //I want to insert a delay here
                        buttons[inew][jnew].setBackgroundColor(Color.WHITE);
                         break;                     
                    }
                }
            }

            break;

        }
    } 
```

我想在更改背景之间的命令之间设置延迟。我尝试使用线程计时器并尝试使用运行和捕获。但它不起作用。我试过这个

```
 Thread timer = new Thread() {
            public void run(){
                try {
                                buttons[inew][jnew].setBackgroundColor(Color.BLACK);
                    sleep(5000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

             }
           };
    timer.start();
   buttons[inew][jnew].setBackgroundColor(Color.WHITE); 
```

但它只会变成黑色。

* * *

## 回答 #1

> 赞同：572
> 
> 时间：2013-04-08T08:06:55.713

试试这个代码：

```
import android.os.Handler;
...
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        // Do something after 5s = 5000ms
        buttons[inew][jnew].setBackgroundColor(Color.BLACK);
    }
}, 5000); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-01-27T11:30:00.060

您可以使用`CountDownTimer`比发布的任何其他解决方案更有效的方法。`onTick(long)`您还可以使用其方法定期生成定期通知

看看这个显示 30 秒倒计时的例子

```
 new CountDownTimer(30000, 1000) {
         public void onFinish() {
             // When timer is finished 
             // Execute your code here
     }

     public void onTick(long millisUntilFinished) {
              // millisUntilFinished    The amount of time until finished.
     }
   }.start(); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-03-19T19:01:56.460

如果您在应用程序中经常使用延迟，请使用此实用程序类

```
import android.os.Handler;

public class Utils {

    // Delay mechanism

    public interface DelayCallback{
        void afterDelay();
    }

    public static void delay(int secs, final DelayCallback delayCallback){
        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                delayCallback.afterDelay();
            }
        }, secs * 1000); // afterDelay will be executed after (secs*1000) milliseconds.
    }
} 
```

用法：

```
// Call this method directly from java file

int secs = 2; // Delay in seconds

Utils.delay(secs, new Utils.DelayCallback() {
    @Override
    public void afterDelay() {
        // Do something after delay

    }
}); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-04-11T13:25:35.533

使用`Thread.sleep(millis)`方法。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-02T13:30:49.623

如果您想定期在 UI 中执行某些操作，那么非常好的选择是使用 CountDownTimer：

```
new CountDownTimer(30000, 1000) {

     public void onTick(long millisUntilFinished) {
         mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     }

     public void onFinish() {
         mTextField.setText("done!");
     }
  }.start(); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-10-02T06:53:41.887

**Kotlin 中的处理程序回答：**

1 - 在文件中创建一个[顶级函数](https://blog.jetbrains.com/kotlin/2015/06/improving-java-interop-top-level-functions-and-properties/)（例如一个包含所有顶级函数的文件）：

```
fun delayFunction(function: ()-> Unit, delay: Long) {
    Handler().postDelayed(function, delay)
} 
```

2 - 然后在您需要的任何地方调用它：

```
delayFunction({ myDelayedFunction() }, 300) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-08-07T20:47:36.433

你可以使用这个：

```
import java.util.Timer; 
```

对于延迟本身，添加：

```
 new Timer().schedule(
                    new TimerTask(){

                        @Override
                        public void run(){

                        //if you need some code to run when the delay expires
                        }

                    }, delay); 
```

其中`delay`变量以毫秒为单位；例如设置`delay`为 5000 延迟 5 秒。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-03T00:02:51.963

这是一个示例，其中我将背景图像从一个更改为另一个，双向具有 2 秒的 alpha 渐变延迟 - 原始图像的 2 秒淡出到第二个图像的 2 秒淡入。

```
 public void fadeImageFunction(View view) {

    backgroundImage = (ImageView) findViewById(R.id.imageViewBackground);
    backgroundImage.animate().alpha(0f).setDuration(2000);

    // A new thread with a 2-second delay before changing the background image
    new Timer().schedule(
            new TimerTask(){
                @Override
                public void run(){
                    // you cannot touch the UI from another thread. This thread now calls a function on the main thread
                    changeBackgroundImage();
                }
            }, 2000);
   }

// this function runs on the main ui thread
private void changeBackgroundImage(){
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            backgroundImage = (ImageView) findViewById(R.id.imageViewBackground);
            backgroundImage.setImageResource(R.drawable.supes);
            backgroundImage.animate().alpha(1f).setDuration(2000);
        }
    });
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-28T14:53:45.920

我认为截至 2020 年最简单、最稳定、最有用的方法是使用[Coroutines](https://developer.android.com/kotlin/coroutines)`delay`的功能而不是 Runnable。协程是处理异步作业的一个很好的概念，它的组件将是这个答案的重点。`delay`

*警告：协程需要**Kotlin**语言，我没有将代码转换为 Kotlin，但我认为每个人都能理解主要概念。*

只需将协程添加到您的`build.gradle`：

```
implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.9' 
```

向您的课程（活动、片段或其他内容）添加一个作业，您将在其中使用协程：

```
private var job: Job = Job()
override val coroutineContext: CoroutineContext
    get() = Dispatchers.Main + job 
```

您可以使用**launch{ }** body在类的**任何地方**使用协程。所以你可以这样写你的代码：

 **```
public void onClick(View v) {

    launch {

        switch(v.getId()) {
            case R . id . rollDice :
            Random ranNum = new Random();
            int number = ranNum . nextInt (6) + 1;
            diceNum.setText("" + number);
            sum = sum + number;
            for (i= 0;i < 8;i++){
                for (j= 0;j < 8;j++){
                    int value =(Integer) buttons [i][j].getTag();
                    if (value == sum) {
                        inew = i;
                        jnew = j;

                        buttons[inew][jnew].setBackgroundColor(Color.BLACK);
                        delay(2000)
                        buttons[inew][jnew].setBackgroundColor(Color.WHITE);
                        break;
                    }
                }
        }
            break;

        }
    }
} 
```

都是...

不要忘记`launch{}`函数是**异步**的，如果你这样写，*for循环*不会等待函数完成：`delay`

```
launch{
    buttons[inew][jnew].setBackgroundColor(Color.BLACK);
    delay(2000)
    buttons[inew][jnew].setBackgroundColor(Color.WHITE);
} 
```

因此，`launch{ }`如果您希望所有 for 循环等待，则应覆盖 for 循环`delay`。

另一个好处`launch{ }`是您正在使 for 循环**异步**，这意味着它不会在繁重的进程上阻塞应用程序的主 UI 线程。**

# ajax - Google 自定义搜索 v2 无法在 Ajax 上加载

> ID：15874122
> 
> 赞同：1
> 
> 时间：2013-04-08T08:03:16.120
> 
> 标签：ajax, search, google-custom-search

我正在将我的网站更改为 ajax + pushstate 技术，但遇到了一些问题。

我已经设法修复了 twitter、facebook 和 google+ 按钮，但我找不到重新加载 google 自定义搜索框的功能。

这是我现在正在使用的代码：

```
<script>
(function() {
var cx = 'google_search_id';
var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = false;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//www.google.com.br/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
})();
</script> 
```

# javascript - 如何使用 javascript 查找原始图像类型？

> ID：15874128
> 
> 赞同：0
> 
> 时间：2013-04-08T08:03:36.453
> 
> 标签：javascript, internet-explorer-10

我在 IE10 中工作以获取页面。在那使用一些图像。少数图像包含错误的图像类型（原始图像类型为“png”，但扩展名为“jpg”）。虚假图像在 IE10 中被破坏（但在 Firefox 中显示）。如何使用 javascript 查找原始图像类型，避免图像扩展并在 IE10 中显示？

需要像这样的代码

```
 var imgEle = document.createElement('img');
   imgEle.src = "imagePath/imageName."+findImageType("imagePath/imageName.jpg");

    function findImageType(imagUrl)
    {
      //do stuff
      return imageType;
    } 
```

可能吗？如果不是，有什么方法可以找到原始图像类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:14:38.057

我认为您可以为此使用 HTTP HEAD 请求（通过 XMLHttpRequest）。

您可以使用该方法获取图像的 mime 类型，因此您应该能够检查他的真实类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:15:50.833

结合使用deokman的答案和这个SO问题中的亚当：

[Javascript/Ajax 中的 HTTP HEAD 请求？](https://stackoverflow.com/questions/333634/http-head-request-in-javascript-ajax)

您可以构建一个函数，向具有图像的服务器发出特定的 HEAD 请求，然后使用 获取内容类型`getResponseHeader("content-type")`，然后可以将不同的内容类型字符串转换为实际的图像扩展名。如果您请求图像的服务器正确计算了内容类型（即不基于扩展名），那么这将是一种方法。

另一种方法是创建一个服务器端脚本，该脚本实际上分析每个文件的标题（读取二进制数据的前几个字节）以确定图像类型，并通过 ajax 再次调用它。

但是，使用任何一种方法都会遇到的问题是，您必须先更改扩展名，然后才能显示图像，然后这将指向一个不存在的文件。因此，解决问题的最佳方法是首先使用正确的扩展名重命名文件。

# python - 如何访问 QTextDocument 页面

> ID：15874129
> 
> 赞同：2
> 
> 时间：2013-04-08T08:03:45.670
> 
> 标签：python, qt, qt4, qtextedit, qtextdocument

我正在尝试构建一个以分页方式显示富文本文档的应用程序 - 或多或少像 MS Word 那样。现在，我希望一次只显示一页。

从[这个问题](https://stackoverflow.com/questions/3605368/how-to-paginate-a-qplaintextedit)中，我了解到我需要用[QTextDocument](http://qt-project.org/doc/qt-4.8/qtextdocument.html "QTextDocument")来表示文档。虽然问题的作者更多地关注*视图*表示，但我想了解以分页方式访问文档*数据*。我可以看到该类具有诸如`setPageSize()`和之类的方法`pageCount()`。呼叫`setPageSize()`似乎`pageCount()`相应更新。

问题是我不知道如何访问所选页面的内容以将其显示在 QtextEdit 中。

（我通过 PySide 库从 Python 访问 Qt）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:20:31.033

这`QTextEdit`是一个文本编辑器，并没有真正的页面概念，而是专注于段落。

您可以创建自己的分页视图来尊重页面大小，但 Qt 已经为您提供了一个。看看`QPrintPreviewWidget`或`QPrintPreviewDialog`。它们很容易与`QTextEdit`.

子类`QTextEdit`化并实现以下功能（该`preview`功能是一个 Qt 插槽）。该`printPreview`功能将在对话框中显示分页视图，其中包含`QTextEdit`.

```
void MyTextEdit::printPreview(QPrinter *printer)
{
    QPrinter printer(QPrinter::HighResolution);
    QPrintPreviewDialog preview(&printer, this);
    connect(&preview, SIGNAL(paintRequested(QPrinter*)), SLOT(preview(QPrinter*)));
    preview.exec();
}

void MyTextEdit::preview(QPrinter *printer)
{
     print(printer);
} 
```

# c# - 如何在 C# 中从 HTML 替换

> ID：15874131
> 
> 赞同：-2
> 
> 时间：2013-04-08T08:03:52.813
> 
> 标签：c#, string

```
 "<html><body style='background-color:Black;font-size:30px;color:#fff;'>
<html>\r\n<head><link href='http://www.taxmann.com/TaxmannWhatsnewService/Styles/style.css' rel='stylesheet' type='text/css' />\r\n
<title>Finmin Aims to Halve Net Bad Loans of PSBs</title>\r\n<style
 type=\"text/css\">\r\nbody{font-family:Arial, Helvetica, sans-serif; font-size:12px; line-height:18px;text-align:justify;}\r\n.w100{width:100%;}\r\n.fl-l{float:left;}\r\n.ffla{font-family:Arial,
 Helvetica, sans-serif;}\r\n.fs18{font-size:18px;}\r\n.mart10{margin-top:10px;}\r\n.fcred{color:#c81616;}\r\n.tc{text-align:center;}\r\n.tu{text-transform:uppercase;}\r\n.lh18{line-height:18px;}\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"w100 fl-l\">\r\n<div class=\"w100 fl-l ffla fs18 mart10 fcred ttunderline tc tu\">Finmin Aims to Halve Net Bad Loans of PSBs</div>\r\n\r\n<div class=\"w100 fl-l lh18 mart10\">Concernedover the rising bad loans of the state-run banks, the finance ministry is working out a plan to reduce their net non-performing assets (NPAs) to 1% of net advances by the end  Baand strict recovery policy. – www.economictimes.indiatimes.com</div>\r\n\r\n</div>\r\n</body>\r\n</html>\r\n</body><
/html>" 
```

这是我的 HTML，我想 `<html>\r\n<head><link href='http://www.taxmann.com/TaxmannWhatsnewService/Styles/style.css' rel='stylesheet' type='text/css' />\r\` 从给定的 HTML 中替换或删除。

我试过以下代码：

```
string t= html.replace(" given remove   ", " ") 
```

但无法做到请帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:22:43.067

首先，不要对此类要求使用字符串替换，而是检查并使用[HtmlAgilityPack](https://html-agility-pack.net/)。`quick give me`其次，我认为您可能由于情况和/或依赖其他一些实用工具而不想投入时间。

**[无论如何，以您的方式在这里](http://rextester.com/ZWQPFC96416)**生活示例。

## 示例代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;

namespace TestApplication
{
    public class Program
    {
        public static void Main(string[] args)
        {
            string inputValue = "<html><body style='background-color:Black;font-size:30px;color:#fff;'><html>\r\n<head><link href='http://www.taxmann.com/TaxmannWhatsnewService/Styles/style.css' rel='stylesheet' type='text/css' />\r\n<title>Finmin Aims to Halve Net Bad Loans of PSBs</title>\r\n<style type=\"text/css\">\r\nbody{font-family:Arial, Helvetica, sans-serif; font-size:12px; line-height:18px;text-align:justify;}\r\n.w100{width:100%;}\r\n.fl-l{float:left;}\r\n.ffla{font-family:Arial, Helvetica, sans-serif;}\r\n.fs18{font-size:18px;}\r\n.mart10{margin-top:10px;}\r\n.fcred{color:#c81616;}\r\n.tc{text-align:center;}\r\n.tu{text-transform:uppercase;}\r\n.lh18{line-height:18px;}\r\n</style>\r\n</head>\r\n<body>\r\n<div class=\"w100 fl-l\">\r\n<div class=\"w100 fl-l ffla fs18 mart10 fcred ttunderline tc tu\">Finmin Aims to Halve Net Bad Loans of PSBs</div>\r\n\r\n<div class=\"w100 fl-l lh18 mart10\">Concernedover the rising bad loans of the state-run banks, the finance ministry is working out a plan to reduce their net non-performing assets (NPAs) to 1% of net advances by the end  Baand strict recovery policy. – www.economictimes.indiatimes.com</div>\r\n\r\n</div>\r\n</body>\r\n</html>\r\n</body></html>";
            string resultValue= inputValue.Replace("href='http://www.taxmann.com/TaxmannWhatsnewService/Styles/style.css' rel='stylesheet' type='text/css' />\r\n", " ");
            Console.WriteLine("<span>Input value: </span>");
            Console.WriteLine(inputValue);
            Console.WriteLine("");
            Console.WriteLine("");
            Console.WriteLine("");
            Console.WriteLine("<span>Output value: </span>");
            Console.WriteLine(resultValue);
        }
    }
} 
```

# r - 如何在R中提取多边形的一部分？

> ID：15874137
> 
> 赞同：1
> 
> 时间：2013-04-08T08:04:09.030
> 
> 标签：r, plot, gis, polygon

我想在 R 中创建一张欧洲地图来绘制我的一些数据。我修改了下面的代码（取自：[http](http://www.r-bloggers.com/provincial-map-using-gadm/) ://www.r-bloggers.com/provincial-map-using-gadm/ ）给我一张欧洲地图。一切都很好，只是波罗的海沿岸的俄罗斯碎片消失了。

如何提取俄罗斯多边形的那一部分以维护真实的欧洲地图？

```
library(sp)
library(raster)
## Download Map of the World ##
WorldMap <- getData('countries')

## Subset world map to European countries ##
EuropeMap <- (WorldMap[WorldMap$CONTINENT=="Europe" & WorldMap$COUNTRY != "Russia",])

## Plot map ##
plot(EuropeMap, bg = "dodgerblue", axes = T)
plot(EuropeMap, lwd = 10, border = "skyblue", add = T)
plot(EuropeMap, col ="green4", add = T)
grid()
box()
invisible(text(getSpPPolygonsLabptSlots(EuropeMap), labels = as.character(EuropeMap$COUNTRY), cex = 0.5, col = "white", font = 2))
mtext(side = 3, line = 1, "Map of Europe", cex = 2)
mtext(side = 1, "Longtiude", line = 2.5, cex = 1.1)
mtext(side = 2, "Latitude", line = 2.5, cex = 1.1)
text(40,30, "Projection: Geographic\nCoordinate System: WGS 1984\nData Source: GADM.org\nCreated by: Keith Larson", adj = c(0,0), cex = 0.7, col = "grey20")
text(-35, 75, "Calopteryx splendens", col="white", font=3, cex=1.5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-22T04:04:13.003

提取俄罗斯多边形的那部分非常简单，就像选择符合我们条件的数据一样。例如：

```
datamapSliver <- datamap[datamap$Sliver==1,]
plot(datamapSliver) 
```

# shell - 将不同的 csv 组合成单个 xls

> ID：15874141
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:04:23.550
> 
> 标签：shell, unix

我想通过在 shell 脚本中组合三个或更多 xls 来形成一个 xls，比如在下面的示例中我有 A.csv、B.csv 和 C.csv，我希望所有三个都在单个 xls 中。

```
File name:,A.csv,,,,,,
Load summary:,,,,,,,
,"(A)
Records received in CIF file","(B)
Records loaded in CIF table (temp_card)","(C)
Cramer count (Card)","(A - B)
Records failed to load into CIF","(B - C)
Records failed to load into Cramer",Cramer Load Success %,Overall Load Success %
,14606,14606,14606,0,0,100,100

File name:,B.csv,,,,,,
Load summary:,,,,,,,
,"(A)
Records received in CIF file","(B)
Records loaded in CIF table (temp_card)","(C)
Cramer count (Card)","(A - B)
Records failed to load into CIF","(B - C)
Records failed to load into Cramer",Cramer Load Success %,Overall Load Success %
,14606,14606,14606,0,0,100,100

File name:,C.csv,,,,,,
Load summary:,,,,,,,
,"(A)
Records received in CIF file","(B)
Records loaded in CIF table (temp_card)","(C)
Cramer count (Card)","(A - B)
Records failed to load into CIF","(B - C)
Records failed to load into Cramer",Cramer Load Success %,Overall Load Success %
,14606,14606,14606,0,0,100,100 
```

我怎么能这样。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:34:09.963

简单的事情怎么样：

```
#!/bin/bash
cat A.csv B.csv c.csv > ABC.xls 
```

应该这样做。如果您期待其他内容，请在 QS 中提及。

# android - 使用 PendingIntent 显示对话框

> ID：15874144
> 
> 赞同：8
> 
> 时间：2013-04-08T08:04:34.957
> 
> 标签：android, android-pendingintent, android-alarms, android-event

我正在处理日历事件提醒。Android 中没有本地日历事件提醒，因此用户安装不同的日历应用程序。

现在，这些应用程序可以在提醒事件上有所不同，例如可以显示提醒通知。现在我希望我在这些事件日历应用程序中以编程方式设置一个事件，并且在到达时间时不显示任何通知，而是会显示一条弹出消息，并带有警报声。那时我使用该站点的代码。它可以工作，但它以通知的形式显示提醒。

这是代码：

接收

```
void doReminderWork(Intent intent) {
    Long rowId = intent.getExtras().getLong(RemindersDbAdapter.KEY_ROWID);

    NotificationManager mgr = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    Intent notificationIntent = new Intent(this, ReminderEditActivity.class); 
    notificationIntent.putExtra(RemindersDbAdapter.KEY_ROWID, rowId); 

    PendingIntent pi = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_ONE_SHOT); 

    Notification note=new Notification(android.R.drawable.stat_sys_warning, getString(R.string.notify_new_task_message), System.currentTimeMillis());
    note.setLatestEventInfo(this, getString(R.string.notify_new_task_title), getString(R.string.notify_new_task_message), pi);
    note.defaults |= Notification.DEFAULT_SOUND; 
    note.flags |= Notification.FLAG_AUTO_CANCEL; 

    int id = (int)((long)rowId);
    mgr.notify(id, note);
} 
```

现在我想显示一个对话框而不是通知，所以如何通过使用这些代码行来在对话框中使用这个待处理的意图。

```
 Intent notificationIntent = new Intent(this, ReminderEditActivity.class); 
notificationIntent.putExtra(RemindersDbAdapter.KEY_ROWID, rowId); 

PendingIntent pi = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_ONE_SHOT); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T08:33:31.867

在您的**Receiver 类**中，只需编写代码来显示对话框而不是通知。

**显示对话框的类：**

```
public class AlarmDialogPopUp extends Activity
{

    private int m_alarmId;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // Get the alarm ID from the intent extra data
        Intent intent = getIntent();
        Bundle extras = intent.getExtras();

        if (extras != null) {
            m_alarmId = extras.getInt("AlarmID", -1);
        } else {
            m_alarmId = -1;
        }

        // Show the popup dialog
        showDialog(0);
    }

    @Override
    protected Dialog onCreateDialog(int id)
    {
        super.onCreateDialog(id);

        // Build the dialog
        AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle("ALARM REMINDER");
        alert.setMessage("Its time for the alarm ");
        alert.setCancelable(false);

        alert.setPositiveButton("Dismiss", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                AlarmDialogPopUp.this.finish();
            }
        });

        // Create and return the dialog
        AlertDialog dlg = alert.create();

        return dlg;
    }
} 
```

**在您`onReceive`的显示对话框中：**

```
public void onReceive(Context context, Intent intent)
    {
          // Launch the alarm popup dialog
            Intent alarmIntent = new Intent("android.intent.action.MAIN");

            alarmIntent.setClass(context, AlarmDialogPopUp .class);
            alarmIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            // Pass on the alarm ID as extra data
            alarmIntent.putExtra("AlarmID", intent.getIntExtra("AlarmID", -1));

            // Start the popup activity
            context.startActivity(alarmIntent);

    } 
```

**根据评论编辑：**

要播放声音，您需要使用 MediaPlayer，如下所示。

`onCreate()`在活动类中添加此行`AlarmDialogPopUp`以播放声音。

```
MediaPlayer mediaPlayer; //global variable.

    mediaPlayer = MediaPlayer.create(this,R.raw.alarmsound); 
```

在对话框中添加以下行`onClick()`以停止声音：

```
mediaPlayer.stop();
mediaPlayer.release(); 
```

希望这可以帮助。

# linux - 如何使用 recvfrom() 获取 recvmsg() 返回的标志

> ID：15874145
> 
> 赞同：0
> 
> 时间：2013-04-08T08:04:37.270
> 
> 标签：linux, sockets

我必须使用`recvfrom()`从多个接口接收（在编译时未知，并且还需要保留消息的确切顺序，而不是使用单独的系统调用依次从每个接口接收），但我还需要访问一些标志仅`recvmsg()`提供（通过`flags`调用修改的消息头字段）。

有没有办法用来`recvfrom()`填充`msgheader`类似的`recvmsg()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T15:25:29.593

`recvmsg()`是 的函数超集`recvfrom()`，就像`recvfrom()`的函数超集一样`recv()`。换句话说，`recvmsg()`是三个功能中最强大的一个，其他两个可以做的事情你也可以做`recvmsg()`。

特别`recvfrom()`是，它的主要特点是它返回接收到的消息的发件人地址。使用 时可以获得相同的信息`recvmsg()`：查看 . 的`msg_name`和`msg_namelen`元素`struct msghdr`。

# r - 默认情况下不希望 R 将 char 转换为逻辑值

> ID：15874151
> 
> 赞同：2
> 
> 时间：2013-04-08T08:04:51.203
> 
> 标签：r

我正在尝试读取字符表，但是，R 不断将包含“T”字符的列转换为“TRUE”。我正在使用以下代码：

```
tab1 <- as.matrix(read.table("table.txt", sep=" "), stringsasfactors=F) 
```

我尝试添加选项： as.is=T 但没有用。

我不希望 R 将“T”值转换为 TRUE 的逻辑值。任何帮助深表感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:43:00.787

这应该有效：

```
read.table("table.txt", sep=" ",colClasses = "character") 
```

在[`read.table`](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/read.table.html)帮助文件中，您会发现：

*注意：要禁止**所有转换**，包括数字列的转换，请设置 colClasses = "character"。*

# grails - 在 Intellij Idea 中运行 grails 2.1.3 测试：Spock 测试中出现奇怪错误：无法添加域类 [class xyZ]。它不是域

> ID：15874155
> 
> 赞同：14
> 
> 时间：2013-04-08T08:05:13.213
> 
> 标签：grails, intellij-idea, grails-2.0, grails-domain-class, spock

我正在升级到 grails 2.1.x，需要重做一些旧式测试。

我刚刚在我的 spock Spec 中添加了一个新测试，对于这个测试，我需要模拟一个额外的 Domain 类。

在此之前，我有：

```
@Mock([Event, EventType]) 
```

我现在有：

```
@Mock([Event, EventType, Notification]) 
```

Notification.groovy 与 Event 和 EventType（在 grails-app/domain 下）位于相同的包和物理目录中，因此它绝对是一个 grails 域类。

当我尝试运行我的测试时，我得到以下堆栈跟踪：

```
org.codehaus.groovy.grails.exceptions.GrailsConfigurationException: Cannot add Domain class [class x.y.Notification]. It is not a Domain!
    at org.codehaus.groovy.grails.commons.DefaultGrailsApplication.addArtefact(DefaultGrailsApplication.java:911)
    at org.codehaus.groovy.grails.commons.DefaultGrailsApplication.addArtefact(DefaultGrailsApplication.java:615)
    at grails.test.mixin.domain.DomainClassUnitTestMixin.mockDomain(DomainClassUnitTestMixin.groovy:131)
    at grails.test.mixin.domain.DomainClassUnitTestMixin.mockDomain(DomainClassUnitTestMixin.groovy:128) 
```

当我通过兔子洞并开始调试执行时，我到达了 DomainClassArtefactHandler 的这一部分（第 87 行）：

```
 // make sure the identify and version field exist
            testClass.getDeclaredField(GrailsDomainClassProperty.IDENTITY);
            testClass.getDeclaredField(GrailsDomainClassProperty.VERSION); 
```

这会出现异常，因为我猜 id 字段不存在

所以出了点问题，在执行之前没有添加 GORM 字段。

有人对我需要做什么有建议吗？我是否需要将我的域类标记为@Entity（这实际上使我的测试通过）？

我很确定这不应该是我的单元测试通过的强制性要求。

有什么建议吗？

**更新：** 实际上，我刚刚发现只有在我的 IDE 中运行单元测试时才会出现这个问题：intellij Idea 12.1

已创建问题，此处使用测试应用程序：

[http://jira.grails.org/browse/GRAILS-9989](http://jira.grails.org/browse/GRAILS-9989)

[http://youtrack.jetbrains.com/issue/IDEA-105087](http://youtrack.jetbrains.com/issue/IDEA-105087)

当我删除两个域类中的静态映射块时，测试通过了！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-11T07:32:25.720

问题似乎是由于 IDEA 没有正确清理从一次测试运行到另一次运行。重建项目后测试通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-16T21:39:44.307

我也有类似的问题。我只需要刷新 gradle 项目。

1.  导航到 IntelliJ 中的 Gradle tan。
2.  您可以单击刷新图标或右键单击项目并选择“刷新 Gradle 项目”。

在 IntelliJ 中重新运行测试，错误应该会消失。

# c# - 实现搜索多个关键字的全文搜索

> ID：15874156
> 
> 赞同：0
> 
> 时间：2013-04-08T08:05:13.843
> 
> 标签：c#, asp.net, sql-server

我已经在我的应用程序中实现了全文搜索，以便从数据库中的表中搜索关键字。现在我想扩展对多个单词的搜索。我用谷歌搜索但没有得到我想要的答案。谁能告诉我如何扩展搜索多个关键字。

**查询**：

```
select ProductCode,CategorySequenceNumber from tblProductMaster where Contains(*,@stringToSearch) 
```

任何建议都会被应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:16:43.673

根据您想要的行为传递以“AND”或“OR”分隔的关键字：

```
SET @stringtosearch = '"this" AND "word" OR "test"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:08:37.930

您可以将空格处的搜索文本拆分为字符串数组，然后搜索每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:41:19.260

使用 FREETEXT 函数而不是 CONTAINS。用空格分隔关键字。

# php - JPGraph - PHP - MySQL - 0 值

> ID：15874159
> 
> 赞同：0
> 
> 时间：2013-04-08T08:05:17.330
> 
> 标签：php, mysql, jpgraph

我想在包含 MySQL 数据库数据的同一图中显示 2 行。我每半小时就有一次 FAIL 和 DONE 结果，我想显示最后一天的结果。

```
data_time >= now() - INTERVAL 1 DAY"; 
```

有时没有失败，这就是图表无法显示正确结果的原因，因为它连续显示数据并且不关心`x`轴。

如何添加`x`在这些情况下显示为 0 的变量（在该时间段内没有失败）？或者我怎样才能`x`在同一张图上组合两个轴值（小时）？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:45:35.067

```
for ($i = 0; $i <= count($data)-1; $i++) {
$k = 0;
for ($j = 0; $j <= count($data2)-1; $j++) {

    if($leg[$i] == $leg2[$j]){$data3[$i] = $data2[$j]; $k++;}
    if($k==0){$data3[$i] = 'x';}

}
} 
```

# jpa - 我的 JPA @OneToOne 关系导致目标实体上的插入而不是更新

> ID：15874161
> 
> 赞同：1
> 
> 时间：2013-04-08T08:05:39.677
> 
> 标签：jpa, spring-data-jpa

我有一个与实体`Member`有如下`@OneToOne`关系的实体：`Address`

在`Member`实体中：

```
@OneToOne(cascade=CascadeType.ALL)
private Address address; 
```

`Address`实体：

```
@RooJpaEntity
public class Address {

    private String formattedAddress;
    private double latitude;
    private double longitude;
} 
```

我遇到的问题是每次我更新会员的地址如下：

```
public void modifyAddress(Member member, Address address){
        member.setAddress(address);
        memberRepository.save(member);
    } 
```

...**而不是更新地址表中的行，而是在地址表中插入一个新行并更新成员表中的 FK，**如下面的 sql 所示：

生成的 SQL：

```
Hibernate: 
    /* insert com.bignibou.domain.Address
        */ insert 
        into
            address
            (formatted_address, latitude, longitude, version) 
        values
            (?, ?, ?, ?)
Hibernate: 
    /* update
        com.bignibou.domain.Member */ update
            member 
        set
            address=?,
            version=? 
        where
            id=? 
            and version=? 
```

我不知道如何解决这个问题（我现在不想在成员表中内联地址数据）。我希望我的应用程序更新地址表，而不是在该表中插入新行。

有人可以请教吗？

**编辑1**：

我修改了我的实体如下：

这是完整的`Address`实体：

```
@RooJpaEntity
public class Address {

    private String formattedAddress;
    private double latitude;
    private double longitude;

    @OneToOne(cascade = CascadeType.ALL, mappedBy = "address")
    private Member member;
} 
```

这是`Member`实体中的相关属性：

```
@OneToOne
private Address address; 
```

我的方法：

```
@Override
public void modifyAddress(Member member, Address address){
    address.setMember(member);
    updateAddress(address);
} 
```

我的应用程序的行为没有改变......

**编辑 2**：如果我如下修改应用程序，我会收到 StaleObjectStateException。

```
@Override
    public void modifyAddress(Member member, Address address){
        long addressId = member.getAddress().getId();
        address.setId(addressId);
        address.setMember(member);
        updateAddress(address);
    } 
```

地址：

```
@RooJpaEntity
public class Address {

    private String formattedAddress;
    private double latitude;
    private double longitude;

    @OneToOne
    private Member member;
} 
```

在会员中：

```
@OneToOne
private Address address; 
```

陈旧对象状态异常：

```
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bignibou.domain.Address#5]
    org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:303)
    org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
    org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
    org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:903)
    org.hibernate.internal.SessionImpl.merge(SessionImpl.java:887)
    org.hibernate.internal.SessionImpl.merge(SessionImpl.java:891)
    org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:879)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:366)
    com.sun.proxy.$Proxy49.merge(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:241)
    com.sun.proxy.$Proxy48.merge(Unknown Source)
    org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:353)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:333)
    org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:318)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:96)
    org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:260)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:94)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.data.jpa.repository.support.LockModeRepositoryPostProcessor$LockModePopulatingMethodIntercceptor.invoke(LockModeRepositoryPostProcessor.java:92)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:91)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    com.sun.proxy.$Proxy65.save(Unknown Source)
    com.bignibou.service.PreferencesServiceImpl_Roo_Service.ajc$interMethod$com_bignibou_service_PreferencesServiceImpl_Roo_Service$com_bignibou_service_PreferencesServiceImpl$updateAddress(PreferencesServiceImpl_Roo_Service.aj:53)
    com.bignibou.service.PreferencesServiceImpl.updateAddress(PreferencesServiceImpl.java:1)
    com.bignibou.service.PreferencesServiceImpl_Roo_Service.ajc$interMethodDispatch1$com_bignibou_service_PreferencesServiceImpl_Roo_Service$com_bignibou_service_PreferencesServiceImpl$updateAddress(PreferencesServiceImpl_Roo_Service.aj)
    com.bignibou.service.PreferencesServiceImpl.modifyAddress_aroundBody12(PreferencesServiceImpl.java:100)
    com.bignibou.service.PreferencesServiceImpl$AjcClosure13.run(PreferencesServiceImpl.java:1)
    org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$around$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96cproceed(AbstractTransactionAspect.aj:59)
    org.springframework.transaction.aspectj.AbstractTransactionAspect$AbstractTransactionAspect$1.proceedWithInvocation(AbstractTransactionAspect.aj:65)
    org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:260)
    org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$around$org_springframework_transaction_aspectj_AbstractTransactionAspect$1$2a73e96c(AbstractTransactionAspect.aj:63)
    com.bignibou.service.PreferencesServiceImpl.modifyAddress(PreferencesServiceImpl.java:93)
    com.bignibou.controller.PreferenceController.modifyAddress(PreferenceController.java:168) 
```

**编辑 3**：

地址的哈希码：

```
public int hashCode() {
        return new HashCodeBuilder().append(formattedAddress).append(getId()).append(latitude).append(longitude).toHashCode();
    } 
```

地址等于（来自 ITD）：

```
public boolean Address.equals(Object obj) {
        if (!(obj instanceof Address)) {
            return false;
        }
        if (this == obj) {
            return true;
        }
        Address rhs = (Address) obj;
        return new EqualsBuilder().append(formattedAddress, rhs.formattedAddress).append(id, rhs.id).append(latitude, rhs.latitude).append(longitude, rhs.longitude).append(member, rhs.member).isEquals();
    } 
```

地址实体的 ITD：

```
privileged aspect Address_Roo_Jpa_Entity {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    private Long Address.id;

    @Version
    @Column(name = "version")
    private Integer Address.version;

    public Long Address.getId() {
        return this.id;
    }

    public void Address.setId(Long id) {
        this.id = id;
    }

    public Integer Address.getVersion() {
        return this.version;
    }

    public void Address.setVersion(Integer version) {
        this.version = version;
    }

} 
```

顺便说一句，ITD 只是方面。

**编辑 4**：我在这里为您设置了一个示例应用程序：[https ://github.com/balteo/sample-app-gab](https://github.com/balteo/sample-app-gab)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:11:02.390

（我删除了错误的原始诊断，我还是让链接因为它们仍然具有指导意义）

请参阅：[http](http://www.objectdb.com/api/java/jpa/OneToOne) ://www.objectdb.com/api/java/jpa/OneToOne和[JPA Hibernate 一对一关系](https://stackoverflow.com/questions/787698/jpa-hibernate-one-to-one-relationship)和[http://www.techavalanche.com/2012/05/10/one-to-one -单向映射使用外键/](http://www.techavalanche.com/2012/05/10/one-to-one-unidirectional-mapping-using-foreign-key/)

编辑 ：

*   实际上你得到 StaleObjectStateException 因为你正在修改现有实体的主键
*   如果您恢复到原始（和正确）配置（成员拥有单向 OneToOne 关系）。
    您可以通过保存成员执行以下操作来更新地址表：
    *   保存地址为 a0 的成员 m0
    *   冲洗
    *   检索 m0.a0 并编辑值
    *   保存 m0或者
    *   保存没有地址的成员 m1
    *   保存地址 a1
    *   冲洗
    *   将a1附加到m1，保存m1或者
    *   用地址 a2 保存成员 m2
    *   冲洗
    *   将 m2 地址设置为空
    *   保存 m2，此处 a2 将被更新并保持没有关联成员（孤儿），您可以在这种情况下使用关系上的 delete-orphan 选项强制删除 a2

Ofc，仅当操作发生在同一事务中时才需要此处的刷新调用。

所有这些在您的示例应用程序中运行良好。

请注意一件有趣的事情，OneToOne 关系本身并不能确保地址和成员之间的唯一性。（您可以有 2 个成员引用相同的地址）。您必须使用明确的唯一约束`@JoinColumn(name = "address", unique=true)`

# regex - 仅当不在另一个模式之前或之后匹配一个模式

> ID：15874162
> 
> 赞同：1
> 
> 时间：2013-04-08T08:05:48.270
> 
> 标签：regex

我知道天真的方法是使用`[^a]b[^c]`(for `b`not before `a`and not behind by `c`)，但我也想在字符串`b`的**开头**或**结尾**进行匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:09:04.237

您使用的是哪种正则表达式？如果您可以使用 Perl 正则表达式，则可以使用负后瞻和负前瞻：

```
(?<!a)b(?!c) 
```

否则，您通常可以做的最好的事情是：

```
([^a]|^)b([^c]|$) 
```

即 b 前面是除 a*或*行首之外的任何内容，后面是除 c*或*行尾之外的任何内容。

# javascript - 如何以正确的符号迭代数组内的对象？

> ID：15874165
> 
> 赞同：1
> 
> 时间：2013-04-08T08:06:05.623
> 
> 标签：javascript, jquery, ajax, node.js

我通读了 Javascript The Good Parts，并了解到 using`for (i in blah) {}`是不好的表示法，但问题是，我正在使用`Node.js`并且我正在使用的数据库`MongoDB`返回所有查询，`objects`这很好。现在我有一个 ajax 查询，它从表中提取所有信息，我想对每个值做一些事情。

但是数据库返回的是一个包含对象的数组（随机大小取决于数据库中的内容），为了清楚起见，我会给你一个例子：

```
[
 {
  'a': 'value of a',
  'b': 'value of b',
  'c': 'value of c'
 },
 {
  'a': 'value of a',
  'b': 'value of b',
  'c': 'value of c'
 }
] 
```

我如何遍历每件事，以便我可以从每件事中分配变量，这就是我所做的：

```
 for (var i = 0; i < data.success.length; i += 1) {
      for(x in data.success[i]) {
        console.log(x);
      }
    } 
```

我只是担心坏的符号最终会咬我，我读到`(blah in blah)`符号并不总是按顺序返回结果。这必须是有序的。希望我说清楚了，谢谢。

我需要获取值，而不是对象中变量的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:09:20.087

`Object.keys(data.success[i])`将为您提供对象中存在的所有键，然后您可以`.sort`保证排序顺序。

```
data.success.forEach(function(item, n) {
   console.log('item ' + n);
   Object.keys(item).sort().forEach(function(key) {
      console.log(key + ':' + item[key]);
   });
}); 
```

# php - PHP上传照片并为每个用户技术保存？

> ID：15874170
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:06:26.807
> 
> 标签：php

以下是我打算如何处理个人资料图片：我将创建一个文件夹名称“图片”，所有用户都上传到该特定文件夹，每次他们上传图片时都会增加 1 或 1.png、2.png 等等。但是对于那个用户，我会将该特定图片的 URL 存储在该用户的数据库表中。然后我可以运行一个查询来显示那个人的所有照片，然后他们可以选择一张来制作他们的个人资料照片。

我可以得到一些反馈，或者如果它完全错误，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:14:55.483

您可以根据需要保存任意数量的图片并将它们全部保存在数据库中。如果您想保留所有个人资料更改（并且在学生更改照片时不丢弃），您需要有一个包含文件名的表格和一个像“current_photo”这样的标志，以知道哪个是当前的。

至于文件名，我建议只使用学生 id + 当前时间制作一个随机数。

```
$path_info = pathinfo($_FILES["file"]["name"]);
$extension = $path_info["extension"];
$filename = $student_id . time() . $extension; 
```

甚至散列它

```
$path_info = pathinfo($_FILES["file"]["name"]);
$extension = $path_info["extension"];
$filename = hash("sha512", $student_id . time() . $extension); 
```

# java - 在日历视图中更改单日的颜色，android

> ID：15874175
> 
> 赞同：12
> 
> 时间：2013-04-08T08:06:55.377
> 
> 标签：java, android, eclipse, calendarview

我在 Eclipse 中有日历视图，现在我正在尝试更改一天的外观以突出显示日期。[我在这里](http://developer.android.com/reference/android/widget/CalendarView.html)没有找到任何有用的方法，只有整个工作日或月份的外观变化。那么是否有可能突出显示某一天？

我也知道有 3 个帖子有同样的问题，但没有一个得到回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T08:38:48.600

您可以扩展本机 CalenderView 以创建自己的 CustomCalendarView 并对外观进行任何所需的更改。

[您可以在此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.1_r2/com/android/calendar/CalendarView.java)找到本机 CalendarView 的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-04T14:16:38.257

您可以通过获取的子视图`CalendarView`并更改那里的配置来做到这一点：

```
 final CalendarView calendar = new CalendarView(this);       
    java.lang.reflect.Field field = null;

    Class<?> cvClass = calendar.getClass();
    try {
        field = cvClass.getDeclaredField("mDayNamesHeader");    
        field.setAccessible(true);
    } catch (NoSuchFieldException e) {
    }

    ViewGroup tv = null;
    try {
        tv = (ViewGroup) field.get(calendar);
    } catch (IllegalAccessException e) {} 
      catch (IllegalArgumentException ){}

    TextView k =  (TextView) tv.getChildAt(1);
    k.setTextColor(Color.RED); 
```

在这里您可以找到所有声明：

[https://android.googlesource.com/platform/frameworks/base/+/2888524e03896831f487e5dee63f18f1c33c0115/core/java/android/widget/CalendarView.java](https://android.googlesource.com/platform/frameworks/base/+/2888524e03896831f487e5dee63f18f1c33c0115/core/java/android/widget/CalendarView.java)

# knockout.js - 淘汰赛 foreach 不适用于模型

> ID：15874182
> 
> 赞同：0
> 
> 时间：2013-04-08T08:07:15.060
> 
> 标签：knockout.js

你好我有下一个代码：

```
 <div class="dropdownSelector" data-bind="visible: modelSelectorD.isActive()">
    <i></i>
    <input type="text" data-bind="value: modelSelectorD.searchText, valueUpdate: 'afterkeydown'" class="txt block searchField" />
    <ul data-bind="foreach: modelSelectorD.visibleData">
        <li data-bind="click: modelSelectorD.doSwitch"><a data-bind="html: modelSelectorD.getName($data,$element)"></a></li>        
    </ul>
    <span data-bind="visible:modelSelectorD.showMoreLink, text:modelSelectorD.showMoreText"></span><br/>    
    <a href="#" class="close" data-bind="click: modelSelectorD.close">Close</a>
</div>

<div class="dropdownSelector" data-bind="visible: modelSelectorC.isActive()">
    <i></i>
    <input type="text" data-bind="value: modelSelectorC.searchText, valueUpdate: 'afterkeydown'" class="txt block searchField" />
    <ul data-bind="foreach: modelSelectorC.visibleData">
        <li data-bind="click: modelSelectorC.doSwitch"><a data-bind="html: modelSelectorC.getName($data,$element)"></a></li>        
    </ul>
    <span data-bind="visible:modelSelectorC.showMoreLink, text:modelSelectorC.showMoreText"></span><br/>    
    <a href="#" class="close" data-bind="click: modelSelectorC.close">Close</a>
</div>

<script type="text/javascript">
    var obj = { id: 0, name: "not selected" };
    function selector(maxcount, serviceGet, serviceChange) {
        var self = this;
        self.isActive = ko.observable(false);
        self.maxcount = ko.observable(maxcount);
        self.serviceUrlGet = serviceGet;
        self.serviceUrlChange = serviceChange;
        self.searchText = ko.observable("");
        self.selectedItem = ko.observable(obj);
        self.allObjects = ko.observableArray([]);
        self.visibleData = ko.observableArray([]);
        self.showMoreLink = ko.computed(function () {
            return self.allObjects().length > self.maxcount();
        }
        );

        self.showMoreText = ko.computed(function () {
            return "... ( " + self.allObjects().length + " )";
        }
        );

        self.getName = function (data, element) {
            if (data) {
                var html = "<i>" + data.id + "</i> " + data.name;
                return html;
            }
            return "";
        };
        self.doSwitch = function (data) {
            self.selectedItem(data);
            self.close();
        };

        self.close = function () {
            self.isActive(false);
        };

        self.show = function () {
            self.isActive(true);
        };

        self.searchText.subscribe(function (newValue) {
            self.getData(newValue);
        });

        self.getData = function (searchText) {
            var data = { "name": searchText, "maxcount": self.maxcount() };
            $.ajax({
                type: "POST",
                url:  self.serviceUrlGet,
                cache: false,
                contentType: 'application/json',
                dataType: "json",
                data: JSON.stringify(data),
                success: function (data) {
                    self.allObjects(data.d);
                    if (self.allObjects().length > self.maxcount()) {
                        self.visibleData(self.allObjects().slice(0, self.maxcount()));
                    }
                    else {
                        self.visibleData(self.allObjects());
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    //console.log(textStatus);
                }
            });
        }
    }
    var modelSelectorD = new selector(5, "/services2", "");
    var modelSelectorC = new selector(5, "/services1", "");
    ko.applyBindings(modelSelectorD);
    ko.applyBindings(modelSelectorC);
    $(function () {
        modelSelectorD.getData("");
    });
</script> 
```

它运行良好，除了 foreach，foreach 没有显示我的 LI 元素。为什么不发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:10:15.527

查看这个问题：[Knockoutjs Multiple Viewmodels in a single view](https://stackoverflow.com/questions/9293761/knockoutjs-multiple-viewmodels-in-a-single-view)，了解有关此主题的更多信息。

您需要做的是将这两个模型组合成一个视图模型，然后您可以参考该模型。

例如

```
var viewModel = {
    modelSelectorD: new selector(5, "/services2", ""),
    modelSelectorC: new slector(5, "/services1", "")
}

ko.applyBindings(viewModel); 
```

或者，您可以针对特定元素应用绑定。

> 或者，您可以传递第二个参数来定义要在文档的哪个部分搜索数据绑定属性。例如，ko.applyBindings(myViewModel, document.getElementById('someElementId'))。这将激活限制为 ID 为 someElementId 的元素及其后代，如果您希望拥有多个视图模型并将每个模型与页面的不同区域相关联，这将非常有用。

-- [http://knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:26:27.830

您可以将不同的视图模型绑定到页面的不同部分：

```
ko.applyBindings(viewModel1, $('#section1')[0]);
ko.applyBindings(viewModel2, $('#section2')[0]); 
```

# uicollectionview - 是否可以将不同大小的部分页脚添加到同一 uicollectionview 的不同部分

> ID：15874185
> 
> 赞同：1
> 
> 时间：2013-04-08T08:07:38.567
> 
> 标签：uicollectionview, footer

我有一个`uicollectionview`包含 2 个部分的部分，我想为每个部分添加不同大小的页脚。从 IB 中我看到每个集合只能添加一个页脚和页眉。

如果我要注册2个不同的页脚，是否可以通过代码？或者也许在每个部分的运行时更改页脚的大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T11:52:35.303

是的..有可能..你有两个选择

**选项 1：注册不同的页脚视图**

使用不同的重用标识符通过代码注册页脚视图

```
 registerClass:forSupplementaryViewOfKind:withReuseIdentifier: 
```

然后

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath
   {
NSString *identifier = nil;
if ([kind isEqualToString:UICollectionElementKindSectionFooter]) {
    if (indexPath.section == 0) {
        identifier = @"footerViewOne";
    }
    else{
        identifier = @"footerViewTwo";
    }

}
UICollectionReusableView *supplementaryView = [collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:identifier forIndexPath:indexPath];

return supplementaryView;
} 
```

**选项 2：只需更改页脚视图的大小**

为此使用**UICollectionViewDelegateFlowLayout**方法

```
 - (CGSize)collectionView:(PSUICollectionView *)collectionView layout:(PSUICollectionViewLayout*)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section
{
   if (section==0) {
    return  CGSizeMake(500, 50);
  }
  else
  {
    return CGSizeMake(200, 50);
  }
} 
```

# django - Django中模型形式的I18n翻译

> ID：15874188
> 
> 赞同：5
> 
> 时间：2013-04-08T08:08:03.537
> 
> 标签：django, django-models, internationalization, django-forms, translation

我有一个要翻译的表格：

模型.py：

```
class Show(models.Model):
    discount_tickets = models.IntegerField("Discount Tickets")
    regular_tickets = models.IntegerField("Regular Tickets")
    afillate_price = models.IntegerField("Afillate Price")
    user_price = models.IntegerField("User Price")
    start_time = models.CharField("Event Time", max_length=20)
    sale_end_time = models.CharField("Sale End Time", max_length=20) 

    def __unicode__(self):
        return unicode(self.discount_tickets)

class ShowForm(ModelForm):
    pass

    class Meta:
        model = Show 
```

如何翻译字段名称？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T08:18:23.730

```
from django.utils.translation import ugettext_lazy as _

class Show(models.Model):
    discount_tickets = models.IntegerField(_("Discount Tickets"))
    regular_tickets = models.IntegerField(_("Regular Tickets"))
    afillate_price = models.IntegerField(_("Afillate Price"))
    user_price = models.IntegerField(_("User Price"))
    start_time = models.CharField(_("Event Time"), max_length=20)
    sale_end_time = models.CharField(_("Sale End Time"), max_length=20) 
```

# liferay-6 - 取消选中所有用户的 Liferay Edit 控件的默认值

> ID：15874191
> 
> 赞同：0
> 
> 时间：2013-04-08T08:08:17.580
> 
> 标签：liferay-6, edit-control

我通过使用类似...的方式隐藏了liferay编辑控件。

```
$theme.include($body_top_include) 

#if ($permissionChecker.isOmniadmin())

#dockbar()
#end 
```

它将隐藏除管理员以外的所有用户的文档栏。

但我无法隐藏 portlet 控件图标，例如加号、减号、关闭 portlet 图标。我们知道，如果我们取消选中编辑控件复选框的值，这些图标将不会显示。

Liferay 可能会在他们的会话中存储打开/关闭编辑控制复选框的值。

那么我们如何才能在默认情况下为所有用户取消选中该值呢？

简而言之，我想为 users 设置默认为 false 的编辑控件复选框的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:29:01.163

删除此页面的“用户”、“高级用户”和“站点成员”角色的自定义和更新权限。

# .htaccess - 为什么我的 mod_rewrite 不起作用？

> ID：15874193
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:08:21.987
> 
> 标签：.htaccess, mod-rewrite

我会让这个简短而甜蜜：

我想输入这个： `http://pachonk.com/alex/admin/user/`

得到这个： `http://pachonk.com/alex/admin/index.php?page=users`

我正在尝试使用：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /alex
RewriteRule ^admin/([a-zA-Z0-9]+)/?$ admin/index.php?page=$1 
```

使用其他变体，但这不起作用。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:53:59.337

确保 mod_rewrite 和 .htaccess 在`httpd.conf`. 然后把这个稍微修改的代码放在`$DOCUMENT_ROOT/alex/.htaccess`目录中：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /alex/

RewriteRule ^admin/([a-zA-Z0-9]+)/?$ admin/index.php?page=$1 [L,QSA] 
```

# java - 我应该从 Webgraph 框架传递给 ArcListASCIIGraph 的图形格式是什么？

> ID：15874194
> 
> 赞同：0
> 
> 时间：2013-04-08T08:08:22.990
> 
> 标签：java, graph, compression

我正在尝试使用 WebGraph 框架压缩图形。我已经设置了我需要的罐子，并使用以下代码：

```
ImmutableGraph ig = ArcListASCIIGraph.load(BoldiTest.class.getResource("/citation-csconf-mult5-PaperJSON.graph.txt").getFile());
System.out.println(ig.numNodes()+" "+ig.numArcs());
ImmutableGraph.store(BVGraph.class, ig, "output"); 
```

该图已正确加载，但无法为我感兴趣的图存储。对于一个小得多的图（3 个弧），一切顺利，所以我猜代码是正确的。

我在下面提供堆栈跟踪。有任何想法吗？（数字是节点和弧）

```
124538 249755 
Exception in thread "main" java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at it.unimi.dsi.big.webgraph.ImmutableGraph.store(ImmutableGraph.java:623)
    at it.unimi.dsi.big.webgraph.ImmutableGraph.store(ImmutableGraph.java:638)
    at gr.di.uoa.a8.boldi.BoldiTest.main(BoldiTest.java:22)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at it.unimi.dsi.big.webgraph.ImmutableGraph.store(ImmutableGraph.java:619)
    ... 2 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: -1
    at it.unimi.dsi.big.webgraph.BVGraph.updateBins(BVGraph.java:1701)
    at it.unimi.dsi.big.webgraph.BVGraph.storeInternal(BVGraph.java:1808)
    at it.unimi.dsi.big.webgraph.BVGraph.store(BVGraph.java:1650)
    at it.unimi.dsi.big.webgraph.BVGraph.store(BVGraph.java:1678)
    at it.unimi.dsi.big.webgraph.BVGraph.store(BVGraph.java:1690)
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T10:48:28.650

在消除重复边并对输入文件进行排序后，我设法存储了图形。

# php - Mysql在一个查询中计算2行

> ID：15874195
> 
> 赞同：0
> 
> 时间：2013-04-08T08:08:24.897
> 
> 标签：php, mysql

我正在计算今天在 mySQL 中添加的行数

```
mysql_query("SELECT COUNT(*) as total 
FROM track 
WHERE FROM_UNIXTIME(date,'%Y-%m-%d %h:%m:%s') > NOW() - INTERVAL 1 DAY"); 
```

这成功了。但是，我还想计算今天添加的行，其中包含一个大于“0”的数字在其名为“conv”的列中。

我试过了

```
mysql_query("SELECT conv,COUNT(*) as total
FROM track 
WHERE FROM_UNIXTIME(date,'%Y-%m-%d %h:%m:%s') > NOW() - INTERVAL 1 DAY"); 
```

但这不算。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:10:46.970

这将计算行数和 conv 大于零的行数：

```
SELECT
  COUNT(*) AS total,
  COUNT(CASE WHEN conv THEN 1 END) AS total_conv_greater
FROM
  ... 
```

如果 conv>0 CASE WHEN 将返回非 Null 值，否则将返回 Null，并且 COUNT() 将仅计算非空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:09:50.780

我认为语法的使用`CASE`可能会有很大帮助

资源链接( [source](http://dev.mysql.com/doc/refman/5.0/en/case.html) )

# c# - 使用 Linq 调用是模棱两可的错误

> ID：15874197
> 
> 赞同：8
> 
> 时间：2013-04-08T08:08:29.830
> 
> 标签：c#, linq, visual-studio-2008, resharper

首先，对于过多的通用名称类感到抱歉。我的雇主很偏执，我确信他在这个网站上漫游。好的，所以我有这个代码：

```
var fooObj = new MyFooClass()
{
    fooField1 = MyEnum.Value3, 
    fooField2 = false,
    fooField3 = false,
    fooField4 = otherEntity.OneCollection.ElementAt(0) as MyBarClass
} 
```

其中 otherEntity.OneCollection 是一个 ISet。ISet 是一个实现 IEnumerable 的 NHibernate 集合类。如果我尝试编译此代码，则会收到此错误：

```
Error 2     The call is ambiguous between the following methods or properties: 
'System.Linq.Enumerable.ElementAt<MyFirm.Blah.Blah.ClassyClass>    (System.Collections.Generic.IEnumerable<MyFirm.Blah.Blah.ClassyClass>, int)'
and 
'System.Linq.Enumerable.ElementAt<MyFirm.Blah.Blah.ClassyClass>(System.Collections.Generic.IEnumerable<MyFirm.Blah.Blah.ClassyClass>, int)' 
```

但是，如果我在类的开头删除 using System.Linq 并将代码更改为：

```
var fooObj = new MyFooClass()
{
    fooField1 = MyEnum.Value3, 
    fooField2 = false,
    fooField3 = false,
    fooField4 = System.Linq.Enumerable
                     .ElementAt(otherEntity.OneCollection, 0) as MyBarClass
} 
```

它编译并工作。（？运算符检查 OneCollection 是否为清楚起见删除了元素）

谁能向我解释这个错误？

万一相关：我使用的是 Visual Studio 2008，以 .NET Framework 3.5 为目标并使用 ReSharper 5.1。

NOTE.- 编辑以澄清集合是哪个具体的 IEnumerable，对此感到抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:31:06.703

这很奇怪。

该错误声称两个完全相同的签名之间存在歧义。

我唯一能想到的是，您的项目中可能以某种方式将“引用”弄乱了，并且您可能同时引用了“System.Core 3.5”和“System.Core 3.5.0.1”（人为的示例） ..在这种情况下你会得到这样的错误，但是，我不知道为什么`System.Linq.Enumerable.ElementAt(otherEntity.OneCollection`有效 - 它应该报告同样的问题。

.. 或者也许你以某种邪恶的方式让你的“OneCollection”两次实现了 IEnumerable？但是，我认为错误信息会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:21:56.323

要删除模棱两可的引用，您必须更加明确。有两种选择。

首先，您可以使您的 IEnumerable 通用，例如：

```
IEnumerable<MyFooClass> = new List<MyFooClass>();
...
var fooObj = new MyFooClass()
{
     fooField1 = MyEnum.Value3, 
     fooField2 = false,
     fooField3 = false,
     fooField4 = otherEntity.OneCollection.ElementAt(0) as MyBarClass
 } 
```

或第二个；如果它是非泛型 IEnumerable，请进行强制转换：

```
IEnumerable = new List<MyFooClass>();
...
var fooObj = new MyFooClass()
{
     fooField1 = MyEnum.Value3, 
     fooField2 = false,
     fooField3 = false,
     fooField4 = otherEntity.OneCollection.Cast<MyFooClass>().ElementAt(0)
 } 
```

# java - 删除数组中的一个元素

> ID：15874199
> 
> 赞同：0
> 
> 时间：2013-04-08T08:08:39.533
> 
> 标签：java, elements

这是我对这个问题的尝试，我如何将 0 移动到数组的末尾？我尝试将 0 元素与结束元素交换，那不是......

```
public void removeMiddle()  {
    int pos = values.length/2;
    int n = values.length
    if (n%2 == 0)  {
        int fMid = pos - 1;
        values[pos] = 0;
        values fMid = 0;
    } else  {
        int j = n-1;
        int k = j/2;
        int l = k+1;
        int m = n-l;
        values[m] = 0;
    }
}

Array  =  {5, 2, 7, 9, 1, 3, 2, 4}
result =  [5, 2, 7, 0, 0, 3, 2, 4]
Expected: [5, 2, 7, 3, 2, 4, 0, 0]

Array  =  {5, 2, 7, 9, 1, 3, 2}
result =  [5, 2, 7, 0, 1, 3, 2]
Expected: [5, 2, 7, 1, 3, 2, 0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:09:46.493

提示：使用后将[`System.arraycopy()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)最后一个元素设置为零。

或者，使用循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:12:30.867

将数组转换为列表，删除零，将它们添加回来，然后将列表转换回数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:40:44.327

也许您可以使用 LinkedList 结构并在其开头添加数组的所有非 0 元素，并在末尾添加所有 0。

```
 //initial array
    Integer[] array ={1,2,5,8,0,9,10};

    //converted array to List
    ArrayList<Integer> inputList= new ArrayList<Integer>(Arrays.asList(array));

    //secondary list 
    LinkedList<Integer> outputList = new <Integer>LinkedList();

    for(Integer x:inputList){
        int val= Integer.parseInt(x.toString());
        if(val !=0){
            //add non 0 values at the start
            outputList.addFirst(x);
        }else{
            //add 0's at the end
            outputList.addLast(x);
        }
    }

    //convert back to array
    Integer[] outputArray = new Integer[outputList.size()];
    outputArray = outputList.toArray(outputArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:45:02.840

正如之前有人所说，您可以将数组转换为列表，删除零，将它们添加回来，然后将列表转换回数组，或者如果您想要从头开始并且您知道数组的长度，那么只需创建一个数组（比如 array1）和扫描原始数组（比如数组）直到数组的末尾。如果数组包含非零数，只需将其插入数组（array1）。完成扫描后，只需将零添加到剩余的数组索引。

希望这可以帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T08:27:20.503

试试这个：我认为它易于理解和实施。

```
public static void main(String[] args) {
    int[] arr = { 5, 0, 7, 9, 1, 3, 0 };
    int index = 0;
    for (int i = 0; i < arr.length; i++) {
        if (arr[i] != 0) {
            arr[index++] = arr[i];
        }

    }

    Arrays.fill(arr, index, arr.length, 0);
    System.out.println(Arrays.toString(arr));
} 
```

输入：

```
{ 5, 0, 7, 9, 1, 3, 0 } 
```

输出：

```
[5, 7, 9, 1, 3, 0, 0] 
```

# javascript - Windows 商店应用程序 - jQuery 错误

> ID：15874200
> 
> 赞同：1
> 
> 时间：2013-04-08T08:08:40.553
> 
> 标签：javascript, jquery, windows-8, windows-store-apps

我正在尝试将 jQuery 导入空白 javascript 应用程序，但不断收到相同的错误： `JavaScript runtime error: 'jQuery' is undefined`. 我不知道这是什么原因。

我的整个过程：

1.  创建新的空白应用项目
2.  在 js 文件夹中添加现有项目 jquery-1.8.2-win8-1.0
3.  将添加的项目拖放到 default.html 头中
4.  在 default.js 中添加一些 jquery 代码

现在，我收到了这个错误：`JavaScript runtime error: '$' is undefined`。但是，如果我删除添加的 jQuery 代码（之前没有注意到），它会给我带来另一个错误：`JavaScript critical error at line 4, column 1 in ms-appx://8cce31f0-7793-41f7-875e-c41dd9ade2c7/js/jquery-1.8.2-win8-1.0.js`.

我试图让 jquery 工作几个小时，但没有成功。

HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>jquery</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!-- jquery references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
    <script src="js/jquery-1.8.2-win8-1.0.js"></script>
</head>
<body>
    <p>Content goes here</p>
</body>
</html> 
```

jQuery代码：

```
$("*").on("click", function () { }); 
```

错误：

![1.错误](https://i.stack.imgur.com/PduCQ.png) ![2.错误](https://i.stack.imgur.com/HCuPk.png)

视频： [错误 - jQuery](http://www.youtube.com/watch?v=rsi7q419g-w&feature=youtu.be)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:55:13.823

首先，感谢您[的视频](http://www.youtube.com/watch?v=rsi7q419g-w&feature=youtu.be)- 如果没有它，这几乎是不可能解决的。

我注意到你的 jQuery 文件是 2.0mb；这看起来不对。然后错误消息将我们带到它的内容中以指出一个语法错误，我们在其中看到了大量的 HTML 标签——你似乎是从[GitHub 查看器页面](https://github.com/appendto/jquery-win8/blob/master/jquery-1.8.2-win8-1.0.js)下载的，而不是从源文件本身下载的。您应该下载[RAW 文件](https://raw.github.com/appendto/jquery-win8/master/jquery-1.8.2-win8-1.0.js)。

另请注意，这是 jQuery 的旧版本，而不是完全支持的版本。我是 appendTo 存储库背后的主要开发人员，并且很高兴地宣布 jQuery 2.0（[可用的预发布版本](http://jquery.com/download/)）应该在 Windows 应用商店应用程序中运行得非常好。

我最近在 nettuts 上写过这篇文章：[使用 jQuery 2.0 构建 Windows 商店应用程序](http://net.tutsplus.com/tutorials/javascript-ajax/building-windows-store-applications-with-jquery-2-0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:12:49.393

试着把：

```
<script src="js/jquery-1.8.2-win8-1.0.js"></script> 
```

后：

```
<link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" /> 
```

此错误可能是因为您在编写 jQuery 代码之前没有包含 jQuery 库并确保文件的路径正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:14:45.107

尝试重新排列您添加的脚本。在 default.js 文件之前包含 jQuery js 文件。像这样的东西：

```
<script src="js/jquery-1.8.2-win8-1.0.js"></script>
<script src="/js/default.js"></script> 
```

Default.js 尝试使用尚未添加的 jQuery。所以重新安排可能会有所帮助。

# iphone - ios中的url编码

> ID：15874205
> 
> 赞同：0
> 
> 时间：2013-04-08T08:08:59.537
> 
> 标签：iphone, url, encoding, urlencode

我得到一个从服务器到图像的链接已经编码所以它带有 %20 但有时我得到一个包含希伯来字符的代码，所以我需要做 Encoding agian ，使用上面的代码：

但是在我的编码之后，我得到回应 % 20 更改为 % 2520

```
static CFStringRef charsToEscape = CFSTR("&=");

    + (NSString *)escapeStringByAddingPercentEscapes: (NSString*) string {

        return [(NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                    (CFStringRef)string,
                                                                    NULL,
                                                                    charsToEscape,
                                                                    CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding)) autorelease];
    } 
```

我试图像这样将 % 添加到 charsToEscape ：

静态 CFStringRef charsToEscape = CFSTR("&=%");

但它没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:19:49.627

```
NSString *urlString = @"----YOUR URL HERE----";
[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:urlString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:48:01.180

如果我没有在链接中得到希伯来语字符，你的想法很好。

但我找到了解决方案，我只是在参数 legalURLCharactersToBeEscaped 中发送了 %

现在我在这样的函数中使用：

```
static CFStringRef charsToEscape = CFSTR("&=");
static CFStringRef charsUnchanged = CFSTR("%");

    + (NSString *)escapeStringByAddingPercentEscapes: (NSString*) string {

        return [(NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                    (CFStringRef)string,
                                                                    charsUnchanged,
                                                                    charsToEscape,
                                                                    CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding)) autorelease];
    } 
```

谢谢

# ruby - 我如何发现我的代码正在使用哪些 gem（也就是创建一个 post-facto Gemfile）？

> ID：15874208
> 
> 赞同：3
> 
> 时间：2013-04-08T08:09:01.643
> 
> 标签：ruby, gem, gemfile

我开始写一个小技巧，一路上做了一些“gem install xxx”。现在这个小技巧已经变大了，我不记得我安装了所有的 gem，为了可移植性，我想创建一个 Gemfile 来指定所需的 gem。

有没有一种可靠的方法可以找出我的应用程序正在使用哪些 gem，以便我可以在 Gemfile 中指定它们？我可以创建一个全新的环境，运行它，然后看看有什么问题。但也许有更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:17:17.593

Monkey-patching 和好的测试套件是你的朋友。用这个：

```
module Kernel
  alias_method :old_require, :require
  def require(name)
    puts name
    old_require(name)
  end
end 
```

并运行你的测试。

# devise - Rails 升级到 3.2 路线/语言环境失败

> ID：15874209
> 
> 赞同：1
> 
> 时间：2013-04-08T08:09:01.740
> 
> 标签：devise, ruby-on-rails-3.2, locale, rails-i18n

我最近将一个项目从 3.1 升级到 Rails 3.2，并且一直试图弄清楚为什么路由不能很好地与设计配合使用。

```
NoMethodError - undefined method `locale' for #<ActionDispatch::Request:xxxxx>: 
```

这是在新的 ( [1](https://gist.github.com/yuric/5334979#file-gistfile1-rb-L7) ) 旅程路由引擎上。现在的问题是 Devise 只有其他模块没有出错。我可以说这个问题在我的使用范围内。如果我准备好范围，它就会起作用。

```
scope "(:locale)", :locale => /#{I18n.available_locales.join("|")}/ do
    devise_for :users, :controllers => { :registrations => "users/registrations" }
    ...
end 
```

( [1](https://gist.github.com/yuric/5334979#file-gistfile1-rb-L7) ) 7号线(133)。请[在此处查看上下文中的跟踪和旅程线错误。](https://gist.github.com/yuric/5334979#file-gistfile1-rb-L7)

任何建议和指导表示赞赏。谢谢你。

导轨 3.2，红宝石 1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:40:01.230

尝试将 :locale 放入 :constraints 哈希中：

```
scope "(:locale)", :constraints => {:locale => /#{I18n.available_locales.join("|")}/} 
```

我认为这也有助于解决更多问题： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# iphone - UISegment 根据当前位置和当前位置之间的距离对表格视图进行排序

> ID：15874212
> 
> 赞同：1
> 
> 时间：2013-04-08T08:09:08.067
> 
> 标签：iphone, ios, uitableview, cllocation

我有一个在表格视图上显示事件的应用程序。我有 UISegment 按字母顺序对这个表进行排序。现在我想根据从用户位置到事件位置的距离对其进行排序。

我有一个包含事件对象的数组，每个对象都包含事件名称、时间、描述等。

在我的 cellForRowAtIndexPath: 我正在这样做

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:                        (NSIndexPath *)indexPath
    {
      static NSString *CellIdentifier = @"Cell";
      UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
      if (cell == nil) {
          cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
      }
     // Configure the cell...
     if (tableView == self.searchDisplayController.searchResultsTableView) {
         cell.textLabel.text = [[searchResult objectAtIndex:indexPath.row]name];
     }
    else{ 
          CLLocationCoordinate2D coordinate = [_delegate getLocation];

          CLLocation *userLocation =  [[CLLocation alloc] initWithLatitude:coordinate.latitude longitude:coordinate.longitude];
          CLLocation *location = [[CLLocation alloc] initWithLatitude:[[self.events objectAtIndex:indexPath.row]latitude] longitude:[[self.events objectAtIndex:indexPath.row]longitude]];
          CLLocationDistance distance = [location distanceFromLocation:userLocation];
          cell.textLabel.text = [[self.events objectAtIndex:indexPath.row]name];
          //self.distances = [[NSString alloc] initWithFormat: @"%f", distance];
          [distances addObject:[NSNumber numberWithFloat:distance/1609.344]];
          NSLog(@"distances %@", distances);
         //NSString *_startTime = (NSString *)[[self.events objectAtIndex:indexPath.row]startTime];
         cell.detailTextLabel.text = [NSString stringWithFormat:@"%.2f mi",distance/1609.344];
         cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    return cell;
 } 
```

一旦用户点击 UISegment：

```
 -(void)changeSegment:(id)sender{
UISegmentedControl *segmentedControl = (UISegmentedControl *)sender;

switch ([segmentedControl selectedSegmentIndex]) {
    case 0:
    {
        //NSSortDescriptor *ascSorter = [[NSSortDescriptor alloc ] initWithKey:@"name" ascending:YES];
        NSSortDescriptor *ascSorter = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
        [self.events sortUsingDescriptors:[NSArray arrayWithObject:ascSorter]];
        [self.tableView reloadData];
        break;
    }
    case 1:
    {
        //NSSortDescriptor *ascSorter = [[NSSortDescriptor alloc ] initWithKey:@"name" ascending:YES];
        NSSortDescriptor *descSorter = [[NSSortDescriptor alloc] initWithKey:@"location" ascending:YES];
        //[self.events sortUsingDescriptors:[NSArray arrayWithObject:descSorter]];
        [self.distances sortUsingDescriptors:[NSArray arrayWithObject:descSorter]];
        [self.tableView reloadData];
        break;

    }
        break;
    default:
        break;
  }

 } 
```

我现在需要的是一旦用户选项卡 UISegment，表格视图应该根据距离进行排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:58:39.637

使用以下步骤成功实施：

1）首先获取用户当前位置。

2) Make 方法：计算用户当前位置和活动地点之间的距离 `i guess you have LAT,Long for the Event Venue`

我的代码查找距离

```
-(void)getdistance{

      arr_distance=[[NSMutableArray alloc]init];

        for(int i=0; i<[arr_VenueName count];i++){

        CLLocationCoordinate2D lc;

        lc.latitude = [[arr_lat objectAtIndex:i]doubleValue];
        lc.longitude= [[arr_lng objectAtIndex:i]doubleValue];

        CLLocation  *loc2=[[CLLocation alloc]initWithLatitude:lc.latitude longitude:lc.longitude];

        currentLocation =APPDELEGATE.userLocation;

        CLLocationDistance dist = [currentLocation distanceFromLocation:loc2];

           double miles=dist/1609;

             [arr_distance addObject:[NSString stringWithFormat:@"%.02lf",miles]];
            //NSLog(@"distance meters=%lf miles=%lf",dist,miles);
        }
        //NSLog(@"Array Distance =%@",arr_distance);
    } 
```

3）现在，您必须按照距离数组升序对事件对象数组进行排序。

我的排序代码：

```
NSArray *sortedArray = [arr_distance sortedArrayUsingComparator:^(id firstObject, id secondObject) {
            return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
        }];

NSArray *sortedValues = [listOfEvents sortedArrayUsingComparator:^(id firstObject, id secondObject) {

            id obj1 = [arr_distance objectAtIndex:[listOfEvents indexOfObject:firstObject]];
            id obj2 = [arr_distance objectAtIndex:[listOfEvents indexOfObject:secondObject]];

            return [((NSString *)obj1) compare:((NSString *)obj2) options:NSNumericSearch];
        }];

        NSLog(@"%@",sortedArray);
        NSLog(@"%@",sortedValues); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:12:22.857

我将首先按与用户的距离对您的事件数组进行排序，然后重新加载数据。

假设`events`是一个充满`event`对象的 MutableArray。
假设你有一个对你的引用`MKMapView`，它告诉你用户的位置。

```
static int compareAnnotationsByDistance(id event1, id event2) {
    MKUserLocation * me = [mapView userLocation];

    CLLocationDistance d1 = [event1.location distanceFromLocation:me.location];
    CLLocationDistance d2 = [event2.location distanceFromLocation:me.location];

    if(d1 < d2)
        return NSOrderedAscending;
    else if(d2 > d1)
        return NSOrderedDescending;
    else
        return NSOrderedDescending;
}

static int compareAnnotationsByName(id event1, id event2) {
    // Sort here by name...
}

-(void)changeSegment:(id)sender{
    UISegmentedControl *segmentedControl = (UISegmentedControl *)sender;

    switch ([segmentedControl selectedSegmentIndex]) {
    case 0:
    {
        // events is your NSMutableArray containing events
        [events sortUsingFunction:compareAnnotationsByName context:nil];
    }
    case 1:
    {
        // events is your NSMutableArray containing events
        [events sortUsingFunction:compareAnnotationsByDistance context:nil];
    }
        break;
    default:
        break;
    }
    [tableView reloadData];
} 
```

# r - 在 R 中使用 nls() 进行分段函数拟合

> ID：15874214
> 
> 赞同：7
> 
> 时间：2013-04-08T08:09:11.240
> 
> 标签：r, piecewise

我正在尝试将两部分的线拟合到数据中。

以下是一些示例数据：

```
x<-c(0.00101959664756622, 0.001929220749155, 0.00165657261751726, 
0.00182514724375389, 0.00161532360585458, 0.00126991061099209, 
0.00149545009309177, 0.000816386510029308, 0.00164402569283353, 
0.00128029006251656, 0.00206892841921455, 0.00132378793976235, 
0.000953143467154676, 0.00272964503695939, 0.00169743839571702, 
0.00286411493120396, 0.0016464862337286, 0.00155672067449593, 
0.000878271561566836, 0.00195872573138819, 0.00255412836538339, 
0.00126212428137799, 0.00106206607962734, 0.00169140916371657, 
0.000858015581562961, 0.00191955159274793, 0.00243104345247067, 
0.000871042201994687, 0.00229814264111745, 0.00226756341241083)

y<-c(1.31893118849162, 0.105150790530179, 0.412732029152914, 0.25589805483046, 
0.467147868109498, 0.983984462069833, 0.640007862668818, 1.51429617241365, 
0.439777145282391, 0.925550163462951, -0.0555942758921906, 0.870117027565708, 
1.38032147826294, -0.96757052387814, 0.346370836378525, -1.08032147826294, 
0.426215616848312, 0.55151485221263, 1.41306889485598, 0.0803478641720901, 
-0.86654892295057, 1.00422341998656, 1.26214517662281, 0.359512373951839, 
1.4835398594013, 0.154967053938309, -0.680501679226447, 1.44740598234453, 
-0.512732029152914, -0.359512373951839) 
```

我希望能够定义最合适的两部分线（显示手绘示例）

![阴谋](https://i.stack.imgur.com/jZv4p.png)

然后我定义了一个分段函数，它应该找到一个两部分的线性函数。该定义基于两条线的梯度及其相互截距，这应该完全定义线。

```
# A=gradient of first line segment
# B=gradient of second line segment
# Cx=inflection point x coord
# Cy=inflexion point y coord 

out_model <- nls(y ~ I(x <= Cx)*Cy-A*(Cx-x)+I(x > Cx)*Cy+B*(x), 
                  data = data.frame(x,y), 
                  start = c(A=-500,B=-500,Cx=0.0001,Cy=-1.5) ) 
```

但是我得到了错误：

> nls(y ~ I(x <= Cx) * Cy - A * (Cx - x) + I(x > Cx) * Cy + B * 中的错误：奇异梯度

我从[Finding a curve to match data中得到了基本方法](https://stackoverflow.com/questions/1358238/finding-a-curve-to-match-data)

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:12:08.117

我没有优雅的答案，但我有*一个*答案。

（请参阅下面的编辑以获得更优雅的答案）

如果`Cx`足够小以至于没有数据点可以拟合`A`和`Cy`到，或者如果`Cx`足够大以至于没有数据点可以拟合`B`和到，则 QR 分解矩阵将是奇异的，因为,和或`Cy`会有许多不同的值，并且分别可以很好地拟合数据。`Cx``A``Cy``Cx``B``Cy`

我通过防止`Cx`安装来测试这一点。如果我修复`Cx`(say) `Cx = mean(x)`，`nls()`可以毫无困难地解决问题：

```
nls(y ~ ifelse(x < mean(x),ya+A*x,yb+B*x), 
               data = data.frame(x,y), 
               start = c(A=-1000,B=-1000,ya=3,yb=0)) 
```

...给出：

```
Nonlinear regression model
  model:  y ~ ifelse(x < mean(x), ya + A * x, yb + B * x) 
   data:  data.frame(x, y) 
        A         B        ya        yb 
-1325.537 -1335.918     2.628     2.652 
 residual sum-of-squares: 0.06614

Number of iterations to convergence: 1 
Achieved convergence tolerance: 2.294e-08 
```

这使我认为，如果我进行改造`Cx`以使其永远不会超出范围`[min(x),max(x)]`，那可能会解决问题。事实上，我希望至少有三个数据点可用于拟合“A”线和“B”线中的每一个，因此 Cx 必须介于 的第三低和第三高值之间`x`。使用`atan()`具有适当算术的函数让我将范围映射`[-inf,+inf]`到 上`[0,1]`，所以我得到了代码：

```
trans <- function(x) 0.5+atan(x)/pi
xs <- sort(x)
xlo <- xs[3]
xhi <- xs[length(xs)-2]
nls(y ~ ifelse(x < xlo+(xhi-xlo)*trans(f),ya+A*x,yb+B*x), 
               data = data.frame(x,y), 
               start = c(A=-1000,B=-1000,ya=3,yb=0,f=0)) 
```

然而不幸的是，我仍然`singular gradient matrix at initial parameters`从这段代码中得到错误，所以问题仍然是过度参数化的。正如@Henrik 所建议的那样，双线性和单线性拟合之间的差异对于这些数据来说并不是很大。

然而，我仍然可以得到双线性拟合的答案。由于`nls()`解决了问题 when`Cx`是固定的，我现在可以`Cx`通过简单地使用 进行一维最小化来找到最小化残差标准误差的值`optimize()`。不是一个特别优雅的解决方案，但总比没有好：

```
xs <- sort(x)
xlo <- xs[3]
xhi <- xs[length(xs)-2]
nn <- function(f) nls(y ~ ifelse(x < xlo+(xhi-xlo)*f,ya+A*x,yb+B*x), 
               data = data.frame(x,y), 
               start = c(A=-1000,B=-1000,ya=3,yb=0))
ssr <- function(f) sum(residuals(nn(f))^2)
f = optimize(ssr,interval=c(0,1))
print (f$minimum)
print (nn(f$minimum))
summary(nn(f$minimum)) 
```

...给出以下输出：

```
[1] 0.8541683
Nonlinear regression model
  model:  y ~ ifelse(x < xlo + (xhi - xlo) * f, ya + A * x, yb + B * x) 
   data:  data.frame(x, y) 
        A         B        ya        yb 
-1317.215  -872.002     2.620     1.407 
 residual sum-of-squares: 0.0414

Number of iterations to convergence: 1 
Achieved convergence tolerance: 2.913e-08 

Formula: y ~ ifelse(x < xlo + (xhi - xlo) * f, ya + A * x, yb + B * x)

Parameters:
     Estimate Std. Error t value Pr(>|t|)    
A  -1.317e+03  1.792e+01 -73.493  < 2e-16 ***
B  -8.720e+02  1.207e+02  -7.222 1.14e-07 ***
ya  2.620e+00  2.791e-02  93.854  < 2e-16 ***
yb  1.407e+00  3.200e-01   4.399 0.000164 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.0399 on 26 degrees of freedom

Number of iterations to convergence: 1 
```

的和的值`A`和的最佳值之间没有很大的差异，但是有一些差异。`B``ya``yb``f`

（编辑——优雅的答案）

把问题分成两步，就没有必要再用`nls()`了。`lm()`工作正常，如下：

```
function (x,y) 
{
    f <- function (Cx) 
        {
        lhs <- function(x) ifelse(x < Cx,Cx-x,0)
        rhs <- function(x) ifelse(x < Cx,0,x-Cx)
        fit <- lm(y ~ lhs(x) + rhs(x))
        c(summary(fit)$r.squared, 
            summary(fit)$coef[1], summary(fit)$coef[2],
            summary(fit)$coef[3])
        }

    r2 <- function(x) -(f(x)[1])

    res <- optimize(r2,interval=c(min(x),max(x)))
    res <- c(res$minimum,f(res$minimum))

    best_Cx <- res[1]
    coef1 <- res[3]
    coef2 <- res[4]
    coef3 <- res[5]
    plot(x,y)
    abline(coef1+best_Cx*coef2,-coef2) #lhs  
    abline(coef1-best_Cx*coef3,coef3)  #rs
} 
```

... 这使：

![在此处输入图像描述](https://i.stack.imgur.com/mw9Ye.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T11:32:39.093

如果断点已知，则可以使用线性回归

## 来自“使用 R 的实际回归和方差分析”的断棒回归

## 朱利安·J·法拉维

## 2000 年 12 月

```
k <- 0.0025

lhs <- function(x) ifelse(x < k,k-x,0)
rhs <- function(x) ifelse(x < k,0,x-k)
fit <- lm(y ~ lhs(x) + rhs(x)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-09T12:35:51.610

该软件包`segmented`专为此类问题而设计。

首先，创建一个常规线性回归`lm`：

```
linmod <- lm(y ~ x)
summary(linmod) 
```

这给了我们：

```
Call:
lm(formula = y ~ x)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.108783 -0.025432 -0.006484  0.040092  0.088638 

Coefficients:
              Estimate Std. Error t value Pr(>|t|)    
(Intercept)  2.630e+00  2.732e-02   96.28   <2e-16 ***
x           -1.326e+03  1.567e+01  -84.63   <2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 0.04869 on 28 degrees of freedom
Multiple R-squared:  0.9961,    Adjusted R-squared:  0.996 
F-statistic:  7163 on 1 and 28 DF,  p-value: < 2.2e-16 
```

接下来，我们使用线性模型来生成具有 1 个断点的分段模型：

```
segmod <- segmented(linmod, seg.Z = ~x)
summary(segmod) 
```

分段模型提供了更好的 r 平方：

```
 ***Regression Model with Segmented Relationship(s)***

Call: 
segmented.lm(obj = linmod, seg.Z = ~x)

Estimated Break-Point(s):
   Est. St.Err 
 0.003  0.000 

Meaningful coefficients of the linear terms:
              Estimate Std. Error t value Pr(>|t|)    
(Intercept)  2.659e+00  2.882e-02  92.239   <2e-16 ***
x           -1.347e+03  1.756e+01 -76.742   <2e-16 ***
U1.x         5.167e+02  4.822e+02   1.072       NA    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 0.04582 on 26 degrees of freedom
Multiple R-Squared: 0.9968,  Adjusted R-squared: 0.9964 

Convergence attained in 3 iterations with relative change 0 
```

您可以检查绘图、截距和斜率：

```
plot(segmod)
intercept(segmod)
slope(segmod) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T02:48:32.623

感谢 Henrik 让我走上了正确的道路！这是一个更完整且相对优雅的解决方案，带有一个简单的情节：

```
range_x<-max(x)-min(x)
intervals=1000
coef1=c()
coef2=c()
coef3=c()
r2=c()

for (i in 1:intervals)  
{
Cx<-min(x)+(i-1)*(range_x/intervals)
lhs <- function(x) ifelse(x < Cx,Cx-x,0)
rhs <- function(x) ifelse(x < Cx,0,x-Cx)
fit <- lm(y ~ lhs(x) + rhs(x))
coef1[i]<-summary(fit)$coef[1]
coef2[i]<-summary(fit)$coef[2]
coef3[i]<-summary(fit)$coef[3]
r2[i]<-summary(fit)$r.squared
}
best_r2<-max(r2)                             # get best r squared
pos<-which.max(r2)                                          
best_Cx<-min(x)+(pos-1)*(range_x/intervals)  # get Cx for best r2

plot(x,y)
abline(coef1[pos]+best_Cx*coef2[pos],-coef2[pos]) #lhs  
abline(coef1[pos]-best_Cx*coef3[pos],coef3[pos])  #rs 
```

![在此处输入图像描述](https://i.stack.imgur.com/EE5gd.png)

# java - 比较具有不同模式的日期

> ID：15874215
> 
> 赞同：-3
> 
> 时间：2013-04-08T08:09:18.287
> 
> 标签：java, compare, date-format

比较两个日期的最简单方法，如果我有相同的模式。

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        Date date1 = sdf.parse("2009-12-31");
        Date date2 = sdf.parse("2010-01-31");

        System.out.println(sdf.format(date1));
        System.out.println(sdf.format(date2));

        if(date1.after(date2)){
            System.out.println("Date1 is after Date2");
        }

        if(date1.before(date2)){
            System.out.println("Date1 is before Date2");
        }

        if(date1.equals(date2)){
            System.out.println("Date1 is equal Date2");
        } 
```

想要比较具有不同模式的 2 个日期。

例如。

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    Date date1 = sdf.parse("2009-12-31");
 SimpleDateFormat sdf2 = new SimpleDateFormat("dd/MM/yyyy");
    Date date2 = sdf2.parse("12/12/2012"); 
```

我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:12:00.547

您可以以相同的方式比较日期。`SimpleDateFormat`只是一种以不同格式打印（或解析）日期的方法。Java 理解它们并且可以将它们作为日期进行比较，无论您如何格式化它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:13:07.793

即使在解析了 2 种不同格式的 2 个不同日期之后，`parse()`方法的输出在这两种情况下都将是一个标准`java.util.Date`对象。所以你可以像往常一样比较它们。

解析它们的格式无关紧要，因为在这两种情况下，最后你都有 2 个`java.util.Date`对象，并且在所有情况下比较它们都是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:16:42.840

你用 sdf2 替换了 sdf

更改此代码，它将起作用：

```
 SimpleDateFormat sdf2 = new SimpleDateFormat("dd/MM/yyyy");
        Date date2 = sdf2.parse("12/12/2012"); 
```

您使用了错误的参考 sdf 而不是 sdf2

# twitter-bootstrap - Twitterbootstrap 有窗口控件吗？

> ID：15874219
> 
> 赞同：0
> 
> 时间：2013-04-08T08:09:28.023
> 
> 标签：twitter-bootstrap

twitter bootstrap 有窗口控件吗？只是一个可拖动的可关闭非模态窗口？在窗口中，我将放置颜色选择器、输入字段、滑块等控件

它将作为对象检查器..任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:38:01.777

那么引导程序有滑块（轮播），输入字段（不清楚这个）

Bootstrap 只是一个响应式框架。如果您需要颜色选择器等控件，您可以使用 JQuery UI 和引导程序。它有惊人的控制。您列出的所有控件都存在于 JQuery UI 中

[http://jqueryui.com/](http://jqueryui.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:40:59.423

您描述的功能在 twitter-bootstrap 中不可用。
但是，有一个很酷的 ui 框架，试试 Extjs (sencha.com)。

# c++ - 在 Linux 上设置链接库

> ID：15874220
> 
> 赞同：2
> 
> 时间：2013-04-08T08:09:28.167
> 
> 标签：c++, ubuntu, libraries

在 linux 上开发对我来说是新的，我在设置环境时遇到了麻烦。我有一个相对较小的程序，它依赖于以下库：

```
-lboost_date_time -lboost_regex -lmysqlclient -lmysqlcppconn -lexpat 
```

我在 Ubuntu 12.04 LTS 上使用 eclipse。我需要用包管理器做什么，以及在 eclipse 内部成功编译？我被告知要使用`sudo apt-get libboost*`，但这会打印出一整支冲突，然后得出令人悲伤的结论：

```
E: Unable to correct problems, you have held broken packages. 
```

我相信我安装了`libmysqlcppconn-dev`，并且`libexpat1-dev`正确。我在 Eclipse 中所做的唯一一件事就是将 -l 内容添加到链接器库设置中。

所以总而言之，操作系统和 IDE 对我来说都是新的，我将不胜感激详细的帮助。

从下面的终端转储：

```
libboost-dev is already the newest version.
libboost-iostreams1.46.1 is already the newest version.
libboost-iostreams1.46.1 set to manually installed.
libboost-serialization1.46.1 is already the newest version.
libboost-serialization1.46.1 set to manually installed.
libboost1.46-dev is already the newest version.
libboost1.46-dev set to manually installed.
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 libboost-date-time1.48-dev : Conflicts: libboost-date-time1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-filesystem1.48-dev : Conflicts: libboost-filesystem1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-graph-parallel1.48-dev : Conflicts: libboost-graph-parallel1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-graph1.48-dev : Conflicts: libboost-graph1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-iostreams1.48-dev : Conflicts: libboost-iostreams1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-math1.48-dev : Conflicts: libboost-math1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-mpi-python1.48-dev : Conflicts: libboost-mpi-python1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-mpi-python1.48.0 : Conflicts: libboost-mpi-python1.46.1 but 1.46.1-7ubuntu3 is to be installed
 libboost-mpi1.48-dev : Conflicts: libboost-mpi1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-program-options1.48-dev : Conflicts: libboost-program-options1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-python1.46-dev : Depends: python-dev but it is not going to be installed
 libboost-python1.48-dev : Depends: python-dev but it is not going to be installed
                           Conflicts: libboost-python1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-regex1.48-dev : Conflicts: libboost-regex1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-serialization1.48-dev : Conflicts: libboost-serialization1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-signals1.48-dev : Conflicts: libboost-signals1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-system1.48-dev : Conflicts: libboost-system1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-test1.48-dev : Conflicts: libboost-test1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-thread1.48-dev : Conflicts: libboost-thread1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost-wave1.48-dev : Conflicts: libboost-wave1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost1.48-dbg : Conflicts: libboost1.46-dbg but 1.46.1-7ubuntu3 is to be installed
 libboost1.48-dev : Conflicts: libboost1.46-dev but 1.46.1-7ubuntu3 is to be installed
 libboost1.48-doc : Conflicts: libboost1.46-doc but 1.46.1-7ubuntu3 is to be installed
E: Unable to correct problems, you have held broken packages. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:37:53.033

`libboost-dev`是一个虚拟包，指向部署在存储库中的最新的 boost 开发包集。目前，对于您的 ubuntu 版本，似乎 1.48.02 是最新的（请参阅[包说明](http://packages.ubuntu.com/precise/libboost-dev)）。存储库中可能还有其他可用版本，例如 1.46，它似乎是在 12.04 发布时可用的版本。

启动时：

```
apt-get install liboost* 
```

包管理器将尝试安装名称以 开头的每个包`libboost`，而不仅仅是最新版本。您真正想要的是只安装一组开发包（以及您的应用程序可能需要的所有运行时包，但这将由 的依赖项跟踪器处理`apt`）。

以下命令：

```
apt-get update
apt-get install libboost-dev 
```

或者

```
aptitude install libboost-dev 
```

应该将您的系统升级到 boost 开发包的最新可用版本。

# twitter-bootstrap - Twitter bootstrap 模态淡化黑色

> ID：15874225
> 
> 赞同：1
> 
> 时间：2013-04-08T08:09:49.857
> 
> 标签：twitter-bootstrap, modal-dialog

我正在使用 twitter bootstrap 模态，当我单击链接时，模态上仍然出现黑色淡入淡出。

仅供参考 - [https://docs.google.com/file/d/0B7s0BYiHsMBtY1pLdmVsclpQXzA/edit?usp=sharing](https://docs.google.com/file/d/0B7s0BYiHsMBtY1pLdmVsclpQXzA/edit?usp=sharing)

这是我的代码：

```
<ul class="nav pull-right">
        <li><a href="#myModal" data-target="#myModal" data-toggle="modal">Signin</a></li>

    </ul>
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:15:35.323

[我在这里](https://stackoverflow.com/a/8162105/1379394)找到了一个工作示例：

[JSFIDDLE](http://jsfiddle.net/sfWBT/1/)

**注意：当你想隐藏淡入黑色时，只需`backdrop: true;`从 jquery 中删除。**

HTML：

```
<div id="event-modal" class="modal hide fade">
    <div class="modal-header">
        <a class="close" href="#">x</a>
        <h3>Modal Heading</h3>
    </div>
    <div class="modal-body">
        <p>Some information</p>
    </div>
    <div class="modal-footer">
        <a class="btn primary" href="#">Primary</a>
        <a class="btn secondary" href="#">Secondary</a>
    </div>
</div>
<a href="/events/2-fefewfewfe/rsvps" data-backdrop="true" data-controls-modal="event-modal" data-keyboard="true">I'm attending!<span class="ico join"></span></a> 
```

查询：

```
$(function() {
    $('#event-modal').modal({
        backdrop: true
    });
}); 
```

CSS：

```
#event-modal {
    margin-top: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:42:32.270

这看起来像 CSS 问题。检查是否有东西不会覆盖您的模态`z-index`属性，默认情况下模态具有：

```
.modal {
   z-index: 1050;
} 
```

和背景：

```
.modal-backdrop {
   z-index: 1040;
} 
```

模态应该有更高的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:20:24.333

相同的代码对我来说工作正常.. 检查您的 JS 文件是否正确添加..

> 特别是。bootstrap-modal.js、bootstrap-transition.js

检查一次这个小提琴：

[http://jsfiddle.net/7vyUQ/](http://jsfiddle.net/7vyUQ/)

```
<ul class="nav pull-right">
        <li><a href="#myModal" data-target="#myModal" data-toggle="modal">Signin</a></li>

    </ul>
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

# streaming - 点播服务器性能测试

> ID：15874228
> 
> 赞同：0
> 
> 时间：2013-04-08T08:10:04.293
> 
> 标签：streaming, video-streaming, ubuntu-12.04, load-testing, rtsp

我在家里的本地网络（vlc 和 Darwin 流媒体服务器）中的不同机器上有两台 VOD 服务器（RTSP）。

我想要做的是性能测试，如下所示： * 发送 10 个请求，50 个，然后 100 个。 * 重做相同但请求多个文件而不是模拟对单个文件的多个访问。*输出统计（速度，质量...等）。我现在拥有的是 OpenRstp，它使用“-Q”来输出 Qos 信息，但它离我需要的还很远。

我需要的是一个可以帮助我解决这个问题的免费工具……我发现的所有工具（divesifeye 和 IxLoad）都不是免费的。

有人可以建议一些有用的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:40:04.857

我找到了一种应该做的方法。它基于用于 Qos 统计的带有“-Q”的 openRTSP。诀窍是如何将数据重定向到文件，因为 Qos 信息仅在提要被切断后才显示。我编写了以下脚本来管理视频源/播放列表的 N 次阅读。它将创建一个包含 Qos 信息的文件。

```
 #!/bin/bash
f_rtsp(){
clear
echo -e "ENTER THE NUMBER OF STREAM USERS:"
echo -n "USER:"
read usr
for((i=1; i <= $usr;i++))
do 
exec &> /$HOME/Desktop/results
echo -e "******************************* $i *****************************"
openRTSP -Q rtsp://<url>/<playlist-name>.sdp &
done
}
while : #Loop forever
do
cat <<!
Benchmark.RTSP

1.RTSP consumers
2.EXIT
!
echo -n "YOUR CHOICHE? :"
read choice

case $choice in 
1|[rR]) f_rtsp ;;
2|[eE]) exit ;;

*) echo "\"$choice\"is not valid"; sleep 2 ;;
esac
done 
```

# symfony - Twig / Symfony2 动态模板

> ID：15874229
> 
> 赞同：0
> 
> 时间：2013-04-08T08:10:05.857
> 
> 标签：symfony, twig

我想做这种事情，这样如果模板不存在，它只会呈现内容。下面的代码不起作用，因为你不能这样编码。

```
{% if app.request.attributes.get('twig_parent_template') != "" %}
    {% extends app.request.attributes.get('twig_parent_template') %}
    {% block title "The Title Here" %}
{% endif %}

{% block content %}
Content here
{% endblock %} 
```

我能以某种方式做这种事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:36:08.290

[Twig extends](http://twig.sensiolabs.org/doc/tags/extends.html#dynamic-inheritance)关于这个主题有一个很好的文档。

由于您需要指定要扩展的模板，因此我的想法继续创建默认模板。

`**@Bundle/Resources/views/yourview.html.twig**`

```
{% set extender = app.request.attributes.get('twig_parent_template') ? : 'Bundle::default.html.twig' %}
{% extends extender %}

{% block title "Your title" %}
{% block content %}
    Your content
{% endblock %} 
```

`**@Bundle/Resources/views/default.html.twig**`

```
{% block content %}{% endblock %} 
```

`**@Bundle/Resources/views/parent.html.twig**`

```
{% block title %}{% endblock %}
{% block content %}{% endblock %} 
```

这样做，如果`app.request.attributes.get('twig_parent_template')`设置，它将呈现在其值中给定的模板。
否则，它将呈现`default.html.twig`仅包含`content`块

# django - 将 Django 查询集输出为 JSON

> ID：15874233
> 
> 赞同：88
> 
> 时间：2013-04-08T08:10:21.610
> 
> 标签：django, json, listview

我想序列化我的查询集，并且我希望它采用此视图输出的格式：

```
class JSONListView(ListView):
    queryset = Users.objects.all()

    def get(self, request, *args, **kwargs):
        return HttpResponse(json.dumps({'data': [['bar','foo','bar','foo'],['foo','bar','foo','bar']]}, indent=4), content_type='application/json') 
```

我根本不知道如何输出查询集而不是示例中的手动数据。

我试过了

```
json.dumps({"data": self.get_queryset()}) 
```

和

```
serializers.serialize("json", {'data': self.get_queryset()}) 
```

但它不会工作。我究竟做错了什么？我需要制作自定义 JSON 编码器吗？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2016-06-15T15:07:34.157

您可以将[JsonResponse](https://docs.djangoproject.com/en/2.0/ref/request-response/#jsonresponse-objects)与[values](https://docs.djangoproject.com/en/2.0/ref/models/querysets/#django.db.models.query.QuerySet.values)一起使用。简单的例子：

```
from django.http import JsonResponse

def some_view(request):
    data = list(SomeModel.objects.values())  # wrap in list(), because QuerySet is not JSON serializable
    return JsonResponse(data, safe=False)  # or JsonResponse({'data': data}) 
```

或者使用[Django 的内置序列化程序的](https://docs.djangoproject.com/en/2.0/topics/serialization/)另一种方法：

```
from django.core import serializers
from django.http import HttpResponse

def some_view(request):
    qs = SomeModel.objects.all()
    qs_json = serializers.serialize('json', qs)
    return HttpResponse(qs_json, content_type='application/json') 
```

在这种情况下，结果略有不同（默认情况下没有缩进）：

```
[
    {
        "model": "some_app.some_model",
        "pk": 1,
        "fields": {
            "name": "Elon",
            "age": 48,
            ...
        }
    },
    ...
] 
```

我不得不说，使用[棉花糖](https://marshmallow.readthedocs.io/)之类的东西来序列化查询集是一种很好的做法。

...以及一些注意事项以获得更好的性能：

*   如果您的查询集很大，请使用分页；
*   用于`objects.values()`指定必填字段列表以避免序列化并发送给客户端不必要的模型字段（您也可以传递`fields`给`serializers.serialize`）；

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-08T08:27:15.307

它不起作用，因为 QuerySet 不是 JSON 可序列化的。

1）如果`json.dumps`您必须将 QuerySet 显式转换为 JSON 可序列化对象：

```
class Model(model.Model):
    def as_dict(self):
        return {
            "id": self.id,
            # other stuff
        } 
```

和序列化：

```
dictionaries = [ obj.as_dict() for obj in self.get_queryset() ]
return HttpResponse(json.dumps({"data": dictionaries}), content_type='application/json') 
```

2）在序列化程序的情况下。序列化器接受 JSON 可序列化对象或 QuerySet，但包含 QuerySet 的字典两者都不是。尝试这个：

```
serializers.serialize("json", self.get_queryset()) 
```

在此处阅读更多信息：

[https://docs.djangoproject.com/en/dev/topics/serialization/](https://docs.djangoproject.com/en/dev/topics/serialization/)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-12-31T11:31:36.840

为了获得有效的解决方案，您可以使用[.values()](https://docs.djangoproject.com/en/2.1/ref/models/querysets/#values)函数获取 dict 对象列表，然后使用 ie [JsonResponse](https://docs.djangoproject.com/en/2.0/ref/request-response/#jsonresponse-objects)将其转储到 json 响应（记得设置`safe=False`）。

获得所需的查询集对象后，将其转换为 JSON 响应，如下所示：

```
...
data = list(queryset.values())
return JsonResponse(data, safe=False) 
```

您可以在函数中指定字段名称`.values()`以便只返回想要的字段（上面的示例将返回 json 对象中的所有模型字段）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-10-16T19:24:04.337

要返回您检索到的查询集，`queryset = Users.objects.all(),`首先需要对它们进行序列化。

序列化是将一种数据结构转换为另一种数据结构的过程。使用基于类的视图，您可以像这样返回 JSON。

```
from django.core.serializers import serialize
from django.http import JsonResponse
from django.views.generic import View

class JSONListView(View):
    def get(self, request, *args, **kwargs):
        qs = User.objects.all()
        data = serialize("json", qs)
        return JsonResponse(data) 
```

这将输出一个 JSON 列表。有关其工作原理的更多详细信息，请查看我的博客文章[如何使用 Django 返回 JSON 响应](https://engineertodeveloper.com/how-to-return-a-json-response-in-django/)。它更详细地介绍了您将如何进行此操作。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-11-16T03:32:30.317

如果目标是构建一个允许您以 JSON 格式访问模型的 API，我建议您使用`django-restframework`Django 社区中非常流行的包来完成此类任务。

*   [Django Rest 框架网站](http://www.django-rest-framework.org/)
*   [Github](https://github.com/encode/django-rest-framework)

它包括有用的功能，例如分页、定义序列化程序、嵌套模型/关系等等。即使您只想执行次要的 Javascript 任务和 Ajax 调用，我仍然建议您使用 Django Rest Framework 构建适当的 API，而不是手动定义 JSON 响应。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-22T08:57:37.263

将查询集转换为 JSON 的另一种方法是将必要的元素附加到带有循环的空列表中。它提供设计可定制的 JSON。

```
queryset = Users.objects.all()
output = []
for query in queryset:
   output.append('id': query.id, 'name': query.name, etc...)
return JSONResponse(output, safe=False) 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-08-18T21:07:53.500

尝试这个：

```
class JSONListView(ListView):
    queryset = Users.objects.all()

    def get(self, request, *args, **kwargs):
        data = {}
        data["users"] = get_json_list(queryset)
        return JSONResponse(data)

def get_json_list(query_set):
    list_objects = []
    for obj in query_set:
        dict_obj = {}
        for field in obj._meta.get_fields():
            try:
                if field.many_to_many:
                    dict_obj[field.name] = get_json_list(getattr(obj, field.name).all())
                    continue
                dict_obj[field.name] = getattr(obj, field.name)
            except AttributeError:
                continue
        list_objects.append(dict_obj)
    return list_objects 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2020-12-03T04:27:52.590

```
from django.http import JsonResponse

def SomeFunction():
       dict1 = {}

       obj = list( Mymodel.objects.values() )

       dict1['data']=obj

return JsonResponse(dict1) 
```

试试这个 Django 代码

# android - Android中的Viewpager

> ID：15874237
> 
> 赞同：2
> 
> 时间：2013-04-08T08:10:47.363
> 
> 标签：android, android-viewpager

我怎么能`ViewPager`在`both direction`. 是否可以 ？如果可能的话，我该如何实现它。

我`viewpager`使用以下代码在单向创建：

```
private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, Fragment0.class.getName()));
        fragments.add(Fragment.instantiate(this, Fragment1.class.getName()));
        fragments.add(Fragment.instantiate(this, Fragment2.class.getName()));
        this.mPagerAdapter = new MyPagerAdapter(super.getSupportFragmentManager(), fragments);

        ViewPager pager = (ViewPager) super.findViewById(R.id.viewpager);
        pager.setAdapter(this.mPagerAdapter);
    } 
```

谁能帮帮我..谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:34:42.990

好吧，据我了解，您有一个列表`Fragments`，您希望用户在`Pages`/中间开始`Fragments`，我已经使用并测试了以下代码，它对我来说可以正常工作。

如果您知道数量`Fragments`并且没有动态更改，`Fragments`那么这可以更简单地处理，但我将关闭您在 OP 中提供的代码。试试看：

```
public class MainActivity extends FragmentActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // This is going to initialize our Fragment list
        mSectionsPagerAdapter.init();

        // Now we are going to determine the starting position
        int startPos = mSectionsPagerAdapter.getStartPosition();

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // AFTER we set the adapter we will define our start position
        mViewPager.setCurrentItem(startPos);
    }
} 
```

* * *

现在让我们看看我们的`FragmentPagerAdapter`

我在这个类中添加了几个方法，`init()`方法`setCount()`、 和`getStartPosition()`。

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {
    private int _count = 2;
    private int _start = 0;

    List<Fragment> fragments;

    public SectionsPagerAdapter(FragmentManager fm) { 
        super(fm);
    }

    public void init() {
        fragments = new ArrayList<Fragment>();
        fragments.add(new MyFragmentOne());
        fragments.add(new MyFragmentTwo());
        fragments.add(new MyFragmentThree());
        fragments.add(new MyFragmentFour());
        fragments.add(new MyFragmentFive());
        setCount();
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        return super.instantiateItem(container, position);
    }

    @Override
    public Fragment getItem(int position) {
        return (fragments.size() >= position) ? fragments.get(position) : null;
    }

    // We have created this method to get the starting position
    // You might want to play around with this to make sure the returned
    // position fits what you want for odd numbered Fragment Pages
    public int getStartPosition() {
        _start = fragments.size() / 2;
        return Math.round(_start);
    }

    public void setCount() { this._count = fragments.size(); }

    @Override
    public int getCount() { return this._count; }

    // You will need to change this to get the appropriate title per page    
    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.company_select).toUpperCase(Locale.ENGLISH);
        case 1:
            return getString(R.string.companies_pending).toUpperCase(Locale.ENGLISH);
        }
        return null;
    }
} 
```

* * *

*请注意：*您没有提供您尝试过的示例，因此我为您编写了代码。StackOverflow 不适合这样做，将来当某些事情不起作用时，请给我们您尝试过的内容，我们将尝试帮助确定出了什么问题。

# php - 什么是语义错误 Symfony2

> ID：15874241
> 
> 赞同：4
> 
> 时间：2013-04-08T08:11:04.987
> 
> 标签：php, symfony, doctrine-orm

我收到此错误

```
[Doctrine\Common\Annotations\AnnotationException]                            
[Semantical Error] Couldn't find constant CJBusinessBundle:PO:new, method 
CJ\BusinessBundle\Controller\ProductController::createAction(). 
```

我的注释部分

```
/**
 * Creates a new Product entity.
 *
 * @Route("/", name="product_create")
 * @Method("POST")
 * @Template(CJBusinessBundle:PO:new.html.twig)
 */ 
```

我不明白这会有什么问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T08:16:04.420

将您的模板定义用引号括起来。
否则，它会在查找注释时在 PHP 常量中查找它，这就是您看到的错误，因为没有具有该名称的常量。

```
/**
 * Creates a new Product entity.
 *
 * @Route("/", name="product_create")
 * @Method("POST")
 * @Template("CJBusinessBundle:PO:new.html.twig")
 */ 
```

# c# - 求一个ServiceStack/Razor的初学者教程

> ID：15874242
> 
> 赞同：1
> 
> 时间：2013-04-08T08:11:06.860
> 
> 标签：c#, asp.net-mvc, razor, servicestack

我想学习如何使用 ServiceStack 来自托管 mvc/razor 应用程序。我只有关于 MVC 的基本知识。我已经编译并测试了 ServiceStack 示例 - RazorRockstars。它可以工作（Windows 和 Linux/Mono）。

我的问题是我不明白它是如何工作的。是否有任何教程描述如何逐步创建这样的项目？我不是在寻找完成的工作项目，而是我想要简单的教程，逐步解释如何从头开始创建它。

我已经搜索过这个，但我仍然找不到任何符合我的条件的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T18:04:15.453

我想你是在问视图 API 是如何工作的。如果您的问题专门针对如何为您的项目定义视图。Servicestack 有多种选择。

[您可以在此处](https://github.com/ServiceStack/ServiceStack/wiki/View-and-template-selection)找到该文档。

如果需要任何进一步的细节，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:36:37.143

[Pluralsight](http://pluralsight.com/training)有一个很棒的 ServiceStack 课程，由 John Somnez 制作

或者你可以阅读[文档](https://github.com/ServiceStack/ServiceStack/wiki)

# algorithm - 区间动态规划

> ID：15874244
> 
> 赞同：4
> 
> 时间：2013-04-08T08:11:12.483
> 
> 标签：algorithm, dynamic

我正在研究一个算法问题，而我在加速它时遇到了障碍。

我有一个函数`f(i,j)`，其中`i`和`j`是整数，因此`1 <= i <= j <= n`对于某些上限`n`。这个函数已经写好了。

此外，这个函数满足等式`f(i, j) + f(j, k) = f(i, k)`。

我需要计算`f(x, y)`许多不同的对`x, y`。假设`n`足够大，存储`f(x,y)`每一对可能的对`x,y`将占用太多空间。

这类问题有已知的算法吗？我现在使用的那个记忆`f`并试图`x,y`通过使用上面提到的相等性来减少到先前计算的一对数字，但我的猜测是我没有以一种聪明的方式减少，这会浪费我的时间。

编辑：假设`f(i, j)`时间与以`j-i`天真的方式计算时成正比。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T08:43:34.793

您可以使用大小为 2 的间隔的隐式树：

*   `f(i,i+1)`为每个人存储`i`
*   `f(i,i+2)`为每个偶数存储`i`
*   存储`f(i,i+4)`每`i`被四整除
*   ...

将有`O(log n)`表格（`floor(log_2(n))`准确地说），总大小为`O(n)`（~ `2*n`）。

要检索`f(i,j)`where `i<=j`：

*   找到不同的最高`i`位`j`。
*   设为`n`设置此位的值，并清除所有低位。这保证了以下步骤将始终成功：
*   `f(i, n)`通过从右侧重复切掉尽可能大的块来查找
*   `f(n, j)`通过从左侧重复切掉尽可能大的块来查找

检索最多访问每个表两次，因此在`O(log n)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T08:53:55.470

函数满足规则

```
f(i, j) + f(j, k) = f(i, k) 
```

正如你所说 。

所以将函数修改为 f(i,j) =g(j)-g(i) ，其中 g(i)= f(1,x)

这样

```
f(i,k)=g(k)-g(i)
      =g(k)-g(j)+g(j)-g(i)
      =f(j,k) + f(i,j) 
```

所以我认为如果你尝试存储 f(i,j) 的所有组合，它会花费你大约 o(n^2) 空间，所以你最好为 i 的所有值存储 g(i) 值的值o(n) 空间

因此，当您需要查找 f(i,j) 时，您实际上可以将其查找为 g(j)-g(i) 。

作为

```
 f(i,j)= g(j)-g(i) // as we already calculated and stored the g(i) . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:00:42.053

这是一个需要**`O(n)`空间、`O(n^2)`设置时间和`O(1)`每次评估**时间的解决方案。

我们有那个`f(i, j) = -f(j, i)`。`i <= j`

给定的是`f(i, k) = f(i, j) + f(j, k)`。因此，`f(i, k) = f(i, j) + f(j, k) = -f(j, i) + f(j, k)`。在设置阶段，`j = 1`任意修复。然后，计算`f(1, i)`每个`i`并存储结果。这需要`O(n)`空间和`O(n^2)`时间：`n`运行时间为`1, 2, 3, ..., n`.

对于查询，我们需要对和`f(i, k)`进行两次恒定时间查找。`f(i, 1)``f(k, 1)`

# opencv - 如何在 Opencv 中对数据进行分类

> ID：15874246
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:11:13.747
> 
> 标签：opencv, classification

我有 130 个对象。每个对象由 13 个点（2-d 点）定义，这 13 个点形成 data_unit。因此有 130 个 data_units。我想将这些 data_units 分为 4 个类。在这种情况下，我们怎么能做到这一点。k-means 是不可能的，有哪些替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:47:28.963

有一整套基于称为机器学习的技术的分类方法。在 OpenCV 中实现的那些在[此处](http://docs.opencv.org/modules/ml/doc/ml.html)描述。例如，您可以尝试[Support Vector Machines](http://docs.opencv.org/modules/ml/doc/support_vector_machines.html)。它是一种很好且相当易于使用的方法，具有一些技巧来获取无法线性分离的过去数据。

# linux - 具有多个 fifo 的 Linux tee 命令。fifo 块三通

> ID：15874248
> 
> 赞同：5
> 
> 时间：2013-04-08T08:11:17.630
> 
> 标签：linux, nonblocking, fifo, tee, mplayer

我正在尝试开发一个程序来播放和录制一些 rtmp 流。该程序是在 Qt 中开发的。

我正在使用 rtmpdump 和 mplayer。因为两者都在单独的进程中运行，所以我使用 fifo 将流从 rtmpdump 传递到 mplayer。我需要单独的过程，因为 mplayer 需要由用户控制。所以 mplayer 在从属模式下运行。

这对于播放流效果很好。

现在我想将流录制到另一个文件中。我知道我可以使用 mplayer 来做到这一点。但是使用单个 mplayer 是不可能的，因为它只支持播放或录制。于是想到用tee命令分流，使用2个mplayer进程，一个用于录制，一个用于播放。

现在溪流像这样流动

```
rtmpdump | tee fifo_for_playing fifo_for recording 
```

一个 mplayer 正在读取 fifo_for_playing，另一个正在读取 fifo_for_recording。

现在的问题是，由于应该记录的 mplayer 只有在用户按下记录按钮时才会启动，所以 fifo_for_recording 将阻止 tee，因为它没有打开。所以玩也不会开始。

有人可以提出解决方案或更好的方法来实现这一目标吗？我想要做的是与非阻塞先进先出的发球台。所以即使一个fifo没有打开读取，它也不会阻塞发球台..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T20:50:45.760

Fifos 没有缓冲区（或者如果他们有缓冲区，则缓冲区非常小）。如果您写信给它而没有人在读，那么您会发现，您会阻塞。

您可以编写一个小程序来读取 fifo 并将其缓冲在内存或磁盘中。也许 dd 程序可以做到这一点？

或者您可以在循环中使用带有 -stop 选项的 rtmpdump 调用，并将其输出写入文件。然后在没有fifo的情况下以老式方式处理文件。

# c# - 重定向标准输出，不引发事件

> ID：15874251
> 
> 赞同：0
> 
> 时间：2013-04-08T08:11:27.827
> 
> 标签：c#, process, redirectstandardoutput

我正在尝试启动一个程序并读取它的标准输出。但是，该事件从未被提出。我启动的进程正在运行，并在控制台中使用相同的参数创建输出。任何想法，我做错了什么？

```
 public void StartProcess(string Filename, string Arguments)
    {
        currentProcess = new Process();
        currentProcess.StartInfo.FileName = Programm;
        currentProcess.StartInfo.Arguments = Arguments;
        currentProcess.StartInfo.UseShellExecute = false;
        currentProcess.StartInfo.RedirectStandardOutput = true;
        currentProcess.StartInfo.RedirectStandardError = true;
        currentProcess.OutputDataReceived += OutputReceivedEvent;
        currentProcess.EnableRaisingEvents = true;

        string path = DateTime.Now.ToString("yyyy-MM-dd-HH-mm-ss") + "_Result.txt";
        LastResult = path;
        resultfile = File.CreateText(path);

        currentProcess.Start();
        currentProcess.BeginOutputReadLine();
        response.command = Command.ACK;
        SendMessage(response);

    }
    private void OutputReceivedEvent(object sender, DataReceivedEventArgs e)
    {
        resultfile.WriteLine(e.Data);
    } 
```

编辑：我刚刚发现了一些奇怪的东西：我开始的过程是 mcast。如果我启动 ping 之类的其他操作，我的代码就可以正常工作。所以 mcast 似乎做了一些有趣的事情！

EDIT2：所以下面的代码正在工作，但只读取一定大小的块，如果写入流的字节数较少，则偶数不会发生，.ReadBlock 也不会返回任何内容。

EDIT3：所以还有一个更新，问题是，mcast 不会刷新它的输出流。我最终编写了自己的工具，它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:11:31.363

根据您可能还需要使用的过程`currentProcess.ErrorDataReceived`，然后也需要使用`currentProcess.BeginErrorReadLine()`，因为某些过程只是重定向到一个输出，而不是两者。无论如何都值得一试。

所以它看起来像这样：

```
public void StartProcess(string Filename, string Arguments)
{
    currentProcess = new Process();
    currentProcess.StartInfo.FileName = Programm;
    currentProcess.StartInfo.Arguments = Arguments;
    currentProcess.StartInfo.UseShellExecute = false;
    currentProcess.StartInfo.RedirectStandardOutput = true;
    currentProcess.StartInfo.RedirectStandardError = true;
    currentProcess.OutputDataReceived += OutputReceivedEvent;
    currentProcess.ErrorDataReceived += ErrorReceivedEvent; 

    currentProcess.EnableRaisingEvents = true;

    string path = DateTime.Now.ToString("yyyy-MM-dd-HH-mm-ss") + "_Result.txt";
    LastResult = path;
    resultfile = File.CreateText(path);

    currentProcess.Start();
    currentProcess.BeginOutputReadLine();
    currentProcess.BeginErrorReadLine();
    response.command = Command.ACK;
    SendMessage(response);

}
private void OutputReceivedEvent(object sender, DataReceivedEventArgs e)
{
    resultfile.WriteLine(e.Data);
}

/*This second event handler is to prevent a lock occuring from reading two separate streams. 
Not always an issue, but good to protect yourself either way. */
private void ErrorReceivedEvent(object sender, DataReceivedEventArgs e)
{
    resultfile.WriteLine(e.Data);
} 
```

# actionscript-3 - AGAL/Stage3D：在一个着色器中重叠 2 个纹理

> ID：15874253
> 
> 赞同：0
> 
> 时间：2013-04-08T08:11:54.517
> 
> 标签：actionscript-3, flash, shader, agal

我设法让 alpha 工作，但我只想在一个纹理上更改 alpha。目前它只适用于两者。我设置了深度测试和混合因子：

```
context3D.setDepthTest(false, Context3DCompareMode.LESS);
context3D.setBlendFactors(Context3DBlendFactor.SOURCE_ALPHA, Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA); 
```

*我还没有弄清楚，究竟是什么来源和目的，任何澄清都会很好。* 顶点数据包含

```
[x, y, z, u, v, 0|1] 
```

设置顶点寄存器

```
context3D.setVertexBufferAt(0, m_vertexBuffer, 0, Context3DVertexBufferFormat.FLOAT_3);
context3D.setVertexBufferAt(1, m_vertexBuffer, 3, Context3DVertexBufferFormat.FLOAT_2);
context3D.setVertexBufferAt(2, m_vertexBuffer, 5, Context3DVertexBufferFormat.FLOAT_1); 
```

设置片段常量

```
context3D.setProgramConstantsFromVector(Context3DProgramType.FRAGMENT, 0, Vector.<Number>([textureMul, 0, 0, 0])); 
```

顶点着色器

```
m44 op, va0, vc0
mov v0, va1
mov v1, va2 
```

片段着色器

```
tex ft0, v0, fs0 <2d,clamp,linear>
sub ft0.w, ft0.w, fc0.x
add ft0.w, ft0.w, v1
mov oc, ft0 
```

其中 fc0.x 是介于 0 和 1 之间的数字。而 v1 是 0 或 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:16:14.380

感谢上帝为 Windows 提供了 PIX 程序（附带 Microsoft DirectX SDK）。我了解如何正确使用 FLOAT。由于我将 v1 作为 FLOAT_1 传递，因此我必须使用 v1.x，因此正确的片段着色器将是

```
tex ft0, v0, fs0 <2d,clamp,linear>
sub ft0.w, ft0.w, fc0.x
add ft0.w, ft0.w, v1.x
mov oc, ft0 
```

# android - 如果应用在后台时间过长，Android 类数据会消失

> ID：15874255
> 
> 赞同：0
> 
> 时间：2013-04-08T08:12:00.360
> 
> 标签：android

我有一个 Android 应用程序，它有一个存储对多个实体类的引用的类。这门课效果很好，但有一个问题。

如果我在这个类中有数据，然后将应用程序移到后台（按主页按钮）并等待足够长的时间并用我的手机做其他事情，当我将应用程序带到前台时，数据就消失了。应用程序将加载到最后打开的屏幕（不重新启动应用程序），但存储在此类中的所有数据都消失了。

它并不总是发生，所以我认为这是某种内存管理问题，但我正试图找出一种方法来保持这些数据持久存在，或者，如果它存在但现在不存在，让应用程序从头重新启动。

我怎样才能保留这些数据/重建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:17:24.947

查看[Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，以更好地了解您的 Activity 将如何以及何时被销毁、创建等。

在您的活动被销毁之前，`onSaveInstanceState(Bundle)`将在其上调用该方法。覆盖将状态保存到包的方法。以这种方式保存的数据将`onCreate(Bundle)`在后续调用中提供。

```
protected void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putString("myKey", "myValue"); // trivial, but for illustration purposes.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:25:09.540

您可以将数据保存在 Bundle 对象中，该对象将作为参数传递给您正在加载的活动的 Oncreate。如果您存储的数据很小，那么您可以使用 sharedpreference 并在加载活动时将其取回。

我的猜测是，您可能会在活动的 onpause 方法中清除实体类的对象，因此您可能会丢失数据，只需检查一次..

# configuration - 代码中的 NServiceBus MasterNode 配置正确解析 Dns

> ID：15874257
> 
> 赞同：1
> 
> 时间：2013-04-08T08:12:04.003
> 
> 标签：configuration, nservicebus

前几天我在尝试使用机器名而不是 ip 进行部署时遇到了这个错误：

```
Could not translate format name to independent name: XXXX 
```

经过一番研究，我发现了 Udi 的描述：http: [//tech.groups.yahoo.com/group/nservicebus/message/15232](http://tech.groups.yahoo.com/group/nservicebus/message/15232)

问题是我们无法关闭 MSMQ AD。

因此，我已经解决了这个问题，我将机器名称解析为 ipv4 地址：

```
public class MasterNodeConfiguration : IProvideConfiguration<MasterNodeConfig>
{
    private const string _masterNodeMachineNameKey = "MasterNodeMachineName";
    private string _masterNodeMachineName = string.Empty;

    public MasterNodeConfiguration(IApplicationSettingsReader applicationSettingsReader)
    {
        var machineName = applicationSettingsReader.GetValue(_masterNodeMachineNameKey);

        ResolveMachineNameToIpAddress(machineName);
    }

    private void ResolveMachineNameToIpAddress(string machineName)
    {
        if (string.IsNullOrEmpty(machineName) == false)
        {
            _masterNodeMachineName = Dns.GetHostAddresses(machineName)
                .Single(address => address.AddressFamily == AddressFamily.InterNetwork)
                .ToString();
        }
    }

    public MasterNodeConfig GetConfiguration()
    {
        return new MasterNodeConfig
        {
            Node = _masterNodeMachineName,
        };
    }
} 
```

我已经跨机器边界对此进行了测试，并且可以正常工作。

**我的问题：**

这个配置与我们的 worker/dist/sender/publisher/subscriber 配置位于同一个程序集中。它们都是使用以下代码编写的：NServiceBus.Configure.With().DefineEndpointName ...，这意味着如果它们不包含上述 appsettings 键，所有这些配置都将使用 Node 值为 NULL 的 MasterNode 配置。这是危险的还是 NSB 会像没有指定 MasterConfig 一样简单地处理 NULL 节点？

# android - 确定视图是否在屏幕上 - Android

> ID：15874260
> 
> 赞同：21
> 
> 时间：2013-04-08T08:12:13.077
> 
> 标签：android, view, scrollview, visibility

我对此有点坚持 - 首先，以下链接很有用，但是我提出了一些可见性问题：

链接：[检查视图可见性](https://stackoverflow.com/questions/4628800/android-how-to-check-if-a-view-inside-of-scrollview-is-visible "检查视图可见性")

我有一个滚动视图（父视图）和一些子视图（`LinearLayout`-> ）等。我在 XML`TableLayout`中设置了许多项目（ ）。`View.GONE``android:visibility="gone"`

我有一些简单的代码来确定它是否可见，`getVisibility()`但是当我将项目设置为`View.VISIBLE`并尝试立即`getDrawingRect()`得到一个全线为零的 Rect 时。任何进一步的点击都会获得正确的坐标。

现在这可能是因为从未绘制过视图（如 XML 中定义的那样）导致它不返回任何坐标，但是我`View.VISIBLE`在尝试确定屏幕可见性之前进行了设置。是不是我需要从 onDraw() 中获得某种回调？或者也许设置代码中隐藏项的视图可见性。有点烦人;(

一些代码：

```
Rect scrollBounds = new Rect();
scroll.getHitRect(scrollBounds);

Rect viewBounds = new Rect();

if (view.getVisibility() == View.GONE) {
    view.setVisibility(View.VISBLE)

    viewBounds.getDrawingRect(viewBounds);
    if (!Rect.intersects(scrollBounds, viewBounds) {
        // do somthing
    } 
} 
```

布局区域如下：

*   `ScrollView`
    *   `LinearLayout`
        *   `TableLayout`
            *   `Button`
            *   `HiddenView`

当然，我很有可能完全走错了路——基本上我只是想确保滚动视图自身定位，以便可以完整地看到已经变得可见的视图。

如果需要任何其他信息，请告诉我！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T19:02:02.987

好的，感谢 OceanLife 为我指明了正确的方向！确实需要回调并`ViewTreeObserver.OnGlobalLayoutListener()`成功了。我最终针对我的片段类实现了监听器，并在我需要的地方拾取了它。感谢您对多次调用的警告，我使用该`removeOnGlobalLayoutListener()`方法解决了这个问题 - 很有魅力。

代码：

```
...

// vto initialised in my onCreateView() method

vto = getView().getViewTreeObserver();
vto.addOnGlobalLayoutListener(this);

...

@Override
    public void onGlobalLayout() {

        final int i[] = new int[2];
        final Rect scrollBounds = new Rect();

        sView.getHitRect(scrollBounds);
        tempView.getLocationOnScreen(i);

        if (i[1] >= scrollBounds.bottom) {
            sView.post(new Runnable() {
                @Override
                public void run() {
                    sView.smoothScrollTo(0, sView.getScrollY() + (i[1] - scrollBounds.bottom));
                }
            });
        }

        vto.removeOnGlobalLayoutListener(this);
    } 
```

现在只好打扫一下...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-08T09:41:37.660

因此，如果我没看错，那么您遇到的问题是您想找出布局中某些视图的尺寸，以了解您是否与 parent 有交集`ScrollView`。

我认为您所看到的（正如您所提到的）是绘制正在调度的视图的指令，然后在某种竞争条件下，渲染器解析布局的测量值**和**视图对象获得真实大小的实际渲染. 找出视图在屏幕上的维度的一种方法是使用布局树侦听器。在利用 Google Charts API 时，我们使用这个观察器来解析屏幕的尺寸，这需要定义像素的宽度和高度……当然，这在 Android 上可能是开发人员面临的最大问题。所以观察（双关语）；

```
final ViewTreeObserver vto = chart.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

  /**
   * @see android.view.ViewTreeObserver.OnGlobalLayoutListener#onGlobalLayout()
   */
  @SuppressWarnings("deprecation")
  @Override
  public void onGlobalLayout() {
    if (view.getVisibility() == View.GONE) {
      view.setVisibility(View.VISBLE)
      viewBounds.getDrawingRect(viewBounds);
      if (!Rect.intersects(scrollBounds, viewBounds) {
        // do something
      } 
    }
  }
}); 
```

随着渲染器接近最终解决方案，警告`onGlobalLayout`将被多次调用。最后一个电话是我们接听的电话。

这将为您提供一种在绘制视图上执行操作的机制，例如获取视图组件的宽度和高度。希望对您有所帮助。

旁白：Square 的聪明人设计了一个 FEST hamcrest 库，可以让您与 Robotium 一起为此编写测试。[检查出来](http://square.github.io/fest-android/)。

# c# - 单击按钮时直接到另一个 xaml 用户控制页面 C# WPF

> ID：15874261
> 
> 赞同：0
> 
> 时间：2013-04-08T08:12:17.087
> 
> 标签：c#, wpf, button

`xaml`当我从主窗口单击按钮时，如何从主窗口定向到另一个用户控制页面。

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        \\what am i suppose to write here;
    } 
```

感谢任何帮助表示赞赏

我在我的类别 xaml 上的代码

```
 <UserControl x:Class="KinectButton.view.Catergory"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="373" d:DesignWidth="480" HorizontalAlignment="Stretch" Loaded="UserControl_Loaded">

<Grid Loaded="Grid_Loaded" Name="grid1">
    <StackPanel Name="myStackPanel" Margin="1,0,120,54">
        <Image Height="319" Name="myImg" Stretch="Fill" Width="357" />
    </StackPanel>
    <Grid x:Name="ContentPanel" Margin="0,0,121,54"></Grid>

    <Label Content="Label" Name="message" Margin="2,317,121,0" />
        <Button x:Name="Button1" Content="" Margin="357,77,0,222" Click="Button1_Click">
            <Button.Background>
                <ImageBrush ImageSource="C:\Users\103159T\Desktop\KinectButton1\KinectButton\Images\AERO.png"></ImageBrush>
            </Button.Background>
        </Button>
    <Button x:Name="Button3" Content="" Margin="357,147,0,148" Click="Button3_Click">
        <Button.Background>
            <ImageBrush ImageSource="C:\Users\103159T\Desktop\KinectButton1\KinectButton\Images\MIT.png"></ImageBrush>
        </Button.Background>
    </Button>
    <Button x:Name="Button4" Content="" Margin="357,224,0,0" Height="73" VerticalAlignment="Top" Click="Button4_Click">
        <Button.Background>
            <ImageBrush ImageSource="C:\Users\103159T\Desktop\KinectButton1\KinectButton\Images\MECHATRONIC.png"></ImageBrush>
        </Button.Background>
    </Button>
    <Button x:Name="Button5" Content="" Margin="357,298,0,0" Click="Button5_Click">
        <Button.Background>
            <ImageBrush ImageSource="C:\Users\103159T\Desktop\KinectButton1\KinectButton\Images\TMT.png"></ImageBrush>
        </Button.Background>
    </Button>
    <Button x:Name="Button2" Content="" Margin="357,0,0,294" Click="Button2_Click">
        <Button.Background>
            <ImageBrush ImageSource="C:\Users\103159T\Desktop\KinectButton1\KinectButton\Images\ECC.png"></ImageBrush>
        </Button.Background>
    </Button>
</Grid> 
```

我有几个按钮和一些图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:08:01.963

打开窗口的代码非常简单

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        // based on your comments your window is called catergory
        var catergory = new Catergory();
        catergory.Show();
    } 
```

# ruby-on-rails - gem jquery-ui-rails 找不到文件“jquery.ui.all”（

> ID：15874265
> 
> 赞同：8
> 
> 时间：2013-04-08T08:12:20.953
> 
> 标签：ruby-on-rails, jquery-ui, gem

我正在尝试在[jquery-ui-rails gem 的](https://github.com/joliss/jquery-ui-rails)帮助下将 jquery ui datepicker 添加到我的应用程序中。我检查了[Railscast](http://railscasts.com/episodes/213-calendars-revised)我似乎做的一切都是正确的，但是在应用程序启动时我得到一个错误
`couldn't find file 'jquery.ui.all'`

Gemfile（最后，尝试将 gem 包含在资产组中，但没有运气）：

```
gem 'backbone-on-rails'
gem "jquery-ui-rails" 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require underscore
//= require backbone
//= require svitla_test
//= require_tree ../templates
//= require_tree ./models
//= require_tree ./collections
//= require_tree ./views
//= require_tree ./routers
//= require_tree .
//= require jquery.ui.all 
```

应用程序.css

```
*= require jquery.ui.all
*= require_self
*= require_tree . 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-08-13T08:17:39.947

在 5.0 版中，它已被更改。[你可以在这里](https://github.com/joliss/jquery-ui-rails#require-everything)阅读更多关于它的信息。

**5.0 版**：

应用程序.js：

```
//= require jquery-ui 
```

应用程序.css：

```
/*
 *= require jquery-ui
 */ 
```

**版本 4.x**（我确定 4.2.0 和 4.2.1）：

应用程序.js：

```
//= require jquery.ui.all 
```

应用程序.css：

```
/*
 *= require jquery.ui.all
 */ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T09:08:36.350

放在`//= require jquery.ui.all`后面`//= require jquery`，看起来像这样

```
//= require jquery
//= require jquery.ui.all
//= require jquery_ujs
//= require underscore
//= require backbone
//= require svitla_test
//= require_tree ../templates
//= require_tree ./models
//= require_tree ./collections
//= require_tree ./views
//= require_tree ./routers
//= require_tree . 
```

请注意，这些行的写入顺序是这些文件的加载顺序。所以如果你`jquery-ui`在它知道是什么之前调用一个函数`jquery-ui`，很可能你需要稍微改变一下顺序。

通常最好将基础设施文件放在您自己的文件之前以避免此类问题

# javascript - Object.keys(...) 在 IE 中并不总是有效

> ID：15874268
> 
> 赞同：0
> 
> 时间：2013-04-08T08:12:37.783
> 
> 标签：javascript, internet-explorer

SCRIPT438：对象不支持属性或方法“键”

使用 IE 9.0.8112.16421 我收到此错误，但并非总是如此。两个环境中完全相同的应用程序和代码。一个在 Intranet 主机上运行 JBoss，另一个在 localhost 上运行 Jetty。前一个给出了错误。

这是失败的代码：

```
return $.get('/rest/typeaheads/' + query, function(data) {
    lastResults = data; 
>   return process(Object.keys(lastResults));  <
}); 
```

我有一个地图 lastResults 通过 ajax 调用作为 json 对象接收。我知道 Object.keys(...) 不适用于主机对象，但我的 json 对象肯定不是主机对象？

那么这怎么会发生，为什么这两种环境之间存在差异呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T11:31:59.033

显然; IE 9 将在 Intranet 环境中假定您所有的 Intranet 应用程序都是垃圾。因此它将进入“兼容模式”。在“兼容模式”下，它将模拟 IE 7。

我对此的解决方案是添加一条警告用户该问题的通知并提供说明以关闭“兼容模式”。

另外，如果我需要支持 IE7，这对我来说不再是问题。我已经开始使用下划线库，它提供了自己的函数来检索密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T23:45:23.310

您可以尝试自己滚动：

```
Object.keys = Object.keys || function keys(obj) {
  var ret = [];
  for (var prop in obj) if (obj.hasOwnProperty(prop)) ret.push(prop)
  return ret;
} 
```

# objective-c - performBlockAndWait 是否总是在同一个线程上完成

> ID：15874269
> 
> 赞同：0
> 
> 时间：2013-04-08T08:12:41.963
> 
> 标签：objective-c, xcode4.5

我这样做是为了实验。

好吧，如果它不在同一个线程上，@syhcronized 将导致死锁。到目前为止还没有。

我只需要确认。

```
@synchronized([BGFetchClass class])
{
    [moc performBlockAndWait:^{
        @synchronized([BGFetchClass class])
        {
            saveSuccesfully = [moc save:&error];
            if (!saveSuccesfully) {
                CLog(@"Error in Saving %@", error);
            }
            else{
            }
        }
    }];
} 
```

# apache - 如何处理这种不断变化的 mod_rewrite 规则？

> ID：15874273
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:12:56.977
> 
> 标签：apache, .htaccess, mod-rewrite

我有一堆 mod_write 规则

```
RewriteRule ^connect$ connect.php
RewriteRule ^stuff$ stuff.php
RewriteRule ^logout$ logout.php 
```

..等等。

在这个应用程序上，用户可以创建自己的页面并获得一个花哨的 url，例如：

```
www.url.com/customnamehere 
```

如果我为此有一个 rewrite_rule 它看起来像：

```
RewriteRule ^customenamehere$ page.php?name=customnamehere 
```

但是，当然，我不会为这些自定义页面中的每一个手动创建一个 rewrite_rule，因为它们可能有很多......也许有数千个，这将导致一个非常庞大且执行速度很慢的 htaccess 文件。

这让我遇到了障碍：如何拥有它，以便如果没有一个初始的“固定”rewrite_rules 匹配，那么加载用户页面？我想也许我可以在开始时拥有所有常规规则，然后在所有其他规则结束时，例如：

```
RewriteRule ^(.*)$ page.php?name=$1 
```

我错了。

你会如何处理这个问题？使用 apaches 外部重写引擎的所有这些自定义名称的数据库，然后以某种方式包含到 htaccess 文件中（这对于大型数据库来说似乎很慢）？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:19:18.430

您需要创建一个条件，以便在`page.php`应用之前的规则之一时不会应用路由到的规则。您可以通过检查`-f`和`-d`标志来做到这一点。您还应该`L`在其他规则的末尾放置标志：

```
RewriteRule ^connect$ connect.php [L]
RewriteRule ^stuff$ stuff.php [L]
RewriteRule ^logout$ logout.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ page.php?source_url=$1 
```

如果需要，您也可以在那里检查 php，因为您可能不希望自定义名称以“.php”结尾：

```
RewriteCond %{REQUEST_URI} !\.php$
RewriteRule ^(.*)$ page.php?source_url=$1 
```

尽管`-f`and`-d`检查可能是更好的方法。

# c# - 如何防止 Facebook 应用程序请求任何权限？

> ID：15874278
> 
> 赞同：2
> 
> 时间：2013-04-08T08:13:03.427
> 
> 标签：c#, .net, facebook, permissions, facebook-apps

我有一个 facebook 应用程序，它可以工作。但是当用户进入应用页面时，它会尝试访问用户的基本信息。它要求
许可（只是第一次）。能够毫无疑问地看到任何人。

我想举个例子是合适的：

```
https://www.facebook.com/GKFXPhilippines/app_155718427915844 
```

我不想出现以下屏幕；

![在此处输入图像描述](https://i.stack.imgur.com/sIMvV.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:48:43.070

我使用了 MVC；在控制器页面中有默认的这一行：

```
[FacebookAuthorize("email", "user_photos")] 
```

我删除了它们并解决了我的问题。

# css - 翻转菜单css3

> ID：15874279
> 
> 赞同：0
> 
> 时间：2013-04-08T08:13:05.647
> 
> 标签：css, menu, hover, transition, rollover

我遇到了翻转菜单的问题`css3`。我需要创建这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/Z0DDR.png)

我坐了两天，我仍然有问题。有我的进度（右上角）： [http ://dash.com.pl/CTP/index.html#](http://dash.com.pl/CTP/index.html#)

`position:absolute`所以，问题是，当我设置为这个时，我无法显示我的第二个 ul 。我也不能将 padding-bottom 设置为第一个 Ul。

当然我犯了一些错误，如果有人能看到我做错了什么，我将不胜感激。

[http://jsfiddle.net/SD58Z/800/](http://jsfiddle.net/SD58Z/800/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:49:31.873

在你的 CSS 添加

```
#language {overflow: hidden; } 
```

顺便说一句，请在关闭 div 之前关闭您的链接！，

```
<div> <a href="#"> Link</a></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:33:24.630

嗨，您应该关闭`<a>`标签`div`并更改 html 代码，如下所示：

```
<ul class="language" id="language">
     <li><div id="sve"><a href="#">svensk<div id="ico"><span></span></div></a></div>                
         <div id="uk"><a href="#">english</a></div>             
     </li>
</ul> 
```

# c++ - 复制省略和临时绑定引用对象

> ID：15874281
> 
> 赞同：6
> 
> 时间：2013-04-08T08:13:11.570
> 
> 标签：c++, c++11

C++ 草案指出：

> 12.8p31 这种复制/移动操作的省略，称为复制省略，在以下情况下是允许的（可以结合起来消除多个副本）：
> 
> (...)
> 
> *   当**尚未绑定到引用**(12.2) 的临时类对象将被复制/移动到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到目标中来省略复制/移动操作省略的复制/移动

换句话说：

```
X MakeX() {
   return X(); // Copy elided
}

X MakeX() {
   const X& x = X(); // Copy not elided
   return x;
} 
```

**限制引用的原因是什么**？

*请不要关注以下示例的有效性，因为它们只是为了说明我看不到临时和参考之间的区别（恕我直言）*。

一方面，通过引入引用，我们允许其他对等方为同一个对象起别名，而调用者`MakeX()`希望它是安全和干净的。

```
class Y {
public:
    Y(const X& x) : _xRef(x) {}
private:
    const X& _xRef;
};

X MakeX() {
    const X& x = X();
    Y y{x};
    StaticStuff::send(y);
    return x; // Oops, I promised to return a clean,
              // new object, but in fact it might be silently
              // changed by someone else. 
} 
```

但是这种情况呢（可能是 UB ;)）：

```
class Y {
public:
    Y(X* x) : _xPtr(x) {}
private:
    X* _xRef;
};

X MakeX() {
    X x;
    Y y{&x}; // I'm referencing a local object but I know it will be
             // copy elided so present in the outer stack frame.
    StaticStuff::send(y);
    return x; // Copy elided?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:25:34.960

你永远不*知道*副本会被删除。复制省略从来都不是强制性的。

因此，要么这两种情况都是 UB，要么都没有。这取决于`StaticStuff:send`您传入的对象的作用。如果它保留对`y._xRef`or的任何`*y._xPtr`指针/引用，那么在返回后取消引用该指针/引用`MakeX()`确实会导致 UB，因为原始对象`x`是一个内部具有自动存储持续时间`MakeX()`及其生命周期的对象现在已经结束。

此 UB 的结果可能是“一切正常”，因为确实发生了复制省略，并且指针/引用引用了“外部堆栈帧”中的实例。然而，这纯属巧合，它仍然是 UB。

# ssl - 我的 jasig 不使用用户 ldap 密码

> ID：15874283
> 
> 赞同：1
> 
> 时间：2013-04-08T08:13:29.860
> 
> 标签：ssl, single-sign-on, jasig

我们有几个带有 LDAP 服务器的服务，我们将 JASIG 作为主要入口，我们在 Jboss7 上部署 JASIG，并且在 SSL 上运行良好，但是我们的 LDAP 服务器在 TLS 上运行。我的问题是任何经过身份验证的用户都通过 TLS 运行任何用户密码，无论对错。

不知道为什么登录用户名敏感，对密码不敏感，随便输入一个密码。

谢谢你。

显示我的 DeployConfigContex.xml 文件中有趣的部分。

**这是我们的 AuthenticationManager：**

```
 <bean id="authenticationManager" 
            class="org.jasig.cas.authentication.AuthenticationManagerImpl">                
            <property name="credentialsToPrincipalResolvers">
                    <list>                

                            <bean 

                                    class="org.jasig.cas.authentication.principal.CredentialsToLDAPAttributePrincipalResolver">

                                    <property name="credentialsToPrincipalResolver">
                                            <bean 
                                                    class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver" />
                                    </property>

                                    <property name="filter" value="(cn=%u)" />
                                    <property name="principalAttributeName" value="cn" />
                                    <property name="searchBase" value="ou=ServiciosCentrales,ou=Usuarios,dc=educacion,dc=es" />
                                    <property name="contextSource" ref="contextSource" />

                                    <property name="attributeRepository">
                                            <ref bean="attributeRepository" />
                                    </property>

                            </bean>                

                    </list>
            </property>
            <property name="authenticationHandlers">
                    <list>
                            <bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler" 
                                    p:httpClient-ref="httpClient" />                                
                            <bean class="org.jasig.cas.adaptors.ldap.BindLdapAuthenticationHandler">
                              <property name="filter" value="cn=%u" />
                              <property name="searchBase" value="ou=ServiciosCentrales,ou=Usuarios,dc=educacion,dc=es" />
                              <property name="contextSource" ref="contextSource" />
                              <property name="ignorePartialResultException" value="yes" />  
                            </bean>                                                                                                          
                    </list>
            </property>

    </bean> 
```

**这是我们的上下文源：**

```
 <property name="pooled" value="false" />

            <property name="userDn" value="cn=secret,dc=educacion,dc=es"/>
            <property name="password" value="secret"/>

            <property name="url" value="ldap://192.168.0.100:389"/>             
            <qualifier value="secured"/>                                

            <property name="authenticationStrategy">
                    <bean class="org.springframework.ldap.core.support.DefaultTlsDirContextAuthenticationStrategy">
                            <property name="sslSocketFactory">
                                    <bean class="com.cein.educa.ldap.LDAPSocketFactory" />
                            </property>  
                            <property name="hostnameVerifier">
                                    <bean class="com.cein.educa.ldap.LDAPHostNameVerifier" />
                            </property>  

                            <property name="shutdownTlsGracefully" value="true" />
                    </bean>
            </property>

    <property name="baseEnvironmentProperties">                
                    <map>  
                            <entry key="java.naming.security.authentication" value="simple" />
                    </map>  
            </property>                                

    </bean> 
```

# python - 循环时 Python ArcPy 模块中的“引发 e 执行错误”

> ID：15874284
> 
> 赞同：1
> 
> 时间：2013-04-08T08:13:42.953
> 
> 标签：python, loops, error-handling, arcpy

该`Resample_management`功能是 ArcPy 模块的一部分，该模块只能与 ArcGIS 软件一起安装。它的默认形式是：

```
arcpy.Resample_management("D:\InputFile", "D:\OutputFile.tif", "1000 1000", "BILINEAR") 
```

这样就可以了。但是当我把它放在一个循环中时，我得到了一个错误。

```
Input=glob.glob("D:\Freelancer\oDesk\Create-ArcPy-Scripts\TestFiles\*tif")
#Glob makes an array with all the TIF files inside a folder.
for i in Input:
    arcpy.Resample_management(i, "D:\OutputFolder\%s_1000.tif" % i, "1000 1000", "BILINEAR")

Runtime error  Traceback (most recent call last):   File "<string>", line 2, in <module>   File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\management.py", line 12407, in Resample     raise e ExecuteError: ERROR 999999: Error executing function. Failed to execute (Resample). 
```

如果我查找 ERROR 999999，它会说“这是一个没有 ID 的错误”。我的循环有问题还是显然是 ArcPy 模块的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:56:00.013

这有帮助吗？

```
for i, filename in enumerate(sorted(list(Input))):
    arcpy.Resample_management(filename, "D:\OutputFolder\%s_1000.tif" % i, "1000 1000", "BILINEAR") 
```

我无法尝试，但我希望它会有所帮助。

# ios - UITextView 在文本上的底部阴影

> ID：15874286
> 
> 赞同：2
> 
> 时间：2013-04-08T08:14:00.563
> 
> 标签：ios, objective-c, uitextview

也许您知道解决方案，如何在 textView 上添加阴影，例如：

![在此处输入图像描述](https://i.stack.imgur.com/TTFNm.png)

所以我需要一个透明的textView，我可以在后台看到视图

![在此处输入图像描述](https://i.stack.imgur.com/zAQtj.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:46:25.457

Apple 提供了[`CAReplicatorLayer`](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAReplicatorLayer_class/Reference/Reference.html)可用于对图层进行自动镜像的工具（除其他外）。这甚至适用于视频层，并且非常高效（直接在 GPU 上执行其绘图）。

> CAReplicatorLayer 类创建其子层（源层）的指定数量的副本，每个副本都可能应用几何、时间和颜色转换。

有一个 WWDC 视频（ 51:00 左右的[Core Animation Essentials](https://developer.apple.com/videos/wwdc/2011/?id=421)）简要介绍了如何使用它，以及一个名为[ReplicatorDemo](https://developer.apple.com/library/mac/#samplecode/ReplicatorDemo/Introduction/Intro.html)的 OSX 演示项目。

快速搜索会发现一篇[博客文章](http://saveme-dot-txt.blogspot.de/2011/06/dynamic-view-reflection-using.html)，其中给出了反映层的示例，尽管我没有检查代码/技术的质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:35:34.630

我认为您可以结合以下方法（未经测试！）：

[如何使用 NSString 绘制功能从文本创建 UIImage](https://stackoverflow.com/questions/2765537/how-do-i-use-the-nsstring-draw-functionality-to-create-a-uiimage-from-text)

```
UIImage * textImage = [self imageFromText:text];

//You may play with the scale value
UIImage *textImageMirrored = [UIImage imageWithCGImage:[textImage CGImage] scale:1.0 orientation:UIImageOrientationDownMirrored]; 

And then use this mirrored image in the correct position.
UIImageView *textShadow = [[UIImageView alloc] initWithImage:textImageMirrored];
textShadow.opacity = 0.6; //or so 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:54:58.863

我过去在白色背景上做过这个，方法是制作一个带有渐变的白色图像，该渐变开始完全不透明并逐渐消失。我将其覆盖在表格视图的底部边缘之上。它使表格视图的外观在底部边缘淡化为白色。

当我到达表格滚动内容的最底部时，我通过让图像向下滑动来解决“底部”问题，这样最后一点就不会消失。

如果您有复杂、移动或多变的背景，这可能不是最佳选择，但对于简单的背景来说效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:49:07.647

我找到了最好的解决方案。我使用遮罩层和 CAGradientLayer。因此，如果我们将它用于 UITextView，我们的层将是动态的。我创建 UIView，在这个 UIView 上添加我的 UITextView 并为 UIView 使用层

```
//this float need for creating second sublayer, for scrollIndicator
CGFloat layerWidth = 8.f;
CAGradientLayer *gl1 = [CAGradientLayer layer];
id col1 = (id)[[UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0]CGColor];
id col2 = (id)[[UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.0]CGColor];
gl1.colors = @[col2, col1, col1, col2];
gl1.locations = @[@0.0, @0.0, @0.85, @1.0];
//underTextView - this is my UIView
gl1.frame = CGRectMake(0, 0, self.underTextView.width - layerWidth, self.underTextView.height);
//layer for scrollIndicator - it must be visible always good
CAGradientLayer *gl2 = [CAGradientLayer layer];
gl2.colors = @[col1, col1];
gl2.locations = @[@0.0, @1.0];
gl2.frame = CGRectMake(self.underTextView.width - layerWidth, 0, layerWidth, self.underTextView.height);
//create main layer
CAGradientLayer *gl = [CAGradientLayer layer];
[gl addSublayer:gl1];
[gl addSublayer:gl2];
//add to mask of UIView
self.underTextView.layer.mask = gl; 
```

![在此处输入图像描述](https://i.stack.imgur.com/Z8NxU.png)

`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`然后我在顶部和底部渐变的方法中更改 CAGradientLayer 中颜色的位置。因此，当我打开 textView 时，我看到顶部和底部透明的文本很好，滚动时顶部和底部都透明，滚动到底部时 - 顶部透明，底部不透明

![在此处输入图像描述](https://i.stack.imgur.com/mHJBi.png) ![在此处输入图像描述](https://i.stack.imgur.com/G9eiT.png)

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
CGFloat layerWidth = 8.f;
CAGradientLayer *gl1 = [CAGradientLayer layer];
id col1 = (id)[[UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0]CGColor];
id col2 = (id)[[UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.0]CGColor];
gl1.colors = @[col2, col1, col1, col2];
if (self.mainTextView.contentOffset.y < 5)
    gl1.locations = @[@0.0, @0.0, @0.85, @1.0];
if (self.mainTextView.contentOffset.y >=5 && self.mainTextView.contentOffset.y < 20) {
    CGFloat number = (self.mainTextView.contentOffset.y - 5) * 0.01;
    gl1.locations = @[@0.0, [NSNumber numberWithFloat:number], @0.85, @1.0];
}
if (self.mainTextView.contentOffset.y >= 20  && self.mainTextView.contentOffset.y < self.mainTextView.contentSize.height - self.mainTextView.height - 20)
    gl1.locations = @[@0.0, @0.15, @0.85, @1.0];
if (self.mainTextView.contentOffset.y >= (self.mainTextView.contentSize.height - self.mainTextView.height - 20) && self.mainTextView.contentOffset.y < (self.mainTextView.contentSize.height - self.mainTextView.height - 5)) {
    CGFloat number = 1 - (self.mainTextView.contentSize.height - self.mainTextView.contentOffset.y - self.mainTextView.height - 5) * 0.01;
    gl1.locations = @[@0.0, @0.15, [NSNumber numberWithFloat:number], @1.0];
}
if (self.mainTextView.contentOffset.y >= self.mainTextView.contentSize.height - self.mainTextView.height - 5)
    gl1.locations = @[@0.0, @0.15, @1.0, @1.0];
gl1.frame = CGRectMake(0, 0, self.underTextView.width - layerWidth, self.underTextView.height);
CAGradientLayer *gl2 = [CAGradientLayer layer];
gl2.colors = @[col1, col1];
gl2.locations = @[@0.0, @1.0];
gl2.frame = CGRectMake(self.underTextView.width - layerWidth, 0, layerWidth, self.underTextView.height);
CAGradientLayer *gl = [CAGradientLayer layer];
[gl addSublayer:gl1];
[gl addSublayer:gl2];
self.underTextView.layer.mask = gl;
} 
```

# facebook - Facebook 在 2013 年 6 月放弃了对 iOS SDK 2 的支持

> ID：15874289
> 
> 赞同：2
> 
> 时间：2013-04-08T08:14:08.120
> 
> 标签：facebook, sdk

Facebook 宣布将在 2013 年 6 月停止对 SDK 2 的支持。有人可以确认使用 sdk 2 for iOS 的 facebook 连接在该日期之后仍然可以工作吗？

我将无法在 6 月之前更新我的 ios 应用程序。

# c# - 使用 asp.net windows 身份验证以不同用户身份登录

> ID：15874300
> 
> 赞同：0
> 
> 时间：2013-04-08T08:14:34.483
> 
> 标签：c#, asp.net, windows, firefox

我创建了一个 asp.net Web 应用程序并使用了 Windows 身份验证，出于测试目的，我想将该应用程序用作不同的用户。

我认为以不同的用户身份运行 Firefox 可以实现这一点，但这样做似乎不起作用。HttpContext.Current.User 属性仍以 AD 用户登录。

是否有设置或我需要在 Firefox 中更改以解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:37:28.480

`about:config`我认为您可以在页面中的 fireFox 中配置“集成 Windows 身份验证” 。

请查看以下[链接](http://markmonica.com/2007/11/20/firefox-and-integrated-windows-authentication/)。此链接用于激活集成身份验证，但也许您可以使用它来执行还原操作。

一旦 FireFox 要求您输入用户名和密码，您将能够输入与您的不同的用户名和密码（已登录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:47:13.027

每个程序都有一个非常简单的选项。使用[RUNAS](http://ss64.com/nt/runas.html)命令。打开cmd并输入：

```
runas /user:DOMAIN\USER "c:\Program Files (x86)\Mozilla Firefox\firefox.exe" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:29:35.707

我对firefox不太了解，但是IE属性下有一个设置（我认为大多数其他浏览器都从中派生安全设置）。“Intranet 站点的自动登录” - 或类似的东西，需要关闭，然后它应该开始提示您输入登录详细信息。

# objective-c - 将图像添加到 UIAlertBuilder

> ID：15874301
> 
> 赞同：0
> 
> 时间：2013-04-08T08:14:34.653
> 
> 标签：objective-c, uiimageview, uialertview

我有一个 UIAlert 构建器，我想在标题和按钮之间添加一个图像。这是我的代码：

```
UIAlertView *pull = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"pull_wire", nil)
                                    message:nil
                                    delegate:nil
                                    cancelButtonTitle:NSLocalizedString(@"continue_text", nil)
                                    otherButtonTitles:nil];

UIImageView *imageView = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"cable.png"]];

[pull addSubview:imageView];
[pull show]; 
```

但是图像显示在 UIAlertView 的顶部。

使用@yunas 解决方案：

![在此处输入图像描述](https://i.stack.imgur.com/wHoz1.png)

会不会是图太大了？

调整图像大小：

![在此处输入图像描述](https://i.stack.imgur.com/m8btp.png)

如何在 UIAlert 中获取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:19:40.183

```
UIAlertView *pull = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"pull_wire", nil)
                                message:@"\n\n\n\n\n\n\n\n\n\n\n\n"
                                delegate:nil
                                cancelButtonTitle:NSLocalizedString(@"continue_text", nil)
                                otherButtonTitles:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:42:10.550

```
UIAlertView *pull = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"pull_wire", nil)
                                    message:nil
                                    delegate:nil
                                    cancelButtonTitle:NSLocalizedString(@"continue_text", nil)
                                    otherButtonTitles:nil];

[pull show];

UIImageView *imageView = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"cable.png"]];
    CGRect frame = imageView.frame;
    frame.origin = CGPointMake(0, 80); // set the origin here
    frame.size = CGSizeMake(90,40);//ANY SIZE that you want, but remember if you want the alertview to be big in size you need to apply transformation on the pull (ALERTVIEW)
[imageView setFrame:frame];
[pull addSubview:imageView]; 
```

# php - 使用 php 和 mysql 在数据库中查找匹配项

> ID：15874307
> 
> 赞同：0
> 
> 时间：2013-04-08T08:14:48.420
> 
> 标签：php, mysql, sql, database, select

所以这是我需要解决的问题：我的数据库中的用户正在学习一定数量的课程。这些课程都是编号的，所以该行的值`courses`可以是`12, 34, 56`或`12`或''等。现在我正在做一个搜索查询来查找正在关注某个课程的用户。我正在考虑使用`LIKE`，但这似乎是一个不切实际的解决方案，因为我必须按如下方式匹配它：

`courses LIKE '$course,%' OR courses LIKE '%,$course,%' OR courses LIKE '%,$course' OR courses LIKE '$course'`

由于有四种不同的匹配方式，我希望有一个更好的解决方案，但我自己还没有想到任何东西。有人有创造性的解决方案吗？谢谢一米。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:21:07.970

MySQL 已经实现了一个名为`FIND_IN_SET()`从逗号分隔值中搜索值的函数，例如

```
SELECT *
FROM   TableName
WHERE  FIND_IN_SET('12', 'comma separated value') > 0 
```

*   [MySQL FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

考虑规范化您的表格。将逗号分隔值存储在单个列中是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:25:58.687

您可以在数据库中添加另一个表，然后再添加一个表以建立和`course`之间的链接：`courses``users`

```
Users (id_user, name,  ...)
Courses (id_course, num_course, ...)

userHasCourse (id_user, id_course) 
```

`userHasCourse.id_user`并且`userHasCourse.id_course`是用户和课程表的 id 的外键。

您新的能够取回每个用户的所有课程信息

```
SELECT Users.name, Courses.num_course FROM Courses JOIN userHasCourse USING id_course JOIN Users USING id_user ORDER BY id_user 
```

您将获得包含所有用户和相关 num_courses 的数组。如果您想添加有关课程的更多信息（不止一个数字），此解决方案可能很有用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T08:16:48.053

尝试使用

```
WHERE courses IN (12,34,56); 
```

# ruby-on-rails - 使用 has_many 的 check_box_tag 未初始化的常量：虽然

> ID：15874311
> 
> 赞同：0
> 
> 时间：2013-04-08T08:15:03.740
> 
> 标签：ruby-on-rails, checkbox, has-many-through, uninitialized-constant

我从“@collection.components.include?”的 check_box_tag 中收到错误“未初始化的常量 Collection::CollectionComponent”。我不确定为什么会发生这种情况，因为@collection 在 form_for 标记中似乎可以正常工作，或者如果我删除了 check_box_tag。

**_form.html.haml**

```
= form_for @collection do |f|
  - if @collection.errors.any?
    #error_explanation
      %h1= "#{pluralize(@collection.errors.count, "error")} prohibited this collection from being saved:"
      %ul
        - @collection.errors.full_messages.each do |msg|
          %li= msg

  .field
    - Component.all.each do |component|
      = label_tag :component_ids, component.id
      = check_box_tag :component_ids, component.id, @collection.components.include?(component), :name => 'collection[component_ids][]'
  .field
    = f.label :title
    = f.text_field :title
  .actions
    = f.submit 'Save' 
```

**集合.rb**

```
class Collection < ActiveRecord::Base
  default_scope order('id ASC')

  attr_accessible         :style_id, 
                          :name, 
                          :title,
                          :component

  has_many                :collection_components, :dependent => :destroy
  has_many                :components, :through => :collection_components

  belongs_to              :style

  validates_presence_of   :style
  validates_presence_of   :title

  before_save             :create_name

  private

  def create_name
    self.name = title.parameterize
  end
end 
```

**组件.rb**

```
class Component < ActiveRecord::Base
  default_scope order('id ASC')

  attr_accessible         :category_id, 
                          :name, 
                          :title,
                          :collection,
                          :style

  has_many                :collection_components, :dependent => :destroy
  has_many                :collections,   :through => :collection_components

  has_many                :component_styles
  has_many                :styles,        :through => :component_styles

  belongs_to              :category

  validates_presence_of   :category
  validates_presence_of   :title

  before_save             :create_name

  private

  def create_name
    self.name = title.parameterize
  end
end 
```

**集合组件.rb**

```
class CollectionComponents < ActiveRecord::Base
  attr_accessible :collection_id, 
                  :component_id

  belongs_to      :collection
  belongs_to      :component
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:34:14.060

Rails 正在寻找一个具有该名称的类，`CollectionComponent`但您只提供了一个具有该名称的类`CollectionComponents`

# ios - 在 UITableView 中显示解析的 JSON

> ID：15874312
> 
> 赞同：0
> 
> 时间：2013-04-08T08:15:09.127
> 
> 标签：ios, json, uitableview

我有这个 UITableView，我在其中解析了来自 web 服务的数据并加载到 NSDictionary 中，它一切正常，数据显示 id 和 imageurl 到 tableview 问题是 logo-id，当我向下滚动 tableview 时，它是一个 int 完美显示但是当我向上滚动表格视图时它消失了，当我向下滚动它时它再次出现并停留在那里

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    //Where we configure the cell in each row

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell;

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    //    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    //    }
    // Configure the cell... setting the text of our cell's label

    NSDictionary *dic = [json objectAtIndex:[indexPath row]];

    NSString *strImage = [dic objectForKey:@"image-name-small"];
    NSURL *ImageURL = [NSURL URLWithString:[strImage stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    AsyncImageView *asyncImgView = [[AsyncImageView alloc] initWithFrame:CGRectMake(3, 10, 100, 100)];
    asyncImgView.contentMode = UIViewContentModeScaleAspectFit;
    asyncImgView.backgroundColor =  [UIColor clearColor];
    [asyncImgView loadImageFromURL:ImageURL];

    UILabel *lbl = [[UILabel alloc]initWithFrame:CGRectMake(200, 200, 100, 25)];
    lbl.text = [dic objectForKey:@"logo-id"];
    [cell addSubview:lbl];
    [cell addSubview:asyncImgView];
    cell.textLabel.text = @"";
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:50:18.637

如果单元格 addSubview 不起作用，请尝试以下操作：

```
[cell.contentView addSubView:lbl]; 
```

或尝试默认单元格属性：

```
cell.textLabel.text=@"sample text"; 
```

//试试这个代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath{

static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";
UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

if(cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier];
}
else
{
    for (UIView *subview in cell.contentView.subviews)
        [subview removeFromSuperview];
}

NSDictionary *dic = [json objectAtIndex:[indexPath row]];

NSString *strImage = [dic objectForKey:@"image-name-small"];
NSURL *ImageURL = [NSURL URLWithString:[strImage stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
AsyncImageView *asyncImgView = [[AsyncImageView alloc] initWithFrame:CGRectMake(3, 10, 100, 100)];
asyncImgView.contentMode = UIViewContentModeScaleAspectFit;
asyncImgView.backgroundColor =  [UIColor clearColor];
[asyncImgView loadImageFromURL:ImageURL];

UILabel *lbl = [[UILabel alloc]initWithFrame:CGRectMake(200, 200, 100, 25)];
lbl.backgroundColor=[UIColor redColor];
lbl.text = [dic objectForKey:@"logo-id"];

[cell.contentView addSubview:lbl];
[cell.contentView addSubview:asyncImgView];

return cell; 
```

}

# sql-server - 为多个表设置外键

> ID：15874313
> 
> 赞同：0
> 
> 时间：2013-04-08T08:15:13.630
> 
> 标签：sql-server, foreign-keys, sql-server-2012

我有三张表 Teachers、Student、ViewType

```
table Teachers{
  Id uniqueidentifier, 
  Name nvarchar
}

table Student{
  Id uniqueidentifier, 
  Name nvarchar
}

table ViewType{
  Id uniqueidentifier, 
  Type String
} 
```

注意：假设 ViewType 不是常规查找表的示例。
它包含有关如何在 ui 中呈现教师或学生的数据，因此不应在教师或学生表模型中。

有没有办法为两个表创建一个外键，其中一个键被强制来自并且仅来自这两个表？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:13:53.993

不适用于声明性参照完整性约束。

您必须使用触发器来实现它；并且您将在所有三个表上都需要它们（`insert`+ `update`on `ViewType`，`delete`+ `update`on 其他）。

您可以以另一种方式放置约束：

```
alter table Student add constraint FK foreign key (Id) references ViewType (Id)
alter table Teachers add constraint FK foreign key (Id) references ViewType (Id) 
```

它并不完美（您最终可能会得到一个引用相同 ID 的学生和教师，这可能是您必须处理的），但这可能是您能做的最好的事情。

# java - 使用 Xpath 的按钮位置错误？

> ID：15874317
> 
> 赞同：0
> 
> 时间：2013-04-08T08:15:21.950
> 
> 标签：java, spring, selenium

我必须使用这样的按钮测试动态应用程序：

```
 <button class="btn btn-primary btn-mini" ng-click="addAnswer(question)" ng-show="question.editing">Add Answer</button> 
```

我试图用它来定位按钮，但我失败了

```
getDriver().findElement(By.xpath("//img [@ng-click='addAnswer(question)']")).click(); 
```

使用 CSS

> List AddAnswerBtn = getDriver().findElements(By.className("btn-primary")); AddAnswerBtn.get(0).click();

找到它的正确线是什么？我不想使用类来定位它，我想使用 Xpath 来定位按钮位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:24:01.563

您的示例显示它是一个按钮，但您的 XPath 正在寻找**图像**：

```
//img[@ng-click='addAnswer(question)'] 
```

以上是您正在使用的，以**img**作为元素类型。

将此更改为`button`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:22:14.467

Xpath 有时在 chrome 浏览器中无法正常工作。使用firefox驱动找到它，如果你不确定你的xpath是否正确，使用Firepath。或者在 Chrome Xpath Helper 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T09:35:24.967

您的 xpath 指的是图像，而不是按钮。

```
getDriver().findElement(By.xpath("//img [@ng-click='addAnswer(question)']")).click(); 
```

将此更改为

```
getDriver().findElement(By.xpath("//button[@ng-click='addAnswer(question)']")).click(); 
```

# ios - Parse Framework：在 PFFacebook 登录期间出现问题了吗？即用户取消了吗？

> ID：15874319
> 
> 赞同：2
> 
> 时间：2013-04-08T08:15:33.153
> 
> 标签：ios, facebook-ios-sdk, ios-frameworks

我 在我的新项目中使用**解析框架的 PFFacebook 进行 Facebook 登录。**当我点击 Facebook 登录按钮时，它会转到**PFFacebook 登录对话框** 在这个对话框中，我插入了我的凭据，但没有按下**OK**按钮，而不是我误按了主页按钮。现在为了进入我的应用程序，我按下了 myAppIcon 按钮，但现在我的应用程序挂起。

![在此处输入图像描述](https://i.stack.imgur.com/woJ3F.png)

**在普通的 Facebook sdk 中，他们通过以下方法处理登录，我想检查相同但使用解析框架**

```
// Did something go wrong during login? I.e. did the user cancel?
    if (status == FBSessionStateClosedLoginFailed || status == FBSessionStateCreatedOpening) {

        // If so, just send them round the loop again
        [[FBSession activeSession] closeAndClearTokenInformation];
        [FBSession setActiveSession:nil];
        FB_CreateNewSession();
    }
    else 
    {
        // Update our game now we've logged in
        if (m_kGameState == kGAMESTATE_FRONTSCREEN_LOGGEDOUT) {
            UpdateView(true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T06:09:06.797

这是你想要的，检查 NSLogs 看看在每种情况下会发生什么：

```
 // Login PFUser using Facebook
    [PFFacebookUtils logInWithPermissions:permissionsArray block:^(PFUser *user, NSError *error) {
        if (!user) {
            if (!error) {
                NSLog(@"Uh oh. The user cancelled the Facebook login.");
            } else {
                NSLog(@"Uh oh. An error occurred: %@", error);
            }
        } else if (user.isNew) {
            NSLog(@"User with facebook signed up and logged in!");
        } else {
            NSLog(@"User with facebook logged in!");
        }
    }]; 
```

# moodle - Moodle 本地插件和 save_file

> ID：15874321
> 
> 赞同：1
> 
> 时间：2013-04-08T08:15:38.000
> 
> 标签：moodle

我在本地插件中创建了一个工作表单，它将数据很好地插入到我的自定义表中。

我现在想要添加的是一个文件选择器元素，它在保存表单时将文件放入指定的文件夹中。

filep[icker 本身工作正常，但是当我保存表单时没有文件出现，我使用的代码如下所示：

`$mform->save_file('lowresCh', '/my_form/', false);`

我在“my_form”位中尝试了各种方法，但无济于事。表单的其余部分仍将其数据放入自定义表中，我可以在 mdl_files 表中看到我的文件（标记为草稿）。

进行全面调试后，我会收到以下警告：

`**Warning**: copy(/my_form/): failed to open stream: Is a directory in **/...../lib/filestorage/stored_file.php** on line **390**`

我不知道我是否正确地接近它，任何正确方向的帮助或指示将不胜感激。 

哦，我已经阅读了 [在 Moodle 表单中使用文件 API](http://docs.moodle.org/dev/Using_the_File_API_in_Moodle_forms) 页面，这对让我明白我的观点很有用，但没有进一步的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:58:48.123

我通过使用文件名作为 save_file() 中的第二个参数来解决它，如果我添加一个目录，那么所有文件都将保存在我的插件中的一个完美的子目录中。

所以它现在看起来像这样：

`$mform->save_file('lowresCh', 'files/'.$mform->get_new_filename('lowresCh'), false);`

# sql - SQL 日期变量

> ID：15874322
> 
> 赞同：-3
> 
> 时间：2013-04-08T08:15:39.513
> 
> 标签：sql, sql-server

我正忙着在 SQL Server 2012 上的 SQL 中创建一个表，我想知道在创建表时如何创建一个存储日期的日期变量。

有关如何执行此操作或继续执行此操作的任何建议？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:33:31.013

您可以使用`GETDATE ( )`.

以下是它的链接。

[http://msdn.microsoft.com/en-us/library/ms188383.aspx](http://msdn.microsoft.com/en-us/library/ms188383.aspx)

```
select colname where datecol=GETDATE () 
```

此查询可能会对您有所帮助。

# distribution - 条件 AC_OUTPUT

> ID：15874325
> 
> 赞同：1
> 
> 时间：2013-04-08T08:15:44.557
> 
> 标签：distribution, autotools, autoconf

我想维护一个配置文件，该文件生成一组不同的 Makefile，这取决于给出的配置脚本的标志。更具体地说，我想`make dist`生成项目中所有目录的子集。

例如，假设我有`project/a project/b, project/c`包含 Makefile.am 的目录和所有其他必要的东西来启用使用`./autogen.sh && ./configure && make`. 现在，假设我想`project/b project/c`从分发 tarball 中省略目录。我尝试了以下方法：

```
AS_IF([test "x$for_dist" == "xyes"], 
      [CONDITIONAL_MAKEFILES=""], 
      [CONDITIONAL_MAKEFILES="b/Makefile c/Makefile"]
)

AC_OUTPUT(Makefile a/Makefile ${CONDITIONAL_MAKEFILES}) 
```

这行不通，我明白了`config.status: error: cannot find input file: b/Makefile.in`。如果我指定没有变量的输出 Makefiles，它工作正常。

任何想法如何使这项工作？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:31:32.813

我找到了解决方案-

使用`AC_CONFIG_FILES`而不是`AC_OUTPUT`实现更大的灵活性。例如，参考上面的例子：

```
AS_IF([test "x$for_dist" == "xyes"], [AC_CONFIG_FILES(b/Makefile c/Makefile)] )

AC_OUTPUT(Makefile a/Makefile) 
```

`for_dist`如果值为`yes`，这将输出三个 Makefile，否则将仅输出一个 Makefile。

# mysql - 在 mysql 中准备一个 Prepare 语句并在其中使用 convert_tz

> ID：15874330
> 
> 赞同：0
> 
> 时间：2013-04-08T08:15:48.707
> 
> 标签：mysql, prepared-statement, convert-tz

我已经写了一个这样的准备语句并且工作正常。

```
BEGIN
SET @tempaccountID :=CONCAT('\'',accountID1,'\'');
SET @tempdeviceID := CONCAT('\'',deviceID1,'\'');
SET @query :=CONCAT('select accountID, 
            deviceID, 
            FROM_UNIXTIME(timestamp) as timestamp, 
            statusCode, 
            latitude, 
            longitude, 
            speedKPH, 
            heading, 
            address, 
            odometerKM,
            Charging
            from ',(SELECT eventtableName FROM  migration_run_time WHERE accountID=accountId1 AND deviceID=deviceID1),
            ' where accountID=',@tempaccountID,
            ' and deviceID=',@tempdeviceID,
            ' and latitude!=0.0 and longitude!=0.0  and speedKPH<120 and timestamp= (select max(timestamp) from ', (SELECT eventtableName FROM  migration_run_time WHERE accountID=accountId1 AND deviceID=deviceID1) ,
                                                ' where accountID=',@tempaccountID,
                                                ' and deviceID=',@tempdeviceID,
                                                ' and latitude!=0.0  and longitude!=0.0 and speedKPH<120);');

PREPARE stmt FROM @query;
EXECUTE stmt; 
```

现在遇到大问题

我想在语句中使用 Convert_tz 来获取所需时间格式的时间，如下所示

```
convert_tz(FROM_UNIXTIME(timestamp),device.timeZone,device.requiredTimeZone) as timestamp 
```

// device是上面语句中的另一个表

如果我以上述方式编写，我必须在列名的 fromt 中为表名添加前缀，但事件表本身是在运行时根据 accountID 和 deviceID 计算的。

我应该如何处理它...

PS 我在 mysql 方面做得很差。我是一个 >net/jQuery 开发人员，对 mysql 没有任何想法。请帮忙.. ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:52:04.060

我正要回答

> 通常这样的问题是通过使用别名来解决的。在实际表名后面写另一个名称，并通过别名引用该表。

但我想我首先误解了你的问题。

如果不在 from 子句中命名，就无法从表中进行选择。你将不得不做这样的事情：

```
SET @query :=CONCAT('
select accountID, 
deviceID, 
convert_tz(FROM_UNIXTIME(timestamp),device.timeZone,device.requiredTimeZone) as timestamp
statusCode, 
latitude, 
longitude, 
speedKPH, 
heading, 
address, 
odometerKM,
Charging
from ',(SELECT eventtableName FROM  migration_run_time WHERE accountID=accountId1 AND deviceID=deviceID1),
', device
 where accountID=',@tempaccountID,
' and deviceID=',@tempdeviceID,
' and latitude!=0.0 and longitude!=0.0  and speedKPH<120 and timestamp= (select max(timestamp) from ', (SELECT eventtableName FROM  migration_run_time WHERE accountID=accountId1 AND deviceID=deviceID1) ,
' where accountID=',@tempaccountID,
' and deviceID=',@tempdeviceID,
' and latitude!=0.0  and longitude!=0.0 and speedKPH<120)
and device.deviceID=deviceID1
;'); 
```

这只是一个猜测，因为我不知道您的设备表是什么样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:37:30.017

终于找到了解决方案...我为此创建了两个变量@timeZone 和@requiredTimeZone..

谢谢@TOMBOM 的帮助...

```
DELIMITER $$

USE `hiddenFromSO`$$

DROP PROCEDURE IF EXISTS `getLastCoordinate`$$

CREATE DEFINER=`root`@`%` PROCEDURE `getLastCoordinate`(accountID1 VARCHAR(32),
                        deviceID1 VARCHAR(64))
BEGIN
    SET @tempaccountID :=CONCAT('\'',accountID1,'\'');
    SET @tempdeviceID := CONCAT('\'',deviceID1,'\'');

    SET @timeZone=CONCAT('\'',(SELECT timeZOne FROM device WHERE deviceID=deviceID1 AND accountID=accountID1 AND isActive='1'),'\'');

    SET @requiredTimeZone=CONCAT('\'',(SELECT requiredTimeZone FROM device WHERE deviceID=deviceID1 AND accountID=accountID1 AND isActive='1'),'\'');

    SET @query :=CONCAT('select accountID, 
                deviceID, 
                convert_tz(FROM_UNIXTIME(timestamp),',@timeZone,',',@requiredTimeZone,') as timestamp, 
                statusCode, 
                latitude, 
                longitude, 
                speedKPH, 
                heading, 
                address, 
                odometerKM,
                Charging
                from ',(SELECT eventtableName FROM  migration_run_time WHERE accountID=accountId1 AND deviceID=deviceID1),
                ' where accountID=',@tempaccountID,
                ' and deviceID=',@tempdeviceID,
                ' and latitude!=0.0 and longitude!=0.0  and speedKPH<120 and timestamp= (select max(timestamp) from ', (SELECT eventtableName FROM  migration_run_time WHERE accountID=accountId1 AND deviceID=deviceID1) ,
                                                    ' where accountID=',@tempaccountID,
                                                    ' and deviceID=',@tempdeviceID,
                                                    ' and latitude!=0.0  and longitude!=0.0 and speedKPH<120);');

     PREPARE stmt FROM @query;
    -- select @query;
    EXECUTE stmt;
    END$$

DELIMITER ; 
```

# python - 添加到标签时 x 像素后的新行（tkinter）

> ID：15874332
> 
> 赞同：1
> 
> 时间：2013-04-08T08:15:51.700
> 
> 标签：python, tkinter, label

目前，当我写一个标签时，它只会写一行，这有时会从标签的边缘消失，如下所示：

![标签问题](https://i.stack.imgur.com/wR9b2.png)

这是我用来写入标签的代码示例：

```
def updateLabel(self, event):
    global string
    global labelContents
    global windowCommand
    global currentEnvironment
    if event != "no input":
        windowCommand = self.getEntry(event)
        labelDisplay = "> " + windowCommand
        labelContents += labelDisplay
        labelContents += "\n"
        self.checkLabel()
        string.set(labelContents)
        self.textEntry.delete(0, END)
        self.master.after(0, play)
    else:
        self.checkLabel()
        string.set(labelContents)

labelContents += "You have died. Game over." + "\n"
labelContents += "You scored {0}.".format(score) + "\n"
app.updateLabel("no input") 
```

我想知道是否有任何方法可以在一定数量的像素（标签宽度）之后强制它换行，而不必经过并在任何地方添加“\ n”（因为最后一行是~150中的1可能性）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:32:33.663

Label 小部件有一个完美的选择：`wraplengt`.

```
label = Label(parent, text="This is a really long text; " * 5, wraplengt=200) 
```

来自[effbot.org 上的标签文档](http://effbot.org/tkinterbook/label.htm#Tkinter.Label.config-method)：

> 确定何时应将标签的文本换成多行。这以屏幕单位给出。默认值为 0（不换行）。

# database - 依赖于存在的表的测试

> ID：15874333
> 
> 赞同：1
> 
> 时间：2013-04-08T08:15:52.107
> 
> 标签：database, unit-testing, testing, tdd

单元测试假设存在数据库表是否可以接受？

例如，如果有一个 UserStore 类和关联的 UserStoreTest 测试类。假设这个类是一个系统的一部分，当安装它时，这个类需要一个名为 foo_users 的表的“实例”。那么 UserStoreTest 是否可以假设该表存在并使用它？要求 UserStoreTest 类设置表本身而不依赖于系统的状态似乎更好，这是相当全局的。前一种方法可以接受吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:30:40.297

最好的方法可能是找出一种模拟数据库的方法，而不是实际连接到真实数据库。维护数据库的模拟有一些开销，但有很多优点。

*   与真实数据库对话可能会使您的单元测试变得不必要地变慢，特别是如果您走“建立与数据库的连接，然后为每个测试设置表”路线。
*   正如我认为您已经意识到的那样，您的单元测试可能最终取决于易失性数据，这可能会对测试过程产生不利影响，因为它不受测试套件的控制。
*   单元测试可以在不访问数据库的机器上运行。这意味着您的单元测试不会意外破坏数据库或类似的东西。
*   可能还有其他一些原因

如果模拟您的数据库连接是不可行的，那么一个很好的中间立场可能是拥有一个与您的真实/生产数据库分开的测试数据库。这样，您可以避免将测试套件连接到真实数据库的担忧，同时保留对数据库的完全控制以进行测试。

# csv - 宏代码：从 CSV 文件获取数据到 excel 文件

> ID：15874343
> 
> 赞同：0
> 
> 时间：2013-04-08T08:16:27.240
> 
> 标签：csv, xls

我想为 excel,2007 创建一个宏。从 csv 文件中获取数据到 excel 文件。请与我分享代码以运行此宏。请回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:22:28.560

我真的没有看到问题。这不适合你吗？

```
Sub Macro1()
    ChDir "C:\Users\foo\documents"
    Workbooks.Open Filename:="C:\Users\foo\documents\test.csv"
End Sub 
```

# javascript - 如何将光标聚焦在表单元素上？

> ID：15874344
> 
> 赞同：1
> 
> 时间：2013-04-08T08:16:27.300
> 
> 标签：javascript

我想在空输入到表单元素后添加光标。第一个空表格在哪里。
带着这个目标，我尝试添加`this.focus();`功能`validate()`。但这并没有成功。

第二点 - 如何在浏览器出现页面后将光标设置为第一个表单元素。我尝试将此目标`onLoad();`方法用于`body`. 但这并没有成功。

**代码：**

```
<html>
    <head>
        <title>Form with check</title>
            <script>
                function validate() {
                    if(document.form1.yourname.value.length < 1) {
                        alert("Enter your name, please");
                        this.focus();
                        return false;
                    }
                    if(document.form1.adress.value.length < 3) {
                        alert("Enter your adress, please");
                        this.focus();
                        return false;
                    }
                    if(document.form1.phone.value.length < 3) {
                        alert("Enter your phone number, please");
                        this.focus();
                        return false;
                    }
                    return true;
                }
            </script>
    </head> 
        <body>
            <h1>Form with check</h1>
            <p>Input all data. When button Submit pushed data will be sent as message.</p>  
                <form name="form1" action="mailto:user@host.com" enctype="text/plain"
                onSubmit="validate();">
                    <p><b>Name:</b><input type="text" length="20" name="yourname">
                    </p>
                    <p><b>Adress:</b><input type="text" length="20" name="adress">
                    </p>
                    <p><b>Phone:</b><input type="text" length="20" name="phone">
                    </p>
                    <input type="SUBMIT" value="Submit">                    
            </form>
            onLoad();
        </body>    
</html> 
```

**问题：**

*   如何将此功能添加到表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:20:28.457

你没忘记做

```
onSubmit="return validate();" ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:20:39.950

替换`this.focus()`为`document.form1.yourname.focus();`

这是重新设计的代码：

```
<html>
    <head>
        <title>Form with check</title>
            <script>
                function validate() {
                    if(document.form1.yourname.value.length < 1) {
                        alert("Enter your name, please");
                        document.form1.yourname.focus();
                        return false;
                    }
                    if(document.form1.adress.value.length < 3) {
                        alert("Enter your adress, please");
                       document.form1.adress.focus();
                        return false;
                    }
                    if(document.form1.phone.value.length < 3) {
                        alert("Enter your phone number, please");
                        document.form1.phone.focus();
                        return false;
                    }
                    document.getElementById("ff").submit();
                    return true;

                }
            </script>
    </head> 
        <body >
            <h1>Form with check</h1>
            <p>Input all data. When button Submit pushed data will be sent as message.</p>  
                <form id="ff" name="form1" action="mailto:user@host.com" enctype="text/plain"
                >
                    <p><b>Name:</b><input type="text" length="20" name="yourname">
                    </p>
                    <p><b>Adress:</b><input type="text" length="20" name="adress">
                    </p>
                    <p><b>Phone:</b><input type="text" length="20" name="phone">
                    </p>
                    <input type="button" value="Submit" onclick="validate();">                    
            </form>

        </body>    
</html> 
```

还有工作[**演示**](http://jsfiddle.net/MD7sp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:44:22.603

```
onSubmit="validate();" 
```

在您的验证函数的上下文`this`中将是全局窗口对象。

要在函数中处理表单，根据您的代码，您可以使用`document.form1`或通过 id（或其他选择器）手动调用它，或者您可以将表单发送到函数：

```
 <script>
        function validate(sender) {
            if(sender.yourname.value.length < 1) {
                alert("Enter your name, please");
                sender.focus();
                return false;
            }
            if(sender.adress.value.length < 3) {
                alert("Enter your adress, please");
                sender.focus();
                return false;
            }
            if(sender.phone.value.length < 3) {
                alert("Enter your phone number, please");
                sender.focus();
                return false;
            }
            return true;
        }
    </script>
    <form name="form1" action="mailto:user@host.com" enctype="text/plain" onSubmit="validate(this);">
        <p>
           <b>Name:</b><input type="text" length="20" name="yourname">
        </p>
        <p>
           <b>Adress:</b><input type="text" length="20" name="adress">
        </p>
        <p>
           <b>Phone:</b><input type="text" length="20" name="phone">
        </p>
        <input type="SUBMIT" value="Submit">                    
   </form> 
```

# c# - C# MSChart：缩放间隔

> ID：15874345
> 
> 赞同：1
> 
> 时间：2013-04-08T08:16:36.850
> 
> 标签：c#, charts, zooming, mschart

我有一个 MSChart 对象，其中包括一个折线图。Y 轴代表权益的价值，X 轴代表一个 DateTime。使用组合框，用户可以更改 X 轴的间隔。例如，选择“一天”的值将强制 X 轴每天显示一个条形：

[http://i.imgur.com/pY1c2Mw.png](http://i.imgur.com/pY1c2Mw.png)

然而，这还不够。除此之外，每当用户更改 X 轴的时间刻度时，我希望图表从图表中包含的第一个点放大到它找到的 X 轴的第一个间隔标记。简单来说，我想这样做：

[http://i.imgur.com/MwTZO9c.png](http://i.imgur.com/MwTZO9c.png)

自动地。但是，我被卡住了，因为我不知道如何找到 X 轴上第一个间隔标记的“位置”。我知道我想从第一个数据点放大到间隔标记，但是当我不知道它可以有多大时，我该怎么做呢？请记住，用户可以自己更改时间刻度，因此我不能为此使用硬编码值。

我将非常感谢您能给我的任何帮助，因为到目前为止我还没有找到任何结论性的东西。

编辑：这是我到目前为止发现的。更准确地说，我正在寻找的是 X 轴主网格的第一条网格线的位置。然而，当绘制两个轴的主要网格时，它们没有被赋予一个真实的位置，或者至少那个位置不包含在一个属性中。因此，必须计算该位置 - 但是如何计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-19T08:06:33.183

定义事件触发器：

```
SelectionRangeChanged += new EventHandler<CursorEventArgs>(your_handler_function); 
```

在你的函数定义中：

```
public void your_handler_function(object sender, CursorEventArgs e)
{
    e.NewSelectionStart; // the beginning of the new range 
    e.NewSelectionEnd;   // the end of the new range
} 
```

# jquery - jQuery 拖放的最新库

> ID：15874358
> 
> 赞同：0
> 
> 时间：2013-04-08T08:17:27.193
> 
> 标签：jquery

我有一个使用拖放的网站。目前我使用

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script> 
```

需要哪些，有人可以解释一下

*   jquery.min.js
*   jquery-ui.min.js
*   jquery-ui.css （我猜它是为了设计 jQuery 函数？）

我可以使用它们的不同版本还是需要使用相同的版本。

**1.9.1** /jquery.min.js
和
**1.10.1** /jquery.min.js

目前 dropable 在 ie10 中不起作用，但我想看看 jQuery 的版本是否有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:28:29.593

[jQuery](http://jquery.com/)和[jQuery UI](http://jqueryui.com/)是两个完全不同的项目。

[jQuery](http://jquery.com/) :
jQuery 是 javascript 库，它提供了简单且与浏览器兼容的 dom 操作、traversl、ajax 等。它不依赖于 jQuery UI。

[jQuery UI](http://jqueryui.com/)：
它是一个提供丰富的用户界面工具，如日期选择器、拖放等，它依赖于 jQuery 项目。

在您的情况下，您可以毫无问题地使用 jQuery 1.9.1 和 jQuery UI 1.10.1

# java - Dining Philosopher - 最后一个线程没有正确终止

> ID：15874359
> 
> 赞同：0
> 
> 时间：2013-04-08T08:17:29.363
> 
> 标签：java, multithreading, concurrency, dining-philosopher

我写了这个餐饮哲学家的代码，但最后一个线程没有产生所需的“xxx已经完成他的晚餐”行？我做错什么了？

似乎最后一个线程过早终止。

我将不胜感激这方面的任何帮助。

```
import java.util.Random;

public class DiningPhilosophers {

    //An array holding all the chopsticks
    private final Chopstick[] chopsticks = new Chopstick[5];

    /*Constructor for the main class
    * Creates all the chopsticks 
    * Creates and starts all the threads*/
    public DiningPhilosophers(){
        putChopsticksOnTheTable();
        Thread t1 = new Thread(new Philosopher("First",this.chopsticks[4],this.chopsticks[0]));
        Thread t2 = new Thread(new Philosopher("Second",this.chopsticks[0],this.chopsticks[1]));
        Thread t3 = new Thread(new Philosopher("Third",this.chopsticks[1],this.chopsticks[2]));
        Thread t4 = new Thread(new Philosopher("Fourth",this.chopsticks[2],this.chopsticks[3]));
        Thread t5 = new Thread(new Philosopher("Fifth",this.chopsticks[3],this.chopsticks[4]));
        t1.start();
        t2.start();
        t3.start();
        t4.start();
        t5.start();

    }

    /*Initialise the chopsticks in the array*/
    private void putChopsticksOnTheTable(){
        for(int i = 0;i < chopsticks.length;i++)
        chopsticks[i]= new Chopstick(); 
    }

    public static void main(String[] args){
        new DiningPhilosophers();
    }
}

class Philosopher extends Thread{
private static final int EATING_TIME_LIMIT = 1000;
private static final int THINKING_TIME_LIMIT = 800;
private int EAT_TIMES = 5;
private final Random randomise = new Random();
private final Chopstick _leftChopstick;
private final Chopstick _rightChopstick;
private final String _name;
private State _state;

/* Enumeration class that holds 
* information about the possible 
* Philosopher's states 
*/
public enum State {
    EATING, THINKING
}

/*
* Main constructor for the Philosopher class
* @param name   the name of the Philosopher
* @param leftChopstick  the chopstick that is currently on the left of the Philosopher
* @param rightChopstick the chopstick currently on the right of the Philosopher
* 
*/
public Philosopher(String name, Chopstick leftChopstick, Chopstick rightChopstick) {

    this._leftChopstick = leftChopstick;
    this._rightChopstick = rightChopstick;
    this._name = name;

}

/*
* The method eat that uses two chopsticks. It blockes the two Chopstick
* objects so they could not be changed then it changes their state 
* as well as the state of the philosopher
* At the end of the method, the chopsticks' state is reverted and
* the Philosopher goes into the Thinking state 
*/
private void tryToEat() throws InterruptedException 
{       

     synchronized(_leftChopstick){
            while(_leftChopstick.inUse() || _rightChopstick.inUse())

                try{
                    //this.setPhilosopherState(Philosopher.State.WAITING);
                    _leftChopstick.wait();
                }catch (InterruptedException e){}
                    synchronized(_rightChopstick) {
                    try{
                        Thread.sleep(1);
                        _leftChopstick.pickUp();
                        System.out.println(_name + " picks up the left chopstick...");
                        _rightChopstick.pickUp();
                        System.out.println(_name + " picks up the right chopstick...");
                        eat();
                    }
                    finally {
                        _leftChopstick.putDown();
                        System.out.println(_name + " puts down the left chopstick...");
                        _rightChopstick.putDown(); 
                        System.out.println(_name + " puts down the right chopstick...");
                        //_leftChopstick.notify();
                        //_rightChopstick.notify();   
                    }
                    }
               }

    if(this.EAT_TIMES > 0)
            think();  

}

private void eat() throws InterruptedException
{
    setPhilosopherState(State.EATING);
    Thread.sleep(randomise.nextInt(EATING_TIME_LIMIT));        
    this.EAT_TIMES--;
    if(this.EAT_TIMES == 0)
        System.out.println("***************************" + _name + " has finished his dinner");
}

/*
* This method only changes the state 
* of the Philosopher to Thinking
*/
private void think() throws InterruptedException{
    setPhilosopherState(Philosopher.State.THINKING);
    Thread.sleep(randomise.nextInt(THINKING_TIME_LIMIT));
}

/*
* Set the current state of the Philosopher
*/
private void setPhilosopherState(State state){
    this._state = state;        

    if(_state == State.EATING)
        System.out.println ("*** " + _name + " is EATING for the " + (6 - EAT_TIMES) + " time!");
    else
        System.out.println( _name + " is THINKING...");
}

/*
* Get the current state of the Philosopher
*/
public State getPhilosopherState(){
    return _state;
}

/*
* The method is invoked with the start of the thread
* and runs the eat function for 10 times
*/
public void run(){
    while(this.EAT_TIMES > 0){
        try {
            tryToEat();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

}    

}

class Chopstick
{
   private boolean _inUse;

    /*
    * @return the current state of the chopstick
    */
    public boolean inUse(){
        return _inUse; 
    }

    /*
    * @param usedFlag the new state of the chopstick
    */
    public synchronized void pickUp()
    {           
        _inUse = true;
    }

    public void putDown()
    {
        _inUse = false;
        this.notify();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:35:33.890

这是关于为什么应该同步对所有共享可变数据的访问的很好的一课。您`Chopstick`的字段不是易失性的，但可以由多个线程通过`inUse`. 唯一没有同步被引用的地方`inUse`是

```
while (_leftChopstick.inUse() || _rightChopstick.inUse()) 
```

如果没有同步`rightChopstick.inUse()`，可能会通过数据竞争返回意外的值。结果，所有挂起的线程都卡在

```
_leftChopstick.wait(); 
```

如果你同步`inUse`，你应该让它正确完成。另外我强烈建议同步所有方法`Chopstick`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:07:00.003

在 Chopstick 类中还需要同步`pickUp()`方法，否则该值可能对其他线程不可见：

```
 public synchronized void pickUp() {
        _inUse = true;
    } 
```

或者干脆使用 AtomicBoolean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:00:46.233

没有必要打电话

```
Thread t1 = new Thread(new Philosopher(...)); 
```

您可以改为致电

```
Thread t1 = new Philosopher(...); 
```

为了确保所有线程完成它们的工作，调用它们的 .join 方法。这将在退出 DiningPhilosophers 构造函数之前等待线程终止。

```
t1.start();
....
t5.start();
t1.join();
...
t5.join(); 
```

# c++ - C/C++ SOCKET 代理

> ID：15874360
> 
> 赞同：1
> 
> 时间：2013-04-08T08:17:30.947
> 
> 标签：c++, c, sockets, proxy

目前，我实现了一个客户端和服务器应用程序，它们使用简单的 SOCKET 相互通信。像[这样](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737591%28v=vs.85%29.aspx)。

问题是一些用户不能直接访问互联网，所以他们使用代理。

如何使用 SOCKET 通过代理（例如默认 IE 代理）进行通信，或者还有其他可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:37:23.307

首先，有不同类型的代理和这些代理使用的不同类型的协议。有 HTTP 代理、SOCKS 代理、隧道代理等。因此，首先您需要确定要在代码中支持的代理类型，然后根据需要实现这些协议中的每一个。

一般来说，`connect()`客户端不会直接连接到所需的服务器，`connect()`而是会连接到代理服务器并指示它使用代理使用的任何协议连接到服务器。一旦建立了该连接，客户端和服务器代码的其余部分将照常处理数据，`send()`并且`recv()`代理将透明地来回交换数据。

# android - 安卓电视盒体验。

> ID：15874364
> 
> 赞同：2
> 
> 时间：2013-04-08T08:17:52.473
> 
> 标签：android, television

我需要开发 Android TV-Box（使用电视作为屏幕的 Android 设备）应用程序。

有人做过吗？我找不到一个很好的例子来理解这种交互的所有复杂性。也许你能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:21:12.087

据我所知，唯一的区别是您将有不同的输入外围设备。你没有触摸屏，没有键盘。相反，您将拥有蓝牙和网络连接。用户界面与移动设备相同。

当然，你不会有 ScreenOrientationChange :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:36:21.233

如果您正在谈论 IP TV-BOX，那么如果您的流媒体解决方案不是那么复杂，那么 Android 是一个不错的选择。

如果你打算用 Android 做 DVB TV-BOX，你必须考虑更多像 CA、DVB 调谐器、DVB 播放器等。

# c# - 无法加载文件或程序集“System.Web.Razor”或其依赖项之一

> ID：15874366
> 
> 赞同：26
> 
> 时间：2013-04-08T08:18:00.247
> 
> 标签：c#, asp.net, asp.net-mvc, deployment, umbraco

我在我的网站（Web 应用程序）中使用了 Umbraco 4.11.6。我的网站在 localhost 中运行（从 Visual Studio 2012 和 IIS(v7) 测试）但是当我从 Internet 空间运行它时出现错误。错误是：

## 无法加载文件或程序集“System.Web.Razor”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

> 程序集加载跟踪：以下信息有助于确定无法加载程序集“System.Web.Razor”的原因。
> 
> **警告：**程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。

堆栈跟踪：

> > [FileLoadException：无法加载文件或程序集“System.Web.Razor”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）]
> 
> [FileLoadException：无法加载文件或程序集“System.Web.Razor，版本=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）] System.Reflection.RuntimeAssembly._nLoad（AssemblyName 文件名，字符串 codeBase，证据 assemblySecurity，RuntimeAssembly locationHint，StackCrawlMark 和 stackMark，IntPtr pPrivHostBinder，布尔 throwOnFileNotFound，布尔 forIntrospection，布尔suppressSecurityChecks）+0
> System.Reflection.RuntimeAssembly.InternalLoadAssemblyName（AssemblyName assemblyRef，证据 assemblySecurity，RuntimeAssembly reqAssembly，StackCrawlMark 和 stackMark，IntPtr pPrivHostBinder，布尔 throwOnFileNotFound，Boolean for Introspection，Boolean suppressSecurityChecks）+210
> System.Reflection.RuntimeAssembly.InternalLoad（String assemblyString，Evidence assemblySecurity，StackCrawlMarkString , IntPtr pPrivHostBinder, Boolean for Introspection) +242
> System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +17 System.Reflection.Assembly.Load(String assemblyString) +35
> System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +122
> 
> [ConfigurationErrorsException：无法加载文件或程序集“System.Web.Razor，版本=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）]
> System.Web.Configuration.CompilationSection.LoadAssemblyHelper（字符串 assemblyName，布尔型 starDirective）+12761078
> System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +503 System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +142 System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +334
> System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +203
> System.Web.Compilation.BuildManager.ExecutePreAppStart() +152
> System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, 异常 appDomainCreationException) +1151
> 
> [HttpException (0x80004005): 无法加载文件或程序集“System.Web.Razor，版本=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）]
> System.Web.HttpRuntime.FirstRequestInit（HttpContext 上下文）+12881540 System.Web.HttpRuntime.EnsureFirstRequestInit（HttpContext 上下文）+159 System.Web.HttpRuntime.ProcessRequestNotificationPrivate（IIS7WorkerRequest wr，HttpContext 上下文）+12722601
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

WebConfig 的一部分：

```
<runtime>
<!-- Old asp.net ajax assembly bindings -->
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="4.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="4.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
  </dependentAssembly>
</assemblyBinding> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T20:06:44.940

有很多方法可以解决这个问题：

1.  在 Web 服务器上安装 MVC（这并不总是可行的）。

2.  在 Visual Studio 中，您可以将 dll 设置为在构建时复制到本地，请参阅以下文章（请注意 MVC dll 的名称略有更改，但它为您提供了流程） [http://haacked.com/archive/2008/11/03/ bin-部署-aspnetmvc.aspx](http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx)

3.  将适当的 dll 从您的 GAC 复制到 umbraco 站点的 bin 文件夹中。为此，请在资源管理器中打开“%windir%\Microsoft.NET\assembly\GAC_MSIL”，您将找到 GAC 中安装的所有 dll，您可以将相应的版本复制到您的项目中。这与上述方法类似，但绕过了构建项目。

就文件而言，您可能需要的不仅仅是 System.Web.Razor.dll，但这适用于所有丢失的文件。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-01-03T14:36:16.027

重新安装包[Microsoft.AspNet.Razor ，就像](https://www.nuget.org/packages/Microsoft.AspNet.Razor/2.0.20710)[发布](https://stackoverflow.com/a/37718456/553029)的 ADreNaLiNe-DJ 一样。最好的方法是使用`Update-Package`命令，因为该`Install-Package`命令不提供强制重新安装的选项，请参阅[文档](https://docs.microsoft.com/en-us/nuget/consume-packages/reinstalling-and-updating-packages)。

```
PM> Update-Package Microsoft.AspNet.Razor -reinstall 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-09T06:33:55.833

这些解决方案都没有帮助我：要么是因为我无法在服务器上安装任何东西，要么是因为我不喜欢在不使用 Nuget 的情况下直接包含 dll。

我使用的解决方案是安装/重新安装名为**[Microsoft.AspNet.Razor 的 nuget 包（Microsoft ASP.Net Razor 2.0.20710）](https://www.nuget.org/packages/Microsoft.AspNet.Razor/2.0.20710)**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-13T11:07:59.243

1.  删除 Nuget 清除“临时”文件夹。
2.  从项目源中删除 Nuget 包，然后使用包管理器重新安装 Nuget 包。
3.  删除 bin 文件夹。
4.  清理项目和构建项目。
5.  运行项目。

完毕

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-03T12:10:44.653

我不想安装visual studio和开发环境，所以我在Windows server 2016机器上安装了AspNetMVC4Setup.exe，它解决了这个问题。安装程序是从 Microsoft 网站下载的。

[![AspNetMVC4Setup.exe 文件的属性](https://i.stack.imgur.com/yiQj1.png)](https://i.stack.imgur.com/yiQj1.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-03T14:56:57.797

[这个链接](https://support.episerver.com/hc/en-us/articles/115003220552-Could-not-load-file-or-assembly-System-Web-Razor-or-one-of-its-dependencies-)上的答案对我有用：

打开包管理器控制台
工具 > NuGet 包管理器 > 包管理器控制台
将包源更改为 Microsoft 和 .Net。
将项目更改为您正在调试的项目。
运行以下命令。
更新包 Microsoft.AspNet.Mvc -重新安装

# javascript - javascript中的经典继承实现

> ID：15874375
> 
> 赞同：0
> 
> 时间：2013-04-08T08:18:22.833
> 
> 标签：javascript

我想要做的是从and继承`id`and并覆盖. 我想知道这是否是在 JavaScript 中实现继承的标准方法。`name``TField``render``TField`

```
var TField=function(jData)
{
   this.id=jData.id;
   this.name=jData.name;
   this.attributes=jData.attributes;
   this.render=function(){
      alert('TField render.');
   };
};

var TChildField=function(jData)
{
    var t= new TField(jData);
    t.render=function(){
       alert('TChildField render.');
    }
    return t;
}

var tobj={id:"1",name:"test",attribute:{}};

var c= new TChildField(tobj);
alert(c.id);
alert(c.name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:33:39.663

这更像是装饰器模式继承。但它的工作如你所料，只需调用`c.render()`. 要进行经典的原型继承，只需指定`TField`为`TChildField`. 查看[了解 JavaScript 中的原型继承](https://stackoverflow.com/questions/892595/javascript-prototypal-inheritance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:34:55.327

`render`首先，从构造函数中删除定义并将其直接添加到原型中可能是一个好主意：

```
TField.prototype.render=function(){
      alert('TField render.');
}; 
```

其次，要设置构造函数的继承，请使用：

```
var TChildField=function(jData)
{
    TField.call(this,jData)
} 
```

然后，链接两个原型

```
TChildField.prototype=Object.create(TField.prototype) 
```

最后，覆盖`render()`为`TChildField`

```
TChildField.prototype.render=function(){
      alert('TChildField render.');
};

var TField=function(jData)
{
   this.id=jData.id;
   this.name=jData.name;
   this.attributes=jData.attributes;

};

TField.prototype.render=function(){
      alert('TField render.');
};

var TChildField=function(jData)
{
    TField.call(this,jData)
}

var tobj={id:"1",name:"test",attribute:{}};
TChildField.prototype=Object.create(TField.prototype)
TChildField.prototype.render=function(){
      alert('TChildField render.');
};
var c= new TChildField(tobj);
alert(c.id);
alert(c.name); 
```

# sql - 条件问题的sql中的额外空间

> ID：15874377
> 
> 赞同：1
> 
> 时间：2013-04-08T08:18:28.110
> 
> 标签：sql, sql-server-2008

我`SQL Server 2008 r2`在执行选择命令时正在使用并遇到问题。请查看我的表的结构（所有列的数据类型都是 nvarchar）：

```
employee  id      fname   lname
--------------------------------
abcdef    12345   Amit    Sharma
abcdeg    12346   Amit    Shar 
```

当我尝试使用以下命令查询时

```
select * 
from userinfo 
where employee = 'abcdef   ' and id = '12345    ' 
```

它仍然给了我结果。

我无法确定问题所在。

请建议我可以做的任何事情来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:33:31.050

您有一个有效的观点，但根据 SQL 标准，您可以阅读[此链接](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/string-comparison-functions.html)以了解**=**和**LIKE**的区别，也可以[按照](https://stackoverflow.com/questions/1504990/whats-the-difference-between-like-and-in-sql)Milan Babuškov 对 SO 的回答希望它有所帮助

# java - java.awt.Image getWidth 和 getHeight 方法不能正常工作？

> ID：15874379
> 
> 赞同：1
> 
> 时间：2013-04-08T08:18:37.087
> 
> 标签：java, image, height, width

我正在尝试显示恰好是 Image 类实例的图像（[http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html)）。我需要有一个 BufferedImage 并且我找到了一段代码可以很好地实现这个目的（使用图形）。但是要创建 BufferedImage 我需要知道图像的宽度和高度。Image 类确实有 getWidth 和 getHeight 方法，但它们似乎并非一直都能正常工作。使用调试我发现有时宽度和高度设置为-1。我还发现实际上调用 getWidth 和 getHeight 方法会“更新”宽度和高度值，因此之后高度和宽度具有正确的值。所以我在调用 getWidth 和 getHeight 之前添加了一个假的“image.getWidth(null)”，并得到了正确的值。当我在调试模式下逐步执行此操作时效果很好，但是当我正常运行时它不再有效。我添加了一个“Thread.sleep(5);

这种行为很奇怪，也许有人会有解释和/或方法让它在没有那个睡眠技巧的情况下工作？

编辑：这是加载图像的方式：

```
URL url = "path/to/img";
Image img = Toolkit.getDefaultToolkit().getImage(url); 
```

我假设对此代码具有只读访问权限，这就是为什么我想从那里开始获取我的 BufferedImage。

我添加的是

```
image.getWidth(null); // "Fake" call to force the image to update his width&height
try {
Thread.sleep(5);
} catch...
if(image.getWidth(null) != -1 && image.getHeight(null) != -1) {
BufferedImage bi = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
Graphics bg = bi.getGraphics();
bg.drawImage(image, 0, 0 null);
bg.dispose();
} 
```

如果我删除睡眠，getWidth 似乎“没有时间”完成，并且对于某些图像，我仍然有宽度/高度 = -1。一些用于计算维度的方法可能是异步的。我知道 ImageIO.read() 是一种更简单、更有效的方法，但我仍然想找到一种解决方法来完成这项工作:)

如果不可能，我会找到另一种方法，这实际上没什么大不了的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:56:21.357

也许图像还没有完全加载。尝试添加 a [`MediaTracker`](http://docs.oracle.com/javase/6/docs/api/java/awt/MediaTracker.html)，将图像添加到跟踪器并等待图像完全加载（使用`waitForAll`或`waitForID`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T13:20:37.177

等待图像完全加载的一种粗略但有效的方法是[`ImageIcon`](http://docs.oracle.com/javase/8/docs/api/javax/swing/ImageIcon.html)用它构建一个。在图像完全加载之前，构造函数不会返回。IE，

```
new javax.swing.ImageIcon(image); // force image to load 
```

# microsoft-metro - winJS listview 导航错误

> ID：15874385
> 
> 赞同：1
> 
> 时间：2013-04-08T08:19:05.210
> 
> 标签：microsoft-metro, winjs

## winJS listview 导航错误

嗨，我正在开发一个 WinJS 应用程序。我正在使用 listview 列出数据。如果我在完成数据加载之前导航到另一个页面，它会显示诸如 ListView 未定义之类的错误。如何解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:04:06.630

在进入下一页之前需要取消工作人员（承诺）。像这样的东西：

```
unload: function unload()
{
    if (this._loadPromise)
        this._loadPromise.cancel();
},
loadListData: function load()
{
    this._loadPromise = WinJS.xhr(..).then(function onxhrcomplete(req)
    {
        ...
    }).then(null, function onerror(error)
    {
        if (error.message == 'Canceled')
            return;

        // do error handling like showing message box or throw an error object
    });
} 
```

# vb.net - VB.NET 我想在没有浏览器控制的情况下登录网站

> ID：15874387
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:19:12.777
> 
> 标签：vb.net

通常我使用 webbrowser 控件在 VB.NET 中登录网站

例如 WebBrowser1.Document.GetElementById("username").SetAttribute("value", TextBox1.Text) WebBrowser1.Document.GetElementById("password").SetAttribute("value", TextBox2.Text) WebBrowser1.Document.GetElementById(" .login").InvokeMember("点击")

如果我不使用 webbrowser 控件登录，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:22:56.000

您将需要构建自己的 Http 请求。

看看[HttpWebRequest 类](http://msdn.microsoft.com/fr-fr/library/system.net.httpwebrequest.aspx)

# jquery - 不能调用 $function()

> ID：15874391
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:19:17.903
> 
> 标签：jquery

我有轮播图像插件，就像在 iTunes 中一样。
我不知道为什么这不起作用。

我认为我的问题可能是我调用以下函数的方式：

```
<script type="text/javascript">
    $(function() {

        alert();

        var $coverflowContainer = $('#coverflow'),
            $coverflowItems = $coverflowContainer.children(),
            $imageCaption = $('#imageCaption'),
            $slider = $('#slider-vertical'),
            $playlistItems = $('#playlist li');

        $slider.slider({
            orientation: 'vertical',
            min: 0,
            max: $coverflowItems.length - 1,
            slide: function(event, ui) {
                $coverflowContainer.coverflow('select', ui.value);
            }
        });

        $coverflowContainer.coverflow({
            select: function(ev, ui) {
                $imageCaption.text(
                ui.active.data('artist') + ' - ' + ui.active.data('album'));

                $slider.slider('value', ui.index);

                $playlistItems.removeClass('ui-selected');
                $playlistItems.eq(ui.index).addClass('ui-selected');
            }
        });

        $playlistItems.on('click', function(ev) {
            ev.preventDefault();

            $coverflowContainer.coverflow('select', $playlistItems.index($(this)));
        });
    });
</script> 
```

这是链接：

```
<a href="#">Kings Of Leon - Come Around Sunshine</a> 
```

为什么链接没有触发`alert()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:31:07.877

原因是您设置的代码位于`$(document).ready(function(){})`事件处理程序中（在您的情况下缩短为`$(function(){})`），而不是任何单击处理程序。

更改您的代码以响应任何链接：

```
$('a').on('click',function(){}); 
```

或者更有可能是特定类别的链接：

```
$('a.songlink').on('click',function(){});

<a href="#" class="songlink">Kings Of Leon - Come Around Sunshine</a> 
```

# haskell - 在haskell中制作一个类似网格的数据类型

> ID：15874398
> 
> 赞同：13
> 
> 时间：2013-04-08T08:19:46.887
> 
> 标签：haskell, lookup, algebraic-data-types, zipper

### 问题

一段时间以来，我一直想知道如何有效地完成这项工作，但由于某种原因，我一直无法做到。我需要建模一个矩形网格，其中每个字段都包含一些数据。

我需要通过拉链访问它，我的焦点是一个字段（可以说是值）。拉链应支持、和动作`goDown`，每个动作将焦点更改为指定方向上的字段，以及，这应返回当前处于焦点下的字段的值。`goUp``goLeft``goRight``here`

虽然这可以用 a 来完成，但从某种意义上说，它是低效的，因为 a 具有对数查找时间`Map`，因此改变焦点需要`log n`时间，因为 a具有对数查找时间。`n``Map``Map`

我需要指示的行动及时工作`O(1)`。

### 例子

为便于说明，请查看下面的矩阵。括号内的数字是当前焦点。

```
1 (2) 3
4  5  6
7  8  9 
```

如果我申请`goRight`，我应该得到：

```
1  2 (3)
4  5  6
7  8  9 
```

如果我`here`现在申请，返回的值应该是`3`.

### 问题

上面解释的表单上的数据类型在 haskell 中的外观如何？它可以作为代数数据类型实现吗？

请记住，在所有四个方向上的焦点变化都应该及时可行`O(1)`，以及读取当前焦点的值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T04:39:54.187

好的，我很失望没有其他人对这个问题给出“正确”的答案，因为我知道它存在，但我无法很好地解释它。我的答案基于[http://blog.sigfpe.com/2006/12/evalating-cellular-automata-is.html](http://blog.sigfpe.com/2006/12/evaluating-cellular-automata-is.html)

首先，一个标准，即一维拉链可以是：

```
Data U x = U [x] x [x] 
```

第一个元素是所有元素“左”焦点的反向列表，然后是焦点元素，然后是所有元素“右”焦点的列表。例如：

```
U [-1,-2,-3] 0 [1,2,3] 
```

然后我们可以左右移动拉链。当我们跑出网格边缘时，您必须决定要做什么。原始帖子只是假设了一个无限网格，因此将角落案例留给读者作为练习。

```
left  (U (a:as) x zs) = U as a (x:zs)
right (U as x (z:zs)) = U (x:as) z zs 
```

现在所有看起来像容器的东西都应该是 Functor，所以：

```
instance Functor U where
  fmap f (U a x z) = U (map f a) (f x) (map f z) 
```

在这一点上，我真的希望其他人能够解释我将要做什么以及为什么。我将创建`U`一个`Control.Comonad`. 我能解释的最好的就是comonads是一种由内而外的monads。Comonads不是给你一个元素并要求你创建一个具有新值的容器`(>>= :: Monad m => m a -> (a -> m b) -> m b)`，而是给你整个结构，只要求属于焦点的值：`(=>>) :: Comonad w=>w a -> (w a -> b) -> w`

所以使用 comonad-3.0.2 包中 Control.Comonad 的条款：

```
Instance Comonad U where
  -- extract :: U a -> a   -- called coreturn in the post
  extract (U _ x _) = x

  -- duplicate :: U a -> U (U a)  -- called cojoin in the post
  duplicate x = U (tail $ iterate left x) x (tail $ iterate right x) 
```

duplicate 为您提供一个 Zipper of Zipper，每个 Zipper 向左或向右移动一个元素，然后是最后一个元素。这似乎是一个巨大的内存量，但 Haskell 是懒惰的，实际的内存占用非常小，如果你根本不环顾四周，整个集合的 O(n) 和 O(1) 的数量级。

但这只是一个维度。再次由于我不够聪明的原因，无法解释将其扩展到二维 id 很容易：

```
data U2 x = U2 (U(U x))

instance Functor U2 where
  fmap f (U2 y) = U2 $ fmap (fmap f) y

instance Comonad U2 where
  extract (U2 y) = extract (extract y)
  duplicate (U2 y) = fmap U2 $ U2 $ roll $ role y where
    iterate' f = tail . iterate f
    role x = U (iterate' (fmap left) x) x (iterate' (fmap right) x) 
```

复制功能现在创建了一个网格，每个网格都进行了适当的移动。所以

```
goLeft  u = let (U _ (U x _ _) _) = duplicate u in x
goRight u = let (U _ (U _ _ x) _) = duplicate u in x
goUp      = left  . duplicate
goDown    = right . duplicate
here      = extract 
```

因为 Haskell 是惰性的，所有这些都是 O(1) 函数。更有趣的是，您可以更改`here`时间和内存的 O(1) 成本，并在计算中使用邻域单元。这使得实现像元`game of life`胞自动机一样简单

```
rule  (U2 (U
      (U (u0:_) u1 (u2:_):_)
      (U (u3:_) u4 (u5:_))
      (U (u6:_) u7 (u8:_):_))) =
         let n = length $ filter id [u0,u1,u2,u3,u5,u6,u7,u8] in
           u4 && (n==2 || n==3) || (not u4) && n==3

-- assume u is the original graph each step is
step u = u =>> rule 
```

除了上面的博客文章，我建议在 Google 上搜索 Comonad 以了解更多信息，特别是因为我不擅长解释这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:26:34.327

这可能不是您要问的，但我想先听听为什么要提出更好的答案。

```
data GridWithZipper a = GridWithZipper { grid :: [[a]]
                                       , gwzx :: Int
                                       , gwzy :: Int
                                       }

goLeft  gwz = gwz { gwzx = gwzx gwz - 1 }
goRight gwz = gwz { gwzx = gwzx gwz + 1 }
goUp    gwz = gwz { gwzy = gwzy gwz - 1 }
goDown  gwz = gwz { gwzy = gwzx gwz + 1 }

get gwz = grid gwz !! gwzx gwz !! gwzy gwz 
```

~~所有的操作都很明显`O(1)`。~~

然而，所有的`go`操作都是`O(1)`，获取和设置`O(sqrt(n))`。

# asp.net - ASP.NET 在 Javascript 中获取 Gridview 标签文本

> ID：15874400
> 
> 赞同：0
> 
> 时间：2013-04-08T08:20:02.030
> 
> 标签：asp.net, gridview

我的网格中有多个行数小时。我有一个相同的通用标签`lblFromTime`。
我需要从 javascript 中获取每一行中绑定的标签文本。
有人可以给我一个解决方案吗？

我尝试了以下代码，但它没有返回文本。

```
var gvRowCount = ('<%= gvTimeSlots.Rows.Count%>');
for (i = 0; i <= gvRowCount; i++) 
{
    var fromTime = document.getElementById('ContentHead_MainContent_gvTimeSlots_lblFromTime_i');
    alert(fromTime.value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:46:41.007

I tried out a sample like this

**ASPX Code**

```
<asp:GridView ID="gv" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField HeaderText="check">
            <ItemTemplate>
                <asp:Label ID="lbl" runat="server" Text='<%#Eval("iso") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
   </Columns> 
```

the `Gridview` generated the following HTML -

```
<table cellspacing="0" rules="all" border="1" id="gv" style="border-collapse:collapse;">
    <tr>
        <th scope="col">check</th>
    </tr>
    <tr>
        <td>
            <span id="gv_ctl02_lbl">ab</span>
        </td>
    </tr>
    <tr>
        <td>
            <span id="gv_ctl03_lbl">ab</span>
        </td>
    </tr>
    <tr>
        <td>
            <span id="gv_ctl04_lbl">ab</span>
        </td>
    </tr>
</table> 
```

as you can see for my case the span id started from 2.

so i tried the following javascript

```
for(i=2;i<5;i++) console.log(document.getElementById('gv_ctl0'+i+'_lbl').innerHTML); 
```

and the result was

```
ab
ab
ab 
```

I tried it out in chrome and firefox(firebug). both are working fine.

# ios - NSXMLParserDelegate 没有响应

> ID：15874403
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:20:16.123
> 
> 标签：ios, objective-c, xcode

我正在尝试使用[http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)中描述的方法在 Objective-C 中开发 XML 解析器。

我已经编写了整个流程，但是委托回调方法只是没有响应！

请查看以下代码块，如果您能找出任何错误/错误，请告诉我...

解析器从以下位置调用：

```
NSString* filePath = [[NSBundle mainBundle] pathForResource:@"cache" ofType:@"xml"];
NSLog(@"Path location is : %@",filePath);
NSData* xmlData = [NSData dataWithContentsOfFile:[NSURL URLWithString:filePath]];
NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlData];

if(nsXmlParser!=NULL)
{
     NSLog(@"parser is %@",nsXmlParser);
}

 HDDataXML *parser = [[HDDataXML alloc] initXMLParser];

[nsXmlParser setDelegate:parser];

BOOL success = [nsXmlParser parse];

// test the result
if (success)
{
    NSLog(@"No errors - effects count : i");
} else
{
    NSLog(@"Error parsing document!");
} 
```

我在这里看到的是*错误解析文档！**filePath*变量正常，解析器不为空。

现在，在委托的 .h 文件中：

```
#import <Foundation/NSObject.h>
#import "EffectsCache.h"

@class EffectsCache;

@interface HDDataXML : NSObject<NSXMLParserDelegate>
{

  EffectsCache *effectsHandler;
  NSMutableString *currentElementValue;
  NSMutableArray *effects;
}

- (void)parser:(NSXMLParser *)parser
didStartElement:(NSString *)elementName
   namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict;

 - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string ;

- (void)parser:(NSXMLParser *)parser
  didEndElement:(NSString *)elementName
   namespaceURI:(NSString *)namespaceURI
  qualifiedName:(NSString *)qName;

 - (HDDataXML *) initXMLParser;
  @property (nonatomic, retain) EffectsCache *effectsHandler;
  @property (nonatomic, retain) NSMutableArray *effects;
  @end 
```

而在.m中的委托实现中：

```
 #import "HDDataXML.h"

@implementation HDDataXML
@synthesize effects, effectsHandler;

- (HDDataXML *) initXMLParser
{
    [super init];
    effects = [[NSMutableArray alloc] init];
    return self;
}
 - (void)parser:(NSXMLParser *)parser
 didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict
{
    NSLog(@"started parsing");

   if ([elementName isEqualToString:@"effects"]) {
       NSLog(@"effects element found – create a new instance of EffectsCache class...");
       effectsHandler = [[EffectsCache alloc] init];

    }
}

  - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
   {
      NSLog(@"mid parsing");
   if (!currentElementValue)
    {

       currentElementValue = [[NSMutableString alloc] initWithString:string];
    }
else
{
    [currentElementValue appendString:string];
}

   NSLog(@"Processing value for : %@", string);
}

 - (void)parser:(NSXMLParser *)parser
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
qualifiedName:(NSString *)qName
{

  NSLog(@"done parsing");

 if ([elementName isEqualToString:@"effects"])
  {
       return;
   }

   if ([elementName isEqualToString:@"effect"])
  {
     [effectsHandler addObject:effects];
     [effectsHandler release];
      effectsHandler = nil;
   }  
  else
   {
      NSLog(@"cuurent value - %@",currentElementValue);
     [effects setValue:currentElementValue forKey:elementName];
   }

   [currentElementValue release];
   currentElementValue = nil;
 } 
```

关键是，回调方法不起作用。

请帮我找出错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:12:07.553

好的......我终于解决了：

正如 Martin R 所建议的，我更改了调用委托的代码：

```
NSString* filePath = [[NSBundle mainBundle] pathForResource:@"effects_cache" ofType:@"xml"];
NSLog(@"Path location is : %@",filePath);
NSData* xmlData = [NSData dataWithContentsOfFile:filePath];
NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithData:xmlData]; 
```

在进行此修改之前，*xmlData*为空。

还需要进行另一项小修改：更改：[effectsHandler addObject:effects];

至

```
 [effects setValue:currentElementValue forKey:elementName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:33:11.400

```
 nsXmlParser.delegate = self;
 [nsXmlParser parse]; 
```

并且不要忘记在 .h 文件中调用`delegate`

```
 <NSXMLParserDelegate> 
```

# android - 如何让PhoneGap应用的背景透明并显示当前系统壁纸

> ID：15874415
> 
> 赞同：0
> 
> 时间：2013-04-08T08:20:54.757
> 
> 标签：android, cordova

我做过的事情：

1.设置主要活动的主题

```
android:theme="@android:style/Theme.Wallpaper.NoTitleBar" 
```

2.设置phoneGap创建的webview的背景

```
appView.setBackgroundColor(Color.TRANSPARENT); 
```

3.设置body和html标签的背景

```
html,
body{
    background-color: transparent;
} 
```

但是，我的应用程序仍然有黑色背景，为什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:33:50.827

```
@Override
public void onCreate(Bundle savedInstanceState)
{   
    super.setIntegerProperty("backgroundColor", Color.TRANSPARENT);
    ...
} 
```

# samsung-smart-tv - 在三星 SmartTV 应用程序中显示电视节目

> ID：15874420
> 
> 赞同：2
> 
> 时间：2013-04-08T08:21:09.847
> 
> 标签：samsung-smart-tv, television, smart-tv

我正在考虑三星 SmartTV 的应用程序，除了其他信息外，它还显示当前正在运行的电视节目。由于我还没有找到任何有关在应用程序内访问和显示电视节目的文档，我想知道这是否可能。有没有人进一步的信息？

谢谢，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:52:30.143

是的，可以在 SmartTv 应用程序中显示电视信号。可以在此处找到执行此操作的指南：http: [//www.samsungdforum.com/Guide/tec00103/index.html](http://www.samsungdforum.com/Guide/tec00103/index.html)

但是，请确保您阅读了该指南末尾的说明。混合电视信号和应用内容需要广播公司的批准，这可能导致您的应用仅针对特定电视频道锁定。股票代码应用程序也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T07:02:50.693

请注意，在欧盟，您甚至无法通过电视应用程序内容覆盖已播放频道的部分屏幕 -> 此类应用程序不会得到电视供应商的批准，除非它仅适用于您必须有协议的特定频道- 但这通常是 HbbTV 的更多任务......

该规定非常有限 - 因为否则您可以在网球或足球比赛期间将漂亮的天气或体育博彩小部件覆盖在屏幕上。但是，我不确定其他市场（例如中东和北非或拉丁美洲）是否存在类似限制。

BR

不锈钢

www.mautilus.com/blog

# php - 找出同一行中与 2 天相同的数对

> ID：15874423
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:21:17.337
> 
> 标签：php, mysql

```
1|24-jan-11|n1|89|17|81|6|40
2|24-jan-11|n1|21|15|42|67|11
3|24-jan-11|n1|31|17|45|70|69
4|24-jan-11|n1|74|88|47|56|14

5|28-jan-11|n2|31|25|75|37|84
6|28-jan-11|n2|15|4|20|34|68
7|28-jan-11|n2|19|15|81|14|67
8|28-jan-11|n2|47|17|15|71|14 
```

我有一个 MySQL 表，其中包含每天的数字数组（*上面显示了 2011 年 1 月 24 日和 2011 年 1 月 28 日的数字*）。每个数字是 之间的任何数字`1 and 90`。我需要在同一行中找到与 2 天相同的数对。

**例如：**

```
row #2 (January 24, 2011) contains 15 and 67
row #7 (January 28, 2011) also contains 15 and 67

row #4 (January 24, 2011) contains 47 and 14
row #8 (January 28, 2011) also contains 47 and 14 
```

**该脚本应返回：**

```
"15" and "67" in the row "2" and "7"
"47" and "14" in the row "4" and "8" 
```

我的解决方案是使用 PHP 循环解析表中的所有数字。问题是这会花费很多时间并且服务器会崩溃。

是否有任何数学公式或快速 PHP/mySQL 函数可以用来完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:44:35.753

Solved it in pure SQL just for fun, it's up to you to decide if it's performant enough :)

Test data:

```
CREATE TABLE yourTable
    (`id` int, `date` varchar(9), `col1` varchar(2), `col2` int, `col3` int, `col4` int, `col5` int, `col6` int)
;

INSERT INTO yourTable
    (`id`, `date`, `col1`, `col2`, `col3`, `col4`, `col5`, `col6`)
VALUES
    (1, '24-jan-11', 'n1', 89, 17, 81, 6, 40),
    (2, '24-jan-11', 'n1', 21, 15, 42, 67, 11),
    (3, '24-jan-11', 'n1', 31, 17, 45, 70, 69),
    (4, '24-jan-11', 'n1', 74, 88, 47, 56, 14),
    (5, '28-jan-11', 'n2', 31, 25, 75, 37, 84),
    (6, '28-jan-11', 'n2', 15, 4, 20, 34, 68),
    (7, '28-jan-11', 'n2', 19, 15, 81, 14, 67),
    (8, '28-jan-11', 'n2', 47, 17, 15, 71, 14)
; 
```

And here it comes:

```
select
yt1.id, yt2.id,
case when yt1.col2 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6) then yt1.col2 else null end c1,
case when yt1.col3 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6) then yt1.col3 else null end c2,
case when yt1.col4 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6) then yt1.col4 else null end c3,
case when yt1.col5 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6) then yt1.col5 else null end c4,
case when yt1.col6 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6) then yt1.col6 else null end c5
from
yourTable yt1
,yourTable yt2 
where
yt1.date = '24-jan-11'
and yt2.date = '28-jan-11'
and
(
yt1.col2 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6)
or yt1.col3 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6)
or yt1.col4 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6)
or yt1.col5 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6)
or yt1.col6 in (yt2.col2, yt2.col3, yt2.col4, yt2.col5, yt2.col6)
)
having 
case when c1 is null then 0 else 1 end 
+ case when c2 is null then 0 else 1 end 
+ case when c3 is null then 0 else 1 end 
+ case when c4 is null then 0 else 1 end 
+ case when c5 is null then 0 else 1 end 
>= 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:09:11.520

它的纯 SQL 版本。就像 tombom，为了好玩。

这是假设您的数据在原始帖子建议的单个管道分隔字段中。

这是一条 SQL，它依赖于一个额外的整数表（称为整数，1 列称为 i，10 行的值从 0 到 9）：-

```
SELECT DISTINCT SubA.TheDate, SubB.TheDate, SubA.TheRowNum, SubB.TheRowNum, SubA.aDelimitedSection, SubB.aDelimitedSection, SubC.aDelimitedSection, SubD.aDelimitedSection,
CONCAT('"', SubA.aDelimitedSection, '" and "', SubC.aDelimitedSection, '" in the row "', SubA.TheRowNum, '" and "', SubB.TheRowNum, '"')
FROM (SELECT SUBSTRING_INDEX(SomeField, '|', 1) TheRowNum, SUBSTRING_INDEX(SUBSTRING_INDEX(SomeField, '|', 2), '|', -1) TheDate, SomeField, SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(SomeField, '|'), '|', Sub1.AnInt), '|', -1) AS aDelimitedSection, Sub1.AnInt
FROM StatsTest,
(SELECT 4+a.i+b.i*10 AS AnInt FROM integers a, integers b) Sub1
WHERE Sub1.AnInt <= (1 + LENGTH(SomeField) - LENGTH( REPLACE ( SomeField, "|", "")))) SubA
INNER JOIN (SELECT SUBSTRING_INDEX(SomeField, '|', 1) TheRowNum, SUBSTRING_INDEX(SUBSTRING_INDEX(SomeField, '|', 2), '|', -1) TheDate, SomeField, SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(SomeField, '|'), '|', Sub1.AnInt), '|', -1) AS aDelimitedSection, Sub1.AnInt
FROM StatsTest,
(SELECT 4+a.i+b.i*10 AS AnInt FROM integers a, integers b) Sub1
WHERE Sub1.AnInt <= (1 + LENGTH(SomeField) - LENGTH( REPLACE ( SomeField, "|", "")))) SubB
ON SubA.aDelimitedSection = SubB.aDelimitedSection AND SubA.TheRowNum < SubB.TheRowNum AND SubA.TheDate != SubB.TheDate
INNER JOIN (SELECT SUBSTRING_INDEX(SomeField, '|', 1) TheRowNum, SUBSTRING_INDEX(SUBSTRING_INDEX(SomeField, '|', 2), '|', -1) TheDate, SomeField, SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(SomeField, '|'), '|', Sub1.AnInt), '|', -1) AS aDelimitedSection, Sub1.AnInt
FROM StatsTest,
(SELECT 4+a.i+b.i*10 AS AnInt FROM integers a, integers b) Sub1
WHERE Sub1.AnInt <= (1 + LENGTH(SomeField) - LENGTH( REPLACE ( SomeField, "|", "")))) SubC
ON SubA.aDelimitedSection < SubC.aDelimitedSection AND SubA.TheRowNum = SubC.TheRowNum
INNER JOIN (SELECT SUBSTRING_INDEX(SomeField, '|', 1) TheRowNum, SUBSTRING_INDEX(SUBSTRING_INDEX(SomeField, '|', 2), '|', -1) TheDate, SomeField, SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(SomeField, '|'), '|', Sub1.AnInt), '|', -1) AS aDelimitedSection, Sub1.AnInt
FROM StatsTest,
(SELECT 4+a.i+b.i*10 AS AnInt FROM integers a, integers b) Sub1
WHERE Sub1.AnInt <= (1 + LENGTH(SomeField) - LENGTH( REPLACE ( SomeField, "|", "")))) SubD
ON SubC.aDelimitedSection = SubD.aDelimitedSection AND SubB.TheRowNum = SubD.TheRowNum 
```

在我的机器上使用您的测试数据在 xampp 上花费 0.014 秒，但不确定它是否真的可扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:43:13.770

*“有没有任何数学公式......”*不 - 你没有给我们任何关于数字如何产生的规则，据我所知，唯一的方法是继续比较每个组合。也就是说，你可以做一些事情来加快速度——同样的陷阱也会杀死脚本。由于您没有给我们任何代码来使用，我只是要制定一个程序解决方案。

* * *

**游戏规则**

*   据我了解，您有 2 个变量（数组） - 每天一个。
*   我不知道“n1”和“n2”的意义（如果有的话），所以我忽略了它们。
*   您只对两天/日期之间的共同值感兴趣，而不关心可能在同一日期内找到的任何对。

在此示例中，您的日子将由变量表示，`$day[0]`因此`$day[1]`您不会重复自己（并最终进入一个耗时的循环），您可能希望迭代其中一天并计算所有可能的对组合每一行。为了便于查找，这些组合将用作数组键并映射到相应的行 ID。例如。

```
$pairs = array();
foreach($days[0] as $day){
  $len = count($day);
  for($i=3;$i<$len;$i++)
    for($j=$i+1;$j<$len;$j++){
      $key = $day[$j] > $day[$i] ? "{$day[$i]}|{$day[$j]}" 
                                 : "{$day[$j]}|{$day[$i]}";
      $pairs[$key] = $day[0];
    }
} 
```

请注意，为了避免必须根据“找到”组合的顺序来重复数组键，我已指定按数字顺序设置键。一旦我们有了这个预先计算的对数组，第二天就更容易通过并确定它有哪些共同值。例如。

```
foreach($days[1] as $day){
  $len = count($day);
  for($i=3;$i<$len;$i++)
    for($j=$i+1;$j<$len;$j++){
      $key = $day[$j] > $day[$i] ? "{$day[$i]}|{$day[$j]}" 
                                 : "{$day[$j]}|{$day[$i]}";
      if(isset($pairs[$key]))
        echo "\"{$day[$i]}\" and \"{$day[$j]}\" in the row "
          .  "\"{$pairs[$key]}\" and \"{$day[0]}\"<br/>";
    }
} 
```

[工作示例](http://ideone.com/czIxju)

我将把它留给你来美化解决方案，我不确定它如何扩展到大型数据集，但我已经给了你足够的工作 -[`set_time_limit`](http://php.net/manual/en/function.set-time-limit.php)如果你正在使用特别大的数组，你可以随时使用.

# c - scanf 和输入字符

> ID：15874424
> 
> 赞同：-3
> 
> 时间：2013-04-08T08:21:21.940
> 
> 标签：c

我想知道如果在我的程序中我要求使用整数输入`scanf("%d",&num)`并且用户输入例如字符和整数的字符串会发生什么`at3stf0rfun`。在这种情况下，价值是`num`多少？它只需要整数`30`还是也将字符转换为其'ASCII十进制值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:24:10.073

遇到无效输入时扫描停止。因此，在您的代码中， 的值`num`将保持不变。

要检测是否发生了这种情况，您需要检查`scanf`. 引用 `man scanf`：

> 返回值
> 
> 这些函数返回分配的输入项的数量。在匹配失败的情况下，这可能比提供的要少，甚至为零。零表示尽管有可用的输入，但没有分配转换；**这通常是由于输入字符无效，例如用于 '%d' 转换的字母字符**。如果在任何转换（例如文件结尾）之前发生输入失败，则返回值 EOF。如果在转换开始后发生错误或文件结尾，则返回成功完成的转换次数。

# django - 图像未显示在 Django 模板中

> ID：15874426
> 
> 赞同：0
> 
> 时间：2013-04-08T08:21:28.503
> 
> 标签：django

正在处理现有模板，当我更改新图像的名称时，当我返回它显示的前一个图像时，它会显示。是否有缓存列表我可以更改以对 Django 进行修改。

原来的 `<img class="HeaderImage" src="/media/img/logo.png" />`

我的更新 `<img class="HeaderImage" src="/media/img/logo_1.png" />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:32:03.330

刷新您的浏览器并再次获取数据 (Shift + F5)
确保新图像存在于指定的浏览器中。
清除浏览器的缓存（在浏览器的设置中）
关闭浏览器并重新打开它（有时如果缓存为空但元素仍显示为前 [特别是图像]）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T21:41:31.583

使用下一个示例，我遇到了同样的问题，我只需要修改源：

```
<img src="{% static "images/final.jpg" %}" alt="Chania" alt="Cinque Terre" width="500" height="200"> 
```

# java - 从数据库中获取双精度值并用它们计算

> ID：15874429
> 
> 赞同：0
> 
> 时间：2013-04-08T08:21:45.857
> 
> 标签：java, android, sql, database, sqlite

我遇到了另一个奇怪的问题，我只是不明白。

我正在使用 max 将双打保存到我的数据库中。小数点后3位。双打已正确存储在数据库中，但是当我尝试获取数据并添加/乘以存储的双打时，我遇到了一个奇怪的问题

如果我存储的数据只有小数点后一位，一切正常，我得到正确的结果。但是，如果我在小数点后添加 2 位或更多位，我的整个计算将不起作用。我的 TextViews 没有结果。

我试图了解几个小时以来发生的事情，但我只是不明白为什么会发生这种情况。

这是代码：

我的 MainActivity，TextViews 获取文本的地方：

```
public void calc() {
        // Get text for the statistics
        amount_widget.setText(db.getSearchResult("amount", 0));     
        lpayment_widget.setText(db.getSearchResult("price", 0));
        tpayment_widget.setText(db.getSearchResult("total_price", 1));
        mileage_widget.setText(db.getSearchResult("mileage", 2));
        trefueled_widget.setText(db.getSearchResult("amount", 1));

        // Calculate text for the consumption
        double consumption = (Double.parseDouble(db
                .getSearchResult("amount", 1)) / Double.parseDouble(db
                .getSearchResult("mileage", 2))) * 100;
        consumption = Math.round(consumption * 100) / 100.0;
        consumption_widget.setText(consumption + "L /100km");
    } 
```

正在获取和计算代码的我的数据库活动：

```
public String getSearchResult(String sql, int cmd) {

if (cmd == 0) {
    String countQuery = "SELECT " + sql + " FROM " + TABLE_NAME
            + " WHERE _id = (SELECT max(_id) FROM " + TABLE_NAME + ")";
    Cursor cursor = db.rawQuery(countQuery, null);

    String tmp = cursor.moveToFirst() ? cursor.getString(0) : "0";

    cursor.close();

    return tmp;
} else if (cmd == 1) {
    double sum = 0;
    String countQuery = "SELECT " + sql + " FROM " + TABLE_NAME;
    String idQuery = "SELECT _id FROM " + TABLE_NAME
            + " WHERE _id = (SELECT max(_id) FROM " + TABLE_NAME + ")";
    Cursor cursor = db.rawQuery(countQuery, null);
    Cursor id = db.rawQuery(idQuery, null);
    // berechnung
    cursor.moveToFirst();
    id.moveToFirst();

    int maxId = Integer.parseInt(id.getString(0));
    for (int i = 0; i < maxId; i++) {

        double tmp = Integer.parseInt(cursor.getString(0));
        sum = sum + tmp;
        cursor.moveToNext();
    }
    cursor.close();
    id.close();
    return String.valueOf(sum);
} else if (cmd == 2 && sql == "mileage") {
    double sum = 0;
    String countQuery = "SELECT " + sql + " FROM " + TABLE_NAME;
    String idQuery = "SELECT _id FROM " + TABLE_NAME
            + " WHERE _id = (SELECT max(_id) FROM " + TABLE_NAME + ")";
    Cursor cursor = db.rawQuery(countQuery, null);
    Cursor id = db.rawQuery(idQuery, null);
    // berechnung
    cursor.moveToFirst();
    id.moveToFirst();

    int maxId = Integer.parseInt(id.getString(0));
    if (maxId > 1) {
        int array[] = new int[maxId];

        // Array füllen
        for (int i = 0; i < maxId; i++) {

            array[i] = Integer.parseInt(cursor.getString(0));
            // sum = sum + tmp;
            cursor.moveToNext();
        }
        for (int k = 1; k < maxId; k++) {
            double tmp;
            tmp = array[k] - array[k - 1];
            sum = sum + tmp;
        }

        cursor.close();
        id.close();
        return String.valueOf(sum);
    } else {
        return "--";
    }

}
return "Wrong CMD";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:35:28.453

也许你犯了一个简单的错误。而不是：
`consumption_widget.setText(consumption + "L /100km");`
试试这个：

```
consumption_widget.setText(String.valueOf(consumption) + "L /100km"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:57:54.820

我发现了我的错误。

在我的`getSearchResult()`方法中的 DbAdapter 类中，我有以下语句：

```
for (int i = 0; i < maxId; i++) {

        double tmp = Integer.parseInt(cursor.getString(0));
        sum = sum + tmp;
        cursor.moveToNext();
    } 
```

在这里，我试图解析一个整数，但将其写入双精度数。这就是无法执行计算的原因。我需要像这样解析一个双精度：

```
for (int i = 0; i < maxId; i++) {

        double tmp = Double.parseDouble(cursor.getString(0));
        sum = sum + tmp;
        cursor.moveToNext();
    } 
```

这是我的问题的解决方案

# emacs - Emacs：如何在拆分窗口中修复烦人的转义行为？

> ID：15874433
> 
> 赞同：1
> 
> 时间：2013-04-08T08:22:06.443
> 
> 标签：emacs, autocomplete

我有一个非常烦人的情况；当我在 emacs 中编辑并加载自动完成框时，我发现我在不需要时使用转义键退出它。问题是这具有使当前窗口成为*唯一*窗口的不良行为。当我为各种任务设置了多个窗口/框架时，这真的很烦人。

我正在使用`auto-complete.el`，具有以下选项：

```
(ac-config-default)
(define-key ac-completing-map "\e" 'ac-stop) ; use esc key to exit completion
(global-set-key "\C-f" 'ac-isearch) 
```

由于`ESC`击键在我的肌肉记忆中用于关闭 UI 元素（下拉菜单、对话框等），所以关于如何在不让当前聚焦的帧接管的情况下点击转义的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-28T18:41:36.680

在 Mac emacs 中，“ESC ESC ESC”默认绑定到键盘转义退出，这是您不小心调用的。这为我修复了它：

```
(global-unset-key (kbd "ESC ESC ESC")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:14:54.403

按`C-g`而不是 escape.ff

# r - 我怎样才能在 R 中更快、更有效地做到这一点？

> ID：15874442
> 
> 赞同：-2
> 
> 时间：2013-04-08T08:22:43.510
> 
> 标签：r, loops, for-loop, dataframe

使项目随机数据

```
test <- matrix(runif(100, 0, 1), nrow = 20)
nr <- nrow(test)
mat = matrix(sapply(test, rbinom, n = 1, size = 1), nrow = nr) 
```

使名称随机数据

```
testvec <- cbind( paste( "A", floor( 10 * runif(20, 0, 1) ), sep="" ) ) 
```

制作源数据框

```
dfrmORG <- data.frame( testvec, mat, c( 1:20 ) )
colnames(dfrmORG) <- c( "name", "item1", "item2", "item3", "item4", "item5", "rkey" ) 
```

重复名称计数

```
dfrmName <- as.data.frame( table( dfrmORG$name ) )
nrowUSR <- nrow( dfrmName ) 
```

制作目标数据框

```
finalDFRM <- data.frame( name = character(nrowUSR), item1 = numeric(nrowUSR), item2 = numeric(nrowUSR),
                          item3 = numeric(nrowUSR), item4 = numeric(nrowUSR), item5 = numeric(nrowUSR) )
finalDFRM$name <- dfrmName[,1] 
```

逻辑

```
system.time({

for( i in ( 1 : nrow( dfrmORG ) ) ) {
    userKEY <- dfrmORG[ i, 1 ]
    finalDFRM[ c( finalDFRM$name == userKEY ), 2:6 ] <- finalDFRM[ c( finalDFRM$name == userKEY ), 2:6 ] * 0.9 + dfrmORG[ i, 2:6 ]
}

}) 
```

逻辑太慢了，我怎样才能让它变得更好？

```
for loop
a <- a*x + b 
```

我需要总和，按名称，项目

```
result( finalDFRM )                     data( dfrmORG )
name item1 item2 item3 item4 item5      name item1 item2 item3 item4 item5
  A0  1.71 1.539   1.0  0.90   0.0        A0     0     1     0     0     0
  A4  2.71 0.900   1.9  1.71   1.9        A0     1     1     0     0     0
                                          A0     1     0     0     1     0
                                          A0     0     0     1     0     0
                                          A4     1     0     0     1     0
                                          A4     1     1     1     1     1
                                          A4     1     0     1     0     1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:44:30.693

尝试使用 sapply

```
sapply(1 : nrow(dfrmORG), function(i){
userKEY <- dfrmORG[ i, 1 ]
finalDFRM[ c( finalDFRM$name == userKEY ), 2:6 ] <- finalDFRM[ c( finalDFRM$name ==    userKEY ), 2:6 ] * 0.9 + dfrmORG[ i, 2:6 ]
}) 
```

这通常比创建 for 循环要快得多。

# opencv - 如何实现更好的滑动窗口算法？

> ID：15874445
> 
> 赞同：6
> 
> 时间：2013-04-08T08:22:44.323
> 
> 标签：opencv, machine-learning, computer-vision, sliding-window

所以我一直在为 HoG 及其变体编写我自己的代码来处理深度图像。但是，我坚持在检测窗口部分测试我训练有素的 SVM。

我现在所做的只是首先从原始图像中创建图像金字塔，然后从左上角到右下角运行一个 64x128 大小的滑动窗口。

这是它的视频截图：http: [//youtu.be/3cNFOd7Aigc](http://youtu.be/3cNFOd7Aigc)

现在的问题是我得到的误报比我预期的要多。

有没有办法可以消除所有这些误报（除了用更多图像进行训练）？到目前为止，我可以从 SVM 获得“分数”，即到边距本身的距离。我如何使用它来利用我的结果？

有没有人对实现一个好的滑动窗口算法有任何见解？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T09:03:34.747

您可以做的是添加一个处理步骤以从 SVM 中找到本地最强的响应。让我解释。

你现在似乎在做什么：

> 对于每个滑动窗口`W`，记录`category[W] = SVM.hardDecision(W)`

硬决策意味着它返回一个布尔值或整数，对于 2 类分类可以这样写：

```
hardDecision(W) = bool( softDecision(W) > 0 ) 
```

既然你提到了 OpenCV，`CvSVM::predict`你应该设置`returnDFVal`为 true ：

> returnDFVal – 指定返回值的类型。如果为真并且问题是 2 类分类，则该方法返回决策函数值，即到边缘的有符号距离，否则该函数返回类标签（分类）或估计的函数值（回归）。

从[文档](http://docs.opencv.org/modules/ml/doc/support_vector_machines.html#cvsvm-predict)中。

你可以做的是：

> 1.  对于每个滑动窗口`W`，记录`score[W] = SVM.softDecision(W)`
> 2.  对于每个 W，计算并记录：
>     *   `neighbors = max(score[W_left], score[W_right], score[W_up], score[W_bottom])`
>     *   `local[W] = score[W] > neighbors`
>     *   `powerful[W] = score[W] > threshold`.
> 3.  对于每一个`W`，如果`local[W] && powerful[W]`

由于您的分类器将对窗户布（在空间和/或外观上）对您的真实正面做出正面响应，因此想法是记录每个窗口的分数，然后只保留正面

*   是局部最大分数（大于其邻居）-->`local`
*   足够强大-->`powerful`

您可以将阈值设置为 0 并对其进行调整，直到获得满意的结果。或者您可以使用您的训练集自动校准它。

# c# - https 请求推特

> ID：15874446
> 
> 赞同：0
> 
> 时间：2013-04-08T08:22:44.890
> 
> 标签：c#, twitter, https

我想在 Twitter 上发送一个 GET 请求。

```
String request = "GET /** / HTTPS/1.1\r\n" +
                             "Host: twitter.com\r\n" +
                             "Connection: Close\r\n\r\n"; 
```

我在带有套接字的字节 [] 中发送请求并收到错误：“无法建立连接，因为目标机器主动拒绝了它”

它只在http上运行。http 和 https 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:40:13.317

可能问题是您没有连接http端口（80）而不是https端口（443）。

顺便说一句，您可以使用[TweetSharp](https://github.com/danielcrenna/tweetsharp)（或其他 nuget 包）连接到 twitter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:20:34.257

> http 和 https 有什么区别？

HTTPS 连接到不同的端口，协商 SSL 连接，然后通过 SSL 连接发送 HTTP 请求。

# css - CSS盒子流动性问题

> ID：15874450
> 
> 赞同：1
> 
> 时间：2013-04-08T08:23:00.570
> 
> 标签：css, fluid

我一直在尝试制作在调整窗口大小时会挤压的流体框。

但这就是正在发生的事情：

当我调整窗口大小时，第 4 个框移动到底部，然后框的宽度缩小。为什么第 4 个盒子在下面？我究竟做错了什么？

这是发生了什么： [http ://www.dinkypage.com/169785](http://www.dinkypage.com/169785)

这是来源： [http ://pastebin.com/raw.php?i=4ZbbXxCq](http://pastebin.com/raw.php?i=4ZbbXxCq)

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:30:43.193

你需要使用`box-sizing: border-box`. 这是因为你分配给每个浮动 div 元素的 10px 的内边距是在你分配的 25% 宽度之上添加的，所以所有四个浮动 div 的宽度的实际总和将超过 100%（实际上，它将是 100% + (2*10px)*4 = 100% + 80px

该`box-sizing: border-box`属性将确保您为元素设置的高度和宽度也将包括填充（如果有）和/或边框宽度（如果有）。

事实上，我建议[Paul Irish 的建议](http://paulirish.com/2012/box-sizing-border-box-ftw/)使用：

```
* {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

由于您还明确声明了您的高度，您可能希望更改容器的高度以反映盒子模型中的变化。由于您有一个 30px 的 padding-top，现在它将被计算为 240px 高度的一部分，您应该将高度更改为 240px + 30px（顶部填充）+ 10px（底部填充）= 280px。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T08:33:23.540

这是因为你给了`width: 25%`所有 4 个块，但也给了 'padding: 10px' 给它们，所以很明显宽度需要超过`100%`.

例如，您需要删除填充或将块的宽度减小到小于填充的总长度`22%`

# wpf - 如何正确实现 INotifyDataErrorInfo？

> ID：15874453
> 
> 赞同：4
> 
> 时间：2013-04-08T08:23:15.263
> 
> 标签：wpf, inotifydataerrorinfo

我对[MSDN 示例](http://msdn.microsoft.com/ru-ru/library/ee652637%28v=vs.95%29.aspx)有点困惑。

目前尚不清楚如何处理和设置实体相关的错误。

示例中的代码：

```
public System.Collections.IEnumerable GetErrors(string propertyName)
{
    if (String.IsNullOrEmpty(propertyName) || 
        !errors.ContainsKey(propertyName)) return null;
    return errors[propertyName];
} 
```

但 GetErrors() 的文档指出：

> propertyName - 要检索验证错误的属性的名称；**或 null 或 Empty，以检索实体级错误**。

另一个例子建议只返回字典的 _errors.Values 。这只是所有属性错误，但又不是实体错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T07:17:40.310

As per the "Remarks" section from the documentation: [MSDN: INotifyDataErrorInfo Interface](http://msdn.microsoft.com/ru-ru/library/ee652637%28v=vs.95%29.aspx/)

> This interface enables data entity classes to implement custom validation rules and expose validation results asynchronously. This interface also supports custom error objects, multiple errors per property, cross-property errors, and entity-level errors. Cross-property errors are errors that affect multiple properties. You can associate these errors with one or all of the affected properties, or you can treat them as entity-level errors. Entity-level errors are errors that either affect multiple properties or affect the entire entity without affecting a particular property.

I might suggest that the implementation of `GetErrors` is highly dependent upon your error handling scheme. If, for instance, you do not intend to support `Entity-Level` errors, then your example code is sufficient. If, however, you do need to support `Entity-Level` errors, then you may handle the `IsNullOrEmpty` condition separately:

```
Public IEnumerable GetErrors(String propertyName)
{
    if (String.IsNullOrEmpty(propertyName))
        return entity_errors;
    if (!property_errors.ContainsKey(propertyName))
        return null;
    return property_errors[propertyName];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-03T14:25:50.830

由于我的解决方案在这里没有找到正确的答案，因此当值为 null 或为空时，将返回所有验证错误：

```
private ConcurrentDictionary<string, List<ValidationResult>> modelErrors = new ConcurrentDictionary<string, List<ValidationResult>>();

public bool HasErrors { get => modelErrors.Any(); }

public IEnumerable GetErrors(string propertyName)
{
    if (string.IsNullOrEmpty(propertyName))
    {
        return modelErrors.Values.SelectMany(x => x);   // return all errors
    }
    modelErrors.TryGetValue(propertyName, out var propertyErrors);
    return propertyErrors;
} 
```

# ruby-on-rails - 使用lazy-highcharts gem 将图表导出为图像

> ID：15874459
> 
> 赞同：0
> 
> 时间：2013-04-08T08:23:38.183
> 
> 标签：ruby-on-rails, ruby, lazy-high-charts

我可以使用惰性 highcharts 生成图表，但我希望将这些图表导出为图像，这是我用来生成图表的代码

```
@fields= ReportHistory.all_history
@h = LazyHighCharts::HighChart.new('graph') do |f|
f.chart(:renderTo => 'container', :zoomType => 'x',:spacingRight=> 20)
    f.title(:text => 'Reports')
    f.xAxis(:title=>{:text => 'Days'}, :categories =>@fields.map{|x|x.Date}.last(limit=15))
    f.yAxis(:title=>{:text=> 'Jobs_count', :type =>'integer' ,:max => 5000000})
    f.series(:name =>'jobs_count', :data=> @fields.map{|x| x.jobs_count.to_i }.last(limit=15))
    f.export(:type=> 'image/jpeg')
end 
```

在我看来，我要展示我有这个的图表

```
<%= high_chart("my_id", @h) %> 
```

我想要像[这里](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/exporting/type/)一样的效果，我可以使用导出按钮下载图表图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:59:45.750

首先，您需要确保导出模块可用并由您的视图加载：

```
<%= javascript_include_tag "vendor/highcharts/highcharts.js" %>
<%= javascript_include_tag "vendor/highcharts/modules/exporting.js" %> 
```

第二……没什么可做的。加载导出模块后，它将添加菜单以导出图形。

笔记：

*   您可能需要根据您的设置调整路径。
*   这`exporting.js`是您从 Highcharts 下载的软件包的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T08:45:20.873

您可以在您的`application.js`

```
//= require highcharts/highcharts
//= require highcharts/highcharts-more
//= require highcharts/modules/no-data-to-display
//= require highcharts/modules/exporting 
```

如果您还想更新 highcharts 的供应商资产，您可以运行：

```
rake highcharts:update 
```

# html - DIV 高度不会按我想要的方式缩放

> ID：15874470
> 
> 赞同：0
> 
> 时间：2013-04-08T08:24:21.580
> 
> 标签：html, css, dynamic, css-tables

[http://telschowdesign.com/_JCM/](http://telschowdesign.com/_JCM/) - 模拟
[http://telschowdesign.com/_JCM/index2.html](http://telschowdesign.com/_JCM/index2.html) - 失败

几乎我有这两个侧面板，我想在高度上缩放，如模型所示。无论出于何种原因，我都无法让他们使用我当前的 CSS 做到这一点。我试过使用`height=100%`，但这不起作用。我不想使用静态测量值，例如 700px 等

我知道这可以使用表格来完成，但我希望能够将相同的内容用于 CSS 的移动版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:30:32.080

`height:100%`并不意味着你认为它做了什么。这意味着您设置此样式的元素将占据其包含元素高度的 100%，而不是其子元素高度的 100%。

您想要实现的是一个非常典型的 3 列布局。这是一个链接到如何做到这一点的例子：

[http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:37:13.057

您可以在站点主控和以下 css 上使用 Divs 和 %

# 导航栏

{浮动：对；高度：40px；}

# 主要内容

{ 向左飘浮; 宽度：60%；}

您的 HTML 将如下所示...

div id="导航栏" div id="maincontent"

这些可以在一个大 Div 中。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:29:18.510

div 的高度是内容的高度。

您可以尝试在您的 div 上使用 line-height css 属性。

```
line-height: normal; 
line-height: 3.5;    /* <number> values */
line-height: 3em;    /* <length> values */
line-height: 34%;    /* <percentage values */
line-height: 50px;   /* <Pixel> values */

line-height: inherit 
```

希望这可以帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:29:19.227

替换**#container** id 的 css ：

```
width: 1000px;
margin: 0 auto; 
```

然后你的内容将居中;），如果你需要它，你也可以使用像 960grid.css 这样的 CSS 框架，你将是桌面屏幕 + 移动 + iPad 兼容，更有生产力和适应性;）

然后，你在 node 上有一个 js 错误：

```
<body onload="javascript:panels()"> 
```

**面板（）函数**不存在......;）

# c# - 在不同操作系统的一个应用程序中使用不同版本的 .net DLL

> ID：15874472
> 
> 赞同：0
> 
> 时间：2013-04-08T08:24:28.467
> 
> 标签：c#, .net

如何配置 .net 应用程序以在不同操作系统中使用不同版本的 dll

让我详细说明一下。

我有一个 .net 应用程序，它在 Windows7 和更低的操作系统中需要 .net 2.0 版本下的 dll，但它在 Windows8 操作系统中需要 4.0 版下的相同 dll。如果我在 Windows 8 中使用 .net 2.0 版本的 dll，那么应用程序将崩溃.所以我在.net 4.0下创建了相同的dll。但我不知道如何告诉我的应用程序在不同的操作系统中使用不同版本的dll。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:33:32.753

使用 .NET 程序集绑定重定向，请检查：http: [//msdn.microsoft.com/en-us/library/eftw1fys (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/eftw1fys(v=vs.71).aspx)

# php - 如何定义数据库中的哪个数字接近（圆形）获取数字？

> ID：15874476
> 
> 赞同：0
> 
> 时间：2013-04-08T08:24:50.490
> 
> 标签：php, sql, rounding

我有一个如下所示的 SQL 表。所以在 PHP 页面上，我输入了 temp 44 或 43 和数字 1 或 2。例如，我输入了数字：2 和 temp :44...Php 从公式计算（它是如何计算的，我认为写它不是重要）并获得像 46.5777 这样的数字。所以这个数字不在 DATABASE 上。我必须定义 DATABASE 中的哪个数字接近（四舍五入）到 46.5777？我如何定义它并显示它？

```
num  temp   decimal

1    43     44.5760
2    44     47.0827
2    43     45.9396
3    44     48.5177
3    43     47.3053 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:36:17.963

[在数据库中查找最接近的数值](https://stackoverflow.com/questions/592209/find-closest-numeric-value-in-database)- 同样的问题。在您的示例查询中将是`SELECT * FROM table WHERE num = 2 AND temp = 44 ORDER BY ABS(decimal - 46.5777) LIMIT 1;`. 它应该返回最接近的值 46.5777。

# jquery - jQuery AJAX 调用类型错误

> ID：15874480
> 
> 赞同：4
> 
> 时间：2013-04-08T08:25:06.617
> 
> 标签：jquery, ajax

我对 jQuery AJAX 请求的传输方法/类型有疑问。我知道 type 参数告诉 jQuery 使用什么方法（GET、POST、PUT、DELETE）。

我让自己成为一个网站，用户点击一个按钮，然后通过 AJAX 插入新的 HTML 内容。但奇怪的是，即使我告诉 jQuery 使用完全废话作为类型，我也会得到结果，例如

```
type: 'ABC' 
```

jQuery 是否有未知类型的后备？

当我在 Chrome 中检查控制台时，它告诉我 AJAX 加载的内容已通过“ABC”方法传输。

我如何确定使用了哪种传输类型？我该如何测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:59:39.663

从[jQuery API](http://api.jquery.com/jQuery.ajax/)：

> 要发出的请求类型（“POST”或“GET”），默认为“GET”。注意：这里也可以使用其他 HTTP 请求方法，例如 PUT 和 DELETE，但并非所有浏览器都支持。

我是这样理解的：

如果您的浏览器支持您正在使用的类型，它将使用它。由于 'ABC' 不是受支持的 HTTP 方法（在大多数浏览器中；））**jQuery 默认为 'GET'**。

# android - 如何在安卓游戏中添加计分器？

> ID：15874482
> 
> 赞同：0
> 
> 时间：2013-04-08T08:25:29.917
> 
> 标签：android, multithreading, image, counter

嗨，我想在我的 android 游戏中实现一个“图像得分计数器”，但效果不佳。但是它编译得很好，但是当球到达屏幕边缘时应用程序很快就会返回错误：

```
04-08 10:07:31.639: E/AndroidRuntime(8599): FATAL EXCEPTION: Thread-1176
04-08
10:07:31.639: E/AndroidRuntime(8599): java.lang.NullPointerException
04-08 10:07:31.639: E/AndroidRuntime(8599):at com.Pong.GameState.update(GameState.java:154)
04-08 10:07:31.639: E/AndroidRuntime(8599):at com.Pong.GameThread.run(GameThread.java:41) 
```

我得到了 3 个管理游戏的文件：GameState.java GameView.java GameThread.java：

错误在：

**游戏状态.java：**

```
TopCounter.setImageResource(myImageList[i+1]); 
```

**游戏线程.java：**

```
_state.update(); 
```

这就是 GameThread.java 的样子：

```
package com.Pong;

import....

    class GameThread extends Thread {
        private SurfaceHolder surfaceHolder;
        private GameView gameView;
        private Paint _paint;
        private GameState _state;
        private boolean run = false;
        public GameThread(SurfaceHolder surfaceHolder, GameView gameView, Context context, Handler handler) {
            this.surfaceHolder = surfaceHolder;
            this.gameView = gameView;
            _paint = new Paint();
            _state = new GameState();
        }

        public void setRunning(boolean run) {
            this.run = run;
        }

        public SurfaceHolder getSurfaceHolder() {
            return surfaceHolder;
        }

        @Override
        public void run() {
            Canvas c;
            while (run) {
                c = null;

                try {
                    c = surfaceHolder.lockCanvas(null);

                    synchronized (surfaceHolder) {
                         gameView.onDraw(c);
                        _state.update();  //here is the error
                        _state.draw(c, _paint);
                    }
                } finally {
                    if (c != null) {
                        surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }

public GameState getGameState()
{
return _state;
}
} 
```

这就是 GameState.java 的样子（我删掉了不必要的行）：

```
package com.Pong;

Import ...

public class GameState extends Activity implements View.OnTouchListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gamestate);
        TopCounter = (ImageView) findViewById(R.id.counterT);
        BottomCounter = (ImageView) findViewById(R.id.counterB);

}
    int _screenWidth = 270;
    int _screenHeight = 395;   
    int _ballSize = 10;
    int _ballX = 100;
    int _ballY = 100;
    int _ballVelocityX = 3;
    int _ballVelocityY = 3;
    int _batLength = 75;
    int _batHeight = 10;
    int _topBatX = (_screenWidth / 2+25) - (_batLength / 2);
    int _topBatY = 54;
    int _bottomBatX = (_screenWidth / 2+25) - (_batLength / 2); 
    int _bottomBatY = 392;
    int i=0;
    // under is matrix that contains images to my counter.
    int[] myImageList = new int[]{
            R.drawable.counter00,
            R.drawable.counter01,
            R.drawable.counter02,
            R.drawable.counter03,
            R.drawable.counter04,
            R.drawable.counter05,
            R.drawable.counter06,
            R.drawable.counter07,
            R.drawable.counter08,
            R.drawable.counter09
            };
    ImageView TopCounter;
    ImageView BottomCounter; 

    public GameState()
    {}

    public void update() {

        _ballX += _ballVelocityX;
        _ballY += _ballVelocityY;

    if( _ballY > _screenHeight){
            _ballX = _screenWidth/2;
            _ballY = _screenHeight/2;
            TopCounter.setImageResource(myImageList[i+1]); //here is the error
            _toppoint=_toppoint+1;
            _topBatX =_screenWidth/2-10;
            _bottomBatX =_screenWidth/2-10;
            }       

        if( _ballY < 50){
            _ballX = _screenWidth/2;
            _ballY = _screenHeight/2;
            BottomCounter.setImageResource(myImageList[i+1]);
            _bottompoint=_bottompoint+1;
            _topBatX =_screenWidth/2-10;
            _bottomBatX =_screenWidth/2-10;
            } 
        if (_toppoint==9){

        } 
        else if (_bottompoint==9) {

        }

        if(_ballX > _screenWidth || _ballX <= 40){
            _ballVelocityX *= -1;
            }
        if(_ballX > _topBatX && _ballX < _topBatX+_batLength && _ballY < _topBatY){
            _ballVelocityY *= -1;
        }
        if(_ballX > _bottomBatX && _ballX < _bottomBatX+_batLength && _ballY > _bottomBatY){
            _ballVelocityY *= -1;
        }
        if (_ballX == 40+_batLength) {
            _topBatX=40;
            } else if (_ballX > 40+_batLength && _ballX <=  _screenWidth){
                _topBatX=_ballX-_batLength+6;
                } 
        if (_bottomBatX < 46) {
            _bottomBatX=46;
        } else if (_bottomBatX+_batLength > _screenWidth){
            _bottomBatX=_screenWidth-_batLength+6;
        }
        }
    public void draw(Canvas c, Paint paint) {
    paint.setARGB(255, 234, 222, 199);
    c.drawRect(new Rect(_ballX,_ballY,_ballX + _ballSize,_ballY + _ballSize), paint);
    c.drawRect(new Rect(_topBatX, _topBatY, _topBatX + _batLength, _topBatY + _batHeight), paint); //top bat
    c.drawRect(new Rect(_bottomBatX, _bottomBatY, _bottomBatX + _batLength, _bottomBatY + _batHeight), paint); //bottom bat
    }

} 
```

在我的 XML 文件中：

```
 <ImageView
        android:id="@+id/counterT"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/counter00"
       android:layout_gravity="left|center_vertical"
         />
        <ImageView
        android:id="@+id/counterB"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/counter00" /> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:42:37.923

我认为这是您在 GameState.java 文件中的问题

```
// under is matrix that contains images to my counter.
int[] myImageList = new int[]{
        R.drawable.counter00,
        R.drawable.counter01,
        R.drawable.counter02,
        R.drawable.counter03,
        R.drawable.counter04,
        R.drawable.counter05,
        R.drawable.counter06,
        R.drawable.counter07,
        R.drawable.counter08,
        R.drawable.counter09
        }; 
```

这不是你声明矩阵的方式！您想要一个整数数组尝试将其声明为：

```
int[] myImageList = {
    R.drawable.counter00,
    R.drawable.counter01,
    R.drawable.counter02,
    R.drawable.counter03,
    R.drawable.counter04,
    R.drawable.counter05,
    R.drawable.counter06,
    R.drawable.counter07,
    R.drawable.counter08,
    R.drawable.counter09
    }; 
```

编辑：

```
 if (TopCounter != null){
       TopCounter.setImageResource(myImageList[i]);
       i++;
    } 
```

您也不会增加列表索引，它始终等于 0，而不是将索引初始化为 1，然后当您更改图像源时将其增加 1，但您还需要检查索引是否超过列表大小

# .net - 从子窗体中检测 OnFormClosing 事件

> ID：15874485
> 
> 赞同：0
> 
> 时间：2013-04-08T08:25:43.947
> 
> 标签：.net, vb.net, winforms, formclosing

我有一个父表单，称为表单 A。这会创建子表单，可以说称为表单 B。

For A 订阅了表单 B 的 FormClosing 事件，并根据此操作进行更改。

我想知道的是，如何检测Form B中的哪个控件导致FormClosing事件触发。如果按下“X”或“取消”按钮，我希望代码以一种方式运行，如果按下 OK 按钮，则另一种方式运行。

代码如下所示：

```
Private Sub btnAddSections_Click(sender As Object, e As System.EventArgs) Handles btnAddSections.Click
    Cursor = Cursors.WaitCursor
    Dim frm As New dlgAddPartsMartixSection(m_intMatrixId)
    AddHandler frm.FormClosing, AddressOf btnAddSectionsRefresh
    frm.Show()
    Cursor = Cursors.Default
End Sub 

 Private Sub btnAddSectionsRefresh(sender As Object, e As FormClosingEventArgs)
    dgvParts.DataSource = Nothing
    btnAddParts.Enabled = False
    dgvParts.Refresh()
    Me.LoadPartMatrices()
    dgvMatrices.Rows(m_intMatrixLocationId).Selected = True
    Me.LoadPartSections(m_intMatrixId)
End Sub 
```

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:28:36.090

通常方法的参数会告诉你一切。调查

```
Private Sub btnAddSectionsRefresh(sender As Object, e As FormClosingEventArgs) 
```

您应该能够通过检查`sender`参数来确定是谁造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:28:57.453

您可以使用该[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.dialogresult.aspx)属性来确定表单 B 的关闭方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:20:10.240

试试这个代码

```
 Private Sub btnAddSectionsRefresh(ByVal sender As Object, ByVal e As FormClosingEventArgs)
           if  Me.ActiveControl.Text = "X" then
.....
......
elseif Me.ActiveControl.Text="Cancel"
.....
.....
elseif Me.ActiveControl.Text ="Ok"
.....
...
        End Sub 
```

# jakarta-ee - 在 JBOSS (Developer Studio) 中部署 seam 项目

> ID：15874488
> 
> 赞同：0
> 
> 时间：2013-04-08T08:26:00.837
> 
> 标签：jakarta-ee, configuration, jboss, seam

我试图获得一些使用[Seam 框架 - JBoss Seam](http://www.seamframework.org/)的经验。我和一个朋友想开发一个简单的应用程序，但我们无处可去。当他创建一个项目时，他可以运行它并且一切顺利。但是当我尝试运行同一个项目时，它不会出现在浏览器中

> ## HTTP 状态 404 -
> 
> 类型状态报告消息
> 
> ## 描述 请求的资源 () 不可用。
> 
> JBossWeb/2.0.0.GA_CP

我们在以下配置上运行。

*   JRE 1.5
*   JBOSS 开发者工作室 2.0
*   JBOSS EAP 4.3
*   缝2.1

基于 404 not found 状态，我认为项目没有部署到服务器上。查看服务器日志时，我看到以下错误：

> 10:16:14,740 错误 [ContainerBase] 向 org.jboss.seam.servlet.SeamListener java.lang.UnsupportedClassVersionError 类的侦听器实例发送上下文初始化事件的异常：.class 文件中的版本号错误

查找该错误让我无处可去，关于它的每个线程都没有得到解决，所以我希望有人可以在这里帮助我。

顺便说一句，我还没有工作数据库，这可能会阻塞服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:38:46.167

如果您在谷歌上搜索“.class 文件中的错误版本号”，您应该找到错误的解释：您的代码编译时使用的版本比您运行时使用的版本新。由于无法加载该类，因此不会部署您的应用程序。

此外，如果您有机会在“绿色领域”起步，您绝对应该寻找更新的技术。你的 JRE 和 JBoss 的版本已经过时了，以至于你在找麻烦，遇到问题时得不到太多帮助。如果您使用的是 JavaEE 6，那么 Seam 2.1（尽管我们直到最近才在项目中使用它）就不再需要了。

所以这是我的建议：熟悉最近的 IDE，如 eclipse Juno 或 Netbeans 7 以及 Maven（因为无论你是否喜欢 Maven，你会发现大多数示例都将使用 Maven）并查看[JBoss 教程](http://www.jboss.org/jdf/quickstarts/get-started/)（非常好）。

# android - Android“SDK 管理器”未安装

> ID：15874492
> 
> 赞同：0
> 
> 时间：2013-04-08T08:26:18.103
> 
> 标签：android, sdk, installation

我已经下载了链接的内容：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

在我看来，它包含了我想要的一切。**在我运行SDK 管理器**的第一步中， 我面对的页面是：![在此处输入图像描述](https://i.stack.imgur.com/3dTQx.jpg)

这意味着一切都已安装，但它仍在尝试获取一些文件，例如`https://dl-ssl.google.com/android/repository/repository-7.xml`

最后我面对这个： ![在此处输入图像描述](https://i.stack.imgur.com/MABFv.jpg)

它仍然处于这种情况。现在我的问题是：

1-为什么我无法在我`Control Panel\Programs\Programs and Features` 的已安装程序中看到 SDK 管理器？

2-如果未安装**SDK 管理器**，我该怎么做？

3-根据我下载的内容，我可以在不连接互联网的情况下在本地安装所有内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:31:08.197

您可以尝试以下方法，转到工具->选项 1\. 勾选强制 https:// 为 http:// 2\. 使用代理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:46:10.583

SDK 应该得到安装，检查你的 SDK 位置。SDK 位置是您在 Android Preference 中设置的位置。您将找到您下载的所有文件夹和文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:41:03.080

[从 d.android.com http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20130219.zip](http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20130219.zip)或 sdk 离线捆绑 包中使用包含您需要的一切的 捆绑包： [http://qdevarena。 blogspot.com/2010/05/download-android-sdk-standalone-for.html](http://qdevarena.blogspot.com/2010/05/download-android-sdk-standalone-for.html)或在这里： [http ://siddharthbarman.com/sidstream/index.php?r=software/apd](http://siddharthbarman.com/sidstream/index.php?r=software/apd)

# c# - 异常处理 Try-Catch 块区别

> ID：15874493
> 
> 赞同：1
> 
> 时间：2013-04-08T08:26:19.530
> 
> 标签：c#, exception

我知道，我们可以使用 try-catch 块来处理异常。但是我对 Try-Catch 的使用有一些疑问。和有什么区别

```
 try
   {
      //Some code
   }
   catch
   {

   } 
```

和

```
 try
   {
    //Some code
   }
   catch(Exception)
   {

   } 
```

和

```
 try
   {
    //Some code
   }
   catch(Exception oops)
   {

   } 
```

在我的程序中，我需要捕获所有异常并且我不想记录它们。从上面提到的 Try-Catch 块中，应该使用哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:29:29.580

到目前为止，您使用`catch (Exception)`，第一个和第二个是相同的。在这种情况下，你会抓住一切。当您想捕获特定异常`UnauthorizedAccessException`时，您必须像这样使用第二个异常：

```
try
{
    //Some code
}
catch (UnauthorizedAccessException)
{
    MessageBox.Show(oops.Message);
} 
```

在第三种情况下，您可以通过变量使用异常`oops`。

例如：

```
try
{
    //Some code
}
catch (Exception oops)
{
    MessageBox.Show(oops.Message);
} 
```

或者有一个特定的例外：

```
try
{
    //Some code
}
catch (UnauthorizedAccessException oops)
{
    MessageBox.Show(oops.Message);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T08:32:59.190

从 framework 2.0 开始，使用`catch`不带参数的 a 不再有用，因为所有非托管异常都包装在托管异常中。在此之前，您可以使用它来捕获非托管代码引发的异常。

如果您不想使用其中的任何信息，则可以只指定异常的类型，但通常您需要为其命名以便获取信息：

```
try {
  // some code
} catch(Exception) {
  // i don't care about any information in the Exception object, just the type
} 
```

对比

```
try {
  // some code
} catch(Exception ex) {
  // use some information from the exception:
  MessageBox.Show("Internal error", ex.Message);
} 
```

您应该始终尝试使用尽可能具体的异常类型，因为这样可以更轻松地处理异常。然后您可以添加不太具体的类型来处理其他异常。例子：

```
try {
  // some database code
} catch(SqlException ex) {
  // something in the database call went wrong
} catch(Exception ex) {
  // something else went wrong
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:30:44.237

通用 try catch，这将捕获任何类型的异常

```
try
{
   //Some code
}
catch
{

} 
```

这将捕获您指定的特定类型的异常，您可以指定多个。

```
try
{

}
catch (UnauthorizedAccessException)
{

} 
```

这将与上述相同，但为您提供一个可以访问异常属性的变量。

```
try
{

}
catch (UnauthorizedAccessException ex)
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:29:39.423

您应该使用最后一个，并以干净的方式处理您的异常。

第一种方式也一样，但都是“吃例外”，女巫是最糟糕的事情。

至少记录你的异常！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T08:29:40.010

它们几乎相同（我假设第一个是编写第二个的简写），与最后一个的区别在于您将异常对象放入变量中，以便您可以在 catch 中使用它。

通常，当我看到这样的代码时，我往往会担心，因为这通常**不是**一个好主意，因为您可能会掩盖应用程序的更大问题。

经验法则 - 尽你所能，让其他一切浮出水面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T08:29:52.730

你的第一个和第二个例子是一样的。它们都将捕获任何异常，而无需任何有关异常的信息。第三个异常将异常存储在 中`oops`，然后您可以使用它来获取有关异常的更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-08T08:31:11.113

查看 msdn 文档：http: [//msdn.microsoft.com/en-us/library/vstudio/0yd65esw.aspx](http://msdn.microsoft.com/en-us/library/vstudio/0yd65esw.aspx)

最好的方法是指定您想要捕获的错误类型。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-08T08:34:46.820

第三个是最好的...

您可以捕获任何类型的特定异常，并且它会很精确......这有助于识别确切的异常并且我们也很容易纠正它们

例如：可以捕获 DivisionByZeroException、TargetInvocationException、ArrayOutOfBoundException 等...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-08T08:46:10.117

我认为它具有相同的功能 - 跟踪错误设置的位置/或哪里出了问题，

以这种方式使用 try-catch

```
> try {

//some codes 
 }

catch
{
//anything
//e.g.:
MessageBox.Show("Something is wrong!");
} 
```

这告诉您有问题但没有显示详细报告。（隐藏一些错误的聪明方法是不要在 catch{} xD 中放任何东西，但不建议这样做）

接下来是显示错误的详细报告

```
try
{
//some codes
}

catch (Exception ex)
{
MessageBox.Show(ex.ToString());
} 
```

希望这可以帮助！:D

# java - 使用 java 导出 sqlite db

> ID：15874497
> 
> 赞同：-2
> 
> 时间：2013-04-08T08:26:39.157
> 
> 标签：java, sqlite

我想通过使用java将sqlite db导出/保存到另一个空间（例如：C、D、anywhere）......我希望有人能帮我解决这个问题..视图可能是使用java swing做一个界面这个程序有一个 sqlite 数据库，我们有一个按钮（另存为）可以按下并且可以将此数据库保存到另一个空间我找不到很多资源来查找，所以我希望有人可以帮助我完成这个程序。我会很高兴并谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:39:25.543

SQLite 允许您访问`ATTACH`另一个数据库文件（可以位于任何地方）。然后，您只需使用 SQL 语句[将内容复制到](https://stackoverflow.com/q/2359205/301832). 这是你想要的东西。

```
ATTACH DATABASE '/the/path/to/the/other/db.sqlite' AS otherdb;
CREATE TABLE otherdb.theTableName (...);
INSERT INTO otherdb.theTableName SELECT * FROM main.theTableName; 
```

或者，*在没有打开连接*的情况下，只需复制数据库文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-08T13:22:36.813

```
 try{
        filename = null;
        HSSFWorkbook hwb=new HSSFWorkbook();
        HSSFSheet sheet =  hwb.createSheet("new sheet");

        HSSFRow rowhead = sheet.createRow((short)0);           
        rowhead.createCell((short) 0).setCellValue("Invoice No");
        rowhead.createCell((short) 1).setCellValue("Date");
        rowhead.createCell((short) 2).setCellValue("Customer");
        rowhead.createCell((short) 3).setCellValue("Reference No.");
        rowhead.createCell((short) 4).setCellValue("Qty");

        Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/animal1", "root", "315921");
            Statement st=con.createStatement();
            ResultSet rs=st.executeQuery("Select * from few1");
            int i=1;
            while(rs.next()){
            HSSFRow row=   sheet.createRow((short)i);
            row.createCell((short) 0).setCellValue(rs.getString("Invoice"));
            row.createCell((short) 1).setCellValue(rs.getString("Date"));
            row.createCell((short) 2).setCellValue(rs.getString("Customer"));
            row.createCell((short) 3).setCellValue(rs.getString("Reference"));
            row.createCell((short) 4).setCellValue(rs.getString("Qty"));

            i++;
            }

             JFileChooser fileChooser = new JFileChooser();
             int retval = fileChooser.showSaveDialog(null);
             if (retval == JFileChooser.APPROVE_OPTION) {

                filename  = fileChooser.getSelectedFile();

                if (!filename.getName().toLowerCase().endsWith(".xls")) {
                    filename = new File(filename.getParentFile(), filename.getName() + ".xls");

                }  
             }

            FileOutputStream fileOut =  new FileOutputStream(filename);
            hwb.write(fileOut);  
            fileOut.close();

            JOptionPane.showMessageDialog(this, "Your excel file has been generated!");

            } catch ( IOException | ClassNotFoundException | SQLException ex ) {
                System.out.println(ex);

            } 
```

它用于在 Microsoft excel 中 Java 导出 MySQL 数据。

# maven - maven checkstyle 插件和 guava / google-collections 依赖冲突

> ID：15874503
> 
> 赞同：1
> 
> 时间：2013-04-08T08:26:53.717
> 
> 标签：maven, maven-3, guava, checkstyle

在我们的多模块 maven (3) 项目中，我们使用了 maven checkstyle 插件。看起来是这样，因为我们已经将 guava 依赖项转移到了父 pom，我们不能再成功执行 checkstyle:checkstyle 目标，因为它失败并出现以下异常：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-
plugin:2.10:checkstyle (default-cli) on project init: Execution default-cli of goal 
org.apache.maven.plugins:maven-checkstyle-plugin:2.10:checkstyle failed: An API 
incompatibility was encountered while executing org.apache.maven.plugins:maven-
checkstyle-plugin:2.10:checkstyle: java.lang.NoSuchMethodError: 
com.google.common.collect.ImmutableSortedSet.of([Ljava/lang/Comparable;)Lcom/google
/common/collect/ImmutableSortedSet;
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>org.apache.maven.plugins:maven-checkstyle-plugin:2.10 
```

原因可能是 maven checkstyle 插件依赖于 checkstyle 框架，该框架依赖于 google-collections 框架（现在包含在 google guava 框架中），即 checkstyle 调用了一个不属于 google 集合的方法番石榴了。

这是正在使用的父 pom 的摘录：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.ourcompany.ourproject</groupId>
<artifactId>ourproject</artifactId>
<version>0.1-SNAPSHOT</version>
<packaging>pom</packaging>
<name>our project</name>

<modules>
    <module>init</module>

...

</modules>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <junit.version>4.11</junit.version>
    <maven-compiler-plugin.version>3.0</maven-compiler-plugin.version>
    <maven-surefire-plugin.version>2.14</maven-surefire-plugin.version>
    <maven-checkstyle-plugin.version>2.10</maven-checkstyle-plugin.version>
    <maven-pmd-plugin.version>3.0.1</maven-pmd-plugin.version>
    <maven-resources-plugin.version>2.6</maven-resources-plugin.version>
    <java.source.version>1.6</java.source.version>
    <java.target.version>1.6</java.target.version>
    <google.guava.version>14.0.1</google.guava.version>
</properties>

<repositories>
    <repository>
        <id>nexus</id>
        <name>Internal Maven Repository</name>
        <url>http://ourinternalmavenrepository/nexus/content/groups/public</url>
    </repository>

...

</repositories>

<build>

    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>${maven-surefire-plugin.version}</version>
                <executions>
                    <execution>
                        <id>default-test</id>
                        <phase>test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <source>${java.source.version}</source>
                    <target>${java.source.version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>${maven-compiler-plugin.version}</version>
                <configuration>
                    <source>${java.source.version}</source>
                    <target>${java.source.version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>${maven-resources-plugin.version}</version>
                <configuration>
                    <source>${java.source.version}</source>
                    <target>${java.source.version}</target>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>

...

<distributionManagement>
    <repository>
        <id>deployment</id>
        <name>Internal Releases</name>
        <url>http://ourinternalmavenrepository/nexus/content/repositories/releases/</url>
    </repository>
    <snapshotRepository>
        <id>deployment</id>
        <name>Internal Releases</name>
        <url>http://ourinternalmavenrepository/nexus/content/repositories/snapshots/</url>
    </snapshotRepository>
</distributionManagement>
<profiles>

...

    <profile>
        <id>metrics</id>
        <repositories>
            <repository>
                <id>central</id>
                <url>http://central</url>
                <releases>
                    <enabled>true</enabled>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                </snapshots>
            </repository>
        </repositories>
        <pluginRepositories>
            <pluginRepository>
                <id>central</id>
                <url>http://central</url>
                <releases>
                    <enabled>true</enabled>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                </snapshots>
            </pluginRepository>
        </pluginRepositories>
        <build>
            <plugins>
                <!-- CHECKSTYLE -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>${maven-checkstyle-plugin.version}</version>
                    <configuration>
                        <configLocation>our_checkstyle.xml</configLocation>
                        <failsOnError>false</failsOnError>
                        <consoleOutput>true</consoleOutput>
                        <source>${java.source.version}</source>
                        <target>${java.source.version}</target>
                    </configuration>
                    <dependencies>
                        <dependency>
                            <groupId>com.ourcompany.ourproject</groupId>
                            <artifactId>init</artifactId>
                            <version>0.1-SNAPSHOT</version>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-pmd-plugin</artifactId>
                    <version>${maven-pmd-plugin.version}</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>check</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <failsOnError>false</failsOnError>
                        <source>${java.source.version}</source>
                        <target>${java.source.version}</target>
                    </configuration>
                </plugin>
            </plugins>
        </build>
        <reporting>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>${maven-checkstyle-plugin.version}</version>
                    <configuration>
                        <configLocation>our_checkstyle.xml</configLocation>
                        <targetJdk>${java.source.version}</targetJdk>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-pmd-plugin</artifactId>
                    <version>${maven-pmd-plugin.version}</version>
                    <configuration>
                        <targetJdk>${java.source.version}</targetJdk>
                    </configuration>
                </plugin>
            </plugins>
        </reporting>
    </profile>
</profiles>

<!-- <dependencyManagement> -->
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <scope>test</scope>
    </dependency>

...

    <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>${google.guava.version}</version>
    </dependency>

...

</dependencies>
<!-- </dependencyManagement> --> 
```

我认为在 maven 项目中使用 maven checkstyle 插件以及使用 guava 框架非常常见。所以我真的想知道我们在这里做错了什么；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:19:57.793

非常感谢@AndrewLogvinov。他在对这个问题的评论中提供了可行的解决方案。只需将 google-collections 依赖项添加到 maven-checkstyle-plugin 的依赖项中：

```
<dependency>
    <groupId>com.google.collections</groupId>
    <artifactId>google-collections</artifactId>
    <version>1.0</version>
</dependency> 
```

# facebook-comments - 当用户必须登录 FB 帐户时，html 页面上的 Facebook 评论插件不会重定向

> ID：15874513
> 
> 赞同：1
> 
> 时间：2013-04-08T08:27:29.840
> 
> 标签：facebook-comments

已实现 Facebook 评论插件。如果用户未登录 Facebook 帐户，则在单击“评论”按钮并登录其帐户后，除非按下 F5 键，否则不会发生任何事情。这是正确的还是我需要做些什么。

单击评论按钮时，登录屏幕显示：登录以使用您的 Facebook 帐户。然后请求登录凭据。

我添加了一个登录按钮，按下该按钮时会显示“登录以使用带有评论的 Facebook 帐户”。然后请求登录凭据。

这是带有评论的页面示例： [http ://www.shahphoto.co.uk/wedding_photographers/wedding-photographer-cornwall-pervaiz-​​shah.html](http://www.shahphoto.co.uk/wedding_photographers/wedding-photographer-cornwall-pervaiz-shah.html)

# django-admin - 删除“你确定……？” 消息不应显示未在管理员中声明的对象

> ID：15874516
> 
> 赞同：1
> 
> 时间：2013-04-08T08:27:48.840
> 
> 标签：django-admin

我有以下情况：

```
# class with an admin GUI
Class A(models.Model):
   B_set = models.ManyToManyField('B', null=True, blank=True, through="AlinksB")

# class with an admin GUI
Class B(models.Model):
   ...

# internal m2m class with an additional order that could only appear in inlines, not in a dedicated GUI
Class AlinksB(models.Model):
   additional_attribute = ... 
```

当我通过 Django 的 GUI 从 A 关系中删除一个项目时，我得到一个“你确定吗？” 显示的消息：

*   一个关系详细名称：A 的 unicode
*   AlinksB 关系详细名称：与我正在删除的 A 对象相关的任何 AlinksB 的 unicode

但是 AlinksB 没有声明管理 GUI，所以我希望它在删除时不可见（因为用户不知道它是什么！）。有人有想法可以帮助我吗？

干杯

# php - 如何使用 PHP 生成 GUID（没有 com_create_guid）

> ID：15874517
> 
> 赞同：1
> 
> 时间：2013-04-08T08:27:52.167
> 
> 标签：php, guid

我的任务是生成唯一标识符。为此，我决定使用[全球唯一标识符。](http://en.wikipedia.org/wiki/Globally_unique_identifier)它们使用[RFC 4122 A Universally Unique IDentifier (UUID) URN Namespace](http://www.ietf.org/rfc/rfc4122.txt)进行描述。（如果我在这里错了，请纠正我。）

使用 PHP 生成 GUID 的可靠方法是什么？

谢谢你。

# php - php laravel中的数组到字符串转换错误

> ID：15874519
> 
> 赞同：1
> 
> 时间：2013-04-08T08:28:04.633
> 
> 标签：php, laravel, laravel-4

我正在创建一个基于事件的网站。我正在使用 laravel 与骨干。我正在使用带有 laravel 的主干js 从数据库中检索数据，如下所示

```
var events = new Events();
new EventsView({el: $("#calendar"), collection: events}).render();
events.fetch(); 
```

在服务器端，我有以下控制器

```
class Calendars_Controller extends Base_Controller {

public $restful = true;

public function get_index()
{
    //print_r(Calendar::all() );
    return Calendar::all();
}

} 
```

但这会返回以下错误

```
Unhandled Exception

Message:

Array to string conversion
Location:

/Applications/MAMP/htdocs/calendar/laravel/response.php on line 272 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:39:27.790

如果你没有使用 Laravel 4，你可能想尝试从你的控制器返回以下内容：

```
$events = Calendar::all();
return Response::eloquent($events); 
```

# php - 如何将多维数组中的 id 所有值合并到一个数组中

> ID：15874521
> 
> 赞同：0
> 
> 时间：2013-04-08T08:28:17.623
> 
> 标签：php

我有一个这样的数组：

```
[0] => Array
    (
        [id] => 13

        [children] => Array
            (
                [0] => Array
                    (
                        [id] => 14
                        [parent_id] => 13

                    )

                [1] => Array
                    (
                        [id] => 15
                        [parent_id] => 13

                    )

            )

    ) 
```

如何从该数组中获取所有 [id] 并将它们输入到这样的一个数组中：

```
 $arr = array(13,14,15) 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:33:13.180

`$a`是您的原始数组。

```
array_merge(array($a['id']),
            array_map(function($child) { return $child['id']; }, $a['children'])); 
```

# apache - 无法在 Apache/2.2.15 (Unix) 上使用 ServerName 访问虚拟主机

> ID：15874525
> 
> 赞同：1
> 
> 时间：2013-04-08T08:28:30.767
> 
> 标签：apache, unix, virtualhost

我的 vhost.conf

```
NameVirtualHost 111.111.111.111:80

<VirtualHost 111.111.111.111:80>
  DocumentRoot /var/www/vhosts/blog.xxx.jp/wordpress
  ServerName blog.xxx.jp

  AddOutputFilterByType DEFLATE text/html text/plain text/xml application/javascript text/css application/json
  LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{cookie}i\" \"%{Set-cookie}o\"" cookie
  CustomLog "|/usr/sbin/cronolog -S /var/www/vhosts/blog.xxx.jp/statistics/logs/access_log-last /var/www/vhosts/blog.xxx.jp/statistics/logs/access_log-%Y-%U" cookie
  ErrorLog  "|/usr/sbin/cronolog -S /var/www/vhosts/blog.xxx.jp/statistics/logs/error_log-last /var/www/vhosts/blog.xxx.jp/statistics/logs/error_log-%Y-%U"

  <Directory /var/www/vhosts/blog.xxx.jp/wordpress>
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost>

<VirtualHost 111.111.111.111:80>
  DocumentRoot /var/www/vhosts/shop.xxx.jp/eccube-2.12.2/html
  ServerName shop.xxx.jp
  AddOutputFilterByType DEFLATE text/html text/plain text/xml application/javascript text/css application/json
  LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{cookie}i\" \"%{Set-cookie}o\"" cookie
  CustomLog "|/usr/sbin/cronolog -S /var/www/vhosts/shop.xxx.jp/statistics/logs/access_log-last /var/www/vhosts/shop.xxx.jp/statistics/logs/access_log-%Y-%U" cookie
  ErrorLog  "|/usr/sbin/cronolog -S /var/www/vhosts/shop.xxx.jp/statistics/logs/error_log-last /var/www/vhosts/shop.xxx.jp/statistics/logs/error_log-%Y-%U"

  <Directory /var/www/vhosts/shop.xxx.jp/eccube-2.12.2/html>
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

服务器版本：Apache/2.2.15 (Unix) 服务器搭建：2013 年 2 月 22 日 11:19:58

我可以访问 shop.xxx.jp，但不能访问 blog.xxx.jp（它不是 ping）。任何帮助将不胜感激。

我试图删除第二部分 & 我的 vhost.conf 开始看起来像这样 ⬇</p>

```
NameVirtualHost 111.111.111.111:80

<VirtualHost 111.111.111.111:80>
  DocumentRoot /var/www/vhosts/blog.xxx.jp/wordpress
  ServerName blog.xxx.jp

  AddOutputFilterByType DEFLATE text/html text/plain text/xml application/javascript text/css application/json
  LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{cookie}i\" \"%{Set-cookie}o\"" cookie
  CustomLog "|/usr/sbin/cronolog -S /var/www/vhosts/blog.xxx.jp/statistics/logs/access_log-last /var/www/vhosts/blog.xxx.jp/statistics/logs/access_log-%Y-%U" cookie
  ErrorLog  "|/usr/sbin/cronolog -S /var/www/vhosts/blog.xxx.jp/statistics/logs/error_log-last /var/www/vhosts/blog.xxx.jp/statistics/logs/error_log-%Y-%U"

  <Directory /var/www/vhosts/blog.xxx.jp/wordpress>
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

& 带有 Wordpress 的网站开始在这个 url 上工作 -> shop.xxx.jp 也许，这将是一个提示或其他东西 :)

更新我运行-> dig blog.xxx.jp

```
; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.10.rc1.el6_3.6 <<>> blog.salaf.jp
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 19121
;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;blog.xxx.jp.           IN  A

;; AUTHORITY SECTION:
xxx.jp.     10674   IN  SOA ns36.joeswebhosting.net. support-    tech.joeswebhosting.net. 2013032104 86400 7200 3600000 86400

;; Query time: 0 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Tue Apr  9 10:45:56 2013
;; MSG SIZE  rcvd: 103 
```

# javascript - 如何在 Javascript 中声明这种结构

> ID：15874526
> 
> 赞同：0
> 
> 时间：2013-04-08T08:28:31.990
> 
> 标签：javascript

我需要在 Web 服务所需的这种类型的结构中声明和插入元素。所以我的服务输入是这样的：

```
data["A"]["12"]="word" (data)["String"]["String"]=(String) 
```

我不知道这是否称为（HashList 或 MapList）我认为它不是多维数组，因为它没有被 0,1 索引....n 我如何声明这种类型的结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:30:47.540

这只是一个对象：

```
var data = {
    A: {
        '12': 'word'
    }
} 
```

可以使用括号表示法访问或设置 JavaScript 对象的属性，就像在您的示例中一样。

[使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

# php - 变量中的字符串中的变量 ?? PHP

> ID：15874528
> 
> 赞同：0
> 
> 时间：2013-04-08T08:28:40.237
> 
> 标签：php, mysql, string, variables

我正在编写一个带有可变子句的重复出现的 sql 选择。在子句中，我有一个 PHP 变量（应该稍后在 WHILE 中替换。

我的代码：

```
$custaccount_id_clause = "(SELECT DISTINCT(custaccount_id) AS custaccount_id FROM accountcomms_def_tbl a WHERE subagent_def_id = " . '\'$interest_id\'' . " AND agentorder > (SELECT agentorder FROM accountcomms_def_tbl WHERE subagent_def_id = '$subagent_def_id' and custaccount_id = a.custaccount_id))"; 
```

$subagent_def_id 有效，因为它已经定义。

$interest_id 不起作用，因为它没有定义。我稍后在一个 while 循环中尝试用 $interest_id 替换它，在该循环中我将 $custaccount_id_clause 作为 while 循环的一部分调用：

```
 $allresidual_sql = mysql_query("SELECT SUM(txn_value) as txn_sum, COUNT(DISTINCT(custaccount_id)) AS accounts FROM account_stmnt_tbl WHERE txn_type IN ('Fixed Residual','Variable Residual','One Time Adjustment') AND custaccount_id IN ". $custaccount_id_clause)or die(mysql_error()); 
```

1.  在 $custaccout_id 子句中，我有文本“$interest_id”，我希望 PHP 替换其中的变量。它没有替换变量。

2.  这是我正在为演示编写的一个快速示例应用程序，请不要告诉我我正在使用哪个 API，因为我不会编写任何投入生产的代码！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:58:06.547

使用您想要使用的第一个变量 ($interest_id) 的一种简单方法是对其进行测试并在其中放置一个 null 而不是以直接方式放置变量，如下所示：

```
WHERE subagent_def_id = '" . ($interest_id ? $interest_id : null) . "' AND agentorder 
```

这应该可以防止您收到有关未定义的变量/属性的错误。

替换部分让我很感兴趣......你的意思是，在你的结构中的给定点，替换`$interest_id`为，比方说，`$my_other_variable`？如果您将整个 SQL 查询建模为字符串，并且根据给定的条件重新编写它，您就可以做到这一点。

像这样的东西可以工作（这只是一个简单的测试，如果你认为合适，可以根据你的需要进行调整）：

```
$query = ($a ? "SELECT * FROM `products` WHERE `price` > '{$a}';" : "SELECT * FROM `products` WHERE `date_added` < '{$b}' AND price > 20;"); 
```

如果我正确地理解了你的话。否则，我怀疑您想使用该`eval()`函数来解析您的编码字符串并让 PHP 按您的意愿处理您的变量。

希望有帮助

# php - 当用户通过 PHP 更新他/她的状态时如何删除 mysql 中的额外行

> ID：15874529
> 
> 赞同：0
> 
> 时间：2013-04-08T08:28:51.827
> 
> 标签：php, mysql, database

我制作了一个表单，它采用发布的 youtube 网址并将视频 ID 保存到数据库中。然后它从数据库中检索 ID，并将其插入 iframe。

只显示了 6 个视频，如何让用户在发布 6 个视频后，每次发布新视频时删除第一个视频？

基本上我希望它只有 6 个存储在数据库中，并且每次提交新帖子时，都会从数据库中删除第一个帖子。

这就是我现在所拥有的。

```
<div style="position:absolute; top:100px; left:830px; height:120px; width:680px; background-color:#d0d0d0; font-size:18px; color:#f1f1f1; text-align:center; z-index:0; overflow:none; color:#111;  -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
    box-shadow:inset 0px 1px 0px 0px #ffffff;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
    background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
    background-color:#ededed;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;">

<form action="index.php" method="post">
<label for="song">What are you listening to?:</label><br>
<textarea name="song" onfocus="this.select()" id="song" rows="3" cols="71" style="text-align:center;">Post a youtube link here.</textarea>
<input type="submit" class="personal" value="Share" /> 
</form>
</div>

<?php
if ($_POST['song'])
{
$yvid = $_POST['song'];
parse_str( parse_url( $yvid, PHP_URL_QUERY ), $my_array_of_vars );
$yid = $my_array_of_vars['v'];
mysqli_query ($con,"INSERT INTO songs (user_name, ytid) VALUES ('".$_SESSION['user_name']."','".$yid."')");
}
?>
<div style="position:absolute; display:inline-block; background-color:transparent; height:560px; width:800px; left:810px; top:200px; border:0px; color:#dedede; overflow:auto;">
<?php

$result = mysqli_query($con,"SELECT * FROM songs WHERE user_name='".$_SESSION['user_name']."' ORDER BY time DESC LIMIT 6");
while($row = mysqli_fetch_array($result))
  {
        $ytsong = $row['ytid'];
        $ytun = $row['user_name'];
        $ytt = $row['time'];
        echo "<p style=\"display:inline-block; height:220px; width:200px; text-align:center; padding:20px; border:0px; background-color:transparent;\">";
        echo "<a class=\"vname\" href=\"http://s3v3nl3tt3r5.com/profile.php?username=$ytun\">$ytun</a> posted this at $ytt";
    echo "<iframe style=\"display:inline-block;\" width=\"200\" height=\"200\" src=\"http://www.youtube.com/embed/$ytsong\" frameborder=\"0\" allowfullscreen></iframe>";
    echo "<a class=\"personal\" href=\"http://www.youtube-mp3.org/get?video_id=$ytsong\" target=\"_blank\">Download Mp3</a>";
}
?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:47:59.140

`id`在表中创建一个自动增量列`songs`。

然后插入新值。插入后。获取行数和最小 id ：

`'select count(*), min(id) from songs where user_name = '.$user_name;`

检查计数是否超过 6 对 min id 执行删除语句

```
if($count > 6)
{
"delete from songs where id = $min_id "
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:44:33.513

使用主键自动递增创建一个新列“id”并尝试以下查询。

```
DELETE FROM songs WHERE id = (SELECT id FROM songs WHERE 
user_name='".$_SESSION['user_name']."' ORDER BY TIME ASC LIMIT 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:41:24.980

```
I think you need to take new column in songs table
for example you can take id column auto-increment  and primary 

After Insertion check count of row for that user

SELECT count(*) as total FROM songs WHERE user_name='".$_SESSION['user_name']."' 

if total come greater than six then get minimum  id from songs table and 

SELECT min(ID) FROM songs WHERE user_name='".$_SESSION['user_name']."' 

after getting minimum id you can run delete query 

delete from song where id=$minid 
```

# php - INSERT INTO 不使用 bindparam 插入

> ID：15874531
> 
> 赞同：1
> 
> 时间：2013-04-08T08:28:53.840
> 
> 标签：php, pdo, sql-insert

试图在我的表中插入一行。有一匹母马，尝试使用数十个示例`tinterweb`都没有成功，我一定不明白 PDO 是如何工作的。

```
$stmt = $dbh->prepare ("INSERT INTO table_name (date, link, desc) 
VALUES (:date,:name,:desc)");
$stmt -> bindParam(':date', $date);
$stmt -> bindParam(':name', $name);
$stmt -> bindParam(':desc', $desc);
$stmt -> execute();

move_uploaded_file($_FILES["file"]["tmp_name"], $upload); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:33:09.223

1.  您不应允许用户对您的查询进行任何直接输入。
2.  也不应该有用户定义的表名。您的数据库结构错误。它应该是一个**预定义**的表来存储**所有**用户的数据。所以，它必须是字段内容，而不是表名
3.  您需要先连接到 PDO，并正确连接。请参阅[PDO 标签 wiki中的示例](https://stackoverflow.com/tags/pdo/info)
4.  因此，您将能够看到错误。
5.  从错误中您必须知道这`desc`是一个保留字并且必须进行格式化。

所以，代码必须是

```
$stm = $dbh->prepare("INSERT INTO table (date,link,`desc`,type) VALUES (?,?,?,?)");
$stm->execute(array($date,$name,$desc,$type));

move_uploaded_file($_FILES["file"]["tmp_name"], $upload); 
```

# javascript - XMLHttpRequest 未定义，在 chrome 扩展选项页面中

> ID：15874535
> 
> 赞同：4
> 
> 时间：2013-04-08T08:29:03.090
> 
> 标签：javascript, google-chrome-extension, xmlhttprequest

我正在尝试在扩展的选项页面中创建一个 XMLHttpRequest。在我的`options.js`文件中，我只有以下代码：

```
if (window.XMLHttpRequest){
        var xhr = new getXMLHttpRequest();
} 
```

但是我在控制台中有这个错误

> 未捕获的 ReferenceError：未定义 getXMLHttpRequest

我在[这里](https://stackoverflow.com/questions/9421933/cross-origin-xmlhttprequest-in-chrome-extensions)看到 getXMLHttpRequests 是*托管应用程序*的问题，但在这种情况下，它是一个简单的*扩展*，所以我不明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:31:31.713

要构造一个 XHR 对象，您使用`new XMLHttpRequest();`.

`getXMLHttpRequest`不是标准功能。

> 看到这里getXMLHttpRequests有问题……</p>

链接另一端的问题不使用名称以*get*开头的函数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-03-17T09:10:58.203

您可以使用

```
function GetXmlHttpObject()
{ 
    var objXMLHttp=null;
    if (window.XMLHttpRequest)
    {
        objXMLHttp=new XMLHttpRequest();
    }
    else if (window.ActiveXObject)
    {
        objXMLHttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    return objXMLHttp;
} 
```

# git - 来自 git 的类似 github 的 svn 结帐

> ID：15874537
> 
> 赞同：1
> 
> 时间：2013-04-08T08:29:10.447
> 
> 标签：git, svn, github, integration

GitHub 为 git 提供了一个 svn 接口，这里解释： [https ://github.com/blog/966-improved-subversion-client-support](https://github.com/blog/966-improved-subversion-client-support)

我可以在我的自托管存储库上部署类似的解决方案吗？它是开源的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T16:07:19.800

看看[SubGit](http://subgit.com)。

可以将 SubGit 安装到 Subversion 存储库中，并同时使用 Subversion 和 Git。请注意，从[2.0 版开始](http://subgit.com/eap)， SubGit 能够同步驻留在不同主机上的 SVN 和 Git 存储库。

SubGit 是一个商业工具；它对开源、学术和小型项目是免费的。SubGit 2.0 只要处于 EAP 阶段就免费。

免责声明：我是 SubGit 开发人员之一。

# c# - asp.net c# marquee with sql ,innertext 不使用换行

> ID：15874539
> 
> 赞同：1
> 
> 时间：2013-04-08T08:29:16.483
> 
> 标签：c#, asp.net, html, sql-server-2008, marquee

我是编程领域的新手......所以请为那个问题给出正确的答案。

我正在为“公司新闻”使用带有 sql 数据库的动态选取框，代码运行正常，但选取框不会为新点创建新行。

html代码：

```
<asp:Panel ID="Panel1" runat="server" CssClass="style42" Width="762px" 
    BorderStyle="Solid" Font-Bold="True" Font-Size="Medium" BackColor="#78BBE6" 
    Height="267px">
    <div style="width: 762px; " class="style41">
       <marquee id="mar1" runat="server" direction="up" onmouseover="this.stop()" 
                onmouseout="this.start()" scrollamount="2" scrolldelay="1" 
                class="style43" >
            <strong>
            </strong>
       </marquee>   
    </div>
</asp:Panel> 
```

c#代码：-

```
protected void Page_Load(object sender, EventArgs e)
{
    SqlConnection obj = new SqlConnection("data source=DHAVAL-PC;"+
                       "initial catalog=user_master;"+
                       "integrated security=true;user id=sa;password=1234");
    string login1 = "select * from admin_data";
    SqlCommand cmd1 = new SqlCommand(login1,obj);
    obj.Open();
    SqlDataReader user = cmd1.ExecuteReader();
    if (user.HasRows)
    {
        user.Read();
        SqlDataReader t1;
        user.Close();
        t1 = cmd1.ExecuteReader();
        t1.Read();               
        this.mar1.InnerHtml= t1[6].ToString();  
           //what to do for newpoint in newline                             
        obj.Close();
     }
 } 
```

在我的数据库中只有一个用于输入新闻内容的字段...当使用文本框显示新闻时效果很好..它在新行中显示新点..但是选框不像文本框那样显示。

请给我正确的建议......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:38:16.223

`\n`在文本框中输入换行符会在 C# 中生成换行符 ( )。HTML 忽略换行符，要在 HTML 中强制换行，您必须使用`<br />`标记：

```
this.mar1.InnerHtml= t1[6].ToString().Replace("\n", "<br />"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:44:20.850

您需要更改此行

```
 this.mar1.InnerHtml= t1[6].ToString();  
       //what to do for newpoint in newline 
```

至

```
 this.mar1.InnerHtml+= t1[6].ToString()+"<br/>";  
       //what to do for newpoint in newline 
```

或者你的单条记录中有换行符，那么你应该这样做

```
this.mar1.InnerHtml+= t1[6].ToString().Replace("\n", "<br />"); 
```

# php - 在我的登录系统上获取 id

> ID：15874546
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:29:37.887
> 
> 标签：php, mysql

我必须在我的网站上建立一个登录系统，但我的用户在他们的网站上没有相同的东西，所以我将`$_GET`我的用户的 customers_id（来自数据库）在他们登录时的 URL 中。

但我看不出怎么做。

我的登录代码是这样的。

```
 <?php
$email = $_POST['user'];
$password= $_POST['pass'];
$login = $_POST['login'];
$user_custermers_id = $_GET['id'];

if($login == 'Login' || isset($login)) 
{
    global $wpdb;

    $get = mysql_query("SELECT * FROM das_custermer_users WHERE email = '$email' AND password ='" . md5($password)."'") or die(mysql_error());

    $result = mysql_num_rows($get);
    if($result == 0)
    {
        $msg = "Wrong E-mail or Password";
    }
    else
    {
        session_start();

        $_SESSION['email'] = $email;

        header("location: http://dashboard.tg.com");
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:38:48.767

你正在编写非常糟糕和危险的代码。如果我抓住 $_POST['email'] 并将其更改为 '--;DELETE your_data_base; ?

1.  您没有检查您拥有的数据，并且在您的示例中可以进行 SQL 注入。

    ```
    if($login == 'Login' || isset($login)) 
    ```

2.  这个条件是没有意义的，因为如果有 $login== 'login' 那么 isset 是 TRUE 所以第二个 OR 条件是不必要的

    session_start();

3.  你应该把它移到第一行。

4.  global 是一种旧的 PHP 语法，请避免使用它。

5.  $user_custermers_id = $_GET['id']; 这真的很糟糕。您应该转换为 int 或使用 intval()
6.  如果我是你，我会使用 PDO 连接。PDO 有 PDOStatement::rowCount 你可以使用这个属性来检查是否有任何行。

PDO 抛出异常，因此不需要 mysql_errror()。mysql_num_rows() 自 PHP 5.5.0 起已弃用，将来将被删除，因此请避免使用它。

我在互联网上找到了这个样本。此代码也应该在 try catch 块中以处理异常

```
$login = mysql_escape_string(trim($_POST['login']));
$pass = mysql_escape_string(trim($_POST['pass']));

$dbh = new PDO('mysql:host=localhost;dbname=mydatabase', 'user', 'pass');
$sth = $dbh->prepare("SELECT * FROM table WHERE login = ? AND pass = ?");
$sth->bindParam(1, $login);
$sth->bindParam(2, md5($pass));
$sth->execute();

if ($sth->rowCount() > 0)
{
  // session stuff,
// refresh page
} 
```

# java - 我如何使用java在迷宫游戏中添加时间限制

> ID：15874551
> 
> 赞同：0
> 
> 时间：2013-04-08T08:29:51.203
> 
> 标签：java, swing, jakarta-ee

我正在用 Java 制作迷宫游戏。我做了一个迷宫板，一个起点和一个终点。当我到达终点时，它退出并显示获胜信息。但我不能添加时间限制。假设玩家必须在 30 秒内到达终点，否则他输掉比赛。请帮我。这是我到目前为止所做的代码......

迷宫.java

```
package Maze;

import javax.swing.JFrame;

public class Maze {
  public static void main(String args[])
  {
      new Maze();

  }
  public Maze()
  {
      JFrame f= new JFrame();
      f.setTitle("Maze Game");
      f.add(new Board());
      f.setSize(460,480);
      f.setLocationRelativeTo(f);
      f.setVisible(true);
      f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  }
} 
```

Board.java

```
 package Maze;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

// @SuppressWarnings("serial")
@SuppressWarnings("serial")
public class Board extends JPanel implements ActionListener
 {
     private Timer timer;
     private Map m;
     private Player p;
     private boolean win=false;

     long startTime = System.currentTimeMillis(); 
     long elapsedTime;

     //private String Message="";
     //private Font font=new Font("Serif",Font.BOLD,50);

     public Board()
     {
         long elapsedTime = System.currentTimeMillis() - startTime; 
         elapsedTime=elapsedTime/1000;
         m= new Map();
         p= new Player();
        addKeyListener(new Al());
        setFocusable(true);
         timer=new Timer(25, this);
         timer.start();
     }

     public void actionPerformed(ActionEvent e)
     {
         if(m.getMap(p.getTileX(), p.getTileY()).equals("f"))
         {
             //Message="WINNER";
             win=true;
         }
         if(elapsedTime>=5)
             win=true;

        repaint(); 
     }
     public void paint(Graphics g)
     {
        super.paint(g);
        if(!win)
        {
         for(int y=0;y<14;y++)
         {
             for(int x=0;x<14;x++)
             {
                 if(m.getMap(x,y).equals("f"))
                     g.drawImage(m.getFinish(), x*32, y*32, null);
                 if(m.getMap(x, y).equals("w"))
                        g.drawImage(m.getWall(), x*32, y*32, null);
                if(m.getMap(x, y).equals("g"))
                        g.drawImage(m.getGrass(), x*32, y*32, null);

             }
         }
         g.drawImage(p.getPlayer(), p.getTileX()*32, p.getTileY()*32,null);
        }

         if(win)
         {
             g.drawImage(m.getWinn(), 32, 32, null);
            // g.setColor(Color.ORANGE);
             //g.setFont(font);
             //g.drawString(Message, 150, 200);
         }
     }
     public class Al extends KeyAdapter{

         public void keyPressed(KeyEvent e){
             int keycode= e.getKeyCode();

             if(keycode==KeyEvent.VK_UP ){
                 if(!m.getMap(p.getTileX(),p.getTileY()-1).equals("w")){
                 p.move( 0, -1);
                 }
             }

             if(keycode==KeyEvent.VK_DOWN ){
                 if(!m.getMap(p.getTileX(),p.getTileY()+1).equals("w")){
                 p.move( 0, 1);
                 }
             }
             if(keycode==KeyEvent.VK_LEFT ){
                 if(!m.getMap(p.getTileX()-1,p.getTileY()).equals("w")){
                 p.move( -1, 0);
                 }
             }
             if(keycode==KeyEvent.VK_RIGHT ){
                 if(!m.getMap(p.getTileX()+1,p.getTileY()).equals("w")){
                     p.move( 1, 0  );    
                 }

             }
         }
        /* public void keyRealeased(KeyEvent e){

         }
         public void keyTyped(KeyEvent e){

         }*/
     }
 } 
```

地图.java

```
package Maze;

import java.awt.*;
import java.io.*;
import java.util.*;

import javax.swing.ImageIcon;

public class Map {
     private Scanner m;
     private String Map[]=new String[14];

     private Image grass,wall,finish,winn;

    public Map(){

        ImageIcon img = new ImageIcon("C://project//7.jpg");
        grass = img.getImage();
        img = new ImageIcon("C://project//2.jpg");
        wall = img.getImage();
        img=new ImageIcon("C://project//hell.gif");
        finish=img.getImage();
        img=new ImageIcon("C://project//12.jpg");
        winn=img.getImage();

        openfile();
        readfile();
        closefile();
    }
    public Image getGrass()
    {
        return grass;
    }
    public Image getWall()
    {
        return wall;
    }
    public Image getFinish()
    {
        return finish;
    }
    public Image getWinn()
    {
        return winn;
    }

    public String getMap(int x, int y){
        String index=Map[y].substring(x, x+1);
        return index;

    }

    public void openfile(){
        try {
            m = new Scanner(new File("C://project//Map.txt"));
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            //e.printStackTrace();
            System.out.println("Error loading file.");
        }
    }
    public void readfile(){
        while(m.hasNext()){
            for(int i=0;i<14;i++){
                Map[i]=m.next();
            }
        }
    }
    public void closefile(){
    m.close();
}
} 
```

播放器.java

```
package Maze;

import java.awt.Image;

import javax.swing.ImageIcon;

public class Player {

    private int tilex,tiley;
    private Image player;
    public Player(){
        ImageIcon img=new ImageIcon("C://project//5990.gif"); 
        player=img.getImage();

         tilex=1;
         tiley=1;

     }

    public Image getPlayer(){
        return player;
    }

    public int getTileX(){
        return tilex; 
    }
    public int getTileY(){
        return tiley; 
    }
     public void move(int dx, int dy ){

         tilex += dx;
         tiley += dy;

     }
} 
```

这是.txt文件

地图.txt

```
wwwwwwwwwwwwww
wggggggwgggggw
wggwwggwgwwggw
wwgggwwwggwggw
wgwgggggggwwgw
wgggwggwwwgggw
wgggwgggwggwww
wggwggwwwggggw
wgwwgggggwwggw
wgggggwwwgwggw
wggwggggwgwwgw
wwwwgwwwwggwgw
wggggwgfgggggw
wwwwwwwwwwwwww 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:58:21.043

你可以做一个工作，添加一个计时器类，它将在 x 秒执行并继续计算变量中的总秒数，当超过限制时你可以停止你的程序。

# icalendar - 从 ics 文件构建日历时出现 ical4j ParserException

> ID：15874552
> 
> 赞同：1
> 
> 时间：2013-04-08T08:29:51.677
> 
> 标签：icalendar, ical4j

我有这段代码可以使用 ical4j 从 ics 文件中导入日历：

```
CalendarBuilder calendarBuilder = new CalendarBuilder();
CompatibilityHints.setHintEnabled(CompatibilityHints.KEY_RELAXED_UNFOLDING, true);
net.fortuna.ical4j.model.Calendar iCalendar;
try {
  iCalendar = calendarBuilder.build(icalInputStream);
} catch (ParserException e) {
  if (logger.isDebugEnabled()) {
    logger.debug("ParserException occurs when building iCalendar object", e);
  }
  throw new ParserException("Cannot parsed the input stream to iCalendar object", e.getLineNo());
} 
```

代码总是抛出 ParserException。我发现如果我从这行 ics 文件中删除 X-RESPONSE-COMMENT，则代码通过：

```
ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=TENTATIVE;CN=abc
def;X-NUM-GUESTS=0;X-RESPONSE-COMMENT="JUGSummerCamp.
Si j&#39;arrive &agrave; trouver un coin tranquille, je viendrais.":mailto:
abc@gmail.com 
```

所以也许问题来自 X-RESPONSE-COMMENT。任何人都可以帮忙吗？谢谢。

**更新：** 确切的例外是：

```
Caused by: java.net.URISyntaxException: Illegal character in path at index 2: Si j&#39;arrive &agrave; trouver un coin tranquille, je viendrais.":mailto:slemeur@exoplatform.com
at java.net.URI$Parser.fail(URI.java:2810)
at java.net.URI$Parser.checkChars(URI.java:2983)
at java.net.URI$Parser.parseHierarchical(URI.java:3067)
at java.net.URI$Parser.parse(URI.java:3025)
at java.net.URI.<init>(URI.java:577)
at net.fortuna.ical4j.util.Uris.create(Uris.java:108)
at net.fortuna.ical4j.model.property.Attendee.setValue(Attendee.java:108)
at net.fortuna.ical4j.data.CalendarBuilder.propertyValue(CalendarBuilder.java:294)
at net.fortuna.ical4j.data.CalendarParserImpl.parseProperty(CalendarParserImpl.java:236)
at net.fortuna.ical4j.data.CalendarParserImpl.parsePropertyList(CalendarParserImpl.java:167)
at net.fortuna.ical4j.data.CalendarParserImpl.parseComponent(CalendarParserImpl.java:334)
at net.fortuna.ical4j.data.CalendarParserImpl.parsePropertyList(CalendarParserImpl.java:164)
at net.fortuna.ical4j.data.CalendarParserImpl.parse(CalendarParserImpl.java:107)
... 31 more 
```

包含非法字符的行是 ATTENDEE 属性的最后一行。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:22:53.127

X-RESPONSE-COMMENT 参数值有一个 CRLF（或 LF），后面没有空格：

```
JUGSummerCamp.<CRLF>Si j&#39;arrive &agrave; trouver un coin tranquille, je viendrais. 
```

因此，CRLF 不被视为行折叠序列，而是被视为常规字符序列。但是，根据 RFC5545，参数值中不允许使用控制字符（请参阅[https://www.rfc-editor.org/rfc/rfc5545#section-3.1](https://www.rfc-editor.org/rfc/rfc5545#section-3.1)）。

因此，您可以在 CRLF 之前添加一个空格（使其成为折叠线），或者完全删除它（但您可能需要在其他地方折叠线 - 最大行长为 75 个字符）。

这也意味着预期的换行符将丢失。有一个相对较新的 RFC ( [RFC6868](https://www.rfc-editor.org/rfc/rfc6868) )，它引入了一种新的编码，允许在参数值中格式化文本换行符，但据我记得 ical4j 还不支持它。显然，最初生成您的 icalendar 流的软件也不支持此 RFC。

# ruby-on-rails - Postgres 会定期减慢 heroku RoR 应用程序的速度

> ID：15874556
> 
> 赞同：1
> 
> 时间：2013-04-08T08:30:00.690
> 
> 标签：ruby-on-rails, ruby, heroku, rails-postgresql

我面临定期 RoR 3 应用程序不可用的问题。通常我每天有 15 分钟的空闲时间。该问题与应用程序负载无关，我在日志中找不到任何错误。我看到的唯一错误是 H12 请求超时。我将 postgres 计划更改为生产，但问题仍然存在。在 newrelic 上，我看到 Postgres 在 H12 错误之前的响应时间严重增加。请帮忙。

帕维尔。

# php - 不能在zend框架中使用“”

> ID：15874561
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:30:30.443
> 
> 标签：php, zend-framework

在编码中我总是写

`<?= $this->description?>` *而不是* `<?php echo $this->description ?>`

它更快更容易。但是，在我开始使用 zend 框架后，我无法使用该功能。所以你有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T08:33:35.560

您需要`short_open_tag`在配置文件 php.ini 中启用该选项。默认情况下禁用短标签。

# c# - 如何为网络浏览器设置默认 IE9？

> ID：15874565
> 
> 赞同：1
> 
> 时间：2013-04-08T08:30:39.670
> 
> 标签：c#, browser

我正在用 C#.NET 开发一个应用程序。我想使用 IE9 版本的 WebBrowser；IE9 是否安装在系统上。

是否有可能将 IE9 与 WebBrower 一起使用，并且可能是 IE9 未安装在我的系统中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T15:34:50.867

对于 Windows Internet Explorer 8 或更高版本，FEATURE_BROWSER_EMULATION 功能定义了 Internet Explorer 的默认仿真模式。值 9999 - 强制网页以 IE9 标准模式显示，无论 !DOCTYPE 指令如何。您需要在目标系统上安装 IE9 或更高版本。检查[Internet 功能控制 (B..C)](http://msdn.microsoft.com/en-us/library/ee330730%28v=vs.85%29.aspx)

```
private static void WebBrowserVersionEmulation()
{
    const string BROWSER_EMULATION_KEY = 
    @"Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION";
    //
    // app.exe and app.vshost.exe
    String appname = Process.GetCurrentProcess().ProcessName + ".exe";
    //
    // Webpages are displayed in IE9 Standards mode, regardless of the !DOCTYPE directive.
    const int browserEmulationMode = 9999;

    RegistryKey browserEmulationKey =
        Registry.CurrentUser.OpenSubKey(BROWSER_EMULATION_KEY,RegistryKeyPermissionCheck.ReadWriteSubTree) ??
        Registry.CurrentUser.CreateSubKey(BROWSER_EMULATION_KEY);

    if (browserEmulationKey != null)
    {
        browserEmulationKey.SetValue(appname, browserEmulationMode, RegistryValueKind.DWord);
        browserEmulationKey.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T08:38:55.727

插入

```
"<meta  http-equiv=\"X-UA-Compatible\" content=\"IE="\9\" >" 
```

进入您的 html 页面，但您必须知道`Web_browser`依赖于已安装在目标操作系统上的 IE 版本的控制

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-02T15:45:47.983

为此，您必须查找

*   底层浏览器的版本是什么（注册表项可能会返回以前安装的版本）。我使用的最简单的代码是询问 WebBrowser 控件

    ```
    `WebBrowser browser= new WebBrowser
    Version ver= browser.Version(); // With ver.Major you can decide the EMULATION` 
    ```

`*   您的应用程序的 app-exe 名称（在 vs 调试环境中运行时与“myapp”.vshost.exe 不同）。我在某处找到的这段代码：

    ```
    `// This code detects the .vshost. when running in vs ide
    [DllImport("kernel32.dll", SetLastError=true)]
    private static extern int GetModuleFileName([In]IntPtr hModule,
                                            [Out]StringBuilder lpFilename,
                                            [In][MarshalAs(UnmanagedType.U4)] int nSize);
    public static String getAppExeName()
    {
       StringBuilder appname= new StringBuilder(1024);
       GetModuleFileName(IntPtr.Zero, appname, appname.Capacity); 
       return Path.GetFileName(appname.ToString()); // return filename part
    }` 
    ```

    `*   现在，您可以计算浏览器兼容性所必需的 Registry-Entry。条目可能在 Registry.LocalMachine（需要访问权限）或 Registry.CurrentUser 中。我在每个程序启动时检查注册表，所以，我首先测试条目是否存在

    ```
    `string regSubKey= @"Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION";
    string version= "" + ver.Version + "0000"; // installed version x 10000
    string appname= getAppExeName();
    RegistryKey rs = Registry.CurrentUser.OpenSubKey(regSubKey);
    keyval = rs.GetValue(appname);
    rs.Close();
    if (keyval != null && keyval.ToString().Equals(version))
         return;     // already done and no browser update installed.
    //
    // Create key for this app and this version
    rs = Registry.LocalMachine.CreateSubKey(regSubKey);
    rs.SetValue(app, sversion, RegistryValueKind.DWord);
    rs.Flush();
    rs.Close();` 
    ```

    `*   在 64 位 + 32 位模式下，您可能还必须在“Software\Wow6432Node”中创建一个条目``` 

 ``设置注册表项后，WebBrowser 控件应以所需的仿真开始

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:38:06.387

您可以从注册表中读取版本：

```
var ieVersion = Registry.LocalMachine.OpenSubKey(@"Software\Microsoft\Internet Explorer").GetValue("Version"); 
```

或者

如果你有一个 WebBrowser 控件，你可以从那里获取它：

```
WebBrowser  browser = new WebBrowser();
Version ver = browser.Version; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T08:34:23.250

不，webbrowser 元素（我想你的意思是这个）是基于 IE6 的。您只能从程序中启动 IE9 的进程（不知道名称，但对于 firefox，它只是“firefox.exe”）。``

# html - 奇怪的位置绝对铬错误

> ID：15874571
> 
> 赞同：4
> 
> 时间：2013-04-08T08:30:44.993
> 
> 标签：html, css, google-chrome, css-position

我绝对将元素定位在浮动 div 中。在我们调整窗口大小之前，最后一个绝对定位的元素会粘在 chrome 中的 div 顶部（请参见[此处](http://siscode.me/c/1_1-2-3-4-5-6_38-201-_1-210-_5-245-)）

到目前为止我尝试过的事情：

*   将容器放入浮动元素中
*   溢出：隐藏/自动到浮动、元素和容器

这只发生在 chrome 中。知道为什么/发生了什么吗？

![在此处输入图像描述](https://i.stack.imgur.com/5FcCd.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:29:25.723

只有你必须做的小事，其他一切都很棒。用这个

```
.schedule-course-slot-wrapper {
position: absolute; /*Important*/
border: thin solid;
border-radius: 3px;
margin: 0 2px;
padding: 0 3px;
height: 100%;
} 
```

反而

```
.schedule-course-slot-wrapper {
position: relative; /*Important*/
border: thin solid;
border-radius: 3px;
margin: 0 2px;
padding: 0 3px;
height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T23:28:50.120

你必须使用

```
pop.style.left = l+"px";
pop.style.top = t+"px"; 
```

代替

```
pop.style.posLeft = l;
pop.style.posTop = t; 
```

或两者。

# java - 了解这种情况下的“无效”类型错误？

> ID：15874582
> 
> 赞同：0
> 
> 时间：2013-04-08T08:31:18.057
> 
> 标签：java

我感觉如此接近却又如此遥远！

```
/**
 * A program that accepts and int input through 2 command line arguments then,
 * calculates and prints  all the prime numbers up to that integer
 */

public class Primes {

   /**
   * Main method takes in 2 command line arguments  and calls
    * necessary algorithm
    * 
    * @param args command line arguments
    */
  public static void main(String[]args) {

  int a = Integer.parseInt(args[0]);
  int n = Integer.parseInt(args[1]);

  for(;args.length < 2;) {

     if(a == 1){
        System.out.println(algorithmOne(n));
        /* }
           else if(a == 2) {
           //reference to method
           }
           else{ //reference to method
           }*/
     }

     System.err.println(timeTaken());
  }
 }

  /**Algorithm 1 method
   *
   *
   */
  public static boolean algorithmOne(int n) {

     for(int m = 2; m < n; m++) {
        if(n%i == 0)
           return false;
     }
     return true;
  }

  /**
   * Method works out time taken to perform an algorithm
   *
   * 
   */
  public static void timeTaken() {

     long startTime = System.currentTimeMillis();
     long time = 0;

     for(int i = 0; i < 1000; i++) {
        time += i;
     }

     long endTime = System.currentTimeMillis();
     System.out.println(endTime - startTime); //prints time taken
  }
} 
```

这是我到目前为止所写的。

我得到的错误是 'void' type not allowed here，我研究并了解到：我使用的方法在需要值的地方不返回值，例如等号的右侧或参数到另一个方法。

问题是，我没有看到它在我的代码中的确切应用！另外，我感觉在我修复这个错误之后会弹出更多错误，所以任何远见都将不胜感激。

感谢您的时间和知识。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T08:32:59.243

你打电话：

```
 System.err.println(timeTaken()); 
```

什么时候：

```
public static void timeTaken() { 
```

那么你希望打印什么？`timeTaken`不返回任何值。

你可以做的是返回一个值`timeTaken`：

```
 public static long timeTaken() {

     long startTime = System.currentTimeMillis();
     long time = 0;

     for(int i = 0; i < 1000; i++) {
        time += i;
     }

     long endTime = System.currentTimeMillis();
     long diff = endTime - startTime;
     System.out.println(diff ); //prints time taken
     return diff;
  } 
```

但请注意，您会打印两次该值（内部`timeTaken`及其返回值）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T08:33:04.433

这发生在 TimeTaken() 的打印中：

```
System.err.println(timeTaken()); 
```

您正在尝试打印无效的内容。`println`（自然）没有接受 void 的重载。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T08:34:02.673

你在`timeTaken()`打电话`System.out.println()`。这是不正确的，因为`System.out.println()`需要获取一个或更多参数，并且由于您的方法不返回任何内容，因此您收到错误消息。

你只需要打电话`timeTaken()`（不带`System.out.println()`）。它将打印您正在计算 insde 的差异，因为您已经在方法中打印了它：

代替：

```
System.out.println(timetaken()); 
```

采用：

```
timetaken(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-08T08:34:09.063

```
System.err.println(timeTaken()); 
```

您一定会在这里遇到错误：您正在调用`System.err.println(timeTaken());`并且您的方法没有返回任何内容，即`void`. 所以你的方法返回类型必须在那里。或者您以这种方式调用该方法。

```
timeTaken() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-08T08:35:08.813

您的方法 timeTaken() 不返回值，但您尝试在该行中使用返回值：

```
System.err.println(""+timeTaken()); 
```

要么让它返回一个字符串以打印到控制台，要么只调用该方法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-08T08:36:33.600

您最好使用 IDE 用 Ja​​va 编写代码。日食，netbeans等

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-08T08:42:10.517

将您的方法返回类型更改为并在方法末尾`long`添加语句。`return`所以你不会`System.err.println(timeTaken());`
在你的代码中得到错误，`timeTaken()`方法正在向 发送`void`值`System.err.println(..)`，而在 JAVA 中没有这样的规范/设计可以发送`void`到任何方法参数。这就是为什么它在行抛出编译器错误`System.err.println(timeTaken());`

```
/**
   * Method works out time taken to perform an algorithm
   *
   * 
   */
  public static long timeTaken() {

     long startTime = System.currentTimeMillis();
     long time = 0;

     for(int i = 0; i < 1000; i++) {
        time += i;
     }

     long endTime = System.currentTimeMillis();
     long totalTime = endTime - startTime;
     System.out.println(totalTime); //prints time taken
     return totalTime;

  } 
```

# javascript - 包括一个带有 Three.js 的图像

> ID：15874583
> 
> 赞同：2
> 
> 时间：2013-04-08T08:31:28.783
> 
> 标签：javascript, image, three.js

我实际上是在尝试将 .jpg 图像包含到我的 3D 场景中。我发现的所有解决方案都包括将这些图像作为纹理应用到网格上：但是场景看起来并不好。确实，无论是平面还是球体，我们都可以看到网格边界……我只想看图像。是否存在另一种解决方案？在我的应用程序中，我想绕地球旋转一架飞机，问题在于包括这架飞机。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:38:51.253

也许类 THREE.Sprite 会完成你想要的效果。THREE.Sprite 可以显示图像，并且可以使用屏幕坐标（例如画布坐标），也可以是 3D 场景的一部分，但精灵图像始终面向相机。如果要旋转图像，则需要将其用作网格上的纹理。无论您最终决定做什么，我都在[http://stemkoski.github.io/Three.js/](http://stemkoski.github.io/Three.js/)上发布了一堆教程式的示例，这可能会有所帮助。祝你好运！

# php - 选择查询不起作用

> ID：15874589
> 
> 赞同：-3
> 
> 时间：2013-04-08T08:32:03.177
> 
> 标签：php, select

问题是配置文件中是mysql所以我把它改成mysqli

但现在我在 html 区域的选择中看不到结果

1.  这是php脚本

    ```
    <?php 
    require 'config.php';

    $query = "SELECT cat_id, category FROM categories LIMIT 1"; 
    $result = mysqli_query($con,$query); 
    if(!$result){
        echo 'Query failed : '.mysqli_error();
        exit(0); 
    }  
    $row = mysqli_fetch_assoc($result);
    //  mysql_fetch_assoc was the problem print_r($row);

    mysql_close($con);

    ?> 
    ```

2.  这是html脚本

    ```
    <select name="cat_id"> </select> 
    ```

3.  这是错误

    ```
    Warning: mysqli_query() expects parameter 1 to be mysqli, resource
    given in /home/content/60/10533160/html/cms/in.php on line 5

    Warning: mysqli_error() expects exactly 1 parameter, 0 given in
    /home/content/60/10533160/html/cms/in.php on line 7  Query failed : 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:42:53.410

看起来您`mysql`不`mysqli`用于连接。

也许你应该改变它，正如它所说`mysqli_query() expects parameter 1 to be mysqli`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:43:08.487

您的第一个错误是因为 mysqli_fetch_assoc() 需要两个参数，一个数据库名称和第二个参数作为您希望获取的数组。您的代码应该是（假设`$con`是数据库连接）：

```
mysqli_fetch_assoc($con,$result); 
```

您的第二个错误只是因为`mysqli_error()`需要 1 个参数而引起：数据库连接，但您使用`mysql.*`. 不要混合这两个库。`mysqli`比原来的扩展有很多改进`mysql`，所以建议你使用`mysqli`.

在此处提问之前，请务必对 Google 进行一些研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:47:42.277

```
<?php
$con=mysqli_connect("localhost","my_user","my_password","my_db");
// Check connection
if (mysqli_connect_errno($con))
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

// Perform queries
mysqli_query($con,"SELECT * FROM Persons");
mysqli_query($con,"INSERT INTO Persons (FirstName,LastName,Age)
VALUES ('Glenn','Quagmire',33)");

mysqli_close($con);
?> 
```

这个例子对你很有用......

# android - java.lang.RuntimeException：无法启动活动 ComponentInfo 错误

> ID：15874594
> 
> 赞同：0
> 
> 时间：2013-04-08T08:32:27.933
> 
> 标签：android

我想问一些关于 android 编程的问题。我创建了一个从 rss xml 文件返回显示到 android 的类，但我得到了一些错误

> 04-08 14:37:19.162: E/AndroidRuntime(381): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.xmlreader/com.example.xmlreader.MainActivity}: java.lang.NullPointerException

**代码：**

```
static final String URL = "http://api.androidhive.info/pizza/?format=xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_NAME = "name";
static final String KEY_COST = "cost";
static final String KEY_DESC = "description";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXMLFromURL(URL); // getting XML
    Document doc = parser.getDomElem(xml); // getting DOM element

(*) NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                    R.id.name, R.id.desciption, R.id.cost });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleActivity.class);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_COST, cost);
            in.putExtra(KEY_DESC, description);
            startActivity(in);

        }
    });
} 
```

第 38 行或第 38 行中的错误给我 (*) 这个标记...请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:42:06.280

如果空指针出现在下一行（带 *）：

```
 (*) NodeList nl = doc.getElementsByTagName(KEY_ITEM); //i reckon the nullpointer is coming up on the doc object... 
```

然后我估计要检查从 getXMLFromURL 方法中检索到的 xml 是否正确？：

```
XMLParser parser = new XMLParser();
String xml = parser.getXMLFromURL(URL); // getting XML   (Is this correctly retreived?
Document doc = parser.getDomElem(xml); // getting DOM element  (This is returning null) 
```

如需更多帮助，请分享您的 XMLParser 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T08:31:53.403

1.  您需要使用**Thread**或**AsyncTask**来执行“网络操作”。否则你会得到 NetworkOnMainThreadException。[读这个](http://www.vogella.com/tutorials/AndroidBackgroundProcessing/article.html)

2.  向 AndroidManifest.xml 添加权限。

    `<uses-permission android:name="android.permission.INTERNET"/>`

    使用线程的示例

    ```
     menuItems = new ArrayList<HashMap<String, String>>();
     final XMLParser parser = new XMLParser();

     Thread th = new Thread(new Runnable() {
        @Override
        public void run() {
            xml = parser.getXmlFromUrl(URL);

            handler.post(new Runnable() { //create an object of Handler class in onCreate() - (android.os.Handler)
                @Override
                public void run() {
                    Document doc = parser.getDomElement(xml);
                    nl =doc.getElementsByTagName(KEY_ITEM);
                    //other code inside onCreate() - for loop
                }
            });
       }
    }
    th.start();

    SimpleAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.list_item,
                new String[]{KEY_NAME, KEY_COST, KEY_DESCRIPTION}, new int[]{R.id.name, R.id.cost, R.id.description});

    setListAdapter(adapter); 
    ```

# email - 创建邮件，填写内容并在邮件客户端中打开

> ID：15874598
> 
> 赞同：0
> 
> 时间：2013-04-08T08:32:37.767
> 
> 标签：email, xpages

我想用 javascript 创建一个新文档并用它生成一个新邮件。我填写了邮件的正文、sendto 和主题，然后我想在 Lotus Notes Client 中打开邮件。

如何在邮件客户端中打开此邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:15:07.980

此按钮创建一个新邮件，其收件人字段、主题字段和正文字段中的内容来自 XPage 上的字段（使用客户端 Javascript）。该逻辑适用于您拥有的任何默认邮件客户端（IBM Notes、MS Outlook 和其他邮件客户端）。

```
<xp:button id="sendMail" label="Send mail">
    <xp:eventHandler event="onclick" submit="false">
        <xp:this.script><![CDATA[
        window.location.href="mailto:" + encodeURIComponent(dojo.byId("#{id:mailTo}").innerHTML) + "?subject=" + encodeURIComponent(dojo.byId("#{id:mailSubject}").innerHTML) + "&body=" + encodeURIComponent(dojo.byId("#{id:mailBody}").innerHTML);
        ]]></xp:this.script>
    </xp:eventHandler>
</xp:button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:20:47.400

我已经这样解决了： - 单击一个按钮以创建邮件的 SendTo、主题和 HTML 正文 - 然后打开一个包含邮件内容的新 XPage - 我现在可以编辑它们或只需单击一个按钮“发送邮件” - 使用 Mark Leusink 的 SSJS 代码，然后我发送 HTML 邮件

```
var mail = new HTMLMail();
mail.setTo( docMail.getItemValue("SendTo") );
mail.setSubject( docMail.getItemValue("Subject") );
mail.addHTML( docMail.getItemValue("dBody") );
mail.send(); 
```

这种情况的好处是，我可以将邮件保存在数据库中，而不是当前用户的邮件文件中。

# android - 在 ArrayAdapter 方法上获取变量的编译错误，Android

> ID：15874600
> 
> 赞同：0
> 
> 时间：2013-04-08T08:32:38.377
> 
> 标签：android, listview, android-arrayadapter

在下面的代码中出现“CheckBoxInfo”变量的编译错误，它是正确的，但我得到了错误，

```
 listview = (ListView) findViewById(R.id.listView);
    myAdapter = new MyAdapter(this, R.layout.row_layout, CheckBoxInfo);
    listview.setAdapter(myAdapter); 
```

从它说的文件中：“要在列表视图中表示的对象”，但是 CheckBoxInfo 是要在列表视图中表示的对象。这里有什么问题？

其余代码：

公共类 MainActivity 扩展 Activity {

```
CheckBoxInfo cbr;
private ListAdapter MyAdapter;
ListView listview;
MyAdapter myAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    cbr = new CheckBoxInfo();
    cbr.checkBoxName = "dfdjklfjdkljf";
    cbr.checkBoxState = true;

    listview = (ListView) findViewById(R.id.listView);
    myAdapter = new MyAdapter(this, R.layout.row_layout, CheckBoxInfo);
    listview.setAdapter(myAdapter);

}

public class MyAdapter extends ArrayAdapter<CheckBoxInfo> {

     private List<CheckBoxInfo> checkBoxList;
    private Context context;

    public MyAdapter(List<CheckBoxInfo> infoList, Context context) {
        super(context, R.layout.row_layout, infoList);
        this.checkBoxList = infoList;
        this.context = context;

        for(int i = 0; i <=12; i++){
            checkBoxList.add(cbr);
        }

    }

    public View getView(int position, View convertView, ViewGroup parent) {

        // First let's verify the convertView is not null
        if (convertView == null) {
            // This a new view we inflate the new layout
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.row_layout, parent, false);
        }
            // Now we can fill the layout with the right values
            TextView tv = (TextView) convertView.findViewById(R.id.textView1);
            CheckBox cb = (CheckBox) convertView.findViewById(R.id.checkBox1);
            CheckBoxInfo cbi = checkBoxList.get(position);

            tv.setText(cbi.checkBoxName);

        return convertView;
    }

}  // end MyAdapter 
```

}

另一个类，表示填充列表视图的对象：

```
public class CheckBoxInfo {
 Boolean checkBoxState;
 String checkBoxName;

 public CheckBoxInfo(){
   checkBoxState = false;
   checkBoxName = "";
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:39:41.767

您应该在 ArrayAdapter 构造函数中传递 CheckBoxInfo 元素列表。

```
ArrayList<CheckBoxInfo> items = new ArrayList<CheckBoxInfo>();
// add elements to the list
(...)
myAdapter = new MyAdapter(this, R.layout.row_layout, items); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:54:52.177

您传递给构造函数的参数中的错误

```
 listview = (ListView) findViewById(R.id.listView);
      List<CheckBoxInfo> ls = new ArrayList<CheckBoxInfo>();
      ls.add(cbr);
      myAdapter = new MyAdapter(ls, this);
      listview.setAdapter(myAdapter); 
```

以及 CheckBoxInfo 类中 toString 函数的覆盖

```
public String toString(){
    return "Name : " + checkBoxName + " , Checked : " + checkBoxState;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:49:29.050

请参阅 myAdapter 类的构造函数只有 2 个参数。在您的代码中，您正在使用 3 个参数调用构造函数。

# keyboard - 通过 HID 设备检测操作系统

> ID：15874601
> 
> 赞同：2
> 
> 时间：2013-04-08T08:32:44.353
> 
> 标签：keyboard, operating-system, usb, hid

我的微控制器上有一个 HID 键盘堆栈，我有一个问题，插件后的 HID 设备是否会获取有关它所连接的操作系统的一些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-16T22:19:32.710

不是直接的，但是您可以通过配置描述符在 USB 设备之间的早期握手过程中弄清楚。

查看这些链接：

*   [https://stackoverflow.com/a/30362736/759341](https://stackoverflow.com/a/30362736/759341)
*   [https://www.google.com/patents/US20120054372](https://www.google.com/patents/US20120054372)
*   [http://www.usb.org/developers/hidpage/HID1_11.pdf](http://www.usb.org/developers/hidpage/HID1_11.pdf)

# php - 以样式显示 Mysql 表中的数据

> ID：15874603
> 
> 赞同：1
> 
> 时间：2013-04-08T08:32:55.163
> 
> 标签：php, mysql, html-table

我已经编写了一个可以使用 PHP 从 mysql 保存数据的代码，那么如何使用 CSS 样式的表格来显示它。存储在我的服务器中的数据是：产品名称、产品规格、价格和产品图片链接。如何以这种格式显示所有这些：

![表格格式](https://i.stack.imgur.com/hIj2m.jpg)

这是它的源代码：

```
 <body>

<div class="gridContainer clearfix">
<div id="LayoutDiv1">
<center><font color="White" size="+12"><u>PROCESSORS</u></font></center>
<table border=0 align="center">
<th colspan="3"><h2><font color="White">AMD PROCESSORS</font></h2></th>
<th></th>
<th colspan="3"><h2><font color="White">INTEL PROCESSORS</font></h2></th>
<tr><td>
<form action=cds.php method=get>
<table border="0" bordercolorlight="#FFFF99">
 <th align="center" colspan="2" bgcolor="#FF9900"> AMD ATHLON II X2 260</th>
<tr><td >Specs:</td><td>3.20Ghz<br />2 cores<br />2Mb Cache<br />Supports x86 and x64 
OS<br />w/ Cool'n Quiet Tech</td></tr>
<tr><td >Price:</td><td>2500</td></tr>
<tr><td >Quantity:</td><td><input type=text name=quant></td></tr>
<tr><td >Add to cart?</td><td ><input type="submit" value="Yes"></td></tr>
</table>
<input type=hidden name=comp value="AMD">
<input type=hidden name=prdname value="AMD ATHLON II X2 260">
<input type=hidden name=prc value="2500">
</form>
</td>
<br />
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
<img src="img/prd1.jpg" />
</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>
<form action=cds.php method=get>
<table border="0" bordercolorlight="#FFFF99">
  <th align="center" colspan="2" bgcolor="#FF9900">INTEL i3</th>
<tr><td >Specs:</td><td >3.20Ghz<br />2 cores<br />3Mb Cache<br />Supports x86 and x64 
OS<br />w/ Cool'n Quiet Tech</td></tr>
<tr><td >Price:</td><td >2500</td></tr>
<tr><td >Quantity:</td><td  ><input type=text name=quant></td></tr>
<tr><td >Add to cart?</td><td  ><input type="submit" value="Yes"></td></tr>
</table>
<input type=hidden name=comp value="INTEL">
<input type=hidden name=prdname value="INTEL i3">
<input type=hidden name=prc value="2500">
</form>
</td>
<br />
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
<img src="img/prd5.jpg" />
</td>
</tr>
<tr><td>
<form action=cds.php method=get>
<table border="0" bordercolorlight="#FFFF99">
  <th align="center" colspan="2" bgcolor="#FF9900">AMD SEMPRON</th>
<tr><td >Specs:</td><td >2.20Ghz<br />4 cores<br />4Mb Cache<br />Supports x86 and x64 
OS<br />w/ Cool'n Quiet Tech</td></tr>
<tr><td  >Price:</td><td  >3000</td></tr>
<tr><td  >Quantity:</td><td   ><input type=text name=quant></td></tr>
<tr><td  >Add to cart?</td><td   ><input type="submit" value="Yes"></td></tr>
</table>
<input type=hidden name=comp value="AMD">
<input type=hidden name=prdname value="AMD SEMPRON">
<input type=hidden name=prc value="3000">
</form>
</td>
<br />
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
<img src="img/prd2.jpg" />
</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>
<form action=cds.php method=get>
<table border="0" bordercolorlight="#FFFF99">
  <th align="center" colspan="2" bgcolor="#FF9900">INTEL i5</th>
<tr><td  >Specs:</td><td  >3.40Ghz<br />4 cores<br />6Mb Cache<br />Supports x86 and 
x64 OS<br />w/ Cool'n Quiet Tech</td></tr>
<tr><td  >Price:</td><td  >5500</td></tr>
<tr><td  >Quantity:</td><td   ><input type=text name=quant></td></tr>
<tr><td  >Add to cart?</td><td   ><input type="submit" value="Yes"></td></tr>
</table>
<input type=hidden name=comp value="INTEL">
<input type=hidden name=prdname value="INTEL i5">
<input type=hidden name=prc value="5500">
</form>
</td>
<br />
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
<img src="img/prd6.jpg" />
</td>

</tr>
<tr><td>
<form action=cds.php method=get>
<table border="0" bordercolorlight="#FFFF99">
  <th align="center" colspan="2" bgcolor="#FF9900">AMD PHENOM II x6</th>
<tr><td  >Specs:</td><td  >3.7 GHz<br />6 cores<br />6Mb Cache<br />Supports x86 and 
x64 OS<br />w/ Cool'n Quiet Tech</td></tr>
<tr><td  >Price:</td><td  >4500</td></tr>
<tr><td  >Quantity:</td><td   ><input type=text name=quant></td></tr>
<tr><td  >Add to cart?</td><td   ><input type="submit" value="Yes"></td></tr>
</table>
<input type=hidden name=comp value="AMD">
<input type=hidden name=prdname value="AMD PHENOM II x6">
<input type=hidden name=prc value="4500">
</form>
</td>
<br />
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
<img src="img/prd3.jpg" />
</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>
<form action=cds.php method=get>
<table border="0" bordercolorlight="#FFFF99">
  <th align="center" colspan="2" bgcolor="#FF9900">INTEL i7</th>
<tr><td  >Specs:</td><td  >4.0Ghz<br />4 cores<br />8Mb Cache<br />Supports x86 and x64
OS<br />w/ Cool'n Quiet Tech</td></tr>
<tr><td  >Price:</td><td  >6500</td></tr>
<tr><td  >Quantity:</td><td   ><input type=text name=quant></td></tr>
<tr><td  >Add to cart?</td><td   ><input type="submit" value="Yes"></td></tr>
</table>
<input type=hidden name=comp value="INTEL">
<input type=hidden name=prdname value="INTEL i7">
<input type=hidden name=prc value="6500">
</form>
</td>
<br />
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
<img src="img/prd7.jpg" />
</td>

</tr>
<tr><td>
<form action=cds.php method=get>
<table border="0" bordercolorlight="#FFFF99">
  <th align="center" colspan="2" bgcolor="#FF9900">AMD OPTERON x16</th>
  <tr><td  >Specs:</td><td  >3.30Ghz<br />16 cores<br />2Mb Cache<br />Supports x86 and
 x64 OS<br />w/ Cool'n Quiet Tech</td></tr>
  <tr><td  >Price:</td><td  >7500</td></tr>
<tr><td  >Quantity:</td><td   ><input type=text name=quant></td></tr>
 <tr><td  >Add to cart?</td><td   ><input type="submit" value="Yes"></td></tr>
</table>
<input type=hidden name=comp value="AMD">
<input type=hidden name=prdname value="AMD OPTERON x16">
<input type=hidden name=prc value="7500">
</form>
</td>
<br />
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
<img src="img/prd4.jpg" />
</td>

<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>
<form action=cds.php method=get>
<table border="0" bordercolorlight="#FFFF99">
  <th align="center" colspan="2" bgcolor="#FF9900">INTEL PENTIUM 4 G870</th>
<tr><td  >Specs:</td><td  >3.20Ghz<br />2 cores<br />2Mb Cache<br />Supports x86 and 
x64 OS<br />w/ Cool'n Quiet Tech</td></tr>
<tr><td  >Price:</td><td  >3500</td></tr>
<tr><td  >Quantity:</td><td   ><input type=text name=quant></td></tr>
<tr><td  >Add to cart?</td><td   ><input type="submit" value="Yes"></td></tr>
</table>
<input type=hidden name=comp value="INTEL">
<input type=hidden name=prdname value="INTEL PENTIUM G870">
<input type=hidden name=prc value="3500">
</form>
</td>
<br />
<td>&nbsp;&nbsp;&nbsp;</td>
<td>
<img src="img/prd8.jpg" />
    </td>

</tr>
<tr><td><br /><br /></td></tr>
</table>
  </div>
</div>
</body> 
```

我知道它需要循环来打印 mysql 表中的所有行，但它有多个单元格，我必须使用嵌套循环来打印吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:42:38.363

```
 <?php
    //get data from database related to that product 
   while($row=mysqli_fetch_array($result,MYSQLI_ASSCO))
   {
    echo '<table>';
    echo '<tr>;
    echo '<td>';
    echo 'Prodcut name';
    echo '</td>';
    echo '</tr> </table>';
   }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:55:01.163

你呈现的是一个循环，所以使用一个循环（甚至多个）。将所有这些值插入到数据库行中，添加必要的列并使用 WHILE LOOP 来获取数据。在循环中仅包含一个表格 html，因此您无需重复代码。

> 更快的方法是使用产品名称创建一个从数据库中获取数据的函数。这将为您节省大量时间
> 
> 更正表格，关闭输入字段上的引号

```
<input type=hidden name="comp" value="">
    <input type=hidden name="prdname" value="">
    <input type=hidden name="prc" value="">

and <form action="cds.php" method="get">
(for this need, I would prefer method POST) 
```

# python - python pandas错误地读取excel日期

> ID：15874608
> 
> 赞同：4
> 
> 时间：2013-04-08T08:33:07.037
> 
> 标签：python, pandas

我有一个日期格式如下的 excel 文件：

```
22.10.07 16:00
22.10.07 17:00
22.10.07 18:00
22.10.07 19:00 
```

使用 pandas 的 parse 方法读取数据后，日期读取*几乎*正确：

```
In [55]: nts.data['Tid'][10000:10005]
Out[55]:
10000    2007-10-22 15:59:59.997905
10001    2007-10-22 16:59:59.997904
10002    2007-10-22 17:59:59.997904
10003    2007-10-22 18:59:59.997904 
```

我需要做些什么来a）让它正常工作，或者b）有什么技巧可以轻松解决这个问题吗？（例如，某种日期时间的“圆形”功能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:48:53.977

Excel 使用一种`ddddd.tttttt`格式序列化日期时间，其中`d`部分是一个整数，表示与参考日期（如 1899 年 12 月 31 日）的偏移量，`t`部分是介于两者之间的分数`0.0`，`1.0`它代表给定时间的一天中的部分（例如在 12:00 是`0.5`，在 18:00 是`0.75`等等）。

我要求您上传包含示例数据的文件。`.xlsx`文件实际上是 ZIP 档案，其中包含您的 XML 序列化工作表。[这是](https://gist.github.com/RaffaeleSgarro/877d7449bd19722b44cb)我从相关列中提取的日期。摘抄：

```
38961.666666666628
38961.708333333292
38961.749999999956 
```

当您尝试手动反序列化时，您会得到与 Panda 相同的日期时间。不幸的是，Excel 存储时间的方式无法*准确*表示某些值，因此您必须将它们四舍五入以进行显示。不过，我不确定是否需要四舍五入的数据进行分析。

这是我用来测试反序列化日期时间是否与 Panda 完全相同的脚本：

```
from datetime import date, datetime, time, timedelta
from urllib2 import urlopen

def deserialize(text):
  tokens = text.split(".")
  date_tok = tokens[0]
  time_tok = tokens[1] if len(tokens) == 2 else "0"
  d = date(1899, 12, 31) + timedelta(int(date_tok))
  t = time(*helper(float("0." + time_tok), (24, 60, 60, 1000000)))
  return datetime.combine(d, t)

def helper(factor, units):
  result = list()
  for unit  in units:
    value, factor = divmod(factor * unit, 1)
    result.append(int(value))
  return result

url = "https://gist.github.com/RaffaeleSgarro/877d7449bd19722b44cb/raw/" \
      "45d5f0b339d4abf3359fe673fcd2976374ed61b8/dates.txt"

for line in urlopen(url):
  print deserialize(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T16:48:43.253

我遇到了同样的问题并通过不使用 Pandas 解析日期来解决它，而是将我自己的函数（如下所示）应用于数据框的相关列：

```
def ExcelDateToDateTime(xlDate):
    epoch = dt.datetime(1899, 12, 30)
    delta = dt.timedelta(hours = round(xlDate*24))
    return epoch + delta

df = pd.DataFrame.from_csv('path')

df['Date'] = df['Date'].apply(ExcelDateToDateTime) 
```

注意：这将忽略小时级别以下的任何时间粒度，但这就是我所需要的，从您的示例中看起来您也可能是这种情况。

# windows - 在 Windows 上的 R 中读取带有 SUB (1a) (Control-Z) 字符的文本文件

> ID：15874619
> 
> 赞同：10
> 
> 时间：2013-04-08T08:33:36.890
> 
> 标签：windows, r, parsing

继上周我的查询[在 R 不匹配引号中读取格式错误的 csv 之后](https://stackoverflow.com/questions/15830470/reading-badly-formed-csv-in-r-mismatched-quotes)，这些相同的 CSV 文件还具有嵌入的控制字符，例如十进制 26 或 0x1A的 ASCII[替换字符。](http://en.wikipedia.org/wiki/Substitute_character)不幸的是`readLines()`，似乎截断了这个字符的行，所以我很难匹配引号 - 除了丢失这些行中的后面字段！

我试过了，`readBin()`但我无法让它读取这个文件。恐怕我无法将其清晰地读入 R 来给您举个例子，而且我在 R 中创建这些内容时遇到了困难。很抱歉不能用一个干净的例子来演示。想法？

*更新*

现在我很困惑 - 当我使用代码时

```
 h3 <- paste('1,34,44.4,"', rawToChar(as.raw(c(as.integer(k1), 26, 65))), '",99')
 identical(readLines(textConnection(h3)), h3) 
```

我明白`TRUE`了，我觉得这很令人惊讶！

*更新 2*

```
 h3
[1] "1,34,44.4,\" HIJK\032A \",99"
> writeLines(h3, 'h3.txt')
> h3a <- readLines('h3.txt')
Warning message:
In readLines("h3.txt") : incomplete final line found on 'h3.txt'
> h3a
[1] "1,34,44.4,\" HIJK" 
```

所以 readLines() 来自 a 时的反应不同`textConnection()`，它会在 SUB 字符处静默截断。

如果它有所作为，我会感到惊讶，但我在 Windows-64 上使用 2.15.2。

*更新 3*

在解决这个问题上取得了一些模糊的成功......

```
zb <- file('h3.txt', "rb")
tmp <- readBin(zb, raw(), size=1, n=400) # raw is always of size =1
nchar(tmp)
# [1] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
close(zb)
tmp
# [1] 31 2c 33 34 2c 34 34 2e 34 2c 22 20 48 49 4a 4b 1a 41 20 22 2c 39 39 0d 0a
rawToChar(tmp)
# [1] "1,34,44.4,\" HIJK\032A \",99\r\n" 
```

即，如果我以二进制文件的形式读入文件并在之后转换为 character()，它似乎可以工作......这对于大型 CSV 文件来说将是乏味的......

R中是否存在错误将Control-Z错误检测为Windows上的文件结尾？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T10:18:56.240

我想我已经找到了一个解决方案——因为在 Windows 上读取文件中间的 Control-Z 似乎有问题，我们需要以二进制/原始模式读取文件。

```
fnam <- 'h3.txt'
tmp.bin <- readBin(fnam, raw(), size=1, n=max(2*file.info(dfnam)$size, 100))=1
tmp.char <- rawToChar(tmp.bin)
txt <- unlist(strsplit(tmp.char, '\r\n', fixed=TRUE))
txt

[1] "1,34,44.4,\" HIJK\032A \",99" 
```

**更新Duncan Murdoch 向 R-** [Devel](http://article.gmane.org/gmane.comp.lang.r.devel/33213/match=duncan+murdoch+control+z) 发布了以下更好的答案。将其转换为我得到的函数：

```
sReadLines <- function(fnam) {
    f <- file(fnam, "rb")
    res <- readLines(f)
    close(f)
    res
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-19T19:25:52.470

当我将 read.csv 与文件中间包含 SUB 或 CTRL-Z 的 csv 文件一起使用时，我也遇到了这个问题。

用 readr 包解决它（如果你的文件是逗号分隔的）

```
library(readr)
read_csv("h3.txt") 
```

如果你有一个；作为分隔符，然后使用：

```
library(readr)
read_csv2("h3.txt") 
```

# java - 保护条件可以是方法调用吗？

> ID：15874622
> 
> 赞同：1
> 
> 时间：2013-04-08T08:33:39.977
> 
> 标签：java, uml, state

我想做一个状态图。我在维基百科上看到了这个关于警卫条件的链接 -[维基](http://en.wikipedia.org/wiki/UML_state_machine#Guard_conditions)。我可以有一个方法调用`(getKeyCount() == 0)`而不是一个保护条件`(key_count == 0)`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:58:43.327

您可以调用方法来获取 if 条件中的值并对其进行评估。

只要它评估为 a ，您几乎可以调用任何您想要的东西`boolean`。

在调用方法之前需要设置的内容取决于您编写的代码。我不知道从哪里来`setIsDisabledByUser`。

多个条件通过相同的 if 语句组合在一起`&& (logical and) or || (logical or)`

如果您只是搜索它，那么网上有很多示例和资源。

# zend-framework2 - 如何在 ZF2 路由中传递数组？

> ID：15874624
> 
> 赞同：1
> 
> 时间：2013-04-08T08:33:46.010
> 
> 标签：zend-framework2

例如，我想获取这个 url 字符串

```
/1/2/3/4 
```

鉴于：

```
$this->url('routeName', array(
    'a' => array(1, 2, 3, 4)
)); 
```

在控制器中：

```
print_r($this->params()->fromRoute('a')); 
```

输出是：

```
array(
    0 => 1,
    1 => 2,
    2 => 3,
    3 => 4
); 
```

是否可以创建此路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:04:02.130

如果它可以工作，它将使用 class [`Zend\Mvc\Router\Http\WildCard`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Wildcard.php)。因为我从来没有让那个按照我期望的方式工作，我建议你采用 ZF2 方式，你可以完全控制你在做什么；）参数和配置的东西应该总是命名！我建议您创建一个简单的类型路线[`Zend\Mvc\Router\Http\Segment`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Segment.php)：

```
'routename' => array(
    'type'    => 'Zend\Mvc\Router\Http\Segment',
    'options' => array(
        'route'    => '/:val1/:val2/:val3/:val4',
        'defaults' => array(
            'controller' => 'controllername',
            'action'     => 'actionname'
        ),
        'constraints' => array(
            'val1' => '[0-9]+',
            'val2' => '[0-9]+',
            'val3' => '[0-9]+',
            'val4' => '[0-9]+'
        )
    )
) 
```

如果需求不同，显然路由配置会改变。您需要像这样设置路线：

```
$this->url('routename', array(
    'val1' => 1,
    'val2' => 2,
    'val3' => 3,
    'val4' => 4
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:16:26.533

在 module.config.php 文件中添加 url 路由，如下所示：

```
'routename' => array(
    'type'    => 'Zend\Mvc\Router\Http\Segment',
    'options' => array(
        'route'    => 'routename[/:val1][/:val2][/:val3][/:val4]',
        'defaults' => array(
            'controller' => 'controllername',
            'action'     => 'actionname'
        ),
        'constraints' => array(
            'val1' => '[0-9]+',
            'val2' => '[0-9]+',
            'val3' => '[0-9]+',
            'val4' => '[0-9]+'
        )
    )
) 
```

然后按照以下步骤添加数字：

```
$this->url('routename', array(
    'val1' => 1,
    'val2' => 2,
    'val3' => 3,
    'val4' => 4
)); 
```

您可以通过以下方式获取所有参数：

```
print_r($this->params()); 
```

# javascript - 通过部分名称或 ID 获取元素

> ID：15874630
> 
> 赞同：31
> 
> 时间：2013-04-08T08:34:03.887
> 
> 标签：javascript, forms

这是我的表单示例（只有我想要的输入，但还有很多其他输入）：

```
<form name="inputform" action="..." method="post">
    <input type="hidden" name="id_qtedje_77" id="id_qtedje_77" value="0">
    <input type="text" id="id_qte_77" name="prestation_detail_fields[77][qte_collecte]" value="0.00">
    <input type="text" id="id_rec_77" name="prestation_detail_fields[77][reliquat_conforme]" value="0.00">
    <input type="text" id="id_ren_77" name="prestation_detail_fields[77][reliquat_non_conforme]" value="0.00">
    <input type="checkbox" name="prestation_detail_fields[77][dechet_non_present]" value="1">

    <!-- another TR -->

    <input type="hidden" name="id_qtedje_108" id="id_qtedje_108" value="0">
    <input type="text" id="id_qte_108" name="prestation_detail_fields[108][qte_collecte]" value="0.00">
    <input type="text" id="id_rec_108" name="prestation_detail_fields[108][reliquat_conforme]" value="0.00">
    <input type="text" id="id_ren_108" name="prestation_detail_fields[108][reliquat_non_conforme]" value="0.00">
    <input type="checkbox" name="prestation_detail_fields[108][dechet_non_present]" value="1">
</form> 
```

我想要的是获取输入的值，但是由于表单是用 PHP 构建的，所以我不知道行标识符 (77, 108)。

有没有办法做类似的事情`getElementByName('id_qtedje_%')`？

注意：我没有使用任何库，也不打算使用任何库。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-08T08:42:35.070

您最好的选择可能是[`document.querySelectorAll`](http://www.w3.org/TR/selectors-api/)，您可以使用任何 CSS 选择器，包括[“属性以”选择器](http://www.w3.org/TR/css3-selectors/#attribute-substrings)，如`input[id^="id_qtedje_"]`. 所有现代浏览器都支持它[，也支持 IE8](http://caniuse.com/#feat=queryselector)：

```
var elements = document.querySelectorAll('input[id^="id_qtedje_"]'); 
```

如果您只想要第一个匹配项（而不是列表），则可以`document.querySelector`改用。它返回对文档顺序中第一个匹配项的引用，或者`null`如果没有匹配项。

或者，您可以给元素一个类名，然后使用[`document.getElementsByClassName`](http://www.w3.org/TR/dom/#dom-document-getelementsbyclassname)，但请注意，虽然`getElementsByClassName`在旧版本的 Chrome 和 Firefox 中受支持，但 IE8 没有它，因此它[不如](http://caniuse.com/#feat=getelementsbyclassname)`querySelectorAll`现代中更有用的支持时代。

```
var elements = document.getElementsByClassName("theClassName"); 
```

如果您使用任何库（jQuery、MooTools、Closure、Prototype 等），它们可能具有您可以使用几乎任何 CSS 选择器查找元素的功能，用它们自己的代码填补浏览器支持方面的空白. 例如，在 jQuery 中，它是`$`( `jQuery`) 函数；在 MooTools 和 Prototype 中，它是`$$`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T08:39:00.627

您可以在[jQuery中使用](http://api.jquery.com/)[带有选择器的开头](http://api.jquery.com/attribute-starts-with-selector/)

```
var listOfElements = $('[name^="id_qtedje_"]') 
```

您可能还对[包含](http://api.jquery.com/attribute-contains-word-selector/)选择器和[结尾](http://api.jquery.com/attribute-ends-with-selector/)选择器感兴趣

* * *

使用`querySelectorAll`，你可以做

```
document.querySelectorAll('[name^="id_qtedje_"]') 
```

* * *

或者：

假设所有元素都是`input`s，你可以使用这个：

```
function getElementByNameStart(str) {
    var x=document.getElementsByTagName('input')
    for(var i=0;i<x.length;i++) {
        if(x[i].indexOf(str)==0) {
            return x[i];
        }
    }
} 
```

可以称为 getElementByNameStart("id_qtedje_")

请注意，这仅返回此类型的*第一个*元素。全部退回：

```
function getElementByNameStart(str) {
    var x=document.getElementsByTagName('input')
    var a=[];
    for(var i=0;i<x.length;i++) {
        if(x[i].indexOf(str)==0) {
            a.push(x[i])
        }
    }
    return a;
} 
```

如果元素是任何类型，请将“input”替换为“*”（注意，这可能会使您的代码变慢）

# session - 更新的金字塔模型目录结构现在会话已损坏

> ID：15874641
> 
> 赞同：2
> 
> 时间：2013-04-08T08:34:42.920
> 
> 标签：session, python-3.x, pyramid, pickle

**背景**

所以我有一个 Pyramis 应用程序，其中包含大量以不同方式相互关联的模型。这些模型最初根据它们的一般角色保存在一堆不同的文件中。例如，我有一个名为 auth_models.py 的文件，其中包含用户和组的定义。

我一直在努力处理导入等问题，因为所有模型文件都以如此复杂的方式相互关联，所以我放弃并将它们全部放在同一个文件中。然后我在其他地方更新了我的所有导入语句，所以一切都应该工作。

现在，每当我尝试访问任何视图时，都会出现内部服务器错误。事实证明，该错误是由 auth_models.py 不再存在的事实引起的。该错误来自一个`picklie.loads`语句，所以我认为正在加载的一些会话信息不再有效。完整的错误消息以及我的会话设置包含在此问题的末尾。

**问题**

如果我的假设是正确的，我将如何让 Pyramid 以安全的方式“忘记”最后一次会议？

如果我的假设不正确，解决此问题的最佳方法是什么？我不想恢复到我的旧目录结构，因为这会导致它自己的问题......

**设置**

```
session.type = file
session.data_dir = %(here)s/data/sessions/data
session.lock_dir = %(here)s/data/sessions/lock
session.key = ******
session.secret = *****
session.cookie_on_exception = true
session.auto = true
session.timeout = 1800 
```

**错误**

```
2013-04-08 10:24:15,642 ERROR [waitress][Dummy-2] Exception when serving /
Traceback (most recent call last):
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_debugtoolbar-1.0.4-py3.3.egg/pyramid_debugtoolbar/toolbar.py", line 122, in toolbar_tween
response = _handler(request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_debugtoolbar-1.0.4-py3.3.egg/pyramid_debugtoolbar/panels/performance.py", line 55, in resource_timer_handler
result = handler(request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/tweens.py", line 21, in excview_tween
response = handler(request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_tm-0.7-py3.3.egg/pyramid_tm/__init__.py", line 82, in tm_tween
reraise(*exc_info)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_tm-0.7-py3.3.egg/pyramid_tm/compat.py", line 13, in reraise
raise value
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_tm-0.7-py3.3.egg/pyramid_tm/__init__.py", line 63, in tm_tween
response = handler(request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/router.py", line 161, in handle_request
response = view_callable(context, request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/config/views.py", line 345, in rendered_view
result = view(context, request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/config/views.py", line 462, in _class_requestonly_view
inst = view(request)
File "/home/sheena/WORK/mega-3.3/mega/wsgi/pyramidapp/pyramidapp/views/basic_views.py", line 10, in __init__
BaseView.__init__(self,request)
File "/home/sheena/WORK/mega-3.3/mega/wsgi/pyramidapp/pyramidapp/views/class_base_view.py", line 15, in __init__
BaseView.session_init(request)
File "/home/sheena/WORK/mega-3.3/mega/wsgi/pyramidapp/pyramidapp/views/class_base_view.py", line 62, in session_init
if not request.session.__contains__(sKey):
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/decorator.py", line 39, in __get__
val = self.wrapped(inst)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/request.py", line 350, in session
return factory(self)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/session.py", line 204, in __init__
value = signed_deserialize(cookieval, self._secret)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/session.py", line 82, in signed_deserialize
return pickle.loads(pickled)
ImportError: No module named 'pyramidapp.models.auth_models'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/mako_templating.py", line 211, in __call__
result = template.render_unicode(**system)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/template.py", line 421, in render_unicode
as_unicode=True)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 767, in _render
**_kwargs_for_callable(callable_, data))
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 799, in _render_context
_exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 825, in _exec_template
callable_(context, *args, **kwargs)
File "pyramid_debugtoolbar_templates_toolbar_dbtmako", line 111, in render_body
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_debugtoolbar-1.0.4-py3.3.egg/pyramid_debugtoolbar/panels/request_vars.py", line 42, in content
if hasattr(self.request, 'session'):
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/decorator.py", line 39, in __get__
val = self.wrapped(inst)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/request.py", line 350, in session
return factory(self)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/session.py", line 204, in __init__
value = signed_deserialize(cookieval, self._secret)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/session.py", line 82, in signed_deserialize
return pickle.loads(pickled)
ImportError: No module named 'pyramidapp.models.auth_models'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/waitress-0.8.2-py3.3.egg/waitress/channel.py", line 329, in service
task.service()
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/waitress-0.8.2-py3.3.egg/waitress/task.py", line 173, in service
self.execute()
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/waitress-0.8.2-py3.3.egg/waitress/task.py", line 380, in execute
app_iter = self.channel.server.application(env, start_response)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/router.py", line 251, in __call__
response = self.invoke_subrequest(request, use_tweens=True)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/router.py", line 227, in invoke_subrequest
response = handle_request(request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_debugtoolbar-1.0.4-py3.3.egg/pyramid_debugtoolbar/toolbar.py", line 135, in toolbar_tween
toolbar.process_response(response)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_debugtoolbar-1.0.4-py3.3.egg/pyramid_debugtoolbar/toolbar.py", line 56, in process_response
vars, request=request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/renderers.py", line 88, in render
return helper.render(value, None, request=request)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/renderers.py", line 557, in render
result = renderer(value, system_values)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/mako_templating.py", line 219, in __call__
reraise(MakoRenderingException(errtext), None, exc_info[2])
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/compat.py", line 131, in reraise
raise value.with_traceback(tb)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/mako_templating.py", line 211, in __call__
result = template.render_unicode(**system)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/template.py", line 421, in render_unicode
as_unicode=True)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 767, in _render
**_kwargs_for_callable(callable_, data))
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 799, in _render_context
_exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 825, in _exec_template
callable_(context, *args, **kwargs)
File "pyramid_debugtoolbar_templates_toolbar_dbtmako", line 111, in render_body
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_debugtoolbar-1.0.4-py3.3.egg/pyramid_debugtoolbar/panels/request_vars.py", line 42, in content
if hasattr(self.request, 'session'):
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/decorator.py", line 39, in __get__
val = self.wrapped(inst)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/request.py", line 350, in session
return factory(self)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/session.py", line 204, in __init__
value = signed_deserialize(cookieval, self._secret)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/session.py", line 82, in signed_deserialize
return pickle.loads(pickled)
pyramid.mako_templating.MakoRenderingException: 

Traceback (most recent call last):
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/mako_templating.py", line 211, in __call__
result = template.render_unicode(**system)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/template.py", line 421, in render_unicode
as_unicode=True)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 767, in _render
**_kwargs_for_callable(callable_, data))
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 799, in _render_context
_exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/Mako-0.7.3-py3.3.egg/mako/runtime.py", line 825, in _exec_template
callable_(context, *args, **kwargs)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_debugtoolbar-1.0.4-py3.3.egg/pyramid_debugtoolbar/templates/toolbar.dbtmako", line 60, in render_body
${panel.content()|n}
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid_debugtoolbar-1.0.4-py3.3.egg/pyramid_debugtoolbar/panels/request_vars.py", line 42, in content
if hasattr(self.request, 'session'):
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/decorator.py", line 39, in __get__
val = self.wrapped(inst)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/request.py", line 350, in session
return factory(self)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/session.py", line 204, in __init__
value = signed_deserialize(cookieval, self._secret)
File "/home/sheena/WORK/mega-3.3/lib/python3.3/site-packages/pyramid-1.4-py3.3.egg/pyramid/session.py", line 82, in signed_deserialize
return pickle.loads(pickled)
ImportError: No module named 'pyramidapp.models.auth_models' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:51:24.620

您已将一些模型实例存储在会话 cookie 中，用于`pickle`序列化和反序列化该数据。

因为您将模型移动到另一个模块，所以 pickle 无法再加载会话数据。

你可以做两件事：

*   如果您不关心会话数据，只需删除您的会话 cookie。使用您的浏览器工具手动删除 cookie，或者删除您网站的所有 cookie。

*   在旧位置为模型创建别名。创建一个简单地导入*曾经*存在`pyramidapp.models.auth_models`的模型的模块。该模块不需要其他任何东西导入，会在需要时为您加载。*`pickle`*

 *任何未来的会话都将使用模型的新位置创建，这只会影响旧的会话数据。*

# ios - 对话框打开时如何识别模态对话框外的点击手势

> ID：15874643
> 
> 赞同：0
> 
> 时间：2013-04-08T08:34:50.340
> 
> 标签：ios, objective-c, ipad, modal-dialog, gesture-recognition

我只想知道如何识别用户何时在模式对话框之外点击。我已经尝试过了，但是当用户在外面点击时它没有被调用。

这是我的 viewDidLoad 方法，它位于 ModalDialogViewController.m 文件 UITapGestureRecognizer *recognizer;

```
 if(![self.view.window.gestureRecognizers containsObject:recognizer])
        {
            recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapBehind:)];
            //[recognizer setDelegate:self];
            [recognizer setNumberOfTapsRequired:1];
            recognizer.cancelsTouchesInView = NO; //So the user can still interact with controls in the modal view
            [self.view.window addGestureRecognizer:recognizer];

        } 
```

这不是打开 handleTapBehind 方法。

我已将模态视图控制器设为 UIGestureRecognition 的协议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T22:08:35.900

这里有点晚了，但以防有人通过谷歌来到这里：

设置手势识别器应该在视图出现之后进行。在 viewDidLoad 方法调用期间，视图的窗口为 nil，因此永远不会添加手势识别器。

将方法调用放在 viewDidAppear 中，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:53:14.823

您是否在 .h 文件中设置了 UIGestureRecognizerDelegate ？

[您可以在Apple doc](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)中获取 UIGestureRecognition 行为的完整信息

使用 UIGestureRecognizers 非常简单。您只需执行以下步骤： 创建手势识别器。创建手势识别器时，您指定一个回调方法，以便手势识别器可以在手势开始、更改或结束时向您发送更新。

将手势识别器添加到视图。每个手势识别器与一个（并且只有一个）视图相关联。当在该视图的边界内发生触摸时，手势识别器将查看它是否匹配它正在寻找的触摸类型，如果找到匹配，它将通知回调方法。

您可以通过编程方式执行这两个步骤，但使用 Storyboard 编辑器直观地添加手势识别器更加容易。

[请参阅完整教程并在此处工作](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)：

# php - CodeIgniter 中的多条件 WHERE 子句

> ID：15874646
> 
> 赞同：5
> 
> 时间：2013-04-08T08:35:05.907
> 
> 标签：php, mysql, codeigniter

我想删除一些数据，比如核心 PHP 中的这个查询

```
WHERE user_id=$id AND sender_id=$send_id OR user_id=$send_id AND sender_id=$id 
```

所以我在 CodeIgniter 中使用 Active Record 进行了尝试，如下所示：

```
$this->db->where('user_id ', $id);
$this->db->or_where('user_id ', $send_id);
$this->db->where('sender_id ', $send_id);
$this->db->or_where('sender_id ', $id); 
```

但它给了我错误的结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T08:42:44.813

```
$this->db->where(array('user_id' => $id, 'sender_id' => $send_id));
$this->db->or_where(array('user_id' => $send_id, 'sender_id' => $id)); 
```

您想将一个关联数组传递给每个数组，它将`AND`在查询中数组中的每个元素之间使用，并在查询中使用`->or_where()`将使用 an `OR`。[文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)中提供了更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T08:42:48.340

试试这个

```
 $this->db->where('user_id ', $id);
    $this->db->where('sender_id ', $send_id);

    $this->db->or_where('sender_id ', $id);
    $this->db->where('user_id ', $send_id); 
```

# sql - 每列的不同 where 条件

> ID：15874648
> 
> 赞同：2
> 
> 时间：2013-04-08T08:35:12.647
> 
> 标签：sql, sql-server, sql-server-2008

有没有办法在 SQL Server 中编写这样的查询，而不使用两次选择然后加入？

```
select trans_date, datepart(HOUR,trans_time) as hour,
(datepart(MINUTE,trans_time)/30)*30 as minute,
case 
when paper_number = 11111/*paperA*/
then sum(t1.price*t1.amount)/SUM(t1.amount)*100 
end as avgA,
case 
when paper_number = 22222/*PaperB*/
then sum(t1.price*t1.amount)/SUM(t1.amount)*100 
end as avgB
from dbo.transactions t1
where trans_date = '2006-01-01' and (paper_number = 11111 or paper_number = 22222)
group by trans_date, datepart(HOUR,trans_time), datepart(MINUTE,trans_time)/30 
order by hour, minute 
```

SQL Server 要求我将 paper_number 添加到分组依据，并在我这样做时返回空值

```
trans_date  hour    minute  avgA                avgB
2006-01-01  9       30      1802.57199725463    NULL
2006-01-01  9       30      NULL                169125.886524823
2006-01-01  10      0       1804.04742534103    NULL
2006-01-01  10      0       NULL                169077.777777778
2006-01-01  10      30      1806.18773535637    NULL
2006-01-01  10      30      NULL                170274.550381867
2006-01-01  11      0       1804.43466045433    NULL
2006-01-01  11      0       NULL                170743.4
2006-01-01  11      30      1807.04532012137    NULL
2006-01-01  11      30      NULL                171307.00280112 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:53:25.443

对整个 CASE 表达式使用 SUM() 函数

```
select trans_date, datepart(HOUR,trans_time) as hour, (datepart(MINUTE,trans_time)/30)*30 as minute,
       sum(case when paper_number = 11111/*paperA*/ then t1.price*t1.amount end) * 1.00
       / sum(case when paper_number = 11111/*paperA*/ then t1.amount end) * 100 as avgA,
       sum(case when paper_number = 22222/*PaperB*/ then t1.price*t1.amount end) * 1.00
       / sum(case when paper_number = 22222/*paperB*/ then t1.amount end) * 100 as avgB
from dbo.transactions t1
where trans_date = '2006-01-01'
group by trans_date, datepart(HOUR,trans_time), datepart(MINUTE,trans_time)/30 
order by hour, minute 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/62074/13)上的演示[](http://sqlfiddle.com/#!3/62074/13)

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T09:07:44.813

尝试：

```
with cte as
(select trans_date, 
        datepart(HOUR,trans_time) as hour, 
        (datepart(MINUTE,trans_time)/30)*30 as minute,
        sum(case when paper_number = 11111/*paperA*/ 
                 then t1.price*t1.amount else 0 end) as wtdSumA,
        sum(case when paper_number = 11111/*paperA*/ 
                 then t1.amount else 0 end) as amtSumA,
        sum(case when paper_number = 22222/*PaperB*/ 
                 then t1.price*t1.amount else 0 end) as wtdSumB,
        sum(case when paper_number = 22222/*PaperB*/ 
                 then t1.amount else 0 end) as amtSumB
from dbo.transactions t1
where trans_date = '2006-01-01'
group by trans_date, datepart(HOUR,trans_time), datepart(MINUTE,trans_time)/30)
select trans_date, hour, minute,
       case amtSumA when 0 then 0 else 100 * wtdSumA / amtSumA end as avgA,
       case amtSumB when 0 then 0 else 100 * wtdSumB / amtSumB end as avgB
from cte
order by hour, minute 
```

[（这里](http://sqlfiddle.com/#!3/62074/4)的 SQLFiddle ）

您可以在没有 CTE 的情况下推导出它，如下所示：

```
select trans_date, 
       datepart(HOUR,trans_time) as hour, 
       (datepart(MINUTE,trans_time)/30)*30 as minute,
       case sum(case when paper_number = 11111/*paperA*/ then t1.amount else 0 end)
            when 0 then 0 
            else 100 * sum(case when paper_number = 11111 then t1.price*t1.amount else 0 end)
                 / sum(case when paper_number = 11111 then t1.amount else 0 end) end as avgA,
       case sum(case when paper_number = 22222/*paperA*/ then t1.amount else 0 end)
            when 0 then 0 
            else 100 * sum(case when paper_number = 22222 then t1.price*t1.amount else 0 end)
                 / sum(case when paper_number = 22222 then t1.amount else 0 end) end as avgB
from dbo.transactions t1
where trans_date = '2006-01-01'
group by trans_date, datepart(HOUR,trans_time), datepart(MINUTE,trans_time)/30
order by 1,2,3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T16:03:27.427

您也可以尝试使用`UNPIVOT`和`PIVOT`如下所示：

```
WITH prepared AS (
  SELECT
    trans_date,
    trans_time = DATEADD(MINUTE, DATEDIFF(MINUTE, '00:00', trans_time) / 30 * 30, CAST('00:00' AS time)),
    paper_number,
    total = price * amount,
    amount
  FROM transactions
),
unpivoted AS (
  SELECT
    trans_date,
    trans_time,
    attribute = attribute + CAST(paper_number AS varchar(10)),
    value
  FROM prepared
  UNPIVOT (value FOR attribute IN (total, amount)) u
),
pivoted AS (
  SELECT
    trans_date,
    trans_time,
    avgA = total11111 * 100 / amount11111,
    avgB = total22222 * 100 / amount22222
  FROM unpivoted
  PIVOT (
    SUM(value) FOR attribute IN (total11111, amount11111, total22222, amount22222)
  ) p
)
SELECT *
FROM pivoted
; 
```

作为解释上述查询如何工作的尝试，下面是原始数据集在查询执行过程中经历的转换的描述，使用以下示例：

```
trans_date  trans_time  paper_number  price  amount
----------  ----------  ------------  -----  ------
2013-04-09  11:12:35    11111         10     15
2013-04-09  11:13:01    22222         24     10
2013-04-09  11:28:44    11111         12     5
2013-04-09  11:36:20    22222         20     11 
```

1.  `prepared`CTE 生成以下列集：

    ```
    trans_date  trans_time  paper_number  total  amount
    ----------  ----------  ------------  -----  ------
    2013-04-09  11:00:00    11111         150    15
    2013-04-09  11:00:00    22222         240    10
    2013-04-09  11:00:00    11111         60     5
    2013-04-09  11:30:00    22222         220    11 
    ```

    其中`trans_time`是 原始`trans_time`四舍五入到最接近的半小时`total`并`price`乘以`amount`。

2.  `unpivoted`CTE 将and`total`值反旋转`amount`以生成`attribute`and `value`：

    ```
    trans_date  trans_time  paper_number  attribute  value
    ----------  ----------  ------------  ---------  -----
    2013-04-09  11:00:00    11111         total      150
    2013-04-09  11:00:00    11111         amount     15
    2013-04-09  11:00:00    22222         total      240
    2013-04-09  11:00:00    22222         amount     10
    2013-04-09  11:00:00    11111         total      60
    2013-04-09  11:00:00    11111         amount     5
    2013-04-09  11:30:00    22222         total      220
    2013-04-09  11:30:00    22222         amount     11 
    ```

    然后`paper_number`与 结合`attribute`形成单个列，也称为`attribute`：

    ```
    trans_date  trans_time  attribute  value
    ----------  ----------  -----------  -----
    2013-04-09  11:00:00    total11111   150
    2013-04-09  11:00:00    amount11111  15
    2013-04-09  11:00:00    total22222   240
    2013-04-09  11:00:00    amount22222  10
    2013-04-09  11:00:00    total11111   60
    2013-04-09  11:00:00    amount11111  5
    2013-04-09  11:30:00    total22222   220
    2013-04-09  11:30:00    amount22222  11 
    ```

3.  最后，`pivoted`CTE 将`value`数据转回聚合它们，`SUM()`并使用`attribute`列名的值：

    ```
    trans_date  trans_time  total11111  amount11111  total22222  amount22222
    ----------  ----------  ----------  -----------  ----------  -----------
    2013-04-09  11:00:00    210         20           240         10
    2013-04-09  11:30:00    NULL        NULL         220         11 
    ```

    然后对枢轴值进行额外处理（每个`totalNNN`值乘以 100 并除以相应的`amountNNN`）以形成最终输出：

    ```
    trans_date  trans_time  avgA  avgB
    ----------  ----------  ----  ----
    2013-04-09  11:00:00    1050  2400
    2013-04-09  11:30:00    NULL  2000 
    ```

有几个问题可能需要解决：

1.  如果`price`和`amount`是不同的数据类型，则`total`和`amount`也可能以不同的数据类型结束。对于`UNPIVOT`，未透视的值必须具有完全相同的类型，因此您需要将`total`and显式转换`amount`为某些常见类型，可能会防止数据/精度丢失。这可以`prepared`像这样在 CTE 中完成（假设通用类型为`decimal(10,2)`）：

    ```
    total  = CAST(price * amount AS decimal(10,2)),
    amount = CAST(amount AS decimal(10,2)) 
    ```

2.  如果合计金额最终可能为 0，则您需要考虑除以 0 问题。一种方法是用 NULL 替换 0 数量，这将使除法的结果也为 NULL。将`ISNULL`or`COALESCE`应用于该结果将允许您将其转换为某个默认值，例如 0。`pivoted`因此，在CTE中更改此位：

    ```
    avgA = ISNULL(total11111 * 100 / NULLIF(amount11111, 0), 0),
    avgB = ISNULL(total22222 * 100 / NULLIF(amount22222, 0), 0) 
    ```**

# android - CheckedTextView : 检查 ListView 中的所有项目

> ID：15874650
> 
> 赞同：1
> 
> 时间：2013-04-08T08:35:13.983
> 
> 标签：android, listview, checkedtextview

这个问题快把我逼疯了。我已经创建了一个按钮来检查我的 ListView 中使用 CheckedTextView 组成的所有项目：

```
selectAll = (CheckBox) findViewById(R.id.selectAll);
selectAll.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
    toggleAll(selectAll.isChecked());
        }
    }); 
```

在 toggleAll 函数中，我尝试重新加载布局并选择所有项目：

```
int size = maListViewPerso.getCount();
for ( int i=0; i< taille; i++ ) {
    View v = maListViewPerso.getAdapter().getView(i, null, null);
    CheckedTextView tv = (CheckedTextView) v.findViewById(R.id.eventName);
    tv.setChecked(check);
} 
```

但是没有项目被设置为在视图中选中。最差：所有选中的项目切换为取消选中。

我还尝试了另一种方法，通过默认检查所有项目来初始化 ListView 的适配器......没有结果。有关信息，我的 ListView 适配器以这种方式工作：

```
public class ListViewColor extends ArrayAdapter<String>{
    public ListViewColor(Context context, int textViewResourceId, List<String> objects, String type) {

        [...]

 }
 @Override
 public View getView(int position, View convertView, ViewGroup parent) {
      String[] result = item.split("/");                
      CheckedTextView name = (CheckedTextView) view.findViewById(R.id.eventName);
      name.setText("txt");
      name.setSelected(true);
      return view;
 } 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:41:04.390

首先，您的第一个优点不是，您应该如何对待列表视图。始终通过 ListAdapter 更改其数据。

在您的第二次尝试中，使用`name.setChecked(true)`而不是`name.setSelected(true)`.

# websocket - 尝试通过 Jetty 8.1.8 和 Netty 3.2.7 在 JBOSS 上使用 WebSocket 时出错

> ID：15874652
> 
> 赞同：0
> 
> 时间：2013-04-08T08:35:17.980
> 
> 标签：websocket, jetty, jboss7.x, netty

我尝试使用 Jetty 8.1.8 和 Netty 3.2.7 在 JBOSS 上创建一个 websocket servlet 我正在使用一个与 Tomcat 配合使用的客户端，所以我不认为这是我在尝试连接到服务器端 websocket servlet 异常发生在 Jetty 的“WebSocketFactory.java”文件中以下行之后： AbstractHttpConnection http AbstractHttpConnection.getCurrentConnection() getCurrentConnection 函数返回 null 并遵循这一行尝试使用其函数之一（这显然会引发异常） .

这是我的代码：包 com.microfocus.entrypoint.servlets；

```
import java.io.IOException;
import java.util.Set;
import java.util.concurrent.CopyOnWriteArraySet;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.eclipse.jetty.websocket.WebSocket;
import org.eclipse.jetty.websocket.WebSocketConnection;
import org.eclipse.jetty.websocket.WebSocketServlet;

@SuppressWarnings("serial")
public class OWMFAsyncJboss extends WebSocketServlet {

         @SuppressWarnings({ "unchecked", "rawtypes" })
          private final Set<ChatWebSocket> users = new CopyOnWriteArraySet();

          @Override
          public WebSocket doWebSocketConnect(HttpServletRequest arg0, String arg1) {
                    try
                    {
                    return new ChatWebSocket();
                    }
                    catch(Exception e)
                    {
                              System.console().writer().write("error");
                    }
                    return null;
          }

         @Override
          protected void service(HttpServletRequest request,
                              HttpServletResponse response) throws ServletException, IOException {
                    super.service(request, response);
          }

          class ChatWebSocket implements WebSocket.OnTextMessage
          {
                    WebSocketConnection connection;

                    @Override
                    public void onClose(int arg0, String arg1) {
                              users.remove(this);
                    }

                    @Override
                    public void onOpen(Connection arg0) {
                              ChatWebSocket.this.connection= (WebSocketConnection) connection;
                              users.add(this);
                    }

                    public void onMessage(byte frame, byte[] data,int offset, int length)
                    {
                    // binary communication not needed
                    }
                    public void onMessage(byte frame, String data)
                    {

                   }
         }

} 
```

这是一个例外：

> 17:36:01,728 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/benAsync].[AsynchServlet]] (http-localhost/127.0.0.1:8080-7 ) JBWEB000236：Servlet AsynchServlet 的 Servlet.service() 抛出异常：java.lang.NullPointerException at org.eclipse.jetty.websocket.WebSocketFactory.upgrade(WebSocketFactory.java:225) [jetty-all-7.6.2.v20120308.jar :7.6.2.v20120308] 在 org.eclipse.jetty.websocket.WebSocketFactory.acceptWebSocket(WebSocketFactory.java:361) [jetty-all-7.6.2.v20120308.jar:7.6.2.v20120308] 在 org.eclipse。 jetty.websocket.WebSocketServlet.service(WebSocketServlet.java:107) [jetty-all-7.6.2.v20120308.jar:7.6.2.v20120308] 在 com.benPackage.entrypoint.servlets.OWMFAsyncJboss.service(OWMFAsyncJboss.java: 58) [类：] 在 javax.servlet.http.HttpServlet。服务（HttpServlet.java:847）[jboss-servlet-api_3.0_spec-1.0.2.Final.jar:1.0.2.Final] 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter（ApplicationFilterChain.java:295） [jbossweb-7.2.0.Final.jar:7.2.0.Final] 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214) [jbossweb-7.2.0.Final.jar:7.2.0 .Final] 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) [jbossweb-7.2.0.Final.jar:7.2.0.Final] 在 org.apache.catalina.core.StandardContextValve。调用(StandardContextValve.java:149) [jbossweb-7.2.0.Final.jar:7.2.0.Final] at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:169) [jboss-as -web-7.2.0.Alpha1-redhat-4.jar:7.2.0。Alpha1-redhat-4] 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:145) [jbossweb-7.2.0.Final.jar:7.2.0.Final] 在 org.apache.catalina.valves .ErrorReportValve.invoke(ErrorReportValve.java:97) [jbossweb-7.2.0.Final.jar:7.2.0.Final] at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102) [jbossweb- 7.2.0.Final.jar:7.2.0.Final] 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336) [jbossweb-7.2.0.Final.jar:7.2.0.Final]在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856) [jbossweb-7.2.0.Final.jar:7.2.0.Final] 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process (Http11Protocol.java:653) [jbossweb-7.2.0.Final.jar:7.2.0.Final] 在 org.apache.tomcat。util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:920) [jbossweb-7.2.0.Final.jar:7.2.0.Final] at java.lang.Thread.run(Unknown Source) [rt.jar: 1.6.0_33]

任何可能对我有帮助的帮助或方向将不胜感激，谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:53:22.360

两个问题。

首先，您在问题中说您使用的是 Jetty 8.1.8，但您的堆栈跟踪显示您使用的是 Jetty 7.6.2.v20120308。

接下来，jetty-websocket 需要访问 Jetty 内部连接升级机制，以打破 Servlet API 规范规则。在您描述的这种混合 JBoss + Jetty 环境中是不可能的。

一个解决方案可能是在同一台机器上的不同端口上运行 Jetty，并将 UPGRADE 请求代理到另一个 Jetty 实例。但是 JBoss 对 UPGRADE 请求和`101 Switching Protocols`响应的支持非常有限。

# coded-ui-tests - 日历未记录在 codedUi 自动化测试 Visual Studio 2012 Ultimate

> ID：15874654
> 
> 赞同：0
> 
> 时间：2013-04-08T08:35:27.753
> 
> 标签：coded-ui-tests

我正在从事 codedUI 自动化测试。但是我面临着挑战，如何记录日历的过程并使用 sqlserver 进行自定义逻辑。如果我使用 Clt+shft+r 进行日历记录，那么我不会在记录过程中获得日历值。如果我在文本框中使用复制和粘贴技术日历的值，那么我会收到错误：- 无法在控件上执行值为“04/02/2013”​​的文本的“SetProperty”。

请帮助我，非常紧急，我将非常感谢，

谢谢和问候， 苏尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:33:55.760

尝试粘贴“04022013”​​，即没有“/”字符。当文本输入到日期框中时，某些网页会生成“/”字符。

# ios6 - 为什么其他设备无法添加我的通行证

> ID：15874656
> 
> 赞同：0
> 
> 时间：2013-04-08T08:35:32.330
> 
> 标签：ios6, passbook

我创建了一个通行证。我可以通过电子邮件、应用程序或网络服务器将其添加到我的存折中。当我将它发送给其他人进行测试时，他们可以在 Mail.app 上打开它并看到通过，但是当他们单击添加按钮时，没有任何东西添加到存折中。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:50:34.533

问题是因为您的 webServiceURL 是 HTTP，而不是 HTTPS。

```
"webServiceURL" : "http://192.168.1.202:8888/passesWebserver/" 
```

通行证将加载到您的设备上，因为您已在设备设置的开发人员菜单的 PassKit 测试部分中启用了“允许 HTTP 服务”。

对于非开发设备（或未设置此选项的开发设备），webServiceURL 必须是 HTTPS。

要解决此问题，请将您的 webServiceURL 更改为`https://192.168.1.202:8888/passesWebserver/`，或询问您要发送通行证的人以允许 HTTP 服务（注意，他们需要开发设备才能这样做）。

另请注意，如果您更改为 https，您的 webServiceURL 可能无法工作，因为您的 MAMP 服务器未在端口 8888 上配置 SSL。

# ssis - 移动到控制流选项卡或数据流选项卡的 SSIS 键盘快捷键

> ID：15874663
> 
> 赞同：1
> 
> 时间：2013-04-08T08:35:52.783
> 
> 标签：ssis, shortcut, keystrokes

现在有一个快速的问题：在 SSIS 中的包编辑器的选项卡之间移动是否有键？我能找到的唯一站点是[这个 Microsoft](http://msdn.microsoft.com/en-us/library/ms173782%28v=sql.105%29.aspx)站点，那里列出的键盘快捷键在 SQL Server Integration Services 2012 中不起作用。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-30T15:27:04.787

F8 或 Shift-F8 将在选项卡之间循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:10:12.653

有趣的是，菜单项**Test**和**SSIS**具有相同的快捷方式“s”。

我能想到的最简单的方法。

*   查看数据流 - `Alt`+ `S`, `S`, `Enter`, `V`,`D`
*   查看控制流 - `Alt`+ `S`, `S`, `Enter`, `V`,`C`

# ms-word - docx4j 是否支持新的 Word 2013 重复部分内容控件

> ID：15874666
> 
> 赞同：1
> 
> 时间：2013-04-08T08:35:56.410
> 
> 标签：ms-word, docx4j

我知道 Docx4j 在 Microsoft 之前就已经支持 Word 中的 Content Controls 中的重复内容。（借助 OpenDoPE 和它的 Word 插件）。

但是，从 Word 2013 开始，重复部分内容控件是内置的。我找不到 Docx4j 是否会正确评估这个新的内容控件。有人知道吗？还是我应该试试？

谢谢，

克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:29:54.703

docx4j 2.8.1 不会评估它，GitHub 上的当前源代码也不会评估。

更糟糕的是，docx4j 2.8.1 将在 JAXB 解组期间删除该元素，这与 Ignorable 属性一致，因为[http://schemas.microsoft.com/office/word/2012/wordml](http://schemas.microsoft.com/office/word/2012/wordml)不包含在 JAXB 内容中。

GitHub master（从 2013 年 7 月 11 日起）将保留此元素（以及其他重要的 Word 2010 和 2013 扩展），docx4j 3.0 在发布时也将保留。

# magento - 按名称对类别集合进行排序

> ID：15874667
> 
> 赞同：0
> 
> 时间：2013-04-08T08:36:01.133
> 
> 标签：magento, magento-1.7

我在菜单中有自定义链接，在下拉菜单中显示类别。为此，我在`catalog/navigation->mainmenu.phtml` （自定义文件）中创建了一个文件，现在，我想在按名称排序后显示类别。请帮助我如何按名称对类别集合进行排序。我已经在管理员中设置了类别顺序。但在前端它显示未排序。
代码是： -

```
<?php $defaultcategory= Mage::app()->getStore()->getRootCategoryId();?>
  <?php $mainchildren = Mage::getModel('catalog/category')->getCategories($defaultcategory);?>
   <ul>
              <?php foreach ($mainchildren as $subcategory) : ?> <?php // 2 level ?>
                <?php if($subcategory->getIsActive()):?>
                 <li id="show_subcat" class="<?php if($i==1): echo 'first'; endif; ?>" >
                      <?php  $childid=$subcategory->getId();?> 
                     <?php $subchild = Mage::getModel('catalog/category')->getCategories($childid);?>
                      <?php foreach ($subchild as $subchildcategory) : ?> 
                         <?php $path=$subchildcategory->getRequestPath()?>
                         <?php break;?>
                     <?php endforeach ?>
                     <a  href="<?php echo  $this->getUrl().$path; ?>">
                       <?php echo $name= $subcategory->getName().$subcategory->getEnable() ?>
                     </a>
                 </li>
                 <?php endif;?>
              <?php endforeach; ?>
            </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:49:28.323

你可以试试 ：

```
children = Mage::getModel('catalog/category')->getCategories($defaultcategory)
                                             ->addAttributeToSort('name', 'ASC'); 
```

或者 ：

```
children = Mage::getModel('catalog/category')->getCategories($defaultcategory)
                                             ->setOrder('name','ASC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:22:07.790

```
$categories = Mage::helper('catalog/category');
$collection = $categories->getStoreCategories(false,true,false);
foreach($collection as $_category)
 {
    //Do something
    echo $_category->getName();
  } 
```

使用此代码获取集合并点击此链接以获取更多详细信息[在 magento - 相同的代码用于使所有类别运行良好，并在 localhost 但不在 Web 服务器中排序](https://stackoverflow.com/questions/8307117/in-magento-same-code-for-getting-all-categories-running-well-with-sorted-in-lo)

# eclipse - 默认情况下，不要在没有明确的 TestSuite 的情况下在 Maven 和每个 IDE（Eclipse、IntelliJ、...）中运行一类慢速 JUnit 测试

> ID：15874669
> 
> 赞同：17
> 
> 时间：2013-04-08T08:36:05.130
> 
> 标签：eclipse, junit, intellij-idea, jenkins, maven-3

我有一组非常慢的测试，需要一周的时间才能运行。（他们实际上是在大约一周内不间断地运行一些代码）。

自然，没有开发人员（甚至是默认的构建作业）想要运行这些测试。只有特定的、单独的构建作业才有时间运行它们。所以**这些测试需要默认禁用**。

JUnit 的[类别](https://github.com/junit-team/junit/wiki/Categories)似乎非常适合这一点：我用`@Category(SlowTests.class)`. 问题是它们仍在运行，因为：

*   我不想维护 TestSuite 类，因为我们每天都添加测试。我有 0 个 TestSuite 类：Maven、IntelliJ 和 Eclipse 只运行我模块中的所有测试类。包括所有那些缓慢的测试。
*   即使我们有 TestSuite 类，大多数开源贡献者仍然会尝试从 IntelliJ 或 Eclipse 运行所有测试类，认为它挂起并放弃运行测试。默认情况下需要排除那些缓慢的测试。最好不要在 IntelliJ 或 Eclipse 中进行任何额外配置。

**默认情况下，如何在不使用显式 TestSuite 的情况下排除一类慢速 JUnit 测试？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T14:04:55.320

默认情况下，这**在 Maven、IntelliJ 和 Eclipse 中有效**：

```
import static org.junit.Assume.assumeTrue;

@Test
public void mySlowTest() {
    assumeTrue("true".equals(System.getProperty("runSlowTests")));
    ...
} 
```

无论如何要运行它们，只需添加 VM 参数`-DrunSlowTests=true`。

从语义上讲，这是完全错误的。但它有效:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T13:22:25.280

据我所知，默认情况下无法阻止 Eclipse 运行某些测试。

从 Maven 运行某些类别很容易使用

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12.4</version>
    <configuration>
        <excludedGroups>${tests.exclude}</excludedGroups>
    </configuration>
</plugin> 
```

然后`tests.exclude`在某些 Maven 配置文件中定义。

正如我在一篇博文中所写的那样，使用当前版本的 JUnit 维护 JUnit 中的测试套件确实需要做太多的[工作](http://alex.nederlof.com/blog/2012/11/21/separating-the-fast-from-the-slow-junit-tests/)。我还解释了[一个名为 cpsuite 的库](http://www.johanneslink.net/projects/cpsuite.jsp)如何自动为您执行套件管理，如下所示：

```
@RunWith(ClasspathSuite.class) // Loads all unit tests it finds on the classpath
@ExcludeBaseTypeFilter(SlowTest.class) // Excludes tests that inherit SlowTest
public class FastTests {} 
```

但是，在这两种方法中，默认情况下 Eclipse 仍将只运行所有带有`@Test`注释的 Java 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:14:33.927

为什么不从运行缓慢的测试中进行集成测试。使用 maven-failsafe-plugin 可以通过不同的命名约定来处理这种情况。例如 *IT.java 这是Themen long runnin 测试。此外，我建议将激活放入分析器中，以便每个人都可以控制是否运行这些测试，这应该是默认设置

# java - HashMap 返回方法

> ID：15874677
> 
> 赞同：7
> 
> 时间：2013-04-08T08:36:29.183
> 
> 标签：java, android, hashmap

我在一个类中有一个方法，它初始化一个 HashMap 并将一些键和值放入其中，然后该方法返回 HashMap。如何检索返回的 HashMap？

```
public Map<String, String> getSensorValue(String sensorName) {
    registerSensor(sensorName);
    sensorValues.put("x","25");
    sensorValues.put("y","26");
    sensorValues.put("z","27");
    return sensorValues;
} 
```

在这里我从另一个类调用这个方法：

```
public static HashMap<String, String> sensValues = new HashMap<String, String>();

AllSensors sensVal = new AllSensors();
sensValues.putAll(sensVal.getSensorValue("orientation"));
String something = sensValues.get("x"); 
```

但它不以这种方式工作

```
sensValues.putAll(sensVal.getSensorValue("orientation")); 
```

使我的 android 应用程序崩溃。关键是要以某种方式检索返回的 HashMap。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T08:41:20.677

你不应该复制地图。只需尝试使用返回的参考：

```
Map<String, String> map = sensVal.getSensorValue("..."); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T08:42:40.870

您的方法需要返回一个`Map<String,String>`. 在您发布的代码中，`Map`sensorValues 从未初始化。

```
public Map<String, String> getSensorValue(String sensorName) {
    Map<String,String> sensorValues = new HashMap<String,String>();
    registerSensor(sensorName);
    sensorValues.put("x","25");
    sensorValues.put("y","26");
    sensorValues.put("z","27");
    return sensorValues;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T08:49:43.257

几乎就像 Rich 在他的回答中所说的那样，但是您的方法返回 a`Map`不能强制转换为 a `HashMap`。试试这个

```
Map<String, String> map = sensVal.getSensorValue("..."); 
```

或者更改您的 getSensorValue 方法，使其返回一个`HashMap`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:43:29.437

HashMap sensValues = new HashMap(); Set mapSet = (Set) sensValues.entrySet();

迭代器 mapIterator = mapSet.iterator();

```
 while (mapIterator.hasNext()) {
                    Map.Entry mapEntry = (Map.Entry) mapIterator.next();
                    String keyValue = (String) mapEntry.getKey();
                    String value = (String) mapEntry.getValue();
                    System.out.println("Key : " + keyValue + "= Value : " + value);
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T09:17:36.397

您也可以尝试通过参考方法传递，

```
 void main(){

    public static HashMap<String, String> sensValues = new HashMap<String, String>();

    AllSensors sensVal = new AllSensors();

    sensVal.setSensorValue(sensValues ,"orientation");

    String something = sensValues.get("x");
 }

   public void setSensorValue(Map<String, String> sensorValues, String sensorName) {

      registerSensor(sensorName);

      sensorValues.put("x","25");

      sensorValues.put("y","26"); 

      sensorValues.put("z","27");

   } 
```

# php - Facebook SDK PHP 空白页

> ID：15874683
> 
> 赞同：0
> 
> 时间：2013-04-08T08:36:49.913
> 
> 标签：php, facebook, facebook-php-sdk

我开始为我的网页编写一个新的 Facebook 应用程序。
我拥有一个`HTTPS / SSL Cert`为这个应用程序设置了配置的有效文件。 `PHP`并且`Apache`正在运行。

问题：
当我尝试运行一个简单的 Facebook php 脚本时，它显示了一个没有内容的空白页面。例如，我上传了 facebook **example.php**，当我打开页面时它仍然显示一个空白页面。和`APP secret`设置`APP ID`正确。

有人对我有什么建议吗？

编辑：

```
 <?php

require '/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxxx(appid)',
  'secret' => 'xxxx(secret)',
));

$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
}

$naitik = $facebook->api('/naitik');

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>php-sdk</title>
    <style>
      body {
        font-family: 'Lucida Grande', Verdana, Arial, sans-serif;
      }
      h1 a {
        text-decoration: none;
        color: #3b5998;
      }
      h1 a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>php-sdk</h1>

    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        Login using OAuth 2.0 handled by the PHP SDK:
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>
    <pre><?php print_r($_SESSION); ?></pre>

    <?php if ($user): ?>
      <h3>You</h3>
      <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

      <h3>Your User Object (/me)</h3>
      <pre><?php print_r($user_profile); ?></pre>
    <?php else: ?>
      <strong><em>You are not Connected.</em></strong>
    <?php endif ?>

    <h3>Public profile of Naitik</h3>
    <img src="https://graph.facebook.com/naitik/picture">
    <?php echo $naitik['name']; ?>
  </body>
</html> 
```

此代码来自[https://github.com/facebook](https://github.com/facebook)。它的 example.php 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:13:08.703

无论您是否正确设置了 app_id 或 app_secret，此示例都应向您显示 Naitik 的图片。如果没有，则表示您的 example.php 文件设置不正确，或者您的服务器有问题。

加载页面时遇到的 PHP 错误是什么？

- 编辑 -

请参阅此帖子以获取解决方案： [OAuth Error: This IP can't make requests for that application](https://stackoverflow.com/questions/12072720/oauth-error-this-ip-cant-make-requests-for-that-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T15:21:52.560

也许您的移动解决方案超出了您的 Facebook 应用程序允许的域/子域？我的意思是，也许您将您的应用程序域设置为“something.com”，但您试图从“mobile.something.com”调用登录网址，这将是显示空白页面的正当理由。

# linux - Perl one-liner 在文件名末尾添加一个字符串

> ID：15874684
> 
> 赞同：1
> 
> 时间：2013-04-08T08:36:50.127
> 
> 标签：linux, perl

我在一个目录中有一些 HTML 和 JavaScript 文件。我想在每个 JavaScript (name.js) 文件的末尾附加“_backup”。[它的单线](https://en.wikipedia.org/wiki/One-liner_program)是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:00:31.553

选择你的毒药：

1.  **`File::Copy`**

    ```
    use File::Copy 'move';
    for ( glob "*.js" ){  # Platform independent
        move( $_, "${_}_backup" ) or warn "Failed to copy '$_'";
    } 
    ```

2.  [`rename`](http://perldoc.perl.org/functions/rename.html)功能

    ```
    for ( glob "*.js" ){   # Not platform independent
        rename( $_, "${_}_backup" ) or warn "Failed to copy '$_'";
    } 
    ```

3.  *nix`rename`实用程序

    ```
    $ rename .js .js_backup *.js 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:44:31.140

-i 选项创建具有给定后缀的备份文件，然后提供一个空脚本。

```
perl -i_backup -p -e "" *.js; rm *.js 
```

这实际上是一条两条线

感谢[Zaid 的回答](https://stackoverflow.com/a/15875133/257635)：

```
perl -e 'rename($_,$_."_backup") for (glob "*.js");' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:04:29.443

这是一条略长的线，但它是 Perl 单线！

我假设你想要命名的文件

```
abc.js
def.js
dog.js 
```

改名为

```
abc_backup.js
def_backup.js
dog_backup.js

perl -e 'for(@ARGV) { ($bname)=/(.*)\.js/; rename $_, "$1_backup.js"; } ' *js 
```

大多数 Linux 发行版都包含一个“重命名”程序，它实际上是用 Perl 编写的，并执行类似这样的重命名操作；见`man rename`。

# spring - 无法在 Tomcat 中启动 JSP

> ID：15874686
> 
> 赞同：0
> 
> 时间：2013-04-08T08:36:55.257
> 
> 标签：spring, jsp, tomcat, deployment, web-deployment

我为我配置了一个 tomcat 服务器来部署一个 JSP Web 应用程序，但是每次我启动该网站时，它都会在`Tomcat Web Application Manager`that 中提示`FAIL - Application at context path /appNameHere could not be started`。现在我很困惑为什么会发生这种情况，有人可以解释并帮助为什么会发生这种情况吗？请参阅下面的详细错误。

```
Apr 08, 2013 4:44:30 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Apr 08, 2013 4:44:30 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/appNameHere] startup failed due to previous errors
Apr 08, 2013 4:44:30 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Apr 08, 2013 4:44:33 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Apr 08, 2013 4:44:34 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.jasypt.exceptions.EncryptionOperationNotPossibleException: Encryption raised an exception. A possible cause is you are using strong encryption algorithms and you have not installed the Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files in this Java Virtual Machine
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.handleInvalidKeyException(StandardPBEByteEncryptor.java:819)
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.decrypt(StandardPBEByteEncryptor.java:796)
    at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.decrypt(StandardPBEStringEncryptor.java:639)
    at org.jasypt.properties.PropertyValueEncryptionUtils.decrypt(PropertyValueEncryptionUtils.java:72)
    at org.jasypt.spring.properties.EncryptablePropertyPlaceholderConfigurer.convertPropertyValue(EncryptablePropertyPlaceholderConfigurer.java:107)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.convertProperty(PropertyResourceConfigurer.java:112)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.convertProperties(PropertyResourceConfigurer.java:95)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:72)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)
    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:194)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
    at java.lang.Thread.run(Unknown Source)

Apr 08, 2013 4:44:34 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Apr 08, 2013 4:44:34 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/appNameHere] startup failed due to previous errors
Apr 08, 2013 4:44:34 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"      
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">
    <session-config>
        <session-timeout>20</session-timeout>
        <cookie-config>
            <http-only>true</http-only>
            <secure>true</secure>
        </cookie-config>
        <tracking-mode>COOKIE</tracking-mode>
    </session-config>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>visitorApp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>visitorApp</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>
            index.jsp
        </welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/visitorApp-servlet.xml</param-value>
    </context-param>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Default page to serve -->
    <error-page>
        <exception-type>java.lang.Throwable</exception-type>
        <location>/error.jsp</location>
    </error-page>
    <error-page>
        <error-code>404</error-code>
        <location>/error.jsp</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/error.jsp</location>
    </error-page>
</web-app> 
```

这是 visitorApp-servlet.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/mvc
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <import resource="classes/applicationContext.xml"/>

    <!-- JSR-303 support will be detected on classpath and enabled automatically -->
    <mvc:annotation-driven/>

    <context:component-scan base-package=myPackageNameHere"/>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages"/>
    </bean>

</beans> 
```

我的听众有什么问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:03:47.027

> 如果您将加密数据存储到数据库中，请检查用于存储它的表列是否足够大以承载加密数据（始终大于原始数据）。如果您通过 HTTP 传输加密数据，请检查您在传输 BASE64 编码数据作为 URL 参数时是否存在问题（BASE64 使用 URL 参数中禁止使用的字符，例如“=”）。对于这些用途，请尝试使用十六进制输出。

[这个链接会很有帮助](http://jasypt.org/faq.html#i-keep-on-receiving-encryption-operation-not-possible)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:02:08.800

该异常表明您的 JAVA 设置中没有 JCE 策略 Jar 文件。

[从http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)下载它们

然后将罐子放在里面`jdk/lib/security`（[链接](https://cwiki.apache.org/STONEHENGE/installing-java-cryptography-extension-jce-unlimited-strength-jurisdiction-policy-files-6.html)）

# magento - Magento - secureNet 支付网关

> ID：15874693
> 
> 赞同：-3
> 
> 时间：2013-04-08T08:37:37.160
> 
> 标签：magento, magento-1.7

我正在尝试在 magento 上集成secureNet支付网关。但我找不到任何教程。如何在 Magento 上集成 SecureNet 支付网关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:48:13.570

要在 magento 中集成支付网关，您需要创建一个支付模块。

看一看 @

*   [创建支付方式模块 - Magento Wiki](http://www.magentocommerce.com/wiki/5_-_modules_and_development/payment/create-payment-method-module)
*   [如何创建 Magento 支付模块 - Inchoo](http://inchoo.net/ecommerce/magento/how-to-create-magento-payment-module/)
*   [如何创建 Magento 支付模块 - Excellencemagentoblog](http://www.excellencemagentoblog.com/magento-create-custom-payment-method)

# c# - 编辑数据集的 CommandText

> ID：15874697
> 
> 赞同：0
> 
> 时间：2013-04-08T08:37:49.670
> 
> 标签：c#, .net, dataset, runtime, strongly-typed-dataset

如何在运行时模式下编辑`Dataset's`( `.xsd file`) 查询`CommandText`？

怎样才能给出新的sql查询？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T08:43:37.137

不是 Dataset 包含 CommandText，而是 DataAdapter 包含 4 个命令：

```
public sealed class SqlDataAdapter
{
    public SqlCommand DeleteCommand { get; set; }
    public SqlCommand InsertCommand { get; set; }
    public SqlCommand SelectCommand { get; set; }
    public SqlCommand UpdateCommand { get; set; }
} 
```

例如，如果要更改 select sql ：

```
var dataset = new MyDataSet();
var adapter = new MyTableAdapter();
adapter.Adapter.SelectCommand.CommandText = "SELECT * FROM FOO";
adapter.Fill(dataset.MyTable); 
```

# java - 处理未映射的 Rest 路径

> ID：15874698
> 
> 赞同：2
> 
> 时间：2013-04-08T08:37:58.670
> 
> 标签：java, regex, servlets, jax-rs, guice

这是我当前的 Guice 配置：

```
public class MyServletModule extends ServletModule {
    @Override
    protected void configureServlets() {
        bind(MyRest.class);
        serveRegex(".+(?<!\\.(html|css|png|jpg))")
               .with(HttpServletDispatcher.class);
    }
} 
```

但是我希望我的 Rest 资源只能以的形式访问，`http://127.0.0.1:8888/{hashcode_or_filename}`并且是唯一接受和处理的形式（好吧，加上下面的 /create 方法）。

现在，我可以在这个路径模式中正确处理哈希码和文件名。

但是我不确定如何处理下面的类型或场景，其中客户端请求未映射的路径，在我的情况下返回：

> 找不到相对资源：/examples/foo 的完整路径： `http://127.0.0.1:8888/examples/foo`

或者

> 找不到相对资源：/examples/bar/foo 的完整路径：`http://127.0.0.1:8888/examples/bar/foo`

我需要的是能够处理未映射的路径，以便我可以返回错误 HTML 页面或其他内容，而不是在浏览器中显示这些错误文本。

另外，如果请求是：`http://127.0.0.1:8888/`我需要`http://127.0.0.1:8888/index.html`自动转发。现在我必须手动将 index.html 放在尾部。

我的 Resteasy 资源仅配置或连接：

```
@Singleton
@Path("/")
public class MyRest {
    @GET
    @Path({hashcode})
    public Response getSomething(...){}

    @POST
    @Path("create")
    public Response createSomething(...){}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T11:11:41.443

最简单的方法是注册过滤器以处理具有 200（OK）以外的错误代码的响应。或添加到您的 web.xml 中，如下所示：

```
<error-page>
    <error-code>404</error-code>
    <location>/ErrorPage.jsp</location>
</error-page> 
```

> 另外，如果请求是：`http://127.0.0.1:8888/`我需要 `http://127.0.0.1:8888/index.html`自动转发。现在我必须手动将 index.html 放在尾部。

您可以使用此模块[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)

**WEB-INF/web.xml**

```
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
    <init-param>
        <param-name>confPath</param-name>
        <param-value>/WEB-INF/urlrewrite.xml</param-value>
    </init-param>
    <!--...omitted...-->
</filter>

<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

**WEB-INF/urlrewrite.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite
        PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN"
        "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">
<urlrewrite>
    <rule match-type="regex">
        <from>^/$</from>
        <to type="redirect">/index.html</to>
    </rule>
</urlrewrite> 
```

# c# - webservice返回xml而不是json如何解决？

> ID：15874702
> 
> 赞同：0
> 
> 时间：2013-04-08T08:38:15.057
> 
> 标签：c#, asp.net

我在 asp.net 上开发了一个 Web 服务，我希望它返回一个 json 字符串而不是 xml 文件。我在我的代码中设置了以下内容，并查看了互联网上的多个来源，我尝试了但“错误”不断出现。

道.asmx

```
 [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public string getLosKPIDataYear()
        {
            List<Object> sqlObject = new List<Object>();
            String connectionString = DAO.GetConnectionString();
            string sqlQuery = string.Empty;
            var serializer = new JavaScriptSerializer();
            serializer.MaxJsonLength = Int32.MaxValue;
            SqlConnection sqlConn = new SqlConnection(connectionString);

            try
            {
                sqlQuery = "select LOSYearYear, LOSYearLOS from LOSYear";
                sqlConn.Open();
                SqlDataReader reader = null;
                SqlCommand sqlCommand = new SqlCommand(sqlQuery, sqlConn);
                reader = sqlCommand.ExecuteReader();

                while (reader.Read())
                {
                    sqlObject.Add(new { LOSYearYear = reader["LOSYearYear"].ToString(), LOSYearLOS = reader["LOSYearLOS"].ToString() }); 
```

} }

```
catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }

            sqlConn.Close();
            var resultData = new { e = sqlObject.ToArray() };
            ContentResult result = new ContentResult();
            result.Content = serializer.Serialize(resultData);
            result.ContentType = "application/json";
            String myResult = result.Content;
            return myResult;
        } 
```

网络配置

```
 <webServices>
          <protocols>
            <add name="HttpGet"/>
            <add name="HttpPost"/>

          </protocols>
        </webServices>

<system.webServer>
    <handlers>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
     <modules runAllManagedModulesForAllRequests="true"/>
    <staticContent>
      <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
    </staticContent>
  </system.webServer> 
```

我应该怎么做才能解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:40:53.557

尝试这个

```
var JsonString = ....;
$.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "YourWebServiceName.asmx/yourmethodname",
    data: "{'TheData':'" + JsonString + "'}",
    dataType: "json",
    success: function (msg) {
        var data = msg.hasOwnProperty("d") ? msg.d : msg;
        OnSucessCallBack(data);
    },
    error: function (xhr, status, error) {
        alert(xhr.statusText);
    }
});

function OnSuccessCallData(DataFromServer) {
 // your handler for success    
} 
```

网络服务代码：-

```
using System.Web.Services;
using System.Web.Script.Serialization;

    [System.Web.Script.Services.ScriptService]
    public class YourWebServiceName : System.Web.Services.WebService
    {
        [WebMethod]
        public string yourmethodname(string TheData)
        {
          JavascriptSerializer YourSerializer = new JavascriptSerializer();
          // custom serializer if you need one 
          YourSerializer.RegisterConverters(new JavascriptConverter  [] { new YourCustomConverter() });

          //deserialization
          TheData.Deserialize(TheData);

          //serialization  
          TheData.Serialize(TheData);
        }
    } 
```

# android - 启动另一个活动时导致 ActivityNotFoundException 的操作意图

> ID：15874708
> 
> 赞同：1
> 
> 时间：2013-04-08T08:38:53.390
> 
> 标签：android, android-intent, android-2.2-froyo

启动活动的我的 TestApp 具有以下代码：

```
public void startOperaView() {
        Intent browserIntent = new Intent("org.droidtv.nettvbrowser.VIEW");
        Uri luri = Uri.parse("connectedplanet.tv/olvs/test");

        //browserIntent.setClass(getApplicationContext(), Browser.class);
        //browserIntent.setAction("org.droidtv.nettvbrowser.VIEW");
        browserIntent.setType("application/vnd.droidtv.sta");
        browserIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                | Intent.FLAG_INCLUDE_STOPPED_PACKAGES);
        browserIntent.setData(luri);

        startActivity(browserIntent);
    } 
```

并且包“org.droidtv.nettvbrowser”具有以下 AndroidManifest.xml 文件：

```
<activity
            android:name="org.droidtv.nettvbrowser.Browser"
            android:configChanges="locale"
            android:label="@string/app_name" >
            <intent-filter>
             <action android:name="org.droidtv.nettvbrowser.VIEW" />
             <action android:name="android.intent.action.MAIN" />
             <category android:name="android.intent.category.LAUNCHER" />
             <category android:name="android.intent.category.DEFAULT" />
             <data android:mimeType="application/vnd.droidtv.sta" />

            </intent-filter>
        </activity> 
```

奇怪的是，如果我在意图中指定实际的包名称，它似乎可以正常工作，只有动作意图会抛出这些错误。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:43:00.430

参考[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)可以试试set`android:exported="true"`

```
android:exported 
```

Activity 是否可以由其他应用程序的组件启动 - 如果可以，则为“true”，否则为“false”。如果为“false”，则该活动只能由同一应用程序的组件或具有相同用户 ID 的应用程序启动。默认值取决于活动是否包含意图过滤器。没有任何过滤器意味着该活动只能通过指定其确切的类名来调用。这意味着该活动仅供应用程序内部使用（因为其他人不知道类名）。所以在这种情况下，默认值为“false”。另一方面，存在至少一个过滤器意味着该活动是供外部使用的，因此默认值为“true”。

此属性不是限制活动暴露给其他应用程序的唯一方法。您还可以使用权限来限制可以调用活动的外部实体（请参阅权限属性）。

或者你可以参考这样的东西：

```
<activity android:name="OutgoingCallBroadcaster"
        android:theme="@android:style/Theme.NoDisplay"
        android:permission="android.permission.CALL_PHONE"
        android:configChanges="orientation|screenSize|keyboardHidden">
    <!-- CALL action intent filters, for the various ways
         of initiating an outgoing call. -->
    <intent-filter>
        <action android:name="android.intent.action.CALL" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="tel" />
    </intent-filter>
    <intent-filter android:icon="@drawable/ic_launcher_sip_call">
        <action android:name="android.intent.action.CALL" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="sip" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.CALL" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="voicemail" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.CALL" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="vnd.android.cursor.item/phone" />
        <data android:mimeType="vnd.android.cursor.item/phone_v2" />
        <data android:mimeType="vnd.android.cursor.item/person" />
    </intent-filter>
</activity> 
```

# c# - 在 C# 中从 XML 文件中读取特定数据

> ID：15874713
> 
> 赞同：0
> 
> 时间：2013-04-08T08:39:01.877
> 
> 标签：c#, xml

我想从 XML 文件中读取特定数据。到目前为止，这是我想出的：当我在没有 (if (reader.Name == ControlID)) 行的情况下运行程序时 reader.Value 返回正确的值，但是当我包含 if 子句时，它返回 null

```
 public void GetValue(string ControlID)
    {
        XmlTextReader reader = new System.Xml.XmlTextReader("D:\\k.xml");
        string contents = "";

        while (reader.Read())
        {
            reader.MoveToContent();
            if (reader.Name == ControlID)
                contents = reader.Value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:50:25.930

**通过以下代码：**

```
XmlDocument doc = new XmlDocument();
doc.Load(filename);
string xpath = "/Path/.../config"
foreach (XmlElement elm in doc.SelectNodes(xpath))
{
   Console.WriteLine(elm.GetAttribute("id"), elm.GetAttribute("desc"));
} 
```

**使用 XPathDocument（更快、更小的内存占用、只读、奇怪的 API）：**

```
XPathDocument doc = new XPathDocument(filename);
string xpath = "/PathMasks/Mask[@desc='Mask_X1']/config"
XPathNodeIterator iter = doc.CreateNavigator().Select(xpath);
while (iter.MoveNext())
{
   Console.WriteLine(iter.Current.GetAttribute("id"), iter.Current.GetAttribute("desc'));
} 
```

也可以参考这个链接：

[http://support.microsoft.com/kb/307548](http://support.microsoft.com/kb/307548)

这可能对您有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:56:03.233

您可以尝试以下代码，例如 xPath 查询：

```
XmlDocument doc = new XmlDocument();
doc.Load("k.xml");

XmlNode absoluteNode;

/*
*<?xml version="1.0" encoding="UTF-8"?>
<ParentNode>
    <InfoNode>
        <ChildNodeProperty>0</ChildNodeProperty>
        <ChildNodeProperty>Zero</ChildNodeProperty>
    </InfoNode>
    <InfoNode>
        <ChildNodeProperty>1</ChildNodeProperty>
        <ChildNodeProperty>One</ChildNodeProperty>
    </InfoNode>
</ParentNode>
*/

int parser = 0
string nodeQuery = "//InfoNode//ChildNodeProperty[text()=" + parser + "]";
absoluteNode = doc.DocumentElement.SelectSingleNode(nodeQuery).ParentNode;

//return value is "Zero" as string
var nodeValue = absoluteNode.ChildNodes[1].InnerText; 
```

# c - 为什么 wprintf 将 Unicode 连字分成两个不同的字素？

> ID：15874715
> 
> 赞同：2
> 
> 时间：2013-04-08T08:39:18.123
> 
> 标签：c, unicode, wchar, ligature

代码：

```
#include <stdio.h>
#include <wchar.h>
#define USE_W
int main()
{
#ifdef USE_W
    const wchar_t *ae_utf16 = L"\x00E6 & ASCII text ae\n";
    wprintf(ae_utf16);
#else
    const char *ae_utf8 = "\xC3\xA6 & ASCII text ae\n";
    printf(ae_utf8);
#endif
    return 0;
} 
```

输出：

> ae & ASCII 文本 ae

虽然 printf 产生正确的 UTF-8 输出：

> æ & ASCII 文本 ae

你可以[在这里](http://ideone.com/giKg5C)测试一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:23:17.013

`printf`只是将原始字节发送到您的终端；它对编码一无所知。如果您的终端碰巧被配置为将其解释为 UTF-8，它将显示正确的字符。

`wprintf`，另一方面，确实知道编码。它的[行为就像](http://www.cplusplus.com/reference/cwchar/wprintf/)它使用函数[wcrtomb 一样](http://www.cplusplus.com/reference/cwchar/wcrtomb/)，该函数将宽字符 ( `wchar_t`) 编码为多字节序列，*具体取决于当前的 locale*。如果默认语言环境恰好是`"C"`，这是非常简约的，则字符`æ`将转换为“或多或少等效”的字节序列`ae`。

如果您将语言环境明确设置为使用 UTF-8 的内容，例如`"en_US.UTF-8"`，则输出[符合预期](http://ideone.com/AdSDsR)。当然，每个系统支持的语言环境集是不同的，所以硬编码是不好的。

# d3.js - d3.js 日历视图 - 颜色 + 自定义日期

> ID：15874716
> 
> 赞同：0
> 
> 时间：2013-04-08T08:39:28.113
> 
> 标签：d3.js, calendar

我对他的日历视图有几个问题 [http://bl.ocks.org/mhska/5333055](http://bl.ocks.org/mhska/5333055)

![在此处输入图像描述](https://i.stack.imgur.com/hypzk.jpg)

数据范围从 1 到 4317，因此颜色不是很“均匀”分布。有什么办法可以改善吗？（我的意思是基本上低于 100 的所有东西都只是一种红色）

当您将鼠标悬停在从 yyy-mm-dd 到 dd-mm-yyyy 的字段上时，有没有办法更改日期格式？

如何在没有数据的情况下更改字段的颜色？（通常这意味着周末）目前没有数据和大多数数据（超过 1000 个）的文件具有相同的颜色。

谢谢一堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:26:18.037

您可以通过调整行来更改显示的日期格式

```
date = d3.time.format("%Y-%m-%d") 
```

有关说明符的更多信息可以在[文档](https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-format)中找到。

要更改颜色，您需要提供不同的函数来将值映射到颜色。看起来您当前仅将输入值映射到 40 种输出颜色。

```
.range(d3.range([40])) 
```

增加这个数字可能是一个很好的起点。请注意，您可以提供任意函数，特别是您可以在其中单独处理缺失值。

# c++ - 如何在本机 C++ 单元测试（Visual Studio）中从项目中打开文件？

> ID：15874723
> 
> 赞同：6
> 
> 时间：2013-04-08T08:39:53.123
> 
> 标签：c++, visual-studio, unit-testing, visual-c++

我在 Visual Studio (2012) 中有一个本机 C++ 单元测试项目。
在我的一个测试中，我想读取包含在我的单元测试项目中的文件。可能吗？我应该设置文件的哪些属性以及应该使用什么路径？

我在我的项目中添加了一个 test.txt 文件（并尝试将其 Content 属性设置为 true）。在单元测试中，我尝试使用如下相对路径打开文件：

```
std::ifstream file("text.txt"); 
```

但它不起作用。

我猜应该将文件复制到运行单元测试的地方。有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-05T14:45:23.417

这可以通过使用`__FILE__`宏来完成，在我的例子中，我是这样做的：

```
//Returns my solution's directory
#define TEST_CASE_DIRECTORY GetDirectoryName(__FILE__)

string GetDirectoryName(string path){
    const size_t last_slash_idx = path.rfind('\\');
    if (std::string::npos != last_slash_idx)
    {
        return path.substr(0, last_slash_idx + 1);
    }
    return "";
}

TEST_METHOD(MyTest)
{
    string filename = std::string(TEST_CASE_DIRECTORY) + "MyTestFile.txt";

    TestOutputForFile(filename);
} 
```

# ios - 如何创建悬停在屏幕上的 UINavigationController（不向下平移屏幕）

> ID：15874724
> 
> 赞同：0
> 
> 时间：2013-04-08T08:39:58.757
> 
> 标签：ios, uinavigationcontroller, uikit, uinavigationbar

我想要一个`UINavigationController`悬停在当前屏幕上而不是向下“平移”屏幕为它让路。

目前我的实现是这样的：

```
UIBarButtonItem* backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonSystemItemCancel target:self action:@selector(backButtonTapped)];
[self.navigationItem setBackBarButtonItem:backButton]; 
```

因此，每次我显示 navigationItem 时，它都会向下滑动到屏幕中，平移整个屏幕。然后当我隐藏它时，它会滑出，拉回整个屏幕。我希望它改为悬停，即屏幕的位置保持不变。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:58:38.023

根据问题，当我们从导航控制器推送屏幕时，您希望为屏幕设置动画。我已经在我的项目中完成了。步骤如下

1）当您从导航控制器推送视图控制器时，您必须在我们推送时为当前视图控制器设置动画。代码如下

```
 (void)viewWillDisappear:(BOOL)animated {
    [UIView beginAnimations:@"animation2" context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration: 0.7];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO]; 
    [UIView commitAnimations];
[super viewWillDisappear:animated];
} 
```

2）如果你想从第二个视图控制器弹出到第一个视图控制器意味着你在第二个视图控制器中输入相同的代码。你可以通过修改这个方法参数来改变动画过渡端`setAnimationTransition`

# php - 带有条件检查的字符串到数组

> ID：15874725
> 
> 赞同：1
> 
> 时间：2013-04-08T08:40:03.840
> 
> 标签：php, arrays, string

该字符串具有 html 内容。

例如：

```
<ul> 
  <li>....</li>
  <li>....</li> 
  <li>....</li> 
</ul> 
```

php中是否有任何函数可以将字符串转换为这样的数组

```
array(
  [0] => '<ul>',
  [1] => '<li>....</li>',
  [2] => '<li>....</li>',
  [3] => '</ul>'
) 
```

任何人都可以指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:50:13.760

您可以使用 SimpleXML 解析 HTML，然后将其转换为数组

```
$result = (array) simplexml_load_string($htmlDocument); 
```

[http://www.php.net/manual/en/function.simplexml-load-string.php](http://www.php.net/manual/en/function.simplexml-load-string.php)

```
$ul = <<<HTML
<ul> 
  <li>....</li>
  <li>....</li> 
  <li>....</li> 
</ul>
HTML;

$result = (array) simplexml_load_string($ul);

print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:46:12.900

```
$a='<ul> 
<li>....</li>
<li>....</li> 
<li>....</li> 
</ul>';

$as = explode("\n", $a);
print_r($as); 
```

然后

```
Array
(
    [0] => <ul> 
    [1] => <li>....</li>
    [2] => <li>....</li> 
    [3] => <li>....</li> 
    [4] => </ul>
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:46:21.387

`$str`是您的原始字符串。

```
$array = explode("\n", $str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:47:03.717

这取决于你实际上想要做什么。

如果您实际上是在尝试按行分隔字符串，则相当简单：

```
$array = explode("\n", $htmlString);
foreach ($array as $key => $value) {
    $array[$key] = trim($value);
}

print_r($array); // Use this to dump out the value of $array. 
```

但是，如果您试图以一种有意义的方式解析 HTML，那么就不是那么容易了。您需要改用 DOMDocument 或专用的 HTML/XML 解析器。

至于原因，请阅读以下内容：

[RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T09:05:09.183

我认为您需要一个用于通用解决方案的 html praser

尝试链接 [http://code.google.com/p/php-html2array/](http://code.google.com/p/php-html2array/)

下载类文件 [http://code.google.com/p/php-html2array/downloads/detail?name=class.htmlParser%20v1.02.zip&can=2&q=](http://code.google.com/p/php-html2array/downloads/detail?name=class.htmlParser%20v1.02.zip&can=2&q=)

# php - 如何使用会话/函数或javascript将变量从插件php传递到wordpress中的另一个php文件？

> ID：15874726
> 
> 赞同：0
> 
> 时间：2013-04-08T08:40:10.007
> 
> 标签：php, plugins, wordpress

我有一个插件文件 testplugin.php ..它包含变量 $abc;

//主插件.php

```
if(!is_admin()){
new Funtion_Button();
}
class Function_Button
{

if(is_single() || is_page() || is_home() ){  
      global $post; 
      global $wpdb; 

 $query_images_args = array(
     'post_type' => 'attachment' , 'post_mime_type' =>'image','post_status' => 'published', 'posts_per_page' => -1,'numberposts' => 1

$query_images = new WP_Query( $query_images_args );
         $images = array();
         foreach ( $query_images->posts as $image) {
         $images[]= wp_get_attachment_url( $image->ID );

         }
                 $abc[]=0;
         $abc= $abc.http_build_query($images);
                 $_SESSION['arrayImg']=$abc;
 );
} 
```

///接收文件

```
include ('testplugin.php'); 
session_start();
$array1[]=$abc; 
```

现在这个 $abc 来自主插件页面

但我收到了这个错误

**致命错误：在第 98 行调用 C:\wamp\www\wordpress\wp-content\plugins\testplugin.php 中的未定义函数 is_admin()**

在 98 线上我有 *`if(!is_admin()){`*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:52:55.237

使用会话：

//关于testplugin.php

```
session_start();
$_SESSION['varname'] = $var_value; 
```

//在另一个文件上

```
session_start();
$var_value = $_SESSION['varname']; 
```

使用 cookie：

//关于testplugin.php

```
$_COOKIE['varname'] = $var_value; 
```

//在第2页

```
$var_value = $_COOKIE['varname']; 
```

# java - 从浏览器获取浏览器历史详细信息，而不是android中的默认值

> ID：15874731
> 
> 赞同：3
> 
> 时间：2013-04-08T08:40:26.023
> 
> 标签：java, android

我正在开发一个应用程序，我需要在其中获取用户访问的 URL。我已经成功地从 android 的默认浏览器中获取了 URL。我知道有些浏览器会保护这种行为。但我需要知道是否有任何解决方法可以实现这一目标。主要来自opera和dolphin浏览器

# netbeans - 带有 NetBeans 的 KendoUI

> ID：15874732
> 
> 赞同：0
> 
> 时间：2013-04-08T08:40:29.503
> 
> 标签：netbeans, kendo-ui

我想将 Jsp 包装器用于带有 NetBeans 的 KendoUI。

在我的控制器中，我添加了 ComboBox 的示例代码：

```
@RequestMapping(value = {"/", "/index"}, method = RequestMethod.GET)
public String index(Model model) {
    model.addAttribute("fabrics", new DropDownListItem[] {
            new DropDownListItem("Cotton", "1"),
            new DropDownListItem("Polyester", "2"),
            new DropDownListItem("Cotton/Polyester", "3"),
            new DropDownListItem("Rib Knit", "4")
    });

    model.addAttribute("sizes", new String[] {
        "X-Small",
        "Small",
        "Medium",
        "Large",
        "X-Large",
        "2X-Large"
    });

    return "web/combobox/index";
} 
```

我做一个导入：

```
import com.kendoui.spring.models.DropDownListItem; 
```

但是 NetBeans 说：**package import com.kendoui.spring.models does not exist**。我使用 NetBeans 的“手动安装工件”功能将 kendo-taglib-2013.1.319.jar 的依赖项添加到 pom.xml。在 html 端使用 KendoUI 时一切正常。

在[http](http://docs.kendoui.com/getting-started/using-kendo-with/jsp/introduction) ://docs.kendoui.c​​om/getting-started/using-kendo-with/jsp/introduction 上找到的要求说“面向企业开发人员的 Eclipse Juno（J2EE 支持）”是必需的。

你们有没有成功地将 KendoUI 与 NetBeans 一起使用？如果是，要进行哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T17:42:29.047

编辑：您可以在 netbeans 中使用 kendo ui，但可以自己使用。没有特别的整合。检查 netbeans 最新的惊人版本 7.4 。它包括由 cordova 构建到 android 和 ios 包。您可以将 kendo ui 项目作为 html5 cordova 应用程序启动。我希望这有帮助。

看看以下答案：

1.  [没有公司支持 Kendo UI 的 IDE](https://stackoverflow.com/questions/17091911/is-there-a-gui-designer-for-kendo)
2.  [Eclipse 不完全支持](http://www.kendoui.com/forums/kendo-ui-web/general-discussions/eclipse-ide-setup-for-code-completion-checking.aspx)
3.  [Eclipse 试图帮助你](https://stackoverflow.com/questions/1006934/eclipse-javascript-editor-content-assist-for-js-files-autocompletion)
4.  [Kendo UI Bootstrapper（帮助启动您的项目）](http://www.kendoui.com/blogs/teamblog/posts/13-07-23/bootstrapper-intro.aspx)

我希望这有帮助。如果有人有能力与他一起发展`Kendo Ui`，`NetNeans`我会非常感谢他

# svg - SVG 路径检测重叠或封闭的形状

> ID：15874734
> 
> 赞同：8
> 
> 时间：2013-04-08T08:40:42.347
> 
> 标签：svg

我有棕色填充的 svg 路径，我想检测并提醒我的用户是否有任何形状在另一个形状的后面或上面。我知道如果它们在边缘相交会得到交集列表，但是如果我想检测一个位于另一个形状后面但在边缘不相交的形状会发生什么？

encoluseList 方法似乎处理的是边界框而不是这个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-06T23:25:00.757

检测路径/形状是否与另一个重叠
1\. 计算最终形状覆盖的面积
2\. 独立计算所有形状的面积总和（因为这是 SVG 并且每个路径元素的细节是已知的，这可以是完成）
3\. 比较 2 个区域。如果 2 个区域相同，则没有重叠，否则至少有 2 个形状重叠。

棘手的步骤是步骤 1，可以使用像素绘画算法（我的偏好）近似计算。对于其他方法，您可以通过以下有关重叠圆圈区域的[stackoverflow 问题](https://stackoverflow.com/questions/1667310/combined-area-of-overlapping-circles)

# c++ - 具有继承的 C++ 模板特化

> ID：15874737
> 
> 赞同：1
> 
> 时间：2013-04-08T08:40:50.593
> 
> 标签：c++, templates, inheritance

以下情况：

```
class FeatureBase
class Feature1 : public FeatureBase

class FeatureAttrBase
class Feature1Attr : public FeatureAttrbase 
```

FeatureBase 包含一个 FeatureAttrBase 列表，应该能够创建和管理这些对象。因此我在 FeatureBase 上使用了一个模板。

```
template<class T = FeatureAttrBase> class FeatureBase 
```

创建和管理属性（例如 new T()）

并且子类使用专门的继承

```
class Feature1 : public FeatureBase<Feature1Attr> 
```

在我的代码中的其他任何地方我都写了一个方法

```
RegisterFeature(FeatureBase<FeatureAttrBase>* feature) 
```

但是编译器给了我一个错误，它无法在 Feature1 和 FeatureBase 之间进行转换。在上述方法中，我只需要使用来自 FeatureAttrBase 的信息。但在 Feature1 中，我需要访问 Feature1Attr。

因此问题是如何解决这个问题？我必须改变我的数据结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:03:34.410

让模板参数相互继承不会使模板类相关。您应该改为执行以下操作（可能不是最佳解决方案，但您尚未指定要执行的操作）：

```
class FeatureAttrBase;
class FeatureBase
{
public:
    virtual FeatureAttrBase* GetAttributes() = 0;
};

template<class T>
class FeatureImpl : public FeatureBase
{
    T attr;
public:
    FeatureAttrBase* GetAttributes()
    {
        return &attr;
    }
};

class Feature1Attr : public FeatureAttrBase;
class Feature1 : public FeatureImpl<Feature1Attr>; 
```

实际上，您可能不需要`FeatureImpl`类，可以直接将实现放在`Feature1`类中（并完全摆脱模板）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:04:05.900

您可以继承`FeatureBase`from 的特化`FeatureBase<FeatureAttrBase>`。像这样的东西：

```
// Forward declaration
template <typename T>
class FeatureBase;

// Type selecting trait class FeatureBase_BaseClass
// FeatureBase for derived Attrs will inherit from FeatureBase<FeatureAttrBase>
template <typename T>
struct FeatureBase_BaseClass
{
  typedef FeatureBase<FeatureAttrBase> Type;
};

// FeatureBase<FeatureAttrBase> will inherit from a dummy type
template <>
struct FeatureBase_BaseClass<FeatureAttrBase>
{
  struct Type {};
};

// Use FeatureBase_BaseClass to select the proper base class for FeatureBase
template <typename T = FeatureAttrBase>
class FeatureBase : public FeatureBase_BaseClass<T>::Type
{
  //as before
}; 
```

这样，所有`FeatureBase<X>`特定属性`X`都将继承自`FeatureBase<FeatureAttrBase>`.

# file-upload - 带图像检测的纯 ASP 上传

> ID：15874740
> 
> 赞同：6
> 
> 时间：2013-04-08T08:41:04.393
> 
> 标签：file-upload, asp-classic

如何将文件从浏览器上传到运行经典 ASP 的服务器并在服务器端检测文件是否为有效图片？对于有效图片，如何获取它们的尺寸？

通常经典 ASP 中的文件上传是由第三方组件完成的，这些组件带有 DLL 文件并且需要在服务器上注册，有时也需要花钱。毋庸置疑，出于安全原因，许多主机不允许使用第三方组件。

已经有很多纯 ASP 上传脚本，但它们只获取文件并保存到服务器磁盘，没有任何图像检测。

以下是我自己为上述目的编写的脚本，但当然欢迎使用替代方案或更好的方法提供更多答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T08:41:04.393

这是一个处理文件上传和图像检测的类。用例将在下面。按原样保存，最好保存为新文件，`.asp`扩展名为*ShadowUpload.asp*

**注意**：如果您想允许上传大于 200kb 的图像，请查看[Request.BinaryRead(Request.TotalBytes) throws error for large files](https://stackoverflow.com/questions/4209227/request-binaryreadrequest-totalbytes-throws-error-for-large-files)的答案。（不这样做可能会导致 BinaryRead 行出现“不允许操作”错误。）

```
<%
'constants:
Const MAX_UPLOAD_SIZE=1500000 'bytes
Const MSG_NO_DATA="nothing to upload!"
Const MSG_EXCEEDED_MAX_SIZE="you exceeded the maximum upload size!"
Const SU_DEBUG_MODE=False

Class ShadowUpload
    Private m_Request
    Private m_Files
    Private m_Error

    Public Property Get GetError
        GetError = m_Error
    End Property

    Public Property Get FileCount
        FileCount = m_Files.Count
    End Property

    Public Function File(index)
        Dim keys
        keys = m_Files.Keys
        Set File = m_Files(keys(index))
    End Function

    Public Default Property Get Item(strName)
        If m_Request.Exists(strName) Then
            Item = m_Request(strName)
        Else  
            Item = ""
        End If
    End Property

    Private Sub Class_Initialize
        Dim iBytesCount, strBinData

        'first of all, get amount of uploaded bytes:
        iBytesCount = Request.TotalBytes

        WriteDebug("initializing upload, bytes: " & iBytesCount & "<br />")

        'abort if nothing there:
        If iBytesCount=0 Then
            m_Error = MSG_NO_DATA
            Exit Sub
        End If

        'abort if exceeded maximum upload size:
        If iBytesCount>MAX_UPLOAD_SIZE Then
            m_Error = MSG_EXCEEDED_MAX_SIZE
            Exit Sub
        End If

        'read the binary data:
        strBinData = Request.BinaryRead(iBytesCount)

        'create private collections:
        Set m_Request = Server.CreateObject("Scripting.Dictionary")
        Set m_Files = Server.CreateObject("Scripting.Dictionary")

        'populate the collection:
        Call BuildUpload(strBinData)
    End Sub

    Private Sub Class_Terminate
        Dim fileName
        If IsObject(m_Request) Then
            m_Request.RemoveAll
            Set m_Request = Nothing
        End If
        If IsObject(m_Files) Then
            For Each fileName In m_Files.Keys
                Set m_Files(fileName)=Nothing
            Next
            m_Files.RemoveAll
            Set m_Files = Nothing
        End If
    End Sub

    Private Sub BuildUpload(ByVal strBinData)
        Dim strBinQuote, strBinCRLF, iValuePos
        Dim iPosBegin, iPosEnd, strBoundaryData
        Dim strBoundaryEnd, iCurPosition, iBoundaryEndPos
        Dim strElementName, strFileName, objFileData
        Dim strFileType, strFileData, strElementValue

        strBinQuote = AsciiToBinary(chr(34))
        strBinCRLF = AsciiToBinary(chr(13))

        'find the boundaries
        iPosBegin = 1
        iPosEnd = InstrB(iPosBegin, strBinData, strBinCRLF)
        strBoundaryData = MidB(strBinData, iPosBegin, iPosEnd-iPosBegin)
        iCurPosition = InstrB(1, strBinData, strBoundaryData)
        strBoundaryEnd = strBoundaryData & AsciiToBinary("--")
        iBoundaryEndPos = InstrB(strBinData, strBoundaryEnd)

        'read binary data into private collection:
        Do until (iCurPosition>=iBoundaryEndPos) Or (iCurPosition=0)
            'skip non relevant data...
            iPosBegin = InstrB(iCurPosition, strBinData, AsciiToBinary("Content-Disposition"))
            iPosBegin = InstrB(iPosBegin, strBinData, AsciiToBinary("name="))
            iValuePos = iPosBegin

            'read the name of the form element, e.g. "file1", "text1"
            iPosBegin = iPosBegin+6
            iPosEnd = InstrB(iPosBegin, strBinData, strBinQuote)
            strElementName = BinaryToAscii(MidB(strBinData, iPosBegin, iPosEnd-iPosBegin))

            'maybe file?
            iPosBegin = InstrB(iCurPosition, strBinData, AsciiToBinary("filename="))
            iPosEnd = InstrB(iPosEnd, strBinData, strBoundaryData)
            If (iPosBegin>0) And (iPosBegin<iPosEnd) Then
                'skip non relevant data..
                iPosBegin = iPosBegin+10

                'read file name:
                iPosEnd = InstrB(iPosBegin, strBinData, strBinQuote)
                strFileName = BinaryToAscii(MidB(strBinData, iPosBegin, iPosEnd-iPosBegin))

                'verify that we got name:
                If Len(strFileName)>0 Then
                    'create file data:
                    Set objFileData = New FileData
                    objFileData.FileName = strFileName

                    'read file type:
                    iPosBegin = InstrB(iPosEnd, strBinData, AsciiToBinary("Content-Type:"))
                    iPosBegin = iPosBegin+14
                    iPosEnd = InstrB(iPosBegin, strBinData, strBinCRLF)
                    strFileType = BinaryToAscii(MidB(strBinData, iPosBegin, iPosEnd-iPosBegin))
                    objFileData.ContentType = strFileType

                    'read file contents:
                    iPosBegin = iPosEnd+4
                    iPosEnd = InstrB(iPosBegin, strBinData, strBoundaryData)-2
                    strFileData = MidB(strBinData, iPosBegin, iPosEnd-iPosBegin)

                    'check that not empty:
                    If LenB(strFileData)>0 Then
                        objFileData.Contents = strFileData

                        'append to files collection if not empty:
                        Set m_Files(strFileName) = objFileData
                    Else  
                        Set objFileData = Nothing
                    End If
                End If
                strElementValue = strFileName
            Else  
                'ordinary form value, just read:
                iPosBegin = InstrB(iValuePos, strBinData, strBinCRLF)
                iPosBegin = iPosBegin+4
                iPosEnd = InstrB(iPosBegin, strBinData, strBoundaryData)-2
                strElementValue = BinaryToAscii(MidB(strBinData, iPosBegin, iPosEnd-iPosBegin))
            End If

            'append to request collection
            m_Request(strElementName) = strElementValue

            'skip to next element:
            iCurPosition = InstrB(iCurPosition+LenB(strBoundaryData), strBinData, strBoundaryData)
        Loop
    End Sub

    Private Function WriteDebug(msg)
        If SU_DEBUG_MODE Then
            Response.Write(msg)
            Response.Flush
        End If
    End Function

    Private Function AsciiToBinary(strAscii)
        Dim i, char, result
        result = ""
        For i=1 to Len(strAscii)
            char = Mid(strAscii, i, 1)
            result = result & chrB(AscB(char))
        Next
        AsciiToBinary = result
    End Function

    Private Function BinaryToAscii(strBinary)
        Dim i, result
        result = ""
        For i=1 to LenB(strBinary)
            result = result & chr(AscB(MidB(strBinary, i, 1))) 
        Next
        BinaryToAscii = result
    End Function
End Class

Class FileData
    Private m_fileName
    Private m_contentType
    Private m_BinaryContents
    Private m_AsciiContents
    Private m_imageWidth
    Private m_imageHeight
    Private m_checkImage

    Public Property Get FileName
        FileName = m_fileName
    End Property

    Public Property Get ContentType
        ContentType = m_contentType
    End Property

    Public Property Get ImageWidth
        If m_checkImage=False Then Call CheckImageDimensions
        ImageWidth = m_imageWidth
    End Property

    Public Property Get ImageHeight
        If m_checkImage=False Then Call CheckImageDimensions
        ImageHeight = m_imageHeight
    End Property

    Public Property Let FileName(strName)
        Dim arrTemp
        arrTemp = Split(strName, "\")
        m_fileName = arrTemp(UBound(arrTemp))
    End Property

    Public Property Let CheckImage(blnCheck)
        m_checkImage = blnCheck
    End Property

    Public Property Let ContentType(strType)
        m_contentType = strType
    End Property

    Public Property Let Contents(strData)
        m_BinaryContents = strData
        m_AsciiContents = RSBinaryToString(m_BinaryContents)
    End Property

    Public Property Get Size
        Size = LenB(m_BinaryContents)
    End Property

    Private Sub CheckImageDimensions
        Dim width, height, colors
        Dim strType

        '''If gfxSpex(BinaryToAscii(m_BinaryContents), width, height, colors, strType) = true then
        If gfxSpex(m_AsciiContents, width, height, colors, strType) = true then
            m_imageWidth = width
            m_imageHeight = height
        End If
        m_checkImage = True
    End Sub

    Private Sub Class_Initialize
        m_imageWidth = -1
        m_imageHeight = -1
        m_checkImage = False
    End Sub

    Public Sub SaveToDisk(strFolderPath, ByRef strNewFileName)
        Dim strPath, objFSO, objFile
        Dim i, time1, time2
        Dim objStream, strExtension

        strPath = strFolderPath&"\"
        If Len(strNewFileName)=0 Then
            strPath = strPath & m_fileName
        Else  
            strExtension = GetExtension(strNewFileName)
            If Len(strExtension)=0 Then
                strNewFileName = strNewFileName & "." & GetExtension(m_fileName)
            End If
            strPath = strPath & strNewFileName
        End If

        WriteDebug("save file started...<br />")

        time1 = CDbl(Timer)

        Set objFSO = Server.CreateObject("Scripting.FileSystemObject")
        Set objFile = objFSO.CreateTextFile(strPath)

        objFile.Write(m_AsciiContents)

        '''For i=1 to LenB(m_BinaryContents)
        '''    objFile.Write chr(AscB(MidB(m_BinaryContents, i, 1)))
        '''Next          

        time2 = CDbl(Timer)
        WriteDebug("saving file took " & (time2-time1) & " seconds.<br />")

        objFile.Close
        Set objFile=Nothing
        Set objFSO=Nothing
    End Sub

    Private Function GetExtension(strPath)
        Dim arrTemp
        arrTemp = Split(strPath, ".")
        GetExtension = ""
        If UBound(arrTemp)>0 Then
            GetExtension = arrTemp(UBound(arrTemp))
        End If
    End Function

    Private Function RSBinaryToString(xBinary)
        'Antonin Foller, http://www.motobit.com
        'RSBinaryToString converts binary data (VT_UI1 | VT_ARRAY Or MultiByte string)
        'to a string (BSTR) using ADO recordset

        Dim Binary
        'MultiByte data must be converted To VT_UI1 | VT_ARRAY first.
        If vartype(xBinary)=8 Then Binary = MultiByteToBinary(xBinary) Else Binary = xBinary

        Dim RS, LBinary
        Const adLongVarChar = 201
        Set RS = CreateObject("ADODB.Recordset")
        LBinary = LenB(Binary)

        If LBinary>0 Then
            RS.Fields.Append "mBinary", adLongVarChar, LBinary
            RS.Open
            RS.AddNew
            RS("mBinary").AppendChunk Binary 
            RS.Update
            RSBinaryToString = RS("mBinary")
        Else  
            RSBinaryToString = ""
        End If
    End Function

    Function MultiByteToBinary(MultiByte)
        '© 2000 Antonin Foller, http://www.motobit.com
        ' MultiByteToBinary converts multibyte string To real binary data (VT_UI1 | VT_ARRAY)
        ' Using recordset
        Dim RS, LMultiByte, Binary
        Const adLongVarBinary = 205
        Set RS = CreateObject("ADODB.Recordset")
        LMultiByte = LenB(MultiByte)
        If LMultiByte>0 Then
            RS.Fields.Append "mBinary", adLongVarBinary, LMultiByte
            RS.Open
            RS.AddNew
            RS("mBinary").AppendChunk MultiByte & ChrB(0)
            RS.Update
            Binary = RS("mBinary").GetChunk(LMultiByte)
        End If
        MultiByteToBinary = Binary
    End Function

    Private Function WriteDebug(msg)
        If SU_DEBUG_MODE Then
            Response.Write(msg)
            Response.Flush
        End If
    End Function

    Private Function BinaryToAscii(strBinary)
        Dim i, result
        result = ""
        For i=1 to LenB(strBinary)
            result = result & chr(AscB(MidB(strBinary, i, 1))) 
        Next
        BinaryToAscii = result
    End Function

    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::                                                             :::
    ':::  This routine will attempt to identify any filespec passed  :::
    ':::  as a graphic file (regardless of the extension). This will :::
    ':::  work with BMP, GIF, JPG and PNG files.                     :::
    ':::                                                             :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::          Based on ideas presented by David Crowell          :::
    ':::                   (credit where due)                        :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    '::: blah blah blah blah blah blah blah blah blah blah blah blah :::
    '::: blah blah blah blah blah blah blah blah blah blah blah blah :::
    '::: blah blah     Copyright *c* MM,  Mike Shaffer     blah blah :::
    '::: bh blah      ALL RIGHTS RESERVED WORLDWIDE      blah blah :::
    '::: blah blah  Permission is granted to use this code blah blah :::
    '::: blah blah   in your projects, as long as this     blah blah :::
    '::: blah blah      copyright notice is included       blah blah :::
    '::: blah blah blah blah blah blah blah blah blah blah blah blah :::
    '::: blah blah blah blah blah blah blah blah blah blah blah blah :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::                                                             :::
    ':::  This function gets a specified number of bytes from any    :::
    ':::  file, starting at the offset (base 1)                      :::
    ':::                                                             :::
    ':::  Passed:                                                    :::
    ':::       flnm        => Filespec of file to read               :::
    ':::       offset      => Offset at which to start reading       :::
    ':::       bytes       => How many bytes to read                 :::
    ':::                                                             :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    Private Function GetBytes(flnm, offset, bytes)
        Dim startPos
        If offset=0 Then
            startPos = 1
        Else  
            startPos = offset
        End If
        if bytes = -1 then        ' Get All!
            GetBytes = flnm
        else
            GetBytes = Mid(flnm, startPos, bytes)
        end if
'        Dim objFSO
'        Dim objFTemp
'        Dim objTextStream
'        Dim lngSize
'        
'        Set objFSO = CreateObject("Scripting.FileSystemObject")
'        
'        ' First, we get the filesize
'        Set objFTemp = objFSO.GetFile(flnm)
'        lngSize = objFTemp.Size
'        set objFTemp = nothing
'        
'        fsoForReading = 1
'        Set objTextStream = objFSO.OpenTextFile(flnm, fsoForReading)
'        
'        if offset > 0 then
'            strBuff = objTextStream.Read(offset - 1)
'        end if
'        
'        if bytes = -1 then        ' Get All!
'            GetBytes = objTextStream.Read(lngSize)  'ReadAll
'        else
'            GetBytes = objTextStream.Read(bytes)
'        end if
'        
'        objTextStream.Close
'        set objTextStream = nothing
'        set objFSO = nothing
    End Function

    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::                                                             :::
    ':::  Functions to convert two bytes to a numeric value (long)   :::
    ':::  (both little-endian and big-endian)                        :::
    ':::                                                             :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    Private Function lngConvert(strTemp)
        lngConvert = clng(asc(left(strTemp, 1)) + ((asc(right(strTemp, 1)) * 256)))
    end function

    Private Function lngConvert2(strTemp)
        lngConvert2 = clng(asc(right(strTemp, 1)) + ((asc(left(strTemp, 1)) * 256)))
    end function

    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::                                                             :::
    ':::  This function does most of the real work. It will attempt  :::
    ':::  to read any file, regardless of the extension, and will    :::
    ':::  identify if it is a graphical image.                       :::
    ':::                                                             :::
    ':::  Passed:                                                    :::
    ':::       flnm        => Filespec of file to read               :::
    ':::       width       => width of image                         :::
    ':::       height      => height of image                        :::
    ':::       depth       => color depth (in number of colors)      :::
    ':::       strImageType=> type of image (e.g. GIF, BMP, etc.)    :::
    ':::                                                             :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    function gfxSpex(flnm, width, height, depth, strImageType)
        dim strPNG 
        dim strGIF
        dim strBMP
        dim strType
        dim strBuff
        dim lngSize
        dim flgFound
        dim strTarget
        dim lngPos
        dim ExitLoop
        dim lngMarkerSize

        strType = ""
        strImageType = "(unknown)"

        gfxSpex = False

        strPNG = chr(137) & chr(80) & chr(78)
        strGIF = "GIF"
        strBMP = chr(66) & chr(77)

        strType = GetBytes(flnm, 0, 3)

        if strType = strGIF then                ' is GIF
            strImageType = "GIF"
            Width = lngConvert(GetBytes(flnm, 7, 2))
            Height = lngConvert(GetBytes(flnm, 9, 2))
            Depth = 2 ^ ((asc(GetBytes(flnm, 11, 1)) and 7) + 1)
            gfxSpex = True
        elseif left(strType, 2) = strBMP then        ' is BMP
            strImageType = "BMP"
            Width = lngConvert(GetBytes(flnm, 19, 2))
            Height = lngConvert(GetBytes(flnm, 23, 2))
            Depth = 2 ^ (asc(GetBytes(flnm, 29, 1)))
            gfxSpex = True
        elseif strType = strPNG then            ' Is PNG
            strImageType = "PNG"
            Width = lngConvert2(GetBytes(flnm, 19, 2))
            Height = lngConvert2(GetBytes(flnm, 23, 2))
            Depth = getBytes(flnm, 25, 2)
            select case asc(right(Depth,1))
                case 0
                    Depth = 2 ^ (asc(left(Depth, 1)))
                    gfxSpex = True
                case 2
                    Depth = 2 ^ (asc(left(Depth, 1)) * 3)
                    gfxSpex = True
                case 3
                    Depth = 2 ^ (asc(left(Depth, 1)))  '8
                    gfxSpex = True
                case 4
                    Depth = 2 ^ (asc(left(Depth, 1)) * 2)
                    gfxSpex = True
                case 6
                    Depth = 2 ^ (asc(left(Depth, 1)) * 4)
                    gfxSpex = True
                case else
                    Depth = -1
            end select
        else
            strBuff = GetBytes(flnm, 0, -1)        ' Get all bytes from file
            lngSize = len(strBuff)
            flgFound = 0

            strTarget = chr(255) & chr(216) & chr(255)
            flgFound = instr(strBuff, strTarget)

            if flgFound = 0 then
                exit function
            end if

            strImageType = "JPG"
            lngPos = flgFound + 2
            ExitLoop = false

            do while ExitLoop = False and lngPos < lngSize
                do while asc(mid(strBuff, lngPos, 1)) = 255 and lngPos < lngSize
                    lngPos = lngPos + 1
                loop

                if asc(mid(strBuff, lngPos, 1)) < 192 or asc(mid(strBuff, lngPos, 1)) > 195 then
                    lngMarkerSize = lngConvert2(mid(strBuff, lngPos + 1, 2))
                    lngPos = lngPos + lngMarkerSize  + 1
                else
                    ExitLoop = True
                end if
            loop

            if ExitLoop = False then
                Width = -1
                Height = -1
                Depth = -1
            else
                Height = lngConvert2(mid(strBuff, lngPos + 4, 2))
                Width = lngConvert2(mid(strBuff, lngPos + 6, 2))
                Depth = 2 ^ (asc(mid(strBuff, lngPos + 8, 1)) * 8)
                gfxSpex = True
            end if
        end if
    End Function
End Class
%> 
```

常数解释：

*   *MAX_UPLOAD_SIZE* - 所有上传文件的最大大小，以字节为单位。当超过该大小时，上传过程中止，全局错误设置为常量*MSG_EXCEEDED_MAX_SIZE*。

*   *MSG_NO_DATA* - 当用户没有选择要上传的任何文件时，全局错误将设置为该常量。

*   *SU_DEBUG_MODE* - 当设置为`True`脚本时，将通过 输出各种消息`Response.Write()`，对调试问题很有用。

简单用例：（完整代码）

```
<!-- #include file="ShadowUpload.asp" -->
<%
Dim objUpload
If Request("action")="1" Then
    Set objUpload=New ShadowUpload
    If objUpload.GetError<>"" Then
        Response.Write("sorry, could not upload: "&objUpload.GetError)
    Else  
        Response.Write("found "&objUpload.FileCount&" files...<br />")
        For x=0 To objUpload.FileCount-1
            Response.Write("file name: "&objUpload.File(x).FileName&"<br />")
            Response.Write("file type: "&objUpload.File(x).ContentType&"<br />")
            Response.Write("file size: "&objUpload.File(x).Size&"<br />")
            Response.Write("image width: "&objUpload.File(x).ImageWidth&"<br />")
            Response.Write("image height: "&objUpload.File(x).ImageHeight&"<br />")
            If (objUpload.File(x).ImageWidth>200) Or (objUpload.File(x).ImageHeight>200) Then
                Response.Write("image to big, not saving!")
            Else  
                Call objUpload.File(x).SaveToDisk(Server.MapPath("Uploads"), "")
                Response.Write("file saved successfully!")
            End If
            Response.Write("<hr />")
        Next
        Response.Write("thank you, "&objUpload("name"))
    End If
End If
%>
<form action="<%=Request.ServerVariables( "Script_Name" )%>?action=1" enctype="multipart/form-data" method="POST">
File1: <input type="file" name="file1" /><br />
File2: <input type="file" name="file2" /><br />
File3: <input type="file" name="file3" /><br />
Name: <input type="text" name="name" /><br />
<button type="submit">Upload</button>
</form> 
```

这演示了使用大多数脚本功能来阻止上传非图像文件，您可以使用以下内容：

```
If objUpload.File(x).ImageWidth<0 Then
    Response.Write("Not a valid image!")
Else  
    'proceed to save the file...
End If 
```

免责声明：这最初是七年前发布[在这里的，正如代码本身所记，包含不是我写的部分。](http://forums.aspfree.com/code-bank-54/pure-asp-upload-script-additional-features-94647.html)

**在安卓设备上使用 Chrome 浏览器的客户注意事项**：

1.  出于某种原因，`<button>`submit 类型的标准元素似乎无法在 Chrome for android 中正常工作。如果您收到客户对此的投诉，请尝试在表单中更改此行：

    ```
    <button type="submit">Upload</button> 
    ```

    改为：

    ```
    <input type="submit" value="Upload" /> 
    ```

2.  由于 Android 版 Chrome 应用程序中可能存在错误，当使用手机的相机应用程序拍摄新图像然后尝试提交此图像时，它可能会失败。在这种情况下，只需建议客户端使用不同的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T17:40:07.340

@ShadowWizard 的代码很好，可以在本地机器上运行，但是我在生产服务器上遇到了上传问题，然后我用更强大的上传请求解析例程重写了 Class。

该类现在可以处理更多错误，您可以使用单个 INPUT 元素上传多个文件；将此另存为新文件并将其重命名为“uploadhelper.asp”

```
<%
Const MAX_UPLOAD_SIZE        = 25000000 '25 MB
Const MSG_NO_DATA            = "Nothing to upload."
Const MSG_EXCEEDED_MAX_SIZE  = "You exceeded the maximum upload size."
Const MSG_BAD_REQUEST_METHOD = "Bad request method. Use the POST method."
Const MSG_BAD_ENCTYPE        = "Bad encoding type. Use a ""multipart/form-data"" enctype."
Const MSG_ZERO_LENGTH        = "Zero length request."

Class UploadHelper
    Private m_Request
    Private m_Files
    Private m_Error

    Public Property Get GetError
        GetError = m_Error
    End Property

    Public Property Get FileCount
        FileCount = m_Files.Count
    End Property

    Public Function File(index)
        If m_Files.Exists(index) Then
           Set File = m_Files(index)
        Else  
           Set File = Nothing
        End If
    End Function

    Public Default Property Get Item(strName)
        If m_Request.Exists(strName) Then
            Item = m_Request(strName)
        Else  
            Item = ""
        End If
    End Property

    Private Sub Class_Initialize
        Dim iBytesCount, strBinData

        'first of all, get amount of uploaded bytes:
        iBytesCount = Request.TotalBytes

        'abort if nothing there:
        If iBytesCount = 0 Then
            m_Error = MSG_NO_DATA
            Exit Sub
        End If

        'abort if exceeded maximum upload size:
        If iBytesCount > MAX_UPLOAD_SIZE Then
            m_Error = MSG_EXCEEDED_MAX_SIZE
            Exit Sub
        End If

        If Request.ServerVariables("REQUEST_METHOD") = "POST" Then 
            Dim CT, PosB, Boundary, PosE
            CT = Request.ServerVariables("HTTP_Content_Type")
            If LCase(Left(CT, 19)) = "multipart/form-data" Then
                PosB = InStr(LCase(CT), "boundary=") 
                If PosB > 0 Then Boundary = Mid(CT, PosB + 9) 
                PosB = InStr(LCase(CT), "boundary=") 
                If PosB > 0 Then 
                    PosB = InStr(Boundary, ",")
                    If PosB > 0 Then Boundary = Left(Boundary, PosB - 1)
                End If
                If iBytesCount > 0 And Boundary <> "" Then 
                    Boundary = "--" & Boundary
                    Dim Head, Binary
                    Binary = Request.BinaryRead(iBytesCount) 

                    'create private collections:
                    Set m_Request = Server.CreateObject("Scripting.Dictionary")
                    Set m_Files = Server.CreateObject("Scripting.Dictionary")

                    Call ParseRequest(Binary, Boundary)
                    Binary = Empty 
                Else
                    m_Error = MSG_ZERO_LENGTH
                    Exit Sub
                End If
            Else
                m_Error = MSG_BAD_ENCTYPE
                Exit Sub
            End If
        Else
            m_Error = MSG_BAD_REQUEST_METHOD
            Exit Sub
        End If
    End Sub

    Private Sub Class_Terminate
        Dim fileName
        If IsObject(m_Request) Then
            m_Request.RemoveAll
            Set m_Request = Nothing
        End If
        If IsObject(m_Files) Then
            For Each fileName In m_Files.Keys
                Set m_Files(fileName)=Nothing
            Next
            m_Files.RemoveAll
            Set m_Files = Nothing
        End If
    End Sub

    Private Sub ParseRequest(Binary, Boundary)
        Dim PosOpenBoundary, PosCloseBoundary, PosEndOfHeader, isLastBoundary
        Boundary = StringToBinary(Boundary)
        PosOpenBoundary = InStrB(Binary, Boundary)
        PosCloseBoundary = InStrB(PosOpenBoundary + LenB(Boundary), Binary, Boundary, 0)
        Dim HeaderContent, FieldContent, bFieldContent
        Dim Content_Disposition, FormFieldName, SourceFileName, Content_Type
        Dim TwoCharsAfterEndBoundary, n : n = 0
        Do While (PosOpenBoundary > 0 And PosCloseBoundary > 0 And Not isLastBoundary)
            PosEndOfHeader = InStrB(PosOpenBoundary + Len(Boundary), Binary, StringToBinary(vbCrLf + vbCrLf))
            HeaderContent = MidB(Binary, PosOpenBoundary + LenB(Boundary) + 2, PosEndOfHeader - PosOpenBoundary - LenB(Boundary) - 2)
            bFieldContent = MidB(Binary, (PosEndOfHeader + 4), PosCloseBoundary - (PosEndOfHeader + 4) - 2)
            GetHeadFields BinaryToString(HeaderContent), Content_Disposition, FormFieldName, SourceFileName, Content_Type
            Set objFileData = New FileData
            objFileData.FileName = SourceFileName
            objFileData.ContentType = Content_Type
            objFileData.Contents = bFieldContent
            objFileData.FormFieldName = FormFieldName
            objFileData.ContentDisposition = Content_Disposition
            Set m_Files(n) = objFileData
            Set objFileData = Nothing
            TwoCharsAfterEndBoundary = BinaryToString(MidB(Binary, PosCloseBoundary + LenB(Boundary), 2))
            isLastBoundary = TwoCharsAfterEndBoundary = "--"
            If Not isLastBoundary Then 
                PosOpenBoundary = PosCloseBoundary
                PosCloseBoundary = InStrB(PosOpenBoundary + LenB(Boundary), Binary, Boundary)
            End If
            n = n + 1
        Loop
    End Sub

    Private Function GetHeadFields(ByVal Head, Content_Disposition, Name, FileName, Content_Type)
        Content_Disposition = LTrim(SeparateField(Head, "content-disposition:", ";"))
        Name = (SeparateField(Head, "name=", ";")) 
        If Left(Name, 1) = """" Then Name = Mid(Name, 2, Len(Name) - 2)
        FileName = (SeparateField(Head, "filename=", ";")) 
        If Left(FileName, 1) = """" Then FileName = Mid(FileName, 2, Len(FileName) - 2)
        Content_Type = LTrim(SeparateField(Head, "content-type:", ";"))
    End Function

    Private Function SeparateField(From, ByVal sStart, ByVal sEnd)
        Dim PosB, PosE, sFrom
        sFrom = LCase(From)
        PosB = InStr(sFrom, sStart)
        If PosB > 0 Then
            PosB = PosB + Len(sStart)
            PosE = InStr(PosB, sFrom, sEnd)
            If PosE = 0 Then PosE = InStr(PosB, sFrom, vbCrLf)
            If PosE = 0 Then PosE = Len(sFrom) + 1
            SeparateField = Mid(From, PosB, PosE - PosB)
        Else
            SeparateField = Empty
        End If
    End Function

    Private Function BinaryToString(Binary)
        dim cl1, cl2, cl3, pl1, pl2, pl3
        Dim L
        cl1 = 1
        cl2 = 1
        cl3 = 1
        L = LenB(Binary)
        Do While cl1<=L
            pl3 = pl3 & Chr(AscB(MidB(Binary,cl1,1)))
            cl1 = cl1 + 1
            cl3 = cl3 + 1
            if cl3>300 then
                pl2 = pl2 & pl3
                pl3 = ""
                cl3 = 1
                cl2 = cl2 + 1
                if cl2>200 then
                    pl1 = pl1 & pl2
                    pl2 = ""
                    cl2 = 1
                End If
            End If
        Loop
        BinaryToString = pl1 & pl2 & pl3
    End Function

    Private Function StringToBinary(String)
        Dim I, B
        For I=1 to len(String)
            B = B & ChrB(Asc(Mid(String,I,1)))
        Next
        StringToBinary = B
    End Function

End Class

Class FileData
    Private m_fileName
    Private m_contentType
    Private m_BinaryContents
    Private m_AsciiContents
    Private m_imageWidth
    Private m_imageHeight
    Private m_checkImage
    Private m_formFieldName
    Private m_contentDisposition

    Public Property Get FormFieldName
        FormFieldName = m_formFieldName
    End Property

    Public Property Let FormFieldName(sFieldName)
        m_formFieldName = sFieldName
    End Property

    Public Property Get ContentDisposition
        ContentDisposition = m_contentDisposition
    End Property

    Public Property Let ContentDisposition(sContentDisposition)
        m_contentDisposition = sContentDisposition
    End Property

    Public Property Get FileName
        FileName = m_fileName
    End Property

    Public Property Get ContentType
        ContentType = m_contentType
    End Property

    Public Property Get ImageWidth
        If m_checkImage=False Then Call CheckImageDimensions
        ImageWidth = m_imageWidth
    End Property

    Public Property Get ImageHeight
        If m_checkImage=False Then Call CheckImageDimensions
        ImageHeight = m_imageHeight
    End Property

    Public Property Let FileName(ByVal strName)
        strName = Replace(strName, "/", "\")
        Dim arrTemp : arrTemp = Split(strName, "\")
        m_fileName = arrTemp(UBound(arrTemp))
    End Property

    Public Property Let CheckImage(blnCheck)
        m_checkImage = blnCheck
    End Property

    Public Property Let ContentType(strType)
        m_contentType = strType
    End Property

    Public Property Let Contents(strData)
        m_BinaryContents = strData
        m_AsciiContents = RSBinaryToString(m_BinaryContents)
    End Property

    Public Property Get Size
        Size = LenB(m_BinaryContents)
    End Property

    Private Sub CheckImageDimensions
        Dim width, height, colors
        Dim strType

        '''If gfxSpex(BinaryToAscii(m_BinaryContents), width, height, colors, strType) = true then
        If gfxSpex(m_AsciiContents, width, height, colors, strType) = true then
            m_imageWidth = width
            m_imageHeight = height
        End If
        m_checkImage = True
    End Sub

    Private Sub Class_Initialize
        m_imageWidth = -1
        m_imageHeight = -1
        m_checkImage = False
    End Sub

    Public Sub SaveToDisk(strFolderPath, ByRef strNewFileName)
        Dim strPath, objFSO, objFile
        Dim i, time1, time2
        Dim objStream, strExtension

        strPath = strFolderPath&"\"
        If Len(strNewFileName)=0 Then
            strPath = strPath & m_fileName
        Else  
            strExtension = GetExtension(strNewFileName)
            If Len(strExtension)=0 Then
                strNewFileName = strNewFileName & "." & GetExtension(m_fileName)
            End If
            strPath = strPath & strNewFileName
        End If

        time1 = CDbl(Timer)

        Set objFSO = Server.CreateObject("Scripting.FileSystemObject")
        Set objFile = objFSO.CreateTextFile(strPath)

        objFile.Write(m_AsciiContents)

        '''For i=1 to LenB(m_BinaryContents)
        '''    objFile.Write chr(AscB(MidB(m_BinaryContents, i, 1)))
        '''Next          

        time2 = CDbl(Timer)

        objFile.Close
        Set objFile=Nothing
        Set objFSO=Nothing
    End Sub

    Private Function GetExtension(strPath)
        Dim arrTemp
        arrTemp = Split(strPath, ".")
        GetExtension = ""
        If UBound(arrTemp)>0 Then
            GetExtension = arrTemp(UBound(arrTemp))
        End If
    End Function

    Private Function RSBinaryToString(xBinary)
        'Antonin Foller, http://www.motobit.com
        'RSBinaryToString converts binary data (VT_UI1 | VT_ARRAY Or MultiByte string)
        'to a string (BSTR) using ADO recordset

        Dim Binary
        'MultiByte data must be converted To VT_UI1 | VT_ARRAY first.
        If vartype(xBinary)=8 Then Binary = MultiByteToBinary(xBinary) Else Binary = xBinary

        Dim RS, LBinary
        Const adLongVarChar = 201
        Set RS = CreateObject("ADODB.Recordset")
        LBinary = LenB(Binary)

        If LBinary>0 Then
            RS.Fields.Append "mBinary", adLongVarChar, LBinary
            RS.Open
            RS.AddNew
            RS("mBinary").AppendChunk Binary 
            RS.Update
            RSBinaryToString = RS("mBinary")
        Else  
            RSBinaryToString = ""
        End If
    End Function

    Function MultiByteToBinary(MultiByte)
        '© 2000 Antonin Foller, http://www.motobit.com
        ' MultiByteToBinary converts multibyte string To real binary data (VT_UI1 | VT_ARRAY)
        ' Using recordset
        Dim RS, LMultiByte, Binary
        Const adLongVarBinary = 205
        Set RS = CreateObject("ADODB.Recordset")
        LMultiByte = LenB(MultiByte)
        If LMultiByte>0 Then
            RS.Fields.Append "mBinary", adLongVarBinary, LMultiByte
            RS.Open
            RS.AddNew
            RS("mBinary").AppendChunk MultiByte & ChrB(0)
            RS.Update
            Binary = RS("mBinary").GetChunk(LMultiByte)
        End If
        MultiByteToBinary = Binary
    End Function

    Private Function BinaryToAscii(strBinary)
        Dim i, result
        result = ""
        For i=1 to LenB(strBinary)
            result = result & chr(AscB(MidB(strBinary, i, 1))) 
        Next
        BinaryToAscii = result
    End Function

    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::                                                             :::
    ':::  This routine will attempt to identify any filespec passed  :::
    ':::  as a graphic file (regardless of the extension). This will :::
    ':::  work with BMP, GIF, JPG and PNG files.                     :::
    ':::                                                             :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::          Based on ideas presented by David Crowell          :::
    ':::                   (credit where due)                        :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    '::: blah blah blah blah blah blah blah blah blah blah blah blah :::
    '::: blah blah blah blah blah blah blah blah blah blah blah blah :::
    '::: blah blah     Copyright *c* MM,  Mike Shaffer     blah blah :::
    '::: bh blah      ALL RIGHTS RESERVED WORLDWIDE      blah blah :::
    '::: blah blah  Permission is granted to use this code blah blah :::
    '::: blah blah   in your projects, as long as this     blah blah :::
    '::: blah blah      copyright notice is included       blah blah :::
    '::: blah blah blah blah blah blah blah blah blah blah blah blah :::
    '::: blah blah blah blah blah blah blah blah blah blah blah blah :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::                                                             :::
    ':::  This function gets a specified number of bytes from any    :::
    ':::  file, starting at the offset (base 1)                      :::
    ':::                                                             :::
    ':::  Passed:                                                    :::
    ':::       flnm        => Filespec of file to read               :::
    ':::       offset      => Offset at which to start reading       :::
    ':::       bytes       => How many bytes to read                 :::
    ':::                                                             :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    Private Function GetBytes(flnm, offset, bytes)
        Dim startPos
        If offset=0 Then
            startPos = 1
        Else  
            startPos = offset
        End If
        if bytes = -1 then        ' Get All!
            GetBytes = flnm
        else
            GetBytes = Mid(flnm, startPos, bytes)
        end if
'        Dim objFSO
'        Dim objFTemp
'        Dim objTextStream
'        Dim lngSize
'        
'        Set objFSO = CreateObject("Scripting.FileSystemObject")
'        
'        ' First, we get the filesize
'        Set objFTemp = objFSO.GetFile(flnm)
'        lngSize = objFTemp.Size
'        set objFTemp = nothing
'        
'        fsoForReading = 1
'        Set objTextStream = objFSO.OpenTextFile(flnm, fsoForReading)
'        
'        if offset > 0 then
'            strBuff = objTextStream.Read(offset - 1)
'        end if
'        
'        if bytes = -1 then        ' Get All!
'            GetBytes = objTextStream.Read(lngSize)  'ReadAll
'        else
'            GetBytes = objTextStream.Read(bytes)
'        end if
'        
'        objTextStream.Close
'        set objTextStream = nothing
'        set objFSO = nothing
    End Function

    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::                                                             :::
    ':::  Functions to convert two bytes to a numeric value (long)   :::
    ':::  (both little-endian and big-endian)                        :::
    ':::                                                             :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    Private Function lngConvert(strTemp)
        lngConvert = clng(asc(left(strTemp, 1)) + ((asc(right(strTemp, 1)) * 256)))
    end function

    Private Function lngConvert2(strTemp)
        lngConvert2 = clng(asc(right(strTemp, 1)) + ((asc(left(strTemp, 1)) * 256)))
    end function

    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    ':::                                                             :::
    ':::  This function does most of the real work. It will attempt  :::
    ':::  to read any file, regardless of the extension, and will    :::
    ':::  identify if it is a graphical image.                       :::
    ':::                                                             :::
    ':::  Passed:                                                    :::
    ':::       flnm        => Filespec of file to read               :::
    ':::       width       => width of image                         :::
    ':::       height      => height of image                        :::
    ':::       depth       => color depth (in number of colors)      :::
    ':::       strImageType=> type of image (e.g. GIF, BMP, etc.)    :::
    ':::                                                             :::
    ':::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
    function gfxSpex(flnm, width, height, depth, strImageType)
        dim strPNG 
        dim strGIF
        dim strBMP
        dim strType
        dim strBuff
        dim lngSize
        dim flgFound
        dim strTarget
        dim lngPos
        dim ExitLoop
        dim lngMarkerSize

        strType = ""
        strImageType = "(unknown)"

        gfxSpex = False

        strPNG = chr(137) & chr(80) & chr(78)
        strGIF = "GIF"
        strBMP = chr(66) & chr(77)

        strType = GetBytes(flnm, 0, 3)

        if strType = strGIF then                ' is GIF
            strImageType = "GIF"
            Width = lngConvert(GetBytes(flnm, 7, 2))
            Height = lngConvert(GetBytes(flnm, 9, 2))
            Depth = 2 ^ ((asc(GetBytes(flnm, 11, 1)) and 7) + 1)
            gfxSpex = True
        elseif left(strType, 2) = strBMP then        ' is BMP
            strImageType = "BMP"
            Width = lngConvert(GetBytes(flnm, 19, 2))
            Height = lngConvert(GetBytes(flnm, 23, 2))
            Depth = 2 ^ (asc(GetBytes(flnm, 29, 1)))
            gfxSpex = True
        elseif strType = strPNG then            ' Is PNG
            strImageType = "PNG"
            Width = lngConvert2(GetBytes(flnm, 19, 2))
            Height = lngConvert2(GetBytes(flnm, 23, 2))
            Depth = getBytes(flnm, 25, 2)
            select case asc(right(Depth,1))
                case 0
                    Depth = 2 ^ (asc(left(Depth, 1)))
                    gfxSpex = True
                case 2
                    Depth = 2 ^ (asc(left(Depth, 1)) * 3)
                    gfxSpex = True
                case 3
                    Depth = 2 ^ (asc(left(Depth, 1)))  '8
                    gfxSpex = True
                case 4
                    Depth = 2 ^ (asc(left(Depth, 1)) * 2)
                    gfxSpex = True
                case 6
                    Depth = 2 ^ (asc(left(Depth, 1)) * 4)
                    gfxSpex = True
                case else
                    Depth = -1
            end select
        else
            strBuff = GetBytes(flnm, 0, -1)        ' Get all bytes from file
            lngSize = len(strBuff)
            flgFound = 0

            strTarget = chr(255) & chr(216) & chr(255)
            flgFound = instr(strBuff, strTarget)

            if flgFound = 0 then
                exit function
            end if

            strImageType = "JPG"
            lngPos = flgFound + 2
            ExitLoop = false

            do while ExitLoop = False and lngPos < lngSize
                do while asc(mid(strBuff, lngPos, 1)) = 255 and lngPos < lngSize
                    lngPos = lngPos + 1
                loop

                if asc(mid(strBuff, lngPos, 1)) < 192 or asc(mid(strBuff, lngPos, 1)) > 195 then
                    lngMarkerSize = lngConvert2(mid(strBuff, lngPos + 1, 2))
                    lngPos = lngPos + lngMarkerSize  + 1
                else
                    ExitLoop = True
                end if
            loop

            if ExitLoop = False then
                Width = -1
                Height = -1
                Depth = -1
            else
                Height = lngConvert2(mid(strBuff, lngPos + 4, 2))
                Width = lngConvert2(mid(strBuff, lngPos + 6, 2))
                Depth = 2 ^ (asc(mid(strBuff, lngPos + 8, 1)) * 8)
                gfxSpex = True
            end if
        end if
    End Function
End Class
%> 
```

用法：使用以下代码创建一个新的 *.asp 文件来上传您的文件。

```
<!-- #include file="uploadhelper.asp" -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
  </head>
  <body>
    <form action="<%=Request.ServerVariables("SCRIPT_NAME")%>?cmd=upload" method="POST" enctype="multipart/form-data">
      File: <input type="file" name="files[]" multiple>
      <input type="submit" value="Upload">
    </form> 
<%
If Request("cmd")="upload" Then
    Dim objUpload : Set objUpload = New UploadHelper
    If objUpload.GetError <> "" Then
        Response.Write("Warning: "&objUpload.GetError)
    Else  
        Response.Write("found "&objUpload.FileCount&" files...<br />")
        Dim x : For x = 0 To objUpload.FileCount - 1
            Response.Write("form field name: "&objUpload.File(x).FormFieldName&"<br />")
            Response.Write("content disposition: "&objUpload.File(x).ContentDisposition&"<br />")
            Response.Write("file name: "&objUpload.File(x).FileName&"<br />")
            Response.Write("file type: "&objUpload.File(x).ContentType&"<br />")
            Response.Write("file size: "&objUpload.File(x).Size&"<br />")
            Response.Write("image width: "&objUpload.File(x).ImageWidth&"<br />")
            Response.Write("image height: "&objUpload.File(x).ImageHeight&"<br />")
            If (objUpload.File(x).ImageWidth>1024) Or (objUpload.File(x).ImageHeight>1024) Then
                Response.Write("the image is too big, file not saved!")
            Else
                Call objUpload.File(x).SaveToDisk(Server.MapPath("/public"), "")
                Response.Write("file saved successfully!")
            End If
            Response.Write("<hr />")
        Next            
    End If
End If
%>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-28T17:20:33.657

作为 PPS，问题可能比您想象的更基本。IIS 对 BinaryRead() 函数调用的限制为 200K。有人在尝试实施此解决方案时遇到此问题吗？

为什么初始文档中没有提到 BinaryRead() 限制？我已经为此苦苦挣扎了一个多小时。

StackOverflow 上的这个链接解释了它：[Request.BinaryRead(Request.TotalBytes) throws error for large files](https://stackoverflow.com/questions/4209227/request-binaryreadrequest-totalbytes-throws-error-for-large-files)

# jquery - 如何使用 twitter bootstrap 从 ajax 加载文本框中的数据？

> ID：15874743
> 
> 赞同：0
> 
> 时间：2013-04-08T08:41:10.847
> 
> 标签：jquery, twitter-bootstrap, bootstrap-typeahead

我尝试使用 bootstrap typeahead 函数在文本框中加载简单的 ajax 返回值。如果我通过警报检查它，它会返回数据，但是当我在文本框中输入时，什么也没有。我尝试在`source:['albama','utah']`没有 ajax 的情况下使用直接数据，它工作正常。我已经包含了所有相关文件。一世

```
<input type ="text" id ="subjects" data-provide="typeahead" />

<script>
$(document).ready(function() {

$('#subjects').typeahead

                ({
                        source: $.ajax({

                                          url: "./test/test.php",
                                           type: "POST",
                                          data: "search=" + $('#subjects').attr('value'),
                                        success: function(data)
                                        {

                                var subjects = ['Albamsa', 'Washington', 'New York', 'Arlington', 'New Jersey'];                                          return subjects;

                                        }
                                })

                });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:51:25.050

尝试这样的事情

```
$('#subjects').typeahead({

    source: function (query, process) {
        return $.getJSON(
            './test/test.php',
            { query: query },
            function (data) {
                return process(data);
            });
    }

}); 
```

还可以`json_encode`在脚本中使用函数来获取返回值

# iphone - 如何以编程方式获取 iPhone 4S 中的 IMEI？

> ID：15874744
> 
> 赞同：0
> 
> 时间：2013-04-08T08:41:12.117
> 
> 标签：iphone, ios, objective-c

我之前在 SO 和 Google 中搜索过这个问题。

我知道 Erica 提供了一个“解决方案”，但是当我在我的 iPhone 4S 中尝试它时，它只是返回空字符串。

```
NSString* imei = [[UIDevice currentDevice] imei]; 
```

这条线有什么问题吗？我也试过这条线，它成功了！

```
NSString* imei = [[UIDevice currentDevice] serialnumber]; 
```

类似问题： [问题 1](https://stackoverflow.com/questions/8037934/how-to-get-imei-on-iphone-4s) [问题 2](https://stackoverflow.com/questions/8428207/empty-imei-number-on-iphone-4s?rq=1)

# java - 对 "W oR-d".replaceAll("word", "replacement") 使用正则表达式

> ID：15874746
> 
> 赞同：-2
> 
> 时间：2013-04-08T08:41:14.077
> 
> 标签：java, regex

我的目标是进行审查。目前 atm 我使用 message.replaceAll("(?i)word", "replacement") 但这只会捕获未拆分的单词。

要绕过这个人们只需在被审查的词之间添加一个不同的字符。

所以我想让“任何人都想参加 YOLO”变成“任何人都想参加派对”，而只是在寻找“yolo”。保留“。” 那里会有奖金。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:45:59.800

**怎么样：（**用“替换”替换“单词”）

```
msg.replaceAll("(?i)([^A-Za-z])w[^A-Za-z]?o[^A-Za-z]?r[^A-Za-z]?d([^A-Za-z])",
               "$1replacement$2") ); 
```

`[^A-Za-z]`is not a letter
`[^A-Za-z]?`不是字母（可选）
`$1`是括号中的第一件事（first `([^A-Za-z])`）
`$2`是括号中的第一件事（last `([^A-Za-z])`）

**另一种方法是环顾四周：**

```
msg.replaceAll("(?i)(?<=[^A-Za-z])w[^A-Za-z]?o[^A-Za-z]?r[^A-Za-z]?d(?=[^A-Za-z])",
               "replacement") ); 
```

给定一个单词，自动生成上述内容并不难。

现在它已发布在互联网上，每个人都可以看到它并更改他们的垃圾邮件以不被上述内容接收。

[参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

**编辑：**我删除了`\\b`（单词边界），因为 1word2 将被跳过。

# css - CSS 自己改变

> ID：15874747
> 
> 赞同：2
> 
> 时间：2013-04-08T08:41:20.110
> 
> 标签：css, visual-studio-2008

我在一个 ASP.NET 项目中的一个 Web 表单中使用了一个 CSS 样式表。

我在**Visual Studio 2008中工作**

很多时候，当我对其进行一些更改时，它会更改我的一个 CSS 类，从而导致一些难看的边框。

例如：我进行了更改，保存样式表，继续在其他页面上工作，然后我注意到需要再次保存样式表。我必须回到样式表，按*撤消*，然后再次保存。

我很好奇有什么变化，所以我复制并比较了撤消前后的文本，这是什么变化：

![在此处输入图像描述](https://i.stack.imgur.com/530nY.png)

**编辑：**现在，当我`.css`在解决方案资源管理器中双击打开文件时，它立即更改了我的 css 并需要保存。非常烦人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:19:50.467

接下来的不是我的答案，但这是我能找到的最好的东西，现在
猜猜我找到了吗？是的，就在 StackOverFlow 这里是链接：[Visual Studio（2012 及更低版本）删除 CSS 属性](https://stackoverflow.com/questions/5456244/visual-studio-deletes-css-properties) 我真的希望它有所帮助

““过滤器：”样式的存在是导致所有“背景图像：”样式消失的原因除了列出的最后一个。这并不是说它删除了它不知道的东西，它只是删除了列出的最后一个“背景图像”样式之外的所有内容。必须是微软（有意）制作过滤器和 MS 特定背景图像的方式风格很好地结合在一起，但是他们没有很好地编码。绝对是 MS VS 缺陷。重现，

```
background-color: #EBEBEB; /* Fallback background color for non supported browsers */  
background-image: -webkit-gradient(linear, left top, right top, from(#FFFFFF), to(#DAD6E7));  
background-image: -webkit-linear-gradient(left, #FFFFFF, #DAD6E7);  
background-image: -moz-linear-gradient(left, #FFFFFF, #DAD6E7);  
background-image: -ms-linear-gradient(left, #FFFFFF, #DAD6E7);  
background-image: -o-linear-gradient(left, #FFFFFF, #DAD6E7);  
background-image: linear-gradient(left, #FFFFFF, #DAD6E7);  
filter: progid:DXImageTransform.Microsoft.gradient(startCol 
```

orStr='#FFFFFF', EndColorStr='#DAD6E7', gradientType='1'); /* IE6 - IE9 */ 然后选择“构建样式...”。然后单击“确定”而不进行任何更改，并观察它删除除了最后一个背景图像之外的所有内容。尝试更改“背景图像样式”的顺序，然后将 webkit 放在最后，然后自己查看。

您会注意到，如果您删除“过滤器：”样式，问题就会消失，但是我们需要它（对于此示例），因此解决方案似乎将“过滤器：”样式移到所有“背景图像：”之上线。一旦你这样做了，它就会让他们独自一人，问题就会消失。

将上面的 CSS 更改为此似乎可以缓解问题：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#FFFFFF', EndColorStr='#DAD6E7', gradientType='1'); /* IE6 - IE9 */
background-color: #EBEBEB; /* Fallback background color for non supported browsers */  
background-image: -webkit-gradient(linear, left top, right top, from(#FFFFFF), to(#DAD6E7));  
background-image: -webkit-linear-gradient(left, #FFFFFF, #DAD6E7);  
background-image: -moz-linear-gradient(left, #FFFFFF, #DAD6E7);  
background-image: -ms-linear-gradient(left, #FFFFFF, #DAD6E7);  
background-image: -o-linear-gradient(left, #FFFFFF, #DAD6E7);  
background-image: linear-gradient(left, #FFFFFF, #DAD6E7); 
```

**更新：**上面的解决方法仅适用于当您使用“构建样式...”->“修改样式”对话框时 VS 应用格式，因为我刚刚再次看到上面的修复，所以它必须来自别的东西。"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T22:12:58.680

您是否尝试过另一个 Visual Studio 版本。就像 2010 年或 2012 年一样。

这里的问题是重新排序几行代码，但这里似乎是 Visual Studio 之外的问题。尝试重新安装。如果您非常喜欢 VS 风格，可以尝试更高版本。优点：修复了许多错误并添加了许多功能。

我的建议：试试 SublimeText2 看看你是否喜欢它。我喜欢它，它比 VS 快得多。试试看。值得。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T20:02:55.763

我不知道你的环境，所以我不能说是否有其他东西正在改变你的 CSS。如果我是你，我会尝试用另一个编辑器打开文件，也许两个，只是为了找出责任是否在 Virtual Studio 2008 上。

如果事实证明这*是*Virtual Studio 的错*，并且*您没有最终*需要*坚持使用它，我会推荐[Sublime Text](http://www.sublimetext.com/)。它非常强大而且是免费的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-29T23:22:05.277

尝试这个：

从`toolbar`Options-
**>HTML Designer->CSS Styling**中，将**“Auto Style Application”**更改为**“Manual Style Application”**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T14:48:57.547

万一有人和我一样稠密。

我有同样的问题，这是因为我从 bin 文件夹中打开了 css！

# mysql - 如何从表中选择字段 ApprovedBy 和 Time？

> ID：15874749
> 
> 赞同：0
> 
> 时间：2013-04-08T08:41:20.993
> 
> 标签：mysql

```
id   old   Name   SentBy    ApprovedBy     Time     Fee
1   love   love   seyi       jayjay        1:00pm   200
2   love   love   seyi       smith         1:05pm   200 
```

在这张表中，有一个骗局！'SentBy' 列在下午 1 点和 1:05 发送了两个请求，并由 jay 和 smith 在 'ApprovedBy' 列上以相同的 200 元“费用”批准。我如何确定谁真正批准了请求以及发送了多少次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:42:57.477

```
SELECT ApprovedBy, Time FROM <table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:50:01.713

只需使用一个简单的选择查询

```
Select ApprovedBy,Time From YourTablename 
```

# node.js - 使用 nodejs/mongoose 部分更新子文档

> ID：15874750
> 
> 赞同：17
> 
> 时间：2013-04-08T08:41:21.737
> 
> 标签：node.js, mongodb, mongoose

是否可以使用 Mongoose 一次性在（子）文档上设置多个属性？我正在尝试做的一个例子：

假设我有这个架构：

```
var subSchema = new Schema({
    someField: String,
    someOtherField: String
});

var parentSchema = new Schema({
    fieldOne: String,
    subDocs: [subSchema]
}) 
```

然后我想做：

```
exports.updateMyDocument = function(req, res) {
    var parentDoc = req.parentDoc; // The parent document. Set by parameter resolver.
    var document = req.myDoc; // Sub document of parent. Set by parameter resolver.
    var partialUpdate = req.body; // updated fields sent as json and parsed by body parser
    // I know that the statement below doesn't work, it's just an example of what I would like to do.
    // Updating only the fields supplied in "partialUpdate" on the document
    document.update(partialUpdate); 
    parentDoc.save(function(err) {
        if(err) {
            res.send(500);
            return;
        }
        res.send(204);
    }); 
}; 
```

通常，我可以使用运算符来实现这一点`$set`，但我的问题是，`document`在这个例子中是`parentDoc`. 所以当我试图做

```
Parent.update({_id: parentDoc._id, "subDocs._id": document._id}, 
    {$set: {"subDocs.$" : partialUpdate}}, 
    function(err, numAffected) {}); 
```

它替换了由 标识的子文档实例`subDocs._id`。目前我已经通过手动设置字段来“解决”它，但我希望有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-08T14:03:34.560

`$set`基于 的字段以编程方式构建对象，`partialUpdate`以使用点表示法仅更新这些字段：

```
var set = {};
for (var field in partialUpdate) {
  set['subDocs.$.' + field] = partialUpdate[field];
}
Parent.update({_id: parentDoc._id, "subDocs._id": document._id}, 
    {$set: set}, 
    function(err, numAffected) {}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-20T14:55:16.040

我在 REST 应用程序中做了不同的事情。

首先，我有这条路线：

```
router.put('/:id/:resource/:resourceId', function(req, res, next) {
    // this method is only for Array of resources.
    updateSet(req.params.id, req.params.resource, req, res, next);
}); 
```

和`updateSet()`方法

```
function updateSet(id, resource, req, res, next) {
    var data = req.body;
    var resourceId = req.params.resourceId;

    Collection.findById(id, function(err, collection) {
        if (err) {
            rest.response(req, res, err);
        } else {
            var subdoc = collection[resource].id(resourceId);

            // set the data for each key
            _.each(data, function(d, k) {
              subdoc[k] = d;
            });

            collection.save(function (err, docs) {
              rest.response(req, res, err, docs);
            });
        }
    });
} 
```

精彩的部分是 mongoose 将验证您是否为此子文档`data`定义了。`Schema`此代码对文档的任何数组资源都有效。为简单起见，我没有显示所有数据，但这是检查这种情况并正确处理响应错误的好习惯。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-19T00:00:08.030

您可以分配或扩展嵌入文档。

```
 Doc.findOne({ _id: docId })
    .then(function (doc) {
      if (null === doc) {
        throw new Error('Document not found');
      }

      return doc.embeded.id(ObjectId(embeddedId));
    })
    .then(function(embeddedDoc) {
      if (null === embeddedDoc) {
        throw new Error('Embedded document not found');
      }

      Object.assign(embeddedDoc, updateData));
      return embeddedDoc.parent().save();
    })
    .catch(function (err) {
      //Do something
    }); 
```

在这种情况下，您应该确定 _id 没有分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-06T17:00:36.567

我在不使用 $set 对象的情况下以稍微不同的方式处理了这个问题。我的方法与 Guilherme 的方法类似，但一个不同之处在于我将我的方法包装到了静态功能中，以便在整个应用程序中更容易重用。下面的例子。

在 CollectionSchema.js 服务器模型中。

```
collectionSchema.statics.decrementsubdocScoreById = function decreasesubdoc (collectionId, subdocId, callback) {
  this.findById(collectionId, function(err, collection) {
    if (err) console.log("error finding collection");
    else {
      var subdoc = collection.subdocs.filter(function (subdoc) {
        return subdoc._id.equals(subdocId);
      })[0];

      subdoc.score -= 1;

      collection.save(callback);
    }
  });
}; 
```

在服务器控制器中

```
Collection.decrementsubdocScoreById(collectionId, subdocId, function  (err, data) {
  handleError(err);
  doStuffWith(data);
}); 
```

# c# - 难以将大文件读入字节数组

> ID：15874755
> 
> 赞同：0
> 
> 时间：2013-04-08T08:41:37.237
> 
> 标签：c#, filestream, large-files

我有一个非常大的 BMP 文件，我必须一次全部读取，因为在将其写入临时文件时需要反转字节。此 BMP 为 1.28GB，我收到“内存不足”错误。我无法完全读取它（使用 ReadAllBytes）或使用缓冲区到二进制数组，因为我无法初始化该大小的数组。我也无法使用缓冲区将其读入列表（然后我可以使用 Reverse()），因为中途内存不足。

所以基本上问题是，我如何**向后**读取一个非常大的文件（即，从 LastByte 开始并在 FirstByte 结束）然后将其写入磁盘？

奖励：将反转文件写入磁盘时，**不要**写入最后 54 个字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:45:34.347

您通常无法在 .NET 中处理如此大的文件，因为 CLR 应用程序和其中的集合的隐含内存限制既不适用于 32 也不适用于 64 平台。

为此，您可以使用[Memory Mapped File](http://msdn.microsoft.com/en-us/library/dd997372.aspx)直接从磁盘读取文件，而无需将其加载到内存中。一次创建的内存映射将读取指针移动到文件末尾并向后读取。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T08:45:59.730

使用`StreamReader`对象，您可以[查找](http://msdn.microsoft.com/en-us/library/system.io.stream.seek%28v=vs.100%29.aspx)（放置“光标”）到任何特定字节，因此您可以使用它来反向遍历整个文件的内容。

例子：

```
const int bufferSize = 1024;
string fileName = 'yourfile.txt';

StreamReader myStream = new StreamReader(fileName);
myStream.BaseStream.Seek(bufferSize, SeekOrigin.End);

char[] bytes = new char[bufferSize];
while(myStream.BaseStream.Position > 0)
{
    bytes.Initialize();
    myStream.BaseStream.Seek(bufferSize, SeekOrigin.Current);
    int bytesRead = myStream.Read(bytes, 0, bufferSize);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T08:45:40.680

您可以使用内存映射文件。

[http://msdn.microsoft.com/en-us/library/vstudio/dd997372%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd997372%28v=vs.100%29.aspx)

此外，您可以使用 FileStream 并通过 stream.Seek(xxx, SeekOrigin.Begin) （相对位置）或 Position 属性（绝对位置）在必要位置上定位。

# javascript - Highcharts 3.0 独立的导出按钮

> ID：15874759
> 
> 赞同：1
> 
> 时间：2013-04-08T08:41:53.743
> 
> 标签：javascript, jquery, highcharts

我刚刚将我的 Highcharts 版本更新到 3.0，但现在我看到有一个导出按钮，而不是以前存在的两个单独的按钮（下载 - 打印）。

是否可以再次制作单独的按钮而不是组合的导出按钮？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:15:03.340

没试过，但也许[这](https://github.com/highslide-software/highcharts.com/blob/master/js/modules/exporting-old-look.src.js)会有所帮助。
用他们自己的话来说，它是“一个让 Highcharts 3 回归旧貌的兼容性包。” [此外，此处](http://www.highcharts.com/docs/export-module/export-module-overview)
导出模块的帮助主题包含有关如何实现自己的按钮来调用打印和导出的链接，如果需要的话。

# apache-camel - 骆驼需要非阻塞队列 - 类似于不处理图形线程上的事件

> ID：15874764
> 
> 赞同：0
> 
> 时间：2013-04-08T08:42:26.390
> 
> 标签：apache-camel

抱歉，我回答了我自己的问题——它实际上只是 SEDA，当我看到“BlockingQueue”时，我假设 SEDA 会阻塞，直到队列被读取……这当然是无稽之谈。SEDA 完全是我所需要的。已回答问题

* * *

我遇到了一个让我很头疼的问题，我们连接到的公司为我提供了一个自定义端点，但是端点保持对提要的心跳，当它发送超过一定大小的消息时，它们需要很长时间在其阻塞和心跳丢失并且连接断开的路由上进行处理

显然，这类似于在非图形线程上处理事件以保持平稳运行。但我不确定如何在骆驼中实现这一目标。本质上，我想将结果排队并将它们放在单独的线程上。

```
from( "custom:endpoint" )
.process( MyProcesor )
.to( "some-endpoint") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:32:40.870

正如建议的那样， [camel-seda](http://camel.apache.org/seda.html)是一种执行异步/多线程处理的简单方法，请注意阻塞队列仅在内存中（如果 VM 停止，则会丢失等）。如果您需要有保证的消息传递支持，请使用[camel-jms](http://camel.apache.org/jms.html)

# xml - 什么是最好的 XML 数据库？真的比关系数据库有更好的性能吗？

> ID：15874770
> 
> 赞同：0
> 
> 时间：2013-04-08T08:42:42.553
> 
> 标签：xml, database

我与 Oracle 合作过，这个数据库有很好的选择，但不是基于 xml 的数据库，我想知道什么数据库在插入和获取 xpath 查询方面有更好的性能？

我发现[http://en.wikipedia.org/wiki/XML_database](http://en.wikipedia.org/wiki/XML_database)介绍了一些数据库，如 baseX、eXist、sedna、MarkLogic Server、MonetDB、28msec 平台、..

我认为 BaseX 和 eXist（用 java 编写的）性能不如其他用 c++ 编写的数据库，是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:02:40.483

让我们先处理最后一点：如果您认为用 Java 编写的软件一定比用 C++ 编写的软件慢，那么您就生活在黑暗时代。

至于整体问题，没有任何可靠的独立基准，即使有，它们的结果也几乎肯定与您的工作量不同。

如果性能确实是您选择一种产品而不是另一种产品的首要原因，那么您将不得不进行自己的测量。但通常现在，除非它是一个非常高压力的工作负载，否则可用性等其他因素对项目成功或失败的影响要大得多。

# php - PHP：同时打开 URL 以模拟 DOS 攻击？

> ID：15874775
> 
> 赞同：3
> 
> 时间：2013-04-08T08:42:50.897
> 
> 标签：php, curl, denial-of-service

我已经为我的服务器配置了各种反 DOS 模块（mod_qos、mod_evasive 等）。我现在要做的是运行一个简单的 PHP 脚本，它多次调用我网站上的 URL，以达到网站上的各种限制。理想情况下，能够以某种方式同时打开各种 URL 的脚本将是理想的。

这可能吗？如果没有，模拟来自一个 IP 的多个请求的最简单方法是什么？

我更喜欢在 Windows 7 中工作的工具？

更新：请记住，我希望能够查看我的服务器是否真的阻止了一些请求。我只玩了一点 AB，但到目前为止还没有显示请求被阻止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:49:50.103

我认为你应该试试这个工具，

[阿帕奇](http://httpd.apache.org/docs/2.0/programs/ab.html)

[围攻乔狗软件](http://www.joedog.org/siege-home/)

[阿帕奇 JMeter](http://jmeter.apache.org/)

Apache Bench 简单明了

你也应该试试[tsung](http://tsung.erlang-projects.org/)

[这](https://github.com/medelibero/DDoS-Tools)是 github 上的 ruby​​ 内容

但是如果您仍然想在php中模拟ddos，那么我认为在php中您需要使用socket并在循环中向您的服务器发送请求，并在不等待服务器响应的情况下断开连接，这样您就可以模拟它。像“连接 - 调度请求 - 断开连接”并尽可能多次重复此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:23:31.603

这在 Windows 下非常有用：[OpenLoad](http://openwebload.sourceforge.net)

我使用以下方法执行它：

```
openload.exe http://www.mysite.com 250 
```

然后我可以很容易地在我的 Apache 错误日志中看到结果：

```
tail -f /usr/local/apache/logs/error_log 
```

我能看见：

```
[Mon Apr 08 12:09:05 2013] [error] mod_qos(031): access denied, QS_SrvMaxConnPerIP rule: max=50, concurrent connections=59, c=XX.XXX.XX.XXX
[Mon Apr 08 12:09:05 2013] [error] mod_qos(031): access denied, QS_SrvMaxConnPerIP rule: max=50, concurrent connections=60, c=XX.XXX.XX.XXX
etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-07T08:14:59.757

最简单的模拟是在给定域的多个页面的数组上使用异步 xmlhttp 请求迭代器函数，在这些页面上，onload 事件启动另一个页面 url 调用并无限期地循环，或者循环一定次数。并且为了让它更有压力，你会并行打开同一个普通 JS + HTML 应用程序的多个实例（比如 9 个，甚至 12 个），看看是否有任何事情发生，或者在它们之后服务器会发生什么已经运行了相当长的时间，并且可能在大约一个小时的时间内达到了超过 100 万个请求。

# android - 正在添加日历活动，但未收到通知

> ID：15874784
> 
> 赞同：0
> 
> 时间：2013-04-08T08:43:20.240
> 
> 标签：android, notifications, android-calendar

我正在尝试添加日历事件。它已添加到本机日历中，但未收到通知。这是我的代码。

```
 TimeZone timeZone = TimeZone.getDefault();
        long startTime = System.currentTimeMillis()+(2*60*1000);
        long endTime = startTime + (5*60*1000);

        ContentResolver cr1 = this.getContentResolver();
        ContentValues values = new ContentValues();
        values.put(CalendarContract.Events.DTSTART, startTime);
        values.put(CalendarContract.Events.DTEND, endTime);
        values.put(CalendarContract.Events.TITLE,"ATPI");
        values.put(CalendarContract.Events.DESCRIPTION, "Calendar Event Description");
        values.put(CalendarContract.Events.CALENDAR_ID, 1);
        values.put(CalendarContract.Events.HAS_ALARM, true);
        values.put(CalendarContract.Events.EVENT_TIMEZONE, timeZone.getID());
        cr1.insert(CalendarContract.Events.CONTENT_URI, values); 
```

我正在使用三星 Galaxy Nexus（OS 4.2.1）测试上述代码。请帮助我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:59:25.747

您没有从您的代码中触发任何通知。

看看这个 Android 开发人员培训：[通知用户](http://developer.android.com/training/notify-user/index.html)

# c# - 在 Windows 运行时从位图创建流

> ID：15874785
> 
> 赞同：1
> 
> 时间：2013-04-08T08:43:24.747
> 
> 标签：c#, windows-8, stream, windows-runtime, windows-store-apps

我想从位图创建一个流。首先，我这样做了：

```
Stream imgStream = typeof(Main).GetTypeInfo().Assembly.GetManifestResourceStream("ApplicationBlockBase.Assets.testimage.jpg"); 
```

但现在我需要从本地图像创建一个 Stream。你有什么想法？

谢谢你的时间，问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:52:15.617

让我知道这是否有效。

```
StorageFile imageFile = await (await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFolderAsync("Assets")).GetFileAsync("testimage.jpg");
Stream imgStream = await imageFile.OpenStreamForReadAsync(); 
```

# asp.net - 播放嵌入在网站上的 youtube 时的参数无效

> ID：15874786
> 
> 赞同：1
> 
> 时间：2013-04-08T08:43:25.667
> 
> 标签：asp.net, asp.net-mvc-3, youtube, youtube-api

起初我收到此错误***“此视频包含来自 sme 的内容。它被限制在某些网站上播放”***然后在阅读这篇[文章后](https://stackoverflow.com/questions/10543238/has-youtube-iframe-embed-has-stopped-working-for-certain-videos?rq=1)，我在我的 youtube 嵌入网址中添加了几行我现在收到一个新错误，上面写着***“无效参数”***。顺便说一句，我在这里要做的是在我的网站上嵌入一个 youtube 视频。

这是我试图在我的网站上嵌入的 youtube 的原始嵌入网址。我收到错误消息*“此视频包含来自 SME 的内容。它被限制在某些网站上播放。在 Youtube 上观看”*。

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/CFqbhsvXE7M" frameborder="0" allowfullscreen></iframe> 
```

这是阅读帖子后编辑的。并得到这个错误*"Invalid Paramaters"*。

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/CFqbhsvXE7M?playlist=." frameborder="0" allowfullscreen></iframe> 
```

我做了一些研究，它说**YouTube 确实在过去几天改变了他们的 API，并且从他们的 HTML5 视频播放器中闪回后备失败**。我没有找到一个明确的解释如何解决它。使用原始嵌入网址，youtube 在我的本地主机中播放良好。在我将它部署到服务器后，我现在收到了这些错误。这与我正在使用的服务器的域有关吗？

**问题：** 我怎么可能解决这个问题？T_T

**其他信息：**我正在使用 asp.net MVC3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:54:54.567

不是使用`embed`use`watch`和 add in 一些属性，而是一直有效：

```
<iframe width="420" height="315" 
   src="http://www.youtube.com/watch?v=CFqbhsvXE7M" 
   frameborder="0" 
   webkitAllowFullScreen 
   mozallowfullscreen 
   allowFullScreen></iframe> 
```

# matlab - 比较多元分布

> ID：15874787
> 
> 赞同：0
> 
> 时间：2013-04-08T08:43:27.980
> 
> 标签：matlab, multivariate-testing, multivariate-partition

我有一组多变量实例，我需要从这些实例中提取一个有代表性的集合；例如，如果我有 100,000 个多元实例，我想提取 1000 个代表原始分布的实例。我使用拉丁超立方抽样和随机抽样来提取两个代表集，现在我想检查这两个代表集与原始集的相关性有多大。

如果我进一步详细说明；

我有 100,000 个多变量实例（我们称之为 A）

我从“A”派生了两个有代表性的样本（每个集合将有 1000 个实例；我们称这两个集合为 B 和 C）

我想检查“B”和“C”是否保留了原始“A”的分布。

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:05:52.640

这更像是一个统计问题，但这里有一个大纲。通常你会使用卡方检验来比较分布。基本步骤如下。

1.  对每个数据集进行分箱。尝试设置垃圾箱，使每个垃圾箱中至少有 5 个或更多样本。（对所有数据集使用相同的 bin）。

2.  使用大样本“A”来确定每个 bin 中的预期样本数（称为 f_e）。（顺便说一句。请注意，任何特定 bin 的 f_e 将是该特定 bin 中样本数量的**1/100**，因为样本 A 包含 B 或 C 的数据点的 100 倍）。

3.  要测试其中一个样本（比如 B）计算总和： S = **(f_o - f_e)^2/fe**的所有 bin 的总和，其中 f_o 是 bin 中观察到的频率。

4.  这个总和是一个卡方变量，其自由度比您使用的 bin 总数小一。

5.  计算**1 - chi2cdf(S,dof)**。这是一个总和大于或大于您获得的总和 (S) 的概率，纯粹是由于随机变化（即，即使分布相同）而发生的。因此，较小的结果（接近 0）意味着分布可能不同，而较大的结果（接近 1）意味着它们不太可能有显着差异。

可能有一个库函数可以完成上述所有操作。IDK，因为我很久没有使用任何统计库了。

# android - 后按用户的 Android 应保持在同一页面中

> ID：15874798
> 
> 赞同：1
> 
> 时间：2013-04-08T08:43:47.480
> 
> 标签：android

在我的活动页面中，我有两个选项——普通屏幕和编辑模式屏幕。两个屏幕都在同一个活动中。

当用户进入活动时，将显示正常页面。当他单击按钮时，将显示编辑模式。如果正常屏幕存在，则在后按用户应返回上一个活动。但如果打开编辑模式并且用户点击后退按钮，而不是回到上一个活动，用户应该看到正常的屏幕。

我的 onbackpressed 方法是

```
if(inputSearch.getVisibility()== View.VISIBLE){     
        Intent intentList = new Intent(getApplicationContext(),listsActivity.class);
        intentList.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intentList);          
        }
        else{                   
            imgEditList.setSelected(false);
            editMode.setVisibility(View.GONE);
            inputSearch.setVisibility(View.VISIBLE);
        }       
        super.onBackPressed(); 
```

finish() 有什么用。它是关闭当前活动还是...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:45:44.020

试试这个

```
 @Override
public void onBackPressed() {
if(inputSearch.getVisibility()== View.VISIBLE){     
    Intent intentList = new Intent(getApplicationContext(),listsActivity.class);
    intentList.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intentList);          
    }
    else{                   
        imgEditList.setSelected(false);
        editMode.setVisibility(View.GONE);
        inputSearch.setVisibility(View.VISIBLE);
        return;
    }       
    super.onBackPressed();
} 
```

# spring - 春季休眠插入竞争条件

> ID：15874802
> 
> 赞同：2
> 
> 时间：2013-04-08T08:43:50.743
> 
> 标签：spring, hibernate, postgresql, transactions, race-condition

我目前遇到了 Spring Hibernate 的竞争问题（服务和 daoImpl 类上的注释事务）。这是我遇到的情况：

表：

*   设备类型：id（序列号）、名称
*   设备：id（序列号）、device_identifier、device_type_id、ip_address

注意 device_identifier 和 device_type_id 一起是唯一的

这是我在多线程进程中的一个片段：

```
 if(deviceDao.findByIdentifierAndTypeId(identifier, typeId) == null){
        Device newDevice = new Device();
        newDevice.setIdentifier(identifier);
        newDevice.setTypeId(typeId);
        deviceDao.add(newDevice);
    } 
```

所以发生的事情是，我有一个服务器通过 websockets 监听设备（这里可能不是重要的细节），服务器将首先尝试确定设备是否已经在数据库中，如果还没有找到设备记录，则创建设备记录。

现在我遇到的问题是服务器可以处理来自设备的多条消息（每个来自设备的消息创建一个线程），因此是竞争条件。

所以想象一下：

设备 A 依次发送两条消息：

```
 Sends hello message              Sends "here is my ip" message
             |                                    |
             |                                    |
             |                                    |
    does not see device in DB                     |
        tries to insert                does not see device in DB
             |                              tries to insert
          Insert completed                        |
                                Failed to insert (Unique key constraints not met) 
```

显然，当第二次插入设备时，唯一性约束会导致失败。但我在想，当第一次插入完成时，Spring 将能够将其拾取并知道当第二个线程再次尝试插入时它不需要。但是，尽管我尝试了各种传播和隔离模式，但这并没有发生。我一定错过了一些非常基本的东西，请指出我如何解决这个问题的正确方向。提前感谢您的回复。如果需要/要求，我将提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T01:02:10.920

这是设计行为。默认情况下，您只会看到已提交的行（READ COMMITTED 隔离级别）。对于外部进程，您可以将未提交的行视为*尚未出现在数据库中。*

最好的解决方案是捕获唯一的约束违规并重试（最好有延迟）。您还可以将隔离级别设置为读取未提交，但这可能会产生其他竞争条件，我不建议这样做。

# xcode - 如何找到崩溃约束？

> ID：15874806
> 
> 赞同：5
> 
> 时间：2013-04-08T08:44:06.747
> 
> 标签：xcode, constraints

有时我不断收到这样的错误 - 没有任何暗示 TextView 或 Button 的含义：

```
 Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x11d748d0 V:[UITextView:0xc1bb000(65)]>",
    "<NSLayoutConstraint:0x11d77620 V:[UIButton:0x11d71cf0(44)]>",
    "<NSLayoutConstraint:0x11d7be30 V:[UIButton:0x11d79e70(43)]>",
    "<NSLayoutConstraint:0xa1980d0 V:|-(134)-[UITextView:0xc1bb000]   (Names: '|':UIView:0xa1afba0 )>",
    "<NSLayoutConstraint:0xa199ed0 UITextView:0xc1bb000.centerY == UIButton:0x11d71cf0.centerY>",
    "<NSLayoutConstraint:0xa199e50 V:[UIButton:0x11d79e70]-(61)-[UIButton:0x11d71cf0]>",
    "<NSLayoutConstraint:0xa199cb0 V:|-(40)-[UIButton:0x11d79e70]   (Names: '|':UIView:0xa1afba0 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x11d748d0 V:[UITextView:0xc1bb000(65)]>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

有没有办法识别导致崩溃的代码中的约束？

文本：

```
 Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x11d748d0 V:[UITextView:0xc1bb000(65)]> 
```

不幸的是没有多大帮助，因为我不知道这是代码中的哪个约束

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T09:15:22.207

你是这样读的：

```
<NSLayoutConstraint:0x11d748d0 V:    [UITextView:0xc1bb000(65)]>
 ^ Constraint type  ^ Address  ^Axis ^Description in VFL
                      (of constraint) 
```

所以这是一个强制 textview 高 65 点的约束。在那里，您还有一个约束将该文本视图固定到距其父视图顶部边缘 134 点的位置：

```
<NSLayoutConstraint:0xa1980d0 V:|-(134)-[UITextView:0xc1bb000]   (Names: '|':UIView:0xa1afba0 )> 
```

以及将文本视图的 Y 中心固定到按钮的 Y 中心的约束：

```
<NSLayoutConstraint:0xa199ed0 UITextView:0xc1bb000.centerY == UIButton:0x11d71cf0.centerY> 
```

以及将按钮本身固定到特定垂直位置的约束：

```
<NSLayoutConstraint:0xa199e50 V:[UIButton:0x11d79e70]-(61)-[UIButton:0x11d71cf0]> 
```

您可能不想要所有这些约束。在这里，您有两个约束试图垂直定位文本视图（基于按钮，并基于与超级视图顶部的绝对间距）。

在您的应用程序的某个地方，您必须有一个带有文本字段和两个按钮的视图。如果您中断所有异常，您可以注销日志中给出的各种地址并找出超级视图等如果您不确定，但希望您能够从中解决问题。

有时将日志复制到文本编辑器中并用单词查找/替换地址是有帮助的，这样更容易阅读。

# mysql - 更改数据库中的所有表

> ID：15874807
> 
> 赞同：9
> 
> 时间：2013-04-08T08:44:14.780
> 
> 标签：mysql, sql

我想在我的 SQL 数据库中的**所有表上运行“Alter Table”：**

```
ALTER TABLE test ADD  CONSTRAINT [COLLUM_NAME]  DEFAULT ((0)) FOR [COLLUM_NAME] 
```

我知道如何从数据库中获取所有现有表：

```
SELECT TABLE_NAME 
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_TYPE = 'BASE TABLE' 
```

或者

```
USE DATABASE_NAME
GO 
SELECT name
FROM sys.Tables
GO 
```

但我不知道如何将这两者结合起来。

在我的数据库（50 多个表）中，所有表共有 1 行。我想为所有这些行设置一个默认值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T08:50:09.663

您可以尝试生成命令并在之后执行它。你可以这样做：

```
SELECT CONCAT("Alter Table `", TABLE_SCHEMA,"`.`", TABLE_NAME, "` this is my default value change on the column") as MySQLCMD 
FROM TABLES 
```

并执行检索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:48:54.460

如果这是一个不需要自动化的一次性过程，那么您可能会比运行以下内容并仅复制/粘贴输出做得更糟：

```
select 'alter table ' + t.name + ' add constraint ' + c.name + ' default ((0)) for ' + c.name
from    sysobjects t join syscolumns c on c.id = t.id
where   t.xtype = 'U' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:25:41.353

设置`'COLUMN NAME'`并执行，它将为设置的列添加默认约束。

```
DECLARE @sql NVARCHAR(MAX) ;
DECLARE @LINEBREAK AS VARCHAR(2)
SET @LINEBREAK = CHAR(13) + CHAR(10)      

SELECT  @sql = COALESCE(@sql + ';' + @LINEBREAK, '') + 'ALTER TABLE ' 
        + QUOTENAME([TABLES].TABLE_NAME) + ' ADD  CONSTRAINT ' + QUOTENAME([COLUMNS].COLUMN_NAME)
        + ' DEFAULT ((0)) FOR ' + QUOTENAME([COLUMNS].COLUMN_NAME)
FROM    INFORMATION_SCHEMA.TABLES [TABLES]
        INNER JOIN INFORMATION_SCHEMA.COLUMNS AS [COLUMNS] ON [TABLES].TABLE_NAME = [COLUMNS].TABLE_NAME
WHERE   TABLE_TYPE = 'BASE TABLE'
        AND [COLUMNS].[COLUMN_NAME] = 'COLUMN NAME'
PRINT @sql
EXEC sp_executesql @sql 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:53:43.757

如果你想使用`INFORMATION_SCHEMA`

```
SELECT 'ALTER TABLE ' +t.TABLE_NAME+ ' ADD  CONSTRAINT '
+c.COLUMN_NAME  +' DEFAULT ((0)) FOR '+c.COLUMN_NAME
FROM INFORMATION_SCHEMA.TABLES t
INNER JOIN INFORMATION_SCHEMA.COLUMNS c on t.TABLE_NAME=c.TABLE_NAME
WHERE TABLE_TYPE = 'BASE TABLE' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-11T16:04:25.677

我首选的方法是为此编写一个 SP。我的数据库中有一些这样的实用程序 SP，我会根据需要更改它们以更新内容。这是一个更改排序规则的示例。您可以看到，通过修改 SET @S=... 语句，您可以进行任何您喜欢的表更改。

```
DECLARE table_name VARCHAR(255);
DECLARE end_of_tables INT DEFAULT 0;
DECLARE num_tables INT DEFAULT 0;

DECLARE cur CURSOR FOR 
    SELECT t.table_name 
    FROM information_schema.tables t 
    WHERE t.table_schema = DATABASE() AND t.table_type='BASE TABLE';

DECLARE CONTINUE HANDLER FOR NOT FOUND SET end_of_tables = 1;

OPEN cur;

tables_loop: LOOP

    FETCH cur INTO table_name;

    IF end_of_tables = 1 THEN
        LEAVE tables_loop;
    END IF;

    SET num_tables = num_tables + 1;

    SET @s = CONCAT('ALTER TABLE ' , table_name , ' CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci');

    PREPARE stmt FROM @s;
    EXECUTE stmt;
END LOOP;

CLOSE cur; 
```

# fortran - 如何确定文件的字节序

> ID：15874809
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:44:20.843
> 
> 标签：fortran, endianness

我很难确定我使用的文件是小端还是大端。是否有任何 fortran 代码可以在文件上运行以确定其 Endianess？

谢谢，

普拉迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:37:09.683

您可以使用十六进制编辑器查看该文件。大多数十六进制编辑器允许您在大端和小端之间切换位的解释。您必须对期望的值有所了解。用错误的字节顺序解释，这些值可能不可信。如果文件是作为 Fortran 顺序文件编写的，通常每条记录将以指定记录长度的整数开始和结束。这也可以帮助您推断文件的字节序。

或者，正如 Rob 所说，尝试读取文件。如果它不起作用，请尝试其他字节序。

# ember.js - 如何捕捉数组是否插入到 Ember 的车把中？

> ID：15874812
> 
> 赞同：3
> 
> 时间：2013-04-08T08:44:30.467
> 
> 标签：ember.js

我希望这不是重复的问题，但我无法找到解决方案......

我有工作和用户，一个用户有很多工作：

```
JP.User = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    email: DS.attr('string'),
    jobs: DS.hasMany("JP.Job")
}); 
```

我在 user_dashboard.handlebar 中插入数据：

```
 {{#each job in jobs}}
      <li>
         {{job.shortDescription}}<br />
         {{job.startsAt}}</li>
    {{/each}} 
```

这是我的路线：

```
JP.DashboardRoute = Ember.Route.extend({
    setupController: function(controller, model) {
        controller.set('users',  JP.User.find());
 }
}); 
```

将用户的所有作业插入车把后，如何捕获事件？我尝试了不同的方法来捕捉它（`controller.jobs.isLoaded, content.isLoaded, didInsertElement`...），但它没有奏效。

我可以尝试捕捉每个工作的插入，但我认为必须有一些更好的方法来捕捉工作的插入......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:08:51.290

您想使用`afterRender`队列，请查看[Ember.CollectionView 渲染末尾的 Run jquery 以](https://stackoverflow.com/questions/13538021/run-jquery-at-the-end-of-ember-collectionview-rendering/13539379#13539379)获取重复问题

# jquery - Highchart 的 yAxis 标签的“溢出”属性未在图表重绘时更新（单击或切换图例项时调用）

> ID：15874815
> 
> 赞同：0
> 
> 时间：2013-04-08T08:44:33.287
> 
> 标签：jquery, highcharts

```
yAxis: {
            min: 0,
            title: {
                text: 'Population (millions)',
                align: 'high'
            },
            labels: {
                overflow: 'justify'
            }
        }, 
```

参考示例：http: [//jsfiddle.net/Yw36U/](http://jsfiddle.net/Yw36U/)。

理想情况下，在图例项单击上重绘图表后，yAxis 标签应该是合理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:32:09.340

您可以将 useHTML ( [http://api.highcharts.com/highcharts#xAxis.labels.useHTML](http://api.highcharts.com/highcharts#xAxis.labels.useHTML) ) 设置为 true 并为自定义标签定义 CSS 样式（使用格式化程序来定义它[http://api.highcharts.com/highcharts# xAxis.labels.formatter](http://api.highcharts.com/highcharts#xAxis.labels.formatter) )

```
 labels:{
                useHTML:true,
                width:120,
                formatter:function(){
                    return '<div class="label">' + this.value + '</div>';
                }
            }, 
```

示例：http: [//jsfiddle.net/Yw36U/1/](http://jsfiddle.net/Yw36U/1/)

# git - 在一个站点上为 magento 模块开发创建每个模块的 git repo 环境

> ID：15874816
> 
> 赞同：2
> 
> 时间：2013-04-08T08:44:33.350
> 
> 标签：git, magento, gitignore

我想在一次全新安装的 Magento 1.7 上开发多个 Magento 模块，以便可以将每个模块推送到在线存储库并单独跟踪。

我最初是按照[本教程](http://inchoo.net/ecommerce/magento/how-to-setup-git-for-magento-extension-development/)开始的，但无法让 Magento 使用符号链接检测模块。我在后端启用了“跟随符号链接”选项。由于文件权限或其他原因，我可能会在这里苦苦挣扎，但我不介意为 .gitignore “白名单”放弃这种方法。就像是

```
 *
 !app/etc/modules/My_Module.xml
 !app/etc/code/community/My/Module
 !app/etc/code/community/My/Module/* 
```

这似乎是一种更简单的方法，但是我在哪里初始化每个工作目录，因为它们都分散在`./`我需要`git init`的相同位置的许多存储库中，每个存储库都有不同的`.gitignore`文件。我实际上更喜欢符号链接选项，因为它给了我一个可以打包我的扩展的地方。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:25:55.643

该教程引用了它，但是如果您还没有尝试过，我建议您使用[modman](https://github.com/colinmollenhour/modman)作为与按照教程手动创建所有符号链接相比更少维护的选项。它会做同样的工作，并且会根据一个简单的配置文件自动为你创建符号链接，允许你在外部开发 magento 安装，从而创建一个只包含你喜欢的扩展名的存储库。

值得检查安装中文件的权限和所有权 - 请注意，符号链接本身只会拥有 777（世界读/写）的权限，但会使用它们引用的文件的权限，因此请检查您的文件的权限Web 服务器用户访问它们需要足够的符号链接。

关于使用白名单，您不能在同一位置初始化多个存储库，但如果您不介意所有扩展都在不同分支上的同一存储库中，则分支将是另一种解决方案。

在我看来，考虑您的要求，使用具有正确用户和组所有权和权限的 modman 将为您提供最佳解决方案。

# java - 在 Android 应用中使用 Gmail/Facebook 凭据注册

> ID：15874818
> 
> 赞同：3
> 
> 时间：2013-04-08T08:44:33.640
> 
> 标签：java, android, facebook, gmail

我有一个 android 应用程序，它有一个注册页面。我想分别与 Gmail 和 Facebook 集成。这样用户就不必使用新凭据注册自己。他们可以使用 Gmail 或 Facebook 登录 ID 和密码登录自己。由于我是 Android 新手。请逐步提供一些解决方案。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:58:49.317

这是将 facebook SDK 与 android 代码集成的非常简单的方法。

1.  官方facebook整合文档
2.  轻松的 Facebook 集成。

[如何将 Facebook 集成到我的 android 应用程序中？](https://stackoverflow.com/questions/15357811/how-to-integrate-facebook-in-my-android-application/15358228#15358228)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:00:42.040

我认为您想喜欢 **单**点登录 ，因为`Facebook`您必须使用 Facebook android sdk，该 sdk 可在`facebook developer`网站上用于 android 进行`Google Accoun`身份验证，您应该遵循[此](http://blog.doityourselfandroid.com/2011/04/12/oauth-android-google-apis-client-library-java/)

# ruby-on-rails - 轨道上的公共活动宝石

> ID：15874822
> 
> 赞同：3
> 
> 时间：2013-04-08T08:44:48.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我使用公共活动 gem 来跟踪最新活动。它在 heroku 上运行良好，但现在已经停止工作 - 我做的最后一件事是删除并编辑评论，所以这可能导致了问题。在 localhost 上很好，但在 heroku 中我得到了错误

```
ActionView::Template::Error (Missing partial public_activity/comment/update with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :arb]}. Searched in:
2013-04-08T01:46:41+00:00 app[web.1]:   * "/app/vendor/bundle/ruby/1.9.1/gems/activeadmin-0.5.1/app/views"
2013-04-08T01:46:41+00:00 app[web.1]:   * "/app/vendor/bundle/ruby/1.9.1/gems/devise-2.2.3/app/views"
2013-04-08T01:46:41+00:00 app[web.1]:     3: <% @activities.each do |activity| %>
2013-04-08T01:46:41+00:00 app[web.1]: ):
2013-04-08T01:46:41+00:00 app[web.1]:     4:    <div class="activity">
2013-04-08T01:46:41+00:00 app[web.1]:     5:        <i><%= activity.owner.profile_name rescue 'System' %> </i>
2013-04-08T01:46:41+00:00 app[web.1]:     6:        <%= render_activity activity %>
2013-04-08T01:46:41+00:00 app[web.1]:     7:    </div>
2013-04-08T01:46:41+00:00 app[web.1]:     8: <% end %>
2013-04-08T01:46:41+00:00 app[web.1]:   app/views/activities/index.html.erb:6:in `block in _app_views_activities_index_html_erb__3948591612645283053_56035360'
2013-04-08T01:46:41+00:00 app[web.1]:   app/views/activities/index.html.erb:3:in `_app_views_activities_index_html_erb__3948591612645283053_56035360'
2013-04-08T01:46:41+00:00 app[web.1]: 
2013-04-08T01:46:41+00:00 app[web.1]:   * "/app/app/views"
2013-04-08T01:46:41+00:00 app[web.1]: Completed 500 Internal Server Error in 234ms
2013-04-08T01:46:41+00:00 app[web.1]: Processing by ActivitiesController#index as HTML 
```

我的活动控制器是

```
<% @activities.each do |activity| %>
    <div class="activity">
        <i><%= activity.owner.profile_name rescue 'System' %> </i>
        <%= render_activity activity %>
    </div>
<% end %> 
```

和活动模型是

```
 def index
        @activities = PublicActivity::Activity
        .order("created_at desc")
        .where(trackable_type: %w(Guideline Comment))
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T09:48:36.943

您缺少一个调用的文件`_update.html.erb`，`public_activity/comment`因此它不知道如何渲染它

重新创建它并部署或部署您在 localhost 中的内容（如果它有效）

# java - 在 Libgdx 中使用 SQLite 数据库

> ID：15874824
> 
> 赞同：18
> 
> 时间：2013-04-08T08:44:54.383
> 
> 标签：java, android, libgdx, sqliteopenhelper

我是 Libgdx 的新手，在我的游戏中使用数据库时遇到了麻烦。

我搜索了有关如何使用 Libgdx 使 SQLite 在 Android 和桌面应用程序上运行的教程，但我没有找到一个简单的教程。

上次我在 Android 中使用数据库时，我创建了一个从`SQLiteOpenHelper`.

有没有一种简单的方法可以使用 Libgdx 来做同样的事情？或者至少，有人能指点我一步一步的教程或类似的东西吗？

**编辑**

我忘了说我正在寻找可以让我管理诸如`SQLiteOpenHelper`. 换句话说，当我在代码上更改我的数据库版本时，我想在安装 apk 时在 Android 中重新创建我的数据库。

**解决方案**

在`@42n4`回答之后，我管理了如何使用`SQLiteOpenHelper`Android 应用程序和`JDBC`桌面应用程序连接到 SQLite 数据库。

首先，我为桌面和 Android 应用程序创建了一个“通用类”：

```
//General class that needs to be implemented on Android and Desktop Applications
public abstract class DataBase {

    protected static String database_name="recycling_separation";
    protected static DataBase instance = null;
    protected static int version=1;

    //Runs a sql query like "create".
    public abstract void execute(String sql);

    //Identical to execute but returns the number of rows affected (useful for updates)
    public abstract int executeUpdate(String sql);

    //Runs a query and returns an Object with all the results of the query. [Result Interface is defined below]
    public abstract Result query(String sql);

    public void onCreate(){
        //Example of Highscore table code (You should change this for your own DB code creation)
        execute("CREATE TABLE 'highscores' ('_id' INTEGER PRIMARY KEY  NOT NULL , 'name' VARCHAR NOT NULL , 'score' INTEGER NOT NULL );");
        execute("INSERT INTO 'highscores'(name,score) values ('Cris',1234)");
        //Example of query to get DB data of Highscore table
        Result q=query("SELECT * FROM 'highscores'");
        if (!q.isEmpty()){
            q.moveToNext();
            System.out.println("Highscore of "+q.getString(q.getColumnIndex("name"))+": "+q.getString(q.getColumnIndex("score")));
        }
    }

    public void onUpgrade(){
        //Example code (You should change this for your own DB code)
        execute("DROP TABLE IF EXISTS 'highscores';");
        onCreate();
        System.out.println("DB Upgrade maded because I changed DataBase.version on code");
    }

    //Interface to be implemented on both Android and Desktop Applications
    public interface Result{
        public boolean isEmpty();
        public boolean moveToNext();
        public int getColumnIndex(String name);
        public float getFloat(int columnIndex);
        [...]
    }
} 
```

然后，我`DatabaseDesktop`为桌面应用程序创建了一个类：

```
 public class DatabaseDesktop extends DataBase{
    protected Connection db_connection;
    protected Statement stmt;
    protected boolean nodatabase=false;

    public DatabaseDesktop() {
        loadDatabase();
        if (isNewDatabase()){
            onCreate();
            upgradeVersion();
        } else if (isVersionDifferent()){
            onUpgrade();
            upgradeVersion();
        }

    }

    public void execute(String sql){
        try {
            stmt.execute(sql);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public int executeUpdate(String sql){
        try {
            return stmt.executeUpdate(sql);
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return 0;
    }

    public Result query(String sql) {
        try {
            return new ResultDesktop(stmt.executeQuery(sql));
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    private void loadDatabase(){
        File file = new File (database_name+".db");
        if(!file.exists())
            nodatabase=true;
        try {
            Class.forName("org.sqlite.JDBC");
            db_connection = DriverManager.getConnection("jdbc:sqlite:"+database_name+".db");
            stmt = db_connection.createStatement();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    private void upgradeVersion() {
        execute("PRAGMA user_version="+version);
    }

    private boolean isNewDatabase() {
        return nodatabase;
    }

    private boolean isVersionDifferent(){
        Result q=query("PRAGMA user_version");
        if (!q.isEmpty())
            return (q.getInt(1)!=version);
        else 
            return true;
    }

    public class ResultDesktop implements Result{

        ResultSet res;
        boolean called_is_empty=false;

        public ResultDesktop(ResultSet res) {
            this.res = res;
        }

        public boolean isEmpty() {
            try {
                if (res.getRow()==0){
                    called_is_empty=true;
                    return !res.next();
                }
                return res.getRow()==0;
            } catch (SQLException e) {
                e.printStackTrace();
            }
            return false;
        }

        public boolean moveToNext() {
            try {
                if (called_is_empty){
                    called_is_empty=false;
                    return true;
                } else
                    return res.next();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            return false;
        }

        public int getColumnIndex(String name) {
            try {
                return res.findColumn(name);
            } catch (SQLException e) {
                e.printStackTrace();
            }
            return 0;
        }

        public float getFloat(int columnIndex) {
            try {
                return res.getFloat(columnIndex);
            } catch (SQLException e) {
                e.printStackTrace();
            }
            return 0;
        }

        [...]

    }

} 
```

和一个`DatabaseAndroid`适用于 Android 的应用程序

```
public class DatabaseAndroid extends DataBase{
    protected SQLiteOpenHelper db_connection;
    protected SQLiteDatabase stmt;

    public DatabaseAndroid(Context context) {
        db_connection = new AndroidDB(context, database_name, null, version);
        stmt=db_connection.getWritableDatabase();
    }

    public void execute(String sql){
        stmt.execSQL(sql);
    }

    public int executeUpdate(String sql){
        stmt.execSQL(sql);
        SQLiteStatement tmp = stmt.compileStatement("SELECT CHANGES()");
        return (int) tmp.simpleQueryForLong();
    }

    public Result query(String sql) {
        ResultAndroid result=new ResultAndroid(stmt.rawQuery(sql,null));
        return result;
    }

    class AndroidDB extends SQLiteOpenHelper {

        public AndroidDB(Context context, String name, CursorFactory factory,
                int version) {
            super(context, name, factory, version);
        }

        public void onCreate(SQLiteDatabase db) {
            stmt=db;
            DatabaseAndroid.this.onCreate();
        }

        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            stmt=db;
            DatabaseAndroid.this.onUpgrade();
        }

    }

    public class ResultAndroid implements Result{
        Cursor cursor;

        public ResultAndroid(Cursor cursor) {
            this.cursor=cursor;
        }

        public boolean isEmpty() {
            return cursor.getCount()==0;
        }

        public int getColumnIndex(String name) {
            return cursor.getColumnIndex(name);
        }

        public String[] getColumnNames() {
            return cursor.getColumnNames();
        }

        public float getFloat(int columnIndex) {
            return cursor.getFloat(columnIndex);
        }

        [...]

    }

} 
```

最后，我更改了 Android 和桌面应用程序的主要类：

```
public class Main extends AndroidApplication {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        initialize(new MyGame(new DatabaseAndroid(this.getBaseContext())), false);
    }
}

public class Main {

    public static void main(String[] args) {
        new LwjglApplication(new MyGame(new DatabaseDesktop()), "Example", MyGame.SCREEN_WIDTH, MyGame.SCREEN_HEIGHT,false);
    }

} 
```

注意：

我做了一个版本管理，就像`SQLiteOpenHelper`使用`PRAGMA user_version`. 这样，我只需在`DataBase`需要升级时更改类的版本。

我没有把我所做的所有方法都放在上面，`Result`但是我把我认为更重要的那些方法都放在了上面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-02T15:39:03.307

我编写了一个扩展程序（称为 gdx-sqlite），它将完成您需要的大部分工作。可以从[这里](http://bit.ly/gdx-sqlite)下载此扩展的最新版本。源代码和阅读位于：[https ://github.com/mrafayaleem/gdx-sqlite](https://github.com/mrafayaleem/gdx-sqlite)

此扩展目前支持 Android 和桌面平台。此外，不支持打开位于 Android 应用程序资产文件夹中的数据库。但是，这是一个待定的功能，很快就会添加。

按照阅读我的说明设置您的项目以进行数据库处理。以下是示例代码：

```
package com.mrafayaleem.gdxsqlitetest;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.sql.Database;
import com.badlogic.gdx.sql.DatabaseCursor;
import com.badlogic.gdx.sql.DatabaseFactory;
import com.badlogic.gdx.sql.SQLiteGdxException;

public class DatabaseTest {

    Database dbHandler;

    public static final String TABLE_COMMENTS = "comments";
    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_COMMENT = "comment";

    private static final String DATABASE_NAME = "comments.db";
    private static final int DATABASE_VERSION = 1;

    // Database creation sql statement
    private static final String DATABASE_CREATE = "create table if not exists "
            + TABLE_COMMENTS + "(" + COLUMN_ID
            + " integer primary key autoincrement, " + COLUMN_COMMENT
            + " text not null);";

    public DatabaseTest() {
        Gdx.app.log("DatabaseTest", "creation started");
        dbHandler = DatabaseFactory.getNewDatabase(DATABASE_NAME,
                DATABASE_VERSION, DATABASE_CREATE, null);

        dbHandler.setupDatabase();
        try {
            dbHandler.openOrCreateDatabase();
            dbHandler.execSQL(DATABASE_CREATE);
        } catch (SQLiteGdxException e) {
            e.printStackTrace();
        }

        Gdx.app.log("DatabaseTest", "created successfully");

        try {
            dbHandler
                    .execSQL("INSERT INTO comments ('comment') VALUES ('This is a test comment')");
        } catch (SQLiteGdxException e) {
            e.printStackTrace();
        }

        DatabaseCursor cursor = null;

        try {
            cursor = dbHandler.rawQuery("SELECT * FROM comments");
        } catch (SQLiteGdxException e) {
            e.printStackTrace();
        }
        while (cursor.next()) {
            Gdx.app.log("FromDb", String.valueOf(cursor.getString(1)));
        }

        try {
            dbHandler.closeDatabase();
        } catch (SQLiteGdxException e) {
            e.printStackTrace();
        }
        dbHandler = null;
        Gdx.app.log("DatabaseTest", "dispose");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T17:36:39.793

[http://marakana.com/techtv/android_bootcamp_screencast_series.html](http://marakana.com/techtv/android_bootcamp_screencast_series.html) 第 4 类，第 1 部分：Android Bootcamp - statusData，用于 libgdx：[http ://code.google.com/p/libgdx-users/wiki/SQLite](http://code.google.com/p/libgdx-users/wiki/SQLite)

编辑：我应该提到 Udacity 上关于 libgdx 游戏的两门新课程： [https ://github.com/udacity/ud405](https://github.com/udacity/ud405)

[https://github.com/udacity/ud406](https://github.com/udacity/ud406)

# git - git reset --hard，它将如何影响我的提交和分支？

> ID：15874829
> 
> 赞同：6
> 
> 时间：2013-04-08T08:45:13.487
> 
> 标签：git

今晚我们遇到了一个混乱，代码签入到 git（如果推送到主分支，它会自动推送到我们的应用程序），导致我们的网站出现了一些故障。我恢复了 EC2 快照以恢复站点，但现在我需要清理 git 并让我们回到正轨。

看起来我需要找到最后一次成功提交到 master 分支，获取它的 sha1 id 的前 8 个左右的字符，然后运行：

```
git reset --hard jfe2ldj2
git push origin master -f 
```

一旦我这样做了，从提交“jfe2ldj2”到稍后的主分支上的所有内容都将从 git 中擦除，并且永远无法恢复。我理解正确吗？

此外，这不会影响任何其他分支或提交是否正确？意思是，一旦我运行该命令并将主分支恢复到 6 周前，所有其他分支都将保持最新状态。这意味着如果我有许多发布和功能分支，并且自 6 周前以来它们都有多个提交，那么所有这些分支和提交仍然存在吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T08:53:25.117

> 一旦我这样做了，主分支上从提交`jfe2ldj2`到后来的所有内容都将从 git 中删除，并且永远无法恢复。

正如已经[很好地介绍](https://stackoverflow.com/questions/5473/undoing-a-git-reset-hard-head1)的那样，如果提交了更改，即使在`reset --hard`

> 此外，这不会影响任何其他分支或提交是否正确？

是的，想想一棵树，砍掉一根树枝会使其他树枝完好无损。

# vba - 宏中从 A 列到最后一列的自动填充公式

> ID：15874830
> 
> 赞同：0
> 
> 时间：2013-04-08T08:45:13.957
> 
> 标签：vba, dynamic, autofill

我试图制作一个宏，它将采用单元格 B358 到 B362 中的公式并将这些行自动填充到第 2 行中使用的最后一列。

我是 VBA 的新手，通过搜索这样的论坛完全自学，但不幸的是我没有找到我的解决方案。

请帮我

编辑：

如果你需要看一些代码，我可以给你一个非常基本的例子

```
Sub Macro1()

    Range("B358:B362").Select
    Selection.AutoFill Destination:=Range("B358:AHQ362"), Type:=xlFillDefault
    Range("B358:AHQ362").Select
End Sub 
```

在此示例中，我需要自动填充目标为（B358：“在此处插入第 2 行中使用的最后一列”362）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:22:43.823

这是根据您的情况提出的动态解决方案：

```
Sub Macro1()

Dim lastCol As Long
lastCol = Cells(2, Columns.Count).End(xlToLeft).Column

 Range("B358:B362").AutoFill Destination:=Range(Range("B358"), Cells(362, lastCol)), Type:=xlFillDefault

End Sub 
```

# iphone - 我遇到了关于浮动的问题。帮帮我

> ID：15874831
> 
> 赞同：1
> 
> 时间：2013-04-08T08:45:19.457
> 
> 标签：iphone, ios, objective-c

```
float abc = 20130401.0f;
NSLog(@"abc = %f",abc); 
```

结果：

> 2013-04-08 15:47:38.963 CCLearnIphone[5034:c07] abc = 20130400.000000

使用双精度也是一样的。

如何表示一个八位数字？

我知道精度会丢失，但 0.000000 不应该是 1.0000000。

%f 应该是 0.9xxxxxx 等

为什么将 .000000 四舍五入为 1.000000？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T22:27:16.343

您的数字对于 float var 来说太高了，因此您必须将其更改为 double 并删除数字末尾的“f”字符

```
double abc = 20130401.0;
NSLog(@"abc = %f",abc); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T08:49:22.143

这是由于`float`: 大约 7 位十进制数字的精度。

见[https://stackoverflow.com/a/5098949/104790](https://stackoverflow.com/a/5098949/104790)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T08:59:17.007

> > 为什么将 .000000 四舍五入为 1.000000？

事实并非如此。20130401 舍入为 20130400，因为 20130400 是 a`float`可以表示的最接近的值。

# eclipse - Tomcat没有运行

> ID：15874833
> 
> 赞同：0
> 
> 时间：2013-04-08T08:45:23.207
> 
> 标签：eclipse, tomcat6, java

由于某些原因，tomcat 无法运行。我查看了各种教程，并且（像往常一样）解决方案不起作用，我将日志输出放在下面。我已经完成了 tomcat 的全新安装并将其链接到 eclipse 但是当尝试在 eclipse 中启动服务时，这是服务器停止之前的输出。

```
 INFO: Server startup in 488 ms
    08-Apr-2013 09:42:23 org.apache.catalina.core.StandardServer await
    SEVERE: StandardServer.await: create[8005]: 
    java.net.BindException: Address already in use: JVM_Bind
at java.net.PlainSocketImpl.socketBind(Native Method)
at java.net.PlainSocketImpl.bind(Unknown Source)
at java.net.ServerSocket.bind(Unknown Source)
at java.net.ServerSocket.<init>(Unknown Source)
at org.apache.catalina.core.StandardServer.await(StandardServer.java:406)
at org.apache.catalina.startup.Catalina.await(Catalina.java:676)
at org.apache.catalina.startup.Catalina.start(Catalina.java:628)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
    08-Apr-2013 09:42:23 org.apache.coyote.http11.Http11Protocol pause
    INFO: Pausing Coyote HTTP/1.1 on http-8080
    08-Apr-2013 09:42:24 org.apache.catalina.core.StandardService stop
    INFO: Stopping service Catalina
     08-Apr-2013 09:42:24 org.apache.coyote.http11.Http11Protocol destroy
    INFO: Stopping Coyote HTTP/1.1 on http-8080 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:09:05.110

当没有人不使用端口时，这个问题可能会发生在 Windows 上。即Windows TCP引擎有时会长时间保持时间等待端口。解决方法是等待 Windows 释放端口或重新启动。在 Linux 上，只有在有其他进程时才会发生此问题。可以用 lsof 找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:50:23.320

此异常告诉您，某个其他应用程序正在侦听同一端口 ( `8005`)。

您面临的挑战是找到正在使用该端口的其他进程。您没有指定您使用的操作系统。

在 Windows 上可以使用`netstat`，在 Linux 下可以`nmap`尝试查找其他进程。

# java - HttpClient 挂在 socketRead0 上并成功执行了方法

> ID：15874834
> 
> 赞同：8
> 
> 时间：2013-04-08T08:45:24.447
> 
> 标签：java, sockets, timeout, httpclient

在我们的网络应用程序中，用户可以提交一个 url。我们将获取数据并在服务器端解析它。对于每个请求，我们使用具有以下（相关）设置的 HttpClient

```
connectionManager.getParams().setConnectionTimeout(10000);
connectionManager.getParams().setSoTimeout(10000); 
```

当我调用 HttpMethod.getResponseBody 时，状态代码已被检查为可接受。此时线程挂起此堆栈跟踪：

```
java.net.SocketInputStream.socketRead0 ( native code )
java.net.SocketInputStream.read ( SocketInputStream.java:150 )
java.net.SocketInputStream.read ( SocketInputStream.java:121 )
java.io.BufferedInputStream.read1 ( BufferedInputStream.java:273 )
java.io.BufferedInputStream.read ( BufferedInputStream.java:334 )
java.io.FilterInputStream.read ( FilterInputStream.java:133 )
org.apache.commons.httpclient.AutoCloseInputStream.read ( AutoCloseInputStream.java:108 )
java.io.FilterInputStream.read ( FilterInputStream.java:107 )
org.apache.commons.httpclient.AutoCloseInputStream.read ( AutoCloseInputStream.java:127 )
org.apache.commons.httpclient.HttpMethodBase.getResponseBody ( HttpMethodBase.java:690 ) 
```

我无法找到发生这种情况的确切 URL（是现场环境中的事件），并且我无法重现它。我想这只是我们连接的服务器行为异常的问题，但也许我错过了一些东西。在任何一种情况下，我有没有办法防止阻塞方法调用永远等待？SoTimeout 也是套接字读取超时？我还缺少其他设置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T19:13:17.973

我的所有超时设置都很好，但我发现我们在 url 上进行了 http 分块但不发送任何结果（在 chrome 中工作正常，但在 http 客户端中，即使设置了超时，它也会永远挂起）。幸运的是我拥有服务器并且只是返回一些垃圾并且它不再挂起。这似乎是一个非常独特的错误，因为 http 客户端不能很好地处理某种空分块情况（尽管我可能会离开）....我只知道它每次都挂在具有空数据和该 url 的同一个 url是 http 分块 csv 下载回我们的 http 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T18:54:06.180

我们在实现中始终如一地看到这一点，看起来 http 客户端没有正确处理坏服务器或其他东西，它没有超时.....我可以使用这个数据总线开源项目在我们的设置中重现，堆栈跟踪是有点不同……

SocketInputStream.socketRead0(FileDescriptor, byte[], int, int, int) line: 不可用 [native method]
SocketInputStream.read(byte[], int, int) line: 129
SocketInputBuffer(AbstractSessionInputBuffer).fillBuffer() line: 166
SocketInputBuffer.fillBuffer() 行：90 SocketInputBuffer(AbstractSessionInputBuffer).readLine(CharArrayBuffer) 行：281
DefaultHttpResponseParser.parseHead(SessionInputBuffer) 行：92
DefaultHttpResponseParser.parseHead(SessionInputBuffer) 行：62
DefaultHttpResponseParser(AbstractMessageParser).parse() 行：254
DefaultClientConnection (AbstractHttpClientConnection).receiveResponseHeader() 行：289 DefaultClientConnection.receiveResponseHeader() 行：252
BasicPooledConnAdapter(AbstractClientConnAdapter).receiveResponseHeader() 行：219 HttpRequestExecutor.doReceiveResponse(HttpRequest, HttpClientConnection, HttpContext) 行：300 HttpRequestExecutor.execute(HttpRequest, HttpClientConnection, HttpContext) 行：127
DefaultRequestDirector.tryExecute(RoutedRequest, HttpContext) 行：712 DefaultRequestDirector。执行（HttpHost，HttpRequest，HttpContext）行：517
DefaultHttpClient（AbstractHttpClient）.execute（HttpHost，HttpRequest，HttpContext）行：906 DefaultHttpClient（AbstractHttpClient）.execute（HttpUriRequest，HttpContext）行：805
ReadAggregations.processAggregation（字符串，计数器，计数器, Counter, Counter) 行: 153
ReadAggregations.start() 行: 96
ReadAggregations.main(String[]) 行: 70

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T09:38:46.177

您可以尝试使用 HttpUriRequest#abort() 中止请求，请参阅[https://hc.apache.org/httpcomponents-client-4.3.x/httpclient/apidocs/org/apache/http/client/methods/HttpUriRequest.html #中止%28%29](https://hc.apache.org/httpcomponents-client-4.3.x/httpclient/apidocs/org/apache/http/client/methods/HttpUriRequest.html#abort%28%29)。但是，设置一个不需要拦截的超时会更好。这是一个相关的问题：[Setting time out in apache http client](https://stackoverflow.com/questions/21576414/setting-time-out-in-apache-http-client/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:59:28.797

> 当我调用 HttpMethod.getResponseBody 时，状态代码已被检查为可接受。此时线程挂起

看起来您在同步调用时遇到问题...您应该确保该方法

> HttpMethod.getResponseBody

被顺序调用或者应该对更改状态代码的部分使用互斥锁（信号量）

此外，您应该减少超时限制以防止挂起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-04T18:59:46.837

HttpClient 区分连接和请求。`setSoTimeout`将配置连接套接字超时，同时`setConnectionTimeout`将配置连接管理器的超时（等待连接的时间）和连接本身的建立。在您提供的代码中，您没有为用于请求本身的套接字设置任何超时，不幸的是，HttpClient 默认情况下没有超时。

这是我在 v4.4.1 中的做法：

```
// Configure the socket timeout for the connection, incl. ssl tunneling
connManager = new PoolingHttpClientConnectionManager();
connManager.setMaxTotal(200);
connManager.setDefaultMaxPerRoute(100);

SocketConfig sc = SocketConfig.custom()
    .setSoTimeout(soTimeoutMs)
    .build();

connManager.setDefaultSocketConfig(sc);

HttpClient client = HttpClients.custom()
            .setConnectionManager(connManager)
            .setConnectionManagerShared(true)
            .build();

// configure the timeouts (socket and connection) for the request
RequestConfig.Builder config = = RequestConfig.copy(RequestConfig.DEFAULT);
config.setConnectionRequestTimeout(connectionTimeoutMs);
config.setSocketTimeout(socketTimeoutMs);

HttpRequestBase req = new HttpGet(uri);
req.setConfig(config.build());

client.execute(req); 
```

# sql-server - Azure 链接服务器：

> ID：15874836
> 
> 赞同：1
> 
> 时间：2013-04-08T08:45:28.790
> 
> 标签：sql-server, azure, azure-sql-database, linked-server

我知道这个区域存在一些线程，围绕一个`Azure MSSQL`用作链接数据库的本地服务器。

我的具体问题是出现链接服务器，连接并且我可以查看数据库，但是当尝试更深入时，如查看表格时出现以下错误：

> 此版本的 SQL Server 不支持对“databasetable.sys.sp_tables_rowset2”中的数据库和/或服务器名称的引用。（Microsoft SQL 错误，错误 40515）。

我已经尝试了通过其他线程已经提到的任何建议，但除了在本地安装的 SQL Server 中列出 Azure 服务器上的数据库之外，我无法获得更深入的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-17T17:21:51.540

当我尝试在我的 SQL Azure 数据库上执行简单的选择/插入/更新/删除/创建表/删除表之外的任何操作时，我遇到了同样的问题。看来您不能做任何涉及 SQL Server 设置或任何涉及系统表的存储过程的事情，可能是因为 SQL Server 可以在多个客户之间共享。

[Azure](https://msdn.microsoft.com/en-us/library/azure/ff394102.aspx) SQL 与本地 SQL Server 相比也存在一些限制。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-06-04T16:28:03.430

我们现在使用弹性数据库查询具有此功能，您需要遵循提到的两个简单步骤：

Step-1：创建对外部数据库的引用 Step-2：然后在目标数据库中创建远程表引用

然后您可以像使用 SQL Server 一样执行远程查询。

请参阅分步详细信息[https://azure.microsoft.com/en-us/documentation/articles/sql-database-elastic-query-getting-started-vertical/](https://azure.microsoft.com/en-us/documentation/articles/sql-database-elastic-query-getting-started-vertical/)

# joomla - 为了更安全，Joomla 后端和前端的不同 mysql 用户

> ID：15874839
> 
> 赞同：0
> 
> 时间：2013-04-08T08:45:34.580
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla1.7

我目前只为 joomla 的 mysqluser 设置了基本权限：`INSERT`、、`UPDATE`和。`DELETE``SELECT`

但事实上，如果这个用户在整个网站上都被使用，如果任何黑客找到获取它或控制查询（sql 注入）的方法，他将能够删除网站的全部内容。

我的想法是在 joomla 中有 2 个不同的 mysql 用户。一个用于前端的用户，另一个用于后端（/administrator）。事实上，管理员需要我目前使用的权限，但前端用户只需要 SELECT 以及一些特定表（如横幅和会话）的 UPDATE 和 INSERT 权限

我知道这听起来可能有点偏执，但目前我正在处理的项目需要这种“偏执”的方法。

我希望任何 Joomla 专家都能帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:30:57.983

首先，我看到您在问题中使用了 Joomla 1.7 标签，但请确保您运行的是最新版本的 Joomla 2.5 系列 2.5.9

从我所读到的内容中，您想要实现的是您想要 2 个用户，1 个只能登录到前端，另一个可以登录到后端。这目前在 Joomla 中可用，并且需要更改核心代码，我不建议您这样做。阅读我回答的另一个问题，提供信息和良好的扩展以帮助提高安全性。

[Joomla！2.5.4 被黑：诊断有问题](https://stackoverflow.com/questions/11036763/joomla-2-5-4-hacked-having-trouble-with-diagnosis/11037642#11037642)

然后，只需创建一个单独的管理员帐户并仅使用该帐户登录后端。

# java - JAX-WS 使用特定于实现的 API（例如 CXF）调用 Web 服务

> ID：15874844
> 
> 赞同：0
> 
> 时间：2013-04-08T08:45:46.257
> 
> 标签：java, jax-ws, cxf, java-metro-framework

是否可以在不使用 JAX-WS API 而是使用特定运行时实现 API（例如 CXF 特定 API）的情况下在 Java 中调用 Web 服务？

当我使用 JAX-WS API 时，我的类路径上有 Metro 和它导致的问题，所以我想指定确切的 JAX-WS API 实现以在调用服务时动态使用

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:04:13.430

您可以用纯 XML 构建您的请求并执行 SOAP 请求。要构建 XML 结构，您可以使用 SoapUI，您可以在其中导入 WSDL，它为您提供 xml 输入结构。将其复制到 java 类中，在必要时附加请求参数并触发请求。您不需要任何 Jax-WS API。这种方法的唯一问题是您需要为输入和输出编写 XML 解析器

**[更新] 不同的解决方案**

我使用 Java API 来使用框架功能，但需要为给定服务创建客户端 jar 并添加到类路径。

```
URL wsdlURL = new URL("http://localhost/myweb/services/xyz_services?wsdl");
        QName SERVICE_NAME = new QName("http://service.sa.com/","portname");
        Service service = Service.create(wsdlURL, SERVICE_NAME);

        TestService client = service.getPort(TestService.class);
        client.execute(); 
```

如果您的服务如下所示

```
package com.sa.service;
        Inteface TestService{
            public void execute();
        } 
```

`wsimport`您可以从命令行使用（Java 工具）创建客户端类，然后将它们 jar 并添加到类路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:02:45.763

最有可能的是，所有 JAX-WS 实现都有某种专有 API，可用于创建使用其特定实现并绕过 JAX-WS 提供者发现机制的服务。在大多数情况下，发现的 Provider 很可能是这些 API 的包装器。

对于客户端的 CXF，这将是 JaxWsProxyFactoryBean：

[http://cxf.apache.org/javadoc/latest/org/apache/cxf/jaxws/JaxWsProxyFactoryBean.html](http://cxf.apache.org/javadoc/latest/org/apache/cxf/jaxws/JaxWsProxyFactoryBean.html)

可用于从 JAX-WS 生成的接口创建代理对象。

# php - 有人可以对 GITkit v2 有所了解吗

> ID：15874846
> 
> 赞同：0
> 
> 时间：2013-04-08T08:45:51.477
> 
> 标签：php, oauth-2.0, openid

我正在尝试集成`GITkit v2`（[https://developers.google.com/identity-toolkit/v2/acguide](https://developers.google.com/identity-toolkit/v2/acguide)）；我在理解文档中的一些内容时遇到了问题，并希望有人能对此有所了解。

1）示例中的回调是否`HTTPS`用于防止某些跨站点脚本（“ `XSS`”）向量，因此强烈推荐用于回调？如果是这样，是否也推荐给`loginUrl`，可能还有其他人？

2）根据1.部分，`identitytoolkit.setConfig({})`您必须在里面指定`HomeUrl`，但似乎`GITkit v2`不再自动重定向到您的主页`{/homeUrl}`（为什么必须指定两次？）

3) 回调逻辑执行后（知道用户是否已经注册）是否应该将 1.`{/homeUrl}`中的 HTML 回显到回调页面上？有人可以解释一下我的确切工作流程`GITkit v2`吗？

过去几个小时我一直在阅读，但我无法弄清楚这些问题。非常感谢任何答案（即使它没有回答所有问题），也感谢任何其他信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:56:24.043

回调接收来自 IDP 的响应，因此它可能包含来自 OAuth 的个人信息。最好使用 HTTPS 进行回调，以及旧版登录和注册。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/jsapi"></script>
<script type="text/javascript" src="https://www.accountchooser.com/client.js"></script>
<script type="text/javascript">
  google.load('identitytoolkit', '2', {packages: ['store']});
  jQuery(function() {
    var homeUrl = '/'; // Your home page URL.
    var account = {
      email: 'user@idp.com',
      displayName: 'User Name',
      photoUrl: 'http://website.com/img/user.png'
    };
  window.google.identitytoolkit.storeAccount(account, homeUrl);
  });
</script> 
```

确实应该在回调页面上发布（在您的逻辑之后），确保将默认值替换为 OAuth 返回的值 - displayName，并且 photoUrl 是可选的。

最后，小部件内的 homeUrl 用于在旧版登录后重定向用户。:-)

# c# - Blob 上传未经授权的服务器无法验证请求异常

> ID：15874847
> 
> 赞同：0
> 
> 时间：2013-04-08T08:45:55.147
> 
> 标签：c#, azure, azure-blob-storage

我一周前使用了这段代码，一切都很好。我的同事仍在使用完全相同的代码，他们完全没有问题。

```
StorageCredentialsAccountAndKey heronStorage = new StorageCredentialsAccountAndKey("heron", "someKey");
CloudBlobClient blobClient = new CloudBlobClient("someUrl", heronStorage);
CloudBlobContainer container = blobClient.GetContainerReference("containerName");
container.CreateIfNotExist();
container.SetPermissions(new BlobContainerPermissions { PublicAccess = BlobContainerPublicAccessType.Blob }); 
```

此代码抛出：`"Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature."`在行`container.CreateIfNotExist();`。

我复制了他们的代码，它仍然是一样的。我完全没主意了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:55:22.737

确保您的系统时钟正确同步，错误的时区和不正确的同步会导致哈希失败。由于服务器使用时间作为同步的一部分来验证请求。

# blackberry - 如果在 Torch 上设置了边距，则 EditField 被切断

> ID：15874849
> 
> 赞同：2
> 
> 时间：2013-04-08T08:45:58.630
> 
> 标签：blackberry, margin, status, banner, blackberry-editfield

正如您从 SSCCE 中看到的那样，我执行了 setBanner() 和 setStatus()，然后只在两者之间添加了一个 EditField。

现在在 Torch 上，如果您在 EditField 中输入大量字符，直到其高度超过横幅和状态之间的区域，最后文本行将与状态栏重叠。看截图：![在此处输入图像描述](https://i.stack.imgur.com/elMGql.png)

这只发生在我为 EditField 设置边距时，但显然我需要这个边距。似乎是一个 Torch 错误，因为它适用于其他 BB 设备。但是有人可能知道解决方法吗？

这是SSCCE：

```
import net.rim.device.api.browser.field2.BrowserField;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.EditField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.decor.BackgroundFactory;

public class CutOff extends UiApplication implements Runnable
{
    /**
     * @param args
     */
    public static void main(final String[] args)
    {
        final CutOff bt = new CutOff();
        bt.invokeLater(bt);
        bt.enterEventDispatcher();

    }

    public void run()
    {
        final MainScreen s = new MainScreen();
        //header
        final HorizontalFieldManager head = new HorizontalFieldManager();
        head.add(new ButtonField("header"));
        s.setBanner(head);

        //footer
        final HorizontalFieldManager hf = new HorizontalFieldManager();
        hf.setBackground(BackgroundFactory.createSolidBackground(Color.RED));
        hf.add(new ButtonField("test"));
        final EditField f = new EditField();
        f.setMargin(10, 10, 10, 10);
        s.add(f);
        s.setStatus(hf);

        UiApplication.getUiApplication().pushScreen(s);
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:11:46.580

尝试这个 -

将您的 EditField 添加到 Horizo​​ntalFieldManager。

```
 final MainScreen s = new MainScreen();
    //header
    final HorizontalFieldManager head = new HorizontalFieldManager();
    head.add(new ButtonField("header"));
    s.setBanner(head);

    //footer
    final HorizontalFieldManager hf = new HorizontalFieldManager();
    hf.setBackground(BackgroundFactory.createSolidBackground(Color.RED));
    hf.add(new ButtonField("test"));
    HorizontalFieldManager h=new HorizontalFieldManager(HorizontalFieldManager.VERTICAL_SCROLL);
    final EditField f = new EditField();
    f.setMargin(10, 10, 10, 10);
    h.add(f);
    s.add(h);
    s.setStatus(hf);

    UiApplication.getUiApplication().pushScreen(s); 
```

# wpf - 根本原因：对自动化对等 API 的递归调用无效

> ID：15874862
> 
> 赞同：7
> 
> 时间：2013-04-08T08:46:26.933
> 
> 标签：wpf, wpftoolkit

我们已经使用 WPF Tookit DataGrid 和 .NET 3.5 大约 2 年了。我们有两种抛出异常的情况——“对自动化对等 API 的递归调用无效”。**这很奇怪和古怪，很少有 PC 有这样的问题。**

**案例一：**

一个下拉组合框（WPF Tookit DataGrid 作为 DropDown 内容控件）：

它可以通过以下方式解决：

```
protected override AutomationPeer OnCreateAutomationPeer()
{
   return null;
} 
```

此解决方案是从[WPF Recursive call to Automation Peer API is not valid](https://stackoverflow.com/questions/4017786/wpf-recursive-call-to-automation-peer-api-is-not-valid)。

**案例二：**

WPF Tookit DataGrid 有一个 Temlate Column ，其中单元格模板有一个下拉组合框（WPF Tookit DataGrid 作为 DropDown 内容控件）。无法通过上述解决方案修复。

```
*Exception Stack:
Exception object: 0ac4e048
Exception type:   System.InvalidOperationException
Message:          Recursive call to Automation Peer API is not valid.
InnerException:   <none>
StackTrace (generated):
    SP       IP       Function
    0036E3A4 61A0CEFE PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.GetChildren()+0x366bde
    0036E3D4 616A5C34 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x18
    0036E3EC 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E404 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E41C 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E434 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E44C 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E464 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E47C 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E494 616A5E52 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.ValidateConnected(System.Windows.Automation.Peers.AutomationPeer)+0xaa
    0036E4A8 616A444E PresentationCore_ni!MS.Internal.Automation.ElementProxy.StaticWrap(System.Windows.Automation.Peers.AutomationPeer, System.Windows.Automation.Peers.AutomationPeer)+0x1a
    0036E4C0 616A7C69 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.UpdateChildrenInternal(Int32)+0x341
    0036E52C 616A791A PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.UpdateChildren()+0xa
    0036E530 11EDC66E UNKNOWN!Microsoft.Windows.Automation.Peers.DataGridItemAutomationPeer.GetChildrenCore()+0x1e
    0036E540 616A662B PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.EnsureChildren()+0x23
    0036E558 616A634C PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.GetChildren()+0x2c
    0036E588 616A5C34 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x18
    0036E5A0 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E5B8 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E5D0 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E5E8 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E600 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E618 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E630 616A5C73 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.isDescendantOf(System.Windows.Automation.Peers.AutomationPeer)+0x57
    0036E648 616A5E52 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.ValidateConnected(System.Windows.Automation.Peers.AutomationPeer)+0xaa
    0036E65C 616A444E PresentationCore_ni!MS.Internal.Automation.ElementProxy.StaticWrap(System.Windows.Automation.Peers.AutomationPeer, System.Windows.Automation.Peers.AutomationPeer)+0x1a
    0036E674 616A6F3E PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.ProviderFromPeer(System.Windows.Automation.Peers.AutomationPeer)+0x1e
    0036E680 619DBBD1 PresentationCore_ni!System.Windows.Automation.Peers.AutomationPeer.RaiseAutomationEvent(System.Windows.Automation.Peers.AutomationEvents)+0x7ab6d5
    0036E690 609783AA PresentationFramework_ni!System.Windows.Automation.Peers.SelectorAutomationPeer.RaiseSelectionEvents(System.Windows.Controls.SelectionChangedEventArgs)+0x22
    0036E6B0 60C48560 PresentationFramework_ni!System.Windows.Controls.ComboBox.OnSelectionChanged(System.Windows.Controls.SelectionChangedEventArgs)+0xbef278
    0036E6C4 124C17E7 UNKNOWN!UNKNOWN+0x17
    0036E6EC 60061113 PresentationFramework_ni!System.Windows.Controls.Primitives.Selector.InvokeSelectionChanged(System.Collections.Generic.List`1<System.Object>, System.Collections.Generic.List`1<System.Object>)+0x4f
    0036E704 6005FE17 PresentationFramework_ni!System.Windows.Controls.Primitives.Selector+SelectionChanger.End()+0xdf
    0036E738 6005E325 PresentationFramework_ni!System.Windows.Controls.Primitives.Selector+SelectionChanger.SelectJustThisItem(System.Object, Boolean)+0x11d
    0036E76C 60060D02 PresentationFramework_ni!System.Windows.Controls.Primitives.Selector.OnSelectedItemChanged(System.Windows.DependencyObject, System.Windows.DependencyPropertyChangedEventArgs)+0xb2
    0036E798 627585EC WindowsBase_ni!Unknown+0x4c
    0036E7C4 60073E40 PresentationFramework_ni!System.Windows.FrameworkElement.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs)+0x50
    0036E8F4 627583BC WindowsBase_ni!Unknown+0x3c
    0036E94C 6275676B WindowsBase_ni!Unknown+0x71b
    0036EA0C 627594CD WindowsBase_ni!Unknown+0xad
    0036EA34 600AD85A PresentationFramework_ni!System.Windows.Data.BindingExpressionBase.Invalidate(Boolean)+0x62
    0036EA4C 600AD31D PresentationFramework_ni!System.Windows.Data.BindingExpression.TransferValue(System.Object, Boolean)+0x1fd
    0036EAA0 600AA9D8 PresentationFramework_ni!System.Windows.Data.BindingExpression.Activate(System.Object)+0x194
    0036EACC 60097C49 PresentationFramework_ni!System.Windows.Data.BindingExpression.AttachToContext(AttachAttempt)+0x38d
    0036EB74 600C3D51 PresentationFramework_ni!System.Windows.Data.BindingExpression.MS.Internal.Data.IDataBindEngineClient.AttachToContext(Boolean)+0x19
    0036EB80 600C3D19 PresentationFramework_ni!MS.Internal.Data.DataBindEngine+Task.Run(Boolean)+0x31
    0036EB94 600C3C36 PresentationFramework_ni!MS.Internal.Data.DataBindEngine.Run(System.Object)+0xb6
    0036EBB0 600C2CBA PresentationFramework_ni!MS.Internal.Data.DataBindEngine.OnLayoutUpdated(System.Object, System.EventArgs)+0x1e
    0036EBC0 61271CD8 PresentationCore_ni!System.Windows.ContextLayoutManager.fireLayoutUpdateEvent()+0x154
    0036EBF8 6127159E PresentationCore_ni!System.Windows.ContextLayoutManager.UpdateLayout()+0x926
    0036ECF8 61277F4D PresentationCore_ni!System.Windows.ContextLayoutManager.UpdateLayoutCallback(System.Object)+0x19
    0036ECFC 61277F28 PresentationCore_ni!System.Windows.Media.MediaContext+InvokeOnRenderCallback.DoWork()+0x10
    0036ED00 61277EC2 PresentationCore_ni!System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()+0x76
    0036ED1C 6127785A PresentationCore_ni!System.Windows.Media.MediaContext.RenderMessageHandlerCore(System.Object)+0x8a
    0036ED68 612777AA PresentationCore_ni!System.Windows.Media.MediaContext.RenderMessageHandler(System.Object)+0x6e
    0036ED80 6274FE83 WindowsBase_ni!Unknown+0x53
    0036EDA0 6274FE0C WindowsBase_ni!Unknown+0x9c
    0036EDE8 62752C95 WindowsBase_ni!Unknown+0x8d
    0036EE24 62752BF8 WindowsBase_ni!Unknown+0x38
    0036EE2C 642F4D85 mscorlib_ni!System.Threading.ExecutionContext.runTryCode(System.Object)+0x51
    0036F2D0 642F4C8A mscorlib_ni!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)+0x6a
    0036F2E8 642F7F92 mscorlib_ni!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)+0x7e
    0036F30C 642F7F04 mscorlib_ni!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)+0x2c
    0036F328 62752B28 WindowsBase_ni!Unknown+0x68
    0036F364 6274E7FE WindowsBase_ni!Unknown+0x15e
    0036F3A8 6274E9D7 WindowsBase_ni!Unknown+0x63
    0036F3F8 627500A6 WindowsBase_ni!Unknown+0xbe
    0036F444 6274FFD5 WindowsBase_ni!Unknown+0x7d
    0036F454 6274FE83 WindowsBase_ni!Unknown+0x53
    0036F474 6274FDB2 WindowsBase_ni!Unknown+0x42
    0036F4BC 6274E2CC WindowsBase_ni!Unknown+0xb4
    0036F504 6274F8B8 WindowsBase_ni!Unknown+0x104* 
```

许多线程只是有一个关于这个问题的解决方案，有没有人知道对自动化对等 API 的递归调用的**根本原因**无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-10T15:30:30.830

我意识到这是一个旧线程，但是在重新加载几个月前完成的项目后，我遇到了完全相同的问题。

唯一真正重要的变化是我安装了 RoboForm 进行试用，但它已经过期。

我可以非常轻松且一致地重新创建，卸载它，问题现在消失了。

# node.js - 在 VPS OVH 上运行 Nodejs 应用程序

> ID：15874866
> 
> 赞同：1
> 
> 时间：2013-04-08T08:46:46.510
> 
> 标签：node.js, port, vps

我只是在 OVH 租了一个 VPS，我试图在端口 1337 上运行一个 Nodejs 应用程序。当我尝试时，应用程序运行正常：

```
curl 0.0.0.0:1337 
```

它给了我页面的代码（`127.0.0.1`也可以使用）

但是当我尝试连接时`176.31.184.111:1337`，它不起作用。

```
#root: iptables -L -v -n

Chain INPUT (policy ACCEPT 8645 packets, 592K bytes)
    pkts bytes target     prot opt in     out     source           destination

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
    pkts bytes target     prot opt in     out     source           destination

Chain OUTPUT (policy ACCEPT 7556 packets, 729K bytes)
    pkts bytes target     prot opt in     out     source           destination 
```

# iphone - 后台随机本地通知

> ID：15874875
> 
> 赞同：9
> 
> 时间：2013-04-08T08:47:25.470
> 
> 标签：iphone, ios, uilocalnotification

我想要每分钟随机的本地通知（文本和声音）。我正在使用以下代码：

```
self.randomIndex_text  = arc4random() % [self.array_motivation count];
self.randomIndex_alarm = arc4random() % [self.array_alarm count];
NSLog(@"text %d, alarm %d",self.randomIndex_text, self.randomIndex_alarm); 
```

此代码非常适用于

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif
{
notif.soundName = [NSString stringWithFormat:@"%@.mp3", [self.array_alarm objectAtIndex:self.randomIndex_alarm]];
    [self _showAlert:[NSString stringWithFormat:@"%@",[self.array_motivation objectAtIndex:self.randomIndex_text]] withTitle:@"Daily Achiever"];
} 
```

从上面的代码显示警报，并在警报确定时显示以下方法调用：

```
-(void)insert:(NSDate *)fire
{
    self.localNotification = [[UILocalNotification alloc] init];

    if (self.localNotification == nil)
        return;

    self.randomIndex_text  = arc4random() % [self.array_motivation count];
    self.randomIndex_alarm = arc4random() % [self.array_alarm count];
    NSLog(@"text %d, alarm %d",self.randomIndex_text, self.randomIndex_alarm);

    self.localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:refTimeIntrval];
    self.localNotification.timeZone = [NSTimeZone defaultTimeZone];
    self.localNotification.alertBody = [NSString stringWithFormat:@"%@",[self.array_motivation objectAtIndex:self.randomIndex_text]];
    self.localNotification.soundName = [NSString stringWithFormat:@"%@.mp3",[self.array_alarm objectAtIndex:self.randomIndex_alarm]];
    self.localNotification.alertAction = @"View";
    self.localNotification.applicationIconBadgeNumber = [[UIApplication sharedApplication] applicationIconBadgeNumber]+1;
    self.localNotification.repeatInterval=NSMinuteCalendarUnit;

    NSLog(@"alertBody %@,soundName %@", self.localNotification.alertBody, self.localNotification.soundName);
    [[UIApplication sharedApplication] scheduleLocalNotification:self.localNotification];
} 
```

但在后台不起作用。我只是把这个上面的随机方法放在

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
NSAssert(self->bgTask == UIBackgroundTaskInvalid, nil);
    bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIBackgroundTaskInvalid;
        });
    }];

    dispatch_async(dispatch_get_main_queue(), ^{
        while ([application backgroundTimeRemaining] > 1.0)
        {
            UILocalNotification *localNotif = [[UILocalNotification alloc] init];
            if (localNotif)
            {
                self.randomIndex_text  = arc4random() % [self.array_motivation count];
                self.randomIndex_alarm = arc4random() % [self.array_alarm count];
                NSLog(@"tempmethod text %d, alarm %d",self.randomIndex_text, self.randomIndex_alarm);

                localNotif.fireDate = [[NSDate date] dateByAddingTimeInterval:refTimeIntrval];
                localNotif.alertBody = [NSString stringWithFormat:@"%@",[self.array_motivation objectAtIndex:self.randomIndex_text]];
                localNotif.soundName =[NSString stringWithFormat:@"%@.mp3",[self.array_alarm objectAtIndex:self.randomIndex_alarm]];
                localNotif.alertAction = NSLocalizedString(@"Read Msg", nil);
                localNotif.applicationIconBadgeNumber = 1;
                [localNotif setRepeatInterval:NSMinuteCalendarUnit];
                [application presentLocalNotificationNow:localNotif];

                NSLog(@"sound: %@, alertAction: %@, alerBody: %@, ref: %f, str_time: %@",localNotif.soundName, localNotif.alertAction, localNotif.alertBody, refTimeIntrval, str_Time);

                [self performSelector:@selector(bgmethodd) withObject:nil afterDelay:refTimeIntrval];
                break;
            }
        }
        [application endBackgroundTask:self->bgTask];
        self->bgTask = UIBackgroundTaskInvalid;
    });
    NSLog(@"smh: %d,%d,%d",self.seconds, self.minutes, self.hours);
    }
} 
```

当我`applicationDidEnterBackground`只调试一次调用时（即应用程序在后台移动时），我注意到的另一件事。之后没有任何方法调用，直到应用程序再次打开，但我仍然收到通知文本和声音连续。但是这个文字和声音不是随机的。

请建议我一些想法并分享您的知识，即当后台没有任何方法调用时，此通知文本和声音来自何处。是否可以在后台随机通知。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-24T11:38:14.043

当应用程序进入后台时，您安排的第一个通知以间隔 NSMinuteCalendarUnit 重复，因此应用程序每分钟仅显示该通知。

为了获得随机警报和声音，本地通知需要在后台执行一些代码来生成下一个随机声音和警报，这是不可能的。

一种方法是提前安排 64 个（最多）本地通知，其中包含随机声音和警报。当用户打开应用程序时，您可以查看在后台触发了多少通知，并重新安排它们。

为了确保即使用户在这 64 个通知期间没有打开应用程序也会触发本地通知，最后一个通知需要以间隔 NSMinuteCalendarUnit 重复。所以在前 63 次通知之后，你会失去随机性，但如果用户经常打开应用程序，这不会有问题。

# c# - 如何处理 WMI 的管理异常

> ID：15874878
> 
> 赞同：2
> 
> 时间：2013-04-08T08:47:51.840
> 
> 标签：c#, .net, wmi, wmi-query

我正在使用 WMI读取处理器的详细信息[WIN32_PROCESSOR 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx)目前我正在尝试阅读这些属性：`SELECT CAPTION,L2CACHESIZE,L3CACHESIZE FROM WIN32_PROCESSOR`。所以我正在使用以下代码：

```
static void Main(string[] args)
{
    string strQuery = "SELECT CAPTION,L2CACHESIZE,L3CACHESIZE FROM WIN32_PROCESSOR";
    string strIPAddress = "XXX.XXX.X.XXX";
    DataTable dtProcessor = new DataTable();
    dtProcessor.Columns.Add("CAPTION");
    dtProcessor.Columns.Add("L2CACHESIZE");
    dtProcessor.Columns.Add("L3CACHESIZE");            

    ManagementScope scope = new ManagementScope(@"\\" + strIPAddress + @"\root\cimv2");
    SelectQuery query = new SelectQuery();
    query.QueryString = strQuery;
    ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
    ManagementObjectCollection queryCollection = searcher.Get();
    foreach (ManagementObject mngmntObj in queryCollection)
    {
        DataRow dr = dtProcessor.NewRow();
        dr["CAPTION"] = mngmntObj["CAPTION"];
        dr["L2CACHESIZE"] = mngmntObj["L2CACHESIZE"];
        dr["L3CACHESIZE"] = mngmntObj["L3CACHESIZE"];
        dtProcessor.Rows.Add(dr);

    }
} 
```

这在我的 Windows Server 2008R2 机器上运行良好，但相同的代码给了我例外`System.Management.ManagementException`->`Invalid Query`因为`L3CACHESIZE`在 XP 中不存在，如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx)所述。通过读取存在的值来处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:19:20.900

如果要检查 wmi 属性是否存在，可以使用该[`ManagementBaseObject.Properties`](http://msdn.microsoft.com/en-us/library/system.management.managementbaseobject.properties.aspx)属性并遍历集合。

尝试这样的事情

```
static void Main(string[] args)
{
    string strQuery = "SELECT * FROM WIN32_PROCESSOR";
    string strIPAddress = "XXX.XXX.X.XXX";
    DataTable dtProcessor = new DataTable();
    dtProcessor.Columns.Add("CAPTION");
    dtProcessor.Columns.Add("L2CACHESIZE");
    dtProcessor.Columns.Add("L3CACHESIZE");            

    ManagementScope scope = new ManagementScope(@"\\" + strIPAddress + @"\root\cimv2");
    SelectQuery query = new SelectQuery();
    query.QueryString = strQuery;
    ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
    ManagementObjectCollection queryCollection = searcher.Get();
    List<string> properties = new List<string>();
    foreach (ManagementObject mngmntObj in queryCollection)
    {

       if (properties.Count==0)
       {
         foreach (PropertyData property in mngmntObj.Properties)
         properties.Add(property.Name);
       }

        DataRow dr = dtProcessor.NewRow();
        dr["CAPTION"] = mngmntObj["CAPTION"];
        dr["L2CACHESIZE"] = mngmntObj["L2CACHESIZE"];
        if (properties.Contains("L3CACHESIZE", StringComparer.OrdinalIgnoreCase))
        {
        dr["L3CACHESIZE"] = mngmntObj["L3CACHESIZE"];
        }
        dtProcessor.Rows.Add(dr);

    }
} 
```

同样对于这种特殊情况，如果您想获取与内存缓存相关的信息，请尝试[Win32_CacheMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394080%28v=vs.85%29.aspx)类

# php - PHP/Javascript 验证计算

> ID：15874881
> 
> 赞同：4
> 
> 时间：2013-04-08T08:48:02.840
> 
> 标签：php, javascript

我以前遇到过这个问题并希望再次这样做：我想在 javascript 和 PHP 中运行小计计算。我可能想在某个时候更改计算。

*   它需要在 javascript 中运行以最大限度地提高计算速度，以便用户知道会发生什么。
*   它需要在 PHP 中运行，这样我才能获得恶意用户无法干预的有效小计。

像这样：

*   如果我只在客户端（在 javascript 中）运行计算，恶意用户可能会破解 javascript 并更改小计。
*   如果我只在服务器端（在 PHP 中）运行计算，则必须等待 AJAX 调用让用户获得更新的小计。

所以我想在双方都进行计算。我看到这样做的唯一方法是在 PHP 中对计算进行编程并在单独的 javascript 中对计算进行编程。

我的**问题**是，人们会推荐我使用什么模式、技术或技术在服务器端创建计算并使其在发送到客户端时与 javascript 兼容？

例如，我的一个想法是一个用于计算的 PHP 数组，它被转换为 PHP 代码和 javascript 代码，例如：

```
array(
    array(type => "operand", "name" => "variable_A"),
    array(type => "operator", "name" => "multiply"),
    array(type => "operand", "name" => "variable_B"),
) 
```

这可能会转换为 PHP：

```
return $variable_A * $variable_B; 
```

并进入Javascript：

```
return variable_A * variable_B; 
```

这是一个示例操作模式。我不知道如果它们存在真实的会是什么样子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:57:13.440

[阿贾克斯](http://www.standards-schmandards.com/exhibits/ajax/)？

您可以传递使用 javascript 输入的所有变量并保留基于进程服务器。

或者我误解了你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:23:56.423

我对你的问题的看法就像你描述的那样：做双重计算。我相信这就是“大男孩”的做法。

示例：将两个数字相加。所以你有这样的代码：

HTML 片段：

```
<form method="post" action="/add.php">
<input id="firstOperand" name="firstOperand" placeholder="First operand"/>
<input id="secondOperand" name="firstOperand" placeholder="Second operand"/>
<input type="submit" onclick="doCalculation()" value="Add"/>
</form>
<div id="result" /> 
```

你的 JS 可能看起来像：

```
function doCalculation() {
  var first = parseInt(document.getElementById('firstOperand').value);
  var second = parseInt(document.getElementById('secondOperand').value);

  var result = first + second;
  // the minimum amount of error checking
  if isNan('result') return false;
  document.getElementById('result').innerHTML = result;

  // Now use some framework (like jQuery) to make an Ajax call and pass the result to callback.
  Framework.Ajax('/add.php?format=json', 'POST', {first: first, second: second}, callback);
  return false;
}

function callback(response) b
  var res = response.json.result;
  var resultEl = document.getElementById('result');
  var errorEl = document.getElementById('error');
  // if our result is not correct, we want to update the user on it
  if (res != parseInt(resultEl.innerHTML)) {
    Framework.removeClass(errorEl, 'hidden');
  }
  document.getElementById('result').innerHTML = res;
} 
```

当然，您的 PHP 结果页面 (add.php) 将返回带有结果的 json。这里的附加值是您还可以返回纯 HTML 结果（例如禁用 js 时）。

您的回调还可以检查返回的结果中是否存在错误并显示该错误消息。或者，如果结果超时，则显示“结果”未保存的通知。但这超出了问题的范围，我猜（至少，超出了答案的范围）。

注意：这只是我头脑中的代码，未经测试，直接写在答案框中，可能有几件事应该做得更好。

# android - android应用程序的奇怪行为

> ID：15874882
> 
> 赞同：0
> 
> 时间：2013-04-08T08:48:05.043
> 
> 标签：android, exception-handling

我正在使用android技术开发一个大型项目，有时我在小型设备上遇到一些异常，例如（内存不足错误）发生异常时我所做的是重新打开应用程序

它使先前的进程保持打开状态并使用新的应用程序实例打开一个新进程会发生什么

我试图让 finish() 杀死进程 System.exit

关闭应用程序并重新打开它，但对我没有任何作用

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:59:25.657

您必须注意的第一件事是堆大小。您可以跟踪运行应用程序时消耗了多少内存。在 DDMS 透视图中，有一个堆选项卡，它将为您提供有关运行应用程序时消耗了多少内存的信息。你正在测试什么版本的android？Android Os 将为每个应用程序分配一些内存来运行。在 android 2.2 中，16mb 将分配给一个应用程序。版本 2.3 为应用程序分配 24Mb，Android 3.0 分配 42Mb。尝试在不同版本的android上进行测试，您将了解..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:08:59.420

是的，这就是问题。我最近遇到了类似的问题，然后我调整了我的大小`images`，然后我的问题就解决了。尝试找出一种方法来减少你从中加载`size of`的那个。`images``sever side` `back-end`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:52:28.530

当设备中的 RAM 被充分利用时会发生内存不足，系统将抛出此错误并终止/重新启动进程。您需要找到使用最多内存的适当位置并正确处理内存。内存不足通常是由于位图/图像处理不佳而发生的。检查处理 Bitmaps/ImageViews/PNG 等的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:53:36.577

Android 默认堆大小几乎适用于每个重负载作业。跟踪您的代码并找到代码中占用内存的部分并尝试优化它们。为此，请在 Eclipse 的 DDMS 视图中使用 HEAP 选项卡。

# java - 调用 Java 泛型方法

> ID：15874885
> 
> 赞同：28
> 
> 时间：2013-04-08T08:48:22.373
> 
> 标签：java, generics, type-erasure, generic-method

我正在研究 Java 泛型特性，但不知道如何解释以下`main`方法中的第三行：

```
public class Example4 {
    public static void main(final String[] args) {
        System.out.println(Util.<String>compare("a", "b"));
        System.out.println(Util.<String>compare(new String(""), new Long(1)));
        System.out.println(Util.compare(new String(""), new Long(1)));
    }
}

class Util {
    public static <T> boolean compare(T t1, T t2) {
        return t1.equals(t2);
    }
} 
```

第一行编译、运行并返回（如预期的那样）`false`。

第二行没有按预期编译，因为我明确混合`String`和`Long`.

第三行编译、运行并返回 false，但我不确定它是如何工作的：编译器/JVM 是否将参数类型实例`T`化为`Object`？（另外，有没有办法获得这种声明的`T`运行时类型？）

谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T08:52:13.563

`String`和的共享继承类型`Long`是`Object`。

当您运行此函数时，`Util.<String>compare(`编译器希望找到两个字符串输入，并在没有找到时给出错误。但是，不运行它会`<String>`导致使用最接近的共享继承类型——在这种情况下，`Object`.

因此，当`compare`接受`t1`and时`t2`，它们被转换为`Object`，并且代码运行良好。

要在运行时获取实际类型，您可以使用与任何其他对象相同的技术：`getClass()`继承自`Object`类。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-15T07:54:40.920

答案似乎超出了@Telthien 和@newacct 的答案。我很想自己“看到”以下之间的区别：

```
System.out.println(Util.<String>compare("a", "b")); 
```

明确键入，并且：

```
System.out.println(Util.compare(new String(""), new Long(1))); 
```

带有隐式类型。

我使用前两条线的变体进行了几次实验。这些实验表明，在没有使用[匿名/本地类技巧](https://stackoverflow.com/questions/1901164/get-type-of-a-generic-parameter-in-java-with-reflection/15999255#15999255)的情况下，编译器会在编译期间检查类型，但生成的字节码仅引用`Object`，即使在第一行的情况下也是如此。

下面的一段代码表明，类型转换可以一直安全地执行，`Object`甚至在显式类型参数的情况下也是如此`<String>`。

```
public final class Example44 {
    public static void main(final String[] args) {
        System.out.println(new Util44<String>().compare("a", "b"));
        System.out.println(new Util44().compare(new String(""), new Long(1)));
    }
}

final class Util44<T> {
    private T aT;
    public boolean compare(T t1, T t2) {
        System.out.println(this.aT);
        // I was expecting the second and third assignments to fail
        // with the first invocation because T is explicitly a String
        // and then to work with the second invocation because I use
        // a raw type and the compiler must infer a common type for T.
        // Actually, all these assignments succeed with both invocation. 
        this.aT = (T) new String("z");
        this.aT = (T) new Long(0);
        this.aT = (T) new Object();
        return t1.equals(t2);
    }
} 
```

该`main`方法的字节码如下所示：

```
 // Method descriptor #15 ([Ljava/lang/String;)V
  // Stack: 7, Locals: 1
  public static void main(java.lang.String[] args);
     0  getstatic java.lang.System.out : java.io.PrintStream [16]
     3  new ca.polymtl.ptidej.generics.java.Util44 [22]
     6  dup
     7  invokespecial ca.polymtl.ptidej.generics.java.Util44() [24]
    10  ldc <String "a"> [25]
    12  ldc <String "b"> [27]
    14  invokevirtual ca.polymtl.ptidej.generics.java.Util44.compare(java.lang.Object, java.lang.Object) : boolean [29]
    17  invokevirtual java.io.PrintStream.println(boolean) : void [33]
    20  getstatic java.lang.System.out : java.io.PrintStream [16]
    23  new ca.polymtl.ptidej.generics.java.Util44 [22]
    26  dup
    27  invokespecial ca.polymtl.ptidej.generics.java.Util44() [24]
    30  new java.lang.String [39]
    33  dup
    34  ldc <String ""> [41]
    36  invokespecial java.lang.String(java.lang.String) [43]
    39  new java.lang.Long [46]
    42  dup
    43  lconst_1
    44  invokespecial java.lang.Long(long) [48]
    47  invokevirtual ca.polymtl.ptidej.generics.java.Util44.compare(java.lang.Object, java.lang.Object) : boolean [29]
    50  invokevirtual java.io.PrintStream.println(boolean) : void [33]
    53  return
      Line numbers:
        [pc: 0, line: 24]
        [pc: 20, line: 25]
        [pc: 53, line: 26]
      Local variable table:
        [pc: 0, pc: 54] local: args index: 0 type: java.lang.String[] 
```

[正如另一个问题/答案中](https://stackoverflow.com/questions/1998544/method-has-the-same-erasure-as-another-method-in-type)`Object`所解释的那样，所有调用总是对具有形式参数类型的方法实际上是有道理的。总而言之，编译器总是使用生成的字节码，不管是否存在显式类型参数（第一行）或隐式类型参数，但对象可能具有不同于.`Object``Object`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T20:27:48.773

是的，`Object`这是一个`T`允许它编译的选择。从概念上讲，编译器*推断*`T`. 它特别推断出什么并不重要——只要它可以推断出*某种类型*适用于`T`，那么它就会编译。推断的类型是什么并不重要，因为它对编译后的代码没有影响。

# c# - 使用 C# 检查键值是否存在

> ID：15874886
> 
> 赞同：3
> 
> 时间：2013-04-08T08:48:22.717
> 
> 标签：c#, visual-studio

我有一把钥匙

> “HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Uninstall\{4CHJHSDJHSJHDJS-SDGSJAD}”

在我的注册表中。使用

```
Registry.GetValue("keyname", "valuename", "default value") 
```

我可以检索它的任何值。但我需要检查注册表中是否存在“{4CHJHSDJHSJHDJS-SDGSJAD}”。谁能建议我应该使用什么支票来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T08:51:58.987

使用注册表项，您可以尝试使用该`OpenSubKey`方法获取它。如果返回值为`null`，则该键不存在。我在这里谈论的是键，而不是值。

在您的示例中，这将归结为：

```
var key = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\Uninstall\{4CHJHSDJHSJHDJS-SDGSJAD}");
if (key == null)
{
    // Key does not exist
}
else
{
    // Key exists
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T08:53:39.397

你试过这个

```
 using Microsoft.Win32;
          RegistryKey myregistry = Registry.CurrentUser.OpenSubKey("MyKey");
          if (myregistry != null)
          {
           string Value=myregistry.GetValue("ID").ToString();
          } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:54:48.307

`Registry.CurrentUser`您可以使用然后查询注册表项`OpenSubKey`。

```
RegistryKey key = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\Uninstall\{4CHJHSDJHSJHDJS-SDGSJAD}");

if (key != null)
{
    // key exists
}
else
{
    // key does not exists
} 
```

# javascript - 如何使用 Ajax 通过 Bootstrap Modal 提交表单

> ID：15874889
> 
> 赞同：1
> 
> 时间：2013-04-08T08:48:34.300
> 
> 标签：javascript, html, codeigniter, twitter-bootstrap

我会尽量简洁，我是引导程序和高级 javascript 的新手，基本上我已经使用引导程序模式在用户面前加载表单以收集和保存数据库中的数据。我的问题是你将如何使用 ajax 来做到这一点，因为我还有其他模式也会有不同的形式，我不想一次又一次地处理整个页面。PS我正在codeigniter中制作这个应用程序

这是模态内部的形式

```
 <section id="launch" class="modal hide fade" style="width: 800px; left: 500px;">
              <header class="modal-header" style="height: 7px; background: none repeat scroll 0% 0% rgb(87, 164, 210);">
                <h4 style="margin-bottom: 0px; margin-top: -5px; text-align: center; color: white;">Unit Details</h4>
                <button type="button" class="close" data-dismiss="modal" style="margin-top: -20px;">&times</button>
              </header>
 <?php echo form_open('setupnewblock/registerNewBlock'); ?>
<div class="modal-body" style="padding-top: 0px; padding-left: 0px; " >
 <div style="position: relative; left: 43px; margin-top: 41px; margin-left: 0px;">
                <span>Address 1</span>
                <input  type="text" placeHolder="" name="address1" style="width: 219px; height: 17px; margin-left: 20px; margin-top: 3px;" value="<?php echo set_value('address1'); ?>"/>
                <br />
                <span>Address 2</span>
                <input  type="text" placeHolder="" name="address2" style="width: 219px; height: 17px; margin-left:20px; margin-top: 3px;" value="<?php echo set_value('address2'); ?>"/>
                <br />
                <span>Address 3</span>
                <input  type="text" placeHolder="" name="address3" style="width: 219px; height: 17px; margin-left:20px; margin-top: 3px;" value="<?php echo set_value('address3'); ?>"/>
                <br />
                <br />
              </div>
 <footer class="modal-footer" style="margin-top: 475px;">
          <input type="submit" value="Save" name="save" class="btn btn-primary" style="margin-top: 2px;  height: 27px; width: 89px;" data-dismiss="modal"></input>
          <?php echo form_close(); ?>
        </footer>
      </section> 
```

我想使用 ajax 提交这个表单

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-05T05:43:42.250

我有同样的问题，但是当我尝试这个[要点](https://gist.github.com/havvg/3226804)时，一切都做得很好。

你可以试试这段代码：

```
$(document).ready( function() {
    $('.modal form').on('submit', function(event) {
        event.preventDefault()
        $.post( $(this).attr('action'), $(this).serialize(), function(data) {
            // just try to see the outputs
            console.log(data)
            if(data.return===true) {
                // Success code here
            } else {
                // Error code here
            }
        }, 'json')
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:38:07.597

如果您想非常简单地做到这一点，这应该适合您：

```
$('input[name=save]').click(function(e) {
    e.preventDefault();

    $.post("setupnewblock/registerNewBlock", {form: $("#launch form").serialize()},  
        function(data) {
        // callback   
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:10:26.263

看看 codeigniter[用户指南](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)：

所以你的代码应该是，

```
$attributes = array('class' => 'myform', 'id' => 'myform');
    echo form_open('setupnewblock/registerNewBlock', $attributes); 
```

之后，您必须将表单的提交功能绑定到 jquery 功能，例如

```
$(document).ready(function() {
    $("#myform").submit(function() {

        $.ajax(
                {
                    type: 'POST',
                    url: 'your url to php file',
                    data: {}, //your form datas to post          
                    success: function(response)
                    {
                        alert(response);

                    },
                    error: function()
                    {
                        alert("Failure");
                    }
                });

    });
}); 
```

# python - 在 Django 中预取有限数量的相关对象

> ID：15874891
> 
> 赞同：1
> 
> 时间：2013-04-08T08:48:42.863
> 
> 标签：python, database, django, orm

我想为每个帖子显示 5 个最新评论的帖子列表。如何使用最少数量的数据库查询来做到这一点？

```
Post.objects.filter(...).prefetch_related('comment_set') 
```

检索所有评论，而我只需要其中的几个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:00:29.960

我会去两个查询。首先获取帖子：

```
posts = list(Post.objects.filter(...)) 
```

现在运行原始 SQL 查询`UNION`（注意：为简单起见省略了排序）：

```
sql = "SELECT * FROM comments WHERE post_id=%s LIMIT 5"
query = []
for post in posts:
    query.append( sql % post.id )
query = " UNION ".join(query) 
```

并运行它：

```
comments = Comments.objects.raw(query) 
```

之后，您可以循环评论并在 Python 端对它们进行分组。

我没试过，但看起来还可以。

对于您的问题，还有其他可能的解决方案（可能只需要一个查询），看看这个：

[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

# c# - 如何将每个位从一个字节中分离出来？

> ID：15874893
> 
> 赞同：12
> 
> 时间：2013-04-08T08:48:54.507
> 
> 标签：c#

我对 C# 非常陌生（通常是 C） 我得到一个从外部源返回的字节值，它代表 IO 设备端口上 8 个输入引脚的状态，所以我得到一个值 0 -255 表示端口上存在的二进制模式。

我怎样才能去掉各个位并将它们设置为布尔变量，所以做这样的事情：

```
if (inputBuffer[1] == 1)
{
     IO.Input0 = true;
     IO.Input1 = false;
     IO.Input2 = false;
     IO.Input3 = false;
     IO.Input4 = false;
     IO.Input5 = false;
     IO.Input6 = false;
     IO.Input7 = false;
} 
```

我可能过度解释了我想要实现的目标，但认为这给出了最好的例子，虽然非常不切实际，但我怎样才能更好地实现这一点，以基于 0-255 的字节值设置变量。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T08:51:24.237

使用按位与 ( `&`)。假设`Input0`代表最低有效位：

```
IO.Input0 = (inputBuffer & 0x01) == 0x01;
IO.Input1 = (inputBuffer & 0x02) == 0x02;
IO.Input2 = (inputBuffer & 0x04) == 0x04;
IO.Input3 = (inputBuffer & 0x08) == 0x08;
IO.Input4 = (inputBuffer & 0x10) == 0x10;
IO.Input5 = (inputBuffer & 0x20) == 0x20;
IO.Input6 = (inputBuffer & 0x40) == 0x40;
IO.Input7 = (inputBuffer & 0x80) == 0x80; 
```

* * *

您还可以实现如下扩展方法：

```
public static bool IsBitSet(this byte b, int bit)
{
    if(bit < 0 || bit > 7)
        throw new ArgumentOutOfRangeException("bit must be between 0 and 7");

    byte bitToCheck = (byte)(0x01 << bit);

    return (b & bitToCheck) == bitToCheck;
} 
```

然后你可以这样称呼：

```
IO.Input4 = inputBuffer.IsBitSet(4); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T08:51:47.990

使用位掩码和`&`-operator 来解决这个问题

```
byte b = 100;

if(b&1 == 1) { } //bit 1 is set
if(b&2 == 2) { } //bit 2 is set
if(b&4 == 4) { } //bit 3 is set
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T08:57:34.010

我认为自学课程会有所帮助。类可以包含 8 位，构造函数需要一个字节。在构造函数中，您可以计算单个位。

```
public class myByte
{
    bool    Input0 = false;
    bool    Input1 = false;
    bool    Input2 = false;
    bool    Input3 = false;
    bool    Input4 = false;
    bool    Input5 = false;
    bool    Input6 = false;
    bool    Input7 = false;        

    public myByte(byte b)
    {
        //written by Ic.
        Input0 = b & 0x01 == 0x01;
        Input1 = b & 0x02 == 0x02;
        Input2 = b & 0x04 == 0x04;
        Input3 = b & 0x08 == 0x08;
        Input4 = b & 0x10 == 0x10;
        Input5 = b & 0x20 == 0x20;
        Input6 = b & 0x40 == 0x40;
        Input7 = b & 0x80 == 0x80;
    }
    ... //getter setter ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T08:58:50.200

你可以这样做。

```
int x= inputBuffer[1];

bit1 = ((x>>7)&1==1);
bit2 = ((x>>6)&1==1);
bit3 = ((x>>5)&1==1);
bit4 = ((x>>4)&1==1);
bit5 = ((x>>3)&1==1);
bit6 = ((x>>2)&1==1);
bit7 = ((x>>1)&1==1);
bit8 = (x&1==1); 
```

要从 11101110 值中获取第一个位，您需要先右移 7 次，然后用 1 进行 AND 运算将告诉您该值是 1 还是 0，并且相同的解决方案也适用于其他位。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-08T09:00:48.783

如果数据以字节形式提供给您并且每个位都已被屏蔽，那么我将保持原样。将它们转换为另一种类型是不必要的，这将是一项无益的额外工作。要获得正确的位，只需使用位掩码模式

```
private bool GetMaskedBit(var inputBuffer , int mask)
{
    return ((inputBuffer & mask) != 0);
} 
```

这样您就可以解析缓冲区和所需的位，这将返回该位是否已设置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-08T09:16:11.590

你可以使用`BitArray`类。

```
var bitArray = new BitArray(inputBuffer);
IO.Input1 = bitArray[byteIndex * 8 + 1]; 
```

或者

```
var bitArray = new BitArray(new byte[] { inputBuffer[1] });
IO.Input1 = bitArray[1]; 
```

您还可以将其作为布尔值的集合进行迭代，并对整个集合执行按位运算。

它显然不如这里提供的其他选项（分配成本）那么高效，但它确实为位计算提供了一个非常简洁的 API。

# php - 无法刷新 HTML 页面

> ID：15874894
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:48:55.890
> 
> 标签：php, jquery, html, jquery-ui, jquery-mobile

我有个问题。我用 jQuery、jQuery-ui、jQuery mobile 和 kineticjs 制作了一个 HTML 和 PHP 页面。切换到另一个页面时，不要刷新整个页面。我也尝试使用`<meta http-equiv="refresh" content="URL=aa.php">`但没有用。在该页面中，我还使用 php 从该 PHP 中获取结果。这是我的 php 页面中的代码：

```
<?php
    if ( isset($_POST['address']) && isset($_POST['prefix']) && isset($_POST['levels']) ) {
        require_once 'convert.php';
        $network = new Network($ip, $prefix, $levels);
        print_html($network);
        exit();
    }
?>
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="refresh" content="URL=aa.php">
        <title>aa</title>
        <link rel="stylesheet" href="css/jquery-ui.css" />
        <link rel="stylesheet" href="css/jquery.mobile-1.3.0.css" />
        <script src="js/jquery-1.9.1.js"></script>
        <script src="js/jquery.mobile-1.3.0.js"></script>
        <script src="js/jquery-ui.js"></script>
        <script src="js/kinetic-v4.3.2-beta.js"></script>
    </head>
    <body>
        <div data-role="page">
            <div data-role="header">
                <h3>aa</h3>
            </div>
            <div data-role="content">
                <h3>aa</h3>
                <br />
                <div>
                    <label for="address">Address:</label>
                    <input type="text" id="address">
                    <select id="prefix">
                        <?php for ( $i = 49; $i < 64; $i++ ) : ?>
                        <option value="<?php echo $i; ?>">/<?php echo $i; ?></option>
                        <?php endfor; ?>
                    </select>
                    <label for="subnet">Total Subnets: </label>
                    <input type="text" id="subnets">
                    <button class="btn" id="build"> Build It </button>
                </div>

                <div id="network"></div>
            </div>
        </div>

        <script src="js/jquery.js"></script>    
        <script type="text/javascript">
            $(function(){
                $("#build").click(function(){
                    var subnets = parseInt( $("#subnets").val() );
                    var address = $("#address").val();
                    var prefix = $("#prefix").val();
                    var levels = $("#subnets").val();
                    $.post("aa.php", {address:address, prefix:prefix, levels:levels}, function(response){
                        $("#network").html(response);
                        $("#network > .branch").show();
                        $("#network .open-children").click(function(){
                            $(this).text('-');
                            $(this).parent().children(".branch").toggle();
                            return false;
                        });
                    });
                });
            });
        </script>
    </body>
</html> 
```

问题是否来自太多的javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:56:37.683

您可以使用此 javascript 代码刷新您的页面：

```
document.location.reload(); 
```

或根据需要更改您的位置：

```
document.location = "http://google.com"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:52:02.733

元刷新应该这样工作：

```
<meta http-equiv="refresh" content="0;url=aa.php"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:54:33.360

你可以在没有 JS 的情况下使用它。

```
<noscript><meta http-equiv="refresh" content="0;URL='?nojs=1'"></noscript> 
```

检查控制台中是否有任何错误并将其删除。此外，您应该检测您是否拥有移动版或 PC 版浏览器，并包括 jquery-1.9.1.js 或 jquery.mobile-1.3.0.js

你也可以使用

窗口位置

使用 setInterval 或 setTimeout 它会做同样的事情。但是你不能有任何 JS 错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:02:39.293

尝试这个，

```
<meta http-equiv="refresh" content="0;url=aa.php"> 
```

# javascript - 在 jsfiddle 中的外部资源之前加载用户函数

> ID：15874898
> 
> 赞同：0
> 
> 时间：2013-04-08T08:49:23.143
> 
> 标签：javascript, jsfiddle

我正在为我的客户开发一种新的手风琴。在我的本地机器上一切正常，但是当在 jsfiddle 中上传相同的东西时我遇到了问题。

我发现问题是因为用户定义的函数是在我添加的外部 js 文件之后加载的。

这是我的小提琴。[http://jsfiddle.net/imsabarinath/rpq2w/12/](http://jsfiddle.net/imsabarinath/rpq2w/12/)

在此我添加了一个用户功能`detectBrowserClass`。我还通过外部资源选项卡添加了 8 个外部 js 文件和 css 文件。但是当我运行代码时，似乎只有在加载了所有外部资源之后才加载用户函数。我用 firebug 进行了检查，它清楚地显示了在外部资源之后加载了用户函数

![在此处输入图像描述](https://i.stack.imgur.com/D9a08.png)

有什么方法可以`detectBrowserClass`在加载 jsfiddle 中的任何外部资源之前加载用户函数；意味着在所有脚本标签之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:52:14.957

除了使用“外部资源”选项，您可以将`script`标签放在 HTML 字段中，即将它们添加到正文中。

# facebook-fql - 用于检索页面状态数的简单 FQL 的访问令牌

> ID：15874899
> 
> 赞同：0
> 
> 时间：2013-04-08T08:49:25.320
> 
> 标签：facebook-fql, facebook-php-sdk, access-token, facebook-access-token

我正在使用最新的 Facebook PHP SDK 做一个非常简单的 PHP 应用程序，旨在显示我的页面的状态数。

为此，我创建了一个应用程序来拥有应用程序 ID 和应用程序机密，但在我有点迷路之后。

我以为我需要一个应用程序秘密令牌，所以我首先尝试这样：

```
<?php
public function getFacebookPosts() {
    require __DIR__ . '/libs/facebook-sdk/facebook.php';

    $appId = 'myID';
    $appSecret = 'mySecret';

    $facebook = new Facebook(array(
        'appId'  => $appId,
        'secret' => $appSecret,
    ));

    $token = $this->getFacebookAppToken($appId, $appSecret);

    try {
        $jinnove = $facebook->api('/my.page');
        $fql = '/fql?q=SELECT+status_id+FROM+status+WHERE+uid=' . $jinnove['id'] . '&' . $token;
        var_dump($facebook->api($fql));
    } catch(FacebookApiException $e) {
        var_dump($fql, $e);
    }
}

/**
 * Function to Get Access Token from Facebook
 * @param $appId
 * @param $appSecret
 * @return string
 */
protected function getFacebookAppToken($appId, $appSecret)
{
    $args = array(
        'grant_type' => 'client_credentials',
        'client_id' => $appId,
        'client_secret' => $appSecret
    );

    $ch = curl_init();
    $url = 'https://graph.facebook.com/oauth/access_token';
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    $data = curl_exec($ch);

    return $data;
} 
```

但它返回错误 102 并显示以下消息：“请求此资源需要用户访问令牌。”。

然后我在 IRC 上询问，有人告诉我我需要一个用户访问令牌才能做到这一点。

据我所知，只有当用户明确登录 Facebook 以授权此应用并有时更新令牌时，才能生成用户访问令牌。

真的吗？有没有办法使用不暗示要登录用户的令牌？基本上任何人都可以查看这个数量的状态，即使是没有 Facebook 帐户并且我根本不需要 UI 对话框的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:15:23.787

出于某种原因，Facebook 决定查询状态只能由用户完成。

您可以通过查询表来解决这个问题，并且只返回带有状态更新的`stream`帖子：`type = 46`

```
SELECT post_id FROM stream WHERE source_id= YOUR_PAGE_ID AND type = 46 LIMIT 100 
```

该`stream`表有很多限制。即使`LIMIT`页面已经存在一段时间，您也可能无法获得所有状态更新。

您还可以通过以下更改将 API 调用的数量从 3 减少到 1 来加速您的程序：

*   如果您想从其用户名中获取页面的 ID，`= YOUR_PAGE_ID`请将上述查询中的替换为`IN (SELECT id FROM profile WHERE username = 'YOUR_PAGE_USERNAME')`
*   您不需要“getFacebookAppToken()”函数。如果您没有经过身份验证的用户，PHP SDK 将自动为您获取应用访问令牌。

# html - -moz-document 元素 CSS 未呈现

> ID：15874906
> 
> 赞同：0
> 
> 时间：2013-04-08T08:49:46.117
> 
> 标签：html, css, firefox

我有这个用于 Firefox 浏览器的特定 CSS 代码。

```
@-moz-document url-prefix(){
.bill-tab-fixed-width{
    width:104.5px;
 }
} 
```

但是 Firefox 不会渲染这个值。而是呈现我为其他浏览器定义的样式！当我检查元素时，我定义的值被删除。我做错了吗？请帮忙！

火狐版本 19.0.2

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T08:54:37.183

它基本上被其他规则覆盖。要么将此块移动到样式表中的其他规则下方，要么添加`!important`以强制它使用此样式。

```
@-moz-document url-prefix(){
.bill-tab-fixed-width{
    width:104.5px !important;
 }
} 
```

**注意：**将像素值定义为小数可能不是一个好主意。屏幕不可能使用半个像素，浏览器的圆角可能会略有不同。

# ios - 移动 Safari 上的固定位置和 iFrame

> ID：15874910
> 
> 赞同：9
> 
> 时间：2013-04-08T08:49:58.567
> 
> 标签：ios, mobile, iframe, safari, css-position

我已经能够得到 position:fixed 在 iF​​rame 外的 div 上完美地工作，但是一旦它被加载到 iFrame 中，position:fixed 就不再起作用了。

这是一个已知问题（我无法找到有关该主题的任何内容）还是我错过了重要的 CSS 或元视口信息？有没有办法解决这个问题？

谢谢！

# android - 如何从 Http 下载相同的 Url 图片并且不重复 httpRequest 和异步执行？

> ID：15874917
> 
> 赞同：0
> 
> 时间：2013-04-08T08:50:18.133
> 
> 标签：android

我的应用程序中有一个 ListView，ListView 的项目将显示图像。所以我需要异步加载器从 Http 加载图像。

现在我用谷歌的Bitmapfun，但你知道，它很复杂，至少我是这么认为的。

所以我想重新编码，遇到一个问题。

> 如何从 Http 下载相同的 Url 图片并且不重复 httpRequest 和异步执行？

因为在ListView的item中，可能显示的是同一张图片。在Bitmapfun，google“同步”了进程，所以下载图片无法并发。</p>

帮我！想一想T_T

.........对不起，英语不好。

一个 ListView，例如，有 5 个项目。每个项目都有一个 ImageView 来显示图像。我使用 AsyncTask 发出 Http 请求，下载它，放入缓存，并显示它。

可能是五个图像是

"hxxp://xxx.com/1.jpg",

"hxxp://xxx.com/2.jpg",

"hxxp://xxx.com/3.jpg",

"hxxp://xxx.com/1.jpg",

"hxxp://xxx.com/1.jpg"

所以这三个Http请求是一样的。但是 AsyncTask 是同时工作的。所以另外两个Http请求被重复了。

我要解决的问题是“如何为 AsyncTask 下载图像但如果相同的 Url 只下载一次？”.....

编辑： 使用惰性列表：

```
 private Bitmap getBitmap(String url) 
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null){
        Log.d("ImageLoader", " From Cache" + url);
        return b;
    }
    //from web
    try {
        Log.d("ImageLoader", " Begin Downloading" + url);
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        conn.disconnect();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Throwable ex){
       ex.printStackTrace();
       if(ex instanceof OutOfMemoryError)
           memoryCache.clear();
       return null;
    }
} 
```

初始化 ListView 和日志是：

> 04-09 10:44:31.900: D/ImageLoader(8578): 开始下载 hxxps://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:44 :31.910: D/ImageLoader(8578): 开始下载 hxxps://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:44:31.910: D/ImageLoader (8578): 开始下载 hxxps://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:44:31.910: D/ImageLoader(8578): 开始下载hxxps://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:44:31.930: D/ImageLoader(8578): 开始下载 hxxps://lh6.谷歌用户内容。com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:44:33.090：I/MemoryCache(8578)：缓存大小=44032 长度=1 04-09 10:44:33.090： D/ImageLoader(8578)：开始下载 hxxps://lh6.googleusercontent.com/-UBmLbPELvoQ/URqucCdv0kI/AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpg 04-09 10:44:33.140: I/MemoryCache(8578): 缓存大小=44032 长度=1 04-09 10:44:33.140: D/ImageLoader(8578): 开始下载 hxxps://lh6.googleusercontent.com/-UBmLbPELvoQ/URqucCdv0kI/AAAAAAAAAbs/IdNhr2VQoQs /s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpgcom/-UBmLbPELvoQ/URqucCdv0kI/AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpg 04-09 10:44:33.140: I/MemoryCache(8578): 缓存大小=44032 长度=1 04 10:44:33.140: D/ImageLoader(8578): 开始下载 hxxps://lh6.googleusercontent.com/-UBmLbPELvoQ/URqucCdv0kI/AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpgcom/-UBmLbPELvoQ/URqucCdv0kI/AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpg 04-09 10:44:33.140: I/MemoryCache(8578): 缓存大小=44032 长度=1 04 10:44:33.140: D/ImageLoader(8578): 开始下载 hxxps://lh6.googleusercontent.com/-UBmLbPELvoQ/URqucCdv0kI/AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpg

使用[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

```
if (bmp != null && !bmp.isRecycled()) {
        Log.d("ImageLoader", " From Cache " + uri);
        if (configuration.loggingEnabled)
            L.i(LOG_LOAD_IMAGE_FROM_MEMORY_CACHE, memoryCacheKey);

        if (options.shouldPostProcess()) {
            ImageLoadingInfo imageLoadingInfo = new ImageLoadingInfo(uri, imageView, targetSize, options, listener,
                    engine.getLockForUri(uri));
            ProcessAndDisplayImageTask displayTask = new ProcessAndDisplayImageTask(engine, bmp, imageLoadingInfo, options.getHandler());
            engine.submit(displayTask);
        } else {
            options.getDisplayer().display(bmp, imageView);
            listener.onLoadingComplete(uri, imageView, bmp);
        }
    } else {
        Log.d("ImageLoader", " Begin Downloading " + uri);
        if (options.shouldShowStubImage()) {
            imageView.setImageResource(options.getStubImage());
        } else {
            if (options.isResetViewBeforeLoading()) {
                imageView.setImageBitmap(null);
            }
        }

        ImageLoadingInfo imageLoadingInfo = new ImageLoadingInfo(uri, imageView, targetSize, options, listener,
                engine.getLockForUri(uri));
        LoadAndDisplayImageTask displayTask = new LoadAndDisplayImageTask(engine, imageLoadingInfo, options.getHandler());
        engine.submit(displayTask);
    } 
```

初始化 ListView 和日志是：

> 04-09 10:23:24.590: D/ImageLoader(7336): 开始下载 hxxps://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:23 :24.600: D/ImageLoader(7336): 开始下载 hxxps://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:23:24.600: D/ImageLoader (7336): 开始下载 hxxps://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:23:24.610: D/ImageLoader(7336): 开始下载hxxps://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:23:24.610: D/ImageLoader(7336): 开始下载 hxxps://lh6.谷歌用户内容。com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg 04-09 10:23:24.610：D/ImageLoader(7336)：开始下载 hxxps://lh6.googleusercontent.com/-UBmLbPELvoQ/URqucCdv0I /AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpg 04-09 10:23:24.610：D/ImageLoader(7336)：开始下载 hxxps://lh6.googleusercontent.com/-UBmLbPELvoQ/URqucCdv0Ik /AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpgcom/-UBmLbPELvoQ/URqucCdv0kI/AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpgcom/-UBmLbPELvoQ/URqucCdv0kI/AAAAAAAAAbs/IdNhr2VQoQs/s1024/Apre%2525CC%252580s%252520la%252520Pluie.jpg

所以 httpRequest 是 Repeat....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:33:16.830

您可以使用延迟加载或通用图像加载器

延迟列表是使用 url 从 sdcard 或 fomr 服务器延迟加载图像。这就像按需加载图像。

图像可以缓存到本地sd卡或手机内存。Url 被认为是关键。如果密钥存在于 sdcard 中，则显示来自 sd 卡的图像，否则通过从服务器下载显示图像并将其缓存到您选择的位置。可以设置缓存限制。您还可以选择自己的位置来缓存图像。缓存也可以清除。

而不是用户等待下载大图像然后显示惰性列表按需加载图像。由于图像区域缓存，您可以离线显示图像。

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。懒惰列表

在你的 getview

imageLoader.DisplayImage(imageurl, imageview); ImageLoader 显示方法

```
public void DisplayImage(String url, ImageView imageView) //url and imageview as parameters
{
imageViews.put(imageView, url);
Bitmap bitmap=memoryCache.get(url);   //get image from cache using url as key
if(bitmap!=null)         //if image exists
    imageView.setImageBitmap(bitmap);  //dispaly iamge
 else   //downlaod image and dispaly. add to cache.
 {
    queuePhoto(url, imageView);
    imageView.setImageResource(stub_id);
 } 
```

惰性列表的替代方法是通用图像加载器

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。它基于惰性列表（工作原理相同）。但它还有很多其他配置。我更喜欢使用*Universal Image Loader*，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

// Get singletone instance of ImageLoader
imageLoader = ImageLoader.getInstance();
// Create configuration for ImageLoader (all options are optional)
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
  options = new DisplayImageOptions.Builder()
.showStubImage(R.drawable.stub_id)//display stub image
.cacheInMemory()
.cacheOnDisc()
.displayer(new RoundedBitmapDisplayer(20))
 .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
 imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options 
```

您可以配置其他选项以满足您的需求。

与延迟加载/通用图像加载器一起，您可以查看持有者以实现平滑滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

编辑：

如您所见，图像显示两次（下载一次）。但是它只被缓存一次。下面的图片是图标。我在测试时没有正确缩放它。所以看起来很拉长。

![在此处输入图像描述](https://i.stack.imgur.com/mSTtI.png)

# wso2esb - WSO2 ESB：如何通过 HTTP 下载文件？

> ID：15874928
> 
> 赞同：1
> 
> 时间：2013-04-08T08:51:03.937
> 
> 标签：wso2esb, vfs

我想使用 WSO2 ESB 从网站下载 XML 文件。为简单起见，假设 URL 是静态的。

我尝试过将 VFS 作为代理服务和单独的序列都没有成功，并且在 Internet 上找不到任何相关材料。

这是序列 XML：

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="download">
   <in>
      <log level="headers">
         <property name="?" value="[download] in: started"/>
      </log>
      <property name="OUT_ONLY" value="true" scope="default" type="STRING"/>
      <property name="transport.vfs.ContentType" value="text/xml" scope="transport" type="STRING"/>
      <property name="transport.vfs.FileURI" value="http://static.nvd.nist.gov/feeds/xml/cve/nvdcve-2.0-2013.xml" scope="transport" type="STRING"/>
      <log level="headers">
         <property name="?" value="[download] in: sending over vfs"/>
      </log>
      <send>
         <endpoint>
            <address uri="http://static.nvd.nist.gov/feeds/xml/cve/nvdcve-2.0-2013.xml"/>
         </endpoint>
      </send>
      <log level="headers">
         <property name="?" value="[download] in: ended"/>
      </log>
   </in>
   <out>
      <log level="headers">
         <property name="?" value="[download] out: started"/>
      </log>
      <send/>
      <log level="headers">
         <property name="?" value="[download] out: ended"/>
      </log>
   </out>
</sequence> 
```

**那么，如何使用 WSO2 ESB 通过 HTTP下载*大文件？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-23T14:42:05.457

我有一个类似的问题，现在我已经用 API 和这段代码解决了它：

```
<api xmlns="http://ws.apache.org/ns/synapse" name="EcoRest" context="/services/ecorest">
   <resource methods="GET" uri-template="/{idFile}">
      <inSequence>
         <send>
            <endpoint>
               <http method="get" uri-template="http://slx00012001:8888/repositoryfiles/{uri.var.idFile}">
                  <suspendOnFailure>
                     <errorCodes>101500,101510,101001,101000</errorCodes>
                     <initialDuration>10</initialDuration>
                     <progressionFactor>1.0</progressionFactor>
                     <maximumDuration>10</maximumDuration>
                  </suspendOnFailure>
               </http>
            </endpoint>
         </send>
         <property name="enableSwA" value="true" scope="axis2"></property>
      </inSequence>
      <faultSequence>
         <log level="custom">
            <property name="FAULT GETTING FILE" expression="get-property('uri.var.idFile')"></property>
         </log>
         <payloadFactory media-type="json">
            <format>           {"descError":"$1", "error": "true"}           </format>
            <args>
               <arg evaluator="json" expression="$.descError"></arg>
            </args>
         </payloadFactory>
         <property name="HTTP_SC" value="500" scope="axis2" type="STRING"></property>
         <respond></respond>
      </faultSequence>
   </resource>
</api> 
```

这个 API 可以完美运行，并且可以对文件进行直通。但是如果我发送一个不存在的id_file，后端服务返回一个带有json-message的http 400，进程进入faultsequence，但是faultsequence中的payloadFactory不起作用，我不知道为什么： (

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T17:16:44.097

试试这个配置：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="download" transports="https,http,vfs" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <property name="OUT_ONLY" value="true" scope="default" type="STRING"/>
         <property name="ClientApiNonBlocking" value="true" scope="axis2" action="remove"/>
         <send>
            <endpoint>
               <address uri="vfs:file://home/secondary/file.xml"/>
            </endpoint>
         </send>
      </inSequence>
   </target>
   <parameter name="transport.vfs.Streaming">true</parameter>
   <parameter name="transport.vfs.FileURI">http://static.nvd.nist.gov/feeds/xml/cve/nvdcve-2.0-2013.xml</parameter>
   <parameter name="transport.vfs.Locking">disable</parameter>
   <description></description>
</proxy> 
```

您可以使用以下方式启动下载：

```
curl -v http://localhost:8280/services/download 
```

您可以在此处找到有关 VFS 传输特定参数的更多信息：http: [//docs.wso2.org/wiki/display/ESB460/VFS+Transport](http://docs.wso2.org/wiki/display/ESB460/VFS+Transport)。您还可以在此处找到另一个 VFS 示例：http: //docs.wso2.org/wiki/pages/viewpage.action?pageId= [16846489](http://docs.wso2.org/wiki/pages/viewpage.action?pageId=16846489)。希望这可以帮助。

# javascript - 页面加载时布局中断

> ID：15874929
> 
> 赞同：0
> 
> 时间：2013-04-08T08:51:05.733
> 
> 标签：javascript, jquery, html, wordpress

我正在使用滑块来显示一些 WordPress 帖子。当我打开页面时，它会在此期间挂起几秒钟（时间不同），布局中断（例如，滑块中的所有帖子都变得可见而不是第一个帖子），但一旦页面加载，一切都会恢复正常。

我认为这是因为 jQuery 代码加载较晚。有什么我可以做的吗？

我目前正在使用这个：

```
jQuery(document).ready(function() {
    jQuery("#foo1").carouFredSel();
}); 
```

另外，我如何检查**Firebug**是什么原因造成的？（加载哪个资源需要时间），因为它发生得如此之快，以至于我没有时间在 Firebug 上看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:52:34.157

Firebug 有一个网络面板，可让您查看浏览器发出和接收的请求/响应。

![在此处输入图像描述](https://i.stack.imgur.com/ZGXRa.png)

我假设它很可能不是 jQuery。在您访问该网站几次后，它应该在您的缓存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:55:42.893

您可以隐藏它并使其显示：无。直到它加载然后显示它

```
<script>    
jQuery(document).ready(function() {
jQuery("#foo1").carouFredSel();
jQuery("#foo1").show();
});
</script>
<div id="foo1" style="display:none"></div> 
```

# php - 验证失败时如何重新显示具有先前值的表单？

> ID：15874931
> 
> 赞同：1
> 
> 时间：2013-04-08T08:51:12.920
> 
> 标签：php, symfony, symfony-2.2

我有一个表单，它必须通过一些其他验证而不是不寻常的（大约 4 个字段相互依赖）。事情是，当它失败时，我将用户重定向回来，但随后表单丢失了它的值，我不想要它。我知道它可以通过会话来完成，但可能有一种“更健康”的方式。代码很常见：

```
public function printAction()
{
    if ($this->getRequest()->getMethod() == "POST")
    {
        $form->bindRequest($this->getRequest());
        if ($form->isValid())
        {
             .... more validation.... Failed!
             return $this->redirect($this->generateUrl("SiteHomePeltexStockStockHistory_print"));
             // and this is when I lose the values.... I dont want it
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:04:22.980

您可以对与表单相关的请求`GET`和请求使用相同的操作。`POST`如果验证失败，请不要重定向，相同的表单将重新显示输入值和验证错误消息：

```
/**
 * @Template
 */
public function addAction(Request $request)
{
    $form = /* ... */;        

    if ($request->isMethod('POST')) {
        $form->bind($request);

        if ($form->isValid()) {
            // do something and redirect
        }

        // the form is not valid, so do nothing and the form will be redisplayed
    }

    return [
        'form' => $form->createView(),
    ];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:05:17.590

进行新重定向时，您可以将参数传递到新页面：

```
$this->redirect($this->generateUrl('SiteHomePeltexStockStockHistory_print', array('name1' => 'input1', 'name2' => 'input2', 'name3' => $input3, ....))); 
```

或直接传递一个 post 值数组：

```
$this->redirect($this->generateUrl('SiteHomePeltexStockStockHistory_print', array('values' => $values_array))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:08:37.590

你可能想做这样的事情

```
class FooController extends Controller
{
    /**
     * @Route("/new")
     * @Method({"GET"})
     */
    public function newAction()
    {
        // This view would send the form content to /create
        return $this->render('YourBundle:form:create.html.twig', array('form' => $form));
    }

    /**
     * @Route("/create")
     * @Method({"POST"})
     */
    public function createAction(Request $request)
    {
        // ... Code
        if ($form->isValid()) {
            if (/* Still valid */) {
                // Whatever you do when validation passed
            }
        }

        // Validation failed, just pass the form
        return $this->render('YourBundle:form:create.html.twig', array('form' => $form));
    }
} 
```

# c# - 日历日期恢复为初始化日期 C#

> ID：15874932
> 
> 赞同：0
> 
> 时间：2013-04-08T08:51:13.237
> 
> 标签：c#, calendar

这是我的第一段代码

```
protected void Page_Load(object sender, EventArgs e)
{
    visitDateCal.SelectedDate = DateTime.Today; //defaults to today's date
} 
```

我的`Page_Load`. `visitDateCal`是日历。每当按下我的计算按钮时，日历上选择的任何内容都应该存储在 selectedDate 控件中。下面的代码：

```
DateTime dateSelectedDateTime = visitDateCal.SelectedDate; 
```

然后我在整个方法中使用该变量。但是，如果我更改日期，然后单击我的计算按钮，日期会恢复到今天的日期吗？帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:56:26.413

您只需要使用页面的 IsPostBack 属性。之后您的代码将如下所示。

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        visitDateCal.SelectedDate = DateTime.Today; //defaults to today's date
    }
} 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:58:56.357

您需要像这样修改代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostback)
         visitDateCal.SelectedDate = DateTime.Today; //defaults to today's date
} 
```

页面加载也会在回发时调用。每当创建或重新创建页面对象时。

# php - 如何在执行前在php中打印

> ID：15874943
> 
> 赞同：0
> 
> 时间：2013-04-08T08:52:01.693
> 
> 标签：php, html, flush

我有一个表单，在提交时会调用一个 php 页面（sample.php）

我的 php 页面执行了大量操作，大约需要 5 分钟的时间。我也在打印“已执行！” 在我的 sample.php 页面上。

这个 Executed 被打印出来......只有在它执行完所有内容（5分钟）之后。

我希望我的 php 页面在完成所有处理之前打印“已执行”。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:59:53.370

已经发布了几种解决方案，这些解决方案使用`ignore_user_abort()`并`flush()`在页面交付给客户端后继续后台工作。您应该开始阅读php 网站上有关[连接处理的文档](http://www.php.net/manual/en/features.connection-handling.php)

但是，如果您要求一个稳定的解决方案，我会以“sample.php”（表单操作）将接收作业的方式设计您的应用程序，将其添加到队列（可能是数据库表）并报告已添加工作。另一个进程在后台运行（可能是每个 cron 或其他）并自行运行作业。此外，我会创建一个类似“progress.php”的页面，可以在其中查看工作进度。响应可以是 json 或类似的东西，以便它可以轻松地集成到其他页面或用作您被要求的 javascript 进度条的数据馈送。

# php - 我如何保护 url 中的传递变量

> ID：15874947
> 
> 赞同：-1
> 
> 时间：2013-04-08T08:52:14.850
> 
> 标签：php, url, variables, hash

如何通过 url 保护两个页面之间的传递变量？假设我`TEST`在一页中有一个变量，并且我想将该变量传递给`test2.php`安全方法中的页面？

如何通过url转换`test variable`成页面`Hash Method`并传递？`test2.php`

**例如**

```
$test=$_POST['test']; 
echo $row['test'];

<a href="test2.php?test=$test">Test</a>

OR  

<a href="test2.php?test=$row['test']">Test</a> 
```

**test2 页面**

```
$test=$_REQUEST['test']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T09:01:22.397

通过安全，如果您的意思是希望变量可见但又想阻止用户更改变量，您可以简单地将哈希与变量一起传递。

IE

```
$variable = 'abc';
$salt = 'your secret key';
$hash = md5($salt.$variable);

<a href="page2.php?variable=$variable&hash=$hash">Page 2</a>

On the second page you can rehash to see if the value has changed or not.

$variable = $_REQUEST['variable'];
$salt = 'your secret key';
$hash = md5($salt.$variable);

if($hash == $_REQUEST['hash']){
  //do staff
} 
```

但是，这不会隐藏 URL 中的变量，您可以使用其他建议的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:55:24.287

使用 SSL（用于加密流量 - 请参阅[此处](http://httpd.apache.org/docs/2.2/ssl/)）和 POST（请参阅[此处](http://www.w3schools.com/tags/ref_httpmethods.asp)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:56:16.747

答案很简单。

*   要么您需要在 url 中使用该变量来识别特定页面及其内容
*   或者它是内部站点变量，例如授权信息 - 它必须通过会话传递。

对于第一种情况，您根本不应该“保护”这个变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T08:54:19.603

它根本不安全，因为 URL（包括 GET 参数）通常存储在 httpd 日志中。所以使用 POST 进行传输，使用 SSL 进行传输。如果您需要使用 GET，您可以尝试加密您的数据，但请注意某些 Web 浏览器对使用的 URL 的最大长度有限制，因此 GET 中的数据过多可能会使他们感到困惑

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T08:54:27.800

安全散列函数是一种方法，因此不适合传递值。最安全的方法是使用 SSL，并发布您的变量，以便它们不会显示在查询字符串/地址栏中。

# javascript - Javascript 追加/删除元素

> ID：15874952
> 
> 赞同：0
> 
> 时间：2013-04-08T08:52:25.260
> 
> 标签：javascript, jquery, html

我有一个问题。是否可以使用 javascript append 添加删除`<span>`元素？

当我尝试删除添加的跨度时，什么也没有发生。

像这样：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#SelectBoxData span').click(function(){
        var StatusID = this.id;
        var StatusIDSplit = StatusID.split("_");
        var StatusText = $('#SelectBoxData #' + StatusID).text();

        $("#SelectBox").append('<span id=' + StatusID + '>' + StatusText + '</span>');
        $("#SelectBoxData #" + StatusID).remove();

        InputValue = $("#StatusID").val();
        if(InputValue == ""){
            $("#StatusID").val(StatusIDSplit[1]);
        }
        else{
            $("#StatusID").val($("#StatusID").val() + ',' + StatusIDSplit[1]);
        }
    });

    $('#SelectBox span').click(function(){
                var StatusID = this.id;
        $("#SelectBox #" + StatusID).remove();
    });
});
</script>

<div id="SelectBoxBG">
    <div id="SelectBox"><div class="SelectBoxBtn"></div></div>
    <div id="SelectBoxData">
        <span id="StatusData_1">Admin</span>
        <span id="StatusData_2">Editor</span>
        <span id="StatusData_4">Test 1</span>
        <span id="StatusData_6">Test 2</span>
    </div>
    <input type="hidden" id="StatusID" />
</div> 
```

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:59:49.397

是的，您可以删除它们。但是，您不能`click`在它们存在之前向它们添加事件处理程序。这段代码：

```
$('#SelectBox span').click(function(){
    var StatusID = this.id;
    $("#SelectBox #" + StatusID).remove();
}); 
```

只会在代码运行时向其中的元素添加`click`事件处理程序（因此，根据您提供的 HTML，零元素）。如果您希望事件处理程序对动态添加的元素做出反应，那么您需要使用一种称为[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)的技术，使用以下函数：`<span>``#SelectBox``.on()`

```
$('#SelectBox').on('click', 'span', function() {
    $(this).remove(); // equivalent to the code you had before
}); 
```

# string - LibreOffice Calc 宏文本搜索

> ID：15874956
> 
> 赞同：0
> 
> 时间：2013-04-08T08:52:34.100
> 
> 标签：string, search, macros, calc

我在为 LibreOffice Calc 3.6.2.2 编写宏时需要帮助

我要做的是将单元格编号传递给函数，然后该函数分析单元格的内容（文本字符串）并根据其内容返回一个值。

我当前的代码：

```
Function mColor2(mCellAdd)

    Dim l(5) as String 'declare list of variables

    l(0)="red"
    l(1)="blue"
    l(2)="yellow"
    l(3)="green"

    for i=LBound(l) To UBound(l) 'cycle from start to end of list 

        If InStr(mCellAdd,l(i))<>0 Then
            mColor2=l(i)
        Else
            mColor2="not known" 
        End If

    Next        

End Function 
```

但我只得到“不知道”的回报。

我认为这是因为我没有正确处理从 InStr() 返回的值。

实际上我不确定我使用的是正确的功能，因为我只需要检查单元格的内容是否包含我的子字符串......

结果截图：

![](https://i.stack.imgur.com/VPta2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:10:28.177

假设输入字符串（假设它作为字符串传递？）是“我的蓝狗”。然后你的函数将循环运行 5 次（应该是 4 次？）。首先它寻找“红色”，但没有找到，因此 mColor2 设置为“未知”。然后它寻找“蓝色”，找到了，因此将 mColor2 设置为“蓝色”。然后它寻找“黄色”，并将 mColor2 设置回“未知”。“绿色”也一样，然后我不知道当我 4 岁时它会寻找什么。

在任何情况下，您都不想将 mColor2 重置为“未知”，只需摆脱您的 Else。

如果输入字符串包含多个您要查找的字符串，您是否已决定该怎么做？您是想在找到“红色”后立即退出，还是继续并记住最后找到的那个？

# javascript - 使用 jQuery 按下键时显示图像

> ID：15874961
> 
> 赞同：1
> 
> 时间：2013-04-08T08:52:46.643
> 
> 标签：javascript, jquery

我试图制作一个简单的应用程序，当在用户键盘上按下一个键时，会出现一个与该字母相对应的图像。我想对整个字母表（a，b，c ...）执行此操作

如果 a 被按下 a.jpg 会出现在我的页面上，如果 r 被按下 r.jpg 会出现等等。

我打算用一个巨大的 if else 语句列表来做到这一点，只是我确定必须有另一种方法？

```
var ctrlPressed = false;
$(window).keydown(function(evt) {
  if (evt.which == 17) { // ctrl
    ctrlPressed = true;
      alert('sdf');
  }
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:00:47.877

这就是我要这样做的方式：

```
var letters = "abcdefghijklmnopqrstuvwxyz";
letters = letters.split("");
//I'm lazy; you should define an array of letters

$(window).keydown(function(e){
    key = e.which - 65; //makes a-z = 1-27
    key = letters[key];
    $('img[src="' + key + '.jpg"]').show();
} 
```

这是一个工作的[jsFiddle](http://jsfiddle.net/64JZ4/)

**来源**

[jQuery API - keydown](http://api.jquery.com/keydown/)
[jQuery API - 属性等于选择器](http://api.jquery.com/attribute-equals-selector/)
[MDN - String.split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:10:28.560

您应该使用字母 KeyCodes 命名您的图像文件。

例如输入的字母“a”必须命名为“97.jpg”。

因此，您可以像这样从 jquery 中调用它：

```
$(document).ready(function(){
    $("#input").bind('keypress', function (e) {
        console.log(e.which);  //or alert(e.which);  
        $("#Image").attr("src", e.which + ".jpg");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:05:29.180

我会得到键值，然后再次匹配它。尝试类似：

```
$(window).keydown(function(e) {
    var key = String.fromCharCode(e.which).toLowerCase();
    if(/[a-z]/i.test(key)) {
        alert(key+'.jpg');
    }
}); 
```

演示：http: [//jsfiddle.net/BMZaF/](http://jsfiddle.net/BMZaF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:06:12.583

似乎 event.which 对于字母对应于 ASCII 值。因此，您可以执行以下操作：

```
$(window).keydown(function(evt) {
  if (evt.which >= 65 && evt.which <= 90){
    $('img[src="' + String.fromCharCode(evt.which).toLowerCase() + '.jpg"]').show();        
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T09:04:24.127

索引映射到 evt.which 值的图像引用数组怎么样

```
var images=[];
images[64]='a.jpg';
images[65]='b.jpg';
images[66]='c.jpg';
//...etc...

$(window).keydown(function(evt) {
    var image=images[evt.which]'
    if(image){
        alert(image);
    }
}) 
```

有点难看，可能不是最有效的，但很容易理解:)

# vb.net - 您如何使打开的表单成为唯一可选择的表单？

> ID：15874962
> 
> 赞同：1
> 
> 时间：2013-04-08T08:52:50.550
> 
> 标签：vb.net, forms

如何使从另一个表单（例如设置表单）打开的 VB.net 表单是唯一可以选择的表单？

我正在使用 Visual Studio 2012，我看不到任何明显的工具，但我不确定我在寻找什么。我尝试了各种可能性，例如`TopMost = True`，但这还不是。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:58:04.487

只需使用[`ShowDialog`](http://msdn.microsoft.com/de-de/library/system.windows.forms.form.showdialog%28v=vs.100%29.aspx)而不是[`Show`](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)打开新表单。

这会将表单作为[模式对话框](http://en.wikipedia.org/wiki/Modal_window)打开，并且当它打开时，用户无法选择其他表单。

# c# - 使用詹金斯在 C# 中进行单元测试

> ID：15874965
> 
> 赞同：1
> 
> 时间：2013-04-08T08:53:03.393
> 
> 标签：c#, unit-testing, shell, jenkins

我知道，可以在 jenkins 服务器上使用 C# 开始单元测试。我正在使用 GIT，我的 IDE 是 Eclipse。

据我所知，我必须使用 shell 脚本完成所有工作？这是真的？

我是初学者，有谁能帮帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:03:12.270

C# 使用 Eclipse？哇！

您需要的是找到一种从命令行运行测试的方法。一旦你有了它，在 PowerShell 中创建一个构建脚本（你可以使用任何 shell 语言，我的推荐是 PowerShell）：

1.  从 GIT 获取最新版本的代码（可能你可以在 Jenkins 中使用 GIT 插件）
2.  编译代码（不确定msbuild是否可以帮助你，我认为是可能的。）
3.  使用先前获得的命令行运行单元测试。
4.  配置 Jenkins 构建以报告测试输出（通常指向输出 .htm）

# c# - 对电话号码使用正则表达式

> ID：15874966
> 
> 赞同：-4
> 
> 时间：2013-04-08T08:53:11.597
> 
> 标签：c#, regex

我知道这个问题在这里被问了一千次，但我还没有掌握它。如果文本框与电话号码格式匹配，我需要帮助来检查它。格式应该是这样的：

`000-000-000`或`(+000)00-000-000`。有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T08:54:46.957

试试这个模式，

```
^(\(\+\d{3}\)|\d)\d{2}(-\d{3}){2}$ 
```

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/wRnjB.jpg)

生成说明：

*   在行首断言位置（在字符串的开头或换行符之后）`^`
*   匹配下面的正则表达式并将其匹配捕获到反向引用编号 1`(\(\+\d{3}\)|\d)`
    *   匹配下面的正则表达式（仅在此选项失败时尝试下一个选项）`\(\+\d{3}\)`
        *   从字面上匹配字符“（”`\(`
        *   从字面上匹配字符“+”`\+`
        *   匹配单个数字 0..9`\d{3}`
            *   正好3次`{3}`
        *   从字面上匹配字符“)”`\)`
    *   或者匹配下面第2个正则表达式（如果这个匹配失败，整个组都失败）`\d`
        *   匹配单个数字 0..9`\d`
*   匹配单个数字 0..9`\d{2}`
    *   正好2次`{2}`
*   匹配下面的正则表达式并将其匹配捕获到反向引用编号 2`(-\d{3}){2}`
    *   正好2次`{2}`
    *   注意：您重复了捕获组本身。该组将仅捕获最后一次迭代。在重复组周围放置一个捕获组以捕获所有迭代。`{2}`
    *   从字面上匹配字符“-”`-`
    *   匹配单个数字 0..9`\d{3}`
        *   正好3次`{3}`
*   在行尾断言位置（在字符串末尾或换行符之前）`$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:56:06.013

模式 1 是`\d{3}\-\d{3}\-\d{3}`

模式 2 是`\(\+\d{3}\)\d{2}\-d{3}\-\d{3}`

所以你需要匹配 Pattern1 OR Pattern2：

```
(\d{3}\-\d{3}\-\d{3})|(\(\+\d{3}\)\d{2}\-d{3}\-\d{3}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:54:58.103

```
(?:\d|\(\+\d{3}\))\d{2}(?:-\d{3}){2} 
```

或者，如果您考虑性能，最好将其更改为：

```
(?:\(\+\d{3}\)|\d)\d{2}(?:-\d{3}){2} 
```

# python - 将 PMML 中的 SVM 模型导入 Java 或 Python？

> ID：15874969
> 
> 赞同：4
> 
> 时间：2013-04-08T08:53:23.043
> 
> 标签：python, r, svm, libsvm, pmml

**简短的问题**：是否有用于 Java、Python 或任何其他支持 SVM 模型的主要编程语言的 PMML 接口？

**背景**：我使用包中的`ksvm`函数在 R 中训练了一个 SVM 模型`kernlab`。现在我想在不同的软件中使用这个模型。要从 R 中导出它，我想我可以通过`pmml`R 的包使用 PMML（预测模型标记语言）。

但是，我找不到任何适用于 Java、Python 或基本上任何允许导入此类模型的语言的库。[数据挖掘组](http://www.dmg.org/products.html)列出了很多 PMML 接口，但这些主要是用于统计的特定工具。还有[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)通用库，但不清楚如何使用它来将模型从一个接口迁移到另一个接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T16:25:15.553

您可以导入以任何语言训练的模型。有一个 Python[使用 scikit-learn 重新初始化学习的线性模型的示例](https://stackoverflow.com/questions/16642545/reinitializing-learned-linear-models-with-scikit-learn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:19:31.613

您可以使用 Zementis ADAPA 评分引擎来部署您的模型，并且他们可以通过 Web 服务访问它。根据我的经验，ADAPA 也可以作为 Java 库使用，因此您可以针对其 Java API 进行编码。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T03:09:29.167

一个名为“Pattern”的库将 PMML 模型转换为 Java 中的级联应用程序。然后，您可以在 Hadoop 或其他 Java 应用程序中运行模型评分。 [https://github.com/Cascading/pattern](https://github.com/Cascading/pattern)

有一个用于 Pattern 的 SVM impl - 正在为库的最新更新而重写。检查开发者电子邮件列表：[https ://groups.google.com/forum/?fromgroups#!forum/pattern-user](https://groups.google.com/forum/?fromgroups#!forum/pattern-user)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-26T12:02:52.723

您可以将 Weka 用作 Java API 或独立工具，这适用于带有一些分类器的 PPML。在 weka API 中检查这些类：weka.classifiers.pmml.consumer.PMMLClassifier 和 weka.classifiers.pmml.consumer.SupportVectorMachineModel。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-04T16:59:36.793

我相信 JPMML（Java Evaluator PMML API）会做你想做的事。

# javascript - 在 Safari 中多次播放 HTML5 音频时出现问题

> ID：15874972
> 
> 赞同：2
> 
> 时间：2013-04-08T08:53:27.623
> 
> 标签：javascript, safari, html5-audio

这是我的代码：

html:

```
<div id="audio-files" style="display: none;">
    <audio id="click-sound">
        <source src="/assets/click.mp3" type="audio/mpeg">
        <source src="/assets/click.wav" type="audio/wav">
    </audio>
</div> 
```

JavaScript：

```
play: function() {
  var audio = $('#audio-files').find('audio#click-sound');
  if (audio.length) {
    audio[0].play();
  }
} 
```

期望的行为：
当我调用 play() 时，声音应该播放一次。对服务器的请求应该只有 1 个 - 在页面加载时。多次调用 play() 不应触发多个请求。

实际行为：
- Firefox (19.0.2)、Chrome(26.0.1410.43) 和 Opera(12.15) 按预期工作。
- Safari (6.0.3) 只播放一次所需的声音，然后在被要求时拒绝播放它或任何其他声音。

`audio[0].load()`我之前尝试过添加，`audio[0].play()`但这会导致浏览器每次被要求播放音频时都会发出请求，这是完全不可取的。

小提琴：http: [//jsfiddle.net/Tpvfm/](http://jsfiddle.net/Tpvfm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:44:11.397

我认为您的示例 mp3 文件有问题。我刚刚从您的小提琴中删除了它（mp3），它可以在我的 OSX 上的 Safari 中使用。

```
<div id="audio-files" style="display: none;">
  <audio id="click-sound">
    <source src="/assets/click.wav" type="audio/wav">
  </audio>
</div> 
```

小提琴：[73GCX](http://jsfiddle.net/danilopopeye/73GCX/)

# web-services - 如何在 Grails 中创建一个 REST Web 服务？

> ID：15874973
> 
> 赞同：0
> 
> 时间：2013-04-08T08:53:27.690
> 
> 标签：web-services, rest, grails

这个想法是从网站（在 php 中）调用我的应用程序（在 Grails 中）的方法。该应用程序将以 json 格式提供数据。

网站和应用程序托管在两个不同的服务器中。该网站在 Yahoo 上，应用程序在 Rackspace 上。

现在，我想在我的 Grails 应用程序中创建一个 Web 服务，它以 json 格式提供城市列表。

**市级**

```
 class City {
      String name
      String code
   } 
```

我如何编写Web服务方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T05:34:18.920

您只需要域上的注释 @Resource(uri='/cities') 并调用 url/cities.json （但是，它的'n RESTful）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:26:59.830

试试 grails jaxrs 插件（[https://github.com/krasserm/grails-jaxrs](https://github.com/krasserm/grails-jaxrs)），它可以完全按照您的要求做，没有任何麻烦。

只需安装它，`Resource`使用引入的`create-resource`命令创建一个对象，然后根据需要创建和注释方法。所有其他事情都由插件管理，因此您不必担心`Controller`或`UrlMapping`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:33:57.457

您将需要使用一些工具，首先您将创建一个控制器来处理请求并将它们推送到您的服务层。

您可以使用 URL 映射使其更加 RESTFul 查看[文档](http://grails.org/doc/2.1.0/guide/single.html#REST)，这样所有 http 方法都将映射到控制器中的操作。

另外，如果您要使用相当多的 json，我建议您从[gson 插件](http://grails.org/plugin/gson)开始，它具有更完整的功能集，然后是内置的 JSON 支持。

上面评论中的链接也是一个很好的阅读资源。

我发现我大部分时间都希望支持接受标头，在这种情况下，您需要使用以下代码更新配置。有关更多信息，请参阅[withFormat 文档](http://grails.org/doc/2.2.x/ref/Controllers/withFormat.html)。

```
grails.mime.use.accept.header = true 
```

# iphone - 如果 UIImagePickerControllerSourceTypePhotoLibrary 允许编辑 NO

> ID：15874980
> 
> 赞同：0
> 
> 时间：2013-04-08T08:53:50.383
> 
> 标签：iphone, ios, cocoa-touch

当我在相机上使用allowEditing = NO时，它工作正常。

作品：

```
if( [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{
  if(imagePicker == nil) imagePicker = [[UIImagePickerController alloc] init];
   imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
   imagePicker.allowsEditing = NO;

  [self presentViewController:imagePicker animated:YES completion:nil];
} 
```

但是如果我尝试将它放在照片库中，我仍然会得到allowsEditing YES。

不工作：

```
if( [UIImagePickerController UIImagePickerControllerSourceTypePhotoLibrary])
{
  if(imagePicker == nil) imagePicker = [[UIImagePickerController alloc] init];
   imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
   imagePicker.allowsEditing = NO;

  [self presentViewController:imagePicker animated:YES completion:nil];
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:02:34.683

```
picker.allowsEditing = YES;
picker.delegate = self; 
```

# opengl - 如何获得 GL/gl.h

> ID：15874985
> 
> 赞同：1
> 
> 时间：2013-04-08T08:54:14.697
> 
> 标签：opengl

我的操作系统是 Ubuntu 11。当我想运行**./mkmkfiles.imake**时，它​​没有找到**GL/gl.h**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:01:26.027

尝试安装 MESA 包开发头文件：

```
apt-get install mesa-common-dev 
```

您可以使用 dpkg 检查此软件包是否提供了您要查找的文件：

```
dpkg -L mesa-common-dev 
```

您还可以使用 apt-file 查找提供此文件的软件包：

```
apt-file search GL/gl.h 
```

# c# - 通过 OLEDB 更新 Excel 字段会删除定义的单元格名称

> ID：15874987
> 
> 赞同：1
> 
> 时间：2013-04-08T08:54:21.020
> 
> 标签：c#, excel, oledb, ms-jet-ace

我正在使用 OLEDB 更新 excel 文件，这是我遇到问题的更新示例之一：

```
OleDbConnection myConnection;
OleDbCommand myCommand = new OleDbCommand();

myConnection = new OleDbConnection(
     "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\my_template.xslm; Extended Properties=\"Excel 12.0 Macro;HDR=No;\""
);
myConnection.Open();
myCommand.Connection = myConnection;

string sql = "Update [Sheet1$D16:D16] SET F1 = 'Some Text Here'"; 
myCommand.CommandText = sql;
myCommand.ExecuteNonQuery(); 
```

该更新工作正常，更新我想要的单元格。但是，它还会更新先前定义的单元名称。公式中使用的单元格名称。您可以在该图像上看到问题：

![在此处输入图像描述](https://i.stack.imgur.com/vlvzH.jpg)

以前有人遇到过这个问题吗？

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:23:17.127

这不是一个好的答案，但如果你有压力......你可以检查名称是如何定义的 - 它是工作表还是全局的本地，然后使用替代方法测试它是否仍然失败......

接下来，您可以检查驱动程序是否有故障......即之前是否正常工作 - 有什么改变

# mysql - Mysql中自动更新2个表或多个表

> ID：15874995
> 
> 赞同：2
> 
> 时间：2013-04-08T08:54:41.180
> 
> 标签：mysql, sql

我有问题

想问一下，rekap_nilai表已经录入的数据怎么改。这是表是rekapan rekap_nilai 表nilai_student 的总和。

我根据触发器输入表 B

```
mysql> select * from nilai_student; 
```

```
+----+-------+------+--------+
| 编号 | 姓名 | idmp | 汝来 |
+----+-------+------+--------+
| 1 | 乌丁 | 1 | 80 |
| 2 | 乌丁 | 2 | 60 |
| 3 | 妈妈 | 1 | 75 |
+----+-------+------+--------+

```

表rekap_nilai

```
mysql> desc rekap_nilai; 
```

```
+-----------+-------------+------+-----+--------- +----------------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+-----------+-------------+------+-----+--------- +----------------+
| 编号 | 整数(11) | 否 | 优先级 | 空 | 自动增量 |
| 学生 | 整数(11) | 是 | | 空 | |
| 姓名 | varchar(100) | 是 | | 空 | |
| 汝来 | 双 | 是 | | 空 | |
+-----------+-------------+------+-----+--------- +----------------+

```

```
mysql> select * from rekap_nilai; 
```

```
+----+------------+-------+--------+
| 编号 | 学生 | 姓名 | 汝来 |
+----+------------+-------+--------+
| 1 | 1 | 乌丁 | 140 |
| 2 | 2 | 妈妈 | 75 |
+----+------------+-------+--------+
2 行（0.00 秒）

```

如果有补习学生行为，当**更新**nilai 列中的表**nilai_student**时，会自动在 nilai 列中的表 rekap_nilai 中更新

例子

现在名称“Udin”在**id 2 中有****nilai** 60 ，他想要补救。当他进行补救时，我想**更新**他的 nilai = 70 ，然后在表 rekap_nilai 中。udin 自动更新为**nilai** = 150

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:43:33.830

您可以编写一个在更新表时执行的触发器，`nilai_student`如下所示

```
Delimiter ///
create trigger update_rekap_nilai after update on nilai_student 
for each row begin
update recap_nilai set nilai = nilai - Old.nilai + New.nilai where name=Old.name
end;
///
Delimiter ; 
```

希望这可以帮助 ！！******